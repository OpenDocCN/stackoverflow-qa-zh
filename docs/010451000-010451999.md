# StackOverflow 问答 10451000-10451999

# c++ - COM 智能指针如何重置为新实例？

> ID：10451000
> 
> 赞同：0
> 
> 时间：2012-05-04T14:41:19.633
> 
> 标签：c++, com, reset, smart-pointers

使用 c++/boost 的人都知道，我们可以轻松地将智能指针重置为新实例（旧实例同时销毁）。我想知道我们如何为 COM 智能指针做到这一点？

_COM_SMARTPTR_TYPEDEF(IMyClass, __uuidof(IMyClass));

```
//normal class A
class A{

  IMyClass m_spIMyClassObj; //this COM smart pointer is a member variable of a normal class
}; 
```

我使用以下命令初始化 COM 智能指针：

```
m_spIMyClassObj.CreateInstance(__uuidof(MyLib::IMyClass)); 
```

这很好，但是在 A 的生命周期中，我需要将 COM 智能指针 m_spIMyClassObj 重置为 IMyClass 的新实例，我该怎么做（还要确保清理旧的 ID）。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:14:09.273

只需`m_spIMyClassObj.CreateInstance(__uuidof(MyLib::IMyClass));`再次调用。 `m_spIMyClassObj`将被重新分配以指向新实例，并且旧实例上的引用计数将减一。如果原始对象上没有未完成的引用，它将自行销毁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:52:26.470

只需调用[Release](http://msdn.microsoft.com/en-US/library/66h3zeec%28v=vs.80%29.aspx)，然后再次使用 CreateInstance。

# jquery-ui - jquery UI 可拖动 + 可排序（取消接收）

> ID：10451005
> 
> 赞同：4
> 
> 时间：2012-05-04T14:41:40.040
> 
> 标签：jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我的场景是我有一个可拖动但不可排序的项目列表和另一个可排序的列表。我想要实现的是从可拖动对象拖动到可排序对象中，但是当我将项目放入可排序对象时，我想发出 ajax 请求，并根据答案将项目插入可排序对象中。我尝试在 beforeStop 上使用或接收可排序的事件以取消添加到可排序的项目，但没有找到解决方案。我在这里做了一个 jsfiddle [http://jsfiddle.net/5pTCd/21/](http://jsfiddle.net/5pTCd/21/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-22T12:00:19.820

为什么不在接受/恢复设置中使用您的可拖动/可放置？

这是完成**接受/恢复拖放的理论方法：**

首先，如果不接受，您需要将可拖动设置为恢复：

```
$(".drag").draggable({ revert: 'invalid' }); 
```

然后，您当然可以定义 droppable 中有效的内容：

```
$(".drop").droppable({ accept: '.drag' });​ 
```

但是感谢 jQuery UI 中包含的魔法粉，您可以插入一个函数作为“accept”的值，它的返回值将定义您接受的有效元素：

```
$(".drop").droppable( { accept: function() {
    // return true or false
} });​ 
```

作为替代方案，您可以使用 dragstart 事件来更改 droppable 的接受选项：

```
$(".drag").draggable({
    start: function() { 
    // your ajax call and then a callback with :
    $(".drop").droppable("option","accept","#thisItemsID") }
}); 
```

# powerbuilder - PowerBuilder 应用程序 - 调试

> ID：10451006
> 
> 赞同：1
> 
> 时间：2012-05-04T14:41:43.373
> 
> 标签：powerbuilder

在 PowerBuilder 应用程序中，如何获取 time:minute:seconds 详细信息哪个函数在 (hh:mm:ss) 时间内执行以及哪个循环语句需要更多时间来执行？

有没有像PBDEBUG这样的命令？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:09:49.833

如果您想对代码进行一些分析

1-转到`System Options`/ `Profiling`，检查`Enable Tracing`并输入不存在的文件的路径`Trace file Name`。此外，选择要调查的跟踪活动。

2 - 启动您的应用程序并执行您要分析的任务

3 - 停止你的程序

4 - 在 Powerbuilder 中，`File`//并选择其中一个分析查看器，介于`New...`或之间，具体取决于分析类型。`Tool``Profiling class view``Profiling routine view``Profiling trace view`

通常，我会通过 Trace 视图获得一些有用的计时信息：时间和命中计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:03:38.163

要检测一段特定的代码，您可以使用该`cpu`函数来获取一段代码之前和之后的处理器时间。如果您使用的是 PFC，您可以将数据放入调试日志中。如果您不使用 PFC，则可以将数据写入文件。这非常有用，我们已经在我们的框架中添加了性能监控。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T07:37:52.760

对于 Powerbuiler，ThickGrid 提供了一起跟踪事件函数和 SQL 的最佳解决方案。我发现这很容易。您可以查看 www.thickgrid.com，他们将帮助您集成该功能。

# eclipse-wtp - 我在哪里可以获得 WTP（Web 工具平台）的源代码

> ID：10451007
> 
> 赞同：-2
> 
> 时间：2012-05-04T14:41:45.963
> 
> 标签：eclipse-wtp

我想扩展 WTP（例如自定义个人向导），我需要查看 WTP 的源代码，然后我可以扩展它。

顺便说一句，我想创建自己的“WTP”，而不仅仅是创建个人向导。你知道源代码在哪里吗？所以我可以将它附加到 Eclipse 并进行调查

我在哪里可以获得 WTP 的源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:46:59.987

您无需查看 WTP 的源代码即可创建个人向导。有足够的文档（比如[这里](http://www.eclipse.org/articles/Article-BuildingProjectFacets/tutorial.html)，一篇 Eclipse 文章！）。为了更具体地解决您的问题，[这里是](http://www.eclipse.org/articles/Article-BuildingProjectFacets/tutorial.html#adding.wizard.pages)创建您自己的个人向导的链接！

# java - 如何冻结滚动窗格内的 JTable 行选择

> ID：10451008
> 
> 赞同：1
> 
> 时间：2012-05-04T14:42:00.453
> 
> 标签：java, swing, jtable, jscrollpane

我有一个经常更新的 JTable。它位于滚动窗格内。

有时我们会看到一条我们想深入研究的消息。不幸的是，由于更新的数量，消息将在我们完成查看之前滚动到可见屏幕之外。

我希望能够在我们检查消息时冻结视口/滚动，但仍然允许表模型使用新消息进行更新。

我可以使用以下代码将所选行移至顶部：

```
 int firstSelectedRow = table.getSelectedRow();
        Rectangle rowLocation = table.getCellRect(firstSelectedRow, 0, false);
        scroll.getVerticalScrollBar().setValue(rowLocation.y);
        freezeScrolling.setText("Resume Updates"); 
```

但这仅在按下按钮时发生，然后它会迅速滚动。

有没有办法告诉视口/滚动窗格冻结选择并关闭它，以便滚动窗格按照您的预期更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T10:36:04.003

好的，这个取笑了我很多，所以我花了一些时间想办法解决这个问题。我找到了两个选择：

1.  我更喜欢一个，因为我发现它更简单：阻止表模型的新条目并将它们存储在缓冲区中。每当我们解冻时，我们都会将缓冲区刷新到表模型中。
2.  第二个选项包括定位当前顶部可见行。如果用户滚动，我们捕获顶部可见行。随着模型的更新，我们在表中找到捕获的行，并将视口位置设置为该位置。

这是一个 SSCCE，它说明了这两种机制（不要介意代码设计的糟糕，我测试了一堆东西——扩展 JScrollPane 实际上不是一个好主意，它都可以在外部完成）。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.event.TableModelEvent;
import javax.swing.event.TableModelListener;
import javax.swing.table.DefaultTableModel;

public class Tables {

    private static class JScrollPaneExtension extends JScrollPane implements TableModelListener, AdjustmentListener {
        private boolean frozen = false;
        private Vector<String> rowData;
        private final JTable table;
        private final MyTableModel tableModel;

        private JScrollPaneExtension(JTable table, MyTableModel tableModel) {
            super(table);
            this.table = table;
            this.tableModel = tableModel;
            tableModel.addTableModelListener(this);
            getVerticalScrollBar().addAdjustmentListener(this);
        }

        public boolean isFrozen() {
            return frozen;
        }

        public void setFrozen(boolean frozen) {
            if (frozen != this.frozen) {
                this.frozen = frozen;
                if (frozen) {
                    captureCurrentTopRowData();
                } else {
                    rowData = null;
                }
            }
        }

        private void captureCurrentTopRowData() {
            int row = table.rowAtPoint(getViewport().getViewPosition());
            if (row > -1) {
                rowData = (Vector<String>) tableModel.getDataVector().get(row);
            }
        }

        @Override
        public void adjustmentValueChanged(AdjustmentEvent e) {
            if (frozen) {
                captureCurrentTopRowData();
                scrollToRowData();
            }
        }

        @Override
        public void tableChanged(TableModelEvent e) {
            scrollToRowData();
        }

        private void scrollToRowData() {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    if (frozen) {
                        int index = tableModel.getDataVector().indexOf(rowData);
                        getViewport().setViewPosition(table.getCellRect(index, 0, true).getLocation());
                    }
                }
            });
        }

    }

    public static class MyTableModel extends DefaultTableModel {
        private int count;

        private boolean frozen = false;

        private List<Vector<String>> buffer = new ArrayList<Vector<String>>();

        public MyTableModel() {
            addColumn("Test");
        }

        public void insertNewRow() {
            Vector<String> rowData = createNewRowData();
            if (isFrozen()) {
                buffer.add(rowData);
            } else {
                insertRow(0, rowData);
            }
        }

        private Vector<String> createNewRowData() {
            Vector<String> data = new Vector<String>(1);
            data.add("Hello-" + (count++));
            return data;
        }

        public boolean isFrozen() {
            return frozen;
        }

        public void setFrozen(boolean frozen) {
            if (frozen == this.frozen) {
                return;
            }
            this.frozen = frozen;
            if (!frozen) {
                flushBuffer();
            }
        }

        private void flushBuffer() {
            for (Vector<String> rowData : buffer) {
                insertRow(0, rowData);
            }
        }
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        final MyTableModel model = new MyTableModel();
        JTable table = new JTable(model);
        final JScrollPaneExtension scroll = new JScrollPaneExtension(table, model);
        JPanel panel = new JPanel();
        final JButton freeze = new JButton("Freeze");
        freeze.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                if (model.isFrozen()) {
                    freeze.setText("Freeze model");
                } else {
                    freeze.setText("Continue");
                }
                model.setFrozen(!model.isFrozen());
            }
        });
        final JButton freeze2 = new JButton("Freeze scroll");
        freeze2.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                if (scroll.isFrozen()) {
                    freeze2.setText("Freeze scroll");
                } else {
                    freeze2.setText("Resume scroll");
                }
                scroll.setFrozen(!scroll.isFrozen());
            }
        });
        scroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
        frame.add(scroll);
        panel.add(freeze);
        panel.add(freeze2);
        frame.getContentPane().add(panel, BorderLayout.NORTH);
        frame.pack();
        frame.setVisible(true);
        Timer t = new Timer();
        t.scheduleAtFixedRate(new TimerTask() {

            @Override
            public void run() {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        model.insertNewRow();
                    }
                });
            }
        }, new Date(), 300);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T19:36:55.063

您也许可以调整[此处](https://stackoverflow.com/a/7519403/230513)显示的方法。它根据`getValueIsAdjusting()`in的值调整滚动`AdjustmentListener`。点击拇指暂停滚动；释放以恢复。

# wpf - 在 DatePicker 中覆盖日历样式

> ID：10451011
> 
> 赞同：3
> 
> 时间：2012-05-04T14:42:03.513
> 
> 标签：wpf, xaml, calendar, datepicker

所以我前一阵子写了这段代码，它曾经工作得很好，但最近不知什么原因现在它根本不起作用。这是xml...

```
<DatePicker SelectedDate="{Binding Criteria}" IsEnabled="{Binding IsEnabled}" Width="130" HorizontalAlignment="Right">
    <DatePicker.CommandBindings>
        <CommandBinding Command="controls:DateCommands.SelectToday" CanExecute="CommandBinding_CanExecute" Executed="CommandBinding_Executed"/>
    </DatePicker.CommandBindings>
    <DatePicker.CalendarStyle>
        <Style TargetType="{x:Type Calendar}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Calendar}">
                        <TabControl>
                            <TabItem Header="Calender">
                                <CalendarItem Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" Style="{TemplateBinding Calendar.CalendarItemStyle}" />
                            </TabItem>
                            <TabItem Header="Relative Time">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Button Grid.Column="0" Command="controls:DateCommands.SelectToday" CommandParameter="Today" Content="Today" />
                                    <Button Grid.Column="1" Command="controls:DateCommands.SelectToday" CommandParameter="Yesterday" Content="Yesterday" />
                                </Grid>
                            </TabItem>
                        </TabControl>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </DatePicker.CalendarStyle>
</DatePicker> 
```

基本上，我将覆盖日期选择器的日历并放入一个选项卡控件，允许用户选择相对时间宏而不是实际时间（导致生成的查询始终使用该相对时间）。这曾经可以正常工作，但是现在每当我尝试从日历中进行选择时，什么都没有发生，并且在框或支持属性中也没有填充任何值。

我取出代码并将其转储到一个新项目中进行实验，但无法让这个简单的案例工作......

```
<DatePicker Width="130" HorizontalAlignment="Right">
    <DatePicker.CalendarStyle>
        <Style TargetType="{x:Type Calendar}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Calendar}">
                        <CalendarItem Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" Style="{TemplateBinding Calendar.CalendarItemStyle}" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </DatePicker.CalendarStyle>
</DatePicker> 
```

这段代码做同样的事情，每当你试图从日历中选择一个日期时，什么都没有发生。这曾经有效，据我所知，没有任何改变，任何人都对正在发生的事情有任何见解，或者可能更好地实现我正在尝试做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:51:11.187

我想到了。无论出于何种原因，这部分对于这一切的运作都很重要......

```
<CalendarItem x:Name="PART_CalendarItem"... /> 
```

我不太清楚为什么，但我确实记得在某些时候删除它认为它没有做任何事情，但是没有那条线，选择的日期永远不会填充文本框或支持属性。

# c# - LINQ 按 n 列过滤数据表

> ID：10451015
> 
> 赞同：0
> 
> 时间：2012-05-04T14:42:12.037
> 
> 标签：c#, .net, linq, datatable

我已经让这个类像分页一样检索数据表的一部分，一切正常，但问题是该方法只能按一列过滤，我不知道如何使用 LINQ 归档它。我想传递要过滤的 n 列和 n 表达式。

示例：列：姓名，表达式“jonh” 列：城市，表达式“佛罗里达”

这是我的课：

```
public class Paging
{
    public enum Operator
    {
        Equal,
        Like
    }

    public static DataTable Page(DataTable dataTableToPage, int pageSize, int pageNumber, string columnToFilter, string expression, out int totalrecords, Operator Operator)
    {
        int skip = (pageNumber - 1) * pageSize;

        IEnumerable<DataRow> query = null;

        if (Operator == Operator.Equal)
        {
            query = (from dr in dataTableToPage.AsEnumerable()
                     where dr[columnToFilter].ToString() == expression
                     select dr);
        }
        else if(Operator == Operator.Like)
        {
            query = (from dr in dataTableToPage.AsEnumerable()
                     where dr[columnToFilter].ToString().IndexOf(expression, StringComparison.OrdinalIgnoreCase) >= 0
                     select dr);
        }

        var queryConverted = query.Skip(skip).Take(pageSize);

        if (queryConverted.Count() > 0)
        {
            totalrecords = query.Count();

            return queryConverted.CopyToDataTable();

        }

        totalrecords = 0;

        return new DataTable();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:32:07.683

删除参数`columnFilter`and并将您的数据传递到and`expression`的集合中。您可以创建一个自定义类或只使用这样的列表 ：`columnsFilter``expression``Tuple<string,string>`

```
public static DataTable Page(DataTable dataTableToPage, int pageSize, int pageNumber, 
    IList<Tuple<string, string>> columnToExpression,
    out int totalrecords, Operator Operator) 
```

要创建元组，您正在执行以下操作：

```
var colsExps = new List<Tuple<string, string>>();
colsExps.Add(new Tuple<string,string>("Name", "John"));
colsExps.Add(new Tuple<string,string>("City", "Miami")); 
```

然后将查询中的代码修改为如下所示：

```
if (Operator == Operator.Equal)     
{     
    query = (from dr in dataTableToPage.AsEnumerable()     
                 select dr);     
    foreach (var pair in columnToExpression)
    {
       string columnFilter = pair.Item1;
       string expression = pair.Item2;
       query = query.Where (dr => dr[columnFilter].ToString() == expresion);
    }    
}     
else if(Operator == Operator.Like)     
{     
    query = (from dr in dataTableToPage.AsEnumerable()     
                 select dr);     
    foreach (var pair in columnToExpression)
    {
       string columnFilter = pair.Item1;
       string expression = pair.Item2;
       query = query.Where (dr => dr[columnToFilter].ToString().IndexOf(expression,
                    StringComparison.OrdinalIgnoreCase) >= 0);
    }    
} 
```

或者，您可以使用[`PredicateBuilder`](http://www.albahari.com/nutshell/predicatebuilder.aspx)：

```
query = (from dr in dataTableToPage.AsEnumerable()     
             select dr);     

// I'm not sure exactly what T you should be using in the following statement:
// DataRow should be the type of dr
var predicate = PredicateBuilder.False<DataRow>(); 

foreach (var pair in columnToExpression)
{
   string columnFilter = pair.Item1;
   string expression = pair.Item2;
   predicate = predicate.Or(dr => dr[columnFilter].ToString() == expresion);
}    

query = query.Where(predicate.Compile()); 
```

由于我没有对此进行测试，我想知道您是否需要这样做`dataTableToPage.AsQueryable()`而不是`AsEnumerable()`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:22:58.697

您不应该在要进行分页的类或方法中查询 DataTable。那是破坏班级的责任。您应该将这两种行为分开。

你可以这样做：

```
public static class Paging
{
    public static DataTable Page(this IEnumerable<DataRow> dataTableQuery, int pageSize, int pageNumber, out int totalrecords)
    {
        int skip = (pageNumber - 1) * pageSize;

        var queryConverted = dataTableQuery.Skip(skip).Take(pageSize);

        if (queryConverted.Count() > 0)
        {
            totalrecords = query.Count();

            return queryConverted.CopyToDataTable();
        }
        totalrecords = 0;

        return new DataTable();
    }
} 
```

现在该代码只关心分页。

对于查询：

```
public static class DataTableQuery
{
    public static IEnumerable<DataRow> Where(this DataTable dataTable, string columnName, string expression) {
        return from dr in dataTableToPage.AsEnumerable()
                     where dr[columnToFilter].ToString() == expression
                     select dr;
    }

    public static IEnumerable<DataRow> Like(this DataTable dataTable, string columnName, string expression) {
        return from dr in dataTableToPage.AsEnumerable()
                     where dr[columnToFilter].ToString().IndexOf(expression, StringComparison.OrdinalIgnoreCase) >= 0
                     select dr;
    }
} 
```

我将它们作为扩展方法进行，因为在这种情况下，您只是扩展了该类的行为并且它们读起来很好。

您可以通过以下方式使用代码：

```
int totalRecords = 0;
DataTable dataTable = ...;
var page = dataTable.Where("Name", "Jhon").Page(1, 1, out totalRecords);
var page = dataTable.Like("City", "florida").Page(2, 3, out totalRecords); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:01:36.447

我认为您将需要某种解析器/walker 将您的字符串表达式转换为 linq 表达式。一旦你有了，你就可以应用这些过滤器。你需要一个像小型 linq 提供者这样的东西。至少这是我想到的唯一方法......

# memory - ABAP 在哪个会话/内存中存储静态属性值？

> ID：10451016
> 
> 赞同：2
> 
> 时间：2012-05-04T14:42:13.067
> 
> 标签：memory, abap

我的猜测是在主会话的 ABAP 内存中，但我不确定，也无法在文档中找到任何内容。有人有确切消息么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:46:57.633

查看[这篇文章](http://help.sap.com/saphelp_nw04/helpdata/en/fc/eb2d40358411d1829f0000e829fbfe/frameset.htm)以了解基本的内存布局和术语，除非您已经这样做了。类的静态属性的处理方式与函数池的全局变量的处理方式相同（您可能将它们视为类池的全局变量，但不要因为这个类比而对我造成太大打击）。每当您打开一个新的内部会话（例如使用 SUBMIT）时，它们都会重新初始化。您可以尝试使用一个小程序检查这一点，该程序使用 SUBMIT ... AND RETURN 递归调用自己。

# android - Android - 了解 View.getLocalVisibleRect(Rect)

> ID：10451018
> 
> 赞同：24
> 
> 时间：2012-05-04T14:42:20.170
> 
> 标签：android, view

我正在寻找任何线索来理解这种方法。

[官方 Android 的 SDK 文档](http://developer.android.com/reference/android/view/View.html#getLocalVisibleRect%28android.graphics.Rect%29)中没有关于它的信息。

它返回什么样的矩形？

它是否像 MotionEvent 中那样充满了原始坐标？

如果这个视图不可见怎么办？它返回null吗？还是一些内部带有某种 VIEW_INVISIBLE 值的矩形？

有使用这种方法经验的人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-18T19:12:58.243

从[**getGlobalVisibleRect**](https://github.com/android/platform_frameworks_base/blob/1c394559d9aa2c160a929164b761728a79eb8bed/core/java/android/view/View.java#L10402)[的JavaDoc](https://github.com/android/platform_frameworks_base/blob/1c394559d9aa2c160a929164b761728a79eb8bed/core/java/android/view/View.java#L10402)**：**

 **```
/**
 * If some part of this view is not clipped by any of its parents, then
 * return that area in r in global (root) coordinates. To convert r to local
 * coordinates (without taking possible View rotations into account), offset
 * it by -globalOffset (e.g. r.offset(-globalOffset.x, -globalOffset.y)).
 * If the view is completely clipped or translated out, return false.
 *
 * @param r If true is returned, r holds the global coordinates of the
 * visible portion of this view.
 * @param globalOffset If true is returned, globalOffset holds the dx,dy
 * between this view and its root. globalOffet may be null.
 * @return true if r is non-empty (i.e. part of the view is visible at the
 * root level.
 */ 
```

getLocalVisibleRect 调用 getGlobalVisibleRect ，然后按照建议将其设为本地：

```
r.offset(-offset.x, -offset.y); // make r local` 
```

所以：

*   它不返回一个矩形，它返回一个布尔值。但它可以设置你传递的一个矩形的参数，而且必须是一个android.graphics.Rect矩形；
*   矩形 r 将被局部坐标填充；
*   我不确定，但我认为可见视图和不可见视图是一样的，而对于视图，它应该返回 false`visibility="gone"`**

# sockets - 硬件断开后 TCP 恢复连接

> ID：10451021
> 
> 赞同：1
> 
> 时间：2012-05-04T14:42:27.283
> 
> 标签：sockets, tcp, broken-pipe, connection-reset

我有一个持续写入 TCP 套接字的程序。我想确保如果客户端和服务器之间的连接断开任何时间，连接可以重新建立。

现在，我可以断开连线，当 write() 函数循环时，它返回一个“对等连接重置”错误，然后返回 ULLONG_MAX 的值。然后，一旦我重新插入电线， write() 就会不断返回“断管”错误。我试图关闭并重新打开连接，但我继续收到“对等方重置连接”错误。

有谁知道我如何首先重新建立连接或使其保持活动一段时间（或无限期）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:58:16.727

你不能在这里重用文件描述符，你必须从头开始——创建新的[`socket(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/socket.2.html)并调用[`connect(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/connect.2.html)它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:47:33.763

恐怕你必须建立一个新的连接，而且只能由客户端程序发起。您可能需要某种方法来确保重新连接的是同一个客户端，可能会在第一次连接时检查 IP 或交换令牌，因此您可以在连接上进行一些不同类型的启动以进行首次连接和恢复。不过，该解决方案需要对您的帐户进行一些编程。

如果由于某种原因 TCP 不是唯一的选择，您可能需要考虑 UDP 通信，因为决定连接何时丢失的部分由您决定。但是您需要考虑很多其他想法（但由于您的目标是丢失和恢复通信，这可能更符合您的需求）。

# jpa - 我可以在 JPA 实体内部执行查询以取回单个列吗

> ID：10451022
> 
> 赞同：2
> 
> 时间：2012-05-04T14:42:37.117
> 
> 标签：jpa, openjpa

我有一个愚蠢的问题。如果可以做到这一点，那就太好了，但我没有屏住呼吸。

我需要链接到我的 JPA 实体的表中的单个列作为所述 JPA 实体中的集合。有什么办法可以让我只取回与该实体相关的列，而不必取回整个表（这可能非常昂贵？）

我可以在该 JPA 实体中执行一个查询，该实体将被执行并急切地加载到集合中吗？

我试图通过执行几个查询来避免对数据库进行多次调用。

您对此有何看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:48:58.443

```
@ElementCollection(fetch=FetchType.EAGER)
        @CollectionTable(name="QUICK_LAUNCH_DISTLIST",joinColumns=@JoinColumn(name="QUICK_LAUNCH_ID"))
        @Column(name="LIST_ID")
private List<Long> distListIDs; 
```

ElementCollection 属性是我正在寻找的。除此之外，它似乎工作得很好。

感谢您的帮助和启发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:12:39.647

假设一个 Category 有很多产品：

```
select product.name from Category c inner join c.products product where ... 
```

如果这不是您想要的，请在您的问题中举一个例子。

# asp.net - 带有 DNN 的 ASPX：生成的源代码中的换行符

> ID：10451023
> 
> 赞同：0
> 
> 时间：2012-05-04T14:42:50.537
> 
> 标签：asp.net, dotnetnuke

利用 ASPX 和 DotNetNuke - 查看生成的源代码时，我们在 XHTML 文档**HEAD中的所有****META**调用都显示在一行上。

 ***是否有一种简单的方法可以在生成*的源代码中的每个调用之间强制换行？

我可以在 BODY 中使用 <%= System.Environment.NewLine %> 但不能在 HEAD 中使用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:29:49.807

这可能有多种原因，老实说，这并不重要。但是您可能会检查是否在 DNN 中打开了空白过滤器，因为这会从内容中删除换行符。**

# java - 如何将 SAX 解析器中的原始 Latin-1 char[] 转换为正确的 UTF-8 字符串？

> ID：10451033
> 
> 赞同：1
> 
> 时间：2012-05-04T14:43:04.873
> 
> 标签：java, xml, character-encoding, char, sax

我一直在尝试使用 Java SAX 解析器来解析 ISO-8859-1 字符编码的 XML 文件。否则这很好，但是像ä和ö这样的特殊字符让我很头疼。简而言之，[ContentHandler.characters(...)](http://docs.oracle.com/javase/1.5.0/docs/api/org/xml/sax/ContentHandler.html#characters%28char%5B%5D,%20int,%20int%29)方法给了我奇怪的字符，你甚至不能使用 char 数组来构造具有指定编码的 String。

这是两个文件中的完整最小工作示例：

**latin1.xml：**

```
<?xml version='1.0' encoding='ISO-8859-1' standalone='no' ?>
<x>Motörhead</x> 
```

该文件以所述 Latin-1 格式保存，因此 hexdump 给出：

```
$ hexdump -C latin1.xml 
00000000  3c 3f 78 6d 6c 20 76 65  72 73 69 6f 6e 3d 27 31  |<?xml version='1|
00000010  2e 30 27 20 65 6e 63 6f  64 69 6e 67 3d 27 49 53  |.0' encoding='IS|
00000020  4f 2d 38 38 35 39 2d 31  27 20 73 74 61 6e 64 61  |O-8859-1' standa|
00000030  6c 6f 6e 65 3d 27 6e 6f  27 20 3f 3e 0a 3c 78 3e  |lone='no' ?>.<x>|
00000040  4d 6f 74 f6 72 68 65 61  64 3c 2f 78 3e           |Mot.rhead</x>| 
```

因此，正如您所期望的那样，“ö”使用单个字节 f6 进行编码。

然后，这里是 Java 文件，以 UTF-8 格式保存：

**MySAXHandler.java：**

```
import java.io.File;
import java.io.FileReader;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

public class MySAXHandler extends DefaultHandler {
private static final String FILE = "latin1.xml"; // Edit this to point to the correct file

@Override
public void characters(char[] ch, int start, int length) {
    char[] dstCharArray = new char[length];
    System.arraycopy(ch, start, dstCharArray, 0, length);
    String strValue = new String(dstCharArray);
    System.out.println("Read: '"+strValue+"'");
    assert("Motörhead".equals(strValue));
}

private XMLReader getXMLReader() {
    try {
        SAXParser saxParser = SAXParserFactory.newInstance().newSAXParser();
        XMLReader xmlReader = saxParser.getXMLReader();
        xmlReader.setContentHandler(new MySAXHandler());
        return xmlReader;
    } catch (Exception ex) {
        throw new RuntimeException("Epic fail.", ex);
    }
}

public void go() {
    try {
        XMLReader reader = getXMLReader();
        reader.parse(new InputSource(new FileReader(new File(FILE))));
    } catch (Exception ex) {
        throw new RuntimeException("The most epic fail.", ex);
    }
}

public static void main(String[] args) {
    MySAXHandler tester = new MySAXHandler();
    tester.go();
}
} 
```

运行该程序的结果是它输出`Read: 'Mot�rhead'`（ö 替换为“? in a box”），然后由于断言错误而崩溃。如果您查看 char 数组，您会看到编码字母 ö 的 char 由三个字节组成。它们对我没有任何意义，因为在 UTF-8 中，ö 应该用两个字节编码。

**我试过的**

我尝试将字符数组转换为字符串，然后将该字符串的字节传递给另一个带有字符集编码参数的字符串构造函数。我也玩过 CharBuffers 并试图找到可能与 Locale 类一起使用的东西来解决这个问题，但我尝试的任何方法似乎都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:53:28.053

问题是您正在使用 a`FileReader`来读取文件，而不是像之前建议的评论者那样使用 FileInputStream 。在`go`方法中，取出`FileReader`并替换为`FileInputStream`。

```
public void go() {
    try {
        XMLReader reader = getXMLReader();
        reader.parse(new InputSource(new FileInputStream(new File(FILE))));
    } catch (Exception ex) {
        throw new RuntimeException("The most epic fail.", ex);
    }
} 
```

您现在拥有的方式是`FileReader`使用默认平台编码在将字符传递给 SAX 解析器之前对其进行解码，这不是您想要的。如果替换为`FileInputStream`，则 XML 解析器*应该*正确读取字符集编码的处理指令，并为您处理字符集解码。

因为 FileReader 正在进行解码，所以您会看到无效字符。如果您让 SAX 解析器处理它，它应该可以正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:09:12.180

你在浑浊的水中钓鱼；很多事情都具有误导性。正如@JBNizet 所指出的：阅读器以某种编码读取文本，已经在读取字节的 InputStream 上进行了转换。如果您不指定编码，则将采用平台编码。

```
 reader.parse(new InputSource(new FileInputStream(new File(FILE)))); 
```

这与 XML 中的实际编码属性无关。

java源编码必须与编辑器编码一致，否则字符串文字会出错。

System.out.println 也可能存在误解。

此外，“ISO-8859-1”是 Windows Latin-1、“Windows-1252”的子集。如果您遇到特殊字符的问题，建议使用“Windows-1252”（在 java 中可以使用“Cp1252”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:50:33.210

在 characters() 方法中：

当你构造一个新的 String 对象时，首先将你的 char[] 转换为 byte[]，然后调用构造函数 'new String(byte[], String charSetName)'，而不是默认的 'new String(char [])'

如果您需要更多帮助，请尝试：[http ://www.exampledepot.com/egs/java.nio.charset/ConvertChar.html](http://www.exampledepot.com/egs/java.nio.charset/ConvertChar.html)

# string - 我可以在 Razor 中使用 @helper 语法返回字符串吗？

> ID：10451036
> 
> 赞同：31
> 
> 时间：2012-05-04T14:43:09.017
> 
> 标签：string, asp.net-mvc-3, razor, type-conversion, razor-declarative-helpers

我有一个 RazorHelpers.cshtml 文件，`app_code`其中如下所示：

```
@using Molecular.AdidasCoach.Library.GlobalConstants

@helper Translate(string key)
{
    @GlobalConfigs.GetTranslatedValue(key)
} 
```

但是，我有一个案例，我想将结果用作`@Html.ActionLink(...)`. 我无法将结果转换为字符串。

有没有办法从 Razor 助手返回纯字符串，以便我可以在 HTML 和`@Html`助手中使用它们？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-04T14:44:10.173

Razor 助手返回`HelperResult`对象。

您可以通过调用来获取原始 HTML `ToString()`。

有关详细信息，请参阅[我的博客文章](http://blog.slaks.net/2011/02/dissecting-razor-part-7-helpers.html)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-05-26T20:52:46.830

我认为没有办法让`@helper`return 以外的其他类型`HelperResult`。但是您可以使用返回类型为 的函数`string`，例如

```
@functions {
    public static string tr(string key) {
        return GlobalConfigs.GetTranslatedValue(key);
    }
} 
```

然后

`@Html.ActionLink(tr("KEY"), "action", "controller")`

另请参阅[http://www.mikesdotnetting.com/article/173/the-difference-between-helpers-and-functions-in-webmatrix](http://www.mikesdotnetting.com/article/173/the-difference-between-helpers-and-functions-in-webmatrix)

编辑：[MVC Razor: Helper result in html.actionlink](https://stackoverflow.com/questions/20683941/mvc-razor-helper-result-in-html-actionlink?lq=1)建议您的助手*可以*通过使用返回一个字符串`@Html.Raw(GlobalConfigs.GetTranslatedValue(key));`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-08-31T21:16:52.237

在您的情况下，我认为这也可以：

```
@(GlobalConfigs.GetTranslatedValue(key)) 
```

附加样本：

```
@helper GetTooltipContent()
{       
    if(Model.SubCategoryType == SUBCATTYPE.NUMBER_RANGE)
    {
        @(string.Format("{0} to {1}", Model.SubCategoryMinimum, Model.SubCategoryMaximum))
    }
    else if(Model.SubCategoryType == SUBCATTYPE.NUMBER_MAXIMUM)
    {
        @("<= " + Model.SubCategoryMaximum)
    }
    else if(Model.SubCategoryType == SUBCATTYPE.NUMBER_MINIMUM)
    {
        @(">= " + Model.SubCategoryMinimum)
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-19T20:56:25.800

以下语句已针对 MVC 版本进行了验证`5.2.4.0`。我主要针对以下部分：*有什么方法可以从 Razor 助手返回纯字符串，以便我可以在 HTML 和 @Html 助手中使用它们？*

我对内置的 MVC 助手如何工作进行了一些研究，它们实际上是类的属性，因此它们与功能`System.Web.Mvc.WebViewPage`无关。`@helper`

Any`@helper`将字符串编码为 HTML，并且就像将代码复制粘贴到 Razor 代码块（又名`@{ code }`. 另一方面，`@functions`应该在 Razor 块内使用。

好吧，如果 a`@helper`就像复制粘贴代码一样工作，为什么不使用`@Html.Raw("<p>cool</p>")`？因为 Html 属性在 helpers 中为 null。为什么？我不知道。

好的，但是我们可以使用一个函数来返回一个字符串，然后应用`@Html.Raw`到结果上。那样有用吗？是的，它确实。以下示例`<p>`在 DOM 中创建一个元素：

```
@functions
{
    static string GetString()
    {
        return "<p>awesome</p>";
    }
}

@Html.Raw(GetString()) 
```

如果你不明白为什么`@Html.Raw`是必要的，请阅读@SLaks 关于[Razor 自动 HTML 编码](https://blog.slaks.net/2011/01/dont-call-htmlencode-in-razor.html)的这篇精彩文章。

内置属性的方法怎么样？是的，可以使用像这样工作的公共方法创建静态类。唯一的问题是您必须在视图中包含名称空间和`@using`关键字。可以改进吗？是的，通过在`Web.config`Views 文件夹中添加命名空间。例子：

### 助手/Global.cs

```
namespace WebApp.Helpers
{
    public static class Global
    {
        public static IHtmlString GetString()
        {
            return new HtmlString("Something <b>cool</b>");
        }
    }
} 
```

### 视图/Web.config

```
<?xml version="1.0"?>
<configuration>
  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=5.2.4.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <!-- Add to the end of namespaces tag. -->
        <add namespace="WebApp.Helpers" /> 
```

### 用法

```
@Global.GetString() 
```

结果如何？文本`Something`和附加`<b>`元素将在 DOM 中找到。如果您需要访问`Request`，只需在辅助方法中添加一个参数并在调用它时`HttpContextBase`传递该属性。`WebViewPage.Context`

能好起来吗？是的，一如既往。可以使用`@helper`和创建相同的输出`@functions`：

```
@helper GetString1()
{
    @(new HtmlString("Something <b>awesome</b>"))
}

@functions {
    public static IHtmlString GetString2()
    {
        return new HtmlString("Something <b>awesome</b>");
    }
}

@MyHelper.GetString1()
@MyHelper.GetString2() 
```

## 回答

关于 OP 的问题，我推荐@Spikolynn 的方法来创建一个返回的函数`string`。但是，如果您需要在帮助程序中编写多行 C# 代码，我建议使用静态类帮助程序。

# jquery - jQuery - 遍历所有元素并删除具有特定属性的元素

> ID：10451038
> 
> 赞同：1
> 
> 时间：2012-05-04T14:43:13.053
> 
> 标签：jquery, dom

我是 jQuery 新手，仍在学习语法。我需要帮助以特定形式遍历所有复选框，并从服务器中删除我设置为 x 的“值”的那些元素。到目前为止，我没有工作的语法是：

```
$('#FormA > :checkbox').each(function() {
     var i = $(this);
     if(i.attr('value') == "-99")
     {
          i.remove();   
     }
}); 
```

它在阅读 API 后发现 .each() 方法在我传递给 jQuery 的所有 DOM 元素上执行“java 增强的 for 循环”样式迭代。虽然不确定...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:45:49.317

尝试使用属性选择器，

```
$('#FormA > :checkbox[value=-99]').remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T14:45:29.033

我认为这可能有效：

`$("#FormA :checkbox[value=-99]").remove()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T14:45:59.517

大多数 jQuery 方法适用于匹配集中的每个元素。要做你想做的事，你只需要选择正确的元素集并调用`remove`. 没有必要`each`。例如：

```
$("#FormA > :checkbox[value='-99']").remove(); 
```

这使用[“属性等于”选择器](http://api.jquery.com/attribute-equals-selector/)来查找带有`value`of 的复选框输入元素`-99`。然后它从 DOM 中删除所有选定的元素。

用于说明这一点的文档[`remove`](http://api.jquery.com/remove/)：

> 从 DOM中删除**匹配的元素集。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T14:54:04.020

看马没有jQuery！晚会有点晚，但是纯粹的 JS 方式。

​</p>

```
var form = document.getElementById("formA");

[].forEach.call(form.querySelectorAll('input[type="checkbox"][value="-99"]'),function(el){form.removeChild(el);});​ 
```

**[现场演示](http://jsfiddle.net/yp6dW/)**

它的 MAGNITUDES 也更快。

**[JS 性能](http://jsperf.com/foreach-remove-vs-jqueryeach)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T14:45:39.077

如果您使用 $('#FormA :checkbox')，您的选择器很可能会起作用，您现在拥有的方式要求复选框是表单的直接后代。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-04T15:30:01.197

用这个：

```
$('.YourClass:checked').each(function(){
i=$(this)
if(i.val()=='-99'){i.remove()}
}) 
```

# c# - UpdatePanel 和修改面板外的控件

> ID：10451046
> 
> 赞同：0
> 
> 时间：2012-05-04T14:43:41.533
> 
> 标签：c#, asp.net, ajax, reporting-services, ajaxcontroltoolkit

我在`UpdatePanel`. `UpdatePanel`有一个`AsyncPostBack`与内部控件关联的触发器。这工作得很好。

我有另一个包含 SSRS 的控件`ReportViewControl`，我想根据上述回发事件的结果有条件地隐藏它`UpdatePanel`。

`ReportViewerControl`不在 an 内部，`UpdatePanel`我**想保持这种**方式。如何隐藏`ReportViewerControl`基于`UpdatePanel`另一个控件内部的回发事件？

我假设如果我将 放在`ReportViewerControl`里面会出现很多问题`UpdatePanel`，有人确定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:48:36.567

您可以在更新面板内容模板中创建一个脚本并隐藏您的控制表单 javascript。

```
 <script type="text/javascript">
     Sys.Application.Add_load(MyFunctionThatHides);
   </script 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-26T16:15:10.230

> ReportViewerControl 不在 UpdatePanel 内，我想保持这种方式。

我做了一个简单的把戏。我创建了另一个 Updatepanel 并在更新面板中放置了一个文字控件，此更新面板代码位于“您要隐藏的控件”之上

像这样的东西

```
 <asp:UpdatePanel ID="UpdatePanel5" runat="server" UpdateMode="Always" >
    <ContentTemplate>
          <asp:Literal runat="server" ID="literal1"></asp:Literal>
     </ContentTemplate>
  </asp:UpdatePanel> 
```

然后在后面的代码中注入 CSS

像这样的东西

```
literalDvControl.Text = "<style> #YourControlID{ display:none;}</style>"; 
```

这似乎奏效了。基本上文字控制是注入样式标签，浏览器反应很快。

但请阅读有关此内容。 [将 <body> 中的 <style> 标记与其他 HTML 一起使用](https://stackoverflow.com/questions/2830296/using-style-tags-in-the-body-with-other-html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:56:19.923

您可以在服务器上处理 Async AJAX 调用之后以及将响应返回给客户端/浏览器之前使用以下代码

```
this.Page.ClientScript.RegisterStartupScript(this.GetType(), "ShowHideReportViewerJSScript", <JS code to show/hide reportviewer>, true); 
```

我假设您在 ASPX 页面上放置了脚本管理器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:07:53.327

1.  通过服务器端代码隐藏内容，而不是按照 Machinegon 的建议使用 javascript（可能由服务器通过回发注入）。
2.  在您`UpdatePanel`要隐藏的其他内容周围花点时间。（你不能让当前的一个更大，但再做一秒应该不会造成问题。）让第二个更新面板设置与触发器相同的按钮。（您可以在更新面板之外有一个触发器，但您不能在更新面板之外更新内容。）如果更新是有条件的（您有时只是在单击按钮时更改内容），那么您可以设置仅触发第二个面板成为隐藏按钮，您`Click`在第一个按钮单击的处理程序中的代码中。

# asp.net-mvc-3 - jquery 序列化在先前的异步页面更新后返回不正确的值

> ID：10451049
> 
> 赞同：1
> 
> 时间：2012-05-04T14:43:52.360
> 
> 标签：asp.net-mvc-3, jquery, javascript-framework

让我试着解释一下这个场景：

我有一个包含多个项目的表单。该表单是多功能的，因此它具有在服务器上正确处理的多个提交按钮。

可以删除单个项目（每个项目一个提交按钮），也可以保存所有项目（表单底部的提交按钮）。

删除项目时，使用 $.post 并使用新响应更新包含表单的 DIV

```
$("#containingDIV").html(response) 
```

因此省略了创建新表单的已删除项目。

如果我随后点击 Save All 按钮并调用

```
$(form).serialize(); 
```

序列化正确数量的项目，但它包括已删除的项目并错过了表单中的最后一个项目。

我无法理解为什么会发生这种情况，但我不是 jQuery 大师，所以希望有人能对此有所了解。

任何帮助深表感谢。

谢谢，

汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:28:02.390

感谢大家的帮助。我刚刚弄清楚发生了什么，这与 ASP.NET MVC 框架而不是 jQuery 有关。我检查了返回的响应，并注意到所有输入都包含与删除之前相同的项目 ID。调用 ModelState.Clear() 为我解决了这个问题。啊！:D

# php - 如何使用nusoap调用soap服务器

> ID：10451050
> 
> 赞同：0
> 
> 时间：2012-05-04T14:43:58.750
> 
> 标签：php, soap

我需要调用一个肥皂服务器，他们提供这样的请求格式（请参阅此页面[https://book.mylimobiz.com/api/ApiService.asmx?op=Test](https://book.mylimobiz.com/api/ApiService.asmx?op=Test)）

```
POST /api/ApiService.asmx HTTP/1.1
Host: book.mylimobiz.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "https://book.mylimobiz.com/api/Test"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Test xmlns="https://book.mylimobiz.com/api">
      <apiId>string</apiId>
      <apiKey>string</apiKey>
    </Test>
  </soap:Body>
</soap:Envelope> 
```

我正在使用 php nusoap 发送请求，这是我正在尝试的

```
require_once('lib/nusoap.php');

$serverPath = "https://book.mylimobiz.com/api/ApiService.asmx";
$param = array("apiId"=>"someapi","apiKey"=>"somekYE");
$client = new SoapClient($serverPath);

    $tt = $client->call("Test",$param,"https://book.mylimobiz.com/api","https://book.mylimobiz.com/api/Test"); 
```

这是行不通的，有人可以指导我如何使用 nusoap 或其他东西来请求。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:03:11.273

你可以这样做：

```
 $client = new SoapClient('https://book.mylimobiz.com/api/ApiService.asmx?WSDL');
 $params = array();
 $params["apiId"] = apiId;
 $params["apiKey"] = apiKey;
 $result = $client->Test($params); 
```

# sql-server-2008 - SQL Server Data Tools 可以与 SQL Server 2008 SSIS 一起使用吗？

> ID：10451053
> 
> 赞同：14
> 
> 时间：2012-05-04T14:44:09.453
> 
> 标签：sql-server-2008, ssis, sql-server-2012, sql-server-data-tools

我可以使用 SQL Server 2012 附带的新[SQL Server Data Tools](http://msdn.microsoft.com/en-us/data/hh297027)为 SQL Server 2008 创建 SSIS 包吗？

我同时使用 SQL Server 2008 和 SQL Server 2012，我想知道是否可以使用 SSDT 在两者上创建和维护 SSIS。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T07:34:18.063

否。请参阅[部署 ssis 2010 软件包的问题](http://social.msdn.microsoft.com/Forums/en-AU/sqlintegrationservices/thread/5edf4335-937f-4b81-aea1-2cd2f10993f4)

SSDT 提供的向后兼容性似乎不适用于 SSIS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-30T17:43:40.603

每个人都想要一个平稳的集成过程，以实现熟练的系统性能。理论上，[SQL Data 工具](http://www.quest.com/toad-for-sql-server/)包应该与服务器 SSIS（SQL Server 集成服务）2008 配合良好。正确安装两个系统后，即可获得预期的好处。

理论上，SDT 应该与 SSIS 2008 一起使用，因为 SQL 数据工具与可追溯到 2005 年的 SSIS 版本兼容。但是，不少人抱怨收到“不支持”错误消息。有些人发现答案在于他们的分期付款程序，而另一些人则使用了不正确的 SSIS 2008 版本。然而，总体而言，根本问题在于 2008 系统的独特品质。

要记住的一个重要系统方面是“推出”集成系统 2008 版时发生的变化。与 2005 和其他版本相比，新功能旨在更好地支持管理员的日常活动。2008 版本的各个组件的改进使其更直观，但与其他系统集成可能会在不经意间变得更加复杂。例如，它的策略创建配置被分解为多个方面，这些方面旨在与您的策略条件“匹配”。虽然这提供了手动控制，但其他系统（如 SDT）可能无法轻松与 2008 集成。

鉴于 2008 版本的独特品质，与之前的版本不同，需要特别注意特定的集成操作。还要记住，SSIS 2008 R2 版本比标准版本产生更多问题。

SQL 2008 的更改还包括一些中断。在迁移到这个特定版本的过程中，有大量功能被停用。结果，该版本缺乏很多向后兼容性。这些情况可能需要对您的其他系统进行重大更改。

# .htaccess - 如何使用 .htaccess 为以下内部重定向创建外部重定向

> ID：10451057
> 
> 赞同：1
> 
> 时间：2012-05-04T14:44:21.810
> 
> 标签：.htaccess

我在 .htaccess 文件中有这个规则，它是内部重定向，谁能告诉我如何使用 R301 进行这个外部重定向

```
#Internal Rewrite#
RewriteRule ^(.*)page/([^/\.]+)/?$ $1?page=$2 [L] 
```

我想让它像下面这样[但它不起作用，这里出了点问题..]

```
RewriteCond %{THE_REQUEST} \?page=([0-9]+).*
RewriteRule (.*) $1/page/%1? [R=301,L]
RewriteRule (.*)/page/1 $1 [R=301,L] 
```

这里的任何专家都可以帮助我..谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:00:40.747

像这样添加`R=301`标志：

```
RewriteRule ^(.*)page/([^/.]+)/?$ $1?page=$2 [L,R=301,QSA,NC] 
```

# php - 将 unicode \u 序列（如 \u041a）转换为 php 中的普通 utf-8 文本

> ID：10451058
> 
> 赞同：4
> 
> 时间：2012-05-04T14:44:23.970
> 
> 标签：php, javascript, utf-8, json

我有一个像这样的字符串“\u041a\u043b\u0443\u0431 Test”；

由json_encode()解码，原字符串为俄语“Клуб Test”。当我把它放到 js 中时

alert("\u041a\u043b\u0443\u0431 测试");

我得到正确的显示，就像在屏幕上一样。所以 js 以某种方式将其解码为正常视图。问题是我如何在 php 中做同样的事情，是否有任何内置方法？

![在此处输入图像描述](../Images/1b625b5d0931360219a5893e30e31586.png)

```
答案是：
$json_in = '{"testKey":"\u041a\u043b\u0443\u0431 测试"}';
$json_out = json_decode($json_in, true);
或者
将“\u041a\u043b\u0443\u0431”转换为“Клуб”
并执行 html_entity_decode($str, null, 'UTF-8');

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T22:59:32.780

转换数据时，`JSON_UNESCAPED_UNICODE`用作选项

```
echo json_encode($text, JSON_UNESCAPED_UNICODE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:49:23.200

您可能希望 HTML 实体打印字符：

*   Ӓ 对于十进制代码
*   Ī 对于十六进制代码

# node.js - 为什么 redis SADD 不能将数组用作 node.js 中的输入？

> ID：10451059
> 
> 赞同：2
> 
> 时间：2012-05-04T14:44:25.197
> 
> 标签：node.js, redis

我正在使用[https://github.com/mranney/node_redis](https://github.com/mranney/node_redis)并尝试一次更新具有多个值的集合（在 redis cli 上`"SADD myset val1 val2"`工作正常）。

我正在使用的确切命令是：

```
var cmd_array = ['myset', 'val1', 'val2'];
client.sadd(cmd_array); 
```

根据他们的文档，这应该可行。知道为什么不这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T15:29:44.970

这对我来说可以。我可以毫无问题地运行以下脚本：

```
var redis = require("redis"),
    client_options = {
    parser: "hiredis"
};

var credis = redis.createClient( '/tmp/redis.sock', client_options );

function main()
{
   credis.flushall( function(err,res) {
      console.log( "hello" );
      x = [ "X", "A", "B", "C" ];
      credis.sadd(x);
      credis.sadd( "myset", x, function(err,res) {
         console.log("done");
         credis.end();
      });
   });
}

main(); 
```

它使用预期的项目数创建两个键：

```
redis 127.0.0.1:6379> keys *                                                                                                                                                                                                                 
1) "X"                                                                                                                                                                                                                                       
2) "myset"                                                                                                                                                                                                                                   
redis 127.0.0.1:6379> smembers myset                                                                                                                                                                                                         
1) "X"                                                                                                                                                                                                                                       
2) "A"                                                                                                                                                                                                                                       
3) "B"                                                                                                                                                                                                                                       
4) "C"                                                                                                                                                                                                                                       
redis 127.0.0.1:6379> smembers X                                                                                                                                                                                                             
1) "A"                                                                                                                                                                                                                                       
2) "B"                                                                                                                                                                                                                                       
3) "C" 
```

我建议你检查 node_redis 版本。我使用的版本是：

```
$ npm list
/home/dspezia/local/test_redis
├── hiredis@0.1.14 
└── redis@0.7.1 
```

# ruby - 在 Ruby 中使用 yield 和 return

> ID：10451060
> 
> 赞同：19
> 
> 时间：2012-05-04T14:44:25.497
> 
> 标签：ruby, block

谁能帮我弄清楚在Ruby中使用yield和return。我是一名 Ruby 初学者，因此非常感谢简单的示例。

先感谢您！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-04T14:54:40.670

return 语句的工作方式与其他类似编程语言的工作方式相同，它只是从使用它的方法返回。您可以跳过对 return 的调用，因为 ruby​​ 中的所有方法总是返回最后一条语句。所以你可能会找到这样的方法：

```
def method
  "hey there"
end 
```

这实际上与执行以下操作相同：

```
def method
  return "hey there"
end 
```

`yield`另一方面，执行作为方法参数给出的块。所以你可以有这样的方法：

```
def method 
  puts "do somthing..."
  yield
end 
```

然后像这样使用它：

```
method do
   puts "doing something"
end 
```

结果，将在屏幕上打印以下 2 行：

```
"do somthing..."
"doing something" 
```

希望这能澄清一点。有关块的更多信息，您可以查看[此链接](http://mixandgo.com/blog/mastering-ruby-blocks-in-less-than-5-minutes)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T14:50:40.050

`yield`用于调用与方法关联的块。您可以通过在方法及其参数之后放置块（基本上只是花括号中的代码）来做到这一点，如下所示：

```
[1, 2, 3].each {|elem| puts elem} 
```

`return`从当前方法退出，并使用其“参数”作为返回值，如下所示：

```
def hello
  return :hello if some_test
  puts "If it some_test returns false, then this message will be printed."
end 
```

但请注意，您不必*在*任何方法中使用 return 关键字；如果没有返回值，Ruby 将返回最后评估的语句。因此这两个是等价的：

```
def explicit_return
  # ...
  return true
end

def implicit_return
  # ...
  true
end 
```

* * *

这是一个示例`yield`：

```
# A simple iterator that operates on an array
def each_in(ary)
  i = 0
  until i >= ary.size
    # Calls the block associated with this method and sends the arguments as block parameters.
    # Automatically raises LocalJumpError if there is no block, so to make it safe, you can use block_given?
    yield(ary[i])
    i += 1
  end
end

# Reverses an array
result = []     # This block is "tied" to the method
                #                            | | |
                #                            v v v
each_in([:duck, :duck, :duck, :GOOSE]) {|elem| result.insert(0, elem)}
result # => [:GOOSE, :duck, :duck, :duck] 
```

还有一个例子`return`，我将用它来实现一个方法来查看一个数字是否[快乐](http://en.wikipedia.org/wiki/Happy_number)：

```
class Numeric
  # Not the real meat of the program
  def sum_of_squares
    (to_s.split("").collect {|s| s.to_i ** 2}).inject(0) {|sum, i| sum + i}
  end

  def happy?(cache=[])
    # If the number reaches 1, then it is happy.
    return true if self == 1
    # Can't be happy because we're starting to loop
    return false if cache.include?(self)
    # Ask the next number if it's happy, with self added to the list of seen numbers
    # You don't actually need the return (it works without it); I just add it for symmetry
    return sum_of_squares.happy?(cache << self)
  end
end

24.happy? # => false
19.happy? # => true
2.happy?  # => false
1.happy?  # => true
# ... and so on ... 
```

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-13T10:35:08.633

```
def cool
  return yield
end

p cool {"yes!"} 
```

yield 关键字指示 Ruby 执行块中的代码。在此示例中，块返回字符串`"yes!"`。该方法中使用了显式的 return 语句`cool()`，但这也可能是隐式的。

# java - 获取键盘按键字符串

> ID：10451062
> 
> 赞同：4
> 
> 时间：2012-05-04T14:44:26.957
> 
> 标签：java, swing, keyboard

有没有办法获得键盘键的字符串文本表示？例子：

```
Input: User presses Shift
Output: "Shift"

Input: User presses F1
Output: "F1"

Input: User presses Left arrow key
Output: "Left Arrow" 
```

我使用按键监听器来获取按键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:46:01.310

最接近此的是 KeyEvent.getKeyText：[http](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getKeyText(int) ://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#getKeyText(int )

我说最接近是因为某些键的实现存在一些特定于平台的差异

# lua - 使用 MSXML2.ServerXMLHTTP 从网页访问数据会在 Lua 中返回截断的数据

> ID：10451064
> 
> 赞同：0
> 
> 时间：2012-05-04T14:44:39.487
> 
> 标签：lua, msxml

我正在尝试从网站下载源代码文件，该文件适用于小文件，但一些较大的文件会被截断。

下面的示例应返回大小为 146,135 字节的文件，但返回状态为 200 的 141,194 字节之一。

我也尝试过 winhttp.winhttprequest.5.1 ，但两者似乎都在同一点截断。

我也发现不少人有类似的问题，但一直没能找到解决办法。

```
require('luacom')

http = luacom.CreateObject('MSXML2.ServerXMLHTTP')

http:Open("GET","http://www.family-historian.co.uk/wp-content/plugins/forced-download2/download.php?path=/wp-content/uploads/formidable/tatewise/&file=Map-Life-Facts3.fh_lua&id=190",true)
http:Send()
http:WaitForResponse(30)
print('Status: '..http.Status)
print('----------------------------------------------------------------')
headers = http:GetAllResponseHeaders()
data = http.Responsetext 
print('Data Size = '..#data)
print('----------------------------------------------------------------')
print(headers) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:53:56.703

我终于弄清楚了发生了什么，所以将其发布在这里供其他人使用。

为了避免截断，我需要使用 ResponseBody 而不是 ResponseText，似乎正在发生的是文件以二进制格式发送，ResponseText 数据与 ResponseBody 的字节数相同，但采用 UTF-8 格式，这意味着如果文件中的特殊字符（UTF-8 中的双字节从 ResponseText 的末尾删除）中的数字。我不确定长度中的“错误”在什么级别，但是避免的方法它是使用ResponseBody。

# ios - 无法获取 UIAutomation iOS UILabel 值

> ID：10451065
> 
> 赞同：7
> 
> 时间：2012-05-04T14:44:39.793
> 
> 标签：ios, xcode, instruments, ui-automation, ios-ui-automation

我正在尝试获取iPad 模拟器中显示`"HELLO"`的值。`UILabel`我已启用可访问性并将标签设置为`"Label Access"`. 但是当我调用时`target.logElementTree()`，名称和值都设置为`"LabelAccess"`，并且据苹果文档所说，值字段应该包含设置的字符串（在这种情况下`"Hello"`）。有人知道解决这个问题吗？

PS：我使用的是最新的 iOS SDK 和 Xcode。 [苹果堆栈交换](https://apple.stackexchange.com/questions/50468/unable-to-get-uiautomation-ios-uilabel-value)

![target.logElementTree() 的输出；](../Images/d3b9dd9520a1f9897535aad016b22557.png)

![iPad屏幕](../Images/eca28d581e6a997f6fa5ed4ad745e28d.png)

![无障碍标签](../Images/8aab369b4ab65d6060a5343b261a79d5.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T18:22:12.990

我认为您遇到了一个永远存在的 UIAutomation 错误。

解决此错误的最简单方法是将accessibilityValue 设置为代码中的文本。

像这样的东西。

```
NSString *valueString = [NSString stringWithFormat:@"%d", value];
self.label.text = valueString;
self.label.accessibilityValue = valueString; 
```

帮助那些也使用 Voice Over 的人 ;-)

# .net - 几何命中测试中的错误

> ID：10451066
> 
> 赞同：6
> 
> 时间：2012-05-04T14:44:44.820
> 
> 标签：.net, wpf, drawing, hittest

我有一个[DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)元素，它表示一条路径，几何图形由以下[语法](http://msdn.microsoft.com/en-us/library/ms752293(v=vs.90).aspx)描述：

> "m106,59.3c0-1.98,0,0-4.95,0.989-3.96,0.989-13.8,3.96-20.8,4.95-6.92,0-14.8-3.96-17.8-3.96-1.98,2.97,3.96,10.9,7.91, 13.8,2.97,1.98,9.89,3.96,14.8,3.96,4.95-0.989,10.9-2.97,13.8-6.92,2.97-2.97,5.93-10.9,6.92-12.9z"

为了呈现视觉效果，我使用了 MyCanvas 类，它提供了命中测试功能：

```
public class MyCanvas : Panel
{
   public List<Visual> Visuals = new List<Visual>();
   private List<DrawingVisual> Hits = new List<DrawingVisual>();

   public void AddVisual(Visual Visual)
   {
       this.Visuals.Add(Visual);
       base.AddVisualChild(Visual);
       base.AddLogicalChild(Visual);
   }

   public List<DrawingVisual> GetVisuals(Geometry Region)
   {
       GeometryHitTestParameters Parameters = new GeometryHitTestParameters(Region);
       this.Hits.Clear();
       HitTestResultCallback Callback = new HitTestResultCallback(this.HitTestCallBack);
       VisualTreeHelper.HitTest(this, null, Callback, Parameters);

       return this.Hits;
   }

   private HitTestResultBehavior HitTestCallBack(HitTestResult Result)
   {
        GeometryHitTestResult GeometryRes = (GeometryHitTestResult)Result;
        DrawingVisual DVisual = Result.VisualHit as DrawingVisual;

        if (DVisual != null && GeometryRes.IntersectionDetail == IntersectionDetail.FullyInside) 
            this.Hits.Add(DVisual);     

       return HitTestResultBehavior.Continue;
   }

   protected override Visual GetVisualChild(int Index)
   { return this.Visuals[Index]; }

   protected override int VisualChildrenCount {
        get { return this.Visuals.Count; }
   }
} 
```

当我绘制我的（红色）路径时，结果如下：

![](../Images/6545e84bbf6c339f818b17d6a1db177e.png)

网格单元的大小为 50x50。现在我尝试在这个区域获得视觉效果：

```
MyCanvas my_canvas = new MyCanvas();
RectangleGeometry MyRegion = new RectangleGeometry(new Rect(50, 50, 250, 250));
DrawingVisual MyPath = new DrawingVisual();

using (DrawingContext context = MyPath.RenderOpen()) {
   context.PushTransform(new TranslateTransform(50, 50));
   context.PushTransform(new ScaleTransform(2, 2));
   context.DrawGeometry(Brushes.Red, new Pen(), MyGeometry);
}

my_canvas.AddVisual(MyPath);
List<DrawingVisual> result = my_canvas.GetVisuals(MyRegion); 
```

但是 MyPath 不在结果中，为什么？我如何正确地进行命中测试？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T10:34:02.193

似乎*命中测试考虑了应用了*[转换的相反顺序](https://stackoverflow.com/questions/10453095/rendertransform-vs-pushtransform)的形状的位置。这可以解释为什么我的路径只与方法的参数相交而不是[完全](http://msdn.microsoft.com/en-us/library/system.windows.media.intersectiondetail.aspx)相交。`RectangleGeometry``MyCanvas.GetVisuals`

等待更好的响应，我使用*非命中测试方法实现了**命中*测试，现在是类的一部分：*`MyCanvas`*

 *```
public List<DrawingVisual> GetVisuals(Rect Area)
{
   this.Hits.Clear();

   foreach (DrawingVisual DVisual in this.Visuals) {
       if (Area.Contains(DVisual.DescendantBounds))
           this.Hits.Add(DVisual);
   }

   return this.Hits;
} 
```

**编辑：**

正如 Mike Danes（MSDN 论坛的版主）在[此](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/d7221b3c-8f86-4c50-bff7-61dbdf2611d9)线程中解释的那样：

> *“这真的有可能是几何命中测试中的一个错误吗？”*
> 
> 我 99% 确定这是一个错误。绘图和命中测试应使用相同的变换顺序。它与 TransformGroup 一起正常工作的原因是因为这样您只在绘图上下文中推送一个变换，这避免了命中测试绘图上下文中的错误乘法顺序。请注意，这与 TranformGroup 中使用的顺序与推送顺序不同这一事实无关。*

# java - Java和PHP之间的加密不匹配

> ID：10451068
> 
> 赞同：2
> 
> 时间：2012-05-04T14:44:47.613
> 
> 标签：java, php, aes, encryption

我正在研究将数据传递给第 3 方应用程序的加密系统。加密是用 Java 完成的，解密是用 PHP 完成的。尽管进行了几次尝试，但我无法让 PHP 应用程序打开加密字符串。

出于测试目的，我创建了一个也加密数据的 PHP 脚本，因此我可以比较 Java 和 PHP 加密字符串。结果匹配到第 21 个字符，然后它们不同。这就是我所拥有的：

```
// Java - Encrypt
private String EncryptAES(String text,String key) throws Exception
    {
      SecretKeySpec skeySpec = new SecretKeySpec(key.getBytes(), "AES");

      // Instantiate the cipher
      Cipher cipher = Cipher.getInstance("AES");

      cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
      byte[] encrypted = cipher.doFinal(text.getBytes());

      String encrypttext = new BASE64Encoder().encode(encrypted);

      return encrypttext;
    }

RESULT: TeUZAFxoFoQy/roPm5tXyPzJP/TLAwR1aIGn2xHbZpsbY1qrKwXfO+F/DAqmeTwB0b8e6dsSM+Yy0zrQt22E2Q== 
```

和

```
// PHP - Encrypt
<?php

$encrypt =  $crypt = openssl_encrypt($toCrypt,"AES256","key-32-char-long");
echo $encrypt; 

?>

RESULT: TeUZAFxoFoQy/roPm5tXyC05wta1Z5YOXcq4OtgFoSbfVi/bHAuD6B5tDthT8EcGXQir08UAx0QvcqRJ2fJmbQ== 
```

显然，由于部分字符串匹配，某些事情正在做对，但显然并非所有内容都是正确的，因为其余部分不匹配。此外，如果我尝试在 PHP 中解密 Java 字符串，则什么也不会发生：

```
// PHP - Decrypt
<?php
$toDecrypt = "TeUZAFxoFoQy/roPm5tXyPzJP/TLAwR1aIGn2xHbZpsbY1qrKwXfO+F/DAqmeTwB0b8e6dsSM+Yy0zrQt22E2Q==";
$decrypt = openssl_decrypt($toDecrypt,"AES256","<key-32-char-long>");
echo $decrypt;

?>

RESULT: <nothing> 
```

有谁知道可能会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:32:35.877

由于两个加密字符串都以相同的字符开头，看起来您在一个中使用 ECB 而在另一个中使用 CBC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:58:51.300

这个怎么样（在你的 PHP 中解密）：

```
$toDecrypt = "TeUZAFxoFoQy/roPm5tXyPzJP/TLAwR1aIGn2xHbZpsbY1qrKwXfO+F/DAqmeTwB0b8e6dsSM+Yy0zrQt22E2Q==";
$decrypt = openssl_decrypt(base64_decode($toDecrypt),"AES256","key-32-char-long");
echo $decrypt; 
```

您应该解密 base64 解码的字符串并解密您应该调用`openssl_decrypt`not `openssl_encrypt`:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:59:06.057

你在java中使用getBytes

而是使用 getBytes(Charset) 方法来确保密钥和明文的编码与 php 中使用的相同

（将字节数组转储到两者中，并在继续之前查看它们是否匹配）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T14:50:21.043

一些备注：

*   密钥大小在 java 程序中不明确
*   您是否检查了这两个程序的分组密码操作模式是什么？CBC、ECB、OFB 等... ? 有些可能需要 IV 才能通过加密数据。
*   最后一个想法：Java 和 PHP 程序使用的填充是什么？

[本文档](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html)可以帮助您：您拥有密码/分组密码模式/填充模式/密钥大小的所有有效组合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-05T16:06:11.460

我刚刚得到这个工作。要做的是在填充之前将字符串编码为UTF-8，然后发送字节数组进行加密。UTF-8 将重音字符表示为两个十六进制字节 c3 xx，因此如果包含需要编码的字符，转换后的字符串会更长。顺便说一句，c3 字符是“A”，顶部有一个“~”，所以如果你的解密出现了这些奇怪的字符，那么你还没有重新编码解密。

```
import java.security.NoSuchAlgorithmException; 
```

导入 javax.crypto.Cipher；导入 javax.crypto.NoSuchPaddingException；导入 javax.crypto.spec.IvParameterSpec；导入 javax.crypto.spec.SecretKeySpec；

导入android.util.Log；

公共类 MCrypt {

```
private IvParameterSpec ivspec;
private SecretKeySpec keyspec;
private Cipher cipher;
private String iv = "cant hear you";
private String SecretKey = "top secret";

public MCrypt()
{
    ivspec = new IvParameterSpec(iv.getBytes());
    keyspec = new SecretKeySpec(SecretKey.getBytes(), "AES");                        
    try {            
        cipher = Cipher.getInstance("AES/CBC/NoPadding");
    } catch (NoSuchAlgorithmException e) {
         e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        e.printStackTrace();
    }
}

public byte[] encrypt(String text) throws Exception{
    if(text == null || text.length() == 0) throw new Exception("Empty string");

    byte[] bs = text.getBytes("UTF-8");

    byte[] toEncrypt = padBytes(bs);
    byte[] encrypted = null;
    try {
        cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);
        encrypted = cipher.doFinal(toEncrypt);
    } catch (Exception e){                       
            throw new Exception("[encrypt] " + e.getMessage());
    }
    return encrypted;
}

public byte[] decrypt(String code) throws Exception{
    if(code == null || code.length() == 0)  throw new Exception("Empty string");        
    byte[] decrypted = null;
    try {
        cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);                
        decrypted = cipher.doFinal(hexToBytes(code));
    } catch (Exception e){
        throw new Exception("[decrypt] " + e.getMessage());
    }
    return decrypted;
}

    public static String bytesToHex(byte[] data){
        if (data==null){
            return null;
        }            
        int len = data.length;
        String str = "";
        for (int i=0; i<len; i++) {
            if ((data[i]&0xFF)<16)
                    str = str + "0" + java.lang.Integer.toHexString(data[i]&0xFF);
            else
                    str = str + java.lang.Integer.toHexString(data[i]&0xFF);
        }
        return str;
    }

    public static byte[] hexToBytes(String str) {
            if (str==null) {
                    return null;
            } else if (str.length() < 2) {
                    return null;
            } else {
                    int len = str.length() / 2;
                    byte[] buffer = new byte[len];
                    for (int i=0; i<len; i++) {
                            buffer[i] = (byte) Integer.parseInt(str.substring(i*2,i*2+2),16);
                    }
                    return buffer;
            }
    }

    private static byte[] padBytes(byte[] source){
        char paddingChar = ' ';
        int size = 16;
        int x = source.length % size;
        int padLength = size - x;
        int bufferLength = source.length + padLength;
        byte[] ret = new byte[bufferLength];
        int i = 0;
        for ( ; i < source.length; i++){
            ret[i] = source[i];
        }
        for ( ; i < bufferLength; i++){
            ret[i] = (byte)paddingChar;
        }

        return ret;
    }
} // class close 
```

pHp 方面是相似的......（我不知道如何在这里输入 pHp 代码！！！！

```
class MCrypt
{               
private $iv =  'adfdadfgfd'; #Same as in JAVA
private $key = 'adfadfdfdafadfa'; #Same as in JAVA

function __construct()
{
}

function encrypt($str) {
  $iv = $this->iv;
  $td = mcrypt_module_open('rijndael-128', '', 'cbc', $iv);
  mcrypt_generic_init($td, $this->key, $iv);
  $s = padString(utf8_encode($str));
  $encrypted = mcrypt_generic($td, $s);
    //echo $encrypted;
  mcrypt_generic_deinit($td);
  mcrypt_module_close($td);
  return bin2hex($encrypted);
}

function decrypt($code) {
  $code = $this->hex2bin($code);
  $iv = $this->iv;
  $td = mcrypt_module_open('rijndael-128', '', 'cbc', $iv);
  mcrypt_generic_init($td, $this->key, $iv);
  $decrypted = mdecrypt_generic($td, $code);
  mcrypt_generic_deinit($td);
  mcrypt_module_close($td);
  return (trim(utf8_decode($decrypted)));
}

protected function hex2bin($hexdata) {
  $bindata = '';
  for ($i = 0; $i < strlen($hexdata); $i += 2) {
    $bindata .= chr(hexdec(substr($hexdata, $i, 2)));
  }
  return $bindata;
}   
} 
```

就是这样，真的很简单......哦，顺便说一句，如果你自己做填充，那么方法是填充还是NoPadding都没有关系！

# google-chrome - 更改 Chrome 开发工具中脚本列表的格式？

> ID：10451070
> 
> 赞同：0
> 
> 时间：2012-05-04T14:45:04.323
> 
> 标签：google-chrome, google-chrome-devtools

有没有办法在 Chrome 开发人员工具中更改脚本的分组/排序？

我喜欢这个工具，但这种列表格式最不适合编辑。我有同名的文件（ExtJs OO 开发的典型文件），尝试搜索并打开一个进行调试是很烦人的。

如果 js 文件按照文件名的字母顺序未分组列出，而且还显示路径名，那就太好了。

我认为这可能是不可能的，唯一的建议是将错误发布到谷歌。但我认为它值得一试！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:31:51.153

正如亚历山大所说，`Ctrl + O`在脚本面板中会给你“打开文件”对话框，但它不会列出完整路径。您可以在 new.crbug.com 提交功能请求

同样值得一提的是，Chrome 19 刚刚推出了一个新的脚本导航器，可以更好地为您显示内容：

![](../Images/342c27e9b94368761298222bd95b8a7c.png)

# html - 在 HTML5 Web 应用程序中创建和使用翻译资源

> ID：10451071
> 
> 赞同：0
> 
> 时间：2012-05-04T14:45:05.167
> 
> 标签：html, web, translation

我正在使用 HTML5/JQuery 和 Java EE 创建一个富 Web 应用程序，我需要使该应用程序能够以英语和法语显示。我是 HTML5 的新手，所以我不知道是否可以轻松地做到这一点，如果可以，我应该怎么做？

我对 Flex 有很好的想法，并且使用这项技术，它真的很容易做到：您只需将“字典”存储在 2 个不同的文件中。例如 ：

```
file english:

title = Welcome to my app !

file French :

title = Bienvenu dans mon appli ! 
```

然后在每次需要翻译术语时调用 {resourceManager.getString('file','title')} 。

有没有类似的方法在 HTML 中做到这一点？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:39:05.483

你可以用 javascript 做类似的事情。有很多方法可以做到这一点，我只会抛出我会做的方式。

我会将翻译存储在一些普通的 javascript 文件中。

lang_english.js

```
var language = 
{
  "title" : "Welcome to my app"
} 
```

lang_french.js

```
var language = 
{
  "title" : "Bienvenu dans mon appli !"
} 
```

您可以在 html 头中加载以下文件之一：

```
<script src="lang_english.js" type="text/javascript"></script> 
```

然后在您的应用程序中，您可以创建一个 resourceManager 对象：

```
resourceManager = {}
resourceManager.getString = function(str)
{
  return language[str];
} 
```

然后调用：

```
var title = resourceManager.getString('title') 
```

**编辑**：

对于动态加载，您可以将它们存储在`.json`文件中并用于`jquery`根据用户语言选择动态加载它们：

```
var language = {};

$.get('lang_french.json', function(data) {
    language = JSON.parse(data);
}); 
```

该`lang_french.json`文件如下所示：

```
{
  "title" : "Bienvenu dans mon appli !"
} 
```

# c# - ASP.NET MVC 3 中的线程

> ID：10451074
> 
> 赞同：2
> 
> 时间：2012-05-04T14:45:13.627
> 
> 标签：c#, asp.net, .net, multithreading, asp.net-mvc-3

我目前正在将一个 Windows Phone 7 应用程序转换为它的 Web 应用程序。该应用程序使用一个大的主线程来收集数据，目前我只是在我的 ASP.NET MVC 控制器中按原样复制并粘贴它（只是一个标准线程操作）。

```
Sync _Sync = new Sync();
_Sync.StartSync(); 
```

任务工作正常，但由于线程使用来自 cookie 的全局数据集，因此在使用 2 个不同的用户名访问页面时会出现问题。例如，如果我在 Firefox 中使用“user1”登录，然后尝试使用另一个用户（例如“user2”）登录 Chrome，那么它将自动更改为第一个用户收集的异步数据；这意味着我将始终看到从上次登录的用户中提取的数据（不管我最初是与另一个用户一起登录 Firefox 的事实），而不是彼此的单独数据。

换句话说，线程不会为每个单独的用户单独启动。我该如何解决这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:12:44.810

`Static`字段和属性在线程之间共享，通常不应用于存储与特定用户或 Web 请求相关的数据。

以下建议之一应该可以解决您的线程问题并将您的用户数据分开。

*   `Sync`为每个请求创建一个类的实例，并从类中删除任何`static`字段/属性。
*   向类添加一个方法，该方法`Sync`返回特定用户的数据实例，而不是将数据存储在`static`字段/属性中。

# soundcloud - SoundCloud 自定义播放器的曲目限制？

> ID：10451075
> 
> 赞同：0
> 
> 时间：2012-05-04T14:45:19.147
> 
> 标签：soundcloud

我在 woofdriver.com 上的自定义播放器仅显示我的 SoundCloud 帐户的 81 首曲目中的前 50 首。如何让完整列表显示在播放器中？我看到一些对“限制”的引用，但仅在 API 的上下文中。

我正在使用这个自定义播放器[http://developers.soundcloud.com/docs/custom-player](http://developers.soundcloud.com/docs/custom-player)和以下代码在页面上调用它。播放器效果很好，但它只显示前 50 首曲目，而不是我在[http://soundcloud.com/williamhelman](http://soundcloud.com/williamhelman)上的流中的 81 首曲目，

```
$("a.wooftraxplayer").scPlayer({
  autoPlay  :   false
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:42:20.657

它接缝自定义播放器有一个限制，我不知道如何绕过它，但也许你可以使用新的时尚小部件！

尝试去[SoundCloud Widget API Playground](http://w.soundcloud.com/player/api_playground.html)

并输入网址： [http ://api.soundcloud.com/users/williamhelman](http://api.soundcloud.com/users/williamhelman)

我在播放器中有 80 多首歌曲，它有一些不错的功能，比如

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:09:34.907

实际上，我收到了 SoundCloud 的回复。当您仅使用帐户的基本 URL 时，自定义播放器限制为 50。但是，如果您创建一个集合，则没有这样的限制。因此，使用[http://soundcloud.com/williamhelman/sets/woofdriverhits](http://soundcloud.com/williamhelman/sets/woofdriverhits)作为我的 URL，我现在可以获取列表中的所有曲目。

# android - 无法在 ViewPager 中设置文本

> ID：10451091
> 
> 赞同：1
> 
> 时间：2012-05-04T14:46:09.813
> 
> 标签：android, adapter, android-viewpager, settext

我的 ViewPager 工作正常，但我现在尝试在 ViewPager 中的图像顶部添加一个 TexView，因此文本“附加”到寻呼机。
我可以很好地定义 TexView，但是当我尝试 setText() 时，它会在这一行返回 NullPointerException：
`score.setText("TEST");`

这是我的适配器的代码：

```
 private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 5;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);         

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.farleft;

            score = (TextView) findViewById(R.id.textView1);
            **EXCEPTION HERE**      score.setText("TEST");

            break;
        case 1:
            resId = R.layout.left;
            break;
        case 2:
            resId = R.layout.middle;
            break;
        case 3:
            resId = R.layout.right;
            break;
        case 4:
            resId = R.layout.farright;
            break;
        }

        View view = inflater.inflate(resId, null);
        view.setTag(position);

        view.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {

                int position = (Integer) view.getTag();
                Log.v("Log_tag", "Here image is clicked" + position);

                if(position == 0){
                    Intent intent = new Intent(LogoQuizActivity.this,
                            LevelOne.class);
                    startActivity(intent);

                }

                if(position == 1){
                    Intent intent = new Intent(getBaseContext(),
                            LevelTwo.class);
                    startActivity(intent);
                }

                if(position == 2){
                    Intent intent = new Intent(getBaseContext(),
                            LevelThree.class);
                    startActivity(intent);
                }

                if(position == 3){
                    Intent intent = new Intent(getBaseContext(),
                            LevelFour.class);
                    startActivity(intent);
                }

                if(position == 4){
                    Intent intent = new Intent(getBaseContext(),
                            LevelFive.class);
                    startActivity(intent);
                }
            }
        });

        ((ViewPager) collection).addView(view, 0);

        return view;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:03:25.967

用这个

```
View view = (View) inflater.inflate(R.layout.your_layout, null); 
```

并找到文本视图，例如

```
score = (TextView) view.findViewById(R.id.textView1);
score.setText("TEST"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:07:11.897

看起来你在尝试 findViewById(R.id.textView1) 之前没有膨胀布局

```
...
    View view = inflater.inflate(resId, null); // this comes first
    switch (position) {
    case 0:
        resId = R.layout.farleft;

        score = (TextView) view.findViewById(R.id.textView1);
        score.setText("TEST");

        break;
    case 1:
        resId = R.layout.left;
        break;
    case 2:
        resId = R.layout.middle;
        break;
    case 3:
        resId = R.layout.right;
        break;
    case 4:
        resId = R.layout.farright;
        break;
    }
... 
```

# android - 如何在 Android 中播放音效

> ID：10451092
> 
> 赞同：21
> 
> 时间：2012-05-04T14:46:10.473
> 
> 标签：android, audio

我正在寻找一段非常简单的代码来播放声音效果。到目前为止，我有这个代码：

```
SoundManager snd;
int combo;

private void soundSetup() {
    // Create an instance of the sound manger
    snd = new SoundManager(getApplicationContext());

    // Set volume rocker mode to media volume
    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);

    // Load the samples from res/raw
    combo = snd.load(R.raw.combo);
}

private void playSound() {
    soundSetup();
    snd.play(combo);
} 
```

但是，由于某种原因，当我使用该`playSound()`方法时，什么也没有发生。音频文件位于正确的位置。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-04T14:54:53.690

您使用有特定原因`SoundManager`吗？我会`MediaPlayer`改用，这里是 Android Docs 的链接

[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)

那么它就像

```
 MediaPlayer mp = MediaPlayer.create(getApplicationContext(), R.raw.combo);
    mp.start(); 
```

* * *

在“res/”目录下创建一个名为“raw/”的目录。将 wav 或 mp3 文件拖到 raw/ 目录中。如上所述从任何地方播放它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-26T19:43:38.117

我也尝试使用最佳答案，但是当我尝试连续多次播放声音时，它导致 MediaPlayer 出现 NullPointerExceptions，因此我稍微扩展了代码。

FXPlayer 是我的全球 MediaPlayer。

```
public void playSound(int _id)
{
    if(FXPlayer != null)
    {
        FXPlayer.stop();
        FXPlayer.release();
    }
    FXPlayer = MediaPlayer.create(this, _id);
    if(FXPlayer != null)
        FXPlayer.start();
} 
```

# mysql - 我想将客户端的 sqlite3 数据库表与服务器的 mysql 数据库连接起来

> ID：10451093
> 
> 赞同：0
> 
> 时间：2012-05-04T14:46:12.143
> 
> 标签：mysql, join, sqlite, sql-order-by

```
client's db   (ios sqlite3)

id     pressed
 1        1
 2        1
 3        1
 4        0
 5        0

 server's db (mysql)

id       title
 1        a
 2        b
 3        c
 4        d
 5        e 
```

我想应用到客户端数据库中按 asc 结果排序的服务器数据库。

所以想要的结果是d，e，a，b，c。但问题是一个是客户端，另一个是服务器。

一个是 sqlite3，另一个是 mysql。

我如何得到这个结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:17:02.360

如果是 MSWindows，那么您只需为两个表设置 odbc 数据源并在 MSAccess 中创建查询。我不认为这可以使用其他工具来完成，而中间没有一些代码。

# php - 编辑表单 MySQL 时从数据库中填充下拉列表

> ID：10451094
> 
> 赞同：0
> 
> 时间：2012-05-04T14:46:15.053
> 
> 标签：php, mysql, database

我对 PHP 很陌生，并且对下拉列表有疑问。我正在尝试从数据库中提取列表并在用户编辑表单但当前无法正常工作时填充该值。这里有一些完全相同的例子，但我不能让它工作，这可能是我的语法错误......

这是我的代码：

```
echo '<p><label>Is this project targeted toward?</label><select name="proj_targ_tow"><option value="Select...">Select...</option><option value="National Site">National Site</option><option="Local Site">Local Site</option><option value="Regional Site">Regional Site</option><option value="Other">Other</option></select></p>'; 
```

这是从数据库中填充值的逻辑，我试图从中提取的行是“proj_targ_tow”...

```
 $typesArray = array ( 'Select..', 'National Site', 'Local Site', 'Regional Site', 'Other' );
$selectedType = '';
echo 'as;ldfjas;lfmawoiealknfsliu2047a   ' . $row['proj_targ_tow'] . '<br />';
foreach($typesArray as $value){
    if($value == $row['proj_targ_tow']) {
        $selectedType = 'selected="selected"';
} 
echo '<option value="' . $value . '" ' . $selectedType . '>' . $value . '</option>';
} 
```

你们中的任何一个编码大神都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:55:18.763

在我看来，您的 echo 语句中的 $value 超出了范围......当您这样做时会发生什么？

```
$typesArray = array ( 'Select..', 'National Site', 'Local Site', 'Regional Site', 'Other' );

foreach($typesArray as $value){
    $selectedType = '';

    if($value == $row['proj_targ_tow'])
        $selectedType = 'selected="selected"';

    echo '<option value="' . $value . '" ' . $selectedType . '>' . $value . '</option>';
} 
```

# java - 使用 JSF 下载 CSV 文件

> ID：10451095
> 
> 赞同：5
> 
> 时间：2012-05-04T14:46:17.050
> 
> 标签：java, jsf, csv, download

我不知道如何下载 CSV 文件。CSV 将在运行时生成。我需要先将文件保存在tomcat WEB-INF目录中吗？我正在使用 JSF 1.2。

顺便问一下，这种任务最受青睐的 JSF 组件是什么？

* * *

编辑 (05.05.2012 - 15:53)

我尝试了`BalusC`他的第一个[链接](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)中所述的解决方案，但是如果我单击我的 commandButton 文件的内容会显示在网页上。也许是有问题`mimetype`？

xhtml 文件：

```
<a4j:form>
    <a4j:commandButton action="#{surveyEvaluationBean.doDataExport}" value="#{msg.srvExportButton}" />
</a4j:form> 
```

主豆：

```
 public String doDataExport() {

    try {
        export.downloadFile();  
    } catch (SurveyException e) {
        hasErrors = true;
    }
    return "";
} 
```

出口豆：

```
public void downloadFile() throws SurveyException {

    try {

        String filename = "analysis.csv";

        FacesContext fc = FacesContext.getCurrentInstance();
        HttpServletResponse response = (HttpServletResponse) fc.getExternalContext().getResponse();

        response.reset();
        response.setContentType("text/comma-separated-values");
        response.setHeader("Content-Disposition", "attachment; filename=\"" + filename + "\"");

        OutputStream output = response.getOutputStream();

        // writing just sample data
        List<String> strings = new ArrayList<String>();

        strings.add("filename" + ";" + "description" + "\n");
        strings.add(filename + ";" + "this is just a test" + "\n");

        for (String s : strings) {
            output.write(s.getBytes());
        }

        output.flush();
        output.close();

        fc.responseComplete();

    } catch (IOException e) {
        throw new SurveyException("an error occurred");
    }
} 
```

* * *

编辑 (05.05.2012 - 16:27)

我解决了我的问题。我必须使用`<h:commandButton>`而不是，`<a4j:commandButton>`现在它可以工作了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:16:59.753

> *我需要先将文件保存在tomcat WEB-INF目录中吗？*

不，只需在设置正确的响应标头后将其直接写入 HTTP 响应正文，`ExternalContext#getResponseOutputStream()`该响应标头告诉浏览器它将检索什么。

根据以下答案中的具体示例进行数学运算：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)
*   [JSP生成Excel电子表格（XLS）下载](https://stackoverflow.com/questions/477886/jsp-generating-excel-spreadsheet-xls-to-download/2154226#2154226)

基本上：

```
List<List<Object>> csv = createItSomehow();
writeCsv(csv, ';', ec.getResponseOutputStream()); 
```

* * *

> *顺便问一下，这种任务最喜欢的 jsf 组件是什么？*

这是主观的。但不管怎样，我们都用[`<p:dataExporter>`](http://www.primefaces.org/showcase/ui/exporterHome.jsf)得很满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:33:20.660

如果您使用的是 JSF 2，则可以使用 primefaces。
你可以看看那个[链接](http://www.primefaces.org/showcase-labs/ui/exporter.jsf)。

如果没有，你可以这样做：

```
List<Object> report = new ArrayList<Object>(); // fill your arraylist with relevant data 
String filename = "report.csv";    
File file = new File(filename);
Writer output = new BufferedWriter(new FileWriter(file));
output.append("Column1");
output.append(",");
output.append("Column2");
output.append("\n");
//your data goes here, Replcae Object with your bean
for (Object row:report){
    output.append(row.field1);
    output.append(",");
    output.append(row.field2);
    output.append("\n");
}
output.flush();
output.close(); 
```

# mysql - 获取 SUM 生成的新列的前 10 名的 SQL 查询

> ID：10451098
> 
> 赞同：0
> 
> 时间：2012-05-04T14:46:20.547
> 
> 标签：mysql, sql, top-n

我有一个看起来像这样的查询：

```
SELECT Name, SUM(Price * Quantity) AS Total
FROM Sales  
WHERE Date = " + ddItems.SelectedItem + "
GROUP BY Name 
```

如何显示前 10 个总数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:50:00.907

在 MySQL 中，可以使用 LIMIT 子句限制行数，因此您可以将其添加到查询中以获得前 10 名：

```
ORDER BY Total DESC
LIMIT 10 
```

# javascript - D3.js 中的日期操作

> ID：10451099
> 
> 赞同：1
> 
> 时间：2012-05-04T14:46:27.037
> 
> 标签：javascript, d3.js

如何按数据点列表分组并按天聚合它们？例如，给定这个列表：

```
2012-03-18T00:00:04 
2012-03-18T00:05:03 
2012-03-19T00:10:04
2012-03-19T00:15:03 
2012-03-19T00:20:03 
2012-03-19T00:25:03 
```

我希望有：

```
2012-03-18,2
2012-03-19,4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:01:55.743

假设您将数据点作为一个名为的字符串数组`points`

```
var map = {};
points.forEach(function(x) {
  var s = x.split("T")[0];
  if(map.hasOwnProperty(s)) { 
    map[s]++;
  }
  else {
    map[s] = 1;
  }
}); 
```

这为您提供了该日期每次出现的计数。

例子

```
js> points
["2012-03-18T00:00:04", "2012-03-18T00:05:03", "2012-03-19T00:10:04", "2012-03-19T00:15:03", "2012-03-19T00:20:03", "2012-03-19T00:25:03"]
js> points.forEach(function(x) {
  var s = x.split("T")[0];
  if(map.hasOwnProperty(s)) { 
    map[s]++;
  }
  else {
    map[s] = 1;
  }
});
js> map
({'2012-03-18':2, '2012-03-19':4}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:59:44.497

`T`我不得不做出将日期与时间分开的假设。您可以使用正则表达式或子字符串提取日期，然后添加到计数中。我使用了正则表达式。

[http://jsfiddle.net/p3ADG/](http://jsfiddle.net/p3ADG/)

```
var count = {};

var input = [
 "2012-03-18T00:00:04",
 "2012-03-18T00:05:03",
 "2012-03-19T00:10:04",
 "2012-03-19T00:15:03",
 "2012-03-19T00:20:03",
 "2012-03-19T00:25:03"
 ];

for(var i = 0; i < input.length; i++) {
  var date = /(.*)T/.exec(input[i])[1];
    if(!count[date]) {
      count[date] = 1;
    }
    else {
      count[date] += 1;
    }
}

for (var date in count) {
  document.write(date+","+count[date]+"<br>");   
} 
```

# javascript - 使用 AJAX 加载投资组合项目而无需重新加载页面

> ID：10451100
> 
> 赞同：0
> 
> 时间：2012-05-04T14:46:41.777
> 
> 标签：javascript, ajax, joomla

我在此页面上有一堆按标签排序的投资组合项目。[链接到该站点](http://dev.digitup.se/suhoski/index.php?option=com_jms_portfolio&view=item&id=19&Itemid=651)。该网站是用 Joomla 2.5 构建的，我有一个组件负责显示每个投资组合项目。我需要做的是在不重新加载页面的情况下加载每个相应的投资组合项目。所以基本上这里是具有 AJAX 调用的 javascript 函数

```
function ajax_portfolio($pid) {
var url = 'index.php?option=com_jms_portfolio&task=item.ajax_load_portfolio&tmpl=component&id=' + $pid;
alert(url);
var x = new Request({
    url: url, 
    method: 'post',
    evalScripts: true,
    evalResponse: true,  
    onSuccess: function(responseText){
        document.getElementById('ja-content-main').innerHTML = responseText;
        aaa();
    }

    }).send();} 
```

问题其实不是AJAX调用原因和标签的点击事件，这个事件没有问题。问题是在每次 ajax 调用后触发 javascript 函数 aaaa()。抱歉，如果我不清楚，但问题是在每次 ajax 调用后触发函数 aaa()，此函数为每个投资组合项目创建滑块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:55:23.867

删除包装图像的标签的现有`href`属性。`<a>`然后，在给它们一个 unqiue id 后，`click`通过 javascript 将处理程序添加到每个标签。`<a>`然后，这将导致在单击图像而不是重定向到新页面时调用 ajax。

至于调用该`aaa`函数，我认为问题在于范围，因为您尚未发布该方法。要给出`aaa`正确的范围，您可以向 ajax_portfolio 传递一个额外的参数来完成此操作。

下面是一个[JQuery](http://jquery.com)示例。

```
<a port_id="56"><img>...</img></a>

$(document).ready(function() {
  $("a").click(function() {
    ajax_portfolio($(this).attr("port_id"), $(this));
  });
});

// Add the $elem parameter here to track which element called this method.    
function ajax_portfolio($pid, $elem) {
  var url = ...;
  var x = new Request({
    url: url, 
    method: 'post',
    evalScripts: true,
    evalResponse: true,  
    onSuccess: function(responseText){
      document.getElementById('ja-content-main').innerHTML = responseText;
      // Pass the element that was clicked on to the aaa function.
      aaa($elem);
  }
}).send();} 
```

# nhibernate - nHibernate 和 QueryOver 序列化以供 Web 服务处理

> ID：10451104
> 
> 赞同：1
> 
> 时间：2012-05-04T14:46:54.040
> 
> 标签：nhibernate, c#-4.0, nhibernate-criteria

是否可以通过 nHibernate 生成查询，序列化`Criteria`/ `DetachedCriteria`，将其发送到外部服务进行处理，并让结果几乎取代`QueryOver`，或者至少注入其中？

所以，像：

```
return _session
     .QueryOver<VirtualFolder>()
     .Where(m => m.Name = "FolderName" & m.Parent = folderParent)
     .SingleOfDefault(); 
```

将导致查询有效地传递给远程服务......

谢谢，
基龙

### 编辑

我特别询问能够序列化查询，因为我们有一些共享服务。其中一个使用领域可以直接访问数据库，而另一个则不能。因此，如果能够使用相同的服务，使用不同的 QueryOver 实现，那就太好了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:58:31.930

@Anton 有一个很好的观点。
我建议您创建自己的*查询对象*并将其序列化。
[Ayende 的这篇文章](http://ayende.com/blog/3955/repository-is-the-new-singleton)可以帮助您入门。

# fancybox - fancybox - 弹出窗口大小

> ID：10451112
> 
> 赞同：1
> 
> 时间：2012-05-04T14:47:21.407
> 
> 标签：fancybox

我正在使用 FancyBox，但遇到了一个小问题。

我有一个 930 像素宽的框，用户可以在其中与弹出窗口中的内容进行交互。

问题是，当用户使用屏幕分辨率（例如 800x600）时，框中的某些项目不会显示。该框具有固定的高度和宽度（930x400）。

我曾尝试使用`scrolling: auto`，`scrolling: yes`但似乎没有任何效果

有没有解决的办法？

谢谢

更新： - 包含的代码片段

```
$.fancybox({ 
           "padding" : 3, 
           "type":"iframe",  
           "href":"/requirements/"+$(".sf_admin_form_field_id div.content").html()+"/edit?req_id="+$(this).children(".id").children("div").children("input").val(), 
           "width" : 934, 
           "height" : 391, 
           "overlayShow": true,  
           "overlayOpacity" : 0, 
           "scrolling" : "yes", 
           "onClosed" : function(){ window.location.reload(); 
           } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:22:16.180

尝试

`scrolling: 'auto'`（注意引号！）

如果这不起作用，您可以包含您正在使用的 fancybox 初始化程序吗？

# c# - 如何在中继控制中动态使用更新功能？

> ID：10451116
> 
> 赞同：0
> 
> 时间：2012-05-04T14:47:40.780
> 
> 标签：c#, asp.net, repeater, edit, insert-update

我有 1 个转发器并从**Assign_Subjects表中****绑定 subjectid 和 subjectname** ...并放置**1 个文本框**模板以插入在每个主题**@btnInsert_Click**事件中获得的标记，我已经编写了如下插入代码，它工作正常...**结果**表在我想在主题中插入标记...

 ******> 我想更新在转发器控件中插入的标记（在文本框 - MarksObtained 列中）...我使用按钮作为 btnUpdate 来编辑文本框...。

**.aspx**页面

```
<div>
 <table border="0" width="600px" cellpadding="2" cellspacing="1" style="border: 1px solid maroon;">
            <asp:Repeater ID="Repeater1" runat="server">
                <HeaderTemplate>
                    <tr bgcolor="maroon">
                        <th>
                            Subject_Id
                        </th>
                        <th>
                            Subject_Name
                        </th>
                        <th>
                            Fill_Marks
                        </th>
                    </tr>
                </HeaderTemplate>
                <ItemTemplate>
                    <tr>
                        <td width="100">
                            <asp:TextBox ID="txtSubjectId" runat="Server" Text='<%#Eval("Subject_Id")%>'></asp:TextBox>
                        </td>
                        <td>
                            <asp:TextBox ID="txtSubjectName" runat="Server" Text='<%#Eval("Subject_Name")%>'></asp:TextBox>
                        </td>
                        <td>
                            <asp:TextBox ID="txtMarks" runat="server" ></asp:TextBox>
                        </td>
                    </tr>
                </ItemTemplate>
            </asp:Repeater>
        </table>
        <asp:Button ID="btnInsert" runat="server" OnClick="btnInsert_Click" Text="Insert" />
        **<asp:Button ID="btnUpdate" runat="server" OnClick="btnUpdate_Click" Text="Insert" />**
    </div> 
```

**后面的代码 - c#**

```
 protected void btnInsert_Click(object sender, EventArgs e)
  {
      foreach (RepeaterItem repeaterItem in Repeater1.Items)
      {
          string subjectId = (repeaterItem.FindControl("txtSubjectId") as TextBox).Text.Trim();
          string subjectName = (repeaterItem.FindControl("txtSubjectName") as TextBox).Text.Trim();
          string marks = (repeaterItem.FindControl("txtMarks") as TextBox).Text.Trim();

          this.SaveData(subjectId, subjectName, marks);
      }
  }

 private void SaveData(string subjectId, string subjectName, string marks)
        {
            cn = new SqlConnection(ConfigurationManager.ConnectionStrings["DbConnect"].ConnectionString);
            cn.Open();

            SqlCommand cmd = new SqlCommand("Insert into result(id,name,marks) values('"+subjectId+"','"+subjectName+"','"+marks+"')", cn);

            Repeater1.DataSource = cmd.ExecuteReader();

            //Display a popup which indicates that the record was successfully inserted

            Page.ClientScript.RegisterClientScriptBlock(typeof(Page), "Script", "alert('Successfuly Inserted. !!');", true);

            cn.Close();
            cmd.Connection.Close();
            cmd.Connection.Dispose();
        } 
```

插入**结果**表

```
id     varchar(20)
name   varchar(20)
marks  varchar(20) 
```

**现在的问题是我如何通过中继器更新？？？**用更适用的代码解释...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:40:36.640

您在中继器内的按钮应如下所示......

```
 <td>
    <asp:ImageButton ID="btnSave" runat="server"  
         ImageUrl="~/images/save.png" ToolTip="click to save record"  
         CommandName="SaveData" 
         OnClientClick="return confirm('Conform message before  saving')" />
</td> 
```

然后捕获中继器控件生成的事件，使用中继器的 ItemCommand 事件

```
protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
{
   // note that this is the command we assign to save button. 
   // we use it here to capture which button was clicked.
    if (e.CommandName == "SaveData")
    {
        TextBox txtFirstName = e.Item.FindControl("txtFirstName") as TextBox;
        string fname= txtFirstName.Text;

       // do somethig with your date here..

    }
} 
```******

# css - 覆盖主列和左侧边栏的静态块（在 3 列布局上）

> ID：10451117
> 
> 赞同：0
> 
> 时间：2012-05-04T14:47:40.860
> 
> 标签：css, magento, layout

我试图弄清楚如何在 3 列布局上覆盖主列空间和左侧边栏的一些内容。页面在第一部分有 3 列，在下部有 2 列左侧边栏。

这是我的主页，我不需要新的布局，因为主页是唯一使用当前 3 列布局的页面。

获得此设计的最佳方式是什么？
是否可以将其作为静态块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:24:40.007

因此，作为第一步，我已将其添加到 /app/etc/local.xml

```
 <cms> 
 <layouts> 
 <homepage> 
 <label>Home Page</label> 
 <template>page/home-page.phtml</template> 
 <layout_handle>home_page</layout_handle> 
 </homepage> 
 </layouts> 
 </cms> 
```

并创建了名为 home-page.phtml 的 3 列布局的副本：

应用\设计\前端......\模板\页面\主页.phtml

现在我有一个新的布局，但不幸的是我不知道如何编辑以获得结果。

问这个我觉得有点不舒服，但我对布局设计真的很陌生，我不知道如何编辑我的新主页.phtml，希望你能理解我。

文件如下所示：

```
<head>
<?php echo $this->getChildHtml('head') ?>
</head>
<body<?php echo $this->getBodyClass()?' class="'.$this->getBodyClass().'"':'' ?>>
<?php echo $this->getChildHtml('after_body_start') ?>
<div class="wrapper">
    <?php echo $this->getChildHtml('global_notices') ?> 
    <div class="centerbg">
    <div class="bottombg">
    <div class="topcurve">
    <div class="page">      
        <?php echo $this->getChildHtml('header') ?>
        <div class="main-container col3-layout">
            <div class="main">                
                    <div class="col-left sidebar"><?php echo $this->getChildHtml('left') ?></div>
                    <div class="col-main">
                        <?php echo $this->getChildHtml('breadcrumbs') ?>                 
                        <?php echo $this->getChildHtml('global_messages') ?>
                        <?php echo $this->getChildHtml('content') ?>
                    </div> 
                    <div class="col-right sidebar"><?php echo $this->getChildHtml('right') ?></div>                
            </div>
        </div>      
        <?php echo $this->getChildHtml('footer') ?>
        <?php echo $this->getChildHtml('before_body_end') ?>
    </div>  
    </div></div></div>
</div>
<?php echo $this->getAbsoluteFooter() ?>
</body>
</html> 
```

我想我也需要新的 CSS 类，对吧？

# .net - SQL Server CLR TVF 将两个新列返回到数据流中

> ID：10451118
> 
> 赞同：1
> 
> 时间：2012-05-04T14:47:44.263
> 
> 标签：.net, sql-server, sql-server-2005, sqlclr

关于这个问题，这里[SQL CLR 返回两个新列](https://stackoverflow.com/questions/10447020/sql-clr-return-two-new-columns)我正在尝试创建一个简单的 SQL CLR 函数，我可以在其中将两个字符串传递给函数，并将两个新列传回给我。

所以说我有以下数据： -

```
Col A     Col B
Bob       Joe
Jane      John 
```

我希望能够将 Col A 和 Col B 传递给 CLR 函数并让它返回类似这样的内容（其中 Col C 和 D 是新列）：-

```
Col A     Col B     Col C     Col D
Bob       Joe       BobCLR    JoeCLR
Jane      John      JaneCLR   JohnCLR 
```

我有以下代码： -

```
 [SqlFunction(FillRowMethodName = "FillRow")]
    public static IEnumerable MyCLRFunction(string A, string B)
    {
        String[] values = new String[2];
        values[0] = A+"CLR";
        values[1]= B+"CLR";

        return values;
    }

         private static void FillRow(Object obj, out string C, out string D)
      {
            String[] row = (object[])obj;
            C = (string)row[0];
            D = (string)row[1];
      } 
```

我可以使用 CREATE ASSEMBLY 在 SQL Server 中注册程序集

我可以在 SQL Server 中创建函数 ok 如下：-

```
CREATE FUNCTION dbo.MyCLRFunction(@a [nvarchar](4000), @b [nvarchar](4000))
RETURNS TABLE
(c [nvarchar](4000) null, d [nvarchar](4000) null) with execute as caller
AS
EXTERNAL NAME [MyNamespace].[CLRFunctions].[MyCLRFunction] 
```

但是，当我这样做时：-

```
SELECT * FROM MyCLRFunction('Bob','Joe') 
```

我越来越：-

```
Msg 6260, Level 16, State 1, Line 1
An error occurred while getting new row from user defined Table Valued Function : 
System.InvalidCastException: Unable to cast object of type 'System.String' to type 'System.String[]'.
System.InvalidCastException: 
   at CLRFunctions.FillRow(Object obj, String& C, String& D) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:16:00.813

我从来没有以这种方式完成 CLR 存储过程，您似乎返回的是一个字符串数组，而不是一个原子字符串。

返回表（c nvarchar null，d nvarchar null）

同样，乍一看，上面的 c 和 d 期待字符串，而不是数组元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:14:02.400

Ok 现在已经设法在 Ienumerable 中使用 KeyValuePair 来做到这一点。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;

public class CLRFunctions
{

    private static IEnumerable<KeyValuePair<double, double>> CoordinatesEnumerable(double Lat, double Long)
    {
        return new Dictionary<double, double> { { Lat, Long } };
    }

    [SqlFunction(FillRowMethodName = "FillRow")]
    public static IEnumerable ToLatLong(double East, double North)
    {
        return CoordinatesEnumerable(East, North);
    }

    private static void FillRow(Object obj, out SqlDouble Lat, out SqlDouble Long)
    {
        KeyValuePair<double, double> Coordinates = (KeyValuePair<double, double>)obj;
        Lat = new SqlDouble(Coordinates.Key);
        Long = new SqlDouble(Coordinates.Value);
    }

} 
```

# javascript - 如何在正确的行中显示此消息，而不是在所有行中

> ID：10451119
> 
> 赞同：0
> 
> 时间：2012-05-04T14:47:44.413
> 
> 标签：javascript, jquery

下面是显示删除消息的代码，但它在每一行中都显示它，这是不正确的，它应该打开；y 显示在文件被删除的行中：

```
 var counter = 0;

function stopImageUpload(success, imagefilename){

      var result = '';
      counter++;

      if (success == 1){
         result = '<span class="imagemsg'+counter+'">The file was uploaded successfully!</span><br/><br/>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else {
         result = '<span class="imageemsg">There was an error during file upload!</span><br/><br/>';
      }

      $(".deletefileimage").on("click", function(event) {

         var image_file_name = $(this).attr('image_file_name');

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
      .done(function(data) {
        $(".imagemsg" + counter).html(data);
       });

       $(this).parent().remove();

    });

      return true;   
} 
```

结果变量在 imageupload.php 中被调用：

打回来：

```
 <script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result ? 'true' : 'false'; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');</script> 
```

[这里](https://helios.hud.ac.uk/u0867587/Mobile_app/QandATable3.php)是应用程序的链接。

请执行此操作，单击“添加”按钮两次，在两行中使用文件输入上传图像。在这两行中，它都会说明文件上传成功，并且会在各自行的底部显示两个文件的名称。现在通过单击删除按钮删除文件，您将看到消息（文件已删除）显示在两行中，它应该只显示在删除文件的行中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:51:12.837

因为您在函数内部初始化计数器，它将是一个局部变量，因此每次的值都是零。您需要在函数之外对其进行初始化。

# wordpress - 如何在 WordPress 中对博客页面进行样式化

> ID：10451120
> 
> 赞同：-1
> 
> 时间：2012-05-04T14:47:48.500
> 
> 标签：wordpress

我正在为客户开发 WordPress 网站，想知道博客的样式在哪里。可以在此处查看该博客[http://ruthcrocker.whoistheoldguy.com/blog/](http://ruthcrocker.whoistheoldguy.com/blog/)。我想要做的就是使整个博客页面更窄并居中以匹配网站其余部分的样式。然后将类别和订阅者放在右侧，并将最新的博客文章放在中间。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:49:55.697

请参阅Wordpress 手册中的[主题开发](http://codex.wordpress.org/Theme_Development)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:51:09.750

基本样式表位于此处：

`http://ruthcrocker.whoistheoldguy.com/wp-content/themes/ruth/styles/style.css`

但我想看看：

`http://codex.wordpress.org/Theme_Development`

用于开发说明和建议

# knockout.js - 淘汰映射到JS错误？空数组项

> ID：10451121
> 
> 赞同：1
> 
> 时间：2012-05-04T14:47:50.590
> 
> 标签：knockout.js, knockout-mapping-plugin

使用 knockoutjs 映射插件 2.11，我发现如果使用 ko.mapping.fromJS 更新视图模型（带有数组元素）并且新数组元素的长度比旧数组元素长，ko.mapping.toJS 会生成空数组项。

我映射的初始数据是：

```
var initData = {text: 'Some Text', 
                arr: [{key: 1, value: 'a'}, 
                      {key: 2, value: 'b'}]}; 
```

然后我用一个新对象更新了视图模型：

```
var newData = {text: 'Changed Text', 
                arr: [{key: 1, value: 'aa'}, 
                      {key: 12, value: 'bb'},
                      {key: 13, value: 'cc'}]}; 
```

之后我调用了 ko.mapping.toJS()，我发现第三个数组项是一个空对象。我不确定这是一个错误还是我错过了什么。我注意到的另一件事是，它仅在我第一次更新数据时发生。如果我用 initData 然后再用 newData 更新视图模型，结果是正确的。[http://jsfiddle.net/gonglei/xgPSq/](http://jsfiddle.net/gonglei/xgPSq/)

编辑：感谢您的回答杰森。您的解决方案似乎不适合我在实际项目中的情况。我需要检索修改后的数据对象并将其发送到服务器。因此，当我调用 ko.mapping.toJS 时，我希望我能立即获得正确的数据对象，而不仅仅是在计算函数中显示 JSON 字符串。我在调用 ko.mapping.toJS 后立即设置了一个断点并观察数据对象，第三个元素确实是空的。我的服务器确实收到了这个空元素。油门扩展器确实让我得到了正确的对象，但它是异步方式。反正我是报bug了，看看开发者能不能确认一下或者给我解决办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T07:46:15.080

第三项不是空对象。您可以通过列表绑定看到它具有值，即使您将其放在 change() 函数的末尾，它也会返回正确的 JSON：

```
alert('JSON is ' + ko.mapping.toJSON(self.data)); 
```

也许 ko.mapping.toJSON() 没有正确地将自己注册为依赖，或者它需要一些快捷方式并且不打算在计算中使用？

***编辑***

在进行所有更改后使用油门扩展器强制进行计算可以解决问题（[jsfiddle](http://jsfiddle.net/XdkbF/)）

```
 this.json = ko.computed(function() {
        return JSON.stringify(ko.mapping.toJS(self.data, mapping));
    }).extend({ throttle: 1 }); 
```

# ios - NSLog 显示值，但上下文不保存数据

> ID：10451123
> 
> 赞同：1
> 
> 时间：2012-05-04T14:47:58.290
> 
> 标签：ios, core-data

我正在使用核心数据制作应用程序。
它是 facebook 应用程序，所以我将用户信息保存到 core-data。
我想将个人资料图片添加到用户信息数据中。

```
 for (UserInfo *info in fetchedObjects) {
        if ([info.fbId isEqualToString:delegate.currentUserInfo.fbId]) {
            info.details.photos.image  = [NSData dataWithContentsOfURL:url];
            info.details.photos.imageId = [result objectForKey:@"id"];
            info.details.photos.details = info.details;

            delegate.currentUserInfo = info;

            for (UserInfo *info in fetchedObjects) {
                NSLog(@"currentUserInfo : %@", info);
                NSLog(@"curretnUserDetails : %@", info.details);
                NSLog(@"currentUserPhoto : %@", info.details.photos);
            }

            if (![context save:&error]) {
                NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
            }
        }
    } 
```

像这样，我将数据添加到与FB用户ID对应的core-data（relationshop命名照片）中。

结果，中间的NSLog很好地显示了photoInfo数据，但是当我重新启动我的应用程序时，没有照片数据。
我好几天没解决这个问题。帮我！

-编辑

![在此处输入图像描述](../Images/919ba5360dfb45ca1d1f70440b6cf10b.png)

DataModel 的组织方式如下图所示。
我只使用一种上下文，而且我是新手，所以我无法理解所有感谢评论。

-编辑2

```
 if (!beExist) {
        UserInfo *userInfo = [NSEntityDescription insertNewObjectForEntityForName:@"UserInfo" inManagedObjectContext:context];
        userInfo.name = [myInfoDic objectForKey:@"name"];
        userInfo.fbId = [myInfoDic objectForKey:@"id"];
        userInfo.type = @"user";
        UserDetails *userDetails = [NSEntityDescription insertNewObjectForEntityForName:@"UserDetails" inManagedObjectContext:context];
        userDetails.gender = [myInfoDic objectForKey:@"gender"];
        userDetails.work = [[[[myInfoDic objectForKey:@"work"] objectAtIndex:0] objectForKey:@"employer"] objectForKey:@"name"];
        NSArray *eduArray = [myInfoDic objectForKey:@"education"];
        userDetails.education = [[[eduArray objectAtIndex:eduArray.count-1] objectForKey:@"school"] objectForKey:@"name"];
        userDetails.birthday = [myInfoDic objectForKey:@"birthday"];
        userDetails.location = [[myInfoDic objectForKey:@"location"] objectForKey:@"name"];
        PhotoInfo *photoInfo = [NSEntityDescription insertNewObjectForEntityForName:@"PhotoInfo" inManagedObjectContext:context];

        userDetails.info = userInfo;
        userInfo.details = userDetails;
        userInfo.details.photos = photoInfo;
        photoInfo.details = userDetails;

        delegate.currentUserInfo = userInfo;

        if (![context save:&error]) {
            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
        } 
```

我保存了这样的用户信息。我在 AppDelegate 中创建了上下文。我为 Core data 制作了项目，所以 Xcode 制作了那个代码。

我可以看到这个日志

```
2012-05-04 00:40:58.997 Feek[16423:fb03] currentUserPhoto : <PhotoInfo: 0x6d15d60> (entity: PhotoInfo; id: 0x6d18550 <x-coredata://2ED200FE-D799-4C66-A0AC-5BE1BC426439/PhotoInfo/p1> ; data: {
details = "0x8830ca0 <x-coredata://2ED200FE-D799-4C66-A0AC-5BE1BC426439/UserDetails/p1>";
image = <ffd8ffe0 00104a46 49460001 02000001 00010000 fffe0004 2a00ffe2 021c4943 435f5052 4f46494c 45000101 0000020c 6c63>;
imageId = 334168116641714;
}) 
```

我认为这是核心数据接受数据，但在杀死我的应用程序后它不会保留。

# java - SLF4J 版本不匹配和重复绑定

> ID：10451125
> 
> 赞同：4
> 
> 时间：2012-05-04T14:48:08.703
> 
> 标签：java, maven

我有一个使用以下 Maven 依赖项的项目：

```
<dependency>
                <groupId>com.dropbox</groupId>
                <artifactId>client2</artifactId>
                <version>1.3</version>
            </dependency>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.8.1</version>
            </dependency>
            <dependency>
                <groupId>org.apache.httpcomponents</groupId>
                <artifactId>httpcore</artifactId>
                <version>4.0.1</version>
            </dependency>
            <dependency>
                <groupId>org.apache.httpcomponents</groupId>
                <artifactId>httpclient</artifactId>
                <version>4.0.3</version>
            </dependency>
            <dependency>
                <groupId>org.apache.httpcomponents</groupId>
                <artifactId>httpmime</artifactId>
                <version>4.0.3</version>
            </dependency>
            <dependency>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
                <version>1.1.1</version>
            </dependency>
            <dependency>
                <groupId>commons-io</groupId>
                <artifactId>commons-io</artifactId>
                <version>2.3</version>
            </dependency>
            <dependency>
                <groupId>org.json</groupId>
                <artifactId>simple</artifactId>
                <version>1.1</version>
            </dependency>
            <dependency>
                <groupId>com.google.inject</groupId>
                <artifactId>guice</artifactId>
                <version>3.0</version>
            </dependency>
            <dependency>
                <groupId>org.mockito</groupId>
                <artifactId>mockito-all</artifactId>
                <version>1.9.0</version>
            </dependency>
            <dependency>
                <groupId>com.believer</groupId>
                <artifactId>box4j</artifactId>
                <version>1.2</version>
            </dependency>
            <dependency>
                <groupId>com.sun.jersey</groupId>
                <artifactId>jersey-client</artifactId>
                <version>1.12</version>
            </dependency>
            <dependency>
                <groupId>com.google.code.gson</groupId>
                <artifactId>gson</artifactId>
                <version>2.1</version>
            </dependency>
            <dependency>
                <groupId>org.apache.maven.surefire</groupId>
                <artifactId>surefire</artifactId>
                <version>2.12</version>
            </dependency>
        </dependencies> 
```

当我运行它时，它会给我警告抱怨：

```
SLF4J: The requested version 1.5.10 by your slf4j binding is not compatible with [1.5.5, 1.5.6, 1.5.7, 1.5.8]
SLF4J: See http://www.slf4j.org/codes.html#version_mismatch for further details.
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/Users/kzhang/.m2/repository/org/slf4j/slf4j-jdk14/1.5.10/slf4j-jdk14-1.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/Users/kzhang/.m2/repository/org/slf4j/slf4j-simple/1.5.10/slf4j-simple-1.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/Users/kzhang/.m2/repository/org/slf4j/slf4j-log4j12/1.5.8/slf4j-log4j12-1.5.8.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

我的理解是有不止一个依赖包含slf4j。我应该可以从他们中排除 slf4j。但我不知道我的哪个依赖项实际上导致了这种情况。

有人可以帮忙吗？

问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T15:09:50.383

尝试运行`mvn dependency:tree -Dincludes=*slf4j*`。它应该向您显示哪个工件定义了对 slf4j 的依赖关系。

附加参数可用于过滤特定的 slf4j 依赖项。有关特定依赖项的插件和过滤的更多信息，请参见[此处](http://maven.apache.org/plugins/maven-dependency-plugin/examples/filtering-the-dependency-tree.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T15:02:26.217

要检查您的依赖项来自何处，请尝试**mvn dependency:tree**。

# java - netbeans项目分享

> ID：10451127
> 
> 赞同：2
> 
> 时间：2012-05-04T14:48:19.163
> 
> 标签：java, netbeans

我在 NetBeans 中开发了一个 GUI 应用程序，我想与我的朋友分享它。我刚刚创建了整个项目文件夹的 RAR 存档并发送给他。他提取了内容并在他的 IDE 中打开，但出现以下错误。

他说找不到主要方法是抛出的错误（java.lang.UnsupportedClassVersionError: ssdsimulation/SSDSimulator : Unsupported major.minor version 51.0）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:51:05.987

他需要安装和使用 Java SE 7。

# c - Arduino从串行读取字符串

> ID：10451128
> 
> 赞同：6
> 
> 时间：2012-05-04T14:48:21.510
> 
> 标签：c, arduino

```
#include <stdio.h>

#define LED 13

void setup() {
  pinMode(LED, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  int i;
  char command[5];
  for (i = 0; i < 4; i++) {
    command[i] = Serial.read();
  }
  command[4] = '\0';

  Serial.println(command);

  if (strcmp(command, "AAAA") == 0) {
    digitalWrite(LED, HIGH);
    Serial.println("LED13 is ON");
  } else if (strcmp(command, "BBBB") == 0) {
    digitalWrite(LED, LOW);
    Serial.println("LED13 is OFF");
  }
} 
```

我正在尝试使用 Arduino 的串行读取 4 个字符长的字符串，当它是 AAAA 时打开 LED，当它是 BBBB 时关闭串行。

但是，当我输入“AAAA”时，它会显示“AAAÿ”，并且沿途有很多“ÿ”。

我认为我正在正确阅读所有内容，但效果不佳，知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T19:18:18.330

```
String txtMsg = "";  
char s;

void loop() {
    while (serial.available() > 0) {
        s=(char)serial.read();
        if (s == '\n') {
            if(txtMsg=="HIGH") {  digitalWrite(13, HIGH);  }
            if(txtMsg=="LOW")  {  digitalWrite(13, LOW);   }
            // Serial.println(txtMsg); 
            txtMsg = "";  
        } else {  
            txtMsg +=s; 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T18:24:40.037

它读取“ÿ”，因为缓冲区中没有要读取的字符。其他字符从 uart 缓冲区中解栈需要一些时间。因此，您不能循环读取字符。在阅读它之前，您必须等待另一个字符可用。

此外，这种等待字符的方式并不是最好的方式，因为它阻塞了主循环。

这是我在我的程序中所做的：

```
String command;

void loop()
{
    if(readCommand())
    {
        parseCommand();
        Serial.println(command);
        command = "";
    }
}

void parseCommand()
{
  //Parse command here
}

int readCommand() {
    char c;
    if(Serial.available() > 0)
    {
        c = Serial.read();
        if(c != '\n')
        {       
            command += c;
            return false;
        }
        else
            return true;

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T12:22:52.127

```
#define numberOfBytes 4
char command[numberOfBytes];

    void serialRX() {
      while (Serial.available() > numberOfBytes) {
        if (Serial.read() == 0x00) { //send a 0 before your string as a start byte
          for (byte i=0; i<numberOfBytes; i++)
            command[i] = Serial.read();
        }
      }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T15:42:34.543

您应该检查是否有可供阅读的内容。如果不是，那么*read()*将返回 -1。您可以使用*Serial.available()*检查读取缓冲区。

# javascript - 在 IE8 中添加 jQuery 选项卡和转到选项卡

> ID：10451130
> 
> 赞同：0
> 
> 时间：2012-05-04T14:48:27.960
> 
> 标签：javascript, jquery, jquery-ui, tabs

我正在尝试向页面动态添加一个额外的 jquery 选项卡，然后转到该选项卡。

我将新选项卡放在最后一个选项卡之前（如在现实世界的示例中，我实际上使用最后一个选项卡作为按钮来创建新选项卡）

出于某种原因，IE8 变得非常混乱，并将内容放入您创建的新选项卡中，这是所有选项卡（标题、内容等）的 html

[http://jsfiddle.net/nSLfN/3/](http://jsfiddle.net/nSLfN/3/)

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:52:02.590

您应该使用标签添加方法转到新添加的标签。您还需要正确设置选项卡内容href和内容。见下文，

```
var $tabs = $('#tabs');
$tabs.tabs({
    tabTemplate: '<li><a href="#{href}">#{label}</a></li>',
    add: function( event, ui ) {
        $tabs.tabs( "option", "selected", ui.index );

        var tabCount = $tabs.tabs("length");
        $(ui.panel).append('<div id="#Delivery"'+ tabCount  +'>New Tab Content ' + tabCount  + '</p>');
    }
});

$('#addtab').click(function() {    
    var tabCount = $tabs.tabs("length");
    $tabs.tabs("add", "#Delivery" + tabCount, "Delivery " + tabCount, tabCount-1);
}); 
```

[**演示**](http://jsfiddle.net/nSLfN/12/)

# iphone - NSURLConnection 委托方法没有被调用

> ID：10451131
> 
> 赞同：1
> 
> 时间：2012-05-04T14:48:28.193
> 
> 标签：iphone, ios, cocoa, delegates, nsurlconnection

我有一个服务器类，它具有 NSURLConnection 的委托方法。我还有另一个名为 SendRequest 的类，它将 NSMutableURLRequest 发送到服务器类。在服务器类中，我有两种方法称为

```
- (void)executeAsync:(NSMutableURLRequest)urlRequest timeOutInterval:(int)timeOut
{
    _urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES];];
}

- (void)executeSync:(NSMutableURLRequest)urlRequest
{
    NSData* respData = [NSURLConnection sendSynchronousRequest:urlRequest                        returningResponse:&response error:&error];

} 
```

一切正常，直到这里，我可以从调用委托方法的 SendRequest 类调用上述 executeAsync 方法。

现在我在 SendRequest 类中添加了一个新方法，它将调用 Server 类中的 executeRequest 方法。

```
- (void)executeRequest:(NSMutableURLRequest)urlRequest
{
    _urlConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES];];
} 
```

这一次，我被困住了。正在调用 executeRequest 方法，但在处理 URL 请求时它没有调用其委托方法。我在这里被打了好几个小时。

一切似乎都是正确的，我发送 urlRequest 的方式与以前发送的方式相同。但我不知道为什么它不起作用。随意评论，但请帮助我。我真的很担心

**编辑 ：**

我需要向服务器发布请求并获得响应。如果我尝试同步它工作正常，但它阻塞了主线程。这就是我选择异步的原因。通过委托方法，我试图获取响应数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:00:47.443

我认为您对系统的描述与发布的代码不符，它解释了您描述的问题。SendRequest 类应该依赖于 Server 类来执行服务器请求。

看起来 SendRequest 类将连接委托设置为 self。我猜所有这些委托方法都是在 Server 类上实现的。

尝试按照您的描述进行操作......

```
// SendRequest.m

- (void)executeRequest:(NSMutableURLRequest)urlRequest
{
    // however you get ahold of your server...
    Server *myServer = [Server sharedInstance];

    // let it do the work.  it has the delegate methods
    [myServer executeAsync:urlRequest];
} 
```

或者，SendRequest 代码可以保持原样，但将委托设置为 Server 类的实例（再次假设这是实现委托方法的地方）。我认为第二个想法更糟糕，因为服务器已经知道如何启动请求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-26T05:31:26.283

将**NSURLConnectionDelegate**设置为您的 .h

然后在 .m 函数中运行以下代码

```
NSURLConnection *connection = [[NSURLConnection alloc] 
                                initWithRequest:request
                                       delegate:self startImmediately:NO];

[connection scheduleInRunLoop:[NSRunLoop mainRunLoop] 
                      forMode:NSDefaultRunLoopMode];
[connection start]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T07:14:10.503

我终于解决了。希望这会对某人有所帮助。我清理了代码并正确声明了方法，最后在为类创建对象时，我必须使用 initwithDelegate:self 。最后调用 NSURLConnection 委托方法。

# php - 将画布保存为服务器上的图像时出现 setRequestHeader 错误

> ID：10451139
> 
> 赞同：1
> 
> 时间：2012-05-04T14:49:13.213
> 
> 标签：php, javascript, svg, html5-canvas, highcharts

我有一个 highcharts svg，我已通过 canvg 将其转换为 png 并显示在网页上。然后我想将此 png 发送到服务器以创建指向图像的链接。我正在关注另一个主题的答案代码：

[重命名从 HTML5 画布创建的图像](https://stackoverflow.com/questions/7460396/renaming-an-image-created-from-an-html5-canvas)

我的javascript代码如下：

```
var timeout = window.setTimeout(function() {
    canvg(document.getElementById('canvas'), chart.getSVG());
}, 10000);

var canvas = document.getElementById("canvas");

var img = canvas.toDataURL("images/png");
document.write('<img src="'+img+'"/>');

saveDataURL(img)

function saveDataURL(canvas) {
    var request = new XMLHttpRequest();
    request.onreadystatechange = function () {
        if (request.readyState === 4 && request.status === 200) {
            window.location.href = request.responseText;
        }
    };
    request.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    request.open("POST", "saveDataURL.php", true);
    request.send("dataURL=" + canvas.toDataURL());
} 
```

我的名为 saveDataURL.php 的 php 是：

```
$dataURL = $_POST["dataURL"];
$encodedData = explode(',', $dataURL)[1];
$decodedData = base64_decode($encodedData);
file_put_contents("temp/faizan.png", $decodedData);
echo "http://whichchart.com/temp/faizan.png"; 
```

在 Firefox 12 中，“request.setRequestHeader”行会抛出以下错误：

> 组件返回失败代码：0x804b000f (NS_ERROR_IN_PROGRESS) [nsIXMLHttpRequest.setRequestHeader] [http://whichchart.com/oil.js](http://whichchart.com/oil.js) 第 102 行

在 chrome 中，同一行的错误是：

> 未捕获的错误：INVALID_STATE_ERR：DOM 异常 11 saveDataURLoil.js:106（匿名函数）

该示例可以在此处查看：whichchart.com。你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:20:00.007

好的，经过多次搜索，我找到了不同的解决方案。链接在这里：

[http://permadi.com/blog/2010/10/html5-saving-canvas-image-data-using-php-and-ajax/](http://permadi.com/blog/2010/10/html5-saving-canvas-image-data-using-php-and-ajax/)

假设你有一个名为 testCanvas 的画布，这个 javascript 和 php 将起作用：

```
var canvasData = testCanvas.toDataURL("image/png");
var ajax = new XMLHttpRequest();
ajax.open("POST",'testSave.php',false);
ajax.setRequestHeader('Content-Type', 'application/upload');
ajax.send(canvasData );  

<?php
if (isset($GLOBALS["HTTP_RAW_POST_DATA"]))
{
    // Get the data
    $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];

    // Remove the headers (data:,) part. 
    // A real application should use them according to needs such as to check image type
    $filteredData=substr($imageData, strpos($imageData, ",")+1);

    // Need to decode before saving since the data we received is already base64 encoded
    $unencodedData=base64_decode($filteredData);

    //echo "unencodedData".$unencodedData;

    // Save file.  This example uses a hard coded filename for testing,
    // but a real application can specify filename in POST variable
    $fp = fopen( 'test.png', 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp );
}
?> 
```

# ios5 - 故事板、Segues 和不同方向的不同视图

> ID：10451140
> 
> 赞同：1
> 
> 时间：2012-05-04T14:49:15.693
> 
> 标签：ios5, uinavigationcontroller, storyboard, uiinterfaceorientation, segue

我一直在开发 iOS5，并且一直在为故事板、segues 和针对不同方向调整视图而苦苦挣扎。在过去几天经历了一些苹果的帮助之后；我还没有找到答案的地方，我得出了以下结论，我会非常仔细地表达出来，希望有人能告诉我我是否正确：

1-使用故事板并不意味着您必须使用segues（是的，这对初学者来说很困惑）。

2-您只能在属于导航控制器的 VC 之间使用 segue。

3- 另一方面，拥有导航控制器并不一定意味着您必须使用从一个 VC 到另一个 VC 的 segue（是的！）。因此，如果您尝试从一个 VC 转到另一个 VC（无论第一个 VC 是否属于 Nav Controller），您可以执行以下操作：

假设您有一个 WhiteVC 类和一个 YellowVC 类，并且您在 WhiteVC 视图上放置了一个按钮（在故事板中并将通用 VC 的类更改为 WhiteVC）并将其链接到 WhiteVC 类中的 IBAction。这将是您将在 WhiteVC.m 中实现的代码，以便能够单击该按钮并显示 YellowVC 视图：

```
-(IBAction)GoToYellow 
{
  YellowViewController *YellowVC=[self.storyboard instantiateViewControllerWithIdentifier:@"myYellowVC"];                                             
  [self presentViewController:YellowVC animated:YES completion:nil];
} 
```

要从 YellowVC 返回到 WhiteVC，您将在 YellowVC 视图上创建另一个按钮（遵循与上述相同的过程）并使用以下代码：

```
-(IBAction)ReturnToWhiteVC 
{
  [self dismissViewControllerAnimated:YES completion:nil];
} 
```

这将解散 YellowVC 并返回给 White VC。

4- 不建议让一个 VC 拥有（实例化）多个视图 - 例如，对于不同的方向 - 最好为每个视图有一个单独的 VC。不过，让 VC 将其他 VC 实例化为 MVC 的一部分是可以的。

5- 现在所有这些都是因为我正在构建一个具有导航控制器的应用程序，但它的根 VC 会有所不同（不同的 VC 具有不同的视图），具体取决于它是横向还是纵向。所以我可以以编程方式实例化 VC（如上面的#3），效果很好。或者，如果我想使用 segues 进行转换，Apple 帮助文档提供了以下代码：

```
BOOL isShowingLandscapeView;
- (void)awakeFromNib
{    
  isShowingLandscapeView = NO;

  [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
  [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(orientationChanged:)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:nil];
}

- (void)orientationChanged:(NSNotification *)notification
{ 
  UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
  if (UIDeviceOrientationIsLandscape(deviceOrientation) && !isShowingLandscapeView)
  {
    [self performSegueWithIdentifier:@"AlternateView" sender:self];  
    isShowingLandscapeView = YES;
  }

  else if (UIDeviceOrientationIsPortrait(deviceOrientation) && isShowingLandscapeView)
  {
    [self dismissViewControllerAnimated:YES completion:nil];// breakpoint shows that this is triggered
    isShowingLandscapeView = NO;
  }
 } 
```

上面的代码显然只适用于导航控制器（因为 segues），当方向从纵向变为横向时它起作用，但是当我旋转回纵向时，我最终将横向 VC 旋转回纵向。我在这里做错了什么？

我希望有人可以验证/确认这些观点并回答我的问题。谢谢知识库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:13:45.017

首先：segue 不仅仅适用于 a `UINavigationController`， any`UIViewController`都可以执行 segue。

Apple 文档还说，您必须限制每个`UIViewController`用于处理方向的支持的方向，即您必须将纵向限制为仅纵向，将横向限制为仅横向）。这可以按照文档完成：

*   对于 iOS 6 及更高版本：覆盖[supportedInterfaceOrientation](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)

*   对于 iOS 5 及更早版本：覆盖[shouldAutoRotateToInterfaceOrientation](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation%3a)

然后，为了使用 Apple 设计来管理方向，您可以关注[Alex Moffat 的这篇博文](http://vastdevblog.vast.com/blog/2012/02/12/rotating-to-show-different-ios-views/)。

它基本上描述了如何使用嵌入在导航控制器中的两个显示相同内容（一个用于横向，一个用于纵向）的视图控制器来设计视图层次结构。两个视图控制器都应该能够推动能够自动旋转的第三视图控制器。

主要思想是在导航堆栈上/从导航堆栈上推送/弹出景观视图，并相应地使用第三个视图处理转换。

您应该能够使其代码适应您自己的视图层次结构。

# c++ - 一个非常长的数的模数 (fmod)

> ID：10451143
> 
> 赞同：1
> 
> 时间：2012-05-04T14:49:32.917
> 
> 标签：c++, range

我想使用 Cpp 在阶乘中找到零的数量。问题是当我使用非常大的数字时。

```
#include <stdio.h>
#include <math.h>

long zeroesInFact(long n)
{
long double fact=1;
long double denominator=10.00;
long double zero=0.0000;
long z=0;
printf("Strating loop with n %ld\n",n);
for(int i=2;i<=n;i++)
{
    fact=fact*i;
    printf("Looping with fact %LF\n",fact);
}
printf("Fmod %lf %d\n",fmod(fact,denominator),(fmod(fact,denominator)==zero));
while(fmod(fact,denominator)==zero)
{
    fact=fact/10;
    z++;
}
printf("Number of zeroes is %ld\n",z);
return z;
}

int main()
{
long n;
long x;
scanf("%ld",&n);
for(int i=0;i<n;i++)
{
    scanf("%ld",&x);
    printf("Calling func\n");
    zeroesInFact(x);
}
return 0;
} 
```

我认为这里的问题是

fmod(fact,denominator) 为我提供了 22 阶乘和分母为 10.00（即 0.000）的正确答案。但它给了我 23 阶乘和分母 10.00 的错误答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:05:01.037

考虑这是您在数值精度方面的第一课。类型`float`、`double`和`long double`存储近似值，而不是精确值，这意味着它们通常不适合这种计算。即使它们对正确答案有足够的精度，通常最好还是使用整数类型来代替，比如`int64_t`and `uint64_t`。有时您甚至可以使用 128 位整数类型。（例如`__int128`，Microsoft Visual Studio 可能提供）

老实说，我认为你很幸运能得到`18!`through的正确答案`22!`。

如果你的平台上真的是四倍精度，我认为`long double`你应该能够计算到。`30!`你在使用时犯了一个错误`fmod`——你打算使用`fmodl`.

* * *

您在精确度方面的第二个教训是，当您需要大量精确数据时，您的基本数据类型根本不够好。虽然您可以编写自己的数据类型，但最好使用预先存在的解决方案。[Gnu Multiple Precision](http://gmplib.org/) Arithmetic Library (GMP) 是一个很好且快速的库，您可以在 C/C++ 中使用。

或者，您可以切换语言——例如`python`，整数数据类型是任意精度的（但不如 GMP 快），因此您甚至不必做任何特别的事情。Java 具有`BigInteger`进行此类计算的类。

* * *

你的第三个教训是精确是找到不做的方法。您实际上不需要完全计算`23!`以找到尾随零的数量。小心地，您可以组织计算以丢弃不需要的额外精度。或者，您可以切换到获取此数字的完全不同的方法，例如 Rob 在他的评论中暗示的方法。

# spring - 将 WAR 部署到 Fuse ESB get 'FileNotFoundException: URL [bundle://248.0:1/com/bookstore/app/]'

> ID：10451144
> 
> 赞同：2
> 
> 时间：2012-05-04T14:49:34.803
> 
> 标签：spring, osgi, apache-servicemix

任何帮助将不胜感激...

Maven Spring Roo 项目，JPA2 结合 CXF 原型的简单 Web 服务应用程序。

在作为 WAR 部署到 Fuse (Servicemix 4.4.1) 后（Fuse 将其转换为捆绑包），激活 (osgi:start nnn) 时出现以下错误..

**java.io.FileNotFoundException：URL [bundle://248.0:1/com/bookstore/app/] 无法解析为绝对文件路径，因为它不驻留在文件系统中：bundle://248.0:1/com/书店/应用/**

似乎是 Springs 组件扫描开始时..

**app-context.xml**包含

`<context:component-scan base-package="com.bookstore.app" />`

为扩展的堆栈跟踪道歉，但认为它可能有用......

```
21:28:07,365 | INFO  | l Console Thread | XmlBeanDefinitionReader          | 248 - mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war - 0.0.0 | Loading XML bean definitions from class path resource [META-INF/spring/app-context.xml]
21:28:07,457 | WARN  | l Console Thread | hMatchingResourcePatternResolver | 248 - mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war - 0.0.0 | Cannot search for matching files underneath URL [bundle://248.0:1/com/bookstore/app/] because it does not correspond to a directory in the file system
java.io.FileNotFoundException: URL [bundle://248.0:1/com/bookstore/app/] cannot be resolved to absolute file path because it does not reside in the file system: bundle://248.0:1/com/bookstore/app/
    at org.springframework.util.ResourceUtils.getFile(ResourceUtils.java:204)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:52)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.core.io.UrlResource.getFile(UrlResource.java:168)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.core.io.support.PathMatchingResourcePatternResolver.doFindPathMatchingFileResources(PathMatchingResourcePatternResolver.java:528)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.web.context.support.ServletContextResourcePatternResolver.doFindPathMatchingFileResources(ServletContextResourcePatternResolver.java:92)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.core.io.support.PathMatchingResourcePatternResolver.findPathMatchingResources(PathMatchingResourcePatternResolver.java:349)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.core.io.support.PathMatchingResourcePatternResolver.getResources(PathMatchingResourcePatternResolver.java:267)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.context.support.AbstractApplicationContext.getResources(AbstractApplicationContext.java:1227)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:204)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:204)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:84)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:73)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1335)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1325)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:186)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:147)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:132)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)[248:mvn_com.bookstore_bookstore-ws_1.0-SNAPSHOT_war:0]
    at org.ops4j.pax.web.service.jetty.internal.HttpServiceContext$1.call(HttpServiceContext.java:168)[160:org.ops4j.pax.web.pax-web-jetty:1.0.3]
    at org.ops4j.pax.web.service.jetty.internal.HttpServiceContext$1.call(HttpServiceContext.java:164)[160:org.ops4j.pax.web.pax-web-jetty:1.0.3]
    at org.ops4j.pax.swissbox.core.ContextClassLoaderUtils.doWithClassLoader(ContextClassLoaderUtils.java:60)[160:org.ops4j.pax.web.pax-web-jetty:1.0.3]
    at org.ops4j.pax.web.service.jetty.internal.HttpServiceContext.addEventListener(HttpServiceContext.java:161)[160:org.ops4j.pax.web.pax-web-jetty:1.0.3]
    at org.ops4j.pax.web.service.jetty.internal.JettyServerImpl.addEventListener(JettyServerImpl.java:235)[160:org.ops4j.pax.web.pax-web-jetty:1.0.3]
    at org.ops4j.pax.web.service.jetty.internal.ServerControllerImpl$Started.addEventListener(ServerControllerImpl.java:276)[160:org.ops4j.pax.web.pax-web-jetty:1.0.3]
    at org.ops4j.pax.web.service.jetty.internal.ServerControllerImpl.addEventListener(ServerControllerImpl.java:127)[160:org.ops4j.pax.web.pax-web-jetty:1.0.3]
    at org.ops4j.pax.web.service.internal.HttpServiceStarted.registerEventListener(HttpServiceStarted.java:286)[158:org.ops4j.pax.web.pax-web-runtime:1.0.3]
    at org.ops4j.pax.web.service.internal.HttpServiceProxy.registerEventListener(HttpServiceProxy.java:133)[158:org.ops4j.pax.web.pax-web-runtime:1.0.3]
    at org.ops4j.pax.web.extender.war.internal.RegisterWebAppVisitorWC.visit(RegisterWebAppVisitorWC.java:276)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.web.extender.war.internal.model.WebApp.accept(WebApp.java:561)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.register(WebAppPublisher.java:170)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.serviceChanged(WebAppPublisher.java:155)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.serviceChanged(WebAppPublisher.java:119)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.setService(ReplaceableService.java:114)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.access$100(ReplaceableService.java:28)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService$CollectionListener.serviceAdded(ReplaceableService.java:183)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.tracker.ServiceCollection$Tracker.addingService(ServiceCollection.java:181)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:896)[karaf.jar:2.2.2-fuse-04-06]
    at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:261)[karaf.jar:2.2.2-fuse-04-06]
    at org.osgi.util.tracker.AbstractTracked.trackInitial(AbstractTracked.java:184)[karaf.jar:2.2.2-fuse-04-06]
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:339)[karaf.jar:2.2.2-fuse-04-06]
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:273)[karaf.jar:2.2.2-fuse-04-06]
    at org.ops4j.pax.swissbox.tracker.ServiceCollection.onStart(ServiceCollection.java:139)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle$Stopped.start(AbstractLifecycle.java:121)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle.start(AbstractLifecycle.java:49)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.onStart(ReplaceableService.java:146)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle$Stopped.start(AbstractLifecycle.java:121)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle.start(AbstractLifecycle.java:49)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher.publish(WebAppPublisher.java:81)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.web.extender.war.internal.WebXmlObserver.doPublish(WebXmlObserver.java:304)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.web.extender.war.internal.WebXmlObserver.addingEntries(WebXmlObserver.java:153)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.extender.BundleWatcher.register(BundleWatcher.java:186)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.extender.BundleWatcher.access$000(BundleWatcher.java:45)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.ops4j.pax.swissbox.extender.BundleWatcher$1.bundleChanged(BundleWatcher.java:127)[163:org.ops4j.pax.web.pax-web-extender-war:1.0.3]
    at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:795)[org.apache.felix.framework-3.0.9-fuse-05-06.jar:]
    at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:717)[org.apache.felix.framework-3.0.9-fuse-05-06.jar:]
    at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:597)[org.apache.felix.framework-3.0.9-fuse-05-06.jar:]
    at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:3781)[org.apache.felix.framework-3.0.9-fuse-05-06.jar:]
    at org.apache.felix.framework.Felix.startBundle(Felix.java:1792)[org.apache.felix.framework-3.0.9-fuse-05-06.jar:]
    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:927)[org.apache.felix.framework-3.0.9-fuse-05-06.jar:]
    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:914)[org.apache.felix.framework-3.0.9-fuse-05-06.jar:]
    at org.apache.karaf.shell.osgi.StartBundle.doExecute(StartBundle.java:29)[19:org.apache.karaf.shell.osgi:2.2.2.fuse-04-06]
    at org.apache.karaf.shell.osgi.BundlesCommand.doExecute(BundlesCommand.java:37)[19:org.apache.karaf.shell.osgi:2.2.2.fuse-04-06]
    at org.apache.karaf.shell.console.OsgiCommandSupport.execute(OsgiCommandSupport.java:38)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:78)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:474)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:400)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at org.apache.karaf.shell.console.jline.Console.run(Console.java:240)[36:org.apache.karaf.shell.console:2.2.2.fuse-04-06]
    at java.lang.Thread.run(Thread.java:680)[:1.6.0_29] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:16:36.857

远射 - 但看起来一些 Spring 正在尝试扫描包缓存，但对包的原始位置感到困惑。

在您的 Fuse 配置中，尝试从 Felix 切换到 Equinox，在 Karaf 中它位于`etc/config.properties`并且属性是`karaf.framework`- 在 Fuse ESB 中应该几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T12:21:31.727

看看这个页面，

[https://ops4j1.jira.com/wiki/display/ops4j/Pax+Web+Extender+-+War+-+Examples](https://ops4j1.jira.com/wiki/display/ops4j/Pax+Web+Extender+-+War+-+Examples)

`<context:component-scan base-package="*" />`OSGI 环境目前不支持。确保`<context:annotation-config />`在应用程序上下文中使用并将所有组件定义为 bean。

# sql-server - 包含有关存储过程参数信息的 SQL Server 系统表是什么？

> ID：10451146
> 
> 赞同：10
> 
> 时间：2012-05-04T14:49:39.187
> 
> 标签：sql-server, stored-procedures

什么是 SQL Server 系统表，其中包含有关存储过程参数的信息以及数据类型、名称、长度、是否为空等信息？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-04T14:51:44.383

您可以查询 sys.procedures 和 sys.parameters...

```
select pr.name, p.*
from sys.procedures pr 
inner join sys.parameters p on pr.object_id = p.object_id 
```

并加入类型太...

```
select pr.name, p.*, t.name, t.max_length
from sys.procedures pr 
inner join sys.parameters p on pr.object_id = p.object_id
inner join sys.types t on p.system_type_id = t.system_type_id 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T14:53:40.060

你也可以使用

```
select * from INFORMATION_SCHEMA.PARAMETERS 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T15:36:18.300

你也可以使用

```
select * from INFORMATION_SCHEMA.ROUTINES \G; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-17T19:33:06.373

```
SELECT 
    p.name AS [SP Name], qs.execution_count,
    ISNULL(qs.execution_count/DATEDIFF(Second, qs.cached_time, GETDATE()), 0) AS [Calls/Second],
    qs.total_worker_time/qs.execution_count AS [AvgWorkerTime], qs.total_worker_time AS [TotalWorkerTime],  
    qs.total_elapsed_time, qs.total_elapsed_time/qs.execution_count AS [avg_elapsed_time],
    qs.cached_time,
    isr.ROUTINE_DEFINITION
FROM sys.procedures AS p
INNER JOIN sys.dm_exec_procedure_stats AS qs
ON p.[object_id] = qs.[object_id]
Inner Join INFORMATION_SCHEMA.ROUTINES as ISR
on p.name = isr.SPECIFIC_NAME
WHERE qs.database_id = DB_ID()
    and
    isr.ROUTINE_DEFINITION like '%XXXX%'  -- name of something you are looking for in the stored procedure

ORDER BY qs.execution_count DESC OPTION (RECOMPILE); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-12T20:16:11.393

对于那些使用 SQL 2000

```
SELECT * FROM [dbName]..sysobjects  WHERE xtype = 'P' 
```

和

```
SELECT * FROM [dbName]..sysComments 
```

通过 id 加入他们

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-25T17:10:39.643

这显示了有关存储过程和用户​​定义函数的信息。它将包括不带参数的过程/标量函数，但如果可用，将包括参数信息。

```
SELECT 
O.Name ProcedureName, 
P.parameter_id Position,
P.Name ParameterName, 
P.max_length MaxLen, 
P.is_output IsOutput, 
P.has_default_value HasDefaultValue, 
P.default_value DefaultValue, 
P.is_nullable IsNullable, 
T.name TypeName, 
T.max_length TypeMaxLen,
O.type_desc TypeDescription
FROM SYS.OBJECTS O
LEFT JOIN SYS.PARAMETERS P ON O.object_id = P.object_id
LEFT JOIN SYS.TYPES T ON P.system_type_id = T.system_type_id
WHERE type_desc LIKE 'SQL_%'
ORDER BY O.Name, P.parameter_id, P.Name 
```

# javascript - node.js 查询和理解清晰

> ID：10451150
> 
> 赞同：-1
> 
> 时间：2012-05-04T14:49:45.960
> 
> 标签：javascript

> **可能重复：**
> [了解 node.js 的某些方面](https://stackoverflow.com/questions/10449347/understanding-some-aspects-of-node-js)

node.js 如何与 HTML 交互？

看到这个元素，让我知道 PHO 是如何为某些事情工作的，因为希望清楚地使它尽可能简单。

请帮助我在上下文中理解相同的内容以及所谈论的内容。

这让我无法获得相同的内容

```
 <div id="content"></div> In PHP you could do something like this: <div id="content"><?php echo $content; ?></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:52:59.963

如果您想用它构建网站，请查看[http://expressjs.com/](http://expressjs.com/)之类的 node.js Web 框架。

# model-view-controller - 创建 DAO 时，后端连接应该在什么时候发生？

> ID：10451156
> 
> 赞同：2
> 
> 时间：2012-05-04T14:50:07.613
> 
> 标签：model-view-controller, dao

我和一个队友一起思考了一些 DAO 设计的东西，遇到了一个有趣的问题，我还没有找到任何最佳实践指南。

创建DAO对象时，DB连接应该在什么时候发生？我们已经讨论过实例化一个在构造函数中创建数据库连接的对象（然后在后续方法中使用它），并创建一个静态类来建立连接并在每次方法调用后将其拆除。

两者都基于环境具有明显的性能影响 - 静态对象对于一些间歇性调用很有用，而实例化一个保持连接的对象对于少数用户在短时间内的大量调用来说非常有用。

还有另一种方法可以做到这一点吗？也许在大多数情况下对性能会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:09:16.983

> [由于您已将其标记为***mvc***，我将假设您的 DAO 已经存在于模型层中。据[我了解](https://stackoverflow.com/a/5864000/727208)。DAO 负责与*Data Mappers*相同的任务，并将来自存储（可能是也可能不是 SQL 数据库）的信息提供给*模型层*中的*域对象*。]

 *处理此问题的最佳方法是使用工厂，它在模型层中创建数据访问对象。这将有几个优点：

*   与不同 DAO 的类名解耦
*   知道第一个 DAO 何时初始化的能力
*   在所有 DAO 实例之间共享单个数据库连接

这就是我将如何实现类似的东西：

```
class DaoFactory
{
    protected $connection = null;
    protected $provider = null;

    public function __construct( $provider )
    {
        $this->provider = $provider;
    }

    public function create( $name )
    {
        if ( $connection === null )
        {
            $connection = call_user_func( $this->provider );
        }
        $instance = new $name;
        $instance->setConnection( $connection );
        return $instance
    }
} 
```

用法看起来像这样：

```
$connectionProvider = function()
{ 
    $instance = new \PDO('mysql:host=localhost;dbname=testdb;charset=utf8', 
                         'username', 'password');
    $instance->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION);
    $instance->setAttribute(\PDO::ATTR_EMULATE_PREPARES, false);
    return $instance;
};

$daoFactory = new DaoFactory( $connectionProvider ); 
```

然后将`$daoFactory`变量传递给创建 DAO 所需的任何对象。这样，如果需要，您可以轻松地用完全不同的东西替换工厂（只要它实现相同的`create()`方法足迹）。您的领域业务逻辑绝不会受到这种变化的影响。

使用这个工厂的对象完全不知道甚至存在数据库连接，DAO 需要它来运行。当您甚至不需要建立与数据库的连接时，您甚至可能会遇到一些情况。

> ^(**Rant**
> 由于您的代码库中有数据访问对象，这表明您正在尝试使用 OOP。或者至少是类似的东西。但是静态类/函数/变量不是 OOP 范式的一部分。如果你有一个只包含静态方法和少量静态变量的类，那么你实际上所做的只是带有全局变量的简单 php 函数，包装在一个命名空间中，它恰好看起来像类。)
> 
> ^(PHP 社区倾向于将此 COP（面向类的编程）称为笑话，但本质上它是过程代码。)*

# actionscript-3 - 相关文本字段

> ID：10451157
> 
> 赞同：0
> 
> 时间：2012-05-04T14:50:13.950
> 
> 标签：actionscript-3, flash, textfield

我想要有相互依赖的文本字段。例如，有两个输入文本字段，如角频率（ω）和普通频率（f），ω=2πf。如果我改变一个，另一个就会改变。我怎样才能做到这一点？第二件事，如何检查文本字段是否为空？

```
if (field.text=="")... // doesn't work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:05:21.440

有两种方法可以做到这一点。您可以在每一帧调用某种更新函数，检查每个字段的当前值与它们过去的值，并查看是否有变化然后对此做出反应。

```
private var tf1 : TextField = new TextField();
private var tf2 : TextField = new TextField();
private var tf1LastVal : String = "";
private var tf2LastVal : String = "";

public function update() : void
{
    if(tf1.text != tf1LastVal)
    {
        tf2.text = //put your logic here
        tf1LastVal = tf1.text;
    }
    else if(tf2.text != tf2LastVal)
    {
        tf1.text = //put your logic here
        tf2LastVal = tf2.text;
    }
} 
```

另一种更好的方法（在我看来）是向您的 TextFields 添加事件侦听器

```
//add this where you construct your TextFields
tf1.addEventListener(Event.CHANGE, onTf1Change);
tf2.addEventListener(Event.CHANGE, onTf2Change);
//end

private function onTf1Change(e : Event) : void
{
    tf2.text = //your logic here;
}

private function onTf2Change(e : Event) : void
{
    tf1.text = //your logic here;
} 
```

# c# - 通过 XAML 编辑 WPF UserControl 组件

> ID：10451160
> 
> 赞同：0
> 
> 时间：2012-05-04T14:50:31.993
> 
> 标签：c#, .net, wpf

我有以下代码：XAML：

```
<UserControl x:Class="RBSoft.WPF.RedConsoleViewer"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="355" d:DesignWidth="691" Name="ConsoleUI_Control" KeyDown="ConsoleUI_Control_KeyDown">
    <Grid Name="_Layout">
        <Rectangle Name="BackgroundLayout">
            <!--...-->
        </Rectangle>
    </Grid>
</UserControl> 
```

代码：

```
public Rectangle IBackground
{
    get { return this.BackgroundLayout; }
    set { this.BackgroundLayout = value; }
} 
```

我要做的是从 XAML 编辑器中编辑矩形（BackgroundLayout），如下所示：

```
<Window x:Class="LifeEnvironment.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="1064" Width="910"
        xmlns:my="clr-namespace:RBSoft.WPF;assembly=RBSoft.WPF"
        WindowStyle="None"
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <my:userControlTest>
            <my:userControlTest.IBackground>
                <Background ...>
            </my:userControlTest.IBackground>
        </my:userControlTest>
    </Grid>
</Window> 
```

但是我无法访问这个，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:03:26.207

正确的做法是用用户控件包裹矩形，如下所示：

```
<UserControl x:Class="RBSoft.WPF.RedConsoleViewer" ...>
    <Grid Name="_Layout">
        <UserControl Name="BackgroundLayout">
            <Rectangle .../>
        </UserControl>
    </Grid>
</UserControl> 
```

然后，更改`Content`属性而不是对象本身，这样就不会丢失引用（`BackgroundLayout`）：

```
public Rectangle IBackground
{
    get { return (Rectangle)this.BackgroundLayout.Content; }
    set { this.BackgroundLayout.Content = value; }
} 
```

最后，它将起作用：

```
<my:userControlTest>
    <my:userControlTest.IBackground>
        <Background ...>
    </my:userControlTest.IBackground>
</my:userControlTest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:21:37.400

*   为了能够访问 XAML 中的控件属性，您需要将其设置为依赖属性。

*   我认为（至少从我所见）一种更常见的方法来做你想做的事情是使用控制内部矩形背景的“通用”样式。

    **编辑**

    ```
    public static readonly DependencyProperty IBackgroundProperty = DependencyProperty.Register("IBackground", typeof(Rectangle), typeof(NameOfYourUserControl));
    public Rectangle IBackground
    {
        get { return (Rectangle)GetValue(IBackgroundProperty); }
        set { SetValue(IBackgroundProperty, value); }
    } 
    ```

更改为依赖属性将使您的 XAML 编译，但是，您仍然必须在用户控件中处理它。

此外，当您使用它时，您正在尝试将背景设置为矩形类型的属性！那显然行不通。您必须实例化您的属性是什么 - 一个矩形：

```
<my:userControlTest>
        <my:userControlTest.IBackground>
            <Rectangle  Fill="Orange"/>
        </my:userControlTest.IBackground>
    </my:userControlTest> 
```

# android - 如何始终从 Android 上的启动活动开始？

> ID：10451171
> 
> 赞同：15
> 
> 时间：2012-05-04T14:51:22.023
> 
> 标签：android

有三种不同的情况：

1）用户启动一个应用程序，在其中导航，按下主页并再次单击应用程序图标以再次启动我们的应用程序。

2）用户启动一个应用程序，在其中导航，按主页，选择最近并单击该应用程序以再次启动我们的应用程序。

3）用户启动一个应用程序，在其中导航，单击应用程序中的某些内容（带有链接的 TextView），这会调用另一个应用程序（例如电子邮件），然后用户单击返回按钮，这会将我们带回到我们的应用程序。

我知道标志“clearTaskOnLaunch”标志，它解决了案例#1。

我知道标志“excludeFromRecents”，它解决了案例＃2（可能不是最用户友好的解决方案，但它有效）。

案例#3呢？我现在有一个解决方法。但是，我必须把它放在所有可以引导到另一个应用程序的活动上。我想知道是否有更好的方法来解决它（而不在所有此类活动中处理它）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T20:27:24.190

这应该在应用程序级别处理。

对于 API 级别 14，您可以在 Application 类中注册 ActivityLifeCycleCallback

```
public void registerActivityLifecycleCallbacks (Application.ActivityLifecycleCallbacks callback) 
```

您可以使用它来了解在应用程序级别上，哪些活动被销毁、暂停、恢复等。**每当一个活动暂停，而没有创建/恢复新活动时，您应该清除活动堆栈，然后重新启动你的开始活动**

如果您的目标 SDK 版本 < 14，您应该实现自己的方法，以了解创建/恢复和暂停哪些活动，并且在暂停活动时执行相同操作，而无需创建/恢复新活动

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T17:39:48.083

似乎已经提出了类似的问题。听起来 OP 想出了一个可行的解决方案。[如何折叠“子活动”？](https://stackoverflow.com/questions/9894522/how-do-i-collapse-child-activities)

编辑：您可以使用布尔值来判断是否需要折叠回主要活动，而不是使用按钮。让您的根活动从 Activity 扩展，而子活动从 CollapsableActivity 扩展。为了让它在所有情况下都能正常工作，我添加了 startOutsideActivity() 和 startOutsideActivityForResult()。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class CollapsableActivity extends Activity {
    private boolean returnToRoot;
    public static final int COLLAPSE_BACK = -1; // something other than RESULT_CANEL (0)

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        returnToRoot = true;
    }

    @Override
    protected void onStart() {
        super.onStart();
        returnToRoot = true;
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        // start collapsing the stack
        if (returnToRoot) {
            setResult(COLLAPSE_BACK);

            finish();
        }
    }

    @Override
    public void startActivityForResult(Intent intent, int requestCode) {
        super.startActivityForResult(intent, requestCode);
        returnToRoot = false;
    }

    public void startOutsideActivityForResult(Intent intent, int requestCode) {
        super.startActivityForResult(intent, requestCode);
        returnToRoot = true;
    }

    @Override
    public void startActivity(Intent intent) {
        // call startActivityForResult to make sure and catch the collapse condition
        super.startActivityForResult(intent, 0);   
        returnToRoot = false;
    }

    public void startOutsideActivity(Intent intent) {
        super.startActivity(intent);    
        returnToRoot = true;
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (resultCode == COLLAPSE_BACK) {
            returnToRoot = true;
        }
   }
} 
```

在您列出的所有情况下，这对我都很有效。唯一的区别是当您离开您的应用程序时，您需要调用 startOutsideActivity() 或 startOutsideActivityForResult()。就个人而言，我认为这可以使您的意图更加清晰。希望能帮助到你！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-08T06:04:38.727

1）在一个类中定义一个`public static normalPause = true`变量。

2）在`onPause`您所有活动的方法中将其设置为**false**（我很担心。我们可能不会处于正常暂停状态）

2）在`onCreate`您所有活动的方法中将其设置为**true**（别担心。我们处于正常暂停状态）

3) 在`onResume`您的所有活动中：

```
if(!Utilities.normalPause)
{
    this.finish()
} 
```

享受！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T18:10:46.663

我知道您不想在所有活动中管理它，但您可以这样做，并且**仍然可以在一个**具有超级活动的地方处理代码

```
public abstract class BlundellActivity extends Activity {
     @Override
     public void onPause(){
         // Whatever strategy you want
     }
}

public class SomeActivity extends BlundellActivity {
     // Do whatever you normally want to do
}

public class SomeActivity extends BlundellActivity {
     // Do whatever you normally want to do here as well
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T07:18:20.053

也许，[`android:noHistory`](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)这就是你要找的。如果您声明除此`StartupActivity`属性之外的所有活动，那么它们将在用户导航离开它们时完成并且只会`StartupActivity`出现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T09:54:53.600

您可以尝试以下步骤：

1.  在**StartupActivity**中使用一个具有默认 false 值的`boolean`静态标志。`isFinish`
***   在**StartupActivity的****onCreate()**中将**isFinish**值设置为**false**。*******   在项目中所有活动的**onResume()**方法中编写以下代码。

    > ```
    > if(isFinish)
    > {
    >    finish();
    > } 
    > ```

    *   当您打开任何本机应用程序（如电子邮件、浏览器等）时，将**isFinish**值设置为**true 。********** 

 ****或者

5\. 每当您想在后按时关闭应用程序时，在 onBackPress() 方法中将**isFinish**值设置为**true 。**

案例 6：如果 Android 浏览器在点击任何链接时打开，则使用下面的代码是 onPause() 方法

```
if(isBrowserRunning("com.android.browser"))
{
   isFinish = true;
    finish();
} 
```

///////////////

```
 private boolean isBrowserRunning(String processName)
        {
            ActivityManager manager = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
            String packageName = manager.getRunningTasks(1).get(0).topActivity.getPackageName();
            Log.i("LogTest", "Current process package name: " + packageName);

            return processName.equalsIgnoreCase(packageName); 
        } 
```

您可以创建一个示例项目来了解其他浏览器包名称，如opera mini、美国浏览器等。

在清单中添加以下权限：

```
<uses-permission 
        android:name="android.permission.GET_TASKS" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T13:59:56.320

您可以使用一个解决所有问题的解决方案，而不是使用多种解决方案。

检查这个答案：

[https://stackoverflow.com/a/8576529/327011](https://stackoverflow.com/a/8576529/327011)

在应用程序的每个活动中使用广播和广播接收器，您可以在应用程序进入后台时终止所有活动。

**更新**：

要检测您的应用程序何时进入后台，您可以使用 onStop，请检查此以了解理论：[Activity side-by-side 生命周期](https://stackoverflow.com/questions/10094131/activity-side-by-side-lifecycle)

这是实现：[https ://stackoverflow.com/a/5862048/327011](https://stackoverflow.com/a/5862048/327011)

我想这就是你所需要的:-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-10T15:03:35.850

您需要使用 bundle 并从调用应用程序传递适当的参数/或参数（即单击应用程序中的某些内容（带有链接的 TextView））。

在被调用的应用程序（电子邮件应用程序）中检索参数。

您可以在参数中发送活动的名称。

现在在电子邮件应用程序（被调用的应用程序）中单击后退按钮导航回您的调用应用程序。

或者，您可以根据需要保存调用程序的活动状态。

您需要使用 Bundle 和 Intent 来实现此逻辑。

代码片段：

在调用程序中，我们需要在被调用程序中存储返回按钮功能所需的参数/数据。

捆绑 bndleData = 新捆绑（）；使用 Bundle 类的 putString()、putInt() 方法。

```
 String prefix = getPackageName().toString();
           (this prefix can be stored in application level constants.java file as applicable)

    bndleData.putString("ParentActivity", this.getLocalClassName()); 
```

如果需要，还存储其他参数 bndleData.putString("paramName", valueofParamName); bndleData.putInt("IntChannelImage", chImageInt);

```
 Intent intent = new Intent(v.getContext(), AMRChannelPlayer.class);

    intent.putExtra(prefix + "bndleChnlData", bndleData);

    startActivity(intent); 
```

调用程序：从包中检索数据、活动 nae 并在后退按钮实现中使用它：

前缀 = getPackageName().toString(); Bundle extras = getIntent().getBundleExtra(prefix + "bndleData");

String parentActivity = extras.getString("ParentActivity"); extras.getString("paramName");

我希望这可以帮助你。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-04T15:39:56.590

您可以调用您的`this.finish()`，这样活动将在三种情况下关闭。`onPause()``Activity`****

# debugging - 无法在调试器中运行程序？

> ID：10451173
> 
> 赞同：1
> 
> 时间：2012-05-04T14:51:23.617
> 
> 标签：debugging, gdb

我之前试图在 Linux 64 位机器上的一个程序上使用 gdb，然后我运行了 gdb bomb（这是程序名称），在 gdb 中，我只是输入了 run。它带着错误回来了`/bin/bash: /home/imicrothinking/ics11302016004/lab2/bomb: No such file or directory During startup program exited with code 127.`

我已经在网上挖了一会儿，到目前为止我听到的建议没有导致具体的解决方案，这是我到目前为止所确定的：

1.  我以根级别用户身份登录。
2.  我没有走错目录。
3.  可执行文件肯定存在。

我欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-13T15:45:03.110

也许 gdb 找不到你的 shell。所以将 env var SHELL 设置为你的 shell。例如：export SHELL=/bin/bash

参考：[http ://www.linuxquestions.org/questions/linux-software-2/gdb-giving-wierd-error-169299/](http://www.linuxquestions.org/questions/linux-software-2/gdb-giving-wierd-error-169299/)

# sockets - TCP 通信在防火墙打开时停止

> ID：10451175
> 
> 赞同：0
> 
> 时间：2012-05-04T14:51:36.050
> 
> 标签：sockets, tcp, client, firewall

我有一个在 vb.net 中开发的服务器客户端应用程序。服务器应用程序定期向客户端应用程序发送文件。它使用 TCP/IP 发送文件。

安装应用程序后，应用程序在防火墙关闭的情况下运行良好。但是当防火墙打开并且为应用程序添加了一个例外时，文件传输工作大约 10 分钟然后停止。

但是一旦我关闭防火墙，传输就会重新开始。请建议如何解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T12:59:17.917

当您说“*文件传输工作大约 10 分钟然后停止*”时，您能否详细说明一下。例如……“我正在传输一个大文件，在传输过程中，它停止了。” 或者“我***传输***一个文件成功，十分钟后，又去传输另一个文件，没有成功。”

在第一种情况（大传输）中，可能存在某种形式的带宽限制/规则停止。在第二种情况下，可能存在某种形式的“状态”处理，其中发生状态会话，防火墙没有关闭它，10 分钟后再次启动，并且您的防火墙正在查看会话“有人试图捎带/劫持这个会话......最好关闭它”

我会在防火墙上打开详细日志记录，以查看防火墙在做什么以及它如何感知连接。

# .net - 可移植类库支持 Interlocked.Read 和“长”重载？

> ID：10451176
> 
> 赞同：4
> 
> 时间：2012-05-04T14:51:39.947
> 
> 标签：.net, portable-class-library

我想在可移植类库项目中使用 Interlocked 类的方法，根据 MSDN（[here](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.aspx)），可移植框架支持 Interlocked 类。不幸的是，似乎只有一部分互锁方法可用。例如，我既找不到“Read”，也找不到 Exchange(Int64,Int64)。有谁知道他们是隐藏在其他地方还是没有实施？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:21:00.913

可移植库是一种识别跨您目标平台可用的公共（子集）表面区域的方法，它不会公开或添加超出该子集的其他 API。这就是为什么有些成员不同的原因。

当 MSDN 说可移植支持给定 API 时，这实际上意味着当您选择某种平台组合时 API 可用。例如，在创建新的可移植类库时，在对话框中选择 .NET Framework 和 Windows 应用商店应用程序（而不是其他）时，可以使用这种情况下的 Interlocked.Read。不幸的是，我们知道这在文档中令人困惑，我们正在努力在未来改进它。

在 Visual Studio 2012 的 RTM 和当前 RC 构建的[下层工具](http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981)中，我们实际上公开了 Int64 版本的 Interlocked 方法，但是，我们有一个错误，即在针对 Windows Phone 时它​​们会被公开。这是不正确的，它们在 Windows Phone 中**不起作用**（调用时会抛出 NotSupportedException）。

# html - 为什么 li 值低于 Safari 和 Chrome 中的列表编号？

> ID：10451180
> 
> 赞同：3
> 
> 时间：2012-05-04T14:52:01.057
> 
> 标签：html, css, google-chrome, safari, positioning

我正在努力弄清楚为什么 li 值被推到 Safari 和 Chrome 中的 li 数字之下。它在 IE 和 FF 中看起来很正常（都在一条直线上）。请在每个浏览器中查看以下内容以了解我的意思：

[http://jsfiddle.net/CfyQF/](http://jsfiddle.net/CfyQF/)

我尝试使用 li 内的表而不是浮动 div 来复制它，但得到相同的结果。

任何人都知道为什么会发生这种情况以及我如何更新我的 css 或 html 或两者来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:56:48.600

我花了一些时间试图想出一个没有浮动的工作解决方案，并想出了以下内容，对于任何需要这个的人来说：

[http://jsfiddle.net/zeaHu/11/](http://jsfiddle.net/zeaHu/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:08:24.487

我以前也遇到过这样的问题。这是浮动导致的。

您可以摆脱 float 属性并使用边距和填充来代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:34:20.680

不确定它是否能解决您的特定问题，但如果您去掉所有 css 和大部分 div，数字在输入旁边排成一行，并且“X”仍然很好地位于输入右侧；

```
<div>
    <ol>
        <li>
            <input>
            <button>x</button>
        </li>
        <li>
            <input>
            <button>x</button>
        </li>
    </ol>
</div> 
```

# c# - 具有临时 EntityKey 值的对象不能附加到对象上下文

> ID：10451186
> 
> 赞同：2
> 
> 时间：2012-05-04T14:52:12.040
> 
> 标签：c#, entity-framework-4

我正在使用断开连接的 Entity Framework 4 对象上下文，并且感谢之前的一些很棒的帮助，我已经向前迈进了。

现在，我有更多的问题。在执行简单的 CRUD 时，似乎 EF 似乎制造了不必要的障碍。在这种情况下，父子关系。

在我的情况下，我有一个具有增值税率的现有增值税代码。我将其加载、显示并允许用户添加更多增值税率。所以我们最终得到：

> 增值税代码 --- 增值税（现有）
> +- 增值税（由用户添加）

使用以下代码保存：

```
using (SopEntities sopEntities = EntitiesFactory.Create()) {
   VatRepository vatRepository = new VatRepository(sopEntities);

   foreach (VatRate vatRate in Item.VatRates) {
      if (vatRate.EntityKey == null || vatRate.EntityKey.IsTemporary) {
         sopEntities.VatRates.Attach(vatRate); 
         sopEntities.ObjectStateManager.ChangeObjectState(
            vatRate,
            System.Data.EntityState.Added
         );
      } else {
         sopEntities.VatRates.Attach(vatRate); // exception here
         sopEntities.ObjectStateManager.ChangeObjectState(
            vatRate,
            System.Data.EntityState.Modified
         );
      }
   }

   if (IsNew) {
      sopEntities.VatCodes.AddObject(Item);
   } else {
      sopEntities.VatCodes.Attach(Item);
      sopEntities.ObjectStateManager.ChangeObjectState(Item,System.Data.EntityState.Modified);
   }
   vatRepository.SaveChanges();
} 
```

但是，当我保存时，我得到了异常：

> 具有临时 EntityKey 值的对象不能附加到对象上下文

我在下面附上了截图：

![截屏](../Images/0f2145d3792a4187479c2d0e98bdb124.png)

我自己在集合中手动附加/添加增值税率，以尝试确定哪个对象有问题。但是，这无济于事。显示的例外是在增值税代码中*真实*存在的增值税率，它*已经有*一个实体密钥。是不是 EF 正在将对象图加到增值税代码中，然后又回到另一个尚未设置的增值税率 - 因为我还没有得到它？

基本上，如何在断开连接的场景中保存增值税代码和其中包含的增值税率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T12:56:35.190

当我发现这个错误时，是因为我的对象在静态修饰符下并且在另一个上下文中。

您可以检查您的代码以了解这种情况。希望这可以帮助 ：）

# http - HTTP：“错误错误请求行”

> ID：10451188
> 
> 赞同：0
> 
> 时间：2012-05-04T14:52:20.390
> 
> 标签：http, escaping, extendscript

我正在尝试通过 BridgeTalk 使用 Socket 连接从 Adob​​e Illustrator 脚本（尽管这个问题与 JSX 无关）向本地 Rails 应用程序发出 HTTP 请求（如您所见 — 很多可能会出错；） ）。

终于设法通过了一个请求，但是 Rails 应用程序抛出了一个错误：

```
ERROR bad Request-Line `GET /test.json HTTP/1.1'. 
```

目前没有发送特殊的标头——设置非常简单：

```
var connection = new Socket;
var response   = '';

var host       = '127.0.0.1:3000';
var path       = '/test.json';
var method     = 'GET';

var request    = method + " " + path + " HTTP/1.1";

if (connection.open(host)) {
    connection.write(request);
    response = connection.read(999999);
} else {
    $.writeln('Socket connection failed.');
}
connection.close(); 
```

我假设请求格式不正确，但我不确定会发生什么。

Rails 应用程序在 WEBrick 上运行。

任何关于 Rails 期望的帮助或提示，将不胜感激。

* * *

**更新**

WEBrick 似乎希望在请求行的末尾有一个回车：`\r\n`.

不幸的是，我正在使用 BridgeTalk 在 Bridge 中执行一段代码，这需要我使用`uneval()`或`toSource()`在上面提到的功能上。这些似乎逃避反斜杠，转换

```
GET /test.json HTTP/1.1\r\n 
```

进入

```
GET /test.json HTTP/1.1\\r\\n 
```

导致同样的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:40:37.600

我花了一段时间才弄清楚这一点，但像往常一样——“太多的活动部件让我很难发现问题”：

使用编码版本的回车和目的地解码定义请求将有助于：

```
var request = decodeURI(method + " " + path + " HTTP/1.1%0d%0a"); 
```

**然而**，事实证明一个正确的请求应该以`\n\n`not结尾`\r\n`，所以这样做：

```
var request = decodeURI(method + " " + path + " HTTP/1.1%0a%0a"); 
```

现在请求通过了，现在不再抛出错误。

# mysql - SSIS MySQL 复制表到 SQL Server

> ID：10451190
> 
> 赞同：1
> 
> 时间：2012-05-04T14:52:34.430
> 
> 标签：mysql, sql-server, ssis

我想将表从 MySQL 复制到 SQL Server。

ADO.NET 源使用 MySQL 连接。

OLE DB 目标，SQL Server。

该声明是完整的副本，因此没什么大不了的。当我点击播放按钮时，一段时间后会弹出一个错误。我设置了一个 DataViewer 并重新开始，在检查 DataViewer 的同时从 DataFlow 内部运行它。过了一会儿（这次花了更长的时间）错误。

![在此处输入图像描述](../Images/6d30611f25275c5bc25736fdc6e0bb9b.png)

> 错误：数据流任务中的 0xC02090F5，ADO NET 源[1](https://i.stack.imgur.com/FyNJf.jpg)：组件“ADO NET 源”(1) 无法处理数据。数据读取过程中遇到致命错误。
> 错误：数据流任务中的 0xC0047038，SSIS.Pipeline：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“ADO NET Source”(1) 上的 PrimeOutput 方法返回错误代码 0xC02090F5。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。

关于这个错误的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T23:36:45.817

这花了我几天的时间才弄清楚……所以我想我会分享我的笔记

* * *

如何将数据从 MySQL 连接并加载到 SQL Server

1 - 下载 32 位 ODBC 驱动程序。访问 MySQL 网站并下载：“mysql-connector-odbc-5.2.4-ansi-win32.msi” 注意：请勿在 BIDS 2008 上使用 64 位驱动程序。BIDS 2008 是 32 位的。创建 SSIS 的连接管理器时会出现不匹配错误：“The specified DSN contains an architecture mismatch between Driver and Application”</p>

2 - 创建用户 DSN 您需要打开使用 windows 32 ODBC 管理工具。不要在控制面板中打开常规的 ODBC 管理员。打开位于此处的 ODBC 管理员：c:\Windows\SysWOW64\odbcad32.exe。如果您使用默认的 ODBC 管理员……它将无法工作。此外，您必须创建“用户 DSN” - 而不是系统 DSN。否则它不会显示在 SSIS 注意：屏幕看起来相同，因此您将无法知道您是否在 32 位 ODBC 管理工具中。

3 – 创建一个新的 SSIS 包并创建一个 ADO.NET 连接管理器和 ADO.NET SQL Server 目标。

4 – 更改源 ADO.NET 属性。您将收到验证错误，并且您的包将无法运行。您需要将 ADO.NET 源代码的“ValidateExternalMetadata”更改为 FALSE（在“高级编辑器”对话框中）它也会给您元数据错误……没关系……只需单击确定。它仍然会提取元数据（列名/数据类型）。您不能像在 SQL Server 中那样选择表。您需要键入 SQL 选择语句。

5 - 运行包，应该可以正常运行和加载。

# emacs - 如何将 Emacs 目录中的 .el 文件与我在 init 文件中指定的文件隐藏起来

> ID：10451192
> 
> 赞同：3
> 
> 时间：2012-05-04T14:52:36.533
> 
> 标签：emacs, cedet

所以 list-load-path-shadows 告诉哪些 .el 文件会影响其他文件。大多数情况下，在我的 emacs 发行版中找到的本机文件会影响我下载的较新文件，这些文件是我在 init 文件中预加载的。

例如，我已经克隆了 cedet 存储库，并且始终保持最新状态，但是我的 Emacs 23.4 中的 cedet 文件遮蔽了我在我的 init 文件中加载的较新的 cedet 文件。

我无法在 /lisp/cedet 中的目录上克隆 cedet，因为像 eieio 或 speedbar 这样的包仍然不会被覆盖，因为它们位于不同的文件夹中。现在的临时解决方案是删除与 emacs 捆绑在一起的旧包，以便优先于我通过我的 init 文件加载的包。

有没有办法让我的 init 文件的负载优先于默认 emacs 包的负载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T01:10:26.307

如果您使用 CEDET 1.0 或 1.1，则基本安装说明可以正常工作，因为许多名称不同。如果您从使用新命名方案的 bzr trunk 中使用 CEDET，则需要使用：

```
(load-file "/home/user/cedet/cedet-devel-load.el") 
```

这将执行必要的魔法以从加载路径中删除内置 CEDET，并将新的 CEDET 安装到您的加载路径中。

有关更多信息，请参阅 CEDET bzr 主干中的安装文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:58:13.457

将 cedet 存储库目录放在您的前面，`load-path`Emacs 将从 cedet 区域中获取它...

# php - 简单的 html dom 无法处理 find(id) 中的正斜杠

> ID：10451193
> 
> 赞同：0
> 
> 时间：2012-05-04T14:52:38.667
> 
> 标签：php, simple-html-dom

find() 这里是 simple_html_dom 库的一个函数，当给定一个 id/class 时，它应该返回 dom 节点元素。

`$urlFetched->find("#".$id)`当 $id 为“fk-list-MP3-Players-/-IPods”时，总是无法找到并返回某些内容。我猜问题出在正斜杠和 simple_html_dom 上，因为其他 id 和 url（剪断）没有问题。我该怎么办？我的程序几乎完成并且依赖于简单的 html dom。

谢谢

编码：

```
$urlAndIds = array(
   array("http://www.flipkart.com/audio"  , array('fk-list-Home-Audio', htmlentities("fk-list-MP3-Players-/-IPods"), 'fk-list-Accessories'),array('ALL','AllBrands')) );

foreach($urlAndIds as $uAI) {
    $url = file_get_contents($uAI[0]) ;
    $urlFetched = str_get_html($url) ;

    if ($url == false){
         echo 'page '.$uAI[0] . " not found"  ."<br>" ."<br>";
    }   else {
        foreach ($uAI[1] as $id) {
            $idFound = $urlFetched->find("#".$id) ;
            if(!$idFound) {

                echo 'In page '.$uAI[0].' -id not found- '.$id  ."<br>";
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:46:15.437

斜杠被解释为 XPath 表达式的一部分，因此它正在寻找一个名为`-IPods`. 也没有 XPath "quote" 类型的函数。我不确定添加反斜杠是否可行，但您可能更容易使用带有 id 的普通属性选择器：`[@id='fk-list-MP3-Players-/-IPods']`

# actionscript-3 - 动态改变标签的宽度

> ID：10451195
> 
> 赞同：0
> 
> 时间：2012-05-04T14:52:49.533
> 
> 标签：actionscript-3, flash-builder

我在一页上排列了以下 4 个标签。

```
 <s:Label id="lblName" x="10" y="13" text="{data.name}"/>
    <s:Label id="lblComputer" x="10" y="37.5"  text="{data.computer}"/>
    <s:Label id="lblModel" x="45" y="37.5"  text="{data.model}"/>
    <s:Label id="lblCPU" x="43" y="63"  text="{data.cpu}"/> 
```

我试图让布局看起来像这样：

**lbl名称**

**lblComputer lblModel**

**lblCPU**

如果 lblComputer 是一个短名称，它可以工作，但如果它有很多字符，那么 lblComputer 和 lblModel 一起运行并且完全不可读。

如果 lblComputer 恰好很长，是否有办法动态更改 lblModel 的 x 值以“腾出空间”为 lblComputer？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:02:51.750

您可以将它们放在 VGroup 和 HGroup 中并删除 x,y flex 将处理定位；

```
<s:VGroup>
    <s:Label id="lblName"  text="{data.name}"/>
    <s:HGroup>
        <s:Label id="lblComputer"   text="{data.computer}"/>
        <s:Label id="lblModel"   text="{data.model}"/>
    </s:HGroup>
    <s:Label id="lblCPU"  text="{data.cpu}"/>
</s:VGroup> 
```

# javascript - 使用 HTML5 画布绘制管道/管子

> ID：10451196
> 
> 赞同：0
> 
> 时间：2012-05-04T14:52:52.323
> 
> 标签：javascript, html, html5-canvas

我想使用 HTML5 画布沿一组点绘制管道/管。我尝试绘制渐变线，使其看起来像管道，弯曲处的渐变不连续。

将合成操作作为 XOR 时，它有点好，但不是那么好。

```
var MIDDILE_COLOR = "#ffffff";
var LINE_WIDTH = 20;
window.onload = function() {
  try {
    var context = document.getElementById("abc").getContext("2d");
    var points = [
      [90, 136],
      [101, 21],
      [101, 21],
      [376, 133],
      [100, 300]
    ];
    drawConnectionPipe(context, points, 10, "#ff0000");
  } catch (e) {
    alert(e);
  }

}

function drawConnectionPipe(ctx, coorinateArray, thickness, gradColor) {
  try {

    ctx.save();

    var gradientObject = null;
    //ctx.globalCompositeOperation = 'xor';
    for (var i = 0; i < coorinateArray.length - 1; i++) {
      var startPt = coorinateArray[i];
      var endPt = coorinateArray[i + 1];

      var arr = getPerpendicularPoints(startPt[0], startPt[1], endPt[0], endPt[1]);
      gradientObject = ctx.createLinearGradient(arr[0], arr[1], arr[2], arr[3]);

      gradientObject.addColorStop(0, gradColor);
      gradientObject.addColorStop(0.5, MIDDILE_COLOR);
      gradientObject.addColorStop(1, gradColor);
      ctx.lineWidth = thickness;
      ctx.strokeStyle = gradientObject;
      ctx.lineJoin = "round";

      ctx.beginPath();
      ctx.moveTo(startPt[0], startPt[1]);
      ctx.lineTo(endPt[0], endPt[1]);
      ctx.closePath();
      ctx.stroke();

      //ctx.globalCompositeOperation = 'source-over';

    }

    ctx.restore();
  } catch (e) {
    alert(e);
  }
}

function getPerpendicularPoints(x1, y1, x2, y2) {
  var slantAngle = 0;
  var slant = (x1 - y1) / (x2 - y2);
  slantAngle = Math.PI / 2 - Math.atan2(y2 - y1, x2 - x1);
  var originX = (x1 + x2) / 2;
  var originY = (y1 + y2) / 2;

  var halfDistance = LINE_WIDTH / 2;

  var perpX1 = originX + halfDistance * Math.sin(90 * Math.PI / 180 - slantAngle);
  var perpY1 = originY + halfDistance * -Math.cos(90 * Math.PI / 180 - slantAngle);

  var perpX2 = originX + halfDistance * Math.sin(270 * Math.PI / 180 - slantAngle);
  var perpY2 = originY + halfDistance * -Math.cos(270 * Math.PI / 180 - slantAngle);

  return [perpX1, perpY1, perpX2, perpY2];

}

function getNormalizedAtan2(ydiff, xdiff) {
  var atan2Res = Math.atan2(ydiff, xdiff);
  if (atan2Res < 0) {
    atan2Res += (2 * Math.PI)
  }

  return atan2Res;
}
```

```
<html>

<head>
  <title>Raphael Play</title>
</head>

<body>

  <canvas id="abc" width="500" height="500"></canvas>

</body>

</html>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:47:46.790

最后我使用[svg filters](http://www.w3.org/TR/SVG/filters.html)实现了它。在 html5 画布中创建这样的照明非常困难。

# c# - 使用 PDFNet 从 PDF 获取 URL

> ID：10451199
> 
> 赞同：1
> 
> 时间：2012-05-04T14:53:05.383
> 
> 标签：c#, .net, pdf

我们使用[PDFNet](http://www.pdftron.com/pdfnet/index.html)库来提取 PDF 文件的内容。我们需要做的一件事是提取 PDF 中的 URL。不幸的是，当您浏览文件中的元素时，您会得到一个片段的 URL，而且并不总是清楚哪个片段与哪个片段搭配。

从 PDFNet 获取完整 URL 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:54:04.570

链接作为注释存储在页面上。您可以执行类似以下代码的操作来从注释中获取 URI。try/catch 块在那里是因为如果缺少任何值，它们仍然返回一个 Obj 对象，但是你不能在它上面调用任何方法而不抛出它。

另外，请注意，并非所有看起来像链接的东西都是一样的。我们从同一个 Word 文件创建了两个 PDF。我们创建的第一个是打印到 PDF。我们在 Acrobat 中创建的第二个。

这两个文件中的链接都可以在 Acrobat Reader 中正常工作，但只有第二个文件具有 PDFNet 可以看到的注释。

```
Page page = doc.GetPage(1);
for (int i = 1; j < page.GetNumAnnots(); j++) {
    Annot annot = page.GetAnnot(i);
    if (!annot.IsValid())
        continue;
    var sdf = annot.GetSDFObj();
    string uri = ParseURI(sdf);
    Console.WriteLine(uri);
}

private string ParseURI(pdftron.SDF.Obj obj) {
    try {
        if (obj.IsDict()) {
            var aDictionary = obj.Find("A").Value();
            var uri = aDictionary.Find("URI").Value();
            return uri.GetAsPDFText();
        }
    } catch (Exception ) {
        return null;
    }
    return null;
} 
```

# php - 我需要使用什么名称函数 php 来读取 Windows 上的设置文件权限？

> ID：10451202
> 
> 赞同：-1
> 
> 时间：2012-05-04T14:53:06.447
> 
> 标签：php, permissions, settings

是否可以使用 php 函数读取设置文件权限（八进制表示法/符号表示法）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:54:04.430

[`fileperms()`](http://php.net/manual/en/function.fileperms.php)

# c++ - 动态投射和静态投射的奇怪行为

> ID：10451203
> 
> 赞同：4
> 
> 时间：2012-05-04T14:53:07.117
> 
> 标签：c++, oop, casting, virtual-functions, dynamic-cast

该程序运行无任何异常。你能解释一下为什么动态转换和静态转换都成功了吗？以及 C++ 如何设法解决所需的虚函数？

```
class Shape 
    {
    private :
        string helperFunction();

    public : 
        virtual void draw() = 0;
        virtual void type();
    };

void Shape::type()
    {
    cout << "Shape Type";
    }

// ----------------------------------------------------------------------------

class Circle : public Shape
    {
    private: 
    string circlething;

    public :
        virtual void draw();
        virtual void type();
        void CircleFunction();
    };

void Circle::draw()
    {
    cout <<"Circle Draw" << endl;
    }

void Circle::type()
    {
    cout <<"Circle Type" << endl;
    }

void Circle::CircleFunction()
    {
    circlething = "Circle Thing";
    cout << circlething;
    cout << "Circle Function" << endl;
    }

class Square : public Shape
    {
    private :
        string  squarething;
    public :
        virtual void draw();
        virtual void type();
        void SquareFunction();
    };

void Square::draw()
    {
    cout <<"Square Draw" << endl;
    }

void Square::type()
    {
    cout <<"Square Type" << endl;
    }

void Square::SquareFunction()
    {
    squarething = "Square Thing";
    cout << squarething;
    cout << "Square Function" << endl;
    }
// ----------------------------------------------------------------------------

int _tmain(int argc, _TCHAR* argv[])
    {
    vector<Shape *> shapes;
    Circle circle;
    Square square;
    shapes.push_back(&circle);
    shapes.push_back(&square);

    vector<Shape *>::const_iterator i;

    for (i = shapes.begin(); i < shapes.end(); ++i)
        {

        cout << "\n*** Simple Type ***\n" << endl;
        (*i)->type();
        (*i)->draw();

        cout << "---Static Cast Circle--" << endl;
        Circle* circle = static_cast<Circle*>(*i);
        circle->type();
        circle->draw();
        circle->CircleFunction();

        cout << "---Static Cast Square--" << endl;
        Square* square = static_cast<Square*>(*i);
        square->type();
        square->draw();
        square->SquareFunction();

        cout << "---Static Cast Circle to Shape --" << endl;
        Shape* shape1 = static_cast<Shape*> (circle);
        shape1->type();
        shape1->draw();

        cout << "--- Dynamic Cast Circle to Shape --" << endl;
        Shape* shape2 = dynamic_cast<Shape*> (circle);
        shape2->type();
        shape2->draw();

        cout << "--- Static Cast Square to Shape --" << endl;
        Shape* shape3 = static_cast<Shape*> (square);
        shape3->type();
        shape3->draw();

        cout << "--- Dynamic Cast Square to Shape --" << endl;
        Shape* shape4 = dynamic_cast<Shape*> (square);
        shape4->type();
        shape4->draw();

        }
    int x;
    cin >> x;
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:57:30.353

让我们从为什么它不抛出任何异常开始，因为它非常简单：当您尝试强制转换*引用*`dynamic_cast`类型时抛出异常，并且它失败了。使用on 指针时，如果成功则返回一个指针，如果失败则返回一个空指针。*`dynamic_cast`*

 *至于为什么你从来没有失败的演员表，你所有的`dynamic_cast`人都*在*层次结构中，产生一个`Shape *`. 由于所有有问题的对象*都是*从 派生的`Shape`，所以这总是会成功的——事实上，这种转换可以隐式完成。

为了演示`dynamic_cast`真正打算做什么，让我们编写一些稍微不同的代码：

```
#include <iostream>
#include <vector>

using namespace std;

class Shape {
public : 
    virtual void draw() = 0;
};

class Circle : public Shape
{
public :
    virtual void draw() { cout << "Circle Draw\n"; }
    void circlefunc() { cout << "circle func\n"; }
};

class Square : public Shape
{
public :
    virtual void draw() { cout << "Square Draw\n"; }
    void squarefunc() { cout << "Square Func\n"; }
};

int main() {
    vector<Shape *> shapes;
    Circle circle;
    Square square;
    shapes.push_back(&circle); // implicit conversion from Circle * to Shape *
    shapes.push_back(&square); // implicit conversion from Square * to Shape *

    Circle *c;
    Square *s;
    for (int i=0; i<shapes.size(); i++) {
        shapes[i]->draw(); // draw polymorphically
        if (c = dynamic_cast<Circle *>(shapes[i])) // try to cast to Circle *
            c->circlefunc();               // if it worked, invoke circlefunc
        else if (s = dynamic_cast<Square *>(shapes[i])) // likewise for square
            s->squarefunc();
    }
    return 0;
} 
```

这次我们使用 dynamic_cast 从`Shape *`to`Square *`或`Circle *`。当且仅当指针对象的动态类型是该类型时，这才会成功。否则它将产生一个空指针。当且仅当我们获得一个非空指针时，我们才调用该特定类型的成员函数。

总结一下：当您有指向派生对象的指针/引用时，您可以隐式转换为指向基类的指针/引用。您不需要`dynamic_cast`（或任何显式转换），因为这总是安全的。

当您从指针/引用转换为基以获取指向派生的指针/引用时，*通常*需要使用`dynamic_cast`. 这将根据指针对象的实际类型（即动态类型）是否是所需目标（或其基础）而成功/失败。在这种情况下，失败的信号会有所不同，具体取决于您使用的是指针还是引用。作为参考，失败会抛出异常。对于指针，失败将产生一个空指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T14:56:15.487

为什么要呢？`dynamic_cast`如果强制转换失败，则返回`NULL`，它不会为指针抛出异常。

另外，除此之外，它为什么会失败？两者`Square`都是s `Circle`。`Shape`所以演员阵容很好。

由于基本的多态性，输出如您所见。你有一个`Shape*`指向一个`Square`对象或一个`Circle`对象的 a 。`virutal`函数调用从最派生的类调用被覆盖的方法。这是 OOP 的**核心**方面。

在大多数实现中，这是通过`virtual function tables`. 尽管您有一个`Shape*`，但该对象包含一个指向内部虚函数表的指针。因为该成员在强制转换期间没有改变，它指向 a`Square`或 a的虚函数表`Circle`，所以调用被正确解析。

![在此处输入图像描述](../Images/012652818eb157ca3aff0088ffdd2770.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:59:15.827

您正在使用`dynamic_cast`从派生类型到基类型的转换，并且没有歧义。你为什么认为它会失败？此外，使用`dynamic_cast`on 指针不会引发异常（而是会返回`NULL`）。在类型引用之间进行转换时，它可能会引发异常。

你`static_cast`的成功是因为你的简单类的构造方式。由于`CircleFunction()`and`SquareFunction()`实际上并没有尝试访问任何无效的类成员变量，因此程序能够成功运行（幸运的是），使用类型之间的错误转换`static_cast`不是您应该做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:02:13.923

简短的回答：当您在`static_cast<Square>`圆形指针和`static_cast<Circle>`方形指针上执行操作时，您已经进入了未定义的行为。那时几乎任何事情都可能发生。

此外，当您调用 时`dynamic_cast`，如果您要转换为指针，它可能会失败并返回 NULL。如果您要转换为引用，它只会引发异常。此外，如果编译器在编译时知道没有歧义，则编译器可以选择用编译时强制转换替换 dynamic_cast（这里就是这种情况，因为您是从子级 -> 父级强制转换）。

你得到的输出是因为这些类彼此足够相似，虽然演员表不合法，但他们还是设法工作。鉴于未定义的行为，如果您继续进行更改，就不可能依赖它。*

# python - python-oauth 包损坏

> ID：10451206
> 
> 赞同：0
> 
> 时间：2012-05-04T14:53:20.953
> 
> 标签：python, linux, r

我正在使用在 Oracle VirtualBox 上运行的 Ubuntu linux Lucid Lynx。当我尝试获取 R 包（r-base）或 python matplotlib 包时

```
sudo apt-get install r-base 
```

我收到此错误：

> dpkg：解析错误，在文件 '/var/lib/dpkg/available' 中，靠近第 30898 行包'python-oauth'：缺少版本

有谁知道这个的解决方案，因为我在谷歌上找不到答案。我已经尝试删除 python-oauth 包，但随后我收到相同的错误消息。用力更新和安装它也无济于事。我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:16:12.300

你可以试试

```
apt-get clean
apt-get update 
```

然后再试一次

如果这不起作用，请尝试

```
apt-get install r-base --reinstall 
```

# php - Chtml CheckBox单击复选框，但仍标记为未选中未更改..通过ajax提交

> ID：10451208
> 
> 赞同：1
> 
> 时间：2012-05-04T14:53:26.750
> 
> 标签：php, jquery, yii

```
 <?php echo CHtml::checkBox('markComplete', FALSE , 
                    array(
                    'class' => 'markComplete',
                    'id'=> 'markComplete'.$events['id'],                        
                    'ajax' => array(
                                    'url'=>$this->createUrl('/events/events/MarkComplete'),
                                    'data'=>'event_status_on='.$events['id'],
                                    'type'=>'POST',
                                    'beforeSend' => 'js:function(){   

                                        var idSelector = $("#markComplete'.$events['id'].'");   
                                        var check = idSelector.is(":checked");  
                                        var child = idSelector.parent("td");
                                        var parent = $(child).parent("TR");
                                        $(parent).css("opacity","0.5");

                                    }',
                                    'success'=>'js:function(resp) {                                                                         
                                        $("#right").prepend(resp);

                                        return true;                                        
                                    }'
                                    ),
                                )

                            );

    ?> 
```

Chtml CheckBox 单击复选框，但仍标记为未选中未更改..如果我将其更改为 TRUE，则它不会更改为 FALSE ...通过 AJAX 提交...完美响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:54:39.763

您的代码中没有错误，但最终为 checkBox 生成的 onclick 处理程序默认返回 false。检查你生成的 html，你会看到：

```
jQuery('body').undelegate('#markComplete_someId','click').delegate('#markComplete_someId','click',function(){jQuery.ajax({'url':'/something','data':'event_status_on=someId','type':'POST','beforeSend':function(){
     var idSelector = $("#markComplete");
     var check = idSelector.is(":checked");
     var child = idSelector.parent("td");
     var parent = $(child).parent("TR");
     $(parent).css("opacity","0.5");
},
'success':function(resp) {
      $("#right").prepend(resp);
      return true;
},'cache':false});
 return false; // this line changes everything!!
}); 
```

这`return false;`最终阻止了任何 html 元素的默认*onclick 事件*行为。这在[clientChange 方法的文档中](http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail")有所提及。您会看到它允许我们为 htmlOptions 指定某些特殊属性，例如`'ajax'`您已经使用过的，以及`'return'`指定 onclick 处理程序应返回的内容，默认为 false，我们可以将其更改为返回 true，通过添加这样的`'return'`属性：

```
 <?php echo CHtml::checkBox('markComplete', FALSE , 
                array(
                   'class' => 'markComplete',
                   'id'=> 'markComplete'.$events['id'],                        
                   'ajax' => array( /* add your code */ ),
                   'return' => true // add return like this
                )
   );
?> 
```

这将使它工作。

# ruby-on-rails - Ruby on Rails 用户确认未更新参数

> ID：10451210
> 
> 赞同：0
> 
> 时间：2012-05-04T14:53:28.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

在我的应用程序中，我有一个用户确认过程。当用户注册时，会发生四件事：

1.  account_status_id 设置为 1（未确认）
2.  用户已登录（现在 current_user 存在）
3.  生成一个 new_account_confirmation_token
4.  将向新用户发送一封确认电子邮件，其中包含包含 new_account_confirmation_token 的链接

我最初尝试用这种方法处理确认链接。它可以毫无问题地找到用户，并且代码流过 update_attributes！方法，但是它没有更新 account_status。据我所知，这是由于 current_user 对象存在这一事实，因此我试图更新的用户已经“在内存中”。那是对的吗？

```
 def new_account_confirmation
    @title = "Account Confirmation"
    logger.info("User is not logged in")
    @user = User.find_by_new_account_confirmation_token(params[:confirm_id])      
    if @user
      @user.update_attributes!(:account_status_id => 2)
    else
      redirect_to root_path
    end
  end 
```

我的工作如下。下面的代码有效，但我想知道为什么上面的代码不起作用。为什么它不会更新 account_status？

```
 def new_account_confirmation
    @title = "Account Confirmation"
    if current_user
      logger.info("User is logged in")
      current_user.update_attributes!(:account_status_id => 2)
    else
      logger.info("User is not logged in")
      @user = User.find_by_new_account_confirmation_token(params[:confirm_id])      
      if @user
        @user.update_attributes!(:account_status_id => 2)
      else
        redirect_to root_path
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:35:38.657

即使您的用户像您所说的那样“在内存中”，也没有理由不更新。我相信您的更新正在发生，但您只是没有看到它，因为`current_user`与`@user`.

我不知道您如何验证`@user`未更新但如果`update_attributes!`未引发错误则将其保存。

# php - php 和换行符：我需要知道什么？

> ID：10451211
> 
> 赞同：3
> 
> 时间：2012-05-04T14:53:29.620
> 
> 标签：php, mysql, cross-browser, cross-platform, newline

我有一些问题`\r\n`：

*   换行符取决于浏览器？（不是它们在浏览器中的显示方式，而是如何`<textarea>`通过 http 请求将它们发送到 php）
*   换行符是系统依赖的？（php运行的地方）
*   php会应用一些隐式转换吗？
*   mysql会应用一些隐式转换吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:56:01.337

*   换行符取决于浏览器？
    *   否。用于`<br>`在浏览器中获取换行符
*   换行符是系统依赖的？（php运行的地方）
    *   是：`\n`在 OSX 上，`\n`在 Unix/Linux 上，`\r\n`在 Windows 上
*   php会应用一些隐式转换吗？
    *   不
*   mysql会应用一些隐式转换吗？
    *   不

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:06:36.917

通常，对于浏览器`\r`和`\n`是空白字符，如(tab)`' '`的 (whitespace )。`\t`在某些标签（脚本、pre 等）中，它们被视为换行符。在这种情况下，浏览器将理解任何常见的换行符序列 ( `\r`, `\r\n`, `\n`)。

当数据来自 textarea 时，换行符将[始终](http://blogs.warwick.ac.uk/chrismay/entry/how_are_newlines/)表示为`\r\n`.

php 文件中的换行符不依赖于它们运行的​​系统。这取决于用于创建 php 文件的文件编辑器的设置。当您将 php 文件复制到另一个系统时，换行符格式不会改变。

例如，看看这段代码：

```
print_r("
" === "\r\n"); 
```

其结果将取决于用于创建此文件的编辑器的设置。它不依赖于当前系统。

但是，如果您尝试读取系统包含的其他文件（例如文本文件），这些文件很可能会使用系统的常用换行符格式。

不，PHP 和 MySQL 不应用隐式转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:58:53.830

系统无关的方式是使用 PHP_EOL 常量。

换行不依赖于浏览器，外部带有 CSS [white-space:pre](http://www.w3schools.com/cssref/pr_text_white-space.asp)你必须执行[nl2br()](http://php.net/manual/en/function.nl2br.php) php 函数将换行转换为 BR 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:05:30.753

对我来说一个很大的问题是单引号字符串中的`'like\nthis'`转义序列（如`\n`）不会被解释。您必须使用双引号`"like\nthis"`来获得实际的换行符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T14:56:36.110

`<br>`是独立于浏览器的，`\n`应该也是。

不知道关于`\r`

MySQL不会转换它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T14:57:21.643

您可能对[nl2br](http://php.net/manual/en/function.nl2br.php "nl2br")感兴趣，这会像您描述的那样采用换行符，并用 HTML 换行符 ( `<br />`) 替换它们。

# jquery - 基于 webkit 的浏览器 (Chrome/Safari) 中的全屏 jQuery 淡入/淡出动画卡顿

> ID：10451212
> 
> 赞同：0
> 
> 时间：2012-05-04T14:53:37.240
> 
> 标签：jquery, webkit, fadein

我的网站上有一些（几乎）全屏淡入/淡出动画，它们在 Safari 和 Chrome（Windows 7 64 位，jQuery 1.7.2）中卡顿：（[http://portfolio.wezelkrozum.nl/#page=news&par1=article&par2 =1&par3=](http://portfolio.wezelkrozum.nl/#page=news&par1=article&par2=1&par3=) )

单击缩略图时会出现动画。我很想知道是否有更流畅的方式来实现这些动画。到目前为止，我已经更改了脚本，以便在动画淡入完成后图像变得可见。它使动画更流畅但不够流畅。

那么，我该如何改善褪色动画呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:04:33.257

试试这个[2D Transformations](https://github.com/heygrady/transform)插件。无需编辑任何内容，只需在 .js 中包含 .js 即可。如果可能，它将在 jQuery 动画调用中使用 css 转换。

我在 Chrome (OS X) 和 Safari (OS X) 中打开了您的网站，动画看起来不错。

编辑：

1）将样式添加`-webkit-transform: translateZ(0);`到`wrapper` （包装缩略图）和`article_images_manager`. 它在 Webkit 中激活 GPU 加速。:-)

2）你不应该使用完整的图像作为缩略图，而应该使用预先生成的小图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:56:49.187

我看不出问题。您可能想尝试 css3 过渡而不是 jQuery 动画。他们肯定会提高性能。

# c - 不使用pulseaudio时gstreamer泄漏内存

> ID：10451215
> 
> 赞同：1
> 
> 时间：2012-05-04T14:53:44.973
> 
> 标签：c, linux, gtk, gstreamer, pulseaudio

我编写了一个使用 Gtk 和 Gstreamer 播放声音的应用程序。每次播放新声音时，如果没有在我的系统上安装 pulseaudio，应用程序会使用额外的 10M 虚拟内存，而这些虚拟内存永远不会被释放。如果安装并运行pulseaudio，则不会发生内存泄漏，但声音很断断续续，经常崩溃。是处理声音播放的代码段。*update_callback* 每 10 秒调用一次。

```
int current_sound;
int current_beep_type = BEEP_CONT;
int next_beep_type = -1;
gboolean sound_muted = FALSE;
static GstSeekFlags seek_flags = GST_SEEK_FLAG_FLUSH | GST_SEEK_FLAG_KEY_UNIT;
GstElement *sound_pipeline = NULL;

int update_callback(GtkWidget *widget, gpointer data) {

    static int i = 0;
    switch((i++)%2) {
        case 0:
            play_sound("morse_code.ogg",BEEP_CONT);
            break;
        case 1:
            destroy_sound();
            break;
        default:
            break;
    }

    return TRUE;
} 

static gboolean bus_call(GstBus *bus, GstMessage *msg, void *user_data)
{
    switch (GST_MESSAGE_TYPE(msg)) {
        case GST_MESSAGE_EOS: {
            //g_print("End of stream\n");
            if(current_beep_type == BEEP_CONT) {
                gst_element_seek (sound_pipeline, 1.0,
                      GST_FORMAT_TIME,
                      seek_flags,
                      GST_SEEK_TYPE_SET, 0,
                      GST_SEEK_TYPE_NONE, GST_CLOCK_TIME_NONE);
                break;
            }
            else {
                //gst_element_set_state(GST_ELEMENT(sound_pipeline), GST_STATE_NULL);
            }
            if(strlen(next_uri) > 0) {

                g_object_set(G_OBJECT(sound_pipeline), "uri", next_uri, NULL);

                current_beep_type = next_beep_type;
                memset(next_uri,0,sizeof(next_uri));
                if(!sound_muted) gst_element_set_state(GST_ELEMENT(sound_pipeline), GST_STATE_PLAYING);
                else gst_element_set_state(GST_ELEMENT(sound_pipeline), GST_STATE_PAUSED);
            }
            else {
                gst_element_set_state(GST_ELEMENT(sound_pipeline), GST_STATE_NULL);
            }

            break;
        }
        case GST_MESSAGE_ERROR: {
            GError *err;
            gst_message_parse_error(msg, &err, NULL);
            g_error("%s", err->message);
            g_error_free(err);
            break;
        }
        default:
            break;
    }

    return TRUE;
}

void play_sound(char *sound, int beep)
{
    strcpy(next_uri,"file://");
    strcat(next_uri,SOUNDS_DIR);
    strcat(next_uri,sound);

    next_beep_type = beep;

    if(sound_pipeline == NULL) {
        mad_log(LOG_INFO,"creating sound_pipeline\n");
        GstBus *bus;
        sound_pipeline = gst_element_factory_make("playbin", "play");
        bus = gst_pipeline_get_bus(GST_PIPELINE(sound_pipeline));
        gst_bus_add_watch(bus, bus_call, loop);
        gst_object_unref(bus);
    }

    GstState state;

    gst_element_get_state(sound_pipeline,&state,NULL,500000000);

    if (state == GST_STATE_NULL) {
        //g_print("pipeline is in NULL state\n");
        g_object_set(G_OBJECT(sound_pipeline), "uri", next_uri, NULL);
        current_beep_type = next_beep_type;
        memset(next_uri,0,sizeof(next_uri));
        if(!sound_muted) gst_element_set_state(GST_ELEMENT(sound_pipeline), GST_STATE_PLAYING);
        else gst_element_set_state(GST_ELEMENT(sound_pipeline), GST_STATE_PAUSED);
    }

}

void destroy_sound(void) {
    if(sound_pipeline)
    {        
        current_beep_type = -1;
        gst_element_set_state(GST_ELEMENT(sound_pipeline), GST_STATE_NULL);
        g_object_unref(G_OBJECT(sound_pipeline));
        sound_pipeline = NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:10:58.417

当前的剪辑不完整，但似乎存在一些问题。一些技巧：

*   使用 playbin2
*   通过使用 playbin2 上的“静音”属性实现“静音”
*   使用搜索上的 SEGMENT 标志并在总线上收听 SEGMENT_DONE 可以更好地实现循环声音
*   将 play_sound() 和 bus_call() 中的通用代码移到单独的方法中，以便于阅读

理想情况下，添加指向完整独立示例的链接。

# asp.net - 在服务层方法中将 IQueryable 作为参数传递是一种好习惯吗？

> ID：10451216
> 
> 赞同：0
> 
> 时间：2012-05-04T14:53:49.500
> 
> 标签：asp.net, parameters, filter, iqueryable, service-layer

**我有一个具有 3 层UI**、**服务层**和**存储库**的 ASP.NET 应用程序。

我必须在数据库中的产品上实现**搜索功能**。 `ProductRepository`是我的**存储库类**，从数据库中获取所有**产品**的方法的签名是：

```
IQueryable<Product> GetAllProducts(); 
```

因此，从我的**服务层**我使用：

```
IProductRepository _ProductRepository = new ProductRepository(); 

IQueryable<Product> products = _ProductRepository.GetAllProducts(); 
```

如果我想过滤`IQueryable<Product> products`，例如使用**价格 > 100**的产品或仅使用**color = "yellow"**的产品。

所以我想知道，而不是创建方法，`ProductRepository`例如：

```
IQueryable<Product> GetAllProductsByColor(int colorId) 
```

**我想知道在我的服务层**中创建一组接受`IQueryable<Product>`作为参数并直接在那里执行过滤的方法是否是一种好习惯：

```
IQueryable<Product> FilterProducts(IQueryable<Product> products, Dictionary<string, object> filters) 
```

其中用**(propertyName, value)**`Dictionary<string, string>`表示一个集合。

 **此解决方案的优点是，如果我必须应用多个过滤器，我只需通过`IQueryable<Product>`已过滤的过滤器，而不是每次都采用过滤后的产品集之间的交集。

这是一个好习惯（只要我保持**上下文打开**）还是多层架构模式不“允许”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:01:09.313

我想说这取决于什么提供了 IQueryable 的实现。在大多数情况下，您冒着允许 IQueryable 的用户执行以下任一操作的风险：1) 过滤未编入索引的字段（因此，当您有大表时，如果有的话，数据库层会存储数据库层），或者 2) 执行任意 IQueryable对数据库造成巨大负载的操作（例如 GroupBy、Join 等）。

假设你对 1 没问题，为了防止 2）我通常允许用户通过一个`IEnumerable<Product> LoadProducts(Predicate<Product> filter)`方法加载对象，然后我将其转换为`Where`IQueryable 上的一个；这隐藏了其他 IQueryable 方法，但仅允许完全灵活地用于过滤目的。**

# android - 无法从套接字检索数据

> ID：10451217
> 
> 赞同：0
> 
> 时间：2012-05-04T14:53:50.967
> 
> 标签：android

我是开发Java应用程序的初学者。我正在android上制作一个聊天应用程序。我使用线程为进来的客户端服务，但是当客户端连接到服务器时，我无法检索套接字中包含的数据，但是当客户端连接丢失时，可以显示数据。我使用 ReadLine 方法从套接字读取数据。这是服务器端的程序代码：

```
package server;
import java.net.*;
import java.io.*;
import java.util.Vector;  

import com.sun.org.apache.bcel.internal.generic.NEW;  

public class Server {       

public static void main(String[] args)throws IOException, InstantiationException,
IllegalAccessException {            

    ServerSocket servsocket = null;  
    Socket sock = null;  
    byte[] bytebuffer = new byte[512];  

    try {
        System.out.println("SERVER IS RUNNING...");
        servsocket = new ServerSocket(28000);
        while(true){
        sock = servsocket.accept();
        System.out.println(servsocket.isBound());
        System.out.println("Port "+servsocket+" Ready!!!");
        System.out.println("Accept connection requests from " + sock);
        System.out.println("From CLIENT "+sock.getInetAddress()+ " and PORT " +  
            sock.getPort());
        ChatThread thread = new ChatThread(sock);  
        System.out.println("Thread is running");
        thread.run();       

        }
    } catch (IOException ioe) {
        System.out.println(ioe);
    } 
    finally{
            try {
                servsocket.close();
                } catch (IOException ioe) {
                    System.out.println(ioe);
                }
            }       
    }
    } 

class ChatThread extends Thread{
    static Vector<ChatThread> chatthread = new Vector<ChatThread>(10);
    private Socket sock;
    private BufferedReader in ;
    private PrintWriter out;

    public ChatThread (Socket socket) throws IOException {
        this.sock = socket;
        in = new BufferedReader(
                new InputStreamReader(socket.getInputStream()));
        out = new PrintWriter(
                new OutputStreamWriter(socket.getOutputStream()));

        byte[] bytebuffer = new byte[512];
        int receivemssg;

    }

    public void run(){
        int recvMsgSize;
        byte[] bytebuffer = new byte[512];
        String readsocket;
        try {
            readsocket = in.readLine();
        } catch (IOException e) {
            e.printStackTrace();
        }
            }
                } 
```

程序启动时服务器端显示下方。我试图从客户端发送“Hello ....”这个词。可以看出线程没有运行。

服务器正在运行... true Port ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=28000] 就绪！！！接受来自 Socket[addr=/172.17.231.254,port=3567,localport=28000] 的连接请求来自 CLIENT /172.17.231.254 和 PORT 3567 线程正在运行...

当我用 getInputStream 替换线程上的 readline 方法时，可以从客户端运行线程并显示消息。这是我进入线程替换之前使用的readline方法的代码。

```
public ChatThread (Socket socket) throws IOException {
        this.sock = socket;
        in  = sock.getInputStream();
        out = sock.getOutputStream();
        byte[] bytebuffer = new byte[512];
        int receivemssg;

    }

    public void run(){
        int recvMsgSize;
        byte[] bytebuffer = new byte[512];

        System.out.println("Thread is Running...");
        String masuk = new String(bytebuffer);

        System.out.println(bytebuffer);
        System.out.println(in.toString());
        System.out.println("thread successfully executed !!!");

        synchronized (chatthread) {
            chatthread.addElement(this);
        }

         try {
            while ((recvMsgSize = in.read(bytebuffer)) != -1) {
                    out.write(bytebuffer, 0, recvMsgSize);
                    System.out.println("The length of a character is received and returned "+bytebuffer.length);
                 }
        } catch (IOException e) {

            System.out.println(e);
        }
                    }
                    } 
```

但下一个问题是我无法在出现的字符串/文本中调出套接字的内容，如下所示：

端口 ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=28000] Siap！！！接受来自 Socket[addr=/172.17.231.254,port=3577,localport=28000] 的连接请求来自 CLIENT /172.17.231.254 和 PORT 3577 线程正在运行... [B@7c6768 java.net.SocketInputStream@1690726 线程成功执行！ ！！接收并返回一个字符的长度 512

请帮助我，谢谢:) GBU 伙计们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:02:25.457

查看开发者文档

> public final String readLine () 自：API 级别 1
> 
> 返回一个字符串，其中包含从此流中可用的下一行文本。一行由零个或多个字符组成，后跟“\n”、“\r”、“\r\n”或流的结尾。该字符串不包括换行符序列。

readLine() 将阻塞并且不会返回，直到它看到换行符等换行符，或者到达流的末尾，这可能是连接丢失时发生的情况。

如果你想使用 readLine() 你需要发送 "Hello....\n" 或者附加一个终止字符以便 readLine() 看到。

# java - bean 中的动态键：Struts 1.3 中的消息

> ID：10451218
> 
> 赞同：3
> 
> 时间：2012-05-04T14:53:56.487
> 
> 标签：java, jsp, struts-1

我正在开发一个使用旧的（但很好的）框架 Struts 1.3 的项目，我正在尝试完成一个简单的任务。

我有一个包含属性的 bean，该属性是对应于属性文件的键。我想用它来回忆适当的翻译。

属性文件中的变量

```
props.myprop.sample=This is my sample property 
```

该属性位于传递给 jsp 的 bean 中，为方便起见，AllProps 具有该属性的 getter，这应该是一个伪代码：

```
<bean:define id="sample" name="AllProps" property="sample" type="java.lang.String"/> // should result in sample = props.myprop.sample

<div><bean:message key="sample"/></div> 
```

哪个应该输出：

```
<div>This is my sample property</div> 
```

但显然导致找不到属性，你能帮我解决这个问题吗？我想尽可能地坚持 Struts 标记，然后是 Jsp 标记和 scriptlet 作为最后一个资源。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:22:30.587

直接来自[文档](http://struts.apache.org/1.x/struts-taglib/tagreference.html#bean%3amessage)：

```
<bean:message> 
```

> 将国际化消息字符串呈现给响应。
> 
> 使用指定的消息键检索指定区域设置的国际化消息，并将其写入输出流。最多可以指定五个参数替换（例如“{0}”）。
> 
> 消息键可以使用 key 属性直接指定，也可以**间接指定，使用 name 和 property 属性从 bean 获取它**。

（强调我的）

所以，你只需要

```
<bean:message name="AllProps" property="sample"/> 
```

# plugins - 如何从Redmine插件添加历史项目

> ID：10451225
> 
> 赞同：1
> 
> 时间：2012-05-04T14:54:11.593
> 
> 标签：plugins, history, redmine, redmine-plugins

我正在尝试为 Redmine 编写一个插件。该插件将允许用户创建代码审查请求。

当用户创建/更新/删除请求时，我想将事件添加到历史记录。

这里有熟悉创建 Journal 对象并将其附加到问题的人吗？

我试着做（使用控制台）

```
is = Issue.find(1234)
jr = Journal.new(:journalized => is)
jr.save 
```

但是 jr.save 返回 false。

请让我知道这样做的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:54:33.190

代表用户创建问题历史记录行（作为评论）：

*逐行编写，以显示操作方法。您可以在 1 行中合并所有这些代码*

```
issue = Issue.find(1234)
user = User.current
journal = issue.init_journal(user, 'My text for history line')
journal.save 
```

# wcf - IDispatchMessageFormatter 未通过 ServiceBehavior 应用

> ID：10451226
> 
> 赞同：0
> 
> 时间：2012-05-04T14:54:12.803
> 
> 标签：wcf

我需要将自定义消息格式化程序应用于服务中的所有操作。

因此，我没有将 OperationBehavior 手动应用于所有操作，而是尝试从 ServiceBehavior 中循环所有操作（我的序列化程序的细节并不重要，只是它实现了 IDispatchMessageFormatter）：

```
public void ApplyDispatchBehavior(ServiceDescription serviceDescription, System.ServiceModel.ServiceHostBase serviceHostBase) {
    foreach (ChannelDispatcher channelDispatcher in serviceHostBase.ChannelDispatchers) {
        foreach (EndpointDispatcher endpointDispatcher in channelDispatcher.Endpoints.Where(e => !e.IsSystemEndpoint)) {
            foreach (DispatchOperation dispatchOperation in endpointDispatcher.DispatchRuntime.Operations) {
                LoggedOperationSerializer serializer = new LoggedOperationSerializer(dispatchOperation.Formatter);
                dispatchOperation.Formatter = serializer;
            }
        }
    }
} 
```

序列化程序似乎设置得很好，没有错误。但是，当我设置断点和调试时，永远不会命中 LoggedOperationSerializer 上的 DeserializeRequest 方法。

相反，如果我在 OperationBehavior 中应用格式化程序，如下所示：

```
public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation) {
    LoggedOperationSerializer serializer = new LoggedOperationSerializer(dispatchOperation.Formatter);
    dispatchOperation.Formatter = serializer;
} 
```

然后 DeserializeRequest 方法按预期命中。

如果我同时应用如图所示的 ServiceBehvior 和 OperationBehavior 并附加调试器，如预期的那样，首先命中显示的第一个代码块，迭代服务上的所有操作，并设置格式化程序。但是，在命中 OperationBehavior 的 ApplyDispatchBehavior 时，上面设置的格式化程序已经“脱落”，并已被默认的 CompositeDispatchFormatter 取代。

我真的不想手动将 OperationBehavior 应用于所有操作以使其正常工作......关于为什么会发生什么的任何想法？

这是使用 WebHttpBinding 以防万一，但我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T15:13:59.070

如果您正在使用`WebHttpBinding`，我假设您也在`WebHttpBehavior`端点中使用 。如果是这样，那么将`WebHttpBehavior`覆盖您在服务行为中添加的格式化程序。

对于WCF中的所有行为，当`ApplyDispatchBehavior`被调用时，它的调用顺序如下：服务行为、契约行为、端点行为、操作行为（这解释了为什么当你使用一个操作行为时它会起作用）。WebHttpBehavior 将设置其格式化程序来处理诸如理解 JSON 输入、映射到 URI 模板等事情。

如果您不想将操作行为添加到服务中的所有操作，您可以使用端点行为，添加*在*`WebHttpBehavior`端点中的 WebHttpBehavior 之后，或者从您仅覆盖的地方派生的端点`ApplyDispatchBehavior`，首先调用基本实现，然后你遍历合约中的所有操作来设置你的`LoggedOperationSerializer`.

# ios - Facebook 应用内以不同的语言显示

> ID：10451227
> 
> 赞同：0
> 
> 时间：2012-05-04T14:54:12.933
> 
> 标签：ios, facebook, localization

我对 facebook-ios-sdk 有一个非常奇怪的问题。客户抱怨以西班牙语显示的应用内对话框，而他们的 Facebook 和手机都没有设置为西班牙语。这发生在多个设备和多个用户/帐户上。

Facebook SDK 应该从 NSLocale 中提取用户的语言/区域设置偏好，对吗？有没有办法设置或测试这个？是否以某种方式在应用内对话框的 HTTP 标头请求中错误地设置了语言？

（如果有影响，请使用 SSO）

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:26:32.113

这显然是 Facebook 级别的问题。您可以在此处跟踪状态：

[http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383](http://developers.facebook.com/bugs/407246299295529?browse=search_4fa410ea79db26337556383)

“使用 Facebook 首次登录时，要求用户授权此应用程序的对话框以看似随机的语言显示。仅当用户通过 Wifi 连接时才会发生。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:06:44.273

您可以查看国家代码：

```
NSLocale *locale = [NSLocale currentLocale];
NSString *countryCode = [locale objectForKey:NSLocaleCountryCode];
NSString *language;
if ([[NSLocale preferredLanguages] count] > 0)
{
    language = [[NSLocale preferredLanguages] objectAtIndex:0];
}
else
{
    language = [locale objectForKey:NSLocaleLanguageCode];
} 
```

# c++ - 将 MySQL 表存储到文件（sqlite？）

> ID：10451232
> 
> 赞同：0
> 
> 时间：2012-05-04T14:54:46.957
> 
> 标签：c++, mysql, sqlite, qt, mysql++

我编写了一个 C++/QT 应用程序，它使用 mysql 数据库存储数据。它使用 mysql++ 库。我现在希望它能够将其数据导出到/从文件中导入。

我可以编写自己的文件格式，但如果可能的话，我想避免这种努力。

是否可以轻松地将 mysql 表导出到文件中并使用 C++ 重新导入该文件？

我听说过 sqlite，但据我所知，从 mysql++ 迁移到 sqlite 并不是那么容易，因为它包括一个完整的数据库后端的切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:01:21.770

您可以使用“加载数据”和“选择 ... INTO OUTFILE”

那应该有很好的表现。您可能无法随心所欲地进一步使用 outfiles。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T14:57:34.120

从/向数据库导出/导入数据的最佳方式是`xml`文件。

# iphone - 获取没有时间部分或时区差异的时间

> ID：10451234
> 
> 赞同：0
> 
> 时间：2012-05-04T14:54:52.963
> 
> 标签：iphone, xcode

我是 iWorld 的 iOS 开发人员。我之前开发过几个 iPhone/iPad 应用程序。我多次无法在 iPhone 上获得正确的时间信息。我认为这是由于本地化。

例如，我有代码可以在今天截断时间。（例如：“05-04-2012 00:00:00”）但是该代码总是在 8 小时前返回到我预期的状态。（例如：“05-03-2012 16:00:00）我工作的代码如下。

```
NSDate *today = [NSDate date];
NSCalendar *calender = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calender components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:today];
today = [calender dateFromComponents:components];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM-dd-yyyy hh:mm:ss"];
NSString *todayString = [formatter stringFromDate:today];
NSLog(@"Today is %@", todayString); 
```

我想听听你解决这个问题。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:21:03.017

将时区设置为 UTC

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    [dateFormatter setTimeZone:timeZone]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T09:19:26.080

我找到了计算正确午夜时间的代码。现在我发现以下代码日志“今天是 05-07-2012 00:00:00”而不是“05-06-2012 16:00:00”

```
NSDate *today = [NSDate date];
NSCalendar *calender = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calender components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:today];
today = [calender dateFromComponents:components];

today = [today dateByAddingTimeInterval:[[NSTimeZone localTimeZone] secondsFromGMT]];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM-dd-yyyy hh:mm:ss"];
NSString *todayString = [formatter stringFromDate:today];
NSLog(@"Today is %@", todayString); 
```

谢谢你。

# c - 通过 ICU4C 进行 Unicode 规范化

> ID：10451240
> 
> 赞同：2
> 
> 时间：2012-05-04T14:55:05.913
> 
> 标签：c, unicode, icu, normalize

我想使用 ICU C 接口规范化字符串。

看着 unorm2_normalize，我有一些问题。

1.  UNormalizer2 实例——完成后如何处理它？

2.  如果缓冲区不够大，无法分解或重组怎么办？检查错误代码是否为U_BUFFER_OVERFLOW_ERROR的正常方法是什么？U_STRING_NOT_TERMINATED_WARNING 是否适用？结果字符串是否以空值结尾？如果返回错误，是否要重新分配内存并重试？重新开始似乎是浪费时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:49:20.627

1.  见[unorm2_close()](http://icu-project.org/apiref/icu4c/unorm2_8h.html#aa8b1599dfe72053c3b1c217aba1d8aac)。请注意，您不应释放通过 unorm2_getInstance() 获取的实例
2.  通常，大多数 ICU API 可以传递一个 NULL 缓冲区和 0 长度作为输入，这将导致 U_BUFFER_OVERLOW_ERROR 和一个填充了所需长度的变量。如果你得到 U_STRING_NOT_TERMINATED_WARNING 这意味着：数据已填充但未终止。

# asp.net-mvc - 给定一个字符串，当附加到我的域时会给我适当的 url，你如何生成链接？

> ID：10451241
> 
> 赞同：0
> 
> 时间：2012-05-04T14:55:06.757
> 
> 标签：asp.net-mvc, razor

给定以下字符串：

```
/MyController/MyAction/4 
```

如何在另一个控制器的操作中生成链接以链接到适当的地址？

如果我执行以下操作：

```
@Html.ActionLink("click", Url.Action(item.Link)) 
// where item.Link is where /MyController/MyAction/4 is stored 
```

我得到一个类似的链接：

```
www.localhost.com/CurrentController/CurrentController/MyController/MyAction/4 
```

我不需要“CurrentController”部分（是的，其中有两个 - 我认为那是因为我正在做一个 @Html.ActionLink 和一个 Url.Action）。

我将如何获得适当的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:00:15.377

如果您已经有`/MyController/MyAction/4`需要存储的路径`item.Link`，您可以自己构建`<a>`标签吗？

```
<a href="@item.Link">Link Text</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:00:36.330

使用[RouteUrl() 方法](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.routeurl.aspx)来实现你想要的。有关更多信息，您也可以查看[此页面](http://msdn.microsoft.com/en-us/library/cc668201.aspx#creating_urls_from_routes)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:59:59.510

我认为您想要的是链接到另一个控制器和操作？

你需要这样做；

```
@Html.ActionLink("Click", "ActionName", new {Controller = "ControllerName"}) 
```

然后你可以添加一些 HtmlAttributes 到；

```
 @Html.ActionLink("Click", "ActionName", new {Controller = "ControllerName"}, new { @class= "className" }) 
```

**编辑**

如果您要传入这个字符串值，那么为什么不直接使用；

```
<a href="@item.Link">Click</a> 
```

# emacs - 如何调整 Emacs 的 compile-goto-error 从编译缓冲区获取的路径？

> ID：10451242
> 
> 赞同：14
> 
> 时间：2012-05-04T14:41:49.623
> 
> 标签：emacs, compilation, build-system

我正在使用 Emacs 23 并遇到以下问题：

我从 Emacs 中运行我们项目的构建系统，例如 Mx compile -> cd /foo/bar && ./build

构建系统现在做了一些魔术，“cd”进入构建过程的某个子目录，然后 gcc 抛出一个错误：

../src/somesource.cc:50 错误：blablabla

现在的问题是 Emacs 找不到那个路径，因为它假定编译过程是在 /foo/bar 中开始的，而不是在 /foo/bar/builddir 中。因此，前导“../”不适用于 Emacs，例如在运行 compile-goto-error 时。有没有办法告诉 Emacs 尝试跳过前导“../”？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T17:55:13.283

最好的解决方案可能是更改构建系统以在更改目录时发出消息。Emacs 寻找

```
Entering directory `...'
... 
Leaving directory `...' 
```

（请参阅`compilation-directory-matcher`变量。如果您的构建系统在更改目录时确实发出消息，但它们不是 Emacs 正在寻找的格式，您可以将新的正则表达式添加到`compilation-directory-matcher`.）

另一种解决方案是更改`compilation-search-path`（这是目录列表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-10T19:57:31.060

有几次我通过 sed 传递 make 的输出来解决。

首先，交互式调试它'编译命令：make | sed 's/x/y/' 。然后将其重新打包为自定义的 emacs 交互功能。

# javascript - 当我将 JS 对象发送到 Node.js 服务器并要求返回相同的对象时，服务器会发回修改后的对象

> ID：10451243
> 
> 赞同：1
> 
> 时间：2012-05-04T14:55:10.027
> 
> 标签：javascript, json, node.js, socket.io

`node.js`我有一个与服务器建立通信的网页。我正在向它发送对象并让它返回它收到的相同对象。但是，返回的对象是不同的——它的所有方法都消失了。

这是显示我在做什么的代码。我发送一个带有对象的事件：

```
editor.getSession().on('change', function(event) {
    socket.emit('modificarCodigo', event);
}); 
```

我像这样返回它：

```
socket.on('modificarCodigo', function(data) {
    socket.broadcast.to(socket.grupo).emit('actualizarCodigo', data);
}); 
```

我怎样才能`node.js`完整地返回我发送给它的对象而不是修改它？我猜我现在看到的行为是设计使然 - 如果这是真的，我该如何改变它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:16:45.230

您不能将函数序列化为 JSON。如果你真的需要发送函数，那么你必须给`.toString()`它们，发送它们，然后`eval`或者`new Function`它们恢复存在，但这是一个冒险的提议......为什么你需要发送方法？

**编辑：** OP 添加了一条评论，他试图做的是通过网络传递和 Ace 编辑器`Range`对象......我认为你最好只发送构建新 Range 对象所需的数据。所以只需发送 startRow、startCol、endRow 和 endCol，然后在线路的另一端您可以执行 new Range(data.startRow, data.startCol, data.endRow, data.endCol)。

作为旁注，可以使用[toJSON](https://developer.mozilla.org/en/JSON#toJSON%28%29_method)方法处理对象的正确序列化（如果您的 js 引擎支持 JSON.stringify/parse）。这是一个例子：

```
function Dude(name, age) {
    this.name = name;
    this.age = age;
}
Dude.prototype = {
    speak: function() { alert('My name is ' + this.name); },
    toJSON: function() {
        return {
            type: 'Dude',
            props: { name: this.name, age: this.age }
        };
    }
};

http.get('http://getadude.com', function(json) {
    var data = JSON.parse(data);

    if(type === 'Dude') data = new Dude(data.props.name, data.props.age);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:58:49.720

在发送之前将您的对象序列化为 JSON，然后对其进行解码。它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:29:58.240

听起来你真的想要 RPC，对于哪个节点有一个很棒的库，叫做 dnode。 [https://github.com/substack/dnode](https://github.com/substack/dnode)

# c - 如何在 C 中从 struct tm 转换为 long int？

> ID：10451247
> 
> 赞同：5
> 
> 时间：2012-05-04T14:55:34.867
> 
> 标签：c, linux

这是一个简单的问题......有没有办法将 a 转换`struct tm ct;`为长整数？这是我的代码的样子：

```
struct tm ct;
    scanf("%d", &ct.tm_sec);
    scanf("%d", &ct.tm_min);    
    scanf("%d", &ct.tm_hour);
    scanf("%d", &ct.tm_mday);
    scanf("%d", &ct.tm_mon);
    scanf("%d", &ct.tm_year); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T14:57:15.710

您可以使用该`mktime()`函数将 a 转换`struct tm`为 a `time_t`，这是一个整数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:02:59.820

你想得到一个 time_t，它表示自 1/1/1970 00:00:00 以来的秒数

使用 mktime()：

time_t mktime ( struct tm * timeptr );

[http://www.cplusplus.com/reference/clibrary/ctime/mktime/](http://www.cplusplus.com/reference/clibrary/ctime/mktime/)

# ios - SecKeyGeneratePair 返回 errSecUnimplemented

> ID：10451249
> 
> 赞同：4
> 
> 时间：2012-05-04T14:55:50.173
> 
> 标签：ios, security-framework

我试图在我的 iOS 应用程序中实现 RSA 加密算法，但是当我尝试生成公钥和私钥对时，该函数返回 errSecUnimplemented 错误。我目前正在使用 5.1 SDK 并以 5.1 为目标。

我可以不使用此功能，还是在尝试生成配对时设置了错误？

这是我的密钥生成代码：

```
SecKeyRef publicKey, privateKey;
CFDictionaryRef parameters;
const void* keys[] = {kSecAttrKeyType, kSecAttrKeyTypeRSA};
int keySize = 1024;
const void *values[] = {kSecAttrKeySizeInBits, &keySize};

parameters = CFDictionaryCreate(kCFAllocatorDefault, keys, values, 2, NULL, NULL);
OSStatus ret = SecKeyGeneratePair(parameters, &publicKey, &privateKey);
if ( ret == errSecSuccess )
{
    NSLog(@"Key success!");
}
else 
{
    NSLog(@"Key Failure! %li", ret);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T23:31:03.027

我已经对其进行了修改，以便为您完成解决方案。1）您需要使用 CFNumberRef 而不是指向 int 的指针作为数值。2）值必须是值，键必须是键-您在“键”和“值”中混合了键和值。

```
SInt32 iKeySize = 1024;
CFNumberRef keySize = CFNumberCreate(kCFAllocatorDefault, kCFNumberSInt32Type, &iKeySize);
const void* values[] = { kSecAttrKeyTypeRSA, keySize };
const void* keys[] = { kSecAttrKeyType, kSecAttrKeySizeInBits };
CFDictionaryRef parameters = CFDictionaryCreate(kCFAllocatorDefault, keys, values, 2, NULL, NULL);

SecKeyRef publicKey, privateKey;
OSStatus ret = SecKeyGeneratePair(parameters, &publicKey, &privateKey);
if ( ret == errSecSuccess )
    NSLog(@"Key success!");
else 
    NSLog(@"Key Failure! %li", ret); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:43:40.487

使用`kCFAllocatorSystemDefault`而不是`kCFAllocatorDefault`return `errSecSuccess`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:01:26.073

这不应该是：

```
const void* keys[] = {kSecAttrKeyType, kSecAttrKeySizeInBits};
int keySize = 1024;
const void *values[] = {kSecAttrKeyTypeRSA, &keySize}; 
```

即，键应该是字典的键，值是值，目前您在键中有一对 (key,value) 对，在值中有一对。

# java - JButton 添加属性

> ID：10451250
> 
> 赞同：2
> 
> 时间：2012-05-04T14:55:54.453
> 
> 标签：java, swing, jbutton

有没有办法获得我们以这种方式声明的属性值？

```
JButton button = new javax.swing.JButton(){
    public int value=0;
}

button.addActionListener(listener);
//in action listener
public void ActionPerformed(ActionEvent evt){

JButton btn = (JButton)evt.getSource();
btn.value =2; //error
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:57:45.647

您不能访问实例本身之外的匿名类的属性/方法。

原因是编译器知道这`btn`是一个 JButton，而不是您的扩展，并且您不能强制转换为该扩展，因为它没有名称。

您需要在单独的文件中创建一个内部类或类并实例化它，例如：

```
static class MyButton extends JButton {
    public int value=0;
}

// ....
MyButton btn = new MyButton();
btn.addActionListener(listener);
// ....

@Override public void actionPerformed(ActionEvent evt){
    MyButton btn = (MyButton)evt.getSource();
    btn.value = 2; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:58:32.193

您可以做的是使用 Component.setName() 至少与您的组件一起保存一个字符串。

# database - 在不覆盖数据库用户的情况下恢复 SQL Server 2005 数据库

> ID：10451261
> 
> 赞同：4
> 
> 时间：2012-05-04T14:56:25.850
> 
> 标签：database, sql-server-2005, database-restore

我有一个需要经常恢复的数据库。

每次我这样做时，所有有权访问数据库的用户都会被删除，我必须再次手动添加它们。

有什么方法可以恢复数据库但用户保持不变或我在恢复之前/之后运行的任何脚本，这样我就不必再次手动添加所有用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:22:18.737

在还原之前，您可以编写用户当前存在的脚本。在对象资源管理器中，展开数据库，展开安全性，突出显示用户节点并单击 f8（对象资源管理器详细信息）。在对象资源管理器详细信息中，选择要保留的用户，右键单击并编写脚本创建到新窗口、剪贴板等。

现在运行还原，还原完成后，从上面运行脚本。如果这一切都发生在同一台服务器上，那么应该可以正常工作，就像我描述的那样。如果这些是不同的服务器，您可能需要先研究同步服务器级登录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T13:19:13.033

在恢复数据库之前，使用此脚本编写登录名和密码脚本：[如何在 SQL Server 实例之间传输登录名和密码](http://support.microsoft.com/kb/918992) 然后，在恢复数据库后，执行创建的脚本以重新创建登录名

# .net - .NET 中的增量压缩

> ID：10451265
> 
> 赞同：9
> 
> 时间：2012-05-04T14:56:35.273
> 
> 标签：.net, compression, delta

有没有人能够在 .NET 环境中执行压缩以在文件之间生成增量。如果可能的话，我想使用这个功能，也许是通过使用 msdelta.dll 中的功能。我也对如何使用其他库（最好是开源的）生成增量感兴趣。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T07:13:55.757

我希望这不是一个太无耻的插件，但是出于我自己的目的，我已经围绕*PatchAPI*和*MSDelta编写了一个包装库。*

该库在 MS-PL 和 DBAD-PL 下获得双重许可，可在[GitHub 上](https://github.com/taspeotis/DeltaCompressionDotNet)获得。

我正在考虑在 NuGet 上发布项目的想法，但目前您可以下载源代码并创建和应用增量。

创建增量应该是不言自明的：

```
var compression = new MsDeltaCompression(); /* or PatchApiCompression(); */
compression.CreateDelta(sourcePath, destinationPath, deltaPath); 
```

同样不言自明（希望）正在应用一个增量：

```
var compression = new MsDeltaCompression(); /* or PatchApiCompression(); */
compression.ApplyDelta(deltaPath, sourcePath, destinationPath); 
```

在 x86 上测试，但 P/Invoke 签名对于 x64 和 ia64 应该同样有效。

如果您还没有决定是使用*PatchAPI*还是*MSDelta*，我的项目会`README.md`尝试（简要地）建议您应该使用哪一个，但[微软的 Delta Compression 的文档中](http://msdn.microsoft.com/en-us/library/bb417345.aspx)有关于*MSDelta*与*PatchAPI*的说明：

> **MSDelta ... 可以创建比其他方法生成的压缩文件小得多的压缩文件**。它与 Windows Vista 一起提供，是先前作为 PatchAPI 发布的下一代技术（将继续得到支持）。

强调我的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-03T20:37:33.863

Fossil SCM 有一个用 C 实现的 delta 压缩算法，我在 C# 上做了一个端口：[https ://github.com/endel/FossilDelta](https://github.com/endel/FossilDelta)

要创建增量，您必须提供`byte[]`源和目标。它返回为`byte[]`，您可以稍后申请。

```
byte[] origin = System.IO.File.ReadAllBytes ("old-file");
byte[] target = System.IO.File.ReadAllBytes ("new-file");
byte[] delta = Fossil.Delta.Create(origin, target); 
```

有了增量，您可以像这样应用原始文件中的更改：

```
byte[] applied = Fossil.Delta.Apply(origin, delta); 
```

我认为值得一提的是，该算法的作者与 SQLite 的作者相同——因此具有一定的可信度。

# java - 尝试在 jQuery + Struts2 中执行 ajax getJson 或 post 操作时，Tomcat7 上出现 500 内部服务器错误

> ID：10451269
> 
> 赞同：0
> 
> 时间：2012-05-04T14:56:41.327
> 
> 标签：java, jquery, ajax, tomcat, struts2

[已解决] 操作名称原来是区分大小写的

我想向服务器发出 ajax 请求以获取 JSON。我正在使用以这种方式配置的 struts2 包

```
<package name="it.polito.ai.e3" namespace=""
    extends="struts-default,json-default">
    <action name="getDay" class="it.polito.ai.e3.GetDayAction" >
        <result name="success" type="json" />
        <result name="error" type="json" />
    </action>
</package> 
```

GetDayAction 类是

```
package it.polito.ai.e3;

import java.util.Date;

import com.opensymphony.xwork2.Action;
import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

@SuppressWarnings("serial")
public class GetDayAction extends ActionSupport
{
private String startDate;

public String execute()
{
    try
    {
        System.out.println("Ciao");
        System.out.println(startDate);
    }
    catch (Exception e)
    {
        e.printStackTrace();
        return Action.ERROR;
    }

    return Action.SUCCESS;
}

public String getStartDate()
{
    return startDate;
}

public void setStartDate(String startDate)
{
    this.startDate = startDate;
}

} 
```

jQuery post 块是

```
$(function() {
    $.post('getday.action', document.getElementById('startDate').innerHTML,
        function(data) {

        });  
}); 
```

如果获取 jQuery 块是

```
$(function() {
    $.getJSON('getday.action', document.getElementById('startDate').innerHTML,
        function(data) {

        });  
}); 
```

`document.getElementById('startDate').innerHTML`获取格式化为字符串的日期。

当它通过 ajax 执行 get 或 post 时，Tomcat 给了我 500 内部服务器错误和这个堆栈跟踪

```
java.lang.NullPointerException
org.apache.struts2.impl.StrutsActionProxy.getErrorMessage(StrutsActionProxy.java:69)
com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:185)
org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:500)
org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434) 
```

Tomcat7 控制台不显示任何内容，System.out.println() 或其他消息均不显示。

我不知道我做错了什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:22:43.893

函数的`data`参数`$.post()/$.getJSON()`要么是一个对象，要么是一个 URL 参数字符串；您不能只传递一个值并期望它知道如何处理它。所以，要么：

```
$.getJSON('getday.action', { yourparam : document.getElementById('startDate').innerHTML},
    function(data) {

    }); 
```

或者

```
$.getJSON('getday.action', 'yourparam=' + document.getElementById('startDate').innerHTML},
    function(data) {

    }); 
```

# ruby-on-rails - Heroku 中的 Wicked-pdf 超时

> ID：10451273
> 
> 赞同：3
> 
> 时间：2012-05-04T14:56:53.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wicked-pdf

我的 pdf 在本地正确生成，有时在我的 Heroku 应用程序中生成，但有时它们会超时，我会看到这个错误

```
2012-05-04T14:53:33+00:00 app[web.1]: Started GET "/orders/125/invoice_pdf.pdf" for 10.87.41.73 at 2012-05-04 14:53:33 +0000
2012-05-04T14:54:03+00:00 heroku[router]: Error H12 (Request timeout) -> GET www.printavo.com/orders/125/invoice_pdf.pdf dyno=web.1 queue= wait= service=30000ms status=503 bytes=0
2012-05-04T14:54:03+00:00 heroku[nginx]: 10.87.41.73 - backerm2 [04/May/2012:14:54:03 +0000] "GET /orders/125/invoice_pdf.pdf HTTP/1.1" 503 607 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19" www.printavo.com
2012-05-04T14:54:03+00:00 heroku[nginx]: 127.0.0.1 - backerm2 [04/May/2012:14:54:03 +0000] "GET /orders/125/invoice_pdf.pdf HTTP/1.0" 503 607 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19" www.printavo.com
2012-05-04T14:54:05+00:00 heroku[router]: Error H12 (Request timeout) -> GET www.printavo.com/customers/new dyno=web.1 queue= wait= service=30000ms status=503 bytes=0 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:04:47.503

经过进一步审查。您不需要 2 个网络测功机。只需确保将 CSS 包含在 application.html.erb 文件夹和您的 file_name.pdf.erb 中即可。

这是我的 application.html.erb 文件。

```
<% if request_from_pdfkit? %>
            <!-- css for pdf -->
                <style type="text/css">
                    <%= File.read(Rails.root.join("public","stylesheets","invoice_pdf.css.scss"))%>
                    <%= File.read(Rails.root.join("public","stylesheets","app.css.scss"))%>
                </style>
            <% end %> 
```

任何然后我的 .pdf.erb 文件

```
<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>
    <style type="text/css">
        <%= Printavo::Application.assets["invoice_pdf.css.scss"].to_s.html_safe %>
        <%= Printavo::Application.assets["app.css.scss"].to_s.html_safe %>
        body{ font-family: arial !important;}
    </style>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:32:08.407

2 web dynos 修复了这个问题或者使用了delayed_jobs gem。还要确保在生成的 PDF 中包含 CSS。

# php - 多条正文线...梨（php）邮件

> ID：10451275
> 
> 赞同：-1
> 
> 时间：2012-05-04T14:57:03.307
> 
> 标签：php

我正在使用梨邮件，它可以发送，但即使 if 语句变量为空，我也没有收到所有 $bodycopy 行，我仍然应该看到我不是的顶部和底部破折号。我的多个正文内容的格式/编码是否关闭？

// 设置电子邮件

```
 $Bodycopy = "This information was submitted via the solocup.com website and sent to you because of the location 
identified by the user. If this has reached you in error, please forward this email to ----";
    $Bodycopy. "<br>----------------------------------------------------------------------------------------------<br><br>";

if ($uxRequestType != "")      $Bodycopy. "What kind of information do you need? : " .$uxRequestType. "<br>";   
    if ($uxConsumerBusiness != "") $Bodycopy. "What type of customer or vendor are you? : " .$uxConsumerBusiness. "<br>";
    if ($uxGlobalLocation != "")   $Bodycopy. "Global Location : " .$uxGlobalLocation. "<br>";
    if ($uxCompany != "")          $Bodycopy. "Company : " .$uxCompany. "<br>";
    if ($uxFirstName != "")        $Bodycopy. "First Name : " .$uxFirstName. "<br>";
    if ($uxLastName != "")         $Bodycopy. "Last Name : " .$uxLastName. "<br>";
    if ($uxTitle != "")            $Bodycopy. "Title : " .$uxTitle. "<br>";
    if ($uxEmail != "")            $Bodycopy. "Email : " .$uxEmail. "<br>";
    if ($uxAddress != "")          $Bodycopy. "Address : " .$uxAddress. "<br>";
    if ($uxCity != "")             $Bodycopy. "City : " .$uxCity. "<br>";   
    if ($uxState != "")            $Bodycopy. "State : " .$uxState. "<br>";
    if ($uxZip != "")              $Bodycopy. "Zip/Postal Code : " .$uxZip. "<br>";
    if ($uxPhone != "")            $Bodycopy. "Phone : " .$uxPhone. "<br>";
    if ($uxFax != "")              $Bodycopy. "Fax : " .$uxFax. "<br>";
    if ($uxProductDesc != "")      $Bodycopy. "UPC or product description : " .$uxProductDesc. "<br>";

    $Bodycopy. "<br>----------------------------------------------------------------------------------------------<br><br>";

    if ($uxComment != "")          $Bodycopy. "Comments : <br>" .$uxComment. "<br>";

$Bodycopy. "<br><br>"; 
```

// 处理电子邮件

// 邮件服务器信息...

```
 $from = $SendTo;
    $to = "Do Not Reply <----@---->";
    $bcc = "--@---";
    //$to = "Do Not Reply <---@-->";
    $subject = "--- Contact : " . $uxGlobalLocation;
    $body = $Bodycopy;
    $host = "-----";
    $port = "25";
    $username = "donotreply@---";
    $password = "----";

    $headers = array ('From' => $from,
    'To' => $to,
    'Bcc' => $bcc,
    'Subject' => $subject);
    $smtp = Mail::factory('smtp',
    array ('host' => $host,
     'auth' => true,
     'port' => $port,
     'username' => $username,
     'password' => $password));

    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
    echo("<p>" . $mail->getMessage() . "</p>");
    } else {
    header ('Location: /index.php?option');
    exit();
    //echo("<p>Message successfully sent!</p>");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:05:06.777

第一步 ：

尝试更换

```
 $Bodycopy. 
```

经过

```
 $Bodycopy.= 
```

在你所有的线上。

# python - 使用 twistd 运行高速公路应用程序

> ID：10451276
> 
> 赞同：2
> 
> 时间：2012-05-04T14:57:12.493
> 
> 标签：python, twisted, twistd, autobahn

我在 Twisted 上使用 autobahn lib 开发了一个 websocket 服务器。现在我想用 twistd 将它作为守护进程运行。如果是简单的 TCP 服务器，我会这样做：

```
application = service.Application("someapp")  # create the Application
someService = internet.TCPServer(port, someFactory) # create the service
someService.setServiceParent(application) 
```

在该示例中，我使用 TCPServer 类而不是 reactor.listenTCP 函数。

在高速公路 api 参考中，我发现只有 listenWS 函数（如 TCP 服务器的 listenTCP），而没有关于 WSServer 类的内容。

所以我的问题是如何让我的应用程序与 twistd 一起工作？也许我应该实现我自己的服务 WSServer 类来扩展扭曲的服务类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:15:25.003

是的。创建自己的服务。`startService`在其方法中调用listenWS 。在方法中调用shutdown`stopService`方法。

# groovy - 将参数复制到 Groovy 类中的属性的 Groovy 方法是什么？

> ID：10451278
> 
> 赞同：2
> 
> 时间：2012-05-04T14:57:15.757
> 
> 标签：groovy, constructor

给定一个具有属性和构造函数的对象，我希望将构造函数参数复制到属性中，然后在构造函数中做一些额外的工作。

```
import groovy.transform.TupleConstructor

@TupleConstructor
class Thing{
    def one
    def two

    public Thing(one, two){
       doSomething()
    }

    def doSomething(){
        println "doing something with one : $one and two: $two"
    }
}

println new Thing(1, 2).dump() 
```

如果我在构造函数中什么都不做，这将成功地将 args 复制到属性中，但是如果我在构造函数中调用“doSomething()”，则不会复制属性。

我正在寻找将 args 复制到属性的“The Groovy”方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:24:03.323

正如 tim_yates[提到](https://stackoverflow.com/a/10451509/581845)的，如果您定义了另一个构造函数，则 TupleConstructor AST 转换不会做任何事情（您可以责怪[这行](https://github.com/groovy/groovy-core/blob/05b9f3be0c6d7b74a99e05113e4c3cc083e12e9d/src/main/org/codehaus/groovy/transform/TupleConstructorASTTransformation.java#L104)代码 =P）。如果您*需要*在对象的构造中运行一些其他代码，您可以将其添加到静态工厂方法中并直接使用它而不是元组构造函数：

```
import groovy.transform.TupleConstructor

@TupleConstructor
class Thing {
    def one
    def two

    def doSomething(){
        println "doing something with one : $one and two: $two"
    }

    static create(...args) {
        def thing = new Thing(*args)
        thing.doSomething()
        thing
    }
}

println Thing.create(1, 2).dump() 
```

请注意，我使用可变参数静态方法来接收任意数量的参数，然后使用这些参数调用元组构造函数（为此使用了“spread”（`*`）运算符）。

不幸的是，TupleConstructor AST 转换似乎没有将元组构造函数添加为私有的选项，这在这种情况下很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T15:10:20.457

如果您使用`TupleConstructor`，如果您定义了自己的构造函数，它将不会运行。

并且由于您已经定义了一个重复的构造函数，`TupleConstructor`它将在字节码中生成，即使这样做`@TupleConstructor( force=true )`也无济于事，因为您只会得到一个`java.lang.ClassFormatError: Duplicate method name&signature in class file Thing`

目前我能想到的最好的方法是：

```
class Thing{
    def one
    def two

    public Thing( Map params ){
       this.class.declaredFields.grep { !it.synthetic }.name.each { name ->
         this[ name ] = params[ name ]
       }
       doSomething()
    }

    def doSomething(){
        println "doing something with one : $one and two: $two"
    }
}

println new Thing(one:1, two:2).dump() 
```

尽管我可能缺少更好的方法

# jquery - 地理位置 谷歌地图 链接 jQuery

> ID：10451282
> 
> 赞同：1
> 
> 时间：2012-05-04T14:57:30.827
> 
> 标签：jquery, html, google-maps-api-3

当我点击手机上的链接时，我想提示用户是否允许检测位置，如果允许，打开谷歌地图，其路线从当前位置开始到结束目的地。

这就是我所拥有的，但是当我单击该链接时，它会转到备用默认链接。

```
<a class="geo" href="http://maps.google.com/maps?ll=40.822419,-73.993124">Get Directions</a>

$("a.geo").click(function(e)) {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(getLoc, handle_errors);
    }
    e.preventDefault();
});

function getLoc(position) {
    var geoLat = position.coords.latitude;
    var geoLon = position.coords.longitude;
    var gmapLink = "http://maps.google.com/maps?saddr=" + geoLat + "," + geoLon + "&daddr=40.822419,-73.993124";
    $("a.geo").attr("href", gmapLink);
} 
```

用户单击链接后，如何将 href 替换为用户位置的新链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:01:57.220

替换更改`href`属性的行：

```
$("a.geo").attr("href", gmapLink); 
```

带有重定向：

```
window.location.assign(gmapLink); 
```

`e.preventDefault()`移动块内部也是值得的`if (navigator.geolocation)`，这样如果没有可用的地理位置，用户仍然可以访问谷歌地图并可以自己插入他们的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:18:05.153

以下对我有用。请注意，我将上下文代理到 getLoc 函数，因此 $(this) 仍然是我们在获取回调时按下的链接，并添加了一个单击触发器来实际单击该链接。另一种解决方案是使用 window.location。

```
$("a.geo").click(function(e) {               
    if (navigator.geolocation) {
        e.preventDefault();
        navigator.geolocation.getCurrentPosition(
             $.proxy( getLoc, $(this) )                    
            , handle_errors);          
    }
});

function getLoc(position) {                     
    var geoLat = position.coords.latitude;
    var geoLon = position.coords.longitude;
    var gmapLink = "http://maps.google.com/maps?saddr=" + geoLat + "," + geoLon + "&daddr=40.822419,-73.993124";        
    $(this).attr("href", gmapLink);
    $(this).trigger('click');
} 
```

# android - Android中的缓存管理

> ID：10451285
> 
> 赞同：0
> 
> 时间：2012-05-04T14:57:37.747
> 
> 标签：android, caching

我制作了一个从 SOAP 服务获取数据的 Android 应用程序。实际上，我的应用程序有很多来自服务器端的调用。在调用 web 服务后，我在 listview 中填充数据。我的应用程序中有多个类别，如果我单击任何类别，它的子类别会填充并将该子类别绑定到 listview 中。如果我单击和子类别，另一个称为的 Web 服务将检索与子类别相关的文件。所以这对我来说很烦人，每次服务都会调用。它需要大量的带宽。我读过缓存管理。请给一些关于缓存管理的想法。我可以使用 CacheManager 类吗？我应该怎么办 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:30:25.970

显然 ICS 这些天在 HttpUrlConnection 上有响应缓存，但我从未使用过它，您可以在此处阅读有关如何在 ICS 中启用它的信息[http://android-developers.blogspot.co.uk/2011/09/androids-http-clients .html](http://android-developers.blogspot.co.uk/2011/09/androids-http-clients.html)。

这里还有一个响应缓存的反向端口[https://github.com/candrews/HttpResponseCache](https://github.com/candrews/HttpResponseCache)

但是，我不会直接在网络请求之后绑定数据，而是将其放入 SQLite 数据库，然后从游标绑定。您可以在此处[http://www.youtube.com/watch?v=xHXn3Kg2IQE](http://www.youtube.com/watch?v=xHXn3Kg2IQE)查看有关此内容的 Google IO 演示文稿，该演示文稿应该为您提供有关如何正确执行此操作的一些好主意。

希望有帮助。

# sql - 如何根据表中的 IP 地址列表验证用户的 IP 地址？

> ID：10451286
> 
> 赞同：2
> 
> 时间：2012-05-04T14:57:39.447
> 
> 标签：sql, sql-server, tsql, stored-procedures

IP 地址以下列任何一种方式存储在我的表中。

```
192.12.34.12
192.12.#.12
192.#.34.12 
```

现在在我的应用程序中，我想通过使用 .net 代码捕获登录用户的 IP 地址来自动验证用户 IP 地址。

现在如果用户 IP 是

```
192.12.34.12
192.12.45.12

192.56.34.12-- it should be valid.
191.12.34.12-- Invalid 
```

如何创建一个 SQL 查询或一个存储过程来验证登录用户的 IP 地址与此表的关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:04:37.023

尝试使用`LIKE`运算符，如下所示：

```
SELECT *
FROM IPRecords
WHERE @UsersIp like replace(IP, '#', '%') 
```

但是，如果表中有很多记录（它不能使用任何索引），这种方法在性能方面可能会有很大问题。

如果性能确实是一个问题，另一种方法可能是：

*   将 IP 拆分为四个数字列
*   用于`null`表示通配符（例如，您的最后一条规则将变为`192, null, 34, 12`）
*   在客户端，将 IP 拆分为相应的 4 部分，并使用如下条件：

    `WHERE (IP1=@IP1 OR IP1 is null) AND (IP2=@IP2 OR IP2 is null) AND ...`

这样，我认为您可以在需要时使用四列上的索引来加快速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T15:15:18.133

您可以使用 PARSENAME 函数将 IP 地址值拆分为四个部分并分别进行比较。

*创建和填充测试数据脚本*：

```
CREATE TABLE ipaddresses
( 
    ip VARCHAR(20) NOT NULL
);

INSERT INTO ipaddresses (ip) VALUES
    ('192.12.34.12'),
    ('192.12.#.12'),
    ('192.#.34.12'); 
```

# 情景#1

```
DECLARE @userip VARCHAR(20)
SET     @userip = '192.56.34.12'

;WITH ips AS
(
    SELECT  REPLACE(ip, '#', '%') AS ip
    FROM    ipaddresses
)
SELECT  COUNT(ip) AS validcount
FROM    ips
WHERE   PARSENAME(@userip, 1) LIKE PARSENAME(ip, 1)
AND     PARSENAME(@userip, 2) LIKE PARSENAME(ip, 2)
AND     PARSENAME(@userip, 3) LIKE PARSENAME(ip, 3)
AND     PARSENAME(@userip, 4) LIKE PARSENAME(ip, 4);

VALIDCOUNT
----------
    1 
```

# 情景#2

```
DECLARE @userip VARCHAR(20)
SET     @userip = '191.12.34.12'

;WITH ips AS
(
    SELECT  REPLACE(ip, '#', '%') AS ip
    FROM    ipaddresses
)
SELECT  COUNT(ip) AS validcount
FROM    ips
WHERE   PARSENAME(@userip, 1) LIKE PARSENAME(ip, 1)
AND     PARSENAME(@userip, 2) LIKE PARSENAME(ip, 2)
AND     PARSENAME(@userip, 3) LIKE PARSENAME(ip, 3)
AND     PARSENAME(@userip, 4) LIKE PARSENAME(ip, 4);

VALIDCOUNT
----------
   0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:01:19.573

您可以做一个声明，在每个位置（点之间）用“#”替换访问者 IP 的数字，并执行常规的 WHERE 子句。因此，您会得到一个带有 where 子句的语句，其中包含五个比较（一个用于直接匹配，四个用于每个位置的替换 #）。

您可以使用 CHARINDEX 来查找点，并使用 SUBSTRING 来构建比较 varchars。

# iphone - iPad：UIButton 需要多次点击尝试才能捕捉到动作

> ID：10451289
> 
> 赞同：2
> 
> 时间：2012-05-04T14:57:44.983
> 
> 标签：iphone, objective-c, ios, ipad, ios-universal-app

我正在开发一个通用应用程序，其中有一个 UIButton 可以很好地与 iPhone 配合使用，但是当我在 iPad 中单击它时，它需要多次单击尝试才能发生触摸事件。

例如，在点击 5-6 次后，它会执行点击事件。

下面是 UIButton 代码。请帮忙。

```
UIView *footer = [[[UIView alloc] initWithFrame:(CGRectMake(0, 0, self.tableView.frame.size.width, 54))] autorelease];
float buttonWidth = (int)((self.tableView.frame.size.width - 12 - 12) / 3);
float buttonHeight = 44;

if (clientState.Devicetype == 1) // 1=Ipad
    buttonHeight = 90;
cash = [[UIButton buttonWithType:UIButtonTypeRoundedRect] retain];

cash.frame = CGRectMake(6, 10, buttonWidth, buttonHeight); 
[cash setTitle:@"Cash" forState:UIControlStateNormal];
[cash setTitleColor:[UIColor lightGrayColor] forState:UIControlStateDisabled];
[cash addTarget:self action:@selector(handleCash:) forControlEvents:UIControlEventTouchUpInside];
cash.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin;

if (clientState.Devicetype == 1) // 1=Ipad
{
    cash.titleLabel.font = [UIFont systemFontOfSize:28];    
}

[footer addSubview:cash];

self.tableView.tableFooterView = footer; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:05:31.030

您应该检查以确保您的按钮大小正确：

[现金大小ToFit]

我经历过，如果其他视图阻止了它（并且您单击按钮的该部分，它不会触发事件），它将需要多次单击，因为您最终按下了未被覆盖的按钮。因此，请确保按钮顶部没有其他框架/边界，并确保您的按钮大小正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:11:58.480

I agree with @Inturbidus that it's probably another transparent view covering part of the button. I find the best way to troubleshoot this is to change the background color on all my other views (scrollviews, etc) to make sure they are behaving like I think they are. Sometimes it will surprise you when you see where they are actually positioned with background color turned on.

# c# - 在 datagridview 中添加新行

> ID：10451296
> 
> 赞同：0
> 
> 时间：2012-05-04T14:58:09.360
> 
> 标签：c#, winforms, datagridview

我想将新行添加到gridview。每个单元格的值来自底部的空白单元格。如何获取单元格的值？

```
private void AddRow_Click(object sender, EventArgs e)
    {
        DataTable dt = ds.Tables["test"];
        DataRow dr = dt.NewRow();
        // not sure how to add
    } 
```

![图片](../Images/a6232969608fdcbca7e5e941a654d7eb.png) 另请注意，列中有一个复选框。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:47:16.640

代码可以使用

```
//define datatable (with all columns you want to have)...
  DataRow dr;
  int lastRow = this.dataGridView1.Rows.Count-2;
  for(int i=0;i<dataGridView1.Columns.Count; i++)
  {
     // grab the values from the last row cells.
     dr[i] = dataGridView1[i, lastRow].Value;
   }
     dataTable.Rows.Add(dr); 
```

自爱它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T01:32:00.087

```
DataTable myTable = new DataTable();
DataColumn values = new DataColumn("Test");
myTable.Columns.Add(values);
DataRow rd = myTable.NewRow();
rd["Test"] ="";
myTable.Rows.Add(rd);
datagridview1.DataSource = myTable; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T15:18:22.700

您可以使用 Add 方法将 Rows 添加到数据表中。

```
dt.Rows.Add(dr); 
```

您可以使用重载的括号访问这些值。

```
dt.Rows[a][b] 
```

会给你某行某列的值

要获取 Checkbox 的值，您可以将从 dt.Rows[a][b] 检索到的对象转换为复选框，然后获取 Checked 属性的值。

```
((CheckBox)dt.Rows[a][b]).Checked 
```

希望这可以帮助，

马特

# security - 对整个证书链进行 OCSP 吊销检查

> ID：10451303
> 
> 赞同：8
> 
> 时间：2012-05-04T14:58:18.540
> 
> 标签：security, ssl-certificate, ocsp, certificate-revocation

当你请求 OCSP 服务器检查证书的吊销状态时，它会自动检查整个链的吊销状态吗？

即：如果它说证书是“好”的，那么这是否意味着整个链条都是好的？

我阅读了规范：[http ://www.ietf.org/rfc/rfc2560.txt](http://www.ietf.org/rfc/rfc2560.txt)

但我似乎仍然不清楚。

维基百科确实提到了链式 OCSP 请求：

[http://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol](http://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T15:12:35.623

OCSP 响应者将仅检查 OCSP 请求中指定的特定证书的状态。响应者将忽略链的其余部分。

浏览器可以选择发送多个 OCSP 请求，以便在遍历链时检查每个证书，但目前这在不同供应商之间以依赖于浏览器的方式实现，并且浏览器将缓存中间件这一事实进一步混淆由任意 SSL 服务器提供的证书，并在链中将它们重新用于不同的叶证书。一些浏览器甚至会尝试从第三方来源自动下载最新的中间体，即使 SSL 服务器发送的是旧的中间体。但是，应该注意的是，一般（目前）中间证书大多没有设置为具有 OCSP 信息，因此无论如何它们不太可能是 OCSP 可检查的。

在相关的说明中，规范中有一个新部分允许浏览器在同一个 HTTP 帖子中请求多个 OCSP 检查——目的是允许与叶子一起检查中间体——但尚不支持这很可能仅在使用 OCSP 装订（Apache 2.4+ 等）的服务器上受支持，否则在没有装订的情况下，OCSP 响应器上的中间证书负载可能会使其直接崩溃。（如果中间证书签署了数十万个叶子，想象一下如果没有对装订将带来的分布式缓存的广泛支持，撤销请求会受到多大的打击）。

当然，OCSP 无法检查根证书。它们是自己签名的，所以如果信任消失了，就无处可寻，你只需要从客户端删除根证书。

# iphone - 使用 openSSL 进行 RSA 解密

> ID：10451305
> 
> 赞同：0
> 
> 时间：2012-05-04T14:58:23.550
> 
> 标签：iphone, objective-c, ios, openssl, rsa

我对 RSA 加密和 Base 64 编码文本解密有疑问。当我直接解密加密文本（unsigned char *）时，一切正常，我得到正确的结果。但是当我进行 base64 编码时，openssl 无法解密数据，尽管 base64 解码的数据与加密数据完全相同：

例如（第一个是加密结果和第二个base 64解码结果。直接解码第一个char *效果很好。）

加密 - ßÁ¨£®Òz>Ô‹n.€Ö∫BÔ–∂ü∏ÕD⁄UÖáµ)ûKufi wÆ&_è”eëõ~gK∂¶$kŸƒ∫ª`ÔfΩ˙˛{∆_MªÔëbP QÂ¶FL±Ü;! ü•◊s>Ä§Δ◊⁄≤ò˙ˇCWôVÂzôzíö≤ÙU¶?⁄l[*H?o\ñ>ƒ<'4mœ“Lr Íhh

解码字符串 - ßÁ¨£®Òz>Ô‹n.€Ö∫BÔ–∂ü∏ÕD⁄UÖáµ)ûKufi wÆ&_è”eëõ~gK∂¶$kŸƒ∫ª`ÔfΩ˙˛{∆_MªÔëbP QÂ¶FL±Ü; !ü•◊s>Ä§Δ◊⁄≤ò˙ˇCWôVÂzôzíö≤ÙU¶?⁄l[*H?o\ñ>ƒ<'4mœ“Lr Íhh

代码：

```
+(NSString *) rsaEncryptedStringFromText: (NSString *) text
{
const char *message = [text UTF8String];

NSLog(@"message - %s", message);

int bufSize;

NSString *keyFilePath = [[NSBundle mainBundle] pathForResource:@"publicKey" ofType:@"pem"];

FILE *keyfile = fopen([keyFilePath UTF8String], "r");

RSA *rsa = PEM_read_RSA_PUBKEY(keyfile, NULL, NULL, NULL);

if (rsa == NULL)
{
    return nil;
}

int key_size = RSA_size(rsa);

unsigned char *encrypted = (unsigned char *) malloc(key_size);

bufSize = RSA_public_encrypt(strlen(message), (unsigned char *) message, encrypted, rsa, RSA_PKCS1_PADDING);

if (bufSize == -1)
{
    RSA_free(rsa);
    return nil;
}

NSLog(@"encrypted - %s", encrypted);

NSData *encryptedData = [NSData dataWithBytes:encrypted length:strlen((const char *)encrypted)];

NSString *base64 = [encryptedData base64Encoding];

RSA_free(rsa);

return base64; 
```

}

```
+(NSString *) rsaDecryptToStringFromText: (NSString *) text
{
//NSLog(@"text - %@", text);

NSData *decodedData = [NSData dataWithBase64EncodedString: text];

unsigned char* message = (unsigned char*) [decodedData bytes];

NSLog(@"decoded string - %s", message);

RSA *privKey = NULL;
FILE *priv_key_file;
unsigned char *ptext;

NSString *keyFilePath = [[NSBundle mainBundle] pathForResource:@"privateKeyPair" ofType:@"pem"];

priv_key_file = fopen([keyFilePath UTF8String], "rb");

ERR_print_errors_fp(priv_key_file);

privKey = PEM_read_RSAPrivateKey(priv_key_file, NULL, NULL, NULL);

int key_size = RSA_size(privKey);
ptext = malloc(key_size);

int outlen = RSA_private_decrypt(key_size, (const unsigned char*)message, ptext, privKey, RSA_PKCS1_PADDING);

if(outlen < 0) return nil;

RSA_free(privKey);

return [NSString stringWithUTF8String: (const char *)ptext]; 
```

}

Base 64 编码-解码是这样完成的：

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/21689-base-64-string-help.html#post98080](http://www.iphonedevsdk.com/forum/iphone-sdk-development/21689-base-64-string-help.html#post98080)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-11T10:55:38.553

主要问题出在 base64 编码+解码类中。切换到[QSutilities](https://github.com/mikeho/QSUtilities)，一切正常。

# php - php解析数组值

> ID：10451306
> 
> 赞同：1
> 
> 时间：2012-05-04T14:58:24.480
> 
> 标签：php, arrays, parsing

我在数组方面不是很好，所以这可能很简单，但不适合我！我通过 POST 获取一组值，我需要解析它们并将值存储在表中。我应该如何使用经典解析，例如：

```
foreach($array as $a) {
  $text = $a->text;
  $name = $a->user->name;
} 
```

等来解析一个看起来像这样的数组：

```
[item] => Array
        (
            [tags] => Array
                (
                    [0] => Bluetooth
                    [1] => WiFi
                    [2] => USB
                )

        )

This is the entire POST array:

Array
(
    [prodid] => 
    [Submit] => Save
    [productcode] => 797987
    [cat_id] => 66
    [brand] => Fysiomed
    [name] =>  asdc asdc asd c
    [productnew] => yes
    [item] => Array
        (
            [tags] => Array
                (
                    [0] => Bluetooth
                    [1] => WiFi
                    [2] => USB
                )

        )

    [size] => 1
    [barcode] => 7979871
    [price] => 233.00
    [priceoffer] => 0.00
    [stock] => 50
    [weight] => 0.30
    [orderby] => 1
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:08:21.523

```
if(isset($_POST) && !empty($_POST)) {
  foreach($_POST as $key => $value) {
    if($key == 'item') {
      echo $value[$key]['tag'][0]. '<br>';
      echo $value[$key]['tag'][1]. '<br>';
      echo $value[$key]['tag'][2]. '<br>';
    } 
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:23:25.880

```
if( isset($_POST['item']) && isset($_POST['item']['tags']) ){
  foreach($_POST['item']['tags'] as $tag){
    //do stuff...e.g.
    echo $tag;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:36:59.437

看起来你的数组是这样的，检查一下

```
$array = array( "item" => array( "tags" => array("Bluetooth", "Wifi", "USB" ) ) );
var_dump($array); 
```

你会看到这样的东西

```
array(1) {
  ["item"]=>
  array(1) {
    ["tags"]=>
    array(3) {
      [0]=>
      string(9) "Bluetooth"
      [1]=>
      string(4) "Wifi"
      [2]=>
      string(3) "USB"
    }
  }
} 
```

现在解析这个数组，

```
foreach($array as $in => $val) {
    // as $array has key=>value pairs, only one key value pair
    // here $in will have the key and $val will have the value
    // $in will be "item"
    print $in; // this will print "item"
    foreach($val as $in2 => $val2 ){
        // only one key : "tags"
        print $in; // this will print "tags"
        print $val2[0];  // this will print "Bluetooth"
        print $val2[1];  // this will print "Wifi"
    } 
} 
```

我希望这可以消除您对数组的怀疑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:01:41.153

你只是想把文字拿出来吗？试试这个。

```
foreach($array['item']['tags'] as $tag) {
   $text = $tag;
} 
```

# python - 在 Python 中使用 optparse 定义变量

> ID：10451307
> 
> 赞同：1
> 
> 时间：2012-05-04T14:58:27.027
> 
> 标签：python, optparse, optionparser

我很好奇如何使用 optparse 设置变量。我这样运行程序；

程序名.py -dc:\users\\etc\etc\etc

我希望能够使用 -d C:\Users\\etc\etc 来填充一个名为“path”的变量，我稍后会在程序中使用它。这可以做到吗？这是我拥有的选项解析器代码。

我稍后调用 Path 变量，我用它来填充字典。

我得到的错误是：

E:>japp_id.py -d "C:\Users\\AppData\Roaming\Microsoft\Windows\Recent\ AutomaticDestinations" Traceback（最近一次调用最后一次）：文件“E:\japp_id.py”，第 30 行，用于os.listdir(path) 中的 ids: NameError: name 'path' is not defined

```
try:
    import os
    import sys
    import urllib2
    from BeautifulSoup import BeautifulSoup
    from optparse import OptionParser
except ImportError:
    print 'Imports not installed'
    sys.exit()

def main():
usage = "usage: %prog [options] arg1 arg2"
parser = OptionParser()
parser.add_option("-d", "--default", action="callback", type="string", dest="dpath")

(opts, args) = parser.parse_args()

if opts.dpath == None:
    parser.print_help()
    parser.error("You must supply a -d for dpath")
if not os.path.isfile(opts.dpath):
    parser.error("%s does not exist" % opts.dpath)
    if __name__ == "__main__":
        main()

appIDlist = []
for ids in os.listdir(path):
        appid = "%s" % (ids).rstrip('.automaticDestinations-ms')
        appIDlist.append(str(appid))

f = urllib2.urlopen("http://www.forensicswiki.org/wiki/List_of_Jump_List_IDs")
s = f.read()
soup = BeautifulSoup(''.join(s))
rows = soup.findAll('tr')

appIDdictionary = dict()        #create an empty dictionary to allow lookups {'appID':'processName'}
for tr in rows:                 #iterate through every row in the table
        cols = tr.findAll('td', limit=2)        #get the first two data chunks (<td>'s)
        appID = str(cols[0]).rstrip('</td>').lstrip('<td>')     #clean up formatting
        processName = str(cols[1]).rstrip('</td>').lstrip('<td>')       #clean up formatting
        appIDdictionary[appID] = processName     #add the pair to the dictionary

#iterate through list of appids pulled from windows user profile, look them up in the dictionary, and print the result
for id in appIDlist:
        if id in appIDdictionary:
                print appIDdictionary[id]# + " is " + ids.rstrip('.automaticDestinations-ms')
        else:
                print 'Unable to find ' + id + ' in dictionary.'
f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:03:42.830

[来自 python 文档](http://docs.python.org/release/3.0.1/library/optparse.html)：

```
parser.add_option("-f", "--file", dest="filename",
                  help="write report to FILE", metavar="FILE") 
```

该`dest`参数是您的路径存储到的变量的名称。随后使用`opts.filename`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:03:36.110

你的意思是`path = opts.dpath`？

然后`os.listdir(path)`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:12:45.857

您可能没有将其传入：您需要调用一个函数 with`opts`和 access`opts.dpath`或 do `myfunc(opts.dpath)`。

也许。您的代码实际上并没有告诉我们问题出在哪里。

**更新：**

是的，你想要`for ids in os.listdir(opts.dpath)`大约 30 行。

# javascript - 如何通过存在于 page1.aspx 中的 javascript 访问，该隐藏字段存在于 page2.aspx 中的两个框架的框架集中

> ID：10451309
> 
> 赞同：1
> 
> 时间：2012-05-04T14:58:47.567
> 
> 标签：javascript, jquery, html, iframe, frameset

有没有办法通过存在于 page1.aspx（page2.aspx 中存在的隐藏字段）中的 javascript 进行访问？

```
 <frameset rows="*, 70px" border="0">
                        <frame noresize  tabindex="105" frameborder="0" name="central"   src="http://10.11.21.191/domain/page2.aspx">
                        <frame noresize  tabindex="106" frameborder="0" name="telephony" src="http://10.11.21.191/domain/page1.aspx">
            </frameset> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:04:32.027

您可以使用

```
parent.telephony.varname 
```

从定义`central`的 var访问。`varname``telephony`

对于表单字段，只需使用

```
parent.telephony.forms[0].fieldname.value 
```

这仅是因为两个文档都来自同一个域，并且如果您打开文件`file://`而不是`http://`.

# salesforce - 如何根据另一个值显示字段

> ID：10451310
> 
> 赞同：0
> 
> 时间：2012-05-04T14:58:49.067
> 
> 标签：salesforce, apex-code, visualforce

我有一个问题，我似乎无法找到解决方案。

我正在做一个 VF 页面，我想根据用户在其他字段中插入的数字显示字段。例如，如果用户在字段“A”中插入 2，它将在同一页面中显示两个字段。

```
// Page
<apex:page standardController="Assure__c" extensions="insEnfant"
standardStylesheets="true">
<apex:sectionHeader title="Ajouter un assuré"
    subtitle="{!$User.FirstName}" help="/help/doc/user_ed.jsp?loc=help"></apex:sectionHeader>
<apex:form>
    <apex:pageBlock title="Nouveau assuré" id="thePageBlock" mode="edit">
        <apex:pageBlockButtons>
            <apex:commandButton action="{!save}" value="Enregistrer"></apex:commandButton>
            <apex:commandButton action="{!cancel}" value="   Annuler   "></apex:commandButton>
        </apex:pageBlockButtons>
        <apex:pageBlockSection title="General Information" columns="2">
            <apex:pageBlockSection id="liste1" columns="1">
                <apex:inputField value="{!Assure__c.Civilite__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Nom__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Prenom__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Nom_de_jeune_fille__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Date_de_naissance__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Lieu_de_naissance__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Pays_de_naissance__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Nationalit__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Situation_Familiale__c}"></apex:inputField>

                <apex:inputField value="{!Assure__c.Numero_de_securit_sociale__c}"></apex:inputField>
            </apex:pageBlockSection>
            <apex:pageBlockSection id="liste2" columns="1">
                <apex:inputField value="{!Assure__c.Telephone_bureau__c}"></apex:inputField>
                <apex:inputField value="{!Assure__c.Telephone_personnel__c}"></apex:inputField>
                <apex:inputField value="{!Assure__c.Portable__c}"></apex:inputField>
                <apex:inputField value="{!Assure__c.Adresse_e_mail__c}"></apex:inputField>
                <apex:inputField value="{!Assure__c.Adresse__c}"></apex:inputField>
                <apex:inputField value="{!Assure__c.Code_postal__c}"></apex:inputField>
                <apex:inputField value="{!Assure__c.Ville__c}"></apex:inputField>
                <apex:inputField value="{!Assure__c.Pays__c}"></apex:inputField>
                <apex:inputField value="{!Assure__c.Pays__c}"></apex:inputField>

                <apex:pageBlockSectionItem>
                    <apex:outputLabel value="Nombre d'enfants" />
                    <apex:outputPanel>
                        <apex:inputField value="{!Assure__c.Nombre_enfants__c}">
                            <apex:actionSupport event="onchange" rerender="thePageBlock"
                                status="statut1" />
                        </apex:inputField>
                        <apex:actionStatus startText="Application..." id="statut1" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem>
                    <apex:outputLabel
                        value="{!$ObjectType.Assure__c.fields.Etudes_superieures__c.label}" />
                    <apex:outputPanel>
                        <apex:inputField value="{!Assure__c.Etudes_superieures__c}">
                            <apex:actionSupport event="onchange" rerender="thePageBlock"
                                status="statut2" />
                        </apex:inputField>
                        <apex:actionStatus startText="Application..." id="statut2" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>

                <apex:pageBlockSectionItem>
                    <apex:outputLabel value="Service militaire" />
                    <apex:outputPanel>
                        <apex:inputField value="{!Assure__c.Service_militaire__c}">
                            <apex:actionSupport event="onchange" rerender="thePageBlock"
                                status="statut3" />
                        </apex:inputField>
                        <apex:actionStatus startText="Application..." id="statut3" />
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>

        </apex:pageBlockSection>

        <apex:pageBlockSection
            title="Entrez le niveau d'études supérieures atteint" columns="1"
            rendered="{!(Assure__c.Etudes_superieures__c)}">

            <apex:inputField value="{!Assure__c.Type_etudes__c}"></apex:inputField>
            <apex:inputField value="{!Assure__c.Diplome_obtenu__c}"></apex:inputField>
            <apex:inputField value="{!Assure__c.Nombre_annees__c}"></apex:inputField>
        </apex:pageBlockSection>

        <apex:pageBlockSection
            title="Entrez les informations concernant le service militaire"
            columns="1" rendered="{!(Assure__c.Service_militaire__c)}">

            <apex:inputField value="{!Assure__c.Type_de_service__c}"></apex:inputField>
            <apex:inputField value="{!Assure__c.Date_de_debut__c}"></apex:inputField>
            <apex:inputField value="{!Assure__c.Date_de_fin__c}"></apex:inputField>
        </apex:pageBlockSection>

        <apex:pageBlockSection title="Liste des enfants" columns="1"
            rendered="{!IF(Assure__c.Nombre_enfants__c > 0, true, false)}">

            <apex:pageBlockTable value="{!accts}" var="a" id="table">
                <apex:facet name="footer">
                    <apex:commandLink value="Ajouter" action="{!addRow}"
                        rerender="table,error" />
                </apex:facet>
                <apex:column headerValue="Nom">
                    <apex:inputField value="{!a.Name}" />
                </apex:column>
                <apex:column headerValue="Prénom">
                    <apex:inputField value="{!a.Prenom__c}" />
                </apex:column>
                <apex:column headerValue="Né le">
                    <apex:inputField value="{!a.Date_de_naissance__c}" />
                </apex:column>
                <apex:column headerValue="Lieu de naissance">
                    <apex:inputField value="{!a.Lieu_de_naissance__c}" />
                </apex:column>
                <apex:column headerValue="Situation">
                    <apex:inputField value="{!a.Situation__c }" />
                </apex:column>
            </apex:pageBlockTable>

        </apex:pageBlockSection>
        </apex:pageblock>
</apex:form>
</apex:page>

// Controller

public class insEnfant{

public List<Enfants__c> accts {get; set;}

public insererEnfant(){
    accts = new List<Enfants__c>();
    accts.add(new Enfants__c());
}

public void addrow(){
    accts.add(new Enfants__c());
}

public PageReference save(){
    insert accts;
    PageReference home = new PageReference('/home/home.jsp');
    home.setRedirect(true);
    return home;
}
} 
```

谁能帮帮我？

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:13:36.933

您是否基于一个字段中的输入查看，您允许/禁止显示其他字段？

您可以拥有要显示的所有字段，并使用呈现的标签控制该字段的可见性。

```
 <apex:outputField value="{!item.field1__c}" >
                         <apex:actionSupport event="onchange" action="{!displayOtherCols}" rerender="mainBlock2"/>  
  </apex:outputField>

<apex:column headerValue="Name" >
                <apex:outputField value="{!item.field2__c}"  rendered="{!(item.field1__c == 'option1')}" />
<apex:outputField value="{!item.field3__c}"  rendered="{!(item.field1__c == 'option2')}" />
            </apex:column> 
```

您可以使用 actionsupport 调用一个方法，该方法将处理并设置应由 . 在此示例中，我直接检查字段的值，您可以执行此操作，也可以在 displayothercols 方法中设置布尔变量的值，并使用该变量来呈现字段。确保重新渲染块。

在此示例中，如果 field1 具有“option1”，则显示另一个字段 field2，如果 field1 为“option2”，则显示 field3

希望这可以帮助..

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:33:52.533

如果您想动态添加 Html，我认为您应该使用 Javascript 或 JQuery 之类的 Javascript 框架，但我无法得到您想要做的事情。

请更具体一点。您要添加什么类型的文件？这些是输入字段吗？还是将输出字段？你能预先知道要显示的信息吗？

也许您可以使用 apex 组件并在执行 javascript 请求时重新渲染它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T13:22:30.233

一种解决方案是使用结合表结构的重新渲染。您需要在控制器中建立一个集合（下面标记为“dataCollection”）。该集合驱动显示的内容和捕获的内容。

```
<apex:actionRegion>
  <apex:inputField value="{!controllerObject.NumRows__c}">
    <apex:actionSupport event="onchange" action="{!refresh}" rerender="dynamicTablePanel"/>
  </apex:inputField>
</apex:actionRegion>

<apex:outputPanel id="dynamicTablePanel">
  <apex:pageBlockTable id="dynamicTable" value="{!dataCollection}" var="dataRow"
    columns="2">

    <apex:column headerValue="Column A" title="">
      <apex:inputField value="{!dataRow.ColumnA__c}" />
    </apex:column>

    <apex:column headerValue="Column B" title="">
      <apex:inputField value="{!dataRow.ColumnB__c}" />
    </apex:column>

  </apex:pageBlockTable>
</apex:outputPanel> 
```

这将需要在控制器中进行额外的工作。您必须处理刷新操作，以根据需要添加或删除集合记录。您还必须处理保存按钮；您必须保存控制器记录并循环浏览收集项目并将它们保存在某处。我建议对集合使用子对象。

# lotus-notes - 访问 ACL 条目

> ID：10451311
> 
> 赞同：1
> 
> 时间：2012-05-04T14:58:49.427
> 
> 标签：lotus-notes

有人可以解释为什么这段代码不起作用。我在 Authors 字段中没有得到任何值，也没有打印任何内容。

```
Sub Querysave(Source As Notesuidocument, Continue As Variant)

    ' Add users with role R* to Authors
    Dim s As New NotesSession
    Dim e As NotesACLEntry
    Dim it As NotesItem

    Set it = Source.Document.GetFirstItem("Authors")

    Set e = s.CurrentDatabase.ACL.GetFirstEntry
    While Not e Is Nothing
        Print e.Name
        If e.IsRoleEnabled("R1") Then it.AppendToTextList(e.Name)
        If e.IsRoleEnabled("R2") Then it.AppendToTextList(e.Name)
        Set e = s.CurrentDatabase.ACL.GetNextEntry(e)
    Wend

End Sub 
```

该数据库位于服务器上，并且在 ACL 中有条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:17:02.627

我稍微更改了代码，它可以工作：

```
Sub Querysave(Source As Notesuidocument, Continue As Variant)

    ' Add users with role R* to Authors
    Dim s As New NotesSession
    Dim acl As NotesACL
    Dim e As NotesACLEntry
    Dim it As NotesItem

    Set it = Source.Document.GetFirstItem("Authors")

    Set acl = s.CurrentDatabase.ACL
    Set e = acl.GetFirstEntry
    Print e Is Nothing
    While Not e Is Nothing
        Print e.Name
        If e.IsRoleEnabled("R1") Then it.AppendToTextList(e.Name)
        If e.IsRoleEnabled("R2") Then it.AppendToTextList(e.Name)
        Set e = acl.GetNextEntry(e)
    Wend

End Sub 
```

这是在任何地方记录还是简单损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:46:48.570

我相信 LotusScript 中还有其他地方需要创建类似的单独变量。所有的例子都是这样写的。毫无疑问，这是一个错误，我怀疑它是否已记录在案。

# jquery - 数据表ajax排序

> ID：10451314
> 
> 赞同：-4
> 
> 时间：2012-05-04T14:58:53.170
> 
> 标签：jquery, datatables

我在按升序排序 ajax 数据表时遇到了一些麻烦，因为 mysql 中的默认值是 NULL 或 0，我不想显示它们。例如，在我的表中，我有：

```
item | value
-----+------
   a |     2
   b |     3
   c |     4
   d |  NULL 
```

降序排序效果很好，但是升序会首先显示“d”，我不希望有“d”。似乎也无法自定义 js 订单，因为这是 ajax，因此订单直接在 db 中完成。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:14:40.407

您可以通过这种方式控制 null 的排序方式：

```
select item, value
from ...
order by case when value is null then 0 else 1 end descending,   -- or ascending (I do not full understud your question)
         value ascending                                         -- or descending (idem) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:02:03.917

如果您不希望 d 在那里，请将其过滤掉。 `WHERE value IS NOT NULL` 问题没有多大意义，如果你给我们当前的记录、当前的结果、预期的结果会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-31T14:12:32.987

当对 Jquery DataTable 使用服务器端调用时，您可以在用于使用此 order by 子句填充表的 select 语句中解决问题：

`.order("case when "column_selected" is null then -9999999 else "column_selected" end "direction_sorted")`

# android - 获取 Picasa 相册 ID

> ID：10451316
> 
> 赞同：0
> 
> 时间：2012-05-04T14:58:56.047
> 
> 标签：android, api, picasa

在 Picasa 中，我创建了一张专辑，比如说测试：

```
 public void CreateAlbum(String title, String description){

    AlbumEntry myAlbum = new AlbumEntry();

    myAlbum.setTitle(new PlainTextConstruct(title));
    myAlbum.setDescription(new PlainTextConstruct(description));
       try {
        AlbumEntry insertedEntry = myPicasa.insert(postUrl, myAlbum);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ServiceException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
       Log.d("CREATE ALBUM", "ALBUM ID"+ myAlbum.getId());

    } 
```

上传我需要这个posturl：

```
albumPostUrl = new URL("https://picasaweb.google.com/data/feed/api/user/USERNAME/albumid/ALBUMID); 
```

但是 ALBUMID 是一个代码，当我上网到 Picasa 并检查浏览器（单击 RSS 后）时，我可以获得该代码，但是如果我刚刚通过调用带有例如标题 TEST 的方法创建了一个相册，我该如何获取该 ALBUMID？

Logcat 显示专辑 ID 为空。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:50:30.803

[在BaseEntry](https://developers.google.com/gdata/javadoc/com/google/gdata/data/BaseEntry#getId%28%29)的 api 中回答

```
String id = myPicasa.insert(postUrl, myAlbum).getID(); 
```

您的 AlbumEntry 是 BaseEntry 的子类。上面的代码将返回您要求的 id。

# twitter-bootstrap - Twitter Bootstrap 自定义最佳实践

> ID：10451317
> 
> 赞同：286
> 
> 时间：2012-05-04T14:58:59.167
> 
> 标签：twitter-bootstrap, less

我正在使用 LESS 使用 Bootstrap 2.0.3。我想对它进行广泛的定制，但我想尽可能避免对源代码进行更改，因为对库的更改很频繁。我是 LESS 的新手，所以我不知道它的编译是如何工作的。使用 LESS 或基于 LESS 的框架有哪些最佳实践？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-05-08T19:37:26.737

我的解决方案与 jstam 的类似，但我尽可能避免更改源文件。鉴于对引导程序的更改会很频繁，我希望能够通过将我的修改保存在单独的文件中来获取最新的源代码并进行最小的更改。当然，它并不完全是防弹的。

1.  将 bootstrap.less 和 variables.less 复制到父目录。将 bootstrap.less 重命名为 theme.less 或任何你想要的。您的目录目录结构应如下所示：

    ```
    /Website            
         theme.less
         variables.less
         /Bootstrap
         ... 
    ```

2.  更新 theme.less 中的所有引用以指向 bootstrap 子目录。确保您的 variables.less 是从父目录引用的，而不是像这样的引导目录：

    ```
    ...
    // CSS Reset
    @import "bootstrap/reset.less";

    // Core variables and mixins
    @import "variables.less"; // Modify this for custom colors, font-sizes, etc
    @import "bootstrap/mixins.less";

    // Grid system and page structure
    @import "bootstrap/scaffolding.less";
    @import "bootstrap/grid.less";
    @import "bootstrap/layouts.less"; 
    ```

    ...

3.  将 CSS 覆盖添加到 theme.less 文件中后，立即添加它们。

    ```
    ...
    // Components: Nav
    @import "bootstrap/navs.less";
    @import "bootstrap/navbar.less";

    // overrides
    .navbar-fixed-top .navbar-inner, .navbar-fixed-bottom .navbar-inner {
        border-radius: 0 0 0 0;
        padding: 10px;
    }

    .nav-tabs, .nav-pills {
        text-transform: uppercase;
    }

    .navbar .nav > li > a {
        text-shadow: none;
    }

    ... 
    ```

4.  在 HTML 页面中链接到 theme.less 而不是 bootstrap.less。

每当新版本出现时，您的更改应该是安全的。每当新版本出现时，您还应该在自定义引导文件之间进行比较。变量和导入可能会改变。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-07T16:29:12.170

这也是我一直在努力解决的问题。一方面，我想用我自己的颜色和设置高度自定义 variables.less 文件。另一方面，我想尽可能地更改引导文件以简化升级过程。

`bootstrap.less`我的解决方案（目前）是创建一个插件 LESS 文件，并在导入变量和 mixins 后将其插入文件中。所以是这样的：

```
...

// CSS Reset
@import "reset.less";

// Core variables and mixins
@import "variables.less"; // Modify this for custom colors, font-sizes, etc
@import "mixins.less";

// Custom Addons
@import "addon-file.less"; // <--- My custom LESS addon

// Grid system and page structure
@import "scaffolding.less";

... 
```

这样，如果我想重置 Bootstrap 颜色、字体或添加额外的 mixin，我可以。我的代码是独立的，但将在其余的 Bootstrap 导入中编译。这并不完美，但它是一个对我来说效果很好的权宜之计。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-10-19T12:14:32.727

从我的角度来看，我只有一个名为的文件，`theme.less`其中包含一个 import `boostrap.less`.

这适用于为变量自定义值`variables.less`

之后我编译我的`theme.less`文件而不是`bootstrap.less`

**示例`theme.less`：**

```
@import "path/to/my/bootstrap.less";  
@linkColor: #MyAwesomeColor; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-09T10:21:10.330

一种更好（恕我直言）的方法是从[Bootswatch](http://bootswatch.com/) github 项目[swatchmaker](https://github.com/thomaspark/bootswatch/tree/gh-pages/swatchmaker)中获得启发。该项目专为构建和管理网站上的数十个 Bootstrap 主题而定制。

项目[`Makefile`](https://github.com/thomaspark/bootswatch/blob/gh-pages/swatchmaker/Makefile)中的 构建`swatchmaker.less`（您可以将其重命名为`customizations.less`）。该文件包含一堆导入：

```
@import "bootstrap/less/bootstrap.less";
@import "swatch/variables.less";
@import "swatch/bootswatch.less";
@import "bootstrap/less/utilities.less"; 
```

您可以将`swatch`文件夹和`bootswatch.less`文件重命名为您认为合适的任何名称。

这是有道理的，因为您可以升级 Bootstrap 而不会影响您自己的文件。事实上，`Makefile`它还包含获取最新版本 Bootstrap 的命令。有关更多信息，请参阅项目页面上的 README。

作为奖励，README 还建议您安装gem，它会在文件更改`watchr`时自动构建项目。`.less`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-16T10:40:10.203

我得出了与 Joel 相同的解决方案：

**自定义较少文件**

就像上面描述的那样：我为我正在自定义的所有 Less 文件创建本地副本：例如：“variables-custom.less”、“alerts-custom.less”、“buttons-custom.less”。所以我可以使用一些标准并有自己的补充。缺点是：当 Bootstrap 更新时，很难迁移。

但还有一点：

**覆盖样式**

在寻找工作流程时，我经常看到人们建议简单地覆盖样式。因此，您首先导入标准的 Less 文件，然后在底部添加自定义声明。这里的好处是：更新到新版本更容易。缺点是：编译后的 CSS 文件包含所有覆盖。一些 CSS 选择器被定义了两次。所以浏览器需要做一些提升来找出实际应用的内容。那不是很干净。

我想知道为什么预处理器不够聪明来解决这种双重声明？我在这里缺少更好的工作流程吗？

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-05-09T12:03:40.790

如果（并且仅当）您有时间可以像我一样做到这一点。我保留自己修改过的框架版本，每次更新框架时，我都会阅读文档并检查源代码是否有修改。

这个解决方案乍一看可能听起来不太理想，但我有理由这样做。我不使用一个，而是使用许多框架、最佳实践、重置/规范化样式表等的混合体，并且我始终确信，任何更新都不会以我没有看到的任何方式改变现有项目。

由于以下原因，我正在使用自己的自定义框架。

1.  我剥离了我不需要保持模块化和小型化的每一点
2.  我将我的框架用于客户工作，并希望 a) 知道我在做什么，同时 b) 拥有我卖给客户的所有东西。我不是简单地复制和使用框架，而是尝试理解和重新创建它们
3.  我将我的框架与 CMS 结合使用，不能简单地将框架丢弃并忘记到项目中/从头开始

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-04T02:00:52.843

只需将`@import "../../styles.less";`（或您的样式表所在的任何位置）添加到底部的 bootstrap.less 即可。这允许您在自己的 style.less 之类`.gradient`或内部使用 Bootstrap mixin。`.border-radius`

# python - Django：如何找到填写特定模板的方法/函数

> ID：10451323
> 
> 赞同：0
> 
> 时间：2012-05-04T14:59:11.117
> 
> 标签：python, django

说，我在网络界面中发现了一些错误。我打开萤火虫并发现元素和类，这个元素的 id。通过它们，我可以识别一个包含变量、标签等​​的模板。我怎样才能继续前进并揭示这些变量填充在哪些 .py 文件中？

我知道它在 Lift 框架中是如何工作的：当你找到一个模板时，会有一些元素的属性绑定到片段。因此，您可以轻松地进入特定的片段并编辑代码。

它在 django 中是如何工作的？可能是，我想是错误的过程......然后请指点我正确的算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:13:26.530

在精心设计的 django 中，您应该只需要编辑模板。好的设计提供干净的分离。开发人员可能被迫做一些不寻常的事情......但您可以尝试编辑模板并查看会发生什么（首先备份）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:41:26.080

确定模板变量解析是所有关于`Context`.

1.  使用 URL 来识别`view`被调用的对象。
2.  查看视图的返回并注意 a) 正在使用的模板，以及 b) 在呈现模板时使用的 Context 中传递的任何值。
3.  查看`settings.py`列表`TEMPLATE_CONTEXT_PROCESSORS`。这些是被*自动且不可见*地调用以将值添加到传递给模板的上下文的例程。这是一种幕后人员™ 流程，如果您不了解它，可能会真正绊倒您。
4.  检查是否有任何可能正在修改上下文的*魔术*模板标签（在相关模板中、在它扩展的模板中或在包含该模板的模板中）被调用。有时我需要使用一个名为的老式 django 片段，它可以*在模板*`{%expr%}`中进行评估，但我总是在尽可能接近需要的地方使用它，以突出它正在被使用的事实。

 *请注意，由于 Django 模板变量的解析方式，`{{foo.something}}`它可以是值*或*可调用方法。我对这种语法有严重的问题，但他们就是这样写的。*

# asp.net - SQLBulkCopy 不会失败，但不会插入

> ID：10451327
> 
> 赞同：3
> 
> 时间：2012-05-04T14:59:41.000
> 
> 标签：asp.net

所以我有以下代码来获取一个 Excel 文件并将其写入我的数据库中的一个表中。

```
 string target = Server.MapPath("~/Upload");
        if (fupStation.HasFile)
        {
            fupStation.SaveAs(System.IO.Path.Combine(target, fupStation.FileName));

            string connectionString = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", target + "\\" + fupStation.FileName); string query = String.Format("select * from [{0}$]", "Client Station Assignments");
            OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, connectionString);

            DataSet dsStation = new DataSet();
            dataAdapter.Fill(dsStation);

            DataTable dtStation = new DataTable();
            dtStation = dsStation.Tables[0];

            gvOne.DataSource = dtStation;
            gvOne.DataBind();

            using (SqlBulkCopy s = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["cnSQL"].ConnectionString))
            {
                s.DestinationTableName = "StationImport";
                s.NotifyAfter = 100;
                s.WriteToServer(dtStation);
                s.Close();
            }

        } 
```

所以这就是问题所在。它读取文件并很好地填充数据表（通过用它填充网格来证明）而且我知道正在调用 SQLBulkCopy 代码，但最后它没有给出任何错误，但我的表中没有任何显示！

以前有人经历过吗？这是我第一次使用 BulkCopy（以及读取文件！）所以如果我做错了什么我不会感到惊讶。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T07:32:13.117

所有列都正确映射吗？“如果两者之间有任何不匹配的列，则复制将不会成功。” （来源[http://www.sqlteam.com/article/use-sqlbulkcopy-to-quickly-load-data-from-your-client-to-sql-server](http://www.sqlteam.com/article/use-sqlbulkcopy-to-quickly-load-data-from-your-client-to-sql-server)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:10:37.210

我的代码在 vb.net 中工作

请记住，数据表和 sql 表需要在字段数据类型和列顺序上匹配。

```
 Using connection As SqlConnection = New SqlConnection(conn)
        connection.Open()
        Using bulkCopy As SqlBulkCopy = New SqlBulkCopy(connection, SqlBulkCopyOptions.TableLock, Nothing)
            bulkCopy.DestinationTableName = "TableName"
            bulkCopy.BulkCopyTimeout = 60000
            bulkCopy.BatchSize = 0
            bulkCopy.WriteToServer(MyDataTable)
            bulkCopy.Close()
        End Using
        connection.Close()
    End Using 
```

# git - 在 Heroku 上清理 git repo

> ID：10451330
> 
> 赞同：35
> 
> 时间：2012-05-04T14:59:45.800
> 
> 标签：git, heroku, repository, reset

情况如下：

我们有一些项目保留在 Github 上，并将其部署到 Heroku，它有自己的 mini-Git。一些更改直接应用于 Heroku（从 Heroku 克隆存储库，进行更改并推送）。与此同时，Github 上的 master 分支也发生了一些变化。

现在，当我想将主存储库推送到 Heroku 时，推送失败是因为 Heroku 上的提交与本地提交不同步。

我不想与 Heroku 上的更改合并——我只想让它们消失。

有没有办法清理 Heroku 上的 git 存储库，然后从一开始就推送我的本地存储库？

我不想破坏应用程序并重新创建它，因为它有一些付费服务，而我只是一个合作者。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-06-20T14:59:21.883

安装[Heroku Repo 插件](https://github.com/heroku/heroku-repo)并使用它来重置远程 git repo。

首先删除服务器上的git repo：

```
> cd /my-project/
> heroku plugins:install heroku-repo
> heroku repo:reset 
```

然后通过删除并重新创建本地 git 存储库来重新初始化它：

```
> cd /my-project/
> rm -rf .git
> git init
> heroku git:remote -a <appname> 
```

`<appname>`你的应用程序在heroku中的名称在哪里。

2 个存储库（本地和远程）现在应该是空的并且是同步的。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-04T16:46:32.687

您可以只使用 git 中的`-f`标志（它是标准的 git 标志）来强制推送。[请参阅 Dev Center Git](https://devcenter.heroku.com/articles/git)文档中的附注。这显然会覆盖您在 Heroku 上所做的更改。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-06T17:42:00.090

尝试访问[https://github.com/heroku/heroku-repo](https://github.com/heroku/heroku-repo)并使用该插件远程清理内容。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-04T16:32:00.890

如果你的 Heroku 推送失败是因为它不是一个快进提交，并且你没有尝试对你的历史做任何时髦的事情，这很简单：

1.  确保将您的非 Heroku 存储库定义为远程存储库。
2.  获取所有遥控器。
3.  使用带有“他们的”策略选项的递归策略将您的其他存储库合并到本地 Heroku 克隆中。

    ```
    git merge -X theirs remotes/origin/master 
    ```

4.  推送`--force`选项以对上游 Heroku 存储库进行非快进提交。

另一方面，如果您真的想清除历史记录，您还有其他选择。

*   从您的历史记录中删除除第一次提交之外的所有提交（最简单）。

    ```
    git reset --hard $(git log --pretty=oneline | tail -n1 | cut -d ' ' -f1)
    git push --force 
    ```

*   创建一个[空的 master 分支](https://stackoverflow.com/a/647451/1301972)。
*   使用[git-filter-branch](http://progit.org/book/ch6-4.html)。

就个人而言，我建议保留您的历史记录并修复快进问题作为最佳实践，但如果您想积极修改您的历史记录，您当然可以选择。Git 在这方面非常灵活。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-15T09:14:30.830

您也可以简单地使用 heroku 的应用程序版本控制系统。转到“活动”，您将获得项目的完整历史记录：回滚到第一个活动，并且应该完全清理存储库，回到最初在 Heroku 上创建应用程序时的状态。

# ruby-on-rails-3 - Rails 3：在过滤会话管理问题之前

> ID：10451331
> 
> 赞同：0
> 
> 时间：2012-05-04T14:59:47.693
> 
> 标签：ruby-on-rails-3, session-management

我正在开发一个应用程序，该应用程序最终将帮助我的公司转向通用注册/激活流程，以帮助支持多种产品。在新用户注册或激活（使用组代码）时，“单一”系统品牌需要根据他们的来源进行更改。

现在，我设置了在 URL 中传递 client_id 参数的位置，然后`@client`通过执行 ActiveRecord Find By 来设置当前客户端。

我需要对其进行设置，以便在会话中设置客户端信息。但我无法让它发挥作用。

这是我的`ApplicationController`

```
class ApplicationController < ActionController::Base
  protect_from_forgery 
  before_filter :set_client_id
  helper_method :brand

   def set_client_id
     session[:client_id] ||= params[:client_id]
   end

  def brand
    @brand = Client.find_by_app_id(session[:client_id])
  end
end 
```

我一直遇到的问题之一是，如果有人使用不同的`client_id`参数返回站点，旧的参数将保持在会话中。

`client_id`即使`client_id`参数发生变化，我如何重写上面的内容以始终只设置会话中的内容？

# php - Codeigniter 分页不呈现分页链接

> ID：10451333
> 
> 赞同：4
> 
> 时间：2012-05-04T14:59:48.497
> 
> 标签：php, codeigniter, pagination

您好，我有以下代码，

```
$this->load->library('pagination');
$this->data['products'] = $this->products_model->get_products_and_category($this->uri->segment(4));

$config['base_url'] = base_url()."admin/products/manage/";
$config['total_rows'] = $this->db->get('products')->num_rows();
$config['per_page'] = 20;
$config['full_tag_open'] = '<div class="btn-group">';
$config['full_tag_close'] = '</div>';
$config['anchor_class'] = 'class="btn" ';
$config['cur_tag_open'] = '<div class="btn">';
$config['cur_tag_close'] = '</div>';
$config['uri_segment'] = 4;

$this->pagination->initialize($config); 
$this->data['pagination'] = $this->pagination->create_links();

$this->template->build('admin/products/index', $this->data); 
```

正在运行的查询`get_products_and_category($this->uri->segment(4))`如下所示，

```
public function get_products_and_category($offset=0) {
    $this->db->select('products.product_id, products.product_title, products.product_created, products.parent_category, categories.category_id, categories.category_title')
    ->from('products')
    ->join('categories' , 'products.parent_category = categories.category_id', 'left')
    ->order_by('products.product_title', 'ASC')
    ->limit(25, $offset);

    $query = $this->db->get();
    return $query->result_array();
} 
```

我的表中有 25 个结果，我想每页显示 20 个，所以根据我的数学计算，分页类应该创建 2 个链接（第 1 页和第 2 页），第一页应该有 20 个结果，第二个应该有 4结果，但是我根本没有得到任何链接，我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:44:08.040

LIMIT 子句可用于限制 SELECT 语句返回的行数。

现在您有 25 个结果，并且您将查询限制为返回 25 个结果，因此您的分页可能无法正常工作。

尝试在查询中传递 $config[per_page]

```
$this->data['products'] = $this->products_model->get_products_and_category($config['per_page'],$this->uri->segment(4)); 
```

然后在查询中（注意我们将 per_page 变量传递给 limit()）

```
public function get_products_and_category($num, $offset=0) {
$this->db->select('products.product_id, products.product_title, products.product_created, products.parent_category, categories.category_id, categories.category_title')
->from('products')
->join('categories' , 'products.parent_category = categories.category_id', 'left')
->order_by('products.product_title', 'ASC')
->limit($num, $offset); // Here we pass the per_page var

$query = $this->db->get();
return $query->result_array();
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:48:22.847

Altrim 的回答非常好。但为了符合 CodeIgniter，我建议改用它：

```
public function get_products_and_category($offset=0) {
    $this->db->select('products.product_id, products.product_title, products.product_created, products.parent_category, categories.category_id, categories.category_title')
    ->from('products')
    ->join('categories' , 'products.parent_category = categories.category_id', 'left')
    ->order_by('products.product_title', 'ASC')
    ->limit($this->per_page, $offset); // Here we pass the per_page var

    $query = $this->db->get();
    return $query->result_array();
} 
```

您已经在中定义 per_page`$config['per_page'] = 20;`

由于在函数中`$this->pagination->initialize($config);`转换。`$key (per_page) => $value (20)``$this->$key = $value``initialize`

# android - 如何导入电子邮件附件？

> ID：10451334
> 
> 赞同：1
> 
> 时间：2012-05-04T14:59:51.007
> 
> 标签：android, email, import

我想将电子邮件用作数据存储。

这就是我想要做的：让我的 android 应用程序将其私有数据作为电子邮件附件发送，然后重新导入此附件并保存。

第一部分应该没有问题，但是第二部分呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:37:04.053

我不知道它是否适用于电子邮件，但您可以尝试一下。

**将文件发送到您的应用程序**

使用意图过滤器将您的应用程序*注册*为能够处理特定类型的文件。你必须弄清楚使用什么意图，但我认为 ACTION_SEND 可能是你需要的。您需要指定 mime-type 以仅处理应用程序数据的类型。

```
<intent-filter>            
    <action android:name="android.intent.action.SEND" />            
    <category android:name="android.intent.category.DEFAULT" />            
    <data android:mimeType="image/*" />        
</intent-filter> 
```

设置意图过滤器后，您应该能够长按其他应用程序中的文件并将它们导出/发送到您的应用程序。

**处理已发送的文件**

在分配了意图过滤器的活动中，您需要在 onCreate 方法中从 Bundle 中捕获数据。请参阅本教程：http: [//developer.appcelerator.com/question/122137/is-there-any-hope-to-get-file-from-intent-uri-receive-outside-of-the-application](http://developer.appcelerator.com/question/122137/is-there-any-hope-to-get-file-from-intent-uri-receive-outside-of-the-application)

**弄清楚注册的意图**

可能有一种方法可以在模拟器中执行此操作，但我在手机上安装了 aLogcat 来执行此操作。当您长按文件并选择导出时，您将获得可供选择的选项列表。从中选择任何应用程序。转到 logcat，它会向您显示发送到您调用的应用程序的意图。它会说这样的话`START {act=android.intent.action.SEND typ=application/vnd.ms-excel cmp=[class that is being loaded goes here] (hasExtras)}`

# .net - 在 Webkit .NET Wrapper 中激活缓存

> ID：10451338
> 
> 赞同：1
> 
> 时间：2012-05-04T15:00:13.707
> 
> 标签：.net, vb.net, visual-studio-2008, caching, webkit

我在 Visual Studio 2008 中使用 .NET Wrapper。如果我启动自己的浏览器，一切都会运行良好（他会显示所需的 URL）。但事实上，我的浏览器只显示一个窗口（而不是几个选项卡）但实际上每次加载同一个网页时，我发现启动时间太长。我建议没有缓存处于活动状态，每次我加载浏览器时都会再次下载所有内容，尽管它应该在缓存中。

因此，我建议我必须打开缓存，并且可能我能够找到缓存，以便应用程序/自己的浏览器可以找到它。

如果有办法激活它，请告诉我如何执行此操作。

谢谢马库斯 G。

# sql - SQL 错误 - 无法绑定多部分标识符，并且无法将 nvarchar 转换为浮点数

> ID：10451340
> 
> 赞同：-4
> 
> 时间：2012-05-04T15:00:14.580
> 
> 标签：sql

我有一个查询给我一个错误

> 多部分标识符 A.fieldname 无法绑定

查询是这样的：

```
SELECT DISTINCT 
    A.FYEARNAME, A.FQUARTER, A.FMONTHNAME, A.FWEEK, A.PRODUCT_DESC,      
    A.BRAND_DESC, A.TYPE_DESC, A.CUSTOMER_TYPE, A.DPS_TYPE, A.PPD_PARTS,  
    A.DISPATCHES, A.REPEATS, A.WITHIN_1HR,
    'INIT_ONSITE' =  CASE 
                       WHEN (C.ONSITE = 'Y') THEN 'ONSITE'
                       ELSE 'NOT ONSITE'
                     END
    -- 'NEXT_ONSITE' =  CASE 
    --                     WHEN (D.ONSITE = 'Y' AND B.PPD_PARTS = 0) THEN 'ONSITE WITH NO PARTS'
    --                     ELSE 'N'
    --                  END
FROM 
    dbo.RD_Noise_FY13 A
LEFT OUTER JOIN 
    dbo.RD_Noise_FY13 B ON A.NEXTDPS = B.DPSNUM
INNER JOIN 
    COMMON.DBO.TLKP_DPSTYPES C ON A.DPS_TYPE = C.DPSTYPE
--INNER JOIN 
--  COMMON.DBO.TLKP_DPSTYPES D ON B.DPS_TYPE = D.DPSTYPE 
```

现在我已经评论了`NEXT_ONSITE`案例陈述部分......但如果我取消评论，那么它会给出一个错误

> 无法将 nvarchar 转换为浮点数

你能帮我解决这两个错误吗？我运行过类似的查询，但从未遇到过这样的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:15:16.973

这里缺少很多东西：

*   是什么`Fieldname`？
*   查询的其余部分在哪里？您已注释掉的部分提及，但您发布的部分`D.ONSITE`中没有`D`表格`FROM`

首先，我猜您`Fieldname`在未向我们展示的部分中引用而不是实际的字段名。

对于第二个，是`D.ONSITE`一个`float`？我们需要知道数据类型才能得到准确的答案。

# uitableview - XML Parse 后未在 UITableView 中获取当前数据（使用 NSFetchedResultsController）

> ID：10451345
> 
> 赞同：1
> 
> 时间：2012-05-04T15:00:38.947
> 
> 标签：uitableview, core-data, ios5, nsfetchedresultscontroller

在这里有点挣扎……

我的视图控制器遵循以下协议

在我的 init 方法中，我将检查远程服务器以获取更新的 XML 文件...解析 XML 文件，并将内容写入核心数据。

我的 tableview 的内容由显示此核心数据的 NSFetchedResultsController 管理。

**我的问题：**

NSFetchedResultsController 似乎在从远程文件更新核心数据之前获取数据。我已经验证数据库正在正确更新，如果我第二次运行 TableView 将显示正确的数据。

也许我只是没有在适当的地方做 reloadData ？我已经实施

```
-(void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [myTableView reloadData];
} 
```

此外，在解析器完成并将新数据写入核心数据后，我正在尝试这样做：

```
-(void)parserDidEndDocument:(NSXMLParser *)parser {
     [myTableView reloadData];  
} 
```

有人有想法么？让我知道发布哪些额外代码可能有用。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:25:32.787

您可能需要检查以下内容（来自 Apple 的文档）

> 因此，控制器有效地具有三种操作模式，由它是否具有委托以及是否设置了缓存文件名来确定。
> 
> 1.  无跟踪：委托设置为零。控制器只是提供对数据的访问，就像执行获取时一样。
>     
>     
> 2.  仅内存跟踪：委托为非 nil，文件缓存名称设置为 nil。控制器监视其结果集中的对象并更新部分和排序信息以响应相关更改。
>     
>     
> 3.  完全持久跟踪：委托和文件缓存名称非零。控制器监视其结果集中的对象并更新部分和排序信息以响应相关更改。控制器维护其计算结果的持久缓存。

听起来您想要完整的持续跟踪。所以你可能想确保你有委托集（你可能已经完成了）并将缓存设置为非零

您可能还想确保在完成解析后保存 managedObjectContext。保存后，请确保再次执行提取。

```
NSError *error;
BOOL success = [controller performFetch:&error];
if (!success)
  NSLog(@"Core Data Fetch Error:  %@"error); 
```

可能是应用程序在退出时正在保存上下文，这就是您在重新启动时看到数据的原因。

祝你好运

# javascript - 如何测量客户端计算机上 javascript 繁重网页的性能？

> ID：10451346
> 
> 赞同：7
> 
> 时间：2012-05-04T15:00:39.267
> 
> 标签：javascript, jquery, wordpress

如何衡量我的 jQuery（或 JS）重网页是否拖拽/影响客户端计算机（和触摸设备）的 CPU 性能？我不是在询问加载时间/等，因为它们取决于 JS 文件的数量。我问的是客户端资源消耗和相关的稳定性问题（如果有的话）。

具体来说：我在 wordpress 模板中嵌入了一个 jQuery 旋转函数来永久地为图像设置动画，以及其他几个基于 jquery 的动画对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:17:33.120

您可以使用 Web 浏览器（如 Google Chrome）附带的 webkit 分析器（配置文件、审核选项卡）。页面速度和速度跟踪器等扩展也非常棒。您可以了解整个浏览器进程，例如它在 UI 线程中花费了多少时间、执行 javascript 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:09:23.377

这是一个很好的问题。

您可以尝试 Eric 的报告浏览器帧速率的工具。

[http://churchm.ag/monitor-javascript-performance/](http://churchm.ag/monitor-javascript-performance/)

我不确定这是否是您想要在开发过程中测试的东西，或者监视器是否有来自真实客户的反馈。可以运行上面的 Javascript 有一个背景，然后将 AJAX 消息发送回服务器以报告访问者的性能。

我发现另一个脚本尝试测量 CPU 性能，但我不知道它有多好。

[http://blog.pothoven.net/2007/12/performance-based-web-app-functionality.html](http://blog.pothoven.net/2007/12/performance-based-web-app-functionality.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:22:37.737

您可以使用 Google Chrome Web Inspector，特别是“配置文件”面板。这里有一些关于它的更多信息......

[http://jtaby.com/2012/04/23/modern-web-development-part-1.html#The%20Profiles%20Panel%20](http://jtaby.com/2012/04/23/modern-web-development-part-1.html#The%20Profiles%20Panel%20)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:10:37.413

我不建议在生产服务器上使用它，但 Firebug 有 Javascript 性能分析工具。[http://getfirebug.com/javascript](http://getfirebug.com/javascript)

# android - 创建类似于 windows mediaplayer 中的条的“条形音箱”

> ID：10451349
> 
> 赞同：-2
> 
> 时间：2012-05-04T15:00:44.637
> 
> 标签：android, charts, media-player, android-mediaplayer, javasound

我不知道这些条代表什么，但我仍然想在我的 Android 平台上的应用程序中制作它们。
我希望这些条在声音上改变，或者在我的情况下是录制的样本播放。

对于 http://www.teamliquid.net/blogs/viewblog.php?topic_id=90197&docid=Cw1ObF4XGZQD4M&imgurl= [http://i658.photobucket.com/albums/uu307/StimedFirebat/bars.jpg&w=1024&h=819&ei=0-6jT76WOc](http://i658.photobucket.com/albums/uu307/StimedFirebat/bars.jpg&w=1024&h=819&ei=0-6jT76WOc) _U8QO-psyDCQ&zoom=1&iact=hc&vpx=812&vpy=156&dur=1559&hovh=201&hovw=251&tx=157&ty=133&sig=110361762640680792178&page=1&tbnh=154&tbnw=186&start=0&ndsp=28&ved=1t:429,r:2,s:0,i:72&biw= 1680&bih=864">播放音乐时 windows 媒体播放器显示的条形图示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:15:47.133

看看这个：[https](https://github.com/felixpalmer/android-visualizer/tree/4054f8b6e2153b07c5af275372b9609d1019727a) ://github.com/felixpalmer/android-visualizer/tree/4054f8b6e2153b07c5af275372b9609d1019727a 。这是一个带有线、圆和条形可视化器的项目

顺便说一下谷歌。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T15:06:59.817

移动条称为图形均衡器。我认为这个媒体 API 示例使用了一个。

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/media/AudioFxDemo.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/media/AudioFxDemo.html)

# html - 制作网站模板是否有任何格式或约定？

> ID：10451352
> 
> 赞同：-5
> 
> 时间：2012-05-04T15:00:53.740
> 
> 标签：html, layout, user-interface

基本上，网站是 HTML，但我想将程序员的逻辑或编程方面（例如，从数据库读取数据）和设计师的设计分开。这是否可以将设计分离为网站模板，供设计师工作，而程序员只适合其中的价值？谢谢。

例如，在iOS开发中，我给设计者提供界面构建器，程序员将其连接到他们的程序中进行显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:02:34.333

是的。您使用模板语言。例如[Template Toolkit](http://template-toolkit.org/)、[Mustache](http://mustache.github.com/)、[Jinja](http://jinja.pocoo.org/)或[Smarty](http://www.smarty.net/)。

更进一步，使用 MVC 框架（例如[Catalyst](http://catalystframework.org/)、[Django](https://www.djangoproject.com/)、[Rails](http://rubyonrails.org/)或[Cake](http://cakephp.org/)）将逻辑划分为模型（业务逻辑和数据访问）、控制器（调度处理和粘合）和视图（模板、JSON 转储等）。

# windows - 像素在显示器上不是正方形吗？

> ID：10451353
> 
> 赞同：10
> 
> 时间：2012-05-04T15:00:59.810
> 
> 标签：windows, user-interface, dpi

我正在使用[此 MSDN 指南](http://msdn.microsoft.com/en-us/library/dd464660.aspx)使我的应用程序 DPI 敏感，其中缩放技术使用来自设备上下文的 X 和 Y 逻辑像素。

```
int _dpiX = 96, _pdiY = 96;   
HDC hdc = GetDC(NULL);
if (hdc)
{
    _dpiX = GetDeviceCaps(hdc, LOGPIXELSX);
    _dpiY = GetDeviceCaps(hdc, LOGPIXELSY);
    ReleaseDC(NULL, hdc);
} 
```

然后你可以使用缩放 X 和 Y 坐标

```
int ScaleX(int x) { return MulDiv(x, _dpiX, 96); }
int ScaleY(int y) { return MulDiv(y, _dpiY, 96); } 
```

有没有一种情况`GetDeviceCaps(hdc, LOGPIXELSX)`会`GetDeviceCaps(hdc, LOGPIXELSY)`为监视器返回不同的数字。我真正关心的唯一设备是显示器，所以我需要单独的`ScaleX(int x)`和`ScaleY(int y)`功能吗？我可以只使用一个`Scale(int px)`功能吗？这样做会有坏处吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T16:20:53.253

这在理论上是可能的，但我不知道最近有任何使用非方形像素的显示器。方形像素有很多优点，现有的软件也有很多假设方形像素，主流显示器似乎不太可能出现非方形像素模式。

在许多情况下，如果您*确实*有一个非方形像素的显示器，您可能可以应用变换使其看起来好像有方形像素（例如，通过设置映射模式）。

也就是说，*打印机*通常具有非方形设备单元。它们中的许多在一个维度上比在另一个维度上具有更高的分辨率。一些驱动程序使调用者可以使用此分辨率。其他人会让它看起来好像有方形像素。如果您想重新使用您的代码进行打印，我建议您不要将水平和垂直缩放混为一谈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-09T09:58:44.023

LCD 面板的硬件像素始终为正方形。使用 CRT，您可以有矩形正方形，例如在显示器上使用`320x200`或`320x400`分辨率`4:3`（这些分辨率是实际使用的）。在 LCD 上，您可以通过在显示器上使用非原生分辨率来获得矩形像素 - 在显示器上使用宽屏分辨率，`5:4`反之亦然。

# html - 在将标题保持在固定位置时出现居中问题

> ID：10451355
> 
> 赞同：0
> 
> 时间：2012-05-04T15:01:09.573
> 
> 标签：html, css

在将标题保持在固定位置时，我无法将所有内容居中。谁能帮我弄清楚为什么？

这是我的 HTML

```
<div id="wrapper">
   <div class="header">....</div>
   <div class="experiences">...</div>
</div> 
```

这是CSS：

```
#wrapper {
    margin: 0 auto 0 auto;
    width: 1000px;
    height: auto;
}

.header {
    background-color: #222;
    color: white;
    top: 0;
    left: 0;
    right: 0;
    position: fixed;
    height: 130px;
    padding: 20px;
    width: 1000px;
    margin: 0 auto 0 auto;
}

.experiences {
    background-color: #eee;
    padding: 20px;
    * padding-top: 190px;
    width: 1000px;
    margin-top: 170px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:08:06.283

`left`您只需要`right`删除`.header`.

其余的应该已经居中（除非您使用非常旧版本的 IE...）。

# javascript - 内容展开时调整 iFrame 的大小

> ID：10451356
> 
> 赞同：0
> 
> 时间：2012-05-04T15:01:11.787
> 
> 标签：javascript, iframe

我有一个 iFrame 显示从单独的服务中提取的内容。但是，内容有一个按钮，可以通过 AJAX 水平加载更多内容，并将内容的高度向下推，从而导致滚动条。

有没有办法让 iFrame 响应这种变化，并在用户加载更多内容时增加它的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:30:13.403

看起来这篇微软文章可能有你的答案：http: [//support.microsoft.com/kb/278469](http://support.microsoft.com/kb/278469)

```
<HTML>
<HEAD>
<SCRIPT LANGUAGE=javascript>
<!--
function reSize()
{
    try{    
    var oBody   =   ifrm.document.body;
    var oFrame  =   document.all("ifrm");

    oFrame.style.height = oBody.scrollHeight + (oBody.offsetHeight - oBody.clientHeight);
    oFrame.style.width = oBody.scrollWidth + (oBody.offsetWidth - oBody.clientWidth);
    }
    //An error is raised if the IFrame domain != its container's domain
    catch(e)
    {
    window.status = 'Error: ' + e.number + '; ' + e.description;
    }
}
//-->
</SCRIPT>
</HEAD>
<BODY onload=reSize()>
    <iframe onresize=reSize() id=ifrm src=YOUR_PAGE_HERE></iframe>
</BODY>
</HTML> 
```

基本上，点击子文档的 resize 事件，并相应地调整 iframe 的大小。

# c++ - 控制台不会打印 - AllocConsole() 问题

> ID：10451361
> 
> 赞同：2
> 
> 时间：2012-05-04T15:01:23.857
> 
> 标签：c++, windows, multithreading, winapi, console

今天遇到一个奇怪的。我正在写一篇必须是多线程和网络化的物理课程。我不仅需要对 800 个 2D 对象执行一些简单的物理操作，而且还应该有独特的线程和对等网络。我的物理学有几个错误，线程工作和移动到网络上。

但在我得到所有这些之前，我遇到了一个奇怪的问题。我正在使用 OpenGl 渲染对象和屏幕空间，并决定轻松调试网络代码，我想将错误/状态消息打印到控制台以查看运行时发生的情况。我将以下内容添加到包含 Main 的类的构造函数中；

```
AllocConsole();
freopen("CONIN&", "r",stdin);
freopen("CONOUT&", "w",stdout);
freopen("CONOUT&", "w",stderr); 
```

根据我和以这种方式实现它的课程中其他人的理解，我现在应该可以使用

```
cout << "blarg" << endl; 
```

相反，控制台结束，并且当放置在 cout luine 上时将触发一个断点，但控制台没有打印任何内容:(

亲切的问候，西蒙·约翰逊

# uiview - 如何附加在视图之外发生的点击事件以动画/关闭它

> ID：10451362
> 
> 赞同：1
> 
> 时间：2012-05-04T15:01:24.940
> 
> 标签：uiview, event-handling

我有一个视图（假设是视图 B）位于另一个视图（视图 A）之上。当在视图 B 之外发生触摸点击时，我想制作一些动画。

到目前为止，我已将 taptouch 手势识别器附加到视图 A。问题是视图 A 正在拦截点击事件，即使对于发生在视图 B 上的事件（当它与视图 A 重叠时）也是如此。

```
UITapGestureRecognizer * recognizer = [[UITapGestureRecognizer alloc]
initWithTarget:self action:@selector(animateViewB)];
recognizer.delegate = self;
[self.viewA addGestureRecognizer:recognizer]; 
```

在视图 B 中单击时，我应该如何确保不会将点击事件发送到视图 A？如果我检查事件相对于视图 B 的位置并且我检测到它在其中。如何确保所有事件都转发到视图 B？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:34:26.083

即使您正在触摸 viewB，您的 viewA 仍在进行交互的原因是 UIImageViews 本机禁用了用户交互。

如果要拦截 UIImageView 上的交互，则必须设置：

```
imageView.userInteractionEnabled = YES; 
```

如果您将手势识别器添加到视图，则该视图将是唯一使用特定识别器的视图。

启用用户交互的最高级别视图（即顶部视图）将接收您的触摸或手势。禁用用户交互的视图将不会收到任何触摸或手势事件。

为了更好地理解视图层次结构，您应该阅读：[iOS 视图编程指南](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html)

# android - 在 ICS 中使用 ViewPager 更改 Android 背景颜色

> ID：10451363
> 
> 赞同：4
> 
> 时间：2012-05-04T15:01:26.290
> 
> 标签：android, colors, background, android-viewpager, android-4.0-ice-cream-sandwich

当我翻阅 ViewPager 的页面时，LinearLayout 的背景不断从主题中设置的灰色变为白色，并且仅在翻阅页面时才会这样做，仅在纵向模式下且仅在 ICS 中。

它在所有以前的 Android 版本中都能完美运行。

编辑：看起来它是由布局 xml 文件中的标签 android:ellipsize="marquee" 引起的。我怎样才能避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T13:43:16.723

我发现这个线程 [Android Viewpager 保存数据和视图](https://stackoverflow.com/questions/8891968/android-viewpager-saving-data-and-views)

通过使用 view_pager.setOffscreenPageLimit(4);，这个问题得到了解决（但是，你仍然可以看到第一次运行的白色背景，但之后它会起作用）。根据您的使用调整整数参数；）

# json - 让 Jersey 的 JSON POJO 支持从嵌入式 Jetty 工作？

> ID：10451366
> 
> 赞同：0
> 
> 时间：2012-05-04T15:01:41.337
> 
> 标签：json, rest, jetty, jersey

我正在尝试使用 Jersey 从我的 Jetty 服务器获取 JSON 格式的简单对象。

我不断收到错误：

```
SEVERE: A message body writer for Java class my.package.resources.Album, and Java type class my.package.resources.Album, and MIME media type application/json was not found 
```

一个问题是我不确定将 POJOMappingFeature 与 Jetty 放在哪里，我尝试了以下方法，但都没有改变错误：

```
myServletHolder.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true"); 
```

和

```
myServletContextHandler.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true"); 
```

我知道 Jersey 的基本 REST 功能是有效的，因为在我尝试 JSON 输出之前，我使用了纯文本并且效果很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T19:30:34.330

当我看到这个没有回答时，我感到非常失望，因为我整天都在与它作斗争。终于想通了，所以这对我有用。

我在做什么：

```
 ServletHolder servletHolder = new ServletHolder(new ServletContainer(new PackagesResourceConfig("my.package.with.resources")));
    servletHolder.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true"); 
```

我需要做的：

```
 Map<String,Object> initMap = new HashMap<String, Object>();
    initMap.put("com.sun.jersey.api.json.POJOMappingFeature", "true");
    initMap.put("com.sun.jersey.config.property.packages", "my.package.with.resources");
    ServletHolder servletHolder = new ServletHolder(new ServletContainer(new PackagesResourceConfig(initMap))); 
```

我必须确保将我的 Jersey 包和我的 POJOMappingFeature 标志指定为 init 参数。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T19:38:42.417

确保您的类路径中有`jackson`json-parser 和`JAXB`lib。

# windows - FlushFileBuffers 错误 - 句柄无效 - 错误号 6

> ID：10451369
> 
> 赞同：0
> 
> 时间：2012-05-04T15:01:44.173
> 
> 标签：windows, winapi, visual-c++, file-io

你好，我正在尝试做一个`FlushFileBuffers()`，但我总是得到一个错误，编号为 6 - 句柄无效。

我还尝试`FlushFileBuffers()`为整个驱动器卷以及特定的文件句柄做一个，我得到了相同的结果。

我尝试刷新远程进程的文件句柄的文件缓冲区。

我尝试在远程进程中执行以下操作。

```
public static bool FlushFileBuffersRemote(LockedFileEntry le)
{
    // StringBuilder sb = new StringBuilder(le.LockedFile);
    //UnloadModuleThreadProc umproc = new UnloadModuleThreadProc(UnloadModule);
    //IntPtr fpProc = Marshal.GetFunctionPointerForDelegate(umproc);                                                                                                    
    IntPtr currentProcess = NativeMethods.GetCurrentProcess();
    int processId = le.ProcessID;

    //StringBuilder sb=new StringBuilder(System.IO.Path.GetFileName(le.LockedFile));

    try
    {
        System.Threading.Thread.Sleep(200);

        IntPtr kernelMod = LoadLibrary("kernel32.dll");
        if (kernelMod == IntPtr.Zero)
            //throw new Exception("LoadLibrary of kernel32.dll failed");
            throw new Exception("Could not Flush File !");

        try
        {
            IntPtr freeLibraryAddr = GetProcAddress(kernelMod, "FlushFileBuffers");
            if (freeLibraryAddr == IntPtr.Zero)
                //throw new Exception("GetProcAddress of FreeLibrary failed");
                throw new Exception("Could not Flush File !");

            // Open the target process
            IntPtr proc = OpenProcess(ProcessAccessRights.PROCESS_ALL_ACCESS, true, (uint)processId);

            //IntPtr proc = OpenProcess(ProcessAccessRights.PROCESS_QUERY_INFORMATION | ProcessAccessRights.PROCESS_VM_OPERATION | ProcessAccessRights.PROCESS_VM_READ | ProcessAccessRights.PROCESS_VM_WRITE | ProcessAccessRights.PROCESS_CREATE_THREAD
            //, true, (uint)processId);

            if (proc == IntPtr.Zero)
                //throw new Exception("OpenProcess failed");
                throw new Exception("Could not Flush File !");

            SafeObjectHandle objectHandle = null;

            IntPtr handle = IntPtr.Zero;

            try
            {
                if (NativeMethods.DuplicateHandle(proc, le.HandlePtr, currentProcess, out objectHandle, 0, false, DuplicateHandleOptions.DUPLICATE_SAME_ACCESS))
                {
                    handle = objectHandle.DangerousGetHandle();
                }

                // Launch the thread, being FreeLibrary
                IntPtr remoteThreadHandle = CreateRemoteThread(proc, IntPtr.Zero, 0, freeLibraryAddr, handle, 0, IntPtr.Zero);
                if (remoteThreadHandle == IntPtr.Zero)
                    //throw new Exception("CreateRemoteThread failed");
                    throw new Exception("Could not Flush File !");

                return true;
            }
            finally
            {
                CloseHandle(proc);

                if (objectHandle != null)
                {
                    objectHandle.Close();
                }
            }
        }
        finally
        {
            FreeLibrary(kernelMod);
        }

        return true;
    }
    catch (Exception ex)
    {
        //Module.ShowError(ex);
        return false;
    }
} 
```

# keynote - 如何随机化 Keynote 幻灯片

> ID：10451371
> 
> 赞同：1
> 
> 时间：2012-05-04T15:01:54.147
> 
> 标签：keynote

我是一名教师，想将 Keynote 幻灯片用作拼写的抽认卡。我无法编写脚本，正在寻找要复制/粘贴到 Applescript 编辑器中并从那里运行的内容。我在另一个线程中遇到了以下脚本，它接近我需要的。

```
tell application "Keynote"
    tell slideshow 1
        show slide 3
        show slide 2
        show slide 1
        show slide 4
    end tell
end tell 
```

然而，我的目的有两个问题： 1\. 这不是一个随机的顺序，写出几个不同长度的不同演示文稿会很乏味。2\. 每张卡片显示的时间长度不受控制。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:05:26.170

这是一个混合索引并在每张幻灯片之间等待的脚本

```
set tdelay to 5 -- seconds  -- the length of  time each card is shown.

tell application "Keynote"
    activate
    tell slideshow 1 to repeat with i in my mixIndexes(count slides)
        show slide i
        delay tdelay
    end repeat
end tell

on mixIndexes(n)
    set l to {1}
    if n is 1 then return l
    repeat with i from 2 to n
        set end of l to i
        set j to some item of l
        tell item i of l to set {item i of l, item j of l} to {item j of l, it}
    end repeat
    return l
end mixIndexes 
```

# javascript - ASP.NET Ajax - OnFailure - 获取错误文本

> ID：10451374
> 
> 赞同：0
> 
> 时间：2012-05-04T15:01:57.487
> 
> 标签：javascript, ajax, asp.net-mvc, error-handling

我正在使用 MVC2，并试图向用户显示友好的错误消息，方法如下：

```
public ActionResult Foo()
{
  Response.StatusCode = 403;

  return new ContentResult() { Content="frindly error"}
} 
```

但是，我很难找到如何在 ajax OnFailure 回调中读取它：

```
function ajaxErrorHandler(context) {

// this fires an error, saying it's not a JSON object
    alert(context.get_response().get_object());

} 
```

我可以在萤火虫中看到响应是正确的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:42:15.760

这是代码：

```
alert(context.get_data()); 
```

这将显示“友好的错误”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T06:40:36.017

请尝试以下操作： onFailure 回调中的 context.get_message() ...

功能 OnFailure(context) { alert(context.get_message());

```
 } 
```

这对我有帮助。-- Sudipto www.supernovaservices.com

# iphone - setContentOffset 失去精度？

> ID：10451385
> 
> 赞同：5
> 
> 时间：2012-05-04T15:02:35.110
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiscrollview

我有一个应用程序，我需要将 a 初始化`contentOffset`为`UIScrollView`某个值。我注意到当我设置 时`contentOffset`，它会将点向上舍入到最接近的整数。我已经尝试使用两者`setContentOffset`，`setContentOffset:animated`但仍然得到相同的结果。当我尝试手动添加`contentOffset`到框架原点时，我没有得到我想要的结果。有人知道吗？

```
UIScrollView *myScrollViewTemp = [[UIScrollView alloc] initWithFrame: CGRectMake(CropThePhotoViewControllerScrollViewBorderWidth, CropThePhotoViewControllerScrollViewBorderWidth, self.myScrollViewBorderView.frame.size.width - (CropThePhotoViewControllerScrollViewBorderWidth * 2), self.myScrollViewBorderView.frame.size.height - (CropThePhotoViewControllerScrollViewBorderWidth * 2))];
[self setMyScrollView: myScrollViewTemp];
[[self myScrollView] setAutoresizingMask: UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
[[self myScrollView] setShowsVerticalScrollIndicator: NO];
[[self myScrollView] setShowsHorizontalScrollIndicator: NO];
[[self myScrollView] setBouncesZoom: YES];
[[self myScrollView] setDecelerationRate: UIScrollViewDecelerationRateFast];
[[self myScrollView] setDelegate:self];
[[self myScrollViewBorderView] addSubview: [self myScrollView]];
[myScrollViewTemp release];

UIImageView *myImageViewTemp = [[UIImageView alloc] initWithImage: self.myImage];
[self setMyImageView: myImageViewTemp];
[[self myScrollView] addSubview:[self myImageView]];
[[self myScrollView] setContentSize: [self.myImage size]];
[[self myScrollView] setMinimumZoomScale: self.previousZoomScale];
[[self myScrollView] setMaximumZoomScale: 10];
[[self myScrollView] setZoomScale: self.previousZoomScale animated:NO];
[[self myScrollView] setContentOffset: self.contentOffset animated:NO];
[myImageViewTemp release]; 
```

更新：更新代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T20:57:34.023

看来这不是我的错误，而是Apple有意或无意的预期行为。为了解决这个问题，您需要在 UIViewController 的 viewWillLayoutSubviews 方法中设置 contentOffset。显然，您需要在设置整个视图框架后设置 contentOffset。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T14:46:00.160

我也在这个问题上苦苦挣扎，但事实证明你可以在滚动视图上设置边界，它做同样的事情并且实际上可以处理 CGFloat 值。

```
CGPoint newOffset = CGPointMake(3.8, 0); 
```

我们在这里得到了新的偏移量。

```
[scrollView setContentOffset:newOffset]; 
```

在此行之后，当前偏移量为 (4,0)。

```
scrollView.bounds = CGRectMake(newOffset.x, newOffset.y, scrollView.bounds.size.width, scrollView.bounds.size.height); 
```

这给了你 (3.8, 0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-11T15:19:48.873

## 斯威夫特 4：

我进行了扩展以提高精度：

```
extension UIScrollView {
    func setPreciseContentOffset( x:CGFloat? = nil, y:CGFloat? = nil, animated:Bool,completion:@escaping ((Bool) -> Void)) {
        var myX:CGFloat = self.contentOffset.x
        var myY:CGFloat = self.contentOffset.y
        if let x = x {
            myX = x
        }
        if let y = y {
            myY = y
        }
        let point = CGPoint(x:myX,y:myY)
        if animated {
            // calculate duration
            var duration = 0.25 // min duration
            let destCoord =  myX != self.contentOffset.x ? myX : myY
            let diff = fabs ( self.contentOffset.x - destCoord)
            duration += TimeInterval(diff) / 1000
            UIView.animate(withDuration:duration, delay: 0.0, options: [.curveEaseInOut], animations: {
                self.bounds = CGRect(x:point.x,y:point.y,width: self.bounds.size.width,height: self.bounds.size.height)
            }, completion: { (finished: Bool) in
                completion(finished)
            })
        } else {
            self.bounds = CGRect(x:point.x,y:point.y,width: self.bounds.size.width,height: self.bounds.size.height)
            completion(true)
        }
    }
} 
```

## 用法：

```
// supposing you have to scroll manually in horizontal

self.myScrollview.setPreciseContentOffset(x:contentX, animated: true, completion: {[weak self] _ in
        guard let `self` = self else { return }
        // HERE the scroll is ended, pay attention the end scrolling delegates aren't be called  because you set manually self.bounds so HERE implement your scrolling end code
    }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:08:02.767

我认为这是因为如果 contentOffset 没有四舍五入，那么 UIScrollView 的任何子视图的内容都会变得模糊，尤其是文本。

# jquery - Knockout.js：ko.toJSON 不会将 viewmodel 转换为 JSON

> ID：10451387
> 
> 赞同：2
> 
> 时间：2012-05-04T15:02:40.530
> 
> 标签：jquery, json, iis, knockout.js

我有一个非常奇怪的问题，即我的视图模型没有在 IIS 上转换为 JSON。如果我在我的系统上调试相同的代码，它可以正常工作并将 viewmodesl 转换为 JSON。相同的代码在 IIS 上不会产生相同的结果。

这就是我的视图模型在调用 ko.toJSON 后的样子。

在 IIS 上：

```
"{"__ko_mapping__":{"ignore":[],"include":["_destroy"],"copy":[],"mappedProperties": {"__type":true,"Prop1":true,"Prop2":true,"Prop3":true,"Prop4":true,"Prop5":true}}}" 
```

在本地

```
{"__type":"DealerModel","Prop1":"","Prop2":"","Prop3":"","Prop4":"","Prop5":"Some Name  ltd"}}}" 
```

这就是我的 DealerModel 类的样子：

```
[Serializable]
Public class DealerModel
{
    public string Porp1 { get; set; }
    public string Porp2 { get; set; }
    public string Porp3 { get; set; }
    public string Porp4 { get; set; }
    public string Porp5 { get; set; }
} 
```

我想问题是不知何故 DealerModel 没有作为类型传递给 JSON 或其他东西。

有没有人遇到过这个问题？这里可能是什么问题？

这就是我将 viewmodesl 转换为 JS 的方式。服务器端的方法需要arraylist。

```
 var jsonViewModel = '';
            jsonViewModel = ko.toJSON(myNameSpace.ViewModel1);
            jsonViewModel = jsonViewModel.replace(/\/Date\((.*?)\)\//gi, "new Date($1)");
            saveArray[0] = jsonViewModel

            jsonViewModel = ko.toJSON(myNameSpace.ViewModel2);
            jsonViewModel = jsonViewModel.replace(/\/Date\((.*?)\)\//gi, "new Date($1)");
            saveArray[1] = jsonViewModel

$.ajax({
                type: "POST",
                url: "Services/SomeService.asmx/SaveObjects",
                cache: true,
                contentType: "application/json; charset=utf-8",
                data:"{args:" + ko.toJSON(saveArray) + "}",
                dataType: "json"
            }); 
```

SaveObjects 方法需要 arrayList。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:01:44.640

```
ko.toJSON(saveArray); 
```

它不会创建 json 对象。它将产生 json 字符串。

**创建 json 对象使用**

```
ko.toJS(saveArray); 
```

注意：要在没有原生 JSON 序列化程序的旧浏览器（例如，IE 7 或更早版本）上运行，您还必须引用[json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:01:41.090

不是`__ko_mapping__`由[ko.mapping 插件](http://knockoutjs.com/documentation/plugins-mapping.html)添加的吗？看起来该对象没有属性，就好像在 IIS 上您正在使用 ko.mapping 并尝试传递一个空的映射选项对象，但交换了参数：

```
var mappingOptions = { };
var data = { "FirstName": "Bruce". "LastName": "Banner" };
var vmBad = ko.mapping.fromJS(mappingOptions, data);
var vmGood = ko.mapping.fromJS(data, mappingOptions); 
```

vmBad 实际上是一个视图模型，只有映射插件使用的隐藏**ko_mapping**属性...如果有，则需要使用 ko.mapping 转换回 json 以删除该属性。（[jsfiddle](http://jsfiddle.net/8GVLJ/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:25:59.843

你应该能够做到这一点：

```
 $.ajax({
            type: "POST",
            url: "Services/SomeService.asmx/SaveObjects",
            data: { args: saveArray }
        }); 
```

如果这不起作用，您也可以发布您的端点代码吗？

**更新** 我从你的 ajax 帖子中删除了一些我认为你不需要的东西，因为我没有看到任何来自服务器的数据回调。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T09:02:47.067

当你打电话`ko.toJSON(myNameSpace.ViewModel1)`时应该是`ko.toJSON(myNameSpace.ViewModel1())`。您的视图模型的执行可能会正确显示您的属性。

# orm - 使用 Doctrine2 存储动态字段

> ID：10451391
> 
> 赞同：3
> 
> 时间：2012-05-04T15:02:55.250
> 
> 标签：orm, doctrine-orm

在我们的应用程序中，我们希望使用教义2，但是，我们想要提供一个功能，但对它的工作方式完全感到困惑。

我们希望我们的客户能够为我们的标准对象定义自定义字段。因此，这些字段将是即时生成的，而不是教义已知和映射的对象定义的一部分。

我们的第一个想法是使用 nosql（mongodb 或 amazon dynamodb）来存储其中的一些数据，但是由于我们想使用学说来处理我们的核心对象，我们希望保持在学说的范围内来实现这一点而不必扩展超越它来存储这些数据。

我想到的一件事是使用教义序列化/反序列化复杂对象的能力，并且只是将自定义字段名称及其值的散列作为对象中的额外属性，但是，这不允许我们拥有可以搜索的功能如果我们想允许这些字段...

有没有人尝试过用教义 2 或任何 orm 变体来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:25:26.907

您可以考虑使用 Doctrine ODM，它是 Doctrine 2，但适用于 NoSQL——我相信它们至少支持 MongoDB。

另一种方法是使用您所说的序列化。您可能不应该过多担心搜索 - 我建议使用单独的全文搜索引擎（Solr、ElasticSearch 或其他），因为它们为搜索提供了比 SQL 全文搜索更多的多功能性和性能。

第三，您可以将 Doctrine 与 NoSQL 一起使用。在这种情况下，您可能应该将查询抽象为服务类等，以便您可以使用 Doctrine 从 SQL DB 中查询数据，并使用其他方法查询剩余数据。

最后，您可以考虑使用键值表。一列表示键，另一列表示值。

# ruby - 如何在 Rack 应用程序中设置/获取会话变量？

> ID：10451392
> 
> 赞同：20
> 
> 时间：2012-05-04T15:02:55.987
> 
> 标签：ruby, session, rack

```
use Rack::Session::Pool
...
session[:msg]="Hello Rack" 
```

编辑：会话一词似乎没有解决。我在我的 config.ru 中包含了会话池中间件，并尝试在 ERB 文件中设置一个变量（我正在使用 Ruby Serve），它抱怨“未定义的局部变量或方法‘会话’”

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-04T21:18:15.943

`session`是一种方法，它是某些 Web 框架的一部分，例如[Sinatra](http://www.sinatrarb.com/intro.html#Using%20Sessions)和[Rails](http://guides.rubyonrails.org/action_controller_overview.html#accessing-the-session)都有`session`方法。普通`rack`应用程序没有`session`方法，除非您自己添加一个。

会话哈希存储在 key 下的 rack env 哈希中`rack.session`，因此您可以像这样访问它（假设您已将 rack 环境命名为您的应用程序`env`）：

```
env['rack.session'][:msg]="Hello Rack" 
```

或者，您可以使用 Rack 的内置[`request`对象](https://github.com/rack/rack/blob/master/lib/rack/request.rb)，如下所示：

```
request = Rack::Request.new(env)
request.session[:msg]="Hello Rack" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:48:28.370

你需要加载 `rack::session`模块下一个可能像这里的cookie [http://rack.rubyforge.org/doc/classes/Rack/Session/Cookie.html](http://rack.rubyforge.org/doc/classes/Rack/Session/Cookie.html)

这就像用例子来解释它。

# jquery - 使用 ASP 按钮 OnClientClick 在 UpdatePanel 中禁用 UpdateProgress

> ID：10451396
> 
> 赞同：0
> 
> 时间：2012-05-04T15:03:11.707
> 
> 标签：jquery, asp.net, asp.net-ajax, updatepanel

我的 UpdatePanel 中有一个 UpdateProgress 控件。在这个 UpdatePanel 中，我有一个 MultiView。这个 MultiView 有许多按钮来导航不同的视图。

我要做的只是在单击特定按钮时显示 UpdateProgress 动画。所有其他按钮应隐藏/禁用 UpdateProgress 控件。我正在通过 jQuery 尝试这个。我对任何方法都持开放态度。

这是我当前的代码：

```
 function hideProgress() {
    $('#<%= UpdateProgress.ClientID %>').hide();
    //console.log('hello');
    return false;
 } 
```

这是其中一个按钮：

```
 <asp:Button ID="btnCancel" runat="server" Text="Cancel" OnClick="btnCancel_Click" OnClientClick="hideProgress()" /> 
```

我知道我正在进入我的功能，因为我收到了我的日志消息。没有错误，它只是不起作用。

有人可以告诉我如何做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:56:35.273

试试这里提出的解决方案：[https](https://stackoverflow.com/a/6301744/1071574) ://stackoverflow.com/a/6301744/1071574 。

简而言之，这个想法是在您想要禁用它时，根据生成异步回发的控件，将`UpdateProgress`控件与“虚拟”（即不存在）相关联。`UpdatePanel`这将导致它永远不会显示（因为`UpdatePanel`它应该使用的唯一不存在）。

# c - 如何将包含 gdb 上的 - 符号的参数传递给我的应用程序？

> ID：10451397
> 
> 赞同：4
> 
> 时间：2012-05-04T15:03:12.003
> 
> 标签：c, gdb, command-line-arguments

我需要将一些参数传递给我的应用程序，其中包括 - 符号。问题是如果我通过`gdb a.out -foo baa`了，gdb 就会明白这些参数是针对它的，而不是针对我的应用程序的。如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:04:30.483

1.  `gdb -q a.out`
    在 gdb 内部：
2.  `run -foo baa`

    提示：gdb 的 -q 选项抑制介绍性版权消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T15:08:37.977

选项1：

*   `gdb --args ls /tmp`

选项 2：

*   `gdb ls`
*   `set args /tmp`
*   `run`

选项 3（不知道，感谢 Ahmed）：

*   `gdb ls`
*   `run /tmp`

也许还有其他人？

# java - java - 树结构方法

> ID：10451398
> 
> 赞同：0
> 
> 时间：2012-05-04T15:03:16.947
> 
> 标签：java, data-structures, recursion, binary-tree

我被要求编写一个递归方法来调查是否有任何单身孩子。我已经得到了基本情况，但是对于如何进行递归部分有点困惑，因为我需要同时调查右子树和左子树，如果其中一个有一个孩子，则返回 false，如果其中一个有，则返回 true 0 个孩子或复发。

到目前为止我所拥有的是：

```
public static boolean noSingleChildren( BinaryTreeNode t ) { 
    if (rightC == null || leftC == null) {
         return false;
    } else if (rightC == null && leftC == null) {
        return true;
    } else {
        return............
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:09:34.810

逻辑很简单：

1.  如果当前节点只有一个子节点，那么您就完成了。
2.  否则，递归地问每个非`null`孩子相同的问题，并使用逻辑“或”组合答案。

由于这看起来像家庭作业，因此我将实现留给您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:10:04.113

```
public static boolean noSingleChildren( BinaryTreeNode t ) { 
    if (rightC == null || leftC == null) {
         return false;
    } else if (rightC == null && leftC == null) {
        return true;
    } else {
        return noSingleChildren(t.getLeftBranch()) || noSingleChildren(t.getRightBranch());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:10:53.657

嗬，我爱树问题：

```
public static boolean hasSingleChildren( BinaryTreeNode t ) { 
    if (t == null) {
         return false;
    } else if (t.rightC == null && t.leftC != null) {
        return true;
    } else if (t.rightC != null && t.leftC == null) {
        return true;
    } else {
        return hasSingleChildren(t.rightC) || hasSingleChildren(t.leftC);
    }
} 
```

# c++ - 使用 boost::filesystem 时如何正确处理错误？

> ID：10451399
> 
> 赞同：1
> 
> 时间：2012-05-04T15:03:17.137
> 
> 标签：c++, boost, file-io, exception-handling

首先，这里有一些代码：

```
class A
{
public:
    A()
    {
        //...
        readTheFile(mySpecialPath);
        //...
    }

    A(boost::filesystem::path path)
    {
        //...
        readTheFile(path);
        //...
    }

protected:  
    void readTheFile(boost::filesystem::path path)
    {
        //First, check whether path exists e.g. by
        //using boost::filesystem::exists(path).
        //But how to propagate an error to the main function?
    }

    //...
}; 
```

```
int main(int argc, char **argv)
{
    A myClass;

    //Some more code which should not be run when A::readTheFile fails
} 
```

让主函数知道 A::readTheFile 无法打开文件的好解决方案是什么？我想在打开文件失败时终止执行。

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:19:29.743

抛出`readTheFile()`异常：

```
protected:  
    void readTheFile(boost::filesystem::path path)
    {
        //First, check whether path exists e.g. by
        //using boost::filesystem::exists(path).
        //But how to propagate an error to the main function?
        if (/*some-failure-occurred*/)
        {
            throw std::runtime_error("Failed to read file: " + path);
        }
    }

...

int main()
{
    try
    {
        A myObj;

        //Some more code which should not be run when A::readTheFile fails
    }
    catch (const std::runtime_error& e)
    {
        std::cerr << e.what() << "\n";
    }

    return 0;
} 
```

# ios5 - iOS 5.1 中未显示应用内购买产品

> ID：10451402
> 
> 赞同：1
> 
> 时间：2012-05-04T15:03:28.590
> 
> 标签：ios5, ios4, in-app-purchase

如果我使用 4.2 iOS 设备，例如第二代 iPod touch，产品就会出现。

如果我使用 iPhone 4s 等 5.1 iOS 设备，则不会显示任何产品。

有人有同样的问题吗？我正在沙盒环境中对此进行测试。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:14:07.757

内购沙盒太有气质了。如果您的代码在 4.2 而不是 5.1 上运行，那么问题可能是您的环境之一 - 有一长串可能出错的事情。

本指南是我在网上找到的关于应用程序购买的最佳帮助，并强调了 API 和测试的问题：

[http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)

我遇到的第一大问题是：

1.  未在测试设备上登录正确的 iTunes 沙盒帐户。经常检查。
2.  从设备上删除应用程序，清理构建，重新安装。这非常重要。
3.  检查您的应用内购买代码是否正确。
4.  将失败解释为我的应用程序有问题。有时失败意味着沙盒没有响应（无法连接到 iTunes 商店）。第二天我会运行相同的代码，它会工作。沙盒没有提供足够的错误信息让您知道沙盒是否失败、您的应用代码或与应用内代码数据不匹配。在代码中添加尽可能多的调试日志语句，以检查服务器的响应以及初始化时是否返回产品代码。

祝你好运 - 这是一个非常烦人的开发人员体验

# c# - 除以 100 精度

> ID：10451413
> 
> 赞同：2
> 
> 时间：2012-05-04T15:04:35.233
> 
> 标签：c#, double, precision, divide

我正在做某事，但遇到了一个我不明白的问题。

```
double d = 95.24 / (double)100;
Console.Write(d); //Break point here 
```

控制台输出为 0.9524（如预期的那样），但如果我在停止程序后查看“d”，它将返回 0.95239999999999991。

我已经尝试了所有可能的演员，结果是一样的。问题是我在其他地方使用了“d”，而这个精度问题使我的程序失败了。

那么它为什么这样做呢？我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T15:07:54.280

使用[十进制](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.71%29.aspx)而不是双精度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T15:08:02.657

[http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)

不足之处在于浮点数以相当于以 2 为底的科学记数法存储。有一个整数有效位被理解为在小数点前有一位，它被提高到 2 的整数幂。这允许以相对紧凑的格式存储数字；缺点是从基数 10 到基数 2 的转换会引入错误。

为了减轻这种情况，每当需要低幅度的高精度时，请使用`decimal`而不是`double`; decimal 是一种 128 位浮点数类型，旨在具有非常高的精度，但以缩小范围为代价（它只能表示高达 +- 79 nonillion、7.9E28 的数字，而不是 double 的 +- 1.8E308；对于大多数非天文、非物理计算机程序）和双倍的内存占用量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T15:09:21.680

一篇很好的文章，描述了很多：[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)它与 C# 无关，但与一般的浮点运算有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T15:08:23.077

您可以改用[小数](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.100%29.aspx)：

```
decimal d = 95.24 / 100m;
Console.Write(d); //Break point here 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T15:10:01.220

尝试：

```
double d = Math.Round(95.24/(double)100, 4);

Console.Write(d); 
```

编辑：或者使用小数，是的。我只是想让答案尽可能与问题相似:)

# c++ - 十六进制到字符串的转换

> ID：10451416
> 
> 赞同：0
> 
> 时间：2012-05-04T15:04:45.070
> 
> 标签：c++, string

假设我有一个包含十六进制数字的字符串，其中每 2 个十六进制数字代表 ASCII 集中的一个字符，我需要将包含十六进制数字的字符串转换回其等效字符

我在这段代码中找到了我想要的东西：-

```
#include <algorithm>
#include <stdexcept>

std::string hex_to_string(const std::string& input)
{
  static const char* const lut = "0123456789ABCDEF";
  size_t len = input.length();
  if (len & 1) throw std::invalid_argument("odd length");

  std::string output;
  output.reserve(len / 2);
  for (size_t i = 0; i < len; i += 2)
  {
    char a = input[i];
    const char* p = std::lower_bound(lut, lut + 16, a);
    if (*p != a) throw std::invalid_argument("not a hex digit");

    char b = input[i + 1];
    const char* q = std::lower_bound(lut, lut + 16, b);
    if (*q != b) throw std::invalid_argument("not a hex digit");

    output.push_back(((p - lut) << 4) | (q - lut));
  }
  return output;
} 
```

我对 C++ 比较陌生，我可以理解直到部分 output.push_back(((p - lut) << 4) | (q - lut));
假设字符串包含 72 的十六进制值（表示 ACSII 中的 char 'r'）并且就在输出字符串的 push_back 操作之前，p 和 lut 的值将是：- p = "789ABCDEF" lut = "0123456789ABCDEF "

但是，这个函数中的 (p - lut) 结果是 7。我不太明白这是怎么发生的。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:09:30.583

考虑以下情况，这会打印出“A”（0x41 是 A）。

```
std::string str="41";
std::stringstream ss; 
ss << std::hex << str;
int i;
ss >> i;
std::cout << static_cast<char>(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:16:08.570

那是指针算法。

的*值*`p`不是`"7890ABCDEF"`。_ 而是存储在`p`. 因为`p`是指针，所以它的*值*是地址。

`lut`指向元素 0，`p`指向同一数组中的元素 7。因此`p - lut`为 7。

对于任意`n`,`p + n`与 相同`&p[n]`，即`n`第-个元素的地址。在这里，这个事实被反过来使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:25:40.073

我会尝试分解正在发生的事情

```
 output.push_back(((p - lut) << 4) | (q - lut)); 
```

假设“72”

我们做地址的差异，得到索引

```
p - lut = 7 
q - lut = 2 
```

对十六进制代码的左侧部分应用 4 位左移

```
7 << 4 == 0x70 
```

二进制或合并两者

```
0x70 | 0x02 == 0x72 
```

# ssis - 获取维度键时在 SSIS 中加载事实表并不容易

> ID：10451418
> 
> 赞同：2
> 
> 时间：2012-05-04T15:04:47.840
> 
> 标签：ssis, data-warehouse, business-intelligence

我有一个需要连接到维度表的事实表，但是从源数据中获取这种关系并不容易。事实表是从具有大约一百万行的源表中加载的，因此根据最佳实践，我使用上一次运行日期来仅选择自上一次运行以来添加的源行。在获得我希望加载的行之后，我需要通过 3 个其他表才能对维度表进行查找。3 个表中的每一个也有大约一百万行。

我读过最佳实践说不要提取您知道不需要的源数据。最佳实践还说在源系统上尽可能轻触，因此避免 sql 连接。但就我而言，这两个最佳实践变得相互排斥。如果我只提取中间表中更改的行，那么我需要在源查询中进行连接。如果我从源系统中提取所有行，那么我提取的数据比我需要的多得多，这可能会导致 SSIS 内存/性能问题。

我倾向于加入源数据的提取，但我一直无法找到任何关于这种方法的优缺点的讨论。这是正确的还是不正确的？（源表和 DW 表在 Oracle 中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:09:01.033

您可以暂存您引用的 3 个源表吗？您可能在 DW 中不需要它们，但您可以将它们放在临时数据库中，纯粹是为了这个目的。但是，您仍然需要保持这些是最新的，但假设您可以拉回更改，这可能还不错。

# c# - _NT_SYMBOL_PATH adplus windbg 问题，无法设置名称

> ID：10451421
> 
> 赞同：3
> 
> 时间：2012-05-04T15:04:56.523
> 
> 标签：c#, .net, windbg, adplus

在命令行中，我运行了以下命令： C:> set _NT_SYMBOL_PATH=srv *c:\symbols* [http://msdl.microsoft.com/download/symbols](http://msdl.microsoft.com/download/symbols) ![在此处输入图像描述](../Images/b9c914c992081a0598ef09b2519f367b.png)

但是当我在 adplus.exe 中运行以下命令时

C:\Program Files (x86)\Windows 调试工具 (x86)> **ADPlus -crash -pn w3wp .exe -o C:\dumps**

我总是收到这个警告： ![在此处输入图像描述](../Images/7336eaf8febd9e48eec36f0756b7be44.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:10:04.577

当您`set`在 CMD shell 中运行该命令时，它只会为该特定 CMD 实例和通常的子进程设置环境变量。从您的问题来看，您可能正在从不同的 CMD 控制台运行`set`and命令。`ADPlus`如果是这样的话，这就是问题的根源。

为了设置永久环境变量，请执行以下操作

*   点击开始菜单
*   右键单击计算机并选择属性
*   选择高级系统设置
*   单击环境变量
*   在用户变量上单击新建...
*   在那里添加 _NT_SYMBOL_PATH 值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:11:35.937

我使用的变量的格式有点不同（注意“symsrv”而不是“srv”，并且引用了 dll。）可以在[Microsoft KB 311503](http://support.microsoft.com/kb/311503)上找到一个示例。

```
_NT_SYMBOL_PATH=symsrv*symsrv.dll*d:\debug\symbols*http://msdl.microsoft.com/download/symbols 
```

# java - 如何在 JSF 2 中指定 body id 属性？

> ID：10451424
> 
> 赞同：2
> 
> 时间：2012-05-04T15:05:05.620
> 
> 标签：java, jsf, jsf-2

我需要设置`id`html `body`-tag 的属性（用于硒测试）。但是那个 JSF 2`body`标记 ( `<h:body>`) 没有`id`属性。

那么，如何`id`在 JSF 2 中指定 html 正文的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:52:56.880

[`<h:body>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/body.html)确实不支持它（诚然也令我惊讶；它在 HTML 中完全有效）。[我已将其作为问题 2409](http://java.net/jira/browse/JAVASERVERFACES-2409)报告给 JSF 人员。

同时，假设您使用的是 Mojarra，您可以通过`BodyRenderer`如下扩展 Mojarra 来解决此问题：

```
package com.example;

import java.io.IOException;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;

import com.sun.faces.renderkit.html_basic.BodyRenderer;

public class BodyWithIdRenderer extends BodyRenderer {

    @Override
    public void encodeBegin(FacesContext context, UIComponent component) throws IOException {
        super.encodeBegin(context, component);

        if (component.getId() != null) {
            context.getResponseWriter().writeAttribute("id", component.getClientId(context), "id");
        }
    }

} 
```

要让它运行，请按如下方式注册它`faces-config.xml`（不，`@FacesRenderer`注释魔法无法覆盖标准渲染器）。

```
<render-kit>
    <renderer>
        <component-family>javax.faces.Output</component-family>
        <renderer-type>javax.faces.Body</renderer-type>
        <renderer-class>com.example.BodyWithIdRenderer</renderer-class>
    </renderer>
</render-kit> 
```

# vim - 转到行号时自动展开折叠

> ID：10451427
> 
> 赞同：6
> 
> 时间：2012-05-04T15:05:18.703
> 
> 标签：vim, macvim, folding

转到行号时有没有办法展开代码？例如，我键入`:35`第 35 行折叠的位置，然后我必须手动展开该部分才能真正到达该行。我想键入`:35`并让该代码自动展开，我的光标放在第 35 行，无需任何进一步的按键操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T18:31:17.310

如果您使用`35G`命令而不是`:35`，则可以通过以下映射实现此目的：

```
"[count]G       Also open fold under cursor when supplying [count] (i.e.
"               jumping to a particular line, not the end of the
"               buffer). Use [count]|gg| if you don't want this.
nnoremap <expr> G (v:count ? 'Gzv' : 'G') 
```

就`:35`其本身而言，这将很难实现。您必须`<CR>`通过 a拦截，通过and`:cmap <expr>`检查键入的命令，如果是数字，则操作命令，即附加到它；像这样：`getcmdtype()``getcmdline()``normal! zv`

```
cmap <expr> <CR> getcmdtype() == ':' && getcmdline() =~ '^\d\+$' ? 'normal! zv<CR>' : '<CR>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:47:14.697

`zv`. 来自`:help zv`：

```
 View cursor line: Open just enough folds to make the line in
    which the cursor is located not folded. 
```

虽然这个命令可能会以某种方式自动触发，但我还没有遇到过。不过，按原样使用命令对我很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:52:12.703

定义一个新的命令映射。在这个例子中，我选择了`\``g``z`：

```
:nmap \gz gg<Bar>zO 
```

# asp.net - 覆盖 ASP.NET AJAX 控件工具包的 TabContainer 控件中的默认 CSS

> ID：10451431
> 
> 赞同：4
> 
> 时间：2012-05-04T15:05:24.187
> 
> 标签：asp.net, css, ajax, asp.net-ajax, ajaxcontroltoolkit

我在 Web 应用程序中使用 ASP.NET AJAX TabContainer 控件。我已将图像放置在每个选项卡的标题中，而不是使用文本 - 但图像被截断 b/c TabContainer 的默认 CSS 声明标题只有 13px 高：

```
.ajax__tab_xp .ajax__tab_header .ajax__tab_tab 
 {
    height:13px;
    padding:4px;
    margin:0px;
    background:url("tab.gif") repeat-x;
  } 
```

我有一个我正在使用的 CSS 文件，并添加了以下行来覆盖 TabContainer 的默认 CSS 中包含的内容：

```
.ajax__tab_xp .ajax__tab_header .ajax__tab_tab 
 {
    height:83px;
    padding:4px;
    margin:0px;
    background:url("tab.gif") repeat-x;
  } 
```

但是它仍然使用默认的13px，为什么？

您可以在此处查看默认 css 文件：[默认 CSS 文件](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/820f953f86eb#Client/MicrosoftAjax.Extended/Tabs/Tabs.css)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:17:18.620

尝试使用 !important 像这样：

```
.ajax__tab_xp .ajax__tab_header .ajax__tab_tab 
{
    height:83px !important;
} 
```

顺便说一句，如果您不更改默认类的其他属性，则不必重新键入它们...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T16:00:27.120

经过很多混乱，我得到了它的工作，虽然我不完全确定我做了什么......

我想，我必须：

1.  手动将 CssClass 添加到 ajaxToolkit:TabContainer，即使通过它似乎没有生成的属性设置它也是如此。
2.  我尝试覆盖类 ajax__tab_xp，但这不起作用，所以我创建了一个名为 ajax__custom 的新类并且它起作用了。所以我的CSS最终看起来像：

    ```
    .ajax__custom .ajax__tab_header .ajax__tab_tab
    {
        height: 100px;
    } 
    ```

希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T21:00:43.413

我不得不修改一些网络表单，升级到引导程序，突然我注意到有些页面有

所以我看到生成的类是

```
class="ajax__tab_xp" 
```

因此，根据上面的答案，我发现我只需要 25px

```
 .ajax__tab_xp .ajax__tab_header .ajax__tab_tab 
    {
        height:25px !important;
    } 
```

希望这对其他人有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T23:58:55.057

戴夫，

我做了同样的事情。复制 Tab CSS 并修改为我心中的内容。他们我试图禁用标签。使用默认 CSS 可以正常工作。我认为我的版本中一定缺少某些东西。但是检查生成的源代码，TAB 似乎在页面中生成了一些 js 来启用/禁用 - 如果我们被允许在这个项目中这样做，我会首先使用 JQuery。

如果您不想去 javascript 城市，请不要担心并使用 !Important 覆盖默认 css。

# macos - 获取 plist 类型的文件

> ID：10451435
> 
> 赞同：0
> 
> 时间：2012-05-04T15:05:31.753
> 
> 标签：macos, cocoa, search, plist

我正在编写一个 OS X 应用程序供我个人使用，我想在其中获取并随后搜索所有 plist 类型的文件。我正在为第一项任务而苦苦挣扎。您能否指出我正确的方向或提供在线教程。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:25:59.870

尝试这样的事情：

```
NSError *error = nil;
NSString *folder = <# your folder #>;
NSArray *contents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:folder error:&error];
if (error) {
    <# deal with error #>
} else {
    NSString *path;
    for (NSString *entry in contents) {
        if ([entry hasSuffix:@"plist"]) {
            path = [folder stringByAppendingPathComponent:entry];
            <# do something with file at path #>
        }
    }
} 
```

此外，请检查类参考中**发现目录内容**部分中的相关方法。`NSFileManager`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:24:09.237

```
NSString *searchDirectory = ...;
NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath: searchDirectory 
                                                                     error: NULL];
[files enumerateObjectsUsingBlock: ^(NSString *fileName, NSUInteger idx, BOOL *stop) {
    if ([[fileName pathExtension] isEqualToString: @"plist"]) {
        NSString *filePath = [searchDirectory stringByAppendingPathComponent: fileName];
        // Do something with the plist file
    }
}]; 
```

# mysql - 具有动态结果限制的 MySQL 存储过程

> ID：10451436
> 
> 赞同：0
> 
> 时间：2012-05-04T15:05:46.207
> 
> 标签：mysql, stored-procedures

我的 MySQL 数据库中有一个存储过程，需要弄清楚如何限制返回以创建一些分页。

一些伪代码：

```
CREATE PROCEDURE `my_procedure`(IN member_id INT, IN start INT, IN end INT)
BEGIN
SELECT * FROM member_activity WHERE `member_id` = member_id
<if start is not null>
LIMIT start, end
<endif>
END; 
```

如果我传递一个空值，我如何简单地取消限制查询？

传递`my_procedure(1,null,null)`返回错误。

我知道我可以将整个查询包装在一个 IF 语句中，但我不想这样做，因为还有其他几个变量要保持同步会很烦人。是否可以在不编写整个查询两次的情况下完成此操作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:09:21.907

如[手册中所述](http://dev.mysql.com/doc/en/select.html)：

> 要检索从某个偏移量到结果集末尾的所有行，您可以为第二个参数使用一些较大的数字。此语句检索从第 96 行到最后一行的所有行：
> 
> ```
> 从 tbl 限制 95,18446744073709551615 中选择 *；
> ```

正如您所指出的，由于不能在子句中使用该[`IFNULL()`](http://dev.mysql.com/doc/en/control-flow-functions.html#function_ifnull)功能，因此在您执行命令之前，您可以执行以下操作：`LIMIT``SELECT`

```
SET `start` := IFNULL(`start`, 0);
SET `end`   := IFNULL(`end`  , 18446744073709551615); 
```

# apache - 如何根据我的 Rails 应用程序在 apache 或 nginx 中建立身份验证？

> ID：10451438
> 
> 赞同：1
> 
> 时间：2012-05-04T15:05:52.197
> 
> 标签：apache, authentication, nginx, token

我想限制对我的 apache 服务器提供的某些资源的访问。例如图像和视频。管理用户的主要 Web 应用程序在 ruby​​ on rails 上运行。

现在我想让apache检查访问请求是否有效。

用户应该提供他从我的 rails 应用程序收到的身份验证令牌，以便 apache 可以授予或拒绝对文件的访问权限。

如果请求看起来像这样，那将是最好的： http://myserver.com/filexyz.mp4?token= [jhg987gojhg876](http://myserver.com/filexyz.mp4?token=jhg987gojhg876)

有一些方法吗？

也许是一个 nginx 模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:21:23.583

模块[http://code.google.com/p/mod-auth-token/](http://code.google.com/p/mod-auth-token/) 完全符合我的要求。rails 应用程序和模块共享相同的密钥来生成令牌，因此可以限制对资源的访问超出时间窗口和特定 IP。

# html - 移动 HTML5 API 集成支持

> ID：10451440
> 
> 赞同：0
> 
> 时间：2012-05-04T15:06:04.770
> 
> 标签：html, api, mobile

**移动 HTML5 是否支持以下内容，如果不支持，为什么？**

```
Device connected to the net
    App loaded
    App calls remote API and responds to request for API credentials
    App receives session token
    App requests data from remote API using session token
    App pushes data to local database and screen
    App closed
Device disconnected from net
    App loaded
    App loads data from local database
    User inputs data which is added to the local database
    App closed
Device connected to net
    App loaded
    App sync's remote/local data
    App closed
Device connected to net
    App closed
    App push notifications enabled in device settings
    Push notification sent to device from remote server
    Native device prompt displayed for push notification 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:25:15.910

也许这会让你走上正确的道路？[http://mobilehtml5.org/](http://mobilehtml5.org/)

没有称为“推送通知”的 HTML5 功能，据我所知，也没有任何方法可以从浏览器在 iOS 或 Android 中创建本机通知。所以马上开始，这将是一个艰难的过程。

# spring - 在 Java 中运行时添加骆驼路线

> ID：10451444
> 
> 赞同：13
> 
> 时间：2012-05-04T15:06:23.177
> 
> 标签：spring, apache-camel

如何在 Java 运行时添加骆驼路线？我找到了一个 Grails 示例，但我已经用 Java 实现了它。

我的 applicationContext.xml 已经有一些预定义的静态路由，我想在运行时向它添加一些动态路由。可能吗？因为包含动态路由的唯一方法是编写 route.xml，然后将路由定义加载到上下文中。它将如何在现有的静态路由上工作？ [运行时路由](http://camel.apache.org/loading-routes-from-xml-files.html)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-04T16:27:00.500

您可以简单地在 CamelContext 上调用几个不同的 API 来添加路由......像这样

```
context.addRoutes(new MyDynamcRouteBuilder(context, "direct:foo", "mock:foo"));
....
private static final class MyDynamcRouteBuilder extends RouteBuilder {
    private final String from;
    private final String to;

    private MyDynamcRouteBuilder(CamelContext context, String from, String to) {
        super(context);
        this.from = from;
        this.to = to;
    }

    @Override
    public void configure() throws Exception {
        from(from).to(to);
    }
} 
```

有关完整示例，请参阅此单元测试...

[https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/builder/AddRoutesAtRuntimeTest.java](https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/builder/AddRoutesAtRuntimeTest.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T00:01:16.050

@Himanshu，请查看动态路由选项（即路由单），它可以帮助您根据特定条件动态路由到不同的“目的地”。

查看骆驼站点中的动态路由器帮助链接；

[http://camel.apache.org/dynamic-router.html](http://camel.apache.org/dynamic-router.html)

```
from("direct:start")
    // use a bean as the dynamic router
    .dynamicRouter(method(DynamicRouterTest.class, "slip")); 
```

和内滑法；

```
/**
 * Use this method to compute dynamic where we should route next.
 *
 * @param body the message body
 * @return endpoints to go, or <tt>null</tt> to indicate the end
 */
public String slip(String body) {
    bodies.add(body);
    invoked++;

    if (invoked == 1) {
        return "mock:a";
    } else if (invoked == 2) {
        return "mock:b,mock:c";
    } else if (invoked == 3) {
        return "direct:foo";
    } else if (invoked == 4) {
        return "mock:result";
    }

    // no more so return null
    return null;
} 
```

希望能帮助到你...

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T11:49:47.153

一种这样的解决方案可能是：

定义路线：

```
private RouteDefinition buildRouteDefinition() {
    RouteDefinition routeDefinition = new RouteDefinition();
    routeDefinition.from(XX).to(ZZ); // define any route you want
    return routeDefinition;
} 
```

获取模型上下文并创建路由：

```
CamelContext context = getContext();
ModelCamelContext modelContext = context.adapt(ModelCamelContext.class);
modelContext.addRouteDefinition(routeDefinition); 
```

还有更多获取骆驼上下文的方法。仅举几例：

*   在处理器中，您可以使用`exchange.getContext()`
*   通过 RouteBuilder 参考，您可以使用`routeBuilder.getContext()`

# html - 同一行上的两个 div 块

> ID：10451445
> 
> 赞同：73
> 
> 时间：2012-05-04T15:06:29.843
> 
> 标签：html, css

如何以同一“行”两个 div 块为中心？

第一个分区：

```
<div id=bloc1><?php echo " version ".$version." Copyright &copy; All Rights Reserved."; ?></div> 
```

第二个分区：

```
<div id=bloc2><img src="..."></div> 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-05-04T15:14:47.510

CSS：

```
#block_container
{
    text-align:center;
}
#bloc1, #bloc2
{
    display:inline;
} 
```

HTML

```
<div id="block_container">

    <div id="bloc1"><?php echo " version ".$version." Copyright &copy; All Rights Reserved."; ?></div>  
    <div id="bloc2"><img src="..."></div>

</div> 
```

此外，您不应该将原始内容放入`<div>`'s，使用适当的标签，例如`<p>`or `<span>`。

编辑：这是一个[jsFiddle 演示](http://jsfiddle.net/JDERf/)。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2017-04-17T07:23:56.243

您可以通过多种方式做到这一点。

> 1.  使用`display: flex`

```
#block_container {
    display: flex;
    justify-content: center;
}
```

```
<div id="block_container">
  <div id="bloc1">Copyright &copy; All Rights Reserved.</div>
  <div id="bloc2"><img src="..."></div>
</div>
```

> 2.  使用`display: inline-block`

```
#block_container {
    text-align: center;
}
#block_container > div {
    display: inline-block;
    vertical-align: middle;
}
```

```
<div id="block_container">
  <div id="bloc1">Copyright &copy; All Rights Reserved.</div>
  <div id="bloc2"><img src="..."></div>
</div>
```

> 3.  使用`table`

```
<div>
    <table align="center">
        <tr>
            <td>
                <div id="bloc1">Copyright &copy; All Rights Reserved.</div>
            </td>
            <td>
                <div id="bloc2"><img src="..."></div>
            </td>
        </tr>
    </table>
</div>
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-06-21T09:27:55.047

我认为现在，最好的做法是使用`display: inline-block;`

看起来像这个演示：[https ://jsfiddle.net/vjLw1z7w/](https://jsfiddle.net/vjLw1z7w/)

**编辑（02/2021）：**

现在的最佳实践可能是`display: flex; flex-wrap: wrap;`在 div 容器和`flex-basis: XX%;`div 上使用

看起来像这个演示：[https ://jsfiddle.net/42L1emus/1/](https://jsfiddle.net/42L1emus/1/)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-01-15T14:34:22.660

您可以使用 HTML 表格：

```
<table>
<tr>
<td>
<div id="bloc1">your content</div>
</td>
<td>
<div id="bloc2">your content</div>
</td>
</tr>
</table> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-04T15:12:06.960

尝试使用 HTML 表格或使用以下 CSS：

```
<div id="bloc1" style="float:left">...</div>
<div id="bloc2">...</div> 
```

（或使用 HTML 表格）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-04-15T19:07:21.140

[`diplay:flex;`](https://developer.mozilla.org/en/docs/Web/CSS/flex)是您可以添加到所有[现代浏览器](http://caniuse.com/#feat=flexbox)支持的所有上述答案的另一个替代答案。

```
#block_container {
  display: flex;
  justify-content: center;
}
```

```
<div id="block_container">
  <div id="bloc1">Copyright &copy; All Rights Reserved.</div>
  <div id="bloc2"><img src="..."></div>
</div>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-19T14:52:07.630

HTML 文件

```
 <div id="container">
      <div id="bloc1">Copyright &copy; All Rights Reserved.</div>
      <div id="bloc2"><img src="..."></div>
    </div> 
```

CSS 文件

```
 #container
    {
        text-align:center;
    }
    #bloc1, #bloc2
    {
        display:inline;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-04T15:15:11.427

我首先要做的是编写以下 CSS 代码：

```
#bloc1 {
   float: left
} 
```

这将`#bloc2`与`#bloc1`.

为了使它成为中心，我会在一个单独的 div 中添加`#bloc1`和。`#bloc2`例如：

```
<style type="text/css">
    #wrapper { margin: 0 auto; }
</style>
<div id="wrapper">
    <div id="bloc1"> ... </div>
    <div id="bloc2"> ... </div>
</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-14T21:30:31.210

在 div 中使用表格。

```
<div>
   <table style='margin-left: auto; margin-right: auto'>
        <tr>
           <td>
              <div>Your content </div>
           </td>
           <td>
              <div>Your content </div>
           </td>
        </tr>
   </table>
</div> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-18T20:18:34.403

使用下面的CSS：

```
#bloc1,
#bloc2 {
display:inline
} 

body {
text-align:center
} 
```

它将使上述 2 个 div 位于同一行的中心。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-11-22T12:43:30.263

Use Simple HTML

```
<frameset cols="25%,*">
  <frame src="frame_a.htm">
  <frame src="frame_b.htm">
</frameset> 
```

# javascript - jQuery的两个下拉菜单？（动态）

> ID：10451447
> 
> 赞同：1
> 
> 时间：2012-05-04T15:06:34.180
> 
> 标签：javascript, jquery, menu, drop-down-menu

如果我有两个下拉菜单，例如：

```
<select>
<option value="option1">option 1</option>
<option value="option2">option 2</option>
<option value="option3">option 3</option>
</select> 
```

其次是：

```
<select>
<option value="option5">option 5</option>
<option value="option8">option 8</option>
<option value="option9">option 9</option>
</select> 
```

我怎样才能做到这一点，如果有人从第一个下拉列表中选择选项 2，那么第二个下拉列表中只有选项 9 可用？有人告诉我我需要存储这些值，但对这一切有点迷茫？

谢谢你的帮助。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:13:16.663

证明：http: [//jsfiddle.net/iambriansreed/VLvYA/](http://jsfiddle.net/iambriansreed/VLvYA/)

根据要求禁用，也自动选择选项。

```
$('#first-select').change(function(){
    $('#second-select option').prop('disabled',false);
    if(this.value == 'option2')
        $('#second-select option:not([value="option9"])')
            .prop('disabled',true).parent().val('option9');

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:14:37.417

我假设您要根据从下拉列表 1 中选择的选项索引删除第二个下拉选项。

**编辑：**删除了不需要的额外克隆。

[**演示**](http://jsfiddle.net/xVNTs/2/)

```
$(function () {
    var $dd2Opt = $('#dd2 option').clone();
    var $dd2 = $('#dd2');
    $('#dd1').change(function () {
        $dd2.empty().append($dd2Opt.slice(this.selectedIndex + 1));
    });
}); 
```

**HTML**

```
<select id="dd1">
  <option value="option1">option 1</option>
  <option value="option2">option 2</option>
  <option value="option3">option 3</option>
</select>

<select id="dd2">
  <option value="option5">option 5</option>
  <option value="option8">option 8</option>
  <option value="option9">option 9</option>
</select> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-04T15:19:30.753

```
var opts = $('select.second option');
$('select:first').on('change',function() {
  if(this.value == 'option2') {
     $(this).next('select.second').empty().append(opts[this.selectedIndex + 1]).change();
  } else {
    $(this).next('select.second').empty().append(opts).change();
  }
}) 
```

**HTML**

```
<select>
<option value="option1">option 1</option>
<option value="option2">option 2</option>
<option value="option3">option 3</option>
</select>
<select class="second">
<option value="option5">option 5</option>
<option value="option8">option 8</option>
<option value="option9">option 9</option>
</select> 
```

**[现场证明](http://jsfiddle.net/fgrvK/1/)**

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-04T15:18:20.500

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#mainSelect').live('change', function () {
                $('#subSelect option').hide();
                $('#subSelect option[data-option="' + $(this).val() + '"]').show();
                $('#subSelect option:visible:first').attr('selected', true);
            });

            $('#mainSelect').trigger('change');
        });
    </script>
</head>
<body>
    <select id="mainSelect">
        <option value="option1">option 1</option>
        <option value="option2">option 2</option>
        <option value="option3">option 3</option>
    </select>
    <select id="subSelect">
        <option value="option5" data-option="option1">option 5</option>
        <option value="option8" data-option="option3">option 8</option>
        <option value="option9" data-option="option2">option 9</option>
    </select>
</body>
</html> 
```

# joomla - Joomla 1.5 中的模块填充

> ID：10451455
> 
> 赞同：0
> 
> 时间：2012-05-04T15:07:07.803
> 
> 标签：joomla, joomla-extensions, joomla-template

我想在一个模块中为我的横幅添加“5px padding”。我已经和艺术家一起制作了一个模板。简单地说，我在 index.php 文件中添加了一个名为“top”的模块，如下所示：

```
<div class="logo_custom">
  <jdoc:include type="modules" name="logo" />
</div> 
```

它出现带有“填充：0 0;”的横幅。如何为我的横幅添加 5 像素的内边距？我试过用 div，用 css 文件调用一个类。但不起作用。如果有人有任何想法，请与我分享。

提前致谢。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T00:50:40.653

```
.logo_custom { padding: 5px; } 
```

# c# - Kinect 骨骼跟踪不起作用

> ID：10451456
> 
> 赞同：1
> 
> 时间：2012-05-04T15:07:10.427
> 
> 标签：c#, kinect

所以目前我有一个`bool` `PersonDetected`总是设置为`false` **除非**检测到骨架。但目前当 a`SkeletonTrackingState`被标记为`Tracked`, 但`PersonDetected`仍设置为 false。提前致谢

### 我的代码

```
Skeleton skeletons = new Skeleton();

            if ((skeletons.TrackingState == SkeletonTrackingState.Tracked ||
                skeletons.TrackingState == SkeletonTrackingState.PositionOnly) &
                skeletons.TrackingState != SkeletonTrackingState.NotTracked)
                {
                    PersonDetected = true;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T02:08:56.353

我发现它没有注册的原因是因为`skeletons`它只是一个变量，而不是`Skeleton`被跟踪，所以我添加了以下代码以确保它有效：

```
Skeleton skeletons = new Skeleton();

            skeletons = (from s in allSkeletons
                         where s.TrackingState == SkeletonTrackingState.Tracked ||
                         s.TrackingState == SkeletonTrackingState.PositionOnly
                         select s).FirstOrDefault();

            if (skeletons == null)
            {
                return;
            }

            if ((skeletons.TrackingState == SkeletonTrackingState.Tracked ||
                skeletons.TrackingState == SkeletonTrackingState.PositionOnly))
            {
                PersonDetected = true;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:12:37.883

调试“差异”。我敢打赌它会高于9

在您增加差异的调试部分之后。

# titanium - 钛 + 堆叠暴徒

> ID：10451462
> 
> 赞同：1
> 
> 时间：2012-05-04T15:07:51.707
> 
> 标签：titanium, stackmob

我想知道 Titanium 上的 Stack Mob 是否支持推送通知。有一些博客解释了 Stack Mob with Titanium，但没有专门针对推送通知的。

# c# - 如何在c#中使用webBrowser控件获取用户谷歌经纬度？

> ID：10451465
> 
> 赞同：0
> 
> 时间：2012-05-04T15:07:55.183
> 
> 标签：c#, .net, google-maps-api-3, webbrowser-control

我可以使用 c# webbrowser 控件使用 google javascript api v3 获取纬度和经度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:59:31.497

您不必使用 Google 的任何 javascript API 来获取地理编码数据。只需使用 WebRequest 对象并从地理编码服务提供的 XML 文件中读取结果。

```
WebRequest req = System.Net.WebRequest.Create("your adress");
WebResponse response = req.GetResponse(); 
```

从那里，您可以获取 Stream 并创建一个 StreamReader，如下所示：

```
Stream stream = response.GetResponseStream();
StreamReader reader = new StreamReader(stream); 
```

之后，只需使用元素标记“lat”和“lng”对 XML 进行解码。然后，您应该能够获得您正在寻找的数据。

如需更多信息，尤其是使用 Google 地理编码服务的服务条款，请访问 Google Maps API 网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:25:59.193

```
 string strSelect = textBoxGpsLatitude.Text;
            strSelect += ",";
            strSelect += textBoxGpsLongitude.Text;

            webBrowser3.Navigate("http://maps.google.com/maps?q=" + strSelect, false); 
```

# cakephp - 如何启用 cakephp 媒体插件上传 pdf 文件和文档

> ID：10451466
> 
> 赞同：1
> 
> 时间：2012-05-04T15:08:00.040
> 
> 标签：cakephp, file-upload, cakephp-1.3

我在我的项目中应用了媒体插件，但这仅适用于 jpeg 和 png .. 你可以在演示中看到... [演示](http://pixelcone.com/fileuploader/demo/)

有一个允许 pdf 文件但不起作用的验证。在附件.php

```
 var $validate = array(
    'file' => array(
        'resource'   => array('rule' => 'checkResource'),
        'access'     => array('rule' => 'checkAccess'),
        'location'   => array('rule' => array('checkLocation', array(
            MEDIA_TRANSFER, '/tmp/'
        ))),
        'permission' => array('rule' => array('checkPermission', '*')),
        'size'       => array('rule' => array('checkSize', '5M')),
        'pixels'     => array('rule' => array('checkPixels', '1600x1600')),
        'extension'  => array('rule' => array('checkExtension', false,
         array(
            'jpg', 'jpeg', 'png', 'tif', 'tiff', 'gif', 'pdf', 'tmp'
        ))),
        'mimeType'   => array('rule' => array('checkMimeType', false, array(
            'image/jpeg', 'image/png', 'image/tiff', 'image/gif',
      'application/pdf'
    )))),
    'alternative' => array(
        'rule'       => 'checkRepresent',
        'on'         => 'create',
        'required'   => false,
        'allowEmpty' => true,
    )); 
```

这是默认配置，但不适用于仅适用于图像的 pdf 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:27:18.667

如果您使用的是 CakePHP 2.x，我会推荐 AjaxMultiUpload 插件，它应该会为您解决这个问题：http: [//bakery.cakephp.org/articles/srs2012/2012/03/12/ajaxmultiupload_plugin_for_cake_2_0_x_and_2_1](http://bakery.cakephp.org/articles/srs2012/2012/03/12/ajaxmultiupload_plugin_for_cake_2_0_x_and_2_1)

# iphone - 每次我在用户登录后尝试在 Facebook 上发帖时都显示空白屏幕

> ID：10451467
> 
> 赞同：1
> 
> 时间：2012-05-04T15:08:01.860
> 
> 标签：iphone, facebook, uiwebview

我正在使用 FaceBook Connect api 在我的应用程序中连接到 Facebook。我正在使用此 api 在我的墙上发布消息。但是当我下次尝试发布时用户登录后，空白屏幕显示几秒钟然后消失，之后显示该帖子屏幕。每次我在 Fb 上发布消息时都会发生这种情况

我需要删除空白屏幕。

# mysql - 我可以在 sqlalchemy 中使用 MYSQL 空间扩展吗？

> ID：10451473
> 
> 赞同：2
> 
> 时间：2012-05-04T15:08:18.350
> 
> 标签：mysql, sqlalchemy, geospatial

我正在寻找一种将空间数据映射到 sqlalchemy 对象的方法。有人可以告诉我是否有这样的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-07-28T09:05:54.183

[您可以使用GeoAlchemy](https://pypi.org/project/GeoAlchemy/)创建`MySQL`空间列，但不再维护此包。使用[GeoAlchemy2](https://pypi.org/project/GeoAlchemy2/)是不可能的，因为根据[文档](https://geoalchemy-2.readthedocs.io/en/latest/ "文件")它不支持。`MySQL`

无论如何，`GeoAlchemy`没有必要`MySQL`在`Python`. 您可以通过创建自定义`Geometry`类来实现它：

```
from sqlalchemy import func
from sqlalchemy.types import UserDefinedType

class Geometry(UserDefinedType):
    def get_col_spec(self):
        return 'GEOMETRY'

    def bind_expression(self, bindvalue):
        return func.ST_GeomFromText(bindvalue, type_=self)

    def column_expression(self, col):
        return func.ST_AsText(col, type_=self) 
```

然后，您可以在模型中使用此自定义类型：

```
your_column = Column(Geometry, nullable=False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:40:27.477

是的，您需要查看[GeoAlchemy](https://pypi.org/project/GeoAlchemy/0.7.2)软件包。

为表带来一个名为 GeometryColumn 的列类型。

过滤也是非常 sqlalchemic 的。从文档：

```
s = session.query(Spot).filter(Spot.geom.kml == '<Point><coordinates>-81.4,38.08</coordinates></Point>').first() 
```

它并不比一个简单的`pip install GeoAlchemy`.

# ios - TTS：适用于 iOS 的 Ivona SDK - Project 中的实施将应用程序增加到 200MB+

> ID：10451478
> 
> 赞同：0
> 
> 时间：2012-05-04T15:08:26.577
> 
> 标签：ios, text-to-speech, filesize, voice

我目前正在试用适用于 iOS 的 ivona SDK，它的声音很棒而且非常自然。
但我使用的声音（德国女性）有一个文件大小为 230 MB 的语音文件。
当我想使用 4 个声音时，我的应用程序大约**1GB**大。

而且离线也没用。这个声音只是为了测试阶段吗？还是也用于生产？

我认为为一个小型 TTS 应用程序实现一些声音太可怕了，以至于应用程序的大小非常非常大......

有人可以给我一个答案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:16:11.190

也许最好的解决方案是不包含语音，并允许用户下载他们更喜欢使用的语音。如果您尝试通过每个声音获利，您还可以将每个声音解锁为单独的应用内购买。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T01:16:37.580

用于测试的声音确实与用于生产的声音相同。但在 IVONA，它们为每种语音提供不同的大小：您可以选择将 IVONA 语音用于汽车/导航系统。这些声音是有限的，所以它们只有大约 70 MB 的大小，它们是 16 kHz 而不是 22 kHz。如果您有导航应用程序，这些都是给您的。否则，请尝试一下，您可以询问您在 IVONA 的联系人。

在我的项目中，我们使用了 5 个这样的声音，每个“vox”文件在 65-74 MB 之间。但即使是这些较小的声音也会使捆绑包的增长幅度很大（但不如您的 230 MB），我们决定按需下载它们（按 IAP，由 Apple 托管）。考虑到用户通常只需要一种语言，因此将多个语音与应用程序捆绑在一起会浪费空间。

另一种选择是准备一组样本并将它们捆绑在一起，而不是 IVONA 语音。当然，这仅在您有一组有限的没有动态部分的文本时才有效。并且可能编写一个小型声音队列引擎来将声音拼接在一起，例如数字。

# actionscript-3 - 在 Stage 中获取对象的问题

> ID：10451479
> 
> 赞同：0
> 
> 时间：2012-05-04T15:08:30.830
> 
> 标签：actionscript-3, flash, loops

所以，我使用这段代码从我的舞台上删除了几个电影剪辑：

```
for (var i:uint = 0; i < this.numChildren; i++)
{
    if (this.getChildAt(i) is MovieClip
        && pecasInGame.indexOf(this.getChildAt(i)) >= 0)
    {
        removeChild(this.getChildAt(i));
    }
} 
```

但它的效果并不好......我有 5 个影片剪辑要删除，它们都是动态添加的，当添加这些影片剪辑时，我将其插入到这个数组“pecasInGame”中，当有五个时我尝试使用删除上述循环。

问题是，它只删除了 0、2 和 4 个对象中的 3 个。循环中甚至没有列出 1 和 3。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:38:54.717

您正在删除显示对象，因此在您的循环继续时索引正在更改。以这种方式更改它：

```
for (var i:uint = this.numChildren-1; i >= 0 ; i--)
{
    if (this.getChildAt(i) is MovieClip && pecasInGame.indexOf(this.getChildAt(i)) >= 0)
    {
        removeChild(this.getChildAt(i));
    }
} 
```

其他选项：使用您的数组删除对象，像这样

```
for (var i:int=0; i<pecasInGames.length; i++) {
     removeChild (pecasInGames[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:16:51.770

问题是您正在迭代孩子并同时删除，所以孩子的索引正在改变，这导致了问题。

如果要从显示列表中删除所有影片剪辑，请执行以下操作：

```
for each(var mc:MovieClip in pecasInGame)
{
     if(getChildIndex(mc) != -1)
         removeChild(mc);
} 
```

# c# - 我可以在 Visual Studio 中刷新 XML 注释以反映已更改的参数吗？

> ID：10451482
> 
> 赞同：33
> 
> 时间：2012-05-04T15:08:34.583
> 
> 标签：c#, visual-studio-2010, comments

如果我编写函数：

```
 public static uint FindAUint(double firstParam)
    {

    } 
```

我可以通过键入“///”来生成 xml 注释，它给出：

```
 /// <summary>
    /// *Here I type the summary of the method*
    /// </summary>
    /// <param name="firstParam">*Summary of param*</param>
    /// <returns>*Summary of return*</returns>
    public static uint FindAUint(double firstParam)
    {

    } 
```

如果我决定我需要将我的方法更新为：

```
 /// <summary>
    /// *Here I type the summary of the method*
    /// </summary>
    /// <param name="firstParam">*Summary of param*</param>
    /// <returns>*Summary of return*</returns>
    public static uint FindAUint(double firstParam,double newParam, double newParam2)
    {

    } 
```

有没有办法让 Visual Studio 将新参数添加到 xml 中而不会丢失以前的描述？

（我应该提到我正在使用 Visual Studio Express；不过，我不会让微软在 Express 版本中禁止该功能）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T15:10:30.190

查看[GhostDoc](http://submain.com/products/ghostdoc.aspx)。它是一个 Visual Studio 扩展，可为您生成 XML 注释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T15:20:35.390

[ReSharper](https://www.jetbrains.com/resharper/)对我来说非常好用；只要 XML 注释与方法的签名不匹配，它就会发出警告。

此外，使用`ALT`+`ENTER`键盘快捷键，ReSharper 可以通过添加/删除必要的 XML 注释来修复这些不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-30T03:48:52.510

一种解决方法是选择 XML 文档的当前块并将其注释掉。然后在注释掉的代码下创建一个新行。将使用所有新值创建一个新的 XML 文档块，您可以复制粘贴旧值。

例子：

```
/// <summary>
/// Does something
/// </summary>
/// <param name="bar">True if not false</param>
/// <returns>Some really important value</returns>
public bool Foo(bool bar) {
    return bar;
} 
```

方法的改变

```
/// <summary>
/// Does something
/// </summary>
/// <param name="bar">True if not false</param>
/// <returns>Some really important name</returns>
public string Foo(bool bar, string bar2, int bar3) {
    if (bar) {
        return bar2 + bar3.ToString();
    } else {
        return "foobar";
    }
} 
```

注释掉文档

```
///// <summary>
///// Does something
///// </summary>
///// <param name="bar">True if not false</param>
///// <returns>Some really important name</returns>
public string Foo(bool bar, string bar2, int bar3) {
    if (bar) {
        return bar2 + bar3.ToString();
    } else {
        return "foobar";
    }
} 
```

在注释掉的代码下的新行中输入`///`以获取生成的 XML 文档。

```
///// <summary>
///// Does something
///// </summary>
///// <param name="bar">True if not false</param>
///// <returns>Some really important value</returns>
/// <summary>
/// 
/// </summary>
/// <param name="bar"></param>
/// <param name="bar2"></param>
/// <param name="bar3"></param>
/// <returns></returns>
public string Foo(bool bar, string bar2, int bar3) {
    if (bar) {
        return bar2 + bar3.ToString();
    } else {
        return "foobar";
    }
} 
```

# git - 从 Photoshop 导出的文件始终在 git 中注册为已更改

> ID：10451484
> 
> 赞同：1
> 
> 时间：2012-05-04T15:08:43.923
> 
> 标签：git, png, photoshop

我正在开发一个带有大量 PNG 文件的 iOS 应用程序，这些文件是通过 Photoshop 的切片和“保存为 Web”功能导出的。在许多情况下，一次导出会生成大量 PNG，其中只有一个实际发生了变化。然而，我的**git 存储库将每个导出的文件都注册为 changed**。我尝试在 Save for Web 中关闭元数据，但似乎没有什么不同。

知道如何避免这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:36:07.900

[ProGit Book](http://progit.org/book/ch7-2.html)中有一节专门处理比较应该对您有所帮助的二进制文件。引用图像文件的位大约在我链接到的页面的中间。

那里建议的方法要求您下载[ExifTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)并配置 git 以使用它来区分您的 .png 文件，但我怀疑它需要您重新打开元数据的保存。我不知道这是否适合您？

# audio - MONOGRAM AAC 编码器生成没有音频的文件

> ID：10451491
> 
> 赞同：2
> 
> 时间：2012-05-04T15:09:24.747
> 
> 标签：audio, directshow, capture, aac, encoder

我尝试使用带有 MONOGRAM 的音频捕获设备从实时流中捕获音频

AAC 编码器从[http://blog.monogram.sk/janos/2007/12/11/free-aac-encoder-filter/](http://blog.monogram.sk/janos/2007/12/11/free-aac-encoder-filter/)下载，

但它会生成没有音频的 1kb 大小的音频文件。

谁能告诉我这是什么原因？

谢谢你。

# c++ - 如何在 C++ 中将 unsigned char[] 打印为 HEX？

> ID：10451493
> 
> 赞同：14
> 
> 时间：2012-05-04T15:09:32.973
> 
> 标签：c++, hex, printf, unsigned-char

我想打印以下散列数据。我该怎么做？

```
unsigned char hashedChars[32];
SHA256((const unsigned char*)data.c_str(),
       data.length(), 
       hashedChars);
printf("hashedChars: %X\n", hashedChars);  // doesn't seem to work?? 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T15:11:06.650

十六进制格式说明符需要一个整数值，但您提供的是一个`char`. 您需要做的是将`char`值单独打印为十六进制值。

```
printf("hashedChars: ");
for (int i = 0; i < 32; i++) {
  printf("%x", hashedChars[i]);
}
printf("\n"); 
```

由于您使用的是 C++，尽管您应该考虑使用`cout`而不是`printf`（这对于 C++ 来说更惯用。

```
cout << "hashedChars: ";
for (int i = 0; i < 32; i++) {
  cout << hex << hashedChars[i];
}
cout << endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-22T14:04:46.473

在 C++ 中

```
#include <iostream>
#include <iomanip>

unsigned char buf0[] = {4, 85, 250, 206};
for (int i = 0;i < sizeof buf0 / sizeof buf0[0]; i++) {
    std::cout << std::setfill('0') 
              << std::setw(2) 
              << std::uppercase 
              << std::hex << (0xFF & buf0[i]) << " ";
} 
```

# java - 没有定义名为“dispatch”的 bean

> ID：10451494
> 
> 赞同：0
> 
> 时间：2012-05-04T15:09:34.687
> 
> 标签：java, eclipse, gwtp

在 Eclipse 中运行一个`gwtp-sample-basic-spring`应用程序，我看到了欢迎页面，但是经过一些服务器处理后，我得到了以下信息（而且，可能[不仅在我的机器上](http://code.google.com/p/gwt-platform/issues/detail?id=44#c62)也是这样）：

```
[WARN] /dispatch/
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'dispatch' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1083)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:274)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079)
    at org.springframework.web.context.support.HttpRequestHandlerServlet.init(HttpRequestHandlerServlet.java:57)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:433)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:342)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:463)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
[ERROR] 500 - POST /dispatch/ (127.0.0.1) 3790 bytes 
```

为什么我会收到此错误？在没有 Eclipse 的情况下运行一切都很好。Spring 库在 Maven 依赖项以及所有其他需要的帮助下包含在类路径中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:24:49.593

好吧，这是一个关于运行这些示例的[很好的教程](http://code.google.com/p/gwt-platform/wiki/RunningGwtpSamples)，但是其中缺少一个步骤，作为一个 Eclipse 新手，我遇到了这个麻烦。起初在`Project properties/ Google/ Web application/ War directory`I set`src/main/webapps`中，这是错误的，需要类路径中的库，但无法正常工作。设置`War directory`解决`target/gwpt-spring-0.6`问题。

# meteor - Meteorjs 模型/集合可在客户端访问。安全问题？

> ID：10451497
> 
> 赞同：2
> 
> 时间：2012-05-04T15:09:45.653
> 
> 标签：meteor

如何防止用户访问/修改客户端模型/集合？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T01:08:01.343

使用[`allow`](http://docs.meteor.com/#allow)和[`deny`](http://docs.meteor.com/#deny)定义允许每个客户端进行哪些数据库更改。

从文档中：

> 当客户端对集合调用 insert、update 或 remove 时，将在服务器上调用集合的允许和拒绝回调以确定是否应允许写入。如果至少有一个允许回调允许写入，并且没有拒绝回调拒绝写入，则允许写入继续。
> 
> 这些检查仅在客户端尝试直接写入数据库时​​运行，例如通过从事件处理程序内部调用更新。服务器代码是受信任的，不受允许和拒绝限制。这包括使用 Meteor.call 调用的方法——它们应该进行自己的访问检查，而不是依赖于允许和拒绝。
> 
> 您可以根据需要多次调用allow，并且每次调用都可以包含插入、更新和删除函数的任意组合。如果函数认为应该允许该操作，则它们应该返回 true。否则它们应该返回 false，或者什么都不返回（未定义）。在这种情况下，Meteor 将继续搜索集合上的任何其他允许规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:57:17.367

正如马特提到的那样，不再需要解决这个问题。然而，作为标准，似乎需要删除自动发布包以保护系统。Meteor 文档涵盖保护收藏：[http ://docs.meteor.com/#meteor_collection](http://docs.meteor.com/#meteor_collection)

# matlab - 哪个是以下噪音的更好过滤器？

> ID：10451498
> 
> 赞同：0
> 
> 时间：2012-05-04T15:09:47.530
> 
> 标签：matlab, image-processing

我想知道在matlab上更好的高斯噪声和散斑噪声滤波器我尝试对高斯使用维纳滤波器，但它似乎不起作用。谁能帮帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:59:01.203

任何去噪算法都可以去除加性高斯噪声，这是标准测试用例。使用非线性滤波（例如中值）可以更好地去除斑点。

由于那里有数以万计的图像去噪算法，我建议您访问这个[教程站点](http://www.numerical-tours.com)，其中包含许多使用 matlab 的练习。在您的情况下， [this](http://www.ceremade.dauphine.fr/~peyre/numerical-tour/tours/denoisingsimp_1_noise_models/)和[this other](http://www.ceremade.dauphine.fr/~peyre/numerical-tour/tours/denoisingsimp_2_linear/) tutorial 似乎是一个很好的起点。

**- 编辑 -**

对您的噪声/图像的影响将在很大程度上取决于您的图像和噪声。

如果噪声看起来像冲动（椒盐噪声），那么您通常会发现中值滤波是一个很好的起点。如果您的噪声是加性高斯噪声（或乘性，在这种情况下您可以取对数），那么很多算法都很好，包括维纳和卡尔曼滤波。

另一方面，维纳滤波会使您的图像模糊。因此，如果您有很多纹理或清晰的细节（即高频会被您的过滤器误认为是噪声），您通常会更喜欢中值或各向异性过滤等技术。

# javascript - -moz-resize 事件

> ID：10451504
> 
> 赞同：1
> 
> 时间：2012-05-04T15:10:02.030
> 
> 标签：javascript, html, firefox

我有一个使用`-moz-resize`CSS 样式的元素。此样式允许使用鼠标调整元素的大小。

调整元素大小时是否会触发任何事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:13:16.123

[https://developer.mozilla.org/en/DOM/element.onresize](https://developer.mozilla.org/en/DOM/element.onresize)

> 只有 window 对象有 onresize 事件。

想法：你可以给项目一些 onClick / onmouseup 事件，它存储和检查本地元素的宽度/高度。所以你可以触发/触发其他一些事件/功能

[http://www.w3schools.com/jsref/dom_obj_event.asp](http://www.w3schools.com/jsref/dom_obj_event.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:07:01.970

我最近发布了一个要求相同解决方案的问题的答案：

> [检测元素是否已通过javascript调整大小？](https://stackoverflow.com/questions/9255162/detect-if-an-element-has-been-resized-via-javascript)

要针对您的情况使用下面的方法，只需传入您想要侦听调整大小事件的元素以及您想要在它发生时调用的函数。元素是否具有 CSS resize 属性并不重要，这适用于任何 DOM 元素。一个警告：元素必须能够包含子元素，否则您需要包装有问题的元素 - 例如输入或 img - 并在其上设置侦听器。

警告：这是一个 SO 答案的很多内容，您可以阅读我博客上的完整帖子：[http ://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize -检测/](http://www.backalleycoder.com/2013/03/18/cross-browser-event-based-element-resize-detection/)

* * *

# HTML

以下 HTML 块会自动附加到您附加调整大小事件的任何元素。您只能将调整大小事件附加到允许子元素的元素 - 基本上，没有使用自闭合标签声明的元素。

```
<div class="resize-sensor">
    <div class="resize-overflow"><div></div></div>
    <div class="resize-underflow"><div></div></div>
</div> 
```

# CSS

```
.resize-sensor, .resize-sensor > div {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: -1;
} 
```

# JavaScript 代码/方法

以下是启用调整大小事件侦听所需的 JavaScript。前两个函数是在主要 addResizeListener 和 removeResizeListener 方法中使用的先决条件。（如前所述，有关 addFlowListener 方法的更多详细信息，请参见上溢/下溢事件帖子）

```
function addFlowListener(element, type, fn){
    var flow = type == 'over';
    element.addEventListener('OverflowEvent' in window ? 'overflowchanged' : type + 'flow', function(e){
        if (e.type == (type + 'flow') ||
        ((e.orient == 0 && e.horizontalOverflow == flow) ||
        (e.orient == 1 && e.verticalOverflow == flow) ||
        (e.orient == 2 && e.horizontalOverflow == flow && e.verticalOverflow == flow))) {
            e.flow = type;
            return fn.call(this, e);
        }
    }, false);
};

function fireEvent(element, type, data, options){
    var options = options || {},
        event = document.createEvent('Event');
    event.initEvent(type, 'bubbles' in options ? options.bubbles : true, 'cancelable' in options ? options.cancelable : true);
    for (var z in data) event[z] = data[z];
    element.dispatchEvent(event);
};

function addResizeListener(element, fn){
    var resize = 'onresize' in element;
    if (!resize && !element._resizeSensor) {
        var sensor = element._resizeSensor = document.createElement('div');
            sensor.className = 'resize-sensor';
            sensor.innerHTML = '<div class="resize-overflow"><div></div></div><div class="resize-underflow"><div></div></div>';

        var x = 0, y = 0,
            first = sensor.firstElementChild.firstChild,
            last = sensor.lastElementChild.firstChild,
            matchFlow = function(event){
                var change = false,
                width = element.offsetWidth;
                if (x != width) {
                    first.style.width = width - 1 + 'px';      
                    last.style.width = width + 1 + 'px';
                    change = true;
                    x = width;
                }
                var height = element.offsetHeight;
                if (y != height) {
                    first.style.height = height - 1 + 'px';
                    last.style.height = height + 1 + 'px';      
                    change = true;
                    y = height;
                }
                if (change && event.currentTarget != element) fireEvent(element, 'resize');
            };

        if (getComputedStyle(element).position == 'static'){
            element.style.position = 'relative';
            element._resizeSensor._resetPosition = true;
        }
        addFlowListener(sensor, 'over', matchFlow);
        addFlowListener(sensor, 'under', matchFlow);
        addFlowListener(sensor.firstElementChild, 'over', matchFlow);
        addFlowListener(sensor.lastElementChild, 'under', matchFlow);  
        element.appendChild(sensor);
        matchFlow({});
    }
        var events = element._flowEvents || (element._flowEvents = []);
        if (events.indexOf(fn) == -1) events.push(fn);
        if (!resize) element.addEventListener('resize', fn, false);
        element.onresize = function(e){
            events.forEach(function(fn){
                fn.call(element, e);
            });
        };
};

function removeResizeListener(element, fn){
    var index = element._flowEvents.indexOf(fn);
    if (index > -1) element._flowEvents.splice(index, 1);
    if (!element._flowEvents.length) {
        var sensor = element._resizeSensor;
        if (sensor) {
            element.removeChild(sensor);
            if (sensor._resetPosition) element.style.position = 'static';
            delete element._resizeSensor;
        }
        if ('onresize' in element) element.onresize = null;
        delete element._flowEvents;
    }
    element.removeEventListener('resize', fn);
}; 
```

# 用法

这是此解决方案的伪代码用法：

```
var myElement = document.getElementById('my_element'),
    myResizeFn = function(){
        /* do something on resize */
    };
addResizeListener(myElement, myResizeFn);
removeResizeListener(myElement, myResizeFn); 
```

# javascript - 为多个 JavaScript 文件启用严格模式

> ID：10451508
> 
> 赞同：5
> 
> 时间：2012-05-04T15:10:16.010
> 
> 标签：javascript

要为所有 JavaScript 启用严格模式，该`"use strict"`设置是否需要位于每个导入的 JavaScript 文件的顶部、第一个文件的顶部或任何文件的顶部？

似乎没有这方面的文档。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T15:13:00.850

它需要位于您要`strict`应用的每个脚本的顶部。

**但是**，如果脚本通过缩小连接，那么第一个文件顶部的“使用严格”将适用于所有文件（因为它们将在同一个文件中）。

由于这种感知到的危险（第三方库？），[建议](https://developer.mozilla.org/en/JavaScript/Strict_mode#Invoking_strict_mode)不要这样做，而是将其应用于每个脚本的[IIFE中。](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

```
<script src="foo.js">
    (function () {
        "use strict";

        // Your code, don't forget you've now got to make things global via `window.blah = blah`
    }());
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T15:15:28.820

它位于每个脚本的顶部，*或者*如果您只想将其应用于某些功能，您可以执行以下操作：

```
// Non-strict code...

(function(){
  "use strict";

  // Your strict library goes here.
})();

// More non-strict code... 
```

这是一篇关于它的好文章：http: [//ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/)

# c# - EF4：定义多个外键

> ID：10451522
> 
> 赞同：0
> 
> 时间：2012-05-04T15:11:04.020
> 
> 标签：c#, .net, entity-framework-4, ef-code-first

所以我有一个像这样的人

```
Id    Name
1     John
2     Mike
3     Sophie 
```

我有一张桌子

```
Id    IdReceptor    IdRequired
1     1             2
2     1             1
3     2             3
4     3             1 
```

基本上是一个人接电话，那个人就是receiver，接电话的那个人需要和另一个人通话，可以是同一个人接听，也可以是其他人，所以我们有这个表设计，*IdReceptor*和*IdRequired*都是*人*的外键

 *如何使用 EF4 Code First 对此进行建模？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:27:19.823

例如像这样：

```
public class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Call
{
    public int Id { get; set; }

    [ForeignKey("Receptor")]
    public int IdReceptor { get; set; }
    [ForeignKey("Required")]
    public int IdRequired { get; set; }

    public Person Receptor { get; set; }
    public Person Required { get; set; }
} 
```

如果需要，您可以引入集合`Person`并添加带有注释或 Fluent API 的附加映射，或者如果您想要延迟加载，您可以创建`Person`导航属性。`virtual`但是上面的代码是一个简单的解决方案。EF 将按照约定检测两个一对多关系。*

# c - C中多个数组的笛卡尔积

> ID：10451525
> 
> 赞同：4
> 
> 时间：2012-05-04T15:11:19.037
> 
> 标签：c, arrays, cartesian-product

我能够在C中实现静态数组数量的笛卡尔积。但是我想动态构建一个代码来获取输入数组的数量。有人可以阐明如何“仅使用数组”来做到这一点。如果不可能使用数组请建议我其他解决方案。谢谢。下面是我的代码，用于 3 个数组的笛卡尔积。

```
#include<stdio.h>

int main(void)
{
        int array1[100];
        int array2[100];
        int array3[100];
        int cartesian_array[100][100];
        int m,n,o;
        int i,j;
        int p=0,q=0,r=0;
        int x,y,z;
        int cartesian_arr_row_len;
        int cartesian_arr_col_len;

        printf("Enter the size of first array:\n");
        scanf("%d",&m);

        printf("Enter the size of second array:\n");
        scanf("%d",&n);

        printf("Enter the size of third array:\n");
        scanf("%d",&o);

        printf("Enter the first array elements:\n");
        for(i=0;i<m;i++)
        scanf("%d",&array1[i]);

        printf("Enter the second array elements:");
        for(i=0;i<n;i++)
        scanf("%d",&array2[i]);

        printf("Enter the third array elements:");
        for(i=0;i<o;i++)
        scanf("%d",&array3[i]);

        cartesian_arr_row_len=m*n*o;
        cartesian_arr_col_len=3;

        x=cartesian_arr_row_len/m;
        y=cartesian_arr_row_len/(m*n);
        z=o;

        for(i=0;i<cartesian_arr_row_len;i++)
        {
                for(j=0;j<cartesian_arr_col_len;j++)
                {
                        if(j==0)
                        {
                                cartesian_array[i][j]=array1[p/x];
       p++;
                        }

                        if(j==1)
                        {
                                cartesian_array[i][j]=array2[q/y];
                                q++;
                                if(q>=n*y)
                                q=0;
                        }

                        if(j==2)
                        {
                                cartesian_array[i][j]=array3[r%z];
                                r++;
                        }
                }

        }

        printf("The Cartesian Product of two arrays is:\n");
        for(i=0;i<cartesian_arr_row_len;i++)
        {
                for(j=0;j<cartesian_arr_col_len;j++)
                {
                        printf("%d\t",cartesian_array[i][j]);
                }
                printf("\n");
        }

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:30:49.350

你能阅读 Java 代码并自己翻译吗？

```
import java.util.*;    

class CartesianIterator <T> implements Iterator <List <T>> {

        private final List <List <T>> lilio;    
        private int current = 0;
        private final long last;

        public CartesianIterator (final List <List <T>> llo) {
                lilio = llo;
                long product = 1L;
                for (List <T> lio: lilio)
                        product *= lio.size ();
                last = product;
        } 

        public boolean hasNext () {
                return current != last;
        }

        public List <T> next () {
                ++current;
                return get (current - 1, lilio);
        }

        public void remove () {
                ++current;
        }

        private List<T> get (final int n, final List <List <T>> lili) {
                switch (lili.size ())
                {
                        case 0: return new ArrayList <T> (); // no break past return;
                        default: {
                                List <T> inner = lili.get (0);
                                List <T> lo = new ArrayList <T> ();
                                lo.add (inner.get (n % inner.size ()));
                                lo.addAll (get (n / inner.size (), lili.subList (1, lili.size ())));
                                return lo;
                        }
                }
        }
}

class CartesianIterable <T> implements Iterable <List <T>> {

        private List <List <T>> lilio;  

        public CartesianIterable (List <List <T>> llo) {
                lilio = llo;
        }

        public Iterator <List <T>> iterator () {
                return new CartesianIterator <T> (lilio);
        }
}

class CartesianIteratorTest {

        public static void main (String[] args) {
                List <Character> la = Arrays.asList (new Character [] {'a', 'b'});
                List <Character> lb = Arrays.asList (new Character [] {'b', 'c'});      
                List <Character> lc = Arrays.asList (new Character [] {'c', 'a'});
                List <List <Character>> llc = new ArrayList <List <Character>> ();
                llc.add (la);
                llc.add (lb);
                llc.add (lc);

                CartesianIterable <Character> ci = new CartesianIterable <Character> (llc);
                for (List<Character> lo: ci)
                        show (lo);

                la = Arrays.asList (new Character [] {'x', 'y', 'z'});
                lb = Arrays.asList (new Character [] {'b'});    
                lc = Arrays.asList (new Character [] {'c'});
                llc = new ArrayList <List <Character>> ();
                llc.add (la);
                llc.add (lb);
                llc.add (lc);

                ci = new CartesianIterable <Character> (llc);
                for (List<Character> lo: ci)
                        show (lo);
        }

        public static void show (List <Character> lo) {
                System.out.print ("(");
                for (Object o: lo)
                        System.out.print (o);
                System.out.println (")");
        }
} 
```

我不知道 C 中是否存在类似迭代器的东西。这`iterable`很可能对你没有帮助。

代码的想法是，有一个计数器，它在结果集中的所有元素上创建一个索引，并计算绑定到该值的元素。

如果我们有 3 个组 (1,2,3)(4,5)(6,7,8)，我们期望得到 18=3x2x3 的结果。例如，对于 Iterator 位置 7，我们可以按如下方式计算结果：

```
7 % 3 = 1 => (1,2,3)[1] = 2 (number modulo 1st group size) 
7 / 3 = 2 (int division)  (number div 1st group size)
2 % 2 = 0 => (4,5)[0] = 4 (rest modulo 2nd group size) 
2 / 2 = 0 
0 % 3 = 0 => (7,8,9) => 7 

idx g1  g2  g3
 0  1   4   6   
 1  2   4   6   
 2  3   4   6   
 3  1   5   6   
 4  2   5   6   
 5  3   5   6   
 6  1   4   7   
 7  2   4   7   
 8  3   4   7   
 9  1   5   7   
10  2   5   7   
11  3   5   7   
12  1   4   8   
13  2   4   8   
14  3   4   8   
15  1   5   8   
16  2   5   8   
17  3   5   8 
```

# javascript - 如何在javascript中访问字符串中的二进制数据

> ID：10451526
> 
> 赞同：3
> 
> 时间：2012-05-04T15:11:24.580
> 
> 标签：javascript, binary-data

我使用一个设备驱动程序来捕获来自阅读器 (RFID) 的输入并将其发送到键盘缓冲区（键盘楔形）。捕获的数据可以（并且必须）使用 java 脚本进行中间转换。

此 javascript 在驱动程序上下文中处理 - 不幸的是，javascript 在字符串类型的 DATA 变量中获取捕获的“二进制”数据。

您可以想象 javascript 的作用：它将输入解释为 unicode，因此不允许您在字符串中逐字节寻址 - 它根据值在 1 ...4 字节长度之间任意变化。

我只需要将二进制字符串转换为其可读的字符串格式：xf9268970 应为“f9268970”。到目前为止，我尝试的一切都很糟糕。

感谢您的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:36:21.697

首先，免责声明。我没有使用过二进制数据和 javascript，但也许这会有所帮助。

也许您可以遍历字符串并使用 charAt 查看每个字符。据我了解 charAt 返回一个 ASCII 值（不是 unicode）。所以你会得到 2 个字节而不是 4 个字节（？）

```
var character;
for (var i = 0; i < str.length; i++) {
    character = str.charAt(i);
} 
```

也许这份参考资料会为您指明正确的方向：[charAt 参考资料](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/charAt#Example_3%3a.C2.A0Fixing_charAt_to_support_non-Basic-Multilingual-Plane_%28BMP%29.C2.A0characters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:45:07.007

我认为您应该单独监听击键并将值记录在变量中，而不是读取文本框。

# c++ - 了解 Visual C++ 控制台项目中的 _tmain

> ID：10451529
> 
> 赞同：12
> 
> 时间：2012-05-04T15:11:43.327
> 
> 标签：c++, visual-c++

在 Visual C++ 2008 Express 中，当我创建一个新的控制台项目时，我会从以下程序开始：

```
//Explodey.cpp : Defines the entry point for the console application.

//

#include "stdafx.h"

int _tmain(int argc,_TCHAR* argv[])
{
  return 0;
} 
```

我有几个问题：

*   为什么main函数是_tmain而不是main？

*   我认为`argv`参数应该是`char* argv[]`而不是`_TCHAR`.

*   是什么`stdafx.h`？

这真的不像我习惯的 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:15:34.233

在这里查看 _tmain... 等。

[C++ 中的 _tmain() 和 main() 有什么区别？](https://stackoverflow.com/questions/895827/what-is-the-difference-between-tmain-and-main-in-c)

stdafx.h 是 Windows 应用程序的预编译头文件（可选）。更多在这里：

[http://en.wikipedia.org/wiki/Precompiled_header](http://en.wikipedia.org/wiki/Precompiled_header)

# hibernate - Spring Roo Hiberanate 在 SELECT 之前使用 limit 和 offset 进行额外的 SELECT *

> ID：10451532
> 
> 赞同：0
> 
> 时间：2012-05-04T15:11:54.547
> 
> 标签：hibernate, spring-roo

使用所有 spring roo vanilla 控制器和对象，每次我请求例如 /project/something?page=N&size=M 时，休眠日志都会显示三个请求，首先是 SELECT 获取*所有*条目，然后是一个带有 LIMIT 和OFFSET，后跟 SELECT 计数。

为什么会有第一个选择来获取所有条目？我想摆脱这个，因为如果表中有很多条目，它的性能真的很差。

它是冬眠还是春袋鼠相关？

我正在使用最新的 roo & hibernate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:26:26.087

好的，我找到了！

Roo 1.1.5 对每个 CRUD 请求调用填充方法，甚至在调用实际控制器方法之前。填充方法从 db 中获取所有条目，这使得它成为一个巨大的过载，大到足以使 web 应用程序非常不可用并且在你的经理面前看起来很糟糕:(

你可以做的是自己实现填充方法并让它们做一些除了获取所有血腥条目之外的事情（谨慎使用，你可能会削弱其他东西，注意创建/更新），例如返回 null 或类似的东西。

这也被报告为一个错误和 Spring [Jira](https://jira.springsource.org/browse/ROO-2514)，似乎已在 Roo 1.2.0 中修复，因此更好的解决方案是升级。

# multithreading - 如何退出线程的消息循环？

> ID：10451535
> 
> 赞同：14
> 
> 时间：2012-05-04T15:11:59.490
> 
> 标签：multithreading, delphi, winapi, message-loop

后台线程可以配置为接收窗口消息。您将使用[`PostThreadMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644946(v=vs.85).aspx). 退出该消息循环的正确方法是什么？

## 背景

在您可以将消息发布到后台线程之前，该线程需要确保通过调用创建消息队列`PeekMessage`：

```
procedure ThreadProcedure;
var
   msg: TMsg;
begin
   //Call PeekMessage to force the system to create the message queue.
   PeekMessage(msg, NULL, WM_USER, WM_USER, PM_NOREMOVE);
end; 
```

现在外界可以向我们的线程发布消息：

```
PostThreadMessage(nThreadID, WM_ReadyATractorBeam, 0, 0); 
```

我们的线程位于一个`GetMessage`循环中：

```
procedure ThreadProcedure;
var
   msg: TMsg;
begin
   //Call PeekMessage to force the system to create the message queue.
   PeekMessage(msg, NULL, WM_USER, WM_USER, PM_NOREMOVE);

   //Start our message pumping loop. 
   //GetMessage will return false when it receives a WM_QUIT

   //   GetMessage can return -1 if there's an error
   //   Delphi LongBool interprets non-zero as true.
   //   If GetMessage *does* fail, then msg will not be valid. 
   //   We want some way to handle that.
   //Invalid:
   //while (GetMessage(msg, 0, 0, 0)) do
   //Better:
   while LongInt(GetMessage(msg, 0, 0, 0)) > 0 do
   begin
      case msg.message of
      WM_ReadyATractorBeam: ReadyTractorBeam;

      // No point in calling Translate/Dispatch if there's no window associated.
      // Dispatch will just throw the message away
//    else
//       TranslateMessage(Msg);
//       DispatchMessage(Msg);
//    end;
   end;
end; 
```

`GetMessage`我的问题是接收`WM_QUIT`消息并返回错误的正确方法是什么。

我们已经了解到，发布[消息](http://blogs.msdn.com/b/oldnewthing/archive/2005/11/04/489028.aspx)[的*错误*方式`WM_QUIT`](http://blogs.msdn.com/b/oldnewthing/archive/2005/11/04/489028.aspx)是调用：

```
PostThreadMessage(nThreadId, WM_QUIT, 0, 0); 
```

甚至[还有一些人们采用这种方法的例子](http://www.codeproject.com/Articles/225755/PostThreadMessage-Demystified)。来自 MSDN：

> 不要使用[**PostMessage**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)函数发布**WM_QUIT**消息；使用[**PostQuitMessage**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644945%28v=vs.85%29.aspx)。[](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)**[](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644945%28v=vs.85%29.aspx)**

 *****正确*的方法是让“某人”打电话[`PostQuitMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644945%28v=vs.85%29.aspx)。`PostQuitMessage` [是一个特殊函数](http://blogs.msdn.com/b/oldnewthing/archive/2005/11/04/489028.aspx)，它设置与消息队列关联的特殊标志，以便在适当的时候`GetMessage`合成消息。`WM_QUIT`

如果这是一个与“*窗口*”相关联的消息循环，那么标准设计模式是当窗口被销毁并`WM_DESTROY`接收到消息时，我们捕获它并调用`PostQuitMessage`：

```
procedure ThreadProcedure;
var
   msg: TMsg;
begin
   //Call PeekMessage to force the system to create the message queue.
   PeekMessage(msg, NULL, WM_USER, WM_USER, PM_NOREMOVE);

   //Start our message pumping loop. 
   //GetMessage will return false when it receives a WM_QUIT
   while Longint(GetMessage(msg, 0, 0, 0)) > 0 do
   begin
      case msg.message of
      WM_ReadyATractorBeam: ReadyTractorBeam;
      WM_DESTROY: PostQuitMessage(0);
      end;
   end;
end; 
```

问题是`WM_DESTROY` [由窗口管理器发送的。当有人来电时发送`DestroyWindow`。只发帖是错误的`WM_DESTROY`](http://blogs.msdn.com/b/oldnewthing/archive/2011/09/26/10216420.aspx)。

现在我*可以*合成一些人工`WM_PleaseEndYourself`信息：

```
PostThreadMessage(nThreadID, WM_PleaseEndYourself, 0, 0); 
```

然后在我的线程的消息循环中处理它：

```
procedure ThreadProcedure;
var
   msg: TMsg;
begin
   //Call PeekMessage to force the system to create the message queue.
   PeekMessage(msg, NULL, WM_USER, WM_USER, PM_NOREMOVE);

   //Start our message pumping loop. 
   //GetMessage will return false when it receives a WM_QUIT
   while Longint(GetMessage(msg, 0, 0, 0)) > 0 do
   begin
      case msg.message of
      WM_ReadyATractorBeam: ReadyTractorBeam;
      WM_PleaseEndYourself: PostQuitMessage(0);
      end;
   end;
end; 
```

但是有没有一种*规范*的方法可以退出线程的消息循环？

* * *

## 但不要这样做

事实证明，不使用无窗口消息队列对每个**人**都*更好。*如果您没有发送消息的窗口，很多事情可能会在无意中被巧妙地破坏。

 **[而是分配隐藏窗口](http://blogs.msdn.com/b/oldnewthing/archive/2009/09/30/9901065.aspx)（例如，使用 Delphi 的[线程](http://www.thedelphigeek.com/2007/06/allocatehwnd-is-not-thread-safe.html)- [unsafe](https://stackoverflow.com/questions/8820294/how-can-i-make-allocatehwnd-threadsafe) [`AllocateHwnd`](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/Classes_AllocateHWnd.html)）并使用普通的 old 向其发布消息[`PostMessage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)：

```
procedure TMyThread.Execute;
var
   msg: TMsg;
begin
   Fhwnd := AllocateHwnd(WindowProc);
   if Fhwnd = 0 then Exit;
   try
      while Longint(GetMessage(msg, 0, 0, 0)) > 0 do
      begin
         TranslateMessage(msg);
         DispatchMessage(msg);
      end;
   finally
      DeallocateHwnd(Fhwnd);
      Fhwnd := 0;
   end;
end; 
```

我们可以有一个普通的旧窗口过程来处理消息：

```
WM_TerminateYourself = WM_APP + 1;

procedure TMyThread.WindowProc(var msg: TMessage);
begin
   case msg.Msg of
   WM_ReadyATractorBeam: ReadyTractorBeam;
   WM_TerminateYourself: PostQuitMessage(0);
   else
      msg.Result := DefWindowProc(Fhwnd, msg.msg, msg.wParam, msg.lParam);
   end;
end; 
```

当你想让线程完成时，你告诉它：

```
procedure TMyThread.Terminate;
begin
   PostMessage(Fhwnd, WM_TerminateYourself, 0, 0);
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T16:10:57.370

没有规范的方法；没有佳能。您可以`GetMessage`通过发布消息返回零`wm_Quit`，然后调用`PostQuitMessage`. 您何时以及如何知道这样做取决于您。

响应 时这样做很常见`wm_Destroy`，但这只是因为退出程序的常用方法是关闭窗口。如果您没有要关闭的窗口，请选择其他方式。你的`wm_PleaseEndYourself`想法很好。

您甚至不必发送消息。您可以使用一些可等待的对象，例如事件或信号量，然后`MsgWaitForMultipleObjects`在等待新消息的同时检测它是否已发出信号。

您甚至不必等待`GetMessage`返回零。如果您已经知道线程需要停止，那么您可以完全停止处理消息。有很多方法可以退出循环。您可以使用`exit`, `break`, `raise`, 甚至`goto`, 或者您可以设置一个标志，您可以在循环条件中检查该标志以及 . 的返回值`GetMessage`。

另请注意，`GetMessage`失败时返回 -1，作为非零值将被解释为 true。如果失败，您可能不想继续您的消息循环`GetMessage`，因此请检查`GetMessage(...) > 0`，或[按照文档建议的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644936.aspx)方式进行操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T16:11:50.053

使用`PostThreadMessage`不一定是错误的。您链接到的雷蒙德的文章说：

> 因为系统试图在“糟糕的时间”不注入 WM_QUIT 消息；相反，它在生成 WM_QUIT 消息之前等待事情“稳定下来”，从而减少程序可能处于由一系列发布消息触发的多步骤过程中间的机会。

如果此处概述的问题不适用于您的消息队列，那么请致电`PostThreadMessage`并`WM_QUIT`淘汰自己。否则，您将需要创建一个特殊信号，即用户定义的消息，它允许您`PostQuitMessage`从线程中调用。******

# javascript - 访问包含的 js 文件中的父 HTML 文档

> ID：10451537
> 
> 赞同：0
> 
> 时间：2012-05-04T15:12:11.877
> 
> 标签：javascript, html, include, document, parent

在 HTML 文件中包含一个外部 js 文件，在 js 文件中我使用了这种方法：

```
window.parent.document.getElementById("someID").innerHTML='something'; 
```

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:17:31.813

是否`window.parent`因为要引用 JS 文件的父级而包含该部分？这不是它的工作方式 - JS 在包含它的 HTML 的上下文中运行，所以你只需要：

```
document.getElementById("someID").innerHTML='something'; 
```

（如果我误解了你的问题，请原谅我！）

# android - 使用 Android 将特定于供应商的信息插入和嗅探到信标帧中

> ID：10451538
> 
> 赞同：3
> 
> 时间：2012-05-04T15:12:14.327
> 
> 标签：android, android-ndk, wifi, android-wifi

我正在创建一个用作 Wifi AP 的 Android 应用程序。我想将数据插入到信标帧中的供应商特定信息字段中。然后我会有另一个应用程序来监听这些信标帧并从中提取数据。知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:22:39.567

虽然对 android 没有太多经验，但这种功能的可用性通常取决于操作系统的芯片组驱动程序。因此，我怀疑这对于 android SDK 是不可能的，但对于 NDK 可能是这样。

微软研究在 5 年前曾发表过一篇关于类似想法的文章： [http](http://research.microsoft.com/pubs/73482/beaconstuffing.pdf) ://research.microsoft.com/pubs/73482/beaconstuffing.pdf 。本文可能有助于作为应用程序的背景阅读。

# c# - 从文本中提取数据

> ID：10451541
> 
> 赞同：1
> 
> 时间：2012-05-04T15:12:21.863
> 
> 标签：c#, .net, visual-studio-2010

我有这段文字：

```
{
   "id": "my id",
   "name": "name",
   "first_name": "first name",
   "last_name": "last name",
   "username": "nick",
   "gender": "male",
   "locale": "en_EN"
} 
```

如何在文本框中插入 ID、名称和其他？

感谢您的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:00:27.033

去[这里](http://json.codeplex.com/)下载 JSON.Net。在存档中找到正确版本的 DLL 并将对该 DLL 的引用添加到您的 C# 项目中。之后你可以这样做：

```
string json = @"{
                 'id': 'my id',
                 'name': 'name',
                 'first_name': 'first name',
                 'last_name': 'last name',
                 'username': 'nick',
                 'gender': 'male',
                 'locale': 'en_EN'
                }";

JObject obj = JObject.Parse(json);

textBoxID.Text = obj["id"].ToString();
textBoxName.Text = obj["name"].ToString();
//and so on 
```

# c++ - 无法获取字符串的长度

> ID：10451542
> 
> 赞同：1
> 
> 时间：2012-05-04T15:12:22.317
> 
> 标签：c++, visual-studio-2008

我是 C++ 新手，所以请原谅我的愚蠢。

我有一个文本框并试图获取文本框字符串值的长度：

```
int length1 = 0; 
length1 = this->txt_path->Text->Length(); 
```

但是，这给了我以下错误：

> 错误 C2064：术语不计算为采用 0 个参数的函数

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:15:52.030

在 C++/CLI 中，`String::Length`是属性，而不是方法。您不应将调用运算符`()`与属性一起使用：

```
length1 = this->txt_path->Text->Length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:16:39.117

您没有向我们展示 的声明`Text`，但如果它被声明为 a `std::string`，那么您有一个错字：

```
Text->length(); 
```

大小写在 C++ 中很重要。

如果对象是 MFC `CString`，则函数名称为`GetLength()`：

```
Text->GetLength() 
```

# iphone - 带有警告的 iPhone 单元测试

> ID：10451545
> 
> 赞同：1
> 
> 时间：2012-05-04T15:12:32.060
> 
> 标签：iphone, xcode, unit-testing, warnings, assert

我有一个问题..我为我的 iPhone 应用程序编写了一个单元测试。我可以管理 UnitTest 警告情况吗？我希望我的测试成功完成（但是）并发出警告

# php - Wordpress 网站不显示所见即所得的编辑器内容？

> ID：10451547
> 
> 赞同：0
> 
> 时间：2012-05-04T15:12:36.120
> 
> 标签：php, html, wordpress, content-management-system

我的 Wordpress 网站真的没有按照我想要的方式运行？！

它工作正常，没有任何东西被触及，然后最近我发现每一页都在每一页上显示相同的内容。不是所见即所得编辑器中的单个内容。

这让我很头疼，我有一个修改过的主题，我已经用原始主题文件 page.php、index.php 和 single.php 替换了它，看看它们页面是否有问题。但它不是！？

链接是[http://www.alleanza.co.uk](http://www.alleanza.co.uk)，我本来想在最后的婚礼上把它交出来，但我仍然不能，因为没有内容被拉过。有没有人有任何可能有帮助的想法？

但是我注意到它是从 Hello World Post 中提取信息，而不是从页面的所见即所得内容中提取信息。

但是，这是 page.php 的内容

```
<?php
/*
Template Name: Normal Template
*/
?>

<?php get_header(); ?>

    <div id="content">
    <div id="greybread"><?php if (function_exists('dimox_breadcrumbs')) dimox_breadcrumbs(); ?></div>

<div <?php post_class(); ?> id="post-<?php the_ID(); ?>">

                <?php while ( have_posts() ) : the_post(); ?>

                    <?php the_content(); ?>

                    <?php comments_template( '', true ); ?>

                <?php endwhile; // end of the loop. ?>

    <?php edit_post_link('Edit this entry.', '<p>', '</p>'); ?>
    </div></div>

<?php get_sidebar(); ?>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:17:55.780

您能否在循环内显示您在 page.php 中的代码？

如果`<php the_content(); ?>`在循环中缺少标签，您将看不到从 Wordpress 仪表板加载的内容。这也可能是因为您从页面属性模块中为您的页面选择了非默认模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:45:46.880

请注意，您已经在 page.php 中指定了模板名称（模板名称：普通模板）。这意味着这不再是默认模板。如果要将其设为所有页面的默认模板，请删除 get_header() 标记之前的行。（http://codex.wordpress.org/Pages#What_Template_is_used_to_Display_a_Particular_Page.3F）

或者，您可以选择“普通模板”作为“编辑”页面上的页面属性下的页面模板。见下文：

[http://en.support.wordpress.com/pages/page-attributes/#template](http://en.support.wordpress.com/pages/page-attributes/#template)

# jquery - Jquery Title 下拉与其他可编辑

> ID：10451552
> 
> 赞同：-1
> 
> 时间：2012-05-04T15:12:48.243
> 
> 标签：jquery, html, field, title

我想选择瓷砖但能够编辑**另一个**并输入我想要的

我知道我错过了很多对不起...

[http://jsfiddle.net/Rjqy5/57/](http://jsfiddle.net/Rjqy5/57/)

标题

*   先生*   太太*   错过*   小姐*   其他

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:10:50.440

```
$(document).ready(function () {
            $('.dropdown').live('mouseenter', function () {
                $('.sublinks').stop(false, true).hide();

                var submenu = $(this).parent().next();

                submenu.css({
                    position: 'absolute',
                    top: $(this).offset().top + $(this).height() + 'px',
                    left: $(this).offset().left + 'px',
                    zIndex: 1000
                });

                submenu.stop().slideDown(300);

                submenu.mouseleave(function () {
                    $(this).slideUp(300);

                    $('a#other').focus(function () {
                        $('#change').blur();
                    });
                });
            });

            $('#tbOthers').live('keypress focusout', function (e) {
                var textTitle = $.trim($(this).val());
                if (e.type === 'keypress') {
                    if ((e.keyCode ? e.keyCode : e.which) === 13) {
                        if (textTitle.length === 0) {
                            $(this).replaceWith('<a href="#" class="dropdown" id="change">Title</a>');
                        }
                        else {
                            $(this).replaceWith('<a href="#" class="dropdown" id="change">' + textTitle + '</a>');
                        }
                    }
                } else if (e.type === 'keypress') {
                    if (textTitle.length === 0) {
                        $(this).replaceWith('<a href="#" class="dropdown" id="change">Title</a>');
                    }
                    else {
                        $(this).replaceWith('<a href="#" class="dropdown" id="change">' + textTitle + '</a>');
                    }
                }
            });

            $('#mainLink').find('.sublinks a').live('click', function (e) {
                var objChange = $('#mainLink').find('#change');
                if ($(this).attr('id') === 'other') {
                    objChange.parent().append($('<input />', { 'id': 'tbOthers', 'type': 'text' }));
                    objChange.remove();                   
                }
                else {
                    objChange.text($(this).text());
                }
            });

        }); 
```

# javascript - 选择div中的部分文本

> ID：10451553
> 
> 赞同：1
> 
> 时间：2012-05-04T15:12:48.273
> 
> 标签：javascript, jquery, svg

我有一个 SVG 元素，我在其中制作了一个 foreignObject。foreignObject 包含两个对象，一个 textarea 和一个 div。textarea 位于 div 的顶部并且是透明的。当人们在 textarea 中键入时，文本被复制到 div（一种所见即所得的编辑器）。这一切都很好。但是问题是：当您在 textarea 中选择文本（100% 透明）时，您看不到您选择的文本，所以现在我想创建一个代码，将选择复制到 div 中的文本。

我有以下内容，这些位告诉我在 textarea 中选择了什么：

```
var start = e.target.selectionStart;
var end = e.target.selectionEnd; 
```

（e 是选择事件监听器的事件）

以下选择 div 中的文本：

```
div = $(e.target).next('div');
div = div[0];

selection = window.getSelection();
range = document.createRange();
range.selectNodeContents(div);
selection.addRange(range); 
```

这可行，但会选择 div 中的所有文本。如何将选择限制为仅在文本区域中选择的部分？

（顺便说一句，此代码用于演示应用程序，只需要在 firefox 中工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:44:16.153

我有一个类似的问题。我的解决方案是在进行转换时将两个空 HTML 元素（可能是`<span class="sel-start"/>`和`<span class="sel-end"/>`）添加到输出中。`div`

您可以使用相同的技巧在 中显示文本光标`div`，以便用户更容易看到他们现在的位置。另外，您可以使用文本光标滚动，`div`从而减少屏幕空间的浪费。

选择它们很简单，它们会将文本切割成段，您可以轻松地将它们包装在`<span class="selected">...</span>`元素中以设置它们的样式。

请注意，使用单个元素并不明智，`span`因为选择可能跨越块元素（`p`、`div`、列表、表格）。

# assembly - 如何使用汇编语言启用或禁用网卡和发送数据包？

> ID：10451554
> 
> 赞同：0
> 
> 时间：2012-05-04T15:12:52.127
> 
> 标签：assembly

如果我知道 Windows XP 中网卡的 IRQ 号，如何在不依赖 MASM 或其他库的情况下使用 x86 汇编语言启用或禁用网卡和发送数据包？

我用谷歌搜索说使用类似 al,0x21 或 0x20 的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:21:30.543

首先，从用户模式应用程序你不能使用端口，只有驱动程序可以访问 windows nt 中的端口。第二个确切的端口号取决于网卡。这里没有任何硬件实现的通用规范。但是 Windows 体系结构通过 NDIS 微型端口驱动程序隐藏了这个硬件特定的细节。您可以编写驱动程序，通过文档接口与微型端口通信并通过网络发送手工数据包。

# facebook - Facebook PHP API：$facebook->api('/me') 总是返回信息

> ID：10451569
> 
> 赞同：0
> 
> 时间：2012-05-04T15:14:06.740
> 
> 标签：facebook, api

出于某种原因，当我检查用户是否登录 Facebook 时，我在 $facebook->api('/me'); 上进行了 api 调用；要检查用户退出 Facebook 时访问令牌是否无效，即使我从 Facebook 页面（在另一个选项卡中）退出，我也可以看到用户信息，并且我无法确定用户是否从 Facebook 退出。

```
public function __construct() {
    $facebook = new Facebook(array(
        'appId'  => $this->_fbappid,
        'secret' => $this->_fbappsecret,
        'cookie' => true,
    ));
    $this->_facebook = $facebook;
}

public function checkFacebookLogin() {
    try {
        $user = $this->_facebook->getUser();
        $user_profile = $this->_facebook->api('/me','GET');
        return true;
    } catch(FacebookApiException $e) {
        return null;
   } 
```

}

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:39:06.473

您可能希望在检查用户之前清除持久数据

```
facebook->clearAllPersistentData() 
```

如果要检查状态，应使用以下方法将用户重定向到 login_status.php：

```
facebook->getLoginStatusUrl($params) 
```

获取登录状态 URL 以从 Facebook 获取状态。

参数：

*   ok_session：找到会话时要转到的 URL
*   no_session：用户未连接时要访问的 URL
*   no_user：用户未登录 facebook 时要访问的 URL

# javascript - 使用 jquery 输出解析的原始 xml

> ID：10451572
> 
> 赞同：0
> 
> 时间：2012-05-04T15:14:13.190
> 
> 标签：javascript, jquery, html, xml

是否可以使用 $.parseXML(xmldata) 解析一些 XML。

然后输出解析的内容，用标签和所有东西退出。我似乎只能得到一个要输出的文本，输出时没有标签。

XML稍后用于生成表单，atm客户端手动输入xml，我正在设置一个gui。我现在尝试为 xml 代表的每个表单元素拾取并生成一个小的可编辑部分。然后一旦他们更新表单元素，我将 xml 保存回隐藏的文本区域，该文本区域作为原始 xml 保存到数据库中（使用生成最终形式）。

```
 $(document).ready(function(){
    var xml = $('#form_template').val();
    var trueXml = '<?xml version="1.0"  encoding="UTF-8"?><form><localhost><formmanager><formpage><elements>' + xml + '</elements></formpage></formmanager></localhost></form>';

    xmlDoc = $.parseXML(trueXml);
    $xml = $(xmlDoc);

    var $html = "<div style='width:695px;'>";
    $html += "<ul id='sortable'>";
    $xml.find('elements').children().each(function(){
        //console.log($(this));
        $html += "<li style='background-color:#333;color:#fff;margin:0 0 3px;list-style:none outside none;padding:6px;'>" + $(this).get(0).tagName + "</li>";
    });
    $html += "</ul>";
    $html += "</div>";
    $('#form_template_display-element').append($html);

    $('ul#sortable').children().each(function(){
        console.log($(this).text());
        $('#form_description').val($xml.find($(this).text()).get(0));
        //return false;
    } );

}) 
```

# wix - 如何在 wix 刻录链中途安排重启？

> ID：10451576
> 
> 赞同：3
> 
> 时间：2012-05-04T15:14:21.360
> 
> 标签：wix, wix3.6

目前，我有一个链可以检查并安装以下先决条件（如果它们缺失）：

1.  视窗安装程序 4.5
2.  .net 框架 4
3.  Sql Server Express 2008 R2

不幸的是，安装程序需要在安装 #1 后重新启动机器，否则 Sql 服务器安装将失败。如果提示用户重新启动机器，这将被禁止，安装程序将继续执行 #2。如何重新启动机器（如果安装了 #1）然后自动继续安装？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-08T16:34:20.740

好的，我想我已经找到了如何做到这一点。基本上我需要在 WixInstaller ExePackage 的子 ExitCode 上指定 forceReboot 选项。

```
<ExePackage Id="WinXp_x86"
              Cache="no"
              Compressed="no"
              PerMachine="yes"
              Permanent="yes"
              Vital="yes"
              InstallCommand="/norestart /passive"
              SourceFile="WindowsXP-KB942288-v3-x86.exe"
              DownloadUrl="http://download.microsoft.com/download/2/6/1/261fca42-22c0-4f91-9451-0e0f2e08356d/WindowsXP-KB942288-v3-x86.exe"
              DetectCondition="WINXP_X86_NEEDS_INSTALLER" >
    <ExitCode Behavior="forceReboot" />
</ExePackage> 
```

这正确地告诉用户重新启动机器，并且当它重新启动时引导安装程序窗口重新打开，但用户必须再次单击“安装”按钮。这似乎是 RC0 (3.6.2803.0) 中的[错误](http://sourceforge.net/mailarchive/message.php?msg_id=29054899)，但已在最新源 (3.6.2830.0) 中修复。我刚刚建立了最新的资源并试图验证......

# jquery - 使用 () .live 或 .bind() 转换 jQuery 函数以支持运行时元素

> ID：10451577
> 
> 赞同：0
> 
> 时间：2012-05-04T15:14:31.257
> 
> 标签：jquery

我有一个 jquery 函数，我想将其转换为 .live，因为我想将 jquery 函数绑定到在我的网页上添加运行时的元素。

以下是jquery

```
 $(document).ready(function(){
          $('form.ratedStars').each(function(){

                    var sid=$(this).attr('id');

                    $("#"+sid).children().not("select, #rating_title").hide();

                    // Create caption element
                    //alert($(this).attr('id'));
                    var $caption = $('<div id="caption"/>');
                    var $message = $('<div id="messages"/>');

                    $("#"+sid).stars("selectID", 4);
                    // Create stars
                    $("#"+sid).stars({
                        inputType: "select",
                        //split: 2,
                        oneVoteOnly: true,
                        captionEl: $caption,
                        //cancelShow: true,
                        callback: function(ui, type, value)
                        {
                            // Display message to the user at the begining of request
                            $message.text("Saving...").fadeIn(30);

                            // Send request to the server using POST method
                            /* NOTE: 
                                The same PHP script is used for the FORM submission when Javascript is not available.
                                The only difference in script execution is the returned value. 
                                For AJAX call we expect an JSON object to be returned. 
                                The JSON object contains additional data we can use to update other elements on the page.
                                To distinguish the AJAX request in PHP script, check if the $_SERVER['HTTP_X_REQUESTED_WITH'] header variable is set.
                                (see: demo4.php)
                            */ 
                            $.post("demo41.php", {rate: value}, function(json)
                            {
                                // Change widget's title
                                ///$("#"+sid).next().text("Average rating");
                                alert(json.id);
                                // Select stars from "Average rating" control to match the returned average rating value
                                ui.select(json.id+'_'+Math.round(json.avg));
                                //ui.selectId(4);

                                // Update widget's caption
                                $caption.text(" (" + json.votes + " votes; " + json.avg + ")");

                                // Display confirmation message to the user
                                $message.text("Rating saved (" + value + "). Thanks!").stop().css("opacity", 1).fadeIn(30);

                                // Hide confirmation message after 2 sec...
                                setTimeout(function(){
                                    $message.fadeOut(1000)
                                }, 2000);

                            }, "json");
                        }
                    });

                    // Since the <option value="3"> was selected by default, we must remove this selection from Stars.
                    //$("#"+sid).stars("selectID", -1);

                    // Append caption element !after! the Stars
                    $caption.appendTo("#"+sid);

                    // Create element to use for confirmation messages
                    $message.appendTo("#"+sid);
            });
    }); 
```

有人可以通过使此代码支持在网页上“实时”添加的元素来帮助我。

更新：我做了以下尝试但仍然没有按预期工作。

```
 <script type="text/javascript">
            $(document).ready(function(){

          $('body').on('loadRatings',function(){
          $('form.ratedStars').each(function(){

                    var sid=$(this).attr('id');

                    $("#"+sid).children().not("select, #rating_title").hide();

                    // Create caption element
                    //alert($(this).attr('id'));
                    var $caption = $('<div id="caption"/>');
                    var $message = $('<div id="messages"/>');

                    $("#"+sid).stars("selectID", 4);
                    // Create stars
                    $("#"+sid).stars({
                        inputType: "select",
                        //split: 2,
                        oneVoteOnly: true,
                        captionEl: $caption,
                        //cancelShow: true,
                        callback: function(ui, type, value)
                        {
                            // Display message to the user at the begining of request
                            $message.text("Saving...").fadeIn(30);

                            // Send request to the server using POST method
                            /* NOTE: 
                                The same PHP script is used for the FORM submission when Javascript is not available.
                                The only difference in script execution is the returned value. 
                                For AJAX call we expect an JSON object to be returned. 
                                The JSON object contains additional data we can use to update other elements on the page.
                                To distinguish the AJAX request in PHP script, check if the $_SERVER['HTTP_X_REQUESTED_WITH'] header variable is set.
                                (see: demo4.php)
                            */ 
                            $.post("demo41.php", {rate: value}, function(json)
                            {
                                // Change widget's title
                                ///$("#"+sid).next().text("Average rating");
                                alert(json.id);
                                // Select stars from "Average rating" control to match the returned average rating value
                                ui.select(json.id+'_'+Math.round(json.avg));
                                //ui.selectId(4);

                                // Update widget's caption
                                $caption.text(" (" + json.votes + " votes; " + json.avg + ")");

                                // Display confirmation message to the user
                                $message.text("Rating saved (" + value + "). Thanks!").stop().css("opacity", 1).fadeIn(30);

                                // Hide confirmation message after 2 sec...
                                setTimeout(function(){
                                    $message.fadeOut(1000)
                                }, 2000);

                            }, "json");
                        }
                    });

                    // Since the <option value="3"> was selected by default, we must remove this selection from Stars.
                    //$("#"+sid).stars("selectID", -1);

                    // Append caption element !after! the Stars
                    $caption.appendTo("#"+sid);

                    // Create element to use for confirmation messages
                    $message.appendTo("#"+sid);
            });

            });

            $('body').trigger('loadRatings');
    });

</ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:17:22.580

您应该使用[.on()](http://api.jquery.com/on/)并向下滚动到“直接和委托事件”部分。

请参阅这个[SO 问题](https://stackoverflow.com/questions/10295399/jquery-on-method-does-not-bind-events-like-live-did)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:17:45.403

不要认为您应该使用`live`，可能取决于您的 jQuery 版本 -`on`建议使用 ，并且[文档](http://api.jquery.com/on/)提供了合理的示例。但例如：

```
$("#" + id).on("click", function(e) {

}); 
```

# php - PEAR::Mail '添加收件人失败'

> ID：10451579
> 
> 赞同：1
> 
> 时间：2012-05-04T15:14:36.230
> 
> 标签：php, email, smtp, pear

这是失败的代码：

```
require_once "Mail.php";

$host           = "mail.domain.com";
$username       = "USER";
$password       = "PASS";

$mailto     = $name . ' <' . $email . '>';
$subject        = 'My Subject';
$from           = 'Client Name <info@clientdomain.com>';

$headers = array (
    'From' => $from,
    'To' => $mailto,
    'Subject' => $subject
);

$smtp = Mail::factory('smtp', array (
        'host' => $host,
        'port' => '25',
        'auth' => true,
        'username' => $username,
        'password' => $password
    )
);

$mail = $smtp->send($mailto, $headers, $msg);

if (PEAR::isError($mail)) {    
    echo '<br /><br />' . $mail->getMessage();
} else {
    echo '<br /><br />Worked';
} 
```

我将 $email 值传递给脚本，如下所示：

```
$name = 'Joe Schmoe';
$email = 'webmaster@domain.com';
include ($_SERVER['DOCUMENT_ROOT'] . '/path/to/my/code/above.php'); 
```

当我运行脚本时，我收到以下错误：

```
Failed to add recipient: webmaster@domain.com@localhost
[SMTP: Invalid response code received from server
(code: 504, response: 5.5.2 :
    Recipient address rejected: need fully-qualified address)] 
```

如果我将 $mailto 变量从：

```
$mailto     = $name . ' <' . $email . '>'; 
```

...到以下内容：

```
$mailto     = $name . ' <webmaster@domain.com>'; 
```

它完美地工作。

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:20:27.443

我认为`@localhost`被添加到你的`$email`变量中`Mail.php`

尝试更改`$email`脚本中变量的名称。

你也可以`die($email);`在你的脚本中使用来测试不同阶段电子邮件的价值。

# objective-c - Objective-zip Xcode 4.3 问题

> ID：10451582
> 
> 赞同：-1
> 
> 时间：2012-05-04T15:14:47.217
> 
> 标签：objective-c, ios5, linker-errors, xcode4.3

我想在 Xcode 4.3 下将 Objective-zip 与 iOS 5 项目一起使用，但是当我在模拟器中运行我的应用程序时，这个链接器错误出现在我面前：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_ZipFile", referenced from:
      objc-class-ref in AddMeetingViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

[这个帖子](https://stackoverflow.com/questions/9230625/objective-zip-iphone-ios-5-issue)和我有同样的问题，但他的解决方案并没有解决我的问题。

对此的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:24:13.287

我已经解决了我的问题如下：

1）objective-zip 源文件必须包含在构建阶段的编译源部分中。

2）objective-zip 不使用 ARC，因此您必须将这些命令添加 `-fno-objc-arc`到步骤 1 中提到的所有源文件中，以告诉编译器不要对这些文件使用 ARC。

3) 要将这些命令添加到源文件，按住 cmd 按钮并选择所有源文件，然后按 enter 并在出现的文本框中键入此命令。

# linux-device-driver - 是否可以知道Linux中的串行端口是否连接/断开？

> ID：10451584
> 
> 赞同：4
> 
> 时间：2012-05-04T15:14:54.043
> 
> 标签：linux-device-driver, embedded-linux

是否可以在 linux pc 上查询特定的串口连接/断开连接？有什么方法可以读取 sysfs 信息来查询特定端口是否已连接？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T03:54:24.247

这取决于您所说的“连接”是什么意思。我将首先解决最不准确但最简单的含义。

**港口的存在**

如果您的意思是确定端口本身是否存在于系统中，那么您可以检查是否存在支持它的已加载模块，检查是否存在诸如 /dev/ttyS0 或 /dev/ttyUSB0 之类的设备，*并*验证您是否可以打开它（例如，我在实际上没有该硬件的系统上存在一个 /dev/ttyS0 设备文件）。USB 转换器可以热插拔，因此今天您可以看到实际的“串行端口”在正在运行的系统中来来去去。

**“调制解调器”控制/状态信号**

另一种可能性是您想知道是否有任何东西连接到端口。这不是系统必须知道的。有调制解调器控制和状态信号，外围设备可以断言，并且您可以读取它们。但是，外围设备不需要使用它们，甚至不需要以在调制解调器时代曾经有意义的方式使用它们。您可能会发现自己连接的许多系统仅使用接收和发送数据线和接地。

**通过接收数据检测**

剩下的可能性是，除了从中查找数据外，可能无法判断端口是否已连接。一些外围设备可能会定期自动生成数据，因此您可以尝试阅读并查看是否有任何数据。对于其他人，您可以发送一个查询（希望不是具有不良副作用的查询），看看您是否得到预期的响应。例如，如果您向其发送字符串“*IDN?\n”，近似实现 SCPI 标准的仪器可能会响应一些识别信息。

另一个主要问题是您必须将端口和外围设备配置为兼容的波特率和字格式。如果没有，您可能会得到看似随机的数据。在某些情况下，您可能能够从实现的 UART 引擎中读取帧错误位（您必须检查驱动程序是否公开了它）并将其用作可能存在某些东西的指示，但波特率错误速度。

通过对硬件和来自另一端的预期数据的细粒度控制，也可以编写一个自动波特率检测例程，尽管这通常在“外围”端而不是“主机”上实现。

# c++ - 使用矢量 使用 Boost.Pool 分配器

> ID：10451585
> 
> 赞同：3
> 
> 时间：2012-05-04T15:15:07.683
> 
> 标签：c++, performance, boost

我尝试将**Boost.Pool 分配器**与 一起使用`vector<wstring>`，期望某种形式的性能增益超过普通分配`vector<wstring>`（我期待某种快速的结果，例如[这些](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/19/420038.aspx)）。

但是，似乎使用 Boost.Pool 我实际上得到了*更糟糕*的结果，例如：

*   对于 15,000 次迭代的计数，`0 ms`显示为普通分配`vector<wstring>`，而不是使用 Boost.Pool 的经过时间为 5900 毫秒；

*   对于 5,000,000 次迭代的计数，使用默认分配器完成循环大约需要 1300 毫秒，而不是`boost::pool_allocator`需要很多时间（一分钟后我用`Ctrl`+打破了`C`）。

这是我编写的 C++ 代码基准测试：

```
//////////////////////////////////////////////////////////////////////////
// TestBoostPool.cpp
// Testing vector<wstring> with Boost.Pool
//////////////////////////////////////////////////////////////////////////

#include <exception>
#include <iostream>
#include <stdexcept>
#include <string>
#include <vector>

// To avoid linking with Boost Thread library
#define BOOST_DISABLE_THREADS

#include <boost/pool/pool_alloc.hpp>
#include <boost/timer/timer.hpp>

using namespace std;

void Test()
{
  // Loop iteration count
  static const int count = 5*1000*1000;

  //
  // Testing ordinary vector<wstring>
  //
  cout << "Testing vector<wstring>" << endl;
  {
    boost::timer::auto_cpu_timer t;
    vector<wstring> vec;
    for (int i = 0; i < count; i++)
    {
      wstring s(L"I think therefore I am; just a simple test string.");
      vec.push_back(s);
    }
  }

  //
  // Testing vector<wstring> with Boost.Pool
  //
  cout << "Testing vector<wstring> with Boost.Pool" << endl;
  {
    boost::timer::auto_cpu_timer t;
    typedef basic_string<wchar_t, char_traits<wchar_t>, 
      boost::fast_pool_allocator<wchar_t>> PoolString;

    vector<PoolString> vec;
    for (int i = 0; i < count; i++)
    {
      PoolString s(L"I think therefore I am; just a simple test string.");
      vec.push_back(s);
    }

    // Release pool memory
    boost::singleton_pool<boost::fast_pool_allocator_tag, sizeof(wchar_t)>::release_memory();
  }

  cout << endl;
}

int main()
{
    const int exitOk = 0;
    const int exitError = 1;

    try
    {
        Test();
    }
    catch(const exception & e)
    {
        cerr << "\n*** ERROR: " << e.what() << endl;
        return exitError;
    }

    return exitOk;
} 
```

我在滥用 Boost.Pool 吗？我在这里想念什么？

（我使用 VS2010 SP1 和 Boost 1.49.0）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T11:25:14.920

仅供参考 Boost.Pool 不是为这种用途而设计或优化的——它是为许多*固定大小的块*而设计的，就像在列表（甚至是地图或集合）中发生的那样，它并不是真正为可变大小的快速性能而设计的块就像发生在字符串或向量中一样。

# jquery - jQuery“警报”触发但设置img“src”被忽略？

> ID：10451587
> 
> 赞同：1
> 
> 时间：2012-05-04T15:15:14.993
> 
> 标签：jquery

从这个问题开始：
[Can't I use JQuery inside my FancyZoom popup?](https://stackoverflow.com/questions/10350139/cant-i-use-jquery-inside-my-fancyzoom-popup)

该问题的两个答案解决了这个问题，以便我们的`Hello World`警报在 FancyZoom 弹出窗口中持续触发。

但是，我们真正需要做的不是触发警报，而是更改 img 的 src。

这是我们所拥有的：

```
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/fancyzoom.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $(document).on('click', '#foo', function() { $('#foo').attr('src', 'i/image2.png'); alert('hello world'); });
    });
</script>
</head>

<body>
              <div id="Container">
                  <a id="myFancyZoomPopup" href="#Test"><span>test</span></a>
                  <div id="Test">
                      <p> this is some text in the popup</p>
                      <img id="foo" src="i/image1.png" />
                  </div>

                    <script type="text/javascript">
                        $('#myFancyZoomPopup').fancyZoom({ directory: 'i'});
                    </script>
                </div>
</body>
</html> 
```

“Hello World”正在触发，但图像源没有从`image1.png`变为`image2.png`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:18:18.927

您可以尝试设置`src`传统方式：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(document).on('click', '#foo', function() { 
          this.src = 'i/image2.png'; 
          alert('hello world'); 
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:26:11.460

尝试使用类使 dom 对 getElementById 错误不那么敏感，然后在单击时更新 $(this).attr 以使其针对单击的元素

```
<script type="text/javascript">
    $(document).ready(function() {
         $(document).on('click', '.foo', function() { $(this).attr('src', 'i/image2.png'); alert('hello world'); });
    });
</script>

<img class="foo" src="i/image1.png" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:19:29.780

您需要使用该`prop`方法来更改实际值；`attr`在较新的 jQuery 版本中具有不同的功能：

```
$('#foo').prop('src', 'newimg.png'); 
```

# xslt - XSLT 对 xml 文档的一部分进行排序

> ID：10451590
> 
> 赞同：1
> 
> 时间：2012-05-04T15:15:21.203
> 
> 标签：xslt

我一直在处理需要对 xml 文档的一部分（而不是完整的树）进行排序的要求。

```
<Root>
<AllData>
    <Data_not_to_be_sorted>
        <Additional_data1>
            <Some_test_data1/>
            <Some_test_data2/>
        </Additional_data1>
    </Data_not_to_be_sorted>
    <RealData>
        <Some_data1/>
        <Some_data2/>
        <GrandFather>
            <Data_required_as_it_is></Data_required_as_it_is>
            <Father>
                <Value>4</Value>
                <Name>name in 4</Name>
            </Father>
        </GrandFather>
        <GrandFather>
        <Data_required_as_it_is></Data_required_as_it_is>
            <Father>
                <Value>3</Value>
                <Name>name in 3</Name>
            </Father>
        </GrandFather>
    </RealData>
            <RealData>
        <Some_data1/>
        <Some_data2/>
        <GrandFather>
            <Data_required_as_it_is></Data_required_as_it_is>
            <Father>
                <Value>2</Value>
                <Name>name in 2</Name>
            </Father>
        </GrandFather>
        <GrandFather>
        <Data_required_as_it_is></Data_required_as_it_is>
            <Father>
                <Value>1</Value>
                <Name>name in 1</Name>
            </Father>
        </GrandFather>
    </RealData>

</AllData>
</Root> 
```

所以在对父亲/价值进行排序之后，我应该得到正确的祖父序列

```
<Root>
<AllData>
    <Data_not_to_be_sorted>
        <Additional_data1>
            <Some_test_data1/>
            <Some_test_data2/>
        </Additional_data1>
    </Data_not_to_be_sorted>
    <RealData>
        <Some_data1/>
        <Some_data2/>
        <GrandFather>
            <Data_required_as_it_is></Data_required_as_it_is>
            <Father>
                <Value>3</Value>
                <Name>name in 3</Name>
            </Father>
        </GrandFather>
        <GrandFather>
        <Data_required_as_it_is></Data_required_as_it_is>
            <Father>
                <Value>4</Value>
                <Name>name in 4</Name>
            </Father>
        </GrandFather>
    </RealData>
            <RealData>
        <Some_data1/>
        <Some_data2/>
        <GrandFather>
            <Data_required_as_it_is></Data_required_as_it_is>
            <Father>
                <Value>1</Value>
                <Name>name in 1</Name>
            </Father>
        </GrandFather>
        <GrandFather>
        <Data_required_as_it_is></Data_required_as_it_is>
            <Father>
                <Value>2</Value>
                <Name>name in 2</Name>
            </Father>
        </GrandFather>
    </RealData>

</AllData>
</Root> 
```

换句话说，我想根据父亲/值对子树祖父进行排序。休息一切都应该保持不变。我已经尝试过类似下面的东西..但这只是将源 xml 复制到输出中。

```
<xsl:stylesheet version="1.0"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>
<!-- Template to copy the nodes as they are -->

<xsl:template match="@* | node()">
<xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="GrandFather">
<xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="node()">    
    <xsl:sort select="self::Father/Value" data-type="number"/>
    </xsl:apply-templates>
</xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:49:52.963

**这种正确、更短、更简单、更通用的转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="*[F]">
  <xsl:copy>
   <xsl:apply-templates select="@*"/>

   <xsl:apply-templates select="node()">
    <xsl:sort select="self::F/Value" data-type="number"/>
   </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时：**

```
<Root>
    <AllData>
        <Data_not_to_be_sorted>
            <Additional_data1>
                <Some_test_data1/>
                <Some_test_data2/>
            </Additional_data1>
        </Data_not_to_be_sorted>
        <data>
            <Some_data1></Some_data1>
            <Some_data2></Some_data2>
            <F>
                <Value>2</Value>
                <Name>name in 2</Name>
            </F>
            <F>
                <Value>1</Value>
                <Name>name in 1</Name>
            </F>
        </data>
        <data>
            <Some_data1></Some_data1>
            <Some_data2></Some_data2>
            <F>
                <Value>4</Value>
                <Name>name 4</Name>
            </F>
            <F>
                <Value>3</Value>
                <Name>name in 3</Name>
            </F>
        </data>
    </AllData>
</Root> 
```

**产生想要的正确结果：**

```
<Root>
   <AllData>
      <Data_not_to_be_sorted>
         <Additional_data1>
            <Some_test_data1/>
            <Some_test_data2/>
         </Additional_data1>
      </Data_not_to_be_sorted>
      <data>
         <Some_data1/>
         <Some_data2/>
         <F>
            <Value>1</Value>
            <Name>name in 1</Name>
         </F>
         <F>
            <Value>2</Value>
            <Name>name in 2</Name>
         </F>
      </data>
      <data>
         <Some_data1/>
         <Some_data2/>
         <F>
            <Value>3</Value>
            <Name>name in 3</Name>
         </F>
         <F>
            <Value>4</Value>
            <Name>name 4</Name>
         </F>
      </data>
   </AllData>
</Root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:45:32.443

问题是那`F/Value`不是`Root`. 此外，在下面应用排序`Root`（如果您提供了可用的排序键）将仅对根的子元素进行排序。你需要做这样的事情（未经测试）：

```
<xsl:template match="@* | node()">
    <xsl:copy>
        <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
</xsl:template>
<xsl:template match="data">
    <xsl:apply-templates select="Some_data1"/>
    <xsl:apply-templates select="Some_data2"/>
    <xsl:apply-templates select="F">
        <xsl:sort select="Value"/>
    </xsl:apply-templates>
</xsl:template> 
```

关键是要记住样式表是声明性的，而不是程序性的。XSLT 引擎读取您的 XML，并在每个输入元素处查看样式表以决定输出什么。

# session - 如何使用 BATCH 命令检测用户在控制台与后台任务中的输入？

> ID：10451591
> 
> 赞同：1
> 
> 时间：2012-05-04T15:15:27.917
> 
> 标签：session, batch-file, background, task

我想知道如何检测计算机后面是否有人使用 Windows Server 终端/控制台来启动一组 BATCH 脚本，或者是否有一个自动后台任务正在启动这些脚本。我必须使用简单的批处理脚本来检测这一点。

我一直在互联网上寻找这两种“用户”之间可能存在的差异，但我找不到任何有用的东西。欢迎任何解决方案：击键捕获、重定向的标准输入、终端/控制台会话 ID 等。我尝试了所有这些，但直到现在都无法成功。

该解决方案必须适用于 Windows Server 2003、2008 和 2008 R2。但首先，我很高兴看到它仅在 WS 2003 上运行。

预先感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:05:24.687

我想我不太明白您所说的“*如何检测计算机后面是否有人”是*什么意思。但是，在[这篇文章](http://www.dostips.com/forum/viewtopic.php?f=3&t=2800)中，有一种方法可以检测*STDIN 是否被重定向到磁盘文件*，这可能意味着没有人在此批处理文件中输入输入，但这是以自动方式启动的。例如：

```
TypeOfHandle 0
if %errorlevel% geq 128 (
    rem STDIN redirected to disk file
    echo This program must be executed in interactive (not predefined-input) way^!
    goto :EOF
)
set /P input=Enter input please: 
etc... 
```

我希望它有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T07:49:21.327

```
If /i "%cmdcmdline:~0,6%"=="cmd /c" pause 
```

这通常适用于双击的批处理文件。

```
@for /f "tokens=10* delims=," %A in ('tasklist /fi "SESSION ne 1" /fi "imagename eq cmd.exe" /v /nh /fo CSV') do echo %A 
```

将列出在其他会话中运行的 cmd 标题。

# android - Android中的按钮推送和按钮释放事件混淆了

> ID：10451594
> 
> 赞同：2
> 
> 时间：2012-05-04T15:15:33.500
> 
> 标签：android, android-button

我想创建一个按钮，按下时发送“W”，释放时发送“X”。我现在编码的方式是，当我按下按钮时，它什么也不做，当我释放它时，它会发送“W”。我究竟做错了什么？代码：

```
 but = new Button(this);
    but.setText("FORWARD");
    but.setGravity(Gravity.CENTER);
    but.setId(Tab2_Forward);
    but.setOnClickListener(this);
    but.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
      LayoutParams.WRAP_CONTENT));
    panelH.addView(but);

    public void onClick(View v) {
       int cmdId = v.getId();
       if (cmdId == Menu_Tab1) {
          startDiscoverBluetoothDevices();
       }
       if (cmdId == Tab2_Forward) {
          if (Bee_btSocket != null)
             try {
                 Bee_btSocket.getOutputStream().write('w');
             } catch (IOException e) {
                 // TODO Auto-generated catch block
                 e.printStackTrace();
             }
          } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-20T20:15:10.883

利用：

```
but.setOnTouchListener(btnTouch);

private View.OnTouchListener btnTouch = new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        int action = event.getAction();
        if (action == MotionEvent.ACTION_DOWN)
            System.out.println("Touch");
        else if (action == MotionEvent.ACTION_UP)
            System.out.println("Release");
        return false;   //  the listener has NOT consumed the event, pass it on
    }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T15:19:03.437

button.onKeyDown() = 按下时做某事 button.onKeyUp() = 释放时做某事或 button.onTouch() = 按下时做某事 button.onClick() = 释放时做某事

```
 btn2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
        makethisToastup();}});
    btn2.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View view, MotionEvent event) {
        makethisToastdown();
        return false;
    }});

public void makethisToastup(){
Toast.makeText(this, "Buttonup", Toast.LENGTH_LONG).show();
}
public void makethisToastdown(){
Toast.makeText(this, "Buttondown", Toast.LENGTH_LONG).show();
} 
```

# vim - 有没有办法在 vim 中保存文件后静默运行 bash 命令？

> ID：10451597
> 
> 赞同：8
> 
> 时间：2012-05-04T15:15:44.400
> 
> 标签：vim

现在我每次保存时都使用以下命令编译咖啡脚本文件：

```
au BufWritePost widget.coffee ! ./compile_widget.sh 
```

然而，每次我保存时，我都会被问到以下问题：

```
Press ENTER or type command to continue 
```

有什么方法可以保存而不必按 Enter 继续？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T15:28:51.290

我建议使用类似[syntastic](https://github.com/scrooloose/syntastic)的东西。

但是，要解决明确的问题，您需要这样做

```
au BufWritePost widget.coffee silent !./compile_widget.sh | redraw 
```

提示由命令的输出触发。会`silent`抑制提示，但是当你这样做时，Vim 不会在 shell 命令之后重绘屏幕，以便你能够看到命令的输出。因此，`| redraw`强制 Vim 重新绘制屏幕。

这在[:help :!中讨论过](http://vimhelp.appspot.com/various.txt.html#%3A%21cmd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:29:09.777

你这样做是错的。你不应该要求 Vim 这样做。您应该查看[Guard](https://github.com/guard/guard)、[watchr](https://github.com/mynyml/watchr)或其他查看磁盘及其内容的工具。

# android - 从 ActivityInstrumentationTestCase2 创建连接

> ID：10451598
> 
> 赞同：0
> 
> 时间：2012-05-04T15:15:45.903
> 
> 标签：android, android-networking, android-testing

我有一个很少权限的 Android 应用程序，并且明确没有 android.permission.INTERNET 权限。

从 ActivityInstrumentationTestCase2 我想启动一个服务器，它将接收要针对应用程序执行的测试命令。

使用 ServerSocket 将失败，因为 Android 将尝试在应用程序的上下文中创建套接字，而不是在仪器的上下文中。

这可以做到吗？

## 我为什么要这样做？

根据要求，这里有一些背景知识。

我在测试自动化框架[Calabash-Android上工作](https://github.com/calabash/calabash-android/)

我们在仪器内部运行一个服务器，它接收命令并与应用程序交互。我们希望能够在不要求开发人员设置互联网权限的情况下测试应用程序。这是我们可以在不修改应用程序的情况下测试任何应用程序之前唯一缺少的部分。

架构的描述可以在这里找到：http: [//blog.lesspainful.com/2012/03/07/Calabash-Android/](http://blog.lesspainful.com/2012/03/07/Calabash-Android/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:40:02.683

要使用检测上下文而不是应用程序的上下文，请传递：

getInstrumentation().getContext()

# x11 - 您如何确定存在哪些 X 显示器？

> ID：10451600
> 
> 赞同：0
> 
> 时间：2012-05-04T15:15:47.977
> 
> 标签：x11, multiple-monitors

我在一台运行 cygwin 和 X 的 Windows 机器上，有三个显示器。当我 ssh -Y 到远程机器时，DISPLAY 设置为 localhost:15.0 之类的东西。有没有办法确定可以使用哪些其他值来指向我的本地机器？

看来我应该能够做类似的事情

```
DISPLAY=localhost:15.2 xeyes 
```

让程序出现在第二台显示器上。但是，到目前为止，除了默认值之外，没有任何效果。我只尝试了 localhost:15.1、localhost:15.2 和 localhost:15.3，但我不知道我还能尝试什么。

如果除了 DISPLAY 之外还有其他方法可以控制显示器，我也很乐意使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:11:14.230

我不认为 cygwin X 在显示名称中支持屏幕编号以进行监视器映射。但是，所有 X 程序都有一个`-geometry`参数，您可以使用该参数来设置初始窗口位置。它记录在[X(7) 联机帮助页](http://linux.die.net/man/7/x)的“几何规范”部分。X 显示器实际上是一个包围所有显示器的大矩形。如果监视器 2 的左上角在 X 坐标中是 (1200, 0)，则可以通过运行将 xeyes 获取到监视器 2 的左上角`xeyes -geometry +1200+0`。如果什么都没有显示——也许坐标不在屏幕上——尝试通过`xwininfo`从终端运行然后单击现有的 X 窗口来查看现有窗口的坐标。

# .htaccess - htaccess Mod_rewrite 带重音符号

> ID：10451601
> 
> 赞同：0
> 
> 时间：2012-05-04T15:15:50.847
> 
> 标签：.htaccess, mod-rewrite, diacritics

我有一个国际网站，网站的一部分，用于创建一个新人，在 URL 中有这个人的名字。我需要该 URL 以允许重音以及一些特殊字符，例如 à

现在我正在使用：

```
RewriteRule ^([áéíóúñÁÉÍÓÚÑäëïöüÄËÏÖÜçÇA-Za-z-]+)/?$ /newPerson.php?person=$1 [NC,QSA] 
```

更新：这可行，但不是一种非常优雅的方法。我要求一种更好的方法来匹配所有字母（小写和大写）与所有可能的重音 à、á、ä... 等，如果有的话。

更新2：在正则表达式中没有明显的方法来表示“一个字符及其所有重音版本”所以我想我会坚持这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:51:37.793

您可以只允许除 eg 之外的任何内容`/` `.`。`[^ ]`正则表达式为此使用-notation。在您的情况下，您可以使用：

```
RewriteRule ^([^/.]+)/?$ /newPerson.php?person=$1 [QSA] 
```

# java - 如何访问存储在java中的数据库或文件中的unicode

> ID：10451616
> 
> 赞同：0
> 
> 时间：2012-05-04T15:16:52.123
> 
> 标签：java, unicode

我存储了一些单词并分配给相应的 unicode。例如：

```
arasu "\u0C85\u0CA5\u0CB2\u0CC1";
aadalu "\u0C86\u0CA1\u0CB2\u0CC1"; 
```

上述带有 unicode 的单词存储在文本文件中。每当我们从这个文本文件中访问单词和 unicode 时，它​​必须以“kannada”语言显示单词。首先，我们从文本文件中访问 unicode，然后将该 unicode 分配给一个字符串。例如，如果我们通过在 java 程序中读取文本文件中的第一个 unicode "\u0C85\u0CA5\u0CB2\u0CC1" 并将其存储到字符串 'str' 中来访问它。现在字符串 str 的 unicode 为“\u0C85\u0CA5\u0CB2\u0CC1”。如果我们在下面的代码中传递这个字符串

```
JFrame frame= new JFrame("TextArea frame");
GraphicsEnvironment.getLocalGraphicsEnvironment();
Font font= new Font("Tunga",Font.PLAIN,40);
JPanel panel=new JPanel();
JTextArea jt=new JTextArea(str);
jt.setFont(font);
frame.add(panel);
panel.add(jt);
frame.setSize(250,200);
frame.setVisible(true);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

然后它必须以卡纳达语显示输出。但现在它没有在卡纳达语中显示。它显示方形框。如何解决这个问题。请帮助我们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:51:24.867

您的 Java 环境可能不包含名为“Tunga”的字体，而是您获得了某种默认字体（不支持您需要的字形）。

做完之后

```
Font font= new Font("Tunga",Font.PLAIN,40); 
```

你会有*一些*字体，但不一定完全符合你的要求。您可以尝试记录结果以查看您的位置：

```
System.out.println("Font = "+font); 
```

例如，在我的机器上，它记录：

```
Font = java.awt.Font[family=Dialog,name=Tunga,style=plain,size=40] 
```

-- 因为我没有“Tunga”，所以它回退到“Dialog”字体系列。

你可以看看

```
GraphicsEnvironment.getLocalGraphicsEnvironment().getAvailableFontFamilyNames(); 
```

查看您可以使用哪些字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:35:10.277

方框表示“所选字体不支持此字形”（字形通常是一个字符）。

大多数字体不提供完整的（=[所有 Unicode 代码点](http://babelstone.blogspot.com/2005/11/how-many-unicode-characters-are-there.html)）。一个原因是它们有很多（Unicode 6.1 知道 249,763 个代码点）。另一个是“Unicode”是一个不断发展的标准，当新字符出现时，字体不会神奇地“更新”自己。

您的解决方案是使用提供更多字形的字体。

如果你在 Windows 上，试试“Arial”——它有相当不错的 Unicode 支持。

一个便宜的测试是下载 HTML 页面[http://www.alanwood.net/unicode/kannada.html](http://www.alanwood.net/unicode/kannada.html)并将不同的字体名称放入这个 CSS 元素中：

```
td.b {font-size:1.8em;} 
```

要试用 Arial，请使用以下代码：

```
td.b {font-size:1.8em; font-family: Arial;} 
```

替换字体名称，直到您对结果满意为止。如果字体名称包含空格，则需要引用名称：

```
td.b {font-size:1.8em; font-family: "Times New Roman";} 
```

**[编辑]** [jarnbjo](https://stackoverflow.com/users/180659/jarnbjo)刚刚提到，如果您想要的字体不支持 unicode（或不支持页面），大多数浏览器都会为您选择不同的字体。

[所以试试这个：编写一个调用font.canDisplay(int codePoint)](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#canDisplay%28int%29)的小型 Java 程序，其中 codePoint 必须是您想要的字符。从它开始，`0x0CC1`因为它似乎是一个常见的字符。如果方法返回`true`，则字体支持该字形。

要获取所有字体，请调用`panel.getGraphis().getAvailableFontFamilyNames()`以获取名称列表。`font.canDisplay( 0x0cc1 )`尝试每一个并打印返回的那些`true`。

如果您想要“最佳”字体，请计算支持的和之间的字符数`0x0c82`，`0xcf2`并按该数字对字体列表进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:47:56.197

这里看起来不错：

![在此处输入图像描述](../Images/ae921d48dc1177a65c7649ad5a2caeb5.png)

您确定其中`str`包含您期望的内容并且在读取和写入文本文件时没有字符编码问题吗？

# css - less css mixin 参数 A 作为参数 B 的默认值

> ID：10451617
> 
> 赞同：0
> 
> 时间：2012-05-04T15:16:54.730
> 
> 标签：css, parameters, less, mixins

我目前正在使用 LESS CSS 并尝试创建一个模仿速记参数的默认 css 行为的 mixin。

在 CSS 中你经常声明 ie

```
margin: 5px 5px 10px; 
```

它被读作

```
margin: 5px 5px 10px 5px; 
```

我用边界半径混合器尝试了同样的方法

```
.border-radius (@topright: 5px, @bottomright: @topright, @bottomleft: @topright, @topleft:  @bottomright) {} 
```

如果仅使用一个参数调用，我希望它将第一个作为默认值。如果我用 2 个参数调用它，它应该将第一个作为第三个的默认值，将第二个作为第四个的默认值。

有没有办法单独使用 LESS 来实现这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:51:11.700

正确的方法是只接收一个参数

```
.border-radius(@px) {
    -webkit-border-radius: @px;
    -moz-border-radius: @px;
    border-radius: @px;
} 
```

然后你可以用一个参数调用它：

```
.border-radius(5px); 
```

或与许多。这需要您将它们放入变量中，或者将它们转义：

```
@myradius: 5px 5px 10px;
.border-radius(@myradius); 
```

或者

```
.border-radius(~"5px 5px 10px"); 
```

我[读到](http://www.markdotto.com/2012/04/05/comma-separated-values-in-less-mixins/)[Bootstrap 项目](http://twitter.github.com/bootstrap/)为了简洁起见使用后一个版本。

# image - 我可以使用 NSString 来保存/加载图像吗？

> ID：10451620
> 
> 赞同：0
> 
> 时间：2012-05-04T15:17:08.973
> 
> 标签：image, nsstring, xcode4.3

我有一个用户从相机胶卷中挑选的图像。我希望用户能够从 UI 图像视图中保存和加载图像。我现在将图像保存在单例类中，这很好，直到应用程序停止运行或设备重新启动。

我可以使用类似于用于存储文本字符串的代码来存储图像吗？我曾尝试将 .text 更改为 .image ，但不出所料，没有这样的运气（这有点遥不可及）

```
- (IBAction)functionsave:(id)sender {
NSString *savecontents = _function.text;
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:savecontents forKey:@"savecontents1"];
[defaults synchronize];

- (IBAction)Functionload:(id)sender {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *loadstring = [defaults objectForKey:@"savecontents1"];
[_function setText:loadstring]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:32:24.300

NSString 对象适合保存字符串，而不是图像。如果您想保存图像以供以后使用，我建议您将这些图像以 PNG 格式保存到应用程序的沙箱（即文档文件夹）中：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

您可以使用以下方法保存图像：

```
UIImage *myImage = ...
NSData *data = UIImagePNGRepresentation(myImage);
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *appDocsDirectory = [paths objectAtIndex:0];
[data writeToFile:[NSString stringWithFormat:@"%@/%@.png",  appDocsDirectory , @"myNewFile"] atomically:YES]; 
```

然后，您可以使用以下命令将图像检索到 UIImage 中：

```
UIImage* thumImage = [UIImage imageWithContentsOfFile:[[NSString stringWithFormat:@"%@/%@.png",  appDocsDirectory , @"myNewFile"]]; 
```

我认为使用真实文件比 NSUserDefaults 更适合内存消耗。因为您可以一次从内存中加载/卸载一个文件。

# php - 将 PayPal 的“捐赠”按钮链接到 Wordpress 的“发表评论”按钮

> ID：10451621
> 
> 赞同：1
> 
> 时间：2012-05-04T15:17:10.533
> 
> 标签：php, html, wordpress, paypal

我正在使用 Wordpress 模板作为收集口头报价的系统，真正发表评论，这将使网站的访问者花费 1 美元。我已将帖子末尾的标准“发表评论”文本更改为“提交投标”。

我还安装了一个 PayPal 捐赠插件，该插件会在页面上显示“捐赠”按钮。

我想将这两个按钮的功能合并为一个按钮，即“提交投标”按钮。需要明确的是，提交投标按钮将用户的评论发布到发布页面；我需要一个按钮来执行此操作，同时将用户引导至 PayPal 以捐赠 1 美元。

理想情况下，我会进行检查以验证用户是否实际支付了 1 美元才能提交投标，但由于这更复杂，而且这是出于慈善目的，我相信我的用户实际支付。捐赠后，PayPal 会将他们重定向到他们提交口头投标（“评论”）的页面。

“提交投标”按钮的 php 看起来像（它来自典型 wordpress 博客的标准“comments.php”）：

```
<input type="submit" value="Submit Bid" /><input type="hidden" name="comment_post_ID" value="<?php echo $id; ?>" /> 
```

PayPal“捐赠”按钮实际上是作为功能放置在页面上的插件：

```
<?php echo Paypal_payment_accept(); ?> 
```

功能代码很长，但在页面上放置实际“捐赠”按钮的代码是：

```
$output .= "<input type=\"image\" src=\"$payment_button\" name=\"submit\" alt=\"Make payments with payPal - it's fast, free and secure!\" />"; 
```

非常感谢有关如何解决这个看似微不足道的问题的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:25:19.577

实际上，可能有一种更简单的方法，而不是使用表单使用 Paypal 提交。

保留重定向代码，但将 $location 变量编辑为将用户带到 paypal 的 URL，其中包含您要发送给他们的所有变量，例如： [https ://www.paypal.com/cgi-bin/webscr ?cmd=_xclick&business=email%40paypalhacks%2Ecom&amount=1%2E00¤cy_code=USD&item_name=donation&item_number=1001&quantity=1&shipping=3%2E00&no_shipping=0](https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=email%40paypalhacks%2Ecom&amount=1%2E00&currency_code=USD&item_name=donation&item_number=1001&quantity=1&shipping=3%2E00&no_shipping=0)

所以它会正常处理评论，然后将用户发送到paypal页面进行支付。您可以在浏览器中访问该 URL 以检查它是否有效。可能还添加一个“return”变量以将用户返回到原始 $location 值，因此用户将在成功支付到 paypal 后进入评论页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:03:06.870

您基本上需要一个按钮来执行 2 个操作。因此，与其拥有两个表单（paypal 插件将添加自己的表单标签），不如在评论处理代码之前或之后添加 paypal 重定向功能？

因此，当用户在评论上按下提交按钮时，让页面正常处理提交，但在该文件中，在处理评论后，将用户重定向到贝宝。

您可以更改 wp-comments-post.php 文件中的代码，该文件位于您的 Wordpress 根文件夹中。

你不需要为此使用插件，它是一个非常简单的贝宝代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="<!-- paypal user email which receives payments -->">
<input type="hidden" name="lc" value="CA">
<input type="hidden" name="item_name" value="<!-- donation -->">
<input type="hidden" name="item_number" value="1">
<input type="hidden" name="amount" value="<!-- donation amount -->">
<input type="hidden" name="currency_code" value="CAD">
<input type="hidden" name="return" value="<!-- the URL to redirect the user after payment -->">
<input type="hidden" name="button_subtype" value="services">
<input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHosted">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1"><br />
            </form> 
```

此外，您可以审核所有评论，因此在获得审核人批准之前不会在网站上发布。您可以在仪表板 > 设置 > 讨论中管理这些设置。这样，您可以选择仅批准通过贝宝成功付款的用户的评论（通过比较他们的电子邮件 ID）。

# javascript - 窗口最小化后快速播放jquery滑块动画

> ID：10451631
> 
> 赞同：0
> 
> 时间：2012-05-04T15:17:39.550
> 
> 标签：javascript, jquery, animation, timeout, slider

我在网站上使用 coda 滑块，不幸的是，在窗口最小化后，内容滑块播放速度非常快。我知道这与设置超时有关，但我还没有达到完美的结果。对此的任何帮助将不胜感激。我的脚本代码是：

```
 var theInt = null;
    var $crosslink, $navthumb;
    var curclicked = 0;

    theInterval = function(cur){
        clearInterval(theInt);

        if( typeof cur != 'undefined' )
            curclicked = cur;

        $crosslink.removeClass("active-thumb");
        $navthumb.eq(curclicked).parent().addClass("active-thumb");
            $(".stripNav ul li a").eq(curclicked).trigger('click');

        theInt = setInterval(function(){
            $crosslink.removeClass("active-thumb");
            $navthumb.eq(curclicked).parent().addClass("active-thumb");
            $(".stripNav ul li a").eq(curclicked).trigger('click');
            curclicked++;
            if( 4 == curclicked )
                curclicked = 0;

        }, 8000);
        setTimeout( nextCycle, 2000 );
    };

    $(function(){

        $("#main-photo-slider").codaSlider();

        $navthumb = $(".nav-thumb");
        $crosslink = $(".cross-link");

        $navthumb
        .click(function() {
            var $this = $(this);
            theInterval($this.parent().attr('href').slice(1) - 1);
            return false;
        });

        theInterval();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:19:04.543

我总是遇到 setTimeout 的问题。我的方法是执行以下操作：

`var timer = setTimeout( function(){nextCycle();}, 2000 );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:20:06.520

看起来图书馆正在与我正在使用的另一个图书馆发生冲突。我使用了另一个功能，当浏览器窗口最小化或返回页面时更改选项卡以刷新页面，在这种情况下，所有脚本将重新加载，滑块将从头开始。虽然如果我可以在不刷新整个页面而仅通过刷新脚本或以某种方式从头开始播放滑块的情况下做到这一点会更好，但不幸的是我的javascript知识并不多！这是代码：

```
 $(window).blur(function() {
//Do Nothing//   
});

$(window).focus(function() {
//This refreshes the whole page //
       location.reload();
}); 
```

# c# - 将固定宽度的平面文件数据批量插入 Oracle 11g r2 的最快方法是什么？

> ID：10451634
> 
> 赞同：0
> 
> 时间：2012-05-04T15:17:55.757
> 
> 标签：c#, database, flat-file, oracle11gr2

我的任务是每天从固定宽度格式的平面文件中插入约 100 万行。我没有直接访问数据库文件系统的权限。任何外部挂载或 samba 共享也无法访问文件系统。

我在完成这项工作时得到的一些建议是：

*   使用某种类型的 ETL 应用程序，例如 Scriptella
*   首先将文件转换为 XML 并以这种方式插入
*   使用 SQL*Loader
*   使用某种类型的 PL/SQL 脚本来完成这个

可用于运行任何这些类型的解决方案的系统是 Windows Server。如果可以以编程方式编写某些东西来实现这一点，那么它也必须在 C# 中。

鉴于所呈现的访问限制，最理想的方法是什么？除了上述建议之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:19:51.437

没有什么比直接加载 SQL*Loader 更好的了（除了外部表——但由于您无法访问服务器上的文件系统，因此您无法使用它们）。

# c++ - C++ 和全动态函数

> ID：10451635
> 
> 赞同：6
> 
> 时间：2012-05-04T15:17:57.893
> 
> 标签：c++, assembly, this, detours, cdecl

我有绕路的问题。众所周知，Detours 只能在 5 个字节的空间中移动（即一个 'jmp' 调用和一个 4 个字节的地址）。因此，在类（方法）中不可能有“钩子”函数，您无法提供“this”指针，因为根本没有足够的空间（[这里的](https://stackoverflow.com/questions/10436431/detouring-and-using-a-thiscall-as-a-hook-gcc-calling-convention)问题更彻底地解释了）。因此，我整天都在集思广益以寻求解决方案，现在我想请您对这个主题提出想法，这样我就不会在不知道是否可行的情况下开始一个 3-5 天的项目。

我最初有 3 个目标，我希望“挂钩”函数是类方法，我希望整个方法是面向对象的（没有静态函数或全局对象），最糟糕/最难的部分是完全动态的。这是我的（理论上）解决方案；使用汇编可以在运行时修改函数（一个完美的例子是任何绕行方法）。所以既然我可以动态修改函数，我不应该也可以动态创建它们吗？例如; 我分配内存，比如说~30字节（通过malloc/new）。难道不能只用对应于不同汇编运算符的二进制数替换所有字节（如 0xE9 是'jmp'），然后直接调用地址（因为它会包含一个函数）？

注意：我事先知道返回值，以及我想要绕行的所有函数的所有参数，并且由于我使用的是 GCC，thiscall 约定实际上与 _cdecl 相同。

所以这是我的想法/即将实现；我创建了一个“功能”类。此构造函数采用可变数量的参数（第一个参数除外，它描述了目标函数的返回值）。

每个参数都是对钩子将接收的参数的描述（大小，以及它是否是指针）。因此，假设我想为 a 创建一个 Function 类`int * RandomClass::IntCheckNum(short arg1);`。然后我只需要这样做：`Function func(Type(4, true), Type(4, true), Type(2, false));`. 其中“类型”定义为`Type(uint size, bool pointer)`. 然后通过汇编我可以动态地创建函数（注意：这都将使用 _cdecl 调用约定），因为我可以计算参数的数量和总大小。

编辑：在这个例子中，`Type(4, true)`是返回值（int*），scond`Type(4, true)`是 RandomClass 'this' 指针并`Type(2, false)`描述了第一个参数（短 arg1）。

通过这种实现，我可以轻松地将类方法作为回调，但它需要大量的汇编代码（我什至没有特别的经验）。最后，唯一非动态的东西是我的回调类中的方法（这也需要 pre 和 post 回调）。

所以我想知道；这可能吗？它需要做多少工作，我在这里过头了吗？

编辑：如果我把所有的东西都说得有点模糊，我很抱歉，但是如果你想更彻底地解释一些事情，请询问！

EDIT2：我也想知道，我是否可以在某处找到所有汇编运算符的十六进制值？一份清单会有很多帮助！和/或是否有可能以某种方式“保存” asm(""); 内存地址的代码（我非常怀疑）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:36:45.067

您所描述的通常称为“thunking”，并且很常见。从历史上看，最常见的目的是在 16 位和 32 位代码之间进行映射（通过自动生成一个新的 32 位函数来调用现有的 16 位函数，反之亦然）。我相信一些 C++ 编译器也会生成类似的函数来将基类指针调整为多重继承中的子类指针。

这当然似乎是解决您的问题的可行解决方案，而且我预计不会有任何大问题。只需确保使用操作系统中所需的任何标志分配内存，以确保内存是可执行的（大多数现代操作系统默认提供不可执行的内存）。

您可能会发现此链接很有帮助，尤其是在 Win32 中工作时：http: [//www.codeproject.com/Articles/16785/Thunking-in-Win32-Simplifying-Callbacks-to-Non-sta](http://www.codeproject.com/Articles/16785/Thunking-in-Win32-Simplifying-Callbacks-to-Non-sta)

关于查找汇编操作的十六进制值，我所知道的最好的参考是 NASM 汇编器手册的附录（我之所以这么说，是因为我帮助编写了它）。这里有一个副本：[http ://www.posix.nl/linuxassembly/nasmdochtml/nasmdoca.html](http://www.posix.nl/linuxassembly/nasmdochtml/nasmdoca.html)

# facebook-php-sdk - 将照片上传到新闻提要

> ID：10451639
> 
> 赞同：1
> 
> 时间：2012-05-04T15:18:16.463
> 
> 标签：facebook-php-sdk, photos, image-uploading, feed

我正在使用 php api 上传照片和发布签到。几周前，我的照片会自动显示在动态消息中，但现在不会。我的代码：

```
$photo_details = array('message'=> 'TEST');
$file='../uploads/'.$_GET['filename'];
$photo_details['image'] = '@' . realpath($file);
$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details); 
```

顺便说一句，我的 chekins 显示在 News Feed 中

# jquery - jquery 手风琴不能处理从 AJAX 收到的内容

> ID：10451640
> 
> 赞同：0
> 
> 时间：2012-05-04T15:18:18.880
> 
> 标签：jquery, html, ajax, accordion, jquery-ui-accordion

通过 AJAX 从另一个页面接收内容时，我遇到了手风琴不工作的问题。该页面是这一页：http: [//jbm.utad.pt/testes/tempo/index.php](http://jbm.utad.pt/testes/tempo/index.php)

页面加载后，它会立即向 processtempo.php 发送默认城市名称，使用 AJAX 将结果返回到 div：

在 processtempo.php 中，我有手风琴的 HTML，但它的 jQuery 在 index.php 中。这个手风琴不能工作是因为 HTML 必须在主页中还是我搞砸了 jQuery？

您可以在源代码中查看手风琴 jQuery 脚本...我还没有将它放在特定的 js 文件中。

非常感谢所有可能的帮助，并对这个模糊的问题感到抱歉

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T12:40:46.417

在 ajax 例程将元素加载到页面之前，您正在为元素分配一个`click()`事件`.tempo-head`，并对元素执行一系列其他操作。

您需要获取最新版本的 JQuery 才能执行以下操作。我注意到您目前有一个过时的版本（1.4.2）

尝试改变这个：

```
$('.tempo-head').click(function () { 
```

至

```
$('#sidebar').on('click', '.tempo-head').click(function () { 
```

或者

将所有手风琴例程移动到`success`ajax 调用中的回调内部，如下所示。

```
$(document).ready(function(){

    var cidade2='penafiel';
    var dataString = 'cidade='+ cidade2;
    $.ajax({ type: "POST", url: "processtempo.php", data: dataString, cache: false,
        success: function(html){
            $("#exibe_tempo").html(html);
        }
    });

    $(".cidade").change(function(){
        var cidade=$(this).val();
        var dataString = 'cidade='+ cidade;

        $.ajax({ type: "POST", url: "processtempo.php", data: dataString, cache: false,
            success: function(html){
                $("#exibe_tempo").html(html);

                //Add Inactive Class To All Accordion Headers
                $('.tempo-head').toggleClass('head-off');

                //Set The Accordion Content Width
                var contentwidth = $('.tempo-head').width();
                $('.tempo-cont').css({'width' : contentwidth });

                //Open The First Accordion Section When Page Loads
                //$('.tempo-head').first().toggleClass('head-on').toggleClass('head-off');
                //$('.tempo-cont').first().slideDown().toggleClass('tempo-cont');

                // The Accordion Effect
                $('.tempo-head').click(function () {        
                        if($(this).is('.head-off')) {
                            $('.head-on').toggleClass('head-on').toggleClass('head-off').next().slideToggle().toggleClass('tempo-cont');
                            $(this).toggleClass('head-on').toggleClass('head-off');
                            $(this).next().slideToggle().toggleClass('tempo-cont');
                        }

                        else {
                                $(this).toggleClass('head-on').toggleClass('head-off');
                                $(this).next().slideToggle().toggleClass('tempo-cont');
                        }

                });

            }
        });
    });

    return false;

}); // END DOC READY 
```

# mysql - SQLSTATE [42000]：语法错误或访问冲突：1286 未知表引擎“InnoDB”

> ID：10451644
> 
> 赞同：3
> 
> 时间：2012-05-04T15:18:20.957
> 
> 标签：mysql, innodb

你们中的一些人可能会说“其他线程中有很多答案”或“谷歌搜索”。但实际上我没有找到答案。

我正在使用 symfony 开发一个 PHP / MySQL 项目，但由于未知原因（意思是“我没有写任何 php 行”），我收到此错误“SQLSTATE [42000]：语法错误或访问冲突：1286 未知表引擎” InnoDB'”。

我已经尝试过这些解决方案：

1.  重启 MySQL
2.  停止 MySQL，删除 ib_logfile0 和 ib_logfile1，启动 Mysql
3.  做一个“显示引擎”。此命令不返回“InnoDB”实例。甚至没有“不活跃”（很奇怪，对吗？）。
4.  （甚至更奇怪）PHPMyAdmin 显示所有表，除了使用 InnoDB 的表显示“使用”而不是“InnoDB”。MyISAM 表没有问题。

有些人建议转储数据库，重新编译 MySQL 并将 sql 文件加载到重新编译的数据库中，但是......假设我没有心情这样做（这需要很多时间）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-03T18:15:42.273

`Show engines`告诉 InnoDB 由于某种原因无法启动。您必须打开错误日志（检查`SHOW VARIABLES LIKE 'error_log'`）：

```
mysql> show variables like 'log_error';
+---------------+--------------------------+
| Variable_name | Value                    |
+---------------+--------------------------+
| log_error     | /var/log/mysql/error.log |
+---------------+--------------------------+
1 row in set (0.00 sec) 
```

并找出 InnoDB 启动失败的原因。然后修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:24:00.793

首先检查你的 MySQL 版本，是否支持 innoDB，其次检查 linux 上的 mysql 配置文件（/etc/my.cnf 或 /etc/mysql/my.cnf），（Windows 我不知道）是否禁用了 innodb带有“skip-innodb”参数。某些配置禁用了对 innoDB 的支持，因为使用了大部分 RAM，

# php - 在更改值时静态变量与非静态变量冲突

> ID：10451646
> 
> 赞同：0
> 
> 时间：2012-05-04T15:18:31.630
> 
> 标签：php

考虑以下代码：

```
class A {
    private $a;

    function f() {
        A::a = 0; //error
        $this->a = 0; //error
        $self::a = 0; //error
    }
} 
```

如何更改`$a`f()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:20:08.273

你很亲密。任何一个：

```
self::$a = 0; //or
A::$a = 0; 
```

如果它是静态的，或者：

```
$this->a = 0; 
```

如果不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:20:01.653

我相信语法是：

```
self::$a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:29:07.297

显然我们都被问题的标题所欺骗，尽管这里是你如何改变 $a 的值。

```
<?php

class A {
    private $a;

    function f() {
        //A::a = 0; //error
        $this->a = 10; //ok
        //$self::a = 0; //error
    }

    function display() {
        echo 'a : ' . $this->a . '<br>';
    }
}

$a = new A();
$a->f();
$a->display();

?> 
```

输出：

a : 10

如果您希望 $a 是静态的，请使用以下内容：

```
<?php

class A {
    private static $a;

    function f() {
        //A::$a = 0; //ok
        //$this->a = 10; //Strict Standards warning: conflicting the $a with the static $a property
        self::$a = 0; //ok
    }

    function display() {
        echo 'a : ' . self::$a . '<br>';
    }
}

$a = new A();
$a->f();
$a->display();
// notice that you can't use A::$a = 10; here since $a is private

?> 
```

# c# - C#语言，计算器

> ID：10451647
> 
> 赞同：3
> 
> 时间：2012-05-04T15:18:36.857
> 
> 标签：c#, calculator

大家好，感谢您帮助我。

我用 C# 制作了这个计算器，但遇到了一个问题。当我添加 5+5+5 之类的东西时，它会给我正确的结果，但是当我想减去两个以上的数字并除以或乘以两个以上的数字时，我没有得到正确的结果。

你知道我做错了什么吗

非常感谢你！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace calculator
{
    public partial class Calculator : Form
    {
        public Calculator()
        {
            InitializeComponent();
        }

        private void btnOne_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnOne.Text;
            //txtDisplay.Text = btnOne.Text;
        }

        private void btnTwo_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnTwo.Text;
        }

        private void btnThree_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnThree.Text;
        }

        private void btnFour_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnFour.Text;
        }

        private void btnFive_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnFive.Text;
        }

        private void btnSix_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnSix.Text;
        }

        private void btnSeven_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnSeven.Text;
        }

        private void btnEight_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnEight.Text;
        }

        private void btnNine_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnNine.Text;
        }

        private void btnZero_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + btnZero.Text;
        }

        private void btnClear_Click(object sender, EventArgs e)
        {
            txtDisplay.Clear();
        }

        private void btnPoint_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + ",";
        }

        double total1 = 0;
        double total2 = 0;

        bool plusButtonClicked = false;
        bool minusButtonClicked = false;
        bool divideButtonClicked = false;
        bool multiplyButtonClicked = false;

        private void btnPlus_Click(object sender, EventArgs e)
        {
            plusButtonClicked = true;
            minusButtonClicked = false;
            divideButtonClicked = false;
            multiplyButtonClicked = false;

            total1 = total1 + double.Parse(txtDisplay.Text);
            txtDisplay.Clear();
        }

        private void btnMinus_Click(object sender, EventArgs e)
        {
            plusButtonClicked = false;
            minusButtonClicked = true;
            divideButtonClicked = false;
            multiplyButtonClicked = false;

            total1 = total1 + double.Parse(txtDisplay.Text);
            txtDisplay.Clear();
        }

        private void btnDivide_Click(object sender, EventArgs e)
        {
            total1 = total1 + double.Parse(txtDisplay.Text);
            txtDisplay.Clear();

            plusButtonClicked = false;
            minusButtonClicked = false;
            divideButtonClicked = true;
            multiplyButtonClicked = false;
        }

        private void btnMultiply_Click(object sender, EventArgs e)
        {
            total1 = total1 + double.Parse(txtDisplay.Text);
            txtDisplay.Clear();

            plusButtonClicked = false;
            minusButtonClicked = false;
            divideButtonClicked = false;
            multiplyButtonClicked = true;
        }

        private void btnEquals_Click(object sender, EventArgs e)
        {

            if (plusButtonClicked == true)
            {
                total2 = total1 + double.Parse(txtDisplay.Text);
            }

            else if (minusButtonClicked == true)
            {
                total2 = total1 - double.Parse(txtDisplay.Text);
            }

            else if (divideButtonClicked == true)
            {
                total2 = total1 / double.Parse(txtDisplay.Text);
            }

            else if (multiplyButtonClicked == true)
            {
                total2 = total1 * double.Parse(txtDisplay.Text);
            }

            txtDisplay.Text = total2.ToString();
            total1 = 0;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:23:18.017

此代码尚未经过彻底测试。您为什么不尝试以下方法：

```
using System;
using System.Windows.Forms;

namespace Calculator
{
    public enum Operator
    {
        None,
        Add,
        Minus,
        Divide,
        Multiply
    }

    public partial class Calculator : Form
    {
        private double total = 0;
        private double currentValue = 0;
        private Operator currentOperator;

        public Calculator()
        {
            InitializeComponent();
        }

        private void btnOne_Click(object sender, EventArgs e)
        {
            ShowInput(btnOne.Text);
        }

        private void btnTwo_Click(object sender, EventArgs e)
        {
            ShowInput(btnTwo.Text);
        }

        private void btnThree_Click(object sender, EventArgs e)
        {
            ShowInput(btnThree.Text);
        }

        private void btnFour_Click(object sender, EventArgs e)
        {
            ShowInput(btnFour.Text);
        }

        private void btnFive_Click(object sender, EventArgs e)
        {
            ShowInput(btnFive.Text);
        }

        private void btnSix_Click(object sender, EventArgs e)
        {
            ShowInput(btnSix.Text);
        }

        private void btnSeven_Click(object sender, EventArgs e)
        {
            ShowInput(btnSeven.Text);
        }

        private void btnEight_Click(object sender, EventArgs e)
        {
            ShowInput(btnEight.Text);
        }

        private void btnNine_Click(object sender, EventArgs e)
        {
            ShowInput(btnNine.Text);
        }

        private void btnZero_Click(object sender, EventArgs e)
        {
            ShowInput(btnZero.Text);
        }

        private void btnClear_Click(object sender, EventArgs e)
        {
            currentOperator = Operator.None;
            txtDisplay.Clear();
            total = 0;
        }

        private void btnPoint_Click(object sender, EventArgs e)
        {
            txtDisplay.Text = txtDisplay.Text + '.';
        }

        private void btnPlus_Click(object sender, EventArgs e)
        {
            ApplyOperator(Operator.Add);
        }

        private void btnMinus_Click(object sender, EventArgs e)
        {
            ApplyOperator(Operator.Minus);
        }

        private void btnDivide_Click(object sender, EventArgs e)
        {
            ApplyOperator(Operator.Divide);
        }

        private void btnMultiply_Click(object sender, EventArgs e)
        {
            ApplyOperator(Operator.Multiply);
        }

        private void btnEquals_Click(object sender, EventArgs e)
        {
            Evaluate();
            txtDisplay.Text = Convert.ToString(total);
        }

        private void Evaluate()
        {
            switch (currentOperator)
            {
                case Operator.Add:
                    total += currentValue;
                    break;
                case Operator.Minus:
                    total -= currentValue;
                    break;
                case Operator.Divide:
                    total /= currentValue;
                    break;
                case Operator.Multiply:
                    total *= currentValue;
                    break;
                case Operator.None:
                    break;
            }
            currentValue = 0;
            currentOperator = Operator.None;
        }

        private void ApplyOperator(Operator op)
        {
            if (currentOperator != Operator.None)
            {
                Evaluate();
            }
            else
            {
                total = double.Parse(txtDisplay.Text);
            }
            txtDisplay.Clear();
            currentOperator = op;
        }

        private void ShowInput(String n)
        {
            txtDisplay.Text = txtDisplay.Text + n;
            currentValue = double.Parse(txtDisplay.Text);
        }
    }
} 
```

我仍然建议您最终制作某种形式的运算符解析器。看看[这里](http://www.dreamincode.net/forums/topic/37428-converting-and-evaluating-infix-postfix-and-prefix-expressions-in-c/)或自己查看“Shunting Yard”算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:34:39.153

计算代码中的乘积、商和差异的逻辑`total1 = total1 + double.Parse(txtDisplay.Text);`是加法起作用的原因，但仅此而已。所以改变逻辑，让它除法、乘法或减法，而不是加法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T15:36:34.937

想想看。minus_clicked 代码所做的是将除最后一个操作数之外的所有操作数相加，然后 equals_clicked 代码对 minus_clicked 的结果和文本框的值（我假设这是最后一个操作数）进行算术运算。因此，由于您在 minus_clicked 中执行的操作是加法，因此您得到的 x - y - z 实际上是：

```
(X + Y) - Z 
```

我会考虑稍微重构一下，但如果你想保持代码原样，我可能只是将减号点击代码更改为减法而不是加法。

另外，@rhysw 是对的。如果您不希望它完全发挥作用，您还必须为其添加优先级逻辑。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T15:40:06.233

在您的代码中：

```
 private void btnMultiply_Click(object sender, EventArgs e)
        {
            total1 = total1 + double.Parse(txtDisplay.Text);
            txtDisplay.Clear();

            plusButtonClicked = false;
            minusButtonClicked = false;
            divideButtonClicked = false;
            multiplyButtonClicked = true;
        } 
```

您没有应用正确的运算符，您有 total1 = total1 + ... 将运算符更改为 *。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-29T02:11:35.490

我查看了代码，看起来您每次都在添加每个按钮。所以任何时候点击一个按钮，你都会继续添加。只需将 opps 更改为相应的按钮即可。像这样：

```
private void btnMinus_Click(object sender, EventArgs e)
{
    plusButtonClicked = false;
    minusButtonClicked = true;
    divideButtonClicked = false;
    multiplyButtonClicked = false;

    total1 = total1 - double.Parse(txtDisplay.Text);
    txtDisplay.Clear();
}

private void btnDivide_Click(object sender, EventArgs e)
{
    total1 = total1 / double.Parse(txtDisplay.Text);
    txtDisplay.Clear();

    plusButtonClicked = false;
    minusButtonClicked = false;
    divideButtonClicked = true;
    multiplyButtonClicked = false;
} 
```

# zend-framework - 将 Brownfield PHP Webapp 转换为 Zend 框架

> ID：10451651
> 
> 赞同：2
> 
> 时间：2012-05-04T15:18:51.137
> 
> 标签：zend-framework, brownfield

我们正在考虑将我们的 PHP Webapp 从不使用框架（这正在扼杀我们）转换为使用 Zend 框架。由于应用程序的大小，我认为从头开始不会成为管理的可行选择，因此我想开始研究如何使用 Zend Framework 慢慢地从当前站点结构转换为一个，但没有很多关于这个过程的信息。

到目前为止，我的计划是将当前代码库转储到 Zend 应用程序的 public/ 目录中，修复我确信这会突然出现的许多问题，然后开始一次一个地重写模块。

过去有没有人有过这样做的经验，对你来说效果如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T18:00:51.187

我现在已经做了一些。最适合我的是将 ZF 放在旧应用程序周围，因此所有请求都通过 ZF。然后我有一个“旧版”控制器插件，它检查 ZF 是否可以满足请求，如果不能满足，则将其发送到旧应用程序：

```
class Yourapp_Plugin_Legacy extends Zend_Controller_Plugin_Abstract
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        $dispatcher = Zend_Controller_Front::getInstance()->getDispatcher();
        if (!$dispatcher->isDispatchable($request)) {
            // send to the old code...
        }
    }
} 
```

究竟如何将请求发送到旧应用程序取决于它是如何实现的。在一个项目中，我检查了请求，从旧代码中确定请求将转到哪个文件，然后要求输入。听起来这可能适合您。在另一个项目中，我的解决方案是将所有这些请求路由到 ZF 项目中的 LegacyController，它运行旧代码以获取生成的 HTML，然后在新项目的 Zend_Layout 中呈现它。

这种方法的优点是，您可以在重写旧应用程序的部分内容时逐步引入 ZF 模块，直到达到 ZF 可以处理 100% 的请求的程度。此外，由于 ZF 项目在您的旧代码运行之前已初始化，因此您的旧代码可以使用 ZF 自动加载器，因此您可以开始用更 ZF 样式编写的模型替换旧代码中的类，并让两者都使用它们应用程序的一部分。

# bison - Flex/Bison - 起始条件

> ID：10451653
> 
> 赞同：0
> 
> 时间：2012-05-04T15:19:03.883
> 
> 标签：bison, flex-lexer

嗨有以下代码

```
%s expectWord

%%

<expectWord>"and"+{word}   { BEGIN( INITIAL );}
<expectWord>["and"]*       { /* Skip */;}
"and"                      { BEGIN( expectWordAfterAND ); return AND; } 
```

该代码应该检查用户是否输入了“and”，如果他们输入了，那么如果用户在此之后输入了多个 and，它们将被忽略，当最终有一个单词时，该单词将被返回。所以如果用户输入：a and and and and and and b，词法分析器应该返回：a and b。所以只有一个，将被退回。

现在，它正在返回：a b。如何修复此代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T20:16:43.040

这是实现您想要的一种方法：

```
%{
#include <iostream>
using namespace std;
#define YY_DECL extern "C" int yylex()
%}

WORD [:alnum:]+
%x SPACE
%x AND

%%

WORD ECHO;
^[ ]*and[ ] BEGIN(AND);
[ ]* { cout << " "; BEGIN(SPACE); }

<SPACE>{
and[ ] ECHO; BEGIN(AND);
.|\n ECHO; BEGIN(INITIAL);
}

<AND>{
and$
([ ]*and[ ])*
.|\n ECHO; BEGIN(INITIAL);

}

%%

main()
{
    // lex through the input:
    yylex();
} 
```

并对其进行测试，我们得到：

```
input> 'a and and b'
output> 'a and b'
input> 'a and and and b'
output> 'a and b'
input> 'a b and and c'
output> 'a b and c'
input> 'and and b c and a'
output> 'b c and a' 
```

# asp.net - Viewstate 和 TabPanel

> ID：10451656
> 
> 赞同：1
> 
> 时间：2012-05-04T15:19:06.150
> 
> 标签：asp.net, ajaxcontroltoolkit, viewstate

过去大约 6 个月，我一直在从事一个 asp.net 项目，该项目是一个加载了不同控件的 .aspx。这个页面和那些控件有它们自己的 UpdatePanel 等等。换句话说，我不得不处理一堆视图状态问题。似乎每当我认为我完全获得了视图状态及其详细信息时，我都会得到类似于我将在下面描述的内容。这可能与控制状态有关，这是我理解的“必要”视图状态，您无法关闭。或者这可能与 AJAX 有关。无论如何看看这个例子：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" EnableViewState="false" Inherits="ControlDisabledViewStateTesting._Default" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajx" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
    <script language="C#" runat="server">
        protected void Page_Load(object sender, EventArgs e)
        {
            if (treeView.SelectedNode != null)
                ContentPanel.Controls.Add(ContentPanel.TemplateControl.LoadControl("MyUserControl.ascx"));
        }
     </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>    
        <ajx:ToolkitScriptManager runat="server" />    
        <asp:TreeView ID="treeView" runat="server">
            <Nodes>
                <asp:TreeNode Text="First Node" Value="111"/>
                <asp:TreeNode Text="Second Node" Value="222"/>
            </Nodes>
        </asp:TreeView>        
        <Asp:Panel ID="ContentPanel" runat="server" />
    </div>
    </form>
</body>
</html> 
```

这是用户控件标记：

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeBehind="MyUserControl.ascx.cs" Inherits="ControlDisabledViewStateTesting.MyUserControl" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajx" %>
<ajx:TabContainer ID="tabContainer" ActiveTabIndex="0" runat="server">
    <ajx:TabPanel ID="tab" HeaderText="Tab1" runat="server"/>            
    <ajx:TabPanel ID="tab2" HeaderText="Tab2" runat="server" />            
</ajx:TabContainer> 
```

正如您所注意到的，Viewstate 在页面级别已关闭，因此任何控件都不应使用 viewstate。单击“第一个节点”。用户控件加载了两个选项卡。选择第二个选项卡。单击“第二个节点”用户控件再次加载，已选择“第二个选项卡”。

这是 viewstate/controlstate 的问题还是与 TabPanel 的 AJAX 部分有关？

如果有人能阐明这里发生的事情以及如何关闭此功能，我真的很感激。

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T05:37:47.033

活动选项卡的值未存储在视图状态中。它似乎与 ASP.NET AJAX 框架有关，并且该值是从发布数据中加载的。

要更改行为，您可以从 TabContainer 派生并覆盖 LoadClientState 方法，以便不更改 ActiveTabIndex。

您可以在 codeplex 上查看 TabContainer 的源代码：http: [//ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/1014bf767f65#Server%2fAjaxControlToolkit%2fTabs%2fTabContainer.cs](http://ajaxcontroltoolkit.codeplex.com/SourceControl/changeset/view/1014bf767f65#Server%2fAjaxControlToolkit%2fTabs%2fTabContainer.cs)

# java - 调用 SQL 查询返回旧值

> ID：10451657
> 
> 赞同：0
> 
> 时间：2012-05-04T15:19:20.203
> 
> 标签：java, sql, jsf, jakarta-ee, orm

我有一个`@ViewScoped`bean，它调用一个`@Stateless`bean，它执行一个简单的查询以从我的数据库中返回一些值。

这应该足以在我每次加载页面时进行查询，这应该导致我在每次页面加载时始终更新数据。

但这不起作用，我不知道如何解决它！

我的查询返回旧值，即使在使用 MySql Workbench 更改它之后也是如此。（在 Workbench 上进行查询会返回正确的数据！）

这是代码：

DispensaListBean.java

```
package ManagedBeans;

import ejb.DispensaManager;
import ejb.DispensaManagerLocal;
import entity.Dispensa;
import java.util.List;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

/**
 *
 * @author stefano
 */
@ManagedBean
@ViewScoped
public class DispensaListBean {
    @EJB
    private DispensaManagerLocal dispensaManager;

    /**
     * Creates a new instance of DIspensaListBean
     */
    public DispensaListBean() {
    }

    public List<Dispensa> getTopDispense(){
        List<Dispensa> l = dispensaManager.findByVoto(DispensaManager.DESC);
        for(Dispensa d : l){
            System.out.println(d.getTitolo() + " | " + d.getVoto()); //This code prints ALWAY the old getVoto() value, it takes the new one just after restarting the server
        }
        return l;
    }

    public List<Dispensa> getDispense(){
        return dispensaManager.findAll();
    }

    public Dispensa getById(int i){
        return dispensaManager.findById(i);
    }
} 
```

DispensaManager.java

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ejb;

import entity.Dispensa;
import facade.DispensaFacadeLocal;
import java.util.List;
import javax.ejb.EJB;
import javax.ejb.Stateless;

/**
 *
 * @author stefano
 */
@Stateless
public class DispensaManager implements DispensaManagerLocal {

    public static final int ASC=0, DESC=1;

    @EJB
    private DispensaFacadeLocal dispensaFacade;

    @Override
    public java.util.List<Dispensa> findByVoto(int order) {
        return (order==DispensaManager.ASC) ? dispensaFacade.findByVotoAsc() : dispensaFacade.findByVotoDesc();
    }

    @Override
    public List findAll() {
        return dispensaFacade.findAll();
    }

    @Override
    public Dispensa findById(int id) {
        return dispensaFacade.find(id);
    }                
} 
```

DispensaFacade.java

```
package facade;

import entity.Dispensa;
import entity.Post;
import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.TypedQuery;
import javax.persistence.criteria.CriteriaBuilder;
import javax.persistence.criteria.CriteriaQuery;
import javax.persistence.criteria.Root;

/**
 *
 * @author stefano
 */
@Stateless
public class DispensaFacade extends AbstractFacade<Dispensa> implements DispensaFacadeLocal {
    @PersistenceContext(unitName = "UNILIFE-ejbPU")
    private EntityManager em;

    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    public DispensaFacade() {
        super(Dispensa.class);
    }

    @Override
    public List<Dispensa> findByVotoDesc() {
        CriteriaBuilder cb = em.getCriteriaBuilder();
        CriteriaQuery<Dispensa> q = cb.createQuery(Dispensa.class);
        Root<Dispensa> c = q.from(Dispensa.class);
        q.select(c);
        q.where(cb.isNotNull(c.get("datiFile")));
        q.orderBy(cb.desc(c.get("voto")));
        TypedQuery<Dispensa> typedQuery = em.createQuery(q);
        return typedQuery.getResultList();
    }

    @Override
    public java.util.List<Dispensa> findByVotoAsc() {
        CriteriaBuilder cb = em.getCriteriaBuilder();
        CriteriaQuery<Dispensa> q = cb.createQuery(Dispensa.class);
        Root<Dispensa> c = q.from(Dispensa.class);
        q.select(c);
        q.where(cb.isNotNull(c.get("datiFile")));
        q.orderBy(cb.asc(c.get("voto")));
        TypedQuery<Dispensa> typedQuery = em.createQuery(q);
        return typedQuery.getResultList();
    }
} 
```

Dispensa.java

```
package entity;

import java.io.Serializable;
import java.util.Collection;
import java.util.Date;
import javax.persistence.*;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

/**
 *
 * @author stefano
 */
@Entity
@Table(name = "Dispensa")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Dispensa.findAll", query = "SELECT d FROM Dispensa d"),
    @NamedQuery(name = "Dispensa.findById", query = "SELECT d FROM Dispensa d WHERE d.id = :id"),
    @NamedQuery(name = "Dispensa.findByTitolo", query = "SELECT d FROM Dispensa d WHERE d.titolo = :titolo"),
    @NamedQuery(name = "Dispensa.findByDescrizione", query = "SELECT d FROM Dispensa d WHERE d.descrizione = :descrizione"),
    @NamedQuery(name = "Dispensa.findByTag", query = "SELECT d FROM Dispensa d WHERE d.tag = :tag"),
    @NamedQuery(name = "Dispensa.findByData", query = "SELECT d FROM Dispensa d WHERE d.data = :data"),
    @NamedQuery(name = "Dispensa.findByVoto", query = "SELECT d FROM Dispensa d WHERE d.voto = :voto"),
    @NamedQuery(name = "Dispensa.findByNumVoti", query = "SELECT d FROM Dispensa d WHERE d.numVoti = :numVoti"),
    @NamedQuery(name = "Dispensa.findByNumDownloads", query = "SELECT d FROM Dispensa d WHERE d.numDownloads = :numDownloads")})
public class Dispensa implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @NotNull
    @Column(name = "id")
    private Integer id;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 50)
    @Column(name = "titolo")
    private String titolo;
    @Size(max = 255)
    @Column(name = "descrizione")
    private String descrizione;
    @Size(max = 255)
    @Column(name = "tag")
    private String tag;
    @Basic(optional = true)
    @NotNull
    @Lob
    @Column(name = "datiFile")
    private byte[] datiFile;
    @Basic(optional = false)
    @NotNull
    @Column(name = "data")
    @Temporal(TemporalType.DATE)
    private Date data;
    @Basic(optional = false)
    @NotNull
    @Column(name = "voto")
    private int voto;
    @Basic(optional = false)
    @NotNull
    @Column(name = "numVoti")
    private int numVoti;
    @Basic(optional = false)
    @NotNull
    @Column(name = "numDownloads")
    private int numDownloads;
    @JoinTable(name = "Scaricati", joinColumns = {
        @JoinColumn(name = "dispensa", referencedColumnName = "id")}, inverseJoinColumns = {
        @JoinColumn(name = "utente", referencedColumnName = "username")})
    @ManyToMany(fetch = FetchType.LAZY)
    private Collection<Utente> downloaders;
    @JoinColumn(name = "materia", referencedColumnName = "id")
    @ManyToOne(optional = true)
    private Materia materia;
    @JoinColumn(name = "autore", referencedColumnName = "username")
    @ManyToOne(optional = false)
    private Utente autore;

    public Dispensa() {
    }

    public Dispensa(Integer id) {
        this.id = id;
    }

    public Dispensa(Integer id, String titolo, byte[] datiFile, Date data, int voto, int numVoti, int numDownloads) {
        this.id = id;
        this.titolo = titolo;
        this.datiFile = datiFile;
        this.data = data;
        this.voto = voto;
        this.numVoti = numVoti;
        this.numDownloads = numDownloads;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getTitolo() {
        return titolo;
    }

    public void setTitolo(String titolo) {
        this.titolo = titolo;
    }

    public String getDescrizione() {
        return descrizione;
    }

    public void setDescrizione(String descrizione) {
        this.descrizione = descrizione;
    }

    public String getTag() {
        return tag;
    }

    public void setTag(String tag) {
        this.tag = tag;
    }

    public byte[] getDatiFile() {
        return datiFile;
    }

    public void setDatiFile(byte[] datiFile) {
        this.datiFile = datiFile;
    }

    public Date getData() {
        return data;
    }

    public void setData(Date data) {
        this.data = data;
    }

    public int getVoto() {
        return voto;
    }

    public void setVoto(int voto) {
        this.voto = voto;
    }

    public int getNumVoti() {
        return numVoti;
    }

    public void setNumVoti(int numVoti) {
        this.numVoti = numVoti;
    }

    public int getNumDownloads() {
        return numDownloads;
    }

    public void setNumDownloads(int numDownloads) {
        this.numDownloads = numDownloads;
    }

    @XmlTransient
    public Collection<Utente> getDownloaders() {
        return downloaders;
    }

    public void setDownloaders(Collection<Utente> utenteCollection) {
        this.downloaders = utenteCollection;
    }

    public Materia getMateria() {
        return materia;
    }

    public void setMateria(Materia materia) {
        this.materia = materia;
    }

    public Utente getAutore() {
        return autore;
    }

    public void setAutore(Utente autore) {
        this.autore = autore;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Dispensa)) {
            return false;
        }
        Dispensa other = (Dispensa) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entity.Dispensa[ id=" + id + " ]";
    }

} 
```

现在，我在使用其他实体和方法之前也遇到过这个问题，我通过刷新实体解决了这个问题，但是如果我每次加载页面时都从数据库中获取实体，为什么要在这种情况下刷新实体呢？

简直是胡说八道！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T20:14:29.733

从代码本身看来，您自己并没有进行任何显式缓存。`@ViewScoped`，`@RequestScoped`并且`isPostback`在这里都无关紧要，相反，这些范围的目的实际上是进行缓存，而不是让支持 bean 每次都调用服务。

然而，这几乎与你的问题相反。

如果您从实体管理器获得过时的实体，则几乎总是使用 L2 缓存。您是否在persistence.xml 中配置了任何内容？您使用哪种 JPA 实现？

同样重要的是，您在哪里以及如何更新您的数据？给出的代码没有显示它。您确实提到了这一点“*即使在使用 MySql Workbench 进行更改之后*”

在使用 JPA 2 级 (L2) 缓存的情况下，JPA 将从该缓存中获取实体。如果没有应对措施，它只会跟踪通过 JPA 修改这些实体的更改。如果您自己更新基础数据，无论是直接通过 JDBC 还是通过其他一些外部系统（如 MySql Workbench），JPA 都不会知道这些更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T20:16:53.473

我的直觉是你有某种陈旧的缓存。

你读过[这篇文章](http://openejb.apache.org/jpa-concepts.html)吗？

我将首先关注您的会话 Bean。创建一个没有 JSF 页面额外复杂性的测试工具。

我期待您的无状态 bean 的默认事务行为是“明智的”，但我现在想知道是否使用

```
@TransactionAttribute(TransactionAttributeType.REQUIRED) 
```

可能会解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T20:18:04.793

这很可能是由 MySQL 的默认隔离级别 REPEATABLE READ 引起的。

这意味着在您结束（提交、回滚）“自己的”事务之前，您不会看到其他事务所做的更改（请记住：SELECT 已经启动了事务）

我假设 EJB 连接取自连接池，因此启动的事务永远不会正确结束。在从您的 Web 应用程序中运行选择之前尝试发出提交或回滚。

对于永久解决方案，您可以通过配置连接池来更改默认隔离（大多数都允许这样做），通过在连接上调用 setTransactionIsolation() 或通过更改 MySQL 中的默认隔离级别来更改事务级别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T20:43:15.303

您是否使用休眠作为您的 EntityManager？如果是这样，它可能正在使用会话缓存并存储您的对象。在这种情况下，如果您通过 SQL 或通过不同的会话更改数据，您可能需要在对象上调用“刷新”以获取更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T11:47:21.090

您是否尝试将 bean 更改为`@RequestScoped`？

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-04T16:02:09.333

您需要知道您的页面是否为回发，[http://java.sun.com/javaee/javaserverfaces/1.2/docs/api/javax/faces/render/ResponseStateManager.html](http://java.sun.com/javaee/javaserverfaces/1.2/docs/api/javax/faces/render/ResponseStateManager.html)

类似的东西

```
ResponseStateManager rsm = FacesContext.getCurrentInstance().getRenderKit().getResponseStateManager();  

if (!rsm.isPostback(FacesContext.getCurrentInstance())) {  

    //do some stuff  
} 
```

# ios - 关闭模态视图，然后执行 segue 以打开第二个模态视图

> ID：10451659
> 
> 赞同：2
> 
> 时间：2012-05-04T15:19:28.823
> 
> 标签：ios, cocoa-touch, modalviewcontroller, uistoryboard, uistoryboardsegue

我有一个允许用户登录和注册的 HomeController。如果用户单击登录，我会使用 segue 打开一个模式视图。

在模态视图中有一个按钮，上面写着注册。所需的操作是关闭登录模式视图，然后使用打开注册模式视图`performSegueWithIdentifier:`

```
- (void)loginControllerDidRegister:(LoginController *)controller sender:(id)sender
{
    NSLog(@"loginControllerDidRegister");
    [self dismissViewControllerAnimated:YES completion:nil];
    [self performSegueWithIdentifier:@"RegistrationSegue" sender:sender];
} 
```

这正确地关闭了模态视图，然后它调用`performSegueWithIdentifier:`，其中我有记录代码显示它正在被调用，就像我按下了注册按钮一样。

我认为登录模态视图消失的动画可能会干扰第二个模态视图的显示。关于可以做些什么来解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:40:43.360

那么你需要启动你的“第二模式”vc。这就是“prepareForSegue:”方法的作用。您还需要覆盖“执行：”方法。这将比您想象的要复杂一些。如果有帮助这里是segue如何工作的细分......

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender; 
```

被调用并传入“segue”。在幕后

```
- (id)initWithIdentifier:(NSString *)identifier source:(UIViewController *)source destination:(UIViewController *)source; 
```

被调用，这就是创建“segue”的地方。

“segue”对象具有以下属性

```
(NSString *)identifier
(UIViewController *)sourceViewController
(UIViewController *)destinationViewController 
```

没有这些，就无法执行 segue。这些类似于手动分配视图控制器

```
SomeViewController *secondView = [SomeViewController alloc] initwithNibName:@"SomeViewController" bundle:nil]; 
```

然后

```
[[segue destinationViewController] setModalTransitionStyle:UIModalTransitionStyle(...)]; 
```

这是...

```
secondView.modalTransitionStyle = UIModalTransitionStyle(...); 
```

(...) 将是情节提要中选择的“segue”过渡。

最后

```
[[segue sourceViewController] presentModalViewController:destinationViewController animated:YES]; 
```

这只是

```
[self presentModelViewController:secondView animated:YES]; 
```

是什么让这一切发生。您基本上将不得不与引擎盖下的那些进行调整以获得您想要的工作，但它是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T09:22:10.007

您必须将第二个模态视图控制器的 performSegue 放在 dismissViewControllerAnimated 调用的完成块中。UINavigationController 在呈现其他模态视图控制器时无法处理呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T14:34:50.597

如果有人有同样的问题。

```
- (void)loginControllerDidRegister:(LoginController *)controller sender:(id)sender
{
    NSLog(@"loginControllerDidRegister");
    [self dismissViewControllerAnimated:YES completion:^{
        [self performSegueWithIdentifier:@"RegistrationSegue" sender:sender];
    }];  
} 
```

# c++ - 推力：对另一个数组索引的数组元素求和 [Matlab 的语法 sum(x(indices))]

> ID：10451664
> 
> 赞同：2
> 
> 时间：2012-05-04T15:19:50.423
> 
> 标签：c++, cuda, thrust

我正在尝试使用 Thrust 库对由另一个数组索引的数组元素求和，但我找不到示例。也就是说，我想实现Matlab的语法

```
sum(x(indices)) 
```

这是一个指导代码，试图指出我想要实现的目标：

```
#define N 65536

// device array copied using cudaMemcpyToSymbol
__device__ int global_array[N];

// function to implement with thrust
__device__ int support(unsigned short* _memory, unsigned short* _memShort)
{
   int support = 0;

  for(int i=0; i < _memSizeShort; i++)
        support += global_array[_memory[i]];

  return support;     
} 
```

另外，从主机代码中，我可以使用**global_array[N]而不用****cudaMemcpyFromSymbol**将其复制回来吗？

每条评论/答案都值得赞赏:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-26T22:15:23.597

这是此处提供的非常晚的答案，用于从未回答的列表中删除此问题。我确信 OP 已经找到了解决方案（自 2012 年 5 月以来 :-)），但我相信以下内容可能对其他用户有用。

正如@talonmies 所指出的，这个问题可以通过融合聚集减少来解决。该解决方案确实是 Thurst`permutation_iterator`和`reduce`. `permutation_iterator`允许（隐式）根据数组中的索引对目标数组进行`x`重新排序`indices`。`reduce`执行（隐式）重新排序的数组的总和。

此应用程序是[Thrust 文档](https://github.com/thrust/thrust/blob/master/examples/permutation_iterator.cu)的一部分，为方便起见，以下报告

```
#include <thrust/iterator/permutation_iterator.h>
#include <thrust/reduce.h>
#include <thrust/device_vector.h>

// this example fuses a gather operation with a reduction for
// greater efficiency than separate gather() and reduce() calls

int main(void)
{
    // gather locations
    thrust::device_vector<int> map(4);
    map[0] = 3;
    map[1] = 1;
    map[2] = 0;
    map[3] = 5;

    // array to gather from
    thrust::device_vector<int> source(6);
    source[0] = 10;
    source[1] = 20;
    source[2] = 30;
    source[3] = 40;
    source[4] = 50;
    source[5] = 60;

    // fuse gather with reduction: 
    //   sum = source[map[0]] + source[map[1]] + ...
    int sum = thrust::reduce(thrust::make_permutation_iterator(source.begin(), map.begin()),
                             thrust::make_permutation_iterator(source.begin(), map.end()));

    // print sum
    std::cout << "sum is " << sum << std::endl;

    return 0;
} 
```

在上面的例子中，`map`扮演 的角色`indices`，而`source`扮演 的角色`x`。

关于您评论中的附加问题（迭代减少的术语数量），更改以下行就足够了

```
int sum = thrust::reduce(thrust::make_permutation_iterator(source.begin(), map.begin()),
                         thrust::make_permutation_iterator(source.begin(), map.end())); 
```

至

```
int sum = thrust::reduce(thrust::make_permutation_iterator(source.begin(), map.begin()),
                         thrust::make_permutation_iterator(source.begin(), map.begin()+N)); 
```

如果您只想迭代`N`索引数组的第一项`map`。

最后，关于`global_array`从主机使用的可能性，你应该注意到这是一个驻留在设备上的向量，所以你需要`cudaMemcpyFromSymbol`先将它移动到主机。

# symfony - Symfony2：如何使用 FOSUserBundle 构建多个注册表单

> ID：10451666
> 
> 赞同：6
> 
> 时间：2012-05-04T15:19:51.770
> 
> 标签：symfony, fosuserbundle

我对 Symfony2 完全陌生，但已经爱上了这个框架。

我有一个需要 3 种不同用户类型的项目。

一个是超级管理员，另外两个是普通用户，但配置文件布局不同。配置文件的不同布局意味着这两种用户类型的注册表必须在注册后在应用程序中具有不同的表单字段和不同的布局。

我想我已经有了注册后如何管理用户的想法（不知道以后会不会好）。但现在我不明白如何构建两个从 FOSUserBundle 扩展的不同注册表单。

据我了解，FOSUB 在设置注册的配置中只有一个点，并且不能有多个“注册：”

在 config.yml 我有：

```
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: Company\UserBundle\Entity\User
    registration:
        confirmation: { enabled: true } 
```

安全性.yml：

```
security:
    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    main:
        pattern:  ^/
        form_login:
            provider: fos_userbundle
            csrf_provider:  form.csrf_provider
        logout:       true
        anonymous:    true 
```

我的想法是创建三个不同的包来扩展 FOSUB，但文档说只有一个包可以将 FOSUB 声明为父级。

另一种选择（来自文档）是扩展实现所有原始方法的 ContainerAware。但即使在这种情况下，我也不明白我必须如何配置 app/config/{config|security|routing}.yml 以拥有例如 /register_employee、/register_manager 链接，这些链接将使用 FOSUB 和我的自定义表单？

请指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T14:37:37.707

是的，它是可行的。但这将是一个复杂的过程。您可以执行以下操作（尽管我自己没有尝试过:)）

*   创建一个类似的路由模式`/register/{type}`并相应地修改[registerAction](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Controller/RegistrationController.php#L30)。查看[此](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_controllers.md)文档以了解覆盖控制器。

*   在`registerAction`方法中创建一个空白`User`实体并从路由参数设置类型。然后调用`$form->setData()`，例如 [1]

*   [覆盖](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)[RegistrationFormType](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Form/Type/RegistrationFormType.php)以添加将侦听`FormEvents::PRE_SET_DATA`数据事件的 事件侦听器。在这里，您将根据类型动态添加表单字段。检查[此](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)食谱条目。

*   现在是验证部分。为每种用户类型创建两种类型的验证组。您可以根据提交的数据动态设置验证组。[在这里](http://symfony.com/doc/master/book/forms.html#groups-based-on-submitted-data)检查。

*   如果你想在表单保存期间做额外的操作，你可以重写[onSuccess](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Form/Handler/RegistrationFormHandler.php#L53)方法`RegistrationFormHandler`。[检查此](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)文档的底部以执行此操作。

[1] 像这样，

```
public function registerAction()
{
    $form = $this->container->get('fos_user.registration.form');
    $user = new User();
    $form->setData($user);
    //.....
} 
```

**编辑：**

第三步不行。您必须重写[process](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Form/Handler/RegistrationFormHandler.php#L35)方法`RegistrationFormHandler`才能从控制器操作中传递类型参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T07:34:30.993

FOSUserBundle 不是提供用户认证，而是管理用户。该捆绑包为您提供了更好的结构来管理应用程序的用户。如果您查看代码，您会发现用于默认注册和其他用户活动的控制器。

理想情况下，您希望编写自己的控制器并使用捆绑包来仅存储和检索用户。当您要管理多个注册/登录表单时，这尤其需要。

一旦您开始考虑 FOSUserBundle 仅用于管理用户而不是对其进行身份验证/注册，事情就会变得更加清晰。

您可能还想查看[https://github.com/sonata-project/SonataUserBundle](https://github.com/sonata-project/SonataUserBundle)，它提供了 SonataAdminBundle 和 FOSUserBundle 之间的集成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T16:38:10.640

检查此捆绑包[https://github.com/PUGX/PUGXMultiUserBundle](https://github.com/PUGX/PUGXMultiUserBundle)。它让所有员工都能与多种类型的用户一起工作，包括注册

# java - 将矢量转换为 HTML5 画布（DXF 到画布坐标）

> ID：10451673
> 
> 赞同：1
> 
> 时间：2012-05-04T15:20:12.437
> 
> 标签：java, html, canvas, raster, dxf

有没有办法获取 DXF 绘图并创建将图像绘制到画布上的 HTML5 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:50:54.303

我正在寻找同样的东西，直到现在我发现，我必须将 DXF 文件转换为 .OBJ，我需要使用 WebGL 在 HTML5 画布中显示 3D 对象。这是关于 OBJ 加载器的有用链接 (http://mrdoob.github.com/three.js/examples/webgl_loader_obj.html) 但我仍在寻找将 DXF 转换为 OBJ 的方法。

# combobox - JAWS 和虚拟 PC 光标模式：Jaws 是否应该在遇到 dijit 组合框时自动切换到表单模式？

> ID：10451675
> 
> 赞同：2
> 
> 时间：2012-05-04T15:20:19.833
> 
> 标签：combobox, dojo, accessibility, jaws-screen-reader

我问的原因是：当我在 IE9 上运行 Jaws 12 并点击此页面时：http: [//archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/_autoComplete.html](http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/tests/form/_autoComplete.html)

当我选择第一个组合框时，Jaws 不会自动切换到表单模式：美国州测试 1。它宣布它是一个编辑组合框，但我不能使用向下箭头或 alt 向下箭头浏览状态选项并选择一个状态。这是预期的行为吗？

根据此博客： http: [//www.paciellogroup.com/blog/2010/10/jaws-support-for-aria/](http://www.paciellogroup.com/blog/2010/10/jaws-support-for-aria/) Jaws 应该自动切换到表单模式以进行编辑输入，并且 alt 向下箭头应该下拉组合框，似乎都没有发生......

这是令人惊讶的，因为 dijit 小部件应该是可访问的……我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:26:23.217

作为盲人用户，欢迎来到跨浏览器可访问性怪癖的美妙世界。我想说 Jaws 在遇到 dijit 组合框时应该自动切换到表单模式。当我在 Firefox 12 或 Google chrome 18 Jaws 中选择组合框时，使用 Jaws 13 会自动进入表单模式。如果我使用箭头键导航到组合框 Jaws 不会自动进入表单模式，但这是基于您发布的博客条目的预期行为。我当前使用的计算机具有 IE 7，并且我的行为与您的相似。当我选择组合框时，没有进入表单模式。即使我选择组合框并点击输入表单模式也不会激活。我与组合框交互的唯一方法是使用箭头键导航到它，然后按 Enter。这样做会打开表单模式并允许我与之交互。

# nhibernate-mapping - 休眠映射错误

> ID：10451676
> 
> 赞同：1
> 
> 时间：2012-05-04T15:20:22.603
> 
> 标签：nhibernate-mapping

我有视图宽度列：ID、TREE_NODE_ID、ATTRIB_ID、INT_VALUE、DATE_VALUE、STRING_VALUE、

和表：ID、PARENT_ID、TREE_ID、

```
public interface ITreeNode
    {
        long Id { get; set; }
        ITreeNode Parent { get; set; }
// I want to get:
        IDictionary<IAttribute, IAllTreeNodeValues> SpecTreeNodeValues { get; set; }
    }

public interface IAllTreeNodeValues
    {
        long Id { get; set; }
        ITreeNode TreeNode { get; set; }
        IAttribute Attribute { get; set; }
        long? IntValue { get; set; }
        DateTime DateValue { get; set; }
        string StringValue { get; set; }
    }

fragment of mapping file:
    <map name="SpecTreeNodeValues" lazy="true"> 
      <key column="TREE_NODE_ID"/>
      <index-many-to-many column="ATTRIB_ID" class="Attribute"/>
      <many-to-many class="AllTreeNodeValues"/>
    </map> 
```

得到一个错误：来自表 SpecTreeNodeValues 的关联引用了一个未映射的类：GeneralData.Entity.Atribute

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:27:01.157

你在这里拼错了属性：

`<index-many-to-many column="ATTRIB_ID" class="Atribute"/>`

# python - 如何区分和修补/合并字符串而不是文件？

> ID：10451678
> 
> 赞同：7
> 
> 时间：2012-05-04T15:20:27.307
> 
> 标签：python, mysql, django, git, bash

我正在开展一个项目，人们可以提交故事并让其他人做出贡献。与其简单地编辑数据库中的条目，我更愿意存储人们所做的更改而不是整个新的更改集。然后，如果人们想恢复到以前的版本，我可以动态应用差异。我还可以轻松地向编辑用户展示仅修改过的文本，以便他们可以直接跳转到更改。

我知道如何获取差异文件并用它们修补其他文件。但是我正在使用 Python 和 Django 制作一个 Web 应用程序，并且我会将所有这些差异存储在 MySQL 数据库中。鉴于性能不是这个应用程序的主要问题，我准备从数据库中提取数据，制作文件，然后在这些文件上运行`git diff`和运行。`patch`

有没有比每次我想创建新版本或应用新差异时构建新文件并删除它们更好的方法？有没有办法在纯文本而不是文件上运行差异？例如。将 bash 中的变量设置为（什么是）文件的内容（但实际上是来自数据库的数据），并`git diff`在它们上运行？我想在用户提交表单后从 Python 文件控制这些操作。

我真的只是在寻找一个开始解决这个问题的好方法，所以任何帮助将不胜感激。

谢谢你的时间，

典范RG

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T02:39:17.483

我已经做了很多寻找解决方案的工作。[Python 的 difflib](http://docs.python.org/library/difflib.html)是相当合法的，但不幸的是，它倾向于要求 diff 字符串包含整个原始字符串以及更改的记录。这与 git diff 不同，在 git diff 中您只能看到更改的内容和一些额外的上下文。difflib 还提供了一个名为unified_diff 的函数，它确实提供了一个更短的diff，但它没有提供从一个字符串和一个diff 重建字符串的函数。例如。如果我从 text1 和 text2 中创建了一个差异，称为 diff1，那么我无法从 text1 和 diff1 中生成 text2。

因此，我制作了一个简单的 Python 模块，它允许从单个字符串及其相关差异中向前和向后重建字符串。它称为 merge_in_memory，可以在[https://github.com/danielmoniz/merge_in_memory](https://github.com/danielmoniz/merge_in_memory)找到。只需拉动存储库并运行 setup.py。

一个简单的用法示例：

```
import merge_in_memory as mim_module

str1 = """line 1
line 2"""
str2 = """line 1
line 2 changed"""

merger = mim_module.Merger()
print merger.diff_make(str1, str2) 
```

这将输出：

```
--- 
+++ 
@@ -1,2 +1,2 @@
 line 1
-line 2
+line 2 changed 
```

diffs 只是字符串（而不是 tan 生成器，因为它们在使用 difflib 时）。您可以使用该函数创建多个 diffs 并一次应用它们（即快进历史或回溯）`diff_apply_bulk()`。

要反转到历史记录，只需确保在调用或`reverse`时将属性设置为 True 。例如：`diff_bulk()``diff_apply_bulk`

```
merge = self.inline_merge.diff_apply_bulk(text3, [diff1, diff2], reverse=True) 
```

如果您从 text1 开始并使用 diff1 和 diff2 生成 text2 和 text3，则使用上面的代码行重建 text1。请注意，差异列表仍按升序排列。“合并”，即。将差异应用于字符串本身就是一个字符串。

所有这些都允许我将差异存储在数据库中作为简单的 VARCHAR（或你有什么）。只要我有一个起点，我就可以将它们按顺序拉出并在任一方向应用以生成我想要的文本。

请随时对此发表评论，因为这是我的第一个 Python 模块。

谢谢，

典范RG

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:41:06.363

看看[libgit](http://libgit2.github.com/)。它是一个 C（和所有其他语言）接口，可让您以各种方式操作 git 存储库。

它看起来相当低级，所以让它实际提交、diff 等可能很乏味，但它至少有一个功能可以[将 blob 添加到 repo 而不需要放在 disk 上](http://libgit2.github.com/libgit2/#HEAD/group/blob/git_blob_create_frombuffer)。

`os.system`当然，另一种选择是创建一个普通的基于文件的存储库和工作副本，并使用调用在数据库和文件系统之间来回反弹。

# ios - IOS5 iPad弹出控制器委托不向父控制器发送消息

> ID：10451679
> 
> 赞同：4
> 
> 时间：2012-05-04T15:20:28.210
> 
> 标签：ios, ipad, ios5

我是 iOS 编程的新手，我无法让这个简单的概念起作用——我只希望弹出控制器能够调用方法并在父控制器上发送数据。谁能发现我在这里做错了什么？

在 DetailViewController.h

```
#import <UIKit/UIKit.h>
#import "Employee.h"
#import "CompleteViewController.h"

@class EmployeesTVC;

@interface DetailViewController : UIViewController <UISplitViewControllerDelegate, UIPopoverControllerDelegate>

@property (strong) UIPopoverController *popController;

-(IBAction)completeButtonPressed:(id)sender;
@end 
```

在 DetailViewController.m 中（取出不相关的部分）

```
@implementation DetailViewController {
    __weak UIPopoverController *completePopover;
}

// ...

#pragma mark - Complete / Score popover methods

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSLog(@"preparing for segue");
    UIStoryboardPopoverSegue *popoverSegue = (UIStoryboardPopoverSegue *)segue;
    UIPopoverController *scorePopoverController = [popoverSegue popoverController];
    [scorePopoverController setDelegate:self];
    self.popController = scorePopoverController;
}

- (IBAction)completeButtonPressed:(id)sender {
    if (completePopover) {
        [completePopover dismissPopoverAnimated:YES];
    } else {
        [self performSegueWithIdentifier:@"showScorePopover" sender:sender];    
    }
}

- (void) scoreAssigned:(NSString *)score {
    NSLog(score);
    NSLog(@"Score Assigned");
}

// ...

@end 
```

CompleteViewController.h（弹出视图控制器）

```
#import <UIKit/UIKit.h>

@protocol CompleteViewDelegate <NSObject>
- (void)scoreAssigned:(NSString *)score;
@end

@interface CompleteViewController : UIViewController

@property (nonatomic, assign) id<CompleteViewDelegate> delegate;

- (IBAction)okButtonPressed:(id)sender;

@end 
```

CompleteViewController.m

```
#import "CompleteViewController.h"

@implementation CompleteViewController
@synthesize delegate;

- (IBAction)okButtonPressed:(id)sender {
    NSLog(@"OK Button Pressed");
    [delegate scoreAssigned:@"100"];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:29:43.007

你的第一个 NSLog 语句触发了吗？“按下确定按钮”。如果没有，请确保 (IBAction)okButtonPressed 已在 Interface Builder 中连接。如果是这样，但是在 [delegate scoreAssigned:@"100"] 上有一个断点；并用鼠标将鼠标悬停在“代表”上以查看它是否为零，只是为了查看代表是否已成功分配。如果这不能解决问题，请在事情停止工作之前让我们确切知道您要去哪里。

正确呈现 UIPopoverController

```
[completePopover setDelegate:self];
[completePopover presentPopoverFromBarButtonItem:yourButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
//or if you don't have a bar button item
[completePopover presentPopoverFromRect:CGRectMake(0.0, 0.0, 0.0, 0.0) inView:yourTargetView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

请记住，inView 可以是 UIView 的任何子类，例如 UIButton。

# sql-server - 将 char 列转换为 nvarchar，以便更改表中已有数据的代码页（语言编码）？

> ID：10451684
> 
> 赞同：1
> 
> 时间：2012-05-04T15:20:42.483
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005

我有一个从另一个源导入的表作为具有 char 数据类型的列，但该字段具有国际字符。我想在我的表中使用 nvarcvhar。我怎样才能做到这一点？

我已经尝试更新列（使用 alter table 语句或“cast as”），但存储的信息没有得到转换。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:23:29.893

像这样

```
ALTER TABLE TableName ALTER COLUMN ColumnName NVARCHAR(size) 
```

例子

```
CREATE TABLE test (bla VARCHAR(50))
GO
ALTER TABLE test ALTER COLUMN bla NVARCHAR(50) 
```

确保在进行插入时在字符串前面加上 N

```
INSERT test VALUES (N'漢語')

SELECT * FROM test 
```

输出

```
bla
--------------------------------------------------
漢語

(1 row(s) affected) 
```

无论您做什么，都不要使用 SSMS 设计器/向导，它会重新创建整个表，例如，请参见此处[更改列数据类型时使用 ALTER TABLE TableName ALTER Column 语法，不要删除并重新创建列](http://blogs.lessthandot.com/index.php/DataMgmt/DBProgramming/MSSQLServer/when-changing-column-data-types)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:23:42.103

```
alter table your_table alter column your_column nvarchar(length) 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!3/efb3c/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T22:13:08.507

您的数据目前在 EUC-CN 中，伪装成 CP1252。它没有丢失。

您有[几种方法](http://www.w3.org/International/articles/unicode-migration/#sql)可用于转换为 Unicode（请参阅转换 SQL 数据库部分以了解概述）。对于 SQL Server，您可以[创建扩展存储过程](http://www.codeguru.com/cpp/data/data-misc/values/article.php/c4571/Converting-from-Code-Page-to-Unicode.htm)以将 EUC-CN 转换为 Unicode。这将起作用，但并不容易（在这种情况下，您的数据使用代码页 51936）。

运气好的话，根据您的数据中出现的特定字符以及您安装的语言包，您可能能够像从代码页 936 一样进行转换，如下所示：

```
ALTER DATABASE mydatabasename COLLATE Chinese_PRC 
```

如果成功，请对要转换的每一列执行相同的操作：

```
ALTER TABLE mytablename ALTER COLUMN mycolumnname
        varchar(4000) COLLATE Chinese_PRC NOT NULL 
```

然后才将它们转换为 NVARCHAR。

# javascript - 使用 jquery.cookie 设置 cookie，然后测试它的存在是否确认浏览器接受 cookie？

> ID：10451692
> 
> 赞同：1
> 
> 时间：2012-05-04T15:21:14.077
> 
> 标签：javascript, jquery, cookies, cross-browser

我对检查浏览器是否接受 cookie 的最佳实践感到困惑。

假设您正在使用`JQuery`，特别是，`jquery.cookie`以下内容是否适用于所有（现代）浏览器？特别是我想知道像 IE 6 这样的浏览器。

```
$.cookie('test_name', '1');
if( $.cookie('test_name') == null ) { 
    console.log('cookies not accepted by browser');
else {
    console.log('good to go.');
    $.cookie('test_name', null);
} 
```

从关于 SO 的其他问题看来，人们建议您必须设置 cookie，然后在下一个请求时在服务器端检查它，这与上述方法不同。那么，以上内容是否适用于所有（现代）浏览器？

# android - 为什么 GestureOverlayView 这么慢？

> ID：10451694
> 
> 赞同：4
> 
> 时间：2012-05-04T15:21:22.730
> 
> 标签：android, gestures, gesturedetector

我用不同的方法检测了 2 个视图上的滑动手势：第一个是通过 GestureDetector，第二个是 GestureOverlayView（我需要这个，因为第二个视图是 GridView 并且 GestureDetector 不能正常工作）。

第一个几乎是即时的，但第二个延迟大约 1 秒（Nexus S，ICS）。为什么，我该如何解决？

我无法更改方法，因为稍后我需要识别更复杂的手势，但我希望它能够立即工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T09:48:42.223

我找到了解决方案：

```
android:fadeOffset="0"
android:fadeDuration="0" 
```

它立即起作用:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:40:00.887

由于其本质，GestureOverlayView 在开始识别形状之前依赖于时间。这不是性能问题。

**编辑**

抱歉，但我认为无法更改 GestureOverlayView 的反应时间 :(

**编辑结束**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-28T11:11:36.207

如果您没有在 xml 中设置 GestureOverlayView 但直接在代码中，您可以使用以下与 RankoR 解决方案相同的方法：

```
mGestureOverlayView.setFadeEnabled(false);
mGestureOverlayView.setFadeOffset(0); 
```

然后在 onGestureEnded 之后立即调用 onGesturePerformed 方法（在我的情况下为 8 毫秒）

# asp.net - 在 .NET 2.0 应用程序池中运行 ASP.NET 4 应用程序

> ID：10451696
> 
> 赞同：0
> 
> 时间：2012-05-04T15:21:33.820
> 
> 标签：asp.net, iis

我最近将一个 .NET 2.0 应用程序升级到 .NET 4 并且一切正常。

当我设置 IIS 时，我在 IIS 6 的 ASP.NET 选项卡下选择了 .NET 2.0。

该应用程序运行良好，但我收到这些间歇性 ViewState 错误。

IIS 设置是否会导致 ViewState 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:31:42.477

可能是因为 .Net 4 中的视图状态使用了与之前不同的算法

> ASP.NET 使用加密和散列算法来帮助保护表单身份验证 cookie 和视图状态等数据的安全。默认情况下，ASP.NET 4 现在使用 HMACSHA256 算法对 cookie 和视图状态进行哈希运算。早期版本的 ASP.NET 使用较旧的 HMACSHA1 算法。

[ASP.NET 4 重大更改](http://www.asp.net/whitepapers/aspnet4/breaking-changes)

您需要在 IIS 中注册 .Net Framework 4.0，然后在 .Net 4.0 的应用程序池下运行您的站点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:26:18.217

您需要注册 4.0 框架，此链接将为您提供帮助：http: [//msdn.microsoft.com/en-us/library/k6h9cz8h.aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx)

# symfony - 转储资产时，使用 MopaBootstrapBundle，出现运行时异常：文件名、目录名或卷标语法不正确

> ID：10451697
> 
> 赞同：2
> 
> 时间：2012-05-04T15:21:35.083
> 
> 标签：symfony, twitter-bootstrap, less

下面是完整的输出：

```
> php.exe C:\xampp\htdocs\bootstrap\app\console assetic:dump
Dumping all dev assets.
Debug mode is on.

[file+] C:\xampp\htdocs\bootstrap\app/../web/css/992f634.css
'stty' is not recognized as an internal or external command,
operable program or batch file.

  [RuntimeException]                                                  
  The filename, directory name, or volume label syntax is incorrect.  

assetic:dump [--watch] [--force] [--period="..."] [write_to]

Process finished with exit code 1 at 23:12:02.
Execution time: 1,118 ms. 
```

我正在安装 MopaBootstrapBundle。我可以在没有样式的情况下访问该站点。可能出了什么问题？下面是我的 config.yml

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        less:
            node: C:\nodejs
            node_paths: [C:\nodejs\node_modules]
        cssembed:
            jar: %kernel.root_dir%/Resources/java/cssembed-0.4.5.jar
        yui_css:
            jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar
        yui_js:
            jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar 
```

请帮帮我，我不知道还能做什么。=(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:11:22.133

我无法使用我的 Symfony2 安装来[减少](http://lesscss.org/)工作，所以我使用[了 lessphp](http://leafo.net/lessphp/)。这里是如何使用 MopaBootstrapBundle 配置[lessphp](https://github.com/phiamo/MopaBootstrapBundle)并有效地消除我的问题。顺便说一句，这个解决方案也类似于如何使用 Windows 机器运行[MopaBootstrapBundle 。](https://github.com/phiamo/MopaBootstrapBundle)

```
//add this to your deps file, then install
[lessphp]
    git = "https://github.com/leafo/lessphp.git"
    target = "/lessphp"

//add this to your autoload.php
$loader->registerPrefixes(array(
    //some codes here
    'lessc'            => __DIR__.'/../vendor/lessphp',
)); 
```

* * *

```
//add this to config.yml
assetic:
    filters:
        less: ~
        lessphp:
            apply_to: "\.less$"
            file:   %kernel.root_dir%/../vendor/lessphp/lessc.inc.php 
```

* * *

```
//override the layout.html.twig, either only to your bundle or from the app/Resources
{% extends 'MopaBootstrapBundle::layout.html.twig' %}
{% block head_style %}
    {% stylesheets
        '@MopaBootstrapBundle/Resources/public/less/mopabootstrapbundle.less'
    %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
    {% endstylesheets %}
{% endblock head_style %} 
```

希望这可以帮助。=)

# jquery - HTML 中的切换按钮

> ID：10451702
> 
> 赞同：0
> 
> 时间：2012-05-04T15:21:46.243
> 
> 标签：jquery, html, css

我想在我的网站上使用切换按钮，但它不起作用（tuggle）

HTML：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css" media="screen">
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
  function initialize() {
    var latlng = new google.maps.LatLng(47.583937, 13.963623);
    var myOptions = {
      zoom: 7,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);

  }

</script>
<script type="text/javascript">
$(function(){
    $('.slider-button').toggle(function(){
        $(this).addClass('on').html('Quizz');
    },function(){
        $(this).removeClass('on').html('Read');
    });
});

</script>
</script>

</head>

<body onload="initialize()">
<header id="site_head">
        <div class="header_cont">
        <h1><a href="#">mr. hurley</a></h1>
        </div>
</header>

<div id="menu" style="float: left; width:20%; height:100%;">
    <ul>
        <li class="first"><a href="#">Search</a>

        <div class="slider-frame">
            <span class="slider-button">OFF</span>
        </div>
        </br>
        <p> Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p></li>
        <li class="active"><a href="#">Offer</a><p> Placeholder</p></li>
    </ul>
</div>

 <div id="map_canvas" style="float: left; width:80%; height:100%"></div>

   <div id="over_map">
    <p>TEst dsfkjsldökjfdslkäfjsdfsdfsdfsdfs</p>
   </div>
</body>

</html> 
```

CSS：

```
body, div, h1, h2, h3, p, ul, ol, li, img, header, section, aside, footer, button {
    margin: 0; padding: 0; border: 0; list-style: none;
}

a {
    text-decoration: none;
    color: #961b25;
}

a:hover {
    color: #6f92a7;
}

:focus {
    outline: 0;
}

h1, h2, h3 {
    font-family: Georgia, Palatino, Palatino Linotype, Times, Times New Roman, serif; 
    font-weight: normal;
} 

h2 {
    font-size: 22px;
    line-height: 28px;
}

.float {
        float:left;
    }

body {
    background: #f6f6ee url(images/bck.jpg);
    font-family : "Trebuchet MS", "Helvetica Neue", Helvetica, Arial, sans-serif; 
    font-size: 12px;
    overflow:hidden;
    }   

header#site_head {
    background: url(bck_head.jpg);
    -moz-box-shadow: inset 0px -2px 3px #480508;
    -khtml-box-shadow: inset 0px -2px 3px #480508;              
    -webkit-box-shadow: inset 0px -2px 3px #480508;
    box-shadow: inset 0px -2px 3px #480508;
    border-bottom: 1px solid #fffffb;
    height: 70px;
    width: 100%;
    display: block;
}

    .header_cont {
        width: 960px;
        margin: 0 auto;
        padding-top: 15px;
    }

    .header_cont h1 {
        text-indent:-9999px;
        float: left;
    }

    .header_cont h1 a {
        background: url(logo.png) no-repeat;
        width: 143px;
        height: 45px;
        display: block;
    }

    .header_cont h1 a:hover {
        background-position: 0px -45px;
    }

    nav.head_nav {
        float: right;
        margin-top: 13px;
    }

    nav.head_nav ul li {
        display: inline;
        margin: 0px 5px;
    }

    nav.head_nav ul li a {
        color: #f6f6ee;
        font-size: 12px;
        font-weight: normal;
        text-transform: lowercase;
        padding: 5px 8px;
    }

    nav.head_nav ul li.home a {
        background: #4f1d1e;
        -moz-border-radius: 10px;       
        -khtml-border-radius: 10px;             
        -webkit-border-radius: 10px;
        border-radius: 10px;
    }

    nav.head_nav ul li a:hover {
        text-shadow: 1px 1px 1px #2c0306;
        background: #4f1d1e;
        -moz-border-radius: 10px;
        -khtml-border-radius: 10px;
        -webkit-border-radius: 10px;
        border-radius: 10px;
        -moz-box-shadow: inset 0px 0px 2px #2c0306;
        -khtml-box-shadow: inset 0px 0px 2px #2c0306;
        -webkit-box-shadow: -1px -1px 2px #2c0306; /*-webkit- inset fix*/
        box-shadow: inset 0px 0px 2px #2c0306;
        color: #f6f6ee;
    }

    nav.head_nav ul li.rss, nav.head_nav ul li.twitter  {
        position: relative;
        left: -355px;
        margin: 0;
    }

    nav.head_nav ul li.rss a {
        color: #b4676c;
        border-right: 1px solid #903f43;
        margin: 0;
        padding-left: 20px;
        background: url(images/rss.png) left no-repeat;
        font-size:10px;
    }

    nav.head_nav ul li.twitter a {
        color: #b4676c;
        margin-left: 3px;
        padding-left: 20px;
        background: url(images/twitter.png) left no-repeat;
        font-size:10px;
    }

    nav.head_nav ul li.rss a:hover, nav.head_nav ul li.twitter a:hover  {
        color: #f6f6ee;         
        -moz-border-radius: 0;
        -khtml-border-radius: 0;
        -webkit-border-radius: 0;
        border-radius: 0;
        -moz-box-shadow: none;
        -khtml-box-shadow: none;
        -webkit-box-shadow: none;
        box-shadow: none;
    }
#map_canvas { height: 80% width:80%}

#menu {
        clear:left;
        float:left;
        width:20%;
        background:#B7B7B7;
        font-family:Trebuchet MS, Helvetica, sans-serif;
        border-bottom:1px solid #A8A8A8;
        overflow:scroll;

    }

    #over_map { position: absolute; top: 100px; right: 50px; z-index: 99; width: 20%; height:30%;  background-color/**/: #000000;
    background-image/**/: none;
    opacity: 0.8;

    filter: alpha(opacity=50);
    color: #ffffff;
    font-size: 15px;
    padding-left: 10px;
    padding-right: 10px;
    padding-top: 10px;
    word-wrap: break-word;
    }

.slider-frame {
  position: relative;
  display: block;
  margin: 0 auto;
  width: 84px;
  height: 27px;
  background-color: rgb(246, 249, 251);
  -moz-border-radius: 4px;
  border-radius: 4px;
  -webkit-box-shadow: inset 0px 0px 4px 0 rgba(0, 0, 0, 0.25);
  -moz-box-shadow: inset 0px 0px 4px 0 rgba(0, 0, 0, 0.25);
  box-shadow: inset 0px 0px 4px 0 rgba(0, 0, 0, 0.25);
}
.slider-button {
  display: block;
  width: 43px;
  height: 27px;
  line-height: 27px;
  background: #EDF2F7;
  -moz-border-radius: 4px;
  border-radius: 4px;
  -webkit-transition: all 0.25s ease-in-out;
  -moz-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  color: #000;
  font-family:sans-serif;
  font-size:11px;
  font-weight:bold;
  text-align: center;
  cursor: pointer;
  -webkit-box-shadow: inset 0px 0px 4px 0 rgba(0, 0, 0, 0.25);
  -moz-box-shadow: inset 0px 0px 4px 0 rgba(0, 0, 0, 0.25);
  box-shadow: inset 0px 0px 4px 0 rgba(0, 0, 0, 0.25);
}
.slider-button.on {
  margin-left: 40px;
  background: #EDF2F7;
} 
```

我以此为例：

[http://jsfiddle.net/vY7SQ/3/](http://jsfiddle.net/vY7SQ/3/)

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:27:03.940

如果没有调用 jQuery 脚本，请尝试 从函数中删除`onload="initialize()"`and 调用。`initialize()``$()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:29:10.790

尝试更改`<span class="slider-button">`为`<span id="slider-button">`然后调用`$('#slider-button').toggle(function(){`而不是`$('.slider-button').toggle(function(){` Jquery addClass 方法不会替换类，它只是添加它。

不要忘记也更改您的 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:25:07.207

我认为你需要像这样分离 jQuery：

```
$(function(){
    $('.slider-button').toggle(function(){
        $(this).addClass('on');
        $(this).html('Quizz');
    },function(){
        $(this).removeClass('on');
        $(this).html('Read');
    }); }); 
```

更新了[jsfiddle](http://jsfiddle.net/vY7SQ/42/)

编辑：好吧，有人告诉我我错了，但 scubafly 似乎同意我最初的建议。

我会这样说：附加切换功能`.slider-frame`并将更改应用到`.slider-button` 更用户友好的方式。

# actionscript-3 - as3 调用另一个类中的函数

> ID：10451708
> 
> 赞同：-2
> 
> 时间：2012-05-04T15:22:21.947
> 
> 标签：actionscript-3, flash, class, function, packages

> **可能重复：**
> [as3 Main-Timline 从 Child.swf 加载的类调用函数](https://stackoverflow.com/questions/10442115/as3-main-timline-calling-a-function-from-a-class-loaded-from-child-swf)

我已经问过这个问题，但我没有得到任何回应，所以我正在减少它以使其不那么可怕。我只需要一行代码。

**我用什么代码来调用另一个 CLASS 包中的函数？**我的代码是从主时间线调用的，并且该类是从主时间线加载的子类加载的。

这是接近但不起作用的代码：

```
 Content = TheContent.content as MovieClip;
    pContent = Content as Object;
    addChild(TheContent);

    var OSS:String = "device";
    trace(pContent); ////makes contact with classs but comes out as: [object pContent]
    pContent.GetOnlineStatus(OSS); ///// HOW DO I GET THIS TO CALL FUNCTION 
```

TypeError：错误 #1006：GetOnlineStatus 不是函数。

这是我的旧帖子，其中包含更多详细信息：[as3 Main-Timline call a function from a class loaded from Child.swf](https://stackoverflow.com/questions/10442115/as3-main-timline-calling-a-function-from-a-class-loaded-from-child-swf)

# kiln - FogCreek Kiln 在第一次尝试时总是给出错误“您的会话已过期”

> ID：10451714
> 
> 赞同：1
> 
> 时间：2012-05-04T15:23:01.870
> 
> 标签：kiln

每次我在 Kiln 做代码审查，第一次去添加评论，批准/拒绝审查，或者关闭审查时，它都会弹出一个对话框说，

> **您的会话已过期**
> 
> 您不再登录。请登录并再次尝试您的请求。

“登录”一词带有超链接，因此我单击它并再次输入我的评论。有一半的时间，我忘记重新标记代码。这是我使用 Kiln 的最大错误。

有没有办法让这种情况停止发生？

我们使用的是 Kiln 的 2.7.29 版本。

这个问题在 kiln.stackexchange.com 上是已知的，但我的帐户在那里受到限制。[这是问题](http://kiln.stackexchange.com/questions/3987/your-session-has-expired-whenever-opening-a-new-browser-instance)。

FogCreek 的人可以提供状态更新吗？这是一个我们可以随意重复的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:08:29.837

我认为你可以通过升级来摆脱这个问题

检查[这个链接](http://status.fogcreek.com/2012/06/kiln-on-demand-upgrade-june-26th-0200-utc-june-25th-2200-edt.html)

> 我们将于 6 月 24 日星期日 02:00 UTC 将帐户升级到 Kiln 2.9
> ...
> 
> *   无数错误修复和稳定性改进，例如：
>     *   修复虚假的“您的会话已过期”错误。

# mysql - java和mysql加载数据infile的误区

> ID：10451715
> 
> 赞同：0
> 
> 时间：2012-05-04T15:23:04.477
> 
> 标签：mysql

感谢您查看此内容。对于我正在使用 MySql 进行的这个项目，我需要一些帮助。

对于项目的一部分，我需要将一些东西加载到我已经启动并运行的 MySql 数据库中。

对于表中的每一列，我需要的信息`Documentation`存储在我硬盘上的文本文件中。

例如，文档表中的一列是“端口”，所以我的计算机上有一个 ports.txt 文件，其中包含一堆端口号等等。

我试图通过 phpMyAdmin 运行这个 mysql 脚本

```
LOAD DATA INFILE 'C:\\ports.txt" INTO TABLE `Documentation`(`ports`). 
```

它运行成功，所以我去做了我需要的其他加载数据

```
LOAD DATA INFILE 'C:\\vlan.txt' INTO TABLE `Documentation` (`vlans`) 
```

这也成功完成，但它在端口列的最后一个条目之后将所有行添加到 vlan 列。

为什么会这样？我能做些什么来解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:38:45.293

> 为什么会这样？

`LOAD DATA`向指定表中插入新行；它不会更新现有行。

> 我能做些什么来解决这个问题吗？

重要的是要了解 MySQL 不保证表将按任何特定顺序保存。因此，在您的第一个之后`LOAD`，插入数据的顺序可能会丢失和忘记 - 因此，通常会在导入*之前*关联此类数据（例如，作为单个 CSV 文件中相同记录的列）。

您*可以将* 您的数据放入每个都有一列`LOAD`的临时表中，并*希望*这些自动递增的标识符在两个表之间保持对齐（MySQL 绝对不保证这一点，但在您的情况下，您应该发现每条记录从 1 开始按顺序编号); 在那里，您可以执行以下查询：`AUTO_INCREMENT`

 *```
INSERT INTO Documentation SELECT port, vlan FROM t_Ports JOIN t_Vlan USING (id); 
```*

# unit-testing - Grails 控制器单元测试 MethodSelectionException

> ID：10451717
> 
> 赞同：1
> 
> 时间：2012-05-04T15:23:19.953
> 
> 标签：unit-testing, grails

我有一个单元测试类抛出这个奇怪的异常......我不知道这意味着什么......有人可以帮助我吗？

这是课程：

```
@TestFor(ApplicationController)
@TestMixin(MvcUnitTestCase)
class ApplicationControllerTests{

def init(){
    super.init(ApplicationController)
}

void testCheckOk() {
   def service = mockFor(ApplicationService)
   def myModel = new MyModel();
   service.demand.getModel {
       return myModel 
   }
   controller.service = service.createMock()
   def model = controller.index()

   assertEquals myModel, model.myModel
   assertEquals HttpServletResponse.SC_OK, response.status
} 
```

这是一个例外：

```
org.codehaus.groovy.runtime.metaclass.MethodSelectionException: Could not find which method <init>() to invoke from this list:
public grails.test.MvcUnitTestCase#<init>(java.lang.String)
public grails.test.MvcUnitTestCase#<init>(java.lang.Class) 
```

# ruby-on-rails - 在rails中渲染json的最快方法是什么

> ID：10451722
> 
> 赞同：46
> 
> 时间：2012-05-04T15:23:31.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我正在优化我们的 Rails 应用程序中的一些慢事务，并且我发现渲染 JSON 视图花费了大量时间：

```
Rendered welcome/index.json.rabl (490.5ms)
Completed 200 OK in 1174ms (Views: 479.6ms | ActiveRecord: 27.8ms) 
```

假设 API 调用准确地返回了它需要返回的数据，**那么在 rails 中呈现 JSON 的最快方法是什么？**

我们使用[Rabl](https://github.com/nesquena/rabl)是因为能够轻松共享代码，但我们并不依赖它。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-09T04:01:15.367

目前[oj](https://github.com/ohler55/oj)似乎是最快的渲染器——击败 yajl（根据 oj 作者的[比较](https://github.com/ohler55/oj#comparisons)）。

在最新的 multi_json 中默认使用 oj（并且 rails 默认使用 mutli_json），因此切换到 oj 应该像在 Gemfile 中添加以下内容一样简单：

```
 # Gemfile
  gem "oj" 
```

然后每次调用render，它现在都会使用oj。

```
 render :json => { ... } # uses multi_json which uses oj 
```

如果您想要更高的性能，Oj 还提供了额外的特定接口，但坚持使用 multi_json 可以更轻松地在将来更换 gem。

请注意，如果您有任何调用 - 除非您调用初始化程序，`{ ... }.to_json`否则这些不会升级为使用 oj 。`Oj.mimic_JSON`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-07T07:37:05.250

Rails 3 使用 multi_json，但它只用于**json 解码，而不是编码**。Json 编码/渲染/生成使用 ActiveSupport JSON 库的`to_json`方法，因此总是很慢（即使您使用 Oj gem）。

您可以通过执行以下操作显式使用 multi_json 进行渲染：

```
render :json => MultiJson.dump(@posts) 
```

或者您可以尝试[rails-patch-json-encode gem](https://github.com/GoodLife/rails-patch-json-encode)（由我），默认情况下将使用 multi_json。它将影响所有内置`to_json`方法，因此请确保所有测试都通过。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-04T15:36:37.500

Rabl`multi_json`用于跨平台兼容，默认情况下不使用相当快的 Yajl 库。Rabl 的[配置文档](https://github.com/nesquena/rabl#configuration)解释了解决方案：

```
# Gemfile
gem 'yajl-ruby', :require => "yajl" 
```

如果仍然不够高效，您可能需要探索不同的 JSON 序列化程序，例如[oj](https://github.com/ohler55/oj)。您[还可以检测](http://api.rubyonrails.org/classes/ActiveSupport/Notifications.html)您的渲染并查看瓶颈所在的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-12T18:17:40.640

Netflix 最近发布了一个新的 JSON 渲染库，据说比默认库快 25-40 倍。[公告](https://medium.com/netflix-techblog/fast-json-api-serialization-with-ruby-on-rails-7c06578ad17f)。[代码](https://github.com/Netflix/fast_jsonapi)。您需要创建一个新的序列化程序来利用它，但对于受影响的人来说，这似乎不是一个大障碍。

# python - Python - 子进程模块 - Ghostscript- 2>&1

> ID：10451723
> 
> 赞同：0
> 
> 时间：2012-05-04T15:23:33.633
> 
> 标签：python, stdout, ghostscript, stderr

我在使用 shell Ghostscript 命令时遇到字符串重定向和 python 问题。

有 NP 执行此操作：

```
subprocess.call(["gs", "-q","-dBATCH", "-dNOPAUSE","-sDEVICE=bbox", "input.pdf"]) 
```

但添加 2>&1 时出现错误：

```
subprocess.call(["gs", "-q","-dBATCH", "-dNOPAUSE","-sDEVICE=bbox", "input.pdf","2>&1"]) 
```

或者：

```
subprocess.call(["gs", "-q","-dBATCH", "-dNOPAUSE","-sDEVICE=bbox", "input.pdf","2>&1",">/dev/null"]) 
```

我想使用 2>&1 来应用“grep”。

错误示例：

> 错误：/undefinedfilename in (2>&1) 操作数堆栈：
> 
> 执行堆栈：%interp_exit .runexec2 --nostringval--
> --nostringval-- --nostringval-- 2 %stopped_push --nostringval-- --nostringval-- --nostringval-- false 1 %stopped_push 字典堆栈：--dict :1156/1684(ro)(G)--
> --dict:1/20(G)-- --dict:77/200(L)-- 当前分配模式是本地 最后的操作系统错误：2 GPL Ghostscript 9.05：不可恢复的错误，退出代码 1 1

仍然没有解决如何执行如下命令：

```
subprocess.call("gs -q -dBATCH -dNOPAUSE -sDEVICE=bbox input.pdf 2>&1
| egrep -v HiResBoundingBox | egrep -o "[0-9]{1,}",shell=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:38:39.700

这是因为您将参数作为列表传递。当您将参数作为可迭代对象传递时，每个部分都将传递给生成的进程（在这种情况下，`gs`抱怨它不知道如何处理`2>&1`......）如果您键入以下内容，您可能会收到相同的消息：

```
gs -q -dBATCH -dNOPAUSE -sDEVICE=bbox input.pdf '2>&1' 
```

在一个壳里。

```
subprocess.call("gs -q -dBATCH -dNOPAUSE -sDEVICE=bbox input.pdf 2>&1",shell=True) 
```

会做你想做的——或者“更好”……

```
import sys
subprocess.call(["gs", "-q", "-dBATCH", "-dNOPAUSE", "-sDEVICE=bbox", "input.pdf"],stderr=sys.stdout) 
```

（更好，因为它回避了安全问题`shell=True`）

# c# - 如何快速从在线 .txt 文件中获取文本？（C＃）

> ID：10451724
> 
> 赞同：-1
> 
> 时间：2012-05-04T15:23:38.873
> 
> 标签：c#, text, updates

我正在尝试制作一个非常简单的更新程序应用程序，它读取当前 version.txt 文件内容并检查它是否相同或更大（在这种情况下更新开始）。

[这篇文章](https://stackoverflow.com/questions/4169982/http-get-request-and-xml-answer)帮助我制作了一个可以工作的应用程序，但它导致我的主应用程序出现了重大停顿。它可以更快地工作还是有更简单的方法从在线 .txt 文件加载文本？

UPD：由于某种原因，大约 15 秒的延迟仅在第一次运行时发生，所有后续`DownloadString`的工作都尽可能快地运行，直到应用程序关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:26:23.787

您将无法神奇地加快下载速度。相反，我建议您在单独的线程上执行下载，以便用户无需等待即可使用您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:35:31.097

这可以帮助您使您的应用程序更快：

*   如果您使用的是 winforms，请尝试使用控制台应用程序（在这种情况下它会非常快地完成操作）。
*   如果您想使用 winforms，请尝试使用工作人员在后面进行一些处理，并且不要阻止用户与您的应用程序交互。阅读： http: [//msdn.microsoft.com/en-us/library/cc221403 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:28:52.897

你可以试试

```
WebClient client = new WebClient();
client.DownloadFile(url, fileName); 
```

你是什​​么意思*显着停顿*？是您尝试获取 .txt 文件的服务器的响应时间吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T18:42:47.217

暂停是由默认代理设置引起的。解决方案在我的另一个问题中：

[首次调用 WebClient.DownloadString 大约需要 15 秒](https://stackoverflow.com/questions/10568321/webclient-downloadstring-takes-about-15-seconds-when-first-called)

# jms - 使用消息驱动的通道适配器和服务激活器时的事务处理

> ID：10451728
> 
> 赞同：2
> 
> 时间：2012-05-04T15:23:47.537
> 
> 标签：jms, distributed-transactions, spring-integration

我正在研究执行以下操作的 POC

1.  使用消息驱动的通道适配器在事务中接收消息
2.  调用服务激活器，该服务激活器使用处理程序将从适配器收到的消息插入到数据库，并将消息发布到出站通道。

现在，如果消息的 DB 插入失败，我希望 JMS 消息返回到队列，以便以后可以重试。

使用我的以下配置，它似乎不起作用。（即，即使在插入数据库时​​出现故障，消息也会从队列中删除。

任何指针或示例配置都会有所帮助。

```
<integration:channel id="jmsInChannel">         
    <integration:queue/>
</integration:channel>

<int-jms:message-driven-channel-adapter id="jmsIn"
    transaction-manager="transactionManager"
    connection-factory="sConnectionFactory"
    destination-name="emsQueue"
    acknowledge="client" channel="jmsInChannel"
    extract-payload="false"/>   

<integration:service-activator input-channel="jmsInChannel"
    output-channel="fileNamesChannel" ref="handler" method="process" />

<bean id="handler" class="com.irebalpoc.integration.MessageProcessor">
    <property name="jobHashTable" ref="jobsMapping" />
</bean> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:53:24.277

设置acknowledge="transacted"，我认为transactionManager 是一个JDBC（或JTA）事务管理器。

您还需要从 JmsInChannel 中删除 <queue/> ，以便数据库事务发生在同一个线程上。

Spring 会将数据库事务与 JMS 事务同步。

但是，请阅读[http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html](http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html)了解其含义。

如果您不能使您的服务具有幂等性，您可能需要查看 XA 事务管理器。

# javascript - setTimeout 在 XUL 7 中不起作用

> ID：10451729
> 
> 赞同：0
> 
> 时间：2012-05-04T15:23:53.087
> 
> 标签：javascript, xul

我无法在 XUL 7.0 中使用 setTimeout() 函数，它不起作用。

在关闭 XUL 窗口时，我创建了一个事件监听器，如下所示。

```
 window.addEventListener("close",function(event) {

   try
   {
   setTimeout(function() { alert("bip"); }, 2000);

   }
   catch(e)
   {
    //alert(e.message);
   }
  },false); 
```

但是警报没有到来。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:26:19.110

`setTimeout`不会阻塞。该功能将完成，窗口将关闭，两秒钟后计时器将用完。在那个阶段，执行环境将会消失（当窗口关闭时），所以什么都不会发生。

# android - 我们可以在 ViewGroup 派生类中设置 RelativeLayout 或 LinearLayout 逻辑吗？

> ID：10451738
> 
> 赞同：0
> 
> 时间：2012-05-04T15:24:35.820
> 
> 标签：android, derived-class, viewgroup

我有一个`ClassA`派生自**ViewGroup**的抽象类。

我想扩展`ClassA`到这些类：

`ClassB`使用**LinearLayout**布局逻辑

`ClassC`使用**RelativeLayout**布局逻辑

这可能吗 ？

我没有找到如何在派生方法**onLayout()**和**onMeasure()中实现默认的****LinearLayout**或**RelativeLayout**逻辑。

 ****如果不可能，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:30:57.593

我认为最好直接从and扩展`LinearLayout`和。然后，您使用[组合](http://en.wikipedia.org/wiki/Composition_over_inheritance)来通过' 的逻辑来增强这些类的行为。`RelativeLayout``ClassB``ClassC``ClassA`****

# c# - 在几何上创建等边三角形网格

> ID：10451740
> 
> 赞同：0
> 
> 时间：2012-05-04T15:24:48.063
> 
> 标签：c#, algorithm, path-finding

我需要创建一个适合给定几何形状的等边三角形网格。

我有一个包含几何图形的图像，它可能包括孔或细路径。我需要创建一个类似于此图像的网格：

![http://neutrinodata.s3.amazonaws.com/theage-education/cmsimages/web/b3c5925e-34de-11e0-99f6-005056b06a0e-4535326.jpg](../Images/8f720254eee3db3e3b714e181fe0f097.png)

这些圆的直径是可变的，并且需要覆盖整个几何图形。这些点不必在几何图形上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:41:07.917

您可以将三角形网格视为倾斜的矩形网格

![在此处输入图像描述](../Images/204cded597fd1e6254948b505cb50bf7.png)

例如，这使您能够将每个圆的状态存储在二维矩阵中，并使用简单的嵌套循环进行处理。当然，您必须将这些逻辑坐标转换为几何平面坐标以进行绘图。

```
const double Sin30 = 0.5;
static readonly double Cos30 = Math.Cos(30*Math.PI/180); 

for (int xLogical = 0; xLogical < NX; xLogical++) {
    for (int yLogical = 0; yLogical < NY; yLogical++) {
        double xGeo = GridDistance * xLogical * Cos30;
        double yGeo = GridDistance * (yLogical + xLogical * Sin30);
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:52:11.480

我假设这是创建一个 2D 网格划分工具。如果是这样，而且这是家庭作业，我建议你自己做，因为你会从中受益匪浅。如果这不是啮合问题，无论如何我要说的应该对您有所帮助...

为此，请使用网格节点中心来生成等边线。如果您没有开始的中心点，您将需要首先为您的对象选择一个方向，然后创建这些（基于矩形的）网格节点（您将必须想出一种方法来测试这些点是否真的位于您的对象边界内）。然后，您可以使用这些点构建您的等边三角形。笔记。您将不得不再次处理边缘检测以获得一半的准确度。

要在等边线的基础上走得更远，并获得更准确的网格，您将不得不使用三角剖分研究各向异性网格自适应 (AMA)。这将比上面概述的基本方法困难得多 - 但很有趣！

查看此[链接](http://www.karlin.mff.cuni.cz/~dolejsi/angen/angen.htm)到使用 AMA 的 2D tet-mesh 生成器。此代码所基于的论文是：

1.  [V. Dolejsi：三角形网格计算和可视化中有限体积和有限元方法的各向异性网格自适应，1998 年，1:165-178。](http://www.karlin.mff.cuni.cz/~dolejsi/mainpub.htm#AMA)

# jenkins - Jenkins - 根据参数触发构建后操作

> ID：10451744
> 
> 赞同：20
> 
> 时间：2012-05-04T15:25:05.317
> 
> 标签：jenkins, jenkins-plugins

我设置了一个 Jenkins 作业，用于构建我的 iOS Xcode 项目并将生成的 IPA 文件存档。此外，我还安装了 Testflight 插件来上传 IPA 文件作为构建后操作。这一切都很好，我的问题是......有没有办法只根据布尔构建参数的结果触发构建后操作。在某些情况下，我需要能够构建 IPA，但我不希望将其上传到 Testflight。如果我可以在构建开始时添加一个复选框，以确定是否上传到 Testflight，那将是理想的。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T15:31:48.020

[灵活的发布插件](https://wiki.jenkins-ci.org/display/JENKINS/Flexible+Publish+Plugin)支持[运行条件](https://wiki.jenkins-ci.org/display/JENKINS/Run+Condition+Plugin)。自己从未尝试过，但从其他人那里听到了关于它的好消息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T17:06:23.027

如果您不介意设置单独的 Jenkins 作业来上传 IPA 文件，您可以使用[Parameterized Trigger plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)。

# spring - Spring Security：如何从上下文 bean 的 init 方法访问受保护的服务？

> ID：10451747
> 
> 赞同：0
> 
> 时间：2012-05-04T15:25:08.123
> 
> 标签：spring, spring-mvc, spring-security

**我的设置**：

在 Spring MVC 3.1 应用程序中，我有一个受 Spring Security 保护的服务：

```
@PreAuthorize("isAnonymous()") // ("hasRole('USER')") doesn't work either
public interface UserService extends UserDetailsService, PasswordEncoder 
```

我正在尝试通过在我的上下文中声明的 bean 的 init() 方法使用此服务：

```
<bean class="com.xxx.scripts.FillDbWithInitialValues" init-method="contextInit" /> 
```

班上 ：

```
public class FillDbWithInitialValues
{
    @Autowired
    UserService userService;

    public void contextInit()
    {
        User test = userService.getUser(1);
    }
} 
```

我的 security.xml 文件的提取：

```
<sec:global-method-security pre-post-annotations="enabled" />   

<sec:http auto-config="true" use-expressions="true">
    (...)
</sec:http>

<sec:authentication-manager alias="authManager">
    <sec:authentication-provider user-service-ref="userService">
        <sec:password-encoder ref="userService" />
    </sec:authentication-provider>
</sec:authentication-manager> 
```

**问题**：

当我启动应用程序时，我得到一个异常：

```
org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext 
```

为什么会这样？如何对我的 bean 进行“身份验证”以便它可以使用该服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:10:56.417

如果没有经过身份验证的用户，则无法检查他的角色。如果您希望在调用该方法之前对该 bean 进行身份验证，我认为您可以尝试以下方式：

```
SecurityContextHolder.getContext().setAuthentication(new user here);  
User test = userService.getUser(1); 
```

# vb.net - 将 csv 加载到数据表时如何分配列类型？

> ID：10451750
> 
> 赞同：0
> 
> 时间：2012-05-04T15:25:16.347
> 
> 标签：vb.net, csv, datatable

我正在使用以下代码将 csv 文件导入数据表：

```
Dim connstr As String
        connstr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & varFilePath & ";Extended Properties=Text;"

        Dim conn As New OleDbConnection
        conn = New OleDbConnection(connstr)

        Try

            conn.Open()

            Dim strsql As String
            strsql = "SELECT * FROM [" & varFileName & "]"

            Dim da As New OleDbDataAdapter()
            da = New OleDbDataAdapter(strsql, conn)

            'dt con informacion de archivo
            Dim dtInfo As New DataTable
            da.Fill(dtInfo)
            da.Dispose() ... 
```

但是 CSV 文件中有一个列有一些以零开头的值 '000561' 例如。当数据表被填满时，它只存储“561”。

您知道如何设置列的数据类型以将值识别为 char 而不是整数吗？

非常感谢您的时间和帮助。问候。

# ios - 选择语句 SQLite 和 iOS

> ID：10451757
> 
> 赞同：0
> 
> 时间：2012-05-04T15:25:40.607
> 
> 标签：ios, sqlite

我有一个应用程序，它从文本字段中获取输入并将其放入字符串中。我有一个表，其中有一个字段，我想根据数据库中字段中的值检查输入中的字符串值。我是 iOS 新手，对 SQLite 还很陌生。这是我所拥有的：

```
NSString *strStoreNumber;
strStoreNumber = StoreNumber.text; // StoreNumber is the text field
querystring = [NSString stringWithFormat:@"SELECT string FROM tblStore WHERE string = ;"]; 
```

在“WHERE string =”之后，我希望它根据数据库中“string”字段中的值检查 strStoreNumber 的值。如果这还不够清楚，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:30:32.817

这是关于字符串创建的：

```
querystring = [NSString stringWithFormat:@"SELECT string FROM tblStore WHERE string = %@;", strStoreNumber]; 
```

有关[字符串格式说明符](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/Strings/Articles/formatSpecifiers.html)的更多详细信息。

# vba - 转换功能以提供第三种状态

> ID：10451758
> 
> 赞同：0
> 
> 时间：2012-05-04T15:25:44.053
> 
> 标签：vba, excel

转换以下函数是否容易，以便它提供以下三个输出而不是 0 或 1：

0 - 表示文件已关闭 1 - 表示文件已打开 2 - 表示文件不存在

这是功能

```
Function IsFileReadOnlyOpen(FileName As String)

Dim iFilenum As Long
Dim iErr As Long

On Error Resume Next
iFilenum = FreeFile()
Open FileName For Input Lock Read As #iFilenum
Close iFilenum
iErr = Err
On Error GoTo 0

Select Case iErr
 Case 0:    IsFileReadOnlyOpen = 0
 Case 70:   IsFileReadOnlyOpen = 1
 Case Else: Error iErr
End Select

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:35:30.590

您可以在函数的开头添加它：

```
If Dir(FileName) = "" Then 'File does not exist
    IsFileReadOnlyOpen = 2
    Exit Function 'Or not - I don't know if you want to create the file or exit in that case.
End If 
```

我同意您应该使用 enum 以使其更易于理解的评论。

PS：正如马丁米兰所说，[这](https://stackoverflow.com/questions/10451758/convert-function-so-as-to-give-3rd-state/10451898#comment13495405_10451898)可能会导致问题。或者，您可以使用这个：

```
With New FileSystemObject
    If .FileExists(FileName) Then
        IsFileReadOnlyOpen = 2
        Exit Function 'Or not - I don't know if you want to create the file or exit in that case.
    End If
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:42:09.037

如果这是您的困难，您可以使用 FileSystemObject 显式测试文件是否存在。

为了做到这一点，您需要添加对 Microsoft Scripting Runtime 库的引用，我倾向于避免这种情况。

您可以使用 Win32API 中的 FindFirstFile 进行测试，但这涉及更多一点 - 如果用户实际上在 Mac 上运行，也不会帮助您...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:51:48.660

最终得到：

```
Enum FileOpenState
        ExistsAndClosed = 0
        ExistsAndOpen = 1
        NotExists = 2
End Enum

Function IsFileReadOnlyOpen(FileName As String)

With New FileSystemObject
      If Not .FileExists(FileName) Then
              IsFileReadOnlyOpen = 2  '  NotExists = 2
              Exit Function 'Or not - I don't know if you want to create the file or exit in that case.
      End If
End With

Dim iFilenum As Long
Dim iErr As Long

On Error Resume Next
        iFilenum = FreeFile()
        Open FileName For Input Lock Read As #iFilenum
        Close iFilenum
        iErr = Err
On Error GoTo 0

Select Case iErr
    Case 0:    IsFileReadOnlyOpen = 0
    Case 70:   IsFileReadOnlyOpen = 1
    Case Else: IsFileReadOnlyOpen = 1 'Error iErr
End Select

End Function 
```

# c++ - 将系统字符串转换为 char 以传递给 _mkdir 函数

> ID：10451760
> 
> 赞同：-3
> 
> 时间：2012-05-04T15:25:56.440
> 
> 标签：c++, visual-studio-2008

我从文本框中获取一个文本值，需要将其传递给一个 _mkdir 函数，该函数采用 char*。

所以我有：

```
 _mkdir(this->txt_path->Text); 
```

如何转换它，我使用的是 VS 2008 C++ 并拥有 .Net env。

我查看了其他没有帮助的在线材料:(

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:29:00.073

好吧，像大多数 C API 一样，这个可能不是 const 正确的。你可以尝试传入 Text.c_str() 看看会发生什么。

如果它确实需要修改字符串，那么首先，找到另一个要使用的函数，这是一个非常不安全的函数。其次，您可以通过以下方式使用它：

```
std::vector<char> buf(Text.begin(), Text.end());
buf.push_back(0);
_mkdir(&buf[0]); 
```

# android - JDOM 抛出带有错误 ascii 字符的解析异常

> ID：10451767
> 
> 赞同：0
> 
> 时间：2012-05-04T15:26:20.763
> 
> 标签：android, jdom

我在我的 Android 项目中使用 JDOM，每次我在服务器响应中收到一组特定字符时，都会收到以下错误消息：

05-04 10:08:46.277：E/PARSE：org.jdom.input.JDOMParseException：文档 UTF-8 的第 95 行出错：第 95 行，第 5263 列：未关闭的令牌

05-04 10:08:46.277：E/错误处理程序：处理程序失败：org.jdom.input.JDOMParseException：第 1 行错误：第 1 行第 0 列：语法错误

当我通过 google chrome 进行相同的查询时，我可以看到所有的 XML 都通过了，而且实际上没有没有关闭令牌的区域。在整个应用程序的开发过程中，我多次遇到这个问题，解决方案一直是删除奇怪的 ascii 字符（复制/粘贴到这些数据字段中的版权徽标或商标字符等）。我怎样才能让它删除这些字符，或者删除它们并继续该功能。这是我的解析函数之一的示例。

```
public static boolean parseUserData(BufferedReader br) {
    SAXBuilder builder = new SAXBuilder();
    Document document = null;

    try {
        document = builder.build(br);

        /* XML Output to Logcat */
        if (document != null) {
            XMLOutputter outputter = new XMLOutputter(
                    Format.getPrettyFormat());
            String xmlString = outputter.outputString(document);
            Log.e("XML", xmlString);
        }

        Element rootNode = document.getRootElement();
        if (!rootNode.getChildren().isEmpty()) {

            // Do stuff
            return true;
        }

    } catch (Exception e) {
        GlobalsUtil.errorUtil
                .setErrorMessage("Error Parsing XML: User Data");
        Log.e(DEBUG_TAG, e.toString());
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:30:33.353

BufferedReader 是否构造为采用编码参数？也许您需要告诉 Reader 或 InputStream 您传递使用 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:15:50.723

这听起来像是一个字符编码问题。我认为 duffymo 的评估是正确的。不过我有两条评论....

如果您通过 URL 获取数据，则应使用 URLConnection.getContentType() 获取字符集（如果已设置且字符集不为空）以在 URL 的 InputStream 上设置 InputStreamReader ...

你试过 JDOM 2.0.1 吗？它是第一个在 Android 上经过全面测试的 JDOM 版本……（也是 Android 上唯一“支持”的 JDOM 版本）。JDOM 2.0.1 还进行了许多性能调整和内存优化，可以使您的处理速度更快。它还修复了许多错误....尽管据我所知，您不应该遇到任何错误问题......

查看[https://github.com/hunterhacker/jdom/wiki/JDOM2-Migration-Issues](https://github.com/hunterhacker/jdom/wiki/JDOM2-Migration-Issues "JDOM 2.0.1 迁移")和[https://github.com/hunterhacker/jdom/wiki/JDOM2-and-Android](https://github.com/hunterhacker/jdom/wiki/JDOM2-and-Android "Android 上的 JDOM 2.0.1")

# python - Python - 从字典列表和语法错误中检索信息

> ID：10451771
> 
> 赞同：0
> 
> 时间：2012-05-04T15:26:55.223
> 
> 标签：python, dictionary

我正在尝试用 Python 找出一个“简单”的字典/数据库，它将从十个列表中检索一个名称，以及所请求的信息。即输入是“约翰电话”；输出是“约翰的电话号码是 0401”。

除了完全停留在特定信息的检索上之外，python 突然在 name = raw_input 行上给我一个语法错误。

以下是我保存为“朋友”的文件：

```
#!/usr/bin/python

friends = {'John' : {'phone' : '0401',
        'birthday' : '31 July',
        'address' : 'UK',
        'interests' : ['a', 'b', 'c']},
    'Harry' : {'phone' : '0402',
        'birthday' : '2 August',
        'address' : 'Hungary',
        'interests' : ['d', 'e', 'f']}}
name = raw_input ('Who are you looking for? ')
if name in friends: 
print friends[name]"'s phone number is: "['phone']
    # this line is something I haven't tested
    # and so I have a big hunch it's not going to work
else: 
    print 'no data' 
```

这是它给我的错误：

```
$ ./friends
File "./friends", line 11
name = raw_input ('Who are you looking for? ')
     ^
SyntaxError: invalid syntax 
```

请注意，几个小时前，当我使用 imac 上的终端处理同一个文件时，这并*没有发生。*我没有改变那条线，我完全不知道它为什么会播放！

*   也不能在我的电脑的 cygwin 或另一台借来的 mac 上工作。
*   是的，我已经在终端中输入了 chmod +x 朋友。

这可能是最简单、最愚蠢的事情，而且我可能完全忽略了某些事情或不小心撞到了钥匙（现在是凌晨 1 点......这是周一到期......），但任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:31:13.507

这`raw_input()`条线在这里工作得很好。

您在“不确定”行有语法错误。它可以这样读：

```
print name + "'s phone number is: " + friends[name]['phone'] 
```

您还可以使用格式字符串：

```
print "%s's phone number is: %s" % (name, friends[name]['phone']) 
```

全`if`块：

```
if name in friends: 
    print "%s's phone number is: %s" % (name, friends[name]['phone'])
else: 
    print 'no data' 
```

否则，您的代码在直接从您的帖子中复制/粘贴后对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:29:14.803

您在打印消息的行中有语法错误并忘记缩进它（这在 python 中不是可选的！）。

以下是一些固定版本：

```
print name + "'s phone number is: " + friends[name]['phone']
print "%s's phone number is: %s" % (name, friends[name]['phone']) 
```

其他行都很好，所以你得到的错误很奇怪。

# java - JPA：如何映射 SQL Server 唯一标识符类型

> ID：10451772
> 
> 赞同：9
> 
> 时间：2012-05-04T15:26:56.550
> 
> 标签：java, sql-server, hibernate

我继承了我试图通过 JPA 映射的 SQL Server 数据库。许多表都有一`uniqueidentifier`列。我正在尝试像这样映射它们：

```
@Id
@GenericGenerator(name = "generator", strategy = "guid", parameters = {})
@GeneratedValue(generator = "generator")
@Column(name = "APPLICATION_ID")
private String id; 
```

休眠抱怨：

```
Found: uniqueidentifier, expected: varchar(255) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T09:32:06.267

POJO中主键属性的数据类型决定了其映射的DB列的数据类型，由[Dialect](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/dialect/package-summary.html)类指定。根据hibernate提供的[SQLServerDialect](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/dialect/SQLServerDialect.html)，它没有任何映射到的数据类型，`uniqueidentifier`默认`String`映射到`varchar(255)`

我认为 主键`guid`策略`String`只意味着hibernate将为POJO的主键属性生成一个GUID值，并且这个生成的GUID值将被插入到`varchar(255)`列中以模拟效果`uniqueidentifier`

您可以尝试使用的[columnDefinition](http://docs.oracle.com/javaee/5/api/javax/persistence/Column.html#columnDefinition%28%29)属性覆盖由[Dialect类指定的映射](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/dialect/package-summary.html)`@Column`

```
 @Id
 @GenericGenerator(name = "generator", strategy = "guid", parameters = {})
 @GeneratedValue(generator = "generator")
 @Column(name = "APPLICATION_ID" , columnDefinition="uniqueidentifier")
 private String id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-17T06:28:31.780

你需要使用`uuid2`

```
@Id
@GenericGenerator(name = "generator", strategy = "uuid2", parameters = {})
@GeneratedValue(generator = "generator")
@Column(name = "APPLICATION_ID" , columnDefinition="uniqueidentifier")
private String id; 
```

这对我有用。

# arrays - 如何打印整数数组

> ID：10451776
> 
> 赞同：0
> 
> 时间：2012-05-04T15:27:01.697
> 
> 标签：arrays, int, ascii

我有一个用于模拟数据包的结构，如下所示：

```
typedef struct{
int source;
int dest;
int type;
int port;
char data[50];
}test;

test packet[50]; 
```

我正在尝试将数据字段中的任何内容打印到屏幕上。我当前的代码如下所示：

```
 printf("Enter a series of data numbers from 1-50: ");
    scanf("%c", &packet[i].data[i]);

    while (packet[i].data[i]  > 48 || packet[i].data[i] > 57)
        {
        printf("Data series needs to be between 1-50, try again: ");
        scanf("%c", &packet[i].data[i]);
        }
   printf("%c \n", packet[i].data[i]); 
```

通过玩弄它，我已经能够编译它 - 有时它会给我 402018，有时是 X，有时只是完全跳过代码。

谁能看到我哪里出错了？我想在 packet[i] 的当前实例中打印出整个 char 数组（每次创建数据包时都会递增）

while 语句是为了确保输入的字符是一个数字，并且根据 ASCII，数字在所说的范围内。

请对我温柔一点，我对此很陌生。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:32:49.623

这在逻辑上是不正确的：

```
while (packet[i].data[i]  > 48 || packet[i].data[i] > 57)
                          ^^                        ^^ 
```

将第`>`一个更改为`<`.

此外，您正在写入第 i 个数组成员的第 i 个数据索引，这在逻辑上再次看起来不正确。您需要维护两个循环，一个循环遍历数据包，并且对于每个数据包，内部循环将数据读入数据数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:32:20.760

您必须使用不同的循环变量来输入该特定数据包的数组。现在，您对数据包索引和字符数组索引使用相同的变量，即“i”，而不是“scanf”，我建议对单个字符输入使用“getche()”函数。

并将您的 while 条件更改为：

```
 while (packet[i].data[x]  >= 48 || packet[i].data[x] <= 57) 
```

其中“x”是附加循环变量。

```
for(i=0;i<=49;i++)
    printf("Enter a series of data numbers from 1-50: ");
    for(x=0;x<=49;x++){
        packet[i].data[x] = getche();
         printf("%c \n", packet[i].data[x]);
        if(packet[i].data[x]  >= 48 || packet[i].data[x] <= 57)
            {
            printf("Data series needs to be between 1-50, try again: ");
            packet[i].data[x] = getche();

            }
else
{
  break;
}

    } 
```

# sql-server - 导入具有不同列数的多个 UTF-8 文件

> ID：10451778
> 
> 赞同：0
> 
> 时间：2012-05-04T15:27:06.593
> 
> 标签：sql-server, ssis

因此，我们都知道您不能将 UTF-8 文本文件批量插入 SQL Server 2008。然后它是我的数据库的平面文件源。但是我有200个文件。如何一次导入所有这些，而不是为每组不同的列号创建一个 SSIS 任务？

例如，为具有 30 列的那些创建一个 SISS 数据流任务，为具有 34 列的那些创建一个不同的 SSIS 任务等。

请注意， FOR EACH LOOP CONTAINER 不起作用。我试过了，但失败了。

此外，在第 20 列之后，文本文件中的列顺序在某些文件中也有所不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T20:04:25.813

对于具有不同架构的 200 个文件，您将需要考虑自动创建 SSIS 包（和数据流任务）。一旦将源适配器（平面文件或其他）添加到数据流任务，源的模式就会耦合到数据流。如果您创建连接到其中一个文件的平面文件源，将其他一些组件添加到数据流任务，将数据流路径从源适配器连接到组件，然后打开元数据页面，您可以看到这一点。数据流路径编辑器。在 Business Intelligence Development Studio 内部，您无法动态修改数据流路径模式，但可以从 .Net 应用程序或使用第三方包生成平台动态创建它们。

希望这会有所帮助，安迪

# email - 用 cakephp2 发送电子邮件

> ID：10451782
> 
> 赞同：1
> 
> 时间：2012-05-04T15:27:23.227
> 
> 标签：email, cakephp-2.0

我在使用 cakephp2 发送邮件时遇到问题，我知道我可以发送电子邮件，因为我配置了后缀，并且我可以使用命令行或 php 发送电子邮件。所以，请你给我发一个 cakephp2 发送电子邮件的例子。

这是错误信息

无效的电子邮件：“you@localhost”错误：发生内部错误。

我也尝试过通过 gmail 使用 ssl，但它也不起作用，这让我很难过。

多谢你们

顺便说一句，我正在尝试这个网址的确切示例[http://book.cakephp.org/2.0/en/core-utility-libraries/email.html](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T16:56:46.467

您的应用程序/配置/电子邮件。

`class EmailConfig { public $gmail = array( 'port' => '465', 'timeout' => '300', 'host' => 'ssl://smtp.gmail.com', 'username' => '<your_email>@gmail.com', 'password' => '<you_password>', 'transport' => 'Smtp' ); }`

你的文件 = app/controller/appController.php 插入这个函数

```
public function sendEmail($type, $options){
    try {
        $Email = new CakeEmail($type);
        $Email->config($options);
        $Email->template = "email_confirmation";
        $Email->emailFormat('html');
        //$this->idCrudRash = $options;
        $Email->send();
    } catch (SocketException $e) {
        die('Erro ao enviar email:'. $e->getMessage());
        $this->log(sprintf('Erro ao enviar email: %s', $e->getMessage()));

    }
} 
```

对于用户：app/controller/contato.php

`$options = array( 'emailFormat' => 'html', 'from' => array( $config['email_noanswer'] => $config['site_name'] ), 'subject' => 'Confirmação de Cadastro', 'to' => $this->request->data['User']['email'], //'template' => 'default', 'template' => 'email_confirmation', 'viewVars' => array( 'title_for_layout' => 'Confirmação de Email ' . $config['site_name'], 'name' => $this->request->data['User']['name'], 'email' => $this->request->data['User']['email'], //'cpf' => base64_encode($this->request->data['User']['cpf']), 'site_name' => $config['site_name'], ), ); $this->sendEmail('gmail', $options);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T03:01:27.233

在您的 email.php 文件中，请删除默认的“来自”值，它会覆盖您传递的参数。

```
public $default = array(
    'transport' => 'Mail',
    'from' => 'you@localhost', // remove this line
    ...
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-14T07:29:00.330

```
In app/config/Email 

public $smtp = array(
        'transport' => 'Smtp',
        'from' => array('no-reply@xyz.com' => 'no-reply@xyz.com'),
        'host' => 'ssl://smtp.abc.com',
        'port' => 465,
        'timeout' => 30,
        'username' => 'username',
        'password' => 'password',
        'client' => null,
        'log' => false,
    );

In Your Controller

App::uses('AppController', 'Controller');
App::uses('CakeEmail', 'Network/Email');

public function index()
    {
        $this->layout = 'layout';
        $this->set('title', "Title");
        if ($this->request->is('Post')) {
            if (!empty($this->request->data)) {
                if ($this->Modal->Save($this->request->data)) {
                    $to = 'test@anc.com';
                    $subject = 'Your_subject';
                    $message = $this->request->data;
                    if ($this->sendmail($to, $subject, $message)) {

                        echo"sent";die;
                    }
                } else {
                    echo"wrong";die;
                }
            }
        }
    }
    public function sendmail($to = null, $subject = '', $messages = null, $ccParam = null, $from = null, $reply = null, $path = null, $file_name = null)
    {
        $this->layout = false;
        $this->render(false);
        $name = $messages['Modalname']['name'];
        $email = $messages['Modalname']['email'];
        $Email = new CakeEmail();
        $Email->config('smtp');
        $Email->viewVars(array('name' => $name, 'email' => $email));
        $Email->template('comman_email_template', 'comman_email_template');
        return $Email->emailFormat('html')
            ->from(array('no-reply@xyz.com' => 'no-reply@xyz.com'))
            ->to($to)
            ->subject($subject)
            ->send();
    } 
```

为电子邮件模板创建布局和视图。并添加已发送的数据值。

# java - 在Android中获取本周的日期

> ID：10451784
> 
> 赞同：3
> 
> 时间：2012-05-04T15:27:41.993
> 
> 标签：java, android, date, days

我的程序中有这 5 个按钮：星期一、星期二、星期三、星期四和星期五，它们在我的菜单屏幕上。我现在想要的是，当我的程序启动并且我的菜单屏幕打开时，按钮包含日期 + 当天的日期。

例如，今天是五月四日（星球大战日快乐！），按钮应该是这样的：

星期一 04/30 星期二 05/01 星期三 05/02 星期四 05/03 星期五 05/04

但是当我下周一打开菜单屏幕时，它应该是这样的： 周一 05/07 周二 05/08 周三 05/09 周四 05/10 周五 05/11

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:46:56.227

我想以下两个线程是您入门所需的全部内容。正如 Ian 提到的那样，确实要通过 android [Calendar](http://developer.android.com/reference/java/util/Calendar.html)和[Date](http://developer.android.com/reference/java/util/Date.html) api。虽然我应该提到 Date api 的大多数方法已被弃用。通常首选日历。

[Android 获取当前时间和日期](https://stackoverflow.com/questions/5369682/android-get-current-time-and-date)

[在 Android 应用程序中显示当前时间和日期](https://stackoverflow.com/questions/2271131/display-current-time-and-date-in-android-application)

# c# - 处理来自实体框架存储过程的下拉列表中的 NULL

> ID：10451786
> 
> 赞同：0
> 
> 时间：2012-05-04T15:27:50.573
> 
> 标签：c#, entity-framework, stored-procedures

我遇到了从存储过程返回的空值问题。我有一个下拉列表，我希望最初为空白，但随后包含独特的街道类型。这样，用户可以将该字段留空以返回所有结果，或者开始输入并从确实存在的可能条目中获取建议。

该列表是从仅对所有地址的主表执行 DISTINCT 查询的存储过程中检索到的唯一街道类型。但是，我在结果中得到一个 NULL，并且我的下拉列表似乎在达到该 null 时停止显示结果。

我正在使用实体框架并添加了返回一组字符串的存储过程，然后使用以下代码填充组合框。如果我在存储过程中没有排序，则 null 位于中间某处，我得到一半的结果，如果我排序它，那么 null 首先是我的组合框中没有结果。

```
 SideSewerDAL.SideSewerEntities entities = new SideSewerDAL.SideSewerEntities();
 comboType.DataSource = entities.GetUniqueStreetTypes(); 
```

那么我会错吗？我应该摆脱存储过程中的 NULL 并以某种方式修复组合框以添加“空白”条目吗？或者保留 NULL 但以某种方式使组合框处理空值而不是阻塞！这是存储过程的代码

```
 public ObjectResult<global::System.String> GetUniqueStreetTypes()
    {
        return base.ExecuteFunction<global::System.String>("GetUniqueStreetTypes");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T23:56:36.063

如果存储过程返回一个字符串列表，您可以创建一个字符串列表，添加“”值，然后添加从存储过程返回的范围。

```
List<string> values = new List<string>();
values.Add("");
values.AddRange(entities.GetUniqueStreetTypes());
comboType.DataSource = values; 
```

至于处理空值，最好的解决方案可能是最好包括“WHERE stType IS NOT NULL”

# jquery - 如何使用 jQuery 1.4.4 获取 window.location.href 的选择器

> ID：10451787
> 
> 赞同：0
> 
> 时间：2012-05-04T15:27:50.950
> 
> 标签：jquery, dom, struts2, onbeforeunload

我们有一个 js 函数，它使用 Struts2 将用户从下拉列表中重定向到新页面。这是代码。

启动一切的 Struts2 下拉菜单：

```
<s:select name="selectName" list="List" listKey="nameCode" headerKey='-1'
listValue="description" headerValue="Please select..."  value="namedValue" onchange="redirectNextPage(this.value)" /> 
```

这是接下来触发的重定向函数：

```
function redirectNextPage(id){
   var page = "<s:url action='<path>.action'/>?<param>="; 
   window.location.href=(page + id); 

 } 
```

我需要使用选择器来捕获 window.location.href 并将其绑定到我的 UnBindWindow 函数。

```
//Bind Links we dont want to affect
$('a[href^="http://"]').bind('focus', UnBindWindow); //Code not working?

//UnBind Function
    function UnBindWindow(){
        $(window).unbind('beforeunload', ReturnMessage);
    }
... 
```

我错误地认为焦点是我需要的正确 DOM 事件类型。发生的情况是 select 转到 javascript 函数，然后 onbeforeunload 事件在没有调用我的 jQuery 代码的情况下触发。

如何正确地将事件绑定到 window.location.href 以便我可以防止 beforeunload 对话框触发选择下拉菜单，但仍然适用于 jsp 页面上的其他元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:06:14.497

调试后，我意识到 Struts2 标记正在捕获事件并且它没有冒泡让 jQuery 拦截。

我从来没有打过这个代码：

```
$('select').change(function() {
          alert('This worked!');
    }); 
```

但是，现在知道问题所在，我将 unbind 直接放入 redirectNextPage 函数中，它按预期工作。

```
 $(window).unbind('beforeunload', ReturnMessage);
    window.location.href=(page + id); 
```

我希望这对其他人有帮助。

# java - LD_PRELOAD 套接字函数 java

> ID：10451788
> 
> 赞同：1
> 
> 时间：2012-05-04T15:28:03.100
> 
> 标签：java, linux, sockets

我在 linux 上有一个 Java 程序，它使用套接字来接收和发送数据包。我编写了 LD_PRELOAD 模块，它使用这个 java 程序拦截套接字函数。我成功地使用了绑定、连接、套接字、接受函数，但是我无法检测到这个 java 程序用于发送和接收数据包的函数，我尝试了函数 recv、send、sendmsg、receivemsg、sendto、recvfrom，但 java 程序不使用它们。java程序使用什么函数来发送和接收数据包？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:32:25.473

你试过读（）还是写（）？在 strace 下运行您的软件是一种简单的方法来验证它正在制作什么系统调用。

# java - 什么时候在 JTA 事务中打开 JDBC 事务？

> ID：10451794
> 
> 赞同：1
> 
> 时间：2012-05-04T15:28:26.610
> 
> 标签：java, jpa, transactions, entitymanager

考虑在 Java EE 容器（或 Spring 容器）中使用 JPA：

可以说JTA和Resource-local transaction的主要区别是（除了容器使用JTA管理的一级缓存的概念）：

JTA 仅在 entityManager 刷新一个或多个实体时打开 JDBC 事务，并在执行提交时（手动或在事务方法结束时）关闭它。

而一旦第一个操作发送到数据库，资源本地事务中的代码块就会打开 JDBC 事务。没有持久性延迟的概念，以便像 JTA 那样优化对数据库的访问。

# javascript - 需要在 javascript 实现中旋转矩形

> ID：10451795
> 
> 赞同：0
> 
> 时间：2012-05-04T15:28:29.187
> 
> 标签：javascript, coordinates

我正在尝试在 javascript 中实现一个函数，该函数将执行以下操作：

允许用户指定输入矩形的数量（3 到 30 之间）。生成请求数量的输入矩形（具有随机宽度和高度）并将它们写入文件（人类可读）。从上述步骤生成的文件中读取随机生成的输入矩形。以图形方式显示输入矩形，布局正确，如示例所示。计算输出矩形。以图形方式显示输出矩形，如上例所示正确布局。注意：输入和输出矩形必须同时显示。将输出矩形坐标写入输出文件（人类可读）。

输入：在同一基线上从左到右彼此相邻放置的一组随机矩形。输出：输出表示与输入矩形描述的相同区域和结果形状的垂直堆叠矩形的最小数量。

在下面这就是我的立场的那一刻，我找到了这段代码的一部分，但现在我被卡住了，无法让它与所有这些实现一起工作，我怎样才能将输入值从 3 添加到 30？结果如何同时显示输入和输出？

任何提示都非常感谢。

```
<script>
function doit() {
 drawRectangle(100, 150, 200, 100);
 myrect = document.getElementById("newdiv");
 myrect.innerHTML= myrect.innerHTML + "<h1>howto</h1>";
} 

function drawRectangle(left, top, width, height) {
 if (document.createElement) {
   newdiv=document.createElement("div");
   newdiv.style.position="absolute";
   newdiv.style.left = left+"px";
   newdiv.style.top  = top+"px";
   newdiv.style.width = width+"px";
   newdiv.style.height = height+"px";
   newdiv.style.backgroundColor = 'red';
   newdiv.style.visibility = 'visible';
   newdiv.id = 'newdiv';
   newdiv.innerHTML = "real";
   document.body.appendChild(newdiv);
   }
 }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:38:54.893

我为您创建了一个[JSFiddle](http://jsfiddle.net/brantolsen/aWH2D/10/)，以使用您现有的代码显示一个基本的起点，并让您在需要时进行尝试。我添加了一个`<input>`元素，允许您指定要绘制的矩形的数量。但是，我留给你改变你的`doit`方法来实际绘制更多的矩形。

至于确定较大矩形以填充所有较小矩形的空间的几何问题，请参阅[此 SO question](https://stackoverflow.com/questions/257047/how-to-divide-an-area-composed-of-small-squares-into-bigger-rectangles)。

您可能还想考虑使用`canvas`来绘制矩形而不是`div`元素，因为绘制大量矩形并将输出和输入矩形分开会更容易。可以在[这里](https://developer.mozilla.org/en/Drawing_Graphics_with_Canvas)找到一个不错的基本教程。

# sql-server-2008 - 不确定如何在 T-SQL 中执行此“合并”类型查询

> ID：10451801
> 
> 赞同：1
> 
> 时间：2012-05-04T15:28:57.203
> 
> 标签：sql-server-2008, tsql

我的原始数据如下所示：

![在此处输入图像描述](../Images/541b86c43a38bf03b0ee283f4a27aaa2.png)

我想执行 T-SQL 查询以将数据置于以下形式：

![在此处输入图像描述](../Images/649cbb261284f931398a8b2dbc871640.png)

这几乎就像一个 UnPivot 类型的查询，但我不知道如何去做。另外，澄清一点。LastModifiedTime 列的值可以是每个 SubGroupId 的五个值中的任何一个。究竟是哪一个并不重要。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:45:46.407

```
select * from 
(
    select subgroupid, coater, metrictypedescription, subgroupvalue, valuedescription
    from mytable
) data

PIVOT(
     sum(subgroupvalue) 
     FOR valuedescription IN ([Average],[Minimum],[Maximum],[Standard Deviation],[xWebRange])
     ) TOTALS 
```

-

```
sum(subgroupvalue) 
```

可以是任何聚合函数，因为每个函数只有一个值，这并不重要。

产生这个

![在此处输入图像描述](../Images/1781e03361a94ad3a46e31a2a4d4d9e1.png)

编辑：如果您绝对需要最后修改的列，那么您需要像 bluefeet 所做的那样在子查询中添加连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:46:12.983

有两种方法可以做到这一点，或者使用静态 PIVOT，在其中硬编码需要 PIVOT 的值：

```
create table temp
(
    subgroupid int,
    coater varchar(10),
    metricTypeDescriptor varchar(5),
    subgroupvalue decimal(20, 6),
    valuedescription varchar(50),
    lastmodfiedtime datetime
)

insert into temp values(28099, 'VA_A', 'CdSim', 2.99886, 'Average', '2012-05-03 20:55:02.14')
insert into temp values(28099, 'VA_A', 'CdSim', 2.57201, 'Minimum', '2012-05-03 20:55:02.14')
insert into temp values(28099, 'VA_A', 'CdSim', 3.1646, 'Maximum', '2012-05-03 20:55:02.143')
insert into temp values(28099, 'VA_A', 'CdSim', 0.22082, 'Standard Deviation', '2012-05-03 20:55:02.153')
insert into temp values(28099, 'VA_A', 'CdSim', 0.59259, 'xWebRange', '2012-05-03 20:55:02.157')

insert into temp values(28102, 'VA_A', 'CdSim', 2.9091, 'Average', '2012-05-03 21:00:01.27')
insert into temp values(28102, 'VA_A', 'CdSim', 2.67619, 'Minimum', '2012-05-03 21:00:01.27')
insert into temp values(28102, 'VA_A', 'CdSim', 3.17471, 'Maximum', '2012-05-03 21:00:01.27')
insert into temp values(28102, 'VA_A', 'CdSim', 0.191868, 'Standard Deviation', '2012-05-03 21:00:01.27')
insert into temp values(28102, 'VA_A', 'CdSim', 0.49852, 'xWebRange', '2012-05-03 21:00:01.27')

insert into temp values(28104, 'VA_A', 'CdSim', 3.05835, 'Average', '2012-05-03 21:05:01.383')
insert into temp values(28104, 'VA_A', 'CdSim', 2.80336, 'Minimum', '2012-05-03 21:05:01.387')
insert into temp values(28104, 'VA_A', 'CdSim', 3.17943, 'Maximum', '2012-05-03 21:05:01.387')
insert into temp values(28104, 'VA_A', 'CdSim', 0.158743, 'Standard Deviation', '2012-05-03 21:05:01.39')
insert into temp values(28104, 'VA_A', 'CdSim', 0.37607, 'xWebRange', '2012-05-03 21:05:01.40')

select subgroupid, coater, metrictypedescriptor
    , [average]
    , [maximum]
    , [minimum]
    , [standard deviation]
    , lastmodfiedtime
from 
(
    select t1.subgroupid, t1.coater, t1.metrictypedescriptor, t1.valuedescription, t1.subgroupvalue, t2.lastmodfiedtime
    from temp t1
    left join 
    (
        select subgroupid, max(lastmodfiedtime) as lastmodfiedtime
        from temp 
        group by subgroupid
    ) t2
        on t1.subgroupid = t2.subgroupid
) x
pivot
(
    max(subgroupvalue)
    for valuedescription in([Average], [Minimum], [Maximum], [Standard Deviation])
) p

drop table temp 
```

或者您可以通过动态 Pivot 执行此操作，您可以在其中动态创建列列表，然后 PIVOT 它们：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.valuedescription) 
            FROM temp c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT subgroupid, coater, metrictypedescriptor, ' + @cols + ', lastmodfiedtime from 
            (
                select t1.subgroupid, t1.coater, t1.metrictypedescriptor, t1.valuedescription, t1.subgroupvalue, t2.lastmodfiedtime
                from temp t1
                left join 
                (
                    select subgroupid, max(lastmodfiedtime) as lastmodfiedtime
                    from temp 
                    group by subgroupid
                ) t2
                    on t1.subgroupid = t2.subgroupid
                ) x
            pivot
            (
                max(subgroupvalue)
                for valuedescription in(' + @cols + ')
            ) p '

execute(@query) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:20:40.583

这实际上可以很容易地完成，而无需使用`PIVOT`. 这个想法是使用`MAX`case 语句从分组中挑选出行并将它们变成列。您`GROUP BY`是您想要返回的在组中一致的每一列。

```
SELECT SubGroupId, Coater, MetricTypeDescriptor,
    MAX(CASE WHEN ValueDescription = 'Average'
             THEN SubGroupValue END) as Average,
    MAX(CASE WHEN ValueDescription = 'Minimum'
             THEN SubGroupValue END) as Minimum,
    MAX(CASE WHEN ValueDescription = 'Maximum'
             THEN SubGroupValue END) as Maximum,
    MAX(CASE WHEN ValueDescription = 'Standard Deviation'
             THEN SubGroupValue END) as "Standard Deviation",
    MAX(LastModifiedTime) as LastModifiedTime
FROM YourTable
GROUP BY SubGroupId, Coater, MetricTypeDescriptor 
```

**[看到它在这里工作。](http://sqlfiddle.com/#!3/8bcab/1)**

# security - 为 epub 文件添加额外的数据（水印）以提高安全性

> ID：10451810
> 
> 赞同：1
> 
> 时间：2012-05-04T15:29:19.057
> 
> 标签：security, watermark, epub

我们想发布一些电子书（epub 文件）并通过我们的网上商店出售。我们希望能够通过在文件中添加一些信息（例如：客户姓名）来“跟踪”这些电子书。我读到有些人在 jpeg 等中添加评论或试图隐藏标签之间的信息。我想知道是否有任何其他或更好的解决方案？我正在考虑放置客户 ID 的 MD5 哈希或类似的东西，但我不知道它应该放在哪里。我知道有经验的用户可以轻松地去除这些解决方案，但我正在尝试为普通用户提供某种解决方案。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:32:58.170

您正在寻找一种[隐写术](http://en.wikipedia.org/wiki/Steganography)形式。 [Lifehacker](http://lifehacker.com/230915/geek-to-live--hide-data-in-files-with-easy-steganography-tools)对此有一些提示。

# jquery - 基于下拉列表的表格的条件样式

> ID：10451814
> 
> 赞同：0
> 
> 时间：2012-05-04T15:29:42.053
> 
> 标签：jquery, css, forms

所以，我有两个对象：

1.  具有许多行和列的表。其中一列称为“Builder”
2.  包含可能在表中的所有可能的“构建器”的下拉列表

我想要做的是有条件的 CSS，这样当您在下拉列表中选择“Builder X”时，所有包含“Builder X”的**行都会被突出显示。**

我最初的计划是根据其构建器（我已经完成）动态地为每一行赋予一个类，然后在您更改下拉列表中的选项时修改 CSS（我无法弄清楚如何正确执行）。

这是一个（边缘无用的）小提琴，显示了我所处的情况：http: [//jsfiddle.net/convoke/bTM6D/8/](http://jsfiddle.net/convoke/bTM6D/8/)

相反，如果有更聪明/更好的方法来做到这一点，我愿意听到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:35:46.670

我通常会使用[jQuery](http://jquery.com/) JavaScript 框架来执行此操作：

```
$(document).ready(function(){

    $('#idOfDropDown').change(function(){

        // Remove existing active classes from the table
        $('#idOfTable tr').removeClass('active');

        // Add the new active class to the appropriate builders
        var builder = $(this).val();
        $('#idOfTable tr.' + builder).addClass('active');

    });

}); 
```

上面的代码所做的是，当您从构建器的下拉列表中选择一个选项时，它会获取所选选项的值字段并在页面上找到具有该类的所有元素，然后将“活动”类添加到这些元素然后您可以使用 CSS 突出显示。

这取决于下拉列表中每个构建器的值与表中构建器上的类名相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:36:51.727

您可以在每一行上使用 data- 属性来表示其构建器：

```
<tr data-builder="x"> ... </tr> 
```

那么您可以在下拉更改事件中执行以下操作

```
$("#my_table").
    find("tr").removeClass("highlighted").
    find("tr[data-builder='" + selectedBuilder + "']").addClass("highlighted") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:42:43.657

试试这个 jsFiddle，应该让你开始：

[http://jsfiddle.net/Bchgu/](http://jsfiddle.net/Bchgu/)

# mysql - 如何在 SQL 中使用 1 和 0 值来总结 (+1) 和向下 (-1) 投票？

> ID：10451820
> 
> 赞同：3
> 
> 时间：2012-05-04T15:30:00.353
> 
> 标签：mysql, sql, sum

我在尝试对赞成票和反对票求和时意识到了这个问题，**因为**反对票的值为 -1 而不是 0。这在使用 SQL sum() 函数时会导致问题。例如，

```
vote_id   vote
  1        0
  2        1
  3        1

SELECT sum(vote) //output is 2

vote_id   vote
  1       -1
  2        1
  3        1

SELECT sum(vote) //output is 1, which is the desired output 
```

我想首先，我的问题是，使用是否`0, null, and 1`有意义？还是我应该只使用`-1, 0, 1`？

无论如何，我很想知道使用`0, null, and 1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:33:15.563

我个人会使用`-1`,`0`和`1`.

但是，`0`和`NULL`也`1`可以工作：

```
SELECT SUM(vote * 2 - 1) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:35:18.000

所以问题是：计算聚合函数时*是否`NULL`排除？*

答案是肯定的。[维基百科关于 NULL 值的文章](http://en.wikipedia.org/wiki/Null_%28SQL%29)指出：

> SQL 定义了聚合函数来简化服务器端对数据的聚合计算。几乎所有聚合函数都执行 Null 消除步骤，因此 Null 值不包含在计算的最终结果中。但是，这种隐式 Null 消除可能会对聚合函数结果产生影响。

因此，您是否愿意`0`或是否希望从聚合函数中`NULL`排除值都没有关系。`SUM`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:32:31.460

在甲骨文中它会是

```
SUM( decode( vote,0,-1,vote )) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T15:34:10.223

一个简单的计算将投票列的值更改为 -1 和 +1。

```
SUM( 2*(vote-0.5)) 
```

或者取两者之间的计数差异。

```
SELECT (SELECT COUNT(*) FROM tbl WHERE vote = 1)
      -(SELECT COUNT(*) FROM tbl WHERE vote = 0) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T15:34:28.377

我认为您绝对应该使用 1、0 和 -1。它只是让一切变得更容易。您也可能不会使用单个位字段来节省任何空间，因此没有真正好的理由在这里尝试使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T15:36:52.707

你也可以使用`CASE`这样的东西——我在 SQL Server 中做了很多，并假设它在 MySQL 中也应该是有效的：

```
SELECT
   SUM(CASE WHEN Vote = 0 THEN -1 ELSE VOTE END) as 'Votes'
FROM
   MyTable 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-04T15:49:08.130

`select count (*) from table where vote <> 1`（金额为-1）

`select count (*) from table where vote = 1`（金额为 1）

# c# - 如何创建精灵图像

> ID：10451823
> 
> 赞同：7
> 
> 时间：2012-05-04T15:30:07.420
> 
> 标签：c#, winforms, image-processing

我正在尝试创建一个非常基本的精灵图像。

首先我有一个现有的图像（宽度=100px，高度=100px）。

我将在这张图片中循环 10 到 100 次，每次都将它放在上一张旁边的精灵上。

精灵被限制为 3000px 宽。

将图像彼此相邻放置很好，因为我可以用简单的方法将它们组合起来，但是，我需要将组合图像的宽度限制为 3000 像素，然后从新行开始。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T13:35:48.240

在下面的 MSDN 文章中有很多关于 2D-sprites 的信息：[Rendering 2D sprites](http://msdn.microsoft.com/en-gb/library/ff634505.aspx)

这些示例基于[Microsoft 的 XNA](http://en.wikipedia.org/wiki/Microsoft_XNA)，这是一个可在 Visual Studio 中用于为 Windows、Windows Phone 和 XBOX 360 开发游戏的平台。

例如，要绘制精灵，可以使用以下 C# 代码（示例取自 MSDN 文章，已删除 XBOX 360 特定代码）：

```
private Texture2D SpriteTexture;
private Rectangle TitleSafe;

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);
        SpriteTexture = Content.Load<Texture2D>("ship");
        TitleSafe = GetTitleSafeArea(.8f);
    }

    protected Rectangle GetTitleSafeArea(float percent)
    {
        Rectangle retval = new Rectangle(
            graphics.GraphicsDevice.Viewport.X,
            graphics.GraphicsDevice.Viewport.Y,
            graphics.GraphicsDevice.Viewport.Width,
            graphics.GraphicsDevice.Viewport.Height);
        return retval;
    }

    protected override void Draw(GameTime gameTime)
    {
        graphics.GraphicsDevice.Clear(Color.CornflowerBlue);
        spriteBatch.Begin();
        Vector2 pos = new Vector2(TitleSafe.Left, TitleSafe.Top);
        spriteBatch.Draw(SpriteTexture, pos, Color.White);
        spriteBatch.End();
        base.Draw(gameTime);
    } 
```

你需要调用`LoadContent()`来初始化它，然后你需要调用`GetTitleSafeArea(100)`来获得安全的绘制区域（在本例中为 100%），最后你可以使用该`Draw`方法。它接受一个包含`GameTime`类实例的参数，该实例是游戏计时状态的快照，以可变步长（实时）或固定步长（游戏时间）游戏可以使用的值表示。

请让我知道这是否对您有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T11:58:15.453

让我尝试一些伪代码：

```
Bitmap originalImage; //  that is your image of 100x100 pixels
Bitmap bigImage;      //  this is your 3000x3000 canvas
int xPut = 0;
int yPut = 0;
int maxHeight = 0;
while (someExitCondition) 
{
    Bitmap imagePiece = GetImagePieceAccordingToSomeParameters(originalImage);
    if (xPut + imagePiece.Width > 3000)
    {
        xPut = 0;
        yPut += maxHeight;
        maxHeight = 0;
    }
    DrawPieceToCanvas(bigImage, xPut, yPut, imagePiece);
    xPut += imagePiece.Width;
    if (imagePiece.Height > maxHeight) maxHeight = imagePiece.Height;
    //  iterate until done
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T15:34:49.773

在 3000 处声明一个变量，如果您放入一张宽度为 250 的图片，请将其从变量中取出，继续这样做，这也允许您通过查看数字是否在该行上留出足够的空间用于下一张图片left 大于下一张图片的宽度。每次从新行开始时，将变量设置回 3k 并重新开始。解决了

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T13:15:00.480

一种可行的方法是允许将精灵的帧放置在位图中的任何位置（这样可以使它们更紧凑），并为每个位图附上一个描述每个帧的位置、大小和原点的 (n xml) 文件和有所有动画的列表。像这样的东西：

```
<SpriteSheet>
    <Frames>
        <Frame id="0" location="20,40" size="64,64" origin="32,32" />
        <Frame id="1" location="100,40" size="64,64" origin="32,32" />
        <Frame id="2" location="164,40" size="64,64" origin="0,0" />
        <Frame id="3" location="20,120" size="64,64" origin="32,32" />
    </Frames>
    <Animations>
        <Animation name="walk left" >
            <Keyframes>
                <Keyframe frameId="0" duration="0:0:0.5" offset="-5,0" />
                <Keyframe frameId="1" duration="0:0:0.5" offset="-5,0" />
                <Keyframe frameId="2" duration="0:0:0.4" offset="-2,0" />
                <Keyframe frameId="1" duration="0:0:0.5" offset="-5,0" />
            </Keyframes>
        </Animation>
        <Animation name="walk right" >
            <Keyframes>
                <Keyframe frameId="5" duration="0:0:0.5" offset="5,0" />
                <Keyframe frameId="6" duration="0:0:0.5" offset="5,0" />
                <Keyframe frameId="2" duration="0:0:0.4" offset="2,0" />
                <Keyframe frameId="6" duration="0:0:0.5" offset="5,0" />
            </Keyframes>
        </Animation>
    </Animations>
</SpriteSheet> 
```

通过这种方式，您可以在动画中重复使用帧（从而进一步优化位图大小）并通过简单地编辑 XML 文件来自定义动画。

您所要做的就是读取 XML 文件、读取位图并在开始动画时：启动一个定期计时的计时器。当它滴答作响时，您可以通过将关键帧的持续时间一一添加并在总和超过滴答时间时停止来计算动画中的正确关键帧；应该使用当前的关键帧。

在上面的 XML 文件中，我添加了诸如偏移之类的东西，它允许您在动画期间修改精灵的位置（您甚至可以对其进行插值以使其平滑移动）

剩下的就是从位图中抓取正确的帧。作为一种优化，您可以在加载 XML 文件时通过抓取帧来预处理位图，将它们保留为小位图，并丢弃大位图。当位图很大并且没有完全覆盖在帧中时，这可能会优化内存。

在其他情况下，您无需进行预处理，只需对帧进行 blit。

对于较大的应用程序（更多位图/动画/帧），我建议创建一个应用程序来创建和编辑 XML 文件。另一种选择可能是为您最喜欢的绘画程序创建一个插件（如果可能的话）

# javascript - 允许轻松添加 Javascript onclick 事件的图像地图创建器/生成器？

> ID：10451824
> 
> 赞同：2
> 
> 时间：2012-05-04T15:30:10.530
> 
> 标签：javascript, dom-events, imagemap

虽然我很清楚图像映射是如何工作的，以及如何对其进行编码等等......我发现使用图像映射创建器生成图像映射代码，然后使用 HTML Tidy 来整理它是浪费时间，然后手动添加所有图像属性添加`onclick`事件，让它们返回 false，并确保`href="#"`，特别是对于大图像映射。

有谁知道支持`onclick`直接添加 Javascript 事件（例如 ）而不是仅添加 href url，然后必须稍后手动编辑代码的图像地图创建者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:48:32.003

你试图以错误的方式解决这个问题。这个问题与创建图像映射无关，它与处理 HTML 有关。图像映射中的标签没有什么独特之处。

所以你有一堆你想要对一些 HTML 做的事情，这恰好是一个图像映射。为什么不使用专门为处理 HTML 而设计的东西，例如 jQuery，来解决您的问题？

“添加 onclick 事件，让它们返回 false，并确保 href="#"...

```
$('area').attr('href','#');
$('area').attr('onclick','.. whatever you want ...'); 
```

仅仅因为 jQuery 是一种 javascript 工具并不意味着您不能将它用于一次性任务。在 Chrome 中右键单击，检查元素，“复制为 HTML”。

现在让我补充一点，一般来说，使用 jQuery 添加`onclick`属性没有什么意义，因为您应该只是添加事件处理程序。但是，如果您想生成 HTML，然后将其复制/粘贴为硬编码的 HTML，则可以这样做。但我一般来说，应该像瘟疫一样避免“点击”，尤其是（如你所说）具有很多元素的图像地图。这只是浪费带宽；因为无论如何您都在绑定 javascript 处理程序，所以您显然已经在您的页面上运行了 javascript。为什么不只使用 javascript 来绑定处理程序？

# c - 将 main 拆分为一个函数

> ID：10451827
> 
> 赞同：0
> 
> 时间：2012-05-04T15:30:32.053
> 
> 标签：c, function

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
        char c, *data, *temp;
        data=malloc(sizeof(char));
        int i, conta=0;
        printf("Write hostname: ");
        for (i=0;;i++) {
            c=getchar();
            conta++;
            if (c=='\n') break; /* Se premo invio esco dal ciclo */
            data[i]=c; /* Inserisco il carattere nell'array */
            temp=realloc(data,(i+2)*sizeof(char)); /* do memoria aggiuntiva al puntatore (+2 per carattere NUL) */
            if ( temp != NULL ) {
                    data=temp; /* Se la riallocazione va a buon fine assegno temp a data */
            } else {
                    free(data); /* altrimenti libero il puntatore, stampo messaggio errore e chiudo programma */
                    printf("Error allocating memory!\n");
                    return EXIT_FAILURE;
            }    
        }
    /* Stampo la stringa letta, libero puntatore e chiudo programma */
    for (i=0;i<=conta;i++){
            printf("%c", data[i]);
        }
        printf("\n");
        free(data);
        return EXIT_SUCCESS;
} 
```

我想将我的 main 拆分为一个可以获取用户输入（主机名、用户名）的函数。
我想要类似的东西：

```
#include <stdio.h>
#include <stdlib.h>

function read_input();

int main()
{
    printf("Write hostname: ");
    read_input();
    printf("Write username: ");
    read_input();
    for (i=0;i<=conta;i++){
      printf("%c", data[i]);
    }
    printf("\n");
    free(data);
    return EXIT_SUCCESS;
}

read_input(){
....
} 
```

但我不知道我必须如何开始制作这个函数......
我不知道如何制作一个将返回`conta`（对于`for cicle`）的函数，指针`data`（必须被释放并且需要打印输出）。
我是否要创建一个结构并将其传递给函数的返回值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T12:56:36.700

你可以这样组织你的代码：

```
#include <stdio.h>
#include <stdlib.h>

int read_input(char data[]);

int main()
{
    char *data;
    int i, conta;
    data=malloc(sizeof(char));
    printf("Write hostname: ");
    conta = read_input(data);
    /* Stampo la stringa letta, libero puntatore e chiudo programma */
    for (i=0;i<=conta;i++){
        printf("%c", data[i]);
    }
    printf("\n");
    free(data);
    return EXIT_SUCCESS;
}

int read_input(char data[])
{
    char c, *temp;
    int i, conta = 0;
    for (i=0;;i++) {
        c=getchar();
        conta++;
        if (c=='\n') break; /* Se premo invio esco dal ciclo */
        data[i]=c; /* Inserisco il carattere nell'array */
        temp=realloc(data,(i+2)*sizeof(char)); /* do memoria aggiuntiva al puntatore (+2 per carattere NUL) */
        if ( temp != NULL ) {
                data=temp; /* Se la riallocazione va a buon fine assegno temp a data */
        } else {
                free(data); /* altrimenti libero il puntatore, stampo messaggio errore e chiudo programma */
                printf("Error allocating memory!\n");
                return EXIT_FAILURE;
        }
    }
    return conta;
} 
```

# mysql - 在 LEFT JOIN 查询中使用 MySQL LIMIT

> ID：10451831
> 
> 赞同：1
> 
> 时间：2012-05-04T15:30:39.197
> 
> 标签：mysql, wordpress, join, limit

我在 MySQL 中执行以下查询：

```
SELECT wp_posts.post_date, wp_posts.post_content, wp_posts.post_title, wp_posts.ID, wp_terms.name, wp_term_taxonomy.taxonomy
FROM wp_posts
LEFT JOIN wp_term_relationships ON ( wp_term_relationships.object_id = wp_posts.ID ) 
LEFT JOIN wp_term_taxonomy ON ( wp_term_taxonomy.term_taxonomy_id = wp_term_relationships.term_taxonomy_id )
LEFT JOIN wp_terms ON ( wp_terms.term_id = wp_term_taxonomy.term_id ) 
WHERE 1=1
AND wp_posts.post_type = 'post'
AND (wp_posts.post_status = 'publish')
ORDER BY wp_posts.ID DESC 
LIMIT 50 
```

这将按预期返回 50 个结果：但取决于每个“帖子”的“术语”数量，这意味着“帖子”的数量不确定。

如何限制它以便获得 25 个唯一的 wp_posts

```
WHERE 1=1
AND wp_posts.post_type = 'post'
AND (wp_posts.post_status = 'publish') 
```

但是返回关于加入 wp_terms 的尽可能多的行...？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:02:01.667

如果由于左连接，给定 ID 可能有多个条目，我会从您的帖子中预先查询，最近 25 个符合左连接条件的 ID 是可选的，并且您始终会获得 ID。将此限制为 25。现在，当将 ORDER BY 应用于 JustLast25.ID 时，将与其一起放置尽可能多的按顺序分配的条目。因此，您的 25 个 ID 可以生成 200 个条目，但是对于每个 ID，它们将被分配一个 1、2、3 等序列...

完成后，为了获得 50 条记录的限制，但确保您拥有所有 25 个 ID，您需要重新查询，但将顺序更改为 FIRST 序列，然后是 ID，以便您获得所有可能的第一个条目，然后获得所有可能的第 2 个条目，然后获得第 3 个，等等......有些可能没有条目，但至少，它们将被包含在列表中一次。对于那些有多个的，他们的附加记录将在第一次运行后出现

```
select
      PreQualify.*
   from
      ( SELECT 
              JustLast25.post_date, 
              JustLast25.post_content, 
              JustLast25.post_title, 
              JustLast25.ID, 
              wp_terms.name, 
              wp_term_taxonomy.taxonomy,
              @lastSeq := if( @lastID = JustLast25.id, @lastSeq +1, 1 ) as SeqPerID,
              @lastID := JustLast25.ID
           FROM 
              ( select @lastID := 0, @lastSeq := 0 ) sqlvars,
              ( select wp_posts.*
                   from wp_posts
                   where wp_posts.post_type = 'post'
                      AND wp_posts.post_status = 'publish'
                   ORDER BY 
                      wp_posts.ID DESC
                   LIMIT 25 ) JustLast25

                 LEFT JOIN wp_term_relationships 
                    ON JustLast25.ID = wp_term_relationships.object_id
                    LEFT JOIN wp_term_taxonomy 
                       ON wp_term_relationships.term_taxonomy_id = wp_term_taxonomy.term_taxonomy_id 
                       LEFT JOIN wp_terms 
                          ON wp_term_taxonomy.term_id = wp_terms.term_id
           order by
              JustLast25.ID DESC ) PreQualify
   order by
      PreQualify.SeqPerID,
      PreQualify.ID DESC
   LIMIT 50 
```

现在，如果您希望将它们全部与它们按顺序合格的帖子旁边的所有记录分组，您必须将其再包装一层

```
select
      FinalSet.*
   from
      ( full query from above ) FinalSet
   order by
      FinalSet.ID DESC,
      FinalSet.SeqPerID 
```

# objective-c - 如何最小化数组访问次数

> ID：10451833
> 
> 赞同：-1
> 
> 时间：2012-05-04T15:30:49.387
> 
> 标签：objective-c, c, arrays, for-loop, while-loop

如何减少访问数组的时间，此时它访问数组 2 次以找到用户提供的数字序列中的最大数字，

```
int i=0;
    int max = -1;
    int a_i = -1;

    for (i=0; i<length; i++)
    {   
    a_i = array(a,i);

    if (a_i > max) 
    {
    max = a_i;
    }

    return max; 
```

[pastebin 上的](http://pastebin.com/3JcQm79q)完整代码

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:57:46.647

*   简短的回答

你不能，你必须遍历每个项目，考虑到你没有关于数组的信息。

*   长答案

如果您接受之前浪费了一些时间，您可以减少阅读时的访问量

`O(n)`使用你需要插入（everyting）并`O(n)`找到最小值的数组

如果您真正想要的是减少在 find 函数中花费的时间，您可以使用[minimum heap](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)，插入时会有一些开销，`O(n log(n))`但您只需要`O(1)`搜索。

您也可以在搜索之前对数组进行排序，这可以是`O(n log n)`

# android - 获取当前搜索栏进度/辅助进度的屏幕位置？

> ID：10451838
> 
> 赞同：0
> 
> 时间：2012-05-04T15:31:13.067
> 
> 标签：android, customization, seekbar

我正在尝试通过覆盖 onDraw() 方法来自定义搜索栏的外观 - 我需要在屏幕上找到当前进度/辅助进度位置。

我知道如何获得当前进度/次要进度，`getProgress()`但这`getSecondaryProgress()`并不能反映屏幕上的位置。我想我可以得到可绘制的进度并获得可绘制的边界，或者用于进度的clipDrawable的级别，如下所示：

```
Drawable progress = getProgressDrawable();
        if (progress instanceof LayerDrawable)
        {
            Drawable primaryProgress = ((LayerDrawable)progress).findDrawableByLayerId(android.R.id.progress);
            Rect bounds= primaryProgress.copyBounds();//bounds.left is 0, bounds.right is the screen width
            ((ClipDrawable)primaryProgress).getLevel();//just gives a value between 0 and 10,000
        } 
```

但我得到的值也不反映屏幕上的位置！有谁知道我怎样才能得到这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:43:54.820

我通过将最大进度设置为屏幕宽度来解决这个问题：

```
 WindowManager wm = (WindowManager) myAppContext.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    Point size = new Point();
    try{
        display.getSize(size);//only works on later versions of android
    }
    catch (Exception e) {

        int width = display.getWidth();  // deprecated
        int height = display.getHeight();  // deprecated
        size = new Point(width, height);
    }
myProgressBar.setMax(size.x); 
```

# java - 如何为 CSV 文件同时转义逗号和双引号？

> ID：10451842
> 
> 赞同：74
> 
> 时间：2012-05-04T15:31:36.077
> 
> 标签：java, regex, excel, oracle, csv

我正在编写一个 Java 应用程序来将数据从 Oracle 导出到 csv 文件

不幸的是，数据的内容可能相当棘手。逗号仍然是分隔符，但一行中的一些数据可能是这样的：

```
| ID    |   FN    |   LN   |  AGE   |  COMMENT                   |
|----------------------------------------------------------------|
| 123   |  John   |  Smith |   39   | I said "Hey, I am 5'10"."  |
|----------------------------------------------------------------| 
```

所以这是`comment`列上的字符串之一：

> 我说“嘿，我是 5'10”。

不开玩笑，我需要在 Excel 中显示上述评论，或者从 Java 生成的 CSV 文件中打开办公室，当然不能弄乱其他常规转义情况（即常规双引号和元组中的常规逗号）。我知道正则表达式很强大，但是我们如何在如此复杂的情况下实现目标呢？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-05-04T16:13:14.530

有几个图书馆。这里有两个例子：

* * *

### [❐ Apache Commons Lang](http://commons.apache.org/lang/)

[Apache Commons Lang](http://commons.apache.org/lang/)包含一个特殊的类来转义或取消转义字符串（CSV、EcmaScript、HTML、Java、Json、XML）[**`org.apache.commons.lang3.StringEscapeUtils`**](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringEscapeUtils.html)：.

*   *转至*CSV

    ```
    String escaped = StringEscapeUtils
        .escapeCsv("I said \"Hey, I am 5'10\".\""); // I said "Hey, I am 5'10"."

    System.out.println(escaped); // "I said ""Hey, I am 5'10"".""" 
    ```

*   *从 CSV 中*转义**

     *```
    String unescaped = StringEscapeUtils
        .unescapeCsv("\"I said \"\"Hey, I am 5'10\"\".\"\"\""); // "I said ""Hey, I am 5'10""."""

    System.out.println(unescaped); // I said "Hey, I am 5'10"." 
    ```* 

 *[**你可以从* [这里](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22commons-lang3%22)下载。]

* * *

### [❐ OpenCSV](http://opencsv.sourceforge.net/)

如果您使用[**OpenCSV**](http://opencsv.sourceforge.net/)，则无需担心转义或取消转义，仅用于写入或读取内容。

*   写入文件：

    ```
    FileOutputStream fos = new FileOutputStream("awesomefile.csv"); 
    OutputStreamWriter osw = new OutputStreamWriter(fos, "UTF-8");
    CSVWriter writer = new CSVWriter(osw);
    ...
    String[] row = {
        "123", 
        "John", 
        "Smith", 
        "39", 
        "I said \"Hey, I am 5'10\".\""
    };
    writer.writeNext(row);
    ...
    writer.close();
    osw.close();
    os.close(); 
    ```

*   读取文件：

    ```
    FileInputStream fis = new FileInputStream("awesomefile.csv"); 
    InputStreamReader isr = new InputStreamReader(fis, "UTF-8");
    CSVReader reader = new CSVReader(isr);

    for (String[] row; (row = reader.readNext()) != null;) {
        System.out.println(Arrays.toString(row));
    }

    reader.close();
    isr.close();
    fis.close(); 
    ```

[**你可以从* [这里](http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22com.opencsv%22)下载。]

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-04T15:34:31.783

Excel 必须能够处理完全相同的情况。

将这些东西放入 Excel，将它们保存为 CSV，然后使用文本编辑器检查文件。然后你就会知道 Excel 适用于这些情况的规则。

使 Java 产生相同的输出。

顺便说一下，Excel 使用的格式已发布...

****编辑 1：**** 这是 Excel 所做的
****编辑 2：**** 请注意，`fputcsv`如果您使用 " 作为附件，php 的功能与 excel 完全相同。

```
rdeslonde@mydomain.com
Richard
"This is what I think" 
```

变成这样：

```
Email,Fname,Quoted  
rdeslonde@mydomain.com,Richard,"""This is what I think""" 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-07T13:40:25.253

感谢 Tony 和 Paul 的快速反馈，这非常有帮助。我实际上通过 POJO 找到了解决方案。这里是：

```
if (cell_value.indexOf("\"") != -1 || cell_value.indexOf(",") != -1) {
    cell_value = cell_value.replaceAll("\"", "\"\"");
    row.append("\"");
    row.append(cell_value);
    row.append("\"");
} else {
    row.append(cell_value);
} 
```

简而言之，如果单元格内部的字符串中有逗号或双引号等特殊字符，则首先`"\""`通过添加额外的双引号（如`"\"\""`）来转义双引号（），然后将整个内容放入双引号中（如`"\""+theWholeThing+"\""`）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-09-20T16:21:50.283

如果您使用的是 CSVWriter。检查您是否没有该选项

```
.withQuotechar(CSVWriter.NO_QUOTE_CHARACTER) 
```

当我删除它时，逗号按预期显示，而不是将其视为新列

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-07T13:47:30.777

您还可以查看[Python 如何编写与 Excel 兼容的`csv`文件。](http://docs.python.org/library/csv.html)

我相信 Excel 的默认设置是为文字引号字符加倍 - 也就是说，文字引号`"`写为`""`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-06T11:24:05.520

```
"cell one","cell "" two","cell "" ,three" 
```

将此保存到 csv 文件并查看结果，因此使用双引号将其自身转义

**重要的提示**

```
"cell one","cell "" two", "cell "" ,three" 
```

会给你一个不同的结果，因为逗号后面有一个空格，这将被视为“

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-08-03T05:41:51.993

```
String stringWithQuates = "\""+ "your,comma,separated,string" + "\""; 
```

这将在 CSV 文件中保留逗号*

# mysql - 如何从索引到另一个表行的行中获取数据？

> ID：10451846
> 
> 赞同：0
> 
> 时间：2012-05-04T15:31:46.717
> 
> 标签：mysql

嗨，我有这样的 mysql 表：

```
.poll_users
(id int(11) NOT NULL AUTO_INCREMENT
name VARCHAR(255) NOT NULL
PRIMARY KEY (id))

.poll_referendum
        (id int(11) NOT NULL AUTO_INCREMENT
        name varchar(255) DEFAULT NULL
        PRIMARY KEY (id))

.poll_questions 
     id int(11) NOT NULL AUTO_INCREMENT
    referendum_id int(11) DEFAULT NULL
    body varchar(255) DEFAULT NULL
    created_at datetime DEFAULT NULL
    updated_at datetime DEFAULT NULL
    PRIMARY KEY (`id`)
    KEY `referendum_id` (`referendum_id`))

.poll_answers 
 `id` int(11) NOT NULL AUTO_INCREMENT
 `vote_id` int(11) DEFAULT '0'
 `question_id` int(11) NOT NULL
 `created_at` datetime DEFAULT NULL
 `updated_at` datetime DEFAULT NULL
 PRIMARY KEY (`id`)
 KEY `vote_id` (`vote_id`)
 KEY `question_id` (`question_id`))

.poll_voting 
    `id` int(11) NOT NULL AUTO_INCREMENT
    `question_id` int(11) NOT NULL DEFAULT '0'
    `answer_id` int(11) NOT NULL DEFAULT '0'
    `user_id` int(11) NOT NULL DEFAULT '0'
    `created_at` datetime DEFAULT NULL
    `updated_at` datetime DEFAULT NULL
    PRIMARY KEY (`id`)
    KEY `question_id` (`question_id`)
    KEY `answer_id` (`answer_id`)
    KEY `user_id` (`user_id`))

.vote_types 
    `id` int(11) NOT NULL AUTO_INCREMENT
    `type` varchar(255) DEFAULT NULL
    PRIMARY KEY (`id`)) 
```

如何获取 vote_types 表中的投票类型并对应于正确的问题和调查？

我试过了：`SELECT vote_id FROM surveys.poll_answers WHERE question_id = 1;` 但这给了我： ![在此处输入图像描述](../Images/3583bb9c14ab44dc31663eac492c4cc0.png)

和 1,2 是投票类型文本`SELECT * FROM`调查的索引`.`vote_types `WHERE`id`=1` 在 poll_answers 表中，我保留索引哪些投票类型分配给问题，问题分配给 poll_referendum 表中的适当公投，所以我如何获取与正确问题相对应的投票类型和像这样的调查

```
SELECT vote_id indexes from poll_answers table and they index to vote_types where are stored vote types in text and those vote_types corresponds to proper questions that are stored in poll_questions and referendums that are stored in poll_referendum ? 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:05:45.313

我不确定。也许您正在谈论表连接。

```
SELECT 
           v.*
      FROM poll_answers AS a
      INNER JOIN poll_voting AS v ON (v.id=a.vote_id)
      WHERE a.question_id = 1; 
```

# ios - 用于 iPad 的网页上带有叠加层的实时流媒体视频？

> ID：10451848
> 
> 赞同：2
> 
> 时间：2012-05-04T15:32:04.473
> 
> 标签：ios, ipad, html, html5-video, http-live-streaming

在 iPad 上，是否可以在网页中嵌入实时流媒体视频*并*在顶部放置半透明覆盖（更高的 z-index）？

请注意，最后我正在寻找一种至少也适用于桌面浏览器的解决方案，理想情况下也适用于 iPad 以外的移动设备。顺便说一句，我很高兴收到有关提供可嵌入视频小部件的流媒体平台的建议。我们暂时不想建立自己的流媒体服务器。

# php - 无法从 wordpress 模板页面的 php 脚本访问目录

> ID：10451850
> 
> 赞同：1
> 
> 时间：2012-05-04T15:32:08.637
> 
> 标签：php, wordpress, directory

我有一个 php 脚本，它从一个目录中抓取 10 个随机图像并将它们显示在一个页面上。我通过名为 rand_boats.php 的包含将此脚本包含在自定义 wordpress 模板页面中。我不断触发给出无效文件夹的错误消息。rand_boats 和boats 目录都在同一个目录中。这是脚本：

```
<?php function RandomFile($folder='', $extensions='.*'){
   // fix path:
    $folder = trim($folder);
    $folder = ($folder == '') ? './' : $folder;

    // check folder:
    if (!is_dir($folder)){ die('invalid folder given!'); }

    // create files array
    $files = array();

    // open directory
    if ($dir = @opendir($folder)){

        // go trough all files:
        while($file = readdir($dir)){

            if (!preg_match('/^\.+$/', $file) and 
                preg_match('/\.('.$extensions.')$/', $file)){

                // feed the array:
                $files[] = $file;                
            }            
        }        
        // close directory
        closedir($dir);    
    }
    else {
        die('Could not open the folder "'.$folder.'"');
    }

    if (count($files) == 0){
        die('No files where found :-(');
    }

    // seed random function:
    mt_srand((double)microtime()*1000000);

    // get an random index:
    $rand = mt_rand(0, count($files)-1);

    // check again:
    if (!isset($files[$rand])){
        die('Array index was not found! very strange!');
    }

    // return the random file:
    return $folder . "/" . $files[$rand];

}

$random1 = RandomFile("img");
while (!$random2 || $random2 == $random1) {
    $random2 = RandomFile("img");
}
while (!$random3 || $random3 == $random1 || $random3 == $random2) {
    $random3 = RandomFile("img");
}
while (!$random4 || $random4 == $random1 || $random4 == $random2 || $random4 == $random3) {
    $random4 = RandomFile("img");
}
while (!$random5 || $random5 == $random1 || $random5 == $random2 || $random5 == $random3 || $random5 == $random4) {
    $random5 = RandomFile("img");
}
while (!$random6 || $random6 == $random1 || $random6 == $random2 || $random6 == $random3 || $random6 == $random4 || $random6 == $random5) {
    $random6 = RandomFile("img");
}
while (!$random7 || $random7 == $random1 || $random7 == $random2 || $random7 == $random3 || $random7 == $random4 || $random7 == $random5 || $random7 == $random6) {
    $random7 = RandomFile("img");
}
while (!$random8 || $random8 == $random1 || $random8 == $random2 || $random8 == $random3 || $random8 == $random5 || $random8 == $random5 || $random8 == $random6 || $random8 == $random7) {
    $random8 = RandomFile("img");
}
while (!$random8 || $random9 == $random1 || $random9 == $random2 || $random9 == $random3 || $random9 == $random5 || $random9 == $random5 || $random9 == $random6 || $random9 == $random7 || $random9 == $random8) {
    $random9 = RandomFile("img");
}
while (!$random8 || $rand10 == $random1 || $random10 == $random2 || $random10 == $random3 || $random10 == $random5 || $random10 == $random5 || $random10 == $random6 || $random10 == $random7 || $random10 == $random87 || $random10 == $random9) {
    $random10 = RandomFile("img");
}
?>

<div id="random_images">
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random1; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random2; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random3; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random4; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random5; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random6; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random7; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random8; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random9; ?>" alt="image alt" /></li>
    <li><img src="<?php bloginfo('template_directory'); ?>/<?php echo $random10; ?>" alt="image alt" /></li>
</ul>
   </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:54:12.087

如果你在检查它是否是一个目录之前打印出 $folder 的值，你会得到什么？

# objective-c - 将 Storyboard 创建的 UITableview 的高度调整为其内容的高度

> ID：10451851
> 
> 赞同：0
> 
> 时间：2012-05-04T15:32:19.620
> 
> 标签：objective-c, ios, xcode, uitableview, storyboard

我已经将一个表格视图拖到我的情节提要场景中，但它的高度是静态的，并且不会根据它包含的单元格数量进行调整，除非我在情节提要中手动调整它。我怎样才能让这张桌子根据其内容的总高度调整自己的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:54:43.513

你将不得不做这个的一些版本：

1.  弄清楚将显示多少个单元格
2.  找出每个单元格的高度
3.  做数学并设置高度`UITableView`

在你生气之前（因为我知道这很明显），让我跟进一下：

1.  如果您确定将始终显示多少个单元格（并且它是一个静态值），您可以在 Interface Builder 中手动调整高度。
2.  如果您*不确定*（根据您的问题，我猜是这种情况），您必须在运行时执行上述 1 到 3 的操作。然后，因为`UITableView`是 的子类`UIView`，你可以简单地调整它的`frame`属性。

例如：

1.  我有7个细胞。
2.  单元格 1、3 和 5（索引 0、2 和 4）的高度为 20 像素。
3.  单元格 2、4、6 和 7（索引 1、3、5 和 6）的高度为 30 像素。
4.  我需要 180 像素的总显示高度（由于分隔符等，您实际上可能需要使用它。）
5.  所以，我可以打电话：

* * *

```
CGFloat newHeight = ... // Whatever you calculate
CGRect currentFrame = [[self MyTableView] frame];  
[[self MyTableView] setFrame:CGRectMake(
                 currentFrame.origin.x,
                 currentFrame.origin.y,
                 currentFrame.size.width,
                 newHeight)
 ]; 
```

如果您想变得非常花哨，可以通过将其包装在一个`[UIView animationWithDuration:]`块中来为更改设置动画。

希望这可以帮助！

* * *

***更新/编辑***

这是一种笨拙的方法......它有效，但我确信有更好的方法来做到这一点。我***不***认为这是最好/最快/最有效的方式。这更多是为了说明一个原则。;-)

```
- (CGFloat)totalHeightNeededForTableView:(UITableView *)tv {
    CGFloat retVal = 0;

    int sectionCount = [self numberOfSectionsInTableView:tv];
    int rowCount = 0;
    NSIndexPath *path = nil;
    for (int i = 0; i < sectionCount; i = i + 1) {
        rowCount = [self tableView:tv numberOfRowsInSection:i];
        for (int j = 0; j < rowCount; j = j + 1) {
            path = [NSIndexPath indexPathForRow:j inSection:i];
            retVal = retVal + [self tableView:tv heightForRowAtIndexPath:path];
        }
    }
    return retVal;
} 
```

# php - 声明导致 div 内容不显示

> ID：10451853
> 
> 赞同：1
> 
> 时间：2012-05-04T15:32:22.083
> 
> 标签：php, jquery, html, doctype

我有一个 html 页面，其中包含一个显示来自外部 php 文件的 html 的 div。在我向 html 页面添加 DOCTYPE 声明之前，它工作得很好。页面继续运行，除了外部内容没有出现在 div 中。

```
<!DOCTYPE HTML>
<html dir="ltr" lang="en-US">
<head>

<title>Test Page</title>

<!--meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"-->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">

<script type="text/javascript" src="./inc/jquery.js"></script>
<script type="text/javascript">

    function getinfo()
        {
        $.post('prodinfo.php', { prodcode: prodcodeform.prodcodevar.value},
            function(output)
            {
            $('#prodinfo').html(output).show;
            });
        }

    function hideinfo()
        {
        $('#prodload').hide();
        $('#openprodinfo').show();
        }

    function showinfo()
        {
        $('#prodload').show();
        $('#openprodinfo').hide();
        }
</script>
</head>
<body>
<input style="position:relative;" type="button" class="button" id="openprodinfo" title="Open" value="INFO" onclick="showinfo();">
<DIV id="prodload" style="position:absolute;margin-left:auto;margin-right:auto;display:none;text-align:center;background-color:#000000;z-index:200;border:1px solid #4e443b;">

    <div id="prodinfo" style="position:relative;display:block;top:0;width:1000px;height:820px;background-color:#ffffff;margin-left:auto;margin-right:auto;">
    </div>

    <form name="prodcodeform">
    <input type="text" readonly="readonly" id="prodcodevar" name="prodcodevar" value="nil" >
    </form>

    <div ID="prodinfobutton" style="position:relative;">
    <input  style="position:relative;" type="button" class="button" id="closeprodinfo" title="Close" value="CLOSE" onclick="document.getElementById('prodcodevar').value='nil'; hideinfo(); ">
    </div>

    <input type="button" id="button001" value="ONE" onclick="document.getElementById('prodcodevar').value='item1'; getinfo();">

    <input type="button" id="button002" value="TWO" onclick="document.getElementById('prodcodevar').value='item2'; getinfo();">

</DIV>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:36:31.150

您正在切换到标准模式，因此您的浏览器不再玩与 Internet Explorer 4 兼容的游戏。

`prodcodeform.prodcodevar.value`将出错，因为`prodcodeform`未定义。

您不会为文档中具有 id 或 name 的每个元素获取一个全局变量。

改变：

```
<form name="prodcodeform"> 
```

至

```
<form id="prodcodeform" method="post" action="prodinfo.php"> 
```

...并在发布非 Ajax 请求时让它做一些理智的事情（将它移动到按钮周围，让它们提交按钮，如果 JS 成功则取消默认事件）。

然后加：

```
var prodcodeform = document.getElementById('prodcodeform'); 
```

在您尝试使用该变量之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:34:36.577

你开始你的身体，`</body>`而不是`<body>`。

# javascript - JSHint 不允许我在“for”循环中使用“forEach”

> ID：10451865
> 
> 赞同：12
> 
> 时间：2012-05-04T15:32:51.817
> 
> 标签：javascript, ecmascript-5, jshint

我有一个以数组为值的对象。

```
people = {
    'steve':['foo','bar'],
    'joe':['baz','boo']
} 
```

对于每个键，我想遍历相应数组中的值。很简单：

```
for ( var person in people ) {
    person.forEach( function(item) {
      console.log(item)
    })
} 
```

但是 JSHint 抱怨：

```
Don't make functions within a loop. 
```

这真的是我的代码的问题吗？我非常喜欢简短的 ES5 for 循环语法。我是否需要使用 ES3 样式或以其他方式更改我的代码？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T15:35:53.943

那里有两个问题，一个是 JSHint 警告你的，一个是更根本的问题。

JSHint 警告您的是，理论上，**每次**循环运行时，都会创建一个新函数。这会更好：

```
for ( var person in people ) {
    person.forEach(handlePerson);
}
function handlePerson(item) {
  console.log(item)
} 
```

我说“理论上”是因为虽然规范要求每次都创建一个新的函数*对象，但这并不意味着引擎不能重用函数的底层**实现*，也不意味着引擎不能重用如果您没有为它分配任何其他属性或保留对它的引用，则相同的函数对象。我[问了 V8 的人](https://stackoverflow.com/a/10160351/157247)（V8 是 Chrome 中的 JavaScript 引擎），他们说 Chrome 将“......在大多数情况下......”为在同一点创建的不同函数对象重用底层函数实现源代码，并且他们会“期望”大多数其他引擎也会这样做。

所以在这种特殊情况下，JSHint 可能有点过头了。但这通常是一个有用的警告，特别是如果您在循环内创建的函数引用了在循环期间内容发生变化的变量，这是人们犯的经典闭包错误。

但更根本的是，`person`是 a `String`（它是 中的属性名称`people`），并且`String`没有`forEach`. 你自找的：

```
for ( var person in people ) {
    people[person].forEach(handlePerson);
}
function handlePerson(item) {
  console.log(item)
} 
```

...例如，`people[person]`获取该键的数组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-04T17:38:29.033

除了其他评论者，如果您知道自己在做什么，您可以使用 JSHint 选项禁用此警告`loopfunc`：

```
/*jshint loopfunc:true */

for ( var person in people ) {
  person.forEach( function(item) {
    console.log(item)
  })
} 
```

您可以全局设置 JSHint 选项（如果您使用 NPM 模块）、每个文件或每个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:35:41.870

您可以`forEach`在循环内使用，但不允许在循环内声明函数。

```
function looper (item) {
  console.log(item)
}

for ( var person in people ) {
    person.forEach(looper)
} 
```

...否则您将为每次迭代重新创建相同的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:36:01.870

这不是 forEach，而是它抱怨的匿名函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T15:36:02.260

这是一个问题的原因是，`foreach`每次执行此操作时，它都会在堆中的调用内创建一个对匿名函数的新对象引用。如果您将函数分配给 for 循环之外的变量会更好，这样您就不会不必要地消耗内存

# scala - 如何向案例类添加特征？

> ID：10451872
> 
> 赞同：1
> 
> 时间：2012-05-04T15:33:41.833
> 
> 标签：scala, traits

我有一个看起来像这样的域模型：

```
case class Account(id: Int, name: String)

trait BalanceTotal {
  def balance: BigDecimal
} 
```

我的目标是拥有一个简单、轻量级的`Account`案例类，然后是一个`Account with BalanceTotal`仅在进行余额计算的方法内创建的增强类（这很昂贵）。

使用这种结构，我可以静态地确保当我只有一个轻量级对象时，我永远不会指望存在平衡。我当然知道`Option`，但我希望类型检查器阻止代码在我需要平衡丰富对象的地方使用轻量级对象，反之亦然，我认为这不会`Option`给我。

无论如何，我想做的是：

```
for{ Account(id,name) <- accounts } {
  yield Account(id, name) with BalanceTotal {
    override val balance = BigDecimal(44)
  }
} 
```

但这失败了：

```
';' expected but 'with' found 
```

如果我尝试使用`new Account`而不是`Account`，我得到：

```
super constructor arguments cannot reference unconstructed `this` 
```

我认为这与使案例类起作用的巫术有关。

有可能做我想做的事吗？

*更新*：进一步考虑，我想这与禁止案例类继承有关。但我确实需要这里的案例类魔法：我的 ScalaQuery 映射依赖于生成的`apply`和`unapply`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:40:59.703

它对我来说没问题：

```
>scala
Welcome to Scala version 2.9.1.final (Java HotSpot(TM) 64-Bit Server VM, Java 1.
7.0).
Type in expressions to have them evaluated.
Type :help for more information.

scala> :paste
// Entering paste mode (ctrl-D to finish)

case class Account(id: Int, name: String)

trait BalanceTotal {
  def balance: BigDecimal
}
val enrichedAccount = new Account(1, "foo") with BalanceTotal {
  override val balance = BigDecimal(44)
}

// Exiting paste mode, now interpreting.

defined class Account
defined trait BalanceTotal
enrichedAccount: Account with BalanceTotal = Account(1,foo) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:01:37.640

您的示例由于缺少`new`. `Account(id, name)`实际调用`Account.apply(id, name)`并且返回一个`Account`你不能调用的`with`. `new Account(id, name) with BalanceTotal`被翻译成一个匿名类，扩展`Account`名为`BalanceTotal`. 希望这有助于理解为什么您的代码不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T15:11:20.203

你的问题不在于结果，而在于产量。使用如下括号，它将起作用：

```
for ( Acount(id, name) <- accounts) yield 
  (new Account(id, name) with BalanceTotal { 
    override val balance = BigDecimal(42) 
  }) 
```

# mysql - UTF8_general_ci 排序规则需要几秒钟来处理

> ID：10451873
> 
> 赞同：0
> 
> 时间：2012-05-04T15:33:52.207
> 
> 标签：mysql, collation

我在整理 utf8_general_ci 中制作了一张表格。

```
CREATE TABLE `general` (
`one` varchar( 250 ) NOT NULL ,
`two` varchar( 250 ) NOT NULL ,
`time` varchar( 250 ) NOT NULL,); 
```

并在其中输入了 1000 条记录。

```
insert into general values('ankit','hamitte','13364783'),('john','will','13364783'); 
```

现在，当我选择记录并对它们进行排序时，它需要几秒钟，而当我使用 armscii_general_c1 时，它会立即加载。这是什么主要原因以及我应该使用哪种排序规则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:55:21.650

我猜你在多列索引中拥有所有三列？

如果是这样，那么使用 utf8，它们将不适合。MySQL 将不得不扫描行。MySQL 索引在 InnoDB 中限制为 767 字节（MyISAM 为 1000），并且索引是固定宽度的，因此 UTF8 索引的大小是单字节编码索引的三倍。

您只能使用 UTF8 将一列放入索引中。

因此，使用单字节编码，MySQL 可以充分利用索引，而使用多字节编码，MySQL 不能充分利用索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:49:11.543

请记住，UTF8 需要 2 倍以上的空间来保存 UTF8 字符。1 个 UTF8 字符将存储为 2 个描述它的字符。因此，比较 UTF8 字符串需要多花两倍的时间。上面的语句与 latin1 符号无关，因为它们将照常存储。

请发布完整的创建表语句。我可能认为问题出在索引中。只需运行 `show create table general` 并在此处发布输出。

BTW：排序对于数据库来说是非常耗时的操作，所以你必须使用索引来使其快速。

# text - 在 weka 中使用 LibSVM 进行 1 类分类的参数调整

> ID：10451879
> 
> 赞同：0
> 
> 时间：2012-05-04T15:34:20.710
> 
> 标签：text, classification, weka, svm, libsvm

我正在 Weka 中使用 LibSVM 包装器进行 1 类分类。但问题是在 TESTING 期间，即使我使用相同的 TRAINING 实例，我看到它们中的大多数都被归类为异常值 (NaN)，这是不合理的（这怎么会发生？）。如果这是处理参数调整的问题，我应该尝试调整哪些参数？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-07T01:56:16.380

分类器需要至少两个类值才能“工作”。如果您所拥有的只是带有一个标签值（您的一个类值）的标记数据，那么您需要获取不属于该类的数据，以便分类器可以运行。

# php - 创建 .cspkg 和 .cscfg 文件以上传到 Azure

> ID：10451888
> 
> 赞同：0
> 
> 时间：2012-05-04T15:34:59.217
> 
> 标签：php, upload, azure

我在这里打开了更多主题来解决我的上传问题，但仍然没有（不是答案，这些很有帮助）所以我认为问题出在我身上！

所以我写了一个小 php 程序，但是在我创建 .cspkg 和 .cscfg 文件并将其上传到 Azure 之后，我得到了错误。在本地主机上一切都很好。我决定重新安装我所有的电脑和sdk，但它需要很长时间，所以我请你帮个忙！

我将我的 php 文件发送给您，然后您创建 .cspkg 和 .cscfg 文件，然后将其上传到我的 azure 帐户，如果没问题，我可以确保该错误对我有保证...

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:41:43.033

我不确定您的情况如何，但是我想为您提供在 Azure 中使用 PHP 的正确方法：

第 1 步：请花一些时间研究 Azure 互操作性团队如何在此处为 Azure 提供 PHP SDK：http: [//azurephp.interoperabilitybridges.com/articles/setup-the-windows-azure-sdk-for-php](http://azurephp.interoperabilitybridges.com/articles/setup-the-windows-azure-sdk-for-php)

第 2 步：请下载适用于 Windows Azure 的 PHP SDK：http: [//phpazure.codeplex.com/releases/view/78020](http://phpazure.codeplex.com/releases/view/78020)

第三步：访问SDK相关文档： http: [//phpazure.codeplex.com/documentation](http://phpazure.codeplex.com/documentation)

以上信息将指导您完成如何使其工作。如果您仍需要有关 PHP 问题的帮助，请使用以下链接向 Windows Azure 支持团队发起事件以获得专家 1:1 帮助： [https ://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect= 1&sd=gn](https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn)

[补充] 如果您点击下面的链接，在第 4 步中，您将获得使用您的应用项目文件夹详细信息创建 ServiceDefinition.csdef 的脚本：http: [//azurephp.interoperabilitybridges.com/articles/packaging-applications](http://azurephp.interoperabilitybridges.com/articles/packaging-applications)

一旦您按照上述链接设置了项目文件夹并拥有 ServiceDefinition.csdef，您就可以完成第 5 步来生成 ServiceConfiguration.cscfg。

# c# - 绑定组合框

> ID：10451892
> 
> 赞同：0
> 
> 时间：2012-05-04T15:35:10.870
> 
> 标签：c#, asp.net, silverlight

我已经对此进行了搜索，但是我相信我想要实现一些稍微不同的东西。

我有一个组合框，它设置为静态包含 3 个项目，例如 Person1、Person2、Person3。

然后我有一个对象，例如名为 Person。这个对象将包含一个名为 PersonType 的属性，它可能是 Person3。我想要做的是将该 Person 对象绑定到组合框，并且在加载时，组合框应突出显示 person3 作为所选项目。请问我该怎么做？我希望它像我的其他控件一样被双向绑定。

```
 public class Person : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string _PersonType;

    public string PersonType
    {
        get { return _PersonType; }
        set
        {
            _Description = value;
            NotifyPropertyChanged("PersonType");
        }
    }

    public void NotifyPropertyChanged(string name)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(name));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:41:32.923

以下应该有效：

```
ddlPerson.SelectedItem = objPerson.PersonType; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:51:59.757

以下代码应该可以实现您的目标。我在我的机器上运行它并且它工作。

```
 private void BindPerson()
    {
        Person p2 = new Person();
        p2.PersonType = "Person2";
        Person p3 = new Person();
        p3.PersonType = "Person3";

        ListItem person2ListItem = new ListItem();
        person2.Text = p2.PersonType;
        person2.Value = p2.PersonType;
        listBox.Items.Add(person2ListItem);

        ListItem person3ListItem = new ListItem();
        person3.Text = p3.PersonType;
        person3.Value = p3.PersonType;
        person3.Selected = true; // This will make it selected
        listBox.Items.Add(person3ListItem);
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindPerson();
        }
    } 
```

# javascript - javascript - 创建简单的动态数组

> ID：10451893
> 
> 赞同：41
> 
> 时间：2012-05-04T15:35:12.010
> 
> 标签：javascript

动态创建这个简单数组的最有效方法是什么。

```
var arr = [ "1", "2", "3", "4", "5", "6", "7", "8", "9", "10"]; 
```

假设我们可以从变量中获取数字 10

```
var mynumber = 10; 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-05-04T15:38:10.273

```
var arr = [];
for(var i=1; i<=mynumber; i++) {
   arr.push(i.toString());
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-09-25T17:29:26.713

使用[ES2015](http://www.ecma-international.org/ecma-262/6.0/)，这可以使用如下方法在单个表达式中简洁地实现`Array.from`：

```
Array.from({ length: 10 }, (_, idx) => `${++idx}`) 
```

的第一个参数`from`是一个类似数组的对象，它提供了一个长度属性。第二个参数是一个 map 函数，它允许我们`undefined`根据您的要求将默认值替换为调整后的索引值。[在此处](http://www.ecma-international.org/ecma-262/6.0/#sec-array.from)查看规范

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-04T17:57:52.467

> **更新：**像这样的微优化是不值得的，这些天引擎非常聪明，我建议在 2020 年简单地使用`var arr = [];`.

这是我的做法：

```
var mynumber = 10;
var arr = new Array(mynumber);

for (var i = 0; i < mynumber; i++) {
    arr[i] = (i + 1).toString();
} 
```

我的回答对每个人来说都差不多，但请注意我做了一些不同的事情：

*   如果您指定数组长度并且不要每次都强制它扩展它会更好

所以我创建了数组`new Array(mynumber);`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-31T17:23:28.733

这个答案是关于“如何动态创建一个**没有循环**的数组”。

文字运算符`[]`不允许我们动态创建，所以让我们看一下`Array`，它是构造函数，它是方法。

在 ES2015 Array 中有 method `.from()`，它可以很容易地让我们创建动态 Array：

```
Array.from({length: 10}) // -> [undefined, undefined, undefined, ... ] 
```

当 Array 的构造函数接收数字作为第一个参数时，它会创建一个具有该数字大小的 Array，但它不可迭代，因此我们不能使用`.map()`等`.filter()`：

```
new Array(10) // -> [empty × 10] 
```

但如果我们传递多个参数，我们将从所有参数接收数组：

```
new Array(1,2,3) // -> [1,2,3] 
```

如果我们使用 ES2015，我们可以使用扩展运算符，它将空数组传播到另一个数组中，所以我们将得到可迭代的数组：

```
[...new Array(10)]  // -> [undefined, undefined, undefined, ...] 
```

但是如果我们不使用 ES2015 并且没有 polyfills，那么在 ES5 中还有一种方法可以创建没有循环的动态 Array。如果我们考虑`.apply()`方法：它将第二个参数数组传播到参数。所以在 Array 的构造函数上调用 apply 就可以了：

```
Array.apply(null, new Array(10))  // -> [undefined, undefined, undefined, ...] 
```

在我们有了动态可迭代数组之后，我们可以使用 map 来分配动态值：

```
Array.apply(null, new Array(10)).map(function(el, i) {return ++i + ""})

// ["1","2","3", ...] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-04T15:38:03.290

听起来您只想构造一个包含整数值的字符串版本的数组。一个简单的方法：

```
var arr = [];
for (var i = 1; i <= mynumber; i++) arr.push(""+i); 
```

对于更有趣的版本，你可以做一个生成器......

```
function tail(i, maxval) {
    return [i].concat(i < maxval ? tail(i+1, maxval) : []);
}

var arr = tail(1, mynumber); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-04T15:38:35.037

```
var arr = [];
while(mynumber--) {
    arr[mynumber] = String(mynumber+1);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-12T14:38:49.950

我会这样做；

```
var num = 10,
  dynar = [...Array(num)].map((_,i) => ++i+"");
console.log(dynar);
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-04T15:39:43.543

误读问题，更正。尝试：

```
var myNumber = 100,
    myarr = (function arr(i){return i ? arr(i-1).concat(i) : [i]}(myNumber)); 
```

只是为了好玩，如果你`Array`像这样扩展：

```
Array.prototype.mapx = function(callback){
  return String(this).split(',').map(callback);
} 
```

你可以使用：

```
var myNum = 100, 
    myarr = new Array(myNum).mapx(function(el,i){return i+1;}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-04T17:33:33.730

```
var arr = [];
for(var i=1; i<=mynumber; i++) {
   arr.push("" + i);
} 
```

[根据JSPerf](http://jsperf.com/initialize-array-of-string)的说法，这在 Chrome 中似乎更快，但请注意，这完全依赖于浏览器。

您可以更改有关此代码段的 4 件事：

1.  使用`for`或`while`。
2.  使用前向或后向循环（在开始时向后创建稀疏数组）
3.  通过索引使用`push`或直接访问。
4.  使用隐式字符串化或显式调用`toString`.

在每个浏览器中，总速度将取决于此列表中每个项目的每个选项在该特定浏览器中的执行情况。

TL;DR：尝试对这个特定部分进行微优化可能不是一个好主意。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-28T17:17:56.353

我有一个类似的问题，我找到的解决方案（忘记了我在哪里找到的）是这样的：

`Array.from(Array(mynumber), (val, index) => index + 1)`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-26T13:53:43.883

这个游戏有点晚了，但是现在你可以用 ES6 做一些很酷的事情。

您现在可以在一行代码中用随机数填充动态长度数组！

```
[...Array(10).keys()].map(() => Math.floor(Math.random() * 100)) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-04T15:39:38.310

如果您询问是否有内置的类似 Pythonic`range`的函数，则没有。你必须以蛮力的方式来做。也许[你](http://code.google.com/p/rangy/)会感兴趣。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-27T18:04:06.237

我希望你必须从数组变量中获取最后一个元素，所以我的解决方案

```
var arr = [ "1", "2", "3", "4", "5", "6", "7", "8", "9", "10"];
var mynumber = arr [arr .length - 1];
//var mynumber = 10; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-05-25T07:01:48.103

> **我们中的一些人指的[是](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)性能不佳的使用：**

```
function getArrayViaFrom(input) {
  console.time('Execution Time');
  let output = Array.from(Array(input), (value, i) => (i + 1).toString())
  console.timeEnd('Execution Time');

  return output;
}

function getArrayViaFor(input) {
  console.time('Execution Time 1');
  var output = [];
  for (var i = 1; i <= input; i++) {
    output.push(i.toString());
  }
  console.timeEnd('Execution Time 1');

  return output;
}

console.log(getArrayViaFrom(10)) // Takes 10x more than for that is 0.220ms
console.log(getArrayViaFor(10))  // Takes 10x less than From that is 0.020ms
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-06-03T05:54:40.200

# 更新 = > 2020 年 6 月

## 如果您使用的是节点 js，您可以使用“，”运算符创建或附加一个字符串值，然后在循环内您可以

```
for (var j = 0; j <= data.legth -1; j++) {
                    lang += data.lang  +", " ;

                }

 var langs = lang.split(',')
 console.log("Languages =>",  lang, typeof(lang), typeof(langs), langs) 
 console.log(lang[0]) // here access arrary by index value 
```

你可以看到字符串和对象的类型

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-10-24T20:58:12.150

由于以前的答案都没有提供解决方案`repeat`Here you go：
要生成包含十个数字的动态数组`repeat`：

```
[...'x'.repeat(10).split('').keys()]
// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

要得到你想要的：

> `var arr = [ "1", "2", "3", "4", "5", "6", "7", "8", "9", "10"];`

只需向所有元素键添加一*（因为数组是从零开始的）并通过**字符串文字*将数字转换为字符串，或者`.toString()`甚至只是将空格添加到 number `''+x`。

```
let mynumber = 10;

const keys = [...'x'.repeat(mynumber).split('').keys()]
const arr = keys.map(x=>`${x+1}`);
//['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'] 
```

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2012-05-04T15:44:18.330

与您要动态填充的所有数组的方式相同。一个 for 循环。Suedo 代码是

```
arr =array()
for(i; i<max; i++){
 arr[]=i

} 
```

那应该可以帮助您

# java - 如何在java中以一般方式重命名文件？

> ID：10451900
> 
> 赞同：0
> 
> 时间：2012-05-04T15:35:36.777
> 
> 标签：java, windows, escaping, rename

我有两个文件对象`oldFile`，`newFile`我想交换相应的文件名。所以我先*改名* 。我得到 oldFile 的绝对路径并为其附加“.bak”：`oldFile``tmpFile`

```
String tmpFile = oldFile.getAbsolutePath().toString()+".bak";
oldFile.renameTo(new File(tmpFile)); 
```

问题是 tmpFile 包含路径的原始字符串，而`File`类的构造函数将 '\' 视为转义。因此 tmpFile 可能是**"D:\oldfile.java.bak"**，但是构造函数需要的是

```
new File("D:\\oldfile.java.bak"); 
```

我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:39:10.153

File 的构造函数不`\`视为转义。您需要`\`在`\`字符串**文字**中转义。字符串文字`"\\"`包含一个字符：`'\'`.

```
String path = "D:\\oldFile";
System.out.println(path); // prints D:\oldFile
File f = new File(path);
System.out.println(f.getAbsolutePath()); // prints D:\oldFile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:37:11.293

你必须逃避转义，`.replace("\", "\\")`但如果你必须这样做，然后意识到你不必`\`在 Windows 上使用。Java 支持`/`一样好，它没有这些问题。你可以这样做`replace("\", "/")`，它也同样有效。

您还需要阅读并了解如何在 Java 中创建新文件。[`File.createNewFile()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createNewFile%28%29)需要调用。仅`File`使用构造函数创建对象并不会实际在文件系统上创建文件，也不能保证该位置的文件存在。

# android - 复选框 - 使按钮居中

> ID：10451901
> 
> 赞同：1
> 
> 时间：2012-05-04T15:35:38.010
> 
> 标签：android

我正在尝试制作一个自定义 ChedckBox 并且无法将其按钮部分居中。这是代码：

```
<FrameLayout
    android:layout_width="@dimen/checkbox_height"
        android:layout_height="@dimen/checkbox_height"
        android:background="@drawable/checkbox_background_info"
        android:padding="5dp" >

        <CheckBox
            android:id="@+id/classification_uk_selected"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:button="@drawable/checkbox_star_info">

        </CheckBox>

</FrameLayout> 
```

Drawbale 只有一个没有背景的黄色星形表示启用，灰色一个表示禁用。它停留在左侧，我无法使其居中

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:37:57.447

如果将 FrameLayout 更改为 RelativeLayout，则只需将 android:center_in_parent 设置为 true；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:14:28.043

我不相信这是可能的（至少在 API 版本 8 中没有）

这是来自 CompoundButton.onDraw 的代码，这似乎表明 CompoundButton 在父视图中偏移为 0 的边界矩形内绘制 buttonDrawable（代表您的复选框图像）。

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    final Drawable buttonDrawable = mButtonDrawable;
    if (buttonDrawable != null) {
        final int verticalGravity = getGravity() & Gravity.VERTICAL_GRAVITY_MASK;
        final int height = buttonDrawable.getIntrinsicHeight();

        int y = 0;

        switch (verticalGravity) {
            case Gravity.BOTTOM:
                y = getHeight() - height;
                break;
            case Gravity.CENTER_VERTICAL:
                y = (getHeight() - height) / 2;
                break;
        }

        buttonDrawable.setBounds(0, y, buttonDrawable.getIntrinsicWidth(), y + height);
        buttonDrawable.draw(canvas);
    }
} 
```

相反，请尝试将 CheckBox 的宽度设置为比您正在使用的图像的大小稍大（以 dp 为单位）。这会挤压可绘制按钮，并且不会在右侧呈现所有空白区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:44:49.290

在您的框架布局中，将重力设置为中心。机器人：重力=“中心”

# javascript - 主干 javascript setTimeOut 方法

> ID：10451916
> 
> 赞同：0
> 
> 时间：2012-05-04T15:36:35.980
> 
> 标签：javascript, ajax, json, backbone.js, settimeout

我对调用函数 self 并设置延迟的方法 setTimeOut 有问题，应该在每个请求完成后一次又一次地调用该函数，但它只运行一次。它在不使用backbone.js 的情况下工作，不知道它在与backbone.js 集成后不起作用。任何帮助表示赞赏！

所以这是客户端中的一个函数，它运行 GET 请求从服务器获取数据，请求按时间间隔运行（由服务器决定），一旦数据进入，客户端获取它，然后请求再次运行。

```
 getRequest:function() {
        var XHR = $.ajax({
            url: '/nextdocument',
            type: 'GET',
            async: true,
            cache: false,
            timeout: 11000, 
            success:function(data) {
                var name = data.description;
                var price = data.price;
                console.log("read--> " + name + price);
                setTimeout("this.getRequest", 1000);
                if (data.ok == "true") {
                    data["ok"] = data.ok;
                    $.ajax(
                        {
                            url: "/customerdone",
                            data: JSON.stringify(data),
                            processData: false,
                            type: 'POST',
                            contentType: 'application/json'
                        }
                    )
                }else{
                    //no document if no read in
                    console.log("error--> " + data.errorMessage)
                }
            }
        })
        return XHR;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:16:13.283

问题是您在`setTimeout`通话中使用了“this”。您不能这样做，因为当计时器执行您尝试引用的函数时，“this”将成为全局对象。

就像其他人建议的那样，您需要将实际函数传递给您的计时器，而不是字符串。然后你可以从你想要的任何对象中引用任何函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:50:10.047

可能没有调用函数 getRequest 。据我所知，这是因为您正在向 setTimeout 函数发送一个字符串——“this.getRequest”。根据经验，永远不要将字符串传递给 this，传递函数。虽然，在某些情况下它可能完全没问题（无论如何我都不会推荐它），但这里的“this”可能会造成麻烦。使用这样的东西：

```
getRequest:function() {
    var fn = arguments.callee;
    var XHR = $.ajax({
        url: '/nextdocument',
        type: 'GET',
        async: true,
        cache: false,
        timeout: 11000, 
        success:function(data) {
            var name = data.description;
            var price = data.price;
            console.log("read--> " + name + price);
            setTimeout(fn, 1000);
            if (data.ok == "true") {
                data["ok"] = data.ok;
                $.ajax(
                    {
                        url: "/customerdone",
                        data: JSON.stringify(data),
                        processData: false,
                        type: 'POST',
                        contentType: 'application/json'
                    }
                )
            }else{
                //no document if no read in
                console.log("error--> " + data.errorMessage)
            }
        }
    })
    return XHR;
} 
```

# ruby - 将 Parse iOS SDK 与 RubyMotion 一起使用

> ID：10451929
> 
> 赞同：7
> 
> 时间：2012-05-04T15:37:05.493
> 
> 标签：ruby, xcode, parse-platform, rubymotion

RubyMotion 提供了这些关于供应 3rd 方代码的说明：[http ://www.rubymotion.com/developer-center/guides/project-management/#_files_dependencies](http://www.rubymotion.com/developer-center/guides/project-management/#_files_dependencies)

我正在尝试添加 Parse.com 的 iOS SDK。这些是将其添加到 XCode 项目的说明：[https](https://parse.com/apps/quickstart#ios/existing) ://parse.com/apps/quickstart#ios/existing 。但是，我没有使用 XCode，因为我正在使用 RubyMotion。

我在这里记录了我的尝试：[https ://github.com/adelevie/RubyMotionSamples/commit/603bf4428995bb203cce7e7e8e6989d6e86bda3b](https://github.com/adelevie/RubyMotionSamples/commit/603bf4428995bb203cce7e7e8e6989d6e86bda3b)

这是我得到的错误：[https ://gist.github.com/2595284](https://gist.github.com/2595284)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T18:03:36.717

我相信我们实际上在这里处理的是一个静态库，所以我相信您应该指定 :static 而不是 :Xcode 作为第二个选项。

使用 Rakefile 中的以下代码，应用程序编译：

```
 app.libs << '/usr/lib/libz.1.1.3.dylib'
    app.frameworks += [
        'AudioToolbox',
        'CFNetwork',
        'SystemConfiguration',
        'MobileCoreServices',
        'Security',
        'QuartzCore']

    app.vendor_project('vendor/Parse.framework', :static,
        :products => ['Parse'],
        :headers_dir => 'Heiders') 
```

但是，我在运行 Parse setApplicationId 方法时遇到以下错误：

```
(main)>> Objective-C stub for message `setApplicationId:clientKey:' type `v@:@@' not precompiled. Make sure you properly link with the framework or library that defines this message. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:43:47.950

链接的文档说：“要在 RubyMotion 项目中提供第 3 方库，源代码必须在文件系统的某个位置可用。” 所以我不认为将 .framework 文件放在那里会起作用。

您可以尝试从 parse.com/docs 下载名为“Blank Xcode w/ SDK”的 ParseStartProject。如果您提供该项目文件夹，RubyMotion 将能够找到它正在寻找的 xcode 项目。当然，您需要从 xcode 项目中删除 .m 和 .h 文件，因为您只希望项目包含 Parse.framework。

我还没有真正尝试过这个。如果你让它工作，请告诉我们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:28:42.780

好的，这是从 RubyMotion 组的答案中复制的。它似乎修复了存根错误消息：

现在，为了完成这项工作，我修改了 /Library/RubyMotion/lib/motion/project/vendor.rb 并将第 38 行的 Dir.glob 更改为：

```
source_files = (opts.delete(:source_files) or Dir.glob('*. 
{c,m,cpp,cxx,mm,h}')) 
```

到：

```
source_files = (opts.delete(:source_files) or Dir.glob('**/*. 
{c,m,cpp,cxx,mm,h}')) 
```

[http://groups.google.com/group/rubymotion/msg/0efa74214523d0f5](http://groups.google.com/group/rubymotion/msg/0efa74214523d0f5)

# javascript - jQgrid dblclick 单元格更新过滤器工具栏

> ID：10451931
> 
> 赞同：1
> 
> 时间：2012-05-04T15:37:14.207
> 
> 标签：javascript, jquery, jqgrid

我正在使用**jQgrid**创建一个应用程序，并且我正在寻找`filterToolbar`用户双击单元格时填充的任何想法。

更准确地说，当用户双击单元格时，我希望单元格值填充`filterToolbar`在相应的列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:51:23.913

在 JQGrid [ondblClickRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)事件中，您将拥有 iCol 值，它是在该行中单击的单元格的索引。使用该索引并查看行，您可以获得列的名称和单元格的值。然后过滤器框的 id 为**gs_columnname**，因此使用 jquery 您可以将值注入到相应的列过滤器中。

```
ondblClickRow: function(rowid,iRow,iCol,e){
    var cm = $("#gridid").jqGrid("getGridParam", "colModel");
    var colName = cm[iCol]["name"];
    var cellvalue = $("#gridid").jqGrid("getCell", rowid, iCol);
    $('#gs_' + colName).val(cellvalue);
}, 
```

# xcode - iOS 从 xCode 中的 TextView 获取值

> ID：10451932
> 
> 赞同：0
> 
> 时间：2012-05-04T15:37:22.167
> 
> 标签：xcode

我正在尝试编写一个主详细信息应用程序，并且我有一个 TextView，并且用户在 TextView 中输入的任何内容都将成为新项目。但是，每当我按下添加按钮时，程序就会因错误而崩溃：对象不能为零

这是我的代码：

```
@interface MasterViewController () {
   NSMuteableArray *_objects;
   IBOutlet UITextView *text;
} 
```

在插入新对象方法中，我有这个：

```
[_objects insertObject:text.text atIndex:0]; 
```

我需要以某种方式将它连接到我的实际 TextView 吗？

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:42:40.793

两件事情：

*   确保您确实将该插座连接到 TextView
*   确保你在某处分配了 NSMutableArray

    _objects = [[MSMutableArray alloc] init];

# ios - Lion - Xcode 4.3.2 sqlite“没有这样的表”

> ID：10451933
> 
> 赞同：0
> 
> 时间：2012-05-04T15:37:39.040
> 
> 标签：ios, sqlite, xcode4.2, osx-lion, xcode4.3

我在我的 iOS 项目中遇到了 sqlite 的问题。我的配置：

*   狮子
*   Xcode 4.3.2 - iOS 5.1
*   sqlite3 数据库包含一个名为“test”的表

当我在设备上安装我的应用程序时，我在控制台中收到此错误消息“没有这样的表测试”。但这张桌子肯定存在。

奇怪的是：如果我在另一台 Mac 上使用以下配置创建相同的项目（相同），则该应用程序可以完美运行：

*   雪豹
*   Xcode 4.2 - iOS 5.0
*   sqlite3 数据库包含一个名为“test”的表

此外，如果我在第二个配置（Snow Leopard - Xcode 4.2）的第二个 Mac 上安装由第一个配置（Lion - Xcode 4.3.2）创建的项目，该应用程序仍然无法运行。

相反，如果我在第一个配置（Lion - Xcode 4.3.2）的 Mac 上安装由第二个配置（Snow Leopard - Xcode 4.2）创建的项目，则该应用程序可以工作。

这个问题快把我逼疯了！有人有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T17:59:40.927

确保将 sqlite 数据库文件添加到目标设置的`Copy Bundle Resources`列表中`Build Phases`。许多 sqlite 连接器具有检查数据库文件的功能，如果不存在，它们会即时创建它。因此，您在访问它时不会出错，但其中也没有数据。

# c# - f# 控制台应用程序不起作用。c# 控制台应用程序确实

> ID：10451934
> 
> 赞同：3
> 
> 时间：2012-05-04T15:37:48.160
> 
> 标签：c#, f#, console

我正在尝试将一个简单的 f# 控制台应用程序部署到同事的计算机上，但它一直失败。双击应用程序图标后，会出现控制台窗口，但随后会出现 Microsoft 错误报告窗口，询问我是否要发送错误报告，我拒绝，然后控制台窗口中会闪烁一些文本。它看起来像一条错误消息，但窗口关闭得太快，无法分辨。奇怪的是，如果我创建一个类似的 C# 应用程序，它就可以工作。我的目标是发布模式下的 .net 4 客户端框架。

这是代码

f# 代码（不起作用）：

```
open System

printfn "print test"
Console.ReadLine() |> ignore 
```

c# 代码（确实有效）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestCApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Testing...");
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T15:54:45.553

您的 C# 代码段的 F# 模拟不是您的 F# 代码，而是以下代码：

```
System.Console.WriteLine "print test"
System.Console.ReadLine() |> ignore 
```

虽然上面 2-liner 的应用程序将运行，类似于 C# 片段中的一个，只是在原始 .NET 上，`printfn`在 F# 代码中使用函数需要在目标计算机上部署某些特定于 F# 的核心组件，这可能不是案子。后者解释了观察到的行为。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T16:10:18.963

查看您的 F# 项目的引用，您将看到 FSharp.Core 通常位于此处：

C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\2.0\Runtime\v4.0\FSharp.Core.dll

在 Windows 7（64 位）PC 上

另请查看 F# 站点以获取运行时下载。

[http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/release.aspx](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/release.aspx)

编辑：这是运行时下载的直接链接（感谢 ildjarn）：

[http://www.microsoft.com/en-us/download/details.aspx?id=13450](http://www.microsoft.com/en-us/download/details.aspx?id=13450)

# c++ - 如何在 C++ 中将 RSA* 打印为字符串？

> ID：10451936
> 
> 赞同：5
> 
> 时间：2012-05-04T15:37:57.140
> 
> 标签：c++, xcode, rsa

如何在 C++ 中正确地将 RSA* 打印为字符串？

我正在使用`OpenSSL`. 好像没有`.c_str()`方法吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-05T12:55:51.867

```
#include <iostream>
using std::cout;
using std::endl;

#include <string>
using std::string;

#include <memory>
using std::unique_ptr;

#include <openssl/bn.h>
#include <openssl/rsa.h>
#include <openssl/bio.h>
#include <openssl/buffer.h>  

#include <cassert>
#define ASSERT assert

using BN_ptr = std::unique_ptr<BIGNUM, decltype(&::BN_free)>;
using RSA_ptr = std::unique_ptr<RSA, decltype(&::RSA_free)>;
using BIO_MEM_ptr = std::unique_ptr<BIO, decltype(&::BIO_free)>;

int main(int argc, char* argv[])
{
    int rc;

    RSA_ptr rsa(RSA_new(), ::RSA_free);
    BN_ptr bn(BN_new(), ::BN_free);
    BIO_MEM_ptr bio(BIO_new(BIO_s_mem()), ::BIO_free);

    rc = BN_set_word(bn.get(), RSA_F4);
    ASSERT(rc == 1);

    rc = RSA_generate_key_ex(rsa.get(), 2048, bn.get(), NULL);
    ASSERT(rc == 1);

    rc = RSA_print(bio.get(), rsa.get(), 0);
    ASSERT(rc == 1);

    BUF_MEM* mem = NULL;
    BIO_get_mem_ptr(bio.get(), &mem);
    ASSERT(mem != NULL);

    string s;
    if(mem->data && mem->length)
        s.assign(mem->data, mem->length);

    if(s.length())
        cout << s << endl;
    else
        cout << "Failed to retrieve key" << endl;

    return 0;
} 
```

典型的运行：

```
$ ./test-openssl.exe
Private-Key: (1024 bit)
modulus:
    00:9e:44:ab:26:da:2d:42:3f:ea:06:1f:3b:80:22:
    39:0f:89:ee:38:ba:f9:49:a6:7d:69:be:f7:b8:43:
    30:db:7b:32:82:09:89:c4:84:43:af:75:33:22:40:
    07:ad:43:c8:56:54:f3:c5:6e:a5:bc:a6:b2:83:49:
    a4:07:8e:d3:b8:a1:5b:c9:55:04:0a:01:73:12:85:
    93:ef:20:0b:29:2e:a8:2d:4f:4a:1d:ad:31:b8:81:
    dd:57:49:3c:d1:57:71:29:c3:34:1c:cf:ba:31:86:
    cb:d6:d7:92:b9:3c:84:ca:2e:f6:fa:85:0a:86:e4:
    b1:e0:1e:00:86:d9:c6:14:37
publicExponent: 65537 (0x10001)
privateExponent:
    5e:1d:7f:99:af:0c:52:e5:27:09:54:f1:51:15:08:
    d1:90:b8:34:cc:1b:0a:0d:13:6f:1a:bc:bc:ba:58:
    07:6c:8f:70:7c:b3:8c:45:0a:ea:ff:ca:d4:87:37:
    09:75:d1:60:65:4c:41:0f:b7:47:23:e9:eb:e0:92:
    c6:5b:cc:d2:82:d5:f3:42:75:d4:88:95:35:20:62:
    f9:9a:18:df:6b:5b:ff:6c:97:11:63:d6:24:2c:86:
    bb:be:c1:ed:a3:87:8e:78:70:7a:c8:fc:73:9c:53:
    70:eb:ff:06:b9:91:be:81:56:a5:25:71:d3:54:09:
    04:ea:8d:1e:8e:48:eb:c1
prime1:
    00:cc:25:66:b7:dc:66:64:eb:5c:f2:15:9f:7b:66:
    c0:9e:8d:51:63:e0:8b:15:73:64:54:d2:62:35:a6:
    14:29:20:ba:92:3e:dc:d4:32:6a:c6:ba:45:56:94:
    3e:77:e1:ab:e0:60:cf:12:2b:09:1f:45:0e:2c:b2:
    49:1e:85:66:ef
prime2:
    00:c6:78:0f:44:19:cc:74:22:32:58:d1:ee:a7:6f:
    fa:b4:57:a4:4a:7c:7a:52:53:c8:52:48:34:05:b4:
    59:3f:18:a3:88:17:fd:ae:2e:54:d7:83:2c:a9:bf:
    52:7b:f4:e9:af:02:61:99:fa:35:4a:b0:e4:a0:8c:
    5f:f8:d8:67:39
exponent1:
    00:a3:41:7d:c5:a7:72:13:5e:cd:b3:a3:6b:28:ca:
    61:5b:ea:73:9e:45:e1:b4:43:d5:86:a7:c0:76:5a:
    dc:60:8f:95:e4:82:75:23:15:36:a2:ba:2f:dd:2f:
    2c:4d:be:a1:2f:0c:fc:4b:f1:32:98:59:27:1e:c3:
    6d:0a:05:70:ed
exponent2:
    00:97:d5:de:08:01:9c:b2:f4:3e:84:49:07:45:bd:
    9b:95:40:bf:85:e4:b9:48:26:a4:c8:9e:48:7e:5c:
    bd:32:52:4d:39:9e:f1:0a:c2:93:51:d5:1e:e4:36:
    64:8a:44:92:4a:bb:8d:a3:d9:11:d0:34:88:94:73:
    10:31:36:8d:b1
coefficient:
    1d:97:1c:37:72:66:87:6f:a8:10:5d:bf:02:31:3d:
    69:bb:a8:13:78:cb:20:d7:70:ee:f9:ba:1e:a9:e1:
    ca:5b:db:a8:12:64:39:32:4f:0b:b8:0e:0f:fc:2c:
    ec:89:25:06:bf:84:d7:94:e5:18:bd:80:f4:74:ba:
    5e:0a:4c:24 
```

* * *

如果您不喜欢该输出，则可以`RSA`直接访问成员。例如：

```
// RSA object 'owns' the BIGNUM. Don't destroy it.
BIGNUM* n = rsa.get()->n;
BIGNUM* e = rsa.get()->e;
BIGNUM* d = rsa.get()->d;

string s;

BIO_reset(bio.get());
mem = NULL;

rc = BN_print(bio.get(), n);
ASSERT(rc == 1);

BIO_get_mem_ptr(bio.get(), &mem);
if(mem && mem->data && mem->length)
    s.assign(mem->data, mem->length);

if(s.length())
    cout << "Modulus: " << endl << s << endl;
else
    cout << "Failed to retrieve modulus" << endl;

BIO_reset(bio.get());
mem = NULL;

rc = BN_print(bio.get(), e);
ASSERT(rc == 1);

BIO_get_mem_ptr(bio.get(), &mem);
if(mem && mem->data && mem->length)
    s.assign(mem->data, mem->length);

if(s.length())
    cout << "Public exponent: " << endl << s << endl;
else
    cout << "Failed to retrieve public exponent" << endl;

BIO_reset(bio.get());
mem = NULL;

rc = BN_print(bio.get(), d);
ASSERT(rc == 1);

BIO_get_mem_ptr(bio.get(), &mem);
if(mem && mem->data && mem->length)
    s.assign(mem->data, mem->length);

if(s.length())
    cout << "Private exponent: " << endl << s << endl;
else
    cout << "Failed to retrieve private exponent" << endl; 
```

输出将类似于：

```
Modulus: 
E00226E63C7BE6A23990592F3F861393B1F563D7CF57699619E6ED558EFA6D64C326203825E163EF
28B7B3608C68B8A9F1A5952FA8E4C42A4F6066BE6D1502D20894577C91DB94F6F596891DCF9532E2
19FBAEA1201215E014DEE8A270BEABDFC7D00860BF3C08A26707CADAECCF9A2229984C23F198691E
B59D26D4AC8460BD
Public exponent: 
10001
Private exponent: 
3D3E99600D5D5ABB33BDD184677BC2D278AF3CB2FE4F49E0EE08030F875DD496DDFC08871164442C
591790856F1E1A8EEC30774F667FD55A34058951BB052995BC24A80AAA547E1764FB33500007A743
C9B41F376F655EB8BDD729172F8592886C299994565F9F72A0235CBB22AA33BD1A2D20AF07DCBAC5
6DB22E4DCBC4DCC1 
```

* * *

如果您喜欢第一个示例的格式（用冒号分隔的八位字节），请查看`ASN1_bn_print`. 您可以使用它`RSA`依次打印成员。`RSA_print`并`RSA_print_fp`在内部调用`ASN1_bn_print`. 在 c 中的 OpenSSL 命令中有一个示例，可以在[RSA 中获取公钥的模数](https://stackoverflow.com/questions/23176439/openssl-command-in-c-to-get-modulus-of-a-public-key-in-the-rsa)。

```
BIGNUM* n = rsa.get()->n;

int req = BN_num_bytes(n) + 4;
unsigned char* ptr = (unsigned char*)OPENSSL_malloc(req);

rc = ASN1_bn_print(bio.get(), "Modulus:", n, ptr, 0);
ASSERT(rc == 1);

BIO_get_mem_ptr(bio.get(), &mem);
if(mem && mem->data && mem->length)
    s.assign(mem->data, mem->length);

if(s.length())
    cout << s << endl;
else
    cout << "Failed to retrieve modulus" << endl; 
```

它将产生类似于以下的输出：

```
Modulus:
    00:bf:49:fa:f2:30:21:42:de:91:60:f3:02:37:87:
    86:f4:eb:85:2c:95:86:42:69:6f:bc:cf:3f:27:9e:
    17:b6:44:06:5f:e7:ea:9f:e8:38:a7:5a:d5:da:9f:
    4b:26:df:78:15:d7:df:22:c0:16:12:77:f9:18:aa:
    85:01:21:3a:b0:ae:39:b8:07:cd:d4:2c:a3:0b:1c:
    df:be:09:03:09:76:5f:a1:1e:c0:00:8e:bf:b2:40:
    e2:3c:eb:d1:85:6f:7a:ab:35:c3:3a:c4:23:db:39:
    0c:d0:2b:39:b3:a5:a5:08:a2:e4:00:d5:0b:b0:87:
    62:ae:7c:a4:6c:e6:1c:d6:c9 
```

* * *

你也可以`BN_bn2dec`和朋友一起使用。例如：

```
BIGNUM* n = rsa.get()->n;
cout << "BN_bn2dec:" << endl;
cout << BN_bn2dec(n) << endl; 
```

它将产生：

```
BN_bn2dec: 
12243739000135209335165415265342326792394455644180015057748915050940947919482400
64106225312022889083399949792870649447719809295883754268473265926413766309145047
08000254475023744104439182803717332048247971986885955229841406443364223719542912
385690146029374797423322891147172613041161904860242946608474463378207 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T15:43:00.003

```
RSA_print_fp(stdout, x, 0); 
```

[http://linux.die.net/man/3/rsa_print_fp](http://linux.die.net/man/3/rsa_print_fp)

# spring - 找不到“org.springframework.scheduling.quartz.JobDetailBean”弹簧+石英

> ID：10451940
> 
> 赞同：11
> 
> 时间：2012-05-04T15:38:09.880
> 
> 标签：spring, scheduling, quartz-scheduler

我的构建路径中有quartz 1.8.3.jar 和Spring 3.0.6 jar，但是出现在所有spring + quartz 调度教程中的包不可用。我在哪里可以找到它？

```
 "org.springframework.scheduling.quartz.JobDetailBean" 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T16:02:17.357

它似乎在 spring-context-support 中：[http ://search.maven.org/#search%7Cga%7C1%7Cfc%3Aorg.springframework.scheduling.quartz.JobDetailBean](http://search.maven.org/#search%7Cga%7C1%7Cfc%3Aorg.springframework.scheduling.quartz.JobDetailBean)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-24T14:19:28.827

**Quartz**调度文件在`Spring context support 4.3.6 jar`. 班级有变化。少数类已被弃用。spring 上下文支持中已弃用的类是：**JobDetailBean**和**CronTriggerBean**。将`org.springframework.scheduling.quartz.JobDetailBean`您当前的 spring/程序文件替换为`org.springframework.scheduling.quartz.JobDetailFactoryBean`.

# python - 64位操作系统CPU使用率高的原因是什么？

> ID：10451942
> 
> 赞同：0
> 
> 时间：2012-05-04T15:38:17.933
> 
> 标签：python, multithreading, mechanize

我发现它非常有趣，但不知道为什么：我的一个 python 脚本**在 32 位 win 2003 机器上毫不费力地**运行（20% 甚至更少的 CPU 使用率），而完全相同的脚本**在 64 上几乎花费了 100% 的 CPU位赢2008机器**。两台机器具有**相同级别的硬件。**

基本上，该脚本是多线程的`threading`，使用`mechanize`模块从数十个网页中抓取特定结果。

无论如何，在那个 64 位操作系统上 CPU 使用率高的原因是什么？

**编辑：**

在将多线程脚本从 32 位迁移到 64 位时，我实际上是在尝试寻找一些一般注意事项。

好的，代码如下：

```
def SpawnThreads(amounts, urls_queue, proxies_queue):

    for counter in range(amounts):
        new_thread = threading.Thread(target = CheckResults, args = (urls_queue, proxies_queue， ))
        new_thread.start()

def CheckResults(urls_queue, proxies_queue):
    if urls_queue.empty():
         return 1

    if proxies_queue.empty():
        return 1

    get url from urls_queue

    get proxy from proxies_queue

    get html source of url

    put proxy back to proxies_queue if everything's all right

    spawn_a_new_thread = threading.Thread(target = SpawnThreads, args = (1, urls_queue, proxies_queue)
    spawn_a_new_thread.start()

if __name__ == "__main__":
    put all urls into urls_queue
    put all proxies into proxies_queue

    SpawnThreads(100, urls_queue, proxies_queue) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:30:48.453

真正跳出来的一件事是所有这些线程都以循环方式（`SpawnThreads`-> `CheckResults`-> `SpawnThreads`-> `...`）产生其他线程。

即使每个线程都应该在它被调用后不久就死掉，但`other_thread.start()`不断产生的线程很可能会成为瓶颈。

如果我是你，我要做的第一件事就是整理线程逻辑。诸如工作线程池之类的东西可能非常适合该问题。

# google-places-api - 根据用户当前位置获取附近地点

> ID：10451946
> 
> 赞同：0
> 
> 时间：2012-05-04T15:38:39.203
> 
> 标签：google-places-api

任何人都可以建议我使用任何标准 API 根据用户 GPS 位置获取附近的酒店列表。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T01:44:23.293

使用[Google Places API](https://developers.google.com/maps/documentation/places/)，您可以执行[Places Search Request](https://developers.google.com/maps/documentation/places/#PlaceSearchRequests)`location`用户的 lat,lng在哪里，并`types=lodging`搜索酒店：

> [https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=lodging&sensor=false&key=YOUR_API_KEY](https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=lodging&sensor=false&key=YOUR_API_KEY)

您需要按照[此处](https://developers.google.com/maps/documentation/places/#Authentication)的说明获取 API 密钥才能使用该服务。

# android - 保存 Android 偏好设置

> ID：10451953
> 
> 赞同：0
> 
> 时间：2012-05-04T15:39:27.510
> 
> 标签：android, android-preferences

嗨，我有一个列表视图，我想要它，这样当您按下某个项目时，它会将您的选择存储在共享首选项中。这样做的目的是，下次我打开应用程序时，它会跳过选择过程。

所以我想知道的是如何将此函数合并到我的代码中？

到目前为止，这是我的代码：

```
 public class SelectTeamActivity extends ListActivity {
        public String fulldata = null;
        public String position = null;
        public String divisionName= null;
        public List<String> teamsList = null;
        public String divName = null;

    protected void loadData() {
        fulldata = getIntent().getStringExtra("fullData");
        position = getIntent().getStringExtra("itemIndex");

        Log.v("lc", "selectteamActivity:" + fulldata);
        Log.v("lc", "position:" + position);

        int positionInt = Integer.parseInt(position);

        try{
            JSONObject obj = new JSONObject(fulldata);
            teamsList = new ArrayList<String>();
            JSONObject objData = obj.getJSONObject("data");

            JSONArray teamInfoArray = objData.getJSONArray("structure");

            for(int r = 0; r < teamInfoArray.length(); r++ ){
                JSONObject teamFeedStructureDict = teamInfoArray.getJSONObject(r);
                JSONArray teamStructureArray = 
                       (JSONArray) teamFeedStructureDict.get("divisions");

                JSONObject teamFeedDivisionsDictionary =
                         teamStructureArray.getJSONObject(positionInt);
                divName = teamFeedDivisionsDictionary.getString("name");

                JSONArray teamNamesArray = 
                          (JSONArray) teamFeedDivisionsDictionary.get("teams");

                for(int t = 0; t < teamNamesArray.length(); t++){
                  JSONObject teamNamesDict = teamNamesArray.getJSONObject(t);
                  teamsList.add(teamNamesDict.getString("name"));
                }
            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.selectact);
        loadData();

        TextView headerText = (TextView) findViewById(R.id.header_text);
        headerText.setText(divName);
        TextView redHeaderText = (TextView) findViewById(R.id.redheadertext);
        redHeaderText.setText("Please select your team:");

        setListAdapter( new ArrayAdapter<String>(this, R.layout.single_item, 
                                                   teamsList));

        ListView list = getListView();

        list.setTextFilterEnabled(true);
    }

    @Override
    protected void onListItemClick (ListView l, View v, int position, long id) { 
        Intent intent = new Intent(this, HomeActivity.class);
    String curPos = Integer.toString(position);

        //or just use the position:
        intent.putExtra("itemIndex", curPos);
        intent.putExtra("fullData", fulldata); //or just the part you want
        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:11:13.080

在您的 Activity 的 onCreate() 中：

```
 SharedPreferences preferences = getSharedPreferences("preferences", MODE_WORLD_WRITEABLE); 
```

在您的 onListItemClick() 中：

```
 preferences.edit().putInt("KEY", position).commit(); 
```

在您的项目中无处不在：

```
 int position = preferences.getInt("KEY", -1); 
```

（-1 是默认值，表示当给定键没有值时，返回该值）

# node.js - 使用 node.js 设置持久连接

> ID：10451956
> 
> 赞同：1
> 
> 时间：2012-05-04T15:39:38.733
> 
> 标签：node.js, persistent-connection

我很难找到以下问题陈述的解决方案
**实现一个简单的 Web 服务器，它将支持持久连接，即将遵守 HTTP 标头“连接：保持活动”。因此，当浏览器在同一 TCP 连接上发出下一个 HTTP 请求时，应该提供下一页。**

所以我想知道，这可能使用 node.js 吗？任何帮助深表感谢 。谢谢

# linux - 递归 make 递归太多，需要一个虚拟的先决条件

> ID：10451959
> 
> 赞同：0
> 
> 时间：2012-05-04T15:39:46.667
> 
> 标签：linux, makefile

我有一个非常简单的 Makefile，它没有按照我的预期做。最终目标是它应该递归调用自己，每次都包括适当的文件，从而生成特定于所包含内容的构建（我正在构建几个项目，它们都共享相同的代码库，但使用源文件的不同组合）。我从来没有真正处理过递归调用，所以我一定遗漏了一些明显的东西。目前，`.mk`我的 Makefile 文件夹中只有一个文件。仅出于此测试的目的，它是一个简单的单行。它最终将包含各种每个项目的设置。

**生成文件：**

```
SHELL = /bin/sh

ifdef MYFILE
include $(MYFILE)
PROGRAM = $(basename $(MYFILE))
endif

all: $(wildcard *.mk)

dummy:
        @echo -- Entering dummy stub ... why do I need this?

%.mk: dummy
        @echo Calling $(MAKE) MYFILE=$@ $*
        $(MAKE) MYFILE=$@ $*

$(PROGRAM): objs
        @echo Time to link!

objs:
        @echo Building objs! 
```

**测试.mk**

```
SOMEVAR = SomeValue 
```

我有以下两个问题：

## 问题 1

如果我`dummy`从我的模式规则中删除先决条件，则模式规则永远不会被调用（我得到可怕的 'Nothing to be done for all' 错误）。有没有一种方法可以让规则下的食谱在`%.mk`不需要那个虚拟的先决条件的情况下运行？

## 问题 2

鉴于上述两个文件，我希望 make 执行以下操作：

1.  make[1] 开始并达到`all`规则
2.  make[1] 跳转到`%.mk`模式规则
3.  make[1] 递归调用自身（调用看起来像`make MYFILE=test.mk test`）
4.  make[2] 启动，包含**test.mk**文件，并设置 PROGRAM 变量
5.  make[2] 跳转到 $(PROGRAM) 规则（因为我们被明确地调用了那个目标）
6.  make[2] 跳转到 objs 规则，运行配方，并返回到链上

实际上，make 卡在`%.mk`模式规则上并进入无限循环。`test`当我明确告诉它构建我的第一个递归调用（应该对应于`$(PROGRAM)`目标）时，我不明白为什么它坚持要达到模式规则。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:20:10.007

**问题 0：**
这是过度设计的。您不需要在这里使用递归 Make。

**问题 1：**
Make 不尝试重建`test.mk`（没有虚拟 preq）的原因是它`test.mk`是最新的。更好的方法是切换到静态模式规则并使用 PHONY：

```
MKS = $(wildcard *.mk)
.PHONY: $(MKS)

$(MKS): %.mk:
    @echo Calling $(MAKE) MYFILE=$@ $*
    $(MAKE) MYFILE=$@ $* 
```

更好的方法是不使用真实文件的名称作为不重建（甚至“接触”）该文件的规则的目标。

**问题 2：**
在 make[2] 中，makefile 包含`test.mk`. 如果 makefile 包含另一个文件，Make 将在执行任何其他操作之前尝试重建该文件。如果该文件有规则（存在）并且如果成功（确实如此），则 Make 然后重新调用自身。

你应该从头开始重新考虑这个设计。有很多方法可以获得您正在寻找的行为，具体取决于具体情况（将在 中定义多少变量`foo.mk`？您真的想通过手动移动这些文件来管理构建吗？等等）。

**PS**这是一个让我想起的kludge。是否适合您的情况取决于具体情况：

生成文件：

```
# includes nothing

%.mk: dummy
        @echo Calling $(MAKE) MYFILE=$@ -f $@ $*
        $(MAKE) MYFILE=$@ -f $@ $* 
```

测试.mk：

```
SOMEVAR = SomeValue
include makefile 
```

# java - 有没有我可以使用的 Java 本地队列库，通过转储到硬盘驱动器来保持低内存使用率？

> ID：10451962
> 
> 赞同：1
> 
> 时间：2012-05-04T15:39:58.180
> 
> 标签：java, queue, message-queue

这可能是不可能的，但我想我可以试一试。我有一些处理一些数据的工作，它对处理的每个数据做出 3 个决定：保留、丢弃或修改/重新处理（因为它不确定保留/丢弃）。这会生成大量数据，因为重新处理可能会将数据分解为许多不同的部分。

我最初的方法是将其发送到正在处理数据的执行服务，但由于要处理的项目数量很大，我很快就会耗尽内存。然后我决定可能将队列卸载到消息传递服务器（rabbitmq），它工作正常，但现在我受网络 IO 的约束。我喜欢 rabbitmq 的地方在于它将内存中的消息保持到一定水平，然后将旧消息转储到本地驱动器，因此如果我的服务器上有 8 gig 的内存，我仍然可以拥有 100 gig 的消息队列。

所以我的问题是，在 Java 中是否有任何具有类似功能的库？我可以用作非阻塞队列的东西，它只在队列中保留 X 个项目（按项目数或大小）并将其余的写入本地驱动器。

注意：现在我只要求在一台服务器上使用它。将来我可能会添加更多服务器，但因为每台服务器都是自生成数据，所以如果一台服务器的队列为空，我会尝试从一个队列中获取消息并将它们推送到另一个队列。该库不需要网络访问，但我需要从另一个 Java 进程访问队列。我知道这是一个很长的镜头，但我想如果有人知道它会是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:48:56.513

不确定它是否是您正在寻找的方法，但为什么不使用像 hsqldb 这样的轻量级数据库和像 hibernate 这样的持久层呢？您可以将消息保存在内存中，然后提交到 db 以保存在磁盘上，然后使用方便的 SQL 查询来查询它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:07:44.757

实际上，正如 Cuevas 所写，HSQLDB 可能是一个解决方案。如果您使用提供的“缓存表”，您可以指定使用的最大内存量，超过的数据将被发送到硬盘驱动器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T23:11:35.740

使用文件系统。这是老派，但有很多工程师因为懒惰而被图书馆所困扰。确实，HSQLDB 提供了许多增值功能，但在轻量级的背景下......

# android - 我们可以在一个应用程序中实现多少个内容提供者？

> ID：10451966
> 
> 赞同：3
> 
> 时间：2012-05-04T15:40:07.697
> 
> 标签：android, android-contentprovider

我已经阅读了 Android 开发指南并注意到我们可以为内容提供者实现不同的类。所以，

1.  一个 Android 应用程序中有多个内容提供者还是只有一个内容提供者？
2.  如何正确实现这样的不同内容提供者类？

这是我从开发指南中读到的内容：

> 您将提供程序实现为 Android 应用程序中的一个或多个类

[http://developer.android.com/guide/topics/providers/content-provider-creating.html](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T15:55:24.537

您可以根据需要实现任意数量，正如您从[此处](http://developer.android.com/guide/topics/manifest/provider-element.html)的文档中看到的那样。要注册内容提供者，您需要`<provider>`在 Android Manifest 中添加其对应的标签。

但是，在大多数情况下，您不需要多个内容提供者。通常一个就足够了，因为它可以处理多个表。如果您希望您的应用程序提供对 2 个以上独立数据实体的公共访问权限，那么您应该只需要一个以上的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:55:05.620

1.  您可以根据需要创建任意数量的内容提供者。但是你需要他们吗？
2.  您要实现哪些内容提供程序类？如果您很好地阅读了该页面，您应该已经看到它包含指向两个页面的链接：
    1.  [http://developer.android.com/guide/topics/providers/content-provider-basics.html - 内容提供者基础](http://developer.android.com/guide/topics/providers/content-provider-basics.html)
    2.  [http://developer.android.com/guide/topics/providers/content-provider-creating.html#ContentProvider - 实现 ContentProvider 类](http://developer.android.com/guide/topics/providers/content-provider-creating.html#ContentProvider)

我建议你先阅读这些页面。谷歌正在提供更多关于内容提供者、教程和示例的信息：

*   [http://android10.org/index.php/articlesdatastorage/252-content-providers-using-and-creating-them](http://android10.org/index.php/articlesdatastorage/252-content-providers-using-and-creating-them)
*   [http://thinkandroid.wordpress.com/2010/01/13/writing-your-own-contentprovider/](http://thinkandroid.wordpress.com/2010/01/13/writing-your-own-contentprovider/)
*   [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)
*   [http://about-android.blogspot.com/2010/04/content-provider-example-1.html](http://about-android.blogspot.com/2010/04/content-provider-example-1.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:53:01.183

您可以根据需要在每个应用程序中使用（提供和使用）任意数量的内容提供者。当然，它们需要不同的内容 URI。

除了文档（您的链接）中概述的用途外，您还可以将内容提供者用于访问数据存储的其他目的。内容 URI 可以有参数，因此您可以像使用 Web 服务一样使用内容提供者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-03T12:31:46.180

没有规定您必须为每个应用程序仅实现一个内容提供程序。如果您的项目需要，那么您可以这样做。

如果要在应用程序包中实现多个内容提供者，请确保每个内容提供者的权限部分是唯一的，以便将传入的数据请求正确路由到每个内容提供者。

但是拥有太多的内容提供者确实会让你感到困惑并且不是必需的。我看到有多个内容提供者的唯一情况是，如果您的应用程序中有多个数据库，并且您希望与外部应用程序共享所有这些数据库。您可以在其中为每个数据库使用单独的内容提供程序，以便与外界共享。

希望能帮助到你。

# css - 如何在 Twitter Bootstrap 中将卡住的输入框和提交按钮分开？

> ID：10451968
> 
> 赞同：0
> 
> 时间：2012-05-04T15:40:13.707
> 
> 标签：css, twitter, xhtml, twitter-bootstrap

以一种有趣的方式，提交按钮粘在输入框上。我无法理解原因。我可以通过给出 -(minus) margin 等来解决它。但是，我正在寻找永久的解决方案。我附上了 chrome 调试工具的截图。

![在此处输入图像描述](../Images/ed9d3fed9411c4f4305cca1a5358ae41.png)

我想将按钮对齐到选择框下方的左侧。

如果看图有困难...

> [http://i.stack.imgur.com/VhJVb.png](https://i.stack.imgur.com/VhJVb.png)

```
 <input class="reservationdates"  type="text" name="date_from"/>
                        <label>Drop-off date</label>
                        <select name="to_time" class="reservationdates">
                            <option value="07:00 am">07:00 AM</option>
                            <option value="07:30 am">07:30 AM</option>
                            <option value="08:00 am">08:00 AM</option>
                            <option value="08:30 am">08:30 AM</option>
                            <option value="09:00 am">09:00  AM</option>
                            <option value="09:30 am">09:30 AM</option>
                            <option value="10:00 am">10:00 AM</option>
                            <option value="10:30 am">10:30 AM</option>
                            <option value="11:00 am">11:000 AM</option>
                            <option value="11:30 am">11:30 AM</option>
                            <option value="12:00 pm">12:00 PM</option>
                            <option value="12:30 pm">12:30 PM</option>
                            <option value="01:00 pm">01:00 PM</option>
                            <option value="01:30 pm">01:30 PM</option>
                            <option value="02:00 pm">02:00 PM</option>
                            <option value="02:30 pm">02:30 PM</option>
                            <option value="03:00 pm">03:00 PM</option>
                            <option value="03:30 pm">03:30 PM</option>
                            <option value="04:00 pm">04:00 PM</option>
                            <option value="04:30 pm">04:30 PM</option>
                            <option value="05:00 pm">05:00 PM</option>
                            <option value="05:30 pm">05:30 PM</option>
                            <option value="06:00 pm">06:00 PM</option>
                            <option value="06:30 pm">06:30 PM</option>
                        </select>

                        <div class="input-append date" id="dp3" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
                            <input class="span2"  name="date_to" size="16" type="text" value="12-02-2012" readonly>
                            <span class="add-on"><i class="icon-th"></i></span>
                        </div>

                        <input class="span3 btn btn-large btn-primary" type="submit" name="submit" value="Search For Rates"/>

                    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:14:16.583

`.control-group`您可以使用引导程序中的类将输入按钮中的输入字段分成两行 。该类在 div 的底部添加了一些边距，应该使您的按钮从输入字段中脱离：

演示：http: [//jsfiddle.net/MYjzj/](http://jsfiddle.net/MYjzj/)

**HTML**

```
<form class="form-horizontal">
    <div class="control-group">
        <input class="reservationdates"  type="text" name="date_from"/>
        <label>Drop-off date</label>
        <select name="to_time" class="reservationdates">
            <option value="07:00 am">07:00 AM</option>
            <option value="07:30 am">07:30 AM</option>
            <option value="08:00 am">08:00 AM</option>
            <option value="08:30 am">08:30 AM</option>
            <option value="09:00 am">09:00  AM</option>
            <option value="09:30 am">09:30 AM</option>
            <option value="10:00 am">10:00 AM</option>
            <option value="10:30 am">10:30 AM</option>
            <option value="11:00 am">11:000 AM</option>
            <option value="11:30 am">11:30 AM</option>
            <option value="12:00 pm">12:00 PM</option>
            <option value="12:30 pm">12:30 PM</option>
            <option value="01:00 pm">01:00 PM</option>
            <option value="01:30 pm">01:30 PM</option>
            <option value="02:00 pm">02:00 PM</option>
            <option value="02:30 pm">02:30 PM</option>
            <option value="03:00 pm">03:00 PM</option>
            <option value="03:30 pm">03:30 PM</option>
            <option value="04:00 pm">04:00 PM</option>
            <option value="04:30 pm">04:30 PM</option>
            <option value="05:00 pm">05:00 PM</option>
            <option value="05:30 pm">05:30 PM</option>
            <option value="06:00 pm">06:00 PM</option>
            <option value="06:30 pm">06:30 PM</option>
        </select>
        <div class="input-append date" id="dp3" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
            <input class="span2"  name="date_to" size="16" type="text" value="12-02-2012" readonly /><span class="add-on"><i class="icon-th"></i></span>
        </div>
    </div>
    <input class="span3 btn btn-large btn-primary" type="submit" name="submit" value="Search For Rates"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:56:10.553

据我所知，将输入框与提交按钮分开引导程序使用'form-action'类，它为按钮添加了填充和边距。所以我认为你给予保证金的决定在某种程度上是正确的。尝试将提交按钮放入 . 但我可能是错的。

# html - 后退按钮上的 iOS Safari 缓存

> ID：10451970
> 
> 赞同：0
> 
> 时间：2012-05-04T15:40:22.180
> 
> 标签：html, css, ios, caching, safari

我很好奇是否有人在 iOS Safari 中遇到过以下问题：

*   用户导航到站点
*   用户点击导航项
*   导航项目单击显示子导航
*   用户单击子导航项
*   用户然后单击后退按钮
*   子导航自动打开（问题）

当您最初单击主导航项时，它应该显示子导航。这最初会发生，但是当用户转到子导航项页面然后单击后退按钮时，该子导航会自动打开。当用户单击前进按钮时，它会转到子导航项页面，并且该导航仍处于打开状态。

除非您进行硬刷新，否则页面似乎会缓存以前的页面状态，包括用户交互。

下面是标记和样式的基本示例：

[http://jsfiddle.net/alvincrespo/s5UYY/](http://jsfiddle.net/alvincrespo/s5UYY/)

任何线索/帮助将不胜感激。

[更新]

上面的链接只是显示标记和 CSS 的示例。网站上的实际链接不是主题标签，它们确实有指向新页面的实际链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:56:22.057

问题是页面实际上并没有离开当前页面，它的 href 是页面上的锚位置，不会进行硬页面刷新。你在使用历史 API 吗？

也只是一个仅供参考，我无法在 JSFiddle 中重现它。

# html - 嵌套 HTML 表格错误，打印预览 IE 中的分页符附近缺少表格

> ID：10451971
> 
> 赞同：0
> 
> 时间：2012-05-04T15:40:24.840
> 
> 标签：html, internet-explorer, printing, html-table

在我工作的公司中，我们生成 html 格式的报告，我们的客户经常打印这些报告。我们遇到的问题是，有时当客户端打印时，内部表格之一将在打印视图中的分页符之前 1 或 2 个像素开始。这会导致表格消失但空间被占用。

```
<HTML>
  <HEAD>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>test</title>
    <style type="text/css">
      td { border:1px solid black;}
      table {border-collapse:collapse;}
    </style>
  </HEAD>
  <BODY>
    <TABLE class="main">
      <TR>
        <TD>
          <TABLE class="second">
            <TR>
              <TD style="border-top:824px solid-black">1</TD>
            </TR>
            <TR>
              <TD>1_1</TD>
            </TR>
            <TR>
              <TD>1_2</TD>
            </TR>
            <TR>
              <TD>1_3</TD>
            </TR>
          </TABLE>
        </TD>
      </TR>
      <TR>
        <TD>
          <TABLE class="second">
            <TR>
                  <TD>2</TD>
            </TR>
            <TR>
              <TD>2_1</TD>
            </TR>
            <TR>
              <TD>2_2</TD>
            </TR>
            <TR>
              <TD>2_3</TD>
            </TR>
          </TABLE>
        </TD>
      </TR>
      <TR>
        <TD>
          <TABLE class="second">
            <TR>
              <TD>3</TD>
            </TR>
            <TR>
              <TD>3_1</TD>
            </TR>
            <TR>
              <TD>3_2</TD>
            </TR>
            <TR>
              <TD>3_3</TD>
            </TR>
          </TABLE>
        </TD>
      </TR>
    </TABLE>
  </BODY>
</HTML> 
```

上面的代码应该会重现该错误，但您可能必须在边框上添加一些填充以将第二个表格撞到分页符之前。

我们尝试了分页符、填充、边框折叠、无边框折叠。当它只是两个表格时，除了单元格的边框之外没有任何样式时，该错误似乎仍然存在。这似乎是一个相当大的缺陷，但我几乎没有运气找到任何关于它的东西。

这是 IE 的问题还是我们可以做些什么来解决这个问题？

**编辑** 我们尝试使用尽可能简单的骨骼（仅 TD 元素的边框），我们遇到了同样的问题。

我们无法解决问题，但我们的工作包括仅使用外部表格的一个单元格并将每个内部表格放入其中。这可以防止表格在分页符附近消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T11:58:33.577

我们在使用嵌套表格布局的业务应用程序中遇到了与 IE7 和 IE8 完全相同的问题。根据我们对受影响样本的测试证据，Internet Explorer 11 不存在此问题。

这是 IE 中的一个错误，根据 Microsoft 技术支持，它存在于 IE 10 之前的版本中，并且也反映在许多 PDF 打印机使用的 Print-to-PDF 功能中，这是我们首先找到该错误的方式。

不幸的是，我无法提供我所说的任何证据。请检查 IE11 并确认它是否解决了您的问题。如果您还不愿意切换浏览器，另一种选择是使用基于 div 的布局对其进行测试。

# javascript - Sencha 用于页面更改的静态顶部和底部栏

> ID：10451973
> 
> 赞同：2
> 
> 时间：2012-05-04T15:40:29.867
> 
> 标签：javascript, extjs

在过去的两周里，我一直在学习 sencha touch 2.0，我偶然发现了两个问题。我想做的是在我的页面上有一个静态的顶部栏和底部栏，并让动态内容由放置在底部停靠栏的按钮控制。我花了 4 个小时试图让它按照我想要的方式工作，我快到了，但我需要一些指导。

我的第一个问题是我想将图像添加到静态顶部坞站。以另一种形式建议的代码不起作用。

```
var topBar = new Ext.BoxComponent(
            {
                xtype: 'box',
                autoEl: {tag: 'img', src:'/resources/icons/icon.png'}
            }
    ) 
```

此代码没有给出任何错误，但也没有显示所需的图像。图像为 60 像素 x 30 像素

我遇到的第二个问题是我想将图标添加到我的底部停靠栏，以便当用户单击它们时，页面会更改为显示新页面。我有一个包含 3 个字段的表单，我想链接到底部停靠栏上的一个图标，因此当单击该图标时，该表单将显示。这是完整的代码：

```
Ext.setup({
phoneStartupScreen : 'resources/images/icon.png',
icon : 'resources/images/Homescreen.png',
glossOnIcon : false,

onReady : function() {

    var topBar = new Ext.BoxComponent(
            {
                xtype: 'box',
                autoEl: {tag: 'img', src:'/resources/icons/icon.png'}
            }
    )

    var tapHandler = function (btn, evt) {
         alert("Button '" + btn.text + "' tapped.");
     }

    var form = new Ext.form.FormPanel({

        items: 
        [
            {
              xtype: "textfield",
              name: "name",
              label: "Name",
              placeHolder: "your name here"  
            },
            {
              xtype: "emailfield",
              name: "email",
              label: "Email",
              placeHolder: "you@example.com"  
            },
            {
              xtype: "urlfield",
              name: "url",
              label: "Url",
              placeHolder: "http://www.example.com"  
            }
      ] 
    })    

    var searchPageContent ={
        html:'This is a test for search page'
    }
    var userPageContent ={
        html:'This is a test for user page'
    }

    var dockedItems = [ 
       {
            xtype : 'toolbar',
            dock : 'top',
            items : topBar

        }, 
        {
            xtype: "toolbar",
            dock: "bottom",
            items: [
                {
                    xtype: 'spacer'
                },
                {
                  iconMask: true,
                  iconCls: "favorites",
                  items: form
                },
                {
                    xtype: 'spacer'
                },
                {
                  iconMask: true,
                  iconCls: "search",
                  items: searchPageContent
                },
                {
                    xtype: 'spacer'
                },
                {
                  iconMask: true,
                  iconCls: "user",
                  items: userPageContent
                },
                {
                    xtype: 'spacer'
                },
            ]  
        } 
    ]

    new Ext.Panel({
        id : 'buttonsPanel',
        fullscreen : true,
        dockedItems : dockedItems
    });
} 
```

});

如前所述，我已经能够创建静态顶部和底部栏，但我的图像在顶部栏中不起作用，这是我的第一个问题，当我单击 3 个按钮中的一个时，没有任何反应；当我单击我的收藏夹按钮时，我希望显示我的表单，但没有任何反应。我哪里出错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:59:25.707

经过几天与煎茶的角力，我找到了一个几乎拥有我想要的东西的例子，因此对其进行了修改，它完全按照我想要的方式工作。我现在有一个静态顶部栏和一个带有页面图标的静态底部栏，这样当我单击页面图标时，主要内容会滚动并显示新页面。

```
Ext.setup({
onReady: function() {

    var topBar = new Ext.BoxComponent({   
        layout: 'hbox',

        html:
               '<img src="resources/icons/icon.png" height="30", width="48"/>',
       flex: 1,
       style:{
           textAlign: 'center'  
       }
    })
    var dockedItems = [ 
       {
           //this creates the top bar, places it at the top of the page and gives it a background image
            xtype : 'toolbar',
            dock : 'top',
            style: 'background-image:url("resources/images/backgroundSmall.png"); background-repeat: repeat-x;',
            items : topBar

        }
    ]
    // Sub-page sections

    // Main portion of the page, which includes top toolbar and content
    var welcome = new Ext.Panel({
        items: [{
            html: 'this is the welcome screen'
        }],
        title: "Welcome",
        iconCls: "welcome",
    });
    var search = new Ext.Panel({
        items: [{
            html: 'this is the search screen'
        }],
        title: "Search",
        iconCls: "search",
    });

    // This is the outer panel with the bottom toolbar
    var wrapper = new Ext.TabPanel({
        fullscreen: true,
        tabBar: {
            dock: 'bottom',
            style: 'background:#8a9cB2;',
            layout: {
                pack: 'center'
            }
        },
        items: [
            welcome,
            search,
            {
                iconMask: true,
                iconCls: "search"
            },
            {
                iconMask: true,
                iconCls: "user"
            }
        ],
        dockedItems: dockedItems
    });
} 
```

});

# objective-c - iOS 应用程序中的重复 JSON 文件阻止应用程序构建

> ID：10451974
> 
> 赞同：0
> 
> 时间：2012-05-04T15:40:30.090
> 
> 标签：objective-c, ios, facebook-graph-api, sbjson

我遇到了重复的 JSON 文件问题。我有 google 地方 SBJSON 文件和 Facebook JSON 文件。我看到典型的解决方案是**删除其中一个 JSON 库**。当我这样做时，我会遇到更多错误。Google 和 FB JSON 库对我来说看起来很不一样。

> ld：/Users/myName/Library/Developer/Xcode/DerivedData/GJ-fzuneahndeknibecnhhygyhhvkxl/Build/Intermediates/GJ.build/Debug-iphonesimulator/GJ.build/Objects-normal/i386/SBJsonParser-6AE6A0B799B41343中的重复符号_OBJC_METACLASS_$_SBJsonParser .o 和 /Users/myName/Library/Developer/Xcode/DerivedData/GJ-fzuneahndeknibecnhhygyhhvkxl/Build/Intermediates/GJ.build/Debug-iphonesimulator/GJ.build/Objects-normal/i386/SBJsonParser-58C4D42EE2A98A37.o 架构 i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

![在此处输入图像描述](../Images/62fa52e7e363387ae20ebbd613f47ece.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:43:03.127

好吧，你有重复的文件。如果文件是相同的（即，完全相同的副本`SBJSONParser`，只需删除一对，看看它是否会构建。

# google-analytics - opa：谷歌分析

> ID：10451975
> 
> 赞同：3
> 
> 时间：2012-05-04T15:40:34.007
> 
> 标签：google-analytics, opa

我想在我的 opa 应用程序中添加一个用于谷歌分析的跟踪器。我需要在关闭我的 html 代码之前放置 google 提供的脚本。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T22:33:06.033

您可以在主页末尾插入：

```
 <script>{
    Xhtml.of_string_unsafe("
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXX-Y']);
_gaq.push(['_trackPageview']);
(function() \{
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    ")
  }</script> 
```

注意：请注意，您必须`{`在脚本内转义：`\{`

# xml - 如何制作 xpath，使其不仅包括完整的 xpath，还包括引用的子元素中的值

> ID：10451984
> 
> 赞同：0
> 
> 时间：2012-05-04T15:41:33.763
> 
> 标签：xml, xpath

我整天都在努力解决这个问题……也许你可能知道路。

我正在尝试制作一个 XPATH，它由一个明确且明确的 xpath 以及所引用的叶子元素中的数据项组成。

`/bookstore[3]/book[4]/title`将是 xpath 的一个很好的例子。

这应该返回第三书店中第四本书的标题。假设这很好，

但是，我想将标题嵌入其中 - 无论我尝试哪种方式，它似乎都会出错。目的是在我的应用程序中创建一个有效的 xpath 错误代码 - 并显示有问题的项目的位置和值。

因此，显而易见的第一次尝试是：

```
/bookstore[3]/book[title="oxford dictionary]/title 
```

虽然这很好，书店有数百本牛津词典，我只想要 4 号。

所以我尝试了很多这样的变体......并且都没有通过在线语法检查器。

```
/bookstore[3]/book[[4] and title="oxford dictionary]/title
/bookstore[3]/book[4]/title | /bookstore[3]/book[title=oxford dictionary]/title 
```

欢迎任何关于如何在叶子元素中包含显式 XPATH 和附加内容的建议。

此致，CR。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:03:43.680

1.  要获取标签正文中的文本内容，您可以使用 `/bookstore/book[@title="oxford dictionary"][4]/title/text()`

2.  要获取标签属性的文本内容，您可以使用 `/bookstore/book[@title="oxford dictionary"][4]/attribute::name`

第一个表达式将返回“Some Text 4”，使用下面的 xml 进行评估。
第二个表达式将返回“title4”，使用下面的 xml 进行评估。

```
<bookstore>
    <book title="oxford dictionary">
        <title name="title1">Some Title 1</title>
    </book>
    <book title="oxford dictionary">
        <title name="title2">Some Title 2</title>
    </book>
    <book title="oxford dictionary">
        <title name="title3">Some Title 3</title>
    </book>
    <book title="oxford dictionary">
        <title name="title4">Some Title 4</title>
    </book>
</bookstore> 
```

# c - 如何接收scanf中的前n个数字？

> ID：10451985
> 
> 赞同：1
> 
> 时间：2012-05-04T15:41:44.553
> 
> 标签：c, scanf

给定'N'和L（行数），我需要使用scanf和array [2 * 3]从L行接收前N个数字。任何人都可以帮忙吗？

> ***例子***

```
N=2, L=3 INPUTS =>
2   3   7 8  9
5 6 8 9  8
5 2
9 8 7
OUTPUT =>
array[0]=2
array[1]=3
array[2]=5
array[3]=6
array[4]=5
array[5]=2 
```

我试过了，但没有给我正确的输出：

```
 for(j=0; j<L; j++)
    for(i=0; i<N; i++)
        if(i == 0)
            scanf("\n%d", &array[r++]);
        else
            scanf(" %d", &array[r++]); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:09:41.993

```
#include <stdio.h>
#include <stdlib.h>

int main(void){
    int N,L;
    int *a;
    int i,j,count=0;
    char dummy;

    printf("N=");
    scanf("%d", &N);
    printf("L=");
    scanf("%d", &L);
    printf("N=%d, L=%d INPUTS =>\n", N, L);
    a =(int*)calloc(N*L, sizeof(int));
    for(i=0;i<L;++i){
        for(j=0;j<N;++j){
            scanf("%d ", &a[count++]);
        }
        scanf("%*[^\n]%c", &dummy);
    }
    printf("OUTPUT =>\n");
    for(i=0;i<count;++i){
        printf("array[%d]=%d\n", i, a[i]);
    }
    free(a);

    return 0;
} 
```

# c++ - 如何从 QGLWidget 录制视频？

> ID：10451986
> 
> 赞同：0
> 
> 时间：2012-05-04T15:41:53.330
> 
> 标签：c++, qt, video-capture

我有一个 QGLWidget，我在其中渲染一个动态网格。我想做的是录制我在这个窗口中查看的视频。如果可能的话，我想使用 Qt 的低级多媒体库或高级 Phonon 来做到这一点。

非常感谢您的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:49:54.470

在最新版本的 QT 中，您有一个 QGLFrameBuffer 对象，您可以渲染到此屏幕外，然后简单地转换为 QImage。

然后使用 ffmpeg 将每个 QImage 编码成视频相当简单[http://code.google.com/p/qtffmpegwrapper/](http://code.google.com/p/qtffmpegwrapper/)

# html - 仅将 CSS 样式应用于第一个 在嵌套列表的根

> ID：10451988
> 
> 赞同：10
> 
> 时间：2012-05-04T15:41:55.817
> 
> 标签：html, css

我只想先应用 CSS li 但`:first-child`应用到每个 ul 的所有第一个孩子

这是我的[代码](http://jsfiddle.net/jassi9911/w47LD/)

```
#menu-navigation li:first-child{
   color:red;
}​ 
```

应用于此 HTML 时：

```
<ul class="nav" id="menu-navigation">
    <li>Home</li>
    <li>About Us
        <ul>
            <li>Our Team</li>
        </ul>
    </li>
</ul>​ 
```

...“家”和“我们的团队”都变红了。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T15:44:16.607

使用子选择器：

```
#menu-navigation>li:first-child{
   color:red;
}​ 
```

例如：http: [//jsfiddle.net/w47LD/3/](http://jsfiddle.net/w47LD/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:50:25.827

只使用 id/class 不是更容易吗？

```
<li class="red"> Our Team </li>

.red
{
  color: red;
}

Alternatively you could use an ID...

<li id="red"> Our Team </li>

#red
{
  color: red;
} 
```

# c# - 实体框架投影或

> ID：10451991
> 
> 赞同：0
> 
> 时间：2012-05-04T15:42:19.727
> 
> 标签：c#, entity-framework, ef-code-first, data-access-layer, entity-framework-migrations

假设我有现有的 Db 应用程序，它是使用 EF Model First 方法设计的。我有`Users`表，当客户端代码尝试从`Users`表中读取条目时，DAL 逻辑将 EF 实体投影到普通对象（这些只是简单的 C# 类，我们称之为 UserEntry 类）。

现在我应该添加 Update 方法，它采用 UserEntry 类。所以我只是想知道我应该如何跟踪 UserEntry 类中更改了哪些字段？

当然我可以保存所有数据，但我没有这种方法。

我可以完全重构现有的解决方案，甚至可以删除 UserEntry 类。我应该选择什么方法？使用 DbContext 生成器生成 POCO 类，或者例如使用 EF Power Tools 并转向 Code First 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:25:08.297

我不知道您使用的是哪个版本的 EF，所以我假设您可以使用 DbContext，方式如下：

```
public class YourContext : DbContext
{
    public DbSet<User> Users {get;set;}
} 
```

首先，您使用这样的方法加载用户，以便 DbContext 跟踪它：

```
YourContext db = new YourContext();

public User Get(int userId)
{
    return db.Users.Find(userId);
} 
```

现在它在内存中，您可以对返回的对象进行操作。当你完成干预后，你只需调用：

```
db.SaveChanges() 
```

它会将跟踪的任何内容保存为更改，无需特殊的更新方法。

但是，如果您正在使用断开连接的实体（网站等），则需要添加额外的行来告诉 DbContext 实体在超出跟踪范围时已更改：

```
public void Update(User user)
{
    db.Entry(user).State = EntityState.Modified;
    db.SaveChanges();
} 
```

这几乎就是你所需要的。

# c++ - 线程池应该如何在 C 中实现？

> ID：10451992
> 
> 赞同：11
> 
> 时间：2012-05-04T15:42:24.850
> 
> 标签：c++, c, pthreads, threadpool

我正在用 C++ 编程，但我只使用 pthread.h，没有 boost 或 C++11 线程。

所以我正在尝试使用线程，但基于我之前的一个问题[（链接）](https://stackoverflow.com/questions/10434717/how-does-pthread-create-work)，这似乎不可行，因为线程在完成其任务后立即终止，这是使用线程池实现的更普遍的原因之一是通过将这些线程重用于多个任务来减少线程创建开销。

那么在 C 中实现这一点的唯一其他方法是使用 fork()，并创建从主进程到子进程的管道？或者有没有办法在我不知道的线程和它们的父级之间建立一个管道？

提前谢谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T15:47:28.473

是的，您可以在线程之间创建[线程安全队列](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)。然后池中的线程将坐在一个循环中，从队列中检索一个项目，执行它需要的任何内容，然后返回并获取另一个。

这在 C++ 中通常更容易/更简单，因为在某些接口上达成一致更容易一些（例如，重载`operator()`以执行任务的代码），但从根本上讲，您可以在 C 中做所有相同的事情（例如，您放入队列中的每个`task`结构都将包含一个指向执行该任务工作的函数的指针）。

在您的情况下，由于您使用的是 C++，因此使用重载 of 可能更容易`operator()`完成这项工作。结构的其余部分`task`（或您选择的任何名称）将包含所需的任何数据等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T15:46:24.090

从[POSIX 标准](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_create.html)：

```
int pthread_create(pthread_t *restrict thread,
   const pthread_attr_t *restrict attr,
   void *(*start_routine)(void*), void *restrict arg); 
```

> (...) 线程被创建为它的唯一参数`start_routine`执行。`arg`

所以，你应该用这个函数创建一堆线程，并让它们都执行一个类似的函数

```
void *consumer(void *arg)
{
    WorkQueue *queue = static_cast<WorkQueue *>(arg);

    for (task in queue) {
        if (task == STOP_WORKING)
            break;
        do work;
    }
    return WHATEVER;
} 
```

（在输入结束时，将*n 个* `STOP_WORKING`项目推送到队列中，其中*n*是线程数。）

请注意，pthreads 是一个非常低级的 API，它提供的类型安全性非常低（所有数据都作为`void`指针传递）。如果您尝试并行化 CPU 密集型任务，则可能需要查看[OpenMP](http://openmp.org/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T15:51:12.280

'似乎不可行，因为线程在完成任务后立即终止'什么？

```
for(;;){
  Task *myTask=theCommonProducerConsumerQueue->pop();
  myTask->run();
} 
```

..永远不要返回任何东西，事实上，永远不要返回。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T16:00:58.887

您可能会发现查看[libdispatch 的源代码很有帮助](http://www.opensource.apple.com/source/libdispatch/libdispatch-187.7/)，它是 Apple 的 Grand Central Dispatch 的基础并使用线程池。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T16:08:36.590

我建议使用英特尔的[线程构建块](http://threadingbuildingblocks.org)来完成类似工作队列/线程池的任务。使用 TBB 3.0 的一个相当人为的示例：

```
class PoorExampleTask : public tbb::task {
    PoorExampleTask(int foo, tbb::concurrent_queue<float>& results)
    : _bar(foo), _results(results)
    { }

    tbb::task* execute() {
        _results.push(pow(2.0, foo));
        return NULL;
    }

private:
    int _bar;
    tbb::concurrent_queue<float>& _results;
} 
```

以后像这样使用：

```
tbb::concurrent_queue<float> powers;
for (int ww = 0; ww < LotsOfWork; ++ww) {
    PoorExampleTask* tt
        = new (tbb::task::allocate_root()) PoorExampleTask(ww, powers);
    tbb::task::enqueue(*tt);
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-04T15:55:49.580

[http://people.clarkson.edu/~jmatthew/cs644.archive/cs644.fa2001/proj/locksmith/code/ExampleTest/threadpool.c](http://people.clarkson.edu/~jmatthew/cs644.archive/cs644.fa2001/proj/locksmith/code/ExampleTest/threadpool.c)

几个月前我用过谷歌，你应该试试。

编辑：看来您可能想要一个小组。我能够创建一个对上述内容进行一些小的改动，以便工人不执行工作，而只是加入线程。

# jquery - jquery apprise 结合自动完成功能

> ID：10451993
> 
> 赞同：0
> 
> 时间：2012-05-04T15:42:34.310
> 
> 标签：jquery, jquery-autocomplete

我将 jquery 的 apprise 插件与自动完成功能结合使用。它工作正常，只是显示的下拉列表没有正确显示。我认为这是因为 css 中的 z-index 属性。但是，我相应地改变了它，它没有工作。有没有人对如何制作它有任何想法，以便下拉列表将出现在 apprise 框内？

谢谢，

槊

```
 $(".link").click(function(){
        apprise("<h1 class='notorious'>Link to what?</h1><div class='team_box' style='background-color:#ffffff;height:165px;'><div style='border-right:solid 1px #e4e4e4;color:#090127;width:200px;float:left;'><input type='radio' id='user' name='user'/> User <br /><input type='radio' id='current_team' name='current_team'/> Current Season Team <br /><input type='radio' id='past_team' name='past_team'/> Past Season Team <br /><input type='radio' id='season' name='season'/> Season <br /><input type='radio' id='current_player' name='current_player'/> Current Season Player <br /><input type='radio' id='past_player' name='past_player'/> Past Season Player <br /><input type='radio' id='all_star' name='all_star'/> All Star Game <br /><input type='radio' id='series' name='series'/> Series <br /></div><div id='belinda' style='float:left;margin-left:15px;'><input type='text' id='shadow' class='bar' style='display:none;'/></div></div>");

        jQuery('input[name=current_team]:radio').click(function(){
            $('#shadow').fadeIn('slow');

            var data = ["Baltimore Orioles", "New York Yankees", "Toronto Blue Jays", "Tampa Bay Rays", "Boston Red Sox", "Kansas City Royals", "Chicago White Sox", "Cleveland Indians", "Detroit Tigers", "Minnesota Twins", "Texas Rangers", "Seattle Mariners", "Oakland Athletics", "Los Angeles Angels", "Philadelphia Phillies", "Atlanta Braves", "New York Mets", "Washington Nationals", "Miami Marlins", "Cincinatti Reds", "Pittsburgh Pirates", "Chicago Cubs", "St. Louis Cardinals", "Houston Astros", "Milwaukee Brewers", "Los Angeles Dodgers", "Colorado Rockies", "Arizona Diamondbacks", "San Francisco Giants", "San Diego Padres"];

            $("#shadow").autocomplete({ 
                source: data
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:28:09.173

z-index 是问题所在。值 10000000000 应该可以工作。

# matlab - MATLAB 滑块步进行为

> ID：10451997
> 
> 赞同：12
> 
> 时间：2012-05-04T15:42:45.490
> 
> 标签：matlab, user-interface, slider, matlab-guide

我在 MATLAB 2012a 中使用 GUIDE 创建了一个滑块小部件。我希望它控制一个显示图像的轴，其中滑块通过一系列图像。

我在 m 文件的一部分中为 Min、Max 和 SliderStep 设置了滑块的属性。

```
sliderMin = 1;
sliderMax = size(result); % this is variable
sliderStep = [1, 1]; % major and minor steps of 1

set(handles.slider, 'Min', sliderMin);
set(handles.slider, 'Max', sliderMax);
set(handles.slider, 'SliderStep', sliderStep);
set(handles.slider, 'Value', sliderMin); % set to beginning of sequence 
```

在滑块回调中，我已验证 Min、Max 和 SliderStep 设置正确。

```
sliderMin = get(hObject, 'Min') % correct
sliderMax = get(hObject, 'Max') % correct
sliderStep = get(hObject, 'SliderStep') % correct
currentSliderStep = get(hObject, 'Value') % correct, 1 at start 
```

但是，当我单击滑块的箭头时，我只在开始和结束之间跳转。每次将正确的 Min、Max、SliderStep 和 Value（尽管只有 1 或 sliderMax）打印到命令窗口。我无法以 1 为增量来查看序列内部的图像。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T15:58:07.193

[实际滑块步长](http://www.mathworks.co.uk/help/techdoc/ref/uicontrol_props.html#bqxoip6)按范围缩放：以下`ActualStep = SliderStep * (Max - Min)`行应该可以解决您的问题：`sliderStep = [1, 1] / (sliderMax - sliderMin)`. 您可能应该检查在此行之前您没有被零除。`Max`请注意，如果不大于，则滑块不会呈现`Min`。