# StackOverflow 问答 10523000-10523999

# c# - 从配置管理器中提取连接字符串

> ID：10523002
> 
> 赞同：1
> 
> 时间：2012-05-09T19:41:29.633
> 
> 标签：c#, database, connection-string

我有个问题。我正在尝试通过

```
sqlConnStr = new qlConnection(ConfigurationManager.ConnectionStrings["PlacementConnectionString"].ConnectionString); 
```

但它一直失败：

> 对象引用未设置为对象的实例

我用调试器检查，这是`connectionStr`

```
{Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\Placement.accdb} 
```

我已经通过 VS2012 的 DataSet 向导导入了我的数据库，所以我做错了什么？

PS：我已经多次测试连接。

```
<connectionStrings>
   <add name="_201103578_P09.Properties.Settings.PlacementConnectionString" 
        connectionString="Provider=Microsoft.ACE.OLEDB.12.0;DataSource=|DataDirectory|\Placement.accdb"
        providerName="System.Data.OleDb" />
</connectionStrings> 
```

亲切的问候

马库斯

[更新]

我从

```
sqlAdapter = new SqlDataAdapter();

try
{
    sqlConnStr = new SqlConnection(ConfigurationManager.ConnectionStrings["PlacementConnectionString"].ConnectionString);
} 
```

至

```
sqlAdapter = new SqlDataAdapter();
string s = ConfigurationManager.ConnectionStrings[1].ConnectionString;

try
{
    sqlConnStr = new SqlConnection(s);
} 
```

我检查 s 并且值为

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\\Placement.accdb 
```

现在抛出一个错误

> System.ArgumentException：不支持关键字：“提供者”

无计可施；

==================================================== ================

对每个人-谢谢你，问题是（我忘了）当你使用 Access 数据库时，你必须使用`OleDbCommand`而不是`SqlCommand`. 谢谢你现在一切正常！– 马库斯刚刚编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-09T20:44:57.020

您的连接字符串名称不正确

```
<connectionStrings>
 <add name="_201103578_P09.Properties.Settings.PlacementConnectionString" 
    connectionString="Provider=Microsoft.ACE.OLEDB.12.0;DataSource=|DataDirectory|\Placement.accdb"
    providerName="System.Data.OleDb" /> 
```

相反，它应该是

```
<connectionStrings>
<add name="PlacementConnectionString" 
    connectionString="Provider=Microsoft.ACE.OLEDB.12.0;DataSource=|DataDirectory|\Placement.accdb"
    providerName="System.Data.OleDb" /> 
```

或者在你的代码中你应该寻找

```
ConfigurationManager.ConnectionStrings["_201103578_P09.Properties.Settings.PlacementConnectionString"].ConnectionString 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:45:43.733

关闭您发布的代码，我能看到的唯一解释是您获得的空引用与配置管理器没有通过您传递的字符串获取任何内容有关。

如果

```
ConfigurationManager.ConnectionStrings["PlacementConnectionString"] 
```

不返回任何东西——调用

```
.ConnectionString 
```

将因您的错误而失败。你能验证一下吗

> “放置连接字符串”

连接的正确名称是什么？

# asp.net - 验证gridview控件内的下拉列表

> ID：10523003
> 
> 赞同：1
> 
> 时间：2012-05-09T19:41:46.150
> 
> 标签：asp.net

为了测试，我尝试了 customvalidation

```
function ClientValidate(sender, args) { 
       //return false for testing...
       args.IsValid = false;

    }

 <asp:CustomValidator runat="server" ID="CustomValidator1" ControlToValidate="ddldetail"
                        Text="Please select" ValidateEmptyText="true"    
                        ClientValidationFunction="ClientValidate"  
                        Display="Dynamic">     
                    </asp:CustomValidator> 
```

编辑：这就是我想要发生的事情：

![在此处输入图像描述](../Images/07ea9c55c5bd9adb411a54f0ce85d069.png)

如何验证下拉列表，我已经做了无数次但我在这里做错了什么？任何第二双眼睛都可能发现它？如果用户没有选择任何帮助，我正在尝试验证下拉列表？

```
<asp:Button ID="btn" runat="server" Text="Submit" OnClick="btn_Click"  CausesValidation="true"/>

<asp:GridView ID="GVInputMapping" runat="server" AutoGenerateColumns="False" DataKeyNames="Id"
                     EnableModelValidation="True" onrowdatabound="GVInputMapping_RowDataBound">
                    <Columns>
                        <asp:BoundField DataField="Name" ControlStyle-Width="250px" HeaderText="Name" SortExpression="Name" />
                        <asp:TemplateField>
                            <ItemTemplate>
                        <asp:DropDownList runat="server" ID="ddldetail">
                        <asp:ListItem Selected="True" Value="0">Select me</asp:ListItem>
                        <asp:ListItem Value="1">abc</asp:ListItem>
                        <asp:ListItem Value="2">GHt</asp:ListItem>
                    </asp:DropDownList>
    <asp:RequiredFieldValidator ID="requiredDDL" runat="server" 
                        ControlToValidate="ddldetail" ErrorMessage="Please select" InitialValue="Select me"  Display="Dynamic"></asp:RequiredFieldValidator>

                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:36:26.177

您`InitialValue`将验证器设置为*Select me*，但该项目的*Value*实际上是`0`：

```
<asp:DropDownList ID="DropDownList1" runat="server">
    <asp:ListItem Text="Select Me" Value="0" />
    <asp:ListItem Text="Foo" Value="1" />
    <asp:ListItem Text="Bar" Value="2" />
</asp:DropDownList>
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
    ControlToValidate="DropDownList1" 
    ErrorMessage="Please select" 
    InitialValue="0"        
    Display="Dynamic">
</asp:RequiredFieldValidator> 
```

您还需要为每一行分配一个唯一的验证组，否则将为每一行启动验证。要分配唯一的验证组，您可以使用以下列`Id`：

```
ValidationGroup='<%# string.Format("Group_{0}", Eval("Id")) %>' 
```

您可以将此添加到验证器和行中的按钮。

# c# - 如何使用 XmlSerializer 序列化“System.Numerics.Complex”？

> ID：10523009
> 
> 赞同：3
> 
> 时间：2012-05-09T19:42:04.897
> 
> 标签：c#, xml, arrays, xml-serialization

`Complex[]`这是我在序列化对象时得到的 XML 输出：

```
<MyClass>               
    <Complex />
    <Complex />
    <Complex />
    <Complex />
</MyClass> 
```

[Complex](http://msdn.microsoft.com/en-us/library/system.numerics.complex.aspx)结构被标记为可序列化的，并且作为结构，它具有隐式的无参数构造函数。那么为什么不是每个 Complex 对象都序列化它的实部和虚部呢？这是否与结构的['Real'](http://msdn.microsoft.com/en-us/library/system.numerics.complex.real.aspx)和 ' [Imaginary](http://msdn.microsoft.com/en-us/library/system.numerics.complex.imaginary.aspx) ' 属性具有 getter 而不是 setter 的事实有关？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:19:40.513

It depends on the implementation of the serializer you are using to serialize the object.
If you try this, you will get what you are expecting:

```
using System.IO;
using System.Numerics;
using System.Runtime.Serialization.Formatters.Soap;

public class Test {
    public static void Main() {
        var c = new Complex(1, 2);
        Stream stream = File.Open("data.xml", FileMode.Create);
        SoapFormatter formatter = new SoapFormatter();
        formatter.Serialize(stream, c);
        stream.Close();
    }
} 
```

Instead, if you use classes in the `System.Xml.Serialization` namespace, you will get something similar to what you posted:

```
using System;
using System.IO;
using System.Numerics;
using System.Xml.Serialization;

public class Test {
    public static void Main() {
        var c = new Complex(1, 2);
        XmlSerializer s = new XmlSerializer(typeof(Complex));
        StringWriter sw = new StringWriter();
        s.Serialize(sw, c);
        Console.WriteLine(sw.ToString());
    }
} 
```

I think that this is due to the fact that the XmlSerializer will not serialize private members (as are `m_real` and `m_imaginary` in the `Complex` struct).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T20:59:58.467

`XmlSerializer`不序列化没有 setter 的属性（IIRC 它只序列化具有公共 getter 和 setter 的公共属性）。你有几个选择：

*   将`System.Numerics.Complex`类型替换为您创建的类型（并具有“完整”属性）
*   通过接口更改`MyClass`类以处理复数的序列化（和反序列化）`IXmlSerializable`。

第二个选项如下所示。

```
public class StackOverflow_10523009
{
    public class MyClass : IXmlSerializable
    {
        public Complex[] ComplexNumbers;

        public XmlSchema GetSchema()
        {
            return null;
        }

        public void ReadXml(XmlReader reader)
        {
            reader.ReadStartElement("MyClass");
            List<Complex> numbers = new List<Complex>();
            while (reader.IsStartElement("Complex"))
            {
                Complex c = new Complex(
                    double.Parse(reader.GetAttribute("Real")),
                    double.Parse(reader.GetAttribute("Imaginary")));
                numbers.Add(c);
                reader.Skip();
            }

            reader.ReadEndElement();
            this.ComplexNumbers = numbers.ToArray();
        }

        public void WriteXml(XmlWriter writer)
        {
            foreach (var complex in ComplexNumbers)
            {
                writer.WriteStartElement("Complex");
                writer.WriteStartAttribute("Real"); writer.WriteValue(complex.Real); writer.WriteEndAttribute();
                writer.WriteStartAttribute("Imaginary"); writer.WriteValue(complex.Imaginary); writer.WriteEndAttribute();
                writer.WriteEndElement();
            }
        }

        public override string ToString()
        {
            return "MyClass[" + string.Join(",", ComplexNumbers) + "]";
        }
    }
    public static void Test()
    {
        MyClass mc = new MyClass { ComplexNumbers = new Complex[] { new Complex(3, 4), new Complex(0, 1), new Complex(1, 0) } };
        XmlSerializer xs = new XmlSerializer(typeof(MyClass));
        MemoryStream ms = new MemoryStream();
        xs.Serialize(ms, mc);
        Console.WriteLine(Encoding.UTF8.GetString(ms.ToArray()));
        ms.Position = 0;
        MyClass mc2 = (MyClass)xs.Deserialize(ms);
        Console.WriteLine(mc2);
    }
} 
```

# mysql - 在mysql存储过程中创建表

> ID：10523014
> 
> 赞同：0
> 
> 时间：2012-05-09T19:42:22.660
> 
> 标签：mysql, stored-procedures

我正在尝试在 mysql 存储过程中创建一个表，但是每当我执行此过程时，我都没有在我的数据库中看到结果表。谁能告诉我发生了什么事？每当我在存储过程之外的 cmd 中输入它时，create table 查询就会起作用。

```
 delimiter //
    drop procedure if exists gm //
    create procedure gm()
            begin

        create table errorMessages (
        error_id int not null auto_increment,
        message varchar(200) not null default '',
        primary key(error_id)
        );

        end //
    delimiter ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:03:41.910

您是在执行存储过程还是只是创建它？

尝试

```
call gm(); 
```

它给出了任何错误？

# spring - Spring MVC 中的多态表单绑定

> ID：10523018
> 
> 赞同：4
> 
> 时间：2012-05-09T19:42:37.900
> 
> 标签：spring, spring-mvc, binding

是否可以给 Spring MVC 的表单绑定某种类型的提示来指示要实例化哪个类并用表单数据填充？

我有一些非常不寻常的要求来尝试构建一个动态表单，它代表不同对象的集合。用户可以将选择的类型中的对象添加到此集合中，然后使用表单元素设置该对象类型的属性。我可以弄清楚如何使用 jQuery 创建表单，但是当 Spring 不知道要提前绑定哪些类型时，我不确定如何让 Spring 处理大量 POST 数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T03:01:39.093

我能想到的一种方法是编写您自己的自定义[HandlerMethodArgumentResolver](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/method/support/HandlerMethodArgumentResolver.html)，它负责将请求转换为控制器方法的参数值。您应该能够创建一个自定义注释，该注释将向 Spring MVC 指示您的自定义处理程序方法参数解析器将解析特定的注释方法参数（例如`@CustomType Object argument`）。

一旦调用进入处理程序解析器，您可能可以确定 json 请求应映射到的类型，并使用实际类型调用 json 映射器。

您可以通过这种方式注册自定义参数解析器：

```
<annotation-driven>
    <argument-resolvers>
        <beans:bean class="..CustomArgumentResolver"/>
    </argument-resolvers>
</annotation-driven> 
```

# debugging - 是否可以将 Google Chrome 置于“无扩展”模式？

> ID：10523024
> 
> 赞同：1
> 
> 时间：2012-05-09T19:43:06.010
> 
> 标签：debugging, google-chrome, google-chrome-extension

有没有办法暂时停用所有（或选定的）Google Chrome 扩展程序？这在我调试页面时会很方便，因为某些扩展（例如 AdBlock、Clickable Links 等）会修改网页的内容。
此外，有时我想通过 Chrome 开发者工具的时间线监控页面加载方式。但是由于扩展活动也被记录下来，它可能会有点混乱。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:44:49.050

![打开隐身窗口。](../Images/07ca75b99497c6765f82427f2a365c24.png)

[https://support.google.com/chrome/bin/answer.py?hl=en&answer=95464](https://support.google.com/chrome/bin/answer.py?hl=en&answer=95464)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T20:49:52.437

~~对不起大家。在发布到这里之前，我应该做一些更好的研究。我在 chrome 网上商店中搜索并找到了这个扩展，它似乎可以做到这一点。对不起，打扰你。~~

由于给出了更好的建议，因此放弃了该解决方案（请参阅已接受的答案）。

# asp.net-mvc-3 - 将子域信息传递给 IRouteConstraint.Match 中的控制器

> ID：10523026
> 
> 赞同：0
> 
> 时间：2012-05-09T19:43:08.960
> 
> 标签：asp.net-mvc-3, routes, subdomain

在子域路由约束中，我想使用下面的代码将子域名传递给控制器​​。但是在控制器子域条目中缺少（仅存在操作和控制器条目）。这里有什么问题？或者我应该在控制器本身中嗅探子域（在 Request.Headers["HOST"] 的帮助下）？最佳做法是什么？

```
public class SubdomainRouting : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        //
        //get subdomain here
        //

        if (values.ContainsKey("subdomain") == false)
        {
            values.Add("subdomain", subdomain);
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:16:36.073

我认为您以`values`错误的方式解释了论点。根据 MSDN，它是*一个包含 URL 参数的对象*。所以我不确定它是否与您在控制器中获得的 RouteDataDictionary 相同。

获取子域的最简单方法是从控制器中获取的 Request.Url.Host 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T14:02:14.763

好吧，我改变了我的路由约束实现。我没有实现 IRouteConstraint，而是实现了 RouteBase。这样我就可以添加路由值：

```
public class SubdomainRoute : RouteBase
{
    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        RouteData returnValue = null;

        //some code here 

        returnValue = new RouteData(this, new MvcRouteHandler());
        returnValue.Values.Add("controller", "SomeController");
        returnValue.Values.Add("action", "SomeAction");
        returnValue.Values.Add("key", some_value_to_pass_to_controller);

        //some code here

        return returnValue;
    }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
        return null;
    }
} 
```

# c# - C#在Windows中重新排列多显示位置

> ID：10523027
> 
> 赞同：2
> 
> 时间：2012-05-09T19:43:24.370
> 
> 标签：c#, graphics

有没有一种方便的方法来重新排列如何通过 C# 定位多个显示器？

我在显示墙上工作，每次有人从驱动它们的计算机上拔下显示器时，我都必须花时间在屏幕分辨率工具上拖动它们。如果我能找到一种从代码中更改显示位置的方法，我可以自动化这个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:52:55.703

看起来使用 win32 API 是要走的路。

[`ChangeDisplaySettingsEx`](http://www.pinvoke.net/default.aspx/user32/ChangeDisplaySettingsEx.html)与朋友一起似乎是要走的路。

# c++ - 在 3D 网格中查找具有随机点的立方体的角点

> ID：10523029
> 
> 赞同：1
> 
> 时间：2012-05-09T19:43:30.767
> 
> 标签：c++, vector, grid, cube, coordinate

我有一个均匀分布的 3D 网格的坐标 (x,y,z)。给定网格某处的随机 3D 点 (x,y,z)，如何找到哪个立方体具有该点。我需要知道立方体的 8 个角。
我在 C++ 中的向量列表中有网格点数据。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:51:27.337

假设所有维度的网格立方体的长度相等，您可以通过计算得到最接近 ohe origo 的坐标

```
gx = x - x%l;
gy = y - y%l;
gz = z - z%l; 
```

其中`gx`, `gy`,`gz`是最接近 origo 的网格立方体坐标（我假设`x`, `y`, `z`>=0 在这里），`%`是模算子并且`l`是网格立方体的长度。

注意：您也可以通过这种方式执行计算：（`gx = static_cast<int>(x)/l*l;`考虑`static_cast<>`非整数`x`）

那么网格立方体`(x, y, z)`落入的8个角分别是：

```
(gx, gy, gz)
(gx+l, gy, gz)
(gx, gy+l, gz)
(gx, gy, gz+l)
(gx+l, gy+l, gz)
(gx+l, gy, gz+l)
(gx, gy+l, gz+l)
(gx+l, gy+l, gz+l) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:54:17.827

假设网格的原点在`(0,0,0)`，您应该除以`(x,y,z)`网格的大小。然后你应该将结果四舍五入并乘以网格的大小，即：

```
(nx, ny, nz) = [(x,y,z) / grid_size] * grid_size 
```

其中`[x]`是最大整数`n`，因此`n<=x`（在实践中，您应该将浮点运算的结果转换为`int`）。您要搜索的要点是：

```
(nx, ny, nz)
(nx+grid_size, ny, nz)
(nx, ny+grid_size, nz)
(nx, ny, nz+grid_size)
(nx+grid_size, ny+grid_size, nz)
(nx+grid_size, ny, nz+grid_size)
(nx, ny+grid_size, nz+grid_size)
(nx+grid_size, ny+grid_size, nz+grid_size) 
```

# javascript - javascript打印的窗口标题

> ID：10523036
> 
> 赞同：4
> 
> 时间：2012-05-09T19:44:00.873
> 
> 标签：javascript, window.open

找到此代码来打印我修改的 javascript 元素。虽然我添加了`document.title`和`<title></title>`标签，但在常规文本编辑器中打开的窗口显示`untitled`.

这通常是文本保存之前的情况。有没有办法显示标题？

```
 var element=document.getElementById(element_id);
    var newWin=window.open('','Print-Window','width=400,height=400,top=100,left=100');

    newWin.document.open();
    newWin.document.title = "Readings on PageLinks";
    newWin.document.write('<html><head><title>'+newWin.document.title+'</title></head><body   onload="window.print()">'+element.innerHTML+'</body></html>');
    newWin.document.close();

    setTimeout(function(){ newWin.close(); },10); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:00:31.717

实际上原始代码也适用于我（Chrome，未在其他浏览器上测试）

```
var element_id = "id1";
var element = document.getElementById(element_id);
var newWin = window.open('', 'Print-Window', 'width=400,height=400,top=100,left=100');

newWin.document.open();
newWin.document.title = "Readings on PageLinks";
newWin.document.write('<html><head></head><body onload="window.print()">' + element.innerHTML + '</body></html>');
newWin.document.close();

setTimeout(function() {
    newWin.close();
}, 10);​ 
```

参见[JSFiddle](http://jsfiddle.net/hzxph/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:52:22.960

我的猜测是分配`newWin.document.title = "Readings on PageLinks";`失败，因为当时`<title>`页面中没有元素。

因此，`newWin.document.title`仍然未定义。然后你将它连接到 string `<title>'+newWin.document.title+'</title>`，所以它被`toString()`-ed 为“未定义”。

因此，只需将标题直接写入字符串

```
newWin.document.write('<html><head><title>Readings on PageLinks</title>...'); 
```

正如 Eran Medan 在评论中所建议的那样。

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:34:34.693

这可能是随文档一起打开的编辑器的行为。在文档保存之前，编辑器标题会显示“无标题”。这必须是设计使然。

# php - 没有从数据库返回属性？

> ID：10523039
> 
> 赞同：1
> 
> 时间：2012-05-09T19:44:15.653
> 
> 标签：php, mysql, sql

我有两个表：引用（顶部）和推文（底部）：

```
tweet_id  class_id
------------------
2         1
5         1
6         2

tweet_id  text
------------------
1         foo
2         bar
3         baz
4         foobar
5         boobaz
6         foo bar
7         bar baz 
```

我想检索引用表中的所有推文信息。所需的输出是：

```
tweet_id  class_id  text
---------------------------
2         1         foo
5         1         foobaz
6         2         foo bar 
```

我现在正在使用：

```
SELECT r.tweet_id, t.text, r.class_id
FROM tweets t 
LEFT JOIN `references` r ON (r.tweet_id = t.tweet_id) 
ORDER BY r.tweet_id ASC LIMIT 100 
```

但这让我在尝试获取 tweet_id 时空手而归。但是，会显示文本：

```
while($tweet = db_fetch_object($result)) {
  echo "$tweet->tweet_id $tweet->text"
} 
```

在结果集中（通过 phpmyadmin 检查），每条记录的 tweet_id 和 class_id 为 NULL。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:18:15.980

没关系 :-) 我应该`LEFT JOIN`反之亦然：

```
SELECT r.tweet_id, r.class_id, t.text
FROM `references` r
LEFT JOIN tweets t ON (r.tweet_id = t.tweet_id) 
ORDER BY r.tweet_id ASC LIMIT 100 
```

# asp.net - 站点地图授权使菜单消失

> ID：10523042
> 
> 赞同：1
> 
> 时间：2012-05-09T19:44:44.873
> 
> 标签：asp.net, web-config, sitemap

如果没有 securityTrimmingEnabled，菜单显示得很好，但是一旦我打开它，整个菜单就会消失。就像，我在谈论一切，即使是默认页面和那些不需要授权的页面。

这是 Web.sitemap 的代码

```
 <?xml version="1.0" encoding="utf-8" ?>
    <siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0">
      <siteMapNode>
        <siteMapNode title="Home" url="~/Default.aspx" />
        <siteMapNode title="About" url="~/About.aspx" />
        <siteMapNode title="Suppliers" url="~/Suppliers.aspx" />
        <siteMapNode title="Departments" url="~/Departments.aspx" />
        <siteMapNode title="Management">
          <siteMapNode title="Account" url="~/Account_Employee.aspx" />
          <siteMapNode title="Store" url="~/StoreManagement.aspx" />
          <siteMapNode title="Chain" url="~/ChainManagement.aspx" />
          <siteMapNode title="System" url="~/SystemAdmin.aspx" />
        </siteMapNode>
      </siteMapNode>
    </siteMap> 
```

这是 web.config 中站点授权设置的代码

```
 <authentication mode="Forms">
            <forms loginUrl="~/Account/Login.aspx" timeout="2880"/>
        </authentication>
        <membership defaultProvider="TestServerMembership">
            <providers>
                <clear/>
                <add name="TestServerMembership" type="System.Web.Security.SqlMembershipProvider" connectionStringName="TestServerConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresUniqueEmail="false" requiresQuestionAndAnswer="false" minRequiredPasswordLength="5" minRequiredNonalphanumericCharacters="0" applicationName="SampleSite" passwordFormat="Hashed"/>
            </providers>
        </membership>
        <profile>
            <providers>
                <clear/>
                <add name="TestServerMembershipProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="TestServer" applicationName="/"/>
            </providers>
        </profile>
        <roleManager enabled="true" defaultProvider="TestServerRoleProvider">
            <providers>
                <clear/>
                <add connectionStringName="TestServerConnection" applicationName="/" name="TestServerRoleProvider" type="System.Web.Security.SqlRoleProvider"/>
            </providers>
        </roleManager>
        <siteMap enabled="true">
            <providers>
                <clear/>
                <add siteMapFile="Web.sitemap" name="AspNetXmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" securityTrimmingEnabled="true"/>
            </providers>
        </siteMap> 
```

这是 web.config 中角色设置的代码

```
 <location path="Default.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>
    <location path="About.aspx">
        <system.web>
            <authorization>
        <deny users="*"/>
                <allow roles="User"/>
            </authorization>
        </system.web>
    </location>
    <location path="Departments.aspx">
        <system.web>
            <authorization>
        <deny users="*"/>
        <allow roles="User"/>
            </authorization>
        </system.web>
    </location>
    <location path="Suppliers.aspx">
        <system.web>
            <authorization>
        <deny users="*"/>
        <allow roles="User"/>
            </authorization>
        </system.web>
    </location>
  <location path="Account_Employee.aspx">
    <system.web>
      <authorization>
        <deny users="*"/>
        <allow roles="User"/>
      </authorization>
    </system.web>
  </location>
  <location path="StoreManagement.aspx">
    <system.web>
      <authorization>
        <deny users="*"/>
        <allow roles="StoreManager"/>
      </authorization>
    </system.web>
  </location>
  <location path="ChainManagement.aspx">
    <system.web>
      <authorization>
        <deny users="*"/>
        <allow roles="ChainManager"/>
      </authorization>
    </system.web>
  </location>
  <location path="SystemAdmin.aspx">
    <system.web>
      <authorization>
        <deny users="*"/>
        <allow roles="XsiteInternalAdmin"/>
      </authorization>
    </system.web>
  </location> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:51:21.220

> 事实证明，当您使用水平 ASP.NET 菜单时，这是一个问题。您通常在使用水平菜单时隐藏站点地图文件的根节点，因为带有一个单独根项的顶行没有意义。（SiteMapDataSource ShowStartingNode 属性设置为 False。）
> 
> 修复是通过在 web.sitemap 中包含 roles="*" 来确保每个角色都可以访问根目录下的（未使用的）虚拟 siteMapNode，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap  enableLocalization="true"
     xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="" title="" roles="*"  description="">
      <siteMapNode url="~/default.aspx" resourceKey="siteMapHome" 
       title="Home" roles="admin,account" description="" />
<!-----More nodes--> 
```

[这里是主要来源。](http://weblogs.asp.net/kencox/archive/2008/02/12/horizontal-menu-disappears-with-securitytrimmingenabled-quot-true-quot.aspx)

对于您的代码。

```
 <?xml version="1.0" encoding="utf-8" ?>
    <siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0">
      <siteMapNode roles="*">
        <siteMapNode title="Home" roles="*" url="~/Default.aspx" />
        <siteMapNode title="About" roles="*" url="~/About.aspx" />
        <siteMapNode title="Suppliers" roles="*" url="~/Suppliers.aspx" />
        <siteMapNode title="Departments" roles="*" url="~/Departments.aspx" />
        <siteMapNode title="Management" roles="*">
          <siteMapNode title="Account" roles="*" url="~/Account_Employee.aspx" />
          <siteMapNode title="Store" roles="*" url="~/StoreManagement.aspx" />
          <siteMapNode title="Chain" roles="*" url="~/ChainManagement.aspx" />
          <siteMapNode title="System" roles="*" url="~/SystemAdmin.aspx" />
        </siteMapNode>
      </siteMapNode>
    </siteMap> 
```

# sql-server-2005 - 特定查询导致 ADO Recordset 失败并显示 E_FAIL

> ID：10523045
> 
> 赞同：1
> 
> 时间：2012-05-09T19:45:04.467
> 
> 标签：sql-server-2005, ado, recordset

我正在尝试使用 ADO 对 SQL Server 2005 运行（两个）查询：

```
SELECT
   sp.nt_username AS NTUsername,
   sp.hostname AS HostName
FROM sys.dm_tran_locks tl
   INNER JOIN master.dbo.sysprocesses sp
   ON tl.request_session_id = sp.spid
WHERE tl.resource_type = N'APPLICATION'
AND tl.resource_database_id = (
       SELECT dbid
       FROM master.dbo.sysprocesses
       WHERE spid = @@spid) 
```

和 SQL Server 2000 兼容版本：

```
SELECT
   sp.nt_username AS NTUsername,
   sp.hostname AS HostName
FROM master.dbo.syslockinfo sli
   INNER JOIN master.dbo.sysprocesses sp
   ON sli.req_spid = sp.spid
WHERE rsc_type = 10 --10=Appliction
AND rsc_dbid = (
   SELECT dbid
   FROM master.dbo.sysprocesses
   WHERE spid = @@spid) 
```

查询*执行*良好：

```
IRecordset rs =new Recordset();
rs.CursorLocation = adUseClient; //the default for a Recordset is adUseServer (Connection.Execute's default is adUseClient)
rs.CursorType := adOpenForwardOnly; //the default
rs.Open(szQuery, conn.ConnectionObject,
       adOpenForwardOnly, //CursorType
       adLockReadOnly, //LockType
       adCmdText); 
```

但随后***检查***`BOF`or的状态`EOF`：

```
if (rs.EOF) then 
```

触发异常：

*   HRESULT：0x80004005（未指定的错误）
*   错误消息：“数据提供者或其他服务返回了 E_FAIL 状态”

这个导致 ADO 惨遭失败的查询是怎么回事？

* * *

**注意**：确实***有***一个匹配的行：

![在此处输入图像描述](../Images/996cf89f1e633e81dc7bb9d43f34bba8.png)

`provider`我在连接字符串中使用的是`Provider=SQLOLEDB`.

奖金喋喋不休：

> ## 系统进程
> 
> ```
>  nt_username nchar(128)
>   hostname    nchar(128) 
> ```

并查询两者 - 但一次一个 - 有效，例如：

```
SELECT
   sp.nt_username AS NTUsername 
```

和

```
SELECT
   sp.hostname AS HostName 
```

工作。查询两者都失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:57:58.110

我发现了问题。 [这是 SQL Server 2005 和 ADO 的一个已知问题](http://social.msdn.microsoft.com/forums/en-US/sqldataaccess/thread/75dbff80-2c95-408d-8805-b2fc9cc7a658/)：

即使`nt_username`并且`hostname`已经*是* `nchar(128)`，您也需要**手动**将它们转换为`nchar(128)`

```
SELECT
   CAST(sp.nt_username AS nchar(128)) AS NTUsername,
   CAST(sp.hostname AS nchar(128)) AS HostName
FROM sys.dm_tran_locks tl
   INNER JOIN master.dbo.sysprocesses sp
   ON tl.request_session_id = sp.spid
WHERE tl.resource_type = N'APPLICATION'
AND tl.resource_database_id = (
       SELECT dbid
       FROM master.dbo.sysprocesses
       WHERE spid = @@spid) 
```

SQL Server 2005 和 ADO 以及在查询中使用的还有一个已知错误`@@spid`；你做不到。幸运的是，在这种情况下，我可以使用`DB_ID()`：

```
SELECT
   CAST(sp.nt_username AS nchar(128)) AS NTUsername,
   CAST(sp.hostname AS nchar(128)) AS HostName
FROM sys.dm_tran_locks tl
   INNER JOIN master.dbo.sysprocesses sp
   ON tl.request_session_id = sp.spid
WHERE tl.resource_type = N'APPLICATION'
AND tl.resource_database_id = DB_ID() 
```

八大兵。

SQL Server 2005 错误。

它可能仍然存在于 SQL Server 2008、SQL Server 2008 R2、SQL Server 2012

# jquery - Colorbox 不会显示控件、边框

> ID：10523047
> 
> 赞同：2
> 
> 时间：2012-05-09T19:45:21.573
> 
> 标签：jquery, controls, overlay, colorbox

我正在尝试使用 Colorbox，以便它在加载时打开并提醒访问者注册已开始参加会议。[我在Javascript Coder](http://www.javascript-coder.com/window-popup/javascript-popup-window.phtml)找到了我正在使用的代码。

我无法让“X”关闭 Colorbox 以显示，也不会出现周围的黑色背景。但是，当您将鼠标悬停在 X 应该在的位置时，您可以知道那里应该有东西。我在 FireFox 和 IE 中遇到了这个问题。

我在这个页面上有很多事情要做——Flash、PrettyPhoto、Ajax——所以我想知道事情是否相互竞争，是否应该使用更简单的方法。

您可以提供的任何帮助将不胜感激。这是测试版的链接：[http ://www.iais2012.org/test.htm](http://www.iais2012.org/test.htm)

请善待 - 这是我第一次建立网站，别介意使用所有这些疯狂的代码 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:56:40.773

安慰：

```
Failed to load resource: the server responded with a status of 404 (Not Found)
http://www.iais2012.org/css/images/border.pngFailed to load resource: the server responded with a status of 404 (Not Found)
http://www.iais2012.org/css/images/controls.pngFailed to load resource: the server responded with a status of 404 (Not Found)
http://www.iais2012.org/css/images/loading_background.pngFailed to load resource: the server responded with a status of 404 (Not Found)
http://www.iais2012.org/css/images/loading.gifFailed to load resource: the server responded with a status of 404 (Not Found) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:48:57.337

我会简单地使用这个流行的图书馆

[http://fancybox.net/](http://fancybox.net/)

# android - 如何在没有按钮的情况下关闭 AlertDialog.Builder

> ID：10523051
> 
> 赞同：1
> 
> 时间：2012-05-09T19:45:37.633
> 
> 标签：android

当我的警报弹出时，我希望它在再次被触摸时关闭而不添加任何按钮。

所以在地图针上触摸

```
@Override
    protected boolean onTap(int i) {
        OverlayItem item = items.get(i);    
        dialog.setTitle(item.getSnippet());
        dialog.setMessage(item.getTitle());
        dialog.show();
        return (true);
    } 
```

那么如何通过触摸警报或背景中的任何位置使其消失。

**编辑：添加代码**

```
 private class SitesOverlay extends ItemizedOverlay<CustomItem> {
private Drawable heart=null;
private List<CustomItem> items=new ArrayList<CustomItem>();
private PopupPanel panel=new PopupPanel(R.layout.popup);

public SitesOverlay() {
  super(null);

  heart=getMarker(R.drawable.heart_full);

  JSONObject json;
  JSONObject json2;
  String resultURL = queryRESTurl("http://www.kickintheapp.com/api/maps393/json.json");
  try {
      json = new JSONObject(resultURL);

  JSONArray nameArray = json.names();

  JSONArray valArray;

      valArray = json.toJSONArray(nameArray);

  for (int i = 0; i < valArray.length(); i++) 
  {

      Log.e(nameArray.getString(i), valArray.getString(i));
      json2 = new JSONObject(valArray.getString(i));
      JSONArray nameArray2 = json2.names();

      JSONArray valArray2 = json2.toJSONArray(nameArray2);
      for (int a = 0; a < valArray2.length(); a++) 
      {

          // add to maps here
          items.add(new CustomItem(getPoint(valArray2.getDouble(3),valArray2.getDouble(2)), valArray2.getString(1), valArray2.getString(0),getMarker(R.drawable.pin_yellow), heart));
          Log.e(nameArray2.getString(a), valArray2.getString(a));
      }
   }
  } catch (JSONException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
  }

  populate();
}

@Override
protected CustomItem createItem(int i) {
  return(items.get(i));
}

@Override
public void draw(Canvas canvas, MapView mapView,
                  boolean shadow) {
  super.draw(canvas, mapView, shadow);

}

@Override
protected boolean onTap(int i) {
    OverlayItem item=getItem(i);
    GeoPoint geo=item.getPoint();
    Point pt=map.getProjection().toPixels(geo, null);

    View view=panel.getView();

    ((TextView)view.findViewById(R.id.latitude))
      .setText(item.getSnippet());
    ((TextView)view.findViewById(R.id.longitude))
      .setText(item.getTitle());

    panel.show(pt.y*2>map.getHeight());

    return(true);
}

class PopupPanel {
   View popup;
   boolean isVisible=false;

 PopupPanel(int layout) {
   ViewGroup parent=(ViewGroup)map.getParent();

   popup=getLayoutInflater().inflate(layout, parent, false);

   popup.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
      hide();
    }
  });
}

View getView() {
  return(popup);
}

void show(boolean alignTop) {
  RelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(
        RelativeLayout.LayoutParams.WRAP_CONTENT,
        RelativeLayout.LayoutParams.WRAP_CONTENT
  );

  if (alignTop) {
    lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    lp.setMargins(0, 20, 0, 0);
  }
  else {
    lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    lp.setMargins(0, 0, 0, 60);
  }

  hide();

  ((ViewGroup)map.getParent()).addView(popup, lp);
  isVisible=true;
}

void hide() {
  if (isVisible) {
    isVisible=false;
    ((ViewGroup)popup.getParent()).removeView(popup);
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:54:42.567

有什么特别的理由不使用`PopupWindow`？它使您可以很容易地收到“内部”和“外部”触摸事件的通知。

# regex - 我们如何实现正则表达式来解析和分组字符串中可能排除或不排除特定短语的部分？

> ID：10523055
> 
> 赞同：1
> 
> 时间：2012-05-09T19:45:48.960
> 
> 标签：regex

给定以下示例，我们如何将其解析为可能/可能不包含其他短语的组？

我们需要的：

```
 (Text: any number of words) (LocationIndicator: 0 or 1 @) (Location: any number of words) 
```

例子：

```
 "meet me @home":
            <Text>="meet me"
            <LocationIndicator>="@"
            <Location>="home"
    "meet me in the kitchen @home":
            <Text>="meet me in the kitchen"
            <LocationIndicator>="@"
            <Location>="home"
    "     meet me       @      home      ":
            <Text>="meet me"
            <LocationIndicator>="@"
            <Location>="home"
    "meet me":
            <Text>="meet me"
            <LocationIndicator>=""
            <Location>="" 
```

这个正则表达式可以满足我们的需要，但前提是我们包含 @ 短语：

```
 ^\s*(((?<Text>.*)?)\s*((?<LocationIndicator>(?:@)+?)\s*(?<Location>.*)))\s*$ 
```

如果我们排除 @ 短语，我们将找不到匹配项。换句话说，这无法匹配/分组：

```
 "meet me":
            <Text>="meet me"
            <LocationIndicator>=""
            <Location>="" 
```

我们试过包括一个？在 LocationIndicator/Location 组之后，但将短语与文本分组：

```
 ^\s*(((?<Text>.*)?)\s*((?<LocationIndicator>(?:@)+?)\s*(?<Location>.*))?)\s*$

    "meet me @home":
            <Text>="meet me @home"
            <LocationIndicator>=""
            <Location>="" 
```

我们如何用一个表达式匹配所有给出的示例？

注意：我们在 C# 中使用这些正则表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:14:50.303

您正朝着正确的方向前进，添加`?`. 此外，您需要做的是将（至少）第一个通配符匹配替换为`.*`不包括您的位置指示符的内容，例如`[^@]*`。

编辑：我简化了你的表达（有一些额外的括号和不必要的非贪婪）并测试了它。

```
^\s*(?<Text>[^@]*)?\s*(?:(?<LocationIndicator>[@]+)\s*(?<Location>.*))?\s*$ 
```

见[http://rubular.com/r/C5lfx9cvtZ](http://rubular.com/r/C5lfx9cvtZ)。

# python - 使用 wxPython 返回多个文件路径以在另一个函数中使用

> ID：10523058
> 
> 赞同：2
> 
> 时间：2012-05-09T19:46:02.407
> 
> 标签：python, wxpython

我在这里尝试做的是从 wxPython 框架应用程序中选择多个文件，然后在同一个 wxPython 应用程序的另一个函数中利用这些文件路径。我意识到我可以使用以下代码来选择多个文件：

```
def OnOpen(self,e)
   dialog = wx.FileDialog(self, "Choose a file", "", "", "*.", wx.MULTIPLE)
   if dialog.ShowModal() == wx.ID_OK:
      filelist = dialog.GetPaths() 
```

所以'filelist'变量现在是用户选择的文件列表。但是，我似乎找不到在另一个函数中使用此列表的方法。我希望我可以在另一个函数中的这个函数中使用 return 语句并将其分配给一个变量，但它似乎不允许我这样做。我想这是因为我有一个按钮事件已经在使用这个函数。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:15:56.277

我不认为我完全理解这里的问题。该`OnOpen`函数是按钮单击的事件处理程序？所以它在单击按钮时执行。一个窗口应用程序（比如你使用 wxPython 的）通常是事件驱动的，它响应像按钮点击这样的事件。主 GUI 线程循环并分析可由您的应用程序处理的事件。因此，当您编写应用程序时，这些事件处理程序是您想要执行的操作的入口点。

我认为最好的方法就是使用其他函数并传入`filelist`参数，例如：

```
def OnOpen(self,e)
   dialog = wx.FileDialog(self, "Choose a file", "", "", "*.", wx.MULTIPLE)
   if dialog.ShowModal() == wx.ID_OK:
      filelist = dialog.GetPaths()
      self.otherFunc(filelist)

def otherFunc(self, filelist):
   "do something here" 
```

保存`filelist`到属性有时可能会出现问题。正如我所说，您可能有多个想要使用`filelist`属性的入口点，您必须预测可能出现的问题。但正如我在一开始所说的那样——我可能还没有完全理解你的问题。

另一种可能性：也许你的问题是你想实际重用`OnOpen`？`None`第一种可能性是作为参数传递，因为`e`未使用。另一种更好的可能性是`OnOpen`不带`e`参数定义并将事件绑定更改为`self.Bind(wx.EVT_BUTTON, self.OnButtonwx.EVT_BUTTON(<some object>, lambda evt: self.OnOpen())`. 你在这里明确地说你不需要这个`evt`论点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:02:23.067

将列表作为属性放在 self 中，还是将 self 作为属性包含一个获取路径的侦听器，或者调用另一个函数，将路径作为参数提供给它？

# excel - 比较两个Excel列，输出A中没有出现在B中的单元格

> ID：10523059
> 
> 赞同：0
> 
> 时间：2012-05-09T19:46:05.087
> 
> 标签：excel

我正在尝试比较 excel 中的两列，A 和 B。A 列包含客户编号的完整列表。B 列包含相同客户编号的不完整列表。因此，如果客户编号在 A 中，但不在 B 中，则将该编号输出到 C 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:58:24.327

我会将该`MATCH`功能与`ISNA`.

如果我有下表

```
A       B       C
1       4   
2       3   
3       1   
4       7   
5       2       5
6               6
7 
```

我在“A”列中放入了完整的客户列表，在 B 列中放入了随机排序的部分列表。然后我将函数放入 C1（以及 C 列的其余部分）：

`=IF(ISNA(MATCH(A1,B:B,0)),A1, "")`

现在我只在 C 列中看到值“5”和“6”，因为它们是唯一没有出现在 B 列中的两个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:57:39.703

在 Cel C1 =IF(ISERROR(VLOOKUP(A1,$B$1:$B$10,1,FALSE)),A1,"")

调整行数并填写 A 列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T19:58:52.953

我想你正在寻找这样的东西：

```
=IF(ISERROR(MATCH(A1,B1,0)),A1,"") 
```

沿新列传播该公式，当 B 列不匹配时，它将重新打印填充的 A 列。

参考网址： http: [//support.microsoft.com/kb/213367](http://support.microsoft.com/kb/213367)

（我相信我读错了原始问题，并且假设 A 列和 B 列已经在值对齐的位置进行了排序。）

# php - 给定“PDO”，“mysqli_stmt”的目的是什么？

> ID：10523061
> 
> 赞同：0
> 
> 时间：2012-05-09T19:46:15.320
> 
> 标签：php, pdo, mysqli

我正在阅读**php db 类**，我正在阅读的所有内容都推荐**"PDO"**。凉爽的。那么**“mysqli_stmt”的***目的*是什么？是否已弃用？

 **请指教。

轨枕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:50:13.390

做事的方法不止一种。PDO 是一个数据库层，它允许您通过各种驱动程序使用许多不同的数据库类型。 `mysqli_*`仅适用于 MySQL。

两者都可以在使用 MySQL 数据库时完成工作。我推荐 PDO，但这只是我的偏好，因为我喜欢将来可能更轻松地更改数据库的灵活性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:51:44.940

据说 Mysqli 是两者中性能更快的，但我认为 PDO 的功能远远超过 Mysqli。在更改数据库时，我也更喜欢 PDO 的灵活性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T19:53:48.587

`PDO`是一个抽象层，`mysqli`是一个直接与数据库交互的扩展。**

# codeigniter - CodeIgniter - 模型内的调用方法？

> ID：10523062
> 
> 赞同：5
> 
> 时间：2012-05-09T19:46:16.330
> 
> 标签：codeigniter

我有以下代码：

```
class Badge extends CI_Model
{
    public function foo()
    {
        echo $this->bar('world');
    }

    public function bar($word)
    {
        return $word;
    }
} 
```

但它总是给我一个错误`echo $this->bar('world');`。

> 调用未定义的方法（......）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T20:41:56.740

您没有将模型加载到控制器中：

```
public function test()
{
    $this->load->model('badge');
    $this->badge->foo();
} 
```

因为代码有效 - 我刚刚通过使用未经编辑的模型粘贴对其进行了测试：

```
class Badge extends CI_Model
{
    public function foo()
    {
        echo $this->bar('world');
    }

    public function bar($word)
    {
        return $word;
    }
} 
```

输出：

```
world 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-30T16:11:44.840

为了避免任何外部调用依赖，您需要获取 Codeigniter 实例并通过实例调用方法。

```
class Badge extends CI_Model
{
    public function foo()
    {   
        $CI =& get_instance();

        echo $CI->Badge->bar('world');
    }

    public function bar($word)
    {
        return $word;
    }
} 
```

# recursion - Recur 不会以完美的尾递归函数编译

> ID：10523063
> 
> 赞同：2
> 
> 时间：2012-05-09T19:46:26.470
> 
> 标签：recursion, clojure, lisp

```
(defn matrix-diagonals-odd-p
  ([matrix] (matrix-diagonals-odd-p matrix 0))
  ([matrix offset]
     (let [len (alength matrix)]
       (if (> (+ (bit-shift-right len 1) (bit-and len 1)) offset)
         (if (= (+ (bit-and (get (get matrix offset) offset) 1)
                   (bit-and (get (get matrix (- len 1 offset)) (- len 1 offset)) 1)
                   (bit-and (get (get matrix offset) (- len 1 offset)) 1)
                   (bit-and (get (get matrix (- len 1 offset)) offset) 1)) 4)
         (recur matrix (inc offset))
         false) true)))) 
```

我得到`java.lang.UnsupportedOperationException: Can only recur from tail position`但这*是*尾部位置。为什么/什么给了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:59:59.800

这适用于 Clojure 1.3 和 1.4。也许同一个命名空间中还有其他功能会造成麻烦？

# c++ - 奇怪的编译代码

> ID：10523065
> 
> 赞同：10
> 
> 时间：2012-05-09T19:46:29.927
> 
> 标签：c++, qt, assembly, x86, google-nativeclient

我已经用谷歌的 nacl 编译器编译了一些 Qt 代码，但是 ncval 验证器并不能理解它。众多例子中的一个：

```
src/corelib/animation/qabstractanimation.cpp:165 
```

以下是相关代码：

```
#define Q_GLOBAL_STATIC(TYPE, NAME)                                  \
    static TYPE *NAME()                                              \
    {                                                                \
        static TYPE thisVariable;                                    \
        static QGlobalStatic<TYPE > thisGlobalStatic(&thisVariable); \
        return thisGlobalStatic.pointer;                             \
    }

#ifndef QT_NO_THREAD
Q_GLOBAL_STATIC(QThreadStorage<QUnifiedTimer *>, unifiedTimer)
#endif 
```

编译为：

```
00000480 <_ZL12unifiedTimerv>:
     480:       55                      push   %ebp
     481:       89 e5                   mov    %esp,%ebp
     483:       57                      push   %edi
     484:       56                      push   %esi
     485:       53                      push   %ebx
     486:       83 ec 2c                sub    $0x2c,%esp
     489:       c7 04 24 28 00 2e 10    movl   $0x102e0028,(%esp)
     490:       8d 74 26 00             lea    0x0(%esi,%eiz,1),%esi
     494:       8d bc 27 00 00 00 00    lea    0x0(%edi,%eiz,1),%edi
     49b:       e8 fc ff ff ff          call   49c <_ZL12unifiedTimerv+0x1c>
     4a0:       84 c0                   test   %al,%al
     4a2:       74 1c                   je     4c0 <_ZL12unifiedTimerv+0x40>
     4a4:       0f b6 05 2c 00 2e 10    movzbl 0x102e002c,%eax
     4ab:       83 f0 01                xor    $0x1,%eax
     4ae:       84 c0                   test   %al,%al
     4b0:       74 0e                   je     4c0 <_ZL12unifiedTimerv+0x40>
     4b2:       b8 01 00 00 00          mov    $0x1,%eax
     4b7:       eb 27                   jmp    4e0 <_ZL12unifiedTimerv+0x60>
     4b9:       8d b4 26 00 00 00 00    lea    0x0(%esi,%eiz,1),%esi
     4c0:       b8 00 00 00 00          mov    $0x0,%eax
     4c5:       eb 19                   jmp    4e0 <_ZL12unifiedTimerv+0x60>
     4c7:       90                      nop
     4c8:       90                      nop
     4c9:       90                      nop
     4ca:       90                      nop
     4cb:       90                      nop 
```

检查**49b 处的调用指令：**这是验证器无法理解的。到底是什么可以诱使编译器发出一条调用自身中间的指令？有没有解决的办法？我用 -g -O0 -fno-inline 编译。编译器错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:56:48.563

大概它实际上是对外部符号的调用，它将在链接时填充。实际上会被调用的是 externalSymbol-4，这有点奇怪——也许这就是让 ncval 验证器失去意义的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:21:01.220

这是一个动态库还是一个尚未链接到可执行文件的静态对象？

在动态库中，这可能会出现，因为代码是根据位置构建的并链接到动态库中。试试“objdump -d -r -R”，如果你看到 TEXTREL，就是这样。NaCl 动态链接故事不支持 TEXTREL。（通过在代码编译期间使用 -fPIC 标志解决）

使用静态对象在链接到静态可执行文件后尝试验证。

# .htaccess - mod_rewrite 因此从 URL 中删除/隐藏特定目录，但仍显示内容

> ID：10523074
> 
> 赞同：1
> 
> 时间：2012-05-09T19:47:01.093
> 
> 标签：.htaccess, url, mod-rewrite, directory

我想在 .htaccess 中为我的网站创建一个重写，以便当用户请求 URL A 时，内容来自 URL B，但用户仍将 URL 视为 URL A。

例如，假设我在 mydomain.com/projects/project-example 有内容。我希望用户能够请求 mydomain.com/project-example，仍然在他们的地址栏中看到该 URL，但浏览器应该显示来自 mydomain.com/projects/project-example 的内容。

我已经查看了几个 .htaccess 重写技巧和常见问题解答，但不幸的是，它们似乎都没有为我上面描述的内容提供解决方案。并非我域中的所有内容都来自 /projects/ 目录，因此我认为重写应该首先检查页面是否存在，因此它不会将 /projects/ 附加到每个 url。我真的很难过。

如果重写不是我所需要的，或者这个问题有一个简单的解决方案，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:33:12.760

本教程应该有你需要的一切，包括准确地解决你的要求：[http](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html) ://httpd.apache.org/docs/2.0/misc/rewriteguide.html 。这可能只是一个术语问题。

> 例如，假设我在 mydomain.com/projects/project-example 有内容。我希望用户能够请求 mydomain.com/project-example，仍然在他们的地址栏中看到该 URL，但浏览器应该显示来自 mydomain.com/projects/project-example 的内容。

有类似的东西：

```
RewriteRule ^project-example$ /projects/project-example [L] 
```

当有人请求[http://mydomain.com/project-example](http://mydomain.com/project-example)并且 URI`/project-example`在内部被重写为`/projects/project-example`. 请注意，当它位于 .htaccess 文件中时，URI`/project-example`会在匹配时删除前导斜杠。

如果你有一个东西目录，你可以使用正则表达式和反向引用，例如你希望[http://mydomain.com/stuff/](http://mydomain.com/stuff/)的任何请求映射到`/internal/stuff/`：

```
RewriteRule ^stuff/(.*)$ /internal/stuff/$1 [L] 
```

[因此，对http://mydomain.com/stuff/file1.html](http://mydomain.com/stuff/file1.html)、[http://mydomain.com/stuff/image1.png](http://mydomain.com/stuff/image1.png)等的请求会被重写为`/internal/stuff/file1.html`,`/internal/stuff/image1.png`等。

# javascript - 我可以从 JavaScript 中的绑定函数获取未绑定函数吗？

> ID：10523080
> 
> 赞同：23
> 
> 时间：2012-05-09T19:47:27.040
> 
> 标签：javascript, function, bind, ecmascript-5

我正在使用[`Function.prototype.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind). 在某些情况下更改函数范围（即值）
似乎非常有用。`this`

但是，一旦您这样做了，您[似乎就无法更改范围：`bind`](http://jsfiddle.net/dXq2E/1/)

```
function f = obj.method.bind(42); 
function g = obj.method.bind('Hi');

function f2 = f.bind('Hi'); // “this” is still 42 
```

是否可以从绑定函数中检索原始未绑定函数？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-09T20:09:11.420

该`bind`方法的基本作用类似于（不完全是，因为参数被切片以排除上下文）：

```
function bind(context) {
    var self = this;
    return function() {
        self.apply(context, arguments);
    }
} 
```

所以基本上它返回另一个函数，它将使用给定的上下文和参数调用自己。如果你`bind`再次这样做，你将绑定这个新创建的函数，它就`bind`像是这样实现的：

```
 function bind(context) {
    var self = this;
    return function() {
        self.apply(context, arguments);
    }.bind(otherContext);
} 
```

但是由于 bind 返回的内部函数充当了一个闭包，其中原始上下文是第一个绑定的 ( `self`)，因此将真正执行函数中的上下文。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-09T21:26:54.807

[我认为用图片来说明Win32 的答案](https://stackoverflow.com/a/10523370/458193)会很有用。

由 生成的包装器`bind`确保您的函数在给定的上下文中被调用，*无论如何*。
这样的包装器**总是会忽略它自己的上下文**。

给定一个包装链，除了最里面的任何上下文都会丢失。
因此，一旦使用`bind`.

![链式绑定调用](../Images/1a880209205098e59598839428ddf46e.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-08T09:31:59.467

这实际上会解决你的问题

```
const bind = Function.prototype.bind;
Object.defineProperty(Function.prototype, 'bind', {
    value: function () {
        const result = bind.apply(this, arguments);
        result.source = (this.source || this);
        return result;
    }
}); 
```

现在你可以获取`source`属性来获取原始函数。这可能会导致其他问题，但性能似乎不是其中之一，[https://jsperf.com/bind-override/1](https://jsperf.com/bind-override/1)

IE、Edge、Firefox 和 Chrome 似乎都得到了相同的结果，有时普通版本更快，有时覆盖更快。

# ruby-on-rails - 哪个选项更好？使用 centos 软件包中的旧版本 ruby 或使用手动安装的最新版本

> ID：10523081
> 
> 赞同：0
> 
> 时间：2012-05-09T19:47:31.840
> 
> 标签：ruby-on-rails, ruby, centos

现在我在 Rails 上开始了一个新项目，但是 CentOs 的 ruby​​ 包对应的是旧版本，所以我决定手动安装最新版本。这对于生产环境来说是个好主意吗？考虑到不使用 CentOs 版本所带来的可维护性问题。我已经搜索并发现了一些关于这个问题的讨论 [http://lwn.net/Articles/423732/](http://lwn.net/Articles/423732/)。但我还没有找到一个很好的答案来解决这个问题。

有什么帮助吗？谢谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:06:59.823

您应该使用与生产环境中使用的相同版本的 Ruby 进行开发，并且应该使用 RVM 在您的开发机器上管理该版本的 Ruby。

# jquery-ui - Spotify API 拖放播放列表

> ID：10523083
> 
> 赞同：1
> 
> 时间：2012-05-09T19:47:50.140
> 
> 标签：jquery-ui, drag-and-drop, jquery-ui-sortable, spotify

我想使用 Spotify API 创建一个可拖放的播放列表。

```
var tracks = models.library.tracks;
var playlist = new models.Playlist();

// loop through all tracks and add them to the playlist
for (var i = 0; i < 25; i++) {
  var track = models.Track.fromURI(tracks[i].data.uri);
  playlist.add(track);
}

// add playlist to view
var playlistView = new views.List(playlist);
$('#playlist').html(playlistView.node); 
```

**如何启用此播放列表以拖放曲目？** 这是否已经内置到 Spotify API 中（但尚未记录）？我尝试使用 jQuery UI 可排序功能自己实现它。

```
$('#playlist').sortable(); 
```

但是，Spotify 播放列表不是简单`ul`的`li`子元素，所以这没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:36:40.983

几天前我为下面的网站做了这件事。向下滚动，单击选项卡，添加一些曲目以建立列表并拖放。

[http://cultureclash.redbull.co.uk/getonstage/](http://cultureclash.redbull.co.uk/getonstage/)

相关代码位于[http://cultureclash.redbull.co.uk/getonstage/js/getonstage-ui.js](http://cultureclash.redbull.co.uk/getonstage/js/getonstage-ui.js)，从第 106 行开始。播放列表本身存储在其他地方，作为 Spotify 拥有它们编码的曲目数组。

当用户添加轨道时，我抓取该数组并将其放入模板中以生成可排序的 DOM，然后我`data-index`为每个数组赋予属性以`li`跟踪它们所代表的原始数组的索引。当`sortstop`事件触发时，我通过`ul`，记下新的顺序，并移动数组以匹配。

更深入地查看该文件并使用 DOM 检查器来处理应用程序以找出更精细的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:18:10.777

问题不在于播放列表未使用**ul**和**li**元素显示。jQuery UI 可排序函数实际上适用于包含**a标签的****div**标签，特别是如果（就像 Spotify 一样）**a**标签的**显示**样式设置为**table**。您只需要使用以下内容告诉函数哪些子项是可排序的：

 ******```
$('#playlist').sortable({ items: 'a.sp-item' }); 
```

这告诉它与**sp-item**类的链接是可排序的。

但是，这样做时它仍然无法正常工作，因为项目会弹回原始位置。这是因为播放列表中的每一行都设置为使用绝对定位并使用 -webkit-transform CSS 属性将其定位在正确的 Y 坐标上。这导致经历了“回弹”。

我已经找到了一个解决方法，尽管它是一个 hack。只需在将列表设置为可排序之前添加以下代码：

```
setTimeout(function() { 
    $('#playlist > div > div a.sp-item').attr("style","").css("position","relative");
}, 100); 
```

这基本上从播放列表中的所有链接中删除了“-webkit-transform”样式并将它们更改为使用相对定位（超时是因为列表在创建后似乎没有立即完全构建）。奇怪的是这似乎根本不影响播放列表的显示，所以我想知道为什么会这样......******

# mysql - 如何显示来自 4 个表的数据？

> ID：10523086
> 
> 赞同：0
> 
> 时间：2012-05-09T19:48:03.103
> 
> 标签：mysql, opencart

我试图从 4 个表中使用 mysql 显示数据（我认为），但我列出了下面的所有 4 个表以及列。

```
table1 = order_product  
Columns = order_product_id, order_id, product_id, name, price, total, tax, quantity  
table2 = product_to_category  
Columns - product_id, category_id  
table3 = category_description  
Columns - category_id, name  
table4 = category  
Columns - category_id, parent_id 
```

我试图显示表 3 中
的（列）名称以及表 1 中每个类别和以下 4 个类别中的每个类别的已售商品的总（列）数量和（列）总金额。
主类别是 category_id=177 但这
有 3 个子类别， category_id=191,192,193
所有 3 个都使用表 4 中的 parent_category=177 链接到主类别？
我希望我能更好地解释这一点并提供足够的细节并感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:01:38.697

有更巧妙的方法来表达这个，但我认为这个查询对你有用。

```
SELECT t3.name, t2.category_id, sum(t1.quantity), sum(t1.total)
FROM table1 t1
LEFT OUTER JOIN table2 t2 ON t1.product_id = t2.product_id 
LEFT OUTER JOIN table3 t3 ON t2.category_id = t3.category_id
WHERE t2.category_id = 177 
OR t2.category_id IN (SELECT t4.parent_id FROM table4 t4 WHERE t4.category_id = 177)
GROUP BY t3.name, t2.category_id 
```

# ruby-on-rails - Rails 3.0.x 和 capistrano - 没有 javascript

> ID：10523088
> 
> 赞同：0
> 
> 时间：2012-05-09T19:48:08.253
> 
> 标签：ruby-on-rails, capistrano

我有一个通过 capistrano 部署的 Rails 应用程序。该应用程序部署良好，但没有加载 javascript。如果我在索引页面上查看源代码并单击

`<script src="/javascripts/application.js?1336592048" type="text/javascript"></script>`

后续页面包括...

`<p><pre>No route matches &quot;/javascripts/application.js&quot;</pre></p>`

一切都在开发中运行良好，我认为问题在于服务器上的文件夹结构。我尝试添加

```
config.action_controller.relative_url_root rails 
```

但是 nginx 在加载页面时只是旋转它的轮子并最终超时。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:51:50.373

尝试

```
set :normalize_asset_timestamps, false 
```

在 deploy.rb

# jquery - duotive-三个 jquery 滑块

> ID：10523092
> 
> 赞同：1
> 
> 时间：2012-05-09T19:48:20.157
> 
> 标签：jquery, image, slider, gallery

我想知道是否有产生这种效果的 jquery 教程或插件。[http://demo.duotive.org/?theme=duotive-three](http://demo.duotive.org/?theme=duotive-three)这是用于 wordpress 的。我真的不想使用wordpress。如果可能的话，我想在 jquery 中拥有自己的具有这种效果的画廊。

让我知道。谢谢您的帮助

# ruby-on-rails - Rails - 模型中的 set_table_name 取决于域

> ID：10523095
> 
> 赞同：1
> 
> 时间：2012-05-09T19:48:28.700
> 
> 标签：ruby-on-rails

我有一个 Rails 3 站点，它在各种不同的域上运行，并希望在我的一个模型中使用 _set_table_name 来根据请求的域动态更改表名。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:05:13.990

`set_table_name`已弃用，取而代之的是`table_name=`. 用它：

```
SomeModel.table_name = request.subdomain=='foo' ? 'foos' : 'bars' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T16:13:46.023

请注意，这是未经测试的代码，但我认为这是一个更“符合 Rails”的概念，并且对于重要的部署它应该是线程安全的。

```
class SomeModel
  def self.subdomain_class(subdomain)
    @subdomain_classes ||= {}
    unless @subdomain_classes[subdomain]
      @subdomain_classes[subdomain] ||= Class.new(self)
      @subdomain_classes[subdomain].table_name = "#{self.table_name}_#{subdomain}" # This needs sanitizing, of course
    end

    @subdomain_classes[subdomain]
  end
end

class SomeModelsController
  ...

  private
  def CurrentSomeModel
    SomeModel.subdomain_class(request.subdomain)
  end
end 
```

# iphone - 使用手机时是否所有 iphone 歌曲都受到 DRM 保护？AVAssetExportSession 找不到音频

> ID：10523097
> 
> 赞同：1
> 
> 时间：2012-05-09T19:48:37.410
> 
> 标签：iphone, ios, drm, avassetexportsession

当一首歌曲被放入iTunes然后同步到iPhone时，它会自动将DRM放在上面吗？

我正在尝试将我写的 mp3 复制到 iPhone 上的 unity3d 游戏中，然后播放并使用它制作游戏视频。

这失败了：我写了一首没有 DRM 的歌曲。我将它放入iTunes并同步手机。然后，我为 unity3d 使用 iphone 插件，将其从 iphone 音乐库复制到游戏中的目录。然后我可以播放这首歌并用这首歌制作一个游戏视频。播放歌曲效果很好。但是当我尝试使用 AVAssetExportSession 访问数据来创建视频时，它找不到 mp3 的音轨。

这成功了：但是，如果我通过将歌曲从iTunes拖到游戏库中将歌曲直接粘贴到游戏目录中，则歌曲或查找音轨并创建视频都没有问题。

谁能解释为什么这会失败。是 DRM 问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T00:42:36.627

直接回答标题中的问题：不，所有歌曲在 iPhone 上时都不会自动受到 DRM 保护。

话虽如此，如果您想获取歌曲数据，您确实需要跳过几个环节，而 AVAssetExportSession 是一个很好的方法。

您遇到的问题听起来不像是 DRM 问题。这听起来像是音频文件的路径/URL 问题。一些示例代码将有助于更好地回答您问题的其他部分。

# join - Solr - 子查询

> ID：10523102
> 
> 赞同：4
> 
> 时间：2012-05-09T19:48:55.397
> 
> 标签：join, solr, subquery

我需要做一个 Solr 子查询，如果它在 MySQL 中，它看起来像这样：

```
SELECT *
FROM solr_index
WHERE type = 'person' AND 
city IN (SELECT name FROM solr_index WHERE name = 'London' AND type = 'city') 
```

显然 Solr 连接非常相似 - [http://wiki.apache.org/solr/Join](http://wiki.apache.org/solr/Join)。但这些似乎只在 Solr 4 中可用。有什么方法可以在 Solr 3.X 中做到这一点吗？

理想情况下，一种与 ComplexPhraseQueryParser 兼容并且 Solr PHP 客户端或 Solarium 支持的方式。

任何帮助是极大的赞赏。

**更新：**

另一个与位置无关的示例：

```
SELECT *
FROM solr_index
WHERE type = 'project' AND 
tag IN (SELECT name FROM solr_index WHERE name = 'Elephant' AND type = 'tag') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:11:46.617

从 solr 3.4 开始就有连接。看一下这个

[http://lucidworks.com/blog/lucene_3_4_0/](http://lucidworks.com/blog/lucene_3_4_0/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:04:05.167

我会尝试过滤查询和方面的不同变体。就像是：

```
q=*:*
fq=(type:city AND name:london)
facet=true
facet.query=type:person 
```

希望这会有所帮助，祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T05:22:33.363

试试这个

```
q=*:*&fq=city:london&fq=type:(city OR person) 
```

# asp.net - asp.net 路由集成功能需要 asp.net 与 webapi 0.6.0 兼容并启用 asp.net 兼容性

> ID：10523105
> 
> 赞同：6
> 
> 时间：2012-05-09T19:49:01.143
> 
> 标签：asp.net, .net-4.0, asp.net-web-api

使用 asp.net webapi v0.6.0 我在启动时收到该错误。为该站点启用了 asp.net 兼容性。我已经尝试修复它几天了，坦率地说，我什至不知道从哪里开始。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:56:05.460

尝试将以下内容添加到 web.config 中的 system.servicemodel

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true"/> 
```

# node.js - 如何通过 get-request 使用 node.js Passport 进行身份验证？

> ID：10523108
> 
> 赞同：3
> 
> 时间：2012-05-09T19:49:22.593
> 
> 标签：node.js, middleware

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:14:20.100

I ran into this same problem, and solved it by adding this to my route handler for login:

```
req.body = req.query; 
```

Maybe not the perfect solution, but it's certainly better than hacking passport. ;)

Also note that there's a pending request in passport-local to fix this problem: [https://github.com/jaredhanson/passport-local/pull/12](https://github.com/jaredhanson/passport-local/pull/12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T15:41:06.617

Maybe [https://github.com/yarax/passport-url](https://github.com/yarax/passport-url) strategy will be useful for you

It allows to authenticate users with a token giving by GET request

```
var url = new UrlStrategy({
    failRedirect : "/login",
    varName : "secret"
}, function (secret, done) { // put your check logic here
    if (secret == 'foo') done(null, {id:'bar'});
    else done("wrong");
});

passport.use(url); 
```

# geolocation - 将地理位置转换为街道地址描述

> ID：10523111
> 
> 赞同：0
> 
> 时间：2012-05-09T19:49:38.430
> 
> 标签：geolocation, mapping

是否有现有服务可以将街道地址变成“友好名称”，例如“第 46 和第 7 街角”或“第 1 和第 2 街之间的第 14 街”？

我记得几年前看过一个，但现在我一辈子都找不到了。

如果没有，您将如何使用流行的地理定位服务（如谷歌的）来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:53:16.263

看看谷歌地方。您需要一个 API 密钥（免费） - [https://developers.google.com/maps/documentation/places/](https://developers.google.com/maps/documentation/places/)

# android - Android SDCard I/O 管理挂载和卸载

> ID：10523112
> 
> 赞同：0
> 
> 时间：2012-05-09T19:49:50.407
> 
> 标签：android, sqlite, io, corruption

我知道这个问题有不同的版本，但我无法明确回答什么是解决我的问题的最佳方法。

我正在做的是在 SD 卡上创建一个 SQLite 数据库。我希望能够从中查询并写入它。

我的问题是卸载 SD 卡时最好的管理方法是什么。我完全可以像普通 MP3 播放器一样关闭我的应用程序。但是，我想确保对数据库的任何写入操作都不会部分完成。

我的一个想法是使用beginTransaction，将其标记为成功，然后调用end transaction。我的问题是如果没有调用事务结束会发生什么。这可能会导致数据损坏吗？另外，我需要一点帮助来了解要听什么或连接到什么来获得 SD 卡被卸载的通知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:15:07.603

这是数据库中事务的伟大之处——您几乎不需要担心：

> “SQLite 中单个事务中的所有更改要么完全发生，要么根本不发生，即使将更改写入磁盘的行为被中断
> 
> 程序崩溃、操作系统崩溃或电源故障。”

取自[http://www.sqlite.org/transactional.html](http://www.sqlite.org/transactional.html)

在将数据写入磁盘时，数据库所在的要移除的磁盘应该（在最坏的情况下）表现得像电源故障一样。数据库将在下次启动时丢弃该数据。

因此，只要[使用 commit 或 end transaction 提交事务](http://sqlite.org/lang_transaction.html)并且执行语句的方法调用返回所有数据都已存储。否则，您的交易中的任何数据都不会被存储 - 这两种情况都会让您处于一致的状态。

当心唯一的问题：您需要确保需要一起执行（即原子地）的所有语句都必须在一个事务中！

# php - 计算浮点幂 (PHP/BCMath)

> ID：10523113
> 
> 赞同：7
> 
> 时间：2012-05-09T19:49:52.017
> 
> 标签：php, algorithm, math, pow, bcmath

我正在为`bcmath`扩展编写一个包装器，而关于**[错误 #10116](https://bugs.php.net/bug.php?id=10116)**的问题`bcpow()`特别烦人——它将`$right_operand`( `$exp`) 转换为（原生 PHP，不是任意长度）整数，因此当您尝试计算平方根（或任何其他root 高于`1`) 的一个数字，`1`而不是正确的结果。

我开始寻找可以让我计算数字的第 n 根的算法，我[发现这个答案](https://stackoverflow.com/a/8827111/89771)看起来很可靠，我实际上使用 WolframAlpha[扩展了公式](http://www.wolframalpha.com/input/?i=%28%28k-1%29*x%20%2b%20a/x%5E%28k-1%29%29/k)，我能够在保持准确性的同时将速度提高约 5%的结果。

这是一个模仿我的 BCMath 实现及其局限性的纯 PHP 实现：

```
function _pow($n, $exp)
{
    $result = pow($n, intval($exp)); // bcmath casts $exp to (int)

    if (fmod($exp, 1) > 0) // does $exp have a fracional part higher than 0?
    {
        $exp = 1 / fmod($exp, 1); // convert the modulo into a root (2.5 -> 1 / 0.5 = 2)

        $x = 1;
        $y = (($n * _pow($x, 1 - $exp)) / $exp) - ($x / $exp) + $x;

        do
        {
            $x = $y;
            $y = (($n * _pow($x, 1 - $exp)) / $exp) - ($x / $exp) + $x;
        } while ($x > $y);

        return $result * $x; // 4^2.5 = 4^2 * 4^0.5 = 16 * 2 = 32
    }

    return $result;
} 
```

上面的[方法似乎很好用，](http://codepad.org/LRVEMHTg) **除非`1 / fmod($exp, 1)`没有产生 integer**。例如，如果`$exp`is `0.123456`，它的倒数将会是并且`8.10005`和 的结果会有点不同（[demo](http://codepad.org/UAha3lve)）：`pow()``_pow()`

*   `pow(2, 0.123456)`=`1.0893412745953`
*   `_pow(2, 0.123456)`=`1.0905077326653`
*   `_pow(2, 1 / 8)`= `_pow(2, 0.125)`=`1.0905077326653`

如何使用“手动”指数计算达到相同的精度水平？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T01:03:38.497

用于找到（正）数的第 n^次根的`a`算法是用于找到零的牛顿算法

```
f(x) = x^n - a. 
```

这仅涉及以自然数为指数的幂，因此很容易实现。

用不是整数形式`0 < y < 1`的指数计算幂更复杂。做模拟，解决`y``1/n``n`

```
x^(1/y) - a == 0 
```

将再次涉及计算具有非整数指数的幂，这正是我们试图解决的问题。

如果`y = n/d`是小分母的有理数`d`，这个问题很容易通过计算来解决。

```
x^(n/d) = (x^n)^(1/d), 
```

但是对于大多数有理数`0 < y < 1`来说，分子和分母都很大，中间`x^n`会很大，因此计算会占用大量内存并且需要（相对）较长的时间。（对于 的示例指数`0.123456 = 1929/15625`，它并不算太糟糕，但`0.1234567`会相当费力。）

计算一般理性的幂的一种方法`0 < y < 1`是写

```
y = 1/a ± 1/b ± 1/c ± ... ± 1/q 
```

用整数`a < b < c < ... < q`和乘/除个人`x^(1/k)`。（每个有理数`0 < y < 1`都有这样的表示，最短的这样的表示通常不涉及很多项，例如

```
1929/15625 = 1/8 - 1/648 - 1/1265625; 
```

在分解中仅使用加法会导致分母更长的表示，例如

```
1929/15625 = 1/9 + 1/82 + 1/6678 + 1/46501020 + 1/2210396922562500, 
```

所以这将涉及更多的工作。）

通过混合这些方法可以进行一些改进，首先通过- 例如指数`y`的连分数展开找到小分母的接近有理近似值，并使用前四个部分商产生近似值[注意，最短的部分和分解成纯分数是收敛的] - 然后将余数分解成纯分数。`y``1929/15625 = [0;8,9,1,192]``10/81 = 0.123456790123...``10/81 = 1/8 - 1/648`

然而，一般来说，这种方法会导致计算 large 的 n^次根，`n`如果最终结果的期望精度很高，这也是缓慢且内存密集型的。

总而言之，实现和使用它可能更简单、`exp`更`log`快捷

```
x^y = exp(y*log(x)) 
```

# ssas - 我考虑哪些参数来选择 SSAS 或 Powerpoint

> ID：10523114
> 
> 赞同：0
> 
> 时间：2012-05-09T19:49:56.757
> 
> 标签：ssas, powerpivot

在选择 SSAS 或 Powerpoint 时我会考虑哪些参数？

我对选择 BI 工具完全陌生。我从哪说起呢？设置 SSA 对新手来说是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:28:28.207

我认为您的意思是 SSAS（表格建模）与 PowerPivot。Cathy Dumas 有一篇很棒的文章，列出了在决定哪种工具适合这项工作时要考虑的一些注意事项...... [http://blogs.msdn.com/b/cathyk/archive/2011/10/27/when-在 powerpivot-models.aspx 上选择表格模型](http://blogs.msdn.com/b/cathyk/archive/2011/10/27/when-to-choose-tabular-models-over-powerpivot-models.aspx)

# wpf - 与部分类相比，与选项卡项进行通信的更好方法是什么

> ID：10523117
> 
> 赞同：0
> 
> 时间：2012-05-09T19:50:18.077
> 
> 标签：wpf, oop, partial-classes

我有一个 WPF 项目，它只是几十个小工具的集合。我将每个工具放在主 tabcontrol 的一个 tabitem 上，并为每个 tabitem 编写了一个部分 MainWinow 类。但是，由于工具之间的关系很小，我宁愿密封每个工具，以免它们相互干扰。此外，我听说偏班是邪恶的。这里的问题是除 MainWindow 之外的一个类很难与 UI 项进行通信（据我所知）。关于我应该去哪里的任何建议？

非常感谢。

应 Blam 的要求，这是我当前代码的简化版本。原始代码太大，此处无法粘贴。

xml:

```
<Window x:Class="WpfApplication7.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <TabControl Margin="0,0,0,0" Name="tabControl1">
        <TabItem Header="Tool1" Name="Tool1">
            <Grid>
                <Label Name="lblTool1"/>
            </Grid>
        </TabItem>
        <TabItem Header="Tool2" Name="Tool2">
            <Grid>
                <Label Name="lblTool2"/>
            </Grid>
        </TabItem>
    </TabControl>
</Grid>
</Window> 
```

部分类 1 (MainWindow.xaml.cs)：

```
namespace WpfApplication7
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        string caption = "Tool Collection";
        public MainWindow()
        {
            InitializeComponent();
            this.Title = caption;

            InitialTool1();
            InitialTool2();

        }
        /*
            Some other methods for main window, including those for menu bar, tool bar, ... 
        */
    }
} 
```

部分类 2 (Tool1.cs)：

```
namespace WpfApplication7
{
    string tool1Details = "This is tool 1";
    /* 
        Other parameters related to tool1 
    */
    public partial class MainWindow : Window
    {

        public void InitialTool1()
        {
            lblTool1.Content = tool1Details;

        }
        /*
            Some other methods that communicate with tabitem1
        */
    }
} 
```

部分第 3 类（Tool2.cs）：

```
namespace WpfApplication7
{
    public partial class MainWindow : Window
    {
        string tool2Detail = "This is tool 2";
        /* 
             Other parameters related to tool2 
        */
        public void InitialTool2()
        {
            lblTool2.Content = tool2Detail;

        }
        /*
            Some other methods that communicate with tabitem2
         */

    }
} 
```

将它们拆分为部分类的目的是我们可以将它们放在不同的文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:26:19.270

为什么不直接拉

```
 public void InitialTool2()
    {
        lblTool2.Content = "This is tool 2";
        /*
           Lot of codes that communicate with tabitem2
         */
    } 
```

以及所有其他 InitializeX 进入第一个 Partial 类。它们被分成方法，但可以与它们通信？

# javascript - 使用 socket.io 进行简单的多人游戏开发

> ID：10523119
> 
> 赞同：-2
> 
> 时间：2012-05-09T19:50:19.520
> 
> 标签：javascript, jquery, socket.io

**使用 socket.io 的多人游戏 - 用字母制作更大的单词**

我的游戏需要如何运行：

1.  用户点击停止，然后他们得到一个字母来创建比其他玩家更大的单词完成！

2.  当用户创建一个单词然后单击“提交”按钮并发送到服务器和服务器选择更大的单词...尚未完成

3.  在这里我们必须允许使用 socket.io 进行两人游戏

这是基本 ONE 玩家游戏模组的代码：http: [//jsfiddle.net/9rtFa/14/](http://jsfiddle.net/9rtFa/14/)

在游戏中还有一个实时聊天供玩家聊天beetwen。

**应用程序.js**

```
var app = require('express').createServer()
var io = require('socket.io').listen(app);

app.listen(8080);

// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

// usernames which are currently connected to the chat
var usernames = {};

io.sockets.on('connection', function (socket) {

    // when the client emits 'sendchat', this listens and executes
    socket.on('sendchat', function (data) {
        // we tell the client to execute 'updatechat' with 2 parameters
        io.sockets.emit('updatechat', socket.username, data);
    });

    // when the client emits 'adduser', this listens and executes
    socket.on('adduser', function(username){
        // we store the username in the socket session for this client
        socket.username = username;
        // add the client's username to the global list
        usernames[username] = username;
        // echo to client they've connected
        socket.emit('updatechat', 'SERVER', 'you have connected');
        // echo globally (all clients) that a person has connected
        socket.broadcast.emit('updatechat', 'SERVER', username + ' has connected');
        // update the list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
    });

    // when the user disconnects.. perform this
    socket.on('disconnect', function(){
        // remove the username from global usernames list
        delete usernames[socket.username];
        // update list of users in chat, client-side
        io.sockets.emit('updateusers', usernames);
        // echo globally that this client has left
        socket.broadcast.emit('updatechat', 'SERVER', socket.username + ' has disconnected');
    });
}); 
```

和 index.html

```
<script src="/socket.io/socket.io.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script>
    var socket = io.connect('http://localhost:8080');

    // on connection to server, ask for user's name with an anonymous callback
    socket.on('connect', function(){
        // call the server-side function 'adduser' and send one parameter (value of prompt)
        socket.emit('adduser', prompt("What's your name?"));
    });

    // listener, whenever the server emits 'updatechat', this updates the chat body
    socket.on('updatechat', function (username, data) {
        $('#conversation').append('<b>'+username + ':</b> ' + data + '<br>');
    });

    // listener, whenever the server emits 'updateusers', this updates the username list
    socket.on('updateusers', function(data) {
        $('#users').empty();
        $.each(data, function(key, value) {
            $('#users').append('<div>' + key + '</div>');
        });
    });

    // on load of page
    $(function(){
        // when the client clicks SEND
        $('#datasend').click( function() {
            var message = $('#data').val();
            $('#data').val('');
            // tell server to execute 'sendchat' and send along one parameter
            socket.emit('sendchat', message);
        });

        // when the client hits ENTER on their keyboard
        $('#data').keypress(function(e) {
            if(e.which == 13) {
                $(this).blur();
                $('#datasend').focus().click();
            }
        });
    });

</script>
<div style="float:left;width:100px;border-right:1px solid black;height:300px;padding:10px;overflow:scroll-y;">
    <b>USERS</b>
    <div id="users"></div>
</div>
<div style="float:left;width:300px;height:250px;overflow:scroll-y;padding:10px;">
    <div id="conversation"></div>
    <input id="data" style="width:200px;" />
    <input type="button" id="datasend" value="send" />
</div> 
```

现在我需要允许两个玩家使用socket.io实时玩字母游戏 - 我已经有聊天但如何在我的游戏中实现socket.io - 我从jsfiddle放在上面的代码

请帮助了解 socket.io 游戏开发。

我认为这一定是了解 socket.io 以创建游戏的好教程。我想这对这里的很多人来说会很有趣......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:57:56.757

你的问题很难理解，所以除了一般建议之外，我不确定你在问什么。

我快速搜索了一下，发现了这个[Multiplayer HTML5、Node.js、Socket.IO](https://stackoverflow.com/questions/6244230/multiplayer-html5-node-js-socket-io)

可能有帮助？

# google-api - Google api key Authorized JavaScript Origins 不适用于子域

> ID：10523120
> 
> 赞同：3
> 
> 时间：2012-05-09T19:50:23.873
> 
> 标签：google-api

在谷歌中为谷歌“登录”创建一个新的网络应用程序时，有一个输入“授权的 JavaScript 起源”，您必须在其中输入您的网址。

如果我手动输入，它适用于域和子域。但是我需要输入通配符，但 http://*.example.com 不起作用。

有没有办法使用通配符并使子域适用于 API 密钥？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:54:23.423

我有一个类似的问题。据我所知，这是不可能的： [https ://groups.google.com/forum/?fromgroups#!topic/oauth2-dev/sj5jeksUV4M](https://groups.google.com/forum/?fromgroups#!topic/oauth2-dev/sj5jeksUV4M)

# ios - 在另一个 UIImage 之上添加 UIImage

> ID：10523122
> 
> 赞同：12
> 
> 时间：2012-05-09T19:50:39.640
> 
> 标签：ios, objective-c, uiimage

我有 2 个图像：第一个是用户个人图像，第二个是图标（徽章）。

我想在第一个 uiimage（用户的图像）的左下角添加第二个 uiimage（图标）并将它们保存到一个新的 Uiimage 中。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-09T20:01:58.230

试试这个方法：

```
-(UIImage *)drawImage:(UIImage*)profileImage withBadge:(UIImage *)badge
{
    UIGraphicsBeginImageContextWithOptions(profileImage.size, NO, 0.0f);
    [profileImage drawInRect:CGRectMake(0, 0, profileImage.size.width, profileImage.size.height)];
    [badge drawInRect:CGRectMake(0, profileImage.size.height - badge.size.height, badge.size.width, badge.size.height)];
     UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();
     return resultImage;
} 
```

您可以通过以下方式使用它：

```
UIImage *myBadgedImage = [self drawImage:profileImage withBadge:badgeImage]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:56:48.573

尝试这个：

```
CGFloat scale = [self currentScale];
if (scale > 1.5)
    UIGraphicsBeginImageContextWithOptions(view.frame.size, NO, scale);
else
    UIGraphicsBeginImageContext(view.frame.size);

[image1 drawInRect:CGRectMake(0, 0, w1, h1)];
[image2 drawInRect:CGRectMake(0, 0, w2, h2)];

UIImage* screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# java - 从 servlet 调用本机程序

> ID：10523125
> 
> 赞同：0
> 
> 时间：2012-05-09T19:51:05.107
> 
> 标签：java, jsf, tomcat, servlets

我需要调用一个本地程序，它将在执行 JSF servlet 的服务器上运行。我想我必须处理 Process 对象，这是正确的还是更好的方法？此外，我必须对策略文件进行哪些更改，以便只有在 tomcat 上运行的此类 Web 应用程序/servlet 才能调用本机程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:59:19.340

尝试 ：

```
Process proc = Runtime.getRuntime.exec("<name of executable>"); 
```

没有测试过，但应该很接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:08:31.853

由于您使用的是 Tomcat，因此您可以利用 CGI sevrlet 为您执行此操作。如果没有，我至少建议您看一下从第 1600 行开始的[CGI Servlet 代码](http://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/catalina/servlets/CGIServlet.java?view=annotate)，以了解有关输入/输出流处理等需要考虑的事项。

# java - JVM 未处理 java.policy 中的一些更改

> ID：10523126
> 
> 赞同：3
> 
> 时间：2012-05-09T19:51:14.943
> 
> 标签：java, policy, lotus-domino

朋友们好！我在这里遇到了一个大问题！首先，我去年在这里发布了一个关于如何在 JVM 中设置代理的问题，以便用 java 编程的 Lotus Notes 代理可以通过 Web 服务（也在 java 中）。经过几周的研究，我终于找到了问题所在，现在可以了！所以，现在是时候让我们在用户测试环境中移动它了……你猜怎么着？！？不工作！但是，我没有面临同样的问题。实际上，要在JVM中设置代理，我需要设置属性“http.proxyHost”和“http.proxyPort”。所以，我让 Domino 服务器的管理员更改服务器上的“java.policy”文件，以便我可以访问这些属性（我让他们复制“java.policy”的开发版本并将其粘贴到“UAT “ 版本）。没运气！使用完全相同的策略文件在另一台服务器上复制的完全相同的代码有两种不同的行为方式......我明白了：

```
java.security.AccessControlException: access denied (java.util.PropertyPermission http.proxyHost write) 
```

我们尝试反转权限授予，我们尝试将权限授予“http.proxyHost”和“proxyHost”。没有任何效果......所以，我让他们删除了“授予”部分中的所有权限（没有代码库）并只放置了 AllPermission。有效！我的猜测是我们的策略文件中有错误，因此权限没有得到处理。我想知道你是否可以帮我解决这个问题……这是政策文件：

```
// 
// @(#)src/security/sov/config/java.policy, security, as142, 20070303 1.4.2.2 
// =========================================================================== 
// Licensed Materials - Property of IBM 
// "Restricted Materials of IBM" 
// 
// IBM SDK, Java(tm) 2 Technology Edition, v1.4.2 
// (C) Copyright IBM Corp. 1998, 2002\. All Rights Reserved 
// =========================================================================== 
// 

// Standard extensions get all permissions by default 

grant codeBase "file:${java.home}/lib/ext/*" { 
        permission java.security.AllPermission; 
}; 

// default permissions granted to all domains 

grant { 
        // Allows any thread to stop itself using the java.lang.Thread.stop() 
        // method that takes no argument. 
        // Note that this permission is granted by default only to remain 
        // backwards compatible. 
        // It is strongly recommended that you either remove this permission 
        // from this policy file or further restrict it to code sources 
        // that you specify, because Thread.stop() is potentially unsafe. 
        // See "http://java.sun.com/notes" for more information. 
        permission java.lang.RuntimePermission "stopThread"; 
        permission java.lang.RuntimePermission "setContextClassLoader";    // This was added 

        // allows anyone to listen on un-privileged ports 
        permission java.net.SocketPermission "localhost:1024-", "listen"; 

        permission java.net.NetPermission "setDefaultAuthenticator";
        permission java.util.PropertyPermission "http.proxySet", "write"; 
        permission java.util.PropertyPermission "http.proxyHost", "write"; 
        permission java.util.PropertyPermission "http.proxyPort", "write"; 

        // "standard" properies that can be read by anyone 

        permission java.util.PropertyPermission "java.version", "read"; 
        permission java.util.PropertyPermission "java.vendor", "read"; 
        permission java.util.PropertyPermission "java.vendor.url", "read"; 
        permission java.util.PropertyPermission "java.class.version", "read"; 
        permission java.util.PropertyPermission "os.name", "read"; 
        permission java.util.PropertyPermission "os.version", "read"; 
        permission java.util.PropertyPermission "os.arch", "read"; 
        permission java.util.PropertyPermission "file.separator", "read"; 
        permission java.util.PropertyPermission "path.separator", "read"; 
        permission java.util.PropertyPermission "line.separator", "read"; 

        permission java.util.PropertyPermission "java.specification.version", "read"; 
        permission java.util.PropertyPermission "java.specification.vendor", "read"; 
        permission java.util.PropertyPermission "java.specification.name", "read"; 

        permission java.util.PropertyPermission "java.vm.specification.version", "read"; 
        permission java.util.PropertyPermission "java.vm.specification.vendor", "read"; 
        permission java.util.PropertyPermission "java.vm.specification.name", "read"; 
        permission java.util.PropertyPermission "java.vm.version", "read"; 
        permission java.util.PropertyPermission "java.vm.vendor", "read"; 
        permission java.util.PropertyPermission "java.vm.name", "read"; 

        permission java.util.PropertyPermission "java.assistive", "read"; 

}; 

// Notes java code gets all permissions 

grant codeBase "file:${notes.binary}/*" { 
        permission java.security.AllPermission; 
}; 

grant codeBase "file:${notes.binary}/rjext/*" { 
        permission java.security.AllPermission; 
}; 
```

任何线索将不胜感激......客户很累，这不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:42:50.060

对于可能有同样问题并在这里谷歌搜索的人，我通过允许 AllProperties 获取/设置的安全性解决了这个问题。我仍然不知道为什么枚举然后不起作用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T13:00:31.780

该文件`Domino\jvm\lib\security\java.security`定义了 3 个政策文件

```
# The default is to have a single system-wide policy file,
# and a policy file in the user's home directory.
policy.url.1=file:${java.home}/lib/security/java.policy
policy.url.2=file:${java.home}/lib/security/java.pol
policy.url.3=file:///${user.home}/.java.policy 
```

您可以使用创建文件 java.pol 自定义策略。此外，多米诺服务器重新初始化 java.policy。

查看更多[https://www-304.ibm.com/support/docview.wss?uid=swg21679242](https://www-304.ibm.com/support/docview.wss?uid=swg21679242)

# c# - 如何按值的 DateTime 属性对字典进行排序

> ID：10523140
> 
> 赞同：-8
> 
> 时间：2012-05-09T19:52:07.303
> 
> 标签：c#, .net, datetime, sorting, dictionary

这是我的尝试

```
public MyClass
{
   public Guid ID {set; get;}
   public DateTime CreatedDateTime {set; get;}
}

ConcurrentDictionary<Guid, MyClass> dic = new ConcurrentDictionary<Guid,MyClass>(); 
```

我试试这个，但我遇到了一些麻烦......

```
dic.OrderBy(i=>i.Value.CreatedDateTime); 
```

我有一个错误，比如

```
Cannot implicitly convert type 'System.Linq.IOrderedEnumerable' 
```

有什么线索吗？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:54:11.473

尝试`dic.Values.OrderBy(i=>i.CreatedDateTime)`

# java - 列表实现中的 ClassCastException？

> ID：10523142
> 
> 赞同：0
> 
> 时间：2012-05-09T19:52:12.540
> 
> 标签：java, list, adt, classcastexception

我正在尝试在 Java 中实现一个列表 ADT。我遵循了 Goodrich 的一本关于数据结构的书。

我创建了 2 个名为 Position 的接口：

```
public interface Position {
    Object element()throws InvalidPositionException;

} 
```

和 List ，它具有列表等的方法声明`first(), last()`。

现在，我有一个名为 DNode.java 的类，它实现了 Position 并具有为特定节点分配前一个和下一个元素的方法。

最后，我有实现 List 接口的 NodeList.java。

在此，有一种`insertBefore()`方法将 Position 和 Object 作为输入，并对列表进行更改以在特定位置之前插入节点。

现在，这个方法是从作为主类的 ListMain 类中调用的。

```
 Object p = (Object) br.readLine();
    nl.insertAfter((Position)p, element);
    nl.display(); 
```

基本上，我以字符串的形式从用户那里获取输入，将其转换为 Object 类型，然后将其转换为 Position 类型。当我这样做时，我得到一个类转换异常，上面写着

> java.lang.String 不能转换为 ListPackage.Position

有人可以告诉我如何进行适当的类型转换。或者我的方法是错误的，我应该做其他事情吗？

我是数据结构的新手。因此，任何帮助将不胜感激。非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:56:14.003

在所有情况下，您都不能随意将对象转换为其他类型。考虑编写一个构造函数`Position`，将用户提供的字符串值作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:58:25.047

正如错误所说，您试图说 a`String`是 a `Position`，但事实并非如此。相反，您需要`Position`从以下创建一个`String`：

```
String s = br.readLine();
Position p = new DNode(s); 
```

您将必须在类的构造函数中实现如何将 a`String`转换为`DNode`对象的逻辑`DNode`

# c# - List 有什么区别 和 IEnumerable

> ID：10523145
> 
> 赞同：5
> 
> 时间：2012-05-09T19:52:35.110
> 
> 标签：c#

这两个人似乎在做确切的事情。我给它们计时——知道这是一个小例子——但它们似乎也以完全相同的速度运行。使用一个比另一个有好处吗？

```
List<string> alpha = new List<string>(new string[] { "a", "b", "c" });
foreach (var letter in alpha)
{
    Console.WriteLine(letter);
}

IEnumerable<string> _alpha = new[] {"a", "b", "c"};
foreach(var _letter in _alpha)
{
     Console.WriteLine(_letter);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:53:48.623

`IEnumerable<string>`是一个接口。`List<string>`是实现该接口的类。

接口只是定义实现该接口的类必须实现的功能。

该类负责实际实现该功能。

您的测试实际上是在测试迭代 a`List<string>`和 a的速度`string[]`。由于样本的小尺寸和`List<string>`类的内部运作，你真的不应该看到差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:55:58.573

您的示例确实`List<string>`与`string[]`. 这两种类型都实现`IEnumerable<string>`了，它只是一个指定类型*行为*的接口。

关于类型本身，主要区别在于`List<string>`可以根据需要调整大小（并且对于大多数目的没有固定长度），而`string[]`必须在创建时指定其长度并且不能调整大小。每个人的表现都应该是事后的想法。

您的示例也可以这样写，含义完全相同：

```
IEnumerable<string> alpha = new List<string>(new string[] { "a", "b", "c" });
foreach (var letter in alpha)
{
    Console.WriteLine(letter);
}

IEnumerable<string> _alpha = new[] {"a", "b", "c"};
foreach(var _letter in _alpha)
{
    Console.WriteLine(_letter);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:56:12.910

它们是不同类型的对象，`IEnumerable`是接口（不是实例本身，只是某些功能的模式），`List`而是实际类。

使用其中一个有一种“优势”。

如果您正在编写一个想要更灵活的方法，并且只需要枚举对象，那么使用`IEnumerable`.

`List`implements `IEnumerable`，并且可以被视为，就像`Collection`，和许多其他类一样。

以此为例：

```
public void OutputEnumerable(IEnumerable<string> strings)
{
    foreach (string s in strings)
        Console.WriteLine(s);
}

public void OutputList(List<string> strings)
{
    foreach (string s in strings)
        Console.WriteLine(s);
} 
```

然后你有这个数据：

```
List<string> stringList = new List<string>(new [] { "a", "b", "c" });
Collection<string> stringCol = new Collection<string>(new [] { "a", "b", "c" });
IEnumerable<string> stringEn = new [] { "a", "b", "c" }; 
```

这些都有效：

```
OutputEnumerable(stringList);
OutputEnumerable(stringCol);
OutputEnumerable(stringEn);
OutputList(stringList); 
```

而这些不会：

```
OutputList(stringCol);
OutputList(stringEn); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T19:59:30.963

`List<string>`是元素集合的具体实现，它具有各种方法，例如`Add`、`Remove`、`Sort`等。它的所有元素都已经在内存中，并且可以通过索引器随机访问它们。

`IEnumerable<string>`是一个接口，定义了可以使用`for`循环或`GetEnumerator()`方法枚举的字符串序列。它不包含对其元素（如列表）进行操作的其他方法。此外，这些元素可能不会存储在内存中，而是一次来自某个来源。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T19:53:57.747

关于您的示例，就执行速度和最终结果（特别是只有三个项目）而言，没有真正的区别。

`IEnumerable<T>`是一个*接口*，`List<T>`是一个实现这个接口的实际类。

# email - 支持 GMail TLS/STARTTLS 与 SSL 的 Curl SMTP 命令行参数是什么

> ID：10523147
> 
> 赞同：14
> 
> 时间：2012-05-09T19:52:50.603
> 
> 标签：email, ssl, curl, command-line, smtp

我在应用程序中使用 Curl.exe 发送电子邮件。我需要支持大多数主要的电子邮件服务器。GMail 公开了以下端口和身份验证方法。

*   TLS/STARTTLS（有时称为显式 TLS）：使用端口 587
*   SSL（有时称为隐式 TLS）：使用端口 465

我已经使用以下命令行使显式 TLS 工作：

```
C:\>curl smtp://smtp.gmail.com:587 -v --mail-from "my.mail@gmail.com" --mail-rcpt 
"your.mail@x.com" --ssl -u my.mail@gmail.com:password -T "c:\test.txt" -k --anyauth 
```

我尝试了以下方法来让 ImplicitTLS 工作，但事实并非如此。

```
C:\>curl smtp://smtp.gmail.com:465 -v --mail-from "my.mail@gmail.com" --mail-rcpt 
"your.mail@x.com" --ssl -u my.mail@gmail.com:password -T "c:\test.txt" -k --anyauth 
```

使 SSL/隐式 TLS 工作的正确命令行参数是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T20:22:05.150

用于`smtps://`SMTPS（即现有 SSL/TLS 连接之上的 SMTP）。

这有效：

```
curl smtps://smtp.gmail.com:465 -v 
```

我还将`--ssl-reqd`用于显式 STARTTLS 连接，以确保在您期望的时候使用 SSL/TLS（否则可能会进行降级攻击）。

也不要使用`-k`，检查服务器证书：见[http://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-14T12:57:59.750

好吧，我刚刚尝试了以下方法，效果很好：

```
curl smtps://smtp.gmail.com:465 -v --mail-from "xxx@gmail.com" --mail-rcpt "yyy@gmail.com" --ssl -u xxx@gmail.com:password -T "test.txt" -k --anyauth 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-29T03:37:25.363

你可以试试这个..

```
curl --url "smtps://smtp.gmail.com:465" --ssl-reqd --mail-from "sender@gmail.com" --mail-rcpt "recepient@gmail.com" --upload-file /var/scripts/mail.txt --user "sender@gmail.com:senderGmailPassword" 
```

# java - 在 Java 中解析大型 XML 文件

> ID：10523154
> 
> 赞同：2
> 
> 时间：2012-05-09T19:53:14.347
> 
> 标签：java, xml

> **可能重复：**
> [循环处理大型 XML 文件](https://stackoverflow.com/questions/4995238/looping-over-a-large-xml-file)

什么是解析大型 XML 数据的更好方法，大型 XML 数据本质上是 Java 和基于 Java 的框架中的 XML 数据集合？我们从运行到几 MB（通常 25MB+）的 web 服务调用中获取数据。该数据本质上对应于一个未编组的对象列表。我的目标是从 XML 创建对象列表。

我尝试使用 SAX 解析器，解析这 3000 个对象需要 45 秒。

其他推荐的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:58:09.953

尝试拉解析，使用 StAX？第一次搜索比较： [http ://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP2.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP2.html)

你有没有分析并看到瓶颈在哪里？

StAX 内置于 java 中（自 java 6 起），但有些人建议使用 woodstox StAX 实现以获得更好的性能。我还没有尝试过。[http://woodstox.codehaus.org/](http://woodstox.codehaus.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:03:30.790

> 我尝试使用 SAX 解析器，解析这 3000 个对象需要 45 秒。其他推荐的方法是什么？

只有以下选项：

```
DOM  
SAX  
StAX 
```

SAX 是最快的[SAXvsDOMvsStax](https://stackoverflow.com/questions/3825206/why-is-sax-parsing-faster-than-dom-parsing-and-how-does-stax-work)，所以如果你切换到不同的风格，我认为你不会得到任何好处。
除非您现在做错了什么
当然还有编组/解组框架，例如 JAXB 等，但 IMO（未进行任何测量）它们可能会更慢，因为在 XML 处理上添加了额外的抽象层

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:05:09.093

SAX 不提供对 XML 文件结构的随机访问，这意味着 SAX 提供了一种相对快速和有效的解析方法。因为 SAX 解析器一次只处理一个元素，所以实现可以非常节省内存，使其通常成为处理大文件的一种选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T08:41:31.000

解析 25Mb 的 XML 不应花费 45 秒。还有其他事情正在发生。也许大部分时间都花在等待从网络上获取外部 DTD 上，我不知道。在改变方法之前，您需要了解成本的来源，以及系统的哪些部分将从改变中受益。

但是，如果您确实想将 XML 转换为 Java 对象（不是我会选择的应用程序架构，但没关系），那么 JAXB 听起来不错。我没有过多地使用 JAXB，因为我更喜欢使用 XSLT 和 XQuery 等面向 XML 的语言，但是当我尝试 JAXB 时，我发现它非常快。当然，它在下面使用 SAX 或 StAX 解析器。

# php - 如何防止浏览器用 JavaScript 替换文本字段中的电子邮件？

> ID：10523157
> 
> 赞同：1
> 
> 时间：2012-05-09T19:53:31.303
> 
> 标签：php, javascript, forms, email, spam-prevention

我有一个格式如下的字段：

```
<input type="text" name="email" /> 
```

我正在使用 PHP 来检查表单的有效性，该表单包含除此之外的其他字段。如果有效性检查失败，我将值存储在会话中并再次输出表单并显示错误消息并预先填充表单值。

如果我添加了一封电子邮件，比如“person@example.com”，并且表单无效，那么“person@example.com”将被 JS 替换：

```
 <script type='text/javascript'> <!-- var prefix = 'ma' + 'il' + 'to'; var path = 'hr' + 'ef' + '='; var addy34269 = 'person' + '@'; addy34269 = addy34269 + 'example' + '.' + 'com'; document.write('<a ' + path + '\'' + prefix + ':' + addy34269 + '\'>'); document.write(addy34269); document.write('<\/a>'); //-->\n </script><script type='text/javascript'> <!-- document.write('<span style=\'display: none;\'>'); //--> </script>This email address is being protected from spambots. You need JavaScript enabled to view it. <script type='text/javascript'> <!-- document.write('</'); document.write('span>'); //--> </script> 
```

不用说，这不是我想要的。这发生在 Chrome 和 Firefox 中；我不确定其他人。如何防止浏览器在表单失效后替换电子邮件？

我曾想过使用 str_replace 使电子邮件看起来不像电子邮件，然后使用 JS 进行另一个字符串替换以将其恢复到原来的值，但如果可能的话，我想在没有 JS 的情况下这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:59:34.357

我以前见过这个。我在我的网站上使用 CloudFare，并且对明文的电子邮件地址进行了编码，以防止它们被垃圾邮件机器人窃取。您可能有类似的服务来帮助保护您的网络主机。

```
 <script type='text/javascript'> <!-- var prefix = 'ma' + 'il' + 'to'; var path = 'hr' + 'ef' + '='; var addy34269 = 'person' + '@'; addy34269 = addy34269 + 'example' + '.' + 'com'; document.write('<a ' + path + '\'' + prefix + ':' + addy34269 + '\'>'); document.write(addy34269); document.write('<\/a>'); //-->\n </script><script type='text/javascript'> <!-- document.write('<span style=\'display: none;\'>'); //--> </script>This email address is being protected from spambots. You need JavaScript enabled to view it. <script type='text/javascript'> <!-- document.write('</'); document.write('span>'); //--> </script> 
```

仔细阅读代码，您会注意到它是如何声明“此电子邮件地址受到垃圾邮件机器人保护”的。

编辑：这是服务器端编辑，因此请求该页面的每个浏览器都会得到该结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:08:08.123

当您（或您的主机）使用 Joomla！您可以完全禁用“电子邮件伪装”插件或禁用单个电子邮件的伪装功能，如此[处所述](http://forum.joomla.org/viewtopic.php?p=2002965)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T21:04:43.467

当您将 cloudflare 激活为具有最高安全设置的 CDN 时，就会发生这种情况。您可以登录您的 cloudflare 帐户并将您的设置更改为中等。

此外，如果您使用的是 joomla，您可以在要替换的电子邮件地址前面添加 {emailcloak=off}。例如：{emailcloak=off} yourremail@emailofyoursite.com

这通常可以解决问题。

# mysql - 无法更新目标表

> ID：10523161
> 
> 赞同：1
> 
> 时间：2012-05-09T19:53:50.613
> 
> 标签：mysql, sql

我有两张表，一张是选项表（rot），其中包含一组房间的指标，另一张是房间的当前状态（rt）。我想要一个每日活动，使用存储在 rot 中的值更新 rt 中的 cost_to_date。

当我尝试 SQL 时：

```
UPDATE room_tbl SET COST_TO_DATE_rt = COST_TO_DATE_rt + (
SELECT PerDiem_rot FROM room_options_tbl, room_tbl 
WHERE `ROOM_OPT_ID_rot` = `ROOM_OPT_ID_rt` 
    AND `ADULT_COUNT_rot` = `ADULT_COUNT_rt`) 
```

我得到错误：`#1093 - You can't specify target table 'room_tbl' for update in FROM clause`

我寻找解决方案导致我尝试使用别名的临时表，但我的尝试都导致语法错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:01:10.413

您不能使用查询，因为 MySQL 在更新子句中不支持它

从[13.2.10 开始。更新语法](http://dev.mysql.com/doc/refman/5.0/en/update.html)

> 目前，您无法在子查询中更新表并从同一个表中进行选择。

而是尝试以下

```
UPDATE room_options_tbl, room_tbl
SET COST_TO_DATE_rt = COST_TO_DATE_rt + PerDiem_rot 
WHERE `ROOM_OPT_ID_rot` = `ROOM_OPT_ID_rt` 
    AND `ADULT_COUNT_rot` = `ADULT_COUNT_rt` 
```

# java - Java Spring：错误消息“找不到元素'util：constant'的声明

> ID：10523162
> 
> 赞同：25
> 
> 时间：2012-05-09T19:53:51.490
> 
> 标签：java, spring

我正在尝试将 util-constant 用于 ioc，但收到以下错误消息：

```
cvc-complex-type.2.4.c：匹配通配符是严格的，但找不到元素“util:constant”的声明。
```

所有 spring 3.1.1 dist jar 都在我的类路径中，并且在进行包括使用 util:constant 标签的更改之前，我能够成功运行我的程序。

这是我的ioc xml文件：

```
 <beans xmlns="http://www.springframework.org/schema/beans" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:util="http://www.springframework.org/schema/util"
 xmlns:tool="http://www.springframework.org/schema/tool"
 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>classpath:config.properties</value>
    </property>
</bean>

<bean id="main" class="pikefin.Main">
<property name="executorSample" ref="executorSample"/>
</bean>

<bean id="executorSample" class="pikefin.ExecutorSample">
    <constructor-arg ref="threadPoolExecutor" />

</bean>

<bean id="threadPoolExecutor" class="java.util.concurrent.ThreadPoolExecutor">
    <constructor-arg index="0" value="2"/>
    <constructor-arg index="1" value="2"/>
    <constructor-arg index="2" value="10"/>
    <constructor-arg index="3"><util:constant static-field="java.util.concurrent.TimeUnit.SECONDS"/></constructor-arg>
    <constructor-arg index="4" ref="arrayBlockingPool"/>
</bean>

<bean id="arrayBlockingPool" class="java.util.concurrent.ArrayBlockingQueue">
    <constructor-arg value="5"/>
</bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-09T19:58:10.507

这是`util`命名空间的正确声明（不要忘记指定`schemaLocation`）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="
     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
     http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util-3.1.xsd">

</beans> 
```

[*在C.2.2 The util schema*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-util)中查看更多信息。

# wpf - 主题和语言资源词典

> ID：10523175
> 
> 赞同：0
> 
> 时间：2012-05-09T19:54:38.747
> 
> 标签：wpf, xaml

我在我的 WPF 应用程序中使用标准的主题方法，并在运行时使用动态资源来更改它。

这行得通。

现在我添加了语言支持（英语、西班牙语），但设置后，动态资源不再适用于主题。如果我将控件设置为静态资源，则主题可以工作，但是我会失去在运行时更改它的影响。

这是为语言支持添加的代码，但我很困惑为什么它停止按我想要的方式工作。

App.xaml.cs 称之为：SetLanguage(LocalePath(CultureInfo.CurrentCulture.Name));

```
/// <summary>
    /// Get the locale path for the resource dictionary.
    /// </summary>
    /// <param name="language"></param>
    /// <returns></returns>
    private string LocalePath(string language)
    {
        string file = language + ".xaml";

        return Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), @"Utilities\Resources\Locales\", file);
    }

    /// <summary>
    /// Set the language using the defined resource file.
    /// </summary>
    /// <param name="file"></param>
    private void SetLanguage(string file)
    {
        if (File.Exists(file))
        {
            var languageDictionary = new ResourceDictionary();
            languageDictionary.Source = new Uri(file);

            int dictionaryID = -1;

            for (int i = 0; i < Resources.MergedDictionaries.Count; i++)
            {
                var mergedDictionary = Resources.MergedDictionaries[i];

                if (mergedDictionary.Contains("ResourceDictionaryName"))
                {
                    if (mergedDictionary["ResourceDictionaryName"].ToString().StartsWith("Locale-"))
                    {
                        dictionaryID = i;
                        break;
                    }
                }
            }

            if (dictionaryID == -1)
            {
                Resources.MergedDictionaries.Add(languageDictionary);
            }
            else
            {
                Resources.MergedDictionaries[dictionaryID] = languageDictionary;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:09:22.130

我在语言资源字典中有 5 个其他键，它们与所使用的主题相同。更改了密钥名称，它又可以工作了。

# python - Python 逻辑错误：我的变量被正确分配，在一些“for”和“if”语句之后它变成 None 而不触及它

> ID：10523178
> 
> 赞同：0
> 
> 时间：2012-05-09T19:54:52.420
> 
> 标签：python, variables, nonetype

正如我在标题中所说的，这段代码中的变量点在一些逻辑语句之后变成了 None 值，根本没有触及变量。正如您在代码中看到的，有两种不同的“打印点”语句。我已经进行了实验，第一个实验给出了之前分配的输出“[(1,1,1),(1,1,1)..."。但是第二个给了我输出“无”。有人可以告诉我为什么会发生这种情况以及是否有任何方法可以纠正它？

```
def detectDots(surface):
   dots = [(1,1,1),(1,1,1),(1,1,1),(1,1,1),(1,1,1),(1,1,1),(1,1,1),(1,1,1)]
   print dots
   for y in range(0,480):
       for x in range(0,640):
            color = surface.get_at((x,y))
            if color.r > 250 and color.g < 70 and color.b < 80:
                inDots = True
                notInDots = []
                for i in range(0,8):
                    print dots
                    if math.sqrt((abs(x - dots[i][0])*abs(x - dots[i][0]))+(abs(y - dots[i][1])*abs(y - dots[i][1]))) < 20:
                        dots[i] = (((dots[i][0]*dots[i][2]+x)/(dots[i][2]+1)),((dots[i][1]*dots[i][2]+y)/(dots[i][2]+1)),(dots[i][2]+1))
                    else:
                        notInDots.append(i)
                        inDots = False
            else:
                dots = None 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T19:57:18.317

我的猜测是这条线

```
dots = None 
```

负责设置`dots`为`None`.

由于您的第二个打印件已经打印`None`，这意味着第一个颜色`(0,0)`不匹配

```
if color.r > 250 and color.g < 70 and color.b < 80: 
```

删除最外面的 else 分支或仅将行替换为`dots = None`将使`pass`点成为非`None`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:14:26.230

您是否尝试过在 dots = None 行之前放置一个调试语句？

我会尝试一些类似的东西

```
import code
code.interact(local=locals(),banner="Check dots = None") 
```

紧接在您的行之前

```
dots = None 
```

然后您可以查看哪个表面位置不满足您的 r,g,b 条件，并验证您是否正确读取了 r,g,b 值。

这是一个博客链接（不是我的），它解释了如何使用一些 Python 调试工具 [http://aymanh.com/python-debugging-techniques#launching-an-interactive-console-with-codeinteract](http://aymanh.com/python-debugging-techniques#launching-an-interactive-console-with-codeinteract)

# php - 如果指定时间后添加另一天交付php

> ID：10523185
> 
> 赞同：0
> 
> 时间：2012-05-09T19:55:33.487
> 
> 标签：php, date, time

我想要完成的事情是我们每周二和周四发货，我想限制如果订单是在周一下午 5 点之后下达，那么他们必须等到周五。如果在星期四下午 5 点之后的订单，他们必须等到星期二。

```
function freeDelivery($date){
    $holidays = array("05/30/2012","07/04/2012","09/05/2012","11/24/2012","11/25/2012","12/25/2012","12/31/2012","01/01/2013","05/28/2013","07/04/2013","09/03/2013","11/22/2013","11/23/2013","12/25/2013");
    $checkday = strtotime($date);
    // check if it's a holiday
    while(in_array(date("m/d/Y",$checkday), $holidays)) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +1 day");
    }

    //sun
    if (date("w",$checkday) == 0) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +2 day");
    }
    //mon
    elseif (date("w",$checkday) == 1) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +1 days");
    }
    //tue
    elseif(date("w",$checkday) == 2) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +2 days");
    }
    //wen
    elseif (date("w",$checkday) == 3) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +1 days");
    }
    //thur
    elseif (date("w",$checkday) == 4) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +5 days");
    }
    //fri
    elseif (date("w",$checkday) == 5) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +4 days");
    }
    //sat
    elseif (date("w",$checkday) == 6) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +3 days");
    }

    // make sure it's not another holiday
    while(in_array(date("m/d/Y",$checkday), $holidays)) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +1 day");
    }
    return $checkday;
} 
```

上面的代码用于根据一周中的日期确定发货日期。

谢谢您的任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:27:19.080

假设您的意思是在星期一 5p 之后是**Thursday**，然后在**星期三**5p 之后您的意思是星期二...尝试以下操作：

**编辑** 最简单的方法是将您的代码添加回函数中。

```
function freeDelivery($date){
    $holidays = array("05/30/2012","07/04/2012","09/05/2012","11/24/2012","11/25/2012","12/25/2012","12/31/2012","01/01/2013","05/28/2013","07/04/2013","09/03/2013","11/22/2013","11/23/2013","12/25/2013");
    $checkday = strtotime($date);
    // check if it's a holiday
    while(in_array(date("m/d/Y",$checkday), $holidays)) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +1 day");
    }

    $thedate = date("m/d/Y",$checkday);
    $dayofweek = date("w",$checkday);
    $dayincrease = array(0 => 2, 1 => 1, 2 => 2, 3 => 1, 4 => 5, 5 => 4, 6 => 3);
    $after5 = (date("G",$checkday) >= 17);

    $increase = "";
    if($after5 && $dayofweek == 1) {
        // monday after 5p = thurs
        $increase = "+3 days";
    } elseif($after5 && $dayofweek == 3) {
        // wednesday after 5p = tues
        $increase = "+6 days";
    } else {
        $increase = "+" . $dayincrease[$dayofweek] . " days";
    }
    $checkday = strtotime($thedate." ".$increase);

    // make sure it's not another holiday
    while(in_array(date("m/d/Y",$checkday), $holidays)) {
        $checkday = strtotime(date("m/d/Y",$checkday)." +1 day");
    }
    return $checkday;
} 
```

# android - java.lang.IllegalArgumentException：类 android.database.sqlite.SQLiteDatabase 声明了多个名为 mLock 的 JSON 字段

> ID：10523186
> 
> 赞同：1
> 
> 时间：2012-05-09T19:55:34.473
> 
> 标签：android, sqlite, sharedpreferences, gson, illegalargumentexception

我在使用 GSON 时遇到问题。

首先，每当我切换活动时，我都会尝试使用 GSON 将对象保存在 SharedPreferences 中。然后我的计划是在我回到活动后再次获取该对象，以便我可以在该页面上重新填充捕获的数据。但是，我的问题是我的 onPause 方法发生了错误。这个错误已经困扰我2天了，希望大家帮忙。我真的需要它。

这是我的 onPause 和 onResume 代码：

```
 @Override
protected void onPause() {
    super.onPause();

    try {
        SharedPreferences appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
        Editor prefsEditor = appSharedPrefs.edit();

        activityDataContainer = convertDataContainers(); //This just gets the data from the page

        prefsEditor.putInt("objectLength", activityDataContainer.size());
        Gson gson = new Gson();
        for(int x = 0; x < activityDataContainer.size(); x++){
            ConnectionObject temp = activityDataContainer.get(x);
            String json = gson.toJson(temp);
            prefsEditor.putString("connectionData"+x, json);
        }

        prefsEditor.commit();
        Toast.makeText(this, "Object stored in SharedPreferences", Toast.LENGTH_SHORT).show();
    } catch (Exception e) {
        Toast.makeText(this, ""+e, Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }

};

@Override
protected void onResume() {
    super.onResume();

    //===== Using SharedPreferences
    SharedPreferences appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(this.getApplicationContext());
    if(appSharedPrefs.contains("objectLength")){

        int length = appSharedPrefs.getInt("objectLength", 0);
        activityDataContainer = new ArrayList<ConnectionObject>();
        Gson gson = new Gson();
        for(int x = 0; x < length; x++){
            String json = appSharedPrefs.getString("connectionData"+x, "");
            ConnectionObject object = gson.fromJson(json, ConnectionObject.class);
            activityDataContainer.add(object);
        }

        revertDataContainers(activityDataContainer); //Repopulates the data
        Toast.makeText(this, "Object retrieved in SharedPreferences", Toast.LENGTH_SHORT).show();
    }
} 
```

这是我得到的错误日志：

```
05-10 02:14:47.822：E/AndroidRuntime（31718）：致命异常：主要
05-10 02:14:47.822: E/AndroidRuntime(31718): java.lang.RuntimeException: Unable to pause activity {com.NelConsulting.FieldCaptureTool/com.MyClass}: java.lang.IllegalArgumentException: class android.database.sqlite.SQLiteDatabase declares multiple JSON fields named mLock
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2354)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2311)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2291)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.ActivityThread.access$1700(ActivityThread.java:117)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:938)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.os.Looper.loop(Looper.java:130)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.ActivityThread.main(ActivityThread.java:3683)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at java.lang.reflect.Method.invokeNative(Native Method)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at java.lang.reflect.Method.invoke(Method.java:507)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at dalvik.system.NativeStart.main(Native Method)
05-10 02:14:47.822: E/AndroidRuntime(31718): Caused by: java.lang.IllegalArgumentException: class android.database.sqlite.SQLiteDatabase declares multiple JSON fields named mLock
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:122)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.Gson.getAdapter(Gson.java:349)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.(ReflectiveTypeAdapterFactory.java:82)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.Gson.getAdapter(Gson.java:349)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.CollectionTypeAdapterFactory.create(CollectionTypeAdapterFactory.java:52)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.Gson.getAdapter(Gson.java:349)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.(ReflectiveTypeAdapterFactory.java:82)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.Gson.getAdapter(Gson.java:349)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:55)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write(CollectionTypeAdapterFactory.java:96)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write(CollectionTypeAdapterFactory.java:60)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.Gson.toJson(Gson.java:582)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.Gson.toJson(Gson.java:561)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.Gson.toJson(Gson.java:516)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.google.gson.Gson.toJson(Gson.java:496)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at com.MyClass.onPause(ConnectionsActivity.java:804)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.Activity.performPause(Activity.java:3851)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
05-10 02:14:47.822: E/AndroidRuntime(31718):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2341)

```

All help will be greatly appreciated. Much thanks in advance.

**EDIT **ConnectionObject is a simple object that stores these values:

```
private boolean toggleButtonValue;
private int sdGenValue;
private int sdSpecValue;
private int sdCountValue;
private String sdLengthValue;
private int sdCondValue;
private int sdOwnValue;
private String sdDateValue;
private String mLtValue;
private String mLgValue;
private String mAcValue;
private int mPhotoValue;
private List<MeterObject> meterContainer; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:58:53.133

I solved it, though I think its just a loop around idea. I just split my object into 2 parts. The first being the String and int values, and the second one being the list. I stored both parts separately then combine them again on resume. Thanks for the ideas guys. It was a lot of help.

# css - 网站未在 iphone 上显示完整长度

> ID：10523188
> 
> 赞同：1
> 
> 时间：2012-05-09T19:55:42.387
> 
> 标签：css, background-image

我有一个网站可以在我的计算机上正确显示，但在 iphone 上它似乎在某个站点中断：

[http://yesiamshow.biz](http://yesiamshow.biz)

谁能告诉我为什么会这样。我试图调整我的 CSS，但它似乎总是被切断。我知道我有一个图像作为背景重复，但它应该是手机屏幕的全长，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:51:44.093

设置最小宽度：1110px；因为身体应该工作。

# php - 接收已达到“100”的最大函数嵌套级别，正在中止！尝试使用 PHP 制作递归脚本时

> ID：10523190
> 
> 赞同：0
> 
> 时间：2012-05-09T19:55:46.610
> 
> 标签：php, xml, nested

```
public function action_xmlread()
{
        $xml = simplexml_load_file('new.xml');

        foreach($xml->body as $b)
        {
            foreach ($b->node as $node) {
                $this->dig($node);
            }
        }
}
public function dig($node)
{
    if(isset($node->tit) && !isset($node->url))
    {
        $this->dig($node);
    }else{
        $this->grabData($node);
    }
}
public function grabData($node)
{
    $category_names = array('userdef1', 'userdef2');

    $url = $node->url;

    $category = '';
    foreach($category_names as $catname)
    {
        if(isset($node->$catname))
        {
            $category = $node->$catname;

            break;
        }
    }

    $keywords = $node->key;
    $title = $node->tit;
    if(empty($url) && empty($category))
    {
        continue;
    }
    $this->saveItem($title, $url, $category, $keywords);
    echo $url . " , category: ". $category;
    echo '<br />';
} 
```

当我运行 xmlread() 它死了：

已达到“100”的最大函数嵌套级别，正在中止！

在

```
$this->dig($node); 
```

在 dig() 函数内部..如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:58:54.583

您处于无限递归中，因为您没有更改传递给的参数`dig`。也许您必须传递子节点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:01:07.750

要增加函数嵌套级别，您需要编辑 php.ini。但也许你的问题出在其他地方。

```
xdebug.max_nesting_level = 200 
```

[来源](https://stackoverflow.com/a/4293870/326016)

# events - 如何显示日历中的 PIM 事件？

> ID：10523191
> 
> 赞同：3
> 
> 时间：2012-05-09T19:55:47.063
> 
> 标签：events, java-me, calendar, jsr75, pim

我有一个 Java ME 日历，但我希望能够显示来自 PIM 功能的事件。

有人可以给我一些帮助吗？

```
import javax.microedition.pim.Event;
import javax.microedition.pim.EventList;
import javax.microedition.pim.PIM;
import javax.microedition.pim.PIMException;
import javax.microedition.pim.PIMItem;

public class PopulateDatabase 
{

/** This method adds test data to the calendar database. Note the special
 *  treatment of dates. You will need to reverse this process when retrieving
 *  date values.
 */

static void populate() 
{
    PIM pim = PIM.getInstance();
    EventList eventList = null;
    Event[] events = new Event[10];

    try 
    {
        eventList = (EventList) pim.openPIMList(PIM.EVENT_LIST, PIM.READ_WRITE);            

    } catch (PIMException e) 
    {
        System.err.println("Error accessing calendar database");
        return;
    } catch (SecurityException e) {
        System.err.println("Security exception (writing to calendar database)");
        return;
    }
    // The following code assumes we have checked various fields are available....

    // Event 1 - Visit parents on 1st Sept. (all day event)
    events[0] = eventList.createEvent();
    events[0].addDate(Event.START, PIMItem.ATTR_NONE, 1346500800000L / 10);
    events[0].addDate(Event.END, PIMItem.ATTR_NONE, 1346500800000L / 10);
    events[0].addString(Event.LOCATION, PIMItem.ATTR_NONE, "Wales");
    events[0].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Visit parents");
    events[0].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PRIVATE);

    // Event 2 - PMD lecture on 3rd Sept. 10-11
    events[1] = eventList.createEvent(); 
    events[1].addDate(Event.START, PIMItem.ATTR_NONE, 1346666400000L / 10);
    events[1].addDate(Event.END, PIMItem.ATTR_NONE, 1346670000000L / 10);
    events[1].addString(Event.LOCATION, PIMItem.ATTR_NONE, "G0.54");
    events[1].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Programming for Mobile Devices lecture");
    events[1].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PUBLIC);

    // Event 3 - AJP lab on 3rd Sept. 1500-1600
    events[2] = eventList.createEvent(); 
    events[2].addDate(Event.START, PIMItem.ATTR_NONE, 1346684400000L / 10);
    events[2].addDate(Event.END, PIMItem.ATTR_NONE, 1346688000000L / 10);
    events[2].addString(Event.LOCATION, PIMItem.ATTR_NONE, "IT1.08");
    events[2].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Advanced Java Programming Labs");
    events[2].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PUBLIC);
    events[2].addString(Event.NOTE, PIMItem.ATTR_NONE, "Remember to check lab software version!");

    // Event 4 - Secret job interview, shhhhh
    events[3] = eventList.createEvent(); 
    events[3].addDate(Event.START, PIMItem.ATTR_NONE, 1346752800000L / 10);
    events[3].addDate(Event.END, PIMItem.ATTR_NONE,  1346760000000L / 10);
    events[3].addString(Event.LOCATION, PIMItem.ATTR_NONE, "Reading");
    events[3].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Job interview with rival university");
    events[3].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_CONFIDENTIAL);

    // Event 5 - AJP lecture Sept. 5 11-12
    events[4] = eventList.createEvent(); 
    events[4].addDate(Event.START, PIMItem.ATTR_NONE,  1346842800000L/ 10);
    events[4].addDate(Event.END, PIMItem.ATTR_NONE,  1346846400000L / 10);
    events[4].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Advanced Java Programming lecture");
    events[4].addString(Event.LOCATION, PIMItem.ATTR_NONE, "OL7");
    events[4].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PUBLIC);

    // Event 6 - Project meeting, clashes with event 5
    events[5] = eventList.createEvent(); 
    events[5].addDate(Event.START, PIMItem.ATTR_NONE,  1346842800000L/ 10);
    events[5].addDate(Event.END, PIMItem.ATTR_NONE,  1346846400000L / 10);
    events[5].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Project meeting");
    events[5].addString(Event.LOCATION, PIMItem.ATTR_NONE, "G0.44A");
    events[5].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PUBLIC);
    events[5].addString(Event.NOTE, PIMItem.ATTR_NONE, "Student name is Will G. Rumble. Subject formal methods.");

    // Event 7 - Visit to cinema Sept. 5 1800-2100
    events[6] = eventList.createEvent(); 
    events[6].addDate(Event.START, PIMItem.ATTR_NONE, 1346868000000L / 10);
    events[6].addDate(Event.END, PIMItem.ATTR_NONE,  1346878800000L / 10);
    events[6].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Watch Dredd 3D");
    events[6].addString(Event.LOCATION, PIMItem.ATTR_NONE, "Teesside retail park");
    events[6].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PRIVATE);

    // Event 8 - Project meeting 7th Sept. 0930-1000
    events[7] = eventList.createEvent(); 
    events[7].addDate(Event.START, PIMItem.ATTR_NONE, 1347010200000L /  10);
    events[7].addDate(Event.END, PIMItem.ATTR_NONE,   1347012000000L / 10);
    events[7].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Project meeting");
    events[7].addString(Event.LOCATION, PIMItem.ATTR_NONE, "G0.44A");
    events[7].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PUBLIC);
    events[7].addString(Event.NOTE, PIMItem.ATTR_NONE, "Student name is Peter Out Subject fractal computing.");

    // Event 9 - Project meeting 7th Sept. 1030-1100
    events[8] = eventList.createEvent(); 
    events[8].addDate(Event.START, PIMItem.ATTR_NONE, 1347013800000L /  10);
    events[8].addDate(Event.END, PIMItem.ATTR_NONE,   1347015600000L / 10);
    events[8].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Project meeting");
    events[8].addString(Event.LOCATION, PIMItem.ATTR_NONE, "G0.44A");
    events[8].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PUBLIC);
    events[8].addString(Event.NOTE, PIMItem.ATTR_NONE, "Student name is Ivor Problem. Subject formal methods.");

    // Event 10 - PMD lab 7th Sept. 1600-1700
    events[9] = eventList.createEvent(); 
    events[9].addDate(Event.START, PIMItem.ATTR_NONE, 1347033600000L /  10);
    events[9].addDate(Event.END, PIMItem.ATTR_NONE,   1347037200000L / 10);
    events[9].addString(Event.SUMMARY, PIMItem.ATTR_NONE, "Programming for Mobile Devices labs");
    events[9].addString(Event.LOCATION, PIMItem.ATTR_NONE, "OL7");
    events[9].addInt(Event.CLASS, PIMItem.ATTR_NONE, Event.CLASS_PUBLIC);

    try 
    {
        // Commit events to database
        for(int i=0; i < events.length; i++)
        {
            events[i].commit();
        }
    } catch (PIMException e) 
    {
        System.err.println("Cannot commit the events to database");
        return;
    }

    try 
    {
        eventList.close();
    } catch (PIMException e) 
    {
        System.err.println("Cannot close the database");
        return;
    }
    System.out.println("Events have been added to calendar.....");

    }
} 
```

请注意，我的日历基于以下链接中的示例。
[Java ME 日历不显示](https://stackoverflow.com/questions/10366414/java-me-calendar-not-displaying)

# mysql - 外部联接中的 IF/CASE

> ID：10523192
> 
> 赞同：1
> 
> 时间：2012-05-09T19:55:55.450
> 
> 标签：mysql, sql

我们有两个表，我需要在一个列（此时，我无法更改该列中使用的方式/值）没有使用相同值的位置加入。因此，根据第一个表中列的值，我需要在第二个表中加入/选择特定值。这是我正在尝试做的一个示例（显然不起作用）：

```
SELECT Alert.*, Comments.Comment FROM
Alert
LEFT OUTER JOIN Comments ON Comments.ObjectId = Alert.ObjectId AND
CASE
WHEN Alert.ObjectType = 'U' THEN Comments.ObjectType = 'USER'
WHEN Alert.ObjectType = 'E' THEN Comments.ObjectType = 'EVENT'
END CASE 
```

所以我想要 Alert 表中的所有内容，如果 Comments 表中有相应的记录，我也想要这些。但仅适用于适当/匹配的 ObjectType。

我已经使用 CASE 和 IF 尝试过这个，但我似乎无法让它工作。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:00:47.553

该`CASE`语句用于*返回*一个值，而不是*执行操作*。

也将最后一个更改`END CASE`为 just `END`。

使用该返回值在连接条件中进行比较。

尝试：

```
SELECT Alert.*, Comments.Comment FROM
Alert
LEFT OUTER JOIN Comments ON Comments.ObjectId = Alert.ObjectId AND
Comments.ObjectType = 
CASE Alert.ObjectType
WHEN 'U' THEN 'USER'
WHEN 'E' THEN 'EVENT'
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:02:54.800

为什么不只是：

```
SELECT Alert.*, Comments.Comment FROM
Alert
LEFT OUTER JOIN Comments ON Comments.ObjectId = Alert.ObjectId AND
Alert.ObjectType = LEFT(Comments.ObjectType, 1); 
```

好像简单多了……

**编辑**

根据您的评论，似乎并非所有“匹配”值都以相同的字母开头。在这种情况下，我建议设计一个包含 AlertType char(1) 和 CommentType varchar(50) 列的中间表。插入TypeId的每个组合，如U、User；E、事件；等你可以修改你的SQL来阅读

```
SELECT Alert.*, Comments.Comment FROM
Alert
LEFT OUTER JOIN Intermediate i on Alert.ObjectType = i.AlertType
LEFT OUTER JOIN Comments ON Comments.ObjectId = Alert.ObjectId AND
Comments.ObjectType = i.CommentType; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:09:11.180

我建议您使用 UNION 处理此问题。在一个联合中加入用户评论，在另一个联合中加入事件评论：

```
SELECT Alert.*, userComments.Comment
FROM alert
LEFT OUTER JOIN comments usercomments ON userComments.ObjectId = Alert.ObjectId AND usercomments.objecttype='USER'
WHERE alert.objecttype = 'U'
UNION
SELECT Alert.*, eventComments.Comment
FROM alert
LEFT OUTER JOIN comments eventcomments ON eventComments.ObjectId = Alert.ObjectId AND eventcomments.objecttype='EVENT'
WHERE alert.objecttype = 'E' 
```

你不必像我一样给它们起别名——它只是有助于提高可读性。

# scala - 类型别名中的差异注释

> ID：10523199
> 
> 赞同：13
> 
> 时间：2012-05-09T19:56:22.663
> 
> 标签：scala, alias, variance

最近我注意到可以在类型别名中使用方差注释。以下是来自的示例`Predef`：

```
type Function[-A, +B] = Function1[A, B] 
```

我开始思考，它可以用在哪里。显然，您不能将方差更改为相反，或者使不变类型表现为协变或逆变。编译器会抛出一个错误，像这样

```
scala> type BrokenFunc[+T, -R] = Function1[T, R]
<console>:7: error: covariant type T occurs in contravariant position in type 
  [+T, -R]T => R of type BrokenFunc 
```

但是，您可以使某些变体类型表现得像不变的（至少，编译器不会对此提出异议）。所以，我试图制作一个不变的版本`List`

```
scala> type InvList[T] = List[T]
defined type alias InvList 
```

但是这个新的不变量`List`仍然表现得和它原来的协变版本一样：

```
scala> val l: InvList[String] = List("foo")
l: InvList[String] = List(foo)

scala> val anyList: InvList[Any] = l
anyList: InvList[Any] = List(foo) 
```

那么，我错过了什么？类型别名中差异注释的目的是什么？您能否举一个带有差异注释的类型别名示例，它与原始类型不同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T06:41:04.407

所以，我不确定，但我将提供一个可能的解释。

Scala 中的类型别名相当“弱”；它们并没有完全创建新类型，只是编写旧类型（和新的路径相关类型）的新方法；这意味着如果你定义

```
type InvList[T] = List[T] 
```

写`InvList[T]`，就像你写的一样`List[T]`；这就是为什么`InvList[Int] <: InvList[Any]`，因为，重写，这只是`List[Int] <: List[Any]`。我实际上并不确定 Scala 类型别名到底有多“弱”……由于路径依赖类型，它们比 Haskell 强一点，但比类声明弱。也许其他人可以进一步解释。

那么，为什么 Scala 允许您在其中放置方差注释，如果它只是要忽略它们并重写类型呢？它适用于类型成员。这样你就可以说

```
trait A { type F[+T] } 
```

并要求实现符合`+T`方差，以便您允许

```
trait B extends A { type F[+T] = List[T] } 
```

但不是

```
trait C extends A { type F[T] = Function[T,T] } 
```

[或者，正如Scala Language Spec S4.3](http://www.scala-lang.org/docu/files/ScalaReference.pdf)中的这句话。

> 类型构造函数声明对 t 可能代表的具体类型施加了额外的限制。除了边界 L 和 U 之外，类型参数子句可能会施加更高阶的边界和方差，由类型构造函数的一致性（第 3.5.2 节）控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:52:00.117

如果仅声明了抽象类型（如 中`Domain`），则将强制执行不变性。如果抽象类型被定义为具有更宽松的方差，则一旦知道就会尊重这一点（如`DomainImpl`）：

```
trait Domain {
  type InvList[T]

  val xi: InvList[Int]
  private val xa: InvList[Any] = xi // won't compile
}

class DomainImpl extends Domain {
  type InvList[T] = List[T]

  val xi: InvList[Int] = List(1)
  private val xa: InvList[Any] = xi // will compile
} 
```

# javascript - 将用户输入存储在数组中

> ID：10523200
> 
> 赞同：8
> 
> 时间：2012-05-09T19:56:23.083
> 
> 标签：javascript, arrays, forms

我需要执行以下操作（我是编程初学者，所以请原谅我的无知）： 我必须向用户询问有关表单上三个不同文本框的三个不同信息。然后用户有一个名为“输入”的按钮，当他点击它时，他在三个字段中输入的文本应该存储在三个不同的数组中，在这个阶段我还想看到用户输入以检查数据是否实际被存储在数组中。我一直在尝试让应用程序仅在其中一个数组上存储或显示数据，但没有成功。我有 2 个文件：film.html 和 functions.js。这是代码。任何帮助将不胜感激！

```
<html>
    <head>
    <title>Film info</title>

    <script src="jQuery.js" type="text/javascript"></script>
    <script src="functions.js" type="text/javascript"></script>

    </head>
        <body>

        <div id="form">

            <h1><b>Please enter data</b></h1>
        <hr size="3"/>
        <br>

            <label for="title">Title</label> <input id="title" type="text" > 
        <br>

            <label for="name">Actor</label><input id="name" type="text">
        <br>

            <label for="tickets">tickets</label><input id="tickets" type="text">
        <br>
        <br>

            <input type="button" value="Save" onclick="insert(this.form.title.value)">
            <input type="button" value="Show data" onclick="show()"> <br>

            <h2><b>Data:</b></h2>
        <hr>
        </div>

        <div id= "display">

        </div>
        </body>

</html>

var title=new Array();
var name=new Array();
var tickets=new Array();

function insert(val){
  title[title.length]=val;
  }

function show() {
  var string="<b>All Elements of the Array :</b><br>";
  for(i = 0; i < title.length; i++) {
  string =string+title[i]+"<br>";
  }
  if(title.length > 0)
 document.getElementById('myDiv').innerHTML = string;
  } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T20:05:23.857

你并没有真正追求价值观。您需要像这样收集它们：

```
var title   = document.getElementById("title").value;
var name    = document.getElementById("name").value;
var tickets = document.getElementById("tickets").value; 
```

您可以将所有这些放在一个数组中：

```
var myArray = [ title, name, tickets ]; 
```

或许多数组：

```
var titleArr   = [ title ];
var nameArr    = [ name ];
var ticketsArr = [ tickets ]; 
```

或者，如果数组已经存在，您可以使用他们的`.push()`方法将新值推送到它上面：

```
var titleArr = [];

function addTitle ( title ) {
  titleArr.push( title );
  console.log( "Titles: " + titleArr.join(", ") );
} 
```

您的保存按钮不起作用，因为您引用了`this.form`，但是页面上没有表单。为了让它工作，你需要有`<form>`标签来包装你的字段：

我做了几处更正，并将更改放在 jsbin 上：http: [//jsbin.com/ufanep/2/edit](http://jsbin.com/ufanep/2/edit)

新表格如下：

```
<form>
  <h1>Please enter data</h1>
  <input id="title" type="text" />
  <input id="name" type="text" />
  <input id="tickets" type="text" />
  <input type="button" value="Save" onclick="insert()" />
  <input type="button" value="Show data" onclick="show()" />
</form>
<div id="display"></div> 
```

还有一些改进的空间，例如删除`onclick`属性（那些绑定应该通过 JavaScript 完成，但这超出了这个问题的范围）。

我还对您的 JavaScript 进行了一些更改。我首先创建三个空数组：

```
var titles  = [];
var names   = [];
var tickets = []; 
```

现在我们有了这些，我们需要对输入字段的引用。

```
var titleInput  = document.getElementById("title");
var nameInput   = document.getElementById("name");
var ticketInput = document.getElementById("tickets"); 
```

我还得到了对我们的消息显示框的引用。

```
var messageBox  = document.getElementById("display"); 
```

该`insert()`函数使用对每个输入字段的引用来获取它们的值。然后它使用`push()`相应数组上的方法将当前值放入数组中。

完成后，它会`clearAndShow()`调用负责清除这些字段（使它们为下一轮输入做好准备）并显示三个数组的组合结果的函数。

```
function insert ( ) {
 titles.push( titleInput.value );
 names.push( nameInput.value );
 tickets.push( ticketInput.value );

 clearAndShow();
} 
```

如前所述，此函数首先将`.value`每个输入的属性设置为空字符串。然后它会清除`.innerHTML`我们的消息框。最后，它调用`join()`我们所有数组的方法，将它们的值转换为逗号分隔的值列表。然后将此结果字符串传递到消息框。

```
function clearAndShow () {
  titleInput.value = "";
  nameInput.value = "";
  ticketInput.value = "";

  messageBox.innerHTML = "";

  messageBox.innerHTML += "Titles: " + titles.join(", ") + "<br/>";
  messageBox.innerHTML += "Names: " + names.join(", ") + "<br/>";
  messageBox.innerHTML += "Tickets: " + tickets.join(", ");
} 
```

最终结果可以在线使用[http://jsbin.com/ufanep/2/edit](http://jsbin.com/ufanep/2/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T20:30:03.370

您至少有以下 3 个问题：

1.  您没有正确获得元素的值
2.  您尝试用于显示值是否已保存的 div`display`在您的 javascript 中还具有 id，您尝试获取`myDiv`甚至未在标记中定义的元素。
3.  **永远不要**在 javascript 中使用保留关键字命名变量。在我能想到的大多数语言中，使用“字符串”作为变量名并不是一件好事。我将您的字符串变量重命名为“内容”。见下文。

您可以通过执行以下操作一次保存所有三个值：

```
var title=new Array();
var names=new Array();//renamed to names -added an S- 
                      //to avoid conflicts with the input named "name"
var tickets=new Array();

function insert(){
    var titleValue = document.getElementById('title').value;
    var actorValue = document.getElementById('name').value;
    var ticketsValue = document.getElementById('tickets').value;
    title[title.length]=titleValue;
    names[names.length]=actorValue;
    tickets[tickets.length]=ticketsValue;
  } 
```

然后将显示功能更改为：

```
function show() {
  var content="<b>All Elements of the Arrays :</b><br>";
  for(var i = 0; i < title.length; i++) {
     content +=title[i]+"<br>";
  }
  for(var i = 0; i < names.length; i++) {
     content +=names[i]+"<br>";
  }
  for(var i = 0; i < tickets.length; i++) {
     content +=tickets[i]+"<br>";
  }
  document.getElementById('display').innerHTML = content; //note that I changed 
                                                    //to 'display' because that's
                                              //what you have in your markup
} 
```

这是一个[jsfiddle](http://jsfiddle.net/KsuxV/)供您玩耍。

# php - 浏览器挂起执行运行 Powershell 的 PHP

> ID：10523202
> 
> 赞同：5
> 
> 时间：2012-05-09T19:56:34.003
> 
> 标签：php, powershell, exec, shell-exec

我正在尝试运行一个运行 powershell 脚本的简单 PHP，如果我使用此代码，我会在命令窗口中获得结果，但我会在浏览器中获得一个空数组：

```
<?php 
exec("powershell C:\\Inetpub\\wwwroot\\my_shell.ps1 < NUL", $output);

echo "<pre>";
print_r($output);
echo "</pre>";
?> 
```

我相信 NUL 会丢弃输出，但是它可以在 [this Fourm][1] 上找到的浏览器中工作

如果我使用这段代码，没有**NUL** ，我将在命令窗口中获得结果，但如果我在浏览器中运行脚本，它将永远加载，它永远不会给我任何结果：

```
exec("powershell C:\\Inetpub\\wwwroot\\emsrDev\\manual_shell.ps1", $output); 
```

如果我这样做，结果相同：

```
$output = shell_exec("powershell C:\\Inetpub\\wwwroot\\emsrDev\\manual_shell.ps1"); 
```

如果我独立运行，powershell 脚本运行良好：

```
$cmd = "cmd.exe";
&$cmd "/C echo update tasks set last='manual' where id='8'; | sqlplus vvv/www@xxx"; 
```

所以我需要在浏览器中执行它并获取输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T01:06:53.717

powershell 进程没有终止，这会导致浏览器挂起。将以下内容添加到脚本的末尾

```
Stop-Process -processname powershell* 
```

# class - Intellij 10.5.4 将 iml 文件的库根 url 本地变量替换为 $USER_HOME$

> ID：10523204
> 
> 赞同：0
> 
> 时间：2012-05-09T19:56:40.960
> 
> 标签：class, url, variables, maven, intellij-idea

出于某种原因，当我重新打开我的 intellij 项目时，iml 文件的根标签的 url 参数会自动将我的用户定义的局部变量替换为 $USER_HOME$。

此外，当我进入并用 $LOCAL_VAR$ 手动替换（使用 CTRL+R）$USER_HOME$ 时，Intellij 用 $LOCAL_VAR$/.m2/repository 替换了这个更改。你有没有遇到过这个问题？

来自目录 .iml 文件之一的代码：

```
<library> 
<classes> 
<root url="jar://$LOCAL_VAR$/.m2/repository/.m2/repository/bar/foo.jar!/" />
</classes> 
<JAVADOC/> 
</libarary> 
```

当我第二次用 $LOCAL_VAR$ 替换 $LOCAL_VAR$/.m2/repository 时，不会发生进一步的自动替换。我需要用 $LOCAL_VAR$ 替换 $USER_HOME$ 的原因是因为 $USER_HOME$ 是系统定义的，我需要将我的代码指向我安装在 Windows7 电脑上的 SAMBA 驱动器。

如果您可以建议一种方法来覆盖我的 $USER_HOME$ 或这种奇怪行为的可能原因，我将不胜感激您的智慧。请注意，当我最初导入这个项目时，我已经从 .ipr 文件生成了 .iml 文件。不确定这是否相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:27:45.830

尝试将 /.m2/repository/ 定义为单独的路径变量，不应覆盖此变量。

# css - firefox（windows os）中的字体质量问题

> ID：10523207
> 
> 赞同：2
> 
> 时间：2012-05-09T19:56:49.220
> 
> 标签：css, rendering, font-face

我有一个字体通常可以使用的网站，即使在 ie 中也是如此。但是在firefox中字母是锯齿状且难看的，我认为是渲染问题。在 Firefox 中，MAC 功能正常，就像在其他浏览器中一样。我尝试了很多方法都没有成功。谁能帮我？

* * *

[链接到图片](http://i.stack.imgur.com/cvJGY.jpg)

```
@font-face {
font-family: 'Myriad Pro';
src: url('myriadpro-regular.eot');
src: url('myriadpro-regular.eot?#iefix') format('embedded-opentype'),
     url('myriadpro-regular.woff') format('woff'),
     url('myriadpro-regular.ttf') format('truetype'),        
     url('myriadpro-regular.svg#myriadpro-regular') format('svg');
font-weight: normal;
font-style: normal; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:46:55.390

很抱歉打扰您，但据我所知，您不能在网站中使用 Adob​​e 字体，从技术上讲，您不能在任何东西上使用它们，这将允许其他人访问该字体（例如，我可以使用您的 Myriad Pro 字体只是愚弄萤火虫）。

就您的项目上线而言，无论如何希望我的信息有所帮助。

# jquery - 获取 Asp.Net MVC 自动完成文本框的 id

> ID：10523210
> 
> 赞同：2
> 
> 时间：2012-05-09T19:56:56.863
> 
> 标签：jquery, asp.net-mvc

我有一个文本框，我在其中获取 Json 数据以在文本框中显示数据

```
@Html.TextBox("tbxSearch", null, new { data_url = Url.Action("GetSearchData"), data_maxValues = 10, data_valueHiddenId = "#value" }) 
```

在文本框中输入时，我将 Json Data 作为

```
[{"label":"ABC","value":186},{"label":"DEF","value":1744}] 
```

我的问题是我有一个按钮，单击按钮我需要文本框中所选项目的值。

我正在尝试这种方式

```
 $("#btnSearchPerson").click(function () {
        alert($('#tbxSearch').data('valueHiddenId'));
}); 
```

它显示未定义。请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:19:24.960

jQuery`data-*`属性在解析时是小写的。

```
$("#btnSearchPerson").click(function () {
  alert($('#tbxSearch').data('valuehiddenid'));
}); 
```

如果你想让骆驼`data-*`大小写的属性用 a 分隔单词`-`

```
<div data-value-Hidden-Id="some value">
</div> 
```

和 jQuery

```
$("#btnSearchPerson").click(function () {
  alert($('#tbxSearch').data('valueHiddenId'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:13:31.747

尝试改用 $('#tbxSearch').attr('data-valueHiddenId')

# c++ - 数据类型匹配，但我的链接列表仍然出错？

> ID：10523211
> 
> 赞同：1
> 
> 时间：2012-05-09T19:56:58.510
> 
> 标签：c++, linked-list

所以我得到了这个：

> 错误：类型参数与类型`"Person *"`不兼容`"Person *"`

我不知道我做错了什么。我确定这是愚蠢的，但如果有人能指出它会很棒。

```
LL* g_list;
int size = 50;

char getOption();

int main()
{
    char input;
    bool running = true;
    g_list = new LL;

    char* name = new char[size];
    char* color = new char[size];
    cout << "enter name: ";
    cin >> name;
    cout << "enter color: ";
    cin >> color;
    Person* pers = new Person(name, color);

    g_list->addBack(pers);  //error

    return 0;
}

//LL.cpp file (linked list)
void LL::addBack(Person* pobj)
{
    if (count_ == 0)
    {
        head_ = pobj;
    }
    else 
    {
        Person* ptr = head_;
        for (int i = 0; i < count_ - 1; i++)
        {
            ptr = ptr->next_;
        }

        ptr->next_ = pobj;
    }

    count_++;
    pobj->next_ = 0;

    return;
}

//Person constructor
Person::Person(char* name, char* color)
{
    name_ = new char[strlen(name)];
    strcpy(name_, name);

    color_ = new char[strlen(color)];
    strcpy(color_, color);

    next_ = 0;
} 
```

让我知道是否需要更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:02:48.853

这似乎很奇怪，因为据报道类型是相同的。我只能想到一个原因：你有两种不同的`Person`类型，它们是相互冲突的。您需要弄清楚`Person`in的定义来自何处`main()`，并将其与`Person`used in的定义进行比较`LL::addBack()`

# objective-c - 设置导航控制器时，根视图控制器始终设置为 tableViewController

> ID：10523213
> 
> 赞同：3
> 
> 时间：2012-05-09T19:57:11.397
> 
> 标签：objective-c, interface-builder, uistoryboard

当我使用故事板并从 Interface Builder 的对象库中拖出导航控制器时，导航控制器附带的根视图控制器始终是表视图控制器。

大多数时候，我只想要一个简单的视图控制器。有没有办法拖出导航控制器并将简单的视图控制器设置为默认值，而不是我现在得到的表视图控制器？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T19:16:20.613

导航控制器通常连接到另一个控制器，即根控制器。您始终可以删除 segue 和 table view controller，拖出 View Controller 并使用 rootViewController 选项单击控件重新连接 segue。

# build - 将我的 .jar 文件从 lib 文件夹包含到我的主 .jar 文件中

> ID：10523214
> 
> 赞同：1
> 
> 时间：2012-05-09T19:57:12.830
> 
> 标签：build, jar

我在 NetBeans 中构建了一个程序，它创建了 myprogram.jar 文件，还创建了名为 lib 的文件夹，其中包含 JavaMail 的 mail.jar 文件。因此，我想将该程序发送给我的朋友，而不必向他发送 lib 文件夹并告诉他将它们放在一起。那么有什么方法可以将所有内容添加到单个 .jar 文件中吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:56:31.403

所以我发现这种很容易理解的解决方案不包含除 NetBeans 之外的任何其他程序，而且对我来说效果很好。这是链接：http: [//javanepal.wordpress.com/2009/09/15/merging-jar-files-to-single-jar-via-ide-netbeans-6-7/](http://javanepal.wordpress.com/2009/09/15/merging-jar-files-to-single-jar-via-ide-netbeans-6-7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:13:37.330

如果我没记错的话，你不能将 jar 文件添加到 jar 中。您可以做的是提取您拥有的 jar 的内容（保留目录结构），然后按照有关如何创建 jar 文件的[说明jar 生成的目录层次结构](http://java.sun.com/developer/Books/javaprogramming/JAR/basics/build.html)

当然，一旦您弄清楚所涉及的确切命令，您可以创建一个批处理文件来再次为您完成工作。

# automapper - 在共享属性上使用 AutoMapper？

> ID：10523216
> 
> 赞同：0
> 
> 时间：2012-05-09T19:57:18.793
> 
> 标签：automapper

AutoMapper 可以映射共享属性吗？

**实体**

```
public class Entity
{
    public static string SomeProperty {get; set;}
    ...
    ...
    ...
} 
```

**查看模型**

```
public class ViewModel
{
    public string SomeProperty {get; set;}
    ...
    ...
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:20:18.097

Although I have not used AutoMapper yet, I see no reason why you would not be able to achieve what you are looking for. Based on the project's [documentation on Projection](https://github.com/AutoMapper/AutoMapper/wiki/Projection), you can write a projector:

```
Mapper.CreateMap<Entity, ViewModel>()
  .ForMember(dest => dest.SomeProperty, opt => opt.MapFrom(src => src.SomeProperty));

// Perform mapping
ViewModel form = Mapper.Map<Entity, ViewModel>(entity); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:49:08.987

你应该使用这样的代码：

```
Mapper.CreateMap<Entity, ViewModel>()
    .ForMember(
        dest => dest.SomeProperty,
        opt => opt.MapFrom(src => Entity.SomeProperty)); 
```

# message-queue - 有没有办法配置“主题交换”以将非路由消息发送到队列？

> ID：10523233
> 
> 赞同：0
> 
> 时间：2012-05-09T19:58:40.113
> 
> 标签：message-queue, rabbitmq

当消息未路由时，默认行为会丢失消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:46:30.827

您可以通过在绑定中使用 # 作为路由键来创建一个接收所有消息的队列。然后创建一个处理所有非路由消息的进程。该进程必须连接到队列并接收所有消息，并以某种方式知道它们是否已被路由。您需要做的是调用管理插件 cli 以返回所有绑定以进行交换。解析该结果以获取此交换绑定列表，并忽略任何与绑定匹配的传入消息。然后你可以处理那些一开始就没有被路由的。您甚至可以将它们读回另一个队列以供工作进程使用。查看[此](http://www.rabbitmq.com/management-cli.html)内容以获取有关管理插件 cli 的信息。如果您更喜欢使用 rabbitmqctl，您可以使用

```
sudo rabbitmqclt report 
```

获取需要解析以获取所有绑定的报告。看[这里](http://www.rabbitmq.com/man/rabbitmqctl.1.man.html)

# ios - UIButton点击崩溃的应用程序

> ID：10523235
> 
> 赞同：0
> 
> 时间：2012-05-09T19:58:47.067
> 
> 标签：ios, uibutton

我有一个错误警报视图，当我单击“确定”时会崩溃

```
- (id)initWithFrame:(CGRect)frame {
if ((self = [super initWithFrame:frame])) {
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setTitle:@"OK" forState:UIControlStateNormal];
    [button setFrame:CGRectMake(10, 80, 266, 43)];  
    [button addTarget:self action:@selector(dismissError:) forControlEvents:UIControlEventTouchUpInside];
    [alertView addSubview:button]; //This is a subview of 
    //...other stylings for the custom error alert view

    errorWindow = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    errorWindow.windowLevel = UIWindowLevelStatusBar;
    errorWindow.hidden = NO;        
    [errorWindow addSubview:alertView];
    [errorWindow makeKeyAndVisible];

} 
```

此 alertView 位于自定义 ErrorAlert:UIView 中。

此警报显示正常。

但是，当单击“确定”按钮时，应用程序崩溃，它从未到达 - (void)dismissError:(id)sender;

我是否在错误的位置添加了按钮？（它给出了通用的 int retVal=......EXC_BAD_ACCESS）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:08:04.940

除非您在外部显示器上显示某些内容，否则不应创建新的 UIWindow。

*在 iOS 中，窗口没有标题栏、关闭框或任何其他视觉装饰。窗口始终只是一个用于一个或多个视图的空白容器。此外，应用程序不会通过显示新窗口来更改其内容。当您想要更改显示的内容时，您可以更改窗口的最前面的视图。*

[查看适用于 iOS](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingWindows/CreatingWindows.html#//apple_ref/doc/uid/TP40009503-CH4-SW1)的View Programming Guide

# python - ELF 解析：使用 pyelftools 直接访问 DIE

> ID：10523242
> 
> 赞同：1
> 
> 时间：2012-05-09T19:59:18.447
> 
> 标签：python, binary, elf, dwarf, pyelftools

我需要一种使用它们的偏移量直接访问 DIE 的方法。到目前为止，我发现有一种计算单元 (CU) 对象的方法，您可以在其中从偏移量访问 DIE。

IE ：

```
cu._get_DIE(die.attributes['DW_AT_type'].value) 
```

但是，如果您尝试访问当前 CU 之外的 DIE，则会超出范围，因为该 DIE 未在该 CU 下编制索引。

我能想到的最好的方法是遍历 CU，并使用偏移量作为索引创建一个完整的 DIE 列表。

似乎应该有一个`DWARFInfo`类的方法，只要你有它的偏移量，你就可以访问任何 DIE。

我需要这样做的原因是因为我正在循环所有 CU 以生成我的全局变量列表，并且我需要在不同的 CU 中引用 DIE 来检索类型信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-23T15:48:36.243

pyelftools 似乎将引用表示为相对于编译单元的值，因此您可能需要在全局列表中包含 CU 信息。

查看[https://github.com/eliben/pyelftools/issues/27](https://github.com/eliben/pyelftools/issues/27)。它表示引用可以相对于编译单元。事实上，DWARF 规范也这么说： http: [//dwarfstd.org/doc/dwarf-2.0.0.pdf#page=71](http://dwarfstd.org/doc/dwarf-2.0.0.pdf#page=71)

# jquery - 使用 Jquery UI 对话框，我想知道选择了确定按钮或取消按钮

> ID：10523245
> 
> 赞同：-1
> 
> 时间：2012-05-09T19:59:27.700
> 
> 标签：jquery, jquery-ui, dialog

我想使用 JQUERY UI，但我遇到了问题。我想在对话框中选择按钮，然后在我的页面中执行某些操作。这些是我用来生成对话框的代码：

```
<script type="text/javascript">
        $(function(){

            // Dialog
            $('#dialog').dialog({
                resizable: false,
                autoOpen: false,
                width: 300,
                height: 140,
                modal: true,
                buttons: {
                    "Ok": function() {
                        $(this).dialog("close");
                    },
                    "Cancel": function() {
                        $(this).dialog("close");
                    }
                }
            });

            // Dialog Link
            $('#dialog_link').click(function(){
                $('#dialog').dialog('open');
                return false;
            });

        });
    </script>
<body>
    <a href="#" id="dialog_link">Open Dialog</a>
    <!-- ui-dialog -->
    <div id="dialog" title="Dialog Title">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:03:37.777

您可以在每一`$(this).dialog("close");`行之后调用与按钮相关的函数。您有两次对话框关闭行，每个按钮一次，因此每个按钮都可以跟随不同的函数调用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-19T13:32:26.480

好吧，jQuery 负责知道你按下了什么按钮，基本上。因此，在创建对话框期间，您可以指定对每个按钮的单击事件执行的操作。

您可以调用特定函数或直接编写代码行，如下所示：

```
buttons: {
    "Ok": function() {
        $(this).dialog("close");
        console.log("Inline code example");
        myOkFunction();
    },
    "Cancel": function() {
        $(this).dialog("close");
        myCancelFunction();
    }
}

function myOkFunction(){
    //Something that will happen on "Ok" button clicked.
}

function myCancelFunction(){
    //Something that will happen on "Cancel" button clicked.
} 
```

但是，您可以在执行期间通过调用小部件选项来更改要执行的代码，如下所示：

```
$(yourDialog).dialog("option","buttons",{
    "Ok":function(){
        var i = 0; //Inline code example
        this.Dialog("close");
        myNewOkFunction();    
    }
}); 
```

但是请注意，这将覆盖对话框中的所有按钮，因此如果您有多个按钮，则需要全部重新编写。

# android - 如何在我们的应用程序中找到我们可以在使用其他应用程序时使用的“公共”意图

> ID：10523251
> 
> 赞同：4
> 
> 时间：2012-05-09T19:59:43.970
> 
> 标签：android, android-intent, launch

所以在 stackoverflow 上搜索，我发现[Intents List: Invoking Google Applications on Android Devices](http://developer.android.com/guide/appendix/g-app-intents.html)告诉我如何使用意图来拨打电话、查看地图或查看街景。

它没有告诉我如何使用意图访问联系人列表、日历项目、电子邮件、短信、媒体播放器、相机、蓝牙或几乎所有安卓手机上存在的任何其他应用程序。

它当然不会告诉我如何使用 ES File Explorer、Dropbox、Facebook、谷歌语音等应用程序访问，或者我们许多人免费下载的任何其他非常有用的应用程序，并且可能喜欢从我们编写的应用程序中自动使用。

如果那里的任何人都知道如何找到意图的“API”来从应用程序访问这些不同的东西，那么能够仔细阅读这些列表就太好了。

PS 我意识到我可以有意识地启动这些应用程序中的任何一个，我知道该怎么做。但是要自动将某些内容上传到 Dropbox，而不是调出 Dropbox 的输入屏幕，这样我就可以手动尝试猜测我的应用想要上传什么，然后手动上传，显然自动更好，否则我们就不会对手机进行编程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:33:44.513

[这](http://www.openintents.org/en/intentstable)是我能找到的最大的意图列表。我经常使用这些。此处列出的所有意图都是各种应用程序允许开发人员访问的意图。如果您正在寻找特定应用的意图，那么他们会在他们的开发者论坛/网站上列出。除此之外，我认为没有其他方法可以知道哪个应用程序提供了哪些意图。[编辑：您可以在此处](http://developer.android.com/reference/android/content/Intent.html)
找到另一个意图列表。

# magento - Magento 将产品批量分配到类别

> ID：10523254
> 
> 赞同：3
> 
> 时间：2012-05-09T20:00:03.097
> 
> 标签：magento, categories, product, mass-assignment

正如标题所说，我需要将产品批量分配到一个类别，并且从管理员那里我一次只能编辑一个产品；我不知道为什么从类别页面的“类别产品”选项卡中批量添加它们不起作用。
这就是为什么我需要另一种快速的方法，比如使用 phpMyAdmin 或类似的方法。

有什么帮助吗？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T20:38:01.023

我创建了一个简单的脚本来在 Magento 之外执行此操作。请务必先在单个产品上对此进行测试，并确保其外观符合您的预期。

```
// Load Magento
require_once 'path/to/app/Mage.php';
Mage::app();

// $productIds is an array of the products you want to modify.
// Create it however you want, I did it like this...
$productsIds = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToFilter('sku', array('like' => 'something'))
    ->getAllIds();

// Array of category_ids to add.
$newCategories = array(20);
foreach ($productIds as $id) {
    $product = Mage::getModel('catalog/product')->load($id);
    $product->setCategoryIds(
        array_merge($product->getCategoryIds(), $newCategories)
    );
    $product->save();
} 
```

如果您希望覆盖产品的现有类别，请更改`array_merge(...)`为`$newCategories`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T20:31:30.180

我会回避从数据库方面解决这个问题。如果您确实朝着这个方向前进，请确保并进行大量备份，并在低使用率期间进行。

[Magento 论坛上](http://www.magentocommerce.com/boards/viewthread/5329/)的以下主题确定了相同的问题。一张海报通过示例推荐了一种原始 sql 方法。同样，我会小心 - 确保您进行备份。

我最喜欢线程中的答案（由 Magento MVP 发布）：

> 进入您不希望它们进入的类别，找到产品列表。单击要删除的产品上的复选框，然后从小下拉列表中选择删除。
> 
> 现在进入您想要的类别，进入产品列表。选择 NO 下拉菜单，以便显示不在该类别中的项目。您可能必须进行选择性搜索以限制内容并在几次迭代中完成。单击复选框并告诉它添加内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T06:26:20.130

您也可以使用 magento API 执行此操作。这是我用于批量添加产品的脚本。sku.txt 每行包含一个 sku。

```
<?php
$wsdlUrl = "magento-root/index.php/api/soap/?wsdl";
$proxy = new SoapClient($wsdlUrl);
$sessionId = $proxy->login('apiuser', 'apipasswd');

$listOfDiscountedSKUFile = "sku.txt";

function readinFile($filePath)
{
    $fp = fopen($filePath,'r') or exit("Unable to open file!");
    $dataItems = array();
    while(!feof($fp))
    {
        $dataItems[] = trim(fgets($fp));
    }
    fclose($fp);
    var_dump($dataItems);
    return $dataItems;
}

function addToCategory($sku,$categoryId)
{
    global $proxy,$sessionId;
    $proxy->call($sessionId, 'category.assignProduct', array($categoryId, $sku));
}

function IsNullOrEmptyString($question){
        return (!isset($question) || trim($question)==='');
}
$categoryId = 82;//e.g.
$listOfSKU = readinFile($listOfDiscountedSKUFile);
foreach($listOfSKU as $sku)
{
    addToCategory($sku,$category);
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T19:50:15.667

我设法用以下代码解决了这个问题：

```
$write = Mage::getSingleton('core/resource')->getConnection('core_write');
$x = 1171;
$y = 2000;
$categoryID = 4;
$productPosition = 0;
while($x <= $y) {
$write->query("REPLACE INTO `catalog_category_product` (`category_id`, `product_id`,  `position`) VALUES ($categoryID, $x++, $productPosition)");
}
echo "The job is done";
?> 
```

我希望每个人都清楚代码，如果不是，请回复，我会尝试解释它。

@nachito：在这里。

# ios5 - 如何将 UILongPressGestureRecognizer 应用于 C4 中的形状？

> ID：10523255
> 
> 赞同：4
> 
> 时间：2012-05-09T20:00:05.397
> 
> 标签：ios5, c4

我在 C4 中工作，希望能够按下一个形状并以慢速向上拖动它。我一直在使用“为 UIGestureRecognizer 获取 UITouch 对象”教程和其他 TouchesMoved 和 TouchesBegan Objective-C 教程，但手势不适用于形状。项目构建，但当您按下并拖动它时，形状仍然没有移动。C4 是否有特定的方式将手势应用于形状？

这是我的代码：

DragGestureRecognizer.h

```
#import <UIKit/UIKit.h>

@interface DragGestureRecognizer : UILongPressGestureRecognizer {

 }

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;

@end

@protocol DragGestureRecognizerDelegate <UIGestureRecognizerDelegate>
- (void) gestureRecognizer:(UIGestureRecognizer *)gr movedWithTouches:(NSSet*)touches     andEvent:(UIEvent *)event;
@end 
```

C4WorkSpace.m：

```
#import "C4WorkSpace.h"
#import "DragGestureRecognizer.h"

@implementation DragGestureRecognizer

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    [super touchesMoved:touches withEvent:event];

    if ([self.delegate respondsToSelector:@selector(gestureRecognizer:movedWithTouches:andEvent:)]) {
    [(id)self.delegate gestureRecognizer:self movedWithTouches:touches andEvent:event];

    }
}

@end 

@implementation C4WorkSpace {
    C4Shape *circle;
}

- (void)longPress:(UILongPressGestureRecognizer*)gesture {
    if ( gesture.state == UIGestureRecognizerStateEnded ) {
        NSLog(@"Long Press");
    }
}

-(void)setup {

    circle = [C4Shape ellipse:CGRectMake(5,412,75,75)];
    [self.canvas addShape:circle];
}

 @end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:08:44.597

C4 有一种方法可以简化向任何可见对象（例如 C4Shape、C4Movie、C4Label...）添加手势的过程。

**注意**：您需要创建一个 C4Shape 的子类，您可以在其中创建一些自定义方法。

例如，以下将向 C4Shape 添加轻击手势：

```
C4Shape *s = [C4Shape rect:CGRectMake(..)];
[s addGesture:TAP name:@"singleTapGesture" action:@"tap"]; 
```

该`addGesture:name:action:`方法列在 C4Control 文档中，定义如下：

向对象添加手势。

```
- (void)addGesture:(C4GestureType)type name:(NSString *)gestureName action:(NSString *)methodName 
```

`(C4GestureType)type`可以是以下任何一项：

*   轻敲
*   刷卡
*   向左滑动
*   向上滑动
*   刷下
*   平底锅
*   长按

以下手势可用，但尚未经过测试：

*   捏
*   回转

`(NSString *)gestureName`允许您为手势指定唯一名称。

`(NSString *)methodName`允许您指定手势将触​​发的方法。

所以......回到上面的例子：

```
[s addGesture:TAP name:@"singleTapGesture" action:@"tap"]; 
```

...将向`s`对象添加一个`TAP`称为手势的手势`singleTapGesture`，当触发该手势时，将运行一个`-(void)tap;`方法（需要已经在您的类中定义）。

* * *

您可以应用我上面描述的技术，但改为使用：

`[s addGesture:PAN name:@"panGesture" action:@"move:];`

您还必须定义一个

`-(void)move:(id)sender;`

形状类中的方法。

# castle-windsor - Castle Windsor：获取特定接口的所有注册组件名称

> ID：10523259
> 
> 赞同：3
> 
> 时间：2012-05-09T20:00:26.840
> 
> 标签：castle-windsor, factory

我编写了一个新的 FactoryComponentSelector，它能够通过名称解析特定接口的实例。到目前为止，一切都很好。但是，当涉及到我们应用程序的业务部分的配置时，我需要一个容器外给定接口的所有名称的列表。

假设我们有以下注册：

```
container.AddFacility<TypedFactoryFacility>();

container.Register(Component.For<ITypedFactoryComponentSelector>().ImplementedBy<CreateByNameComponentSelector>());
container.Register(Component.For<IProviderFactory>().AsFactory(c => c.SelectedWith<CreateByNameComponentSelector>()));

container.Register(Component.For<IProvider>().ImplementedBy<FirstProvider>().Named("First"));
container.Register(Component.For<IProvider>().ImplementedBy<SecondProvider>().Named("Second"));
container.Register(Component.For<IProvider>().ImplementedBy<ThirdProvider>().Named("Third")); 
```

有没有办法向容器询问实现接口 IProvider 的所有已注册组件的名称列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T23:40:26.510

```
var handlers = container.Kernel.GetHandlers(typeof(IProvider));

handlers.Select(h=>h.ComponentModel.Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T17:20:25.160

```
IEnumerable<IProvider> providers = container.ResolveAll<IProvider>(); 
```

一句话—​​—正如温莎[文档](http://docs.castleproject.org/Windsor.Three-Calls-Pattern.ashx#Call_two_-_Resolve__1)所说：

> “当您使用 ResolveAll 时，请注意它的语义与 Resolve 略有不同。它将返回所有可分配给指定类型的可解析组件，而不仅仅是那些将类型注册为其服务之一的组件。”

# windows - 在 Windows 内核系统调用跟踪中，这些神秘地址是什么？

> ID：10523263
> 
> 赞同：0
> 
> 时间：2012-05-09T20:00:33.033
> 
> 标签：windows, windows-server-2008, windows-server-2008-r2, etw, windows-kernel

我正在使用 Windows 事件跟踪 (ETW) 对 Windows Server 2008 R2 中的系统调用进行内核跟踪。

我在跑步：

```
logman start "NT Kernel Logger" -p "Windows Kernel Trace" (process,thread,cswitch,syscall) -o events.etl -ets 
```

在生成的内核跟踪中，我正在查看 SysCallAddress 属性，我看到了很多我所期望的：例如 0xFFFFF80001999EE0，它是 nt!NtWriteFile。

问题是我在 0xFFFFF960 范围内看到很多地址，例如 0xFFFFF9600004421C，我不知道这些地址是什么。内核调试器中的 ln 命令不返回任何这些地址的信息。有人知道内核跟踪器将这些地址视为系统调用的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T08:07:26.027

这些是对 win32k.sys 的系统调用。想想 GetMessage、EndDraw 等。

# c# - ASP.NET 中的会话变量返回 ModalBox 中的先前值？

> ID：10523265
> 
> 赞同：3
> 
> 时间：2012-05-09T20:00:47.080
> 
> 标签：c#, asp.net, gridview, session-variables, modalpopupextender

我有一个关于将会话变量传递到更新面板（显示在模态弹出窗口中）中的文本框的问题。这是我到目前为止的代码：

**ASPX 代码：**

```
 <asp:TemplateField HeaderText="Link">
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1" Text="Link" runat="server" OnClick="LinkButton1_Click"  />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:gridview>

<asp:UpdatePanel ID="UpdatePanel1" runat="server" OnLoad="panel_Load">
    <ContentTemplate>
        <asp:Button ID="OKButton" runat="server" Text="Close" />
        <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
    </ContentTemplate>
</asp:UpdatePanel>

<asp:ModalPopupExtender ID="mpe" runat="server" TargetControlID="ClientButton" PopupControlID="UpdatePanel1" OkControlID="OKButton">
</asp:ModalPopupExtender>

<asp:Button ID="ClientButton" runat="server" Text="Launch Modal Popup (Client)" style="display:none;" /> 
```

**代码隐藏（C#）：**

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    GridViewRow clickedRow = ((LinkButton)sender).NamingContainer as GridViewRow;
    Label lbl_nme = (Label)clickedRow.FindControl("lbl_name");
    String string_nme = lbl_nme.Text.ToString();
    Session["Name"] = string_nme;
    mpe.Show();
}

protected void panel_Load(object sender, EventArgs e)
{
    Label1.Text = (string)(Session["Name"]);
} 
```

所以基本上我有一个带有名称、地址等的 GridView……当用户单击一行中的链接时，该行的名称字段的值将保存为会话变量。然后显示一个模态弹出窗口。模态弹出窗口应该显示保存为会话变量的名称。

代码类型的作品。我遇到的是，当我单击一行时，模态弹出窗口中的 Label1.Text 为空。因此，如果我关闭 PopUp 然后单击另一行中的另一个链接，则 PopUp 然后显示先前单击的行的名称。

换句话说.. 如果第 1 行的名称为“Kevin”，第 2 行的名称为“Nathaniel”，我单击链接打开第 1 行的模态弹出窗口，我希望弹出窗口显示“Kevin”。但事实并非如此。重建应用程序后第一次单击链接时，没有显示任何内容。但是假设我在单击第 1 行后单击第 2 行，然后模态弹出窗口会显示我之前单击的行的值，即“Kevin”，而我希望它是“Nathaniel”。

我希望我没有混淆任何人。我是一个新手，我刚刚进入这个东西，所以如果有人可以帮助我，我会很感激，最好是代码示例等。

谢谢你。非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:07:10.270

“加载”事件 ( `panel_Load`) 发生*在*“单击”事件 ( `LinkButton1_Click`) 之前，因此它只看到*前一个*值。

快速解决方法是在“点击”事件中设置标签。除非为标签启用 ViewState（ick！），否则标签*可能*还必须在“加载”中 [重新] 设置，具体取决于更新发生的时间/方式。

请参阅[ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)和 [ASP.NET 应用程序和页面生命周期：页面事件](http://www.codeproject.com/Articles/73728/ASP-NET-Application-and-Page-Life-Cycle#Zooming%20ASP.NET%20page%20events)。

快乐编码。

# interop - 为什么非托管结构不能成为托管类的成员？

> ID：10523268
> 
> 赞同：14
> 
> 时间：2012-05-09T20:00:59.633
> 
> 标签：interop, c++-cli, unmanaged

我知道在 C++/CLI 中定义托管类时不能使用非托管类型：

```
public struct Unmanaged
{
    int x;
    int y;
};

public ref class Managed
{
    int one;
    Unmanaged two;  //error C4368
}; 
```

我不明白为什么。`Unmanaged`只是本机类型的集合 - 它的大小是已知的，当然它（我的意思是定义它的内存块）将与`Managed`“托管堆”内的“内存块”一起移动，并且存储在元数据中的任何偏移量都将保持有效，不是吗？就像声明了整数或浮点数一样？

***为什么*****我们不能混合类型？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T20:24:47.737

混合类型实际上是指混合内存模型。非托管类型放在堆上，托管类型放在垃圾收集堆中，所以当你在托管中嵌入非托管类型时，它需要两个堆上的内存，这就是你用指针做这种事情的原因。指针是托管的，它指向的值不是。

我自己很好奇，所以我收集了我的谷歌并找到了这个。

[http://blogs.msdn.com/b/branbray/archive/2005/07/20/441099.aspx](http://blogs.msdn.com/b/branbray/archive/2005/07/20/441099.aspx)

盖伊似乎知道他在说什么。

好问题虽然...

# javascript - 如何为 requireJs 使用 Assetic

> ID：10523273
> 
> 赞同：4
> 
> 时间：2012-05-09T20:01:43.780
> 
> 标签：javascript, symfony, requirejs

我正在尝试在 synfony2 项目中使用 require.js。

这里是主树枝文件中的代码：

```
<script 
        data-main="{{ asset('bundles/web/js/main.js') }}" 
        src="{{ asset('vendor/js/require.js') }}">
</script> 
```

该文件`vendor/js/require.js`已正确加载，但对于该文件，`bundles/web/js/main.js`我收到以下消息：

> 未捕获的错误：模块的加载超时：mainApp.js?201205021855 [http://requirejs.org/docs/errors.html#timeout](http://requirejs.org/docs/errors.html#timeout)

我正在使用 RequireJS 1.0.8。知道如何解决问题吗？谢谢。

* * *

如果我查看源页面，它看起来像：

```
<script 
      data-main="/~myName/myProject/web/bundles/web/js/main.js?101205021855"       
      src="/~myName/myProject/web/vendor/js/require.js?101205021855">
</script> 
```

所以路径是正确的，但在 javascript 控制台上我收到以下消息：

> GET `http://localhost/~myName/myProject/web/app_dev.php/main.js?201205021855` 404（未找到）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:17:26.357

添加到@dgabriel 响应。您可以使用切片过滤器来做到这一点，

```
<script 
        data-main="{{ asset('bundles/web/js/main.js') | slice(0, -3) }}" 
        src="{{ asset('vendor/js/require.js') }}">
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:30:49.460

1.  确保从您的资产中去掉“.js”文件扩展名。它应该是 data-main="{{asset('bundles/web/js/main') }}"

2.  确保您的文件路径正确。

3.  确保 main.js 中没有 javascript 错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T03:24:11.893

404 看起来像是由于应用程序中的其他地方需要“main”而出现的 - 它与您的 data-main 中的路径不匹配。在这种情况下，很可能是您的 baseUrl 或路径配置存在问题（这两种方式都是告诉 RequireJS 您的模块所在位置的不同方式）。在您的示例中，您的 baseUrl 需要是“/~myName/myProject/web/bundles/web/js”。

您可能想尝试使用[https://github.com/hearsayit/HearsayRequireJSBundle](https://github.com/hearsayit/HearsayRequireJSBundle)。它会自动为您处理这些配置细节，并与 Assetic 很好地集成。

# c# - C# ThreadPool 应用程序性能随着时间的推移而下降

> ID：10523278
> 
> 赞同：9
> 
> 时间：2012-05-09T20:02:18.303
> 
> 标签：c#, multithreading, performance, threadpool

我有一个类，比如“MyComputation”，它在一个长构造函数中进行大量计算。单独执行时（没有磁盘 i/o 或网络操作）通常需要大约 20 毫秒才能运行。这个类的大约 100 个实例是由父类创建的，比如“ComputeParent”，它将它们作为工作项在 ThreadPool 中排队：

```
ThreadPool.QueueUserWorkItem(myComputationCall, my_computation_data); 
```

“myComputationCall”看起来像这样：

```
 public static void myComputationCall(Object my_computation_data)
    {
        try
        {
            MyDataObject data = (MyDataObject)my_computation_data;

            var computation_run = new MyComputation(data.parameter1, data.parameter2);

            data.result = computation_run.result;
        }
        finally
        {
            if (Interlocked.Decrement(ref num_work_items_remaining) == 0)
                done_event.Set();
        }
    } 
```

done_event 是一个静态 ManualResetEvent：

```
 private static ManualResetEvent done_event;

    ...

    done_event = new ManualResetEvent(false); 
```

对于各种输入参数，我运行 ComputeParent 大约 500 次。所以我有很多嵌套类。问题是执行 ComputeParent 所需的时间逐渐增加。运行每个特定 ComputeParent 所需的时间会有一定的差异，但时间量会相当稳定地增加（从几何上讲，每次连续迭代需要更长的时间）。

该程序的内存消耗不会随着时间的推移而显着增加，尽管它非常高（~300MB）。它运行在具有 8 个逻辑核心的计算机上，处理器的使用似乎非常突发。我不确定还有什么可能与该问题相关。

我宁愿不必通过批处理文件运行 ComputeParent，尽管完成后似乎不会出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T07:34:26.990

如果 ThreadPool 中的可用线程数变为 0，并且您继续添加新的工作项，那么新添加的工作项将“等待”。这意味着您的 ComputeParent 将等待其“myComputationCall”实例。启动越来越多的 ComputeParent 将导致它们的平均执行时间增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:13:43.563

这个问题已经回答了。感谢所有的海报。

对于其他有类似问题的人，我建议按照 Henk 的建议使用 Task Parallel Library。

# c# - 在 C# 项目和 WiX 之间共享信息

> ID：10523284
> 
> 赞同：1
> 
> 时间：2012-05-09T20:02:35.747
> 
> 标签：c#, build, wix, dry

我有一个启动和停止特定服务的应用程序。但是，根据我构建项目的配置，该服务的名称不同。在我的 WiX 设置中，我有

```
<ServiceInstall
    <!-- etc... -->
    Name='$(var.ServiceName)'
    DisplayName='$(var.ServiceDisplayName)' /> 
```

where`var.ServiceName`来自构建过程中指定的包含文件。我必须在我的 C# 代码中使用相同的服务名称，但我对这种方法的问题是服务名称写在两个不同的地方。如何将服务名称集中到一个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:21:48.457

考虑将服务名称放入注册表项中，您的 C# 代码可以轻松访问它。由于您安装了服务，因此您的产品无论如何都不可复制部署，因此可以选择使用注册表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:05:41.773

C# 代码如何获取服务名称？如果它是从配置中提取的，那么您可以在安装期间编辑配置并让安装程序将服务名称写入配置文件，这样您就可以使代码与您在 WiX 包含中指定的值保持一致。

编辑。回答这个问题；通过编辑我的意思是配置安装程序以在安装时为您编辑配置。我同意“手动”（或要求用户这样做）是一个坏主意。您可以在 WiX 中进行设置。您需要使用[XML File 自定义操作](http://wix.sourceforge.net/manual-wix3/util_xsd_xmlfile.htm)，WiX 看起来像这个片段：

```
<Component ...>
  <UTIL:XmlConfig>
    Id=...
    On="install"
    Action="create"
    File=[.. config file ID goes here ...]
    ElementPath="//myElement/livesHere
    Node="value"
    Name="someNodeName"
    Value="some value to set"
    ... 
```

抱歉，我无法粘贴真正的片段，我们的 WiX 配置是专有的：（希望该文档链接能正确显示您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:45:32.593

如果你是根据配置来命名的，为什么不在`$(var.ProjectName.Configuration)`服务名称中使用（其中ProjectName是你的C#项目的名称）呢？

# git - Git - 保存未完成的合并更改并签出另一个分支

> ID：10523285
> 
> 赞同：5
> 
> 时间：2012-05-09T20:02:45.180
> 
> 标签：git

我正在开发一个 git 分支，该分支与我已合并到其中的另一个分支存在很多合并冲突。我开始修复冲突，但想在完成合并过程之前保存我的工作并切换到另一个分支。

是否可以在未完成的合并过程中隐藏更改以切换到另一个分支，然后切换回并完成合并？

我花了很多时间来解决冲突，我不想再做这项工作了。最好的方法是什么？

我正在使用 git 版本 1.7.10

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T01:05:16.663

由于合并是一个过程，因此您不能在过程中间隐藏“更改”。

最好的办法是将 repo 克隆到另一个目录中。

PS。本永远是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-02T10:08:27.340

这里也有同样的问题：**stash 不起作用**。我**将整个 git-repo 本地复制**到另一个文件夹作为备份。继续我的工作，然后切换回来只是打开它并继续解决冲突。

# joomla - 如何覆盖 Joomla 系统消息 - message.php 模板

> ID：10523287
> 
> 赞同：6
> 
> 时间：2012-05-09T20:02:47.577
> 
> 标签：joomla, joomla2.5, joomla3.1

Joomla 默认将其系统消息（错误、通知等）呈现在

`libraries/joomla/document/html/renderer/message.php`.

对于我自己的模板，我想自定义这些消息的显示方式。但是，使用模板覆盖似乎无法以传统方式进行。

这里有人知道完成这样的事情的方法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-24T11:26:32.560

**对于 Joomla！1.7 - 2.5**

你需要复制`libraries/joomla/document/html/renderer/message.php`到`templates/YOUR_TEMPLATE/html/message.php`

然后在 YOUR_TEMPLATE 的 index.php 中，您需要包含该文件（因为它不像其他覆盖那样自动包含）：

```
// Message overwrite
require_once JPATH_ROOT .'/templates/'. $this->template .'/html/message.php'; 
```

现在您可以安全地覆盖`JDocumentRendererMessage::render()`那里的功能；）

**对于 Joomla！3.x**

您只需要在 YOUR_TEMPLATE 中创建 html/message.php 文件。该文件应包含函数 renderMessage()。例如，检查*isis*默认模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:10:28.867

模板覆盖仅适用[于 MVC - 即视图和模块 chrome](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)。

在不破解核心的情况下，您所能做的就是控制模板中的标签周围包含哪些 HTML 标签，以及为*消息*块`<jdoc:include type="message" />`的元素定义的 CSS 。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T12:15:11.600

将覆盖包含在模板目录中的一种更优雅的方法是将文件包含在系统插件中：

```
public function onAfterInitialise() {
    $app = JFactory::getApplication();
    if ($app->isSite()) {
        $template = $app->getTemplate();
        if (!class_exists('JDocumentRendererMessage') && file_exists(JPATH_THEMES . '/' . $template . '/html/message.php')) {
            require_once JPATH_THEMES . '/' . $template . '/html/message.php';
        }
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-02T04:51:52.350

[http://extensions.joomla.org/extensions/style-a-design/popups-a-iframes/26551](http://extensions.joomla.org/extensions/style-a-design/popups-a-iframes/26551)

或者

[http://extensions.panchsoft.com/product/1-popup-system-messages.html](http://extensions.panchsoft.com/product/1-popup-system-messages.html)

将此扩展用于 Joomla 的默认消息。*

# c# - EF Code First级联删除和更新？

> ID：10523291
> 
> 赞同：9
> 
> 时间：2012-05-09T20:03:07.600
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-4.3

我的实体是这些：

```
public class Customer
{
    public Customer()
    {
        Invoices = new List<Invoice>();
        Payments = new List<Payment>();
    }

    public int ID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public IList<Payment> Payments { get; set; }
}

public class Payment
{
    public int ID { get; set; }
    public int CustomerID { get; set; }
    public decimal CreditPrice { get; set; }
    public decimal DebitPrice { get; set; }
    public DateTime PaymentDate { get; set; }

    [ForeignKey("CustomerID")]
    public Customer Customer { get; set; }
} 
```

这是我的背景：

```
public class AccountingContext : DbContext, IDisposable
{
    public DbSet<Customer> Customers { get; set; }
    public DbSet<Payment> Payments { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        modelBuilder.Entity<Payment>()
                .HasRequired(s => s.Customer)
                .WillCascadeOnDelete();

        base.OnModelCreating(modelBuilder);
    }
} 
```

*我在WillCascadeOnDelete()*中收到此错误：

> 错误 1“System.Data.Entity.ModelConfiguration.Configuration.RequiredNavigationPropertyConfiguration”不包含“WillCascadeOnDelete”的定义，并且没有扩展方法“WillCascadeOnDelete”接受“System.Data.Entity.ModelConfiguration.Configuration.RequiredNavigationPropertyConfiguration”类型的第一个参数可以找到（您是否缺少 using 指令或程序集引用？） D​​:\Work\C# Projects\Visual Studio 2010\Windows\WPF\New folder\Accounting without EF Code First\Accounting - Copy\DAL.EF.CodeFirst \Entities\Context\AccountingContext.cs 22 22 DAL.EF.CodeFirst

我想删除客户级联的付款（**就像**客户被删除一样）。我怎样才能首先在 EF 代码中实现这一点？

我也想使用级联更新。请在这些问题上帮助我。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T20:11:19.167

### 描述

您需要在您的上下文中配置模型构建器。

### 样本

```
public class AccountingContext : DbContext, IDisposable
{
    public DbSet<Customer> Customers { get; set; }
    public DbSet<Payment> Payments { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

        modelBuilder.Entity<Payment>()
                .HasRequired(s => s.Customer)
                .WithMany()
                .WillCascadeOnDelete(true);

        base.OnModelCreating(modelBuilder);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-02T12:28:32.123

**在模型创建方法上，您需要进行如下更改**

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{
            //Disabling Delete Cascade
            foreach (var foreignKey in modelBuilder.Model.GetEntityTypes().SelectMany(model=>model.GetForeignKeys()))
            {
                //Disabling Delete Cascade on Each Entities
                foreignKey.DeleteBehavior = DeleteBehavior.Restrict;
            }
} 
```

# c# - BeginRead 缓冲区大小（CPU 负载较重）

> ID：10523292
> 
> 赞同：0
> 
> 时间：2012-05-09T20:03:11.457
> 
> 标签：c#, networking

我的异步 tcp 客户端-服务器应用程序现在正在运行。

但是我有一些 CPU 重负载问题。如果我将网络缓冲区设置为 8192，它适用于小消息，但如果我传输超过 1MB，我的 CPU 负载真的很高。我可以通过将缓冲区设置为 81920 来修复它。

有什么解决方案可以解决这个问题吗？我想将数据从几 KB 传输到数百 MB。

拥有多个不同缓冲区大小的 TCP 连接是个好主意吗？还有其他解决方案吗？

我的代码也可能存在一些性能问题。

我的阅读代码：

```
private class ReadClientState
    {
        public TcpClient Client { get; set; }
        public byte[] Buffer { get; set; } // buffer size...???

        public byte[] inc_message { get; set; }
        public int inc_message_size  { get; set; }
    } 
```

开始读取回调：

```
private void ReadCallback(IAsyncResult ar)
    {
        ReadClientState state = (ReadClientState)ar.AsyncState;
        int cbRead = 0;
        try
        {
            cbRead = state.Client.GetStream().EndRead(ar);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
            if (ex.InnerException is SocketException)
            {
                if (((SocketException)ex.InnerException).ErrorCode == 10054)
                {
                    ...
                }
            }
            return;
        }

// read 4 byte lenght header (new message incoming)
        if (state.inc_message_size == 0)
        {
            byte[] header = new byte[4];
            Buffer.BlockCopy(state.Buffer, 0, header, 0, 4);
            state.inc_message_size = BitConverter.ToInt32(header, 0);
        }

// copy buffer to message data array
        byte[] tmp = new byte[cbRead];
        Buffer.BlockCopy(state.Buffer, 0, tmp, 0, cbRead);
        state.inc_message = state.inc_message.Concat(tmp).ToArray();
        state.Buffer = new byte[bufferSize];

        Array.Clear(state.Buffer, 0, state.Buffer.Length);

// message is complete
        if (state.inc_message.Length >= state.inc_message_size)
        {
            if (state.inc_message.Length > state.inc_message_size)
            {
                Console.WriteLine("ERROR.. read more than expected");
            }
            else
            {
                Console.WriteLine("massage size: " + state.inc_message_size.ToString() + " total bytes read: " + state.inc_message.Length.ToString());

                Array.Clear(state.inc_message, 0, state.inc_message.Length);
                state.inc_message_size = 0;
            }
        }

        try
        {
            state.Client.GetStream().BeginRead(state.Buffer, 0, state.Buffer.Length, ReadCallback, state);
        }
        catch (Exception ex)
        {
            return;
        }
    } 
```

# java - Scala 演员作为参数传递给其他演员

> ID：10523293
> 
> 赞同：1
> 
> 时间：2012-05-09T20:03:11.370
> 
> 标签：java, scala, actor

我在 Scala 中试验演员。但我对两件事非常好奇。(1) 有没有办法在不使用另一个actor的情况下将一个actor声明为自身的参数（如下代码所示）？（我见过 Producer/Consumer 示例和许多其他示例，它们声明了一种参与者并将其用作另一种参与者的参数。）此外，（2）main 方法中声明新参与者的语句，但使用“_：演员”……这是什么意思？它编译（我没想到）但没有按我的预期工作（我预期）。

```
import scala.actors.Actor;
import Actor._;

// Code for declaring methods that actors can send and receive

class Actor1(subact: Actor) extends Actor {
  def act: Unit = {
    println("doing stuff...")
    while (true) {
      // Code here for methods ...
    }
  }
  this.start()
}

object foo {
  def main(args: Array[String]) : Unit = {
    val i = new Actor1(_ : Actor)
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:53:32.657

(1)

是的，这是可能的：

```
class Foo(actor: => Actor) extends Actor {
  def act {
    loop {
      react {
        case x: String => actor ! x
      }
    }
  }
}

lazy val foo = new Foo(foo)

foo.start

foo ! "bar" 
```

但这没有多大意义，因为您总是在其内部引用演员;-)。在这种情况下，它就像一个无限循环。

(2) 很简单，你创建一个部分应用的函数：

```
scala> class Foo(actor: Actor) {
     | println(actor.toString)
     | }
defined class Foo

scala> new Foo(_: Actor)
res0: (scala.actors.Actor) => Foo = <function1> 
```

如果您将它存储到一个变量中，然后用一个实际的 Actor 实例调用它，您将获得一个 Actor1 类的实例。

# macos - 如何判断我的包是否在平面包安装后脚本中升级？

> ID：10523294
> 
> 赞同：0
> 
> 时间：2012-05-09T20:03:13.393
> 
> 标签：macos, packagemaker

我有一个运行安装后脚本的 Mac OS X 平面包。我想在脚本中知道它是新安装还是升级。捆绑式包具有升级前和升级后脚本，但我不能使用捆绑包。

我已经在脚本中转储了环境变量，并将参数转储到脚本本身，但这些似乎都没有表明它是升级还是安装。我可以说安装程序知道，因为安装程序日志指示安装或升级。我只是不知道如何从安装后脚本中分辨出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:06:17.013

如果是您的包裹，为什么不检查您已经在机器上的迹象？要么留下一些标记来告诉你你已经安装了，要么在部署之前检查你的旧文件是否存在于磁盘上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:42:34.293

如果您的软件包是第一次安装，安装程序将调用 postinstall 脚本，但如果它已升级，则应调用 postupgrade 脚本。

更多信息请参见[What](http://s.sudre.free.fr/Stuff/PackageMaker_Howto.html) **About 脚本**部分。

# jquery - 将共享点富文本字段设为只读

> ID：10523297
> 
> 赞同：1
> 
> 时间：2012-05-09T20:03:34.243
> 
> 标签：jquery, sharepoint

> **可能重复：**
> [在 sharepoint 2007 中禁用富文本框](https://stackoverflow.com/questions/5322002/rich-text-box-disabling-in-sharepoint-2007)

有人请让我知道如何使用 jquery 根据某些条件使共享点富文本字段只读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:04:35.833

珍妮特，重复的答案并没有给你一个 jQuery 回答你的问题。

我使用的一个 jQuery 解决方案是隐藏输入控件并将其值显示为文本。看起来有点像这样：

```
var txtValue = $("input[title='MyTitle']").val();
$("input[title='MyTitle']").hide().after(txtValue); 
```

# selenium - 有什么方法可以让 Selenium 将目标页面打印到打印机上？

> ID：10523299
> 
> 赞同：1
> 
> 时间：2012-05-09T20:03:41.740
> 
> 标签：selenium

我到处寻找并尝试了所有可能的方法。只是问其他人是否找到了打印的方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:12:44.767

我可以想到两种可能的方法：

1.  使用 JavaScript 的[`window.print()`](https://developer.mozilla.org/en/DOM/window.print)+ [`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)（按`Enter`）确认对话框。
2.  获取屏幕截图并[打印](http://java.sun.com/javase/technologies/desktop/printing/)。[打印机作业](http://docs.oracle.com/javase/7/docs/api/java/awt/print/PrinterJob.html)。

# ruby-on-rails - 尝试学习 rails 并继续点击 noMethodError

> ID：10523301
> 
> 赞同：0
> 
> 时间：2012-05-09T20:04:00.447
> 
> 标签：ruby-on-rails

我已经完成了 rails 入门教程，现在我正在尝试使用 devise gem 设置另一个项目进行身份验证。基本上，我想要的只是一个主页，一个用户可以填写表单以进行注册的页面，然后是一个进行身份验证的安全页面。

现在，当我导航到注册页面时，我遇到了问题。这是我收到的错误：

```
NoMethodError in Signup#index

Showing /Users/tomcaflisch/Sites/project2/app/views/signup/_form.html.erb where line #1 raised:

undefined method `users_path' for #<#<Class:0x007fa734b3e510>:0x007fa734b3a910>

Extracted source (around line #1):

1: <%= form_for(@user) do |f| %>
2:  <% if @user.errors.any? %>
3:  <div id="errorExplanation">
4:      <h2><%= pluralize(@user.errors.count, "error") %> prohibited this post from being saved: </h2> 
```

注册控制器.rb：

```
class SignupController < ApplicationController

  def index
    @user = User.new
  end

  def new 
    @user = User.new

    respond_to do |format|
        format.html
    end
  end

end 
```

user.rb 模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username
end 
```

../views/signup_form.html.erb：

```
<%= form_for(@user) do |f| %>
    <% if @user.errors.any? %>
    <div id="errorExplanation">
        <h2><%= pluralize(@user.errors.count, "error") %> prohibited this post from being saved: </h2>
        <ul>
            <% @user.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
            <% end %>
        </ul>
    </div>
    <% end %>

    <div class="field">
        <%= f.label :email %><br />
        <%= f.text_field :email %>
    </div>

    <div class="field">
        <%= f.label :username %><br />
        <%= f.text_field :username %>
    </div>

    <div class="field">
        <%= f.label :password %><br />
        <%= f.text_field :password %>
    </div>

    <div class="actions">
        <%= f.submit %>
    </div>
<% end %> 
```

路线.rb：

```
get "signup/index"
devise_for :users
get "index/index" 
root :to => 'index#index' 
```

$ bundle exec rake 路由 | grep 用户：

```
 new_user_session GET    /users/sign_in(.:format)       {:action=>"new", :controller=>"devise/sessions"}
            user_session POST   /users/sign_in(.:format)       {:action=>"create", :controller=>"devise/sessions"}
    destroy_user_session DELETE /users/sign_out(.:format)      {:action=>"destroy", :controller=>"devise/sessions"}
           user_password POST   /users/password(.:format)      {:action=>"create", :controller=>"devise/passwords"}
       new_user_password GET    /users/password/new(.:format)  {:action=>"new", :controller=>"devise/passwords"}
      edit_user_password GET    /users/password/edit(.:format) {:action=>"edit", :controller=>"devise/passwords"}
                         PUT    /users/password(.:format)      {:action=>"update", :controller=>"devise/passwords"}
cancel_user_registration GET    /users/cancel(.:format)        {:action=>"cancel", :controller=>"devise/registrations"}
       user_registration POST   /users(.:format)               {:action=>"create", :controller=>"devise/registrations"}
   new_user_registration GET    /users/sign_up(.:format)       {:action=>"new", :controller=>"devise/registrations"}
  edit_user_registration GET    /users/edit(.:format)          {:action=>"edit", :controller=>"devise/registrations"}
                         PUT    /users(.:format)               {:action=>"update", :controller=>"devise/registrations"}
                         DELETE /users(.:format)               {:action=>"destroy", :controller=>"devise/registrations"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:53:58.963

看起来您正在混合两件事：设计提供它自己的注册/注册页面，并且您还创建了自己的页面。

有时这是合适的，但很多时候默认设计页面已经足够好——或者至少足够好开始了。

我建议您首先尝试使用它自己的页面来实现设计——暂时不要理会您的登录和注册页面。您看不到设计页面，因为它们隐藏在宝石中。

如果您想自定义它们，您可以按照以下步骤在您的项目中安装设计页面（以haml格式）：

[https://github.com/plataformatec/devise/wiki/How-To:-Create-Haml-and-Slim-Views](https://github.com/plataformatec/devise/wiki/How-To:-Create-Haml-and-Slim-Views)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:11:38.617

因为您正在创建自己的注册控制器，所以我相信设计路线不是您喜欢发布路线文件的路线，让我们看看我们是否可以理顺您的路线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:15:13.493

它在寻找`Signup#index`.. 它应该在寻找`SignupController#index`

在您想要拥有的 routes.rb 中

```
root :to => 'signup#index' 
```

此外，`undefined method users_path`缺少获取用户的路线，或者很可能`resources :users`从您的 routes.rb 中丢失

对于新用户，您想要类似的`form_for(User.new)`东西`UsersController#new`

__

或者这样做

1)

为了`views/users/new.html.erb`你想要

```
<%= form_for(@user) do |f| %>
  <%= render 'fields', :f => f %>
  .... 
```

有一条通往它的路线，比如`get '/signup', :to => 'users#new'`和`link_to 'Signup', signup_path`

2)

对于用户控制器添加

```
 def new
    @user = User.new
    ..
  end 
```

# python - Python 看门狗脚本无法正常运行

> ID：10523303
> 
> 赞同：10
> 
> 时间：2012-05-09T20:04:06.563
> 
> 标签：python

我正在尝试使用 Python Watchdog 来监视目录的更改。但是，当我尝试运行快速入门示例时：

```
import time
from watchdog.observers import Observer
from watchdog.events import LoggingEventHandler

if __name__ == "__main__":
    event_handler = LoggingEventHandler()
    observer = Observer()
    observer.schedule(event_handler, path='.', recursive=True)
    observer.start()
    try:
        while True:
            time.sleep(1)
    except KeyboardInterrupt:
        observer.stop()
    observer.join() 
```

通过将文件**test.py**放入其中，我运行它的终端窗口中不会显示任何内容。是什么导致这种情况发生，我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T10:07:30.867

试试 github 上的例子：[https ://github.com/gorakhargosh/watchdog](https://github.com/gorakhargosh/watchdog)

此示例似乎有效，而 docs 网站上的示例无效。

# c# - XAML/C# - 事件分配

> ID：10523310
> 
> 赞同：1
> 
> 时间：2012-05-09T20:04:41.597
> 
> 标签：c#, silverlight, windows-phone-7, events

```
<Button Content="{Binding telefone}"  
Click="{Binding telefone, Converter={StaticResource ButtonClick}}" /> 
```

你好！

如何通过“转换器”将点击事件与按钮相关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:47:41.833

Silverlight 解析器无法将事件处理程序绑定到绑定。相反，请使用 Command 属性。

```
<Button Command="{Binding telefone}" /> 
```

C＃：

```
public class Telephone: ICommand
{

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        MessageBox.Show("Telephone clicked");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:07:18.537

让您的转换器将回调的名称作为字符串返回。

（我就是这样做的）

# file-upload - Primefaces Multiple FileUpload 不显示文件也不触发handleFileUpload

> ID：10523311
> 
> 赞同：1
> 
> 时间：2012-05-09T20:04:49.480
> 
> 标签：file-upload, primefaces, uirepeat

我从一周开始就在搜索，但找不到适合我的问题的解决方案。所以我在这里问专家。

我正在尝试使用 FileUpload 实现一个页面来上传并在同一页面上上传后显示图像。

我的问题是，如果我将 ManagedBean 设置为`@RequestScope`，`handleFileUpload`则不会触发该功能。如果我将其设置为`@ViewScope`，该功能将被触发，但错误“流式动态资源中的错误”。显示。

这是我的文件：

1.  web.xml

    ```
    <filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    <init-param>
        <param-name>thresholdSize</param-name>
        <param-value>2097152</param-value>
    </init-param>
    <init-param>
        <param-name>uploadDirectory</param-name>
        <param-value>E:/uploadedImages</param-value>
    </init-param> 
    ```

    PrimeFaces FileUpload Filter Faces Servlet

2.  豆

    ```
    @ManagedBean
    @RequestScoped
    public class ImageManager implements Serializable {

    private final static int MAX_UPLOADED_FILES = 5;
    private final static String UPLOADED_FILES_PATH = "E:/uploadedImages";

    private final Map<UUID, UploadedFile> uploadedFiles = new HashMap<>();

    public List<String> getListImages() {
        final List<String> result = new ArrayList<>();

        for (final UUID uuid : uploadedFiles.keySet())
            result.add(uuid.toString());

        return result;
    }

    public StreamedContent getImage() {
        final ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
        final String imageId = (String) externalContext.getRequestMap().get("imageId");

        if (imageId != null) {
            final UUID imageIndex = UUID.fromString(imageId);
            return new DefaultStreamedContent(new ByteArrayInputStream(uploadedFiles.get(imageIndex).getContents()), "image/jpg");
        }

        return null;
    }

    public void handleFileUpload(FileUploadEvent event) {
        if (uploadedFiles.size() < MAX_UPLOADED_FILES) {
            final UploadedFile uploadedFile = event.getFile();
            if (uploadedFile != null) {
                uploadedFiles.put(UUID.randomUUID(), uploadedFile);
            }
        }
    }

    } 
    ```

3.  xhtml

    ```
     <p:fileUpload fileUploadListener="#{imageManager.handleFileUpload}"  
                            mode="advanced"
                            multiple="true"  
                            sizeLimit="2097152"
                            allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                            uploadLabel="Hochladen"
                            auto="false"
                            cancelLabel="Abbrechen"
                            invalidFileMessage="Die ausgewählte Datei ist kein zugelassene Bilddatei"
                            invalidSizeMessage="Die maximale Bildgröße ist 2MB"
                            label="Datei Auswählen"
                            update="imageList"
                            />

        <ui:repeat value="#{imageManager.listImages}" var="imageId" id="imageList">
            <h:outputText value="#{imageId}" />
            <p:graphicImage value="#{imageManager.image}">
                <f:param id="imageId" name="imageId" value="#{imageId}" />
            </p:graphicImage>
        </ui:repeat> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:18:22.170

@Daniel，相信我。在我在这里发布我的问题之前，我已经搜索了很多天。但我已经自己解决了这个问题。

如果有人遇到同样的问题，这里是解决方案：

```
 @Controller
    @Scope(WebApplicationContext.SCOPE_REQUEST)
    public class ImageManager implements Serializable {

        private final static int MAX_UPLOADED_FILES = 5;
        private final static String UPLOADED_FILES_PATH = "E:/uploadedImages";

        private final static Map<UUID, UploadedFile> uploadedFiles = new HashMap<>();

        private final static List<String> listImages = new ArrayList<>();
        private StreamedContent image;

        private static StreamedContent defaultImage = null;
        static {
            try {
                defaultImage = new DefaultStreamedContent(new FileInputStream(new File("E:\\uploadedImages\\t.jpg")), "image/jpg");
            }
            catch (FileNotFoundException e) {
                e.printStackTrace();
            }        
        }

        public List<String> getListImages() {
            return listImages;
        }

        public StreamedContent getImage() {
            final ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
            final String imageId = (String) externalContext.getRequestParameterMap().get("imageId");

            if (imageId != null) {
                final UUID imageIndex = UUID.fromString(imageId);
                image = new DefaultStreamedContent(new ByteArrayInputStream(uploadedFiles.get(imageIndex).getContents()), "image/jpg");

                return image;
            }

            return defaultImage;
        }

        public void handleFileUpload(FileUploadEvent event) {
            if (uploadedFiles.size() < MAX_UPLOADED_FILES) {
                final UploadedFile uploadedFile = event.getFile();
                if (uploadedFile != null) {
                    final UUID uuid = UUID.randomUUID();
                    uploadedFiles.put(uuid, uploadedFile);
                    listImages.add(uuid.toString());
                }
            }
        }

        public void setImage(StreamedContent image) {
            this.image = image;
        }

    } 
```

# image-processing - 为什么我们需要在 jpeg_start_compress() 之后调用 jpeg_write_marker() 和 jpeg_write_header() ？[libjpeg]

> ID：10523314
> 
> 赞同：3
> 
> 时间：2012-05-09T20:05:06.543
> 
> 标签：image-processing, libjpeg, libjpeg-turbo

据我了解，**libjpeg**是一个用于压缩图像数据的库。我应该能够在不调用`jpeg_start_compress()`函数的情况下编写标记元数据。

我有两个问题：

*   为什么**libjpeg**不允许这样做？
*   如果我有源 jpeg 文件（已压缩），我该如何修改元数据详细信息？是否可以设置任何标志来通知库我们正在处理压缩图像并且我们只需要修改元数据详细信息？

请帮忙。

# eclipse - 如何在 Eclipse 中恢复已删除的透视图

> ID：10523316
> 
> 赞同：0
> 
> 时间：2012-05-09T20:05:11.153
> 
> 标签：eclipse, perspectives

我不小心通过 Preferences 窗口删除了 Eclipse 中的 C/C++ 透视图，但所有的 CDT 工具仍然存在。如何恢复视角？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:06:26.487

你是关闭了事故的视角，还是真的`delete`完全关闭了它？

您是否尝试在 中找到它`Window -> Open Perspective -> Other`？看看它是否在那里。

# xcode - XCode 3.2.6 无法识别 Cg 框架

> ID：10523320
> 
> 赞同：2
> 
> 时间：2012-05-09T20:05:32.580
> 
> 标签：xcode, xcode3.2, cg

我已将 Cg 安装到`/Library/Frameworks/Cg.framework`. 它在磁盘上看起来像这样：

![在此处输入图像描述](../Images/300969fbb5cc474d3b1c03c0ed4e0008.png)

我的 XCode 3.2.6 项目有`Library/Frameworks`一个框架搜索路径和`-Framework Cg`“其他链接器设置”，但是当我尝试`#include <Cg/cg.h>`它时找不到该文件。如果我直接添加`/Library/Frameworks/Cg.framework/Headers`到我的“标题搜索路径”中，我可以 `#include' 但它无法链接到错误“未找到框架 Cg”。

我真的不明白 Mac 框架*是*什么——它有什么特别的还是只是一个普通的目录？似乎 Xcode出于某种原因根本不理解`/Library/Frameworks/Cg.framework` *是一个框架。*

我不确定这是否相关：[https ://stackoverflow.com/questions/5293940/xcode-3-2-6-stops-looking-in-library-frameworks](https://stackoverflow.com/questions/5293940/xcode-3-2-6-stops-looking-in-library-frameworks)

任何帮助了解问题所在将不胜感激。

我从命令行测试了一个简单的测试：

## 测试.cpp

```
#include <Cg/cg.h>

void f()
{
  CGcontext context = cgCreateContext();
} 
```

只需运行“gcc -c test.cpp”即可成功（-c 表示不链接）。我还运行了“gcc -M test.cpp”（列出依赖项）：`/Library/Frameworks/Cg.framework/Headers/cg.h`所以框架看起来很好......如何在不传递任何搜索路径的情况下运行 gcc，但是 XCode 在调用 gcc 时看不到框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:39:24.547

我认为您没有正确地将 Cg 框架添加到项目中。单击您的目标->单击构建阶段（选项卡）->在“将二进制文件与库链接”中单击+符号-> fin Cg框架并添加它。现在以下应该编译得很好：

```
 #include <Cg/cg.h>
 void a() {

    CGcontext context = cgCreateContext();
 } 
```

我还假设您使用提供的图像 (Cg-something.dmg) 安装了框架

您不必手动更改任何搜索路径。如上所示添加框架后，编译器将在那里查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:59:30.137

我不确定这是否相关，但我在使用 CG 库时遇到了类似的问题。它将与 10.5 链接，但不与 10.6 链接。我最终意识到我的 10.6 sdk 目录搞砸了：而不是 /Developer/SDKs/MacOSX10.6.sdk/Library 在其中有一个指向 Frameworks 目录的符号链接，而是在 Frameworks 目录中有一个带有符号链接*的*Frameworks 目录.

无论如何它应该可以工作（我已经提供了 cg 框架的绝对路径并将 /library/frameworks 目录添加到搜索路径）但它没有。实际上，为什么与 10.6 sdk 目录正确链接的东西一开始就搞砸了，我不知道......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T21:14:40.557

好吧，我有一个关于为什么的答案，但不是如何。将 SDK 从 10.6 升级到 10.5 意味着事情神奇地起作用了。但是磁盘上的两个 SDK 目录都有相同的链接到正确的 Frameworks 目录，这是一个干净的 10.6 安装而不是升级的 10.5 机器，所以不知道为什么。任何可以写出答案来解释这一点并理想地提供解决方案的人都将受到赏金的欢迎！

# clojure - 如何将多个序列中的每个元素交错成向量

> ID：10523326
> 
> 赞同：3
> 
> 时间：2012-05-09T20:06:03.897
> 
> 标签：clojure

我想从下面返回的序列的每个元素创建一个向量，以`(vector`. 我知道`(vector`得到我想要的东西的方法是错误的。它只是一个占位符。

我正在努力解决如何从三个序列中取出第一个元素并得到 ["abc-de-fghi" smith barney] [def-hi-jklm" ox todd]，然后是第二个元素，第三个，依此类推.

感谢您的帮助。

```
(defn test-key-exclusion
    "This function takes csv-data1 (the includees) and tests to see
     if each includee is in csv-data2 (the includeds). This function
     also gathers enough other data, so that excludees (those not found),
     can be identified."

    [csv-data1 pkey-idx1 csv-data2 pkey-idx2 lnam-idx fnam-idx]

    (let [full-row-ret (map #(ret-non-match-rows csv-data2 pkey-idx2 pkey-idx1 %1) csv-data1)
          filtered-row-ret (filter (complement nil?) full-row-ret)]
        filtered-row-ret
        (vector     (map #(nth %1 pkey-idx1 nil)  filtered-row-ret)
                    (map #(nth %1 lnam-idx nil)   filtered-row-ret)
                    (map #(nth %1 fnam-idx nil)   filtered-row-ret)))) 
```

编辑：解决方案

我结束了以下从多个序列的每个元素创建一个向量。

```
(defn test-key-exclusion
    "This function takes csv-data1 (the includees) and tests to see
     if each includee is in csv-data2 (the includeds). This function
     also gathers enough other data, so that excludees (those not found),
     can be identified."

    [csv-data1 pkey-idx1 csv-data2 pkey-idx2 lnam-idx fnam-idx]

    (map (fn [row]
            (vector (nth row pkey-idx1 nil)
                    (nth row lnam-idx nil)
                    (nth row fnam-idx nil)))

         (filter (complement nil?)
            (map #(ret-non-match-rows csv-data2 pkey-idx2 pkey-idx1 %1) csv-data1)))) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T20:41:53.420

我认为你需要的只是`map`. 它可以采用多个集合：

```
user> (map vector [1 2 3] [:a :b :c] ["a" "b" "c"])
([1 :a "a"] [2 :b "b"] [3 :c "c"]) 
```

# jquery - jquery .each() 在 IE7/8 上的 input[type=checkbox] 之前不能使用 div 标识符

> ID：10523328
> 
> 赞同：0
> 
> 时间：2012-05-09T20:06:13.160
> 
> 标签：jquery, internet-explorer, each

我有这样一段代码。我在一个表单上有 4 组复选框，每组都必须分别通过这个功能。ID 变量是放置在每个集合周围的给定 div 的 id

```
 $('#'+id+' input[type=checkbox]:checked').each(function() {
     var value = $(this).val();
         (...)
 }); 
```

在 chrome、firefox 和 IE9 上运行良好。不适用于 IE7/8。

在 IE7/8 上有效的是这个

```
$('input[type=checkbox]:checked').each(function() {
     var value = $(this).val();
         (...)
 }); 
```

所以它可以在没有 div 标识符的情况下工作。我仍然需要能够告诉 IE7/8 我希望它通过哪组复选框。我应该如何容纳该 div 标识符，以便它适用于较旧的 IE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:08:21.517

尝试使用`.find`，`.filter`如下所示，

```
$('#'+id).find('input[type=checkbox]').filter(':checked').each(function () {
 //.. 
```

你可以使用`:checkbox`而不是 long`input[type=checkbox]`

```
$('#'+id).find(':checkbox').filter(':checked').each(function () { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T20:11:05.570

如果复选框是按组或集合组织的，我通常这样做的方式是在复选框组中添加一个数组名称并在 jQuery 中使用它。

```
<input type="checkbox" name="groupone[]"/>
<input type="checkbox" name="groupone[]"/>

<input type="checkbox" name="grouptwo[]"/>
<input type="checkbox" name="grouptwo[]"/> 
```

在 jQuery 中：

```
$('input[name="groupone[]"]').filter(':checked') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T20:22:20.233

如果您的页面中有多个具有该 ID 的元素，则 IE 可能会阻塞它。但是我通常用于您正在做的事情的模式更像是这样的：

```
$('#' + id)
  .find('input[type=checkbox]:checked')
  .each(function() { /... 
```

您可以使用`.find(':checkbox:checked')`代替第二行，但您应该使用上面的代码获得更好的性能。`[type=checkbox]`可以[在现代浏览器中使用本地方法来提高效率。](http://api.jquery.com/checkbox-selector/)此外，`.find(':checkbox')`显然让 jQuery 检查 div 中的每个元素以查看它是否匹配`:checkbox`，甚至是不是输入的元素（因此它们不可能是复选框）。这可能已在最新版本的 jQuery 中解决，但我不知道。

# jenkins - Jenkins - 根据输入参数触发电子邮件

> ID：10523329
> 
> 赞同：1
> 
> 时间：2012-05-09T20:06:13.733
> 
> 标签：jenkins, jenkins-plugins

我有几个 Jenkins 工作，我希望根据输入参数触发（或不触发）电子邮件。

用例是每个项目都有一个部署作业，但该作业针对每个环境进行了参数化。我们运行您可以选择部署到哪个环境的作业（Dev1、Dev2、QA 等）。理想情况下，我想在将新版本发送给 QA 时发送通知电子邮件，但我不想在将新版本发送给 Dev 时发送通知电子邮件，因为这种情况一直在发生（每个开发人员提交）和会淹没邮箱。

我试过谷歌搜索，但还没有找到解决方案。我目前正在使用 email-ext 插件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:32:37.320

这是解决问题的一种非常讨厌的方法，但是如果您不能通过任何其他方式来解决...

创建一个依赖作业，该作业主要基于参数的*值*传递/失败，该参数将作为参数传递给作业。然后，您可以将作业做出的*决定*链接到电子邮件通知。

当然，如果您打算这样做，最好只使用 javax.mail 编写一个小的参数化电子邮件发件人，然后让 Jenkins 通过“构建”一个实际调用“java”任务的 ANT 项目来运行它。然后，您拥有自己的电子邮件发件人（完全控制），并可以使其成为其他任务的依赖工作。

我希望有人能以更简单的方式加入...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T10:37:04.273

在 email-ext 中，您可以添加“脚本 - 构建前”或“脚本 - 构建后”触发器，这将触发指定的 groovy 脚本返回 true 还是 false。该脚本的帮助内容如下：

> 使用该区域在 groovy 中实现自己的触发逻辑。最后一行将被评估为布尔值，以确定触发器是应该导致发送电子邮件还是现在。

他们没有提供脚本中可用内容的很多细节，但从 Github 上的源代码来看，您至少有“构建”和“项目”，并且为您完成了一些常见的导入：

```
 cc.addCompilationCustomizers(new ImportCustomizer().addStarImports(
            "jenkins",
            "jenkins.model",
            "hudson",
            "hudson.model"));

    Binding binding = new Binding();
    binding.setVariable("build", build);
    binding.setVariable("project", build.getParent());
    binding.setVariable("rooturl", JenkinsLocationConfiguration.get().getUrl());
    binding.setVariable("out", listener.getLogger()); 
```

警告，我没有尝试过，但这应该作为示例脚本工作：

```
build.buildVariables.get("MY_DEPLOYMENT_ENV") == "QA" 
```

这应该获取您创建的名为“MY_DEPLOYMENT_ENV”的字符串或选择参数的值，如果当前值为“QA”，则触发电子邮件

# c# - C#类设计，灵活的支付规则

> ID：10523338
> 
> 赞同：3
> 
> 时间：2012-05-09T20:07:10.557
> 
> 标签：c#, single-responsibility-principle

我目前正在建模一个负责管理版税支付的系统。版税可能很简单：

*   支付作者 A 收入的 15%

或与以下任何一个一样复杂：

*   向作者 B 支付 15% 的收入，最多售出 1000 件，然后支付收入的 12%
*   每售出 1000 件，还需向作者 B 支付 1.50 美元

或者：

*   向作者 C 支付前 1,000 美元收入的 15%，然后支付收入的 12%

简而言之，付款可以是每次销售的固定金额或收入的百分比。付款条件可以基于销售数量或收入。我试图通过指定支付范围和支付值的类型来设计一个包含所有这些灵活性的类（它与幕后的数据库表密切相关）。但是，我担心我可能试图让这门课做太多事情，如果我们将来需要适应其他场景，可能会让自己陷入困境。我正在寻求替代设计方法的建议。

```
public class PaymentRule
{
    // I'm not 100% comfortable with this, as this will
    // really be an Int32 value for quantity sold ranges
    public decimal RangeMinimum { get; set; }
    public decimal? RangeMaximum { get; set; }

    // This will always be a decimal value, but may represent
    // a dollar amount or percentage depending on the context
    public decimal PaymentValue { get; set; }

    // Specify a type for the range: QuantitySold or Revenue
    public string RangeType { get; set; }

    // Specify a type for the value: AmountPerEachSold or RevenuePercentage
    public decimal ValueType { get; set; }

    public decimal CalculateRoyaltyDue(int quantitySold, decimal revenue)
    {
        // ...
    }
} 
```

任何建议，将不胜感激。

**2012 年 5 月 9 日更新：**

我应该提到，这些规则必须保存到 SQL Server 数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:10:13.990

查看[规范模式](http://en.wikipedia.org/wiki/Specification_pattern)- 这个复杂的规则规范正是它旨在帮助的。

> 在计算机编程中，规范模式是一种特定的软件设计模式，通过使用布尔逻辑将业务规则链接在一起，可以重新组合业务规则。
> 
> 规范模式概述了可与其他业务规则组合的业务规则。在此模式中，业务逻辑单元从抽象聚合复合规范类继承其功能。Composite Specification 类有一个名为 IsSatisfiedBy 的函数，它返回一个布尔值。实例化后，规范与其他规范“链接”在一起，使新规范易于维护，但高度可定制的业务逻辑。此外，在实例化时，业务逻辑可以通过方法调用或控制反转来改变其状态，以便成为其他类（例如持久性存储库）的委托。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T21:14:36.667

我会尝试构建某种结合扩展方法、linq 表达式、方法 chining 和命名参数的流畅接口，可能是这样的：

```
var revenue = 12000;
var ruleA = Rules.PayAuthor(15).PercentOf(revenue)
var ruleB = Rules.PayAuthor(15).PercentOf(revenue).UpTo(soldUnits:1000).Then(12).PercentOf(revenue)

var royalltyA = Royallty.For(ruleA, whenSoldUnitsIs: 1500);
var royalltyB = Royallty.For(ruleB, whenSoldUnitsIs: 1500); 
```

# git - Git clone from unfuddle，如何不包含初始目录，在这种情况下是存储库的名称

> ID：10523339
> 
> 赞同：0
> 
> 时间：2012-05-09T20:07:15.930
> 
> 标签：git, git-clone, unfuddle

我在 unfuddle.com 上有一个 git 存储库。我一直在使用 TortoiseGit 在我的 Windows 机器上本地工作。我已准备好将存储库克隆到开发服务器上，并且可以使用

```
git clone git@subdomain.unfuddle.com:subdomain/nameofrepository.git 
```

但这包括`nameofrepository`作为初始目录的目录，其他所有内容都在其中。我是 git 新手，如何在不获取`nameofrepository`目录的情况下克隆 repo？我想将其克隆到`public_html`我的开发服务器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:16:12.050

您可以为`clone`命令提供所需的目录名称或路径：

```
git clone repo_url /path/to/public_html/ 
```

# c++ - 这是 Visual 2010 的编译错误吗？

> ID：10523342
> 
> 赞同：1
> 
> 时间：2012-05-09T20:07:43.007
> 
> 标签：c++, visual-studio-2010, visual-studio-2008, visual-c++

```
class Base {
public:
    virtual void myFunc(double a, double b) { };
    virtual void myFunc(double a) { };

};

class Derived : public Base {
public:
    virtual void myFunc(double a) { return this->myFunc(a, 0.0); };
};                                      // ^^^^^^^^^^^^^^^^^^^^ 
```

前面的代码无法编译：`error C2660: 'Derived::myFunc' : function does not take 2 arguments` 显然编译器看不到我正在尝试调用基类中定义的函数或任何覆盖它的函数。另一方面，以下代码编译正常：

```
class Base {
public:
    virtual void myFunc2(double a, double b) { };
    virtual void myFunc(double a) { };

};

class Derived : public Base {
public:
    virtual void myFunc(double a) { return this->myFunc2(a, 0.0); };
}; 
```

我认为我在第一个示例中尝试做的是合法的 C++，那么这是 VS2010 编译器中的错误吗？我与 VS2008 有相同的结果

谢谢

编辑：我发现的一种解决方法是使用

```
virtual void myFunc(double a) { return ((Base*)this)->myFunc(a, 0.0); }; 
```

但我不是 100% 确定它具有完全相同的效果，有人可以确认吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T20:09:12.867

此行为是设计使然。

派生类中的函数[隐藏基类中的其他重载](https://stackoverflow.com/q/1628768/34397)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:20:40.000

这不是错误。

您可以在 C++ 中选择是隐藏继承的重载（这是更安全的默认行为）还是可用：

```
class Derived : public Base {
public:
    virtual void myFunc(double a) { return this->myFunc(a, 0.0); };
    using Base::myFunc;
}; 
```

或者，您可以`Base::myFunc`在函数调用时使用语法。

[在D&E](http://www2.research.att.com/~bs/dne.html)的 17.4.5.3 和 17.5 节中有对命名空间之间交互和重载的默认行为的解释。假设这`Base`是一个库类，`Derived`而是您的应用程序代码。该库的下一个版本肯定会为许多函数提供新的重载，甚至可能是`myFunc`，而且您当然不希望经过良好测试的程序静默地将其`myFunc`调用重新绑定到其他重载并调用其他内容。

# java - 如何将一个窗格连接到另一个窗格

> ID：10523343
> 
> 赞同：10
> 
> 时间：2012-05-09T20:07:43.107
> 
> 标签：java, swing, oop, user-interface, netbeans

如何将输出连接到`paneWithList`？

`PaneWithList`其上有一个侦听器，`JList`以便将所选行输出到控制台。如何将该输出定向到`JTextPane`on 输出？

可以`PaneWithList`触发一个`Main`接起的事件吗？[PropertyChangeSupport](http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyChangeSupport.html)就足够了吗？

主.java：

```
package dur.bounceme.net;

import javax.swing.JTabbedPane;

public class Main {

    private static JTabbedPane tabs;
    private static PaneWithList paneWithList;
    private static PaneWithTable paneWithTable;
    private static Output output;

    public static void main(String[] args) {
        tabs = new javax.swing.JTabbedPane();
        paneWithList = new PaneWithList();
        paneWithTable = new PaneWithTable();
        tabs.addTab("list", paneWithList);
        tabs.addTab("table", paneWithTable);
        tabs.addTab("output", output);
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T20:11:46.703

这是一个使用[*观察者模式*](http://en.wikipedia.org/wiki/Observer_pattern)的示例，也可以[在此处](https://stackoverflow.com/a/3072979/230513)、[此处](https://stackoverflow.com/a/9346946/230513)和[此处](https://stackoverflow.com/a/11832979/230513)看到。请注意，也可以收听组合的模型。

![在此处输入图像描述](../Images/ad4bcbf3abaddd1dcaaac78fc8a634c3.png)

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.*;

/**
* @see http://en.wikipedia.org/wiki/Observer_pattern
* @see https://stackoverflow.com/a/10523401/230513
*/
public class PropertyChangeDemo {

    public PropertyChangeDemo() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setResizable(false);
        f.add(new ObserverPanel());
        f.pack();
        f.setLocationByPlatform(true);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                PropertyChangeDemo example = new PropertyChangeDemo();
            }
        });
    }
}

class ObserverPanel extends JPanel {

    private JLabel title = new JLabel("Value received: ");
    private JLabel label = new JLabel("null", JLabel.CENTER);

    public ObserverPanel() {
        this.setBorder(BorderFactory.createTitledBorder("ObserverPanel"));
        JPanel panel = new JPanel(new GridLayout(0, 1));
        panel.add(title);
        panel.add(label);
        this.add(panel);
        ObservedPanel observed = new ObservedPanel();
        observed.addPropertyChangeListener(new PropertyChangeListener() {

            @Override
            public void propertyChange(PropertyChangeEvent e) {
                if (e.getPropertyName().equals(ObservedPanel.PHYSICIST)) {
                    String value = e.getNewValue().toString();
                    label.setText(value);
                }
            }
        });
        this.add(observed);
    }
}

class ObservedPanel extends JPanel {

    public static final String PHYSICIST = "Physicist";
    private static final String[] items = new String[]{
        "Alpher", "Bethe", "Gamow", "Dirac", "Einstein"
    };
    private JComboBox combo = new JComboBox(items);
    private String oldValue;

    public ObservedPanel() {
        this.setBorder(BorderFactory.createTitledBorder("ObservedPanel"));
        combo.addActionListener(new ComboBoxListener());
        this.add(combo);
    }

    private class ComboBoxListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent ae) {
            String newValue = (String) combo.getSelectedItem();
            firePropertyChange(PHYSICIST, oldValue, newValue);
            oldValue = newValue;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T20:46:22.793

我将[JMenu 与 JMenuItems](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)一起使用，其内容是使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)而不是非常复杂[的 JTabbedPane(s)](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T22:55:18.270

对于我自己的参考，以及对于使用 Netbeans GUI 构建器的任何人来说，它的工作原理如下：

PanelWithList 类：

```
package dur.bounceme.net;

public class PanelWithList extends javax.swing.JPanel {

    public PanelWithList() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jList1 = new javax.swing.JList();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();

        jList1.setModel(new javax.swing.AbstractListModel() {
            String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
            public int getSize() { return strings.length; }
            public Object getElementAt(int i) { return strings[i]; }
        });
        jList1.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        jList1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jList1MouseClicked(evt);
            }
        });
        jList1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jList1KeyReleased(evt);
            }
        });
        jScrollPane1.setViewportView(jList1);

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jScrollPane2.setViewportView(jTextArea1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(54, 54, 54)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 247, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 308, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(167, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(35, 35, 35)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jScrollPane2)
                    .addComponent(jScrollPane1))
                .addContainerGap(166, Short.MAX_VALUE))
        );
    }// </editor-fold>                        

    private void jList1MouseClicked(java.awt.event.MouseEvent evt) {                                    
        row();
    }                                   

    private void jList1KeyReleased(java.awt.event.KeyEvent evt) {                                   
        row();
    }                                  
    // Variables declaration - do not modify                     
    private javax.swing.JList jList1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextArea jTextArea1;
    // End of variables declaration                   

    private void row() {
        Object o = jList1.getSelectedValue();
        String s = (String)o;
        jTextArea1.setText(s);
        this.firePropertyChange("list", -1, 1);
    }
} 
```

和 Frame.java 作为驱动程序：

```
package dur.bounceme.net;

public class Frame extends javax.swing.JFrame {

    public Frame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jTabbedPane1 = new javax.swing.JTabbedPane();
        panelWithList1 = new dur.bounceme.net.PanelWithList();
        panelWithTable1 = new dur.bounceme.net.PanelWithTable();
        newJPanel1 = new dur.bounceme.net.PanelWithCombo();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        panelWithList1.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
            public void propertyChange(java.beans.PropertyChangeEvent evt) {
                panelWithList1PropertyChange(evt);
            }
        });
        jTabbedPane1.addTab("tab1", panelWithList1);
        jTabbedPane1.addTab("tab2", panelWithTable1);
        jTabbedPane1.addTab("tab3", newJPanel1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 937, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jTabbedPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 913, Short.MAX_VALUE)
                    .addContainerGap()))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 555, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jTabbedPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 521, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(22, Short.MAX_VALUE)))
        );

        pack();
    }// </editor-fold>

    private void panelWithList1PropertyChange(java.beans.PropertyChangeEvent evt) {
        System.out.println("panelWithList1PropertyChange ");

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Frame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new Frame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTabbedPane jTabbedPane1;
    private dur.bounceme.net.PanelWithCombo newJPanel1;
    private dur.bounceme.net.PanelWithList panelWithList1;
    private dur.bounceme.net.PanelWithTable panelWithTable1;
    // End of variables declaration
} 
```

关键是`panelWithList1PropertyChange`“panelWithList”本身的监听器。

因为`PanelWithList.firePropertyChange("list", -1, 1);`无法发送我看到的 Object 或 String，所以我不确定如何获取从 JList 一直到 JFrame 的所有**值。**

嗯，[API](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#firePropertyChange%28java.lang.String,%20boolean,%20boolean%29)说是的，它可以发送对象。必须检查一下。

我认为有必要获取有关 JList 使用的模型的一些信息，直到 JFrame。但是，这不会破坏 MVC 吗？或者也许这是错误的方法。

# xpath - 用于组合文本节点并将其检索到一个 Google 电子表格单元格的 XPath 函数

> ID：10523348
> 
> 赞同：0
> 
> 时间：2012-05-09T20:08:04.537
> 
> 标签：xpath

我完全是 XPath 的新手（我什至不知道如何将正确的 html 粘贴到这篇文章中；-p）主题，我需要一些帮助。我想检索带引号的文本并将其放入 Google 电子表格中的一个单元格中。现在我只能将此文本检索到单独的单元格中。

[http://imm.io/oLYI](http://imm.io/oLYI)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:18:14.803

`string(//tr[class='darkGreen']/td[2])`结果是你想要的吗？您的 XML 片段看起来不完整，我不确定您是否只想要第二个单元格的内容，所以如果这符合您的需要，这是一个疯狂的猜测。

# c# - 将用户凭据传递到 Exchange

> ID：10523353
> 
> 赞同：0
> 
> 时间：2012-05-09T20:08:19.450
> 
> 标签：c#, authentication, exchange-server, ntlm

我的场景：

```
User -> Web App (ASP.NET, C# 3.5) -> Exchange 
```

我需要将用户的 Window 的帐户信息传递给 Exchange，因为它使用 WIA。

我在我的网络应用程序的属性上启用了“NTLM”，然后我使用：

```
request.Credentials = CredentialCache.DefaultNetworkCredentials; 
```

它似乎不起作用。DefaultNetworkCredentials 是正确的方法还是应该使用其他方法将用户的凭据传递给 Exchange？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:08:36.753

您将需要首先模拟当前用户来执行此操作。您可以使用`WindowsImpersonationContext`或 通过将整个应用程序设置为在您的 web.config 文件中模拟来执行此操作。

# c# - PDF 中的 C# 报告 - 生成 1º 报告的速度很慢

> ID：10523356
> 
> 赞同：0
> 
> 时间：2012-05-09T20:08:28.623
> 
> 标签：c#, asp.net, pdf-generation

我在 C# 中编写代码以使用 Crystal Reports 生成报告并在浏览器上以 PDF 格式打开。

当用户第一次登录系统去生成一份报告时，需要很长时间来处理……但是，在生成第一份报告后，其他的都是自动生成的！

有人知道我该怎么做吗？我的代码是：

**单击按钮生成 PDF 时：**

```
ReportDocument Rel = new ReportDocument();
Rel.Load(Server.MapPath("../Reports/Report1.rpt"));
Rel.SetParameterValue("@Id", Id);

Session.Add("Report", Rel);
string _open = "window.open('Report.aspx');";
ScriptManager.RegisterStartupScript(this, this.GetType(), Guid.NewGuid().ToString(), _open, true); 
```

**在“Report.aspx”页面中：**

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (Session["Report"] != null)
                OpenPDF((ReportDocument)Session["Report"]);
        }
    }

private void OpenPDF(ReportDocument Rel)
{
    MemoryStream stream = (MemoryStream)Rel.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat);
    Response.Clear();
    Response.Buffer = true;
    Response.ContentType = "application/pdf";
    Response.BinaryWrite(stream.ToArray());
    Response.End();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:00:58.720

不确定您的报告文件包含什么，以及它处理的页面是否比导出的页面多，但您可以为用户预加载运行时，以便后续报告呈现在执行时间上不那么明显。

编辑：

创建一个空白报告并将其加载到某个地方，例如，在生成报告之前转到的上一页的 Page_Load 上；主页或小节。然后关闭并在之后处理报告。此外，从项目引用中删除您不使用的任何 Crystal Reports 程序集。

# list - 如何从球拍语言中给定索引的列表中获取项目？

> ID：10523361
> 
> 赞同：15
> 
> 时间：2012-05-09T20:08:43.680
> 
> 标签：list, scheme, racket

我正在尝试从给定索引处的列表中获取循环语句的项目。

```
(define decision-tree-learning
  (lambda (examples attribs default)
    (cond
      [(empty? examples) default]
      [(same-classification? examples) (caar examples)] ; returns the classification
      [else (lambda () 
              (let ((best (choose-attribute attributes examples))
                    (tree (make-tree best))
                    (m (majority-value examples))
                    (i 0)
                    (countdown (length best)) ; starts at lengths and will decrease by 1
                  (let loop()
                    (let example-sub ; here, totally stuck now
                      ; more stuff
                      (set! countdown (- countdown 1))
                      ; more stuff
                      )))))]))) 
```

在这种情况下，`best`是列表，我需要在`countdown`索引处获取它的值。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-09T20:20:12.150

例子：

```
> (list-ref '(a b c d e f) 2)
'c 
```

看：

[http://docs.racket-lang.org/reference/pairs.html](http://docs.racket-lang.org/reference/pairs.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T15:23:48.670

或者自己构建：

```
(define my-list-ref
    (lambda (lst place)
      (if (= place 0)
          (car lst)
          (my-list-ref (cdr lst) (- place 1))))) 
```

但是，如果您想检查列表是否已完成并且不要担心错误，您也可以这样做：

```
(define my-list-ref
    (lambda (lst place)
      (if (null? lst)
          '()
          (if (= place 0)
          (car lst)
          (my-list-ref (cdr lst) (- place 1)))))) 
```

# ruby - 如何使用 ruby selenium webdriver 进行操作系统级别的屏幕截图

> ID：10523362
> 
> 赞同：0
> 
> 时间：2012-05-09T20:08:44.487
> 
> 标签：ruby, selenium, webdriver

我知道 selenium 可以选择使用

```
@driver.save_screenshot("image.png") 
```

但是有一个功能可以进行操作系统级别的屏幕截图吗？带有浏览器标题、背景等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:05:00.210

我会尝试在不使用硒的情况下做到这一点。Selenium/Webdriver 实际上只与浏览器交互。它并不意味着执行操作系统级别的功能。

我不是 ruby​​ 用户，但我通过 Google 快速搜索找到了这一点：[https](https://github.com/jarmo/win32screenshot) ://github.com/jarmo/win32screenshot如果您使用的是 Windows，这似乎可行。

# jakarta-ee - Metro WebService - 如何配置/部署？

> ID：10523375
> 
> 赞同：-1
> 
> 时间：2012-05-09T20:09:18.903
> 
> 标签：jakarta-ee, deployment, java-metro-framework

我有一个运行良好的 Web 服务的 Metro 客户端。但是，我们在实验室环境中无法访问该服务，因此我编写了一个模拟服务进行测试。我在理解端点以及如何设置它们时遇到问题。

我将 URL 传递给客户端构造函数并将其设置在请求上下文中，如下所示：

```
 // Set the service port URL
    BindingProvider bindingProvider = ((BindingProvider) port);
    Map<String, Object> context = bindingProvider.getRequestContext();
    context.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, serviceURL); 
```

对于我的模拟服务，当我单击应用程序列表 (http://myserver:80/MySoapService) 中的“启动”链接时，我使用的是 Glassfish 给我的战争 URL。

代码是从提供给我们的 wsdl 生成的。WebService 界面如下所示：

```
@WebService(name = "My_Soap_Service", targetNamespace = "urn:My.DataEntityModel")
@XmlSeeAlso({
    ObjectFactory.class
})
public interface MySoapService {

    @WebMethod(operationName = "Ping", action = "urn:My.DataEntityModel/Ping")
    @WebResult(name = "PingResult", targetNamespace = "urn:My.DataEntityModel")
    @RequestWrapper(localName = "Ping", targetNamespace = "urn:My.DataEntityModel", className = "dataentitymodel.Ping")
    @ResponseWrapper(localName = "PingResponse", targetNamespace = "urn:My.DataEntityModel", className = "dataentitymodel.PingResponse")
    public String ping(
        @WebParam(name = "inputString", targetNamespace = "urn:My.DataEntityModel")
        String inputString);

    @WebMethod(operationName = "ProcessRecordResult", action = "urn:My.DataEntityModel/ProcessRecordResult")
    @WebResult(name = "ProcessRecordResultResult", targetNamespace = "urn:My.DataEntityModel")
    @RequestWrapper(localName = "ProcessRecordResult", targetNamespace = "urn:My.DataEntityModel", className = "dataentitymodel.ProcessRecordResult")
    @ResponseWrapper(localName = "ProcessRecordResultResponse", targetNamespace = "urn:My.DataEntityModel", className = "dataentitymodel.ProcessRecordResultResponse")
    public String ProcessRecordResult(
        @WebParam(name = "recordStatusXML", targetNamespace = "urn:My.DataEntityModel")
        String recordStatusXML);

    @WebMethod(operationName = "ProcessBatchResult", action = "urn:My.DataEntityModel/ProcessBatchResult")
    @WebResult(name = "ProcessBatchResultResult", targetNamespace = "urn:My.DataEntityModel")
    @RequestWrapper(localName = "ProcessBatchResult", targetNamespace = "urn:My.DataEntityModel", className = "dataentitymodel.ProcessBatchResult")
    @ResponseWrapper(localName = "ProcessBatchResultResponse", targetNamespace = "urn:My.DataEntityModel", className = "dataentitymodel.ProcessBatchResultResponse")
    public String processBatchResult(
        @WebParam(name = "batchStatusXML", targetNamespace = "urn:My.DataEntityModel")
        String batchStatusXML);

} 
```

我的 web.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/j2ee/dtds/web-app_2_3.dtd">

<web-app>
    <listener>
        <listener-class>
            com.sun.xml.ws.transport.http.servlet.WSServletContextListener </listener-class>
    </listener>
    <servlet>
        <servlet-name>MySoapService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>MySoapService</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>60</session-timeout>
    </session-config>
</web-app> 
```

我在设置 sun-jaxws.xml 文件时遇到问题。最初它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints
        xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime"
        version="2.0">
    <endpoint
            name="MyService"
            implementation="my.package.MySoapServiceImpl"
            url-pattern="/"
            wsdl-location="WEB-INF/wsdl/MySoapService.wsdl"/>
</endpoints> 
```

但是我的客户返回了一个描述该服务的“Web 服务”HTML 页面。我无法找到 sun-jaxws.xml 文件的任何实用信息/示例，但我认为我需要为 web 服务中的每个方法提供一个端点。所以我把它改成这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints
        xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime"
        version="2.0">
    <endpoint
            name="Ping"
            implementation="my.package.MySoapServiceImpl"
            url-pattern="/ping"
            wsdl-location="WEB-INF/wsdl/MySoapService.wsdl"/>

    <endpoint
            name="ProcessRecord"
            implementation="my.package.MySoapServiceImpl"
            url-pattern="/processRecordResult"
            wsdl-location="WEB-INF/wsdl/MySoapService.wsdl"/>

    <endpoint
            name="ProcessBatch"
            implementation="my.package.MySoapServiceImpl"
            url-pattern="/processBatchResult"
            wsdl-location="WEB-INF/wsdl/MySoapService.wsdl"/>

</endpoints> 
```

现在，当我的客户端尝试访问该服务时，我收到 404 错误。

我不知道我是否错误地设置了 sun-jaxws.xml 和/或 web.xml 文件，在客户端使用了错误的 URL 或完全不同的东西。

有人可以告诉我我做错了什么和/或将我指向一个以易于理解的方式解释这一点的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:32:26.723

我让它工作了，如果这对其他人有用，这是我的配置......

**web.xml**

```
<web-app>
    <listener>
        <listener-class>
            com.sun.xml.ws.transport.http.servlet.WSServletContextListener </listener-class>
    </listener>
    <servlet>
        <servlet-name>MySoapService</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>MySoapService</servlet-name>
        <url-pattern>/service</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>60</session-timeout>
    </session-config>
</web-app> 
```

**太阳jaxws.xml**

尽管我发现许多示例/博客都声明了 sun-jaxws.xml 文件中`port`的`service`元素是可选的，但没有它们我无法让它工作。此外，我发现如果在 Glassfish 上部署，说明 sun-jaxws.xml 文件本身是可选的。但是，我再次发现它是强制性的。

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints
        xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime"
        version="2.0">
    <endpoint
        name="MyService"
        interface="my.package.MySoapServiceInterface"
        implementation="my.package.MySoapServiceImpl"
        service="{urn:my.xmlns.tns.urn}My_Soap_Service"
        port="{urn:my.xmlns.tns.urn}My_Port_Type"
        url-pattern="/service"
        wsdl="WEB-INF/wsdl/MyService.wsdl"
</endpoints> 
```

**Web 服务实现类**

我发现有必要`endpointInterface`在 WebSevice 注释中包含：

```
@WebService(endpointInterface="my.package.MySoapServiceInterface")
public class MySoapServiceImpl implements MySoapServiceInterface 
```

当然，每个 Web 服务方法都需要注释`WebMethod`：

```
@WebMethod
public String doSomething(String string) 
```

# c# - 使用水晶报表在 IIS 上创建大文件

> ID：10523376
> 
> 赞同：1
> 
> 时间：2012-05-09T20:09:33.893
> 
> 标签：c#, asp.net, iis-7, crystal-reports

我想知道在 IIS 上使用水晶报表创建大文件是否有任何问题。

问题是我创建了大于 800 兆的报告，当我尝试在我的 IIS 服务器上生成这些报告时，当我在本地执行此操作时它工作正常，这不起作用。

我在 IIS 7 上使用 windows 2008 r2 x64 运行网站

使用水晶报告在 IIS 7 上生成大文件有什么问题吗？

编辑：未生成的文件大于 800 兆，它们根本不会在服务器上生成。尽管在我的机器上它们确实会生成。应用程序只是在服务器上超时。

# python - Django admin - 在输入另一个字段时设置一个字段

> ID：10523377
> 
> 赞同：0
> 
> 时间：2012-05-09T20:09:34.463
> 
> 标签：python, django, django-admin

很抱歉，如果我的问题已经在 SO 上提出，但我找不到我正在寻找的答案。

`Model`我用一个`ImageField`和一个创建了一个`DateField`。在我的 django 自动管理员（django 1.4）中，我有相应的：当用户填充`ModelAdmin`图像时，我想从图像中设置日期。`ImageField`总而言之，我想在`ImageField`选择时得到手，例如通过覆盖一种选择后的方法。

我怎样才能做到这一点 ？我可以在 django doc 中读到`clean`存在一个方法，但是我不清楚它的调用方式/时间。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:16:43.820

您可以覆盖模型的`save()`方法或更好地使用`pre_save` [信号](https://docs.djangoproject.com/en/1.4/topics/signals/)。在里面您可以检查对象是否有图像但没有日期，并将日期设置为`datetime.datetime.now()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:26:34.970

看看来自 django-filer 的图像模型：
[https ://github.com/stefanfoulis/django-filer/blob/develop/filer/models/imagemodels.py](https://github.com/stefanfoulis/django-filer/blob/develop/filer/models/imagemodels.py)

您可以在 save 方法中执行类似的操作。

```
def save(self, *args, **kwargs):
    if self.date_taken is None:
        try:
            exif_date = self.exif.get('DateTimeOriginal', None)
            if exif_date is not None:
                d, t = str.split(exif_date.values)
                year, month, day = d.split(':')
                hour, minute, second = t.split(':')
                self.date_taken = datetime(
                                   int(year), int(month), int(day),
                                   int(hour), int(minute), int(second))
        except:
            pass
    if self.date_taken is None:
        self.date_taken = datetime.now()
    self.has_all_mandatory_data = self._check_validity()
    try:
        # do this more efficient somehow?
        self.file.seek(0)
        self._width, self._height = PILImage.open(self.file).size
    except Exception:
        # probably the image is missing. nevermind.
        pass
    super(Image, self).save(*args, **kwargs) 
```

# c++ - boost::erase_all 从字符串中擦除多个字符

> ID：10523380
> 
> 赞同：13
> 
> 时间：2012-05-09T20:10:08.427
> 
> 标签：c++, string, boost

如果我想使用 删除字符串中的所有字符`boost::erase_all`，我可以这样做：

```
boost::erase_all( "a1b1c1", "1" ); 
```

现在，我的字符串是“abc”。但是，如果我想从字符串中删除所有数字 (0 - 9)，使用`boost::erase_all`，我必须为我希望删除的每个数字调用一次。

```
boost::erase_all( "a1b2c3", "1" );
boost::erase_all( "a1b2c3", "2" );
boost::erase_all( "a1b2c3", "3" ); 
```

我想我可以用`boost::is_any_of`它一次将它们全部删除，因为它适用于其他提升字符串算法，例如`boost::split`，但 is_any_of 似乎不适用于erase_all：

```
boost::erase_all( "a1b2c3", boost::is_any_of( "123" ) );

// compile error
boost/algorithm/string/erase.hpp:593:13: error: no matching 
function for call to ‘first_finder(const   
boost::algorithm::detail::is_any_ofF<char>&)’ 
```

也许我在这里忽略了一些明显的东西，或者 boost 中还有另一个功能可以做到这一点。我可以使用标准 C++ 手动完成，但只是好奇其他人如何使用 boost 来做到这一点。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-09-13T18:56:02.627

现在还可用的是：

`boost::remove_erase_if(str, boost::is_any_of("123"));`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T21:04:36.890

boost 有一个 remove_if 版本，它不需要你传入 begin 和 end 迭代器，但你仍然需要在带有 end 迭代器的字符串上调用 erase。

```
#include <boost/range/algorithm/remove_if.hpp>
...
std::string str = "a1b2c3";
str.erase(boost::remove_if(str, ::isdigit), str.end()); 
```

[http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/algorithms/mutating/remove_if.html](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/algorithms/mutating/remove_if.html)

# java - 如何获取 Liferay 中的当前用户？

> ID：10523382
> 
> 赞同：15
> 
> 时间：2012-05-09T20:10:17.087
> 
> 标签：java, liferay-6

如何使用简单的*Java*代码让当前用户连接到 Liferay 门户？

我正在使用**Liferay 6.0.6**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-10T07:38:38.847

简单地：

```
User currentUser = PortalUtil.getUser(request); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T16:51:29.847

在您的 doView/processAction 方法中执行以下操作

```
User user = (User) request.getAttribute(WebKeys.USER); 
```

或使用 ThemeDisplay 对象。它包含其他信息，如 companyId、groupId、...

```
ThemeDisplay td  =(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
User user = td.getUser(); 
```

类 ThemeDisplay、User 和 WebKeys 是 portal-service.jar 的一部分。

如果您只需要一些 id 来识别当前用户，您也可以使用

```
String userId = request.getRemoteUser(); 
```

这个解决方案不是 Liferay 特定的，应该可以在 jsr-286 门户之间移植。

来源：[使用简单的Java代码获取当前用户Liferay](https://stackoverflow.com/questions/10448193/get-the-current-user-liferay-using-a-simple-java-code)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T00:38:44.350

在 Java 代码中：

*   `UserLocalServiceUtil.getXXX`方法有，随意选择。

在 JSP 代码中：

*   `themeDisplay.getUserId()`会给你当前的用户ID
*   `themeDisplay.getUser()`会给你当前用户的对象。

# floating-point - 使用其他浮点数反转浮点数

> ID：10523384
> 
> 赞同：1
> 
> 时间：2012-05-09T20:10:26.673
> 
> 标签：floating-point, glsl

我有一个非常简单的问题，但是因为找不到解决方案，所以我把我的大脑放在墙上。

我在嵌入式系统中使用着色器处理器，由于片段着色器的性能不佳而无法使用条件。

我有两个浮点数，都可以是 0 或 1。

如果第二个浮点数为 1，我想反转第一个浮点数的值。

基本上

```
if(floatA==1.0)
    {
        if(floatB==1.0)
        {
            floatB=0.0;
        }
        else
        {
            floatB=1.0;
        }
    } 
```

-- 只是没有条件，但在数学上 x..X

有任何想法吗？:D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:20:04.013

How about:

`floatB = ( floatA * ( 1 - floatB )) + ((1 - floatA) * floatB )`

If floatA is 1, then `floatB = 1-floatB`, otherwise if floatA is zero, then `floatB = floatB`;

# java - onSurfaceChanged 的 目的是什么？

> ID：10523386
> 
> 赞同：4
> 
> 时间：2012-05-09T20:10:41.097
> 
> 标签：java, android, opengl-es

我不完全明白这种方法的目的是什么。在 android 文档中，他们说这是更改屏幕大小的时候。这是否意味着视口的大小，或者它究竟意味着什么？我应该在方法中调用什么opengl。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T20:16:18.477

当视口的大小改变或首次创建时调用该方法。这个函数是你第一个知道你的 GlSurfaceView 占用多少像素的地方。

在这种方法中，设置视口是合适的，也许设置投影矩阵是合适的。

例如，如果屏幕从垂直旋转到水平，视口的大小可能会发生变化，因此您应该重置视​​口和投影矩阵。

# mysql - MySQL：全文搜索有问题 - 返回 NO 结果

> ID：10523390
> 
> 赞同：9
> 
> 时间：2012-05-09T20:11:18.960
> 
> 标签：mysql

我有一张桌子`places(name vachar(50), address text, description text) engine = MYISAM`和几条记录。

我一直在尝试在[这里](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)做一些例子！，并搜索“全文问题”，但我不清楚全文搜索。

首先，我通过以下方式添加全文索引：

```
ALTER TABLE places ADD FULLTEXT(name, address, description); 
```

并尝试 mySQL：

```
SELECT * FROM places WHERE MATCH(name,address,description) AGAINST('my search key'); 
```

我尝试了一些内容在许多领域的“我的搜索键”，但我遇到了一些情况：

*   现在选择行。

*   如果我尝试`add option "IN BOOLEAN MODE" in AGAINST()`，以 score =1 获得的结果，当我对其进行排序时，它是没有意义的。

*   它只是在“搜索键”在字段（名称）中有内容时显示结果。

我尝试了很多方法，但我不记得所有情况，

任何答案都会有所帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T12:52:21.077

确保您的关键字不是[停用词](http://dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html)。要[禁用或修改停用词列表](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_ft_stopword_file)，您需要访问设置系统变量并重新启动服务器。

此外，请确保您的关键字符合[最小全文字长](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_ft_min_word_len)。默认最小长度为 4。

最后，确保单词出现在少于 50% 的记录中。MySQL 不会返回单词出现在 50% 或更多记录中的结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T22:58:31.420

除了马库斯的回答：

当我第一次开始在 MySQL 中使用 FULLTEXT 索引时，我遇到了空结果的问题——我避免使用停用词，并且使用了足够长的停用词，所以我有点头疼，直到我发现这被埋在[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)中：

> 当您第一次尝试全文搜索以查看其工作原理时，50% 阈值具有重要意义：如果您创建一个表并仅在其中插入一两行文本，则文本中的每个单词至少出现 50%的行。因此，没有搜索返回任何结果。确保插入至少三行，最好更多。需要绕过 50% 限制的用户可以使用布尔搜索模式

这也解释了为什么在将查询设置为在布尔模式下运行时得到结果（但得分“无意义”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-05T15:04:40.927

我有同样的问题，查询在过去工作，突然我的测试开始失败。我设法隔离了查询，实际上，它没有返回任何结果。我正在使用`boolean mode`，所以 50% 规则不可能导致问题。

我通过运行解决了这个问题：

```
OPTIMIZE TABLE organizations; # replace table name 
```

我认为有时当您进行大量写入/删除时，MySQL 索引会停止工作。奇怪的是我没有收到错误。

# php - 带有会话（@variables）的 MySQL 查询在 MySQL Workbench 中工作，但在 PHP 中不工作

> ID：10523394
> 
> 赞同：0
> 
> 时间：2012-05-09T20:11:32.523
> 
> 标签：php, mysql

几个小时以来一直在努力解决这个问题的一个版本，我知道这可能是我缺少的一些东西。

我有一个基于这篇文章的第一个答案的查询：

[如何限制 SQL 中每个字段值的行数？](https://stackoverflow.com/questions/10421807/how-do-i-limit-the-number-of-rows-per-field-value-in-sql)

这正是我希望它在 MySQL Workbench 中执行的操作，但在从以下位置运行时不会将会话变量设置为“2”：

```
mysql_query() 
```

在 PHP 中。

下面是一个表格，“mytab”，它演示了这个问题：

```
+----+--------------+---------------+
| id | first_column | second_column |
+----+--------------+---------------+
|  1 |            1 |             1 |
|  2 |            1 |             4 |
|  3 |            2 |            10 |
|  4 |            3 |             4 |
|  5 |            1 |             4 |
|  6 |            2 |             5 |
|  7 |            1 |             6 |
+----+--------------+---------------+ 
```

和一个简化的查询：

```
select
    id, first_column, second_column, row_num
from 
(
    select *,
    @num := if(@first_column = first_column, 2, 1) as row_num,
    @first_column := first_column as c
    from mytab order by first_column,id
) as t
having row_num <= 1; 
```

从 MySQL 工作台我得到这个：

```
+----+--------------+---------------+---------+
| id | first_column | second_column | row_num |
+----+--------------+---------------+---------+ 
|  1 |            1 |             1 |       1 |
|  3 |            2 |            10 |       1 |
|  4 |            3 |             4 |       1 |
+----+--------------+---------------+---------+ 
```

从 PHP 我得到这个：

```
+----+--------------+---------------+---------+
| id | first_column | second_column | row_num |
+----+--------------+---------------+---------+
|  1 |            1 |             1 |       1 |
|  2 |            1 |             4 |       1 |
|  3 |            2 |            10 |       1 |
|  4 |            3 |             4 |       1 |
|  5 |            1 |             4 |       1 |
|  6 |            2 |             5 |       1 |
|  7 |            1 |             6 |       1 |
+----+--------------+---------------+---------+ 
```

难道我做错了什么？

非常感谢！

* * *

**编辑：**这是我精简的 PHP 代码，因为现实中的问题与一些更复杂的东西有关。

```
class sql_helper extends other
{
    public function query_handler($sql, $error_message) 
    {
        $this->connect(); // Not shown, but works without issue

        $result = mysql_query($sql) or die($error_message.''.mysql_error());

        return $result;
    }

    public static function sql_result_to_assoc($sql_result) 
    {
        $result_array = array();

        while($row = mysql_fetch_assoc($sql_result))
            $result_array[] = $row;

        return $result_array;
    }

    public function sql_to_assoc($sql, $error_message)
    {
        $result = $this->query_handler($sql, $error_message);

        return $this->sql_result_to_assoc($result);
    }
}

$sql = "
    select
    id, first_column, second_column, row_num
    from 
    (
        select *,
        @num := if(@first_column = first_column, 2, 1) as row_num,
        @first_column := first_column as c
        from mytab order by first_column,id
    ) as t
    having row_num<=1";

$sql_helper   = new sql_helper();
$result_array = $sql_helper->sql_to_assoc($sql, ''); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T08:31:29.700

您需要初始化会话变量：

```
SET @num:=0;
SET @first_column:=0; 
```

这必须在同一个 MySQL 会话中并且在您的查询之前完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T10:15:03.913

正如 Jerahian 回答的那样，他们需要在同一个会话中。我通常会进行内联声明，但您必须将其包装为一个选择并分配一个“别名”，例如

```
select
    id, first_column, second_column, row_num
from 
   ( select *,
           @num := if(@first_column = first_column, 2, 1) as row_num,
           @first_column := first_column as c
        from 
           mytab,
           ( select @first_column := 0 ) as Sqlvars
      order by 
           first_column,
           id
   ) as t
having 
   row_num <= 1; 
```

注意 @first_column := 0 作为“sqlvars”别名的非常微妙的初始化......然后它可以按照您的意图使用。如果您有多个变量，只需像其他列一样用逗号分隔......例如

```
 ( select @first_column := 0, 
            @someOtherField := '2013-06-02',
            @someString := 'testing' ) as Sqlvars 
```

# jquery - 如何将选择的插件添加到动态创建/克隆的 CSS div？

> ID：10523395
> 
> 赞同：4
> 
> 时间：2012-05-09T20:11:33.853
> 
> 标签：jquery, css, jquery-chosen

jQuery 的选择插件（可在此处找到：http: [//harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)）添加了额外的功能来选择 HTML 元素。我可以使用以下代码将功能添加到页面上加载的初始元素：

```
$(document).ready(function(){
$(".chosenProperties").data("placeholder","Select properties...").chosen();
$(".chosenType").data("placeholder","Type...").chosen();
$(".chosenInstance").data("placeholder","Instance...").chosen() 
```

这样可行。所有这三个类的选择元素都出现在一个名为#newGroup 的 div 中。页面上有一个按钮可以“添加”一个新组，它克隆了 #newGroup div 并将其添加到第一个组的正下方。

它包含相同的元素。但是，当我尝试将选择功能添加到克隆 div 中的选择项时，它们被冻结。该界面看起来与第一个相同，因此正在加载选择，但是当我单击它们时没有任何反应。这是代码：

```
 $( '#swl-add-group-button' ).click( function() {
    //addGroupToGUI();
    createClassAddRow();

} );

var rowNum = 0;     
function createClassAddRow() {
    rowNum++;
    newRow = jQuery('#newGroup').clone().css('display', '');
    newHTML = newRow.html().replace(/0/g, 1);
    newRow.initializeJSElements();
    newRow.html(newHTML);
    newRow.initializeJSElements();
    jQuery('#mainTable').append(newRow);
    addGroup(newRow);
}

jQuery.fn.initializeJSElements = function (){
    this.find(".chosenProperties").each( function() {
        alert('test');
        if($(".chosenProperties").data("placeholder", "Select properties...").chosen()){
            alert('test2');
        }
    });
    this.find(".chosenType").each( function() {
        jQuery(this).data("placeholder","Type...").chosen();
    });
    this.find(".chosenInstance").each( function(){
        jQuery(this).data("placeholder", "Instance...").chosen();
    })

} 
```

两个警报 test 和 test2 都会出现。所以我认为 jQuery 正在加载，但由于某种原因它无法正常工作。另外，我不确定这是否会有所不同，但是当我将鼠标悬停在克隆的 div 的选择元素上时，它会显示 javascript:void(1)，而当我将鼠标悬停在原始元素上时，它会显示 javascript:void(0)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T19:43:47.320

我想出的工作与 Abhinav 的类似。我删除了选择生成的代码。从选择框中删除“chzn-done”类。关闭显示：选择框上的无，然后将选择重新应用于选择框

```
$j("#masterCats_chzn").remove();
$j("#masterCats").css({display: "inline-block"}).removeClass("chzn-done").addClass("chsn");
$j(".chsn").chosen(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T04:18:12.983

查看[所选的源代码](https://github.com/harvesthq/chosen/blob/master/coffee/chosen.jquery.coffee#L14)，您似乎不能只克隆已经是的选择`chosen`，因为它们已经具有自己的`chzn-done`类集，并且`chosen`仅适用于没有此类集的选择。这意味着您`chosen`对新选择的调用实际上没有任何作用。

选择显示为`chosen`启用，因为您正在克隆整个组。也就是说，调用`clone`新组后已经包含一个`chosen`接口，并且`select`已经隐藏。当然，`chosen`新组中的接口并没有绑定新的`select`. 此外，单击`select`不会更改任何内容，因为`jQuery.clone`默认情况下不会添加新事件。

基本上，您永远不应该使用`jQuery.clone`来克隆复杂的内容（或者，更具体地说，您根本不应该克隆复杂的内容）。如果你想用一个新的`chosen`-enabled 选择创建一个新的输入组，只需明确地做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T04:44:57.627

我刚从谷歌偶然发现这里。思想会用我的基础解决方案来回复`.clone()`。这是我在我的项目中使用 jquery clone 并在其上动态应用所选插件的操作：

```
html = '';
selectbox = $('#select-box').clone();
selectbox.removeAttr('id').attr({
    'data-placeholder': '(optional)'
}).removeClass('chzn-done').css('display','block');
html += selectbox.wrap('<p>').parent().html(); 
```

对我很有用。删除`'chzn-done'`类是强制性的步骤，否则选择的插件将无法激活它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T12:00:31.260

确实选择不适用于克隆输入。让它工作的另一种方法是

```
 clonedInput = $('#fullForm').clone;
    clonedInput.find('div.chzn-container').remove();
    clonedInput.find('selectBoX.withClass').show();
    clonedInput.find('selectBoX.withClass').removeAttr('id');
    clonedInput.find('selectBoX.withClass').removeAttr('data-placeholder');
    clonedInput.find('selectBoX.withClass').removeClass('chzn-done');
    clonedInput.find('selectBoX.withClass').chosen(); 
```

# c++ - 在 c++ 中使用 next_permutation() stl 在两个数组中进行相同的排列

> ID：10523396
> 
> 赞同：5
> 
> 时间：2012-05-09T20:11:34.040
> 
> 标签：c++, algorithm, stl

是否有一种简单的方法可以使 next_permutation 执行相同的一组交换相同大小的两个不同数组，例如，如果我有两个数组`a[]={1,2,3,4,5}`，并且`b[]={12,23,21,2,3}` 如果在数组 a 中的排列 1 到第三位置之后，那么数组 b 中的 12 也应该到第三位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:14:31.283

您可以制作一个辅助索引集：

```
int a[] = { 1, 2, 3, 4, 5 };
int b[] = { 12, 23, 21, 2, 3 };

std::size_t indices[] = { 0, 1, 2, 3, 4 }; 
```

现在在 上执行排列`indices`，然后使用`a[indices[i]]`and `b[indices[i]]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:22:38.830

请记住，std::next_permutation 不会保留任何状态（它会违背 stl 算法的概念）。那么它是如何产生下一个排列的呢？它是按照元素的顺序来完成的。这就是为什么有一个接受比较运算符的版本

如果给它一个大小为 N 的排序数组，那么 next_permutation 可以称为 N！次。否则，在算法返回 false 之前，您的排列会更少。

要回答您的问题，如果数组在上面建议的“辅助索引集”方面具有相同的顺序，那么将交换相同的元素。

例子：

```
int a[] = { 1, 2, 4, 3 };
int b[] = { 11, 12, 14, 13 }; 
```

这些将被排列相同，因为 sort 将产生相同的索引排序。

# matlab - 在 MATLAB 中对“选定”像素应用图像过滤技术

> ID：10523397
> 
> 赞同：1
> 
> 时间：2012-05-09T20:11:37.810
> 
> 标签：matlab, image-processing, 3d, filtering, threshold

我的算法的特征提取步骤，在“3D”图像上应用了一些过滤器，并使用过滤像素的值作为图像原始像素的特征。

我的问题是我只需要一小部分像素（阈值像素）的特征，而不是所有图像。并且过滤所有图像而不是仅过滤一些像素非常耗时。

我的问题是如何仅过滤图像的选定像素？有没有为此目的的matlab函数？（我想我不能使用imfilter）

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:45:49.907

使用`roifilt2`. 以下代码直接取自[Matlab 文档站点](http://www.mathworks.com/help/toolbox/images/ref/roifilt2.html)

```
I = imread('eight.tif'); 
```

首先，定义感兴趣区域：

```
c = [222 272 300 270 221 194];
r = [21 21 75 121 121 75];
BW = roipoly(I,c,r); 
```

在您的情况下，`BW`已定义，因此您可以跳过上一步。

现在，应用过滤器：

```
H = fspecial('unsharp');
J = roifilt2(H,I,BW);
figure, imshow(I), figure, imshow(J) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T20:37:58.670

这是 Matlab 中对图像应用阈值的快速矩阵运算：

```
% let's assume i is your image (matrix)
thresh = 60; % set the threshold for pixel values
i = uint16(i > thresh) .* i; % adjust uint16 to your: class(i) 
```

这将设置`0`低于阈值的所有像素。
如果您想在之后将过滤器应用于较小的区域，则可以检查图像的哪些列和行包含大于零的值，并相应地裁剪图像或使用[`roipoly`](http://www.mathworks.de/help/toolbox/images/ref/roipoly.html).

# windows - c#在windows 2008 64bit远程运行命令

> ID：10523400
> 
> 赞同：0
> 
> 时间：2012-05-09T20:11:41.713
> 
> 标签：windows, 64-bit, command

我是C#编码的新手，请帮助我，提前谢谢你..!!!

我正在尝试以下操作：

我正在开发小型 C# 应用程序以在远程服务器上执行批处理文件，以下是我的代码，我的大多数服务器都是 windows 2008 64bit，如果我 RDP 进入服务器，我可以执行批处理文件而没有任何错误，但是当我尝试做它通过以下代码，它不起作用，没有抛出异常，但没有结果。

我的批处理文件包含以下命令：

```
@ECHO off 
echo Running Remote Commands 
date/t 
time /t 
COPY "\\xt0022\I$\abc\RemoteProcess\testcopy.bat" D:\ab\
date/t 
time /t 
```

-

```
try
{
    string remotemachine = "Server1";

    object[] theProcessToRun = { "D:\\ab\\test2.bat" };
    ConnectionOptions theConnection = new ConnectionOptions();
    theConnection.Impersonation = ImpersonationLevel.Impersonate;
    theConnection.EnablePrivileges = true;
    ManagementScope theScope = new ManagementScope("\\\\" + remoteMachine + "\\root\\cimv2", theConnection);
    ManagementClass theClass = new ManagementClass(theScope, new ManagementPath("Win32_Process"), new ObjectGetOptions());
    theClass.InvokeMethod("Create", theProcessToRun);

}
catch (Exception ex)
{

} 
```

如果我调试代码，它会显示“推导 = 函数评估超时”。

我必须用 RUNAS 运行它吗？如果是..任何人都可以帮助我使用这些代码或方法..？

谢谢你们..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:20:00.420

Have you looked into ProcessStartInfo?

```
ProcessStartInfo startInfo = new ProcessStartInfo("PsExec.exe");
startInfo.Arguments = @"\\<computername -u <username> -p <password> -i c:\\test.bat";
Process.Start(startInfo); 
```

Here's an artice on CodeProject.com that creates a remote process using WMI, like your doing. Complete source is available.

[http://www.codeproject.com/Articles/31113/Create-a-Remote-Process-using-WMI-in-C](http://www.codeproject.com/Articles/31113/Create-a-Remote-Process-using-WMI-in-C)

This might be a silly question, but what is your timeout set to? If it's too small, that may be the cause.

# ruby-on-rails - ActiveAdmin - 使用范围和过滤器

> ID：10523407
> 
> 赞同：8
> 
> 时间：2012-05-09T20:12:14.237
> 
> 标签：ruby-on-rails, activeadmin, formtastic

在我的 ActiveAdmin 模型中，我有一个自定义范围来显示已删除的记录和几个用于按特定列搜索记录的过滤器。

单独使用过滤器或组合使用过滤器可以按预期工作。

使用范围按预期工作。

问题是使用范围似乎会覆盖所有过滤器，并且在选择范围后，添加的任何过滤器都不会执行任何操作。

有人在这里有什么想法吗？我想要的是能够显示特定范围，然后仍然能够过滤该范围内的结果。

```
 ActiveAdmin.register Example do
      scope :deleted do |example|
        Example.only_deleted
      end

      scope :all do |example|
        Example.with_deleted
      end

      filter :title
      filter :description

      index do
        column :title
        column :description
      end

    end 
```

[更新]

这是我采用的解决方案。我在模型上设置了 with_deleted 范围，并在侧面包含过滤器以显示/隐藏已删除的结果。不理想，因为还显示了最初删除的结果，但至少所有过滤器可以一起使用。

```
 ActiveAdmin.register Example.with_deleted do

      filter :title
      filter :description
      filter :deleted, :as => :select, :collection => {:true => nil, :false => false }

      index do
        column :title
        column :description
      end

    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-06T18:23:28.390

默认情况下，ActiveAdmin 希望范围只提供符号化的方法名称。当您以这种方式定义范围时，它们可以链接到过滤器已经提供的范围，并且它们可以无缝地协同工作。

因此，您的错误是显式调用`Model#class_method`而不是提供`:symbolized_class_method_name`（带有当前模型的隐含所有者）。

如果您替换此代码，过滤器和范围将协同工作：

```
scope :all do |example|
  Example.with_deleted
end

scope :deleted do |example|
  Example.only_deleted
end 
```

有了这个：

```
scope "Deleted", :only_deleted
scope "All", :with_deleted 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-09T20:30:35.987

而不是范围创建另一个过滤器，它将根据是否删除示例或全部来选择标准上的记录。并根据需要应用尽可能多的过滤器。

或者在计算将运行过滤器的选择器时在过滤器中相应地运行范围，然后将过滤器条件放在该选择器上。

# ruby-on-rails - Rails中link_to中的HTML？

> ID：10523408
> 
> 赞同：1
> 
> 时间：2012-05-09T20:12:15.547
> 
> 标签：ruby-on-rails, templates, erb

我对 Rails 模板很陌生。

这是我当前的代码：

```
<li><%= link_to "Home", "/path1" %></li> 
```

这是我希望代码工作的方式：

```
 <li><a href="path1"><i class="icon-home icon-white icon-active"></i> Home</a></li> 
```

我试图弄清楚这一点无济于事。基本上我只想要一个嵌入式标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T20:16:45.763

您可以将块传递给 link_to：

```
<li>
<%= link_to "/path1" do %>
  <i class="icon-home icon-white icon-active"></i> Home</a>
<% end %>
</li> 
```

# jquery-ui - jQuery：如何在脚本的 $('??') 中引用 @Html.TextBoxFor 数据？

> ID：10523412
> 
> 赞同：1
> 
> 时间：2012-05-09T20:12:27.373
> 
> 标签：jquery-ui, razor, datepicker

我正在尝试在上面的脚本中引用文本框数据，请问有什么想法吗？

```
<script type="text/javascript">
    $(document).ready(function () {
        $('??').datepicker();       
    });
</script>

<div class="editor-label">&nbsp;&nbsp;
    Date:
    @Html.TextBoxFor(model => model.RTDATE)&nbsp;&nbsp;&nbsp;
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:23:27.317

`@Html.TextBoxFor(model => model.RTDATE)`将呈现一个带有 id 和 name 的输入元素`RTDATE`。

使用 jQuery，您可以使用以下方法来处理它：

```
$("#RTDATE").datepicker(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:20:17.203

By default asp.net mvc will generate an input with the same name as your model property. So in your case above you can do

```
$("#RTDATE").datepicker(); 
```

[Here's](http://httputility.com/various/razorhelperscheatsheet.html) a quick (although not perfectly formatted) list of the helpers and what they output in html in the default cases.

# jquery - jquery函数返回不起作用

> ID：10523413
> 
> 赞同：1
> 
> 时间：2012-05-09T20:12:32.727
> 
> 标签：jquery, function, return

> **可能重复：**
> [jQuery：ajax调用成功后返回数据](https://stackoverflow.com/questions/5316697/jquery-return-data-after-ajax-call-success)

我有以下从另一个函数调用的函数。它需要返回一些东西才能查看该函数是否有效。

```
//Function to close any existing connection 
function closeConnection(manual) {
    //Establish connection to php script 
    $.ajax({
        type: 'POST',
        url: 'action/chat/closeconnection.php',
        success: function (feedback) {
            //If this function was called manually, also empty chatTextDiv and fade out chatDiv
            if (manual == true) {
                //Stop getting messages
                clearInterval(setintervalid);
                //Fade out chatDiv
                $('#chatDiv').fadeOut(100);
                //Empty chatTextDiv
                $('#chatTextDiv').html('');
                //Fade in openChatDiv
                $('#openChatDiv').fadeIn(100);
            }
        }
    }).error(function () {
        //Append with connection error - user doesn't know that he is disconnected first so it is better to say this as the function will return false and stop other functions
        if (manual != true) {
            $('#chatTextDiv').append('You could not be connected. Please try again later.<hr/>');
            //Stop getting messages
            clearInterval(setintervalid);
            var closeconnectionsuccess = false;
        }
        elseif(manual == true) {
            $('#chatTextDiv').append('You could not be disconnected. Please try again later.<hr/>');
            var closeconnectionsuccess = true;
        }
    });

    return closeconnectionsuccess;
} 
```

这实际上只是我想要返回函数成功的最后一行：代码不起作用。为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:17:36.160

正如@Rockitsauce 所说，您的 closeconnectionsuccess 变量不在函数的范围内，因此此时无法访问。然而，更重要的是，您必须考虑到您正在使用 jQuery 的异步函数 - 该函数将在调用回调 ( , )`closeConnection`之前完成执行。如果您想在 HTTP 请求完成后检索任何结果，您还必须向您自己的函数添加一个回调函数，从而使其也异步。`success``error`

因此，此代码应该可以工作：

```
//Function to close any existing connection 
function closeConnection(manual, callback) {
//Establish connection to php script 
$.ajax({
    type: 'POST',
    url: 'action/chat/closeconnection.php',
    success: function(feedback) {
        //If this function was called manually, also empty chatTextDiv and fade out chatDiv
        if(manual==true)
        {
            //Stop getting messages
            clearInterval(setintervalid);
            //Fade out chatDiv
            $('#chatDiv').fadeOut(100);
            //Empty chatTextDiv
            $('#chatTextDiv').html('');
            //Fade in openChatDiv
            $('#openChatDiv').fadeIn(100);
        }
    }
}).error(function() {
    //Append with connection error - user doesn't know that he is disconnected first so it is better to say this as the function will return false and stop other functions
    if(manual!=true)
    {
        $('#chatTextDiv').append('You could not be connected. Please try again later.<hr/>');
        //Stop getting messages
        clearInterval(setintervalid);
        callback(false);
    }
    elseif(manual==true)
    {
        $('#chatTextDiv').append('You could not be disconnected. Please try again later.<hr/>');
        callback(true);
    }
});
}

closeConnection(manual, function(success) {
    //Process result
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:14:47.107

您的 closeconnectionsuccess 变量超出范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T20:16:41.713

ajax 调用是异步的。所以函数在 ajax 调用返回之前就结束了。

您要么必须传入并调用回调函数，要么在 ajax 调用完成时触发事件。

# bash - 对目录中的所有文件执行命令

> ID：10523415
> 
> 赞同：382
> 
> 时间：2012-05-09T20:12:42.177
> 
> 标签：bash, scripting

有人可以提供执行以下操作的代码：假设有一个文件目录，所有这些都需要通过程序运行。程序将结果输出到标准输出。我需要一个脚本，它将进入一个目录，对每个文件执行命令，并将输出连接到一个大输出文件中。

例如，在 1 个文件上运行命令：

```
$ cmd [option] [filename] > results.out 
```

* * *

## 回答 #1

> 赞同：543
> 
> 时间：2012-05-09T20:18:24.807

以下 bash 代码将 $file 传递给命令，其中 $file 将代表 /dir 中的每个文件

```
for file in /dir/*
do
  cmd [option] "$file" >> results.out
done 
```

例子

```
el@defiant ~/foo $ touch foo.txt bar.txt baz.txt
el@defiant ~/foo $ for i in *.txt; do echo "hello $i"; done
hello bar.txt
hello baz.txt
hello foo.txt 
```

* * *

## 回答 #2

> 赞同：223
> 
> 时间：2012-05-09T20:17:40.690

这个怎么样：

```
find /some/directory -maxdepth 1 -type f -exec cmd option {} \; > results.out 
```

*   `-maxdepth 1`参数防止 find 递归下降到任何子目录。（如果你想处理这样的嵌套目录，你可以省略它。）
*   `-type -f`指定仅处理普通文件。
*   `-exec cmd option {}`告诉它使用为找到的每个文件`cmd`指定的文件运行，文件名替换为`option``{}`
*   `\;`表示命令的结束。
*   最后，所有单独`cmd`执行的输出被重定向到 `results.out`

但是，如果您关心文件的处理顺序，最好编写一个循环。我认为`find`按 inode 顺序处理文件（尽管我可能错了），这可能不是您想要的。

* * *

## 回答 #3

> 赞同：94
> 
> 时间：2016-05-19T21:03:33.880

我通过运行以下命令在我的 Raspberry Ri 上执行此操作：

```
for i in *; do cmd "$i"; done 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-04-16T07:32:25.333

接受/高票的答案很棒，但缺少一些细节。这篇文章介绍了如何更好地处理 shell 路径名扩展 (glob) 失败、文件名包含嵌入的换行符/破折号以及在将结果写入时将命令输出重定向移出 for 循环的情况文件。

使用运行 shell glob 扩展时，如果目录中*没有*`*`文件，则扩展可能会失败，并且未扩展的 glob 字符串将传递给要运行的命令，这可能会产生不良结果。shell 为此提供了一个扩展的shell 选项，使用. 所以循环基本上在包含你的文件的目录中变成如下*`bash``nullglob`*

 *```
 shopt -s nullglob

 for file in ./*; do
     cmdToRun [option] -- "$file"
 done 
```

`./*`这使您可以在表达式不返回任何文件时安全地退出 for 循环（如果目录为空）

或以符合 POSIX 的方式（`nullglob`具体`bash`）

```
 for file in ./*; do
     [ -f "$file" ] || continue
     cmdToRun [option] -- "$file"
 done 
```

这使您可以在表达式一次失败时进入循环，并且条件`[ -f "$file" ]`检查未扩展的字符串`./*`是否是该目录中的有效文件名，而事实并非如此。因此，在这种情况下失败，使用`continue`我们恢复到`for`随后不会运行的循环。

`--`还要注意在传递文件名参数之前的用法。这是必需的，因为如前所述，shell 文件名可以在文件名的任何位置包含破折号。*当名称没有*被正确引用时，一些 shell 命令会解释它并将它们视为命令选项，并在考虑是否提供标志的情况下执行命令。

在这种情况下，该`--`信号表示命令行选项的结束，这意味着该命令不应将超出此点的任何字符串解析为命令标志，而只能解析为文件名。

* * *

双引号文件名正确地解决了名称包含全局字符或空格的情况。但是 *nix 文件名中也可以包含换行符。所以我们用唯一不能成为有效文件名一部分的字符来限制文件名 - 空字节（`\0`）。由于`bash`内部使用`C`样式字符串，其中空字节用于指示字符串的结尾，因此它是正确的候选者。

因此，使用命令选项使用 shell 的选项`printf`来分隔带有这个 NULL 字节的文件，我们可以在下面做`-d``read`

```
( shopt -s nullglob; printf '%s\0' ./* ) | while read -rd '' file; do
    cmdToRun [option] -- "$file"
done 
```

The`nullglob`和 the`printf`被环绕`(..)`，这意味着它们基本上在子 shell（子 shell）中运行，因为`nullglob`一旦命令退出，为了避免反射到父 shell 的选项。command的`-d ''`选项*不*符合 POSIX 标准，因此需要一个shell 来完成。使用命令可以这样做`read`*`bash``find`*

 *```
while IFS= read -r -d '' file; do
    cmdToRun [option] -- "$file"
done < <(find -maxdepth 1 -type f -print0) 
```

对于`find`不支持`-print0`的实现（除了 GNU 和 FreeBSD 实现），可以使用`printf`

```
find . -maxdepth 1 -type f -exec printf '%s\0' {} \; | xargs -0 cmdToRun [option] -- 
```

* * *

另一个重要的修复是将重定向移出 for 循环以减少大量文件 I/O。当在循环内使用时，shell 必须为 for 循环的每次迭代执行两次系统调用，一次用于打开，一次用于关闭与文件关联的文件描述符。这将成为运行大型迭代的性能瓶颈。推荐的建议是将其移出循环。

用这个修复扩展上面的代码，你可以做

```
( shopt -s nullglob; printf '%s\0' ./* ) | while read -rd '' file; do
    cmdToRun [option] -- "$file"
done > results.out 
```

这基本上会将文件输入的每次迭代的命令内容放到标准输出中，当循环结束时，打开目标文件一次以写入标准输出的内容并保存它。相同的等效`find`版本是

```
while IFS= read -r -d '' file; do
    cmdToRun [option] -- "$file"
done < <(find -maxdepth 1 -type f -print0) > results.out 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-11-26T13:51:43.630

您可以使用`xarg`：

```
ls | xargs -L 1 -d '\n' your-desired-command 
```

*   `-L 1`导致一次通过 1 个项目

*   `-d '\n'``ls`根据新行拆分输出。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-02-09T18:03:14.560

有时完成工作的一种快速而肮脏的方法是：

```
find directory/ | xargs  Command 
```

例如，要查找当前目录中所有文件的行数，您可以执行以下操作：

```
find . | xargs wc -l 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-25T08:13:17.837

基于@Jim Lewis 的方法：

`find`这是一个使用文件并按修改日期排序文件的快速解决方案：

```
$ find  directory/ -maxdepth 1 -type f -print0 | \
  xargs -r0 stat -c "%y %n" | \
  sort | cut -d' ' -f4- | \
  xargs -d "\n" -I{} cmd -op1 {} 
```

排序参见：

[http://www.commandlinefu.com/commands/view/5720/find-files-and-list-them-sorted-by-modification-time](http://www.commandlinefu.com/commands/view/5720/find-files-and-list-them-sorted-by-modification-time)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-11-01T21:57:44.470

**我需要将所有 .md 文件从一个目录复制到另一个目录，所以这就是我所做的。**

`for i in **/*.md;do mkdir -p ../docs/"$i" && rm -r ../docs/"$i" && cp "$i" "../docs/$i" && echo "$i -> ../docs/$i"; done`

**这很难阅读，所以让我们分解一下。**

首先 cd 进入包含文件的目录，

`for i in **/*.md;`对于您的模式中的每个文件

`mkdir -p ../docs/"$i"`在包含您的文件的文件夹之外的 docs 文件夹中创建该目录。这会创建一个与该文件同名的额外文件夹。

`rm -r ../docs/"$i"`删除由于以下原因而创建的额外文件夹`mkdir -p`

`cp "$i" "../docs/$i"`复制实际文件

`echo "$i -> ../docs/$i"`回应你所做的

`; done`从此过上幸福的生活

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-06-11T12:35:49.820

## 最大深度

我发现它与*[吉姆刘易斯的答案](https://stackoverflow.com/a/10523492/4058484)*很好地配合，只需添加如下内容：

```
$ export DIR=/path/dir && cd $DIR && chmod -R +x *
$ find . -maxdepth 1 -type f -name '*.sh' -exec {} \; > results.out 
```

## 排序

如果要按排序顺序执行，修改如下：

```
$ export DIR=/path/dir && cd $DIR && chmod -R +x *
find . -maxdepth 2 -type f -name '*.sh' | sort | bash > results.out 
```

仅举个例子，这将按以下顺序执行：

```
bash: 1: ./assets/main.sh
bash: 2: ./builder/clean.sh
bash: 3: ./builder/concept/compose.sh
bash: 4: ./builder/concept/market.sh
bash: 5: ./builder/concept/services.sh
bash: 6: ./builder/curl.sh
bash: 7: ./builder/identity.sh
bash: 8: ./concept/compose.sh
bash: 9: ./concept/market.sh
bash: 10: ./concept/services.sh
bash: 11: ./product/compose.sh
bash: 12: ./product/market.sh
bash: 13: ./product/services.sh
bash: 14: ./xferlog.sh 
```

## 无限深度

如果你想在特定条件下无限深度执行，你可以使用这个：

```
export DIR=/path/dir && cd $DIR && chmod -R +x *
find . -type f -name '*.sh' | sort | bash > results.out 
```

然后放在子目录中的每个文件的顶部，如下所示：

```
#!/bin/bash
[[ "$(dirname `pwd`)" == $DIR ]] && echo "Executing `realpath $0`.." || return 
```

以及父文件正文中的某处：

```
if <a condition is matched>
then
    #execute child files
    export DIR=`pwd`
fi 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-16T07:37:34.843

我认为简单的解决方案是：

```
sh /dir/* > ./result.txt 
```**

# sql-server - SQL Server 2008 r2，将 int 转换为十进制时遇到问题

> ID：10523416
> 
> 赞同：0
> 
> 时间：2012-05-09T20:12:44.003
> 
> 标签：sql-server, sql-server-2008-r2

我正在尝试做看似基本的 int 到小数的转换，但它不起作用。我已经尝试在插入之前执行演员表，没有更好的。我想使用十进制值来显示百分比变化。代码如下，连同输出。任何帮助都会很棒..

```
DECLARE @tblVar TABLE (LatestCount INT, PriorCount INT, 
                       PctChgLatestVsPrior DECIMAL, PctChgLatestVsAvg DECIMAL)

DECLARE @tbl CHAR(30)
DECLARE @dte DATE
DECLARE @dte2 DATE
DECLARE @latestCount INT
DECLARE @priorCount INT
DECLARE @avgAllCounts INT

SET @tbl = 'tblDailyPricingAndVol'
SET @dte = '5/8/12'
SET @dte2 = '5/7/12'

EXEC spAvgOfCountByDateAddedByTable @tbl, @avg = @avgAllCounts OUTPUT
EXEC spCountOfDateAddedByTableAndDate @tbl, @dte, @count = @latestCount OUTPUT
EXEC spCountOfDateAddedByTableAndDate @tbl, @dte2, @count = @priorCount OUTPUT

INSERT INTO @tblVar 
VALUES (@latestCount, @priorCount, 
    CAST((@latestCount-@priorCount) AS DECIMAL)/CAST(@priorCount AS DECIMAL), 
    CAST((@latestCount-@avgAllCounts) AS DECIMAL)/CAST(@avgAllCounts AS DECIMAL))

SELECT * FROM @tblVar 
```

输出：

```
19548
7107
8483

LatestCount PriorCount  PctChgLatestVsPrior PctChgLatestVsAvg
7107        8483        0                   -1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T20:15:15.367

您需要提供小数刻度/精度

请参阅此处：[未指定精度和小数位数时的小数和数字问题](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/decimal-and-numeric-problems-when-you-do)

一些示例：DECIMAL(30,10) 或 DECIMAL(20)

在在线书籍[http://msdn.microsoft.com/en-us/library/ms187746.aspx中查看更多信息](http://msdn.microsoft.com/en-us/library/ms187746.aspx)

# android - 我们可以在android的tablelayout中减小tablerow的大小吗？

> ID：10523418
> 
> 赞同：0
> 
> 时间：2012-05-09T20:12:49.567
> 
> 标签：android, height, row, tablelayout

对于计算器应用程序，我有 40 个按钮和一个 EditText 视图，但并非所有都适合模拟器。我想知道是否可以减小表格行的大小。

如果不可能，还有其他方法吗？

这是表格的代码

```
 <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="8dp"       
        >       
               <Button
            android:id="@+id/b1"
            android:text="("
            />

               <Button 
            android:id="@+id/b3"
            android:text=")"
            />
               <Button 
            android:id="@+id/b4"
            android:text="+-"
            />
               <Button 
            android:id="@+id/b5"
            android:text="√"
            />
               <Button 
                android:id="@+id/b24"
                android:text="n!"                   
             />                   
    </TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:25:46.867

不要固定表格行的高度，只需将所有表格行放在方向为垂直的线性布局中，并将所有表格行的**layout_weight**设置为 1。

# java - 生成文件的数字签名

> ID：10523419
> 
> 赞同：0
> 
> 时间：2012-05-09T20:12:53.157
> 
> 标签：java, file, input, digital-signature

我目前正在尝试制作一个可以对任何类型的文档进行数字签名的应用程序。我已经根据[本教程](http://docs.oracle.com/javase/tutorial/security/apisign/step1.html)声明了 GenSig 类。但是在我的应用程序中应该有用于文件输入的 GUI。所以我有;

```
File file = jFileChooser2.getSelectedFile();

FileInputStream fin = new FileInputStream(file);
byte fileContent[] = new byte[(int)file.length()];
fin.read(fileContent);            

String strFileContent = new String(fileContent);           

GenSig gensig = new GenSig();        
GenSig.main(strFileContent); 
```

它在网上给我一个错误，`GenSig.main(strFileContent);`变量应该`String[] args`根据[GenSig 类的整个源代码，](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/security/apisign/examples/GenSig.java)所以我无法编译应用程序。我假设问题出在字符串的类型上，它不是数组，但我不知道哪个数组，来自 File 对象的哪个变量，我已经在第一行声明了，我需要用作输入。

我知道我做错了什么，不幸的是在 Java 中我只是初学者，所以我需要一些帮助。

*   **我应该从文件对象中插入什么变量作为 GenSig 类的输入？**

*   **有没有更简单的方法可以在 Java 中签署文档？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:25:31.787

如果您按照本教程进行操作，那么您应该将要“签名”的文件名作为参数传递：

```
final File file = jFileChooser2.getSelectedFile();
GenSig.main(new String[] {file.getAbsolutePath()}); 
```

请注意，您实际上不需要创建`GenSig`类的实例，因为您正在静态调用 main 方法。

# visual-c++ - Visual C++ CUSTOMBUILD：错误：附加包含文件 afxhh.h

> ID：10523421
> 
> 赞同：1
> 
> 时间：2012-05-09T20:13:17.387
> 
> 标签：visual-c++, mfc

我正在尝试在 Visual Studio 2010 Express Edition 中编译 Visual C++ 应用程序，但将错误提示为“CUSTOMBUILD：错误：附加包含文件 afxhh.h”时失败。期待一些帮助来解决它....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:12:14.310

Visual Studio 的 Express 版本不包括 MFC 库。您将无法编译依赖 MFC 标头的应用程序，例如`afxhh.h`.

AFX（应用程序框架扩展）是 MFC 在开发期间的原始名称，该名称作为许多函数和头文件的前缀。

为了开发 MFC 应用程序，您需要购买完整版的 Visual Studio。

# java - 从响应中获取参数 - Java

> ID：10523422
> 
> 赞同：0
> 
> 时间：2012-05-09T20:13:21.743
> 
> 标签：java, parameters, response

您好，感谢您花时间回答我的问题。

我是一名 .NET 人员，最近为了这份新工作改用 Java。我需要实现一个支付网关，我正在使用银行提供的 API。那里说我需要向带有给定参数的 url 发送一个发布请求，并且在响应中我会得到一些参数，基于这些参数我需要采取进一步的行动。我知道如何使用 C# 和 .NET 做到这一点，但想知道使用 Java 的方法是什么？对我来说似乎不是很直观。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:34:38.777

我假设您在发送请求后会返回一个对象。您可以检查该对象中字段的值并对其执行 if。

因此，如果您在发送请求后得到一个对象 obj 。

```
if(obj.getX() == y){
    doSomething();
}else{
    doSomethingElse();
} 
```

# smartcard - 如何更新超过 32KB 限制的智能卡 EF？

> ID：10523423
> 
> 赞同：0
> 
> 时间：2012-05-09T20:13:26.093
> 
> 标签：smartcard

我正在尝试更新 64K 的 EF（基本文件）。我知道透明 EF 有 32767 的限制。

我创建了一个 update_binary 函数来写入卡的 EF。但是，它仅适用于 32767 规范。有没有人这样做过，更新整个64K EF。如果是这样，你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:42:52.020

`UPDATE BINARY ODD INS`如果特定智能卡操作系统已实施，您可以使用 ISO 7816-4 中的 (INS = D7h) 更新 EF 。在这种情况下，您需要在 BER 编码数据对象 (DO) 中提供偏移量。

请参阅[此问题/答案](https://stackoverflow.com/questions/5938004/updating-binary-data-on-a-smartcard-on-an-offset-higher-than-32767)以了解命令的格式，或查看供应商文档（如果有的话，很少有操作系统完全实现 ISO 7816-4，而且很多都会出错）。当然，购买 ISO 7816-4 也是一种选择。

# java - java中的文件重复

> ID：10523424
> 
> 赞同：1
> 
> 时间：2012-05-09T20:13:26.047
> 
> 标签：java, swing, file, jlist

我`JList`使用. `JFileChooser`_ `vector`我试图通过检查特定文件是否可用来系统地完成它`JList`。例如，如果我添加一个名为“abc.xml”的文件，我会立即检查该文件是否存在`JList`。

另外我想检查文件是否只重复一次。如果重复多次（'abc.xml', 'abc.xml',...），应该有错误信息表明文件被多次添加。

我在这里发布我的完整代码；

```
 public Test() 
{
    setTitle("EXAMPLE");
    getContentPane().setLayout(new MigLayout("", "[][][][][grow][][][][][][][]
               [][][grow][grow][][][grow][][][][][][][grow]", "[][][][][][][][grow]
              [grow][][][][][][][grow][]"));

    final JFileChooser fileChooser = new JFileChooser();
    fileChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
    fileChooser.setMultiSelectionEnabled(true);
    getContentPane().add(fileChooser, "cell 0 1 3 16");

    JScrollPane scrollPane = new JScrollPane();
    getContentPane().add(scrollPane, "cell 23 2 3 15,grow");

    vector = new Vector<File>();
    final JList list = new JList(vector);
    scrollPane.setViewportView(list);

    JButton btnNewButton = new JButton(" Add          ");
    btnNewButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            for (File file : fileChooser.getSelectedFiles()) {
                        vector.addElement(file);
                 }
                //System.out.println("Added..!!");
                list.updateUI();

            }
    });
    getContentPane().add(btnNewButton, "cell 4 0");

    JButton btnNewButton_1 = new JButton(" Remove   ");
    btnNewButton_1.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if(list.getSelectedIndices().length > 0) {
                  int[] selectedIndices = list.getSelectedIndices();
                  for (int i = selectedIndices.length-1; i >=0; i--) {
                        vector.removeElementAt(i);
                    } 
                   }
                    //System.out.println("Removed..!!");
                    list.updateUI();

        }   
        });
    getContentPane().add(btnNewButton_1, "cell 4 2");

    JButton btnNewButton_2 = new JButton(" Check       ");
    btnNewButton_2.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            ***File file = fileChooser.getSelectedFile();
            boolean found = false;
            for (File f : vector) {
                 if (file.getName().equals(f.getName())) {
                     found = true;
                     break;
                 }
            }
            if (!found) {
                vector.add(file);
                fireIntervalAdded(this, vector.size()-1, vector.size()-1);
            } else {
                // Abusive usage of an exception
                JOptionPane.showMessageDialog(null, "File " + file.getName() + " 
                already added");

            }***
         });

           public static void main(String args[]) {        
          // Create an instance of the test application         
           Test mainFrame = new Test();        
           mainFrame.pack();         
           mainFrame.setVisible(true);     
  } 
```

我得到的是，一个消息框告诉即使文件只出现一次，文件也已添加。

我期望的是，当文件被添加一次时，它不应该显示任何东西。但是当它被添加不止一次时，它才应该显示一个文件已经添加的消息。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:36:20.297

好的，这是您描述的示例。我不太确定拒绝添加文件的条件是什么。这是基于名称的，但我想知道您是否不是在寻找`File.equals()`using first `getCanonicalFile()`。我也在代码的注释中展示了这一点。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.util.Vector;

import javax.swing.AbstractListModel;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class Test {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }

    public static class MyListModel extends AbstractListModel {

        private Vector<File> files = new Vector<File>();

        public void addFilesToModel(File[] f) {
            for (File file : f) {
                addFileToModel(file);
            }
        }

        public void addFileToModel(File file) throws IllegalArgumentException {
            boolean found = false;
            // file = file.getCanonicalFile();
            for (File file2 : files) {
                // file2.getCanonicalFile().equals(file) + throw IOException
                if (file2.getName().equals(file.getName())) {
                    found = true;
                    break;
                }
            }
            if (!found) {
                files.add(file);
                fireIntervalAdded(this, files.size() - 1, files.size() - 1);
            } else {
                // Abusive usage of an exception
                throw new IllegalArgumentException("File " + file.getName() + " already added");
            }
        }

        @Override
        public int getSize() {
            return files.size();
        }

        @Override
        public Object getElementAt(int index) {
            return files.get(index);
        }

    }

    private static File lastFolder;

    protected static void initUI() {
        JFrame frame = new JFrame("test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        final MyListModel model = new MyListModel();
        JList list = new JList(model);
        final JButton button = new JButton("Add files...");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JFileChooser chooser = new JFileChooser();
                if (lastFolder != null) {
                    chooser.setCurrentDirectory(lastFolder);
                }
                chooser.setMultiSelectionEnabled(true);
                chooser.showDialog(button, "Add files");
                if (chooser.getSelectedFiles() != null) {
                    for (File file : chooser.getSelectedFiles()) {
                        try {
                            model.addFileToModel(file);
                        } catch (IllegalArgumentException e1) {
                            JOptionPane.showMessageDialog(button, e1.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
                        }
                    }
                    lastFolder = chooser.getCurrentDirectory();
                }
            }
        });
        panel.add(new JScrollPane(list));
        panel.add(button);
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

编辑

* * *

除了您的代码不完整这一事实之外，我还设法对其进行了安排并使其工作，但它确实远非完美。我也摆脱了 MigLayout，因为它需要一个额外的库。随意放回去。

```
import java.awt.Component;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.util.Vector;

import javax.swing.AbstractListModel;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class Test extends JFrame {

    Vector<File> vector;
    JPanel root;
    private MyListModel model;

    public class MyListModel extends AbstractListModel {

        public void addFilesToModel(File[] f) {
            for (File file : f) {
                addFileToModel(file);
            }
        }

        public void addFileToModel(File file) throws IllegalArgumentException {
            boolean found = false;
            // file = file.getCanonicalFile();
            for (File file2 : vector) {
                // file2.getCanonicalFile().equals(file) + throw IOException
                if (file2.getName().equals(file.getName())) {
                    found = true;
                    break;
                }
            }
            if (!found) {
                vector.add(file);
                fireIntervalAdded(this, vector.size() - 1, vector.size() - 1);
            } else {
                // Abusive usage of an exception
                throw new IllegalArgumentException("File " + file.getName() + " already added");
            }
        }

        public void removeFileFromModel(File file) throws IllegalArgumentException {
            int index = vector.indexOf(file);
            File removed = vector.remove(index);
            if (removed != null) {
                fireIntervalRemoved(this, index, index);
            } else {
                // Nothing was removed
            }
        }

        public void removeFilesFromModel(File[] files) {
            for (File f : files) {
                removeFileFromModel(f);
            }
        }

        @Override
        public int getSize() {
            return vector.size();
        }

        @Override
        public Object getElementAt(int index) {
            return vector.get(index);
        }

    }

    public Test() {
        super("EXAMPLE");
        root = new JPanel(new GridBagLayout());
        vector = new Vector<File>();
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridheight = 2;
        getContentPane().add(root);
        final JFileChooser fileChooser = new JFileChooser();
        fileChooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
        fileChooser.setMultiSelectionEnabled(true);
        root.add(fileChooser, gbc);
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.ipadx = 5;
        gbc.ipady = 5;
        gbc.gridheight = 1;
        gbc.gridwidth = 3;
        gbc.gridx = 1;

        vector = new Vector<File>();
        model = new MyListModel();
        final JList list = new JList(model);
        JScrollPane scrollPane = new JScrollPane(list);
        root.add(scrollPane, gbc);
        gbc.gridwidth = 1;
        gbc.weightx = 0;
        gbc.weighty = 0;
        gbc.anchor = GridBagConstraints.CENTER;
        final JButton btnNewButton = new JButton("Add");
        btnNewButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                for (File file : fileChooser.getSelectedFiles()) {
                    try {
                        model.addFileToModel(file);
                    } catch (IllegalArgumentException e1) {
                        showError(btnNewButton, file);
                    }
                }
            }
        });
        gbc.gridy = 1;
        root.add(btnNewButton, gbc);

        JButton btnNewButton_1 = new JButton("Remove");
        btnNewButton_1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (list.getSelectedIndices().length > 0) {
                    for (Object file : list.getSelectedValues()) {
                        model.removeFileFromModel((File) file);
                    }
                }
            }
        });
        gbc.gridx++;
        root.add(btnNewButton_1, gbc);

        final JButton btnNewButton_2 = new JButton("Check");
        btnNewButton_2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                File file = fileChooser.getSelectedFile();
                boolean found = false;
                for (File f : vector) {
                    if (file.getName().equals(f.getName())) {
                        found = true;
                        break;
                    }
                }
                if (found) {
                    showError(btnNewButton_2, file);
                } else {
                    JOptionPane.showMessageDialog(btnNewButton_2, "File " + file.getAbsolutePath() + " is not in the list yet");
                }
            }

        });
        gbc.gridx++;
        root.add(btnNewButton_2, gbc);
    }

    private void showError(Component parent, File file) {
        JOptionPane.showMessageDialog(parent, "File " + file.getName() + " already added");
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Test mainFrame = new Test();
                mainFrame.pack();
                mainFrame.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:53:19.023

```
vector.contains(fileName) 
```

先从那个开始？

# exception-handling - 服务器端的 DWR 异常处理

> ID：10523429
> 
> 赞同：0
> 
> 时间：2012-05-09T20:13:42.680
> 
> 标签：exception-handling, dwr, server-side-validation

客户端有 DWR 异常处理的文档：

[http://directwebremoting.org/dwr/documentation/browser/errors.html](http://directwebremoting.org/dwr/documentation/browser/errors.html)

但我正在寻找 DWR 服务器端异常处理的文档。基本上我遇到的问题是：详细错误（堆栈跟踪）返回到客户端，暴露 Web 应用程序详细信息。需要确保没有堆栈跟踪返回给客户端。

DWR 版本：3.0

有关 DWR 的服务器端异常处理的任何指针？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T10:44:47.947

在这种情况下，我会用 try/catch 块包装异常。问题是：你应该在哪里做？

嗯，DWR 有一个过滤器机制，它很像 Java Servlet API 中的过滤器。

你可以这样写：

```
public class ExceptionFilter implements org.directwebremoting.AjaxFilter {
  public Object doFilter(Object obj, Method method, Object[] params, AjaxFilterChain chain) throws Exception {
    Object res;
    try{
      res = chain.doFilter(obj, method, params);
    } catch(Exception e){
      // throw your Exception with no "extra" data
      throw new RuntimeException();
    }
    return res;
  }
} 
```

您可能需要在 dwr.xml 文件中进行一些配置（我留给您阅读：[http](http://directwebremoting.org/dwr/documentation/server/configuration/dwrxml/filters.html) ://directwebremoting.org/dwr/documentation/server/configuration/dwrxml/filters.html ）

（编辑1）更多解释：

它的作用是拦截 DWR 远程调用并将调用转发到执行链。我添加到该调用（chain.doFilter）的是一个 try/catch 块；如果您的代码应该抛出任何异常，它将最终出现在 catch 块中，然后由您决定下一步该做什么。

我希望这能帮到您 ：]

# ios - ContainerViewController popView 中的 UINavigationController 很时髦

> ID：10523430
> 
> 赞同：4
> 
> 时间：2012-05-09T20:13:44.063
> 
> 标签：ios, view, controller, navigation, containers

所以我有一个 containerView 控制器，它基本上就像 splitViewController 一样。

我正在尝试在 containerViewController 中添加一个 UINavigationController，它工作得很好。

我在情节提要中创建了一个 UINavigationController，其中连接了一堆 UIViewController，所有这些都通过“推送”segues 连接在一起。我从情节提要中取出这个 NavigationController，通过代码将它粘贴到我的 ContainerViewController 中。然后它显示 NavigationController 应该在哪里，我可以单击按钮，并且推送动画仅发生在 ContainerViewController 的 NavigationController 框架内。

但是，如果我从 NavigationController 上的代码调用 popViewController，它将为整个 ContainerViewController 设置动画。我不想要，我希望它只为 NavigationController 设置动画。

有谁知道它为什么这样做？

当你在 ContainerViewController 中有一个 UINavigationController，然后你可以在 NavigationController 上 popViewController，你如何让它只动画 UINavigationController 而不是它所在的整个 ContainerViewController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T15:56:26.210

我也遇到过这个问题。它也影响了我的推动。我的解决方法是使用代码而不是故事板 segues。

```
- (void) switchToView:(NSString *)identifier {
    UIViewController *target = [self getOrCreateViewController:identifier];
    [self switchToViewController:target identifier:identifier];
}

// If you need to interact with the VC before it is pushed break it into 2 step process
- (UIViewController *) getOrCreateViewController:(NSString *)identifier {
    NSArray *children = [self.viewControllers filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"restorationIdentifier == %@", identifier, nil]];
    UIViewController *target = (children.count > 0 ? children[0] : [self.storyboard instantiateViewControllerWithIdentifier:identifier]);
    return target;
}

// For my use case, I always animate via push. Could modify this to pop/push as appropriate
- (void) switchToViewController:(UIViewController *)target identifier:(NSString *)identifier {
    [self setViewControllers:[self.viewControllers filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"restorationIdentifier != %@", identifier, nil]] animated:NO];
    [self pushViewController:target animated:YES];

} 
```

我知道有点丑陋的解决方法......希望我能找到一个更好的答案（在这里寻找一个）。:-)

# linux - 退出 Bash 模式？

> ID：10523431
> 
> 赞同：3
> 
> 时间：2012-05-09T20:13:44.607
> 
> 标签：linux, bash

我很抱歉提出这样一个愚蠢的问题，但我的 linux 服务器卡在“bash”模式下。当我通过终端登录时，我的命令行如下所示：

```
-bash-3.2$ 
```

因此，我无法执行其他命令。如果我输入“exit”，它会关闭终端窗口。如何退出此 bash 模式以便输入命令？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:40:01.940

尝试运行命令`reset`，您可能已经搞砸了会话。

尝试运行`tput setb 6`将 bgcolor 更改为深红色。如果它有效，那么你的设置就搞砸了：

如果您没有在没有适当知识的情况下围绕您的系统配置扎根，很可能是这样的：`rm ~/.bashrc`

`CTRL+ALT+F2`会把你从 X-Windows 系统中拉出来，然后把你关进控制台。如果那里的事情不能正常工作......你把事情搞砸了。请咨询 NIX 用户论坛以获取有关此主题的帮助，因为它不是真正的编程问题。

[http://www.unix.stackexchange.com/](http://www.unix.stackexchange.com/)

哦，`tput setb 0`将恢复您的默认背景颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-18T10:05:57.930

如果这不是您想要的外壳，您可以随时输入例如。`zsh`，`tcsh`或此 bash 会话中的任何内容以进入您选择的 shell。

在更持久的基础上，您选择的外壳与您的用户帐户相关联。检查`/etc/passwd`，您会发现每一行的最后一项定义了用户使用的 shell。您的可能设置为`/bin/sh`或`/bin/bash`。

您可能有一个 GUI 配置工具，例如 Ubuntu 上的“用户和组”，您可以在其中设置默认 shell。

对这些设置的任何更改都会在您下次登录时生效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T20:15:54.607

Bash 是一个命令行解释器。这是在 linux 系统上运行命令的一种方式。

你是说它不允许你运行你输入的命令吗？当您使用 bash 运行命令时，它会给出什么错误或响应？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-10T02:01:41.907

您应该检查自己路径中的两个文件：`.bash_profile`和`.bashrc`

确保它们的格式正确。

# php - 带有 5 个下拉列表的 Ajax

> ID：10523432
> 
> 赞同：2
> 
> 时间：2012-05-09T20:13:46.400
> 
> 标签：php, javascript, ajax

我有一个包含 5 个下拉列表的表单，这些下拉列表是由 PHP 查询 MySql 数据库创建的。列表正在正确构建。

我希望用户能够从列表中进行选择，并根据所选值填写底部的表格。

它适用于第一个列表。

这是列表 1 中的代码

```
<td width="90">
<p><select size="1" name="D1" onchange="showStudent(this.value);"> 
 <?php while(list($id, $student_id)=mysql_fetch_row($result1)) {
 echo "
<option value=\"".$student_id."\">".$student_id."</option>";
 }
 ?>
 </select></p>
 </td> 
```

这是列表 2 中的代码

```
<td>
<p><select size="1" name="D2" onchange=”showStudent(this.value);” >
<?php while(list($id, $student_id)=mysql_fetch_row($result2)) {
echo "
<option value=\"".$student_id."\">".$student_id."</option>";
 }
 ?>
</select></p>
</td> 
```

这是javascript代码

```
<script type="text/javascript">
function CreateXmlHttpObject() { //function to return the xml http object
    var xmlhttp=false;  
    try{
        xmlhttp=new XMLHttpRequest();//creates a new ajax object
    }
    catch(e)    {       
        try{            
            xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");//this is for IE browser
        }
        catch(e){
            try{
            req = new ActiveXObject("Msxml2.XMLHTTP");//this is for IE browser
            }
            catch(e1){
                xmlhttp=false;//error creating object
            }
        }
    }

    return xmlhttp;
}

function showStudent(str)
{
//  alert("Made it to show students"+ str);
if (str=="")
{
document.getElementById("student_data").innerHTML="";
 return;
}
if (window.XMLHttpRequest)
 {// code for IE7+, Firefox, Chrome, Opera, Safari
 xmlhttp=new XMLHttpRequest();
 }
else
 {// code for IE6, IE5
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
 xmlhttp.onreadystatechange=function()
 {
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("student_data").innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open("GET","editstudent.php?d="+str,true);
xmlhttp.send();
}

</script> 
```

如果我从第一个列表中选择，一切正常。但是，如果我从列表 2-5 中选择，则什么也没有。即使我先从其中一个中选择。我什至尝试更改函数的名称以匹配特定的列表名称，但仍然只有第一个有效。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:28:16.507

我相信这是因为您在第二个列表的 html 中的 onchange 周围有错误的双引号标签？`=”showStudent(this.value);” >`应该`="showStudent(this.value);" >`

这些奇怪的引用标签通常来自 word、outlook 或其他办公应用程序的复制/粘贴。他们很容易被忽视！

# javascript - 页面重新加载后，如何使用 twitter bootstrap 保持当前选项卡处于活动状态？

> ID：10523433
> 
> 赞同：87
> 
> 时间：2012-05-09T20:13:47.780
> 
> 标签：javascript, jquery, twitter-bootstrap

我目前正在使用带有 Twitter Bootstrap 的选项卡，并希望在用户发布数据并重新加载页面后选择相同的选项卡。

这是怎么做到的？

我当前对 inti 选项卡的调用如下所示：

```
<script type="text/javascript">

$(document).ready(function() {

    $('#profileTabs a:first').tab('show');
});
</script> 
```

我的标签：

```
<ul id="profileTabs" class="nav nav-tabs">
    <li class="active"><a href="#profile" data-toggle="tab">Profile</a></li>
    <li><a href="#about" data-toggle="tab">About Me</a></li>
    <li><a href="#match" data-toggle="tab">My Match</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-05-09T21:59:29.607

您必须使用 localStorage 或 cookie 来管理它。这是一个可以大大改进的快速而肮脏的解决方案，但可以为您提供一个起点：

```
$(function() { 
    // for bootstrap 3 use 'shown.bs.tab', for bootstrap 2 use 'shown' in the next line
    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
        // save the latest tab; use cookies if you like 'em better:
        localStorage.setItem('lastTab', $(this).attr('href'));
    });

    // go to the latest tab, if it exists:
    var lastTab = localStorage.getItem('lastTab');
    if (lastTab) {
        $('[href="' + lastTab + '"]').tab('show');
    }
}); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-19T21:55:19.640

使用 cookie 使其工作，并从任何其他选项卡和选项卡窗格中删除“活动”类......并将“活动”类添加到当前选项卡和选项卡窗格。

我确信有更好的方法可以做到这一点，但这似乎在这种情况下有效。

需要 jQuery cookie 插件。

```
$(function() { 
  $('a[data-toggle="tab"]').on('shown', function(e){
    //save the latest tab using a cookie:
    $.cookie('last_tab', $(e.target).attr('href'));
  });

  //activate latest tab, if it exists:
  var lastTab = $.cookie('last_tab');
  if (lastTab) {
      $('ul.nav-tabs').children().removeClass('active');
      $('a[href='+ lastTab +']').parents('li:first').addClass('active');
      $('div.tab-content').children().removeClass('active');
      $(lastTab).addClass('active');
  }
}); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-06-07T12:55:41.737

所有其他答案都是正确的。这个答案将考虑到一个人可能有多个`ul.nav.nav-pills`或`ul.nav.nav-tabs`在同一页面上的事实。在这种情况下，之前的答案将失败。

仍在使用`localStorage`但将字符串`JSON`化为值。这是代码：

```
$(function() {
  var json, tabsState;
  $('a[data-toggle="pill"], a[data-toggle="tab"]').on('shown', function(e) {
    var href, json, parentId, tabsState;

    tabsState = localStorage.getItem("tabs-state");
    json = JSON.parse(tabsState || "{}");
    parentId = $(e.target).parents("ul.nav.nav-pills, ul.nav.nav-tabs").attr("id");
    href = $(e.target).attr('href');
    json[parentId] = href;

    return localStorage.setItem("tabs-state", JSON.stringify(json));
  });

  tabsState = localStorage.getItem("tabs-state");
  json = JSON.parse(tabsState || "{}");

  $.each(json, function(containerId, href) {
    return $("#" + containerId + " a[href=" + href + "]").tab('show');
  });

  $("ul.nav.nav-pills, ul.nav.nav-tabs").each(function() {
    var $this = $(this);
    if (!json[$this.attr("id")]) {
      return $this.find("a[data-toggle=tab]:first, a[data-toggle=pill]:first").tab("show");
    }
  });
}); 
```

这个位可以在整个应用程序的所有页面上使用，并且适用于选项卡和药丸。此外，**请确保默认情况下选项卡或药丸未处于活动状态**，否则您将在页面加载时看到闪烁效果。

**重要提示**：确保父母`ul`有一个 id。谢谢阿兰

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-09-17T08:57:56.460

为了获得最佳选择，请使用以下技术：

```
$(function() { 
  //for bootstrap 3 use 'shown.bs.tab' instead of 'shown' in the next line
  $('a[data-toggle="tab"]').on('click', function (e) {
    //save the latest tab; use cookies if you like 'em better:
    localStorage.setItem('lastTab', $(e.target).attr('href'));
  });

  //go to the latest tab, if it exists:
  var lastTab = localStorage.getItem('lastTab');

  if (lastTab) {
    $('a[href="'+lastTab+'"]').click();
  }
}); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-09-26T11:26:44.117

我更喜欢将选定的选项卡存储在窗口的哈希值中。这也可以将链接发送给同事，他们不会看到“相同”的页面。诀窍是在选择另一个选项卡时更改位置的哈希值。如果您已经在页面中使用 #，则可能必须拆分井号标签。在我的应用程序中，我使用“：”作为哈希值分隔符。

```
<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#home">Home</a></li>
    <li><a href="#profile">Profile</a></li>
    <li><a href="#messages">Messages</a></li>
    <li><a href="#settings">Settings</a></li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="home">home</div>
    <div class="tab-pane" id="profile">profile</div>
    <div class="tab-pane" id="messages">messages</div>
    <div class="tab-pane" id="settings">settings</div>
</div>

<script>
    $('#myTab a').click(function (e) {
        e.preventDefault()
        $(this).tab('show')
    });

    // store the currently selected tab in the hash value
    $("ul.nav-tabs > li > a").on("shown.bs.tab", function (e) {
        var id = $(e.target).attr("href").substr(1);
        window.location.hash = id;
    });

    // on load of the page: switch to the currently selected tab
    var hash = window.location.hash;
    $('#myTab a[href="' + hash + '"]').tab('show');
</script> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-15T13:36:11.210

防止页面在第一个选项卡上闪烁，然后在 cookie 保存的选项卡上闪烁（当您在第一个选项卡中默认确定类“活动”时会发生这种情况）

删除选项卡和窗格的“活动”类，例如：

```
<ul class="nav nav-tabs">
<div id="p1" class="tab-pane"> 
```

将下面的脚本设置为默认的第一个选项卡（需要 jQuery cookie 插件）

```
 $(function() { 
        $('a[data-toggle="tab"]').on('shown', function(e){
            //save the latest tab using a cookie:
            $.cookie('last_tab', $(e.target).attr('href'));
        });
        //activate latest tab, if it exists:
        var lastTab = $.cookie('last_tab');
        if (lastTab) {
            $('a[href=' + lastTab + ']').tab('show');
        }
        else
        {
            // Set the first tab if cookie do not exist
            $('a[data-toggle="tab"]:first').tab('show');
        }
    }); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-06-26T20:25:24.110

我在多个页面中有标签，localStorage 也保留了前一页的 lastTab，所以对于下一页，由于它在存储中有前一页的 lastTab，它在这里没有找到任何匹配的标签，所以没有显示任何内容。我是这样修改的。

```
$(document).ready(function(){
    //console.log($('a[data-toggle="tab"]:first').tab('show'))
    $('a[data-toggle="tab"]').on('shown.bs.tab', function () {
        //save the latest tab; use cookies if you like 'em better:
        localStorage.setItem('lastTab', $(this).attr('href'));
    });

    //go to the latest tab, if it exists:
    var lastTab = localStorage.getItem('lastTab');
    if ($('a[href=' + lastTab + ']').length > 0) {
        $('a[href=' + lastTab + ']').tab('show');
    }
    else
    {
        // Set the first tab if cookie do not exist
        $('a[data-toggle="tab"]:first').tab('show');
    }
}) 
```

**编辑：**我注意到我必须`lastTab`为不同的页面使用不同的变量名，否则，它们总是会相互覆盖。例如`lastTab_klanten`，`lastTab_bestellingen`等，用于两个不同的页面`klanten`，并且`bestellingen`都在选项卡中显示数据。

```
$(document).ready(function(){
    //console.log($('a[data-toggle="tab"]:first').tab('show'))
    $('a[data-toggle="tab"]').on('shown.bs.tab', function () {
        //save the latest tab; use cookies if you like 'em better:
        localStorage.setItem('lastTab_klanten', $(this).attr('href'));
    });

    //go to the latest tab, if it exists:
    var lastTab_klanten = localStorage.getItem('lastTab_klanten');
    if (lastTab_klanten) {
        $('a[href=' + lastTab_klanten + ']').tab('show');
    }
    else
    {
        // Set the first tab if cookie do not exist
        $('a[data-toggle="tab"]:first').tab('show');
    }
}) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-09-22T07:31:10.110

想要褪色效果？@Oktav 代码的更新版本：

1.  对于引导程序 3
2.  在 li 和 tab 的 div 上设置类以使淡入淡出正常工作。请注意，所有内容 div 都需要`class="tab-pane fade"`

代码：

```
// See http://stackoverflow.com/a/16984739/64904
// Updated by Larry to setup for fading
$(function() {
  var json, tabsState;
  $('a[data-toggle="pill"], a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
    var href, json, parentId, tabsState;
    tabsState = localStorage.getItem("tabs-state");
    json = JSON.parse(tabsState || "{}");
    parentId = $(e.target).parents("ul.nav.nav-pills, ul.nav.nav-tabs").attr("id");
    href = $(e.target).attr('href');
    json[parentId] = href;
    return localStorage.setItem("tabs-state", JSON.stringify(json));
  });
  tabsState = localStorage.getItem("tabs-state");
  json = JSON.parse(tabsState || "{}");
  $.each(json, function(containerId, href) {
    var a_el = $("#" + containerId + " a[href=" + href + "]");
    $(a_el).parent().addClass("active");
    $(href).addClass("active in");
    return $(a_el).tab('show');
  });
  $("ul.nav.nav-pills, ul.nav.nav-tabs").each(function() {
    var $this = $(this);
    if (!json[$this.attr("id")]) {
      var a_el = $this.find("a[data-toggle=tab]:first, a[data-toggle=pill]:first"),
          href = $(a_el).attr('href');
      $(a_el).parent().addClass("active");
      $(href).addClass("active in");
      return $(a_el).tab("show");
    }
  });
}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-08-13T15:45:19.983

我使它与@dgabriel 使用类似的解决方案，在这种情况下，链接`<a>`不需要`id`，它根据位置识别当前选项卡。

```
$(function() { 
  $('a[data-toggle="tab"]').on('shown', function (e) {
    var indexTab = $('a[data-toggle="tab"]').index($(this)); // this: current tab anchor
    localStorage.setItem('lastVisitedTabIndex', indexTab);
  });

  //go to the latest tab, if it exists:
  var lastIndexTab  = localStorage.getItem('lastVisitedTabIndex');
  if (lastIndexTab) {
      $('a[data-toggle="tab"]:eq(' + lastIndexTab + ')').tab('show');
  }
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-11-25T18:24:54.617

我建议进行以下更改

1.  使用像[amplify.store](http://amplifyjs.com/api/store/)这样的插件，它提供了一个带有内置后备功能的跨浏览器/跨平台本地存储 API。

2.  定位需要保存的选项卡，`$('#div a[data-toggle="tab"]')`以便将此功能扩展到同一页面上存在的多个选项卡容器。

3.  使用唯一标识符`(url ??)`跨多个页面保存和恢复上次使用的选项卡。

* * *

```
$(function() { 
  $('#div a[data-toggle="tab"]').on('shown', function (e) {
    amplify.store(window.location.hostname+'last_used_tab', $(this).attr('href'));
  });

  var lastTab = amplify.store(window.location.hostname+'last_used_tab');
  if (lastTab) {
    $("#div a[href="+ lastTab +"]").tab('show');
  }
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-13T08:44:58.187

没有本地存储的简单解决方案：

```
$(".nav-tabs a").on("click", function() {
    location.hash = $(this).attr("href");
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-08-24T21:44:53.870

服务器端方法。确保所有 html 元素都有 class="" 以防未指定，否则您将需要处理空值。

```
 private void ActiveTab(HtmlGenericControl activeContent, HtmlGenericControl activeTabStrip)
    {
        if (activeContent != null && activeTabStrip != null)
        {
            // Remove active from content
            Content1.Attributes["class"] = Content1.Attributes["class"].Replace("active", "");
            Content2.Attributes["class"] = Content2.Attributes["class"].Replace("active", "");
            Content3.Attributes["class"] = Content3.Attributes["class"].Replace("active", "");

            // Remove active from tab strip
            tabStrip1.Attributes["class"] = tabStrip1.Attributes["class"].Replace("active", "");
            tabStrip2.Attributes["class"] = tabStrip2.Attributes["class"].Replace("active", "");
            tabStrip3.Attributes["class"] = tabStrip3.Attributes["class"].Replace("active", "");

            // Set only active
            activeContent.Attributes["class"] = activeContent.Attributes["class"] + " active";
            activeTabStrip.Attributes["class"] = activeTabStrip.Attributes["class"] + " active";
        }
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-13T18:09:14.513

如果您想在第一次进入页面时显示第一个选项卡，请使用以下代码：

```
 <script type="text/javascript">
        function invokeMeMaster() {
        var chkPostBack = '<%= Page.IsPostBack ? "true" : "false" %>';
            if (chkPostBack == 'false') {
                $(function () {
                    // for bootstrap 3 use 'shown.bs.tab', for bootstrap 2 use 'shown' in the next line
                    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                        // save the latest tab; use cookies if you like 'em better:
                        localStorage.setItem('lastTab', $(this).attr('href'));
                    });

                });
            }
            else {
                $(function () {

                    // for bootstrap 3 use 'shown.bs.tab', for bootstrap 2 use 'shown' in the next line
                    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                        // save the latest tab; use cookies if you like 'em better:
                        localStorage.setItem('lastTab', $(this).attr('href'));
                    });

                    // go to the latest tab, if it exists:
                    var lastTab = localStorage.getItem('lastTab');
                    if (lastTab) {
                        $('[href="' + lastTab + '"]').tab('show');
                    }

                });

            }
        }
        window.onload = function() { invokeMeMaster(); };

    </script>
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-07-11T15:42:17.517

这是我制作的一个片段，它适用于**Bootstrap 3**和**jQuery**以及*包含不同选项卡的不同 URL*。**虽然它不支持每页多个选项卡，**但如果您需要该功能，它应该很容易修改。

```
/**
 * Handles 'Bootstrap' package.
 *
 * @namespace bootstrap_
 */

/**
 * @var {String}
 */
var bootstrap_uri_to_tab_key = 'bootstrap_uri_to_tab';

/**
 * @return {String}
 */
function bootstrap_get_uri()
{
    return window.location.href;
}

/**
 * @return {Object}
 */
function bootstrap_load_tab_data()
{
    var uriToTab = localStorage.getItem(bootstrap_uri_to_tab_key);
    if (uriToTab) {
    try {
        uriToTab = JSON.parse(uriToTab);
        if (typeof uriToTab != 'object') {
        uriToTab = {};
        }
    } catch (err) {
        uriToTab = {};
    }
    } else {
    uriToTab = {};
    }
    return uriToTab;
}

/**
 * @param {Object} data
 */
function bootstrap_save_tab_data(data)
{
    localStorage.setItem(bootstrap_uri_to_tab_key, JSON.stringify(data));
}

/**
 * @param {String} href
 */
function bootstrap_save_tab(href)
{
    var uri = bootstrap_get_uri();
    var uriToTab = bootstrap_load_tab_data();
    uriToTab[uri] = href;
    bootstrap_save_tab_data(uriToTab);
}

/**
 *
 */
function bootstrap_restore_tab()
{
    var uri = bootstrap_get_uri();
    var uriToTab = bootstrap_load_tab_data();
    if (uriToTab.hasOwnProperty(uri) &&
    $('[href="' + uriToTab[uri] + '"]').length) {
    } else {
    uriToTab[uri] = $('a[data-toggle="tab"]:first').attr('href');
    }
    if (uriToTab[uri]) {
        $('[href="' + uriToTab[uri] + '"]').tab('show');
    }
}

$(document).ready(function() {

    if ($('.nav-tabs').length) {

    // for bootstrap 3 use 'shown.bs.tab', for bootstrap 2 use 'shown' in the next line
    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
        bootstrap_save_tab($(this).attr('href'));
    });
    bootstrap_restore_tab();

    }

}); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-05T07:36:10.437

$(文档).ready(函数 () {

```
 if (JSON.parse(localStorage.getItem('currentClass')) == "active")
        {
            jQuery('#supporttbl').addClass('active')
            $('.sub-menu').css({ "display": "block" });
        }

        $("#supporttbl").click(function () { 
            var currentClass;
            if ($(this).attr('class')== "active") { 

                currentClass = $(this).attr('class');

                localStorage.setItem('currentClass', JSON.stringify(currentClass));
                console.log(JSON.parse(localStorage.getItem('currentClass')));

                jQuery('#supporttbl').addClass('active')
                $('.sub-menu').css({ "display": "block" });

            } else {

                currentClass = "Null"; 

                localStorage.setItem('currentClass', JSON.stringify(currentClass));
                console.log(JSON.parse(localStorage.getItem('currentClass')));

                jQuery('#supporttbl').removeClass('active')
                $('.sub-menu').css({ "display": "none" });

            }  
        }); 
```

});

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-24T21:05:49.203

如果页面中有多个选项卡，则可以使用以下代码

```
<script type="text/javascript">
$(document).ready(function(){
    $('#profileTabs').on('show.bs.tab', function(e) {
        localStorage.setItem('profileactiveTab', $(e.target).attr('href'));
    });
    var profileactiveTab = localStorage.getItem('profileactiveTab');
    if(profileactiveTab){
        $('#profileTabs a[href="' + profileactiveTab + '"]').tab('show');        
    }
    $('#charts-tab').on('show.bs.tab', function(e) {
        localStorage.setItem('chartsactiveTab', $(e.target).attr('href'));
    });
    var chartsactiveTab = localStorage.getItem('chartsactiveTab');
    if(chartsactiveTab){
        $('#charts-tab a[href="' + chartsactiveTab + '"]').tab('show');        
    }     
});
</script> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-19T22:45:52.253

这将刷新选项卡，但仅在加载控制器中的所有内容之后。

```
// >= angular 1.6 angular.element(function () {
angular.element(document).ready(function () {
    //Here your view content is fully loaded !!
    $('li[href="' + location.hash + '"] a').tab('show');
}); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-05T20:41:58.143

我将它与 MVC 一起使用：

*   模型中有一个 SelectedTab 整数字段，用于将值发送到 POST 方法

JavaScript 部分：

```
<script type="text/javascript">
    $(document).ready(function () {
       var index = $("input#SelectedTab").val();
       $("#tabstrip > ul li:eq(" + index + ")").addClass("k-state-active");

       $("#tabstrip").kendoTabStrip();
    });
    function setTab(index) {
      $("input#SelectedTab").val(index)
    }
</script> 
```

HTML部分：

```
@using (Html.BeginForm())
{
@Html.AntiForgeryToken()
@Html.HiddenFor(model => model.SelectedTab)
<div id="tabstrip">
    <ul>
        <li onclick="setTab(0)">Content 0</li>
        <li onclick="setTab(1)">Content 1</li>
        <li onclick="setTab(2)">Content 2</li>
        <li onclick="setTab(3)">Content 3</li>
        <li onclick="setTab(4)">Content 4</li>
    </ul>
    <div>

    </div>
    <div>

    </div>
    <div>

    </div>
    <div>

    </div>
    <div>

    </div>
</div>
<div class="content">
    <button type="submit" name="save" class="btn bg-blue">Save</button>
</div>
} 
```

# authentication - 如何为远程身份验证构建 WebAPI？

> ID：10523436
> 
> 赞同：0
> 
> 时间：2012-05-09T20:14:13.207
> 
> 标签：authentication, asp.net-membership, asp.net-mvc-4, asp.net-web-api

我们正在考虑将现有的成员资格提供程序修改为 Web 服务以允许远程身份验证。比如说，Windows 8 应用程序将能够接受登录凭据并在我们服务器上的数据库中检查它。

- -更新 - -

我们在 asp.net 网站上查看了视频（[Authorization](http://www.asp.net/web-api/videos/getting-started/authorization)，但发现它仍然使用传统的控制器来执行身份验证/授权任务。视频仅显示我们可以使用`[Authorize]`属性。有没有办法使用 ApiController 所以身份验证可以公开为 Web 服务以供另一个应用程序使用吗？

---我的更新结束---

我一直在尝试找到一些示例代码/项目，但到目前为止还没有找到。任何人都可以提出解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T14:06:05.627

以下是我通过 WebAPI 进行身份验证的方式 - 它使用 Forms Auth 和 SimpleMembershipProvider。我不是经验丰富的编码员，因此这可能与质量相差甚远，但它应该可以帮助您入门。请注意，这只是验证用户，而不是客户端（api 密钥实现对我来说是一个 TODO）。欢迎反馈。

检查当前客户端/用户是否已通过身份验证：

```
public class AccountController : ApiController
{
    public static DtoService _service = new DtoService();

    // GET/api/isAuthenticated
    [System.Web.Http.HttpGet]
    public HttpResponseMessage IsAuthenticated()
    {
        try
        {
            if (User.Identity.IsAuthenticated)
                return Request.CreateResponse(HttpStatusCode.OK, WebSecurity.GetUserId(User.Identity.Name));
            else
                return Request.CreateResponse(HttpStatusCode.OK, false);
        }
        catch (Exception e)
        {
            return Request.CreateResponse(HttpStatusCode.InternalServerError, e);
        }

    } 
```

登录：

```
 // POST /api/login
    // [System.Web.Http.AllowAnonymous]
    [System.Web.Http.HttpPost]
    public HttpResponseMessage LogIn(LoginModel model)
    {
        if (!ModelState.IsValid)
            return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
        try
        {
            if (User.Identity.IsAuthenticated)
                return Request.CreateResponse(HttpStatusCode.Conflict, "already logged in.");
            if (!WebSecurity.UserExists(model.UserName))
                return Request.CreateResponse(HttpStatusCode.BadRequest, "User does not exist.");
            if (WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                return Request.CreateResponse(HttpStatusCode.OK, "logged in successfully");
            }
            return Request.CreateResponse(HttpStatusCode.BadRequest, "Login Failed.");
        }
        catch (Exception e)
        {
            return Request.CreateResponse(HttpStatusCode.InternalServerError, e);
        }
    } 
```

登出：

```
 // POST /api/logout
    [System.Web.Http.HttpPost]
    ////[ValidateAntiForgeryToken]
    [Authorize]
    public HttpResponseMessage LogOut()
    {
        try
        {
            if (User.Identity.IsAuthenticated)
            {
                WebSecurity.Logout();
                return Request.CreateResponse(HttpStatusCode.OK, "logged out successfully.");
            }
            return Request.CreateResponse(HttpStatusCode.Conflict, "already done.");
        }
        catch (Exception e)
        {
            return Request.CreateResponse(HttpStatusCode.InternalServerError, e);
        }
    } 
```

登记：

```
 // POST: /api/register
    [System.Web.Http.HttpPost]
    //[ValidateAntiForgeryToken]
    public HttpResponseMessage Register(RegisterModel model)
    {
        if (!ModelState.IsValid)
        {
            return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
        }
        try
        {
            if (User.Identity.IsAuthenticated)
                return Request.CreateResponse(HttpStatusCode.Conflict, "User Already Registered and Logged In");
            if (WebSecurity.UserExists(model.UserName))
                return Request.CreateResponse(HttpStatusCode.Conflict, "User Already Registered");
            else
            {
                // Attempt to register the user
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                WebSecurity.Login(model.UserName, model.Password);
                InitiateDatabaseForNewUser(WebSecurity.GetUserId(model.UserName));

                FormsAuthentication.SetAuthCookie(model.UserName, createPersistentCookie: false);
                return Request.CreateResponse(HttpStatusCode.Created, WebSecurity.GetUserId(model.UserName));
            }

        }
        catch (Exception e)
        {
            return Request.CreateResponse(HttpStatusCode.InternalServerError, e);
        }

    }
} 
```

# nhibernate - NHibernate QueryOver - 搜索 2 个表，返回一些聚合数据，在 sqlserver 端执行排序/跳过/获取

> ID：10523437
> 
> 赞同：1
> 
> 时间：2012-05-09T20:14:20.327
> 
> 标签：nhibernate, c#-4.0, fluent-nhibernate

我有以下实体（直接映射到数据库表）：

```
public class SurveyQuestion
{
public int SurveyQuestionID { get; set; }
public string QuestionText { get; set; }
public DateTime QuestionDate { get; set; }
public List<Answer> Answers { get; set; }
}

public class Answer
{
public int AnswerID { get; set; }
public int SurveyQuestionID { get; set; }
} 
```

我想执行一个返回以下内容的查询（为了清楚起见，这里表示为一个类，因为我有这个类可以从我的许多失败尝试之一中复制/粘贴）：

```
public class SurveySearchItem
{
public int SurveyQuestionID { get; set; }
public string QuestionText { get; set; }
public int AnswerCount { get; set; }
} 
```

我想让这个查询过滤日期，按计数排序，跳过 X 行，并取 X 行，所有这些都在 sql server 端。我试图避免为这个内联编写 proc 或只使用 sql，因为在其他任何地方我都能够仅使用 nhibernate 的 queryover 或条件的东西来完成我需要的一切。

我已经搜索了许多有希望的链接（大多数在 SO 上）并尝试了许多不同的东西，但我似乎无法找到实现这一目标的方法。如果不自己编写 sql （或者可能创建一个映射到它的实体的搜索视图；我也考虑过），这不是一件可以完成的事情，我可以接受。似乎应该有一种方法可以使用 QueryOver 或其他东西来做到这一点，而我可能只是太菜鸟了，无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:48:56.077

我最终在数据库中使用了一个视图并创建了一个通过 nhibernate 映射到它的类（然后忘记了我已经发布了这个问题大约 6 个月）。那是绝对最简单的解决方案，从那时起，我不得不在其他项目的类似场景中做同样的事情。有人可能会争辩说 proc 或 inline sql 路由可能是更好的选择，但 view 方法使其与所有其他代码更加一致（因为它看起来只是映射到另一个表的另一个实体）。

# php - 删除 HTML 格式 PHP

> ID：10523438
> 
> 赞同：0
> 
> 时间：2012-05-09T20:14:23.693
> 
> 标签：php

我正在尝试从另一个网站的复制文本中删除格式。我可以`preg_replace`与其他方法一起使用，但我想保留`<p>`'s 等，但删除诸如`<font>`.

这是我现在用来清理文本的内容：

`mysql_real_escape_string(str_replace("\r\n",'', $_POST['maintext']));`

# ios - 你如何让一个空的 UITextView 像 iOS 上的 Notes 一样滚动？

> ID：10523441
> 
> 赞同：2
> 
> 时间：2012-05-09T20:14:38.510
> 
> 标签：ios, uiscrollview, uitextview

在 iOS 中，当内容很少或没有内容时，如何使 UITextView 可滚动并响应触摸？

在我的应用程序中，一旦文本填满文本视图，滚动条就会出现，我可以滚动。不过比这要少，而且由于所有内容都在 UITextView 的框架内，因此它是静态的并且不会移动。

我想要的就像 iPhone Notes 应用程序一样工作，无论是一行文本，还是当一个便笺为空时，您都可以滚动视图。

现在我只使用 UITextView，我很难理解是否还需要 UIScrollView。

我无法找到特定于此问题的问题。谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T20:58:30.283

对于将来偶然发现此页面的任何人：

我可以通过简单地启用来实现这一点`alwaysBounceVertical`，并确保启用了用户交互和滚动。

```
self.textView.scrollEnabled = YES;
self.textView.userInteractionEnabled = YES;
self.textView.alwaysBounceVertical = YES; 
```

对于 Swift 3.0：

```
 textView.alwaysBounceVertical = true
    textView.isUserInteractionEnabled = true
    textView.isScrollEnabled = true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:22:59.270

是的，您需要从 UIScrollView 开始。然后添加文本视图并设置它的自动调整大小属性以拉伸和填充视图（单击彼此交叉的两个内部箭头中的每一个）

现在，当您的文本更新时，您需要根据 textView 的内容大小重置主视图的大小。

```
CGRect frame = textView.frame;
frame.size.height = textView.contentSize.height;
self.view.frame = frame; 
```

为了在文本到达屏幕底部时使其工作，需要在 UITextView 委托的 textViewDidChange: 方法中调用它。一旦你让它工作，我建议添加一些逻辑以防止它在每次按键后触发。也许在重置视图框架之前确保 contentSize.height 实际上已经增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-28T11:58:22.033

试试这个，它应该是你需要的唯一一行：

```
textView.alwaysBounceVertical = true 
```

感谢 Serenn 的回答。

# php - 在 Aptana Studio 3 中恢复已删除的文件？

> ID：10523445
> 
> 赞同：5
> 
> 时间：2012-05-09T20:14:58.353
> 
> 标签：php, eclipse, ide, aptana

我只是不小心删除了 Aptana Studio 3 中的一些文件，令我惊讶的是，它们不在回收站中！

这些是我非常不想丢失的文件，所以有人知道是否有办法找回它们吗？

我正在运行一个已删除的文件恢复程序，但我不认为它会有所帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T10:13:28.867

默认情况下，如果文件在项目中，Aptana Studio 最多会存储 7 天的历史记录。

右键单击文件所在的文件夹，然后选择“从本地历史记录恢复”。

来源：在“帮助内容”/help/topic/org.eclipse.platform.doc.user/tasks/tasks-87b.htm [https://wiki.appcelerator.org/display/tis/Recovering+a+Deleted+File +with+本地+历史](https://wiki.appcelerator.org/display/tis/Recovering+a+Deleted+File+with+Local+History)

# actionscript-3 - 将一个组集中在另一个组中

> ID：10523457
> 
> 赞同：0
> 
> 时间：2012-05-09T20:15:59.907
> 
> 标签：actionscript-3, apache-flex, flash-builder

我有下面的代码显示有关计算机的信息。

我无法让 s:VGroup 出现在 s:Group 的中心。它总是稍微偏离中心......更多的左边和右边。

有没有办法让一个组始终位于其容器的中心？

我已经尝试了 Horizo​​ntalAlign="center" 和 Horizo​​ntalCenter="center" 但都不影响该元素的水平定位。

谢谢！

```
 <s:Group horizontalCenter="center" width="100%" top="10">
    <s:Rect x="0" y="0"  
            radiusX="4" radiusY="4" 
            height="100%" width="90%" left="10">
    </s:Rect>
    <s:VGroup top="20" left="20" bottom="20" right="20">
        <s:Label id="lblCPU"  text="{data.CPU}"/>
        <s:HGroup>
            <s:Label id="lblmodel"  text="{data.model}"/>
            <s:Label id="lblmemory"   text="{data.memory}"/>
        </s:HGroup>
        <s:Label id="lblHDD"  text="{data.HDD}"/>
        <s:Label id="lblUSB" text="{data.USB}"/>
    </s:VGroup>
</s:Group> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:30:13.473

```
<s:Group x="435" y="77" width="200" height="200">
        <s:layout>
            <s:BasicLayout/>
        </s:layout>
        <s:VGroup width="50" height="50" horizontalCenter="0" verticalCenter="0">
        </s:VGroup>
</s:Group> 
```

# c# - asp:Image ImageUrl 调用函数

> ID：10523458
> 
> 赞同：0
> 
> 时间：2012-05-09T20:16:06.747
> 
> 标签：c#, javascript, asp.net, vb.net-2010

我正在将 VB.NET 代码转换为 C#。以下代码在 C# 中不起作用。有人可以帮助语法。我试过 ImageUrl='<%=setImage(#Eval("TPU")) %>' 仍然没有运气。

问题是，它没有在后面的代码中调用 setImage() 函数。我收到以下错误： myPage.setImage(string) 的最佳重载方法有一些无效参数。参数“1”：不能从“对象”转换为“字符串”

## 页面

```
<asp:Image ID="img1" ImageUrl='<%#setImage(Eval("TPU")) %>' runat="server" /> 
```

## C# 代码

```
public string setImage(string status) {

 if (status == "Running") { 
return "images/run.jpg";
else if (status == "Unknown") {
return "images/unknown.jpg"
 }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:21:08.817

You're missing a closing bracket on the first condition. Secondly, it doesn't look like you even need the else condition.

This should work fine, assuming that the image paths are correct:

```
public string setImage(string status) 
{
    //if status is running return the run image
    if (status == "Running")  
        return "images/run.jpg";

    //otherwise return the unknown image
    return "images/unknown.jpg"; 
} 
```

**EDIT**

Also, you need to cast the value as a string in your markup:

```
ImageUrl='<%# setImage((string)Eval("TPU")) %>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:19:49.613

Try

```
public string setImage(string status) 
{   
string imgurl=(status == "Running")?"~//images//run.jpg":"~//images/unknown.jpg";
return imgurl;
} 
```

Updated

```
<asp:Image ID="img1" ImageUrl='<%#setImage(Eval("TPU").ToString()) %>' runat="server" /> 
```

# javascript - JavaScript 脚本执行时间过长。获取脚本提示时间过长

> ID：10523462
> 
> 赞同：0
> 
> 时间：2012-05-09T20:16:14.250
> 
> 标签：javascript

我有一个 JavaScript 函数 buildTable，它构建了一个很长的 HTML 表。

```
 function buildTable() {

                for (var i = 0; i < rowCount; i++) {

     .. code to create table

} 
```

}

buildToolsetTable 花费了太多时间，几秒钟后 IE 7 显示提示，如果我想继续运行脚本。我读到我可以使用 window.setTimeout 进行另一个调用并刷新执行，但如果有人有实现，那么它将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:19:28.707

你需要这样的东西，它将循环分解成一个单独的函数，每次迭代都调用它：

```
(function(n) {
    var i = 0;

    function doWork() {
        // do one row's worth of stuff here
        ...

        if (++i < n) {
            setTimeout(doWork, 0);
        } else {
            // do your tidy up here
            ...
        }
    }

    doWork(); // start the first iteration
})(rowCount); 
```

调用`setTimeout()`将允许浏览器使用您自己的代码散布 UI 事件处理。

见[http://jsfiddle.net/alnitak/8wXTT/](http://jsfiddle.net/alnitak/8wXTT/)

为了增加乐趣，制作单次迭代并整理函数回调，这样您就可以使这段代码独立并只传递所需的参数。

# perl - 从 Windows Live ID 查询中检索 JSON 结果

> ID：10523464
> 
> 赞同：3
> 
> 时间：2012-05-09T20:16:18.797
> 
> 标签：perl, oauth-2.0, live, windows-live-id

我无法从 Live ID API 调用中检索整个 JSON。

我正在使用 Windows Live ID 通过 OAuth2 流程，以获取个人资料信息（以及一些相关项目，如电话号码和首选电子邮件）。我在用着`perl & Net::OAuth2.`

其中的 OAuth2 部分似乎工作正常；我可以获得访问令牌。我现在要做的是将它转过来并检索作为此身份验证/授权过程的重点的配置文件信息。

如果我只是将 URL 插入浏览器 [https://apis.live.net/v5.0/me?access_token=EwA](https://apis.live.net/v5.0/me?access_token=EwA) .... 我得到了我想要的，看起来像 JSON：

```
{
   "id": "dd62296f10db01bf", 
   "name": "Michael Helm", 
 ....

   "locale": "en_US", 
   "updated_time": "2012-05-03T01:02:59+0000"
} 
```

当我使用一些 perl 模块来构建 url 字符串时，发出请求并检索（使用 LWP::UserAgent; 使用 HTTP::Request::Common; ）

作为 client->request 的结果返回的是上面那个 JSON 的最后一部分，带有 updated_time 的部分，加上一些标点符号。

我错过了什么？我需要做什么才能获得整个对象？

这种技术以前有效（但有几个 OAuth 1 提供者）。我对 Microsoft 和 Windows Live ID 不是很熟悉，但到目前为止，这个过程似乎很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:16:54.417

如上所述，JSON 模块可以读取并解析出整个内容，即使 Dumper 无法打印它。因此，OAuth 2 处理或 Windows Live API 没有问题。

# php - FPDI合并PDF文件，出现奇怪的线条

> ID：10523472
> 
> 赞同：13
> 
> 时间：2012-05-09T20:16:41.970
> 
> 标签：php, pdf, fpdi

当用户需要时，我必须合并 PDF 文件。这些文件已经存在，一切都很好。我正在使用下面的代码来合并文件：

```
class concat_pdf extends FPDI 
{
    var $files = array();

    function setFiles($files) 
    {
        $this->files = $files;
    }

    function concat() 
    {
        foreach($this->files AS $file) 
        {
            $pagecount = $this->setSourceFile($file);

            for($i = 1; $i <= $pagecount; $i++) 
            {
                $this->AddPage('P');
                $tplidx = $this->ImportPage($i);
                $this->useTemplate($tplidx);
            }
        }
    }
}

$pdf = new concat_pdf();
$pdf->setFiles($files); //$files is an array with existing PDF files.
$pdf->concat();
$pdf->Output("bulk.pdf", "D"); 
```

所有文件都已合并，所有内容都在那里。问题是，在新文件的每一页的顶部，都会出现一条黑线。内容、边距等都与原始文件完全相同，但这一行突然出现（我可以说）。它不厚，但清晰可见。它不会与其他内容或任何东西混淆，但在那里不需要，我需要将其删除。

我尝试将函数的第二个参数更改为[文档](http://www.setasign.de/support/manuals/fpdi/fpdi/fpdi-importpage/)`ImportPage()`中描述的所有选项，但没有任何区别。由于这是我看到的唯一可以在这几行代码中更改的内容，我真的不知道是什么导致黑线出现。我已经搜索过类似的问题，但到目前为止 - 没有运气。有人有想法吗？提前致谢！

![前](../Images/1ee8a56ffc68892d8bf6295e531df986.png) ![后](../Images/cd513758d58eb58b176eec2ac8406c3e.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-04T20:43:34.240

由于您不必修改源代码，更好的做法是添加以下行：

```
 $this->setPrintHeader(false);
    $this->setPrintFooter(false); 
```

在你的 concat() 函数的开头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-07T07:32:49.293

为避免编辑 TCPDF 库，请覆盖扩展类中的 Footer 和 Header 方法。

```
class concat_pdf extends FPDI 
{
    public function Footer() {}
    public function Header() {}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:23:41.680

我有这个问题的解决方案。tcpdf 中的默认页眉和页脚包含行。您必须在第 4214 行删除 tcpdf 类中的方法体 footer() 和 header()。

# c# - 如何维护网站和虚拟应用程序之间的 .aspxauth 会话 cookie？

> ID：10523474
> 
> 赞同：3
> 
> 时间：2012-05-09T20:16:43.633
> 
> 标签：c#, web-config, forms-authentication, .aspxauth

我们在 .net 中拥有我们的生产网站和一个第三方网络应用程序，该应用程序作为该网站的虚拟应用程序运行。我的任务是维护网站和第三方应用程序之间的会话超时。即只要用户在第三方应用程序上处于活动状态，会话就会保持活动状态，因此当他们返回网站时，即使是在 20 分钟到期后，他们的会话仍然处于活动状态。我们在网站和应用程序中都使用表单身份验证进行会话管理，根据我所读到的内容，我应该能够通过网络配置中的设置来做到这一点。我已经更新了两个 webconfig 文件的身份验证部分

基本上我正在使用 www.mydomain.com 和 www.mydomain.com/app/

```
 <authentication mode="Forms">
        <forms
           name=".ASPXFORMSAUTH"
           loginUrl="home.aspx"
           enableCrossAppRedirects="true"
           slidingExpiration="true"
           path="/"
           domain=".infinedi.net">
        </forms>

    </authentication>
    <machineKey
          validationKey="BDEA0BE471E4E2C24E5A9552AF232C3E7BF584DBEEAA1262CEE78CB5126FBBBE9E8007DB5ED8357FEE5C2C5B6FF3FC7D34C7CEA54DE3790560FCDEBF44415804"
          decryptionKey="2E31C984223964655C203E3A91AF139B1AE0A964F1475E204E6AACE62840EAB0"
          validation="SHA1"
          decryption="AES"
          /> 
```

但这并没有奏效。与提琴手一起观看时，我可以看到，一旦我进入第三方应用程序，我就会得到一个新的 .ASPXFORMSAUTH 会话，我怀疑这就是网站会话超时的原因。是否可以通过 webconfig 执行此操作，或者我应该采取不同的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:12:02.040

无法使其正常工作，因此不得不使用 iframe。丑陋的解决方案，我将不得不稍后重新访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:44:24.993

我认为您遇到的问题是因为 ASP.NET 为每个应用程序分配了一个新的会话 ID。即使您有相同的 cookie 名称和加密参数，内部生成的会话 ID 也会不同。您可以通过手动检测现有会话并更新会话 ID 来解决此问题。这曾经是基于 Flash 的文件上传器的常见解决方法，因为 Flash 没有发送适当的 cookie，因此服务器端的上传处理程序无法识别用户的现有会话。

[http://snipplr.com/view/15180/](http://snipplr.com/view/15180/)

Using the example code at the above URL, the flash app would post to a URL containing the session ID in the query string, which the BeginRequest handler would detect and update the Request.Cookies collection. I haven't tested this, but you may be able to modify the code a bit to detect the existing cookie from the parent app.

As an alternative, see: [Sharing sessions across applications using the ASP.NET Session State Service](https://stackoverflow.com/questions/2868316/sharing-sessions-across-applications-using-the-asp-net-session-state-service)

# objective-c - 使用委托和协议在两个视图（选项卡）之间传递数据

> ID：10523476
> 
> 赞同：0
> 
> 时间：2012-05-09T20:16:48.583
> 
> 标签：objective-c

我是 Objective-C 的新手，我正在制作一个有两个选项卡的应用程序。一个标签是我读出加速度计和陀螺仪并用标签和进度条显示这些值的地方，第二个标签是我可以进行一些网络设置，如 IP、端口，还有一个用于日志的文本字段。

经过一番搜索，我发现从我的设置选项卡 (NetworkViewController) 和第一个选项卡 (MotionViewController) 传递数据的最佳选择是使用委托和协议。

这是我的 NetworkViewController.h：

```
@protocol ViewControllerNetworkDelegate <NSObject>
- (void)PassDataToViewController:(NetworkViewController *)controller didFinishEnteringItem:(NSString *)item;
@end

@interface NetworkViewController : UIViewController

@property (nonatomic, weak) id<ViewControllerNetworkDelegate> delegate;

@property (strong, nonatomic) IBOutlet UITextField *addressField;
@property (strong, nonatomic) IBOutlet UITextField *portField;
@property (strong, nonatomic) IBOutlet UITextView *logField;

- (IBAction)toggleUDP:(id)sender;
- (IBAction)hideKeyboard:(id)sender;

@end 
```

已修复：我在方法 PassDataToViewController 上出现错误，提示“预期类型”。

在我的实现文件中，我在 hideKeyboard 方法中有以下代码，因此当我更改 IP 地址的文本字段时它会被执行：

```
NSString *itemToPassBack =addressField.text;
[self.delegate PassDataToViewController:self didFinishEnteringItem:itemToPassBack]; 
```

MotionViewController.h：

```
#import "NetworkViewController.h"

@interface MotionViewController : UIViewController <ViewControllerNetworkDelegate> 
```

运动视图控制器.m

```
- (void)viewDidLoad
{
NetworkViewController *networkViewController = [[NetworkViewController alloc] initWithNibName:@"MotionViewController" bundle:nil];
networkViewController.delegate = self;
[self pushViewController:networkViewController animated:YES];
}

- (void)PassDataToViewController:(id)controller didFinishEnteringItem:(NSString *)item{
NSString *host= item;
} 
```

这是我的项目的相关代码，它基于这篇文章[在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controller)。

我收到以下错误：'MotionViewController' 没有可见的@interface 声明选择器'pushViewController 动画
On [self pushViewController:networkViewController animated:YES]; 在 MotionViewController.h

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:25:54.523

您需要在头文件中的协议中使用它之前转发声明您的 NetworkViewController，使用

```
@class NetworkViewController; 
```

这样，编译器在您实际声明它之前就知道您正在使用的类。

# c# - C#，当数组可能没有元素时，如何判断数组的第一个元素是否为空？

> ID：10523481
> 
> 赞同：1
> 
> 时间：2012-05-09T20:17:00.873
> 
> 标签：c#

此代码可能会引发空指针异常。

```
if (myArray[0] != null)
{
    //Do Something
} 
```

我如何测试以确保有一个元素 @index `0`？数组为空时不抛出异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T20:18:13.377

根据您需要检查的内容，这些条件的某些组合：

```
if (myArray != null && myArray.Length > 0 && myArray[0] != null)
{
    //Do Something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:22:09.567

我将对蒂姆的回答做出的一个小改动是：

```
if (myArray != null && myArray.Any() && myArray[0] != null) 
{ 
    //Do Something 
} 
```

.Any 检查是否至少有 1 个，而无需遍历整个集合。此外，此版本适用于任何 IList<T>-实现器。

我知道在未来的 .NET 版本中可能会有 .IsNullOrEmpty 的 LINQ/IEnumerable 版本，这在这里非常方便。哎呀，您可以自己将其实现为扩展方法！

```
public static class MyExtensions
{
    public static bool IsNullOrEmpty<T>(this IEnumerable<T> source)
    {
        return (source == null || !source.Any());
    }
} 
```

然后你的测试变成

```
if (!myArray.IsNullOrEmpty() && myArray[0] != null)
{
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T20:22:11.733

首先，您需要检查*myArray*是否为空。如果不是，请检查它的元素计数：

```
if (myArray != null && myArray.Length > 0)
{
   // myArray has at least one element
} 
```

如果第一个条件为假，则不会检查第二个条件，因此当*myArray*为 null 时不会抛出异常。

# php - Parse error: syntax error, unexpected T_IF in C:\wamp\www\project\uploadctrl.php on line 15

> ID：10523482
> 
> 赞同：-4
> 
> 时间：2012-05-09T20:17:01.613
> 
> 标签：php, wamp, syntax-error, wampserver

```
 <?php
    if(isset($_POST['submitted'])){
    if(isset($_FILES['upload'])){
       $allowed=array('image/pjepg','image/jpeg','image/JPG','image/X-PNG','image/PNG','image/png');
    if(in_array($_FILES['upload'][type],$allowed)){
    if(move_uploaded_file($_FILES['upload']['tmp_name'],"../upload/{$_FILES['upload']['name']}")){
        echo '<p><em> The file has been uploaded!</em></p>';
        }
    else {
        echo '<p class="error">Please upload a JPEG or PNG image. </p>';
    }
}
isset($_FILES['upload'])

if($_FILES['upload']['error']>0){
    echo '<p class="error">The file could not be uploaded because: <strong>';

    switch ($_FILES['upload']['error']) {
        case 1:
            print 'the file exceeds the upload_max_filesize setting in php.ini.';
            break;
        case 2:
            print 'the file exceeds the MAX_FILE_SIZE setting in HTML form.';
            break;
        case 3:
            print 'the file was only partially uploaded.';
            break;
        case 4:
            print 'No file was uploaded.';
            break;
        case 5:
            print 'No temporary folder was availiable.';
            break;
        case 6:
            print 'Unable to write to the disk.';
            break;
        case 7: 
            print 'File uploaded stopped.';
            break;
            default:
            print 'A system error occurred.';
            break;
        }

        print '</strong></p>';
    }
  if((file_exists($_FILES['upload']['tmp_name'])) && (is_file($_FILES['upload']['tmp_name']))){
    unlink($_FILES['upload']['tmp_name']);
    }
}

?> 
```

when i run this i get:

Parse error: syntax error, unexpected T_IF in C:\wamp\www\project\uploadctrl.php on line 15

and i cant find any errors in syntax..i search everything on code but i didnt find anything..anyone can help???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:18:16.120

Your:

```
isset($_FILES['upload']) 
```

needs to be:

```
isset($_FILES['upload']); 
```

It does say line 15, usually error lies just before that line.

# graph - Store and query property history with Neo4j

> ID：10523486
> 
> 赞同：1
> 
> 时间：2012-05-09T20:17:19.970
> 
> 标签：graph, neo4j, graph-databases

I need to maintain a tree which contains nodes with attributes which are usually or strings, new attributes can be added to a node at runtime, etc. So a graph database like Neo4j is an obvious solution. But there is a slight twist: when an attribute is changed, I need to keep a record of its old value, and be able to efficiently query these old values (in particular, queries like "give me up 25 values of attribute X of node Y, starting from time Z" to support paging, and obviously "get latest value" needs to be efficient as well). What would be a good way to represent this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:33:03.837

[`TimelineIndex`](http://api.neo4j.org/current/org/neo4j/index/lucene/TimelineIndex.html)除了限制点击次数外，几乎可以满足我的需求。但是从 JavaDoc`IndexHits`看来，如果我迭代尽可能多的我需要然后关闭迭代器，这似乎并不重要。

所以一个解决方案看起来像这样：将我需要历史记录的每个属性表示为节点；所以而不是

```
Sensor
-----
name = "battery"
measurement = 1 
```

我有

```
Sensor           attr
-----            -+--> name = "measurement"
name = "battery"  |    value = 1
                  |    timestamp = 100000000
                  |
                  +--> name = "measurement"
                  |    value = 2
                  |    timestamp = 100000001
                  |
                  +--> name = "measurement"
                       value = 1
                       timestamp = 100000002 
```

然后我`TimelineIndex`为每个`Sensor`节点和每个带有历史的属性维护一个。

# c# - 可以通过列表填充字典值而不循环吗？

> ID：10523490
> 
> 赞同：1
> 
> 时间：2012-05-09T20:17:27.613
> 
> 标签：c#, dictionary

我们可以有类似的东西 -

```
Dictionary<string, string> dict = new Dictionary<string, string>();

List<string> keysList=  new List<string>();
List<string>valuesList=  new List<string>();

//Assuming both the list have the same number of items
dict.keys = keysList;
dict.values = valuesList; 
```

大多数情况下，我想知道是否有办法通过直接将键和值分配给列表来填充它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:19:06.517

> 大多数情况下，我想知道是否有办法通过直接将键和值分配给列表来填充它们？

不，但只需压缩它们，然后使用`ToDictionary`：

```
var dict = keysList.Zip(valuesList, (key, value) => Tuple.Create(key, value))
                   .ToDictionary(pair => pair.Item1, pair => pair.Item2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:23:44.747

字典内部不会将数据存储为两个列表。它将数据存储在哈希表中，这意味着它需要获取每个键，为其生成哈希，然后将项目放置在与该哈希对应的位置。因此，添加一组项目的唯一方法就是遍历该组并添加每个项目。您可以使用 LINQ`ToDictionary`方法，如另一个答案中所述，但在内部它要做的就是遍历每个项目并将其添加到字典中。这可以防止您看到循环，但循环仍然存在。

# installation - In WiX, end installation early based on condition

> ID：10523495
> 
> 赞同：0
> 
> 时间：2012-05-09T20:18:07.837
> 
> 标签：installation, wix, wix3.5

I need to end my installation early based on a certain condition, after displaying the Welcome Dialog, then a custom message dialog (already written) explaining why the installer is exiting. Here's my code:

```
 <Publish Dialog="WelcomeDlg" Control="Next" Event="DoAction" Value="CheckForCondition" Order="1">1</Publish>
    <Publish Dialog="WelcomeDlg" Control="Next" Event="SpawnDialog" Value="ConditionExistsMsgDlg" Order="2">CONDITIONEXISTS = "1"</Publish>
    <Publish Dialog="WelcomeDlg" Control="Next" Event="?????" Value="??????" Order="3">CONDITIONEXISTS = "1"</Publish>
    <Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="AfterWelcomeDlg" Order="4">CONDITIONEXISTS = "0"</Publish> 
```

What goes in the Event and Value fields in Order=3? I tried WixExitEarlyWithSuccess CA, but that did indicate an error. I'd like to just go to some sort of Finished dialog without MSI informing the user that there was an error. Is this possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-06T17:37:43.677

在[教程](http://wix.tramontana.co.hu/tutorial/user-interface-revisited/interactions)中指出，从带有“返回”的对话框返回会恢复正常操作（取消按钮会做什么），而“退出”用于中止整个安装过程.. 很可能对话框 UserExit.wxs 将被链接为此（通过 OnExit="cancel"！）并根据您使用的对话框集显示。如果您不想在“退出”后显示任何内容，则需要从 UI 中删除 UserExit ..

您可以下载 Wix 工具集源 (wixXY-debug.zip) 并查看文件夹“..\src\ext\UIExtension\wixlib”，如果您想查看它是如何在标准对话框中完成的，例如 UserExit.wxs .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:15:49.593

Event 应该是 NewDialog，Value 应该是您想要显示的自定义对话框（某种 Finished 对话框），例如 CustomExitDlg。

您还需要确保安装程序在单击完成（或您在自定义最终屏幕上定义的其他按钮）后返回。这是默认 WiX 安装 UI 的标准规则：

```
<Publish Dialog="ExitDialog" Control="Finish" Event="EndDialog" Value="Return" Order="999">1</Publish> 
```

# java - 阿帕奇 POI HSSF。获取总页数

> ID：10523496
> 
> 赞同：0
> 
> 时间：2012-05-09T20:18:09.613
> 
> 标签：java, apache-poi

我与 POI 合作并希望制作可打印的报告。所以一切都很好，但我需要获取动态生成的总页数（A4 格式的页面）`.xls`。使用时`HeaderFooter.numPages()`，我得到的不是总页数，而是这个符号： `&N`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:26:38.470

@Gagravarr 是正确的。由于存储了要打印的页数，因此实际上没有办法从 Apache POI 访问它。我建议将excel文件切换为PDF并按照建议的方式计算它。

# javascript - 使用 javascript 启动弹出窗口时不允许重新加载页面

> ID：10523503
> 
> 赞同：0
> 
> 时间：2012-05-09T20:18:40.473
> 
> 标签：javascript, popup, reload

嗨，

我有非常奇怪的行为（至少，我认为这很奇怪......）

我有一个页面，用户可以在其中选择背景颜色和文本颜色。

我在互联网上找到了一个颜色选择器，这一切都很好......

但是每次我打开弹出窗口时，页面都会重新加载。为了测试这一点，我在脚本标签中添加了一个警报，当我访问页面和打开弹出窗口时我收到了警报......

这很烦人，因为用户所做的更改将在每次打开弹出窗口时丢失......

这是触发弹出窗口的按钮：

```
<button onclick="PopUp(\'background\')">gebruik de color picker</button> 
```

请注意，这是 php 字符串的一部分，所以这就是单引号被转义的原因......

这是PopUp的功能：

```
function PopUp(keuze){
    if(keuze == 'background'){
        $('#clicked_one').val('background');
        var de_waarde = $('#background_keuze').val();
        $('#clicked_value').val(de_waarde);
    }
    else if(keuze == 'text'){
        $('#clicked_one').val('text');
        var de_waarde = $('#text_keuze').val();
        $('#clicked_value').val(de_waarde);
    }
    window.open( './popup_color_picker.php', '_blank', 'width=500,height=500');
} 
```

弹出页面：

```
<?php
include '../config.php';
?>
<!DOCTYPE html>
<html>
    <head>
        <title>Color Picker</title>
        <script src="<?php echo $root_off_page; ?>javascript/color_picker.js"></script>
    </head>
    <body>
        <input type="text" class="color" id="color" value="">
        <button onclick="klaar()">deze kleur wordt het</button>
    </body>
</html>

<script>
    var wat_is_geklikt = opener.document.getElementById('clicked_one').value;
    var de_juiste_waarde = opener.document.getElementById('clicked_value').value;

    function klaar(){
        var de_gekozen_kleur = document.getElementById('color').value;
        if(wat_is_geklikt == 'background'){
            opener.document.getElementById('background_keuze').value = de_gekozen_kleur;
        }
        else if(wat_is_geklikt == 'text'){
            opener.document.getElementById('text_keuze').value = de_gekozen_kleur;
        }

        self.close()
    }

</script> 
```

那么有人看到为什么主页（开瓶器）重新加载的问题吗？？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:08:56.440

按钮的默认类型（如果省略）是提交，它会导致页面重新加载。只需将类型更改为按钮

```
<button type="button" onclick="PopUp(\'background\')">gebruik de color picker</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T20:33:27.190

我在 < a > 标签上遇到了同样的问题，我在其中添加了 type="button" 并解决了我的问题，感谢您的帮助！

# emacs - 如何用链接或参考替换 Emacs 中的一段文本？

> ID：10523504
> 
> 赞同：4
> 
> 时间：2012-05-09T20:18:42.283
> 
> 标签：emacs

使用 Emacs 编写电子邮件时，我喜欢使用这种格式，在方括号之间使用数字来指向 URL。

例子：

> 第一个版本 [1] 仍然有问题，所以我下载了 SomeAlternative [2]。
> 
> [1]：[http ://blahblahblahblah.com/version1](http://blahblahblahblah.com/version1)
> 
> [2]： http: [//gaaaaaaaah.com/](http://gaaaaaaaah.com/)

是否有任何 Emacs 模式或按键序列可以让我用这种格式的引用快速替换 URL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T20:45:30.257

有正版`footnote-mode`次要模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T20:26:32.590

org-mode 脚注将执行此操作。

# c# - Remove special case indentation in XML files

> ID：10523510
> 
> 赞同：0
> 
> 时间：2012-05-09T20:19:32.983
> 
> 标签：c#, xml, c#-4.0, xmldocument, xmltextwriter

I want to modify a XML file but the tricky part is that the info I add should have minimal formatting. I have been searching for a while and I can't seem to find an answer. Here's what the XML looks currently (original):

```
<?xml version="1.0" encoding="utf-8"?>
<doe-jane>
  <name>Jane Doe</name>
  <contact>North Pole

Tel: (555) 123-4567
jane.doe@abc.com
</contact>
  <coveragelist>
    <company>Comp1</company>
    <company>Comp2</company>
  </coveragelist>
</doe-jane> 
```

It has to look like this:

```
<?xml version="1.0" encoding="utf-8"?>
<doe-jane>
  <name>Jane Doe</name>
  <contact>North Pole

Tel: (555) 123-4567
jane.doe@abc.com
</contact>
--> // Change needs to happen from here on <--
<coveragelist><company>Comp1</company>
<company>Comp2</company>
</coveragelist>
</doe-jane> 
```

Here's my code so far:

```
XmlDocument d = new XmlDocument();
//XmlTextWriter wr = new XmlTextWriter(resAnXFile, Encoding.UTF8);
//wr.Formatting = Formatting.None;
d.Load(resAnXFile);
XmlNode t = d.SelectSingleNode("//coveragelist");
t.ParentNode.RemoveChild(t);
// create CoverageList node
XmlNode coverageListNode = d.CreateNode(XmlNodeType.Element, "coveragelist", null);
foreach (var company in dataList)
{
    // create company nodes
    XmlNode companyNode = d.CreateElement("company");
    companyNode.InnerText = company.CompanyName.ToString();
    coverageListNode.AppendChild(companyNode);
}
d.DocumentElement.AppendChild(coverageListNode);
d.Save(resAnXFile); 
```

I've tried XMLTextWriter but I didn't have any luck. I really appreciate any help.

Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:33:36.857

我对你的要求有点困惑，但我的理解是这部分：

```
    <company>Comp1</company>
    <company>Comp2</company>

```

是新部分，您希望它没有缩进并且第一家公司与起始“coveragelist”节点位于同一行吗？

我知道您说过您尝试过 XmlTextWriter，但您是否尝试过：

```
xmlTextWriter.Formatting = xmlTextWriter.Formatting.None 
```

和

```
xmlTextWriter.WriteString("\n"); 
```

你需要在哪里？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:34:12.683

如果您打算删除格式

```
StringWriter wr = new StringWriter();
XDocument xDoc = XDocument.Load(.....);
xDoc.Save(wr, SaveOptions.DisableFormatting);
var newXml = wr.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:46:43.803

谢谢大家的建议。在您的帮助下，我想出了这个解决方案：

```
// Open up the same file and remove xml auto-formatting
XmlReader reader = XmlReader.Create(readFileName);
XmlTextWriter writer = new XmlTextWriter(writeFileName, null);
while (reader.Read())
{
switch (reader.NodeType)
{
    case XmlNodeType.Element:
        // if 1st node after openening tag is analyst name then setup a linefeed
        if (reader.Name.Equals(Path.GetFileNameWithoutExtension(readerFileName)))
        {
            writer.WriteStartElement(reader.Name);
            writer.WriteString("\r\n");
        }
        else
        {
            // setup linefeed after every element
            writer.WriteStartElement(reader.Name);
            writer.WriteAttributes(reader, true);
            if (reader.IsEmptyElement)
            {
                writer.WriteEndElement();
                writer.WriteString("\r\n");
            }
        }
        break;

    case XmlNodeType.Text:
        writer.WriteString(reader.Value);
        break;

    case XmlNodeType.EndElement:
        writer.WriteEndElement();
        break;

    // handles opening xml tag
    case XmlNodeType.XmlDeclaration:
    case XmlNodeType.ProcessingInstruction:
        writer.WriteProcessingInstruction(reader.Name, reader.Value);
        writer.WriteString("\r\n");
        break;
}
}
// close reader & writer
writer.Flush();
reader.Close(); 
```

# c - 我应该使用哪个 C 编译器来创建自己的简单操作系统？

> ID：10523511
> 
> 赞同：0
> 
> 时间：2012-05-09T20:19:34.743
> 
> 标签：c, compiler-construction, operating-system, nasm

本教程展示了如何编写我自己的简单操作系统：

**编写自己的操作系统教程**：http: [//joelgompert.com/OS/TableOfContents.htm](http://joelgompert.com/OS/TableOfContents.htm)

* * *

一切都很好，但开发语言是汇编。我想用 C 编程语言开发我的简单操作系统。

我想要一个 C 编译器，它将我的 C 源代码转换为汇编源代码，然后我用`NASM`.

编译器**应该可以**创建由`NASM`.

使用 GCC() 转换为汇编源文件的 C 源文件`gcc -S OS.c masm=intel`在我使用`NASM`.

我什至不使用任何 C 标准库`stdio.h`或`math.h`. 我想要一个编译器

*   将 C 源代码转换为汇编源代码。
*   或者从 C 源代码创建平面二进制文件（如`NASM`或`FASM`输出）的编译器。

我应该使用哪个 C 编译器来创建自己的简单操作系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:48:20.460

根据定义，编译器会将您的高级代码编译为机器语言，即汇编程序。如果您希望能够查看汇编程序，可以使用 GCC 开关来生成汇编程序。只需在使用`-S`GCC 编译 C 代码时使用该开关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:58:43.513

我对此没有任何实际经验，但您可能想看看：

*   [有没有办法让 gcc 输出原始二进制文件？](https://stackoverflow.com/questions/1647359/is-there-a-way-to-get-gcc-to-output-raw-binary)

*   [http://www.embeddedrelated.com/usenet/embedded/show/99290-1.php](http://www.embeddedrelated.com/usenet/embedded/show/99290-1.php)

*   [寻找 x86 的 16 位 c 编译器](https://stackoverflow.com/questions/6059810/looking-for-16-bit-c-compiler-for-x86)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-01T18:39:44.177

如果您想用 c 编写自己的操作系统，请在 YouTube 上查找 Pritam Zope。他很聪明，有很多关于用 c 和 asm 编写自己的内核和引导加载程序的视频。我也有兴趣编写自己的操作系统，我做了一些研究并决定最好在 asm 中工作。如果您对使用 asm 而不是 c 感兴趣，还可以查看 theMike97。这是我在 asm 中编写的一个简单的引导加载程序，包含您感兴趣的内容。它只是打印你好世界。

```
org 0x7c00
mov si, message       ;The message location *you can change this*
call print            ;CALL tells the pc to jump back here when done
jmp $
print:
  mov ah, 0Eh         ;Set function

.run:
  lodsb               ;Get the char
; cmp al, 0x00        ;I would use this but ya know u dont so use:
  cmp al, 0           ;0 has a HEX code of 0x48 so its not 0x00
  je .done            ;Jump to done if ending code is found
  int 10h             ;Else print
  jmp .run            ; and jump back to .run

.done:
  ret                 ;Return

message           db  'Hello, world', 0 ;IF you use 0x00
;message          db  'Hello, world', 0x00

times 510-($-$$) db 0
dw 0xaa55
~ 
```

将此代码保存在名为 main.asm 的文件中 编译它并`nasm -fbin main.asm -o main.bin` 运行它`qemu-system-x86_64 main.bin`

# c++ - Building Boost - 找不到 windows.h

> ID：10523515
> 
> 赞同：2
> 
> 时间：2012-05-09T20:19:50.003
> 
> 标签：c++, boost

我正在尝试在 Windows 7 64 位上构建提升。运行引导程序给出

> execnt.c(29)：致命错误 C1083：无法打开包含文件：'windows.h'：没有这样的文件或目录

和其他一些。我有visual studio 9.0，我有windows.h的地方在

*   C:\Program Files (x86)\Microsoft SDKs\Windows\v5.0\Include**W**indows.h，大写 W
*   C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include**W**indows.h
*   C:\Program Files (x86)\Microsoft Visual Studio 9.0\SmartDevices\SDK\Smartphone2003\Include\windows.h

我安装了 SDK，甚至完全重新安装了 Visual Studio。有什么办法可以解决这个问题吗？

*   **小更新**：我安装了 Visual C++ 2010 express 并且从 IDE 中我可以包含并且测试项目编译得很好，但是当我使用提示时 NO 项目可以找到标题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:28:25.457

尝试从 VS 控制台运行 boost 构建，而不是尝试运行“cmd”。它可能在 VS 的开始菜单条目中的某个位置（过去一直如此）。它过去也可以从 VS 本身的工具下获得，但我认为他们在那里删除了它。

这个版本只是 cmd，但它运行一个批处理脚本，设置了一堆非常重要的环境变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:35:28.430

供任何寻找相同错误的人将来参考

我在没有注册表版本权限的情况下安装了 Visual Studio，所以我没有设置任何环境变量，那些提升库 / libxml2 等在调用 cl 编译器时寻找的变量

允许自己编辑注册表并卸载/重新安装所有与 Visual Studio 相关的程序解决了它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T17:24:17.417

使用您喜欢的任何方式使用管理员权限编辑 %VS90COMNTOOLS%vsvars32.bat，例如。

```
runas /user:Administrator "notepad %VS90COMNTOOLS%vsvars32.bat" 
```

查找部分

```
:GetWindowsSdkDirHelper
@for /F "tokens=1,2*" %%i in ('reg query "%1\SOFTWARE\Microsoft\Microsoft SDKs\Windows" /v "CurrentInstallFolder"') DO (
    if "%%i"=="CurrentInstallFolder" ( 
```

将其更改为

```
:GetWindowsSdkDirHelper
@for /F "tokens=1,2*" %%i in ('reg query "%1\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v6.0a" /v "InstallationFolder"') DO (
    if "%%i"=="InstallationFolder" ( 
```

当您安装较新版本的 Windows SDK 时，它会更新 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\CurrentInstallFolder 以指向较新版本。

不幸的是，Visual Studio 2008 用来设置其路径的批处理文件使用此注册表项来识别 Windows SDK 的位置，因此它没有指向适用于 VS2008 (6.0a) 的 Windows SDK 版本，而是指向要安装的最新版本。

编辑注册表是一种选择。更好的选择是更改批处理文件，以便它从注册表中获取正确的路径，如上所述。

# python - Create User Specific Objects in Django

> ID：10523516
> 
> 赞同：0
> 
> 时间：2012-05-09T20:19:58.880
> 
> 标签：python, django, object, models

Ive been trying to create a django project that has users and those users can add titles of books they have created. Only the user will be able to view the titles of his books. I was wondering how can I create a class in models.py, forms.py, & views.py that will tie the user and the titles of their books together. Here is what I have so far.

models.py

```
from django.db import models
from django.contrib.auth.models import User

class Scripter(models.Model):
    user = models.OneToOneField(User)
    name = models.CharField(max_length=30)

    def __unicode__(self):
        return self.name

class Title(models.Model):
    author = models.ForeignKey(Scripter)

    def __unicode__(self):
        return self.script_title 
```

forms.py

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from scripters.models import Scripter, Title

class RegistrationForm(ModelForm):
    username = forms.CharField(label=(u'User Name'))
    email = forms.EmailField(label=(u'Email Address'))
    password = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))
    password1 = forms.CharField(label=(u'Verify Password'), widget=forms.PasswordInput(render_value=False))

    class Meta:
        model = Scripter
        exclude = ('user',)

    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError("User Name has been taken!")

    def clean(self):
        if self.cleaned_data['password'] != self.cleaned_data['password1']:
        raise forms.ValidationError("The passwords did not match")
        else:
            return self.cleaned_data

class LoginForm(forms.Form):
    username = forms.CharField(label=(u'Username'))
    password = forms.CharField(label=(u'Password'), widget=forms.PasswordInput(render_value=False))

class CreateScript(ModelForm):
    title = forms.CharField(label=(u'Script Title'))

    class Meta:
        model = Title

    def clean_title(self):
        title = self.cleaned_data['title']
        return title 
```

views.py

```
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User
from django.contrib.auth.decorators import login_required
from django.shortcuts import render_to_response
from django.template import RequestContext
from scripters.forms import RegistrationForm, LoginForm, CreateScript
from scripters.models import Scripter, Title
from django.contrib.auth import authenticate, login, logout

def ScripterRegistration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method =='POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(username=form.cleaned_data['username'],
                email = form.cleaned_data['email'],
                password = form.cleaned_data['password']
            )
            user.save()
            scripter = Scripter(user=user, name=form.cleaned_data['name'])
            scripter.save()

            return HttpResponseRedirect('/profile/')
        else:
            return render_to_response('index.html', {'form': form}, context_instance=RequestContext(request))
    else:
        form = RegistrationForm()
        context = {'form': form}
        return render_to_response('index.html', context, context_instance=RequestContext(request))

@login_required
def Profile(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/login/')
    Scripter = request.user.get_profile
    context = {'Scripter': Scripter}
    return render_to_response('profile.html', context, context_instance=RequestContext(request))

def LoginRequest(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        submit = LoginForm(request.POST)
        if submit.is_valid():
            username = submit.cleaned_data['username']
            password = submit.cleaned_data['password']
            scripter = authenticate(username=username, password=password)
            if scripter is not None:
                login(request, scripter)
                return HttpResponseRedirect('/profile/')
            else:
                return HttpResponseRedirect('/login/')
    else:
        submit = LoginForm()
        context = {'submit': submit}
        return render_to_response('login.html',context, context_instance=RequestContext(request))

def LogoutRequest(request):
    logout(request)
    return HttpResponseRedirect('/login/')

@login_required
def NewScript(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/login/')
    if request.method =='POST':
        title_form = CreateScript(request.POST)
        if title_form.is_valid():
            title = User.objects.get_or_create(
                Title = title_form.cleaned_data['title'],
            )
            title.save()
            script = Title(script_title=title_form.cleaned_data['title'])
            script.save()

            return HttpResponseRedirect('/edit/')
        else:
            return render_to_response('NewScript.html', {'title_form': title_form}, context_instance=RequestContext(request))
    else:
        title_form = CreateScript()
        context = {'title_form': title_form}
        return render_to_response('NewScript.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:46:50.533

我认为您要问的是如何获取特定用户拥有的标题列表。

这很容易使用反向关系：

```
scripter.title_set.all() 
```

将为您提供 Scripter 实例拥有的所有书籍。

# python - 为什么 BeautifulSoup 不能在 Python 的表中找到文本？

> ID：10523522
> 
> 赞同：0
> 
> 时间：2012-05-09T20:20:16.660
> 
> 标签：python, beautifulsoup

我正在尝试检查是否在表格中找到了数值。为什么这段代码在这个表中找不到数字文本“699”？print 语句给出的值为“None”。

```
html = """

<table>
December 31,                            1997     1996     1995     1994     1993
Allowance for credit losses--loans       699      773
Allowance for credit losses--
  trading assets                         285      190
Allowance for credit losses--
  other liabilities                       13       10
- --------------------------------------------------------------------------------
   Total                              $  997   $  973   $  992   $1,252   $1,324
================================================================================
</table>

"""

soup = BeautifulSoup(''.join(html))
table = soup.find('table')
test = table.find(text='699')
print test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:42:34.683

`table.find()`将搜索表格内的所有标签，但表格内没有标签。只有一个字符串，它恰好是一个 ASCII 表，它的格式绝不是 HTML。

如果要使用 BeautifulSoup 解析表格，则需要先将其转换为 HTML 表格。否则，您可以使用`table.string`获取字符串本身并使用正则表达式解析它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:53:35.367

如果您将[字符串作为参数传递给 Beautiful Soup 的 find() 方法](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#a-string)，Beautiful Soup 会查找该确切字符串。传入 text='699' 将找到字符串“699”，但不会找到包含“699”的更长字符串。

要查找包含子字符串的字符串，可以使用自定义函数或正则表达式：

```
 import re
 table.find(text=re.compile('699')
 table.find(text=lambda x: '699' in x) 
```

# git - `git commit -a` shows that directory has uncommitted changes even after they are added

> ID：10523524
> 
> 赞同：0
> 
> 时间：2012-05-09T20:20:18.033
> 
> 标签：git

I have the following tree:

```
Staged:  
foo
foo/a.txt  
foo/b.txt  

Unstaged:  
foo/c.txt 
```

If I `git add foo/c.txt` and `git commit -a` I see the following in vi:

```
# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   foo/a.txt
#       modified:   foo/b.txt
#       new file:   foo/c.txt
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       foo/ 
```

I get scared that something might be missing, so I back out of the commit and `git add -A; git commit` and then I see the following in vi:

```
# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   foo/a.txt
#       modified:   foo/b.txt
#       new file:   foo/c.txt 
```

Which is normal.

**EDIT**

`foo/` is not in my `.gitignore`
`foo/a.txt` and `foo/b.txt` were not originally staged. I just added them with `git commit -a`
`foo/` was not a symlink, file, or another repository

Why does `foo/` show up untracked initially? I'm just trying to save some keystrokes here.

To complicate matters, this only sometimes reproducible. I'm running `git version 1.7.7.5 (Apple Git-26)`

**MORE EDIT**

The following commands:

```
git init foo
cd foo
mkdir bar
cd bar
touch 1
touch 2
cd ..
git add -A
git commit
echo 1 >> bar/1
echo 2 >> bar/2
git commit -a 
```

Produce the following status in my editor:

```
# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       modified:   bar/1
#       modified:   bar/2
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       bar/ 
```

# database-design - 数据库设计：表还是列？

> ID：10523528
> 
> 赞同：0
> 
> 时间：2012-05-09T20:20:37.337
> 
> 标签：database-design

2个快速问题：

我已尽力了解规范化形式，但不确定这种具体情况。

1.  我有一个事件。
2.  一个事件有很多实例。
3.  一个实例有：食物、人、成本、评估、位置等。

食物、人员、成本等应该各自获得自己的表还是只是作为实例表 (BLOB) 中的列？我没有理由认为他们每个人都需要一个完整的表，因为它们**只**属于一个实例，并且不会被共享。然而……我不知道未来是否会给我理由让他们成为他们自己的人，那么把他们当作自己的人会更好吗？

其次，**如果**所有这些都应该是他们自己的表，那么也存储事件外键是否有用？如果我想为一个事件调用每个食物列表而不考虑实例，或者我只是从一个事件中获取所有实例，然后调用每个实例的信息。如果我预计该调用会发生，这是否足以添加密钥或者这是糟糕的计划？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:33:27.707

在你走上这条路并后悔你的决定之前，不妨在这里和现在规划未来。将您的实例项目（食物、人员、成本等）存储在单独的表中可能会更好。Instance -> Instance Item 是多对多关系，您需要在对象表之间建立一些链接表以允许这种多对多关系。

```
Event | EventID
Instance | InstanceID, EventID
InstanceFood | InstanceID, FoodID
InstancePerson | InstanceID, PersonID
...
Food | FoodID, FoodName
Person | PersonID, PersonName 
```

在链接表的情况下，primaryKey 是 InstanceID 和另一个 id 值的组合。使用此设置，无需在您的对象（食物、人员）表中存储事件 ID。如果您想知道某个特定的人与哪些事件相关联，只需将 Person 与 Instance Person 和 Instance 连接起来，即可获取所有关联的 EventID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:37:57.843

您的模型未指定。`Event`“有”成本是什么意思？它是以美分表示的单一总计吗？那属于数字`COST`列。它是几种收费产品或服务的明细吗？然后它必须进入一个单独的表，因为这是实现 1:n 关系的唯一明智的方法。同样，`Evaluation`一个分数是从 1 到 10 吗？柱子。它是一个结构化的问卷，有几个（甚至，上帝保佑，数量*不定*）问答位置？桌子。只有人数重要吗？柱子。相关人员的*身份*重要吗？桌子。

至于 2.，如果您有关联的表包含 1:n 数据，那么真的没有办法让它们通过外键引用“拥有”记录。例如，如果您确实需要一个表来模拟 an`Instance`和之间的 1:n 关系`People`，那么`People`必须有一个`InstanceId`列。

# c# - sqlite插入或替换datagridview C#

> ID：10523532
> 
> 赞同：0
> 
> 时间：2012-05-09T20:21:12.103
> 
> 标签：c#, sqlite, datagridview

关于 Sqlite 插入或替换命令。

如果不存在，我正在插入。插入/更新的值来自绑定到数据表的 datagridview。数据表有一个 TID 列，它是主键。它还有其他列，如 Tname、TUtility....

对于更新语句，TID 有一个值并且运行良好。但是对于插入语句，我希望自动填充序列号（即 TID 列）。

```
 private void SaveData(DataGridView dgv)
            {
                using (SQLiteConnection conn = new SQLiteConnection(connString))
                {

                    conn.Open();
                    dt = dt.GetChanges();
                    if (dt.Rows.Count > 0)
                    {
                        int dtlength = dt.Rows.Count;
                        DataRow[] arr = new DataRow[dtlength];

                        dt.Rows.CopyTo(arr, 0);
                        SQLiteCommand upCmd = new SQLiteCommand(
      @"INSERT OR REPLACE
    INTO
      [Table1](
        [TID],
        [TName],
        [TUtility],
        [TType])values(@TID,@Tname,@TUtility,@TType),conn);
       for (int i = 0; i < arr.Length; i++)
                        {
                            upCmd.Parameters.AddWithValue("@TID", Convert.ToInt32(arr[i]["SNo"]));
                            upCmd.Parameters.AddWithValue("@TName", arr[i]["Utility"].ToString());
                            upCmd.Parameters.AddWithValue("@TUtility", arr[i]["Plantname"].ToString());
                            upCmd.Parameters.AddWithValue("@TType", arr[i]["PlantType"].ToString())
                            da.UpdateCommand = upCmd;

                            this.da.UpdateCommand.ExecuteNonQuery();
                        } 
```

我应该如何添加这个 TID 值，以便当用户插入新行时，它应该自动输入序列号。我的意思是：假设 DGV 中当前有 4 行。DGV 处于编辑模式 (*)。我正在添加一个新行。一旦用户尝试在新行中输入一些数据，应该已经填充了一个序列号。

谢谢孙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:18:34.970

我不确定我是否理解您的问题，但为什么在您执行 INSERT 时不将 NULL 设置为 TID。由于 TID 是主键，sqlite 会自动插入值。

根据[Sqlite FAQ](http://sqlite.org/faq.html#q1)它说这是主键

> 每当您在表的该列中插入 NULL 时，NULL 都会自动转换为一个整数，该整数比该列在表中所有其他行的最大值大 1，如果表为空，则为 1。

# mysql - MySQL：INSERT INTO 混合了静态和动态值

> ID：10523533
> 
> 赞同：3
> 
> 时间：2012-05-09T20:21:13.850
> 
> 标签：mysql, insert

我正在尝试将数据从一张表“虹吸”到另一张表。我遇到的问题是新表中的一些数据是静态的，其他数据是从现有表中复制的。让我从显示我试图运行的查询开始：

```
INSERT INTO current_cart 
    (cart_ID, 
    cart_PO, 
    cart_user, 
    cart_date, 
    cart_qty, 
    cart_sku, 
    cart_description, 
    cart_price, 
    cart_linetotal) 
VALUES 
    ('$cartID', 
    '$poNumberNew', 
    '$email', 
    '$lineDate',
SELECT 
    orderdetail_qty, 
    orderdetail_sku, 
    orderdetail_description, 
    orderdetail_price, 
    orderdetail_linetotal
FROM orderdetail
WHERE orderdetail_custemail = $email AND orderdetail_po = $poNumber) 
```

显然，所有 PHP 变量都是事先声明的。基本上我运行的是一个购物车。此查询将从以前的订单中获取商品并将它们输入新的购物车，以便我们的客户可以根据以前的订单开始新的订单。

我遇到的问题是，当记录的某些数据是静态的（cartID、poNumberNew、email 和 lineDate）并且其他信息来自不同的表时，如何将记录插入表中？我希望我可以在不创建循环重复查询的情况下做到这一点，无论客户复制的顺序中有多少项目......我认为这会严重阻碍我们的网站。

我在过去遇到的许多其他 Web 开发问题上看到了无数很棒的答案，我希望 stackoverflow 社区可以在这里帮助我......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:25:16.133

在 SELECT 语句中，您可以有一个返回常量的列。例如，

```
INSERT INTO current_cart 
    (cart_ID, 
    cart_PO, 
    cart_user, 
    cart_date, 
    cart_qty, 
    cart_sku, 
    cart_description, 
    cart_price, 
    cart_linetotal) 

SELECT 
    '$cartID', 
    '$poNumberNew', 
    '$email', 
    '$lineDate',
    orderdetail_qty, 
    orderdetail_sku, 
    orderdetail_description, 
    orderdetail_price, 
    orderdetail_linetotal
FROM orderdetail
WHERE orderdetail_custemail = $email AND orderdetail_po = $poNumber) 
```

# java - Java Spring：出现错误“未知属性子元素： "

> ID：10523535
> 
> 赞同：2
> 
> 时间：2012-05-09T20:21:21.417
> 
> 标签：java, spring

我正在尝试对 ioc 使用 util:constant 标记，但收到以下错误消息：

> 线程“主”org.springframework.beans.factory.BeanDefinitionStoreException 中的异常：在类路径资源 [spring.xml] 中定义名称为“threadPoolExecutor”的 bean 注册时出错：未知属性子元素：<util:constant>

这是我的xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:util="http://www.springframework.org/schema/util"
 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
 http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util-3.1.xsd">

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>classpath:config.properties</value>
    </property>
</bean>

<bean id="main" class="pikefin.Main">
<property name="executorSample" ref="executorSample"/>
</bean>

<bean id="executorSample" class="pikefin.ExecutorSample">
    <constructor-arg ref="threadPoolExecutor" />

</bean>

<bean id="threadPoolExecutor" class="java.util.concurrent.ThreadPoolExecutor">
    <constructor-arg index="0" value="2"/>
    <constructor-arg index="1" value="2"/>
    <constructor-arg index="2" value="10"/>
    <constructor-arg index="3"><util:constant static-field="java.util.concurrent.TimeUnit.SECONDS"/></constructor-arg>
    <constructor-arg index="4" ref="arrayBlockingPool"/>
</bean>

<bean id="arrayBlockingPool" class="java.util.concurrent.ArrayBlockingQueue">
    <constructor-arg value="5"/>
</bean>

</beans> 
```

更新：

这是我添加了标签的 xml，`<value>`它会导致不同的错误消息：

```
发现以元素“util:constant”开头的无效内容。此时不需要子元素。
```

（旁注：由于某种原因，我的格式控件在 SO 中发布时消失了）

```
<?xml 版本="1.0" 编码="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:util="http://www.springframework.org/schema/util"
 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
 http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <属性名称="位置">
        <value>类路径：config.properties</value>
    </属性>
</豆>

<bean id="main" class="pikefin.Main">
<property name="executorSample" ref="executorSample"/>
</豆>

<bean id="executorSample" class="pikefin.ExecutorSample">
    <constructor-arg ref="threadPoolExecutor" />

</豆>

<bean id="threadPoolExecutor" class="java.util.concurrent.ThreadPoolExecutor">
    <constructor-arg index="0" value="2"/>
    <constructor-arg index="1" value="2"/>
    <constructor-arg index="2" value="10"/>
    <constructor-arg index="3">
        <值>
            <util:constant static-field="java.util.concurrent.TimeUnit.SECONDS"/>
        </值>
    </constructor-arg>
    <constructor-arg index="4" ref="arrayBlockingPool"/>
</豆>

<bean id="arrayBlockingPool" class="java.util.concurrent.ArrayBlockingQueue">
    <constructor-arg value="5"/>
</豆>

</beans>

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:32:02.967

对于枚举，您可以直接分配值，Spring 会负责将其绑定到正确的枚举：

```
<constructor-arg index="3" value="SECONDS"> 
```

此外，您的原始条目对我来说非常有用：

```
<bean id="threadPoolExecutor" class="java.util.concurrent.ThreadPoolExecutor">
    <constructor-arg index="0" value="2"/>
    <constructor-arg index="1" value="2"/>
    <constructor-arg index="2" value="10"/>
    <constructor-arg index="3"><util:constant static-field="java.util.concurrent.TimeUnit.SECONDS"/></constructor-arg>
    <constructor-arg index="4" ref="arrayBlockingPool"/>
</bean> 
```

# ruby - get.chomp() 与 STDIN.gets.chomp() 有什么区别？

> ID：10523536
> 
> 赞同：37
> 
> 时间：2012-05-09T20:21:26.143
> 
> 标签：ruby

它们是相同的，还是两个命令之间存在细微差别？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-09T20:27:30.400

`gets`将使用`Kernel#gets`，它首先尝试读取通过`ARGV`. 如果 中没有文件`ARGV`，它将使用标准输入代替（此时它与`STDIN.gets`.

注意：正如 echristopherson 指出的那样，`Kernel#gets`实际上会退回到`$stdin`，而不是`STDIN`。但是，除非您分配`$stdin`给不同的输入流，否则默认情况下它将与 相同`STDIN`。

[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-gets](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-gets)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-11-05T21:21:15.770

`gets.chomp()``ARGV`=先读

`STDIN.gets.chomp()`= 读取用户的输入

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-19T01:49:19.617

如果您的 color.rb 文件是

```
first, second, third = ARGV

puts "Your first fav color is: #{first}"
puts "Your second fav color is: #{second}"
puts "Your third fav color is: #{third}"

puts "what is your least fav color?"
least_fav_color = gets.chomp

puts "ok, i get it, you don't like #{least_fav_color} ?" 
```

你在终端运行

```
$ ruby color.rb blue yellow green 
```

它会抛出一个错误（没有这样的文件错误）

现在在下面的行中用“stdin.gets.chomp”替换“gets.chomp”

```
least_fav_color = $stdin.gets.chomp 
```

并在终端中运行以下命令

```
$ ruby color.rb blue yellow green 
```

然后你的程序运行！

基本上，一旦您从一开始就开始调用 ARGV（正如 ARGV 设计的那样），gets.chomp 就不能再正常工作了。是时候引入大炮了：$stdin.gets.chomp

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-20T12:30:33.153

因为如果 ARGV 中有东西，默认的 gets 方法会尝试将第一个文件视为文件并从中读取。在这种情况下，要从用户的输入（即标准输入）中读取，您必须明确使用它 STDIN.gets。

# javascript - 在没有标题的花哨的盒子上显示叠加层

> ID：10523537
> 
> 赞同：0
> 
> 时间：2012-05-09T20:21:32.577
> 
> 标签：javascript, html, css, fancybox

我使用花哨的框来显示图像，并使用标题在图像上添加元素以在用户悬停图像时显示。
但是当我显示拇指并将它们悬停时，会出现带有标题的工具提示。
是否可以使用其他东西在图像悬停时显示元素而不是标题或以某种方式隐藏此标题。

```
<a class="fancybox-button" rel="fancybox-button" href="/pro/Uploads/..." title="hover element>
                        <img src="..." alt="">
                    </a> 
```

# ios - self.navigationController.tabBarController.selectedIndex 不起作用

> ID：10523538
> 
> 赞同：4
> 
> 时间：2012-05-09T20:21:32.807
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uitabbarcontroller

我有一个`UITabBarController`包含 4 个不同的`UIViewControllers`.

在第一个选项卡上有一个`UINavigationViewController`包含它的子项`UIViewController`。在不点击标签栏的情况下，我想将用户带到第二个标签上。为此，我尝试了：

`self.navigationController.tabBarController.selectedIndex = 1;`

但它不起作用。

忽略任何错误我是新手。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-12-10T17:18:49.037

如果设置委托试试这个：

```
self.selectedIndex = 1; 
```

你是 tabBarController :)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T20:31:31.550

在尝试更改选项卡之前执行以下操作：

```
UITabBarController *tab = self.tabBarController;

if (tab) {
   NSLog(@"I have a tab bar");
   [self.tabBarController setSelectedIndex: 1];
}
else {
   NSLog(@"I don't have one");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T11:53:44.910

为了调用`tabbarcontroller.selectedindex`你必须从导航控制器中找出 tabbarcontroller 如果你不使用 navigationController 上的 push 只需使用 navigationController 的 topViewController 属性来获取你的 tabBarController 的实例并将它分配给 UITabBarController 和我们 selectedIndex 这将工作正常

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T11:11:29.970

尝试将您的选项卡切换代码移动到**viewDidLoad**

我验证这适用于 xcode 4 中内置的选项卡式应用程序模板项目

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tabBarController.selectedIndex = 1;
} 
```

我还会看一下您的 AppDelegate 类，以了解与此类似的内容

```
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
self.window.rootViewController = self.tabBarController; 
```

如果您在任何地方都看不到这些行，那么您需要在代码中的其他位置找到 UITabBarViewController 正在初始化的位置，并改用该对象指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T20:26:47.997

试试看嘛

```
self.tabBarController.selectedIndex = 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-18T09:20:59.840

我们应该把下面的部分放在 viewDidAppear 中。

```
 - (void)viewDidAppear:(BOOL)animated
{
NSArray *ary = [self.tabBarController viewControllers];
    UIViewController *vc = ary[3];
    [self.tabBarController setSelectedIndex:3];
    [self.tabBarController setSelectedViewController:vc];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-24T04:55:28.863

如果您正在呈现一个新控制器（不同于当前屏幕上的控制器），您应该在函数的完成块中设置索引以呈现您的视图控制器。如果您在呈现之前设置它，它可能无法正常工作。

就我而言，我已将选项卡控制器嵌入到导航控制器中。我展示了新的导航控制器`newNavContoller`，一旦它出现，我在我的标签控制器中设置索引`tvc`：

```
currentViewController?.presentViewController(newNavController, animated: true, completion: {tvc.selectedIndex = selectedIndex}) 
```

# validation - 我应该验证哪种 doctype 以使 IE7 最容易以标准模式呈现？

> ID：10523540
> 
> 赞同：0
> 
> 时间：2012-05-09T20:21:36.240
> 
> 标签：validation, xhtml, quirks-mode

我正在开发一个据称是“XHTML 1.0”的大型网站，但它与有效的 XHTML 相去甚远，更不用说有效的 HTML。

我们被迫支持 IE7，而无效代码导致许多地方出现无法修复的问题。我已经研究过这个问题，解决它的唯一方法是让 IE7 以标准模式呈现网站。

由于让网站验证已经是一项艰巨的任务，我想我不妨建议更新为 HTML5 文档类型。

但由于我们的主要要求是支持 IE7，并且它以 IE7 标准模式呈现页面，我想知道是否最好验证为 HTML 4.01 过渡文档类型或其他一些文档类型。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:04:15.520

就让 IE7 以最接近标准的模式工作而言，这三种 doctype 的工作完全相同：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<!DOCTYPE html> 
```

（请注意，前两个的 Transitional 对应物的工作明显不同）

在使严重无效的网站有效方面，所需的工作将有所不同，但数量非常相似。但是，请避免对 XHTML 1.0 进行验证，因为 IE7 无法以与验证器相同的方式解析 XHTML，因此您的有效 XHTML 确实是损坏的 HTML。

如果您愿意，确实没有任何好的技术理由可以说明您不应该迁移到 HTML5，但同时它也不是灵丹妙药。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:03:59.887

就个人而言，我会选择 XHTML Strict。[您可以在此处](http://hsivonen.iki.fi/doctype/)了解有关以基于 doctype 的模式呈现的浏览器的更多信息。但是，您对 IE7 和任何严格的文档类型（包括 HTML 和 XHTML）都很清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T22:29:54.330

进一步研究，似乎最容易验证到 XHTML 1.0。我认为验证到 HTML5 会更简单，但它实际上使用 HTML5 文档类型比 XHTML 文档类型引发更多验证错误。这是因为 HTML5 不允许大量使用中的表示性 HTML 属性。奇怪的是，HTML5 还可以捕获表格行中的列太少等问题，而 XHTML 验证似乎并不在意。

所以一般来说，看起来答案就是坚持使用原始文档类型。切换文档类型并不能解决任何无效代码并带来额外的无效性。

# java - 使用ANTLR对Java源文件进行静态分析

> ID：10523543
> 
> 赞同：9
> 
> 时间：2012-05-09T20:22:06.010
> 
> 标签：java, antlr

有没有人有使用 ANTLR 语法文件和 Java 源代码来分析 Java 源代码的完整实现（可能是 github 或 googlecode）。例如，我希望能够简单地计算变量、方法等的数量。

还使用最新版本的 ANTLR。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T11:55:45.427

我想我会在午休时间解决这个问题。这可能无法完全解决您的问题，但可能会给您一个起点。该示例假定您在同一目录中执行所有操作。

1.  从 GitHub下载[ANTLR 源代码。](https://github.com/antlr/antlr3/tarball/master)来自 ANTLR 站点的预编译“完整”JAR 包含一个已知错误。GitHub 存储库已修复。

2.  提取 ANTLR 压缩包。

    ```
    % tar xzf antlr-antlr3-release-3.4-150-g8312471.tar.gz
    ```

3.  构建 ANTLR“完整”JAR。

    ```
    % cd antlr-antlr3-8312471
    % mvn -N install
    % mvn -Dmaven.test.skip=true
    % mvn -Dmaven.test.skip=true package assembly:assembly
    % cd -
    ```

4.  下载[Java 语法](http://www.antlr.org/grammar/1207932239307/Java1_5Grammars/Java.g)。还有其他的，但我知道这个有效。

5.  将语法编译为 Java 源代码。

    ```
    % mkdir com/habelitz/jsobjectizer/unmarshaller/antlrbridge/generated
    % mv *.g com/habelitz/jsobjectizer/unmarshaller/antlrbridge/generated
    % java -classpath antlr-antlr3-8312471/target/antlr-master-3.4.1-SNAPSHOT-completejar.jar org.antlr.Tool -o com/habelitz/jsobjectizer/unmarshaller/antlrbridge/generated Java.g
    ```

6.  编译 Java 源代码。

    ```
    % javac -classpath antlr-antlr3-8312471/target/antlr-master-3.4.1-SNAPSHOT-completejar.jar com/habelitz/jsobjectizer/unmarshaller/antlrbridge/generated/*.java
    ```

7.  添加以下源文件 Main.java。

    ```
    import java.io.IOException;
    import java.util.List;

    import org.antlr.runtime.*;
    import org.antlr.runtime.tree.*;

    import com.habelitz.jsobjectizer.unmarshaller.antlrbridge.generated.*;

    public class Main {
        public static void main(String... args) throws NoSuchFieldException, IllegalAccessException, IOException, RecognitionException {
            JavaLexer lexer = new JavaLexer(new ANTLRFileStream(args[1], "UTF-8"));
            JavaParser parser = new JavaParser(new CommonTokenStream(lexer));
            CommonTree tree = (CommonTree)(parser.javaSource().getTree());
            int type = ((Integer)(JavaParser.class.getDeclaredField(args[0]).get(null))).intValue();
            System.out.println(count(tree, type));
        }
        private static int count(CommonTree tree, int type) {
            int count = 0;
            List children = tree.getChildren();
            if (children != null) {
                for (Object child : children) {
                    count += count((CommonTree)(child), type);
                }
            }
            return ((tree.getType() != type) ? count : count + 1);
        }
    }
    ```

8.  编译。

    ```
    % javac -classpath .:antlr-antlr3-8312471/target/antlr-master-3.4.1-SNAPSHOT-completejar.jar Main.java
    ```

9.  选择您要统计的 Java 源类型；例如，`VAR_DECLARATOR`、`FUNCTION_METHOD_DECL`或`VOID_METHOD_DECL`。

    ```
    % cat com/habelitz/jsobjectizer/unmarshaller/antlrbridge/generated/Java.tokens
    ```

10.  在任何文件上运行，包括最近创建的 Main.java。

    ```
    % java -classpath .:antlr-antlr3-8312471/target/antlr-master-3.4.1-SNAPSHOT-completejar.jar Main VAR_DECLARATOR Main.java
    6
    ```

当然，这是不完美的。如果仔细观察，您可能已经注意到增强`for`语句的局部变量没有被计算在内。为此，您需要使用 type `FOR_EACH`，而不是`VAR_DECLARATOR`.

您需要对 Java 源代码的元素有很好的理解，并且能够合理猜测这些元素如何与这个特定语法的定义相匹配。您也无法进行引用计数。声明很容易，但例如计算字段的使用，需要引用解析。是指包内的类`p.C.f`的静态字段，还是指由类的静态字段存储的对象的实例字段？基本解析器不会解析像 Java 这样复杂的语言的引用，因为一般情况可能非常困难。如果您想要这种级别的控制，您将需要使用编译器（或更接近它的东西）。Eclipse 编译器是一种流行的选择。`f``C``p``f``C``p`

我还应该提到，除了 ANTLR 之外，您还有其他选择。JavaCC 是另一个解析器生成器。使用 JavaCC 作为其解析器生成器的静态分析工具 PMD 允许您编写可用于您指定的计数类型的自定义规则。

# c# - 基于变量动态创建控件

> ID：10523544
> 
> 赞同：2
> 
> 时间：2012-05-09T20:22:07.813
> 
> 标签：c#, asp.net

首先，我实际上是一名 DBA，而不是一名网络开发人员，所以……我写的东西可能看起来很难看。我正在建立一个网站（他们问我是否会尝试 /shrug），并且我有 168 个复选框在选中时具有相同的操作。但是这些操作虽然相同，但在不同的控件（与复选框相关）上执行。我可以执行以下操作，而不是使用具有 168 个条件的 switch 语句吗？

```
CheckBox myCB = (CheckBox)(sender);

String mySTR = myCB.ID.ToString();
String myGVstr = “gv” + mySTR.Substring(mySTR.IndexOf(‘cb’) + 1);
String myBTNstr = “btn” + mySTR.Substring(mySTR.IndexOf(‘cb’) + 1);

GridView myGV = myGVstr;
Button myBTN = myBTNstr;

// Do what I need to do with these controls
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:26:32.167

这似乎真的不是一件有道理的事情。也许在加载时您可以将所有控件放入一个大数组中？将每个控件放入数组需要一大段代码，但之后您可以以类似（更可靠）的方式访问它们。

如果您坚持这样做，“FindControl”方法可能会有一些用处。

[http://msdn.microsoft.com/en-us/library/486wc64h.aspx](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)

就像是...

```
GridView myGV = (GridView)FindControl(myGVstr) 
```

未经测试，但可能有效。

# java - 应用程序包的路径

> ID：10523551
> 
> 赞同：1
> 
> 时间：2012-05-09T20:22:29.143
> 
> 标签：java, android, path, io, package

我只专注于为将安装在手机内存中的应用程序制作应用程序。

有没有办法动态知道应用程序包的路径（Environment.get...？或其他一些可以使用的标志）？我担心的是，如果您还原数据库，则必须提供目标路径。根据应用程序的位置（SD卡与内部存储器），这会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T03:43:01.690

您是要获取类路径的位置，还是类本身的位置（类路径 + 包路径）？

要获取类路径的位置，您可以执行以下操作：

```
 String location = Boot.class.getProtectionDomain().getCodeSource().getLocation().getPath();
    location = URLDecoder.decode(location, "UTF-8").replaceAll("\\\\", "/"); 
```

Boot 将被替换为任何类。

# android - Android列表视图，查看来自PHP请求的数据

> ID：10523553
> 
> 赞同：1
> 
> 时间：2012-05-09T20:22:36.243
> 
> 标签：android, listview

下周我将参加一家慈善机构的“黑客马拉松”公司，我正在制作 Android 应用程序：/ 到目前为止，我所做的 Android 应用很少，所以我一直在寻找互联网上的示例，因此我希望得到您的帮助我需要但还没有找到一些。

我需要使用 PHP 请求从站点中提取一些信息到字符串类型的数组中，我知道该怎么做（感谢 stackoverflow）。

我想做的是以某种方式使用列表视图在屏幕上显示这些数据。我想在左边显示一张图片，在右边显示事件名称，然后在下一行显示成本，在下一行显示简短描述。该图像是将从 PHP 请求中检索到的链接。我试图在下面展示一个例子，如果有点混乱，对不起。

图片：活动名称

图片：成本

图片：事件的简短描述

如果有人有符合我需要的示例，我将非常感激，因为我似乎找不到任何示例。请记住，数据将存储在 String 数组中，例如 {image link, event name, cost, short desc, image link, event name, cost, short desc, image link, event name, cost, short desc, image链接、事件名称、费用、简短描述、}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T23:33:52.730

你可能不再对答案感兴趣，因为你的黑客马拉松很可能已经结束了。

然而，只是为了它的地狱：

1.  使用[JSoup](http://jsoup.org/)之类的东西来解析 PHP 页面并挑选出你喜欢的元素。它是一个很棒的库，我在许多应用程序中使用它来创建 HTML POST 请求，然后筛选响应页面
2.  建立您的数据数组，创建一些 POJO 纯粹是为了方便。
3.  将其作为列表视图显示在页面上，一个[很好的例子](http://developer.android.com/resources/tutorials/views/hello-listview.html)是在 android 开发者网站上

希望有帮助

# xcode4 - Doxygen 和 Xcode 4 - Xcode 看不到文档集

> ID：10523556
> 
> 赞同：1
> 
> 时间：2012-05-09T20:22:45.443
> 
> 标签：xcode4, doxygen

我已经为我的代码构建了 Docset，并且我正在尝试让 Xcode 在执行构建时编译 Docset。但是，Xcode 在构建后看不到文档集（DocSet 在目录中可见）。

这是我的过程：

1) 生成 doxygen 输出

```
 doxygen doxygen.config 
```

2）进入html目录并生成文档集

```
 make

[...]

14: MyCodeIOSDecoder_8h.html
15: MyCodeIOSHighLevel_8h.html
Loading symbols from [...]/source/html/org.doxygen.Project.docset/Contents/Resources/Tokens.xml
*     93 tokens processed (   0.0 sec)

Linking up related token references
Sorting tokens 
```

3) 安装文档集

```
make install

[...]
cp -R org.doxygen.Project.docset ~/Library/Developer/Shared/Documentation/DocSets 
```

4) xcode 4 中没有文档集，可能是旧的 doxygen 版本 Doxygen 版本 1.7.4-20110629

仔细检查文档集应该出现在 Xcode 4 中的位置

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:28:04.600

Let's assume Doxygen output folder is ~/Documents/myDocSet. Inside, there's the folder html.

1.  Make sure the doxyfile includes

    > ```
    > GENERATE_DOCSET        = YES 
    > ```

2.  Open the terminal

    > ```
    > cd ~/Documents/myDocSet/html
    > make install 
    > ```

3.  Launch the Applescript loadDocSet.scpt

    > ```
    > tell application "Xcode"
    > load documentation set with path
    >         "~/Library/Developer/Shared/Documentation/DocSets/myDocSet.docset"
    > end tell 
    > ```

# javascript - 如何根据 URL 的输出设置 javascript 数组？

> ID：10523557
> 
> 赞同：0
> 
> 时间：2012-05-09T20:22:46.380
> 
> 标签：javascript, html, arrays

我有一个 MVC 应用程序，当我访问某个 URL 时，它会在浏览器中产生以下输出：

```
[{"name":"Victoria Day","date":"\/Date(1337583600000)\/"},{"name":"Canada Day","date":"\/Date(1341212400000)\/"},{"name":"Civic Holiday","date":"\/Date(1344236400000)\/"},{"name":"Labour Day","date":"\/Date(1346655600000)\/"},{"name":"Thanksgiving","date":"\/Date(1349679600000)\/"},{"name":"Remembrence Day","date":"\/Date(1352707200000)\/"},{"name":"Christmas","date":"\/Date(1356422400000)\/"},{"name":"Boxing Day","date":"\/Date(1356508800000)\/"}] 
```

当然，源代码周围有一堆 html 标签。

**如何将此原始信息分配给 Javascript 数组？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:25:37.193

获取 jQuery 并使用[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/)，例如...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:34:46.417

那就是所谓的[JSON](http://www.json.org/)。[你可以使用像json2.js](https://github.com/douglascrockford/JSON-js)这样的外部库来解析它，或者如果你不关心旧浏览器，使用原生版本，

```
var myData = JSON.parse('..data'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T21:07:25.413

考虑到您的 http 请求返回您发布的原始数据，您应该能够使用：

```
var text = $.trim($(document.body).text());
var cleanedText = text.replace(/\\\/Date\(/g,"").replace(/\)\\\//g,"");
var holidays = $.parseJSON(cleanedText); // This is your array!

alert("Loaded " + holidays.length + " holidays. Fifth one is " + holidays[4].name + " celebrated on " + new Date(parseInt(holidays[4].date)).toString());

// Output(the dates should be printed with your preferred timezone offset): 
// Loaded 8 holidays. Fifth one is Thanksgiving celebrated on Mon Oct 08 2012 10:00:00 
// GMT+0300 (GTB Daylight Time) 
```

如果要解析的输出位于其他位置，则应**`text`**使用自定义选择器在 var 中通过 jQuery 加载它。请注意， var**`cleanedText`**会从日期值中删除坏字符，以便将它们解析为有效的 javascript Date 对象。

如果您还有其他问题，请发表评论。祝你好运！

JSFiddle 工作示例：[点击这里](http://jsfiddle.net/LtzTK/1/)

**编辑：**你需要[jQuery](http://jquery.com/)。

**Edit2：**我认为您需要使用`$.get`才能从自定义 url 检索数据（确保它来自同一服务器，否则您可能会遇到浏览器安全问题）。您应该对此进行一些尝试，并尝试检查您的请求是否到达服务器上的正确路径（例如，您可以在“网络”选项卡上的“开发人员工具”下的 Google Chome 浏览器上检查所有请求数据）。您应该更改的内容`function(data) {`以满足您的需要。

```
var url = 'page.html'; // You should change this with the url that returns your data.
$.get(url, function(data) {
  alert('The response is: ' + data); // Make sure it's ok
  var text = $.trim(data);
  var cleanedText = text.replace(/\\\/Date\(/g,"").replace(/\)\\\//g,"");
  var holidays = $.parseJSON(cleanedText); // This is your array!

  alert("Loaded " + holidays.length + " holidays. Fifth one is " + holidays[4].name + "           celebrated on " + new Date(parseInt(holidays[4].date)).toString());
}); 
```

# asp.net - jquery datepicker 在动态数据中工作

> ID：10523562
> 
> 赞同：0
> 
> 时间：2012-05-09T20:23:24.403
> 
> 标签：asp.net, asp.net-dynamic-data

我按照以下说明操作：[http](http://weblogs.asp.net/dotnetstories/archive/2011/07/01/a-simple-tutorial-on-asp-net-dynamic-data.aspx?CommentPosted=true#commentmessage) ://weblogs.asp.net/dotnetstories/archive/2011/07/01/a-simple-tutorial-on-asp-net-dynamic-data.aspx?CommentPosted=true#commentmessage 我有将链接添加到我的 ASP.NET 动态数据母版页，如下所示：

```
<script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-1.8.20.custom.min.js" type="text/javascript"></script>
<link href="NewStyles/ui-lightness/jquery-ui-1.8.20.custom.css" rel="stylesheet" type="text/css" /> 
```

我将此代码添加到我的 DateTime_Edit.ascx 的顶部。

```
<script type="text/javascript">
$(document).ready(function () {
    $('#<%=TextBox1.ClientID %>').datepicker();
}); 
```

但它不起作用。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T05:16:20.980

我在 src 属性中使用了 Page.ResolveURL()。像这个：

```
<script src='<%=Page.ResolveURL("~/Scripts/jquery-1.7.2.min.js")%>' type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:16:55.397

检查您的 Site.master 文件的`EnablePartialRendering`值是否`false`为`true`

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="false"/> 
```

# c# - 简化代数表达式

> ID：10523564
> 
> 赞同：8
> 
> 时间：2012-05-09T20:23:28.287
> 
> 标签：c#, math, tree, algebra

> **可能重复：**
> [简化数学表达式的策略](https://stackoverflow.com/questions/7540227/strategies-for-simplifying-math-expressions)

我有一个数学表达式解析器，它构建一棵树来表示表达式。比如说，我输入`2+y+3+y`，它的内部表示是：

![在此处输入图像描述](../Images/a2b135bb8a1742707d4e8e9968943cae.png)

现在，作为人类，我们可以立即看到这一点`2+y+3+y = 2y + 5`。我看到的计算机的棘手部分是，如果我站在左边`+`，我不知道我在另一个分支的右边还有另一个添加 - 这在评估时并不重要，但在简化 i 时看不出这怎么能做得很好。

这就是类如何组合在一起的方式： ![在此处输入图像描述](../Images/8da92dee6e6ce502334b4ca0ec69baeb.png)

我试图用谷歌搜索这个，但在这里找不到任何可以帮助我的东西。只是一些一般的航点，或一个网址或其他东西，将不胜感激

**编辑：**请注意，对于示例，我只包括添加。解析器支持如下表达式：1+2*(3^4-4/5*(1+2))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:34:20.900

由于可以用您的类结构表达的表达式集非常有限，您可以简单地计算每个变量出现的频率并将所有常量相加。

```
var nodes = tree.Flatten();

var variables = nodes
    .OfType<Variable>()
    .GroupBy(x => x.Name)
    .Select(g => new Multiplication(
        new Variable(g.Key), new Constant(g.Count())));

var constants = nodes
    .OfType<Constant>()
    .Sum(x => x.Value);

var result = new Addition(
    variables.Aggregate((x, y) => new Addition(x, y)), 
    new Constant(constants)); 
```

# perl - 在 Perl 中，如何将函数作为另一个函数的参数传递？

> ID：10523566
> 
> 赞同：7
> 
> 时间：2012-05-09T20:23:35.227
> 
> 标签：perl, oop, function, argument-passing

我写了以下 Perl 类：

```
package Menu;
use strict;

my @MENU_ITEMS;
my $HEADER = "Pick one of the options below\n";
my $INPUT_REQUEST = "Type your selection: ";

sub new {
    my $self = {};
   $self->{ITEM}   = undef;
   $self->{HEADER} = undef;
   $self->{INPUT_REQUEST} = undef;
   bless($self);
   return $self;
}

sub setHeader {
    my $self = shift;
    if(@_) { $self->{HEADER} = shift }
    $HEADER = $self->{HEADER}."\n";
}

sub setInputRequest {
    my $self = shift;
    if(@_) { $self->{INPUT_REQUEST} = shift }
    $INPUT_REQUEST = $self->{INPUT_REQUEST}." ";
}

sub addItem {
    my $self = shift;
    if(@_) { $self->{ITEM} = shift }
    push(@MENU_ITEMS, $self->{ITEM}); 
    }

sub getMenu {
    my $formatted_menu .= $HEADER;
    my $it=1;
    foreach(@MENU_ITEMS) {
        $formatted_menu.=$it.". ".$_."\n";
        $it++
      }
    $formatted_menu.=$INPUT_REQUEST;
    return $formatted_menu;
}
1; 
```

如果我调用以下 perl 脚本：

```
#!/usr/bin/perl
use strict;
use Menu;

my $menu = Menu->new();
$menu->addItem("First Option");
$menu->addItem("Second Option");
print $menu->getMenu; 
```

我将得到以下输出：

```
Pick one of the options below
1\. First Option
2\. Second Option
Type your selection: 
```

我想以一种可以将第二个参数传递给方法的方式修改给定的类`addItem()`

就像是： `$menu->addItem("First Option", &firstOptionFunction());`

并且**当且仅当** `First Option`被选中时，然后`$firstOptionFunction`被执行。

有没有办法在 Perl 中实现这种行为？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T20:25:37.640

您可能希望传递对子例程[的引用。](http://perldoc.perl.org/perlref.html)

```
$menu->addItem("First Option", \&firstOptionFunction); 
```

您的 addItem 方法可能如下所示：

```
sub addItem { ## your logic may vary
    my ( $self, $option, $code ) = @_;
    if ( $option eq 'First Option' ) {
        $code->();
    }

    $self->{ITEM} = $option;
    push @MENU_ITEMS, $option;

    return;
} 
```

正如您在评论中提到的，您可能不想将子例程作为参考传递，而是将其存储在其他地方。像这样的东西可能会起作用：

```
sub new {
    my $class = shift;
    my $self = bless {}, $class;
    $self->{f_o_code} = \&firstOptionFunction; ## use a better name than f_o_code
    return $self;
}

## add your other methods

sub addItem { ## your logic may vary
    my ( $self, $option ) = @_;
    if ( $option eq 'First Option' ) {
        $self->{f_o_code}->();
    }

    $self->{ITEM} = $option;
    push @MENU_ITEMS, $option;

    return;
} ## call like $menu->addItem( 'First Option' ); 
```

# java - 使用 Maven 在 .project 中添加 buildCommand

> ID：10523567
> 
> 赞同：0
> 
> 时间：2012-05-09T20:23:36.893
> 
> 标签：java, eclipse, maven

我需要使用 Maven在我的文件中添加一个新的*buildCommand 。*`.project`

我的`.project`文件（它是由 Maven 创建的）：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
<name>myProject</name>
<comment></comment>
<projects>
</projects>
<buildSpec>
    <buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.maven.ide.eclipse.maven2Builder</name>
        <arguments>
        </arguments>
    </buildCommand>
</buildSpec>
<natures>
    <nature>org.eclipse.jdt.core.javanature</nature>
    <nature>org.maven.ide.eclipse.maven2Nature</nature>
</natures> 
```

我必须添加以下*buildCommand*：

```
<buildCommand>
        <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
        <triggers>auto,full,incremental,</triggers>
        <arguments>
            <dictionary>
                <key>LaunchConfigHandle</key>
                <value>&lt;project&gt;/.externalToolBuilders/myLuncher.launch</value>
            </dictionary>
        </arguments>
    </buildCommand> 
```

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:03:36.063

您可以根据[文档](http://maven.apache.org/plugins/maven-eclipse-plugin/examples/provide-project-natures-and-build-commands.html)更新您的 maven pom.xml 文件：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-eclipse-plugin</artifactId>
  <version>2.9</version>
  <configuration>
    <additionalBuildcommands>
      <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
      <triggers>auto,full,incremental,</triggers>
      <arguments>
        <dictionary>     
          <key>LaunchConfigHandle</key>     
          <value>&lt;project&gt;/.externalToolBuilders/myLuncher.launch</value>
        </dictionary>
      </arguments>
    </additionalBuildcommands>
  </configuration>
</plugin> 
```

然后，当您调用`mvn eclipse:eclipse`它时，它将重新生成您添加的 .project 文件`buildCommand`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:41:34.010

感谢您的[回答](https://stackoverflow.com/a/10524031/281545)Attila - 我做了一些小的修改。我试图编辑您的帖子，但编辑不被接受...

我通过以下方式使用插件：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <version>2.7</version>
    <configuration>
        <additionalBuildcommands>
            <buildCommand>
                <name>org.eclipse.ui.externaltools.ExternalToolBuilder</name>
                <triggers>auto,full,incremental,</triggers>
                <arguments>
                    <LaunchConfigHandle>
                    &lt;project&gt;/.externalToolBuilders/myLuncher.launch
                    </LaunchConfigHandle>
                </arguments>
            </buildCommand>
        </additionalBuildcommands>  
    </configuration>
</plugin> 
```

我使用版本 2.7 而不是 2.9，因为它允许我使用命令`eclipse:m2eclipse`，然后使用带有 m2eclipse 插件的项目

# java - 是否可以在 Spring 和 Jersey 中同时返回 xml 或 json？

> ID：10523570
> 
> 赞同：2
> 
> 时间：2012-05-09T20:23:49.517
> 
> 标签：java, spring, jersey

只是和春天和球衣做一个小比较。

好奇一个方法是否可以同时返回 xml 或 json。

也许默认为 xml，但有一个可选标志将返回 json。

可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:32:36.200

您提到泽西岛，所以我假设您指的是 REST 实现。如果您的资源设置正确，Jersey 会自动将您的内容序列化为 XML 和 JSON。`@Produces`您只需为注释指明更广泛的媒体类型 ：

```
@GET
@Path("/somepath")
@Produces({MediaType.APPLICATION_JSON, MediaType.TEXT_XML})
public MyBean getData() ; 
```

`MyBean`适当的 JAXB 注释 POJO在哪里。使用此资源端点定义，调用者可以通过标头指定他们想要的内容类型`Accept:`：

```
GET http://www.example.com/somepath
Accept: text/xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:50:04.873

Spring 提供了一个 ContentNegotiatingViewResolver，旨在提供此功能。文档中的示例：

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
  <property name="mediaTypes">
    <map>
      <entry key="atom" value="application/atom+xml"/>
      <entry key="html" value="text/html"/>
      <entry key="json" value="application/json"/>
    </map>
  </property>
  <property name="viewResolvers">
    <list>
      <bean class="org.springframework.web.servlet.view.BeanNameViewResolver"/>
      <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
      </bean>
    </list>
  </property>
  <property name="defaultViews">
    <list>
      <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
    </list>
  </property>
</bean> 
```

描述了 HTML 和 JSON 之间的切换，但是可以使用 JAXB 或其他一些 XML 序列化程序轻松扩展以支持 XML。进一步阅读：

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-multiple-representations](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-multiple-representations)

我会发布一个使用 XML 和 Jersey 的示例，但我不熟悉 Jersey 的 bean。

# c# - 如何获取登录用户的下载位置（C:\Users\{UserName}\Downloads\）？

> ID：10523571
> 
> 赞同：1
> 
> 时间：2012-05-09T20:23:54.133
> 
> 标签：c#, asp.net, iis-7.5, application-pool

`C:\Users\{UserName}\Downloads`当我在 VS2010 中运行该应用程序时，它使用以下代码将文件正确下载到文件夹。

```
string userDownloadFolder = Environment.GetFolderPath(Environment.SpecialFolder.UserProfile) + "\\Downloads\\"; 
```

但是当我在 IIS 中托管应用程序时，它会转到`C:\Users\.NET 4.0 App Pool\Downloads\`

是的，应用程序池位于 .NET 4.0 应用程序池中。

如何通过在 IIS 中托管应用程序来获取登录用户的下载文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:24:16.103

ASP.NET 在服务器上运行，您在代码隐藏中所做的任何事情都是指服务器。当您在本地测试它时，您的机器充当服务器，这就是您能够将文件下载到正确位置的原因。

您无法告诉客户端下载文件的位置。出于安全目的，有意限制对客户端文件系统的访问。如果网站可以了解您的文件系统并选择下载文件的位置，您能想象安全风险吗？

# iphone - 如何在情节提要中连接 UIPickerView 数据源和委托

> ID：10523574
> 
> 赞同：0
> 
> 时间：2012-05-09T20:24:39.793
> 
> 标签：iphone, ios, uipickerview

我使用故事板在 Ios5 中创建了一个新项目，并且我的项目有一个 UIPickerView。

我创建了一个数据源和委托，但我找不到文件所有者在 IOs5 中建立连接。我应该与什么建立联系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:34:51.147

故事板和加载 .xib 文件之间的一个区别是，故事板文件中每个“场景”的视图控制器都包含在该文件中。因此，假设您的视图控制器也是您的选择器的数据源和委托（这很常见），请将视图控制器连接到这些出口而不是文件的所有者代理。（对于 .xib 文件，通常在代码中实例化视图控制器并给它一个 .xib 文件，从中加载其视图，因此视图控制器是文件的所有者。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:07:46.433

```
 - (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

        if(button_Number == 1)
        {
            UILabel *label =[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 280, 30)];

            NSString *nameStr=[arr_countryName objectAtIndex:row];
            // NSString *nameStr=[programNameArr objectForKey:@"programname"];
            label.text = nameStr;
            label.font = [UIFont boldSystemFontOfSize:14.0f];
            label.textAlignment = UITextAlignmentLeft;
            label.backgroundColor = [UIColor clearColor];
            [label autorelease];
            return label;
        }
        if (button_Number == 2)
        {
            UILabel *label =[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 280, 30)];

            NSString *nameStr=[arr_currencyCode objectAtIndex:row];
            // NSString *nameStr=[programNameArr objectForKey:@"programname"];
            label.text = nameStr;
            label.font = [UIFont boldSystemFontOfSize:18.0f];
            label.textAlignment = UITextAlignmentLeft;
            label.backgroundColor = [UIColor clearColor];
            [label autorelease];
            return label;
        }

    }

    - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
        //return (NSString*)[clientListArray objectAtIndex:row];

        if(button_Number == 1)
        {
            return (NSString*)[arr_countryName objectAtIndex:row];
        }
        if (button_Number == 2)
        {
            return (NSString*)[arr_currencyCode objectAtIndex:row];
        }
    }

    - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
        return 1;
    }

    - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{

        if(button_Number == 1)
        {
            return [arr_countryName count];
        }
        if (button_Number == 2)
        {
            return [arr_currencyCode count];
        }
    }

    - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

        selectedScrollIndex = row;

        // clientNameTxtFld.text = [clientListArray objectAtIndex:row];

        // LBL.text = [clientListArray objectAtIndex:row];

    }

    - (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex 
    {
        if(buttonIndex == 0)
        {

        }

        if (buttonIndex == 1 && button_Number == 1)
        {
            countryTxtFld.text = [arr_countryName objectAtIndex:selectedScrollIndex];
            //selected_Client_ID = [clientIDArray objectAtIndex:selectedScrollIndex]; 

            selectedScrollIndex = 0;
        }

        if (buttonIndex == 1 && button_Number == 2)
        {
            currencyTxtFld.text = [arr_currencyCode objectAtIndex:selectedScrollIndex];
            //selected_Client_ID = [clientIDArray objectAtIndex:selectedScrollIndex]; 

            selectedScrollIndex = 0;
        }
    } 
```

# ruby-on-rails - 使用 MongoID 的不区分大小写的查询条件

> ID：10523575
> 
> 赞同：1
> 
> 时间：2012-05-09T20:24:44.323
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, nosql

我有一个查询条件，它查找要匹配的元素数组（ tags_array ）：

```
User.all_in('watchlists.tags_array' => tags_array) 
```

我希望标准是不区分大小写的，这意味着我希望它匹配`%w[Ruby Web Framework]`以及`%w[RUBY WEB FRAMEWORK]`or`%w[ruby web framework]`等​​等......

这可以通过 mongoid 实现还是我必须使用外部过滤技巧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T23:26:41.370

感谢[Jordan 的支持，](https://groups.google.com/forum/?fromgroups&hl=en#!topic/mongoid/oa47I51Pb78)仅出于跟踪目的（对于我自己和其他人），我将发布整个解决方案。

是的，[Yuriy Goldshtrakh](https://stackoverflow.com/users/397364/yuriy-goldshtrakh)是对的，MongoDB 仍然不支持不区分大小写的查询，但 MongoID 有正则表达式，我唯一的疑问是“ [mu 太短](https://stackoverflow.com/users/479863/mu-is-too-short)”已经说过的性能下降，但我直到现在才检查......无论如何这里是 ：

```
 Object.const_set :Competitor, Struct.new(:html_url, :description, :watchers, :forks)
 def self.find_competitors(tags_array)
    competitors = []
    User.all_in('watchlists.tags_array' => tags_array.map{|tag|/^#{tag}/i}).only(:watchlists).each do |u|
     u.watchlists.all_in(:tags_array => tags_array.map{|tag|/^#{tag}/i}).desc(:watchers).each do |wl|
       competitors << Competitor.new(wl.html_url, wl.description, wl.watchers, wl.forks)
     end
    end
    return competitors
 end 
```

在保存/创建 mongoid 级别没有规范化，标签以大写或小写形式保存。

规范化（标签的不区分大小写匹配）完全在嵌套查询条件期间实现（它是嵌套的，因为[嵌入了一对多模型](http://mongoid.org/docs/relations/embedded/1-n.html)）。

如果您有更好的想法或代码，请发帖。

我还要感谢[Luiz K.](https://stackoverflow.com/users/587406/luiz-k)的回答，即使我不会那样做：在我看来，数据级别的规范化过于严格，失去了语义和弹性的“用户”端（实际上是标记）。无论如何，对于其他要求来说，这可能是一个很好的解决方案。

非常感谢 Luca G. Soave

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T20:31:33.887

我不认为 mongo 支持不区分大小写的选择，您可以通过将数据全部转换为特定大小写或使用正则表达式查找器来规范化数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:38:56.573

这就是我所做的：

```
def create
    @noticia = Noticia.new(params[:noticia])
    @noticia.tags = @noticia.conteudo.html_safe.split(' ')
    @noticia.tags.each_with_index do |tag, index|
      @noticia.tags[index] = @noticia.tags[index].gsub(/<\/?[^>]*>/, "")
    end 
```

我已将所有 noticia 的内容拆分为“标签”，并将它们缩小。在我的搜索中，我执行以下操作：

```
def buscar
    array = params[:query].split(' ')
    array.each_with_index do |query, index|
      array[index] = array[index].gsub(/<\/?[^>]*>/, "").downcase
    end
    @noticias = Noticia.where(:tags.all => array).paginate(:page => params[:page])
  end 
```

我也缩小了我的查询搜索
不要忘记索引`tags`字段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-10T16:39:15.777

为了在 mongo 请求中管理正则表达式（查找、更新..），
我这样做：
'p' 是一个存储要搜索的名称的变量

```
reg = /^#{p}$/i
 @db['pgm'].update({'nom' => reg }....

```

# ruby-on-rails - 如何在开发中进行编译？

> ID：10523577
> 
> 赞同：0
> 
> 时间：2012-05-09T20:24:48.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, spree

我正在建立一个 Spree 网站并使用 Deface 对其进行主题化。我将 Spree 1.0.3 与 Rails 3.1.4 一起使用。我在开发中对 Deface 没有任何问题，因为在浏览器刷新时成功编译了覆盖。我已经升级到带有 Rails 3.2.3 的 Spree 1.1.0。现在覆盖不会在浏览器刷新时编译，所以我必须重新启动开发服务器才能使每个更改生效。有没有其他人看过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T23:30:54.327

Tyler：这是最新版本中的一个已知问题。您可以在此处关注问题[https://github.com/railsdog/deface/issues/37](https://github.com/railsdog/deface/issues/37)，直到它得到修复。

# c# - 你能在asp C#中填充一个预先填充的下拉列表吗？

> ID：10523578
> 
> 赞同：1
> 
> 时间：2012-05-09T20:24:52.277
> 
> 标签：c#, asp.net

截至目前，我有一个 ddl，我已经用表格中的信息填充了它。它是设置为自动回发的客户列表。我遇到的问题是，默认选择始终是列表中的第一个客户，当您单击一个客户时，会返回并获取所需的所有信息，并将选择设置为第一个客户并执行不做回帖。

因此，我想到并试图实现的修复是在 ddl 中放置一个空值，类似于“请选择客户”。我已经进入 DDL 编辑项目并添加了这个，但是调用表，它不包括它。有没有办法让它包含在内。

使用 Mozilla Firefox，我不会遇到这个问题，因为在回发之后它会留在同一个客户身上。如果我能清除任何东西，我会尽力而为，如果有任何可能有用的代码，我可以提供

```
//save the value of the current selection to reselect later if still exists
string origSelectedItem = ddlSelectedCustomer.SelectedValue;

//clear and refill the list
ddlSelectedCustomer.Items.Clear();

//check what role the user is in
string usersRole = Roles.GetRolesForUser(Membership.GetUser().UserName)[0];

MembershipUser user = Membership.GetUser();

switch (usersRole)
{
    case "SalesRep":
         ddlSelectedCustomer.DataSource = 
         DAL.Util.getSalesRepCustomers((Guid)user.ProviderUserKey);
         ddlSelectedCustomer.DataBind();
         break;

    case "BasicUser":
    case "Customer":
         ddlSelectedCustomer.DataSource = 
         DAL.Util.getCustomersListForUser((Guid)user.ProviderUserKey);
         ddlSelectedCustomer.DataBind();
         break;

    case "Admin":
    case "SuperAdmin":
         ddlSelectedCustomer.DataSource = DAL.Util.getAllCustomersList(); 
         ddlSelectedCustomer.DataBind();
         break;
    default:
         break;
}

//if user had a company selected, reselect it if it exists
if (origSelectedItem != string.Empty)
    ddlSelectedCustomer.SelectedValue = origSelectedItem;
else if (ddlSelectedCustomer.Items.Count == 1)    
    //if only one item in the list, select it
    ddlSelectedCustomer.Items[0].Selected = true; 
```

这也位于网站母版页的代码隐藏中。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:35:40.183

您需要设置`AppendDataBoundItems`为true，然后您可以添加一个空的第一项。

```
<asp:DropDownList ID="DropDownList1" runat="server" AppendDataBoundItems="true">
    <asp:ListItem Text="" Value="" /> <!-- empty first item -->    
</asp:DropDownList> 
```

需要注意的是，如果您多次绑定列表，您将需要清除列表，以免添加重复项。

如果你想在代码隐藏中添加空项目，在你清除列表后，你可以这样做：

```
DropDownList1.Items.Clear();
DropDownList1.Items.Add(new ListItem(string.Empty, string.Empty));

//bind list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T19:17:16.480

我知道这个问题已经有了，但也可以将其添加到代码隐藏而不触及 aspx 将是：使用您的变量：

```
ddlSelectedCustomer.Items.Insert(0, new ListItem("Please Select")); 
```

这会将“请选择”添加为您的 ddl 中的第一个项目

# ruby-on-rails - 标头部分中的 ransack 搜索表单：未向 search_form_for 提供 Ransack::Search 对象

> ID：10523579
> 
> 赞同：9
> 
> 时间：2012-05-09T20:24:55.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, ruby-on-rails-3.1, ransack

首先，我是 RoR 的新手，所以答案可能很明显，在这种情况下我道歉。我环顾四周，没有发现任何有用的东西。

我试图在我的应用程序的每个网页的标题处都有一个搜索表单，它将搜索我所有“存储桶”的名称。以下是相关代码：

在 app/views/layouts/_header.html.erb 中（在导航栏中）：

```
<% search_form_for @q do |f| %>
  <%= f.label :name_cont %>
  <%= f.text_field :name_cont %>
  <%= f.submit %>
<% end %> 
```

在 app/controllers/buckets_controller.rb 中：

```
def index
  unless params[:q].blank?
    @q = Bucket.search(params[:q])
    @buckets = @q.result.paginate(:page => params[:page])
  else
    @buckets = Bucket.find(:all, :limit => 5).paginate(:page => params[:page])
  end
end 
```

我知道最后一部分不是那么好：我想要做的是，如果我只是访问存储桶索引页面（而不是通过搜索），我会显示 5 个最近创建的存储桶。当我在标题表单中搜索某些内容时，我会访问索引页面，但只显示命中搜索的存储桶。（将搜索页面与我的索引页面分开是否有更好的处理方法？）

我发现[这个问题](https://github.com/ernie/ransack/issues/3)几乎相同，但我仍然不知道`@q`如果每个页面上都有表单，我将如何处理——当然我不必更改每个控制器的每个操作？

对于任何挫折，我的noobishness 我的原因是你，请提前道歉！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-12T12:51:05.263

正如其他人所说，您需要利用 ApplicationController 的 before_filter。虽然 ernie 本人似乎不推荐这样做，但实现起来很简单。

首先，使用高级 Ransack 选项设置搜索路径

```
#config/routes.rb
  resources :buckets do
    collection do
      match 'search' => 'buckets#search', via: [:get, :post], as: :search
    end
  end 
```

其次，更新您的 BucketsController 以包含以下自定义操作：

```
#controllers/buckets_controller.rb
  def search
    index
    render :index
  end 
```

还没有什么不寻常的。如果您当前尝试搜索，您将从原始问题中得到错误。您对变量 q 的定义已正确实现，但您必须将其移至 ApplicationController，如下所示：

```
#controllers/application_controller.rb
before_filter :set_global_search_variable

  def set_global_search_variable
    @q = Bucket.search(params[:q])
  end 
```

最后，更新您的搜索表单以传递正确的搜索选项

```
#layouts/_header.html.erb

    <% search_form_for @q, url: search_buckets_path, html: { method: :post }  do |f| %>
      <%= f.label :name_cont %>
      <%= f.text_field :name_cont %>
      <%= f.submit %>
    <% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:40:18.203

不，您不需要编辑所有控制器。

您可以使用 ApplicationController 来满足所有“常见”控制器的需求。阅读指南[http://guides.rubyonrails.org/action_controller_overview.html](http://guides.rubyonrails.org/action_controller_overview.html)和 API 文档[http://api.rubyonrails.org/classes/ActionController/Base.html](http://api.rubyonrails.org/classes/ActionController/Base.html)

这里的关键是，当您生成新的 rails 应用程序时，您会注意到它创建了文件 .../app/controllers/action_controller.rb 并且该类派生自 ActionController::Base。然后，如果您再次使用 rails 生成器为您的应用程序创建控制器，您会注意到您的新控制器类派生自 ApplicationController（而不是 ::Base）。这意味着 application_controller.rb 是您的应用程序的父控制器类。这意味着其中的所有内容都可供您的所有应用程序控制器使用。这很容易被滥用，所以要明智。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T19:57:54.083

看起来这是不可能的。这是宝石作者 Ernie 的评论。

> 您必须在 before_filter 或 (ick) 视图部分本身中处理 Ransack 所需的东西。如果您在网站的每个部分都放置一个搜索字段，我强烈建议您考虑 ransack 是否也是适合这项工作的工具。您可能需要某种倒排索引搜索设置，例如 sphinx、solr 等。

[https://github.com/ernie/ransack/issues/3](https://github.com/ernie/ransack/issues/3)

# c# - 从 web 服务中的类获取枚举描述

> ID：10523583
> 
> 赞同：1
> 
> 时间：2012-05-09T20:25:16.680
> 
> 标签：c#, web-services, enums, drop-down-menu

我是 C# 新手，我有疑问，

我有一个 Web 服务（webservice1），其中有一个类.. 该类有一个枚举..

```
public class testnum
{
     public enum test
     {
        [Description("1,2,3")]
        123,
        [Description("3,4,5")]
        345,
        [Description("6,7,8 ")]
        678,
     }
} 
```

我正在尝试为 Web 服务创建一个客户端，并希望将枚举描述绑定到下拉列表，并将枚举值绑定到它们各自的列表项......我正在尝试类似的事情

```
 protected void ddl1_Load(object sender, EventArgs e)
{
    webservice1.Service s = new webservice1.Service();

    foreach( webservice1.test value in Enum.GetValues(typeof(webservice1.test)))
  {
      ddl1.Items.Add(new ListItem(value.GetEnumDescription(), value.ToString()));

  }
        }

         }
               public static class ENUMHelper
         {
          public static string GetEnumDescription(this Enum value)
         {
    FieldInfo fi = value.GetType().GetField(value.ToString());

    DescriptionAttribute[] attributes =
        (DescriptionAttribute[])fi.GetCustomAttributes(
        typeof(DescriptionAttribute),
        false);

    if (attributes != null &&
        attributes.Length > 0)
        return attributes[0].Description;
    else
        return value.ToString();         
} 
```

}

当我这样做时，它不会将描述放入下拉列表中..而是获得值..

有人可以让我知道我哪里出错了吗？

我什至查看了[.NET 将组合框数据绑定到具有描述属性的字符串枚举，](https://stackoverflow.com/questions/6920767/net-databinding-a-combobox-to-a-string-enum-with-description-attributes)但在我的情况下它不起作用..有人可以帮忙。

PS：如果我不清楚，请告诉我，我再次解释我的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:41:30.860

解决此问题的最佳方法是将描述测试的源文件包含在客户端项目中，而不是让它生成对它的服务引用，正如@tim 在他的评论之一中所建议的那样！

# java - Android ListView - 奇怪的回收行为

> ID：10523584
> 
> 赞同：2
> 
> 时间：2012-05-09T20:25:17.753
> 
> 标签：java, android, listview, adapter

我正在尝试创建一个具有多种视图类型的 ListView 适配器。我正在关注以下教程：

[http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

但是，在第一轮构建之后，代码如下：

```
public class MultipleItemList extends Activity
{
  private MyCustomAdapter mAdapter;
  private ListView        mListView;
  private String          mTag = "MultipleItemList";

  @Override
  protected void onCreate( Bundle savedInstanceState )
  {
    super.onCreate( savedInstanceState );

    setContentView( R.layout.main );

    mListView = (ListView)findViewById( R.id.main_list );

    mAdapter = new MyCustomAdapter();

    for( int i = 0; i < 50; i++ )
    {
      mAdapter.addItem( "Item: " + i );
    }

    mListView.setAdapter( mAdapter );
  }

  private class MyCustomAdapter extends BaseAdapter
  {
    private ArrayList<String> mData = new ArrayList<String>();
    private LayoutInflater    mInflater;

    public MyCustomAdapter()
    {
      mInflater = (LayoutInflater)getSystemService( Context.LAYOUT_INFLATER_SERVICE );
    }

    public void addItem( final String item )
    {
      mData.add( item );
      notifyDataSetChanged();
    }

    public int getCount()
    {
      return mData.size();
    }

    public String getItem( int position )
    {
      return mData.get( position );
    }

    public long getItemId( int position )
    {
      return position;
    }

    public View getView( int position, View convertView, ViewGroup parent )
    {
      Log.e( mTag, "getView: " + position + " " + convertView );

      ViewHolder holder = null;

      if( convertView == null )
      {
        convertView = mInflater.inflate( R.layout.list_item, null );

        holder = new ViewHolder();

        holder.textView = (TextView)convertView.findViewById( R.id.item_text );

        convertView.setTag( holder );
      }
      else
      {
        holder = (ViewHolder)convertView.getTag();
      }

      holder.textView.setText( mData.get( position ) );

      return convertView;
    }
  }

  public static class ViewHolder
  {
    public TextView textView;
  }

} 
```

main.xml 在哪里：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/main_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

而 list_item.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/item_text"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:text="TextView" 
        android:gravity="center_vertical" 
        android:paddingLeft="25dp"/>

</LinearLayout> 
```

我希望输出与他的预期输出相似：

```
02-05 13:47:32.559: INFO/System.out(947): getView 0 null
02-05 13:47:32.570: INFO/System.out(947): getView 1 null
02-05 13:47:32.589: INFO/System.out(947): getView 2 null
02-05 13:47:32.599: INFO/System.out(947): getView 3 null
02-05 13:47:32.619: INFO/System.out(947): getView 4 null
02-05 13:47:32.629: INFO/System.out(947): getView 5 null
02-05 13:47:32.708: INFO/System.out(947): getView 6 null
02-05 13:47:32.719: INFO/System.out(947): getView 7 null
02-05 13:47:32.729: INFO/System.out(947): getView 8 null 
```

但是相反，没有用户交互，只是加载屏幕，我得到以下内容：

```
05-09 15:24:00.347: E/MultipleItemList(11109): getView: 0 null
05-09 15:24:00.357: E/MultipleItemList(11109): getView: 1 android.widget.LinearLayout@413304d0
05-09 15:24:00.357: E/MultipleItemList(11109): getView: 2 android.widget.LinearLayout@413304d0
05-09 15:24:00.357: E/MultipleItemList(11109): getView: 3 android.widget.LinearLayout@413304d0
05-09 15:24:00.357: E/MultipleItemList(11109): getView: 4 android.widget.LinearLayout@413304d0
05-09 15:24:00.357: E/MultipleItemList(11109): getView: 5 android.widget.LinearLayout@413304d0
05-09 15:24:00.367: E/MultipleItemList(11109): getView: 6 android.widget.LinearLayout@413304d0
05-09 15:24:00.367: E/MultipleItemList(11109): getView: 7 android.widget.LinearLayout@413304d0
05-09 15:24:00.367: E/MultipleItemList(11109): getView: 8 android.widget.LinearLayout@413304d0
05-09 15:24:00.367: E/MultipleItemList(11109): getView: 9 android.widget.LinearLayout@413304d0
05-09 15:24:00.407: E/MultipleItemList(11109): getView: 0 android.widget.LinearLayout@413304d0
05-09 15:24:00.407: E/MultipleItemList(11109): getView: 1 null
05-09 15:24:00.407: E/MultipleItemList(11109): getView: 2 null
05-09 15:24:00.417: E/MultipleItemList(11109): getView: 3 null
05-09 15:24:00.417: E/MultipleItemList(11109): getView: 4 null
05-09 15:24:00.417: E/MultipleItemList(11109): getView: 5 null
05-09 15:24:00.427: E/MultipleItemList(11109): getView: 6 null
05-09 15:24:00.427: E/MultipleItemList(11109): getView: 7 null
05-09 15:24:00.437: E/MultipleItemList(11109): getView: 8 null
05-09 15:24:00.437: E/MultipleItemList(11109): getView: 9 null
05-09 15:24:00.457: E/MultipleItemList(11109): getView: 0 null
05-09 15:24:00.457: E/MultipleItemList(11109): getView: 1 android.widget.LinearLayout@41338b60
05-09 15:24:00.457: E/MultipleItemList(11109): getView: 2 android.widget.LinearLayout@41338b60
05-09 15:24:00.457: E/MultipleItemList(11109): getView: 3 android.widget.LinearLayout@41338b60
05-09 15:24:00.457: E/MultipleItemList(11109): getView: 4 android.widget.LinearLayout@41338b60
05-09 15:24:00.457: E/MultipleItemList(11109): getView: 5 android.widget.LinearLayout@41338b60
05-09 15:24:00.467: E/MultipleItemList(11109): getView: 6 android.widget.LinearLayout@41338b60
05-09 15:24:00.467: E/MultipleItemList(11109): getView: 7 android.widget.LinearLayout@41338b60
05-09 15:24:00.467: E/MultipleItemList(11109): getView: 8 android.widget.LinearLayout@41338b60
05-09 15:24:00.467: E/MultipleItemList(11109): getView: 9 android.widget.LinearLayout@41338b60 
```

为什么在渲染列表中的前 10 个项目时要做这么多工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:08:58.833

`getView`你`Activity`的调用和本教程中对seen的调用之间存在差异，`getView`因为本教程使用`ListActivity`. `Adapters`使用不同的活动类时，调用方式存在一些潜在差异。

我在您问题的代码中提取了代码，并且能够重现您报告的日志。当我将其更改为从 a 扩展时，`ListActivity`我能够重现教程中看到的日志。

查看 StackTraceElements 的`getView()`我可以看到以下内容：

**活动日志**

```
getView: pos[0] convertView[null]
CallerClass[android.widget.AbsListView] CallerMethod[obtainView]
CallerClass[android.widget.ListView] CallerMethod[measureHeightOfChildren]
CallerClass[android.widget.ListView] CallerMethod[onMeasure]
CallerClass[android.view.View] CallerMethod[measure]
CallerClass[android.view.ViewGroup] CallerMethod[measureChildWithMargins]
CallerClass[android.widget.LinearLayout] CallerMethod[measureChildBeforeLayout]
CallerClass[android.widget.LinearLayout] CallerMethod[measureVertical]
CallerClass[android.widget.LinearLayout] CallerMethod[onMeasure]
CallerClass[android.view.View] CallerMethod[measure]
CallerClass[android.view.ViewGroup] CallerMethod[measureChildWithMargins]
CallerClass[android.widget.FrameLayout] CallerMethod[onMeasure]
CallerClass[android.view.View] CallerMethod[measure]
CallerClass[android.widget.LinearLayout] CallerMethod[measureVertical]
CallerClass[android.widget.LinearLayout] CallerMethod[onMeasure]
CallerClass[android.view.View] CallerMethod[measure]
CallerClass[android.view.ViewGroup] CallerMethod[measureChildWithMargins]
CallerClass[android.widget.FrameLayout] CallerMethod[onMeasure]
CallerClass[com.android.internal.policy.impl.PhoneWindow$DecorView] CallerMethod[onMeasure]
CallerClass[android.view.View] CallerMethod[measure]
CallerClass[android.view.ViewRootImpl] CallerMethod[performTraversals]
CallerClass[android.view.ViewRootImpl] CallerMethod[handleMessage]
CallerClass[android.os.Handler] CallerMethod[dispatchMessage]
CallerClass[android.os.Looper] CallerMethod[loop]
CallerClass[android.app.ActivityThread] CallerMethod[main]
CallerClass[java.lang.reflect.Method] CallerMethod[invokeNative]
CallerClass[java.lang.reflect.Method] CallerMethod[invoke]
CallerClass[com.android.internal.os.ZygoteInit$MethodAndArgsCaller] CallerMethod[run]
CallerClass[com.android.internal.os.ZygoteInit] CallerMethod[main]
CallerClass[dalvik.system.NativeStart] CallerMethod[main] 
```

**ListActivity.log**

```
getView: pos[0] convertView[null]
CallerClass[android.widget.AbsListView] CallerMethod[obtainView]
CallerClass[android.widget.ListView] CallerMethod[makeAndAddView]
CallerClass[android.widget.ListView] CallerMethod[fillDown]
CallerClass[android.widget.ListView] CallerMethod[fillFromTop]
CallerClass[android.widget.ListView] CallerMethod[layoutChildren]
CallerClass[android.widget.AbsListView] CallerMethod[onLayout]
CallerClass[android.view.View] CallerMethod[layout]
CallerClass[android.view.ViewGroup] CallerMethod[layout]
CallerClass[android.widget.FrameLayout] CallerMethod[onLayout]
CallerClass[android.view.View] CallerMethod[layout]
CallerClass[android.view.ViewGroup] CallerMethod[layout]
CallerClass[android.widget.LinearLayout] CallerMethod[setChildFrame]
CallerClass[android.widget.LinearLayout] CallerMethod[layoutVertical]
CallerClass[android.widget.LinearLayout] CallerMethod[onLayout]
CallerClass[android.view.View] CallerMethod[layout]
CallerClass[android.view.ViewGroup] CallerMethod[layout]
CallerClass[android.widget.FrameLayout] CallerMethod[onLayout]
CallerClass[android.view.View] CallerMethod[layout]
CallerClass[android.view.ViewGroup] CallerMethod[layout]
CallerClass[android.view.ViewRootImpl] CallerMethod[performTraversals]
CallerClass[android.view.ViewRootImpl] CallerMethod[handleMessage]
CallerClass[android.os.Handler] CallerMethod[dispatchMessage]
CallerClass[android.os.Looper] CallerMethod[loop]
CallerClass[android.app.ActivityThread] CallerMethod[main]
CallerClass[java.lang.reflect.Method] CallerMethod[invokeNative]
CallerClass[java.lang.reflect.Method] CallerMethod[invoke]
CallerClass[com.android.internal.os.ZygoteInit$MethodAndArgsCaller] CallerMethod[run]
CallerClass[com.android.internal.os.ZygoteInit] CallerMethod[main]
CallerClass[dalvik.system.NativeStart] CallerMethod[main] 
```

所以我的回答是，不同活动类型的填充/呈现方式存在关键差异，`ListViews`这会导致对`getView`.

# java - 如何在 Java 7 中递归读取文件？

> ID：10523585
> 
> 赞同：2
> 
> 时间：2012-05-09T20:25:30.187
> 
> 标签：java, file-io, java-7

我知道用于 Java 文件目录处理的 Apache Commons IO 库。然而，[List all files from a directory recursive with Java](https://stackoverflow.com/questions/2534632/list-all-files-from-a-directory-recursively-with-java)谈到了 Java 7 中的本机支持。

有没有人有关于如何使用 Java 7 递归地列出/读取目录中的文件的经验？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:33:11.293

[有一个教程](http://docs.oracle.com/javase/tutorial/essential/io/walk.html)。基本上，您实现了一个访问者，然后可以在进入、退出和遇到文件时调用它。支持确定文件是否为符号链接，以及遵循符号链接的选项（如果您愿意的话）。快速阅读一下 Java`Path`可能有用，[整个文档从这里开始](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)。

```
import static java.nio.file.FileVisitResult.*;

public static class PrintFiles
    extends SimpleFileVisitor<Path> {

    // Print information about
    // each type of file.
    @Override
    public FileVisitResult visitFile(Path file,
                                   BasicFileAttributes attr) {
        if (attr.isSymbolicLink()) {
            System.out.format("Symbolic link: %s ", file);
        } else if (attr.isRegularFile()) {
            System.out.format("Regular file: %s ", file);
        } else {
            System.out.format("Other: %s ", file);
        }
        System.out.println("(" + attr.size() + "bytes)");
        return CONTINUE;
    }

    // Print each directory visited.
    @Override
    public FileVisitResult postVisitDirectory(Path dir,
                                          IOException exc) {
        System.out.format("Directory: %s%n", dir);
        return CONTINUE;
    }

    // If there is some error accessing
    // the file, let the user know.
    // If you don't override this method
    // and an error occurs, an IOException 
    // is thrown.
    @Override
    public FileVisitResult visitFileFailed(Path file,
                                       IOException exc) {
        System.err.println(exc);
        return CONTINUE;
    }
} 
```

`find`说明文件遍历的第二个示例（来自 的 Java 实现）可以很容易地修改为“匹配”所有文件。

```
/*
 * Copyright (c) 2009, Oracle and/or its affiliates. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *   - Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *   - Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *
 *   - Neither the name of Oracle or the names of its
 *     contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

import java.io.*;
import java.nio.file.*;
import java.nio.file.attribute.*;
import static java.nio.file.FileVisitResult.*;
import static java.nio.file.FileVisitOption.*;
import java.util.*;

/**
 * Sample code that finds files that
 * match the specified glob pattern.
 * For more information on what
 * constitutes a glob pattern, see
 * http://docs.oracle.com/javase/javatutorials/tutorial/essential/io/fileOps.html#glob
 *
 * The file or directories that match
 * the pattern are printed to
 * standard out.  The number of
 * matches is also printed.
 *
 * When executing this application,
 * you must put the glob pattern
 * in quotes, so the shell will not
 * expand any wild cards:
 *     java Find . -name "*.java"
 */

public class Find {

    /**
     * A {@code FileVisitor} that finds
     * all files that match the
     * specified pattern.
     */
    public static class Finder
        extends SimpleFileVisitor<Path> {

        private final PathMatcher matcher;
        private int numMatches = 0;

        Finder(String pattern) {
            matcher =
                FileSystems.getDefault()
                    .getPathMatcher("glob:" + pattern);
        }

        // Compares the glob pattern against
        // the file or directory name.
        void find(Path file) {
            Path name = file.getFileName();
            if (name != null && matcher.matches(name)) {
                numMatches++;
                System.out.println(file);
            }
        }

        // Prints the total number of
        // matches to standard out.
        void done() {
            System.out.println("Matched: "
                + numMatches);
        }

        // Invoke the pattern matching
        // method on each file.
        @Override
        public FileVisitResult
            visitFile(Path file,
                BasicFileAttributes attrs) {
            find(file);
            return CONTINUE;
        }

        // Invoke the pattern matching
        // method on each directory.
        @Override
        public FileVisitResult
            preVisitDirectory(Path dir,
                BasicFileAttributes attrs) {
            find(dir);
            return CONTINUE;
        }

        @Override
        public FileVisitResult
            visitFileFailed(Path file,
                IOException exc) {
            System.err.println(exc);
            return CONTINUE;
        }
    }

    static void usage() {
        System.err.println("java Find <path>" +
            " -name \"<glob_pattern>\"");
        System.exit(-1);
    }

    public static void main(String[] args)
        throws IOException {

        if (args.length < 3 
            || !args[1].equals("-name"))
            usage();

        Path startingDir = Paths.get(args[0]);
        String pattern = args[2];

        Finder finder = new Finder(pattern);
        Files.walkFileTree(startingDir, finder);
        finder.done();
    }
} 
```

在我的系统（Linux / Fedora）上，它运行良好；但是，我只是在测试它的功能，并使用它。我没有对它的性能或任何其他有意义的测量进行压力测试（除了“它有效”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:30:00.137

使用[`Files.walkFileTree`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#walkFileTree%28java.nio.file.Path,%20java.util.Set,%20int,%20java.nio.file.FileVisitor%29).

（没有使用它的经验，但我只是在文档中找到它，它看起来很容易使用。）

# python - 如何从 wx.TextCtrl 打印出一个值？

> ID：10523587
> 
> 赞同：0
> 
> 时间：2012-05-09T20:25:34.293
> 
> 标签：python, textbox, wxwidgets, wx.textctrl

我现在有这样的事情：

```
import wx

class QuickAddBox(wx.TextCtrl):
    def __init__(self, parent, viewer):
        self.quick_add_text = wx.TextCtrl.__init__(self, parent, -1, '', size=(300,20), style=wx.TE_PROCESS_ENTER)
        self.Bind(wx.EVT_TEXT_ENTER, self.OnPress, self.quick_add_text)

    def OnPress(self, evt):
        print self.quick_add_text.GetValue() 
```

当我点击回车时，我想获取文本框的值。但是当我点击回车时，我收到以下错误：

```
AttributeError: 'NoneType' object has no attribute 'GetValue' 
```

有什么建议吗？

****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __** -**

 **没关系，我通过执行以下操作解决了它：

```
def OnPress(self, evt):
    print self.GetValue() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:28:11.013

看起来您正在存储 TextCtrl `__init__`（即`None`）的返回值，而不是实际的类实例。你`__init__`应该看起来像这样：

```
class QuickAddBox(wx.TextCtrl):
    def __init__(self, parent, viewer):
        self.quick_add_text = wx.TextCtrl(self, parent, -1, '', size=(300,20), style=wx.TE_PROCESS_ENTER) 
```**

# c++ - c ++如何获得随机数以及如何保存只有两位小数的双精度数？

> ID：10523588
> 
> 赞同：-4
> 
> 时间：2012-05-09T20:25:36.957
> 
> 标签：c++, double

我有以下内容：

```
 int R=25;
double pi=3.14;

double r=R*sqrt(rand());
cout<<"r: "<<r<<endl;
double th=2*pi*rand();
cout<<"th: "<<theta<<endl; 
```

我想转换：r=1.98 和 th=5.08。我还希望 double result=r*th 带有 2 个 zecimals。

当我打印时`double result =r*th`；这个数字非常庞大，不现实。

如何将`r`and`th`值更改为`1.98`and `5.08`？如何解决这个问题？

我需要在“。”之后将每个双精度数更改为仅 2 位小数。

我在 ubuntu 下使用 c++ 工作。

谢谢欣赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:38:04.573

要在您指定的范围内生成随机值，请尝试以下操作：

```
r = (R*(rand()/(RAND_MAX + 1.0)));
th = (2*3.14*(rand()/(RAND_MAX + 1.0))); 
```

该表达式`rand()/(RAND_MAX+1.0)`产生范围内的值`[0,1.0)`。将其乘以范围限制可以得到你想要的数字。

注意：这不会将数字限制为两位小数，这更多地取决于您如何打印它们。要使用两位小数打印它们，请尝试以下操作：

```
std::cout << std::fixed << std::setprecision(2) << r << "\n";
std::cout << std::fixed << std::setprecision(2) << th << "\n";
std::cout << std::fixed << std::setprecision(2) << (r*th) << "\n"; 
```

看到这个问题：[C++生成随机数](https://stackoverflow.com/questions/9484588/c-generating-random-numbers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:34:13.360

如果您需要将两个数字缩小相同的数量，则只需将它们除以相同的数字即可。无论哪种方式，您都会失去大致相同的精度。

如果您真的想通过切断指数来完全改变结果，那么您可能会深入研究双数格式本身并分离出尾数。

你为什么要这样做对我来说是个谜。

# ruby - 如果我将 << 运算符与字符串一起使用，我可以使用几乎任何标识符吗？

> ID：10523591
> 
> 赞同：1
> 
> 时间：2012-05-09T20:25:37.640
> 
> 标签：ruby, string, heredoc

例子：

```
puts <<BLOCK
...
BLOCK 
```

BLOCK 是不与关键字冲突的任何其他标识符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:33:00.860

是的; 你可以——可以使用任何合法的符号或带引号的字符串。

例如，如果你想给它一个爆炸，你必须使用带引号的形式：

```
pry(main)> s = <<"foo!bar"
pry(main)* yo
pry(main)* foo!bar
=> "yo\n"
pry(main)> puts s
yo 
```

如果它是一个符号，那么你不需要引用它。

# spring-security - 是否可以按年龄设置春季安全会话到期？

> ID：10523594
> 
> 赞同：1
> 
> 时间：2012-05-09T20:25:54.773
> 
> 标签：spring-security, session-timeout

我试图让春季安全会话在登录后 30 分钟后过期。我不希望在每次交互后重置 timeBeforeExperation。

当前配置：

```
<session-config>
    <session-timeout>30</session-timeout>
</session-config> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:58:52.710

使用标准弹簧安全性似乎不可能。

# asp.net-mvc - 使用 MiniProfiler 进行性能调整

> ID：10523597
> 
> 赞同：0
> 
> 时间：2012-05-09T20:26:27.937
> 
> 标签：asp.net-mvc, performance

我正在研究网站性能，需要一些帮助来确定慢点。下面是对主页的典型请求的快照。显然我可以稍微加快 SQL 的速度，但是我在哪里可以查看第一步`(http://168.62.16.83:80)`168 毫秒是什么？

有没有人有任何建议或博客文章来解释幕后发生的事情，以及优化它的技巧？或者这只是下载所有静态内容所需的时间？

![在此处输入图像描述](../Images/063e42cb588e949335b3f51f131d518c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:36:27.663

查找此类内容的最有效方法是使用传统的分析器，如 ant、dotTrace 或内置分析器。（[另见](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)）

至于时间在哪里，您可能在身份验证中`Application_BeginRequest`或身份验证期间有一个昂贵的位置。

# java - 在 Java 中查找两个文件中的通用名称

> ID：10523598
> 
> 赞同：4
> 
> 时间：2012-05-09T20:26:30.823
> 
> 标签：java, algorithm

首先，我想明确指出，这个问题的性质与据我所知已经发布的其他问题不同。如果不是这样，请告诉我。

**给定**

1.  我有一个名字列表~3000。
2.  有约 2500 个文件，其中包含一行中的名称（取自名称列表）
3.  每个文件包含约 3000 个名称（因此约 3000 行，尽管 avg 为 400）

**问题**

在给定时间，我将获得 2 个文件。我必须创建两个文件中通用的名称列表。

**预处理**

为了降低时间复杂度，我已经完成了预处理并对所有文件中的名称进行了排序。

**我的方法**

1.  对给定列表中的名称进行排序，并将它们从 0 到 2999 编入索引
2.  在每个文件中为每个名称

* * *

*   计算组号（name_index / 30）
*   计算组值（对于同一组中的每个名称计算 (2^(name_index%30)) 并添加）
*   以“groupNumber blankSpace groupValue”格式创建一个具有相同名称的新文件

* * *

**结果**

现在我将在每个文件中最多包含 100 行，而不是在每个文件中包含 ~3000（虽然平均为 400）名称。现在我必须检查公共组号，然后通过位操作，我可以找出常用名称。

**期待**

任何人都可以建议一个更短更好的问题解决方案。我可以在我的应用程序中进行预处理和存储新文件，以便在查找常用名称时需要最少的处理。

如果我在错误的方向上解决问题，请告诉我。提前致谢。

**积分**

在我的方法中，总文件的大小为 258KB（因为我使用了组名和组值），如果它在每行中按名称保存，它的大小为 573KB。这些文件必须存储在移动设备上。所以我需要尽可能减小尺寸。我也期待数据压缩，但我不知道如何做到这一点。请注意解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:37:12.050

您是否尝试过以下操作？

1.  从 list1 中一次读取名称 1，将它们添加到哈希集中。
2.  一次从列表 2 中读取一个名称，在从列表 1 创建的哈希集中查找它们。如果它们在哈希集中，则意味着名称对两个文件都是通用的。

如果要进行预处理以获得额外的速度，请将名称的数量存储在每个列表中，然后选择较短的列表作为 list1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T09:10:55.137

啊哈！鉴于您在编辑中声明的**内存要求非常低**，您还可以做另一件事。

尽管我仍然认为您可以寻求其他答案建议的解决方案。`HashSet`具有 3000个条目的 A`String`不会变得太大。我对 16 字符的快速近似`Strings`表明堆内存低于 400 kB。试试看，然后回去。这就像整个程序的 25 行代码。

* * *

如果解决方案占用了太多内存，那么您可以这样做：

1.  对文件中的名称进行排序。拥有这总是一件好事。
2.  打开这两个文件。
3.  从两个文件中读取一行。
    1.  如果`line1 < line2`，从 中读取一行`line1`，重复。
    2.  如果`line1 > line2`，从 中读取一行`line2`，重复。
    3.  否则它们是相同的，添加到结果中。重复。

它几乎不吃任何记忆，我认为这是一个使用`compareTo()`方法（如果你用它来对名称进行排序）和`switch`语句的好地方。

文件的大小根本不影响内存使用。

* * *

关于数据压缩 - 您可以使用很多工具和算法，试试[这个](https://stackoverflow.com/questions/2085722/compression-in-j2me)（也看看相关问题），或者这个[这个](http://www.google.com/search?q=java%20me%20compression)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:00:20.327

您正在尝试使用列表重新实现 Set。不要那样做。使用一组名称，它将自动处理插入的重复。

您需要阅读这两个文件，没有办法这样做。

```
// in pseudo-java
Set<String> names1 = new HashSet<String>();
for (String name : file1.getLine().trim()) {
  names1.put(name);
}

Set<String> names2 = new HashSet<String>();
for (String name : file2.getLine().trim()) {
  names2.put(name);
}

// with this line, names1 will discard any name not in names2
names1.retainAll(names2);

System.out.println(names1); 
```

假设您`HashSet`像本示例那样使用，您将比较字符串的哈希值，这将显着提高性能。

如果你发现性能不够，*那就*开始寻找更快的解决方案。其他任何事情*都是*过早的优化，如果你不知道它必须运行多快，那么它就是没有设定目标的优化。找到“最快”的解决方案需要枚举和穷举每一个*可能的*解决方案，因为您尚未检查的解决方案*可能*会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T21:21:02.513

我不确定我是否理解您的要求和情况。

您有大约 2.500 个文件，每个文件 3000 个字（或 400 个？）。在多个文件中出现许多重复的单词。

现在有人会问你，file-345 和 file-765 有哪些共同点。

您可以创建一个 Hashmap，在其中存储每个单词，以及一个文件列表，单词出现在其中。

如果你得到文件 345，它有 3000 个字（400？），你在 hashmap 中查找它，看看列表中提到文件 765 的位置。

然而 2 * 3000 并没有那么多。如果我在 Scala 中创建 2 个字符串列表（在 JVM 上运行）：

```
val g1 = (1 to 3000).map (x=> "" +  r.nextInt (10000))
val g2 = (1 to 3000).map (x=> "" +  r.nextInt (10000)) 
```

并建立路口

```
g1.intersect (g2) 
```

我在一台使用了 8 年的笔记本电脑上几乎很快就得到了结果（678 个元素）。

那么你需要回答多少个请求呢？文件的输入多久更改一次？如果很少，那么读取 2 个文件可能是关键点。

你有多少独特的词？也许将它们全部保存在内存中完全没有问题。

# joomla - 如何在 joomla 扩展目录上发布我的扩展？

> ID：10523601
> 
> 赞同：-1
> 
> 时间：2012-05-09T20:26:40.370
> 
> 标签：joomla, joomla-extensions

我为 Joomla! 编写了一个组件。我阅读了[http://docs.joomla.org/Publishing_to_JED](http://docs.joomla.org/Publishing_to_JED)。[但我在http://extensions.joomla.org](http://extensions.joomla.org)上找不到提交按钮或链接以提交扩展。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:38:23.300

*   首先，您必须在 Joomla 扩展目录上创建一个帐户（并登录）。
*   然后，找到您认为扩展程序应该属于的类别（例如“假注册用户”将属于“假数据”类别）
*   在此页面上，您将看到一个按钮，上面写着“提交扩展”（只要您登录）
*   按照说明进行操作，一旦提交，通常需要大约 3 周的时间才能获得批准，具体取决于提交的其他延期的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T07:18:03.970

我只找到了关于您的问题的两个网址！

[http://docs.joomla.org/Publishing_to_JED](http://docs.joomla.org/Publishing_to_JED) 和 [http://extensions.joomla.org/component/content/article/15](http://extensions.joomla.org/component/content/article/15)

# type-inference - 在不指定显式类型的情况下定义“技巧”标准 ML 函数

> ID：10523605
> 
> 赞同：0
> 
> 时间：2012-05-09T20:26:57.147
> 
> 标签：type-inference, sml

这是来自此处看到的标准 ML 教程的练习：http: [//homepages.inf.ed.ac.uk/stg/NOTES/node42.html](http://homepages.inf.ed.ac.uk/stg/NOTES/node42.html)

我没有上课，所以这里没有作弊。但我无法弄清楚如何做到这一点。有人可以帮忙吗？

该函数`fn x => fn y => x`具有类型`'a -> ('b -> 'a)`。在不给出显式类型约束的情况下，定义一个具有类型的函数`'a -> ('a -> 'a)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:12:00.740

提示 1：您必须找到具有 2 个或更多子表达式但要求它们具有相同类型的表达式。

提示 2：列表或条件句是很好的竞争者。

提示 3：当然，您放入的子表达式是两个参数。

提示 4：你不需要使用这个表达式的结果。

# kohana - Kohana 3.2 Auth 类中的 force_login() 在哪里？

> ID：10523607
> 
> 赞同：0
> 
> 时间：2012-05-09T20:27:07.710
> 
> 标签：kohana, authentication

如果它消失了，我应该做什么来模拟这个功能？基于 ORM 的身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:47:09.653

如果您使用的是文件驱动程序，那么第 59 行的[https://github.com/kohana/auth/blob/3.2/master/classes/kohana/auth/file.php中有 force_login 函数](https://github.com/kohana/auth/blob/3.2/master/classes/kohana/auth/file.php)

如果您使用的是 ORM，则函数位于第 123 行的[https://github.com/kohana/orm/blob/3.2/master/classes/kohana/auth/orm.php中。](https://github.com/kohana/orm/blob/3.2/master/classes/kohana/auth/orm.php)

# html - 将 HTML 文件截屏为 .jpg 或其他图像

> ID：10523608
> 
> 赞同：4
> 
> 时间：2012-05-09T20:27:14.120
> 
> 标签：html, linux, image, screenshot, jpeg

与在网页上呈现单个图像无关。目标是渲染整个网页，并将其保存为屏幕截图。想要向用户显示 HTML 文件的缩略图。我将截取的 HTML 文件将是 MIME 电子邮件消息中的 HTML 部分 - 理想情况下，我想截取整个 MIME 文件，但如果我可以对 HTML 文件执行此操作，我将处于良好状态。

API 将是理想的，但可执行文件也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:00:39.340

您需要 html2ps，并从 ImageMagick 包中转换：

```
html2ps index.html index.ps 
convert index.ps index.png 
```

第二个程序为长 html 页面每页生成一个 png - 页面布局由 html2ps 完成。

找到了一个程序evince-thumbnailer，报如下：

```
apropos postscript | grep -i png 
evince-thumbnailer (1) - create png thumbnails from PostScript and PDF documents 
```

但它不适用于简单的第一次测试。

如果您想将多个页面组合成一个更大的图像，convert 肯定会帮助您。

现在我看到了，convert 直接对 html 进行操作，所以

```
convert index.html index.png 
```

也应该工作。我看不出输出有什么不同，而且图像的大小几乎相同。

如果你有一个多部分的 mime 类型的电子邮件，你通常有一个邮件标题，可能是一些 pre-html-text、html 和附件。

您可以提取 html 并单独对其进行格式化 - 但将其嵌入嵌入可能并不容易。

这是我测试的一个文件，它是从 4 月 14 日开始的，所以我从邮件文件夹中提取了一封邮件：

```
sed -n "/From - Sat Apr 14/,/From -/p" /home/stefan/.mozilla-thunderbird/k2jbztqu.default/Mail/Local\ Folders-1/Archives.sbd/sample | \
sed -n '/<html>/,/<\/html>/p' | wkhtmltopdf - - > sample.pdf 
```

然后我只提取其中的 html 部分。

wkhtmltopdf 需要`- -` 读取标准输入/写入标准输出。PDF 已渲染，但我不知道如何将其集成到您的工作流程中。

您可以替换`wkhtml ...`为

```
 convert - sample.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:57:43.817

我要使用 wkhtmltoimage。这在正确设置 xvfb 后起作用。后记建议未正确呈现，我们需要 img 而不是 pdf。

# c# - 运算符重载和继承 c#

> ID：10523613
> 
> 赞同：6
> 
> 时间：2012-05-09T20:27:27.797
> 
> 标签：c#, inheritance, operator-overloading

假设我有一个父类和子类，如下所示

家长班：

```
class Parent
{
    public string _First;
    public string _Last;

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(obj, null))
            return false;
        else if (ReferenceEquals(obj, this))
            return true;
        else if (obj is Parent == false)
            return false;
        else
            return this.Equals(obj as Parent) & base.Equals(obj);

    }

    public override int GetHashCode()
    {
        unchecked
        {
            return this._First.GetHashCode() ^ this._Last.GetHashCode() ^ base.GetHashCode();
        }
    }

    public bool Equals(Parent that)
    {
        if (ReferenceEquals(that, null))
            return false;
        else if (ReferenceEquals(that, this))
            return true;
        else
            return this._First.Equals(that._First) & this._Last.Equals(that._Last);
    }

    public static  bool operator ==(Parent p1, Parent p2)
    {
        return p1.Equals(p2);
    }

    public static  bool operator !=(Parent p1, Parent p2)
    {
        return !p1.Equals(p2);
    }

} 
```

儿童班：

```
 class Child : Parent
{
    public string Address;

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(obj, null))
            return false;
        else if (ReferenceEquals(obj, this))
            return true;
        else if (obj is Parent == false)
            return false;
        else
            return this.Equals(obj as Child);

    }

    public override int GetHashCode()
    {
        unchecked
        {
            return this._First.GetHashCode() ^ this._Last.GetHashCode() ^ base.GetHashCode();
        }
    }

    public bool Equals(Child that)
    {
        if (ReferenceEquals(that, null))
            return false;
        else if (ReferenceEquals(that, this))
            return true;
        else
            return this.Address.Equals(that.Address) & base.Equals(that);
    }

    public static  bool operator ==(Child p1,Child p2)
    {
        return p1.Equals(p2);
    }

    public static bool operator !=(Child p1, Child p2)
    {
        return !p1.Equals(p2);
    }

} 
```

这是比较两个 child 实例的代码。

```
 Parent p = new Child() { _First = "Mitul", _Last = "Patel", Address="abc1"};
        Parent p1 = new Child() { _First = "Mitul", _Last = "Patel", Address = "abc" };

        Child c = new Child() { _First = "Mitul", _Last = "Patel", Address = "abc1" };
        Child c1 = new Child() { _First = "Mitul", _Last = "Patel", Address = "abc" };

        Console.WriteLine(p.Equals(p1));
        Console.WriteLine(p == p1);

        Console.WriteLine(c.Equals(c1));
        Console.WriteLine(c == c1);

        Console.Read(); 
```

**输出**

> 真 真 假 假

我知道为什么它在第一次比较时给出了真实的和真实的。因为它调用了父类的重载 ==() 运算符。我的问题是我想使用子类的 == 运算符，因为该对象是 Child 类型的，那怎么可能呢？对于静态方法，不能使用 virtual 关键字。

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T20:34:22.557

运算符的实现是在编译时选择的。运算符不是虚拟方法——子类的`==`运算符不会覆盖父类的`==`运算符。

因此，让编译器选择子`==`运算符的唯一方法是让变量本身具有类型`Child`，例如

```
 Child p = new Child() { _First = "Mitul", _Last = "Patel", Address="abc1"};
 Child p1 = new Child() { _First = "Mitul", _Last = "Patel", Address = "abc" }; 
```

或者让`==`操作员调用 Equals 方法，并使 Equals 的子实现覆盖父实现：

在 Parent.cs 中：

```
// No need for these to be public- they should only be called internally.
protected virtual bool Equals(Parent that)
{
    if (ReferenceEquals(that, null))
        return false;
    else if (ReferenceEquals(that, this))
        return true;
    else
        return this._First.Equals(that._First) & this._Last.Equals(that._Last);
} 
```

在 Child.cs 中：

```
// Notice I changed your argument type here...
protected override bool Equals(Parent that)
{
    // If we are not dealing with a Child instance, delegate to the base class.
    if (!(that is typeof(Child)))
        return base.Equals(that);

    if (ReferenceEquals(that, null))
        return false;
    else if (ReferenceEquals(that, this))
        return true;
    else
        return this.Address.Equals(that.Address) & base.Equals(that);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:34:31.083

`static`方法在编译时解析，而不是在运行时解析。
因为你的代码`p`和`p1`都是`Parent`对象，所以它会调用类的`==`操作符`Parent`。
如果要调用派生类的运算符，则必须将它们声明为派生类实例。

# php - 只返回数字的函数？

> ID：10523616
> 
> 赞同：3
> 
> 时间：2012-05-09T20:27:45.477
> 
> 标签：php

```
function get_only_numbers($string){
    $getonly = str_split("0123456789");
    $string = str_split($string);
    foreach($string as $i => $c){
        if(!in_array($c, $getonly))
            unset($string[$i]);
    }
    return implode("", $string);
}

echo get_only_numbers("U$ 499,50"); // prints 49950 
```

这个函数应该只返回字符串中的数字。这个函数的编码是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:35:36.757

[我认为对preg_replace](http://php.net/manual/en/function.preg-replace.php)的一次调用也可以做到这一点：

```
preg_replace('/\D+/', '', 'U$ 499,50'); // returns "49950" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T20:31:43.860

请参阅[is_numeric](http://php.net/manual/en/function.is-numeric.php)以进一步优化您的函数，以便您不需要数组比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T20:36:00.480

适当地？它做了它应该做的......但我更喜欢正则表达式：

```
function get_only_numbers($string){
    return preg_replace("/[^0-9]/", "", $string);
} 
```

# javascript - 使用 jQuery 检查复选框时禁用选择元素

> ID：10523620
> 
> 赞同：0
> 
> 时间：2012-05-09T20:27:51.680
> 
> 标签：javascript, jquery, html

我想制作一个脚本，在选中所需的复选框时禁用选择表单元素。由于会有更多次我会使用它，所以我想将它作为一个以目标选择 id 作为参数的函数。问题是，当我将 id 作为参数传递时，此函数不起作用。相反，它似乎适用于硬编码的 id。

```
<select id="worldSelect" class="select" name="world">
<input id="worldcb" type="checkbox" checked="yes" value="any" name="world">

function toggleSelection(id){
    var el = '#' + id;
    if (this.checked) {
        $(el).attr('disabled', 'disabled');
    } else {
        $(el).removeAttr('disabled');
    }
}

$(function() {
    toggleSelection('worldSelect');
    $('#worldcb').click(toggleSelection);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:34:47.353

您不能两次调用同一个函数并期望该函数记住 id 变量。

但是，您可以执行以下操作：

```
function toggleSelection(e){
    var el = '#' + e.data;
    console.log(arguments);
    if (this.checked) {
        $(el).attr('disabled', 'disabled');
    } else {
        $(el).removeAttr('disabled');
    }
}

$(function() {
    $('#worldcb').click('worldSelect', toggleSelection);
});​ 
```

小提琴：http: [//jsfiddle.net/4ZBne/1/](http://jsfiddle.net/4ZBne/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:38:44.223

怎么样：

```
$('#worldcb').click(function() {
    toggleSelection('worldSelect', $(this).is(':checked'));
});

function toggleSelection(sel, chk) {
    $('#' + sel).attr('disabled', chk);
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/zZWh8/)**。

toggleSelection() 函数有两个参数，sel - 选择框的 ID 和 chk，要使用的复选框。

# java - 如何从 ANDROID 中的 sqlite 数据库中获取数据？

> ID：10523631
> 
> 赞同：1
> 
> 时间：2012-05-09T20:28:37.800
> 
> 标签：java, android, android-layout

我第一次在 Android 中使用 sqlite 数据库，我在 Sqlite 中创建了我的数据库并将其复制到 android“资产”，我想通过“单击”“按钮”从数据库中获取数据，我有一个表包含4 个字段“ID、位置、纬度、经度”，但我无法从中获取任何数据。在我的 xml 中，我为插入数据“纬度”和“经度”制作了两个“编辑文本”，然后使用“搜索”按钮从数据库中获取数据位置。但我无法获得任何数据。我是安卓新手，请帮帮我

在这里我发布我的代码

数据库适配器

```
package com.joel.databases;

import java.io.IOException;

import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Arrays;

import android.content.Context;
import android.content.res.AssetManager;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DBAdapter {

private static String DB_PATH = "/data/data/com.tracking/databases/";
private static String DB_NAME = "tracking.sqlite";
private SQLiteDatabase db; 
//private final Context myContext;
private DBAdapter DBHelper;
private final Context context;

public DBAdapter(Context ctx) 
{
    this.context = ctx;
    DBHelper = new DBAdapter(context);
    //super(context, DB_NAME, null, 1);
    //this.myContext = context;
}

public void createDataBase() throws IOException {
    boolean dbExist = checkDataBase();
    if (!dbExist) {
        /*By calling this method and empty database will be created into            the          default system path
          of your application so we are gonna be able to overwrite that database with our database.
        */
        this.getReadableDatabase();
        try {
            copyDataBase();
        } catch (IOException e) {
            throw new Error("Error copying database file.");
        }
      }
     } 

private void getReadableDatabase() {
    // TODO Auto-generated method stub

}

public boolean checkDataBase(){
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,            
    SQLiteDatabase.OPEN_READONLY);
    }catch(SQLiteException e){
        //database does't exist yet.
    }
    if(checkDB != null){
        checkDB.close();
    }
    return checkDB != null ? true : false;
    }

private void copyDataBase() throws IOException{
    InputStream myinput =               
     context.getApplicationContext().getAssets().open(DB_NAME);
    OutputStream myoutput = new FileOutputStream("/data/data/com.tracking 
     /databases/"+ context.getApplicationContext().getPackageName() +"/databases
     /tracking.sqlite");
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myinput.read(buffer)) > 0) {
        myoutput.write(buffer, 0, length);
    }

    myoutput.flush();
    myoutput.close();
    myinput.close();

  }

  public void openDataBase() throws SQLException{
      //Open the database
      String myPath = DB_PATH + DB_NAME;
      db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }

    public synchronized void close() {
    if(db != null) db.close();
    db.close();
}

public void onCreate(SQLiteDatabase db) {}

public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
    } 
```

这是我的database.java

```
 package com.joel.databases;

   //import com.google.android.maps.MapView;
   import com.joel.databases.R;
   import android.app.Activity;
   import android.os.Bundle;
   import java.io.IOException;
   import android.app.Dialog;
   import android.app.ListActivity;
    import android.app.ProgressDialog;
    import android.content.Intent;
    import android.os.AsyncTask;
   import android.os.Bundle;
   import android.view.View;
   import android.widget.AdapterView;
   import android.widget.ArrayAdapter;
   import android.widget.Button;
   import android.widget.ListView;
   import android.widget.Toast;
   import android.widget.AdapterView.OnItemClickListener;
   import android.database.Cursor;

    public class databases extends Activity {
    /** Called when the activity is first created. */
private Button cari;
private databases this_class = this;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    DBAdapter db = new DBAdapter(this); 
    db.openDataBase();

    cari = (Button) findViewById(R.id.cari);
     // cari.setOnClickListener(new Button.OnClickListener(){
    //public void onClick(View v){
    InitDatabase();
    }

     public void InitDatabase() {
     AsyncTask<String, Void, String> InitDB = new AsyncTask<String, Void, String>() {
        Dialog progress = null;
        String msg;
        DBAdapter db_adapter;

        @Override
        protected void onPreExecute() {
            db_adapter = new DBAdapter(this_class);
            if (!db_adapter.checkDataBase())
            progress = ProgressDialog.show(this_class, "", "Installing 
         Database.\nPlease wait.");
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... params) {
            try {
                db_adapter.createDataBase();
                msg = "Database successfully installed.";
            } catch (IOException ioe) {
                msg = "Database installation failed.";
            }
            return msg;
         }

          @Override
         protected void onPostExecute(String result) {
            super.onPostExecute(result);
            if (progress!=null) {
                progress.dismiss();
                Toast.makeText(getApplicationContext(), result, 
          Toast.LENGTH_SHORT).show();
             }
          }
         };
        InitDB.execute(new String());
         } 

         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:50:55.147

利用

```
 OutputStream myoutput = new FileOutputStream(DB_PATH + DB_NAME); 
```

代替

```
 OutputStream myoutput = new FileOutputStream("/data/data/com.tracking 
     /databases/"+ context.getApplicationContext().getPackageName() +"/databases
     /tracking.sqlite"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:30:19.067

看看这个链接

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

它解释了如何在您的 Android 应用程序中使用和访问一个独立的、预加载的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T22:01:41.340

显然，你想要达到的目标远远超出了你的水平——我诚实且不受欢迎的建议是：花一些时间在一些更简单的平台上编写简单的东西。这样，您就可以继续前进，而无需一直寻求人们的帮助。独自前进是唯一能让你学习的东西。

然后学习一些 Java（只是基础知识，但包括语言和它周围的部分，比如命名约定）。

然后回到安卓。突然间，所有的教程和 api 文档都开始对你有意义了。

# xcode - 无法将 App 下载到 iOS 5.1.1 iPhone

> ID：10523632
> 
> 赞同：5
> 
> 时间：2012-05-09T20:28:38.000
> 
> 标签：xcode, xcode4.3, ios5, ios5.1

我在我的开发 iPhone 上安装了最新的 iOS 更新 (5.1.1)。在 Xcode 中，我现在收到错误“无法支持开发”。Xcode 说我在最新的 SDK 上是最新的。我怎样才能解决这个问题？我正在使用 Xcode 4.3.2 (4E2002)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:16:29.883

转到您的组织者并确保您正在使用的设备旁边有一个绿点。如果没有，请单击“用于开发”。

# mysql - mysql right join where 在一个子句上返回空

> ID：10523635
> 
> 赞同：1
> 
> 时间：2012-05-09T20:29:00.360
> 
> 标签：mysql, join, where

我有以下查询：

```
SELECT * FROM my_users as U 
RIGHT JOIN subscribers AS S ON S.userid = U.user_id 
WHERE S.approved > 0 AND S.channel_id = 1 AND S.alert_level >= 90 
```

如果我取消最后一个 AND 子句（AND S.alert_level >= 90），搜索将完全按预期工作。离开最后一个 AND 子句，我得到一个空的结果集。

显然，我检查了订阅者表以确保将返回的用户 ID 具有正确的 alert_level 并且他们都有 90，所以这应该返回 2 个用户......并且 S.alert_level 是一个 smallint(6)。

我在这里遗漏了一些明显的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:40:39.897

检查此查询的结果：

```
SELECT * FROM my_users as U 
RIGHT JOIN subscribers AS S ON S.userid = U.user_id 
WHERE S.approved > 0 AND S.channel_id = 1 
```

请注意`S.alert_level`为该结果集中的每一行返回的值。它可能不会超过 90。这就解释了为什么添加最后一个条件不会给你任何行。

# inno-setup - 创建一个具有两个文件名的快捷方式，其中一个是可变的？

> ID：10523636
> 
> 赞同：3
> 
> 时间：2012-05-09T20:29:03.277
> 
> 标签：inno-setup, shortcuts

我想创建一个调用两个文件的快捷方式，首先它调用 Excel.exe，然后它调用我的加载项。

我做了以下测试：

```
Target:
"C:\Program Files\Microsoft Office\OFFICE11\EXCEL.EXE" "C:\MyAddin.xll" 
```

它工作正常。现在我想在 inno-setup 中实现它。

我必须通过 inno-setup 中的一些自动化来获取 Excel.exe 位置，我将其存储在全局变量中。

这是我尝试过的：

```
Name: {commondesktop}\{#MyAppName}; Filename: ExcelExecutablePath; 
Parameters: {app}\{#MyAppExeName}; Tasks: desktopicon; 
Flags: CreateOnlyIfFileExists; IconFilename: {app}\Icons\TimeCard64.ico; 
```

我也尝试过其他的东西，但我对这个有点不知所措。

提前致谢。让我知道我是否应该更清楚一些事情！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T22:54:20.627

要查找“excel”的位置，您可以查询“App Paths”注册表项，如果它在代码部分的函数中包含“excel.exe”。例子：

```
[Icons]
Name: "{commondesktop}\My Excel File"; Filename: "{code:GetExcelPath}"; Parameters: """C:\MyAddin.xll"""

..

[Code]
function GetExcelPath(dummy: string): string;
begin
  RegQueryStringValue(HKEY_LOCAL_MACHINE, 'SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\excel.exe', '', Result);
  if Result = '' then
    Result := 'excel.exe';
end; 
```

# php - PHP curl_init 在控制台中不起作用

> ID：10523638
> 
> 赞同：0
> 
> 时间：2012-05-09T20:29:15.890
> 
> 标签：php, curl, console

我在我的脚本中使用 curl，它在浏览器中运行良好。但是当我尝试从控制台调用脚本时，我得到“调用未定义的函数 curl_init()”可能是什么问题？我应该做一些额外的配置让它在控制台中工作吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:36:46.160

你确定你调用的是正确的二进制文件吗？尝试使用 php -v 检查版本，也许您的 php 二进制文件来自较旧的编译，并且您有 php-cli 或 php-cgi 二进制文件或一些较新的二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:38:11.020

CLI 和浏览器都有自己的配置文件 (php.ini)。检查 CLI 使用的 .ini 文件并确保它是其中的一部分

# ruby-on-rails - 如何在不使用渲染的情况下在 Rails 中返回 json 对象：json

> ID：10523639
> 
> 赞同：2
> 
> 时间：2012-05-09T20:29:17.640
> 
> 标签：ruby-on-rails, json

根据我的阅读，我可以使用以下代码响应 json 请求：

```
respond_to do |format|
  format.json { render json: t.response }
end 
```

我的问题是 t.response 已经是 json 格式 - 我认为我的应用程序正在中断，因为 render json: 正在将其重新转换为 json。我该如何避免这种情况，只需返回 t.response。

请注意，如果我只是将 t.response 作为控制器中的最后一行，则会呈现相应的视图 - 这显然不是 json。

谢谢！

编辑：我试图让这个工作，所以我可以通过 tropo 发送短信。如果您以前使用过 tropo，您对如何正确响应 tropo 有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:47:39.087

`render json:`只需将内容类型设置为 application/json （`to_json`如果对象响应，则调用传递给它的对象`to_json`）。它不会转换或以某种方式修改您的响应。

[http://apidock.com/rails/ActionController/Base/render](http://apidock.com/rails/ActionController/Base/render)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T20:58:38.457

我将向您展示 Rails 如何处理转换为 json 格式。它基本上是在线的：

```
json = json.to_json(options) unless json.kind_of?(String) 
```

因此，字符串不会被转换，其他对象会通过它们的`to_json`方法转换为 String。如果您`t.response`返回一个字符串，则不执行任何转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T20:33:49.720

您可以改为渲染文本

```
respond_to do |format|
  format.json { render text: t.response }
end 
```

# android - 屏幕接收器在我的服务中不起作用

> ID：10523640
> 
> 赞同：0
> 
> 时间：2012-05-09T20:29:23.643
> 
> 标签：android, android-service

我正在尝试打开/关闭屏幕以在我的服务上工作，但到目前为止还没有运气。

目标是：当屏幕关闭时让 LED 灯（软键）熄灭，当屏幕重新打开时，使用用户在我的应用程序上输入的值打开软键灯（您将看到 TextXLActivity.getledC()从主要活动中获取 Int ）

在我的主要活动中，我可以毫无问题地控制 LED 灯，使用 SeekBar 等。唯一不起作用的是接收器/服务

现在，当我转到设置、应用程序、运行服务时，我的应用程序没有在任何地方列出，我担心我的服务根本没有启动，也许这就是问题所在。

这是我的接收器：

```
package com.test.xl;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class ScreenReceiver extends BroadcastReceiver {

private boolean screenOff;

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        screenOff = true;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        screenOff = false;
    }
    Intent i = new Intent(context, UpdateService.class);
    i.putExtra("screen_state", screenOff);
    context.startService(i);
}

} 
```

这里是我的服务：

```
package com.test.xl;

import com.sonyericsson.illumination.IlluminationIntent;

import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.IBinder;

public class UpdateService extends Service {

@Override
public void onCreate() {
    super.onCreate();
    // register receiver that handles screen on and screen off logic
    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    BroadcastReceiver mReceiver = new ScreenReceiver();
    registerReceiver(mReceiver, filter);

}
@Override
public void onStart(Intent intent, int startId) {
    boolean screenOn = intent.getBooleanExtra("screen_state", false);
    if (!screenOn) {

        {
            Intent led = new Intent(IlluminationIntent.ACTION_START_LED);
            led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");
            led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
            led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, TestXLActivity.getledC());
            startService(led);
        }

    } else {

        Intent led = new Intent(IlluminationIntent.ACTION_STOP_LED);
        led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, 0xFFFFFFFF);
        startService(led);

    }
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

这是一个测试应用程序，我开始尝试了解接收器/服务“关系”，任何帮助将不胜感激！;)

我还注意到我的服务迫使我实施以下几行：

```
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
} 
```

我遵循了一个关于如何让我的服务与接收器交互的教程，并且源代码最后没有类似的东西，有什么猜测吗？

此致

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test.xl"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10"/>
<uses-permission android:name="com.sonyericsson.illumination.permission.ILLUMINATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestXLActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
            <receiver android:name=".ScreenReceiver">
 <intent-filter>
<action android:name="android.intent.action..ACTION_SCREEN_ON" />
<action android:name="android.intent.action.ACTION_SCREEN_OFF" />
</intent-filter>
</receiver>

        </intent-filter>
    </activity>
</application>

</manifest> 
```

编辑：这是出现错误的源代码（startService（led））：

```
package com.test.xl;

import com.sonyericsson.illumination.IlluminationIntent;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class ScreenReceiver extends BroadcastReceiver {

private boolean screenOff;

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {

        Intent led = new Intent(IlluminationIntent.ACTION_STOP_LED);
        led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, 0xFFFFFFFF);
        startService(led);
        screenOff = true;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {

        Intent led = new Intent(IlluminationIntent.ACTION_START_LED);
        led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, TestXLActivity.getledC());
        startService(led);
        screenOff = false;
    }

} 
```

}

**新代码**

```
public class ScreenReceiver extends BroadcastReceiver {

private boolean screenOff;

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {

        Intent led = new Intent(IlluminationIntent.ACTION_STOP_LED);
        led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, 0xFFFFFFFF);
        context.startService(led);
        screenOff = true;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {

        int ledC = TestXLActivity.getledC();

        Intent led = new Intent(IlluminationIntent.ACTION_START_LED);
        led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, ledC);
        context.startService(led);
        screenOff = false;
    }

} 
```

.

```
public class UpdateService extends Service {

private ScreenReceiver mReceiver = null;

@Override
public void onCreate() {
    super.onCreate();
    // register receiver that handles screen on and screen off logic
    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    if(mReceiver != null)mReceiver = new ScreenReceiver();
    registerReceiver(mReceiver, filter);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    return Service.START_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onDestroy() {
    unregisterReceiver(mReceiver);
    super.onDestroy();
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T22:00:48.433

我认为您的问题是您的 BroadcastReceiver mReceiver 在您的服务的 onCreate 方法之后无法生存。此外，您没有声明它是正确的。如果我是你，我会做这样的事情：

```
public class UpdateService extends Service {

private ScreenReceiver mReceiver = null;

@Override
public void onCreate() {
    super.onCreate();
    // register receiver that handles screen on and screen off logic
    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    if(mReceiver != null)mReceiver = new ScreenReceiver();
    registerReceiver(mReceiver, filter);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    *** NOTE HERE THAT I AM OVERRIDING THE ONSTART AS AN INT NOT VOID***

    .... do your stuff here....

    return Service.START_STICKY;
} 
```

现在你的方法还有另一个问题。您在服务的 onCreate 方法中声明和实例化您的接收器，然后您从接收器的 onReceive 方法中再次启动服务。这不是 android 服务的工作方式。正确的方法是从服务的 onCreate 方法实例化和注册您的接收器，并从应用程序的另一个点启动服务，例如，如果它是一个应用程序小部件，您可以从 WidgetProvider 的 onUpdate 方法或从一些 Activity 的 onCreate 方法。

所以你的代码应该如下：

1.  您的接收器：

    ```
    public class ScreenReceiver extends BroadcastReceiver {

        private boolean screenOff;

        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
                screenOff = true;
            } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
                screenOff = false;
            }

            ... Do your stuff here for screen on or off ....
            ... AND DO NOT START A SERVICE FROM HERE ....
        }
    } 
    ```

2.  您的服务：

    ```
    public class UpdateService extends Service {

        private ScreenReceiver mReceiver = null;

        @Override
        public void onCreate() {
            super.onCreate();
            // register receiver that handles screen on and screen off logic
            IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
            filter.addAction(Intent.ACTION_SCREEN_OFF);
            if(mReceiver != null)mReceiver = new ScreenReceiver();
            registerReceiver(mReceiver, filter);
        }

        @Override
        public int onStartCommand(Intent intent, int flags, int startId) {
            NOTE HERE THAT I AM OVERRIDING THE ONSTART AS AN INT NOT VOID

            .... YOU DON'T HAVE TO DO SOMETHING HERE EXCEPT FROM SOME ....
            .... INITIALIZATION CODE ...

            return Service.START_STICKY;
        }

        @Override
        public IBinder onBind(Intent intent) {
            return null;
        }

        @Override
        public void onDestroy() {
            UnregisterReceiver(mReceiver);
            super.onDestroy();
        }
    } 
    ```

3.  您的活动或其他代码点：

    startService(new Intent(context, UpdateService.class));

这里发生的是这样的：

当 startService 执行时，您的服务会被实例化，并且 onCreate 方法会执行，在该方法中注册接收器并开始监视 Intent。然后调用服务的 onStart 方法并返回 START_STICKY ，这意味着如果从系统中终止服务将重新启动，因此接收者将再次注册，依此类推。顺便说一句，每当您的服务终止 onDestroy 方法将被调用并且接收器将被取消注册（这是一件非常糟糕的事情）。

现在，您已经准备好随时运行服务以接收来自系统的通知。

如果您希望在某个时候终止服务，只需调用

```
context.stopService(new Intent(context, UpdateService.class)); 
```

我并不真正深入了解 Android 服务，但这种技术非常适用于我的服务，该服务同时托管一个 BroadcastReceiver 和一个 ContentObserver。

***根据您的新进展进行编辑***

好的，现在看来我们正在取得进展。我可以在您的 onReceive 方法中看到

```
@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        Intent led = new Intent(IlluminationIntent.ACTION_STOP_LED);
        led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, 0xFFFFFFFF);
        context.startService(led);
        screenOff = true;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {

        int ledC = TestXLActivity.getledC();

        Intent led = new Intent(IlluminationIntent.ACTION_START_LED);
        led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, ledC);
        context.startService(led);
        screenOff = false;
    }
} 
```

您正在声明一个引导的意图，并且您正在使用它来启动服务，但您没有指定要启动哪个服务。我认为你缺少像 led.setClass 这样的东西。但是为了稍微清楚一点，让我们像这样修改 onReceive：

```
@Override
public void onReceive(Context context, Intent intent) {
    Intent led = new Intent(context, your_led_service_name.class);
    led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");

    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        led.addAction(IlluminationIntent.ACTION_STOP_LED);
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, 0xFFFFFFFF);
        context.startService(led);
        screenOff = true;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        int ledC = TestXLActivity.getledC();
        led.addAction(IlluminationIntent.ACTION_START_LED);
        led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, ledC);
        context.startService(led);
        screenOff = false;
    }
} 
```

看看现在情况如何……

第二次编辑

好的，我对 Sony Ericsson Illumination API 一无所知，但根据您的代码，您可能需要按如下方式更改 onReceive：

```
@Override
public void onReceive(Context context, Intent intent) {
    IlluminationIntent led = new IlluminationIntent(??);
    //Note: In place of ?? you may need your context on nothing at all
    //it depends on sony's API.

    led.putExtra(IlluminationIntent.EXTRA_PACKAGE_NAME, "com.test.xl");

    led.putExtra(IlluminationIntent.EXTRA_LED_ID, IlluminationIntent.VALUE_BUTTON_2);
    //This is only needed once...

    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        led.addAction(IlluminationIntent.ACTION_STOP_LED);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, 0xFFFFFFFF);
        screenOff = true;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        int ledC = TestXLActivity.getledC();
        led.addAction(IlluminationIntent.ACTION_START_LED);
        led.putExtra(IlluminationIntent.EXTRA_LED_COLOR, ledC);
        screenOff = false;
    }

    context.startService(led);
} 
```

希望这可以帮助...

# ssh - 是否有 scat（如“scp”等）或类似的东西？

> ID：10523642
> 
> 赞同：1
> 
> 时间：2012-05-09T20:29:37.997
> 
> 标签：ssh, cat

我想知道是否有这样的工具来查看远程服务器上的文本文件？

像`scat user@my.server.com/text.txt`什么？

显然`scat`只是我的想象。但你明白了！:)

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:32:19.900

ssh user@my.server.com 'cat /text.txt'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T20:34:27.813

使用 SSH，例如 ssh user@host "cat ~/text.test"

# node.js - 为什么 req.params 返回一个空数组？

> ID：10523644
> 
> 赞同：24
> 
> 时间：2012-05-09T20:29:55.960
> 
> 标签：node.js, express

我正在使用 Node.js，我想查看已发布到我的脚本的所有参数。为了发挥我的作用，`routes/index.js`我正在做：

```
app.post('/v1/order', order.create); 
```

然后在我的功能中，我有：

```
exports.create = function(req, res, next) {
 console.log( req.params ); 
```

但它返回一个空数组。但是当我这样做时：

```
exports.create = function(req, res, next) {
 console.log( req.param('account_id') ); 
```

我得到数据。所以我对这里发生的事情有点困惑。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2016-05-30T08:31:48.237

**[req.params](http://expressjs.com/en/4x/api.html#req.params)**
只能在这种模式下获取请求 url 的参数：`/user/:name`

**[req.query](http://expressjs.com/en/4x/api.html#req.query)**
获取查询参数（名称）`/user?name=123`或正文参数。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-05-09T20:40:14.500

req.params 仅包含路由参数，不包含查询字符串参数（来自 GET），也不包含正文参数（来自 POST）。然而， param() 函数会检查所有三个，请参阅：

[http://expressjs.com/4x/api.html#req.params](http://expressjs.com/4x/api.html#req.params)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2020-06-05T02:02:10.260

我有一个类似的问题，并认为我会为出于同样原因来到这里的人发布解决方案。我的 req.params 以空对象的形式出现，因为我在父路由中声明了 URL 变量。解决方案是将此选项添加到路由器：

```
const router = express.Router({ mergeParams: true }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-16T16:45:06.387

使用邮递员，您可以有两种类型的获取请求：

1.  通过正文使用`x-www-form-urlencoded`和传递数据。
2.  使用 url 参数

无论您如何传递数据，您都可以始终使用此代码片段来始终捕获数据。

```
/*
    * Email can be passed both inside a body of a json, or as 
    a parameter inside the url.

    * { email: 'test@gmail.com' } -> test@gmail.com
    * http://localhost/buyer/get/?email=test@gmail.com -> test@gmail.com
        */
    let { email }: { email?: string } = req.query;
    if (!email) email = req.body.email;

    console.log(email); 
```

# c++ - 将 BOOST_FOREACH 替换为“纯”C++11 替代品？

> ID：10523648
> 
> 赞同：19
> 
> 时间：2012-05-09T20:30:09.440
> 
> 标签：c++, boost, c++11, boost-foreach

是否可以`BOOST_FOREACH`用“纯”C++11 等价物替换此示例中的 ？

```
#include <map>
#include <functional>
#include <boost/foreach.hpp>
#include <iostream>

int main() {
  std::map<int, std::string> map = {std::make_pair(1,"one"), std::make_pair(2,"two")};
  int k;
  std::string v;
  BOOST_FOREACH(std::tie(k, v), map) {
    std::cout << "k=" << k << " - " << v << std::endl;
  }
} 
```

关键特性是将键/值对保留在对 和 的引用`k`中`v`。

我试过：

```
for(std::tie(k,v) : map)
{
  std::cout << "k=" << k << " - " << v << std::endl;
} 
```

和

```
auto i = std::tie(k,v);
for(i : map)
{
  std::cout << "k=" << k << " - " << v << std::endl;
} 
```

但是基于范围的 for 循环想法似乎都不起作用。据推测，基于范围的 for 循环需要在 之前有一个声明`:`，因为即使：

```
std::vector<int> test;
int i;
for (i : test); 
```

无效。

我能找到的最接近的等价物是：

```
for (auto it = map.begin(); it!=map.end() && (std::tie(k,v)=*it,1); ++it)
{
  std::cout << "k=" << k << " - " << v << std::endl;
} 
```

这不像`BOOST_FOREACH`版本那么简洁！

有没有办法在 C++11 中简洁地表达同样的事情而无需提升？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-09T20:42:12.470

```
for (auto & i : map)
{
    std::tie(k,v) = i;
    // your code here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T20:48:33.453

这会产生与 Boost 宏相同的输出

```
for( auto const& k : map ) {
  std::cout << "k = " << k.first << " - " << k.second << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-28T21:58:04.287

使用 C++17，现在可以使用结构化绑定来完成，例如：

```
#include <map>
#include <string>
#include <iostream>

int main() {
  const std::map<std::string, std::string> map = {std::make_pair("hello", "world")};
  for (auto& [k,v]: map) {
    std::cout << "k=" << k << ", v=" << v << "\n";
  }
} 
```

这当然是我在较新的项目中选择做的事情。

# iphone - 如何将iphone模拟器连接到selgrid 2？

> ID：10523649
> 
> 赞同：2
> 
> 时间：2012-05-09T20:30:11.623
> 
> 标签：iphone, ruby, selenium, webdriver, selenium-grid

我已完成[此处](http://code.google.com/p/selenium/wiki/IPhoneDriver)列出的所有步骤来设置支持 webdriver 的 iphone 模拟器。在创建驱动程序实例时，我还可以使用以下代码在本地运行我的模拟器脚本。

```
driver = Selenium::WebDriver.for :remote, :url => "http://localhost:3001/wd/hub", :desired_capabilities => :iphone 
```

我打算将这个模拟器连接到 sel grid 2，它的集线器在 Windows 机器上远程运行。

**有人可以分享在mac机器上启动selenium webdriver节点的命令（巧合的是我的本地机器）。**

就像是

```
java -jar selenium-server-standalone-2.21.0.jar -role webdriver -hubHost remotewindowmachine.com -hubPort 4444 -hub http://remotewindowmachine.com:4444/grid/register -host iphoneIP/hub -port 3001 -browser browserName=iphone 
```

引发错误

```
Exception in thread "main" java.net.BindException: Selenium is already running on port 3001. 
```

这似乎很明显，但我对该怎么做感到困惑。

那么有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T04:28:18.703

您无需运行节点注册命令即可将其注册到网格中。

**你错误的原因**

在 iPhone（和模拟器）中，当您启动 iWebDriverApp 时，它会在端口 3001 中作为远程控制启动。因此，当您尝试在同一端口（3001）上的同一台机器上启动另一个节点时，它会抛出此错误。

**解决方案**

我没有在模拟器中尝试过，而是在实际设备中尝试过。在您的设备中安装 iWebDriverApp 后，您需要设置应用程序的集线器详细信息。这可以通过转到**Settings->iWebDriverApp**来完成。您将找到用于指定 Hub URL 和端口的文本框。然后再次重新启动 iWebDriverApp。您的 iphone 将在网格中。

# smartgwt - 动态设置智能 gwt 列表网格标题

> ID：10523651
> 
> 赞同：2
> 
> 时间：2012-05-09T20:30:14.323
> 
> 标签：smartgwt, listgrid

我创建了一个 smartgwt[列表网格](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/grid/ListGrid.html#setFields%28com.smartgwt.client.widgets.grid.ListGridField...%29)。网格标题是静态的，内容由服务器端数据填充。代码看起来像这样

```
ListGrid grid = new ListGrid();
grid.setFields();//set columns names..  
grid.setData();//pass datasource.. 
```

在页面加载时，它首先初始化网格对象，设置字段名称（列），当服务器端数据可用时，它会填充网格。

当列/标题是静态的时，这种方法很好。但是，我正在尝试修改网格以便动态设置标题。更具体地说，服务器数据将包括有关网格标题的信息（网格的列数、列名等）。一种方法是将标题信息放在网格内容单元格中，并将该单元格设计为看起来像标题。

我想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:26:55.717

你看到这个了吗： [http ://www.smartclient.com/smartgwt/showcase/#grid_top_header](http://www.smartclient.com/smartgwt/showcase/#grid_top_header)

# python - 为什么 CPython 不使用 `sphinx.autodoc` 作为标准库？

> ID：10523653
> 
> 赞同：7
> 
> 时间：2012-05-09T20:30:29.493
> 
> 标签：python, python-sphinx, cpython, autodoc

我正在开发一个 python 库，我正在使用[sphinx.autodoc](http://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html)来生成文档，因为我认为这是一个不要重复自己并且让文档和代码达成一致的好方法。

在[sphinx autodoc 对 Emit reStructuredText 的评论中？](https://stackoverflow.com/q/10377576/1301710)我了解到*“CPython 文档构建过程没有启用自动文档（通过深思熟虑的选择）”*。

我想知道为什么 CPython 不使用它，使用它有什么缺点`sphinx.autodoc`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T04:55:16.883

这主要是历史问题，也是个人（和项目）偏好的问题。这些天来，您可以通过主要依赖文档字符串，然后在它们周围添加额外的散文来获得非常有用的文档。

然而，CPython 的文档早于 Sphinx 的存在（事实上，Georg Brandl 编写了 Sphinx 的初始版本来替换 CPython 的旧文档系统）。

因此，作为一项政策，文档字符串和散文文档仍然分开维护，而不依赖于使用 autodoc。

我们也*不允许*在标准库中使用 reStucturedText 文档字符串，这进一步降低了使用 autodoc 的好处。（参见 PEP 287 Q & A 中的 Q 10：http: [//www.python.org/dev/peps/pep-0287/#questions-answers](http://www.python.org/dev/peps/pep-0287/#questions-answers)）

最后，Georg Brandl[指出](http://mail.python.org/pipermail/python-dev/2012-May/119428.html)CPython 处于一个有点独特的位置，您需要小心确保在 Sphinx 运行时提供文档字符串的标准库版本与您为其生成文档的版本完全相同。意外地引入错误的版本太容易了，并且在拥有有效的 Python 构建和能够重新生成文档之间产生了强烈的依赖关系。

在 autodoc 方面，您确实会遇到这样的问题，即在编辑基于 autodoc 的文档时，您不能轻易地看到内联的 docstring 内容，因此很难确保 docstring 文本和附加的散文一起阅读良好。这个问题可以通过像[http://pymolurus.blogspot.com.au/2012/01/documentation-viewer-for-sphinx.html这样的自动浏览器刷新解决方案来缓解](http://pymolurus.blogspot.com.au/2012/01/documentation-viewer-for-sphinx.html)

autodoc 对重建的依赖也有问题，因为它不会自动在 Python 源文件上添加正确的依赖。我肯定遇到过文档字符串发生更改但 Sphinx 没有重新生成相关输出文件的问题。（我不相信这个问题已经得到解决，但如果它在最近的 Sphinx 版本中得到解决，请在评论中告诉我，我会删除这个观察结果）。

虽然我认为通过单独维护它们可以获得更好的文档*和*更好的文档字符串（因为两种写作风格并不完全相同，并且原始文档字符串通常比使用 reStructuredText 标记时更容易作为纯文本阅读），但这是一种方法这带来了相当高的额外维护工作成本和增加的不一致风险。

因此，对于大多数第三方 Python 项目，我的建议实际上是避免遵循标准库的示例，而是：

*   使用 reRestructuredText 文档字符串（参见 PEP 287：[http](http://www.python.org/dev/peps/pep-0287/) ://www.python.org/dev/peps/pep-0287/ ）
*   使用 apidoc/autodoc
*   *围绕*自动嵌入的文档字符串添加额外的散文文档，而不是作为替代品
*   使用自动更新方法，例如上面链接的方法，以查看文档字符串作为文档一部分的阅读效果

虽然它不是一个完美的解决方案，但这种方法*确实*节省了大量的重复工作，以使文档字符串和散文文档保持最新。

# ruby-on-rails - 将哈希作为参数传递给 Rake 任务

> ID：10523661
> 
> 赞同：9
> 
> 时间：2012-05-09T20:30:58.260
> 
> 标签：ruby-on-rails, hash, rake

我有一个 rake 任务

```
task :post_hit, [:host, :title, :description, :model, :num_assignments, :reward, :lifetime, :qualifications, :p, :opts] => :environment do |t, args| 
```

`:p`需要是一个哈希，但如果我尝试：

```
rake turkee:post_hit["http://www.staging.collegesportsbluebook.com","LS Info","Fill In Player First Name","MechanicalTurk",100,0.01,2,{},{id: 5},{}] 
```

它错误地说`id:`无法解析（空间似乎做了一些事情）。

如果我尝试：

```
rake turkee:post_hit["http://www.staging.collegesportsbluebook.com","LS Info","Fill In Player First Name","MechanicalTurk",100,0.01,2,{},{"id: 5"},{}] 
```

who 字符串`"id: 5"`被解释为单个字符串。

我们是否不允许将哈希传递给 rake 任务？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-17T13:35:16.817

我使用类似查询字符串的参数并用`Rack::Utils.parse_nested_query`

这是我的做法

```
require 'rack/utils' # needed for Rack::Utils.parse_nested_query

namespace :foo do
  task :bar, [ :args_expr ] => :environment do |t, args|
     args.with_defaults(:args_expr => "name=abdo&fruits[]=bananas&fruits[]=dates")
     options = Rack::Utils.parse_nested_query(args[:args_expr])

     puts options
  end
end 
```

我这样称呼它：（注意数组和哈希是如何传递的）

```
bundle exec rake "foo:bar[name=abdo&fruits[]=apples&fruits[]=oranges&hash[foo]=bar&hash[cool]=notmuch]" 
```

输出：

```
{"name"=>"abdo", "fruits"=>["apples", "oranges"], "hash"=>{"foo"=>"bar", "cool"=>"notmuch"}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T22:00:54.753

当您通过终端发出 rake 任务时，您处于 UNIX 或 Bash 环境中，因此您需要遵守该语言的规则，据我所知，其中不包括哈希值。不过我可能是错的。

[http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html#toc5](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html#toc5)

这并不意味着编写 rake 任务的人没有做一些聪明的事情来将字符串解析为哈希。如果我是您并试图弄清楚，我会查看源代码并查看该 rake 任务如何解析它的变量。

PS。如果它是您正在使用的 gem，并且您也在使用 bundler，您可以发出`bundle open gem_name`打开源代码，rake 任务通常以 .rake 结尾...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:06:39.947

尝试将任务中的 :p 变量声明为哈希？:p => {}

任务 :post_hit, [:host, :title, :description, :model, :num_assignments, :reward, :lifetime, :qualifications, :p => {}, :opts

# php - Magento - 以编程方式添加的捆绑产品不适用于购物篮/前端

> ID：10523664
> 
> 赞同：5
> 
> 时间：2012-05-09T20:31:08.720
> 
> 标签：php, magento, indexing, bundle, product

我遵循了这个很好的答案：[Magento - Programatically added bundle product is not displayed in frontend](https://stackoverflow.com/questions/6161128/magento-programatically-added-bundle-product-isnt-showing-up-in-frontend/6161246)

我能够即时生成捆绑产品。一切正常。

只有一个问题：我的捆绑产品已正确保存，我可以通过管理区域看到它。但是，在这一代运行之后，我必须直接将此产品添加到篮子中。系统返回“未找到产品”。基本上，我必须进入管理区域，只需保存它，然后我就可以将它添加到购物篮中。

我真的怀疑索引器有问题，但我真的不知道发生了什么。

我尝试了许多解决方案，例如：

```
Mage::getSingleton('index/indexer')->processEntityAction(
     $product, 
     Mage_Catalog_Model_Product::ENTITY, 
     Mage_Index_Model_Event::TYPE_SAVE
); 
```

但它仍然不起作用。关于我应该在 save 方法之后触发哪些代码来**仅**索引这个新添加的捆绑产品的任何想法。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:27:24.433

听起来您没有用您的产品创建库存项目。因此没有库存，您不能将其添加到您的购物篮中吗？

看看

```
/app/code/core/Mage/Adminhtml/controllers/Catalog/ProductController.php:672
/app/code/core/Mage/Adminhtml/controllers/Catalog/ProductController.php:571 
```

生成产品并使用默认数据清理/设置库存数据的位置

# c# - 如何将 openexchangerates.org 中的货币列表反序列化为 C# 自定义类或对象？

> ID：10523673
> 
> 赞同：2
> 
> 时间：2012-05-09T20:32:16.357
> 
> 标签：c#, json, object, serialization, deserialization

我需要从这里获取 C# 中的货币值列表：http: [//openexchangerates.org/currencies.json](http://openexchangerates.org/currencies.json)

产生这种输出：

```
{
    "AED": "United Arab Emirates Dirham",
    "AFN": "Afghan Afghani",
    "ALL": "Albanian Lek",
    "AMD": "Armenian Dram",
    "ANG": "Netherlands Antillean Guilder",
    "AOA": "Angolan Kwanza"
        // and so on
} 
```

我设法使用 C# 获得了一个包含上述值的字符串，但是我找不到将该字符串反序列化为任何自定义类或匿名对象的方法，所以我想知道该怎么做？

另外，我正在尝试使用 Json.NET 来做到这一点，但到目前为止找不到解决方案......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:39:30.400

使用[Json.Net](http://json.codeplex.com/)

```
var dict = JsonConvert.DeserializeObject<Dictionary<string, string>>(jsonString); 
```

- 编辑 -

你可以让它更短

```
WebClient w = new WebClient();
string url = "http://openexchangerates.org/currencies.json";
var dict = JsonConvert.DeserializeObject<Dictionary<string, string>>(w.DownloadString(url)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:03:43.080

仅使用 .Net 4.0 且不使用第三方库的解决方案：

```
string url = "http://openexchangerates.org/currencies.json";

var client = new System.Net.WebClient();
string curStr = client.DownloadString(url);

var js = new System.Web.Script.Serialization.JavaScriptSerializer();
var res = (js.DeserializeObject(curStr) as Dictionary<string, object>)
    .Select(x => new { CurKey = x.Key, Currency = x.Value.ToString() }); 
```

输出匿名对象列表，列表中的键和值作为属性。

享受 ：）

# c# - WPF：如何在具有延迟时间的单独线程中调用方法

> ID：10523677
> 
> 赞同：4
> 
> 时间：2012-05-09T20:32:33.277
> 
> 标签：c#, wpf, multithreading, c#-4.0, dispatcher

我有一个`TextBox`用户可以在其中输入搜索词。它绑定到`string Term`我的属性`view-model`。我想在内容发生变化时进行搜索查询。但我想在一个单独的线程中**延迟**查询。

例如，当用户输入一个字母时，我想等待**0.3 秒**，如果用户在这段时间内（0.3 秒）更改输入，计时器将**重置并重新启动**。否则，我会启动一个新线程并执行搜索查询。在执行查询时，如果用户再次更改术语，则中止上一个查询并重新开始。

我知道如何在带有线程和`Timer`类的 Windows 窗体中做到这一点。但我是新手`WPF`，我正在搜索是否有为 WPF 线程功能指定的方法（或者可能是一种性能更好的方法）。

你有什么想法吗？你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:36:38.777

你可以使用[`DispatcherTimer`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx). 在每次按键时，如果计时器已经在运行，则停止计时器，然后启动它。我*相信*（你应该检查一下！）那会重置它。

如果它触发，那么您将获取文本框中的当前值并开始在单独的线程中执行操作（例如，使用`Task.Factory.StartNew`，如果您使用的是 .NET 4，或者`BackgroundWorker`，或者只是创建一个新线程）。

基本上，这将“新线程”部分与“我真的想做某事”部分分开，将所有内容都保留在 UI 线程上，直到您决定确实*想要*做某事（并且您知道您的价值）想用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:36:32.160

您可能想查看 Microsoft 的[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609)。一旦经过一定的延迟，Rx 提供了一种将这些类型的事件聚合为单个事件的方法。

Phil Haack（前 Microsoft）在他的[博客](http://haacked.com/archive/2012/04/09/reactive-extensions-sample.aspx)上有一篇很好的文章，他谈到了节流功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T00:05:26.543

这只是建立在 Jon Skeets 所说的基础上。把复选标记给他。`.stop()`似乎重置了`timer`.

```
public MainWindow()
{
    InitializeComponent();

    backgroundWorker1 = new BackgroundWorker();
    backgroundWorker1.WorkerReportsProgress = true;
    backgroundWorker1.WorkerSupportsCancellation = true;
    backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
    backgroundWorker1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(backgroundWorker1_RunWorkerCompleted);
    backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);

    dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
    dispatcherTimer.Interval = new TimeSpan(0, 0, 4);
}

public string Input
{
    get { return input; }
    set
    {
        if (value == input) return;
        value = value.Trim();
        input = value;
        NotifyPropertyChanged("Input");

        if (backgroundWorker1.IsBusy) backgroundWorker1.CancelAsync();
        dispatcherTimer.Stop();                
        dispatcherTimer.Start();
    }
 }

private void dispatcherTimer_Tick(object sender, EventArgs e)
{
    dispatcherTimer.Stop();
    if (!backgroundWorker1.IsBusy)
    {
        backgroundWorker1.RunWorkerAsync(Input);
    }
} 
```

# c++ - 从另一个进程中的内存执行一个进程？

> ID：10523681
> 
> 赞同：9
> 
> 时间：2012-05-09T20:32:50.490
> 
> 标签：c++, c, linux, memory

我想要一个小的“应用程序加载器”程序，它通过 TCP 从外部服务器接收其他二进制应用程序文件并运行它们。

我可以通过将传输的文件保存到硬盘并使用 system() 调用来运行它来做到这一点。但是，我想知道是否可以在不接触硬盘的情况下从内存启动新应用程序。

加载新应用程序后，加载程序应用程序的状态无关紧要。我更喜欢坚持 C，但也欢迎 C++ 解决方案。如果可能的话，我还想坚持使用标准的 Linux C 函数并且不使用任何外部库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:39:19.620

简短的回答：没有。

长答案：在不将其写入磁盘的情况下执行此操作是可能的，但相当棘手。从理论上讲，您可以编写自己的 elf 加载器来读取二进制文件、映射一些内存、根据需要处理动态链接，然后转移控制权，但这是大量的工作，几乎不值得付出努力。

下一个最佳解决方案是将其写入磁盘并尽快调用 unlink。磁盘甚至不必是“真正的”磁盘，它可以是 tmpfs 或类似的。

我最近一直在使用的替代方法是不传递完整的编译二进制文件，而是传递 LLVM 字节码，然后可以将其 JIT'd/解释/保存为合适的。这还具有使您的应用程序在异构环境中工作的优势。

尝试组合`fmemopen`,`fileno`和可能很诱人`fexecve`，但这不起作用有两个原因：

1.  从`fexecve()`手册页：

    > *“文件描述符 fd 必须以只读方式打开，并且调用者必须具有执行**它所引用的文件的**权限”*

    即它必须是一个引用文件的fd。

2.  从`fmemopen()`手册页：

    > *“没有与这些函数返回的文件流关联的文件描述符（即，`fileno(3)`如果在返回的流上调用将返回错误）”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:05:25.673

比这样做更容易的是，C 只是设置一个 tmpfs 文件系统。您将拥有硬盘接口的所有优点，从您的程序/服务器/任何您可以做的`exec`. 这些类型的虚拟文件系统现在非常有效，页面缓存中实际上只有一个可执行文件的副本。

正如 Andy 指出的那样，要使这种方案有效，您必须确保不对文件使用缓冲写入，而是直接在原地“写入”（在更广泛的意义上）。

*   你必须知道你的可执行文件有多大
*   在你的 tmpfs 上创建一个文件
*   将其缩放到那个大小`ftruncate`
*   将该文件“映射”到内存中`mmap`以获取缓冲区的地址
*   将该地址直接传递给`recv`调用以将数据写入到位
*   `munmap`文件
*   `exec`用文件调用
*   `rm`文件。即使可执行文件仍在运行也可以完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:52:40.993

您可能想查看并重用[UPX](http://upx.sourceforge.net/)，它将可执行文件解压缩到内存，然后将控制权转移`ld-linux`到启动它。

# javascript - HTML/Javascript：将键盘敲击输出到 URL 参数

> ID：10523683
> 
> 赞同：3
> 
> 时间：2012-05-09T20:33:08.977
> 
> 标签：javascript, html, arduino, url-parameters, keyboard-input

我将首先解释我的总体目标，然后是问题本身。

总体的目标：

向连接到路由器的 Arduino 板发送命令。一台电脑将通过wifi连接到路由器。Arduino 将为本地网站提供服务，计算机将使用该网站向 Arduino 发送按键。根据按键的不同，Arduino 将以某种方式运行。

向 Arduino 发送命令的一种方法是使用 Arduino 服务的网站 URL 末尾的参数。Arduino 可以读取这些参数。我对此没有任何问题。

Arduino 能够为使用 Javascript/HTML/CSS 等编码的网站提供服务。

问题：

我已经使用 Javascript 一个星期了；但到目前为止，我有以下代码：

```
<!DOCTYPE html>
<html>
<head>

<script type="text/javascript">

function Submit()
{
document.forms['myform'].submit();
}

document.onkeydown = function(event) {
var key_press = String.fromCharCode(event.keyCode);
var key_code = event.keyCode;
document.getElementById('kp').innerHTML = key_press;
    document.getElementById('kc').innerHTML = key_code;
var t=setTimeout("Submit()", 500);          
}

</script>
</head>

<form name='myform' method='GET'>

Key Pressed : <span id="kp" name="KP"></span>
<br />
Key Code : <span id="kc" name="KC"></span>

</form>
</html> 
```

有了这个，我可以从我敲击的键盘上看到键的“键码”。该网站将看到按键，输出按键代码和实际按键。

我把设置超时功能放在那里，所以当我拿着一个键时，页面以更慢、恒定的速率刷新。

我知道 HTML 中的某些东西会自行创建和管理参数。例如，下拉框。据我了解，当下拉框放入

```
<form method='GET'></form> 
```

标签，您可以创建参数。文本框也会做同样的事情。然后，如果一个人“提交”了网页，那么这些对象中的调整值将出现在 URL 的参数中。

但是，我不知道如何将键码的值输出到对象，然后提交页面以将值实时复制到 URL 参数。

通过实时：例如，我的意思是在我按下“向上”时继续发送命令，并在我释放时停止。

我可以通过在文本框中输入一个字母并使用提交按钮将值输入到 URL 参数中来完成此操作的粗略版本。但是，我不能在其中包含向上或向下箭头，并且我希望网页能够实时提交。

**TLDR：**如何使用键盘上的键码实时控制 URL 中的参数？

非常感谢您阅读本文。非常感谢所有回复。

**编辑 5/15/12** web_bod 给了我一些有用的代码。这是完整的新代码：

```
<!DOCTYPE html>
<html>
<head>

<script type="text/javascript">

function Submit()
{  
document.forms['myform'].submit();
}

document.onkeydown = function(event) {
var key_press = String.fromCharCode(event.keyCode);
var key_code = event.keyCode;
document.getElementById('kp').innerHTML = key_press;

var t=setTimeout("Submit()", 500);          
}

</script>
</head>

<body onLoad='document.myform.KP.focus()'>
<form name='myform' method='GET' action="ENTER URL HERE">
Key Pressed : <input type="text" id="kp" name="KP"></span>

</form>
</body>
</html> 
```

我将网页焦点放在了文本框上。没有它，我必须点击文本框，然后代码才能最终注册。

它的表现如何：当网页加载时，页面将自动聚焦在文本框上。它等待按键。按一个键：半秒后页面会加载字母到URL的参数（你可以用setTimeout()让它响应更快）。该键将保留在参数中，直到按下另一个键。

我知道乞丐不能成为选择者，但我希望它能够执行“视频游戏风格”，其中一个动作持续很长时间，我按下一个键，并且在我释放键的那一刻动作停止。在这种情况下，如果您按住一个键，文本框将填充字母，然后提交。这行不通，因为我希望 Arduino 查找单个字符，而不是字符列表。然而，到目前为止这真的很棒。我当然不介意实施这一点。

但是，正如 Tim 所提到的，我一直在对套接字通信进行大量研究。这似乎是一条好路，Arduino Ethernet Shield 使用 UDP 库，到目前为止，我唯一的困难是设置客户端。Arduino 是服务器。发生这种情况，我会进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T03:03:05.513

首先替换你的跨度：

```
<form name='myform' method='GET' action="scriptURL">
    Key Pressed : <input type="text" id="kp" name="KP"></span>
    <br />
    Key Code : <input type="text" id="kc" name="KC"></span>
</form> 
```

（这将生成一个如下所示的网址：**scriptURL?KP=xxx&KC=yyy**）

如果你想要一些重量很轻的东西，那么如何：

```
<script>     
  document.onkeydown = function(event) {
    var key_press = String.fromCharCode(event.keyCode);
    var key_code = event.keyCode;
    document.getElementById('img').src = "scriptURL?KP=" + key_press + "&KC=" + key_code;
  }
</script>

<img src="scriptURL" id="img" style="display:none;"/> 
```

每次按键都会触发图像的重新加载（它是隐藏的），无论返回的数据如何，服务器上的脚本都会实时接收 KP 和 KC 参数。

# android - Android中的阿拉伯语“断开”字母

> ID：10523687
> 
> 赞同：1
> 
> 时间：2012-05-09T20:33:12.970
> 
> 标签：android, arabic

我正在为我的智能手机（带有 2.3.5 android、sense 3.0 且未脱译）的智能手机（HTC Desire S）寻找支持阿拉伯语并解决“断开”字母的问题的应用程序或任何库（准备使用）。我尝试在安卓市场上使用一些阿拉伯语阅读器应用程序，但他们没有解决问题。我不是程序员，我不知道如何为它更改/创建 jar 库。

有没有人知道有没有更新或消息？！

谢谢。

# facebook - 用户ID的Facebook JS API登录保证？

> ID：10523689
> 
> 赞同：1
> 
> 时间：2012-05-09T20:33:18.680
> 
> 标签：facebook, facebook-canvas

JS API 的`FB.login`方法返回一个包含用户信息字典的响应，包括用户 ID。这存在于 JS api 中的客户端。

如果这将被发送回运行 facebook 画布应用程序的服务器，服务器必须相信用户 ID 没有被篡改。由于响应没有返回签名校验和，我看不出如何保证这一点。

我可以看到您如何从 POST 签名请求中获取用户 ID 并将其存储在会话中，但这似乎不太正确。我敢肯定，有一种方法可以安全地做到这一点，而且没有那么巴洛克式。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:44:20.563

您应该对服务器使用[服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)。

当用户加载您的应用程序但尚未进行身份验证时，您将他发送到身份验证对话框，当他返回时您会得到一个代码，然后您与 facebook 服务器交换该代码以获取访问令牌，然后您可以查询图形 api 以获取“ /me" 并获取用户数据，因为您是从 facebook 服务器获取的，所以您知道没问题。

此外，当 facebook 发布到您的画布 url 时，您会收到一个使用您的应用程序密码签名的签名请求，在您对其进行解码后，您可以根据您的密钥检查它以验证其真实性。此外，签名请求具有用户 ID，因此您知道它也是安全的。

我建议同时使用服务器端身份验证和客户端身份验证，您会获得不同的令牌（服务器为 60 天，客户端为几个小时），您可以同时使用它们。

# c# - C# 动态进度条

> ID：10523691
> 
> 赞同：1
> 
> 时间：2012-05-09T20:33:22.387
> 
> 标签：c#, progress-bar

我的 winform 有一个进度条，它应该根据程序正在处理的文件数量增加。它在一个盒子（win xp）上运行良好，但在另一个盒子上运行良好（winserver 2008）。到过程结束时，条没有完全填满。两者都具有相同的 .net 框架 3.5

```
private void data_process()
    {
        int progress_num = (100/checkedListBox1.Items.Count);
        .......
         progressBar1.Value = progressBar1.Value + progress_num;} 
```

你知道为什么吗？你有更好的解决方案吗？

------这是新代码

```
private void button1_Click(object sender, EventArgs e)
{
        progressBar1.Value = 0;
        richTextBox1.Clear();
        richTextBox1.Focus();
        if (checkedListBox1.CheckedItems.Count < 1)
        {
            MessageBox.Show("No file is selected", "Warning");

        }

        else
        {
            if ((region != null) && (venue != null) && (lhversion != null) && (release_version != null) && (desc != null))
            {
                progressBar1.Maximum = checkedListBox1.Items.Count + 3;
                progressBar1.Step = 1;
                //progressBar1.Value = progressBar1.Value + 10;
                progressBar1.PerformStep();
                login();
                //progressBar1.Value = progressBar1.Value + 10;
                progressBar1.PerformStep();
                data_process();
                //progressBar1.Value = progressBar1.Value + 10;
                progressBar1.PerformStep();
                if (user_in == true)
                {
                    richTextBox1.SelectionColor = Color.Blue; 
                    richTextBox1.AppendText("Done");
                }
            }

 private void data_process()
 {
            string line;
            //int progress_num = (70/checkedListBox1.Items.Count);

            foreach (object itemChecked in checkedListBox1.CheckedItems) // for each selected file
            {
                  ...
                  progressBar1.PerformStep();
            }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:43:39.530

我将尝试使用本机命令来增加进度条而不计算增量
（当项目> 100 时会发生什么？）

```
progressBar1.Maximum = checkedListBox1.Items.Count;
progressBar1.Step = 1;
...
progressBar1.PerformStep(); 
```

# c# - 在多租户、单 Web 应用程序中使用 EF 的数据库连接注意事项

> ID：10523693
> 
> 赞同：1
> 
> 时间：2012-05-09T20:33:33.913
> 
> 标签：c#, entity-framework, multi-tenant

我们正在编写单页应用程序（SPA），其中用户在成功登录后连接到不同的数据库。当用户通过身份验证和授权时，他们的“个人资料”将包含他们可以连接到的 ldatabse id...

我的问题围绕实体框架和 ASP.NET MVC（和 Web API）

*   是否可以在运行时（用户登录后）使用 EF 连接到不同的数据库。我不能使用 web.config 中的连接字符串，因为它会有所不同......如果可能的话，任何例子都将不胜感激......
*   由于创建连接是昂贵的操作，我应该考虑任何性能优化吗？我应该在第一个用户登录时尝试为数据库创建一个连接池，还是应该为我预先拥有的每个数据库创建一个池（嗯......）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T00:41:29.380

如果不同的数据库具有相同的结构并且您可以使用相同的模型，那么您应该能够连接到不同的数据库。ObjectContext 和 DbContext 都有构造函数，它接受可以是连接字符串的字符串。请注意，ObjectContext 需要包含工件名称/位置的实体连接字符串。我相信连接会自动汇集。除非测试表明这会导致性能问题，否则我不会尝试在这里进行任何优化。

# svn - 在 Subversion 中对外部文件使用“需要锁定”不能按预期工作

> ID：10523694
> 
> 赞同：1
> 
> 时间：2012-05-09T20:33:35.220
> 
> 标签：svn, tortoisesvn

我希望一些共享文件在创建工作副本时显示为只读。

我正在尝试为几个项目设置一个存储库，这些项目都需要一些相同的文件作为资源。我已经通过使用 Subversion 中的 External 属性将它们设置为共享（实际上我使用的是 TortoiseSVN） 这些文件被标记为该属性的特定修订版。这一切似乎都很好。由于文件是共享的，我希望它们被锁定，这也可以。但是，我也希望开发人员知道不要意外编辑文件。我尝试在文件上使用“needs-lock”属性，以便它们以只读方式检出。如果我从“真实”来源制作我的工作副本，那将有效。如果我有一个使用外部引用来获取文件的工作副本，但是它不会被创建为只读，并且在您尝试提交之前无法知道它不应该被编辑。

我一直找不到任何解释使用外部文件的锁的东西。还有另一种方法，也许我在文件设置中遗漏了一些东西？谢谢。

# regex - 如何在 phpunit 中执行“开始于”正则表达式过滤器

> ID：10523700
> 
> 赞同：2
> 
> 时间：2012-05-09T20:34:05.260
> 
> 标签：regex, phpunit

我试过这个 `phpunit --debug --filter /^complete/ feed.php;`

出于某种原因，它说 0 个测试。

如果我这样做`phpunit --debug --filter /complete/ feed.php;`，它会使用“完成”这个词来命中任何功能

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T20:49:46.570

那是因为`$name`测试的完全合格表示为`Classname::testname`

所以你需要使用`::`而不是`^`

像：

```
$ phpunit --filter /::testIs/
PHPUnit 3.6.10 by Sebastian Bergmann.

Configuration read from /var/www/.../phpunit.xml

..

Time: 1 second, Memory: 10.75Mb

OK (2 tests, 4 assertions) 
```

# javascript - 使用变量“名称”不适用于 JS 对象

> ID：10523701
> 
> 赞同：34
> 
> 时间：2012-05-09T20:34:05.933
> 
> 标签：javascript, object, window-object

可以在这个小片段中看到该行为（将其作为全局脚本执行）：

```
var name = {};
name.FirstName = 'Tom';
alert(name.FirstName); 
```

警报`undefined`在 Chrome 中产生，但在 IE 和 Firefox 中有效。当我这样做时，我也会得到一个奇怪的价值

```
alert(name); 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-09T21:04:07.110

[window.name](https://developer.mozilla.org/en/DOM/window.name)有一个特殊用途，应该是一个字符串。Chrome 似乎将其显式转换为字符串，因此`var name = {};`实际上最终给全局变量（`name`即. 由于它是一个原始类型，因此属性 ( ) 不会“粘住”。`window.name``"[object Object]"``name.FirstName`

要解决此问题，请不要将`name`其用作全局变量。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-28T03:29:43.020

您的`name`变量实际上是`window.name`，因为用声明的顶级变量`var`附加到全局对象。

HTML5 规范[要求它`window.name`是一个`DOMString`](http://www.w3.org/html/wg/drafts/html/master/browsers.html#the-window-object). 这意味着 的值`window.name`只能[是字符序列](http://www.w3.org/TR/WebIDL/#idl-DOMString)，不能是对象。

在 Chrome 中，尝试使用`window.name`存储原始字符串以外的任何内容都会将值强制转换为原始字符串。例如：

```
window.name = {};
window.name === "[object Object]"; // true 
```

`name`您可以通过使用不在顶级范围内的变量来避免此问题：

```
(function() {
    var name = {};
    // this `name` is not `window.name`
    // because we're not in the top-level scope

    console.log(name);
})(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-12T05:09:37.877

使用 ES6+，您可以将代码编写为`let name`或`const name`. 这不会分配它或尝试覆盖`window.name`. 更多关于[这里](https://stackoverflow.com/questions/28776079/do-let-statements-create-properties-on-the-global-object)。

```
let name = {};
name.FirstName = 'Tom';
alert(name.FirstName);
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T21:05:44.723

`window.name`用于设置窗口的名称，由于窗口名称只能是字符串，因此您设置的任何内容`window.name`都会转换为字符串。字符串，作为原始值，不能有属性。解决方案是使用不同的变量名或不同的范围。

或者，`window.name`如果您首先拥有此代码，则可以随意使用。我根本不推荐这个，但是，作为一个概念证明：

```
(function () {
    var _name;
    window.__defineGetter__('name', function () {
        return _name;
    });
    window.__defineSetter__('name', function (v) {
        _name = v;
    });
})(); 
```

此外，您应该使用`{}`. `new Object`除了更简洁之外，它还更高效、更明确。

# java - 膨胀类 com.google.ads.AdView 时出错

> ID：10523703
> 
> 赞同：21
> 
> 时间：2012-05-09T20:34:09.490
> 
> 标签：java, android, eclipse, admob

您好，我是 android dev 和 admob 的新手。我正在尝试制作一个简单的测试应用程序，底部有一个按钮、几个页面和 admob。在我尝试实施 admob 之前一切正常。这是我的代码：

你好Android.java：

```
package com.manny.HelloAndroid;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ImageView;

public class HelloAndroid extends Activity {
    /** Called when the activity is first created. */
    private static final int ACTIVITY_CREATE = 0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        ImageView image = (ImageView) findViewById(R.id.test_image);
        //image.setScaleType(ImageView.ScaleType.FIT_XY);

    }
    public void onClick(View v){
        Intent i = new Intent(this, HelloPage2.class);
        startActivityForResult(i, ACTIVITY_CREATE);
    }
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView 
        android:id="@+id/test_image"
        android:src="@drawable/bak_vert_480x800"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:scaleType="fitXY"
        />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />
    <ImageButton 
        android:id="@+id/test_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/btn_arrow"
        android:layout_marginLeft="100dp"
        android:layout_marginTop="200dp"
        android:onClick="onClick"
        />
     <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="b14be806e9ddf1f"
                         ads:adSize="BANNER"
                         ads:testDevices="TEST_EMULATOR, TEST_DEVICE_ID"
                         ads:loadAdOnCreate="true"/>

</RelativeLayout> 
```

你好 android 清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.manny.HelloAndroid"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" 
        android:targetSdkVersion="13"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
        <activity
            android:name=".HelloAndroid"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".HelloPage2">
        </activity>
    <activity android:name="com.google.ads.AdActivity"
                    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|s    mallestScreenSize"/>
  </application>
  <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
</manifest> 
```

日志输出：

```
05-09 13:12:00.859: D/dalvikvm(24278): GC_EXTERNAL_ALLOC freed 51K, 44% free 3054K/5379K, external 2357K/2773K, paused 94ms
05-09 13:12:00.937: D/dalvikvm(24278): GC_EXTERNAL_ALLOC freed 1K, 44% free 3053K/5379K, external 3857K/4816K, paused 31ms
05-09 13:12:01.085: D/AndroidRuntime(24278): Shutting down VM
05-09 13:12:01.085: W/dalvikvm(24278): threadid=1: thread exiting with uncaught exception (group=0x4001e560)
05-09 13:12:01.109: E/AndroidRuntime(24278): FATAL EXCEPTION: main
05-09 13:12:01.109: E/AndroidRuntime(24278): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.manny.HelloAndroid/com.manny.HelloAndroid.HelloAndroid}: android.view.InflateException: Binary XML file line #30: Error inflating class com.google.ads.AdView
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1702)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1722)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:974)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.os.Looper.loop(Looper.java:130)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.app.ActivityThread.main(ActivityThread.java:3821)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at java.lang.reflect.Method.invokeNative(Native Method)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at java.lang.reflect.Method.invoke(Method.java:507)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at dalvik.system.NativeStart.main(Native Method)
05-09 13:12:01.109: E/AndroidRuntime(24278): Caused by: android.view.InflateException: Binary XML file line #30: Error inflating class com.google.ads.AdView
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:253)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.app.Activity.setContentView(Activity.java:1716)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at com.manny.HelloAndroid.HelloAndroid.onCreate(HelloAndroid.java:17)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1666)
05-09 13:12:01.109: E/AndroidRuntime(24278):    ... 11 more
05-09 13:12:01.109: E/AndroidRuntime(24278): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader[/data/app/com.manny.HelloAndroid-2.apk]
05-09 13:12:01.109: E/AndroidRuntime(24278):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
05-09 13:12:01.109: E/AndroidRuntime(24278):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
05-09 13:12:01.109: E/AndroidRuntime(24278):    ... 20 more
05-09 13:12:11.593: I/Process(24278): Sending signal. PID: 24278 SIG: 9 
```

我正在使用 GoogleAdMobAdsSdkAndroid-6.0.0。同样，我对此很陌生，我尝试过在多个站点上使用示例，但是当应用程序访问包含 admob 的页面时，该应用程序继续崩溃。如果有人可以帮助我，将不胜感激。谢谢你。如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-09T23:53:27.237

您最近是否将您的 Android 工具更新到 r17 或更高版本？如果是这样，您需要在项目中创建一个 libs/ 文件夹，并将 SDK 物理放入项目中。或者，在 Java 构建路径中，您必须订购和导出 SDK jar。

否则，当您的 apk 被编译时，jar 不会被包含在内，并且当您在运行时运行 AdMob 代码时，所有的地狱都会崩溃。

注意：这适用于您的项目引用的任何库。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-09T01:42:34.823

对我来说，它是这样工作的。

*   关闭日食
*   在项目的“libs”文件夹中手动添加 sdk ad jar 文件
*   打开日食
*   刷新您的项目，直到 sdk jar 出现在 libs 文件夹中
*   转到项目的属性 > Java 构建路径 > 库选项卡，然后选择“添加罐子”而不是外部罐子。并从下面的列表中选择 sdk。
*   转到“订购和导出”选项卡并再次选择 SDK
*   单击确定并完成。

然后只需在清单和 xml 中添加正确的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T18:32:21.593

我也在经历这个。无论我做什么，构建路径似乎都不起作用。所以我退出了 Eclipse，在工作台包目录中创建了一个新的 libs 文件夹。将 GoogleAdMobAdsSdk-6.0.1.jar 添加到该文件夹​​。我没有添加整个 SDK，只是添加了 jar 文件。然后重新启动 Eclipse。我不得不刷新项目检查器列以显示我在 Eclipse 之外所做的更改。它显示了新的 libs 文件夹和 jar 文件，但它仍然无法正常工作......然后我右键单击新的 libs 文件夹并将其设置为 SOURCE FOLDER。现在一切正常！

我正在使用 Eclipse 版本：Indigo Service Release 2 Build id：20120216-1857

安卓开发工具 18.0.0.v201203301601-306762

似乎这些工具可能领先于文档......或者某种 Eclipse 错误......非常令人恼火！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T13:14:47.513

我有同样的问题，并注意到订购出口清单也很重要。
这是我的，它是这样工作的：

![在此处输入图像描述](../Images/51d776814b21d292e6701c1f918742b5.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T05:51:29.397

我所做的 - 现在对我有用 - API 级别 17 对于 admob：
- 使用适当的 ID 将 adview 代码添加到您的布局
- 将 Admob 清单代码添加到您的项目清单文件中
- 将外部 GoogleAdmobAdsSDK ....jar Jar 文件添加到您的库（在 Properties\Java Build 路径中）
-选中以选择 GoogleAdmobAdsSDK..jar 在选项卡中的顺序和导出
-重新启动您的 ADT

DEGUB = 现在工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-01T22:09:34.613

在 Android Studio 中： 1\. 将 Google AdMob SDK 粘贴到项目的 libs 文件夹中 2\. 为指向 jar 的项目添加一个条目到 build.gradle 的依赖项部分。3\. 重建你的项目

```
dependencies {
...
compile files('libs/GoogleAdMobAdsSdk-6.4.1.jar', '... other entries...')
} 
```

请注意，编译文件需要多个 jar 条目。如果您已经有一个编译文件条目，您可以通过用逗号分隔条目来添加它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-17T05:46:39.803

同样的错误出现在我身上，我通过几个简单的步骤解决了您需要从项目中删除 appcombat 依赖项以删除右键单击您的项目-> android-> 删除应用程序战斗并确保您选择了 android 4.2.2 然后导入将 google admob jar 放入您的项目中。

# windows - 为什么 Windows 上的 cmd.exe shell 使用正斜杠 ('/'') 路径分隔符的路径失败？

> ID：10523708
> 
> 赞同：21
> 
> 时间：2012-05-09T20:34:23.217
> 
> 标签：windows, path, cmd, spaces, path-separator

就在我以为我已经看到了 Windows 路径问题的全部内容时，我现在遇到了一个只有在使用“/”（正斜杠）作为路径分隔符时才会失败的情况：

```
C:\temp\tcbugs>mkdir "dir1 with spaces"

C:\temp\tcbugs>echo hi > "dir1 with spaces"\foo.txt

C:\temp\tcbugs>type "dir1 with spaces\foo.txt"
hi

C:\temp\tcbugs>type "dir1 with spaces/foo.txt"
The system cannot find the file specified. 
```

对此特别有趣的是，它似乎特定于 cmd.exe shell，并且不会出现在 PowerShell 中（也不会出现在 win32 API 中）：

```
PS C:\temp\tcbugs> type 'dir1 with spaces/foo.txt'
hi 
```

另一个有趣的地方是，使用 'cd' 更改目录并使用 '/' 作为 cmd.exe 的路径分隔符确实有效：

```
C:\temp\tcbugs>mkdir dir2_no_spaces

C:\temp\tcbugs>cd ./dir2_no_spaces

C:\temp\tcbugs\dir2_no_spaces>cd .. 
```

然而，我在网上的任何地方或 MSDN 的常用文档中都找不到对这个特定问题的任何参考：

[命名文件、路径、命名空间](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx)

这让我不禁要问：为什么会发生这种情况，是否有确定的来源记录了这个怪癖？

**更新：**

dbenham 指出，无论目录名称中是否包含空格，都存在问题，因此在标题和问题正文中删除了对它的引用。还添加了一个有效的“cd ./”示例，而其他命令则无效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T02:13:00.760

*编辑删除意见*

无论 Windows CMD.EXE 是否应该支持路径中的正斜杠，事实是有时它有效，有时无效，有时它似乎有效但给出了错误的结果 - AKA 一个错误。

是时候进行一些实验了:-)

所有测试均在 Vista 上运行

```
C:\>md "c:/temp/"

C:\>REM The forward slash works with MD!

C:\>echo hello world 1>>"c:/temp/test.txt"

C:\>REM Redirection works with forward slashes!

C:\>type "c:\temp\test.txt"
hello world

C:\>REM Of course TYPE works with back slashes

C:\>type "c:/temp/test.txt"
The system cannot find the file specified.

C:\>REM But forward slash version fails

C:\>type "c:/temp\test.txt"
hello world

C:\>REM But TYPE works with forward slash as long as last slash is back slash

C:\>dir "c:/temp/test.txt"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp

File Not Found

C:\>REM Note how DIR lists the directory with a \, yet fails to find any files

C:\>dir "c:/temp/*"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp

File Not Found

C:\>REM DIR Still fails with forward slashes

C:\>dir "c:/temp/"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp

05/09/2012  09:58 PM    <DIR>          .
05/09/2012  09:58 PM    <DIR>          ..
05/09/2012  09:58 PM                13 test.txt
               1 File(s)             13 bytes
               2 Dir(s)  337,001,615,360 bytes free

C:\>REM But forward slash works if no file is specified!

C:\>dir "c:/temp\test.txt"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp

05/09/2012  09:58 PM                13 test.txt
               1 File(s)             13 bytes
               0 Dir(s)  337,001,615,360 bytes free

C:\>REM And DIR works with forward slash as long as last slash is back slash

C:\>REM Now add another folder to the path hierarchy

C:\>md "c:/temp/temp/"

C:\>REM Still can create folder using forward slashes

C:\>copy "c:/temp/test.txt" "c:/temp/temp/"
The system cannot find the file specified.
        0 file(s) copied.

C:\>REM Failed to copy with forward slashes

C:\>copy "c:/temp\test.txt" "c:/temp/temp/"
        1 file(s) copied.

C:\>REM But forward slash works if last slash before file name is back slash

C:\>REM Rerun some past tests

C:\>type "c:/temp/test.txt"
The system cannot find the file specified.

C:\>REM Good - it still fails

C:\>dir "c:/temp/test.txt"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp

05/09/2012  09:58 PM                13 test.txt
               1 File(s)             13 bytes
               0 Dir(s)  337,001,615,360 bytes free

C:\>REM What is going on?! :( Why did that seem to work now?
C:\>REM More on that later.

C:\>REM Now test the new folder

C:\>type "c:/temp/temp/test.txt"
The system cannot find the file specified.

C:\>REM Forward slashes still fail with TYPE

C:\>type "c:/temp/temp\test.txt"
hello world

C:\>REM But forward slash still works as long as last slash is back slash

C:\>dir "c:/temp/temp/*"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp\temp

File Not Found

C:\>REM Again, forward slashes fail, but directory path is listed properly

C:\>dir "c:/temp/temp/"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp\temp

05/09/2012  09:58 PM    <DIR>          .
05/09/2012  09:58 PM    <DIR>          ..
05/09/2012  09:58 PM                13 test.txt
               1 File(s)             13 bytes
               2 Dir(s)  337,001,615,360 bytes free

C:\>REM And again it works if no file is specified

C:\>dir "c:/temp/temp\test.txt"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp\temp

05/09/2012  09:58 PM                13 test.txt
               1 File(s)             13 bytes
               0 Dir(s)  337,001,615,360 bytes free

C:\>REM Again forward slashes work as long as last slash is back slash 
```

这是一个清楚地展示了一个错误的案例。

```
c:\>dir /s /a-d temp
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp

05/10/2012  08:01 AM                13 test.txt
               1 File(s)             13 bytes

 Directory of c:\temp\temp

05/10/2012  07:57 AM                10 test.txt
               1 File(s)             10 bytes

     Total Files Listed:
               2 File(s)             23 bytes
               0 Dir(s)  337,325,191,168 bytes free

c:\>REM Note the different file sizes found in each directory

c:\>dir "c:/temp/test.txt"
 Volume in drive C is OS
 Volume Serial Number is EE2C-5A11

 Directory of c:\temp

05/10/2012  07:57 AM                10 test.txt
               1 File(s)             10 bytes
               0 Dir(s)  337,325,191,168 bytes free

c:\>REM It is listing the wrong file! 
```

人们可以争论 Windows CMD 是否“应该”支持正斜杠。但最后一个结果是一个错误！即使在使用正斜杠时出现操作员错误，Windows 也不应该给出该结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-06T13:03:10.670

Wie 对斜线有一些奇怪的行为，我们将其追溯到这样一个事实，即带有前导斜线的路径不被视为绝对路径，所以

```
C:\>cd /temp

C:\temp>rem works we are in the root directory

C:\temp>cd /temp
Das System kann den angegebenen Pfad nicht finden.

C:\temp>rem does't work but

C:\temp>cd \temp

C:\temp>rem \ indicates absolute path

C:\temp>cd ..

C:\>cd /temp

C:\temp> cd /ca

C:\temp\CA>rem qed 
```

也许它也解释了上述错误 - 我不清楚命令在哪个目录执行。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-05-09T20:45:02.173

我不确定为什么“/”在 PS 中工作。回顾历史，DOS 是基于 UNIX 的，它是 UNIX 的一小部分。在 UNIX 中，路径分隔符是“/”，而在 DOS 中是“\”。我以前在一些 Windows 和 DOS 应用程序上工作过。为了转换一些 UNIX 模式，如命令或路径并确保它们是有效的 DOS 命令或路径，我编写了一个小转换器来将“/”转换为“\”，如下所示：

```
string fileNameFromWeb;
...
string windowsFile = fileNameFromWeb.repleace("/", @"\"); 
```

您可以将此功能添加到您的应用程序中的宽容“/”，以防在 Windows 中访问文件。我猜 PS 可能有这种类型转换器允许使用“/”或“\”的命令或路径，或者 Windows 将在文件名中使用“/”。

# c# - 将实体集合拆分为 n 个部分

> ID：10523718
> 
> 赞同：2
> 
> 时间：2012-05-09T20:34:55.340
> 
> 标签：c#, .net, linq, entity-framework, entity-framework-4

我有一个数据库表。

*   首先，我想按日期时间分组。
*   然后我只想选择具有 n 个项目的组。

我的课看起来像这样：

```
public class VisitDate
{
  public int Id {get;set;}
  public int VisitMeDate {get;set;}
  .....
  .....
} 
```

我的 SQL 表如下所示：

```
Id   Date
--- -----------------------
136 2012-05-09 10:00:00.000
167 2012-05-09 12:00:00.000
137 2012-05-10 10:00:00.000
168 2012-05-10 12:00:00.000
194 2012-05-10 14:00:00.000
138 2012-05-11 10:00:00.000
169 2012-05-11 12:00:00.000
195 2012-05-11 14:00:00.000
139 2012-05-12 10:00:00.000
170 2012-05-12 12:00:00.000
196 2012-05-12 14:00:00.000
140 2012-05-13 10:00:00.000
171 2012-05-13 12:00:00.000
197 2012-05-13 14:00:00.000
141 2012-05-14 10:00:00.000
142 2012-05-15 10:00:00.000
172 2012-05-15 12:00:00.000
143 2012-05-16 10:00:00.000
173 2012-05-16 12:00:00.000
144 2012-05-17 10:00:00.000
174 2012-05-17 12:00:00.000
198 2012-05-17 14:00:00.000 
```

我想像下面这样转换：

```
List<List<MyEntity>> = ?;

137 2012-05-10 10:00:00.000
168 2012-05-10 12:00:00.000
194 2012-05-10 14:00:00.000

138 2012-05-11 10:00:00.000
169 2012-05-11 12:00:00.000
195 2012-05-11 14:00:00.000

139 2012-05-12 10:00:00.000
170 2012-05-12 12:00:00.000
196 2012-05-12 14:00:00.000

140 2012-05-13 10:00:00.000
171 2012-05-13 12:00:00.000
197 2012-05-13 14:00:00.000

144 2012-05-17 10:00:00.000
174 2012-05-17 12:00:00.000
198 2012-05-17 14:00:00.000 
```

我试过这个：

```
List<List<VisitDate>> dates = dbContext.VisitDates.GroupBy(f => new { f.VisitMeDate }).ToList(); 
```

但它不能编译，我不知道怎么说我只想要具有三个元素的组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:51:19.977

尝试这样的事情：

```
var result = dbContext.VisitDates
                      .GroupBy(x => x.VisitMeDate.Date)
                      .Where(g => g.Count() == 3)
                      .Select(g => g.ToList())
                      .ToList(); 
```

# javascript - Phonegap android项目适用于模拟器而不是实际手机

> ID：10523720
> 
> 赞同：2
> 
> 时间：2012-05-09T20:34:59.723
> 
> 标签：javascript, cordova, xmlhttprequest

我正在运行最新版本的 android 和它的 SDK，我正在使用 phonegap 创建一个移动应用程序。我的问题是我正在请求 Web 服务，并且我在我的 html 的标签中显示接收到的消息的内容。Web 服务运行良好，显示功能运行良好，甚至可以在模拟器上运行，没有任何错误。当我尝试在真正的 android 设备上运行相同的应用程序和代码时，问题就出现了......没有任何反应。我正在测试的设备有 android 版本 2.3.1 和 4.0。我用来测试的模拟器是 2.2，android 项目是用 android sdk 2.2 版创建的。为了确保该问题与 android OS 版本无关，我还使用版本 4 创建了一个测试项目。

这是我的代码片段。

```
 var xhr = new XMLHttpRequest();
            xhr.open("GET", "http://feeds.delicious.com/v2/json/popular", false);
            xhr.send(null);
            if (xhr.readyState==4 && xhr.status==200){

                clearLoadingScreen();

                var popular= $("#disclaimer").html("");
                popular= "";

                $("#popular").append('<div class="popular"><p>Popular:</p>'+ "This is an example popular list<br />" + popular+ ' </div>'); 
           } 
```

就像我说的，代码在模拟器上完美运行，当 index.html 页面加载时，我看到一个空白屏幕，几秒钟后填充。当我将代码移植到手机时，它不起作用。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:43:45.567

检查 xhr.status==0 以及。有时从 file:// 协议运行时，您会得到状态 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T02:12:07.577

Check your policy located in: project/res/xml/cordova.xml (if using Cordova - which is phonegap 1.6? or higher)

It's called phonegap.xml if on a lower version.

# java - 编写一个反转字符串中单词顺序的函数？

> ID：10523721
> 
> 赞同：0
> 
> 时间：2012-05-09T20:35:00.163
> 
> 标签：java

我正在阅读“暴露的编程访谈”一书，以下问题对我来说很有趣：

> 编写一个反转字符串中单词顺序的函数。例如，您的函数应该转换字符串“Do or do not, there is no try”。去“尝试。不，没有，做或做”。假设所有单词都是空格分隔的，并且将标点符号视为字母。

包含此图像以帮助设计算法：

![在此处输入图像描述](../Images/81488c12df34037e5976f943f72f7014.png)

在 JAVA 中实现这一点的最有效方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:44:09.603

```
final List<String> a = Arrays.asList("Do or do not, there is no try.".split("\\s+"));
Collections.reverse(a);
final Iterator<String> it = a.iterator();
final StringBuilder b = new StringBuilder(it.next());
while (it.hasNext()) { b.append(" "); b.append(it.next()); }
System.out.println(b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T21:30:02.250

根据空格拆分单词。将单词放入堆栈中，并在到达字符串末尾时弹出单词。

```
 //push elements onto stack
 for(int k =0; k < strtest.length ; k++)
 {
      if(strtest[k]!=null)
      {
           stack.push(strtest[k]);
      }
 }
 StringBuffer b1 = new StringBuffer("");
 // pop and put in stringbuffer
 while(!stack.isEmpty())
 {
     b1 = b1.append(stack.pop());
     b1.append(" ");
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T20:40:50.353

好吧，我希望这不是家庭作业，但这是一种方法：

```
String input = "piglet quantum";
String[] words = input.split(" ");
String result = "";
for(String word : words) {
  result = word + " " + result;
}
// This is to remove the extra space (sorry!)
result = result.substring(0, result.length() - 1); 
```

但这并不严格遵循图像中描述的方法。他们希望您将单词视为数组，因此他们可能会让您使用`substring()`并`charAt()`处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T20:47:42.697

这是一个非常简单的方法：

```
String theInput = "Do or do not, there is no try.”;

String[] wordArray = theInput.split(" ");
String[] reverseWordArray = new String[wordArray.length];

int j = 0;
for (int i = wordArray.length; i > 0; i --) {
  reverseWordArray[j++] = wordArray[i-1];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T20:51:20.397

这是一种低（-er）级别的方式（我认为）：

```
String in = "piglet quantum";
String out = "";

for(int i = in.length()-1; i >= 0; i+=0) {
  out += in.substring(in.lastIndexOf(" ", i-1), i)+" ";
  i = in.lastIndexOf(" ", i-1);
}

out.substring(0, out.length()-1); 
```

就像我说的，不确定这是否有效，但我认为它会。

`for`如果有人有建议，我不知道如何处理最后一个条件。它不应该做任何事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T21:12:38.733

[BreakIterator](http://docs.oracle.com/javase/7/docs/api/java/text/BreakIterator.html)也是一个选项：

```
import java.text.BreakIterator;

public class ReverseWord {

    public static void main(String[] args) {
        String source = "piglet quantum";
        BreakIterator boundary = BreakIterator.getWordInstance();
        boundary.setText(source);
        int end = boundary.last();
        StringBuilder sb = new StringBuilder();
        for (int start = boundary.previous(); start != BreakIterator.DONE; end = start, start = boundary.previous()) {
            sb.append(source.substring(start, end));
        }
        String reversed = sb.toString();
        System.err.println("'" + reversed + "'");
    }
} 
```

它输出：

> '量子小猪'

# cocoa - 在 Mac 上的 Interface Builder 中获取标准系统按钮

> ID：10523722
> 
> 赞同：1
> 
> 时间：2012-05-09T20:35:03.823
> 
> 标签：cocoa, interface-builder

有没有办法在 Interface Builder 中获取系统按钮，如交通灯或全屏按钮？我正在构建一个自定义顶部工具栏并希望将它们包含在其中，但更愿意在 IB 中而不是代码中进行。

谢谢，罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:28:02.627

不，你必须使用`-[NSWindow standardWindowButton:]`或`+[NSWindow standardWindowButton:forStyleMask:]。

# php - 如何从这个数组中获取数据？单点登录

> ID：10523728
> 
> 赞同：1
> 
> 时间：2012-05-09T20:35:29.700
> 
> 标签：php, arrays, multidimensional-array, single-sign-on, janrain

我已经使用 Janrain 实现了单点登录功能。它输出此数据（以及其他数据）。是否可以将其分解并仅提取 displayName 以便我可以将其放入变量中？

```
auth_info:
array(3) {
  ["stat"]=>
  string(2) "ok"
  ["profile"]=>
  array(10) {
    ["providerName"]=>
    string(8) "Facebook"
    ["identifier"]=>
    string(48) "removed"
    ["preferredUsername"]=>
    string(10) "OllieJones"
    ["displayName"]=>
    string(11) "Ollie Jones"
    ["name"]=>
    array(3) {
  ["formatted"]=>
  string(11) "Ollie Jones"
  ["givenName"]=>
  string(5) "Ollie"
  ["familyName"]=>
  string(5) "Jones"
} 
```

这是创建它的脚本，我想在其中定义变量[https://github.com/janrain/Janrain-Sample-Code/blob/master/php/rpx-token-url.php](https://github.com/janrain/Janrain-Sample-Code/blob/master/php/rpx-token-url.php)

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:41:32.497

尝试`$auth_info['profile']['displayName']`

# objective-c - 区分实例和类

> ID：10523729
> 
> 赞同：3
> 
> 时间：2012-05-09T20:35:32.370
> 
> 标签：objective-c

基本上，我的问题是这样的：

```
-(void)aMethod:(id)object; 
```

理想情况下，我会像这样使用我的方法：

```
NSObject*theObject;
[MysteryObject aMethod:theObject]; 
```

或像这样：

```
[MysteryObject aMethod:NSObject]; 
```

基本上，这就是问题所在。如何区分“id”变量是否仅包含 Class 类型或指向活动对象的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:47:20.453

这应该有效：

```
if ([MysteryObject respondsToSelector:@selector(isSubclassOfClass:)])
    NSLog(@"is a class");
else
    NSLog(@"is an object"); 
```

但事实上，为了更友好的鸭子类型，您可能应该使用`respondsToSelector`来检查您实际要发送的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T02:42:51.533

尽管使用运行时函数非常好，但我相信这是实现相同结果的一种更简单的方法：

```
- (void) aMethod:(id)anObject
{
  if( anObject == [anObject class] ) {
    // the object is a class
  }
  else {
    // the object is an instance object
  }
} 
```

# primefaces - PrimeFaces Accordion 面板键盘焦点在当前选项卡命令按钮上

> ID：10523738
> 
> 赞同：0
> 
> 时间：2012-05-09T20:36:12.570
> 
> 标签：primefaces

我有一个带有几个选项卡的手风琴面板，其中包含一个表单。每个选项卡都有一个命令按钮（我使用更新和处理属性来处理带有选项卡的特定输入）。我已在手风琴面板上将 multiple 属性设置为 true。当页面最初加载时，第一个选项卡默认打开。如果我按键盘上的 Enter 键，则第一个选项卡中的命令按钮具有键盘焦点并处理字段。现在我打开第一个选项卡并打开另一个选项卡，然后按 Enter 键，键盘焦点仍在第一个选项卡上的命令按钮上。我尝试将 p:focus 与 for/context 属性一起使用，但没有任何帮助。

```
<h:form id="calculatorsNTools">
<p:accordionPanel multiple="true">
    <p:tab title="Teenage Check">
        <h:inputText id="age1" required="true" label="Age"
            value="#{calculatorBacking.age}" validatorMessage="Enter a value">
            <f:validateDoubleRange minimum="1" />
        </h:inputText>
        <p:message for="age1" id="msgage1" />
        <h:panelGrid columns="3" id="gridTAresult">
            <p:commandButton id="calculateTA"
                action="#{calculatorBacking.calculateTA}" value="Calculate"
                process="@this,age1"
                update="gridTAresult">
            </p:commandButton>
            <b> Teenage (y/n)</b>
            <h:outputLabel id="resultTA" value="#{calculatorBacking.resultTeenAge}"></h:outputLabel>
        </h:panelGrid>
         </p:tab>
    <p:tab title="Retirement Check">
            <h:inputText id="age2" required="true" label="Age"
                value="#{calculatorBacking.age}" validatorMessage="Enter a value">
                <f:validateDoubleRange minimum="1" />
            </h:inputText>
            <p:message for="age2" id="msgage2" />
            <h:panelGrid columns="3" id="gridREresult">
                <p:commandButton id="calculateRE"
                    action="#{calculatorBacking.calculateRE}" value="Calculate"
                    process="@this,age2"
                    update="gridREresult">
                </p:commandButton>
                <b> Retirement (y/n)</b>
                <h:outputLabel id="resultRE" value="#{calculatorBacking.resultRetirement}"></h:outputLabel>
            </h:panelGrid>
    </p:tab>
</p:accordionPanel>
<h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:41:36.077

你可以使用 javascript 来完成你想要的。我不完全确定如何在手风琴上做到这一点，但在 tabView 上它会是：

```
<p:tabView onTabChange="handleTabChange(event, index)"> 
```

然后创建一个javascript函数来设置焦点：

```
function handleTabChange(event, index){
    if(index == 1){
        var opControl = document.getElementById("calculatorsNTools:calculateTA");
        opControl.focus();

    }
} 
```

您应该能够将其修改为您需要的手风琴面板。

# java - 从 Java 应用程序控制音频

> ID：10523748
> 
> 赞同：1
> 
> 时间：2012-05-09T20:37:08.400
> 
> 标签：java, audio

> **可能重复：**
> [控制 Java 应用程序中的音量](https://stackoverflow.com/questions/7956115/controlling-volume-in-a-java-application)

我正在寻求帮助，如何从应用程序中控制计算机的音量。我已经在其他帖子中看到了示例，例如：

```
Port lineIn = null;
    FloatControl volCtrl = null;
    try {
        Mixer mixer = AudioSystem.getMixer(null);
        lineIn = (Port) mixer.getLine(Port.Info.LINE_IN);
        lineIn.open();
        volCtrl = (FloatControl) lineIn
                .getControl(FloatControl.Type.MASTER_GAIN);
        volCtrl.setValue(volCtrl.getValue() + 10f);
    } catch (Exception e) {
        System.out.println("Failed trying to find LINE_IN"
                + " VOLUME control: exception = " + e);
        lineIn.close();
    } 
```

此示例取自[Oracle](http://docs.oracle.com/javase/1.5.0/docs/guide/sound/programmer_guide/chapter6.html)页面但它引发异常...

```
java.lang.IllegalArgumentException: Line unsupported: LINE_IN source port
at com.sun.media.sound.DirectAudioDevice.getLine(Unknown Source)
at core.ProtocolHandler.volumeUp(ProtocolHandler.java:223)
at core.ProtocolHandler.answer(ProtocolHandler.java:211)
at core.Server.run(Server.java:77)
at java.lang.Thread.run(Unknown Source)
java.lang.NullPointerException
at core.ProtocolHandler.volumeUp(ProtocolHandler.java:230)
at core.ProtocolHandler.answer(ProtocolHandler.java:211)
at core.Server.run(Server.java:77)
at java.lang.Thread.run(Unknown Source) 
```

我也试过[这个](https://stackoverflow.com/questions/953598/audio-volume-control-increase-or-decrease-in-java)例子......但它给我带来了同样的异常。

# ruby-on-rails - 使用 Ruby 的 Web 服务

> ID：10523751
> 
> 赞同：1
> 
> 时间：2012-05-09T20:37:52.087
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, web-services

我正在使用以下教程：

[http://www.ibm.com/developerworks/opensource/library/os-ws-rubyrails/index.html](http://www.ibm.com/developerworks/opensource/library/os-ws-rubyrails/index.html)

步骤 7 之后的所有内容都会导致路由错误。我确保 gem install actionwebservice; 我不太清楚如何让它成功运行。我明白了：

```
No route matches [GET] "/hello_message/invoke" 
```

想法？我对rails很陌生，所以我可能会在这里忽略一些非常琐碎的事情。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:45:48.167

您链接到的教程日期为 2008 年，Rails 在过去 6 年中取得了长足的进步。您确定您使用的是文章中列出的 Rails 版本吗？如果您使用的是版本 3+ 而不是文章中列出的 2，则各种事情都可能被破坏或不准确。

尽管听起来你在这个项目上有一些时间，但我认为你最好还是去看看最近的东西，比如 Rails in Action 或 Agile Web Development with Rails 4th edition，因为第 2 版不再更新。

[http://www.manning.com/katz/](http://www.manning.com/katz/)

[http://pragprog.com/book/rails4/agile-web-development-with-rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)

# c# - 将返回匿名类型的函数委托分配给变量

> ID：10523765
> 
> 赞同：6
> 
> 时间：2012-05-09T20:38:57.810
> 
> 标签：c#, delegates, anonymous-types, lambda

下面的代码是有效的：

```
IEnumerable<SomeThing> things = ...;

// map type SomeThing to a new anonymous type, resulting in a strongly typed 
// sequence based on an anon type

var newList = things.Select(item =>
    {
        return new
        {
            ID = item.ID,
            DateUpdatedOrCreated = ((DateTime)(item.DateUpdated ??
                     item.DateCreated)).ToShortDateString(),
            Total = item.Part1 + item.Part2
        };
    }); 
```

newList 现在出现在 Visual Studio 中，`IEnumerable<'a>`并且是在函数中创建的匿名类型的强类型。那太酷了。

我似乎无法做的是找出一种仅将 lambda 表达式（而不是枚举）分配给隐式类型变量的方法。即使编译器对上述上下文中的匿名类型没有问题，如果我尝试（比如说）

```
var func = (SomeThing item)=> {
        return new { ... };
    }; 
```

我收到错误“无法将 lambda 表达式分配给隐式类型的局部变量”。这似乎是一个奇怪的编译器限制；除非我遗漏了什么，否则第二个示例中的类型与第一个示例中的类型一样明确：两个类型参数都定义明确。

有没有办法做到这一点？由于它是匿名类型，当然，我没有任何方法可以使用类型来显式分配它，所以如果没有，我似乎会坚持为输出类型创建一个类。

*更新*

在对 Jon Skeet 的回答进行愉快的回答后不久，我发现了一个类似的实例化类的困境。如果不是很明显，可以使用相同的技巧来创建使用推断匿名类型的强类型类。

```
class Processor<T,U>
{
    public Processor(Func<T,U> func) {

    }
}

// func is a delegate with anon return type created using method in answer below

var instance = new Processor(func);   // does not compile! Requires type arguments! 
```

不能直接创建，但可以通过与以下技巧大致相同的方式创建：

```
public static Processor<T,U> Create<T,U>(Func<T,U> func) {
    return new Processor<T,U>(func);
}

var instance = Processor.Create(func);   // all good 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T20:44:14.450

您可以通过类型推断来做到这一点：

```
var func = BuildFunc((SomeThing item) => {
    return new { ... };
});

...

static Func<TSource, TResult> BuildFunc<TSource, TResult>(
    Func<TSource, TResult> function) {
    return function;
} 
```

请注意，`BuildFunc`它实际上并没有做任何事情——它只是提供了让编译器为泛型类型参数进行类型推断所需的方法调用`Func<,>`——它基本上添加了你感兴趣`Func<,>`的信息——这些信息不能被指定为变量声明的一部分，而不指定类型参数。

# django-haystack - Django Haystack 返回相关实例

> ID：10523766
> 
> 赞同：2
> 
> 时间：2012-05-09T20:39:01.313
> 
> 标签：django-haystack

嗨，我正在使用 django 和 haystack 搜索。我有一个事件模型。那就是我正在搜索的模型。我有第二个模型来计算事件的点击次数/观看次数。我不想返回搜索结果之外的每个事件的点击次数。

我的观点：

```
def event_search(request):
    if request.method == 'POST':
        query = str(request.POST['search'])
        events = SearchQuerySet().auto_query(query).models(Event).order_by('date')
        return render_to_response('event_search.html', {"events": events}, context_instance=RequestContext(request))
    else:
        return render_to_response('event_search.html', context_instance=RequestContext(request)) 
```

我的模型：

```
class Event(models.Model):
   name = models.CharField(max_length = 70)
   date = models.DateTimeField()
   description = models.TextField()
   active = models.BooleanField(default=True, editable=False)
   featured = models.BooleanField(default=False)

class EventHitcount(models.Model):
   hit = models.ForeignKey(Event)
   ip = models.CharField(max_length=40)
   session = models.CharField(max_length=40)
   created = models.DateTimeField(default=datetime.datetime.now()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T19:17:55.917

通过给 ForeignKey 字段一个相关的名称，它可以调用和计算相关的对象。

```
class Foo(models.Model):
    fk = models.ForeignKey(Event,related_name='foofk')
    some more fields... 
```

在模板中：

```
{{ foo.foofk.count }} 
```

# javascript - 用 Raphael 调用 requestAnimationFrame 会影响性能吗？

> ID：10523767
> 
> 赞同：5
> 
> 时间：2012-05-09T20:39:02.840
> 
> 标签：javascript, raphael, requestanimationframe

我正在开发一个资源相当匮乏的 Web 应用程序，该应用程序严重依赖 Raphael.js 来处理大约 50% 的动画，其余部分我推出了自己的动画方法，它使用 webkitRequestAnimationFrame 和 Web Audio API 的 context.currentTime将动画与音频组件同步。

目前我的表现非常糟糕，通过 Raphael 的源代码，我发现它也使用了 requestAnimationFrame。我遇到的大部分延迟似乎都发生在我的动画和拉斐尔的动画同时运行时。这是因为 requestAnimationFrame 基本上每个绘制周期被调用两次吗？

基本上我要问的基本上是我是否必须为 raphael 对象重新滚动我自己的动画实现并将其与我现有的 requestAnimationFrame 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:32:44.123

我对缓慢的 SVG 动画也有类似的问题。我对 RAF 的理解是，无论更新来自何处，它都会将更新一起批量处理，所以我认为这不是你的问题。

我发现我的大部分周期都被重新粉刷占据了。在 JS 方面，您无法加快重绘速度。但我认为你可以通过减少透明效果、过滤器和大面积的屏幕变化来让浏览器更轻松。此外，重绘是您正在更新的像素数量的函数。我正在制作一个全屏网站，当我将视口大小加倍时，我的绘制时间也会加倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:33:10.733

嗯，据我所知，RAF 的重点是同步所有内容，以便为下一次渲染更新做好准备。我会做和你一样的事情，因为这就是重点。

根据规范：

> 期望用户代理以与显示刷新率相匹配的定期间隔从动画任务源运行任务。以较低的速率运行任务可能会导致动画看起来不流畅。以更高的速率运行任务可能会导致额外的计算发生而没有用户可见的好处。

所以我会说不，它不应该是性能上的打击。

# architecture - 使用 BPMN 进行系统分析

> ID：10523770
> 
> 赞同：2
> 
> 时间：2012-05-09T20:39:23.537
> 
> 标签：architecture, bpmn

我目前正在使用 BPMN 分析飞机维修公司的系统。

我有 3 个关于 BPMN 的问题：

第一的：

![在此处输入图像描述](../Images/53d82485c8c728c683de0577d6304955.png)

在这里，当技术人员订购新零件时，他必须等到零件是否收到。如果收到则更换零件或停止工作。我的问题是我使用的网关（基于事件）是否正确？

第二：

![在此处输入图像描述](../Images/1ef1342c4cc0024e4ae2c4ca09142daa.png)

在这里，我们谈论的是工具是否可用。如果工具可用，那么技术人员可以拿走它们并开始工作。如果它们不可用，那么他们将检查故障（障碍）是否很小并且不会花费很长时间来修复，那么在这种情况下，他们将使用另一架飞机上正在使用的工具（向技术人员发送请求正在研究那架飞机）。如果障碍不小，那么他必须等到工具可用。使用正确的网关仍然存在问题。我使用的网关是否正确？

![在此处输入图像描述](../Images/32b71890ce512e5a3aceb6db8bc2b13f.png)

这里是飞机零件的问题。如果供应部门没有该零件，那么他们会联系作业控制部门，该部门将检查是否有任何飞机在维护中，以便他们参与其中，直到从行业收到新零件。我的造型对不对？

所以基本上我想要的只是检查我对这些部分所做的建模是否正确或是否需要更改。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T10:32:26.953

一些一般信息：

*   BPMN 2.0 是 OMG 标准，因此您可以随时检查规范，以防您不确定您的建模方式是否正确：[http ://www.omg.org/spec/BPMN/2.0/](http://www.omg.org/spec/BPMN/2.0/)
*   有提供自动语法检查的工具，例如[Signavio](http://editor.signavio.com)。您可以检查您正在使用的工具是否具有类似的功能。

对于您的具体问题：

1.  网关的使用是正确的。但是，我想说“没有收到新零件”可能不是一个消息。也许在`intermediate timer event`这里使用an 更好，意思是“如果在X 时间之后没有收到零件，则停止工作”。
2.  在这里你绝对不需要使用`event-based Gateways`. 请参阅 BPMN 规范，第 287 页（PDF 文件中的 317）：>“*网关用于控制序列流在流程内收敛和发散时如何交互。* ”
3.  与2基本相同：不需要`event-based gateways`。此外，我会检查这里的语法并尝试降低复杂性，因为流程链接和并行网关的组合看起来相当棘手。

# c# - SmtpClient.Send 失败并出现 System.FormatException：Smtp 服务器返回无效响应

> ID：10523773
> 
> 赞同：2
> 
> 时间：2012-05-09T20:39:37.267
> 
> 标签：c#, .net

我正在尝试使用以下代码发送电子邮件：

```
//create the mail message
MailMessage mail = new MailMessage(from, to);

//set the content
mail.Subject = "This is a test email";
mail.Body = "this is the body content of the email.";

//send the message
string server = "smtp01.xyz.net";
SmtpClient smtp = new SmtpClient(server);
smtp.Credentials = new NetworkCredential(username, password); 
smtp.EnableSsl = enablessl;
try
{
    smtp.Send(mail);
}
catch (Exception ex)
{
    Exception ex2 = ex;
    string errorMessage = string.Empty;
    while (ex2 != null)
    {
        errorMessage += ex2.ToString();
        ex2 = ex2.InnerException;
    }
    Console.WriteLine(errorMessage);
} 
```

生成的堆栈跟踪是：

```
System.Net.Mail.SmtpException: Failure sending mail. ---> System.FormatException: Smtp server returned an invalid response.
   at System.Net.Mail.SmtpReplyReaderFactory.ProcessRead(Byte[] buffer, Int32 offset, Int32 read, Boolean readLine)
   at System.Net.Mail.SmtpReplyReaderFactory.ReadLines(SmtpReplyReader caller, Boolean oneLine)
   at System.Net.Mail.ReadLinesCommand.Send(SmtpConnection conn)
   at System.Net.Mail.SmtpConnection.GetConnection(String host, Int32 port)
   at System.Net.Mail.SmtpClient.Send(MailMessage message) 
```

如果我在端口 25 上 telnet 到服务器，则响应是：

```
220 smtp01.xyz.net ESMTP Postfix
EHLO test.com
250-smtp01.xyz.net
250-STARTTLS
250-SIZE 30000000
250-VRFY
250-ETRN
250-AUTH PLAIN LOGIN
250-AUTH=PLAIN LOGIN
250-ENHANCEDSTATUSCODES
250-8BITMIME
250 DSN 
```

我尝试过设置和未设置 EnableSsl。

我不明白它认为无效的响应是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:45:31.440

您是否有机会使用 ASP.net MVC？如果是这样，请确保您的服务器 SMTP 服务器设置在应用程序根目录的正确 web.config 中声明/定义，而不是在位于 Views 文件夹中的 web.config 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T23:09:49.590

我遇到了这个问题，这是由于指定了以邮件而不是邮箱开头的服务器名称。这个错误让我大吃一惊，因为即使指定的 SMTP 服务器是问题的根源，但 SmtpClient 的构造并没有像我尝试的其他几个服务器那样抛出异常。该错误消息看起来像是您发送的内容有问题，但至少在我的情况下，它是指定的 SMTP 服务器。

# asp.net - 级联下拉列表更新问题 ASP.NET

> ID：10523775
> 
> 赞同：1
> 
> 时间：2012-05-09T20:40:08.013
> 
> 标签：asp.net, updatepanel, ajaxcontroltoolkit, cascadingdropdown

我有级联下拉列表，我希望第一个 ddl 触发一个函数并加载第二个 ddl，第二个 ddl 触发另一个函数并加载第三个 ddl。

当我选择第一个 ddl 时，第二个加载正常，但是当我选择第二个 ddl 时，它仍然调用 CategoryList1_SelectedIndexChanged 方法，它们都在调用相同的方法。

我无法弄清楚是什么导致了这个问题。我也尝试过同步，它也不起作用。

任何帮助将不胜感激干杯

```
<ajax:UpdatePanel ID="CategoryPanel" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
    <div class="select">
    <ul>
       <li><strong>KATEGORI:</strong> 
        <asp:DropDownList ID="CategoryList1" AutoPostBack="true"  OnSelectedIndexChanged="CategoryList1_SelectedIndexChanged" runat="server">
        </asp:DropDownList>
        </li>
        <li><strong>MARKA:</strong> 
        <asp:DropDownList ID="CategoryList2" AutoPostBack="true"  OnSelectedIndexChanged="CategoryList2_SelectedIndexChanged" runat="server">
        </asp:DropDownList>
        </li>
        <li><strong>MODEL:</strong>
        <asp:DropDownList ID="CategoryList3" AutoPostBack="true"  OnSelectedIndexChanged="CategoryList3_SelectedIndexChanged" runat="server">
        </asp:DropDownList>
        </li>
        <li class="button"><asp:Button ID="GoButton" OnClick="GoButton_Click" Text="" runat="server" /></li>
        </ul>
    </div>
    </ContentTemplate>

     <Triggers>
            <asp:AsyncPostBackTrigger ControlID="CategoryList1" EventName="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="CategoryList2" EventName="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="CategoryList3" EventName="SelectedIndexChanged" />
    </Triggers>
</ajax:UpdatePanel> 
```

# ember.js - Emberjs - 禁用和启用文本字段

> ID：10523780
> 
> 赞同：5
> 
> 时间：2012-05-09T20:40:23.420
> 
> 标签：ember.js

因此，我最近在 Em.TextField 中找到了 disabled 属性，但是在将 disabled 属性设置为 true 对其进行扩展后，我似乎无法重新启用 TextField。

```
var app = Em.Application.create();
app.randomObj = Em.Object.create({
    temp: null
});
app.textField = Em.TextField.extend({
    valueBinding: 'app.randomObj.temp',
    disabled: true
}); 
```

如何使用 Ember 删除 disabled 属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T06:55:05.947

您的示例代码存在一些问题，我会解决每个问题，希望我能解决一些问题。

**命名约定**

首先你应该看看 Emberist 关于[命名约定](http://www.emberist.com/2012/04/09/naming-conventions.html)的帖子：类应该命名为大写，实例命名为小写——应用程序和命名空间的例外。因此，在您在[评论](https://stackoverflow.com/questions/10523780/emberjs-disable-and-enable-textfield#comment13617811_10525702)中提供的 JSFiddle 中，它是`App.controller`and `App.ATextField`。

**将 App 声明为全局变量**

您正在创建 an 的实例`Ember.Application`并将其分配给`var app`. 尽管在使用全局变量时应该小心，但在这种情况下，您应该在全局命名空间上定义您的应用程序，因此应该`App = Ember.Application.create();`分别为`window.App = Ember.Application.create();`. 通过将应用程序声明为全局变量，您可以在模板和 JS 代码中使用强大的**绑定**功能。

**绑定**

绑定应该在实例而不是类上声明。我的意思是你不会在你的类定义中定义`valueBinding`你的`App.TextField`，而是将它移动到具体实例中，例如在模板中。

在您在[评论](https://stackoverflow.com/questions/10523780/emberjs-disable-and-enable-textfield#comment13617811_10525702)中提供的 JSFiddle 中，您与控制器的绑定不起作用，因为您没有使用：要创建与特定控制器/对象/的绑定...您必须声明要绑定的属性名称并附加一个`Binding`字符串。所以它会`disabledBinding: 'App.controller.shouldDisable'`。

* * *

**例子**

我已经重构了您的代码，请参阅[http://jsfiddle.net/pangratz666/pLpKV/](http://jsfiddle.net/pangratz666/pLpKV/)：

**车把**：

```
{{view Ember.TextField
    valueBinding="App.tempObj.hold"
    disabledBinding="App.controller.shouldDisable"}} {{App.tempObj.hold}} 
```

**JavaScript**：

```
App = Em.Application.create();

App.controller = Em.Object.create({
    shouldDisable: true
});

App.tempObj = Em.Object.create({
    hold: "initial value"
});

// just to illustrate how to define bindings outside of templates,
// we're adding a TextField with bindings setup the same as for the
// template
Ember.TextField.create({
    valueBinding: 'App.tempObj.hold',
    disabledBinding: 'App.controller.shouldDisable'
}).appendTo('body'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T23:46:11.993

将其绑定到控制器，您可以随意切换它。Disabled 是绑定属性，所以当属性改变时，模板会更新。

# python - python语法混乱：名称未定义

> ID：10523782
> 
> 赞同：1
> 
> 时间：2012-05-09T20:40:42.140
> 
> 标签：python, syntax

我一直在学习'Learn Python the Hard Way'，这段特殊的代码让我很头疼：

```
def break_words(stuff):
    """This function will break up words for us."""
    words = stuff.split(' ')
    return words

def sort_words(words):
    """Sort the words."""
    return sorted(words)

def print_first_word(words):
    """Prints the first word after popping it off."""
    word = words.pop(0)
    print word

def print_last_word(words):
    """Prints the last word after popping it off."""
    word = words.pop(-1)
    print word

def sort_sentence(sentence):
    """Takes in a full sentence and returns the sorted words."""
    words = brea_words(sentence)
    return sort_words(words)

def print_first_and_last(sentence):
    """Prints the first and last words of the sentence."""
    words = break_words(sentence)
    print_first_word(words)
    print_last_word(words)

def print_first_and_last_sorted(sentence):
    """Sorts the words then prints the first and last one."""
    words = sort_sentence(sentence)
    print_first_word(words)
    print_last_word(words) 
```

导入模块后，我会收到错误：

```
>>> import ex25
>>> sentence = "All good things come to those who wait."
>>> words = ex25.break_words(sentence)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "ex25.py", line 4, in break_words
    return words
NameError: global name 'words' is not defined 
```

我哪里做错了？我检查了数百万次代码...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:51:24.033

你试过跑步吗

```
reload(ex25) 
```

? 如果您导入一个文件，然后更改该文件，python 进程不知道您更改了它。您必须重新启动，或者告诉它再次查看模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:45:36.310

正如我在评论中所说，我认为正在导入您的 pyc 文件而不是您的 py 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:59:45.633

假设上面的答案就足够了——你需要重新加载模块。在 NFS 文件系统上，我看到更改后没有重新编译 python 代码的问题（并且使用了旧的 pyc 文件）。如果“重新加载”不起作用，您可以尝试删除 pyc 文件并重新启动 python。

```
 ddzialak@pld ~$ python
  Python 2.7.2 (default, Aug 16 2011, 10:09:58)
  [GCC 4.6.1 20110714 (release)] on linux2
  Type "help", "copyright", "credits" or "license" for more information.
  >>> import ex25
  >>> sentence = "All good things come to those who wait."
  >>> words = ex25.break_words(sentence)
  >>> print words
  ['All', 'good', 'things', 'come', 'to', 'those', 'who', 'wait.'] 
```

# css - 在 drupal 7 中使用 php 文件进行自定义 css 的困难

> ID：10523784
> 
> 赞同：0
> 
> 时间：2012-05-09T20:41:01.967
> 
> 标签：css, drupal-7, hook

我想为特定页面使用自定义 CSS。为了实现这个目标，我实现了 hook_menu 和 hook_theme。我有一个 php 文件的链接

```
$url = drupal_get_path('module', 'preview_ipad') . '/css/style-css.php';
drupal_add_css($url); 
```

在这个 php 文件中，有自定义 css ：

```
<?php
    header('content_type : text/css');
?>

* { padding: 0; margin: 0; }

body {
    background: url(./ret/white.png) no-repeat 50% top;
    font-family:Helvetica,Arial,Sans-serif;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    color: <?php echo $_SESSION['color'] ?>;
} 
```

该链接存在，在我的页面的源代码中，但是有一个问题。css 不工作。

帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:16:45.627

确保最后加载 CSS 文件。因为默认情况下，drupal 在模块的 CSS 文件之后加载主题的 CSS 文件。

尝试对此代码进行以下更改：

```
$url = drupal_get_path('module', 'preview_ipad') . '/css/style-css.php';
drupal_add_css($url, array(
    'group' => CSS_THEME,
    'weight' => 1000,
)); 
```

# ios - 具有多个目标的本地化项目和本地化的应用程序名称

> ID：10523792
> 
> 赞同：28
> 
> 时间：2012-05-09T20:42:01.437
> 
> 标签：ios, xcode, localization, dry, info-plist

我最近将我的 5 个独立项目合并到一个项目中，以拥有一个共同的代码库。所以现在我有一个有 5 个目标的项目。

每个目标都有相同的文件集，除了每个目标不同的一些文件（例如 Default.png 和图标文件等）。我的应用程序被翻译成 7 种语言，默认为英语。其他语言是：瑞典语、荷兰语、德语、法语、波兰语和西班牙语。
现在我还想根据使用的语言翻译应用程序的名称。例如，对于我的瑞典航空应用程序，该应用程序在瑞典语中应称为“Flyget ARN”，但在英语中应称为“Aviation ARN”。所有这一切都不是问题，因为这是在 中完成的`InfoPlist.string`，但是将其与应用程序的本地化结合起来是一个问题。

我最近写了这个问题：[几个本地化但仍然只显示英语](https://stackoverflow.com/questions/10507240/several-localizations-yet-still-showing-english-only)，发现我不能合并几个 .strings 文件。（见我写的答案）。

所以我的问题如下：
如何从包含多个目标的项目中获得本地化的应用程序，并在没有 DRY 违规（重复代码）的情况下本地化我的应用程序名称。

***更新***
这仍然是一个问题，给出的答案并不能解决我的问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-29T11:33:38.163

我在一个 XCode 项目中解决了这个问题，我相信它可以解决与您相同的问题，所以希望这会对您有所帮助。该解决方案包含两个从相同代码库构建的目标（具有不同的应用程序名称）并且完全本地化，包括应用程序的名称。（它构建了我的免费增值应用程序，名为*Growth*（法语：*Croissance*，西班牙语：*Crecer*）和名为*Growth+*（法语：*Croissance+*，西班牙语：*Crecer+*）的付费版本。

我还偶然发现了这些`InfoPlist.string`文件（仅包含应用程序的名称）。我通过在我的解决方案中使用子文件夹解决了这个问题，并更改了目标以包含相关子文件夹中的本地化 InfoPlist.strings 集。具体来说，我有这个结构：

```
    根
    +-- en.lproj
    ¦ +-- Localizable.strings
    ¦ +-- SomeXib.xib
    +-- es.lproj
    ¦ +-- Localizable.strings
    ¦ +-- SomeXib.xib
    +-- fr.lproj
    ¦ +-- Localizable.strings
    ¦ +-- SomeXib.xib
    +-- OnlyInAppA
    ¦ +-- en.lproj
    ¦ ¦ +-- InfoPlist.strings
    ¦ +-- es.lproj
    ¦ ¦ +-- InfoPlist.strings
    ¦ +-- fr.lproj
    ¦ +-- InfoPlist.strings
    +-- OnlyInAppB
    ¦ +-- en.lproj
    ¦ ¦ +-- InfoPlist.strings
    ¦ +-- es.lproj
    ¦ ¦ +-- InfoPlist.strings
    ¦ +-- fr.lproj
    ¦ +-- InfoPlist.strings
    +-- AppA.plist
    +-- AppB.plist

```

我的目标（除了不同的预处理器符号和不同的 .plist 文件）之间的唯一区别是 AppA 的构建设置包括 OnlyInAppA 下的 InfoPlist.strings 文件，而 AppB 的构建设置包括 OnlyInAppB 下的 InfoPlist.strings 文件。

在我个人看来，我使用的命名约定（OnlyInAppA/OnlyInAppB 文件夹、AppB/AppB plist 文件）非常明显，足以使这成为一种令人满意的方法。

**编辑：**

请查看这两个 XCode 4 屏幕截图，了解在哪里可以找到目标中更改的设置。

1.  在目标构建设置中，指定了不同的 plist 文件（注意：当您添加新目标时，XCode 会自动为您执行此操作） ![构建设置屏幕截图](../Images/23f63641d5dd067b17d7b1781169c0b8.png)

2.  在目标构建阶段，在 Copy Bundle Resources 部分，从相关的 OnlyInAppX 子文件夹中选择 InfoPlist.strings 的版本（注意此屏幕截图中 InfoPlist.strings 旁边的灰色文本——这将显示另一个目标的不同位置） . 您可以通过使用 +/- 按钮并将文件替换为预期的文件来实现此目的。 ![构建阶段截图](../Images/26376e6016de5e12419505261d9bba70.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-12T19:32:08.527

如果这个问题仍然存在：我找到了一个解决方案，说明如何为项目中的每个目标添加多个本地化的 InfoPlist.string。请按照以下步骤操作：

1.  我假设您已经有多个目标。
2.  转到 Finder 中的项目文件夹。
3.  为每个目标创建一个特定的文件夹：

    ![创建文件夹](../Images/b4d123e614ac0bdaa1009c2d6642fbe0.png "创建文件夹")

4.  在每个文件夹中创建一个 InfoPlist.strings 文件：

    ![创建文件](../Images/4be01963bc1712a1c85282f9a0448de8.png "创建 .strings 文件")

5.  将文件夹添加到为项目中的每个文件夹**指定正确（且唯一！）目标的目标：**

    ![将文件夹添加到目标](../Images/49821a4f9f0310c4abbb51ab272912cb.png "将文件夹添加到目标")

6.  删除每个新目标的原始 InfoPlist.strings 文件的目标依赖项。

    ![删除旧 .strings 文件的目标依赖项](../Images/d4cbd0632238af6ff27841cef51d161b.png "删除原始 InfoPlist.strings 目标依赖项")

7.  本地化新的 InfoPlist.strings 文件：

    ![本地化新文件](../Images/9f777101475779b88339d011fd42c267.png "本地化新文件") ![本地化新文件](../Images/eb3c09398934d2f88276d126aa78da5f.png "本地化新文件")

8.  构建目标并通过更改语言设置进行检查：

    ![法语版](../Images/666e3aaaa71af3a1e9121d6cab51c864.png "法语") ![英文版](../Images/0e6c032d29cec5328d39c44b9018d0fa.png "英语")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T22:32:23.670

只需将所有 InfoPlist.strings 文件保存在单独的路径下。每个人都只是一个目标的成员。

还是我没看懂问题？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T20:45:39.687

我有一个类似的设置，我的同一个软件支持多个域，每个域访问不同模块（例如博客、论坛）的完全相同的路径。为了保持每个域的个性，特别是当数据库服务不可用时，我将关键信息保留在文件中，基本上是元信息。对于本地化，我会保留一个变量，保留每个站点/项目的默认语言。您可以确定包含信息的文件拥有自己的域或将所有项目存储在同一个文件中，无论是您希望将其用于最终后备还是如果您只是缺少对任何/每个具有较低权限的人的进一步公共选项在您实施此类选项之前（用户能够覆盖语言选项）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T04:22:10.517

我一直在为我的应用程序这样做。

当我更改手机的默认语言时，它会正确提取我每个 infoPlist.strings 文件中的名称。

但我是从头开始的。我不知道您是否必须备份才能获得所需的行为。也许从任何本地化文件夹中保存各种 infoPlist.strings 文件，然后执行以下步骤，然后将当前 infoPList.strings 文件中的内容重新插入到以下步骤中新创建的文件中。

我正在使用 Xcode 4.3。步骤：

1) 在 info-plist.strings 中为您的默认语言设置您想要的字符串。你应该最终得到一个文件：

![第一个 infoPlist.strings 文件](../Images/3da1ac25ef9504ad7c607d6e2ec8acdd.png)

2）现在，打开文件检查器

![在此处输入图像描述](../Images/f0075ed1656da4f860ee517c29120e04.png)

3）在最右边的检查器中，您现在可以单击导航器底部的+号：

![在此处输入图像描述](../Images/f1fe767b58780c45d1d85b271c9ed066.png)

4）一旦您选择了您感兴趣的语言，它们将显示在左侧的项目导航器中，如下所示：

![在此处输入图像描述](../Images/400136fb5e16cb48d0abd3650172b513.png)

您也可以对 Localizable.strings 和其他文件（例如以下示例照片中的 index.html）执行此操作：

![在此处输入图像描述](../Images/4dae09be96c1c51a8883c417cc179efc.png)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-28T06:20:04.960

尝试查看[iTunesConnect_DeveloperGuide](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)

并查看“添加新的本地化”

在这里您可以为每种语言编写一个本地化的应用程序名称

# asp.net-mvc-3 - 当我使用动态查询时出现 500 错误

> ID：10523794
> 
> 赞同：0
> 
> 时间：2012-05-09T20:42:04.763
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

我想现在我知道问题出在哪里，但我不知道我会解决这个问题。

实际上我正在通过 entityFramework 4.1 获取数据，并且由于我的搜索条件是动态的，所以我只有一种方法可以做到这一点，`enter code here`这就是现在

```
using System;
using System.Linq;
using System.Data.Entity;
using QTrac.Models;
using System.Transactions;

namespace QTrac.DAL
{
    public class AssetManagementSearchRepository : RepositoryBase<AssetManagementSearch>, IAssetManagementSearchRepository
    {
        public AssetManagementSearchRepository(IUnitOfWork unitOfWork) : base(unitOfWork) { }

        #region IAssetManagementSearchResponseRepository Members

        public IQueryable<AssetManagementSearch> GetSearchResult(SearchRequest request)
        {
            IQueryable<AssetManagementSearch> query = DbSet;

            using (var context = new QTracContext()) {

                using (var tx = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions() { IsolationLevel = IsolationLevel.ReadUncommitted })) {

                    //try {

                    if (!String.IsNullOrEmpty(request.FileCode)) {
                        query = query.Where(d => d.FileCode.StartsWith(request.FileCode));
                    }

                    if (!String.IsNullOrEmpty(request.SerialNo)) {
                        query = query.Where(d => d.SerialNo.StartsWith(request.SerialNo));
                    }

                    if (!String.IsNullOrEmpty(request.TopLevelEquipment)) {
                        query = query.Where(d => d.ParentToolSet.StartsWith(request.TopLevelEquipment));
                    }

                    if (!String.IsNullOrEmpty(request.EquipmentState)) {
                        query = query.Where(d => d.EqpState.StartsWith(request.EquipmentState));
                    }

                    if (!String.IsNullOrEmpty(request.EquipmentStatus)) {
                        query = query.Where(d => d.EqpStatus.StartsWith(request.EquipmentStatus));
                    }

                    if (!String.IsNullOrEmpty(request.DFP)) {
                        query = query.Where(d => d.DFP.StartsWith(request.DFP));
                    }

                    if (request.Active.HasValue) {
                        query = query.Where(d => d.IsActive == request.Active);
                    }

                    if (!String.IsNullOrEmpty(request.OwnerSite)) {
                        query = query.Where(d => d.OwnerSite.StartsWith(request.OwnerSite));
                    }

                    if (!String.IsNullOrEmpty(request.ControlSite)) {
                        query = query.Where(d => d.ControlSite.StartsWith(request.ControlSite));
                    }

                    if (!String.IsNullOrEmpty(request.Location)) {
                        query = query.Where(d => d.Location.StartsWith(request.Location));
                    }

                    if (!String.IsNullOrEmpty(request.StampedFC)) {
                        query = query.Where(d => d.STAMPEDFC.StartsWith(request.StampedFC));
                    }

                    if (!String.IsNullOrEmpty(request.StampedSN)) {
                        query = query.Where(d => d.STAMPEDSN.StartsWith(request.StampedSN));
                    }

                    if (!String.IsNullOrEmpty(request.CustomsStatus)) {
                        query = query.Where(d => d.CustomsStatus.StartsWith(request.CustomsStatus));
                    }

                    if (!String.IsNullOrEmpty(request.ImportType)) {
                        query = query.Where(d => d.ImportType.StartsWith(request.ImportType));
                    }

                    if (!String.IsNullOrEmpty(request.ClientBasket)) {
                        query = query.Where(d => request.ClientBasket.Contains(d.ClientBasket));
                    }

                    if (!String.IsNullOrEmpty(request.ImportClient)) {
                        query = query.Where(d => request.ImportClient.Contains(d.ImportClient));
                    }

                    if (!String.IsNullOrEmpty(request.AssignedClient)) {
                        query = query.Where(d => d.AssignedClient.StartsWith(request.AssignedClient));
                    }

                    if (!String.IsNullOrEmpty(request.FileCodesByToolFamily)) {
                        query = query.Where(d => request.FileCodesByToolFamily.Contains(d.FileCode));
                    }

                    return query.AsNoTracking();

                    //}
                    //catch(Exception e) {
                    //    throw e.InnerException;
                    //}
                    //finally {

                    //   //Context.Dispose();
                    //}

                }

            }

        }

        #endregion

    }
} 
```

通常它工作正常，一种情况是当我从源代码管理下载我的代码时它不起作用，第二种情况是昨天我正在使用相同的解决方案但不同的页面我在 .edmx 文件中添加了许多视图和存储过程，当我测试这个搜索屏幕时它不起作用，每次都返回 500 错误，我从 mvc telerik 网格错误事件中捕获了 500 错误。

如果我将此代码更改为没有动态

```
return Get(filter: p => p.ACTIVE == active, orderBy: o => o.OrderBy(p => p.NAME), tracking: false); 
```

然后搜索开始工作。

请告诉我这个问题。谢谢

# javascript - 使用 onclick 方法两次

> ID：10523799
> 
> 赞同：-2
> 
> 时间：2012-05-09T20:42:14.307
> 
> 标签：javascript, html

当我点击一个按钮时，我希望能够在 Javascript 中做一些事情，但是 onclick 我想滚动到一个特定的地方。

如果我这样使用，我可以`<a></a>`做到

```
<a href="#cell">click</a>
<a name="cell"></a> 
```

但我想在使用这样的按钮时这样做

```
<input type="button" onclick="doSomthing()" /> 
```

我希望在单击该按钮时执行与`<a>`我上面给出的示例相同的操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:44:23.493

```
location = "#cell"; 
```

# ios - Appcelerator：重新打开应用时的事件

> ID：10523800
> 
> 赞同：0
> 
> 时间：2012-05-09T20:42:21.663
> 
> 标签：ios, events, appcelerator, reload, multitasking

我希望我的应用程序在重新打开时重新加载数据（来自 iOS“多任务”）。

我已经测试过：

```
Ti.UI.addEventListener('reload', function() {
    alert('reloaded app');
}); 
```

但是这个事件只会在应用程序第一次打开时被触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:25:03.753

进入前台的应用是**应用级别**的事件。所以你需要在 Ti.App 上注册，而不是 Ti.UI。事实上，我找不到您正在使用的事件的任何参考。

```
Ti.App.addEventListener('resume', function() {
    alert('reloaded app');
}); 
```

或者您可以在它完全返回后使用“resumed”。

看到[这个页面](http://developer.appcelerator.com/apidoc/mobile/latest/Titanium.App-module)

# java - java将二进制代码保存到文件中

> ID：10523801
> 
> 赞同：1
> 
> 时间：2012-05-09T20:42:27.487
> 
> 标签：java, android, binaryfiles, outputstream, fileoutputstream

我正在通过 ajax 将图片文件作为二进制代码检索，然后 javascript 将其传递给 android 上的 java，android 正在获取二进制代码，但我无法让它保存它......我尝试了很多不同的方法，但没有任何效果。

到目前为止，java 上的代码如下所示：

```
 public void setFile(String sFileName, String sBody){
    try
    {
        //Log.w("setfile", sBody);
        File root = new File(Environment.getExternalStorageDirectory(), local_address);
        if (!root.exists()) {
            root.mkdirs();
        }
        File gpxfile = new File(root, sFileName);
        FileOutputStream aFileOutStream = new FileOutputStream(gpxfile);
        DataOutputStream aDataOutputStream = new DataOutputStream(aFileOutStream);

        aDataOutputStream.writeUTF(sBody);
        aDataOutputStream.flush();
        aDataOutputStream.close();
        aFileOutStream.close();

        //FileWriter writer = new FileWriter(gpxfile);
        //writer.append(sBody);
        //writer.flush();
        //writer.close();
        //Toast.makeText(this, "Saved", Toast.LENGTH_SHORT).show();
    }
    catch(IOException e)
    {
         e.printStackTrace();
    }
   } 
```

我知道 java 正在工作，因为如果我取消注释这一行

//Log.w("setfile", sBody);

log cat 将返回 javascript 发送给 java 的二进制代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:44:04.330

你设置了保存在sd卡上的权限吗？

[https://developer.android.com/guide/topics/data/data-storage.html](https://developer.android.com/guide/topics/data/data-storage.html)和[https://developer.android.com/reference/android/Manifest.permission.html](https://developer.android.com/reference/android/Manifest.permission.html) ( [https://developer.android. com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE](https://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:47:08.477

我相信你想使用`writeBytes()`而不是`writeUTF()`这样它就不会改变你对你的编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:21:34.500

这个对我有用：

```
public void WriteSettings(Context context, String data){
     FileOutputStream fOut = null;
     OutputStreamWriter osw = null;

     try{
         fOut = openFileOutput("settings.dat", MODE_PRIVATE);      
         osw = new OutputStreamWriter(fOut);

         osw.write(data);
         osw.flush();

         Toast.makeText(context, "Settings saved", Toast.LENGTH_SHORT).show();
     }

      catch (Exception e) {      
         e.printStackTrace();
         Toast.makeText(context, "Settings not saved", Toast.LENGTH_SHORT).show();
      }

      finally {
         try {
             osw.close();
             fOut.close();
         } catch (IOException e) {
                e.printStackTrace();
             }
      }
 } 
```

# sql - 多对多关系，根据元素查询一侧

> ID：10523807
> 
> 赞同：0
> 
> 时间：2012-05-09T20:42:35.393
> 
> 标签：sql, sqlite

这是我的数据库架构中最相关的部分：

```
create table TEST (
    ID integer not null,
    NAME text not null,
    constraint PK_TEST primary key (ID),
    constraint UNQ_TEST_NAME unique (NAME)
);

create table SESSION (
    ID integer not null,
    constraint PK_SESSION primary key (ID)
);

create table SESSION_TEST (
    SESSION_ID integer not null,
    TEST_ID integer not null,
    ORDINAL integer not null,
    constraint PK_SESSION_TEST primary key (SESSION_ID, TEST_ID),
    constraint FK_SESSION_TEST_SESSION_ID foreign key (SESSION_ID) references SESSION (ID) on delete cascade,
    constraint FK_SESSION_TEST_TEST_ID foreign key (TEST_ID) references TEST (ID) on delete cascade,
    constraint UNQ_SESSION_TEST_SESSION_ID_ORDINAL unique (SESSION_ID, ORDINAL)
); 
```

有由多个测试组成的会话。SESSIONS 中的 TEST 具有序数（按顺序排列）。SESSION_TEST 是多对多关系的链接表：一个测试可以是多个会话的一部分，一个会话由多个测试组成（但一个测试只能在一个会话中出现一次，即PK）。

如果有一个会话具有该测试并且只有该测试（换句话说，会话仅包含一项测试，即我正在寻找的测试）。例如：

```
TEST:
ID|NAME
1|aaa
2|bbb
3|ccc

SESSION:
ID
1
2
3
4

SESSION_TEST:
SESSION_ID|TEST_ID|ORDINAL
1|1|1
1|2|2
2|1|1
3|3|1 
```

ID = 1 的 SESSION 有两个 TEST，SESSION 2 和 3 各有一个测试。我需要有一个选择，它将为输入 1 和 3 返回 1/true，但为 2 返回 0（因为此测试仅在会话 1 中，但它不是唯一的）。

（对不起标题，我真的不知道怎么用几句话把它说清楚！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:48:06.980

```
RETURN EXISTS SELECT SESSION_ID FROM 
SESSION_TEST
WHERE TEST_ID = @id
AND ORDINAL = 1
AND SESSION_ID NOT IN (SELECT SESSION_ID FROM SESSION_TEST WHERE ORDINAL > 1); 
```

`RETURN EXISTS`语法可能只是 TSQL，但您明白了。如果查询返回行，则返回 true，否则返回 false。

# makefile - 制作和 VPATH。为什么我的源文件放在我不想要的地方？

> ID：10523809
> 
> 赞同：0
> 
> 时间：2012-05-09T20:42:49.777
> 
> 标签：makefile, vpath

我正在尝试使用 make 进行编译。我在两个目录中有源代码，src 和 altsrc。我想先在 altsrc 中查找源文件，然后在 src 中查找。我希望对象进入目录 obs。我的 Makefile 的相关部分如下所示： VPATH=altsrc:src:obj

```
$(A_OUT): $(OBS)
    $(FORTRAN) -o $(A_OUT) $(OBS) $(LFLAGS)

obs/%.o: %.f
    $(FORTRAN) $(FFLAGS) $< -o $@ 
```

这个 Makefile 实际上可以编译代码，但它有一个非常令人讨厌的副作用：它找到每个源文件（并且有很多）并将它们从 altsrc 或 src 复制*到我正在运行的目录中 make*。这真的很烦人，并在以后导致一堆混乱。我在任何地方都没有找到任何说明这应该是 VPATH 宏的影响的文档。谁能告诉我如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:39:38.647

问题是Make 是RCS 的，并且会检查源文件（例如`td.f`）是否可以并且应该从RCS 更新。是的，Make 知道如何使用`co`. 如果源文件不在此类存档中（例如 中的源文件`altsrc`），则 Make 耸耸肩并继续工作。

最快、最肮脏的解决方案是使用`make -r`. 这将禁用内置规则，这应该可以很好地解决问题......除非您依赖其他地方的内置规则。

如果这样做不行，您可以使用自己的无操作规则或使用实际更新现有源的规则来覆盖该特定规则，或者您可以`touch`使用源，以便 Make 不会将它们视为日期，或者将 RCS 文件放在 Make 看不到它们的地方，或者可能有两个或三个其他选项。

# css - 如何使用垂直堆叠的选项卡而不是水平选项卡来做到这一点？

> ID：10523812
> 
> 赞同：0
> 
> 时间：2012-05-09T20:43:05.750
> 
> 标签：css

我在 css 中有这组标签：

```
/*tabs*/
.tabs {
  position: relative;
  min-height: 200px;
  clear: both;
  margin: 25px 0;
}

.tab {
  float: left;
}

.tab label {
  background: #eee;
  padding: 10px;
  margin-left: -1px;
  position: relative;
  left: 1px;
}

.tab [type=radio] {
  display: none;
}

.tab-content {
  position: absolute;
  top: 28px;
  left: 0;
  background: #f7faff;
  right: 0;
  bottom: 0;
  padding: 20px;
  border: 1px solid red;
}

[type=radio]:checked ~ label {
  background: white;
  border-bottom: 1px solid white;
  z-index: 2;
}

[type=radio]:checked ~ label ~ .tab-content {
  z-index: 1;
} 
```

从这里：[http ://css-tricks.com/functional-css-tabs-revisited/](http://css-tricks.com/functional-css-tabs-revisited/)

我怎样才能让它们垂直堆叠？Css 不是我的专业领域，我想在我玩弄我目前正在使用的东西时在这里问。我试图保留纯 css 实现，但将选项卡垂直堆叠到左侧或右侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:54:07.290

选项卡是 div，因此是块级元素，如果您删除，它们会自然堆叠

```
.tab {
  float: left;
} 
```

# ios - iOS 多人游戏 - Game Center 和 Facebook Connect

> ID：10523814
> 
> 赞同：2
> 
> 时间：2012-05-09T20:43:11.827
> 
> 标签：ios, facebook, ipad, game-center

我正计划开发一款 iOS 多人游戏。我打算使用游戏中心。如果我还想拥有 facebook 连接，这将如何运作？是非此即彼吗？同时使用它们是否简单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T00:49:55.817

It's not either-or. You can use as many 3rd-party social networks as you want in your game. Game Center provides a transport mechanism for sending game data to all the participants of your game, which Facebook Connect does not. Facebook Connect only gives you the ability to list your player's FB friends, not the ability to initiate games with them.

# objective-c - 如何为单个文件启用 ARC

> ID：10523816
> 
> 赞同：80
> 
> 时间：2012-05-09T20:43:27.377
> 
> 标签：objective-c, automatic-ref-counting

我想将使用 ARC 编写的单个 Objective-C 类带入一个旧项目。互联网提供了许多关于如何为您的项目启用 ARC 然后为单个文件禁用它的参考，但我想做相反的事情。

我想保留项目原样，即使用手动引用计数，然后仅为新文件启用 ARC。（我的搜索在这里失败了。）

这可能吗？如何？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-05-09T20:52:01.840

[如ARC 文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#general)中所述，将标志添加`-fobjc-arc`到您想要启用 ARC 的任何文件中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-19T05:00:53.740

选择`Target > Build Phases > Compile Source > Select Your class > Double Click`> 类型

`-fobjc-arc`在对话框中 [![在此处输入图像描述](../Images/c0abb4e4872175de7f69e0356d48dfa7.png)](https://i.stack.imgur.com/q4cvT.png)

进入。

# java - 如何改进使用 java 泛型编写的实用程序算法的设计和可读性？

> ID：10523822
> 
> 赞同：1
> 
> 时间：2012-05-09T20:44:03.197
> 
> 标签：java, algorithm

我发现在使用 java 集合时，尤其是在使用泛型编写实用程序方法时，我的代码通常是丑陋和臃肿的，充满了空检查、嵌套循环和重复。专注于这个例子，我想要改进的想法。

假设我们有一个`EnumMap`其值是评级列表。例如，假设`enum`s 本身代表水果，每个值代表不同人给出的列表评级。

```
APPLE  -> [1,   3,   4] 
ORANGE -> [2,   0,   5]

John rated apple 1, Mary rated apple 3, Steve rated apple 4
John rated orange 2, Mary rated orange 0, Steve rated orange 5
Note the specific names are irrelevant and provided only to clarify the setup 
```

现在我们要编写一个实用方法，该方法接受与上述类似的数据结构，并返回每个人最喜欢的水果的列表。因此，上述样本数据的预期结果将是：`[ORANGE, APPLE, ORANGE`因为`2 > 1`、`3 > 0`和`5 > 4`。

以下是我目前执行此操作的方法。我想要一种同样（或更高）有效但更简洁的方式来编写相同的算法。

谢谢！

```
public class MyListUtil {

    public static <K extends Enum<K>, T extends Object & Comparable<? super T>> List<K> maxKeysByIndex(EnumMap<K, List<T>> enumMap) {
        Iterator<K> keysIter = enumMap.keySet().iterator();
        int sizeOfAllLists = enumMap.get(keysIter.next()).size();
        List<K> ret = new ArrayList<K>();

        for (int i=0; i<sizeOfAllLists; i++) {
            keysIter = enumMap.keySet().iterator();
            K maxIndexKey = null;
            T maxIndexVal = null;

            while (keysIter.hasNext()){
                K curKey = keysIter.next();
                T curVal = enumMap.get(curKey).get(i);
                if (maxIndexVal == null || curVal.compareTo(maxIndexVal) > 0) {
                    maxIndexVal = curVal;
                    maxIndexKey = curKey;
                }
            }
            ret.add(maxIndexKey);
        }

        return ret;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:51:56.153

这真的很丑。

IMO 在这里使用枚举是错误的。枚举应该是编程常量，而不是人们的偏好。

您应该创建一个使用 Map 的类 PersonFruitPreference 以允许 Person 设置水果的偏好。还添加一个方法 getFavoriteFruit()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:52:49.827

首先使用排序列表。

第二个简单的调用：

列出结果；for(T in enummap) { result.add(enummap.get(t).get(0)); //假设你做了一个降序排序}

返回结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T21:03:10.450

如果您需要很多方法都对相同的泛型类型进行操作，我认为您可以将辅助方法放入一个类中，`K`然后`T`只为整个类指定完整的泛型类型。要使用它们，您将创建该类的对象，然后从中调用方法。

该对象将是无状态的，但它为您提供了一种将所有详细信息放在一个位置的语法方式。

```
public class <K extends Enum<K>, T extends Object & Comparable<? super T>> MyListUtil {

    public List<K> maxKeysByIndex(EnumMap<K, List<T>> enumMap) {
        ...
    //other methods
} 
```

您可以尝试将内部循环放入单独的方法中，例如：

```
public K getMaxKeyFromPos(EnumMap<K, List<T>> enumMap, int pos)
{
    K maxIndexKey = null;
    T maxIndexVal = null;

    for (K curKey : enumMap.keySet()) {
         T curVal = enumMap.get(curKey).get(pos);
         if (maxIndexVal == null || curVal.compareTo(maxIndexVal) > 0) {
             maxIndexVal = curVal;
             maxIndexKey = curKey;
         }
    }
    return maxIndexKey;
} 
```

我还把它改成了`for-each`语法，去掉了一些迭代器的麻烦。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T22:47:57.997

宣传 Scala 的绝佳机会。您可能知道，Scala 在 JVM 上运行，并且与 Java 字节码完全兼容。它自己编译为 JVM 字节码。

从这个精简的工作代码中看不到什么：

```
val apple  = List (1, 3, 4)
val orange = List (2, 0, 5)
val persons = List ("John", "Mary", "Steve") 
val prefs = apple.zip (orange) .zip (persons) 
//  List[((Int, Int), java.lang.String)] = List(((1,2),John), ((3,0),Mary), ((4,5),Steve))
prefs.map (e => e._2 + ": " + (if (e._1._1 > e._1._2) "apple" else "orange"))
// List[java.lang.String] = List(John: orange, Mary: apple, Steve: orange) 
```

也就是说，您拥有完整的静态编译时安全性。但是类型会在可能的情况下被推断出来，所以你的样板文件要少得多。

前 3 行产生 3 个列表。然后他们被压缩 - 在你看到的评论中，类型推断者说他发现了什么。

这部分有点神秘：

```
 (e => e._2 + ": " + (if (e._1._1 
```

Prefs 是 ((Pair of Int), String) 的列表，e 是列表中的一个元素。e._2 是字符串部分（出于某种原因，在此类元组中，我们不从 0 开始计数，而是从 1 开始计数 - 我猜，因为从元组起源的地方，有这个习惯），而列表和数组等从 0 开始计数也像Java一样。

e._1 是元素的第一部分，即 Ints 对，它们是水果的首选项。e._1._1 用于第一个水果，e._1._2 用于第二个水果。

使用 Scala 集合一段时间后，我不再喜欢 Java。:) 但当然不是每家公司都允许改变，学习它需要一段时间。

# c - gcc/cygwin如何获取DNS服务器？

> ID：10523828
> 
> 赞同：8
> 
> 时间：2012-05-09T20:44:26.430
> 
> 标签：c, networking, cygwin, dns, libresolv

我有一些我正在 cygwin 下编写的代码（使用 GCC）成功使用 gethostbyname(); 但是，当我尝试直接使用解析器来检索 DNS 服务器的 IP 地址时，它会失败（nsaddr_list[] 中的所有条目都为空，nscount 为 -1）。如果 gethostbyname() 工作正常，那么显然它能够连接到 DNS 服务器。
这段代码...

```
 if (res_init() == -1) {
        fprintf(stderr,"res_init() failed\n");
        exit(1);
    }

    if (_res.nscount <= 0) {
        fprintf(stderr,"nscount = %d\n",_res.nscount);
    }
    else {
        for(i=0;i<_res.nscount;i++) {
            fprintf(stderr, "dnssrvr: %d.%d.%d.%d\n",
                (_res.nsaddr_list[i].sin_addr.s_addr & 0xff) >> 0,
                (_res.nsaddr_list[i].sin_addr.s_addr & 0xff00) >> 8,
                (_res.nsaddr_list[i].sin_addr.s_addr & 0xff0000) >> 16,
                (_res.nsaddr_list[i].sin_addr.s_addr & 0xff000000) >> 24);
        }
    } 
```

适用于 unix/linux，但在 cygwin 上返回 nscount=-1。使用 cygwin/gcc 时获取 DNS 服务器有什么技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T10:32:16.577

`res_init`不一定填充`_res.nsaddr_list`。相反，在 Windows 上，它指示解析器使用`DnsQuery_A`，*除非*您拥有该`resolv.conf`文件，在这种情况下，将使用该文件中的 DNS 服务器。

[在此处](http://cygwin.com/cgi-bin/cvsweb.cgi/src/winsup/cygwin/libc/?cvsroot=src)查看源代码、文件`minires.c`和`minires-os-if.c`.

如果您需要了解您的 DNS 服务器，您可能必须使用`DnsQueryConfig`或`GetNetworkParams`。

~~注意：`_res`未记录，不应使用。~~

**更新** ~~显然，cygwin 的“较新”（ca 2010 及更高版本）版本确实填充`_res.nsaddr_list`，通过调用`get_dns_info`然后`get_registry_dns`。您可能需要确保您拥有最新的 cygwin，如果问题仍然存在，请尝试使用调试版本并跟踪对上述函数的调用。~~

**更新 2**不，`_res`没有填充，我的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T03:25:37.030

正如[nm 所说](https://stackoverflow.com/a/10773280/134633)，如果 Cygwin使用的是 Windows 解析器，`res_init()`则不会填充。`_res.nsaddr_list`如果`/etc/resolv.conf`不存在或`/etc/resolv.conf`包含`options osquery`.

在我看来，这是一个 Cygwin 错误 - 返回负数`nscount`是虚假的 - 但我们仍然坚持解决它。

`GetNetworkParams()`解决方案是像 Cygwin 本身一样调用- 这就是我正在做的后备：

```
#include <windows.h>
#include <iphlpapi.h>
#include <netinet/in.h>
#include <arpa/inet.h>

if (_res.nscount < 0)
{
    ULONG buflen = 0;
    FIXED_INFO *buf = NULL;

    if (GetNetworkParams(NULL, &buflen) == ERROR_BUFFER_OVERFLOW)
        buf = malloc(buflen);

    if (buf && GetNetworkParams(buf, &buflen) == NO_ERROR)
    {
        _res.nscount = 1;
        _res.nsaddr_list[0].sin_family = AF_INET;
        _res.nsaddr_list[0].sin_addr.s_addr = inet_addr(buf->DnsServerList.IpAddress.String);
        _res.nsaddr_list[0].sin_port = htons(53);
    }

    free(buf);
} 
```

您需要针对`-liphlpapi`该`GetNetworkParams()`功能进行链接。

这仅需要第一个 Windows DNS 地址，但如果您想要其余的地址，您可以按照`GetNetworkParams()`返回的链接列表进行操作。 `GetNetworkParams()`只返回 IPv4 地址，如果机器配置了 IPv6 DNS 服务器地址，我不确定你应该做什么。

# javascript - 将变量传递给新函数（在新页面上）

> ID：10523833
> 
> 赞同：-2
> 
> 时间：2012-05-09T20:45:01.793
> 
> 标签：javascript, html, function, variables

在我的第一页上，我有两个单选按钮，每个按钮都有一个值。当点击链接转到第 2 页时，将运行以下 for 循环并获取选中按钮的值。（该脚本有效，我已经对其进行了测试）：

```
function func1(){
    var info = document.Information;
    for(var i1 = 0;i1 < info.length;i1++){
        if (info.elements[i1].type == "radio" && info.elements[i1].checked) {
        ordertype = info.elements[i1].value;
        alert(ordertype);       
        }
    }
} 
```

变量 ordertype 在函数外部声明。在第二页上，我通过单击按钮运行此功能：

```
function func2(){
     alert(ordertype);  
} 
```

ordertype 现在未定义...如何正确地将变量传递给新函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:11:18.633

如果使用 javascript... 您可以通过查询字符串传递：

```
function func1() {

        var info = document.Information;

        for (var i1 = 0; i1 < info.length; i1++) {
            if (info.elements[i1].type == "radio" && info.elements[i1].checked) {
                ordertype = info.elements[i1].value;
                break;
            }
        }
        location = 'page.html?value=' + ordertype;
    } 
```

或者只是在表单中添加一个提交按钮。

并且method=post给你form-tag，你将在不使用javascript的情况下获得查询字符串中所选单选按钮的值？

# vba - VBA中的动态依赖列表

> ID：10523835
> 
> 赞同：2
> 
> 时间：2012-05-09T20:45:19.647
> 
> 标签：vba, list, validation, excel, dynamic

我发现该代码（在：[http](http://www.siddharthrout.com/2011/07/29/excel-data-validationcreate-dynamic-dependent-lists-vba/) ://www.siddharthout.com/2011/07/29/excel-data-validationcreate-dynamic-dependent-lists-vba/ 上）非常有用：

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim i As Long, LastRow As Long, n As Long
Dim MyCol As Collection
Dim SearchString As String, TempList As String

Application.EnableEvents = False

On Error GoTo Whoa

'~~> Find LastRow in Col A
LastRow = Range("A" & Rows.Count).End(xlUp).Row

If Not Intersect(Target, Columns(1)) Is Nothing Then
    Set MyCol = New Collection

    '~~> Get the data from Col A into a collection
    For i = 1 To LastRow
        If Len(Trim(Range("A" & i).Value)) <> 0 Then
            On Error Resume Next
            MyCol.Add CStr(Range("A" & i).Value), CStr(Range("A" & i).Value)
            On Error GoTo 0
        End If
    Next i

    '~~> Create a list for the DV List
    For n = 1 To MyCol.Count
        TempList = TempList & "," & MyCol(n)
    Next

    TempList = Mid(TempList, 2)

    Range("D1").ClearContents: Range("D1").Validation.Delete

    '~~> Create the DV List
    If Len(Trim(TempList)) <> 0 Then
        With Range("D1").Validation
            .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
            xlBetween, Formula1:=TempList
            .IgnoreBlank = True
            .InCellDropdown = True
            .InputTitle = ""
            .ErrorTitle = ""
            .InputMessage = ""
            .ErrorMessage = ""
            .ShowInput = True
            .ShowError = True
        End With
    End If
'~~> Capturing change in cell D1
ElseIf Not Intersect(Target, Range("D1")) Is Nothing Then
    SearchString = Range("D1").Value

    TempList = FindRange(Range("A1:A" & LastRow), SearchString)

    Range("E1").ClearContents: Range("E1").Validation.Delete

    If Len(Trim(TempList)) <> 0 Then
        '~~> Create the DV List
        With Range("E1").Validation
            .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
            xlBetween, Formula1:=TempList
            .IgnoreBlank = True
            .InCellDropdown = True
            .InputTitle = ""
            .ErrorTitle = ""
            .InputMessage = ""
            .ErrorMessage = ""
            .ShowInput = True
            .ShowError = True
        End With
    End If
End If

LetsContinue:
Application.EnableEvents = True
Exit Sub
Whoa:
MsgBox Err.Description
Resume LetsContinue
End Sub

'~~> Function required to find the list from Col B
Function FindRange(FirstRange As Range, StrSearch As String) As String
Dim aCell As Range, bCell As Range, oRange As Range
Dim ExitLoop As Boolean
Dim strTemp As String

Set aCell = FirstRange.Find(what:=StrSearch, LookIn:=xlValues, _
lookat:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
MatchCase:=False, SearchFormat:=False)

ExitLoop = False

If Not aCell Is Nothing Then
    Set bCell = aCell
    strTemp = strTemp & "," & aCell.Offset(, 1).Value
    Do While ExitLoop = False
        Set aCell = FirstRange.FindNext(After:=aCell)

        If Not aCell Is Nothing Then
            If aCell.Address = bCell.Address Then Exit Do
            strTemp = strTemp & "," & aCell.Offset(, 1).Value
        Else
            ExitLoop = True
        End If
    Loop
    FindRange = Mid(strTemp, 2)
End If
End Function 
```

该代码有效，但是当我尝试将 DV 列表放到另一张纸上并更改要写入的单元格时，它无法正常工作......

当我在列表中选择我想要的选项时，所选选项不会写在单元格上。

所以程序运行没有任何问题，但结果不是我想要的。

重新排列的代码是：

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim i As Long, LastRow As Long, n As Long
Dim MyCol As Collection
Dim SearchString As String, Templist As String

Application.EnableEvents = False

On Error GoTo Whoa

' Find LastRow in Col A
LastRow = Sheet2.Range("A" & Rows.Count).End(xlUp).Row

If Not Intersect(Target, Columns(1)) Is Nothing Then
Set MyCol = New Collection

' Get the data from Col A into a collection
For i = 2 To LastRow
    If Len(Trim(Sheet2.Range("A" & i).Value)) <> 0 Then
        On Error Resume Next
        MyCol.Add CStr(Sheet2.Range("A" & i).Value), CStr(Sheet2.Range("A" & i).Value)
        On Error GoTo 0
    End If
Next i

' Create a list for the Data Validation List
For n = 1 To MyCol.Count
    Templist = Templist & "," & MyCol(n)
Next

Templist = Mid(Templist, 2)

Range("A2").ClearContents: Range("A2").Validation.Delete

' Create the Data Validation List
If Len(Trim(Templist)) <> 0 Then
    With Range("A2").Validation
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween, Formula1:=Templist
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With
End If

' Capturing change in cell A2
ElseIf Not Intersect(Target, Range("A2")) Is Nothing Then
SearchString = Range("A2").Value

Templist = FindRange(Sheet2.Range("A2:A" & LastRow), SearchString)

Range("B2").ClearContents: Range("B2").Validation.Delete

If Len(Trim(Templist)) <> 0 Then
    ' Create the DV List
    With Range("B2").Validation
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:=xlBetween, Formula1:=Templist
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With
End If
End If
LetsContinue:
Application.EnableEvents = True
Exit Sub
Whoa:
MsgBox Err.Description
Resume LetsContinue
End Sub

' Function required to find the list from Col B
Function FindRange(FirstRange As Range, StrSearch As String) As String
Dim aCell As Range, bCell As Range, oRange As Range
Dim ExitLoop As Boolean
Dim strTemp As String

Set aCell = FirstRange.Find(what:=StrSearch, LookIn:=xlValues, lookat:=xlWhole, SearchOrder:= _
xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

ExitLoop = False

If Not aCell Is Nothing Then
    Set bCell = aCell
    strTemp = strTemp & "," & aCell.Offset(, 1).Value
    Do While ExitLoop = False
        Set aCell = FirstRange.FindNext(After:=aCell)

        If Not aCell Is Nothing Then
            If aCell.Address = bCell.Address Then Exit Do
            strTemp = strTemp & "," & aCell.Offset(, 1).Value
        Else
            ExitLoop = True
        End If
    Loop
    FindRange = Mid(strTemp, 2)
End If
End Function 
```

是否有人知道我是否需要进行更多更改？我错过了什么棘手的事情吗？

# c - 某些单词/C的加密错误

> ID：10523837
> 
> 赞同：-2
> 
> 时间：2012-05-09T20:45:31.037
> 
> 标签：c, arrays, encryption, alphabetical

我正在尝试用 C 编写一个简单的加密程序。我的目标是将“jim”（可以是任何单词）翻译为 10、9、13。然后加上 1,2,3（因为单词有 3 个字母）并得到 11,12,16 然后再翻译成文本，然后在屏幕上写 klp。我有 2 个算法，一个用于加密，第二个用于返回第一个。它是工作，但是对于这些话，当我启动第一个算法然后第二个算法（逆）时，出现问题“编译器可执行通过”。“compileo vou euecrqable throrgh”我检查了几次算法，我不知道我忽略了哪里

PS：如果你想运行名为 unencrypted.txt 的 make txt 文件并在其中写入单词，那么第一个算法然后是第二个

```
int main() {
    int g,z,o,c,l,i,j,k,*D;

    char alfabe[26]={'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};
    FILE *fp1;
    FILE *mat;
    char word[20];

    fp1 = fopen("unencrypted.txt","r+");
    do {
        g = fscanf(fp1,"%s",word);
        if (g != EOF) {
            mat=fopen("encrypted.txt","a+");
            c=strlen(word);
            D=(int*)calloc(c,sizeof(int));
            for(i=0;i<c;i++) {
                for(j=0;j<26;j++) {
                    if(word[i]==alfabe[j]) {
                         D[i]=(((j+1)+(i+1))%26);
                         break;
                    }
                }
            }
        }

        for(z=0;z<c;z++){
              o=D[z];
              word[z]=alfabe[o-1];
        }

        for(k=0;k<c;k++) {
           fprintf(mat,"%c",word[k]);
        }
        fprintf(mat," ");
        fclose(mat);

    } while (g != EOF);
    fclose(fp1);
} 
```

* * *

```
int main() {
    int g,z,o,c,l,i,j,k,*D;

    char alfabe[26]={'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};
    FILE *fp1;
    FILE *mat;
    char word[20];

    fp1 = fopen("encrypted.txt","a+");
    do {
        g = fscanf(fp1,"%s",word);
        if (g != EOF) {
            mat=fopen("unencrypted1.txt","a+") ;
            c=strlen(word);
            D=(int*)calloc(c,sizeof(int));
            for(i=0;i<c;i++) {
                for(j=0;j<26;j++) {
                    if(word[i]==alfabe[j]) {
                        if(0>((j+1)-(i+1))){
                            D[i]=((j+1)-(i+1)+26);
                        } else D[i]=((j+1)-(i+1));
                        break;
                    }
                }
            }
        }

        for(z=0;z<c;z++){
            o=D[z];
            word[z]=alfabe[o-1];
        }

        for(k=0;k<c;k++) {
           fprintf(mat,"%c",word[k]);
        }
        fprintf(mat," ");
        fclose(mat);

    } while (g != EOF);
    fclose(fp1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:01:01.307

首先，在您的加密例程中，您可以有未定义的行为：

```
word[z]=alfabe[o-1]; 
```

访问不应该 if 的内存，`o == 0`如果单词中字符的基于 1 的索引和字母表中基于 1 的索引的总和是 26 的倍数，则会发生这种情况。

为避免这种情况，您可以设置`word[z] = alfabe[(o+25)%26]`，或者更简单地，`+1`在前一个循环中省略一个 s 并使用`alfabe[o]`.

的访问`alfabe[-1]`，如果发生，是一种未定义的行为，不太可能导致分段错误或类似的剧烈事情，它可能只会导致在加密字中写入意外字节。

在解密中，你有类似的问题，

```
if(0>((j+1)-(i+1))){
    D[i]=((j+1)-(i+1)+26);
} else D[i]=((j+1)-(i+1)); 
```

如果单词足够长，甚至`j - i + 26`可能是否定的（也就是说，对于自然英语文本来说极不可能 - 在许多其他语言中也是如此）。

再一次，它可能会发生`D[i]`设置为 0，在这种情况下

```
for(z=0;z<c;z++){
    o=D[z];
    word[z]=alfabe[o-1];
} 
```

将再次访问`alfabe[-1]`并导致未定义的行为。

另请注意，如果您的输入包含除小写字母和空格（被 丢弃`fscanf`）之外的任何内容，则数组的相应条目`D`包含该内存位置发生的任何字节，再次导致未定义的行为。

如果您的输入仅包含小写字母（和空格），您可以通过设置在字母表中找到索引比使用循环更容易

```
j = word[i] - 'a'; 
```

为避免这些`alfabe[-1]`问题，我建议使用基于 0 的索引。

# codeigniter - 在 codeigniter 中使用 HTTPOnly 标志设置 cookie

> ID：10523840
> 
> 赞同：13
> 
> 时间：2012-05-09T20:45:36.420
> 
> 标签：codeigniter, cookies, codeigniter-2, xss

我想知道如何在 Codeigniter 中将 cookie 设置为 HTTPOnly。我查看了文档，但没有看到如何设置此标志。

我还想为 cookie 设置安全标志，并在 config.php 文件中找到它：

```
$config['cookie_secure'] = TRUE; 
```

但是 config.php 中没有 HTTPOnly 选项。

如何将所有 cookie 设置为 HTTPOnly？如果它是在框架中完成的，那么知道该代码在哪里供我自己学习（以及默认值是什么）会很有帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-09T21:03:19.387

幸运的是，您可以在 GitHub 上查看[Session.php的源代码](https://github.com/EllisLab/CodeIgniter/blob/cdcceecba73dd9f54665f531d15c12f5c9679738/system/libraries/Session.php)

在函数`_set_cookie`中，您将看到：

```
// Set the cookie
setcookie(
    $this->sess_cookie_name,
    $cookie_data,
    $expire,
    $this->cookie_path,
    $this->cookie_domain,
    $this->cookie_secure,
    $this->cookie_httponly
); 
```

的值`$this->cookie_httponly`已分配，`__construct`默认值为 FALSE，但您可以通过`config.php`以下方式将其设置为 TRUE：

```
$config['cookie_httponly'] = TRUE; 
```

这将使框架内的 cookie 成为 HTTPOnly。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-27T10:07:08.593

我发现他们是 codeigniter 会话管理中的一个 drwaback，因为

-

1.  2.1.3 版本他们没有 cookie_httponly 标志。
    解决方法：
    第一步：需要在库中创建自己的 My_session.php 并扩展系统会话文件或修改 Session.php（在 system->library->Session.php 文件中）
    第二步：找到 _set_cookie($cookie_data = NULL) 函数, 转到 setcookie() 并修改为

    `setcookie( $this->sess_cookie_name, $cookie_data, $expire,
    $this->cookie_path, $this->cookie_domain, $this->cookie_secure, TRUE ); // add True flag.`

2.  即使您添加“TRUE”并且如果使用 OWASP ZAP 工具进行测试，
    有时它也会给您带来 CSRF 问题
    ，即：HTTPONLY 不正确，
    安全标志未启用。

    原因：因为在 sess_destroy 时，他们将 HTTPONLY 和 Secure 标志设置为 none。
    解决方案：将 Session.php 中的 sess_destroy 函数更新为

    ```
     // Kill the cookie 
    `setcookie(
              $this->sess_cookie_name,
             addslashes(serialize(array())),
             ($this->now - 31500000),
             $this->cookie_path,
             $this->cookie_domain,
             TRUE,
             TRUE 
         );` 
    ```

由于这些问题让我彻夜难眠，所以我希望这对你也有帮助。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-21T14:31:54.187

2.1.3 的 foreach 中不包含 cookie_httponly，所以不会设置它。

```
foreach (array('sess_encrypt_cookie', 'sess_use_database', 'sess_table_name', 'sess_expiration', 'sess_expire_on_close', 'sess_match_ip', 'sess_match_useragent', 'sess_cookie_name', 'cookie_path', 'cookie_domain', 'cookie_secure', 'sess_time_to_update', 'time_reference', 'cookie_prefix', 'encryption_key') as $key) 
```

它也没有在这里设置...

```
 setcookie(
                $this->sess_cookie_name,
                $cookie_data,
                $expire,
                $this->cookie_path,
                $this->cookie_domain,
                $this->cookie_secure
            ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-02T02:18:18.123

此功能现在在 v2 中确实存在，请参阅此 config.php：

> | 'cookie_httponly' = Cookie 只能通过 HTTP(S) 访问（无 javascript）
> 
> $config['cookie_httponly'] = 真；

# django - Django - get_FOO_display 方法 - 显示选择长名称

> ID：10523843
> 
> 赞同：0
> 
> 时间：2012-05-09T20:45:54.687
> 
> 标签：django, django-haystack

我正在尝试在我的模型上创建一个方法来为我的选择返回“长名称”。我显然不理解“Model.get_FOO_display()”方法，或者正在做一些语法屠杀。最终计划是使用 (model_attr='xxx') 在 (haystack) search_index.py 中获取“长名称”。我已经进行了几个小时的搜索，但没有找到有效的示例。我很感激你能提供的任何建议。谢谢。

模型.py

```
new_used = (
    ('n', 'new'),
    ('u', 'used'),
)

broker = (
    ('n', 'No'),
    ('y', 'Yes'),
)

class Flist(models.Model):
    createdate = models.DateTimeField(auto_now_add=True)
    expirydate = models.DateTimeField(null=True, blank=True)
    price = models.IntegerField(null=True, blank=True)
    new_used = models.CharField(max_length=1, blank=True, choices=new_used, default='u')    
    broker_y_n = models.CharField(max_length=1, blank=True, choices=broker, default='n')
    mfr = models.CharField(max_length=80, blank=True)    
    listing_type = models.ForeignKey(ListingType)
    listing_status = models.ForeignKey(ListingStatus, default=3)
    location_zip = models.IntegerField(null=True, blank=True)    
    customer = models.ForeignKey(Customer)

    def nu(self):
        return Flist.get_new_used_display

    def byn(self):
        return Flist.get_broker_y_n_display 
```

search_indexes.py

```
class FlistIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)    
    createdate = indexes.DateTimeField(model_attr='createdate', faceted=True)
    price = indexes.IntegerField(model_attr='price',  faceted=True)
    new_used = indexes.CharField(model_attr='nu',  faceted=True)
    broker_y_n = indexes.CharField(model_attr='byn',  faceted=True)
    mfr = indexes.CharField(model_attr='mfr',  faceted=True)
    listing_type = indexes.CharField(model_attr='listing_type',  faceted=True)
    listing_status = indexes.CharField(model_attr='listing_status',  faceted=True)
    location_zip = indexes.IntegerField(model_attr='location_zip',  faceted=True)

    def get_model(self):
        return Flist 
```

问题继续......

好的，将“坏”方法更改为属性：

```
 @property
    def nu(self):
       return self.get_new_used_display()

    @property
    def byn(self):
       return self.broker_y_n_display() 
```

似乎 haystack 不喜欢 (can't find_model_attr(ibutes) 'byn' 或 'nu' 所以不会索引。

在我开始使用方法和@property 之前，我正在获取名称和方面计数，但名称是简短版本。将长名称获取到 FlistIndex 中的 model_attr 的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:49:45.367

您返回的是方法本身，而不是方法返回的值，即：

```
def nu(self):
    return self.get_new_used_display 
```

你需要做：

```
def nu(self):
    return self.get_new_used_display() 
```

*正如@DanielRoseman 指出的那样，上面的代码被编辑为使用`self`而不是（实例与类）。`Flist`*

**更新**

此外，FWIW，如果您要将方法调用包装成较短的版本（例如`.nu()`，相当于`.get_new_used_display()`，那么您不妨让它真正值得并将其变成一个属性：

```
@property
def nu(self):
    return self.get_new_used_display() 
```

然后，您可以`some_flist.nu`像模型上的任何其他属性一样（注意没有括号）。无论哪种方式都无所谓，但那样会更干净一些。

# bash - 从 Web 应用程序内部检查 DOS 或 bash

> ID：10523844
> 
> 赞同：-1
> 
> 时间：2012-05-09T20:46:02.693
> 
> 标签：bash, dos

假设我有一个具有某种系统执行功能的 Web 应用程序。我将在这个例子中使用 Ruby。此应用程序可以移植并安装在 Windows 或 Unix 服务器上。如果应用程序使用系统命令，有没有办法区分服务器是什么平台，然后可能会在`if`语句中捕获？

理论上是这样的：

```
os_check = `checkos` # System ticks to execute through the shell
                     # using fake command

if os_check == 'unix'
  # Run Unix Commands
  `ls -la`
else if os_check == 'dos'
  # Run DOS commands
  `dir`
else
  puts 'OS not detectable'
end 
```

**编辑**

我不是专门寻找 Ruby（删除了标签）。那是一个例子。我希望有一个 shell 命令可以在两种环境中执行，并且可以根据操作系统是可变的。我实际上必须用几种语言复制这种功能。很抱歉有任何混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:57:51.047

尝试检查[`RUBY_PLATFORM`全局常量](http://www.zenspider.com/Languages/Ruby/QuickRef.html#pre-defined-global-constants)：

```
case RUBY_PLATFORM
  when /win32/ then # Windows, use "dir"
  # when /darwin/ then # Mac OS X
  # when /linux/ then # Linux
  else # Assume "ls" on all other platforms
end 
```

**[编辑]**根据您更新的问题，您可能能够发出系统命令`echo /?`并解析输出以确定主机操作系统。“echo”命令应该存在于大多数系统上，但 Windows 将`/?`开关解释为“帮助”消息，而 UNIX 操作系统只是回显这些字符。例如（同样在 Ruby 中，只是为了演示一般策略）：

```
def detect_host_operating_system
  (%x{echo /?} =~ /^\/\?\r?\n$/) ? 'unix' : 'windows'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:28:25.900

把事情简单化。尝试运行仅存在于所需平台上的命令

应：`cmd`

尼克斯：`man`

一些没有参数的琐碎运行的结果状态是这里的关键。

使用这种方法没有字符串解析。哪个更优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:36:01.290

您可以尝试使用 Python 来实现，这种脚本语言默认安装在大多数 Linux 发行版和 Mac 上（我认为也安装在像 BSD 这样的 Unix 系统上，但我对此并不完全确定）。

```
import os

if (os.name == "posix"):
    #run unix command
else:
    #run Windows command 
```

当然，您也可以根据需要添加更多操作系统检查。

# php - 如何在 Symfony 2 中嵌入来自子命名空间控制器的操作？

> ID：10523848
> 
> 赞同：0
> 
> 时间：2012-05-09T20:46:23.093
> 
> 标签：php, symfony, twig

我正在尝试从 Symfony 2 的 Twig 视图中呈现位于子命名空间控制器中的操作。

**问题**是：渲染助手找不到控制器/动作，因为它位于*Controller*下的命名空间中。

这是我的控制器： **src/Acme/Bundle/TestBundle/Controller/FirstModule/ExampleController.php**

```
namespace Acme\Bundle\TestBundle\Controller\FirstModule;

class ExampleController extends Controller
{
    public function exampleAction(Request $request)
    {
        return $this->render('AcmeTestBundle:FirstModuleExample:example.html.twig');
    }

    public function embedAction(Request $request)
    {
        return $this->render('AcmeTestBundle:FirstModuleExample:embed.html.twig');
    }
} 
```

这是我的观点： **src/Acme/Bundle/TestBundle/Resources/views/FirstModuleExample/example.html.twig**

```
{% render "AcmeTestBundle:Example:embed" %}
// or
{% render "Acme\Bundle\TestBundle\Controller\FirstModule\Example:example" %}
// or
{% render "Acme\Bundle\TestBundle\Controller\FirstModule\ExampleController:exampleAction" %} 
```

我已阅读[嵌入控制器](http://symfony.com/doc/current/book/templating.html#embedding-controllers)文档，但不知道如何处理子命名空间中的控制器。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T21:32:04.850

这些中的任何一个都应该起作用。请记住，字符串中的反斜杠需要转义（即加倍）

```
{% render "AcmeTestBundle:FirstModule\\Example:embed" %} 
```

或者

```
{% render "Acme\\Bundle\\TestBundle\\Controller\\FirstModule\\ExampleController::embedAction" %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:12:20.667

你试过这个吗？

```
{% render "AcmeTestBundle:FirstModule/Example:embed" %} 
```

或这个？

```
{% render "AcmeTestBundle:FirstModule\\Example:embed" %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:56:38.537

我认为你应该能够使用反斜杠符号，但我没有尝试过，因为我练习将所有控制器放入单个命名空间（如果你有很多控制器，这很糟糕）。

像这样的东西：

```
{% render "Acme\Bundle\TestBundle\Controller\FirstModule\Example:example" %} 
```

# git - 在 Git 中更改文件名的大小写

> ID：10523849
> 
> 赞同：604
> 
> 时间：2012-05-09T20:46:51.770
> 
> 标签：git, rename, case-sensitive, file-rename

我正在尝试重命名文件以使其具有与以前不同的大小写：

```
git mv src/collision/b2AABB.js src/collision/B2AABB.js
fatal: destination exists, source=src/collision/b2AABB.js, destination=src/collision/B2AABB.js 
```

正如你所看到的，Git 对此非常不满。我也尝试使用普通的旧`mv`命令重命名，但 Git 没有选择重命名（作为重命名*或*作为新的未跟踪文件）。

如何更改文件以具有相同名称的不同大小写？我在使用[Z shell](https://en.wikipedia.org/wiki/Z_shell) (zsh) 4.3.15 和 Git 1.7.9.1 的 Mac OS X v10.7.3 (Lion) 上。

* * *

## 回答 #1

> 赞同：753
> 
> 时间：2014-07-27T08:00:46.397

从 Git 2.0.1（2014 年 6 月 25 日）开始， a**`git mv`将仅适用于不区分大小写的 OS**。

请参阅[David Turner (](https://github.com/dturner-tw) [)](https://github.com/dturner-tw)的[提交 baa37bf](https://github.com/git/git/commit/baa37bff9a845471754d3f47957d58a6ccc30058)。[`dturner-tw`](https://github.com/dturner-tw)

### `mv`：允许重命名以修复不区分大小写的文件系统上的大小写

" `git mv hello.txt Hello.txt`" 在不区分大小写的文件系统上总是会触发 " `destination already exists`" 错误，因为这两个名称从文件系统的角度来看是指同一个路径，并且需要用户`--force`在更正索引中记录的路径的大小写时给出 " "下一次提交。

> 检测这种情况并允许它而不需要“ `--force`”。

`git mv hello.txt Hello.txt`只是工作（不再`--force`需要）。

* * *

另一种选择是：

```
git config --global core.ignorecase false 
```

并直接重命名文件；git 添加并提交。

它确实在 CMD 中工作。它可能会在 git bash（在 Windows 上）会话中失败（请参阅[Louis-Caron](https://stackoverflow.com/users/2881888/louis-caron)的[回答](https://stackoverflow.com/a/68173364/6309)）

正如[jaquinocode](https://stackoverflow.com/users/13255028/jaquinocode)在[评论](https://stackoverflow.com/questions/10523849/changing-capitalization-of-filenames-in-git/24979063#comment124685264_24979063)中指出的那样，如果您的本地存储库本身具有该设置：

```
git config --local core.ignorecase false 
```

* * *

## 回答 #2

> 赞同：492
> 
> 时间：2013-04-17T22:31:10.790

考虑到[larsks 的回答](https://stackoverflow.com/questions/10523849/changing-capitalization-of-filenames-in-git/10523903#10523903)，您可以使用带有“--force”的单个命令使其工作：

```
 git mv --force myfile MyFile 
```

* * *

## 回答 #3

> 赞同：138
> 
> 时间：2014-05-12T12:46:05.220

有时您想在不区分大小写的文件系统（例如 macOS 或 Windows）上更改许多文件名的大小写。执行单个`git mv`命令会很快疲劳。为了让事情变得更容易，这就是我所做的：

1.  将所有受影响的文件移到目录之外，比如说桌面。
2.  做一个`git add . -A`阶段删除这些文件。
3.  将桌面上的所有文件重命名为正确的大小写。
4.  将所有文件移回原始目录。
5.  做一个`git add .`。Git 应该看到文件被重命名。

现在您可以进行提交，说明您已更改文件名的大小写。

* * *

## 回答 #4

> 赞同：69
> 
> 时间：2012-05-09T20:51:36.003

OS X 下的文件名不区分大小写（默认情况下）。这更像是一个操作系统问题而不是 Git 问题。如果您删除并读取该文件，您应该得到您想要的，或者将其重命名为其他名称，然后将其重命名。

* * *

## 回答 #5

> 赞同：46
> 
> 时间：2015-11-16T09:38:02.207

## 在 git 配置中设置`ignorecase`为`false`

由于原始帖子是关于“在 Git 中更改文件名的大小写”：

如果您尝试更改项目中文件名的大小写，则无需从 Git**强制重命名。**IMO，我宁愿从我的 IDE/编辑器中更改大写，并确保我正确配置 Git 以进行重命名。

默认情况下，Git 模板设置为忽略大小写（Git 不区分大小写）。要验证您是否拥有默认模板，请使用`--get`检索指定键的值。使用`--local`and`--global`指示 Git 是从本地 Git 存储库配置还是全局配置中获取配置键值。例如，如果您想查找全局密钥`core.ignorecase`：

```
git config --global --get core.ignorecase 
```

如果返回`true`，请确保将其设置为：

```
git config --global core.ignorecase false 
```

（确保您具有更改全局的适当权限。）您拥有它；现在你的 Git 安装不会忽略大小写并将它们视为更改。

作为一个建议，如果您正在处理多语言项目并且您觉得并非所有项目都应该被 Git 视为区分大小写，只需更新本地`core.ignorecase`文件即可。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-03-14T07:24:50.653

您可以打开“.git”目录，然后编辑“config”文件。在“[core]”设置下，设置“ignorecase = true”，你就完成了；）

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-12-06T07:54:50.080

在 macOS 上将文件批量`git mv`转换为小写，在 Windows 上将文件批量转换为 git bash：

```
for f in *; do git mv "$f" "`echo $f | tr "[:upper:]" "[:lower:]"`"; done 
```

它将小写文件夹中的所有文件。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2021-06-29T06:02:02.723

[Vonc的](https://stackoverflow.com/users/6309/vonc)[回答](https://stackoverflow.com/a/24979063/2881888)是完全正确的，但仍然存在您的重命名操作不适用于 git for windows 的潜在情况：

假设您要将 dir/mypath 重命名为 dir/myPath：

```
git mv dir/mypath dir/myPath 
```

但它没有报告：

```
Rename from 'dir/mypath' to 'dir/mypath' failed. Should I try again? (y/n) 
```

问题是 bash 已经默默地替换了你的命令行`dir/myPath`，`dir/mypath`因为它检测到这样的路径存在不同的大小写。

解决方案是使用中间移动操作：

```
git mv dir/mypath dir/mypath_temp
git mv dir/mypath_temp dir/myPath 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-01T04:05:42.290

这个 Python 片段将`git mv --force`目录中的所有文件都变为小写。例如， foo/Bar.js 将通过`git mv foo/Bar.js foo/bar.js --force`.

根据您的喜好修改它。我只是想我会分享:)

```
import os
import re

searchDir = 'c:/someRepo'
exclude = ['.git', 'node_modules','bin']
os.chdir(searchDir)

for root, dirs, files in os.walk(searchDir):
    dirs[:] = [d for d in dirs if d not in exclude]
    for f in files:
        if re.match(r'[A-Z]', f):
            fullPath = os.path.join(root, f)
            fullPathLower = os.path.join(root, f[0].lower() + f[1:])
            command = 'git mv --force ' + fullPath + ' ' + fullPathLower
            print(command)
            os.system(command) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-25T15:29:07.357

工作示例：

```
git mv ./src/images/poster_video.PNG ./src/images/poster_video.png 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-10T20:08:34.953

我在 Sourcetree 的 Windows 上得到了以下更改：

[![在此处输入图像描述](../Images/b4ba67b5fedfe431e25ec39be400e814.png)](https://i.stack.imgur.com/REiL6.png)

我通过从文件系统中删除文件来解决它：

[![在此处输入图像描述](../Images/60b5e662341cd6070c6aba716ec94155.png)](https://i.stack.imgur.com/TUArn.png)

然后只需丢弃我要保留的文件并提交：

[![在此处输入图像描述](../Images/b8f91d890f076c829be186b9a004fac2.png)](https://i.stack.imgur.com/PNHcG.png)

现在一切都按预期工作。

[![在此处输入图像描述](../Images/49eeba80b56d5c6931b9ff55858b2cd4.png)](https://i.stack.imgur.com/zqPB1.png)

基于这个答案：

[https://stackoverflow.com/a/66121726/3850405](https://stackoverflow.com/a/66121726/3850405)

# javascript - 可以正确缩放 x 轴的字符库

> ID：10523850
> 
> 赞同：0
> 
> 时间：2012-05-09T20:46:58.403
> 
> 标签：javascript, html, charts

我正在寻找 JavaScript 中的图表库。

它必须支持线条（我想所有图表库都这样做）。由于数据量大，我必须支持缩放。

我在使用其他库时发现的问题是缩放 x 轴。

我通过字符串获取数据：

```
y=[43,56,34,63....]
x=[24/04/12 22:47,...] 
```

但行数和间隔由用户指定。这意味着我可以拥有 50 个数据或 500 个数据。当我输入这些日期和时间时，问题就来了。我找不到一个可以查看字符串长度的库，然后在缩小时只显示其中的 4-5 个，而在放大时显示更详细。

钱不是问题，但需要有试用版。

编辑：我已经尝试过允许我设置开始日期的库，然后是间隔。但是我的间隔不是恒定的，所以也不能使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:22:59.703

试试 amCharts。这个库支持日期作为系列。您的工作是将日期字符串转换为 JavaScript 日期对象，这是一项非常简单的任务。以下是基于日期数据的图表示例：http: [//amcharts.com/javascript/line-chart-with-date-based-data/](http://amcharts.com/javascript/line-chart-with-date-based-data/)

另一个基于日期/时间的数据： [http ://amcharts.com/javascript/area-chart-with-time-based-data/](http://amcharts.com/javascript/area-chart-with-time-based-data/)

您可以下载并试用此库。

# objective-c - 如何绕过我的 viewdidload 无效？

> ID：10523851
> 
> 赞同：-3
> 
> 时间：2012-05-09T20:47:05.900
> 
> 标签：objective-c, ios

我正在制作井字游戏，我希望用户能够在游戏中间进入菜单，但能够在没有应用程序的情况下使用 -(void)viewdidload 来返回，这将重置游戏。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:48:30.850

当用户进入菜单时，您需要做的基本上是保持您之前的游戏状态。

然后在你的 -(void)viewdidload 上通过实现你自己的逻辑返回到最后一个状态。

# asp.net - 饼图图例文本

> ID：10523864
> 
> 赞同：0
> 
> 时间：2012-05-09T20:48:21.130
> 
> 标签：asp.net, vb.net

我正在尝试在 VB.NET 中的饼图图例中显示标签名称和百分比。下面是代码。我找不到任何库参考或代码示例来引导我在 VB.NET 中工作的正确方向。除此以外，饼图看起来和工作正常。

任何人都可以帮忙吗？

谢谢

```
 PieTable.Columns.Add("Status")
    PieTable.Columns.Add("Count")
    PieTable.Rows.Add("Pass", LineCounter - FailCnt - WarningCnt)
    PieTable.Rows.Add("Fail", FailCnt)
    PieTable.Rows.Add("Warning", WarningCnt)

    OverallPieChart.DataSource = PieTable
    OverallPieChart.Width = 250
    OverallPieChart.Height = 100
    OverallPieChart.Series("Series1").XValueMember = "Status"
    OverallPieChart.Series("Series1").YValueMembers = "Count"

    OverallPieChart.EnableViewState = True
    OverallPieChart.Series("Series1").ChartType = SeriesChartType.Pie
    OverallPieChart.ChartAreas("ChartArea1").BackColor = Color.Black
    OverallPieChart.ChartAreas("ChartArea1").Area3DStyle.Enable3D = True
    OverallPieChart.BackColor = Color.Black
    'OverallPieChart.Series(0)("PieLabelStyle") = "Outside (#Percent)"
    OverallPieChart.Series(0).LabelForeColor = Color.Beige
    OverallPieChart.ChartAreas("ChartArea1").InnerPlotPosition.Width = 100%
    OverallPieChart.ChartAreas("ChartArea1").InnerPlotPosition.Height = 100%
    OverallPieChart.Series(0)("PieLineColor") = "Transparent"
    OverallPieChart.Series(0)("LabelsRadialLineSize") = "0.15"
    OverallPieChart.Series(0)("LabelsHorizontalLineSize") = "0.15"
    OverallPieChart.Legends.Add("Legent1")
    OverallPieChart.Legends("Legend1").Enabled = True
    OverallPieChart.Legends("Legend1").Docking = Docking.Right
    OverallPieChart.Legends("Legend1").Alignment = System.Drawing.StringAlignment.Far
    OverallPieChart.Legends("Legend1").BackColor = Color.Black

    OverallPieChart.Series("Series1").IsVisibleInLegend = True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T23:33:43.073

这应该这样做：

```
OverallPieChart.Series(0).Label = "#PERCENT" 
```

或者你可以使用这个：

```
OverallPieChart.Series(0).Label = "#PERCENT{P0}" 
```

四舍五入到最接近的整数

对于标签和百分比：

```
OverallPieChart.Series(0)Label = "#VALX" & Environment.NewLine & "#PERCENT{P0}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T22:34:21.357

您的代码中有错字

```
OverallPieChart.Legends.Add("Legent1") 
```

应该

```
OverallPieChart.Legends.Add("Legend1") 
```

# xdomainrequest - XDomainRequest 打开在客户端 IE8 机器上不起作用

> ID：10523872
> 
> 赞同：2
> 
> 时间：2012-05-09T20:48:56.343
> 
> 标签：xdomainrequest

谁能告诉我为什么 XDomainRequest 在我的客户登录计算机上不起作用？它适用于我的 IE9 和我的服务器。它适用于他们的服务器，但不适用于他们的 IE8 登录

```
 function CreateCrossDomainMessage(ExecuteExternalWebServiceClass, EndpointAddress, PostData) {
        alert("Testing XDomainRequest");
        var xdr = new XDomainRequest();
        xdr.open("POST", EndpointAddress); // Does not open on clients computer, works on their servers ????
        xdr.timeout = 2000;
        xdr.ontimeout = function () {
            alert("ontimeout");
        };
        xdr.onerror = function () {
            alert("onerror");
        };
        xdr.onload = function () {
            alert("onload");
        };
        xdr.send(PostData); 
```

// new CrossDomainMessage(ExecuteExternalWebServiceClass, EndpointAddress, PostData); }

# c# - Can Generics in base class be specified in the parent class

> ID：10523875
> 
> 赞同：1
> 
> 时间：2012-05-09T20:49:13.773
> 
> 标签：c#, generics

I have a base class that has methods that use a generic type in C#, I then have other classes that inherit from these, I want to specify the type in the parent class to avoid angle brackets everywhere...

Here's a sample method from my base class class CBaseHome

```
public List<T> fetchAll<T>(CBaseDb db, bool includeEmpty = true) where T : CBaseTable, new()
{
    List<T> retVal = new List<T>();
    ...
    return retVal;
} 
```

I the have a parent class that inherits from this class, (without overriding this function)

In the class that then consumes this I have the following code...

```
List<student> students = new limxpoDB.Home.student().fetchAll<student>(db, false); 
```

so the Home.student class here inherits the CBaseHome class, and student inherits the CBaseTable...

I'd like to be able to say in the Home.student class that the only valid generic type for that class is student so that my consuming code looks like...

```
List<student> students = new limxpoDB.Home.student().fetchAll(db, false); 
```

I realise here that the difference is minute, but I also use this library in some VB>Net code where it looks terrible...

Any ideas?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:59:30.953

Generic type parameters on a method cannot be imposed by a child class. So if I have:

```
public class Parent {
    public List<T> GetStuff<T>() { ... }
} 
```

I can not do:

```
public class Child : Parent {
    // This is not legal, and there is no legal equivalent.
    public List<ChildStuff> GetStuff<ChildStuff>() { ... }
} 
```

What you can do is make the parent *class* generic, rather than it's method:

```
public class Parent<T> {
    public List<T> GetStuff() { ... }
}

public class Child : Parent<ChildStuff> {
    // GetStuff for Child now automatically returns List<ChildStuff>
} 
```

# android - Android A打开B返回两次返回A，但第三次崩溃

> ID：10523878
> 
> 赞同：0
> 
> 时间：2012-05-09T20:49:27.597
> 
> 标签：android, webview, expandablelistview, back, tabview

好的，所以我的应用程序有一个带有 3 个选项卡的 Tabview。我的两个标签没有问题。第一个只是打开一个 web 视图，它可以工作，第三个显示一系列图片按钮，这些按钮依次打开有选项的页面，它工作正常。

我的第二个问题是。它有一个可扩展的列表视图，有 4 个父母，每个父母有不同数量的孩子。我有可扩展列表视图工作，每个孩子在 web 视图中打开一个不同的页面。这部分工作得很好。一旦我打开页面，问题就出现了，我可以单击后退按钮并返回到我想要的第二个选项卡，然后如果我选择另一个链接，它工作正常，后退按钮让我返回。但是如果我打开第三个，当我按下后退按钮时它会崩溃。

```
case 1:
                        setContentView(R.layout.viewer);
                        content = new String(
                                "insert web page here");
                        showContent = new Intent(getApplicationContext(),
                                Viewer.class);
                        showContent.setData(Uri.parse(content));
                        replaceContentView("Called", showContent);
                        break; 
```

那是其中一页。replaceContentView 方法如下：

```
public void replaceContentView(String id, Intent newIntent) {
    // Obtain the view of 'Called' activity using its Intent 'newIntent'
    View view = getLocalActivityManager().startActivity(id,
            newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
            .getDecorView();
    // set the above view to the content of 'Calling' activity.
    this.setContentView(view);
} 
```

而Viewer类如下：

```
public class Viewer extends ActivityGroup {
WebView viewer;
final Context myApp = this;

public void onBackPressed() {

    if (viewer.isFocused() && viewer.canGoBack()) {
        viewer.goBack();
    } else {
        Intent back = new Intent(this, Resources1.class);
        replaceContentView("Called", back);
    }
}

public void replaceContentView(String id, Intent newIntent) {
    // Obtain the view of 'Called' activity using its Intent 'newIntent'
    View view = getLocalActivityManager().startActivity(id,
            newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
            .getDecorView();

    // set the above view to the content of 'Calling' activity.
    this.setContentView(view);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewer);
    Intent launchingIntent = getIntent();
    String content = launchingIntent.getData().toString();
    viewer = (WebView) findViewById(R.id.webView);
    viewer.setWebViewClient(new myWebClient());
    viewer.getSettings().setJavaScriptEnabled(true);
    viewer.getSettings().setSupportMultipleWindows(true);
    viewer.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    viewer.getSettings().setSupportZoom(true);
    //viewer.setWebChromeClient(new MyWebChromeClient());
    viewer.loadUrl(content);
    viewer.requestFocus();
}

public class myWebClient extends WebViewClient {
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {

        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {

        view.loadUrl(url);
        return true;
    }
} 
```

如果您需要更多信息，我已经发布了我认为相关的代码。我已经为此工作了几天，无法弄清楚。

添加日志猫：

```
05-10 08:41:06.560: I/dalvikvm(13342): threadid=1: stack overflow on call to Landroid/text/Layout;.draw:VLLLI
05-10 08:41:06.560: I/dalvikvm(13342):   method requires 276+20+52=348 bytes, fp is 0x4003a400 (256 left)
05-10 08:41:06.560: I/dalvikvm(13342):   expanding stack end (0x4003a300 to 0x4003a000)
05-10 08:41:06.560: I/dalvikvm(13342): Shrank stack (to 0x4003a300, curFrame is 0x4003dc10)
05-10 08:41:06.560: D/AndroidRuntime(13342): Shutting down VM
05-10 08:41:06.560: W/dalvikvm(13342): threadid=1: thread exiting with uncaught exception (group=0x40a421f8)

05-10 08:41:06.560: W/dalvikvm(7024): threadid=1: thread exiting with uncaught     exception (group=0x40a421f8)
05-10 08:41:06.580: E/AndroidRuntime(7024): FATAL EXCEPTION: main
05-10 08:41:06.580: E/AndroidRuntime(7024): java.lang.StackOverflowError
05-10 08:41:06.580: E/AndroidRuntime(7024):     at   android.text.BoringLayout.draw(BoringLayout.java:400)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.widget.TextView.onDraw(TextView.java:5088)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.View.draw(View.java:10983)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.widget.ListView.drawChild(ListView.java:3223)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.widget.AbsListView.dispatchDraw(AbsListView.java:2092)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.widget.ListView.dispatchDraw(ListView.java:3218)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.widget.ExpandableListView.dispatchDraw(ExpandableListView.java:230)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.View.draw(View.java:11088)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.widget.AbsListView.draw(AbsListView.java:3398)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.View.draw(View.java:10986)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2887)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.drawChild(ViewGroup.java:2885)
05-10 08:41:06.580: E/AndroidRuntime(7024):     at android.view.ViewGroup.dispatchDraw(ViewGrou
05-10 08:41:08.310: I/Process(7024): Sending signal. PID: 7024 SIG: 9 
```

# ajax - 如何使 Flask/保持 Ajax HTTP 连接处于活动状态？

> ID：10523879
> 
> 赞同：12
> 
> 时间：2012-05-09T20:49:32.310
> 
> 标签：ajax, flask, keep-alive, werkzeug

我有一个 jQuery Ajax 调用，如下所示：

```
 $("#tags").keyup(function(event) {
      $.ajax({url: "/terms",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify({"prefix": $("#tags").val() }),
        dataType: "json",
        success: function(response) { display_terms(response.terms); },
      }); 
```

我有一个像这样的 Flask 方法：

```
@app.route("/terms", methods=["POST"])
def terms_by_prefix():
    req = flask.request.json
    tlist = terms.find_by_prefix(req["prefix"])
    return flask.jsonify({'terms': tlist}) 
```

tcpdump 显示 HTTP 对话框：

```
POST /terms HTTP/1.1
Host: 127.0.0.1:5000
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: application/json, text/javascript, */*; q=0.01
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Type: application/json; charset=UTF-8
X-Requested-With: XMLHttpRequest
Referer: http://127.0.0.1:5000/
Content-Length: 27
Pragma: no-cache
Cache-Control: no-cache

{"prefix":"foo"} 
```

但是，Flask 回复时没有保持活动状态。

```
HTTP/1.0 200 OK
Content-Type: application/json
Content-Length: 445
Server: Werkzeug/0.8.3 Python/2.7.2+
Date: Wed, 09 May 2012 17:55:04 GMT

{"terms": [...]} 
```

难道真的没有实现keep-alive吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-09-14T02:50:03.763

默认的 request_handler 是 WSGIRequestHandler。

之前`app.run()`，添加一行， `WSGIRequestHandler.protocol_version = "HTTP/1.1"`

别忘了`from werkzeug.serving import WSGIRequestHandler`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-10T05:50:44.233

Werkzeug 的集成 Web 服务器基于 Python 标准库的 BaseHTTPServer 构建。如果您将其 HTTP 协议版本设置为 1.1，BaseHTTPServer 似乎支持 Keep-Alives。

Werkzeug 不这样做，但如果你准备好侵入 Flask 用来实例化 Werkzeug 的 BaseWSGIServer 的机器，你可以自己做。查看`Flask.run()`哪些调用`werkzeug.serving.run_simple()`。你必须做的归结为`BaseWSGIServer.protocol_version = "HTTP/1.1"`.

我还没有测试解决方案。我想你确实知道 Flask 的 Web 服务器应该只用于开发。

# android - GPS 在异步任务中不起作用

> ID：10523880
> 
> 赞同：1
> 
> 时间：2012-05-09T20:49:38.853
> 
> 标签：android, gps, android-asynctask, locationmanager

我已经实现了一个简单的 GPS 程序，它获取坐标并将它们显示在屏幕上。当我尝试改进此设计并实现异步任务时，GPS 似乎由于某种原因无法工作。将异步任务与 GPS 一起使用是否存在一些问题？这是我的代码：

```
private class DownloadTask extends AsyncTask<String, Void, Object> {
        protected Object doInBackground(String... args) {
            Log.i("MyApp", "Background thread starting");

            LocationManager mLocationManager;
            Gpslistener Gpslistener;

            Gpslistener = new Gpslistener();

            try{

               mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

               mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,Gpslistener);

            }catch (Exception e) {

                test_gps = true;
           }

        return null;
    }

    protected void onPostExecute(Object result) {

        if(test_gps == true){
            if (ParkingActivity.this.progressDialog != null) {
                ParkingActivity.this.progressDialog.dismiss();
            }               
            AlertMessage("GPS Error", "Unable to get location");
        }

public class Gpslistener implements LocationListener
{
        @Override
        public void onLocationChanged(Location loc)
        {
            loc.getLatitude();
            loc.getLongitude();
        }

        @Override
        public void onProviderDisabled(String provider)
        {       
        }

        @Override
        public void onProviderEnabled(String provider)
        {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras)
        {
        }
    } 
```

每次我运行它时，它总是会捕获一个异常。GPS 权限在清单中设置，我总是使用不同的应用程序来确保 GPS 连接在线，因此我将这些作为潜在错误排除了。老实说，我想不出其他任何事情，没有异步任务它可以完美运行！非常感谢任何帮助，谢谢！

*编辑* 了我的异常 logcat：

```
05-09 22:56:20.199: E/EXCEPTION:(8874): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
05-09 22:56:20.199: E/EXCEPTION:(8874): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
05-09 22:56:20.199: E/EXCEPTION:(8874):     at android.os.Handler.<init>(Handler.java:121)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at android.location.LocationManager$ListenerTransport$1.<init>(LocationManager.java:173)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at android.location.LocationManager$ListenerTransport.<init>(LocationManager.java:173)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at android.location.LocationManager._requestLocationUpdates(LocationManager.java:579)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at android.location.LocationManager.requestLocationUpdates(LocationManager.java:446)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at stefan.testservice.ParkingActivity$DownloadTask.doInBackground(ParkingActivity.java:163)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at stefan.testservice.ParkingActivity$DownloadTask.doInBackground(ParkingActivity.java:1)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-09 22:56:20.199: E/EXCEPTION:(8874):     at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T21:16:35.430

你不能那样做。线程一`doInBackground()`返回就死了。GPS 监听器是一个 Handler，它需要一个`Looper`线程来操作。在开始时`doInBackground()`您需要调用`Looper.prepare()`，然后在结束时调用`Looper.loop()`。它将永远循环，直到您调用`quit()`线程的`Looper`对象。

`AsyncTask`确实是为一次性临时线程设计的，所以我会为此使用普通线程。虽然，我想你没有理由不这样做。您只需要 100% 确保您结束循环，否则即使在用户关闭应用程序后它也将永远运行。

[Java 无法在未调用 Looper.prepare() 的线程内创建处理程序](https://stackoverflow.com/questions/10403858/java-cant-create-handler-inside-thread-that-has-not-called-looper-prepare/10404099#10404099)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:11:51.353

像许多其他东西一样，gps 监听器只能由循环线程（如 ui 线程）监听。最简单的方法是通过 ui 线程来实现。

此外，gps 侦听器的名称也不是无缘无故的。只有当它获得一个位置（这可能需要时间）时，它才会调用方法“onLocationChanged”。你不需要为此设置 asyncTask ，因为所有对“requestLocationUpdates”的调用都是异步的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T04:30:52.293

如果您想要一种肮脏且不那么性感的方式：

```
mLocationManager = (LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
Looper.prepare();
Looper.loop();
if(mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){    
  mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, GPS_MINIMUM_TIME, GPS_MINIMUM_DISTANCE, MyFragment.this);
}
Looper.myLooper().quit(); 
```

基本上，它使当前线程成为将在其上执行消息的主线程，不久您就放弃了该线程作为主线程。我不确定这样做的后果。

# c# - 不能隐式转换类型“十进制？” 为“十进制”。

> ID：10523885
> 
> 赞同：13
> 
> 时间：2012-05-09T20:50:11.250
> 
> 标签：c#, casting, dbnull, explicit-conversion

sdr 是我的 sqldatareader，我想检查十进制类型的 curPrice 值是否为空。

`inrec.curPrice = sdr.IsDBNull(7) ? (decimal?)null : sdr.GetDecimal(7);`

这是我收到的错误消息：

> 不能隐式转换类型“十进制？” 为“十进制”。存在显式转换（您是否缺少演员表？）

我哪里错了，请有人告诉我。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-09T20:52:20.327

`decimal?`表示它是一个可以为[空](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)的小数；您必须使用该`Value`属性来获取实际值（如果存在，则通过 确定`HasValue`）。

我假设`curPrice`是一个不可为空的小数，在这种情况下，您还需要找出比`null`三元运算符的真实方面更好的返回值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-09T21:00:11.730

要么转换`curPrice`为可空，要么使用可空类型的 .Value 属性。

如果`curPrice`是一个类的属性，那么

```
public decimal? curPrice
{
   get;
   set;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-29T18:58:05.070

```
inrec.curPrice = sdr.GetValueOrDefault(0m) 
```

由于左侧 ( `Price`) 不允许，`null`因此您不能将其值设置为可能的值`null`。因此，使用`.GetValueOrDefault(decimal defaultValue)`时返回一个默认值`null`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-09T21:02:19.237

如何将`decmial?`类型转换为`decimal`？

`inrec.curPrice`当`sdr.GetDecmial(7)`为空 时，您必须拥有您喜欢的价值。

```
inrec.curPrice = sdr.GetDecimal(7) ?? 0M; 
```

我假设如果返回的内容为空，您会想要使用 0。如果不更改`0M`为其他十进制值。

--- 重播后更新

怎么样`inrec.curPrice = sdr.IsDBNull(7) ? 0M : sdr.GetDecimal(7);`？

# php - 替换模式内的所有匹配项

> ID：10523887
> 
> 赞同：10
> 
> 时间：2012-05-09T20:50:20.040
> 
> 标签：php, regex, preg-replace, pcre

我有一个这样的字符串

```
{{ some text @ other text @ and some other text }} @ this should not be replaced {{ but this should: @ }} 
```

我想让它变成

```
{{ some text ### other text ### and some other text }} @ this should not be replaced {{ but this should: ### }} 
```

我想这个例子足够直截了当，我不确定我能否更好地用文字解释我想要实现的目标。

我尝试了几种不同的方法，但都没有奏效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T21:22:53.740

这可以通过调用简单字符串替换的正则表达式来实现：

```
function replaceInsideBraces($match) {
    return str_replace('@', '###', $match[0]);
}

$input = '{{ some text @ other text @ and some other text }} @ this should not be replaced {{ but this should: @ }}';
$output = preg_replace_callback('/{{.+?}}/', 'replaceInsideBraces', $input);
var_dump($output); 
```

我选择了一个简单的非贪婪正则表达式来查找您的大括号，但您可以选择更改它以提高性能或满足您的需要。

匿名函数将允许您参数化您的替换：

```
$find = '@';
$replace = '###';
$output = preg_replace_callback(
    '/{{.+?}}/',
    function($match) use ($find, $replace) {
        return str_replace($find, $replace, $match[0]);
    },
    $input
); 
```

文档： http: [//php.net/manual/en/function.preg-replace-callback.php](http://php.net/manual/en/function.preg-replace-callback.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T21:49:40.037

另一种方法是使用正则表达式`(\{\{[^}]+?)@([^}]+?\}\})`。您需要运行几次以匹配大括号`@`内的多个 s ：`{{``}}`

```
<?php

$string = '{{ some text @ other text @ and some other text }} @ this should not be replaced {{ but this should: @ }}';
$replacement = '#';
$pattern = '/(\{\{[^}]+?)@([^}]+?\}\})/';

while (preg_match($pattern, $string)) {
    $string = preg_replace($pattern, "$1$replacement$2", $string);
}

echo $string; 
```

哪个输出：

> {{ some text ### other text ### and some other text }} @ this 不应该被替换 {{ but this should: ### }}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T20:58:47.017

您可以使用 2 个正则表达式来完成。第一个选择 和 之间的所有文本`{{`，`}}`第二个替换`@`为`###`。可以像这样使用 2 个正则表达式：

```
$str = preg_replace_callback('/first regex/', function($match) {
    return preg_replace('/second regex/', '###', $match[1]);
}); 
```

现在您可以制作第一个和第二个正则表达式，自己尝试一下，如果您不明白，请在这个问题中提问。

# jquery - 如何使用同位素图像演示，但包括过滤

> ID：10523889
> 
> 赞同：1
> 
> 时间：2012-05-09T20:50:36.647
> 
> 标签：jquery, jquery-isotope

我正在为自己创建一个投资组合网站。我正在使用同位素 JQuery 图像演示[http://isotope.metafizzy.co/demos/images.html](http://isotope.metafizzy.co/demos/images.html)作为我页面上同位素布局的模板，但我想添加一些包含在其中的过滤功能其他演示页面。我尝试简单地从具有过滤选项的演示中复制似乎是选项代码，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:28:11.350

我希望您仍在从事此项目，如果没有，这可能会帮助其他想要将图像放入同位素的人。我仍在尝试找出组合多个过滤器的方法，但这里是我如何在我的数据上使用一组过滤器。让我们从jquery代码开始：

```
<script type="text/javascript">

$(document).ready(function(){
    var $container = $('#content');

$container.isotope({
    filter: '*',
    animationOptions: {
    duration: 350,
    easing: 'linear',
    queue: false,}
});

    $('#prodnav a').click(function(){
      var selector = $(this).attr('prod-filter');
      $container.isotope({ 
      filter: selector,
      animationOptions: {
      duration: 350,
      easing: 'linear',
      queue: false,
   }
 });
   return false;
 });

</script> 
```

这是导航列表：

```
<div id="prodnav">
<ul>
<li><a href="" prod-filter="*">All Products</a></li>
<li><a href="" prod-filter=".greenwidgetbox">Green Widget</a></li>
<li><a href="" prod-filter=".bluewidgetbox">Blue Widget</a></li>
<li><a href="" prod-filter=".orangewidgetbox">Orange Widget</a></li>
</ul>
</div> 
```

最后是单个产品图像代码。我为同位素使用了缩略图，并在单击时使用 shadowbox 在模态窗口中最大化图像。

```
<div class="greenwidgetbox">
    <h2 class="box-title">Shiny Green Widget</h2>
      <div class="box-img">
        <a href="images/shiny-green-widget.png" rel="shadowbox" title="Shiny Green Widget"><img src="images/shiny-green-widget-thumb.png"/></a>
       </div>
</div> 
```

# sql - T-SQL 过程 - 过滤参数为 Object/CLR/Xml/UDT

> ID：10523894
> 
> 赞同：9
> 
> 时间：2012-05-09T20:51:14.610
> 
> 标签：sql, sql-server-2008, tsql, parameters, filtering

**Cliffs：是否存在将标准“过滤器”类型传递给存储过程以封装 stardate/enddate/pagesize/pagenum 参数的已知模式？**

不确定这个问题的正确位置。我正在探索将过滤对象参数传递给存储过程的想法，该存储过程封装了我们常见的过滤参数（开始日期、结束日期、页码、页面大小、整数列表等）。这样做的原因是为了减少在我们的过程中散布的类似参数和样板 SQL 的数量。这将为我们从一开始就为每个过程提供一个更标准的界面和起点。我无法找到有关该主题的太多信息。

我注意到的模式 - 在第一次构建大多数 SP 时，它们从 where 子句中使用的单个 id 参数开始。稍后，您可能需要为日期范围参数添加参数（开始日期、结束日期或动态范围“ytd、mtd、dtd”）。如果数据集足够大，您可能还需要为服务器端分页引入 pagesize/pagenum。一段时间后，您可能会意识到您需要一个 id 列表而不是单个 id 的结果，因此您添加了一个 CSV 或 XML 参数来封装这些 ID。

最终，许多存储过程最终都会有许多类似的样板文件和（希望）相同的参数来处理这些标准过滤参数。我正在尝试研究将封装的过滤器对象参数传递给我的程序的已知模式，理想情况下，该模式将在 C# 端进行强类型化。这在管理一组为报告提供动力的过程时特别有用，这些报告都需要相同的过滤选项（除了特定于报告的查询参数之外）。

我的目标是将所需的参数数量减少到 WHERE 子句所需的最低限度，并创建一个标准机制，用于将通用过滤选项传递到过程中并在过程中使用这些值。这如何通过 XML 或 CLR 或 UDT 参数来实现？

对于这个问题的上下文，我通过 C# 2.0 中的 ADO.Net 使用 SQL Server 2008。不幸的是，LINQ/EF 目前还不是这个项目的选项，我们必须坚持使用现有的 RDBMS。如果有一种已知的模式需要改变技术，我会很想知道它。

**编辑**：感谢到目前为止的答复。我已经添加了 50 分的赏金，我将再运行几天以尝试促进更多讨论。如果我的问题不够清楚，请发表评论..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T02:20:44.813

我个人认为你想太多或试图减少不需要减少的东西。您最好不要单独保留存储过程参数，或者尝试创建一些可以将参数集附加到命令对象的基类和辅助函数。

但是，话虽如此，我会在那里为您的问题提供一个解决方案，看看它是否符合您的需求：

我建议使用 TSQL 用户定义类型。创建一种或多种类型。也许一个用于日期范围，一个用于分页和排序。我使用类似的过程将多行数据传递给存储过程。（其中一些代码可能需要稍微调整一下，因为我只是在修改我已经编写的一些代码，而且我已经有一段时间没有使用 DataTable 字段了。）

最终，这一切只是缩短了应用程序方法和匹配存储过程中的参数列表。存储过程将负责提取或连接表变量中的信息。下面列出的类确实提供了在 .NET 应用程序端保持这些参数强类型的能力。

```
if not exists (select * from INFORMATION_SCHEMA.DOMAINS where DOMAIN_SCHEMA = 'dbo' and DOMAIN_NAME = 'DateRange' and DATA_TYPE = 'table type')
begin

    create type dbo.DateRange as table 
    (
        StartDate datetime2 null
        ,EndDate datetime2 null
    )

end
go

if not exists (select * from INFORMATION_SCHEMA.DOMAINS where DOMAIN_SCHEMA = 'dbo' and DOMAIN_NAME = 'Paging' and DATA_TYPE = 'table type')
begin

    create type dbo.Paging as table 
    (
        PageNumber int null
        ,PageSize int null
        ,SortField sysname null
        ,SortDirection varchar(4) null
    )

end
go 
```

SQL 用户定义类型可以表示为 .NET 应用程序中的强类型对象。从基类开始：

```
 Imports System
    Imports System.Data
    Imports System.Data.SqlClient
    Imports System.Runtime.Serialization

    Namespace SqlTypes

        <Serializable()> _
        <System.ComponentModel.DesignerCategory("Code")> _
        Public MustInherit Class SqlTableTypeBase
            Inherits DataTable

            Public Sub New()

                MyBase.New()
                Initialize()

            End Sub

            Public Sub New(ByVal tableName As String)

                MyBase.New(tableName)
                Initialize()

            End Sub

            Public Sub New(ByVal tableName As String, ByVal tableNamespace As String)

                MyBase.New(tableName, tableNamespace)
                Initialize()

            End Sub

            Protected Sub New(ByVal info As SerializationInfo, ByVal context As StreamingContext)

                MyBase.New(info, context)

            End Sub

            ''' <summary>
            ''' Implement this method to create the columns in the data table to match the SQL server user defined table type
            ''' </summary>
            ''' <remarks></remarks>
            Protected MustOverride Sub Initialize()

            Public Function CreateParameter(parameterName As String) As SqlParameter

                Dim p As New SqlParameter(parameterName, SqlDbType.Structured)
                p.Value = Me

                Return p

            End Function

        End Class

    End Namespace 
```

为 SQL 类型创建一个实现：

```
Imports System
Imports System.Data
Imports System.Runtime.Serialization

Namespace SqlTypes

    <Serializable()> _
    <System.ComponentModel.DesignerCategory("Code")> _
    Public Class DateRange
        Inherits SqlTableTypeBase

        Public Sub New()

            MyBase.New()

        End Sub

        Public Sub New(ByVal tableName As String)

            MyBase.New(tableName)

        End Sub

        Public Sub New(ByVal tableName As String, ByVal tableNamespace As String)

            MyBase.New(tableName, tableNamespace)

        End Sub

        Protected Sub New(ByVal info As SerializationInfo, ByVal context As StreamingContext)

            MyBase.New(info, context)

        End Sub

        'TODO: throw some more overloaded constructors in here...

        Public Sub New(startDate As DateTime?, endDate As DateTime?)

            MyBase.New()

            Me.StartDate = startDate
            Me.EndDate = endDate

        End Sub

        Public Property StartDate As DateTime?
            Get
                Return CType(Me.Rows(0)(0), DateTime?)
            End Get
            Set(value As DateTime?)
                Me.Rows(0)(0) = value
            End Set
        End Property

        Public Property EndDate As DateTime?
            Get
                Return CType(Me.Rows(0)(1), DateTime?)
            End Get
            Set(value As DateTime?)
                Me.Rows(0)(1) = value
            End Set
        End Property

        Protected Overrides Sub Initialize()

            Me.Columns.Add(New DataColumn("StartDate", GetType(DateTime?)))
            Me.Columns.Add(New DataColumn("EndDate", GetType(DateTime?)))

            Me.Rows.Add({Nothing, Nothing})

        End Sub

    End Class

End Namespace 
```

和：

```
Imports System
Imports System.Data
Imports System.Runtime.Serialization

Namespace SqlTypes

    <Serializable()> _
    <System.ComponentModel.DesignerCategory("Code")> _
    Public Class Paging
        Inherits SqlTableTypeBase

        Public Sub New()

            MyBase.New()

        End Sub

        Public Sub New(ByVal tableName As String)

            MyBase.New(tableName)

        End Sub

        Public Sub New(ByVal tableName As String, ByVal tableNamespace As String)

            MyBase.New(tableName, tableNamespace)

        End Sub

        Protected Sub New(ByVal info As SerializationInfo, ByVal context As StreamingContext)

            MyBase.New(info, context)

        End Sub

        'TODO: throw some more overloaded constructors in here...

        Public Sub New(pageNumber As Integer?, pageSize As Integer?)

            MyBase.New()

            Me.PageNumber = pageNumber
            Me.PageSize = pageSize

        End Sub

        Public Sub New(sortField As String, sortDirection As String)

            MyBase.New()

            Me.SortField = sortField
            Me.SortDirection = sortDirection

        End Sub

        Public Sub New(pageNumber As Integer?, pageSize As Integer?, sortField As String, sortDirection As String)

            Me.New(pageNumber, pageSize)

            Me.SortField = sortField
            Me.SortDirection = sortDirection

        End Sub

        Public Property PageNumber As Integer?
            Get
                Return CType(Me.Rows(0)(0), Integer?)
            End Get
            Set(value As Integer?)
                Me.Rows(0)(0) = value
            End Set
        End Property

        Public Property PageSize As Integer?
            Get
                Return CType(Me.Rows(0)(1), Integer?)
            End Get
            Set(value As Integer?)
                Me.Rows(0)(1) = value
            End Set
        End Property

        Public Property SortField As String
            Get
                Return CType(Me.Rows(0)(2), String)
            End Get
            Set(value As String)
                Me.Rows(0)(2) = value
            End Set
        End Property

        Public Property SortDirection As String
            Get
                Return CType(Me.Rows(0)(3), String)
            End Get
            Set(value As String)
                Me.Rows(0)(3) = value
            End Set
        End Property

        Protected Overrides Sub Initialize()

            Me.Columns.Add(New DataColumn("PageNumber", GetType(Integer?)))
            Me.Columns.Add(New DataColumn("PageSize", GetType(Integer?)))
            Me.Columns.Add(New DataColumn("SortField", GetType(String)))
            Me.Columns.Add(New DataColumn("SortDirection", GetType(String)))

            Me.Rows.Add({Nothing, Nothing, Nothing, Nothing})

        End Sub

    End Class

End Namespace 
```

实例化对象并在构造函数中设置值，然后简单地从对象中获取参数，并将其附加到存储过程命令对象的参数集合中。

```
cmd.Parameters.Add(New DateRange(startDate, endDate).CreateParameter("DateRangeParams"))
cmd.Parameters.Add(New Paging(pageNumber, pageSize).CreateParameter("PagingParams")) 
```

**编辑** 由于这个答案围绕着强类型，我想我应该在方法签名中添加一个强类型的例子：

```
'method signature with UDTs
Public Function GetMyReport(customParam1 as Integer, timeFrame as DateRange, pages as Paging) as IDataReader

'method signature without UDTs
Public Function GetMyReport(customParam1 as Integer, startDate as DateTime, endDate as DateTime, pageNumber as Integer, pageSize as Integer) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T07:24:06.400

我们也面临这个问题。通过在数据库的可编程性/类型部分创建用户定义的表类型来解决。

[用户定义的表类型 SQL Server 2008 R2](http://msdn.microsoft.com/en-us/library/bb522526%28v=sql.105%29.aspx)

当调用不同的存储过程和函数时，该表在所有应用程序中使用。我们在 appl 客户端（vb.net 2010）以编程方式填写此表，然后将其作为参数传递。在存储过程中，我们只是读取表并执行我们需要执行的操作、过滤、处理等。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T11:57:32.717

在我看来，这个问题没有真正漂亮的解决方案。最大的问题是大多数情况下一些参数可以为空，但有些不是（不管参数是来自表值参数还是 XML 参数）。然后它以类似于以下的 SQL 结束：

```
Declare @Col1Value int = null
Declare @Col2Value int = null
Select * 
From dbo.MyTable
where (@Col1Value is Null Or Col1 = @Col1Value)
    And (@Col2Value is Null Or Col2 = @Col2Value) 
```

当然，它的效率不高+查询计划目前还不是最好的..

为了解决这个问题，动态 SQL 可以提供很大帮助。在这种情况下，尽管应该非常仔细地考虑用户权限（可以使用 Execute As someProxyUser、Certificates）。

然后可以使用一个输入 XML 参数创建过程，您可以在其中传递所需的所有参数，然后生成 SQL。但仍然 - 这不是很好的做事方式，因为当 SQL 变得更复杂时，会有很多编码涉及..例如，如果您从多个表中选择数据，并且其中多个表中存在相同的列..

总而言之，我认为这个问题没有很好的解决方案。使用实体框架和传递参数的经典方式:)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T13:04:27.437

我将使用 XML 作为参数并添加一些 UDF 来帮助解压缩您感兴趣的 XML 部分。标量值 UDF 用于单值参数，表值 UDF 用于列表。

在查询中嵌入 XML 往往会使查询优化器感到困惑，如果它最终出现在 where 子句或连接中，那么使用 UDF*可能*会成为性能杀手，因此我不会在查询本身中使用 XML 或 UDF。我首先将 XML 中的值获取到局部变量、表变量或临时表，然后在查询中使用这些值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-21T16:55:40.663

我遇到了类似的情况，我发现 UDT 工作得非常完美。我们从一个非常相似的问题开始：“获取此帐户的数据”，然后变成“获取这些帐户的数据”，然后是“使用这些条件”等。我们使用 UDT 而不是传递 XML 字符串 - 一旦您进入 SP ，您可以直接从 UDT 中加入，并且 ADO.NET 支持 UDT，因此它非常简单。我们将数十万行从 UDT（大量 upsert）传递到我们的 SP，性能并没有成为问题，但有一个例外：当您发送这么多行时，永远不要尝试跟踪查询 - SQL server 中的线程调度器会爆炸。

使用用户定义表类型时要注意的一件事：出于某种原因，Microsoft 认为阻止您更改它们是一个好主意，您只能删除/添加它们。然后其他人认为如果某些东西依赖于它们，最好阻止你丢弃它们，所以如果你手动更改它们，你最终会经历一个非常痛苦的过程来丢弃/重新组合它们。

我们没有将所有参数封装到单个 UDT 中，只是因为我们的需求因过程而异。因此，当我们有事物列表时，我们使用 UDT 作为该参数，但我可以很容易地看到 One UDT To Rule Them All 很有用，它有一些方便的函数来提取众所周知的值，如日期。我鄙视多次编写相同的代码，这肯定会以较小的成本缩小您的代码库，从而增加复杂性。一个附带的好处是迫使所有开发人员坚持一种标准的做事方式，这在关键时间到来时并不总是强制执行。您还将在数据层中为代码重用开辟一些不错的机会。

# xml - VB.NET XPathDocument.CreateNavigator 抛出“debuggerDisplayProxy”错误

> ID：10523900
> 
> 赞同：1
> 
> 时间：2012-05-09T20:51:29.267
> 
> 标签：xml, vb.net, xpath, ms-office, xpathnavigator

我是新手，正在学习教程。我对以下代码有一个变体：

```
Dim xDoc As XPathDocument
Dim xNav As XPathNavigator

xDoc = New XPathDocument("xxxxxxx.xml")
xNav = xDoc.CreateNavigator() 
```

但是，“CreateNavigator”返回：*“debuggerDisplayProxy”是一种类型，不能用作表达式。*

我用谷歌搜索并没有发现任何东西（尽管我不确定要寻找什么）。这似乎是一些基本的东西，它阻止我继续做很多我知道有效的其他东西！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T00:15:16.687

这不是真正的错误，调试器对类的属性有问题：

```
<DebuggerDisplay("{debuggerDisplayProxy}")> _
Public MustInherit Class XPathNavigator
    '' etc..
End Class 
```

名称拼写错误，应该是“DebuggerDisplayProxy”，大写 D。出于某种原因，这只会在 VB.NET 中出错，这在 C# 中不是问题，所以这可能是它尚未修复的原因。只需继续单击 [+] 即可查看对象的内部成员。继续前进，您的代码没有问题。

我将此作为错误报告提交给[Connect](https://connect.microsoft.com/VisualStudio/feedback/details/741440/xpathnavigator-has-bad-debuggerdisplayattribute)。

# google-apps-script - 以编程方式创建触发器有时会失败

> ID：10523904
> 
> 赞同：3
> 
> 时间：2012-05-09T20:51:37.540
> 
> 标签：google-apps-script

我必须在我的谷歌电子表格中设置很多触发器来更新一些工作表。

为了避免一项痛苦的任务，我手动设置了一个触发器，该触发器以编程方式设置所需的其他触发器，根据任务（批处理等......）

好吧，这是我调用来创建这些触发器的函数

```
function createTriggers(sheet, hour){
  var nbTrigger = sheet.getLastColumn() * sheet.getLastRow() / 1100 + 1 ;
  var buffHour = new Date().getHours();
  var min = new Date().getMinutes()+10;
  if(min >=60){
    min = min % 60;
    buffHour++;
    if(buffHour>=24){
      buffHour = buffHour % 24;
    }
  }
  //Browser.msgBox(buffHour+"h"+min);
  var ok = false;
  var cpt = 0;
  do {
    try {
     ScriptApp.newTrigger("triggered").timeBased().atHour(new Date().getHours()).nearMinute(Math.abs(1)).everyDays(1).create();
      ok = true;
    } catch(e) {
      Logger.log(e);
      Utilities.sleep(1000);
      cpt++;
    } 
  }while(!ok && cpt<10);

  if(cpt>10){
    throw "Was unable to create a trigger...";
  }

  for(var i = 0; i<nbTrigger; i++){
    ok = false;
    cpt = 0;
    do {
      try {
        var trigger = ScriptApp.newTrigger("update").timeBased().atHour(buffHour).nearMinute(Math.abs(min)).everyDays(1).create();
        ok = true;
      } catch(e) {
        Logger.log(e);
        Utilities.sleep(1000);
        cpt++;
      }
    } while(!ok && cpt<10);

    if(cpt>10){
      throw "Was unable to create a trigger...";
    }

    Utilities.sleep(10000);
    min +=7;
    if(min >= 60){
      buffHour++;
      min = 0;
      if(buffHour == 24){
        buffHour = 0;
      }
    }
  }
} 
```

因此，我必须将触发器的创建放入 try catch 块中：

```
Wed May 09 13:36:41 PDT 2012 INFO: Exception: Invalid value -2 for field MINUTE, should be between [Range:0, 59]
Wed May 09 13:36:42 PDT 2012 INFO: Exception: Invalid value -8 for field MINUTE, should be between [Range:0, 59]
Wed May 09 13:36:43 PDT 2012 INFO: Exception: Invalid value -7 for field MINUTE, should be between [Range:0, 59]
Wed May 09 13:36:44 PDT 2012 INFO: Exception: Invalid value -7 for field MINUTE, should be between [Range:0, 59] 
```

它从何而来 ？？为什么不是每次都发生？？我能做些什么来避免这种情况？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:05:13.617

感谢您提出这个问题 - 这是 ClockTriggerBuilder.nearMinute() 方法中的一个错误。我已经在问题跟踪器中为您提出了它：[http](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1320) ://code.google.com/p/google-apps-script-issues/issues/detail?id=1320 。如果您为它加注星标，您将了解它的进度。

As a workaround in the meantime, pass minute values to the nearMinute() method that are between 8 and 52, inclusive.

# python - SSLCertificateError - 尝试从 facebook 获取访问令牌时出现“握手操作超时”

> ID：10523906
> 
> 赞同：3
> 
> 时间：2012-05-09T20:51:51.607
> 
> 标签：python, django, facebook, google-app-engine

我正在构建一个应用程序，它使用 javascript 对用户进行身份验证，然后从 cookie 中读取 facebook signed_request 信息，以获取用于服务器的访问令牌。我一直在 ssl 握手中遇到超时错误。

这是我正在使用的代码

```
 logger.debug("authenticate with %s" % facebook_id)
     payload = {'client_id': settings.FACEBOOK_APP_ID,
                'client_secret': settings.FACEBOOK_APP_SECRET,
                'code': code ,
                'redirect_uri': settings.FACEBOOK_DEFAULT_REDIRECT_URI}
     url = 'https://graph.facebook.com/oauth/access_token?' + urllib.urlencode(payload)
     access_token, status, headers = urlfetch.fetch(
                                        url=url,
                                        deadline=30,
                                        validate_certificate=False
                                     )
     logger.debug("recieved access token from fb %s" % access_token) 
```

失败并出现此错误：

```
DEBUG    2012-05-09 21:27:33,956 backends.py:24] authenticate with 546941722
DEBUG    2012-05-09 21:27:33,956 urlfetch_stub.py:317] Making HTTP request: host = graph.facebook.com, url = https://graph.facebook.com/oauth/access_token?client_secret=999&code=999&client_id=229985173769038&redirect_uri=http%3A%2F%2Fdev.bitesizedbeautyapp.appspot.com%2F, payload = , headers = {'Host': 'graph.facebook.com', 'Accept-Encoding': 'gzip', 'User-Agent': 'AppEngine-Google; (+http://code.google.com/appengine)'}
ERROR    2012-05-09 21:28:04,130 __init__.py:63] Exception in request:
Traceback (most recent call last):
  File "/work/glow/bitesizedbeauty/django/core/handlers/base.py", line 89, in get_response
    response = middleware_method(request)
  File "/work/glow/bitesizedbeauty/bitesizedbeautyapp/facebook_glue/middleware.py", line 27, in process_request
    user = authenticate(facebook_id = fb_uid, code = code)
  File "/work/glow/bitesizedbeauty/django/contrib/auth/__init__.py", line 55, in authenticate
    user = backend.authenticate(**credentials)
  File "/work/glow/bitesizedbeauty/bitesizedbeautyapp/facebook_glue/backends.py", line 33, in authenticate
    validate_certificate=False
  File "/usr/local/google_appengine/google/appengine/api/urlfetch.py", line 263, in fetch
    return rpc.get_result()
  File "/usr/local/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 592, in get_result
    return self.__get_result_hook(self)
  File "/usr/local/google_appengine/google/appengine/api/urlfetch.py", line 374, in _get_fetch_result
    raise SSLCertificateError(str(err))
SSLCertificateError: ApplicationError: 6 _ssl.c:488: The handshake operation timed out 
```

**编辑**

按照@BluesRockAddict 的建议更改了代码，仍然出现错误

**编辑#2**

解决了！原来是一些随机的不同的东西。

*   根据 GET 请求的要求将参数添加到 url。（有效载荷仅用于 POST 请求）正如 BlueRockAddict 所建议的那样
*   我正在使用客户端 SDK 对用户进行身份验证，并从 fbsr_ cookie 中读取代码元素。在这种情况下，redirect_uri 应该为空
*   app-engine 中的 urlfetch 不会像我想的那样返回 3 元组。所以我将方法结果分配给单个变量

这是对我有用的代码：

```
def get_auth_token(code=None):
    if not code:
        return Null
    try:
        payload = {'client_id': settings.FACEBOOK_APP_ID,
                   'client_secret': settings.FACEBOOK_APP_SECRET,
                   'code': code,
                   'redirect_uri': ''}

        url = 'https://graph.facebook.com/oauth/access_token?' + urllib.urlencode(payload)
        logging.debug("url going to be called = (%s)" % url)
        result = urlfetch.fetch(
            url=url,
            deadline=10,
            validate_certificate=False
        )
        access_token = result.content
        logging.info("recieved access_token from fb %s" % access_token)
    except SSLCertificateError as error:
        logging.error("SSLCertificateError when accessing oauth/access_token, error = %s " % error)
        return None
    except Exception as error2:
        logging.error("Other Error, error = %s " % error2)
        return None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:10:27.257

`payload`参数只能用于 POST/PUT 请求。由于您使用的是 GET，因此您的有效负载数据需要包含在 URL 中。尝试以下操作：

```
access_token, status, headers = urlfetch.fetch(
   "https://graph.facebook.com/oauth/access_token?" + 
   urllib.urlencode(payload)) 
```

# spotify - 如何在 Spotify 应用程序中禁用上下文（因此上一个/下一个按钮被禁用）

> ID：10523907
> 
> 赞同：0
> 
> 时间：2012-05-09T20:51:52.113
> 
> 标签：spotify

有人在这里问同样的问题。iKendac 回答它。但我需要更多详细信息，但我找不到向问题添加评论的方法，所以我在这里创建了一个新问题。

我希望能够控制Spotify播放的曲目。所以我想禁用上一个和下一个按钮。

似乎解决方案是在不向播放器提供上下文的情况下播放曲目。我做到了，但下一个/上一个没有被禁用。Spotify 作为当前上下文是我加星标的播放列表。

这是一些代码

```
var sp = getSpotifyApi(1);
var models = sp.require('sp://import/scripts/api/models');
var player = models.player;
var pl_starred = models.library.starredPlaylist;

exports.init = init;

function init() {
    var header = document.getElementById("header");
    var index = Math.floor(Math.random()*pl_starred.length)
    var track = pl_starred.get(index);

    if (pl_starred == null) {
        header.innerText = "starred not found";
    } else if (track == null) {
        header.innerHTML = "cannot get track from starred";
    } else {
        header.innerHTML = "starred " + index + "/" + pl_starred.length + " : " + track.name;
    }

    player.play(track,null);
} 
```

**编辑：在 iKenndac 的回答之后进行了一些新的测试**

我尝试将曲目与其上下文分开，但它不起作用。所以我尝试使用硬编码的 URI 加载曲目。所以我没有加载加星标的播放列表。但它也没有工作

这是我的代码

```
function init() {

    var header = document.getElementById("header");

    var player = models.player;

    models.Track.fromURI("spotify:track:3ZfW4Z3MEvd82pv5J0rN2l", function(trackNotInStarred) {
        console.log("Track loaded", trackNotInStarred.name);
        player.play(trackNotInStarred, null);
        header.innerHTML = "starred: " + trackNotInStarred.name;
    }); 
} 
```

**新编辑**：实际上上一个/下一个按钮没有被禁用，但是如果我单击上一个它会重新启动轨道，然后它会跳转到“无轨道”状态，然后上一个/播放/下一个被禁用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:37:42.737

看起来它是从您从已加星标的播放列表中获取曲目的事实推断上下文的。

试试这个将轨道与上下文分开：

```
var player = models.player;
var trackInStarred = pl_starred.get(index);

models.Track.fromURI(trackInStarred.uri, function(trackNotInStarred) {
    console.log("Track loaded", trackNotInStarred.name);
    player.play(trackNotInStarred, null);
}); 
```

# android - 安卓外部存储

> ID：10523908
> 
> 赞同：0
> 
> 时间：2012-05-09T20:51:54.507
> 
> 标签：android, storage

我有一个在外部设备上创建日志文件并将日志文件路径传递给底层 ndk 库进行日志记录的应用程序。

我在创建日志文件之前使用 Environment.MEDIA_MOUNTED.equals(state) 来检查外部存储是否可用于记录。我的问题是如果用户在创建日志文件后将设备安装到计算机上会发生什么？

我的应用程序仍然可以访问日志文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:09:44.127

正如 Drake 在他的评论中所说，当您将手机连接到计算机并选择将其安装为驱动器时，手机将无法使用外部存储。我猜你读过它，但[这里](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)有描述。

# django - django：餐厅菜单的灵活形式？

> ID：10523911
> 
> 赞同：0
> 
> 时间：2012-05-09T20:52:17.713
> 
> 标签：django, django-forms

我正在为餐厅创建一个菜单系统，并且需要能够列出具有灵活属性的菜单项，这些属性有时可以从模型（数据库）中以 django 形式选择。由于项目的数量和属性没有预先定义，它需要灵活并且表单需要能够呈现它。

示例用例：

```
1\. Hawaiian Pizza
   * unselectable attributes: pineapple, ham (we are assuming you can't change this)
   * selectable attributes (all boolean True/False): spicy, extra cheese, extra meat, extra pineapple
   * prices: large - $9.99, extra large - $14.99 
```

这将呈现为：

```
1\. Hawaiian Pizza
Pineapple and Ham
[ ] spicy  [ ] extra cheese  [ ] extra meat  [ ] extra ham

$9.99 { button } 
$14.99 { button } 
```

这使我能够下订单

a) 夏威夷披萨，加上额外的奶酪，额外的肉，让它变得辣！超大号 14.99 美元

或者

b）夏威夷披萨使其变得辛辣。大号 9.99 美元

在理想情况下，我什至会为“额外属性”加价。

**任何人都知道如何获得灵活的属性？...或有关如何实现这一目标的建议？**

这似乎是 Drupal 的理想选择，因为它具有灵活的属性系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:09:17.723

我想您可以使用其他模型将选项与项目连接起来，例如：

```
class Option(models.Model): 
    name = models.CharField(...) # group name for radios, option name for checks
    required = models.BooleanField() # is radio?

class ItemOptions(models.Model):
    item = models.ForeignKey(Item)
    option = models.ForeignKey(Option)
    value = models.CharField(...) # option value
    price = models.DecimalField() # if applied 
```

然后，您只需要为每个可选字段显示一个复选框，然后为每个必需字段显示一个单选按钮（`name`一个选项在几个单选中相同）。然后将所有订单数据放入`PickleField`或`JSONField`添加另一个模型来存储这些关系。

# objective-c - 如何实现字符串 SCAudioStream？- 声音云

> ID：10523914
> 
> 赞同：0
> 
> 时间：2012-05-09T20:52:29.937
> 
> 标签：objective-c, audio, cloud, audio-streaming

我正在使用声音云 sdk，我正在尝试使用他们的库来播放音频流。

我无法找到有关如何使用该类的任何参考。

我将不胜感激您能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:25:03.213

如果你在谈论[这个库](https://github.com/soundcloud/cocoa-api-wrapper)，我可以帮助你。

首先，您应该运行此方法以通过其 ID 获取有关轨道的一些信息：

```
[api performMethod: @"GET" 
            onResource: @"tracks" 
        withParameters: [NSDictionary dictionaryWithObject:trackID forKey:@"ids"] 
               context: @"trackid" 
              userInfo: nil]; 
```

如果您不知道 trackID 并且只有这样的跟踪链接：http://soundcloud.com/go-yoshimura/mikasasukasa [，](http://soundcloud.com/go-yoshimura/mikasasukasa)然后运行此方法：

```
[api performMethod: @"GET" 
            onResource: @"resolve" 
        withParameters: [NSDictionary dictionaryWithObject:songLink forKey:@"url"]
               context: @"songname" 
              userInfo: nil]; 
```

然后你应该实现委托的方法：

```
- (void)soundCloudAPI:(SCSoundCloudAPI *)soundCloudAPI 
    didFinishWithData:(NSData *)data 
              context:(id)context 
             userInfo:(id)userInfo;

- (void)soundCloudAPI:(SCSoundCloudAPI *)soundCloudAPI 
     didFailWithError:(NSError *)error 
              context:(id)context 
             userInfo:(id)userInfo; 
```

在第一种方法中，您应该使用 JSON Parser（JSONKit 或 SBJSON）解析数据。你应该得到 NSDictionary。

```
streamURL = [(NSDictionary *)jsonData objectForKey:@"stream_url"];
streamable = [[(NSDictionary *)jsonData objectForKey:@"streamable"] boolValue]; 
```

如果此轨道是可流式传输的，您可以通过以下方式获取 SCAudioStream：

```
stream = [[SCAudioStream alloc] initWithURL:[NSURL URLWithString:streamURL] authentication:auth]; 
```

您可以通过这种方式在 init 方法中更早地创建身份验证：

```
conf = [SCSoundCloudAPIConfiguration configurationForProductionWithClientID: kSCClientID
                                                                       clientSecret: kSCClientSecret
                                                                        redirectURL: kSCRedirectURL];
auth = [[SCSoundCloudAPIAuthentication alloc] initWithAuthenticationDelegate:self apiConfiguration:conf]; 
```

现在你有了 SCAudioStream。

```
//Playing
[stream play];

//Pause
[srteam pause];

//Seeking
[stream seekToMillisecond:ms startPlaying:YES]; 
```

就这样 ：）

# wpf - WPF 绑定到字段

> ID：10523915
> 
> 赞同：0
> 
> 时间：2012-05-09T20:52:33.823
> 
> 标签：wpf, binding

我已经尝试了几乎所有在谷歌上找到的东西。但没有任何效果。

我有这个 Xaml：

```
<UserControl x:Class="Controller.General.Led"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <Ellipse Name="ellipse" Fill="{Binding ElementName=Led, Path=backColor}" Stroke="Black" StrokeThickness="3">

    </Ellipse>
</Grid> 
```

而这段代码：

```
public partial class Led : UserControl
{
    public Brush backColor = Brushes.Red;

    public Led()
    {
        InitializeComponent();
    }
} 
```

那么为什么这不起作用呢？我也尝试了很多其他解决方案，但没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:07:09.837

这里有一些问题，首先你不能只将 ElementName 设置为一个类。解决此问题的一种快速简便的方法是将用户控件的数据上下文设置为自身，因为它似乎就是您要绑定的属性所在的位置。还将公共变量更改为**属性**（否则绑定不起作用！）

```
public partial class Led : UserControl 
{ 
    public Brush backColor{get; set;}

    public Led()
    {
        InitializeComponent();
        this.DataContext = this;
        backColor = Brushes.Red;
    }
} 
```

接下来只需将您的 xaml 更改为简单地读取...

```
<Ellipse 
   Name="ellipse" 
   Fill="{Binding backColor}" 
   Stroke="Black" 
   StrokeThickness="3"
   /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:40:10.317

使用 时`ElementName=Led`，您是在告诉 WPF 查找名为 的元素`Led`，但您尚未声明具有该名称的元素。

KDiTraglia 的答案是正确的方法，但为您的用户控件设置名称也可以：

```
<UserControl x:Name="Led" ...>
    ....
</UserControl> 
```

# javascript - 安卓、Javascript、犀牛、JSON

> ID：10523916
> 
> 赞同：1
> 
> 时间：2012-05-09T20:52:33.907
> 
> 标签：javascript, android, json, scripting, rhino

在 repo 文件夹中长时间搜索后，我在 http://code.google.com/p/android-scripting/source/browse/rhino/rhino1_7R2.jar 找到了适用于 Android 的[rhino1_7R2.jar](http://code.google.com/p/android-scripting/source/browse/rhino/rhino1_7R2.jar)不幸的是 1_7R3 不存在。

我正在使用的脚本使用 1_7R2 中不存在的 JSON.stringify 函数。Rhino 有 JSON2.js 文件，但我不知道在运行时加载它的正确方法。文档和示例代码很弱。我应该将它作为字符串加载并添加到正在运行的脚本中吗？还是有更好的方法？

我正在使用 JavaScript 在循环中动态评估一些计算。我真的想避免每次调用 javascript 函数时都预先添加 JSON2.js。花了将近一天的时间才发现 Rhino 在最新版本中支持 JSON 对象，并且没有人费心将其移植到 Android。看起来像另一个缺乏支持的开源项目。

我应该放弃并考虑使用 WebView 方法吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:05:41.087

据我了解，您有一些想要由 Rhino 运行的 JavaScript 脚本。如果要加载另一个 JavaScript 文件，可以使用`load`函数：

```
load("/your/path/json2.js"); 
```

之后调用您的脚本可以使用 json2 库。

```
var testStr = '{"test" : {"a": "aval", "b" : "bval"}}';
var jsonObj = JSON.parse(testStr);
var a = jsonObj.test.a; 
```

# c# - 如何访问项目代码元数据？

> ID：10523918
> 
> 赞同：0
> 
> 时间：2012-05-09T20:52:52.517
> 
> 标签：c#, visual-studio, vsx, vspackage

在我的 VSPackage 中，我需要用实际值替换代码中对属性的引用。例如

```
public static void Main(string[] args) {
    Console.WriteLine(Resource.HelloWorld);
} 
```

我想要的是用它的实际值替换“Resource.HelloWorld”——也就是说，找到类 Resource 并获取它的静态属性 HelloWorld 的值。Visual Studio 是否公开任何 API 来处理项目的代码模型？它肯定有一个，因为这与重命名变量的常见任务非常相似。我不想在输出程序集上使用反射，因为它很慢并且会锁定文件一段时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T20:13:32.920

据我所知，没有直接的方法可以做到这一点。从 Visual Studio 中可靠地获取 AST（以及对其进行更改）一直是一个大问题。Rosalyn 项目的部分目标是创建一种统一的方式来执行此操作，因为许多工具窗口都有自己的方式来执行此类操作。

有四种方法可以做到这一点：

1.  符号
2.  FileCodeModel + CodeDOM
3.  罗莎琳 AST
4.  未探索的方法

**符号**

我相信大多数工具窗口（例如 CodeView 和 Code Element Search 之类的东西）都使用从编译构建中创建的符号。这并不理想，因为它的重量有点重并且难以保持同步。您必须缓存符号以使其不慢。使用反射器，您可以看到 CodeView 如何实现这一点。

这种方法使用私有程序集。获取符号的代码如下所示：

```
var compilerHost = new IDECompilerHost();

var typeEnumerator = (from compiler in compilerHost.Compilers.Cast<IDECompiler>()
                                          from type in compiler.GetCompilation().MainAssembly.Types
                                          select new Tuple<IDECompiler, CSharpType>(compiler, type));

foreach (var typeTuple in typeEnumerator)
{
    Trace.WriteLine(typeTuple.Item2.Name);
    var csType = typeTuple.Item2;
    foreach (var loc in csType.SourceLocations)
    {
       var file = loc.FileName.Value;
       var line = loc.Position.Line;
       var charPos = loc.Position.Character;
    }
} 
```

**FileCodeModel + CodeDOM**

您可以尝试使用 EnvDTE 服务来获取与代码文档关联的 FileCodeModel。这将使您获得类和方法。但它不支持获取方法体。你在搞乱有缺陷的 COM。这很难看，因为 COM 对象对 CodeFunction 或 CodeClass 的引用可能会在您不知情的情况下失效，这意味着您必须保留自己的镜像。

**[罗莎琳 AST](http://blogs.msdn.com/b/visualstudio/archive/2011/10/19/introducing-the-microsoft-roslyn-ctp.aspx)**

这允许提供与 FileCodeModel 和 Symbols 相同的功能。我一直在玩这个，它实际上并不算太糟糕。

**未探索的方法**

您可以尝试获取与代码文档关联的底层 LanguageServiceProvider。但这真的很难实现，并且会给您带来很多问题。

# video - 搜索：通用视频格式

> ID：10523919
> 
> 赞同：0
> 
> 时间：2012-05-09T20:52:53.580
> 
> 标签：video, embed, h.264, quicktime

我正在玩 whack-a-mole，试图让嵌入式视频文件在所有主要浏览器上都能正常工作。

它只是一个 Quicktime h.264 .mov 和 .m4v 文件，但如果我使用它在 IE 中不起作用，并且如果我使用 Quicktime JS Prototype 代码，它在 Firefox 中不起作用。当然 .flv 不适用于 IOS。

是否有适用于所有当前主要浏览器“开箱即用”的嵌入格式/方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:48:28.317

我会在 MPEG-4 (MP4) 容器中使用 H.264 编解码器。

![在此处输入图像描述](../Images/bc50b6a630849243cc327dbfa04fc7b6.png)

# c# - 当用户从 Windows Phone 的设置页面中选择它时切换 ResourceDictionary

> ID：10523922
> 
> 赞同：2
> 
> 时间：2012-05-09T20:53:22.550
> 
> 标签：c#, windows-phone-7, xaml

我在我的 Windows Phone 应用程序中创建了一些 ResourceDictionaries，并在 App.xaml.cs 文件中添加了此代码以加载主题：

```
private void LoadDictionary()
{
    var dictionaries = Resources.MergedDictionaries;
    dictionaries.Clear();
    string source = String.Format("/MyApp;component/Themes/Theme2.xaml");
    var themeStyles = new ResourceDictionary { Source = new Uri(source, UriKind.Relative) };
    dictionaries.Add(themeStyles);
} 
```

当我更改代码并重新编译它时，这可以正常工作，但我想要并且无法弄清楚的是；当用户从设置页面选择主题时如何加载字典？

我在 XAML 中将样式设置为 TextBox 的方式是这样的：

```
<TextBox x:Name="Count" Grid.Column="1" TextAlignment="Center" InputScope="Number">
  <TextBox.Style>
      <StaticResource ResourceKey="InputTextBox" />
  </TextBox.Style>
</TextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:46:40.813

您通常会使用 DynamicResource 来执行此操作（请参阅这篇文章[WPF 切换颜色主题](http://bit.ly/JnW7fq)），但不幸的是，我们在 Windows Phone 中没有这种奢侈。

我唯一的建议是使用带有属性的 Global 类来处理要交换的内容，然后通过 SetTheme() 方法手动处理交换。

# nosql - 最适合 Content Recommender 的 NoSQL 数据库

> ID：10523923
> 
> 赞同：2
> 
> 时间：2012-05-09T20:53:26.603
> 
> 标签：nosql, couchdb, cassandra

我目前正在从事一个项目，其中包括出于性能原因将内容推荐器从 MySQL 迁移到 NoSQL 数据库。我们的团队一直在评估一些替代方案，例如 MongoDB、CouchDB、HBase 和 Cassandra。这个想法是选择一个能够在单个服务器或集群中运行的数据库。到目前为止，由于 Hbase 依赖于分布式环境，我们已经放弃了使用 Hbase。即使有水平扩展的想法，我们也需要在生产环境中在单个服务器上运行一段时间的数据库。MongoDB 也被丢弃了，因为它不支持 map/reduce 功能。我们还有 2 个备选方案，我们没有坚实的背景可以决定。任何指导或帮助表示赞赏

注意：我不会假装用没有根据的论点来创建类似宗教的讨论。这是一个严格的技术问题，需要在问题的上下文中讨论

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T23:08:46.820

图数据库通常被认为最适合推荐引擎，因为许多推荐算法实际上都是基于图的。我建议研究[Neo4J](http://neo4j.org/) - 它可以在单台机器上处理数十亿个节点/边缘，并且它支持所谓的高可用性模式，即具有自动主选择的主从设置。

# jquery - 从 div 中获取数字并使用相同数量的选项填充选择下拉列表

> ID：10523925
> 
> 赞同：1
> 
> 时间：2012-05-09T20:53:35.613
> 
> 标签：jquery, forms, drop-down-menu

我正在尝试使用与单独 div 中的数字相同数量的选项填充选择下拉列表。

例如，如果一个 div 的值为“3”，我需要用 3 个选项填充选择下拉列表......例如：

```
<select name="quantity">
<option>1</option>
<option>2</option>
<option>3</option>
</select> 
```

如果 div 中的数字更改为 6 - 那么它将使用 6 个选项填充选择。

非常感谢任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:07:34.850

这是你想要的吗？

[http://jsfiddle.net/Sgqjg/](http://jsfiddle.net/Sgqjg/1/)

html是：

```
<div id="changeMe">9</div>

<select name="quantity" id="populateMe">
</select> 
```

脚本是：

```
var num = parseInt($("#changeMe").text());
var opt = '';
for(i=1;i<=num;i++){
     opt +=  "<option value='" + i + "'>" + i + "</option>";
}
$("#populateMe").html(opt); 
```

编辑：*在每个循环中附加并转换为 int div 的文本值会减慢进程。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:00:42.787

每当您的 div 更改时调用此代码。假设您的 div 的 id 是 'otherDiv' 并且您的下拉列表的 id 是 'yourSelect'

```
var count = parseInt ( $("#otherDiv").html() );

var options = "";
for (var x = 1; x<= count; x++)
{ 
   options += "<option>" + x + "</option>";
}

$("#yourSelect").htmml(options); 
```

（这需要jquery）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:02:40.470

JS：

```
var $sel = $("select");

$("input").keyup(function () {
    $sel.empty();
    var howMany = parseInt($(this).val(), 10);
    for (var i = 1; i <= howMany; i++) {
        $sel.append("<option value='" + i + "'>" + i + "</option>");
    }
});​ 
```

高度抛光的布局：

```
<select></select>
<input />
​​​​​​​​​​​​​​​​​​​​​​ 
```

[**演示。**](http://jsfiddle.net/SSQRs/2/)

# c - 在 C 中合并和排序文本文件

> ID：10523927
> 
> 赞同：-1
> 
> 时间：2012-05-09T20:53:42.237
> 
> 标签：c, file, function, merge, strcmp

我想写一个函数，逐行读取两个文本文件，比较它们，删除重复项，然后按字母顺序将它们放入第三个文件中……我已经为此工作了一个多月，但我仍然卡住了我已经尝试了几种方法来做到这一点，但一无所获......我已经形成了我必须使用 strcmp 来做到这一点，我不能使用任何其他预定义的排序功能......我也在这个网站上环顾四周，不能找到很多对此有帮助的...任何帮助将不胜感激..这是我到目前为止所拥有的：

```
#include<stdio.h>
#include<string.h>

main (void)
{
    char str [200];
    char str2 [200];
    char new [100];
    char temp [100];
    int row = 10;
    FILE *fa = fopen ("book1.dat", "r");
    FILE *fb = fopen ("book2.dat", "r");
    FILE *fc = fopen ("fixed.txt", "w");

    int i;
    int j;
    int k;

    while (fgets (str, 200, fa) !=NULL && fgets (str2, 200, fb) !=NULL)
    {
        puts(str);
        puts(str2);

        if (strcmp( str, str2) ==0 )
        {
            strcpy (str , new);
        } else {
            strcpy (new, str);
            strcpy (new, str2);
        }
    }
    for ( i = 0; i < row; i++)
    {
        for (j = i+1; j< row; j++)
        {
            if(strcmp(new[i], new [j]) > 0)
            {
                strcpy (temp, new);
                strcpy(new, new);
                strcpy(new, temp);
            }
        }
    }
    for (i = 0; i < length; i ++)
    {
        fputs(new, fc);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:42:00.443

首先，你能假设 book1 和 book2 的副本排列得很好吗？

考虑一下如何检测 book1 中的第一个条目是否与 book2 中的最后一个条目相同。

其次，您必须按字母顺序对输出进行**排序。****排序算法**是学生一直被迫做的常见事情之一。它塑造性格。对于奖励荣誉，实施快速**排序**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:09:47.133

你的使用`strcpy()`很奇特。回想一下它的签名：

```
char *strcpy(char *dest, const char *src) 
```

这是一个对我来说没有立即意义的用法：

```
strcpy (new, str); // new now has str
strcpy (new, str2); // new now has str2 
```

你已经有效地覆盖了那里的东西。我将从那里开始，看看还有什么可能无法按您的意愿工作。此外，如果您可以使用`gcc`，请考虑使用`gdb`来调试您的代码。（您需要使用`-g`标志进行编译。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T17:21:55.953

取样方法。
错误处理被省略。
由于我们使用的是库 sqort 的排序功能，请实现您自己的。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define LINE_MAX_SIZE 256

typedef struct filePos {
    FILE *fp;
    long pos;
} FilePos;

typedef struct myfile {
    int lines;
    int capacity;
    FILE *fp;
    FilePos *filePoss;
} MyFile;

MyFile *myfopen(const char *filepath){
    char buff[LINE_MAX_SIZE];
    MyFile *mfp;
    mfp = (MyFile*)malloc(sizeof(MyFile));
    mfp->lines = 0;
    mfp->capacity=16;
    mfp->filePoss=NULL;
    mfp->filePoss=(FilePos*)realloc(mfp->filePoss, sizeof(FilePos)*(mfp->capacity *= 2));
    mfp->fp = fopen(filepath, "r");
    do{
        mfp->filePoss[mfp->lines].fp = mfp->fp;
        mfp->filePoss[mfp->lines].pos = ftell(mfp->fp);
        if(++mfp->lines == mfp->capacity){
            mfp->filePoss=(FilePos*)realloc(mfp->filePoss, sizeof(FilePos)*(mfp->capacity *= 2));
        }
    }while(NULL!=fgets(buff, LINE_MAX_SIZE, mfp->fp));
    --mfp->lines;
    return mfp;
}

void myfclose(MyFile *mfp){
    free(mfp->filePoss);
    fclose(mfp->fp);
    free(mfp);
}

char *myfgets(FilePos *p, char *buff){
    fseek(p->fp, p->pos, SEEK_SET);
    return fgets(buff, LINE_MAX_SIZE, p->fp);
}

int myfcomp(const void *a, const void *b){
    char buff_a[LINE_MAX_SIZE];
    char buff_b[LINE_MAX_SIZE];
    FilePos *fpa,*fpb;
    fpa=(FilePos*)a;
    fpb=(FilePos*)b;
    myfgets(fpa, buff_a);
    myfgets(fpb, buff_b);
    return strcmp(buff_a, buff_b);
}

void myfsort(MyFile *mfp){
    qsort(mfp->filePoss, mfp->lines, sizeof(FilePos), myfcomp);
}

void myfprint(MyFile *mfp){
    char buff[LINE_MAX_SIZE];
    int i;

    for(i=0;i<mfp->lines ;++i)
        printf("%s", myfgets(mfp->filePoss + i, buff));
}

void merge(const char *inpfile1, const char *inpfile2, const char *outfile){
    FILE *fo;
    MyFile *fi1, *fi2;
    char buff_f1[LINE_MAX_SIZE];
    char buff_f2[LINE_MAX_SIZE];
    char buff_fo[LINE_MAX_SIZE];
    char *outbuff=NULL;
    int fi1_line, fi2_line;
    int eof1, eof2;

    fo=fopen(outfile, "w");
    fi1=myfopen(inpfile1);
    fi2=myfopen(inpfile2);
    myfsort(fi1);
    myfsort(fi2);
    fi1_line=fi2_line=0;
    eof1=eof2=0;
    *buff_fo='\0';
    while(1){
        if(!eof1 && outbuff != buff_f2){
            myfgets(&(fi1->filePoss[fi1_line]), buff_f1);
        }
        if(!eof2 && outbuff != buff_f1){
            myfgets(&(fi2->filePoss[fi2_line]), buff_f2);
        }
        if(!eof1 && !eof2){
           if(strcmp(buff_f1, buff_f2) <= 0){
                outbuff=buff_f1;
                ++fi1_line;
            } else {
                outbuff=buff_f2;
                ++fi2_line;
            }
        } else if(!eof1 && eof2){
            outbuff=buff_f1;
            ++fi1_line;
        } else if(eof1 && !eof2){
            outbuff=buff_f2;
            ++fi2_line;
        } else {
            break;
        }
        if(strcmp(outbuff, buff_fo) != 0){//duplicate check
            strcpy(buff_fo, outbuff);
            fputs(buff_fo, fo);
        }
        if(fi1->lines == fi1_line)
            eof1 = !0;
        if(fi2->lines == fi2_line)
            eof2 = !0;
    }
    myfclose(fi2);
    myfclose(fi1);
    fclose(fo);
}

int main(){
    merge("book1.txt", "book2.txt", "fixed.txt");
    return 0;
} 
```

# ruby-on-rails - 如何自动为条目分配唯一 ID 以在关系中使用？

> ID：10523928
> 
> 赞同：0
> 
> 时间：2012-05-09T20:53:47.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的应用程序的基本概述。目前有两种型号。作业模型和客户模型。两种模型都有`has_and_belongs_to_many`关系，因为我打算允许用户创建一个客户端条目，然后为他们分配一个或多个工作。

这是我的两个模型。

客户 -

```
class Client < ActiveRecord::Base 
  has_and_belongs_to_many :job
end 
```

工作 -

```
class Job < ActiveRecord::Base
  has_and_belongs_to_many :client
end 
```

我一直在做一些研究，我认为我认为这种关系需要一个外键才能起作用，所以我在我的数据库中添加了一个`client_id`列和一个列。`job_id`

客户页面目前正在运行，这是我的控制器。

```
class ClientsController < ApplicationController

        def index
          @clients = Client.all

          respond_to do |format|
            format.html # index.html.erb
            format.json { render json: @clients }
          end
        end

        # GET /Clients/1
        # GET /Clients/1.json
        def show
          @clients = Client.find(params[:id])

          respond_to do |format|
            format.html # show.html.erb
            format.json { render json: @clients }
          end
        end

        # GET /Clients/new
        # GET /Clients/new.json
        def new
          @clients = Client.new

          respond_to do |format|
            format.html # new.html.erb
            format.json { render json: @clients }
          end
        end

        # GET /Clients/1/edit
        def edit
          @clients = Client.find(params[:id])
        end

        def create
          @clients = Client.new(params[:client])

          respond_to do |format|
            if @clients.save
              format.html { redirect_to @clients, notice: 'Client was successfully created.' }
              format.json { render json: @clients, status: :created, location: @clients }
            else
              format.html { render action: "new" }
              format.json { render json: @clients.errors, status: :unprocessable_entity }
            end
          end
        end

        # PUT /Clients/1
        # PUT /Clients/1.json
        def update
          @clients = Client.find(params[:id])

          respond_to do |format|
            if @clients.update_attributes(params[:client])
              format.html { redirect_to @clients, notice: 'Client was successfully updated.' }
              format.json { head :no_content }
            else
              format.html { render action: "edit" }
              format.json { render json: @clients.errors, status: :unprocessable_entity }
            end
          end
        end

        # DELETE /Clients/1
        # DELETE /Clients/1.json
        def destroy
          @clients = Client.find(params[:id])
          @clients.destroy

          respond_to do |format|
            format.html { redirect_to :clients , notice: 'Client was successfully removed.'}
            format.json { head :no_content }
          end
        end

        def details
            @clients = Client.find_by_id(params[:id])
            @jobs = Client.job
        end
      end 
```

这就是我目前的工作控制器。

```
class JobsController < ApplicationController

  def index
    @jobs = Job.find(:all)

    respond_to do |format|
      format.html # index.html.erb
      format.xml { render :xml => @job }
    end
  end

  def new
    @jobs = Job.new 

    respond_to do |format|
      format.html # index.html.erb
      format.xml { render :xml => @job }
    end
  end

  def create
    @jobs = Job.new(params[:job])
    @cients = Client.find = Client.find(params[:id])

    respond_to do |format|
      if @jobs.save
        format.html { redirect_to(@jobs,
                      :notice => 'Job was successfully created.') }
        format.xml  { render :xml => @jobs,
                      :status => :created, :location => @Job }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @jobs.errors,
                      :status => :unprocessable_entity }
      end
    end
  end
end 
```

在我的工作表格中，我得到了以下代码，该代码添加了一个包含所有已创建客户端的下拉列表。

```
<%= select("job", "client_id", Client.all.collect {|c| [ c.name, c.id ] }, {:include_blank => 'None'})%> 
```

当我按下保存时。我收到以下错误。

```
unknown attribute: client_id

Application Trace | Framework Trace | Full Trace
app/controllers/jobs_controller.rb:22:in `new'
app/controllers/jobs_controller.rb:22:in `create' 
```

我认为这是因为我需要定义一种在我的工作创建中查找 client_id 的方法，以及在我的客户端创建中指定一个方法。

这是我的第一个 Rails 应用程序，所以我不太确定如何。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:16:28.320

在您的协会中多元化您的工作和客户。IE

```
has_many_and_belongs_to :jobs
has_many_and_belongs_to :clients 
```

如果您不使用 ActiveRecord :through 方法的多对多关联的替代方法（HMABT 的替代方法），您必须自己创建连接表，该表是 job_id 和 client_id 的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:18:36.863

你的`jobs`桌子没有`client_id`，也不应该有。您需要创建一个[联结表](http://en.wikipedia.org/wiki/Junction_table)来促进多对多关系。它应该被调用`clients_jobs`并包含一个整数`client_id`和`job_id`。

这里还有**很多**错误。以下是我不经意间看到的东西：

1.  这一行：

    ```
    @cients = Client.find = Client.find(params[:id]) 
    ```

    应该：

    ```
    @cients = Client.find(params[:id]) 
    ```

2.  多元化在 Rails 中很重要。客户没有很多“工作”。它有很多工作**。**您的模型应该反映这一点：

    ```
    class Client < ActiveRecord::Base 
      has_and_belongs_to_many :jobs
    end

    class Job < ActiveRecord::Base
      has_and_belongs_to_many :clients
    end 
    ```

3.  您需要通过迁移创建一个[联结表](http://en.wikipedia.org/wiki/Junction_table)，这是您的外键所在的位置：

    ```
    $ rails g migration AddClientsJobsTable 
    ```

4.  在`index`and`new`中，您首先创建`@jobs = Job.new`然后通过`:xml => @job`. 同样，多元化很重要。你需要`@job = Job.new`. 您在 中遇到了同样的问题`create`，除了您删除了“s”**并将**“J”大写：`:location => @Job }`您不能在编程中*这样做。*大小写和拼写都很重要。

5.  `Job.find(:all)`或`Client.all`：选择一个。不要混用`find :all`和`.all`。

6.  `@clients = Client.find(params[:id])`. 您正在寻找一个*特定*的客户，而不是客户的集合。你的变量应该被调用`@client`。这不是一个*错误*，但它非常丑陋。

# ruby-on-rails - Beanstalk：用新版本更新环境时出错

> ID：10523930
> 
> 赞同：1
> 
> 时间：2012-05-09T20:53:51.300
> 
> 标签：ruby-on-rails, amazon-ec2, amazon-web-services

我正在尝试将 Ruby-on-Rails 应用程序部署到 AWS Beanstalk。战争是在 Jenkins 中使用 warble 生成的，然后将战争文件复制到我们的 AWS S3 存储桶中。

我正在使用 AWS Beanstalk 命令行工具来创建 beanstalk 应用程序、应用程序版本和环境。第一个版本已正确部署。

然后我创建一个新的应用程序版本，并尝试使用新版本更新环境。新版本未部署。在事件中，抛出以下错误：

```
Encountered errors while attempting to deploy version to 1 running EC2 instances 
```

我也尝试过从头开始创建所有内容，但仍然会引发上述错误的第二个版本。

注意：我们使用的是自定义 AMI，这是我们调整并创建图像供我们使用的 BS AMI。

有人可以帮我解决这个问题吗？

谢谢

诺曼 A.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T09:24:32.480

我是根据我的测试来回答这个问题的，所以任何寻找解决方案的人都可能会发现它很有用。

如问题中所述，我使用的是自定义 beanstalk ami [Tomcat 7 stack]。定制是按照以下步骤完成的：

1.  创建 Beanstalk 应用程序，为此应用程序创建一个版本，并通过传递 KeyPair 之类的选项来启动 beanstalk 环境（不是自定义环境，默认由 AWS 提供），这样您就可以使用它们来 ssh 到实例中。

2.  记下上述实例的 AMI-id 并启动此 AMI 的常规 EC2（非 Beanstalk）实例。

3.  根据您的需要自定义 EC2 实例，并在完成后创建此实例的 EBS 映像。停止此实例，一旦您对图像感到满意，您可以稍后终止它。

4.  也终止 Beanstalk 实例。

5.  启动新的 Beanstalk 环境，但这次传递在步骤 3 中创建的图像的这个 ami-id。

我已经为 tomcat 6 和 7 创建了自定义的 beanstalk 图像。对于我的问题，我发现问题是在我为 tomcat 7 使用自定义 ami 时发生的。更新不起作用。但是当我使用 beanstalk 默认实例（不是我的自定义图像）时，更新工作正常。

但是，使用 tomcat 6 自定义映像，更新工作得很好。因此，问题似乎与 Tomcat 7 自定义的 AWS Beanstalk 默认 AMI 有关。

我现在将此标记为已回答。

——诺曼 A。

# python - 在python中使用pyglet，如果我用鼠标拖动，为什么我的帧速率会加快？

> ID：10523931
> 
> 赞同：3
> 
> 时间：2012-05-09T20:54:00.697
> 
> 标签：python, performance, image, animation, pyglet

我使用 python 的 pyglet 包编写了一个简单的图像显示。在我的[Linux 笔记本电脑](http://us.toshiba.com/computers/laptops/portege/R830/R835-ST6N02)上，代码按我的预期运行，每秒显示恒定的 60 帧。

然而，在我的 Windows 7 桌面（[@Xi](http://www.xicomputer.com/)的 GeForce GTX 550 Ti 相当新）上，帧速率非常非常低（约 10 FPS 或更低）。但是，我不认为这是硬件限制，因为鼠标拖动事件会大大加快帧速率（60 FPS 或更高）。

**为什么当我不拖动鼠标时，我在 Windows 上的帧速率如此之低，而当我拖动鼠标时却如此之快？**

这是我用来产生这种行为的简化代码：

```
import pyglet
from pyglet.window import mouse

image_1 = pyglet.resource.image('1.png')
image_2 = pyglet.resource.image('2.png')

fps_display = pyglet.clock.ClockDisplay()
image_x, image_y = 0, 0
frame = 0

window = pyglet.window.Window(image_1.width, image_2.height)

@window.event
def on_mouse_drag(x, y, dx, dy, buttons, modifiers):
    global image_x, image_y
    if buttons == mouse.LEFT:
        image_x += dx
        image_y += dy

@window.event
def on_draw():
    global frame
    frame += 1
    window.clear()
    if frame%2 == 0:
        image = image_1
    else:
        image = image_2
    image.blit(x=image_x, y=image_y,
               height=image.height,
               width=image.width)
    fps_display.draw()

if __name__ == '__main__':
    pyglet.app.run() 
```

'1.png' 和 '2.png' 具有相同的像素尺寸，它们只是不同的图像，所以我可以看到帧翻转。我正在使用 python 2.7.2 和 pyglet 版本 1.2dev。我很乐意添加任何有用的附加信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:27:27.770

自从我做任何 pyglet 以来已经有一段时间了，但是回顾一些旧代码，我发现这一切似乎都使用了 pyglet 时钟设置

```
 clock.schedule_interval(self.update,1.0/75.0)   
 clock.set_fps_limit(75) 
```

在子类 pyglet Window 中控制更新速率（其中 update 是一种窗口方法，它通过时间步参数推进游戏世界，并使窗口无效）。我认为 pyglet 中没有任何东西可以特别保证定期的“ticker”更新率。

# c# - 获取在实体框架中导致保存更改异常的字段

> ID：10523933
> 
> 赞同：7
> 
> 时间：2012-05-09T20:54:37.107
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我在 MVC3 中创建了一个 REST API，我需要做的一件事是在更新或创建操作失败时返回描述性消息。

像这样的消息`"The update operation failed while creating the customer object."`还不够好。

我的下一个想法是从返回以下内容的异常中获取消息：

```
The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Business_Category". The conflict occurred in database "MyDb_Dev", table "dbo.Category", column 'CategoryID'.
The statement has been terminated. 
```

这似乎是太多的信息。我可以解析出`column "CategoryID"`异常消息...不确定这是否可靠。

是否可以为字段设置属性，以便当它们失败时我可以获得该字段的错误描述？我愿意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T18:34:13.117

听起来您需要使用 Exception.Data。更多信息可以在这里找到：

[http://msdn.microsoft.com/en-us/library/system.exception.data.aspx](http://msdn.microsoft.com/en-us/library/system.exception.data.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:55:47.117

将有问题的代码放在 try catch 块中。在 catch 部分的某处设置断点。然后添加一个名为**ModelState**的监视项。

**ModelState.IsValid**将告诉您模型是否有效（或错误）。

**ModelState.Keys**将显示模型包含的字段列表。

**ModelState.Values**将向您显示每个相应字段的数据值。深入每一个，您将看到一个**错误**节点，其中包含该数据项中有多少错误的计数。寻找超过 0 个错误的那个。记下它的索引，然后返回**ModelState.Keys[Index noted]**查看哪个字段导致了错误。

老实说，一旦你走到这一步，你就会拥有所有你需要的信息来解决任何此类错误。我会留给你知道的。

# codeigniter - 在一个 codeigniter 应用程序中同时使用常规（4kb）会话和数据库会话？

> ID：10523934
> 
> 赞同：0
> 
> 时间：2012-05-09T20:54:37.227
> 
> 标签：codeigniter, session-cookies

所以我有一个我们在 codeigniter 上构建的框架。默认情况下，它使用常规的 codeigniter 会话，允许在 cookie 上加密最多 4kb 的存储空间。

它适用于需要注册过程的一般应用程序，由于问题是通过管理面板动态生成的，因此其大小可能会有所不同。注册过程依赖于会话数据，因为它在整个过程中重定向。

过去，当我知道这将是框架上的一个问题时，我曾使用过 db_sessions，但是，我现在正在考虑始终使用 db_session 进行注册过程而站点的其余部分使用 4kb cookie 会话的可能性。

这可能吗。看起来这可能是一个非常糟糕的主意，但我真的不想重做动态注册过程或真正为整个站点使用 db_session，因为如果太多用户同时在线，它最终会使站点运行非常缓慢。

所以我想我只能在加载注册控制器时将配置中的变量设置为真（通过 $_SERVER 或 uri 助手检查 url，如果我可以将它加载到我猜我不能的配置中）。

这看起来有道理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:13:28.850

> 看起来这可能是一个非常糟糕的主意

您回答了自己的问题:) 当用户从一页切换到另一页时，您会遇到问题。如果他们打开多个窗口，按下“后退”按钮等会发生什么情况。您需要在他们开始注册时切换 cookie，并在最后切换回来。基本上没有收益，这将非常非常混乱。

> 但我真的不想重做动态注册过程或真正为整个站点使用 db_session，因为如果太多用户同时在线，它最终会使站点运行非常缓慢。

现实是；通过使用数据库进行会话，您的网站必须很大才能有任何真正的性能问题。如果您不使用数据库，那么您将依赖存储在用户计算机上的 cookie。根据您的站点，这意味着他们可能能够编辑该 cookie 并更改“admin = true”或其他内容。

只需使用数据库会话-我认为您使情况过于复杂。

# haskell - Cabal：有条件地覆盖标志默认值

> ID：10523935
> 
> 赞同：3
> 
> 时间：2012-05-09T20:54:46.130
> 
> 标签：haskell, overriding, conditional, cabal, compiler-flags

有没有办法重写：

```
flag llvm
    description: compile via LLVM
    default    : if os(mingw32)
                   False
                 else
                   True 
```

或者

```
flag llvm
    description: compile via LLVM
    default    : True

if os(mingw32)
    ?SET-LLVM=False? 
```

并开始`cabal`使用它？

* * *

**笔记：**

在同一个文件中，该`llvm`标志的使用如下：

```
if flag(llvm)
  ghc-options: -fllvm -optlo-O3 
```

还有许多其他单个高级标志可以转换为多个`ghc-options`条目，例如`static`to `-static -optl-static`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T22:50:58.450

你可以这样做：

```
flag llvm
    description: compile via LLVM
    default    : True

-- ...

Executable foo
    if flag(llvm) && !os(windows)
        ghc-options: -fllvm -optlo-O3 
```

# arrays - 如何在 Python 中从终端读取到 int 列表

> ID：10523936
> 
> 赞同：0
> 
> 时间：2012-05-09T20:54:47.033
> 
> 标签：arrays, python-2.7, user-input

我想提示用户在整数列表中输入 2 个数字，将 2 个数字相加并将结果附加到列表中，最后减去 2 个数字并将结果附加到列表中。这是在学习 C 时给我们的作业。我正在尝试使用相同的作业自己学习 Python。我的代码不会将方程的结果附加到数组中。错误说列表索引应该是整数而不是元组。这是我的代码：

```
numarray=[]

num1 = int(raw_input("Enter the first number: "))
num2 = int(raw_input("Enter the second number: "))
num3 = num1+num2
num4 = num1-num2

print numarray[num1,num2,num3,num4] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:02:56.450

您可以像这样分配数组元素：

```
numarray = [num1, num2, num3, num4] 
```

或者，您实际上可以附加您在文本中指定的值：

```
num1 = int(raw_input("Enter the first number: "))
num2 = int(raw_input("Enter the second number: "))
numarray = [num1, num2]
numarray.append(num1 + num2)
numarray.append(num1 - num2) 
```

然后要访问元素，使用与 C 相同的符号（例如`numarray[0]`，将是第一个元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:02:08.660

设置所有 num* 变量后，您应该执行以下操作：

```
numarray = [num1, num2, num3, num4]

print numarray 
```

该调用`numarray[num1,num2,num3,num4]`是非法的，因为该`list[]`语法用于访问列表的给定索引，而不是设置列表中的项目。

# java - Android表格布局添加数据行

> ID：10523937
> 
> 赞同：0
> 
> 时间：2012-05-09T20:54:48.770
> 
> 标签：java, android, xml

我正在尝试创建一个充满数据的主页。到目前为止，我一直在用数据填充列表视图，但是对于主页有 3 大量数据，我不能将它们放在列表视图中，因为它们都是独立滚动的。所以我想创建一个表格布局，所以它是：

```
header
xml header
table row
xml header 2
table row

xml header 3
table row
table row
table row
table row
table row 
```

我希望每一行都有一个图像和一个文本视图，但也在 xml 标题 3 下面我希望根据数据加载行，所以如果我有 5 条数据，它会加载 5 行等。

表格行也可以有一个点击事件监听器。

这是我到目前为止所尝试的：

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white">

   <include layout="@layout/header" />
   <include layout="@layout/redcell" />

   <TableRow
       android:id="@+id/tableRow1"
       android:layout_width="wrap_content"
       android:layout_height="60dp" >
   </TableRow>

   <include layout="@layout/redcell" />

   <TableRow
       android:id="@+id/tableRow2"
       android:layout_width="wrap_content"
       android:layout_height="60dp" >
   </TableRow>

    <include layout="@layout/redcell" />

    <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
   />

</TableLayout> 
```

这是我加载数据的地方

```
public void loadData(){String myhash = buildHmacSignature(apiKey, fixturesFeedURL);

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(fixturesFeedURL);

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();
    pairs.add(new BasicNameValuePair("requestToken", myhash));
    pairs.add(new BasicNameValuePair("apiUser", apiUser));

    try {
        post.setEntity (new UrlEncodedFormEntity(pairs));
        HttpResponse response = client.execute(post);
        BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
        String json = reader.readLine();
        fulldata = String.valueOf(json);
        Log.v("myApp","newsdata" + fulldata);
        newsList = new ArrayList<String>();
        JSONObject obj = new JSONObject(json);    
        JSONObject objData = obj.getJSONObject("data");
        JSONArray jArray = objData.getJSONArray("news");

           for(int t = 0; t < newsAmount; t++){
               JSONObject newsTitleDict = jArray.getJSONObject(t);

               newsList.add(newsTitleDict.getString("title"));

           }

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    setListAdapter ( new ArrayAdapter<String>(this, R.layout.single_item, newsList));

       ListView list = getListView();

        list.setTextFilterEnabled(true);

    }   

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        checkPreferences();
        loadData(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:01:14.673

您是否尝试过使用自定义 listView，如果您在 Json 中接收数据，最好使用自定义 listView

这是一个很好的教程，解释了如何将文本和图像添加到列表中的每一行

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

此外，如果您需要 3 个独立滚动的列，您可以使用 3 个 listViews，您将看到如何在 google apidemos 上制作许多 scroolviews 的示例

# javascript - 让 div 表现得像 iframe

> ID：10523940
> 
> 赞同：2
> 
> 时间：2012-05-09T20:55:16.500
> 
> 标签：javascript, ajax, iframe, html

我想使用这个函数在 div 元素中加载我的页面内容：

```
function loadmypage(DIV, pageURL)
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById(DIV).innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET", pageURL ,true);
xmlhttp.send();
} 
```

但是，当我单击“框架”本身内的链接时，该功能不起作用。我猜目标元素与加载页面本身位于不同页面的原因。

所以我的问题是：*有没有办法让 div 元素在框架本身内加载整个页面时表现得像 iframe？*

PS：出于安全原因，我不允许使用 iFrame，也不允许出于效率原因使用 jQuery。主页中的链接正常加载目标，当我单击这些页面内的任何链接时会出现问题。

```
 <div id="nav" class="mmenu">
                                <ul type="none">

                                            <li><a  href= "javascript:loadmypage('viewMessages.php')">Messages</a></li>
                                            <li><a  href= "javascript:loadmypage('userHomepage.php')">My Conferences</a></li>
                                            <li><a  href= "javascript:loadmypage('availableConferences.php')">Conferences</a></li>
                                            <li><a  href= "javascript:loadmypage('incomingRequests.php')">Requests</a></li>
                                            <li><a  href= #>News</a></li>
                                            <li><a  href= #>Options</a></li>

                                        </ul>
                                    </div>
                            </fieldset>

                                        <div id="collabsoft" class="collabsoft"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:08:03.187

您的链接不起作用，因为您缺少 div 参数。注意你的功能：

```
function loadmypage(DIV, pageURL)
{
... 
```

第一个参数是 DIV，您只传递了 pageURL。

```
<li><a  href= "javascript:loadmypage('viewMessages.php')">Messages</a></li>
                                            <li><a  href= "javascript:loadmypage('userHomepage.php')">My Conferences</a></li>
                                            <li><a  href= "javascript:loadmypage('availableConferences.php')">Conferences</a></li>
                                            <li><a  href= "javascript:loadmypage('incomingRequests.php')">Requests</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:18:06.350

`<div>``<iframe>`如果您想象这样的事情，则无法通过任何设置或切换来使其表现得像这样。毕竟，如果你想`<iframe>`，你应该使用`<iframe>`.

无论如何，不​​起作用的链接可能使用相对寻址。这是对页面内部链接的合理期望。为了让他们在您的页面上工作，您必须使用绝对地址。

所以如果你加载了页面

```
www.example.com/somedirectory/index.php 
```

它使用了

```
<link href="style.css" > 
```

你必须使用

```
<link href="www.example.com/somedirectory/style.css" > 
```

等等

因此，您可以遍历 DOM 树，使用某个属性中的地址查找,`link`和所有其他元素，检查这些属性，检查它们是否使用绝对地址（可以使用正则表达式完成，但我不想给你一个现在，因为有很多可能性：，甚至），如果没有，绝对引用它们（通过将整个路径添加到下载文档所在的网页和目录的前面）。`a``img``http://something...``www.something.com/...``localhost/...`

您可以使用递归函数遍历 DOM 树，首先访问`document.body`每个访问的节点，并为其所有子元素调用该函数。尽管在您的情况下，您可以利用`document.getElementsByTagName`来准确获取您需要的特定元素的列表。

最后，请注意，出于安全原因，脚本必须包含在同一主机（IP 甚至端口）中。因此，来自其他网站的脚本将无法为您远程引用。您也必须将它们下载到您的服务器上。

TLDR：您不需要 jQuery，但使用`<iframe>`.

# python - Python/numpy 中的快速/内置位操作？

> ID：10523941
> 
> 赞同：2
> 
> 时间：2012-05-09T20:55:26.203
> 
> 标签：python, numpy, bit-manipulation

我正在使用一个外部库，它输出一个带有数据类型“>u2”（大端、无符号、2 字节/16 位）的 numpy 数组。就我而言，只有 10 位有效（输出来自实际输出**little-endian**的硬件设备）。例如：

`65283`是最大值，对应于`bin(65283)=0b1111111100000011`直接 python 输出，或者`00001111111111`如果它是 little-endian。

我想将`0-65283`库的范围输出映射到`0-1023`对 10 位硬件功能有意义的范围。我该怎么做呢？

我尝试了以下方法：

```
>>>import numpy as np

>>>arr=np.array([65283, 6528, 652, 65, 6], dtype=">u2")
>>>print arr/64  # same as arr/2**6 and arr >> 6
[1020  102   10    1    0]
>>>print arr.byteswap()
[ 1023 32793 35842 16640  1536] 
```

但这并没有给出预期的结果。我发现该`bin()`函数以大端格式输出（在这个 numpy 数组的情况下），但省略了填充零。例如，65283 表示所有 16 位，但是`bin(6528)=0b1100110000000`（中间缺少 3 个零）。

为了解决这个问题（并返回一个 10 位的小端数），我可以得到 6528 的二进制形式，在中间添加 3 个零，然后进行字节交换。但是 1）这是超级乏味的（每个元素都完成）和 2）零填充不一致（例如 652 需要 6 个零）。

有没有内置的方法可以做到这一点？看起来`struct`模块（带`pack`和或`unpack`）可能会有所帮助，但现在对我来说是希腊语。任何帮助，将不胜感激！

**编辑**：

相信我已经找到了罪魁祸首。我上面的示例（从 65238 的相机/库中获取实际值并假设半任意附加值，显然只是删除了最右边的数字）不会发生！例如，6528 需要在最低有效字节 ( `00011001**1**0000000`) 中为 1，而这永远不会发生（只有 10 位有效）。

经过进一步检查，`arr.byteswap()`我的代码中的一个简单（`arr`具有合法值）可以工作。例如：

```
>>>arr=np.array([12288, 13312, 12800, 12032, 13312, 13824, 65283, 0, 7936], dtype=">u2")
>>>arr.byteswap()
array([  48,   52,   50,   47,   52,   54, 1023,    0,   31], dtype=uint16) 
```

我从来没有在我的代码中真正尝试过，只是在这个虚构的例子中。对困惑感到抱歉。但希望它可以帮助其他人解决这个问题（特别是如果你使用 Basler 相机！），我猜这结果是微不足道的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:48:24.533

```
import struct
struct.pack('<H',val) 
```

或者，更好的是：

```
>>> arr.byteswap().newbyteorder()
array([65283,  6528,   652,    65,     6], dtype=uint16)
>>> arr.byteswap().newbyteorder().tostring()
'\x03\xff\x80\x19\x8c\x02A\x00\x06\x00' 
```

[文档](http://docs.scipy.org/doc/numpy/user/basics.byteswapping.html)

# wcf - WCF Rest, 3.5 - 在 Java 中使用特殊字符的问题

> ID：10523944
> 
> 赞同：2
> 
> 时间：2012-05-09T20:55:34.917
> 
> 标签：wcf, rest, encoding

我使用“WCF REST Starter Kit”项目模板将基于 SOAP 的 WCF Web 服务项目转换为基于 REST 的项目。我的核心代码没有改变，只有从 SOAP 到 REST 的包装器。客户说它有效，他们可以使用数据。伟大的。

问题：客户说特殊字符破坏了他们的 XML 解析器，而 SOAP 中没有。前任：

`<SomeItem>Simon & Simon</SomeItem>`

...这里的＆符号是问题。客户端正在使用 Java 客户端，但目前我不确定是哪个客户端。

由于 SOAP 版本运行良好，在我的代码或 .config 中我需要做些什么特别的事情吗？也许是一种编码规范？（我知道我可以编写一个清理器方法，在返回结果之前用编码版本替换有问题的字符，但我希望有一个内置的编码规范设置等）。

编辑：我的坏例子。事实证明 & 被 WCF REST 正确编码。什么不是：

`<UnitOfMeasure>°F</UnitOfMeasure>`

...我认为它没有被编码，因为°符号不是 XML/HTML 语法的一部分，因此不需要编码来防止无效的语法。据我了解。

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:27:37.220

在返回之前对您的数据进行编码。

[http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)

此致

# java - 带有来自 Jar 的多个 XML 文件的 Spring ApplicationContext

> ID：10523945
> 
> 赞同：2
> 
> 时间：2012-05-09T20:55:36.737
> 
> 标签：java, spring, classpath, classloader, applicationcontext

我需要使用当前 Maven 构建中的“主要”applicationContext-a.xml 创建一个 ApplicationContext。另一个连接来自另一个 Maven 构建的类，并预设在 Maven 依赖项包含的 jar 中。

**这里的想法：**

```
ApplicationContext context = new ClassPathXmlApplicationContext( new String[] {
                "classpath*:applicationContext-*.xml"}); 
```

这应该从 Classpath 加载 applicationContext-a.xml，因为它在同一个项目中。*这行得通。*

然后应从依赖项 jar 加载 applicationContext-b.xml。 *这行不通。*

注意

```
"classpath*:applicationContext-*.xml" 
```

仅匹配直接类路径中的 XML，jar 中不匹配。

**我发现了什么：**

```
ApplicationContext context = new ClassPathXmlApplicationContext( new String[] {
                "classpath*:applicationContext-*.xml", "classpath*:applicationContext-b.xml"}); 
```

这有效，但前提是我可以明确告诉 jar 中 xml 的文件名：applicationContext-b.xml

我还需要它来进行集成测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"**/applicationContext*.xml"})
public class TestClass { ... } 
```

最好的主意可能是自定义加载器？必须有办法让这个模式工作......

前段时间有一个[解决方案，反之亦然：它只从 jar 中获取 applicationContext.xml。](https://stackoverflow.com/questions/6303242/loading-spring-application-context-files-that-are-inside-a-jar-in-classpath)如果类路径中有另一个人，它只匹配这个文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T06:46:13.097

The `classpath*:` I think has a limitation doesn't work for files under the root folder. Try moving the files under a folder - something like `spring/application-a.xml` and `spring/application-b.xml`. Then you can have a path `classpath*:/spring/application-*.xml`.

# node.js - 使用 sockjs 设置 SSL

> ID：10523947
> 
> 赞同：7
> 
> 时间：2012-05-09T20:55:47.867
> 
> 标签：node.js, websocket

如何在 sockjs（在 nodejs 上运行）中安装 https/ssl 证书（和密钥）？

我目前正在运行最基本的设置，即“echo”示例设置。如下：

```
var http = require('http');
var sockjs = require('sockjs');
var node_static = require('node-static');

// 1\. Echo sockjs server
var sockjs_opts = {sockjs_url: "http://cdn.sockjs.org/sockjs-0.3.min.js"};

var sockjs_echo = sockjs.createServer(sockjs_opts);
sockjs_echo.on('connection', function(conn) {
    conn.on('data', function(message) {
        conn.write(message);
    });
});

// 2\. Static files server
var static_directory = new node_static.Server(__dirname);

// 3\. Usual http stuff
var server = http.createServer();
server.addListener('request', function(req, res) {
    static_directory.serve(req, res);
});
server.addListener('upgrade', function(req,res){
    res.end();
});

sockjs_echo.installHandlers(server, {prefix:'/echo'});

console.log(' [*] Listening on 0.0.0.0:9999' );
server.listen(9999, '0.0.0.0'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T12:29:24.207

好的，我通过将代码更改为：

```
var http = require('https');
var sockjs = require('sockjs');
var fs = require("fs");

var options = {
  key: fs.readFileSync('ssl.key'),
  cert: fs.readFileSync('ssl.crt')
};

var echo = sockjs.createServer();
echo.on('connection', function(conn) {
    conn.on('data', function(message) {
        conn.write(message);
    });
    conn.on('close', function() {});
});

var server = http.createServer(options);
echo.installHandlers(server, {prefix:'/echo'});
server.listen(9999, '0.0.0.0'); 
```

# cakephp - CakePHP：ContainableBehavior 查询结构/联接

> ID：10523955
> 
> 赞同：2
> 
> 时间：2012-05-09T20:56:51.780
> 
> 标签：cakephp, join, model, containable

# 我的应用程序的数据模型

*   组有很多用户
*   用户属于组
*   用户 hasMany Punch
*   打孔属于用户
*   打卡属于PayPeriod
*   PayPeriod hasMany Punch

# 找电话

```
$groups = $this->Group->find('all', array( 'contain' => array(
    'User' => array(
        'Punch' => array(
            'conditions' => array(
                'Punch.payperiod_id' => null
            )
        )
    )

))); 
```

# 查询调试

```
SELECT `Group`.`id`, `Group`.`name` 
FROM `pclock`.`groups` AS `Group` 
WHERE 1 = 1 ORDER BY `name` ASC

SELECT `User`.`id`, `User`.`name`, `User`.`group_id` 
FROM `pclock`.`users` AS `User` 
WHERE `User`.`group_id` IN (4, 3, 5, 2, 1)

SELECT `Punch`.`id`, `Punch`.`user_id`, `Punch`.`time_in`, `Punch`.`time_out`, `Punch`.`payperiod_id` 
FROM `pclock`.`punches` AS `Punch` 
WHERE `Punch`.`payperiod_id` IS NULL AND `Punch`.`user_id` IN (1, 2, 3, 4, 5) 
```

一旦我的应用程序扩展到数百个用户，每个用户都有数千个 Punches，这些查询可能会变得非常低效。我希望 Containable 执行以下查询：

## 查询我更喜欢

```
SELECT 
    Group.id, Group.name, 
    User.id, User.name, User.group_id, 
    Punch.id, Punch.user_id, Punch.time_in, Punch.time_out, Punch.payperiod_id 
FROM groups AS Group
LEFT JOIN users AS User 
    ON (Group.id = User.group_id)
LEFT JOIN punches AS Punch 
    ON (User.id = Punch.user_id)
WHERE Punch.payperiod_id IS NULL 
```

有没有办法优化这个？options 数组中的 join 属性似乎被忽略了，并且在没有 Containable 的情况下手动执行连接会返回非分层的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T16:13:29.577

您可以手动加入：

```
$groups = $this->Group->find('all', array(
    'fields'=>array(
        'Group.id', 'Group.name', 'User.id', 'User.name', 'User.group_id', 
        'Punch.id', 'Punch.user_id', 'Punch.time_in', 'Punch.time_out',
        'Punch.payperiod_id'
    ),
    'conditions'=>array(
        'Punch.payperiod_id IS NULL'
    ),
    'joins'=>array
        array(
           'table'=>'users',
           'alias'=>'User',
           'conditions'=>array(
               'Group.id = User.group_id'
           )
        ),
        array(
            'table'=>'punches',
            'alias'=>'Punch',
            'conditions'=>array(
                'User.id = Punch.user_id'
            )
        )
    )
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T22:34:38.737

这就是可包含的工作方式。您可以在查找中使用连接参数或查找为您执行连接的可链接行为。

[https://github.com/rafaelbandeira3/linkable](https://github.com/rafaelbandeira3/linkable)

# layout - Joomla - 在不同列中显示不同类别的菜单项

> ID：10523956
> 
> 赞同：0
> 
> 时间：2012-05-09T20:56:52.397
> 
> 标签：layout, joomla, categories

我喜欢有一个类似于“类别博客”的布局，但例如显示在 3 个不同的列 3 个不同的类别中。每个类别一列。

例子：

第 1 类第 1 条 | 第 2 类第 1 条 | 第 3 类第 1
类第 1 类第 2 类 | 第 2 类第 2 条 | 类别 3 文章 2
类别 1 文章 3 | 第 2 类第 3 条 | 第 3 类第 3 条

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T22:43:48.010

我会看Joomla的[新闻部分！](http://extensions.joomla.org/extensions/news-display)[扩展目录中的“文章展示](http://extensions.joomla.org/extensions/news-display/articles-display/articles-showcase)”和“[文章列表](http://extensions.joomla.org/extensions/news-display/articles-display/articles-listing)”等几个子部分可能会为您提供解决方案。

# c# - 如何通过单击按钮从后面代码中的列表视图中获取 eval 值？

> ID：10523957
> 
> 赞同：0
> 
> 时间：2012-05-09T20:56:58.297
> 
> 标签：c#, asp.net, listview, eval

基本上 value1 和 value2 是数据库中的两个数字，当我单击 button1 时，我想在后面的代码 (c#) 中获取数字，这样我就可以向它添加另一个数字，对于 value2 也是如此。我只需要 c# 中需要的行来提取 Eval 值....您的帮助将不胜感激。

```
<asp:Button ID="button1" runat="server" Text='Plus' OnClick="button1_Click"/> 
<asp:Label ID="value1" runat="server" Text=' <%# Eval("value1") %> ' /> 
<asp:Button ID="button2" runat="server" Text='Minus' OnClick="button2_Click" />  
<asp:Label ID="value" runat="server" Text=' <%# Eval("value2") %> '/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:07:36.377

`Eval()`除非您参加，否则您不能使用`ItemDataBound`，但您可以将值存储在 datakey 集合中并以这种方式访问​​它：

```
<asp:ListView ID="ListView1" runat="server" DataKeyNames="Value1, Value2, Value3" ...> 
```

在代码隐藏中，您只需要行索引：

```
var rowIndex = 0;
var value = lst.DataKeys[rowIndex]["Value1"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:02:12.550

你需要“绑定”

<asp:Label ID="value1" runat="server" Text=' <%# Bind("value1") %> ' />

Eval 是一种方式，Bind 是两种方式数据绑定。您可能需要使用 Container.DataItem 但 bind 可能会完成这项工作。

然后，您将能够读取 Text 属性的值，即

```
var theText = value1.Text; 
```

此外，由于控件位于列表视图中，您可能需要导航 ListView 控件集合：

```
theListView.FindControl("theIdOfTheControl") 
```

高温高压

# opengl - 在顶点着色器中置换顶点

> ID：10523958
> 
> 赞同：2
> 
> 时间：2012-05-09T20:57:03.320
> 
> 标签：opengl, 3d, directx, vertex-shader, procedural-generation

我的代码创建了一个包含许多顶点的网格，然后将它们替换为顶点着色器中高度的随机噪声值。移动使用

```
glTranslated(-camera.x, -camera.y, -camera.z); 
```

工作正常，但这意味着你可以一直走到网格的边缘。

我考虑将相机位置发送到着色器，并让整个位移被它抵消。因此最终的顶点着色器代码：

```
uniform vec3 camera_position;
varying vec4 position;

void main()
{
    vec3 tmp;
    tmp = gl_Vertex.xyz;
    tmp -= camera_position;
    gl_Vertex.y = snoise(tmp.xz / NOISE_FREQUENCY) * NOISE_SCALING;
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
    position = gl_Position;
} 
```

编辑：我修复了一个缺陷，顶点本身不应该水平位移。

但是由于某种原因，当我运行它并更改相机位置时，屏幕闪烁但没有任何移动。顶点正确地被噪声值置换，着色和一切正常，但置换不移动。

作为参考，这里是 git 存储库：[https ://github.com/Orpheon/Synthworld](https://github.com/Orpheon/Synthworld)

我究竟做错了什么？

PS：“闪烁”是错误的。就好像在某些位置它不绘制任何东西，而在其他位置它从位置 0 绘制正常场景，所以如果我不停地移动它会闪烁。我可以停在它保持黑色的地方，或者在它保持正常的地方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T21:04:19.107

```
gl_Position = ftransform(); 
```

那就是你做错了。`ftransform`不隐式`gl_Vertex`作为参数。它只是做它应该做的事情：执行顶点位置的转换，就像这是固定功能管道一样。所以它使用`gl_Vertex`最初的*值*。

您需要对此进行适当的转换：

```
gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:55:00.597

我设法通过使用 glUniform3fv 修复了这个错误：

main.c 外部：

```
// Sync the camera position variable
GLint camera_pos_ptr;
float f[] = {camera.x, camera.y, camera.z};
camera_pos_ptr = glGetUniformLocation(shader_program, "camera_position");
glUniform3fv(camera_pos_ptr, 1, f);

// draw the display list
glCallList(grid); 
```

顶点着色器：

```
uniform vec3 camera_position;
varying vec4 position;

void main()
{
    vec4 newpos;
    newpos = gl_Vertex;
    newpos.y = (snoise( (newpos.xz + camera_position.xz) / NOISE_FREQUENCY ) * NOISE_SCALING) - camera_position.y;
    gl_Position = gl_ModelViewProjectionMatrix * newpos;
    position = gl_Position;
} 
```

如果有人想看完整的代码，这里又是 git 仓库：[https ://github.com/Orpheon/Synthworld](https://github.com/Orpheon/Synthworld)

# java - 在使用 commons-httpclient 的项目中使用新的 httpclient-4.0.1 jar

> ID：10523960
> 
> 赞同：0
> 
> 时间：2012-05-09T20:57:15.723
> 
> 标签：java, apache-commons-httpclient, apache-httpclient-4.x

我可以安全地包含 httpclient-4.0.1 jar 来替换现在已经结束生命的 commons-httpclient jar，还是我应该担心两者之间存在一些冲突？

我的一些代码正在使用 commons-httpclient，我是否应该担心两者都会带来一些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:16:05.483

不，你不应该。除了 Commons Logging 和 Commons Codec 之外，HttpClient 3.x 和 Httpclient 4.x 没有共同的依赖关系，并且应该能够很好地共存于同一个类加载器中。

# c# - dotTrace 和性能分析？

> ID：10523962
> 
> 赞同：1
> 
> 时间：2012-05-09T20:57:24.117
> 
> 标签：c#, performance, dottrace

我最近重新编写了我的文件格式编写库。我意识到我的代码很乱，让一切都变得太复杂，而且通常很难维护。

所以我的新图书馆更有条理和干净。我意识到我在旧库中完成任务的许多方法比它需要的要复杂得多，所以我希望我的新代码更快。

嗯，不完全是。我首先使用 .Net 框架中的 Stopwatch 类来测试性能。我的旧库始终更快，这让我感到震惊，因为有太多的改进和优化无法计算。

然后我使用 dotTrace Performance Profiler 对两者进行了测试。正如预期的那样，我的新库更快了——快了大约 2**倍**！我的旧库测量了 62 毫秒，而我的新库测量了 28 毫秒！

所以我不确定发生了什么。在 Visual Studio 中，我的新库要慢得多 - 事实上，它非常不一致，它的时间范围从 00::00::00.042 到 00::00::00.351！

有谁知道为什么会发生这种情况？dotTrace 说它快 2 倍，秒表说它慢 2-4 倍。

感谢大家的帮助。

*   亚历克斯

编辑：

两个库的代码相同，都只是引用新旧库。这是在控制台应用程序上测试的：

```
class Program {
    static void Main(string[] args) {
        Stopwatch sw = new Stopwatch();
        sw.Start();

        Textstring txt = new Textstring("TestText");
        txt.Text = "This is a test textstring.";
        RdwFile f = new RdwFile("Test");
        f.Add(txt);
        f.Save();

        sw.Stop();

        Console.WriteLine(sw.Elapsed.ToString());

        Console.ReadKey();
    }
}; 
```

# c++ - 函数的虚性行为

> ID：10523965
> 
> 赞同：3
> 
> 时间：2012-05-09T20:57:49.173
> 
> 标签：c++, virtual

```
class CBase {
public:
    void print()
    {
        cout<<"In base print func\n";
    };
};

class CDerived: public CBase {
public:
    void print()
    {
        cout<<"In derived print func\n";
    };
};

int main()
{
    CBase b;
    CBase* pb;
    CDerived d;
    CDerived* pd;
    pd->print();
    return 0;
} 
```

上面的代码运行良好，但是当我在类`CBase`中使用 print 函数时，`virtual`它会导致分段错误。

我认为这背后有一些我不知道的基本逻辑。请给出您的意见，为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T20:59:09.003

```
CDerived* pd;
pd->print(); 
```

指针未初始化 -> 未定义行为。

你需要

```
CDerived* pd = new CDerived;
pd->print(); 
```

此外，它运行不正常。或者更确切地说，你很不幸它运行良好。虚拟调度需要一个虚拟表，并且由于指针没有初始化，所以虚拟表指针不存在，这就是为什么当函数是虚拟的时候它会崩溃。

当它不是虚拟的时，**它仍然是未定义的行为**，但它不会崩溃，因为它不使用任何成员。

为了证明这一点，请尝试以下操作：

```
class CBase {
public:
    int y;
    void print()
    {
        cout<<"In base print func\n" << y;
    };
};

class CDerived: public CBase {
public:
    int x;
    void print()
    {
        cout<<"In derived print func\n" << x;
    };
}; 
```

即使功能不是，它也会崩溃`virtual`。

# php - 在 wordpress 中挂钩 the_content 过滤器

> ID：10523968
> 
> 赞同：0
> 
> 时间：2012-05-09T20:58:20.587
> 
> 标签：php, wordpress

我将帖子内容保存到帖子元中，并且我想检索它而不是原始帖子内容，这样当我调用 the_content() 时，帖子元中的数据不会显示为实际的帖子数据。

```
function test(){
    $post_meta = post meta data here ....
    echo apply_filters('the_content', '$post_meta');
}
add_filter('the_content', 'test'); 
```

我收到此错误

```
Fatal error: Maximum function nesting level of '100' reached 
```

这个错误确实有道理，但是我怎样才能实现我想要做的事情，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T21:46:17.913

**更新：**在我的头撞到墙上之后，这是我能想到的最好的方法来挂钩 the_content 并在自定义回调中使用它的过滤器，而不会陷入无限循环。

答案出奇的简单，之前没有想到它我觉得很傻：

```
function test($content)
{
    remove_action('the_content', 'test'); //DISABLE THE CUSTOM ACTION
    $post_meta = post meta data here ....
    $cleaned_meta = apply_filters('the_content', $post_meta);
    add_action('the_content', 'test'); //REENABLE FROM WITHIN
    return $cleaned_meta;
}
add_action('the_content', 'test'); 
```

我相信您现在已经找到了另一种解决方案，但是，我仍然希望这有助于您将来可能遇到的任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:24:50.847

我想你想在`the_content()`被调用之前添加你的过滤器。你可能想要这样的东西。

```
function modify_content() {
    global $post;
    $post_meta = 'testing';
    $post->post_content = $post_meta;
}
add_action('wp_head', 'modify_content'); 
```

这将允许您修改帖子的内容并仍然通过`the_content()`. 虽然这仅适用于单个帖子/页面。如果您也想更改存档页面，则必须找到另一个挂钩。

# javascript - 使用 JavaScript 进行日期验证

> ID：10523977
> 
> 赞同：0
> 
> 时间：2012-05-09T20:59:15.237
> 
> 标签：javascript, html, validation

我有一个这种格式的日期字符串 - “DD-MM-YYYY”这验证成功：

```
var dateFormat = /(0[1-9]|[12][0-9]|3[01])-(0[1-9]|1[012])-\d{4}/ ;
if(!startDate.match(dateFormat)){
    alert("'Start Date' must be in format: DD-MM-YYYY");
    return false; 
```

我需要检查插入的日期是否在今天的日期（或今天的日期）之后。我怎么能用 JavaScript 做到这一点？

我试过这个： [http](http://www.redips.net/javascript/date-validation/) ://www.redips.net/javascript/date-validation/ 用分隔符，没用。建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T21:10:47.977

首先，这是您在 javascript 中的当前日期：

```
var today = new Date();
var day = today.getDate();
var month = today.getMonth()+1; // Zero indexed 
```

从这里开始，您需要做的就是将其与您的开始日期进行比较！

最好的祝福！

[看看这个](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date "javascript日期对象")也许有助于理解日期对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T21:09:11.917

查看[date.js](http://datejs.com)，特别是...

[http://code.google.com/p/datejs/wiki/APIDocumentation#compare](http://code.google.com/p/datejs/wiki/APIDocumentation#compare)

> 比较第一个日期和第二个日期并返回它们相对值的数字指示。-1 = 这是 < 日期。0 = 值相等。1 = 这是 > 日期。

和方法可能对您的问题有用[`isAfter()`](http://code.google.com/p/datejs/wiki/APIDocumentation#isAfter):)[`isBefore()`](http://code.google.com/p/datejs/wiki/APIDocumentation#isBefore)

在此处下载库：

[http://code.google.com/p/datejs/downloads/detail?name=date.js&can=2&q=](http://code.google.com/p/datejs/downloads/detail?name=date.js&can=2&q=)

* * *

此外，值得一提的是 checkout [moment.js](http://momentjs.com/)。我认为这两个库是相辅相成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T22:46:20.147

你可以很容易地用[moment.js做到这一点。](http://momentjs.com)

```
var input = moment(startDate, "DD-MM-YYYY");
if (input < moment()) {
    // before today
} else {
    // after today
} 
```

我们还将很快添加日期验证。在此处查看有关验证的更多信息：[https ://github.com/timrwood/moment/pull/306](https://github.com/timrwood/moment/pull/306)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T21:06:26.700

像这样的东西应该工作。可以使用一些清理，但希望能得到重点。

```
var dateFormat = /(0[1-9]|[12][0-9]|3[01])-(0[1-9]|1[012])-(\d{4})/;
var dateMatch = startDate.exec(dateFormat);
var today = new Date();
today.setHours(0); today.setMinutes(0); today.setSeconds(0); today.setMilliseconds(0);

if ((new Date(dateMatch[3], dateMatch[2] - 1, dateMatch[1])).getTime() >= today.getTime()) {
    // Date is after or on today
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T21:40:02.387

您应该检查每种日期`getTime()`方法并进行比较。它简单明了，您不需要额外的框架。

这是一个从字符串中解析日期，然后比较它们的示例：

```
var todayDate = "10-05-2012";​ // A sample date
var compareDate1 = "10-05-2012";
var compareDate2 = "03-05-2012";
var compareDate3 = "10-07-2012";

compareDates(todayDate, compareDate1);
compareDates(todayDate, compareDate2);
compareDates(todayDate, compareDate3);

function compareDates(date1String, date2String) {
    var date1 = parseDate(date1String);
    var date2 = parseDate(date2String);
    if(date1.getTime() > date2.getTime()) {
      alert("First date(" + date1String + ") is older than second date(" + date2String + ").");                
    } else if(date1.getTime() < date2.getTime()) {
      alert("First date(" + date1String + ") is younger than second date(" + date2String + ").");                
    } else {
      alert("The dates are the same day");   
    }
}

function parseDate(stringDateParam) {
    var parsedDay = parseInt(stringDateParam.substring(0,2));
    var parsedMonth = parseInt(stringDateParam.substring(3,5))-1;
    var parsedYear = parseInt(stringDateParam.substring(6,10));
    var parsedDate = new Date(parsedYear, parsedMonth, parsedDay, 0 , 0, 0, 0);
    return parsedDate;
}
​

// Output:
//
// First check: The dates are the same day
// Second check: First date(10-05-2012) is older than second date(03-05-2012).
// Third check: First date(10-05-2012) is younger than second date(10-07-2012). 
```

您可能已经有一个将字符串解析为日期对象的函数，并且您应该实现类似于`compareDates`基于`getTime()`函数的 in 函数的检查。

如果您还有其他问题，请发表评论。祝你好运！

JSFiddle 工作示例：[点击这里](http://jsfiddle.net/2WBbA/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T07:19:35.487

谢谢你们！这成功了：

```
var today = new Date();
var Tday = today.getDate();
var Tmonth = today.getMonth()+1; // Zero indexed
var Tyear = today.getFullYear();

var aoDate;
var separator= '-';
aoDate = startDate.split(separator);

var month = aoDate[1] - 0;
    var day = aoDate[0] - 0;
    var year = aoDate[2] - 0;

    if(year < Tyear){
        alert("'Start Date' must be today or after today!");
    return false;
    }
    if((year == Tyear) && (month < Tmonth)){
        alert("'Start Date' must be today or after today!");
    return false;
    }
    if((year == Tyear) && (month == Tmonth) && (day < Tday)){
        alert("'Start Date' must be today or after today!");
    return false;
    } 
```

# css - SCSS 根据另一个设置值

> ID：10523980
> 
> 赞同：0
> 
> 时间：2012-05-09T20:59:40.447
> 
> 标签：css, sass

我只是想弄清楚SCSS是否可行。

如果我对我的要求不是很清楚，请随时向我询问更多详细信息，但这就是我想要实现的目标。

伪代码：

```
.class1 { width:100px; }
.class2 { margin-right:[.class1{width}] + 2 } 
```

编译成

```
.class1 {width:100px; }
.class2 { margin-right:102px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:18:52.510

我相信要得到你想要的，最好使用一个变量：

```
$yourWidth: 100px;
.class1 { width: $yourWidth; }
.class2 { margin-right: ($yourWidth + 2); } 
```

**更新（基于评论信息）**

您可以在下面添加一个`$ColCount`以空列表开头的全局变量，如下所示：

```
$WidthList: (); 
```

然后在计算`@mixin columns($numCols)`之后，通过添加此函数将该列的值添加到：`$colWidth``width``$WidthList`

```
join($WidthList, $colWidth); 
```

然后，一旦计算了所有列，您应该有一个包含所有`width`值的列表，以便您可以在其他地方访问它们，因此...

```
.class2 { margin-right: (nth($WidthList, 5) + 2); } 
```

...应该`.cl-col5`为`margin`.

*请注意，我没有对此进行测试。我实际上也没有使用过 SASS。我严格按照[此处](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html)和他们网站上其他地方的文档进行此操作。*

# jquery - 使用数组的jquery复选框检查

> ID：10523981
> 
> 赞同：1
> 
> 时间：2012-05-09T20:59:45.257
> 
> 标签：jquery

我试图使用多个选择选项在 jquery 中使用数组检查复选框如果单击选项 1 和选项 3，则在数组中设置 id 的复选框将变为选中状态，如果未选中则将其删除。

```
<select id="lab_abbr" multiple >
  <option value="o1">Option 1</option>
  <option value="o2">Option 2</option>
  <option value="o3">Option 3</option>
</select> 
```

和复选框

```
<input type="checkbox" name="lab[one]" id="lab_one" />
<input type="checkbox" name="lab[two]" id="lab_two" />
<input type="checkbox" name="lab[three]" id="lab_three" />
<input type="checkbox" name="lab[four]" id="lab_four" />
<input type="checkbox" name="lab[five]" id="lab_five" />
<input type="checkbox" name="lab[six]" id="lab_six" /> 
```

和最后一个jQuery

```
$(document).ready(function() {
    $("#lab_abbr").live("change", function(e)  {
        var o1 = ['lab_one', 'lab_three'];
        var o2 = ['lab_two', 'lab_six'];
        var o3 = ['lab_four, 'lab_five'];

    });
}); 
```

问候，贝斯米尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T21:26:32.837

### 给男人鱼...

```
var mapping = { 'o1' : ['lab_one', 'lab_three'], 'o2' : ['lab_two', 'lab_six'], 
                'o3' : ['lab_four', 'lab_five'] };

$("#lab_abbr").on("change", function () {
  $.each( this.options, function () {
    $( "#" + mapping[ this.value ].join(", #") ).prop("checked", this.selected); 
  });
}); 
```

演示：http: [//jsbin.com/onapem/edit#javascript,html](http://jsbin.com/onapem/edit#javascript,html)

### 教人钓鱼...

现在让我们分解它，看看每个部分的作用。

我们首先创建一个对象，该对象将用作一种关联数组。本质上，我们可以将一个值与另一个值相关联。在这种情况下，我们希望将所选选项的值（“o1”或“o2”）关联到一系列复选框：

```
var mapping = { 'o1' : ['lab_one', 'lab_three'] }; 
```

接下来，我们使用以下方法将我们的逻辑绑定到菜单`change`事件：`select``$.on`

```
$("#lab_abbr").on("change", function(){
  /* React to the change */
}); 
```

每当此菜单发生更改时，我们都希望循环其选项。我们还不担心这些选项是否被选中——我们只想访问它们中的每一个。我们通过使用`$.each`迭代器方法来做到这一点：

```
$.each( this.options, function(){
  /* Do something with each individual <option /> */
}); 
```

在这个块中，我们想要收集那些与这个选项值相关联的复选框 id。例如，如果我们想要所有与 "o1" 关联的值（这将通过我们的 表示第一个选项`$.each`，我们可以这样做：

```
alert( mapping['o1'] ); // ['lab_one', 'lab_three'] 
```

不过，我们不会动态地执行此操作。在 our`$.each`中，关键字`this`总是指当前`<option />`正在处理的。我们可以使用它的值来查找与之关联的任何字段：

```
mapping[ this.value ]; // returns an array 
```

我们想把它转换成一个 CSS 选择器来传递 jQuery，所以我们使用`.join()`返回数组的方法来创建一个字符串：

```
mapping[ this.value ].join(", #"); 
```

该`.join()`方法接受要在每个值之间添加的字符串。在上述情况下，我们的第一次迭代将返回以下字符串：

```
"lab_one, #lab_three" 
```

请注意`, #`从数组中分离两个值。我们需要`#`在这个字符串的前面有另一个，这样它`#lab_one`也将被选中。这是通过将字符连接到结果字符串来解决的：

```
$( "#" + mapping[ this.value ].join(", #") ) 
```

最后，我们调用`$.prop()`允许我们在元素上设置属性值的方法。我们要设置`checked`属性。

使用该`$.prop()`方法，您可以传入要设置的属性以及要设置的值。

```
$( /*...*/ ).prop("checked", this.selected ); 
```

请记住，`this`代表`<option />`我们当前在此迭代中访问的`$.each()`. `<option />`有一个名为的原生属性，`selected`它返回`true`或`false`- 指示它是否被选中。我们用它来告诉 jQuery 的值`"checked"`应该是什么。

因此，如果正在处理的选项是`selected`，则与之关联的每个复选框也是如此。同样，如果正在处理的选项未被选中，则与之关联的复选框也不会被选中。

### 想要一条小一点的鱼？

如果您想进一步缩短这一切，您可以将 jQuery 选择器直接存储在对象中：

```
var mapping = { 'o1' : '#lab_one, #lab_three', 'o2' : '#lab_two, #lab_six',
                'o3' : '#lab_four, #lab_five' };

$("#lab_abbr").on("change", function () {
  $.each( this.options, function () {
    $( mapping[ this.value ] ).prop( "checked", this.selected ); 
  });
}); 
```

演示：http: [//jsbin.com/onapem/2/edit](http://jsbin.com/onapem/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:09:23.407

您需要将`var`'s 定义为一个对象，然后简单地遍历选择并选中复选框。见下文，

[**演示**](http://jsfiddle.net/skram/VDe7G/4/)

```
$(document).ready(function() {
    var selections = {
                  o1: ['lab_one', 'lab_three'],
                  o2: ['lab_two', 'lab_six'],
                  o3: ['lab_four', 'lab_five']
    };

    var $checkbox = $(':checkbox');

    $("#lab_abbr").on("change", function(e)  {

        $.each ($checkbox, function (i, ck) { //uncheck all checkbox
            this.checked = false;
        });

        $.each($(this).val(), function (idx, val) { //iterate over selected options
            $.each (selections[val], function (i, v) { //iterate over the selections
                $('#' + v).prop('checked', true); //set the checkbox
            });        
        });        
    });
}); 
```

# c++ - 无名结构/联合作为类私有成员

> ID：10523985
> 
> 赞同：3
> 
> 时间：2012-05-09T20:59:46.220
> 
> 标签：c++, visual-c++, struct, warnings

我正在编写一些代码并偶然发现这样的事情：

```
class Foo
{
private:
  union {
    byte bar;
    struct {
      byte baz1;
      byte baz2;
    };
  };
}; 
```

现在，我在 VS 2010（纯非托管）下使用 4 级警告进行编译，当然 VS 抱怨无名结构/联合是非标准扩展（警告 C4201），我想修复该警告。

是否有任何理由有人更喜欢上述内容：

```
class Foo
{
private:
  byte bar;
  byte baz1;
  byte baz2;
}; 
```

或者将前者更改为后者会破坏的任何原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:04:35.987

我相信您已经知道这一点 - 如果使用联合，则内存存储在联合成员之间共享。您的第二个示例将为所有项目分配单独的存储空间，但第一个示例不会（在 bar 和匿名结构之间共享）。

一般不建议使用无名结构/联合，请参阅此 URL：

[为什么 C++ 不允许匿名结构和联合？](https://stackoverflow.com/questions/2253878/why-does-c-disallow-unnamed-structs-and-unions)

我可以看到将示例 2 更改为 1 中断，但不是 1 到 2 中断，除非您依赖于存储在联合中共享的事实（这是非常糟糕的做法）..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:07:55.733

将编译器警告级别设置为 4 将发出此警告。

`union`是的，有人更喜欢 a而不是a 是有原因的`struct`。这两种数据结构非常不同。我不会讨论支持或反对`union`这里的原因，因为这超出了范围，但[这里](http://msdn.microsoft.com/en-us/library/5dxy4b7b%28v=vs.80%29.aspx)有一个链接。

如果您想保留工会，您可以这样做：

```
class Foo
{
private:
  union {
    int bar;
    struct {
      int baz1;
      int baz2;
    } thing_;
  };
}; 
```

请注意，`Foo`现在有一个名为`thing_`type的成员`union`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:06:00.363

当然是有原因的。您的解决方案需要比带有联合的版本多 50% 的内存空间。此外，与工会一起，`foo.bar = foo.baz1`为所有人`Foo foo;`

# google-app-engine - GAE 全文搜索 API 词组匹配

> ID：10523987
> 
> 赞同：4
> 
> 时间：2012-05-09T20:59:58.380
> 
> 标签：google-app-engine, full-text-search, gae-search

我只能在 Google App Engine 的实验性 Search API 中找到与查询完全匹配的词组。例如，查询“最佳价格酒店”将仅匹配该确切短语。它不会匹配诸如“最优酒店价格”或“最优价格酒店”之类的文本。当然，以一般方式匹配文本是一项更加困难的任务，但我认为 Search API 至少能够处理其中的一些。

另一个例子是查询“new cars”，它与文本“new and used cars”不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:56:51.573

您应该能够使用“~”运算符重写查询以包含复数。例如，`~hotel`或`~"best prices hotel"`。

有关此运算符的文档应在下一个应用引擎 SDK 版本中添加。

# .net - 如何在没有 ShowDialog() 的情况下等待表单关闭？

> ID：10523990
> 
> 赞同：3
> 
> 时间：2012-05-09T21:00:13.257
> 
> 标签：.net, vb.net, oauth, webbrowser-control, showdialog

在我的程序中，我使用 WebBrowser 控件进行 OAuth。它位于`vk_auth_window`表格上。所以在我调用的代码中`vk_auth_window.WebBrowser1.Navigate(vkauthurl)`。如果身份验证成功，我会默默地获取令牌，但如果用户未通过身份验证，`vk_auth_window`则会向他们显示一个表单以输入用户名和密码。要检查这一点，我会捕获 _DocumentComplete 事件并检查正确的 URL。在用户完成身份验证或关闭身份验证表单之前，我不需要执行其他代码。ShowDialog() 可以解决问题，但它以某种方式隐藏了 WebBrowser 控件中用户名和密码字段的光标。因此，我在 _DocumenComplete 事件中引入了一个变量`Dim showform as Boolean=True`并将其设置为 False，并且在主代码中我使用了无限循环。

```
While showform
       System.Threading.Thread.Sleep(100)
       Application.DoEvents()
End While 
```

但是，由于线程休眠，它会使用户输入变慢。如果我删除它们，它会大量加载 CPU。有没有更好的方法来等待表单关闭？它是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T14:18:35.250

不要使用定时器。为此举办了活动。您必须订阅 Form 的 FormClosing 事件。窗口关闭后应该执行的代码必须在事件处理方法中。

使用 AddHanlder 关键字。

```
AddHandler yourForm.FormClosing, AddressOf FormClosingEventhandler 
```

稍后使用事件处理程序继续：

```
Private Sub FormClosingEventhandler()
    'proceed here
End Sub 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)
[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing .aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)

# php - 重定向后 PHP 会话丢失；刷新后返回

> ID：10523991
> 
> 赞同：2
> 
> 时间：2012-05-09T21:00:18.110
> 
> 标签：php

我有一个已经运行了几年的登录代码。没有更改任何代码，并且服务器主机声称没有任何更改会影响会话。

这是基本的破败：

```
1\. User enters login info

2\. Sent to process.php
   - Sets a $_SESSION['userid'] variable if validation was successful
   - Redirected back to previous page (using exit after header())

3\. $_SESSION['userid'] is not set.

4\. Refresh Page.

5\. $_SESSION['userid'] is now set properly. 
```

所有页面都有`session_start()`. 我也试过使用`session_regenerate_id(true);`并`session_write_close();`没有改变。

欢迎任何关于服务器配置的想法或我的代码中的错误。

# android - Android httppost/连接/登录问题

> ID：10523995
> 
> 赞同：1
> 
> 时间：2012-05-09T21:00:33.777
> 
> 标签：android, http-post

我在连接数据库时遇到问题。应用程序启动，一切似乎都很好，但总是返回我登录不成功 - 连接问题。

```
package kur.jie;

import java.io.InputStream;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

import kur.jie.R;
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class jieActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
       EditText etUser, etPass;
           Button bLogin;
        // Create string valuables
       String username, password;
       HttpClient httpclient;

       HttpPost httppost;
       ArrayList<NameValuePair> NameValuePairs;
       HttpResponse response;
       HttpEntity entity;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);          
            initialise();
        }

        private void initialise() {
            etUser = (EditText) findViewById(R.id.etUser);
            etPass = (EditText) findViewById(R.id.etPass);
            bLogin = (Button) findViewById(R.id.bSubmit);
            //Now to set an onClickListener
            bLogin.setOnClickListener(this);
        }

        public void onClick(View v) {
            httpclient = new DefaultHttpClient();
            httppost  = new HttpPost("http://www.xxx.lt/app/login.php");

            username = etUser.getText().toString();
            password = etPass.getText().toString();         

            try {

                NameValuePairs = new ArrayList<NameValuePair>();

                NameValuePairs.add(new BasicNameValuePair("username",        username));
                NameValuePairs.add(new BasicNameValuePair("password", password));

                httppost.setEntity(new UrlEncodedFormEntity(NameValuePairs));

                response = httpclient.execute(httppost);

                if  (response.getStatusLine().getStatusCode()==200){
                    entity = response.getEntity();

                if (entity != null) {

                    InputStream instream = entity.getContent();

                    JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                    String retUser= jsonResponse.getString("user");
                    String retPass= jsonResponse.getString("pass");

                    if (username.equals(retUser) && password.equals(retPass)) {

                        SharedPreferences sp = getSharedPreferences("logindetails", 0);
                        SharedPreferences.Editor spedit = sp.edit();
                        spedit.putString("user", username);
                        spedit.putString("pass", password);
                        spedit.commit();

                        Toast.makeText(getBaseContext(), "Success", Toast.LENGTH_SHORT).show();

                    } else {

                    Toast.makeText(getBaseContext(), "Invalid Login", Toast.LENGTH_SHORT).show();

                    }

                }
                }

            } catch(Exception e){
                e.printStackTrace();
                //Display toast when there is a connection error
                //Change message to something more friendly
                Toast.makeText(getBaseContext(), "Login Unsuccessful.", Toast.LENGTH_SHORT).show();

                }
            }

        private static String convertStreamToString(InputStream is) {

            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            return sb.toString();
        }//END convertStreamToString()

} 
```

我的 php 重新运行 json`{"id":"1","user":"xxxx@xxx.com","pass":"xxxx","long":"54.74086","lat":"25.27145","stop_id":"1","status":"+"}`

我正在记录来自 php 文件的所有数据，但来自应用程序的任何数据。

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="kur.jie"
    android:versionCode="1"
    android:versionName="1.0" >

   <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="12" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".jieActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有任何想法吗？

反正粉丝..

# jquery - Jquery prop() 返回未定义

> ID：10523996
> 
> 赞同：0
> 
> 时间：2012-05-09T21:00:37.393
> 
> 标签：jquery

我是 Jquery 的新手并尝试发出 http 请求，这样我就不必离开当前页面，但是

```
var getURL = $("#callerId").attr("href"); 
```

似乎没有工作 console.log(getURL) 显示“未定义”

有源代码（到 callerId 的所有内容都应该是正确的）

```
 <script type = "text/javascript">

$(document).ready(function() {
    $('ul.hrefURL a').click(function(dontRedirect) {
        dontRedirect.preventDefault(); 
        var callerId = event.target.id;
        var getURL = $("#callerId").attr("href");
        $.ajax({
            type : "GET",
            url: getURL,
            success: function(response){
                alert($('#response'));  
            }
        });

    });
});

</script>

<a href="javascript:document.location = TTS1" id = "1T"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:03:45.253

你需要使用

```
var getURL = $(this).attr("href"); 
```

代替

```
var getURL = $("#callerId").attr("href"); 
```

在第一种情况下`$(this)`，指向您刚刚单击的锚点的 jquery 对象，在第二种情况下 - 它指向您的示例甚至未涵盖的某些元素

现场示例：http: [//jsfiddle.net/zerkms/YJRLR/](http://jsfiddle.net/zerkms/YJRLR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:05:32.053

我认为您打算这样做：

```
<script type = "text/javascript">

$(document).ready(function() {
    $('ul.hrefURL a').click(function(e) {
        e.preventDefault(); 
        var getURL = this.href;
        $.ajax({
            type : "GET",
            url: getURL,
            success: function(response){
                alert($('#response'));  
            }
        });

    });
});

</script> 
```

关于您以前的代码需要了解的事项：

1.  `this`将自动设置为导致事件的对象，因此您不必获取`target.id`.
2.  You can get the value of href with `this.href`. There is no need to use jQuery for that.
3.  If you wanted to make the value of `this` into a jQuery object, you would do it with `$(this)` or with `$(e.target.id)`. You use strings with jQuery when it's a CSS selector. You use variable values directly when you already have the object reference.

# php - 两次使用不同的名称上传图像php mysql

> ID：10523999
> 
> 赞同：1
> 
> 时间：2012-05-09T21:00:48.840
> 
> 标签：php, mysql, file-upload, file-rename

我正在**尝试**通过具有不同名称的php 将图像上传到服务器（在 mysql 表中具有路径）**两次。**图像的一个版本为“xxxx.png”，图像的另一个版本为“xxxxt.png”。

**我的PHP是：**

```
<?php

if ($_FILES['photo']) {
  $target = "images/properties/";  
  $target = $target . basename( $_FILES['photo']['name']); 

  $pic = "images/properties/" .(mysql_real_escape_string($_FILES['photo']['name']));

  if (move_uploaded_file($_FILES['photo']['tmp_name'], $target)) {
    mysql_query("INSERT INTO `images` (`productcode`, `photo`) VALUES ('$productcode', '$pic' )");
    echo "The new image has been added successfully"; 
  } else { 
    echo "Error uploading new image - please check the format and size"; 
  }
}

?> 
```

以上代码将图片插入mysql数据库，并正确上传文件到服务器。但是，我试图在“缩略图”版本上使用不同的命名约定两次上传相同的图像。我的 html 中的幻灯片脚本仅在文件名末尾带有“t”的情况下才能识别缩略图，因此是我的问题。

有人建议我查看[php copy()](http://php.net/manual/en/function.copy.php)函数来实现这一点，但我非常不清楚如何将这样的函数合并到我现有的代码中。如果需要，很乐意提供 html 或任何其他信息。

非常感谢任何帮助。我确实有另一个线程试图找出同样的事情，但我不是很清楚！

谢谢京东

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:49:43.313

如果我正确理解你，你不需要上传这个文件两次。您的服务器上已经有了这个文件。所以你应该把它复制到你的服务器的硬盘上（可以选择做一些过渡使它更像一个缩略图）并更新数据库。

您的代码应该与此类似：

```
<?php 
if($_FILES['photo'])
{
  $target_dir = "images/properties/";

  $upload_file_name = basename( $_FILES['photo']['name']);
  $upload_file_ext = pathinfo($_FILES['photo']['name'], PATHINFO_EXTENSION);

  $target_file = $target_dir . $upload_file_name . '.' . $upload_file_ext;
  $target_file_sql = $target_dir . mysql_real_escape_string($upload_file_name . '.' . $upload_file_ext);
  $target_thumb = $target_dir . $upload_file_name . 't.' . $upload_file_ext;
  $target_thumb_sql = $target_dir . mysql_real_escape_string($upload_file_name . 't.' . $upload_file_ext);

  if (move_uploaded_file($_FILES['photo']['tmp_name'], $target_file)) 
  {  
    mysql_query("INSERT INTO `images` (`productcode`, `photo`) VALUES ('$productcode', '$target_file_sql' )");
    echo "The new image has been added successfully"; 

    if (copy($target_file, $target_thumb))
    {
        mysql_query("INSERT INTO `images` (`productcode`, `photo`) VALUES ('$productcode', '$target_thumb_sql' )");
        echo "The new thumb image has been added successfully";
    } else 
    {
        echo "Error copying thumb file";
    }

  } else 
  { 
    echo "Error uploading new image - please check the format and size"; 
  }
} 
```

同样，这个想法是您不需要连续两次上传文件。您需要做的就是将其复制到服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:19:25.327

正如您被告知的那样，您应该使用 copy()。我没有完全测试这个，但试一试：

```
<?php

if ($_FILES['photo'])
{
    $target = "images/properties/";

    $ext = array_pop(explode('.', $_FILES['photo']['name']));
    $copy = $target . basename($_FILES['photo']['name'], '.' . $ext) . 't.' . $ext;

    $target = $target . basename($_FILES['photo']['name']);

    $pic = "images/properties/" .(mysql_real_escape_string($_FILES['photo']['name']));

    if (move_uploaded_file($_FILES['photo']['tmp_name'], $target))
    {
        copy($target, $copy);
        mysql_query("INSERT INTO `images` (`productcode`, `photo`) VALUES ('$productcode', '$pic' )");
        echo "The new image has been added successfully";
    }
    else
    {
        echo "Error uploading new image - please check the format and size";
    }
}
?> 
```