# StackOverflow 问答 11181000-11181999

# ios - AVAudioRecorder 录制后音量按钮不起作用

> ID：11181007
> 
> 赞同：2
> 
> 时间：2012-06-24T20:34:15.740
> 
> 标签：ios, avaudioplayer, avaudiorecorder, avaudiosession

在录制音频之前，音量按钮在 AVAudioPlayer 播放会话期间工作正常。一旦我用 AVAudioRecorder 录制音频，然后我回到 AudioPlayer（它们在不同的 ViewController 中），音量按钮就不再起作用了。

我将 AVAudioSession 设置为活动并在录制期间将类别设置为 AVAudioSessionCategoryRecord，在播放期间将类别设置为 AVAudioSessionCategoryPlayback。

我不知道我还能设置什么来影响这种行为。

我希望有人能给我一些提示，以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:34:57.133

在我的项目中，我将 AVAudioSession 从 Record 更改为 Playback 并不断地再次返回，并且在 Playback 模式下启用音量按钮并正常工作。当我将音频会话模式从纯录制更改为 AVAudioSessionCategoryPlayAndRecord 时，音量按钮始终有效。

# nhibernate - 使用 Nhibernate CreateSQLQuery() 方法未处理 GenericADOException

> ID：11181015
> 
> 赞同：0
> 
> 时间：2012-06-24T20:35:56.460
> 
> 标签：nhibernate, c#-4.0, nhibernate-criteria, queryover

以下代码有什么问题？

```
public IList<T> GetPostsByUser(object UserId)
    {
        using (var session = sessionFactory.OpenSession())
        {
            using (var transaction = session.BeginTransaction())
            {
                var queryString = string.Format("SELECT C FROM {0} AS C WHERE UserId=:UserId", typeof(T));
                return session.CreateSQLQuery(queryString).SetParameter("UserId", UserId).List<T>();
                //return session.QueryOver<T>().List<T>().IsLike(UserId).List();
            }
        }
    } 
```

注意：**UserId**被强制转换为对象，但它的来源来自**System.GUID**

例外：

> 无法执行查询 [SELECT C FROM FNHRepository.Entites.Post AS C WHERE UserId=@p0] Name:UserId - Value:3010cd36-539c-4b32-a0fb-976bca58ad38 [SQL: SELECT C FROM FNHRepository.Entites.Post AS C WHERE用户 ID=@p0]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:11:13.867

注意我明确地说参数将是 String 类型，这将确保 Nhibernate 将字符串包装在单引号 ( `''`) 中，这是查询所期望的。如果您想使用 SetParameter 那么您的查询需要设置单引号，即您的查询应该是

```
string.Format("SELECT C FROM {0} AS C WHERE UserId=':UserId'", typeof(T)); 
```

因此使用这个：

```
var queryString = string.Format("SELECT C FROM {0} AS C WHERE UserId=:UserId", typeof(T)); // you can use SetGuid too, which will again wrap it with quotes
return session.CreateSQLQuery(queryString).SetString("UserId", UserId).List<T>(); 
```

或者

```
var queryString = string.Format("SELECT C FROM {0} AS C WHERE UserId=':UserId'", typeof(T));
return session.CreateSQLQuery(queryString).SetParameter("UserId", UserId).List<T>(); 
```

另外，我建议您使用`typeof(T).Name`而不是使用完全限定名称。

# xml - XSD 正则表达式：为什么在使用 XSLT 解析为 HTML 时这不起作用？

> ID：11181030
> 
> 赞同：3
> 
> 时间：2012-06-24T20:38:22.717
> 
> 标签：xml, regex, xslt, xsd

我有一个“格式正确且有效”的 XML 文件（与 XSD 模式匹配，在[http://xsdvalidation.utilities-online.info/](http://xsdvalidation.utilities-online.info/)进行了测试）。

我在 XSD 中使用这些代码行来限制 a 的 XML 输入`<firstname>`：

```
<xsd:pattern value = "[A-Z][a-z]+" />
<xsd:minLength value = "2" />
<xsd:maxLength value = "25" /> 
```

`<firstname>`因此，上面提到的网站会在不匹配此正则表达式和长度限制 时抛出错误并且不验证（例如，如果我在 XML 文件中输入“5”作为名字）。

**但是**，当我在 Firefox 中打开 XML 文件（使用 XSL 文件解析为 HTML）时，它不会**抛出**错误，并且会显示输入到 XML 文件中的任何内容，而不管正则表达式和长度限制如何。

XSD 模式是否不打算以这种方式用于 Web 浏览器中的错误检查？我是否需要使用 XSLT 中的限制而不是 XSD？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:56:23.327

XSD 验证仅在您请求时才会发生。指定 xsi:schemaLocation 本身并不构成执行验证的请求（尽管有一些工具，例如 Altova，以这种方式解释它）。

我实际上并不知道任何在浏览器中工作的 XSD 验证器，但这并不意味着不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T20:51:27.547

*   您似乎将 Web 浏览器用作 XML 验证器，但事实并非如此。Web 浏览器是非常宽容的工具，因为网站非常多样化，并且偶尔会违反各种规则。

*   firefox 看到的不是 XSL 转换的输入，即有效或无效的 XML 文件，而是转换的输出，它不一定对您计算机上的任何特定模式有效。XSL 转换的工作是将文档转换为*其他东西*，在本例中为 XHTML。现在虽然有一个用于验证 XHTML 的模式，但它肯定对名字没有任何限制，因此转换的输出很可能是有效的。

*   XML 格式良好（意味着文档在成对标记等方面*是*XML）和有效性之间存在差异。有效性是相对于特定模式的。这就是为什么您会看到“格式正确且有效”这一短语。

重点应该是，如果 XML 不是 HTML，则获取一个用于处理 XML 的验证 XML 编辑器。浏览器可以显示任意 XML，但仅此而已。如果您必须使用浏览器并显示 XSLT 中的错误，您可以执行以下操作：

```
<xsl:message terminate='yes'>message here</message> 
```

...但这与 XSD 无关。那是一种不同的技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T21:52:32.443

XPath 2.0（和 XSLT 2.0）是一种强类型语言，可以验证所有内置和用户定义的模式类型。

**可以使用 XSLT 2.0 SA（面向模式）处理器来强制执行以下[模式类型验证](http://www.w3.org/TR/2007/REC-xslt20-20070123/#stylesheets-and-schemas)：**

1.  源 XML 文档。

2.  传递给模板/(xsl:) 函数或（外部）传递给样式表的任何参数的值。

3.  任何 的值`xsl:variable`。

4.  任何模板或 xsl:function 产生的结果

**正确使用这些功能可以使转换结果的任何转换后验证变得不必要**。

# google-maps - Javascript：操作 Fusion Tables 层上的单个标记

> ID：11181033
> 
> 赞同：1
> 
> 时间：2012-06-24T20:39:00.347
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-fusion-tables

我有一个大约 1000 个条目的 Fusion Table，我使用 FusionTablesLayer 在地图上显示它们。我想生成距离地图中心最近的五个标记的列表。单击列表项应为相应的标记生成一个信息窗口。它看起来很像这个网站上的第一个示例： [https ://developers.google.com/maps/location-based-apps](https://developers.google.com/maps/location-based-apps)

但如果我没记错的话，图层不允许访问单个标记。另一方面，如果我使用 Overlay，则 1000 个标记的渲染必须在客户端完成，显然我不希望这样。

我该怎么做呢？为 5 个标记制作叠加层，为其余标记制作 FusionTablesLayer？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:44:59.527

这是[一个示例](http://www.geocodezip.com/orderby_test_gviz_numbered.html)，显示了距离地图中心最近的 10 个标记。

这是[一个执行侧边栏的示例](http://www.geocodezip.com/v3_FusionTables_AfricaMap_kml_sidebar.html)。

这是[一个](http://www.geocodezip.com/orderby_test_gviz_numbered_sidebar.html)结合了两者的例子。

# javascript - 从 API 调用中选择选项

> ID：11181036
> 
> 赞同：1
> 
> 时间：2012-06-24T20:39:35.353
> 
> 标签：javascript, html, api, html-select

我的示例中的 API 返回 id、名称对

```
 <categories>
   <category id="5" name="Bollywood"/>
   <category id="484" name="International"/>
   ...
  </categories> 
```

我正在尝试有一个下拉列表，允许用户从选项中进行选择

```
 <select class="action" id="categoryEvent" onchange="change(value)" style="display: block">
   <script type="text/javascript">
      var url = "http://api.hungama.com/metroapp/categories.php?format=json";
      var id,name;
      var data = JSON.parse(url);
      data.category.forEach(function (content) {
   </script>
    <option value="id">name</option>  //id, name from api
   <script type="text/javascript">
        }
   </script> 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:51:56.987

看起来这是你想要的：

```
<select class="action" id="categoryEvent" onchange="change(value)"></select>
<script type="text/javascript">
    var url = "http://api.hungama.com/metroapp/categories.php?format=json";
    var id, name;
    var xhr;
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
    } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            var res = JSON.parse(xhr.responseText),
                data = res.category;
            for(var i = 0; i < data.length; i++) {
                var ele = document.createElement("option");
                ele.value = data[i].id;
                ele.innerHTML = data[i].name;
                document.getElementById("categoryEvent").appendChild(ele);
            }
        }
    }
    xhr.open("GET", url, true);
    xhr.send();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:45:46.110

在 html 文档中，您应该在一侧声明 select html 元素，在另一侧声明 script 元素。

例如：

```
<select class="action" id="categoryEvent" onchange="change(value)">
</select>

<script type="text/javascript">
//manipulate the select
var select = document.getElementById("categoryEvent");
var newOption = document.createElement("option");
select.appendChild(newOption);
</script> 
```

# uitableview - XCode和使用monotouch的真实显示器（模拟器和设备）之间的UITableView高度不同

> ID：11181037
> 
> 赞同：0
> 
> 时间：2012-06-24T20:39:39.230
> 
> 标签：uitableview, xamarin.ios

我创建了一个 UIView 并使用 XCode 进行了修改：

![在此处输入图像描述](../Images/5acd9d81c5fb8a300bb43223f3188ffb.png)

但是模拟器和设备上的结果显示是：

![在此处输入图像描述](../Images/1c1d521928cf463422fe3dcb0f151db2.png)

那么，为了保持 XCode 版本上定义的高度，有一些属性或任何东西吗？请注意，该表比模拟器上的表大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:55:25.980

您需要检查部分高度、页眉和页脚：

![XCode 截图](../Images/f62f980d2d8faf53154c43c3eb1cacfe.png)

很难看到图片中发生了什么，但请确保您正在使用部分 - 它看起来几乎就像您有多个`UITableViews`. 您应该只需要在此处为​​您的 UI 使用一个 tableview。

要检查的第二件事是那些`UISearchBars`. 他们应该在那里吗？

# windows - 为什么 MinGW/MSys 会更改二进制路径？

> ID：11181038
> 
> 赞同：3
> 
> 时间：2012-06-24T20:39:48.577
> 
> 标签：windows, cmd, mingw, msys

我正在使用 Mingw 构建一个 C/C++ 项目。这个项目的 makefile 超出了我的理解，并且依赖于一个自定义且非常复杂的工具链来编译它。在 Windows 上使用 GNU 工具非常方便，尤其是来自 Windows 的 cmd shell，但是在调用这些工具（特别是 make）时，MinGW 似乎改变了我的 PATH。

Cmd 正常执行：

```
echo %PATH% > ... c:\Apps\msys\bin ... (from cmd) 
```

但 msys 将此地址更改为：

```
echo $PATH > ... /usr/bin ... 
```

在 msys 中，即使我从 makefile 打印 PATH 也是如此。结果，make 抱怨它找不到诸如 make、uname、echo 之类的命令，你可以命名它（不是双关语）。

奇怪的是，我很久以前就成功地让这个环境正常工作了，但这是我记得第一次看到这个路径问题。如何让 MinGW/msys 正确指向其可执行文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:49:51.343

理查德有一点 - 有两个不同的shell争夺环境变量（更不用说运行msys），因此每个shell都以不同的方式解析自己的环境变量和系统的环境变量。

还要确保在您的用户或系统环境中定义的变量正确编写 - Windows 喜欢“C:\foo\bar”样式的路径，但 Msys 将它们视为“/c/foo/bar”。

# python - 这个程序中的“返回斐波那契......”是怎么回事？

> ID：11181047
> 
> 赞同：3
> 
> 时间：2012-06-24T20:41:59.487
> 
> 标签：python, recursion, fibonacci

我无法理解`return fibonacci( number-1 ) + fibonacci( number-2 )`以下程序中的作用：

```
import sys
def fibonacci( number ):
    if( number <= 2  ):
        return 1
    else:
        return fibonacci( number-1 ) + fibonacci( number-2 ) 
```

问题是我无法想象这条线是如何工作的：

```
return fibonacci( number-1 ) + fibonacci( number-2 ) 
```

“fibonacci(number-1)”和“fibonacci(number-2)”是否同时处理？或者“fibonacci(number-1)”是第一个被处理然后是第二个？

我只看到处理它们最终都会返回“1”，所以我希望看到的最后一个结果是“1 + 1”=“2”

如果有人能详细解释其计算过程，我将不胜感激。

我认为这是一个非常新的问题，但我无法真正了解其过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T21:01:10.123

你为什么不做这样的事情：

```
>>> def fibonacci(number):
...     if number < 2:
...         return number
...     print "Number is currently %d, getting fibonacci(%d)" % (number, number - 1)
...     minus_one = fibonacci(number-1)
...     print "Number is currently %d, just got fibonacci(%d), now getting fibonacci(%d)" % (number, number - 1, number - 2)
...     minus_two = fibonacci(number-2)
...     print "Number is currently %d, returning %d + %d" % (number, minus_one, minus_two)
...     return minus_one + minus_two 
```

所以当你打电话时，`fibonacci`你会得到这样的东西：

```
>>> fibonacci(4)
Number is currently 4, getting fibonacci(3)
Number is currently 3, getting fibonacci(2)
Number is currently 2, getting fibonacci(1)
Number is currently 2, just got fibonacci(1), now getting fibonacci(0)
Number is currently 2, returning 1 + 0
Number is currently 3, just got fibonacci(2), now getting fibonacci(1)
Number is currently 3, returning 1 + 1
Number is currently 4, just got fibonacci(3), now getting fibonacci(2)
Number is currently 2, getting fibonacci(1)
Number is currently 2, just got fibonacci(1), now getting fibonacci(0)
Number is currently 2, returning 1 + 0
Number is currently 4, returning 2 + 1
3 
```

它仍然很复杂，但至少现在您可以看到该函数正在做什么来计算您的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T20:44:47.210

> “fibonacci(number-1)”和“fibonacci(number-2)”是否同时处理？或者“fibonacci(number-1)”是第一个被处理然后是第二个？

有关系吗？

* * *

发生的事情是该函数被调用了两次。一次是`number`-1，一次是-2，因为那个值`number`被传递给函数的*当前*“实例”。

说你打电话`fibonacci(3)`。那条线最终会是：

```
return fibonacci(2) + fibonacci(1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T21:04:47.140

我非常喜欢诺伦皇室的回答，但还是有点难以想象。所以，经过一番折腾： ![在此处输入图像描述](../Images/b09fb3750d6d589fc5680a2de6ffb0f3.png)

...时间从左到右流动的地方，稍作调整以防止一些重叠的边缘。不递归的叶子节点是橙色的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T21:13:50.453

一开始我在理解递归时遇到了一些麻烦，所以我会尝试通过这个函数。

现在假设您调用 fibonacci(4)

由于数字大于 2 python 将转到此行：

返回斐波那契（数字-1）+斐波那契（数字-2）

因此它将开始评估并调用：

斐波那契 (3) #这是斐波那契 (4 - 1)

因为每次遇到函数调用时，它都必须运行它（可以这么说）。

所以现在它会尝试做 fibonacci(3)，因为它大于 2：

它将再次进入这一行：

返回斐波那契（数字-1）+斐波那契（数字-2）

现在它用 3 调用它，所以当它到达 fibonacci(number-1) 时，它将执行以下操作：

斐波那契(2) #这是斐波那契(3 - 1)

由于数字等于 2，因此此递归调用将返回 1。现在您必须记住/想象 python 知道 fibonacci(2) 的答案可以这么说。

所以现在它有了 fibonacci(2) 的答案，它将继续执行这一行：

返回斐波那契（数字-1）+斐波那契（数字-2）

具体来说：+ fibonacci(number-2)

请记住，我们正站在斐波那契（2）中，所以这将执行斐波那契（1），这将返回 1。

所以现在当我们返回时，我们开始返回，也就是说，我们递归地退出函数。

出了什么问题？当我们做斐波那契（4）时，我们需要知道斐波那契（3），斐波那契（2），斐波那契（1），现在我们知道了。

所以当它递归到斐波那契（3）时，它需要知道斐波那契（2）和斐波那契（1）并且它知道，所以现在我们现在是斐波那契（3）。

现在我们回到斐波那契（4），我们需要知道斐波那契（3）和斐波那契（2），我们都知道，所以它会返回什么，两者的总和。

我希望很清楚，递归很难遵循，但通过练习会变得更好。

尝试通过调用来跟踪函数调用（用铅笔写下）你正在调用什么调用，以及你从调用中得到的结果。

请记住，在这种递归中，您会在“寻找答案”的递归级别中下降，当您获得这些答案（返回）时，您会再次返回以给出未知值的答案。

# perl - 制作 IRC 机器人 - 我怎样才能让人们 !eval perl/javascript 代码？

> ID：11181049
> 
> 赞同：1
> 
> 时间：2012-06-24T20:42:13.497
> 
> 标签：perl, irc, evaluation, poe

我正在使用 Perl（基于 POE）开发一个机器人，到目前为止一切都很好，但我不知道如何添加一个`!js`or`!perl`命令来评估相应的代码并返回一行输出以打印到通道中. 我找到了[App::EvalServer](http://search.cpan.org/~hinrik/App-EvalServer-0.08/lib/App/EvalServer.pm)但我不知道如何使用它。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:37:00.653

该`App::EvalServer`模块附带一个二进制文件，可作为[独立应用程序](http://search.cpan.org/~hinrik/App-EvalServer-0.08/bin/evalserver)运行。你不要把它放在你的程序中，而是自己运行它。它打开一个端口，您可以在其中将代码作为 json 字符串传递。这对我来说也不是一个好主意。

您可能想查看另一个名为[Safe](http://search.cpan.org/~rgarcia/Safe-2.33/Safe.pm)的模块。我建议您在对此进行任何操作之前通读完整的文档以及[Opcode](http://search.cpan.org/~rjbs/perl-5.16.0/ext/Opcode/Opcode.pm)的文档（链接在文档中）。**如果您评估任意代码，您可能会造成严重损害！**永远别忘了。

* * *

**更新：**

下面是一个示例，说明如何捕获 ed 代码的输出`print`或`say`来自`eval`ed 代码的输出。您可以使用[`open`](http://perldoc.perl.org/functions/open.html)with a variable 使`print`ed 输出始终转到该变量。如果你之后切换回来，你可以在你的 var 中使用捕获的输出。这称为*内存文件*。

```
use strict; use warnings;
use feature 'say'; 
use Safe;

# Put our STDOUT into a variable
my $printBuffer;
open(my $buffer, '>', \$printBuffer);
# Everything we say and print will go into $printBuffer until we change it back
my $stdout = select($buffer);

# Create a new Safe
my $compartment = new Safe;
$compartment->permit(qw(print)); # for testing

# This is where the external code comes in:
my $external_code = qq~print "Hello World!\n"~;

# Execute the code
my $ret = $compartment->reval($external_code, 1);

# Go back to STDOUT
select($stdout);

printf "The return value of the reval is: %d\n", $ret;
say "The reval's output is:";
say $printBuffer;

# Now you can do whatever you want with your output
$printBuffer =~ s/World/Earth/;
say "After I change it:";
say $printBuffer; 
```

免责声明：**使用此代码需要您自担风险！**

* * *

**更新 2**：经过长时间的聊天讨论，这就是我们想出的。它实现了一种超时来停止执行，如果`reval`需要很长时间，例如由于无限循环。

```
#!/usr/bin/perl
use warnings;
use strict;
use Safe;
use Benchmark qw(:hireswallclock);

my ($t0, $t1); # Benchmark
my $timedOut = 0;
my $userError = 0;
my $printBuffer;
open (my $buffer, '>', \$printBuffer);
my $stdout = select($buffer);
my $cpmt = new Safe;
$cpmt->permit_only(qw(:default :base_io sleep));
eval
{
        local $SIG{'ALRM'} = sub { $timedOut = 1; die "alarm\n"};
        $t0 = Benchmark->new;
        alarm 2;
        $cpmt->reval('print "bla\n"; die "In the user-code!";');
#         $cpmt->reval('print "bla\n"; sleep 50;');
        alarm 0;
        $t1 = Benchmark->new;
        if ($@)
        {
                $userError = "The user-code died! $@\n";
        }
};
select($stdout);

if ($timedOut)
{
        print "Timeout!\n";
        my $td = timediff($t1, $t0);
        print timestr($td), "\n";
        print $printBuffer;
}
else
{
        print "There was no timeout...\n";
        if ($userError)
        {
                print "There was an error with your code!\n";
                print $userError;
                print "But here's your output anyway:\n";
                print $printBuffer;
        }
        else
        {
          print $printBuffer;
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:05:27.363

看一下[perl eval()](http://perldoc.perl.org/functions/eval.html)，您可以将变量/字符串传递给它，它会像 perl 代码一样评估它。同样在 javascript 中，还有一个[eval()](http://www.w3schools.com/jsref/jsref_eval.asp)函数执行类似的操作。

但是，**不要**在 perl 或 javascript 中评估任意代码，除非您可以在完全封闭的环境中运行它（即使那样，这仍然是一个坏主意）。很多人花费大量时间来[防止这种情况发生](http://en.wikipedia.org/wiki/Arbitrary_code_execution)。所以你就是这样做的，但你根本不想这样做。

# python - django开发服务器退出

> ID：11181053
> 
> 赞同：2
> 
> 时间：2012-06-24T20:42:40.830
> 
> 标签：python, django, django-views

当我尝试在 django 开发服务器上访问我的应用程序的特定页面时，服务器突然退出，没有错误消息，使浏览器出现“错误 324 (net::ERR_EMPTY_RESPONSE)”

我可以在代码中做什么样的事情会导致开发服务器突然退出而没有错误消息？

不会记录触发服务器退出的 GET 请求。例如，在启动服务器并尝试获取问题页面之一后，我的命令行如下所示：

```
(mysite)01:25 PM benjamin ~/projects/mysite $ runserver
Validating models...

0 errors found
Django version 1.3.1, using settings 'mysite.settings'
Development server is running at http://127.0.0.1:8000/
Quit the server with CONTROL-C.
(mysite)01:28 PM benjamin ~/projects/mysite $ 
```

我正在使用 Python 2.6 在 vi​​rtualenv 中运行 django 1.3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-01T13:48:51.620

当您尝试使用具有*相同文件名和相对路径的*另一个模板扩展模板时，可能会发生总线错误。

### 例子

假设您想`poll.html`为应用程序使用自己的模板`voting`，但为了尽可能多地重用，您从*原始*poll.html 扩展：

```
<!-- myapp/templates/voting/poll.html -->
{% extends 'voting/poll.html' %}
<!-- Trying to extend from 'voting/templates/voting/poll.html' -->
... 
```

这会给您带来总线错误，因为模板正在扩展“自身”，即使这不是您想要做的。

您自己`voting/poll.html`正在从投票应用程序中隐藏原始`poll.html`文件，永远找不到

```
myproject/myapp/templates/voting/poll.html
myproject/voting/templates/voting/poll.html <-- you cannot extend from this 
```

我还没有找到一个通用的解决方案，但是我在尝试自定义管理应用程序时遇到了问题`index.html`，为此有一个解决方案（见下文）。

### 自定义“管理员”应用

尝试`index.html`在管理应用程序中自定义并从原始`admin/index.html`. 此处描述了该特定问题的解决方案：[如何覆盖和扩展基本的 Django 管理模板？](https://stackoverflow.com/a/20790068/118608)- 你命名你自己的`admin/index.html`东西，为了从原来的扩展`admin/index.html`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T18:54:10.990

我发现这个是因为我遇到了类似的问题。原来我的内存用完了。我想如果它对某人有帮助，我会提到它。

# php - 带有 jQ uery 动态内容的 SEO 安全锚链接

> ID：11181055
> 
> 赞同：2
> 
> 时间：2012-06-24T20:42:57.440
> 
> 标签：php, jquery, seo, navigation, bandwidth

所以...这是在您的网站上使用内部链接的安全方式吗.. 通过这样做，我有索引页面生成通常的 php 内容部分并将其交给 div 元素。

**主要问题：**谷歌仍会使用这种方法索引页面吗？常识告诉我确实如此。但只要仔细检查并将其留在这里作为基本示例，如果是的话。如在。

## **仅举例人**

* * *

服务器端

```
if (isset($_REQUEST['page'])) {$pageID=$_REQUEST['page'];} else {$pageID="home";}
if (isset($_REQUEST['pageMode']) && $_REQUEST['pageMode']=="js") {
  require "content/".$pageID.".php";
  exit;
} // ELSE - REST OF WEBSITE WILL BE GENERATED USING THE page VARIABLE 
```

链接

```
<a class='btnMenu' href='?page=home'>Home Page</a>
<a class='btnMenu' href='?page=about'>About</a>
<a class='btnMenu' href='?page=Services'>Services</a>
<a class='btnMenu' href='?page=contact'>Contact</a> 
```

Javascript

```
$(function() {
    $(".btnMenu").click(function(){return doNav(this);});
});

function doNav(objCaller) {
  var sPage = $(objCaller).attr("href").substring(6,255);
  $.get("index.php", { page: sPage, pageMode: 'js'}, function(data) {
    ("#siteContent").html(data).scrollTop(0);
  });
  return false;
} 
```

如果有任何错误，请原谅我，因为刚刚从我的脚本中复制和粘贴，然后删除了一堆垃圾以简化它，因为它仍在原型设计/白板项目中。所以是的，它现在看起来有点讨厌。

原因：主要原因是带宽和速度，这将允许其他脚本更好地运行和控制站点/应用程序，是的，它需要通过一些编码来锁定。--

进一步的例子——在顶部插入 PHP

```
<?php 
  // PHP CODE HERE
?>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="scripts.js"></script>
</head>
<body>
  <div class='siteBody'>
    <div class='siteHeader'>
        <?php
          foreach ($pageList as $key => $value) {
            if ($pageID == $key) {$btnClass="btnMenuSel";} else {$btnClass="btnMenu";}
              echo "<a class='$btnClass' href='?page=".$key."'>".$pageList[$key]."</a>";
          }
        ?>
      </div><div id="siteContent"  style='margin-top:10px;'>
        <?php require "content/".$pageID.".php"; ?>
      </div><div class='siteFooter'>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:47:47.823

~~不，这对搜索引擎不友好。您正在使用 JavaScript 从服务器获取内容并将其显示在页面上。尽管搜索引擎在处理 JavaScript 生成的内容方面做得越来越好，但它们仍然无法处理这个问题（除非您遵循 Google 的可抓取 Ajax 标准，但上个月网站已经远离该标准，尤其是 Twitter）。~~

~~所以这对SEO不利。另外，您节省的带宽并没有您想象的那么多。节省的费用很少，而且带宽非常便宜，这完全没有必要。事实上，您花费更多的钱通过执行正常操作（页面加载）来使您的站点无法访问，并通过使用 JavaScript 来实现它，这样您就可以节省带宽成本。~~

是的，这是搜索引擎友好的，并且是渐进增强的一个很好的例子。因为链接仍然是可抓取的，并且加载与 JavaScript 相同的内容，所以谷歌和任何没有启用 JavaScript 的用户仍然可以很好地找到内容。使用 JavaScript 的用户将获得更快页面加载的额外好处，因为他们在单击链接时无需等待整个页面加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T20:50:24.230

目前尚不清楚 SEO 的影响是什么。谷歌现在解释了一些 javascript。所以有可能——但不能保证——谷歌仍然可以阅读这些链接。通常人们想要隐藏“关于”等页面的链接。因此，如果 Google 无法阅读这些链接，您实际上可能会获得 SEO 优势。也就是说，更多的 pagerank 会集中在您关心的页面上。出于这个原因，一些大型网站实际上使用 javascript 生成指向此类页面的链接。

上线后，您可以通过查看网站管理员工具中关于我们页面的链接来检查 Google 是否找到了这些链接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T20:59:34.393

我认为锚点没问题，但你应该改进服务器端脚本，因为它只输出主要内容，而不是整个页面。

通过检查 $_SERVER['HTTP_X_REQUESTED_WITH'] 您可以区分 ajax 调用和“正常”请求。这是 jquery 自动设置的标题。

如果进行了 ajax 调用，则输出主要内容，否则输出所有内容：doctype、html-tags 以及它们之间的所有有趣的东西。所以每个人都可以在没有 javascript 的情况下获得内容，甚至是爬虫和其他访问者。

更多信息：[http ://davidwalsh.name/detect-ajax](http://davidwalsh.name/detect-ajax)

例子：

```
<?php
    $pageID = isset($_POST['page'])
        ? $_POST['page']
        : "home";

    if ( !$_SERVER['HTTP_X_REQUESTED_WITH'] ) {
        require('content/components/header.php');
    }

    require "content/" . $pageID . ".php";

    if ( !$_SERVER['HTTP_X_REQUESTED_WITH'] ) {
        require('content/components/footer.php');
    }

?> 
```

与内容/组件/header.php：

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="scripts.js"></script>
    </head>
    <body>
        <div class='siteBody'>
            <div class='siteHeader'>
                <?php
                    foreach ($pageList as $key => $value) {
                        if ($pageID == $key) {$btnClass="btnMenuSel";} else {$btnClass="btnMenu";}
                        echo "<a class='$btnClass' href='?page=".$key."'>".$pageList[$key]."</a>";
                    }
                ?>
            </div>
        <div id="siteContent"  style='margin-top:10px;'> 
```

和内容/组件/footer.php：

```
 </div>
    <div class='siteFooter'></div>
    </div>
</body>
</html> 
```

# python - BN_bin2bn 有 python 版本吗？

> ID：11181056
> 
> 赞同：1
> 
> 时间：2012-06-24T20:43:19.173
> 
> 标签：python, openssl

我正在开发一个服务器-客户端程序，客户端（用 c++ 编写）将由 openssl 库打包的公钥发送到服务器（用 python 编写）。

我没有找到任何可以做 BN_bin2bn 在 c++ 中做的 python 库，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:53:22.157

该[`struct`模块](http://docs.python.org/library/struct.html)为您提供了类似的转换，包括将表示整数的字节转换为 Python`int`实例。

```
>>> import struct
>>> example = 'I\x96\x02\xd2'
>>> struct.unpack('>L', example)
(1234567890,) 
```

# android - 此应用程序与三星 GT-P3110 不兼容

> ID：11181057
> 
> 赞同：3
> 
> 时间：2012-06-24T20:43:47.500
> 
> 标签：android, galaxy

我正在使用 Galaxy Tab 2 7.0 (GT-P3110) 开发我的 android 应用程序。在我将应用程序发布到 Google Play 商店后，它说“此应用程序与您的三星 GT-P3110 不兼容”。

这是我的设置：

```
 <supports-screens
       android:largeScreens="true"
       android:normalScreens="true"
       android:smallScreens="true"
       android:anyDensity="true" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" /> 
```

它出什么问题了 ？任何人都可以帮忙吗？

我可以在我的设备上下载 Google Play Store 中的其他应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:50:26.030

将此添加到您的清单以删除自动对焦功能：

`<uses-feature android:name="android.hardware.camera.autofocus" android:required="false" />`

# javascript - 向 JSON 添加一行

> ID：11181058
> 
> 赞同：0
> 
> 时间：2012-06-24T20:43:47.443
> 
> 标签：javascript, jquery, json

当用户单击链接时，我想在我的 JSON 中添加一个新行。这是我的 javascript：它没有出错，但我的警报中没有更新 JSON。

```
$(document).ready( function(){

people = {
    "COLUMNS":["NAME","AGE"],
    "DATA":[
    ["Jon","16"],
    ["Jerry","23"]
    ]
} 

members = people.DATA;
var nc = "<table border=1 width=500><tr><td>name</td><td>age</td><td></td></tr>";

for(var i=0;i<members.length;i++)
{
    nc+= '<tr><td>' + members[i][0] + '</td>';
    nc+= '<td>' + members[i][1] + '</td>';
    nc+= '<td><a href="" class="addlink">add a new person</a></td></tr>';
}

nc += "</table>";

$("#result").html(nc);

$(".addlink").click( function(){ 

    // add another row to our JSON
    people.DATA['NAME'] = "new";
    people.DATA['AGE'] = "99";

    alert(people.DATA);
    return false;

});
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T20:47:34.763

那不是 JSON，它是一个 Javascript 对象。

要在数组中添加另一个项目，请创建一个数组并添加到它，因为它是一个数组数组：

```
people.DATA.push(["new", "99"]); 
```

# sql-server-2008 - 复制整行（不知道字段名称）

> ID：11181064
> 
> 赞同：1
> 
> 时间：2012-06-24T20:44:51.733
> 
> 标签：sql-server-2008, tsql, identity

使用 SQL Server 2008，我想在**不知道字段名称的情况下**复制表的一行。我的关键问题：随着表格随着时间的推移而增长和变异，我希望这个复制脚本继续工作，而我不必写出 30 多个不断变化的字段，呃。

当然，还有一个问题是**不能复制 IDENTITY 字段**。

我下面的代码*确实有效*，但我想知道是否有比我的拼凑文本字符串 SQL 语句更合适的方法？

所以提前谢谢你。这是我的（*是的，有效*的）代码 - 我欢迎提出改进建议。托德

```
alter procedure spEventCopy
   @EventID int
as
begin

   -- VARS...
   declare @SQL varchar(8000)

   -- LIST ALL FIELDS (*EXCLUDE* IDENTITY FIELDS).
   -- USE [BRACKETS] FOR ANY SILLY FIELD-NAMES WITH SPACES, OR RESERVED WORDS...
   select @SQL = coalesce(@SQL + ', ', '') + '[' + column_name + ']'
   from INFORMATION_SCHEMA.COLUMNS
   where TABLE_NAME = 'EventsTable'
     and COLUMNPROPERTY(OBJECT_ID('EventsTable'), COLUMN_NAME, 'IsIdentity') = 0

   -- FINISH SQL COPY STATEMENT...
   set @SQL = 'insert into EventsTable '
            + ' select ' + @SQL
            + ' from EventsTable '
            + ' where EventID = ' + ltrim(str(@EventID))

   -- COPY ROW...
   exec(@SQL)

   -- REMEMBER NEW ID...
   set @EventID = @@IDENTITY

   -- (do other stuff here)

   -- DONE...
   -- JUST FOR KICKS, RETURN THE SQL STATEMENT SO I CAN REVIEW IT IF I WISH...
   select EventID = @EventID, SQL = @SQL

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T21:00:40.930

不，没有任何神奇的方式可以说“选择除“之外的所有列`<foo>`” - 你这样做的方式就是你必须这样做（除了另一个答案中的黑客）。

以下是我将如何通过这些更改更改您的代码（有些是超链接的，因此您可以阅读我对原因的看法）：

*   [`sys.columns`用完_`INFORMATION_SCHEMA.COLUMNS`](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)
*   使用`nvarchar`而不是`varchar`
*   [使用`scope_identity`而不是`@@identity`](https://sqlblog.org/2009/10/12/bad-habits-to-kick-making-assumptions-about-identity)
*   [使用`sp_executesql`而不是`exec`](https://sqlblog.org/2011/09/17/bad-habits-to-kick-using-exec-instead-of-sp_executesql)
*   使用`stuff`而不是`coalesce`
*   [利用`SET NOCOUNT ON`](https://sqlblog.org/2008/10/30/my-stored-procedure-best-practices-checklist)
*   [添加分号](https://sqlblog.org/2009/09/03/ladies-and-gentlemen-start-your-semi-colons)
*   [使用模式前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)
*   使用`QUOTENAME`，因为它比`'[' + ... + ']'`

```
ALTER PROCEDURE dbo.spEventCopy
   @EventID INT
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX) = N'';

    SELECT @sql += ',' + QUOTENAME(name)
      FROM sys.columns
      WHERE [object_id] = OBJECT_ID('dbo.EventsTable')
      AND is_identity = 0;

    SET @sql = STUFF(@sql, 1, 1, '');

    SET @sql = N'INSERT dbo.EventsTable(' + @sql + ')
      SELECT ' + @sql + ' FROM dbo.EventsTable
      WHERE EventID = ' + CONVERT(VARCHAR(12), @EventID) + ';';

    EXEC sp_executesql @sql;

    SELECT @EventID = SCOPE_IDENTITY();

    -- do stuff with the new row here

    SELECT EventID = @EventID, SQL = @SQL;
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:00:14.003

如果您知道您的身份列的名称（并且不会更改列），您可以这样做：

```
SELECT * INTO #dummy FROM EventsTable where EventID = @EventID;

ALTER TABLE #dummy
DROP COLUMN MyIdentityColumn

INSERT EventsTable SELECT * FROM #dummy
DROP TABLE #dummy 
```

由于一个表只能有一个标识列，因此在查询中指定它不应限制您太多。

正如 Aaron Bertrand 指出的那样，这种方法存在风险。请阅读下面评论中的讨论。

# nhibernate - 使用 NHibernate 删除一对多关系中的子对象时遇到问题

> ID：11181068
> 
> 赞同：0
> 
> 时间：2012-06-24T20:45:48.097
> 
> 标签：nhibernate, nhibernate-mapping, one-to-many

标题几乎总结了我面临的问题。基本上我有2个课程：

```
public class Parent : IIntegerIdentifiable
{
   public virtual long Id { get; set; }
   public virtual ICollection<Child> Children {get; set; }
}

public class Child : IIntegerIdentifiable
{
    public virtual long Id { get; set; }
    public virtual Parent Parent { get; set; }
} 
```

我正在定义这些类之间的一对多关系。它们的类映射是：

```
public sealed class ParentMap : ClassMap<Parent>
{
    public ParentMap()
    {
        Id(x => x.Id).GeneratedBy.HiLo(
            "HiLoUniqueKey", "NextHi", "99", "ObjectType = 'Parent'"); 

        HasMany(x => x.Children).KeyColumn("Parent_Id").Inverse().Cascade.AllDeleteOrphan();
    }
}

public sealed class ChildMap : ClassMap<Child>
{
    public ChildMap()
    {
        Id(x => x.Id).GeneratedBy.HiLo("HiLoUniqueKey", "NextHi", "99", "ObjectType = 'Child'");
        References(x => x.Event).Cascade.All();
    }
} 
```

由于我想从数据库中删除特定父级的所有子级，因此我在 ChildRepository 中编写了以下函数：

```
 public void ClearChildEntries(long parentId)
    {
        //I had tried the following and was getting errors before I read the other posts on the topic
        //QueryOver().Where(x => x.Event.Id == eventId).List().ToList().ForEach(Remove);
        //Session.flush()

       //Current code
        var parent = _parentRepository.GetById(parentId);
        parent.Children.Clear();

        _parentRepository.SaveOrUpdate(parent);
    } 
```

我们的代码设置为在请求结束时调用刷新。每当我尝试执行代码时，我都会收到错误消息：

> 无法将值 NULL 插入列“parent_id”、表“test.dbo.Child”；列不允许空值。更新失败。

我还尝试首先删除每个子实体并刷新会话，然后更新父集合。它给出了同样的错误。问题是 a) 为什么 nHibernate 试图将父 id 列更新为 null 然后删除？b）我能做些什么来让删除工作？

只是为了让您知道我没有浪费您的时间，我已经提到了有关该主题的其他帖子，例如
-[如何在 NHibernate 中删除子对象？](https://stackoverflow.com/questions/302720/how-to-delete-child-object-in-nhibernate)
- [http://ayende.com/blog/1890/nhibernate-cascades-the-different-between-all-all-delete-orphans-and-save-update](http://ayende.com/blog/1890/nhibernate-cascades-the-different-between-all-all-delete-orphans-and-save-update)
但似乎没有任何效果。有人可以指出我正确的方向吗？谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:53:47.223

我认为它与 Cascade 选项有关尝试将 Cascade 更改为 All_Delete_Orphan From Cascade.All

[http://ayende.com/blog/1890/nhibernate-cascades-the-different-between-all-all-delete-orphans-and-save-update](http://ayende.com/blog/1890/nhibernate-cascades-the-different-between-all-all-delete-orphans-and-save-update)

# optimization - 如何将 MATLAB 优化工具箱与 MATLAB 之外的函数一起使用？

> ID：11181069
> 
> 赞同：2
> 
> 时间：2012-06-24T20:46:29.987
> 
> 标签：optimization, matlab

我想利用MATLAB的优化工具箱，即遗传算法。

但是我的函数是一个可执行文件，它是我用 C 语言编写的，它接受一个文本文件作为输入。在这个输入文件中可以设置变量。所以我希望 MATLAB 修改这个文本文件，运行可执行文件，并在迭代中获取结果。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:00:11.133

您可以通过将代码编译到称为 MEX 文件的 MATLAB 可执行文件中来调用 MATLAB 中的 C、C++ 或 FORTRAN 代码：http: [//www.mathworks.com/support/tech-notes/1600/1622.html](http://www.mathworks.com/support/tech-notes/1600/1622.html)

然后你必须在你的健身功能中调用这个 MEX 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T12:38:47.213

您可以使用该命令运行`*.exe`文件。`!`

在 MATLAB 中创建循环，您将在其中写入内容`*.txt`，然后使用 运行 C 程序`!name.exe`，并在迭代中读取结果。

# php - 显示来自 Wordpress 帖子的自定义字段的图像

> ID：11181071
> 
> 赞同：2
> 
> 时间：2012-06-24T20:46:43.397
> 
> 标签：php, wordpress, random

我正在使用以下代码将随机发布数据拉到我博客的侧边栏。我将如何添加从该帖子的自定义字段“athletethumbnail”中提取的图像？：

```
<?php
global $wp_query;
$current_id = $wp_query->get_queried_object_id();

    $my_query = new WP_Query( array(
        'post_type'=>'athletes',
        'posts_per_page'=>'1',
        'category' => '36' ,
        'orderby' =>'rand'
        ));

        if( $my_query->have_posts() ) {
        while ($my_query->have_posts()) : $my_query->the_post();

?>
<?php the_title(); ?>

<?php
endwhile;
}

wp_reset_query();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:49:17.053

从[这里找到的文档中](http://codex.wordpress.org/Custom_Fields)，在 PostMeta Functions 下

```
These functions are intended for use inside The Loop, and all return arrays.

get_post_custom()
Get all key/value data for the current post.
................ 
```

解决方案：您应该使用[get_post_custom()](http://codex.wordpress.org/Function_Reference/get_post_custom)。

试试这个 ：

```
$custom = get_post_custom(the_ID());
echo $athletethumbnail = $custom["athletethumbnail"][0]; 
```

注意：您也应该能够在不传递 POST ID 的情况下离开，因为 get_post_custom 调用 get_the_id id 后未传递 id。[来源这里](http://core.trac.wordpress.org/browser/tags/3.4/wp-includes/post.php#L1584)

更改后：

```
 <?php
    global $wp_query;
    $current_id = $wp_query->get_queried_object_id();

        $my_query = new WP_Query( array(
            'post_type'=>'athletes',
            'posts_per_page'=>'1',
            'category' => '36' ,
            'orderby' =>'rand'
            ));

            // The Loop
while ( $the_query->have_posts() ) : $the_query->the_post(); ?>

<?php 
 $custom = get_post_custom(the_ID());
 echo $athletethumbnail = $custom["athletethumbnail"][0];
 the_title(); ?>

<?php
      endwhile;

// Reset Post Data
wp_reset_postdata();

?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-07T06:27:08.733

1.  登录您的 Facebook 帐户。

2.  在您的个人资料页面的搜索框中输入“Facebook Developers”。单击“Facebook.Developers.com”链接。

3.  单击 Facebook 开发人员菜单栏上的“我的应用程序”链接。您可能必须单击“允许”才能继续。

4.  点击“开发者”页面右上角的“设置新应用”按钮。

5.  在“应用程序名称”字段中输入新 Facebook 应用程序的名称。单击“同意”单选按钮选项以接受“Facebook 条款”，然后单击“创建应用程序”

6.  在“框中的文本”字段中键入显示在“安全检查”框中的文本（与屏幕上显示的完全相同）。单击“提交”按钮。

7.  在“描述”字段中输入新应用程序的描述。在“语言”下拉框中选择应用程序的默认语言。为您的“用户支持地址”选择“电子邮件”或“URL”选项。这是用户用于就您的 Facebook 应用程序的问题或支持问题与您联系的地址。

8.  输入您的用户支持 URL 地址或电子邮件地址。输入您的隐私政策页面的 URL 地址。所有 Facebook 应用程序开发人员都必须在其网站上显示隐私政策，说明应用程序收集和使用的 Facebook 用户信息类型。如果您要求用户在使用您的应用程序之前接受“服务条款”，请在“服务条款 URL”字段中输入包含协议文本的 URL 地址。

9.  单击“保存更改”按钮。Facebook 会为您的新应用保存信息更改，并在下一页显示摘要信息。摘要页面在“App ID”标题下显示新应用程序的 Facebook 应用程序 ID。然后您可以开始为您的新 Facebook 应用程序编写代码。

# android - java.lang.ClassCastException: android.app.Application 使用套接字作为全局变量在活动和线程之间共享

> ID：11181072
> 
> 赞同：0
> 
> 时间：2012-06-24T20:47:07.950
> 
> 标签：android, sockets, object, manifest, global

在我的 android 应用程序中，我有一个套接字，但是当我旋转屏幕时，我必须保持套接字连接，才能将消息发送到服务器。所以我决定这样做：

```
package pfg.nao.naoControler;

import java.io.IOException;

import java.net.Socket;

import java.net.UnknownHostException;

import android.app.Application;

public class clientSocket extends Application{

public Socket clientSocket;

@Override
public void onCreate() 
{
    super.onCreate();
}

public void setSocket(Socket socket) throws UnknownHostException, IOException{

    clientSocket = socket;
}

public Socket getSocket() throws UnknownHostException, IOException{

    return clientSocket;
}

} 
```

在我的活动和线程中使用它的全局套接字。因为在某些情况下我必须能够打开和关闭连接。

例如，我尝试像这样访问 clientSocket：

```
Socket c = new Socket(IP, puerto);
((clientSocket)this.getApplication()).setSocket(c); 
```

但我有这个错误：

```
06-24 22:25:18.217: E/AndroidRuntime(25267): FATAL EXCEPTION: main
06-24 22:25:18.217: E/AndroidRuntime(25267): java.lang.ClassCastException: android.app.Application
06-24 22:25:18.217: E/AndroidRuntime(25267):    at pfg.nao.naoControler.NaoControlerActivity.onOptionsItemSelected(NaoControlerActivity.java:160)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at android.app.Activity.onMenuItemSelected(Activity.java:2312)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:769)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:532)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:122)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at android.view.View$PerformClick.run(View.java:9262)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at android.os.Handler.handleCallback(Handler.java:587)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at android.os.Looper.loop(Looper.java:130)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at android.app.ActivityThread.main(ActivityThread.java:3744)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at java.lang.reflect.Method.invokeNative(Native Method)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at java.lang.reflect.Method.invoke(Method.java:507)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
06-24 22:25:18.217: E/AndroidRuntime(25267):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的 android manyfest：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="pfg.nao.naoControler"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" >
</uses-permission>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".NaoControlerActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".SettingsActivity"
        android:label="@string/settings" >
    </activity>
</application>
<application
    android:name=".clientSocket"
    android:label="@string/cliente" >
</application>

</manifest> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:07:38.590

我建议您实现一项[**服务**](http://developer.android.com/guide/topics/fundamentals/services.html)并将所有套接字连接代码移动/集中到该服务中。对于所有想要使用套接字连接的活动，绑定您的网络服务，`onCreate`然后在活动完成后`finish`，将其取消绑定到`onDestory()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:00:26.627

我可能会做的（仅基于您提供的信息）是`Socket`通过静态方法访问。这样您就不必担心是否`Application`已初始化，或者您是否正在调用正确的`Application`对象。

像这样的东西（重命名了一些东西以避免混淆......）：

```
public class clientSocket extends Application {
    private static Socket localSocket;

    @Override
    public void onCreate() {
        super.onCreate();
    }

    public static void setSocket(Socket socket) throws UnknownHostException, IOException {
        localSocket = socket;
    }

    public static Socket getSocket() throws UnknownHostException, IOException {
        // Check here if it's null; if it is, then initialize it, or throw some exception, or something.
        return localSocket;
    }
} 
```

然后，您可以像这样初始化它：

```
Socket c = new Socket(IP, puerto);
clientSocket.setSocket(c); 
```

你可以这样称呼它：

```
Socket c = clientSocket.getSocket(); 
```

请记住：此方法**仅**在您只有**一个** `Socket`在类之间共享时才有效。如果你有多个，你将不得不对它们进行排列，有多个类（有它们自己`Socket`的 s），或者你的类中有多个静态`Socket`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T22:01:19.860

您应该`AndroidManifest.xml`像这样定义自定义应用程序类的完全限定名称：

```
<application android:name="pfg.nao.naoControler.clientSocket" /> 
```

我相信这是`ClassCastException`这一行的原因：

```
((clientSocket)this.getApplication()).setSocket(c); 
```

同样作为[`Application`](http://developer.android.com/reference/android/app/Application.html)参考，最好使用单例。

# c++ - 为一组句柄实现迭代器

> ID：11181073
> 
> 赞同：2
> 
> 时间：2012-06-24T20:47:11.683
> 
> 标签：c++

我正在为包含一组对象的数据库使用笨拙的 C 库接口。对象有一个类型，可以说 A 类型的对象包含一组 B 对象，依此类推。通过句柄访问对象，其定义如下：

```
typedef struct
{
    int handle;
} AHandleT; 

typedef struct
{
    int handle;
} BHandleT; 
```

要遍历 A 对象的 B 子对象，使用以下函数：

```
ReturnT getB(AHandleT /*in*/, BHandleT* /*out*/)
ReturnT getBNext(BHandleT /*in*/, BHandleT* /*out*/) 
```

同样对于迭代一组 B 对象：

```
ReturnT getC(BHandleT handle/*in*/, CHandleT* subHandle/*out*/)
ReturnT getCNext(CHandleT handle/*in*/, CHandleT* next/*out*/) 
```

为了使用 C++ 中的这个接口，我制作了以下迭代器，我希望您能就其实现提出建议。另外，您认为这是一个好方法吗？请记住，我对 C++ 很陌生，我将使用 TDD 编写代码。

```
template<class HandleT>
class HandleIterator 
{
public:
    typedef ReturnT (*GetNext)(HandleT, HandleT*);

    HandleIterator(): m_isLast(true)
    {
    }

    template<class ParentHandleT>
    HandleIterator(const ParentHandleT parentHandle, ReturnT (*getFirstChild)(ParentHandleT, HandleT*), GetNext getNext): m_isLast(false), m_getNext(getNext)
    {
        ReturnT rc = getFirstChild(parentHandle, &m_currentHandle);
        if(rc == NotExisting)
        {
            m_isLast = true;
        }
    }

    void operator++()
    {
        ReturnT rc = m_getNext(m_currentHandle, &m_currentHandle);
        if(rc == NotExisting)
        {
            m_isLast = true;
        }
    }

    void operator++(int)
    {
        ++(*this);
    }

    const HandleT& operator*() const
    {
        return m_currentHandle;
    }

    const HandleT* operator->() const
    {
        return &m_currentHandle;
    }

    friend bool operator==(const HandleIterator& left, const HandleIterator& right)
    {
        return left.m_isLast == right.m_isLast;
    }

    friend bool operator!=(const HandleIterator& left, const HandleIterator& right)
    {
        return !(left == right);
    }

protected:
    HandleT m_currentHandle;
    bool m_isLast;
    GetNext m_getNext;
}; 
```

一旦有了句柄，我就可以使用以下形式的函数从 C 接口获取对象中包含的数据：

```
ReturnT getAName(AHandleT)
ReturnT getBName(BHandleT)
ReturnT getBOnlyProprty(BHandleT) 
```

但这是下一个阶段。

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:41:07.513

您的实现非常好，尤其是对于初学者。

只是一些评论：

*   在构造函数中，为什么`getFirstChild`直接传递而不是提供第一个孩子？
*   `++`are`T& operator++()`和的规范签名`T operator++(int)`
*   `==`应该比较超过`m_isLast`，否则会令人困惑。你也不能比较把手吗？

最后，在实现迭代器时，考虑继承自`std::iterator`. 它没有任何虚方法，但提供了`typedef`迭代器中通常期望的方法，并会提醒您需要选择一个类别：`std::forward_iterator_tag`很可能是这里。

# vb.net - Visual Basic 和模块

> ID：11181075
> 
> 赞同：1
> 
> 时间：2012-06-24T20:47:32.683
> 
> 标签：vb.net

我在 Visual Basic 中编写了一个应用程序来告诉用户他们的电脑。

所有这些都在一个模块中

```
Imports Microsoft.VisualBasic.Devices
Imports System.Management
Imports System.Net
Imports System.IO
Imports System.Windows.Forms
Imports System.Deployment.Application

Module ComputerSpecModule
    Public Enum infotypes
        ProcesserName
        VideocardName
        VideocardMem
    End Enum

    Public Function getinfo(ByVal infotype As infotypes) As String
        Dim info As New ComputerInfo : Dim value, vganame, vgamem, proc As String
        Dim searcher As New Management.ManagementObjectSearcher( _
            "root\CIMV2", "Select * FROM Win32_VideoController")
        Dim searcher1 As New Management.ManagementObjectSearcher( _
            "Select * FROM Win32_Processor")
        If infotype = infotypes.ProcesserName Then
            For Each queryObject As ManagementObject In searcher1.Get
                proc = queryObject.GetPropertyValue("Name").ToString
            Next
            value = proc
        ElseIf infotype = infotypes.VideocardName Then
            For Each queryObject As ManagementObject In searcher.Get
                vganame = queryObject.GetPropertyValue("Name").ToString
            Next
            value = vganame
        ElseIf infotype = infotypes.VideocardMem Then
            For Each queryObject As ManagementObject In searcher.Get
                vgamem = queryObject.GetPropertyValue("AdapterRAM").ToString
            Next
            value = Math.Round((((CDbl(Convert.ToDouble(Val(vgamem))) / 1024)) / 1024), 2) & " MB"
        End If
        Return value

    End Function

    Public oAddr As System.Net.IPAddress 'gets the ipv4 add
    Public sAddr As String

    Public EmailStarterMessage As String = "This message was sent by SpecMee. SpecMee is a light weight application designed to allow the users to find out the specifications of their machines. Please download this application free at http://www.wilson18.com/projects/SpecMee/" + _
    Environment.NewLine + _
    "" + _
    Environment.NewLine + _
    "" + _
    Environment.NewLine + _
    ""

    'PC SPEC CONTENT
    Public ComputerName As String = (My.Computer.Name.ToString)
    Public myOS As String = (My.Computer.Info.OSFullName)
    Public Processor As String = (getinfo(infotypes.ProcesserName))
    Public HDD As String = (Format((My.Computer.FileSystem.Drives.Item(0).TotalSize.ToString / 1024) / 1024 / 1024, "###,###,##0 GB"))
    Public RAM As String = (Format((My.Computer.Info.TotalPhysicalMemory / 1024) / 1024 / 1024, "###,###,##0 GB"))
    Public VideoCard As String = (getinfo(infotypes.VideocardName))
    Public VideoCardMemory As String = (getinfo(infotypes.VideocardMem))
    Public Function Resolution() As String
        Dim intx As Integer = Screen.PrimaryScreen.Bounds.Width
        Dim inty As Integer = Screen.PrimaryScreen.Bounds.Height
        Return intx & " x " & inty
    End Function
    Public Function InternalIPAddress()
        With System.Net.Dns.GetHostByName(System.Net.Dns.GetHostName())
            oAddr = New System.Net.IPAddress(.AddressList(0).Address)
            InternalIPAddress = oAddr.ToString
        End With
    End Function
    Public Function ExternalIPAddress() As String
        Dim uri_val As New Uri("http://www.wilson18.com/projects/SpecMee/curip.php")
        Dim request As HttpWebRequest = HttpWebRequest.Create(uri_val)

        request.Method = WebRequestMethods.Http.Get
        Dim response As HttpWebResponse = request.GetResponse()
        Dim reader As New StreamReader(response.GetResponseStream())
        Dim myip As String = reader.ReadToEnd()
        response.Close()
        Return myip
    End Function

    Public EmailContent As String = ("Computer Name: " & ComputerName & Environment.NewLine & "Operating System: " & myOS & Environment.NewLine & "Processor: " & Processor & Environment.NewLine & "Hard Drive Size : " & HDD & Environment.NewLine & "RAM: " & RAM & Environment.NewLine & "Graphics Card: " & VideoCard & Environment.NewLine & "Graphics Onboard Memory: " & VideoCardMemory & Environment.NewLine & "Resolution: " & Resolution() & Environment.NewLine & "Internal IP Address: " & InternalIPAddress() & Environment.NewLine & "External IP Address: " & ExternalIPAddress() & Environment.NewLine)

End Module 
```

我遇到的问题是，如果模块中的某件事发生故障，例如用户显卡没有任何板载内存，那么它就会失败。这也会导致其他一切都失败......

我对visual basic很陌生，所以如果我犯了任何愚蠢的明显错误，请原谅我，欢迎提出任何建议

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:07:14.003

将可能失败的部分放在`Try-Catch`- 语句中

```
Public VideoCardMemory As String = getinfo(infotypes.VideocardMem)

Public Function getinfo(ByVal infotype As infotypes) As String        
    Try
        ...
        value = ...
        ...
    Catch
        value = "Cannot be accessed!"
    End Try
    Return value
End Function 
```

# jquery - 如何在 slickgrid 中添加隐藏列

> ID：11181079
> 
> 赞同：7
> 
> 时间：2012-06-24T20:47:56.510
> 
> 标签：jquery, slickgrid

是否可以在 slickgrid 中有一个隐藏列？隐藏列的意思是我想为每一行保存一些数据，但我不希望这些数据显示在网格上。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T13:12:30.210

数据和网格中的列之间没有隐含的关系——两者完全独立存在。因此，您的数据可以包含比实际绑定到网格列更多的字段。

例子：

```
var grid;
var columns = [
  {id: "title", name: "Title", field: "title"},
  {id: "duration", name: "Duration", field: "duration"},
  {id: "%", name: "% Complete", field: "percentComplete"},
  {id: "effort-driven", name: "Effort Driven", field: "effortDriven"}
];

var options = {
  enableCellNavigation: true,
  enableColumnReorder: false
};

$(function () {
  var data = [];
  for (var i = 0; i < 500; i++) {
    data[i] = {
      title: "Task " + i,
      duration: "5 days",
      percentComplete: Math.round(Math.random() * 100),
      start: "01/01/2009",
      finish: "01/05/2009",
      effortDriven: (i % 5 == 0)
    };
  }

  grid = new Slick.Grid("#myGrid", data, columns, options);
}) 
```

这里我的`data`数组包含字段`start`，`finish`但我选择在创建`columns`数组时排除它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T04:21:46.977

我认为你可以通过使用来实现这一点- 假设你在声明网格时`grid.setColumns`已经设置；`columns={id, a, b, c}`网格初始化后，您可以调用`grid.setColumns(newColumns)`- 其中`newColumns`不包括 id - 的新列数组 `newColumns={a, b, c}`。

该列仍然可以访问，并且与之关联的所有数据也应该可用。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-02T00:23:19.230

在 angular-slickgrid 版本中，您可以执行以下操作 1\. 在列定义中，包括所有列 2\. 在 Present 中，重新添加您希望在网格中看到的列 ID。现在加载页面并查看列选择器菜单。你会很高兴看到所有的专栏。一些未经检查的

例如

```
 this.columnDefinitions = [
    { id: 'name', name: 'Name', field: 'name', filterable: true, sortable: true },
    { id: 'duration', name: 'Duration', field: 'duration', filterable: true,sortable: true },
    { id: 'complete', name: '% Complete', field: 'percentComplete', filterable:true,sortable: true }
    ];

this.gridOptions = {
      presets: {
        // the column position in the array is very important and represent
        // the position that will show in the grid
        columns: [
          { columnId: 'duration', width: 88, headerCssClass: 'customHeaderClass' },
          { columnId: 'complete' }
        ]
// name will be present in the menu but not on the grid 
```

# imageview - 如何将 imageView 添加到 javafx 区域元素？

> ID：11181080
> 
> 赞同：6
> 
> 时间：2012-06-24T20:47:56.500
> 
> 标签：imageview, javafx-2, region

我想知道如何将 ImageView 元素添加到 JavaFx 2.1 中的区域元素。

也许我把这个元素的用法弄错了，但 AFAIK 它也是子元素的容器。

背景是我需要一个定义大小的区域，该区域应显示独立于该区域视口的图像元素，因此我不能将 Group 元素用作容器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T02:18:54.120

使用[Pane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html)或 Pane 子类。

窗格是[Region ，您可以使用](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html)[getChildren()](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Pane.html#getChildren%28%29) api向其中添加子级。[Pane 与Group](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)非常相似；例如，有一个简单的 api 用于添加孩子，并且没有明确布局孩子的位置。它还具有区域的方面；例如 css 样式，可调整大小等。 Region 仅通过其公共 API 具有不可修改的子级列表，这意味着向它们添加子级的唯一方法是对它们进行子类化（正如 Pane 已经为您所做的那样）。Region 类本身实际上只是控件创建者的构建块类，而不是您在正常开发期间会实例化的东西。

这是将[ImageView](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html)节点添加到窗格的示例。

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.image.*;
import javafx.scene.layout.Pane;
import javafx.stage.Stage;

public class RegionSample extends Application {
  public static void main(String[] args) throws Exception { launch(args); }
  public void start(Stage stage) throws Exception {
    Pane pane = new Pane();
    pane.setStyle("-fx-background-color: linear-gradient(to bottom right, derive(goldenrod, 20%), derive(goldenrod, -40%));");
    ImageView iv1 = new ImageView(new Image("http://icons.iconarchive.com/icons/kidaubis-design/cool-heroes/128/Ironman-icon.png"));  // Creative commons with attribution license for icons: No commercial usage without authorization. All rights reserved. Design (c) 2008 - Kidaubis Design http://kidaubis.deviantart.com/  http://www.kidcomic.net/ All Rights of depicted characters belong to their respective owners.
    ImageView iv2 = new ImageView(new Image("http://icons.iconarchive.com/icons/kidaubis-design/cool-heroes/128/Starwars-Stormtrooper-icon.png"));
    iv1.relocate(10, 10);
    iv2.relocate(80, 60);
    pane.getChildren().addAll(iv1, iv2);
    stage.setScene(new Scene(pane));
    stage.show();
  }
} 
```

# android - apk 文件未生成

> ID：11181082
> 
> 赞同：0
> 
> 时间：2012-06-24T20:48:04.727
> 
> 标签：android, eclipse

我手动将一个android项目的所有代码复制到一个新的android项目中。没有显示错误。但是当我运行它时，没有生成apk，而是生成了jar文件。控制台说`Could not find Asin.apk`。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T09:03:24.540

1.  右键单击项目。
2.  转到属性。
3.  选择“安卓”。
4.  取消选中“是库”复选框。

然后再次运行，`.apk`应该创建 -file`bin`而不是`.jar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:00:26.660

我认为你必须运行你的程序，然后生成你的apk。或者简单的方法，运行你的程序，然后转到你的项目地址，在“bin”文件夹中，有你的 apk 文件。eclips 自动生成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T07:45:54.407

在运行导入的应用程序之前，请进行彻底的**清理**和**构建**..

# java - 滚动窗格不起作用

> ID：11181083
> 
> 赞同：3
> 
> 时间：2012-06-24T20:48:17.037
> 
> 标签：java, swing, jscrollpane, jtextarea

我正在尝试将大量数据（成员资格记录）输出到 JTextArea 中，然后将其转储到 scrollPane 中。这是代码。

```
package Ginfo;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import java.io.*;

public class ReviewAll extends JFrame implements ActionListener {
    Container RA;
    JPanel ReviewAll;
    JTextArea output;
    JButton back, quit;

    Message m;
    ConnectInfo c;
    ObjectOutputStream oout;
    ObjectInputStream oin;

    public ReviewAll(ObjectOutputStream oout2, ObjectInputStream oin2,
            Message m2, ConnectInfo a) {
        super("Full results");
        m = m2;
        c = a;
        oout = oout2;
        oin = oin2;
        try {
            oout.reset();
        } catch (IOException e) {

        }
        RA = getContentPane();
        BuildGUI();
        RA.add(ReviewAll);
        pack();
        setLocationRelativeTo(null);
        setVisible(true);

        try {
            m.type = Message.REVIEWALL;
            oout.writeObject(m);
            while (!m.response.equals("End of list")) {
                m = (Message) oin.readObject();
                output.append("Member: " + m.main + "\n");
                output.append("Invited by: " + m.invitedBy + " on " + m.when
                        + "\n");
                output.append("Recommended by: " + m.HDTH + "\n\n");
            }
            m.response = "";

        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

    }

    private void BuildGUI() {
        ReviewAll = new JPanel();
        output = new JTextArea();
        output.setPreferredSize(new Dimension(400, 400));
        output.setEditable(false);
        JScrollPane scrollPane = new JScrollPane(output);
        scrollPane
                .setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        back = new JButton("Close window");
        quit = new JButton("Exit Program");

        ReviewAll.add(scrollPane, BorderLayout.NORTH);
        ReviewAll.add(back, BorderLayout.SOUTH);
        ReviewAll.add(quit, BorderLayout.SOUTH);

        back.addActionListener(this);
        quit.addActionListener(this);
    }

    public void actionPerformed(ActionEvent re) {
        if (re.getSource() == back) {
            new WhatToDo(oout, oin, m, c);
            dispose();
        } else if (re.getSource() == quit) {
            if (oout != null) {
                try {
                    oout.flush();
                    oout.close();
                    oin.close();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
            }
            System.exit(0);
        }
    }
} 
```

但是，当我这样做时，我只看到前 5 条记录（足以填充我的 JTextArea）并且无法向下滚动以查看其余记录。作为记录，当正在发送的记录保存在 list.size() 并且我知道它可以正常工作时，我在服务器代码上具有 m.response = "End of List"，然后它被传输到客户端（如下所列）。我知道这是滚动条的问题。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T21:01:24.353

> 我知道这是滚动条的问题。

问题不在于滚动条，而在于您如何设置 JTextArea 的大小或 preferredSize，这会阻止它正确扩展。而是设置它的列和行，因为这将告诉 JScrollPane 它应该在其视口中查看多少行和列。

即，改变这个：

```
ReviewAll = new JPanel();
output = new JTextArea();
output.setPreferredSize(new Dimension (400,400)); 
```

对此：

```
ReviewAll = new JPanel();

// ROW_COUNT & COL_COUNT are int constants defined elsewhere
output = new JTextArea(ROW_COUNT, COL_COUNT); // using whatever numbers work best.

// don't set the text area's preferredSize:
// output.setPreferredSize(new Dimension (400,400)); 
```

当然，最好避免使用幻数，而是使用常量来计算行数和列数。

# django - 在 django 中延迟发送电子邮件？

> ID：11181085
> 
> 赞同：0
> 
> 时间：2012-06-24T20:48:28.473
> 
> 标签：django, django-mailer

有没有一种简单的方法可以稍后发送电子邮件，比如 2012 年 8 月 1 日下午 6 点？我试图阅读一些关于 django-mailer 的文档，但我无法得到答案。

我开始从事 Web 开发，因此可能无法破解 django-mailer 的现有应用程序来完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:03:54.383

[芹菜可以满足](http://celery.readthedocs.org/en/latest/index.html)你的需要。

首先设置一个 celery 任务：

```
@task
def sendmail():
    pass 
```

稍后发送邮件，[文档](http://celery.readthedocs.org/en/latest/userguide/executing.html#eta-and-countdown)中的示例：

```
from datetime import datetime, timedelta

tomorrow = datetime.now() + timedelta(days=1)
sendmail.apply_async(args=[], eta=tomorrow) 
```

# php - 少数模型如何扩展类

> ID：11181087
> 
> 赞同：0
> 
> 时间：2012-06-24T20:48:48.483
> 
> 标签：php, yii

我有几个由 yii 组件 gii 生成的模型。现在我想做自动插入作者、创建和更新时间。在 Yii Cookbook 中它是存在的。第一个变体：

```
    公共功能行为（）
    {
    返回数组（
        '时间戳' => 数组（
            'class' => 'zii.behaviors.CTimestampBehavior',
            'createAttribute' => 'created_on',
            'updateAttribute' => 'modified_on',
            'setUpdateOnCreate' => 真，
            ),
        );
    }

```

这是第二个变体：

```
    受保护的函数 beforeValidate()
    {
    if($this->getIsNewRecord())
        $this->created_on = time();
    $this->modified_on = time();
    返回真；
    }

```

在我的情况下，我应该在扩展它的每个模型中创建将替换 beforeSave 方法的类。这是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:58:03.853

您需要在行为中实现它并将该行为附加到您希望发生这种情况的每个类。

**组件行为的使用**

一个组件支持[mixin](http://en.wikipedia.org/wiki/Mixin)模式并且可以附加一个或多个行为。行为是一个对象，其方法可以通过收集功能而不是专门化的方式由其附加组件“继承”（即，正常的类继承）。一个组件可以附加多个行为，从而实现“多重继承”。

行为类必须实现`IBehavior`接口。大多数行为都可以从`CBehavior`基类扩展。如果需要将行为附加到模型，它也可以从[CModelBehavior](http://www.yiiframework.com/doc/api/1.1/CModelBehavior)或[CActiveRecordBehavior](http://www.yiiframework.com/doc/api/1.1/CActiveRecordBehavior)扩展，实现模型的附加功能。

要使用行为，必须首先通过调用行为的`attach()`方法将其附加到组件。然后我们可以通过组件调用行为方法：

```
// $name uniquely identifies the behavior in the component
$component->attachBehavior($name,$behavior);
// test() is a method of $behavior
$component->test(); 
```

可以像组件的普通属性一样访问附加的行为。例如，如果一个名为 tree 的行为附加到一个组件，我们可以使用以下方法获取对该行为对象的引用：

```
$behavior=$component->tree;
// equivalent to the following:
// $behavior=$component->asa('tree'); 
```

可以暂时禁用行为，使其方法无法通过组件使用。例如，

```
$component->disableBehavior($name);
// the following statement will throw an exception
$component->test();
$component->enableBehavior($name);
// it works now
$component->test(); 
```

附加到同一组件的两个行为可能具有相同名称的方法。在这种情况下，第一个附加行为的方法将优先。

当与[事件](http://www.yiiframework.com/doc/guide/1.1/en/basics.component#component-event)一起使用时，行为更加强大。一个行为，当被附加到一个组件时，可以将它的一些方法附加到组件的一些事件上。通过这样做，行为有机会观察或改变组件的正常执行流程。

行为的属性也可以通过它所附加的组件来访问。属性包括公共成员变量和通过行为的 getter 和/或 setter 定义的属性。例如，如果行为具有名为 xyz 的属性，并且该行为附加到组件 $a。然后我们可以使用表达式`$a->xyz`来访问行为的属性。

更多阅读：
[http ://www.yiiframework.com/wiki/44/behaviors-events](http://www.yiiframework.com/wiki/44/behaviors-events)
[http://www.ramirezcobos.com/2010/11/19/how-to-create-a-yii-behavior/](http://www.ramirezcobos.com/2010/11/19/how-to-create-a-yii-behavior/)

# ios - 应用程序从 iOS 中的电子邮件附件启动时的顺序

> ID：11181088
> 
> 赞同：0
> 
> 时间：2012-06-24T20:49:14.183
> 
> 标签：ios, uiapplicationdelegate, email-attachments

在我的应用程序中，viewController 管理着 UIWebView。是使用应用程序的主故事板创建的。这个应用程序能够打开一个 rtf 电子邮件附件并将其显示到它的 UIWebView。

当应用程序在后台时，一切正常。应用程序委托方法

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

被调用并且有一个方法

```
[viewController loadImportedRTFDocument:url]; 
```

叫做。控制器加载文档并显示它。

当用户在邮件应用程序中选择附件时应用程序不在后台时，它会正确启动。调用 App 委托 openURL，viewController 接收到加载导入文档的消息。但它无法显示它，因为 UIWebView 尚未分配（返回 nil 指针）。

我确实观察到的是，应用程序委托调用的方法是在控制器收到 viewDidLoad 消息之前进行的......

在这种情况下，如何确定 viewController 已正确初始化，我应该在哪里要求 UIWebView 加载与 rtf 附件关联的 NSData 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:28:49.830

所以`loadImportedRTFDocument`在视图加载之前调用。要解决它，请存储`URL`，然后将其`viewDidLoad`加载到 web 视图中。为避免应用程序在后台时双重加载，请进行切换，`loadImportedRTFDocument`仅当 webView 初始化时才会加载 URL。这样，webView 应该被加载到`viewDidLoad`或者`loadImportedRTFDocument`取决于是否加载了视图。

此解决方案还将（如果 URL 仍然有效且资源仍然存在）使您的 webView 显示数据，即使 webView 已使用 memoryWarning 卸载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:32:36.803

您可以使用`NSObject`performSelector 将调用置于`loadImportedRTFDocument`运行循环的末尾（即在应用程序完全加载并处于空闲状态之后）：

```
// Will be called after app has loaded
[viewController performSelector:@selector(loadImportedRTFDocument:) withObject:url afterDelay:0]; 
```

# c++ - 如何在 lambda 函数中保持对捕获的智能指针的引用？

> ID：11181091
> 
> 赞同：1
> 
> 时间：2012-06-24T20:50:06.037
> 
> 标签：c++, c++11, atl

假设以下代码：

```
void SomeClass::SomeMethod()
{
    CComPtr<ISomeService> service = GetService();

    ExecuteInNewThread([&]()
    {
        service->AnotherMethod();
    });
} 
```

函数 ExecuteInNewThread 在新线程中执行函数对象，因此可以在释放服务指针后执行 lambda 函数。防止这种情况的最佳方法是什么？在 lambda 结束时在 SomeMethod 和 Release() 中执行 AddRef() 看起来很难看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:36:43.517

只需按值捕获变量，让复制构造函数和析构函数担心所有权语义——这就是智能指针的用途。现有的代码肯定是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:08:41.253

如果包含对局部变量的引用的闭包对象在其创建的最内层块作用域之后被调用，则行为未定义。

我原以为在不同的线程上执行闭包对象也是未定义的。

# ios5 - 未调用 CLLocationManager 委托方法 - CLLocationManager 在主线程中设置

> ID：11181094
> 
> 赞同：1
> 
> 时间：2012-06-24T20:50:29.460
> 
> 标签：ios5, cllocationmanager, clgeocoder

我有以下功能，我相信它正在主线程中运行（它是分配给按钮单击的事件）

```
-(void)startTracking:(CLLocation*) targetLocation
{
    NSLog(@"Target location: %@", targetLocation);
    self.locationManager = [[CLLocationManager alloc]init];
    [self.locationManager setDelegate:self];
    self.locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    self.targetRegion = [[CLRegion alloc] initCircularRegionWithCenter:targetLocation.coordinate radius:10 identifier:@"Destination Region"];

    [self.locationManager startMonitoringForRegion:self.targetRegion];
    //[self.locationManager startUpdatingLocation];
    NSLog(@"Target region: %@", self.targetRegion);
 } 
```

我说“我认为”的唯一原因是，在它可以运行之前，我在另一个线程上运行的块中获得了 targetRegion 详细信息。

```
[geocoder geocodeAddressString:self.address completionHandler:^(NSArray* placemarks, NSError* error){
        for (CLPlacemark* aPlacemark in placemarks)
        {                    // Process the placemark.
            NSLog(@"Got Placemark : %@", aPlacemark);
            //newDestination.destination = aPlacemark.location;
        }
        //self.Destination.destination = [[placemarks objectAtIndex:0] location];
        self.targetLocation = [[placemarks objectAtIndex:0] location];
        self.startTrackingButton.enabled = true;
        self.stopTrackingButton.enabled = true;
    }]; 
```

这就是没有调用代表的原因......？

# inno-setup - 如何在 Inno Script 安装程序中跳过名称/组织的屏幕

> ID：11181095
> 
> 赞同：1
> 
> 时间：2012-06-24T20:51:04.853
> 
> 标签：inno-setup

Inno Setup 允许您看到一个屏幕，提示您输入您的姓名和组织。我怎样才能让我的安装程序跳过这个屏幕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:00:48.750

要跳过 InnoSetup 脚本中的名称和组织输入，请执行以下操作：

```
UserInfoPage=no 
```

来源：[http ://www.jrsoftware.org/ishelp/index.php?topic=setup_userinfopage](http://www.jrsoftware.org/ishelp/index.php?topic=setup_userinfopage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:59:37.547

要显示该页面，您的设置必须明确实现`CheckSerial`事件功能。如果您删除它，那么该页面也将消失。

# asp.net-mvc - MVC 3 模型价值在第二次回发时丢失

> ID：11181100
> 
> 赞同：3
> 
> 时间：2012-06-24T20:52:13.733
> 
> 标签：asp.net-mvc

我有一个具有多个字段的模型的视图。当我在 GET 上呈现视图时，我有一个隐藏字段存储一个此时为空的代码。然后我发布并在操作中通过模型向此代码字段添加一个值并将模型发送到视图，例如：

```
return View (model); 
```

当视图呈现时，隐藏字段没有代码值，但视图包含在第一步中输入的所有其他值。所以现在当我在第二个按钮上发布时，传递给操作的模型不包含我在第一个发布响应中传递给它的隐藏代码值。

如果我在第一篇文章中更新了模型并使用新值将其发送回视图，我是否应该将该代码存储在可用视图中的隐藏输入中并能够再次将其发布回操作？

我刚刚还意识到，如果我在第一个回帖中更改任何模型字段并将更新的模型发送到视图，它只会保留第一个 POST 操作的值。我这里有缓存问题吗？，我该如何管理这种行为？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T20:58:01.523

您应该在更改 POST 操作中的值之前将其从 ModelState 中删除：

```
[HttpPost]
public ActionResult Foo(MyViewModel model)
{
    // update the value of the model that was POSTed to some new value
    model.SomeProperty = "some new value";

    // remove POSTed value from the modelstate if you intend to modify it here
    ModelState.Remove("SomeProperty");

    return View(model);
} 
```

您需要这样做的原因是，诸如`Html.HtextBoxFor`, `Html.HiddenFor`, ... 之类的 Html 助手在绑定时首先使用 modelstate 中的值，然后使用模型中的值。如果您不从 ModelState 中删除该值，则`HiddenFor`帮助程序将使用原始 POSTed 值，该值是一个空字符串，而不是您在操作中修改的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T18:44:24.757

问题与达林指出的相同。这是一个替代解决方案：

```
public static MvcHtmlString MyHiddenFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, object htmlAttributes = null) {
    var value = expression.Compile().Invoke(html.ViewData.Model);

    TagBuilder input = new TagBuilder("input");
    input.Attributes["type"] = "hidden";
    input.Attributes["id"] = html.IdFor(expression).ToString();
    input.Attributes["name"] = html.NameFor(expression).ToString();

    if (htmlAttributes != null)
        input.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes));

    input.Attributes["value"] = value == null ? "" : value.ToString();

    return new MvcHtmlString(input.ToString());
} 
```

# c - 如何反转字符串数组并使用指针反转每个字符串？

> ID：11181102
> 
> 赞同：1
> 
> 时间：2012-06-24T20:52:43.797
> 
> 标签：c, pointers

我正在学习 C，我试图用指针反转数组中的每个字符串。当我运行下面的代码时，我收到警告，传递 'swapChars' 的参数 1 和 2 会在没有强制转换的情况下从整数生成指针。当我运行它时，我得到一个“总线错误”。有谁知道为什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void swapChars(char *a, char *b) {
    char temp = *a; 
    *a = *b; 
    *b = temp; 
}

void reverse(int size, char* arr[]) { 
    for(int w = 0; w < size; w++) {
        int length = strlen(arr[w]); 
        for(int i = 0; i < length/2; i++) {
            swapChars(arr[w][i], arr[w][length-i]);
        }
    }
} 
```

**编辑：**谢谢！我不再收到任何错误/警告，但是您知道为什么当我使用“hello world”运行它时它不打印任何东西吗？这是我的主要（）：

```
int main(int argc, char* argv[]) {
    int numWords = argc-1;
    char** words = argv+1;
    reverse(numWords,words);
    for (char** word = words; word < words+numWords; word++) {
        printf("%s ",*word);
    }
    printf("\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:55:10.157

```
swapChars( &(arr[w][i]), &(arr[w][(length-1)-i])); 
```

您需要传入（或“指向”）数组元素的地址，而不是数组元素本身。如果没有这个，编译器会警告您它将尝试将数组元素的值转换为指针 - 它怀疑这是错误的做法。所以它会警告你。确实——这不是你想要的。

@Pi 比我更正确。解决它。在第二个参数中添加 -1，否则字符串末尾的 null 也会被反转。这就是为什么您的字符串不打印的原因。大概。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T20:59:25.490

当你传递你的参数时，你正在取消引用你传入的两个值。
要纠正这个问题，该行应该是

```
swapChars(&arr[w][i], &arr[w][length-1-i]); 
```

这将传递地址，而不是值。

# c# - 将 System.Data.Services.Client 引用添加到 windowsphone7.1 sdk 时出错

> ID：11181105
> 
> 赞同：0
> 
> 时间：2012-06-24T20:52:58.613
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

在问了我的第一个问题[Windows Phone 7.1 应用程序直接访问 Azure 存储](https://stackoverflow.com/questions/11171767/windows-phone-7-1-app-accessing-azure-storage-directly)之后，我下载了 wp7facebookazure wp7.0 示例。

从[http://wp7azurequickstarts.codeplex.com/releases/view/65745](http://wp7azurequickstarts.codeplex.com/releases/view/65745)下载 wp7facebookazure 示例后，我编译了 WindowsPhoneCloud.StorageClient 库，我看到它正在使用自定义 System.Data.Services.Client 库。

在我将示例更改为使用 windowsphone7.1 sdk 然后添加 System.Data.Services.Client 参考后，出现以下错误：

```
Microsoft Visual Studio
A reference to a higher version or incompatible assembly cannot be added to the project. 
```

如何使用 windowsphone7.1 sdk System.Data.Services.Client 参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T00:32:42.470

这是我在我的机器上尝试过的：

1.  已加载 WP7FacebookAzure 解决方案
2.  使用 Windows Phone SDK 7.1 的升级解决方案
3.  完全删除 System.Data.Services.Client 项目
4.  添加了来自 C:\Program Files (x86)\Microsoft SDKs\Microsoft Data Framework\Phone\v7.1\bin\System.Data.Services.Client.dll 的 System.Data.Services.Client 引用

您需要消除一些错误，但是使用上述步骤我能够将 System.Data.Services.Client.dll 集成到 WP7FacebookAzure 解决方案中。

# iphone - 如果@2x 图像可用但不是常规分辨率图像会怎样？

> ID：11181108
> 
> 赞同：2
> 
> 时间：2012-06-24T20:53:18.830
> 
> 标签：iphone, ios, ipad, retina-display

我想知道如果只将@2x 图像复制到资源中，非视网膜显示设备会发生什么？它会将视网膜显示图像缩小 0.5 以适应`UIImageView`?

我希望这不是一个愚蠢的问题！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T21:03:57.240

高分辨率`@2x`图像不会在非视网膜设备上自动下采样。

Apple 没有实现该功能，因为非视网膜设备在初始化期间通常没有足够的内存来加载和下采样许多高分辨率图像，如果需要初始化太多图像可能会导致麻烦。

**编辑** *（基于 WendiKidd 的回答）*

然而，非视网膜设备会缩小尺寸并显示高分辨率`@2x`图像，但**不会**对它们进行下采样，这会导致图像质量不佳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:30:19.053

我知道如果没有可用的常规图像，它将使用@2x 图像，因为我自己测试过。（虽然我同意大卫的评论——这很容易测试你自己。）现在图像质量下降了，因为它试图调整一个比你试图放入的空间大得多的图像。但它绝对会工作。去尝试一下，你会看到:)

# concurrency - F# 中的并行处理

> ID：11181109
> 
> 赞同：4
> 
> 时间：2012-06-24T20:53:19.373
> 
> 标签：concurrency, f#

我`async`在 F# 中玩弄。这看起来对吗，还是我在弄乱东西？

```
let time f = 
    let before = System.DateTime.Now
    f () |> ignore
    let after = System.DateTime.Now
    after - before;;

let rec fib = function 0 | 1 -> 1
                         | n -> fib (n - 1) + fib (n - 2);;

let source = [45; 40; 45; 40]

let synchronous = time <| fun () -> List.map fib source

let para = time <| fun () -> source
                             |> List.map (fun n -> async {ignore <| fib n}) 
                             |> Async.Parallel
                             |> Async.RunSynchronously 
```

特别是，如何从`async`块中返回结果？我必须使用可变状态吗？

**更新：**这是另一种方法：

```
#r "FSharp.PowerPack.Parallel.Seq.dll"
open Microsoft.FSharp.Collections

let pseq = time <| fun () -> source
                             |> PSeq.map fib
                             |> PSeq.toList 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T21:25:00.897

`async`首先，用于并行 CPU 处理有点反模式。有关更多信息，请参阅这些问题和答案：

[为什么我不应该使用 F# 异步工作流来实现并行性？](https://stackoverflow.com/questions/5327591/why-shouldnt-i-use-f-asynchronous-workflows-for-parallelism)

[任务并行库与异步工作流](https://stackoverflow.com/questions/1871168/f-task-parallel-library-vs-async-workflows)

其次，你的`fib`函数应该被重写为尾递归，这里有一个例子[（](http://en.wikibooks.org/wiki/F_Sharp_Programming/Solutions/Recursion)包括更改为`BigInt`）：

```
let fib n =
    let rec loop acc1 acc2 = function
        | n when n = 0I -> acc1
        | n -> loop acc2 (acc1 + acc2) (n - 1I)
    loop 0I 1I n 
```

最后，完整代码：

```
let source = [| 45I; 40I; 45I; 40I |]

let sync = time <| fun () -> Array.map fib source

let para = time <| fun () -> Array.Parallel.map fib source 
```

请注意，在这两种情况下`Array`都会返回结果，您只是将其丢弃在时间函数中。`time`一个同时返回时间和结果的函数怎么样？

```
let time f = 
    let watch = new System.Diagnostics.Stopwatch()
    watch.Start()
    let res = f ()
    watch.Stop()
    (res, watch.ElapsedMilliseconds) 
```

用法保持不变，但现在显示结果：

```
printfn "Sync: %A in %ims" (fst sync) (snd sync)
printfn "Para: %A in %ims" (fst para) (snd para) 
```

# css - 为什么只有一种链接 .css 和 .html 文件的方法在我的程序中有效？

> ID：11181113
> 
> 赞同：1
> 
> 时间：2012-06-24T20:54:13.270
> 
> 标签：css, xhtml, aptana

我最近开始学习 Web 编程的技巧，在阅读一本书时，我看到了两种将 .html 文件链接到 .css 文件的方法。

方法一：

```
<link rel="examplesheet" href="myexamplesheet.css" type="text/css"
 media="screen" /> 
```

方法二：

```
<style type="text/css" media="screen"> 
@import url(examplesheet.css);
</style> 
```

正如一些问题所[指出的那样](https://stackoverflow.com/questions/321478/whats-the-difference-between-these-two-methods-of-linking-a-html-page-to-a-css)，它们都应该工作，但是方法 1 不适用于我的程序，即使方法 2 工作正常。

我的程序很简单。它看起来像这样：

```
<title> Title Site</title>

<link rel="canvas" href="canvas.css" type="text/css"
media="screen" />

<style type="text/css" media="screen"> 
@import url(canvas.css);
</style>

<p> We have black text.</p>
<p class="green"> And then we have Green Text.</p>

<p class="warning"> Warning. Warning. Warning.</p> 
```

如果方法 1 是唯一的方法，则文本将无法正确显示。在 Internet Explorer 中，它只显示默认文本。但是在 Firefox 和 Chrome 中，它实际上显示了方法 1 的错误：

> XML 解析错误：文档元素后出现垃圾 位置：file:///C:/Users/Zolani/AppData/Local/Temp/sample.xhtml 第 3 行，第 1 列：

我不确定为什么这只出现在这两个浏览器上。一个详细说明差异的[网页](http://webdesign.about.com/od/beginningcss/f/css_import_link.htm)谈到将其放在文本的头部。我试过了，使用“head”标签，它仍然没有用。

现在我可以继续使用方法 2 并愉快地使用我的程序，但我仍然想知道为什么方法 1 似乎无法正常工作。有任何想法吗？

*注意：我使用的是 xhtml 而不是 html。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T20:57:12.633

该`rel`属性必须是`stylesheet`为了让浏览器将其解释为样式表。

```
<link rel="stylesheet" href="canvas.css" type="text/css"
media="screen" /> 
```

**[技术规格](http://www.w3.org/TR/2003/WD-xhtml2-20030506/mod-styleSheet.html#sec_18.1.3.)**

# mysql - MySQL更新查询两张表但只更新一张表

> ID：11181114
> 
> 赞同：1
> 
> 时间：2012-06-24T20:54:21.237
> 
> 标签：mysql

我有两张桌子：

*   表 1：组名、项目名、状态
*   表 2：组名、地理位置

我要更新`table1`。默认状态为 0。我想`table1`使用单个 UPDATE 语句将状态更新为 1。

我想检查每一行`table1`是否`group_name`存在于`table2`. 如果是这样，我会将状态更新为 1。

我试过这个，但无法得到正确的结果。

```
UPDATE table1
SET table1.`STATUS`=1 
WHERE table2.group_name=table1.group_name 
```

我怎样才能达到我想要的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T20:57:58.487

您可以使用其他人显示的多表更新。但是您也可以使用带有子选择的单个表更新语句以稍微简单的方式执行此操作：

```
UPDATE table1
SET STATUS = 1 
WHERE group_name IN (SELECT group_name FROM table2) 
```

另请注意，您甚至不需要`status`在所有行中初始设置为零的前提条件。您可以在单个`UPDATE`语句中将所有行更新为正确的值：

```
UPDATE table1
SET STATUS = group_name IN (SELECT group_name FROM table2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T21:05:24.010

您可以使用多个更新表语法，因此您的查询将是：

```
UPDATE table1,table2
SET table1.`STATUS`=1 
WHERE table2.group_name=table1.group_name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T21:05:15.357

SET 是他的命令...实际格式是： update "tablename" set "columnname" = "newvalue" [,"nextcolumn" = "newvalue2"...] where "columnname" OPERATOR "value" [and|or “列”运算符“值”]；

没有启动并运行 SQL 数据库，但我相信 UPDATE 命令类似于 FROM 命令，所以我认为你必须这样做

```
UPDATE table1, table2 SET table1.'status' = 1 
WHERE table2.group_name=table1.group_name 
```

# python - 从父元素解析子元素

> ID：11181115
> 
> 赞同：0
> 
> 时间：2012-06-24T20:54:25.010
> 
> 标签：python, lxml

我选择了以下元素：

```
>>> order
<Element Order at 0x10364b960> 
```

要获取它的所有子元素，我可以这样做：

```
>>> order.getchildren()
[<Element Digital_Order at 0x10364b910>, <Element Identifier at 0x10364b8c0>, 
<Element Sold_To_Party at 0x10364b9b0>, <Element Customer_PO_No at 0x10364ba00>, 
<Element PO_Date at 0x10364ba50>, <Element Customer_Name at 0x10364baa0>, 
<Element Buyer_Name at 0x10364baf0>, <Element Approval_Dt at 0x10364bb40>, 
<Element Approval_By at 0x10364bb90>, <Element Order_Creation_Dt at 0x10364bbe0>, 
<Element Order_Instructions at 0x10364bc30>, <Element Order_Items at 0x10364bc80>] 
```

在这种情况下，我将如何选择一个特定的孩子`Identifier`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:02:38.857

用于[`order.find('Identifier')`](http://lxml.de/api/lxml.etree._Element-class.html#find)检索第一`Identifier`个子元素。

如果您想要一个包含所有匹配元素的数组，请使用`findall`而不是`find`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:03:44.167

lxml中的an`Element`是一棵完整的树，所以可以随意使用[`find`](http://lxml.de/api/lxml.etree._Element-class.html#find)or[`findall`](http://lxml.de/api/lxml.etree._Element-class.html#findall)方法：

```
order.find('Identifier') 
```

换句话说，它的工作原理与首先查找您的订单元素相同。

# wordpress - 简码和自定义字段

> ID：11181123
> 
> 赞同：0
> 
> 时间：2012-06-24T20:56:32.383
> 
> 标签：wordpress, custom-fields, shortcode

如何让简码在自定义字段中正确处理？

我已经尝试使用下面的代码，但我不知道放置它的位置（“按钮”是字段的名称）：

```
<?php 
if ( get_post_meta($post->ID, 'button', true) ) 
echo do_shortcode(get_post_meta($post->ID, 'button', $single = true));
?> 
```

截至目前，简码在按钮显示的意义上正在工作，但简码文本正在显示“立即购买”按钮应该在的位置。看截图：

[http://i.imgur.com/41vsr.png](http://i.imgur.com/41vsr.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:03:28.923

只需将此代码放入您正在显示短代码结果的任何页面中。

```
<?php echo apply_filters('the_content', get_post_meta($post->ID, 'button', true)); ?> 
```

**更新：**将其放在循环内

```
if ( get_post_meta($post->ID, 'button', true) ) 
echo do_shortcode(get_post_meta($post->ID, 'button', $single = true)); 
```

# video - 用于稀疏和二进制 blob 跟踪的高效视频格式/编解码器

> ID：11181125
> 
> 赞同：0
> 
> 时间：2012-06-24T20:57:03.510
> 
> 标签：video, image-processing, binary, format, blob

我正在从事一个 blob 跟踪项目，并且有许多高清视频，我想缩小它们的大小以进行存储和下游跟踪/形状分析。我想使用一种无​​损方法，该方法利用视频的黑白性质以及各个帧之间没有太多移动的事实。

视频非常稀疏，每帧 5 到 10 个 b&w blob，总共占用 <30% 的空间，每个 blob 在帧之间移动 <5-10% 的视场，并且在 2-3 之间不会改变太多形状帧。

我将为这个项目使用 Python、Matlab 或 LabView 工作，并且可以使用批处理实用程序（如果可用）。如果找不到合适的视频格式，可能值得将文件导出为压缩图像堆栈。这有什么好处和坏处？视频编解码器使用相邻帧之间的相关性，因此它应该更有效，但如果选择了错误的编解码器或配置不正确，则不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:50:50.867

通过 Konstantinos Konstantinides，视频技术专家，专利代理人：

**JBIG**是二进制图像的最佳压缩算法之一。它实际上用于传真标准。

由于帧之间没有太大变化，您可以对关键帧使用 JBIG，然后对其他帧使用简单的预测编码器。例如，您只编码两个连续帧之间的差异。您只需在像素之间进行简单的异或运算即可找到两个二进制帧之间的差异。

# jquery - 选择包含特定文本的类的所有元素并删除它们

> ID：11181129
> 
> 赞同：0
> 
> 时间：2012-06-24T20:57:39.010
> 
> 标签：jquery, jquery-selectors

我有一些对象已通过 jquery 插件添加到我的页面正文中...但是我想获取包含类中特定文本的所有元素...

例如。类="genericforall* *** "

“genericforall”部分在 div 元素的类和元素上重复。我想在他们身上调用一个 jquery“删除”方法来摆脱它。

这个问题的下一部分是......我想要这样做的原因是，如果我在页面加载后使用 ajax 加载了一些元素，插件没有“重新创建”方法。所以我想测试（除非有人已经知道）如果我以这种方式删除它们然后再次调用插件上的“init”，它是否会重新创建自己，包括现在创建的新元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:01:21.943

```
 $("a[class*='genericforall'],div[class*='genericforall']").remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:00:23.940

要选择具有以 genericforall 开头的 attr 类的元素：

```
$("a[class^=genericforall], div[class^=genericforall]").remove(); 
```

# database-design - 遗传变异关系数据库

> ID：11181142
> 
> 赞同：3
> 
> 时间：2012-06-24T20:59:27.250
> 
> 标签：database-design, bioinformatics, django-database

我正在尝试代表我机构数据库中的遗传变异数据。我们发现了与参考等位基因、突变等位基因、染色体、位置、名称、可能的影响、基因、基因中的位置等相关的遗传变异。

虽然对于问题上下文有时有用不是必需的，但我将使用 django 构建它，并且 db 后端将是 PostgreSQL 或 MySQL（这里也欢迎关于选择的建议，尽管不是问题的主要焦点）

为了正确地表示这些信息，我已经着手设计一个关系数据库。但是，我在定义最有效的结构时遇到了问题。我可以表示如下：

变异属于多对一关系中的基因。即一个基因可以有许多变体，但一个变体通常不能跨越一个以上的基因。（但有时这可能发生在大型 CNV 或两个基因重叠的情况下，所以可能是多对多关系？？？）

在个体中也发现了变异。个体具有基因型，这只是变体的各种等位基因组合的两个副本。我根本不确定最好的方法，也许是变体和个体的联合主键，并将基因型记录为突变等位基因的数量（例如 0,1,2）？？？

所以我的问题是（对所有的序言和生物谈话感到抱歉）我们认为哪种方式是最好的，或者对这三件事有更好的设计：变体——我想要存储信息的主要内容，基因和个体- 对于任何下游分析都是必不可少的。

非常感谢任何建议。再次为这个问题的短暂性感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T00:14:05.640

好吧，我对基因一无所知，我也不会说生物术语。但是，我从您的问题和维基百科中收集了一些建议并提出了这一点。主要作为建模练习，使用 FCO 方法。所以这里有一些陈述，你应该能够将每一个标记为真或假。

*   **基因**是一些 DNA 片段的名称。
*   **基因**在**染色体**上占据给定**位置**。
***   **染色体是包含许多****基因**的单片卷曲 DNA 。*   **等位基因**是单个**基因**的多种替代形式之一。*   **等位基因**是一个基因。*   **变体**是**DNA 序列**。*   **变异**跨越**基因**。*   **变体**跨越**等位基因**。*   **基因型**是**等位基因的****两个**拷贝。***   **表型**是**人的**可观察到的特征。*   **基因型**影响**表型**。*   一种**表型**会受到多种**基因型**的影响。*   一种**基因型**可能影响许多**表型**。*   **人**有许多**基因型**。*   **人**有许多观察到的**表型**。*   **变异**可以在一个**人身上**发现。****

 ***** * *

![在此处输入图像描述](../Images/c30b07e732ae56af5accdce5fa41f3bc.png)****

# javascript - 为什么 .hover 函数不起作用，如何让 .hover 函数忽略圆角半径之外的区域？

> ID：11181150
> 
> 赞同：0
> 
> 时间：2012-06-24T21:00:23.333
> 
> 标签：javascript, jquery, css, jquery-hover

我试图让圈子对我的 jquery .hover 做出反应。这是我的js：

```
jQuery.fn.center = function () {
this.css("position","absolute");
this.css("top", Math.max(0, (($(window).height() - this.outerHeight()) / 2) + 
                                            $(window).scrollTop()) + "px");
this.css("left", Math.max(0, (($(window).width() - this.outerWidth()) / 2) + 
                                            $(window).scrollLeft()) + "px");
return this;
};

$(document).ready(function()
{
    $('#logo').center();
    j=8;
    size=200;
    $.each($(".circle"), function() {
        $(this).css('z-index', j);
        $(this).css({
            height: size+"px",
            width: size+"px",
            borderRadius: size+"px",
            });
        size = size+50;
        $(this).center();
        j--;
    });

});

  $(".circle").hover(
    function() {
      $(this).animate({
        height: '+=25px',
        width: '+=25px',
        top: '-=12.5px',
        left: '-=12.5px'
        }, 'fast'
      );
    },
    function() {
      $(this).animate({
        height: '-=25px',
        width: '-=25px',
        top: '+=12.5px',
        left: '+=12.5px'
        }, 'fast'
      );
    }
  ); 
```

这是我的正文 HTML：

```
 <div id='logo'><img src='_Source/Logo.png' alt='RB'/></div>
<div id='a1' class='circle'></div><div id='g1' class='circle'></div>
<div id='a2' class='circle'></div><div id='g2' class='circle'></div>
<div id='a3' class='circle'></div><div id='g3' class='circle'></div>
<div id='a4' class='circle'></div><div id='g4' class='circle'></div> 
```

这适用于jsfiddle，[here](http://jsfiddle.net/wdbphoto/bHGRW/3/)

但是，在我的网站上它不起作用，[在这里](http://www.wdb.us/RB)

如果我不是已经秃顶，我会扯掉我的头发。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:39:57.467

`.hover()`绑定调用位于绑定范围之外，`.ready()`位于`<head>`. 最终效果是您试图`.hover`在加载 DOM 之前绑定回调。解决此问题的最简单方法是将其移至 .ready() 绑定函数的范围内。

# html - 为什么我的列表没有弹出？

> ID：11181158
> 
> 赞同：0
> 
> 时间：2012-06-24T21:01:01.553
> 
> 标签：html, css, menu, html-lists

当我将鼠标悬停在“英语”上时，我无法找到导航菜单没有弹出的原因。弹出另一个菜单没有问题。

[http://jsfiddle.net/B6ZcG/](http://jsfiddle.net/B6ZcG/)

有人可以帮我找出错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:12:55.043

您的悬停`<li class="top">`元素需要包含（包装）`<ul>`包含所有语言链接的子项。由于很难解释如何在这里找到错误，因此更新了 jsFiddle 上的代码。

[http://jsfiddle.net/B6ZcG/2/](http://jsfiddle.net/B6ZcG/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:14:32.373

`</li>`你的标记中有胭脂

```
<li class="top"><a href="http://bin.xxx/?op=change_lang&lang=english"><span class="trf trf-english"></span>English</a></li>
<ul> 
```

应该

```
<li class="top"><a href="http://bin.xxx/?op=change_lang&lang=english"><span class="trf trf-english"></span>English</a>
    <ul>... 
```

[小提琴](http://jsfiddle.net/B6ZcG/1/)

# c - 从 C 中的缓冲区分配

> ID：11181162
> 
> 赞同：2
> 
> 时间：2012-06-24T21:01:37.140
> 
> 标签：c, memory-management, particles, particle-system

我正在构建一个简单的粒子系统，并希望使用结构的单个数组缓冲区来管理我的粒子。也就是说，我找不到允许我从任意缓冲区进行 malloc() 和 free() 的 C 函数。这是一些伪代码来显示我的意图：

```
Particle* particles = (Particle*) malloc( sizeof(Particle) * numParticles );
Particle* firstParticle = <buffer_alloc>( particles );
initialize_particle( firstParticle );
// ... Some more stuff
if (firstParticle->life < 0)
    <buffer_free>( firstParticle );

// @ program's end
free(particles); 
```

where`<buffer_alloc>`和`<buffer_free>`are 从任意指针分配和释放内存块的函数（可能带有额外的元数据，例如缓冲区长度等）。是否存在此类功能和/或是否有更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T21:28:07.260

是的，你必须自己写。它是如此简单，它真的很傻，但与一直简单地使用 malloc() 和 free() 相比，它的性能会尖叫......

```
static const int maxParticles = 1000;

static Particle particleBuf[maxParticles]; // global static array

static Particle* headParticle;

void initParticleAllocator()
{
    Particle* p = particleBuf;
    Particle* pEnd = &particleBuf[maxParticles-1];
    // create a linked list of unallocated Particles
    while (p!=pEnd)
    {
        *((Particle**)p) = p+1;
        ++p;
    }
    *((Particle**)p) = NULL; // terminate the end of the list
    headParticle = particleBuf; // point 'head' at the 1st unalloc'ed one
}

Particle* ParticleAlloc()
{
    // grab the next unalloc'ed Particle from the list
    Particle* ret = headParticle;
    if (ret)
        headParticle = *(Particle**)ret;
    return ret; // will return NULL if no more available
}

void ParticleFree(Particle* p)
{
    // return p to the list of unalloc'ed Particles
    *((Particle**)p) = headParticle;
    headParticle = p;
} 
```

您可以修改上面的方法，根本不从任何全局静态数组开始，并在用户调用 ParticleAlloc() 时首先使用 malloc()，但是当返回 Particles 时，不要调用 free() 而是添加返回的那些到未分配粒子的链表。然后 ParticleAlloc() 的下一个调用者将从空闲 Particles 列表中获取一个，而不是使用 malloc()。任何时候空闲列表中都没有更多内容时，您的 ParticleAlloc() 函数可能会退回到 malloc()。或者混合使用这两种策略，这确实是两全其美：如果您知道您的用户几乎肯定会使用至少 1000 个粒子，但偶尔可能需要更多，您可以从 1000 的静态数组开始，然后如果您用完了，请返回调用 malloc() 。如果你这样做，malloc()' ed 不需要特殊处理；当它们返回到 ParticleFree() 时，只需将它们添加到您的未分配粒子列表中。当您的程序退出时，您无需费心在它们上调用 free() ；操作系统将释放进程的整个内存空间，因此任何泄漏的内存都会在此时清除。

我应该提到，由于您的问题被标记为“C”而不是“C++”，因此我以 C 解决方案的形式回答了它。在 C++ 中，实现相同功能的最佳方法是在 Particle 类中添加“operator new”和“operator delete”方法。它们将包含与我上面显示的基本相同的代码，但它们覆盖（而不是重载）全局“new”运算符，并且仅对于 Particle 类，定义一个替换全局“new”的专用分配器。很酷的是，粒子对象的用户甚至不必知道有一个特殊的分配器；他们只是像往常一样简单地使用“new”和“delete”，并且很高兴地没有意识到他们的 Particle 对象来自一个特殊的预分配池。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:35:56.343

哦对不起。这个问题只有我看到的C。不是 C++。好吧，如果它是 C++，那么下面的内容会帮助你。

查看[Boost 的池分配库](http://www.boost.org/doc/libs/1_47_0/libs/pool/doc/index.html)。

在我看来，您的每个分配都是相同的大小？粒子的大小，对吗？如果是这样，来自 Boost 的池分配函数将运行得非常好，您不必自己编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T21:04:36.983

你必须自己写，或者找一个已经写过它们的人并重用他们写的东西。AFAIK 没有标准的 C 库来管理该场景。

您的“缓冲区分配”代码可能需要 4 个函数：

```
typedef struct ba_handle ba_handle;

ba_handle *ba_create(size_t element_size, size_t initial_space);
void  ba_destroy(ba_handle *ba);

void *ba_alloc(ba_handle *ba);
void  ba_free(ba_handle *ba, void *space); 
```

create 函数将进行空间的初始分配，并安排以`element_size`. 返回的句柄允许您为不同类型（甚至为同一类型多次）分配单独的缓冲区。destroy 函数强制释放与句柄关联的所有空间。

分配功能为您提供了一个新的空间单位供您使用。free 函数释放它以供重用。

在幕后，代码会跟踪正在使用的单元（可能是位图），并且可能会根据需要分配额外的空间，或者可能会在初始分配用完时拒绝空间。您可以安排它在空间不足时或多或少地失败（因此分配器永远不会返回空指针）。显然，free 函数可以验证给它的指针是由当前正在使用的缓冲区分配器句柄提供的指针。这允许它检测一些常规`free()`通常不会检测到的错误（尽管`malloc()`et al 的 GNU C 库版本似乎确实做了一些其他人不一定做的完整性检查）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T21:12:16.817

也许尝试这样的事情......

```
Particle * particles[numParticles];
particles[0] = malloc(sizeof(Particle));
initialize_particle( particle[0] );

// ... Some more stuff
if (particle[0]->life < 0)
    free( particle[0] );

// @ program's end
// don't free(particles); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-24T21:41:12.083

我正在构建一个简单的粒子系统，并希望使用结构的单个数组缓冲区来管理我的粒子。

我想你已经回答了：

```
static Particle myParticleArray[numParticles]; 
```

在程序开始时分配并在结束时释放，很简单。或者喜欢你的伪代码并同时 malloc 数组。你可能会问自己为什么要分配一个粒子，为什么不分配整个系统？编写您的 API 函数以获取指向粒子数组和索引的指针。

# ajax - Ajax + Django：如何正确地将一些东西从客户端浏览器发送到服务器？

> ID：11181163
> 
> 赞同：1
> 
> 时间：2012-06-24T21:01:42.540
> 
> 标签：ajax, django, post, extjs, request

在我的应用程序中，有几类数据需要从客户端浏览器发送到服务器。后端在 Django 中。我正在尝试使用 Ajax 将数据发布到 Django 中的视图函数，然后将某些内容返回给客户端。我试过的代码如下：

**在 Django urls.py 中：**

```
 (r'^testPost/', testPost), 
```

**Django视图功能：**

```
def testPost(request):
    print request
    if request.method == 'GET':
        rID = request.GET['rID']
        rName = request.GET['rName'] 
    elif request.method == 'POST':
        rID = request.POST['rID']
        rName = request.POST['rName'] 

    return HttpResponse("ID: " + str(rID) + " and Name: " + str(rName)) 
```

**前端 AJAX 调用（ExtJS 3.3）：**

```
 Ext.Ajax.request({ 
        url: 'XXXX/testPost/?',
        method: 'POST',
        jsonData: Ext.encode({
            "rID": 1333,
                    "rName": 'test'
        }),
        headers: {
            'Content-Type': 'application/json'
        },
        success: function (response, opts){
                    console.log(response.responseText);
                }, 
                failure:function (response, opts){
                    console.log(response.responseText);
                } 
}); 
```

URL 设置似乎有问题。得到错误响应：

```
Some unexpected error occurred. Error text was: HTTP Error 403: FORBIDDEN 
```

**更新：** 1.根据 ldiqual 的建议，把

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt 
```

在视图脚本中

1.  将 ExtJS ajax 请求代码从使用 jsonData 更改为 params：

    **参数：{“rID”：1333，“rName”：“测试”}**

我的问题解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:56:53.677

对于 ajax POST，您需要 CSRF 令牌，并且简单地禁用它是不明智的，`@csrf_exempt`因为它违背了目的。如果您不想要 CSRF 保护，请`'django.middleware.csrf.CsrfViewMiddleware'`从 MIDDLEWARE_CLASSES 中删除。

Django 文档提供了一个 jQuery 函数，该函数会自动将令牌添加到所有 ajax 请求中：[https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

我对 ExtJS 没有任何经验，但你会想找到一个等价的。以下是您可以查看的一些片段：

*   [https://stackoverflow.com/a/5485616/338903](https://stackoverflow.com/a/5485616/338903)
*   [http://djbook.ru/examples/22/](http://djbook.ru/examples/22/)
*   [http://www.sencha.com/forum/showthread.php?134125-Django-1.3-Login-with-ExtJS-4-and-CSRF](http://www.sencha.com/forum/showthread.php?134125-Django-1.3-Login-with-ExtJS-4-and-CSRF&p=608348&viewfull=1#post608348 "http://www.sencha.com/forum/showthread.php?134125-Django-1.3-Login-with-ExtJS-4-and-CSRF")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:15:32.870

在您的模板文件中（假设您使用 jQuery 库）：

```
<form id="MyForm" action="." method="POST">
    {% csrf_token %}
    {{ form.as_table }}
    <input type="submit" class="default" value="Save" onclick="PostThisToAjax(jQuery("#MyForm").serialize()); return false;" />
</form> 
```

# python - ForeignKey 参考的 Django 错误

> ID：11181171
> 
> 赞同：2
> 
> 时间：2012-06-24T21:03:13.930
> 
> 标签：python, django, foreign-keys, admin

我有一个关于 django 的 ForeignKey 参考问题的问题。

这是我的代码的一部分：

应用票务交易者

```
class TicketsTrader(models.Model):
    seller = models.ForeignKey(User, related_name='ticketsTrader_seller')
    buyer = models.ForeignKey(User, related_name='ticketsTrader_buyer')
    inscription = models.ForeignKey(Inscription)
    transactionCode = models.CharField(max_length=30,blank=False,null=False)
    ... 
```

应用题字

```
class Event(models.Model):
    title = models.CharField(max_length=75)
    description = models.TextField()
    ...

class Inscription(models.Model):
    event = models.ForeignKey(Event)
    packs = models.ManyToManyField(PackChoise)
    user = models.ForeignKey(User)
    ...

    def __unicode__(self):
        return self.event.__unicode__() + u': ' + self.user.__unicode__()

    def inscriptionKey(self):
        return str(self.pk) + '_' + str(self.valkey) 
```

但是，当我尝试访问 Grapelli 管理员中的“添加 Ticket Trader”界面时，我收到一条错误消息：

> 用户匹配查询不存在。
> 
> Python27\lib\site-packages\django\db\models\query.py 在获取，第 366 行
> 
> 在模板 \grappelli\templates\admin\includes\fieldset.html 中，第 19 行出现错误

我想要得到的是：在我的ticketTrader表的“inscription”列中获取我的“Inscription”表的唯一ID（pk）的值。

或“inscriptionKey”的值，但我认为这是不可能的。

Django 版本：1.4 / Python 版本：2.7.3 / South last 版本

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:51:45.797

我只能猜测：

TicketsTrader 有一个 Inscription 的外键，它有一个 User 的外键并在其`__unicode__()`方法中使用该键。

现在，我不知道 Grapelli，但默认的管理应用程序会在 Add TicketsTrader 页面上呈现 Inscription-s 的下拉菜单。如果某些`Inscription`-s 指向不存在的`User`-s，那么他们的`__unicode__()`方法将失败并显示您指定的错误消息。

问题是为什么有些`User`-s 会丢失而`Inscription`-s 不会指向它们。好吧，如果您使用例如 MySQL+MyISAM，则不会在此处强制执行外键，因此可能会发生各种奇怪的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:54:07.877

我认为因为您没有任何用户...在创建 Ticket Trader 之前尝试创建用户

# c++ - 使用具有负指数的 GMP/MPIR 库中的 mpz_powm 函数

> ID：11181172
> 
> 赞同：0
> 
> 时间：2012-06-24T21:03:18.317
> 
> 标签：c++, primes, gmp, negative-number

请考虑以下代码：

```
mpz_t x, n, out;

mpz_init_set_ui(x, 2UL);
mpz_init_set_ui(n, 7UL);
mpz_init(out);

mpz_invert(out, x, n);
gmp_printf ("%Zd\n", out);//prints 4\. 2 * 4 (mod 7) = 1\. OK

mpz_powm_ui(out, x, -1, n);//prints 1\. 2 * 1 (mod 7) = 2\. How come?
gmp_printf ("%Zd\n", out);

mpz_clear(x);
mpz_clear(n);
mpz_clear(out); 
```

我无法理解 mpz_powm 函数如何处理负指数，尽管根据文档，它应该支持它们。我希望将一个数字提高到 -1 模 n 等效于将其取模 n 取反。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:13:06.660

尝试使 -1 成为有**符号**数。换句话说，不要使用无符号接口，而是使用值为-1 的真正的大数。

以机智：

```
#include <gmpxx.h>
#include <iostream>

int main()
{
    mpz_class n(7), k(2), res;
    mpz_powm(res.get_mpz_t(), k.get_mpz_t(), mpz_class(-1).get_mpz_t(), n.get_mpz_t());
    std::cout << res << std::endl;
} 
```

印刷：

```
4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:25:04.607

该问题是由声明 mpz_powm_ui 函数的方式引起的：

```
void mpz_powm_ui (mpz t rop, mpz t base, unsigned long int exp, mpz t mod) 
```

也许这是一个文档错误，因为 exp 总是积极的。

# mysql - 删除查询正在运行并且不删除任何数据

> ID：11181174
> 
> 赞同：0
> 
> 时间：2012-06-24T21:03:31.803
> 
> 标签：mysql

我使用查询删除了大约 9,000,000 行，但没有删除任何行，这是什么问题？

```
 DELETE FROM `messages` WHERE  last_change < 1332201600 && last_change !=0 
```

//1332201600是时间戳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:04:54.130

从大表中删除 900 万行可能需要很长时间。在整个命令完成并提交事务之前，不会删除任何行。你必须要有耐心。

我还会检查您的 WHERE 子句是否实际匹配某些行。尝试运行以下语句：

```
SELECT *
FROM `messages`
WHERE last_change < 1332201600 && last_change !=0
LIMIT 10 
```

如果这返回 10 行（如果您的问题中的信息正确，则应该返回），那么您的原始 DELETE 语句将*至少*删除这 10 行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:08:55.410

也许问题在于 and 运算符，它应该是：

```
DELETE FROM `messages` WHERE  last_change < 1332201600 AND last_change !=0 
```

# unit-testing - 单元测试如何使参数验证变得多余？

> ID：11181179
> 
> 赞同：6
> 
> 时间：2012-06-24T21:04:10.007
> 
> 标签：unit-testing

我们有一个约定来验证构造函数和公共函数/方法的所有参数。对于引用类型的强制参数，我们主要检查非空，这是构造函数中的主要验证，我们在其中设置类型的强制依赖项。

我们这样做的第一个原因是及早捕获该错误，并且在不知道引入错误参数的位置或时间的情况下几个小时后不会得到空引用异常。随着我们开始过渡到越来越多的 TDD，一些团队成员觉得验证是多余的。

大力提倡 TDD 的 Bob 叔叔强烈建议不要进行参数验证。他的主要论点似乎是*“我有一套单元测试可以确保一切正常”*。

但我终其一生都看不到单元测试能以何种方式阻止我们的开发人员在**生产**代码中使用错误的参数调用这些方法。

拜托，那里的单元测试人员，如果你能用具体的例子以合理的方式向我解释这一点，我会非常乐意抓住这个参数验证！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T21:18:44.290

我的回答是“不能”。基本上这听起来我不同意鲍勃叔叔（除其他外）。

很容易想象这样一种情况，您已经对非空参数的库代码进行了单元测试，并且您已经对调用代码的路径进行了单元测试，该路径恰好在您不知道的情况下向库提供了空参数它，但*也*恰好不会对该特定路径造成任何问题。你可以有 100% 的覆盖率，实际上是一组相当不错的测试，但仍然没有注意到问题。

一切都好吗？不，当然不是——因为你在不知情的情况下违反了图书馆合同（不要给我一个非空值）。您是否可以放心，您提供空参数的*唯一*情况是无关紧要的情况？我不这么认为——特别是如果你甚至不*知道*这个论点是空的。

在我看来，公共 API 应该验证它们的参数，而不管调用代码和 API 本身是否经过单元测试。调用代码的问题要暴露出来，尽早暴露出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T21:12:31.450

这是我多年来一直在问自己的问题，但仍然没有得到令人满意的答案。

但是我认为，在进行参数验证时，您需要区分两种情况：

1.  您是否正在验证参数以捕获逻辑编程错误？

    ```
    if (foo == null) throw new ArgumentNullException("foo"); 
    ```

    很可能就是一个例子。

2.  您是否正在验证参数，因为它是一些外部输入（由用户提供，或从配置文件或从数据库中读取），它可能是无效的并且必须被拒绝？

    ```
    if (customerDateOfBirth == new DateTime(1900, 1, 1)) throw …; 
    ```

    可能属于这种类型的参数检查。

（如果您要公开团队外部人员使用的 API，第 2 点也大致适用。）

我怀疑诸如单元测试、合同设计以及在某种程度上“早期失败”之类的方法主要集中在第一种类型的参数验证上。也就是说，它们试图检测逻辑编程错误，而不是无效输入。

如果是这种情况，那么我敢说您遵循哪种错误检测方法实际上并不重要。每个都有自己的优点和缺点。^(**†**)在极端情况下（例如，当您完全信任自己编写无错误代码的能力时），您甚至可以完全放弃这些检查。

但是，无论您选择哪种方法来检测代码中的逻辑错误，您仍然需要验证用户输入等，因此需要区分两种参数检查。

* * *

> **^(†))一个业余爱好者在比较按合同设计、单元测试和“早期失败”的相对优缺点方面的不完整尝试：**
> 
> （虽然你没有要求它......我只会提到一些关键的区别。）
> 
> *早期失败*（例如在方法开始时显式验证参数）：
> 
> *   编写防卫等基本检查`null`很容易编写
> *   可能会混淆对逻辑错误的防范和使用相同语法对外部输入的验证
> *   不允许您测试方法的交互
> *   不鼓励您严格定义（并因此考虑）您的方法的合同
> 
> *单元测试：*
> 
> *   允许您单独测试代码，而无需运行实际应用程序，因此可以更快地检测错误
> *   如果发生逻辑错误，您无需跟踪堆栈即可找到原因，因为每个单元测试都代表代码的特定“用例”。
> *   不仅可以测试单个方法，甚至可以测试多个对象之间的交互（想想存根和模拟）
> *   编写简单的测试（例如防范`null`）比使用“早期失败”方法（如果您严格遵守 Arrange-Act-Assert 模式）更工作
> 
> *按合同设计：*
> 
> *   强制你明确地声明你的类的契约（尽管这也可以通过单元测试来实现——只是以不同的方式）
> *   允许您轻松声明类不变量（必须始终成立的内部条件）
> *   不像其他方法那样受到许多编程语言/框架的支持

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T13:30:49.983

我几乎同意鲍勃叔叔的所有观点，但这不是这个。我投票支持“快速失败，努力失败”的政策。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T21:20:34.360

这完全取决于您正在开发的应用程序的类型。

1.  我大部分时间都在编写不公开公共 API 的应用程序，在这种情况下，应用程序必须是确定性的，从某种意义上说，所有参数都必须并且将不同于 null。简而言之，您应该在系统边界执行输入验证，不要让这些无效输入潜入您的应用程序，这可能会导致空引用等。在这种应用程序中，您可以完全控制在您获取应用程序的输入时检查它们。

2.  如果您正在编写公共 API，则不建议检查空引用。只需查看所有可能引发异常的 MSDN 类方法，所有这些都发生在 API 内部作为前提条件检查，您可以阅读[C# 框架设计指南](http://msdn.microsoft.com/en-us/library/czefa0ke%28v=vs.71%29.aspx)以获取更多信息。

在我看来，无论是公开（或不公开）的 API 应用程序，为您的方法设置先决条件总是一件好事（这些合同是您的同行的文档，他们将在未来处理您的代码）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T15:12:20.647

这与TDD无关。

对于公共 API，是的，我们应该尽可能快地进行参数检查。

所有构造函数参数检查对我来说似乎完全没有必要，因为团队之外的任何其他人都不会使用它。为什么我们有空检查？我们不信任调用这些方法的代码。

那么什么是公共 API？所有公共方法？如果是这样，那么我猜就没有所谓的内部 API。那么为什么要使用public这个词呢？为什么只说所有公共方法都应该进行空/边界检查。

我认为问题的根本原因是对我们自己的代码和团队成员缺乏信任，显然我们以错误的方式解决问题。

# php - 如何避免拒绝服务 (DoS) 阅读 Google 新闻 RSS 提要

> ID：11181180
> 
> 赞同：1
> 
> 时间：2012-06-24T21:04:30.437
> 
> 标签：php, rss, access-denied

我有超过 1000 个客户，我开发了一个简单的 PHP 脚本来遍历他们的名字，使用 Google 新闻 RSS 搜索任何新闻。

我循环这个字符串，用 $searchString 代替相关名称：

```
$GoogleSearch = "https://news.google.com/news/feeds?q=".$searchString."&output=rss"; 
```

我还使用“call_user_func”来控制（序列化）对 Google 的请求（即“委托方法”）。

问题是谷歌太聪明了，他们检测到我发送这些请求的 IP 地址，他们阻止了我的访问！

有什么建议可以避免 DoS 吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:14:19.847

您可能只需要放慢您发送给谷歌的请求。在您的脚本中放置暂停或将其分开，以便它在不同的时间为不同的客户端运行。例如，如果您有 1000 个客户端，您可以每 3.6 秒运行一个请求，并且您会在一小时内更新所有客户端。

# d3.js - 存在过渡时如何调整 d3 轴属性？

> ID：11181186
> 
> 赞同：0
> 
> 时间：2012-06-24T21:04:58.497
> 
> 标签：d3.js

我正在使用 d3 轴组件，但我想在绘制后调整一些东西。具体来说，我想通过向文本元素添加转换并将文本锚属性从“中间”设置为“结束”来旋转文本标签。

我遇到的问题是 text-anchor 属性似乎是由 d3 代码异步设置的，作为过渡的一部分。当我在我的代码中将值设置为“结束”时，它随后在转换运行时被设置回“中间”。

如果我等到过渡结束再进行更改，它看起来会很不稳定。我想知道是否有一种方法可以将自己插入到绘制和转换轴的过程中，以便使用我的文本锚值而不是默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T06:07:15.903

这似乎是 API 无法覆盖的东西。一个简单但棘手的解决方案是将其设置在您的样式表中......

```
.x.axis text {
  text-anchor: end !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:38:12.383

我相信这构成了轴组件中的错误，因此我创建了一个拉取请求来[立即更新标签属性，](https://github.com/mbostock/d3/pull/684)而不是作为轴转换的一部分。文本元素的 text-anchor 属性无法插入，因此没有理由将更新推迟到过渡，并且立即设置它可以让您轻松使用后选择修复它。

另一种解决方法是扩展轴组件以支持不同样式的刻度标记。这样，您就不需要使用后选择，因此不会与轴转换发生冲突。

# android - 无法从 intellij 将 android 应用程序附加到设备

> ID：11181187
> 
> 赞同：0
> 
> 时间：2012-06-24T21:05:05.833
> 
> 标签：android, intellij-idea, android-sdk-2.3, ubuntu-12.04

我已经安装了 ubuntu 12.04(64bit) 和 intelliJ 11.1.2 和 Android SDK (2.3.3 with google api)，当我尝试从 intelliJ 在真实设备上运行我的应用程序时，它不会运行它。实际上我可以在运行设备对话框中看到我的设备，但我只收到以下错误：

```
06-24 22:02:10.370: DEBUG/dalvikvm(12081): GC_EXPLICIT freed 204K, 38% free 5743K/9223K, external 0K/512K, paused 79ms
06-24 22:03:24.372: DEBUG/AndroidRuntime(14169): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
06-24 22:03:24.372: INFO/AndroidRuntime(14169): Heap size: -Xmx32m
06-24 22:03:24.372: DEBUG/AndroidRuntime(14169): CheckJNI is OFF
06-24 22:03:24.372: DEBUG/dalvikvm(14169): creating instr width table
06-24 22:03:24.603: DEBUG/AndroidRuntime(14169): Calling main entry com.android.commands.pm.Pm
06-24 22:03:24.663: DEBUG/dalvikvm(13730): GC_EXPLICIT freed 10K, 51% free 2686K/5379K, external 0K/0K, paused 31ms
06-24 22:03:24.663: WARN/ActivityManager(172): No content provider found for:
06-24 22:03:24.673: DEBUG/PackageParser(172): Scanning package: /data/app/vmdl-795727220.tmp
06-24 22:03:24.673: WARN/ActivityManager(172): No content provider found for:
06-24 22:03:24.793: DEBUG/dalvikvm(172): GC_EXPLICIT freed 361K, 56% free 5933K/13255K, external 35K/547K, paused 82ms
06-24 22:03:24.823: DEBUG/AndroidRuntime(14169): Shutting down VM
06-24 22:03:24.823: DEBUG/dalvikvm(14169): GC_CONCURRENT freed 215K, 71% free 306K/1024K, external 0K/0K, paused 1ms+0ms 
```

但另一方面，我可以使用具有相同 android sdk 配置的 eclipse 运行相同的应用程序。

我认为 intelliJ 有问题，或者我在 intelliJ 上配置错误

我的 java SDK：open-java-amd64 1.6 sun-java-1.6 32bit

# c# - 为什么 ListView 只显示 12 个项目？

> ID：11181188
> 
> 赞同：3
> 
> 时间：2012-06-24T21:05:11.577
> 
> 标签：c#, xaml, listview, windows-8, microsoft-metro

我采用了标准的 Item GridView 模板并对其进行了一些修改以满足我的需要。实际上，我对模板代码的改动很少。

我有一个组，其中有很多项目（92 项）。listview 确实渲染了其中的一些，但它只渲染了其中的 12 个。这是为什么？如何覆盖它并使其显示所有项目？

这是我在设置 DefaultViewModel 时进入调试器的屏幕截图： ![在此处输入图像描述](../Images/7f9a116eb199fb54978b3c5bf4993ba9.png)

我像这样将项目添加到我的列表视图中（当我从服务中解析 XML 时）：

```
DataSource.AddItem(new DataItem(... title, name, etc, DataSource.getGroup("gallery"))); 
```

然后在我的 DataSource 类中（这与示例完全相同，我只是重命名了它），我添加了这个方法：

```
public static void AddItem(DataItem item)
{
    item.Group.Items.Add(item);
} 
```

这是呈现它的 XAML 的样子（它与 GridView 模板相同：

```
 <GridView.ItemsPanel>
                <ItemsPanelTemplate>                        
                    <VirtualizingStackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
            <GridView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <Grid Margin="1,0,0,6">
                                <Button
                                    AutomationProperties.Name="Group Title"
                                    Content="{Binding Title}"
                                    Click="Header_Click"
                                    Style="{StaticResource TextButtonStyle}"/>
                            </Grid>
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                </GroupStyle>
            </GridView.GroupStyle>
        </GridView> 
```

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T07:56:40.560

网格应用程序模板将每个组中显示的项目数量限制为 12，原因如下评论中所述：

```
public class SampleDataGroup : SampleDataCommon
{
    ...
    public IEnumerable<SampleDataItem> TopItems
    {
        // Provides a subset of the full items collection to bind to from a GroupedItemsPage
        // for two reasons: GridView will not virtualize large items collections, and it
        // improves the user experience when browsing through groups with large numbers of
        // items.
        //
        // A maximum of 12 items are displayed because it results in filled grid columns
        // whether there are 1, 2, 3, 4, or 6 rows displayed
        get { return this._items.Take(12); }
    }
} 
```

# python - 我应该在哪里声明 5,000 多个单词的列表？

> ID：11181195
> 
> 赞同：0
> 
> 时间：2012-06-24T21:07:07.857
> 
> 标签：python

我正在用 python 编写一个游戏，我必须定期从单词列表中提取一个随机单词。当我为我的游戏制作原型时，我在我`word_list = ['cat','dog','rat','house']`的一个模块的顶部声明了一个十个单词。然后我用`choice(word_list)`得到一个随机词。但是，我必须将这个临时的hack 改成更优雅的东西，因为我需要将单词列表的大小增加到5,000 多个单词。如果我在我当前的模块中这样做，它看起来会很荒谬。

我是否应该将所有这些单词放在一个平面 txt 文件中，然后在需要单词时从该文件中读取？如果是这样，我将如何最好地做到这一点？将每个单词单独放置一行，然后随机读取一行？我不确定最有效的方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T22:44:33.963

我会将所有单词放在一个平面文本文件中，每行一个：

```
cat
dog
.... 
```

并在需要时使用以下单线将其加载：

```
word_list = [word.rstrip() for word in open("words.txt","r")] 
```

请参阅：[http ://docs.python.org/tutorial/datastructures.html#list-comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

这个解决方案更优雅一点，因为它不依赖于任何东西，只依赖于内置函数。无需导入模块。

确保在加载后对其进行缓存，但您不希望每次需要新单词时都从文件中加载单词。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T21:08:38.993

在启动时从文件中读取单词（或至少是行索引），并根据需要使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T21:13:04.950

我将创建一个名为 random_words 的单独模块或类似的模块，将列表隐藏在其中并将其封装`choice(word_list)`在接口函数内部。

至于从文件中加载它们，好吧，因为无论如何我都需要输入它们，而python文件最终只是一个文本文件，我会在那里输入它们，可能每行一个以便于维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T21:17:05.640

您可以将每个单词存储在文本文件中的单独行上，然后使用`reader`（从`csv`模块）在启动时将文件加载到列表中。然后，您可以从列表中随机选择一个单词：

```
import csv

FILENAME = 'word_list.txt'
word_list = []

# Open word list and get words
with open(FILENAME, 'rb') as f:
    reader = csv.reader(f)
    for row in reader:
        word_list.append(row) 
```

即使有五千字，你也不应该超过五十千字节的 RAM，所以我认为这是一种有效的方法。

# iphone - Google+ API 重定向 uri

> ID：11181199
> 
> 赞同：1
> 
> 时间：2012-06-24T21:07:49.720
> 
> 标签：iphone, objective-c, ios, google-plus

我想从 Google+ 获取 OAuth。我正在做

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL
URLWithString:@"https://accounts.google.com/o/oauth2/auth?client_id=952790678356&redirect_uri=urn:ietf:wg:oauth:2.0:oob&scope=https://www.googleapis.com/auth/plus.me&response_type=token"]]]; 
```

我知道重定向 URI 中的问题，但我没有重定向 uri，它是`http:// localhost`. 我尝试使用重定向 URI `http:// localhost`，但它不起作用。也许有人知道我必须在重定向 URI 中写什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:21:17.560

Google+ iOS SDK 和示例应用程序演示了如何使用已安装的应用程序 OAuth 流程（通过使用 Google+ 登录按钮）。使用此 SDK，您将能够注册您的**Bundle ID**。

[https://developers.google.com/+/mobile/ios/](https://developers.google.com/+/mobile/ios/)

# javascript - javascript - 如何调用从 ajax 新添加的函数

> ID：11181203
> 
> 赞同：2
> 
> 时间：2012-06-24T21:08:32.927
> 
> 标签：javascript, jquery, dom, dynamic

我有一个之前在这个论坛上被问过的编码困难：

[调用从 Ajax 响应返回的 JavaScript 函数](https://stackoverflow.com/questions/510779/calling-a-javascript-function-returned-from-a-ajax-response)

但我没有找到令人满意的答案。为了更准确地说明我正在处理的问题，以下是详细信息：

我使用 jquery 动态加载文档（HTML 和 javascript）

```
var url = 'document.php';
$('#container').load(url); 
```

document.php 的示例：

```
<form>
    <input name="firstname"></input>
</form>
<script>
    function dosomething()
    {
        console.log($('input[name=firstname]').val());
    }
</script> 
```

* dosomething() 函数是我想稍后调用的函数

然后我想调用该 document.php 中的函数。由于我的要求，我不想在文件加载后调用该函数，而是在以后需要时调用它。因为它是动态加载的，所以 DOM 无法识别这些函数。如何正确调用此函数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:02:11.453

> the DOM doesn't recognize the functions

This sounds like your other functions are wrapped in `$(document).ready()` in the remote page. If that is the case they are out of scope for you to call them from code in the main page and you need to move them out of the `ready` handler to make them globally accessible.

EDIT: Other possibilities

Script tags in head- move to body after html, or use $.getScript in ajax callback to retrieve

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:31:31.593

我认为您正在尝试实现称为`on-demand javascript`（或`lazy-loading`）的技术。换句话说，您的页面最初应该只加载一个小脚本 - 但使用一堆对象和函数，这些对象和函数在其他一些文件中可用，但会在需要时加载。

如果是这种情况，我必须警告您：您可能需要更新现有代码。不要只是按原样调用某个函数，在所有令人兴奋的荣耀中，您应该首先检查它的存在 - 如果它不可用，请等待它的加载：

```
if (typeof lazyObjects.someLazyFunction !== 'function') {
  lazyLoad('lazyFunction.js');
}
lazyObjects.someLazyFunction(); 
```

这里的关键点是lazyLoad应该是*同步*的。换句话说，您必须等到包含您的函数的脚本被实际加载。否则 someLazyFunction 在被调用时不会被定义，即使有这种检查。

`lazyFunction.js`反过来，将包含一些将改变的代码，将`lazyObjects`所需的方法作为属性添加到它们中：

```
// in lazyFunction.js
lazyObjects.someLazyFunction = function() { ... } 
```

*虽然在`=window`这些情况下使用全局 ( ) 对象在技术上是可行的，但我通常不这样做 - 也不建议这样做。*

看，没那么简单。) 我建议阅读[这篇文章](http://ajaxpatterns.org/On-Demand_Javascript)以了解有关此技术的更多信息 - 并实际使用一些已建立的组件在您的代码中实现它（其中一些在链接的文章中提到）。

# javascript - 通过javascript为实时预览容器解析带有自定义过滤器的django模板标签

> ID：11181208
> 
> 赞同：0
> 
> 时间：2012-06-24T21:09:05.967
> 
> 标签：javascript, django, markup, live-preview

我需要使用**[Textile](http://en.wikipedia.org/wiki/Textile_%28markup_language%29)**作为我的标记语言为我的**django**网站创建一个**实时预览**容器（如 stackoverflow 和 Reddit） 。

 **![实时预览 - Reddit](../Images/b29520f6f51b9e0415f9a27a0d0cc3a4.png)

有没有办法在客户端做到这一点？（不使用ajax？）

从视图中解析代码很简单：

```
{% load markup %}
{{ theme.content|textile }} 
```

（不用说，我遵循[了文档](https://docs.djangoproject.com/en/dev/ref/contrib/markup/)并包含`'django.contrib.markup'`在我的`INSTALLED_APPS`设置中。）

为简单起见，假设我不需要 IE 支持。我的 JS 如下所示：

```
function change_preview() {
    var fragment = document.createDocumentFragment();
    // I am no sure what should I put here:
    fragment.appendChild(document.createTextNode('{{ theme.content|textile }}'))
    document.getElementById("preview").appendChild(fragment);
}

window.onload = function() {
    var content_box = document.getElementById('id_content');
    content_box.addEventListener("input", change_preview , false );
} 
```

和 HTML：

```
<textarea id="id_content" rows="10" cols="40" name="content"></textarea>
<div id = "preview"></div> 
```

我还发现[了这个 JS 库](http://www.ben-daglish.net/textile.shtml)。[在客户端与服务器端的PyTextile](http://pypi.python.org/pypi/textile)一起使用它是一个好主意吗？

最佳实践是什么？

我正在寻找非 jQuery 解决方案，但如果没有其他方法，我会接受。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:07:18.793

由于 Textile 指定了什么标记对应于什么 html，我认为 JS 库和 Py 库之间不兼容的可能性不大。

在您的即时预览更新脚本中，您可能希望使用`keyup`事件而不是`input`事件，因为后者仅在`textarea`失去焦点时才会触发。

```
window.onload = function() {
    var content_box = document.getElementById('id_content');
    content_box.addEventListener("keyup", change_preview , false );
} 
```

要使用不基于 jQuery 的 Ben Daglish 的库，您的事件处理程序将如下所示：

```
function change_preview() {
    var content_box = document.getElementById('id_content');
    var html = convert(content_box.value);
    document.getElementById('preview').innerHTML=html;
} 
```**

# r - 最近的 gsubfn 破坏了字符串插值？

> ID：11181209
> 
> 赞同：5
> 
> 时间：2012-06-24T21:09:07.293
> 
> 标签：r, debugging, gsub, string-interpolation

最后一个例子过去可以工作，现在不行了。函数内部没有字符串插值？也许它与变量范围有关？有什么建议么？

```
library(gsubfn)
#R.Version() # I'm using 2.15.0, just upgraded from 2.13.something.

### dumb example of a function
g <- function() {for (a in 1:2) { print(paste('is a', a)) }}
g()

### same thing, outside a function, using string interpolation
for (a in 1:2) { fn$print('is a $a') }
rm(a)

### and now string interpolation inside a function
h <- function() {for (a in 1:2) { fn$print('is a $a') }}
h() 
```

最后一个例子告诉我

```
Error in eval(expr, envir, enclos) : object 'a' not found 
```

# asp.net - 动态初始化 ResourceManager

> ID：11181211
> 
> 赞同：2
> 
> 时间：2012-06-24T21:10:05.110
> 
> 标签：asp.net, .net, resx, resource-files

我有这个功能，它可以很好地从这个名为*OkayMessages*的特定资源文件中获取翻译值。

```
public static string GetResourceString(string resourceKey){
  ResourceManager resourceManager = Resources.OkayMessages.ResourceManager;
  return resourceManager.GetString(resourceKey);
} 
```

但是我有超过 1 个资源文件，我希望这个函数也能从这些文件中获取值。只是，我在动态/以编程方式选择正确的资源（管理器）时遇到了问题。我尝试使用下面的代码，以及一些变体，但我总是得到一个错误。

```
public static string GetResourceString(string resourceFile, string resourceKey){
  ResourceManager resourceManager = new System.Resources.ResourceManager("Resources." + resourceFile, Assembly.GetExecutingAssembly());
  return resourceManager.GetString(resourceKey);
} 
```

大多数时候我得到的错误是：找不到适合指定文化或中立文化的任何资源。确保“Resources.OkayMessages.resources”被正确嵌入或链接到程序集中..

**更新：**我正在为我的资源文件使用 \App_GlobalResources\ 文件夹，看来这就是问题所在。当我将资源文件放在项目的根目录中时，我可以毫无问题地初始化 ResourceManager。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T15:57:54.203

在错误的方向搜索了一段时间后，我才找到了这个问题的最简单的答案。原来有一个方法叫`GetGlobalResourceObject`.

所以就我而言，我现在使用这行代码来完成所有工作：

```
GetGlobalResourceObject("OkayMessages", "PasswordChanged").ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T11:38:09.367

仔细阅读这篇[文章](http://msdn.microsoft.com/en-us/library/yfsz7ac5.aspx)，你会发现你需要指定正确的资源命名空间。那是你的问题。如果 OkayResources.resx 位于项目根文件夹中，这是一个工作示例：

```
using System.Reflection;
using System.Resources;
using System.Web.UI;

namespace WebApplication1
{
    public partial class _Default : Page
    {

        public _Default()
        {
            var result = GetResourceString("OkayResources", "SomeKey");
        }

        private static string GetResourceString(string resourceFileName, string key)
        {
            var resourceName = "WebApplication1." + resourceFileName;
            var resourceManager = new ResourceManager(resourceName, Assembly.GetExecutingAssembly());
            return resourceManager.GetString(key);
        }
    }
} 
```

如果将资源文件放入 Resources 文件夹，则必须更新资源命名空间：

```
var resourceName = "WebApplication1.Resources." + resourceFileName; 
```

# php - MYSQL 从与第一个表关联的另一个表中获取名称

> ID：11181218
> 
> 赞同：-2
> 
> 时间：2012-06-24T21:12:16.357
> 
> 标签：php, mysql

我不明白为什么这个语句不起作用

```
$sql2 = mysql_query("
  SELECT myChurches.id AS id, myChurches.church_name AS church_name 
  FROM myChurches 
  INNER JOIN church_staff 
  ON church_staff.church_id=myChurches.id
  WHERE church_staff.mem_id='$logOptions_id' 
  ORDER BY myChurches.church_name 
  ASC
")

if(mysql_num_rows($sql2) > 0){
    while($row2 = mysql_fetch_array($sql)){
      $church_id = $row2['id']; 
      $church_name = $row2['church_name'];
        $options .= '<option value="'.$church_id.'">'.$church_name.'</option>';
    }
} 
```

基本上，我需要从一张桌子上找到作为教堂工作人员的人，并希望从“myChurches”表格中获取该教堂的“名称”。希望这是有道理的。提前致谢

**编辑：**

表 1 具有唯一的 id 和 Church_name

表 2 具有唯一 id、church_id 和 mem_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:54:05.507

```
 SELECT id, church_name 
  FROM myChurches 
  WHERE id = (SELECT church_id FROM church_staff WHERE mem_id = '$logOptions_id') 
```

**编辑：**这假设 mem_id如您所说**是唯一的，****但**Church_id 不应该是唯一的，除非您做错了什么（因为它是外键）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T16:58:55.460

问题出在 fetch 数组中……该变量与实际的查询变量不同。谢谢您的帮助

# mysql - MySQL 选择问题

> ID：11181222
> 
> 赞同：0
> 
> 时间：2012-06-24T21:12:32.917
> 
> 标签：mysql, sql, database

表#1：**qa_returns_items** ![在此处输入图像描述](../Images/12618a5dbade37d7b7b85c9761929c5b.png)

表#2：**qa_returns_residues**![在此处输入图像描述](../Images/11207e7dfc392bd6265fa8e6355d6bc7.png)

我有很长时间试图得到这个结果：

```
item_code -   item_quantity
2         -   1
3         -   2 
```

* * *

IF qa_returns_items.item_code = qa_returns_residues.item_code AND status_code = 11 THEN

> item_quantity = qa_returns_items.item_quantity - qa_returns_residues.item_quantity

ELSEIF qa_returns_items.item_code = qa_returns_residues.item_code AND status_code = 12 THEN

> item_quantity = qa_returns_items.item_quantity + qa_returns_residues.item_quantity

别的

```
show diferendes 
```

万一

**我试过这个查询：**

```
select  SubQueryAlias.item_code, 
        item_quantity
from    (
        select  
                ri.item_code
        ,       case status_code
                when 11 then ri.item_quantity - rr.item_quantity 
                when 12 then ri.item_quantity + rr.item_quantity
                end as item_quantity
        from    qa_returns_residues rr
        left join    qa_returns_items ri
        on      ri.item_code = rr.item_code
        WHERE ri.returnlog_code = 1
        ) as SubQueryAlias
where   item_quantity > 0 GROUP BY (item_code); 
```

**查询返回以下结果：**

```
item_code -   item_quantity
1         -   2
2         -   2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T09:16:41.807

试试这个查询。我还没有测试过。你需要什么是非常困难的。但是我是从表结构​​和给定的条件子句中构建的。

```
select qa_returns_items.item_code, 
       (CASE status_code
         WHEN 11 THEN (qa_returns_items.item_quantity - qa_returns_residues.item_quantity) 
         WHEN 12 THEN (qa_returns_items.item_quantity + qa_returns_residues.item_quantity)   END) as item_quantity , 
        qa_returns_residues.item_unitprice,
       ( qa_returns_residues.item_unitprice * item_quant) as item_subtotal,
       (qa_returns_residues.item_discount * item_quantity) as item_discount,
       ( ( qa_returns_residues.item_unitprice * item_quant) -   
         (qa_returns_residues.item_discount * item_quantity) ) as item_total
where
 item_quantity > 0 AND  qa_returns_items.item_code = qa_returns_residues.item_code 
```

**更新：**

```
select qa_returns_items.item_code, 
           (CASE status_code
             WHEN 11 THEN (qa_returns_items.item_quantity - qa_returns_residues.item_quantity) 
             WHEN 12 THEN (qa_returns_items.item_quantity + qa_returns_residues.item_quantity)   END) as item_quant , 
            qa_returns_residues.item_unitprice,
           ( qa_returns_residues.item_unitprice * item_quant) as item_subtotal,
           (qa_returns_residues.item_discount * item_quantity) as item_discount,
           ( ( qa_returns_residues.item_unitprice * item_quant) -   
             (qa_returns_residues.item_discount * item_quantity) ) as item_total
    where
    (CASE status_code
             WHEN 11 THEN (qa_returns_items.item_quantity - qa_returns_residues.item_quantity) 
             WHEN 12 THEN (qa_returns_items.item_quantity + qa_returns_residues.item_quantity)   END) item_quant  > 0 AND  qa_returns_items.item_code = qa_returns_residues.item_code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:21:51.097

以我的经验，我建议您从一个新的数据库重新开始，没有记录，然后逐步开始调试。

首先创建数据库和表。之后只插入 2 条带有简单数据的记录。之后开始调试。

从我能够调试的内容来看，问题出在您的子选择中。在你想看的话题中`item_code 2 and 3`。这不可能发生，因为：

```
SELECT ri.item_code,
       CASE status_code
       WHEN 11 then ri.item_quantity - rr.item_quantity 
       WHEN 12 then ri.item_quantity + rr.item_quantity
       END AS item_quantity
FROM      qa_returns_residues rr
LEFT JOIN qa_returns_items ri
ON        ri.item_code = rr.item_code
WHERE     ri.returnlog_code = 1   // Why do you need this for ? 
```

返回

```
item_code   item_quantity
2           2
1           0
1           0
1           0
1           2 
```

然后主查询仅选择具有`item_quantity > 0`.
因此你只得到

```
item_code   item_quantity
1           2
2           2 
```

因此。

我不太确定此操作的目的是什么，但请记住，*简单*的解决方案**总是**最好的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:51:46.407

我解决了我的问题：

```
SELECT  
        item_code, 
        item_quantity, 
        item_unitprice, 
        item_subtotal, 
        item_discount, 
        item_total 
FROM (
        SELECT  qa_returns_items.item_code, 
                qa_returns_items.item_quantity, 
                qa_returns_items.item_unitprice, 
                qa_returns_items.item_subtotal, 
                qa_returns_items.item_discount, 
                qa_returns_items.item_total 
        FROM qa_returns_items 
        WHERE returnlog_code = 1
    UNION
        SELECT  qa_returns_residues.item_code, 
                qa_returns_residues.item_quantity, 
                qa_returns_residues.item_unitprice, 
                qa_returns_residues.item_subtotal, 
                qa_returns_residues.item_discount, 
                qa_returns_residues.item_total 
        FROM qa_returns_residues 
        WHERE returnlog_code = 1 
        ORDER BY item_code ASC
) 
AS SubQueryAlias
WHERE item_code NOT IN (
                        SELECT a.item_code 
                        FROM qa_returns_items a 
                        JOIN qa_returns_residues b 
                            ON b.item_code = a.item_code 
                        WHERE a.returnlog_code = 1 
                            AND b.returnlog_code = 1
                        ); 
```

# c++ - JNI 是否为本机代码引入了额外的线程？

> ID：11181223
> 
> 赞同：2
> 
> 时间：2012-06-24T21:12:37.360
> 
> 标签：c++, c, android-ndk

我目前使用 android NDK 用 C 编写一些本机代码。我了解到使用 JNI 我们可以进行从 java 到 C 和从 C 到 java 的两种方式调用。

我很好奇使用 JNI 是否隐式引入了一个额外的线程，或者它仍然是应用程序的一个 main() 线程？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T06:46:19.597

Android 中的 Dalvik Java VM 从当前 Java 线程调用本机代码。它可以是任何线程 - UI 或任何其他线程。您的本机代码可以随意生成新线程。

当然，调用 java->native->java 将返回到调用它的同一个线程。

# linux - linux的fork和系统资源

> ID：11181224
> 
> 赞同：1
> 
> 时间：2012-06-24T21:12:47.840
> 
> 标签：linux, resources, fork

> **可能重复：**
> [fork() 时是否共享文件描述符？](https://stackoverflow.com/questions/4277289/are-file-descriptors-shared-when-forking)

假设我在 linux 中有以下代码：

```
int main()
{
   FILE* f = fopen("file.txt", "w");
   fork();
   fwrite("A", 1, 1, f);
   fclose(f);
   return 0;
} 
```

我`fork`从文档中了解到的是，它会复制当前流程。它也复制内存的状态，因此 *f 在两种情况下都应该相等。但是系统资源会发生什么，例如文件句柄？在此示例中，我以写入意图打开文件，因此只有一个实例可以写入文件，对吗？哪些实例实际上会写入文件？谁应该进一步关心文件句柄并调用 fclose() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:30:03.477

两个进程都有一个句柄。两者都可以写入，但将共享当前偏移量。两者都应该关闭，每个都关闭自己的句柄。

# c# - 编码/解码十六进制数据包

> ID：11181232
> 
> 赞同：1
> 
> 时间：2012-06-24T21:13:51.210
> 
> 标签：c#, hex, ascii, packet

我想发送这个十六进制数据包：

```
00 38 60 dc 00 00 04 33  30 3c 00 00 00 20 63 62 
39 62 33 61 36 37 34 64  31 36 66 32 31 39 30 64 
30 34 30 63 30 39 32 66  34 66 38 38 32 62 00 06 
35 2e 31 33 2e 31 00 00  02 3c 
```

所以我建立了字符串：

```
string packet = "003860dc0000" + textbox1.text+ "00000020" + textbox2.text+ "0006" + textbox3.text; 
```

然后将其“转换”为ASCII：

```
conn_str = HexString2Ascii(packet); 
```

然后我发送数据包......但我有这个：

```
00 38 60 **c3 9c** 00 00 04 33  30 3c 00 00 00 20 63 
62 39 62 33 61 36 37 34 64  31 36 66 32 31 39 30 
64 30 34 30 63 30 39 32 66  34 66 38 38 32 62 00 
06 35 2e 31 33 2e 31 00 00  02 3c **0a** 
```

为什么？？谢谢！PS函数是：

```
private string HexString2Ascii(string hexString)
{
     byte[] tmp;
     int j = 0;
     int lenght;
     lenght=hexString.Length-2;
     tmp = new byte[(hexString.Length)/2];
     for (int i = 0; i <= lenght; i += 2)
     {
         tmp[j] =(byte)Convert.ToChar(Int32.Parse(hexString.Substring(i, 2), System.Globalization.NumberStyles.HexNumber));
         j++;
     }
     return Encoding.GetEncoding(1252).GetString(tmp);
} 
```

* * *

编辑：如果我直接转换为字节，则将十六进制数据包编码为字符串：

```
00000000  30 30 33 38 36 30 64 63  30 30 30 30 30 34 33 33 003860dc 00000433
00000010  33 30 33 43 30 30 30 30  30 30 32 30 33 34 33 32 303C0000 00203432
00000020  36 33 36 33 33 35 33 39  33 32 33 34 36 36 33 39 63633539 32346639
00000030  36 33 33 39 33 31 33 39  33 30 33 36 33 33 36 35 63393139 30363365
00000040  33 35 36 33 36 35 36 35  36 35 33 31 33 39 33 38 35636565 65313938
00000050  36 33 33 31 36 34 33 34  36 33 33 30 30 30 30 36 63316434 63300006
00000060  33 35 32 65 33 31 33 33  32 65 33 31 30 30 30 30 352e3133 2e310000
00000070  30 32 33 43                                      023C 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:17:39.113

**[您不能将原始二进制数据转换为字符串数据并期望一切正常](http://www.joelonsoftware.com/articles/Unicode.html)。它们是不相同的。当您混淆字符编码时尤其如此。**

C# 字符不是 ASCII 字符。它们是 Unicode 字符，由 Unicode 代码点表示。当你转身写出这些字符时，你需要指定写出什么样的数据。当您使用 Encoding.GetEncoding(1252) 将字节数组读入字符串时，您将获得与代码页 1252 对应的字符，其中`0xdc`是`Ü`.

但是，当您的字符串被转换回字节以通过网络发送时，它会被写为 UTF-8。在 UTF-8 中，UTF-00DC 不能编码为单个字节，因为该字节值用于指示多字节序列的开始。相反，它被编码为多字节序列`0xc3 0x9c`。就 C# 而言，这两个值是相同的字符。（我不知道额外的 0x0a 来自哪里，但我的猜测是来自您的一个文本框和/或您的流程的其他部分的错误换行）。

目前尚不清楚您到底要做什么，但我怀疑您转换的次数太多，无法正常工作。如果您知道要发送的字节序列，为什么不直接将其编码为 byte[] 呢？例如，使用 a`MemoryStream`并将所需的常量字节写入其中。

为了从文本框中获取值，将十六进制数字字符串“转换”为 ASCII 字符字符串的原始代码具有正确的想法。你只需要停在你有一个字节数组的地方，因为最终字节数组就是*你想要*的。

```
public byte[] GetBytesFrom(string hex)
{
    var length = hex.Length / 2;
    var result = new byte[length];
    for (var i = 0; i < length; i++)
    {          
      result[i] = byte.Parse(hex.Substring(i, 2), NumberStyles.HexNumber);
    }

    return result;
}

// Variable portions of packet structure.
var byte[] segment2 = GetBytesFrom(textbox1.Text);
var byte[] segment4 = GetBytesFrom(textbox2.Text);
var byte[] segment6 = GetBytesFrom(textbox3.Text);

MemoryStream output = new MemoryStream();
output.Write(new[] { 0x00, 0x38, 0x60, 0xdc, 0x00, 0x00 }, 0, 6);
output.Write(segment2, 0, segment2.Length);
output.Write(new[] { 0x00, 0x00, 0x00, 0x20 }, 0, 4);
output.Write(segment4, 0, segment4.Length);
output.Write(new[] { 0x00, 0x06 }, 0, 2);
output.Write(segment6, 0, segment6.Length); 
```

从这里，您可以使用`MemoryStream.CopyTo()`将其复制到另一个流，或`MemoryStream.Read()`将整个数据包读入一个新的字节数组，或`MemoryStream.GetBuffer()`获取底层缓冲区（尽管最后一个很少是您想要的——它包括未使用的填充字节）

# php - PHP 会话基础

> ID：11181233
> 
> 赞同：0
> 
> 时间：2012-06-24T21:14:06.793
> 
> 标签：php

好的，我有一个关于 php 会话的完全菜鸟问题：

我有 3 个（以及更多）php 页面，我需要使用登录系统和会话来保护它们。现在，我将其包含在每一页的顶部：

```
session_name('somename');
session_start();

if(!$_SESSION['user_loggedIn']){
    header("location: login.php");
}

if (isset($_SESSION["timeout"])) {
$inactive = 900;
    $sessionTTL = time() - $_SESSION["timeout"];

      if ($sessionTTL > $inactive) {
        session_destroy();
        header("location: login.php");
      }

} 
```

问题：添加诸如 include session.php 之类的内容是否正确？到每个 php 文件的顶部，ofc。session.php 将只包含上面的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:19:00.670

您不需要自己处理会话超时，您的网络服务器几乎肯定已经为您处理了。您需要做的就是检查会话是否存在，并确保您在该会话中有登录信息。

此外，就“什么是正确的做法”而言——如果您在每个 php 文件的顶部都需要它，请记住使用“require_once”，因为如果您包含其他文件，一遍又一遍地做同样的事情是没有意义的. 此外，您可能只需要在您知道只需要安全用户的页面上执行此操作，而这并不总是站点的每个页面。

# javascript - 正文 Html 中的样式和脚本

> ID：11181234
> 
> 赞同：0
> 
> 时间：2012-06-24T21:14:08.933
> 
> 标签：javascript, html, css, styles

是否可以在 Html 页面的正文中包含样式和脚本？在我使用的论坛上，我意识到我可以使用内联样式在其中使用其他 html，但是我可以将它放在正文中并使用它吗？

**是否可以将此代码直接放入 html 文件的正文中？**

```
<!-- Scripts and Themes for Syntax Highlighter, put in place on this thread by Fabian Cook (CyberPython) - Moderator -->
<!-- Core JS File -->
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
<!-- Java Theme -->
<script type="text/javascript" src="http://alexgorbatchev.com/pub/sh/current/css/shBrushJava.js"></script>
<!-- Core Theme -->
<link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
<!-- Core Style -->
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shAutoloader.js" type="text/javascript"></script>
<!-- Script to highlight syntax -->
<script type="text/javascript">SyntaxHighlighter.all()</script> 
```

然后也使用它

```
<pre class="brush:java">  
      package tutorial;
      import com.opensymphony.xwork2.ActionSupport;
      public class HelloWorld extends ActionSupport {
        private String name;
        public String getName() {
        return name;
        }
        public void setName(String name) {
            this.name = name;
        }
        public String execute() {
            name = "Hello, " + name + "!"; 
            return SUCCESS;
        }
      }
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:22:50.933

任何时候都包含脚本，但`html`在某些情况下可能需要在内容之后包含脚本。样式不应该。

如果您想知道是否可以直接输入文件内容，请使用`script`与`style`链接文件具有相同内容的标签。

```
<script>
    //code...
</script>
<style>
    /* styles */
</style> 
```

# python - 处理从 python 调用的 c++ 返回的结构

> ID：11181238
> 
> 赞同：3
> 
> 时间：2012-06-24T21:14:40.640
> 
> 标签：python, ctypes

我想使用一个在 Python 的 DLL 中定义的函数。从 C++ 函数 (get_version) 返回的值是一个结构

```
typedef struct myStruct {
    size_t size;
    char * buff;
} myStruct ; 
```

Python代码是：

```
lib = CDLL(myDLL.dll)
lib.get_version 
```

问题是如何处理返回值？

我已经阅读了 Voo 的答案并阅读了其他帖子，但我仍在为此苦苦挣扎

我声明了结构类（Foo，来自 Voo 的回答）并设置了`restype` 代码现在看起来

```
class Foo(Structure):
    _fields_ = [('size', c_size_t), ('buff', c_char_p)]

lib = CDLL(myDLL.dll)
lib.get_version
lib.get_version.restype = Foo._fields_ 
```

我收到以下错误 **TypeError: restype must be a type, a callable, or None**

我读到了这一点，如果我将`restype`not 设置为列表，例如：c_char_p，则不会出现错误

当我设置`restype`

lib.restype = Foo。*字段*

错误未出现，但`restype`for`get_version`设置不正确在调试中查看变量时：

lib.restype = list: [('size', ), ('buff', )]

lib.get_version.restype = PyCSimpleType：

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:31:51.723

您必须使用[ctypes](http://docs.python.org/library/ctypes.html)模块。您只需要使用 ctypes 在您的 python 代码中定义结构。

就像是：

```
>>> from ctypes import *
>>> class Foo(Structure):
...     _fields_ = [("size", c_size_t), ("buff", c_char_p)] 
```

应该做的伎俩。然后你只需将`restype`你的`get_version`方法设置为你的结构，这样解释器就知道它返回了什么，然后你就可以按预期使用它了。

# mysql - 声明 bigdecimal 后更新 mysql 上的表

> ID：11181239
> 
> 赞同：0
> 
> 时间：2012-06-24T21:14:41.890
> 
> 标签：mysql, sql-update

我在我的应用程序上有以下工作，其中我试图更新名为“porcobrar2012”的 mysql 数据库表上的总值。但是，唯一更新的值是 while 循环中生成的最后一个值。为什么？所有值都可以毫无问题地打印在屏幕上，但这些值没有在数据库中更新。这是代码：

```
BigDecimal total = new BigDecimal("0"); 
  try
{
        //Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        //Connection connection=DriverManager.getConnection("jdbc:odbc:db1","","");
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection connection=DriverManager.getConnection("jdbc:mysql://localhost/etoolsco_VecinetSM?user=etoolsco&password=g7Xm2heD41");
        Statement statement=connection.createStatement();
        String query;
        query="SELECT * FROM porcobrar2012"; 
        ResultSet resultSet=statement.executeQuery(query);
    while(resultSet.next())
    {
    out.println(resultSet.getString(2)+"");out.println(resultSet.getBigDecimal(3)+"");out.println(resultSet.getBigDecimal(4)+"");out.println(resultSet.getBigDecimal(5)+"");out.println(resultSet.getBigDecimal(6)+"");out.println(resultSet.getBigDecimal(7)+"");out.println(resultSet.getBigDecimal(8)+"");out.println(resultSet.getBigDecimal(9)+"");out.println(resultSet.getBigDecimal(10)+"");out.println(resultSet.getBigDecimal(11)+"");out.println(resultSet.getBigDecimal(12)+"");out.println(resultSet.getBigDecimal(13)+"")out.println(resultSet.getBigDecimal(14)+"");out.println(resultSet.getBigDecimal(15)+"");
    total = resultSet.getBigDecimal(3).add(resultSet.getBigDecimal(4)).add(resultSet.getBigDecimal(5)).add(resultSet.getBigDecimal(6)).add(resultSet.getBigDecimal(7)).add(resultSet.getBigDecimal(8)).add(resultSet.getBigDecimal(9)).add(resultSet.getBigDecimal(10)).add(resultSet.getBigDecimal(11)).add(resultSet.getBigDecimal(12)).add(resultSet.getBigDecimal(13)).add(resultSet.getBigDecimal(14)).add(resultSet.getBigDecimal(15));
    String query1;
    query1="UPDATE porcobrar2012 SET total=total";
    PreparedStatement ps = connection.prepareStatement(query1);
    ps.executeUpdate();

    out.println(total);

}

    connection.close();
statement.close();

} 

  catch (Exception e) 
{
      //e.printStackTrace();
      out.println(e.toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:36:34.507

这是因为更新关闭了现有的结果集。但是我会问，为什么您不在没有任何事先查询的情况下在单个 UPDATE 语句中进行添加，在数据库中，没有循环，没有 BigDecimals。数据库编程的规则之一是“不要将数据移动到超出你需要的位置”。只写“UPDATE porcobrar2012 SET a=b+c+d+...”效率会高很多倍。您也可以删除 Class.forName() 调用：多年来一直不需要它。

# actionscript-3 - 叠加 png 中的透明度使背景也变得透明

> ID：11181245
> 
> 赞同：0
> 
> 时间：2012-06-24T21:16:29.250
> 
> 标签：actionscript-3

我有两个影片剪辑，一个是背景，另一个包含用户生成的绘图。这包括我使用的擦除：

```
eraserDraw.graphics.lineStyle(shapeSize.width, 0x000000); 
```

这一切都在浏览器中显示良好。您可以擦除线条以查看背景，但是当我将其保存为 png 时，无法看到背景。透明度似乎一直到底部而不是显示背景。

这是我所拥有的：

```
var bmd:BitmapData = new BitmapData(imgWidth, imgHeight, true, 0x00000000);
bmd.draw(background);
bmd.draw(foreground);
var ba:ByteArray = PNGEncoder.encode(bmd); 
```

谢谢

解决了：

我需要：

```
background.cacheAsBitmap = true;
foreground.cacheAsBitmap = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:58:40.297

确保将两个位图的[cacheAsBitmap](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#cacheAsBitmap)设置为。`true`

# java - 基本文件读取到阵列存储

> ID：11181248
> 
> 赞同：1
> 
> 时间：2012-06-24T21:16:38.867
> 
> 标签：java, arrays, file-io, collections, methods

我有一个简单的 Java 问题，如果可能的话，我需要一个简单的答案。我需要从文件中输入数据并将数据存储到一个数组中。为此，我必须让程序打开数据文件，计算文件中元素的数量，关闭文件，初始化数组，重新打开文件并将数据加载到数组中。我主要无法将文件数据存储为数组。这是我所拥有的：

要阅读的文件在这里：[https ://www.dropbox.com/s/0ylb3iloj9af7qz/scores.txt](https://www.dropbox.com/s/0ylb3iloj9af7qz/scores.txt)

```
import java.io.*;
import java.util.*;
import javax.swing.*;
import java.text.*;

public class StandardizedScore8
{

//Accounting for a potential exception and exception subclasses
public static void main(String[] args) throws IOException
{
    // TODO a LOT
    String filename;
    int i=0;

    Scanner scan = new Scanner(System.in);
    System.out.println("\nEnter the file name:");
    filename=scan.nextLine();

    File file = new File(filename);

    //File file = new File ("scores.txt");
    Scanner inputFile = new Scanner (file);

    String [] fileArray = new String [filename];
    //Scanner inFile = new Scanner (new File ("scores.txt"));

    //User-input
//  System.out.println("Reading from 'scores.txt'");
//  System.out.println("\nEnter the file name:");
//  filename=scan.nextLine();

    //File-naming/retrieving
//  File file = new File(filename);
//  Scanner inputFile = new Scanner(file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:21:50.373

我建议您使用集合。这样，您不必事先知道文件的大小，您只需阅读一次，而不是两次。集合将管理自己的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:02:10.143

是的，如果你不关心做两次事情的麻烦，你可以。采用`while(inputFile.hasNext()) i++;`

计算元素的数量并创建一个数组：

```
String[] scores = new String[i]; 
```

如果您确实关心，请使用列表而不是数组：

```
List<String> list = new ArrayList<String>();
while(inputFile.hasNext()) list.add(inputFile.next()); 
```

您可以获取列表元素 like `list.get(i)`，设置列表元素 like`list.set(i,"string")`并获取列表的长度`list.size()`。

顺便说一句，您的线路`String [] fileArray = new String [filename];`不正确。您需要使用 int 创建数组而不是 String。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T22:32:14.017

```
/*
 * Do it the easy way using a List
 *
 */

public static void main(String[] args) throws IOException
{
    Scanner scan = new Scanner(System.in);
    System.out.println("\nEnter the file name:");
    String filename = scan.nextLine();

    FileReader fileReader = new FileReader(filename);
    BufferedReader reader = new BufferedReader(fileReader);

    List<String> lineList = new ArrayList<String>();
    String thisLine = reader.readLine();

    while (thisLine != null) {
        lineList.add(thisLine);
        thisLine = reader.readLine();
    }

    // test it

    int i = 0;
    for (String testLine : lineList) {
        System.out.println("Line " + i + ": " + testLine);
        i++;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T17:41:12.950

我们可以使用 ArrayList 集合将文件中的值存储到数组中，而无需事先知道数组的大小。您可以从以下 url 获取有关 ArrayList 集合的更多信息。

[http://docs.oracle.com/javase/tutorial/collections/implementations/index.html](http://docs.oracle.com/javase/tutorial/collections/implementations/index.html)

[http://www.java-samples.com/showtutorial.php?tutorialid=234](http://www.java-samples.com/showtutorial.php?tutorialid=234)

# android - 从通知开始活动

> ID：11181250
> 
> 赞同：0
> 
> 时间：2012-06-24T21:16:48.493
> 
> 标签：android, android-intent, notifications

我正在开发一个 android 应用程序，我目前正在尝试创建一个通知，一旦用户点击通知，应该启动一个活动。通知正在创建正常，但活动没有开始。

下面是通知的代码。

```
private void showNotification(String username, String password)
{
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager notificationManager = (NotificationManager)context.getSystemService(ns);

    CharSequence tickerText = "Username Copied";
    long when = System.currentTimeMillis();

    int icon = R.drawable.icon;

    Notification notification = new Notification(icon, tickerText, when);
    CharSequence contentTitle = "BPM - Login Management";
    CharSequence contentText = "Username Copied";

    Intent intentNotification = new Intent(context, CopyPassword.class);
    intentNotification.setAction(Long.toString(when));
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    intentNotification.putExtra("password", password);

    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, intentNotification, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

    final int NOTIFICATION_ID = 1;
    notificationManager.notify(NOTIFICATION_ID, notification);
} 
```

通知是从普通的 java 类而不是 android 活动中生成的，以防万一这有什么不同。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:34:01.103

删除不需要的 setAction。

尝试：

```
Intent intentNotification = new Intent(context, CopyPassword.class);
intentNotification.putExtra("password", password);

PendingIntent contentIntent = PendingIntent.getActivity(context, 0, intentNotification, 0);

notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent); 
```

还要确保在您的 AndroidManifest 中声明 CopyPassword Activity

我写了一篇关于它的博客文章：http: [//blog.blundell-apps.com/notification-for-a-user-chosen-time/](http://blog.blundell-apps.com/notification-for-a-user-chosen-time/) :-D

# c++ - 将十六进制值保存到 C++ 字符串

> ID：11181251
> 
> 赞同：3
> 
> 时间：2012-06-24T21:17:05.497
> 
> 标签：c++

我有一个简单的问题，但无法在互联网上找到答案。我正在使用 Windows 的本机 WiFi API 并尝试获取接入点的 MAC。

在 WLAN_BSS_ENTRY 类型的结构中，有一个名为 dot11Bssid 的字段，它基本上是一个由 6 个无符号字符组成的数组。

我想要做的是将 MAC 地址放在 std::string 中，如下所示：'AA:AA:AA:AA:AA:AA'。

我可以像这样打印地址：

```
for (k = 0; k < 6; k++) 
{
    wprintf(L"%02X", wBssEntry->dot11Bssid[k]);
} 
```

但我无法找到将这些值移动到具有上述格式的字符串的方法。

感谢您的帮助，如果您想知道我为什么要在字符串中使用它，我需要将它与以这种方式格式化的字符串进行比较。在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T21:33:04.553

[与IO manipulators](http://en.cppreference.com/w/cpp/io/manip)一起使用`std::ostringstream`（如前所述）。[例如](http://ideone.com/f2nm7)：

```
#include <iostream>
#include <sstream>
#include <ios>
#include <iomanip>
#include <string>

int main()  
{
    unsigned char buf[] = { 0xAA, 0xD1, 0x09, 0x01, 0x10, 0xF1 };

    std::ostringstream s;
    s << std::hex << std::setfill('0') << std::uppercase
      << std::setw(2) << static_cast<int>(buf[0]) << ':'
      << std::setw(2) << static_cast<int>(buf[1]) << ':'
      << std::setw(2) << static_cast<int>(buf[2]) << ':'
      << std::setw(2) << static_cast<int>(buf[3]) << ':'
      << std::setw(2) << static_cast<int>(buf[4]) << ':'
      << std::setw(2) << static_cast<int>(buf[5]);

    std::cout << "[" << s.str() << "]\n";

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:11:30.993

使用 stringstream 并没有什么问题，但令人惊讶的是，人们会在不知道 swprintf 的情况下知道 wprintf。printf 是一整套函数，而不仅仅是 printf 和 wprintf：

```
​int printf( const char *format, ... );​
int fprintf( FILE *stream, const char *format, ... );
int sprintf( char *buffer, const char *format, ... );
int snprintf( char *buffer, int buf_size, const char *format, ... );
int wprintf( const wchar_t* format, ... );
int fwprintf( FILE *stream, const wchar_t* format, ... );
int swprintf( char *buffer, const wchar_t* format, ... );
​int vprintf( const char *format, va_list vlist );​
int vfprintf( FILE *stream, const char *format, va_list vlist );
int vsprintf( const char *buffer, const char *format, va_list vlist );
int vsnprintf( char *buffer, int buf_size, const char *format, va_list vlist );
int vwprintf( const wchar_t* format, va_list vlist );
int vfwprintf( FILE* stream, const wchar_t* format, va_list vlist );(2) 
int vswprintf( const wchar_t* buffer, const wchar_t* format, va_list vlist ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T21:24:13.940

我假设你会使用类似于 sprintf 的东西，std::string 类包含一个转换构造函数，用于从 c-strings 移动到 std::strings。所以你可以 sprintf()，如果那是你正在寻找的。不过，您使用的是 wchar 类型，因此您可能需要考虑 swprintf() 。

类似的问题： [std::string format like sprintf](https://stackoverflow.com/questions/2342162/stdstring-formating-like-sprintf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T08:19:42.393

使用一些这样的

```
int value = 0x1234;
char * temp = new char[100];
sprintf(temp, "0x%x", value);
std::string target(temp);
delete[] temp; 
```

# javascript - 如何在 WEB-INF JSP/Struts 中获取资源

> ID：11181261
> 
> 赞同：1
> 
> 时间：2012-06-24T21:19:03.280
> 
> 标签：javascript, jsp, struts2

.js 文件中名为“jsp”的文件夹中有 JSP 页面`WEB-INF`。这些页面需要一些 javascript 文件。在 JSP 页面中，调用 javascript 文件

```
<script type="text/javascript" src="../../app.lib/jQuery-v-1-7-2.js"></script> 
```

但浏览器无法访问此资源。对 web-inf 中 JSP 页面的所有请求都经过一个操作，并且还为那些称为“安全”的页面提供了单独的名称空间。

可以这么说，这个 account.jsp 页面需要一个 javascript 文件，该文件位于 'web' 文件夹内名为 'app.lib' 的文件夹中。（out of web-inf）。

**(1)** 我想知道一种使用 struts 操作或其他 jsp 功能将该 javascript 文件检索到 account.jsp 页面的方法。
**（2）**第二个问题是：假设有图像应该被保护，并且应用程序本身应该能够在请求时将它们发送到浏览器。换句话说，WEB-INF文件夹内的图像，那么如何我在 account.jsp 中访问它们？
这是 web.xml（删除了会话配置和欢迎文件列表标签以便清晰查看）
`<?xml version="1.0" encoding="UTF-8"?> <web-app.......>
<filter> <filter-name>struts2</filter-name>
<filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>
<filter-mapping>
<filter-name>struts2</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping>
</web-app>`

这是项目结构
![在此处输入图像描述](../Images/661e6d796d9cde0df963abc6f6765b57.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-24T21:22:05.250

不要将 JavaScript 文件放在 WEB-INF 文件夹中。保存在 WEB-INF 中的 JSP 页面由 servlet-container 访问、处理，然后通过 servlet 呈现给客户端，该 servlet 可以访问 WEB-INF 中的文件。JavaScript 文件是客户端资源，由于客户端无法访问 WEB-INF 中的任何资源，因此它们必须位于该文件夹之外。

通常，将 JavaScript 文件放在名为“js”的文件夹中是很常见的，如下所示：

```
-/js
    - actions.js
-/WEB-INF
    - /jsp
        - abc.jsp 
```

顺便说一句，由于 JavaScript 是客户端，即使您将它们存储在 WEB-INF 文件夹中并使用 servlet 引擎处理它们，任何用户仍然可以访问资源 URL 并查看来源。从本质上讲，您不会从中获得任何好处，只会产生成本，包括维护和额外的开发开销。

# javascript - JavaScript 函数中的事件/对象

> ID：11181266
> 
> 赞同：2
> 
> 时间：2012-06-24T21:19:32.153
> 
> 标签：javascript, function, html

如果我有一些这样的 HTML：

```
<a onmouseover='SetTopLeft(this);'href='#'>Click me!</a> 
```

我可以在函数中同时获取对象和事件吗？那么，例如，我可以有这样的方法签名吗？

```
function SetTopLeft(e, o) 
```

...其中 e 是事件，o 是“this”？我实际上可能不需要这个对象，但我想我可能确实需要这个事件。我不介意更好地理解它在 JavaScript 中的工作原理——即，何时/如何传递事件以及何时/如何传递调用对象？我可以选择通过哪个吗？我可以同时通过吗？

基本上，我真正需要做的是在锚点所在的 DIV 中获取鼠标坐标（即使该 DIV 只是网页的一部分，并且无论浏览器是否全屏），我完成它的时间很糟糕。我见过的大多数在某个元素中获取这些坐标的示例都使用事件以及该事件的 pageX 和 pageY 属性。

顺便说一句，这必须在 IE 6 及更高版本中工作。火狐也不错。其他没有必要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T21:24:02.270

是的，内联代码`this`中的元素指的是 HTML DOM 对象，并且`event`指的是事件对象。因此，您可以执行以下操作：

HTML

```
<a onmouseover='SetTopLeft(event, this);' href='#'>Click me!</a> 
```

JavaScript

```
function SetTopLeft(e, obj) {...} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T21:57:29.167

一般来说，您应该避免使用内联事件处理程序。它将表示 (HTML) 与逻辑 (JavaScript) 混合在一起。quirksmode.org 提供了一个很好的关于事件处理[的文章集合。](http://www.quirksmode.org/js/introevents.html)

由于在事件处理程序内部，`this`通常是指处理程序绑定到`this`的元素，因此您也可以显式设置元素并将事件对象作为第一个参数传递：

```
<a onmouseover='SetTopLeft.call(this, event);'href='#'>Click me!</a> 
```

有关详细信息，请参阅[`.call()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)。

除此之外，如果您的链接没有链接到任何东西，最好使用简单的`span`元素或按钮并相应地设置样式。

# jquery - setTimeout 不返回值

> ID：11181269
> 
> 赞同：0
> 
> 时间：2012-06-24T21:20:11.140
> 
> 标签：jquery, ajax, settimeout

我`setTimeout`用于以 30 秒的间隔获取新数据，但它不起作用，不知道它在哪里搞砸了。这是我的代码：

```
(function pollmsg() {
    setTimeout(function () {
        var demon = $('.msgnotimore').val();
        var a = $('.gvpgvpxgvp').val();
        $.ajax({
            url: 'modules/notifications/beast.php?nid=' + demon + '&id=' + a,
            success: function (data) {
                $('.notiloadmsg').append($(data).fadeIn('slow'));
                alert(data);
            },
            dataType: "json",
            complete: pollmsg
        });
    }, 30000);
})(); 
```

当我尝试提醒`demon`时，它会`demon`在 30 秒后提醒，但不会提醒数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:26:12.370

`dataType: "json"`取回时不应该使用，`HTML`而是使用`"html"`

# javascript - 如果我的 JSON 代码使用自己的输出（来自 JSON.stringify），为什么它会返回“语法错误”？

> ID：11181270
> 
> 赞同：1
> 
> 时间：2012-06-24T21:20:14.330
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [jQuery 不会从 AJAX 查询解析我的 JSON](https://stackoverflow.com/questions/249692/jquery-wont-parse-my-json-from-ajax-query)

所以我已经解析和 JSON 字符串化了一个“免费使用”的 KML 文件（基本上只是谷歌地图的 XML），这样我就可以遍历每个国家的边界​​。现在我的问题是当我尝试通过 JSON 数组时，它给了我“语法错误”。

我目前的代码是：

```
$.ajax({
    type: "GET",
    url: "./doc.json",
    dataType: "json",
    success: function (json) {
        var len = json.length;
        for (i = 0; i <= len; i++) {
            //Do stuff
        }
    }
}); 
```

出于某种原因，这给了我这个错误：

```
syntax error @ file:///C:/Users/Toms/Documents/WorldWar/doc.json:1 
```

我在pastebin上有文件（警告它相当大）[http://pastebin.com/0CN9EWja](http://pastebin.com/0CN9EWja)我试图使用'JSON Lint'来验证它但是文件太大并且在能够验证之前崩溃我的浏览器. 我可以看到那里随机抛出了一些空数组，但我没想到这会阻止它成为有效的 JSON。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T21:22:57.563

你要越界了。

```
//   --------v
for (i = 0; i < len; i++) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T21:31:24.657

发现问题[@jQuery 不会从 AJAX 查询中解析我的 JSON](https://stackoverflow.com/questions/249692/jquery-wont-parse-my-json-from-ajax-query)

感谢那些试图提供帮助的人。我的具体问题由“Josh”用 beforeSend 代码解决。

# java - “无效签名”：使用 Scribe 作为客户端重新访问带有 Django 活塞的 oAuth 提供程序

> ID：11181276
> 
> 赞同：0
> 
> 时间：2012-06-24T21:20:46.347
> 
> 标签：java, django, oauth, scribe, django-piston

因此，在使用 Django-Piston 实现 OAuth 时，我遇到了这里提到的错误：[“无效签名”：oAuth provider with Django-piston](https://stackoverflow.com/questions/2935446/invalid-signature-oauth-provider-with-django-piston)

之前发布的解决方案对我不起作用，所以我开始深入研究活塞（[https://bitbucket.org/jespern/django-piston/overview](https://bitbucket.org/jespern/django-piston/overview)）和 Scribe（[https://github.com/fernandezpablo85/scribe-java](https://github.com/fernandezpablo85/scribe-java)）。

事实证明，当使用 JSON 字符串有效负载对 Scribe 请求进行签名时，实际上仅对 OAuth 参数进行了签名。这会导致 Piston 签名验证失败，因为 Piston 对负载中的所有参数以及 OAuth 参数进行签名。

我能够将 Piston 修改为仅签署 OAuth 参数，现在一切正常。作为 OAuth 的新手，我不确定这是否是正确的修复，一种替代方法是修改 Scribe 以对有效负载内容也进行签名（或者可能将每个参数附加到有效负载中，而不是将其作为字符串附加）。

有没有人了解解决这个问题的正确方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:26:09.600

如果我在这里做出了正确的决定，那就是我对活塞的修复：在 OAuthRequest(object) 类中添加此方法：

```
 def get_oauth_parameters(self):
    """Get any OAuth parameters."""
    parameters = {}
    for k, v in self.parameters.iteritems():
        # Ignore oauth parameters.
        if k.find('oauth_') > -1:
            parameters[k] = v
    return parameters 
```

并修改这个以调用新方法：

```
 def get_normalized_parameters(self):
    """Return a string that contains the parameters that must be signed."""
    params = self.get_oauth_parameters()
    try:
        # Exclude the signature if it exists.
        del params['oauth_signature']
    except:
        pass
    # Escape key values before sorting.
    key_values = [(escape(_utf8_str(k)), escape(_utf8_str(v))) \
        for k,v in params.items()]
    # Sort lexicographically, first after key, then after value.
    key_values.sort()
    # Combine key value pairs into a string.
    return '&'.join(['%s=%s' % (k, v) for k, v in key_values]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:20:54.337

OAuth 规范没有说明有效载荷（不是参数）。一些提供商会签署它，但这取决于他们。不在 Scribe 中签署正文内容（xml、json 等），这是一个设计决定，不会改变。

# jquery - 将砌体类添加到 Jquery html 字符串

> ID：11181278
> 
> 赞同：1
> 
> 时间：2012-06-24T21:21:16.920
> 
> 标签：jquery, wordpress, jquery-masonry

我正在尝试使用 jquery 查找和替换 html 数据。jquery 脚本正在工作，事实上它正在从一个 div 容器中获取 html 数据并将其替换为新数据。问题在于重新加载它是复制容器类，而不是添加计算以下 div 所需的 masonry-brick 类。

这是JQuery：

```
$("div.more a").on("click", function (event) {
   event.preventDefault();
   // get the contents
    $.get(this.href, function (response) {
        // jquerify the response HTML string and find our replaceable area
        var result = $(response).find('.l-home-grid');
        // do the replace
        $('.l-home-grid').html(result);
    });
  // Revert all to original state
  $("a.active")
    .removeClass("active")
    .addClass("static");
  // Set classes to clicked anchor
  $(this)
    .removeClass("static")
    .addClass("active");

  window.location.hash = $(this).text();
}); 
```

这导致了html：

```
<div class="mobile-padding l-home-grid masonry" style="position: relative; height: 2660px; ">
  <div class="mobile-padding l-home-grid">
    <div class="gridCells"><a href="#">
      <h4>Things</h4>
      <img width="256" height="182" src="foo.jpg"> </a></div>
    <div class="gridCells"><a href="#">
      <h4>More Things</h4>
      <img width="256" height="182" src="foo.jpg"> </a></div>
    <div class="gridCells"><a href="#">
      <h4>Objects</h4>
      <img width="256" height="182" src="foo.jpg" > </a></div>
  </div>
</div> 
```

为什么是

```
<div class="mobile-padding l-home-grid masonry" style="position: relative; height: 2660px; ">
      <div class="mobile-padding l-home-grid"> 
```

加载两次？

目标是这样的：

```
<div class="mobile-padding l-home-grid masonry" style="position: relative; height: 2660px; ">
    <div class="gridCells masonry-brick"><a href="#">
      <h4>Things</h4>
      <img width="256" height="182" src="foo.jpg"> </a></div>
   ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:46:25.037

发生这种情况是因为您将`.l-home-grid`响应中的整个元素添加到现有`.l-home-grid`元素中。更改此行：

```
var result = $(response).find('.l-home-grid'); 
```

对此：

```
var result = $(response).find('.l-home-grid').html(); 
```

为了将响应内容添加到您的容器中。您可能需要致电

```
$('.l-home-grid').masonry('reload'); 
```

在您拉入新内容以确保其获得砌体化之后。

# amazon-web-services - 在输出到 HDFS 的 EMR 作业中使用 distcp 和 s3distcp 时出现问题

> ID：11181280
> 
> 赞同：1
> 
> 时间：2012-06-24T21:21:32.930
> 
> 标签：amazon-web-services, elastic-map-reduce, amazon-emr, emr

我在 AWS 的 EMR 上运行了一项作业，并将输出存储在 EMR 作业的 HDFS 中。然后我尝试通过 distcp 或 s3distcp 将结果复制到 S3，但两者都失败，如下所述。（注意：我不只是将我的 EMR 作业的输出直接发送到 S3 的原因是由于我在[Where is my AWS EMR reducer output for my completed job 中描述的（当前未解决的）问题（应该在 S3 上，但那里什么也没有)?](https://stackoverflow.com/questions/11169708/where-is-my-aws-emr-reducer-output-for-my-completed-job-should-be-on-s3-but-no)

对于 distcp，我运行（按照[这篇文章的建议](https://forums.aws.amazon.com/thread.jspa?threadID=34011&tstart=0)）：

```
elastic-mapreduce --jobflow <MY-JOB-ID> --jar \
s3://elasticmapreduce/samples/distcp/distcp.jar \
    --args -overwrite \
    --args hdfs:///output/myJobOutput,s3n://output/myJobOutput \
    --step-name "Distcp output to s3" 
```

在错误日志（/mnt/var/log/hadoop/steps/8）中，我得到：

```
With failures, global counters are inaccurate; consider running with -i
Copy failed: Status Code: 403, AWS Service: Amazon S3, AWS Request ID: <SOME-REQUEST-ID>, AWS Error Code: null, AWS Error Message: Forbidden, S3 Extended Request ID: <SOME-EXT-REQUEST-ID>
        at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:548)
        at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:288)
        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:170)
... 
```

对于 s3distcp，我运行（按照[s3distcp 文档](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_s3distcp.html)）：

```
elastic-mapreduce --jobflow <MY-JOB-ID> --jar \
s3://us-east-1.elasticmapreduce/libs/s3distcp/1.0.4/s3distcp.jar \
--args '--src,/output/myJobOutput,--dest,s3n://output/myJobOutput' 
```

在错误日志（/mnt/var/log/hadoop/steps/9）中，我得到：

```
java.lang.RuntimeException: Reducer task failed to copy 1 files: hdfs://10.116.203.7:9000/output/myJobOutput/part-00000 etc
        at com.amazon.elasticmapreduce.s3distcp.CopyFilesReducer.close(Unknown Source)
        at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:537)
        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:428)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
        at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

任何想法我做错了什么？

**更新：**有人在 AWS 论坛上回复[有关类似 distcp 错误](https://forums.aws.amazon.com/thread.jspa?threadID=93486)的帖子提到 IAM 用户用户权限，~~但我不知道这意味着什么~~（**编辑：**我尚未创建任何 IAM 用户，因此它使用默认值); 希望它有助于查明我的问题。

**更新 2：**我在 namenode 日志文件中注意到此错误（重新运行 s3distcp 时）。我将查看默认 EMR 权限，看看是否是我的问题：

```
2012-06-24 21:57:21,326 WARN org.apache.hadoop.security.ShellBasedUnixGroupsMapping (IPC Server handler 40 on 9000): got exception trying to get groups for user job_201206242009_0005
org.apache.hadoop.util.Shell$ExitCodeException: id: job_201206242009_0005: No such user

    at org.apache.hadoop.util.Shell.runCommand(Shell.java:255)
    at org.apache.hadoop.util.Shell.run(Shell.java:182)
    at org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375)
    at org.apache.hadoop.util.Shell.execCommand(Shell.java:461)
    at org.apache.hadoop.util.Shell.execCommand(Shell.java:444)
    at org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getUnixGroups(ShellBasedUnixGroupsMapping.java:68)
    at org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getGroups(ShellBasedUnixGroupsMapping.java:45)
    at org.apache.hadoop.security.Groups.getGroups(Groups.java:79)
    at org.apache.hadoop.security.UserGroupInformation.getGroupNames(UserGroupInformation.java:966)
    at org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.<init>(FSPermissionChecker.java:50)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkPermission(FSNamesystem.java:5160)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkTraverse(FSNamesystem.java:5143)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getFileInfo(FSNamesystem.java:1992)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.getFileInfo(NameNode.java:837)
    ... 
```

**更新 3：**我联系了 AWS Support，他们没有发现问题，所以现在正在等待他们的工程团队的回复。当我听到更多消息时会回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:38:20.363

试试这个[解决方案](https://stackoverflow.com/a/12302277/658346)。至少它对我有用。（我已经成功复制了 30Gb 文件的目录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T00:38:41.047

我不是 100% 肯定的，但是在查看了我上面的命令之后，我注意到我在 S3 上的目的地没有指定存储桶名称。这似乎只是一个菜鸟主义的例子。

# wpf - WPF DataBinding 与 Code First 实体框架

> ID：11181282
> 
> 赞同：0
> 
> 时间：2012-06-24T21:21:53.613
> 
> 标签：wpf, data-binding, ef-code-first

我刚刚熟悉 WPF 数据绑定。我已经弄清楚了大部分基础知识，但我在弄清楚一些事情时遇到了麻烦。

首先，假设我有一个名为 Synth 的对象，它有一个 Bank 集合。反过来，银行有一组补丁。我有一个合成器窗口，我将 DataContext 设置为单个合成器对象。我有一个列表框 (lstBanks) 显示所有银行 ({Binding Banks}) 和另一个 (lstPatches) 显示所有补丁 ({Binding ElementName=lstBanks, Path=SelectedItem.Patches})。这一切都很好。当我选择银行时，我会看到适用的补丁。

**问题 1：如何将选定的 Patch 加载到具有双向绑定的对话框窗口中，但如果 DialogResult = false 则取消这些更改？**

现在，我有一个补丁对话框，它在构造函数中接收一个补丁，它设置为它的 DataContext，但我只使用 OneWay 绑定。这发生在双击 lstPatches 时。

```
 private void Patch_MouseDoubleClick(object sender, MouseButtonEventArgs e)
    {
        Models.Patch patch = (Models.Patch)((ListBoxItem)sender).DataContext;

        PatchEdit p = new PatchEdit(patch);
        p.Owner = this;
        if (p.ShowDialog().GetValueOrDefault())
        {
            // Do stuff if applicable
        }
    } 
```

这是我的 PatchEdit 构造函数和 OK 按钮事件：

```
 public PatchEdit(Models.Patch Patch) : this()
    {
        this.DataContext = Patch;
    }

    private void btnOK_Click(object sender, RoutedEventArgs e)
    {
        Models.Patch p = (Models.Patch)DataContext;
        p.Name = txtName.Text;
        p.MidiProgramChangeValue = int.Parse(txtPCN.Text);
        this.DialogResult = true;
        this.Close();
    } 
```

如果用户在补丁对话框上单击“确定”，那是我将表单中的属性设置回 DataContext 的时候。我不确定这是否是最好的方法。在用户单击主合成器窗口上的确定之前，我不想真正保存更改。所以所有的音色库和补丁编辑应该只保留在本地，并且只有在用户单击“确定”而不是对话框上的“取消”时才“本地”提交。

**问题 2：一旦通过对话框更新了补丁，我如何才能在 lstPatches 中反映该更改？**

我知道直接导航我的模型是 DBSet 类型必不可少的，这是不可观察的。我看过有关使用 Observable 集合的帖子，但这不只是使 WPF 数据绑定应该很容易的事情变得复杂吗？如果这是唯一的方法，我如何使用我的代码优先模型轻松完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:28:53.320

**问题 1：**绑定到第二个/临时对象。如果用户取消，请将其丢弃。如果他们不这样做，请使用它来更新您的原始对象。数据绑定并没有真正提供“撤消”或“重置”方法。

**问题 2：**不，使用 ObservableCollection 不会使事情复杂化。这是推荐的做事方式。*没有*它们，实际上工作要困难得多。

# python - 具有最少小数位数的 Python 格式小数

> ID：11181295
> 
> 赞同：9
> 
> 时间：2012-06-24T21:24:15.827
> 
> 标签：python, format, decimal

我`Decimal`在 Python 中有一些实例。我希望将它们格式化为

```
Decimal('1')       => '1.00'
Decimal('12.0')    => '12.00'
Decimal('314.1')   => '314.10'
Decimal('314.151') => '314.151' 
```

因此确保始终有至少两位小数，可能更多。虽然不乏四舍五入到`n`小数位的解决方案，但我找不到确保数字下限的巧妙方法。

我目前的解决方案是计算：

```
first  = '{}'.format(d)
second = '{:.2f}'.format(d) 
```

并取两者中较长的一个。但是，它似乎有些骇人听闻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:10:16.017

如果您希望避免字符串问题：

```
if d*100 - int(d*100):
    print str(d)
else:
    print ".2f" % d 
```

未经测试的代码，但它*应该可以*工作。

这像这样工作：

d = 12.345

100 倍：

1234.5

减 int(1234.5)

1234.5 - 1234 = .5

.5 != 0

这意味着有 3 位或更多小数位。

打印 str(12.345)

即使您执行 12.3405：

1234.05 - 1234 = .05

.05 != 0

但是如果你有 12.3：

1230 - 1230 = 0

这意味着使用 %.2f 打印。

# javascript - 无法让 requirejs 包含 Backbonejs

> ID：11181297
> 
> 赞同：5
> 
> 时间：2012-06-24T21:24:23.720
> 
> 标签：javascript, backbone.js, requirejs

我正在尝试通过 Requirejs 模块化我的 Backbone 应用程序，但我似乎无法让 Requirejs 包含 Backbone。这是我的 main.js，它包含在索引页面中：

```
require.config({
    baseUrl: '/static/js/',
    paths: {
        jquery: 'libs/jquery/jquery-min',
        underscore: 'libs/underscore/underscore-min',
        backbone: 'libs/backbone/backbone-min',
        text: 'libs/require/text',
    },
});

require(['/static/js/views/app.js'], function(AppView) {
    var appView = new AppView;
}); 
```

这是从上述文件中包含的我的 app.js：

```
define([
    'jquery',
    'underscore',
    'backbone',
], function($, _, Backbone) {
  console.log($);
  console.log(_);
  console.log("inside of the app js file");
    var AppView = Backbone.View.extend({

        initialize: function() {
            console.log("inside of appview initialize");
        },

    });
}); 
```

以下信息会在我的 Google Chrome 控制台中打印出来：

```
function (a,b){return new e.fn.init(a,b,h)}
app.js:7undefined
app.js:8inside of the app js file
app.js:9Uncaught TypeError: Cannot read property 'View' of undefined 
```

$ 的定义有效，但 _ 和 Backbone 的定义无效。它们以未定义的形式出现。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T05:52:16.283

我建议您使用捆绑了 jQuery 的 requireJS 版本。它将为您节省很多设置痛苦。您可以在此处阅读详细信息：[http](http://requirejs.org/docs/jquery.html) ://requirejs.org/docs/jquery.html并在此处下载文件：[https ://github.com/jrburke/require-jquery](https://github.com/jrburke/require-jquery)

用他们自己的话来说：

> 使用 RequireJS，脚本可以按照与指定顺序不同的顺序加载。这可能会导致假设 jQuery 已加载的 jQuery 插件出现问题。使用组合的 RequireJS + jQUery 文件确保 jQuery 在任何 jQuery 插件加载之前就在页面中。

这应该负责使用 requireJS 正确加载 jQuery：

```
<script data-main="js/main" src="js/require-jquery.js"></script> 
```

**主.js**

这里有几点注意事项：

*   无需重新定义 jquery 的路径，因为已经处理好了
*   您仍然必须将 jquery 指示为必需模块
*   （我必须更新路径才能让它们在我的系统中工作）

代码：

```
require.config({
    baseUrl: 'js/',
    paths: {
        underscore: 'libs/underscore-min',
        backbone: 'libs/backbone-min',
    },
});

require(['jquery', 'app'], function($, AppView) {
    console.log("done w/ requires");
    console.log($)
    console.log(AppView)
    var appView = new AppView;
}); 
```

**应用程序.js**

几点注意事项：

*   如果 JS 文件已被定义为模块，则您只能在回调中加载它们后检索它们。所以 function($, _, Backbone) 对你来说会失败。
*   您必须返回您的对象，以便它可以在 main.js 回调中使用（返回 AppView）

代码：

```
define(
    [
    'jquery',
    'underscore',
    'backbone',
    ],
    function() {
        console.log($);
        console.log(_);
        console.log(Backbone);
        console.log("inside of the app js file");
        return AppView = Backbone.View.extend({
            initialize: function() {
            console.log("inside of appview initialize");
        },
    });
}); 
```

**安慰**

有了该代码，这是控制台输出：

```
function ( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
    } [app.js:8]

function (a){return new m(a)} [app.js:9]

Object [app.js:10]

inside of the app js file [app.js:11]

done w/ requires main.js:21

function ( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
} [main.js:22]

function (){a.apply(this,arguments)} [main.js:23]

inside of appview initialize [app.js:15] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T18:30:30.750

我会回避使用主干和下划线的分叉版本。在 requirejs 中添加了一个“shim”配置选项来处理不原生支持 AMD 的 3rd 方库。这使得更新到最新版本的库变得更加容易。

[http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

这是一个例子：

```
require.config({
  paths: {
    jquery: "libs/jquery",
    underscore: "libs/underscore",
    backbone: "libs/backbone"
  },
  shim: {
    underscore: {
      exports: '_'
    },
    backbone: {
      deps: ["underscore", "jquery"],
      exports: "Backbone"
    }
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T05:43:09.443

您可能没有正确的参考骨干和_，也许这可以帮助您：</p>

[使用 RequireJS 加载 Backbone 和 Underscore](https://stackoverflow.com/questions/8131265/loading-backbone-and-underscore-using-requirejs)

更多： [http ://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

# android - 完成 onClick() 执行后会显示 Android 上的进度条

> ID：11181299
> 
> 赞同：0
> 
> 时间：2012-06-24T21:24:42.267
> 
> 标签：android, android-widget, android-button

我有一个按钮，按下它后，onClick() 将处理用户的请求。但是，这需要一点时间，所以我希望在按下此按钮后立即显示“请稍候，正在处理...”的视图，而它的 OnClickListener 会做它的事情。

我的问题是，我放在 onClick() 开头的“请稍候，正在处理...”，仅在整个 onClick() 完成后才出现。换句话说，在整个处理完成之后。所以，我想知道，在实际处理开始之前，如何让视图显示“请稍候，正在处理......”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:33:41.840

正如@Blundell 指出的那样，您可以在单独的线程上处理长时间运行的操作，以避免冻结 UI 线程。然而，在 Android 中，有一个更好的通用替代方案，`Handler`称为[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html). 有关详细信息，请参阅[本](http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/)教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:51:01.923

你可以通过只使用 AsyncTask 来做到这一点，而无需处理任何其他事情。

*   首先在“onPreExecute”上创建新的 AsyncTask 类更改 ui 以显示您正在处理某事

*   其次，在“doInBackground”方法上完成所有后端耗时的工作
    （不要从这里调用任何 ui 更新方法）

*   第三次更改您的用户界面以显示该过程已完成或您想做的任何事情。

    ```
    yourUiButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {
        new NewTask().execute();
    } 
    ```

    });

    ```
    class NewTask extends AsyncTask<String, Void, Task>{

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
                    //this part runs on ui thread
                    //show your "wait while processing" view
    }

    @Override
    protected Task doInBackground(String... arg0) {
                    //do your processing job here
                    //this part is not running on ui thread
        return task;
    }

    @Override
    protected void onPostExecute(Task result) {
        super.onPostExecute(result);
                    //this part runs on ui thread
                    //run after your long process finished
                    //do whatever you want here like updating ui components
    }} 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T23:48:06.733

你需要这样的东西

```
public void onClick(View v){
  //show message "Please wait, processing..."
  Thread temp = new Thread(){

    @Override        
    public void run(){
      //Do everything you need
    }

  };
  temp.start();
} 
```

或者如果你想让它在 UIThread 中运行（因为它是一项密集的任务，我不推荐这个）

```
public void onClick(View v){
  //show message "Please wait, processing..."
  Runnable action = new Runnable(){

    @Override        
    public void run(){
      //Do everything you need
    }

  };
  v.post(action);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T07:38:10.383

将您的代码放在一个线程中并在那里使用进度对话框......

```
void fn_longprocess() {
    m_ProgressDialog = ProgressDialog.show(this, " Please wait", "..", true);
    fn_thread = new Runnable() {
        @Override
        public void run() {
          try {

                // do your long process here

                runOnUiThread(UI_Thread);//call your ui thread here

            }catch (Exception e) {
                e.printStackTrace();
             }
        } 

    };

    Thread thread = new Thread(null, thread1
    "thread1");
    thread.start();

}

  then close your dialogue in the UI thread...hope it helps.. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T23:38:14.470

异步任务。

*   将进度对话框的显示放在 onPreExecute
*   在 doInBackground 中做你的事
*   更新 UI 中需要更新的内容，并在 onPostExecute 中关闭对话框

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T21:28:42.157

在另一个线程上进行处理，以便 UI 可以显示您的对话框。

```
// Show dialog

// Start a new thread , either like this or with an ASyncTask
new Thread(){
     public void run(){
        // Do your thang

         // inform the UI thread you've finished
         handler.sendEmptyMessage();
     }
} 
```

处理完成后，您需要回调 UI 线程以关闭 oyur 对话框。

```
Handler handler = new Handler(){
     public void handleMessage(int what){
          // dismiss your dialog
     }
}; 
```

# php - 用于命名图像文件以在 url 中使用的函数

> ID：11181304
> 
> 赞同：0
> 
> 时间：2012-06-24T21:25:16.060
> 
> 标签：php, image, file-upload, yii

我正在创建一个 Yii 应用程序，我将在其中将图像保存到数据库中。现在我正在搜索一个**php 或 yii**函数来使这个图像文件名干净，这样我以后可以在我的 url 中使用。

例如，如果我上传：

```
test image.jpg
testímage.jpg
tést ímage.jpg 
```

在我的数据库中，我可以将它们保存为**test-image.jpg**或只是**testimage.jpg**

您还使用哪些其他方法？您使用真实姓名还是仅使用时间戳？您认为避免重复的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:37:44.617

我个人会保留原始文件名。如果你需要一些独特的东西，你可以在最后添加一个哈希或行的 id。我知道这可能只是最后 10%，但如果文件名代表图片中显示的内容，您可以在 SEO 中获得收益。

为了使你的文件名“干净”，你可以使用这样的函数（PHP）：

```
function trim($value, $onlySingleSpaces = false, $to1Line = false) {

    $value  = trim($value);

    // change new lines and tabs to single spaces
    if ($to1Line !== false)
        $value = str_replace(array("\r\n", "\r", "\n", "\t"), ' ', $value);

    // multispaces to single whitespaces
    if ($onlySingleSpaces !== false)
        $value = ereg_replace(" {2,}", ' ',$value);

    return $value;

}

function removeAccent($value) { 

    $a  = array('À','Á','Â','Ã','Ä','Å','Æ','Ç','È','É','Ê','Ë','Ì','Í','Î','Ï','Ð','Ñ','Ò','Ó','Ô','Õ','Ö','Ø','Ù','Ú','Û','Ü','Ý','ß','à','á','â','ã','ä','å','æ','ç','è','é','ê','ë','ì','í','î','ï','ñ','ò','ó','ô','õ','ö','ø','ù','ú','û','ü','ý','ÿ','Ā','ā','Ă','ă','Ą','ą','Ć','ć','Ĉ','ĉ','Ċ','ċ','Č','č','Ď','ď','Đ','đ','Ē','ē','Ĕ','ĕ','Ė','ė','Ę','ę','Ě','ě','Ĝ','ĝ','Ğ','ğ','Ġ','ġ','Ģ','ģ','Ĥ','ĥ','Ħ','ħ','Ĩ','ĩ','Ī','ī','Ĭ','ĭ','Į','į','İ','ı','Ĳ','ĳ','Ĵ','ĵ','Ķ','ķ','Ĺ','ĺ','Ļ','ļ','Ľ','ľ','Ŀ','ŀ','Ł','ł','Ń','ń','Ņ','ņ','Ň','ň','ŉ','Ō','ō','Ŏ','ŏ','Ő','ő','Œ','œ','Ŕ','ŕ','Ŗ','ŗ','Ř','ř','Ś','ś','Ŝ','ŝ','Ş','ş','Š','š','Ţ','ţ','Ť','ť','Ŧ','ŧ','Ũ','ũ','Ū','ū','Ŭ','ŭ','Ů','ů','Ű','ű','Ų','ų','Ŵ','ŵ','Ŷ','ŷ','Ÿ','Ź','ź','Ż','ż','Ž','ž','ſ','ƒ','Ơ','ơ','Ư','ư','Ǎ','ǎ','Ǐ','ǐ','Ǒ','ǒ','Ǔ','ǔ','Ǖ','ǖ','Ǘ','ǘ','Ǚ','ǚ','Ǜ','ǜ','Ǻ','ǻ','Ǽ','ǽ','Ǿ','ǿ');

    $b  = array('A','A','A','A','AE','A','AE','C','E','E','E','E','I','I','I','I','D','N','O','O','O','O','OE','O','U','U','U','UE','Y','ss','a','a','a','a','ae','a','ae','c','e','e','e','e','i','i','i','i','n','o','o','o','o','oe','o','u','u','u','ue','y','y','A','a','A','a','A','a','C','c','C','c','C','c','C','c','D','d','D','d','E','e','E','e','E','e','E','e','E','e','G','g','G','g','G','g','G','g','H','h','H','h','I','i','I','i','I','i','I','i','I','i','IJ','ij','J','j','K','k','L','l','L','l','L','l','L','l','l','l','N','n','N','n','N','n','n','O','o','O','o','O','o','OE','oe','R','r','R','r','R','r','S','s','S','s','S','s','S','s','T','t','T','t','T','t','U','u','U','u','U','u','U','u','U','u','U','u','W','w','Y','y','Y','Z','z','Z','z','Z','z','s','f','O','o','U','u','A','a','I','i','O','o','U','u','U','u','U','u','U','u','U','u','A','a','AE','ae','O','o');

    return str_replace($a, $b, $value);

}

// trims, removes whitespaces, double "-", accents and stuff … :)
function clean($value) {

    return ereg_replace("-{2,}", '-', ereg_replace("_{1,}", '-', preg_replace( array('/[^a-zA-Z0-9 -_]/', '/[&]+/', '/[ ]+/', '/^-|-$/'), array('', '', '-', ''), removeAccent( trim($value, true, true) ) ) ) );

} 
```

# python - Python 2.7.2 Ubuntu + Django 1.4；“.objects.get(foo=unicodestr)”时的 deepcopy 递归错误

> ID：11181305
> 
> 赞同：1
> 
> 时间：2012-06-24T21:25:16.617
> 
> 标签：python, django, django-models

我在一个明显简单的任务上遇到了一个奇怪的错误。

我想使用 unicode 字符串和以下模型查询 sqlite DB：

```
from django.db import models

class Uebersetzung(models.Model):
    artikel = models.CharField(max_length=100)
    deutsch = models.CharField(max_length=100)
    turk    = models.CharField(max_length=100)
    added   = models.DateTimeField(default=datetime.now) 
```

查询发生在“独立脚本”中，我只使用 django 的模型和 api，我的查询如下所示：

```
import os
os.environ['DJANGO_SETTINGS_MODULE'] = 'turk.settings'
from turk.parse.models import *
...

   # each is a tuple of eg. (u'das', u'Haus', u'bina')
   try:
        Uebersetzung.objects.get(artikel=each[0],deutsch=each[1],turk=each[2])
    except Uebersetzung.DoesNotExist:
        tr =  Uebersetzung(artikel=each[0],deutsch=each[1],turk=each[2])
        tr.save()
        print "Adding \'%s %s -> %s\' to Uebersetzung" % (each[0],each[1],each[2]) 
```

我收到这样的错误：

```
 File "/usr/lib/python2.7/copy.py", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib/python2.7/copy.py", line 334, in _reconstruct
    state = deepcopy(state, memo)
  File "/usr/lib/python2.7/copy.py", line 163, in deepcopy
    y = copier(x, memo)
  File "/usr/lib/python2.7/copy.py", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib/python2.7/copy.py", line 334, in _reconstruct
    state = deepcopy(state, memo)
  File "/usr/lib/python2.7/copy.py", line 163, in deepcopy
    y = copier(x, memo)
  File "/usr/lib/python2.7/copy.py", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib/python2.7/copy.py", line 334, in _reconstruct
    state = deepcopy(state, memo)
  File "/usr/lib/python2.7/copy.py", line 163, in deepcopy
    y = copier(x, memo)
  File "/usr/lib/python2.7/copy.py", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib/python2.7/copy.py", line 334, in _reconstruct
    state = deepcopy(state, memo)
  File "/usr/lib/python2.7/copy.py", line 163, in deepcopy
    y = copier(x, memo)
  File "/usr/lib/python2.7/copy.py", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib/python2.7/copy.py", line 334, in _reconstruct
    state = deepcopy(state, memo)
  File "/usr/lib/python2.7/copy.py", line 163, in deepcopy
    y = copier(x, memo)
  File "/usr/lib/python2.7/copy.py", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib/python2.7/copy.py", line 334, in _reconstruct
    state = deepcopy(state, memo)
  File "/usr/lib/python2.7/copy.py", line 163, in deepcopy
    y = copier(x, memo)
  File "/usr/lib/python2.7/copy.py", line 257, in _deepcopy_dict
    y[deepcopy(key, memo)] = deepcopy(value, memo)
  File "/usr/lib/python2.7/copy.py", line 190, in deepcopy
    y = _reconstruct(x, rv, 1, memo)
  File "/usr/lib/python2.7/copy.py", line 334, in _reconstruct
    state = deepcopy(state, memo) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:40:51.507

解决方案：由于我使用 BeautifulSoup，我必须将其转换为 unicode：

```
try:
    Uebersetzung.objects.get(artikel=unicode(each[0]),deutsch=unicode(each[1]),turk=unicode(each[2])) 
```

请参阅：[python - 使用 Django 将 Unicode 字符存储到 MySQL 时出现问题](https://stackoverflow.com/questions/1102465/python-problem-storing-unicode-character-to-mysql-with-django)

# php - JQuery 使用 AJAX 发布在返回键按下时提交 textarea

> ID：11181307
> 
> 赞同：0
> 
> 时间：2012-06-24T21:25:34.640
> 
> 标签：php, jquery, mysql, ajax

我在我的网站上的帖子下方有评论框，我希望人们能够通过简单地按返回键来提交评论。注释也是通过 ajax 插入的。

我的代码是：

**对于 AJAX 帖子并捕获回车键：**

```
$('textarea#scat').bind('keypress', function(e) {
    if(e.keyCode==13){

        var myClass = $(this).attr("class");  
        var comment = $("textarea." + myClass).val();  
        if (comment == "") {  
        return false;  
        }

        if (!$.trim($("textarea." + myClass).val())) {  
        return false;  
        }

        var cid = $("input.c_" + myClass).val();  
        var itemid = $("input.i_" + myClass).val();  
        var type = $("input.t_" + myClass).val();  
        var top = $("input.l_" + myClass).val();  

        var dataString = 'comment='+ comment + '&cid=' + cid + '&itemid=' + itemid + '&type=' + type;  
       //alert (dataString);return false;  
       $.ajax({  
           type: "POST",  
           url: "addcomment.php",  
           data: dataString,  
           success: function() {  
               $('#c').load('ajax/querylc.php?oid=' + myClass); 
               $("textarea." + myClass).val('');
           }  
       });  
      return false;  
  };
}); 
```

**还有我的评论框代码：**

```
<div id='statuscomadd' class="<?php echo $sid; ?>" style='text-align:center; padding-top:2px; margin-left:12.5px; border-left:1px #a3a3a3 solid; border-right:1px #a3a3a3 solid; border-bottom:1px #a3a3a3 solid; height:40px; width:420px; vertical-align:middle;'>
    <img id="scati<?php echo $sid; ?>" src='<?php if ($dp == null) { echo 'img/unknown_user.jpg'; } else { echo 'pf/' . $uid . '/' . $dp; } ?>' style='height:36.5px; margin-right:5px; margin-bottom:6px;'>
    <form action='addcomment.php' method='post' id='ac' style='display:inline; border:0px; margin: 0 0 0 0; padding: 0 0 0 0;'>
        <textarea id='scat' style='outline: none; height:30px; width:315px; font-family:Arial; border:0px; resize:none; margin-bottom:5px; border:1px solid #C9C9C9; display:inline;' name='comment' class='<?php echo $sid; ?>'></textarea>
        <input type='hidden' class="t_<?php echo $sid; ?>" name='type' value='status' />
        <input type='hidden' class="i_<?php echo $sid; ?>" name='itemid' value='<?php echo $sid; ?>'/>
        <input type='hidden' class="c_<?php echo $sid; ?>" name='cid' value='<?php echo $uid ?>' />

    </form>
</div> 
```

如果我使用表单提交按钮，则该帖子有效，但如果我使用返回键则无效，当前发生的只是它添加了一个新行，我只想在 shift+enter 时发生。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:42:44.950

[在按键http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)上形成文档：

> 请注意，keydown 和 keyup 提供了指示按下哪个键的代码，而 keypress 指示输入了哪个字符。例如，小写的“a”将被 keydown 和 keyup 报告为 65，但被 keypress 报告为 97。所有事件都将大写“A”报告为 65。由于这种区别，当捕获特殊按键（如箭头键）时，.keydown() 或 .keyup() 是更好的选择。

所以你实际上想在你的函数中使用 keydown：http: [//api.jquery.com/keydown/](http://api.jquery.com/keydown/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:45:08.617

可能与您的 textarea 的类属性有关。

PHP 变量 $sid 是数字吗？

如果是这样，请尝试添加一个非数字前缀，例如

```
class='classname_<?php echo $sid; ?>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T21:38:01.930

而不是“按键”使用以下内容。

```
$('textarea#scat').bind('**keydown**', function(e) {

if(e.keyCode==13){ 
```

# java - IntBuffer 在内存使用方面与数组相比如何？

> ID：11181308
> 
> 赞同：3
> 
> 时间：2012-06-24T21:25:35.500
> 
> 标签：java

所以我有一个很大的整数列表，我必须使用（大约 70Mb）。作为阅读它们的过程的一部分，我需要暂时存储它们。我可以将它们分布在几个 IntBuffers 上，或者分配几个大数组。

但是，我找不到任何关于 IntBuffer 在内存使用方面与数组进行比较的文档（以及 java 添加的所有元数据）。有人对这个有了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:30:57.330

相对于 70MB 的 int，IntBuffer 添加的元数据什么都不是。但是分析器会给你一个更完整的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T06:04:49.350

`int[]`如果数组很大，则 a和堆`IntBuffer`或直接`IntBuffer`在内存使用方面几乎没有区别，尤其是如果数组很大。（有一个小头顶）

在性能方面`int[]`是最快的，直接`IntBuffer`使用本机字节排序是第二快的。IntBuffer 的优点是它在堆外，您可以拥有更大的大小，例如 70 GB，而不会增加堆大小或 Full GC 时间。

对于 70 MB 阵列，它足够小，最简单的解决方案`int[]`可能是最好的。（它也将是最容易编写和最有效的运行）

# orchardcms - 将模块页面设置为 Orchard 中的主页

> ID：11181309
> 
> 赞同：0
> 
> 时间：2012-06-24T21:25:40.767
> 
> 标签：orchardcms

我有一个模块，我在其中创建了一个带有控制器和一些逻辑的自定义页面。工作正常。我需要该页面作为我网站的主页。我找到了一些关于实现 IHomePageProvider 的主题，但这似乎是不可能的，因为我在 Orchard 核心中找不到 IHomePageProvider 的定义。所以我知道这个主题有一些主题，但我没有设法找到解决方案，所以这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:17:50.510

那是因为它与可路由部分同时被删除。这现在是使用 Alias 完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-25T17:26:35.050

使用 Orchard Core (Orchard 2) 时，您可以指定 Home Route 设置。

您可以在 recipe.json 文件中设置它：

```
{
  "name": "settings",
  "HomeRoute": {
    "Action": "Index",
    "Controller": "ControllerName",
    "Area": "AreaName"
  }
} 
```

或者可能稍后：

```
RouteValueDictionary newHomeRouteValue = ...;

var site = await _siteService.GetSiteSettingsAsync();
site.HomeRoute = newHomeRouteValue;
await _siteService.UpdateSiteSettingsAsync(site); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:41:10.543

您可以定义与此路由关联的主路由和控制器。看看它是如何在 CulturePicker 模块中完成的：[HomeRoutes](http://orchardculturepicker.codeplex.com/SourceControl/changeset/view/e333c1fb3234#HomeRoutes.cs)和[LocalizableHomeController](http://orchardculturepicker.codeplex.com/SourceControl/changeset/view/e333c1fb3234#Controllers/LocalizableHomeController.cs)

# git - git 提交完整性

> ID：11181316
> 
> 赞同：1
> 
> 时间：2012-06-24T21:27:45.283
> 
> 标签：git, dvcs

我试图搜索 git commit 由什么组成以及哪些部分参与了提交的 sha 哈希。但可能我问错了词，我什么也没找到。

我想知道提交是由什么组成的。我读了一些社区书，有以下图片：

![在此处输入图像描述](../Images/6d08c20587046b362b2820c282ecb747.png)

但是我认为提交的字段比图像中显示的要多。

现在的主要问题是：哪些字段参与了提交 sha 哈希？我之所以问这个问题，是因为我在不同的存储库中获得了两个具有相同 sha 哈希的提交，但具有不同的父提交。在此之前，我认为如果两个提交相同并且具有相同的父提交，则它们可能具有相同的 sha hash。所以我有点困惑。

我有两个本地存储库（git1，git2）一个是另一个的克隆。

**git1**

```
commit 4f438f9579939312689eb67e5fb7957d87cfa036 <-- this commit
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon Jun 25 00:00:31 2012 +0300

    stuff after change

commit e91e833158bb44f54f418cc5c3e1832452051428
Merge: dc69dc2 0b5912b
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon May 7 02:09:18 2012 +0300

    Merge branch 'master' of e:/temp/git2

    Conflicts:
        file.file

commit 0b5912bd1a1cb9b78410fe5c0dc67845ca1deec5
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon May 7 02:06:46 2012 +0300

    c8

commit dc69dc25a1e0c9067cbca19fe6a1d078a19138a0
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon May 7 02:06:29 2012 +0300

    c7

commit f6d88da1ecc3106f6debe1eac80d4b02705bcecf
Merge: d1a3c38 6134e66
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon May 7 02:05:05 2012 +0300

    Merge branch 'master' of e:/temp/git1

    Conflicts:
        file.file

commit d1a3c389416ff88e195e93def9a956fad1e63819
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon May 7 02:03:47 2012 +0300 
```

**git2**

```
commit e1ee3b2756d4d8440ae3661df3fb3ec9af7cd55a
Merge: 4296e1b 4f438f9
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon Jun 25 00:01:30 2012 +0300

    Merge branch 'master' of e:/temp/git1

    Conflicts:
        file.file

commit 4f438f9579939312689eb67e5fb7957d87cfa036 <-- this commit
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon Jun 25 00:00:31 2012 +0300

    stuff after change

commit 4296e1bd046c4008166cfc516ef5ee2ce98a27d1
Author: Michael Nesterenko <misha@gmail.com>
Date:   Sun Jun 24 23:57:14 2012 +0300

    more stuff

commit e91e833158bb44f54f418cc5c3e1832452051428
Merge: dc69dc2 0b5912b
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon May 7 02:09:18 2012 +0300

    Merge branch 'master' of e:/temp/git2

    Conflicts:
        file.file

commit 0b5912bd1a1cb9b78410fe5c0dc67845ca1deec5
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon May 7 02:06:46 2012 +0300

    c8

commit dc69dc25a1e0c9067cbca19fe6a1d078a19138a0
Author: Michael Nesterenko <misha@gmail.com>
Date:   Mon May 7 02:06:29 2012 +0300 
```

该提交具有不同的父级，但具有相同的 sha 哈希值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T21:48:24.123

同一存储库的克隆中的两个不同提交具有相同的 id 但不同的提交是极不可能的。父列表*是*散列的提交数据的一部分。要查看散列的数据，您可以运行：

```
git cat-file commit <id-of-commit> 
```

散列的实际数据是一个标头，包括：`<type> <size>\0`后跟提交的数据。例如，在我的 git clone 中提交：

```
$ printf 'commit %d\0' $(git cat-file commit 5498c5f05283cd248fd5e4f48cb8902e9ca6ce28 | wc -c) >tmp.dat
$ hexdump -C tmp.dat
00000000  63 6f 6d 6d 69 74 20 33  30 34 00                 |commit 304.|
0000000b
$ git cat-file commit 5498c5f05283cd248fd5e4f48cb8902e9ca6ce28 >>tmp.dat
$ sha1sum tmp.dat
5498c5f05283cd248fd5e4f48cb8902e9ca6ce28  tmp.dat 
```

请注意 sha1sum 与提交 id 匹配，并且父级是提交对象的一部分：

```
$ git cat-file commit 5498c5f05283cd248fd5e4f48cb8902e9ca6ce28 | grep parent
parent 3ba46634202968045e05e4d7f969d97c61efa53d 
```

`git log`输出一个扁平的提交列表，但在 git 中提交是一个有向无环图。由于日志是一个扁平化的提交列表，它只会在简单的线性历史的简单情况下直接反映提交到父关系。如果您有任何合并（或正在记录多个分支），您将无法直接从`git log`.

要显示从提交到父母的实际链接，您需要使用类似`git log --graph`（我通常推荐使用`--oneline`）或图形可视化工具，例如`gitk`.

# c++ - 创建涉及虚拟继承的类的过程

> ID：11181317
> 
> 赞同：6
> 
> 时间：2012-06-24T21:27:55.147
> 
> 标签：c++, inheritance, diamond-problem

在很多描述虚拟基类用法的教程中（通常用来解决菱形问题），往往会有类似这种结构设计的代码：

```
class Animal
{
public:
    Animal()
    {
        cout << "Creating Animal\n";
    }
};

///////////////////////////

class FourLegs : virtual public Animal
{
public:
    FourLegs()
    {
        cout << "Creating FourLegs\n";
    }
};

///////////////////////////

class Mammal : virtual public Animal
{
public:
    Mammal()
    {
        cout << "Creating Mammal\n";
    }
};

///////////////////////////

class Fox : public FourLegs, public Mammal
{
public:
    Fox()
    {
        cout << "Creating Fox\n";
    }
}; 
```

当我创建 Fox 的实例时，我得到了预期的输出，只创建了一个 Animal：

```
Creating Animal
Creating FourLegs
Creating Mammal
Creating Fox 
```

如您所见，我虚拟继承了两个第 2 层类。现在，如果只有*一个*2 层类是虚拟继承的，而另一个是公开继承的，就会出现有趣的输出。例如，如果 FourLegs 是继承 public 而 Mammal 是继承 virtual public，则输出如下：

```
Creating Animal
Creating Animal
Creating FourLegs
Creating Mammal
Creating Fox 
```

这很奇怪，并提出了一个问题：**在继承树的某个地方创建一个涉及虚拟继承的类的完整过程是什么？**

另一方面，如果我 FourLegs 如果继承了 virtual public，并且 Mammal 是继承了 public，那么输出是正常的（好像没有继承 virtual public）：

```
Creating Animal
Creating FourLegs
Creating Animal
Creating Mammal
Creating Fox 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:41:06.637

直接来自标准，*12.6.2/10 [class.base.init]*：

> 在非委托构造函数中，初始化按以下顺序进行：
> 
> *   首先，并且仅对于最派生类（1.8）的构造函数，虚拟基类按照它们在基类的有向无环图的深度优先从左到右遍历中出现的顺序进行初始化，其中“左- to-right” 是派生类*base-specifier-list*中基类的出现顺序。
>     
>     
> *   然后，直接基类按照它们出现在*base-specifier-list*中的声明顺序进行初始化（无论*mem-initializers*的顺序如何）。
>     
>     
> *   然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化（同样不管*mem-initializers*的顺序）。
>     
>     
> *   最后，执行构造函数主体的*复合语句*。
>     
>     
> 
> [*注意*：声明顺序是为了确保基子对象和成员子对象以初始化的相反顺序被销毁。*——尾注*]

第一个项目符号解释了如何对涉及虚拟继承的类进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:45:17.740

意外的输出并不意外。它发生是因为`FourLegs`派生自`Animal`并且必须调用 的构造函数`Animal`。`virtual`需要对所有中间类进行 -izing的既定惯例来防止该问题。您的示例的潜在问题是，的概念`FourLegs`被用作*继承*特征，而它*应该*被用作*组合*特征。也就是说，有一个字段描述哺乳动物/动物内部`Mammal`或`Animal`（取决于具体要求）的腿数，并且派生类继承该字段。

# javascript - 是否有根据特异性对 CSS 选择器文本进行排序的 JS 库？

> ID：11181322
> 
> 赞同：1
> 
> 时间：2012-06-24T21:28:12.137
> 
> 标签：javascript, jquery, css, css-selectors, css-specificity

> **可能重复：**
> [根据特定性对一组 CSS 选择器进行排序](https://stackoverflow.com/questions/5158631/sorting-a-set-of-css-selectors-on-the-basis-of-specificity)

我需要一个 JS 库，将 CSS 选择器文本从最具体的选择器文本排序到不太具体的选择器文本，其中的特异性是根据[W3C指定的](http://www.w3.org/TR/CSS21/cascade.html#specificity)

如果那里没有任何库，我可以简单地使用 JS 或 jQuery 编写它吗？

CSS 选择器文本可以是`div#body .text`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:55:03.327

在对您的问题的评论中，josh3736 链接[了 W3C 规范以确定特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)。如果您倾向于自己编写这样的库（我鼓励这样做，如果没有其他原因，只是为了了解更多信息），他们的方法似乎是一个很好的参考。

> 选择器的特异性计算如下：
> 
> *   计数 1 如果声明来自是“样式”属性而不是带有选择器的规则，否则为 0 (= a) （在 HTML 中，元素的“样式”属性的值是样式表规则。这些规则没有选择器，所以 a=1、b=0、c=0 和 d=0。）
> *   统计选择器中 ID 属性的数量（= b）
> *   计算选择器中其他属性和伪类的数量（= c）
> *   计算选择器中元素名称和伪元素的数量（= d）
> 
> 特异性仅基于选择器的形式。特别是，“[id=p33]”形式的选择器被视为属性选择器（a=0，b=0，c=1，d=0），即使 id 属性被定义为“ID " 在源文档的 DTD 中。
> 
> 连接四个数字 abcd（在具有大基数的数字系统中）给出了特异性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:04:51.200

我想我会试一试。随意使用、修改（或修复）您认为合适的代码。我不能保证它是正确的，但是他们在 w3c 规范中给出的例子都产生了相同的结果。

```
function specificity(selector, isStyleAttribute) {

    selector = selector || "";
    function numMatches(regex) {
        return (selector.match(regex)||[]).length;
    }

    var numClasses = numMatches(/\.[\w-_]+\b/g);
    var numIds = numMatches(/#[\w-_]+\b/g);
    var numNamesInBraces = 0;
    var namesInBraces = selector.match(/\[[^\]]*\b[\w-_]+\b[^\]]*\]/g) || [];
    for (var idx = 0; idx < namesInBraces.length; ++idx) {
        numNamesInBraces += (namesInBraces[idx].match(/\b[\w-_]+\b/g)||[]).length;
    }

    var results = [0,0,0,0];
    results[0] = isStyleAttribute ? 1 : 0;
    results[1] = numIds;
    results[2] = numMatches(/\[[^\]]+\]/g) + numClasses;
    results[3] = numMatches(/\b[\w-_]+\b/g) - numIds - numClasses - numNamesInBraces;
    return results.join(',');

} 
```

如果你想用它对数组进行排序，可以这样使用：

```
selectors.sort(function(a,b) { return specificity(a) > specificity(b); }); 
```

# macos - 如何在 OSX 中更改视网膜显示系统首选项？

> ID：11181324
> 
> 赞同：8
> 
> 时间：2012-06-24T21:28:25.443
> 
> 标签：macos, cocoa, retina-display

我想知道是否有办法以编程方式更改系统偏好设置中设置的当前显示模式？具体来说，我希望能够在新款 Retina MacBook Pro 上检测和切换 5 种 Retina 显示模式。

我查看了`NSUserDefaults NSGlobalDomain`试图找到如何在系统偏好设置中更改当前显示模式，但根本找不到与显示相关的任何内容。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-01T22:40:31.260

查看[http://www.reddit.com/r/apple/comments/vi9yf/set_your_retina_macbook_pros_resolution_to/](http://www.reddit.com/r/apple/comments/vi9yf/set_your_retina_macbook_pros_resolution_to/) - 使用私有 API CGSGetDisplayModeDescriptionOfLength 和 CGSConfigureDisplayMode 进行设置。代码包含在好心分发的 .app 包中。

我刚刚写了一篇关于我试图回答相同问题的努力的长篇文章 - 请参阅 [http://garethjenkins.com/2012/07/01/investigating-a-high-resolution-retina-utility-for-macbook-pro -1x 和 2x 模式/](http://garethjenkins.com/2012/07/01/investigating-a-high-resolution-retina-utility-for-macbook-pro-1x-and-2x-modes/)

# wordpress - 向 NextGEN Gallery 添加“详细信息”视图？

> ID：11181328
> 
> 赞同：2
> 
> 时间：2012-06-24T21:28:55.160
> 
> 标签：wordpress, photo-gallery

我正在使用 WordPress 为一个想要在线展示她的产品但不想通过网络销售它们的客户开发一个网站。我有一个使用 NextGEN Gallery 插件设置的简单照片库。单击图库视图中的缩略图时，我想为每张照片添加一个“详细信息”页面，而不是简单地在灯箱或他们自己的页面中显示它们 - 有点像购物网站上的单个产品页面，但没有任何购物功能。是否可以使用 NextGEN 画廊或其他插件来做到这一点，或者我必须从头开始（我将如何做到这一点）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:28:53.337

因为 NextGen 实际上并没有创建一个 WordPress“页面”来链接单个图像，所以您最好使用内置的 WordPress 画廊（您可能会看到[[gallery]](http://codex.wordpress.org/Gallery_Shortcode)短代码）。当您将图像上传到页面或帖子时，WordPress 将该图像作为帖子存储在 wp_posts 表中，与您的所有其他帖子和页面一起存储。 post_type 为“附件”，并将其添加到“图库”中帖子或页面。您可以通过单击文本编辑器上方的“添加媒体”图标来管理任何页面或帖子的当前图库。虽然 [gallery] 短代码非常有限，但您可以在主题中使用代码来显示您想要的画廊和图像。

如果是我，我会制作一个“产品”页面和单独的“产品”页面作为“产品”的子页面（或者如果您想要更大的灵活性，请为产品使用[自定义帖子类型](http://codex.wordpress.org/Function_Reference/register_post_type)），然后上传所有产品照片进入“产品”页面画廊（为每个产品创建一个画廊） - 并将主图像设置为每个产品页面的“[特色图像”。](http://codex.wordpress.org/Post_Thumbnails)然后在您的“产品”页面模板（page-products.php）中，我会创建一个循环来显示所有单个产品页面的[特色图片](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)......类似......

```
<?php
    //Add this to your 'Products' page temaplte, page-products.php
    $products = new WP_Query(array(
        'post_parent' => $post->ID,
        'posts_per_page' => -1
    ));
    while ($products->have_posts()) : $products->the_post() ; ?>
        <a href="<?php the_permalink() ?>" title="<?php the_title() ?>">
            <?php the_post_thumbnail() ?>
        </a>
    <?php endwhile;
?> 
```

这将创建一个产品特色图片列表，您可以使用 CSS 来调整显示 - 每个特色图片都将链接到单个产品页面。

然后在您的个人产品页面中（您可以使用[页面模板](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)来定位所有这些页面），您可以使用 get_children() 显示单个产品图库（如产品的详细照片[）](http://codex.wordpress.org/get_children#Examples)或再次使用[the_post_thumbnail()](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)以显示更大的关闭主照片的-up 版本。当然，您可以使用您个人产品页面的帖子内容来显示每张照片的信息文本，如下所示：

```
<?php
    /* Template Name: Individual Product */
    while (have_posts()) : the_post();
        the_post_thumbnail();
        the_content();
    endwhile;
?> 
```

更进一步，您可以使用[自定义元框](http://codex.wordpress.org/add_meta_box)添加有关单个产品的各种其他数据，并将它们显示在页面的侧面或其他东西上。例如“产品尺寸”、“颜色”、“Foo” , '酒吧'.. 真的。希望有帮助！

# c# - 编写具有多个计时器的应用程序的最佳方法是什么？

> ID：11181330
> 
> 赞同：0
> 
> 时间：2012-06-24T21:29:21.123
> 
> 标签：c#, .net, performance, timer, stopwatch

基本上我正在编写一个计时器应用程序，其中包含许多向上计数的计时器，而不是向下计数。其中只有 2 个会活跃。一个由用户选择，另一个是`total`计时器。用户可以随时更改哪个计时器处于活动状态，自动停止其他计时器（计时器除外`total`）。它只会显示几秒钟（HH：MM：SS）。

现在我正在`int`为每个计数器使用一个并通过`Winforms` `Timer`（1 秒间隔）递增它。在我正在使用的每个计时器的滴答声事件中：

```
this.TimeDisplay.Text = TimeSpan.FromSeconds(seconds).ToString(); 
```

这可行，但我想知道这是否是最好的方法？我知道 .NET 中有很多计时器，那么哪一个是最轻量级、最容易占用计算机资源的？我将让这个应用程序 24/7 运行，这就是为什么我不希望它占用 CPU 或不断积累内存。

计时器将由用户在 24-30 小时内重置。

我应该避免使用`Winforms` `Timer`，而是依赖`Stopwatch`.NET 中可用的其他计时器之一吗？

不确定哪一个最适合这个。

# ruby-on-rails - 将课程代码添加到活动管理仪表板

> ID：11181331
> 
> 赞同：3
> 
> 时间：2012-06-24T21:29:25.753
> 
> 标签：ruby-on-rails, activeadmin, dashboard, restrict, newrelic

好的，确切的原因是我想限制新的遗物从管理界面收集数据，所以我需要输入：

```
newrelic_ignore 
```

进入不应添加新遗物跟踪器的类。在 ActiveAdmin 的资源类中，我可以使用

```
controller do
  newrelic_ignore
end 
```

但是在仪表板中这是行不通的。

您知道如何将课程代码添加到仪表板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T10:03:37.690

* * *

你可以试试：

```
if defined?(NewRelic)
  Rails.application.config.to_prepare do
    controllers = [ActiveAdmin::BaseController, ActiveAdmin::PageController, ActiveAdmin::ResourceController]
    controllers.each do |controller|
      controller.class_eval do
        newrelic_ignore
      end
    end

    ActiveAdmin.application.namespaces.values.each do |namespace|
      namespace.resources.collect(&:controller).each do |controller|
        controller.class_eval do
          newrelic_ignore
        end
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:37:05.723

我对活动管理员不是很熟悉，但你可以在初始化程序中尝试这样的事情：

```
Rails.application.config.to_prepare do
  ActiveAdmin::BaseController.class_eval do
    newrelic_ignore
  end
end 
```

# ios - NSDate 带有来自一个 NSDate 的日期组件和来自另一个 NSDate 的时间组件

> ID：11181332
> 
> 赞同：23
> 
> 时间：2012-06-24T21:29:32.833
> 
> 标签：ios, nsdate, uidatepicker

我的应用程序中有两个 UIDatePicker 控件，一个配置了 UIDatePickerModeDate，一个配置了 UIDatePickerModeTime。

我想用 UIDatePicker 第一个的日期和第二个的时间配置一个 NSDate 对象......如何？

谢谢，马克

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-24T22:14:55.620

假设 date1 和 date2 是您的两个 NSDate 值。date1 包含您的日期组件，而 date2 包含您的时间组件。以下是您将它们组合在一起的方法：

```
NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

// Extract date components into components1
NSDateComponents *components1 = [gregorianCalendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                                     fromDate:date1];

// Extract time components into components2
NSDateComponents *components2 = [gregorianCalendar components:NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit 
                                                     fromDate:date2];

// Combine date and time into components3
NSDateComponents *components3 = [[NSDateComponents alloc] init];

[components3 setYear:components1.year];
[components3 setMonth:components1.month];
[components3 setDay:components1.day];    

[components3 setHour:components2.hour];
[components3 setMinute:components2.minute];
[components3 setSecond:components2.second];         

// Generate a new NSDate from components3.
NSDate *combinedDate = [gregorianCalendar dateFromComponents:components3];   

// combinedDate contains both your date and time! 
```

**适用于 iOS 8.0 +**

```
NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];

// Extract date components into components1
NSDateComponents *components1 = [gregorianCalendar components:(NSCalendarUnit)(NSCalendarUnitYear | NSCalendarUnitMonth | NSCalendarUnitDay)
                                                     fromDate:date1];

// Extract time components into components2
NSDateComponents *components2 = [gregorianCalendar components:(NSCalendarUnit)(NSCalendarUnitHour | NSCalendarUnitMinute | NSCalendarUnitSecond)
                                                     fromDate:date2];

// Combine date and time into components3
NSDateComponents *components3 = [[NSDateComponents alloc] init];

[components3 setYear:components1.year];
[components3 setMonth:components1.month];
[components3 setDay:components1.day];

[components3 setHour:components2.hour];
[components3 setMinute:components2.minute];
[components3 setSecond:components2.second];

// Generate a new NSDate from components3.
NSDate * combinedDate = [gregorianCalendar dateFromComponents:components3];

// combinedDate contains both your date and time! 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-03T09:40:43.863

在斯威夫特：

```
let calendar = NSCalendar.currentCalendar()
let date1 = NSDate() // PickerDateMode
let date2 = NSDate() // PickerHourMode

let componentsOne = calendar.components([.Year, .Month, .Day], fromDate: date1)
let componentsTwo = calendar.components([.Hour, .Minute], fromDate: date2)   

let totalComponents = NSDateComponents()
totalComponents.year = componentsOne.year
totalComponents.month = componentsOne.month
totalComponents.day = componentsOne.day
totalComponents.hour = componentsTwo.hour
totalComponents.minute = componentsTwo.minute

let finalDate = calendar.dateFromComponents(totalComponents) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-19T12:38:28.417

```
NSCalendar *calendar= [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSCalendarUnit unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDate *date = [NSDate date];//datapicker date
NSDateComponents *dateComponents = [calendar components:unitFlags fromDate:date];

NSInteger year = [dateComponents year];
NSInteger month = [dateComponents month];
NSInteger day = [dateComponents day];
NSInteger hour = [dateComponents hour];
NSInteger minute = [dateComponents minute];
NSInteger second = [dateComponents second]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-14T12:53:43.160

**更新到 Swift 4 和 4.1**

```
 func combineDateAndTimeToOneDate() {

    let datefrmter = DateFormatter()
     datefrmter.dateFormat = "dd/MM/yyyy"
    let dateFromString = datefrmter.date(from: lblDate.text!)

    datefrmter.dateFormat = "h:mm a"
    let timeFromString = datefrmter.date(from: lblTime.text!)

    let calendar = NSCalendar.current

    let componentsOne = calendar.dateComponents([.year,.month,.day], from: dateFromString!)
    let componentsTwo = calendar.dateComponents([.hour,.minute,.second,.nanosecond], from: timeFromString!)

    let totalComponents = NSDateComponents()
    totalComponents.year = componentsOne.year!
    totalComponents.month = componentsOne.month!
    totalComponents.day = componentsOne.day!
    totalComponents.hour = componentsTwo.hour!
    totalComponents.minute = componentsTwo.minute!
    totalComponents.second = componentsTwo.second!
    totalComponents.nanosecond = componentsTwo.nanosecond!

    let finalDate = calendar.date(from: totalComponents as DateComponents)
    print(finalDate)

} 
```

希望能帮助到你！

# c# - jQuery Mobile 显示不正确的 URL

> ID：11181333
> 
> 赞同：1
> 
> 时间：2012-06-24T21:29:33.560
> 
> 标签：c#, jquery, asp.net-mvc-3, url, jquery-mobile

在 MVC3 项目中，每当我在控制器上执行重定向操作时，浏览器中显示的 URL 就是原始请求。不是重定向的。有没有人看到这个或知道它的解决方法？

举个例子。我可以点击一个`href`等于...的链接

`http://www.test.com/account/LogOut`

控制器上的哪个将重定向到主页，但是一旦我退出并显示主页...... url 仍然显示`http://www.test.com/account/LogOut`

这导致我正在进行的其他一些事情发生了一些古怪的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T09:27:14.997

您应该在注销链接中使用属性 'data-ajax="false"'。

# javascript - 覆盖用户脚本中的 Chrome 键盘快捷键

> ID：11181334
> 
> 赞同：6
> 
> 时间：2012-06-24T21:29:36.863
> 
> 标签：javascript, google-chrome, dom-events, keyboard-shortcuts, userscripts

我编写了一个[用户脚本](https://github.com/ThiefMaster/so-jsbeautifier/blob/master/StackOverflow_JS_Beautifier.user.js)`CTRL`，该脚本在按下++`SHIFT`时对文本区域中的选定文本执行特定操作`B`。

这是通过`keypress`为 textarea 注册一个事件然后检查按下的键来完成的。为了防止浏览器处理组合键，我使用了`preventDefault()`在 Firefox 中运行良好的方法（未打开*库*窗口，而是执行了我的代码）。

但是，在 Chrome 中，该组合键会打开书签栏，`keypress`甚至不会触发该事件。

我想知道是否有办法在 Chrome 中创建这样的快捷方式。它需要与用户脚本一起使用——真正的扩展不是一种选择，因为我不想为 Firefox 和 Chrome 维护两个不同的“版本”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T23:19:53.537

显然，Chrome UI 会触发`keydown`而不是`keypress`（[这篇 Quirksmode 文章](http://www.quirksmode.org/dom/events/keys.html)可能会暗示为什么 --*应该*在插入实际角色时触发）`keypress`。

 *因此将相应的行更改为：

```
$(document).on('keydown', '.wmd-input', function(e) { 
```

似乎适用于 FF 和 Chrome。*

# javascript - 我可以在选择框中查看日期吗

> ID：11181335
> 
> 赞同：0
> 
> 时间：2012-06-24T21:29:50.363
> 
> 标签：javascript, jquery, select

我有两个带日期的选择框。请参阅此处的 jsfiddle： http: [//jsfiddle.net/egrba/](http://jsfiddle.net/egrba/) 人们可以在选择框中选择两个日期。到达日期和离开日期。

但现在我的问题。我如何查看日期。他们不应该选择过去的日期。我怎样才能用jquery做到这一点？

谢谢你们帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:34:14.847

有很多方法可以使用自定义 JavaScript/jQuery 代码做到这一点，但是有一个名为[Datepicker](http://jqueryui.com/demos/datepicker/)的出色 jQuery UI 组件，它提供了很多非常好的处理日期的东西，包括你需要的那些。

[配置选项](http://jqueryui.com/demos/datepicker/#options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:36:09.523

您可以使用 jQuery 日期选择器来执行此操作，它甚至允许您限制可以选择的日期。这是一个[证明](http://jsfiddle.net/tyrsius/HfD6W/)这一点的小提琴。

# jquery - 如何在不影响其他元素的情况下将元素添加到指定位置？

> ID：11181337
> 
> 赞同：0
> 
> 时间：2012-06-24T21:30:10.920
> 
> 标签：jquery, html, css, jquery-ui

我想通过鼠标单击将元素放在页面上，正是用户单击的位置。所以我在 div 中输入一个字符串`.append()`。

**问题是**：如何在没有其他元素影响的情况下将两个元素输入到 div 中。我尝试了边距的绝对位置和顶部和左侧的相对位置，但没有结果，

在此[（演示..）](http://jsfiddle.net/KADqt/)中，我通过单击 generator1 和 generator2 简化了我正在尝试做的事情，页面上应该并排出现两个按钮，但每个按钮都出现在一行上。

嗯，另一件事：“我是 CSS 中的 n00b”；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:34:15.457

**演示：http:** [//jsfiddle.net/KADqt/2/](http://jsfiddle.net/KADqt/2/)

绝对定位元素不会影响其他元素，因为它已从文档流中移除。此外，只需使用`top`, 和`left`, 而不是`margin-top`, `margin-left`。绝对定位元素会将自己定位在离它最近的非静态父元素上。在上面的演示中，我将容器的位置更改为`relative`- 因此新`absolute`定位的元素将基于其容器的`top`/`left`值。

编辑：我更新了演示以包含第一个生成器按钮的随机`top`/`left`值，以说明没有其他元素受到新生成的元素的影响。

第二次编辑：我添加了另一个点击处理程序来演示如何相对于用户点击的位置定位元素，您提到了想要的位置。

**演示：http:** [//jsfiddle.net/KADqt/4/](http://jsfiddle.net/KADqt/4/)

# xcode - 保持按下 UIButton（状态选择/突出显示），直到按下另一个按钮？

> ID：11181340
> 
> 赞同：6
> 
> 时间：2012-06-24T21:30:27.597
> 
> 标签：xcode, ios5, uibutton, uitabbarcontroller

我的视图控制器底部有 3 个按钮，btn1 btn2 btn3，我使用它们而不是标签栏，因为不可能根据我的要求完全自定义标签栏。

现在的问题是，当按下 btn1 时，我希望它改变它的图像，变成一个灰色的矩形，而不是正常状态的图像。我已经使用插座的 setimage 和 uicontrolstate 属性为按钮 btn1Outlet 声明的插座中的两种状态设置了图像。

问题是，在按下 btn2 或 btn3 之前，我无法保持按钮处于选中状态。btn 只有在按下它时才会更改为选定状态图像，当我离开它时，它会变回正常状态。

在按下其他 2 个按钮中的任何一个之前，如何将 btn1 的图像保留为选定图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T03:18:50.410

What you did is set an image for the "Highlighted" state, this is why when you push it you can see your image.

What you want to do is

1) set the image for the SELECTED state

2) create a property for your view controller (just controll drag the button to the header) using the assistant view (while on storyboard, second square on the top right)

3) on your method for the button's action type:

```
button.selected = !button.selected; 
```

(obviously replace button to whatever you named your property to)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-04T05:20:05.083

这是我所做的：

1.  将所有 3 个按钮链接到以下操作方法
2.  创建所有 3 个按钮的数组
3.  将调用该方法的按钮设置为选中
4.  将其他 2 个按钮设置为未选中

    ```
    - (IBAction)buttonPressed:(id)sender
    {
        NSArray* buttons = [NSArray arrayWithObjects:btn1, btn2, btn3, nil];
        for (UIButton* button in buttons) {
            if (button == sender) {
                button.selected = YES;
            }
            else {
                button.selected = NO;
            }
        }
    } 
    ```

希望这可以帮助。

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T03:07:18.133

要保持按钮被选中，您需要在按钮调用的方法中调用 setSelected:YES。例如：

```
- (void) methodThatYourButtonCalls: (id) sender {
        [self performSelector:@selector(flipButton:) withObject:sender afterDelay:0.0];

}

- (void) flipButton:(UIButton*) button {
    if(button.selected) 
        [button setSelected:NO];
    else
        [button setSelected:YES];

} 
```

我知道调用 performSelector: 看起来有点奇怪：而不是仅仅调用 [sender setSelected:YES]，但后者对我不起作用，而前者对我有用！

为了在按下不同按钮时取消选择按钮，我建议添加一个实例变量，该变量包含指向当前选定按钮的指针，因此当触摸新按钮时，您可以调用 FlipButton: 相应地取消选择旧按钮。所以现在你的代码应该是：

添加指向您的界面的指针

```
@interface YourViewController : UIViewController
{
    UIButton *currentlySelectedButton;
} 
```

和这些方法到你的实现

```
- (void) methodThatYourButtonCalls: (id) sender {
    UIButton *touchedButton = (UIButton*) sender;

    //select the touched button 
    [self performSelector:@selector(flipButton:) withObject:sender afterDelay:0.0]; 

    if(currentlySelectedButton != nil) { //check to see if a button is selected...
        [self flipButton:currentlySelectedButton];

    currentlySelectedButton = touchedButton;
}

- (void) flipButton:(UIButton*) button {
    if(button.selected) 
        [button setSelected:NO];
    else
        [button setSelected:YES];

} 
```

# sql - SQL 查询的 WHERE 子句是否有技术术语？

> ID：11181341
> 
> 赞同：0
> 
> 时间：2012-06-24T21:30:27.937
> 
> 标签：sql

SQL 查询的 WHERE 子句是否有技术术语？条件、标准、限制等词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T21:34:20.777

使用关系代数术语，它是选择[*（*](http://en.wikipedia.org/wiki/Selection_%28relational_algebra%29)不要与[*投影*](http://en.wikipedia.org/wiki/Projection_%28relational_algebra%29)混淆）。`select`[](http://en.wikipedia.org/wiki/Projection_%28relational_algebra%29)

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:38:25.067

由于 SQL 是关系代数的实现，因此 WHERE 条件称为**选择**（不要与实现投影和重命名的 SELECT 部分混淆）。有关关系代数范围内的术语的更多信息，请参阅优秀的[Wikipedia 文章](http://en.wikipedia.org/wiki/Selection_%28relational_algebra%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T21:42:20.707

减少元组（行）的数量称为*限制*。减少属性（列）的数量称为*投影*。（这是最初的 Codd/Date 术语，后来 Date 开始使用术语“SQL 数据库”来表示不那么真正的关系 DBMS）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T04:00:00.863

在[SQL 语法规范](http://savage.net.au/SQL/)中，WHERE 子句称为`where clause`...。

然而，大多数人的意思是 where 子句的实质，`boolean value expressions`它定义了对 SELECTed 行数的限制。这在语法中被指定为`search condition`.*

# php - PHP 生成 div 框，其中包含 php 文件作为内容，但前 2 个 div 为空

> ID：11181342
> 
> 赞同：1
> 
> 时间：2012-06-24T21:30:38.833
> 
> 标签：php

这是我的代码

```
html>
<head></head>
<body>
<?php
$dir    = 'folder/';
$files = scandir($dir);
$count=0;
foreach($files as $file){
        $count++;
            echo '<div style="float:left; margin: 0 0 10px 10px;border:1px solid       #50A4AB;  width:200px"><br>';
            if(strpos($file,".php")){
                            include($dir.$file);
                                }
                echo '</div><br>';
                if($count==7){echo'<div style="clear:both;></div><br>';}
}
?>
</body>
</html> 
```

前 2 个 div 空且无序，如何使用包含的 php 文件做正确的 div 框，在此先感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:11:32.647

尝试将目录设置为此：

```
$dir    = '/folder'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:46:38.593

问题可能与您的回声语句有关，您需要转义引号。

尝试这个：

```
echo "<div style=\"float:left; margin: 0 0 10px 10px;border:1px solid #50A4AB;  width:200px \"><br>";

if($count==7){echo"<div style=\"clear:both;\"></div><br>";} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T21:48:18.023

如果包含失败，您可以使用 die() 函数来理解

```
include($dir.$file) or die('error in including '.$file); 
```

如果您没有收到任何错误，那么您的文件为空或不可读。

# sql - 查找过去 12 小时的 oracle 记录

> ID：11181344
> 
> 赞同：2
> 
> 时间：2012-06-24T21:30:50.593
> 
> 标签：sql, oracle

我真的很难弄清楚如何使用 ORACLE 查找过去 12 小时内的某些记录。我想在以下语句的末尾添加时间检查：

```
SELECT ND_TICKET.TICKET_ID, ND_TICKET.PRIORITY, ND_TICKET.PROBLEM_SUMMARY 
  FROM ARADMIN.ND_TICKET 
       INNER JOIN SUPPORT_AREA 
               ON (ND_TICKET.SUPPORT_AREA_ID = SUPPORT_AREA.SUPPORT_AREA_ID) 
 WHERE REGEXP_LIKE(SUPPORT_AREA.SUPPORT_AREA_NAME,'National\s+Technical') 
   AND ND_TICKET.PRIORITY IN( 0, 1 ) 
```

我看过很多地方，但没有一个对我来说真的有意义。

我有一个名为`TTR_START`存储自 1970 年 1 月 1 日（即 Unix 时间）以来的秒数的列，我想用它来进行日期比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T21:50:53.237

如果`ttr_start`是 Unix 时间的数字（自 1970 年 1 月 1 日以来的秒数），

```
AND date '1970-01-01' + nutodsinterval( ttr_start, 'SECOND' ) >= 
       sysdate - interval '12' hour 
```

应该管用。

如果上面有索引，`ttr_date`则相反，将 12 小时前的日期转换为数字可能会更有效

```
AND ttr_start >= ((sysdate - interval '12' hour) - date '1970-01-01')*24*60*60 
```

我不会在每个 SQL 语句中嵌入这些计算，而是假设您希望定义一些实用函数来在实际日期和数字数据之间进行转换。就像是

```
CREATE FUNCTION epoch_to_date( p_epoch_num IN NUMBER )
  RETURN DATE
IS
  l_dt DATE;
BEGIN
  l_dt := date '1970-01-01' + numtodsinterval( p_epoch_num, 'SECOND' );
  RETURN l_dt;
END;

CREATE FUNCTION date_to_epoch( p_dt IN DATE )
  RETURN NUMBER
IS
  l_epoch_num NUMBER;
BEGIN
  l_epoch_num := (p_dt - date '1970-01-01')*24*60*60;
  RETURN l_epoch_num;
END; 
```

然后，您的查询可能是

```
AND epoch_to_date( ttr_start ) >= sysdate - interval '12' hour 
```

或者

```
AND ttr_start >= date_to_epoch( sysdate - interval '12' hour ) 
```

# jquery - 使用 JQuery 替换整个表格行

> ID：11181346
> 
> 赞同：0
> 
> 时间：2012-06-24T21:30:55.007
> 
> 标签：jquery

我想使用 JQuery 替换整个`<tr>`. 我可以`<tr>`毫无问题地选择，我只是不知道如何完全替换它。

我的选择器/当前代码：

```
$("td#listprice").parents("tr:first").outerHTML(product.ListPrice) 
```

这会产生一个错误，指出 outerHTML 不是函数。

我对该行的替换（product.ListPrice）是：

```
<tr><td>Some label</td><td>Some data</td></tr> 
```

我不完全知道那`.outerHTML`是我想要使用的，我只知道我想替换整个表格行，包括`<tr>`和关闭`</tr>`。我见过一些替换表格行的例子，但它们看起来比它们需要的复杂得多。我认为我不应该为了替换它而删除该行，是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T21:34:15.017

怎么样[`replaceWith`](http://api.jquery.com/replaceWith/)？

```
$("#listprice").parent().replaceWith(product.ListPrice); 
```

是的，您可以更好地使用`parent`or`closest`代替`parents`（请参阅下面的评论）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:38:45.893

我找到了两种方法来做到这一点：

```
replaceText = "<tr><td>Some label3</td><td>Some data3</td></tr>"
  $("td#listprice").parent().html(replaceText)
 //OR    $("td#listprice").parents("tr:first").html(replaceText) 
```

​</p>

# php - Ajax liaded 链接不会在 shadowbox（灯箱）中打开

> ID：11181349
> 
> 赞同：0
> 
> 时间：2012-06-24T21:31:25.597
> 
> 标签：php, ajax, lightbox, shadowbox

好吧，我已经想通了……但我仍然需要一点帮助。顺便提一句。抱歉发了一个新帖子。

这是原始的影子盒代码：

```
<script type="text/javascript">
Shadowbox.init({
                // skip the automatic setup again, we do this later manually
                skipSetup: true
            });

            window.onload = function () {

                // set up all anchor elements with a "test" class to work with Shadowbox
                Shadowbox.setup("a.shadowbox", {
        player:     "html",
        title:      "Welcome"
                });

            };
</script> 
```

应该帮助我使其与 ajax 加载的链接一起工作的脚本是这样的：

```
$('.shadowbox').live('click', function() {
                Shadowbox.open(this);
                return false;
}); 
```

但它没有帮助，所以我做了这个：

```
$('.shadowbox').live('click', function() {
        Shadowbox.setup("a.shadowbox", {
        player:     "html",
        title:      "Welcome"
                });
                Shadowbox.open(this);
                return false;
}); 
```

现在它正在工作，但我认为这条线：

```
Shadowbox.open(this); 
```

无论如何，当我删除它时不再需要它，脚本可以工作，但需要点击链接 2 次才能启动，任何人都可以帮助我如何优化它？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:34:41.090

```
$('.shadowbox').live('click', function() {
        Shadowbox.setup("a.shadowbox", {
        播放器：“swf”
             });
        Shadowbox.open(this);
        返回假；
});
```

谢谢 Michail，上面的代码在 ajax 中加载页面时为我工作。我在 joomla 中使用 Shadowbox Media Viewer 插件和上面的代码在弹出窗口中显示 YouTube 视频。

# php - 如何显示深度多维数组？

> ID：11181350
> 
> 赞同：3
> 
> 时间：2012-06-24T21:31:35.940
> 
> 标签：php, arrays, foreach

正如[这里](https://stackoverflow.com/questions/842956/php-foreach-loop-through-multidimensional-array)和其他一些地方所见，每个地方都得到了很好的解释，但是如何将它与“更深”的数组一起使用？

我有这个数组：

```
Array ( 
[3] => Array ( [ort] => Array ( [0] => Brunnsdalen [1] => Agerum ) [kommun] => Array ( [0] => Alvesta kommun [1] => Arjeplogs kommun ) ) 
[4] => Array ( [ort] => Array ( [2] => Björstorp ) ) 
[6] => Array ( [kommun] => Array ( [2] => Arboga kommun ) ) ) 
```

我得到的最接近的是：

```
 foreach ($allaMedlemmarsIntel as $row => $innerArray){
                foreach($innerArray as $innerRow => $deeperInner){
                      foreach($deeperInner as $deeperinnerRow => $value){
                            echo $value . "<br/>";
                      }
                }

          } 
```

如何分离输出值？

我希望能够将 [ort] 下的每个值显示为“值”，并将 [kommun] 下的所有值显示为值 – Alisso 1 分钟前编辑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T21:38:31.457

这只会递归地输出值，但很容易针对其他输出格式进行调整。

```
 function RecurseArray( $inarray ) 
   { 
       foreach ( $inarray as $inkey => $inval ) 
       { 
           if ( is_array( $inval ) ) 
           { 
               $toarray = RecurseArray( $inval ); 
           } 
           else 
           { 
               echo $inval."\n";  //handle non array
           } 
       } 
   } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T22:24:46.373

我知道了！

这是我现在工作的解决方案！

```
 foreach ($allaMedlemmarsIntel as $eachMedlemID => $varjeMedlemsIntel)
              {
                    echo '<div class="each">';
                          echo $eachMedlemID;
                          echo '<ul class="omradenOchPlatser">';
                          foreach($varjeMedlemsIntel as $typAvPlats => $deeperInner){
                                      foreach($deeperInner as $deeperinnerRow => $value){
                                            echo '<li class="'.$typAvPlats.'">';
                                            echo $value;
                                            echo '</li>';
                                      }
                          }
                          echo '</ul>';
                    echo '</div>';
              } 
```

# vb.net - vb.net 中的 3D 数组

> ID：11181359
> 
> 赞同：1
> 
> 时间：2012-06-24T21:33:10.607
> 
> 标签：vb.net

如何在 vb.net 中定义、动态初始化和打印 3D 数组？

我有这个返回 3d 数组的代码，我有错误告诉我有一个参数超出范围.. 当我寻找该行时，我发现没有错？

这是功能代码：

```
Private Function readFESTWERTEBLOCK(ByVal FESTWERTEBLOCKString As String ) _
    As String (,,)

    Dim allX As System.Text.RegularExpressions .Group
    Dim allY As System.Text.RegularExpressions.Group
    Dim allZ As System.Text.RegularExpressions.Group
    Dim tempArray (,,) As String 
    Dim allXval As System.Text.RegularExpressions .MatchCollection
    Dim allYval As System.Text.RegularExpressions.MatchCollection 
    Dim allZval As System.Text.RegularExpressions.MatchCollection
    Dim oldUp ,midUp,newUp  As Integer 
    Dim a,b,c
    Dim myRegExpallX As New System.Text.RegularExpressions.Regex("WERT([\-\s\.0-9e]+)")
    Dim myRegExpallY As New System.Text.RegularExpressions.Regex("WERT([\-\s\.0-9e]+)")
    Dim myRegExpallZ As New System.Text.RegularExpressions.Regex("WERT([\-\s\.0-9e]+)")
    Dim myRegExpallXval As New System.Text.RegularExpressions.Regex("[\w\-\.]+")
    Dim myRegExpallYval As New System.Text.RegularExpressions.Regex("[\w\-\.]+")
    Dim myRegExpallZval As New System.Text.RegularExpressions.Regex("[\w\-\.]+")

    ReDim tempArray (0 To 2 ,0 To -1, 0 To -1 )
    For a=0 To myRegExpallX.Matches(FESTWERTEBLOCKString).Count-1
        If myRegExpallX.Matches(FESTWERTEBLOCKString).Item(a).Groups.Count>1 And myRegExpallY.Matches(FESTWERTEBLOCKString).item(a).Groups.Count>1 AndAlso myRegExpallZ.Matches(FESTWERTEBLOCKString).item(a).Groups.Count>1 Then
            allX = myRegExpallX.Matches(FESTWERTEBLOCKString).Item(a).Groups.Item(1)
            allXval= myRegExpallXval.Matches(allX.Value.ToString())

            allY = myRegExpallY.Matches(FESTWERTEBLOCKString).Item(a).Groups.Item(1)
            allYval= myRegExpallYval.Matches(allY.Value.ToString())

            allZ = myRegExpallZ.Matches(FESTWERTEBLOCKString).Item(a).Groups.Item(1)
            allZval= myRegExpallZval.Matches(allZ.Value.ToString())

            oldUp= UBound(tempArray,3)
            midUp= UBound(tempArray , 3) + allXval.Count
            newUp=UBound(tempArray,3)+allXval.Count+allYval.Count

            ReDim Preserve tempArray(0 To 2 ,0 To midUp ,0 To newUp)
            For c=oldUp+2 To (allXval.Count+allYval.Count+oldUp)
                For b= midUp+2 To allXval.Count+midUp
                   Dim tmpMatchX As System.Text.RegularExpressions.Match=allXval.Item(b-oldUp-2)
                   tempArray(0,b,c)=tmpMatchX.Value.ToString()
                   Dim tmpMatchY As System.Text.RegularExpressions.Match=allYval.Item(b-oldUp-2)
                   tempArray(1,b,c)=tmpMatchY.Value.ToString()
                   Dim tmpMatchZ As System.Text.RegularExpressions.Match=allZval.Item(b-oldUp-2)
                   tempArray(2,b,c)=tmpMatchZ.Value.ToString()
                Next
            Next
        End If
    Next       
    readFESTWERTEBLOCK = tempArray
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:45:04.983

您可以像这样初始化一个 3 维数组

```
Dim a(,,) As Double

a = New Double(5, 4, 10) {} 
```

该数组具有以下索引范围

```
a(0..5, 0..4, 0..10) 
```

并且具有 6 x 5 x 11 个元素的大小。

* * *

如果您有可以增长的维度，请使用`List(Of T)`它们

```
Dim tempArray As List(Of List(Of String))() = New List(Of List(Of String))(2) {}

tempArray(0) = New List(Of List(Of String))()

tempArray(0).Add(New List(Of String)());
tempArray(0)(0).Add("Some string");
tempArray(0)(0).Add("Some other string");

tempArray(0).Add(New List(Of String)());
tempArray(0)(1).Add("XXX");
tempArray(0)(1).Add("YYY");
tempArray(0)(1).Add("ZZZ");

tempArray(0)(1)(2) ===> "YYY" 
```

# django - Userena 服务条款注册

> ID：11181360
> 
> 赞同：2
> 
> 时间：2012-06-24T21:33:31.130
> 
> 标签：django

Userena 附带一个包含服务条款按钮的注册表单。这应该如何被要求注册？我在 Google 的文档中都找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:19:14.073

这很简单，只需覆盖 urls.py 中的基本形式：

```
from userena.forms import SignupFormTos

urlpatterns = patterns('',
    url(r'^accounts/signup/$','userena.views.signup', {'signup_form': SignupFormTos}),
    url(r'^accounts/', include('userena.urls')),
) 
```

请务必按此顺序放置，以便 Django 在此处而不是在 userena 的 url 中捕获注册视图。

# java - String.Format 进行舍入，找不到非法格式转换源错误？

> ID：11181364
> 
> 赞同：6
> 
> 时间：2012-06-24T21:33:45.717
> 
> 标签：java, string-formatting

我正在编写一个程序，让用户输入 6 个温度读数，然后

1.  返回最高原始值+摄氏度版本
2.  返回原始值 + 转换为摄氏度版本。

设置数组值的代码在这里：

```
System.out.print( "Enter Temperature:\t");   //Get the count...
        Temp = LocalInput.nextInt();
        WeatherSpots[K].CatchCount = Temp; 
```

我得到的错误信息是这个

```
java.util.IllegalFormatConversionException: f != java.lang.Integer
at java.util.Formatter$FormatSpecifier.failConversion(Unknown Source)
at java.util.Formatter$FormatSpecifier.printFloat(Unknown Source)
at java.util.Formatter$FormatSpecifier.print(Unknown Source)
at java.util.Formatter.format(Unknown Source)
at java.util.Formatter.format(Unknown Source)
at java.lang.String.format(Unknown Source)
at p2list.WeeklyReport(p2list.java:102)
at p2list.main(p2list.java:33)" 
```

我还找到了给我带来麻烦的确切短语：

```
String.format("%.2d", (WeatherSpots[K].CatchCount - 32) * 5 / 9)" 
```

我知道当我`"%._"`没有正确的说明符时会发生错误，但是我所有的变量和数组都在 int 中，所以 d 应该可以工作

这是其余的代码：

这就是我设置第一个数组的方式：

```
private static  WeatherLocation[] WeatherSpots = new WeatherLocation[6];" 
```

这是后面数组使用的类

```
public class WeatherLocations extends WeatherLocation {
    public String LocationID;
    public Integer CatchCount;"

    arrays = WeatherSpots.LoccationID/Catchcount" 
```

这`catchcount`是使用用户输入温度设置数组 的位置

```
int K;
for(K = 0 ; K < 6 ; K++){
    System.out.print( "Enter Temperature:\t");
    Temp = LocalInput.nextInt();
    WeatherSpots[K].CatchCount = Temp; 
```

这是我尝试调用`WeatherSpots[K].catchcount`值以转换为摄氏度 的方法

```
int K= 0;
for(K = 0 ; K < 6 ; K++){
    System.out.println( "" + WeatherSpots[K].LocationID +"\t\t" + WeatherSpots[K].CatchCount + "\t\t" + String.format("%.2f", (WeatherSpots[K].CatchCount - 32) * 5 / 9)); 
```

如果我的数组和变量是使用的正确类型，会导致错误的原因是`string.format`什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T23:34:53.203

在

```
String.format("%.2f", (WeatherSpots[K].CatchCount - 32) * 5 / 9) 
```

您正在尝试使用s 或s`int`的格式打印 an 。这导致. 由于整数除法无论如何都会截断，因此打印小数点后两位的整数并不是很有用。只需除以浮点数而不是9 即可得到一个浮点数，您可以使用.`double``float``IllegalFormatConversionException: f != java.lang.Integer``9.0``int``%.2f`

在你的

```
String.format("%.2d", (WeatherSpots[K].CatchCount - 32) * 5 / 9) 
```

格式`%.2d`无效，因为打印小数点后的整数没有意义。

# java - ListFragment 中的加载程序未重新加载（使用 ViewPager）

> ID：11181375
> 
> 赞同：1
> 
> 时间：2012-06-24T21:35:09.290
> 
> 标签：java, android

我正在使用`ViewPager`我的应用程序将一系列列表放在水平滚动条中。但是，当我开始横向滚动并再次返回时，我之前访问过的列表片段是空的。这应该是我编写的加载器重新加载内容的时刻（我对片段和加载器都是新手）。

我已经看到了一些相关的问题，但我不知道如何将它们应用于我的情况。我发现当我用随机 int 替换持有者片段中的 mLayoutID 时，这个示例有效，但是当我这样做时，事情自然会停止工作（比如改变方向）。但它应该对这个问题说些什么。

基本上，listfragment 只是在初始加载后清空并保持为空。

这是我的“持有人”片段：

```
public final class SceduleFragment extends Fragment {

    private static final String KEY_LAYOUT = "SceduleFragment:LayoutID";
    private static final String LOG_TAG = "SceduleFragment";

    private int mWeekNumber;
    private int mLayoutID;

    public static SceduleFragment newInstance(String content, int contentID) {
        SceduleFragment fragment = new SceduleFragment();
        fragment.mWeekNumber = contentID;
        fragment.mLayoutID = Integer.parseInt((Integer.toString(Config.WK_PREFIX) + Integer.toString(contentID)));

        return fragment;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_LAYOUT)) {
            mLayoutID = savedInstanceState.getInt(KEY_LAYOUT);
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        LinearLayout layout = new LinearLayout(getActivity());
        layout.setGravity(Gravity.TOP);
        layout.setPadding(makeDP(5), makeDP(5), makeDP(5), makeDP(5));

        LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
             LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
        layout.setLayoutParams(layoutParams);

        LinearLayout innerLayout = new LinearLayout(getActivity());
        innerLayout.setBackgroundResource(R.drawable.scd_layout_bg);
        LinearLayout.LayoutParams scrollParams = new LinearLayout.LayoutParams(
                 LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        innerLayout.setGravity(Gravity.CENTER);
        innerLayout.setLayoutParams(scrollParams);
        layout.addView(innerLayout);

        if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_LAYOUT)) {
            mLayoutID = savedInstanceState.getInt(KEY_LAYOUT);
        }

        Random rand = new Random();
        //mLayoutID = rand.nextInt(2000);

        innerLayout.setId(mLayoutID);  
        Log.i(LOG_TAG, "ID for next WeekListFragment " +  Integer.toString(mLayoutID));        

        if (getFragmentManager().findFragmentById(mLayoutID) == null) {         
            WeekFragment weekFragment = new WeekFragment(mWeekNumber);
            getFragmentManager().beginTransaction().add(mLayoutID, weekFragment).commit();
        }

        return layout;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt(KEY_LAYOUT, mLayoutID);
    }

    private int makeDP(int number){      
        final float scale = this.getResources().getDisplayMetrics().density;
        number = (int) (number * scale + 0.5f);
        return number;
    }
} 
```

这是在里面创建列表的 ListFragment：

```
public class WeekFragment extends ListFragment implements
        LoaderManager.LoaderCallbacks<Cursor> {

    private String LOG_TAG = "WeekFragment";
    private static final String KEY_WEEKNR = "SceduleFragment:WeekNumber";

    protected Activity mActivity;
    protected Cursor mCursor;
    protected SceduleDataSource mDataSource;

    private int mWeekNumber;

    private static final int SCEDULEITEMS_LIST_LOADER = 0x0577; 
    private static Typeface fontOswaldLight;

    private SceduleItemsCursorAdapter mAdapter;

    public WeekFragment() { }

    public WeekFragment(int weekNumber) {
        this.mWeekNumber = weekNumber;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
        LoaderManager.enableDebugLogging(true);

        mActivity = getActivity();
        mDataSource = new SceduleDataSource(mActivity);
        fontOswaldLight = Typeface.createFromAsset(mActivity.getAssets(),
                "Oswald-Light.otf");

        if ((savedInstanceState != null) && savedInstanceState.containsKey(KEY_WEEKNR)) {
            mWeekNumber = savedInstanceState.getInt(KEY_WEEKNR);
            Log.i(LOG_TAG, "Resorting to savestate.");
        } else {
            Log.i(LOG_TAG, "Saved state was null");

            getLoaderManager().initLoader(SCEDULEITEMS_LIST_LOADER, null, this);
            mAdapter = new SceduleItemsCursorAdapter(mActivity,
                    R.layout.scd_lesson_list_item, mCursor, new String[] {
                            SceduleItems.SCEDULE_DATE,
                            SceduleItems.SCEDULE_LESSONNAME,
                            SceduleItems.SCEDULE_BEGIN, SceduleItems.SCEDULE_ROOM,
                            SceduleItems.SCEDULE_TEACHER,
                            SceduleItems.SCEDULE_CLASS }, new int[] {
                            R.id.textDayTitle, R.id.textLessonName,
                            R.id.textLessonTime, R.id.textLessonRoom,
                            R.id.textLessonTeacher, R.id.textLessonClass }, 0);

            Log.i(LOG_TAG, "Filled WeekListFragment");

            setListAdapter(mAdapter);       
        }        
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt(KEY_WEEKNR, mWeekNumber);
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        ColorDrawable divider = new ColorDrawable(this.getResources().getColor(
                R.color.LightGrey));
        ListView listView = getListView();
        listView.setDivider(divider);
        listView.setDividerHeight(makeDP(1));
        listView.setLongClickable(true);
        listView.setOnItemLongClickListener(new OnItemLongClickListener() {
            public boolean onItemLongClick(AdapterView<?> parent, View v,
                    int position, long id) {

                Cursor lessonCursor = (Cursor) getListView().getItemAtPosition(
                        position);
                showLessonDialog(lessonCursor);
                return true;
            }
        });
    }

    public void showLessonDialog(Cursor lessonCursor) {

        String dialogTitle = lessonCursor.getString(2);

        final AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(
                mActivity);
        AlertDialog lessonDialog;

        LayoutInflater inflater = (LayoutInflater) mActivity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View dialogLayout = inflater.inflate(R.layout.dlg_lesson_item, null);

        TextView textLessonName = (TextView) dialogLayout
                .findViewById(R.id.textLessonName);
        textLessonName.setText(lessonCursor.getString(2));
        TextView textLessonTime = (TextView) dialogLayout
                .findViewById(R.id.textLessonTime);
        textLessonTime.setText(lessonCursor.getString(6) + " - "
                + lessonCursor.getString(7));
        TextView textLessonRoom = (TextView) dialogLayout
                .findViewById(R.id.textLessonRoom);
        textLessonRoom.setText(lessonCursor.getString(8));
        TextView textLessonTeacher = (TextView) dialogLayout
                .findViewById(R.id.textLessonTeacher);
        textLessonTeacher.setText(lessonCursor.getString(9));
        TextView textLessonClass = (TextView) dialogLayout
                .findViewById(R.id.textLessonClass);
        textLessonClass.setText(lessonCursor.getString(10));

        dialogBuilder.setView(dialogLayout).setNeutralButton("Sluit",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        dialog.cancel();
                    }
                });

        WebView webView = new WebView(mActivity);
        webView = (WebView) dialogLayout.findViewById(R.id.adWebView);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setVerticalScrollBarEnabled(false);
        webView.setHorizontalScrollBarEnabled(false);
        String adHtml = "<html><body>"
                + "<style type='text/css'>body{margin: 0;padding: 0}</style>"
                + "<script type'text/javascript'>"
                + "var admob_vars = {"
                + "pubid: 'xxxxxxxxxx', "
                + "bgcolor: '000000', "
                + "text: 'FFFFFF', "
                + "test: true };"
                + "</script>"
                + "<script type='text/javascript' src='http://mmv.admob.com/static/iphone/iadmob.js'></script></body></html>";
        webView.loadData(adHtml, "text/html", "UTF-8");

        lessonDialog = dialogBuilder.create();
        lessonDialog.setTitle(dialogTitle);
        lessonDialog.show();
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {

        String dateConverter = "substr(" + SceduleItems.SCEDULE_DATE + ",7)||"
                + "substr(" + SceduleItems.SCEDULE_DATE + ",4,2)||" + "substr("
                + SceduleItems.SCEDULE_DATE + ",1,2)||" + "substr("
                + SceduleItems.SCEDULE_BEGIN + ",1,2)||" + "substr("
                + SceduleItems.SCEDULE_BEGIN + ",4,2)";

        CursorLoader cursorLoader = new CursorLoader(getActivity(),
                ONTTContentProvider.CONTENT_URI, mDataSource.allSceduleColumns,
                SceduleItems.SCEDULE_WEEKCODE + " like '" + mWeekNumber + "'",
                null, dateConverter + " ASC");

        return cursorLoader;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        mAdapter.swapCursor(cursor);
        Log.i(LOG_TAG, "Finished with loading week " + Integer.toString(mWeekNumber));
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        mAdapter.swapCursor(null);
    }

    private int makeDP(int number) {
        final float scale = this.getResources().getDisplayMetrics().density;
        number = (int) (number * scale + 0.5f);
        return number;
    }

    public class SceduleItemsCursorAdapter extends SimpleCursorAdapter {

        private LayoutInflater layoutInflater;
        private int layout;

        public SceduleItemsCursorAdapter(Context context, int layout, Cursor cursor,
                String[] from, int[] to, int flags) {

            super(context, layout, cursor, from, to, flags);

            this.layout = layout;
            layoutInflater = LayoutInflater.from(context);
        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {

            View view = layoutInflater.inflate(layout, parent, false);
            return view;
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {

            String viewID = Config.SI_PREFIX + cursor.getString(0);

            view.setId(Integer.parseInt(viewID));
            LinearLayout dayHeader = (LinearLayout) view.findViewById(R.id.layoutDayTitle);
            TextView dayTitle = (TextView) view.findViewById(R.id.textDayTitle);
            TextView lessonName = (TextView) view.findViewById(R.id.textLessonName);
            TextView lessonTime = (TextView) view.findViewById(R.id.textLessonTime);
            TextView lessonRoom = (TextView) view.findViewById(R.id.textLessonRoom);
            TextView lessonTeacher = (TextView) view.findViewById(R.id.textLessonTeacher);
            TextView lessonClass = (TextView) view.findViewById(R.id.textLessonClass);

            lessonName.setText(cursor.getString(2));
            lessonTime.setText(cursor.getString(6) + " - " + cursor.getString(7));
            lessonRoom.setText(cursor.getString(8));
            lessonTeacher.setText(cursor.getString(9));
            lessonClass.setText(cursor.getString(10));

            String thisDate = cursor.getString(5);
            String prevDate = null;

            if (cursor.getPosition() > 0 && cursor.moveToPrevious()) {
                prevDate = cursor.getString(5);
                cursor.moveToNext();
            }

            if (prevDate == null || !prevDate.equals(thisDate)) {
                dayHeader.setVisibility(View.VISIBLE);

                String dayName = Config.Days[Integer.parseInt(cursor.getString(3))];            
                dayName += " " + cursor.getString(5);
                dayTitle.setText(dayName);
                dayTitle.setTypeface(fontOswaldLight);
            } else {
                dayHeader.setVisibility(View.GONE);
            }

            if((Config.SI_PREFIX + ONTTShowScedule.upcomingItemID).equals(viewID)) {
                int redColor = getResources().getColor(R.color.DarkRed);

                lessonName.setTextColor(redColor);
                lessonTime.setTextColor(redColor);
                lessonRoom.setTextColor(redColor);
                lessonTeacher.setTextColor(redColor);
                lessonClass.setTextColor(redColor);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:12:54.920

我在这里找到了导致我的问题的原因：

[父片段不显示子 ViewPager](https://stackoverflow.com/questions/9600297/parent-fragment-not-displaying-child-viewpager)

“你不能将碎片嵌套在碎片中。”

# java - Crest 日志请求/响应正文

> ID：11181377
> 
> 赞同：0
> 
> 时间：2012-06-24T21:35:27.417
> 
> 标签：java, android, rest, logging, rest-client

有没有办法在发送之前打印 Crest (codegist) 生成**的****请求**正文？

 **同样是否可以在收到**响应**原始正文后打印它？

这对调试很有帮助。

我将 Crest 用于 Android 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:09:17.267

您可以通过两种方式在 Android 中打开 Crest 日志记录：

*   在连接的设备上执行 shell 命令：

    ```
    MBP:~ roman$adb shell setprop log.tag.CodeGist VERBOSE 
    ```

*   [使用System.setProperty()](http://developer.android.com/reference/java/lang/System.html#setProperty%28java.lang.String,%20java.lang.String%29)方法以编程方式设置相同的属性

原始响应将在日志中打印出来，如下所示：

```
03-18 07:58:52.774: VERBOSE/CodeGist(1590): org.codegist.crest.io.Response: Received Http Response
03-18 07:58:52.784: VERBOSE/CodeGist(1590): org.codegist.crest.io.Response: [{"id":14306037}] 
```**

# java - JTransform / MATLAB 结果

> ID：11181379
> 
> 赞同：0
> 
> 时间：2012-06-24T21:35:38.233
> 
> 标签：java, android, signal-processing, fft, audiorecord

我为 Android 编写了一个测试程序，我从麦克风录制音频并使用 JTransform lib 来计算 fft。我与 matlab 进行比较，但我没有得到相同的结果。例如 ：

J变换：

```
real: 0.035003662109375 imag: 0.036529541015625
real: 0.036712646484375 imag: 0.0355224609375
real: 0.033966064453125 imag: 0.033111572265625
real: 0.034149169921875 imag: 0.035858154296875
real: 0.036712646484375 imag: 0.0360107421875 
```

MATLAB：

```
4.1469          
1.6639 + 0.6458i
5.1224 +17.1221i
-4.3110 - 1.8984i
9.3352 + 4.8483i 
```

录音机：

```
DoubleFFT_1D fft1d = new DoubleFFT_1D(bufferSize / 2);
short[] sourceBuffer = new short[bufferSize];
double[] fftBuffer = new double[bufferSize];
FFT fft = new FFT();
recorder.startRecording();
isRecording.set(true);
while(isRecording.get())
{
  int read = recorder.read(sourceBuffer, 0, bufferSize);
  //Log.e(LOG_TAG, "read: " + read + " bufferSize: " + bufferSize);
  if(read != AudioRecord.ERROR_INVALID_OPERATION)
  {
    for(int i = 0; i < bufferSize && i < read; ++i)
    {
      // signed int16 to double (2^15 = 32768)
      fftBuffer[i] = (double) (sourceBuffer[i] / 32768.0);
      try
      {
        // for matlab
        soundFile.write(fftBuffer[i] + "\n");
      }
      catch (IOException e)
      {
        Log.e(LOG_TAG, e.getMessage());
      }
    }
  }
}
fft1d.realForward(fftBuffer); 
```

[相关帖子](https://stackoverflow.com/questions/8789577/fft-in-matlab-and-java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:04:30.573

我几乎可以肯定这是你的问题：

```
// signed int16 to double (2^15 = 32768)
fftBuffer[i] = (double) (sourceBuffer[i] / 32768.0); 
```

JTransform 确实需要一个双缓冲区，但据我所知，它并不局限于 -1/1。我用它来识别音高，从来没有像那样划分它。只需将其转换为双倍就可以了。

不过，老实说，我最终还是使用了 libGdx 的 FFT 类，因为它对我的基准测试速度更快。

# javascript - HTML 和 Javascript，window.prompt

> ID：11181383
> 
> 赞同：0
> 
> 时间：2012-06-24T21:36:11.490
> 
> 标签：javascript, html

对 javascript 和 html 类型的东西非常陌生。我只想使用来自用户的输入并将其输出到表格中来做一个简单的示例。我无法让窗口提示实际出现。我想有一些非常明显的事情表明我做错了，但我目前没有看到它......我正在学校上课，但这不是家庭作业，只是我自己做的练习。

这与while循环有关吗？关于我应该如何继续提示用户的任何建议，直到他们另有说明？

```
<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>Mileage Record</title>
<style type = "text/css">
    table {
        width:300px;
        border-collapse:collapse;
        background-color:lightblue;
        }
    table, td, th {
        border: 1px solid black;
        padding: 4px;
        }
    th {
        text-align: left;
        color: white;
        background-color: darkblue
        }
    tr.oddrow {
        background-color: white;
        }
</style>

<script>
    var milesDriven;
    var gallonsUsed;
    var mpg;
    var anyMore;

    document.writeln("<table>");
    document.writeln("<thead><tr><th>Miles Driven</th>");
    document.writeln("<th>Gallons Used</th>");
    document.writeln("<th>MPG</th>");
    document.writeln("</tr></thead><tbody>");

    while (anyMore == true) {
        milesDriven = window.prompt("How many miles did you drive?");
        gallonsUsed = window.prompt("How many gallons did you use?");
        mpg = milesDrive/gallonsUsed;
        document.writln("<tr><td>" + milesDriven + "</td><td>" + 
            gallonsUsed + "</td><td>" + mpg + "</td></tr>");

        anymore = confirm("Do you have any more data to input?");
    }
    document.writeln("</tbody></table>");

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:47:05.753

该方法存在几个问题。您不应该使用`document.writeln()`来修改文档内容。相反，创建元素并将它们添加到文档树中。一个好的 JavaScript 教程应该会告诉你如何做到这一点。它还将解释标识符是区分大小写的，所以你不能在`anyMore`这里和`anymore`那里写。标识符中还有其他拼写错误。而且由于未定义的值不等于`true`，因此您的循环永远不会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T03:22:02.807

```
<pre>
<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>Mileage Record</title>
<style type = "text/css">
    table {
        width:300px;
        border-collapse:collapse;
        background-color:lightblue;
        }
    table, td, th {
        border: 1px solid black;
        padding: 4px;
        }
    th {
        text-align: left;
        color: white;
        background-color: darkblue
        }
    tr.oddrow {
        background-color: white;
        }
</style>

<script>
   // var milesDriven;
  //  var gallonsUsed;
  //  var mpg;
    var anyMore=0;
    var str="<table>";
        str+="<thead><tr><th>Miles Driven</th>";
        str+="<th>Gallons Used</th>";
        str+="<th>MPG</th>";
        str+="</tr></thead><tbody>";

function milesDriven(){
  return window.prompt("How many miles did you drive?");
}

function gallonsUsed(){
  return window.prompt("How many gallons did you use?");
}

function mpg(){
 return milesDriven()/gallonsUsed();
}

function addComponentsToDOM(){
    while (anyMore<3) { //not 0 is true or not undefined is true or not null is true 
    str+="<tr><td>" + milesDriven() + "</td><td>" + 
            gallonsUsed() + "</td><td>" + mpg() + "</td></tr>"
      //  anymore = confirm("Do you have any more data to input?");
      anyMore++;
    }

    str+="</tbody></table>";
    //document.writeln(); i suggest you not use this method add component to DOM tree
    //because  this method first empty DOM tree content
     document.body.innerHTML=str;
 }

//why use this event,because window after  loaded document.body not null
 window.onload=addComponentsToDOM;

</script>
</pre> 
```

# c# - 将盐作为明文存储在包含密文的文件中

> ID：11181384
> 
> 赞同：3
> 
> 时间：2012-06-24T21:36:16.800
> 
> 标签：c#, regex, security, encryption, salt

我的问题是这样的：

将盐存储为明文是否会破坏使用盐的目的（我听说这样做很好）？我的印象是盐是一个额外的变量，为蛮力或字典攻击提供了额外的复杂性，除非提供正确的盐，否则任何将正确密码转换为密钥的尝试都会失败。在我看来，如果盐是已知的，攻击者可以使用正确的盐尝试每个密码。如果不是，为什么？

提前感谢您花时间回答我的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T21:38:28.093

加盐的目的是防止攻击者重复使用他的字典来处理多个密文。
暴露盐并没有错。

相反，您应该确保您的盐永远不会被不同的密文重复使用。
为此，您应该使用安全的随机数生成器创建盐。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T21:46:00.277

将盐存储为明文是否会破坏使用盐的目的（我听说这样做很好）？

**你为什么用盐？** 为了安全地存储密码，您可以对它们进行哈希处理。并且您存储了这些哈希的列表。当您知道哈希时，很难找到原始密码。

假设您是一名攻击者，他检索了散列密码列表。你可以采取一些geusses。您可以尝试将某些周密码散列为：“password”、“qwerty”……然后在散列密码列表中搜索匹配项。您可以正确猜出单个密码的机会非常高。

盐是一种防止你这样做的技术。当你想猜测时。例如：采取“qwerty”。你应该散列“qwerty”+盐。这对于每个用户来说都是不同的。是什么让猜测密码变得更加困难。

简而言之：将盐存储为纯文本是非常安全的。

# python - 在 App Engine 上使用 Python2.7 时，可以引用每个请求的全局变量吗？

> ID：11181385
> 
> 赞同：2
> 
> 时间：2012-06-24T21:36:27.777
> 
> 标签：python, google-app-engine

我正在使用 Python2.7 运行时，在清单中将 threadsafe 设置为 false。

我这样做安全吗

```
user = users.get_current_user() 
```

一旦在脚本的顶部，在全局空间中，并从各种处理程序中引用它而没有任何命名空间问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T21:48:22.597

最好创建一个基类，在其中添加一些函数，然后从基类扩展所有处理程序，因为`get_current_user()`与请求处理程序有关，并且只有在那里才有意义。

这是一个例子：

```
import webapp2
from google.appengine.api import users

class BaseHandler(webapp2.RequestHandler):
  def get_user(self):
    #Maybe also adding some logic here or returning your own User model
    return users.get_current_user()

class MainPage(BaseHandler):
  def get(self):
    if self.get_user():
      self.response.headers['Content-Type'] = 'text/plain'
      self.response.out.write('Hello, ' + self.get_user().nickname())
    else:
      self.redirect(users.create_login_url(self.request.uri)) 
```

# javascript - 如何使可变大小的图像居中

> ID：11181387
> 
> 赞同：0
> 
> 时间：2012-06-24T21:36:41.823
> 
> 标签：javascript, html, css

这应该很容易，我对此进行了一些研究。我已经从[这里](http://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/)、[这里](http://bytes.com/topic/html-css/answers/778423-center-image-page)、[这里](https://stackoverflow.com/questions/388180/how-to-make-an-image-center-vertically-horizontally-inside-a-bigger-div)和其他地方拼接了代码，但我无法让它工作。

我有一个网页，其中有 3 个 .png 层叠在一起。前两个是可变大小的，并且是页面的 100%。顶部有一个洞（中间是透明的），中间消失了，使用 Javascript 显示底部的一个。前两个 .png 和 Javascript 运行良好。

我希望底部图像在垂直和水平方向处于准确的中心，并且与页面大小成正比。我可以让它居中或成比例，但不能两者兼而有之。我不能把底部的图片作为背景，因为那样背景不是正确的颜色，或者是平铺的。

以下是部分代码示例：

**HTML：**

```
<body>  
        <div >
    <p0 id="face" ><img src="face2.png"; class='face'> </p0>
</div>
        <p1 id="circuit" > <img src= 'circuit.png' width = '100%' height = '100%' /> </p1>
        <p2 id="hole" ><img src="hole.png" width='100%' height = '100%' /> </p2>
</body> 
```

**CSS：**

```
p0{ 
width: 50%;/*I can't set the height to 50% because it is a different size than the width*/
center
z-index:1;
position: absolute; 
}

p1{
z-index: 2;
width: 100%;
padding:0;
margin: 0;
height:100%;
position: absolute; 
}

p2{
z-index:3;
width: 100%;
padding:0;
margin: 0;
height:100%;
position: absolute; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:39:28.637

将您想要的所有内容放在具有以下内容的 div 中：

```
 .div{
     width: 100%;
     position: relative; // or absolute
     text-align: center;
     text-align: -moz-center;
     text-align: -webkit-center;
     } 
```

这是一个链接[jsfiddle](http://jsfiddle.net/hT9FQ/1/)

这是完整的CSS：正如问题所述，两个图像在彼此顶部的确切中心的大小不同，

```
.parent{
 width: 100%;
 position:  absolute;
 text-aligh: -align: center;
 text-align: -moz-center;
 text-align: -webkit-center;

 }

.center1{

height:120px;
width: 275px;    
background-image: url("http://www.google.com/images/srpr/logo3w.png");
}

.center2{       
height: 100px;
width: 200px;
 background-image: url("http://www.google.com/logos/2012/turing-doodle-static.jpg");
} 
```

​ HTML：

```
 <div class="parent" style="z-index: 1;">
         <div class="center1"></div> 
     </div>
     <div class="parent" style="z-index: 10;">
         <div class="center2"></div> 
     </div> 
```

# android - Android Asynctask 在进度对话框后面显示圆圈

> ID：11181393
> 
> 赞同：0
> 
> 时间：2012-06-24T21:38:01.310
> 
> 标签：android

我想完全隐藏在执行 AsyncTask 期间显示的进度圈（下面的代码） - 同时显示进度对话框。问题是可以通过透明的进度对话框看到圆圈。有人可以帮忙吗？我不想改变进度对话框的透明度......

```
 new AsyncTask<String, Void, List<Product>>() {

        private ProgressDialog dialog;

        protected void onPreExecute() {
            this.dialog = ProgressDialog.show(getActivity(), "Progress", "Retrieving products...", false, false);
        }

        protected void onPostExecute(List<Product> result) {
            // populate the list
            Context context = getSherlockActivity().getApplicationContext();
            ArrayAdapter<Product> adapter = new ArrayAdapter<Product>(context, R.layout.productlist_item, result);
            setListAdapter(adapter);

            // dismiss the progress dialog
            dialog.dismiss();
        }

        @Override
        protected List<Product> doInBackground(String... params) {
            // populate the database if required
            try {
                // get the data from the server
                MyApplication.populateProductDatabase(false);
            } catch (NotConnectedToInternetException e) {
                exceptionMessage = "Unable to retrieve data. Internet connection unavailable.";
                e.printStackTrace();
            }

            // get the records in the database
            ProductDAO dao = new ProductDAO();
            List<Product> result = dao.getProducts(params[0]);

            return result;
        }
    }.execute(find); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:18:08.710

我还看到您的代码在正常对话框后面出现了一些奇怪的对话框。尝试创建一个单独的 AsyncTask 类。

就像是：

```
private class MyAsyncTask extends AsyncTask<String, Void, List<Product> {

    private Activity mActivity;
    private ProgressDialog mDialog;

    public MyAsyncTask(){

        this.mActivity = MyActivity.this;
        mDialog = new ProgressDialog(mActivity);

    }

    protected void onPreExecute() {
        mDialog.setMessage("Retrieving products...");
        mDialog.show();
    }

    protected void onPostExecute(List<Product> result) {
        // populate the list
        Context context = getSherlockActivity().getApplicationContext();
        ArrayAdapter<Product> adapter = new ArrayAdapter<Product>(context, R.layout.productlist_item, result);
        setListAdapter(adapter);

        // dismiss the progress dialog
        mDialog .dismiss();
    }

@Override
    protected List<Product> doInBackground(String... params) {
        // populate the database if required
        try {
            // get the data from the server
            MyApplication.populateProductDatabase(false);
        } catch (NotConnectedToInternetException e) {
            exceptionMessage = "Unable to retrieve data. Internet connection unavailable.";
            e.printStackTrace();
        }

        // get the records in the database
        ProductDAO dao = new ProductDAO();
        List<Product> result = dao.getProducts(params[0]);

        return result;
    }
} 
```

然后调用它：

```
MyAsyncTask asyncTask = new MyAsyncTask();
                 asyncTask .execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:46:25.663

我找到了这个问题的原因：它的事实是 ListFragment 的 ListAdapter 尚未设置。解决方案是将 ListAdapter 设置为一个空列表，它告诉 ListFragment 它有结果并且没有进行其他处理。

通过将以下 2 行添加到 onCreate 方法解决了问题

```
ArrayAdapter<Product> adapter = new ArrayAdapter<Product>(getActivity(), R.layout.productlist_item, new ArrayList<Product>());
setListAdapter(adapter); 
```

# entity-framework - DDD：将实体添加到存储库并处理异常

> ID：11181396
> 
> 赞同：2
> 
> 时间：2012-06-24T21:38:09.700
> 
> 标签：entity-framework, exception, repository, domain-driven-design, logic

我正在尝试使用 DDD 对一个简单的域进行建模。数据库层使用实体框架实现，领域对象为 POCO。域具有具有 FirstName、LastName 和 Username 属性的用户实体。因此，域定义了为用户处理存储库的 IRepository。

现在域逻辑中的一个要求是不能存在具有相同用户名的两个用户。因此，当另一个具有相同用户名的用户已经存在时尝试添加新用户应该会引发异常。

```
IUnitOfWork unitOfWork = new UnitOfWork();
IRepository<User> users = unitOfWork.Users;

User user1 = new User() { Username = "jsmith", FirstName = "John", LastName = "Smith" };
users.Add(user1);   
users.Save();       // ok, new user added to the underlying database

User user2 = new User() { Username = "jsmith", FirstName = "Jim", LastName = "Smith" };
users.Add(user2); // exception here?
users.Save();     // or exception here? 
```

这是应该进入添加新用户的 WPF 应用程序的代码示例。在这里，UnitOfWork 封装了 Entity Framework 的 DbContext 对象。

我的问题是我应该如何以及在哪里执行此域规则？尝试将用户添加到存储库时或者调用 Save() 方法时是否应该抛出异常？我是否应该创建域服务来添加新用户，然后在那里处理所有域逻辑规则？

另外，我应该抛出什么异常？我应该创建一些自定义域异常，例如 DuplicateUserException 或类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:52:59.493

db 是该规则的最终执行者。现在，这是一个多用户应用程序吗？如果是这样，那么最务实的方式就是依靠db，捕获sql异常，然后抛出businessrule异常，该异常会被重定向到UI（即会触发错误信息）。

您可以验证域级别是否已存在名称（通过服务是最有效的方式），但这在并发环境中可能会失败。但是，对于单用户应用程序来说，它是一个优雅而干净的解决方案。我所说的单用户应用程序是指所有应用程序一次只为一个用户服务。如果您有 WPF 客户端和 Web 服务，那就是多用户应用程序。

您最好的选择是让持久性（在这种情况下是数据库）处理此规则，因为确保没有重复名称是存储库的责任（存储库不是一个愚蠢的存储桶，它是持久性的管理器）并且它解决了并发问题也是如此。

请注意，我没有提到 EF，因为与数据库通信的方式并不重要。如果明天您将切换到 Azure db，则解决方案仍然相同，只是实现的特定部分会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:51:07.363

我所拥有的最好的运气是使用自定义初始化程序并使用`ExecuteSqlCommand`如下方式在数据库上指定 UNIQUE CONSTRAINT：

```
public class MyInitializer
  : DropCreateDatabaseIfModelChanges<MyContext>
  // Or whichever base class you want to use. DropCreateDatabaseAlways<>,
  // MigrateDatabaseToLatestVersion<>, etc. or even IDatabaseInitializer<>
{
  public void InitializeDatabase(MyContext context)
  {
    // other initialization
    context.Database.ExecuteSqlCommand("ALTER TABLE Users" +
                                       "ADD CONSTRAINT UQ_Users_Username " +
                                       "UNIQUE(Username)");
  }
} 
```

这使逻辑数据库保持绑定。您还可以实现`EntityTypeConfiguration<User>`并对该方法执行检查`Validate`，但您会在每次验证时对数据库进行 ping 操作以检查它。

# css - 在一个 div 上使用 :hover 来影响另一个 div 的背景位置

> ID：11181397
> 
> 赞同：0
> 
> 时间：2012-06-24T21:38:11.730
> 
> 标签：css, hover, background-position

我有一堆 div 都在彼此之上，它们设置为 position:absolute，都包含在一个容器 div 中。我想做的是当用户将鼠标悬停在#feature_1_hitbox 上时更改#feature_1_shade 的背景位置。我试图通过使用来实现这一点 -

```
#feature_1_hitbox:hover #feature_1_shade {
background-position: 0 0;
} 
```

这行不通。但是，如果我将它应用到容器 div 中，它确实有效：

```
#feature_1_container:hover #feature_1_shade {
background-position: 0 0;
} 
```

我几乎会满足于此，但我需要将 hitbox 设置为特定大小，因此 :hover 必须应用于我的 hitbox div。有什么理由为什么这适用于一个 div 而不是另一个？

这是标记代码：

```
<!-- container --> <div id="feature_1_container">
<!-- shade --> <div id="feature_1_shade"></div>
<!-- text and arrow --> <div id="feature_1_text_container"><h3 id="feature_1_arrow">Memberships</h3><p id="feature_1_text">Text here text here</p></div>
<!-- image --> <div id="feature_1_graphic"></div>
<!-- hitbox --> <a href="#"><div id="feature_1_hitbox"></div></a>

</div> <!-- #feature_1_container --> 
```

这是CSS：

```
#feature_1_container {
width: 289px;
height: 255px;
float: left;
}

#feature_1_hitbox {
width: 289px;
height: 166px;
margin: 89px 0 0 0;
position: absolute;
/* background-color: #F99; */
}

#feature_1_graphic {
width: 289px;
height: 255px;
position: absolute;
background-image: url(site_style_images/feature_1_memberships_bag.png);
}

#feature_1_text_container {
width: 289px;
margin: 100px 0 0 0;
position: absolute;
}

#feature_1_text {
margin: 0 0 0 100px;
}

#feature_1_arrow {
background-image: url(site_style_images/feature_arrows.png);
background-position: center right;
background-repeat: no-repeat;
height: 49px;
padding: 0 30px 0 100px;
margin: 0 22px 0 0;
color: #8d895c;
font-size: 22px;
line-height: 44px;
font-family: 'Quicksand', sans-serif;
font-weight: normal;
letter-spacing: -2px;
font-style: normal;
}

#feature_1_shade {
width: 289px;
height: 166px;
margin: 89px 0 0 0;
background-image: url(site_style_images/feature_1_shade.png);
background-position: 0 -166px;
position: absolute;
background-color: #CCC;
}

#feature_1_hitbox:hover #feature_1_shade {
background-position: 0 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:40:44.420

使用按该顺序排列的 HTML 源代码，您将不得不使用 JavaScript 或 jQuery。CSS 选择器不能向后引用更早的元素。

如果源顺序颠倒了，您可能可以执行以下操作：

```
#feature_1_hitbox:hover ~ a #feature_1_shade 
```

如果 jQuery 是一个选项，您可以添加和删除一个类，`#feature_1_shade`基于 hove 状态`#feature_1_hitbox`：

CSS

```
#feature_1_shade.on {...} 
```

jQuery

```
$("#feature_1_hitbox").hover(
    function(){ $('#feature_1_shade').addClass('on'); },
    function(){ $('#feature_1_shade').removeClass('on'); }
); 
```

等效的 JavaScript 是：

```
var obj = document.getElementById("feature_1_hitbox");
obj.onmouseover = function(){
    document.getElementById("feature_1_shade").className = "on";
}
obj.onmouseout = function(){
    document.getElementById("feature_1_shade").className = "";
} 
```

注意：如果`#feature_1_shade`使用任何其他类，则在使用纯 JavaScript 添加或删除类时必须小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T09:19:07.400

它不起作用的原因是因为对于 CSS 选择器，#container:hover #shade{} 实际上将 ID #shade 设置在 ID #container 内。在您的标记代码中，#shade 嵌套在 #container 中，但不在 #hitbox 中。也许添加另一个“不可见 div”（不透明度：0），其大小和位置与 hitbox 完全相同，并在不可见 div 内包含阴影，然后使用悬停选择器设置不可见 div 的样式可能会起作用。示例：#invisible_hitbox_hover:hover #shade{}

# android - 将 github 中的克隆导入 Eclipse 并构建路径错误

> ID：11181403
> 
> 赞同：1
> 
> 时间：2012-06-24T21:39:17.530
> 
> 标签：android, eclipse, import, buildpath

我正在尝试从 git 中提取一个项目，特别是这个：[https](https://github.com/pocmo/Yaaic) ://github.com/pocmo/Yaaic 。

它是 android 中的 IRC 客户端库，我想用它来将 IRC 客户端放入 android 应用程序中。从这个项目的根目录中可以看到，没有 AndroidManifest.xml，但有一个名为“application”的目录，其中包含一个清单文件。由此我假设应用程序目录包含一个演示 IRC 客户端（Yaaic 应用程序本身）的示例 Android 应用程序。但是，当我将应用程序目录作为项目导入 Eclipse 时，它​​充满了构建路径错误和涉及使用不存在的东西的结果错误。我尝试将我直接从 git hub 中提取的整个目录作为项目导入，但仍然存在很多构建路径问题。

至于项目本身，我不确定它是 Yaaic 应用程序的源代码还是其他 Android 项目中使用的库或平台的源代码。见鬼，我什至不确定是否可以将 Yaaic 项目用作我自己的 Android 应用程序中的 IRC 功能库。

我对 Eclipse 上的 Android 开发和开发相当陌生，一般来说，只有大学的一些虚拟项目和 android 开发网站上的教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:27:02.307

作为 Yaaic 的作者，我应该能够帮助你。:)

您最初的想法是正确的：有一堆文件夹，但“应用程序”文件夹是您要作为项目导入的文件夹。

Yaaic 对其他库有一些依赖关系。我还没有使用依赖管理工具（例如 maven），所以我将所需的库放在“libs”文件夹中。

所以你需要做的是：

1.  为 ActionBarSherlock 创建一个指向 libs/ActionBarSherlock 的 Android 库项目
2.  为指向 libs/ViewPagerIndicator 的 ViewPagerIndicator 创建一个 Android 库项目
3.  为 Yaaic 创建一个指向 application/ 的 Android 项目
4.  根据您的文件系统布局，您可能需要更新其他项目的位置（右键单击项目-> 属性-> android）
5.  确保支持库位于每个项目的构建路径中（应自动使用最新版本的 ADT，因为它位于每个项目的 libs 文件夹中）

Eclipse 可能很糟糕，因此您有时需要“刷新”或“清理”项目才能成功构建它。

我想尽快切换到基于 Maven 的构建。这应该会让事情变得容易得多。;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T13:58:59.423

> 至于项目本身，我不确定它是 Yaaic 应用程序的源代码还是其他 Android 项目中使用的库或平台的源代码。见鬼，我什至不确定是否可以将 Yaaic 项目用作我自己的 Android 应用程序中的 IRC 功能库。

Yaaic 不是一个库，它是一个应用程序。线索是它的全名*Yet Another Android IRC Client* ;-)。但是，您下载的代码是在 GPLv3 下获得许可的，因此只要您遵守条款，就没有什么能阻止您提取项目的一部分供自己使用。

话虽如此，这就是我如何启动和运行它。您已经运行了其中一些步骤，但为了完整起见，我已将它们全部记录下来。

首先，我使用以下命令将 repo 克隆到*Yaaic目录中*

```
git clone http://github.com/pocmo/Yaaic Yaaic 
```

然后在eclipse *import->Existing Project into Workspace*中选择上面创建的目录作为根目录。

您的窗口现在应该如下所示：

![Eclipse 项目导入对话框](../Images/487a3544b2ad082434e9b6f27f69e0a6.png)

我创建的*Yaaic目录在我的工作区下，所以我选择了**Finsh*

提示有关缺少构建路径等的警告。

1.  取消选中*Project->Build Automatically*。
2.  在左侧窗格中选择`ActionBarSherlock`Project 并按*Alt+Enter*以获得项目属性，然后选择*Android*： ![在此处输入图像描述](../Images/1c00df8e72a333a5ff8168523c5b9687.png)
3.  确保如上所述选择了*项目构建目标*（这似乎是灵丹妙药），并且显然选中了*Is Library 。*
4.  选择*确定*并重复该`ViewPageIndicator`项目。
5.  此时我清理了四个新项目，按*F5*刷新并重新启动eclipse。我也可以摸到一只幸运的兔子脚，但手上没有兔子；-p
6.  *重新打开自动构建*以开始构建过程，一旦完成，您应该能够在您的设备或 AVD 上运行 Yaaic 。

# c - fork 再次写入文件句柄

> ID：11181419
> 
> 赞同：2
> 
> 时间：2012-06-24T21:41:11.083
> 
> 标签：c, file, fork, printf

我的代码看起来像这样：

```
//INCLUDES

FILE *file;

void handlesocket(int socket);
int main(int argc, char *argv[])
{
    openlog("daemon", LOG_PID, LOG_USER);
    syslog(LOG_INFO, "daemon started.");
    file = fopen("/var/log/daemon.log","a+");
    fprintf(file,"Opened log file...");

     while (1) {
         pid = fork();
         if (pid == 0)  {
             handlesocket(socket);
             exit(0);
         }
         else close(socket);
     }
}

void handlesocket(int socket)
{
//handle socket
} 
```

基本上，它正在等待一个新的连接，然后自己分叉。（我删除了所有套接字代码，以便于阅读。

我的问题是，每次有新连接进入（并且新的 fork() 被调用）时，`fprintf`似乎都会再次被调用，并且`"Opened log file..."`我的日志中有一个新的连接。

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T21:42:47.683

Fork 完全复制了这个过程——包括 fprintf 使用的缓冲区。您需要在 fork 之前刷新文件句柄，以便您的 fork 进程以 io buffers clear 开始：

```
fprintf( file, "opening log file\n" );
fflush( file ); 
```

# haskell - 无法在 Windows 中安装 cabal-dev

> ID：11181428
> 
> 赞同：2
> 
> 时间：2012-06-24T21:42:24.740
> 
> 标签：haskell, cabal, cabal-install

是的......我放弃了：

```
PS D:\Projects\yesod\webapp> cabal install cabal-dev --force-reinstalls
Resolving dependencies...
Warning: The following packages are likely to be broken by the reinstalls:
haskell-platform-2012.2.0.0
Continuing even though the plan contains dangerous reinstalls.
Configuring network-2.3.0.14...
cabal.exe: The package has a './configure' script. This requires a Unix
compatibility toolchain such as MinGW+MSYS or Cygwin.
cabal.exe: Error: some packages failed to install:
HTTP-4000.2.3 depends on network-2.3.0.14 which failed to install.
cabal-dev-0.9.1 depends on network-2.3.0.14 which failed to install.
network-2.3.0.14 failed during the configure step. The exception was:
ExitFailure 1 
```

PS：顺便说一句，我正在使用 Haskell 平台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:03:45.283

是包本身的问题。有[拉取请求](https://github.com/creswick/cabal-dev/pull/55)来解决这个问题。

[您可以从hackage](http://hackage.haskell.org/packages/archive/cabal-dev/0.9.1/cabal-dev-0.9.1.tar.gz)获取 cabal-dev 存档，解压缩并自己修复 .cabal 文件。

# objective-c - nscfstring 文本无法识别的选择器发送到实例

> ID：11181431
> 
> 赞同：0
> 
> 时间：2012-06-24T21:42:46.987
> 
> 标签：objective-c, memory-management, ios4

我试图从前 3 个小时中找出这个错误。通过搜索，我知道这个错误与内存管理有关，但我没有弄清楚我做错了什么。

我已经声明了这 4 个标签：

```
@interface InteractiveHistory : UITableViewController {
UILabel *date;
UILabel *startTime;
UILabel *cal;
UILabel *duration;
} 
```

然后创建属性并合成它们。在 viewDidLoad 中，我都像这样初始化：

```
date = [[UILabel alloc] init]; 
```

我还在 dealloc() 方法中释放了它们。

我想要做的是使用这 4 个标签在表格的单元格中写一些文本。文本将取决于 indexPath。

在 cellForRowAtIndexPath 方法中，仅显示 2 个标签并指示错误行：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

        NSLog(@"constructing cell");

        //set up labels text

        date = [NSString stringWithFormat:@"%@",[[int_data objectAtIndex:indexPath.row] objectForKey:@"Date"]];

 NSLog(@"%@",date.text); //App crashes at this line
       [date setTag:1];

        startTime = [NSString stringWithFormat:@"%@",[[int_data objectAtIndex:indexPath.row] objectForKey:@"Start Time"]]; 

        //setting tag and position of label
        [startTime setTag:2];
        CGRect labelpos =  startTime.frame;
        labelpos.origin.y = date.bounds.size.height + 2;
        startTime.frame = labelpos;

        NSLog(@"labels set");

   // Configure the cell...
    [[cell contentView] addSubview:date];
    [[cell contentView] addSubview:startTime];
    [[cell contentView] addSubview:duration];
    [[cell contentView] addSubview:cal];

    NSLog(@"A cell set");

    }      

    return cell;
} 
```

谁能告诉我我做错了什么？我希望我的问题很清楚..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T21:54:37.003

该行：

```
date = [NSString stringWithFormat:@"%@",[[int_data objectAtIndex:indexPath.row] objectForKey:@"Date"]]; 
```

应该：

```
date.text = [NSString stringWithFormat:@"%@",[[int_data objectAtIndex:indexPath.row] objectForKey:@"Date"]]; 
```

否则，您的`date`指针将设置为 NSString 的实例，而不是设置其内容。

编辑：

正如 danh 正确指出的那样，您将遇到与`startTime`.

# spring - 在本地aws vs jetty上的tomcat上部署时无法创建bean

> ID：11181438
> 
> 赞同：0
> 
> 时间：2012-06-24T21:43:45.577
> 
> 标签：spring, hibernate, amazon-web-services, tomcat6, maven-jetty-plugin

我的构建使用码头在本地运行，但是当我尝试通过 tomcat6 在我的 aws 服务器上部署战争时，我收到以下错误。最初，我得到了无法创建 PoolableConnectionFactory，但我已经将我的 url 固定到了 db。不幸的是，除了下面的跟踪之外，我在详细日志中没有看到任何其他错误。还有什么问题？或者我还能尝试什么？任何想法表示赞赏！

错误 org.springframework.web.context.ContextLoader - 上下文初始化失败 org.springframework.beans.factory.UnsatisfiedDependencyException：创建 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义的名称为“userManager”的 bean 时出错：表示不满足的依赖关系通过类型为 [UserDaoImpl] 的索引为 0 的构造函数参数：：没有为依赖项找到类型为 [UserDaoImpl] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注解：{}; 嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [UserDaoImpl] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注释：org.springframework.beans.factory.support 中的 {}。

## 更新

我在日志中发现了以下内容，想知道我创建 bean 的方式是否无法在服务器上正确处理：

org.springframework.web.context.support.XmlWebApplicationContext - Bean 'sessionFactory' 不符合被所有 BeanPostProcessors 处理的条件（例如：不符合自动代理的条件）

我的 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:p="http://www.springframework.org/schema/p"  
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xmlns:aop="http://www.springframework.org/schema/aop" 
    xmlns:jee="http://www.springframework.org/schema/jee" 
    xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd         http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!--  to deal w/hibernate transaction types -->
    <aop:config>
        <aop:pointcut id="managerPC" expression="execution(* com.jmt.service..*Manager.*(..))"/>
        <aop:advisor id="managerTx" advice-ref="txManagerAdvice" pointcut-ref="managerPC" order="10"/>
    </aop:config>
    <tx:advice id="txManagerAdvice">
        <tx:attributes>            
            <tx:method name="save*" rollback-for="DuplicateNameException,UserExistsException" isolation="READ_COMMITTED"/>
            <tx:method name="create*" rollback-for="DuplicateNameException,UserExistsException" isolation="READ_COMMITTED"/>            
            <tx:method name="add*" rollback-for="DuplicateNameException,UserExistsException" isolation="READ_COMMITTED"/>            
            <tx:method name="update*" rollback-for="DuplicateNameException,UserExistsException" isolation="READ_COMMITTED"/>  
            <tx:method name="import*" rollback-for="DuplicateNameException,UserExistsException" isolation="READ_COMMITTED"/>          
            <tx:method name="change*"  isolation="READ_COMMITTED"/>
            <tx:method name="copy*"  isolation="READ_COMMITTED"/>
            <tx:method name="remove*" isolation="READ_COMMITTED"/>
            <tx:method name="delete*" isolation="READ_COMMITTED"/>
            <tx:method name="send*" isolation="READ_COMMITTED"/>            
            <tx:method name="set*" propagation="NOT_SUPPORTED"/>
            <tx:method name="batch*" propagation="NEVER"/>
            <tx:method name="wipe*" propagation="NEVER"/>
            <tx:method name="*" propagation="SUPPORTS" read-only="true"/>            
        </tx:attributes>
    </tx:advice>      
    <!-- end aop for hibernate transactions-->

    <context:property-placeholder location="classpath*:META-INF/spring/*.properties"/>
    <context:spring-configured/>
    <context:component-scan base-package="com.jmt">
        <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    </context:component-scan>

    <bean class="com.jmt.model.PinEntity"/>
    <bean class="com.jmt.model.UserEntity"/>

    <!--bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
            <property name="basename" value="messages"/>
    </bean-->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="org.postgresql.Driver"/>
        <property name="url" value="${jdbc.url}"/>
        <property name="username" value="${jdbc.username}"/>
        <property name="password" value="${jdbc.password}"/>
        <property name="poolPreparedStatements" value="true"/>
        <property name="defaultAutoCommit" value="true"/>
        <property name="maxActive" value="100"/>
        <property name="maxIdle" value="30"/>
        <property name="maxWait" value="1000"/>
        <property name="removeAbandoned" value="true"/>
        <property name="removeAbandonedTimeout" value="60"/>
        <property name="logAbandoned" value="true"/>
        <property name="testOnBorrow" value="false"/>
        <property name="testWhileIdle" value="true"/>
        <property name="timeBetweenEvictionRunsMillis" value="10000"/>
        <property name="minEvictableIdleTimeMillis" value="60000"/>        
    </bean>   

    <tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>

        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                <prop key="hibernate.query.substitutions">true 'Y', false 'N'</prop>
                <prop key="hibernate.jdbc.batch_size">15</prop>   
                <prop key="hibernate.connection.isolation">2</prop>
            </props>       
        </property>
         <property name="packagesToScan">
            <list>
                <value>com.jmt.model</value>
            </list>
        </property>        
    </bean> 
    <bean id="hibernateDaoSupport" abstract="true"
class="org.springframework.orm.hibernate3.support.HibernateDaoSupport">
<property name="sessionFactory" ref="sessionFactory"/>
</bean>
    <bean id="hibernateHelper" class="org.springframework.orm.hibernate3.HibernateTemplate" >
        <constructor-arg ref="sessionFactory"/>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
        <property name="hibernateManagedSession" value="true"/>
    </bean>

    <bean id="pinDao" class="com.jmt.hibernate.dao.PinDaoImpl">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>
    <bean id="userDao" class="com.jmt.hibernate.dao.UserDaoImpl">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

      <bean id="pinManager" class="com.jmt.service.PinManagerImpl"  autowire="byName" />
      <bean id="userManager" class="com.jmt.service.UserManagerImpl"  autowire="byName" />

      <bean id="homeController" class="com.jmt.controller.HomeController" scope="prototype"  autowire="byName" />
      <bean id="mapCreationForm" class="com.jmt.controller.forms.MapCreationForm" scope="prototype"  autowire="byName" />

</beans>
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:08:10.713

似乎取出自动装配注释并在 applicationContext.xml 中将 aop:scoped-proxy 添加到我的 bean 解决了这个问题！

```
<bean id="userDao" class="com.jmt.hibernate.dao.UserDaoImpl">
<aop:scoped-proxy proxy-target-class="false" />             
<constructor-arg ref="sessionFactory"/>
</bean> 
```

# python - 从 Python 子进程向标准输入发送命令，即使标准输入不是终端？

> ID：11181439
> 
> 赞同：2
> 
> 时间：2012-06-24T21:43:51.037
> 
> 标签：python, stdin, subprocess

在 Python 代码中，我经常向 shell 发送命令并使用

```
import subprocess as S
x = subprocess.Popen('<command>', shell=True, stdout=S.PIPE)
x.stdout.read() 
```

, 有`<command>`问题的 shell 命令在哪里。但是，我发现当在子进程中发出此指令时`stty size`，例如对于 command ，shell 会响应

```
stty: stdin isn't a terminal 
```

我的指令返回一个空字符串。遵循[http://docs.python.org/library/subprocess#popen-objects](http://docs.python.org/library/subprocess#popen-objects)上的 Python 文档，我也尝试替换`stdout.read()`为`communicate()`：

```
x = subprocess.Popen('<command>', shell=True, stdin=S.PIP, stdout=S.PIPE)
x.stdout.read() 
```

但是外壳仍然以相同的方式响应。

我的问题：如何让 Python 将标准输入视为终端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T00:57:17.513

并不是说 Python 没有将标准输入视为终端。如果 stdin 是一个终端，Python 可能会这样对待它。但子进程的标准输入可能不是。在第二种情况下，它绝对不是终端，因为您明确地使用了管道。

您可能无法让 stty 将管道视为终端，除非更改其工作方式。但这可能不是你想要做的，无论如何。

但是，如果 Python 自己的标准输入是 tty，那么您的第一个示例应该可以工作，因为 stty 应该从 shell 继承它。

也许我不清楚您所说的“当此指令在子流程中发出时”是什么意思。从技术上讲，Un*x 系统上除了 init/launchd 之外的所有内容都是子进程。

# android - 我如何执行 或一个 以编程方式？

> ID：11181440
> 
> 赞同：1
> 
> 时间：2012-06-24T21:43:53.570
> 
> 标签：android, merge, include

我正在从输入脚本生成显示。顶部和底部部分是可重复的——就像在合并或包含文件中一样——除了一个可以通过“setText()”指令轻松处理的微小文本更改。中间部分由脚本决定，可以是可变长度和内容。然后将生成的视图作为子视图添加到 ScrollView。

目前，我有一个脚本字符串，它描述了顶部和底部部分以及中间的“标记”，它被用户数据库提供的变量“中间部分”脚本替换。如果我可以在脚本中加入“合并”或“包含”功能，我相信可以更有效地表达和生成这种结构。这意味着我必须能够在 Java 代码中实现合并或包含函数。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:54:19.007

这是我在最近的一个项目中用来生成`LinearLayout`完整重复的代码的一部分。`LinearLayout`它的功能与 相同`<include />`，通过扩展布局 XML 文件。

```
LayoutInflater li = LayoutInflater.from(/* Your context here */);
ViewGroup layoutTarget = /* Some layout object */;

// ...

for (int i = 0; i < items.size(); i++) {
    // ...

    final View v = li.inflate(R.layout.name_of_your_layout, layoutTarget, false);
    layoutTarget.addView(v);
} 
```

您应该能够根据自己的需要进行调整。这里的关键是调用该`.inflate()`方法，该方法会创建该布局的一个新实例。

# python - 如何在应用程序之外访问烧瓶应用程序配置？

> ID：11181445
> 
> 赞同：5
> 
> 时间：2012-06-24T21:44:57.773
> 
> 标签：python, web, flask

我不确定这是否是特定于烧瓶的问题，或者我只是缺乏对 python 导入机制的理解，但我在烧瓶 Web 应用程序中遇到了一些问题。这是我的应用程序的布局：

```
/myapp
  /INSTALL
  /TODO
  /run.py
  /instance
    /application.cfg
  /myapp
    /static
    /templates
    /__init__.py
    /config.py
    /service.py 
```

config.py 文件存储默认应用配置，application.cfg 存储实例配置。它们看起来像这样：

```
DEBUG = False
TESTING = False
SECRET_KEY = "please_replace_me" 
```

**这就是我在init** .py中设置应用程序的方式：

```
import flask
app = Flask(__name__, instance_relative_config=True)
app.config.from_object("myapp.config")
app.config.from_pyfyle("application.cfg", silent=True) 
```

现在我想要的是从 service.py 访问 app.config 对象，该对象不包含在**init** .py 或作为 Web 应用程序一部分的任何其他模块中。即这就是我希望我的 service.py 文件读取的方式：

```
from somewhere.somehow import app

def run():
  do_stuff(app.config["CONFIG_OPTION"]) 
```

问题是 service.py 文件必须在包内，所以我不能将它上移一个文件夹并导入 myapp。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:05:11.280

如果要导入位于父目录中的模块，一种可能的方法是在导入之前将父目录添加到 sys.path：

```
cmd_folder = os.path.abspath(os.path.split(inspect.getfile(inspect.currentframe() ))[0])
sys.path.append(cmd_folder+'/../') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T00:28:40.067

Python 相对导入是相对于`__main__`.

如果我正确地假设你`run.py`是`__main__`. 在这种情况下，您应该能够：

```
from myapp import app 
```

# php - PHP - 如何从 pop3 电子邮件帐户访问和检索重要数据？

> ID：11181450
> 
> 赞同：0
> 
> 时间：2012-06-24T21:45:31.540
> 
> 标签：php, email, pop3

我正在尝试创建一个 php 程序，该程序将检查主题行中是否存在任何带有关键字的电子邮件，然后它将检索电子邮件的内容并将其传递给变量。

谁能向我提供一些有关如何完成此任务的有用信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T01:41:21.520

如果可以更好的使用 imap 协议，可以试试[PHP 的 imap 功能](http://php.net/manual/en/book.imap.php)

```
<?php
    $imap = imap_open("{mail.yourserver.com:143}INBOX", "username", "password");
    $message_count = imap_num_msg($imap);

    for ($i = 1; $i <= $message_count; ++$i) {
        $header = imap_header($imap, $i);
        if (preg_match('#keyword#',$header['subject'])) {
             $body = imap_body($imap, $i);
             // your action here
        }
    }

    imap_close($imap);
?> 
```

# node.js - 如何在所述数组完成加载后将数组传递给玉部分

> ID：11181459
> 
> 赞同：0
> 
> 时间：2012-06-24T21:47:23.467
> 
> 标签：node.js, express, pug

我有一个很好的紧密阵列，如果我只能在完成组装后将它传递给部分，它会很好地渲染成玉部分。（我已经通过预加载确认了它）

我现在遇到的问题并且在任何地方都找不到答案是，当我运行我的应用程序时，我无法使用或显示数组，直到它自己完成组装/加载......（它被填充了抓取的数据） - 所以我'正在使用 async 来运行构建数组的函数。效果很好。- 然后我在整个构建完成后调用一个函数 done() 我确认它确实构建了 - 现在我只想将数组传递给我的部分但似乎我不能这样做除非使用 Ajax + JSON :( 我试图避免这种情况，因为部分已经内置了可靠的迭代。

- 有没有人知道在应用程序已经运行（不使用套接字）后填充部分的简单方法？

```
//in my main app, web.js
//assume I have all the dependencies loaded
//setup an empty array
var items = new Array();

// then run 'fetch' which populates array with scraped data, takes about 10 seconds 
app.get('/', function(req, res){
    fetch(p.u[0]);  //builds the array, returns items[] 
    res.render('index.jade', {
        title: 'my first node.js app',
        item: 'items' //what the partial needs, this throws an error if I don't 
    })
});

//have to use this to avoid initial error due to array being empty/undefined when app
//first starts 
var params = {
    "namespace": {
        "items": [
            "an unnecessary value"
        ]
    }
};

//and finally this is what's called once the array is finished assembling itself
function displayItems(){
    app.get('/', function(req, res){
      req.render('items.jade', {item : 'items'})
    })  
}

//index.jade
//setup my partial
//script is there to avoid initial error due to array being empty/undefined when app
//first starts
div.list
  script
    if(namespace.items) {
      if(namespace.items.length) {
        != partial('item', items)
      }
    }

//and my partial, _items.jade
//express docs confirm that jade would iterate over each item in the items array 
//with this jade markup
ul.list
  li.date #{item.date}
  li.descrip #{item.descrip}
  li.reas #{item.reas}
  li.cmpny #{item.cmpny}
  li.photo #{item.photo} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T21:57:43.740

已经晚了，我不完全确定我理解你的问题，但如果你愿意等待 10 秒一次，你可以这样做并缓存结果：

```
var items = null;

app.get('/', function(req, res){
    function done(){
       res.render('index.jade', {
          title: 'my first node.js app',
          item: items
       }):
    }
    if( items == null ){
       return fetch(p.u[0], function(err,fetchedItems){
          if( err ) throw err;
          items = fetchedItems;
          return done();
       });
    }
    return done();
}); 
```

希望这可以帮助。

也可能不是：您在服务器端使用jade 来组装页面，然后再通过网络发送它们。

如果我理解正确，您想向用户显示一个页面，并在 10 秒后在同一页面上显示结果（项目）而不重​​新加载。如果不使用 Sockets 或 Ajax，我就无法做到这一点。

您可以等到数据准备好，或者显示一个页面，说数据当前正在加载，然后将其关闭。

partials 是页面片段或 html 片段，可以像这样包含在 .jade 中，也可以像这样`!=partial(template name[, options])`从 express 中调用`res.partial(template name[, options]);`：所有这些都发生在服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:58:17.380

如果您尝试同步执行此操作，那么您将挫败 node.js 和 Express 背后的整个想法。如果您的应用程序正在等待生成此数组的查询/脚本，那么接下来的 http 请求会发生什么？您应该重组您的应用程序以利用节点的异步方法并将渲染作为回调传递：

```
app.get('/', function(req, res){
    var renderView = function(items) {
        return res.render('index.jade', {
            title: 'my first node.js app',
            item: items
        })
    };

    fetch(p.u[0], renderView);
}); 
```

而且您必须修改 fetch() 以接受第二个参数（回调），您必须使用 items 对象调用它。

# tsql - powershell：输出仅显示受 sql 脚本影响的行数

> ID：11181462
> 
> 赞同：0
> 
> 时间：2012-06-24T21:47:57.743
> 
> 标签：tsql, powershell-2.0

我在 powershell 中运行一个非常简单的 TSQL 代码。但输出只显示受影响的行数，而不是实际结果。代码如下：

```
function test([string] $Hostname )
{
    try
    {
    $con="server=$Hostname;database=master;Integrated security=sspi"
    $da=New-Object System.Data.SqlClient.SqlDataAdapter ("                      
                 select * from sysdatabases 
                ",$con)
    $dt=New-Object System.Data.DataTable
    $da.fill($dt)|Out-Null

    $da.fill($dt) | Format-table -AutoSize
    }
    catch [Exception]
    {
        ## Do something with the exception 
        write-host "Could not run test function for "+$Hostname
    }

}
foreach ($Hostname in Get-Content $ServerList)
{
    test($Hostname)
} 
```

请问有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T01:18:06.037

我建议安装 SQL 客户端工具并使用 SqlServerCmdletSnapin100，而不必通过 System.Data.SqlClient 创建和管理所有内容。然后您的代码将变为：

```
function test([string] $Hostname )
{
    try {
        invoke-sqlcmd -server $hostname -database master -query "select * from sysdatabases" |ft -auto
    } catch [Exception] {
        ## Do something with the exception 
        write-host "Could not run test function for "+$Hostname
    }
} 
```

[SqlDAtaAdapter.Fill()](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)返回已填充*的行数*，这就是你得到你得到的结果的原因。如果您想以这种方式继续，您需要遍历已填充的 DataTable，正如 paulsm4 指出的那样。

# css - 使用手写笔解析时 bootstrap.styl 中断

> ID：11181464
> 
> 赞同：2
> 
> 时间：2012-06-24T21:48:02.860
> 
> 标签：css, node.js, twitter-bootstrap, express, stylus

我正在尝试使用 stylus 和 twitter bootstrap 2.04 版的 css 预处理器。当我下载 boostrap 时，我运行“stylus --css < bootstrap.css > bootstrap.styl”，这样我就可以创建一个 bootstrap.styl 文件。但是，当我的浏览器尝试解析 bootstrap.styl 时出现以下错误

```
ParseError: /Users/user/Projects/node_tutorials/project/static/css/bootstrap.styl:1835
   1831|   background-position: -313px -119px
   1832| 
   1833| .icon-retweet
   1834|   background-position: -336px -120px
 > 1835| 
   1836| .icon-shopping-cart
   1837|   background-position: -360px -120px
   1838| 

expected "indent", got "outdent"

at Parser.error (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:166:11)
at Parser.expect (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:194:12)
at Parser.block (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:597:12)
at Parser.selector (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:1099:24)
at Parser.property (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:1013:47)
at Parser.ident (/Users//Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:970:25)
at Parser.stmt (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:546:25)
at Parser.statement (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:458:21)
at Parser.block (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:609:21)
at Parser.selector (/Users/user/Projects/node_tutorials/project/node_modules/stylus/lib/parser.js:1099:24) 
```

我检查了额外的空格，甚至已经对文件进行了十六进制转储，似乎没有任何问题。任何人都可以识别问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T05:37:22.493

@Jonathan 是对的。问题是由过滤器引起的

我找到了使用手写笔功能的解决方法`unquote`

只需对 bootstrap.styl进行正则表达式替换`filter: (.+)$`=>`filter: unquote("\1")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T05:57:10.440

你检查了*整个*文件的缩进吗？这种消息通常是由在解析器发现错误之前定位的错误引起的。

# javascript - 如果主要的 CSS 代码是在客户端生成的，可以吗？

> ID：11181469
> 
> 赞同：0
> 
> 时间：2012-06-24T21:48:42.133
> 
> 标签：javascript, css, performance, client-side

我有一个将 LESS 代码编译成 CSS 的构建过程，然后将其注入到 JavaScript 字符串中，并与主要的缩小 .js 代码连接。然后，该主代码会将 CSS 字符串注入页面。

这样做的一个优点是只需要一个 HTTP 请求即可启动和运行样式和脚本。

但是，这样做有什么注意事项吗？

**编辑**

很多人认为我在做一个宣传册类型的网站。实际上，我正在开发一个单页网络应用程序。因此，如果 JavaScript 被禁用，该应用程序无论如何都是完全无用的。但从可用性的角度来看，最好有*一些*样式可以告诉那些禁用 JavaScript 的人需要 JS 才能运行应用程序。

**编辑 2**

我正在 Backbone.js 中构建一个 Web 应用程序。而且，我有多种观点。通过脚本标签加载它们是一个糟糕的主意。而且，依赖管理会很糟糕。因此，我使用 RequireJS 来帮助我处理所有依赖项。

但是 RequireJS 也有这个简洁的小插件，可以让你加载可以在应用程序中使用的纯文本文件。

因此，我受到启发，让每个视图在自己的 LESS 文件中都有自己的风格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:51:34.573

1.  可以忽略不计，如果有任何性能好处。
2.  如果 JS 被禁用，则没有样式
3.  FOUC（无样式内容的 Flash）
4.  流氓 JS 错误可能会禁用所有样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:59:20.323

如果您正确编写 CSS，那么在您网站的整个访问期间，无论如何都只会有 1 个 HTTP 请求。提供您确保它被缓存。你的优势不是一个非常重要的优势，如果有的话。

JavaScript 不仅可以被用户禁用，而且有时也可以被公司防火墙阻止，这取决于对那里的指令类型或从何处提供服务的启发式方法。例如，您的*一些*JavaScript 文件可能会运行，而*另一些*可能不会。这在我工作中经常发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T21:52:03.067

如果您在 css 插入代码之前以某种方式遇到 js 错误，则您的页面可能根本没有任何样式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T21:51:59.283

这对性能来说很糟糕，不应该在生产代码中使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T21:52:43.810

由于 CSS 可以在客户端被覆盖，我认为在客户端生成它没有任何问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T21:54:59.183

FOUC（无样式内容的 Flash）。

# android - 获取 dom xml 项作为字符串并用作数组

> ID：11181470
> 
> 赞同：0
> 
> 时间：2012-06-24T21:49:43.250
> 
> 标签：android, xml, arrays, parsing, dom

我在网上搜索了几个小时，但我被困住了。

我使用了一个解析 xml 的教程，我得出的结论是最好使用 DOM xml 解析器。主要是因为我解析的内容只包含 30 项。

xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<sliderlist>
<item>
<urlslide>http://www.google.com</urlslide>
</item>
<item>
<urlslide>http://www.stackoverflow.com</urlslide>
</item>
</sliderlist> 
```

DOM 解析器（大部分来自教程）：

```
TextView urlslide[];

        try {

            URL url = new URL("http://www.mydomain.com/my.xml");
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();

            NodeList nodeList = doc.getElementsByTagName("item");

            /** Assign textview array lenght by arraylist size */
            urlslide = new TextView[nodeList.getLength()];

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);

                urlslide[i] = new TextView(this);

                Element fstElmnt = (Element) node;
                NodeList nameList = fstElmnt.getElementsByTagName("urlslide");
                Element nameElement = (Element) nameList.item(0);
                nameList = nameElement.getChildNodes();
                urlslide[i].setText(((Node) nameList.item(0)).getNodeValue());

                //layout.addView(urlslide[i]);

            }
        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        } 
```

然后我需要解析内容的部分填充我的数组（现在使用 values/res 文件夹中的 xml）：

```
 mTimer=new CountDownTimer(15000, 1000) {

    String[] myArray = getResources().getStringArray(R.array.testArray);
    //String[] myArray={"http://www.upc.nl/","http://www.google.com","http://www.flyerwall.nl"};    
     //<- String should be read from landingpage.

        int currentIndex=0; 
        public void onTick(long millisUntilFinished) {
             //if (currentIndex<myArray.length) {
                //number.setText("seconds remaining: " +  millisUntilFinished / 1000);
                //currentIndex++;
             //}
        }

        public void onFinish() {
            if (currentIndex<myArray.length) {
                //number.setText("done!");
                mWebView.loadUrl(myArray[currentIndex]);
                currentIndex++;
            } else {
                currentIndex=0;//reset current url to 0
                if (currentIndex<myArray.length)
                //number.setText("done!");
                mWebView.loadUrl(myArray[currentIndex]);
                currentIndex++;
                mTimer.start(); //activate the loop
            }

                mTimer.start();//first time start

        }
     }; 
```

我看了这么多示例代码，以至于我不再有任何线索，但我的胆量说它应该很容易完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:57:41.537

与其尝试在一次运行中同时解析 XML 和构建 UI 元素，不如将其拆分为单独的步骤。不仅因为这会简化您的问题（分而治之），还因为您希望在后台线程中执行网络请求和解析 XML 文档，而所有 UI 工作都应该在应用程序的主 ( UI）线程。

不幸的是，我并不完全清楚您遇到的具体步骤。如果它是从 XML 文档中收集实际数据，您应该为代码设置断点并一步一步地检查它，以查看您遇到问题的确切位置。不过，我确实看到了一些简化此步骤的机会。

例如：无需获取`<item>...</item>`元素列表，只需获取`<urlslide>...</urlslide>`您感兴趣的元素即可。

```
NodeList nodeList = doc.getElementsByTagName("urlslide");
List<String> urlList = new ArrayList<String>();

// iterating over nodes omitted... simply add the value of each node to the list
urlList.add(nodeList.item(i).getValue()); 
```

那应该给你一个`NodeList`只包含'urlslide'元素的东西。我假设您最终会希望得到一个 url 列表，因此创建例如 an`List<String>`来填充节点的值可能是一个想法。如前所述，您不想在主线程上执行任何可能长时间运行的任务，因为这会阻止用户交互并很可能导致臭名昭著的 Android 无响应 (ANR) 消息。因此，我建议您将此逻辑包装在类似[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html).

现在您有了网址，剩下的就是将它们作为列表显示给用户。如果这确实是您所追求的，那么该[`ListView`](http://developer.android.com/reference/android/widget/ListView.html)小部件就是完美的匹配。正如您的代码当前显示的那样，我强烈建议您不要`TextView`为每个 url 创建一个单独的 URL。使用 an 的好处`AsyncTask`是它会`onPostExecute(...)`在后台工作完成后自动调用。这正是`ListView`用解析的数据填充的正确时间点。

有许多示例（在 SO 和 API 文档中都有）可以向您展示如何使用`AsyncTask`等`ListView`。如果您需要更多帮助，请尽可能具体地说明您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:02:31.837

只需将您的文档传递给此函数

```
private List<string> getSlidesFromDocument(Document doc)
{
    NodeList nodeList = doc.getElementsByTagName("urlslide");
    List<String> slides = new ArrayList<String>();

    for(Node node : nodelist) slides.add(node.getValue());

    return slides;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T23:04:05.900

最后我想通了：

```
try {

    URL url = new URL("http://www.mydomain.com/my.xml");
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document doc = db.parse(new InputSource(url.openStream()));
    doc.getDocumentElement().normalize();

    NodeList nodeList = doc.getElementsByTagName("item");

    final List<String> urlList = new ArrayList<String>();

    for (int i = 0; i < nodeList.getLength(); i++) {

    Node node = nodeList.item(i);

    Element fstElmnt = (Element) node;
    NodeList nameList = fstElmnt.getElementsByTagName("urlslide");
    Element nameElement = (Element) nameList.item(0);
    nameList = nameElement.getChildNodes();

    urlList.add(((Node) nameList.item(0)).getNodeValue());

    }

    mTimer=new CountDownTimer(15000, 1000) {

    Object[] myArray = urlList.toArray();
    .........more code

    };//CountDownTimer ENDS
    } catch (Exception e) {
        System.out.println("XML Pasing Exception = " + e);
        } 
```

# winforms - 将 XElement 转换为数据表。无法正确处理

> ID：11181471
> 
> 赞同：0
> 
> 时间：2012-06-24T21:50:09.800
> 
> 标签：winforms, datagridview, linq-to-xml

似乎无法遍历 XElement 并构建数据表。我的 XElement 将在运行时构建，所以我事先不知道是什么样子我正在尝试将 XElement 中的任何内容转换为数据表，以便我可以将其绑定到 datagriview。

任何想法我做错了什么？

```
 static void Main()
    {
        //at runtime could be any object
        const string testXElement = @"<MyObject xmlns=""http://www.test.com/"">
          <code>Test</code>
          <Date>2012-06-24T00:00:00+01:00</Date>
          <Name>John</Name>
        </MyObject>";

        XElement element = XElement.Parse(testXElement);
        var dgv=new DataGridView();

        //Build dataTable from it or 
        var dt=new DataTable();
        XNamespace ns = "http://www.test.com/";
        foreach (var x in element.Elements(ns + "MyObject"))
        {
         //I am never stepping into this one.
           DataColumn dc=new DataColumn();
           dc.ColumnName = x.Name.ToString();
           DataRow row = dt.NewRow();
           row[dc] = x.Value;           
        }
        dgv.DataSource = dt;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:59:54.093

试试这个：

```
static void Main()
    {
        //at runtime could be any object
        const string testXElement = @"<MyObject xmlns=""http://www.test.com/"">
          <code>Test</code>
          <Date>2012-06-24T00:00:00+01:00</Date>
          <Name>John</Name>
        </MyObject>";

        var dgv=new DataGridView();

        //Build dataTable from it or 
        var dt=new DataTable();
 XmlReader rdr = XmlReader.Create(new System.IO.StringReader(testXElement));
  while (rdr.Read())
  {
           DataColumn dc=new DataColumn();
            dc.ColumnName = x.Name.ToString();
           DataRow row = dt.NewRow();
            row[dc] = x.Value;

        }
        dgv.DataSource = dt;
    } 
```

# sql - SQL NOT IN 解释

> ID：11181472
> 
> 赞同：2
> 
> 时间：2012-06-24T21:50:19.177
> 
> 标签：sql

在尝试创建一个实际上非常简单的 SQL 语句时，我发现自己迷失了方向。

我有一个包含 3 个表的数据库：

*   食谱 - 存储一些用于烹饪的食谱名称
*   配料食谱 - 将配料与食谱联系起来
*   成分 - 食谱使用的成分。

它像这样存储以使其双重清晰：

食谱：

```
编号 | 姓名
 1 | 烤宽面条
 2 | 金枪鱼配西红柿

```

配料：

```
编号 | 姓名
 1 | 千层面
 2 | 肉
 3 | 番茄
 4 | 金枪鱼

```

并加入表成分_食谱：

```
成分ID | recipes_id
            1 | 1
            2 | 1
            3 | 1
            3 | 2
            4 | 2

```

正如你所看到的，有 2 种非常美味的食谱，我至少应该给它们一些香料。但我之前想做的是按成分选择食谱。

我想让我所有的食谱都有肉**和**西红柿：

```
SELECT recipes.name FROM recipes r
INNER JOIN ingredients_recipes ir ON ir.recipes_id = r.id
WHERE ir.ingredient_id IN ( 2 ) AND ir.ingredient_id IN ( 3 ) 
```

-> 烤宽面条.. 好！（我使用 IN 因为可能有一堆成分，比如“西红柿”、“西红柿”、“西红柿、切片”等。）

例如，当我想要所有的食谱都有西红柿但没有金枪鱼时，我尝试了：

```
SELECT recipes.name FROM recipes r
INNER JOIN ingredients_recipes ir ON ir.recipes_id = r.id
WHERE ir.ingredient_id IN ( 2 ) AND ir.ingredient_id NOT IN ( 4 ) 
```

-> 仍然得到金枪鱼 - 因为我加入的行之一不包含成分 4。好的：/

我现在想知道的是，我必须做什么才能得到我想要的结果。我目前通过这样的子选择在我的膝盖上放了一个箭头：

```
SELECT recipes.name FROM recipes r
INNER JOIN ingredients_recipes ir ON ir.recipes_id = r.id
WHERE (
        ir.ingredient_id IN ( 2 ) -- or more..
        AND 
        recipes.id NOT IN ( SELECT recipes_id FROM ingredients_recipes
                             WHERE ingredient_id IN ( 4 ) -- actually i paste names of the ingredients.. but that is not the case. just to shorten the query.. by filling in a comment twice as long..
                            )
      ) 
```

因为我对 mySQL 很陌生，所以我什至不知道要谷歌搜索什么。所以在这种情况下的任何帮助，并且o/c更好的SQL语句将是..

```
 IN(awesome). 
```

编辑：啊，是的，我实际上是在分组.. ;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:01:43.787

这是一种方式。（未经测试）

```
SELECT r.name 
FROM recipes r
JOIN ingredients_recipes ir 
  ON ir.recipe_id = r.id
WHERE EXISTS ( SELECT *
    FROM ingredients_recipes ex
    WHERE ex.recipe_id = r.recipe_id
    AND ex.ingredient_id IN ( 2 , 3 )
    GROUP BY nx.recipe_id
    HAVING COUNT(*) = 2
    ); 
```

count(*) 为 2 的唯一方法是如果 2 和 3 都存在。

另一种方法可能是：（仍未测试）

```
SELECT r.name 
FROM recipes r
JOIN ingredients_recipes ir 
  ON ir.recipe_id = r.id
WHERE EXISTS ( SELECT *
    FROM ingredients_recipes ex
    WHERE ex.recipe_id = r.recipe_id
    AND ex.ingredient_id = 2
    )
AND EXISTS ( SELECT *
    FROM ingredients_recipes ex
    WHERE ex.recipe_id = r.recipe_id
    AND ex.ingredient_id = 3
    ); 
```

更新：（我误读了这个问题）如果您也不希望出现具有特定成分的食谱，*您*可以在查询中添加另一个子查询“leg”：

```
... AND NOT EXISTS ( SELECT *
    FROM ingredients_recipes ex
    WHERE ex.recipe_id = r.recipe_id
    AND ex.ingredient_id IN ( 4,5 )
    ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T22:15:35.613

试试这个灵活的解决方案：

*此查询将检索同时包含成分`1`and`2`且不包含成分`4`and`5`*的食谱：

```
SELECT
    a.*
FROM 
    (
        SELECT aa.id, aa.name
        FROM recipes aa
        INNER JOIN ingredients_recipes bb ON aa.id = bb.recipe_id
        WHERE bb.ingredient_id IN (1,2) --Ingredients to contain
        GROUP BY aa.id, aa.name
        HAVING COUNT(*) = 2 --Count of items in containing list
    ) a
LEFT JOIN
    ingredients_recipes b ON 
        a.id = b.recipe_id AND
        b.ingredient_id IN (4,5) --Ingredients to NOT contain
WHERE 
    b.recipe_id IS NULL 
```

## 解释：

`FROM`子选择获取所有同时***包含***成分`1`和`2`. 如果您希望添加或删除配方中包含的成分，只需调整`IN`列表中的成分 ID，并确保中的值`COUNT(*)`代表该列表中的项目数。它在这里所做的是选择包含成分 1*或*2 的食谱，这意味着某些食谱将仅加入 1 行（如果它只包含一种成分但不包含另一种成分）或 2 行（如果它包含两种成分）。然后`HAVING COUNT(*) = 2`只选择加入**2**行的食谱。

一旦选择了这些食谱，我们现在必须过滤掉**不**包含成分`4`和`5`. 我们用`LEFT JOIN`/来做到这一点`IS NULL`。就像在子选择中一样`FROM`，您可以在列表中添加或删除成分`IN`，除了您不必担心调整`COUNT`.`LEFT JOIN`

# nhibernate - NHibernate中持久性模型的确切含义是什么？

> ID：11181473
> 
> 赞同：0
> 
> 时间：2012-06-24T21:50:48.910
> 
> 标签：nhibernate, orm, fluent-nhibernate

我是 Orm 工作的新手，这个问题发生在我身上，NHibernate 中的**持久性模型是什么以及****瞬态**对象和**持久**对象之间的区别是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:51:35.347

以下是[nhibernate](/questions/tagged/nhibernate "显示标记为“休眠”的问题")[文档](http://www.nhforge.org/doc/nh/en/index.html#architecture-overview)中的定义：

> **持久对象和集合**
> 
> 包含持久状态和业务功能的短寿命单线程对象。这些可能是普通的 POCO，唯一的特殊之处在于它们当前与（恰好一个）ISession 相关联。一旦 Session 关闭，它们将被分离并在任何应用程序层中自由使用（例如，直接作为数据传输对象进出演示文稿）。
> 
> **瞬态对象和集合**
> 
> 当前未与 ISession 关联的持久类的实例。它们可能已由应用程序实例化，但尚未（尚未）持久化，或者它们可能已由关闭的 ISession 实例化。

并在[实例状态](http://www.nhforge.org/doc/nh/en/index.html#architecture-states)：

> 持久类的实例可能处于三种不同状态之一，这些状态是针对持久性上下文定义的。NHibernate ISession 对象是持久化上下文：
> 
> **短暂的**
> 
> 该实例不是，也从未与任何持久性上下文相关联。它没有持久标识（主键值）。
> 
> **执着的**
> 
> 该实例当前与持久性上下文相关联。它有一个持久的身份（主键值），也许还有数据库中的对应行。对于特定的持久性上下文，NHibernate 保证持久性身份等同于 CLR 身份（对象的内存中位置）。
> 
> **分离的**
> 
> 该实例曾经与一个持久性上下文相关联，但该上下文已关闭，或者该实例已序列化到另一个进程。它有一个持久的身份，也许还有数据库中的对应行。对于分离的实例，NHibernate 不保证持久身份和 CLR 身份之间的关系。

# haskell - 有没有办法让 Happstack 重新编译和自动重新加载？

> ID：11181477
> 
> 赞同：1
> 
> 时间：2012-06-24T21:51:14.550
> 
> 标签：haskell, happstack

目前，在使用 happstack 进行构建时，`.exe`每次更改模板或源代码时，我都必须重新编译我的项目，重新启动我的二进制文件（在 Windows 中）。

是否有一些工具可以自动执行此操作，例如 Yesod 或 Snap 的工具？

PS：[这](http://code.google.com/p/happstack/issues/detail?id=220)是我在 happstack bug tracker 上的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:38:47.557

执行此操作的规范方法是使用[happstack-plugins](http://hackage.haskell.org/package/happstack-plugins)；[此博客文章中](http://happstack.blogspot.com/2010/10/recompile-your-haskell-based-templates.html)有一些旧文档。这个包可以使用一些爱，特别是它直接调用 ghc 而不与 cabal 对话，所以让它与 cabal-dev 一起工作需要手动设置 GHC_PACKAGE_PATH 并且如果你使用 cabal 属性，如 hs-source-dirs 或你拥有的扩展配置插件以将正确的标志传递给 ghc...

如果您在 Linux 上，另一种选择是安装 inotify-tools 并编写一个像[这样](https://github.com/dag/kibr/blob/master/Makefile#L34)的 make 任务。

# php - Wordpress 库/SQL 查询来构建新的前端？

> ID：11181478
> 
> 赞同：1
> 
> 时间：2012-06-24T21:51:16.493
> 
> 标签：php, mysql, perl, wordpress

我有一个想要摆脱的 wordpress 安装。在过去的一年中，我们一直在不断地努力跟上各种更新和更改以及管理不同的插件。我意识到我不需要那么多功能，并且对静态页面非常满意。如果我设法放弃安装，我还可以加快速度并更轻松地将内容集成到我们网站的其余部分。

我试图找到一个 PHP 或 Perl 包，我可以用它来轻松查询现有的 WP DB。基本上，我想保留数据库并将前端和后端扔给 WP。然后我只想在顶部添加一个非常小的 PHP 或 Perl 代码层，以显示数据库中的帖子，包括元数据。

如果没有可以使这项工作更容易的包，是否有一些我需要的 SQL 查询的简明概述？我知道我可以在代码库中挖掘它们，但也许有人已经这样做了。谷歌搜索并没有立即出现有用的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:32:06.480

也许你想试试 jekyll 或 octopress。

# facebook - 如何按位置/城市查询公共 Facebook 事件？

> ID：11181480
> 
> 赞同：33
> 
> 时间：2012-06-24T21:51:27.463
> 
> 标签：facebook, facebook-graph-api

我一直在试图弄清楚如何做到这一点，并认为这是不可能的，然后找到了这个网站：（由于死链接而被删除）

你可以在那里按城市搜索，我不知道他们是怎么做到的？据我所知，普通的图形 API 不允许按位置搜索事件。任何建议/提示/信息都会很棒！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-25T02:03:17.937

### 2014-07-02 更新

您不能直接在 Facebook API 中搜索某个位置附近的事件。自从最初给出这个答案以来，Graph API 使得搜索事件变得更加困难。

OP 引用的 Elmcity 脚本对事件标题中的关键字进行了简单搜索。以“兰开斯特”为例。您将获得在元数据中某处包含 Lancaster 一词的事件。

他们的查询看起来像这样：

```
 https://graph.facebook.com/search?q=lancaster&type=event 
```

您还可以在标题中搜索不基于位置的单词，例如“picnic”，脚本会返回事件。

对于实际查找某个位置附近的事件的问题，在当前迭代中，“venue”字段只是一个字符串，因此它与任何 Facebook 位置都没有关系。运行这些查询不会返回任何内容：

```
https://graph.facebook.com/madisonsquaregarden/events
https://graph.facebook.com/108424279189115/events 
```

因此，甚至不可能使用批处理请求。

根据文档，FQL 似乎是一个更好的解决方案。在[事件文档](https://developers.facebook.com/docs/reference/fql/event/)中，该`venue.name`列是可索引的！容易，对吧？

错误的。当您运行此 FQL 查询以在某个位置查找事件时，如下所示：

```
 SELECT name, start_time, venue FROM event WHERE CONTAINS("madison square garden") 
```

你发现`venue.name`没有填充。

尝试任何其他变体，例如：

```
 SELECT name, start_time, venue FROM event WHERE venue.id = 108424279189115 
```

引发“语句不可索引”错误。

因此，虽然构建“我附近的 Facebook 事件”是杀手级应用，但似乎唯一可行的方法是搜索您附近事件的常用字符串，获取这些事件，然后从结果集中过滤掉不相关的事件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-23T02:16:41.123

GitHub 上的这个 JavaScript 库似乎是一种有趣的方法。它使用地点搜索，然后对这些地点进行事件搜索。
[tobilg/facebook-events-by-location-core](https://github.com/tobilg/facebook-events-by-location-core)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-10T11:50:30.743

截至最近。由于隐私问题**，事件端点已被弃用。**您的应用现在需要先进行审核才能在恢复时访问事件 api。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-07T16:21:26.450

由于隐私问题，事件和积分已被弃用。现在您必须先查看您的应用程序，然后才能访问事件 api。成功批准后，您可以搜索事件。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-06-06T05:26:13.937

所以你可以做的是输入“事件”，但你需要输入日期，或者之后的明天。然后，在右侧，在您的过滤器中，输入位置字段，选择其他，然后输入您想要的位置。

# javascript - 使用 jquery 在 for 循环中处理错误

> ID：11181484
> 
> 赞同：0
> 
> 时间：2012-06-24T21:51:54.277
> 
> 标签：javascript, jquery, error-handling, for-loop

我正在使用 for 循环向用户显示一系列缩略图。如果`thumbnails[i].path`加载失败，我想加载`thumbnail_unavailable.jpg`它的位置。

据我了解，jQuery 的`.error()`处理程序应按如下方式使用。

```
for (var i=0; i<thumbnails.length; i++){
   var txt = "";
   txt += "<div class...>";

       // if no image, load "Screenshot Unavailable" thumbnail
       var temp_img = $('<img id="'+thumbnails[i].video_id+'" />');
       temp_img.error(function () {      
          // temp_img.attr doesn't work
          temp_img.attr('src','images/thumbnail_unavailable.jpg');
          // nor does: $('#'+thumbnails[i].video_id).attr('src','...jpg');
          // nor does: $(this).attr('src','...jpg');
       }).attr('src', thumbnails[i].path);

    txt += temp_img.get(0).outerHTML;                                
    txt += "</div>";

   $('#putVidThumbsHere').append(txt);
} 
```

但是，`thumbnail[i].path`无论我使用`$(this)` `$('#'...`或`temp_img`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:26:12.737

我尝试了一切，包括`on`/`one`绑定来处理失败的资源。不知何故（我很想解释为什么），在那个 for 循环中所做的引用并没有很好地与确保图像的 URL 实际失败所需的延迟时间相结合。

[我终于在另一个 SO 线程](https://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images)上找到了这个绝妙的解决方案：

```
function ImgError(source){
    source.src = "/images/noimage.gif";
    source.onerror = "";
    return true;
}

<img src="someimage.png" onerror="ImgError(this);"/> 
```

# drupal-7 - Drupal 7 站点迁移到不同的域

> ID：11181493
> 
> 赞同：2
> 
> 时间：2012-06-24T21:52:17.160
> 
> 标签：drupal-7, migration

我将我的 Druapl 7 站点从域：fourth.third.second.first **/subfolder**迁移到了不同​​的域，新地址只是**third.second.first**本身，没有任何子文件夹。主页加载没有任何问题。当我输入用于登录用户“ **third.second.first/user** ”的默认选项（在 Web 浏览器的 URL 地址栏中）时，它也不起作用。什么可能导致这个问题？

我已经检查了 .htaccess RewriteBase 设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T21:57:16.450

你检查了settings.php吗？那里有一个 base_url 设置，可让您设置基本 url。

# php - 不更新sql数据库

> ID：11181494
> 
> 赞同：0
> 
> 时间：2012-06-24T21:52:21.647
> 
> 标签：php, sql

我写了以下代码，但它没有更新数据库，它是脚本的一部分并且它停止工作..找不到解决方法..需要建议

```
<?php
$link = mysql_connect('xxxxxxxx');
if (!$link) {
die('Could not connect: ' . mysql_error());
}

mysql_select_db("xxx", $link);

$usernames='aneeshxx';
echo $usernames;

$update = "INSERT sanjana SET $name ='$usernames'";
mysql_query($update, $link);

$update1 = "INSERT INTO sanjana (name)VALUES ($usernames)";
mysql_query($update1, $link);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:02:30.197

```
$update = "INSERT sanjana SET $name ='$usernames'"; 
```

this probably is meant as an [UPDATE](http://dev.mysql.com/doc/refman/5.5/en/update.html) statement, so for an update it should be

```
$update = "UPDATE sanjana set name = '$usernames'"; 
```

I put `name` and not `$name` due to your second query and not seeing `$name` being defined anywhere. Be aware that this will change the value in the column `name` of every row in the `sanjana` table to the value of $usernames, normally a statement such as this gets limited by [conditions](http://dev.mysql.com/doc/refman/5.5/en/expressions.html), e.g. `WHERE userid = 33`

```
$update1 = "INSERT INTO sanjana (name) VALUES ($usernames)"; 
```

for an [INSERT](http://dev.mysql.com/doc/refman/5.5/en/insert.html) statement it needs to have the values quoted so

```
$update1 = "INSERT INTO sanjana (name) VALUES ('$usernames')"; 
```

Be wary that this way of putting variables directly into your query string makes you vulnerable to [SQL injection](http://en.wikipedia.org/wiki/SQL_injection), to combat this please use the [PDO](http://www.php.net/manual/en/book.pdo.php) or [mysqli](http://www.php.net/manual/en/book.mysqli.php) extensions, they both protect you from injection by providing you with [prepared statements](http://php.net/manual/en/pdo.prepared-statements.php) ; plain old mysql_* is not recommended for use anymore.

using pdo you'd use prepared statements like this

```
<?php
// we got $usernames from wherever you define it

$pdo = new PDO('mysql:dbname=mydb;host=localhost','username','password');

// to insert
$statement = $pdo->prepare('INSERT INTO `sanjana` (name) VALUES (:name)');
// the following replaces :name with $usernames in a safe manner, defeating sql injection
$statement->bindParam(':name',$usernames);
$statement->execute(); // it is done

// to update
$statement = $pdo->prepare('UPDATE `sanjan` SET `name` = :name');
$statement->bindParam(':name',$usernames);
$statement->execute(); // it is done 
```

so as you can see protecting your code from malicious input is not hard and it even makes your SQL statements a lot easier to read. Did you notice that you didn't even need to quote your values in the SQL statement anymore? Prepared statements take care of that for you! One less way to have an error in your code.

Please do read up on it, it will save you headaches. PDO even has the advantage that it's database independent, making it easier to use another database with existing code.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:56:56.780

正确的更新sql子句是这样的：

```
UPDATE table
SET column = expression; 
```

或者

```
UPDATE table
SET column = expression
WHERE predicates; 
```

[SQL：更新语句](http://www.techonthenet.com/sql/update.php)

您的查询应该是这样的：

```
$update = "UPDATE sanjana SET $name ='$usernames'";
mysql_query($update, $link); 
```

当然你需要指定一行来更新（id），否则整个表将设置`$name`列为`$usernames`.

**更新：**

因为要在空表中插入数据，所以应先执行 $update1 查询，然后执行 $update 查询。`UPDATE`子句不会对空表进行更改/插入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T22:01:37.057

Problem 1: use the correct "insert into" (create new record) vs. "update" (modify existing record)

Problem 2: It's good practice to create your SQL string *before* you call mysql_query(), so you can print it out for debugging

Problem 3: It's also good practice to detect errors

EXAMPLE:

```
<?php
  $link = mysql_connect('xxxxxxxx')
    or die('Could not connect: ' . mysql_error());

  mysql_select_db("xxx", $link);

  $usernames='aneeshxx';
  $sql = "INSERT INTO sanjana (name) VALUES ('" . $usernames + ")";
  echo "sql: " . $sql . "...<br/>\n";
  mysql_query($sql, $link)
    or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T21:53:48.857

您的更新 SQL 有 INSERT 关键字，这应该更改为 UPDATE：

```
$update = "UPDATE sanjana SET $name ='$usernames'"; 
```

# java - 骨架实现与普通抽象类有何不同？

> ID：11181495
> 
> 赞同：12
> 
> 时间：2012-06-24T21:52:32.413
> 
> 标签：java, class, interface, abstract

在*Effective Java*中，Joshua Bloch 更喜欢接口而不是抽象类。然而，他指出，每个接口都应该有一个框架实现。

我觉得骨架实现与抽象类几乎相同。这两个概念有何不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T21:56:08.110

^(在重新阅读*有效 Java中的上述部分后编辑*)

[根据本书](http://books.google.com/books?id=ka2VUBqHiWkC&pg=PA97&lpg=PA97&dq=Joshua%20Bloch%20skeletal%20implementation&source=bl&ots=yYGfNls3P_&sig=vB9KLxwP0NXGnPoysh21zNhIqeQ&hl=en&sa=X&ei=kY_nT5K-IJSo8gTygMmvAQ&ved=0CMsBEOgBMAY#v=onepage&q&f=false)的这一部分，骨架实现*是*一个抽象类。他推荐这种方法，因为在框架实现到位之后，实现接口和选择性地覆盖方法变得微不足道，即使使用匿名类（正如他在书中所做的那样）。

* * *

^(上一个答案，为了连续性而略微编辑)

一个骨架实现理论上可以是一个完整的实现，因此是具体的。然后它可以与[composition](http://tiedyedfreaks.org/eric/CompositionVsInheritance.html)一起使用，因为它可以被实例化。而抽象类*需要*继承。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T22:00:52.787

What he means is that you should provide an interface, and an abstract class implementing parts of this interface:

```
public interface Foo {
    void bar();
    void baz();
}

private abstract class AbstractFoo implements Foo {
    ...
} 
```

The `AbstractFoo` class may even not be abstract if it's possible to provide a basic, complete implementation. But if you need a class that is a Foo, but can't extend AbstractFoo, it's still possible with an interface. An abstract class doesn't provide this capability, since you can only extend one class.

BTW, this is what is done in the collections framework (which Josh Bloch created): the `Set` interface is implemented by `AbstractSet`, the `List` interface is implemented by `AbstractList`, etc.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T22:00:15.403

The interface / abstract class is part of the API.

The skeletal implementation is a valid concrete `class`, but a limited / naïve / poor implementation; for (a very contrived) example, a skeletal implementation of a `Sorter` interface might implement [bubble sort](http://en.wikipedia.org/wiki/Bubble_sort) - you wouldn't want to use it in a production application, but it illustrates how one might implement the interface

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T23:50:59.353

> 我觉得骨架实现与抽象类几乎相同。这两个概念有何不同？

对我来说，他们的*意图*不同。当我看到某个方法需要传入一个接口时，我知道实现取决于我。如果返回一个类，我不再确定。使用一个类不存在的接口只是*有意义的。*

此外，当我们想要传入的类已经是子类时，接受类作为参数的方法会引发冲突；Java 不支持多重继承。接口没有这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T21:55:59.613

“骨架实现”是一个具体的类：您可以编译和测试它。

抽象类不是，你不能;)

# postgresql - Postgresql 连续归档对于维护完整的数据库历史是否实用？

> ID：11181498
> 
> 赞同：2
> 
> 时间：2012-06-24T21:53:18.950
> 
> 标签：postgresql

如果我从第一天开始启用持续存档，生成的日志是否是一种保存所有数据库操作的完整时间点历史记录的实用方法？我猜交易量将是一个因素，所以假设每天少于 1000 笔交易。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T23:27:27.080

这取决于您所说的“所有数据库操作的完整时间点历史”的含义。

基本备份和所有预写日志 (WAL) 文件（通常也称为事务日志或 xlog）从备份转发开始应该允许您[恢复到任何时间点](http://www.postgresql.org/docs/9.1/interactive/continuous-archiving.html)。但是，为了最大限度地缩短恢复时间，最好定期进行新的基本备份。（很多人每周或每月都这样做，但我听说人们这样做的频率要低得多。）

这些日志面向数据的物理存储，而不是逻辑语句，因此目前无法确定生成 xlog 的 SQL 语句。因此，如果您正在寻找所发生事件的审计线索，它目前并不适合。

有一个 PostgreSQL 开发人员团队致力于逻辑复制，以允许更广泛地使用 xlog 数据，并可能在 9.3 版中发布，该版本不会超过一年。在那之前，人们使用基于触发器的日志记录来进行此类审计跟踪。

# c# - 从文本文件中命名变量

> ID：11181499
> 
> 赞同：2
> 
> 时间：2012-06-24T21:53:40.900
> 
> 标签：c#, string, variables, naming

我正在用 C# 编写一个使用数学数字集的程序。我已经定义了 Conjunto 类（在西班牙语中的意思是“设置”）。Conjunto 有一个 ArrayList，其中包含集合的所有数字。它还有一个名为“ID”的字符串，听起来很像；Conjunto 实例的名称。该程序具有在集合之间应用并集、交集等操作的方法。一切都很好，但现在我有一个文本文件，其中包含以下句子：

*   A={1,2,3}
*   B={2,4,5}
*   A 路口 B
*   B 联合 A

等等。问题是，我不知道文本文件包含多少组，也不知道如何在这些句子之后命名变量。例如，命名 Conjunto A 的一个实例，并命名另一个实例 B。

对不起语法，英语不是我的母语。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T21:57:23.340

动态创建变量非常复杂，而且非常无用，除非您有一些已经存在的代码需要某些变量。

使用 a`Dictionary<string, Conjunto>`来保存类的实例。这样您就可以按名称访问它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T22:02:33.733

First off, If you don't target lower version than .Net 2.0 use List instead of ArrayList. If I were you I wouldn't reinvent the wheel. Use [HashSet or SortedSet](http://msdn.microsoft.com/en-us/library/system.collections.generic.aspx) to store the numbers and then you can use defined union and intersection.

Secondly, what is your goal? Do want to have just the output set after all operations? Do you want to read and store all actions and them process it on some event?

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-02-10T18:07:58.823

首先，您的程序是从坏的方面采取的。我建议开始制作新的。动态命名“变量”的一种方法是创建类对象并编辑它们的属性。

这是我作为起始平台所做的：

首先，我创建了一个名为 set 的类

```
class set
    {
        public string ID { get; set; }
        public List<int> numbers { get; set; }
    } 
```

然后我编写了将整个文本文件排序到这些类列表中的代码：

```
 List<set> Sets = new List<set>();
            string textfile = "your text file";
            char[] spliter = new char[] { ',' };  //switch that , to whatever you want but this will split whole textfile into fragments of sets
            List<string> files = textfile.Split(spliter).ToList<string>();
            int i = 1;
            foreach (string file in files)
            {
                set set = new set();
                set.ID = i.ToString();

                char[] secondspliter = new char[] { ',' };  //switch that , to whatever you want but this will split one set into lone numbers
                List<string> data = textfile.Split(secondspliter).ToList<string>();
                foreach (string number in data)
                {
                    bool success = Int32.TryParse(number, out int outcome);
                    if (success)
                    {
                        set.numbers.Add(outcome);
                    }

                }
                i++;
                Sets.Add(set);
            } 
```

希望它可以帮助某人。

# google-chrome-extension - 如何编写更改 Gmail 中按钮颜色的 Chrome 扩展程序？

> ID：11181501
> 
> 赞同：0
> 
> 时间：2012-06-24T21:53:53.793
> 
> 标签：google-chrome-extension, google-apps

查看扩展文档后，我创建了一个小扩展，应该可以解决问题，但它似乎没有任何效果。我不确定还需要做什么。或者，Gmail 是否是一个特殊页面，并且以某种方式丢弃了在其加载过程中注入的样式表？

这是我到目前为止所拥有的：

x.css：

```
/*html for extra specificty*/
/*this class is applied to the compose button*/
html .T-I-KE {
  background-image: -webkit-linear-gradient(top,#555,#333);
  background-image: linear-gradient(top,#555,#333)
} 
```

清单.json：

```
{
  "name": "A Compose Button as Dark as my Soul",
  "version": "1.1",
  "manifest_version": 2,
  "description": "I’m so depressed.",
  "content_scripts": [
    {
      "matches": ["http://mail.google.com/*", "https://mail.google.com/*"],
      "css": ["x.css"]
    }
  ]
} 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:32:52.460

Gmail 不是 Chrome Webstore 那样的“特殊页面”，您可以插入 CSS。例如，检查“标准 HTML”页面，然后尝试类似的东西`body { background-color: #f00; }`- 它有效！

请注意，您要更改的按钮位于 iFrame 内部`canvas_frame`，我认为这可能是一个原因，请注意这个也可以：

```
#canvas_frame {
  width: 50%;
} 
```

[也许“如何将 CSS 应用到 iFrame](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe) ”的答案可以帮助你，我尝试了一些，但还不能让它工作，但也许这为你指明了正确的方向。

（顺便说一句，您在 CSS 中忘记了 a `;`，但这似乎不是它不起作用的原因，只是想提一下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:10:11.780

In our extension we use a content script to scan a page (based on the url, it only scans certain sites) for elements we wish to change. For example it looks over YouTube comments and changes the color according to a sentiment analysis score.

Such a technique could append a class to a given button and change it that way.

here is a snippet that

```
if (location.href.indexOf('youtube.com') != -1) {
    if (data.indexOf('neg') != -1) {
        $('.comment-text:contains('+data.substring(4)+')').each(function(index) {
            var active_el = $(this)[index];
            chrome.extension.sendRequest({id: "sense_color"}, function(local) {
                active_el.style.color="#"+local;
            });
            selectText($(this)[0]);
        });
    } 
```

# sockets - c#如何将多个客户端连接到一个TcpListener

> ID：11181502
> 
> 赞同：3
> 
> 时间：2012-06-24T21:53:55.840
> 
> 标签：sockets, tcpclient, tcplistener, connection

我正在 WPF 应用程序中实现游戏。我需要将至少 10 个玩家连接到服务器。我一直只使用一个`TcpClient`和一个`TcpListener`。有没有办法将很多客户端连接到服务器？我尝试为每个连接创建一个线程，但没有成功。我已经搜索过，但找不到一个可以教我如何做的简单示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T22:30:01.667

看看[http://csharp.net-informations.com/communications/csharp-multi-threaded-server-socket.htm](http://csharp.net-informations.com/communications/csharp-multi-threaded-server-socket.htm)

如果您滚动到底部，还有其他可用示例，例如可能会有所帮助的 TCP 聊天服务器/客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T19:52:27.133

这是一个重复的问题。请参阅[此处](https://stackoverflow.com/questions/5339782/how-do-i-get-tcplistener-to-accept-multiple-connections-and-work-with-each-one-i)了解 Jon Skeet 提供的解释，这似乎比上面提供的链接更简洁。

# android - Android 设备是否需要 Adob e Air 才能运行 Flash 创建的 APK？

> ID：11181513
> 
> 赞同：1
> 
> 时间：2012-06-24T21:55:33.553
> 
> 标签：android, flash, device, apk

我只是想知道从 Google Play 下载我的 APK 的用户是否需要在他们的设备上安装 Adob​​e Air 才能运行在 Flash 中创建的 APK？

谢谢，阿什利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:00:41.327

在 Flash 中创建并为 Air for Android 发布的应用程序确实需要 Adob​​e Air 运行时。从 Adob​​e Flash CS6 开始，可以将运行时与 apk 打包，因此无需额外安装。

# timer - 如何在两种不同的设备上测量时钟时间的差异？

> ID：11181518
> 
> 赞同：0
> 
> 时间：2012-06-24T21:56:02.283
> 
> 标签：timer, timestamp, sync, latency

我目前正处于开发严重依赖时间戳的移动应用程序的早期阶段。

主设备通过 wifi 连接到多个客户端设备，并向这些设备发出各种命令。当客户端设备接收到命令时，需要在命令执行时标记（相对）时间戳。虽然这一切都很简单，但我还没有想出如何处理时钟差异的解决方案。例如，主设备的时钟可能为 12:01:01，而客户端 A 的时钟为 12:01:02，客户端 B 的时钟为 12:01:03。大多数情况下，我可以期望这些设备设置为相似的时间，因为它们通过 NTP 同步。但是，我的应用程序的性质需要毫秒精度，因此我想防止出现差异。

发出命令和执行命令之间的短暂延迟是可以的，但是执行该命令的时间不正确则不行。

到目前为止，我正在考虑让主设备 ping 每个客户端设备以确定事务时间，然后请求客户端发送他们的“本地”时间。基于此，我可以计算出master和client之间的时间差。一旦知道时间差，客户端就可以相应地调整其时间戳。不过，我对网络不是很熟悉，而且我怀疑 ping 设备不是建立事务时间的非常可靠的方法，因为有很多因素适用，并且延迟可能会发生变化。

我假设有许多现实世界的设置，这些时间问题很重要，因此应该已经有了解决方案。有人知道吗？将响应时间简单地除以 2 就足够了吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:09:44.983

一个人前往NTPv4 的[RFC 5905](http://www.ietf.org/rfc/rfc5905.txt)并向那些真正将他们的面条放在这个问题上以及如何解决它的人学习。

或者您只需确保 NTP 在您的服务器上正常工作，这样您就不会首先遇到这个问题。

# python - __builtin__ 和 __builtins__ 有什么区别？

> ID：11181519
> 
> 赞同：83
> 
> 时间：2012-06-24T21:56:06.447
> 
> 标签：python, python-3.x, python-2.7, language-design, python-module

我今天正在编码并注意到一些东西。如果我打开一个新的解释器会话（IDLE）并检查函数定义的内容，`dir`我会得到：

```
$ python
>>> dir()
['__builtins__', '__doc__', '__name__', '__package__']
>>> dir(__builtins__)
['ArithmeticError', 'AssertionError', 'AttributeError', 'BaseException', 'BufferError', 'BytesWarning', 'DeprecationWarning', 'EOFError', 'Ellipsis', 'EnvironmentError', 'Exception', 'False', 'FloatingPointError', 'FutureWarning', 'GeneratorExit', 'IOError', 'ImportError', 'ImportWarning', 'IndentationError', 'IndexError', 'KeyError', 'KeyboardInterrupt', 'LookupError', 'MemoryError', 'NameError', 'None', 'NotImplemented', 'NotImplementedError', 'OSError', 'OverflowError', 'PendingDeprecationWarning', 'ReferenceError', 'RuntimeError', 'RuntimeWarning', 'StandardError', 'StopIteration', 'SyntaxError', 'SyntaxWarning', 'SystemError', 'SystemExit', 'TabError', 'True', 'TypeError', 'UnboundLocalError', 'UnicodeDecodeError', 'UnicodeEncodeError', 'UnicodeError', 'UnicodeTranslateError', 'UnicodeWarning', 'UserWarning', 'ValueError', 'Warning', 'ZeroDivisionError', '_', '__debug__', '__doc__', '__import__', '__name__', '__package__', 'abs', 'all', 'any', 'apply', 'basestring', 'bin', 'bool', 'buffer', 'bytearray', 'bytes', 'callable', 'chr', 'classmethod', 'cmp', 'coerce', 'compile', 'complex', 'copyright', 'credits', 'delattr', 'dict', 'dir', 'divmod', 'enumerate', 'eval', 'execfile', 'exit', 'file', 'filter', 'float', 'format', 'frozenset', 'getattr', 'globals', 'hasattr', 'hash', 'help', 'hex', 'id', 'input', 'int', 'intern', 'isinstance', 'issubclass', 'iter', 'len', 'license', 'list', 'locals', 'long', 'map', 'max', 'memoryview', 'min', 'next', 'object', 'oct', 'open', 'ord', 'pow', 'print', 'property', 'quit', 'range', 'raw_input', 'reduce', 'reload', 'repr', 'reversed', 'round', 'set', 'setattr', 'slice', 'sorted', 'staticmethod', 'str', 'sum', 'super', 'tuple', 'type', 'unichr', 'unicode', 'vars', 'xrange', 'zip']
>>> import __builtin__
['ArithmeticError', 'AssertionError', 'AttributeError', 'BaseException', 'BufferError', 'BytesWarning', 'DeprecationWarning', 'EOFError', 'Ellipsis', 'EnvironmentError', 'Exception', 'False', 'FloatingPointError', 'FutureWarning', 'GeneratorExit', 'IOError', 'ImportError', 'ImportWarning', 'IndentationError', 'IndexError', 'KeyError', 'KeyboardInterrupt', 'LookupError', 'MemoryError', 'NameError', 'None', 'NotImplemented', 'NotImplementedError', 'OSError', 'OverflowError', 'PendingDeprecationWarning', 'ReferenceError', 'RuntimeError', 'RuntimeWarning', 'StandardError', 'StopIteration', 'SyntaxError', 'SyntaxWarning', 'SystemError', 'SystemExit', 'TabError', 'True', 'TypeError', 'UnboundLocalError', 'UnicodeDecodeError', 'UnicodeEncodeError', 'UnicodeError', 'UnicodeTranslateError', 'UnicodeWarning', 'UserWarning', 'ValueError', 'Warning', 'ZeroDivisionError', '_', '__debug__', '__doc__', '__import__', '__name__', '__package__', 'abs', 'all', 'any', 'apply', 'basestring', 'bin', 'bool', 'buffer', 'bytearray', 'bytes', 'callable', 'chr', 'classmethod', 'cmp', 'coerce', 'compile', 'complex', 'copyright', 'credits', 'delattr', 'dict', 'dir', 'divmod', 'enumerate', 'eval', 'execfile', 'exit', 'file', 'filter', 'float', 'format', 'frozenset', 'getattr', 'globals', 'hasattr', 'hash', 'help', 'hex', 'id', 'input', 'int', 'intern', 'isinstance', 'issubclass', 'iter', 'len', 'license', 'list', 'locals', 'long', 'map', 'max', 'memoryview', 'min', 'next', 'object', 'oct', 'open', 'ord', 'pow', 'print', 'property', 'quit', 'range', 'raw_input', 'reduce', 'reload', 'repr', 'reversed', 'round', 'set', 'setattr', 'slice', 'sorted', 'staticmethod', 'str', 'sum', 'super', 'tuple', 'type', 'unichr', 'unicode', 'vars', 'xrange', 'zip']
>>> dir(__builtin__) == dir(__builtins__) # They seem to have the same things
True 
```

请注意最后一行。

所以，我的问题是：

*   有没有另一个的别名？

*   Python 人是否打算摆脱其中之一？

*   我应该为自己的程序使用什么？

*   Python 3 怎么样？

*   任何信息都是有价值的！

**重要的：**

我在 Ubuntu 上使用 Python 2.7.2+。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-24T22:10:21.213

直接来自 python 文档： [http ://docs.python.org/reference/executionmodel.html](http://docs.python.org/reference/executionmodel.html)

> 默认情况下，在`__main__`模块中时，`__builtins__`是内置模块`__builtin__`（注意：没有's'）；在任何其他模块中时，`__builtins__`是 `__builtin__`模块本身字典的别名。
> 
> `__builtins__`可以设置为用户创建的字典以创建受限执行的弱形式。
> 
> **CPython 实现细节：**用户不应触碰`__builtins__`；这严格来说是一个实现细节。想要覆盖内置命名空间中的值的用户应该`import` 使用`__builtin__`(no 's') 模块并适当地修改其属性。模块的命名空间是在第一次导入模块时自动创建的。

请注意，在 Python3 中，该模块`__builtin__`已被重命名`builtins`以避免这种混淆。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-24T22:11:48.760

你应该`__builtin__`在你的程序中使用（在极少数情况下你需要它），因为它`__builtins__`是 CPython 的一个实现细节。它可能与 相同，也可能与 相同`__builtin__`，`__builtin__.__dict__`具体取决于上下文。正如[文档](http://docs.python.org/library/__builtin__.html)所说：

> 大多数模块都有名称`__builtins__`（注意“s”）作为其全局变量的一部分。的值`__builtins__`通常是这个模块或者这个模块的`__dict__`属性值。由于这是一个实现细节，因此 Python 的替代实现可能不会使用它。

在 Python 3 中，`__builtin__`已重命名为`builtins`，并且`__builtins__`保持不变（因此您应该只`builtins`在 Python 3 中使用）。

Guido 想要联合`__builtin__`and `__builtins__`，正如您[在此处](http://mail.python.org/pipermail/python-dev/2005-December/058652.html)看到的那样 （“拥有`__builtins__`and `__builtin__`both 显然是个坏主意。”），但显然没有任何结果。

显然，使用是为了提高性能——当在非主模块中使用时，`__builtins__`它可以直接访问，因此删除了一层间接性。`__builtin__.__dict__`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-24T22:06:48.417

`__builtin__`是一个包含内置函数和类型的模块。包含相同内容的名称`__builtins__`可用这一事实是实现细节。换句话说，如果您需要使用其中之一，请执行`import __builtin__`然后使用`__builtin__`. 请参阅[文档](http://docs.python.org/library/__builtin__.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T09:58:19.540

您可以像下面的代码一样理解这些。当 cpython 启动时，cpython 将`__builtin__`模块加载到全局命名空间中

导入`__builtin__`为`__builtins__`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-07T06:20:07.293

`__builtins__`模块不应与模块混淆`__builtin__`。当然，这些名称非常相似，以至于在已经走到这一步的新 Python 程序员中容易引起一些混淆。该`__builtins__`模块由一组*内置*名称空间的*内置*名称组成。这些名称中的大多数（如果不是全部）来自 `__builtin__`模块，该模块是内置函数、异常和其他属性的模块。在标准 Python 执行中，`__builtins__`包含来自 `__builtin__`. Python 曾经有一个受限的执行模型，允许修改`__builtins__`关键部分`__builtin__`的位置以创建沙盒环境。

然而，由于它的安全漏洞和修复它的困难，Python 不再支持受限执行（从 2.3 开始）。

# jquery - 使用 location.pathname 添加一个类

> ID：11181524
> 
> 赞同：0
> 
> 时间：2012-06-24T21:56:41.753
> 
> 标签：jquery, css, url, jquery-selectors

我希望 jQuery 提取 url，然后解析它以查找机场。如果找到机场，我想在`<a`包含 html“机场”的列表项 > 标记中添加一个类。

这是我到目前为止所拥有的：

**jQuery**

```
path_name=location.pathname;

if ((path_name.search("airports")  > 0) {
        $("div.more li a").find(":contains('airports')").addClass("current-menu-item");
} 
```

**html 看起来像这样：**

```
<ul>
  <a class="static" href="#">ALL</a>
  <li><a class="static" href="#">AIRPORTS</a></li>
</ul> 
```

**网址是这样的：**

```
http://localhost/site/?type=airports 
```

这是语法问题还是“尝试另一种方式”问题？

更新：

使用警报建议，我能够验证我正在使用 location.search 获取 url。var search_name = location.search; 警报（搜索名称）；

给了我弹出窗口

```
?type=airports 
```

所以我得到了正确加载的变量，我只是无法编写添加类的逻辑。到目前为止，这些建议都没有奏效。

**更新 2**

这适用于孤立事件。

```
var search_name = location.search;
    if (search_name.search("airports")  > 0) {
        alert(search_name);
        $("div.more a:contains('AIRPORTS')").addClass("active");
    }

}); 
```

我想通过传递一个变量来更灵活一点。

你怎么做瘦？这是我到目前为止所拥有的

```
$(function() {
    var search_name = location.search;
    if (search_name.search("+ search_name +")  > 0) {
        alert(search_name);
        $("div.more a:contains('AIRPORTS')").addClass("active");
    }

    }); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:58:42.087

`location.search`是包含机场的部分。它是以下所有内容`?`，不包含在`location.pathname`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:03:25.100

From [MDN](https://developer.mozilla.org/en/DOM/window.location): an example on getting value from search string.

```
function loadPageVar (sVar) {  
 return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" +      escape(sVar).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
}  

alert(loadPageVar("name")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T22:11:01.740

...经过一些小的更正，这应该可以工作：http: [//jsfiddle.net/a4tWE/2/](http://jsfiddle.net/a4tWE/2/)

*   改用 location.href

*   :contains 选择器区分大小写

*   拆下支架

    if ((path_name.search("airports") > 0) {

*   删除了 find ，就像 contains 工作一样。

# liferay - 无法在添加 >> 更多选项中查看已部署的 Liferay portlet

> ID：11181527
> 
> 赞同：10
> 
> 时间：2012-06-24T21:57:04.753
> 
> 标签：liferay, portlet

我创建了一个示例 Liferay portlet，并且它已成功部署。但是，eclipse 控制台并没有说“1 个 portlet 已准备好使用”。而且，我在 Liferay 页面上的 Add >> More.. 选项中找不到这个 portlet。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T05:31:38.247

正如[马克](https://stackoverflow.com/users/597624/mark)所提到的，它是不确定的，有时会发生。我通常按​​照以下步骤操作，之后它可以正常工作。

**脚步：**

1.  从 webapps 中删除 portlet 的所有引用。
2.  停止服务器
3.  部署 portlet 的 WAR
4.  重启服务器
5.  如果部署了 portlet，请检查日志。

如果可能，请尝试再次构建 WAR 并部署新的 WAR，然后按照前面的步骤操作。

此外，如果这不起作用，请尝试清除`temp`and`work`目录并再次尝试前面的步骤。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-16T09:02:13.457

我已经与这个问题斗争了一天。对我来说，这是两件事：错误的属性

```
liferay.home 
```

里面

```
portal-setup-wizard.properties 
```

只有在更正之后，我才能在 tomcat 日志中看到我的 liferay-plugins 的版本高于 liferay 本身。我重新下载了正确版本的插件和正确部署的新插件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-23T12:01:02.557

If you've done all the cleaning etc. and it still does not work, there may be another reason for not showing. If you have - for some reson - deactivated the portlet in Liferay, it will remember the setting even though you have undeployed it several times.

So, you must go to *Control Panel > App Manager > All Apps > Your portlet name* and activate it again!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T22:48:09.870

这是不确定的但通常的错误。尝试取消部署portlet - 删除portlet 目录下`tomcat/webapps`并再次尝试部署。

# c# - WPF 是否将全尺寸图像嵌入到输出中？

> ID：11181529
> 
> 赞同：2
> 
> 时间：2012-06-24T21:57:20.277
> 
> 标签：c#, wpf

我有一个 WPF 应用程序，其中包含带有 PNG 图像的按钮。实际图像通过按钮内的网格控制缩放到大约 32 像素左右（取决于按钮大小）。同时，我在 Photoshop 中创建的原始作品的大小为 250x250 像素。

目前我在 Photoshop 中创建图稿，将其作为资源添加到我的 WPF 项目中，并让 WPF 自动将其缩放到按钮大小。

这是我的问题 - 如果我的原始图像是 250x250 像素，并且 WPF 将其压缩到一个按钮中，使其只有 32x32 像素，那么我的输出文件是包含 250x250 图像还是 32x32 图像？

我问是因为如果应用程序性能会受到原始图像大小的负面影响，我宁愿自己在 Photoshop 中缩放它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:59:38.920

是的，它将包含完整的文件，因为它无法识别它在运行时可能不会显示得更大。[您可以通过使用ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)反编译您的程序来检查这一点。

# .net - 我可以依靠 RichTextBox 不对纯文本进行任何不必要的更改吗？

> ID：11181533
> 
> 赞同：0
> 
> 时间：2012-06-24T21:57:33.500
> 
> 标签：.net, winforms, richtextbox, plaintext

我想使用 RichTextBox (WinForms) 来操作纯文本，因此我可以使用富文本功能进行突出显示。

纯文本将被加载到 RichTextBox，进行编辑和保存。富文本功能仅用于即时工作，不会被存储。

数据库中纯文本格式为utf8。

我担心在此过程中文本字符串可能会有一些不必要的变化：

```
richTextBox1.Text = LoadText();
//user and program manipulate the text, rich text features are used
SaveText(richTextBox1.Text); 
```

谢谢你。

**编辑：**

进一步来说：

*   在 RichTextBox 中加载 utf8 纯文本时是否有任何隐式转换？
*   如果只改变格式，RichTextBox 的 Text 属性是否会与数据库中的字符串相同，即富文本特性的使用会影响 Text 属性中的裸文本字符串吗？
*   rtf 格式是否有任何可能影响基础纯文本的限制？

**例如：**

似乎 RichTextBox 将 "\r\n" 更改为 "\n" （[链接](https://stackoverflow.com/questions/7067899/richtextbox-newline-conversion)）。这就是我所说的不必要的变化。如果只是这样，我可以接受它或以某种方式避免它，但是还有其他潜在的变化吗？

我知道 Rtf 可以处理任何以“\u”为前缀的 utf8 字符，但它可靠吗？如果给定适当的字体，它是否能够处理任何字符？

# javascript - 缩放事件侦听器之前的 Javascript OpenLayers

> ID：11181542
> 
> 赞同：8
> 
> 时间：2012-06-24T21:58:53.880
> 
> 标签：javascript, google-maps, openlayers, zooming

我正在尝试将 OpenLayers 设置为在缩放开始之前不显示矢量图层，并使其在缩放结束后重新出现。我已经像这样建立了缩放末端部分：

```
map = new OpenLayers.Map('map_element', { eventListeners: { "zoomend": mapEvent}});

function mapEvent(event) {
    if(event.type == "zoomend") {
        hide_vector_layer();
        }
} 
```

但是我没有看到任何类型的事件监听器开始放大文档。有一个“movestart”，涵盖了移动、平移和缩放。不幸的是，我不能使用“movestart”，因为我不希望图层在平移过程中消失。你会认为会有一个“zoomstart”，因为有一个“zoomend”。

我之所以尝试这样做，是因为我不喜欢在使用谷歌地图作为基础层时矢量图层如何以不同的速度缩放。它看起来不对，看起来所有功能都不准确，即使它们在缩放完成后落在正确的位置。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-26T16:17:14.353

这是一个很容易将 'BeforeZoom' 事件添加到 OpenLayers 的方法。只需将下面的代码添加到您创建地图对象的位置。

```
map.zoomToProxy = map.zoomTo;
map.zoomTo =  function (zoom,xy){
    //Your Before Zoom Actions

    //If you want zoom to go through call
    map.zoomToProxy(zoom,xy); 
    //else do nothing and map wont zoom
}; 
```

这是如何工作的：

对于任何类型的缩放活动，OpenLayers API 最终都会调用名为 zoomTo 的函数。所以在覆盖它之前，我们将该函数复制到一个名为“zoomToProxy”的新函数中。我们覆盖它并添加我们的条件缩放逻辑。如果我们想要进行缩放，我们只需调用新的代理函数 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T02:41:30.813

为此，您应该覆盖 OpenLayers.Map 的 moveTo 和 moveByPx 方法，以消除除缩放之外的任何操作的 movestart 事件触发。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T23:45:18.297

我遇到了与 OP 相同的问题，我尝试使用 drnextgis 的解决方案来解决它。但不幸的是，它并没有完全起作用:: `zoomChanged`OpenLayers.Map.moveTo 中的属性`true`不仅在缩放级别发生变化时评估，而且在地图调整大小时评估。

我的地图是用户浏览器窗口的 100%，所以如果他们调整窗口大小，就会触发事件。这对我来说是不可取的，因为我只想在缩放级别实际发生变化时触发事件。我的解决方案是创建一个名为“zoomstart”的新事件，我将其插入到 OpenLayers.Map.moveTo 的顶部。这是代码：

```
var getZoom = this.getZoom();
if ( !!getZoom && !!zoom && this.isValidZoomLevel(zoom) && getZoom != zoom )
    this.events.triggerEvent("zoomstart", zoom); 
```

此代码会将新的缩放级别传递给注册到的事件侦听器`zoomstart`，在我的情况下，我确定地图的限制范围并根据新的缩放级别执行其他操作。

愿你们平安。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-19T04:14:49.737

“movestart”处理“zoomstart”。要检测 zoomstart 是否启动，请尝试：

```
 map.events.register("movestart",map, function(e) {
        if(e.zoomChanged)
        {
        //zoom start code here
        }

    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-18T07:02:00.870

“Shaunak”的解决方案对我来说效果很好。我想将缩放限制在 11 以下，因此将他的代码编辑为

```
if (zoom > 11) {
    map.zoomToProxy(zoom, xy);
} 
```

# http - c#中的http获取页面

> ID：11181544
> 
> 赞同：-3
> 
> 时间：2012-06-24T21:59:07.773
> 
> 标签：http, c#-4.0

这是我的阅读网页。在**c#**语言中。
但是当我执行它时它有一些例外。有人知道为什么吗？

```
 try
        {
            string address = "http://" + txtMsg.Text;
            int port = int.Parse(textBox1.Text);
            System.Net.WebClient webclient = new WebClient();
            String content = webclient.DownloadString(address);

            Socket skt = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            skt.Connect(address, port);
            string hdrs = "GET " + address + ":" + port + " HTTP/1.1\r\n"
                + "Host: " + address + ":" + port + "\r\n";
            byte[] req_as_bytes = Encoding.UTF8.GetBytes(hdrs);
            skt.Send(req_as_bytes);
            byte[] data = new byte[1024 * 200];
            int t = skt.Receive(data);
            lstMsg.Items.Add(Encoding.UTF8.GetString(data, 0, t));
            skt.Shutdown(SocketShutdown.Both);
            skt.Close();

            btnConnect.Text = "done";
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:19:36.647

好的 ！
我找到了解决方案：

```
 private void btnConnect_Click(object sender, EventArgs e)
    {
        var address = "http://" + txtMsg.Text;
        var webclient = new System.Net.WebClient();
        var content = webclient.DownloadString(address);
        //any work 
        btnConnect.Text = "done";
    } 
```

# node.js - 如何在 node.js 上的 express.js 框架中启用跨域资源共享 (CORS)

> ID：11181546
> 
> 赞同：104
> 
> 时间：2012-06-24T21:59:26.333
> 
> 标签：node.js, express, cors, webserver, cross-domain

我正在尝试在 node.js 中构建一个支持跨域脚本的 Web 服务器，同时仍提供来自公共目录的静态文件。我正在使用 express.js，但不确定如何允许跨域脚本 ( `Access-Control-Allow-Origin: *`)。

我看到了[这个帖子](https://stackoverflow.com/questions/7067966/how-to-allow-cors-in-express-nodejs)，我觉得没有帮助。

```
var express = require('express')
  , app = express.createServer();

app.get('/', function (req, res, next) {
    res.header("Access-Control-Allow-Origin", "*");
    res.header("Access-Control-Allow-Headers", "X-Requested-With");
    next();
});

app.configure(function () {
    app.use(express.methodOverride());
    app.use(express.bodyParser());
    app.use(app.router);
});

app.configure('development', function () {

    app.use(express.static(__dirname + '/public'));
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function () {

    var oneYear = 31557600000;
    //    app.use(express.static(__dirname + '/public', { maxAge: oneYear }));
    app.use(express.static(__dirname + '/public'));
    app.use(express.errorHandler());
});

app.listen(8888);
console.log('express running at http://localhost:%d', 8888); 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-06-25T00:01:06.773

查看[enable-cors.org 中的示例](http://enable-cors.org/server_expressjs.html)：

> 在 node.js 上的 ExpressJS 应用程序中，对路由执行以下操作：
> 
> ```
> app.all('/', function(req, res, next) {
>   res.header("Access-Control-Allow-Origin", "*");
>   res.header("Access-Control-Allow-Headers", "X-Requested-With");
>   next();
>  });
> 
> app.get('/', function(req, res, next) {
>   // Handle the get for this route
> });
> 
> app.post('/', function(req, res, next) {
>  // Handle the post for this route
> }); 
> ```

第一次调用 ( `app.all`) 应该在您的应用程序中的所有其他路由之前进行（或者至少是您希望启用 CORS 的那些路由）。

[编辑]

如果您希望标题也显示为静态文件，请试试这个（确保它在调用之前`use(express.static())`：

```
app.use(function(req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "X-Requested-With");
  next();
}); 
```

我用您的代码对此进行了测试，并从`public`目录中获取了资产的标题：

```
var express = require('express')
  , app = express.createServer();

app.configure(function () {
    app.use(express.methodOverride());
    app.use(express.bodyParser());
    app.use(function(req, res, next) {
      res.header("Access-Control-Allow-Origin", "*");
      res.header("Access-Control-Allow-Headers", "X-Requested-With");
      next();
    });
    app.use(app.router);
});

app.configure('development', function () {
    app.use(express.static(__dirname + '/public'));
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function () {
    app.use(express.static(__dirname + '/public'));
    app.use(express.errorHandler());
});

app.listen(8888);
console.log('express running at http://localhost:%d', 8888); 
```

当然，您可以将功能打包到一个模块中，这样您就可以执行类似的操作

```
// cors.js

module.exports = function() {
  return function(req, res, next) {
    res.header("Access-Control-Allow-Origin", "*");
    res.header("Access-Control-Allow-Headers", "X-Requested-With");
    next();
  };
}

// server.js

cors = require('./cors');
app.use(cors()); 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-07-23T07:10:08.757

遵循@Michelle Tilley 解决方案，显然它起初对我不起作用。不知道为什么，也许我正在使用 chrome 和不同版本的节点。在做了一些小的调整之后，它现在对我有用。

```
app.all('*', function(req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
}); 
```

如果有人面临与我类似的问题，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-03-02T15:10:07.517

试试这个[cors](https://www.npmjs.com/package/cors) npm 模块。

```
var cors = require('cors')

var app = express()
app.use(cors()) 
```

该模块提供了许多功能来微调 cors 设置，例如域白名单、为特定 api 启用 cors 等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T10:31:59.803

我用这个：

```
var app = express();

app
.use(function(req, res, next){
    res.header('Access-Control-Allow-Origin', '*');
    res.header('Access-Control-Allow-Headers', 'X-Requested-With');
    next();
})
.options('*', function(req, res, next){
    res.end();
})
;

h.readFiles('controllers').forEach(function(file){
  require('./controllers/' + file)(app);
})
;

app.listen(port);
console.log('server listening on port ' + port); 
```

此代码假定您的控制器位于控制器目录中。这个目录中的每个文件都应该是这样的：

```
module.exports = function(app){

    app.get('/', function(req, res, next){
        res.end('hi');
    });

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-12T22:50:20.967

推荐使用[cors](https://github.com/expressjs/cors) express 模块。这允许您将域列入白名单，允许/限制域专门用于路由等，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-15T06:25:09.207

`Access-Control-Allow-Credentials: true`如果您想通过“凭据”使用“cookie”，则必须设置

```
app.all('*', function(req, res, next) {
  res.header('Access-Control-Allow-Origin', '*');
  res.header('Access-Control-Allow-Credentials', true);
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
  res.header('Access-Control-Allow-Headers', 'Content-Type');
  next();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-27T02:23:20.433

```
app.use(function(req, res, next) {
var allowedOrigins = [
  "http://localhost:4200"
];
var origin = req.headers.origin;
console.log(origin)
console.log(allowedOrigins.indexOf(origin) > -1)
// Website you wish to allow to
if (allowedOrigins.indexOf(origin) > -1) {
  res.setHeader("Access-Control-Allow-Origin", origin);
}

// res.setHeader("Access-Control-Allow-Origin", "http://localhost:4200");

// Request methods you wish to allow
res.setHeader(
  "Access-Control-Allow-Methods",
  "GET, POST, OPTIONS, PUT, PATCH, DELETE"
);

// Request headers you wish to allow
res.setHeader(
  "Access-Control-Allow-Headers",
  "X-Requested-With,content-type,Authorization"
);

// Set to true if you need the website to include cookies in the requests sent
// to the API (e.g. in case you use sessions)
res.setHeader("Access-Control-Allow-Credentials", true);

// Pass to next layer of middleware
next(); 
```

});

将此代码添加到您的 index.js 或 server.js 文件中，并根据您的要求更改允许的原始数组。

* * *

## 回答 #8

> 赞同：-9
> 
> 时间：2014-07-01T20:54:35.947

我需要采取的另外一个步骤是将我的 URL`http://localhost`从`http://127.0.0.0`

# java - 带有 Jersey REST 的 PathParam

> ID：11181547
> 
> 赞同：2
> 
> 时间：2012-06-24T21:59:29.163
> 
> 标签：java, rest, jersey

我正在开发一个 REST Web 服务，在该服务中我使用 URL 中的 ID 来指定患者，如下所示：

> `WS/services/patient/1`

其中“1”是患者的 ID。所以，在代码中，我这样指定：

```
@GET
@Path("{id}")
public void getPatient(@PathParam("id") int cId) {
...
} 
```

我在一个例子中看到过，但我的失败了。我收到此错误：

> *com.sun.jersey.api.container.ContainerException：方法，public void PresentationLayer.PatientResource.getPatient(int)，使用资源的 GET 进行注释，类 PresentationLayer.PatientResource，未被识别为使用 @HttpMethod 注释的有效 Java 方法。*

我不知道为什么要这样做。在示例中，我看到它有效。有什么提示吗？

编辑：如果我不写@PathParams（“id”），它可以工作......但是，我怎样才能从url中获取id？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T22:32:42.513

> com.sun.jersey.api.container.ContainerException: Method, **public *void* PresentationLayer.PatientResource.getPatient(int)**，使用资源的 GET 类 PresentationLayer.PatientResource 进行注释，不被识别为使用 @HttpMethod 注释的有效 Java 方法。

您正在尝试使用不返回任何响应（返回类型）`GET`的方法来处理请求。`void`

# objective-c - 一个.xib中的两个视图；对第二个 UIView 没有寻址能力

> ID：11181554
> 
> 赞同：1
> 
> 时间：2012-06-24T22:00:47.100
> 
> 标签：objective-c, xcode4

我有一 (1) 个带有两个 UIView 的 .xib，一个在顶部 1/3，另一个在底部 2/3。我可以在顶视图上绘制，但在底视图上什么也没有。

恐怕我没有正确连接底部视图。顶视图连接到文件的所有者，底视图连接到任何内容。当我尝试将底部视图连接到文件所有者时，顶部视图的连接消失了。

我应该如何将视图连接到 .xib 以便我可以对两者都具有可寻址性？

更新：这是应用程序结构的图像......如您所见，我有 xib 和两个控制器。xib 有一个“TDCalendarView”类；控制器显然什么都不做。 ![在此处输入图像描述](../Images/141751504e44ddfddcfe40e95cf6a775.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:07:57.310

您必须在尝试将 .xib 连接到的类的头文件中创建单独的 IBOutlets。

例如，

```
@interface MyClass : NSObject {
    IBOutlet UIView *topView;
    IBOutlet UIView *bottomView;
}
@end 
```

然后，您可以将每个视图连接到一个唯一的 IBOutlet。您只能将每个 IBOutlet 连接到 .xib 文件中的一个视图。

# ruby-on-rails - 渲染部分 - 没有这样的方法“键”

> ID：11181555
> 
> 赞同：1
> 
> 时间：2012-06-24T22:00:52.390
> 
> 标签：ruby-on-rails

以下代码：

```
<%= render 'shared/error_messages', f.object %> 
```

其中 f.object 是名为“User”的类的实例。

在 erb 文件中引发关于在用户对象中找不到方法“键”的错误。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:00:53.233

要渲染的第二个参数 locals 是一个映射，它指定将在要渲染的部分中可用的变量。Api Doc： [http](http://apidock.com/rails/ActionView/Template/render) ://apidock.com/rails/ActionView/Template/render 在这里，我们传递了一个用户实例，而不是 Rails 所期望的地图。在执行代码以呈现部分时，Rails 试图将 User 对象用作映射，因此出现关于找不到方法“键”的错误。

我真正需要的是这个——

```
<%= render 'shared/error_messages', object: f.object %> 
```

其中 object 是 _error_messages.html.erb 部分期望的变量。这解决了错误。

# php - 拼图 - 如何从 PHP 中“着色”图像的一部分？

> ID：11181558
> 
> 赞同：3
> 
> 时间：2012-06-24T22:01:06.183
> 
> 标签：php, javascript, css, image

我想要一张地图（图像映射）在适用某些标准的区域显示为绿色，在其他一些区域显示为黄色，在其他区域显示为红色。 ![可能的样本图](../Images/ce207db6a0fecd8cd4b1ff0dbb77a1f7.png)

目标是显示一个可点击的图像，该图像将为符合特定条件的特定状态着色。我之前考虑过闪光灯，但业主根本不想要闪光灯。一种可能的替代方法是在地图上显示“可点击”的彩色标签，但我也不知道该怎么做。有谁知道我该如何解决这个问题？任何帮助都感激不尽。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:11:32.843

查看拉斐尔：[http ://raphaeljs.com/](http://raphaeljs.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T07:53:43.603

所以这就是我最终所做的。

*   我在维基百科上找到了一张尼日利亚的 svg 地图（其中几乎有每个国家的 svg 地图）。

*   我下载了[InkScape](http://inkscape.org/download/?lang=en)
    并从 地图中删除了我不需要的部分。

*   我使用[Raphael SVG to HTML Converter 工具](http://www.irunmywebsite.com/raphael/SVGTOHTML_LIVE90.php)将其转换为 raphael 可用的代码。

*   从这里开始非常简单，我可以使用 path.fill 为图像“着色”，并且很容易设置不同的功能来单击任何部分。缩放也不是问题，因为图像可以根据容器动态缩放。

感谢大家，尤其是[Olle](https://stackoverflow.com/questions/11181558/puzzle-how-to-colorify-part-of-an-image-from-php/11181615#11181615)，为我指明了正确的方向！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T02:22:23.200

jQuery 矢量地图[http://jqvmap.com/](http://jqvmap.com/)

或者

[向量图](http://jvectormap.com/)

JVectorMap 提供了比 jqvmap 更多的预生成地图。但是您应该能够生成自己的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T22:10:08.667

看看 jQuery。PHP 不是您将要执行此操作的地方，它将成为客户端 Javascript，以使用覆盖图像或通过 Javascript 更改 CSS 来操作 html 图像映射。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T01:56:37.923

对于它的价值，这可以使用 gd 扩展在 php 中完成。本质上，您所做的是加载图像的全白版本，然后使用图像上的坐标，使用 imagefilltoborder (http://www.php.net/manual/en/function.imagefilltoborder.xml) 用给定的颜色填充图像。 php) .

但是，要使其可点击，无论如何您都需要在客户端使用图像映射或 javascript。

# node.js - ReferenceError：未定义窗口

> ID：11181562
> 
> 赞同：1
> 
> 时间：2012-06-24T22:01:26.073
> 
> 标签：node.js

我正在尝试运行[Wooga 的 Pocket-Island 游戏](https://github.com/wooga/Pocket-Island)并安装了该页面上列出的所有先决条件：

```
gem install rake
npm install -g less
npm install -g jslint
... 
```

然后通过运行成功构建程序

```
rake all 
```

现在有一个新`build`目录：

```
app.js  css  images  index.html  ipad.html  templates  version 
```

app.js 大小为 400k，看起来像一个最小化的 JavaScript 文件。

然后我尝试运行它`node`：

```
#node ./app.js

/home/afarber/src/Pocket-Island/build/app.js:1
window.wooga.cas
^
ReferenceError: window is not defined
    at Object.<anonymous> (/home/afarber/src/Pocket-Island/build/app.js:1:63)
    at Module._compile (module.js:446:26)
    at Object..js (module.js:464:10)
    at Module.load (module.js:353:31)
    at Function._load (module.js:311:12)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38) 
```

作为一个完整的**node.js**新手，我怀疑我遗漏了一些非常明显的东西。请问有人对我有什么建议吗？

我查看了 app.js 并且没有`window.wooga.cas`，但是有以下几个变量：

```
window.wooga.castle.levels = .....
window.wooga.castle.entityDefinitions = .....
window.wooga.castle.version = "38da43a566503f3043576dafaf77f89363017397" ;
window.wooga.castle.tutorial = .... 
```

所以我认为`app.js`没问题，但我必须将它安装在某个地方，或者告诉它在哪里可以找到标准库？（我已经安装了**node.js**下`/usr/local/`）

我使用的是 CentOS 6.2，实际上我是一位经验丰富的 Linux 用户。

**更新：**更多信息（不确定是否有帮助）：

```
# npm root
/home/afarber/src/Pocket-Island/build/node_modules
# npm --version
1.1.24
# node --version
v0.6.19 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T22:11:00.067

node 仅用于构建，不用于运行游戏。到目前为止，看起来构建本身运行良好。该文件将在网络浏览器`app.js`中加载。`index.html`

# c++ - C++ reading from FIFO without memory operations

> ID：11181568
> 
> 赞同：1
> 
> 时间：2012-06-24T22:02:21.583
> 
> 标签：c++, linux

I'd like to use a FIFO buffer from a C++ code. There are two processes, one of them always writes to the FIFO, the other always reads it. It's very simple.

I don't really need to read the contents of the buffer, I just want to know how much data is in it, and clear it.

What is the most sophisticated solution for this in C++?

This code works well, but I never need the buffer's contents:

```
int num;
char buffer[32];

num = read(FIFO, buffer, sizeof(buffer));
//num is the important variable 
```

Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:25:11.087

据我所知，从 linux FIFO 中清除字节（不破坏 FIFO）的唯一方法是将它们读出。您可以通过一次读取大量数据来更快地清除它们（`32`这是一个非常小的读取大小，除非这是通常写入 FIFO 的大小）。如果您处于阻塞模式，则应按照 Robert Mason 指示的链接中所述查询字节。如果描述符处于非阻塞模式，则可以读取直到`EAGAIN`返回以知道它已被清除。您可以使用`poll`来确定更多数据何时到达 FIFO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T00:55:33.947

清除管道的唯一方法是读取它，因此存在多少字节的问题没有实际意义——您在阅读它们之后就会知道。真正的问题最终与任何阅读相同：

(1) 如果您不关心数据，那么大概您不想阻塞等待它，因此使 FIFO 非阻塞。

(2) 由于您大概不想坐下来浪费时间轮询 FIFO 以查看是否有要读取的内容，因此您应该将 FIFO fd 放入`select`语句中。当有要阅读的内容时，将其排空并添加到计数器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T22:24:44.493

你可以看看这个问题：[Determing the number of bytes ready to be recv()'d](https://stackoverflow.com/questions/3926341/determing-the-number-of-bytes-ready-to-be-recvd)

在 linux 上，套接字的代码也应该在 FIFO 上以最小的努力工作。不过，我不确定 Windows。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-24T22:05:56.633

Not sure if I've got you right, *sophisticated* - do you mean the most efficient, or the most obfuscated?

Anyway, if you don't need the buffer contents - you may just use a (shared) interlocked variable.

# android - Android - lookup an xml element node name from its value

> ID：11181572
> 
> 赞同：0
> 
> 时间：2012-06-24T22:03:30.450
> 
> 标签：android, string, file, lookup

I have an android app that I want to internationalise.

I have extracted the app strings and deployed them in resource files and all that works fine.

The remaining issue I have is that my app reads a folder structure and actually pulls filenames in as words to use in the app.

I have these filenames/words defined in my xml, but I can't figure out how to dynamically lookup the english language word.

So. here's the scenario.

Filename = hello.png. I want the word "hello" to appear in my app corresponding to the image; I have the word "hello" defined in my strings.xml and the corresponding language files as "hello_file" (i.e. the word "hello" can be accessed by R.string.hello_file). What I think I need to do is take the english word from the filename and do a reverse lookup on the strings.xml file and find the node corresponding to that and then lookup the corresponding word in the strings_xx.xml file for the iso language translations.

But I don't know how to do that...

Perhaps I'm over complicating this? It does not seem an ideal use case for the strings_xx.xml translation facility.

Any other ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:13:32.957

使用字符串数组[http://developer.android.com/guide/topics/resources/string-resource.html#StringArray](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)

```
String[] files = getResources().getStringArray(R.array.file_names); 
```

在代码中，您可以遍历所有值以找到您需要的值。

# macos - NSUndoManager in non-document based application

> ID：11181573
> 
> 赞同：2
> 
> 时间：2012-06-24T22:03:47.257
> 
> 标签：macos, cocoa, nsundomanager

I am writing a non-`NSDocument`-based application similar in style to, say, AddressBook.app. It has a single window located in `MainMenu.nib`.

Currently, I am struggling with integrating `NSUndoManager` with this application. If I create an instance of `NSUndoManager` and store it into an instance variable of my `AppController` class, the "Undo" menu item doesn't get enabled on registering undos with the manager.

What do I have to do in order to connect the `NSUndoManager` instance to the menu items and have it manage the window's dirty state?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T22:54:47.910

您可以在您的 AppDelegate 类中创建您的撤消管理器作为该类的成员。然后您将 AppDelegate 设置为界面生成器中窗口的委托。之后您在 AppDelegate 中编写此方法：

```
- (NSUndoManager*) windowWillReturnUndoManager: (NSWindow*) window
{
    < return the undo manager created >
} 
```

# javascript - websocket.send() 参数

> ID：11181577
> 
> 赞同：25
> 
> 时间：2012-06-24T22:04:56.827
> 
> 标签：javascript, websocket, send

通常，我们只将我们想要发送的数据作为`websocket.send()`方法的参数，但我想知道是否还有其他参数，例如我们可以放在括号内的 IP。我们可以这样使用它：

```
websocket.send(ip, data);  // send data to this ip address 
```

或者我应该调用其他方法？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-25T13:15:09.600

据我了解，您希望服务器能够通过从客户端 1 向客户端 2 发送消息。您不能直接连接两个客户端，因为 WebSocket 连接的两端之一需要是服务器。

这是一些伪代码 JavaScript：

**客户：**

```
var websocket = new WebSocket("server address");

websocket.onmessage = function(str) {
  console.log("Someone sent: ", str);
};

// Tell the server this is client 1 (swap for client 2 of course)
websocket.send(JSON.stringify({
  id: "client1"
}));

// Tell the server we want to send something to the other client
websocket.send(JSON.stringify({
  to: "client2",
  data: "foo"
})); 
```

**服务器：**

```
var clients = {};

server.on("data", function(client, str) {
  var obj = JSON.parse(str);

  if("id" in obj) {
    // New client, add it to the id/client object
    clients[obj.id] = client;
  } else {
    // Send data to the client requested
    clients[obj.to].send(obj.data);
  }
}); 
```

# notepad++ - How to open Notepad++ session files as sessions instead of raw text files?

> ID：11181583
> 
> 赞同：12
> 
> 时间：2012-06-24T22:06:24.387
> 
> 标签：notepad++, windows-7-x64

This should be pretty simple for any experienced users of NPP.

Desired behavior:

1.  Double-click Notepad++ session file (I use .npp)

2.  Session opens in Notepad++

I understand the session file can be opened *after* opening Notepadd++ from the Open File dialog, but that is not the desired behavior. I've achieved the desired behavior on WinXP and Win8 with no problem, but can't get Win7 (x64) to cooperate. First, I tried simply changing session extension to npp (Settings > Preferences > Misc). But since no program was associated with .npp, I got the "Open With..." menu. Next, I tried associating .npp files with Notepad++, but then the files open in Notepad++ as raw text files, not session files. What am I missing? I've done this before many times, just never on Win7\. Thank you very much, I tried Google for an hour but found no help.

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-27T20:56:11.523

设置 > 首选项 > MISC > 会话文件扩展

“如果在会话文件 ext 中输入了扩展名，Notepad++ 将尝试将这些文件作为会话文件而不是常规文件打开。这允许您通过命令行或任何其他打开文件的方法简单地提供会话文件以加载会话进入记事本++。”

[http://npp-community.tuxfamily.org/documentation/notepad-user-manual/settings/preferences](http://npp-community.tuxfamily.org/documentation/notepad-user-manual/settings/preferences)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:38:16.187

我似乎已经想通了。问题是新版本的 NPP 发生了一些变化，它无法解析以前版本的 NPP 保存的 NPP 会话。如果是这样，唯一知道的解决方案就是我所做的 - 重新创建我的旧会话并重新保存旧会话文件......

# oracle - 侦听器在错误的主机（本地主机）上侦听

> ID：11181586
> 
> 赞同：0
> 
> 时间：2012-06-24T22:07:03.473
> 
> 标签：oracle, localhost, listener

我创建了一个名为 listener 的监听器（使用 netca）。

当我启动监听器（使用 lsnrctl start）时，我有以下日志。

> ```
> LSNRCTL for Linux: Version 11.2.0.1.0 - Production on 24-JUN-2012 17:56:35
> 
> Copyright (c) 1991, 2009, Oracle.  All rights reserved.
> 
> Starting /opt/oracle/eesrv/11.2.0/db1/bin/tnslsnr: please wait...
> 
> TNSLSNR for Linux: Version 11.2.0.1.0 - Production
> System parameter file is /opt/oracle/network/listener.ora
> Log messages written to /opt/oracle/diag/tnslsnr/sakura/listener/alert/log.xml
> Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=localhost.localdomain)(PORT=1521)))
> 
> Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=sakura)(PORT=1521)))
> STATUS of the LISTENER
> ------------------------
> Alias                     LISTENER
> Version                   TNSLSNR for Linux: Version 11.2.0.1.0 - Production
> Start Date                24-JUN-2012 17:56:35
> Uptime                    0 days 0 hr. 0 min. 10 sec
> Trace Level               off
> Security                  ON: Local OS Authentication
> SNMP                      OFF
> Listener Parameter File   /opt/oracle/network/listener.ora
> Listener Log File         /opt/oracle/diag/tnslsnr/sakura/listener/alert/log.xml
> Listening Endpoints Summary...
>   (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=localhost.localdomain)(PORT=1521)))
> The listener supports no services
> The command completed successfully 
> ```

问：为什么听众在 localhost 而不是 sakura 上收听？！？

这是我的 listener.ora 文件（我明确指定使用 sakura）：

> TRACE_DIRECTORY_PROD = /var/opt/oracle/otk/1.0/log/network/trace
> 
> SUBSCRIBE_FOR_NODE_DOWN_EVENT_PROD = 关闭
> 
> LISTENER = (DESCRIPTION_LIST = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = sakura)(PORT = 1521)) ) )
> 
> ADR_BASE_LISTENER = /opt/oracle
> 
> LOG_DIRECTORY_PROD = /var/opt/oracle/otk/1.0/log/network

为什么我做错了？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:49:21.453

*从评论扩展*

似乎正在解析到与ie`sakura`相同的地址。这表明 中有一个条目映射到。`localhost.localdomain``127.0.0.1``/etc/hosts``sakura``127.0.0.1`

您可以：

*   删除该映射；
*   更改它以显示外部 IP 地址，如果它没有自动解析为一个；
*   如果您有一个解析为外部 IP 的域名，请更改您`listener.ora`以使用完全限定的域名，例如`sakura.example.com`；
*   或更改您`listener.ora`以直接使用外部 IP 地址而无需查找。

最后一个选项可能是最简单的，除非您有 DHCP 分配的 IP 地址；以及@dseibert 的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-19T05:24:01.013

如果您更改主机名：{newHostName}

步骤 1\. 检查环境变量：

```
> export ORACLE_HOSTNAME={newHostName}
> export ORACLE_UNQNAME=ORCL
> export ORACLE_BASE=/oracle
> export ORACLE_HOME=$ORACLE_BASE/product/12.1.0/db_1
> export ORACLE_SID=ORCL 
```

步骤 2\. 在 oracle 安装目录（例如 /oracle）中查找“oldHostName”（例如 oracle_12C.localdomain）以查看您的主机名：

> 主机名 grep -r "oracle_12C" /oracle

就我而言，我发现这些文件可以使用新的“newHostName”手动更改“oracle_12C.localdomain”：

```
File 1) /oracle/product/12.1.0/db_1/install/chainedInstall/globalcontext.xml
File 2) /oracle/product/12.1.0/db_1/inventory/Components21/oracle.rdbms.scheduler/12.2.0.1.0/context.xml
File 3) /oracle/product/12.1.0/db_1/inventory/Components21/oracle.ldap.client/12.2.0.1.0/context.xml
File 4) /oracle/product/12.1.0/db_1/inventory/Components21/oracle.server/12.2.0.1.0/context.xml
File 5) /oracle/product/12.1.0/db_1/inventoy/Clone/clone.xml 
```

步骤 3\. 启动实例： 进入 sqlplus：

> cd $ORACLE_HOME/bin sqlplus / AS SYSDBA SQL> 启动

步骤 4\. 启动监听器 {SID} 例如：

> cd $ORACLE_HOME/bin lsnrctl 启动 ORCL

步骤 5\. 在控制台中检查结果...服务“ORCL”有 1 个实例。...

# jquery - 基于列标题的jQuery隐藏表列

> ID：11181593
> 
> 赞同：1
> 
> 时间：2012-06-24T22:07:52.793
> 
> 标签：jquery, html-table

我在这里查看了几个类似的问题，但我仍然可以让它工作。我试图隐藏页面上自动生成的表中的特定列。我设法隐藏了第一行中的列标题和相应的单元格，但我不确定如何使它适用于其余的行。我错过了什么？

```
$(document).ready(function() {
    $("table.lc_Table:eq(0) tr:eq(0) th").each(function(ind,ele) {
        if( $.trim($(this).text()).match(/(Available|Order Limit)/gi) )
        {
          $("table.lc_Table:eq(0) tr th:eq("+ind+"), table.lc_Table:eq(0) tr td:eq("+ind+")").hide();
        }
    });
});

<table border="0" cellspacing="0" cellpadding="4" class="lc_Table">
<tr>
    <th class="lc_Heading">
        <p class="PaddedListHeadingsC">Ticket Class</p>
    </th>
    <th class="lc_Heading">
        <p class="PaddedListHeadingsC">Available</p>
    </th>
    <th class="lc_Heading">
        <p class="PaddedListHeadingsC">Order Limit</p>
    </th>
    <th class="lc_Heading">
        <p class="PaddedListHeadingsC">Price</p>
    </th>
</tr>
<tr class="lc_Row0">
    <td class="lc_Cell">
        <p>Attendee1</p>
    </td>
    <td align="right" class="lc_Cell">
        <p>50</p>
    </td>
    <td align="right" class="lc_Cell">
        <p>No Limit</p>
    </td>
    <td align="right" class="lc_Cell">
        <p>$0.00</p>
    </td>
</tr>
<tr class="lc_Row1">
    <td class="lc_Cell">
        <p>Attendee2</p>
    </td>
    <td align="right" class="lc_Cell">
        <p>50</p>
    </td>
    <td align="right" class="lc_Cell">
        <p>No Limit</p>
    </td>
    <td align="right" class="lc_Cell">
        <p>$0.00</p>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:22:46.920

应该管用

```
$('tr').each(function(){
    $(this).find('td').eq(0).hide();
}) 
```

对于 TH 和 TD 都可以使用

```
$('tr').each(function(){
    $('tr').children().eq(0).hide();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:21:35.400

`:eq`只评估一个元素。而是使用`:nth-child`相对于元素父级的计数。

# javascript - 使用下划线模板避免重复 - 主干

> ID：11181594
> 
> 赞同：1
> 
> 时间：2012-06-24T22:07:53.020
> 
> 标签：javascript, backbone.js, underscore.js

假设我有一个具有一堆布尔属性的主干模型：

```
Car = Backbone.Model.extend({});

car_one = new Car({
    a_c: true,
    mp3: true,
    gps: false,
    touchscreen: false,
    // etc...
}) 
```

我希望能够呈现这些布尔属性的列表，并在它们旁边有一个图标，具体取决于真或假。如果为 true，则图标将为绿色勾号，否则，显示红色 X 图标。

类似的东西：

```
<ul>
<li><img src="tick.png">AC</li>
<li><img src="tick.png">MP3</li>
<li><img src="cross.png">Gps</li>
<li><img src="cross.png">Touch screen</li>
</ul> 
```

有没有更好的方法来做到这一点，而不是在模板中包装`li`每个`if statement`：

```
<% if (model.a_c === true) { %>
    // show tick...
<% } else { %>
   // show red cross..
<% } %> 
```

我有大约 12 个布尔属性需要像这样渲染......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T23:56:25.773

您可以从模板中访问 JavaScript 函数。所以你可以放一些东西`window`（即全局范围）：

```
window.underscore_helpers = {
    list_of_booleans: function(obj, bools) {
        // 'obj' is the object for the template, 'bools'
        // is an array of field names. Loop through 'bools'
        // and build your HTML...
        return the_html_li_elements;
    }
}; 
```

然后，您将希望利用以下[`variable`选项`_.template`](http://underscorejs.org/#template)：

> 默认情况下，**模板**`with`通过语句将数据中的值放在本地范围内。**但是，您可以使用变量**设置指定单个变量名称。这可以显着提高模板的渲染速度。
> 
> ```
>  _.template("<%= data.hasWith %>", {hasWith: 'no'}, {variable: 'data'});
>    => "no" 
> ```

然后你可以在你的模板中有这样的东西：

```
<%= underscore_helpers.list_of_booleans(
    json,
    ['a_c', 'mp3', 'gps', 'touchscreen']
) %> 
```

并像这样使用您的模板：

```
var html = _.template($('#t').html(), model.toJSON(), { variable: 'json' });
// or
var tmpl = _.template($('#t').html(), null, { variable: 'json' });
var html = tmpl(model.toJSON()); 
```

演示：http: [//jsfiddle.net/ambiguous/Yr4m5/](http://jsfiddle.net/ambiguous/Yr4m5/)

通过使用该`variable`选项，您将不得不说`<%= json.attribute %>`而不是，`<%= attribute %>`但这很小。

您可以使用类似的方法`<li>`一个一个地格式化 s 并在模板中保留更多的 HTML。

另一种选择是在`for`模板中添加一个循环，如下所示：

```
<script id="t" type="text/x-underscore-template">
    <ul>
        <% var fields = ['a_c', 'mp3', 'gps', 'touchscreen' ] %>
        <% for(var i = 0; i < fields.length; ++i) { %>
            <li class="<%= json[fields[i]] ? 'true' : 'false' %>"><%= fields[i] %></li>
        <% } %>
    </ul>
</script>​​​​​​​​​​​​​​​​​​​​ 
```

演示：http: [//jsfiddle.net/ambiguous/983ks/](http://jsfiddle.net/ambiguous/983ks/)

您会注意到这也使用了该`variable: 'json'`选项，您需要这样才能`[]`在名称位于变量中时使用 on 来按名称获取字段。这个人

# javascript - Quicksand Font Not Rendering Correctly

> ID：11181598
> 
> 赞同：4
> 
> 时间：2012-06-24T22:08:35.750
> 
> 标签：javascript, css, fonts, quicksand

I'm using Quicksand from google webfonts on a site I'm developing, but some weird stuff happens when I access the page from Windows browsers.

For instance, the word "STOREFRONTS" comes out like this:

![storefronts](../Images/4d6695bb4e1dc0d1f2795ec904655fe9.png)

Any idea what might be happening?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T00:01:30.727

如果您在两种环境中工作，例如 Mac 端和 Windows 端，并且仅在您尝试支持 Web 字体（IE 6+、Firefox 3.5+、Chrome 4.2+、等[https://developers.google.com/webfonts/faq](https://developers.google.com/webfonts/faq)），可能是您安装了与 Quicksand 同名的系统级字体，并且它正在使用该字体。您也可以在这里尝试，特别是关于较新版本的 Firefox 和 IE 9+ 中的 CORS 问题（https://developers.google.com/webfonts/docs/troubleshooting）。有关如何加载字体的示例页面或代码也可能会有所帮助。

# facebook - How to auto select all friends to invite to my facebook app

> ID：11181600
> 
> 赞同：-1
> 
> 时间：2012-06-24T22:08:59.947
> 
> 标签：facebook

I have developed an app but to make this app to reach out my friends i want to add " Invite friends to continue to app" as done in this app

[https://apps.facebook.com/hulk_game/?fb_source=bookmark_apps&ref=bookmarks&count=0&fb_bmpos=1_0](https://apps.facebook.com/hulk_game/?fb_source=bookmark_apps&ref=bookmarks&count=0&fb_bmpos=1_0)

when you click play button the invite friends pops up and when you click on cancle button then alert message comes out.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T19:12:37.250

比文字更有价值的图片

![脸书政策](../Images/1786544162bbdb2812a9791843685676.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:42:39.160

默认情况下选择“所有”朋友是违反 Facebook 条款的。用户应该可以控制他们想要选择的人。此外，不应强迫/激励用户分享。如果您的应用程序/内容很好，它将自然地共享 - 而不是您尝试做的强制共享。

# javascript - 优化 jQuery 剧透按钮

> ID：11181608
> 
> 赞同：1
> 
> 时间：2012-06-24T22:10:26.957
> 
> 标签：javascript, jquery, button

HTML

```
<!doctype html>
<html>
<head>
</head>
<body>
<button id="b1" type="button">Show Spoiler</button>
<p id="p1" style="display:none"> This is a damn paragraph.</p>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="js/script.js"></script>
</body>
</html> 
```

JS

```
function bindEvent(element, eventName, eventHandler) {
    var el = $(element)[0];
    if (el.addEventListener) {
        el.addEventListener(eventName, eventHandler, false)
    } else if (el.attachEvent) {
        el.attachEvent('on'+eventName, eventHandler);
    }
}
bindEvent('#b1', 'click', function() {
    $('#p1').toggle('blind');
    if ($('#b1').text() == 'Show Spoiler') {
        $('#b1').text('Hide Spoiler');
    } else if ($('#b1').text() == 'Hide Spoiler') {
        $('#b1').text('Show Spoiler');
    }

}); 
```

我是 jQuery 和 Javascript 的新手，所以我制作了这个简单的脚本来显示和隐藏段落，并在单击时更改按钮文本。我的问题是这似乎有点笨拙。有没有更好、更短、更简单的方法来达到同样的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:19:25.890

你可以使用很棒的 jquery 用简单的 3 行代码来完成这项工作。触发按钮单击事件，然后单击 -> 切换元素“P”。这应该有帮助：[工作演示](http://jsfiddle.net/epinapala/L2AcF/2/)

```
$("#b1").click(function () {
      $("#p1").toggle('slow');
    });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:20:31.390

首先，jQuery 已经为您跨浏览器规范化了 DOM 事件侦听器，因此您的`bindEvent`函数不再是必需的。这是一个捷径，使用一些你可以在[jQuery API](http://api.jquery.com/)中自己查找的东西来做你正在做的事情。

```
var $b1 = $('#b1')
  , $p1 = $('#p1')
  , hideText = 'Hide Spoiler'
  , showText = 'Show Spoiler'

$b1.on('click',function() {
    var text = $b1.text()
      , newText = text === showText ? hideText : showText
    $p1.toggle('blind')
    $b1.text(newText)
}) 
```

这里有几点需要注意：

*   您的示例函数假设有一个扰流板`#p1`和一个显示按钮`#b1`。在生产中，这可能基于类，例如`.spoiler`和`.spoiler-trigger`，并且页面上会有多个剧透。在这种情况下，您需要获取 的值`this`。在此示例中，我们假设显示按钮始终是扰流板本身的兄弟。

    ```
    $('.spoiler-trigger').on('click',function() {
        var $this = $(this)
          , $thisSpoiler = $this.siblings('.spoiler').eq(0)
          , text = $this.text()
          , newText = text === showText ? hideText : showText
        $thisSpoiler.toggle('blind')
        $this.text(newText)
    }) 
    ```

*   jQuery`.on`方法是您将要开始使用的跨浏览器事件侦听器函数。

*   我们重复使用的 jQuery 选择器，比如`$(this)`or `$('#b1')`，应该缓存在局部变量中以提高性能。
*   我使用三元条件而不是 if 语句来确定显示/隐藏文本应该是什么，因为在这个非常简单的情况下，我认为它更具可读性。

# sed - 使用 sed 替换文本文件中的“localhost”

> ID：11181612
> 
> 赞同：1
> 
> 时间：2012-06-24T22:11:23.370
> 
> 标签：sed, memcached, port

我有这样的文件，我想`$GLOBALS['SERVER_MEMCACHED']='localhost';`用`$GLOBALS['SERVER_MEMCACHED']='mydomain.com';`sed 替换。

这该怎么做 ？我也不想更换 DB_HOST。

```
<?php
$GLOBALS['DB_HOST']='localhost';
$GLOBALS['DB_NAME']='database';
$GLOBALS['DB_LOGIN']='login';
$GLOBALS['DB_PASSWORD']='password';
$GLOBALS['PORT_MYSQL']='3306';
$GLOBALS['PORT_MYSQLI']='3306';
$GLOBALS['SERVER_MEMCACHED']='localhost';
$GLOBALS['PORT_MEMCACHED']='11211';
$GLOBALS['CACHE_TIME']=600;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:14:11.647

```
sed -i '/SERVER_MEMCACHED/s/localhost/mydomain.com/' input 
```

# php - 使用数组键和值创建sql select语句

> ID：11181618
> 
> 赞同：1
> 
> 时间：2012-06-24T22:12:07.117
> 
> 标签：php, mysql, arrays, pdo, sql

我正在尝试传递一个包含键和值的数组。

键是列，值是要选择的值。

我正在尝试编写一个函数，我可以在其中传递一个数组并将键和值用作表的列和值。例如：

```
$array = array("user"=>"joe", user_id="2"); 
```

我需要这样创建 sql 语句：

```
select * from table where $key = $value; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T22:20:51.067

您可以像这样构建一个简单的 SQL Select：

```
<?php

/**
 * @param array Column => Value pairs
 * @return string
 */
function create_sql_select(array $pair){
  $condition = array(); 

  foreach ( $pair as $key => $value){
    $condition[] = "{$key} = '{$value}'";
  } 

 // Separate by AND delimiter if there are more than 1 pair 
 $condition = join(' AND ', $condition);

 // Return prepared string:
 return "SELECT * FROM your_table WHERE {$condition}";
}

//Will print: SELECT * FROM your_table WHERE user = 'some' AND age = '10'
print create_sql_select(array('user' => 'some', 'age' => 10)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:18:52.380

使用`foreach`循环遍历数组并获取键和值。像这样：

```
$sql='';
foreach($array as $key=>$value){
    $sql = sprintf("select * from table where %s = %s",$key,$value);
    print $sql;
} 
```

# php - PHP 可数 count() 或 ->count()

> ID：11181619
> 
> 赞同：4
> 
> 时间：2012-06-24T22:12:07.303
> 
> 标签：php

当您有一个实现可数接口的对象时，您应该使用`$object->count()`or`count($object)`吗？

我知道差异很可能很小，但是如果有人可以解释是否有任何差异，从技术上讲会是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T22:13:16.120

`count()`可用于数组和`Countable`对象。如果您正在使用，则将您`$object->count()`的功能限制为对象。使用`count()`你也允许数组。

除此之外没有区别。你可以在这里看到实现：[https ://github.com/php/php-src/blob/master/ext/standard/array.c#L676](https://github.com/php/php-src/blob/master/ext/standard/array.c#L676)

# c# - 可以从基抽象类上的静态方法返回派生泛型类型吗？

> ID：11181626
> 
> 赞同：0
> 
> 时间：2012-06-24T22:13:55.380
> 
> 标签：c#, generics, static, abstract

抽象类：

```
abstract class PersistentList<T>

public static PersistentList<T> GetInstanceOfDerivedClass()
{
    //???
} 
```

派生类：

```
public class Managers : PersistentList<Manager> 
```

所以，我想：

```
Managers managers = Managers.GetInstanceOfDerivedClass(); 
```

那可能吗？

选择是：

```
int clientID = 3;

Managers managers = Managers.For("Client", new { ClientID = clientID});

Managers managers = new Managers(new { ClientID = clientID });

Managers managers = new Managers();
managers.ClientID = clientID;
managers.Load("ForClient");
//alternatively:
Database.Load(managers, "ForClient");

//this works, however requires the above code in the constructor.
Managers managers = new Managers(clientID);

//If the static method on the abstract class (Managers.For) could determine
//the type calling, it would eliminate the need for repetitive constructors. 
```

以上都是可以的，只是想决定一个好的技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:18:58.893

你不能用静态方法来做到这一点。我不知道你为什么想要，但你可以这样做

```
 public abstract class PersistentList<T>
    {
        public PersistentList<T> GetInstanceOfDerivedClass()
        {
            return (PersistentList<T>)Activator.CreateInstance(this.GetType());
        }
    } 
```

**用法**

```
Managers managers = (Managers)new Managers().GetInstanceOfDerivedClass(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:15:47.433

如果您需要强类型，我认为这是最简单的（即该方法将返回`Managers`，而不仅仅是`PersistentList<Manager>`在请求 a 时`Managers`）：

```
static class PersistentList
{
    public static T GetInstanceOfDerivedClass<T, U>() where T : PersistentList<U>
    {
        throw new NotImplementedException();
    }
}

Managers managers = PersistentList.GetInstanceOfDerivedClass<Managers, Manager>(); 
```

你也可以这样做：

```
abstract class PersistentList<T, U> where T : PersistentList<T, U>
{
    public static T GetInstanceOfDerivedClass()
    {
        throw new NotImplementedException();
    }
}
public class Managers : PersistentList<Managers, Manager>
{
} 
```

这使您可以在示例中使用签名，`Managers.GetInstanceOfDerivedClass()`. 然而，我发现这种设计模式令人困惑，并且不鼓励使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T23:33:13.227

这似乎是一个奇怪的情况，但假设你以某种方式受限于这种模式，这是我能想到的最接近的事情（仍然不完全是你想要做的）：

```
abstract class PersistentList<T>
{
    public static T2 GetInstanceOfDerivedClass<T2>() where T2 : PersistentList<T>
    {
        return (T2)Activator.CreateInstance(typeof(T2));
    }
}

class Manager { }

class Managers : PersistentList<Manager> { } 
```

用法：

```
Managers managers = PersistentList<Manager>.GetInstanceOfDerivedClass<Managers>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T18:01:51.133

可以使用您描述的模式，但在某些情况下，让工厂方法成为非泛型静态类中的泛型方法可能很有用，特别是如果该方法将采用任何可用于类型推断的参数。例如，如果一个人有一种方法来创建一个新集合，该方法最初是从 a 填充的`T[]`，在某些情况下它可能`SuperCollection<T> SuperCollection.Create<T>(T InitialValues[])`比更方便使用`SuperCollection<T> SuperCollection<T>.Create(T InitialValues[])`，因为前者可以根据类型自动推断要创建的集合的类型数组参数。

除此之外，我认为在创建的对象类型可能取决于编译时可能不知道的各种因素的情况下，您所描述的模式是一个完全合理的模式。

# java - 如何将这样的文件插入 MySQL 数据库

> ID：11181628
> 
> 赞同：0
> 
> 时间：2012-06-24T22:14:29.780
> 
> 标签：java, mysql, database, jdbc, text-files

这是我试图存储在数据库中的文件。我想存储标题和评论。我确实得到了它，但它只存储第一行。请帮忙，对数据库不太好。

```
title : The Descent Part 2 comment : badbaz83 : No it wasn't as good as the first one, but a hell of a lot better than I first feared. Worth a watch, but don't expect it to stand up to the first film.

title : Supernatural comment : MissAyla : I loved this episode. :) I'm thoroughly enjoying the new style, just like the original episodes.

title : Soccer Mom comment : chantellel93 : it's only 10 min so if u smoke 1 its worth the laugh 2/5\. xx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:35:52.707

您首先需要拆分`line`并`Title`分配`Comment`一个`id`. 试试这个（注意区分大小写）：

```
String s = line.toString();
Title = s.substring(8, s.indexOf("comment :")).trim();
Comment = s.substring(s.indexOf("comment :") + 10, s.length()).trim(); 
```

然后让我们知道你要去哪里。

我假设您正在尝试执行此数据库插入（[SQLFiddle](http://sqlfiddle.com/#!2/c2477/1/0)）。要自动分配一个 id，您可以将 id 设置为您的 auto_increment 主键（根据我的示例）。然后您可以使用[executeUpdate(String sql, int autoGeneratedKeys)](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html)。

当您提供问题的更多详细信息时，我会尝试更新我的答案。

# cassandra - NoSQL/BigTable 数据建模和超级列中的列表（使用 Cassandra）

> ID：11181630
> 
> 赞同：1
> 
> 时间：2012-06-24T22:14:47.563
> 
> 标签：cassandra, nosql, cql

我是 NoSQL 和 BigTable 的新手，我正在尝试学习如何（如果应该）使用超级列来创建 BigTable 友好的模式。

根据[这篇](http://highlyscalable.wordpress.com/2012/03/01/nosql-data-modeling-techniques/)关于 NoSQL 数据建模的文章，听起来我不应该使用以 JOIN 为中心的 RDBMS 模式，而是应该将我的数据聚合到更大的表中，以便在可能的情况下进行去规范化。基于此，这是我为“用户”设想的一个简单模式，我正在尝试为 Cassandra 创建它：

```
User: {
    KEY: UserId {
        name: {
           first, 
           last
        },
        age,
        gender
    }
}; 
```

上面的列族（User），其键是'UserID'，由3列（name，age，gender）组成。它的列'name'将是一个超级列，由'first'和'last'组成列。

**所以我要问的是**：

1.  ~~[CQL 3.0](http://cassandra.apache.org/doc/cql/CQL.html)看起来如何创建这个列族“用户”，其中包含“名称”超级列？~~（**更新：**这似乎不可能。）
2.  我应该使用超级列（像这样）吗？我应该使用别的东西吗？
3.  表示此模式的另一种方法是什么？
4.  如何表示表/列族中的值列表？

以下是我发现的一些有用的链接，但我不太清楚，无法回答我的问题：

*   [为具有元数据的超级列创建 Cassandra 架构](https://stackoverflow.com/questions/8298039/create-a-cassandra-schema-for-a-super-column-with-metadata)
*   [Cassandra：如何在超级列族中创建列？](https://stackoverflow.com/questions/8349417/cassandra-how-to-create-column-in-a-super-column-family)
*   [使用 Cassandra 对关系数据进行建模](http://sujitpal.blogspot.com/2010/10/modeling-relational-data-with-cassandra.html)

谢谢！

**更新：**

经过大量研究，我正在学习一些东西：

*   您不能使用 CQL 创建超级列；可能还有其他机制可以这样做，但 CQL 似乎不是其中之一。
*   SQL 3.0 的语法似乎正在从以“COLUMN FAMILY”为中心的方法转向基于类似 SQL 的“TABLE”语法。

相应地改变了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:50:27.927

> 我应该使用超级列（像这样）吗？我应该使用别的东西吗？

您可以使用您建议的数据模型。[但由于链接](https://stackoverflow.com/questions/8298039/create-a-cassandra-schema-for-a-super-column-with-metadata)中提到的这些原因，通常不建议这样做。

> 我还要注意，通常不鼓励使用超级列，因为它们有几个缺点。超级列中的所有子列在读取一个子列时都需要反序列化，并且不能在超级列上设置二级索引。它们也只支持一层嵌套。

因此，请考虑您的情况的这些原因。

> 表示此模式的另一种方法是什么？

您可以尝试使用复合列。阅读[此处](http://www.datastax.com/dev/blog/introduction-to-composite-columns-part-1)了解更多信息。或者您可能只使用标准列族，我认为标准 cf 将适合您的情况。例如，以下建议：

```
User : {
  key: userId {
    columnName:firstname
    ColumnName:lastname 
    ColumnName:age
    ColumnName:gender
    ColumnName:zip
    ColumnName:street
  }
  ..
}; 
```

> 如何表示表/列族中的值列表？

可以将列表存储在 cf. 或者您可以将列表分解为单个元素并存储为 CompositeType。

# python - 可听写类的 Python 成语？

> ID：11181635
> 
> 赞同：4
> 
> 时间：2012-06-24T22:15:28.753
> 
> 标签：python, abc

我想做这样的事情：

```
class Dictable:
    def dict(self):
        raise NotImplementedError

class Foo(Dictable):
    def dict(self):
        return {'bar1': self.bar1, 'bar2': self.bar2} 
```

有没有更蟒蛇的方式来做到这一点？例如，是否可以重载内置转换`dict(...)`？请注意，我不一定要返回 的所有成员变量`Foo`，我宁愿让每个类决定返回什么。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T22:33:35.690

Pythonic 方式取决于您想要做什么。如果您的对象本身不应该被视为映射，那么一个`dict`方法是非常好的，但您不应该“重载”`dict`来处理dictables。是否需要基类取决于你是否想做`isinstance(x, Dictable)`；请注意，`hasattr(x, "dict")`这几乎可以达到相同的目的。

如果类*在*概念上是键到值的映射，那么实现[`Mapping`](http://docs.python.org/library/collections.html#collections-abstract-base-classes)协议似乎是合适的。即，您将实施

*   `__getitem__`
*   `__iter__`
*   `__len__`

并继承自`collections.Mapping`以获取其他方法。然后你就`dict(Foo())`免费获得。例子：

```
class Foo(Mapping):
    def __getitem__(self, key):
        if key not in ("bar1", "bar2"):
            raise KeyError("{} not found".format(repr(key))
        return getattr(self, key)

    def __iter__(self):
        yield "bar1"
        yield "bar2"

    def __len__(self):
        return 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:42:54.093

首先看[`collections.ABC`](http://docs.python.org/dev/library/collections.abc.html)，它描述了 Python 抽象基类协议（相当于静态语言中的接口）。

然后，决定是要编写自己的 ABC 还是使用现有的；在这种情况下，[映射](http://docs.python.org/dev/library/collections.abc.html#collections.abc.Mapping)可能是您想要的。

请注意，尽管`dict`构造函数 (ie `dict(my_object)`) 是不可覆盖的，但如果它遇到一个产生一系列键值对的可迭代对象，它将从中构造一个 dict；即（Python 2；对于 Python 3 替换`items`为`iteritems`）：

```
def __iter__(self):
    return {'bar1': self.bar1, 'bar2': self.bar2}.iteritems() 
```

但是，如果您的类旨在表现得像 a`dict`您不应该这样做，因为它与`Mapping`实例的预期行为不同，即迭代键，而不是键值对。特别是它会导致`for .. in`行为不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T22:29:58.773

你当然可以重载 dict() 但你几乎不想重载！标准库的太多方面取决于 dict 是否可用，您将破坏其大部分功能。你的出租车可能会做这样的事情：

```
class Dictable:
   def dict(self):
     return self.__dict__ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T22:54:14.643

这里的大多数答案都是关于让你的班级表现得像一个字典，这实际上不是你问的。如果你想表达这样的想法，“我是一个可以变成字典的类”，我会简单地定义一堆类并让它们每个都实现 .dict()。Python 偏爱鸭子类型（对象可以做什么）而不是对象是什么。ABC并没有增加太多。文档具有相同的目的。

# pcre - Ubuntu 12.04 - 编译 PCRE 时遇到错误

> ID：11181638
> 
> 赞同：1
> 
> 时间：2012-06-24T22:15:33.117
> 
> 标签：pcre, ubuntu-12.04

我正在使用 Ubuntu 12.04，我正在尝试安装 pcre。但是，当我尝试使用命令时遇到错误消息：`sudo make`在`./configure`命令之后。

我有这个错误信息：

```
/bin/sed: can't read Files/PCRE/pcre-8.30/libpcre.la: No such file or directory
libtool: link: `Files/PCRE/pcre-8.30/libpcre.la' is not a valid libtool archive
make[1]: *** [libpcreposix.la] Error 1
make[1]: Leaving directory `/home/dimaz/Downloads/Snort Files/PCRE/pcre-8.30'
make: *** [all] Error 2 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:24:33.013

`make`文件名（*Snort Files*）中的空间似乎阻塞了。尝试在不包含空格的目录中编译它，即通过重命名它：

```
mv ~/Downloads/Snort\ Files ~/Downloads/Snort_Files 
```

# c# - 递归任务队列

> ID：11181640
> 
> 赞同：3
> 
> 时间：2012-06-24T22:15:41.173
> 
> 标签：c#, .net, .net-4.0, task-parallel-library

我正在尝试遍历队列 - 从队列中获取 1 个项目，在后台任务中处理它，更新 UI，然后获取下一个项目，依此类推。问题是第一个项目在后台任务（线程）中处理，但随后的项目在 UI 线程中处理 - 阻塞 UI。

有谁知道为什么会发生这种情况以及如何解决这个问题？我的完整测试代码如下。注意：此代码仅供我学习和将来参考 - 不是任何实际应用。

```
public partial class MainWindow : Window
{
    private Queue<int> testQueue = new Queue<int>();
    private TaskScheduler uiScheduler;

    public MainWindow()
    {
        InitializeComponent();

        this.uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();
        this.testQueue = new Queue<int>();
        this.testQueue.Enqueue(3);
        this.testQueue.Enqueue(6);
        this.testQueue.Enqueue(7);
        this.testQueue.Enqueue(11);
        this.testQueue.Enqueue(13);
    }

    // just a method that takes about 1 second to run on a modern pc
    private double SumRootN(int root)
    {
        double result = 0;
        for (int i = 1; i < 10000000; i++)
        {
            result += Math.Exp(Math.Log(i) / root);
        }
        return result;
    }

    private void testQueueButton_Click(object sender, RoutedEventArgs e)
    {
        this.processQueue();
    }

    private void processQueue()
    {
        if (this.testQueue.Count > 0)
        {
            int root = this.testQueue.Dequeue();
            Task<double>.Factory.StartNew(() => SumRootN(root))
                .ContinueWith(t =>
                {
                    this.statusText.Text += String.Format("root {0} : {1}\n", root, t.Result);
                    this.processQueue();
                }, uiScheduler);
        }
        else
        {
            this.statusText.Text += "Done\n";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:37:09.477

感谢您发布允许我调试的重现。

Task.Factory.StartNew 在 scheduler 上运行您的任务`(factoryScheduler ?? currentTaskScheduler ?? threadPoolScheduler)`。您进入案例 2：您的新任务从其父任务继承调度程序。

我注意到您好奇地使用递归调用来模拟循环。如果你这样做，问题就会消失：

```
 Task<double>.Factory.StartNew(() => SumRootN(root))
            .ContinueWith(t =>
            {
                this.statusText.Text += String.Format("root {0} : {1}\n", root, t.Result);
            }, uiScheduler).ContinueWith(t => { this.processQueue(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:22:49.533

那是因为您正在使用`TaskScheduler.FromCurrentSynchronizationContext()`-您确实知道它的作用吗？（让它在它被调用的同一个线程上运行，在你的情况下是 UI）

**编辑：** usr 回答了你为什么会这样，但你也可以这样做（对于准并行处理）：

```
 int root = this.testQueue.Dequeue();
    Task<double>.Factory.StartNew(() => SumRootN(root))
        .ContinueWith(t =>
        {
            this.statusText.Text += String.Format("root {0} : {1}\n", root, t.Result);
        }, uiScheduler);
    this.processQueue(); 
```

# objective-c - 我可以使用两个代表：classB中的delegateA，classA中的delegateB吗？

> ID：11181645
> 
> 赞同：0
> 
> 时间：2012-06-24T22:17:06.047
> 
> 标签：objective-c, delegates, protocols

我在 HelloWorldLayer 中有我的代码，我正在使用委托来更改 ScoreLayer 中的分数，并且我想从 ScoreLayer 向 HelloWorldLayer**发送一条消息**，以便使用新图像更改 ui。

是否可以在每个班级中创建一个代表（在 ScoreLayer 中创建一个 HelloW... 代表，在 HelloW... 中创建一个 ScoreLayer 代表）？类似的东西：

```
hellolayer.delegate = scoreLayer;
scoreLayer.powerUpDelegate = hellolayer; 
```

?

`@class MyClass`不起作用：协议未被识别。
`"#import "..."`：其中一个协议无法识别，但我想会有问题，因为 classA 将导入 classB，这将再次导入 classA 等等。

我应该怎么做？这是一些代码：

```
 //in HelloWorldLayer.h :

#import "ScoreLayer.h"

@protocol PowerUpDelegate
-(void)scalePowerUp;
@end

// HelloWorldLayer
@interface HelloWorldLayer : CCLayer <PowerUpDelegate>
{ … }

@property (nonatomic,retain) id <ScoreDelegate> delegate;

//in ScoreLayer.h :

//@class HelloWorldLayer; -->does not recognize the protocol
#import "HelloWorldLayer.h"

@protocol ScoreDelegate
//...
@end

@interface ScoreLayer : CCLayer <ScoreDelegate>{
    //...
}

@property (nonatomic,retain) id <PowerUpDelegate> powerUpDelegate;//-->cannot find protocol definition... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:21:39.177

我建议使用实现这两种协议的第三个类并使用该类来处理委托方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:23:54.487

是的; 你可以像预先声明类一样预先声明协议，所以把它放在你的`ScoreLayer`类的顶部：

```
@protocol PowerUpDelegate; 
```

# ruby - 从 Watir / Ruby 中的 webtable 中提取文本

> ID：11181648
> 
> 赞同：1
> 
> 时间：2012-06-24T22:18:27.017
> 
> 标签：ruby, testing, nokogiri, watir

我正在尝试从损益表中提取数据，网址是[http://finance.yahoo.com/q/is?s=LMT+Income+Statement&annual](http://finance.yahoo.com/q/is?s=LMT+Income+Statement&annual)

我无法使用 browser.table(:name, 'blah') 或 (:id, 'blah') 找到表，但是使用此代码使用带有 Nokogiri 的 xpath 有一些运气，在我已经初始化所有内容并浏览到页面：

```
page_html = Nokogiri::HTML.parse(browser.html)
tobj = page_html.xpath('//*[@id="yfncsumtab"]').inner_text 
```

现在我可以获取 tobj 并将数据提取出来，但是尝试将对象作为表格进行操作对我没有任何好处。关于如何将表存储为变量的任何建议都会有所帮助。我可能可以计算出从那里迭代行/列，但我不介意你是否添加了一些可以做到这一点的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:06:07.240

你知道 Watir 有 xpath 支持吗？

```
browser.element(:xpath => '//*[@id="yfncsumtab"]') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T00:41:10.953

这样看：

```
doc = Nokogiri::HTML.parse(browser.html)
table = doc.at('table#yfncsumtab')

# iterate through tr's
table.search('tr').each do |tr|
  # do something with tr
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T20:21:12.497

尝试`browser.element(id: "yfncsumtab").text`

# c++ - 在 WM_CREATE 中创建子窗口，同一线程的相关性？

> ID：11181649
> 
> 赞同：0
> 
> 时间：2012-06-24T22:18:44.953
> 
> 标签：c++, windows, childwindow, createwindow, message-loop

一个典型的模式是在 message 的消息回调 ( `WndProc`) 中创建一个子窗口`WM_CREATE`：

```
LRESULT APIENTRY WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam) {
...
switch (message) {
  case WM_CREATE:
  ....
  hwndChild[i] = CreateWindow (szChildClass[i], NULL, WS_CHILDWINDOW | WS_BORDER  ... 
```

我完全理解这是一个很好的机会，但以后再做会有问题吗？这样做的一个原因是子窗口是在同一个线程中创建的。但是还有其他原因吗？

在同一个线程（作为父线程）中创建子窗口有多重要？至于“[父GUI对话框线程的子线程可以创建子窗口吗？](https://stackoverflow.com/questions/3640543/can-a-child-thread-of-parent-gui-dialog-thread-create-a-child-window) ”这似乎不是一般问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:36:19.110

稍后创建子窗口没有问题，但是，正如您所提到的，它应该从同一个线程创建。

例如，您可以在 WM_COMMAND 消息处理程序中创建一个子窗口（例如，当用户单击按钮时）或作为对 WM_TIMER 的响应。

从另一个线程创建子窗口是个坏主意，因为每个线程都有自己的消息队列。但是，如果您希望另一个线程开始创建窗口，您可以通过向您的窗口发送用户定义的消息来解决它：

1.  定义您的消息（例如#define WM_CREATEMYWINDOW WM_USER + 123）
2.  从另一个线程将其发布到您的窗口：

    ```
    PostMessage(g_hWnd, WM_CREATEMYWINDOW, 0, 0); 
    ```

3.  在您的窗口过程中创建子窗口：

    ```
    if (message == WM_CREATEMYWINDOW)
        hwndChild[i] = CreateWindow(...); 
    ```

# facebook - 是否可以通过 facebook like 按钮将喜欢的链接添加到类别？

> ID：11181653
> 
> 赞同：-1
> 
> 时间：2012-06-24T22:19:03.613
> 
> 标签：facebook, facebook-graph-api, facebook-like

我在一个电影网站上工作，我希望通过 facebook like 按钮将链接添加到电影类别中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:51:31.847

是的，只需在 Like 按钮的 href 参数中引用的页面上的元标记中将“movie”设置为“og:type”属性。

```
<meta property="og:type" content="movie" /> 
```

有关定义 Facebook“类型”的更多信息：http: [//developers.facebook.com/docs/opengraphprotocol/#types](http://developers.facebook.com/docs/opengraphprotocol/#types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:49:37.547

只要该类别有一个单独的 URL 和一个可以被 Facebook 抓取的页面，就可以。您可以为此创建一个赞。

# javascript - 自动滚动 JS 幻灯片不工作

> ID：11181654
> 
> 赞同：0
> 
> 时间：2012-06-24T22:19:05.390
> 
> 标签：javascript

我有一个用于自动滚动 js 幻灯片的代码片段。我将脚本粘贴在“”前面。并确保我关闭了 div。我有一个名为 images 的文件夹，其中包含图像“case1.jpg、case2.jpg、case3.jpg 和 case4.jpg”。由此，我无法说出脚本为什么不起作用。这是脚本。

```
<script type="text/javascript">
var images = new Array('case1.jpg', 'case2.jpg', 'case3.jpg', 'case4.jpg');
var count = -1;

function slideShow() {
    if (count <= 2) {
        count++;
    }
    document.getElementById("show").innerHTML = "<img src="images/"+images[count]+"">";
    setTimeout("slideShow()", 3000);
}​    </script> 
```

而 HTML 只是...

```
<div id="show"> 
<script>slideShow()</script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:21:09.773

我怀疑是这个部分

```
"<img src="images/"+images[count]+"">" 
```

因为您没有转义双引号。它应该是

```
"<img src=\"images/"+images[count]+"\">" 
```

或使用单引号换行

```
'<img src="images/'+images[count]+'">' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:21:42.553

你混合了引号：

```
"<img src="images/"+images[count]+"">"; 
```

改成：

```
'<img src="images/' +images[count]+'">'; 
```

确保您致电：

```
document.getElementById("show") 
```

元素渲染后。

改变：

```
setTimeout("slideShow()", 3000); // Uses evil eval 
```

至：

```
setTimeout(slideShow, 3000);     // Doesn't use eval. 
```

**检查控制台是否有错误！！！**

当然，请确保您调用了该`slideShow`函数：

```
slideShow(); 
```

# c++ - GetCursorPos 和权限

> ID：11181659
> 
> 赞同：0
> 
> 时间：2012-06-24T22:20:13.130
> 
> 标签：c++, c, winapi, mfc, mousemove

我有一个检索光标位置的方法，并使用 GetCursorPos() 和 ScreenToClient() 获取特定窗口上的坐标。除了一个奇怪的东西外，它工作得很好。

**如果目标窗口在管理员权限下运行并且我的应用程序在当前用户的权限下运行，则在我的应用程序窗口超出目标之前我无法获得坐标。**

如果我以管理员身份运行我的应用程序并且目标在当前用户下运行，也会发生同样的事情。

为什么 ？

编辑 ：

问题不是获取光标的坐标，而是当窗口的权限和我的应用程序不同时获取坐标。

**发现问题（未解决）：原因是“用户界面特权隔离（UIPI）”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:32:57.343

你可以得到窗口的客户区矩形（`GetClientRect`）并从鼠标位置减去客户区的左上角位置，它基本上是一样的`ScreenToClient()`

代码：

```
POINT screen_cursor_pos;
RECT client_rect;
int cursor_x,cursor_y;

GetCursorPos(&screen_cursor_pos);
GetClientRect(hwnd,&client_rect);

cursor_x=screen_cursor_pos.x-client_rect.left;
cursor_y=screen_cursor_pos.y-client_rect.top; 
```

# javascript - 如何在没有弹出窗口阻止程序阻止它的情况下使用 window.open 创建一个不确定延迟的弹出窗口（用于社交身份验证）

> ID：11181660
> 
> 赞同：0
> 
> 时间：2012-06-24T22:20:29.403
> 
> 标签：javascript, jquery, facebook, twitter, popup

我想要的体验是：

1.  用户点击“注册”
2.  发生了一些异步服务器的事情（检查和验证。随便）
3.  完成所需的异步服务器内容后，会弹出 Facebook / Twitter / 任何身份验证对话框。

使这变得困难的几件事：

1.  社交弹出窗口小部件必须在弹出窗口中。它们不能在 iframe 内。
2.  弹出窗口阻止程序将阻止任何不在单击处理程序的即时函数中的 window.open 代码
3.  window.open 来自标准 ajax 回调处理程序的代码将被弹出窗口阻止程序阻止。
4.  jQuery 1.8 中不推荐使用同步 ajax 请求

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:56:24.323

这是一个普遍而[令人遗憾的问题](https://stackoverflow.com/questions/9514698/bypass-popup-blocker-on-window-open-when-jquery-event-preventdefault-is-set)。尽管 jQuery 可能会弃用同步 AJAX，但您始终可以使用非 jQuery AJAX 请求。另一种可能性是重构，其中发生以下情况：

1.  用户点击“注册”
2.  脚本调用 window.open 到本地 URI
3.  弹出窗口出现并在加载时运行“检查和验证”
4.  如果出现验证错误，弹出窗口会向父级发送错误并自行关闭
5.  如果没有，弹出窗口中的本地页面将重定向到 FB/Twitter OAuth 流

如果可能的话，我建议这样做。如果不是， async: false （或编写您自己的非常简单的跨浏览器 XHR 包装器）仍然是最好的方法。

# php - 试图数数，但变为 1

> ID：11181662
> 
> 赞同：4
> 
> 时间：2012-06-24T22:20:32.033
> 
> 标签：php

我正在尝试做一个计数器。我的意思是一个按钮，它使用 XHTMLrequest 并且只运行这个 PHP。

我的问题是为什么我的计数代码将文本文档的值更改为数字`1`。例如，如果我只是将值更改为`24`，而不是加 1 并将值更改为`25`，它会将值更改为数字`1`。

```
<?php

$fp = false;
// Open file for reading, then writing
while ( ($fp=fopen('clicks.txt','r+'))===false ) {
    usleep(250000); // Delay 1/4 second
}
// Obtain lock
while ( !flock($fp, LOCK_EX) ) {    
    usleep(250000); // Delay 1/4 second
}
// Read Clicks
$clicks = trim(fread($fp,1024));
// Add click
$clicks++;
// Empty file
ftruncate($fp,0);
// Write clicks
fwrite($fp, $clicks);
// Release Lock
flock($fp, LOCK_UN);
// Release handle
fclose($fp);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:22:19.790

这是因为当您从文件中读取信息时，它是一个字符串，需要转换为整数才能添加 1。

改变：

```
$clicks = trim(fread($fp,1024)); 
```

到

```
$clicks = intval(trim(fread($fp,1024))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:29:19.423

我注意到你`ftruncate`，但从来没有注意到[`rewind`](http://www.php.net/manual/en/function.rewind.php)文件。请记住，指针停留在上次读取的位置，然后截断它使文件为 0，但指针保持不变。

引用 PHP 文档：

```
<?php
$filename = 'lorem_ipsum.txt';

$handle = fopen($filename, 'r+');
ftruncate($handle, rand(1, filesize($filename)));
rewind($handle);
echo fread($handle, filesize($filename));
fclose($handle);
?> 
```

请注意，PHP 的示例也会倒带文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T23:39:46.470

替换`$clicks++;`为`$clicks = $clicks + 1;`。

# java - 为什么我的冒泡排序方法不起作用？

> ID：11181664
> 
> 赞同：3
> 
> 时间：2012-06-24T22:20:54.207
> 
> 标签：java, sorting, bubble-sort

我想弄清楚，我只是需要指出正确的方向。请不要只写解决方案，我想了解我需要做什么才能使其工作。

```
 static void bubbleSort() {
        int [] a = {1,3,4,2,5};
        int [] b = new int[a.length];
        int j = 0;

        for(int c = 0;c <= a.length;c++){//this loop doesnt even do anything??? 
            for(int i = 0;i<a.length-j;i++){

                if(a[i]>a[i+1]){
                    b[i] = a[i+1];
                    b[i+1] = a[i];
                    j++;
                }
                else{
                    b[i] = a[i];
                    b[i+1] = a[i+1];
                    j++;
                }
            }
        }

        for(int i = 0; i< b.length ; i++)
            System.out.println(b[i]);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:52:12.593

您的代码有很多问题-

1）您不需要额外的数组'b'，可以就地完成冒泡排序。

2）考虑使用'j'，将其替换为'c'并检查这对循环有何影响。

3）你的新排序数组出现在'b'中，并且在每一步你都在检查条件 -

```
if(a[i]>a[i+1]) 
```

你不觉得'b'在这里可以发挥作用吗？

如果您仍有问题，请考虑以上几点并评论此帖子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T22:42:04.130

不确定，但我认为这应该是正确的实现

```
static void bubbleSort() {
    int [] a = {1,3,4,2,5};
    for(int c = 0;c < a.length;c++){//now it does 
        for(int i = 0;i+1<a.length-c;i++){

            if(a[i]>a[i+1]){
                int tmp = a[i];
                a[i] = a[i+1];
                a[i+1] = tmp;
            }
        }
    }

    for(int i = 0; i< a.length ; i++)
        System.out.println(a[i]);
} 
```

你一次又一次地跑过a，但你改变了b，你没有比较。所以你的第一个 for 循环什么也没做。你不需要 j，c 可以工作。因为如果你在内循环中做了1个循环，最大的数字在最后，所以你不必再次检查它。c循环应该运行到c

# php - 如何检查时间偏移是否在夏令时？

> ID：11181667
> 
> 赞同：5
> 
> 时间：2012-06-24T22:21:31.037
> 
> 标签：php, time, timezone

我使用的 CMS 允许我访问用户与 UTC/GMT 时间的时间偏移量。因此，如果用户将他们的时区设置为 EST，那么这个偏移量将是“-5”。

当我需要显示当前时间时，我现在正在做的事情是：

```
date('M j Y h:i A', time() + $offset*3600) 
```

这有效，**除非**夏令时对用户有影响，否则会晚一个小时。

所以，我的问题是，我如何确定给定的时间偏移量（如“-5”）是否需要增加一个小时？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T23:09:10.627

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

> I (大写 i) | 日期是否为夏令时 | 如果夏令时为 1，否则为 0。

这有帮助吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T22:27:15.217

您不能仅从偏移量中得出这一点，因为偏移量适用于整个纬度，并且其上的国家/地区没有有效的统一 DST。例如[在澳大利亚，昆士兰、北领地或西澳大利亚没有夏令时，](http://wwp.greenwichmeantime.com/time-zone/australia/daylight-saving-time/index.htm)但在其他地方。您必须对[您的用户进行地理定位](https://stackoverflow.com/questions/5398674/get-users-current-location-in-php)，然后使用[PHP 的 DateTimeZone API](http://php.net/datetimezone)检查该国家/地区是否有 DST。

另请参阅[如何自动检测用户的时区？](https://stackoverflow.com/questions/5203382/how-to-automatically-detect-users-timezone)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T22:27:20.830

如果您只有“-5”，那么您没有足够的信息来做出决定。如果您可以安排访问用户所在时区的名称（例如“America/New_York”），那将是更好的选择。

# java - android错误未知方法'getTitle'

> ID：11181672
> 
> 赞同：0
> 
> 时间：2012-06-24T22:22:36.047
> 
> 标签：java, android

您好，我正在测试以下代码，它假设列出了安装在 android 驱动的机器上的所有应用程序。要编辑它，我使用[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui&feature=search_result) 一个 android java 编辑器，问题是 AIDE 总是向我显示一个错误：“未知方法 'getTitle'”。有人可以帮助我吗？

```
public class AppListAdapter extends BaseAdapter {

  private LayoutInflater mInflater;
  private List<App> mApps;

  public AppListAdapter(Context context) {
     // cache the LayoutInflater to avoid asking for a new one each time
     mInflater = LayoutInflater.from(context);
  }

  @Override
  public int getCount() {
    return mApps.size();
  }

  @Override
  public Object getItem(int position) {
    return mApps.get(position);
  }

  @Override
  public long getItemId(int position) {
    return position;
  }

  @Override
  public View getView(int pos, View convertView, ViewGroup parent) {

    AppViewHolder holder;
    if (convertView == null) {
      convertView = mInflater.inflate(R.layout.row, null);

      // creates a ViewHolder and stores a reference to the child view
      holder = new AppViewHolder();
      holder.mTitle = (TextView) convertView.findViewById(R.id.apptitle);
      convertView.setTag(holder);
    } else {
      // reuse/overwrite the view passed assuming(!) that it is castable!
      holder = (AppViewHolder) convertView.getTag();
    }
    holder.setTitle(mApps.get(pos).getTitle());

    return convertView;
  }

  public void setListItems(List<App> list) {
    mApps = list;
  }

  /**
   * A view holder which is used to reuse views inside a list.
   */
  public class AppViewHolder {

    private TextView mTitle;

    /**
     * Sets the text to be shown as the app's title
     *
     * @param title the text to be shown inside the list row
     */
     public void setTitle(String title) {
       mTitle.setText(title);
     }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:26:06.353

```
 mApps.get(pos) 
```

返回一个类型的对象`App`

您必须`getTitle`在类中创建一个方法`App`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:26:40.487

**您的App**类中可能没有**getTitle()**方法

# php - mysql/php 这是连接 mysql DB 的安全方式吗？

> ID：11181675
> 
> 赞同：1
> 
> 时间：2012-06-24T22:22:50.407
> 
> 标签：php, mysql, database, security

好的，很多人都在问这个问题，并且有很多方法可以使与 DB 的连接安全，

现在我做了一些谷歌搜索，许多人建议，将与数据库代码的连接放在 html_public 之外的文件中，并在我需要建立连接时从那里调用它。

老实说，我对我所拥有的感到满意，尽管我不确定它有多安全，

这就是我连接到数据库的方式：

首先，我确保所有输入都完全转义和验证......

之后，在同一页面中，我建立了连接，例如：

```
mysql_connect("localhost","Admin","Password") or 
die ("DB Connection Error");
mysql_select_db("Users") or die ("DB Error"); 
```

之后的其余代码，我关闭了 mysql 连接。

现在，DB用户信息写在页面上感觉不对，但是某人（“黑客”）怎么能得到这个信息呢？

我的意思是，所有输入都完全转义和验证，我使用的用户具有非常有限的特权，例如仅选择和更新...。

这安全吗？？如果没有，你能建议一个更安全的方法吗？

非常感谢您提前提供帮助:)

阴凉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T22:27:17.253

您应该考虑将此文件放在 Web 根目录之外的原因是，一些托管服务提供商有时会暂时停止解释 PHP（由于配置错误，通常是在他们更新之后）。然后代码将以明文形式发送，密码将在野外出现。

考虑这个目录结构，`public_html`Web 根目录在哪里：

```
/include1.php
/public_html/index.php
/public_html/includes/include0.php 
```

现在考虑这个**index.php**：

```
<?php
include('includes/include0.php');
do_db_work_and_serve_page_to_visitor();
?> 
```

如果 Web 服务器开始公开提供此文件，那么很快就会有人尝试下载**include0.php**。然而，没有人能够下载**include1.php**，因为它位于 Web 根目录之外，因此从不被 Web 服务器处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:38:30.580

我个人没有听说过托管服务提供商不解释 PHP，从而导致您的 php 源代码公开。我刚刚在没有安装 php 的基于 RHEL5 的服务器上对此进行了快速测试，并在尝试访问 php 文档时返回了一个空白页面。

mysql_* 函数在最新版本的 php 中已被弃用，现在正朝着 mysqli 方向发展，作为一种更高效、更安全的整体解决方案；我建议你看一看；[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php) - PHP5.4 中没有任何弃用错误或任何类似的错误，用于使用普通的 mysql_ 函数，但如果你想掌握最新情况，看看mysqli。

至于对上述问题的快速回答，老实说，我认为这种方法相当安全。只要确保您设置了转义字符等，我认为您不会遇到任何问题。

**编辑：**有些人发帖说，在极少数情况下，一些提供商会以这种方式泄露您的 php 源代码。如果是这种情况，我的第一个建议是切换提供程序.. 但是使用 include_once 从另一个 php 文件/lib 加载您的数据库信息将是一个快速的解决方法。但是同样，如果您的提供商的设置确实允许此类泄漏，我会比您更关心他们的安全性。

您可以让 php 从存储在公共网络空间之外的文本文件中获取您的数据库密码（使用 fopen），但我个人认为没有任何真正的理由这样做。

祝你好运！

*   伊根

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T23:03:56.497

最好的做法是使用 PHP PDO 而不是旧的 mysql API。

看看： http: [//php.net/manual/en/ref.pdo-mysql.connection.php](http://php.net/manual/en/ref.pdo-mysql.connection.php)

另外，这里有一篇有趣的文章： http: [//net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

# facebook - 如何检测用户是否在 facebook 框架中查看应用程序？

> ID：11181679
> 
> 赞同：0
> 
> 时间：2012-06-24T22:23:52.563
> 
> 标签：facebook, user-interface

我在我的应用程序中禁用了滚动，所以只有来自 facebook 的滚动 - 它看起来很可爱，我喜欢它，但如果直接在网站上访问我的应用程序，也没有滚动条。我试图检测用户是否使用 url [http://mysite.com](http://mysite.com)或[http://apps.facebook.com/myapps](http://apps.facebook.com/myapps)加载页面，两种方式我都得到相同的直接地址链接，所以我无法检测用户是否查看我的应用程序通过 facebook，我需要隐藏滚动条或在现场查看它，我需要显示滚动条。那么有没有办法检测用户如何查看我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:28:47.963

您使用的是什么服务器端语言？如果您在 facebook iframe 中，您的页面将被请求一个名为`signed_request`. 您可以检查是否已在您的代码中设置，如果您知道您在 facebook iframe 内，如果不是，那么您在您的网站上。从这里您可以有条件地更改您的 css 以允许内容正确溢出并获得滚动条，或者将它们重定向到 facebook 应用程序。

# java - 使用混合创建多个被黑色包围的透明区域

> ID：11181688
> 
> 赞同：3
> 
> 时间：2012-06-24T22:26:25.547
> 
> 标签：java, opengl, lwjgl

我一直在玩openGL，我想知道如何拍摄图像（例如黑色背景），然后在顶部渲染一个较小的白色渐变，但让它使白色渐变透明（而不是白色）并从黑色背景中删除。在中心留下带有透明渐变的黑色背景。如果有帮助，我正在使用 LWJGL。

有没有办法通过混合来做到这一点？

编辑：好的，有什么方法可以代替减去两个图像，而是在图像周围画黑色？所以我有我的白色渐变，将其更改为透明，然后在其周围绘制黑色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:27:41.273

固定功能通常使用现代 GL 驱动程序中的着色器来实现（旧 ATI 的演示文稿中包含所有固定功能的 SM2.0+ 着色器）。

像这样接近平凡的混合片段着色器

```
in vec2 TexCoord;

uniform sampler2D Texture0;
uniform sampler2D Texture1;

out vec4 out_FragColor;

void main()
{
     vec4 Color = texture(Texture0, TexCoord);

     /// The mask contains (R,G,B,A) - image + transparency
     /// for both the mask and the source
     vec4 Mask  = texture(Texture1, TexCoord);

     /// Mask is also significant as a color source, not only the alpha
     out_FragColor = Color * ( 1.0 - Mask.a ) + Mask * Mask.a;

     /// Thanks to Tim's comment, the last line can be done simpler:
     /* out_FragColor = mix(Color, Mask, Mask.a); */
} 
```

应该以您想要的方式混合图像。

这对于现代硬件来说并不过分，即使与 GL ES 2.0 硬件也 100% 兼容。

编辑：

我的一个项目中的图像（用于创建渐隐反射的简单蒙版）。

我们使用这个面具

![遮光罩](../Images/d744e78e0cb9ba65ce3764a0c337f8fc.png)

并在此图像中获得最终结果：[图库](http://www.linderdaum.com/Puzzle/PromoArt_1024x500.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T20:33:35.460

在特定情况下可能实现您想要的，但一般来说，一旦您“绘制黑色背景”，之后就无法使其透明。您无法移除或擦除已绘制的像素。

如果你可以在黑色背景**之前**绘制渐变，那么你可以将 alpha 存入帧缓冲区，然后在绘制黑色背景时对目标 alpha 进行采样。不过，您需要有一个真正的 alpha 纹理，因为在绘制时您无法真正将白色渐变转换为 alpha 渐变。

这是我建议的伪代码：

1.  在背景中画出你想要的任何东西
2.  使用 alpha 渐变创建纹理
3.  锁定颜色通道`glColorMask(GL_FALSE,GL_FALSE,GL_FALSE,GL_TRUE);`
4.  在背景上绘制 alpha 渐变
5.  取消屏蔽颜色通道`glColorMask(GL_TRUE,GL_TRUE,GL_TRUE,GL_TRUE);`
6.  使用以下混合选项绘制“黑色纹理”：`glBlend(GL_DST_ALPHA, GL_ONE_MINUS_DST_ALPHA)`

这应该会给你留下一个黑色的纹理，它下面的任何东西都有一个混合的渐变。

# r - R bioconductor mzR 库加载错误

> ID：11181691
> 
> 赞同：1
> 
> 时间：2012-06-24T22:26:51.293
> 
> 标签：r, bioconductor

希望有人可以帮助我.. 我正在尝试按照此处的说明安装 mzmatch.R 代谢组学包：http: [//mzmatch.sourceforge.net/tutorial.mzmatch.r.php](http://mzmatch.sourceforge.net/tutorial.mzmatch.r.php)

我对 R 完全陌生，所以这是我第一次做这种事情。首先，我下载了最新版本的 R 并将其安装在 Mac OSX 10.7 上。这是我运行的 R 版本：R 2.15.0 GUI 1.51 Leopard build 64-bit (6148)

然后我启动 R64.app 并键入以下命令（如上面链接中的说明中所指定）来安装包及其所有依赖项。

```
> source("http://bioconductor.org/biocLite.R")
> biocLite(c("faahKO", "xcms", "multtest"))
> install.packages(c("rJava","XML","snow","caTools","bitops","ptw"))
> source ("http://puma.ibls.gla.ac.uk/mzmatch.R/install_mzmatch.R") 
```

最后一步将始终失败并显示以下消息：

```
trying URL 'http://puma.ibls.gla.ac.uk/mzmatch.R/mzmatch.R.tar.gz'
Content type 'application/x-gzip' length 104535 bytes (102 Kb)
opened URL
==================================================
downloaded 102 Kb

* installing *source* package ‘mzmatch.R’ ...
** R
** preparing package for lazy loading
Error : .onLoad failed in loadNamespace() for 'mzR', details:
  call: value[[3L]](cond)
  error: failed to load module Ramp from package mzR
could not find function "errorOccured"
Error : package ‘mzR’ could not be loaded
ERROR: lazy loading failed for package ‘mzmatch.R’
* removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/mzmatch.R’
Warning message:
In install.packages(pkgs = "mzmatch.R.tar.gz", repos = NULL, type = "source") :
  installation of package ‘mzmatch.R.tar.gz’ had non-zero exit status 
```

我认为这是因为无法加载库“mzR”，所以我尝试了：

```
> biocLite("mzR")
> library("mzR") 
```

果然，出现了同样的错误：

```
Loading required package: Rcpp
Error : .onLoad failed in loadNamespace() for 'mzR', details:
  call: value[[3L]](cond)
  error: failed to load module Ramp from package mzR
could not find function "errorOccured"
Error: package/namespace load failed for ‘mzR’ 
```

我现在很迷茫，完全不知道该怎么办。谢谢阅读 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:45:25.873

假设您正在运行`mzR v1.2.1`和`Rcpp v0.9.12`，您看到的问题是两者之间不幸且意外的不兼容。同时，降级到[Rcpp_0.9.10.zip](http://cran.us.r-project.org/bin/windows/contrib/2.13/Rcpp_0.9.10.zip)将解决此问题。希望尽快做出适当的修复。

洛朗

**UDAPE：**问题是编译器/链接器错误的结果，需要新的 mzR 构建，现在可以通过`biocLite`.

# html - DIV 中的最大高度

> ID：11181697
> 
> 赞同：0
> 
> 时间：2012-06-24T22:27:18.557
> 
> 标签：html, css

我在让我的主要内容 div 伸展到全高时遇到问题，另一个容器能够伸展到全高。

[http://westcountrycreamteas.co.uk/test.html](http://westcountrycreamteas.co.uk/test.html)

是我试图向下延伸的页面，而有问题的 div 是内部的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:39:22.933

消除

```
height: auto !important 
```

从您的容器 div #outer。

应该解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:35:14.137

你可以试试

```
#para {
    margin-left: 10%;
    height:999px;
    overflow:hidden;
} 
```

但我认为，内容区域应根据内容进行扩展。

小提琴[http://jsfiddle.net/CPfyL/](http://jsfiddle.net/CPfyL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T22:36:13.043

我想你想要 max-height ：

```
div{
   height:100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T22:40:08.177

您的外部 div 中有一个错误。您已使用百分比设置其高度，但只能使用 px 设置高度。你该怎么办：

*   将外部 div 高度设置为所需的量，例如：`height: 900px;`
*   将您正在谈论的 div 的高度设置为与外部的高度相同。

# c - 任务调度的c代码

> ID：11181700
> 
> 赞同：-3
> 
> 时间：2012-06-24T22:27:32.433
> 
> 标签：c

我想执行这段代码来运行自动任务调度，因为这段代码有两个错误。我无法弄清楚更正。

错误是“（在函数'main'中）”和“（赋值中的左值无效）”

```
#include<unistd.h>
#include<stdio.h>
#include<stdlib.h>
#include<time.h>
#include<string.h>

int main()
{
    char *timetoken;
    char currtime[7];
    char schedtime[9];
    int i;
    struct tm *localtimeptr;
    strcpy(schedtime,"15:25:00");
    while(true)
    {
        time_t lt;
        sleep(1);
        time(&lt);
        localtimeptr = localtime(&lt);
        timetoken=strtok(asctime(localtimeptr)," ");
        for(i=1;i<5;i++)
            timetoken=strtok(NULL," ");
        if(i==3)
        {
            strcpy(currtime,timetoken);
        }
    }
    printf("The current time is: %s\n",currtime);
    printf("We are waiting for: %s\n",schedtime);
    if(!strcmp(currtime,schedtime))
    {
        printf("Time to do stuff \n");
        system("ROBOCOPY C:\\oslab E:\\BACKUP /e/mir/np /log:backup_log.txt");
    }        
    getch();
    return 0;                      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:29:33.750

`time = (&lt);`

您没有定义一个名为`time`... 的变量，您确定这不是要设置不同的变量吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:30:12.167

```
time = (&lt); 
```

您正在尝试分配 to `time`，但您自己从未声明过任何名为`time`. 因此，您尝试从 重新`time(3)`分配`time.h`。

也许你在这一行中的意思是别的东西，比如

```
time(&lt); 
```

# java - Java 同步 - 我做对了吗？

> ID：11181703
> 
> 赞同：1
> 
> 时间：2012-06-24T22:28:23.703
> 
> 标签：java, asynchronous

我不习惯使用同步。下面的代码片段看起来对吗？

```
public void setNewSessionListener(NewSessionListener newSessionListener) {
    if (this.newSessionListener != null)
        synchronized (this.newSessionListener) {
            this.newSessionListener = newSessionListener;
        }
    else
        this.newSessionListener = newSessionListener;
} 
```

更具体地说，我需要执行空检查吗？我有一种直觉，该代码存在根本性的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:31:29.483

有两个错误。第一个是，如果您访问一个需要同步的字段，您总是必须使用相同的锁来访问它。此外，您必须检查该字段是否为空并写入同一同步块中的该字段，否则当您向该字段写入内容时，它可能已经不为空。

第二个是最好在不改变的东西上同步，换句话说，在静态最终字段或实例本身上。例如，您可以专门为此目的创建一个锁定对象：

```
private static final Object LOCK = new Object(); 
```

然后你会写：

```
synchronized (LOCK) {
    if (this.newSessionListener == null) this.newSessionListener = newSessionListener;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T22:31:06.107

你的感觉是对的。`synchronized`您应该在块内进行空值检查。否则该块不会阻止双重初始化。此外，您不应该同步`this.newSessionListener`您将要更改的对象 - 选择一个将在整个块范围内保留的对象（引用）。这是保证在任何时间点只有一个线程可以进入这个代码块的唯一方法。实现此目的的典型方法是`synchronize`on `this`。或者，您可以在一个`private final`对象上进行同步，该对象仅用于此目的。

此外，最终您在分支`if`和`else`分支中执行相同的任务，这可能不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T22:35:17.270

这至少是一个非常糟糕的主意。您正在同步一个然后分配给的对象。

因为您使用的是同步的，所以我假设这是异步调用的，它可以由一个线程调用，而另一个线程在此代码中。如果是这样，您并没有锁定一个公共对象，而是锁定了它在该时间点持有的值。

可能，我可能强调，你可以同步（这个）。这将确保对该特定对象的此方法的所有调用都是同步的。并且对该类的其他实例的调用针对该其他对象被锁定 - 但不是跨实例。

如果要跨所有实例化对象进行同步，请调用 synchronized (YourClass)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T10:43:05.147

这是另一种可能性（我倾向于使用显式锁而不是同步块）：

```
private ReentrantLock lock = new ReentrantLock();

lock.lock();
try {
  // do your synchronized code here. 
}
finally {
  lock.unlock();
} 
```

虽然只是通过查看您的代码，但我不确定为什么会有一个 if 块。为什么你在一种情况下同步，而不是另一种情况？特别是考虑到您在这两种情况下都在做同样的任务？

# coldfusion - 在 ColdFusion cfgrid 标签中对日期和时间字段进行排序

> ID：11181706
> 
> 赞同：0
> 
> 时间：2012-06-24T22:29:03.670
> 
> 标签：coldfusion

我有一个带有单独日期和时间字段的表，这些字段使用 CFGRIDCOLUMN 显示在 ColdFusion CFGRID 中。我希望能够按日期排序，然后按时间排序。有没有办法对多个列进行排序？它的排序方式是先单击时间列排序，然后单击日期列排序，但这并未反映在列标题排序指示器中。

我可以将这些字段组合成一个日期时间字段，并使用 Ext JS 掩码属性在单独的列中显示日期和时间。将日期和时间放在单独的字段中是否让我自己觉得太难了？

# javascript - 循环时IE中的错误

> ID：11181707
> 
> 赞同：0
> 
> 时间：2012-06-24T22:29:13.717
> 
> 标签：javascript, arrays

让我澄清我的问题，

我想制作一个元素包含5个字段的元素，所以如果旧元素为空，我不希望用户应该能够放入新元素，所以我在循环旧元素时发出警报，看看是否有一些字符串，如果没有，则不要添加新元素并发出警报请填写所有字段

这里又是我的代码

```
function addEvent() {
      var ni = document.getElementById('discount'); // Takes the a div named discount
      var discountForm = document.getElementById('discountForm'); // Takes the a form named discountForm
      var numi = document.getElementById('theValue'); // Takes the a hidden input field named theValue
      var num = (document.getElementById("theValue").value -1)+ 2; // Start counting to set the new divs form numbers
      numi.value = num;
      var divIdName = "my"+num+"Div"; // the new divs will be named
      var allDivTags = discountForm.getElementsByTagName('div'); // take all div tags
      var numOfDivs = (allDivTags.length -1); // take the number of the old div
      var oldDivIdName = document.getElementById(allDivTags[numOfDivs].id); // old div id
      var newdiv = document.createElement('div'); //the new div
      newdiv.setAttribute("id",divIdName);
      newdiv.innerHTML = "Company <select name=\"company[]\"><option value=\"\"></option><option value=\"ZI\">Avis</option><option value=\"ET\">Enterprise</option><option value=\"ZE\">Hertz</option><option value=\"ZD\">Budget</option><option value=\"ZR\">National</option><option value=\"AL\">Alamo</option></select> Discount Type <select name=\"type[]\"><option value=\"CD\">Discount Number</option><option value=\"PC\">Coupon Number</option></select> Code <input name=\"code[]\" type=\"text\"> Title <input name=\"title[]\" type=\"text\"> <a href=\"javascript:;\" onclick=\"removeElement(\'"+divIdName+"\')\">Remove</a>"; // creating the fileds in the new div
      ni.appendChild(newdiv);
      for(i=0; i<discountForm.elements.length;i++){ // loop through the divs
          if(numOfDivs != i-1){ // if tho old div exist and if the old div fields are empty
            if(oldDivIdName.children[i].value.length == 0){
              removeElement(divIdName); // then dont put the new one
              alert('Please enter all fields');
            }
          }
      }

    } 
```

但我的问题是在 IE 中出现错误`children[...].value.length is null or not an object`，所以我试图弄清楚如何修复它，

我希望它现在对你来说更清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:45:40.437

从您提供给我们的信息很难判断。但我的第一个猜测如下：

```
for(i=0; i<discountForm.elements.length;i++){
  if(numOfDivs != i-1){
    if(oldDivIdName.children[i].value.length == 0){
      removeElement(divIdName);
      alert('Please enter all fields');
    }
  }
} 
```

上面你正在做：

```
oldDivIdName.children[i] 
```

但是我被定义为表单中元素的数量，从我所看到的......而不是 oldDivIdName 的子元素数量。如果表单中的元素多于 oldDivIdName 中的元素，则 oldDivIdName.children[i] 的值将为空。并且“值”未在 null 上定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T02:41:38.020

从您提供给我们的信息很难判断。但我的第一个猜测如下：

首次调用此方法时，allDivTags.length 是否为 null 或负数，结果未得到元素：

```
var oldDivIdName = document.getElementById(allDivTags[numOfDivs].id); 
```

# deployment - 无法部署到 Azure

> ID：11181724
> 
> 赞同：1
> 
> 时间：2012-06-24T22:31:49.127
> 
> 标签：deployment, azure, azure-web-roles

昨天，我可以完美地将我的服务部署到 Windows Azure 上的托管服务实例。今天，我总是遇到类似的错误

```
6:09:56 PM - Preparing...
6:09:56 PM - Connecting...
6:09:59 PM - Uploading...
6:11:15 PM - Creating...
6:12:28 PM - Starting...
6:13:20 PM - Initializing...
6:13:21 PM - Instance 0 of role TestWebRole is initializing
6:18:39 PM - Instance 0 of role TestWebRole is busy
6:21:51 PM - Instance 0 of role TestWebRole is stopped
6:21:51 PM - Warning: All role instances have stopped
6:22:23 PM - Instance 0 of role TestWebRole is busy
6:23:26 PM - Instance 0 of role TestWebRole is stopped
6:23:26 PM - Warning: All role instances have stopped 
```

这些错误通常是由于云服务器上不存在的依赖关系而发生的（如果您搜索上面的警告，这就是您在 SO 和 Google 上找到的内容）。但是我检查了每一个依赖项，它们与`Copy Local=True`.

为了进一步隔离问题，我首先使用新的 MVC 3 Web 角色创建了一个新的 Azure 项目，然后使用标准的 ASP.NET Web 角色创建了一个新的 Azure 项目，但仍然没有运气。我试图停用诊断，重新激活它。在 Azure 模拟器上，项目运行良好。

即使是标准的 Visual Studio 也无法部署到 Azure，我总是得到`Warning: All role instances have stopped`.

有点令人沮丧。我正在使用带有 Azure 工具 1.3 的最新 Azure SDK 1.7。

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T05:54:04.087

如果项目在模拟器中运行良好，大多数情况下这是因为您在计算机上安装了所有必需的依赖项，但在 Windows Azure 中没有。

我建议您查看 David 答案中的博文，除了解释如何禁用会话状态之外，它还解释了**必须**将哪些程序集设置为 Copy Local 才能使 MVC3 正常工作。或者，您可以尝试史蒂夫在他的博文中描述的一种技术：http: [//blog.smarx.com/posts/asp-net-mvc-in-windows-azure](http://blog.smarx.com/posts/asp-net-mvc-in-windows-azure)

它可以真正帮助您激活远程桌面来解决这个问题。如果您注意到您的实例正在循环，我建议您通过 RDP 连接并查看事件查看器（您可能需要尝试几次才能连接）。请留意应用程序日志中的 ASP.NET 警告，大多数情况下，这些警告会为您提供有关缺少哪些程序集的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:40:50.750

令人惊讶的是，昨天它起作用了，而今天却不起作用。也就是说：当创建一个全新的 asp.net 项目时，默认会话状态提供程序被映射到本地 SQL 数据库，这在 Windows Azure 中不存在。您需要编辑 web.config 以将其指向 Windows Azure SQL 数据库或缓存（共享缓存服务或 SDK 1.7 中可用的新角色内缓存）。

Nate Totten 在去年的[这篇博](http://blog.ntotten.com/2011/08/03/windows-azure-tools-1-4-released/)文中讨论了会话问题。

# javascript - Mousedown 和 mousemove 在 Meteor 中的执行不一致

> ID：11181731
> 
> 赞同：2
> 
> 时间：2012-06-24T22:33:04.107
> 
> 标签：javascript, meteor

我在 Meteor 中有一个单页应用程序。

我想跟踪是否将小书签（以`<a>`包含图像的标签的形式）拖到书签栏。

我正在使用 mousedown、mousemove 和 mouseup 的组合来尝试跟踪拖动。

```
Template.myTemplate.events = {  
  'mousedown': function(){    
    Session.set('dragging', true)   
    console.log('drag starts')
  },  
  'mouseup': function(){  
    if (Session.get('dragging') == true && event.y < 10){   
      // The result i want  
    }  
    Session.set('dragging', false)  
    console.log('drag stops')  
  }  
} 
```

拖动开始得很好，但是在鼠标离开`<a>`标签后不久，它似乎就停止了，并且`mouseup`没有按应有的方式注册。

如果我`return false`之后`mouseup`和`mousedown`- 即，逻辑会正常工作。在 mousedown 之后，我可以将鼠标移动得更远更宽，并注意`event.y`< 10 并且没有障碍 - 但是代码没有达到用户能够拖动`<a>`标签的预期效果。

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:33:08.917

```
'mousedown': function(){ 
```

你在模板上做 mousedown，它应该在`a`元素上。

所以，改为这样做：

```
'mousedown a': function(){ 
```

或者在`a`这里选择正确的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-12T16:11:15.730

抱歉耽搁了，但我现在只能看到kk

但是您可以从银行获取您的事件数据`mousedown`（我相信您已经这样做了），并添加`mousemove`您想要删除事件的位置。这不是完全正确的实现方式，但它可以解决

# android - 收到广播意图 CONNECTIVITY_CHANGE 后如何更新小部件

> ID：11181732
> 
> 赞同：3
> 
> 时间：2012-06-24T22:33:29.683
> 
> 标签：android, android-intent, android-widget, intentfilter

每当网络数据包数据连接发生变化时，我想更新小部件文本及其颜色。甚至这个小部件也可以启用/禁用网络数据包数据。android.net.conn.CONNECTIVITY_CHANGE 的广播接收器已在 Android 清单文件中注册，并且 onReceive() 已在 AppWidgetProvider 类中被覆盖。

每当我启用/禁用连接时，我注意到一个非常奇怪的行为 onReceive() 被触发两次。在第一种情况下，我收到`NetworkInfo`对象，但在第二种情况下，我没有收到信息实例。但是当我通过系统设置启用/禁用连接时 onReceive() 被触发一次并且`NetworkInfo`对象为空。

这是我的清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.rakesh.simplewidget"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <!-- Permissions -->
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <!-- Widget Broadcast receiver -->
        <receiver
            android:name=".ExampleAppWidgetProvider"
            android:label="Widget ErrorBuster" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget1_info" />
        </receiver>
        <service android:name=".UpdateWidgetService"></service>
    </application>
</manifest> 
```

我的 AppWidgetProvider 类如下。

```
public class ExampleAppWidgetProvider extends AppWidgetProvider {

 int[] mAppWidgetIds;

 public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

  final int N = appWidgetIds.length;
  this.mAppWidgetIds = appWidgetIds;

  // Get all ids
  ComponentName thisWidget = new ComponentName(context,
   ExampleAppWidgetProvider.class);
  int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

  // Build the intent to call the service
  Intent intent = new Intent(context.getApplicationContext(),
   UpdateWidgetService.class);
  intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);

  // Update the widgets via the service
  context.startService(intent);
 }

 @Override
 public void onReceive(Context context, Intent intent) {
  super.onReceive(context, intent);
  NetworkInfo info = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);

  StringBuilder str = new StringBuilder();
  if (info != null) {
   str.append(" info is NULL");
  }
  if (checkConnectivityState(context)) {
   str.append("; data is enable");
  } else {
   str.append("; data is disable");
  }
  Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
 }

 public static void updateAppWidget(Context context,
  int[] appWidgetIds, boolean enable) {
  if (appWidgetIds == null) {
   return;
  }
  if (appWidgetIds.length > 0) {

   AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
   RemoteViews updateViews = new RemoteViews(context.getPackageName(), R.layout.widget1);
   if (enable) {
    updateViews.setTextColor(R.id.BtEnableDisable, Color.GREEN);
    updateViews.setTextViewText(R.id.BtEnableDisable, "Enabled");

   } else {
    updateViews.setTextColor(R.id.BtEnableDisable, Color.GRAY);
    updateViews.setTextViewText(R.id.BtEnableDisable, "Disabled");
   }
   appWidgetManager.updateAppWidget(appWidgetIds, updateViews);
   Toast.makeText(context, "updateAppWidget() ", Toast.LENGTH_SHORT).show();

  }
 }

 private boolean checkConnectivityState(Context context) {
  final TelephonyManager telephonyManager = (TelephonyManager) context
   .getSystemService(Context.TELEPHONY_SERVICE);
  return telephonyManager.getDataState() == TelephonyManager.DATA_CONNECTED;

 }
} 
```

启用/禁用网络数据包数据连接的服务类。

```
public class UpdateWidgetService extends Service {
    private static final String LOG = "de.vogella.android.widget.example";

    @Override
    public void onStart(Intent intent, int startId) {
        Log.i(LOG, "Called");
        // Create some random data

        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this
                .getApplicationContext());

        int[] allWidgetIds = intent
                .getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

        ComponentName thisWidget = new ComponentName(getApplicationContext(),
                ExampleAppWidgetProvider.class);
        int[] allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget);
        Log.w(LOG, "From Intent" + String.valueOf(allWidgetIds.length));
        Log.w(LOG, "Direct" + String.valueOf(allWidgetIds2.length));

        for (int widgetId : allWidgetIds) {
            // Create some random data
            int number = (new Random().nextInt(100));

            RemoteViews remoteViews = new RemoteViews(this
                    .getApplicationContext().getPackageName(),
                    R.layout.widget1);
            Log.w("WidgetExample", String.valueOf(number));
            EnableDisableConnectivity edConn = new EnableDisableConnectivity(this.getApplicationContext());
            edConn.enableDisableDataPacketConnection(!checkConnectivityState(this.getApplicationContext()));

            // Register an onClickListener
            Intent clickIntent = new Intent(this.getApplicationContext(),
                    ExampleAppWidgetProvider.class);

            clickIntent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
            clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS,
                    allWidgetIds);

            PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 0, clickIntent,
                    PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViews.setOnClickPendingIntent(R.id.BtEnableDisable, pendingIntent);
            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
        stopSelf();

        super.onStart(intent, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    private boolean checkConnectivityState(Context context){
        final TelephonyManager telephonyManager = (TelephonyManager) context
                .getSystemService(Context.TELEPHONY_SERVICE);
        return telephonyManager.getDataState() == TelephonyManager.DATA_CONNECTED;

    }
} 
```

我还尝试使用广播接收器类，只要连接发生变化，我就会收到 NetworkInfo。但我不知道如何从广播接收器更新小部件文本/颜色。

收到 CONNECTIVITY_CHANGE 意图后，有没有其他方法可以更新小部件文本/颜色？

## ***编辑：***

我不明白为什么我会在中获得两个 CONNECTIVITY_CHANGE 意图`AppWidgetProvider`，但我必须学习如何从广播接收器更新小部件，下面是代码。

```
public class ConnectivityReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        NetworkInfo info = (NetworkInfo)intent.getExtras().get(ConnectivityManager.EXTRA_NETWORK_INFO);

        if(info.getType() == ConnectivityManager.TYPE_MOBILE){

            RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                    R.layout.widget1);

            if(info.isConnectedOrConnecting()){
                Toast.makeText(context, "Data packet enabled", Toast.LENGTH_SHORT).show();
                Log.d("RK","Mobile data is enabled");
                remoteViews.setTextColor(R.id.BtEnableDisable, Color.GREEN);
                remoteViews.setTextViewText(R.id.BtEnableDisable, "Enabled");
            }else{
                Toast.makeText(context, "Data packet disabled", Toast.LENGTH_SHORT).show();
                Log.e("RK","Mobile data is disconnected");
                remoteViews.setTextColor(R.id.BtEnableDisable, Color.BLACK);
                remoteViews.setTextViewText(R.id.BtEnableDisable,"Disabled");
            }

            ComponentName thiswidget = new ComponentName(context, ExampleAppWidgetProvider.class);
            AppWidgetManager manager = AppWidgetManager.getInstance(context);
            manager.updateAppWidget(thiswidget, remoteViews);

        }
    }

} 
```

如果有人知道我为什么会收到两个 CONNECTIVITY_CHANGE 意图，请在此处分享您的想法。您的帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T03:40:19.907

现在我发现了为什么`onReceive()`在单击按钮以启用/禁用网络时会被调用两次。1.第一次在`APPWIDGET_UPDATE`intent广播时被调用。2.第二次在`CONNECTIVITY_CHANGE`intent广播时被调用。

无论如何，我可以从广播接收器更新小部件，源代码已发布在上面的帖子中。

# php - 包含 mySQL 等式的 mySQL 中的 PHP 变量

> ID：11181733
> 
> 赞同：0
> 
> 时间：2012-06-24T22:33:34.240
> 
> 标签：php, mysql, variables

下面是一个 mySQL 查询，其中包含初始查询和一些附加条件。

```
mysql_query("SELECT * FROM electors WHERE telephone > 0 AND last_known_voting_intention = 'P' OR last_known_voting_intention = 'A'"); 
```

我想从另一个页面传递附加条件并包含在 PHP 变量中。

```
$criteria = "AND last_known_voting_intention = 'P' OR last_known_voting_intention = 'A'"; 
```

然后如何将其包含在 mySQL 查询中。

```
mysql_query("SELECT * FROM electors WHERE telephone > 0 $criteria");

mysql_query("SELECT * FROM electors WHERE telephone > 0 ".$criteria); 
```

这两个似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:37:23.197

您的原始查询看起来应该可以工作，但如果它是 PHP 的奥秘之一，我不会感到惊讶。

你可以做的是：

```
$sql = "SELECT * FROM electors WHERE telephone > 0";
$criteria = " AND last_known_voting_intention = 'P' OR last_known_voting_intention = 'A'";

if (!empty($criteria))
{
  $sql .= $criteria; // Append it to SQL query
}

mysql_query($sql); 
```

# dojo - Dojo 无法设置 href 然后在 AccordionContainer 中选择 ContentPane

> ID：11181736
> 
> 赞同：2
> 
> 时间：2012-06-24T22:34:36.403
> 
> 标签：dojo, accordionpane, contentpane

我在 AccordionView 中有两个 ContentPanes。当单击第一个按钮时，我想在第二个按钮上设置 href，然后将其设置为选中状态。为此，我运行以下代码：

```
searchResultsContentPane.set("href", "modules/content_panes/test_module.html");
searchAccordionContainer.selectChild(searchResultsContentPane, true); 
```

出于某种原因，尽管 ContentPane 会在中途打开它的动画，然后它会弹出关闭而没有加载任何内容。

这是 ContentPane 声明：

```
<!-- Search Results Accordian View -->
<div class="searchAccordianPane" id="searchResultsContentPane" title="Search Results" dojoType="dijit.layout.ContentPane" data-dojo-props='refreshOnShow:true'></div> 
```

如果我将声明中的 href 设置为 data-dojo-props 值，它将显示它，但最终我需要将 GET 值添加到 URL，因此我不能让它成为静态的。

谢谢您的帮助

# jquery - 在滚动页面上加载更多不加载第 2 页

> ID：11181741
> 
> 赞同：0
> 
> 时间：2012-06-24T22:35:47.060
> 
> 标签：jquery, ajax, json, load, infinite-scroll

对于这个重叠的问题，我仍然坚持这一点，非常抱歉。我正在尝试创建一个从第一页加载产品的产品页面。当用户从第二页向下滚动产品时，需要加载。我搜索了这个问答网站和许多教程，但我无法让它工作。

shop.com/category/page1.ajax 中的产品已正确加载，但是当我向下滚动时，我不知道为什么 shop.com/category/page2.ajax 等中的产品未加载。

像无限滚动这样的插件不是一种选择。

非常感谢任何帮助。

JSON/Ajax 字符串（由于长度而缩小）：

```
{
"page": 1,
"pages": 7,
"count": 42,
"url": "http:\/\/meules1.webshopapp.com\/woonkamer-en-keuken\/",
"products": [
    {
        "id": 1750137,
        "vid": 2765003,
        "image": "http:\/\/cdn.webshopapp.com\/i\/z1faly\/50x50x2\/newc.jpg",
        "image_id": 2156769,
        "brand": false,
        "code": "40-95407",
        "ean": "40-95407",
        "sku": "",
        "score": false,
        "price": {
            "price": 65,
            "price_money": "\u20ac65,00",
            "price_money_with_currency": "\u20ac65,00 EUR",
            "price_money_without_currency": "65,00",
            "price_excl": 54.6218,
            "price_excl_money": "\u20ac54,62",
            "price_excl_money_with_currency": "\u20ac54,62 EUR",
            "price_excl_money_without_currency": "54,62",
            "price_incl": 65,
            "price_incl_money": "\u20ac65,00",
            "price_incl_money_with_currency": "\u20ac65,00 EUR",
            "price_incl_money_without_currency": "65,00",
            "price_old": 109,
            "price_old_money": "\u20ac109,00",
            "price_old_money_with_currency": "\u20ac109,00 EUR",
            "price_old_money_without_currency": "109,00",
            "price_old_excl": 91.5966,
            "price_old_excl_money": "\u20ac91,60",
            "price_old_excl_money_with_currency": "\u20ac91,60 EUR",
            "price_old_excl_money_without_currency": "91,60",
            "price_old_incl": 109,
            "price_old_incl_money": "\u20ac109,00",
            "price_old_incl_money_with_currency": "\u20ac109,00 EUR",
            "price_old_incl_money_without_currency": "109,00"
        },
        "available": true,
        "url": "http:\/\/meules1.webshopapp.com\/newc.html",
        "title": "Newc",
        "fulltitle": "Newc",
        "variant": "",
        "description": "In de serie Newcastle bieden wij nu ook dit TV meubel \/ salontafel aan. Deze",
        "data_01": ""
    },
    {
        "id": 1750135,
        "vid": 2765001,
        "image": "http:\/\/cdn.webshopapp.com\/i\/z1falp\/50x50x2\/utrecht.jpg",
        "image_id": 2156760,
        "brand": false,
        "code": "nov-89",
        "ean": "nov-89",
        "sku": "",
        "score": false,
        "price": {
            "price": 47.5,
            "price_money": "\u20ac47,50",
            "price_money_with_currency": "\u20ac47,50 EUR",
            "price_money_without_currency": "47,50",
            "price_excl": 39.916,
            "price_excl_money": "\u20ac39,92",
            "price_excl_money_with_currency": "\u20ac39,92 EUR",
            "price_excl_money_without_currency": "39,92",
            "price_incl": 47.5,
            "price_incl_money": "\u20ac47,50",
            "price_incl_money_with_currency": "\u20ac47,50 EUR",
            "price_incl_money_without_currency": "47,50",
            "price_old": 65,
            "price_old_money": "\u20ac65,00",
            "price_old_money_with_currency": "\u20ac65,00 EUR",
            "price_old_money_without_currency": "65,00",
            "price_old_excl": 54.6218,
            "price_old_excl_money": "\u20ac54,62",
            "price_old_excl_money_with_currency": "\u20ac54,62 } 
```

jQuery：

```
<script type="text/javascript">
$(document).ready(function(){

// var pageSize = {{ collection.limit }};
var currentPage = {{ collection.page }};
var collectionPages = {{ collection.pages }};
var category = '{{ collection.internal.url }}';

// Appends the new product to the UI
var appendProduct = function(product, id) {
$('<div class="product"></div>')
.html(product)
 .appendTo($(".productsGrid"));
};

// Load the next products
var loadProducts = function() {

var url = "http://shop.com/"+category+"/page"+currentPage+".ajax";

$.getJSON(url,function(data) {

  console.log(data);
  $.each(data.products, function(index, product) {
    appendProduct('<a href="'+product.url+'" title="'+product.fulltitle+'">' +
                  '<img src="'+product.image+'" width="180" height="150" alt="'+product.fulltitle+'" title="'+product.fulltitle+'"'+'</a>' +
                  '<div class="info"><h3><a href="'+product.url+'" title="'+product.fulltitle+'">'+product.fulltitle+''+'</a></h3>' +
                  '<div class="price">'+product.price.price_money+''+'</div>' +
                  '<div class="gridAddToCart"><a class="button grey" href="'+product.url+'" title="'+product.fulltitle+'" rel="nofollow">'+'<span>{{ 'Details' | t }}</span></a>' +
                  '<div style="margin-top:2px;"></div>' +
                  '<a class="opener button blue" href="http://shop.com/cart/add/'+product.vid+'" title="'+product.fulltitle+'" rel="nofollow"><span>{{ 'Add to cart' | t }}</span></a>'
                 + '<div class="clear"></div>' +
                  '</div><div class="clear"></div></div>'      
    );
  });

  // We're done loading the products, so hide the overlay and update the UI
  $("#overlay").fadeOut();
});
 };

 // First time, directly load the products
 loadProducts();

 // Append a scroll event handler to the container
 $(".productsGrid").scroll(function() {
// We check if we're at the bottom of the scrollcontainer
if ($(this)[0].scrollHeight - $(this).scrollTop() == $(this).outerHeight()) {
  // If we're at the bottom, show the overlay and retrieve the next page

    currentPage++;

  $("#overlay").fadeIn();
  loadProducts();
}
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:22:01.400

也许该`scroll`函数没有针对该选定元素 productsGrid 触发。你会用警报检查吗？productsGrid 有滚动条还是只是整个页面的一部分？您可以为整个文档尝试更通用的方法：

在`getJSON`,

```
 // We're done loading the products, so hide the overlay and update the UI
      $("#overlay").fadeOut();
      $(window).scroll(function() { update(); });  // <-- ADD THIS LINE
    });
  };

// First time, directly load the products
loadProducts();

var update = function() {  // <-- NAME THIS AS FUNCTION
  // activate loadProducts when scrollbar reaches 150 pixels or less from the
  // bottom, instead of having scrolled exactly all the way to the end.
  if($(window).height() + $(window).scrollTop() >= $(document).height() - 150) {

    if(currentPage < collectionPages) {
      // If we're at the bottom, show the overlay and retrieve the next page    
      currentPage++;
      $("#overlay").fadeIn();
      $(window).unbind('scroll');  // <-- ADD THIS LINE
      loadProducts();
    }
  }
};

$(window).scroll(function() { update(); } ); // <-- ADD THIS LINE 
```

# php - 按类别排序，然后在 Wordpress 主页上按日期排序

> ID：11181742
> 
> 赞同：1
> 
> 时间：2012-06-24T22:36:08.067
> 
> 标签：php, wordpress

我的 Wordpress 网站有多个自定义类别和帖子类型，所有这些都需要显示在主页 blogroll 上。但我需要主页上的第一个帖子始终是特定类别的最新帖子。

例如，页面顶部的 pst 将始终是最新的“长颈鹿”类别；并在其下方；默认/按时间顺序排序更多的是“海象”与“海鸥”和“玉米片”混合

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:13:37.210

无需通过循环两次，粘性帖子是您的最佳选择。

除此以外：

```
...
$args = array(
 'orderby' => 'post_date',
 'category'=> 'giraffe',
 'numberposts'=> 1,
);
$latest_giraffe_post = get_posts( $args );    
... 
```

然后做你已经在做的事情

# url - 用于在客户端和服务器之间引入层的经典 ASP 应用程序的 Http 处理程序

> ID：11181746
> 
> 赞同：0
> 
> 时间：2012-06-24T22:36:35.150
> 
> 标签：url, asp-classic, httprequest, httphandler

我有一个巨大的经典 ASP 应用程序，成千上万的用户在其中管理他们的公司/业务数据。目前这不是多用户，因此应用程序用户可以创建用户并授权他们访问系统中的某些区域。

我正在考虑编写一个处理程序，它将充当客户端和服务器之间的中间人，并通过每个请求并找出用户是谁以及他是否有权访问他试图访问的数据。

暂时忽略我将如何检查授权和所有这些东西的部分。只是想知道我是否可以实现一个 ASP.net 处理程序并将其用作来自 ASP 网站的请求的中间人？我只想阅读 url 并查看用户试图访问的页面是什么，以及他在 url 中传递的参数是什么。这可能吗？我读到 Asp.net 处理程序不能与 asp 网站一起使用，我需要为此使用 isapi 过滤器或扩展，并且只能使用 c/c++ 开发。

任何人都可以对此有所了解并指导我是否朝着正确的方向前进？

注意：具体来说，我无法修改现有应用程序中的任何内容，因为系统中有数百个页面（每个页面又有几个不同的操作，例如再次发布到同一页面），真的很乱我们正在想出一个不同的解决方案来清理这个混乱，但这需要几年时间才能完成，同时为我们试图这样做的用户提供多用户功能。该层就像我们授权用户执行某些操作或访问页面的层一样，仅此而已。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:01:51.100

我使用过一个在服务器端运行 Javascript 的 ASP 经典网站。在 IIS 中，我们选择 JScript 作为服务器端脚本语言，并同时访问会话变量和数据库，以在用户尝试检查站点的各个部分时检查用户的访问权限。你所描述的是完全可行的。每个页面都需要在 <% %> 标记中包含 Javascript，并将内容标识为服务器端代码。不过要注意安全！

至于 ASP.NET 处理程序，我还开发了一个 ASP.NET 应用程序，将其添加到我们的站点（必须使用 .NET 线程池），它可以处理 Ajax 请求。IIS 有此选项可将 ASP.NET 应用程序导入您的站点。

你有选择。

# clojure - clojurescript 断点

> ID：11181752
> 
> 赞同：11
> 
> 时间：2012-06-24T22:37:36.687
> 
> 标签：clojure, breakpoints, clojurescript

有没有办法在 clojurescript 中创建断点？在 repl 或 chromes 本机调试器中。

我已经尝试过 (js* "debugger") 并且返回

> SyntaxError：意外的令牌调试器

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T14:18:31.287

`(js* "debugger;")`应该管用。您只是缺少分号。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-09T13:58:48.517

万一以后有人看到这个，

如果你在一个`go`块内，你可能需要使用这个：`(js* "0; debugger")`因为 go 宏在任何地方创建变量定义，所以修复那个场景。

如果由于其他原因它没有，请检查错误日志，您一定喜欢通过添加一些东西来“破解”无效编译。

# asp.net - 使用 ASPX 页面的 SSRS URL 安全性

> ID：11181754
> 
> 赞同：1
> 
> 时间：2012-06-24T22:38:20.250
> 
> 标签：asp.net, reporting-services

是否有任何方法可以通过 ASPX 页面使用特定用户权限访问 SSRS URL 服务器，但不允许用户通过浏览器中的直接访问来访问此 URL。

这样做的原因是我们有一个用户创建了他们自己的带有这些报告链接的 html 页面，因此绕过了我们的应用程序安全性。

我不想在页面上使用 reportview 控件，因为这会在 ie7 中出现问题（抱歉，我们仍然支持它）并且渲染速度也比直接引用 SSRS 服务器慢得多

SSRS 服务器是 SSRS 2008R2，Web 服务器 Windows 2008，vb .NET4 aspx

提前致谢

**进一步解释**

我们有一个 Web 应用程序，我们在其中实施了可以在一个用户或一组用户中控制的安全性

例如

UserA 有权访问 Report1 而不是 Report2
UserB 有权访问 Report2 而不是 Report1

UserB 可以获取 report2 的 URL 并将其提供给 UserA，从而绕过我们的菜单安全性。

我们已允许“浏览器”访问 SSRS 服务器上的所有报告给我们的用户（我知道这是启用安全绕过的原因）

我不想在 2 个位置（即在应用程序和 SSRS 中）维护安全.

是否有任何方法可以锁定 SSRS 以使用模拟配置文件，而不是用户登录时无需请求身份验证的配置文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:50:55.753

我对你的说法感到困惑：

> 这样做的原因是我们有一个用户创建了他们自己的带有这些报告链接的 html 页面，因此绕过了我们的应用程序安全性。

我不买这个。

如果您以适当的安全性设置 SSRS，则任何用户都无法使用 HTML 页面“绕过它”。
您能否详细说明您是如何在 SSRS 安装中设置安全模型的？

理论上，您可以设计一个不模拟后端 SSRS 的代理 Web 应用程序，仅通过服务帐户，这样只会公开一组有限的链接。但这不应该是必要的。

# jquery - jQuery：OnClick 标题视频是正确的，但 url 是下一个视频

> ID：11181755
> 
> 赞同：0
> 
> 时间：2012-06-24T22:38:20.750
> 
> 标签：jquery

我有一个搜索页面

```
<div class="">
    <input id="search-input" type="text" class="input-medium search-query span4">
</div>

<div id="result">

</div>

<div id="result-template">
    <div class="hide-item item" id="item">
        <div style="float:left">
            <img class="thumbnail" src="" alt="" />
        </div>
        <div id="name">
            <p class="title"></p>
            <p class="views"></p>
        </div>
    </div>
</div> 
```

和 jQuery 作为

```
$(function(){
    $('#search-input').live('keyup',function() {
        var search_input = $(this).val();
        var keyword = encodeURIComponent(search_input);
        var yt_url = 'http://gdata.youtube.com/feeds/api/videos?q='+keyword+'&format=5&max-results=10&v=2&alt=jsonc';

        $.ajax({
          url: yt_url,
          type: 'GET',
          dataType: 'jsonp',
          complete: function(xhr, textStatus) {
            //called when complete
          },
          success: function(response, textStatus, xhr) {
            if(response.data.items) {
                var template = $('#item').clone();
                $('#result').html(template);
                $.each(response.data.items, function(i, data) {
                    console.log(data)
                    search_data = {
                        'id': data.id,
                        'title': data.title,
                        'views': data.viewCount,
                        'thumbnail': data.thumbnail['sqDefault'],
                    }
                    video_result_template(search_data);
                });
            } else {
                // var template = $('#item').clone();
                // $('#result').html(template);
            }
          },
          error: function(xhr, textStatus, errorThrown) {
            //called when there is an error
          }
        });
    });
});

// filling out the search template
function video_result_template(data) {
    var item = $('#item').clone();
    item.removeClass('hide-item');
    item.find('img').attr('src', data.thumbnail);
    item.find('.title').html(data.title);
    item.find('.views').html(data.views);
    $('#item').attr('id', data.id);
    item.addClass('view-item');
    // $('#result').append(item).fadeIn(); // slow/fast?
    $('#result').append(item).fadeIn('slow');
} 
```

我在 div 上得到标题、视图、url 的结果。现在，当我单击 div 时，会触发以下 jQuery

```
$(function(){
    $('.item').live('click', function(){
        // alert(this.id);
        console.log($(this));
        var url = $('#video-frame').attr('src');
        var new_url = url.replace(/embed\/[\w -]*/g, 'embed/' + this.id);
        alert($('.title').html() + ',' + new_url);
        $('#video-frame').attr('src', new_url);
    });
}); 
```

这会提醒正确的标题，但 url（或 video_id 是列表中的下一个视频）。

当我从 Firefox 看到我的 html 时，我看到以下内容

```
 <div id="result" style="display: block;">
    <div id="lqT_dPApj9U" class="item view-item">
      <div style="float: left;"><img alt="" src=
      "http://i.ytimg.com/vi/S2nBBMbjS8w/default.jpg" class="thumbnail" /></div>

      <div id="name">
        <p class="title">Coke 2012 Commercial: "Catch" starring NE_Bear</p>

        <p class="views">619167</p>
      </div>
    </div>

    <div id="hKoB0MHVBvM" class="item view-item">
      <div style="float: left;"><img alt="" src=
      "http://i.ytimg.com/vi/lqT_dPApj9U/default.jpg" class="thumbnail" /></div>

      <div id="name">
        <p class="title">Coca-Cola Happiness Machine</p>

        <p class="views">4791156</p>
      </div>
    </div>

    <div id="item" class="item view-item">
      <div style="float: left;"><img alt="" src=
      "http://i.ytimg.com/vi/S2nBBMbjS8w/default.jpg" class="thumbnail" /></div>

      <div id="name">
        <p class="title">Coke 2012 Commercial: "Catch" starring NE_Bear</p>

        <p class="views">619167</p>
      </div>
    </div>
  </div> 
```

*   如果看得清楚，第一个和最后一个 div 具有相同的数据元素
*   事实上不同之处在于最后一个 div 是第一个元素的副本
*   最后一个元素的 id="item" 无效（必须是视频 id）

**问题** 我该如何解决这个问题？

**JSFiddle** [http://jsfiddle.net/hhimanshu/F5NHK/](http://jsfiddle.net/hhimanshu/F5NHK/)

**必需** 搜索后，单击任何视频 div，它必须提供正确的视频 ID 和标题
PS 在小提琴中单击列表没有做任何事情（不知道为什么，但它在我的系统上工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:08:45.363

在功能

```
// filling out the search template
function video_result_template(data) {
    var item = $('#item').clone();
    item.removeClass('hide-item');
    item.find('img').attr('src', data.thumbnail);
    item.find('.title').html(data.title);
    item.find('.views').html(data.views);
    $('#item').attr('id', data.id);
    item.addClass('view-item');
    // $('#result').append(item).fadeIn(); // slow/fast?
    $('#result').append(item).fadeIn('slow');
} 
```

替换`$('#item').attr('id', data.id);`为`item.attr('id', data.id);`

感谢@arhen 提供此解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:12:16.847

尝试从#results div 中删除您的项目模板。也许您将不得不修复点击绑定。我在这个[小提琴](http://jsfiddle.net/F5NHK/2/)中进行了测试，似乎可以工作。**告诉它是否没有**，我试图修复它，对您的代码进行微小的更改。

建议，检查[jquery模板](http://api.jquery.com/jquery.tmpl/)

# asp.net-mvc - MVC 4 教程验证错误

> ID：11181758
> 
> 赞同：1
> 
> 时间：2012-06-24T22:39:00.233
> 
> 标签：asp.net-mvc, validation, jquery-validate, asp.net-mvc-4, cultureinfo

我正在关注[MVC 4 教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)，但在小数和日期验证方面遇到了一些问题。

当我尝试以 dd-MM-yyyy 格式插入日期时（因为它是我的电脑所在的文化中定义的格式），它返回此错误：ReleaseDate 字段必须是日期。

此外，当尝试插入像 3,01 这样的小数字段时，它会返回验证消息：字段 xpto 必须是数字。在这种情况下，您可能会说为此使用点，但在我使用的文化中，这是千位分隔符，例如 1.000

这是一个普遍的问题还是只是我？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:43:01.390

“我的电脑”我假设你的意思是客户端，浏览器验证失败？请参阅我的文章[http://msdn.microsoft.com/en-us/library/gg674880(VS.98).aspx](http://msdn.microsoft.com/en-us/library/gg674880%28VS.98%29.aspx) - jQuery 移动了本地特定文件，因此您必须寻找它们。调试 1\. 禁用客户端验证并验证服务器验证是否适用于您的本地（即本地的小数和日期）。然后是获得正确的客户端验证的问题。这不是一个真正的 MVC 问题，它更像是一个“jQuery 非英语日期/时间和十进制验证”类型的问题。您可能需要再次发布此问题。解决此问题后，请发布您的解决方案。

要快速解决此问题，请使用失败的 jQuery 验证创建最简单的 HTML 页面，然后发布重现。您可以查看从 MVC 生成的 HTML，以帮助您创建一个简单的 HTML 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:02:27.160

您可以通过设置输入文化来更改此行为：http: [//msdn.microsoft.com/en-us/library/bz9tc508.aspx](http://msdn.microsoft.com/en-us/library/bz9tc508.aspx)。您可以将其修复为特定的文化或使用“自动”，以便浏览器将使用用户当前的文化。

# c++ - 为 x,y,z 坐标实现 operator<

> ID：11181760
> 
> 赞同：4
> 
> 时间：2012-06-24T22:39:12.403
> 
> 标签：c++, stl

我有这种类型，基本上是

```
struct { int x,y,z; } 
```

我想用作 stl 映射的键。由于它是一种自定义类型，因此我需要为地图实现 operator< 来进行比较魔术。

我很难使用允许这样做的功能。到目前为止，我已经尝试过：

```
return X < v.X && Y < v.Y && Z < v.Z; 
```

这根本不起作用，并且

```
return X*X+Y*Y+Z*Z < v.X*v.X+v.Y*v.Y+v.Z*v.Z; 
```

它给出了这种形状而不是正方形：

![在此处输入图像描述](../Images/b09830592508feb55241958b8b94f142.png)

请记住，x、y 或 z 值可能为负数，这进一步使后面的解决方案无效。

任何人都知道如何实现这样的功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T22:42:19.590

我假设您只想要任何稳定的订单，以便订购的容器可以工作。

```
if ( X != v.X ) return X < v.X;
if ( Y != v.Y ) return Y < v.Y;
return Z < v.Z; 
```

这是做什么的：除非 X 相等，否则您根据 X 订购，如果是，则您根据 Y 订购，等等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-24T23:44:12.147

您**不需要** `operator<`，也不应该在运算符的语义对于在同一域中工作的所有人都不是自然的情况下实现它，以避免混淆。*其他人可能对less*的含义有不同的解释，将两点与提供的内容进行比较`operator<`，然后对结果感到困惑。

您最好为您的特定地图提供比较运算符：

```
struct compareXYZ : std::binary_function<Point,Point,bool> {
   bool operator()( Point const & l, Point const & r ) const {
      return l.x < r.x 
          || (l.x == r.x) && (l.y < r.y)
          || (l.x == r.x) && (l.y == r.y) && l.z < r.z;
   }
};
std::map< Point, Value, compareXYZ> theMap;     // uses XYZ comparison 
```

这样，对于地图的用户来说，点将如何在容器中排序（例如对于线性迭代）是很清楚的，并且缺少`operator<`产生*随机*结果的运算符并不令人惊讶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T22:42:49.873

可以使用向量的长度来比较 3 维向量

```
SquareRoot(X*X + Y*Y + Z*Z); 
```

这允许负方向。

# html - 如何强制 Flash 视频在线重读文本文件

> ID：11181762
> 
> 赞同：2
> 
> 时间：2012-06-24T22:39:34.687
> 
> 标签：html, actionscript-3

抱歉，我不确定如何总结这个问题。好的，我在一个网站上有一个 .swf，它从上传到同一目录的 .txt 文件中读取文本。问题是一旦加载了 swf，必须清除 cookie 才能重新读取 .txt 文件。所以我的问题是我将如何强制它每次都检查 .txt 文件？

抱歉，如果这是一个愚蠢的问题，我什至不确定它是否需要在 AS 或 html/java 中。我更像是一个离线程序员，这是我第一次在网上处理任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:32:10.133

一种方法是在 txt 文件 URL 中附加一些独特的内容，如下所示：

> my_text_file.txt#543

当然，这看起来并不是很独特。附加的字符串不必在多次使用，甚至在会话之间是唯一的。您的主要目标是在经过一段时间后重新加载 txt 文件。因此，我能想到的最好/最简单的方法是附加当前日期字符串（以毫秒为单位）。

```
var myTextFileURL:String = 'my_text_file.txt';
myTextFileURL += '?t=' + new Date().getTime(); 
```

然后使用该 url 字符串加载您的 txt 文件。

# asp.net - 在 asp.net 中组合 javascript 文件

> ID：11181764
> 
> 赞同：0
> 
> 时间：2012-06-24T22:40:00.943
> 
> 标签：asp.net

我有几个 javascript 文件，我想将它们合并到一个文件中，但仅在呈现页面时，并且仍然将我的文件分开，因为使用多个文件进行编码比一个巨大的文件更容易。

我该怎么做呢？我看到了一些关于如何做到这一点的教程，但它们已经过时了。我正在使用 VS 2012，我想知道是否有更新的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:50:17.953

既然您提到了 VS2012，请检查[Bundling and](http://www.asp.net/vnext/overview/whitepapers/whats-new#_Toc318097384) Minification 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:44:56.643

使用 ScriptManager 的名为“CompositeScript”的东西。可能是最简单的方法。

[http://msdn.microsoft.com/en-us/library/cc488552(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/cc488552(v=vs.90).aspx)

但是，如果出于某种原因这不符合您的需求，您始终可以实施您的自定义解决方案。

# css - 梯度过滤器的存在会改变 IE8 中的导航栏布局属性？

> ID：11181776
> 
> 赞同：1
> 
> 时间：2012-06-24T22:42:56.690
> 
> 标签：css, internet-explorer, twitter-bootstrap

我在 bootstrap.css 站点中使用选项卡式导航栏。在 IE8 中（甚至还没有费心查看其他 IE），与它在 Chrome 中的呈现方式相比，底部边框是关闭的。我已将其范围缩小到从 bootstrap 的 mixins.less 文件应用`filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#ffffff', GradientType=0);`的样式中存在 IE 渐变过滤器 ( ) 。`.navbar-inner`如果我从 css 中删除该过滤器，则 IE8 中的边距与 Chrome 中的边距匹配。

过滤器必须被移除。添加`filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);`似乎没有帮助。

我的问题是：为什么那个过滤器会改变布局？我能做些什么来改变这种行为？

是的，我可以删除过滤器，因为无论如何我都没有使用渐变。但我试图让 bootstrap 尽可能保持原样，只是在一个单独的 .less 文件中对其进行更改，该文件将被合并到最终的 bootstrap.css 中。

这是一个包含基本元素的 jsfiddle：http: [//jsfiddle.net/ESEQ2/](http://jsfiddle.net/ESEQ2/)

要明白我的意思，您必须在 IE8 中查看它（可能还有其他 IE）。

感谢这里的任何帮助。提前致谢。

# sql - 使用 RMySQL 的临时表

> ID：11181778
> 
> 赞同：2
> 
> 时间：2012-06-24T22:43:39.323
> 
> 标签：sql, r, temp-tables, rmysql

有没有办法使用`RMySQL`包创建一个临时表？如果是这样，正确的方法是什么？特别是我正在尝试将我的**R**会话中的数据帧写入临时表。我有几个并行运行的进程，我不想担心名称冲突，这就是为什么我想让它们成为临时的，这样它们只对每个单独的会话可见。解决方案应该以某种方式涉及`dbWritetable`而不是`dbSendQuery("create temporary table tbl;")`.

注意：我在网上发现了一些东西，建议使用手动创建临时表`dbSendQuery(con, "create temporary table x (x int)")`，然后简单地用`dbWriteTable()`. 这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T23:33:36.180

根据您的mysql帐户限制，您可以不做

```
dbSendQuery(con, "create temporary table x (x int);")
dbSendQuery(con, "drop temporary table x;") 
```

ETC..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:51:59.577

对于这种类型的工作，我会避免重新发明轮子并使用

[https://code.google.com/p/sqldf/](https://code.google.com/p/sqldf/)

默认情况下，它适用于 sqlite，但它也适用于 MySQL（我从未尝试过）。这个包是坚如磐石的并且有据可查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T17:03:07.927

这实际上是[RMySQL 中的一个已知问题](https://github.com/jeffreyhorner/RMySQL/issues/10)。您最好的选择可能是将数据写入临时文件，然后构建您自己的`LOAD DATA LOCAL INFILE`语句，`RMySQL::mysqlWriteTable`用作指导。

对于奖励积分，如果您可以修补 RMySQL::mysqlWriteTable 以使用临时文件，请向[github repo](https://github.com/jeffreyhorner/RMySQL/blob/master/R/MySQLSupport.R)发送拉取请求。

# opencv - Asift和openCV？

> ID：11181780
> 
> 赞同：3
> 
> 时间：2012-06-24T22:44:05.770
> 
> 标签：opencv, sift, asift

opencv 允许使用 ASIFT 吗？

[http://www.ipol.im/pub/algo/my_affine_sift/](http://www.ipol.im/pub/algo/my_affine_sift/)

创建者发布了c++，所以我相信将它实现到opencv中并不难

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:40:28.427

你是什​​么意思

> opencv 允许使用 ASIFT 吗？

目前，ASIFT 不能直接在 OpenCV 中使用，但将 ASIFT 作者提供的代码连接到 OpenCV 应该是轻而易举的事。可能您所要做的就是通过访问 Mat::data 指针将 OpenCV cv::Mat 转换为某种特定的图像格式。

如果您担心许可条款，您应该联系 ASIFT 作者。在 BSD 许可下，OpenCV 可以免费使用/修改/重新分发/销售。ASIFT 似乎也是如此。

如果您正在谈论将代码集成到 OpenCV 中，并向开发人员发送补丁，这里有一个关于如何做到这一点的指南[http://code.opencv.org/projects/opencv/wiki/CodeSubmissions](http://code.opencv.org/projects/opencv/wiki/CodeSubmissions)和这里[http://code.opencv.org/projects/opencv/wiki/How_to_contribute](http://code.opencv.org/projects/opencv/wiki/How_to_contribute)和这里[​​ http://code.opencv.org/projects/opencv/wiki/CodingStyleGuide](http://code.opencv.org/projects/opencv/wiki/CodingStyleGuide)。我（和许多其他人）强烈鼓励你这样做！它似乎是对 OpenCV 的重要补充。

# ruby-on-rails - 更新具有多对多关系的模型中的属性

> ID：11181784
> 
> 赞同：0
> 
> 时间：2012-06-24T22:44:22.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有 2 个具有多对多关联的模型（一个事件有很多产品，产品有很多事件），我正在尝试将一个产品添加到一个事件中。我已经使用单表继承来实现系统需要处理的多种类型的产品，这就是为什么下面的错误中`Lighting`是型号名称而不是产品的原因。我的控制器中有以下方法可以将产品添加到事件中，但是会出现以下错误：

```
NoMethodError in AddeventController#add

undefined method `each' for #<Lighting:0x007fd4bc798c70>

app/controllers/addevent_controller.rb:5:in `add' 
```

我的动作看起来像：

```
 def add
      @event = current_event
      product = Product.find(params[:id])
      if @event.update_attribute(:products, product) #This is line 5
        format.html {redirect_to @event, notice: "Product added to event"}
      end
    end 
```

Current_event 只是一种从会话中提取事件 id 的方法。

那么怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:49:36.597

您可能需要将产品包装在一个数组中，因为多对多关系适用于数组。

```
@event.update_attribute(:products, [product]) 
```

此外，操作的名称表明您希望在事件中添加产品，而不仅仅是将事件的产品替换为单个产品。所以你可能应该这样做：

```
@event.products << product 
```

# eclipse - 使用 AWS Elastic Beanstalk 和 EC2 在 Tomcat7 下找不到文件

> ID：11181786
> 
> 赞同：0
> 
> 时间：2012-06-24T22:44:24.337
> 
> 标签：eclipse, unix, amazon-ec2, amazon-web-services, tomcat7

我使用 Eclipse 在使用 UNIX 64 位环境的 AWS Elastic Beanstalk 上部署我的 Java Web 应用程序。我的应用程序需要从同一个项目文件夹中读取一个文件。但是，我运行项目后，管理控制台中的日志显示找不到目录。我试图通过使用相对路径或绝对路径来解决这个问题。但都没有奏效。

一件奇怪的事情是我在 ec2 实例中找不到 Tomcat 文件夹。有谁知道我如何在应用程序中设置我的文件路径或者我应该把我的文件放在哪里才能找到它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-21T22:21:26.770

我不确定你在用你的文件做什么，但我在寻找要在课堂上使用的图像路径时遇到了同样的问题。我希望这有帮助！

前言：我正在通过 AWS-Elastic Beanstalk 控制台将我的 .war 部署到我的弹性 beantalk 实例。我将图像移动到与我引用它的类完全相同的包/文件夹中。

```
BufferedImage imBuff = ImageIO.read(MyAwesomeFooBarClass.class.getResourceAsStream("foobar.png")); 
```

就是这样！我敢肯定这不是最优雅的解决方案，但它确实有效/我有点赶时间；）

# jquery - jQuery CoffeeScript - 学习

> ID：11181787
> 
> 赞同：2
> 
> 时间：2012-06-24T22:44:33.517
> 
> 标签：jquery, coffeescript

我正在尝试使用`jQuery`with `CoffeScript`。我按照博客中的说明进行操作，该博客指示使用**$ ->**或**jQuery ->**而不是 .ready() 。我玩了一下代码，但我似乎无法理解我做错了什么。只是想学一点。

这是适用的代码`jQuery`：

```
$(document).ready( function() {
$("span.today").closest("td").css("background-color", "#7792ad")
}); 
```

这是我期望的工作`CoffeScript`：

```
$ ->
$("span.today").closest("td").css("background-color", "#7792ad") 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T22:46:50.590

试试这个：

```
$ ->
    $("span.today").closest("td").css("background-color", "#7792ad"); 
```

> 一般原则是可以删除许多不必要的括号和大括号，因为**可以使用缩进代替大括号来表示代码块**

# authentication - 微控制器上的 FourSquare 硬编码身份验证

> ID：11181790
> 
> 赞同：0
> 
> 时间：2012-06-24T22:44:57.493
> 
> 标签：authentication, foursquare

我希望能够从微控制器签入到foursquare。现在由于它没有浏览器，我无法使用允许用户接受授权的 OAuth。无论如何我可以将它硬编码到微控制器代码中。

基本上，当我按下嵌入式设备上的按钮到我自己的foursquare帐户时，我只想能够在一个固定的地方签到。所以这是一个相当静态的任务。

我们欢迎所有的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:05:54.990

在网络上生成您自己的 OAuth 令牌，然后将令牌 + 场地 ID 硬编码到设备中。

# jquery - 以编程方式切换并在 WebKit 上声明内联时内联元素的显示差异

> ID：11181791
> 
> 赞同：0
> 
> 时间：2012-06-24T22:44:59.377
> 
> 标签：jquery, css, html, webkit

**[jsFiddle再现](http://jsfiddle.net/YumVZ/)**

我有一些`div`嵌套在`span`. 我需要外部元素的内联行为和内部元素的块行为。我可以在`.outer`span 父级上声明一个将显示设置为`.inner`as的类`none`。如果我在 HTML 本身中声明这一点，所有跨度都按预期折叠成一行。但是，如果我使用 JavaScript（在本例中为`.collapse`jQuery ）切换样式。`.toggleClass`我仍然得到一个神秘的换行符，即即使没有显示块级元素的容器，浏览器也不会回收垂直空间。

这只发生在 WebKit（Chrome 和 Safari）中。Firefox 的行为符合我的预期。我没有费心在 IE 中尝试这个。

非常感谢解释和/或解决方法。

```
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Spans</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">//</script>
  <script type="text/javascript">
    $(document).ready(function(evt) {
      $(".toggle").click(function(evt) {
        $(this).closest(".outer").toggleClass("collapsed");
      });
    });
  </script>
  <style type="text/css">
    body { font-family: Helvetica; }
    span { padding: 0 0.5em; margin-right: 0.5em; outline: solid 1px #ccc; }
    .outer.collapsed .inner {
      display: none;
    }
    .outer.collapsed .open:after {
      content: "…";
    }
  </style>
</head>
<body>
  <h2><code>.outer.collapsed</code> toggled by jQuery</h2>
  <div><span>The following should display inline when collapsed: </span>
    <span class="outer">
      <button class="toggle">Toggle</button>
      <span class="open">[</span>
      <div class="inner">
        <div>A</div>
        <div>B</div>
        <div>C</div>
      </div>
      <span class="close">]</span>
    </span>
  </div>

  <h2><code>.outer.collapsed</code> Declared inline</h2>
  <div><span>The following should display inline when collapsed: </span>
    <span class="outer collapsed">
      <button class="toggle">Toggle</button>
      <span class="open">[</span>
      <div class="inner">
        <div>A</div>
        <div>B</div>
        <div>C</div>
      </div>
      <span class="close">]</span>
    </span>
  </div>
</body>
</html> 
```

# linux - linux命令行使用提供的参数重命名所有文件

> ID：11181796
> 
> 赞同：1
> 
> 时间：2012-06-24T22:45:53.987
> 
> 标签：linux, bash, shell

试图将目录中的所有文件重命名为`$arg[1] + number of file`.

例如这些文件：

```
gfdgfdh.jpg  
fgdsyugfs.jpg  
gfyudsfuds.jpg 
```

当我`sh myscript.sh dog`在命令行执行时将变为以下内容：

```
dog0.jpg
dog1.jpg
dog2.jpg 
```

这是我到目前为止的代码，正则表达式有效，因为如果它从命令行尝试`rename`一个文件上的命令，它就有效。

```
#! /bin/sh
COUNTER=0
PREFIX=$1
for i in *.jpg
do
        rename 's/.*[^.jpg]/${PREFIX}${COUNTER}/' $i
        COUNTER=COUNTER+1
done 
```

我得到的错误是

```
Global symbol "$PREFIX" requires explicit package name at (eval 1) line 1. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T22:57:32.893

该错误是由于您将其放入`$PREFIX`inside引起的`''`，它不会扩展它，而是将其传递给 Perl 程序`rename`，而 Perl 程序又似乎将模式评估为 Perl 代码。

您的脚本中的另一个错误是`COUNTER=COUNTER+1`. 外壳不能那样工作。试试这个（未经测试）：

```
#!/bin/sh
prefix=$1

count=0
for f in *.jpg; do
    mv "$f" "$prefix$count".jpg
    count=`expr $count + 1`
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T00:20:39.757

rename 接受 perl 程序/表达式，在您的情况下， $PREFIX 被解释为变量。

rename 是一个批量重命名文件的工具，你用它来重命名一个文件。更好的方法是：

```
PREFIX=dog; 
rename  "s#[^/]*.jpg#'$PREFIX' . \$main::C++ . '.jpg'#e" tmp/*.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T15:50:01.850

使用“重命名”命令

```
rename 's/.*/dog$N.jpg/' *.jpg 
```

# jquery - 来自 Click 处理程序的 jQuery DOM 更新

> ID：11181797
> 
> 赞同：2
> 
> 时间：2012-06-24T22:46:09.077
> 
> 标签：jquery, dom, javascript-events

当从单击处理程序调用 Ajax 更新时，我想显示一个`div`用作加载屏幕的加载屏幕，这可能需要一两秒钟，例如：

```
var loadingControl;

loadingControl = $("#loading"); // Is initialized after DOM Ready

$('#updateLink').click(function (e) {
    loadingControl.show();
    $.ajax(
    {
        url: 'http://some.url',
        type: "POST",
        success: function (data) {
            $('#divToUpdate').html(data);
        },
        error: handleAjaxError
    });

    loadingControl.hide();

    e.preventDefault();
}); 
```

`loading`div 不显示。`click`我怀疑这是因为 DOM 在处理程序完成之前不会更新。那是对的吗？

如何重构此代码以允许 DOM 在调用后更新`.show()`，以便在运行时加载屏幕`div`可见`.ajax`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T22:48:59.553

ajax 调用是异步的，所以代码继续运行。因此，您的`loadingControl.hide()`函数在 ajax 启动后立即被调用，请尝试`loadingControl.hide();`在函数内部移动`success`。

```
$('#updateLink').click(function (e) {
    loadingControl.show();
    $.ajax(
    {
        url: 'http://some.url',
        type: "POST",
        success: function (data) {
            $('#divToUpdate').html(data);
            loadingControl.hide();
        },
        error: handleAjaxError
    });

    e.preventDefault();
}); 
```

# android - 样式化操作栏文本颜色 - Android

> ID：11181798
> 
> 赞同：5
> 
> 时间：2012-06-24T22:46:22.137
> 
> 标签：android, android-actionbar

```
<style name="Theme.RateItTheme" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:titleTextStyle">@style/MyActionBar.Text</item>
</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#2E495E</item>
</style>

<style name="MyActionBar.Text" parent="@android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">#ECECEC</item>
</style> 
```

我已经能够更改背景，但不能更改文本颜色。或溢出菜单“三个点”。我的代码在上面。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T23:20:05.480

您需要将`titleTextStyle`属性移动到您的`MyActionBar`样式中。你明白为什么它应该被放置在那里而不是你最初拥有它的地方吗？

```
<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#2E495E</item>
    <item name="android:titleTextStyle">@style/MyActionBar.Text</item>
</style> 
```

至于更改溢出图标，我认为这就是您说“三个点”时的意思，[我已经在这里写了一篇关于此的帖子。](https://stackoverflow.com/a/9733538/420015)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T23:25:22.337

试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<!-- For honeycomb and up -->
<resources>

    <style name="Theme.RateItTheme" parent="@android:style/Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/MyActionBar</item>
        <item name="android:actionMenuTextColor">@color/actionBarText</item>
    </style>

    <style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
        <item name="android:background">#2E495E</item>
        <item name="android:titleTextStyle">@style/MyActionBar.Text</item>
    </style>

    <style name="MyActionBar.Text" parent="@android:style/TextAppearance">
        <item name="android:textColor">#ECECEC</item>
    </style>

</resources> 
```

# jquery - 切换最近的 div 隐藏其他打开的 div

> ID：11181801
> 
> 赞同：0
> 
> 时间：2012-06-24T22:46:55.007
> 
> 标签：jquery, list, toggle

以下代码允许我切换 LI 内的 div，我如何调整它以便当一个 div 打开时，兄弟 LI 内的所有其他 div 都关闭？

```
$(document).ready(function () {  
$('.grey_button a').toggle(function() {
    $(this).closest('li').find('.job_description').fadeIn(0);
    $(this).toggleClass('open');
    //$(this).text($(this).text() == 'More Information' ? 'Hide Information' : 'More Information');
    return false;
},
    function() {
      $(this).closest('li').find('.job_description').fadeOut(0);
      $(this).toggleClass('open');
      //$(this).text($(this).text() == 'Hide Information' ? 'More Information' : 'Hide Information');
    return false;
  });
}); 
```

HTML 示例

```
<ul>
  <li>
    <div class="grey_button"><a href="" class="arrow">More information</a></div>
    <div class="job_description" style="display: none; ">
      Lorem ipsum
    </div>
  </li>
  <li>
    <div class="grey_button"><a href="" class="arrow">More information</a></div>
    <div class="job_description" style="display: none; ">
      Lorem ipsum
    </div>
  </li>
  <li>
    <div class="grey_button"><a href="" class="arrow">More information</a></div>
    <div class="job_description" style="display: none; ">
      Lorem ipsum
    </div>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:53:43.100

您可以为 all 添加一个查找`$('.job_description').hide()`。

如果这会影响具有相同类的页面的其他部分：

```
$('.grey_button a').toggle(function() { /* cache parent el */
    var $parent = $(this).closest('li'),
        $list = $parent.parent();
    $list.find('.job_description').hide();
    $list.find('.open').removeClass('open')

    $parent.find('.job_description').fadeIn(0);

    $(this).toggleClass('open');
    //$(this).text($(this).text() == 'More Information' ? 'Hide Information' : 'More Information');
    return false;
}, function() {
    $(this).closest('li').find('.job_description').fadeOut(0);
    $(this).toggleClass('open');
    //$(this).text($(this).text() == 'Hide Information' ? 'More Information' : 'Hide Information');
    return false;
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:55:44.063

在这种情况下，我认为您可以大大减少代码：

```
$('.grey_button a').click(function(e) {
    e.preventDefault();
    $('.job_description').hide(); // Reset
    $(this).closest('.job_description').fadeToggle();
    $(this).toggleClass('open');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T23:48:52.417

我会做：

```
$(document).ready(function () {  
    $('.grey_button a').on('click', function(e) {
        e.preventDefault();
        $('.job_description').not($(this).closest('li').find('.job_description')).hide();
        $(this).toggleClass('open').parent('div').next('.job_description').toggle();
    });
});​ 
```

[小提琴](http://jsfiddle.net/tNYC3/)

# php - 条件语句中的顺序

> ID：11181802
> 
> 赞同：6
> 
> 时间：2012-06-24T22:46:59.237
> 
> 标签：php

> **可能重复：**
> [条件中的 php 错误位置](https://stackoverflow.com/questions/9438043/php-false-place-in-condition)

我注意到很多 PHP 代码使用条件语句，例如 CONST == VARIABLE。我是在语法总是反向表达的情况下长大的。这种结构有原因吗？

例子：

```
 // this is the way I see it most typically represented in PHP
 if ( false == $foobar ) { // do this }

 // this is the way I normally do it
 if ( $foobar == false ) { // do this } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T22:48:22.183

这是为了防止`==`和之间的常见拼写错误`=`，称为尤达条件。考虑以下：

```
if( false = $foobar) { 
```

这将导致一个错误，捕获被视为错误的内容，因为您无法将任何内容分配给`false`. 相反：

```
if( $foobar = false) { 
```

这是有效的语法，而且很容易犯错误。

但是，我通常更喜欢`if( $foobar == false)`语法，因为单元测试应该能够捕获这些程序错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T22:48:11.403

你通常这样做的方式正是大多数程序员的做法。第一个例子称为尤达条件：

[http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html)

这不是常态。

# .net - 单壳执行

> ID：11181803
> 
> 赞同：5
> 
> 时间：2012-06-24T22:47:05.430
> 
> 标签：.net, web-services, mono, mod-mono

我使用在 Centos 6.0 64 位上运行 Apache 的 Mono 2.11.1 构建来运行一个名为 Provisionning 的 Web 服务，它与 Asterisk 交互。我需要调用并执行一个 shell 命令来转换音频文件，称为 Sox。问题是我收到此错误消息：

```
System.ServiceModel.FaultException: System.ComponentModel.Win32Exception: ApplicationName='sox.sh', CommandLine='/var/lib/asterisk/sounds/4/chimes.wav /var/lib/asterisk/sounds/4/chimes_sox.wav', CurrentDirectory='/var/www/html/vms/bin/', Native error= Cannot find the specified file
 at System.Diagnostics.Process.Start_noshell (System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process process) [0x00000] in <filename unknown>:0
 at System.Diagnostics.Process.Start_common (System.Diagnostics.ProcessStartInfo startInfo, System.Diagnostics.Process process) [0x00000] in <filename unknown>:0
 at System.Diagnostics.Process.Start (System.Diagnostics.ProcessStartInfo startInfo) [0x00000] in <filename unknown>:0
 at Provisionning.VMSWS.ShellExec (System.String cmd, System.String path, System.String parms, System.Int32& exit_code) [0x00000] in <filename unknown>:0
 at Provisionning.VMSWS.SoxConvert (System.String fileName, System.String targetDir) [0x00000] in <filename unknown>:0
 at Provisionning.VMSWS.UploadFile (System.String username, System.String password, System.Byte[] f, System.String fileName) [0x00000] in <filename unknown>:0
 at (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (System.Reflection.MonoMethod,object,object[],System.Exception&)
 at System.Reflection.MonoMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in <filename unknown>:0 
```

如果我直接指定位于 /usr/bin 上的 sox 命令，不带任何参数，我会从 sox 应用程序中获得默认的“未指定参数”消息。如果我用两个参数指定 sox 命令，我会收到我粘贴的相同错误消息。为了传递和减少一些可能性，我在 web 服务的 bin 目录中创建了一个 shell 脚本，它执行带有一些参数的 sox 命令。手动执行 sox.sh 脚本，一切正常。从 web 服务的代码执行 sox.sh 脚本，我得到了指定的相同错误。

shell执行过程方法如下：

```
 protected String ShellExec(string cmd,string path,string parms,out int exit_code)
    {
        System.Diagnostics.ProcessStartInfo psi = new System.Diagnostics.ProcessStartInfo(cmd, parms);
        psi.RedirectStandardOutput = true;
        psi.UseShellExecute = false;
        psi.WorkingDirectory = path;

        System.Diagnostics.Process p = System.Diagnostics.Process.Start(psi);
        string tool_output = p.StandardOutput.ReadToEnd();
        p.WaitForExit();

        exit_code = p.ExitCode;
        return tool_output;
    } 
```

这很简单

有什么线索吗？我真的无法理解缺少什么......

TIA

沙鲁阿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T07:48:52.837

尝试将完整路径传递给 sox.sh。

还要确保您`#!/bin/sh`在 shell 脚本中具有第一行。

# performance - 什么时候生成静态页面或动态生成更好？

> ID：11181804
> 
> 赞同：0
> 
> 时间：2012-06-24T22:47:34.133
> 
> 标签：performance

标题几乎概括了我的问题。

与使用查询数据库的动态生成页面相比，何时生成用户可以访问的静态页面更有效？至于在什么情况下会比另一种更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T23:05:16.610

要提供静态页面，您的 Web 服务器只需要从磁盘读取页面并将其发送。几乎不需要处理。如果页面被频繁访问，它很可能会被缓存在内存中，因此甚至不需要磁盘访问。

动态生成页面显然有更多的开销。无论查询多么简单，您进行的每一次数据库访问都会产生成本。（在我最近工作的一个项目中，我测量了每个查询的最小开销为 0.7 毫秒，即使对于`SELECT 1;`. 快多少？这仅取决于动态生成页面所做的工作量。我们不知道你在做什么，所以我们不能对此发表评论。

现在，如果您生成一个静态页面并将其保存到磁盘，这意味着您需要在每次生成该页面的数据发生更改时*重新生成它。*如果数据更改的频率比实际访问页面的频率高，那么您可能会做*更多的*工作而不是更少！但在大多数情况下，这是一个非常不可能的情况。

更有可能的是，您在生成静态页面并将它们保存到磁盘时遇到的最大问题是编码（和维护）在必要时重新生成页面的逻辑。*您将需要准确*跟踪进入每个页面的数据，并且在代码中可以更改数据的*每个*地方，您都需要调用所有相关页面的重新生成。如果您只忘记了一个，那么您的用户可能有时会查看过时的数据。

如果您将每个请求的动态生成和在磁盘上缓存生成的页面混合在一起，那么由于混合了这两种样式，您的代码将更难阅读和维护。

在某些情况下，您不能真正在磁盘上缓存生成的页面——比如响应来自表单提交的 POST 请求。或者想象一下，当您的用户调用某些操作时，您必须向第 3 方 API 发送请求，并且从该 API 返回的数据将在页面中使用。每次从 API 返回的内容可能都不一样，所以在这种情况下，您需要每次动态生成页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:03:18.003

静态页面（或更好的资源）充满内容，不会更改或至少不经常更改，并且不允许对其进行进一步查询：关于页面，联系人，...

在这种情况下，查询这些页面没有任何意义。另一方面，我们有数据（例如在数据库中）并且想要查询它/给用户查询它的机会。在这种情况下，您为用户提供了一个页面，该页面可以指定查询并返回带有动态生成数据的渲染页面。

在我看来，这取决于您想要呈现给用户的结果。它要么只是一个信息，要么是查询数据源的可能性。第一个结果是在你做某事之前知道的，第二个（查询数据）是在你有查询参数之后知道的，这意味着你事先不知道结果（它可能是空的或无效的）。

这取决于您的架构，但是当您认为 GET 请求应该是幂等的时，当缓存路径上显示的数据发生新情况时，使用代理缓存动态页面和使缓存无效也应该很容易。在这种情况下，可以节省大量时间，因为系统的行为就像缓存页面是静态的，但它们来自文件系统，而是来自您的内存，这非常快。

干杯悠闲

# ruby - Jekyll - 将内容分成两列

> ID：11181807
> 
> 赞同：4
> 
> 时间：2012-06-24T22:47:59.357
> 
> 标签：ruby, jekyll, liquid, github-pages

我有一个基本的布局页面模板：

```
---
layout: default
---

<header class="sidebar">
    {{ page.title }}
</header>

<section class="content">
    {{ content }}
</section> 
```

我使用它作为页面模板的页面只是被放入`<section>`块中的 Markdown。

`<header>`我正在寻找一种方法将我的所有页面内容保存在一个文件中，但拥有它，以便我可以定义从页面模板放入标签的单独内容。

有没有办法做到这一点并将所有页面的内容保存在一个文件中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T02:13:00.280

您可以通过定义您希望在`_includes/`目录中分离和重用的内容来做到这一点。

然后，您可以通过调用来包含它，例如：`{% include file.ext %}`包含文件名的`_includes/file.ext`（几乎就像您只是复制并粘贴它一样）。

请参阅[此处](https://github.com/mojombo/jekyll/wiki/Usage)`_includes`与 Jekyll 文档中的相关部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T16:32:41.680

YAML Front Matter 可用于直接存储页面的附加内容。这是通过创建自定义键/值变量来完成的。布局/模板使用流动标签来检查辅助内容是否可用。如果是这样，它会得到输出。否则，将跳过该部分。

下面是一个布局模板示例，用于检查是否`myvar1`设置了一个名为的自定义变量：

```
---
layout: default
---

<header class="sidebar">

    <h2>{{ page.title }}</h2>

    {% if page.myvar1 %}
        <p>Secondary content here: {{ page.myvar1 }}</p>
    {% endif %}

</header>

<section class="content">
    {{ content }}
</section> 
```

*注意：为了匹配您的原始示例，此布局文件调用父“默认”布局。对于此示例，上述内容位于名为“_layouts/nested_layout.html”的布局文件中。*

要使用新插槽，`myvar1`需要在前面添加一个变量，如下所示：

```
---
layout: nested_layout
title: This is the post test layout
myvar1: More here <strong>including bold text</strong>.
---

And here is the page content: The quick brown fox jumps over the lazy dog. 
```

处理该页面后，将显示辅助内容。如果您创建另一个没有 的页面，则`myvar1`模板的该部分不会呈现任何内容。

您可以根据需要向页面添加任意数量的自定义变量。这些值可以包括 HTML，如本例所示。（它在 Jekyll 0.11.2 中对我有用。）如果您有很多代码要添加（而不是容易放在一行上的代码），或者如果您想要打开相同的内容/关闭多个页面，您可以使用自定义变量作为标志。然后，在 {% if %} 标记中，如果设置了值，您将调用包含。

# php - PHP 中的 Mongo DB MapReduce

> ID：11181810
> 
> 赞同：3
> 
> 时间：2012-06-24T22:48:12.707
> 
> 标签：php, mongodb, mapreduce, schema, nosql

首先这是我第一次来蒙哥...

概念：

1.  用户能够用自然语言描述图像。
2.  划分用户输入并将他描述的单词存储在一个名为 words 的 Collection 中。
3.  用户必须能够浏览最常用的词并将这些词添加到他们的描述中。
4.  系统将使用最常用的词（对于所有用户）并使用这些词来描述图像。

我的word文档（目前）如下（示例）

```
{
"date": "date it was inserted"
"reported": 0,
"image_id": "image id"
"image_name": "image name"
"user": "user _id"
"word": "awesome"
} 
```

单词将被复制，以便每个单词都可以与用户相关联...

**问题**：我需要执行一个 Mongo 查询来让我知道不是由给定用户创建的最常用的词（用于描述图像）。（满足以上第 3 点）

我已经看过 MapReduce 算法，但从我读到的内容来看，它有几个问题：

1.  无法对结果进行排序（我可以从最常用到最不常用的顺序）
2.  在数百万个文档中，它可能需要很长的处理时间。
3.  无法限制返回结果的数量

我考虑过每天在给定时间运行一项任务，以将给定用户未用于描述给定图像的单词排名存储在文档（在不同的集合中）列表中。我必须将其限制为 300 个结果或其他内容（**关于适当限制的任何想法？？**）类似：

```
{
user_id: "the user id"
[
{word: test, count: 1000},
{word: test2, count: 980},
{word: etc, count: 300}
]
} 
```

我在这个解决方案中看到的问题是：

1.  结果会有相当大的延迟，这是不可取的。
2.  为所有用户生成此文档时的服务器负载可能会激增（实际上我在 Mongo 中对此知之甚少，所以这只是一个假设）

也许我的方法没有任何意义......也许我在 Mongo 中缺乏经验将我指向错误的“模式设计”。

知道什么可能是解决此类问题的好方法吗？

很抱歉这篇大文章，感谢您的时间和帮助！

若昂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T06:39:43.377

如前所述，您可以使用易于使用的[group命令，但您需要在客户端对结果进行排序。](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Group)此外，结果作为单个 BSON 对象返回，因此必须相当小——少于 10,000 个键，否则你会得到一个异常。

基于您的数据结构的代码示例：

```
db.words.group({
    key : {"word" : true},
    initial: {count : 0},
    reduce: function(obj, prev) { prev.count++},
    cond: {"user" :{ $ne : "USERNAME_TO_IGNORE"}}
}) 
```

另一种选择是使用新的[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)，它将在 2.2 版本中发布。像这样的东西应该工作。

```
db.words.aggregate({
   $match : { "user" : { "$ne" : "USERNAME_TO_IGNORE"} },
   $group : {
     _id : "$word",
     count: { $sum : 1}
   }
}) 
```

或者您仍然可以使用 MapReduce。实际上你可以限制和排序输出，因为结果是一个集合。只需在输出上使用 .sort() 和 .limit() 即可。您还可以使用增量 map-reduce 输出选项，这将帮助您解决性能问题。查看[MapReduce中的](http://www.mongodb.org/display/DOCS/MapReduce)[out](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Outputoptions)参数。

下面是一个示例，它使用增量功能将现有集合与 words_usage 集合中的新数据合并：

```
m = function() { 
   emit(this.word, {count: 1}); 
};

r = function( key , values ){
     var sum = 0;
     values.forEach(function(doc) {
          sum += doc.count;
     });
     return {count: sum};
 };

db.runCommand({
    mapreduce : "words", 
    map : m,
    reduce : r,
    out : { reduce: "words_usage"},
    query : <query filter object>
})

# retrieve the top 10 words
db.words_usage.find().sort({"value.count" : -1}).sort({"value.count" : -1}).limit(10) 
```

我猜你可以每隔几分钟/几小时在 cron 中运行上述 MapReduce 命令，这取决于你想要的结果有多准确。对于更新查询条件，您可以使用单词文档创建日期。

一旦您拥有系统热门词集合，您就可以构建每个用户的热门词或只是实时计算它们（取决于系统大小）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T00:05:00.653

该`group`函数应该是一个更简单的版本`MapReduce`。您可以像这样使用它来获得每个单词的总和：

```
db.coll.group(
           {key: { a:true, b:true },
            cond: { active:1 },
            reduce: function(obj,prev) { prev.csum += obj.c; },
            initial: { csum: 0 }
            }); 
```

# api - 将用户数据从 Salesforce 提供给第三方应用程序

> ID：11181812
> 
> 赞同：0
> 
> 时间：2012-06-24T22:48:25.220
> 
> 标签：api, salesforce

我正在尝试找到将 Salesforce 帐户与第三方应用程序连接的最佳方式。想法是将所有 SF 帐户用户的数据导入应用程序，以便所有这些用户将在此应用程序中自动创建帐户。因此，SF 客户可以通过......希望一/两次点击，让他们的用户访问我们的应用程序。现在我知道这两个选项：

1.  导出用户数据并导入
2.  向我们的第三方应用程序提供一些允许的用户帐户（用户/通行证/令牌 - 仅读取用户列表的权限），它将通过 SF API 获取数据
3.  ... 对 SF 帐户持有人来说更容易一些，因为前两个选项确实不是预期的解决方法，如果有人可以在这里提供帮助，我会很高兴。:)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:23:10.257

其他应用程序在什么平台上运行？如果它是基于网络的，我将实现一个网络服务，Salesforce 可以按需连接（即当帐户所有者希望时）以发送帐户信息。

这可能是最简单的解决方案，您可以在帐户上设置字段时从触发器触发代码（您需要在`@future`执行标注的方法上使用注释），或者您可以实现 Visualforce 页面处理它并显示潜在的错误等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T13:42:00.860

实际上，我发现 oAuth 登录和访问非常适合我的要求。

PHP示例可以在这里找到：

[http://developer.force.com/cookbook/recipe/interact-with-the-forcecom-rest-api-from-php](http://developer.force.com/cookbook/recipe/interact-with-the-forcecom-rest-api-from-php)

# c++ - type_info 的 C++ 特定类型

> ID：11181814
> 
> 赞同：0
> 
> 时间：2012-06-24T22:48:42.213
> 
> 标签：c++, typeinfo

考虑以下方法

```
static ComponentType & getTypeFor(const type_info &t){
        ComponentType * type = componentTypes[t.hash_code()];

        if(type == NULL)
        {
            type = new ComponentType();
            componentTypes[t.hash_code()] = type;
        }
        return *type;
};

static bitset<BITSIZE> getBit(const type_info &t){
    ComponentType & type = getTypeFor(t);
    return type.getBit();
} 
```

我会这样称呼它

```
ComponentManagerType::getBit(typeid(MyComponentClass)); 
// Not an instance, passing class name 
```

现在正如 ComponentManagerType 所建议的那样；这仅适用于组件。目前的问题是可以传递任何类型。它不会造成任何伤害，但将为非组件对象创建一个 id 和 bitset。

问：如何强制此方法只接受基类型 Component 的对象？

我知道没有直接的方法。但我对此非常摸不着头脑。

编辑：添加了我自己的解决方案。不确定它是否是犹太洁食。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T23:04:03.803

没有直接的方法；`type_info`是设计一个最小的界面。

我建议您将其重写`getBit`为可调用的模板函数`getBit<MyComponentClass>()`。然后您可以检查模板中的基类型（例如使用[boost::is_base_of](http://www.boost.org/doc/libs/1_36_0/libs/type_traits/doc/html/boost_typetraits/reference/is_base_of.html)；您甚至可以使用[std::enable_if](http://en.cppreference.com/w/cpp/types/enable_if)强制执行模板函数声明中的要求）并在`typeid`知道基类正确的情况下执行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T00:10:32.347

```
template<typename component>
static bitset<BITSIZE> getBit(){

    //Check if we are being legal with components and shizzle
    Component * c = (component*)0;

    ComponentType & type = getTypeFor(typeid(component));
    return type.getBit();
} 
```

这将引发致命错误。如果铸造不起作用。它只是意味着它不是一个组件。

不知道这将如何公平。

但这似乎有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T23:00:02.073

你说的对。任何导数都可以通过。C++ 语言没有此类限制的功能。您只能使该方法受保护/私有，以缩小可能调用地点的范围。在较小的范围内，您有更好的机会控制呼叫。

# python - 如何使数据输入到 StringIO 的顺序无关紧要？- Python

> ID：11181818
> 
> 赞同：1
> 
> 时间：2012-06-24T22:49:18.720
> 
> 标签：python, pygtk

我编写了一个非常简单的应用程序，它根据用户输入生成配置文件。然而，数据从 StringIO 转储到实际 conf 文件的顺序对于使用该文件的程序很重要。我在代码中解决这个问题的方法是自上而下的数据输入模型。但是如果用户乱序输入数据，这会导致程序失败或者生成的conf文件将变得无用。有没有办法重新协调随机数据输入顺序并确保来自 StringIO 的数据以特定顺序插入？

目前代码看起来像这样（在你们的大力帮助下，它到了这个阶段！）

```
 self.output = StringIO.StringIO()     

    context = self.toolbar.get_style_context()
    context.add_class(Gtk.STYLE_CLASS_PRIMARY_TOOLBAR)

def on_servername_activate(self, widget):
    output = StringIO.StringIO()         
    servername = widget.get_text()
    self.output.write("USHARE_NAME="+servername+'\n')

def on_netif_changed(self, widget):
    netif = widget.get_active_text()
    self.output.write("USHARE_IFACE="+netif+'\n')

def on_port_activate(self, widget):
    port = widget.get_text()
    self.output.write("USHARE_PORT="+port+'\n')

def on_telprt_activate(self, widget):
    telprt = widget.get_text()
    self.output.write("USHARE_TELNET_PORT="+telprt+'\n')

def on_dirs_activate(self, widget):
    dirs = widget.get_text()
    self.output.write("USHARE_DIR="+dirs+'\n')

def on_iconv_toggled(self, widget):
    iconv = widget.get_active()
    if iconv == True:
        self.output.write("USHARE_OVERRIDE_ICONV_ERR="+"True"+'\n')
    else:
        self.output.write("USHARE_OVERRIDE_ICONV_ERR="+"False"+'\n')

def on_webif_toggled(self, widget):
    webif = widget.get_active()
    if webif == True:
       self.output.write("USHARE_ENABLE_WEB="+"yes"+'\n')
    else:
       self.output.write("USHARE_ENABLE_WEB="+"no"+'\n')

def on_telif_toggled(self, widget):
    telif = widget.get_active()
    if telif == True:
        self.output.write("USHARE_ENABLE_TELNET="+"yes"+'\n')
    else:
        self.output.write("USHARE_ENABLE_TELNET="+"no"+'\n')

def on_xbox_toggled(self, widget):
    xbox = widget.get_active()
    if xbox == True:
        self.output.write("USHARE_ENABLE_XBOX="+"yes"+'\n')
    else:
        self.output.write("USHARE_ENABLE_XBOX="+"no"+'\n')

def on_dlna_toggled(self, widget):
    dlna = widget.get_active()
    if dlna == True:
        self.output.write("USHARE_ENABLE_DLNA="+"yes"+'\n')
    else:
        self.output.write("USHARE_ENABLE_DLNA="+"no"+'\n')

def on_commit_clicked(self, widget):
    commit = self.output.getvalue()
    logfile = open('/home/boywithaxe/Desktop/ushare.conf','w')
    logfile.write(commit)

def on_endprogram_clicked(self, widget):
    sys.exit(0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:58:35.100

重写代码，以便在更改字段时更改配置文件字符串，而不是更改内存中[字典的值。](http://docs.python.org/tutorial/datastructures.html#dictionaries)然后，让您的 on_commit_clicked 函数使用该字典完全按照您的需要构建配置文件字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:14:45.670

装饰每个需要它的函数（一个简单的方法，它接受小部件并返回一个合适的 - 或者可能是一个闪电战'on_ *'方法的类装饰器） - 你有很多重复并且让装饰器附加到一个列表或其他东西.

```
def on_webif_toggled(self, widget):
    webif = widget.get_active()
    if webif == True:
       self.output.write("USHARE_ENABLE_WEB="+"yes"+'\n')
    else:
       self.output.write("USHARE_ENABLE_WEB="+"no"+'\n') 
```

我应该注意`== True`应该正确地写为`is True`或只是`if webif:`。身份检查比相等检查更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T22:58:22.560

您需要将数据收集与输出生成分开。想象一下像一个单独的`ConfigBuilder`类，比如，，`telnet_port`属性和一个`ushare_iface`只返回一个生成的字符串 blob 的方法。然后您的方法将只设置以下字段：`ushare_dir``build()``builder`

```
def on_servername_activate(self, widget):
    servername = widget.get_text()
    self.builder.ushare_name = servername 
```

当用户单击 Commit 按钮时，您会生成配置并将其写入文件：

```
def on_commit_clicked(self, widget):
    logfile = open('/home/boywithaxe/Desktop/ushare.conf','w')
    logfile.write(self.builder.build()) 
```

如果您不想拥有一个单独的 Builder 类，您可以只在字典甚至窗口类的成员字段中收集输入数据：

```
class MyApp(...):

    ushare_name = None
    ... more fields to store user input

    def can_build(self):
        if self.ushare_name and
           self.ushare_xxx and
           self.ushare_yyy and
           self.phase_of_moon_is_right():
            return True
        return False

    def build_config(self):
        return "BLAH =" + self.ushare_name + ...

    def on_servername_activate(self, widget):
        servername = widget.get_text()
        self.ushare_name = servername

    def on_commit_clicked(self, widget):
        if self.can_build():
            logfile = open('/home/boywithaxe/Desktop/ushare.conf','w')
            logfile.write(self.build_config())
        else:
            display_some_warning_message("Data incomplete, the commit button should've been hidden/disabled so the user can't click until the app has all data it needs") 
```

# php - 在 php int 更改上显示图像

> ID：11181819
> 
> 赞同：3
> 
> 时间：2012-06-24T22:49:19.670
> 
> 标签：php, json

在 PHP 中，当 int 从 0 变为 1 时，如何让它显示图像？我有;

```
$url = "forums.bukkit.org/alerts.json";
$page = file_get_contents($url);
$json_arr = json_decode($string,true);
return $json_arr['_visitor_alertsUnread']; 
```

当 json_arr >0 时，如何让它显示图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T22:52:42.667

```
if($json_arr['_visitor_alertsUnread'])
   echo "seen picture!";
else
   echo "not seen picture!"; 
```

# windows-8 - 为 webview 控件提供域/用户凭据

> ID：11181821
> 
> 赞同：4
> 
> 时间：2012-06-24T22:49:43.937
> 
> 标签：windows-8, impersonation, winrt-xaml, networkcredentials, dotnet-httpclient

有谁知道如何为 WebView 控件提供凭据（甚至更好 - 在特定域用户的上下文中运行 Windows 8 Metro 风格应用程序/WinRT 应用程序？）我尝试按照此处列出的 HttpClient + WebView 方法（ http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/05e46a0a-e913-469d-a4a5-4a805dcf158a）但它仍然提示用户输入凭据，因为在返回的内容中有指向受保护的物品。

我有一个 NetworkCredential 对象，我非常想将它应用到每一个 HTTP 调用。

肯定有人以前做过这个吗？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T22:02:57.630

为了连接到公司网络上的站点，您必须在**Package.appxmanifest中启用****privateNetworkClientServer**功能。您可以在 XML 中执行此操作，也可以在 Visual Studio 中双击文件并使用设计器（功能选项卡）。在 UI 中，它被称为“家庭或工作网络”。

 **现在您可以访问 Intranet，您可以导航到该站点，但系统会提示您提供凭据。如果您希望自动提供用户域身份（企业单点登录），您还需要启用**企业**身份验证功能。这在清单 UI 中称为“企业身份验证”。

从那里您应该能够使用 WebView 浏览到任何 Intranet 站点，而不必进行身份验证。如果您希望在 WebView 之外做一些事情，您应该查看以下文章和示例：

使用 WebAuthenticationBroker：

[http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

WebAuthenticationBroker 有一个名为**UseCorporateNetwork**的选项。请确保在按照上面的示例进行操作时使用它。

最后，如果您想对 Facebook 或 Flicr 等其他网站进行单点登录，请参阅以下示例：

[http://msdn.microsoft.com/en-US/library/windows/apps/xaml/Hh465283](http://msdn.microsoft.com/en-US/library/windows/apps/xaml/Hh465283)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-17T13:02:37.007

我遇到了同样的问题，但幸运的是找到了答案:) 这里的主要问题是 Windows 商店应用程序包含 2 个不同的 HttpClient

其中一个是我们从 c# 应用程序中知道的“经典”一个（自动使用），另一个是“新”HttpClient - 它与 WebView 连接:)

波纹管是两种类型： System.Net.Http.HttpClient（经典的一种） Windows.Web.Http.HttpClient（新的）

所以记得声明新的 One 并执行如下代码

```
var filter = new HttpBaseProtocolFilter();    
filter.ServerCredential = new Windows.Security.Credentials.PasswordCredential("http://website","login", "password");
            Windows.Web.Http.HttpClient client2 = new Windows.Web.Http.HttpClient(filter);
            var response = await client2.GetAsync(new Uri("http://website"));
 WebView.Source = new Uri("http://website"); 
```

现在请记住将登录名和密码更改为您要使用的凭据，并且网站是您要对其进行身份验证的站点。

从服务器获取响应很重要 - 这将使用户通过@服务器身份验证，因此下次您使用 webView 访问该站点时，您将通过身份验证

它适用于基本身份验证和 NTLM 身份验证

在这种情况下，请记住 关闭**企业身份验证**

希望它能帮助人们寻找这个问题的解决方案:)**

# c++ - 为什么我们需要 crossCheckMatching 作为特征？

> ID：11181823
> 
> 赞同：6
> 
> 时间：2012-06-24T22:50:30.307
> 
> 标签：c++, opencv, sift, surf

我正在阅读大量使用特征提取（sift ecc）进行对象检测的帖子。

在对两个图像都计算了描述符之后，为了获得良好的匹配，他们正在使用 crossCheckMatching。（在[sample/cpp/descritpor_extractor_matcher.cpp](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/descriptor_extractor_matcher.cpp?rev=3943)上找到）

我能理解为什么会这样选择吗？

为什么我们需要同时评估两者

```
descriptorMatcher->knnMatch( descriptors1, descriptors2, matches12, knn );
descriptorMatcher->knnMatch( descriptors2, descriptors1, matches21, knn ); 
```

我不明白。

例如，计算欧几里距离不会在两个方向上返回**相同的结果**？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-14T15:23:02.303

您通常不能假设您的匹配器将使用 Eucludian 距离。例如，BFMatcher 支持不同的规范：L1、L2、Hamming...

您可以在此处查看文档以获取更多详细信息： http: [//docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html)

无论如何，所有这些距离测量都是对称的，你用哪一个来回答你的问题并不重要。

答案是：调用`knnMatch(A,B)`不等于调用`knnMatch(B,A)`。

如果你不相信我，我会试着给你一个图形和直观的解释。为了简单起见，我假设对于`knn==1`每个查询的描述符，算法只会找到 1 个对应关系（更容易绘制 :-)

我随机挑选了几个 2D 样本并创建了两个数据集（红色和绿色）。在第一个图中，绿色位于查询数据集中，这意味着对于每个绿色点，我们尝试找到最近的红色点（每个箭头代表一个对应关系）。

在第二个图中，查询和训练数据集已交换。

最后，我还绘制了`crossCheckMatching()`只保留双向匹配的函数的结果。

![图1](../Images/47721461723b351974a8b5b7016f723c.png)

正如您所看到的，`crossCheckMatching()`的输出比每个单独的 knnMatch(X,Y) / knnMatch(Y,X) 要好得多，因为只保留了最强的对应关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T17:43:34.673

我没有处理您正在使用的确切模块，但来自文档：

[http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html)

似乎第二个调用是用查询交换训练，因此可以给你一组不同的结果。将matches12 的命名更改为matches21 也暗示了这一点——这不是双向关联，而是方向关联。

您可以在机器学习中训练大型数据集时看到这一点，其中训练数据子集的结果比训练不同数据子集的性能更好。我不知道在您编写的步骤之后如何使用这两个匹配项，但我想它允许选择最佳训练，或者从数据中捕获更好的协方​​差信息。

欧几里得距离在两个方向上都是相同的，但是双向量的顺序会发生变化，因此两个调用之间的关联结构也会发生变化（除非描述符 1 == 描述符 2，这将形成一个对称矩阵，然后可能无法重复）。

稍后在代码库中发布matches12 和matches21 的使用可能也会阐明具有两个方向关联的确切原因。

希望这为理解重复调用提供了一个起点。

****编辑****

我查看了您提供的链接并回答您的问题的源代码，两点之间的距离相同，但特定点（A点）到另一个特定点（B点）的最近点不一定一个可反转的语句。因此 B 可能是离 A 最近的点，但 A 可能不是离 B 最近的点。

正如 Frédéric 的帖子以图形方式显示的那样，不是欧几里得距离在 2 个点之间发生变化，而是欧几里得距离最近的点在改变比较的视角时会发生变化。因此，交叉检查可以验证共享最近点关系的点（A 最接近 B，B 最接近 A）。

您认为这不是最佳方法（具有大量点）的直觉是正确的，因为更复杂的方法可以在 O(N*ln(N)) 时间而不是 O(N^2) 时间内找到所有此类关系- 特别是启发式驱动的搜索。但是对于（相对）少量的点，预期的性能增益将可以忽略不计，并且实现将（为了更好的改进）更加复杂。

# javascript - RegEx 字符串内只有一个点，不在开头或结尾

> ID：11181829
> 
> 赞同：3
> 
> 时间：2012-06-24T22:51:47.683
> 
> 标签：javascript, regex

如何在**javascript**中编写一个只允许用户编写的**正则表达式：**

 **`abc.def`,`abc-def`或`abc`

所以基本上匹配一个只包含字母*（只包含小写 [az]）*和 a `.`or的模式`-`。但不匹配`-`或`.`在字符串的开头或结尾或多次（仅一个`.`或`-`每个字符串）

所以**不允许**他们这样做：

`.....` `abc...abc` `abc.abc....` `abc----....` `...abc.abc` `.abc` `-abc`等等

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T22:54:12.823

*正则表达式将是：* `/^[a-z]+([\.\-]?[a-z]+)?$/`

*JavaScript：*

```
var text = 'abc.def';
var pattern = /^[a-z]+([\.\-]?[a-z]+)?$/;
if (text.match(pattern)) {
  print("YES!");
} else {
  print("NO!");
} 
```

*[在此处](http://ideone.com/DAvfF)查看并测试代码。***

# ruby-on-rails-3 - 如何在我的 default_scope 调用中使用会话变量？

> ID：11181830
> 
> 赞同：1
> 
> 时间：2012-06-24T22:51:56.477
> 
> 标签：ruby-on-rails-3

我有一个应用程序，我的用户在其中登录并且他们与给定的公司相关联。我想为我的所有模型添加一个默认范围，以便用户只能看到他们公司的数据。所以在我的`Location`模型中，我尝试了：

`default_scope where(:company_id => session[:company_id])`

而不是通过我的应用程序乱扔这些。我的想法是使其安全，以便默认情况下`Location`查询始终仅限于当前用户 company_id。我所有的其他模型都以某种方式与 a 相关联，`Location`所以这应该是我唯一需要这样做的地方。

我四处闲逛，我觉得这样做是个坏主意（尽管我看不出你会怎么做）。

我实际上可以这样做吗？如果可以，怎么做？有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T13:08:16.000

我的方法是在 ApplicationController 中有一个私有方法：

```
class ApplicationController < ActionController::Base

  helper_method :my_model

  def my_model
    Model.where(:company_id => session[:company_id])
  end

  ...
end 
```

然后在你的具体行动中使用它：

```
@models = my_model.where("created_at > ?", 2.weeks.ago) 
```

`helper_method`确保您可以在视图中将该方法用作帮助程序。我希望这能给你一个大致的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-19T23:46:33.510

清除旧问题 - 对于租赁，最好的选择是公寓或acts_as_tenant。我最近最终解决了 activerecord-multi-tenant 问题，因为 Apartment 似乎有越来越多的缩放问题。

# android - Android - IllegalStateException：地图大小为零

> ID：11181836
> 
> 赞同：16
> 
> 时间：2012-06-24T22:53:50.430
> 
> 标签：android, google-maps, android-fragments, android-mapview, android-fragmentactivity

我是一个新手 android 程序员。

让我给出一些上下文。
我的项目使用 ActionBarSherlock。

1.  我有一个包含两个片段的活动（Activity1）——一个 SherlockListFragment 和一个包含谷歌地图 MapView（本质上是 MapFragment）的 SherlockFragment。
2.  搜索结果显示在列表片段和地图片段中，操作栏选项按钮在列表和地图之间切换当前显示的片段。
3.  在列表或搜索结果地图中选择一个项目会启动一个新活动 (Activity2)，以显示来自所选项目的数据。
4.  这个新活动有一个类似的流程：显示数据的片段和显示位置的地图片段 - 由操作栏选项按钮切换。

问题：

1.  我可以在搜索结果（Activity1）列表片段中选择一个列表项，并成功启动详细信息页面（Activity2）。
2.  当我从 (Activity1) 中的地图叠加层中选择一个地图项时，应用程序崩溃，我得到如下所示的堆栈跟踪。

到目前为止我已经尝试过：

1.  我搜索了“map has zero size”和同一搜索的许多排列，包括“android”和“illegalstateexception”以及stacktrace的各个行，我检查了甚至与android无关但与google maps apis，除了这个 url [http://www.androidpub.com/1551654](http://www.androidpub.com/1551654)之外，我无法在任何地方找到遇到此错误的任何东西或任何人，但我不懂韩语，谷歌翻译没有太大帮助。
2.  我试图找到源代码的一些片段以查看发生了什么，但结果一无所获。
3.  我在我的代码中添加了日志以尝试查明异常发生的位置，我所能找到的只是它发生在 (Activity2) 详细信息活动开始之后的某个时间，即在调用 onCreate() 之后. 并且细节片段和地图片段都已在 onCreate() 中成功实例化。我什至无法在我的代码中找到一个位置来捕获异常。因此，就我所见，这个异常似乎完全是谷歌 MapView 代码中的一个错误，但如果我在任何地方犯了错误，请务必显示出来。我愿意向任何可以告诉我这里发生了什么的人提供帮助。

所以，总结一下。当从具有当前显示地图视图的活动 (Activity1) 转到另一个活动 (Activity2) 时，会发生崩溃，该活动也托管包含另一个地图视图的片段。但是当从 (Activity1) 中显示的列表片段转到包含另一个地图片段的另一个活动 (Activity2) 时，不会发生崩溃。

我希望这是足够的细节。如果您有任何问题，请发表评论。

```
D/memalloc(  121): /dev/pmem: Allocated buffer base:0x4215c000 size:2088960 offset:4177920 fd:66
D/memalloc(30944): /dev/pmem: Mapped buffer base:0x5b4f5000 size:6266880 offset:4177920 fd:164
D/AndroidRuntime(30944): Shutting down VM
W/dalvikvm(30944): threadid=1: thread exiting with uncaught exception (group=0x40aaa228)
E/AndroidRuntime(30944): FATAL EXCEPTION: main
E/AndroidRuntime(30944): java.lang.IllegalStateException: Map has zero size
E/AndroidRuntime(30944):    at android_maps_conflict_avoidance.com.google.googlenav.map.Map.drawMap(Map.java:818)
E/AndroidRuntime(30944):    at com.google.android.maps.MapView.drawMap(MapView.java:1091)
E/AndroidRuntime(30944):    at com.google.android.maps.MapView.onDraw(MapView.java:522)
E/AndroidRuntime(30944):    at android.view.View.draw(View.java:11071)
E/AndroidRuntime(30944):    at android.view.View.getDisplayList(View.java:10462)
E/AndroidRuntime(30944):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2605)
E/AndroidRuntime(30944):    at android.view.View.getDisplayList(View.java:10425)
E/AndroidRuntime(30944):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2605)
E/AndroidRuntime(30944):    at android.view.View.getDisplayList(View.java:10425)
E/AndroidRuntime(30944):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2605)
E/AndroidRuntime(30944):    at android.view.View.getDisplayList(View.java:10425)
E/AndroidRuntime(30944):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2605)
E/AndroidRuntime(30944):    at android.view.View.getDisplayList(View.java:10425)
E/AndroidRuntime(30944):    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2605)
E/AndroidRuntime(30944):    at android.view.View.getDisplayList(View.java:10425)
E/AndroidRuntime(30944):    at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:879)
E/AndroidRuntime(30944):    at android.view.ViewRootImpl.draw(ViewRootImpl.java:1948)
E/AndroidRuntime(30944):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1654)
E/AndroidRuntime(30944):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2498)
E/AndroidRuntime(30944):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(30944):    at android.os.Looper.loop(Looper.java:154)
E/AndroidRuntime(30944):    at android.app.ActivityThread.main(ActivityThread.java:4894)
E/AndroidRuntime(30944):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(30944):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(30944):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(30944):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(30944):    at dalvik.system.NativeStart.main(Native Method)
E/EmbeddedLogger(  254): App crashed! Process: com.myapp.android
E/EmbeddedLogger(  254): App crashed! Package: com.myapp.android v5 (2.0)
E/EmbeddedLogger(  254): Application Label: myapp
W/ActivityManager(  254):   Force finishing activity com.myapp.android/.activity.InfoActivity
W/ActivityManager(  254):   Force finishing activity com.myapp.android/.activity.SearchActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:46:42.053

目前，根据我的经验，避免此错误的唯一方法是不在 Fragments 中使用 MapViews。一旦将 MapView 添加到父视图中，无论是动画还是篡改它的位置，都完全移动 MapView 总是给我带来问题。我发现最有效的方法是在地图和另一个视图之间切换，其中 MapActivity 管理 MapView 而片段管理另一个视图。我再次重新实现了相同的功能，这没有问题。但是，我会观察到这是解决未知原因问题的解决方法（很可能是 android maps API 中的错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T04:33:53.183

我绝对不同意亚当的！管理片段和活动是有史以来的最佳实践。

这是完全不同的，有时甚至更难解决某些问题，但是如果您打算在多个视图中包含地图，则最好将地图片段作为片段本身或在另一个片段内部以供多个活动使用您的应用程序。

所以，切入正题，由于您没有发布任何代码，我猜您正在为相机设置动画可能是为了重置边界，或者可能只是为您的地图设置初始中心。（很可能是第一个，因为您正在显示结果）

在这种情况下，例外情况会出现`map.animateCamera(...)`，因为您正在处理可用但尚未膨胀的东西。

试试这个：

```
try{
        cu = CameraUpdateFactory.newLatLngBounds(yourBoundaries,yourPadding);
        map.animateCamera(cu);
        System.out.println("Set with padding");
    } catch(IllegalStateException e) {
        e.printStackTrace();
        cu = CameraUpdateFactory.newLatLngBounds(yourBoundaries,someWidth,someHeight,zeroPadding);
        map.animateCamera(cu);
        System.out.println("Set with whp");
    } 
```

# android - Android中的本机库加载断点

> ID：11181838
> 
> 赞同：3
> 
> 时间：2012-06-24T22:53:55.553
> 
> 标签：android, c++, android-ndk, gdb

如何在 Android 中为原生库加载事件设置断点？

我假设在**dlopen()上设置断点是一个很好的起点，但是，即使加载了****libc.so**和**/system/bin/linker**的符号，gdb 也找不到 dlopen 函数。

看起来 Android 正在使用一些特殊格式的 .so 文件，因为 nm 工具也不报告**dlopen()**位置。

是否有任何解决该问题的方法或特定于 Android 的 .so 转储工具可以帮助按名称定位函数地址，以便我可以手动设置断点？

编辑：

我要做的是设置一个断点，该断点应该在加载任何本机库时触发，即当任何代码（甚至在我的库中）调用**dlopen()**函数时。

问题是 Android GDB 不支持挂起的断点。我的场景是这样的：

1.  我启动我的应用程序并停止它。
2.  该应用程序已恢复并加载我的本机库。
3.  我的函数是从库中调用的（仅在加载应用程序时调用一次）。

如果我在 #1 之后设置断点，它将无法工作，因为该库仍然不存在并且 android-gdb 将无法重新绑定它。如果我让程序运行，然后再次停止并设置断点，我已经过了#3，所以断点将无用。

我试图通过在#1 处为**dlopen()**设置断点来解决它，然后当它命中并加载库（即#2）时，我将设置实际的断点。

使用普通的 ARM nm 和 objdump 没有任何帮助。NM'ing libc.so 表明**dlopen()**未定义：

```
00016188 T dlmemalign
         U dlopen
00016338 T dlpvalloc 
```

/ **system/bin/linker**二进制文件物理上包含**dlopen**文本（**.rodata**部分的第一个字节），但是**nm**显示以下文本：

```
arm-linux-androideabi-nm.exe: linker: No symbols 
```

用 objdump 反汇编它不会给出符号名称。

谷歌搜索 android 源发现了这个源文件：

[http://dexandroid.googlecode.com/svn/trunk/bionic/linker/dlfcn.c](http://dexandroid.googlecode.com/svn/trunk/bionic/linker/dlfcn.c)

看起来 dlopen() 确实在 /system/bin/linker 中定义，但它使用了一些非标准的符号解析机制（至少，基于第一条评论）：

```
/* This file hijacks the symbols stubbed out in libdl.so. */ 
```

那么，回到问题上来，如何在**dlopen()**中设置断点，以便在加载库时设置实际断点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T23:55:34.593

通常任何 arm objdump 都应该可以工作，但在您的 ndk 目录中会有一个。即使是非手臂 readelf 也可以工作。

我不确定您为什么希望在库中找到 dlopen() ，除非它明确使用它来打开另一个库 - 通常，人们会认为它会从 libdvm.so 中调用，无论如何我相信实现在libdl.so（拥有一个为 android 构建的 grep 版本是一件非常有用的事情 - 您可以在 lib 目录中找到字符串，但如果您想查找它们是导入还是导出，您可能需要 adb pull 和 objdump 的文件兴趣）。

如果您尝试对正在加载的库文件设置断点，则可以尝试实现其中一个静态初始化函数（C 级或加载时的 jni）并在此处设置断点。

编辑：

事实证明，用于 arm 的 objdump 不会通过用于从共享库导入的符号的 plt 来解码链接，尽管它适用于 x86 等其他一些平台。这使得很难理解去除了调试符号的二进制文件，正如您对设备上的系统库所期望的那样。我能够修补 binutils 源来为 arm 执行此操作。最终我希望在某个地方提交，但与此同时，修补版本的源代码可在[https://github.com/cstratton/binutils-android-decodeplt获得](https://github.com/cstratton/binutils-android-decodeplt)

我将 objdump 二进制文件放在 prebuilt-linux-x86/ 目录中，尽管我不知道它的可移植性如何。

# cocoa-touch - 关卡选择视图 - 类似于愤怒的小鸟

> ID：11181844
> 
> 赞同：1
> 
> 时间：2012-06-24T22:54:47.463
> 
> 标签：cocoa-touch, uiscrollview, uipagecontrol, springboard

我正在制作游戏，需要为关卡选择准备视图。你能给我推荐一些我可以使用的开源库吗？我需要图标在长按其中一个后振动，选择它们后的一些回调，准备自定义图标视图的可能性，页面控制和水平滚动。我试图使用 OpenSpringBoard 但奇怪的是在这个项目中看不到滚动视图和页面控件 - 似乎有可能只使用一页。另一方面，myLauncher( [https://github.com/dlinsin/myLauncher](https://github.com/dlinsin/myLauncher) ) 并不容易包含在项目中，因为我需要一个带有一些委托方法的单独视图。

我需要兼容 >iOS 4.2

![愤怒的小鸟](../Images/f618bb34bb035084c2abf014caa08f6b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:55:58.000

你见过这个项目吗？？

[https://github.com/AlanQuatermain/AQGridView](https://github.com/AlanQuatermain/AQGridView)

您可以在每个页面控制视图中使用它。只是您需要根据您的业务进行修改。

# java - 如何设置 TCP 客户端连接到无线到串行适配器并使用 java 向其发送数据

> ID：11181846
> 
> 赞同：2
> 
> 时间：2012-06-24T22:55:14.517
> 
> 标签：java, networking, tcp, adapter

我是一名学习移动通信和电子工程的成熟学生，这使我能够学习 Java，但我并不像我想要的那样熟练，但这就是这篇文章的目的。

我的delima是我想编写一个Java程序，使用tcp连接连接到我的无线到串行适配器（Wiz6000），但问题是我有我认为在创建连接时有效的代码但是当我将USB连接到串行转换器到适配器的串行输出并与超级终端建立链接，wifi 到串行适配器没有接收到数据。

我已经在下面包含了到目前为止的代码

```
import java.io.*;
import java.net.*;

public class Client1 {

    // Modify this value (xxx.xxx.x.xxx) to the IP address you want your client to connect to (the server’s IP address)
    static String hostString = "192.168.1.254"; 

    // Modify this value (xxxxx) to the port number that the server is accepting connections on
    static int portInt = 5000;  

    static Socket connectionSocket = null;
    static PrintWriter out = null;
    static BufferedReader in = null;
    static String fromUserString = null;
    static String fromServer = null;
    static BufferedReader stdIn = null;
    static String hostInetAddressString = null;  
    public int data;    

    public static void main(String[] args) {
        try {
            connectionSocket = new Socket(hostString, portInt);
            hostString = connectionSocket.getInetAddress().toString();
            out = new PrintWriter(connectionSocket.getOutputStream(), true);
            in = new BufferedReader(new   InputStreamReader(connectionSocket.getInputStream()));

            // Get the Inet Address of the connectionSocket and store it in the hostInetAddress InetAddress variable and then cast the hostInetAddress to a String named hostInetAddressString
            hostInetAddressString = connectionSocket.getInetAddress().toString();
            System.out.println("Connected to server with Inet Address " +     hostInetAddressString + " on port: " + connectionSocket.getPort() + "\n");
        }
        catch (Exception e) {
            System.err.println(e);
            System.exit(1);
        }

        // This is used to allow the client to receive input based on the program’s user pressing keys on their keyboard

        /* stdIn = new BufferedReader(new InputStreamReader(System.in));
        while (true) {
        try {
        if (fromUserString != null) {
        int data=Integer.parseInt(fromUserString);
        out.println(fromUserString);
        fromUserString = null;
        }   
        }
        catch (Exception e) {
        System.err.println(e);
        break;
        }
        }*/
        try
        {
            // Create a new instance of a OutputStreamWriter object
            // attached to a ByteArrayOutputStream.
            ByteArrayOutputStream out = new ByteArrayOutputStream();

            OutputStreamWriter writer = new OutputStreamWriter(out, "ASCII");

            // Write to the output stream.
            String s = "Hello World";
            writer.write(s);
            writer.flush();

            // Display the contents of the ByteArrayOutputStream.
            System.out.println(out.toString());

            // Display the encoding being used.
            System.out.println("encoding: " + writer.getEncoding());

            // Close the OutputStreamWriter object.
            writer.close();
        }
        catch (IOException ex)
        {
            System.out.println(ex.toString());
        }
    } 
```

上周我一直在查看不同的站点，这些站点正在阅读 Java 套接字客户端和服务器、串行通信和序列化，但我只是不知道该采用哪种方式。

这样做的主要目的是创建一个连接到这个 wifi 到串行适配器的应用程序，并从用户那里获取信息并通过 wifi 连接发送它，其中 wifi 到串行的另一端连接到控制数字显示器的 PCB . PCB 由我兼职工作的一家电子公司制造，其设置方式可以通过串行连接接收命令。

所以简而言之，我希望应用程序通过无线连接连接到数字显示器并将数据发送出去以进行显示。

# windows - 月份年份的 Windows 环境变量

> ID：11181847
> 
> 赞同：3
> 
> 时间：2012-06-24T22:55:34.990
> 
> 标签：windows, batch-file, environment-variables, shortcuts

我有一个过程，可以定期将日志文件和屏幕截图写入文件夹，
每周创建 30-50 个文件。文件夹结构为`..\Year\Month\filename.ext`，无法更改。

我想创建一个快捷方式来粘贴到我的收藏夹中，这样我就可以快速进入这个文件夹，但我需要一个用于`YEAR`and的变量`MONTH`。有为此的环境变量吗？

关于如何创建一个最好在没有脚本或预定作业的情况下自动更新的好主意？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T05:29:39.947

`%DATE%`环境变量保存当前日期。您可能很想用解析日期`%DATE:~6,4%`来获取年份。

但是这种方法不会很可靠。*使用“短日期格式”*`%DATE%`的 Windows 设置返回当前日期。问题是短日期格式设置是完全可定制的。一位用户可以将其系统配置为将短日期显示为；而另一个用户（即使在同一系统中）可能会选择. 对于 BAT 程序员来说，这是一场彻头彻尾的噩梦。*`29/06/2012``Fri062912`*

 *一种可能的解决方案是改用**WMIC**。WMIC 是 WMI 的 WMI 命令行界面。WMI Windows Management Instrumentation 是[http://en.wikipedia.org/wiki/Windows_Management_Instrumentation](http://en.wikipedia.org/wiki/Windows_Management_Instrumentation)

```
WMIC Path Win32_LocalTime Get Day,Hour,Minute,Month,Second,Year /Format:table 
```

以方便的方式返回日期以直接使用 FOR 解析它。

完成解析并将各个部分放在一起

```
FOR /F "skip=1 tokens=1-6" %%A IN ('WMIC Path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') DO (
  SET /A MONTH=%%D
  SET /A YEAR=%%F
) 
```

您的快捷方式可以指向包含上述代码的 BAT 文件，然后在右侧文件夹中打开资源管理器。

```
start "" "D:\FOLDER\%YEAR%\%MONTH%" 
```*

# mysql - MySQL sql 语法错误 LIKE 语句和条件

> ID：11181849
> 
> 赞同：0
> 
> 时间：2012-06-24T22:55:46.863
> 
> 标签：mysql, sql, syntax-error

也许一双新的眼睛可以帮助我解决这个问题。我认为这个错误对应于 AND OR 语句，但我换了东西，仍然收到同样的错误。有人看到以下陈述有什么问题吗？谢谢你。没有 like 子句，查询工作正常。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '%castillo% OR p.city LIKE %castillo% OR p.country LIKE %castillo% ) GROUP BY ima' 附近使用正确的语法
> 
> 选择 p.id，p.name，p.city，p.country，images.name 作为图像，MIN(images.position) 作为位置 FROM properties as p，property_images 作为图像 WHERE p.id = \images.property_id AND p .is_active = 1 AND (p.name LIKE %castillo% OR p.city LIKE %castillo% OR p.country LIKE %castillo%) GROUP BY images.property_id

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T22:57:28.697

尝试在你的字符串文字周围加上一些引号，例如

```
SELECT p.id, p.name, p.city, p.country, images.name as image, MIN(images.position) as position 
FROM properties as p, property_images as images
WHERE p.id = images.property_id 
  AND is_active = 1 
  AND ( p.name LIKE '%castillo%' OR p.city LIKE '%castillo%' OR p.country LIKE '%castillo%' ) 
GROUP BY images.property_id 
```

# php - 如何使用准备好的语句将布尔值放入 mysql 数据库？

> ID：11181852
> 
> 赞同：13
> 
> 时间：2012-06-24T22:56:36.510
> 
> 标签：php, mysqli, boolean, prepared-statement

根据[PHP 手册](http://php.net/manual/en/mysqli-stmt.bind-param.php)，四种变量类型`mysqli->bind_param`为

1.  整数，
2.  双倍的，
3.  字符串和
4.  斑点。

插入布尔值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T23:06:57.067

无论如何，MySQL 并不真正存储布尔值，这是一个技巧。

实际格式是`TINYINT`，我猜`integer`是 pdo 的格式。

例如，您必须将真/假转换为 1/0 [`intval`](https://www.php.net/manual/en/function.intval.php)。

# java - instanceof 的反义词

> ID：11181853
> 
> 赞同：17
> 
> 时间：2012-06-24T22:56:44.413
> 
> 标签：java, instanceof

是否有可能在java中得到与instanceof相反的东西？我试过这样的代码：

```
if( example !instanceof blarg).... 
```

但它不会让我把！任何地方都没有错误，请帮助。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-24T22:58:06.403

你必须否定整个事情：

```
if(!(example instanceof blarg)) 
```

你也可以这样写：

```
if(example instanceof blarg == false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T11:36:39.383

作为替代使用`isInstance`方法：

```
 if (!example.class.isInstance(blarg))
   {
     // your code here
   } 
```

# javascript - 更改页面的 bgcolor

> ID：11181856
> 
> 赞同：0
> 
> 时间：2012-06-24T22:57:29.637
> 
> 标签：javascript, html, random, background-color

我正在制作一个网站，每次您访问主页时，页面的背景颜色都会更改为 10 种颜色中的一种。每次我尝试页面下方的代码时，它都会保持白色。

```
<html>
<head>
<script type="text/javascript">
function rand() {
var r = Math.floor((Math.random()*10)+1);
if (r == 1) {bgcolor('#000000', 'body');}
if (r == 2) {bgcolor('#FFFFFF', 'body');}
if (r == 3) {bgcolor('#00FF00', 'body');}
if (r == 4) {bgcolor('#FF0000', 'body');}
if (r == 5) {bgcolor('#0000FF', 'body');}
if (r == 6) {bgcolor('#FFFF00', 'body');}
if (r == 7) {bgcolor('#00FFFF', 'body');}
if (r == 8) {bgcolor('#FF00FF', 'body');}
if (r == 9) {bgcolor('#C0C0C0', 'body');}
if (r == 10) {bgcolor('#700000', 'body');}
}
</script>
</head>
<body id="body" onload="rand()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T22:59:09.313

因为`bgcolor`不存在。正确的命令如下：

```
if (r == 1) {document.body.style.backgroundColor = '#000000';} 
```

或者您也可以通过它的 CSS 名称访问它：

```
if (r == 1) {document.body.style['background-color'] = '#000000';} 
```

**更多在这里**：[http](http://www.ezineasp.net/post/Javascript-Change-Background-Color-Style.aspx) ://www.ezineasp.net/post/Javascript-Change-Background-Color-Style.aspx和这里[JavaScript 中的 CSS 背景颜色](https://stackoverflow.com/questions/3319/css-background-color-in-javascript)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T23:04:14.787

你可以这样做

```
var randomColors = ['#000000','#FFFFFF','#00FF00','#FF0000','#0000FF','#FFFF00','#00FFFF','#FF00FF','#C0C0C0','#700000']
var r = Math.floor((Math.random()*randomColors.length));
document.body.style.backgroundColor = randomColors[r];​ 
```

小提琴（继续按运行）

[http://jsfiddle.net/keith_nicholas/ayhUM/](http://jsfiddle.net/keith_nicholas/ayhUM/)

另外，这样，您可以继续添加颜色，或将颜色删除到数组中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T23:01:22.167

Bgcolor 不是 javascript 函数，请尝试以下操作：

```
document.body.bgColor = '#000000'; 
```

# dart - 在 dartlang 中实例化 Blob

> ID：11181858
> 
> 赞同：3
> 
> 时间：2012-06-24T22:58:03.390
> 
> 标签：dart, dart-html

最近我一直在努力在 dartlang 中实例化 Blob，但我想出了如何在 8640 版本中做到这一点

对于那些感兴趣的人（我在网上的任何地方都找不到示例），我这样做了：

```
HttpRequest req = new HttpRequest(); 
FileReader fileReader = new FileReader(); 
req.open("GET", "http://...", true); 
req.responseType="blob"; 
req.overrideMimeType("image/png"); 
req.on.load.add( (event) { 
  if(req.readyState==4) { 
   Blob blob = req.response; // note NOT req.responseBlob 
    fileReader.on.load.add( (evt) { 
      document.query('#myimage').src=evt.target.result; 
    }); 
    fileReader.readAsDataURL(blob); 
  } 
}); 
req.send(); 
```

我希望这对某人有帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-12T07:22:45.840

如果有人来到这里试图弄清楚如何`Blob`像我一样调用构造函数，那么您实际上需要向它提供一个列表列表（即 a `List<List<int>>`）。

所以，如果你有一个整数列表：

```
var binary = [1, 2, 3]; 
```

您因此将它传递给`Blob`构造函数：

```
var blorp = new Blob([binary]); 
```

调用`var blorp = new Blob(binary);`将导致一条令人困惑的消息，声称构造函数想要一个`String`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T05:19:43.670

从上面问题中嵌入的答案：

```
HttpRequest req = new HttpRequest(); 
FileReader fileReader = new FileReader(); 
req.open("GET", "http://...", true); 
req.responseType="blob"; 
req.overrideMimeType("image/png"); 
req.on.load.add( (event) { 
  if(req.readyState==4) { 
   Blob blob = req.response; // note NOT req.responseBlob 
    fileReader.on.load.add( (evt) { 
      document.query('#myimage').src=evt.target.result; 
    }); 
    fileReader.readAsDataURL(blob); 
  } 
}); 
req.send(); 
```

# javascript - 如何为自定义 HTML 键 [img]/path/to/image.jpg[/img] 添加属性？

> ID：11181861
> 
> 赞同：0
> 
> 时间：2012-06-24T22:58:12.057
> 
> 标签：javascript, image, replace, src

我有一个在线文本编辑器，制作精良，但目前不支持图像。

我现在有这个，不觉得这是一个很好的方法。

```
var = txt = "some text here oh and here's my image! [img]linktoimage.jpg[/img]";
var = txt.replace(/[img]/g, '<img src="');
var = txt.replace(/[/img]/g, '" alt="" />');
return txt; 
```

我将如何添加属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T23:07:33.677

我会使用替换函数来替换整个子字符串并更轻松地构建替换字符串：

```
txt = txt.replace(/\[img\](.*?)\[\/img\]/g, function(match, src) {
    return '<img src="' + src + '" alt="" />';
}); 
```

有关更多信息，请查看[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)。

# c++ - 如何从我的 checkedListbox 中获取选中的值？

> ID：11181865
> 
> 赞同：0
> 
> 时间：2012-06-24T22:58:40.920
> 
> 标签：c++, visual-studio-2010, listbox, checkedlistbox

我正在为同事编写一个程序，但不知道如何使用 Visual Studio C++ 2010 上所有项目的属性。

我也想获取在 Listbox 和 Checked Listbox 上选择或选中的字符串。在我的代码的第一行，当我使用列表框字符时，它工作得很好，但是当我尝试对我选中的列表框做同样的事情时，它给了我一个异常。

在 Checked List Box 上只检查一项的属性是什么？

```
char *nVuelo=((char*)Marshal::StringToHGlobalAnsi((String ^)(LB_VisorVuelos->Items[LB_VisorVuelos->SelectedIndex])).ToPointer());
int pAsiento=((int)Marshal::StringToHGlobalAnsi((String ^)(CLB_Asientos->Items[CLB_Asientos->SelectedIndex])).ToPointer()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T00:26:25.123

我不能给你 C++ 代码（不是我特别流利的语言），但也许这会有所帮助。

`CheckedListBox``CheckedItems`在其属性中维护已检查项目的集合。它包含所有已检查的项目，并且可以使用典型的`for`循环（C# 代码）进行访问：

```
for(int i = 0; i < checkedListBox1.CheckedItems.Count; i++)
{
  string selection = checkedListBox1.CheckedItems[i].ToString();
} 
```

您还可以使用枚举器和`foreach`循环：

```
foreach(object itemChecked in checkedListBox1.CheckedItems) 
{
   string selection = itemChecked.ToString();
} 
```

要选中/取消选中代码中的项目，请使用以下`SetItemChecked(int index, bool value)`方法：

```
checkedListBox1.SetItemChecked(4, true); 
```

# javascript - jQuery Validate + AJAX 用户名可用性检查：如何嫁给他们？

> ID：11181869
> 
> 赞同：1
> 
> 时间：2012-06-24T22:59:59.107
> 
> 标签：javascript, jquery, ajax, forms, validation

更新

* * *

多亏了**charlietfl 的**评论和建议（以及，在某一时刻，我很生气，大声笑——为我的失礼道歉），我终于从 Validate 中检查了系统，并且在发送电子邮件时停止了表单提交。所以我想我的问题已经回答了，但是如果你们都再忍耐我一会儿，我可以用你们的帮助来做最后的画龙点睛……

在我最初的设想中，除了触发正确的“电子邮件已存在”错误之外，我还使用一些 HTML 填充了第二个元素，该 HTML 更完整地向用户解释了情况并提供了登录表单的链接。这第二个元素根据字段的状态出现和消失。

有没有办法使用消息/远程部分来做到这一点？

这是我所拥有的：

```
$(document).ready(function(){
$("#signup").validate({
    errorElement: "span",
    errorPlacement: function(error, element) {
        error.appendTo(element.prev());
        //element.prev().replaceWith(error);
    },
    rules: {
        "email": {
            required: true,
            email:true,
            remote: {
                url: "/ajax/emailcheck.php",
                type: "post",
            },
        },
        "password": {
            required: true,
            minlength: 8,
        },
        "password-check": {
            required: true,
            minlength: 8,
            passmatch: true,
        },
        "tos": {
            required: true,
            minlength: 6,
        }
    },
    messages: {
        email: {
            required: " is Required",
            email: " is Improperly Formatted",
            remote: " already exists",
            },

        },
        password: {
            required: " is Required",
            minlength: " requires at least 8 characters",
        },
        "password-check": {
            required: " is Required",
            minlength: " requires at least 8 characters",
            passmatch: " must match the Passphrase",
        },
        tos: {
            required: " is Required",
            minlength: " requires at least 6 characters",
        },                      
    },
    onkeyup: true,
    onblur: true
}); 
```

而且，在理想情况下，我会喜欢这样的东西：

```
messages: {
email: {
    required: " is Required",
    email: " is Improperly Formatted",
    remote: " already exists",
    remote: {
        username: function() {
        var emailcheck = $('#email').val();  
        return $('#username_availability_result').html(emailcheck + ' is already in our system. Please <a href="/login.php">log in here</a>.');
        },
    },
},              
}, 
```

再次感谢您一直以来的关注和建议，

Z

原始问题

* * *

我正在使用 jQuery Validate 在注册表单上运行常规验证。但我想添加到表单功能的功能之一是 AJAX 检查以确定电子邮件地址是否已在系统中。问题是电子邮件检查功能存在于验证功能*之外*，因此实际上并没有在必要时阻止表单提交。

这是我的代码。（前 50 行包括验证和密码匹配。其余的构成 AJAX 检查 [由电子邮件字段的 keyup 事件触发]）。

```
 // Method adds password matching abilities to the validator
        jQuery.validator.addMethod("passmatch", function(value, element) {
           return $('#password').val() == $('#password-check').val()
        }, "* Passwords should match");

        $(document).ready(function(){
            $("#signup").validate({
                errorElement: "span",
                errorPlacement: function(error, element) {
                    error.appendTo(element.prev());
                    //element.prev().replaceWith(error);
                },
                rules: {
                    "email": {
                        required: true,
                        email:true,
                    },
                    "password": {
                        required: true,
                        minlength: 8,
                    },
                    "password-check": {
                        required: true,
                        minlength: 8,
                        passmatch: true,
                    },
                    "tos": {
                        required: true,
                        minlength: 6,
                    }
                },
                messages: {
                    email: {
                        required: " is Required",
                        email: " is Improperly Formatted",
                    },
                    password: {
                        required: " is Required",
                        minlength: " requires at least 8 characters",
                    },
                    "password-check": {
                        required: " is Required",
                        minlength: " requires at least 8 characters",
                        passmatch: " must match the Password"
                    },
                    tos: {
                        required: " is Required",
                        minlength: " requires at least 6 characters",
                    },                      
                }
            });

            //check email availability 
            $('#email').keyup(function(){  
                check_availability();  
            });  

        });               

        //function to check username availability  
        function check_availability(){  

                //get the username  
                var username = $('#email').val();  

                //use ajax to run the check  
                $.post("/ajax/emailcheck.php", { username: username },  
                    function(result){  
                        //if the result greater than none  
                        if(result > 0 ){  
                            //show that the username is not available  
                            $('#username_availability_result').html(username + ' is already in our system. Please <a href="/login.php">log in here</a>.');  
                        }else{  
                            //username available.  
                            //clear any messages
                            $('#username_availability_result').html(''); 
                        }  
                });  
        } 
```

有没有办法让 check_availability() 函数触发停止（以及在清除后启动），以便在错误状态下无法提交表单？或者整个套件和 caboodle 是否可以使用 addMethod 以某种方式集成到 Validate 中（如果是这样，请注意我在特定 ID 的元素中提供可用性反馈，而不是通过出现其他 Validate 错误的同一元素）？

提前感谢您的所有帮助和建议。

Z

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T23:08:46.273

使用已经具有内置 ajax 方法的验证插件的远程选项，该方法将绑定到输入

[http://docs.jquery.com/Plugins/Validation/Methods/remote#options](http://docs.jquery.com/Plugins/Validation/Methods/remote#options)

或者`required`也可以是一个函数（不会在 keyup 或 blur 上工作）

```
email:{ required: function(){
          return $('#username_availability_result').html()=='';
   }

} 
```

另外，如果 ajax 返回重复，为什么不重置电子邮件字段？您的代码可能会在重置字段时按原样工作

最好的建议是使用内置`remote`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:56:37.580

```
 <script language="javascript" type="text/javascript">
        $(document).ready(function() {
            $("#singupfrom").validate({
                rules: {

                    'useremail': {// compound rule
                        required: true,
                        email: true,

                        remote:{

                            url: "check_email.php",
                            type: "post",

                            data:
                            {
                                emails: function()
                                {
                                    return $('#singupfrom :input[name="useremail"]').val();
                                }
                            }

                        }
                    }

                },
                  // here custom message for email already exists
                 messages: {
                    useremail: { remote: "Email already exists"}

                }

            });

        });
    </script>

    <!-- your user email-->

                                <label>Email :</label>
                                <input type="text" name="useremail" id="useremail" value=""  />
    <!-- your user email end -->

    // your  php file "check_email.php"  will be some thing like it 
    /// get or post can also be used in place of request depending on situation
    $email = $_REQUEST['useremail'];

    <?php 
            $check   = "your query to check the email and returns the no of rows/ emails exists ";
            if ($check == '0' or empty($check)) {
                echo 'true';
            } else {
                echo  'false';

            }

?> 
```

# image - 如何在不创建手动循环的情况下计算openCV中N个图像的像素中位数？

> ID：11181871
> 
> 赞同：4
> 
> 时间：2012-06-24T23:00:36.737
> 
> 标签：image, opencv, matrix, median

有没有更好的方法来做到这一点，而无需遍历每个像素（行、列）并计算图像中每个像素的中值？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-20T22:39:04.540

您可以使用 N=3 来做到这一点

```
min(max(a, b), max(b, c), max(a,c)) 
```

# ruby-on-rails - 控制器内的 Rails 3 路由

> ID：11181875
> 
> 赞同：0
> 
> 时间：2012-06-24T23:01:11.090
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing, ruby-on-rails-3.2

我刚刚从 padrino/sinatra 切换到 rails，所以路由的东西让我很困惑。

我已经定义，

```
 namespace :admin do
    resources :teachers, :students, :lessons
  end 
```

在我的 routes.rb 文件中，当我运行 rake routes 命令时，它给了我，

```
 admin_teachers GET    /admin/teachers(.:format)          admin/teachers#index
                   POST   /admin/teachers(.:format)          admin/teachers#create
 new_admin_teacher GET    /admin/teachers/new(.:format)      admin/teachers#new
edit_admin_teacher GET    /admin/teachers/:id/edit(.:format) admin/teachers#edit
     admin_teacher GET    /admin/teachers/:id(.:format)      admin/teachers#show
                   PUT    /admin/teachers/:id(.:format)      admin/teachers#update
                   DELETE /admin/teachers/:id(.:format)      admin/teachers#destroy
    admin_students GET    /admin/students(.:format)          admin/students#index
                   POST   /admin/students(.:format)          admin/students#create
 new_admin_student GET    /admin/students/new(.:format)      admin/students#new
edit_admin_student GET    /admin/students/:id/edit(.:format) admin/students#edit
     admin_student GET    /admin/students/:id(.:format)      admin/students#show
                   PUT    /admin/students/:id(.:format)      admin/students#update
                   DELETE /admin/students/:id(.:format)      admin/students#destroy
     admin_lessons GET    /admin/lessons(.:format)           admin/lessons#index
                   POST   /admin/lessons(.:format)           admin/lessons#create
  new_admin_lesson GET    /admin/lessons/new(.:format)       admin/lessons#new
 edit_admin_lesson GET    /admin/lessons/:id/edit(.:format)  admin/lessons#edit
      admin_lesson GET    /admin/lessons/:id(.:format)       admin/lessons#show
                   PUT    /admin/lessons/:id(.:format)       admin/lessons#update
                   DELETE /admin/lessons/:id(.:format)       admin/lessons#destroy 
```

问题是，我不知道如何响应管理员/学生#update 的请求？我知道如何回应 admin#teachers，在我的管理控制器中我创建了一个教师功能。但是如何回应 admin/teachers/index 呢？或者也许在哪里回应？在哪个文件中？在哪个函数或类中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:07:51.993

对于`admin/students#update`Rails 将在此处查找操作：

```
class Admin::StudentsController < ApplicationController
  def update
    # update here
  end
end 
```

您可以使用以下命令生成此文件：

```
rails generate controller admin/students update 
```

这将写入：

```
app/controllers/admin/students_controller.rb 
```

# flash - 为什么会突然导致从 Flash AS3 中的 LSO 对象加载字典的异常？

> ID：11181877
> 
> 赞同：2
> 
> 时间：2012-06-24T23:01:26.153
> 
> 标签：flash, internet-explorer, google-chrome, actionscript, dictionary

在 Flash CS5.5 中开发网页游戏时遇到了这个奇怪的错误

当游戏启动时，它会从 LSO 加载玩家历史信息。几个月来我一直在这样做，但出于某种原因，大约 10 天前，以下行和其他类似行开始导致 Chrome 和 Internet Explorer 出现异常。它们都与从 LSO 数据对象加载字典有关。有谁知道为什么这会突然开始引起问题，而以前它工作得很好？由于我的代码和编译设置长期以来一直相同，Chrome 或 Internet Explorer 中是否有可能发生了变化？

在启动期间，LSO 被加载

```
this.lso = SharedObject.getLocal("myLSO"); 
```

但随后发生此异常：

> 引发用户异常：TypeError：错误 #1034：类型强制失败：无法将 Object@1278ad19 转换为 flash.utils.Dictionary...

这是由这条线引起的：

```
this.game.playerHist.completionData=this.lso.data.playerHistory.completionData; 
```

最终奏效的解决方案是像这样克隆字典：

```
this.game.playerHist.completionData =
    this.clone(this.lso.data.playerHistory.completionData); 
```

使用这个函数，它在处理原始对象时基本上做同样的事情（通过获取它的键），但由于某种原因不会引发异常：

```
function clone(original:Object):Dictionary {
    var cloned:Dictionary= new Dictionary();
    for(var key:Object in original) {
        cloned[key]=original[key];
    }
    return cloned;
} 
```

同样奇怪的是，有时在没有克隆功能的情况下加载字典时，它在 IE 中运行良好，只在 Chrome 中引发异常。有谁知道这两种浏览器之间可能有什么区别，或者有什么办法解释这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T17:24:33.293

我认为默认情况下，flash 仅限于在 SharedObject 中存储以下类型：Boolean、int、uint、Number、Object、Array

要允许它存储其他数据类型，您必须像这样注册一个别名：

```
flash.net.registerClassAlias('flash.utils.Dictionary', flash.utils.Dictionary); 
```

同样，我假设在您的 Dictionary 中用作键的对象类型也必须注册才能正常工作。

查看[示例](http://www.mark-powell.co.uk/2010/08/save-a-class-as-a-shared-object-with-as3/)

# uiview - cocos2d的自定义手势？

> ID：11181884
> 
> 赞同：0
> 
> 时间：2012-06-24T23:03:04.683
> 
> 标签：uiview, uiviewcontroller, cocos2d-iphone

我找到了一个对我的游戏有用的小教程：

[http://blog.mellenthin.de/archives/2012/02/13/an-one-finger-rotation-gesture-recognizer/](http://blog.mellenthin.de/archives/2012/02/13/an-one-finger-rotation-gesture-recognizer/)

但是我不知道如何将该手势转换为与 cocos2d 一起使用，我在 cocos2d 中找到了预制手势的示例，但没有自定义手势，这可能吗？

编辑仍然有这个问题：

我在下面添加了来自 Sentinel 的代码，Gesture 和 RotateGesture 都已添加到我的解决方案中并正在编译。虽然现在在轮换类中我只看到选择器，但我该如何设置它们？由于在上面那个项目中找到的自定义手势如下所示：

自定义手势的头文件：

```
#import <Foundation/Foundation.h>
#import <UIKit/UIGestureRecognizerSubclass.h>

@protocol OneFingerRotationGestureRecognizerDelegate <NSObject>
@optional
- (void) rotation: (CGFloat) angle;
- (void) finalAngle: (CGFloat) angle;
@end

@interface OneFingerRotationGestureRecognizer : UIGestureRecognizer
{
    CGPoint midPoint;
    CGFloat innerRadius;
    CGFloat outerRadius;
    CGFloat cumulatedAngle;
    id <OneFingerRotationGestureRecognizerDelegate> target;
}

- (id) initWithMidPoint: (CGPoint) midPoint
            innerRadius: (CGFloat) innerRadius
            outerRadius: (CGFloat) outerRadius
                 target: (id) target;
- (void)reset;
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event;

@end 
```

.m 用于自定义手势文件：

```
#include <math.h>

#import "OneFingerRotationGestureRecognizer.h"

@implementation OneFingerRotationGestureRecognizer

// private helper functions
CGFloat distanceBetweenPoints(CGPoint point1, CGPoint point2);
CGFloat angleBetweenLinesInDegrees(CGPoint beginLineA,
                                   CGPoint endLineA,
                                   CGPoint beginLineB,
                                   CGPoint endLineB);

- (id) initWithMidPoint: (CGPoint) _midPoint
            innerRadius: (CGFloat) _innerRadius
            outerRadius: (CGFloat) _outerRadius
                 target: (id <OneFingerRotationGestureRecognizerDelegate>) _target
{
    if ((self = [super initWithTarget: _target action: nil]))
    {
        midPoint    = _midPoint;
        innerRadius = _innerRadius;
        outerRadius = _outerRadius;
        target      = _target;
    }
    return self;
}

/** Calculates the distance between point1 and point 2\. */
CGFloat distanceBetweenPoints(CGPoint point1, CGPoint point2)
{
    CGFloat dx = point1.x - point2.x;
    CGFloat dy = point1.y - point2.y;
    return sqrt(dx*dx + dy*dy);
}

CGFloat angleBetweenLinesInDegrees(CGPoint beginLineA,
                                   CGPoint endLineA,
                                   CGPoint beginLineB,
                                   CGPoint endLineB)
{
    CGFloat a = endLineA.x - beginLineA.x;
    CGFloat b = endLineA.y - beginLineA.y;
    CGFloat c = endLineB.x - beginLineB.x;
    CGFloat d = endLineB.y - beginLineB.y;

    CGFloat atanA = atan2(a, b);
    CGFloat atanB = atan2(c, d);

    // convert radiants to degrees
    return (atanA - atanB) * 180 / M_PI;
}

#pragma mark - UIGestureRecognizer implementation

- (void)reset
{
    [super reset];
    cumulatedAngle = 0;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];

    if ([touches count] != 1)
    {
        self.state = UIGestureRecognizerStateFailed;

        return;
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];

    if (self.state == UIGestureRecognizerStateFailed) return;

    CGPoint nowPoint  = [[touches anyObject] locationInView: self.view];
    CGPoint prevPoint = [[touches anyObject] previousLocationInView: self.view];

    // make sure the new point is within the area
    CGFloat distance = distanceBetweenPoints(midPoint, nowPoint);
    if (   innerRadius <= distance
        && distance    <= outerRadius)
    {
        // calculate rotation angle between two points
        CGFloat angle = angleBetweenLinesInDegrees(midPoint, prevPoint, midPoint, nowPoint);

        // fix value, if the 12 o'clock position is between prevPoint and nowPoint
        if (angle > 180)
        {
            angle -= 360;
        }
        else if (angle < -180)
        {
            angle += 360;
        }

        // sum up single steps
        cumulatedAngle += angle;

        // call delegate
        if ([target respondsToSelector: @selector(rotation:)])
        {
            [target rotation:angle];
        }
    }
    else
    {
        // finger moved outside the area
        self.state = UIGestureRecognizerStateFailed;
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
    [super touchesEnded:touches withEvent:event];

    if (self.state == UIGestureRecognizerStatePossible)
    {
        self.state = UIGestureRecognizerStateRecognized;

        if ([target respondsToSelector: @selector(finalAngle:)])
        {
            [target finalAngle:cumulatedAngle];
        }
    }
    else
    {
        self.state = UIGestureRecognizerStateFailed;
    }

    cumulatedAngle = 0;
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesCancelled:touches withEvent:event];

    self.state = UIGestureRecognizerStateFailed;
    cumulatedAngle = 0;
}

@end 
```

然后它的初始化如下：

```
// calculate center and radius of the control
    CGPoint midPoint = CGPointMake(image.frame.origin.x + image.frame.size.width / 2,
                                   image.frame.origin.y + image.frame.size.height / 2);
    CGFloat outRadius = image.frame.size.width / 2;

    // outRadius / 3 is arbitrary, just choose something >> 0 to avoid strange 
    // effects when touching the control near of it's center
    gestureRecognizer = [[OneFingerRotationGestureRecognizer alloc] initWithMidPoint: midPoint
                                                                innerRadius: outRadius / 3 
                                                                outerRadius: outRadius
                                                                     target: self];
    [self.view addGestureRecognizer: gestureRecognizer]; 
```

下面的选择器也在同一文件中，其中初始化了gestureRecogonizer：

```
- (void) rotation: (CGFloat) angle
{
    // calculate rotation angle
    imageAngle += angle;
    if (imageAngle > 360)
        imageAngle -= 360;
    else if (imageAngle < -360)
        imageAngle += 360;

    // rotate image and update text field
    image.transform = CGAffineTransformMakeRotation(imageAngle *  M_PI / 180);
    [self updateTextDisplay];
} 
```

我似乎无法在 RotateGesture 课程中使用它，任何人都可以帮助我，我已经坚持了好几天了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:35:33.640

这里是 GitHub 上的项目：[SFGestureRecognizers](https://github.com/krzysztofzablocki/CCNode-SFGestureRecognizers) 它使用内置于 iOS 的 UIGestureRecognizer，不需要集成到 cocos2d 源中。使用它，您可以像使用 UIGestureRecognizer 一样做出任何手势。例如：我创建了一个基类`Gesture`，并将其子类化为任何新手势：

```
//Gesture.h
@interface Gesture : NSObject <UIGestureRecognizerDelegate>
{
    UIGestureRecognizer *gestureRecognizer;
    id delegate;
    SEL preSolveSelector;
    SEL possibleSelector;
    SEL beganSelector;
    SEL changedSelector;
    SEL endedSelector;
    SEL cancelledSelector;
    SEL failedSelector;

    BOOL preSolveAvailable;

    CCNode *owner;
}
- (id)init;

- (void)addGestureRecognizerToNode:(CCNode*)node;
- (void)removeGestureRecognizerFromNode:(CCNode*)node;

-(void)recognizer:(UIGestureRecognizer*)recognizer;

@end

//Gesture.m
#import "Gesture.h"

@implementation Gesture

- (id)init
{
    if (!(self = [super init]))
        return self;

    preSolveAvailable = YES;

    return self;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)recognizer shouldReceiveTouch:(UITouch *)touch
{
    //! For swipe gesture recognizer we want it to be executed only if it occurs on the main layer, not any of the subnodes ( main layer is higher in hierarchy than children so it will be receiving touch by default ) 
    if ([recognizer class] == [UISwipeGestureRecognizer class])
    {
        CGPoint pt = [touch locationInView:touch.view];
        pt = [[CCDirector sharedDirector] convertToGL:pt];

        for (CCNode *child in owner.children)
        {
            if ([child isNodeInTreeTouched:pt]) 
            {
                return NO;
            }
        }
    }

    return YES;
}

- (void)addGestureRecognizerToNode:(CCNode*)node
{
    [node addGestureRecognizer:gestureRecognizer];
    owner = node;
}

- (void)removeGestureRecognizerFromNode:(CCNode*)node
{
    [node removeGestureRecognizer:gestureRecognizer];
}

#pragma mark - Private methods

-(void)recognizer:(UIGestureRecognizer*)recognizer
{
    CCNode *node = recognizer.node;
    if (preSolveSelector && preSolveAvailable)
    {
        preSolveAvailable = NO;
        [delegate performSelector:preSolveSelector withObject:recognizer withObject:node];
    }

    UIGestureRecognizerState state = [recognizer state];

    if (state == UIGestureRecognizerStatePossible && possibleSelector)
    {

        [delegate performSelector:possibleSelector withObject:recognizer withObject:node];
    }

    else if (state == UIGestureRecognizerStateBegan && beganSelector)
        [delegate performSelector:beganSelector withObject:recognizer withObject:node];

    else if (state == UIGestureRecognizerStateChanged && changedSelector)
        [delegate performSelector:changedSelector withObject:recognizer withObject:node];

    else if (state == UIGestureRecognizerStateEnded && endedSelector)
    {
        preSolveAvailable = YES;
        [delegate performSelector:endedSelector withObject:recognizer withObject:node];
    }

    else if (state == UIGestureRecognizerStateCancelled && cancelledSelector)
    {
        preSolveAvailable = YES;
        [delegate performSelector:cancelledSelector withObject:recognizer withObject:node];
    }

    else if (state == UIGestureRecognizerStateFailed && failedSelector)
    {
        preSolveAvailable = YES;
        [delegate performSelector:failedSelector withObject:recognizer withObject:node];
    }

}

@end 
```

子类示例：

```
//RotateGesture.h
#import "Gesture.h"

@interface RotateGesture : Gesture

- (id)initWithTarget:(id)target 
    preSolveSelector:(SEL)preSolve
    possibleSelector:(SEL)possible 
       beganSelector:(SEL)began 
     changedSelector:(SEL)changed 
       endedSelector:(SEL)ended
   cancelledSelector:(SEL)cancelled 
      failedSelector:(SEL)failed;

@end

//RotateGesture.m
#import "RotateGesture.h"

@implementation RotateGesture

- (id)initWithTarget:(id)target 
    preSolveSelector:(SEL)preSolve
    possibleSelector:(SEL)possible 
       beganSelector:(SEL)began 
     changedSelector:(SEL)changed 
       endedSelector:(SEL)ended
   cancelledSelector:(SEL)cancelled 
      failedSelector:(SEL)failed  
{
    if (!(self = [super init]))
        return self;

    preSolveSelector = preSolve;
    delegate = target;
    possibleSelector = possible;
    beganSelector = began;
    changedSelector = changed;
    endedSelector = ended;
    cancelledSelector = cancelled;
    failedSelector = failed;

    gestureRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(recognizer:)];
    gestureRecognizer.delegate = self;

    return self;
}

@end 
```

使用示例：

```
- (void)addRotateGesture
{
    RotateGesture *rotateRecognizer = [[RotateGesture alloc] initWithTarget:self
                             preSolveSelector:@selector(rotateGesturePreSolveWithRecognizer:node:)
                             possibleSelector:nil
                                beganSelector:@selector(rotateGestureStateBeganWithRecognizer:node:)
                              changedSelector:@selector(rotateGestureStateChangedWithRecognizer:node:)
                                endedSelector:@selector(rotateGestureStateEndedWithRecognizer:node:)
                            cancelledSelector:@selector(rotateGestureStateCancelledWithRecognizer:node:)
                               failedSelector:@selector(rotateGestureStateFailedWithRecognizer:node:)];
    [rotateRecognizer addGestureRecognizerToNode:movableAreaSprite];
} 
```

...并且您只需要实现所需的选择项。

## 编辑

这是我的角度计算。就我而言，我只使用一个按钮，它是最后两个位置。- (void)onRotatorDraggedWithArgs:(EventArgs *)e { CGPoint buttonPosition = [e.params CGPointValue]; 浮动角度 = atanf((buttonPosition.x - currentCastPosition.x) / (buttonPosition.y - currentCastPosition.y));

```
 if (buttonPosition.y > currentCastPosition.y)
        angle -= M_PI_2;
    else
        angle += M_PI_2;

    currentCastAngle = CC_RADIANS_TO_DEGREES(angle);

    [worldState.activeCastIcon rotateToAngle:currentCastAngle animated:NO];
    currentPosition = buttonPosition;
} 
```

# php - preg_match 返回空数组

> ID：11181891
> 
> 赞同：3
> 
> 时间：2012-06-24T23:03:56.957
> 
> 标签：php

我总是使用`preg_match`它，它总是工作正常，但今天我试图在两个 html 标签之间获取内容`<code: 1>DATA</code>`

我有一个问题，我的代码解释了：

```
function findThis($data){
    preg_match_all("/\<code: (.*?)\>(.*?)\<\/code\>/i",$data,$conditions);
    return $conditions;
}

    // plain text
    // working fine

    $data1='Some text...Some.. Te<code: 1>This is a php code</code>';

    //A text with a new lines
    // Not working..

    $data2='some text..
    some.. te
    <code: 1>
    This is a php code
    ..
    </code>
    ';

    print_r(findThis($data1));

    // OUTPUT
    // [0][0] => <code: 1>This is a php code</code>
    // [1][0] => 1
    // [2][0] => This is a php code

    print_r(findThis($data2));

    //Outputs nothing! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T23:08:46.723

这是因为 . PHP 中的字符是**除换行符以外的任何内容**的通配符。包括换行符在内的示例会中断。您要做的是将“s”标志添加到模式的末尾，这会修改 . 完全匹配所有内容（包括换行符）。

```
/\<code: (.*?)\>(.*?)\<\/code\>/is 
```

见这里：[http ://www.php.net/manual/en/regexp.reference.internal-options.php](http://www.php.net/manual/en/regexp.reference.internal-options.php)

# javascript - Javascript SDK 中的 FB.getUserID() 函数

> ID：11181893
> 
> 赞同：0
> 
> 时间：2012-06-24T23:04:08.547
> 
> 标签：javascript, facebook-javascript-sdk

该`FB.getUserID()`函数未在[https://developers.facebook.com/docs/reference/javascript/中记录](https://developers.facebook.com/docs/reference/javascript/)

我看到很多应用程序都在使用它。为什么没有记录此功能？它是弃用还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T02:29:01.757

没有任何地方声明`FB.getUserID()`将被弃用，但目前没有记录（甚至在开发人员网站上搜索也不会产生任何结果）。

> **Javascript SDK 更新**
> 
> 正如 5 月宣布的那样，我们更新了 Javascript SDK 以限制公开暴露的接口。这是提高 SDK 可靠性的持续过程的一部分。我们删除了对所有内部属性和以 _ 为前缀的方法的访问权限。

可以理解，`FB.getUserID()`可能不会受到这些更改的影响，但如果您仍然担心，您可以使用类似的方法来实现相同的目标：

```
var userID = (FB.getAuthResponse() || {}).userID 
```

# c++ - VC++：使用 fopen() 打开文件夹内的文件时遇到问题

> ID：11181896
> 
> 赞同：0
> 
> 时间：2012-06-24T23:04:40.293
> 
> 标签：c++, visual-studio-2010, file-io, directory, fopen

我无法打开文件进行阅读，但只有当它位于文件夹内时。我正在使用 Visual Studio 2010，并将带有文件的文件夹放在带有 .exe 的“调试”文件夹中，并通过单击 .exe（而不是从 VS 中）运行它。无法工作的代码是：

```
FILE* FileHandle = fopen("./maps/1.area", "r");

if(FileHandle == NULL) {
    return false;
} 
```

FileHandle 总是显示为 NULL。如果我将 1.area 移动到与 exe 相同的文件夹，则代码可以正常工作，但是如果我将其向下移动一个级别，则它不起作用。当我使用 SDL 方法打开位图时，这种相同的文件路径样式有效，所以我无法弄清楚为什么 fopen 会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:17:13.850

是的，伙计，我要这样做：fopen() 是 C 标准库的一部分，而不是“SDL 标准库”。尽管 SDL 可能允许使用斜线样式，但我敢打赌 fopen() 不是。

# php - Youtube API 需要路径

> ID：11181901
> 
> 赞同：1
> 
> 时间：2012-06-24T23:06:17.710
> 
> 标签：php, youtube, youtube-api

为什么路径是硬编码的？例如：

```
require_once 'Zend/Gdata/Extension.php'; 
```

问题是`Zend`文件夹不在根目录中-它在`library/packages`

那么我必须更改每个文件的路径吗？像是 ：

```
define('ROOT_PACKAGES', dirname(__FILE__) . "/library/packages/");

ROOT_PACKAGE.'Zend/Gdata/Extension.php'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:22:45.907

让我通过问你一个问题来解释。当您使用“Zend/Gdata/Extension.php”时 - 它在哪个目录中寻找 Zend 子目录？您将回答“/library/packages/”，这就引出了关键问题。**为什么？**

**更新：**我的问题不是为什么要使用那个目录，而是操作系统为什么要把那个目录作为默认目录。

在任何时候都有一个默认目录。然后将使用该默认目录评估相对路径。但是它的值并没有锁定到特定的目录。它取决于应用程序的运行方式。我假设您有一个 Web 应用程序，基本上您的应用程序或 Web 服务器中的任何代码都可以更改目录。

所以是的，使用ROOT_PACKAGES。您应该始终使用完全限定的目录。

# hyperlink - Redmine Wiki 链接到“下一个”和“上一个”页面

> ID：11181904
> 
> 赞同：1
> 
> 时间：2012-06-24T23:07:24.950
> 
> 标签：hyperlink, automation, wiki, redmine, redmine-plugins

是否有插件或简单（半自动）的方式将“下一个”和“上一个”链接添加到作为页面序列一部分的 Redmine wiki 页面（在我的情况下，它用于顺序教程）？

我想这里的核心问题是 wiki 通常不是为制作多页教程而设计的，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T09:21:51.053

AFAIK 没有自动的方法可以做到这一点，有一些方法可以实现它，

**直接链接**

你总是可以直接通过它的名字链接到一个wiki页面，比如

```
[[Page_1]] 
```

或用描述装饰页面链接；

```
[[Page_1|< < Previous]] 
```

将显示为[< < 上一个](http://your-redmine-server.com/projects/foo/wiki/Page_1)

**使用父子关系**

在新创建的页面上，转到重命名并选择父 Wiki 页面。这将显示一个允许向后导航的面包屑栏。如果您想在“按标题索引”上列出所有 Wiki 页面，该页面也将显示为子页面。

参考：[http ://www.redmine.org/projects/redmine/wiki/RedmineWikis#Creating-sub-pages-parentchild-relationships](http://www.redmine.org/projects/redmine/wiki/RedmineWikis#Creating-sub-pages-parentchild-relationships)

# .net - .NET IoC：预配置库组件以便于使用

> ID：11181905
> 
> 赞同：3
> 
> 时间：2012-06-24T23:07:30.823
> 
> 标签：.net, inversion-of-control, autofac, service-locator, library-design

前段时间我有一个类似的问题，但对整个 IoC/DI 主题以及我想要实现的目标的掌握要少得多，所以又来了....

我正在建立一个图书馆供我们​​公司内部使用。公共 API 中最常用的部分已经对 IoC 友好，但在较低级别的区域中，仍有相当多的新功能在进行，我想摆脱它们（尽管此时更多是出于正式原因而不是实际原因必要性）。

这本身很容易做到，但是当然每次使用库时，都必须重新连接所有组件。由于这看起来几乎总是一样的，我通常只是将这些默认注册包装在 Autofac 模块中并完成它。

（这里的问题 1：这个模块是放在主库程序集中还是应该是一个独立的包，即使 Autofac 可能是库中唯一使用的 IoC 容器？）

现在的问题是，我是公司目前唯一真正了解 IoC 目的或知道 IoC 容器做什么的开发人员，更不用说它是如何使用的了，告诉其他人他们是一个坏主意可以使用 Autofac 包，也可以使用穷人的 DI 手动构建十几个对象的图形。（我认识这些人——他们只会不理会它，自己建造他们需要的东西，因为无论如何我对我所有的小班都很疯狂。）

我想解决这个问题的是添加类似服务定位器的东西，从中提取常用类型的预配置对象（看起来与 Autofac 模块连接的那些相同），可能由轻量级 IoC 容器在内部连接.

我知道服务定位器是一种反模式以及它会产生哪些类型的问题，我永远不会将其用作（我的）对象组合方式，而是作为 IoC/SOLID 受损的“捷径”，是否可行? 我还有什么其他选择？在这种情况下，将 Autofac 模块包含在库中并让“服务定位器”充当它的前端是否有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:24:32.050

对于框架，与业务线应用程序不同的规则。在我看来，这在应用依赖注入时也是如此。[在查看Microsoft 模式和实践企业库](http://msdn.microsoft.com/en-us/library/ff648951.aspx)的设计时，您会看到这一点. 它完全围绕依赖注入模式设计，但普通用户不会知道这一点。它使用工厂让用户的生活更轻松。在您的情况下，强迫其他开发人员使用依赖注入是不明智的，因为这可能只会惹恼他们，因为您正在做的事情似乎让事情变得更难，他们不会看到它的好处。这可能会让他们对整个 DI 事物产生负面感觉，并且您将失去稍后向他们介绍 DI 的可能性（因为他们已经下定决心不喜欢它）。

> 这个模块会放在主库程序集中还是应该是一个独立的包

我通常不会将它集成到库本身中，因为从架构的角度来看，您根本不希望您的库依赖于任何 DI 容器。但是，当您查看 Enterprise Library 时，您会发现它严重依赖于 Unity DI 框架。您可以更改 EntLib 以使用不同的容器，但 EntLib 仍然引用 Unity。这允许框架设计者为用户提供方便的工厂方法，并且允许使用框架，而无需在您的应用程序中调用某种“Framework.Bootstrap”方法。

尽你最大的努力设计你的框架，牢记[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则，因为你知道这是最好的做法。它还允许您展示这种在未来设计应用程序的方式（并且可能会让其他人对依赖注入感兴趣）。但作为一名框架设计师，你必须考虑你的用户是谁，并想出一个适合他们的 API。例如，牢记 .NET 的框架设计指南会有所帮助。

查看 Enterprise Library 时，您会看到 root/main 类型有一个工厂。其他一切都在幕后为您解决。我认为这是要走的路。不要用 API 来打扰您的用户，因为他们需要自己连接所有东西，尤其是对于普通/简单的用例。

# python - mat和matND有什么区别？

> ID：11181909
> 
> 赞同：4
> 
> 时间：2012-06-24T23:08:07.833
> 
> 标签：python, opencv

我正在尝试从二进制掩码中提取数据。一切顺利，但更改为 python 会导致数据移动几个像素。这已经足够了，所以我找不到中心。但是，保存图像将足以在正确的位置显示像素

这是我的代码。我基本上创建了一个普通的垫子用作输出。但是根据文档输出了一个matnd

我是否正确提取数据？如果是这样告诉我。我试图找到中心给定的中心点。我开玩笑说不希望我的数据被转移。

```
import cv2.cv as cv

def main():

   imgColor = cv.LoadImage(OPTICIMAGE, cv.CV_LOAD_IMAGE_COLOR)
   center, radius = centerandradus(imgColor)

def centerandradus(cvImg, ColorLower=None,ColorUpper=None):
   lowerBound = cv.Scalar(130, 0, 130);
   upperBound = cv.Scalar(171, 80, 171);
   size =  cv.GetSize(cvImg)

   output = cv.CreateMat(size[0],size[1],cv.CV_8UC1)
   cv.InRangeS(cvImg, lowerBound, upperBound,output)
   mask = np.asarray( output[:,:] )
   x,y = np.nonzero(mask)
   x, y = np.array(x),np.array(y)
   h,k  =  centerEstimate(x,y)
   return np.array([h,k]), radius

def centerEstimate(xList,yList):
   x_m = np.mean( np.r_[xList])
   y_m = np.mean( np.r_[yList])
   return x_m, y_m 
```

编辑：我认为这是 matND 的问题，因为我注意到当我尝试打印数据时数据已经转移。如果您需要更多信息，请询问

感谢您的时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-23T05:49:06.130

Mat 和 MatND 之间似乎没有更多区别。MatND 现在已过时。

通过查看 opencv2/core.hpp（版本 2.4.8）：

```
typedef Mat MatND; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T16:53:46.387

当我使用 findcontours 或这个矩阵时，我了解到数据的方向是不同的。

该矩阵使用高度 X 宽度，而轮廓放置为宽度 X 高度。我讨厌阅读 api。

# java - JScrollPane 中的 JTable 在不需要时强制滚动

> ID：11181911
> 
> 赞同：1
> 
> 时间：2012-06-24T23:08:22.773
> 
> 标签：java, swing, jtable, jscrollpane

我有`JTable`一个`JScrollPane`。如果屏幕在 中显示半行`JTable`，当单击 时`JTable`，会`JScrollPane`自动滚动显示整行。

如何停止该行为，以便单击不会滚动`JScrollPane`.

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T01:54:35.877

该行为是通过`scrollRectToVisible()`从表的 UI 委托调用来强制执行的，通常从`BasicTableUI`. 如果不提供您自己的委托，您可以使用它来制作包围的整数倍的[`setPreferredScrollableViewportSize()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setPreferredScrollableViewportSize%28java.awt.Dimension%29)高度，如下所示和本[示例](https://stackoverflow.com/a/7519403/230513)中所示。`Container``rowHeight`

```
private static final int N_ROWS = 8;
private JTable table = new JTable();
...
Dimension d = new Dimension(
    table.getPreferredScrollableViewportSize().width,
    N_ROWS * table.getRowHeight());
table.setPreferredScrollableViewportSize(d);
add(new JScrollPane(table)); 
```

![图片](../Images/9c12b8e7334bacbfe83d5e5195e48d67.png)

# jsf - 如何检索和显示列表框中的值列表和文本区域中与列表项对应的文本

> ID：11181916
> 
> 赞同：0
> 
> 时间：2012-06-24T23:09:18.043
> 
> 标签：jsf, primefaces

我需要使用列表框来显示数据库中的一些值，并在选择列表中的单个值时进行进一步处理。

在 PrimeFaces 展示站点，该示例将固定（静态）数据加载到列表框中，并且每个列表项都有一个 PrimeFaces 命令。当我事先可能不知道项目的数量时，如何动态显示列表框中的项目？

我还需要在文本区域中显示与列表中选择的项目相对应的一些文本。我是否必须为此使用事件侦听器？我想在开始时将文本区域留空。只有在列表框中选择了一个值时，我才想使用一个 bean 来使用该 textarea 检索和存储数据。这可能吗？我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T02:23:47.363

> *当我事先可能不知道项目的数量时，如何动态显示列表框中的项目？*

使用[`<f:selectItems>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/selectItems.html)它绑定到`List<T>`属性。基本示例，假设您使用 EJB/JPA 与 DB 交互：

```
private Item selectedItem; // +getter+setter
private List<Item> availableItems; // +getter

@EJB
private ItemService service;

@PostConstruct
public void init() {
    availableItems = service.list();
} 
```

和

```
<p:selectOneListbox value="#{bean.selectedItem}" converter="itemConverter">
    <f:selectItems value="#{bean.availableItems}" var="item"
        itemValue="#{item}" itemLabel="#{item.someLabel}" />
</p:selectOneListbox> 
```

`itemConverter`应该实现对象并将其[`javax.faces.convert.Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)转换`Item`为它的唯一字符串表示形式（通常是它的 DB 标识符），`getAsString()`并以相反的方式转换`getAsObject()`。

* * *

> *我还需要在文本区域中显示与列表中选择的项目相对应的一些文本。我是否必须为此使用事件侦听器？*

只需在更新文本区域的列表框中放置一个`<p:ajax>`（与标准 JSF 等效的 PrimeFaces `<f:ajax>`）。例如

```
<p:selectOneListbox value="#{bean.selectedItem}" converter="itemConverter">
    <f:selectItems value="#{bean.availableItems}" var="item"
        itemValue="#{item}" itemLabel="#{item.someLabel}" />
    <p:ajax update="textarea" />
</p:selectOneListbox>    
<p:inputTextarea id="textarea" value="#{bean.selectedItem.someText}" /> 
```

当您选择一个项目时，它将被调用。

### 也可以看看：

*   [我们的`h:selectOneMenu`wiki 页面](https://stackoverflow.com/tags/selectonemenu/info)- 同样适用于 PrimeFaces`p:selectOneListbox`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T02:24:01.777

是的，出于演示目的，大多数示例都加载了静态数据。但是如果你在 PF Showcase 上查看相同的示例，第二个列表框代码如下：

```
<h:outputText value="Scrollbar: " />
    <p:selectOneListbox id="scroll" value="#{autoCompleteBean.selectedPlayer1}"
        converter="player" style="height:100px">
        <f:selectItems value="#{autoCompleteBean.players}"
            var="player" itemLabel="#{player.name}" itemValue="#{player}" />
    </p:selectOneListbox> 
```

f:selectItems 值属性可以指向一个集合、一个数组、一个映射或一个 SelectItem 实例。因此，上面的示例播放器可以是使用托管 bean 中的数据库填充的任何列表。

但是如果实例不是 SelectItem，则通过在每个对象上调用 toString 来获取标签，最后将 selected itemValue 设置为 selectedPlayer1 属性，但您也可以看到中间有一个转换器，因此传入的 itemValue 字符串被转换返回一个播放器对象，然后设置为 selectedPlayer1。

如果您想在文本区域中显示所选项目，您可以执行以下操作：

```
 <h:outputText value="Scrollbar: " />
    <p:selectOneListbox id="scroll" value="#{autoCompleteBean.selectedPlayer1}"
        converter="player" style="height:100px">
        <f:selectItems value="#{autoCompleteBean.players}"
            var="player" itemLabel="#{player.name}" itemValue="#{player}" />
            <p:ajax update="displayArea"/>
    </p:selectOneListbox>

 <p:inputTextarea id="displayArea" value="#{autoCompleteBean.selectedPlayer1}" /> 
```

此处 inputTextarea 使用 ajax 更新，其值由用户选择。

# model-view-controller - 如何使上传插件行为方式工作

> ID：11181917
> 
> 赞同：0
> 
> 时间：2012-06-24T23:09:23.927
> 
> 标签：model-view-controller, plugins, cakephp-2.0

我正在尝试使用[Uploader](http://milesj.me/blog/read/changelog-uploader-3.6) Plugin 创建一个结构，`User`模型可以在其中上传模型的头像`Avatar`，我已经阅读了几次说明，但是当我尝试`$this->Uploader->upload('Avatar.filename')`没有验证错误但上传方法失败时。

这是我编写`User`模型的方式

```
<?php
class User extends AppModel {
    public $name = 'User';
    public $hasOne = array(
        'Profile' => array(
            'className' => 'Profile',
            'conditions' => '',
            'dependent' => true,
            'foreignKey' => 'user_id',
            'associatedKey' => 'user_id'
        ),
        'Avatar' => array (
            'className' => 'Avatar',
            'foreignKey' => 'user_id',
            'dependent' => true
        )
    );
    public $validate = array(...);
    // other stuff not relevant here...
?> 
```

这是`Avatar`模型

```
<?php
class Avatar extends AppModel {
public $name = 'Avatar';
public $actsAs = array (
    'Uploader.Attachment' => array (
        'Avatar.filename' => array(
            'name'      => 'setNameAsImgId',    // Name of the function to use to format filenames
            'baseDir'   => '',                  // See UploaderComponent::$baseDir
            'uploadDir' => 'files/avatars/',    // See UploaderComponent::$uploadDir
            'dbColumn'  => 'filename',          // The database column name to save the path to
            'importFrom'    => '',              // Path or URL to import file
            'defaultPath'   => '',              // Default file path if no upload present
            'maxNameLength' => 500,             // Max file name length
            'overwrite' => true,                // Overwrite file with same name if it exists
            'stopSave'  => true,                // Stop the model save() if upload fails
            'allowEmpty'    => true,            // Allow an empty file upload to continue
            'transforms'    => array (
                array('method' => 'resize', 'width' => 128, 'height' => 128, 'dbColumn' => 'name')
            )       // What transformations to do on images: scale, resize, ete
        )
    ),
    'Uploader.FileValidation' => array (
        'Avatar.filename' => array (
            'maxWidth'  => array (
                'value' => 512,
                'error' => 'maxWidth error'
            ),
            'maxHeight' => array (
                'value' => 512,
                'error' => 'maxWidth error'
            ),
            'extension' => array (
                'value' =>  array('gif', 'jpg', 'png', 'jpeg'),
                'error' => 'extension error'
            ),
            'filesize'  => array (
                'value' => 5242880,
                'error' => 'filesize error'
            )
        )
    )
);

public $belongsTo = array(
    'User' => array(
        'className'     => 'User',
        'foreignKey'    => 'user_id',
        'conditions'    => '',
        'order'         => ''
    )
);

public function setNameAsImgId ($name, $field, $file) {
    /**
    * Format the filename a specific way before uploading and attaching.
    * 
    * @access public
    * @param string $name   - The current filename without extension
    * @param string $field  - The form field name
    * @param array $file    - The $_FILES data
    * @return string
    */
    // devo ricavare l'id dell'immagine appena creata per rinominare il file
    return $name;
}
}
?> 
```

这是`UsersController`for`edit`方法

```
<?php
App::uses('CakeEmail','Network/Email');
CakePlugin::load('Uploader');
App::import('Vendor', 'Uploader.Uploader');

class UsersController extends AppController {
public $name = 'Users';

public function edit ($id) {
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException ('Nessuna corrispondenza trovata per questo utente');
    }
    if (!$id) {
        $this->set('flash_element','error');
        $this->Session->setFlash ('Utente non valido');
    }
    $this->User->recursive = 1;
    $this->set('user', $this->User->read());

    if ($this->request->is('post')) {
        $this->User->id = $this->request->data['User']['id'];
        if (!$this->User->exists()) {
            $this->set('flash_element','warning');
            $this->Session->setFlash('Nessun utente trovato con questa corrispondenza');
    }
    if ($this->User->save($this->request->data)) {
        $this->request->data['Profile']['user_id'] = $this->User->id;

        $conditions = array(
            'conditions' => array(
                'Profile.id' => $this->request->data['Profile']['id']
            )
        );

        if ($this->User->Profile->save($this->request->data, $conditions)) {

            if (!empty($this->request->data['Avatar']['filename'])) {

                $this->request->data['Avatar']['user_id'] = $this->User->id;
                if ($this->User->Avatar->save($this->request->data)) {

                    $avatar = $this->User->Avatar->find('first', array(
                        'conditions' => array('Avatar.user_id' => $this->User->id)
                    ));
                    $ext = Uploader::ext($this->request->data['Avatar']['filename']);
                    $filename = $avatar['Avatar']['id'].'.'.$ext;

                if ($this->User->Avatar->save('Avatar.filename')) {
                    $this->set('flash_element','done');
                    $this->Session->setFlash('Avatar changed successfully');
                    debug('saved successfully');
                } else {
                    debug('not saved');
                    $this->set('flash_element','warning');
                    $this->Session->setFlash('Avatar not saved on the server');
                }

                } else {
                        $this->Session->write('flash_element','error');
                        $this->Session->setFlash('Avatar data not saved on the server');
                        $this->redirect(array('action'=>'index'));
                    }
                } else {
                    $this->Session->write('flash_element','done');
                    $this->Session->setFlash('Data successfully saved, avatar not changed');
                    $this->redirect(array('action'=>'index'));
                }
        } else {
                $this->set('flash_element','error');
                $this->Session->setFlash('Error on saving Profile data to the server');
            }
        } else {
            $this->Session->write('flash_element','error');
            $this->Session->setFlash('Error on saving User data to the server');
            $this->redirect(array('action'=>'index'));
        }
    }
}
}
?> 
```

在`view`文件中我有这个

```
<?php
echo $this->Form->create('User', array ('class' => 'form'));
echo $this->Form->input('User.id', array ('type'=>'hidden', 'value'=> $user['User']['id'],'label'=> false, 'id' => 'id'));
echo $this->Form->input('User.username', array ('label'=> false, 'value' => $user['User']['username'], 'id' => 'username', 'after' => '<div class="message">Message for username field'));
echo $this->Form->input('User.email', array ('label'=> false, 'value' => $user['User']['email'], 'id' => 'email', 'after' => '<div class="message">Message for email field</div>'));
echo $this->Form->input('UserOptions.id', array ('type'=>'hidden', 'value'=> $user['UserOptions']['id'],'label'=> false, 'id' => 'UserOptions.id'));
$attributes = array ('value' => $user['UserOptions']['avatar_type'], 'empty' => false);
$options = array('0' => 'This site', '1' => 'Gravatar');
echo $this->Form->select('UserOptions.avatar_type', $options, $attributes);
/* avatar code */
echo $this->Form->input('Avatar.id', array ('type'=>'hidden', 'value'=> $user['Avatar']['id'],'label'=> false, 'id' => 'Avatar.id'));
echo $this->Form->input('Avatar.filename', array('type' => 'file'));
/* end avatar code */
echo $this->Form->input('Profile.city', array ('label'=> false, 'value' => defaultValue ('City', $user['Profile']['city']), 'id' => 'city', 'after' => '<div class="message">Message for city field</div>'));
echo $this->Form->input('Profile.country', array ('label'=> false, 'value' => defaultValue('',$user['Profile']['country']), 'id' => 'country', 'after' => '<div class="message">Message for country field</div>'));
echo $this->Form->input('Profile.url', array ('label'=> false, 'value' => defaultValue('http://', $user['Profile']['url']), 'id' => 'url', 'after' => '<div class="message">Message for url field</div>'));
echo $this->Form->input('Profile.description', array ('label'=> false, 'value' => defaultValue('Description',$user['Profile']['description']), 'id' => 'description', 'after' => '<div class="message">Message for description field</div>'));
echo $this->Form->submit('Modifica', array('id'=>'edit'));
echo $this->Form->end();
?> 
```

在控制器中，数据的每一部分都是`saved`直到我到达`$this->Uploader->upload('Avatar.filename', array('overwrite' => true, 'name' => $filename))`我得到一般错误的地方。

这个插件似乎是最好的方法，无需编写大量代码，但我不知道如何使用它。我不确定代码有什么问题，您能帮我解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:14:42.167

我发现了问题，我忘记了两件事：

在`view`我忘记的页面中`'type' => 'file'`

```
<?php
echo $this->Form->create('User', array ('class' => 'form', 'type' => 'file'));
?> 
```

我习惯于使用 1.3 版本，因此`app/Config/bootstrap.php`缺少配置：

```
<?php
CakePlugin::load('Uploader');
?> 
```

现在它起作用了！

# java - JList 变为空白 [我认为输出流缓冲问题]

> ID：11181918
> 
> 赞同：2
> 
> 时间：2012-06-24T23:09:36.180
> 
> 标签：java, swing, jlist, outputstream

我有这个`JList`用作`System.out`. 我正在创建一个 IRC 客户端，它`JList`位于`JFrame`. 似乎每当`JLists` `ListModel`同时添加 2 个或更多元素时，整体`JList`变成白色且非交互的，直到单独添加一个元素。同时添加多个元素的一个示例是异常打印堆栈跟踪时。

这是`OutputStream`我设置为`System.out`...的课程

```
public class LogOutputStream extends OutputStream {
    String sentence = "";
    boolean writing = false;
    private DefaultListModel subject;

    public LogOutputStream(DefaultListModel logListModel) {
        this.subject = logListModel;
    }

    public void write(final int b) {
        try {
            sentence = sentence + (char) b;

            if (sentence.endsWith("\n") && !sentence.isEmpty() && !sentence.equals("\t") && !sentence.equals("\r\n") && !sentence.equals("\n")) {
                if (writing == false) {
                    writing = true;
                    subject.addElement(sentence.replaceAll("\n", "").replaceAll("\r", "").trim());
                }

                sentence = "";
                writing = false;
            }
        } 
        catch (Exception e) {
            e.printStackTrace(Boot.stdErr);
        }
    }
} 
```

有谁知道这里发生了什么，以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T00:22:30.347

这可能是一个 Swing 并发问题，因为您将项目添加到事件线程之外的 JList 模型中。这会阻塞线程并阻止它执行绘制 GUI 或允许用户交互有效地冻结您的 Swing GUI 的必要操作。

尝试确保只写入 EDT（Swing 事件调度线程）上的 JList。像这样的东西会将`addElement(...)`Swing 事件线程上的调用排队：

```
public void write(final int b) {
    try {
        sentence = sentence + (char) b;
        if (sentence.endsWith("\n") && !sentence.isEmpty()
                && !sentence.equals("\t") && !sentence.equals("\r\n")
                && !sentence.equals("\n")) {
            if (writing == false) {
                writing = true;
                final String text = sentence.replaceAll("\n", "")
                                .replaceAll("\r", "").trim();
                javax.swing.SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        subject.addElement(text);
                    }
                });

            }
            sentence = "";
            writing = false;
        }
    } catch (Exception e) {
        e.printStackTrace(Boot.stdErr);
    }
} 
```

**编辑 1**
这更接近我过去使用 StringBuilder 所做的事情：

```
import java.io.IOException;
import java.io.OutputStream;

import javax.swing.DefaultListModel;
import javax.swing.SwingUtilities;

public class JListOutputStream extends OutputStream {
   private DefaultListModel logListModel;
   private StringBuilder sb = new StringBuilder();   

   public JListOutputStream(DefaultListModel logListModel) {
      this.logListModel = logListModel;
   }

   @Override
   public void write(int b) throws IOException {
      if (b == '\r')
         return;

      if (b == '\n') {
         final String text = sb.toString().trim();
         sb.setLength(0);
         if (text.isEmpty()) {
            return;
         }
         SwingUtilities.invokeLater(new Runnable() {
            public void run() {
               logListModel.addElement(text);
            }
         });

         return;
      }

      sb.append((char) b);
   }

} 
```

**编辑 2**
根据这篇题为“[编写您自己的 Java I/O 流类](http://java.sun.com/developer/technicalArticles/Streams/WritingIOSC/index.html)”的文章，如果您正在扩展 OutputStream，请不要忘记为`flush()`和`close()`方法提供自定义实现。

# networking - 什么时候应该使用队列？

> ID：11181919
> 
> 赞同：0
> 
> 时间：2012-06-24T23:09:52.710
> 
> 标签：networking, network-programming

假设我们要实现一个网络应用程序，例如与中央服务器和多个客户端聊天：我们假设所有通信都必须通过中央服务器，然后它应该从一些客户端获取消息并将它们转发给目标客户端，并且很快。

无论使用何种技术（套接字、Web 服务等），都可以认为存在一些*生产者线程*（生成消息）和一些*消费者线程*（读取消息）。

例如，您可以对传入和传出消息使用单个队列，但使用单个队列，您不能同时接收和发送消息，因为一次只有一个线程可以访问该队列。

也许使用两个队列更合适：例如，[本文](http://www.codeproject.com/Articles/27703/Producer-Consumer-Using-Double-Queues)介绍了一种管理双队列的方法，这样生产者和消费者几乎可以同时工作。如果只有生产者和消费者，这种情况可能很好，但如果有很多客户：

*   如何使中央服务器可以同时从多个输入流接收数据？
*   如何使中央服务器可以同时将数据发送到多个输出流？

为了解决这个问题，我的想法是为每个客户端使用一个双队列：在中央服务器上，每个客户端连接可能与两个队列相关联，一个用于来自该客户端的传入消息，一个用于发送到该客户端的传出消息。通过这种方式，中央服务器可以在几乎所有与客户端的连接上同时发送和接收数据......

可能还有其他管理队列的方法......确定需要多少个队列以及如何组织它们的参数是什么？有不需要排队的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:34:01.337

对我来说，每个客户端使用一个队列或每个客户端使用多个队列的想法似乎没有抓住重点。首先，绝对有可能构建一个可以由 2 个线程同时访问的队列（一个线程可以将一个项目入队，而另一个线程可以将另一个项目出队）。如果您想知道如何，请发布有关此的特定问题。

其次，即使我们假设一次只有 1 个线程可以访问一个队列，即使我们假设服务器将同时向/从*所有*客户端接收或发送数据，它仍然不能证明您需要每个客户都有不同的队列。为了避免限制系统性能，您只需要允许足够的并发性来利用所有服务器的 CPU。即使使用单个系统范围的队列，如果与服务器正在执行的其他工作相比，出队/入队消息足够快，它可能不会成为瓶颈。（并且通过有效的实现，简单地插入一个项目或从队列中删除一个项目*应该*非常快。这是一个非常简单的操作。）要使消息队列成为限制性能的瓶颈，要么您需要大量的 CPU，要么服务器正在执行的其他所有操作都必须*非常*快。在这种情况下，您可以制定一些具有 2 或 4 个系统范围队列的方案，以允许 2 倍或 4 倍的并发性。

在多线程系统中使用工作队列的整个想法是，它们 1) 允许多个消费者从一个位置全部获取工作，因此生产者可以“转储”他们需要在该单个位置完成的任何工作，而不用担心哪个消费者会这样做，并且 2) 充当消费者的负载平衡机制。（此外，如果生产者临时为消费者生成工作太快，则工作队列可以充当“缓冲区”。）如果您有一对专用的生产者-消费者线程，*每个线程*客户端，它质疑为什么你需要使用队列。为什么不直接从专用生产者同步“传递”到相应的专用消费者？或者，为什么不为每个客户端使用一个同时充当生产者和消费者的线程呢？以您提议的方式使用队列似乎并没有真正获得任何好处。

# html - 如何在跨度中换行？

> ID：11181920
> 
> 赞同：37
> 
> 时间：2012-06-24T23:09:55.207
> 
> 标签：html, css, internet-explorer, word-wrap

我有一个 350 像素宽的跨度。如果有比这更多的文本，它会直接向右延伸到跨度的一侧。如何强制文本换行成一个段落？我尝试了各种我在网上找到的东西，但似乎没有任何效果。

这需要适用于 IE 6 以后的版本。如果它也能在 Firefox 中工作，那就太好了。

**更新：**

这是更多信息。我正在尝试实现工具提示。这是我的代码：

**HTML**

```
<td style="text-align:left;" nowrap="nowrap" class="t-last">
    <a class="htooltip" href="#">
        Notes<span style="top: 40px; left: 1167px; ">
            <ul>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna. Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.</li>
            </ul>
        </span>
    </a>
</td> 
```

**CSS**

```
.htooltip, .htooltip:visited, .tooltip:active
{
    color: #0077AA;
    text-decoration: none;
}

.htooltip:hover
{
    color: #0099CC;
}

.htooltip span
{
    display: inline-block;

    /*-ms-word-wrap: normal;*/
    word-wrap: break-word;

    background-color: black;
    color: #fff;
    padding: 5px 10px 5px 40px;
    position: absolute;
    text-decoration: none;
    visibility: hidden;
    width: 350px;
    z-index: 10;
}

.htooltip:hover span
{
    position: absolute;
    visibility: visible;
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-24T23:19:14.133

包装可以通过多种方式完成。我会提到其中的两个：

1.) 文本换行 - 使用空白属性[http://www.w3schools.com/cssref/pr_text_white-space.asp](http://www.w3schools.com/cssref/pr_text_white-space.asp)

2.) 自动换行 - 使用自动换行属性[http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap](http://webdesignerwall.com/tutorials/word-wrap-force-text-to-wrap)

顺便说一句，为了使用这两种方法，我相信您需要将“显示”属性设置为相应 span 元素的块。

**然而**，正如基里尔已经提到的，考虑一下是个好主意。您正在谈论将文本强制转换为段落。段落。这应该在你的脑海中敲响一些钟声，不是吗？;)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-17T02:06:00.890

您应该在显示表中使用空格

```
Example:
    legend {
        display:table; /* Enable line-wrapping in IE8+ */
        white-space:normal; /* Enable line-wrapping in old versions of some other browsers */
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-23T08:30:34.523

我有一个应该适用于 IE6 的解决方案（并且绝对适用于 7+ 和 FireFox/Chrome）。
您使用 a 走在正确的轨道上`span`，但是使用 a`ul`是错误的，并且 css 也不正确。

[尝试这个](http://jsfiddle.net/mhgrx/)

```
<a class="htooltip" href="#">
    Notes

    <span>
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna. Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.
    </span>
</a> 
```

```
.htooltip, .htooltip:visited, .tooltip:active {
    color: #0077AA;
    text-decoration: none;
}

.htooltip:hover {
    color: #0099CC;
}

.htooltip span {
    display : none;
    position: absolute;
    background-color: black;
    color: #fff;
    padding: 5px 10px 5px 40px;
    text-decoration: none;
    width: 350px;
    z-index: 10;
}

.htooltip:hover span {
    display: block;
} 
```

每个人都走错了路。代码无效，`ul`'s ca n't go in 's `a`, 's ca `p`n't go in `a`'s, `div`'ca n't go in 's ,`a`用a是/等）。`span``display``block``div``p`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-31T21:06:45.503

尝试

```
.test {
white-space:pre-wrap;
}
```

```
<a class="test" href="#">
    Notes

    <span>
        Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna. Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.
    </span>
</a>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-28T21:45:55.027

如果它是一个没有空格的大词，你可以使用`overflow-wrap: break-word;`

```
.text {
  overflow-wrap: break-word;
}
```

```
<span class='text'>
Loremipsumdolorsitamet,consecteturadipiscingelit,seddoeiusmodtemporincididuntutlaboreetdoloremagnaaliqua.Utenimadminimveniam,quisnostrudexercitationullamcolaborisnisiutaliquipexeacommodoconsequat.Duisauteiruredolorinreprehenderitinvoluptatevelitessecillumdoloreeufugiatnullapariatur.Excepteursintoccaecatcupidatatnonproident,suntinculpaquiofficiadeseruntmollitanimidestlaborum.
</span>
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-24T23:22:05.190

尝试将您的文本放在跨度内的另一个 div 中：

IE

```
<span><div>some text</div></span> 
```

# css - 偏离当前标准的供应商前缀 css

> ID：11181923
> 
> 赞同：8
> 
> 时间：2012-06-24T23:11:48.577
> 
> 标签：css, vendor-prefix

我试图找到一个资源，其中包含偏离当前 W3C 标准的 CSS 属性的特定于浏览器的实现列表。

例如，假设 IE 支持这样的东西：

```
.my-class {
  -ms-foo: fizz buzz;
} 
```

但是当提案成为候选推荐时，标准化的等价物是：

```
.my-class {
  foo: buzz fizz;
} 
```

为了支持 CR 之前发布的 IE 版本，我想写：

```
.my-class {
  -ms-foo: fizz buzz;
  foo: buzz fizz;
} 
```

谷歌搜索这些变化的列表并没有非常有成效，围绕供应商前缀有很多哀号和咬牙切齿，但没有很多“陷阱”列表。到目前为止，我发现最好的是[临时提及](http://css-tricks.com/ordering-css3-properties/)更改（在这种情况下，`-webkit-border-radius`），但那些很少记录实际的预期输入；他们往往只是举一个破碎的例子。

我找到了一个存在[前缀的 OK 列表](http://peter.sh/experiments/vendor-prefixed-css-property-overview/)（以及它们的标准状态），但不幸的是，它没有提供发现我感兴趣的更改所需的那种细节。

### 那么，是否存在这样的列表？

我会选择部分列表，或者排除非常旧的浏览器的列表（例如，不关心 IE6）。我也只关心大型 3.1 浏览器（IE、Firefox、Webkit/Chrome/Safari 和[Opera]）。

我还关心 W3C 尚未解决的问题（如[外观](https://developer.mozilla.org/en/CSS/-moz-appearance)），这是一个足够困难的问题，无需担心供应商直接编造的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T23:15:18.680

我发现 CSS3Info 很有用：[http](http://www.css3.info/preview/) ://www.css3.info/preview/ （已**编辑**- 抱歉，这就是我最初要发布的内容）。

**编辑：**嗯。我今天打零。我本可以发誓在该网站上有更多关于浏览器前缀的内容......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T20:40:06.280

那里似乎没有一个详尽的列表，但是基于[Compass](https://github.com/chriseppstein/compass/tree/stable/frameworks/compass/stylesheets/compass/css3)、[CSSPrefixer](https://github.com/myfreeweb/cssprefixer/blob/master/cssprefixer/rules.py)和Peter Beverloo 的[这个列表，这是我可以拼凑的。](http://peter.sh/experiments/vendor-prefixed-css-property-overview/)

### 背景剪辑

`-moz-background-clip`接受`padding`and`border`而不是`padding-box`并且`border-box` `-webkit-background-clip`行为与 -moz 版本相同，但也接受`content`而不是`content-box`

### 背景来源

`-moz`和版本接受与其等价物`-webkit`相同的值`background-clip`

### 背景尺寸

`-webkit-background-size`重复单个值，因此`-webkit-background-size: 10px`等价于`background-size: 10px 10px`. 前缀的 webkit 等效于`background-size:10px`is `-webkit-background-size: 10px auto;`。

### 边界半径和朋友

,等的`-moz`等价物是`border-top-left-radius`,等等。`border-bottom-left-radius``-moz-border-radius-topleft``-moz-border-radius-bottomleft`

`-webkit-border-radius`与最终规范的不同之处在于它对两个值速记的处理。Webkit 将其视为所有长格式版本都传递了两个值。

更具体地说：

`-webkit-border-radius: 1px 2px`相当于

```
-webkit-border-top-left-radius: 1px 2px;
-webkit-border-top-right-radius: 1px 2px;
-webkit-border-bottom-left-radius: 1px 2px;
-webkit-border-bottom-right-radius: 1px 2px; 
```

而`border-radius: 1px 2px`相当于

```
border-top-left-radius: 1px;
border-top-right-radius: 2px;
border-bottom-right-radius: 1px;
border-bottom-left-radius: 2px; 
```

我所知道的唯一解决方法是将两个值的情况扩展`-webkit-border-radius`为它的长形式，以便匹配正确的`border-radius`.

### 展示

如果你想`diplay:box`在任何地方工作，你需要使用像这样的前缀值：

```
display:-webkit-box;
display:-moz-box;
display:box; 
```

我不知道为什么会这样，因为所有盒子模型特定的属性（如[box-align](https://developer.mozilla.org/en/CSS/box-align)）在这些浏览器中也有前缀版本。

* * *

请注意，这不包括当前不属于 W3C 文档的任何内容，例如[外观](https://github.com/myfreeweb/cssprefixer/blob/master/cssprefixer/rules.py)，即使多个浏览器都支持它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T23:38:23.900

与标准的偏差并不少见（即呈现怪癖），但与标准/提议的符号的偏差相当罕见恕我直言，这个资源应该可以解决问题：

caniuse.com 通常在资源部分提供良好的外部链接，例如，对于[边界半径](http://caniuse.com/#feat=border-radius)，它链接到[`-webkit`差异](http://www.css3files.com/border/#vbl3)和[这个详尽的渲染概述](http://muddledramblings.com/table-of-css3-border-radius-compliance/)

# jquery - if 和 else 语句在 jquery 中不起作用

> ID：11181925
> 
> 赞同：0
> 
> 时间：2012-06-24T23:12:18.717
> 
> 标签：jquery, if-statement

你好，即使在值进入“no”之后，if 和 else 语句在我的函数中也不起作用，这真的很奇怪，然后执行 else 部分而不是如果我的代码是

```
(function pollmsg() {
    setTimeout(function () {
        var demon = $('.msgnotimore').val();
        alert(demon);
        var a = $('.gvpgvpxgvp').val();
        $.ajax({
            url: 'modules/notifications/beast.php?nid=' + demon + '&id=' + a,
            success: function (html) {
                if(html == "no") {
                    alert('no');
                } else {
                    alert('ok');
                    $('.msgnotimore').val();
                    $('.notiloadmsg').prepend($(html).fadeIn('slow'));
                }
            },
            dataType: "html",
            complete: pollmsg
        });
    }, 30000);
})();
}); 
```

我提醒 html 检查返回的值。它的“不”，但其他部分仍在工作，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:18:37.250

在进行检查之前尝试修剪 html。

```
if ($.trim(html) == 'no') 
```

# objective-c - 在 iOS 中使用 Mail Core 发送时消息被切断

> ID：11181926
> 
> 赞同：1
> 
> 时间：2012-06-24T23:12:22.353
> 
> 标签：objective-c, ios, mailcore

我正在尝试使用 iOS 中的 MailCore 框架发送消息。这是我的 View Did Load 方法：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

myMessage = [[CTCoreMessage alloc] init];

// Set To
CTCoreAddress *addrTo = [CTCoreAddress address];
[addrTo setEmail:@"aaa@gmail.com"];
[myMessage setTo:[NSSet setWithObject:addrTo]];

// Set From 
CTCoreAddress *addrFrom = [CTCoreAddress address];
[addrFrom setEmail:@"bbb@gmail.com"];
[addrFrom setName:@"bb"];
[myMessage setFrom:[NSSet setWithObject:addrFrom]];

[myMessage setSubject:@"test"];
[myMessage setHTMLBody:@"Отправил это сообщение через SMTP с TSL (используя MailCore) :)"];

[CTSMTPConnection sendMessage:myMessage server:@"smtp.gmail.com" username:@"bbbb"
                     password:@"ccc" port:587 useTLS:YES useAuth:YES];
[myMessage release];
} 
```

结果我收到了一封电子邮件，由于某种原因，它被缩短了：

```
Отправил это сообщение через SMTP с T 
```

可能是什么原因。如您所见，我使用端口 587 和 useTLS = YES 的 gmail.com。

PS 当我使用 mail.ru 而不是 gmail.com 时，它是一样的。看来，不是服务器问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T00:42:07.017

这看起来非常像编码问题。如果您首先对非 ascii 字符进行 HTML 转义怎么办？

澄清一下，似乎有人在询问 HTMLBody 的长度（以字符为单位），然后假设这是要发送的正确 UTF-8 字节数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:00:20.970

这已在最新版本的 MailCore 中得到修复。这是提交[https://github.com/mronge/MailCore/commit/1d833fb5996e2350aeaba9a1f04acb33b7cae84c](https://github.com/mronge/MailCore/commit/1d833fb5996e2350aeaba9a1f04acb33b7cae84c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T08:15:24.840

这是 libEtPan Dinh Viet Hoa 的作者提供的解决方案：

问题在于这种方法（CTMIME_HtmlPart.m）：

```
- (struct mailmime *)buildMIMEStruct {
    struct mailmime_fields *mime_fields;
    struct mailmime *mime_sub;
    struct mailmime_content *content;
    struct mailmime_parameter *param;
    int r;

    /* text/html part */
    //TODO this needs to be changed, something other than 8BIT should be used
    mime_fields = mailmime_fields_new_encoding(MAILMIME_MECHANISM_8BIT);
    assert(mime_fields != NULL);

    content = mailmime_content_new_with_str("text/html");
    assert(content != NULL);

    param = mailmime_parameter_new(strdup("charset"), strdup(DEST_CHARSET));
    assert(param != NULL);

    r = clist_append(content->ct_parameters, param);
    assert(r >= 0);

    mime_sub = mailmime_new_empty(content, mime_fields);
    assert(mime_sub != NULL);
    NSString *str = [self content];
    //TODO is strdup necessary?
    r = mailmime_set_body_text(mime_sub, strdup([str cStringUsingEncoding:NSUTF8StringEncoding]), [str length]);
    assert(r == MAILIMF_NO_ERROR);
    return mime_sub;
} 
```

您可以看到您将 [str cStringUsingEncoding:NSUTF8StringEncoding] 作为参数传递。而不是传递该数据的大小，而是传递[str length]，这是该字符串的字符数。在这里你应该做什么：

```
NSData * data = [str dataUsingEncoding:NSUTF8String];
r = mailmime_set_body_text(mime_sub, strdup([data bytes]), [data length]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:21:30.337

最后，经过几个小时的尝试，我解决了这个问题。

libEtPan 中的这个方法应该这样改变：

```
 int mailmime_set_body_text(struct mailmime * build_info,
               char * data_str, size_t length)
{
  int encoding;
  struct mailmime_data * data;

  encoding = mailmime_transfer_encoding_get(build_info->mm_mime_fields);

  // Added by Dennis !!!Here Russian message was cut off!!!
    // The reason is that size_t length is a count of chars but used for data length (which is twice as count of chars in UTF-8)
    // That's why I take the lenght of actual data_str, not length
    if (encoding == 2) {
        length = strlen(data_str);
    }

  data = mailmime_data_new(MAILMIME_DATA_TEXT, encoding,
               0, data_str, length, NULL);
  if (data == NULL)
    return MAILIMF_ERROR_MEMORY;

  build_info->mm_data.mm_single = data;

  return MAILIMF_NO_ERROR;
} 
```

# unix - 如何将日志从 Unix 机器拉到我的本地机器？

> ID：11181929
> 
> 赞同：0
> 
> 时间：2012-06-24T23:14:25.897
> 
> 标签：unix, logging, local

我将应用程序部署到 Unix 机器上，我们将在大约 100 个机器上工作，假设应用程序 A 将部署在 5 个机器上，例如 Box1、Box2、Box3、Box4、Box5，每次我们部署应用程序 A 时，我们都会转到每个 Box1， 2,3,4,5 并在每个盒子和每个应用程序的BOX1/A/B/C/logs文件夹的路径中检查部署的应用程序A是否正常启动。

有没有一种方法可以将日志从所有 Box 1、2、3、4、5 拉到本地，它应该允许我按应用程序 A 名称搜索日志。

提前感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:35:51.020

当然，您的问题并不具体，我可以确切地告诉您在您的特定情况下该怎么做，但是非常类似的事情仍然会在您的本地标准输出上聚合数据，之后您可以根据需要在本地处理它：

```
for I in $(seq 1 5); do echo "box$I:"; ssh username@box$I 'cat /var/log/mylog'; echo; done 
```

主题的许多变化是可能的，但如果你能让这个工作，那么你应该很快就能看到如何适应你自己的需要。

请注意，要使 Ssh 无需在每台机器上手动登录即可完成其工作，需要在本地和远程框上进行一些设置： `man 1 ssh`并查看 AUTHENTICATION 部分，尤其是谈到`authorized_keys`文件的段落。

# c# - Gmail 是否支持 RFC 821？

> ID：11181934
> 
> 赞同：1
> 
> 时间：2012-06-24T23:15:58.220
> 
> 标签：c#, sockets, network-programming, c#-3.0, gmail

Gmail 是否支持 RFC 821？我知道它正在使用 ESMTP。基于对 ESMTP 是 RFC 1869 的理解。但我必须在 C# 中使用 RFC 821 命令并想对其进行测试。如果 Gmail 不提供支持，是否有服务器为开发者提供此服务？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T23:20:58.587

RFC1869 定义了一组服务器可以支持的 SMTP 协议*扩展。*它们是 RFC 821 中描述的标准 SMTP 协议的补充。换句话说，任何支持 RFC 1869 的服务器也必须支持 RFC 821。较新的标准明确说明了这一点：

> 4.1。对 STD 10、RFC 821 的更改
> 
> 本规范旨在扩展 STD 10、RFC 821，而不会以任何方式影响现有服务。下面列举了所需的细微更改。

如果客户端连接到这样的服务器并发出标准`HELO`命令，它应该得到一个使用 SMTP 的服务器。但是，如果您需要使用任何 SMTP 扩展，则需要发出扩展命令`EHLO`，这表明客户端也使用 RFC1869。

*然而，仅仅因为服务器使用 SMTP 并不意味着它会和你*说话。特别是，服务器可能需要根据 RFC 4954 进行身份验证（例如，需要 AUTH LOGIN 或类似命令，或用于加密通信的 STARTTLS 命令）。如果您在发出命令之前未能正确验证，服务器可能会合法地发送 SMTP 错误。虽然此错误将是根据 RFC 821 的合法 SMTP 响应，但这可能不会对您有太大帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:21:37.377

RFC 1869 (ESMTP) 是对 RFC 821 (SMTP) 的改进，而不是单独的协议。您仍然可以将基本 SMTP 与 ESMTP 服务器通信——事实上，需要 ESMTP 服务器来支持它。

因为听起来您正在尝试构建与 GMail SMTP 互操作的东西，所以请记住，它不打算供桌面邮件客户端以外的任何东西使用。尝试通过 GMail 发送大量邮件会以失败告终。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T23:34:29.663

几乎所有 Internet 服务（连接）提供商 (ISP) 都为其客户提供 SMTP 服务器以用于发送电子邮件。您的 ISP 的帮助页面无疑解释了如何执行此操作——它可能提到了 smtp.comcast.net 或 smtp.whatver.net 之类的内容。

但是，他们很可能不会让您每天通过该端口发送超过一定数量的电子邮件。而且，除非您在他们网络上的机器上，否则他们当然不会让您通过它发送任何消息。

您也可以使用 gmail 的 smtp 服务器。但是，为了做到这一点，您的客户端软件需要能够使用 TLS、端口 587 和身份验证（使用您的 gmail 用户名和密码）。请参阅此处： http: [//support.google.com/mail/bin/answer.py ?hl=en&answer=86374](http://support.google.com/mail/bin/answer.py?hl=en&answer=86374)

与 smtp 服务器进行经过身份验证和加密的通信的需求可能会成为调试工作的一大难题。最好找到一个可以测试的开放 SMTP 服务器。

好消息：RFC821 非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-22T23:57:47.053

雅虎可以发送电子邮件到 rfc821 邮件服务器。

另一个是 amazin 的工具是[https://www.wormly.com/test_smtp_server](https://www.wormly.com/test_smtp_server)

# objective-c - Json 到 Utableview

> ID：11181935
> 
> 赞同：-1
> 
> 时间：2012-06-24T23:16:37.390
> 
> 标签：objective-c, ios, cocoa-touch

我正在将 Json 加载到 NSDictionary 中，输出如下。我只是不确定如何解析它，所以我可以将它插入 UItableview，所以第一行会说 6 street 10950，第二行会说 Munch lane 11730 等等。谢谢您的帮助。

```
(
    {
    "address_line1" = "6 street";
    "zipcode" = 10950;
},
    {
    "address_line1" = "Munch lane";
    "zipcode" = 11730;
}
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:04:58.123

假设您通过 NSJSONSerialization 之类的 json 解析器运行它，您现在拥有一个 NSDictionarys 的 NSArray。`cellForRowAtIndexPath`在你的 UITableView 或 UITableViewController 类中实现 UITableViewDatasource 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString     *CellIdentifier = @"Cell";
    UITableViewCell     *cell = nil;
    NSDictionary        *addressDictionary = nil;

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil){
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }
    if ([indexPath row] <= [[self jsonAddressArray] count]){
        rowDictionary = [[self jsonAddressArray] objectAtIndex:[indexPath row]];
        if (rowDictionary != nil){
            cell.textLabel.text = [rowDictionary objectForKey:@"address_line1"];
            cell.detailTextLabel.text = [rowDictionary objectForKey:@"zipcode"];
        }
    }
    return cell;
} 
```

（这假设您将属性“jsonAddressArray”设置为解析的 JSON 数据。）

这会将地址行 1 放在单元格的第一行，将邮政编码放在单元格的第二行。如果您希望两者都在一行，请将单元格样式更改为`UITableViewCellStyleDefault`，合并两个字符串并设置`cell.textLabel.text`为该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:59:35.253

一开始，这个 json 应该被加载到一个 NSArray 中，之后使用起来会更容易。

然后，您可以像在 tableview 数据源中那样简单地加载它：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return myArray.count;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
        //cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    NSDictionary *cellDict = [myArray objectAtIndex:indexPath.row];

    cell.textLabel.text = [cellDict objectForKey:@"address_line1"];
    cell.detailTextLabel.text = [cellDict objectForKey:@"zipcode"];

    return cell;
} 
```

# winapi - WinDivert：错误信息“error: failed to open Divert device (110)”背后的原因是什么？

> ID：11181937
> 
> 赞同：0
> 
> 时间：2012-06-24T23:16:55.813
> 
> 标签：winapi, packet-capture

我试图在我的机器上安装 WinDivert（Windows 7 64 位操作系统）。我尝试了 32 位和 64 位版本。但是，我在这两种情况下都失败并收到错误消息：“错误：无法打开转移设备（110）”。我遵循了本教程的第 2 节（步骤 2.1 和 2.2）： [http](http://reqrypt.org/windivert-doc.html) ://reqrypt.org/windivert-doc.html 。我使用了“免费构建环境”（x86/x64）。我调用了 wddk-build.bat。然后我签署了驱动程序，因为它已在文档中显示（正如它所写的那样）。我重新启动了机器并尝试在命令提示符下从“install/WDDK/...”运行“netdump”和“netfilter”。但是，没有什么对我有用。即使我尝试使用 MS Visual Studio 10 (masvc-build.bat)。有什么问题，我很痛苦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T02:33:50.303

WinDivert 110 错误通常表示驱动程序加载失败。这可能是由许多不同的事情引起的。WinDivert (110) 错误的清单是：

1.  确保您仅将 64 位驱动程序用于 64 位系统，而 32 位驱动程序仅用于 32 位系统
2.  确保驱动程序已正确签名（或在启用 Windows 测试模式的情况下进行测试签名）
3.  确保调用 DivertOpen() 时 WinDivert 驱动程序文件（WinDivert.sys、WinDivert.inf、WdfCoInstaller*.dll）在您的程序目录中。
4.  确保您以管理员权限运行该程序。

通常是上述之一导致问题。

编辑：一些顽固的 110 错误可以通过手动停止/启动 WinDivert 服务来修复，例如通过以管理员身份运行以下命令：

`sc stop WinDivert1.0`
`sc delete WinDivert1.0`

编辑 (2)：请注意，WinDivert (110) 错误已在 1.0.3 及更高版本中替换为更有意义的错误代码。

# asp.net-mvc - MVC3：设置默认 DisplayFor 模板

> ID：11181940
> 
> 赞同：0
> 
> 时间：2012-06-24T23:17:21.410
> 
> 标签：asp.net-mvc, asp.net-mvc-3

默认`DisplayFor`助手只是在页面上抛出一些转义文本。有没有办法将默认值包装在 a 中`<span>`或不为要显示的每个属性`<div>`编写自定义模板？`DisplayFor`而不是喷出来

```
Foo 
```

我想让它吐出来

```
<span>Foo</span> 
```

我看过很多关于制作自定义东西的文章；我经常使用这些。但是我的大部分显示内容我只想使用简单的 CSS 处理，其中内容包含在标签中，我找不到有关如何执行此操作的参考，或者即使它是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T23:44:02.617

确保使用“对象”模板并从 ViewData.ModelMetadata.Properties 对象模板中覆盖如下 [- Html.Display using ViewBag](https://stackoverflow.com/questions/5019566/object-template-html-display-using-viewbag)

通过将显示模板命名为 object.cshtml，您将应用于具有可数属性的所有类型

有一个指向 brad wilsons 条目的链接，其中包含主要详细信息 [http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:43:09.807

您可以创建自己的`HtmlHelper`扩展

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString EnhancedDisplayFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression)
    {
        var stringBuilder = new StringBuilder("<span>");
        stringBuilder.Append(html.DisplayFor(expression));
        stringBuilder.Append("</span>");
        return new MvcHtmlString(stringBuilder.ToString());
    }
} 
```

然后像这样使用它

```
@Html.EnhancedDisplayFor(model => model.MyProperty); 
```

# c# - NetTcpBinding：同时发送和接收

> ID：11181941
> 
> 赞同：0
> 
> 时间：2012-06-24T23:17:47.557
> 
> 标签：c#, .net, wcf

考虑一个`NetTcpBinding`在双工模式下使用的服务：服务实例接收消息，而回调用于向相反方向发送消息。您可以同时接收和发送数据吗？也就是说：服务实例在接收数据的同时，能否通过回调为客户端（服务实例的客户端）发送数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:46:35.040

原始 TCP 可以同时发送和接收。我不希望 NetTCPBinding 有任何不同。TCP 是双向连接，源地址和目的地址区分 TCP 数据包中的方向和序列号。

尝试编写两个线程，一个发送者和一个接收者，并同时在两个线程中执行相应的操作。

# java - 是否可以将不同的路径组合成一个视图或一个对象？

> ID：11181942
> 
> 赞同：0
> 
> 时间：2012-06-24T23:17:48.187
> 
> 标签：java, android

我使用不同的路径创建了一个绘图，但是如何移动整个绘图？如何选择和移动它？这是我的 onDraw 方法的主要部分：

```
Path theSymbol = new Path();

theSymbol.moveTo(0.0F, 0.0F);
theSymbol.lineTo(0.0F, 50.0F);
theSymbol.lineTo(16.666666F, 58.333332F);
theSymbol.lineTo(-16.666666F, 75.0F);
theSymbol.lineTo(16.666666F, 91.666664F);
theSymbol.lineTo(-16.666666F, 108.33333F);
theSymbol.lineTo(16.666666F, 124.99999F);
theSymbol.lineTo(-16.666666F, 141.66666F);
theSymbol.lineTo(0.0F, 150.0F);
theSymbol.lineTo(0.0F, 200.0F);
theSymbol.offset(100.0F, 20.0F);

canvas.drawPath(theSymbol, paint); 
```

这就是我在屏幕上画一个电阻器的方式（它有效）。现在我想要某种方式让所有这些路径成为一个对象，我可以选择和移动它。

我一直在看一些像[Sriracha](http://code.google.com/p/sriracha)这样的项目，但我找不到他们是如何绘制元素图的。

我也搜索了无数次，但我得到的只是“在路上移动一些东西”。Maibe 我正在寻找错误的东西，或者这不是做这种事情的方法。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:31:45.203

将此绘图代码放入`onDraw()`自定义`View`子类的方法中。然后，您可以像框架中的任何其他视图一样使用您喜欢的布局、动画和其他转换将您的绘图放置在屏幕上。就像是：

```
public class ResistorView extends View {
    private Path mSymbol;
    private Paint mPaint;

    //...Override Constructors...
    public ResistorView(Context context) {
        super(context);
        init();
    }

    public ResistorView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        mSymbol = new Path();
        mPaint = new Paint();
        //...Your code here to set up the path,
        //...allocate objects here, never in the drawing code.
    }

    //...Override onMeasure()...
    @Override
    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        //Use this method to tell Android how big your view is
        setMeasuredDimension(width, height);
    }

    //...Override onDraw()...
    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawPath(mSymbol, mPaint);
    }        

} 
```

有关创建自定义视图的更多信息，[请查看 SDK 文档](http://developer.android.com/training/custom-views/create-view.html)。

高温高压

# php - 从字幕文件中删除“加速”

> ID：11181946
> 
> 赞同：3
> 
> 时间：2012-06-24T23:19:17.107
> 
> 标签：php, mysql, algorithm, math

我在 MySQL 数据库中有一个带有字幕（和相应的时间戳）的视频。有时视频和字幕上的时间戳会同步，有时则不会。

问题是它在视频中不是一致的偏移量（即差异在整个视频中都在增加，因此使用简单的 UPDATE 不起作用`"UPDATE subtitles SET Timestamp=Timestamp+$time WHERE title=$video";'`：）

如何编写 PHP 脚本来计算偏移量的“加速度”，然后为该视频更新数百个 MySQL 条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T00:11:40.880

听起来您在字幕表中有一堆行，其中包含需要单独调整的时间戳值。这是一个猜测，但听起来您需要以如下方式更改时间戳值：

```
0.0   -->  0.0
1.0   -->  1.1
2.0   -->  2.2 
```

对于这个例子，公式是

```
newTimestamp[row n] = Timestamp[row 0] + 
                       (Timestamp[row n] - Timestamp[row 0]) * factor) 
```

本例中的系数为 1.1，这将使您的字幕速度提高 10%。

您的问题要求一种算法来确定要使用的正确因素。很抱歉，在不了解更多有关如何存储视频的信息的情况下，我无法建议一种方法来做到这一点。

然后，您要求一种算法将该因子应用于表行中的时间戳值。你所拥有的非常接近。像这样的东西应该工作：

```
UPDATE `subtitles` 
   SET `Timestamp`=
          MIN(`Timestamp`) + ( $factor * (`Timestamp` - MIN(`Timestamp`) )
 WHERE title=$video 
```

问题是，DATETIME 值并不真正适用于算术。所以我们需要做更多的事情才能让它去。我们需要时间差作为一个数字，就像这样。

```
 ROUND (
           ((       HOUR(TIMEDIFF(`Timestamp`,MIN(`Timestamp`))) * 3600.0) +
            (     MINUTE(TIMEDIFF(`Timestamp`,MIN(`Timestamp`))) * 60.0  ) +
            (     SECOND(TIMEDIFF(`Timestamp`,MIN(`Timestamp`)))         )
           ) * 1000000.0 +
           (MICROSECOND(TIMEDIFF(`Timestamp`,MIN(`Timestamp`)))          ) 
          ) 
```

这个毛茸茸的表达式将当前时间和第一次之间的差异转换为整数微秒。

然后我们需要应用这个因子并使用有效的时间算术将它添加回开始时间： `timeval = othertimeval + INTERVAL ROUND(xx * factor) MICROSECOND`.

```
UPDATE `subtitles` 
   SET `Timestamp`=
          MIN(`Timestamp`) + INTERVAL 
          ROUND ((
           ((       HOUR(TIMEDIFF(`Timestamp`,MIN(`Timestamp`))) * 3600.0) +
            (     MINUTE(TIMEDIFF(`Timestamp`,MIN(`Timestamp`))) * 60.0  ) +
            (     SECOND(TIMEDIFF(`Timestamp`,MIN(`Timestamp`)))         )
           ) * 1000000.0 +
           (MICROSECOND(TIMEDIFF(`Timestamp`,MIN(`Timestamp`)))          ) 
          ) * $factor) MICROSECOND
 WHERE title=$video 
```

同样，这个例子中有一些猜测，但这种事情应该可行。

我们刚才玩的高兴吗？我们是吗？我们是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T17:14:43.563

有点晚了，但总比没有好:)

你可以使用图书馆。
例如，您的视频长度为 1 小时。并且您开头的字幕是同步的。并且在视频结尾的字幕是在视频前面 10 秒。所以你需要从最后减去-10秒。-5秒从中间......等等......

```
$subtitles = Subtitles::load('subtitles.srt'); // you can also manually add subtitles from DB using ->add(...) method
$subtitles->shiftTimeGradually(-10);
$subtitles->save('synced-subtitles.srt'); 
```

[https://github.com/mantas-done/subtitles](https://github.com/mantas-done/subtitles)

# bootloader - grub stage1.5 代码在磁盘中的什么位置？

> ID：11181947
> 
> 赞同：0
> 
> 时间：2012-06-24T23:19:17.893
> 
> 标签：bootloader, stage, grub

我正在尝试编写一个将加载 GRUB stage1.5 的 stage1 引导加载程序。那么它的代码到底在哪里呢？我怎么知道它有多大（所以我知道我需要读取多少字节）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:22:00.087

您的问题的答案就在这里：[http](http://en.wikipedia.org/wiki/GNU_GRUB#Boot_process) ://en.wikipedia.org/wiki/GNU_GRUB#Boot_process （对于 GRUB1 和 GRUB2 引导加载程序）。

# asp.net - 在 Windows 服务 Win 7 中登录用户的 SID

> ID：11181949
> 
> 赞同：1
> 
> 时间：2012-06-24T23:19:27.787
> 
> 标签：asp.net, c#-4.0, c#-3.0, c#-2.0

我正在尝试在 Win 7 上查找当前登录用户的 SID。我正在使用

```
string _CurrentUser = System.Security.Principal.WindowsIdentity.GetCurrent().User.Value.ToString(); 
```

当我在控制台应用程序中运行它时，我得到用户的 SID 为“S-1-5-21-670676956-2645971461-1681047478-500”，但是当我将上述行放在 Windows 服务中时，我得到一个不同的 SID，即“S-1-5-18” 我了解 Windows 服务以不同的帐户运行。如何在 Windows 服务中获取用户的 SID，与在控制台应用程序中获取的相同？

此外，当我在 Win XP 中运行相同的代码时，Windows 服务和控制台应用程序会提供与 Win 7 不同的相同 SID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:45:31.263

您需要使用终端服务列出通过控制台或远程桌面登录的用户，检查控制台上的用户，并据此获取其 sid。

这是一个很好的.NET库来做到这一点：

[http://code.google.com/p/cassia/](http://code.google.com/p/cassia/)

# ruby - ruby 理解枚举方法

> ID：11181952
> 
> 赞同：1
> 
> 时间：2012-06-24T23:19:32.393
> 
> 标签：ruby, metaprogramming

我正在阅读另一个 SO question [Enums in Ruby](https://stackoverflow.com/questions/75759/enums-in-ruby)，它有以下代码片段：

```
class Enum

  private

  def self.enum_attr(name, num)
    name = name.to_s

    define_method(name + '?') do
      @attrs & num != 0
    end

    define_method(name + '=') do |set|
      if set
        @attrs |= num
      else
        @attrs &= ~num
      end
    end
  end

  public

  def initialize(attrs = 0)
    @attrs = attrs
  end

  def to_i
    @attrs
  end
end 
```

据我了解，这是定义一个名为的类方法`enum_attr`，对吗？我不确定的是在方法中包含`define_method`语句意味着什么`enum_attr`。

然后稍后在那篇文章中，它显示了该类的扩展如下

```
class FileAttributes < Enum
  enum_attr :readonly,       0x0001
  enum_attr :hidden,         0x0002
end 
```

我不太明白第二部分是做什么的——有人能解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T23:44:18.090

在`Enum`中，方法 ,`enum_attr`定义在类的单例上，可用于所有子类。此方法在类定义主体的范围内，并在`FileAttributes`其中使用参数调用`:readonly, 0x0001`then `:hidden, 0x0002`。

当`enum_attr`被调用时（让我们只看第一个调用，`enum_attr :readonly, 0x0001`），它定义了两个方法：`readonly?`& `readonly=(set)`。此调用的结果在`enum_attr`功能上等同于在 中写出以下内容`FileAttributes`：

```
def readonly?
  @attrs & 0x0001 != 0
end

def readonly=(set)
  if set
    @attrs |= 0x0001
  else
    @attrs &= ~0x0001
  end
end 
```

由于传递给的块是一个闭包，因此当您调用定义的方法时，传递块的作用域中`define_method`的变量仍然在作用域内。`num`换句话说，`num`传入的变量在生成的方法中`enum_attr`仍然可用，并且稍后从不同的范围调用它们时。`readonly?``readonly=`

`define_method`必须使用，因为方法的名称是动态生成的（即，我们事先不知道方法的名称）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T23:52:59.633

您正在查看一个类方法，该方法生成使用位域存储的真/假属性。你有 C（或者 Java）的背景吗？如果是这样，您可能熟悉位域和一般的“位旋转”。大多数有关这些主题的 Internet 资源都与 C 相关；但您仍然可以在 Ruby 和其他语言中使用它们。

在这种情况下，您不会从将布尔属性存储在单个位中获得任何好处，我建议您不要实际使用此代码。您最好为每个属性使用不同的实例变量，带有`true`或`false`值。

# python - 如何使用 python27 应用引擎 webapp2 框架组织文件

> ID：11181957
> 
> 赞同：6
> 
> 时间：2012-06-24T23:20:22.023
> 
> 标签：python, google-app-engine, python-2.7, webapp2

我已经完成了 python27 和应用引擎的入门教程：[https ://developers.google.com/appengine/docs/python/gettingstartedpython27/](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)

在 tut 结束时，所有类都在同一个文件 (helloworld.py) 中，并且您和您将路由器配置为指向文件底部的类的 url 路径：

```
 app = webapp2.WSGIApplication([('/', MainPage),
                           ('/sign', Guestbook)],
                          debug=True) 
```

教程没有涵盖的是随着应用程序的增长，我如何组织我的类/文件。例如，我是否会将 MainPage 放在一个单独的文件中，然后在 helloworld.py 文件中调用“import MainPage”并将路由添加到 WSGIApplication？还有比这更自动化的吗？我应该如何调用 MainPage 文件，我应该将它存储在哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T23:36:50.457

最好在应用程序启动时导入所有处理程序是利用[webapp2 的延迟处理程序加载](http://webapp-improved.appspot.com/guide/routing.html#lazy-handlers)，它根据需要加载模块/包。
所以你有几个选择：

**选项1，模块中的处理程序**
放置`MainPage`在与您的文件相同级别的另一个文件（模块）中`helloworld.py`：

```
/my_gae_app
    应用程序.yaml
    你好世界.py
    处理程序.py

```

在您的路由 (in `helloworld.py`) 中，您将执行以下操作：

```
app = webapp2.WSGIApplication([('/', 'handlers.MainPage'),
                               ('/sign', 'handlers.Guestbook')],
                              debug=True) 
```

* * *

**选项 2，包中的处理程序；也许考虑随着您的应用程序变大**
当您的应用程序变大时，您可能希望创建一个包来放置您的处理程序：

```
/my_gae_app
    /处理程序
        __init__.py
        留言簿.py
        主文件
    应用程序.yaml
    你好世界.py

```

路线（在`helloworld.py`）：

```
app = webapp2.WSGIApplication([('/', 'handlers.main.MainPage'),
                               ('/sign', 'handlers.guestbook.Guestbook')],
                              debug=True) 
```

# ruby - 在 Ruby 中迭代数组并验证元素

> ID：11181958
> 
> 赞同：1
> 
> 时间：2012-06-24T23:20:23.950
> 
> 标签：ruby, arrays

迭代数组、验证每个元素然后返回该数组在 Ruby 中是否有效的最佳方法是什么？就像是：

```
def arr_valid?(arr)
  result = true
  arr.each do |element|
    result = false if
       # validate element with some requirments
    end
  end
  result
end 
```

我认为上面的这种方法有很多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T23:26:19.790

使用，仅当块用于所有元素[`all?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-all-3F)时才会返回。`true``true`

```
def arr_valid?(arr)
  arr.all? do |element|
    # validate element with some requirments
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T00:28:04.753

```
def arr_valid?(arr)
  # there can't be Fixnums
  !arr.map {|v| v.is_a? Fixnum}.reduce {|a,b| a||b}
end

puts arr_valid? [1, 2, 3, 4] # >> false

puts arr_valid? ['1', '2', '3'] # >> true 
```

# html - 文本的背景颜色。之间的空间。线宽相同。线上填充

> ID：11181959
> 
> 赞同：0
> 
> 时间：2012-06-24T23:20:55.127
> 
> 标签：html, css

我有一段文本，我需要为各个行提供背景颜色，中间有空格。

我已经部分实现了这一点

```
<div class="styleText">
    <span class="spaced">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</span>
</div> 
```

.

```
.styleText .spaced{
    background: rgba(0,0,0,6.5); 
    line-height: 1.2em; 
    /*width: 421px;*/
} 
```

但是，我需要所有行的宽度相同，并且希望在每行的开头和结尾以及顶部和底部进行填充。

任何人都可以想出一种方法来实现这种效果，还是我唯一的选择是对 styleText 类使用一些背景图像技巧？

![这就是我想要实现的目标](../Images/6846507cfc26fbf71603e7cd3a502046.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T23:46:25.873

我使用背景图像实现了效果：

```
.styleText{width: 387px; position: absolute; right: 0; bottom: 0; background: url(../images/styledTextBG.png) 0 2px; padding: 0 17px}
.styleText .spaced{line-height: 35px; display: inline; min-width: 421px;} 
```

这是它的外观：

![在此处输入图像描述](../Images/9022e0c273ce7e8aaea94fa6eb22e114.png)

（obv，我仍然需要设置文本样式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:35:02.907

是的，这是可能的

```
.styleText{
    background: url(...); 
    width: 420px;
    height:300px;
    border:solid black 1px;
    padding:2%;
}

span.spaced{
    background: rgba(0,0,0,6.5);
    display:inline-block;
    padding:10px;
    color:#fff;
    width: 95%;
    text-align:justify;
    margin:2px auto;
    line-height:1em;
    opacity:0.7;
    font-size:14px;
    filter: alpha(opacity=70)
} 
```

[**演示。**](http://jsfiddle.net/heera/crLJ5/17/)

# ssl - 在 Windows 上查找私钥

> ID：11181962
> 
> 赞同：0
> 
> 时间：2012-06-24T23:21:17.270
> 
> 标签：ssl, private-key

我正在使用 wireshark 拦截从我的机器发送的 SSL 流量。因为它是在我的机器上加密的，所以连接的私钥必须存储在那里......对吗？

是否有一个应用程序只会显示我的私钥。我想如果它很容易的话，这将是一个安全漏洞。

如果我错了，请纠正我，但是因为我用服务器公钥加密了出去的连接，并用我的私钥解密了传入的连接，所以我只能解密传入的连接......对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T00:21:26.493

你在这里混淆了几件事。

1.  您不一定在客户端中拥有私钥；

2.  SSL*服务器*实际上总是有一个私钥；但

3.  SSL 不使用公钥/私钥加密，它使用对称会话密钥加密，该密钥使用[RFC 2246](http://www.ietf.org/rfc/rfc2246.txt)中定义的算法为会话生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T14:19:55.673

正如 EJP 所指出的，这仅在您运行服务器而不是客户端时才相关。

如果运行服务器，则使用的密钥的位置和格式在特定服务器的配置中有详细说明。一些服务器还包括一个用于导出此密钥的过程，该过程位于容器或密钥库中。

另请注意，即使您确实获得了私钥，某些 SSL 密码套件（尤其是使用 Diffie-Hellman 密钥交换机制的那些）也会阻止 Wireshark 解密流量。

# visual-studio - VS 2012 RC 损坏的参考不可见

> ID：11181964
> 
> 赞同：2
> 
> 时间：2012-06-24T23:21:35.300
> 
> 标签：visual-studio

在 VS 2012 RC 中，关于其缺乏颜色和整体“灰色”的讨论很多。是否存在关于使用哪些图标/颜色来表示损坏的参考的参考？例如，当我的 MVC4 应用程序 (.NET 4.5) 突然找不到 System.Web.Http 时，我遇到了一个重大异常。我添加了这个引用，现在还有一些其他损坏的引用导致了问题。但是，它们并没有在我习惯于 VS 2008 或 VS 2010 的典型图标中显示为损坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:02:22.123

您的问题是关于一个损坏的项目还是无法解决的参考将如何显示？

错误的引用应该在它们旁边的黄色三角形中显示一个小的感叹号。

关于一个损坏的项目的问题需要更多关于正在发生的事情的细节。

# android - android:width 和 android:layout_width 的区别

> ID：11181971
> 
> 赞同：15
> 
> 时间：2012-06-24T23:22:28.980
> 
> 标签：android, android-layout

在下面的代码中，为什么*单选按钮*的外观在我设置时会发生变化

```
 android:layout_width="fill_parent" 
```

和

```
 android:width="fill_parent" 
```

我说的是 _radio 按钮 _，它的 id 是`left`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RadioGroup
    android:id="@+id/orientation"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5px" >

    <RadioButton
        android:id="@+id/horizontal"
        android:text="horizontal" />

    <RadioButton
        android:id="@+id/vertical"
        android:text="vertical" />
</RadioGroup>

<RadioGroup
    android:id="@+id/gravity"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="5px"

     >

    <RadioButton
        android:id="@+id/left"
        android:text="left"
        android:layout_width="fill_parent"   // I am talking about this line
        />

    <RadioButton
        android:id="@+id/center"
        android:text="center" />

    <RadioButton
        android:id="@+id/right"
        android:text="right" />
</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-24T23:30:18.113

[android:width](http://developer.android.com/reference/android/R.attr.html#width)用于设置确切的像素数。

[android:layout_width](http://developer.android.com/reference/android/R.attr.html#layout_width)可以是一个维度，如上所述，也可以是`fill_parent`、`match_parent`或`wrap_content`.

使用维度以外的东西是错误的`android:width`。

# php - 修改联系表单脚本以在回复字段中插入发件人电子邮件

> ID：11181978
> 
> 赞同：0
> 
> 时间：2012-06-24T23:25:14.233
> 
> 标签：php, forms, contact

我在网站上使用简单的联系表格和脚本。我唯一的问题是，当我收到他们的提交时，我希望填写表格的人的电子邮件用作电子邮件地址的回复，而不是我的服务器地址。这样我就可以简单地回复联系人，而不必复制和粘贴他们的地址并开始新的电子邮件回复。

有什么简单的方法可以做到这一点吗？

下面是我正在使用的简单代码。

```
<?php
header('Location: http://XXXXXXXXXXXXXXXXX/contact.html'); 

$name = $_REQUEST['Person'];  
$company = $_REQUEST['company'];
$address = $_REQUEST['address'];
$city = $_REQUEST['city'];
$state = $_REQUEST['state'];
$zip = $_REQUEST['zip'];
$email = $_REQUEST['email'];
$phone = $_REQUEST['phone'];
$subject = $_REQUEST['subject'];
$details = $_REQUEST ['details'];
$byphone = $_REQUEST ['Phonebox'];
$emailbox = $_REQUEST['Emailbox'];
$message = "From  $name\n Company $company\n Address $address\n $city $state $zip\n Email  $email\n Phone $phone\n Subject $subject\n\n Details $details\n\n Contact by $byphone $emailbox";

mail ("XXXXXXXXX.com", "Customer Inquiry", "$message", "$email");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:48:10.147

看看这个： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

（以下示例）

```
<?php
$to      = 'server_owner@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: i_filled_the_form@example.com' . "\r\n" .
    'Reply-To: i_filled_the_form@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

# php - htaccess 将所有流量重定向到非图像文件到另一个站点，并将所有图像流量重定向到单个图像

> ID：11181982
> 
> 赞同：0
> 
> 时间：2012-06-24T23:27:02.583
> 
> 标签：php, apache, .htaccess, mod-rewrite, redirect

由于最近托管公司的搬迁，我有一些网站要关闭一段时间，我的主要关注点转移到其他地方的大型项目上，这最终会使我的网站关闭一段时间。

所以我至少需要做的是在所有有问题的域中删除一个 htaccess 文件，并让所有非基于图像的流量指向一个实际启动并运行的域、重定向 301 或其他什么，然后有一个类似的逻辑仅适用于图像，因此我可以将图像托管在其他地方，例如旧表单帖子再次指向将要启动的同一域上的单个图像。

我需要这样做，因为由于其他域的所有 404 和文件未找到问题，我的服务器错误日志每小时填充 10k+ 行。实际上，理想情况下，我想将所有流量指向一个单独的文件，然后使用该文件将错误转储到数据库中，但如果它是图像请求，则使用同一个文件来提供单个图像。

这些逻辑中的任何一个都可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T23:38:41.507

以下应该有效：

```
RewriteEngine on
RewriteRule \.(jpg|jpeg|png|gif)$ http://yournewsite.com/imagetoshow.png [NC,L,R]
RewriteRule (.*) http://yournewsite.com [R] 
```

# c# - Webbrowser 控件无法与代理轮换完美配合

> ID：11181983
> 
> 赞同：0
> 
> 时间：2012-06-24T23:27:10.957
> 
> 标签：c#, winforms, visual-studio-2010, webbrowser-control

我正在使用许多 ipz 并一个接一个地使用它们，一段时间后重复一些，使用以下代码在几秒钟内重复：

```
 string key = "Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings";

  RegistryKey RegKey = Registry.CurrentUser.OpenSubKey(key, true);

  RegKey.SetValue("ProxyServer", proxy);

  RegKey.SetValue("ProxyEnable", 1);

  webBrowser1.Navigate(customLinks[0].ToString()); 
```

问题并不总是成功，因为我注意到很多次。假设一个 ip 被阻止，所以它需要下一个，但我仍然看到下一个，甚至下一个的块。

所以假设它没有这么快使用代理等？也许它需要刷新。请让我知道如何实现这个

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:54:30.377

我从谷歌搜索中得到了很多帮助，但不记得确切的链接：

这是代码，我调用刷新函数并传递代理，它每次都可以 100% 工作，任何时候。

```
public struct Struct_INTERNET_PROXY_INFO
    {
        public int dwAccessType;
        public IntPtr proxy;
        public IntPtr proxyBypass;
    };

    [DllImport("wininet.dll", SetLastError = true)] 
    private static extern bool InternetSetOption(IntPtr hInternet, int dwOption, IntPtr lpBuffer, int lpdwBufferLength);

    private void RefreshIESettings(string strProxy)
    {
        const int INTERNET_OPTION_PROXY = 38;
        const int INTERNET_OPEN_TYPE_PROXY = 3;

        Struct_INTERNET_PROXY_INFO struct_IPI;

        // Filling in structure
        struct_IPI.dwAccessType = INTERNET_OPEN_TYPE_PROXY;
        struct_IPI.proxy = Marshal.StringToHGlobalAnsi(strProxy);
        struct_IPI.proxyBypass = Marshal.StringToHGlobalAnsi("local");

        // Allocating memory
        IntPtr intptrStruct = Marshal.AllocCoTaskMem(Marshal.SizeOf(struct_IPI));

        // Converting structure to IntPtr
        Marshal.StructureToPtr(struct_IPI, intptrStruct, true);

        bool iReturn = InternetSetOption(IntPtr.Zero, INTERNET_OPTION_PROXY, intptrStruct, Marshal.SizeOf(struct_IPI));

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:36:12.837

听起来您需要在浏览器中设置一个代理，并自己实现该代理，以便将请求轮换到您的代理列表。

# android - Android setOnClickListener 错误

> ID：11181985
> 
> 赞同：0
> 
> 时间：2012-06-24T23:27:47.870
> 
> 标签：android, button

在构建时的以下代码段中，将 OnClickListener 添加到按钮时，我一直在中断。

```
package xxx.xxx.xxx;

import android.app.Activity;

import android.app.AlertDialog;

import android.content.Intent;

import android.os.Bundle;

import android.view.View;

import android.view.View.OnClickListener;

import android.widget.AdapterView.OnItemLongClickListener;

import android.widget.Button;

import android.widget.EditText;

import android.widget.ListView;

public class TeaActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    Button AddItem = (Button)findViewById(R.id.button1); 

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    AddItem.setOnClickListener(AddButtonHandler);
    }
    View.OnClickListener AddButtonHandler = new View.OnClickListener() {
      public void onClick(View v) {
              // it was the first button

      }
    }; 
```

调试时，代码将在 setOnClickListener() 调用上中断。不知道为什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T23:33:30.307

正如aneal所说，您不能在setContentView之前调用findViewById，原因是xml布局尚未加载，因此findViewById将返回null。由于在空对象上调用 setOnClickListener，您可能会遇到空指针异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T23:29:46.737

改成这个

```
AddItem.setOnClickListener(new View.OnClickListener {
   public void onClick(View v) {
     TODO
   }
}); 
```

# php - 在 jplayer 中嵌入 PHP

> ID：11181987
> 
> 赞同：0
> 
> 时间：2012-06-24T23:27:59.620
> 
> 标签：php, audio, jplayer

我正在使用 PHP 从我的 mysql 数据库中提取 mp3 文件位置，并希望将这些变量传递给我页面中的脚本。

我想知道如何从我的数据库中的数组中回显以下文件名：

```
var myCirclePlayer = new CirclePlayer("#jquery_jplayer_1",
{
    m4a:   "downloads/uploads/p170f0vflo1066jbc1l4pp38st01.mp3",
}, {
    cssSelectorAncestor: "#cp_container_1",
    swfPath: "js",
    wmode: "window"
}); 
```

所以我需要这样的东西：

```
var myCirclePlayer = new CirclePlayer("#jquery_jplayer_1",
{
    m4a: "<?php echo $music_p; ?>",  <---This is what I need (from a database)
}, {
    cssSelectorAncestor: "#cp_container_1",
    swfPath: "js",
    wmode: "window"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:01:42.753

正如@Sean Johnson 所说，如果您在与 javascript 相同的文件中定义 $music_p ，它应该可以工作。例如在 javascript 标签中

```
<?php $music_p = array("downloads/uploads/p170f0vflo1066jbc1l4pp38st01.mp3") ?>

<script type="text/javascript">
//JavaScript code (define functions here)
var myCirclePlayer = new CirclePlayer("#jquery_jplayer_1",
{
m4a: "<?php echo $music_p[0]; ?>",  <----------This is what i want!
}, {
    cssSelectorAncestor: "#cp_container_1",
    swfPath: "js",
    wmode: "window"
});
</script> 
```

我相信这是你可能想看的。

# android - Android Bundle 和 ClassCastException

> ID：11181988
> 
> 赞同：0
> 
> 时间：2012-06-24T23:28:47.513
> 
> 标签：android, classcastexception

我在自定义视图中有两个辅助方法，它们由它们的片段调用：

```
public Bundle returnInstanceState() {
        Bundle state = new Bundle();
        state.putSerializable("colorData", colorData);
        return state;
}

public void loadInstanceState(Bundle savedInstanceState) {
    if(savedInstanceState.getSerializable("colorData") != null)
            colorData = (int[][]) savedInstanceState.getSerializable("colorData");
} 
```

颜色数据的生命周期：

```
private int[][] colorData;

protected void onSizeChanged (int w, int h, int oldw, int oldh) 
{
    width = w;
    height = h;
    screen = new int[width*height];
    cellSize = 0;
    if(firstLoad && h!= 0 && w!=0)
    {

    if(nWidth>nHeight)
        colorData = new int[nWidth/(nHeight/170 - 1) + 1][170];
    else
            colorData = new int[nHeight/(nWidth/170 - 1) + 1][170];
        firstLoad = false;
    }
} 
```

`nWidth`并且`nHeight`是代表原始分辨率的静态 int。

然而，一旦在一个蓝色的月亮上，我就会得到一个 ClassCastException。为什么？

从我的测试看来，你可以投到`null`虽然那`int[][]`实际上不是我的目标。 `colorData`是类型`int[][]`，据我所知，我从来没有在任何地方得到 NullPointerException，除了强制转换的行为，`Serializable`而且`int[][]`只是偶尔。

这是一个堆栈跟踪，尽管在这种情况下它没有多大用处：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{<MYPACKAGENAMEHERE>/<MYPACKAGENAMEHERE>.MusicVisualizerActivity}: java.lang.ClassCastException: [Ljava.lang.Object;
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3701)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassCastException: [Ljava.lang.Object;
    at <MYPACKAGENAMEHERE>.Visualization_Spectral$RenderView.loadInstanceState(Visualization_Spectral.java:95)
    at <MYPACKAGENAMEHERE>.Visualization_Spectral.onCreateView(Visualization_Spectral.java:46)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)
    at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1810)
    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:501)
    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
    at android.app.Activity.performStart(Activity.java:3791)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1632)
    ... 11 more
java.lang.ClassCastException: [Ljava.lang.Object;
    at <MYPACKAGENAMEHERE>.Visualization_Spectral$RenderView.loadInstanceState(Visualization_Spectral.java:95)
    at <MYPACKAGENAMEHERE>.visualization.Visualization_Spectral.onCreateView(Visualization_Spectral.java:46)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)
    at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1810)
    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:501)
    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
    at android.app.Activity.performStart(Activity.java:3791)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1632)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3701)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:38:25.463

如果`Serializable`界面充满缺陷，应尽可能避免使用，尤其是在 Android 中。从您的代码的外观来看，您只是暂时将此对象传递给 a`Bundle`以便可以重新创建 Activity 或其他组件，如果没有别的，序列化对象将为这种临时需求提供较差的性能。

如果`onRetainNonConfigurationInstance()`您`getLastNonConfigurationInstance()`在`Activity`. 如果您正在使用`Fragment`API，请同时查看该`setRetainInstance()`方法。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:51:24.787

对我来说，这看起来很奇怪，因为默认情况下 Java（多维）数组是可序列化的（或者我错了吗？）。但似乎，至少在 Android 中，与此有所不同。

无论如何，您应该使用 Parcelable 通过。实现起来有点乏味，但比 Serializable 更快......这是一个操作方法：[使用 Serializable 传递多维数组](https://stackoverflow.com/questions/4031829/passing-multidimensional-array-using-serializable)

# actionscript-3 - AS3 旋转影片剪辑并以一定角度移动，导致无法控制的摆动

> ID：11181989
> 
> 赞同：1
> 
> 时间：2012-06-24T23:28:47.733
> 
> 标签：actionscript-3, radians

我正在制作一个 Flash 游戏，自上而下的射击游戏之类的东西，我需要随机放置在舞台上的敌人转向英雄并走向他。这一切都很好，直到我移动英雄，然后敌人无法控制地摇晃，直到我停止移动。我已经简化了代码，如下所示：

```
stage.addEventListener(Event.ENTER_FRAME, moveMovie);
function moveMovie(event:Event):void{

movie1.x+= 5 * Math.cos(movie1.rotation);
movie1.y+= 5 * Math.sin(movie1.rotation);
movie1.rotation++;
} 
```

我试过旋转然后移动，移动然后旋转，把移动和旋转放到不同的函数中，只有角度太大才旋转，每秒钟左右旋转一次，但仍然存在摆动。我这样做完全错了吗？当我尝试实现这一点时，它似乎很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:36:42.953

`.rotation`属性由 表示`degrees`。`cos`和函数都`sin`接受`radians`，而不是`degrees`。试试这样：

```
movie1.x+= 5 * Math.cos(movie1.rotation * Math.PI/180);
movie1.y+= 5 * Math.sin(movie1.rotation * Math.PI/180); 
```

# javascript - javascript函数执行后jquery不起作用

> ID：11181997
> 
> 赞同：0
> 
> 时间：2012-06-24T23:32:09.743
> 
> 标签：javascript, jquery, html

我正在尝试根据用户提供的数字添加输入框。在我的 addexercises() 被调用之前，jquery 函数工作正常，但是在它被调用之后它不再工作。

编辑：基本上，在 addexercise() 执行后，当我单击“文本框”类的某些内容时，我的 jquery 函数不再起作用。在 addexercise() 执行之前，它工作正常。我不明白为什么它会破裂。

这是我的 addworkout.js 文件

```
 $(document).ready(function () {

    $(".textbox").click (function () {
      alert('working');
});

    });

    function addexercises() {

        var numexercise = document.getElementById("numexercises");
        var totalexercise = 0 ; 
        document.getElementById("exercisesthisworkout").style.display = "none";
        if (parseInt(numexercise.value) && parseInt(numexercise.value) < 25 && totalexercise < 25) {
            totalexercise += parseInt(numexercise.value);
            for ( var i = 0; i < parseInt(numexercise.value); i++) {

                // alert("hello world");

                var subcontainer = '<div class="exercisecontainer">';
                var exercisename = '</br><input type="text" value="Enter Exercise Name" class="textbox" name="exercisename">';
                var numsets = '<br><input type="text" value="Number of Sets" class="numsets" name="numsets">';
                var endingdiv = "</div>";
                subcontainer += exercisename;
                subcontainer += numsets;
                subcontainer += endingdiv;
                document.getElementById("workoutentrycontainer").innerHTML += subcontainer;

                //document.getElementById("workoutentrycontainer").innerHTML += exercisename;

                //document.getElementById("workoutentrycontainer").innerHTML += numsets

                //document.getElementById("workoutentrycontainer").innerHTML += endingdiv;

            }

        }

    } 
```

和我的html文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<link rel="stylesheet" href="/static/addworkout.css"  type="text/css">
<script type="text/javascript" src="/static/jquery.js"> </script>
<script type="text/javascript" src="/static/addworkout.js"></script>

</head>
{% extends "masterpage.html" %}
{% block content %}
<body>

<div id="workoutentrycontainer">
<div id="exercisesthisworkout">
<p>How many unique exercises</p>
<input type="text" class="textbox" id="numexercises"> 
<input type="button" class="button" onclick="addexercises()" value="Add" id="numexercisesbutton"> 

</div>
</div>
</body>
{% endblock %}
</html> 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T23:41:33.327

**问题 1：**这`document.getElementById("workoutentrycontainer").innerHTML = ...`会导致`#workoutentrycontainer`重新创建整个内容。因此，即使是那些附加了事件的输入，也会丢失它。

**问题 2：**新创建的元素不会神奇地最终绑定到您在文档加载时定义的事件。您必须将事件处理程序绑定到最近的未重新创建的父级（`#workoutentrycontainer`自然选择），然后通过`.textbox`

```
$("#workoutentrycontainer").on("click", ".textbox", function() {
   alert('working');
}); 
```

这也将解决问题 1，但我仍然建议您使用 jQuery 方法而不是`innerHTML`附加新内容。这将避免不必要的 DOM 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:42:19.957

不确定您是`addexercises`在页面中重复调用，还是仅在页面加载时调用。

如果只在页面加载时调用它并且在添加点击处理程序之前调用它，那么所有的处理程序都可以很好地绑定到元素。

如果它将在页面加载后使用，则需要将 clcik 处理程序委托给更高级别的 html 树或文档以考虑未来的元素。

如果在代码运行时元素存在，则事件只能直接绑定到元素。

```
$(document).ready(function () {

    $(document).on('click',".textbox").click (function () {
         alert('working');
     });

}); 
```

# magento - Magento - 如何使用 REST API 添加可配置产品？

> ID：11181999
> 
> 赞同：1
> 
> 时间：2012-06-24T23:32:16.390
> 
> 标签：magento

API 文档描述了如何使用 rest 添加“简单产品”：http: [//www.magentocommerce.com/api/rest/Resources/Products/products.html](http://www.magentocommerce.com/api/rest/Resources/Products/products.html)

但是可配置产品呢？我们正在使用 T 恤，我们允许用户选择尺寸的唯一方法是创建可配置的产品，这就是我们需要它的原因。

至于使用 API 的原因，我们将有一个桌面应用程序在 magento 上创建/更新产品。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-16T07:20:49.697

这应该工作

```
{
  "cart_item": {
    "quote_id": 7,
    "sku": "WJ01",
    "qty": 1,
    "product_option": {
      "extension_attributes": {
        "configurable_item_options": [
          {
            "option_id": "93",
            "option_value": 58
          },
          {
            "option_id": "141",
            "option_value": 169
          }
        ]
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T16:09:02.503

虽然这个问题很老了。但是因为我目前正在从事一项类似的任务，即在 Magento 1.9.x 中创建可配置产品并将这些产品与简单产品相关联。

例如，对于 Magento 版本 1.9.2.4，答案在代码中：

```
// file: app/code/core/Mage/Catalog/Model/Api2/Product/Rest/Admin/V1.
// line: 149

if ($type !== 'simple') {
        $this->_critical("Creation of products with type '$type' is not implemented",
            Mage_Api2_Model_Server::HTTP_METHOD_NOT_ALLOWED);
    } 
```

我想没有办法用自己的方法扩展 API。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-25T01:02:25.977

Magento API 在 1.7.0.0 之前非常慢，例如每 1-2 秒甚至更长的 1 个简单产品保存（插入）。没有关联产品的可配置产品需要更长的时间来保存。试试 Magmi [http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Wiki](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Wiki)。它使用原始查询每秒插入 20 个产品。它没有 1.7.* 的更新，而且似乎不会很快更新。

使用它的 API 而不是 CSV 方式。 [http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Datapump_API](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Datapump_API)

```
$dp->ingest($product_data); 
```

您的代码必须创建可配置属性（具有“用于创建可配置产品”=>“是”的属性，如大小和颜色）。事实上，所有属性都必须在使用 admin 或您的代码中的 ingest() 之前创建，这相当容易。好的部分是 Magmi 将添加/更新新的选项值（X，XL，...）。

Magmi 的代码可能看起来不像 Magento 的代码，但总的来说它做得很好。

不仅出于显而易见的原因，还需要快速导入脚本。在将数据添加到 Magento 之前，通常需要对数据进行清理和结构化。因为有很多数据并且并非所有数据都与预期模式匹配，所以您会遇到一些错误，脚本会中断并添加损坏的产品。如果您需要添加 10k 个产品，则至少需要 3-4 小时，可能会更长。现在想象一下，您会注意到 2 小时后出现的第一件事是错误的，因为在脚本完成之前您无法知道数据是否已正确添加。