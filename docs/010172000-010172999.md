# StackOverflow 问答 10172000-10172999

# c# - ZedGraph 自定义图

> ID：10172001
> 
> 赞同：6
> 
> 时间：2012-04-16T09:55:16.850
> 
> 标签：c#, charts, customization, zedgraph

我想用 ZedGraph 制作以下动态图表： ![在此处输入图像描述](../Images/0d0e73be2cdd32d1707903805dcb1dd5.png) 如何使 ZedGraph 轴反转和时间轴？谢谢

**UPD 1**：我必须尝试使用​​以下代码：

```
GraphPane myPane = zg1.GraphPane;
            myPane.YAxis.Type = AxisType.Date;
            myPane.YAxis.Scale.MajorUnit = DateUnit.Minute;
            myPane.YAxis.Scale.MinorUnit = DateUnit.Second;
            myPane.XAxis.IsVisible = false;
            myPane.X2Axis.IsVisible = true;
            myPane.X2Axis.MajorGrid.IsVisible = true;
            myPane.X2Axis.Scale.Min = 0;
            myPane.X2Axis.Scale.Max = 600;
            myPane.YAxis.Scale.Format = "HH:mm:ss";
            PointPairList list = new PointPairList();
            PointPairList list2 = new PointPairList();
            for (int i = 0; i < 36; i++)
            {
                double x = (double)i * 5.0;
                double y = (double)new XDate(DateTime.Now.AddSeconds(i));
                list.Add(y, x);
                //list2.Add(y2, x);
                listBox1.Items.Add("x = " + x + " y = " + y);
            }

            // Generate a red curve with diamond symbols, and "Alpha" in the legend
            LineItem myCurve = myPane.AddCurve("Alpha",
                list, Color.Red, SymbolType.None);
            // Fill the symbols with white
            myCurve.Symbol.Fill = new Fill(Color.White);
                        myPane.Y2Axis.MajorGrid.IsVisible = true;
            // Align the Y2 axis labels so they are flush to the axis
            myPane.Y2Axis.Scale.Align = AlignP.Inside;

            // Fill the axis background with a gradient
            myPane.Chart.Fill = new Fill(Color.White, Color.LightGray, 45.0f);
            zg1.IsShowPointValues = true;
            zg1.AxisChange();
            // Make sure the Graph gets redrawn
            zg1.Invalidate(); 
```

但我错了： ![在此处输入图像描述](../Images/265f79766396d55fef665f3ba19626f6.png)

**UPD2**：

我有多线程代码：

```
private TimerCallback ReadTimerCallback;
        private LineItem myCurve;
        private Random rnd = new Random(500);
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            GraphPane myPane = zg1.GraphPane;

            myPane.XAxis.IsVisible = false;

            myPane.X2Axis.IsVisible = true;
            myPane.X2Axis.MajorGrid.IsVisible = true;
            myPane.X2Axis.Scale.Min = 0;
            myPane.X2Axis.Scale.Max = 600;

            myPane.YAxis.IsVisible = false;

            myPane.Y2Axis.IsVisible = true;
            myPane.Y2Axis.Scale.MajorUnit = DateUnit.Minute;
            myPane.Y2Axis.Scale.MinorUnit = DateUnit.Second;
            myPane.Y2Axis.Scale.Format = "HH:mm:ss";
            myPane.Y2Axis.Type = AxisType.DateAsOrdinal;

            // As we get more data we want to add it on to the end of the curve
            // and we also want to get the scale so that we can shift it along
            double? oringinalLastDate;
            XDate firstDate;
            if (myPane.CurveList.Count == 0)
            {
                myCurve = myPane.AddCurve("Alpha",
                                          new PointPairList(),
                                          Color.Red,
                                          SymbolType.None);
                firstDate = new XDate(DateTime.Now);
                oringinalLastDate = null;
            }
            else
            {
                myCurve = (LineItem)myPane.CurveList[0];
                firstDate = myCurve.Points[myCurve.Points.Count - 1].Y;
                oringinalLastDate = myPane.Y2Axis.Scale.Max;
            }

            /*for (int i = 0; i < 36; i++)
            {
                double x = i * 5.0;
                firstDate.AddSeconds(i);

                myCurve.AddPoint(x, firstDate);

                //listBox1.Items.Add("x = " + x + " y = " + firstDate);
            }*/

            myCurve.Symbol.Fill = new Fill(Color.White);
            myCurve.IsX2Axis = true;
            myCurve.IsY2Axis = true;
            //myPane.Y2Axis.Scale.IsReverse = true;

            myPane.Chart.Fill = new Fill(Color.White, Color.LightGray, 45.0f);
            zg1.IsShowPointValues = true;

            // Now make the minimum of the scale, the maximum that it was so
            // the graph shifts
            if (oringinalLastDate.HasValue)
                myPane.Y2Axis.Scale.Min = oringinalLastDate.Value;

            zg1.AxisChange();
            zg1.Invalidate();
            AutoResetEvent ReadautoEvent = new AutoResetEvent(false);
            ReadTimerCallback = new TimerCallback(this.ShowData);
            System.Threading.Timer timer = new System.Threading.Timer(ReadTimerCallback, ReadautoEvent, 100, 1000);

        }

        private void ShowData (object Object )
        {
            this.myCurve.AddPoint(rnd.Next(500, 600), new XDate(DateTime.Now));
        } 
```

**UPD3**：我想向下移动 Y 轴，而不是缩放这个轴。我只更新了 1 分钟的图表： ![在此处输入图像描述](../Images/e5639b7dedbb72c2bc8847aa77019d81.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:36:06.627

我认为您希望 DateAsOrdinal（而不是 Date）为您提供更好的日期表示（尽管如果您对此感到满意，可能不会），并且您需要将曲线上的 IsX2Axis 和 IsY2Axis 属性设置为 true。

这是您的代码的更新版本，它显示了我的意思-这是您需要的吗？（在给定数据值的情况下，它不会像您绘制的那样是波浪线，并且 x 轴刻度从 0 开始，而不是像您的绘图中那样从 100 开始，但那是因为您的代码已将其明确设置为 0，所以我假设这就是您想）。

每次调用它时它总是会附加更多数据（我假设你是从你的 button1 调用它）并且它会移动轴的最小值，所以你只显示最新的数据位 - 如果你不设置最小值，您将看到一条摆动的线，因为它显示了所有数据。

```
GraphPane myPane = zg1.GraphPane;            

myPane.XAxis.IsVisible = false;

myPane.X2Axis.IsVisible = true;
myPane.X2Axis.MajorGrid.IsVisible = true;
myPane.X2Axis.Scale.Min = 0;
myPane.X2Axis.Scale.Max = 600;

myPane.YAxis.IsVisible = false;

myPane.Y2Axis.IsVisible = true;
myPane.Y2Axis.Scale.MajorUnit = DateUnit.Minute;
myPane.Y2Axis.Scale.MinorUnit = DateUnit.Second;
myPane.Y2Axis.Scale.Format = "HH:mm:ss";
myPane.Y2Axis.Type = AxisType.DateAsOrdinal;

// As we get more data we want to add it on to the end of the curve
// and we also want to get the scale so that we can shift it along
double? oringinalLastDate;
XDate firstDate;
LineItem myCurve;
if(myPane.CurveList.Count == 0)
{
    myCurve = myPane.AddCurve("Alpha",
                              new PointPairList(),
                              Color.Red,
                              SymbolType.None);
    firstDate = new XDate(DateTime.Now);
    oringinalLastDate = null;
}
else
{
    myCurve = (LineItem)myPane.CurveList[0];
    firstDate = myCurve.Points[myCurve.Points.Count - 1].Y;
    oringinalLastDate = myPane.Y2Axis.Scale.Max;
}            

for (int i = 0; i < 36; i++)
{
    double x = i * 5.0;
    firstDate.AddSeconds(i);

    myCurve.AddPoint(x, firstDate);

    listBox1.Items.Add("x = " + x + " y = " + firstDate);
}

myCurve.Symbol.Fill = new Fill(Color.White);
myCurve.IsX2Axis = true;
myCurve.IsY2Axis = true;

myPane.Chart.Fill = new Fill(Color.White, Color.LightGray, 45.0f);
zg1.IsShowPointValues = true;

// Now make the minimum of the scale, the maximum that it was so
// the graph shifts
if (oringinalLastDate.HasValue)
    myPane.Y2Axis.Scale.Min = oringinalLastDate.Value;

zg1.AxisChange();            
zg1.Invalidate(); 
```

**更新**

如果您想使用 500 到 600 之间的随机数每秒更新一次图表，应该这样做（每添加 3 个点后，y 轴上的刻度会随之移动）：

```
private int pointCount;
private double? scaleMin = null;
private static readonly Random rnd = new Random();

private void button1_Click(object sender, EventArgs e)
{
    GraphPane myPane = zg1.GraphPane;

    myPane.XAxis.IsVisible = false;

    myPane.X2Axis.IsVisible = true;
    myPane.X2Axis.MajorGrid.IsVisible = true;
    myPane.X2Axis.Scale.Min = 0;
    myPane.X2Axis.Scale.Max = 600;

    myPane.YAxis.IsVisible = false;

    myPane.Y2Axis.IsVisible = true;
    myPane.Y2Axis.Scale.MajorUnit = DateUnit.Minute;
    myPane.Y2Axis.Scale.MinorUnit = DateUnit.Second;
    myPane.Y2Axis.Scale.Format = "HH:mm:ss";
    myPane.Y2Axis.Type = AxisType.DateAsOrdinal;

    LineItem myCurve = myPane.AddCurve("Alpha",
                                  new PointPairList(),
                                  Color.Red,
                                  SymbolType.None);

    myCurve.Symbol.Fill = new Fill(Color.White);
    myCurve.IsX2Axis = true;
    myCurve.IsY2Axis = true;

    myPane.Chart.Fill = new Fill(Color.White, Color.LightGray, 45.0f);
    zg1.IsShowPointValues = true;

    pointCount = 0;

    var t = new System.Windows.Forms.Timer();
    t.Interval = 1000;
    t.Tick += ShowData;

    Thread.Sleep(100);

    t.Start();
}

private void ShowData(object sender, EventArgs e)
{
    var t = (System.Windows.Forms.Timer) sender;
    t.Enabled = false;

    pointCount++;

    int x = rnd.Next(500, 600);
    var y = new XDate(DateTime.Now);

    GraphPane myPane = zg1.GraphPane;

    if (scaleMin == null) scaleMin = myPane.Y2Axis.Scale.Max;

    LineItem myCurve = (LineItem)myPane.CurveList[0];            

    myCurve.AddPoint(x, y);

    // After 3 points are added move the scale along
    if (pointCount > 3)
    {
        myPane.Y2Axis.Scale.Min = scaleMin.Value;
        scaleMin = myPane.Y2Axis.Scale.Max;
    }

    zg1.AxisChange();
    zg1.Invalidate();

    t.Enabled = true;
} 
```

# mysql - 测试给定集合中的所有值是否在 MySQL 查询的 SET 类型字段中打开

> ID：10172005
> 
> 赞同：2
> 
> 时间：2012-04-16T09:55:29.640
> 
> 标签：mysql, query-optimization, bit-manipulation

我没有看到在 MySQL 查询中执行此操作的清晰简单的方法。架构看起来像：

```
CREATE TABLE users (
    id VARCHAR(20),
    col SET('read', 'write', 'edit', 'delete'),
); 
```

如果我想查询所有具有`read`和`write`privs 的用户（不管设置了任何其他值），我想出的唯一查询是：

```
SELECT id, privs
FROM users WHERE
FIND_IN_SET('read',privs) > 0 AND 
FIND_IN_SET('write',privs) > 0 
```

有没有办法简化这个？就像是：

```
SELECT id, privs
FROM users WHERE
privs('read' & 'write') 
```

假设，我想使用更复杂的位逻辑，但我想知道工作示例是否是使用`SET`类型时完成此操作的唯一方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:09:05.693

您的值的存储顺序与您的 create table 语句中的顺序相同。

在你的情况下：

```
 decimal   |   binary
read    1         |   0001
write   2         |   0010
edit    4         |   0100
delete  8         |   1000 
```

您可以通过添加“转换”列来获得十进制值`0`。

所以要读写，你可以这样做：

```
SELECT id, privs
FROM users 
WHERE
privs+0 = 3; 
```

在此处阅读更多相关信息[。](http://dev.mysql.com/doc/refman/5.1/en/set.html)

更新：

`privs+0 = 3`将只返回“读&写”。

就像我说的那样，无论值被分配给条目的频率如何，这些值都将按顺序存储。

所以你也可以这样做：

```
SELECT id, privs
FROM users 
WHERE
privs = 'read,write'; 
```

如果你想至少有读写能力，甚至可能更多：

```
SELECT id, privs
FROM users 
WHERE
privs LIKE 'read,write%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:04:22.373

如果在 MySQL 中没有优雅的方法来做到这一点，我会解决这个问题，至少我不需要手动记住所有设置元素位字段的位置/值，我仍然可以使用更多的助记符字符串。将只使用 CROSS JOIN：

```
SELECT u.id, u.col
FROM users u

CROSS JOIN
(
  select sum(val) as bit_result from
  (
  SELECT 'read' as txt,1 as val
  union
  SELECT 'write' as txt,2 as val
  union
  SELECT 'edit' as txt,4 as val
  union
  SELECT 'delete' as txt,8 as val
  ) as x
  where txt in ('read','write')
) as z

WHERE u.col & z.bit_result = z.bit_result 
```

源数据：

```
CREATE TABLE users (
    id VARCHAR(20),
    col SET('read', 'write', 'edit', 'delete')
);

insert into users(id,col)
values ('hello','read,write');

insert into users(id,col)
values ('hola','read,delete,write');

insert into users(id,col)
values ('yeah','delete,write'); 
```

输出：'hello' 和 'hola'

[http://sqlfiddle.com/#!2/56070/41](http://sqlfiddle.com/#!2/56070/41)

# javascript - 回发div关闭时的jquery div滑块

> ID：10172009
> 
> 赞同：0
> 
> 时间：2012-04-16T09:55:46.143
> 
> 标签：javascript, jquery, html, slider

我有一个打开和关闭我的 div 的 jquery 滑块。但是当页面得到回发时，div 被关闭。我希望 div 保持打开状态。

我的滑块

```
 if ($(".div").is(":hidden")) {
            $(".div").slideDown(1000); // slide it down

        } else {
            $(".div").slideUp(1000); // hide it
        } 
```

我想过改变地址，比如

```
website.com#open 
```

然后检查地址，但我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:00:17.337

我会在 Html 中处理这个。您必须以这种方式编写 HTML 语句

```
<div class="div" style="display:none"></div> 
```

我会写：

```
<div class="div"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:01:08.860

尝试这样做：

```
 var isPostBackObject = document.getElementById('isPostBack');
 if (isPostBackObject != null) {

 } else {
 //show your div open
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:58:59.220

当页面回发时，标记恢复到原始状态。因此，`$(".div").is(":hidden")`将始终返回 true。

您可以创建某种状态标识符并使​​用它来检查状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:03:23.613

您需要在回发之间保持 div 的状态。您可以通过在 url 中的回发之间传递状态或在服务器上记录状态以准备下一次回发来做到这一点。

您可以使用带有参数的网址，例如；

```
http://website.com?open=true 
```

然后，您可以使用 url 参数解析函数检查页面加载时的 div 状态，例如；

```
var QueryString = function () {
  // This function is anonymous, is executed immediately and 
  // the return value is assigned to QueryString!
  var query_string = {};
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) {
    var pair = vars[i].split("=");
        // If first entry with this name
    if (typeof query_string[pair[0]] === "undefined") {
      query_string[pair[0]] = pair[1];
        // If second entry with this name
    } else if (typeof query_string[pair[0]] === "string") {
      var arr = [ query_string[pair[0]], pair[1] ];
      query_string[pair[0]] = arr;
        // If third or later entry with this name
    } else {
      query_string[pair[0]].push(pair[1]);
    }
  } 
    return query_string;
} (); 
```

然后，您可以使用以下命令检查页面加载：

```
$(document).ready(function(e){
if(QueryString.open == 'true')
{
 $(".div").show();
}
}); 
```

[Quentin在这里](https://stackoverflow.com/questions/979975/how-to-get-the-value-from-url-parameter)编写的 javascript 参数解析函数。

# jquery - 一个在输入上带有标签的表单，而且还使用 Bootstrap 内联标签和输入？

> ID：10172010
> 
> 赞同：2
> 
> 时间：2012-04-16T09:55:49.863
> 
> 标签：jquery, twitter-bootstrap

我想要一个看起来像这样的表格：

```
Order    Person      City           Street
1234     Joe         Hull           Coronation

Date         Phone
1/1/2001     051-666-333 
```

默认样式为我提供了输入的标签，但随后它将所有输入堆叠在一起。

有没有什么方法可以在输入上实现标签，但也可以让所有字段内联？请注意，我想尝试尽可能多地使用 twitter 框架，所以我认为不要添加太多额外的标记或 div 很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:28:17.027

我不认为这与 jQuery 有任何关系，就像 @ManseUK 说这可能是一个 css 问题。我不确定您是否将其包围在一个元素中，但您应该能够使用引导程序中的行来执行此操作，然后浮动控制组

[http://jsfiddle.net/billpull/uWeW5/](http://jsfiddle.net/billpull/uWeW5/)

根据任何其他可能的其他属性，将这样的类添加到您的 css 或任何您想要命名的类

```
.float-left {
   float: left;
} 
```

并将您的 html 代码更改为这样的内容。

```
 <div class="row">
            <div class="control-group float-left">
                <label class="control-label">Some label</label>
                <div class="controls">
                    <input type="text" />
                </div>
            </div>
            <div class="control-group float-left">
                <label class="control-label">Some label</label>
                <div class="controls">
                    <input type="text" />
                </div>
            </div>
            <div class="control-group float-left">
                <label class="control-label">Some label</label>
                <div class="controls">
                    <input type="text" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="control-group float-left">
                <label class="control-label">Some label</label>
                <div class="controls">
                    <input type="text" />
                </div>
            </div>
            <div class="control-group float-left">
                <label class="control-label">Some label</label>
                <div class="controls">
                    <input type="text" />
                </div>
            </div>
        </div> 
```

根据您的宽度限制，您可能希望使用引导程序的网格系统而不是浮动。

# spring - 如何为 Spring Integration 配置多通道？

> ID：10172011
> 
> 赞同：0
> 
> 时间：2012-04-16T09:55:50.050
> 
> 标签：spring, spring-integration

我正在尝试在 Spring Integration 中实现以下流程。下面是我的要求。

1.  异步网关，起点，接收搜索请求并返回Future
2.  网关向多个通道发送请求以执行搜索
3.  每个频道使用搜索字符串联系基于 HTTP 的网站
4.  聚合器从第 3 步输出的所有通道接收结果到输出通道

我不确定如何实现第 3 步和第 4 步，或者在 spring 集成中是否有更好的方法来做到这一点。基本上我必须使用搜索字符串联系多个站点并生成汇总结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:30:27.283

```
gateway->publish-subscribe-channel(apply-sequence=true)->http-outbound-gateway(s)->aggregator 
```

如果您希望 http 调用同时运行，请将任务执行器添加到发布订阅通道；这样每个 http 调用都将在单独的线程上运行（只要任务执行器配置了足够的线程。

如果您希望调用连续发生，请关闭任务执行器。

除非您想在返回聚合结果之前对其进行处理，否则只需关闭聚合器上的输出通道，框架就会将聚合响应发送到网关（Future）。您不需要网关上的默认回复通道。

# eclipse - Flex sdk 与 eclipse 的集成

> ID：10172012
> 
> 赞同：0
> 
> 时间：2012-04-16T09:55:59.763
> 
> 标签：eclipse, apache-flex, sdk, ide, mxml

我有以下版本的eclipse

```
Eclipse Java EE IDE for Web Developers.
Version: Indigo Service Release 2
Build id: 20120216-1857 
```

我已经下载了 flex_sdk 4.6。我的问题是我如何为 eclipse 添加这个插件以便将它用于 Flash 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:04:17.237

SDK 是一个开发工具包，而不是一个 IDE。

虽然您可以免费使用 mxmlc + compc 编译器，但您不会有代码提示、代码完成、...

如果您需要所有这些，则需要购买并下载完整的[Flash Builder](http://www.adobe.com/products/flash-builder.html)包。或者您可以先下载试用版。

然后您将能够将插件安装到eclipse中。

按照发行说明中的​​说明作为 Eclipse 插件安装到现有的 Eclipse 实例中：http:
[//helpx.adobe.com/flash-builder/release-note/flash-builder-4-6-release.html](http://helpx.adobe.com/flash-builder/release-note/flash-builder-4-6-release.html)

# google-chrome - 为 chrome 扩展中的内容脚本动态配置 exclude_matches

> ID：10172015
> 
> 赞同：1
> 
> 时间：2012-04-16T09:56:16.530
> 
> 标签：google-chrome, google-chrome-extension

对于 chrome 扩展中的内容脚本，您可以指定`matches`并`exclude_matches`控制它们被注入的页面。这必须在扩展的清单中指定，如下所示

```
{
  "name": "Color picker",
  ...
  "content_scripts": [
    {
      "matches": ["http://*/*", "https://*/*"],
      "exclude_matches": ["http://www.google.com/*"],
      "css": ["color_picker.css"],
      "js": ["jquery.js", "color_picker.js"]
    }
  ],
  ...
} 
```

我想知道是否可以添加`["http://www.yahoo.com/*"],`到`exclude_matches`以及何时使用扩展程序。这样，我可以让用户控制`exclude_matches`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T10:02:56.600

扩展不能修改任何本地文件，包括扩展的`manifest.json`. [Chrome 为可选权限](http://code.google.com/chrome/extensions/permissions.html)提供了一个 API ，但这不包括[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)。

您可以手动创建灵活的模式：

```
// In the content script:
var exclude = /^https?:\/\/(www\.)?yahoo\.com\//;
if (!exclude.test(location.href)) {
     // Run logic.
} 
```

正则表达式为此目的非常强大，尽管不是必需的。代替，可以使用`location.href`其他`location`属性，例如。`location.host`

另请参阅：[MDN`window.location`](https://developer.mozilla.org/en/DOM/window.location)：。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:12:06.813

您可以将扩展程序*永远不能*`exclude_matches`做的事情视为“硬”限制- 简而言之，它为您的内容脚本不应触及的页面类型设置了永久界限。无法即时修改它，因为它是永久性的。

 *但是，如果要使其灵活，则需要以编程方式进行注入。Google 有[关于](http://code.google.com/chrome/extensions/content_scripts.html#pi)如何使用`executeScript`. 您需要使用用户控制的列表添加自己的排除逻辑（也许还可以使用来自其他答案的好建议）。*

# java - 自定义日历转换器未获取日历属性

> ID：10172018
> 
> 赞同：0
> 
> 时间：2012-04-16T09:56:29.217
> 
> 标签：java, jsf, richfaces

我有以下JSF：

```
<rich:calendar id="startDate"
                        value="#{myBean.startDate}" defaultTime="00:00"
                        disabled="#{myBean.disabled}"
                        popup="true" required="true" 
                        showWeeksBar="false"
                        dayDisableFunction="isDayEnabled"
                        dayClassFunction="getDisabledStyle"
                        requiredMessage="#{msg.errorStartDateNull}"
                        datePattern="#{myBean.datePattern}"
                        showApplyButton="false" cellWidth="24px" cellHeight="22px" todayControlMode="hidden"
                        style="width:1000px"
                        timeZone="#{myBean.defaultTimeZone}"
                        styleClass="noToday" showFooter="false" converter="calendarConverter" immediate="true"> 
```

这是我的转换器：

```
@FacesConverter("calendarConverter")
public class CalendarConverter extends DateTimeConverter
{
    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value)
    {
        Date calDate = (Date) component.getAttributes().get("currentDate");

        if (calDate instanceof Date) {
            return super.getAsObject(context, component, value);
        }
        else {
            throw new ConverterException(new FacesMessage("Invalid Date Format"));
        }
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value)
    {
        return super.getAsString(context, component, value);
    }
} 
```

我需要检查日历上的 currentDate 属性，但是当我将 immediate="true" 属性应用于日历组件时它为空。如果我删除了即时属性，我的转换器永远不会被调用（JSF 似乎正在使用它自己的转换）并将它自己的错误消息发送到屏幕：

```
java.lang.NumberFormatException: For input string: "2012asd" 
```

当 currentDate 属性不是日期时，如何返回自定义错误消息？（它已被篡改日期 firefox 插件篡改）

## 更新

我已经为转换器提供了一个构造函数，以查看它在提交表单时是否进入（删除了 immediate=true）。它正在进入构造函数，但仍未调用我的 getAsObject 方法。

```
public CalendarConverter()
{
    super();
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:25:30.233

`<error-page>`您可以通过添加in web.xml 文件来处理异常。

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/errorpage.html</location>
</error-page> 
```

这将为任何异常实例显示 errorpage.html。

也可以从此链接获得更多信息。 [http://docs.oracle.com/cd/B32110_01/web.1013/b25947/web_val.htm](http://docs.oracle.com/cd/B32110_01/web.1013/b25947/web_val.htm)

希望对你有帮助

# iphone - 在 Web 应用程序中运行的编译目标 C

> ID：10172020
> 
> 赞同：0
> 
> 时间：2012-04-16T09:56:37.580
> 
> 标签：iphone, web

这可能有点超出了明显的问题。我知道的答案，它可能不会完成。但仍然：

我有一个在所有智能手机中运行的 Web 应用程序。我需要使用一些本机控件，例如访问 iPhone 的联系人等。这不能使用 WebApp 完成。

是否可以简单地编译目标 C 代码并直接使用它通过 Web 在 iPhone 上运行。

`Permissions`好吧，我们总是可以允许从用户那里获取它，就像在运行 java 代码 [插件] 时浏览器提示的那些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:26:19.540

如果您想使用浏览器 (Safari)，这是不可能的。但是，如果您将在应用程序中使用 UIWebView，则可以使用设备功能。

# c# - 从另一个进程更新 TextBox 文本

> ID：10172035
> 
> 赞同：4
> 
> 时间：2012-04-16T09:57:58.097
> 
> 标签：c#, .net, winforms

我有两个 WinForms 应用程序，我需要从 Application2 向 Application1 中的 TextBox 添加文本。我已经使用命名管道和 WCF 成功完成了这项工作。我可以成功地从 Application2 调用 Application1 中的方法，但我得到“*在创建窗口句柄之前无法在控件上调用 Invoke 或 BeginInvoke。* ”错误或文本框根本没有更新。

这是我的基本代码。`GetMessage`由 Application2 调用。这个根本不更新 TextBox：

```
public void GetMessage(string msg)
{
    UpdateTextbox(msg);
}

private void UpdateTextbox(string msg)
{
    this.textBox1.Text += msg + Environment.NewLine;
} 
```

这会引发调用错误：

```
public void GetMessage(string msg)
{
    Action a = () => UpdateTextbox(msg);
    textBox1.BeginInvoke(a);
} 
```

我试图通过强制创建句柄来欺骗我的方式，但它也不会更新 TextBox：

```
public void GetMessage(string msg)
{
    IntPtr handle = textBox1.Handle;
    Action a = () => UpdateTextbox(msg);
    textBox1.BeginInvoke(a);
} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:20:11.913

由于[这个答案](https://stackoverflow.com/questions/513131/c-sharp-compile-error-invoke-or-begininvoke-cannot-be-called-on-a-control-unti/513529#513529)解决了这个问题。

问题是Form1 的TextBox 在Form1 的**另一个实例**上。观察这个`Application1.Form1`启动命名管道服务的代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    ServiceHost host = new ServiceHost(typeof(Form1), new Uri[] { new Uri("net.pipe://localhost") });
    host.AddServiceEndpoint(typeof(ISmsService), new NetNamedPipeBinding(), "PipeReverse");
    host.Open();
} 
```

如果我理解正确，这将启动一个`Form1`. 因此，当 Application2 调用时`Application1.GetMessage`，它调用`ServiceHost-instance-Form1.GetMessage`.

要访问我的主要实例，`Form1`我将代码更改为：

```
public Form1()
{
    InitializeComponent();

    if (mainForm == null)
    {
        mainForm = this;
    }
}

private static Form1 mainForm;
public static Form1 MainForm
{
    get
    {
        return mainForm;
    }
}

private void UpdateTextbox(string msg)
{
    MainForm.textBox1.Text += msg + Environment.NewLine;
} 
```

它现在可以正常工作..

# wcf - 无法在 WCF Restful 服务中使用属性 [WebInvoke] 访问任何方法

> ID：10172036
> 
> 赞同：0
> 
> 时间：2012-04-16T09:58:12.153
> 
> 标签：wcf, service, webinvoke

我无法使用`[webinvoke]`RESTful WCF 服务中的属性访问任何方法。

我的代码是这样的：

```
[OperationContract]
[WebInvoke(Method = "Post", UriTemplate = "Comosite/{composite}", ResponseFormat = WebMessageFormat.Xml)]
CompositeType GetDataUsingDataContract(string composite); 
```

在执行上述服务时，我收到一条错误消息

> 不允许的方法。

我尝试了很多方法，通过修改 urltemplate、方法名称和方法类型等，但没有任何结果。

但是，如果我使用该`[WebGet]`属性，则服务方法可以正常工作。

任何人都可以建议我怎么做才能让它发挥作用吗？

提前致谢... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:31:30.503

我创建了一个与您在这里所做的类似的服务，并用 fiddler 调用它，当我将方法更改为 POST 所有大写字母时，它就起作用了。当方法类似于您的代码中的 Post 时，我会收到未找到端点的消息。

我的提琴手请求如下所示：

```
http://localhost/service/service1.svc/Comosite/test 
```

这里测试作为复合参数发送，我得到一个 CompositeType 作为返回的 xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:15:47.607

尝试改变

```
[WebInvoke(Method = "Post", UriTemplate = "Comosite/{composite}", ResponseFormat = WebMessageFormat.Xml)] 
```

到

```
[WebInvoke(Method = "POST", UriTemplate = "Comosite/{composite}", ResponseFormat = WebMessageFormat.Xml)] 
```

# symfony - Symfony2 资产问题

> ID：10172038
> 
> 赞同：3
> 
> 时间：2012-04-16T09:58:29.873
> 
> 标签：symfony, assetic

我在`sf2 project`过去 3 个月里一直在使用资产，没有问题。但是现在，在新模板上调用资产时，我得到以下错误`Route "_assetic_baa4710.js" does not exist`，可以通过以下方式解决：

```
#config_dev.yml
assetic:
    use_controller: false 
```

并从 routing_dev.yml 中删除以下资产配置

```
#routing_dev.yml
#_assetic:
#    resource: .
#    type:     assetic 
```

有谁知道发生了什么？多谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T18:04:30.220

我相信noisebleed 的评论是解决方案，它对我有用。

```
// app/config_dev.yml
assetic:
    use_controller: true
    bundles: ['FooBarBundle'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T02:57:01.697

使用缓存清理

```
rm -rf apps/cache 
```

[Assetic - 路线“_assetic_001d5b7_0”不存在](https://stackoverflow.com/questions/11462673/assetic-route-assetic-001d5b7-0-does-not-exist)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:31:17.680

清除缓存，问题应该解决

php 应用程序/控制台缓存：清除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-17T19:06:39.927

也许为时已晚，但是……对我有用的是：

```
php composer.phar install
php app/console cache:clear
php app/console cache:warmup 
```

# java - 使用 Intent 启动新 Activity。android.content.ContextWrapper.getPackageName 处的 NPE

> ID：10172039
> 
> 赞同：0
> 
> 时间：2012-04-16T09:58:33.350
> 
> 标签：java, android, android-intent, nullpointerexception

我正在尝试`Activity`使用`Intent`. 我已经在另一个应用程序中成功完成了这项工作，但这种方法在这种情况下似乎不起作用？

这是我的代码...

```
 public void startLevelEnd(Context context){
     Intent myIntent = new Intent(FirstActivity.this, LevelEndPanel.class);
     FirstActivity.this.startActivity(myIntent);
 } 
```

从我的`AndroidManifest.xml`档案...

```
<activity android:label="@string/app_name" android:name=".LevelEndPanel"></activity> 
```

我`startLevelEnd()`使用...调用例程（来自不同的类）

```
FirstActivity.startLevelEnd(this); 
```

我`NullPointerException`在“Intent myIntent ...”行（来自上面的代码片段）上收到错误：

```
04-16 09:46:39.361: E/AndroidRuntime(475):  at android.content.ContextWrapper.getPackageName(ContextWrapper.java:120) 
```

完整日志：

```
04-16 14:32:32.870: E/AndroidRuntime(336): FATAL EXCEPTION: main
04-16 14:32:32.870: E/AndroidRuntime(336): java.lang.NullPointerException
04-16 14:32:32.870: E/AndroidRuntime(336):  at android.content.ContextWrapper.getPackageName(ContextWrapper.java:120)
04-16 14:32:32.870: E/AndroidRuntime(336):  at android.content.ComponentName.<init>(ComponentName.java:75)
04-16 14:32:32.870: E/AndroidRuntime(336):  at android.content.Intent.<init>(Intent.java:2702)
04-16 14:32:32.870: E/AndroidRuntime(336):  at happyworx.nl.App.FirstActivity.startLevelEnd(FirstActivity.java:32)
04-16 14:32:32.870: E/AndroidRuntime(336):  at happyworx.nl.App.model.components.GameManager.LevelEnd(GameManager.java:89)
04-16 14:32:32.870: E/AndroidRuntime(336):  at happyworx.nl.App.model.components.GameManager$1.run(GameManager.java:60)
04-16 14:32:32.870: E/AndroidRuntime(336):  at android.os.Handler.handleCallback(Handler.java:587)
04-16 14:32:32.870: E/AndroidRuntime(336):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 14:32:32.870: E/AndroidRuntime(336):  at android.os.Looper.loop(Looper.java:123)
04-16 14:32:32.870: E/AndroidRuntime(336):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-16 14:32:32.870: E/AndroidRuntime(336):  at java.lang.reflect.Method.invokeNative(Native Method)
04-16 14:32:32.870: E/AndroidRuntime(336):  at java.lang.reflect.Method.invoke(Method.java:507)
04-16 14:32:32.870: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-16 14:32:32.870: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-16 14:32:32.870: E/AndroidRuntime(336):  at dalvik.system.NativeStart.main(Native Method) 
```

对于@Sergi，包含该方法的完整类：

```
package happyworx.nl.Appelz.model.components;

import happyworx.nl.Appelz.AppelzActivity;
import happyworx.nl.Appelz.LevelEndPanel;
import happyworx.nl.Appelz.MainGamePanel;
import happyworx.nl.Appelz.MainThread;
import happyworx.nl.Appelz.R;
import happyworx.nl.Appelz.model.apple;
import happyworx.nl.Appelz.model.glyphs;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import android.app.Activity;
import android.content.Intent;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.os.Handler;
import android.util.Log;

public class GameManager extends Activity {

    //Declare Vars
    private static final String TAG = "GameManager";
    public static MainGamePanel panel;
    private static glyphs glyphsCount;
    public static GameManager GameManager = new GameManager();

    public static AppelzActivity AppelzActivity = new AppelzActivity();

    private static Canvas canvas;
    final static int delayMillis = 1000;
    public static boolean count = false;
    public static int i = 6;
    public final static Handler handler = new Handler();

    public final static Runnable runnable = new Runnable()  {

        @Override
        public void run()
        {

            if (SlotManager.alSlottedFruitList.size() > 0){
            //TODO Create Full screen countdown timer
                Log.d("", "Countdown Timer in GameManager " + i);

                i--;
                if (count && i > -1) // stop timer when count is false
                {
                    handler.postDelayed(runnable, 1000);
                } else {
                    if (i == -1){
                        Log.d("", "RoundUp the Level");

                        GameManager.LevelEnd();
                    }
                    // reset Countdown (if basket outside checkout)
                    i = 6;
                }
            } else {
                // reset Countdown (if slot has no fruits)
                i = 6;
            }
        }
    };

    public void LevelEnd(){
        // First, count the Fruits in the slot
        SlotManager.countSlotInv();
        List<Integer> list = new ArrayList<Integer>();

        // Fill itemIds with the types of fruits
        for (apple a : SlotManager.alSlottedFruitList){
            Integer itemId = Integer.valueOf(a.FruitType);
            list.add(itemId);

            Set<Integer> unique = new HashSet<Integer>(list);
        }
            for (int key = 0; key < 3 ; key++) {
                System.out.println(key + " : " + Collections.frequency(list, key));     
            }
            startLevelEnd();
    }

    public void startLevelEnd(){
         Intent myIntent = new Intent(this, LevelEndPanel.class);
         this.startActivity(myIntent);
     }

    public GameManager() 
    {
    } 
```

LevelEndPanel 类：

```
package happyworx.nl.Appelz;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class LevelEndPanel extends Activity implements OnClickListener {

 private static final String TAG = LevelEndPanel.class.getSimpleName();
 private Button btnNewMission;

 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.level);

        btnNewMission = (Button) findViewById(R.id.btnNewMission);
        btnNewMission.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View arg0) {
                Intent i = new Intent(getApplicationContext(), AppelzActivity.class);
                startActivity(i);
            }});

 }

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

} 
```

和主线程：

```
package happyworx.nl.Appelz;

import android.graphics.Canvas;
import android.util.Log;
import android.view.SurfaceHolder;

public class MainThread extends Thread {

 private static final String TAG = MainThread.class.getSimpleName();

 private SurfaceHolder surfaceHolder;
 private MainGamePanel gamePanel;
 public static boolean running;
 public static Canvas canvas;

 public void setRunning(boolean running) {
 MainThread.running = running;
 }

 public MainThread(SurfaceHolder surfaceHolder, MainGamePanel gamePanel) {
  super();
  this.surfaceHolder = surfaceHolder;
  this.gamePanel = gamePanel;

 }

 @Override
 public void run() {
     // Canvas canvas;
      Log.d(TAG, "Starting game loop");
      while (running) {
      MainThread.canvas = null;
       // try locking the canvas for exclusive pixel editing on the surface
       try {
           MainThread.canvas = this.surfaceHolder.lockCanvas();
        synchronized (surfaceHolder) {
         // update game state
         this.gamePanel.update();
         // render state to the screen
         // draws the canvas on the panel
         this.gamePanel.onDraw(MainThread.canvas);
        }
       } finally {
        // in case of an exception the surface is not left in
        // an inconsistent state
        if (MainThread.canvas != null) {
         surfaceHolder.unlockCanvasAndPost(MainThread.canvas);
        }
       } // end finally
      }
     }
} 
```

还有篮子类，它在 GameManager 中启动 CountDown 计时器（也许这是我的错误？！？）

```
package happyworx.nl.Appelz.model;

import happyworx.nl.Appelz.MainGamePanel;
import happyworx.nl.Appelz.model.components.GameManager;
import happyworx.nl.Appelz.model.components.SlotManager;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.util.Log;
import android.view.MotionEvent;

public class basket {

 private Bitmap bitmap; // the actual bitmap
 private int x;   // the X coordinate
 private int y;   // the Y coordinate'
 public static int width;
 public static int height;
 public float X = 100;
 public float Y = 100;

 private boolean touched; // if droid is touched/picked up

 public basket(Bitmap bitmap, int x, int y) {
  this.bitmap = bitmap;

  width = bitmap.getWidth(); 
  height = bitmap.getHeight(); 
 }

 public Bitmap getBitmap() {
  return bitmap;
 }
 public void setBitmap(Bitmap bitmap) {
  this.bitmap = bitmap;
 }

 public int getWidth(){
      return bitmap.getWidth();
     }

     public int getHeight(){
      return bitmap.getHeight();
     }

 public int getX() {
  return x;
 }

 public void setX(float x) {

    // if basket is further than slotmargin 
     if (x + width/2 > SlotManager.SlotmarginX) {
        // if basket is NOT in CheckOut area    
         if (this.Y < MainGamePanel.height - 80 - height/2){
            x = SlotManager.SlotmarginX - width/2;

        } else {
            // if basket IS in CheckOut area
            x = MainGamePanel.width - width/2;

            // Start the countdown timer if not already running
            if (!GameManager.count){
                GameManager.count=true;
                GameManager.handler.postDelayed(GameManager.runnable, 0);                               
            }

        }
    } else {

        // Basket is NOT in CheckOut area; stop countdown timer
        GameManager.count=false;
    }

     this.X = x;
 }

 public int getY() {
  return y;
 }
 public void setY(int y) {
        if (y + height/2 > MainGamePanel.height - 80){
            y = MainGamePanel.height - 80 - height/2;
        }

  this.Y = y;
 }

 public boolean isTouched() {
  return touched;
 }

 public void setTouched(boolean touched) {
  this.touched = touched;
 }

 public void draw(Canvas canvas) {
      canvas.drawBitmap(bitmap, X - width/2, Y - height/2, null);
 }

 public void handleActionDown(int eventX, int eventY) {
  if (eventX >= (X - width/ 2) && (eventX <= (X + width/2))) {
   if (eventY >= (Y - height/ 2) && (eventY <= (Y + height/ 2))) {
    // basket touched
    setTouched(true);
   } else {
    setTouched(false);
   }
  } else {
   setTouched(false);
  }

 }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T15:04:55.993

我敢打赌，您正在尝试从未完全初始化的活动开始活动。

确保在开始另一个活动之前调用了 FirstActivity.onCreate。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T07:37:33.460

该错误看起来像提供给 Intent 构造函数的上下文为空。

代码应该更像：

```
public void startLevelEnd(Context context){
     Intent myIntent = new Intent(context, LevelEndPanel.class);
     context.startActivity(myIntent);
 } 
```

确保您`startLevelEnd`使用此调用从活动中调用

```
startLevelEnd(this) 
```

如果`startLevelEnd`位于调用它的同一个 Activity 类中，请简化它：

```
public void startLevelEnd(){
     Intent myIntent = new Intent(this, LevelEndPanel.class);
     startActivity(myIntent);
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T10:33:48.310

我相当确定您必须为 Intent 中的第一个参数使用上下文，并且由于您在 startLevelEnd 方法中有一个上下文作为参数，您可以尝试

```
Intent myIntent = new Intent (context, LevelEndPanel.class);
context.startActivity(myIntent); 
```

我认为您收到 NullPointerException 是因为您的班级看不到 FirstActivity。但这取决于 startLevelEnd 方法的位置。既然你不说它在哪里，那就试试吧！

# android - 如何根据 JSONObject 中的字段对 JSONObjects 的 JSONArray 进行排序

> ID：10172040
> 
> 赞同：0
> 
> 时间：2012-04-16T09:58:36.043
> 
> 标签：android, json, sorting, arrays, alphabetical-sort

我有一个 JSONObjects 的 JSONArray。

如何根据 JSONObject 中的字符串字段对 JSONArray 字母进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:03:09.873

不要认为你可以用 JSONArray 和 JSONObject 类做到这一点。您必须反序列化为其他 Java 类并使用这些函数进行排序。

反序列化的最佳方法可能是使用 Google GSON 库：[https ://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples)

# c# - 如何引用下拉框的内部文本

> ID：10172041
> 
> 赞同：0
> 
> 时间：2012-04-16T09:58:41.557
> 
> 标签：c#, asp.net

我试图在发送短信之前检查下拉框中的特定单词这就是我所拥有的

 `````
 if (grdvHandSets.Rows[i].Cells[4].Text == "Port" && grdvHandSets.Rows[i].Cells[16].Text != String.Empty) //Only send SMS if Type = Port and ConDate isnt empty
            {
                SmsBody = string.Format("Your order has been despatched to" + lblDespatchPostCode.Text + ". via Royal Mail next day special delivery. Your number/s are due to transfer on" + grdvHandSets.Rows[i].Cells[16].Text + ". Kind Regards BPD");
                //objSms.SendSms(phonenum, SmsBody);
            } 
````  `它是我说 grdvHandSets.Rows[i].Cells[4].Text == "Port" 的第一部分，这是一个下拉框，我认为文本可以工作，但在调试时它会出现 ""....有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:04:01.127

您需要从 中的控件而`TableCell`不是单元格本身获取文本。

您可能需要`grdvHandSets.Rows[i].Cells[4].Controls[0].Text`，但单元格中可能还有其他控件。检查`grdvHandSets.Rows[i].Cells[4].Controls`您的调试器以查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:08:55.633

尝试这个：

```
var ddlTxt =  ((DropDownList)grdvHandSets.Rows[i].Cells[4].FindControl("ddlName")).SelectedItem.Text;
id(ddlTxt == "Port" && !String.IsNullOrEmpty(ddlTxt))
{
      //your msg
} 
`````

# oracle - 如何确定创建了什么索引

> ID：10172042
> 
> 赞同：1
> 
> 时间：2012-04-16T09:58:43.797
> 
> 标签：oracle

我的任务是在一位同事离开后查看 Oracle 数据库，我想知道他是否将索引创建为 B-Tree 或 Bitmap。不幸的是，我找不到能告诉我这一点的 SQL。

我希望是我愚蠢 - 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:07:25.510

您可以查询[USER_INDEXES / ALL_INDEXES / DBA_INDEXES](http://docs.oracle.com/cd/B13789_01/server.101/b10755/statviews_1061.htm#i1578369)视图
它可能是这样的：

```
SELECT index_type
FROM ALL_INDEXES
WHERE index_name = '<your_index_name>' 
```

# php - 保存到 codeigniter 中的会话表

> ID：10172047
> 
> 赞同：0
> 
> 时间：2012-04-16T09:58:59.747
> 
> 标签：php, jquery, codeigniter

我的站点使用 Session 并且我已将其配置为将信息保存到数据库中，以允许我保存大量用户数据。该站点还连接到 MySQL 和 MSSQL 数据库以检索用户信息。会话数据库在 MySQL 数据库中，这部分正在工作。

该网站的逻辑是： 1\. 用户搜索某物，搜索按钮附加到一些 jQuery 代码，该代码将搜索词发送到我的控制器中的 2 个函数。
2、函数1访问MSSQL数据库，获取数据，将查询和查询结果保存到session中，并将查询结果返回给View。3\. 函数 2 的作用完全相同，只是它查询 MySQL 数据库。

功能 1 代码执行此操作：

```
 $this->session->set_userdata('get_function1_query',$lastquery);
 $this->session->set_userdata('get_function1_result',$query->result_array()); 
```

功能 2 代码执行此操作：

```
 $this->session->set_userdata('get_function2_query',$lastquery);
 $this->session->set_userdata('get_function2_result',$query->result_array()); 
```

问题是函数 1 代码没有将数据保存到会话表中。如果我删除函数 2 代码，那么函数 1 代码就可以工作！

最后，查询的结果集很小。尽管如此，我还是将 ci_sessions 表中“user_data”字段的数据类型从 TEXT 更改为 MEDIUMTEXT，以允许将更多信息存储在那里。

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:14:52.127

将数据存储到会话中时，必须对其进行序列化。$query->result_array() 的结果是一个数组，在尝试将其存储为字符串时可能会带来一些麻烦。

尝试调用[序列化](http://php.net/manual/en/function.serialize.php)和反序列化以在将事物推入和推出会话时保持数据结构完整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:34:01.087

使用 CodeIgniter 本机会话解决了它 [http://codeigniter.com/wiki/Native_session](http://codeigniter.com/wiki/Native_session)

CodeIgniter 中的 Sessions 和 jQuery 似乎存在一些问题

# eclipse - JFace Treeviewer 刷新会产生重复的行？

> ID：10172048
> 
> 赞同：0
> 
> 时间：2012-04-16T09:59:21.607
> 
> 标签：eclipse, swt, jface

我有一个自定义的树查看器，它扩展了复合材料并将树查看器作为类成员，它与内容提供者、标签提供者和分类器相连。每当我排序时，尽管输入已排序，但它会产生多行现有元素。

有人遇到过同样的问题吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:20:30.367

在您的排序实现和/或您的内容提供者中查找错误。如果内容提供者将重复项提供给 TreeViewer，它将仅显示重复项。

# c# - 从数据表对象返回 n 行数据表格式

> ID：10172049
> 
> 赞同：0
> 
> 时间：2012-04-16T09:59:21.760
> 
> 标签：c#, c#-3.0

我正在使用以下代码将 n 行从 DataTable 返回到另一个 DataTable 对象。当第一个数据表记录来自数据库时，它工作正常，但是当我在数据表中手动添加记录时，它会崩溃并且一条消息不显示**任何行**。我已经调试过，发现`currentTable.DefaultView.ToTable().Rows.Cast<DataRow>()`这将返回空值。我编写了以下代码来从 DataTable 对象中选择 n 条记录

```
currentTable = currentTable.DefaultView.ToTable().Rows.Cast<DataRow>().Take(numberOfRecord).CopyToDataTable(); 
```

我不知道为什么当我手动创建 DataTable 并在记录来自 DataReader 到 DataTable 时工作正常时它会崩溃。

我正在使用以下代码手动创建 DataTable

```
DataTable tblCurrent = new DataTable();
//For Adding columns
for (int i = 0; i < fieldCol.Length; i++)
   tblCurrent.Columns.Add(string.Format("Column{0}", i + 1));

//for adding rows.
for (int i = (count + globalClass.sourceConnectionInfo.RowsToSkip); i < lineRows.Length; i++)
{
   DataRow newRow = tblCurrent.NewRow();
   for (int j = 0; j < fieldCol.Length; j++)
      newRow[j] = fieldCol[j];
   tblCurrent.Rows.Add(newRow);
}

//Then for selecting n records
if (currentTable.Rows.Count > 0)
   tblCurrent = tblCurrent.DefaultView.ToTable().Rows.Cast<DataRow>().Take(numberOfRecord).CopyToDataTable(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:39:15.393

检查以下代码片段，它工作正常，没有任何错误。

```
 void Main()
    {
    DataTable dt = new DataTable();
        if (dt.Columns.Count == 0)
                {
                    dt.Columns.Clear();
                    dt.Columns.AddRange(
                        new DataColumn[] 
                        {
                            new DataColumn("TStamp", typeof(DateTime)),
                            new DataColumn("C1", typeof(double)),
                            new DataColumn("C2", typeof(double)),
                            new DataColumn("C3", typeof(double))
                            //new DataColumn("Unit", typeof(string))
                        }
                        );
                }

                  Random ovValue = new Random();
                for (int i = 0; i < 10; i++)
                {
                    DataRow dnew = dt.NewRow();
                    dnew["TStamp"] = DateTime.Now.AddMonths(i);
                    dnew["C1"] = ovValue.Next(1, 100);
                    dnew["C2"] = ovValue.Next(1, 100);
                    dnew["C3"] = ovValue.Next(1, 100);
                    dt.Rows.Add(dnew);
                }
                try
                {
                int numberOfRecord = 100;
                int count = dt.Rows.Count;  
                if(numberOfRecord <= count)
                {
                dt = dt.DefaultView.ToTable().Rows.Cast<DataRow>().Take(numberOfRecord).CopyToDataTable();
                }
                else
                {
                /// No Erroe cause if you select more tested at LinqPad
                dt = dt.DefaultView.ToTable().Rows.Cast<DataRow>().Take(100).CopyToDataTable();
                }
                }
                catch(Exception ex)
                {
                Console.WriteLine("Error");
                }

     foreach(DataRow r in dt.Rows)
     {
     Console.WriteLine(r["TStamp"].ToString());
     }

    } 
```

检查您的以下代码块，可能是这使数据表中没有行。`dt.Rows.Clear();`在选择之前放入我的代码块会导致错误。

```
//for adding rows.
for (int i = (count + globalClass.sourceConnectionInfo.RowsToSkip); i < lineRows.Length; i++)
{
   DataRow newRow = tblCurrent.NewRow();
   for (int j = 0; j < fieldCol.Length; j++)
      newRow[j] = fieldCol[j];
   tblCurrent.Rows.Add(newRow);
} 
```

# jquery - 在不更改选项卡行为的情况下自动前进到 HTML 表单中的下一个字段

> ID：10172058
> 
> 赞同：2
> 
> 时间：2012-04-16T10:00:27.130
> 
> 标签：jquery, asp.net, tabs, phone-number

我有五个文本框，其顺序与下面提到的 ID 相同

1.  txt名字
2.  txt姓氏
3.  txt电子邮件地址
4.  txt电话号码
5.  txt电话号码

我想要电话号码的标签功能（txtTelcode 和 txtTelephoneNumber）。

文本框 txtTelcode 的最大长度为 5。以下是所需的功能。

当用户填写 txtTelcode 时，输入 5 位数字后，选项卡应自动转移到下一个文本框 txtTelephoneNumber。

我使用了下面的代码，它工作正常，但我面临一个问题。

```
$(document).ready(function () {
    $('#' + telcode).keyup(function () {
        if ($.trim($('#' + telcode).val()).length == "5") {
            $('#' + txtTelephoneNumber).focus();
        }
    });
}); 
```

问题是如果 txtTelcode 中已经有 5 位数字，那么当用户切换到 txtTelcode 时，此函数会自动将它们前进到 txtTelephoneNumber 而不会在 txtTelcode 中停止。这不是我想要发生的；相反，即使它完成，我也需要能够进入 txtTelcode。我该如何修改我的代码来解决这个问题，或者我还能如何实现这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T03:53:03.570

我修改了自己的代码，如下所述。如果通过获取 e.keyCode 按下 Tab，我阻止了我的代码运行。

对于 shift + tab 功能，如果通过获取 e.keyCode 按下 Shift，我会阻止我的代码运行。

```
$('#' + telcode).keyup(function (e) {
            if (e.keyCode != 16) {
                if (e.keyCode != 9) {
                    if ($.trim($('#' + telcode).val()).length == "5") {
                        $('#' + txtTelephoneNumber).focus();
                    }
                }
            }
        }); 
```

这段代码工作正常。

# winforms - 使用 DBI Schedule 甘特图时崩溃

> ID：10172060
> 
> 赞同：0
> 
> 时间：2012-04-16T10:00:33.620
> 
> 标签：winforms, dbi, gantt-chart

使用甘特图的 DBI Schedule 控件时，我们遇到了随机崩溃。下面是堆栈跟踪：

```
************** Exception Text **************
System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and     less than the size of the collection.
Parameter name: index
   at System.Collections.CollectionBase.System.Collections.IList.get_Item(Int32 index)
   at Dbi.WinControl.Schedule.ScheduleCollection.get_Item(Int32 nIndex)
   at Dbi.WinControl.Schedule.dbiSchedule.GuideLineBarSnap(Point ptPoint)
   at Dbi.WinControl.Schedule.dbiSchedule.MoveAllTimeBar(Point ptPoint, MouseEventArgs e)
   at Dbi.WinControl.Schedule.dbiSchedule.OnMouseMove(MouseEventArgs e)
   at System.Windows.Forms.Control.WmMouseMove(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

其他人有这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:26:46.950

我的错误出现在按计划执行以下操作：
1\. 创建约会
2\. 双击约会（这个弹出窗口允许您做几件事，其中之一是删除约会）
3\. 删除约会
4\. 保存
5\. 错误

我认为问题在于，虽然它正在通过回调，但日程控制仅通过与其关联的索引跟踪它正在处理的约会。约会被删除后，它会将回调链向上移动到 OnMouseUp 事件（类似于您的 OnMouseMove 事件）。在用于双击事件的索引中找不到约会时，它会吐出与您遇到的相同的错误。

不幸的是，我的解决方案有点 hack，但是该应用程序需要快速完成并且它工作：在双击事件中，发生删除后，我添加了一个约会来代替旧约会，但是有一个我们标准 NULL 日期的开始和结束日期（作为这只是一个虚拟约会的标志）。然后我覆盖了刚刚调用基类的 OnMouseUp 事件的 OnMouseUp 事件，然后搜索并删除了虚拟约会。

鉴于您最初是在大约一年前发布的，它可能对您没有用，但希望它会对某人有所帮助。

# java - 带有破折号/连字符的架构名称 i HyperSQL

> ID：10172063
> 
> 赞同：1
> 
> 时间：2012-04-16T10:00:56.580
> 
> 标签：java, testing, hsqldb

我正在为直接使用 mysql 作为数据存储的遗留应用程序编写单元测试。

我们决定的方法是将数据库访问抽象到它自己的层，然后依赖注入。我们还将使用 hsqldb 作为内存数据库（出于速度原因）为该层编写测试。

当前代码使用名称中带有破折号的模式，据我所知，hypersql 没有任何方法可以逃避它？

我是否需要将模式名称注入数据库层，或者是否有某种方法可以配置 hsqldb 以接受破折号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:56:07.747

假设您的数据库访问代码正在使用类似的东西`SELECT * FROM schema-name.tablename`，或者`SCHEMA-NAME.tablename`任何字符大小写变体，那么您应该将它与 HyperSQL 一起使用：

```
CREATE SCHEMA "SCHEMA-NAME" AUTHORIZATION DBA

and

SELECT * FROM "SCHEMA-NAME".tablename 
```

如果您的所有数据都在同一个模式中，那么您只需将此模式设置为默认模式，并避免在 SQL 查询中使用“SCHEMA-NAME”。

# python - 如何更改pygobject“gtk3”中textview的背景？

> ID：10172065
> 
> 赞同：2
> 
> 时间：2012-04-16T10:01:04.223
> 
> 标签：python, gtk3, pygobject

我正在使用 python 在 gtk 3 中编写文本编辑器。在 gtk 2 中，我曾经 `self.modify_base(Gtk.StateType.NORMAL, Gtk.gdk.Color(bg))` 在 PyGObject 中做我认为它必须对样式上下文做一些事情，但我不确定什么是正确的方法，我在网上只找到了这个文档，但这还不够： 我认为的[python gtk3 教程](http://readthedocs.org/docs/python-gtk-3-tutorial/en/latest/introduction.html)这段代码可能是它的开始：

```
 context = self.get_style_context()
    context.set_background(Gtk.STYLE_PROPERTY_BACKGROUND_COLOR) 
```

所以有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T00:35:37.563

i found the answer, first thing you gotta import Gdk.

```
from gi.repository import Gdk 
```

supposing that Gtk.TextView instance is called doc

```
doc.override_background_color(Gtk.StateFlags.NORMAL, Gdk.RGBA(0, 0, 0, 1)) 
```

change the Gdk.RGBA(0, 0, 0, 1) as you wish

rgba, each value lies between 0.0 and 0.1, r stands for red, g for green, b for blue and a stands for alpha.

# .net - 在.Net / XSL中用常规字母替换特殊字符？

> ID：10172068
> 
> 赞同：1
> 
> 时间：2012-04-16T10:01:16.253
> 
> 标签：.net, xslt, replace, biztalk

我正在尝试想出一个很好的方法来用 BizTalk 中的基本字母替换特殊字符，如 ã、û、ü 等。目前我正在使用以下 XSL 表单：

```
<xsl:template match="text()">
    <xsl:call-template name="ReplaceChars">
        <xsl:with-param name="Input" select="."></xsl:with-param>
    </xsl:call-template>
</xsl:template>

<xsl:variable name="OddChars">ÄÖÅÜÉäöåüé</xsl:variable>
<xsl:variable name="RegChars">AOAUEaoaue</xsl:variable>

<!-- Replaces odd characters with regular ones  -->
<xsl:template name="ReplaceChars">
    <xsl:param name="Input" />
    <xsl:value-of select="translate($Input, $OddChars, $RegChars)"/>
</xsl:template> 
```

以上工作正常。我的问题是：有没有更好或更“聪明”的方式来做到这一点？我用谷歌找不到任何明智的东西。我正在考虑使用 .Net 内联代码来简单地在文本上强制使用另一种文化，以自动从基本字符中去除特殊符号。但我似乎也无法让它发挥作用。

基本上，我不想创建一个应用程序，您必须不断更新字符列表并冒一个未定义的新特殊字符的风险，通过并在接收应用程序上导致错误。但是我有选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:48:06.333

另一种选择是使用正则表达式来替换您想要的字符。

更重要的是，您确实意识到以这种方式映射字符可能会引起一些混乱，对吧？例如，日耳曼语言将 ä 映射到 ae、ü 到 ue 和 ö 到 oe，映射到 a、u 和 o 会改变某些单词的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:28:35.637

> 我的问题是：有没有更好或更“聪明”的方式来做到这一点？
> 
> ...
> 
> 基本上，我不想创建一个应用程序，您必须不断更新字符列表并冒一个未定义的新特殊字符的风险，通过并导致接收应用程序出错。但是我有选择吗？

**没有“更聪明的方式”，因为您没有提供“特殊字符”是什么的定义，也没有提供如何生成它的替换的定义**。

事实上，正如@msam 所指出的，不同的语言可能有不同的替换相同字符的规则。

使此代码更灵活的一种方法是将所有“特殊字符”及其相应“替换”的集合放入单独的 XML 文件中。这样，代码将永远不必修改。

# jasper-reports - 溢出时不显示子报告

> ID：10172074
> 
> 赞同：0
> 
> 时间：2012-04-16T10:01:28.773
> 
> 标签：jasper-reports, ireport

有时会出现如下错误：

```
net.sf.jasperreports.engine.JRRuntimeException: Subreport overflowed on a band that does not support overflow. 
```

子报告需要进行哪些必要的更改才能最小化相同的内容？

有时当数据溢出时它不会显示子报表，而是在`iReport`.

属性设置如下：

子报表属性：

```
Print when detail overflow : true
position: float
stretch type :relative to tallest obj 
```

子报告中的文本字段：

```
stretch with overflow : true
Print when detail overflow : true
position: float
stretch type :relative to tallest obj 
```

请建议一些东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:24:26.277

尝试将详细信息带的“拆分类型”属性更改为“拉伸”，看看是否有效....只有当您在不支持拉伸类型的带中有子报告时，您才会收到您提到的错误消息。 ..但是在您的情况下，您说您在详细信息带中有子报告，因此它应该可以工作....

# c# - 获取除 .zip 之外的所有文件

> ID：10172075
> 
> 赞同：2
> 
> 时间：2012-04-16T10:01:31.510
> 
> 标签：c#, file, loops, zip

这可能是一个简单的问题，但是我如何获取文件夹中除`.zip`扩展名之外的所有文件。我有一个`foreach`循环如下：

```
foreach (DirectoryInfo directory in directories)
{
    foreach (FileInfo file in directory.GetFiles("*.*"))
    {
    }
} 
```

我应该`if`在第二个循环中做一个声明并检查`if (file.Name.contains("zip")) then continue`还是有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:04:51.713

`FileInfo`有一个属性`Extension`，它将为您提供代表每个文件扩展名的字符串。

**编辑：** 您可以使用此 LINQ 查询来简化您的代码：

```
IEnumerable<FileInfo> files = directory.GetFiles("*.*").Where(file => !string.Equals(file.Extension, ".zip", StringComparison.InvariantCultureIgnoreCase)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T10:08:50.133

从 .NET 4.0 开始，您可以使用[`Directory.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx)：

```
List<string> files = Directory.EnumerateFiles("C:\\temp", "*.*", 
                                              SearchOption.AllDirectories)
                       .Where(n => Path.GetExtension(n) != ".txt").ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T10:05:24.963

不要检查名称中的 zip。不应在其中使用`FileInfo.Extension`或传递名称`Path.GetExtension(filename)``.zip`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T10:08:12.583

你可以试试这段代码

```
public staticList<FileInfo> GetFiles(string folder, string includeMask, string     excludeMask, SortOrder sortOrder, SearchOption searchOption)
{
DirectoryInfo folderDirectoryInfo = newDirectoryInfo(folder);
List<FileInfo> files = newList<FileInfo>(folderDirectoryInfo.GetFiles(includeMask,  searchOption));

stringexcludeMaskRegEx = FileSystemHelper.WildcardToRegex(excludeMask);
// exclude files
files = (fromfile infiles
         where!Regex.IsMatch(file.Name, excludeMaskRegEx) 
         selectfile).ToList<FileInfo>();
if(files.Count > 0)
{
    switch(sortOrder)
    {
        //somecode
    }
  }
  returnfiles;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T10:18:58.493

使用 LINQ：

```
static List<string> GetNonZipFiles(string path)
        {
            return Directory.GetFiles(path).Where(x => !x.EndsWith(".zip")).ToList();
        } 
```

# javascript - Google Chrome Javascript 调试问题

> ID：10172080
> 
> 赞同：0
> 
> 时间：2012-04-16T10:01:42.153
> 
> 标签：javascript, debugging, google-chrome

过去，当我在 Google Chrome 中的断点处停止并将鼠标悬停在变量上时，会弹出一个显示该变量值的弹出窗口。出于某种原因，这种情况已经停止发生。谁能想到什么可能阻止了这种行为以及我如何能够恢复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:00:25.703

这似乎是 Chrome 的间歇性问题，有时是由错误的范围引起的，但并非总是如此……有时 Chrome 只是固执，没有明显的原因不显示工具提示变量评估。我建议尝试关闭并打开开发者工具，和/或关闭并打开 Chrome。它可能会让它工作。如果失败，请使用 Firefox。;-)

我的刚开始工作，没有明显的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:09:17.543

有时它会挂起并且不显示变量的工具提示，但这可以通过关闭/打开调试器来修复。

可能还有另一个原因。您在一个范围内，但试图从另一个范围访问变量。

```
arr.forEach(function(e){ // breakpoint is here
  e.doSeomthing(); // but `e` in inner scope is not defined
}); 
```

从外部范围访问属性也是如此。对于后者，可以打开调用堆栈并移动到适当的调用深度和范围。

# sql - 如何在 ORACLE Data Modeler 上创建继承

> ID：10172082
> 
> 赞同：3
> 
> 时间：2012-04-16T10:01:52.760
> 
> 标签：sql, oracle, data-modeling

我无法在 Oracle SQL Data Modeler（v3.1，最新版本）中创建实体继承。

另一个问题：如何创建结构化类型？

有人可以帮忙吗？我试过谷歌和软件里面的帮助，我没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-29T07:00:24.353

最好的方法是创建一个子类型表，其主键是超类型表的外键。该子类型的任何新列都会添加到此表中。

这种模式被称为“亚型分离”。另外两种模式是子类型分区（将超类型字段复制到子类型表中，并且不为子类型实例创建超类型记录）和子类型吸收（将可为空的子类型字段添加到超类型表中）。每种模式都有它更可取的情况。

# php - 从数组中取消链接（）

> ID：10172083
> 
> 赞同：0
> 
> 时间：2012-04-16T10:02:08.197
> 
> 标签：php, mysql, arrays

不太了解在数组中的每个项目上运行函数，这对 PHP 来说还是很新的，下面`$pic_loc`是来自 MySQL 的数据数组，其中包含与执行的任何搜索条件匹配的图像的路径和文件名。

试图让该`unlink`功能在它找到的每个人上运行。没有错误返回。我认为这不是`foreach`正确的方法，有人能指出我正确的方向吗？

```
 $pic_loc = $cell_pictures['pic_loc']; //gathers an array from the database of files locations

    $pics_to_delete .= "../../".$pic_loc; //corrects the directory

    foreach($pics_to_delete as $pics_being_deleted) //deletes all pictures found
    {

    unlink($pics_being_deleted);

    } 
```

编辑：我对这两个答案都做了很多修改，我知道我可以删除 2 层以上的文件，因为我可以毫无问题地对单个文件执行此操作。这就是我目前正在做的事情，我摆脱了`while()`循环，认为这可能导致 foreach 运行出现问题：

```
$data_array2 = mysql_query("SELECT * FROM pictures WHERE user_id = '".$id."'");
$cell_pictures = mysql_fetch_array($data_array2);

foreach($cell_pictures['pic_loc'] as $pics_being_deleted) //deletes all pictures found
{

unlink("../../".$pics_being_deleted);

} 
```

这是它现在返回的错误：

```
Warning: Invalid argument supplied for foreach() // on the line that the foreach is on 
```

编辑：好的，这很糟糕，但我明白了！！！你会认为来自查询的数据是一个数组，但实际上你必须将它设置为一个数组。我是这样做的：

```
$data_array2 = mysql_query("SELECT pic_loc FROM pictures WHERE user_id = '".$id."'");

while($cell_pictures = mysql_fetch_array($data_array2))
{
$the_pics = $cell_pictures['pic_loc'];
$pics_as_array = array($the_pics);
}

foreach($pics_as_array as $pics_being_deleted) 
{

unlink("../../".$pics_being_deleted);

} 
```

这很好用。非常感谢您花时间阅读本文！-麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:08:36.890

实际上`foreach`对于您想要做的事情完全没问题。

但是，您需要将一些逻辑放在*迭代*中。让我们来看看：

```
$directory = realpath("../../"); // the directory where files are placed
foreach ($pics_to_delete as $basename) //deletes all pictures found
{
    $path = sprtinf('%s/%s', $directory, $basename);
    unlink($path);
} 
```

更好的选择是反其道而行之。首先获取目录和其中的所有文件，然后根据要删除的文件过滤该列表。仅当名称匹配时，继续：

```
$dir = new  DirectoryIterator($path);
$toDelete = new DeleteFilter($dir, $pics_to_delete);
foreach ($toDelete as $file)
{
    printf("Delete: %s\n", $file->getPathname());
    unlink($file->getPathname());
} 
```

`DirectoryIterator`随 PHP 一起提供的，是`DeleteFilter`一个`FilterIterator`确保只`$pics_to_delete`返回真正匹配的文件和来自数组的条目的小文件：

```
class DeleteFilter extends FilterIterator
{
    private $filenames;

    public function __construct(Iterator $iterator, array $filenames)
    {
        $this->filenames = $filenames;
        parent::__construct($iterator);
    }

    public function accept()
    {
        $current = $this->getInnerIterator()->current();
        if (!($current instanceof SplFileInfo)) {
            return FALSE;
        }
        if (!$current->isFile()) {
            return FALSE;
        }
        return in_array($current->getBasename(), $this->filenames);
    }
} 
```

您不需要那个过滤器迭代器，而是可以在内部编写该逻辑`foreach`，但是我认为这个更流畅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:07:40.797

如果 $cell_pictures['pic_loc'] 是要删除的文件数组，那么

```
foreach($cell_pictures['pic_loc'] as $pics_being_deleted) //deletes all pictures found
{

unlink("../../".$pics_being_deleted);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:16:46.323

有时，网络主机设置是您无权删除或访问任何高于您的文件夹的文件。在你的情况下，你要向上两个文件夹。

您可能需要重组您的程序，以便将图片存储在试图删除它们的文件下方。

此外，请确保您传递正确的文件名字符串以取消链接。如果不确定，可以回显文件名进行测试。

# php - 我可以使用 Google API 查找最近的城市吗？

> ID：10172084
> 
> 赞同：5
> 
> 时间：2012-04-16T10:02:24.803
> 
> 标签：php, google-maps, google-geocoding-api

我正在做一个 php 项目，我想从指定位置查找 100 公里范围内的 3 个城市并将其存储到我的数据库中。我正在为此考虑使用 Google API 地理编码。我不知道我是否能够使用它。但是我在 Geocoding API 的条款和条件页面中找到了一行

> 地理编码 API 只能与谷歌地图一起使用；禁止在未在地图上显示的情况下对结果进行地理编码。

这是什么意思？我可以使用 API 来获取城市吗？有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:22:45.577

在我看来，这很清楚：

是的，如果您要在 Google 地图上显示最近的城市，您可以使用 Geocoding API。

不，如果您不在 Google 地图上显示最近的城市，则不能使用 Geocoding API。

如果您将存储结果并在以后使用它没有区别。

顺便提一句。请注意，雅虎有相同的使用政策。

更新：您可以使用[GeoNames](http://www.geonames.org/)看[这里](https://stackoverflow.com/questions/6159074/given-the-lat-long-coordinates-how-can-we-find-out-the-city-country/6355183#6355183)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-03T13:18:48.873

我编写了一个代码片段，允许您通过结合**Google Maps Geocoding API**和**GeoNames.org API**来检索所有附近的城市（除了**file_get_contents**，您还可以执行**cURL**请求）。

```
/*
 * Get cities based on city name and radius in KM
 */

// get geocode object as array from The Google Maps Geocoding API
$geocodeObject = json_decode(file_get_contents('https://maps.googleapis.com/maps/api/geocode/json?address={CITY NAME},{COUNTRY CODE}'), true);

// get latitude and longitude from geocode object
$latitude = $geocodeObject['results'][0]['geometry']['location']['lat'];
$longitude = $geocodeObject['results'][0]['geometry']['location']['lng'];

// set request options
$responseStyle = 'short'; // the length of the response
$citySize = 'cities15000'; // the minimal number of citizens a city must have
$radius = 30; // the radius in KM
$maxRows = 30; // the maximum number of rows to retrieve
$username = '{YOUR USERNAME}'; // the username of your GeoNames account

// get nearby cities based on range as array from The GeoNames API
$nearbyCities = json_decode(file_get_contents('http://api.geonames.org/findNearbyPlaceNameJSON?lat='.$latitude.'&lng='.$longitude.'&style='.$responseStyle.'&cities='.$citySize.'&radius='.$radius.'&maxRows='.$maxRows.'&username='.$username, true));

// foreach nearby city get city details
foreach($nearbyCities->geonames as $cityDetails)
{
    // do something per nearby city
} 
```

> 请注意您的请求数量，因为 API 是有限的

有关 API 的更多信息，请访问以下网址：

*   [https://developers.google.com/maps/documentation/geocoding/intro#GeocodingResponses](https://developers.google.com/maps/documentation/geocoding/intro#GeocodingResponses)
*   [http://www.geonames.org/export/web-services.html](http://www.geonames.org/export/web-services.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:14:42.647

这一切都归结为您想要实现的目标。由于您仍然需要使用数据库来存储此位置，因此在数据库中获取和存储应用程序试图覆盖的区域的数据（纬度和经度）不是更好吗？

# windows-phone-7 - 在电话事件上运行 Windows Phone 应用程序（如通话结束/拒绝）

> ID：10172087
> 
> 赞同：1
> 
> 时间：2012-04-16T10:02:34.503
> 
> 标签：windows-phone-7

呼叫被拒绝时是否可以获得通知/事件/运行应用程序？如果是这样，是否有可能获得被拒绝的号码？（我知道无法访问通话记录）。

奖金问题。我在哪里可以找到有关电话事件/通知的文档（Microsoft UI 团队花了很多时间为开发人员设计指南，而很少设计他们自己的网站，因此您实际上可以找到一些东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:05:25.680

就 API 而言，这是不可能的，我不知道还有其他方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:05:43.247

不幸的是，这在 wp7 Mango 版本中是不可能的

# javascript - 设置 ContentPane 内容时如何保留旧内容

> ID：10172088
> 
> 赞同：1
> 
> 时间：2012-04-16T10:02:41.153
> 
> 标签：javascript, dom, dojo, contentpane

`content`显然，Dojo 在设置ContentPane的属性时做了一些清理工作。例如：如果我设置`content`为小部件 A，然后设置`content`为小部件 B，则小部件 A 的`domNode`值为空。我想设置`content`回小部件 A，但 ContentPane 充满了“未定义”，因为小部件 A 已`domNode`被清理。

**有什么方法可以防止 ContentPane 的旧内容被清理？或者有没有一种方法可以在 ContentPane 中交换不同的小部件而不使用`setContent()`or `set('content', ...)`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:26:06.273

使用 a`StackContainer`作为内容，然后将每个小部件添加到堆栈中。

[http://dojotoolkit.org/reference-guide/1.7/dijit/layout/StackContainer.html](http://dojotoolkit.org/reference-guide/1.7/dijit/layout/StackContainer.html)

# sql-server - 同步框架选择更改存储过程 - 性能/可扩展性/改进

> ID：10172090
> 
> 赞同：0
> 
> 时间：2012-04-16T10:02:48.627
> 
> 标签：sql-server, performance, sql-server-2008, scalability, microsoft-sync-framework

我正在使用 Microsoft Sync Framework 2.1 将大量并发最终用户与中央数据库服务器同步。

环境：

*   1500 个并发客户端连接到 1 个中央数据库服务器
*   Web 服务将用作服务器端 SyncProvider
*   有多个表超过 2.000.000 条记录

**问题**
SelectChanges SP 经常超时 (CommandTimeout = 60)。
它可能很慢的原因：

*   Sync Framework 在 local_update_peer_timestamp 列上创建索引，但根本不使用它。

    *   即使在重新创建统计信息后，也不会使用索引
    *   索引提示会导致完整的索引扫描而不是查找操作（即使给定的时间戳远大于最大的 local_update_peer_timestamp 值）

**问题** 在我看来，事情正在变得非常糟糕。MS Sql Server 2008 R2 应该能够创建正确的执行计划

*   如何改进选择更改？
    *   考虑到可以增长超过 8.000.000 条记录的表
    *   确保 SQL Server 使用索引来构建执行计划
*   这个查询太慢还有其他潜在原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:12:38.623

上有一个`CommandTimeout`属性`SqlSyncProvider`，所以如果你不关心它需要多少时间，你可以通过将命令超时设置为超过最长的 selectchanges 查询所用的时间来解决这个问题。

我也注意到 selectchanges 存储过程的性能问题。SQL 在查询跟踪表方面似乎很慢。我怀疑这至少部分是内存压力，因为在正常操作期间您不会查询跟踪表。他们会有更新/插入，但我认为这些不会导致正确索引的正确部分加载到内存中。在没有正常操作发生的隔离环境中，selectchanges 过程要快得多。

您可以尝试将列添加到跟踪表（通过将它们添加到过滤器列的列表中）并设置自定义索引并修改存储过程以使用您的自定义索引。这样做我能够得到一些改进，但可能不足以证明所涉及的所有努力是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T19:02:22.460

如果您使用过滤子句，则过滤条件进入 where 子句，这意味着 SQL Server 可能会选择对 select 中的每一行执行 where 子句，从而导致严重的性能问题。

在这种情况下，您可以创建自己的 selectchanges sproc 版本，它在连接中应用过滤条件，这将提高性能。

# javascript - 如何使用用户脚本检索 document.write 的参数

> ID：10172092
> 
> 赞同：0
> 
> 时间：2012-04-16T10:02:49.747
> 
> 标签：javascript, dom, userscripts

在我的项目中，我应该识别可以通过 document.write 在脚本中完成的动态创建的标签。我为 document.write 创建了一个钩子，但它没有检索所有 document.write 函数。我的代码如下

**更新：**

```
var oldDocumentWrite = document.write; 
document.write      = function (text) 
{        
  console.log(text);
} 
```

其中 text 是 document.write 的参数。

我将其包含在我的用户脚本中。我怎样才能得到document.write的参数。我的代码有什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:03:10.363

我使用下面的代码再次尝试了这个，现在我得到了所有的 document.write 方法。

```
 var oldDocumentWrite = document.write; 
 document.write      = function (str) 
 {        
    var elem = oldDocumentWrite.apply (document,arguments); 
    console.log("Document.write Parameters:",str);
    return elem;
 } 
```

# c# - 查询太复杂访问异常？

> ID：10172096
> 
> 赞同：0
> 
> 时间：2012-04-16T10:03:22.000
> 
> 标签：c#, ms-access, c#-4.0

我正在使用以下功能使用 fieldId 列表动态形成查询。

```
 public List<CompareDesignGroup> GroupFields(List<string> fieldIdList)
            {
                StringBuilder sb = new StringBuilder();

                foreach (string fieldId in fieldIdList)
                {
                    sb.Append("'" + fieldId + "',");
                }

                string fieldList = sb.ToString().TrimEnd(',');

                string queryString = "";
                int i = 0;
                foreach(string fieldId in fieldIdList)
                {
                    queryString = queryString + " Select FieldID , CDGroups.Name,
 CDCaption, IIF(ISNULL(Priority),99,Priority), " + i + " from Fields LEFT OUTER 
JOIN CDGroups ON Fields.CDGroupID = CDGroups.CDGroupID 
WHERE Fields.FieldID = '" + fieldId + "' ";
                    if (i < fieldIdList.Count - 1)
                    {
                        queryString = queryString + " union ";
                    }
                    i++;
                }
                queryString = queryString + " order by 4,5 "; 
```

//DatReader 阅读部分...

```
 dataReader = settingsData.ReadSettingsData(queryString);

                if (!dataReader.HasRows)
                {
                    return null;
                }

                List<CompareDesignGroup> compareDesignGroupList = new List<CompareDesignGroup>();
                while (dataReader.Read())
                {
                    CompareDesignGroup compareDesignGroup = new CompareDesignGroup();

                    compareDesignGroup.CdGroup = dataReader["Name"].ToString();
                    compareDesignGroup.FieldId = dataReader["FieldID"].ToString();
                    compareDesignGroup.CdCaption = dataReader["CDCaption"].ToString();

                    compareDesignGroupList.Add(compareDesignGroup);
                }

                return compareDesignGroupList;
            } 
```

当我使用大量字段元素执行上述查询时，MS Access 会引发异常，因为查询太复杂并且应用程序停止执行。有没有更好的方法来写上面的查询？或者有什么办法可以避免这个异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:37:26.453

如果您查看[Microsoft Access query limits](http://www.databasedev.co.uk/access_specifications.html#content3)，您会发现可能的查询数`And`限制`Or`为 99，您的`union`工作方式类似于`Or`where 子句，因此如果您的联合数大于 99，则表示您的列表计数，它会抛出异常，但我建议尝试使用`In`而不是，`union`但如果您的查询大小很大，这将不起作用，并且您将使用分页的最佳选择，意味着将其调用为大小为 100 的列表，显示结果，在表示结果期间再次为接下来的 100 个项目调用它，依此类推。

# razor - Nancy：Razor View Engine：是否支持 _ViewStart 文件？

> ID：10172098
> 
> 赞同：4
> 
> 时间：2012-04-16T10:03:25.230
> 
> 标签：razor, nancy

你能告诉我Nancy 是否支持特殊的 Razor 文件**_ViewStart.cshtml吗？**我知道它被安排包含（[在这里](https://groups.google.com/forum/#!topic/nancy-web-framework/X0sYTPuaR-U)）。你能告诉我它现在是否可用吗？它目前不适合我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-09T12:58:11.577

**爆炸新闻**

从 Nancy 0.20 版开始支持 _ViewStart

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T10:53:34.227

不。（还）尚未内置对此的支持。即将发布的 0.11 版本将包含 @helper 函数和更好的 HtmlHelpers 可扩展性

# ruby - Nokogiri sax 解析根属性

> ID：10172100
> 
> 赞同：-1
> 
> 时间：2012-04-16T10:03:36.343
> 
> 标签：ruby, nokogiri, sax, saxparser

是否可以在 Nokogiri SAX 解析器中解析和存储 xml 文件根属性？

如何获得根元素中的 id-value 和 expires-value？：

```
<root id="01" expires="2010-10-01">
  <aaa>Text</aaa>
  <bbb>Text</bbb>
</root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:50:18.220

就像@luis.parravicini 所说， *start_element 为每个解析的标签调用。至于根元素，它将在第一次调用该方法时出现。*

所以我做了这样的事情：

```
class MyDocument < Nokogiri::XML::SAX::Document
  def initialize
   @infodata = {}
  end

  def start_element name, attrs = []
   @attrs = attrs
   @content = ''

    if name == 'rootname'
       @infodata[:id] = Hash[@attrs]["id"]
       @content = ''
     end
   end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:50:49.047

Nokogiri 文档为您提供了有关如何使用 sax 解析器解析 xml 并获得所需内容的示例。看看这里： http: [//nokogiri.org/Nokogiri/XML/SAX/Document.html](http://nokogiri.org/Nokogiri/XML/SAX/Document.html)

# php - 查询是否设置了某些 POST 变量

> ID：10172106
> 
> 赞同：0
> 
> 时间：2012-04-16T10:03:59.323
> 
> 标签：php, mysql

我有 2 个表单都指向相同的 functions.php 页面

1 个表单有 2 个输入字段，***Vechile Type***和***Pricing***，另一个表单有 3 个输入类型，***Vechile Type*** ***Pricing***和***Coverage Region***

```
if ($_POST['vehicleType'] == 'lgv' && $_POST['pricing'] == 'fixed' ) {
    // Query 
}
else if ($_POST['vehicleType'] == 'lgv' && $_POST['pricing'] == 'pump' ) {
    // Query 
}
else if ($_POST['vehicleType'] == 'lgv' && $_POST['pricing'] == 'fixed' && $_POST['coverageRegion'] == 'national' ) {
    // Query 
}
else if ($_POST['vehicleType'] == 'lgv' && $_POST['pricing'] == 'pump' && $_POST['coverageRegion'] == 'international'  ) {
    // Query 
} 
```

现在我上面的语句不起作用，我是 PHP 新手，所以请原谅我的天真，但我只希望前 2 个查询从主页运行，其中只设置了 2 个变量，而后 2 个查询在另一种形式时运行填写。

有没有办法说如果没有设置coverageRegion，运行前2个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:19:00.847

我会这样做：

我会这样做：

```
$where = array('1 = 1');
if(isset($_POST['vehicleType'])) {
    $where[] = "vehicleType = '" . mysql_real_escape_string($_POST['vehicleType']) . "'";
}
if(isset($_POST['pricing'])) {
    $where[] = "pricing = '" . mysql_real_escape_string($_POST['pricing']) . "'";
}
if(isset($_POST['coverageRegion'])) {
    $where[] = "coverageRegion = '" . mysql_real_escape_string($_POST['coverageRegion']) . "'";
}

// some more stuff
// if(isset($_POST['integerColumn'])) {
//     $where[] = "integerColumn = " . intval($_POST['integerColumn']);
// }
// if(count($where) == 1) {
//     die("You must specify at least one search criteria");
// }

$query = 'SELECT * FROM table WHERE ' . implode(' AND ', $where); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:08:37.210

```
if (!isset($_POST['coverageRegion']))
{
    //run first two
    if ($_POST['vehicleType'] == 'lgv' && $_POST['pricing'] == 'fixed' )
    {
        // Query 
    }
    else if ($_POST['vehicleType'] == 'lgv' && $_POST['pricing'] == 'pump' )
    {
        // Query 
    }
}
else
{
    // run other two
    if ($_POST['vehicleType'] == 'lgv' && $_POST['pricing'] == 'fixed' && $_POST['coverageRegion'] == 'national' )
    {
        // Query 
    }
    else if ($_POST['vehicleType'] == 'lgv' && $_POST['pricing'] == 'pump' && $_POST['coverageRegion'] == 'international'  )
    {
        // Query 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:38:30.107

我会这样做：

```
$vehicle_types = array( 'lgv', 'hgv', 'plg', );
$pricings = array( 'fixed', 'pump', );
$regions = array( 'national', 'international', );
// Variables to search for
$params = array();
// Column names in the table
$conditions = array();

$qry = 'SELECT column1, column2, column3 FROM tablename';

// Add vehicle type to query
if ( ( isset( $_POST['vehicleType'] ) )
  && ( in_array( $_POST['vehicleType'], $vehicle_types ) ) ) {
    $params[] = $_POST['vehicleType'];
    $conditions[] = 'vehicleType = ?';
}

// Add pricing to query
if ( ( isset( $_POST['pricing'] ) )
  && ( in_array( $_POST['pricing'], $pricings ) ) ) {
    $params[] = $_POST['pricing'];
    $conditions[] = 'pricing = ?';
}

// Add region to query
if ( ( isset( $_POST['coverageRegion'] ) )
  && ( in_array( $_POST['coverageRegion'], $regions ) ) ) {
    $params[] = $_POST['coverageRegion'];
    $conditions[] = 'region = ?';
}

if ( count( $params ) ) {
    $qry .= ' WHERE ' . implode( ' AND ', $conditions );
    // Connect to database using PDO
    $db = new PDO( 'mysql:dbname=testdb;host=127.0.0.1', 'user', 'pass' );
    $stmt = $db->prepare( $qry );
    $stmt->execute( $params );
    $result = $stmt->fetchAll();
    print_r( $result );
} 
```

好处：

*   没有`if/else`意大利面
*   将来易于添加更多选项
*   `mysql_real_escape_string`由于`PDO`准备好的报表，因此不需要
*   检查是否只接受允许的变量`$_POST`

# java - 在像 {resource}/ 这样的简单 servlet 中制作 REST 类型的 url

> ID：10172116
> 
> 赞同：0
> 
> 时间：2012-04-16T10:04:23.590
> 
> 标签：java, rest, servlets

我正在制作一个基于 REST 的 Web 服务。

首先我想看到如下网址

```
 /{resource}
 /{resource}/<id>
 /{resource1}/<id>/{resource2}
 /{resource1}/<id>/{resource2}/<id> 
```

如何制作如上所述的servlet url..？我不喜欢使用任何框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:26:19.473

Servlet API 不为这种映射提供任何特殊支持。

如果您想在没有第三方库的情况下执行此操作，则需要将您的 servlet 映射到`/{resource}`，获取路径的其余部分`request.getPathInfo()`并根据该值实现进一步的路由：

```
<servlet-mapping>
    ...
    <url-pattern>/resource</url-pattern>
</servlet-mapping> 
```

.

```
public class ResourceServlet extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response) {
        String path = request.getPathInfo();
        if (path == null) { // It's /resource
            ...
        } else if (path.matches("/\\d+")) { // It's /resources/<id> with integer id
            ...
        }
    }
} 
```

但是，最好不要重新发明轮子并使用其中一种 JAX-RS 实现。

# jquery - 带有 jquery 和 foreach 的不同图像复选框

> ID：10172117
> 
> 赞同：0
> 
> 时间：2012-04-16T10:04:26.287
> 
> 标签：jquery

我想制作一个复选框表单，它同时具有鼠标悬停图像和带有 jquery 的选中图像功能。我成功地制作了这个功能，但没有正常工作。

这是我的 html 表单，使用 foreach。它在每个 div 上显示不同的图像。

```
 <form name='frm_edit_interest' action='/home/edit_interest' method='POST'>
            <?
                if(count($list) <= 0):
                    echo 'error';
                else:
                    $i = 0;
                    foreach($list as $row):
                        ++$i;
            ?>  
                <div class='w_select_td'>
                    <div class='w_select_title_div'>
                        <span class='w_select_title_text'><?=$row['i_keyword']?></span>
                    </div>
                    <div class='w_select_img_div'>
                        <label for="w_interest" class="imag_box_<?=$row['i_idx']?>">
                            <img src="/images/account/ws_<?=$row['i_idx']?>.png"/ style='cursor:pointer;border:solid 1px #eee;'>
                            <input name="chk[]" value='<?=$row['i_idx']?>' type="checkbox" style="display:none">
                        </label>
                    </div>
                </div>
            <?
                    endforeach;
                endif;
            ?>  

            </div>
            </div>

            <div id='w_next_btn_div'>
                <input id='btn_login' name='btn_login' type='submit' class='button' value='submit' />
            </div>
        </form> 
```

这是jquery脚本：

```
<script>
$(document).ready(function () {

    var idx = idx

    $('.imag_box'+idx+' img').hover(
         function () {
             if($(this).next().val() !== "1") {
                 $(this).attr('src', '/images/account/ws_'+idx+'_hover.png');
             }
          },
         function () {
             if($(this).next().val() !== "1") {
                 $(this).attr('src', '/images/account/ws_'+idx+'.png');
             }
         }
      );

    $(".imag_box"+idx+" img").click(function() {
        if($(this).next().val() !== "1") {
             $(this).attr("src", "/images/account/ws_"+idx+"_checked.png");
             $(this).next().val("1");
        } else {
             $(this).attr("src", "/images/account/ws_"+idx+".png");
             $(this).next().val("0");
        }
    });
});
</script> 
```

我根据唯一索引号中的数字制作了不同的图像来加载它们。我保存了包含数字的不同图像文件，以便轻松加载。

问题是当用户将鼠标放在图像上时，我无法做到这一点，图像会自动更改为正确的图像。

因此，当用户将鼠标放在每个图像上时，它必须向 jquery 发送唯一的索引号。

你能给我一个建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:10:38.307

你试过这个，从值字段中获取索引

```
<script>
$(document).ready(function () {

    $('.imag_box img').hover(
         function () {
             if($(this).next().val() !== "1") {
                 $(this).attr('src', '/images/account/ws_'+ $(this).val() +'_hover.png');
             }
          },
         function () {
             if($(this).next().val() !== "1") {
                 $(this).attr('src', '/images/account/ws_'+ $(this).val() +'.png');
             }
         }
      );

    $(".imag_box img").click(function() {
        if($(this).next().val() !== "1") {
             $(this).attr("src", "/images/account/ws_"+ $(this).val() +"_checked.png");
             $(this).next().val("1");
        } else {
             $(this).attr("src", "/images/account/ws_"+ $(this).val() +".png");
             $(this).next().val("0");
        }
    });
});
</script> 
```

# silverlight-4.0 - 鼠标悬停时使用 VSM 更改 TextBlock 前景？

> ID：10172123
> 
> 赞同：1
> 
> 时间：2012-04-16T10:04:37.250
> 
> 标签：silverlight-4.0, expression-blend-4

任何人都知道我如何使用 VSM 将文本块文本颜色从“红色”更改为“蓝色”？文本块是否有像 Button、TextBox 等模板？感谢您的帮助，期待您的回复...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:37:35.543

您可以使用文本框并在鼠标悬停时设置颜色背景

```
<TextBox TextWrapping="Wrap" Background="#FFBA2C2C" Height="20">
        <TextBox.Template>
            <ControlTemplate>
                <StackPanel Orientation="Horizontal">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation  To="Red" Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="textBlock" d:IsOptimized="True" Duration="0"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <TextBlock x:Name="textBlock" Text="Click Me"/>
                    </StackPanel>
            </ControlTemplate>
        </TextBox.Template>
    </TextBox> 
```

# lwuit - LWUIT：将 GIF 图像添加到标签

> ID：10172125
> 
> 赞同：1
> 
> 时间：2012-04-16T10:04:50.003
> 
> 标签：lwuit, lwuit-resource-editor

我正在尝试将 GIF 图像添加到标签（LWUIT 1.5）。当我将 Gif 图像添加到“GIF 动画”时，它会创建时间线图像（单个图像）。请帮助我了解如何将完整的 GIF 动画图像添加到标签。

注意：使用资源编辑器 1.3 时同样可以正常工作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T17:55:04.460

您会得到一系列图像，但其中一个是时间线，应该可以很好地制作动画。与创建单个图像的旧 LWUIT 不同，时间线使用不同的技术来获取 gif 的工作。选择动画图像时，这对我有用。

# google-app-engine - 如何按时成功运行 cron 作业？

> ID：10172129
> 
> 赞同：0
> 
> 时间：2012-04-16T10:04:58.223
> 
> 标签：google-app-engine

我写了一个 servlet ，从 cron 访问并上传到服务器。我写的 cron 任务是每天 15:25 运行 servlet。当我运行时，它显示消息为“迟到 55 秒尚未运行”。你能告诉我如何在 Time 上运行这个 cron 并取得成功吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T10:23:13.053

您是否在 servlet 的末尾设置了 OK http 响应？像那样 ：

```
//Set Http Response To 200
res.setStatus(HttpServletResponse.SC_OK);
//Set ContentType
res.setContentType("text/plain"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:10:58.400

你设置`timezone`正确了吗？我记得 GAE 使用 UTC 作为其默认时区（不确定），但是当您想在您所在国家的正确时间运行您的 cron 作业时应该设置它。

一个简单的例子：

```
cron:
  description: cron description foo
  url: /your/cron/job/api
  schedule: every day 15:25
  timezone: Asia/Shanghai 
```

# sencha-touch - 如何从 sencha touch 2 中的 json 数据中检索值

> ID：10172134
> 
> 赞同：0
> 
> 时间：2012-04-16T10:05:10.650
> 
> 标签：sencha-touch, jsonp, sencha-touch-2

我的模型是：

```
Ext.define('GS.model.user', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'id',
        type: 'string'
    }, {
        name: 'username',
        type: 'string'
    }, {
        name: 'email',
        type: 'string'
    }]
}); 
```

我的商店代码是：

```
Ext.define('GS.store.userstore', {
    extend: 'Ext.data.Store',
    requires: 'GS.model.user',
    config: {
        model: 'GS.model.user',
        autoLoad: true,
        // data: [],
        proxy: {
            type: 'ajax',
            url: '/app/mydata.json',
            reader: {
                type: 'json',
                root: 'users'
            }
        }
    },
    listeners: {
        load: function(store) {
            alert(store.getCount());
            console.log(store.getAt[0]);
        }
    }
}); 
```

查看代码：

```
Ext.define('GS.view.userlist', {
    extend: 'Ext.form.Panel',
    xtype: 'userpanel',
    requires: ['GS.store.userstore', 'Ext.form.Panel'],

    config: {
        itemTpl: '{store.get("id"),{sotre.get("username")},{store.get("email")}',
        store: 'userstore'
    }
}); 
```

json数据：

```
[{
    "users": [{
        "id": "1001",
        "username": "user1",
        "email": "abc@unisys.com"
    }, {
        "id": "1002",
        "username": "user2",
        "email": "abcd@unisys.com"
    }, {
        "id": "1003",
        "username": "user3",
        "email": "abce@unisys.com"
    }, {
        "id": "1004",
        "username": "user4",
        "email": "abcf@unisys.com"
    }]
}] 
```

在谷歌家务中运行它后，我收到错误：

```
OPTIONS file:///D:/app/mydata.json?_dc=1334569840508&page=1&start=0&limit=25 
```

资源加载失败。

请告诉我这怎么可能？我如何检索 json 数据值并将其填充为列表。帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:27:58.997

`localhost`在 url 中使用来运行你的应用程序

例如：

`http://localhost/your_app`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:28:01.127

您的 json 数据似乎不正确。

“用户”不应该在引号之间，并且对于所有“id”和“username”和“email”语句同样适用：

json数据：

```
{
   users:
      [
         { id: "1001", username: "user1" , email:"abc@unisys.com"},
         { id: "1002", username: "user2" , email:"abcd@unisys.com"},
         { id: "1003", username: "user3" , email:"abce@unisys.com"},
         { id: "1004", username: "user4" , email:"abcf@unisys.com"}
      ]
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T13:17:59.170

路径错了吗？对我来说，它甚至找不到文件。

```
proxy: {
        type: 'ajax',
        url : 'app/mydata.json', // CHANGE THIS TO 'app/mydata.json'
        reader: {
            type: 'json',
            root: 'users'
           }} }, 
```

我将您的 json 放入 jsonlint.org 并通过了，所以我认为这不是问题。根据错误，我认为您的路径不正确。如果我在上面发布的内容不起作用，我会将 mydata.json 复制到 index.html 所在的根文件夹中，并将代理 url 配置为 url: 'mydata.json',

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T21:33:29.950

您的代码有两个问题：

1.  您的 JSON 有效，但 JSON 阅读器无法读取它，因为它是一个数组。如果您删除它`[`，`]`它将起作用：

    ```
    {
        "users": [
            {
                "id": "1001",
                "username": "user1",
                "email": "abc@unisys.com"
            },
           ...
        ]
    } 
    ```

2.  在您的阅读器中，您需要使用`rootProperty`- not `root`：

    ```
    reader: {
        type: 'json',
        rootProperty: 'users'
    } 
    ```

3.  在您的内部`itemTpl`，您可以直接使用`{fieldName}`- 您不需要使用`store.get('xxx')`：

    ```
    itemTpl: '{username}, {email}' 
    ```

至于文件没有加载；我不知道。尝试其他浏览器，如果仍然无法正常工作，请再次检查该文件是否确实存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T11:35:48.877

将 json 文件托管在某个位置，应该可以通过 http.ie 访问该文件。将文件放在本地计算机上运行的任何服务器中，并在存储代理的 url 部分中提供 URL。

# javascript - 在 todos.js web-app 中使用 Backbone.js 对数据集合进行分页

> ID：10172135
> 
> 赞同：1
> 
> 时间：2012-04-16T10:05:13.660
> 
> 标签：javascript, backbone.js, each, underscore.js

我正在开发这个网络应用程序 todos.js，它在这个[url](http://documentcloud.github.com/backbone/docs/todos.html)上有很好的记录。

我想添加一个选项，以便每页显示有限数量的项目。

这是我的尝试，但我不确定这是否是完成这项任务的正确方法：

```
var AppView = Backbone.View.extend({

    firstPage: 0,
    perPage: 2,
    counter: 0,

......
    addOne: function addOne (todo) 
    {
        var view,
            isIntoRange;

        view = new TodoView({
            model: todo
        });

        isIntoRange = (
            this.counter >= (this.firstPage * this.perPage) 
            &&
            this.counter < (this.firstPage * this.perPage) + this.perPage   
        );

        if (isIntoRange) {             
            this.$("#todo-list").append(view.render().el);
        }
        this.counter += 1;
    },

    addAll: function() {
        Todos.each(this.addOne);
    },
  .....
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:29:47.073

话虽如此，backbone-paginator 是一个不错的选择，但我不会修改`addOne`执行此任务的方法：

相反，我将添加一个 `showTasks`可以接受两个参数的新方法：`firstPage`和`perPage`

```
 showTasks: function showTasks (firstPage, perPage)
    {
        // your code
    } 
```

然后，由于应该从链接调用此方法，因此我将使用它`backbone.router`来呈现页面：

```
 var AppRouter = Backbone.Router.extend({
       ....
       linkAction: function(firstPage, perPage){
           taskView.showTasks(firstPage, perPage);
       },
       ....
   }); 
```

# android - 使用wifi获取当前位置？

> ID：10172136
> 
> 赞同：-2
> 
> 时间：2012-04-16T10:05:18.083
> 
> 标签：android, android-wifi

如何使用 WiFi 获取当前位置？在我使用 gps 的项目中，我可以获得当前位置...如何在 android 中使用网络服务？

```
LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
LocationListener currentlocation = new CurrentLocation();
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                currentlocation); 
```

但我想要当前位置的 WiFi？任何人都可以帮助我使用 WiFi 获取当前位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:08:29.410

尝试使用[NETWORK_PROVIDER](http://developer.android.com/reference/android/location/LocationManager.html#NETWORK_PROVIDER)。

请注意，您还必须通过添加以下内容来修改您的 AndroidManifest.xml：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

# c# - 如何在richTextBox 中禁用自动滚动？

> ID：10172140
> 
> 赞同：1
> 
> 时间：2012-04-16T10:05:29.923
> 
> 标签：c#, visual-studio-2008, richtextbox, autoscroll

如何`richTextBox`通过同时启用文本选择的可能性来禁用自动滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:47:11.460

将焦点设置到另一个控件是简单的方法。

通常，您根本不希望用户看到这些更新。当您更新内容时，它往往会导致大量闪烁。大多数控件提供的样板解决方案是它们的 BeginUpdate 和 EndUpdate 方法。但是 RichTextBox 缺少它们。你可以通过一点点pinvoke来添加它们。您将在[此答案](https://stackoverflow.com/a/3282911/17034)中找到所需的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:31:59.947

Please , Make ReadOnly is true for selection text but disable for change String. Ex. : RichTextBox1.ReadOnly=True RichTextBox1.ScrollBars = RichTextBoxScrollBars.None;

# visual-studio-2010 - TFS 作为交互式进程不起作用

> ID：10172141
> 
> 赞同：0
> 
> 时间：2012-04-16T10:05:38.747
> 
> 标签：visual-studio-2010, tfs, workspace

继我之前的问题（[Watin 在我的 TFS 构建机器上不起作用](https://stackoverflow.com/questions/10126068/watin-does-not-work-on-my-tfs-build-machine)）之后，我让我的 TFS 构建了一个交互式过程。

但是，我在运行构建时收到以下错误：

```
The working folder d:\Build\Sources is already in use by the workspace 8_1_appsdev_build;myUserAccount$ on computer myComputerName. 
```

经过一番研究，我似乎需要删除我的工作区。如果尝试使用以下命令列出我的工作区，但结果表明我没有任何工作区。不知道我错过了什么。有任何想法吗？

**查看工作区命令：**

```
tf workspaces /computer: myComputerName /owner:*

No workspace matching *;* on computer myComputerName found in Team 
Foundation Server http://myComputerName:8080/tfs/production. 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:01:48.797

`tf workspaces`查看*工作区缓存*文件以提供输出。如果您`tf`以自己的身份运行，您将只能看到*您*已连接到的工作区。因此，您将看不到构建用户的工作区（无论`/owner`选项如何，它只是充当过滤器。）

`tf workspaces`以构建用户身份运行，或使用`/collection`参数强制查询服务器上的工作空间，绕过缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:52:20.580

您可以通过在具有相同帐户的构建服务器上打开 Visual Studio 或使用[TFS Sidekicks 工具](http://www.attrice.info/cm/tfs/)中的工作区 Sidekicks 来查找和删除工作区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:45:16.463

您不必删除工作区，这里显然出了点问题。该消息只是告诉您您尝试使用已被另一个工作空间使用的映射创建一个新工作空间。

例如：

*   **WorkspaceA**已经存在，它有一个映射：$\ 到 c:\pipo
*   任何使用使用 c:\pipo（或子文件夹）的映射创建**WorkspaceB**的尝试都将失败。

也许您创建了一个以前的构建定义，它使用与您尝试运行的本地路径相同的本地路径：这将以同样的方式失败。

总而言之，每个构建定义默认有一个工作区，能够使其持久化（主要是为了在获取文件期间进行速度优化），确保两个构建定义在本地不使用相同的路径。

# asp.net - Windows 2008 上 IIS 7.0 上的 ASP.Net 2.0 中出现 401.2 错误

> ID：10172142
> 
> 赞同：1
> 
> 时间：2012-04-16T10:05:38.870
> 
> 标签：asp.net, iis-7, windows-server-2008, windows-authentication

我的“ *Hello World* ”c#.Net 应用程序在我的本地 Windows 7 上运行良好。移动到我们的服务器时出现 401.2 错误。

这是我所做的（遵循一些论坛中的建议）：

1.  将匿名身份验证使用更改为应用程序拉用户
2.  创建了一个新的应用程序拉
3.  创建了一个可以访问应用程序文件夹的新 Windows 用户
4.  将应用程序拉取的身份验证设置为该用户
5.  将我的应用程序的应用程序拉取设置为该应用程序拉取

请注意：

1.  我从服务器内部和外部收到错误
2.  我从我测试的所有浏览器收到此错误：Chrome、IE 9.0 和 Firefox
3.  同一文件夹中的 html 文件可见

我错过了什么？谢谢，阿萨夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:48:22.653

您不需要创建新的 windows 用户。我知道您已经说过您已经完成了哪些步骤，但我将强调每次添加新站点时我所做的事情。

*   将应用程序池的标识设置为 `ApplicationPoolIdentity`。
*   在网站中，设置`Anonymous Authentication`为`Enabled`. 单击右侧的编辑并将其设置`Authentication Credentials`为 `Application pool identity`。
*   在网站中，再次选择`Basic Settings`右侧。单击`Connect As..`按钮并确保`Application User`已选中。
*   授予对硬盘驱动器上文件夹的适当访问权限；即应用程序池名称= hello.com，用户是`IIS AppPool\hello.com`。

我认为您的问题是您没有为应用程序池用户授予文件夹权限。我认为您错误地将它们分配给了不必要的 Windows 帐户。高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:08:29.053

您是否在服务器上安装了正确版本的 .NET？您还需要在 IIS 中注册 ASP.NET - c:\windows\Microsoft.NET\framework\v2.0.50727（或 v4.0....） aspnet_regiis.exe -i

并在命令行中使用 iisreset 重新启动 IIS

# javascript - 在全局对象内定义的类中的 Javascript 静态方法

> ID：10172144
> 
> 赞同：2
> 
> 时间：2012-04-16T10:06:01.780
> 
> 标签：javascript, oop, class, static-methods

我知道 Javascript 没有像传统 OOP 语言那样的类，并且像下面这样的“类”定义只是一个可以与`new`关键字一起使用的函数对象：

```
function MyClass(){
  this.a = function(){ /* Do something */ }; // Public function
  function b(){ /* Do something */ }; // Private function
} 
```

我想知道的是，如果我定义一个全局对象（以避免污染命名空间）并在这个对象中定义我的类，我能否以比这更好的方式为我的类定义一个静态方法：

```
var MyObject = {
  MyClass: function(){
    this.a = function(){ /* Do something */ }; // Public function
    function b(){ /* Do something */ }; // Private function
  },
}
MyObject.MyClass.MyStaticMethod = function(){ /* Do something */ }; 
```

我在想一些`MyStaticMethod`在`MyClass`函数范围内定义的东西——这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T17:52:44.877

你*可以*这样做：

```
var MyObject = {
    MyClass: function(){
        this.a = function(){ /* Do instance-y stuff */ };
        MyClass.MyStaticMethod = function(){ /* Do static-y stuff */ };
    }
} 
```

但我认为这是个坏主意。一般来说，我认为在构造函数之外定义静态和实例方法是更好的做法（因为它更具可读性）。如：

```
function MyClass() { /* Do initialization stuff */ }
MyClass.prototype.a = function() { /* Do instance-y stuff */ }
MyClass.MyStaticMethod = function() { /* Do static-y stuff */ } 
```

# shell - 在while循环中使用grep

> ID：10172150
> 
> 赞同：2
> 
> 时间：2012-04-16T10:06:44.253
> 
> 标签：shell, grep

是否有可能在使用这样的 shell 脚本时通过 grep 的结果：

```
while read line ; do
    ...
done < grep ... 
```

谁能解释为什么这不起作用？有哪些替代方案？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:10:39.620

看起来您正在尝试使用[进程替换](http://mywiki.wooledge.org/ProcessSubstitution)：

```
lines=5
while read line ; do
    let ++lines
    echo "$lines $line" # Number each line
    # Other operations on $line and $lines
done < <(grep ...)
echo "Total: $lines lines" 
```

如果`grep`实际返回一些输出行，结果应该如下所示：

```
6: foo
7: bar
Total: 7 lines 
```

这与`grep ... | while ...`: 在前者`grep`中运行在[子外壳](http://mywiki.wooledge.org/SubShell)中，而在后者中，`while`循环在子外壳中。这通常仅在您想在循环中保留某些状态时才相关 - 在这种情况下，您应该使用第一种形式。

另一方面，如果你写

```
lines=5
grep ... | while read line ; do
    let ++lines
    echo "$lines $line" # Number each line
    # Other operations on $line and $lines
done
echo "Total: $lines lines" 
```

结果将是：

```
6: foo
7: bar
Total: 5 lines 
```

哎哟! 计数器被传递给子shell（管道的第二部分），但它不会返回给父shell。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T10:08:39.183

`grep`是一个命令，但`done < grep`它告诉 shell 使用名为 grep的*文件作为输入。*你需要类似的东西：

```
grep ... | while read line ; do
    ...
done 
```

# javascript - 如何构建基于 Backbone.View 的插件，以便可以单独扩展其嵌套视图？

> ID：10172154
> 
> 赞同：0
> 
> 时间：2012-04-16T10:07:05.670
> 
> 标签：javascript, inheritance, dependency-injection, backbone.js, requirejs

我正在设计一个通用对象浏览器插件，其功能类似于 OS X 的列视图中的 Finder。我已将界面划分为几个嵌套视图、浏览器、列和对象。

我将在浏览器视图、对象视图和列视图可能需要或可能不需要自定义的几种情况下使用此插件。例如，有时对象将是文件和文件夹。

[这是 OS X 的列视图中的 Finder，以防您不知道它的外观。](https://i.stack.imgur.com/lHu19.png)

目前我正在使用 RequireJS 传递依赖项，但是为了简单地继承和扩展 ObjectView，我必须替换整个堆栈。

有没有更好的结构可以扩展插件但只是一部分？

浏览器视图.js

```
var BrowserView = Backbone.View.extend({

    open: function () {
        var collectionView = new CollectionView( {collection: objects} );
    }

}); 
```

CollectionView.js

```
var CollectionView = Backbone.View.extend({

    render: function () {

        this.collection.each( function (object) {
            var objectView = new ObjectView( {model: objects} );

            objectView.bind('click', this.select, this);

            this.container.append( objectView.el );

            objectView.render();

            this.objectViews.push(objectView);
        }, this );

    },

}); 
```

对象视图.js

```
var ObjectView = Backbone.View.extend({

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:53:26.207

我会将这些视图放在同一个模块中。

模块的目的——无论你是使用 RequireJS 还是只是普通的旧 JavaScript 模块——都是为了特定目的封装一组相关的对象和函数。在这种情况下，您的目的是查找器视图。

通过将所有相关对象保存在同一个文件中，您将拥有更多的自由度和灵活性来让这些对象协同工作。

* * *

作为旁注，但与您正在做的事情相关，您可能能够从我的 Backbone.Marionette 插件的“CompositeView”中获得一些关于如何使其工作的想法。我之前用它构建了一个文件夹和文件的分层树视图，Finder 的列视图也很容易用它构建。

请注意，我并不是建议您需要使用我的插件。相反，我认为它可能有助于弄清楚你想如何构建你的代码。

我有一篇博客文章在这里讨论它：http: [//lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

你可以在这里找到代码和文档：[https ://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette)

复合视图的注释源代码在这里：[http ://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html#section-26](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html#section-26)

# c# - 使用 C#4.0 中的 RowFilter 过滤数据视图中的编号

> ID：10172156
> 
> 赞同：3
> 
> 时间：2012-04-16T10:07:14.237
> 
> 标签：c#, dataview, rowfilter

我正在尝试使用 RowFilter 过滤我的 DataView 数据集。

我想在整数列上执行类似的语句

所以是这样的：

```
myDataView.RowFilter ="ID LIKE %1%"; 
```

这适用于字符串列，但在尝试使用整数时我收到错误。我收到以下错误：无法对 System.Int32 和 System.Int32 执行“Like”操作。

无论如何做一个关于数字的 LIKE 声明？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:24:18.887

它对我有用：

```
"Convert(DataGridColumnName, 'System.String') LIKE '%" & txtBox.Text & "%' " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:11:13.813

您必须使用`cast`.

```
"Convert(ID, 'System.String') LIKE  %1%" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-28T19:57:17.183

这将获取请求的特定项目。它完全适用于一个项目

```
"Convert(DataGridColumnName, 'System.String') LIKE '%" & txtBox.Text & "%' " 
```

示例 1：

```
 DV.RowFilter = "Convert( TicketNo , 'System.String') LIKE  '%" + txtTicketNo.Text + "%' 
```

如果您想检索以它开头的项目，这只会收到确切的票号

示例 2：

```
DV.RowFilter = "Convert( TicketNo , 'System.String') LIKE  '" + txtTicketNo.Text + "%' "; 
```

在理论上，第一个示例应该是查看整个字符串并搜索匹配项。我做过的那个没有做那也许我错过了什么，

# android - Android NFC：其他 RFID 标签

> ID：10172157
> 
> 赞同：1
> 
> 时间：2012-04-16T10:07:18.177
> 
> 标签：android, nfc, rfid

我一直在研究 android 平台上的 nfc，我有一些 RFID 标签，但他们不想与 nexus 交互。我相信 andriod nfc 模块不支持标签（例如，我可以读取我的大学旧卡，这是 mifare 经典）。作为参考，我已经链接到一家出售这些东西的网上商店。是否可以在 android 中使用这些标签？会有很多编码/黑客攻击吗？

这是 rfid 标签的链接：http: [//www.parallax.com/StoreSearchResults/tabid/768/txtSearch/tag/List/0/SortField/4/ProductID/693/Default.aspx](http://www.parallax.com/StoreSearchResults/tabid/768/txtSearch/tag/List/0/SortField/4/ProductID/693/Default.aspx)

任何指导表示赞赏

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T10:34:36.833

您链接的标签在 125kHz 上运行。NFC 在 13.56MHz 上运行，因此与您的标签不兼容。现在有一种软件黑客可以克服这个问题。

# performance - Drawing vs Swing 中的 SWT 性能问题

> ID：10172159
> 
> 赞同：-2
> 
> 时间：2012-04-16T10:07:19.400
> 
> 标签：performance, swing, swt

## 为什么 SWT 的绘制速度比 AWT 慢？

全部，

一个经典的问题，但数字上的差异确实让我感到惊讶。

附上 Swing 和 SWT 中的简单测试，用随机字体绘制文本 1000 次。

**SWT（gc.advance off）**

每绘制 1000 个文本约 80 毫秒

**SWT（gc.advance on）**

每绘制 1000 个文本约 200 毫秒

**Swing（启用抗锯齿提示）**

每绘制 1000 个文本约 30 毫秒

配置：

*   Win7
*   Java 1.6_25
*   SWT org.eclipse.swt.win32.win32.x86_3.7.1.v3738a.jar

谢谢大家。

SWTTest.java

```
import java.io.IOException;

import org.eclipse.swt.SWT;
import org.eclipse.swt.graphics.Font;
import org.eclipse.swt.graphics.FontData;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class SWTTest {
    private static Font font;

public static void main(String[] args) throws IOException {

    Display display = new Display();
    Shell shell = new Shell(display);
    shell.setBounds(0, 0, 500, 500);
    shell.open();
            font = new Font(display, new FontData("Tahoma", (int) (Math.random() * 30), SWT.NORMAL));

    shell.addPaintListener(new PaintListener() {

        @Override
        public void paintControl(PaintEvent e) {
            drawshit(e.gc);
        }
    });

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }

    font.dispose();
    display.dispose();

    System.in.read();
}

private static void drawshit(Shell shell) {

    if (!shell.isDisposed()) {
        GC gc = new GC(shell);
        Rectangle bounds = shell.getBounds();

        long start = System.nanoTime();
        for (int i = 0; i < 1000; i++) {
            // try various different things here, e.g. drawing lines, rectangles, cacheing fonts etc.
            // Font font = new Font(gc.getDevice(), new FontData("Tahoma", (int) (Math.random() * 30), SWT.NORMAL));
            gc.setFont(font);
            gc.drawText("Hello World", (int) (Math.random() * 400), (int) (Math.random() * 400));
            font.dispose();
        }
        long stop = System.nanoTime();

        gc.dispose();

        System.out.println("SWT time: " + (stop - start) / 1000000 + " ms");
    }
}
} 
```

AWTTest.java

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;

public class AWTTest extends Frame implements MouseListener, WindowListener {

public static void main(String[] args) {
    new AWTTest();
}

public AWTTest() {
    /*
     * Label hello = new Label("Hello World"); add(hello, "Center");
     */
    setSize(500, 500);
    setVisible(true);

    addMouseListener(this);
    addWindowListener(this);
}

@Override
public void paint(Graphics g) {
    super.paint(g);
    Graphics2D g2d = (Graphics2D) g;

    // SWT Default font:
    // [1|Tahoma|8.25|0|WINDOWS|1|-11|0|0|0|400|0|0|0|1|0|0|0|0|Tahoma]

    g2d.setBackground(Color.GRAY);
    g2d.clearRect(0, 0, 500, 500);
    g2d.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);

    long start = System.nanoTime();
    for (int i = 0; i < 1000; i++) {
        // try various different things here, e.g. drawing lines, rectangles, cacheing fonts etc.
        g2d.setFont(new Font("Tahoma", Font.PLAIN, (int) (Math.random() * 30)));
        g2d.drawString("Hello World", (int) (Math.random() * 400), (int) (Math.random() * 400));
    }
    long stop = System.nanoTime();

    System.out.println("AWT time: " + (stop - start) / 1000000 + " ms");

}

@Override
public void mouseEntered(MouseEvent e) {
}

@Override
public void mouseClicked(MouseEvent e) {
    this.paintAll(getGraphics());
}

@Override
public void mouseExited(MouseEvent e) {
}

@Override
public void mousePressed(MouseEvent e) {
}

@Override
public void mouseReleased(MouseEvent e) {
}

@Override
public void windowActivated(WindowEvent e) {
}

@Override
public void windowClosed(WindowEvent e) {
}

@Override
public void windowClosing(WindowEvent e) {
    System.exit(0);
}

@Override
public void windowDeactivated(WindowEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void windowDeiconified(WindowEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void windowIconified(WindowEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void windowOpened(WindowEvent e) {
    // TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:20:25.613

正如 phineas 已经评论的那样，您的 SWT 代码并不好。

但是您也在比较两个非常不同的输出。SWT 通过设计在本机绘图。操作系统负责绘图，这可能会产生与使用 AWT 绘图非常不同的结果。您是否希望您的应用程序与用户操作系统的其他应用程序保持一致取决于您。

无论如何，在您的示例中，AWT 文本只是简单地消除了锯齿。SWT 文本由 Windows 使用[ClearType](http://en.wikipedia.org/wiki/ClearType)绘制。如果您禁用 ClearType（在 Windows 设置中），“SWT”的性能会大大加快（实际上它是 Windows 的性能），即使您的基准测试存在提到的问题。

在另一个操作系统上运行您的基准测试将再次产生不同的数字。

**更新**：

我刚刚使用了你的代码，修复了当前版本明显的 dispose 错误，添加

```
 shell.getDisplay().asyncExec(new Runnable() {

      @Override
      public void run() {
         drawshit(shell);
      }
   }); 
```

在 , 的末尾`drawshit`，并使字体大小为静态，因为它与性能非常相关。我使用 15 作为两个类的大小。

启用 ClearType`SWTTest`大约需要 50 毫秒，没有 ClearType 每次迭代大约需要 17 毫秒。我使用 WinXP SP3。

`AWTTest`在 3 ms 和 11 ms 之间的值仍然更快。

所有这一切都表明，ClearType 使文本的绘制速度大大减慢。这不是 SWT 的错，而是由于底层操作系统而发生的。在 Mac 上尝试该基准测试，您将获得完全不同的结果。

# asp.net - 如何使用 VB.net 在 asp.net (.net 2.0) 中创建分层数据网格

> ID：10172161
> 
> 赞同：0
> 
> 时间：2012-04-16T10:07:32.083
> 
> 标签：asp.net, .net, vb.net, datagridview

如何使用 VB.net 在 asp.net (.net 2.0) 中创建类似的分层数据网格 请在此处查看图像。![在此处输入图像描述](../Images/c3622470241eb2d6d7d004b56ac0b982.png) 这是gridview，在转换向导之后显示。它是如何设计的（就像一个雇员）。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:16:57.037

检查此链接[Asp.Net Hierarchical GridView](http://www.vbknowledgebase.com/?Id=125&Desc=Asp.Net-Hierarchical-GridView) for vb.net implementation，有关更多信息和参考，请检查以下链接：
[hierarchical grid](https://stackoverflow.com/questions/594160/hierarchical-grid)
[ASP.NET - Hierarchical grid view](https://stackoverflow.com/questions/295607/asp-net-hierarchical-grid-view)
[Hierarchical treeview implementation](https://stackoverflow.com/questions/727079/hierarchical-treeview-implementation)

希望这有帮助..

# android-layout - 按钮背景的选择器文件

> ID：10172170
> 
> 赞同：1
> 
> 时间：2012-04-16T10:08:22.107
> 
> 标签：android-layout

谁能提供按钮背景的选择器文件。按下按钮时背景图像会发生变化。我将为按钮的背景设置自定义图像。可绘制文件的内容是 `listbackground`什么？

```
 <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="40dp"
        android:text="Button 1" 
        android:background="@drawable/listbackground"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button1"
        android:layout_below="@+id/button1"
        android:layout_marginTop="37dp"
        android:text="Button 2" 
        android:background="@drawable/listbackground"/>

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button2"
        android:layout_centerVertical="true"
        android:text="Button 3" 
        android:background="@drawable/listbackground"/>

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button3"
        android:layout_below="@+id/button3"
        android:layout_marginTop="48dp"
        android:text="Button 4" 
        android:background="@drawable/listbackground"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:09:07.900

列表背景.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_focused="true" android:drawable="@drawable/mainfocussed"></item>
    <item android:state_pressed="true" android:drawable="@drawable/mainpressed"></item>
    <item android:drawable="@drawable/main"></item>

</selector> 
```

# mysql - MAX函数为NULL时如何设置0？

> ID：10172174
> 
> 赞同：33
> 
> 时间：2012-04-16T10:08:39.373
> 
> 标签：mysql, null, max, zero

我想了解当属性为 NULL 时如何使用 MAX 函数设置属性的 0 值。例如：

```
Name columns:
number - date

Values:
10 - 2012-04-04
11 - 2012-04-04
12 - 2012-04-04
13 - 2012-04-15
14 - 2012-06-21
 1 - 2013-07-04 
```

数字是增量字段，但在新年到来时将自己设置为1。但结果：

```
SELECT (MAX(number)+1) number WHERE date LIKE "2014%" 
```

是 NULL 而不是 1，因为 MAX(number) 是 NULL 而不是 0

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-16T10:10:32.810

好吧，因为没有像 2014 年这样的日期，所以你会期望 null，因为没有任何东西的最大值实际上是没有任何东西的。

但是这样做：

```
COALESCE(MAX(number),0) 
```

这意味着：从下一个列表中获取第一个非空的东西，所以如果你`max`是空的，它会给你`0`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-10-24T11:28:00.800

COALESCE 有效，但[IFNULL](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)对我来说似乎更清楚。

```
IFNULL(MAX(number), 0) 
```

如果第一个表达式不为 NULL，则 IFNULL() 返回表达式本身，否则返回第二个参数。IFNULL() 返回一个数字或字符串值，具体取决于使用它的上下文。

# sql - 仅当价格不是 0,00 时才依赖 SQL

> ID：10172178
> 
> 赞同：2
> 
> 时间：2012-04-16T10:08:50.487
> 
> 标签：sql, group-by

我有这样的表：

```
ID  Price  ZONE
--  -----  ----
1   0,00    A
2   6,00    A
3   8,56    A
4   0,00    B 
```

我想展示：

```
ZONE TOTAL
---- -----
A    2
B    0 
```

我怎样才能做到这一点？

提前谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:11:33.767

假设`Price`是一个文本字段：

```
select  zone
,       count(case when Price <> '0,00' then 1 end) as total
from    YourTable
group by
        zone 
```

如果 price 是数字字段，请替换`Price <> '0,00'`为`Price > 0`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T10:24:25.017

这也有效：

```
SELECT Zone, COUNT(NULLIF(Price,0)) AS Total FROM Table1 GROUP BY Zone 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:14:22.167

```
SELECT ZONE, COUNT(*) FROM yourtable WHERE PRICE<> '0.00' GROUP BY ZONE 
```

应该这样做

# google-chrome - FON 字体在 Chrome 中不显示

> ID：10172179
> 
> 赞同：3
> 
> 时间：2012-04-16T10:08:53.663
> 
> 标签：google-chrome, fonts, antialiasing, truetype

当我在网页 Chrome（使用 CSS 应用）中使用自定义字体时，它会被忽略。该字体在操作系统 (Windows) 中工作正常，属于 FON 类型。

我找到了指向将其切换为 TTF 的选项，但这意味着它将具有抗锯齿功能，我不想要任何抗锯齿功能。

有没有办法在 Chrome 中使用 FON 文件，或者有没有工具可以将 FON 文件转换为 OTF 或 TTN 文件并在没有抗锯齿的情况下渲染它？

# facebook - 打开图形元标记

> ID：10172183
> 
> 赞同：5
> 
> 时间：2012-04-16T10:09:00.650
> 
> 标签：facebook, facebook-opengraph, meta-tags

我使用 Facebook 应用程序（shortstack）来制作我的页面。当我与短 URL 共享时，我想个性化发布。我已经测试创建一个开放的图形元标记，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T17:06:21.797

您需要在页面中放置 opengraph 元标记，例如

```
<meta property="og:title" content="The Rock"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
<meta property="og:site_name" content="IMDb"/>
<meta property="fb:admins" content="USER_ID"/>
<meta property="og:description"
      content="A group of U.S. Marines, under command of
               a renegade general, take over Alcatraz and
               threaten San Francisco Bay with biological
               weapons."/> 
```

示例在这里找到它[http://developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/)

您还需要将顶部标签更改为

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:og="http://ogp.me/ns#"
  xmlns:fb="http://www.facebook.com/2008/fbml"> 
```

然后它应该可以正常工作:)

要调试您的页面并查看您是否正确实现了 opengraph 标签，请使用此处的调试器工具：http: [//developers.facebook.com/tools/debug/](http://developers.facebook.com/tools/debug/)

希望有帮助

# mongodb - MongoDB 日志是如何工作的

> ID：10172188
> 
> 赞同：9
> 
> 时间：2012-04-16T10:09:15.853
> 
> 标签：mongodb, journaling, durability

这是我的看法，不知道是对是错：

日记日志是“重做”日志。它记录数据文件的修改。

比如我想把一条记录的字段值从'a'改成'b'，那么mongodb会找到怎么修改dbfile（包括所有的命名空间、数据、索引等），然后mongodb写对期刊的修改。

之后，mongodb 对 dbfile 进行所有真正的修改。如果这里出现问题，当 mongoDB 重新启动时，它将读取日志（如果存在）。然后它将更改 dbfile 以使数据集保持一致。

所以，在日志中，没有记录要更改的数据，而是记录了如何更改dbfile。

我对吗？我在哪里可以获得有关期刊格式的更多信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T11:10:37.693

编辑：我在 2011 年 Dwight 在 MongoSF 上的演讲的原始链接现在已经死了，但是Ben Becker 在[2012 年的演讲](https://www.mongodb.com/presentations/mongosf-2012-journaling-and-storage-engine)中有类似的内容。

以防万一它在某个时候也停止工作，我将简要概述原始 MMAP 存储引擎中的日志是如何工作的，但应该注意的是，随着[可插拔存储引擎](http://docs.mongodb.org/manual/release-notes/3.0/#release-notes-for-mongodb-3-0)模型（MongoDB 3.0 及更高版本）的出现，这现在完全取决于您使用的存储引擎（可能还有选项） - 所以请检查。

回到原始 (MMAP) 存储引擎日志。在非常基本的级别上，日志包含一系列排队操作，并且所有操作都在发生时写入其中 - 基本上是仅追加到磁盘的顺序写入。

一旦这些操作被应用并刷新到磁盘，它们就不再需要在日志中并且可以被老化。从这个意义上说，日志基本上就像一个用于写操作的循环缓冲区。

在内部，日志中的操作存储在“提交组”中——一组写操作的逻辑组。一旦一个操作在一个完整的提交组中，它可以被认为是作为日志的一部分同步到磁盘（[`j:true`](http://docs.mongodb.org/manual/reference/write-concern/#j-option)例如，将满足写关注）。不干净的关闭后，`mongod`将尝试应用之前未刷新到磁盘的所有完整提交组，不完整的提交组将被丢弃。

日志中的操作不是您将在[oplog](http://docs.mongodb.org/manual/core/replica-set-oplog/)中看到的，而是一组更简单的文件、偏移量（本质上是磁盘位置）和要在该位置写入的数据。这允许有效地重放数据，并为日志提供紧凑的格式，但会使内容看起来像大多数人的胡言乱语（与上述基本上可以作为 JSON 文档读取的 oplog 相反）。这基本上回答了提出的问题之一——它不知道数据库文件的内容和要对其进行的更改，它甚至更简单——它基本上只知道去磁盘位置 X 并写入数据 Y，而已。

日志的预写顺序性质意味着它非常适合旋转磁盘，顺序访问模式通常与 MMAP 数据访问模式不一致（尽管不一定与其他引擎的访问模式）。因此，有时将日志放在自己的磁盘或分区上以减少 IO 争用是个好主意。

# javascript - JavaScript 的 2D 引擎

> ID：10172191
> 
> 赞同：39
> 
> 时间：2012-04-16T10:09:33.183
> 
> 标签：javascript, html, canvas, 2d

我正在尝试使用 HTML5 画布在 JavaScript 中构建基于图块的游戏。有*许多*引擎可供选择，例如

*   [大白鲨](http://jawsjs.com/)
*   [游戏JS](http://gamejs.org/)
*   [Cocos2D](http://cocos2d-javascript.org/)
*   [MelonJS](http://www.melonjs.org/)
*   [CraftyJS](http://craftyjs.com/)
*   [ImpactJS](http://impactjs.com/)（商业）

... 这样的例子不胜枚举。

然而，在所有这些不同的实现中似乎没有一个事实上的标准。本质上，我正在寻找 JavaScript 游戏引擎的[jQuery](https://en.wikipedia.org/wiki/JQuery)。一个由（更大的）社区支持的，具有出色的文档并得到积极维护的。其中大部分对我来说似乎都是一个人的项目。

JavaScript 中 2D 游戏引擎的事实标准是什么？

此外，我会对实际实现的体验非常感兴趣（除了演示[Pong](https://en.wikipedia.org/wiki/Pong)和*[Pac-Man](https://en.wikipedia.org/wiki/List_of_Pac-Man_video_games)*游戏）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T16:08:20.887

现在还没有，我继续说*可能永远不会*有 jQuery 那样的版本，因为大多数（商业）游戏都想要无情的高性能，这意味着尽可能少地使用多余的东西，并且其中许多库在可能不需要的地方添加了不必要的东西或性能损失。

这并不是说它们根本不会被使用。上述所有库都可能适用于大量小型（呃）游戏。

但我想在大型项目中，许多工作室会发现自己从一个库开始，直到他们遇到性能障碍，然后自己编写他们在库中使用的所有组件，以便只保留他们需要的少量部分。

如果有一个变得流行，它几乎肯定会像 MooTools（第二大流行的 JavaScript 库）一样是模块化的，它试图变得紧凑并[让您只选择您想要使用的组件](http://mootools.net/core/)。我想您将来会发现很多游戏都有一个非常小的引擎*，仅*用于处理声音或*仅*用于处理图像或 2D 同构板，而不是具有（大型）库以尝试处理所有可能的游戏一种2D游戏。

无论如何，如果你只是想找到最流行的 JavaScript 引擎，那么接下来几个月你最好的选择是使用谷歌（页面排名）来确定最流行的。搜索“2D 游戏引擎 JavaScript/Canvas”会让您很好地了解在任何给定时间哪个是链接最多（流行）的库。

（毕竟，尝试在 Google 上搜索“JavaScript 库”。你可以猜到我打赌的第一个结果！）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-22T10:40:54.723

我在寻找自己的引擎时发现了这个问题。我只想在此处添加此站点，因为它提供了对许多 HTML5 游戏引擎的良好概述：

[http://html5gameengine.com/](http://html5gameengine.com/)

还有一些不错的过滤器，例如许可证/成本、发布日期和用户评分。

（PS：我与本站没有任何关系）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:54:12.567

我同意其他人。只是没有标准，而且可能暂时没有。然而，我才刚刚开始自己​​ - 并真正挖掘 ThreeJS 框架：

*   [http://learningthreejs.com/](http://learningthreejs.com/)
*   [https://github.com/mrdoob/three.js/](https://github.com/mrdoob/three.js/)

当然，它是一个[WebGL](https://en.wikipedia.org/wiki/WebGL) 3D 框架——但我怀疑你可以去掉 3D 元素使其成为 2D。至少这是我在深入研究 WebGL 世界时的希望——这最终可能成为向前发展的标准？*

依靠 Chrome Canary 进行开发有帮助！:) [https://tools.google.com/dlpage/chromesxs](https://tools.google.com/dlpage/chromesxs)

如果您要走这条路 - 不要忘记在 Chrome 中设置 about:flags，以启用“覆盖软件渲染列表”标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-24T13:59:27.673

[Backbone Game Engine](http://martindrapeau.github.io/backbone-game-engine/)是一个 2D 框架，它是在已经流行的大型社区驱动的 Backbone 之上编写的。

对象、继承、事件、持久性等等事实上都来自 Backbone。该引擎从 MelonJS 中借用 sprites（主干模型）来实现更新和绘制方法。[Super Mario Bros.](https://en.wikipedia.org/wiki/Super_Mario_Bros.) Level 1-1 是作为示例编写的。可能值得您花时间检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-23T01:25:05.680

使用[gameQuery](http://gamequeryjs.com/)，一个用于 jQuery 的 JavaScript 游戏引擎。

# javascript - jQuery UI 自动完成 jsonp 映射响应

> ID：10172195
> 
> 赞同：0
> 
> 时间：2012-04-16T10:09:54.313
> 
> 标签：javascript, jquery, ajax, jquery-ui, jsonp

我正在尝试使用 jqueryUI 的自动完成功能。当我提醒响应时，我得到以下信息：`([ { "id": "test", "label": "test", "value": "test" } ]);`

但是当我尝试映射结果时，下拉结果为空。这是我的代码：

```
<script>
$(function() {
    function log( message ) {
        $( "<div/>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $( "#city" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "http://localhost/jQuery/development-bundle/demos/autocomplete/search3.php",
                jsonp: "jsonp_callback",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                },
                success: function( data ) {
                    alert(data);
                    response( $.map( data, function( item ) {
                        return {
                            label: item.label,
                            value: item.value
                        }
                    }));
                }
            });
        },
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.label :
                "Nothing selected, input was " + this.value);
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }
    });
});
</script> 
```

我的服务器端脚本使用以下代码：

```
echo $_GET['jsonp_callback'] . '(' . $data . ');'; 
```

不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:16:20.700

使用这条线

```
url: "http://ws.geonames.org/searchJSON?jsonp_callback=?", 
```

和数据类型也

```
dataType: 'jsonp', 
```

代替

```
url: "http://ws.geonames.org/searchJSON", 
```

# java - 接受 n 个参数的注解

> ID：10172196
> 
> 赞同：0
> 
> 时间：2012-04-16T10:09:55.073
> 
> 标签：java, annotations

我希望能够使用尽可能多的参数调用注释，如下所示：

```
@Authorize("Admin", "Moderator", "User")
public static void read() {
    // ...
} 
```

到目前为止，这是我的注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.METHOD, ElementType.TYPE})
public @interface Authorize {
    String[] value() default {};
} 
```

但您可能知道，这只适用于：

```
@Authorize
@Authorize("Admin")
@Authorize({"Admin", "Moderator", "User"}) 
```

事实上，前两个对我来说很好，这是困扰我的最后一个。

原因很简单。

对于权利，我希望一种方法可用于许多配置文件，{} 表示“WITH”，我正在寻找“OR”；）

（在我看来）{} 的意思是“WITH”，因为它是“作为一个包”出现的。项目链接在一起。例如，如果你采取这个：

```
SomeQuery.select({"A", "B", "C"}, {"D", "E", "F"}, {"G", "H", "I"}) 
```

我会将其翻译为：

```
SELECT WHERE (A, B, C) OR (D, E, F) OR (G, H, I); 
```

（这不是一些 SQL 查询，只是我如何看待 {} 和 With/Or 的一个示例）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:34:41.433

据我所知，你做不到。

获得等价物的一种方法是使用例如

```
@Authorize({"A,B,C", "D,E,F", "G,H,I"}) 
```

如果您需要单独的组件，则在底层实现中：

```
String[] component = x.value[idx].split(","); 
```

这里的分隔符是一个逗号，但可以是任何内容，具体取决于您的要求/限制。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:00:54.063

您可以执行以下操作

```
public @interface Authorize {
    String[] value();
}

public @interface Packages {
    Authorize[] value();
} 
```

所以你可以有

```
@Packages({
   @Authorize({"A", "B", "C"}),
   @Authorize({"D", "E", "F"}),
   @Authorize({"G", "H", "I"})
})
public void myMethod() 
```

或者

```
@Authorize({"A", "B", "C"})
public void myMethod2() 
```

（第二种形式只是简写：）

```
@Packages({
   @Authorize({"A", "B", "C"})
})
public void myMethod2() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:01:42.997

实际上，它是定义注释含义的文档，JDK 根本不知道也不关心。如果您正在寻找其他人的两个铜牌，那么在我第一次阅读您的问题时，我认为该列表是 OR，而不是 AND。在任何情况下，如果您想要完全明确，请以自我记录的方式声明您的注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.METHOD, ElementType.TYPE})
public @interface Authorize {
    /**
     * Roles to authorize. By default, any of the roles specified
     * will be accepted as authorization
     */
    String[] value() default {};

    /**
     * Roles to authorize. Any matched role in the list will be accepted
     * as authorization.
     */
    String[] anyOf() default {};

    /**
     * Roles to authorize. All roles in the list must match to be accepted
     * as authorization.
     */
    String[] allOf() default {};
} 
```

# java - Paypal SetExpressCheckout 肥皂

> ID：10172197
> 
> 赞同：1
> 
> 时间：2012-04-16T10:09:59.587
> 
> 标签：java, web-services, paypal

当我尝试 setExpressCheckout 时，我得到 ack = success 但没有令牌返回。

paypal api 的版本是 87.0 这里是 wsdl 链接：[https ://www.sandbox.paypal.com/wsdl/PayPalSvc.wsdl](https://www.sandbox.paypal.com/wsdl/PayPalSvc.wsdl)

这里命令我在axis2-1.6.1中使用来生成java代码

```
-uri https://www.sandbox.paypal.com/wsdl/PayPalSvc.wsd -p com.paypal.soap 
```

这里是使用axis2生成的java代码的链接[https://docs.google.com/open?id=0B97cB4uxjmztbGgxRER6VjBWcWc](https://docs.google.com/open?id=0B97cB4uxjmztbGgxRER6VjBWcWc)

这里是 SetExpressCheckout 的代码

```
 PaymentDetailsType paymentDetails = new PaymentDetailsType();
    BasicAmountType orderTotal = new BasicAmountType();
    orderTotal.setCurrencyID(CurrencyCodeType.USD);
    orderTotal.setString("10.00");
    paymentDetails.setOrderTotal(orderTotal);
    paymentDetails.setPaymentAction(PaymentActionCodeType.Sale);

    SetExpressCheckoutRequestDetailsType requestDetailsType = new SetExpressCheckoutRequestDetailsType();
    requestDetailsType.setCancelURL(buyer.getCancelUrl());
    requestDetailsType.setReturnURL(buyer.getReturnUrl());
    requestDetailsType.setPaymentDetails(new PaymentDetailsType[]{paymentDetails});

    SetExpressCheckoutRequestType requestType = new SetExpressCheckoutRequestType();
    requestType.setVersion("87.0");
    requestType.setSetExpressCheckoutRequestDetails(requestDetailsType);

    SetExpressCheckoutReq req = new SetExpressCheckoutReq();
    req.setSetExpressCheckoutRequest(requestType);

    RequesterCredentials requesterCredentials = new RequesterCredentials();
    CustomSecurityHeaderType customSecurityHeaderType = new CustomSecurityHeaderType();

    UserIdPasswordType userIdPasswordType = new UserIdPasswordType();
    userIdPasswordType.setUsername("<username>");
    userIdPasswordType.setPassword("<pass>");
    userIdPasswordType.setSignature("<signature>");
    customSecurityHeaderType.setCredentials(userIdPasswordType);
    requesterCredentials.setRequesterCredentials(customSecurityHeaderType);

    String endPoint = null;
    endPoint = "https://api-3t.sandbox.paypal.com/2.0/";  //sandbox API Signature   
    PayPalAPIInterfaceServiceStub stub = new PayPalAPIInterfaceServiceStub(endPoint);
    stub._getServiceClient().getOptions().setProperty(HTTPConstants.CHUNKED, false);
    SetExpressCheckoutResponse setExpressCheckout = stub.setExpressCheckout(req, requesterCredentials);

    SetExpressCheckoutResponseType checkoutResponse = setExpressCheckout.getSetExpressCheckoutResponse();
    Calendar timestamp = checkoutResponse.getTimestamp();
    String strdate = null;
    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss");
    if (timestamp != null) {
        strdate = sdf.format(timestamp.getTime());
    }
    System.out.println("Date:" + strdate);
    System.out.println("CorrelationID:" + checkoutResponse.getCorrelationID());
    System.out.println("ack :" + checkoutResponse.getAck());
    if (checkoutResponse.getErrors() != null && checkoutResponse.getErrors().length > 0) {
        PayPalAPIInterfaceServiceStub.ErrorType[] errors = checkoutResponse.getErrors();
        for (int i = 0; i < errors.length; i++) {
            System.out.println(errors[i].getErrorCode());
            System.out.println(errors[i].getLongMessage());

        }
    }
    System.out.println("token:" + checkoutResponse.getToken()); 
```

这是我得到的结果

```
Date:17/04/2012 12:33:38
CorrelationID:a7c9fe7283bd
ack :Success
token:null 
```

我如何获得 ack 成功但令牌为空？paypal 的联系人说已经为 CorrelationID:a7c9fe7283bd 生成了一个 EC 令牌。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T04:23:23.863

我必须使用 setExpressCheckoutResponse.getExtraElement().getText() 来获取令牌。为什么 setExpressCheckoutResponse.getToken() 返回 null？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:12:40.437

如果您查看提到的 wsdl 文件，一开始您会注意到以下内容：

```
<wsdl:definitions
     ns:version="89.0"
     xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns="http://schemas.xmlsoap.org/wsdl/" 
     ... > 
```

这意味着应该使用的 API 版本是`89.0`- 不记得它在 PayPal API 文档中指定的位置，但这肯定是在那里提到的。

如果您仍然遇到此问题，请告诉我，因为我最近设法使用 Java 中的 SOAP 设置了 PayPal Express Checkout，并且可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:28:04.290

我刚刚遇到这个问题并找到了答案（这是针对 C#，我不确定它是否适用于 Java）：

[https://www.x.com/developers/paypal/forums/soap/paypal-api-aa-and-net-wcf-undeserialized-fields](https://www.x.com/developers/paypal/forums/soap/paypal-api-aa-and-net-wcf-undeserialized-fields)

查看为 Web 服务 (Reference.cs) 生成的代码并找到 AbstractResponseType。最后一个属性是 Any()。更改属性以匹配此（忽略该属性）：

```
 [System.Xml.Serialization.XmlIgnoreAttribute()]
    public System.Xml.XmlElement Any {
        get {
            return this.anyField;
        }
        set {
            this.anyField = value;
        }
    } 
```

在此之后，重新编译并再次测试，您现在应该会收到正确设置的 Token 属性。

如果您重新生成 Web 服务代码，则此更改当然会被替换，除非 PayPal 修复此问题，否则您将不得不重新执行此更改。顺便说一句，此时我的 WSDL 版本号是 98.0。

加里戴维斯

# iphone - 我可以在应用内更改 APN 设置吗？

> ID：10172200
> 
> 赞同：0
> 
> 时间：2012-04-16T10:10:10.657
> 
> 标签：iphone, apple-push-notifications

我的应用程序使用 APN 服务。首次启动时，它会发送一个

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

要求。这会触发带有权限请求的系统警报。无论用户选择什么，都可以从“设置”、“通知”窗格中进行更改。该应用程序收到通知，一切似乎都正常。

现在，我被要求在应用程序内放置一个开关，以从应用程序内部激活/停用推送通知。我认为这是不可能的，但在回答之前，我想得到确认。

有没有办法从应用程序本身访问（读取和/或写入）与特定应用程序相关的通知权限（就像应用程序默认首选项一样）？
一旦由于初始请求而被添加，有没有办法从需要推送通知的应用程序列表中删除该应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:23:39.963

不，因为它是与您的应用程序相关的系统设置，而不是应用程序设置。否则任何应用程序都可以在启动时自动启用其所有通知，这将造成严重破坏。

编辑：
您可以读取应用程序的权限`UIRemoteNotificationType enabledTypes = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];`，然后使用不同类型执行按位和操作，以查看哪些已启用。

# iphone - 添加 FaceBook Connect 时架构 i386 的未定义符号

> ID：10172203
> 
> 赞同：4
> 
> 时间：2012-04-16T10:10:30.910
> 
> 标签：iphone, ios, xcode, facebook, ios5.1

**当我在 iPhone 5.1**模拟器上运行我的应用程序时，我有以下**失败的代码。**在我将 Facebook Connect 添加到我的应用程序之前，我的应用程序运行顺利。

 **```
Undefined symbols for architecture i386:
  "_FBCreateNonRetainingArray", referenced from:
      -[FBSession initWithKey:secret:getSessionProxy:] in FBSession.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我可以知道我能做些什么来摆脱这个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T11:54:34.187

2 things that usually get rid of that error.

1) go to: target > build phases > link binary with library -- make sure you've added the correct framework 2) go to: target > build phases > compile sources -- add any implementation files that are in your program but do not appear in that list.

Those two steps usually fix that kind of error.**

# c# - 在 Silverlight 中控制启用/禁用行为

> ID：10172207
> 
> 赞同：0
> 
> 时间：2012-04-16T10:10:37.007
> 
> 标签：c#, silverlight, controls

我有一个应用程序，里面有很多文本框。此外，此文本框实际上从未被禁用，而是改为 ReadOnly。我更喜欢对我的所有控件使用 ContentControl 的一个属性，但是如果我将 IsEnabled 设置为 false，我的所有文本框都会被禁用。我怎样才能让他们进入只读模式？我不喜欢自己控制，也许我可以使用样式或其他东西来重新分配行为？

**编辑：**我实际上正在寻找允许我通过在一个地方绑定来使用绑定来绑定所有控件（IsReadOnly）的状态的解决方案。喜欢：

```
<ContentControl IsEnabled="{Binding boolFlag, Mode=OneWay}">
    <Grid x:Name="LayoutRoot" HorizontalAlignment="Stretch">
        ....
        <TextBox/>
    </Grid>
</ContentControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:42:24.410

在您的情况下，似乎最好使用 DataForm 控件。它将允许您将其中的每个字段作为一个组来控制。它确实提供了 IsReadOnly 选项，而且它带有许多非常好的免费功能。

这个视频很好的介绍

[http://www.silverlight.net/learn/data-networking/data-controls/dataform-control](http://www.silverlight.net/learn/data-networking/data-controls/dataform-control)

[http://www.silverlightshow.net/items/Creating-Rich-Data-Forms-in-Silverlight-3-Introduction.aspx](http://www.silverlightshow.net/items/Creating-Rich-Data-Forms-in-Silverlight-3-Introduction.aspx)

[http://www.silverlight.net/content/samples/sl4/toolkitcontrolsamples/run/default.html](http://www.silverlight.net/content/samples/sl4/toolkitcontrolsamples/run/default.html) 查找数据表

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:01:52.530

我建议你为你的 ContentControl 使用一个简单的扩展方法来生成 textBoxes `IsReadOnly = True`。例如：

```
public static class ContentControlEx
{
    public static void DisableTextBoxes(this ContentControl contentControl)
    {
        FrameworkElement p = contentControl as FrameworkElement;
        var ts = p.GetChildren<TextBox>();
        ts.ForEach(a => { if (!a.IsReadOnly) a.IsReadOnly = true; });
    }

    public static List<T> GetChildren<T>(this UIElement parent) where T : UIElement
    {
        List<T> list = new List<T>();
        int count = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < count; i++) {
            UIElement child = VisualTreeHelper.GetChild(parent, i) as UIElement;
            if (child != null) {
                if (child is T)
                    list.Add(child as T);

                List<T> l1 = GetChildren<T>(child);
                foreach (T u in l1)
                    list.Add(u);
            }
        }
        return list;
    }
} 
```

用法（对于 Name = "content" 的 ContentControl）：

```
content.DisableTextBoxes(); 
```

我有一个这样的 XAML：

```
<Grid x:Name="LayoutRoot" Background="White">
    <ContentControl IsEnabled="True" Name="content">
        <StackPanel Margin="15">
            <TextBox Width="150" Name="tb1" Margin="5" Text="{Binding tb1}" />
            <TextBox Width="150" Name="tb2" Margin="5" Text="{Binding tb2}" />
            <TextBox Width="150" Name="tb3" Margin="5" Text="{Binding tb3}"/>
            <TextBox Width="150" Name="tb4" Margin="5" Text="{Binding tb4}"/>
            <Button Name="bSubmit" Click="bSubmit_Click">Make Textboxes readonly</Button>
        </StackPanel>
    </ContentControl>
</Grid> 
```

让我知道它是否有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:53:23.060

如果我理解正确，您想将每个绑定`TextBox.IsReadOnlyProperty`到一个布尔值。

您可以尝试这样的事情，以类似于绑定`IsEnabled`属性的方式`ContentControl`：

```
<TextBox IsReadOnly="{Binding boolFlag, Mode=OneWay}" ... /> <!-- in each of your textboxes --> 
```

这应该为您提供所需的内容：更改`boolFlag`，每个文本框都打开或关闭。

# .net - powershell send-mailmessage smtp 错误：被策略拒绝

> ID：10172209
> 
> 赞同：0
> 
> 时间：2012-04-16T10:10:47.213
> 
> 标签：.net, powershell, smtp

我正在使用 powershell 的 Send-Mailmessage 发送邮件消息，它适用于本地电子邮件地址，但是当我包含 gmail 或其他邮件服务器时，我收到此错误消息。我认为，它的 smtp 服务器策略问题，但我不是该服务器的管理员，并且 smtp 管理员告诉我他不知道如何解决它。你有什么线索吗？谢谢！

```
Send-MailMessage : Mailbox unavailable. The server response was: Denied by poli
cy.
At C:\ps\003desifrovanie.ps1:154 char:37
+                     send-mailmessage <<<<  `
+ CategoryInfo          : InvalidOperation: (System.Net.Mail.SmtpClient:Sm
tpClient) [Send-MailMessage], SmtpFailedRecipientException
+ FullyQualifiedErrorId : SmtpException,Microsoft.PowerShell.Commands.Send
MailMessage 
```

编辑：所以，现在我知道它是 Lotus Notes smtp 服务器。我需要从中发送电子邮件的计算机位于 DMZ 中。网络管理员和 LN 管理员有点迷失了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:13:19.963

您使用的邮件服务器不允许为您用于播放脚本的计算机中继消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:01:00.587

根据您的评论，我假设您使用 Microsoft Exchange 服务器。

首先，要查看您的问题是否是配置问题，请尝试从连接到本地邮件服务器的邮件客户端（如 ms Outlook）发送电子邮件。如果它失败（应该）那么你的脚本是好的，服务器配置不允许外发邮件。

自从 Exchange 2007 默认禁用外发 Internet 邮件以来。您需要在服务器上设置一个 smtp 连接器以允许电子邮件发送到外部世界。这是解释如何做到这一点的[文章。](http://www.petri.co.il/configuring-exchange-2007-send-external-email.htm)

尽管您可能设置了连接器，但它可能不仅仅因为各种其他障碍（本地、ISP 等）而起作用，包括组策略、交换服务器中继等。我们无法在没有细节的情况下为您提供解决方案，只能猜测。

此外，对于配置问题，我建议在[serverfault](https://serverfault.com/)上发布。

# ios - 如果我们将原点从左上角更改为左下角，直线的斜率会改变吗？

> ID：10172213
> 
> 赞同：0
> 
> 时间：2012-04-16T10:11:10.327
> 
> 标签：ios, coordinate-systems

在我的 iphone 应用程序中，我需要在两点之间画一条线并显示它的斜率。现在我的计算只是基于。

`slope = (startPoint.y - endPoint.y) / (startPoint.x - endPoint.x )`

我拥有的 startPoint 和 endPoint 是在屏幕像素坐标方面，原点位于左上角。

但我在图表上显示这条线，其中我的轴与坐标系一起放置，坐标系位于屏幕左下角。

这会影响我正在计算的斜率吗？我已经处理了相对于图形的 x,y 轴比例单位转换 x,y 坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:19:18.143

如果您不修改 startPoint.y 或 endPoint.y，那么斜率将保持不变，但与正在绘制到屏幕上的内容不匹配。此外，您将需要处理两个相同的 x 值，这将导致除以零错误。

# assembly - x86 程序集 - 如何显示整数 2，而不是第二个 ASCII 字符

> ID：10172215
> 
> 赞同：0
> 
> 时间：2012-04-16T10:11:24.317
> 
> 标签：assembly, x86, masm, masm32

我有这个代码：

```
.386
.model flat, stdcall
option casemap :none
include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib
.data
num dd ?
.code
start:
mov eax, 1
mov ebx, 1
add eax, ebx
push eax
pop num
sub num, 0
invoke StdOut, addr num
invoke ExitProcess, 0
end start 
```

它应该做的是做1+1，然后在控制台上显示结果。当我运行它时，它显示 2 的 ASCII 字符（第二个 ASCII 字符），而不是数字 2。我不知道如何让它显示数字 2，而不是第二个 ASCII 字符。我怎么做？

提前致谢，

程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:19:35.170

您可以将变量声明为字符串：

```
.data
num DB '2',0 ; maps "2" and a null-symbol to num 
```

您也可以将 48 添加到您的数字（这将给出正确的 ASCII 数字）（或减去以从字符串中获取整数）。

# java - Java webservice客户端，动态更改客户端证书

> ID：10172216
> 
> 赞同：2
> 
> 时间：2012-04-16T10:11:26.917
> 
> 标签：java, web-services, certificate, keystore

我有以下问题。我有一个 web 服务，它具有可以通过 SSL 调用的端点，还有一些只能通过使用客户端证书对客户端进行身份验证来调用。问题是我想动态更改客户端证书。我的代码是：

```
System.setProperty("javax.net.ssl.trustStore", "cacerts.jks");
System.setProperty("javax.net.ssl.trustStorePassword", "changeit");
//...
// first web service call, without client side certificate -> OK
//...
System.setProperty("javax.net.ssl.trustStore", "cacerts.jks");
System.setProperty("javax.net.ssl.trustStorePassword", "changeit");
System.setProperty("javax.net.ssl.keyStore", "keystore1.jks");
System.setProperty("javax.net.ssl.keyStoreType", "JKS");
System.setProperty("javax.net.ssl.keyStorePassword", "password");
//...
// second web service call 
```

我的问题是在第二个电话。在这里我得到一个例外：

```
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 
```

如果我只运行代码的第二部分，一切都很好，它可以完美运行（所以我确实拥有带有客户端证书的*keystore.jks*，并且服务器确实正确验证了我的请求）。我究竟做错了什么？调用 web 服务时如何动态更改客户端证书？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:24:02.987

我怀疑正在发生的是您正在使用某种方法，该方法将默认 JSSE`SSLContext`用于其 SSL 套接字工厂。从[文档](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)看来，SSL 上下文仅在首次创建时配置一次，并且在首次使用后设置系统属性无效。

我建议使用 Apache HttpClient。他们的[SSLSocketFactory](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/conn/ssl/SSLSocketFactory.html)实现允许对密钥库和信任库进行编程自定义，以用于与该工厂建立的连接。最重要的是，与 JDK 开箱即用的任何东西相比，HttpClient 为您提供了更多的功能和配置选项。

# c++ - c宏扩展出错

> ID：10172219
> 
> 赞同：0
> 
> 时间：2012-04-16T10:11:45.743
> 
> 标签：c++, macros

嗨，请找到以下简单的宏代码

```
#include <iostream>

#define INCL    #include

INCL <stdlib.h>

int main()
{
    std::cout << "Hello, world\n" << std::endl ;

    return 0;
} 
```

当我编译代码时它会抛出错误：程序中的流浪â#â

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:21:04.497

预处理器宏不能创建其他预处理器宏。在这方面你只是不走运。

但是，您*可以*使用宏作为包含参数：

```
#define FOO(x) "/usr/lib/" #x
#include FOO(mylib.h) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:20:48.697

C++ 构建包括以下阶段：

1.  预处理（宏扩展）
2.  编译
3.  链接

关键是您尝试使用预处理器（第 1 阶段）对自身进行预处理，这是行不通的。宏只能用于生成编译器代码。您不能将预处理器指令包装到预处理器宏中。

# javascript - 如何异步调试 JavaScript？（许多脚本正在加载）

> ID：10172220
> 
> 赞同：5
> 
> 时间：2012-04-16T10:11:49.250
> 
> 标签：javascript, ajax, debugging, fiddler, google-chrome-devtools

一般来说，我知道如何设置断点、检查变量、进入函数等......

**Default.htm**包含数百个脚本并且为空**占位符。**

 **理想情况下，我想一步一步地进行。像这样在第一行设置断点是行不通的：

![示例断点](../Images/c9c1eb232080d47e91133583234fb2b3.png)

当我跳过下一个函数调用时，它早已不复存在（一切都已加载）。

![Chrome 开发者工具](../Images/88d157a9c0a7453210cfa7bce529d06b.png)

通常如何调试异步加载脚本？*（时间线清楚地表明它们正在同时加载）*

也许我应该使用诸如 Fiddler 之类的 HTTP 代理？我知道如何设置简单断点（BPU）然后呢？ ![提琴手断点](../Images/e73e0b5ecf1bbb7ea780048898686383.png)

换句话说 -**哪种方法**-[我如何调试我的 JavaScript 代码？](https://stackoverflow.com/questions/988363/how-do-you-debug-your-javascript-code)- 适合我的需要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:50:20.153

如果您使用的是 chrome 开发工具：

1.  让网站加载
2.  在 js 的入口处放置一个断点。（如果您不知道它在哪里，而是在 Sources 选项卡下的每个文件的最外层范围内设置一个断点。
3.  F5（刷新网页）
4.  第一个被击中的断点是你的入口点。F11 - 进入，F10 = 跨过。

希望这可以帮助。**

# windows-phone-7 - itemlistbox 的 ScrollIntoView 不滚动 WP7

> ID：10172221
> 
> 赞同：0
> 
> 时间：2012-04-16T10:12:02.340
> 
> 标签：windows-phone-7

我有一个列表框，其中有多个项目，很像全景视图，我希望它在用户停止操作它时轻轻滚动到视图中，所以如果它在左侧超过 100 像素，我想要左组件滑动/滑入视图。但是当我调用列表框的 ScrollIntoView 方法时，它不会滚动到视图中，而是立即选择它，我觉得这非常令人不安和丑陋。有没有办法设置列表框的选定项目，然后轻轻滚动到视图中？

# c++ - 什么代码更适合用于运算符重载

> ID：10172222
> 
> 赞同：1
> 
> 时间：2012-04-16T10:12:03.877
> 
> 标签：c++, operator-overloading, operator-keyword

> **可能重复：**
> [将运算符重载为成员函数或非成员（朋友）函数？](https://stackoverflow.com/questions/1905439/overload-operators-as-member-function-or-non-member-friend-function)

在学习 C++ 中的运算符重载的过程中，我看到了两种不同类型的重载运算符 +。

我需要你的帮助告诉我哪种方法更好用： 方法优先：

```
Complex Complex::operator + (Complex &obj) {
   return Complex( re + obj.re, im + obj.im );
} 
```

方法二：

```
Complex operator + (const Complex &obj1, const Complex &obj2) { 
    // this function is friend of class complex
    return Complex(obj1.re + obj2.re, obj1.im + obj2.im);
} 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:30:53.803

As long as there can be no implicit conversions, both are equally good; it's more a matter of taste. If there can implicit conversions to `Complex` (which in this case seems likely), then with the first form, implicit conversions will only work on the second argument, e.g.:

```
Complex c;
Complex d;

d = c + 1.0;    //  Works in both cases...
d = 1.0 + c;    //  Only works if operator+ is free function 
```

In such cases, the free function is by far the preferred solution; many people prefer it systematically, for reasons of orthogonality.

In many such cases, in fact, the free function `operator+` will be implemented in terms of `operator+=` (which will be a member):

```
Complex
operator+( Complex const& lhs, Complex const& rhs )
{
    Complex results( lhs );
    results += rhs;
    return results;
} 
```

In fact, it's fairly straightforward to provide a template base class which provides all of these operators automatically. (In this case, they're declared `friend`, in order to define them in line in the template base class.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:20:34.573

Bjarne Stroustrup 建议您使用第二种形式，用于不修改对象本身或根据提供的参数生成新值/对象的情况。

# ad-hoc-distribution - 如何说服测试用户为 Ad Hoc Distribution 提供他们的 UDID？

> ID：10172224
> 
> 赞同：2
> 
> 时间：2012-04-16T10:12:26.073
> 
> 标签：ad-hoc-distribution

我的应用程序目前开发良好，但尚未在 App Store 上发布。40 名志愿者愿意测试我的应用程序。我想让他们通过 Over The Air (OTA) Ad Hoc distribtuion 测试我的应用程序。但是，由于我需要他们的 UDID 将他们的 iPhone 设置为 iOS 配置门户上的测试设备，因此测试用户可能不想提供此类私人信息。此外，配置文件是否包含测试用户的所有 UDID？我担心如果有人打开配置文件会知道所有的 UDID。是否有经验丰富的开发人员已经成功说服测试用户为 Ad Hoc 分发提供他们的 UDID？

由于公司会联系测试用户，他们说很难询问测试用户的UDID。是否有第二种解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:11:48.147

我同意向人们询问他们的 UDID 是很尴尬的。

有一个免费的应用程序可以让他们自动将他们的 UDID 发送给您。我发现说服测试用户使用它不仅更容易，而且让他们的过程更容易。

[https://itunes.apple.com/us/app/ad-hoc-helper/id285691333](https://itunes.apple.com/us/app/ad-hoc-helper/id285691333)

# regex - 如何移动多个不同目录中的多个文件（在 Linux 上）

> ID：10172225
> 
> 赞同：0
> 
> 时间：2012-04-16T10:12:26.963
> 
> 标签：regex, linux, file, bash, shell

我的问题是我在单个目录中有太多文件。我不能“ `ls`”目录，因为太大了。我需要将所有文件移动到更好的目录结构中。

我以相反的方式使用 ID 中的最后 3 位数字作为文件夹。

例如 ID`2018972`必须进入`/2/7/9/img_2018972.jpg`。

我已经创建了目录，但现在我需要 bash 脚本的帮助。我知道 ID，在范围内`1,300,000 - 2,000,000`。但我无法处理正则表达式。

我不想像这样移动所有文件：

```
/images/folder/img_2018972.jpg -> /images/2/7/9/img_2018972.jpg 
```

我将不胜感激有关此主题的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:24:31.150

*编辑*：在评论中解释后，存在以下假设：

*   文件名的形式为`img_<id>.jpg`或`img_<id>_<size>.jpg`
*   新目录是**id**的最后三个数字的*相反顺序*

 **使用 Bash：

```
for file in /images/folder/*.jpg; do 
    fname="${file%.*}"      # remove extension and _<size>
    [[ "$fname" =~ img_[0-9]+_[0-9]+$ ]] && fname="${fname%_*}"

    last0="${fname: -1:1}"  # last letter/digit
    last1="${fname: -2:1}"  # last but one letter/digit
    last2="${fname: -3:1}"  # last but two letter/digit

    newdir="/images/$last0/$last1/$last2"
    # optionally check if the new dir exists, if not create it
    [[ -d "$newdir" ]] || mkdir -p "$newdir"

    mv "$file" "$newdir"
done 
```

如果`*`无法处理（尽管我认为`*`在 for 循环中没有限制），请按照@Michał Kosmulski 在评论中的建议
使用`find`

```
while read -r; do 
    fname="${REPLY%.*}"     # remove extension and _<size>
    [[ "$fname" =~ img_[0-9]+_[0-9]+$ ]] && fname="${fname%_*}"

    last0="${fname: -1:1}"  # last letter/digit
    last1="${fname: -2:1}"  # last but one letter/digit
    last2="${fname: -3:1}"  # last but two letter/digit

    newdir="/images/$last0/$last1/$last2"
    # optionally check if the new dir exists, if not create it
    [[ -d "$newdir" ]] || mkdir -p "$newdir"

    mv "$REPLY" "$newdir"
done < <(find /images/folder/ -maxdepth 1 -type f -name "*.jpg") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:47:30.153

```
find /images/folder -type f -maxdepth 1 | while read file
do
filelen=${#file}
((rootn=$filelen-5))
((midn=$filelen-6))
((topn=$filelen-7))
root=${file:$rootn:1}
mid=${file:$midn:1}
top=${file:$topn:1}
mkdir -p /images/${root}/${mid}/${top}
mv $file /images/${root}/${mid}/${top}
done 
```**

# ios - iOS 从外部附件读取文件

> ID：10172226
> 
> 赞同：0
> 
> 时间：2012-04-16T10:12:38.070
> 
> 标签：ios, file-io, filesystems

我了解 Apple 允许您开发使用外部附件的应用程序。

您如何使用此 API 读写文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:06:23.153

你想在哪里写文件？

首先，您必须阅读有关 ExternalAccessory 框架的[Apple 文档](http://developer.apple.com/library/ios/#featuredarticles/ExternalAccessoryPT/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009502)。

# actionscript-3 - 我想知道如何计算开始日期（日期字段）小于总是从结束日期（日期字段）开始？

> ID：10172228
> 
> 赞同：0
> 
> 时间：2012-04-16T10:12:48.400
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我有一个表格，我在其中添加了两个日期

1.  开始日期
2.  结束日期

我想知道我如何验证所选的开始日期始终小于结束日期（实际上是到期日期）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:30:38.603

你可以做这样的事情来比较日期，

```
trace(validateDate(new Date(2008, 5, 1), new Date(2008, 6, 1)));  

protected function validateDate(date1:Date, date2:Date):Boolean
{
    return (date1.time < date2.time);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:26:06.170

你看起来像这样。试试这个功能：

```
public function compare (Start_date: Date, End_Date : Date) : Number
{
    var Start_date1 : Number = Start_date.getTime ();
    var End_Date1 : Number = End_Date.getTime ();

    if (Start_date1 > End_Date1)
    {
        result = 0;
    }
    else 
    {
        result = 1;
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:59:07.163

小样本

```
 <mx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import mx.utils.ObjectUtil;
            import mx.events.CalendarLayoutChangeEvent;

            private function compareDate():void {
                var fromDateFormat:String = DateField.dateToString(new Date(fromDates.selectedDate), "YYYY/MM/DD");
                var toDateFormat:String = DateField.dateToString(new Date(toDates.selectedDate), "YYYY/MM/DD");
                var todayDateStr:String = DateField.dateToString(new Date(), "YYYY/MM/DD");

                var fromDate:Date = DateField.stringToDate(fromDateFormat, "YYYY/MM/DD");
                var toDate:Date = DateField.stringToDate(toDateFormat, "YYYY/MM/DD");
                var todayDate:Date = DateField.stringToDate(todayDateStr, "YYYY/MM/DD");

                if(ObjectUtil.dateCompare(todayDate , fromDate) >= 0 && ObjectUtil.dateCompare(todayDate , toDate) <=0){
                    Alert.show("Valid");
                }else{
                    Alert.show("InValid");
                }
            }
        ]]>
    </mx:Script>
    <mx:DateField id="fromDates"/>
    <mx:DateField id="toDates"/>

    <mx:Button id="checkValidity" click="compareDate()"/>

</mx:Application> 
```

或者

检查以下链接进行验证

[http://www.iambredsoiblog.eu/flexfiles/start_end_date_check/srcview/index.html](http://www.iamboredsoiblog.eu/flexfiles/start_end_date_check/srcview/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T10:16:49.673

您可以直接使用两个数据字段并禁用结束日期字段日期小于开始日期字段

你可以这样做

```
<mx:DateField id="stDate"/>
<mx:DateField id="endDate" selectableRange="{{rangeStart: stDate.selectedDate}}"/> 
```

从上面您不需要将结束日期与开始日期进行比较......因为在结束日期字段中将不会启用小于开始日期的日期......

# c++ - 使用 try_lock 增强锁定

> ID：10172229
> 
> 赞同：4
> 
> 时间：2012-04-16T10:12:52.463
> 
> 标签：c++, multithreading, boost, locking

我正在尝试解决 Boost 1.46.1 的锁定问题——我尝试了一些东西，但我并不高兴——因此很想听听干净利落的输入。

线程 A：

*   必须始终等待并获得关键数据部分的锁定
*   更新一些关键数据
*   手动解锁（或范围）

线程 B - 绝不能阻塞 (try_lock?) - 如果获得锁，则从提到的临界区读取数据

我不确定我是否需要一个 shared_lock 或者我是否可以解决这个问题。

编辑，我的代码看起来像： 线程 A：

```
{
 // Critical section
 boost::mutex::scoped_lock  lock( _mutex) ;
} 
```

线程 B：

```
boost::mutex::scoped_lock lock(_mutex, boost::try_to_lock);
if( lock ) {

} 
```

但是我无法记录失败的 try_lock - 所以我想知道它是否真的有效。

问候，保罗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T14:08:48.507

对我来说，它似乎正在工作，除了作用域锁不是 FIFO，即第一个请求锁的线程，不是第一个获得锁的线程。我使用以下代码进行测试：

```
#include <boost/thread.hpp>
#include <cstdio>

boost::mutex mutex;

void threadA()
{
    for (int i = 10; i > 0; )
    {
        boost::mutex::scoped_lock lock(mutex);
        {
            fprintf(stderr, "Locked by A\n");
            usleep(100000);
            fprintf(stderr, "Unlocked by A\n");
            i--;
        }
    }
}

void threadB()
{
    for (int i = 10; i > 0; )
    {
        boost::mutex::scoped_lock lock(mutex, boost::try_to_lock);
        if (lock)
        {
            fprintf(stderr, "Locked by B\n");
            usleep(100000);
            fprintf(stderr, "Unlocked by B\n");
            i--;
        }
        else
        {
            fprintf(stderr, "Lock failed in B\n");
            usleep(100000);
        }
    }
}

int main(int argc, char **argv)
{
    boost::thread a(threadA);
    boost::thread b(threadB);
    a.join();
    b.join();
} 
```

我得到了输出

```
Locked by A
Lock failed in B
Lock failed in B
Unlocked by A
Locked by A
Unlocked by A
Locked by A
Lock failed in B
Unlocked by A
Locked by A
Lock failed in B
Unlocked by A
Locked by A
Lock failed in B
Unlocked by A
Locked by A
Lock failed in B
Unlocked by A
Locked by A
Lock failed in B
Unlocked by A
Locked by A
Lock failed in B
Unlocked by A
Locked by A
Lock failed in B
Lock failed in B
Unlocked by A
Locked by A
Unlocked by A
Locked by B
Unlocked by B
Locked by B
Unlocked by B
Locked by B
Unlocked by B
Locked by B
Unlocked by B
Locked by B
Unlocked by B
Locked by B
Unlocked by B
Locked by B
Unlocked by B
Locked by B
Unlocked by B
Locked by B
Unlocked by B
Locked by B
Unlocked by B 
```

# iphone - 如何根据TitleView中文字的长度设置UINavigationBar的高度？

> ID：10172235
> 
> 赞同：0
> 
> 时间：2012-04-16T10:13:21.810
> 
> 标签：iphone, objective-c, ios

> **我已将 UINavigationBar titleView 设置如下：**

```
UIView *labelView=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 255, 40)];
       UILabel *label = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 200, 40)];
       [label setTextColor:[UIColor whiteColor]];
        label.lineBreakMode=UILineBreakModeWordWrap;
        label.numberOfLines=0;
        label.shadowColor = [UIColor colorWithRed:0.0f/255.0f green:0.0f/255.0f blue:0.0f/255.0f alpha:0.25f];
        label.shadowOffset = CGSizeMake(0.0f, -1.0f);
        label.textAlignment = UITextAlignmentCenter;
        label.adjustsFontSizeToFitWidth=YES;

      [label setBackgroundColor:[UIColor clearColor]];

      switch (genreId) {
       case 1:
        label.text=@"Music";
        self.navigationItem.titleView =label;
        break;
       case 3:
        label.text=@"Family";
        break;
       case 6:
        label.text=@"Literature";
        break;
       case 7:
        label.text=@"Theatre";
        break;
       default:
        label.frame=CGRectMake(0, 0, 255, 40);
        label.text=ArtistName;
        break;
      }

      [label setFont:[UIFont boldSystemFontOfSize:20.0]];
      [labelView  addSubview:label];
      [self.navigationItem setTitleView:labelView];

      [label release]; 
```

> **现在我想更新 UINavigationBar 的高度，因为在我们增加 UINavigationBar 的高度之前，标题视图中的自动换行不会显示。我该怎么做？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:30:07.307

use this code.....and chill......

```
NSString *summary;
summary = @" your title";

 // define font size what ever you want....
CGSize s = [summary sizeWithFont:[UIFont systemFontOfSize:30] 
               constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)     // - 40 For cell padding
                   lineBreakMode:UILineBreakModeWordWrap];

CGRect frame = CGRectMake(0.0f, 0.0f, 320.0f, s.height);
[self.navigationController.navigationBar setFrame:frame]; 
```

Hope, it will help you...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:28:21.247

我认为您必须使用自定义图像创建一个自定义 UINavigationBar，然后您可以做任何您想做的事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T10:29:15.040

尝试这个，

```
@implementation UINavigationBar (CustomHeight)

- (void)layoutSubviews {
  [super layoutSubviews];
  CGRect barFrame = self.frame;
  barFrame.size.height = height;
  self.frame = barFrame;
}

@end 
```

# magento - 如何在两个日期之间获取所有产品？

> ID：10172240
> 
> 赞同：5
> 
> 时间：2012-04-16T10:13:50.940
> 
> 标签：magento, magento-1.4

如何获取上个月产品、本月产品、上周产品和本周产品等两个日期之间的所有产品。

我试过这个：

```
// current day to start with
$start = mktime(0,0,0,date('m'), date('d'), date('Y'));;

// calculate the first day of last month
$first = date('YYYY-MM-DD',mktime(0,0,0,date('m',$start) - 1,1,date('Y',$start)));

// calculate the last day of last month
$last = date('YYYY-MM-DD',mktime(0, 0, 0, date('m') -1 + 1, 0, date('Y',$start)));

   if($filter == "lastmonth"){

    $collection = Mage::getModel('catalog/product')->getCollection();
    $collection->addAttributeToFilter('updated_at', array('gteq' =>$first));
    $collection->addAttributeToFilter('updated_at', array('lteq' => $last));

} 
```

但我无法得到结果:(有什么帮助吗？

**大牛回复后修改！**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-12T13:59:08.997

1）首先，您需要将日期格式从“YYYY-MM-DD”更改为“Ymd”。这将返回 magento 记录具有的日期格式。

2）日期有一个特殊条件，如下面的例子所示。

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addAttributeToFilter('updated_at', array('gteq' =>$first));
$collection->addAttributeToFilter('updated_at', array('lteq' => $last)); 
```

至。

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addAttributeToFilter('updated_at', array(
        'from' => $first,
        'to' => $last,
        'date' => true,
        )); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T12:06:19.270

我试过你的代码，不得不交换`'lteq'`并`'gteq'`让它工作。是较小的`$fromdate`数字，因此您正在搜索*大于*该数字的日期。

此外，您必须记住按照 MySQL 的喜好格式化日期；`date('Y-m-d')`.

[PS。有关完整列表，请参阅[比较运算符](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections)]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T12:46:18.783

您的代码存在一个问题：

```
$collection->addFieldToFilter() 
```

应该：

```
$collection->addAttributeToFilter() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-13T14:38:52.800

我知道这个问题有点老了，但由于它在搜索引擎结果中的排名很高，我将更正**date()**函数，它可以更好地作为参数，例如：**Ymd H:i:s**。我希望它会有所帮助！

# jquery-ui - Jqgrid + JQuery 自动完成多输入

> ID：10172241
> 
> 赞同：0
> 
> 时间：2012-04-16T10:13:53.287
> 
> 标签：jquery-ui, jqgrid, autocomplete

我已经设置好网格并且工作得很好。我想在 JqGrid 的表单视图中添加多个输入自动完成功能。多个自动完成功能有效，但 extractLast 功能似乎不起作用，我可以添加重复的输入。继承人的代码：

```
var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
function split( val ) {
        return val.split( /,\s*/ );
        }
        function extractLast( term ) {
            return split( term ).pop();
        }
        function autocomplete_element(value, options) {
          // creating input element
          var $ac = $('<input type="text"/>');
          // setting value to the one passed from jqGrid
          $ac.val(value);
          // creating autocomplete
          $ac.autocomplete(
                {source: function( request, response ) {
                // delegate back to autocomplete, but extract the last term
                response( $.ui.autocomplete.filter(
                    availableTags, extractLast( request.term ) ) );
            },

                focus: function() {
                    // prevent value inserted on focus
                    return false;
                },
                select: function( event, ui ) {
                    var terms = split( this.value );
                    // remove the current input
                    terms.pop();
                    // add the selected item
                    terms.push( ui.item.value );
                    // add placeholder to get the comma-and-space at the end
                    terms.push( "" );
                    this.value = terms.join( ", " );
                    return false;
                }
            });
          // returning element back to jqGrid
          return $ac;
        }
        function autocomplete_value(elem, op, value) {
          if (op == "set") {
            $(elem).val(value);
          }
          return $(elem).val();
        } 
```

网格模型：

```
{
                ...
                editable: true,
                edittype: "custom",
                editoptions: {
                    custom_element: autocomplete_element,
                    custom_value: autocomplete_value
                }
            }, 
```

我从[JQuery UI中找到的](http://jqueryui.com/demos/autocomplete/#multiple)

和[德国朗姆酒的博客](http://germanrumm.eu/adding-jqueryui-autocomplete-to-jqgrid-edit-form/)

有什么建议么？

**更新！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:24:26.577

看起来 jQuery UI 站点上的示例也允许多次选择相同的元素。问题出在`source`功能上——在创建建议列表时，它总是会根据所有可用术语检查最后一个术语。

修改`select`回调以仅显示那些尚未出现在字段中的术语。

```
source: function(request, response) {
  var terms = request.terms.split(/,\s*/);
  var last_term = terms.pop();

  var tags = $.grep(availableTags, function(el) {
    return $.inArray(el, terms) == -1);
  });

  response($.ui.autocomplete.filter(tags, last_term))
} 
```

# jquery - 仅在 url 不包含锚符号时执行脚本

> ID：10172242
> 
> 赞同：0
> 
> 时间：2012-04-16T10:13:53.313
> 
> 标签：jquery, url, hash, comments, show-hide

我在我的网站 www.riscograma.ro 上有以下脚本可以隐藏评论部分，除非另有说明：

```
jQuery(function($)  {
$('#comments').hide();
$('#showcomments').click(function(e)    {
    if($('#comments').is(':hidden'))    {
        $('#comments').show();
}   }); }); 
```

问题是指向单个评论或回复表单的链接不再指向它们应该指向的位置，因为目标是隐藏的。

我认为解决此问题的方法是仅在 url 中没有锚符号 (#) 时执行脚本。我尝试添加以下行（和变体）：

```
jQuery(function($)  {
if(window.location.hash.indexOf("#")==0)    {
    $('#comments').hide();  }
    $('#showcomments').click(function(e)    {
        if($('#comments').is(':hidden'))    {
            $('#comments').show();
}   }); }); 
```

但它不起作用（即评论 div 始终可见）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:16:41.690

`indexOf``-1`如果未找到将返回，`0`表明它是在 index 找到的`0`。

# java - 有关 log4j 设置的一些查询？

> ID：10172244
> 
> 赞同：0
> 
> 时间：2012-04-16T10:14:10.910
> 
> 标签：java, log4j

我对 log4j.properties 有以下设置。但是所有日志文本，无论是信息、调试、异常还是致命的都转到`MyDebugFile`. 不会创建以异常为前缀的文件。
我的问题是：

1.  我可以为 log4j.appender.EXCEPTION_LOG_FILE 和 log4j.appender.DEBUG_LOG_FILE 提及相同的文件吗
2.  属性 log4j.appender.EXCEPTION_LOG_FILE.Threshold 指定了什么？
3.  为什么没有创建以异常为前缀的文件？

### 设置记录到异常日志文件的消息格式。

```
 log4j.appender.EXCEPTION_LOG_FILE=biz.minaret.log4j.DatedFileAppender
 log4j.appender.EXCEPTION_LOG_FILE.Threshold=INFO
 log4j.appender.EXCEPTION_LOG_FILE.Directory=C:/log/
 log4j.appender.EXCEPTION_LOG_FILE.Prefix=exception.
 log4j.appender.EXCEPTION_LOG_FILE.Suffix=.log
 log4j.appender.EXCEPTION_LOG_FILE.layout=org.apache.log4j.PatternLayout
 log4j.appender.EXCEPTION_LOG_FILE.layout.ConversionPattern=%d [%t] %-5p %c{3} - %m%n
 log4j.appender.EXCEPTION_LOG_FILE.MaxFileSize=100KB
 log4j.appender.EXCEPTION_LOG_FILE.MaxBackupIndex=4 
```

### 设置记录到调试日志文件的消息格式。

```
 log4j.appender.DEBUG_LOG_FILE=biz.minaret.log4j.DatedFileAppender
 log4j.appender.DEBUG_LOG_FILE.Directory=C:/log/
 log4j.appender.DEBUG_LOG_FILE.Prefix=MyDebugFile.
 log4j.appender.DEBUG_LOG_FILE.Suffix=.log
 log4j.appender.DEBUG_LOG_FILE.layout=org.apache.log4j.PatternLayout
 log4j.appender.DEBUG_LOG_FILE.layout.ConversionPattern=%d [%t] %-5p %c{3} - %m%n
 log4j.appender.DEBUG_LOG_FILE.MaxFileSize=100KB
 log4j.appender.DEBUG_LOG_FILE.MaxBackupIndex=4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:44:47.683

1.  我可以为 log4j.appender.EXCEPTION_LOG_FILE 和 log4j.appender.DEBUG_LOG_FILE 提及相同的文件吗

--> 由于同步问题，我不认为 log4j 真的支持两个 appender 写入同一个文件。

2\. 属性 log4j.appender.EXCEPTION_LOG_FILE.Threshold 指定了什么？

--> 在这里阅读一篇文章[。](http://docs.jboss.org/process-guide/en/html/logging.html)

3\. 为什么没有创建以异常为前缀的文件？

--> 对此我没有任何想法。

这应该可以帮助你

log4j.rootLogger=EXCEPTION_LOG_FILE, DEBUG_LOG_FILE

# 设置 A1

log4j.appender.EXCEPTION_LOG_FILE=org.apache.log4j.RollingFileAppender log4j.appender.EXCEPTION_LOG_FILE.Threshold=INFO log4j.appender.EXCEPTION_LOG_FILE.File=exception.log ...

# 设置 A2

log4j.appender.DEBUG_LOG_FILE=org.apache.log4j.RollingFileAppender log4j.appender.DEBUG_LOG_FILE.Threshold=DEBUG log4j.appender.DEBUG_LOG_FILE.File=MyDebugFile.log

# c# - 向 ASP.NET 提交 Javascript 变量 PLUS 表单数据

> ID：10172250
> 
> 赞同：1
> 
> 时间：2012-04-16T10:14:28.273
> 
> 标签：c#, javascript, asp.net

我有这个代码：

```
var myArray = new Array();
var counter = 0;
function addElementToForm(value){
    counter ++;
    if (counter < 10)
    {
        $("#cheese").append(value + '<input type="number" value="0"><br />');
        myArray.push(counter + value);
    }
}; 
```

我在同一页面上有一个 ASP.NET 表单，在表单的 sumbit 按钮的相同操作中，我也希望能够从代码文件访问 myArray ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:04:40.030

取一个隐藏控件并将其设置为`runat="server"`并尝试将数组值保留在隐藏控件中并从代码隐藏文件中访问它。

# perl - 如何使用 Win32::Console 读取特殊键？

> ID：10172253
> 
> 赞同：3
> 
> 时间：2012-04-16T10:15:05.980
> 
> 标签：perl, terminal

当我按`Up`- 键时，此脚本 ( [Term::TermKey](http://search.cpan.org/perldoc?Term%3a%3aTermKey) ) 输出`You pressed: <Up>`。

```
#!/usr/bin/env perl
use warnings;
use 5.012;
use Term::TermKey;

my $tk = Term::TermKey->new( \*STDIN );
say "Press any key";
$tk->waitkey( my $key );
say "You pressed: <" . $tk->format_key( $key, 0 ) . ">"; 
```

如何使用[Win32::Console](http://search.cpan.org/perldoc?Win32%3a%3aConsole)达到相同的结果？
我试过这个，但它只适用于“普通”键，如`l`, `k`, ... 但不适用于`Up`, `Delete`, ...

```
use Win32::Console;

my $in = Win32::Console->new(STD_INPUT_HANDLE);
$in->Mode(ENABLE_PROCESSED_INPUT);
my $result = $in->InputChar(1);
say "<$result>"; 
```

我怎么能用`Up`, `Delete`, ...制作工作键`Win32::Console`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:42:40.147

向上键不会产生字符。`InputChar`不可能退货。你需要使用`Input`.

```
my $con_in = Win32::Console->new(STD_INPUT_HANDLE);
for (;;) {
   my @event = $con_in->Input();

   my $event_type = shift(@event);
   next if !defined($event_type) || $event_type != 1;  # 1: Keyboard

   my ($key_down, $repeat_count, $vkcode, $vscode, $char, $ctrl_key_state) = @event;
   if ($vkcode == VK_UP && ($ctrl_key_state & SHIFTED_MASK) == 0) {
      if ($key_down) {
         say "<Up> pressed/held down" for 1..$repeat_count;
      } else {
         say "<Up> released";
      }
   }
} 
```

有关键盘事件的更多信息，请参阅[KEY_EVENT_RECORD](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684166%28v=vs.85%29.aspx)。

请参阅[虚拟键代码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)以识别键。

* * *

上述代码的标题和定义：

```
use strict;
use warnings;
use feature qw( say );

use Win32::Console qw( STD_INPUT_HANDLE );

use constant {
   RIGHT_ALT_PRESSED  => 0x0001,
   LEFT_ALT_PRESSED   => 0x0002,
   RIGHT_CTRL_PRESSED => 0x0004,
   LEFT_CTRL_PRESSED  => 0x0008,
   SHIFT_PRESSED      => 0x0010,

   VK_UP => 0x26,
};

use constant SHIFTED_MASK =>
   RIGHT_ALT_PRESSED |
   LEFT_ALT_PRESSED |
   RIGHT_CTRL_PRESSED |
   LEFT_CTRL_PRESSED |
   SHIFT_PRESSED; 
```

# c# - 哪个占用更多内存、字符串值或长值？

> ID：10172259
> 
> 赞同：2
> 
> 时间：2012-04-16T10:15:44.897
> 
> 标签：c#, vb.net, variables, memory, byte

我有一个连接到 WCF 服务的客户端应用程序，我从服务器获取文件大小作为一个`long`值，然后在客户端将其转换为`string`它看起来像 ex：`52.21 MB`

每次用户更改当前目录路径时，应用程序都会获得过多的文件大小。

**我的问题：**我应该将值从**WCF 服务应用程序**`string`转换为格式，然后将其作为 a 返回给客户端，还是应该将大小作为值返回并让客户端将其转换为格式**`string``long``string`**

 **以其他方式，哪个值在内存中占用更多字节：

```
long size = 55050240;
string size = "52.5 MB"; 

long large_size = 56371445760;
string large_size = "52.5 GB"; 
```

### 更新：

我使用这种方法将 long 值转换为字符串格式：

```
private string ConvertUnit(long source)
    {
        const int byteConversion = 1024;
        double bytes = Convert.ToDouble(source);

        if (bytes >= Math.Pow(byteConversion, 3)) //GB Range
        {
            return string.Concat(Math.Round(bytes / Math.Pow(byteConversion, 3), 2), " GB");
        }
        else if (bytes >= Math.Pow(byteConversion, 2)) //MB Range
        {
            return string.Concat(Math.Round(bytes / Math.Pow(byteConversion, 2), 2), " MB");
        }
        else if (bytes >= byteConversion) //KB Range
        {
            return string.Concat(Math.Round(bytes / byteConversion, 2), " KB");
        }
        else //Bytes
        {
            return string.Concat(bytes, " Bytes");
        }
    } 
```

**简短的问题：**哪个需要更多的内存、`string`价值或`long`价值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T10:23:11.820

“哪个需要更多内存，字符串值或长值”

C# 中的字符串是 Unicode 字符（每个字符是两个字节）+ 指向该地址的指针（最少 4 个字节，在 x64 .NET 应用程序上为 8 个字节）。

Long 是 8 个字节。一旦您在 x86 上超过 2 个字符，或者在 x64 上超过任何字符，您将占用比 long 更多的内存。

但是，字符串是不可变的，如果您要发送大量相同大小的文件，字符串最终会消耗更少的内存。

对于您的实际问题，您应该使用 long 来真正表示底层对象。

编辑：更正以考虑字符串的指针大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T10:22:19.927

拥有一个输出格式化值的服务层是一个非常糟糕的主意。如果需求发生变化，而不是**GB**后缀，客户端应用程序 UI 需要以字节为单位输出，会发生什么情况？例如`56,371,445,760`？这将需要客户端应用程序解析然后重新格式化服务器发送的数据。

此外，确定存储单个变量所需的内存也很容易。不太容易计算出对您的应用程序的整体影响。不同的类型将在您的代码中以不同的方式处理，因此较小的变量可能会产生更大的成本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T10:24:10.333

.NET 字符串是 UTF-16 代码单元的数组，每个 2 字节长。因此，“52.5 MB”将占用 7*2=14 个字节，即使忽略对字符串的引用（4 或 8 个字节，具体取决于进程“位”）和字符串长度等辅助字段。是`long`8 个字节，所以很明显这个字符串“更胖”了。

此外，您的示例没有传达相同的信息（您正在失去字符串中的“精度”），因此就像比较苹果和橙子一样。

即使在 SOAP 消息中编码，long 也应该比 string 更紧凑。

由于所有这些原因，我会选择`long`.**

# memory-management - 为了避免电晕sdk中的内存泄漏

> ID：10172273
> 
> 赞同：0
> 
> 时间：2012-04-16T10:16:54.337
> 
> 标签：memory-management, coronasdk

我使用`spritext()`动画的方法，我尝试使用该`dispose()`方法释放spritesheets的内存，但它显示错误。

如何释放 spritesheets 的内存？

```
 local spritext = require("spritext")
   local arr      = {"images/rainbow2.png","images/rainbow1.png"}   

   local myAnim   = spritext.newAnim(arr[1], 600,350, 1, 15);
         myAnim.x = display.contentWidth/2;
         myAnim.y = display.contentHeight/2 -70;
         r:insert(myAnim);

   myAnim:play{ startFrame=1, endFrame=15, loop=1 }

   local function cleanUp()
       myAnim:dispose();
   end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T21:34:37.743

你在使用 SpriteSheet 的 API 吗？我相信 object:dispose 已被弃用。

使用它的新方法是通过 SpriteObject，它继承自 DisplayObject API。 [http://docs.coronalabs.com/api/type/SpriteObject/index.html](http://docs.coronalabs.com/api/type/SpriteObject/index.html) - SpriteObject

您应该能够从 DisplayObject API 调用 object:removeSelf。[http://docs.coronalabs.com/api/type/DisplayObject/removeSelf.html](http://docs.coronalabs.com/api/type/DisplayObject/removeSelf.html)

这是我如何处理精灵表的片段。

```
-- Import sprite sheet
local someSheet = graphics.newImageSheet( "someimages.png", someInfo:getSheet() ) -- ImageSheet.png is the image Texture packer published

-- Set sprite sequence data.
local someSequenceData = {
     { name="dance", frames={8,1,2,3,4,5,4,3,2,1,8}, time=2000, loopCount=1},
     { name="sad", frames={8,9,8}, time=3000, loopCount=1},
     { name="happy", frames={8,5,8}, time=3000, loopCount=1},
     { name="smile", frames={8,10,8}, time=3000, loopCount=1},
     { name="hit", frames={7,8}, time=2000, loopCount=1}
}

-- load sprite object
spriteObject = display.newSprite( someSheet, someSequenceData )
spriteObject.x = display.contentWidth/2
spriteObject.y = display.contentHeight/2

-- play one of the animations
spriteObject:play("dance")

-- to remove the entire sprite object
spriteObject:removeSelf() 
```

快速说明：对于我的精灵表，我使用了一个名为“TexturePacker”的应用程序，我只是将一些图像放入其中，设置一些设置，然后它会构建一个打包的精灵表，以及一个与之配套的数据表。

编辑：我没有意识到这个问题已经很老了。哦，好吧。我希望这对某人有所帮助。:P

# php - array_splice 后 foreach 计数未更新

> ID：10172275
> 
> 赞同：0
> 
> 时间：2012-04-16T10:16:58.423
> 
> 标签：php, foreach, array-splice

我有两个大数组：

```
$a = array('a1','a2','a3','a4'); // and so on
$b = array('b1'=>'a1', 'b2'=>'a3', 'b3'=>'a1'); // 
```

我想得到以下结果：

```
$a = array('a1'=>array('b1', 'b3'), 'a2'=>array(), 'a3'=>array('b2') ); 
```

我可以这样做：

```
foreach($a as $aa){
    foreach($b as $bb){
        // check with if then add to a
    }
} 
```

但随着数字的增加，它会变得非常大。

所以我想到如果我在添加到`$a`下一个循环后删除每个“b”元素会更小，我会削减资源。

但是在拼接循环数组时，索引似乎没有更新，并且下一个循环没有考虑到它被减1的事实。

我怎样才能使这项工作，还有，是否有更好的方法将数组的项目拟合到另一个数组的适当索引中？

编辑：

如果两者的结构`$a`都是`$b`：

```
$a[0]['Word']['id']=1;
$a[0]['Word']['sentence_id']=2;
$a[0]['Word']['word_string']='someWord';

$b[0]['Word']['id']=3;
$b[0]['Word']['sentence_id']=4;
$b[0]['Word']['word_string']='someWord';

// And i would like to list `b` like so:
$a[0]['list_of_bs']=array(b[0], b[1]);
//So that i can get:
echo $a[0]['list_of_bs']['Word']['id'];
// and to get result 3 
```

我希望它是`$a[0][Word][list_of_b]=array(b1,b2,b3)`并且每个`b`'s 在关联数组中都有自己的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:38:52.280

试试这个，

```
$a = array('a1','a2','a3','a4');
$b = array('b1'=>'a1', 'b2'=>'a3', 'b3'=>'a1');

foreach($a as $values)
{
    $key = array_keys($b, $values);

    $new_array[$values] = $key;
} 
```

$new_array -> 将是您需要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:28:02.670

不，没有其他方法可以减轻服务器的负载。

您只需要以这种方式执行此操作。

甚至 array_walk 也需要像循环方式一样执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:30:11.670

您将两个循环放在一起的方式没有经过深思熟虑。不要把它们放在一起，而是一个接一个地：

```
foreach ($a as $aa) {
    // transform a
}
foreach ($b as $bb){
    // check with if then add to a
} 
```

这将进行`count(a) + count(b)`迭代而不是`count(a) * count(b)`迭代 - 除非 a 和 b 只有一个元素，否则迭代会更少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:35:52.777

从@hakre 汲取灵感..

为什么不循环通过 $b

```
new_arr = new array
foreach $b as $bb
  new_arry($bb->val).push($bb->key)

foreach $new_arry as $nn
  if $nn doesn't exist in $a then remove 
```

# android - Android prob 在 webview 中显示 pdf

> ID：10172276
> 
> 赞同：0
> 
> 时间：2012-04-16T10:17:20.800
> 
> 标签：android, pdf, webview, google-docs

我正在使用 android`Webview`加载一个 url 来显示一个 pdf 文件。这是我的代码：

```
public class TestProgectActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        WebView mtWebView=new WebView(this);
        setContentView(mtWebView);

        mtWebView.getSettings().setJavaScriptEnabled(true);

        mtWebView.loadUrl("https://docs.google.com/viewer?url=http://www.cbwe.gov.in/HTMLEditor1/pdf/sample.pdf");            

    }
} 
```

它适用于链接“ [https://docs.google.com/viewer?url=http://www.cbwe.gov.in/HTMLEditor1/pdf/sample.pdf](https://docs.google.com/viewer?url=http://www.cbwe.gov.in/HTMLEditor1/pdf/sample.pdf) ”。

但它不适用于“ [https://docs.google.com/viewer?url=http://www.pancreaze.net/pdf/PANCREAZE.pdf](https://docs.google.com/viewer?url=http://www.pancreaze.net/pdf/PANCREAZE.pdf) ”。当我通过`Webview`它触发这个 url 时，它在 WebView 中显示 HTML 内容，而不是实际的 pdf 文件。这是屏幕截图。

![在此处输入图像描述](../Images/45c89ee84173e1b5b908728c8e6fa5db.png)

我的代码有什么问题？

# android - 文本视图上的 ontouch 和 onclick 不起作用

> ID：10172278
> 
> 赞同：3
> 
> 时间：2012-04-16T10:17:31.480
> 
> 标签：android

看看下面的代码......我在 textview 和 ontouch 监听器上设置 onclick 监听器，但它们都没有工作......

似乎是什么问题>....？

```
 AlertDialog.Builder builder;
    AlertDialog a;
    TextView text,txtNewUser ;
    ImageView image;
    View layout;
    Button ok;
    String pswrd;
    LayoutInflater inflater;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        final Context mContext = this;
        Dialog dialog = new Dialog(mContext);
        inflater = (LayoutInflater) mContext
                .getSystemService(LAYOUT_INFLATER_SERVICE);
        ok = (Button) findViewById(R.id.buttonOK);

        dialog.setContentView(R.layout.custom_dialog_private_space);
        dialog.setTitle("Password");
        dialog.setCancelable(true);
        layout = inflater.inflate(R.layout.custom_dialog_private_space,
                (ViewGroup) findViewById(R.id.layout));
        text = (TextView) dialog.findViewById(R.id.tvDesc);
        txtNewUser = (TextView) dialog.findViewById(R.id.tvNewUser);

        image = (ImageView) layout.findViewById(R.id.image);
        image.setImageResource(R.drawable.lock_symbol_android);

        builder = new AlertDialog.Builder(mContext);
        builder.setView(layout);

        a = builder.create();
        a.show();

        txtNewUser.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                if(event.getAction() == MotionEvent.ACTION_UP)
                Toast.makeText(mContext, "Clicked", Toast.LENGTH_SHORT).show();
                Log.v("AS", "Clicked");
    return true;

            }
        });

txtNewUser.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Toast.makeText(mContext, "Clicked", Toast.LENGTH_SHORT).show();
        Log.v("AS", "Clicked");
    }
});
    } 
```

这是对话框布局的xml中textview的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/layout" >

<TextView android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/tvNewUser"
    android:text="New User?"
    android:layout_gravity="top|left"
    android:clickable="true"

    />

    <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
       />

    <TextView
        android:id="@+id/tvDesc"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="Enter password"
        android:textAppearance="?android:attr/textAppearanceLarge" 
        />

    <EditText
        android:id="@+id/etPassword"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="100"
        android:inputType="textPassword" >

    </EditText>

    <Button
        android:id="@+id/buttonOK"
        android:layout_width="100dp"
        android:layout_gravity="center"
        android:layout_height="fill_parent"
        android:text="OK" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:40:23.617

1.  而不是 infalter 使用窗口类
2.  在 Touch 监听器中返回 false
3.  将内容视图设置为您的主要活动

    ```
    package com.collabera.labs.sai;

    import android.app.Activity;
    import android.app.AlertDialog;
    import android.app.Dialog;
    import android.content.Context;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.MotionEvent;
    import android.view.View;
    import android.view.Window;
    import android.view.View.OnTouchListener;
    import android.widget.Button;
    import android.widget.ImageView;
    import android.widget.TextView;
    import android.widget.Toast;

    public class HomePage extends Activity {
        AlertDialog.Builder builder;
        AlertDialog a;
        TextView text, txtNewUser;
        ImageView image;
        Button ok;
        String pswrd;

        public Window mWindow;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.custom_dialog_private_space);
            ok = (Button) findViewById(R.id.buttonOK);
            final Context mContext = this;
            Dialog dialog = new Dialog(HomePage.this);

            dialog.setContentView(R.layout.custom_dialog_private_space);
            dialog.setTitle("Password");
            dialog.setCancelable(true);
            dialog.show();
            mWindow = dialog.getWindow();
            Log.w(" dialog is " + mWindow.toString(), "-------");
            text = (TextView) mWindow.findViewById(R.id.tvDesc);
            txtNewUser = (TextView) mWindow.findViewById(R.id.tvNewUser);
            image = (ImageView) mWindow.findViewById(R.id.image);
            image.setImageResource(R.drawable.icon);

            txtNewUser.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if (event.getAction() == MotionEvent.ACTION_UP)
                        Toast.makeText(mContext, "Touched", Toast.LENGTH_SHORT)
                                .show();
                    Log.v("AS", "Touched");
                    return false;

                }
            });

            txtNewUser.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(mContext, "Clicked", Toast.LENGTH_SHORT).show();
                    Log.v("AS", "Clicked");
                }
            });
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:32:42.983

我想..你也应该回来

```
return super.onTouchEvent(event); 
```

来自 onTouch 函数 ..**而不是 true**因为 true 意味着事件被触摸消耗，并且不会为此事件调用其他操作.. 在这种情况下**onClick**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:39:56.907

在 toast 两种情况下，您都编写了 clicked，因此更改为在 onTouch 侦听器中触摸并在 onTouch 侦听器中返回 false：

```
public class HomePage extends Activity {
    private TextView txtNewUser;
    private Context mContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mContext = getApplicationContext();
        txtNewUser = (TextView) findViewById(R.id.tvNewUser);

        txtNewUser.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub
                if (event.getAction() == MotionEvent.ACTION_UP)
                    Toast.makeText(mContext, "Touched ", Toast.LENGTH_SHORT)
                            .show();
                Log.v("AS", "Touched");
                return false;

            }
        });

        txtNewUser.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(mContext, "Clicked", Toast.LENGTH_SHORT).show();
                Log.v("AS", "Clicked");
            }
        });

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:56:38.210

这是我用来使 imageview 可点击的方式：

```
public class Main extends Activity **implements OnClickListener** {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   ImageView  profile_btn=(ImageView) findViewById(R.id.x_Btn);
   x_btn.setOnClickListener(this) ;

    ImageView  food_btn=(ImageView) findViewById(R.id.y_Btn);

    ybtn.setOnClickListener(this); 
   }

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
      switch(v.getId())
    {
    case R.id.x_Btn:
            //do some thing;break;
                  case R.id.y_Btn:
    //do some thing;break;
                  }
     }
} 
```

# xcode - webkit-touch-callout 默认不工作

> ID：10172282
> 
> 赞同：2
> 
> 时间：2012-04-16T10:17:45.843
> 
> 标签：xcode, cordova

我正在构建一个小型 iPhone 应用程序，默认情况下（显然）是 webkit-touch-callout 功能，当用户点击并按住一个元素（例如图像）时，该功能允许上下文菜单。对于图像，当您长按它时，它会提示您保存或复制图像。

我看到了有关如何禁用此功能的各种提示-默认情况下，应该启用它。然而，在我的情况下这不是真的，我正在拼命地尝试启用它。

我的 HTML 相当简单：

`<img src="files/image.jpg" id="theimage" style="margin:30px auto;display:block;width:90%;height:auto;" />`

在我的 CSS 中，我有：

`* { -webkit-user-select: auto!important; -webkit-touch-callout: auto!important; }`

但是，当我在我的应用程序中按住图像时，什么也没有发生。但是，当我在 xCode 模拟器中打开 Safari 并浏览到 Google 图片时，它运行良好。

请问有什么帮助/想法吗？

# android - 为什么我在非根包中使用资源时必须导入 R 类？

> ID：10172283
> 
> 赞同：3
> 
> 时间：2012-04-16T10:17:50.487
> 
> 标签：android

每当我想使用非根包中的任何资源元素时，我都必须导入我自己的`R class`（不是 Android R 类）。例如，

根包`com.example.test`和文件`Main.java`

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
} 
```

无需导入`R class`。

当我创建另一个包`com.example.test.something`和一个新类时`Something.java`，我必须导入我自己的`R.class`

```
import com.example.test.R;

//...other code...

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
} 
```

当我将 Java 文件从根移动到非根包时，这会自动发生。

为什么这个这么重要？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T07:26:25.900

你的`R`类存在于你的应用程序包中`com.example.test`——查看它的包声明。如果您想从任何其他包中引用它，您需要导入它或完全限定其名称，就像任何其他类一样。

# jquery - jQuery：触发器 点击

> ID：10172284
> 
> 赞同：11
> 
> 时间：2012-04-16T10:17:52.587
> 
> 标签：jquery, asp.net, click

我需要触发点击`<asp:LinkButton>`。

**示例 1**

以下事情正在工作：

```
<asp:Button ID="myBtn" runat="server" />

$("#myBtn").trigger("click"); 
```

**示例 2**

现在与 LinkBut​​ton 相同的事情**不起作用**：

```
<asp:LinkButton ID="myBtn" runat="server" />

$("#myBtn").trigger("click"); 
```

我需要**触发 asp:LinkBut​​ton 的点击事件**。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T17:36:43.320

代替

```
$("#myBtn").trigger("click"); 
```

试试这个

```
eval($("#myBtn").attr('href')); 
```

有关更多信息，请参阅此答案：[https ://stackoverflow.com/a/943441/1207991](https://stackoverflow.com/a/943441/1207991)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T10:30:01.760

向您添加一个`CssClass`属性`LinkButton`并将其用作您的选择器。

其他答案建议使用 ASP.NET`ClientID`来获取 的呈现 ID `LinkButton`，这很好，但这意味着您必须将脚本内联在页面中，并且该脚本仅适用于这个 1 按钮。

使用一个类意味着您可以让多个元素触发同一个事件，这意味着您不需要使用内联服务器端代码来使其工作。

```
<asp:LinkButton ID="myBtn" runat="server" CssClass="myLink" />

$(".myLink").trigger("click"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T10:22:48.180

你给`ID`他们两个都一样，这是行不通的。试着改变它。

如果您使用的是母版页，则使用如下所示：

```
 <script type="text/javascript">
          $(document).ready(function () {
              $("#<%=myBtn.ClientID%>").click(function () {
              $('#<%=hyperlinkID.ClientID%>').trigger('click');
          });
  </script> 
```

如果您不使用母版页，请使用以下代码：

```
<script type="text/javascript">
         $(document).ready(function () {
            $("#myBtn").click(function () {
             $('#hyperlinkID').trigger('click');
         });
 </script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-29T06:50:17.877

由于安全漏洞和漏洞，切勿使用 eval()。最好的方法是使用这样的原生 js 点击事件。

```
$('[selector]')[0].click(); 
```

在你的情况下

```
$("#myLink")[0].click(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T10:21:17.453

使用这条线

```
$("#<%= myBtn.ClientID %>").trigger("click"); 
```

# php - 获取php数组的总和

> ID：10172285
> 
> 赞同：0
> 
> 时间：2012-04-16T10:17:56.753
> 
> 标签：php, mysql, sum, associative-array

我将 SQL 查询中的元素添加到关联数组并打印它们，如下所示；

```
foreach ($db->query($sql) as $row)
            {
?>      
                <p>
                <?php
                //Print details of each row 
                echo  "Sale Date: " . $row['saleDate'] . "<br />" . 
                      "Sale Price: " . $row['salePrice'] . "<br />" . 
                      "Buyers Email: " . $row['userEmail'] . "<br />";
                 ?> 
                </p> 
```

我希望能够获得与我的 SQL 查询匹配的元素的 salePrice 总和。我知道我可以使用 SQL sum 命令来获取我在 sql 中的整个 salePrice 列的总和，但我只想查看与我的查询匹配的元素的总和。有没有一种简单的方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:23:25.310

```
$summary = 0;
foreach ($db->query($sql) as $row) {
?>      
<p>
<?php
//Print details of each row 
echo  "Sale Date: " . $row['saleDate'] . "<br />" . 
                      "Sale Price: " . $row['salePrice'] . "<br />" . 
                      "Buyers Email: " . $row['userEmail'] . "<br />";
$summary += $row['salePrice'];
?> 
</p>
<?
}
echo 'Summary: '.$summary;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:22:07.417

```
$sum = 0;
foreach ($db->query($sql) as $row)
            {
?>      
                <p>
                <?php
                $sum +=  floatval($row['salePrice']);
                //Print details of each row 
                echo  "Sale Date: " . $row['saleDate'] . "<br />" . 
                      "Sale Price: " . $row['salePrice'] . "<br />" . 
                      "Buyers Email: " . $row['userEmail'] . "<br />";
                 ?> 
                </p> 
```

使用此 $sum 变量进行计算

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T10:28:29.337

您只能在 sql 查询中添加该代码，并仅在查询中获取 sum(yourfield)。否则，如果您想列出所有 $row 并汇总所选价格，则

```
$sum = 0;
foreach ($db->query($sql) as $row)
        {
?>      
            <p>
            <?php
            if()// your condition here
            {
                $sum +=  floatval($row['salePrice']);
            }
            //Print details of each row 
            echo  "Sale Date: " . $row['saleDate'] . "<br />" . 
                  "Sale Price: " . $row['salePrice'] . "<br />" . 
                  "Buyers Email: " . $row['userEmail'] . "<br />";
             ?> 
            </p> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T10:30:04.443

您也可以在 mysql 中简单地执行此操作（它甚至可能更快）。

假设这样的数据结构：

```
CREATE TABLE tbl_sales (
    buyers_email VARCHAR(50), /* probably should make this foreign key of tbl_buyer */
    sale_price DECIMAL(7,2),
    sale_date TIMESTAMP
); 
```

像这样的 $sql 查询将执行以下操作：

```
SELECT SUM(sale_price) AS total_sale FROM tbl_sales; 
```

然后在 PHP 中：

```
$query = $dbh -> exec ($sql);
$query -> setFetchMode(PDO::FETCH_ASSOC);
$results = $query -> fetchAll();

$total = $results[0]["total_sale"]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T10:32:32.187

我认为您应该为正确的工作使用正确的工具..因为您正在调用`MySQL`它已经有一个`SUM`功能

```
SELECT SUM(salePrice) as total 
```

这将使工作完成得更快

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T10:49:08.517

最简单的方法是使用 sql 命令。

`SELECT SUM(salePrice) as sum`

然后调用 sum 将为您提供与关联数组匹配的元素的 salePrice 总和

# python - 为什么我无法通过手动 *python setup.py install* 获得 *pip install* 的确切结果？

> ID：10172286
> 
> 赞同：7
> 
> 时间：2012-04-16T10:18:06.777
> 
> 标签：python, setuptools

我喜欢通过*setuptools 找出*Python 命名空间包背后的神话，这就是我所做的测试。

*   通过.制作*虚拟环境*`virtualenv`。
*   *在PyPI*上查找命名空间包。
*   通过 安装该软件包`pip install`。
*   检查已安装的文件层次结构。

我使用的包是[zope.interface](http://pypi.python.org/pypi/zope.interface)，它与我的 virtualenv 上的以下文件层次结构配合得很好：

```
~virenv/.../site-packages/zope.interface-3.8.0-py2.6-nspkg.pth
                         /zope.interface-3.8.0-py2.6.egg-info/
                         /zope/
                              /interface/
                                        /... 
```

一切看起来都很好，我喜欢*zope.interface*作为真正的命名空间包（在文件夹*zope*下）安装的方式。

然后，我又做了一次测试，这就是我想请你帮忙的问题。我下载了去皮重的*zope.interface*源文件。我喜欢再次手动播放

*   通过.制作*虚拟环境*`virtualenv`。
*   将*zope.interface 解压*到某个地方。
*   通过 安装软件包`python setup.py install`。
*   *去检查site-packages*中发生了什么。

*站点包*如下所示：

```
~virenv/../site-packages/zope.interface-...egg/
                                              /zope/
                                                   /__init__.py
                                                   /interface/
                                              /EGG-INFO/ 
```

Q. 为什么我不能`pip install`手动得到准确的结果`python setup.py install`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T12:08:56.807

`pip`内部使用`setup.py`。它只是将附加选项传递给它。要重现`pip`正在执行的操作，请执行

```
python setup.py install --single-version-externally-managed 
```

您还可以运行`pip -vv`以查看确切运行了哪些命令。

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-04-16T10:21:03.810

> Q. 为什么我无法通过手动 python setup.py install 获得 pip install 的确切结果？

因为`pip`和`setup.py`是两个不同的软件。

`pip`没有宣传为提供与 相同的行为`setup.py`，反之亦然。

如果您想要 的行为`pip`，请使用`pip`; 如果您想要 的行为`setup.py`，请使用`setup.py`.

# android - Android 蓝牙 l2cap 套接字绑定（）

> ID：10172291
> 
> 赞同：2
> 
> 时间：2012-04-16T10:18:50.220
> 
> 标签：android, bluetooth, l2cap

安卓版本：2.3.7

内核版本：2.6.35-14-CyanogenMod-Arco-Kalim arco@tuxbox #1

Mod版本：CyanogenMod-7.1.0.1-click

该设备已完全植根。

我在我的项目中添加了一段代码

取自 hidd.c 中的 Bluez Utils。

代码如下：

```
if (bind(sk, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
    close(sk);
    return -1;
} 
```

`bind()`不断返回`-1`。

`DisablePlugins = input`我在我的 Android 设备的蓝牙配置中添加了一行（ ）

`/system/etc/bluetooth/main.conf`

我掌握的信息是： `sk:37`

`(struct sockaddr *) &addr=0x44597e90`

`sizeof(addr)=12`

`errno:13`

原因：权限被拒绝。

任何人都可以帮忙吗？如果您需要更详细地了解，请随时告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:28:25.097

`sdp`可以由 blueZ 源代码创建。

因此，您可以创建自己的 sdptool，然后利用它来绑定套接字。当然，您必须`chmod`在使用它之前获得所有权。

这种方法对我有用，希望这种方法对你有用。

# java - JMXBean 什么时候初始化

> ID：10172298
> 
> 赞同：0
> 
> 时间：2012-04-16T10:19:12.513
> 
> 标签：java, jmx

IMEI 我是 MXbeans 的新手。我想了解 MXBean 何时实际初始化，在我支持的应用程序中，我们有一个通知系统，在收到一些通知之前，我无法在 JConsole 中看到我的 MXBean。这是我的 MXBean 的代码。

```
 package mecomaany.instrumentation;

    import java.lang.management.ManagementFactory;
    import java.util.ArrayList;

    import javax.management.Attribute;
    import javax.management.AttributeList;
    import javax.management.AttributeNotFoundException;
    import javax.management.DynamicMBean;
    import javax.management.InvalidAttributeValueException;
    import javax.management.MBeanAttributeInfo;
    import javax.management.MBeanException;
    import javax.management.MBeanInfo;
    import javax.management.MBeanOperationInfo;
    import javax.management.MalformedObjectNameException;
    import javax.management.ObjectName;
    import javax.management.ReflectionException;

    import  BulkCMIRP_MxBean;
    import SoapIRPLogger;

    /**
     * This dynamic MBean exposes a method to return the 10 latest Basic CM
     * operations.
     * 
 * @author eshtrom
 * 
 */
    public class BasicCMIRP_MxBean implements DynamicMBean{
    private static final String CLASS_NAME =        BasicCMIRP_MxBean.class.getCanonicalName();
    private static final String MX_BEAN_NAME =   BasicCMIRP_MxBean.class.getCanonicalName() + ":Type=BasicCMIRP_MxBean";
    private static final String BEAN_DESCRIPTION = "Instrumentation bean for SOAP Basic CM IRP.";
    private static final int NUM_OPERATIONS_TO_RECORD = 10;
    private final ArrayList<String> basicCMOperations = new ArrayList<String>();

    /**
     * Register the bean. This is a best effort attempt. If registration fails
     * we'll report it but nothing more.
     */
    public BasicCMIRP_MxBean() {
        registerMxBean();
    }

    /**
     * Attempt to unregister and clean up the MX beans.
     */
    public void destroy() {
        basicCMOperations.clear();
        unregisterMxBean();
    }

    /**
     * This method returns a description of this bean to the JMX interface. The
     * description is just a list of names of the currently stored attributes.
     */
    public synchronized MBeanInfo getMBeanInfo() {
        final MBeanAttributeInfo[] attributes = new MBeanAttributeInfo[0];
        final MBeanOperationInfo[] operations = { new MBeanOperationInfo("getBasicCMInstrumentation", "Get instrumentation Basic CM IRP bean.", null, "String[]",
                MBeanOperationInfo.INFO) };
        return new MBeanInfo(this.getClass().getName(), BEAN_DESCRIPTION, attributes, null, operations, null);
    }

    /**
     * Callback to execute methods exposed by this dynamic MBean.
     */
    public Object invoke(final String actionName, final Object[] params, final String[] signature) throws MBeanException, ReflectionException {
        SoapIRPLogger.enter(CLASS_NAME, "invoke");
        if (actionName != null) {
            if (actionName.equals("getBulkCMInstrumentation")) {
                return getBasicCMInstrumentation();
            }
        }
        SoapIRPLogger.exit(CLASS_NAME, "invoke");
        throw new ReflectionException(new NoSuchMethodException(actionName));
    }

    /**
     * Construct a human readable very of the last 10 operations and return it.
     * 
     * @return string array as an object.
     */
    private Object getBasicCMInstrumentation() {
        SoapIRPLogger.enter(CLASS_NAME, "getBasicCMInstrumentation");
        String[] result = new String[basicCMOperations.size()];
        int index = 0;
        for (String operation : basicCMOperations) {
            result[index] = operation;
            index++;
        }
        SoapIRPLogger.exit(CLASS_NAME, "getBasicCMInstrumentation");
        return result;
    }

    /**
     * No attributes are writable so this method will throw an exception.
     */
    public void setAttribute(final Attribute arg0) throws AttributeNotFoundException, InvalidAttributeValueException, MBeanException, ReflectionException {
        throw new AttributeNotFoundException("All attributes on this bean are read only.");
    }

    /**
     * No attributes are writable so this method will return an empty list.
     */
    public AttributeList setAttributes(final AttributeList arg0) {
        return new AttributeList();
    }

    public Object getAttribute(final String attribute) throws AttributeNotFoundException, MBeanException, ReflectionException {
        throw new AttributeNotFoundException("No attributes are defined on this MX bean.");
    }

    /**
     * No attributes are readable so this method will return an empty list.
     */
    public AttributeList getAttributes(final String[] attributes) {
        return new AttributeList();
    }

    /**
     * Add or update and instrumentation attribute. A null attribute name will
     * be ignored.
     * 
     * @param name
     * @param value
     */
    public void updateInstrumentationAttibute(final String name, final String value) {
        // The only attribute that this bean supports is Bulk CM operations.
        if (name.compareTo("BasicCM_Operations") == 0) {
            basicCMOperations.add(value);
            // We'll only record a maximum of 10 operations. If we exceed the
            // max, remove the oldest.
            if (basicCMOperations.size() > NUM_OPERATIONS_TO_RECORD) {
                basicCMOperations.remove(0);
            }
        }
    }

    public ObjectName getBeanName() throws MalformedObjectNameException, NullPointerException {
        // Construct the ObjectName for the MBean we will register
        return new ObjectName(MX_BEAN_NAME);
    }

    /**
     * Register the bean.
     */
    protected void registerMxBean() {
        try {
            ManagementFactory.getPlatformMBeanServer().registerMBean(this, this.getBeanName());
        } catch (Exception e) {
            SoapIRPLogger.exception(CLASS_NAME, "Constructor", "Failed to register BulkCMIRP_MxBean management beans.", e);
        }
    }
    protected void unregisterMxBean() {
        try {
            ManagementFactory.getPlatformMBeanServer().unregisterMBean(this.getBeanName());
        } catch (Exception e) {
            // Suppress exceptions, we're closing down anyway.
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:51:05.220

孤独者；

您的 MXBean 应该在构建后立即在 JConsole 中可见，因为构造函数调用**registerMxBean()**将 MBean 注册到平台 MBeanServer。

假设注册 MBean 时 JConsole 已经在运行，JConsole 的 MBean 视图将由注册时生成的 MBeanInfo 的第一个实例决定。由于您将其编码为**DynamicMBean**，我想知道您是否打算定期修改 MBeanInfo，但请注意，一旦 JConsole 连接检索到已注册 bean 的 MBeanInfo，它将不会刷新它。如果 MBeanInfo 发生变化，您必须在 JConsole 中关闭连接并再次打开它。

因此，您的问题可能在您提供的代码之外，或者更简单地说，**BasicCMIRP_MxBean**的实例是何时创建的？

您关于在通知开始到达之前看不到 bean 的评论让我想知道您的意思是否是：A. 在通知开始到达之前您看不到 MBean，在这种情况下，我假设有一些激活代码在 [第一个 ?] 通知到达，或 B。您的意思是，在通知开始到达之前，您无法看到 MBean 的特定属性。

也许你可以在这里澄清更大的图景。

一些可能无关的额外观察结果：

1.  您正在生成的 MBeanInfo 指定唯一的操作称为**getBasicCMInstrumentation**（基本），但您的*调用*处理程序仅尝试解码称为**getBulkCMInstrumentation**（批量）的操作。为 JConsole 提供了 MBeanInfo 以呈现操作，因此控制台认为该操作称为*基本*操作，但 MBean 只会响应称为*bulk*的请求。
2.  方法**getBasicCMInstrumentation**的签名返回一个**Object**但代码真正返回的是一个**String[]**。这可能会起作用，因为您的 MBeanInfo 指定返回*String[]*，但为了保持一致和清晰，我会更改方法签名。

//尼古拉斯

# debugging - 64 位版本的 Valgrind 是否能够挖掘 32 位程序的内存问题？

> ID：10172302
> 
> 赞同：2
> 
> 时间：2012-04-16T10:19:34.390
> 
> 标签：debugging, valgrind

我安装了 64 位操作系统和 Valgrind。我现在需要检查 32 位程序的内存问题。Valgrind 可以运行并产生 reprot。但我想知道 valgrind 生成的报告是否能够提供正确的信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:34:14.367

来自[Valgrind 文档](http://valgrind.org/docs/manual/dist.news.html)，

> 初步支持**MacOSX 10.7 和 XCode 4。**支持32 位和 64 位进程
> 
> 有对**AIX 5.3**的实验性支持，包括 32 位和 64 位进程。

还，

**- 新的配置标志：**

```
 --enable-only32bit
 --enable-only64bit 
```

> 默认情况下，在 64 位平台（**ppc64-linux**、**amd64-linux**）上，构建系统将尝试构建支持 32 位和 64 位可执行文件的 Valgrind。这可能不是您想要的，您可以使用这些标志覆盖默认行为。

# javascript - 使用 clearTimeout 后 setTimeout 不起作用

> ID：10172304
> 
> 赞同：1
> 
> 时间：2012-04-16T10:19:38.430
> 
> 标签：javascript, jquery, timeout

我们的网站上有一个表格，用户可以在其中填写和提交。有时，他们填写表格的时间比我们 20 分钟的会话超时时间还要长。

因此，我编写了在超时前 2 分钟弹出一条消息以警告用户的功能，并提供保存和继续选项（更新会话）。如果留下警告，它将自动保存他们的工作并在 2 分钟后将其注销。

如果该消息被忽略，它会自动保存工作并将它们正常注销。如果他们单击保存并继续，则保存正常，并且消息会在再过 20 分钟后弹出（在测试时我已经减少了时间），但是，随后的时间， 如果是，**它不会在再过 2 分钟后将它们注销忽略。**

这是我编写的 JavaScript。任何人都可以看到任何问题吗？

`init();``onLoad`在`<body>`标签中调用。

```
var logoutTimer = setTimeout('saveAndLogOut();', 1000 * 60 * 1.5);

function init() {
    setTimeout('expirationWarning();', 1000 * 60 * 1);
    logoutTimer;
}

function expirationWarning() {
    $('#session-expiry-warning').dialog({ 
        show: 'fade', 
        hide: 'fade',
        title: 'Your session is about to expire...',
        buttons: { 
            "Save and Continue": function() { 
                ajaxSave('saved');
                clearTimeout(logoutTimer);
                init();
                $(this).dialog("close");
            }
        },
        width: 550,
        closeOnEscape: false,
        open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); }            
    });
}

function saveAndLogOut() {
    ajaxSave('autosaved');
    setTimeout("parent.document.location.href = '../logout.asp';", 5000);
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:31:19.540

Firstly, don't use strings in the `setTimeout` function. Prefer the following:

```
setTimeout(saveAndLogOut, time) 
```

Secondly, as @David said, your setTimeout is not called when you display the `logoutTimer` variable in the `init()` function. It looks like you want the following:

```
var logoutTimer = function() { setTimeout( saveAndLogOut, 1000 * 60 * 1.5 ) }

// Then, in your init function:
logoutTimer() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T10:26:21.127

`logoutTimer`仅在您粘贴的第一行代码中设置一次。如果用户点击“保存并继续”，`logoutTimer`将被清除。绝不会再次将其设置为任何内容。

你打算设置计时器`init()`吗？它目前只是`logoutTimer;`在那里说，实际上并没有做任何事情。如果您希望此时重新设置计时器，则需要将整个`setTimeout`命令包含在`init`.

# ruby - 红宝石中的日期时间

> ID：10172310
> 
> 赞同：2
> 
> 时间：2012-04-16T10:20:17.987
> 
> 标签：ruby, datetime

如何在 ruby​​ 中将“04/16/2012 03:44:26”字符串转换为日期时间对象？

我知道“20120416”可以通过 DateTime.parse(srting) 转换为 datetime 对象。

请有人帮助我将“04/16/2012 03:44:26”转换为 ruby​​ 中的日期时间对象。我需要在上面的日期时间对象中添加 x 分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:27:16.403

```
(Time.parse("04/16/2012 03:44:26") + 10.minutes).to_datetime 
```

**更新**

甚至在 Ruby 1.8.7 中也可以使用，但您需要 ActiveSupport（在 Rails 中自动使用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:21:05.963

您需要使用 DateTime#strptime 指定格式：

```
DateTime.strptime("04/16/2012 03:44:26", '%m/%d/%Y %H:%M:%S') 
```

请参阅：[http ://ruby-doc.org/stdlib-1.8.7/libdoc/date/rdoc/DateTime.html#method-c-strptime](http://ruby-doc.org/stdlib-1.8.7/libdoc/date/rdoc/DateTime.html#method-c-strptime)

您可以像这样添加 x 分钟：`+ (x / (24 * 60.0))`.

如果您正在使用 Rails 或使用 ActiveSupport 没有问题，您可以这样做：

```
require 'active_support'
new_datetime = datetime + 10.minutes 
```

# visual-studio-2010 - 从 Visual Studio 内部运行 App 时出现 AccessViolationException（或 SEHException 或 ExecutionEngineException）

> ID：10172317
> 
> 赞同：0
> 
> 时间：2012-04-16T10:20:59.153
> 
> 标签：visual-studio-2010, virtualbox, access-violation

从最近开始，我现在`AccessViolationException`从 Visual Studio 2010 中获取我们 WinForms 应用程序的大多数初创公司，导致它中止。

但是使用**Ctrl-F5**而不是通常的**F5**可以解决我的问题，即它与[Visual Studio 之外的 AccessViolationException 相反？](https://stackoverflow.com/questions/2679248).

这是此类异常的示例，但它们也带有各种其他堆栈跟踪，而不仅仅是这个：

```
System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
   at System.Environment.get_TickCount()
   at System.EventHandler.Invoke(Object sender, EventArgs e)
   at System.Windows.Forms.Form.OnLoad(EventArgs e)
   at System.Windows.Forms.Form.OnCreateControl()
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl()
   at System.Windows.Forms.Control.WmShowWindow(Message& m)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ScrollableControl.WndProc(Message& m)
   at System.Windows.Forms.ContainerControl.WndProc(Message& m)
   at System.Windows.Forms.Form.WmShowWindow(Message& m)
   at System.Windows.Forms.Form.WndProc(Message& m)
   at OurApp.BaseForm.WndProc(Message& m)
   at OurApp.OtherForm.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

顺便提一句。再次启动我只是有这个完全相同的堆栈跟踪，但是有一个

```
System.Runtime.InteropServices.SEHException: External component has thrown an exception. 
```

而不是 AccessViolationException。但总的来说，AccessViolationExceptions 比`SEHException`s 更频繁。

**更新**同时，我有时会得到`ExecutionEngineException`s 而不是上面的。

我正在运行 Windows 7 64 位（在 VirtualBox 中）。安装所有 Windows 更新，包括 Visual Studio 2010 SP1，以防万一，并没有解决问题。

关于这可能是什么或如何深入研究它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:47:28.487

原来是 VirtualBox 的一个问题。在本机运行应用程序很好，在 VMWare Player 中运行应用程序也很好。在 VirtualBox 中：问题中列出的 3 个例外之一。

我无法让 VirtualBox（最新版本，4.1.12，在 64 位 linux 下的 i5 主机上运行）正常工作，尝试按照[http://altamodatech.com/blogs/?p=62](http://altamodatech.com/blogs/?p=62)上的建议进行各种设置。所以现在是 VMWare Player。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T01:52:37.103

我的问题也是导致问题的 VirtualBox。根据 Eugene Beresovksy 的标记答案，引用[http://altamodatech.com/blogs/?p=62](http://altamodatech.com/blogs/?p=62)的几件事：

1.  我禁用了嵌套分页
2.  Visual Studio 2010 已完全更新（服务包等）

自从做了这两件事之后我就没有遇到过这个问题，所以我现在坚持使用 VirtualBox。

供参考，我的配置：

*   基本操作系统：Windows 7 x64
*   虚拟化主机：VirtualBox 4.2.6 r82870
*   来宾操作系统：Windows 7 Ultimate x86
*   Visual Studio 2010 10.0.30319.1 RTMRel

希望这可以帮助。

# perl - 使用perl合并两个文件将原始文件的副本保留在另一个文件中

> ID：10172318
> 
> 赞同：0
> 
> 时间：2012-04-16T10:21:02.597
> 
> 标签：perl, merge

我必须像 A.ini 和 B.ini 这样的文件，我想合并 A.ini 中的两个文件

```
examples of files:
A.ini::

a=123
b=xyx
c=434

B.ini contains:
a=abc
m=shank
n=paul

my output in files A.ini should be like

a=123abc
b=xyx
c=434
m=shank
n=paul 
```

我想用 perl 语言完成这种合并，我想将旧 A.ini 文件的副本保留在其他地方以使用旧副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:36:14.290

命令行变体：

```
perl -lne '
($a, $b) = split /=/;
$v{$a} = $v{$a} ? $v{$a} . $b : $_;
END {
  print $v{$_} for sort keys %v
}' A.ini B.ini >NEW.ini 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:32:17.087

How about:

```
#!/usr/bin/perl
use strict;
use warnings;

my %out;
my $file = 'path/to/A.ini';
open my $fh, '<', $file or die "unable to open '$file' for reading: $!";
while(<$fh>) {
    chomp;
    my ($key, $val) = split /=/;
    $out{$key} = $val;
}
close $fh;

$file = 'path/to/B.ini';
open my $fh, '<', $file or die "unable to open '$file' for reading: $!";
while(<$fh>) {
    chomp;
    my ($key, $val) = split /=/;
    if (exists $out{$key}) {
        $out{$key} .= $val;
    } else {
        $out{$key} = $val;
    }
}
close $fh;

$file = 'path/to/A.ini';
open my $fh, '>', $file or die "unable to open '$file' for writing: $!";
foreach(keys %out) {
    print $fh $_,'=',$out{$_},"\n";
}
close $fh; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T12:42:03.007

要合并的两个文件可以一次读取，不需要被视为单独的源文件。这允许使用`<>`读取在命令行上作为参数传递的所有文件。

保留 的备份副本`A.ini`只是在将合并的数据写入同名的新文件之前重命名它的问题。

该程序似乎可以满足您的需求。

```
use strict;
use warnings;

my $file_a = $ARGV[0];

my (@keys, %values);

while (<>) {
  if (/\A\s*(.+?)\s*=\s*(.+?)\s*\z/) {
    push @keys, $1 unless exists $values{$1};
    $values{$1} .= $2;
  }
}

rename $file_a, "$file_a.bak" or die qq(Unable to rename "$file_a": $!);
open my $fh, '>', $file_a or die qq(Unable to open "$file_a" for output: $!);
printf $fh "%s=%s\n", $_, $values{$_} for @keys; 
```

**输出**（in `A.ini`）

```
a=123abc
b=xyx
c=434
m=shank
n=paul 
```

# linux - linux curl保存为utf-8

> ID：10172327
> 
> 赞同：13
> 
> 时间：2012-04-16T10:21:25.627
> 
> 标签：linux, curl

尝试使用 linux curl 从 url 下载 xml 文件。

很确定 xml 是用 UTF-8 编码的，

怀疑 curl -o 不保存为 UTF-8。

无论如何用 curl 强制保存到 UTF-8 吗？

* * *

感谢您的建议，我发现了什么：

因为 xml 提要是动态的，所以它并非总是包含任何 utf-8 字符。有时它在整个内容中根本没有 utf-8 字符，即使它在 xml 编码和标头内容类型中设置为 utf-8：charset=utf-8。当它至少包含一个 utf-8 字符时，它将被保存为 utf-8。

发生这种情况时，curl 不会下载为 utf-8，这是有道理的，因为没有 utf-8 字符，为什么需要存储为 utf-8。

这该死的棘手，一些验证器必须对 utf-8 有效，因此我仍然需要一个解决方案来强制它为 utf8，因为默认情况下我所有的 xml 都在 utf8 编码中。

通过使用 iconv f iso8859-1 utf-8 尝试了建议的方法不适用于这种情况，因为我怀疑它也不在 iso8859-1 中。

仍然需要更好的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T10:50:25.633

curl 不会对其下载的文件进行任何转换。如果 HTTP 服务器以另一种编码（例如 ISO8859-1）为您提供 XML，那么 curl 也会将其保存到磁盘。

要解决您的问题，您可以使用“iconv”，如下所示：

```
curl URL | iconv -f iso8859-1 -t utf-8 > output.xml 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T01:34:36.570

您是否尝试过添加 Accept-Charset 标头？我在下载一个使用错误编码下载的文件时遇到了类似的问题。当我设置 Accept-Charset 标头时，它可以工作：

```
curl -H "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7" URL | iconv -f iso8859-1 -t utf-8 > output.xml 
```

# oledb - 截断大 dbf 时出现未指定的错误

> ID：10172330
> 
> 赞同：0
> 
> 时间：2012-04-16T10:21:38.583
> 
> 标签：oledb, truncate, dbf

我正在使用 OleDbCommand 截断 DBF 文件。它适用于大多数文件，但如果文件大小为 400 MB，我会收到“未指定错误”。我在某处读到 dbf 文件的大小限制为 2 GB，所以我希望有一种方法可以处理这么大的文件......

```
System.Data.OleDb.OleDbException: Unspecified error
    at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
    at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
    at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
    at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
    at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
    at System.Data.OleDb.OleDbCommand.ExecuteNonQuery()
    at OleDbTruncateTest.Program.Main(String[] args) in C:\Users\henjoh\Visual Studio 2008\Projects\OleDbTruncateTest\OleDbTruncateTest\Program.cs:line 22 
```

以下是操作的基本代码：

```
using System;
using System.Data.OleDb;
using System.IO;

namespace OleDbTruncateTest
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                string file = @"C:\Temp\largefile.DBF";
                string pathName = Path.GetDirectoryName(file);
                string fileName = Path.GetFileName(file);

                using (OleDbConnection connection = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" + pathName + "; Extended Properties=dBase III"))
                {
                    connection.Open();
                    using (OleDbCommand comm = new OleDbCommand("DELETE FROM " + fileName, connection))
                    {
                        comm.ExecuteNonQuery();
                    }
                }
                Console.WriteLine("Done");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }

            Console.WriteLine("ENTER to exit...");
            Console.ReadLine();
        }
    }
} 
```

关于如何截断大型 dbf 文件的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:08:55.480

对于 .dbf 文件，通常源自 dBASE、Clipper 和 Foxpro（以及 Visual FoxPro），它们都是 32 位设计的，因此任何单个文件大小的上限为 2 gig。没办法，就这样。如果文件超过 2 gig 文件限制，则它必须是由其他可以读取 .dbf 文件的产品处理的 .DBF 文件，例如 Sybase 的 Advantage Database Server，它可以直接读取/写入/支持 .DBF 文件和超过 2 gig 限制。

如果您想真正截断（即：删除所有记录）， delete from 只会标记要删除的记录并将记录保留在那里，直到您“打包”表。也就是说，由于我不使用 Microsoft JET OleDB 提供程序，而是使用[Microsoft Visual FoxPro OleDbProvider 下载](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=14839)。

然后，我将构建一个包含 VFP 命令的字符串，以专门打开表并 ZAP（它也会删除所有记录并打包和重建索引）......类似于

```
string VFPScript  = "ExecScript( "
      + "[USE " + fileName + " EXCLUSIVE] +chr(13)+chr(10) + "
      + "[IF USED( '" + fileName + "')] + chr(13)+chr(10) + "
         + "[ZAP] +chr(13)+chr(10)+ "
      + "[ENDIF] +chr(13)+chr(10)+ "
      + "[USE]  )";

// put this script into command object, then execute it...
using (OleDbCommand comm = new OleDbCommand( VFPScript, connection))
{
    comm.ExecuteNonQuery();
} 
```

笔记。我不知道 JET 是否能够识别的唯一命令是 VFP 中的“ExecScript()”函数，它允许您将字符串作为命令块传递并像执行 .prg 一样执行它。因此，您可以执行循环和 IF/ENDIF 块之类的操作（有一些限制）。但是，此示例将字符串构建为

```
USE YourFile EXCLUSIVE
if used( "YourFile" )
   ZAP
ENDIF
USE 
```

最后注。处理表名时。通过 OleDB 提供程序时隐含 .DBF 扩展名，因此您不希望将 .dbf 扩展名用作字符串的一部分。BOTH OleDbProviders 仍然会找到该表，只要它位于连接字符串指向的路径中。

祝你好运。

# xcode - 如何在 XCode 4.3.2 上安装主题？

> ID：10172336
> 
> 赞同：37
> 
> 时间：2012-04-16T10:21:51.393
> 
> 标签：xcode, themes, xcode4.3

如何在 XCode 4.3.2 上安装这个主题[http://simplyhacking.com/spacedust-xcode-theme-for-xcode-4.html ？](http://simplyhacking.com/spacedust-xcode-theme-for-xcode-4.html)

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-04-16T10:26:36.280

下载 Spacedust.dvtcolortheme 并将其保存在：

```
~/Library/Developer/Xcode/UserData/FontAndColorThemes 
```

如果您从未在 Xcode 的首选项中复制现有的 Colortheme，则该文件夹可能还不存在。在这种情况下：只需创建该目录。

然后重新启动 Xcode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:14:15.283

我想再添加一点信息，在将主题添加到 FontAndColorThemes 文件夹并重新启动 xcode4 后，转到字体和颜色。

你应该在下面看到它：

> 首选项-> 字体和颜色。

选择您的主题并享受主题。

参考：[http ://superqichi.com/add-new-theme-to-xcode-4](http://superqichi.com/add-new-theme-to-xcode-4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-30T10:07:50.330

ThemeInstaller 是一个在 Xcode 中安装主题的简单应用程序。拥有 ThemeInstaller，您需要做的就是打开一个 .dvtcolortheme，或者访问 codethemes.net，然后在您选择的任何选项下按“安装”。在 Xcode 中，您需要按“cmd”+“”，然后您就拥有了所有已安装的主题。

# c# - 多线程通过引用访问的静态方法

> ID：10172337
> 
> 赞同：2
> 
> 时间：2012-04-16T10:22:01.150
> 
> 标签：c#, multithreading

我看到很多关于被多个线程访问的静态方法以及它们的线程安全性的问题。我认为我在确保线程安全方面已经完成了大部分工作，但我不太确定的一件事是当您将“ref”变量引入静态方法本身的混合中时。这是一个精简的例子：

```
public static string ProcessMessage(object msg)
{

string outcome = "";

Decrypt(ref msg);

// parse msg

return outcome;

}

private static void Decrypt(ref object msg)
{

// decrypt msg

} 
```

上面的例子是线程安全的吗？在静态方法中发生的所有处理都使用本地声明的变量，它只是从一个静态方法传递到另一个我不确定的 ref 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:26:10.977

这不是关于`static`与否，而是关于这些方法操作的*数据*如何被隔离。

如果您对*引用类型*进行操作，则它**不是**线程安全的，因为它在两个示例的代码中都显示。

您需要使用一些锁定机制来确保线程安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:08:50.427

在我看来，它本身是线程安全的，但当然，没有什么能阻止外部因素做奇怪的事情，比如多个线程使用相同的引用进行调用。一些开发人员说这可能是线程不安全的。可能是公共对象包含线程不安全的成员数据或可以访问此类数据的方法，但对我来说，这让你的问题有点极端。

也许只有我？

似乎我在过去 30 年中编写的几乎每个函数/过程都不是线程安全的，尤其是那些在多线程应用程序中工作的函数/过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:19:32.603

您的代码看起来根本不需要该`ref`参数。

您可以像这样更改它以确保安全：

```
public static string ProcessMessage(object msg)
{

string outcome = "";

object decryptedMsg = Decrypt(msg);    

// parse decryptedMsg

return outcome;

}

private static object Decrypt(object msg)
{
object processedMsg;

// decrypt msg into processedMsg

return processedMsg;

} 
```

因为`Decrypt`是私有的，并且`msg`是一个`object`，我会假设这段代码是安全的，同时获得与你的代码相同的结果。

# salesforce - 如何在 Salesforce 中创建自定义启动页面？

> ID：10172342
> 
> 赞同：0
> 
> 时间：2012-04-16T10:22:18.670
> 
> 标签：salesforce, visualforce, splash-screen

仅当用户第一次登录 Salesforce 时，才需要在主页中显示弹出消息......

它更像是一个**启动页面**。

它也可以是一个 jquery 弹出窗口。

*   我可以使用visualforce页面吗？如果是，请给你的建议

*   我们可以使用 salesforce 中的侧边栏组件吗？

我想通过在用户对象中保留一个自定义字段来使用侧边栏组件来显示它...每次他登录时我都会检查自定义字段并显示弹出窗口...因为这个弹出窗口只会第一次显示是还有其他更好的解决方案，而不是每次都查询用户对象..

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T06:06:55.570

如果你想拥有定制的外观，你可以使用 jquery modal 并在文档上准备好一些样式。如果这是第一次，我们可以使用 cookie 来存储，或者 Salesforce 用户对象可以告诉您这是第一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:35:42.813

您可以使用`window.open`Javascript 的方法，并为侧边栏提供您的滚动选项。

# mongodb - mongodump 按日期 / find() 在转储数据中

> ID：10172343
> 
> 赞同：1
> 
> 时间：2012-04-16T10:22:19.637
> 
> 标签：mongodb, mongodump

1.  如何按日期转储所有集合？如果我的记录没有时间戳字段？

    > 字段：_id、姓名、电子邮件、车号……等。

2.  以及如何在存档/转储数据库中查找/查找（）？我需要创建搜索机制，用于在存档中搜索

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:26:31.327

1.  您可以将查询传递给 mongodump，使其仅转储您的部分数据。如果您无法进行查询以找到所需的数据部分，那么您就不走运了。

2.  mongodump 的结果是 bson 文件的集合。它们不能直接查询。但是您可以将它们加载到另一个数据库中并进行查询。或者您可以使用`mongoexport`创建 JSON 文档的实用程序。JSON 更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:49:17.097

尽管塞尔吉奥所说的大体上是正确的，但让我扩展一下：

首先，您提到使用 _id - 如果这是一个 ObjectID（默认值），那么它包含一个时间戳 - 前 4 个字节是一个 unix 样式的时间戳：

[http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification)

接下来，使用 mongoexport 的问题是 JSON 不保留所有 BSON 类型（[http://bsonspec.org/#/specification](http://bsonspec.org/#/specification)） - BSON 的类型比 JSON 多，因此存储为 JSON 可能会出现问题，除非您有规则重新导入

如果您以 BSON 格式保存数据，则 bsondump 可以按原样检查文件中的内容：

[http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-bsondump](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-bsondump)

或者，如果您有一个“存档”MongoDB 实例，您可以只使用 mongodump/mongorestore，它直接与 BSON 文件一起使用，并且没有 mongoexport 等出现的 JSON 问题：

[http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongodumpandmongorestore](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongodumpandmongorestore)

# django - 自定义 Django 管理面板

> ID：10172346
> 
> 赞同：1
> 
> 时间：2012-04-16T10:22:37.397
> 
> 标签：django, django-admin

我想将 Django 用于我正在构建的具有管理面板的 Web 应用程序。我知道您只需激活管理应用程序即可开始使用。但是，我想要一个自定义面板，我的意思是，我想自己设计布局，我想为管理员添加菜单和表单以在数据库中插入新数据等。有可能吗？或者我应该编写一个具有这些功能的类似应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:11:26.460

要更好地控制布局（自定义菜单等），您应该检查[django-admin-tools](http://django-admin-tools.readthedocs.org/en/latest/)。

如果您查看 Django 的文档，您将了解到您可以轻松地调整和覆盖管理员的大部分内容。例如这里是关于如何使用自定义表单的演示： [https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin)

所以管理员*是*非常可定制的。但是，您是否应该构建自己的应用程序或重用管理员的问题很大程度上取决于您的特定需求。至少要确保您知道管理员可以轻松地向哪些方向弯曲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-15T06:54:48.600

Django 的唯一目的`admin`是允许您操作（添加/编辑/删除）数据库中的数据。我认为您至少应该在**尝试**重新发明轮子之前尝试检查管理员的能力。您很快就会发现管理员允许您拥有的复杂洞察力级别。然后你会发现自己制作是不必要的额外工作，你最终会修改一些管理模板和 CSS 样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-15T09:10:22.040

是的，您可以自定义 Django 管理面板，Django 提供了某种自定义来显示自己的数据库表结构，为此您可以关注[DJANGO ADMIN SITE DOC](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/)，它会真正帮助您。

对于 Django 管理站点设置之外的自定义，您可以自定义管理面板添加手动布局，方法是在存储在 Django 环境中的[django/django/contrib/admin/templates/admin/index.html](https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/index.html)的Django 模板文件中添加手动详细信息您当前的 Django 版本。您可以根据需要更新其 HTML、CSS 和 JS。

# javascript - trulia.com 中使用了什么 jquery 选择框插件？

> ID：10172348
> 
> 赞同：1
> 
> 时间：2012-04-16T10:22:40.907
> 
> 标签：javascript, jquery, drop-down-menu, jquery-selectbox

有谁知道在 trulia.com 的这个页面中的细化搜索部分中使用了什么 jquery 插件。我认为这是一个很好的选择框插件，我用谷歌搜索了它，但没有运气。我真的很想用这个。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:16:34.613

我在 trulia.com 上查看了代码，看起来他们并没有使用插件。它只是一个普通的选择框，带有包装元素的样式。

polarbear-home.js javascript 文件中有一些代码，用于设置/移除选择的焦点。

```
$(".select-wrapper>select").bind("focusin", function (c) {
    $(this).prev().addClass("focus")
});
$(".select-wrapper>select").blur(function (c) {
    $(this).prev().removeClass("focus")
}); 
```

但是，我的猜测是，这不是公共可用的插件，而是一些包装样式和一些 js/jquery 代码来进行焦点/非焦点样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:03:15.827

试试[SelectBoxIt](http://gregfranko.com/blog/introducing-the-jquery-plugin-selectboxit/)。我上周刚刚发布了它。DailyJS 也在这里写了关于它[http://dailyjs.com/2012/04/24/jquery-roundup/](http://dailyjs.com/2012/04/24/jquery-roundup/)

# python - Django MongoDB 引擎 DebugCursor “不可序列化 JSON”

> ID：10172350
> 
> 赞同：4
> 
> 时间：2012-04-16T10:22:51.400
> 
> 标签：python, django, mongodb, pymongo

尝试在 Django 中序列化 MongoDB 游标

```
import json
from pymongo import json_util

results = json.dumps(results, default=json_util.default, separators=(',', ':')) 
```

原来`results`是这样的

```
[{u'_id': ObjectId('4f7c0f34705ff8294a00006f'),
  u'identifier': u'1',
  u'items': [{u'amount': 9.99, u'name': u'PapayaWhip', u'quantity': 1}],
  u'location': None,
  u'timestamp': datetime.datetime(2012, 4, 4, 10, 7, 0, 596000),
  u'total': 141.25}] 
```

***编辑***：通过使用类似的东西获得

```
from django.db import connections

connection = connections['default']

results = connection.get_collection('papayas_papaya')
results = results.find({
    'identifier': '1',
}) 
```

给我

```
TypeError: <django_mongodb_engine.utils.DebugCursor object> is not JSON serializable 
```

有谁知道我做错了什么？

使用[json_util](http://api.mongodb.org/python/1.7/api/pymongo/json_util.html)应该序列化 MongoDB*文档*，也许我的问题是我正在尝试对*游标*进行序列化。（如何从光标中获取文档？一个简单的*元组*“cast”？）

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:16:50.150

您是否尝试仅序列化一条数据？如果是这样，只需更改

```
results = results.find({
    'identifier': '1',
}) 
```

到

```
results = results.find_one({
    'identifier': '1',
}) 
```

（虽然你真的应该区分你的结果和代表你的集合的变量。）

如果您尝试序列化多条数据，您可以保留`find`然后遍历游标并序列化每条数据。

```
serialized_results = [json.dumps(result, default=json_util.default, separators=(',', ':')) for result in results] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:37:51.243

你真的应该使用 Django 的序列化系统，或者至少是一个可插入的 JSON 序列化应用程序。

# java - setter 的参数类型是否与 getter 的返回类型匹配？

> ID：10172353
> 
> 赞同：2
> 
> 时间：2012-04-16T10:22:55.847
> 
> 标签：java, spring, hibernate, spring-mvc

我正在尝试学习如何使用 DAO 和 BO 类，但出现以下错误

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring/database/Hibernate.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'annotatedClasses' of bean class [org.springframework.orm.hibernate3.LocalSessionFactoryBean]: Bean property 'annotatedClasses' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

休眠.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<!-- Hibernate session factory -->
<bean id="sessionFactory" 
class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
<!--class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">-->
<property name="dataSource">
  <ref bean="dataSource"/>
</property>

<property name="configLocation">    
    <value>classpath:spring/database/hibernate.cfg.xml
    </value>
</property>

<property name="hibernateProperties">
   <props>
     <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
     <prop key="hibernate.show_sql">true</prop>
   </props>
</property>

    <property name="annotatedClasses">
<list>
    <value>com.fexco.helloworld.web.model.Customer</value>
    <value>com.fexco.helloworld.web.model.Countries</value>
</list>
</property>

</bean> 
```

数据源.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean 
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location">
    <value>/properties/database.properties</value>
</property>
</bean>

<bean id="dataSource" 
     class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="${database.driverClassName}" />
<property name="url" value="${database.url}" />
<property name="username" value="${database.username}" />
<property name="password" value="${database.password}" />
</bean>

 <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="data" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.H2Dialect</prop>
            <prop key="hibernate.current_session_context_class">thread</prop>
            <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
        </props>
    </property>
</bean> 
```

我不知道错误来自哪里，因为我的 countries.java 和 customer.java 类中的 getter 和 setter 方法都是正确的！

有人知道出了什么问题吗？（如果您需要查看任何其他课程，只需添加评论说明哪些课程并将它们发布）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:28:33.080

它实际上是在抱怨`annotatedClasses`会话工厂的属性，您使用的`LocalSessionFactoryBean`是没有它的（您已经注释掉了`AnnotationSessionFactoryBean`它*）*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:28:27.637

看起来您想设置最初来自 AnnotationSessionFactoryBean 的“annotatedClasses”属性，而您实际上正在使用没有此属性的 LocalSessionFactoryBean。

# iphone - 使用 sim iPhone 上传 FTP 文件时打开流错误

> ID：10172356
> 
> 赞同：0
> 
> 时间：2012-04-16T10:23:14.167
> 
> 标签：iphone, ftp, stream

我使用 Apple 的 SimpleFTP 上传图像文件。它适用于 Wifi，但不适用于 Sim 使用。

它给了我一个“流打开错误”。任何人都可以对此有所了解吗？手机公司有限制吗？可能吗？几天前我测试了它，它正在工作。

任何提示都会有所帮助。谢谢。

# jquery - 限制选择数量并将所选数据插入数组

> ID：10172358
> 
> 赞同：0
> 
> 时间：2012-04-16T10:23:22.333
> 
> 标签：jquery, arrays, filter, restrict

我有 15 个列表项。我只允许用户从中挑选 5 个。然后我把这个信息放入数组并提交给服务器。

```
<li><a href="#" id="item1" class="select">Item One</a></li> ... etc. 
```

然后我使用此代码来切换所选项目的类别

```
function SelectPrizes (){
$('a.select').click(function() {
    $(this).toggleClass("selected");
    $(this).text($(this).text() == 'Choose prize' ? 'Selected' : 'Choose prize');
    return false;
});
} 
```

我的问题是，如何只允许 5 次选择并仅按 ID 将选定项目添加到数组中。

我知道我可以按 hasClass('selected') 过滤，但我无法找出正确的语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:33:53.300

您可以使用[`slice(start, end)`](http://api.jquery.com/slice/)从指定索引开始从选择中获取特定数量的结果。

```
var results = $("a.select").slice(0, 5); 
```

您问题的第二部分可以通过条件检查来回答：

```
if ($(this).hasClass("selected")) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:35:58.443

检查以下值以获取有关是否选择 5 个元素的提交决定不是 -

```
$('a.select[class*="selected"]').length==5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:02:09.500

回答你的三个问题：

允许 5 个选择：确保长度`$('a.select.selected')`不超过 5 个限制：

```
if ( $('a.select.selected').length < 5 ) {
    // Does not exceed, so we can add...
} 
```

仅将选定的项目添加到数组中：仅添加具有“选定”类的那些项目：

```
$('a.select.selected').each(function(){
    // Add to array
}); 
```

失望先生建议的 hasClass('selected') 的语法：

```
if ( $(this).hasClass('selected') ) {

} 
```

如果您允许用户选择超过 5 个项目，然后只选择其中任意 5 个，则失望先生的解决方案将起作用。

另外，建议改进您的 html。我假设 li 项目有一个 ul 父母。将类 'select' 设置为此 ul 父级并使用选择器：$('ul.select li a').click()。

我已经为你把这一切放在了一个 jsfiddle 中：http: [//jsfiddle.net/5b8aj/6/](http://jsfiddle.net/5b8aj/6/)

# documentation - 如何将 WebWorks ePublisher 与持续集成服务器集成？

> ID：10172360
> 
> 赞同：2
> 
> 时间：2012-04-16T10:23:25.230
> 
> 标签：documentation, continuous-integration

我们的文档是使用[WebWorks ePublisher](http://www.webworks.com/)手动构建的。我们希望在我们的 CI 服务器上自动构建它。

为此，应该有一个非交互式命令行替代 ePublisher GUI。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:48:48.337

[我认为您应该查看名为AutoMap](http://www.webworks.com/Documentation/Reverb/#page/01.Welcome%2520to%2520ePublisher/Introduction.4.04.htm#ww1050257)的 WebWorks ePublisher 组件。

从[什么是 ePublisher AutoMap？](http://www.webworks.com/Documentation/Reverb/index.html#page/03.Preparing%2520and%2520Publishing%2520Content/Automating%2520Projects.5.03.htm#ww1014488)：

> ePublisher AutoMap 是一种自动化工具，使您能够自动化内容转换过程、批处理以及与内容管理或版本控制系统的集成。此组件允许您安排 ePublisher 项目。例如，您可以安排在夜间发生输出生成。然后，当您第二天早上到达时，您的转换内容就准备好了。您还可以自动生成和部署可交付成果以满足您的特定需求，例如根据更新的源文档更新网站内容。您可以自动创建 ePublisher 项目并生成输出，而无需手动打开 ePublisher 或源文档。

更多详细信息：[使用 AutoMap 调度和集成流程](http://www.webworks.com/Documentation/Reverb/index.html#page/03.Preparing%2520and%2520Publishing%2520Content/Automating%2520Projects.5.01.htm)。

# ruby - 使用 ruby 和 mongodb 进行空间聚类

> ID：10172361
> 
> 赞同：0
> 
> 时间：2012-04-16T10:23:26.387
> 
> 标签：ruby, mongodb, geolocation, geospatial

我正在使用 mongodb 地理空间索引来获取位于矩形内的对象列表。它工作正常，但现在我想获得附近物体的集群。

我实现它的方式是 n^2 复杂：对于 mongo 返回的每个事件，将其与以前的事件进行比较，如果它们彼此足够接近，则将它们合并。

有没有人有更高效的东西？

谢谢你，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:16:32.863

[http://osl.iu.edu/~chemuell/projects/presentations/optics-v1.pdf](http://osl.iu.edu/~chemuell/projects/presentations/optics-v1.pdf)至少有一个很好的描述和一个伪实现。直接在 MongoDB 中执行此操作可能不是一个好主意（甚至不可能）。

# asp.net - 为 SqlDataSource 动态设置参数字段

> ID：10172364
> 
> 赞同：1
> 
> 时间：2012-04-16T10:23:45.497
> 
> 标签：asp.net

我需要动态填写“SelectParameters”，但我在 Google 上找到的都是使用固定参数。

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="XX"
                            OnSelecting="SqlDataSource2_Selecting" SelectCommand="">
                            <SelectParameters>
                            </SelectParameters>
                        </asp:SqlDataSource> 
```

有什么解决办法吗？

我也尝试使用“OnSelecting”事件，但我无法为不存在的参数赋值。

```
 protected void SqlDataSource2_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
    {
        string[] queryFields = new string[] { ... }; // some dynamic field depends on different table

        foreach (string s in queryFields)
        {
            e.Command.Parameters["@" + s].Value = "filter";
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:33:34.387

您可以在后面的代码中设置如下变量：

```
SqlDataSource1.SelectParameters.Add("parameterName", "parameterValue"); 
```

但请注意，您需要在添加参数之前清除参数。因为否则你最终会得到重复的参数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-07T12:45:49.973

如果您可以在初始化控件时设置连接字符串，您可以在控件的 init 事件中这样做，如下所示：

```
protected void SqlDataSource1_Init(object sender, EventArgs e)
{
     SqlDataSource1.ConnectionString = <whatever code you want here>;
     SqlDataSource1.ProviderName = <whatever code you want here>;
} 
```

这仍然是动态的，因为您在运行时而不是设计时确定连接属性。这帮助我避免了使用 web.xml 转换并基于指定 QA/PROD 环境的环境变量在 QA 和 PROD 连接字符串之间切换。

# ios - iOS 中的动态 ax 工作流程

> ID：10172368
> 
> 赞同：0
> 
> 时间：2012-04-16T10:23:57.640
> 
> 标签：ios, axapta, microsoft-dynamics

我想在 iOS 上调动 Dynamics AX Workflow 审批。您能否建议我如何继续进行此操作。

我查看了 Dynamics Business 连接器，但它似乎没有任何特定于 Workflow 的类。

还遇到了 Dynamics on the go，这是一个允许用户从他们的 iOS 智能手机批准工作流程的应用程序。先决条件是在动态工作站上安装连接器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T23:13:35.370

[http://daxmusings.blogspot.com/2011/11/10-minute-app-windows-phone-7-app.html](http://daxmusings.blogspot.com/2011/11/10-minute-app-windows-phone-7-app.html)

^ 应该给你一个关于从手机连接到 AOS 的想法

这是一个 2009 年的示例，我想方法会类似：[http ://workflowax.wordpress.com/category/mobile/](http://workflowax.wordpress.com/category/mobile/)

# c++ - 从嵌套映射中提取值

> ID：10172372
> 
> 赞同：1
> 
> 时间：2012-04-16T10:24:23.480
> 
> 标签：c++, map, iterator, nested

环顾四周，找不到我需要的东西。我正在寻找一种方法来从外部映射中提取键并从内部映射中提取值，以便在输出语句中使用。如果我有一张地图，我知道我可以使用`insideMap[key]`. 但是，`[] operator`在此实现中似乎不起作用`((*itr).second)[keyword]`。

```
map< string, map<string, int> >::const_iterator itr; 
for( itr=books.begin(); itr!=books.end(); ++itr)
  //code I need here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:31:39.820

问题`[]`在于`const`迭代器的特性：`[]`运算符 is not `const`，因此您需要`find(keyword)`改用它，并取消引用它返回的迭代器：

```
*(((*itr).second).find(keyword)) 
```

您也可以切换到非常量迭代器并使用`[]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:46:21.053

您可以使用 std::map::at() 代替 operator[]。at() 返回类似 operator[] 的键的值，但 at() 有一个 const 版本。

```
(itr->second).at(keyword) 
```

at() 和 operator[] 之间的区别在于 at() 会进行额外的范围检查，如果失败则抛出 out_of_range 异常。

# android - 如何使用 Unicode 显示俄语字符？

> ID：10172374
> 
> 赞同：0
> 
> 时间：2012-04-16T10:24:27.153
> 
> 标签：android, unicode, localization

我是 Android 新手。我准备了一个使用 Unicode 显示俄语字符的应用程序。我从这个网站得到的俄语 unicodes，

```
http://webdesign.about.com/od/localization/l/blhtmlcodes-ru.htm 
```

我的代码是，

```
StringBuilder sb = new StringBuilder();
 sb.append("\u1040");
 tv.setText(sb.toString()); 
```

它工作正常。但它显示像 BOX。如何克服这个。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:27:54.667

@Deucalion 首先指出了这一点，但您的意思是放置“\u0410”而不是“\u1040”。

# ruby-on-rails - 炼油厂asset_helpers 未在生产/heroku 中解决

> ID：10172376
> 
> 赞同：1
> 
> 时间：2012-04-16T10:24:35.500
> 
> 标签：ruby-on-rails, asset-pipeline, refinerycms

我正在将一个 Rails 应用程序推送到 Heroku（生产），并且炼油厂后端样式表中的 assets_helpers 没有被执行。因此，例如`/assets/refinery/refinery-7fcfa3e350d8ea2e09ea6da68c6e16c9.css`包含以下行：

```
#E7682C image_url("refinery/orange_button.png") repeat-x 
```

任何帮助是极大的赞赏。我在想我只需要向 application.rb/production.rb 添加一些配置...仍在研究它

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:47:39.717

上述问题可以通过在您的 production.rb 中的 config.assets.precompile 中包含路径“refinery/refinery.css”来解决。

所以我的 production.rb 文件现在包含以下行：

`config.assets.precompile += %w( refinery/refinery.css )`

# ruby - 从模式创建表？使用 Ruby 续集 gem

> ID：10172378
> 
> 赞同：4
> 
> 时间：2012-04-16T10:24:43.687
> 
> 标签：ruby, database, sequel

我可以转储当前的[Database#schema](http://sequel.rubyforge.org/rdoc/classes/Sequel/Database.html#method-i-schema)，但我想使用该架构创建一个新表（在不同的数据库中），但我不明白如何做到这一点？

```
DB = Sequel.connect('sqlite:///database_from.db')
schema = DB.schema :table
# schema => [[:id, {:auto_increment=>true, :allow_null=>false, :default=>nil, :primary_key=>true, :db_type=>"smallint(5) unsigned", :type=>:integer, :ruby_default=>nil}], [:field, {:allow_null=>true, :default=>nil, :primary_key=>false, :db_type=>"smallint(5) unsigned", :type=>:integer, :ruby_default=>nil}]]

DB2 = Sequel.connect('sqlite:///database_to.db')
DB2.create_table('table name', schema) #< allowing this would be cool! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:00:15.213

可以通过[迁移完成的一种方法](http://sequel.rubyforge.org/rdoc/files/doc/migration_rdoc.html)

1.  从数据库中转储副本：-

    `sequel -d mysql://root@localhost/database1 > db/001_test.rb`

2.  编辑以仅包含所需的表。

3.  运行迁移到新数据库：-

    `sequel -m db/ mysql://root@localhost/database2`

# windows-7 - 打开 Windows 7 任务栏跳转列表的快捷方式

> ID：10172379
> 
> 赞同：0
> 
> 时间：2012-04-16T10:24:52.827
> 
> 标签：windows-7, shortcut, taskbar, jump-list

我正在寻找打开 Windows 7 任务栏跳转列表的快捷方式。

这是一种现有的方法：`Win + Left Alt + 1, 2, 3 ...`不幸的是，您不能使用小键盘输入数字，所以我觉得这很不舒服。

或者，您可以按`Win + T`选择任务栏的第一项，然后您可以通过按`Left`或来移动项目`Right`。

这很棒，因为您可以按`Return`或`Shift + Return`选择`Ctrl + Shift + Return`任务栏上的项目来实现不同的任务。但是，我找不到打开跳转列表的方法。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:00:23.260

选择合适的项目后`Win + T`，按`Context Menu`键

# javascript - 如何在 JavaScript 中按类获取元素并添加/删除属性？

> ID：10172380
> 
> 赞同：2
> 
> 时间：2012-04-16T10:25:01.490
> 
> 标签：javascript, jquery, asp.net

下面提到的是`get the element`通过`Class Name`

```
var Tag = replaceContentInContainer('className');

function replaceContentInContainer(matchClass) {
    var elems = document.getElementsByTagName('*'), i;
    for (i in elems) {
        if ((" " + elems[i].className + " ").indexOf(" " + matchClass + " ") > -1) {
        }
    }
} 
```

我有这个标签`onclick`的`style`属性。

我的查询是，如何使用 删除/添加`onclick/style`此标签中的属性`JavaScript`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:51:51.573

HTML5 定义了一个方法，getElementsByClassName()，它允许我们根据类属性中的标识符选择文档元素集。

```
var elts = document.getElementsByClassName("className");

for(var e = 0; e < elts.length; e++) { // For each element
   var elt = elts[e];
   elt.removeAttribute("style");
   elt.removeAttribute("onclick");
} 
```

**removeAttribute()**
removeAttribute() 从此元素中删除一个命名属性。尝试删除不存在的属性会被静默忽略。

**setAttribute()**
此方法将指定属性设置为指定值。如果该名称的属性不存在，则创建一个新属性。

**hasAttribute()**
如果此元素具有具有指定名称的属性，则此方法返回 true，否则返回 false。

[https://developer.mozilla.org/en/DOM/element.removeAttribute](https://developer.mozilla.org/en/DOM/element.removeAttribute)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:36:43.490

```
​$(function(){
    $(".className").removeAttr("onclick style");       
});​ 
```

[http://jsfiddle.net/Curt/h6CT9/](http://jsfiddle.net/Curt/h6CT9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T10:37:14.693

通过使用 JQuery，您可以使用类选择器，然后使用 removeattr 函数删除关联的属性：

```
$('.className').removeAttr('click style') 
```

添加和删​​除一些类：

```
$('.className').addClass('className').removeClass('newlyaddedClass') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:30:40.177

```
var Tag = replaceContentInContainer('className');
for(var i = 0; i < Tag.length; i++){
   Tag[i].removeAttribute('onclick');
   Tag[i].removeAttribute('style');
} 
```

# 更新

对不起，我看错了你的代码。我假设你的函数正在返回一个具有该类名的元素数组......所以，使用你的函数：

```
function replaceContentInContainer(matchClass) {
    var elems = document.getElementsByTagName('*'), i;
    for (i in elems) {
        if ((" " + elems[i].className + " ").indexOf(" " + matchClass + " ") > -1) {
           elems[i].removeAttribute('onclick');
           elems[i].removeAttribute('style');
        }
    }
} 
```

# javascript - 如何使用 jsdoc 3 或 jsdoc 记录 Require.js (AMD) 模块？

> ID：10172381
> 
> 赞同：28
> 
> 时间：2012-04-16T10:25:02.577
> 
> 标签：javascript, requirejs, jsdoc, js-amd

我有两种类型的模块：

**Require.js 主文件**：

```
 require.config({
      baseUrl: "/another/path",
      paths: {
        "some": "some/v1.0"
      },
      waitSeconds: 15,
      locale: "fr-fr"
    });

    require( ["some/module", "my/module", "a.js", "b.js"],
      function(someModule,    myModule) {
      }
    ); 
```

**中介模式：**

```
define([], function(Mediator){

var channels = {};
if (!Mediator) Mediator = {};  

Mediator.subscribe = function (channel, subscription) {   
  if (!channels[channel]) channels[channel] = [];
   channels[channel].push(subscription);
};

Mediator.publish = function (channel) {
  if (!channels[channel]) return;
  var args = [].slice.call(arguments, 1);
  for (var i = 0, l = channels[channel].length; i < l; i++) {
    channels[channel][i].apply(this, args);
  }
};

return Mediator;

}); 
```

如果可能的话，我如何用 jsdoc3 来记录这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T12:44:30.923

*这是我对 SO 的第一个答案，请让我知道如何改进未来的答案。*

## 你的具体例子

这两天我一直在寻找答案，似乎没有一种方法可以自动记录 RequireJS AMD 模块而没有一些冗余（如重复的函数名称）。Karthrik 的回答在生成文档方面做得很好，但是如果代码中的某些内容被重命名，文档仍然会从 jsDoc 标记中的内容生成。

我最终做的是以下内容，这是根据 Karthik 的示例进行调整的。注意第 1 行的标记，以及从 jsDoc 注释块`@lends`中删除的标记。`@name`

```
 define([], /** @lends Mediator */ function(Mediator){
    /** 
     * Mediator class
     * This is the interface class for user related modules
     * @class Mediator
     */

    var channels = {};
    if (!Mediator) Mediator = {};  

    /**
      * .... description goes here ...
      * @function 
      *
      * @param {Number} channel  ..... 
      * @param {String} subscription ..............
      * @example
      * add the sample code here if relevent.
      * 
      */        
    Mediator.subscribe = function (channel, subscription) {   
      if (!channels[channel]) channels[channel] = [];
       channels[channel].push(subscription);
    };

    Mediator.publish = function (channel) {
      if (!channels[channel]) return;
      var args = [].slice.call(arguments, 1);
      for (var i = 0, l = channels[channel].length; i < l; i++) {
        channels[channel][i].apply(this, args);
      }
    };

return Mediator;

}); 
```

据我了解，该`@lends`标记会将下一个对象文字中的所有 jsDoc 注释解释为该`@lends`标记引用的类的一部分。在这种情况下，下一个对象字面量是以 . 开头的字面量`function(Mediator) {`。该`@name`标记被删除，以便 jsDoc 在源代码中查找函数名称等。

*注意：我在`@exports`放置标签的地方使用了`@lends`标签。虽然这可行，但它会在文档中创建一个模块……我只想为该类生成文档。这种方法对我有用！*

## 一般 jsDoc 参考资料

*   [jsdoc-toolkit Tag Reference](http://code.google.com/p/jsdoc-toolkit/wiki/TagReference) - jsdoc-toolkit 中标签的绝佳参考。也有很多例子！
*   [2ality's jsDoc intro](http://www.2ality.com/2011/08/jsdoc-intro.html) - 基于 jsDoc-toolkit 的综合教程。
*   [jsDoc3 参考](http://usejsdoc.org)- 相当不完整，但有一些示例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-27T06:22:28.180

jsDoc 似乎不喜欢“定义”和“要求”调用。

因此，我们最终使用多个标签来制作 jsDoc 工具来获取构造函数和其他特定的类方法。请看下面的例子：我刚刚从我的源代码中复制粘贴并用你的类名和方法名替换它。希望对你有效。

```
 define([], function(Mediator){
        /** 
         * Mediator class
         * This is the interface class for user related modules
         * @name Mediator
         * @class Mediator
         * @constructor
         * @return Session Object
         */

        var channels = {};
        if (!Mediator) Mediator = {};  

        /**
          * .... description goes here ...
          * @name Mediator#subscribe
          * @function 
          *
          * @param {Number} channel  ..... 
          * @param {String} subscription ..............
          * @example
          * add the sample code here if relevent.
          * 
          */        
        Mediator.subscribe = function (channel, subscription) {   
          if (!channels[channel]) channels[channel] = [];
           channels[channel].push(subscription);
        };

        Mediator.publish = function (channel) {
          if (!channels[channel]) return;
          var args = [].slice.call(arguments, 1);
          for (var i = 0, l = channels[channel].length; i < l; i++) {
            channels[channel][i].apply(this, args);
          }
        };

    return Mediator;

    }); 
```

注意：上述记录 JS 代码的方法在我们使用 jsDoc 时效果很好。还没有机会尝试 jsDoc3。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-18T00:52:44.417

[**从 Muxa 的答案中获取链接**](http://usejsdoc.org/howto-commonjs-modules.html)，我们看到文档确实特别提到了 RequireJS：

> RequireJS 库提供了一个定义方法，允许您编写一个函数来返回一个模块对象。使用 @exports 标记来记录对象文字的所有成员都应记录为模块的成员。

### 模块示例

```
define('my/shirt', function () {
   /** 
    * A module representing a shirt.
    * @exports my/shirt
    * @version 1.0
    */
    var shirt = {

        /** A property of the module. */
        color: "black",

        /** @constructor */
        Turtleneck: function(size) {
            /** A property of the class. */
            this.size = size;
        }
    };

    return shirt;
}); 
```

因此，在上面的示例中，我们看到 jsdoc 将解析一个`my/shirt` *模块*并将其记录为具有两个成员：一个 property`color`和一个 class `Turtleneck`。该类`Turtleneck`也将被记录为拥有它自己的属性`size`。

### 构造函数模块示例

> 使用 @alias 标记简化在 RequireJS 中记录构造函数模块。

```
/** 
 * A module representing a jacket.
 * @module jacket
 */
define('jacket', function () {
    /**
     * @constructor
     * @alias module:jacket
     */
    var exports = function() {
    }

    /** Open and close your Jacket. */
    exports.prototype.zip = function() {
    }

    return exports;
}); 
```

如果您将构造函数导出为模块，该模块将用作实例化对象的类，则上述内容是您想要使用的。总而言之，我不确定是否使用`@lends`已推荐的和其他标签/技术。相反，我会尝试坚持使用[**文档中引用 RequireJS**](http://usejsdoc.org/howto-commonjs-modules.html)`@module`的、`@exports`和`@alias`标签。[](http://usejsdoc.org/howto-commonjs-modules.html)

 **我不确定你应该如何记录你的 requirejs 'main' 文件。如果我理解正确，您实际上并没有在那里定义任何模块，而是执行依赖于多个模块的一次性功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-25T19:43:08.313

My AMD classes use a slightly different form, but JSDoc wasn't documenting them either so I thought I'd share what worked for me.

Constructors in the global namespace are automatically added:

```
/**
* @classdesc This class will be documented automatically because it is not in
* another function.
* @constructor
*/
function TestClassGlobal() {
/**
* This is a public method and will be documented automatically.
*/
this.publicMethod = function() {
};
} 
```

If you want this behavior on a constructor inside an AMD module, declare it either as *global* or a *member of a namespace*:

```
define([], function() {
/**
* @classdesc This won't be automatically documented unless you add memberof,
* because it's inside another function.
* @constructor
* @memberof Namespace
*/
function TestClassNamespace() {
}

/**
* @classdesc This won't be automatically documented unless you add global,
* because it's inside another function.
* @constructor
* @global
*/
function TestClassForcedGlobal() {
}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-04T03:53:22.593

看起来事情在 JSDoc3 中变得简单多了。以下对我有用：

### 中介者作为一个模块

```
/**
 * Mediator Module
 * @module Package/Mediator
 */
define([], function(Mediator){

  var channels = {};
  if (!Mediator) Mediator = {};  

  /**
   * Subscribe
   * @param  {String} channel Channel to listen to
   * @param  {Function} subscription Callback when channel updates
   * @memberOf module:Package/Mediator
   */
  Mediator.subscribe = function (channel, subscription) {   
    if (!channels[channel]) channels[channel] = [];
     channels[channel].push(subscription);
  };

  /**
   * Publish
   * @param  {String} channel  Channel that has new content
   * @memberOf module:Package/Mediator
   */
  Mediator.publish = function (channel) {
    if (!channels[channel]) return;
    var args = [].slice.call(arguments, 1);
    for (var i = 0, l = channels[channel].length; i < l; i++) {
      channels[channel][i].apply(this, args);
    }
  };

  return Mediator;

}); 
```

但是，我可能会对代码进行以下更改：

```
/**
 * Mediator Module
 * @module Package/Mediator
 */
define([], function(){

  var channels = {};
  var Mediator = {}

  ... 
```

原因是，模块说它定义了`Mediator`，但似乎是从`Mediator`. 我不确定我是否理解。在这个版本中，很明显`Mediator`是由这个文件定义并导出的。**

# xcode - 检测我是否使用旧 iOS 不可用的框架的简单方法

> ID：10172383
> 
> 赞同：7
> 
> 时间：2012-04-16T10:25:09.703
> 
> 标签：xcode, ios-frameworks, ios

在马拉松式的编码会议之后，我添加了太多代码而没有跟踪所有内容，我现在有一个可能有一些 iOS 5.0 和 5.1 特定枚举、调用和框架的应用程序，但是，我希望我的应用程序支持 iOS 回到 4.3 .

我希望有一种简单的方法可以将 Xcode 设置为编译，就好像它正在为 iOS 4.3 编译一样，这样我就会得到所有需要调整和/或替代编码的违规代码的错误，对于较旧的IOS。

我想我可以通过使用编译器选项来实现：

```
-D__IPHONE_OS_VERSION_MAX_ALLOWED=__IPHONE_4_3 
```

但这最终会在系统头文件中产生错误，而不是我的代码。

鉴于大多数枚举和框架的可用性都包含在头文件中，我不得不认为有一种简单的方法可以满足我的需要。

有没有人设法在不使用旧 SDK 下载旧 Xcode 的情况下做到这一点？在那里我可能会遇到在 Lion 下无法正常运行的 Xcode 问题（这就是我正在运行的）。

更新：似乎我无法在 Lion 上安装 Xcode 3.2.6。我现在必须找到一台 Snow Leopard Mac，除非我找到使用编译器选项或强制 Xcode 使用旧 SDK 的方法......

以下是@mattjgalloway 的回答为我所做的示例：

路明应用群

/Users/mz/Dev/Working/Lumin/Lumin/MyUIScreen.m

*   'brightness' 已被弃用：太新了！
*   'brightness' 已被弃用：太新了！
*   'brightness' 已被弃用：太新了！
*   'brightness' 已被弃用：太新了！

/Users/mz/Dev/Working/Lumin/Lumin/LuminViewController+Share.m

*   'TWTweetComposeViewController' 已被弃用：太新了！
*   'TWTweetComposeViewController' 已被弃用：太新了！
*   'TWTweetComposeViewController' 已被弃用：太新了！

/Users/mz/Dev/Working/Lumin/Lumin/LuminViewController.m

*   'scrollView' 已被弃用：太新了！
*   'connectionWithMediaType:' 已弃用：太新了！
*   'connectionWithMediaType:' 已弃用：太新了！
*   'AVCaptureDeviceSubjectAreaDidChangeNotification' 已弃用：太新了！
*   'setSubjectAreaChangeMonitoringEnabled:' 已弃用：太新了！

非常好。

我将以下内容放在项目的 .pch 文件中，并计划对所有项目都这样做：

```
#if DEBUG
#define __IPHONE_OS_VERSION_SOFT_MAX_REQUIRED __IPHONE_OS_VERSION_MIN_REQUIRED
#import "MJGAvailability.h"
#endif 
```

对于任何项目，我现在都会根据我所针对的最早的 iOS 自动监视 SDK 问题。虽然我仍然可能需要担心 SDK 更改，但至少我知道大多数框架添加在旧版 iOS 版本中是不可用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T21:33:05.883

看看我`MJGAvailability.h` [在 GitHub 上的这里](https://github.com/mattjgalloway/MJGFoundation/blob/master/Source/Utilities/MJGAvailability.h)。基本上，它定义了正确的预处理器`#define`，以便较新的 API 看起来像是已弃用，因此您会收到编译器警告。文件顶部有一些文档，但基本上你只需在 PCH 文件中执行此操作：

```
#define __IPHONE_OS_VERSION_SOFT_MAX_REQUIRED __IPHONE_4_3
#import "MJGAvailability.h" 
```

如果你想支持到 iOS 4.3。

它当然不是 100% 万无一失的，但我发现它对于做你要求的事情非常有用。

如果您想抑制警告，因为也许您知道使用该 API 是可以的（`respondsToSelector`例如，您已经用 a 包围了它），那么您可以执行以下操作：

```
UINavigationBar *navBar = self.navigationController.navigationBar;
if ([navBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)]) {
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wdeprecated-declarations"
    [navBar setBackgroundImage:[UIImage imageNamed:@"navbar_bg.png"] forBarMetrics:UIBarMetricsDefault];
#pragma clang diagnostic pop
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T21:39:39.350

对不起; 第一次完全搞砸了这个答案。让我们再试一次...

*   部署目标设置您将使用的最低操作系统版本。
*   SDK 设置您将使用的最高操作系统版本

在部署目标和 SDK 之间，您必须有条件地检查 API。有关详细信息，请参阅[SDK 兼容性指南](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/cross_development/Configuring/configuring.html)。

您可能只想改用旧的 SDK。

将旧 SDK 与较新版本一起使用的最简单方法是保存 .sdk 目录的副本，并在升级时将其复制到新版本中。

但是，您也可以下载旧的东西。苹果只是隐藏它。[从面向 Apple 开发人员](https://developer.apple.com/downloads/index.action)的下载开始。找到您想要的 Xcode 副本。为雪豹下载 Xcode 4.1；它包括 iOS SDK 4.3。您可以将它与 Xcode 4.3 并行安装，但您不必这样做。挂载磁盘。打开一个终端（这样更容易）。转到 /Volumes/Xcode/Packages。你会在那里找到所有的 SDK。

您可以尝试直接安装它，这可能适合您，也可能不适合您。您还可以解压缩 .pkg 并获取所需的文件。我通常使用一个名为[The Unarchiver](http://unarchiver.c3.cx/)的程序。它几乎可以解压任何东西。这将为您提供一个目录，其中包含一个名为“Payload”的文件。如果你双击它，它会展开（它只是一个 tar.gz，它们不包含扩展名）。这将为您提供平台目录。将其复制到 Xcode 副本中的 Platforms 目录中，您应该是金色的。

综上所述，一旦系统运行良好，我通常会切换回使用最新的和使用部署目标进行编译。它使与没有旧 SDK 的其他人协作变得更加容易。由于与旧 SDK 的链接，Apple 可能会或可能不会拒绝。他们过去曾这样做过；我不知道那里目前的情况（有一段时间没有出现过）。但我倾向于建议提交针对最新版本构建的内容。

# mysql - 无法创建 mySQL 数据库

> ID：10172388
> 
> 赞同：1
> 
> 时间：2012-04-16T10:25:58.533
> 
> 标签：mysql, c

我是mySQL编程的新手，似乎遇到了一个非常基本的问题。

我有以下代码，但在“创建数据库”部分出现分段错误。

```
MYSQL *s1;
MYSQL mysql_sense;
char strBuf[8192] = {0};
char DB_NAME[300] = "0_4_3";

mysql_init(&mysql_sense);

sprintf(strBuf, "CREATE DATABASE IF NOT EXISTS %s;", DB_NAME);
mysql_real_query(&mysql_sense, strBuf, strlen(strBuf));  // seg fault here 
```

我试过

```
CREATE DATABASE IF NOT EXISTS 0_4_3 
```

在实际的 mySQL 中，没有任何错误。为什么我的代码中出现段错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:52:56.367

1.  你不做 a`mysql_connect()`或 a `mysql_real_connect()`。
2.  您不检查`mysql_init()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:41:31.633

它可能与您的问题无关，但文档说：

> **默认情况下**，mysql_query() 和 mysql_real_query() 将它们的语句字符串参数解释为要执行的**单个语句**，并且您根据语句是生成结果集（一组行，如 SELECT）还是受影响的结果来处理结果- 行数（对于 INSERT、UPDATE 等）。

[http://dev.mysql.com/doc/refman/5.5/en//c-api-multiple-queries.html](http://dev.mysql.com/doc/refman/5.5/en//c-api-multiple-queries.html)

由于您只有一个语句，因此最简单的修复方法是删除尾随分号。

# objective-c - 哪个版本可用于免费桥接数据类型？

> ID：10172390
> 
> 赞同：0
> 
> 时间：2012-04-16T10:26:04.033
> 
> 标签：objective-c, macos, cocoa, core-foundation

我有疑问，需要一些关于以下代码的建议，

```
NSArray*  onscreenwindows = (NSArray*)CGWindowListCopyWindowInfo(kCGWindowListOptionOnScreenOnly, kCGNullWindowID); 
```

以下哪个版本是正确的？

```
if(onscreenwindows)
{

...

[onscreenwindows release];
} 
```

或者

```
if(onscreenwindows)
{

...

CFArrayRef cfonscreenwindow = (CFArrayRef)onscreenwindows
CFRelease(cfonscreenwindow);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:28:44.500

由于它们是免费桥接的，因此您可以根据需要同时使用它们。

# actionscript-3 - AS3 - 调整图像颜色

> ID：10172393
> 
> 赞同：1
> 
> 时间：2012-04-16T10:26:07.973
> 
> 标签：actionscript-3, colors, adjustment

我正在通过下面的功能调整图像颜色。问题是，如果我需要将**colorFilter**值切换为**0**，它不起作用，但如果我输入**0.1**而不是**0**，它会起作用。没有这种解决方法如何使它工作？

```
import fl.motion.AdjustColor;
import flash.filters.ColorMatrixFilter;

var colorFilter:AdjustColor = new AdjustColor();
var mColorMatrix:ColorMatrixFilter;
var mMatrix:Array = [];
var MC:MovieClip = new MovieClip();

function adjustColors():void
{

    colorFilter.hue = 50;
    colorFilter.saturation = 50;
    colorFilter.brightness = 50;
    colorFilter.contrast = 12;

    mMatrix = colorFilter.CalculateFinalFlatArray();
    mColorMatrix = new ColorMatrixFilter(mMatrix);

    MC.filters = [mColorMatrix];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:22:43.430

我通过向 adjustColors() 添加一个参数并调用它两次来测试它，我看到了同样的问题。我认为这只是一个忽略零值的错误。

这不是一个更好的解决方法，但如果您每次都创建一个新的 AdjustColor，它应该可以正常工作：

```
import fl.motion.AdjustColor;
import flash.filters.ColorMatrixFilter;

var colorFilter:AdjustColor = new AdjustColor();
var mColorMatrix:ColorMatrixFilter;
var mMatrix:Array = [];
var MC:MovieClip = new MovieClip();

function adjustColors():void
{

    colorFilter = new AdjustColor();

    colorFilter.hue = 50;
    colorFilter.saturation = 50;
    colorFilter.brightness = 50;
    colorFilter.contrast = 12;

    mMatrix = colorFilter.CalculateFinalFlatArray();
    mColorMatrix = new ColorMatrixFilter(mMatrix);

    MC.filters = [mColorMatrix];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T01:14:34.963

这是我的参考解决方法：设置每个属性时只需使用逻辑 OR 分配。这样，如果值为 0，它将评估为 false，而将分配 .1：

```
var colorMat:ColorMatrixFilter = new ColorMatrixFilter();
var colorAdjust:AdjustColor = new AdjustColor();

const colorsAdj:Array = 
[
    // BRIGHTNESS, CONTRAST, SATURATION, HUE
    [-20,0,20,-50],
    [0,0,0,0],
    [0,0,0,17]
];

function setColorMat(colorID:int):void
{
    colorAdjust.brightness = colorsAdj[colorID][0] ||= .1;
    colorAdjust.contrast = colorsAdj[colorID][1] ||= .1;
    colorAdjust.saturation = colorsAdj[colorID][2] ||= .1;
    colorAdjust.hue = colorsAdj[colorID][3] ||= .1;
    colorMat.matrix = colorAdjust.CalculateFinalFlatArray();
} 
```

这样你就可以避免每次都重新创建一个新的 ColorMatrixFilter，以防它真的改变了一些东西......并且你保持了一个干净的数组...... ;-)

# zend-framework - Zend_Validate_Regex，不能设置自定义错误信息

> ID：10172402
> 
> 赞同：1
> 
> 时间：2012-04-16T10:26:41.983
> 
> 标签：zend-framework, zend-form, zend-form-element

我在为 Zend_Validate_Regex 设置自定义错误消息时遇到了一些烦人的麻烦。

我知道我迷失在语法中，所以任何帮助都会感谢我的元素声明：

```
$this->addElement('text', 'email', array(
    'label' => 'E-Mail',
    'title' => 'email..',
    'required' => true,           
    'validators' => array(
        array('Regex',
            true,
            array('/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i'),
            'messages' => array(Zend_Validate_Regex::NOT_MATCH,
                'my not match message',
                Zend_Validate_Regex::INVALID  => 'my invalid message',
                Zend_Validate_Regex::ERROROUS => 'my errorous message',
            )
        )
    )
)); 
```

我也试过：

```
'messages'=>array(
    'regexNotMatch'=>'Your own custom error message'
) 
```

但我总是收到默认错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:57:23.020

我真的很喜欢这种创建表单的 OO 方式。自定义消息可以像这样正常工作：

```
$form = new Zend_Form();
$regex = new Zend_Validate_Regex('/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i');
$regex->setMessages(array(
    Zend_Validate_Regex::NOT_MATCH => 'my not match message',
    Zend_Validate_Regex::INVALID   => 'my invalid message',
    Zend_Validate_Regex::ERROROUS  => 'my errorous message'
));
$el = new Zend_Form_Element_Text('email');
$el->setLabel('E-Mail')
    ->setRequired(true)
    ->addValidator($regex);
$form->addElement($el); 
```

**注意**：您为什么使用正则表达式验证器而不是电子邮件地址？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:44:04.967

尝试这个：

```
$this->addElement('text', 'email', array(
    'label' => 'E-Mail',
    'title' => 'email..',
    'required' => true,           
    'validators' => array(
        array('Regex',
            true,
            array(
                '/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i',
                'messages' => array(
                    Zend_Validate_Regex::NOT_MATCH => 'my not match message',
                    Zend_Validate_Regex::INVALID  => 'my invalid message',
                    Zend_Validate_Regex::ERROROUS => 'my errorous message',
            )
        )
    )
)); 
```

# php - 日期时间数据类型在soap php中不起作用

> ID：10172403
> 
> 赞同：2
> 
> 时间：2012-04-16T10:26:52.247
> 
> 标签：php, xml, soap

这是我的代码

```
 $c = new soapclient('http://www.redbus.in/WS2/BookingService.asmx?wsdl',
     array('authentication' => array('LoginID' => 'x','Password'=>'x')));

  $timezone = new DateTimeZone('UTC');
  $time='2012-04-17T16:50:45';
  $date = new DateTime($time,$timezone);
  $sourceid=array('SourceID'=>'244','DestinationID'=>'477','DateOfJourney' =>$date);
  $stockprice = $c->GetAvailableRoutes($sourceid);

   print_r($stockprint); 
```

它不适用于日期时间格式数据类型变量

它显示这样的错误

致命错误：未捕获的 SoapFault 异常：[soap:Client] 服务器无法读取请求。---> XML 文档中存在错误 (2, 252)。---> 字符串 '' 不是有效的 AllXsd 值。在 E:\xampplite\htdocs\index1.php:9 堆栈跟踪：#0 [内部函数]：SoapClient->__call('GetAvailableRou...', Array) #1 E:\xampplite\htdocs\index1.php( 9): SoapClient->GetAvailableRoutes(Array) #2 {main} 在第 9 行的 E:\xampplite\htdocs\index1.php 中抛出

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-18T21:24:57.343

在使用 PHP 的 SOAP 服务时，我遇到了类似的问题。我使用以下方法修复了它：

`$date->format('c');`

（ISO 8601 日期，在 PHP 5 中添加，类似于：2004-02-12T15:19:21+00:00）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:29:59.073

您需要对其进行[格式化](http://php.net/manual/en/datetime.format.php)，否则您会将 DateTime 对象扔到您的数组中（PHP 尝试将其转换为字符串，这不起作用）

例如：

```
$date->format('Y.m.d H:i:s'); 
```

用法

```
$sourceid = array('SourceID'=>'244','DestinationID'=>'477','DateOfJourney' => $date->format('Y.m.d H:i:s')); 
```

# json - 通过 JSON 安全地传输数据

> ID：10172404
> 
> 赞同：0
> 
> 时间：2012-04-16T10:27:12.327
> 
> 标签：json, web-services, security, authentication

我已经设置了一个 Web 服务器，并且可以使用 JSON 在它和我的 iPhone 之间交换数据。

JSON 是否已经加密？我正在尝试制作一个人们可以使用的应用程序。我不确定如何安全地验证用户。现在我让他们发送一些唯一标识他们的信息以及他们的 GET 请求。

但是有人不能轻易地把它捡起来，然后重播 GET 请求到服务器以访问相同的信息吗？

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:30:41.123

JSON is not automagically encrypted, no.

Secure your server with SSH. This ***should*** prevent most MITM type attacks. If you are extremely worried about replay attacks from the client side (browser), you will probably need oAuth + a secure nonce.

No security measure will protect you 100%, you have to compromise security vs performance.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:01:23.810

如果您担心 MITM 攻击，很可能有人在您的网络上嗅探请求然后重放它们，您可以设置 SSL 并通过它发送 JSON 请求，这样可以防止攻击。唯一的另一件事是通过 GET 您的安全变量将在 URL 中公开。它是否是理想的形式是您正在传输什么样的信息以及您正在使用什么其他身份验证。

[http://joekuan.wordpress.com/2010/05/08/quick-steps-on-setting-up-apache-ssl-php-json-on-freebsd-8-0/](http://joekuan.wordpress.com/2010/05/08/quick-steps-on-setting-up-apache-ssl-php-json-on-freebsd-8-0/)

# c# - CustomValidator ServerValidate 方法不会触发

> ID：10172406
> 
> 赞同：12
> 
> 时间：2012-04-16T10:27:18.690
> 
> 标签：c#, asp.net, customvalidator

我已经`CustomValidator`在我的表格上写了一个。我没有设置它的`ControlToValidate`属性。在它的`ServerValidate`事件中，我写了以下内容：

```
protected void CustomValidator1_ServerValidate(object source,      
                                               ServerValidateEventArgs args)
{
    args.IsValid = false;
} 
```

我给这个方法设置了一个断点，但它似乎永远不会到达那个点。但如果我在另一种形式上这样做，它就像一个魅力。

1.  `ValidationGroup`button 和 the的属性`CustomValidator`是一样的
2.  我尝试在按钮和 中删除此属性，但`CustomValidator`仍然不起作用。

似乎有某种形式。我只是在表单上放了一个，除了设置它的事件方法`CustomValidator`之外，不触及它的任何属性。`ServerValidate`

编辑：这是 aspx 部分：

```
 <asp:CustomValidator ID="CustomValidator2" runat="server" 
       ErrorMessage="This is a test" 
   onservervalidate="CustomValidator1_ServerValidate" 
   ValidationGroup="PA"></asp:CustomValidator>

<asp:Button ID="btnPensionersOK" runat="server" Text="OK" Width="75px" 
          onclick="Button1_Click" ValidationGroup="PA" /> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-16T10:43:49.513

尝试通过以下方式强制在按钮单击处理程序中进行验证[`Page.Validate`](http://msdn.microsoft.com/en-us/library/0ke7bxeh.aspx)：

```
protected void Button1_Click(Object sender, EventArgs e)
{
    Page.Validate();
    if(Page.IsValid)
    {
       // servervalidate should have been called
    }
} 
```

**编辑**（来自评论）：

如果您希望 customvalidator 验证您的控件中是否没有输入/选择任何内容，则需要设置[`ValidateEmptyText`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.validateemptytext.aspx)为 true。您可能还想让`CustomValidator`替换`RequiredFieldValidators`.

我假设 aspx 上的验证器顺序决定是否调用 customvalidator 的 severvalidate 如果以前的验证器已经制作了`Page.IsValid=false`. 或者 ASP.NET 非常聪明，以至于它假设`SeverValidate`比简单的 text-is-empty 检查更昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:09:34.460

我还想为同时使用 CustomValidators 和 RequiredFieldValidators 的人提供更多帮助。应该考虑到首先进行客户端验证。并且服务器端验证只会在 PostBack 之后发生。我相信你明白了，但以防万一这不是很清楚：这意味着首先绑定到某些客户端工作验证器的所有控件必须有效才能让 Postback 发生。在页面之后。IsValid 是真正的服务器端内容，并回发包括服务器端验证消息在内的任何更改。

因此，以下是使 CustomVCalidators 和其他内置验证器同时工作的方法：

1.  将两组验证器设置为在客户端工作。在这种情况下，我们必须确保为自定义验证器指定将在客户端进行验证的脚本。无需编写脚本，只需填写 ServerValidate 方法，验证将在服务器中进行。即使 EnableClientScript 属性设置为 True。

2.  将两组验证器设置为在服务器端工作。为此，只需将 EnableClientScript 设置为 False。但请注意，这将加载服务器。

# jquery - 如何递归地为列表中的每个项目分配一个唯一 ID？

> ID：10172407
> 
> 赞同：0
> 
> 时间：2012-04-16T10:27:20.350
> 
> 标签：jquery, html, recursion, html-lists

我有以下清单。

```
<ol>
    <li>
        <a href="client.htm">Client</a>
        <ol>
            <li><a href="client/nokia.htm">Nokia</a></li>
            <li><a href="client/microsoft.htm">Microsoft</a></li>
            <li><a href="client/sony.htm">Sony</a></li>
            <li><a href="client/samsung.htm">Samsung</a></li>
        </ol>
    </li>
    <li><a href="contact.htm">Contact</a></li>
</ol> 
```

我想变成类似的东西。

```
<ol>
    <li>
        <a id="sitemap-item-1" href="client.htm">Client</a>
        <ol>
            <li><a id="sitemap-item-1-1" href="client/nokia.htm">Nokia</a></li>
            <li><a id="sitemap-item-1-2" href="client/microsoft.htm">Microsoft</a></li>
            <li><a id="sitemap-item-1-3" href="client/sony.htm">Sony</a></li>
            <li><a id="sitemap-item-1-4" href="client/samsung.htm">Samsung</a></li>
        </ol>
    </li>
    <li><a id="sitemap-item-2" href="contact.htm">Contact</a></li>
</ol> 
```

请注意，ID 基于列表中项目的级别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:37:31.107

像这样的工作：

```
​$(document).ready(function(){
    $("body > ol > li").each(function(idx){
        $(this).find("> a").attr("id","sitemap-item-"+ ++idx);
        $(this).find("> ol > li > a").each(function(idx2){
            $(this).attr("id","sitemap-item-"+ idx + "-" + ++idx2);            
        });            
    });
});​ 
```

[http://jsfiddle.net/UvQmC/12/](http://jsfiddle.net/UvQmC/12/)

# extjs - Sencha / ExtJS 中的事件委托问题

> ID：10172409
> 
> 赞同：2
> 
> 时间：2012-04-16T10:27:34.907
> 
> 标签：extjs

我正在尝试使用事件委托将我在 Sencha 中检查的复选框的标签添加到商店。

如何将复选框的标签作为参数传递？我在代表团中做得好吗？我有一个类似“意外令牌”的错误。

我真的必须把函数分开，因为我想写 30 个复选框，并且每个人都在检查时具有相同的侦听器。

非常感谢你。

```
//this chekbox code
{
    xtype: 'checkboxfield',
    label: 'Noir',
    listeners: {
        check: anadir(label)
    }
}

//This check function code
anadir: function(label) {
    console.log("Añadiendo...");
    var index = storemisOpciones.getCount() - 1;
    console.log("Indice: " + index);
    storemisOpciones.add({
        option: label
    });
    console.log(label + " se ha marcado");
    index = storemisOpciones.getCount() - 1;
    console.log("Indice: " + index);
    console.log(storemisOpciones.getAt(index));
    storemisOpciones.sync();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:54:17.517

尝试将侦听器定义为（我认为 ExtJs 中没有`check`事件）：

```
listeners: {
    change: function(control) {
         anadir(control);
    }
} 
```

# performance - 如何用 4M qps 实现 50M 键值对 memcache？

> ID：10172410
> 
> 赞同：1
> 
> 时间：2012-04-16T10:27:39.223
> 
> 标签：performance, memcached, benchmarking

业务场景要求：

50M键值对，每个2K，总共100G内存。

大约 40% 的 key-value 会在一秒钟内发生变化。

对于每个更改的对，Java 应用程序需要一次 Get() 和一次 set()，它将是 50M*40%*2=4M qps (query per second) 。

我们测试了 memcached——它显示了非常有限的 qps。
我们的基准测试与此处显示的结果非常相似 [http://xmemcached.googlecode.com/svn/trunk/benchmark/benchmark.html](http://xmemcached.googlecode.com/svn/trunk/benchmark/benchmark.html)

10,000 左右 qps 是一台 memcached 服务器的限制。

这意味着我们的业务场景需要 40 个分区的 memcached 服务器——这看起来非常不经济和不切实际。

根据您的经验，就 memcached 的设计性能而言，基准测试是否准确？

对调整 memcached 系统（客户端或服务器）有什么建议吗？

或者任何其他能够更经济地满足要求的替代内存存储系统？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T01:47:05.617

如果您查看您谈到的基准测试中的图表，您需要意识到在许多情况下，限制是网络而不是内存缓存。例如，如果您的所有项目都有 2k 值，那么您在 GigE 网络上的最大吞吐量约为 65k ops/sec。(1024*1024*128/2048=65536)。Memcached 每秒可以执行比这更多的操作。我个人用（我认为）512b 值达到了 200K ops/sec，而且我听说其他人的吞吐量比我高得多。不过，这一切都在很大程度上取决于网络。

此外，memcached 几乎没有以 10k ops/sec 的速度执行任何操作。我的猜测是您没有在基准测试中利用并发性。

# php - 用 PHP 连接两个 MySQL 表

> ID：10172411
> 
> 赞同：2
> 
> 时间：2012-04-16T10:27:39.957
> 
> 标签：php, mysql, join

例如，我创建了两个页面和两个 MySQL 表。

`Index.php`&`citys.php`

**城市**

```
 ID     City       Country  Population
 --------------------------------------
 1      Amsterdam     NL     1500000
 2      Rotterdam     NL     900000
 3      Dusseldorf    DE     1800000 
```

**注释**

```
ID   City        Name   Comment
---------------------------------
 1   Dusseldorf  Jack   Great city!
 2   Dusseldorf  John   Beautiful
 3   Rotterdam   Emy    Love it 
```

目前我只使用这样的表`citys`：

`index.php`链接到`citys.php`：

```
<a href='citys.php?cmd=menu&id=";echo $row['id'];echo "'> 
```

并`citys.php`使用此代码显示来自 MySQL 的数据：

```
<?php
    include "connect.php";
    if(!isset($cmd))
    {
        if($_GET["cmd"]=="menu" || $_POST["cmd"]=="menu")
        {
            if (!isset($_POST["submit"]))
            {
                $id = $_GET["id"];
                $sql = "SELECT * FROM citys WHERE id=$id";
                $result = mysql_query($sql);
                $row = mysql_fetch_array($result);
?>

<?php echo $row["City"] ?>
<br><br>

<?php echo $row["Country"] ?>
<br><br>
<?php echo $row["Population"] ?> 
```

直到这里一切都显示出来并且工作正常。

但我也想在第 2 页显示评论。因此必须编辑查询才能从表中获取正确的数据`comments`。

我尝试了来自互联网的不同示例，我自己编辑了这些示例：

```
<?php
    include "connect.php";
    if(!isset($cmd))
    {
        if($_GET["cmd"]=="menu" || $_POST["cmd"]=="menu")
        {
            if (!isset($_POST["submit"]))
            {
                $id = $_GET["id"];
                $sql = "SELECT citys.*, comments.* FROM citys, comments WHERE citys.id=$id AND comments.city=citys.city";
                $result = mysql_query($sql);
                $row = mysql_fetch_array($result);
?> 
```

但没有任何效果。

我怎样才能解决这个问题？

* * *

VIPIN JAIN's answer的查询有效，但还存在一个问题：

询问：

```
$sql = "SELECT * FROM citys LEFT JOIN comments ON comments.city=citys.city WHERE citys.id=$id"; 
```

如果表 'comments' 有三行，则此代码仅显示最后两行，但不显示第一行：

```
<?php
    while($row = mysql_fetch_array($result)) {
        echo "<br><br>";
        echo $row['name'];
        echo "<br>";
        echo $row['comment'];
    }
?> 
```

如果我尝试这个，它只会显示第一行。

```
<?php echo $row["name"] ?>
<br>
<?php echo $row["comment"] ?> 
```

我不知道为什么第一条记录被留在循环中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T10:31:56.320

Use this query

```
$sql = "SELECT * FROM citys LEFT JOIN comments ON comments.city=citys.city WHERE citys.id=$id"; 
```

Use leftjoin for this type of work

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T10:30:58.940

```
select * from citys 
left join comments on comments.city = citys.city 
where citys.id=$id 
```

# java - 为什么我不能在 JFrame 上画线

> ID：10172412
> 
> 赞同：1
> 
> 时间：2012-04-16T10:27:43.680
> 
> 标签：java, swing, graphics, line, graphics2d

如下代码所示，我从数据库中获取行的 x 和 y 值。然后将它们存储在一个数组`x`中。之后我试图在框架上画这条线，但它没有被画出来。如何在 Frame 上画线？

```
public class TestFrame{
    static JFrame test;
    public static void main(String ar[]){
        test=new JFrame("Test");
        JButton openLine=new JButton(new AbstractAction("Open Line"){

            public void actionPerformed(ActionEvent e) {
                String lineId=JOptionPane.showInputDialog("Enter Line id");
                ImageComponent image=new ImageComponent();
                image.openLine(lineId);
            }

        });
        test.add(openLine, BorderLayout.NORTH);
        test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        test.setSize(600,600);
        test.setVisible(true);

    }
    static class ImageComponent extends JComponent{
        static int[] x=new int[100];
        static ArrayList al=new ArrayList();
        public void openLine(String line_id){

                            try {

                                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                                Connection con=DriverManager.getConnection("jdbc:odbc:image");
                                Statement pstm=con.createStatement();
                                ResultSet rs=pstm.executeQuery("select * from Line where ID= '"+line_id+"'");
                                while(rs.next()){
                                    x[0]=rs.getInt(3);
                                    x[1]=rs.getInt(4);
                                    x[2]=rs.getInt(5);
                                    x[3]=rs.getInt(6);

                                    al.add(x);

                                }

                                repaint();

                            } catch (Exception ex) {
                                System.out.println("Exception : "+ex);
                            }
                }
                public Graphics2D gd;
                Line2D[] line=new Line2D[100];
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
                        gd=(Graphics2D)g;

                        gd.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

                            for(int i=0;i<al.size();i++){
                                line[i]=new Line2D.Double(x[0], x[1],x[2],x[3]);
                                gd.draw(line[i]);

                            }

                        }
                }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:05:49.240

这是一种使用 a[`BufferedImage`作为渲染表面](https://stackoverflow.com/a/7444175/418556)的方法。

![](../Images/52336a694086939e7e8975c11db475fa.png)

该问题中的 OP 询问的是小程序，但我在选项窗格中显示了图像。它同样适合在框架等中显示，而不会混淆是否覆盖`paint(Graphics)`或`paintComponent(Graphics)`. ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:37:32.930

您不应该直接在 JFrame 上。JFrame 主体中的所有渲染都在内容窗格中完成。菜单内容在 JMenuBar 中完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T10:47:33.250

一个问题是每次单击按钮时您都会创建一个新的 ImageComponent，但它不会添加到您的框架中。另一个是您填写一个数组列表（al），但不使用它来实际绘制您的线。

这适用于 x[0]、x[1]、x[2]、x[3] 的虚拟值：

```
static JFrame test;
static ImageComponent image = new ImageComponent(); //declared as a class member

public static void main(String ar[]) {
    test = new JFrame("Test");
    JButton openLine = new JButton(new AbstractAction("Open Line") {

        public void actionPerformed(ActionEvent e) {
            String lineId = JOptionPane.showInputDialog("Enter Line id");
            image.openLine(lineId);
        }
    });
    test.add(openLine, BorderLayout.NORTH);
    test.add(image); //ADD THE IMAGE TO THE FRAME
    image.setVisible(true);
    test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    test.setSize(600, 600);
    test.setVisible(true);

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T10:37:08.263

您可以使用该`Graphics`对象并覆盖该`paint()`方法，如下所示：

```
public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
        RenderingHints.VALUE_ANTIALIAS_ON);

    g2.setPaint(Color.gray);
    int x = 5;
    int y = 7;

    g2.draw(new Line2D.Double(x, y, 200, 200));
    g2.drawString("Line2D", x, 250);

  } 
```

取自[这里](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Drawline.htm)

# shell - 如何通过迭代列表在 Makefile 中生成目标？

> ID：10172413
> 
> 赞同：17
> 
> 时间：2012-04-16T10:27:45.120
> 
> 标签：shell, makefile

代码：

```
LIST=0 1 2 3 4 5
PREFIX=rambo

# some looping logic to interate over LIST 
```

预期结果：

```
rambo0:
    sh rambo_script0.sh

rambo1:
    sh rambo_script1.sh 
```

由于我的 LIST 有 6 个元素，因此应该生成 6 个目标。将来，如果我想添加更多目标，我希望能够只修改我的 LIST 而不会触及代码的任何其他部分。

循环逻辑应该怎么写？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-16T17:54:25.233

如果您使用 GNU make，您可以在运行时生成任意目标：

```
LIST = 0 1 2 3 4 5
define make-rambo-target
  rambo$1:
         sh rambo_script$1.sh
  all:: rambo$1
endef

$(foreach element,$(LIST),$(eval $(call make-rambo-target,$(element)))) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-16T10:51:41.560

使用[文本转换功能](http://www.gnu.org/software/make/manual/html_node/Functions.html#Functions)。有了`patsubst`您，您可以进行非常一般的转换。用于构建文件名，`addsuffix`并且`addprefix`都很方便。

对于规则，使用[模式规则](http://www.gnu.org/software/make/manual/html_node/Static-Usage.html#Static-Usage)。

总体结果可能如下所示：

```
LIST = 0 1 3 4 5
targets = $(addprefix rambo, $(LIST))

all: $(targets)

$(targets): rambo%: rambo%.sh
    sh $< 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-25T11:14:33.250

只是我对@Idelic 答案的 2 美分，如果你需要使用一些 Make ，你必须使用 例如`$cmd`逃避它们`$$`

```
LIST = 0 1 2 3 4 5
define make-rambo-target
$(info create target: $(addprefix rambo_script, $(addsuffix .sh, $1)).)
rambo$1: $$(addprefix rambo_script, $$(addsuffix .sh, $1))
    sh $$<
endef

all: $(addprefix rambo, $(LIST))

$(foreach element, $(LIST), $(eval $(call make-rambo-target,$(element)))) 
```

输出：

```
$ make
create target: rambo_script0.sh.
create target: rambo_script1.sh.
create target: rambo_script2.sh.
create target: rambo_script3.sh.
create target: rambo_script4.sh.
create target: rambo_script5.sh.
sh rambo_script0.sh
sh rambo_script1.sh
sh rambo_script2.sh
sh rambo_script3.sh
sh rambo_script4.sh
sh rambo_script5.sh 
```

注意：这里的规则“被 Make 看到”为

```
rambo0: $(addprefix rambo_script, $(addsuffix .sh, 0))
    sh $< 
```

但是在这里我们可以写而不转义，即

```
rambo$1: $(addprefix rambo_script, $(addsuffix .sh, $1))
    sh $$< 
```

所以规则“被视为”为：

```
rambo0 : rambo_script0.sh
    sh $< 
```

Make解析它的时候。

# sorting - 什么是最快的快速排序 - 排序算法的排行榜？

> ID：10172416
> 
> 赞同：0
> 
> 时间：2012-04-16T10:27:59.253
> 
> 标签：sorting, quicksort, mergesort, heapsort, bucket-sort

我试图优化我的快速排序以提高性能。对于 4M (1<<22) 个整数项（每个 4 个字节），在可以支持 72 个并发线程（72 个内核）的系统上进行排序需要 0.5 (0.499703) 秒的并行快速排序算法。我有兴趣了解进一步优化并行快速排序的有效方法。此外，在给定工作量的情况下，如果所有排序算法都有一个排名表，是否有兴趣与其他排序算法进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T18:36:02.130

据我所知，没有用于排序算法的规范排行榜。排序算法的性能取决于很多不同的因素——你得到的输入分布、输入的大小、编程语言的选择、使用的编译器的类型和设置、内核的数量、环境温度房间、操作系统等

至于你的另一个问题——如何优化你的快速排序——没有看到你的代码，很难确定。以下是您可能想要尝试的常见快速排序优化列表。

1.  在小输入上切换到更快的排序：插入排序以二次时间运行，但对于小输入，它可能比快速排序快得多。一旦要排序的元素数量低于某个阈值，快速排序实现切换到插入排序的情况并不少见，这会显着减少运行时间。

2.  增加内省。Introsort 是快速排序的一种快速变体，它跟踪递归深度并在算法看起来退化时切换到堆排序。这保证了运行时间将为 O(n log n)，并且如果不触发这种情况，只会产生很小的成本。

3.  使用更好的分区算法。双轴快速排序最近出现在现场，作为传统分区算法的替代方案。它在许多输入上具有更好的性能。此外，如果您希望获得包含大量重复项的输入，请考虑使用可以优雅地处理重复元素的分区方案。

4.  引入尾调用消除。许多快速排序实现对需要排序的两个子数组触发两次递归调用，但实际上没有必要这样做。您可以触发一个递归调用，然后将第二个调用视为尾调用，方法是将参数覆盖到初始调用并将整个调用置于 while 循环中。

# windows - 如何将参数从 Windows 批处理脚本传递给 java

> ID：10172418
> 
> 赞同：0
> 
> 时间：2012-04-16T10:28:11.983
> 
> 标签：windows, batch-file

我需要在我的java程序中读取一些在windows批处理脚本中定义的参数......我如何定义参数......？例如，我需要读取脚本中定义的变量；变量 v=XYX

我尝试定义like（在脚本中）；

```
java  -Dvariable=XYX 
```

但得到以下异常；

```
Usage: java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file)

where options include:
    -client       to select the "client" VM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:29:48.020

您必须先调用类的主要方法

> java com.xyz.MyClass -Dvariable=XYX

# c - 访问字符数组时状态访问溢出

> ID：10172425
> 
> 赞同：0
> 
> 时间：2012-04-16T10:28:38.120
> 
> 标签：c

考虑以下代码：

```
FILE *input;
FILE *output;
input=fopen("in.txt", "r");
output=fopen("out.txt", "w");  
char buffer[1000];
char bytebuffer=0;
char tempchr=0;
char huffmancode[100]={0};
int bufferindex=7;

fgets(&buffer[0],255,input);

int length=0;
while (buffer[length]!=0) length++;
fputc(length,output);       
int j;
int k;
for (j=0;j<length;j++){
    tempchr=buffer[j];
    strcpy(&huffmancode[0],code[tempchr-97]);
    k=0;
    while(huffmancode[k]!=0){
        if (huffmancode[k]!='0'){
            setBit(&bytebuffer,bufferindex);
        }
        bufferindex-=1;
        if (bufferindex==-1){
            fputc(bytebuffer,output);
            bytebuffer=0;
            bufferindex=7;
        }
        k++;
    }
} 
```

由于这一行，此代码无法正常运行：

```
tempchr=buffer[j]; 
```

这条线工作得很好，`j < 10`但是`j >= 10`程序抛出了一个状态访问溢出异常。缓冲区变量被分配了 1000 个字节，所以不清楚为什么程序无法访问边界内的索引。为什么会失败？

有一些我没有包含的数组定义。我认为它们不是问题，但无论如何它们都在这里：

`agac`数组：

```
 int agac[1000]={21,12,9,7,5,
                   5,4,0,0,0,
                   0,3,2,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0,
                   0,0,0,0,0
    }; 
```

`sembol`数组：

```
 char sembol[1000]={0,0,0,'a','b',
                      0,'f',0,0,0,
                      0,'u','k',0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0,
                      0,0,0,0,0
    }; 
```

霍夫曼码数组：

```
 char *code[27]={ "00","01",0,0,0,
                     "11",0,0,0,0,    
                     "101",0,0,0,0,    
                     0,0,0,0,"100",            
                     0,0,0,0,0,            
                     0,0
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:02:49.050

您已评论文件中的所有字符都只是小写字母，因此它们的代码 >= 97。但文件末尾可能有一个新行（即使您没有，有些编辑器也会放一个新行），这导致了这个错误。

请注意，与 get 不同，fgets 在缓冲区中包含换行符（请参阅[fgets](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:02:09.627

这是一个问题：

```
fputc(length,output); 
```

这只会将`length`（它是一个`int`）的最低（最不重要）字节写入输出文件。它将以二进制形式写入，这对于使用`.txt`扩展名打开的文件来说似乎很奇怪。

你可能想要：

```
fprintf(output, "%d\n", length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:54:40.907

添加此代码然后运行它：

```
tempchr=buffer[j];
if(tmpchr < 97 || (tmpchr-97 > 26))
{
  printf("bug found");
}
strcpy(&huffmancode[0],code[tempchr-97]); 
```

# java - HTML 解析和映射

> ID：10172428
> 
> 赞同：1
> 
> 时间：2012-04-16T10:28:45.693
> 
> 标签：java, javascript, html

我打算构建一些类似翻译的 Web 应用程序，其中用户查看 html 页面（我从网上收集并离线存储在服务器端），然后用户需要通过选择与此 html 中的文本进行交互字符的一些子集（要求进行类似翻译的操作）..

所以这里的过程分为3部分：
- 从html文件中提取纯文本
- 纯文本会在服务器上进行预处理并离线存储
- 当用户在html中在线选择一个字符串时，我需要识别我已经提取并离线存储的纯文本中的映射。

对于纯文本提取，我使用 jsoup。
而且我已经对纯文件进行了预处理..
关于映射部分和识别用户选择（或单击）的文本的任何想法？

[在 Java、Apache-Tomcat、JavaScript、Linux 上工作]

# python - python ascii代码转utf

> ID：10172431
> 
> 赞同：3
> 
> 时间：2012-04-16T10:29:11.163
> 
> 标签：python, mod-python

因此，当我以我的母语在 mod_python 中发布名称或文本时，我得到：

```
&#1084;&#1072;&#1082;&#1077;&#1076;&#1086;&#1085;&#1080;&#1112;&#1072; 
```

我也得到：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128) 
```

当我使用：

```
hparser = HTMLParser.HTMLParser() 
    req.write(hparser.unescape(text)) 
```

我该如何解码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:48:16.270

`UnicodeError`如果不了解底层机制，很难解释s。你真的应该阅读其中一个或两个

*   [实用的 Unicode](http://nedbatchelder.com/text/unipain.html) (Ned Batchelder)
*   [每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有任何借口！）](http://www.joelonsoftware.com/articles/Unicode.html)（Joel Spolsky）

简而言之（非常小），Unicode 代码点是一个抽象的“事物”，代表一个字符¹。程序员喜欢使用这些，因为我们喜欢将字符串视为一次一个字符。不幸的是，很久以前就规定一个字符必须适合一个字节的内存，因此最多可以有 256 个不同的字符。这对于简单的英语来说很好，但不适用于其他任何东西。有一个全球代码点列表——数以千计的代码点——旨在保存所有可能的字符，但显然它们不适合一个字节。

*解决方案：构成字符串的代码点的有序列表*与其*编码*为字节序列之间存在差异。每当您使用字符串时，您必须清楚它应该采用哪种形式。

要在形式之间进行转换，您可以`.encode()`将代码点列表（Unicode 字符串）作为字节列表，并将`.decode()`字节转换为代码点列表。为此，您需要知道如何将代码点映射为字节，反之亦然，这就是编码。如果你不指定一个，Python 2.x 会猜测你的意思是 ASCII。如果这个猜测是错误的，你会得到一个`UnicodeError`.

请注意，Python 3.x 在处理 Unicode 字符串方面要好得多，因为字节和代码点之间的区别更加清晰。

¹种。

* * *

编辑：我想我应该指出这有什么帮助。但是你真的应该阅读上面的链接！到处乱扔`.encode()`s 和`.decode()`s 是一种糟糕的编码方式，总有一天你会被更糟糕的问题所困扰。

无论如何，如果你逐步完成你在 shell 中所做的事情，你会看到

```
>>> from HTMLParser import HTMLParser
>>> text = "&#1084;&#1072;&#1082;&#1077;&#1076;&#1086;&#1085;&#1080;&#1112;&#1072;"
>>> hparser = HTMLParser()
>>> text = hparser.unescape(text)
>>> text
u'\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u0458\u0430' 
```

我在这里使用 Python 2.7，所以这是一个 Unicode 字符串，即一系列 Unicode 代码点。我们可以将它们编码为常规字符串（即字节列表），例如

```
>>> text.encode("utf-8")
'\xd0\xbc\xd0\xb0\xd0\xba\xd0\xb5\xd0\xb4\xd0\xbe\xd0\xbd\xd0\xb8\xd1\x98\xd0\xb0' 
```

但我们也可以选择不同的编码！

```
>>> text.encode("utf-16")
'\xff\xfe<\x040\x04:\x045\x044\x04>\x04=\x048\x04X\x040\x04' 
```

您需要决定要使用的编码。

你做的时候出了什么问题？好吧，并不是每个编码都能理解每个代码点。特别是`"ascii"`编码只懂前256！所以如果你尝试

```
>>> text.encode("ascii")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-9: ordinal not in range(128) 
```

你只是得到一个错误，因为你不能用 ASCII 编码这些代码点。

当你这样做时`req.write`，你试图在请求中写下一个代码点列表。但是 HTML 请求不理解代码点：它们只使用 ASCII。Python 2 将尝试通过自动对您的 Unicode 字符串进行 ASCII 编码来提供帮助，如果它们确实是 ASCII 则很好，但如果它们不是则则不然。

所以你需要做`req.write(hparser.unescape(text).encode("some-encoding"))`。

# c++ - Visual Studio 上的 C++ 错误：“Windows 已在 javaw.exe 中触发断点”

> ID：10172436
> 
> 赞同：9
> 
> 时间：2012-04-16T10:29:42.980
> 
> 标签：c++, visual-studio-2008

我一直在研究我的软件 C++ 和 Java（使用 Microsoft Visual Studio 2008 和 Eclipse 构建），并且一直在尝试将它从 32 位系统转移到 64 位系统。

编译阶段没问题，但在执行时我收到一条错误消息：

> “Windows 已在 javaw.exe 中触发断点。这可能是由于堆损坏，这表明 javaw.exe 或其已加载的任何 DLL 中存在错误-。这也可能是由于用户在 javaw 时按 F12 .exe 有焦点。输出窗口可能有更多诊断信息。[BREAK] [CONTINUE] [IGNORE]"

您可以在此处查看错误的快照：

![在此处输入图像描述](../Images/604449ab333d7ccf665c92328da8fa77.png)

你知道这个错误是什么意思吗？“堆损坏”是什么意思？你以前有过这种错误的经验吗？

太感谢了！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-16T12:48:50.367

这是 Windows 堆分配器的一个非常好的特性，从 Vista 开始就可用。它告诉你你的代码有一个指针错误。好吧，希望是你的代码而不是 JVM 有错误 :) 你最好假设它是你的代码。

实际原因介于轻微之间，例如试图释放已经从另一个堆中释放或分配的内存（当您与另一个程序互操作时并不罕见），到非常讨厌的，例如通过溢出分配的堆而将堆炸成碎片缓冲。

诊断的粒度不够细，无法准确告诉您出了什么问题，只是出了点问题。您通常会通过仔细的代码审查和人为地禁用代码块来追踪它，直到错误消失。这就是显式内存管理的乐趣所在。如果 32 位版本是干净的（检查它），那么由于对指针大小的假设，这可能与 64 位代码相关联。64 位指针不适合 int 或 long，因此它会被截断。并且使用截断的指针值将触发此断言。这是令人高兴的问题，您会在调用堆栈窗口中找到故障代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T10:38:41.183

不幸的是，这通常意味着内存损坏。一些内存的双重释放，应该返回但不返回的函数或任何其他类型的未定义行为。

解决这个问题的最好办法是使用内存分析工具，除非你知道这个损坏在哪里。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-19T12:20:32.623

我知道了！谢谢大家，我知道这是内存问题，也许是 malloc() 事实上，我[在这里](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.genprogc/doc/genprogc/malloc_buckets.htm)读到：

> 对于 32 位实现，桶大小因子必须是 8 的倍数，对于 64 位实现，它必须是 16 的倍数，以保证从 malloc 子系统函数返回的地址对于所有数据类型都正确对齐。
> 
> [IBM.com](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.genprogc/doc/genprogc/malloc_buckets.htm)：

因此，我更改了问题点中的 malloc() 大小。我来自：

> (int**) malloc (const * sizeof(int))

至：

> (int**) malloc (const * sizeof(int64_t))

现在它起作用了！

非常感谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T10:41:04.643

通常，当您尝试访问未分配的内存时会发生这种错误。检查所有分配（和释放），尤其是指针到指针，以及可以访问动态分配内存的代码。在您的情况下，指针的大小是 64 位而不是 32 位，这应该是主要原因。

# android - 为什么我们在 C2DM 中使用 dummy@google.com

> ID：10172437
> 
> 赞同：0
> 
> 时间：2012-04-16T10:29:58.370
> 
> 标签：android, android-c2dm

我一直在玩 Google C2DM，并成功地让推送工作。当我试图理解代码时，Google C2DM 的 C2DMReceiver 类中有一个构造函数，其中包含以下几行

```
public C2DMReceiver() {
        // Email address currently not used by the C2DM Messaging framework

        super("dummy@google.com");
    } 
```

我的问题是，这封电子邮件表示什么？如果我删除 super 语句是一样的吗？

任何帮助，将不胜感激。

谢谢

尼廷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:34:20.823

这样做的原因是因为谷歌仅将该电子邮件地址用作报告机制，并没有真正将其用于其他任何事情。所以现在你可以提供任何东西，它仍然可以工作，但建议使用你用来注册推送通知服务的电子邮件地址。

# c# - 如何在 WPF 应用程序的数据网格中加载数据

> ID：10172446
> 
> 赞同：0
> 
> 时间：2012-04-16T10:30:26.320
> 
> 标签：c#, wpf, wpfdatagrid

在 WinForms 我这样做：

```
var fromtable = from a in Table1 select a;
DataGridView.DataSource = fromtable; 
```

我看到了数据。如何在 wpf 应用程序中做同样的事情？

如果我这样做：

```
Museum_TrueEntities me = new Museum_TrueEntities();
 var test = from a in me.Authors select a;
 dataGrid1.ItemsSource = test; 
```

结果 DataGrid 为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:38:28.933

对于数据表，我们做

```
mydatagrid.ItemSource = mydatatable.DefaultView 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:00:07.720

不要忘记在数据网格中设置 AutogenerateColumns=true。

如果您自己创建列，请发布一些 xaml 并设置正确的绑定。

# magento - 如何在 magento 管理面板中显示当前时间？

> ID：10172451
> 
> 赞同：0
> 
> 时间：2012-04-16T10:30:43.663
> 
> 标签：magento

我想在顶部的 mangeto 管理面板中显示当前系统时间。

![在此处输入图像描述](../Images/842433efc8d3b994786908e1243ffd81.png)

我试图找到代码，我找到了这一行：

```
<?php echo $this->formatDate(null, 'full') ?> 
```

在

> app\design\adminhtml\default\default\template\page\header.php

但我不知道如何改变它。

我已经看到芒果有不同的时间。见[帖子](http://magentocookbook.wordpress.com/2010/02/15/magento-date-time/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:59:53.947

这是我所期待的：

```
<?php echo date("m/d/Y h:i:s a", Mage::getModel('core/date')->timestamp(time())); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T07:43:53.703

Magento 有功能 `Mage::getModel('core/date')->date('Y-m-d H:i:s')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-26T05:54:46.943

< ?php echo $this->formatDate(null, 'full',true) ?>

您可以传递第三个参数 true 用于显示时间。

# forms - Create Vaadin form using Binding form to data

> ID：10172452
> 
> 赞同：1
> 
> 时间：2012-04-16T10:30:52.493
> 
> 标签：forms, data-binding, user-interface, vaadin

I'm trying to create form with Vaadin using "Binding form to data" with this class:

```
public class Job {

    private String nom_projet;
    private String svn;
    private String planning1;
    private String planning2;
    private String goals;
} 
```

with getters and setters.

When I try this everything works fine:

```
final Form form = new Form();
Job bean = new Job();
BeanItem<Job> item = new BeanItem<Job>(bean);
form.setItemDataSource(item); 
```

I tried to add a custom field like its described in "Book of Vaadin" so I created this class:

```
public class MyFieldFactory implements FormFieldFactory  {

    private static final long serialVersionUID = 1L;

    public Field createField(Item item, Object propertyId, Component uiContext) {
        Select select = new Select("goals");
        select.addItem("compiler:compile");
        select.addItem("clean install");
        select.addItem("clean");
        select.addItem("package");
        select.addItem("test");
        select.setNewItemsAllowed(true);
        return select;
    }
} 
```

But when I wanted to add this statement to `MyApplication.java`:

```
form.setFieldFactory(new MyFieldFactory()); 
```

I got "`setFieldFactory`" underlined and 3 choices:

> *   () Cast argument 1 to FieldFactory
> *   Change to setFirldFormFactory(...)
> *   Let 'MyFieldFactory' implements 'FieldFactory'

When I click on:

> *   Let 'MyFieldFactory' implements 'FieldFactory'

custom field does not appear in form.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T00:55:57.943

该`setFieldFactory`方法采用一个`FieldFactory`作为参数，您的`MyFieldFactory`类实现`FormFieldFactory`不一样。

在 Vaadin javadoc 中，`setFieldFactory`is 标记为已弃用，它们提示您改为使用`setFormFieldFactory(FormFieldFactory formFieldFactory)`。

使用此方法将解决您的问题。

问候。

# git - Pushing/committing with the Jenkins git plugin: #Not on any branch (GitHub repo)

> ID：10172454
> 
> 赞同：1
> 
> 时间：2012-04-16T10:30:56.763
> 
> 标签：git, github, jenkins, jenkins-plugins

I am using the [Git Plugin](http://wiki.hudson-ci.org/display/HUDSON/Git+Plugin) of Jenkins and have a Job that needs to commit and push some changes. The git repository I am using is hosted on GitHub. Bear with me, I am somewhat new to git.

However, when I run `git status` or `git commit` it says `# Not on any branch`. If I tell the plugin to use a 'branch specifier', i.e. `origin/master` this doesn't help.

Ho do I get the plugin to behave as if I would have done `git clone` on my desktop?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:44:19.083

您可能已经运行了`git checkout <some-sha>`，所以现在`git`正在查看该提交，但不在任何分支的顶端。

如果您已经完成了现在所在的工作，请将其保存`git diff > savefile.tmp`
并签出到您想要的分支：`git checkout master`，
然后应用您所做的工作：`patch -p1 < savefile.tmp`，
修复任何冲突，然后`git commit`您的工作。
然后就可以了`git push`。

如果您所在的位置没有完成任何工作，那么只需结帐以掌握并推送。

# java - JPA2.0 & EE6 keeping my entities in sync

> ID：10172455
> 
> 赞同：0
> 
> 时间：2012-04-16T10:30:58.613
> 
> 标签：java, jpa-2.0, java-ee-6, stateless

I'm new to using ORM tools in enteprise applications. We're building a scaleable application that uses JPA 2.0 and EE6\. I'm trying to find a nice pattern to build my application but I can't find a way to keep my entities in sync (I want to pool my beans that access the entities).

An example:

I have a Group:

```
@Entity
public class Group implements Serializable
{
    @Id
    private Long id;
    @OneToMany
    private List<MyUser> myUsers;

    public Group()
    {
    }

    public Long getId()
    {
        return id;
    }

    public void setId(Long id)
    {
        this.id = id;
    }

    public void addUser(MyUser u)
    {
        myUsers.add(u);
    }
} 
```

And I have a user

```
@Entity
public class MyUser implements Serializable
{
    @Id
    private Long id;

    public MyUser()
    {
    }

    public Long getId()
    {
        return id;
    }

    public void setId(Long id)
    {
        this.id = id;
    }

} 
```

Now if I would have a stateless bean that adds or removes users to a group, I risk having another instance of the stateless bean having out of date information. What is the best practice for this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T10:53:10.113

我不确定您的设计问题到底是什么，因为无状态 bean 不应该保持...状态。您应该按需检索用户组，更新它，然后持久化回数据库。如果您真的担心并发更新并需要更严格的控制，请尝试在您的实体上使用锁定模式：

*   `OPTIMISTIC`JPA 1.0 通过版本号 ( , `OPTIMISTIC_FORCE_INCREMENT`)支持乐观锁定。
*   JPA 2.0 增加了悲观锁 ( `INCREMENT`, `PESSIMISTIC_FORCE_INCREMENT`)

仅当系统中对相同实体有大量争用时才使用悲观锁定，因为它不能很好地扩展。

[附加阅读和示例](https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and)

# java - Loop through all Nodes and update values in Java

> ID：10172458
> 
> 赞同：1
> 
> 时间：2012-04-16T10:31:05.593
> 
> 标签：java, xml, regex, xml-parsing

I'm having a bit of a problem trying to loop through all the nodes in an XML string then updating the values. Please be aware I'm still fairly new with Java.

My aim is to go through every Element and Attribute then run a RegEx on each value to make sure the fields contain only a predefined set of characters. If the field contains unwanted characters then these will be removed and the field updated.

I'm probably doing this completly wrong but the problem comes in when trying to edit the children of children, please see my code below.

```
protected NodeList checkXML(Node node, String strStripCharsRegEx) {
    String strNodeResult = "";
    //NodeList nodeResult = null;

    // do something with the current node instead of System.out
    System.out.println(node.getNodeName());

    strNodeResult = "";
    if(node.getNodeValue() != null && node.getNodeValue() != "")
    {
        for(char c : node.getNodeValue().toCharArray()) {
            if(Character.toString(c).matches(strStripCharsRegEx))
                strNodeResult = strNodeResult + c;
            }

        if(strNodeResult != "")
        {
            node.setNodeValue(strNodeResult);
        }   
    }

    if(node.hasAttributes())
    {
        NamedNodeMap XMLAttributes = node.getAttributes();
        if(XMLAttributes != null)
        {
            for(int attribIndex=0; attribIndex< XMLAttributes.getLength(); attribIndex++)
            {
                System.out.println("AttribName = " + XMLAttributes.item(attribIndex).getNodeName());
                if(XMLAttributes.item(attribIndex).getNodeValue() != null)
                {
                    if(XMLAttributes.item(attribIndex).getNodeValue() != null && XMLAttributes.item(attribIndex).getNodeValue() != "")
                    {
                        strNodeResult = "";
                        for(char c : XMLAttributes.item(attribIndex).getNodeValue().toCharArray()) 
                        {
                            if(Character.toString(c).matches(strStripCharsRegEx))
                                strNodeResult = strNodeResult + c;
                        }

                        if(strNodeResult != "")
                        {
                            XMLAttributes.item(attribIndex).setNodeValue(strNodeResult);
                        }
                    }

                    System.out.println("AttribValue = " + XMLAttributes.item(attribIndex).getNodeValue());  
                }
            }
        }
    }           

    //Check for Children
    NodeList nodeList = node.getChildNodes();

    if(nodeList != null && node.hasChildNodes())
    {           
        for (int i = 0; i < nodeList.getLength(); i++) {
            Node currentNode = nodeList.item(i);
            if (currentNode.getNodeType() == Node.ELEMENT_NODE) {
                if(currentNode.hasChildNodes())
                {
                    //calls this method for all the children which is Element
                    checkXML(currentNode, strStripCharsRegEx);                  
                }               
            }
        }
    }

    return nodeList;
} 
```

Any help would be appreciated.

Thanks

Andy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:42:53.307

首先你不需要自己解析XML，很多XML解析器都可以解析XML，你可以在解析后编辑值，然后再将它们转换为XML。您可以为此使用 dom4j。

[http://dom4j.sourceforge.net/](http://dom4j.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:02:55.790

你真的想用 Java 编写这种代码吗？在专为这项工作而设计的 XSLT 中，这要容易得多。您可以轻松地从 Java 调用 XSLT。

# sqlite - 黑莓模拟器的 SQLite 数据库打开问题？

> ID：10172461
> 
> 赞同：0
> 
> 时间：2012-04-16T10:31:23.037
> 
> 标签：sqlite, blackberry

我对在 Blackberry 上使用 Sqlite 数据库一无所知。最近我用黑莓深入研究了数据库。当我尝试创建数据库时，数据库在某些特定文件夹的 Simulator(Simulate-->ChangeSDCard-->MountDirectory) 上成功创建。

接下来，当我尝试打开数据库以创建表和插入数据时——

```
 String db_url ="file:///SDCard/Databases/"+"sampleTest.db";
      db = DatabaseFactory.open(db_url); 
```

它通过 DatabaseException 错误并显示消息：“路径名无效。路径不包含正确的根列表。有关详细信息，请参阅 FileSystemRegistry 类。”

请帮我 ！！这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:45:44.593

首先在模拟器中设置sdcard：Go Simulate-->change sdcard-->Add directory(sdcard文件夹路径)

像这样编写查询：

```
public Vector GetData()
    {           
        Cursor c = null;
        Statement st = null;
        Vector tableVector=new Vector();
        try 
        {

            URI myURI = URI.create("/SDCard/" + "abc.db");
            d = DatabaseFactory.open(myURI);
            st= d.createStatement("Query"););            
            st.prepare();             
            c = st.getCursor();            
            Row r;            
            while(c.next()) 
            {               
                r = c.getRow();                 
                tableVector.addElement(r.getString(0)); 
            }           
        }
        catch ( Exception e ) 
        {      
            System.out.println( e.getMessage() );
            e.printStackTrace();
        }
        finally 
        {          

            try {
                c.close();
            } catch (DatabaseException e) {

                e.printStackTrace();
            }
            try {
                st.close();
            } catch (DatabaseException e) {

                e.printStackTrace();
            }
            try {
                d.close();
            } catch (DatabaseIOException e) {

                e.printStackTrace();
            }
        }
        return tableVector;

    } 
```

# jquery-tooltip - jquery tooltip Getting undefined value

> ID：10172463
> 
> 赞同：0
> 
> 时间：2012-04-16T10:31:45.793
> 
> 标签：jquery-tooltip

I am getting value through post method when i am add it into variable it is showing the same value but when i accessing the value from the outside. it showing me undefined.

```
var Trends =this.$elm.data('title.poshytip');
        var value;
        var path = window.location.pathname;
              var name = path.substring(path.lastIndexOf('/') + 1);

                var dataToSend='{ID:"'+Trends+'"}';
                $.ajax({
                type: "POST",
                url: "UnitedStatesTrends.aspx/serverside",
                data: dataToSend,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                cache: false,
                success: function( data ) 
                {
                value =  data.d;

                },
                error: function() {
                alert('error');
                }
                })
//here                     
        alert(value);
    // here i am getting value=undefined in alert but my value is 'UnitedStates'

        this.$inner.append(
            typeof content == 'function' ?
                content.call(this.$elm[0], function(newContent) {
                    self.update(newContent);
                }) :

            //here i am setting the value to tooltip    

                content == '[title]' ? value : content
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:57:15.797

好吧，我想，你忘了放一个分号；在这之后

```
 $.ajax({
                type: "POST",
                url: "UnitedStatesTrends.aspx/serverside",
                data: dataToSend,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                cache: false,
                success: function( data ) 
                {
                value =  data.d;

                },
                error: function() {
                alert('error');
                }
                }); 
```

# android - Start new activity when user click "Back" from another activity

> ID：10172466
> 
> 赞同：2
> 
> 时间：2012-04-16T10:31:56.410
> 
> 标签：android, android-activity, splash-screen

I have a splash screen activity at the startup of app. the startup splash screen has finish(), so user will not see startup splash screen anymore when they press BACK from the last remain activity. But instead of app directly exit, I want the app show a exit splash screen which has different images than startup splash screen, after that the app will directly end.

So I want it to be like this : Splash screen 1(Beginning) -> Activity A -> Activity B -> (Press Back) -> Show Activity A -> (Press Back Again) -> Splash screen 2 (End)

How to do that?

Do I have to override back button on Activity A or there's another method to show new activity when user press back button on Activity A ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T10:34:52.730

为什么不使用 Splash 2 的启动活动代码覆盖活动 A 上的后退按钮？我认为这是唯一的解决方案。

例如：

```
@Override
public void onBackPressed() {
   Intent setIntent = new Intent(ActivityA.this, Splash2.class);
   startActivity(setIntent);
   finish();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:38:19.323

简单到

1.  使用 startActivityForResult 方法从启动中调用您的活动 A 而无需调用完成

2.  覆盖 splash 的 onActivityResult 以显示结束闪屏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T10:43:12.830

取决于您希望用户何时退出。如果它仅在 Activity A 中，您可以简单地在那个中覆盖 onKeyDown，否则在您获得的每个 Activity 中覆盖它。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        startActivity(new Intent("com.android.splashscreen"));
        finish();
    }
} 
```

创建并启动您的结束启动画面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T10:33:23.963

您可以覆盖 finish() 方法，添加 startActivity。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T10:37:20.987

Activity A 的 override 方法`onBackPressed()`。在这里面你可以开始你的闪屏 2/END 活动。

# jquery - Traverse to the second table using dom parser

> ID：10172467
> 
> 赞同：0
> 
> 时间：2012-04-16T10:31:58.863
> 
> 标签：jquery

I have code like

```
<table>
</table>
<table>
</table>
<table>
</table> 
```

i want to traverse to the second table using jquery. How do i do it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:43:29.540

您可以通过此表达式获取第二个`table`元素：

```
var secondTable = $('table').eq(1); // index is zero-based 
```

# sql - Optimizing postgres query

> ID：10172471
> 
> 赞同：3
> 
> 时间：2012-04-16T10:32:17.860
> 
> 标签：sql, postgresql, sql-execution-plan

```
 QUERY PLAN                                   
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Unique  (cost=32164.87..32164.89 rows=1 width=44) (actual time=221552.831..221552.831 rows=0 loops=1)
   ->  Sort  (cost=32164.87..32164.87 rows=1 width=44) (actual time=221552.827..221552.827 rows=0 loops=1)
         Sort Key: t.date_effective, t.acct_account_transaction_id, p.method, t.amount, c.business_name, t.amount
         ->  Nested Loop  (cost=22871.67..32164.86 rows=1 width=44) (actual time=221552.808..221552.808 rows=0 loops=1)
               ->  Nested Loop  (cost=22871.67..32160.37 rows=1 width=52) (actual time=221431.071..221546.619 rows=670 loops=1)
                     ->  Nested Loop  (cost=22871.67..32157.33 rows=1 width=43) (actual time=221421.218..221525.056 rows=2571 loops=1)
                           ->  Hash Join  (cost=22871.67..32152.80 rows=1 width=16) (actual time=221307.382..221491.019 rows=2593 loops=1)
                                 Hash Cond: ("outer".acct_account_id = "inner".acct_account_fk)
                                 ->  Seq Scan on acct_account a  (cost=0.00..7456.08 rows=365008 width=8) (actual time=0.032..118.369 rows=61295 loops=1)
                                 ->  Hash  (cost=22871.67..22871.67 rows=1 width=16) (actual time=221286.733..221286.733 rows=2593 loops=1)
                                       ->  Nested Loop Left Join  (cost=0.00..22871.67 rows=1 width=16) (actual time=1025.396..221266.357 rows=2593 loops=1)
                                             Join Filter: ("inner".orig_acct_payment_fk = "outer".acct_account_transaction_id)
                                             Filter: ("inner".link_type IS NULL)
                                             ->  Seq Scan on acct_account_transaction t  (cost=0.00..18222.98 rows=1 width=16) (actual time=949.081..976.432 rows=2596 loops=1)
                                                   Filter: ((("type")::text = 'debit'::text) AND ((transaction_status)::text = 'active'::text) AND (date_effective >= '2012-03-01'::date) AND (date_effective < '2012-04-01 00:00:00'::timestamp without time zone))
                                             ->  Seq Scan on acct_payment_link l  (cost=0.00..4648.68 rows=1 width=15) (actual time=1.073..84.610 rows=169 loops=2596)
                                                   Filter: ((link_type)::text ~~ 'return_%'::text)
                           ->  Index Scan using contact_pk on contact c  (cost=0.00..4.52 rows=1 width=27) (actual time=0.007..0.008 rows=1 loops=2593)
                                 Index Cond: (c.contact_id = "outer".contact_fk)
                     ->  Index Scan using acct_payment_transaction_fk on acct_payment p  (cost=0.00..3.02 rows=1 width=13) (actual time=0.005..0.005 rows=0 loops=2571)
                           Index Cond: (p.acct_account_transaction_fk = "outer".acct_account_transaction_id)
                           Filter: ((method)::text <> 'trade'::text)
               ->  Index Scan using contact_role_pk on contact_role  (cost=0.00..4.48 rows=1 width=4) (actual time=0.007..0.007 rows=0 loops=670)
                     Index Cond: ("outer".contact_id = contact_role.contact_fk)
                     Filter: (exchange_fk = 74)
Total runtime: 221553.019 ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:03:30.140

你的问题在这里：

```
->  Nested Loop Left Join  (cost=0.00..22871.67 rows=1 width=16) (actual time=1025.396..221266.357 rows=2593 loops=1)
    Join Filter: ("inner".orig_acct_payment_fk = "outer".acct_account_transaction_id)
    Filter: ("inner".link_type IS NULL)
        ->  Seq Scan on acct_account_transaction t  (cost=0.00..18222.98 rows=1 width=16) (actual time=949.081..976.432 rows=2596 loops=1)
                Filter: ((("type")::text = 'debit'::text) AND ((transaction_status)::text = 'active'::text) AND (date_effective >= '2012-03-01'::date) AND (date_effective   
            Seq Scan on acct_payment_link l  (cost=0.00..4648.68 rows=1 width=15) (actual time=1.073..84.610 rows=169 loops=2596)
                Filter: ((link_type)::text ~~ 'return_%'::text) 
```

它期望在 acct_account_transaction 中找到 1 行，而它找到 2596，对于另一个表也是如此。

您没有提到您的 postgres 版本（可以吗？），但这应该可以解决问题：

```
SELECT DISTINCT
    t.date_effective,
    t.acct_account_transaction_id,
    p.method,
    t.amount,
    c.business_name,
    t.amount
FROM
    contact c inner join contact_role on (c.contact_id=contact_role.contact_fk and contact_role.exchange_fk=74),
    acct_account a, acct_payment p,
    acct_account_transaction t
WHERE
    p.acct_account_transaction_fk=t.acct_account_transaction_id
    and t.type = 'debit'
    and transaction_status = 'active'
    and p.method != 'trade'
    and t.date_effective >= '2012-03-01'
    and t.date_effective < (date '2012-03-01' + interval '1 month')
    and c.contact_id=a.contact_fk and a.acct_account_id = t.acct_account_fk
    and not exists(
         select * from acct_payment_link l 
           where orig_acct_payment_fk == acct_account_transaction_id 
           and link_type like 'return_%'
    )
ORDER BY
    t.date_effective DESC 
```

此外，尝试为相关列设置适当的统计目标。链接到友好手册：[http ://www.postgresql.org/docs/current/static/sql-altertable.html](http://www.postgresql.org/docs/current/static/sql-altertable.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:56:07.463

您的声明被重写和格式化：

```
SELECT DISTINCT
       t.date_effective,
       t.acct_account_transaction_id,
       p.method,
       t.amount,
       c.business_name,
       t.amount
FROM   contact                  c
JOIN   contact_role            cr ON cr.contact_fk = c.contact_id
JOIN   acct_account             a ON a.contact_fk = c.contact_id 
JOIN   acct_account_transaction t ON t.acct_account_fk = a.acct_account_id 
JOIN   acct_payment             p ON p.acct_account_transaction_fk
                                   = t.acct_account_transaction_id
LEFT   JOIN acct_payment_link   l ON orig_acct_payment_fk
                                   = acct_account_transaction_id
                                        -- missing table-qualification!
                                 AND link_type like 'return_%'
                                        -- missing table-qualification!
WHERE  transaction_status = 'active'    -- missing table-qualification!
AND    cr.exchange_fk = 74
AND    t.type = 'debit'
AND    t.date_effective >= '2012-03-01'
AND    t.date_effective <  (date '2012-03-01' + interval '1 month')
AND    p.method != 'trade'
AND    l.link_type IS NULL
ORDER  BY t.date_effective DESC; 
```

*   显式 JOIN 语句更可取。我根据您的 JOIN 逻辑重新排序了您的表格。

*   为什么`(date '2012-03-01' + interval '1 month')`而不是 date `'2012-04-01'`？

*   缺少一些表资格。在这样一个复杂的陈述中，这是一种糟糕的风格。可能是隐藏了一个错误。

性能的关键是适当的**索引**、正确的 PostgreSQL**配置**和准确的**统计信息**。

[PostgreSQL wiki 中有关性能调整的一般建议。](http://wiki.postgresql.org/wiki/Performance_Optimization)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:47:12.943

*我删除了我的第一个建议，因为它改变了查询的性质。*

我看到有太多时间花在`LEFT JOIN`.

1.  首先是尝试只对`acct_payment_link`表进行一次扫描。您能否尝试将查询重写为：

    ```
    ... LEFT JOIN (SELECT * FROM acct_payment_link
                   WHERE link_type LIKE 'return_%') AS l ... 
    ```

2.  您应该检查您的统计信息，因为计划的行数和返回的行数之间存在差异。

3.  您还没有包含表和索引的定义，最好看看这些。

4.  您可能还想使用[`contrib/pg_tgrm`](http://www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/)扩展在 上构建索引`acct_payment_link.link_type`，但我会将此作为最后尝试的选项。

顺便说一句，您使用的 PostgreSQL 版本是什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:20:15.857

你的索引是什么，你最近分析过吗？`acct_account_transaction`即使该表上有几个条件，它也会进行表扫描：

*   类型
*   生效日期

如果这些列上没有索引，那么一个复合索引`(type, date_effective)`可能会有所帮助（假设有很多行不符合这些列的标准）。

# android - How to stream video on Air android with flex 4.6 mobile project?

> ID：10172472
> 
> 赞同：1
> 
> 时间：2012-04-16T10:32:25.277
> 
> 标签：android, apache-flex, air

I want to stream live video from my android device using flash builder 4.6 mobile project...But couldn't achieve..help plz..

Here is my code:

```
 <?xml version="1.0" encoding="utf-8"?>
  <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
             xmlns:s="library://ns.adobe.com/flex/spark"
         creationComplete="windowedapplication1_creationCompleteHandler(event)"
             xmlns:mx="library://ns.adobe.com/flex/mx" width="480" height="800">
  <fx:Script>
    <![CDATA[
        import flash.filters.ColorMatrixFilter;
        import mx.events.FlexEvent;
        private var myCam:CameraUI;
        private var cam:Camera;
        private var nc:NetConnection;
        private var ns:NetStream;
        private var video:Video;
        private var meta:Object;
        private var nsClient:Object =new Object();
        protected function windowedapplication1_creationCompleteHandler(event:FlexEvent):void
        {
            connect();
        }
        private function connect():void
        {
            if(nc==null)
            {
                        nc = new NetConnection();
                nc.connect("rtmp://localhost/live");
                    // get status information from the NetConnection object
                nc.addEventListener(NetStatusEvent.NET_STATUS, netStatus);
                        }
        }
        private function netStatus(event:NetStatusEvent):void {
            var infoObject:Object=event.info;
            trace("nc: "+infoObject.code+" ("+infoObject.description+")");
            if (infoObject.code == "NetConnection.Connect.Success")
            {
                ns = new NetStream(nc);
                ns.publish("sample");
                ns.client = nsClient;
                video = new Video();
                video.smoothing = true;
                video.attachNetStream(ns);
                                    uic.addChild(video);
                }
        }
    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<mx:UIComponent id="uic" />
    </s:Application> 
```

I couldn't stream video.i can't even see the video on my device itself..only blank page is open when i run this..

And I tried to find the error for that i replace

```
 ns.publish("sample") with ns.play("http://flv.dudeel.com/flv/p2DAM3FX7tBrk.flv") 
```

Now I got the error at the line

```
 ns=new NetStream(nc);

  Error #2044: Unhandled NetStatusEvent:. level=error, code=NetStream.Play.StreamNotFound 
```

What will be the solution and how to achieve in streaming video in this case?

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T18:09:09.770

也许您需要实施互联网许可？

# namespaces - Can I cancel the keyword "using"?

> ID：10172474
> 
> 赞同：-1
> 
> 时间：2012-04-16T10:32:27.180
> 
> 标签：namespaces, using

We can cancel #def by #undef. Can I cancel "using" or "using namespace" in the similar way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:33:50.250

不，你不能。

您最好的解决方案是不要`using`在头文件中包含指令，并尽量减少（甚至完全删除）它们从源文件中的使用。

如果您在使用命名空间时遇到问题，可以使用`::`转到 global `namespace`，但最干净的方法是清除指令。

编辑：这适用于 C++。

# c# - 休眠配置文件中的 use_outer_join 选项 (true) 不会生成外连接

> ID：10172475
> 
> 赞同：0
> 
> 时间：2012-04-16T10:32:28.200
> 
> 标签：c#, .net, hibernate

我在配置文件中将 use_outer_join 选项设置为 true。

我还有一个映射的数据库表。我在 sql 日志中看到对于外键，hibernate 为每个记录生成单独的选择。它不使用连接从主表中获取数据。

有什么我忘记了吗？这还有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:28:17.000

是的，就是这样：在映射文件中指定外连接是不够的。

如果要强制进行外部联接，则必须在 HQL 语句中指定它。例如

```
from firstTable as a outer join fetch a.secondTable as b where ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:41:05.243

检查您的关系映射。如果默认情况下没有指定代理，将为孩子返回..当您访问它的任何属性时，孩子将被加载。它将在单独的 SQL 选择中加载。

您应该在集合映射中使用“outer-join=true”。（如果 hibernate.use_outer_join 在配置中为 true 并且集合映射具有 outer-join="true"...那么只有 hibernate 会生成外部联接）。

# javascript - 加载页面上的 Javascript 未执行

> ID：10172486
> 
> 赞同：1
> 
> 时间：2012-04-16T10:33:29.943
> 
> 标签：javascript, jquery, ajax

```
// Change the value of the outputText field
function setAjaxOutput(){
    if(httpObject.readyState == 4){
        document.getElementById('maincontent').innerHTML = httpObject.responseText;
    }
} 
```

我尝试加载包含此脚本的页面

```
<script type="text/javascript">
$(document).ready(function() {
alert('dfd');
$("#formAddUser").validate({
    rules: {
        userImage: {
            required: true,
            accept: "png|jpg|gif|jpeg"
        }
    }
});
});
</script>

<div class="content-box">
<div class="content-box-header">
........................ 
```

为什么加载页面上的javascript没有执行？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:31:53.943

您的问题是 innerHTML 不执行 HTML 片段中的脚本。当您说“element.innerHTML = htmlfragment;”时，它只是添加标签并呈现 HTML。浏览器不会将脚本标记呈现为 HTML 的一部分，因此它们会被忽略。

您需要像这样使用[jQuery.load()](http://api.jquery.com/load/)而不是 jQuery.ajax() ：

```
$('#maincontent').load('yourscript.php'); 
```

jQuery.load(); 里面有代码，首先取出这些标签，然后通过innerHTML添加剩余的HTML，然后分别运行标签。您可以在第 211 行附近看到执行此操作的代码[。来自](https://github.com/jquery/jquery/blob/master/src/ajax.js)[文档](http://api.jquery.com/load/)：

> 当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:44:09.340

第一次尝试：

```
 <script type="text/javascript">

    alert('dfd');

    </script> 
```

然后尝试

```
<script type="text/javascript">
    $(document).ready(function() {
    alert('dfd');

    });

</script> 
```

并粘贴结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:48:03.447

我相信您的表单带有 ajax。因此，如果您可以将验证转换为函数，并在 ajax 加载的内容中调用它，那就更好了。

# asp.net - 在 ASP.NET 应用程序中实现 SCORM 包查看器

> ID：10172487
> 
> 赞同：4
> 
> 时间：2012-04-16T10:33:33.847
> 
> 标签：asp.net, scorm

有没有人在 ASP.NET 应用程序中实现 SCORM 包查看器的经验可以帮助我。我是这个话题的新手。我的要求是，管理员将 SCORM 包内容导入应用程序，以便用户进行评估。我有 Reload SCORM Player，可以阅读 scorm 内容，需要与 asp.net 相同的库。谢谢，森希尔。

# java - 无法读取程序中的输入文件以读取 QR 码

> ID：10172494
> 
> 赞同：0
> 
> 时间：2012-04-16T10:34:04.493
> 
> 标签：java, qr-code

我正在尝试使程序读取 QR 码，但是当我的代码运行时出现异常`javax.imageio.IIOException: Can't read input file`。该图像位于*src*目录中。有人可以帮我在我的代码中找到问题...

```
public class BarcodeSample {    

    public static void main(String[] args) {
        Reader reader = new MultiFormatReader();

        try {
            BufferedImage image = ImageIO.read(new File("src/img.png"));
            LuminanceSource source = new BufferedImageLuminanceSource(image);
            BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));

            Result result = reader.decode(bitmap);

            BarcodeFormat format = result.getBarcodeFormat();
            String text = result.getText();

            ResultPoint[] points = result.getResultPoints();
            for (int i=0; i < points.length; i++) {
                System.out.println("    Point[" + i + "] = " + points[i]);
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:51:48.913

首先，使用`File.separator`而不是`'/'`根据它运行的操作系统放置正确的分隔符。

现在问题出在`src/img.png`. 我建议您将图像放在目录之外，`src`因为该目录用于代码（不是必须的）。

我不知道您在哪个 IDE 上运行它，但请确保您的工作区当前目录设置为您的项目根目录以便`src/img.png`可以找到（假设`src`在您的根当前目录下），否则您将收到文件未找到异常

# opengl - 如何从旋转矩阵中获得轴角？

> ID：10172495
> 
> 赞同：1
> 
> 时间：2012-04-16T10:34:04.763
> 
> 标签：opengl, quaternions, euler-angles, rotational-matrices

我需要从 openGL 旋转矩阵中获取一些数据。我需要获得等效的欧拉角（已经做过），等效的四元数（做过，但只是从互联网上复制的）和等效的轴角。

我不知道旋转矩阵是否可以表示为围绕某个向量的某个角度的单次旋转。这些是等价的吗？如果是，我怎样才能从另一个那里获得一个？

另外，我想更好地理解四元数的含义以及旋转矩阵的内部。我应该去哪里了解这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:54:40.993

是的，任何旋转矩阵/单位四元数都相当于围绕单轴旋转。如果我们称这个轴`n`和角度，`theta`那么这个旋转的四元数是：

```
[n * sin(theta / 2) cos(theta / 2)] 
```

`acos`在四元数的元素上重构这个使用`w`得到`theta / 2`. 之后，`theta`您可以划分`x`,`y`和`z`组件`sin(theta / 2)`来重建轴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T07:32:58.290

这是一个将 3x3 矩阵转换为轴、角度的函数（使用 quatention，所以也许有一种更有效的方法可以绕过该步骤）。

```
void axis_angle_from_mat3(float r_axis[3], float *r_angle, float mat[3][3])
{
    float q[4];

    /* -------------------------------------------------------------------- */
    /* matrix to quaternion */
    double tr, s;
    float tmat[3][3];

    /* work on a copy */
    memcpy(tmat, mat, sizeof(tmat));

    /* normalize the matrix */
    int i;
    for (i = 0; i < 3; i++) {
        float d = (tmat[i][0] * tmat[i][0] + tmat[i][1] * tmat[i][1] + tmat[i][2] * tmat[i][2]);

        if (d > 1.0e-35f) {
            d = sqrtf(d);
            tmat[i][0] /= d;
            tmat[i][1] /= d;
            tmat[i][2] /= d;
        }
        else {
            tmat[i][0] = 0.0f;
            tmat[i][1] = 0.0f;
            tmat[i][2] = 0.0f;
            d = 0.0f;
        }
    }

    tr = 0.25 * (double)(1.0f + tmat[0][0] + tmat[1][1] + tmat[2][2]);

    if (tr > (double)1e-4f) {
        s = sqrt(tr);
        q[0] = (float)s;
        s = 1.0 / (4.0 * s);
        q[1] = (float)((double)(tmat[1][2] - tmat[2][1]) * s);
        q[2] = (float)((double)(tmat[2][0] - tmat[0][2]) * s);
        q[3] = (float)((double)(tmat[0][1] - tmat[1][0]) * s);
    }
    else {
        if (tmat[0][0] > tmat[1][1] && tmat[0][0] > tmat[2][2]) {
            s = 2.0f * sqrtf(1.0f + tmat[0][0] - tmat[1][1] - tmat[2][2]);
            q[1] = (float)(0.25 * s);

            s = 1.0 / s;
            q[0] = (float)((double)(tmat[1][2] - tmat[2][1]) * s);
            q[2] = (float)((double)(tmat[1][0] + tmat[0][1]) * s);
            q[3] = (float)((double)(tmat[2][0] + tmat[0][2]) * s);
        }
        else if (tmat[1][1] > tmat[2][2]) {
            s = 2.0f * sqrtf(1.0f + tmat[1][1] - tmat[0][0] - tmat[2][2]);
            q[2] = (float)(0.25 * s);

            s = 1.0 / s;
            q[0] = (float)((double)(tmat[2][0] - tmat[0][2]) * s);
            q[1] = (float)((double)(tmat[1][0] + tmat[0][1]) * s);
            q[3] = (float)((double)(tmat[2][1] + tmat[1][2]) * s);
        }
        else {
            s = 2.0f * sqrtf(1.0f + tmat[2][2] - tmat[0][0] - tmat[1][1]);
            q[3] = (float)(0.25 * s);

            s = 1.0 / s;
            q[0] = (float)((double)(tmat[0][1] - tmat[1][0]) * s);
            q[1] = (float)((double)(tmat[2][0] + tmat[0][2]) * s);
            q[2] = (float)((double)(tmat[2][1] + tmat[1][2]) * s);
        }
    }

    /* normalize the quat */
    float len;
    len = sqrtf(q[0] * q[0] + q[1] * q[1] + q[2] * q[2] + q[3] * q[3]);
    if (len != 0.0f) {
        q[0] /= len;
        q[1] /= len;
        q[2] /= len;
        q[3] /= len;
    }
    else {
        q[1] = 1.0f;
        q[0] = q[2] = q[3] = 0.0f;
    }

    /* -------------------------------------------------------------------- */
    /* quaternion to axis angle */

    float ha, si;

    ha = acosf(q[0]);
    si = sinf(ha);

    *r_angle = ha * 2;

    if (fabsf(si) < FLT_EPSILON)
        si = 1.0f;

    r_axis[0] = q[1] / si;
    r_axis[1] = q[2] / si;
    r_axis[2] = q[3] / si;
} 
```

# c# - 实体框架中的外键未正确更新

> ID：10172497
> 
> 赞同：1
> 
> 时间：2012-04-16T10:34:16.430
> 
> 标签：c#, entity-framework, ef-code-first

我在实体框架中遇到外键关系问题。我有两张桌子：`Persons`和`Countries`。`Persons`有一个外键列到`CountryId`.

由于`Countries`表很少更改，我只想获取其数据一次，处理`DatabaseContext`，并将`Countries`缓存列表保留在某处。这是我遇到问题的地方。

实体框架似乎希望您打开数据库上下文，根据需要添加/编辑行，然后关闭数据库上下文。如果打开，获取数据，关闭；然后稍后打开，保存数据，关闭；它有麻烦。

所以我的 POCO 对象看起来像这样：

```
public class Country {
    public int CountryId {get; set; }
    public String Name {get; set; }
}

public Person {
    public int PersonId {get; set; }
    public virtual Country Country {get; set; }
} 
```

然后，我尝试像这样创建一个新人：

```
Country[] countries;
using (var dt = new DatabaseContext())
{
    countries= dt.Countries.ToArray();
}

Person person = new Person();
person.Country = countries[0];
using (var dt = new DatabaseContext()) { 
    dt.Entities.Add(person);
    dt.SaveChanges();
} 
```

保存时，实体框架在`Countries`表中创建一个与 同名的新行`countries[0]`，但新的递增 ID。这显然不是我们想要的结果——这个人的`Country_CountryId`字段应该设置为 id `countries[0]`，并且不应该创建一个新行。

我该如何解决这个问题？我认为一种解决方案是强制实体框架在给定一个已经设置了主键的对象时*不创建新行。*有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:44:12.993

我想知道你是否至少在互联网上搜索一下，然后再花很大的力气描述这个问题，因为这是每隔几天就会被问到的非常常见的问题。

`Add`方法在实体图中添加所有实体。因此，如果您连接`country`到当前上下文`person`并且`country`未附加到当前上下文，则调用`Add`会将两者`person`标记为新实体以进行插入。如果您不想被插入，您必须告诉 EF 这不是一个新实体：`person``country``country``country`

```
Person person = new Person();
person.Country = countries[0];
using (var dt = new DatabaseContext()) { 
    dt.Entities.Add(person);
    dt.Entry(person.Country).State = EntityState.Modified;
    dt.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:40:07.323

`DatabaseContext`我通过在我的类中添加以下两种方法解决了这个问题：

```
public void Add(object target)
{
    this.Set(target.GetType()).Attach(target);
    this.Entry(target).State = System.Data.EntityState.Added;
}

public void Modify(object target)
{
    this.Set(target.GetType()).Attach(target);
    this.Entry(target).State = System.Data.EntityState.Modified;
} 
```

# javascript - 使用 javascript 发送邮件

> ID：10172499
> 
> 赞同：62
> 
> 时间：2012-04-16T10:34:22.307
> 
> 标签：javascript, html, mailto

每当用户单击图像时，我想使用“收件人地址”打开一个新的 Outlook 邮件模板。我已经在 html 页面（与图像链接）中返回了我的代码，每当它加载 javascript 时，它应该打开一个新的邮件模板。但是该功能不起作用。请让我知道我的代码有什么问题。

```
body onLoad="redirect()"

script language="JavaScript"

function redirect() 

      var email = "xyz@something.com"
      var mailto_link = 'mailto:' + email
      window = window.open(mailto_link, 'emailWindow')
      if (window && window.open && !window.closed)         
          window.close() 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-07-18T12:25:04.600

不需要 jQuery。并且没有必要打开一个新窗口。不向浏览器返回 HTTP 数据的协议 ( `mailto:`, `irc://`, `magnet:`, `ftp://`(<- 这取决于它是如何实现的，通常浏览器内置了一个 FTP 客户端)) 可以在同一个窗口中查询而不会丢失当前内容。在你的情况下：

```
function redirect()
{
    window.location.href = "mailto:mail@example.org";
}
<body onload="javascript: redirect();"> 
```

或者直接

```
<body onload="javascript: window.location.href='mailto:mail@example.org';"> 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-16T11:01:15.897

请[在 jsFiddle 中找到代码](http://jsfiddle.net/6R7xt/1/)。它使用 jQuery 来修改链接的 href。您可以使用任何其他库来代替它。它应该工作。

HTML

```
<a id="emailLnk" href="#">
    <img src="http://ssl.gstatic.com/gb/images/j_e6a6aca6.png">
</a> 
```

JS

```
$(document).ready(function() {
    $("#emailLnk").attr('href',"mailto:xyz@something.com");
});​ 
```

**更新**

另一个代码示例，如果 id 仅在点击事件期间已知

```
$(document).ready(function() {
    $("#emailLnk").click(function()
     {
         window.location.href = "mailto:xyz@something.com";
     });
});​ 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-03-29T15:24:59.613

使用 JavaScript，您可以使用以下内容“即时”创建链接：

```
var mail = document.createElement("a");
mail.href = "mailto:mail@example.org";
mail.click(); 
```

浏览器会将其重定向到机器上安装的某些邮件客户端，而不会丢失当前窗口的内容……而且您不需要像“jQuery”这样的任何 API。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-06T16:47:29.577

我只是使用了这个 javascript 代码（使用 jquery，但不是绝对必要的）：

```
 $( "#button" ).on( "click", function(event) {
         $(this).attr('href', 'mailto:me@domain.com?subject=hello');
    }); 
```

当用户点击链接时，我们替换 clicked 元素的 href 属性。

注意不要阻止默认行为（event.preventDefault），我们必须让它这样做，因为我们刚刚替换了href where to go

我认为机器人看不到它，该地址受到垃圾邮件的保护。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-30T03:10:08.570

您可以使用 simple `mailto`，请参阅下面的简单标记。

```
<a href="mailto:name@gmail.com">Click here to mail</a> 
```

单击后，它将打开您的 Outlook 或您设置的任何电子邮件客户端。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-10-10T20:21:03.483

```
document.location.href = "mailto:chrisgreg23@googlemail.com" 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-04-24T07:19:27.003

我不知道它是否有帮助，但是使用 jQuery 来隐藏电子邮件地址，我做到了：

```
 $(function() {
        // planque l'adresse mail
        var mailSplitted 
            = ['mai', 'to:mye', 'mail@', 'addre', 'ss.fr'];

        var link = mailSplitted.join('');
        link = '<a href="' + link + '"</a>';
        $('mytag').wrap(link);
    }); 
```

我希望它有所帮助。

# c# - 带参数查询

> ID：10172501
> 
> 赞同：0
> 
> 时间：2012-04-16T10:34:27.753
> 
> 标签：c#, mysql

我有`Mysql`如下查询：

```
SELECT        id, nome, sigla
FROM            pais
WHERE    (estado=@estado) 
```

在我的代码中不使用参数我会简单地使用：

```
this.cidadeTableAdapter.Fill(this.anfeDataSet1.cidade); 
```

一切都会好的。

更多使用参数我如何给参数赋值并传递给 TableAdapter？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:38:01.713

```
using (SqlConnection connection = new SqlConnection(connectionString)) //create connection
{
        connection.Open();//openconnection

        using (SqlCommand command = new SqlCommand("SELECT id, nome, sigla FROM  pais
WHERE (estado=@estado)", connection)) //create command
        {

             command.Parameters.Add(new SqlParameter("estado", value)); //add parameter

             SqlDataReader reader = command.ExecuteReader(); //execute reader
             while (reader.Read())
             {
                 ...... //read the data
             }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:39:53.573

看看这个：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

```
SqlCommand com = new SqlCommand("SELECT id, nome, sigla FROM  pais WHERE (estado=@estado)", connection);
com.Parameters.Add(new SqlParameter("estado", value)); 
        SqlDataAdapter cidadeTableAdapter = new SqlDataAdapter();
        cidadeTableAdapter.SelectCommand = this.com;
        DataSet set = new DataSet("return");
        cidadeTableAdapter.Fill(set);
        this.com.Connection.Close();
        return set; 
```

顺便说一句，最好的选择是使用与数据库的连接，因此您不必显式关闭它。

# java - 使用 Apache James 无法发送电子邮件

> ID：10172502
> 
> 赞同：1
> 
> 时间：2012-04-16T10:34:31.823
> 
> 标签：java, smtp, jakarta-mail, james

我正在尝试使用 apache james 发送电子邮件，但电子邮件没有被发送。下面是我的代码。

```
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;

public class test {

    public static void main(String args[]) throws Exception {

        String user = "test";  

        String password = "test"; 
        String fromAddress = "test@localhost";   
        String toAddress = "test@gmail.com";        
        Properties properties = new Properties();     
        properties.put("mail.smtp.host", "localhost");     
        properties.put("mail.smtp.port", "25");     
        properties.put("mail.smtp.username", user);     
        properties.put("mail.smtp.password", password);
        properties.put("mail.transport.protocol", "smtp"); 

        Session session = Session.getDefaultInstance(properties, null);      

        try             
        {         
            Message message = new MimeMessage(session);         
            message.setFrom(new InternetAddress(fromAddress));         
            message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(toAddress));          
            message.setSubject("Email from our JAMEs");         
            message.setText("hiiiiii!!");         
            Transport.send(message);          
            System.out.println("Email sent");     
        }     
        catch (MessagingException e)     
        {        
            e.printStackTrace();     
        } 
        }
} 
```

在具有密码测试的 apache james 中还添加了测试用户。请求你同样帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:42:15.123

我认为由此引起的问题：

电子邮件服务器在接受任何邮件之前都会执行反向 dns 查询。他们检查电子邮件来自的域的 ip 以及电子邮件真正来自的 ip。

如果域的 ip 和电子邮件发件人的 ip 不匹配，邮件服务器会认为电子邮件是垃圾邮件或垃圾邮件。

在这里，因为当电子邮件服务器发送反向 dns 查询未获得 IP 并认为您的邮件是垃圾邮件或垃圾邮件时，您的域 (localhost) 不是有效地址。

有关更多信息，请查看：[http ://wiki.junkemailfilter.com/index.php/Fixing_Reverse_DNS](http://wiki.junkemailfilter.com/index.php/Fixing_Reverse_DNS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:57:43.493

我遇到了同样的问题。我做了什么：

1.  转到路径：\apps\james\conf
2.  打开以编辑文件名“james-fetchmail.xml”
3.  将“fetchmail”从 false 更改为 true 为：
4.  重新启动 Apache James 服务器。
5.  启动服务器后，您将在控制台上看到以下消息：

James Mail Server 2.3.2 远程管理器服务已启动普通：4555 POP3 服务已启动普通：110 SMTP 服务已启动普通：25 NNTP 服务已启动普通：119 FetchMail 已启动

*现在，运行你的程序。它应该工作！*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T13:17:57.627

您是否添加了域“localhost”？如果没有，请先添加域，然后再创建用户。

$ james-cli AddDomain -h 127.0.0.1 localhost

# 检查域是否存在

$ james-cli ListDomains -h 127.0.0.1

还有，你是怎么开始詹姆斯的？使用 james.bat？

# asp.net - asmx 到 WCF 或 Web API

> ID：10172506
> 
> 赞同：15
> 
> 时间：2012-04-16T10:34:49.980
> 
> 标签：asp.net, wcf, azure, asp.net-web-api, wcf-web-api

我有一个正在构建的应用程序，目前，我使用 ASMX 构建了一些 Web 服务。最后，应用程序将部署在 azure 上。Web 服务非常简单，它们所做的只是调用 AppCode 文件夹中的一个类来处理所有工作。

将我的 Web 服务移动到 WCF 或 Web API 会更好/更容易/更快/更高性能吗？

感谢您的建议。

PS：我想补充一点，Web 服务需要在 HTTPS 中工作。目前，他们在 HTTP 上，因为我处于开发模式。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-16T10:59:30.983

单线：如果你已经有了一个工作代码，并且将它转移到另一种技术是有风险的，那么就留在工作代码中。

**取决于谁在回答。**

Web API 包含 HTTP 并为您提供 ASMX 和 WCF 无法实现的灵活性。如果您关心 HTTP、内容协商、媒体类型，并且您需要从任何客户端（包括 AJAX）调用您的服务，那么 Web API。

如果您需要能够使用 WS* 安全标准（例如，使用 X509 证书、ADFS 等），可能会更改您的绑定，使用不同的绑定服务于不同的客户端，可扩展性等使用 WCF。

如果您已经有一个工作代码，并且您所关心的只是 RPC，并且您的客户总是会使用 ASMX，那么请坚持使用 ASMX。

# 表现

没有基准，但我的直觉，按降序排列：Web API、ASMX、WCF

# 更轻松

按降序排列：ASMX（因为你知道它）、Web API、WCF

# 更快的发展

如果您都了解它们，Web API 和 ASMX，那么 WCF

* * *

*PS：学习新技术是好事。事情的发展方式（因为您已经迁移到 Azure）投资新技术很重要。*

# javascript - 如何在javascript中从图像中获取像素的索引

> ID：10172509
> 
> 赞同：0
> 
> 时间：2012-04-16T10:35:05.953
> 
> 标签：javascript, image, get, coordinate

我想让球在击中板时反弹。所以我必须让棋盘像素让它在球击中棋盘时反弹。我尝试过这种方式，但没有奏效。这是我的代码Javascript代码

```
var xboard = document.getElementById(board)
var movx = parseInt(xboard.style.left) 
```

图像代码

```
<img id="board" style="z-index: 0; left: 300;position: absolute; top: 600px" align=baseline border=0 hspace=0 src="design/board.gif"> 
```

当我试图通过

```
alert(movx) 
```

它在警报框中显示“未定义”。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:36:42.413

我认为你需要用 px 声明位置：

```
left: 300px 
```

似乎工作：http: [//jsfiddle.net/p2gRq/](http://jsfiddle.net/p2gRq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:56:59.753

此方法为您提供传递的控制坐标

```
<img id="board" style="z-index: 0; left: 300;position: absolute; top: 600px" align=baseline border=0 hspace=0 src="design/board.gif">

function findPos(obj){
var curleft = 0;
var curtop = 0;

if (obj.offsetParent) {
    do {
        curleft += obj.offsetLeft;
        curtop += obj.offsetTop;
       } while (obj = obj.offsetParent);

    return {X:curleft,Y:curtop};
}
}

findPos(document.getElementById('board'));
alert(curleft);
alert(curtop); 
```

[在此处](https://stackoverflow.com/questions/829252/how-to-find-coordinates-of-an-html-button-or-image-cross-browser)了解更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:09:49.270

您正在尝试使用实际元素而不是`id`.

改变这个：

```
var xboard = document.getElementById(board); 
```

到：

```
var xboard = document.getElementById('board'); 
```

并确保您`board`在它存在之前没有尝试访问。

# vb.net - 检测 Treeview 中的变化

> ID：10172516
> 
> 赞同：0
> 
> 时间：2012-04-16T10:35:33.820
> 
> 标签：vb.net

我有一个表格中的 Treeview。我可以通过在 Treeview 中创建子文件夹来添加子节点、删除节点、移动子节点，还可以更改任何子节点的文本。

如何以编程方式确定是否发生了这些事件/更改之一？

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:43:05.050

我有一种感觉，当您修改 TreeView 的 Nodes 集合时，您将很难找到将触发的事件。

您可以通过某种包装函数或类控制对 TreeView 节点的访问来找到答案，这些包装函数或类随后委托给 TreeView，但也会引发必要的事件供您挂钩。

# php - 在 div 标签内写入 PHP 日期

> ID：10172517
> 
> 赞同：0
> 
> 时间：2012-04-16T10:35:38.080
> 
> 标签：php, date, html, tags

我想做一个博客，但我想开始给评论加上时间戳，但我想开始在日期里面写一个

这是我的代码：

```
<div id="midMain">
    'Zup?
    <?php
    date_default_timezone_set('UTC');

    echo date('l jS \of F Y h:i:s A');
    ?>
</div> 
```

它只显示“'Zup？” 部分，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:20:44.180

我测试了你的代码，它显示：

`'Zup? Monday 16th of April 2012 11:18:02 AM`

问题不在于该代码。

# camera - 适用于所有 Android 设备的相机应用程序

> ID：10172518
> 
> 赞同：2
> 
> 时间：2012-04-16T10:35:46.750
> 
> 标签：camera, xamarin.android, android

我目前正在为出现一些问题的 Android 开发相机应用程序。我需要它在所有 Android 设备上工作，并且由于所有这些都以不同的方式工作，特别是与相机硬件一起工作，我很难找到适用于每个设备的解决方案。

我的应用程序的主要目标是单击按钮启动相机，拍照并将其上传到服务器。所以我真的不需要在设备上保存图像的功能，但如果需要进一步使用图像，我不妨允许它。

例如，我正在三星 Galaxy SII 和摩托罗拉 Pad 上测试我的应用程序。我得到了启动相机的工作代码，因为我使用的是 Monodroid，所以这是 C# 代码：

```
Intent cameraIntent = new Intent(Android.Provider.MediaStore.ActionImageCapture);  
StartActivityForResult(cameraIntent, PHOTO_CAPTURE); 
```

我获取结果，类似于我遵循的本指南：http: [//kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/](http://kevinpotgieter.wordpress.com/2011/03/30/null-intent-passed-back-on-samsung-galaxy-tab/) 为什么我遵循本指南是因为活动在我的 Galaxy 设备上返回 null（另一个面向设备的问题）。

此代码在 Galaxy 设备上运行良好。它会拍一张照片并将照片保存在画廊中，我可以从中上传到服务器。通过进一步研究，这显然是星系标准行为，所以这在我的摩托罗拉平板电脑上不起作用。相机工作正常，但没有图像保存到图库。

因此，在这种背景下，我的问题是，我是否走在正确的道路上？我是否需要将图像保存到图库以便在我的应用程序中进一步使用？是否有适用于每台 Android 设备的解决方案，因为这就是我需要的解决方案。

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:31:08.917

阅读链接的文章后，该文章中采用的方法是针对 Galaxy 线的，因为它们似乎是自动写入画廊的。

本文详细讨论了其他一些场景：

[Android ACTION_IMAGE_CAPTURE 意图](https://stackoverflow.com/questions/1910608/android-action-image-capture-intent)

因此，我不一定认为遵循您提供的链接文章是正确的道路。并非所有设备都会按照该文章 afaik 中的描述自动写入图库。我链接到的文章指出了与安全相关的问题，并建议将图像写入 /sdcard/tmp 文件夹以存储原始图像。走类似的道路很可能会导致代码在许多设备上可靠地工作。

以下是一些其他链接供参考：

谷歌关于这个主题的讨论： [http](http://code.google.com/p/android/issues/detail?id=1480) ://code.google.com/p/android/issues/detail?id=1480 有可能解决问题的项目：[https ://github.com/johnyma22/classdroid](https://github.com/johnyma22/classdroid)

虽然该讨论/项目在 Java/Android SDK 中，但相同的概念应该适用于 Monodroid。如果您需要帮助，我很乐意帮助您将代码调整为适用于 Android 的 Mono 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:55:35.257

To long2know：是的，同样的概念也适用于 Monodroid。我已经阅读了您链接的堆栈文章以及其他类似文章。但是我不喜欢该特定帖子中的方法，因为它会检查某些硬编码到集合中的设备的错误。这意味着它可能无法检测到未来设备中的错误。由于我不会对此应用程序进行维护，因此我不能允许这样做。我在其他地方找到了一个解决方案，并根据我的情况对其进行了调整，如果有人需要，我会在下面发布。它适用于我的两种设备，猜测它适用于大多数其他设备。谢谢你的帖子！

允许您拍摄照片并使用的解决方案，还可以选择使用图库中的图像。解决方案出于这些目的使用选项菜单，仅用于测试。（Monodroid 代码）。

相机代码的灵感来自： [使用 MonoDroid 访问相机的全分辨率图片](https://stackoverflow.com/questions/8068156/access-to-full-resolution-pictures-from-camera-with-monodroid)

```
namespace StackOverFlow.UsingCameraWithMonodroid
{
    [Activity(Label = "ImageActivity")]
    public class ImageActivity
        private readonly static int TakePicture = 1;
        private readonly static int SelectPicture = 2;
        private string imageUriString;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            this.SetContentView(Resource.Layout.ImageActivity);
        }

        public override bool OnCreateOptionsMenu(IMenu menu)
        {
            MenuInflater flate = this.MenuInflater;
            flate.Inflate(Resource.Menu.ImageMenues, menu);

            return base.OnCreateOptionsMenu(menu);
        }

        public override bool OnOptionsItemSelected(IMenuItem item)
        {
            switch (item.ItemId)
            {
                case Resource.Id.UseExisting:
                    this.SelectImageFromStorage();
                    return true;
                case Resource.Id.AddNew:
                    this.StartCamera();
                    return true;
                default:
                    return base.OnOptionsItemSelected(item);
            }
        }

        private Boolean isMounted
        {
            get
            {
                return Android.OS.Environment.ExternalStorageState.Equals(Android.OS.Environment.MediaMounted);
            }
        }

        private void StartCamera()
        {
            var imageUri = ContentResolver.Insert(isMounted ? MediaStore.Images.Media.ExternalContentUri
                                    : MediaStore.Images.Media.InternalContentUri, new ContentValues());

            this.imageUriString = imageUri.ToString();

            var cameraIntent = new Intent(MediaStore.ActionImageCapture);
            cameraIntent.PutExtra(MediaStore.ExtraOutput, imageUri);
            this.StartActivityForResult(cameraIntent, TakePicture);
        }

        private void SelectImageFromStorage()
        {
            Intent intent = new Intent();
            intent.SetType("image/*");
            intent.SetAction(Intent.ActionGetContent);
            this.StartActivityForResult(Intent.CreateChooser(intent,
                    "Select Picture"), SelectPicture);

        }

        // Example code of using the result, in my case i want to upload in another activity
        protected override void OnActivityResult(int requestCode, Result resultCode, Intent data)
        {
            // If a picture was taken
            if (resultCode == Result.Ok && requestCode == TakePicture)
            {
                // For some devices data can become null when using the camera activity.
                // For this reason we save pass the already saved imageUriString to the upload activity
                // in order to adapt to every device. Instead we would want to use the data intent
                // like in the SelectPicture option.

                var uploadIntent = new Intent(this.BaseContext, typeof(UploadActivity));
                uploadIntent.PutExtra("ImageUri", this.imageUriString);
                this.StartActivity(uploadIntent);
            }
            // User has selected a image from storage
            else if (requestCode == SelectPicture)
            {
                var uploadIntent = new Intent(this.BaseContext, typeof(UploadActivity));
                uploadIntent.PutExtra("ImageUri", data.DataString);
                this.StartActivity(uploadIntent);
            }
        }
    }
} 
```

# forms - CakePHP 2.0 确定点击了哪个提交按钮

> ID：10172522
> 
> 赞同：10
> 
> 时间：2012-04-16T10:36:03.053
> 
> 标签：forms, cakephp, cakephp-2.0

在 CakePHP 1.3 中，您可以创建一个带有多个提交按钮的表单：

```
echo $this->Form->submit('Submit 1', array('name'=>'submit');
echo $this->Form->submit('Submit 2', array('name'=>'submit'); 
```

并检测在控制器中按下了哪个提交按钮：

```
if (isset($this->params['form']['submit']) && $this->params['form']['submit'] == "Submit 1") {
  // first button clicked
} 
```

在 CakePHP 中，$this->params['form'] 没有设置，点击的按钮值**不会出现在 $this->request, $this->request->data, $this->params, $ this->data 或 $_POST**。

如何确定在 CakePHP 2.0 中单击了哪个按钮？

提前致谢。

编辑：

根据要求，这是表单的代码：

```
<?php echo $this->Form->create('History', array('action'=>'add')); ?>
<div class='submit'>
<?php 
echo $this->Form->submit('Yes', array('div'=>false, 'name'=>'submit')); 
echo $this->Form->submit('No', array('div'=>false, 'name'=>'submit')); 
?>
</div>
<?php echo $this->Form->end()?> 
```

以及表单的输出：

```
<form action="/projects/kings_recruit/trunk/www/histories/add" id="HistoryAddForm" method="post" accept-charset="utf-8">
  <div style="display:none;">
    <input name="_method" value="POST" type="hidden">
  </div>
  <div class="submit">
    <input name="submit" value="Yes" type="submit">
    <input name="submit" value="No" type="submit">
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-04T09:24:27.623

通常，对两个提交按钮使用相同的名称是一种不好的做法。$_POST 和 $this->request->data 中应该有一个“提交”键

我在 CakePHP 2.1.1 中对此进行了测试，如下所示：

视图代码：

```
<?php echo $this->Form->create('Message', array('action'=>'test')); 
//  Extra test input field
echo $this->Form->input('test');
?>

<div class='submit'>
<?php 
echo $this->Form->submit('Yes', array('div'=>false, 'name'=>'submit')); 
echo $this->Form->submit('No', array('div'=>false, 'name'=>'submit')); 
?>
</div>
<?php echo $this->Form->end()?> 
```

在 $this->request->data 中的控制器中：

```
array(
    'submit' => 'Yes',
    'Message' => array(
        'test' => 'TestFieldTest'
    )
) 
```

在 $_POST 中：

```
array(
    '_method' => 'POST',
    'data' => array(
        'Message' => array(
            'test' => 'TestFieldTest'
        )
    ),
    'submit' => 'Yes'
) 
```

您还可以给两个提交不同的名称：

```
echo $this->Form->submit('Yes', array('div'=>false, 'name'=>'submitY')); 
echo $this->Form->submit('No', array('div'=>false, 'name'=>'submitN')); 
```

这样，您可以在 $_POST 或 $this->request->data 中区分它们，因为键将是提交的名称：

```
array(
    'submitY' => 'Yes',
    'Message' => array(
        'test' => 'foo'
    )
)

array(
    '_method' => 'POST',
    'data' => array(
        'Message' => array(
            'test' => 'Bar'
        )
    ),
    'submitY' => 'Yes'
) 
```

然后要确定按下哪个按钮，您可以使用简单的 isset($_POST['']) 或 $this->request->data ？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T22:44:13.350

不要为两个提交按钮使用相同的名称。考虑这个例子：

```
<?php echo $this->Form->create(false); ?>
<?php echo $this->Form->text('input'); ?>
<?php echo $this->Form->submit('Yes', array('name' => 'submit1')); ?>
<?php echo $this->Form->submit('No', array('name' => 'submit2')); ?>
<?php echo $this->Form->end(); ?> 
```

当单击“是”按钮时，debug($this->request->data) 将产生以下内容：

```
array(
    'submit1' => 'Yes',
    'input' => 'test'
) 
```

这是单击“否”按钮时：

```
array(
    'submit2' => 'No',
    'input' => 'test'
) 
```

要检查单击了哪个按钮：

```
if (isset($this->request->data['submit1'])) {
    // yes button was clicked
} else if (isset($this->request->data['submit2'])) {
    // no button was clicked
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:16:04.763

在 2.0 中，`$this->params['form']`不再有所有表单助手发布的字段最终都在`$this->data`（无论如何这更有意义）

所以

```
if (!empty($this->data['submit']) && $this->data['submit'] == "Submit 1") {} 
```

请注意 !empty() 在这里也更好。

PS：你可以在你的代码中使用我的增强升级shell来替换它：[https ://github.com/dereuromark/upgrade](https://github.com/dereuromark/upgrade)

它的命令

```
cake Upgrade.Upgrade request 
```

（https://github.com/dereuromark/upgrade/blob/master/Console/Command/UpgradeShell.php#L833）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T15:44:29.357

```
if (!empty($this->request->data['submit']) && $this->request->data['submit'] == "Yes") {
// do your stuff
} 
```

# plone - 将自定义字段添加到 Plone 组

> ID：10172524
> 
> 赞同：0
> 
> 时间：2012-04-16T10:36:19.027
> 
> 标签：plone

使用 Plone 4.2，如何将字段/属性添加到 Plone 组？除了默认的（名称、标题、描述、电子邮件）之外，我还想要一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:37:51.267

你可以试试运气

```
http://localhost:8080/Plone/portal_groupdata/manage_propertiesForm 
```

并报告结果:) 至少站点设置的组编辑表单似乎足够通用，可以支持任意数量的字段（所有类型）。

# bash - 在 bash 和 korn 中执行脚本的区别

> ID：10172527
> 
> 赞同：-1
> 
> 时间：2012-04-16T10:36:24.773
> 
> 标签：bash, unix, while-loop

我有一个脚本可以逐行读取文件代码是

```
FILE=commands.txt
while read CMD; do
    echo "$CMD"
done < "$FILE" 
```

此代码存储在脚本文件 vxm_alarm.sh 在 Korn shell 中，当我运行命令时，此循环完美运行`vxm_alarm.sh`。但是在bash中我收到以下错误

```
vxm_alarm.sh: syntax error at line 4: `done' unexpected 
```

在 Bash 中，我正在使用 command 执行脚本`sh vxm_alarm.sh`。我究竟做错了什么？为什么我们不能简单地通过在 bash 中执行此操作来执行脚本

```
chmod +x filename.sh
filename.sh 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:50:01.853

您的代码使用 GNU bash 4.1.5 在我的机器上运行

尝试在顶部添加一个[shebang ：](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

```
#!/bin/sh
FILE=commands.txt
while read CMD; do
    echo "$CMD"
done < "$FILE" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:54:54.287

我想回答你问题的这一部分：

> 为什么我们不能简单地通过在 bash 中执行此操作来执行脚本
> 
> ```
> chmod +x filename.sh
> filename.sh 
> ```

正如其他人已经部分指出的那样，要使其发挥作用，需要做几件事：

1.  `chmod`执行权（你用你的命令确保了）
2.  [shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29) ，所以系统知道使用什么外壳/解释器

    ```
    #!/bin/bash 
    ```

    （重要的是说**bash**如果你想要*bash*而不是*sh*）

3.  确保找到该命令。当它的目录位于`PATH`. 但是，在这种情况下，您更愿意指定目录。对于当前目录，您可以这样做

    ```
    ./name-of-the-script 
    ```

    与 DOS 和 (IIRC) 的各种 Windows 命令行界面相比，Unix 系统通常在`PATH`. 可以添加它，但由于对安全性的严重影响而劝阻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:21:02.003

如果你运行`sh vxm_alarm.sh`，你很可能不会运行 Bash。试试`sh --version`- 如果你得到的不是版本字符串，那*不是*Bash。尝试运行`bash vxm_alarm.sh`。

为了能够在没有路径的情况下运行脚本，它必须位于`PATH`变量中列出的目录之一中。例如，如果

```
echo "$PATH" 
```

印刷

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
```

您可以`filename.sh`输入`/usr/local/sbin`, `/usr/local/bin`, `/usr/sbin`, `/usr/bin`, `/sbin`or`/bin`并简单地运行它`filename.sh`。如果您希望脚本从不在路径中的目录运行，您有三个选择：

1.  修改`$PATH`以包含脚本所在的目录。
2.  使用相对或绝对路径运行它。
3.  创建指向相对或绝对路径的别名或函数。

# php - 如何使用 facebook API 在朋友的墙上写字

> ID：10172528
> 
> 赞同：0
> 
> 时间：2012-04-16T10:36:25.993
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

正在开发一个应用程序，该应用程序应该能够在用户授权后写入朋友的墙上。目前，我可以使用 facebook graph API 通过应用程序成功写到我的墙上。使用该应用程序向朋友墙写信时遇到困难。我无法弄清楚我是否需​​要额外的权限才能这样做，或者是否需要做一些不同的事情。如果有人可以帮助我解决任何问题，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:43:37.577

您必须为您的应用获得扩展权限：**publish_stream**。参考见：http: [//developers.facebook.com/docs/authentication/permissions/](http://developers.facebook.com/docs/authentication/permissions/)

publish_stream - 使您的应用能够将内容、评论和点赞发布到用户的信息流和用户朋友的信息流...

祝你好运

# macos - 为什么另一个 DocumentRoot 有效，但 /etc/apache2/httpd.con 中定义的那个无效？

> ID：10172529
> 
> 赞同：0
> 
> 时间：2012-04-16T10:36:30.593
> 
> 标签：macos, apache, httpd.conf

apache 服务器预装了 Lion。问题是 /etc/apache2/httpd.conf 中的默认 DocumentRoot 是“/Library/Webserver/Documents”，但当我访问我的页面时，它指向另一个目录，即“/usr/htdocs”，说，localhost/demo.php！

我不知道为什么会发生这种情况，而且我确信 /etc/apache2/ 下的 httpd.conf 是 apache 在运行时读取的确切配置文件。

我运行 httpd -V 时的部分结果如下：

```
 Server compiled with....
     -D APACHE_MPM_DIR="server/mpm/prefork"
     -D APR_HAS_SENDFILE
     -D APR_HAS_MMAP
     -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
     -D APR_USE_FLOCK_SERIALIZE
     -D APR_USE_PTHREAD_SERIALIZE
     -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
     -D APR_HAS_OTHER_CHILD
     -D AP_HAVE_RELIABLE_PIPED_LOGS
     -D DYNAMIC_MODULE_LIMIT=128
     -D HTTPD_ROOT="/usr"
     -D SUEXEC_BIN="/usr/bin/suexec"
     -D DEFAULT_PIDLOG="/private/var/run/httpd.pid"
     -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
     -D DEFAULT_LOCKFILE="/private/var/run/accept.lock"
     -D DEFAULT_ERRORLOG="logs/error_log"
     -D AP_TYPES_CONFIG_FILE="/private/etc/apache2/mime.types"
     -D SERVER_CONFIG_FILE="/private/etc/apache2/httpd.conf" 

```

我将非常感谢任何回复！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:40:30.673

请检查文件`DocumentRoot`中定义的`/private/etc/apache2/httpd.conf`内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:46:09.330

您的 http 转储显示您的答案。httpd 根设置为 usr。您将需要打开您的 http conf 文件并对其进行编辑以更改其指向的位置。此外，您可能在 usr 中有一个 .htaccess 文件，该文件将所有流量定向到 htdocs，或者它可能在 apache http conf 中设置。查看官方 apache 网站了解更多信息。

# java - 在黑莓蓝牙中获取有关远程设备的信息

> ID：10172533
> 
> 赞同：1
> 
> 时间：2012-04-16T10:36:45.887
> 
> 标签：java, blackberry, bluetooth

我正在开发一个黑莓手机应用程序，我正在使用 javax.bluetooth api 在我的应用程序中使用蓝牙。我想知道是否可以获取有关远程设备的信息。我能够获取远程蓝牙设备的名称和地址，但我也想知道设备的类型。我想知道远程设备是电话还是 PC。是否可以在 Blackberry OS 5 中确定这一点？
我正在使用以下代码来获取远程设备的名称和地址。

```
System.out.println((i + 1) + ". "
                                + remoteDevice.getBluetoothAddress() + " ("
                                + remoteDevice.getFriendlyName(true) + ")"); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T09:19:49.300

我想出了如何获取设备的类型。设备类型可以使用`Device Class`. 在`deviceDiscovered()`方法中`Discovery Agent`我们相处`Remote Device`融洽`Device class`。我们可以使用`getMajorDeviceClass()`设备类的方法来获取设备的类型。
主要设备类的类型在此[链接](https://www.bluetooth.org/Technical/AssignedNumbers/baseband.htm)中给出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:58:49.657

看来您应该使用`DiscoveryAgent.searchServices()`方法来检索此信息：

public int searchServices(int[] attrSet, UUID[] uuidSet, RemoteDevice btDev, DiscoveryListener listener) 抛出 BluetoothStateException

查看 javadoc 了解更多信息： http: [//www.blackberry.com/developers/docs/5.0.0api/javax/bluetooth/DiscoveryAgent.html](http://www.blackberry.com/developers/docs/5.0.0api/javax/bluetooth/DiscoveryAgent.html)

# web-services - 我从哪里开始为 Windows azure db 制作 wp7 的 Web 服务

> ID：10172534
> 
> 赞同：1
> 
> 时间：2012-04-16T10:36:50.047
> 
> 标签：web-services, windows-phone-7, azure-storage

我正在编写一个应用程序，我需要将用户详细信息、位置和连接存储在 azure db 中，但没有云存储经验。我已经创建了我的 azure 数据库，但不确定如何与 wp7 应用程序通信。关于从哪里开始使用 Web 服务的任何想法，谢谢，MH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:02:38.297

至于windows phone azure 项目，你是指Windows Azure Toolkit for Windows Phone 吗？此工具包是可选的。在某些情况下它可能对我们有所帮助，特别是如果我们想与 ACS 集成。但是，如果我们只需要将数据传送到手机上，那么 Web 服务就足够了。

此致，

明旭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:21:53.537

以下内容可能会为您指明正确的方向“将 Windows Phone 与 Windows Azure 一起使用”：-

[http://msdn.microsoft.com/en-us/library/windowsazure/hh689721(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh689721(v=vs.103).aspx)

[http://windowsteamblog.com/windows_phone/b/wpdev/archive/2011/08/31/building-windows-phone-applications-using-windows-azure.aspx](http://windowsteamblog.com/windows_phone/b/wpdev/archive/2011/08/31/building-windows-phone-applications-using-windows-azure.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:25:45.817

为了补充 Paul 的建议，推荐的体系结构是：在 Windows Azure 中托管服务（例如 WCF 数据服务）。该服务将与 SQL Azure 对话（如果您使用 SQL Azure 作为数据库）。Windows Phone、iPhone、Andriod、网络浏览器等客户端设备将与服务进行通信。如果使用 WCF 数据服务，则可以通过 OData 协议向客户端公开数据，该协议受多个设备支持。要开始使用 WCF 数据服务，我建议您查看[http://msdn.microsoft.com/en-us/library/cc668796.aspx](http://msdn.microsoft.com/en-us/library/cc668796.aspx)。要了解如何在 Windows Phone 中使用 OData，请参阅[http://blogs.msdn.com/b/phaniraj/archive/2010/03/19/developing-a-windows-phone-7-application-that-c​​onsumes -odata.aspx](http://blogs.msdn.com/b/phaniraj/archive/2010/03/19/developing-a-windows-phone-7-application-that-consumes-odata.aspx)。

此致，

明旭。

# java - 在 Android 的 EWS 中将 UID 字符串转换为十六进制数组和 base64 字符串 ItemId

> ID：10172536
> 
> 赞同：1
> 
> 时间：2012-04-16T10:37:04.740
> 
> 标签：java, android, hex, base64

在此示例中（[使用 EWS for Exchange 2010 获取组织者的日历约会](https://stackoverflow.com/questions/3829039/get-the-organizers-calendar-appointment-using-ews-for-exchange-2010)）我可以从 UID 获取 ID 字符串。但问题是我用 Android 编写的，而不是 C#。所以我需要相同的方法将字符串转换为十六进制数组和 Java 中的 base 64 字符串。我怎么才能得到它？

```
 private static string GetObjectIdStringFromUid( string id )
  {
      var buffer = new byte[ id.Length / 2 ];
      for ( int i = 0; i < id.Length / 2; i++ )
      {
        var hexValue = byte.Parse( id.Substring( i * 2, 2 ), System.Globalization.NumberStyles.AllowHexSpecifier );
        buffer[ i ] = hexValue;
      }
      return Convert.ToBase64String( buffer );
  } 
```

示例输入：

> 00000000F1985146856BD941BA2343776A64673F0700855A223A9715B6468B4D00795E77CAAB00000033E03A0000855A223A9715B6468B4D00795E760CAAB000000040

输出：

> AAAAPGYUUaFa9lBuiNDd2pkZz8HAIVaIjqXFbZGi00AeV53yqsAAAAz4DoAAIVaIjqXFbZGi00AeV53yqsAAAA0hgsAAA==

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:47:54.647

如果我理解正确，您正在寻找一种将十六进制字符串转换为 Java 中的 Base64 字符串的方法。

可以使用[Apache Commons Codec](http://commons.apache.org/codec/)库轻松完成：

```
String output = new String(Base64.encodeBase64(Hex.decodeHex(input.toCharArray()))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-22T19:25:37.747

在没有使用 Java 中的外部 Lib 的情况下，我使用了[此](http://tomeko.net/online_tools/hex_to_base64.php?lang=en)页面的源代码并将其转换为 java 下面是我的代码

```
public static String decodeHexToBase64(String hexString){
    if(hexString.length() %2 !=0){
        return null;
    }else{
    int[] binary = new int[hexString.length()/2];
      for (int i=0; i<hexString.length()/2; i++) {
        String h = hexString.substring(i*2, (i*2)+2);
        binary[i] = Integer.parseInt(h,16);        
      }

    return convertToBase64(binary);
    }
}

public static String convertToBase64(int[] input){
    String base64_chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

    String ret = "";
      int i = 0;
      int j = 0;
      int[] char_array_3 = new int[3];
      int[] char_array_4 = new int[4];
      int in_len = input.length;
      int pos = 0;

      while (in_len-- > 0)
      {
          char_array_3[i++] = input[pos++];
          if (i == 3)
          {
              char_array_4[0] = (char_array_3[0] & 0xfc) >> 2;
              char_array_4[1] = ((char_array_3[0] & 0x03) << 4) + ((char_array_3[1] & 0xf0) >> 4);
              char_array_4[2] = ((char_array_3[1] & 0x0f) << 2) + ((char_array_3[2] & 0xc0) >> 6);
              char_array_4[3] = char_array_3[2] & 0x3f;

              for (i = 0; (i <4) ; i++)
                  ret += base64_chars.charAt(char_array_4[i]);
              i = 0;
          }
      }

      if (i > 0)
      {
          for (j = i; j < 3; j++)
              char_array_3[j] = 0;

          char_array_4[0] = (char_array_3[0] & 0xfc) >> 2;
          char_array_4[1] = ((char_array_3[0] & 0x03) << 4) + ((char_array_3[1] & 0xf0) >> 4);
          char_array_4[2] = ((char_array_3[1] & 0x0f) << 2) + ((char_array_3[2] & 0xc0) >> 6);
          char_array_4[3] = char_array_3[2] & 0x3f;

          for (j = 0; (j < i + 1); j++)
              ret += base64_chars.charAt(char_array_4[j]);

          while ((i++ < 3))
              ret += '=';

      }

      return ret;

} 
```

# malloc - 程序卡在 getenv()

> ID：10172548
> 
> 赞同：0
> 
> 时间：2012-04-16T10:38:01.293
> 
> 标签：malloc, environment-variables, preloading, getenv

我通过预加载库来重载“malloc”。在这个自定义的“malloc”中，我使用环境变量来区分我的程序使用我的自定义“malloc”和一般的“malloc”。

问题是，在几次“malloc”之后，程序被卡在 getenv() 调用中。我无法弄清楚为什么程序会卡在其中。

代码如下：

```
void* PerfTrackMallocInterposition::Malloc(size_t size) {
    // Malloc with statistics
    pthread_mutex_lock(&fgPTMutex);

    char *checkCDBEnd=NULL;
    static const char* CDBEndEnv = "checkCDBEnd";
    checkCDBEnd = getenv(CDBEndEnv);   //program gets stuck here

    if(checkCDBEnd!=NULL)
    {
        if(checkCDBEnd[0]=='1')
        {
            if(size>1024)
            {
                void *result = Alloc(size);   //Call to custom malloc
                pthread_mutex_unlock(&fgPTMutex);
                return result;
            }
        }
    }

    void* result = (*fPMalloc)(size);    //call to normal malloc
    pthread_mutex_unlock(&fgPTMutex);

    return result;
} 
```

将这个库与 vim 编辑器一起使用时，我也在同一位置遇到总线错误。

请帮我。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:46:25.710

您*确定*程序卡在`getenv()`通话中吗？我会更怀疑互斥锁：`pthread_mutex_lock(&fgPTMutex);`如果另一个线程持有互斥锁，将阻塞

# sql - oracle PL/SQL 中的 & 和 : 有什么区别？

> ID：10172550
> 
> 赞同：2
> 
> 时间：2012-04-16T10:38:04.997
> 
> 标签：sql, plsql, sqldatatypes

我正在研究 PL/SQL 并且正在查看绑定变量。我知道我们用来传递 RUN-TIME 值的绑定变量。

但是 PL/SQL 中的 & 和 :(colon) 有什么区别？两者都相同还是两者之间有什么区别？我什么时候应该使用 & 和 : ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T10:49:29.350

`&`仅用于，在它`SQL*Plus`之外没有任何意义。

在`SQL*Plus`“解析”输入缓冲区时，它会替换`&variables`为它们原来`define`的内容。另请参阅[此链接](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve017.htm#SQPUG037)和[此链接](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#sthref453)。*技术术语*是替代*变量*。

另一方面`:variable`是*真正的*绑定变量。它们在 Oracle 的 SQL 引擎“解析”并执行 SQL 语句时使用。例如，请参阅[此链接](http://docs.oracle.com/cd/E11882_01/server.112/e25789/glossary.htm#CNCPT44447)或[此链接](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_five.htm#sthref522)。

因此，简而言之，`&variables`被 SQL*Plus 替换，*然后*传递给 Oracle 的 SQL 引擎，而`:variables`被 SQL *Plus 保持不变，并在它们出现时传递给 Oracle 的 SQL 引擎。在 SQL* Plus 之外，`&`没有任何意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T10:49:51.050

`&`在 PL/SQL 中没有任何意义，它实际上是一个 SQL Plus 功能（为了兼容性，已在 Toad、SQL Developer 等中复制）。在 SQL Plus 中，`&`用于定义一个**替换变量**，在将代码发送到服务器进行处理之前，由 SQL Plus 将其替换为指定的替换文本。

SQL Plus 替换变量的正确语法是以`&name.`a 开头并以 a`&`结尾`.`，但在大多数情况下`.`是可选的。因此，当您在 SQL Plus 中运行此代码时：

```
select * from emp where ename = '&name.'; 
```

**SQL Plus 在运行前**提示用户输入值`name`并将其代入查询中。因此，如果用户输入，那么实际运行的 SQL 是：**`KING`**

 **```
select * from emp where ename = 'KING'; 
```**

# java - 返回类型不兼容：Mutators & Method Chaining

> ID：10172551
> 
> 赞同：0
> 
> 时间：2012-04-16T10:38:12.537
> 
> 标签：java, method-chaining

让我们以这段代码为例：

```
import java.awt.*;

class Maze extends Panel{

    String name;

    public static void main(String[] args){
        Maze m = new Maze();
        System.out.println(m.setName("Hello World").getName());
    }

    public Maze setName(String name){
        this.name = name;
        return this;
    }

    public String getName(){
        return name;
    }

    public void paint(){

    }
} 
```

我正在尝试理解方法链接，并且正如其他问题的答案所说，使用`return this`. 我试过了，是的，它可以工作，但不能像上面的方法那样使用 mutator 方法`setName()`。为什么编译器输出：

```
The return type is incompatible with Component.setName(String) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T10:41:03.443

你给的代码应该没问题。

但是，我怀疑问题在于您的*真实*代码是扩展类`Component`，并且您正在尝试*覆盖* `setName`.

也许相反，您可以编写一个`withName`方法，如下所示：

```
public Maze withName(String name) {
    setName(name); // Inherited method
    return this;
} 
```

...尽管您应该知道它`withXyz`经常在 API 中用于创建类型的*新*实例（特别是不可变类型），而不是修改现有实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T10:41:40.937

除非 Maze 派生自其他定义`setName(String)`的类，否则`Maze setName(String name)`签名应该是完全可以接受的

注意：你应该写`this.name = name;`

UPDATE: as it turns out, Maze *is* deriving from a `Panel` (which is deriving from `Component`). As `Component.setName(String)` specifies its return type as `void` (`void setName(String)`), you cannot specify any other return type, but `void` for `setName()` in your class. The reason is inheritance: if someone has a reference to your `Maze` object via a `Component` reference (e.g. `Component c = new Maze();`), and calls `setName()`, the runtime knows to call yours, because of the inheritance. However your version is returning a value, with which the runtime has to do something, but the code is not prepared for it (it was compiled with the knowledge of a `Component`.

# php - php cron作业问题？

> ID：10172552
> 
> 赞同：0
> 
> 时间：2012-04-16T10:38:19.380
> 
> 标签：php, cron

我使用 php 代码来执行使用 cron 的代码。我也在 cpanel 中设置了 cron 时间和命令。

1）。但是每当 cron 运行时，我都会收到一封邮件

```
/home/letsview/public_html/getfeed.php: line 1: ?php: No such file or directory
/home/letsview/public_html/getfeed.php: line 3: syntax error near unexpected token `'/home/letsview/public_html/wp-config.php''
/home/letsview/public_html/getfeed.php: line 3: `include_once('/home/letsview/public_html/wp-config.php');' 
```

我已经在 cpanel 中设置了这个命令`"/home/letsview/public_html/getfeed.php"`

我也试过这个[PHP: Error trying to run a script via Cron job](https://stackoverflow.com/questions/3330804/php-error-trying-to-run-a-script-via-cron-job)并在文件顶部添加了这个命令，`/usr/local/lib/php/`但它仍然不起作用

这是cron文件的代码`getfeed.php`

```
<?php
#!/usr/local/lib/php/
include_once('/home/letsview/public_html/wp-config.php');
include_once('/home/letsview/public_html/wp-includes/wp-db.php');
include_once('/home/letsview/public_html/wp-admin/includes/file.php');          
include_once('/home/letsview/public_html/wp-admin/includes/image.php');         
include_once('/home/letsview/public_html/wp-admin/includes/media.php');
global $wpdb;
 //property_type
$xml = simplexml_load_file("/home/letsview/public_html/letsviewproperties.xml",'SimpleXMLElement', LIBXML_NOCDATA);
$TotalPostadded = 0;
$TotalUseradded = 0;
foreach($xml as $child)
{
    //Insert Post
    $postdata = array();
    $postdata['post_title'] = trim($child->title);
    $postdata['post_content'] = trim($child->content);
    //$postdata['guid'] = trim($child->url);
    $postdata['post_status'] = 'publish';
    $postdata['post_type'] = 'post';
    $postdata['post_date'] = date('Y-m-d H:i:s');

    //Insert Post Meta
    $postmetadata = array();
    $addresstext = trim($child->FullAddress->address1);
    if($addresstext != ''){
        $addresstext .= ', ';
    }
    $addresstext .= trim($child->FullAddress->address2);
    if($addresstext != ''){
        $addresstext .= ', ';
    }
    $addresstext .= trim($child->FullAddress->address3);
    if($addresstext != ''){
        $addresstext .= ', ';
    }
    $addresstext .= trim($child->FullAddress->address4);
    $postmetadata['price'] = trim($child->price);
    $postmetadata['property_type'] = trim($child->type);
    $postmetadata['bed_rooms'] = trim($child->rooms);
    $postmetadata['bath_rooms'] = trim($child->bathrooms);
    $postmetadata['address'] = $addresstext;
    $postmetadata['add_city'] = trim($child->city);
    $postmetadata['add_state'] = trim($child->FullAddress->region);
    $postmetadata['add_country'] = trim($child->FullAddress->country);
    $postmetadata['add_zip_code'] = trim($child->postcode);
    $postmetadata['other_guid'] = trim($child->url);
    $postmetadata['post_from_feed'] = true;

    //Insert Author(agent)
    $authordata = array();
    $authormetadata = array();
    if(!empty($child->agent->agent_name)){
        //Author data
        $authordata['user_login'] = trim(pg_create_string($child->agent->agent_name));
        $authordata['user_nicename'] = trim($child->agent->agent_name);
        $authordata['display_name'] = trim($child->agent->agent_name);
        $authordata['user_email'] = trim($child->agent->agent_email);
        $authordata['user_url'] = trim($child->url);
        $authordata['role'] = trim('agent');
        $authordata['user_registered'] = date('Y-m-d H:i:s');
        //Author meta data
        $authormetadata['user_phone'] = trim($child->agent->agent_phone);
        $authormetadata['user_address'] = trim($child->agent->agent_address);
    }
    foreach($child->pictures as $pictures)
    {
        $postimagedata = array();
        $imageloop = 0;
        foreach($pictures as $picture)
        {
            $postimagedata[$imageloop] = (string)$picture->picture_url;
            $imageloop++;
        }
    }
    $postmetadata['post_from_feed_images'] = serialize($postimagedata);
    if($postdata['post_title'] != ''){
        $sql = "select count(post_title) as post from ".$wpdb->prefix."posts  where post_title = '".$postdata['post_title']."' and post_status = '".$postdata['post_status']."'";
        $sqlresult = $wpdb->get_results($sql);
        foreach ( $sqlresult as $post ) { 
            if($post->post == 0)
            {
                if(!empty($authordata)){
                    $user_id = wp_insert_user( $authordata );

                    if(!empty($user_id) && empty($user_id->errors)){
                        $TotalUseradded++;
                        echo "User added = ".$user_id."<br />";
                        if(!empty($authormetadata)){
                            foreach($authormetadata as $meta_key=>$meta_value){
                                add_user_meta( $user_id, $meta_key, $meta_value);
                                echo "User Meta = ".$meta_key." Inserted<br />";
                            }
                        }
                    }elseif(!empty($user_id->errors)){
                        $userdata = get_user_by('email', $authordata['user_email']);
                        $user_id = $userdata->ID;
                        echo "User fetched = ".$user_id."<br />";
                    }
                    $postdata['post_author'] = $user_id;
                }
                $post_id = wp_insert_post($postdata);
                if(!empty($post_id)){
                    $TotalPostadded++;  
                    echo "<br />"."Post Inserted = ".$post_id;
                    $properties_category_id = 109;
                    $cat = "INSERT INTO wp_term_relationships ( object_id, term_taxonomy_id ) VALUES ( '".$post_id."','".$properties_category_id."' )";
                    $catid = $wpdb->query($cat);
                    echo "<br />"."Post attached to Category ID = ".$properties_category_id."<br />";
                    if(!empty($postmetadata)){
                        foreach($postmetadata as $key=>$value){
                            add_post_meta($post_id, $key,$value, true);
                            echo "Post Meta = ".$key." Inserted<br />";
                        }
                    }
                }   
            }
        }
    }
}
$cron = "<br />"."Corn Done";
$cron .= "<br />"."Total Post added = ".$TotalPostadded;
$cron .= "<br />Total User added = ".$TotalUseradded;
echo $cron;
mail('xxxxxx@xxxxx.com','Lets view Properties Corn',$cron);
function pg_create_string($text)
{
  // replace all non letters or digits with -
  $text = preg_replace('/\W+/', '-', $text);

  // trim and lowercase
  $text = strtolower(trim($text, '-'));
  return $text;
} 
?> 
```

谁能帮我？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:42:56.060

文件的开头应该是：

```
#!/usr/bin/php
<?php 
```

这假定您的 PHP 二进制文件位于文件夹 /usr/bin 中。如果不是，则更改 #! 适当地划线。

更好的是：

```
#!/usr/bin/env php
<?php 
```

几乎肯定会起作用，因为它使用系统的 env 命令来确定 php 的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:40:49.470

将此添加到文件的最顶部并 chmod 文件以执行权限（555 或 775）等。

```
#!/usr/local/lib/php
<?php
// your code 
```

其中 /usr/local/lib/php 是 php 的路径。

或者，如果这不起作用，您可以更改 cron 命令：

```
/usr/local/lib/php /home/letsview/public_html/getfeed.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:42:04.377

```
#!/usr/local/lib/php
<?php
// php code 
```

你确定 /usr/local/lib 中的 php cli

# android - 禁用图库，直到显示弹出窗口

> ID：10172560
> 
> 赞同：0
> 
> 时间：2012-04-16T10:38:40.307
> 
> 标签：android, scroll, gallery

我在我的项目中使用全屏画廊，并且画廊我正在使用画廊的支持基础适配器现在我必须使画廊禁用/停止画廊的滚动，直到在按钮单击时显示弹出窗口任何人都可以帮助我解决这个问题?

--> 下面是使用库的基本适配器而不是扩展库的片段。

```
public class SubItemSelectedImageAdapter extends BaseAdapter {

    int mGalleryItemBackground;
    private Context mContext;
    private String[] mImageIds;
    ImageView[] mImages;

    public SubItemSelectedImageAdapter(Context c, String[] mImageIds2) {

        mImageIds = mImageIds2;
        mImages = new ImageView[mImageIds.length];
        mContext = c;
        TypedArray attr = mContext
                .obtainStyledAttributes(R.styleable.HelloGallery);
        attr.recycle();
    }

    public int getCount() {
        return mImageIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {

        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        ImageView imageView = new ImageView(mContext);

        imageView.setImageURI(Uri.fromFile(new File(mImageIds[position])));
        imageView.setLayoutParams(new Gallery.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);

        return imageView;
    }
}

public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub

}

public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    // TODO Auto-generated method stub

}

public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub

} 
```

}

并 delaring Gallery 对象并从 xml 引用它...

```
 // full screen gallery implementation.
    ImageAdapter = new SubItemSelectedImageAdapter(this, data);
    Gallery gallery = (Gallery) findViewById(R.id.gallery);

    gallery.setAdapter(ImageAdapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:36:04.583

```
use setOnTouchListener() of gallery as below and use flag for the enable disable process 
- on popup being display make flag false and when there is no popup being displayed make flag false. 
- code is as below: 
gallery.setOnTouchListener(new OnTouchListener() 
{ public boolean onTouch(View v, MotionEvent event)
 { // TODO Auto-generated method stub
 if(flag==true){ return false;
 }else{
 return true; 
}
 }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:51:31.120

在您的按钮单击事件中，您可以通过以下代码禁用图库。

```
gallery.setEnabled(false); 
```

这将使它不可点击，也不能滚动。当您完成弹出窗口时，启用。

```
 gallery.setEnabled(true); 
```

# windows-phone-7 - Windows Phone 7 - 音频流开始时打嗝

> ID：10172562
> 
> 赞同：0
> 
> 时间：2012-04-16T10:38:43.977
> 
> 标签：windows-phone-7, streaming

我使用[ManagedMEdiaHelpers](https://github.com/loarabia/ManagedMediaHelpers)项目作为后台音频流项目的基础。

音频输出很好，但有时需要 1 到 6 秒才能开始播放。在此期间，设备会发出一些类似于打嗝或刮擦的奇怪噪音。

我尝试流式传输的 mp3 具有以下属性：

```
Bitrate: 320000
Sampling Rate: 44100 
```

当 mp3 的其余部分播放正常时，在流开始时收到这种噪音的可能原因是什么？

**更多信息**

我注意到在打嗝期间 fps 计数低于 20，因此我尝试分析应用程序。

我在打嗝期间收到以下消息：

> Waring ：系统线程的 CPU 使用率非常高：系统和其他应用程序正在使用 65.02% 的 CPU。此 CPU 使用率可能是由系统上正在运行的其他任务引起的，也可能是由用户应用程序触发的系统操作引起的。确保分析期间系统上没有其他任务正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:23:25.217

这是 HTC Radar 的硬件限制。

我刚刚在三星 OMNIA 7 上尝试了相同的代码，并且流非常完美。fps 计数也没有任何损失，所以我认为在这个设备上没有 CPU 占用。

奇怪的[是 gsmarena](http://www.gsmarena.com/compare.php3?idPhone1=3537&idPhone2=4131)说这两个设备有相同的 CPU。

# c++ - 使用“指针”和结构调用 DLL (C++ -> VB.NET)

> ID：10172564
> 
> 赞同：0
> 
> 时间：2012-04-16T10:38:59.480
> 
> 标签：c++, vb.net, pointers, structure

我对如何调用 DLL 上的函数以从结构中获取数据有疑问...

有一个关于它是如何工作的库的 C++ 示例，我想在 vb.net 上使用它

**好的，这是有效的 C++ 示例：**

宣言：

```
BOOL (WINAPIV* MyFun)(DWORD start1, DWORD stop1, P_RESULT pResult, PDWORD pTpNum, myCALLBACK lpFunc) = NULL; 
```

称呼：

```
// pStruc = RESULT structure
// TrpNum1, TrpNum is ULONG

ULONG TrpNum1=0;
MyFun(Start,Stop,pStruc+TrpNum,&TrpNum1,&myCB); 
```

打回来：

```
void __stdcall myCB (RESULT *pStruc)
{
    printf ("%.3f", (double)pStruc->val1);
    tpn++;
} 
```

当然，结构：

```
typedef struct {
    BOOL            mybool;
    DWORD           val1;       
    DWORD           val2;       
} RESULT, *P_RESULT; 
```

**这是我的 VB.net 代码（不工作）：**

```
Public Declare Auto Function MyFun Lib "\mydll.dll" ( _
        ByVal start As UInt32, _
        ByVal stop As UInt32, _
        ByRef Result As RESULT, ByRef pTpNum As UInt32, ByVal lpFunc As DlgCB) As Boolean

Public Sub CallMyFun()
    Dim Res As New RESULT
    Dim TpN As UInt32

    If MyFun(100, 200, Res, TpN, AddressOf myCB) Then
        SendDebug("OK")

    Else
        SendDebug("Failed!")
    End If

End Sub

Public Delegate Function DlgCB(ByVal Res As RESULT) As Boolean

Public Function myCB(ByVal Res As RESULT) As Boolean
    Debug.Print(Res.val1)
    Return True
End Function 
```

结构：

```
Public Structure RESULT
    Dim mybool As Boolean
    Dim val1 As UInt32
    Dim val2 As UInt32
End Structure 
```

什么是错的家伙？

提前致谢。

**编辑：**错误是这样的：“试图读取或写入受保护的内存。这通常表明其他内存已损坏。”

我也在代码中做了一个小的“修复”。还是不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:33:51.547

这里有很多问题：

*   myBool 是整数，而不是布尔值
*   Res 变量几乎肯定不能是局部变量，将其设为字段
*   TpN 可能相同，尚不清楚 C++ 代码是否存储指针
*   对于两者，如果 C++ 代码存储一个指针，则需要固定对象。将自己编组到使用 Marshal.AllocHGlobal 分配的内存要好得多
*   您使用 AddressOf 创建的委托将被垃圾收集。您需要将引用存储在字段中，这样就不会发生
*   回调应该声明参数 ByRef，而不是 ByVal
*   C++ 回调是无效的，由于某种原因你让它返回一个布尔值。

您需要帮助才能实现这一目标，这有点超出 SO 所能提供的帮助。向有经验的团队成员寻求帮助或聘请顾问。

# android - Android：网址的最大长度

> ID：10172566
> 
> 赞同：6
> 
> 时间：2012-04-16T10:39:09.633
> 
> 标签：android, url

你们中有人知道 Android 浏览器中 url 的最大长度吗？

# c# - 链接按钮href url

> ID：10172567
> 
> 赞同：1
> 
> 时间：2012-04-16T10:39:10.773
> 
> 标签：c#, javascript, asp.net, linkbutton

我的代码中有一个带有动态链接按钮的循环，我想设置 OnClientClick 属性以在新的浏览器窗口中打开链接。这听起来很简单，但我在让它工作时遇到了一些麻烦。

```
lbUrl = new LinkButton();
lbUrl.Text = r["Url"].ToString();

// r["Url"] is Datarow
lbUrl.OnClientClick = "location.href=" + r["Url"].ToString(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:40:50.493

[`window.open()`](http://www.w3schools.com/jsref/met_win_open.asp)将在新的浏览器选项卡/窗口中打开链接

```
lbUrl.OnClientClick = String.Format("window.open('{0}')", r["Url"]); 
```

确保您的 URL 是[绝对 URL](http://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3)

# hibernate - 如何使用我的支持 bean 中的另一个值在我的 jsf 页面上获取一个值

> ID：10172575
> 
> 赞同：-1
> 
> 时间：2012-04-16T10:40:01.297
> 
> 标签：hibernate, jsf

我有一个 jsf 页面，在该页面上我有一些值要显示，例如 box_name、appl_server_name，这些值在我的支持 bean 中不存在。但我有 box_id、appl_server_id 之类的值，它们也存在于 box_name 和 appl_server_name 分别存在的支持 bean 中.如何使用 box_id 和 appl_server_id 显示 box_name 和 appl_server_name。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:54:38.837

您可以为 UIInput 设置一个值，例如“box_id.setSubmittedValue(yourValue);” 在你的支持豆中。

# android - 在Android中的触摸事件上一次拖动多个按钮？

> ID：10172576
> 
> 赞同：0
> 
> 时间：2012-04-16T10:40:05.330
> 
> 标签：android

在应用程序中，我想创建多个按钮并同时为它们应用事件。？我已经使用以下代码创建了动态按钮，但是当我在两个按钮上应用触摸事件时，事件一次只应用 1 个按钮

我在下面的代码中创建了多个按钮..

```
for(int ii= 0;ii <6;ii++)
            { 

params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
             params.width = 50;
             params.height = 50;

                switch(ii)
                 {
                 case 0:
                     params.setMargins(100,200, 0, 0);
                 break; 
                 case 1:
                     params.setMargins(350,200, 0, 0);
                     break;
                 case 2:
                     params.setMargins(600,200, 0, 0);
                     break;
                 case 3:
                     params.setMargins(300,400, 0, 0);
                     break;
                 case 4:
                     params.setMargins(100,500, 0, 0);
                     break;
                 case 5:
                     params.setMargins(350,500, 0, 0);
                     break;

                 }

        }

@Override
        public boolean onTouch(View v, MotionEvent event) {
        int eventaction = event.getAction();
        FrameLayout.LayoutParams params = null;
             switch (eventaction) {
             case MotionEvent.ACTION_DOWN:  

                 System.out.println("************event.getAction()******"+event.getRawX()+"*********"+event.getRawY());
                 params = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                 params.setMargins((int)(event.getRawX() - (v.getWidth() / 2))-25, (int)(event.getRawY() - (v.getHeight()/2))-25,0,0);
                 params.width =100;
                 params.height=100;
                 v.setLayoutParams(params);
                 break;
             case MotionEvent.ACTION_MOVE:
                    Staticmethodclass.changecurrentplay = "Yes";

                   if(event.getRawX() < 780 && event.getRawY() < 1200 && event.getRawX()>=0 && event.getRawY()>=0)
                 {
                    params =new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                    params.setMargins((int)(event.getRawX() - (v.getWidth() / 2)), (int)(event.getRawY() - (v.getHeight()/2)),0,0);
                    params.width =100;
                    params.height=100;
                    v.setLayoutParams(params);
                 }

             break;
             case MotionEvent.ACTION_UP:
                 System.out.println("*****actionup****event.getAction()******"+event.getRawX()+"*********"+event.getRawY());
                 if(event.getRawX() < 780 && event.getRawY() < 1200 && event.getRawX()>=0 && event.getRawY()>=0)
                 {
                 params =new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
//               params=(android.widget.FrameLayout.LayoutParams) v.getLayoutParams();
                 params.setMargins((int)(event.getRawX() - (v.getWidth() / 2))+25, (int)(event.getRawY() - (v.getHeight()/2))+25,0,0);
                 params.width = 50;
                 params.height= 50;
                 v.setLayoutParams(params);
                 }
                 else
                 {
                     System.out.println("***else***event.getAction()******"+event.getRawX()+"*********"+event.getRawY());
                     android.widget.FrameLayout.LayoutParams params1 =(android.widget.FrameLayout.LayoutParams) v.getLayoutParams();
                     params1.setMargins((int)params1.leftMargin+25, (int)(params1.topMargin+25),0,0);
                     params1.width = 50;
                     params1.height= 50;
                     v.setLayoutParams(params1);
                 }

             return false; 
```

请帮忙..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:51:38.157

如果您触摸任何按钮，它只会将该按钮作为 View v，为了影响其他按钮，您不应该这样做，而不是单个按钮，将所有按钮放在布局中，然后将它们移动到触摸视图上，因此，最终它将移动您在布局内动态定义的所有动态按钮，并且它将移动布局而不是单个按钮，因此您可以移动多个按钮，将它们放置在布局内并移动该布局。

# php - 如何根据表单的用户输入从另一个表中插入一个数据字段到mysql中？

> ID：10172579
> 
> 赞同：2
> 
> 时间：2012-04-16T10:40:13.710
> 
> 标签：php, mysql, sql, insert

我正在开发一个可以使用 mysql 和 php 将人员添加到数据库的系统。我的表单的基础是管理员可以添加人员类型和人员角色，当用户在表单中输入他们的详细信息时，这些将应用于用户。例如，如果将此系统应用于学校环境，则人员类型可以是教师或厨师，并且人员角色可以是父母，因为人员类型不排除人员角色。我在这个系统上遇到了各种问题，因为我的系统使用 MISAM 类型的表，所以外键没有更新，但是如果我使用 INNODB 表，我的数据输入将不起作用。我正在寻找可以同时使用查询的方法来使这项工作像大学项目一样工作，而我的截止日期已经迫在眉睫。但是我的意思是让这个系统正常工作，因此将在今年晚些时候寻求使其全面运作的方法。我有 javascript 用于错误处理，还有 php 代码块来帮助防止 sql 注入攻击。

当管理员输入用户时，会出现一个由人员类型表中的字段填充的下拉菜单，这是由人员类型表中的 **Person_Type_Value_Description**字段完成的。人员类型表中的每一行都有一个**Person_Type_ID**。我需要一个可以找到**Person_Type_Value_Description**的查询，调用**Person_Type_ID**并将其存储在一个变量中，以便可以将其解析为人员表中的人员类型 ID。我的表格的基本布局可以从下面的创建脚本中看到。

```
CREATE TABLE Person_Type(
Person_Type_ID int auto_increment NOT NULL,
Person_Type_Value_Description varchar(150) NOT NULL,
Create_Date datetime NOT NULL NOT NULL,
Modify_Date datetime NOT NULL  NOT NULL,
Archive char(1) NULL,
CONSTRAINT PK_Person_Type_ID PRIMARY KEY (Person_Type_ID)
 ) ; 
```

...

```
CREATE TABLE Person(
Person_ID int auto_increment NOT NULL,
Person_Type_ID int NOT NULL,
Create_Date datetime NOT NULL ,
Modify_Date datetime NOT NULL ,
First_Name varchar(50) NOT NULL,
Surname varchar(50) NOT NULL,
DOB date NOT NULL,
Gender char(1) NOT NULL CHECK (Gender ='f' OR Gender ='m'),
Archive char(1) NULL,
Allergies varchar(200) NOT NULL,
Dietry_Requirements varchar(200) NOT NULL,
Disabilities varchar(200) NOT NULL,
Medicine_Requirements varchar(200) NOT NULL,
username varchar (30) NOT NULL,
password varchar (30) NOT NULL,
CONSTRAINT PK_Person_ID PRIMARY KEY (Person_ID),
CONSTRAINT FK_Person_Type_ID FOREIGN KEY (Person_Type_ID)
REFERENCES Person_Type (Person_Type_ID)) ; 
```

**编辑**

下面是我试图开始工作的代码。我需要存储查询结果，以便可以通过插入命令将其解析到 Person 表。谢谢你的评论。

The problem I am having is that the **Person_Type_ID** in the Person table is always setting to 0, because of the NOT NULL command, however it is not updating based off my queries.

```
// drawing the information from the Person_Type table.
$sql9 = "(SELECT Person_Type_ID
                 FROM Person_Type pt
                WHERE pt.Person_Type_Value_Description =  $Person_Type_Value_Description)";
                $result = @mysql_query($sql9);

//inserting into the person table. **All filed work except for the Person_Type_ID
$qry = "INSERT INTO Person (Person_Type_ID, Create_Date, Modify_Date, First_Name, Surname, DOB, Gender, Allergies, Dietry_Requirements, Disabilities, Medicine_Requirements, username, password) 
   VALUES('$sql9', NOW(), NOW(), '$First_Name', '$Surname', '$DOB', '$Gender', '$Allergies', '$Dietry_Requirements', '$Disabilities', '$Medicine_Requirements', '$username', '$password')" ;
    $result = @mysql_query($qry); 
```

**How it is called to display in the form**

```
<?

$persontype = array();

$qry = mysql_query("SELECT Person_Type_Value_Description FROM Person_Type ORDER BY Person_Type_ID");

while($res = mysql_fetch_array($qry)) {
$persontype[$res['Person_Type_Value_Description']] = $res['Person_Type_Value_Description'];
}

?> 

//creates the drop down
<?
function createDropdown($arr, $frm) {
foreach ($arr as $key => $value) {
echo '<option value="'.$value.'">'.$value.'</option>';
}
echo '</select>';
}
?> 
```

The administrator would then select this from a simple drop down menu.

```
<td align="right"><div align="left">Person Type* </div></td>           
<td><select name="Person_Type_Value_Description" id="Person_Type_Value_Description">
 <option value="">Select One...</option>
<?php createDropdown($persontype, 'frmpersontype'); ?>
  </select>
      </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:32:16.727

I think the problem is here

```
// drawing the information from the Person_Type table.
$sql9 = "(SELECT Person_Type_ID
             FROM Person_Type pt
            WHERE pt.Person_Type_Value_Description =  $Person_Type_Value_Description)";
$result = @mysql_query($sql9);

//inserting into the person table. **All filed work except for the Person_Type_ID
$qry = "INSERT INTO Person 
    (Person_Type_ID, Create_Date, Modify_Date, First_Name, Surname, DOB, Gender,
     Allergies, Dietry_Requirements, Disabilities, Medicine_Requirements, 
     username,password) 
  VALUES('$sql9', NOW(), NOW(), '$First_Name', '$Surname', '$DOB', '$Gender', 
    '$Allergies', '$Dietry_Requirements', '$Disabilities', '$Medicine_Requirements', 
    '$username', '$password')" ;
$result = @mysql_query($qry); 
```

You're inserting the actual query in $sql9 rather than the result.

You need something like this:

```
$result = @mysql_query($sql9);
$row = mysql_fetch_assoc( $result );
$personTypeID = intval( $row['Person_Type_ID'] );

//inserting into the person table. **All filed work except for the Person_Type_ID
$qry = "INSERT INTO Person 
    (Person_Type_ID, Create_Date, Modify_Date, First_Name, Surname, DOB, Gender,
     Allergies, Dietry_Requirements, Disabilities, Medicine_Requirements, 
     username,password) 
  VALUES($personTypeID etc. 
```

As a side-note, it's recommended not to use the mysql_ family of functions any more. You should use mysqli_ or PDO, preferably with prepared statements to escape input automatically.

# azure - 如何集成 Active Directory 和 sql azure 以对用户进行身份验证以访问在 azure 上运行的应用程序

> ID：10172584
> 
> 赞同：2
> 
> 时间：2012-04-16T10:40:45.453
> 
> 标签：azure, azure-sql-database, azure-storage, azure-worker-roles

我想集成本地活动目录和 sql azure 以验证用户访问在 azure 上运行的应用程序。

一些用户在活动目录中，一些在 sql azure 数据库中。我需要的是，当用户访问应用程序时，它必须要求提供用户名和密码等凭据。现在，此身份验证是使用本地活动目录和 sql azure 完成的。

这是非常重要的请回复

谢谢

* * *

我创建了一个项目，其中“Default.aspx”是我的主页

我参考了[http://www.developerfusion.com/article/121561/integrating-active-directory-into-azure/](http://www.developerfusion.com/article/121561/integrating-active-directory-into-azure/)文章通过活动目录进行身份验证。它的工作原理就像当用户输入我的 url 时弹出一个节目，要求输入在本地活动目录中检查的用户名和密码。

之后，我在我的项目中添加了一个名为“login.aspx”的新页面，其中包含几个文本框和一个登录按钮，用于通过 sql azure 表进行身份验证。该表包含名称和密码列。我还在这里创建了一个复选框将为活动目录中存在的用户重定向到“Default.aspx”。

我将 Login.aspx 设置为我的主页。

当我运行我的项目时，仍然会自动显示活动目录身份验证的弹出窗口。

请回复怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:36:09.037

您的意思是您有两种身份验证机制，一种使用 Active Directory，另一种使用自定义用户名/密码？实际上，如果我们不在自己的应用程序中手动询问用户的 Active Directory 凭据会更好。否则，它将在我们的应用程序中窃取用户的 Windows 凭据。请使用内置的 Windows 身份验证。在 Windows Azure 中，我们有两种选择。一种是与 SilverNinja 指出的 ADFS 联合。另一种是使用 Windows Azure Connect 加入我们的本地域，这样我们就可以使用标准的 Windows 身份验证。我建议您查看[http://msdn.microsoft.com/en-us/library/windowsazure/gg433029.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433029.aspx)了解更多信息。

之后，我们可以提供一个登录选项页面，询问用户是要使用 Windows 凭据还是自定义凭据。当用户选择 Windows 身份验证时，我们可以将用户重定向到 ADFS 的登录页面（或者如果 Azure 实例已加入本地域，则登录过程将是透明的）。如果用户选择自定义凭据，我们可以询问用户名/密码，然后针对 SQL Azure 进行身份验证。

最好的祝福，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:54:48.813

如果您使用 WIF 的添加 STS 参考功能，它将生成一个配置文件，要求您在使用您的网站之前登录到 STS。您可以在 web.config 中看到类似的内容：

```
<authorization>
  <deny users="?"/>
</authorization> 
```

因此，如果用户未登录 STS（在您的情况下为 ADFS），他/她将无法看到任何页面。

要解决此问题，请创建一个子文件夹来放置您的登录页面，并配置子文件夹以允许任何用户访问。例如，类似：

```
 <location
   path="loginfolder">
<system.web>
    <authorization>
      <allow users="?"/>
    </authorization>
</system.web>
</location> 
```

在登录页面中，您可能希望首先让用户在 Windows 身份验证和自定义身份验证之间进行选择。暂时不要询问用户凭据。用户选择 Windows 身份验证后，将用户重定向到不在 loginfolder 下的另一个页面。这将触发需要用户登录 STS 的正常 WIF 行为。如果用户选择自定义身份验证，请显示登录表单，用户登录后，您可以为他/她分配一个角色，这样他/她就不再是匿名的，并且可以查看您的站点。

最好的祝福，

明旭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T08:04:55.390

正如我在之前的回复中指出的，请将登录页面放在允许匿名访问的文件夹中：

要解决此问题，请创建一个子文件夹来放置您的登录页面，并配置子文件夹以允许任何用户访问。例如，类似：

```
 <location
   path="loginfolder">
<system.web>
    <authorization>
      <allow users="?"/>
    </authorization>
</system.web>
</location> 
```

“loginfolder”是指包含登录页面文件的文件夹的名称。

> 但是当用户尝试从登录表单登录时，即表单身份验证，Windows 身份验证的弹出窗口会出现，而不是重定向到 Default.aspx

您还可以查看[http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx)了解更多信息。

最好的祝福，

明旭。

# php - 基于 MSSQL 的条形图和折线图

> ID：10172587
> 
> 赞同：0
> 
> 时间：2012-04-16T10:40:54.067
> 
> 标签：php, sql-server, asp-classic, graph, charts

我不熟悉 ASP 或 PHP 编写，我是数据库管理员，只能进行简单的代码更改。

试图找到图形/图表的任何可用/可行的复制/粘贴示例，以便对简单的两列 MSSQL 表进行可视化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:04:40.590

免费的：[Open flash chart](http://teethgrinder.co.uk/open-flash-chart/) , [php-gnuplot](http://php-gnuplot.sourceforge.net/) , [pchart](http://pchart.sourceforge.net/) , [xml/swf charts](http://www.maani.us/xml_charts/index.php) , [Visualize](http://www.filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/) , [igrapher](http://igrapher.com/#) , [awesomeJS](http://cyberpython.github.com/AwesomeChartJS/)

半商业：[rgraph](http://www.rgraph.net/)、[amcharts](http://www.amcharts.com/)、[谷歌图表](https://developers.google.com/chart/)、[jpgraph](http://jpgraph.net/)、

还有很多很多...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:07:01.557

对于绘图，最简单的方法是使用[Google Chart Tools](https://developers.google.com/chart/)。这里有一个很好的介绍：[Google Charts API 的快速入门指南](http://www.lornajane.net/posts/2011/quick-start-guide-for-google-charts-api)

对于访问数据库中的数据，这取决于您的服务器是如何设置的，什么是最简单的。我会使用 PHP 并从 Microsoft 的[PHP on Windows](http://www.microsoft.com/web/platform/phponwindows.aspx)页面安装它。确保使用 PHP 的 PHP [SqlSrv](http://sqlsrvphp.codeplex.com/)驱动程序。Brian Swann 的[Accessing SQL Server Databases with PHP](http://msdn.microsoft.com/en-US/library/cc793139%28v=SQL.90%29.aspx)看起来是一个不错的起点。

或者，使用 ASP.NET，但我帮不了你。[不过，使用 ASP.NET 介绍 SQL Server](http://www.kirupa.com/net/sql_asp_introduction.htm)似乎是一个合理的起点。

如果它是您正在创建的一次性图表，那么您始终可以通过 SQL Server 管理工具将数据导出到 CSV，然后在 Excel 中绘制图表。

# wordpress - Wordpress：获得零评论和特定标签的帖子？

> ID：10172592
> 
> 赞同：1
> 
> 时间：2012-04-16T10:41:12.300
> 
> 标签：wordpress

有谁知道如何获取尚未发表评论且具有特定标签的帖子？

我试过

```
$args = array(
        'tag' => $tags,
        'post__not_in' => array($page_id),
        'showposts'=>5,
        'ignore_sticky_posts'=>1,
        'comment_count' => 0
);

 $my_query = new WP_Query($args);
 if( $my_query->have_posts() ) {
        while ($my_query->have_posts()) : $my_query->the_post(); ?>
          ... the usual stuff here ...
        endwhile;
} 
```

但这也给了我已经评论过的帖子，即使有一个“'comment_count' => 0”参数！为什么？什么是正确的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:49:14.290

该`comment_count`参数是 orderby 参数的一部分。基本上，您可以指定帖子应按评论计数排序（升序或降序，但这将显示所有帖子，无论是从最少（或最多）评论开始。

目前似乎没有一个“开箱即用”的解决方案，只显示没有评论的帖子，但这个问题很好地解决了这个问题：

[WordPress：列出没有评论的帖子](https://stackoverflow.com/questions/4829733/wordpress-list-posts-with-no-comments)

鉴于您还想显示带有某些标签的帖子，您需要稍微修改自定义查询并指定要包含的标签。查看这篇文章以获取有关如何执行此操作的一些想法的法典：

[http://codex.wordpress.org/Displaying_Posts_Using_a_Custom_Select_Query#Query_based_on_Custom_Field_and_Category](http://codex.wordpress.org/Displaying_Posts_Using_a_Custom_Select_Query#Query_based_on_Custom_Field_and_Category)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:00:36.693

我发现在使用之后`Wp_Query()`你会得到一个包含你的查询的对象......所以如果你将它复制粘贴到你的 php 代码中并`wp_posts.comment_count=0`在 WHERE 子句中添加一个条件，它就可以完美地工作！

# c# - 如何每秒显示 FOR LOOP 的值 C#

> ID：10172597
> 
> 赞同：0
> 
> 时间：2012-04-16T10:41:34.307
> 
> 标签：c#, for-loop

美好的一天，这可能是一个简单的问题（对每个人来说），但我不知道如何解决这个问题。

**简单的问题 - 简单的答案**。

如果我有这个代码：

```
public void test()
{
      for (int i = 0; i < 10000; i++)
      {
          label1.Text = i.ToString();
      }
} 
```

如果我调用测试方法，它会写给我 9999（肯定）。我需要在标签上显示变量**i**在这个循环的每一秒。我不想使用计时器 - 但您可以向我展示使用计时器的解决方案。

显示 LOOP 的最简单方法是什么？对不起，我的英语，美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:44:37.640

```
MyLabel.Text = i.ToString();
Thread.Sleep(1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:46:43.120

使用`BackgroundWoker`类和它的方法`ReportProgress`，在不锁定 UI 的情况下获得所需的行为。

```
void backgroundWoker_DoWork(....)
{
      for (int i = 0; i < 10000; i++)
      {
          backgroundWoker.ReportProgress(0,i.ToString());
          Thread.Sleep(1000);
      }

}

void backgroundWoker_ProgressChanged(....)
{
     label1.Text = e.UserState.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:46:19.827

不是好方法，但您可以使用：

```
public void test()
{
      for (int i = 0; i < 10000; i++)
      {
          System.Threading.Thread.Sleep(1000);
          label1.Text = i.ToString();
      }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:34:48.983

甜美简单

```
DateTime start= DateTime.Now;
for(int i = 0; i < 10000; i++)
{
 DateTime end = DateTime.Now;
 if( start.Second != end.Second )
 {
  start = end;
  label1.Text = i.ToString();
 }
} 
```

**编辑**

这将使您看到差异。在循环运行后设置断点，您将看到 iz 的数组填充了 i 值。我机器上的第一个是150000

```
 List<string> iz = new List<string>();
        DateTime start = DateTime.Now;
        for (int i = 0; i < 10000000; i++)
        {
            int zz = 5000;
            int yy = zz / (1 +i);
            zz = yy * i;
            DateTime end = DateTime.Now;
            if (start.Second != end.Second)
            {
                start = end;
                iz.Add(i.ToString());
            }
        } 
```

# asp.net - Ef 代码优先与现有数据库

> ID：10172599
> 
> 赞同：-2
> 
> 时间：2012-04-16T10:41:37.420
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, asp.net-mvc-2, entity-framework-4

假设我有两个数据库表，比如说`tb1`和`tb2`

```
[tb1]
id      primary key
name
lastname

[tb2]
id      primary key
tb1_ID  foreign key
phone_no
degree
grade 
```

关系`tb1`可能持有表二的多条记录。即：一对多的关系。
对于这种关系，我需要一个实体来保存所有一列`tb1`并且只有一列`tb2`（比如只有 ph 号）。
建议我最简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:48:12.137

最简单的方法 - 创建数据库视图并将其映射为新实体。更好但更复杂的方法 - 直接映射这些表并在 LINQ 查询中使用投影到您的自定义类型：

```
var data = context.TB2s.Select(t => new TBViewModel
                                        {
                                           Id = t.TB1.Id,
                                           Name = t.TB1.Name,
                                           LastName = t.TB1.LastName,
                                           PhoneNumber = t.PhoneNumber
                                        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:42:52.733

不知道能不能正常

使用试试看

```
Public class tb1
{
public int id{get; set;}
public string name{get; set;}
public string lastName{get; set;}
[NotMapped]
public List<string> relatedPhoneNo{get; set;}
}

var data = db.master.Select(t1 => new tb1
            {
                id = t1.id,
                name = t1.name,
                lastName = t1.lastName,
                relatedPhoneNo= (from t2 in db.tb2
                       where t2.id==t.id
                      select t2.city ).ToList()
            }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T10:54:46.927

您是否真的有一个包含数据的现有数据库，或者您只是希望 EF Code First 生成一个看起来像现有数据库设计的数据库？

如果您只在 MVC3 模型中创建两个单独的类，EF 可以创建一个看起来像这样的数据库（假设您正在根据标签执行 MVC3）。

以下是使用学生和课程的示例：

```
 public class Student
{

    public int Id { get; set; }

    public string Name{ get; set; }

    //This should make the 1 to many relationship to the second table 
    public List<Course> Courses { get; set; }

}

 public class Course
{

    public int Id { get; set; }

    public string CourseName{ get; set; }

} 
```

在这种情况下，EF Code First 将创建一个与表 Courses 具有一对多关系的表 Student。

生成的数据库如下所示：

```
[Student]
id      primary key
name

[Courses]
id      primary key
CourseName
Student_ID  foreign key 
```

# android - 布局问题

> ID：10172600
> 
> 赞同：0
> 
> 时间：2012-04-16T10:41:37.590
> 
> 标签：android, xml, xml-layout

我正在尝试制作一个具有固定标题的排行榜...我之前发布过并获得了建议，但我仍然遇到一些问题！我敢肯定这只是一个小问题导致我的问题！

以下是主页面的代码：

```
public class tab_1 extends ListActivity {

    public int a = Football_appActivity.league;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        if(a==1){
            String xml = XMLfunctions.getXML_prem_table();
            Document doc = XMLfunctions.XMLfromString(xml);
            int numResults = XMLfunctions.numResults(doc);

            if((numResults <= 0)){
                Toast.makeText(tab_1.this, "League Table", Toast.LENGTH_LONG).show();
                finish();
            }

            NodeList nodes = doc.getElementsByTagName("team");
            setContentView(R.layout.table_header);

            for (int i = 0; i < nodes.getLength(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();

                Element e = (Element)nodes.item(i);
                map.put("id", XMLfunctions.getValue(e, "id"));
                map.put("name", "" + XMLfunctions.getValue(e, "name"));
                map.put("played", "" + XMLfunctions.getValue(e, "played"));
                map.put("won", "" + XMLfunctions.getValue(e, "won"));
                map.put("drawn", "" + XMLfunctions.getValue(e, "drawn"));
                map.put("lost", "" + XMLfunctions.getValue(e, "lost"));
                map.put("points", "" + XMLfunctions.getValue(e, "points"));
                mylist.add(map);
            }

            ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main_tab, 
                    new String[] { "name", "played", "won", "drawn", "lost", "points"}, 
                    new int[] { R.id.item_title, R.id.item_played, R.id.item_won,
                    R.id.item_drawn, R.id.item_lost, R.id.item_points});
            setListAdapter(adapter);

            final ListView lv = getListView();
            lv.setTextFilterEnabled(true); 
            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                    @SuppressWarnings("unchecked")
                    HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);
                    Toast.makeText(tab_1.this, o.get("name") + " have Won '" + o.get("won") + "' games, and are currently on '" + o.get("points") + "' points!", Toast.LENGTH_LONG).show(); 
                }
            });
        } 
```

导致我所有错误的行是我调用不同布局的行：

`setContentView(R.layout.table_header);`

我假设我没有正确调用它..这是一个正确的假设吗？？？？

以下是布局：

列表占位符.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">    

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:drawSelectorOnTop="false" />

    <TextView
        android:id="@id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="No data">
        </TextView>

</LinearLayout> 
```

表头.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="7dp">
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1"
    android:id="@+id/table_header">
    <TableRow>
    <TextView 
        android:text="Name"
        android:id="@+id/team_title">
        </TextView>
    <TextView android:text="P "
        android:gravity="right"
        android:id="@+id/team_played">
    </TextView>
    <TextView android:text="W"
        android:id="@+id/team_won">
    </TextView>
    <TextView android:text="D"
        android:id="@+id/team_drawn">
    </TextView>
    <TextView android:text="L"
        android:id="@+id/team_lost">
    </TextView>
    <TextView android:text="P"
        android:id="@+id/team_points">
    </TextView>
  </TableRow>
  </TableLayout>

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:drawSelectorOnTop="false" />
   </LinearLayout> 
```

main_tab.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="7dp"
    >  

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1"
    android:id="@+id/table">
    <TableRow>
        <TextView  
            android:text=""
            android:id="@+id/item_title"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:padding="2dp"
            android:textSize="20dp" />
            <TextView  
            android:id="@+id/item_played"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:gravity="right" 
            android:padding="2dp"
            android:textSize="13dp" />
            <TextView  
            android:id="@+id/item_won"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:padding="2dp"
            android:textSize="13dp" />
            <TextView  
            android:id="@+id/item_drawn"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:padding="2dp"
            android:textSize="13dp" />
            <TextView  
            android:id="@+id/item_lost"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:padding="2dp"
            android:textSize="13dp" />
            <TextView  
            android:id="@+id/item_points"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:padding="2dp"
            android:textSize="13dp" />
            </TableRow>
            </TableLayout>

</LinearLayout> 
```

谢谢您的帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:02:20.267

首先，您不能像这样更改布局文件（SetContentView（）），并且您所做的错误是您在其他文件中声明 id 是**@+id/list**，其中 listplaceholder.xml 文件中是**@+id /android:list**，自然会报错，所以先让两个id同名。最后，我建议不要使用两个布局 xml 文件来保存活动，您必须只使用单个 xml 来显示活动。

# json - 如何使用 EXTJS 4 创建/更新 .json 文件？

> ID：10172602
> 
> 赞同：0
> 
> 时间：2012-04-16T10:41:42.960
> 
> 标签：json, extjs4

我有一个非常简单的 html 页面，其中包含 3 个文本字段和一个保存按钮。单击保存按钮时，我只想将输入的值作为 json 数据保存到“test.json”文件中。而且我正在使用 EXTJS 4。我刚刚开始学习 EXTJS4，所以如果有人编写示例代码，那就太好了。：-） 提前致谢...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:02:26.740

你可以做一个这样的字符串

```
{"data":[{"firstname":"Jeans","lastname":"Louis","job":"developper"}]} 
```

并将其保存到文件中

或者您可以使用内置功能，这是来自 ExtJs API

```
Modified version of Douglas Crockford"s json.js that doesn"t mess with the Object prototype http://www.json.org/js.html
Defined By
Methods

Ext.JSON
view source
decode( String json, [Boolean safe] ) : Object
Decodes (parses) a JSON string to an object. ...

Ext.JSON
view source
encode( Mixed o ) : String
Encodes an Object, Array or other value ...

Ext.JSON
view source
encodeDate( Date d ) : String
Encodes a Date. ... 
```

例如

```
var elemt = Ext.JSON.encode('your Object') 
```

关于写入文件，我想你的意思是在服务器上？在客户端会有问题..

# jquery - 提交后如何在表单所在的同一位置重定向？

> ID：10172603
> 
> 赞同：1
> 
> 时间：2012-04-16T10:41:53.007
> 
> 标签：jquery, forms

当我提交表单时，页面位于顶部，并且我的表单位于页面的中间。我想在提交后重定向回表单所在的相同位置。
会怎么样？请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:51:05.387

```
 if ($('#message').text() != "") {
            $('html,body').animate({ scrollTop: $("#message").offset().top }, 'slow');
        } 
```

这是我使用的一些代码，它完成了我的工作。
页面向下滚动，我想显示消息“表单已成功提交”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:56:21.787

我认为使用锚是最好的选择。 `<a name='contentForm'></a>`

我认为使用 Javascript 是多余的，因为你可以做到这一点。只需使用[http://ww.domain.com/?foo=bar#contentForm](http://ww.domain.com/?foo=bar#contentForm)

您还可以在表单中附加#contentForm： `<form action='/url.php?get=true#contentForm'>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T17:40:12.483

您可以尝试使用`onclick="someFunction()"`该提交按钮。然后，在该函数中，只需将焦点转移到所需表单中的特定项目。例如。`document.forms[i].xxx.focus();`

# c++ - openMP - 与 for 循环和私有并行化

> ID：10172605
> 
> 赞同：5
> 
> 时间：2012-04-16T10:42:05.017
> 
> 标签：c++, multithreading, multiprocessing, openmp

我编写了一个函数来评估集合（set_）中的点处的给定函数。没有并行化的代码是这样的：

```
void Method::evaluateSet(double* funcEvals_, double** set_)
{
    for(int j= 0;j<m_npts;j++)
    {
        if(!(isInsideConstraints(set_[j])) || qIsNaN(funcEvals_[j]) || !qIsFinite(funcEvals_[j])) 
        {
            funcEvals_[j] = DBL_MAX;                     
        }
        else
        {
            solverInput input_(m_input);
            input_.setFunParameters(simplex_[j]);
            funcEvals_[j]=input_.apply(simplex_[j]);
        }
    }           
} 
```

这工作正常。

然后，我使用 openMP 进行并行化，具有并行结构，以及每个线程的变量 set_ 的私有副本。循环是

```
#pragma omp parallel for  private (set_)
for(int j= 0;j<m_npts;j++)
{
    if(!(isInsideConstraints(set_[j])) || qIsNaN(funcEvals_[j]) || !qIsFinite(funcEvals_[j])) 
    {
        funcEvals_[j] = DBL_MAX;
    }
    else
    {
        solverInput input_(m_input);
        input_.setFunParameters(set_[j]);
        funcEvals_[j]=input_.apply(set_[j]);
    }
}
#pragma omp barrier 
```

它崩溃，并且在 if 评估时发生错误，使用`set_ is being used without been initialized`. 我不明白。既然我将变量设置为私有，那么每个线程中`set_`不应该有一个原始副本吗？`set_`

代码有什么问题以及如何改进？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T10:45:13.397

当您将`private`私有副本用于变量时，私有副本从没有值开始，我的意思是它当时没有初始化。因此，参数传递的值不设置`set_`变量。您需要改为使用`firstprivate`它，它首先使用当前值初始化私有副本。

# android - 如何在 Netbeans 上为我的 android 项目添加 Ksoap2 Jar 文件

> ID：10172614
> 
> 赞同：1
> 
> 时间：2012-04-16T10:43:02.130
> 
> 标签：android, netbeans, netbeans-7

我需要知道如何将 ksoap2 jar 文件添加到我的 Android 的 Netbeans 中，我添加了 android soap 项目但是在属性它没有显示现有的 ksoap2 jar 文件，我被删除了那个，现在我正在尝试添加 Ksoap2 Netbeans 它没有像 Eclipse 那样显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T18:58:37.560

如果是 KSOAP2，则无法使用 Project properties/Libraries/Add，因为它位于 JAR 中，而 NetBeans 当前版本 7.4 只允许添加 NetBeans 项目，而不是 jar。

也无法通过右键单击项目中的库树来添加库，因为右键单击时没有弹出菜单。

正确的解决方案是打开您的 Android 项目目录并将您要导入的任何外部库复制到`libs`子目录中。然后关闭并重新打开该项目，如果它当时是打开的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T10:57:17.623

右键单击项目的**库**文件夹 - > 选择**添加 Jar/文件夹**-> 将出现文件对话框

然后选择适当的jar或jar的zip文件：-
这里有两个选项供您选择

`1) Select jar from external folders of your file system`

`2) Try to make one folder known as libs in your project like we do in eclipse & then select that jar`

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T10:58:18.970

如果您没有使用 maven 项目，则在项目窗口中，右键单击库。选择添加 jar 或文件，导航到您的 jar 文件，然后选择它。它将可用于构建/运行。

如果您的 jar 文件位于文件系统上的项目下方，则最好。然后 Netbeans 将使用 jar 的相对路径，这使得该项目可以被其他人重用。

# azure - 在 Azure 中，我应该将需要由辅助角色访问的物理文件存储在哪里？

> ID：10172617
> 
> 赞同：8
> 
> 时间：2012-04-16T10:43:09.533
> 
> 标签：azure, azure-storage, azure-worker-roles, azure-web-roles

在 Azure 中，我应该将需要由辅助角色访问的物理文件存储在哪里？

在我的情况下，我通常会将这些特定文件存储在我的 Web 角色的 App_Data 文件夹中，但我不相信 Worker Roles 可以访问该文件夹。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T10:55:50.703

如果您将文件放在 Windows Azure 存储中（blob 非常适合文件存储），那么您的任何角色实例都可以访问它们，无论是在 Web 角色还是在工作角色中。此外，Blob 存储是*持久*的，这意味着在数据中心内进行三次复制（并在地理上复制到另一个数据中心）。

关于 Worker Role 实例无法访问 Web Role 实例（或另一个 Worker Role 的实例）中的文件夹，您是对的。事实上，同一角色的多个实例无法访问彼此的文件系统（请记住，角色只是 Windows 2012 Server，并且该角色的每个实例都在其自己的虚拟机中运行，并具有自己的本地磁盘）。

**编辑 2014 年 7 月 5 日**这个答案现在有点老了。Azure 现在提供文件服务，提供由 Blob 存储支持的 SMB 共享。对于必须使用文件系统并且无法更改为直接读取/写入 blob 的遗留应用程序，这往往更容易使用。更多信息可以在[这里](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx)找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T10:56:07.393

由于数据不会保留在实例上，因此您需要分布式存储，您可以在其中存储文件（和其他数据）。这可以通过使用 Windows Azure Blob 存储来完成（与将文件存储在 SQL Azure 中相比，这非常便宜）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T15:38:00.783

Azure storage is a good option. You can also look at using Local Storage Resources:

[http://msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee758708.aspx)

> A local storage resource is a reserved directory in the file system of the virtual machine in which an instance of a role is running. Code running in the instance can write to the local storage resource when it needs to write to or read from to a file. For example, a local storage resource can be used to cache data that may need to be accessed again while the service is running in Windows Azure.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T13:03:27.093

如果您存储的数据是敏感数据 - 请确保[在您的 blob 容器上使用某种保护方案，](http://msdn.microsoft.com/en-us/library/dd179354.aspx)并且不要将 blob 数据存储为任何人都可以查看的可公开访问的链接。最好的办法是使用 SaS（[共享访问签名](http://msdn.microsoft.com/en-us/library/windowsazure/hh508996.aspx)）来安全地访问您存储的 Azure blob 数据。如果数据不敏感 - 这不是必需的。

请参阅有关在 Azure 中[保护 Blob 和容器](http://msdn.microsoft.com/en-us/library/ee393343.aspx)的更多MSDN 参考。

# c# - 如何创建具有能够绑定到集合的属性的 UserControl？

> ID：10172620
> 
> 赞同：0
> 
> 时间：2012-04-16T10:43:17.483
> 
> 标签：c#, wpf, xaml, data-binding

我创建了一个图表控件的扩展，并声明了以下属性：

```
public ObservableCollection<DataPoint> ItemsSource { get; set; } 
```

现在，当我尝试在绑定中使用它时

```
<chart:DataChart ItemsSource="{Bind MySource}"/> 
```

我正进入（状态：

```
error MC3074: The tag 'Bind' does not exist in XML namespace 'http://schemas.microsoft.com/winfx/2006/xaml/presentation' 
```

我应该改变什么才能使它起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:44:42.463

1.  你需要使用`Binding`，而不是`Bind`。（也许只是拼写错误。）
2.  为了使用`Binding`for `ItemsSource`，它必须是一个[依赖属性](http://www.wpftutorial.net/dependencyproperties.html#creation)。

# java - Jsoup：用新行替换标签=>新行以空格开头

> ID：10172630
> 
> 赞同：2
> 
> 时间：2012-04-16T10:44:17.560
> 
> 标签：java, html, jsoup

我必须用新行替换几个 HTML 标记，例如您在示例代码中看到的 p 标记：

```
String html = "<p>Zeile1</p><p>Zeile2</p><p>Zeile3</p><p>Zeile4</p>";
Document doc = Jsoup.parse(html);
doc.select("p").append("\\n");
String sanitized = doc.text().replaceAll("\\\\n", System.getProperty("line.separator");
System.out.println(sanitized); 
```

这是输出：

```
Zeile1
 Zeile2
 Zeile3
 Zeile4 
```

如您所见，我在第 2-4 行中有空格。它们来自哪里，我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:07:09.037

像@bdares 建议一样，您可以遍历元素：

```
String html = "<p>Zeile1</p><p>Zeile2</p><p>Zeile3</p><p>Zeile4</p>";
Document doc = Jsoup.parse(html);
StringBuilder b = new StringBuilder();
for (Element p : doc.select("p")) {
    b.append(p.text());
    b.append(System.getProperty("line.separator"));
}
System.out.println(b.toString()); 
```

输出：

```
Zeile1
Zeile2
Zeile3
Zeile4 
```

# gps - 如何使用 Google Maps API 检索高速公路的运动方向

> ID：10172631
> 
> 赞同：2
> 
> 时间：2012-04-16T10:44:19.793
> 
> 标签：gps

我的问题是：给定一个 GPS 位置（指示汽车在普通高速公路上的位置），我想检索运动方向（北或南）以了解我在哪一边。

在 Google Maps Api 文档页面上，我没有找到任何返回此信息的请求。

我要做的是计算我的位置和我在旅行中找到的下一个服务区之间的距离（服务区的 GPS 坐标在我的个人数据库中）。

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:07:13.280

这与 Google Maps API 无关；这是一个通用的问题。

GPS找到的一组坐标就是：一个位置。之后您需要在短时间内获取另一个位置，并且差异将允许您计算行进的方向和速度。

# submit - 向 Open Graph 提交操作不起作用 - 有什么办法吗？

> ID：10172633
> 
> 赞同：0
> 
> 时间：2012-04-16T10:44:23.987
> 
> 标签：submit, facebook-opengraph

我正在尝试提交 Open Graph 操作，但提交过程在第二阶段后卡住了 - 按“继续”会使字段变灰，但它们会立即弹回启用状态，并且没有过渡到最后一步，只是一个“继续”按钮附近的加载指示。

似乎该错误（https://developers.facebook.com/bugs/319383498127002）是可重现的，但我想知道这是否可能是我的帐户特有的，或类似的东西。

关于如何解决这个问题的想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:05:27.367

在错误得到修复之前，请尝试使用[https://developers.beta.facebook.com](https://developers.beta.facebook.com)。该错误可能已在该版本的 Facebook 中修复。

# ruby-on-rails - simple_form 和从数组中分组选择

> ID：10172634
> 
> 赞同：2
> 
> 时间：2012-04-16T10:44:37.193
> 
> 标签：ruby-on-rails, simple-form

如何使用表中的 simple_form 分组选项创建选择，而不是来自集合？试过：

```
= f.input :countries, 
:collection => [["North America",[["United States","US"],["Canada","CA"]]]], 
:as => :grouped_select 
```

但出现错误：**nil 不是符号**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T23:55:03.110

快速查看[https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)上的文档表明您需要`:group_method => :method`在 collection_select 上的一个。

这是他们给出的完整示例：`f.input :country_id, :collection => @continents, :as => :grouped_select, :group_method => :countries`

此外，以防万一您不知道，simple_form 有一个 country_select 帮助程序，`gem 'country_select'`如果您打算使用它，则需要将其添加到您的 gemfile 中。

使用该帮助器的 country_select 可能如下所示： `f.input :shipping_country, :priority => [ "Brazil" ]`具有将列表限制为仅几个国家的选项，如下所示：`f.input :shipping_country, :priority => [ "Brazil" ], :collection => [ "Australia", "Brazil", "New Zealand"]`这些示例可在“优先级”部分的 simple_form 文档中找到：[http ://rubydoc.info/github/平台格式/simple_form/master/frames](http://rubydoc.info/github/plataformatec/simple_form/master/frames)。显然，simple_form 会检测到它是针对一个国家/地区的，因此只需使用`input`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T21:06:47.087

就我而言，仅在我使用 `as: :grouped_select`和 `:group_method => :last`

# android - 找不到检测目标包：com.xyz

> ID：10172636
> 
> 赞同：27
> 
> 时间：2012-04-16T10:44:41.777
> 
> 标签：android, junit

我为一个库项目编写了一个测试用例类，我单独创建了这个测试用例项目。

当我试图运行这个测试项目时，控制台显示错误`"Unable to find instrumentation target package: <with package name>"`，

我也在谷歌上搜索解决方案，在一些网站中，他们检查了 AndroidManifestFile 中的标签 android:targetPackage 属性。

我检查了清单，仪表标记是正确的，它正确地定位了 libraryproject 包。

任何人都可以帮忙，使我的库测试用例项目可运行

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-16T11:11:10.880

您必须创建和设置一个依赖于库项目的应用程序项目，以便测试库项目。引用[官方开发者指南](http://developer.android.com/guide/developing/projects/index.html#testing)：

> ## 测试图书馆项目
> 
> 有两种推荐的方法来设置库项目中的代码和资源测试：
> 
> *   您可以设置一个测试项目来检测依赖于库项目的应用程序项目。然后，您可以将测试添加到项目中以获取特定于库的功能。
>     
>     
> *   您可以设置一个依赖于库的标准应用程序项目，并将仪器放在该项目中。这使您可以创建一个独立的项目，其中包含测试/仪器和要测试的代码。

Android 库项目不是直接构建的，而是与主应用程序项目一起构建的。换句话说，你不能直接将它编译成自己的 .apk 并在 Android 设备上运行。另一方面，仪器测试通过在设备上安装 app.apk 和 test.apk 之后运行测试项目应用程序（Eclipse 中的“Run As...”->“Android JUnit Test”），然后使用 test .apk 来操作 app.apk——因此是测试名称的“仪器”部分。

* * *

**更新：**

请注意，如果您使用第二种方法，您可以创建一个测试项目测试库项目，而无需创建第三个应用程序项目，因为测试项目本身也是一个常规应用程序项目。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-09T13:49:20.927

创建android测试项目时记得设置好目标包

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test" <-------------------
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="8" />
    <instrumentation
        android:name="android.test.InstrumentationTestRunner"
        android:targetPackage="com.example.test" >  <-----------------
    </instrumentation>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="android.test.runner" />
        <activity android:name="TestActivity" />
    </application>
</manifest> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-18T10:15:40.070

就我而言，我正在使用 gradle 运行，只运行 connectedInstrumentTest 任务

`./gradlew connectedInstrumentTest`

我收到“无法找到仪器信息”错误...问题是我还需要在 connectedInstrumentTest 任务之前包含要执行的 installDebug 任务，如下所示：

```
./gradlew installDebug connectedInstrumentTest 
```

# security - 保护离线 html5/js 应用程序？

> ID：10172640
> 
> 赞同：2
> 
> 时间：2012-04-16T10:44:48.030
> 
> 标签：security, html, cross-platform

我想开发一个跨平台的应用程序，比如说适合桌面（win7/8/Linux）和移动（win phone/iPhone）。它应该在离线模式下运行，也许我会选择将它商业化。最简单的方法是使用 html5 加 js。

但是我怎样才能以某种方式保护它呢？

因为没有可用的在线连接，我无法将视图与逻辑分开。我无法激活它，因为js中的每一个检查都可以绕过。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:59:25.993

对于 JavaScript，您可以使用混淆。这是隐藏代码的最简单且不安全的方法。搜索 JS 的混淆工具。如果你想分离视图和逻辑并隐藏代码，你可以使用 Silverlight 或 Flash，但你会遇到 iPhone 的问题（不支持）。对于 Silverlight，您可以在离线模式下使用它。OS 支持也适用于 SL：win7/8/win 手机 - 完全，Linux - 部分（单声道项目）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T12:26:05.217

我找到了基于 Ruby on Rails 的 Rhodes。看起来它正在所有主要的智能手机平台上运行服务器。它有一个 sqlite 数据库。我要试试。

# nhibernate - Nhibernate 类型和 Id 获取表单会话

> ID：10172644
> 
> 赞同：0
> 
> 时间：2012-04-16T10:45:16.220
> 
> 标签：nhibernate

Helo 我得到了对象类型和 id 我如何从休眠会话中获取它？示例类型 t = 公司；内部 ID = 100；

getobject(t,id) 改变里面的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:29:36.260

这是代码中的一些错误，但方法现在正在工作，例如，如果我们得到

Namespace.Company Namespace.somefolder.Company 在这种情况下它会起作用;)

```
 public static Object GetObjectFromSession(object ret, int id)
    {
        string z = ret.GetType().ToString();
        z = z.Substring(z.LastIndexOf('.') + 1);
        ISession session = GetExistingWebSession();
        ret = session.Get(z, id);
        return ret;
    }

    public static Object GetObjectFromSession(string ret, int id)
    {
        ret = ret.Substring(ret.LastIndexOf('.') + 1);
        ISession session = GetExistingWebSession();
        return session.Get(ret, id);
    } 
```

# php - Soundmanager 2 不播放 mp4 文件 - 使用 PHP 脚本进行输出时

> ID：10172647
> 
> 赞同：0
> 
> 时间：2012-04-16T10:45:25.543
> 
> 标签：php, javascript, soundmanager2

这里有一个奇怪的，

Soundmanager 在使用 PHP 输出时根本不会播放 MP4。

```
soundManager.createSound({
    id: 'sm2-1001',

    url: 'http://mysite.tld/1333092566.mp3', // WORKS
//  url: [{type: 'audio/mp3', url: 'http://mysite.tld/outputmp3.php}], // WORKS
//  url: 'http://mysite.tld/1333092566.mp4', // WORKS
//  url: [{type: 'audio/mp4', url: 'http://mysite.tld/outputmp4.php}], // DOES NOT WORK

    autoLoad: false,
    autoPlay: true,
}); 
```

URL 是正确的，从浏览器转到[http://mysite.tld/outputmp4.php](http://mysite.tld/outputmp4.php) - 打开并播放得很好。

使用 smartReadFile.php [https://jplayer.googlegroups.com/attach/f308294ddea52f6c/smartReadFile.php?view=1&part=4](https://jplayer.googlegroups.com/attach/f308294ddea52f6c/smartReadFile.php?view=1&part=4)

使用最新版本的 SM2

来自 SM2 的调试信息：

```
soundManager.createSound(): sm2-1001 (http://mysite.tld/outputmp4.php)
soundmanager2.js (line 1110)
SMSound() merged options: { id: sm2-1001, url: http://mysite.tld/outputmp4.php, autoLoad: false, autoPlay: true, loops: 1, multiShot: true, multiShotEvents: false, pan: 0, stream: true, usePolicyFile: false, volume: 100, usePeakData: false, useWaveformData: false, useEQData: false, bufferTime: 3 }
soundmanager2.js (line 1112)
SMSound.play(): "sm2-1001" is loading - attempting to play..
soundmanager2.js (line 1110)
SMSound.play(): "sm2-1001" is starting to play
soundmanager2.js (line 1112)
SMSound._onload(): "sm2-1001" loaded.
soundmanager2.js (line 1110)
(Flash): correcting sound sm2-1001 end position (0) to length: 4602 
```

有任何想法吗？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:58:26.360

`audio/mp4`不是正确的 mimetype，因为 mp4 是（设计用于）视频。尝试使用`video/mp4`，或只是`audio/mpeg`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T01:28:14.673

强制这个选项为 TRUE 解决了这个问题。

```
 'isMovieStar': null,      // "MovieStar" MPEG4 audio mode. Null (default) = auto detect MP4, AAC etc. based on URL. true = force on, ignore URL 
```

由于从 Flash9 开始支持 isMovieStar，因此必须应用此选项。

```
soundManager.flashVersion = 9; 
```

# actionscript-3 - 在 AS3 中存储和检索地图数据的最有效方法是什么？

> ID：10172651
> 
> 赞同：1
> 
> 时间：2012-04-16T10:45:51.863
> 
> 标签：actionscript-3, map, multidimensional-array

事情就是这样，我需要将不同的值存储在二维数组（或概念上类似的东西）中。这个想法是创建一个带有瓦片的 2d 地图，该数组将保存地图中每个瓦片的 ID。我正在尝试创建一些稍微高效的东西，特别是因为我需要节省一些内存使用以供以后使用（它与 AI 有关）并且它必须在低端 PC 上运行，但简单地创建一个数组似乎是一种浪费空间，因为我在任何给定的地图上只有大约 50 个不同的 ID。

我想创建一个 8 位字符的二维数组就足够了，但是对于 actionscript 3，这是不可能的，它没有 8 位字符数据类型。我可以使用带有字符串或其他东西的向量吗？所以我问你，最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:51:31.590

可能要走的路是使用 ByteArray - [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html)。您可以一次读取和写入一个或多个字节。您甚至可以使用 compress 函数来减小它的大小（它实际上是“压缩”它）

您应该将地图“展平”为字节数组，即 map[i][j] 将存储在 byteArray[i*nr_columns + j]

# java - 如何在运行时获取设备高度和宽度？

> ID：10172657
> 
> 赞同：30
> 
> 时间：2012-04-16T10:46:24.563
> 
> 标签：java, android, android-layout, android-intent, android-emulator

我正在开发一个应用程序，我必须使我们的应用程序适合每一种设备——平板电脑和安卓手机。现在我想在运行时获取设备的高度和宽度并在我的代码中实现它，以便我的应用程序适用于横向和纵向。

我的 XML 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:layout_weight="2" android:orientation="vertical">

    <LinearLayout android:id="@+id/linearLayout1" android:layout_height="match_parent" 
    android:orientation="horizontal" android:layout_width="match_parent" 
    android:layout_weight="1">

        <LinearLayout android:id="@+id/linearLayout1" android:layout_height="match_parent"  
        android:orientation="vertical" android:layout_width="match_parent" 
         android:layout_weight="1" android:weightSum="100">
            <TextView  android:id="@+id/letter1" android:gravity="center" android:layout_width="fill_parent" android:layout_height="wrap_content"  android:layout_weight="60"></TextView>
            <TextView  android:id="@+id/letter2" android:gravity="center" android:layout_width="fill_parent" android:layout_height="wrap_content"  android:layout_weight="20"></TextView>
            <TextView  android:id="@+id/letter3" android:gravity="center" android:layout_width="fill_parent" android:layout_height="wrap_content"  android:layout_weight="20"></TextView>
        </LinearLayout>

        <LinearLayout android:id="@+id/linearLayout1" android:layout_height="match_parent"  
        android:gravity="center"
        android:orientation="horizontal" android:layout_width="match_parent" 
        android:layout_weight="1">
            <ImageView android:id="@+id/imag"  
            android:gravity="center"
            android:scaleType = "fitCenter"
            android:layout_height="fill_parent" 
            android:layout_width="fill_parent"
             android:layout_gravity="center">
        </ImageView>

        </LinearLayout>

    </LinearLayout>

        <LinearLayout android:layout_gravity="bottom" 
        android:id="@+id/linearLayout2" 
        android:layout_height="wrap_content" android:orientation="horizontal" android:layout_width="match_parent">
            <Button android:id="@+id/previous" android:layout_width="wrap_content" android:layout_weight="1" android:text="Previous" android:layout_height="wrap_content" ></Button>
            <Button android:id="@+id/practice" android:layout_width="wrap_content" android:layout_weight="1" android:text="Practice" android:layout_height="wrap_content" android:onClick="onClick"></Button>
            <Button android:id="@+id/home" android:layout_width="wrap_content" android:layout_weight="1" android:text="Home" android:layout_height="wrap_content"></Button>
            <Button android:id="@+id/spell" android:layout_width="wrap_content" android:layout_weight="1" android:text="Spell" android:layout_height="wrap_content" android:onClick="Content"></Button>
            <Button android:id="@+id/next" android:layout_width="wrap_content" android:layout_weight="1" android:text="Next" android:layout_height="wrap_content" android:onClick="Content"></Button>

        </LinearLayout>

</LinearLayout> 
```

我的Java文件是：

```
package com.android;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Typeface;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.android.SimpleGestureFilter.SimpleGestureListener;

public class MySwara extends Activity implements SimpleGestureListener {

    private SimpleGestureFilter detector;
    private static int counter=-1;
    private String[] mBtn1 ={"C","D","E","F","G","H","IÄ","J","K","L","M","N","O","CA","CB"};
    private TextView txtLetter;
    private ImageView imgLetter;

    private int[] imgArr={R.drawable.w1,R.drawable.w2,R.drawable.w3,R.drawable.w4,R.drawable.w5,R.drawable.w6,R.drawable.w7,R.drawable.w8,R.drawable.w9,R.drawable.w10,R.drawable.w11,R.drawable.w12,
                            R.drawable.w13,R.drawable.w14,R.drawable.w15};
    private TextView txtKannada;
    private String[] mBtn2 = {"CgÀ¸À","DªÉÄ","E°","F±À","GqÀ","Hl","IÄ¶","J¯É","Kr","LzÀÄ","M¯É","N¯É","OµÀzsÀ",
            "CAUÀr","CB"};
    private String[] mBtn3 = {"ARASA","AME","ILI","ISA","UDA","UTA","RUSHI","ELE","EDI","AIDU","oLE","OLE","AUSHADA",
            "ANGADI","AHA"};
    private TextView txtEnglish;

    private int[] mAudio = {R.raw.a,R.raw.b,R.raw.c,R.raw.d,R.raw.e,R.raw.f,R.raw.g,R.raw.h,R.raw.i,R.raw.j,
            R.raw.k,R.raw.l,R.raw.m,R.raw.n,R.raw.o};
    protected MediaPlayer mp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.content);   

            detector = new SimpleGestureFilter(this,this);
            if(counter == -1)
                counter =getIntent().getExtras().getInt("POSITION");
            Typeface tf = Typeface.createFromAsset(getBaseContext().getAssets(), "fonts/brhknd.ttf");
            txtLetter = (TextView)findViewById(R.id.letter1);
            txtKannada = (TextView)findViewById(R.id.letter2);
            txtEnglish = (TextView)findViewById(R.id.letter3);
            imgLetter = (ImageView)findViewById(R.id.imag);
            txtLetter.setTypeface(tf);      
            txtLetter.setText(mBtn1[counter]);
            //txtLetter.setTextSize(350);

            Bitmap bm = BitmapFactory.decodeResource(getResources(), imgArr[counter]);
            imgLetter.setImageBitmap(bm);

            txtKannada.setTypeface(tf);
            txtKannada.setText(mBtn2[counter]);
            //txtKannada.setTextSize(100);

            txtEnglish.setText(mBtn3[counter]);
            //txtEnglish.setTextSize(50);

            Button btnNext =  (Button)findViewById(R.id.next);
            btnNext.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    if(counter<imgArr.length-1)
                        counter++;
                    changeContent();
                }
            });

            Button mPlay = (Button)findViewById(R.id.spell);
            mPlay.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    mp = MediaPlayer.create(MySwara.this, mAudio[counter]);   
                    mp.start();

                }
            });

            Button btnPrvs =  (Button)findViewById(R.id.previous);
            btnPrvs.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    if(counter>0)
                        counter--;
                    changeContent();
                }
            });

            Button btnPractice = (Button)findViewById(R.id.practice);
            btnPractice.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(MySwara.this,DrawingActivity.class);
                    startActivity(intent);

                }
            });
            Button btnHome = (Button)findViewById(R.id.home);
            btnHome.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(MySwara.this,mainClass.class);
                    startActivity(intent);

                }
            });
    }

    public void changeContent()
    {

        txtLetter.setText(mBtn1[counter]);
        txtKannada.setText(mBtn2[counter]);
        txtEnglish.setText(mBtn3[counter]);
        //imgLetter.setBackgroundResource(imgArr[counter]);
        Bitmap bm = BitmapFactory.decodeResource(getResources(), imgArr[counter]);
        imgLetter.setImageBitmap(bm);

    }

@Override
        public boolean dispatchTouchEvent(MotionEvent me){
          this.detector.onTouchEvent(me);
         return super.dispatchTouchEvent(me);
        }
    @Override
     public void onSwipe(int direction) {
      String str = "";

      switch (direction) {

      case SimpleGestureFilter.SWIPE_RIGHT : str = "Swipe Right";

                                                if(counter>0)
                                                    counter--;
                                                    changeContent();
                                               break;
      case SimpleGestureFilter.SWIPE_LEFT :  str = "Swipe Left";
                                            if(counter<imgArr.length-1)
                                                counter++;
                                                changeContent();
                                                     break;

      }

     }

    @Override
    public void onDoubleTap() {
        // TODO Auto-generated method stub

    }

    } 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-04-16T10:51:38.780

```
Display mDisplay = activity.getWindowManager().getDefaultDisplay();
final int width  = mDisplay.getWidth();
final int height = mDisplay.getHeight(); 
```

这样你就可以得到屏幕尺寸。

由于此 API 在新的 SDK 版本中已被弃用，因此您可以使用它。

```
DisplayMetrics displayMetrics = context.getResources().getDisplayMetrics();
int width = displayMetrics.widthPixels;
int height = displayMetrics.heightPixels; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-16T10:52:45.507

在 Activity 范围内执行以下操作：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
int w = dm.widthPixels; // etc... 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-16T10:50:23.233

在您的活动的 onCreate 中，您可以执行

```
mScreenWidth = getActivity().getWindowManager().getDefaultDisplay().getWidth();

mScreenHeight = getActivity().getWindowManager().getDefaultDisplay().getHeight(); 
```

然后使用这些变量来访问设备的高度和宽度

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-16T10:53:33.607

这就是您获得可用屏幕尺寸的方式。这将为您提供的不是原始像素大小，而是您的窗口/活动的可用空间。

```
 Point outSize = new Point();
    getWindowManager().getDefaultDisplay().getSize(outSize); 
```

您也可以为横向和纵向使用不同的布局 xml 文件。将您的肖像 xml 放在 res/layout-port 中。横向布局可以放入 res/layout-land。您应该阅读android如何处理[资源](http://developer.android.com/guide/topics/resources/index.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-16T10:54:23.870

您可以使用类 Display Metrics [http://developer.android.com/reference/android/util/DisplayMetrics.html获取所有显示相关信息](http://developer.android.com/reference/android/util/DisplayMetrics.html)

你会需要

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics); 
```

在此之后，所有必需的信息都将出现在您的指标对象中。

另一种选择是调用

```
getActivity().getWindowManager().getDefaultDisplay().getWidth()
getActivity().getWindowManager().getDefaultDisplay().getHeight() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-16T11:17:56.943

我不会告诉你如何获得屏幕尺寸，因为这里的其他人已经这样做了。我将指向您指向 android 开发者开发指南中的[链接](http://developer.android.com/guide/practices/screens_support.html)，该链接应该教您如何为不同屏幕尺寸的设备进行设计和开发。

看完再回来告诉我们，你还是要获取屏幕的宽高。

# iphone - GKTurnBased 参与者信息

> ID：10172658
> 
> 赞同：6
> 
> 时间：2012-04-16T10:46:25.157
> 
> 标签：iphone, objective-c, ios, game-center, gamekit

有没有办法从 GKTurnBasedParticipant 对象中检索玩家的姓名？根据类参考，除了丑陋的 playerID 之外，似乎没有办法显示有关游戏玩家的相关信息。还是我错过了什么？

谢谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T10:56:23.337

使用`loadPlayersForIdentifiers:withCompletionHandler:`GKPlayer 的类方法。您将一组玩家 ID 作为 NSString 传递并获得一组完整的 GKPlayer 对象。阅读[GKPlayer 类参考](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKPlayer_Ref/Reference/Reference.html)以获取更多信息。

# ruby-on-rails-3 - Postgres / Rails - 按 Heroku 部署问题分组

> ID：10172660
> 
> 赞同：0
> 
> 时间：2012-04-16T10:46:39.787
> 
> 标签：ruby-on-rails-3, postgresql, heroku

我正在 MySQL 上开发并已部署到使用 Postgres 的 Heroku。看来我的一些查询需要重写才能与 Postgres 一起使用。任何人都可以通过以下问题协助修复我的小组吗？

Heroku 日志错误：

```
ActiveRecord::StatementInvalid (PGError: ERROR:  column "itunes_data.artist_show" must appear in the GROUP BY clause or be used in an aggregate function 
```

从我的控制器：

```
def itunes_top_tracks
 @itunes_top_tracks = ItunesData.all(:select => "artist_show, title, label_studio_network, isrc, SUM(units) as unitsum", :group => :isrc, :order => "unitsum DESC", :limit => 10)
end 
```

我知道问题出在哪里，并且知道我将如何在直接 SQL 中做到这一点，我只是不确定 Rails 方式吗？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:38:31.417

```
def itunes_top_tracks
 @itunes_top_tracks = ItunesData.all(:select => "artist_show, title, label_studio_network, isrc, SUM(units) as unitsum", 
    :group => [:artist_show, :title, :label_studio_network, :isrc], :order => "unitsum DESC", :limit => 10)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:38:12.710

看看这个问题 - [PostgreSQL - GROUP BY 子句或在聚合函数中使用](https://stackoverflow.com/questions/10161696/postgresql-group-by-clause-or-be-used-in-an-aggregate-function)它为在 Postgres 中使用 group bys 的答案提供了方向。

或者考虑在 Heroku 的 mySQL 插件上使用，不要担心尝试使用 Postgres。

# iphone - 在朋友 Facebook 墙贴上发布消息

> ID：10172662
> 
> 赞同：-1
> 
> 时间：2012-04-16T10:46:44.770
> 
> 标签：iphone, objective-c, ipad

我正在开发应用程序，我必须通过我的帐户向我的朋友墙贴发布问候。

那么我该如何执行呢？如果有人有想法请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:54:04.167

尝试这个

```
 NSMutableDictionary *parmaDic = [NSMutableDictionary dictionaryWithCapacity:4];
[parmaDic setObject:[NSString stringWithFormat:@"hello world"] forKey:@"message"]; // if you want send message  
[parmaDic setObject:@"http://icon.png" forKey:@"picture"];  // if you want send picture    
[parmaDic setObject:@"Create post" forKey:@"name"];         // if you want send name    
[parmaDic setObject:@"Write description." forKey:@"description"]; // if you want  description

[_facebook requestWithGraphPath:[NSString stringWithFormat:@"/%@/feed",facebook_user_id] 
                      andParams:parmaDic 
                  andHttpMethod:@"POST"
                    andDelegate:self]; 
```

我使用 key like.message,picture ..etc 请参阅[http://developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:03:13.693

首先使用字典，在其中添加要发布在朋友墙上的数据：-

```
NSMutableDictionary  *postVariablesDictionary = [[NSMutableDictionary alloc] init];
//posting the text written in the textView   
[postVariablesDictionary setObject:self.TextView.text forKey:@"message"];

[objDelegate.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/feed",friendId] andParams:postVariablesDictionary andHttpMethod:@"POST" andDelegate:nil]; 
```

这就是将数据发布在朋友的墙上的方式。希望对您有所帮助谢谢:)

# symfony - 实体未针对正确的捆绑包

> ID：10172665
> 
> 赞同：1
> 
> 时间：2012-04-16T10:47:06.363
> 
> 标签：symfony, bundle

当我从我的实体**"EcoliaFrontBundle:UserEvaluation"**发出请求 DQL 时遇到问题。它是 "EcoliaUserBundle:User" 和**"EcoliaFrontBundle:UserEvaluation"**之间的关系。错误是：**Ecolia/FrontBundle/User**类不存在。

错误图片：http: [//img405.imageshack.us/img405/5461/sanstitre1cbz.jpg](http://img405.imageshack.us/img405/5461/sanstitre1cbz.jpg)

我有 3 个捆绑包：

1.  行政
2.  正面
3.  用户

这是代码**UserEvaluation**：

```
 <?php

namespace Ecolia\FrontBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Ecolia\UserBundle\Entity\User;
use Ecolia\FrontBundle\Entity\Evaluation;

/**
 * Ecolia\FrontBundle\Entity\UserEvaluation
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class UserEvaluation
{
    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="Ecolia\FrontBundle\Entity\Evaluation")
     */
    private $evaluation;

    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="Ecolia\UserBundle\Entity\User")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    private $user;

    /**
     * @var float $note
     *
     * @ORM\Column(name="note", type="float")
     */
    private $note;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set note
     *
     * @param float $note
     */
    public function setNote($note)
    {
        $this->note = $note;
    }

    /**
     * Get note
     *
     * @return float 
     */
    public function getNote()
    {
        return $this->note;
    }

    /**
     * Set evaluation
     *
     * @param Ecolia\FrontBundle\Entity\Evaluation $evaluation
     */
    public function setEvaluation(\Ecolia\FrontBundle\Entity\Evaluation $evaluation)
    {
        $this->evaluation = $evaluation;
    }

    /**
     * Get evaluation
     *
     * @return Ecolia\FrontBundle\Entity\Evaluation 
     */
    public function getEvaluation()
    {
        return $this->evaluation;
    }

    /**
     * Set user
     *
     * @param Ecolia\UserBundle\Entity\User $user
     */
    public function setUser(\Ecolia\UserBundle\Entity\User $user)
    {
        $this->user = $user;
    }

    /**
     * Get user
     *
     * @return Ecolia\UserBundle\Entity\User 
     */
    public function getUser()
    {
        return $this->user;
    }
} 
```

这是代码评估：

```
<?php

namespace Ecolia\FrontBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Ecolia\FrontBundle\Entity\Evaluation;
use Ecolia\FrontBundle\Entity\UserEvaluation;
use Ecolia\FrontBundle\Entity\Grade;
use Ecolia\FrontBundle\Entity\UserGrade;
use Ecolia\UserBundle\Entity\User;
//use Ecolia\FrontBundle\Form\NewsType;
// N'oubliez pas de rajouter le ArticleHandler
//use Ecolia\FrontBundle\Form\NewsHandler;

class EvaluationController extends Controller
{
    public function indexAction() {
        $repos_grades = $this->getDoctrine()->getEntityManager()->getRepository('EcoliaFrontBundle:Grade');
        $query = $repos_grades->createQueryBuilder('g')
                            ->getQuery();

        $grades = $query->getResult();
        return $this->render('EcoliaFrontBundle:Evaluation:index.html.twig', array('grades' => $grades));
    }

    public function gradeAction($idClass) {
        $em = $this->getDoctrine()->getEntityManager();
        $dql = "SELECT u 
                FROM EcoliaFrontBundle:UserGrade ug,  
                EcoliaUserBundle:User u 
                WHERE ug.user = u 
                AND ug.grade = :id";
        $query = $em->createQuery($dql)->setParameter('id', $idClass);

        $students = $query->getResult();

        return $this->render('EcoliaFrontBundle:Evaluation:grade.html.twig', array('students' => $students));
    }

    public function studentAction($id) {
        $em = $this->getDoctrine()->getEntityManager();
        $dql = "SELECT u, ue 
                FROM EcoliaFrontBundle:UserEvaluation ue,  
                EcoliaUserBundle:User u 
                WHERE ue.user = u 
                AND u.id = :id";
        $query = $em->createQuery($dql)->setParameter('id', $id);

        $studentsEval = $query->getResult();

        var_dump($studentsEval);

        return $this->render('EcoliaFrontBundle:Evaluation:student.html.twig', array('students' => $studentsEval));
    }

} 
```

# birt - 平面文件数据源

> ID：10172679
> 
> 赞同：0
> 
> 时间：2012-04-16T10:48:06.557
> 
> 标签：birt

我是

对Birt很陌生

我的问题是

我的系统生成两个文件一个是包含标题

另一个包含标题值 columeA coumnB 现在我的问题是我想显示像 header1 ------------> value1 header2-------------> value2 这样的数据

是否可以通过平面文件数据源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:40:21.183

是的，有可能。有不同的方法，但我建议我已经应用并正在工作的一种方法。
步骤：
1> 创建 2 个数据源，第一个用于标头，第二个用于标头值
2> 创建 2 个数据集，第一个用于标头，第二个用于标头值
将标头数据集列名称设置为 header1 ，标头 2 ..将标头值数据集列名称
设置为 header1_value ， header2_value ..
3> 使用前面的 2 个数据集创建一个联合数据集，用完全外连接连接它们
4> 在设计器中拖放联合数据集
5> 将“标题”数据集绑定保留在表的标题行中。
6> 将“header value”数据集绑定保留在详细信息行中。

而已。

# c# - Settings.Default.Reload() 上的 StringCollection 更改

> ID：10172680
> 
> 赞同：0
> 
> 时间：2012-04-16T10:48:08.960
> 
> 标签：c#, visual-studio, .net-2.0

在我的应用程序`Settings.Default.test`中是一个`StringCollection`. 我不明白为什么这段代码

```
 StringCollection col = new StringCollection();
    col.Add("1\r\n2\r\n");
    Settings.Default.test = col;
    Settings.Default.Save();
    Settings.Default.Reload(); 
```

将我的文本更改`1\r\n2\r\n`为`1\n2\n`重新加载。它是默认行为还是什么？如何在我的应用程序重新启动时恢复我的文本框中的多行文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:19:03.453

将数据保存到 user.config 设置后，它将如下所示： (c:\users[username]\appdata\local[appname]..\user.config)

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <userSettings>
        <EmptyObjects.Properties.Settings>
            <setting name="Setting" serializeAs="Xml">
                <value>
                    <ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                        <string>1
2
</string>
                    </ArrayOfString>
                </value>
            </setting>
        </EmptyObjects.Properties.Settings>
    </userSettings>
</configuration> 
```

数据被序列化为 XML，然后反序列化为字符串。如果您需要保留信息，您可以：

*   使用标签`<br>`替换 \r 并在反序列化后替换为`<br>`\r..
*   或者实现自己的序列化[http://msdn.microsoft.com/en-us/library/8eyb2ct1(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8eyb2ct1(v=vs.80).aspx)

# javascript - 我可以为此目的使用正则表达式吗？

> ID：10172681
> 
> 赞同：3
> 
> 时间：2012-04-16T10:48:09.063
> 
> 标签：javascript, jquery, regex, validation

我试图通过确保只能输入文本、空格和数字来验证输入字段。我认为最简单的方法是通过执行以下操作来使用正则表达式：

```
function checkVal() {
var input = document.getElementById("input").value; 
if (input.match(/[a-zA-Z0-9]+$/) == null) {
    alert("error");
    }
} 
```

更具体地说，我需要确保下划线字符不在此字段中（这非常重要）。从测试来看，它似乎无法正常工作，但我认为更是如此，因为我可能出于错误的目的使用了正则表达式，而不是因为它在语法上不正确。

在该输入框中键入时，我编写一个排除“下划线”字符的函数会更容易吗？

编辑：为了更清楚一点，我只想接受字母、数字和空格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:49:46.380

不要忘记包含字符串的开头`^`（和空格）：

```
/^[a-zA-Z0-9 ]+$/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T10:57:10.103

尝试使用这个正则表达式：

```
/^[a-zA-Z0-9 ]+$/ 
```

i 表示不区分大小写：

编辑：

```
/^[a-z0-9 ]+$/i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:51:14.567

它看起来不像您在检查空格，而且您只是在检查以数字或字符结尾的字符串。

试试这个：

```
function checkVal() {
var input = document.getElementById("input").value; 
if (input.match(/^[ a-zA-Z0-9]+$/) == null) {
    alert("error");
    }
} 
```

# c - 如何将 strtol 与 char 而不是字符串一起使用来比较 if 语句中的 char

> ID：10172686
> 
> 赞同：1
> 
> 时间：2012-04-16T10:48:36.197
> 
> 标签：c, strtol

我花了很多时间阅读 c 教程并让这段代码编译/正常工作（因为我对 c 很烂），我想知道使用 strtol 的更清洁/更整洁的方式是什么，而不是`getchar(c)`然后更改`c`为数组`chstr[]`然后使用`strtol`on `chstr`。

感谢 Lachlan ps 感谢那些帮助我进行 isdigit 检查的人

```
int main()
{
    char c;

    while((c = getchar()) !=EOF) {
        if (!check_chr(c)) {
            return 0;
        }
    }

    return 1;
}

int check_chr(char c)
{
    int a; char chstr[2];
    if (isdigit(c)) {
        chstr[0] = c; chstr[1] = "/0";
        a = (strtol(chstr,0,0));
        i = i + a;
        return 1;
    }

    if (c == ',')
        return 1;

    if (c == '\n')
        return 1;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:53:55.933

要将包含单个数字的字符转换为二进制数，只需减去 的编码形式`'0'`。这是有效的，因为 C 保证字符编码在连续位置有 0..9。

```
int digit_to_number(char c)
{
  if (isdigit(c))
    return c - '0';
  return -1;
} 
```

这是因为 ín C,`'0'`是一个类型化的`int`（是的`int`，不是`char`你所期望的）表达式，它的计算结果是用于`0`在目标机器的编码中表示的值。对于本机运行例如[ASCII](http://en.wikipedia.org/wiki/ASCII)或 UTF-8 编码的机器，该值为（十进制）48。对于运行[EBCDIC](http://en.wikipedia.org/wiki/EBCDIC)的系统，该值为（十进制）240。

使用字符文字将字符数字转换为数字是编译器的问题，这当然是应该的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:53:03.973

好吧，您可以手动解析数字。像这样的东西：

```
if (c >= '0' && c <= '9')
    number = c - '0';
else
    // error: c is not a decimal digit. 
```

（放置您的错误处理代码而不是注释）

# antlr - 根据 ANTLR3 中解析器规则的可选部分重写规则

> ID：10172687
> 
> 赞同：1
> 
> 时间：2012-04-16T10:48:40.677
> 
> 标签：antlr, antlr3

我正在尝试根据上下文修改规则，并尽可能少地复制/粘贴。我最好从我想要实现的伪代码变体开始：

```
module[boolean isParam]: 'module' id=identity?
        declaration+ 
        update+
        'endmodule' -> ^(MODULE ({if (isParam)} IS_PARAMETER {else} $id) declaration+ update+); 
```

如果`isParam`设置了，我希望模块不匹配`identity`规则，但在其位置创建一个`IS_PARAMETER`令牌。我确信我可以使用两个单独`module`的规则来做到这一点，但是有没有一种更简洁的方法，代码重复更少，或者没有将`module`规则拆分为多个较小的规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:30:20.700

我相信这样的事情是有效的：

```
module[boolean isParam]: 'module' id=identity?
        declaration+ 
        update+
        'endmodule' -> {isParam}? ^(MODULE IS_PARAMETER declaration+ update+)
                    ->            ^(MODULE $id declaration+ update+); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T15:15:01.270

正如已经建议的那样，这将起作用：

```
module[boolean isParam]
 : 'module' id=identity? declaration+ update+ 'endmodule' 
   -> {isParam}? ^(MODULE IS_PARAMETER declaration+ update+)
   ->            ^(MODULE $id? declaration+ update+)
 ; 
```

*（但请注意可选`$id`！）*

但是通过查看您的规则，我得到的印象是，只要 an`identity`不*存在*，您就希望`IS_PARAMETER`在 AST 中有一个节点。如果是这种情况，您可以在没有参数和谓词的情况下处理它，这是 IMO 的首选：

```
module
 : 'module' ( identity declaration+ update+ 'endmodule' -> ^(MODULE identity declaration+ update+)
            | declaration+ update+ 'endmodule'          -> ^(MODULE IS_PARAMETER declaration+ update+)
            )
 ; 
```

# objective-c - 目标c比较范围相交

> ID：10172688
> 
> 赞同：11
> 
> 时间：2012-04-16T10:48:44.123
> 
> 标签：objective-c

我试图找到 2 个数字范围的交集，例如...

范围 A 是从 10 到 100，范围 B 是从 60 到 70

有没有一种简单的方法，无需编写大量 if 语句来计算两个范围的交集，因此在本例中为 10。

谢谢，

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-16T10:53:52.773

如果您拥有或制作`NSRange`对象，则[NSIntersectionRange](https://developer.apple.com/documentation/foundation/1413065-nsintersectionrange?language=occ)函数将为您执行此操作。只要确保在没有交叉点时检查它返回的内容。

```
NSRange a = NSMakeRange(10, 90);
NSRange b = NSMakeRange(60, 10);
NSRange intersection = NSIntersectionRange(a, b);
if (intersection.length <= 0)
    NSLog(@"Ranges do not intersect");
else
    NSLog(@"Intersection = %@", NSStringFromRange(intersection)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T10:54:00.937

您可以为此目的使用此方法：

```
NSRange NSIntersectionRange (
   NSRange range1,
   NSRange range2
); 
```

您可以在这里找到所有信息：

[NSIntersectionRange 苹果文档](https://developer.apple.com/documentation/foundation/1413065-nsintersectionrange?language=occ)

# asp.net - Facebook动词不更新

> ID：10172690
> 
> 赞同：0
> 
> 时间：2012-04-16T10:48:45.303
> 
> 标签：asp.net, facebook, facebook-graph-api

我遇到了一个问题，当我使用动词发布到时间线时，它会不断发布较旧的操作。

所以可以说我想在产品“鞋子”上创建一个“想要”的动作

它一直在创建我不久前完成的帖子“想要”“跳线”

我在这里输入了测试数据，但它仍然给我旧的“想要”“跳线”帖子。

任何想法将不胜感激。哦，动词仍在测试中，我还没有提交批准。

我的js如下

```
function want() {
    FB.api(
    "/me/appNamespace:Buy?product=http://appUrl/vendor/og/testOgWebsite.aspx",
    'post',
    function (response) {
        if (!response || response.error) {
            alert( JSON.stringify( response));
        } else {
            alert('Cook was successful! Action ID: ' + response.id);
        }
    });
} 
```

并继承了 testOgWebsite 页面上的元标记

```
<meta property="og:type" content="appNamespace:Buy">
<meta property="og:title" content="Test">
<meta property="og:url" content="http://appUrl/vendor/og/testOgwebsite.aspx">
<meta property="og:image" content="http://www.test.com/test.png">
<meta property="og:site_name" content="Test">
<meta property="fb:app_id" content="137964672905791"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:05:57.613

您可能对**Shoes**和**Jumper**使用了相同的 URL 。
每个对象都需要一个唯一的 URL。
但是，要解决您的问题，您可以使用[Facebook Linter](http://developers.facebook.com/tools/debug)更新 Facebook 的对象缓存。

# shell - 调用 Java 程序时在 shell 脚本中转义星号

> ID：10172692
> 
> 赞同：1
> 
> 时间：2012-04-16T10:48:56.690
> 
> 标签：shell, escaping, wildcard, arguments

我有一个简单的 java 程序，它只打印传递的参数

```
public class CmdArgsTest {
    public static void main(String[] args) {
        for(String arg : args){
            System.out.println(arg);    
        }
    }
} 
```

我正在从这样的 shell 脚本调用这个 java`setupTest.sh`程序 `java CmdArgsTest $*`

当我`setupTest.sh`用这些参数调用时，`*`会被目录中的所有文件名替换。

```
setupTest.sh -tt oracle -tn test_ora -sqlQuery "select * from myTable" 
```

即使我逃脱`*`了，`\`但论点通过了，`\*`而且并不`*`孤单。我也尝试过加上`*`引号，但这没有帮助。

我无法运行脚本，`java CmdArgsTest "$*"`因为所有命令都传递了一个大字符串。

任何帮助将不胜感激。

谢谢， 索拉布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:59:24.067

尝试转义美元 ( `$`) 符号

```
java CmdArgsTest "\$*" 
```

或使用单引号

```
java CmdArgsTest '$*' 
```

其他调用也是如此：

```
setupTest.sh -tt oracle -tn test_ora -sqlQuery 'select * from myTable' 
```

# sql-server - 如何检查 SQL 脚本是否与 sql server 2000 兼容

> ID：10172693
> 
> 赞同：1
> 
> 时间：2012-04-16T10:49:06.020
> 
> 标签：sql-server, sql-server-2005, syntax, sql-server-2000, sql-scripts

我为 SQL Server 2005 编写了很多脚本，但现在我必须重写那些原始脚本才能使它们在 SQL Server 2000 上运行。

我不记得 2005 年和 2000 年之间的所有差异。例如，`CTE`仅在 2005 年宣布 - 我必须重写这些查询才能在 SQL Server 2000 上工作。

我需要一种检查语法的方法，同时手头没有 SQL Server 2000。将兼容级别设置为 80 并不能解决问题 - 我没有收到任何警告，也没有错误。

**是否有用于检查脚本语法的工具？可以用 SSMS 2008 完成吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:59:16.757

您需要打开与执行命令的 SQL Server 2000 数据库的连接。

然后你只在连接中设置解析并“执行”命令。它不会被执行，但是，如果有任何语法问题，它会抛出相应的错误。

在执行命令的数据库中执行此操作很重要，因为它们依赖于数据库对象（例如，现有表名）。

这里有关于这个 SET 选项的信息：

[简单地设置](http://msdn.microsoft.com/en-us/library/aa259208%28v=sql.80%29.aspx)

# eclipse - Eclipse：无法保存文件 - “负时间”错误

> ID：10172694
> 
> 赞同：7
> 
> 时间：2012-04-16T10:49:08.260
> 
> 标签：eclipse

当我在 Eclipse 中保存文件时，它会引发错误：“保存所有失败 - 负时间”。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T22:50:45.590

不知道你是否解决了你的问题，但在这里给出一个答案，以防其他人偶然发现这个问题。

[我在这里](http://us.generation-nt.com/answer/bulk-change-file-modification-dates-help-199380491.html)看到一个类似的问题。

似乎您要保存的文件的时间戳记不好。尝试用另一个编辑器触摸文件以更新时间戳，然后看看它是否可以在 Eclipse 中工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-21T20:40:15.967

正如蒂姆所说，我的错误是没有修改日期的 XML。最简单的方法是使用记事本打开有错误的文件并重新保存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-18T04:39:39.790

谢谢蒂姆，r_19

**[我的解决方案]**

*   第一步：下载“SetFileDate v2.0”
*   第 2 步：安装后，选择选项卡“扫描文件夹”选择文件夹 Project Soure
*   第 3 步：单击“修改日期”按钮
*   第 4 步：在 Eclip 中刷新您的项目
*   第 5 步：完成

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T15:05:22.780

我遇到了同样的问题，尝试编辑它正在谈论的文件。原来是我下载的资源中的一些图形文件的创建日期为 1601 年。

# ios - 如何在 ios 中随着笔划大小的增加而划出一条线？

> ID：10172699
> 
> 赞同：1
> 
> 时间：2012-04-16T10:49:22.547
> 
> 标签：ios, path, drawing, stroke

我正在开发一个简单的绘画应用程序，如果我们使用描边路径

```
CGContextMoveToPoint(cacheContext, point1.x, point1.y);
CGContextAddCurveToPoint(cacheContext, ctrl1_x, ctrl1_y, ctrl2_x, ctrl2_y, point2.x, point2.y);
CGContextStrokePath(cacheContext); 
```

笔画大小保持不变，我希望我的笔画最终变宽

# jquery - 不使用 jsonp 从服务器检索 json 数据？

> ID：10172705
> 
> 赞同：0
> 
> 时间：2012-04-16T10:49:43.803
> 
> 标签：jquery, json, jsonp

我需要编写一个 JS，它能够从我工作的公司的服务器请求和显示 json 数据。该服务器仅代表 json 数据，它不处理任何回调函数，因此我无法通过 jsonp 请求。我尝试使用 jQuerys $.ajax 方法请求数据。服务器 json 对象的 url 是

```
http://localhost:8387/nscalemc/rest/mon/resourcestatus.json 
```

因此，JQuery 自动期望 jsonp 及其回调函数。当我将 dataType 设置为“json”时，请求不成功。当 dataType 设置为“jsonp”时，请求成功，但我收到“invalid label”错误并且无法处理数据。

如何在不更改服务器上的任何内容的情况下实现解决方案？是否可以使用 jQuery 或者我是否通过 XMLHttpRequest/XDomainRequest/... 提出请求？

提前感谢您的帮助！

# wpf - ListBox 显示水平图像 WPF

> ID：10172712
> 
> 赞同：3
> 
> 时间：2012-04-16T10:50:04.973
> 
> 标签：wpf, image, xaml, listbox

我正在尝试在 wpf/xaml 中创建一个控件，该控件将显示图像的水平列表。要固定的列表框的宽度（无滚动条）。添加新项目时，现有项目会减少显示的图像数量以适应它（实际图像不会仅减少显示的图像数量）。该功能类似于将新列添加到具有相对宽度属性（“*”）的网格中，并且该列包含具有固定宽度的图像。到目前为止，这是我的代码：

```
<Window.Resources>
    <ItemsPanelTemplate x:Key="ListBox_HorizontalItems">
        <StackPanel Orientation="Horizontal" />
    </ItemsPanelTemplate>

    <DataTemplate x:Key="ListBox_DataTemplate">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50" />
            </Grid.ColumnDefinitions>
            <Image Width="150" Source="{Binding ImageSource}" />
        </Grid>
    </DataTemplate>

    <Style x:Key="ListBox_Style_Horizontal" TargetType="ListBox">
        <Setter Property="Width" Value="150" />-->
        <Setter Property="ItemTemplate" Value="{StaticResource ListBox_DataTemplate}" />
        <Setter Property="ItemsPanel" Value="{StaticResource ListBox_HorizontalItems}" />
    </Style>
</Window.Resources>

<Grid>
    <ListBox Name="lbxImages" Style="{StaticResource ListBox_Style_Horizontal}" Width="250"  Height="100" />
</Grid> 
```

这非常接近我的需要！但是，当将新项目添加到列表中时，我无法弄清楚如何减少显示的图像数量。当前添加新项目时会出现滚动条。万一我没有很好地解释自己，这里有一些屏幕截图显示了我需要的功能：

![3 项](../Images/cbc8d32e90054f05195324eb02254392.png) ![4 项](../Images/d0495031e64dea1a28f81102622135a0.png) ![5 项](../Images/6670572a0cf860eb2e66cb17f510839e.png)

谁能告诉我如何实现这一目标？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T10:58:51.420

使用以下 UniformGrid 作为 ItemsPanel：

```
<ItemsPanelTemplate>
    <UniformGrid Columns="{Binding Path=Items.Count,RelativeSource={RelativeSource AncestorType={x:Type ListBox}}}"/>
</ItemsPanelTemplate> 
```

禁用水平滚动：

```
<ListBox ScrollViewer.HorizontalScrollBarVisibility="Disabled"> 
```

修改项目模板：

```
<DataTemplate>
    <Image Source="{Binding ImageSource}"
           Stretch="None"
           HorizontalAlignment="Center"/>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-22T13:15:45.437

我发现替换 ItemsPanelTemplate 并不足以摆脱滚动条，因为 ItemsPanelTemplate 嵌入在 ListBox 内某处的 ScrollViewer 中。您可能还需要删除该 ScrollViewer。

我替换了整个 ListBox 的模板：

```
<Style  TargetType="ListBox">        
    <Setter Property="Height" Value="Auto"/>
    <Setter Property="Width" Value="Auto"/>        
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate>
                <Border 
                    BorderBrush="Red" 
                    BorderThickness="1">
                    <UniformGrid  
                        IsItemsHost="True" 
                        Rows="1">                       
                    </UniformGrid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="ListBoxItem">                    
                <Setter Property="Width" Value="Auto"/>
                <Setter Property="VerticalAlignment" Value="Center"/>                    
                <Setter Property="VerticalContentAlignment" Value="Top"/>                    
                <Setter Property="Height" Value="25"/>
                <Setter Property="Padding" Value="5 0 5 0"/>
                <Setter Property="Background" Value="Transparent" />

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListBoxItem">
                            <Border                                   
                                Background="{TemplateBinding Background}"
                                SnapsToDevicePixels="True">
                                 <!-- Presenter for the UniformGrid: -->
                                <ContentPresenter
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                        <!-- triggers to indicate selection -->

                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

此外，无需找出 UniformGrid 中的列数。系统只使用 ListBoxItems 的数量。我认为 IsItemsHost="True" 会为您做到这一点。

# jquery - Jquery .show() - 显示的 div 下方的 div 不会向下滑动

> ID：10172714
> 
> 赞同：0
> 
> 时间：2012-04-16T10:50:15.897
> 
> 标签：jquery, css

我的asp页面中有2个div

```
<div id="leftcolotherdestinations" style="display:none;">
    <asp:Panel ID="pnlOtherDestinations" runat="server" CssClass="destinationpanel">
    </asp:Panel>
</div>
<div id="leftcolheaderupdates">
     Updates
</div> 
```

**当单击按钮时，**#leftcolotherdestinations与 jquery 一起显示。**到目前为止还可以。但是当显示#leftcolotherdestinations 时，**#leftcolheaderupdates**正在向下滑动，但是当动画完成时，它会在之前的位置向上移动。我希望它与上面的 div 一起下降。这是我的CSS；**

 **```
#lefcoltotherdestinations
{
    margin-top:20px;
    display:block;
    height:20px;  
    background-color:#D8D2CE;
}
#leftcolheaderupdates
{
    display:block;
    height:20px;  
    background-color:#D8D2CE;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:35:44.940

我通过移除外部 div 内的浮动元素（或使它们“未浮动”）解决了这个问题。感谢您的评论。**

# c++ - 如果稍后定义了返回对象的类，我应该如何从转换函数返回一个对象？

> ID：10172718
> 
> 赞同：1
> 
> 时间：2012-04-16T10:50:36.427
> 
> 标签：c++, type-conversion, return-type, data-conversion

```
class time24;
class time12
{
operator time24()
 {
  ...
  return time24(temp)   // error
 }
}

class time24
{
 ...
}; 
```

错误 C2440：“”：无法从“int”转换为“time24”

我还能如何返回对象来克服这个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:52:18.270

在实现文件中，在类定义之后移动实现：

```
//header.h
class time24;
class time12
{
    operator time24();
}

class time24
{
 ...
};

//implementation.cpp
#include "header.h"
time12::operator time24()
{
   return time24(temp)   // error
} 
```

我假设您打算实施`operator time24()`.

# nhibernate - Nhibernate - 将多个参数传递给负载收集

> ID：10172719
> 
> 赞同：2
> 
> 时间：2012-04-16T10:50:49.313
> 
> 标签：nhibernate

我在 .hbm.xml 中有使用 sql-query loader 的集合映射：

```
`<sql-query name="conpoints">
<load-collection alias="conpoint" role="Substation.ConnectionPoints" />
    SELECT {conpoint.*}
    FROM CONNECTIONPOINT AS conpoint
    WHERE (conpoint.substationID=:Id AND NOT conpoint.ID=:ReceiverConnectionPoint.Id)
</sql-query>` 
```

我需要同时传递 Id 和 ReceiverConnectionPoint.Id 参数。但是NH只接受其中之一。如何在sql-query中传递多个参数？

# macos - 我无法在 NSBezierPath 绘制的图中正确定位 NSTextField

> ID：10172723
> 
> 赞同：1
> 
> 时间：2012-04-16T10:51:09.327
> 
> 标签：macos, cocoa, nsview, nstextfield, nsbezierpath

我是初学者 Cocoa 程序员。我希望在要使用 XCode 4.3.2 for OS X on Lion 开发的程序中，以编程方式将 Cocoa NSTextField（自定义视图的子视图）放置在自定义视图上绘制的几何图旁边。为了使我的问题的示例保持简单，假设图表是一个包含文本字段的框（除了 NSTextField 可用的边框或边框之外，而且更远；实际上，我的图表更复杂）。我发现文本字段和框未按预期对齐（请参见下面的示例代码）。为什么？

我制作了一个简单的非基于文档的项目作为诊断示例，其中我将自定义视图拖到应用程序窗口中，添加了下面的代码，并建立了从 IBOutlet 到视图的连接：

AnAppDelegate.h：

```
#import <Cocoa/Cocoa.h>

@interface AnAppDelegate : NSObject <NSApplicationDelegate> {
    IBOutlet NSView *view;
    NSRect textFieldRect;
    NSTextField *textField;
    NSBezierPath *box;
}

@property (assign) IBOutlet NSWindow *window;

@end 
```

AnAppDelegate.m：

```
#import "AnAppDelegate.h"

@implementation AnAppDelegate

@synthesize window = _window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    textFieldRect = NSMakeRect(100, 100, 100, 20);
    textField = [[NSTextField alloc] initWithFrame:textFieldRect];

    NSRect frame = [textField frame];
    NSLog(@"frame %f %f %f %f", frame.origin.x, frame.origin.y, frame.size.width, frame.size.height);

    NSRect bounds = [textField bounds];
    NSLog(@"bounds %f %f %f %f", bounds.origin.x, bounds.origin.y, bounds.size.width, bounds.size.height);

    // Draw the text field
    [textField setStringValue:@"My text field"];
    [textField setBezeled:YES];
    [textField setDrawsBackground:NO];
    [textField setEditable:YES];
    [textField setSelectable:YES];
    [view addSubview:textField];

    // Draw a box (rectangle) around the text field
    //NSRect boxRect = [textField frame];
    box = [[NSBezierPath alloc] init];
    //boxRect.origin.x += 10;
    //boxRect.origin.y += 10;
    //boxRect.size.width += 20;
    //boxRect.size.height += 20;
    [box appendBezierPathWithRect:[textField frame]]; // :boxRect];
    [box stroke];

}

@end 
```

运行此程序时，该框出现在文本字段的左侧和下方，显然是每个维度中文本字段的高度。我希望它出现在 NSTextField 子视图的“下方”，并被它隐藏。（当然，这在生产程序中是不明智的。）

现在，为了更接近我想要的，如果取消注释上面源代码的注释行（将 boxRect 附加到框路径而不是文本字段的框架），那么我的框出现在文本开头 10 个单位框架 - 但我预计我应该必须在原点添加 -10 个单位才能做到这一点，而不是 +10 个单位。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:22:18.413

不深入定位，这里还有一些更大的问题需要解决。您在滥用 Cocoa 绘图系统。您不能（通常）只是`[box stroke]`在应用程序中的任何随机点开始绘制（就像那样）。您需要设置图形上下文。

为了在屏幕上绘图，您将代码放在自定义视图的`-drawRect:`方法中。框架将确保在调用该方法之前设置适当的上下文，然后将删除上下文。

我有点惊讶你的代码能正常工作，但因为它没有明确定义的图形上下文，所以我们无法知道相关坐标系在这里；绘图基本上是随机的。根据[Cocoa 绘图指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/Introduction/Introduction.html)重构您的代码，您可能会得到更好的结果。

顺便说一句，你评论

`// Draw the text field`

**不！** 您没有*绘制*文本字段；这是由框架在运行循环的下一轮`-drawRect:`调用各种视图时为您完成的。您正在*向视图层次结构中添加一个视图*。这不是一个迂腐的区别：您最多可以随时操纵视图层次结构（*）。您通常只能绘制`-drawRect:`.

(*)：线程使事情变得复杂，但如果您刚开始使用 Cocoa，这可能无关紧要。

# css - 可扩展的 div

> ID：10172725
> 
> 赞同：0
> 
> 时间：2012-04-16T10:51:21.363
> 
> 标签：css

**当div 1**展开时，我无法弄清楚如何让**div 4**保持相同的位置。所有的 div 都向左浮动，当我展开**div 1**以展开**div 2**时也会展开，在 2 和 4 之间留下一个空白空间。

 ******我不能将**div 1、3**和**div 2、4**包装在单独的 div 中

![例子](../Images/ccd3df94a0a06b5974e4e0eba4100a7e.png)

这是我用于 div 的样式：

```
 .subcatagory {
    float: left;
    width: 150px;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:57:17.717

这是**float**的问题。为此，您必须使用[Js masonry](http://masonry.desandro.com/)。否则你必须像这样定义你的标记：

```
<div class="parent">
    <div class="long">1</div>
    <div>3</div>
</div>
<div class="parent">
    <div>2</div>
    <div>4</div>
</div> 
```

检查这个[http://jsfiddle.net/XhMtK/1/](http://jsfiddle.net/XhMtK/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T11:11:47.550

以下将做你正在寻找的东西。我将所有原始 div 包裹在一个外部 div 中，设置它的宽度，使其只能容纳 2。然后我分类两个 div，类别（div1 和 div3 属于此类）和子类别，它们左右浮动。下面是一些代码来演示：

```
 <html>
 <head>
  <style type="text/css">
    #dvMain{
     width:305px;

    }

    .subcategory, .category{
      width: 150px;
      border:solid black 1px
    }

    .subcategory{
     float: right;
    }

    .category {
    float: left;
    }
  </style>
 </head>
 <body>
  <div id="dvMain">
    <div id="dv1" class="category">1asadssadsad
    sadsa
    ds
    adsad
    sa
    dsadsadsadsa
    </div>
    <div id="dv2" class="subcategory">2</div>
    <div id="dv4" class="subcategory">4</div>
    <div id="dv3" class="category">3</div>
  </div>
 </body>
</html> 
```******

# c# - Google Weather API 请求不起作用。请求超时

> ID：10172730
> 
> 赞同：2
> 
> 时间：2012-04-16T10:51:48.623
> 
> 标签：c#, google-api, google-weather-api

我有一个显示天气详细信息的简单小工具。

我正在使用这个 google api 通过其邮政编码获取任何地区的天气详细信息

```
"https://www.google.com/ig/api?weather=ZipCode" 
```

一切正常。但是现在，相同的代码给了我“请求超时”错误。我再说一遍，相同的代码给了我“请求超时”错误。

这些是我尝试通过网络服务获取天气详细信息的方法：

```
1\. xmlDoc.Load("https://www.google.com/ig/api?weather=" + ZipCode);

2\. using (WebClient client = new WebClient())
                {
                    var data = client.DownloadData("https://www.google.com/ig/api?weather=" + zipcode);
                    MemoryStream theMemStream = new MemoryStream();
                    theMemStream.Write(data, 0, data.Length);
                    xmlDoc.Load(theMemStream);
                } 
```

和其他几个（类似的）方法来获取 web 服务的响应（url 的内容）；

但无论如何，它都会给我同样的“请求超时”消息。

任何人都可以建议我..到底发生了什么？这一切都是在我对我的应用程序执行性能测试之后发生的。（不确定此信息是否有帮助）。

GUESS：（可能是因为从同一个 IP 地址生成了太多对 Web 服务的请求，谷歌阻止了我。如果是这样的话..现在该怎么办？？:)

注意：当我在浏览器地址中输入 url（带邮政编码）时，我会得到漂亮的 XML，其中包含我需要的所有信息）

请帮帮我..（我选择了谷歌API，因为它们的可靠性和“永远在线”的性质）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:54:11.507

请参阅以下有关[Google Weather API 403 错误](https://stackoverflow.com/questions/11878143/google-weather-api-403-error)的内容。

谷歌现在已经完全撤下了 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:55:08.120

我也很怀疑您是否通过了使用限制并被标记，但由于 Google Weather API 没有记录且非官方，因此很难知道。您确定要在代码中使用它吗？您想考虑切换到官方 API。Google 的天气 API 随时可能消失。

国家气象局作为您可能要考虑的网络服务。[http://graphical.weather.gov/xml/](http://graphical.weather.gov/xml/)

# c++ - 如何在 C++ 中将指针转换/转换为引用

> ID：10172735
> 
> 赞同：170
> 
> 时间：2012-04-16T10:52:03.797
> 
> 标签：c++, pointers, casting, reference, type-conversion

如何将指针 ( `Object *ob`) 传递给原型是的函数`void foo(Object &)`？

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2012-04-16T10:53:15.723

像这样称呼它：

```
foo(*ob); 
```

请注意，正如您的问题标题中所建议的那样，这里没有进行铸造。我们所做的只是取消引用指向对象的指针，然后将其传递给函数。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-04-16T10:54:02.953

```
foo(*ob); 
```

您不需要强制转换它，因为它是相同的 Object 类型，您只需要取消引用它。

# php - 在进入 MYSQL 之前从字符串中删除特定文本

> ID：10172737
> 
> 赞同：0
> 
> 时间：2012-04-16T10:52:13.030
> 
> 标签：php, mysql, arrays, insert

大家好，我有一个 PHP 数组，它来自一个带有 2 组数据的 rss 提要。标题和描述。

（数组打印示例，我想编辑数组中的所有描述项，而不仅仅是一个索引）

```
[2] => ('Remembrance','Release Date: Thursday 19th April 2012') 
```

我将如何操作描述字符串以在进入 mysql 表之前删除“发布日期：”？

这是我的其他代码：

```
$rss = simplexml_load_file('rss.xml');
$title = $rss->xpath('//title');  //finding the title tags in the xml document and loading into variable
$description = $rss->xpath('//description');

$rows=array();

foreach($result as $title){
  $rows[]="('".mysql_real_escape_string($title)."','".mysql_real_escape_string(array_shift($description))."')";
}
mysql_query("INSERT INTO Films (Film_Name, Film_Release) VALUES ".implode(',',$rows));
print_r($rows); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:59:09.263

你是`str_ireplace`不区分大小写的

例子

```
$rows = array ();
$array = array (); // So many array
$array [2] = array (
        'Remembrance',
        'Release Date: Thursday 19th April 2012' 
); // Sample array Value

foreach ( $array as $detail ) {
    $title = $detail [0];
    $desc = str_ireplace ( "Release Date:", "", $detail [1] );
    $desc = rim($desc);
    $rows [] = sprintf ( "('%s','%s')", mysql_real_escape_string ( $title ), mysql_real_escape_string ( $desc )   );
}

mysql_query("INSERT INTO Films (Film_Name, Film_Release) VALUES ".implode(',',$rows));
print_r($rows); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:00:41.763

如果您只是想删除“发布日期：”字符串，请使用`str_replace('Release Date: ', '', 'Release Date: Thursday 19th April 2012');`

`preg_replace()`如果您的数据是动态的，请使用：`preg_replace('#^[^\:] #', '', 'Release Date: Thursday 19th April 2012');`

# javascript - 当我打开 Twitter Bootstrap 模式时，如何更改查看背后页面的方式？

> ID：10172739
> 
> 赞同：1
> 
> 时间：2012-04-16T10:52:15.197
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在打开一个模态，但是当我这样做时，模态后面的页面会变得很暗。有人可以解释我如何改变这一点。例如，我怎么能做到，所以背景上只有一个非常浅的阴影。

我还注意到，当我单击背景时，我的模式消失了。有没有办法可以删除此功能。我希望我的模态仅在用户单击模态本身的提交或关闭时消失。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T20:23:06.567

如果您希望将背景保留在模态框后面*但*使背景完全透明，请设置透明背景颜色而不是更改不透明度：

```
.modal-backdrop, .modal-backdrop.fade.in { background-color: rgba(0,0,0,0); } 
```

这使您能够在不实际看到背景的情况下单击模态并关闭模态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:20:04.070

您正在寻找的是[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)模态背景静态以禁用背景点击关闭。

同样为背景黑暗调整

```
.modal-backdrop, .modal-backdrop.fade.in {
    opacity: 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-25T19:25:51.503

如果您使用的是 bs 3，则可以在链接中使用 data-backdrop="false" 属性，这样您就不必修改基本引导文件。

它在[文档中](http://getbootstrap.com/javascript/#modals-usage)

# wcf - 带有编码值的 Ws 绑定与基于 https 的基本 Http 绑定

> ID：10172744
> 
> 赞同：0
> 
> 时间：2012-04-16T10:52:27.477
> 
> 标签：wcf, web-services, security, wcf-binding

我有 WCF 服务。出于安全原因，我想加密发送到服务和从服务发送的消息。

该服务部署在带有证书的服务器上，因此我可以使用带有 HTTPS 的基本 http 绑定。但是，以前我使用 WS-Binding 使用编码值属性和从服务器上使用的证书生成的值。

ws 与编码值绑定是否有安全优势。如果基本的 http 绑定与 https 一起使用，会不会提供相同级别的保护？

# domain-driven-design - DDD 和批处理（例如使用 Spring 批处理）

> ID：10172747
> 
> 赞同：1
> 
> 时间：2012-04-16T10:52:35.493
> 
> 标签：domain-driven-design, spring-batch

我想将 Spring 批处理用于批处理应用程序。我已经有一个按照 DDD 设计的域模型。我的问题是批处理（在我的情况下，使用 Spring 批处理）如何适合 DDD？

例如，我有一个聚合根 A，它的一个子节点是实体 B。A 有一个包含一个或多个 B 的列表。当每行对应于 B 列表上的一个操作（添加、删除...）时，批处理应用程序会收到一个文件。在我的聚合根 A 中，每个操作都有一个方法（例如 addB、delB...）。使用 Spring 批处理，我应该使用哪个 ItemWriter？我不认为 JdbcBatchItemWriter 是合适的，因为我应该只通过域处理数据。是否有关于在批处理中使用 DDD 的最佳实践？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:12:52.590

我不会假装知道最佳实践到底是什么，但考虑到您的设计目标，这就是我的做法。而不是 A 和 B，假设我们有一个 File 对象，你的聚合，它包含许多行：

```
class File {
    public void addLine(Line l) {/* implementation here*/}
    public void removeLine(Line l) {/* implementation here*/}
}

class Line {
} 
```

让您的阅读器/处理器返回 LineOperations，封装您的行（您刚刚阅读）以及您是否正在执行添加/删除/其他：

```
interface LineOperation {
    public void execute(File file);
}

class DeleteOperation implements LineOperation {

    private Line line;

    private DeleteOperation(Line line) {
        super();
        this.line = line;
    }

    public void execute(File file) {
        file.removeLine(line);
    }
} 
```

AddOperation 的实现以及您可能需要的任何其他内容都留给想象。

接下来，我们会将 LineOperations 传递给您的作者。您的编写器对聚合文件执行操作，然后使用 FileRepository 写入聚合。

```
class LineOperationWriter implements ItemWriter<LineOperation>, StepExecutionListener {

    @Autowired;
    FileRepository fileRepo;

    private Long fileId;

    public void write(List<? extends LineOperation> items) throws Exception {

        File file = fileRepo.find(fileId);
        for (LineOperation lineOperation : items) {
            lineOperation.execute(file);
        }
        fileRepo.persist(file);

    }

    @Override
    public void beforeStep(StepExecution stepExecution) {
        this.fileId = (Long) stepExecution.getJobExecution().getExecutionContext().get("fileId");
    }

    @Override
    public ExitStatus afterStep(StepExecution stepExecution) {
        return null;
    }
} 
```

希望这可以帮助。

# c++ - 跨模块边界的异常，需要 -fPIC？

> ID：10172748
> 
> 赞同：1
> 
> 时间：2012-04-16T10:52:36.027
> 
> 标签：c++, g++, elf

我从一个共享库中抛出一个异常并将其捕获到另一个中。我控制所有源代码，所以应该没问题，我使用 g++4.4.5。首先，以下代码不起作用：

```
try
  {
// do something that throws tags::out_of_range in the other shared lib
  }
catch(const tags::out_of_range& e)
  {
cout << "out_of_range " << typeid(tags::out_of_range()).name() << endl;
cout << "out of range exception " << typeid(e).name() << endl;
  }
catch (const exception& e2)
  {
cout << "out_of_range " << typeid(tags::out_of_range()).name() << endl;
cout << "other exception " << typeid(e2).name() << endl;
  } 
```

我总是最终只捕获一个 std::exception。打印代码中看到的 typeid().name() 给出了可能的解释：

> 超出范围 FN4tags12out_of_rangeEvE
> 
> 其他异常 N4tags12out_of_rangeE

我们可以看到名称不匹配，如果我理解正确，当类位于不同的模块中时，名称实际上是字符串比较的动态转换。

所以在某处我读到尝试添加 -fPIC，突然它起作用了（意味着我发现了一个 out_of_range 异常），尽管打印名称仍然给出相同的结果。我认为与位置无关的代码不再重要，并查看有关 -fPIC 的 g++ 手册页：

> “此选项在 m68k、PowerPC 和 SPARC 上有所不同”

我使用的是 x86-64。在这种情况下，我真的看不出代码定位有何不同？此外，如果 typeid 名称是字符串比较，我认为我仍然会在 std::exception 子句中结束，因为即使使用 -fPIC 它们仍然不同？

所以问题是：为什么 -fPIC 有什么不同？

# ajax - JSF：何时将 ClientBehavior 添加到自己的组件

> ID：10172749
> 
> 赞同：3
> 
> 时间：2012-04-16T10:52:41.080
> 
> 标签：ajax, jsf, uicomponents

我正在开发一个包含 AJAX 客户端行为的组件。行为取决于提供给组件的参数（例如渲染和执行目标）。由于性能原因，我不想使用基于 facelet 的复合组件来实现组件。

我的问题是，何时应将客户端行为添加到组件中。如果我调用`addClientBehavior()`该`encodeBegin()`方法，我会收到一个`NullPointerException`in `UIComponentBase.restoreBehaviorsState()`。如果我在构建时添加行为，则 ajax 请求有效，但参数尚不可用。何时正确添加行为是否有合适的方法或事件？

我使用 mojarra 2.1.7。下面是我的组件的一个简短示例，没有动态 ajax 内容：

```
@FacesComponent(value="simpleTestLink")
public class SimpleTestLink extends HtmlCommandLink{

    private Logger logger=LoggerFactory.getLogger(getClass());
    private AjaxBehavior ajax;

    enum PropertyKeys{aProp};

    public SimpleTestLink() {
        logger.debug("SimpleTestLink created");
        // adding ajax here works, but no parameters available yet
        ajax = new AjaxBehavior();
        ajax.setExecute(Arrays.asList(new String[]{"@this"}));
        ajax.setRender(Arrays.asList(new String[]{"@form"}));
        addClientBehavior(getDefaultEventName(), ajax);

    }

    @Override
    public void encodeBegin(FacesContext context) throws IOException {
        logger.debug("encodeBegin num: " + getAttr());
        // adding ajax here fails
        super.encodeBegin(context);
    }

    @Override
    public boolean getRendersChildren() {
        return true;
    }

    @Override
    public void encodeChildren(FacesContext context) throws IOException {
        Object attr = getAttr();
        HtmlOutputText outputText = new HtmlOutputText();
        outputText.setValue("testlink["+ attr+"]\n");
        outputText.encodeAll(context);
        super.encodeChildren(context);
    }

    private Object getAttr() {
        return getAttributes().get(PropertyKeys.aProp.name());
    }

} 
```

感谢您的帮助，
詹斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:52:05.537

Yes, the 'suitable method or event' is called PreRenderViewEvent. I've blogged how to use it here: [http://blog.kennardconsulting.com/2010/10/safely-manipulating-component-tree-with.html](http://blog.kennardconsulting.com/2010/10/safely-manipulating-component-tree-with.html)

# java - 在正则表达式中添加变量以使其在java中动态化

> ID：10172753
> 
> 赞同：4
> 
> 时间：2012-04-16T10:52:53.430
> 
> 标签：java, regex, dynamic

我需要形成一个正则表达式来检查响应日志的输出。日志文件将始终根据输入而有所不同。因此，我想根据函数的输入创建一个*动态正则表达式。*我可能需要一次传递可变数量的变量进行比较，那么如何在正则表达式中插入“或”因子？

是否可以在 Java 中创建这样的正则表达式，我应该如何去做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:00:10.420

是的，正则表达式只是一个字符串，您可以将用户输入连接到常量部分，然后从中创建一个模式。

如果您想逐字匹配用户输入，则应使用正则表达式对其`Pattern.quote("UserString")`进行[转义](https://stackoverflow.com/questions/60160/how-to-escape-text-for-regular-expression-in-java)。

**例子：**

```
String UserInput = "Bar()";
String Prefix = "Foo";

Pattern p = Pattern.compile(Prefix + Pattern.quote(UserInput));

String s1 = "FooBar()";
String s2 = "FooBarNo";

String[] s = { s1, s2};

for (String a : s) {
    Matcher m = p.matcher(a);
    if (m.find())
        System.out.println(a + " ==> Success");
    else
        System.out.println(a + " ==> Failure");
} 
```

**输出：**

> FooBar() ==> 成功
> FooBarNo ==> 失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-27T21:30:59.853

我认为你可以通过连接来做到这一点。例如：“你的正则表达式”+“{”+输入+“}”。

# emacs - 启动时 Emacs 中的三个均匀大小的窗口

> ID：10172760
> 
> 赞同：3
> 
> 时间：2012-04-16T10:53:22.577
> 
> 标签：emacs, configuration, window, split, size

我想将 Emacs 设置为最大化（或特定大小）并在启动时将我的窗口水平分成三个大小相同的框架。

我发现了其他类似但不完全的问题，[Q1](https://stackoverflow.com/questions/10097321/specify-window-layout-in-emacs-on-commandline)和[Q2](https://stackoverflow.com/questions/4987760/how-to-change-size-of-split-screen-emacs-windows)。

谢谢你。

编辑：最大化，而不是全屏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T13:22:32.837

要拥有相同大小的窗口，您可以使用命令`balance-windows`（绑定到`C-x +`交互式使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T12:02:55.290

好的，这就是我想出的，会有更优雅的方式。尽管如此，这是你想要的。

```
 (defun split-windows-even-3 ()
    "split into 3 evenly"
    (interactive)
    (save-excursion
      (let ((ps (window-width)))
        (split-window-horizontally (/ ps 3))
        (other-window 1)
        (split-window-horizontally (/ ps 3)))))

  ;;; ADD HOOKS to startup
  ;;  split three
  (add-hook 'emacs-startup-hook 'split-windows-even-3)

  ;; Fullscreen 
  (add-hook 'emacs-startup-hook (lambda ()
                                  (set-frame-parameter nil 'fullscreen 'fullboth))) 
```

更新：现在它的工作 emacs23 和 emacs24

# c# - 在 C# 中将基实例转换为派生类（向下转换）

> ID：10172767
> 
> 赞同：8
> 
> 时间：2012-04-16T10:53:50.203
> 
> 标签：c#, downcast

假设我有两个类：

```
class Employee 
```

和

```
class AdvancedEmployee:Employee 
```

我知道这样的事情是行不通的，因为我不能对 C# 失望：

```
var employee = new Employee();
var advanced = employee as AdvancedEmployee; 
```

我的问题是：如何以有效的方式完成沮丧？实际上，我在 AdvancedEmployee 上有一个构造函数，它以 Employee 作为参数并使用它来注入其值，基本上是进行克隆。

* * *

更新

为了解决会被重复的数据，我稍微改变了方法，现在 AdvancedEmployee 包含一个员工，而不是一个员工本身。例子：

```
class Employee;

class AdvancedEmployee
{
   private employee

   public AdvancedEmployee(Employee employee){

    this.employee = employee

  }           

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T10:57:43.600

它不能是*强制转换*，它实际上是不同类型之间的*转换。*

我会添加一个 ctor 或静态成员函数，例如`AdvancedEmployee FromBase(Employee e)`，从给定的基类型*构造*派生类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T11:10:15.963

创建一个接口。由于您无法修改 Employee，因此请创建一个您拥有的[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)：

```
class EmployeeAdapter : IEmployee
{
    private Employee emp;
    public EmployeeAdapter(Employee emp) { this.emp = emp; }
    public int SomeMethodInEmployee() { return emp.SomeMethodInEmployee(); }
}

class AdvancedEmployee : IEmployee { } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-20T19:58:33.413

这是我过去处理过的一种方法，我认为这很酷...如果 Employee 和 AdvancedEmployee 中的所有数据元素都是属性，那么您可以使用反射将数据值从基类复制到派生类. 然后，您可以使用派生类，就好像他最初是以这种方式键入的，而不必封装基类。

```
public class Employee
{
    public int ID { get; set; }
    public string Foo { get; set; }

    public void SomeMethod() { }
}

public class AdvancedEmployee : Employee
{
    public string Bar { get; set; }

    public void SomeAdvMethod() { }
}

Employee emp = new Employee() { ID = 5, Foo = "Hello" };

// To create a AdvancedEmployee from emp
AdvancedEmployee advEmp = new AdvancedEmployee() { Bar = "A prop not in Emp that might need a value" }
foreach (var p in typeof(Employee).GetProperties(BindingFlags.Public | BindingFlags.Instance).Where(x => x.CanWrite))
    typeof(AdvancedEmployee).GetProperty(p.Name).SetValue(advEmp, p.GetValue(emp)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T10:59:16.897

创建一个新对象是最易读和最清晰的方法。您还可以在 Employee 类中定义显式或隐式类型转换运算符。

```
public static explicit operator AdvancedEmployee(Employee e)
{
    return new AdvancedEmployee(e);
} 
```

然后像这样使用它：

```
var e = new Employee();
var ae = (AdvancedEmployee) e; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T10:58:02.053

`as`在 C# 中检查*运行时类型*。也就是说，如果被测试的对象确实不是`AdvancedEmployee`，你不会让它神奇地转换`Employee`为`AdvancedEmployee`. 所以如果你需要一个`AdvancedEmployee`，你需要以某种方式自己构建它。

根据您要实现的目标，有不同的方法。也许您可以使用构造函数`AdvancedEmployee(Employee proto)`，它将从`proto`? 或者，也许您需要`Employee`用`AdvancedEmployee`.

请注意，您可能需要让存储旧员工的代码将其替换为新创建的`AdvancedEmployee`.

一种可行的方法（带有一些 Java 风格）可能是创建一个工厂，如果需要`Employee`，它将创建一个。`AdvancedEmployee`然后你需要让所有代码都使用工厂而不是创建一个`Employee`with `new`。但是，如果您仍然需要更改运行时类型，这种情况将无济于事。

# actionscript-3 - 如何检查同一浏览器中的任何其他 Flash 应用程序是否已在使用相机？

> ID：10172780
> 
> 赞同：1
> 
> 时间：2012-04-16T10:54:24.743
> 
> 标签：actionscript-3, apache-flex, camera

我在同一个网页上有两个 Flash 应用程序。假设一个已经在访问相机，那么如果我点击第二个应用程序，它将直接开始使用相机。我不想要这个。我需要检查是否有任何其他 Flash 应用程序已经在同一网页中访问相机。让我告诉你，我们不能使用 Camera.getCamera() 并检查 camera==null，这不起作用，因为相机可用。那么您能帮我检查一下父浏览器或同一网页中的任何其他 flex 应用程序是否访问了相机吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:57:16.737

如果您拥有包含 Flash 对象的网页，则可以使用 JavaScript，通过`ExternalInterface`，来监控哪个摄像头已启动或未启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:00:32.490

您还可以使用`LocalConnection`在两个 SWF 之间直接进行通信。

# spring - 为 JpaTransactionManager 启用日志记录

> ID：10172787
> 
> 赞同：4
> 
> 时间：2012-04-16T10:54:47.693
> 
> 标签：spring, hibernate, spring-data

我在 Spring 3.5 容器中使用 JpaTransactionManager 和休眠 3。我无法为 JPA 启用日志记录。我希望查看用于调试我的一些服务的事务管理日志。我正在使用 log4j。

这是我的 log4j.properties 中的内容

```
# For JPA
log4j.logger.org.springframework.orm.jpa=DEBUG
log4j.logger.org.springframework.orm.jpa.JpaTransactionManager=DEBUG
log4j.logger.org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter=DEBUG
log4j.logger.org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean=DEBUG
log4j.logger.org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor=DEBUG
log4j.logger.org.springframework.transaction=DEBUG
log4j.logger.org.springframework=DEBUG
log4j.logger.org.hibernate=DEBUG
log4j.logger.org.hibernate.SQL=DEBUG

# Redirect log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\apps\application.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=5
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger option
log4j.rootLogger=ALL, file 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-22T12:19:02.433

事务日志可以通过以下方式具体设置`log4j.properties`：

```
log4j.logger.org.springframework.orm.jpa.JpaTransactionManager=DEBUG 
```

在此上下文中感兴趣的其他日志：

```
log4j.logger.org.hibernate.transaction=DEBUG
log4j.logger.org.springframework.transaction=DEBUG 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:56:08.277

在为 JPATransactionManager 启用日志记录方面，这对我有用： 1\. 下载 logback jars (logback-classic-1.0.1.jar, logback-core-1.0.1.jar) 并放入类路径。由于我使用的是 SLF4J，所以我也有 log4j-over-slf4j-1.6.4.jar 和 slf4j-api-1.6.4.jar。2\. 使用以下 logback.xml（在 WEB-INF/classes 中）进行配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<appender name="stdout" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
        <pattern>
            %d %p [%c] - &lt;%m&gt;%n
        </pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
        <level>DEBUG</level>
    </filter>
</appender>

<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${catalina.home}/logs/application.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>${catalina.home}/logs/application-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
        <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
            <maxFileSize>20MB</maxFileSize>
        </timeBasedFileNamingAndTriggeringPolicy>
    </rollingPolicy>

    <encoder>
        <pattern>
            %d %p [%c] - &lt;%m&gt;%n
        </pattern>
    </encoder>
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
        <level>ALL</level>
    </filter>
</appender>

<logger name="org.hibernate.transaction.JDBCTransaction" level="DEBUG"/>
<logger name="org.hibernate.jdbc.ConnectionManager" level="DEBUG"/>
<logger name="org.springframework.orm.jpa.JpaTransactionManager" level="DEBUG"/>

<root level="ERROR">
    <appender-ref ref="FILE"/>
</root>
</configuration> 
```

# php - 需要 $_POST 的 $_GET 调用的 Jquery + PHP 函数

> ID：10172795
> 
> 赞同：0
> 
> 时间：2012-04-16T10:56:03.223
> 
> 标签：php, jquery, ajax, function

我有一个这样的 PHP 函数：

```
function setUser()
{
    $userName=$_POST['userName'];
    $userSurname=$_POST['userSurname'];
    //code...
} 
```

我使用如下地址调用此函数： ?index.php&module=registration

那么，我如何用 jquery $_GET['module'] 调用来调用 setUser(); 函数并将其传递给我需要的所有 POST 参数？你能给我举个例子吗？

感谢和抱歉我的英语不好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:01:44.877

```
$("#button").click(function(e){
    //e.preventDefault();
    $.post('index.php?module=registration',{
        userName: 'test',
        userSurname: 'test'},
        function(data){
             //callback;
    });
} 
```

这将是一个简单的 jquery 脚本来发布数据。大概您将从某些页面字段中动态获取 post 参数的值并将其提供给 post 函数（类似于`$("#name").val()`）。更多信息在[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

我还添加了单击事件，因为您很可能会将其附加到一个按钮上，单击该按钮将发布数据（如果您使用的是提交按钮，则必须取消注释 preventDefault 行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:00:34.477

`type`在你的ajax调用中设置为`POST`

```
$.ajax({
    type: 'POST',
    url: 'index.php',
    data: { module: 'registration' }
}).done( function( data ) {
     // do something if needed
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:10:07.583

要使用 jquery获取参数，`location.search`请通过简单的字符串操作来操作并获取所需的任何参数。

& 然后用于发布值使用 jquery ajax：

```
$.ajax({
    type: 'POST',
    url: 'index.php',
    data: { userName: 'test', userSurname: 'test' },
    success: function(return_value) {
        //values returned from ajax
    }
}); 
```

# jquery - ColorBox 在 IE 和 Firefox 中出现故障

> ID：10172796
> 
> 赞同：0
> 
> 时间：2012-04-16T10:56:06.333
> 
> 标签：jquery, colorbox

我直接使用 ColorBox 来显示九张图像。它在 Chrome 中运行良好，但在 Firefox 和 IE 中则不然。

在这两种浏览器中，当每个连续的图像加载时，它显示的比前一个低大约 70px，所以当我到达最后一个图像时，它在页面的第一个屏幕上不再可见。我必须向下滚动才能找到它。

我已经在[http://www.lakesidesurrey.co.uk/group/biog/index.html](http://www.lakesidesurrey.co.uk/group/biog/index.html)上传了我的页面。

我正在使用 HTML 4.01 过渡 DTD。

将不胜感激任何帮助纠正这一点。

谢谢特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:04:24.190

您可能想用新的 jquery.colorbox.js 替换当前的 jquery.colorbox.js。我刚刚提交了一个错误修复，可能会解决您的问题。

# c++ - WaitForMultipleObjects 在 64 位窗口上崩溃

> ID：10172797
> 
> 赞同：1
> 
> 时间：2012-04-16T10:56:06.440
> 
> 标签：c++, windows, multithreading, 64-bit

考虑下面的代码：

```
for (int i = 0; i < thread_number; i ++)
    hThreadArray[i] = CreateThread( 
            0,                   
            0,                      
            single_thread_function_name,      
            (LPVOID)i,                      
            0,                      
            &dwThreadIdArray[i]);   

WaitForMultipleObjects(thread_number, hThreadArray, TRUE, INFINITE); 
```

它在 32 位平台上正常工作，但在 64 位平台上崩溃。

崩溃发生在 WaitForMultipleObjects 函数中。

有人知道我在做什么错吗？

编辑： hThreadArray 被声明为：

```
HANDLE*  hThreadArray;
hThreadArray = (HANDLE*) malloc (thread_number * sizeof(HANDLE)); 
```

single_thread_function_name 为：

```
DWORD WINAPI single_thread_function_name( LPVOID lpParam ){
.....
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:11:15.433

hThreadArray 不是数组，只是一个指针，它肯定会崩溃。它在 32 位平台上的工作方式很奇怪。

由于 hThreadArray 是 malloced，可能不符合 64 位对齐要求。尝试：

```
HANDLE hThreadArray[100] = {0}; 
```

# .net - .net 中是否有代表“范围”的标准类？

> ID：10172800
> 
> 赞同：7
> 
> 时间：2012-04-16T10:56:07.763
> 
> 标签：.net, design-patterns, range

我们有很多代码，其中包含价格、利润、成本等的“最小值”和“最大值”。目前，它们作为两个参数传递给方法，并且通常具有不同的属性/方法来检索它们。

在过去的几十年里，我已经看到了 101 个自定义类来存储不同代码库中的值范围，在我创建另一个这样的类之前，我希望确认现在的 .NET 框架没有**内置**这样的类某处。

*（如果需要，我知道如何创建自己的课程，但我们已经有太多的轮子了，我无法一时兴起发明另一个）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:57:35.913

没错，在 2020 年之前，C# 或范围的 BCL 中没有内置类。但是，`TimeSpan`BCL 中有用于表示时间跨度的内容，您可以另外使用 a 组合`DateTime`来表示时间范围。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T12:38:42.597

AFAIK .NET 中没有这样的东西。不过，想出一个通用的实现会很有趣。

构建一个通用的 BCL 质量范围类型需要做很多工作，但它可能看起来像这样：

```
public enum RangeBoundaryType
{
    Inclusive = 0,
    Exclusive
}

public struct Range<T> : IComparable<Range<T>>, IEquatable<Range<T>>
    where T : struct, IComparable<T>
{
    public Range(T min, T max) : 
        this(min, RangeBoundaryType.Inclusive, 
            max, RangeBoundaryType.Inclusive)
    {
    }

    public Range(T min, RangeBoundaryType minBoundary,
        T max, RangeBoundaryType maxBoundary)
    {
        this.Min = min;
        this.Max = max;
        this.MinBoundary = minBoundary;
        this.MaxBoundary = maxBoundary;
    }

    public T Min { get; private set; }
    public T Max { get; private set; }
    public RangeBoundaryType MinBoundary { get; private set; }
    public RangeBoundaryType MaxBoundary { get; private set; }

    public bool Contains(Range<T> other)
    {
        // TODO
    }

    public bool OverlapsWith(Range<T> other)
    {
        // TODO
    }

    public override string ToString()
    {
        return string.Format("Min: {0} {1}, Max: {2} {3}",
            this.Min, this.MinBoundary, this.Max, this.MaxBoundary);
    }

    public override int GetHashCode()
    {
        return this.Min.GetHashCode() << 256 ^ this.Max.GetHashCode();
    }

    public bool Equals(Range<T> other)
    {
        return
            this.Min.CompareTo(other.Min) == 0 &&
            this.Max.CompareTo(other.Max) == 0 &&
            this.MinBoundary == other.MinBoundary &&
            this.MaxBoundary == other.MaxBoundary;
    }

    public static bool operator ==(Range<T> left, Range<T> right)
    {
        return left.Equals(right);
    }

    public static bool operator !=(Range<T> left, Range<T> right)
    {
        return !left.Equals(right);
    }

    public int CompareTo(Range<T> other)
    {
        if (this.Min.CompareTo(other.Min) != 0)
        {
            return this.Min.CompareTo(other.Min);
        }

        if (this.Max.CompareTo(other.Max) != 0)
        {
            this.Max.CompareTo(other.Max);
        }

        if (this.MinBoundary != other.MinBoundary)
        {
            return this.MinBoundary.CompareTo(other.Min);
        }

        if (this.MaxBoundary != other.MaxBoundary)
        {
            return this.MaxBoundary.CompareTo(other.MaxBoundary);
        }

        return 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T11:04:37.420

我已经开始自己制作了。

```
public class Range<T> where T : IComparable
{
    private readonly T start;

    private readonly T end;

    public Range(T start, T end)
    {
        if (start.CompareTo(end) < 0)
        {
            this.start = start;
            this.end = end;
        }
        else
        {
            this.start = end;
            this.end = start;
        }
    }

    public T Start
    {
        get
        {
            return this.start;
        }
    }

    public T End
    {
        get
        {
            return this.end;
        }
    }

    public static bool Intersect(Range<T> a, Range<T> b)
    {
        return !(b.Start.CompareTo(a.End) > 0 || a.Start.CompareTo(b.End) > 0);
    }

    public bool Intersect(Range<T> other)
    {
        return Intersect(this, other);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-20T16:04:05.090

.Net Core 3.0 改变了这一点，请参见[System.Range](https://docs.microsoft.com/en-us/dotnet/api/system.range?view=netcore-3.0)。
C# 8 还具有[创建范围的语言支持](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-8.0/ranges)。

另请参阅“[什么是 c# 8 中的范围和索引类型？](https://stackoverflow.com/questions/55167287/what-is-range-and-index-types-in-c-sharp-8) ” Stackoverflow 问题。

请注意，这些仅支持整数范围，不支持双精度或浮点范围。

# entity-framework-4 - EF4 mvc .net 4 中等信任 MetadataException

> ID：10172805
> 
> 赞同：0
> 
> 时间：2012-04-16T10:56:47.300
> 
> 标签：entity-framework-4, asp.net-4.0, medium-trust

我有一个使用 EF4 实体模型（生成数据库）的 MVC .NET 4.0 Web 应用程序。`full trust`一切正常，但是当`medium trust`代码尝试访问模型时会引发此异常；

```
Schema specified is not valid. Errors: 
Models.Model.ssdl(2,89) : error 0002: Request failed. 

[MetadataException: Schema specified is not valid. Errors: 
Models.Model.ssdl(2,89) : error 0002: Request failed.]
   System.Data.Metadata.Edm.Loader.LoadItems(IEnumerable`1 xmlReaders, IEnumerable`1 sourceFilePaths) +11108232
... 
```

这是我的连接字符串；

```
res://Manager/Models.Model.csdl|res://Manager/Models.Model.ssdl|res://Manager/Models.Model.msl 
```

它在完全信任下工作，所以我错过了我的中等信任的一些许可吗？

# java - 如何将一个类变量用于另一个类

> ID：10172806
> 
> 赞同：0
> 
> 时间：2012-04-16T10:56:51.970
> 
> 标签：java, class, variables

我是java编码的新手......我正在尝试实现一个说明多任务处理的程序。在编程时我被一个小任务打动了，我无法找到它的方法。进入详细信息，我有 3 个类，如果我单独声明变量，我可以成功完成我的任务，但我想要这样一种要求，我想在另一个类中使用一个类的变量。即使我声明了变量作为公众，它抛出异常/错误。这是我的实现代码，以便专家清楚地理解！

```
class TrainReservation extends Thread
{
    public int trainAvailability=1, bearthAvailability=1;
    int noOfSeats;
    TrainReservation(int noOfSeats)
    {
        this.noOfSeats=noOfSeats;
    }
    public void run()
    {
        if((trainAvailability >= noOfSeats) && (bearthAvailability >= noOfSeats))
        {
            System.out.println("seat is reserved");
            trainAvailability=trainAvailability-noOfSeats;
            bearthAvailability=bearthAvailability-noOfSeats;
            System.out.println(trainAvailability);
        }
        else
            System.out.println("no seats available");
    }
}
class TrainReservationCancel extends Thread
{
    int trainAvailability;
    trainAvailability=tr.trainAvailability;
    int noOfSeats;
    TrainReservationCancel(int noOfSeats)
    {
        this.noOfSeats=noOfSeats;
    }
    public void run()
    {
        if(noOfSeats!=0)
        {
            bearthAvailability=bearthAvailability+noOfSeats;
            trainAvailability=trainAvailability+noOfSeats;
            System.out.println(bearthAvailability);
        }
    }
}
class MainClass
{
    public static void main(String[] args)
    {
        TrainReservation tr=new TrainReservation(2);
        TrainReservationCancel tr1=new TrainReservationCancel(1);
        Thread obj=new Thread(tr);
        tr.start();
        Thread obj1= new Thread(tr1);
        tr1.start();
    }
} 
```

这是错误所在的屏幕截图

![在此处输入图像描述](../Images/a5d55b04e43e3351d8970e3486208fd9.png)

任何帮助对我来说都会很棒，并表示赞赏。

提前谢谢大家:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:28:18.620

trainAvailability=tr.trainAvailability; tr 未在此类中声明

如果您在线程环境中执行此操作并读取变量，则最好将它们声明为 volatile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:01:28.603

你得到一个编译错误，而不是一个有助于知道包括哪一行的异常。

您正在使用`tr`但没有将其传递给 TrainReservationCancel 类。

尝试更改您的构造函数以获取 TrainReservation

```
TrainReservationCancel(int noOfSeats, TrainReservation tr)
{
    this.noOfSeats=noOfSeats;
    this.trainAvailability=tr.trainAvailability;
} 
```

主要是

```
TrainReservation tr=new TrainReservation(2);
TrainReservationCancel tr1=new TrainReservationCancel(1, tr); 
```

顺便说一句：你想让你的课程`implements Runnable`而不是`extends Thread`

# php - 如何在 PHP 中制作小数上标或下标？

> ID：10172809
> 
> 赞同：1
> 
> 时间：2012-04-16T10:57:13.037
> 
> 标签：php, subscript, superscript, decimal

我有这个代码：

```
<?php echo $price; ?> 
```

这给了我这个结果：

```
1,500.99 
```

有什么办法可以让小数上标或下标？

谢谢。

**编辑：**这段代码就像一个魅力（感谢大卫托马斯）：

```
$parts = explode('.', $price); 
echo "$parts[0].<sup>$parts[1]</sup>"; 
```

但如果我的价格是这样的：1,500.99€，它也会在€符号上标上标。这可以阻止吗？如果它不是数字，则不上标，或者在点后仅上标 2 个字符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T11:01:22.963

这目前未经测试，但我认为这很简单：

```
$parts = explode('.', $price);
echo "$parts[0].<sup>$parts[1]</sup>"; 
```

参考：

*   [`explode()`](http://php.net/manual/en/function.explode.php).
*   [`<sup></sup>`](https://developer.mozilla.org/en/HTML/Element/sup).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T10:59:38.807

您可以使用 html sub 和 sup 标签： [http ://www.w3schools.com/tags/tryit.asp?filename=tryhtml_sup](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_sup)

示例代码可以是：

```
echo preg_replace('/\.([0-9]*)/', '<sup>.$1</sup>', $price); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:03:49.483

使用 HTML 和 CSS，下面是一个示例：

```
<style type="text/css">
.superscript {
    font-size: xx-small;
    vertical-align: top;
}
.subscript {
    font-size: xx-small;
    vertical-align: bottom;
}
</style>

<body>

<table>
<td class="superscript"><?php echo $price ?></td>
<td class="subscript"><?php echo $price ?></td>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:06:58.313

检查此代码：

```
<?php
$val = 10009.99;
echo set_sub_dec($val);

function set_sub_dec($val,$type="sub",$attrib=""){//use "sub" or "sup" or any other HTML tag with attributes
    if(!is_string($val)){
        $val = strval($val);
    }

    $val = split("\.",$val);

    return $val[0].".<$type $attrib>".$val[1]."</$type>";
}

?> 
```

# qt - QImage 和 QPixmap 图像显示不正确

> ID：10172815
> 
> 赞同：1
> 
> 时间：2012-04-16T10:57:28.847
> 
> 标签：qt, opencv, qpixmap

我在 Ubuntu 上使用 QT 运行 OpenCV，并且在使用 QLabel 显示图像时遇到了问题。如果我使用代码：（其中“图像”是由 dcraw 创建的 Mat）：

```
Mat img_display;

cv::cvtColor(image,img_display,CV_BGR2RGB); 

imwrite("test.jpg",img_display);

QImage img=QImage("test.jpg");  // QImage assignment

QPixmap pixmap(QPixmap::fromImage(img));

widget.image_label->setPixmap(pixmap); 
```

图像以彩色输出，完全符合我的预期。

但是，当我将 QImage 分配替换为使用“img_display”而不是 .jpg 文件时，我的图像显示从原点的右侧开始，并且有一个三角形覆盖了显示图像的右下角。这个三角形看起来像是图像 LHS 中缺失位的一半。我尝试使用的分配代码是：

```
QImage img=QImage(
    (uchar*)(img_display.data),
    img_display.cols,
    img_display.rows,
    QImage::Format_RGB888); 
```

图像来自原始 18.2mb cr2 文件，由 dcraw 创建。test.jpg 是 3.1mb

对于任何反馈，我们都表示感谢。

# apache - 如何做一个搜索引擎？

> ID：10172817
> 
> 赞同：-3
> 
> 时间：2012-04-16T10:57:37.500
> 
> 标签：apache, solr, search-engine

我不知道我问的问题是否正确，但我被困得很厉害。我想为我最后一年的项目制作自己的搜索引擎。此外，我对网络引擎进行了大约一个月的研究。我遇到了 nutch、lucene、solr、xapian、yaCy。但这还不够。我也知道我需要一个解析器、一个索引器、一个爬虫和一个页面排名算法，但是有很多东西要开始，我不知道从哪里开始。

我所需要的只是某种教程或书籍，我可以在其中找到有关这些术语（索引器、爬虫等）以及如何逐步实现这些 apache 项目以及我应该选择使用哪个 apache 项目的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:14:57.120

试试这个[http://blog.building-blocks.com/building-a-search-engine-with-nutch-and-solr-in-10-minutes](http://blog.building-blocks.com/building-a-search-engine-with-nutch-and-solr-in-10-minutes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:30:46.437

如果您需要搜索引擎，请查看[OpenSearchServer](http://www.open-search-server.com/)，这是一个基于 lucene 的搜索引擎，具有许多功能。阅读文档。

如果你打算自己写。您正在尝试重新发明轮子。请尝试阅读《 [信息检索简介》一书。](http://nlp.stanford.edu/IR-book/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:27:38.140

您将需要类似 solr 的东西来执行搜索，然后您可以将权重应用于不同的字段，例如元标题。您需要查看部分文档的添加和更新。

您还需要一些东西来抓取网站以创建索引。您可以按照 siva 帖子中的示例进行操作。

如果您想自己编写，可以使用 python 或 curl 站点。找到所有链接并启动更多流程来收集信息。

solr [http://wiki.apache.org/solr/SolrInstall](http://wiki.apache.org/solr/SolrInstall)安装然后创建一个 schema.xml [http://wiki.apache.org/solr/SchemaXml](http://wiki.apache.org/solr/SchemaXml) - 想想你需要哪些字段，哪些是可搜索的等. 然后您可以使用 apache solr 进行 php 或许多查询的替代方案。

请享用

# c# - MySql .Net 连接器问题 - Linux 上的 MonoDevelop

> ID：10172820
> 
> 赞同：0
> 
> 时间：2012-04-16T10:58:01.653
> 
> 标签：c#, mysql, ubuntu, mono, monodevelop

我有一段 C# 代码，我正在 Ubuntu 11.10 下的 MonoDevelop 中编译。我已经为 Mono ( `using MySql.Data.MySqlClient;`) 引用了 MySql，如果我在 Windows 下尝试相同的代码，它会很好地工作。我不得不将 mysql.data.dll 文件重命名为 MySql.Data.dll 以使其在 Linux 中工作。

当我尝试打开 Mysql 连接时，我从 MonoDevelop 中的 Ubuntu 盒子上获得了这个堆栈跟踪：

```
 at MySql.Data.MySqlClient.NativeDriver.Open () [0x00000] in <filename unknown>:0 
  at MySql.Data.MySqlClient.Driver.Open () [0x00000] in <filename unknown>:0 
  at MySql.Data.MySqlClient.Driver.Create (MySql.Data.MySqlClient.MySqlConnectionStringBuilder settings) [0x00000] in <filename unknown>:0 
  at MySql.Data.MySqlClient.MySqlConnection.Open () [0x00000] in <filename unknown>:0 
```

我的执行代码如下所示，其中 _dbConn 是 MySqlConnection：

```
 string connectionString = String.Format("Server={0};Database={1};User ID={2};Password={3};Pooling=false", 
                DbLocation, DbData, DbUser, DbPassw);

            _dbConn = new MySqlConnection(connectionString);
            //On the Open, I get the error
            _dbConn.Open(); 
```

有人见过这个问题和/或知道如何解决这个问题吗？注意：我正在使用最新版本的 MySql .Net Connector for Mono。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T16:24:16.590

自己解决了。原来 Mono 在这台机器上不是最新的。由于未添加 badgerport 存储库，因此无法看到它。升级到最新版本解决了这个问题。

# java - 是否可以在java中创建接口的对象？

> ID：10172823
> 
> 赞同：2
> 
> 时间：2012-04-16T10:58:11.593
> 
> 标签：java, interface, instance, anonymous-class

在java中，接口只包含方法类型、名称和参数。实际的实现是在实现它的类中完成的。鉴于此，如何创建接口的实例并像使用类对象一样使用它？有很多这样的接口，例如[org.w3c.dom.Node](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Node.html)。

这是我正在使用的代码：

```
DocumentBuilderFactory fty = DocumentBuilderFactory.newInstance();
fty.setNamespaceAware(true);
DocumentBuilder builder = fty.newDocumentBuilder();
ByteArrayInputStream bais = new ByteArrayInputStream(result.getBytes());
Document xmldoc = builder.parse(bais);
NodeList rm1 = xmldoc.getElementsByTagName("Subject");
Node rm3 = rm1.item(0); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T11:00:37.270

*您永远不会只*创建接口的实例。您可以拥有该接口类型的字段/参数/局部变量，但这很好 - 分配给此类变量的值将始终为 null 或对接口的某些具体实现的实例的引用。关键是只处理接口的代码不需要关心实现是什么。

一个很好的例子是[`Collections.shuffle(List)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)- 我可以提供任何列表实现，它只会使用接口中声明的方法。*实际对象*将始终是某个具体实现的实例，但`shuffle`方法不需要知道或关心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T11:01:31.483

有两种方法可以获得可用的接口类。如果我们有接口：

```
public interface Vehicle{
    public void drive();
} 
```

第一个是，正如你所说，有一个实现接口的类：

```
public class Car implements Vehicle{
    public void drive(){
        System.out.println("Here in my car I feel safest of all);
    }
}
Vehicle car = new Car();
v.drive(); 
```

或者您可以创建一个匿名类：

```
Vehicle v = new Vehicle(){
    public void drive(){
        System.out.println("Hello world");
    }
};
v.drive(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T11:04:10.710

您不创建接口的实例 - 您创建实现接口的类的实例。您可以创建任意数量的不同实现，并选择最适合的实现。

在您的代码中，您可以使用需要符合接口的对象的实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T00:17:39.093

该接口是一个具有抽象类型的特殊类，因此它无法创建她自己的实例，因为它***没有***类型。它有一些方法并保留实现她的类的类型。所以你可以只创建引用变量，它们引用一个对象，并确保对象的类必须实现接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T11:02:58.407

这与中的相同

```
List<String> strings = new ArrayList<String>(); 
```

List 是一个接口，ArrayList 是一个实现类。这隐藏了实现（类），并且只提供了需求/合同（接口）。这是一种合理的编程方式，因为您可以将 ArrayList 与 LinkedList 交换（如果列表中的字符串不多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T11:04:35.623

您不创建接口的实例，而是创建实现接口的类的实例。

例如

```
Map<String, String> map = new LinkedHashMap<String, String>(); 
```

这`Map`是一个接口，`LinkedHashMap`是一个实现接口的类。

# android - 使用 WiFi 获取位置详细信息

> ID：10172831
> 
> 赞同：2
> 
> 时间：2012-04-16T10:58:27.310
> 
> 标签：android, gps, android-wifi

我正在 Android 中创建一个小应用程序，它指向当前位置。我为此使用了 GPS 提供程序，但发现在某些地方我不会使用 GPS 提供程序获取数据。

任何人都可以帮助我得到这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:10:19.743

如果您连接到 WIFI，则只需使用 NETWORK PROVIDER 进行位置更新。它们也将快速且足够准确。

通常，如果不需要如此频繁地更新位置，则同时从 GPS 和 NETWORK 请求位置更新。每当您获得所需精度的位置更新时，请从侦听位置更新中注销。

但是，如果需要频繁更新位置，那么调用 GPS 也可能是电池杀手，因此请小心使用 GPS 提供者。

GPS 更新仅在开阔的天空下可用。GPS 更新需要时间，需要电池，但更准确。

网络更新更快，消耗更少的电池，但相对不太准确。但是，如果我们谈论的是 WIFI 精度，它将接近 50 或 100，可以满足许多实时要求。

这一切都取决于您的要求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T11:12:02.950

要检查设备是否通过手机或 wifi 连接，您可以使用以下代码：

```
ConnectivityManager conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

//wifi
State wifi = conMan.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState(); 
```

然后像这样使用...

```
if (wifi == NetworkInfo.State.CONNECTED || wifi == NetworkInfo.State.CONNECTING) {
    //wifi
} 
```

有关更多信息，请参阅[链接](https://stackoverflow.com/questions/2973290/check-wifi-and-gps-isconnected-or-not-in-android)

# actionscript-3 - 如何在运行时弹出键盘

> ID：10172832
> 
> 赞同：0
> 
> 时间：2012-04-16T10:58:33.480
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.6

嘿，我正在使用用于移动开发的 flash builder 4.6 构建应用程序，并且在运行时键盘没有出现。那么如何显示键盘呢？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:15:44.463

您是否阅读过 Adob​​e 的文档[Open a soft keyboard in a mobile Flex application](http://help.adobe.com/en_US/flex/mobileapps/WS82181550ec4a666a39bafe0312d9a274c00-8000.html)？

![在此处输入图像描述](../Images/72700d082e448a94100b506b2de6c907.png)

# facebook-graph-api - 使用图形 api 中的选择与 ids 和字段一起使用

> ID：10172839
> 
> 赞同：0
> 
> 时间：2012-04-16T10:58:52.107
> 
> 标签：facebook-graph-api

在 facebook 文档中，他们写道：

* * *

"默认情况下，查询时会返回大多数对象属性。您可以使用“字段”查询参数选择要返回的字段（或连接）。例如，此 URL 将仅返回 id、名称和图片本：[https ://graph.facebook.com/bgolub?fields=id,name,picture](https://graph.facebook.com/bgolub?fields=id,name,picture)

您还可以使用“ids”查询参数在单个查询中请求多个对象。例如，URL [https://graph.facebook.com?ids=arjun,vernal](https://graph.facebook.com?ids=arjun,vernal)在同一响应中返回两个配置文件。”

* * *

有没有办法一起使用“？fields”和“？ids”？

意思是，在一个请求中仅获得 5 个具有 2-3 个字段的特定帖子 ID。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T04:48:22.173

是的，有可能。你可以这样做：

```
&ids=<some_friends_id>,<some_other_friends_id>&fields=id,name,email,cover 
```

问题是它也返回了一个大的“元数据”对象——我还没有想出如何避免这种情况——这会浪费带宽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:24:13.917

或者，您似乎可以使用此处记录的批处理请求：[https ://developers.facebook.com/docs/reference/api/batch/](https://developers.facebook.com/docs/reference/api/batch/)

例如提供的示例 URL：

```
https://graph.facebook.com?access_token=XXX&batch=[{"method":"POST","relative_url":"me/feed","body":"message=Test status update&link=https://developers.facebook.com/"},{ "method":"GET","relative_url":"me/feed?limit=1"}]' 
```

或分解：

```
https://graph.facebook.com?
    access_token=XXX&
    batch=[
        {
            "method":"POST",
            "relative_url":"me/feed",
            "body":"message=Test status update&link=https://developers.facebook.com/"
        },{
            "method":"GET",
            "relative_url":"me/feed?limit=1"
        }
    ] 
```

我自己只是在尝试这个，但是我的初步发现表明你被迫通过 POST 提交，我认为这是有道理的，但它对于从地址栏测试查询也有点繁琐，并且与 Graph API 不兼容探险家。

# ruby-on-rails - 如何使用 gem 'linkedin', :git => "git://github.com/pengwynn/linkedin.git" 获取登录用户的完整个人资料？

> ID：10172841
> 
> 赞同：0
> 
> 时间：2012-04-16T10:59:01.810
> 
> 标签：ruby-on-rails, linkedin

我在用`gem 'linkedin', :git => "git://github.com/pengwynn/linkedin.git"`

当我创建客户端并获取配置文件时，我得到以下值

```
headline:   url: last_name: first_name:summary 
```

我的问题是如何获取用户的

```
picture-url,public_profile_url: location: country: school_name: degree: field_of_study: start_date: end_date: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:22:48.950

使用图片网址如下

client.profile(:fields => [:headline, :first_name, :last_name, :picture_url,:educations, :positions])client.profile(:fields => [:headline, :first_name, :last_name, :picture_url,:教育，：职位]）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T23:21:07.890

有关您可以使用的所有字段的列表，请参阅 LinkedIn [https://developer.linkedin.com/documents/profile-fields上的文档](https://developer.linkedin.com/documents/profile-fields)

```
#Gemfile
gem 'linkedin-oauth2', '~> 1.0.0'

# Other file
api = LinkedIn::API.new(linkedin.token)
profile = api.profile(
  fields: [
      :headline,
      :first_name,
      :last_name,
      :email_address,
      :phone_numbers,
      :im_accounts,
      :industry,
      :main_address,
      :primary_twitter_account,
      :picture_url,
      :public_profile_url,
      :positions
    ]
  ) 
```

# php - 如何使用 jquery/ajax 设置 php 会话？

> ID：10172844
> 
> 赞同：1
> 
> 时间：2012-04-16T10:59:13.327
> 
> 标签：php, ajax, session

我想用ajax设置php会话。我有在 session.php 中设置会话的功能。

```
public static function set($key, $value) {  
    $_SESSION[$key] = $value;
} 
```

我已经确认 javascript 警报，如果我点击是，我想设置会话。如何简单地设置会话？

**编辑**16.4.2012 15:31 GMT:+1

大卫：谢谢你的回答，看起来很清楚。我试过了，但在我的电脑上没有做任何事情。所以我有：a.php

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<p>I would like to say: </p>
<script>
    $("p").append("<strong>Hello</strong>"); //check jquery is working 
    $.get('a.php', function(data) {
        // do something on success?
    });
</script> 
```

b.php（在同一文件夹中）

```
<script type="text/javascript">
    alert('aaa');
</script>
<?php
echo "print by b.php";
?> 
```

我在浏览器中运行 a.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:07:17.587

你可以有一个简单的 PHP 页面，它只设置值（使用你已经拥有的代码），然后让 jQuery 调用该页面：

```
$.get('setsessionvalue.php', function(data) {
  // do something on success?
}); 
```

如果要扩展它，可以通过在查询字符串上传递值来使调用更通用：

```
$.get('setsessionvalue.php?key=someKey&value=someValue', function(data) {
  // do something on success?
}); 
```

然后，您将从`$_GET`服务器上的集合中提取这些查询字符串值，就像任何其他页面一样。

从服务器端代码的角度来看，它与任何其他页面没有什么不同。您只是不需要呈现 UI（并且可以根据需要呈现数据，可能最简单的 JSON 格式）。JavaScript 代码只是像调用任何其他页面一样调用该页面。

当然，值得注意的是，用户可以根据需要手动调用此页面。因此，不要将其用作会话值的任何“安全性”。如果用户访问 URL：

```
setsessionvalue.php?key=someKey&value=someValue 
```

然后他们将能够手动设置他们的会话值。甚至覆盖您已经设置的值（他们可以在 JavaScript 代码中看到）。我不会特别愿意将会话值的结构（尤其是它们的键）暴露给这样的客户端代码。似乎距离您的网站存在一些安全漏洞很近。

# javascript - Android WebView：在 JavaScript 中处理箭头键

> ID：10172852
> 
> 赞同：4
> 
> 时间：2012-04-16T10:59:43.340
> 
> 标签：javascript, android, android-webview, dom-events

我有一个简单的 WebView 应用程序，我想用键盘控制它。是否可以在 Javascript 中捕获箭头键？

我已经尝试了以下代码，但没有任何运气：

```
function handleArrowKeys(evt) {
    console.info('key');                                                                                         
}

document.onkeyup = handleArrowKeys;
document.onkedown = handleArrowKeys;
document.onkepress = handleArrowKeys; 
```

在 webview 中启用了 Javascript

```
WebSettings webSettings = webview.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setDomStorageEnabled(true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T07:19:06.583

您应该覆盖`onKeyDown`WebView 的方法。见： http: [//blog.csdn.net/focusxi/article/details/6780965](http://blog.csdn.net/focusxi/article/details/6780965)

```
@Override 
public boolean onKeyDown(int keyCode, KeyEvent event){
    int valKey = 0;
    System.out.println("Web KEY:"); 
    System.out.println(keyCode);    

    switch(keyCode){
        //UP
        case 50:
        case 19:
            valKey = 19;
            break;
        //DOWN
        case 83:
        case 20:
            valKey = 20;        
            break;
        //LEFT
        case 81:
        case 21:
            valKey = 21;
            break;
        //RIGHT
        case 69:
        case 22:
            valKey = 22;    
            break;
    }

    if (valKey!=0)
    {
        //new KeyEvent(KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_SHIFT_LEFT);
        KeyEvent event1 = new KeyEvent(KeyEvent.ACTION_DOWN, valKey);

        System.out.println(event1.getKeyCode());    

        return super.onKeyDown(38, event1);
    }
    else
    {
        return super.onKeyDown(keyCode, event);
    }

}
} 
```

# list - Erlang将元素添加到同一个列表

> ID：10172854
> 
> 赞同：1
> 
> 时间：2012-04-16T11:00:04.440
> 
> 标签：list, erlang, element

Erlang将元素添加到同一个列表？在erlang中可以吗？如果没有，那么请帮助我使用任何替代解决方案来实现这一目标。

我必须做的实际要求如下：

我有多个列表 ID，因此基于列表 ID，我必须将状态不等于“B”、“U”（退回和取消订阅）的所有订阅者电子邮件 ID 提取到 1 个列表中，然后我必须删除重复的电子邮件 ID从该 listSubscribers 中，一旦我获得了正确的 ListSubscriber，我将循环它并向所有唯一订阅者发送电子邮件。当我第一次将它循环到列表以获取所有订阅者时，问题就出现了，当我获得订阅者时，当循环进入第二个并获取订阅者时，它将添加到同一个列表中，抛出错误 bcoz 列表已绑定。

示例代码我在做什么...

```
% I have multiple list it can be any number, So by loop through each list id fetching subscribers.

lists:foreach( fun (ListId) -> 

ListSubscribers = emailmarketing:get_list_subscribers(ListId), %% Here I am fetching All email subscriber Ids...

io:fwrite("Total Subscriber from this list -> ~p ~n", [ListSubscribers])

end, ListIds),

UniqueSubscriberList = lists:usort(ListSubscribers),

%% Now I'll loop here and send each subscriber campaign email. 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T14:52:24.260

请注意，Erlang 是一种函数式编程语言。它与 C 或 PHP 等命令式语言非常不同。编写Erlang 代码*需要*对函数式编程有基本的了解，包括单赋值、递归、高阶函数以及可能的列表推导。

列表推导在您的场景中非常有用。我认为您尝试做的很多事情都可以这样写：

```
ListSubscribers = lists:flatten([emailmarketing:get_list_subscribers(ListId) || ListId <- ListIds]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T13:27:49.970

Erlang 是单赋值函数式语言。您所要做的就是将 var 分配给第一个列表并将 var 分配给第二个连接列表，这将为您提供 ListThree 的结果。因此，您总是在“更改”（添加、删除、更新等）时生成新列表。

```
ListOne = getSubs1(),
ListTwo = getSubs2(),
ListThree = lists:append(ListOne, ListTwo), 
```

接下来，当您应用过滤器删除不需要的内容时，您会生成另一个列表，

```
ListFour = lists:filter(fun(X) -> ... end, ListThree). 
```

等等。每次更改某些内容时，您总是会生成新列表，永远不会更改以前的列表。

在您的情况下`ListSubscribers`，仅在 forall fun 范围内可见，您应该将其更改为 map 之类的东西，并且您的`map`or`filter`将产生这样的结果列表。

```
ListOfLists = [ 1, 2, 3, 4, 5, 6],
ResultList = lists:filter(fun(X) X rem 2 =:= 0 -> end, ListOfLists), 
```

所以 ResultList 将是所有从我们的乐趣中返回 true 的元素。

```
[2,4,6] 
```

接下来，您将不得不对其应用下一个过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T10:28:29.477

我得到了使用递归方法将列表与新元素组合的解决方案。这是示例：

```
combine_list_subscriber([First | Rest]) ->
    {Subscriber} = bson:lookup ('subscriber', First),
    [Subscriber | combine_list_subscriber(Rest)];
combine_list_subscriber([]) ->
    []. 
```

谢谢，阿杰

# linux - 用于解析 telnet 消息并退出的 Linux 脚本

> ID：10172860
> 
> 赞同：9
> 
> 时间：2012-04-16T11:00:17.100
> 
> 标签：linux, bash, telnet

我正在连接到一个 telnet 监听器。Telnet 服务器每秒发送“1234”。我想阅读消息“1234”并关闭远程登录会话。下面是我的代码，但它不起作用。

```
#!/bin/bash
telnet 192.168.10.24 1234
read $RESPONSE
echo "Response is"$RESPONSE
echo "quit" 
```

如何自动阅读 telnet 消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-13T12:07:21.903

下面给出最简单和最简单的方法。

```
sleep <n> | telnet <server> <port> 
```

**n** - 自动退出前的等待时间（以秒为单位）。它可能是小数，如 0.5。请注意，某些必需的输出可能不会在指定的等待时间内返回。所以我们可能需要相应地增加。

**server** - 目标服务器 IP 或主机名。

**port** - 目标服务端口号。

您还可以像这样将输出重定向到文件，

```
sleep 1 | telnet <server> <port> > output.log 
```

**更新 1#：** 如果远程主机不接受也不丢弃连接请求，上述方法可能不起作用。在这种情况下，以下方法有效：

```
RESPONSE=$(timeout 5 telnet 192.168.10.24 1234) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T11:14:11.913

您可以使用内部 TCP 机制：

```
#!/bin/bash

exec 3<>/dev/tcp/127.0.0.1/80
# echo -en "eventualy send something to the server\n" >&3
RESPONSE="`cat <&3`"
echo "Response is: $RESPONSE" 
```

或者您可以使用 nc (netcat)，但请不要使用 telnet！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:10:16.610

将输出重定向到文件并从文件中读取

```
telnet [ip-address] > /tmp/tempfile.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T10:47:39.397

已经回答了，但这里有另一个使用 curl 的观点，可用于快速检查（即服务是否处于活动状态）。我不得不努力避免“脚本”和“期望”解决方案。

只是可能的 POP3 检查的存根：

```
echo "quit" | curl telnet://localhost:110 > /tmp/telnet_session.txt
if grep "POP3 ready" /tmp/telnet_session.txt; then
        echo "POP3 OK"
else
        echo "POP3 KO"
fi 
```

# php - 在 PHP 页面中刷新内容外部 .txt 文件

> ID：10172871
> 
> 赞同：0
> 
> 时间：2012-04-16T11:00:56.960
> 
> 标签：php, html, ajax, iframe

我已经看过类似的问题，但还没有完全找到我要找的东西......

我有一个用 PHP 编写的网页，我需要显示外部 .txt 文件的内容，并且我需要每隔 20 秒刷新一次，因为 .txt 文件内容会定期更改。

我已经能够通过放入 IFRAME 并使用 PHP 包含来显示文件的内容来实现这一点。然后我每 20 秒刷新一次包含页面。

这工作正常，除了 IFRAME 刷新对我的网站统计数据造成严重破坏，因为刷新量，ehcih 计入网页浏览量。

我可以使用 AJAX 或其他方法来执行此操作吗？我敢肯定，它们可能是另一种方法，不会严重影响我的统计数据，也不会在服务器上造成太大的负载？

请提供尽可能多的具体说明，因为我已经花了几天时间来实现我已经拥有的！

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:09:01.080

我知道您要求使用 Ajax/JavaScript，但 Java Applet 可与大多数桌面浏览器一起使用，而且此任务在 Java 中会非常简单，因此我为您提供了一个示例，说明如何使用 Java applet 完成此任务。

```
// PHP/HTML embed code
<APPLET CODE="readTextFile.class" width=400 height=300>
    <PARAM NAME="fileToRead" VALUE="<?php echo $textfile ?>">
    Your browser does not support the <code>applet</code> tag.
</APPLET> 
```

您将需要像`javac "path/to/readTextFile.java"`在 cmd.exe 中一样编译 java 文件

```
// readTextFile.java

import java.applet.*;
import java.awt.*;
import java.io.*;
import java.net.*;
import java.util.*;

public class readTextFile extends Applet {

   String fileToRead = "path/to/myfile.txt";
   StringBuffer strBuff;
   TextArea txtArea;

   public void init(){
       txtArea = new TextArea(300, 400);
       txtArea.setEditable(false);
       add(txtArea, "center");

       // First try the HTML applet parameter, if not use fileToRead variable
       String prHtml = this.getParameter("fileToRead");
       if (prHtml != null) fileToRead = new String(prHtml);

       // Set up a timer to read the file every 20 seconds
       Timer t = new Timer();
       t.scheduleAtFixedRate(new TimerTask() {
           public void run() {
               readFile();
           }
       }, 0, 20*1000);
   }

  public void readFile(){
       String line;
       URL url = null;
       try{
           url = new URL(getCodeBase(), fileToRead);
       } catch (MalformedURLException e) {
           //handle or do nothing
       }

       try {
           InputStream in = url.openStream();
           BufferedReader bf = new BufferedReader(new InputStreamReader(in));
           strBuff = new StringBuffer();
           while((line = bf.readLine()) != null){
               strBuff.append(line + "\n");
           }
           txtArea.append("File Name : " + fileToRead + "\n");
           txtArea.append(strBuff.toString());
       } catch(IOException e) {
           e.printStackTrace();
       }
   }
} 
```

这将从您的服务器每 20 秒读取一次文件。只需确保您尝试访问的文件位于同一文件夹中或在您放置 readTextFile.class 的任何位置下方（但不在上方）

请注意，文本文件将获得同样多的疯狂点击（但没有办法解决），但您的页面不会获得疯狂点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:09:32.780

如果您使用的是 jquery，您可以尝试以下代码：它将获取文本文件并将内容放在 id 为 textdiv 的 div 中

```
<script type='text/javascript'>
var doInterval;
function getfile() {
  $.ajax({
    url: "file.txt",
    complete: function(request){
      $("#textdiv").html(request.responseText);
    }
  });
}
doInterval = setInterval(getfile, 20000);
</script>
<div id="textdiv"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:08:33.400

您绝对可以使用 PHP 中的 Comet/Long Polling 之类的东西，但正如[对这个问题的公认答案所](https://stackoverflow.com/questions/603201/using-comet-with-php)提到的，在使用 Apache 作为服务器时有一些注意事项。

如果您不限于 PHP，您可以使用[socket.io](http://socket.io/)，它非常适合这个原因。此外，如果您没有太多客户，Comet 仍然可以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:08:42.837

我会隐藏基于会话的 Google Analytics JavaScript，以便它只为该会话加载一次：

```
<?php
session_start();
if (!isset($_SESSION['beenHere']) || !$_SESSION['beenHere']) {
?>
  <!-- ga.js javascript here -->
<?php
} else {
  $_SESSION['beenHere'] = true;
}
?> 
```

然后，您可以根据需要继续重新加载页面。但是，这是假设您*需要*使用 PHP 加载文本文件？否则，您能否不只是将文本文件加载到 iFrame 中，并使用 JavaScript setTimeout 调用来刷新 iframe src？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T12:00:57.287

我建议原型；它支持定期更新，开箱即用！在您的页面上获取并包含该原型 JS 脚本（从[此处](http://prototypejs.org)下载）。然后将此脚本添加到脚本块中。

```
new Ajax.PeriodicalUpdater('logger', 'path/to_file.php',
{ 
    method:'post',
    parameters: {sender:'mrigesh',reciever:'browser'},
    frequency: 20,
    decay: 2
}); 
```

因此，您的“path/to_file.php”将提供需要定期更新的部分信息。根据您的喜好查看更改频率（我在您的问题中看到了 20 个！）。Decay 是一项功能，如果一次又一次地接收到相同的数据，它可以延迟发送到服务器的请求周期... API 路径：[读取](http://api.prototypejs.org/ajax/Ajax/PeriodicalUpdater/)

# sqlite - SQLite 字段定义

> ID：10172875
> 
> 赞同：0
> 
> 时间：2012-04-16T11:01:10.200
> 
> 标签：sqlite, field

我刚从 SQLite 的世界开始，正在查看字段定义，我是否认为SQLite 中的`Varchar`/`Char`和`text`字段之间似乎没有区别？设置字段长度也有影响吗？

```
CompanyName varchar (40) NOT NULL , 
```

最后，如果我要为布尔字段提供默认值，我会使用`1`还是`True`作为默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:07:37.100

> 我是否认为 SQLite 中的 Varchar / Char 和文本字段之间似乎没有区别？

是的，你是对的。它们对 sqlite 都是一样的。

> 设置字段长度也有影响吗？

也正确；请注意，没有什么能阻止上层对长度进行某种形式的检查/执行。

> 如果我要为布尔字段提供默认值，我会使用 1 还是 True 作为默认值？

1（或任何非零数值）如下所示：

```
sqlite> select 1 where True;
Error: no such column: True
sqlite> select 1 where 1;
1
sqlite> select 1 where "True";
sqlite> select 1 where "False";
sqlite> select 1 where 0;
sqlite> select 1 where -1;
1 
```

**关于使用 sqlite 的 true/false 的备注**

SQLite 用 1 表示真，用 0 表示假：

```
sqlite> select 3 > 2;
1
sqlite> select 3 < 2;
0 
```

SQLite 认为是真还是假的更复杂。我将引用[文档](http://www.sqlite.org/lang_expr.html#booleanexpr)：

> 要将 SQL 表达式的结果转换为布尔值，SQLite 首先以与 CAST 表达式相同的方式将结果转换为 NUMERIC 值。NULL 或零值（整数值 0 或实值 0.0）被认为是错误的。所有其他值都被认为是真的。
> 
> 例如，值 NULL、0.0、0、'english' 和 '0' 都被认为是错误的。值 1、1.0、0.1、-0.1 和“1english”被认为是正确的。

# wpf - (App.Current as App).myValue 和 App 类的静态 myValue 有什么区别？

> ID：10172876
> 
> 赞同：1
> 
> 时间：2012-04-16T11:01:15.820
> 
> 标签：wpf, windows-phone-7, silverlight-4.0

像这样在 App 类中将变量定义为静态成员有什么区别：

```
public static string myValue;
//
string value = App.myValue; 
```

并使用 (App.Current as App) 来检索 App 的属性，如下所示：

```
public string myValue { set; get; }
//
string value = (App.Current as App).myValue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:09:39.053

如果`App`是从 导出的`Application`，则比几乎没有区别。

小的区别是在程序开始时（`Main`例如在 中）`App.Current`仍然是`null`，而静态属性已经可以访问。这是因为`Application`该类不是真正的单例（或者更确切地说，`Current`它不会触发它的创建——这种行为至少适用于 WPF 3.5）。

另一个小的区别当然是在第一种情况下`myValue`是一个字段而不是一个属性——所以一些期望属性（如绑定等）的场景会失败。

# c# - 在 Razor C# 中比较模型

> ID：10172883
> 
> 赞同：0
> 
> 时间：2012-04-16T11:01:22.687
> 
> 标签：c#, asp.net-mvc-3, razor

我终于开始使用 Razor 学习 MVC 3。我在检查要传递的模型时遇到问题。

我需要将这 3 种 MVC 2 示例代码转换为 Razor/MVC 3：

```
<li class="<%= Model is FooModel ? "active" : null %>"><a href="<%= Url.Action("Foo") %>Foo</a></li>
<li class="<%= Model is DooModel || Model is BooModel ? "selected" : null %>"><a href="<%= Url.Action("Doo") %>">Doo</a></li>

 <% if (Model is FooModel){ %>Foo<% } else if(Model is DooModel){ %>Doo<% } %>

 <% if (Model is FooModel)
    Html.RenderPartial("Foo");
    else if(Model is DooModel)
     Html.RenderPartial("Doo"); %> 
```

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:09:42.277

像这样的东西应该工作：

```
<li class="@(Model is FooModel ? "")"><a href="@(Url.Action("Foo"))">Foo</a></li>
<li class="@(Model is DooModel || Model is BooModel ? "selected")>
       <a href="@(Url.Action("Doo"))">Doo</a></li>

@if (Model is FooModel)
{ 
    //not sure what Foo is here
    //if it's just a string/text  just do:
    @:Foo
} 
else if(Model is DooModel) 
{
    @Doo //what is Doo here?
}

@if (Model is FooModel) {
    Html.Partial("Foo")
} else if(Model is DooModel)
{
    Html.Partial("Doo")
} 
```

注意：（1）你不应该返回`null`，只是不要返回任何东西。(2) 我不确定你在第一个和第二个块中想要什么`Foo`和`Doo`是什么以及你需要对它们做什么。

# c# - 获取 mailitem 的完成日期时间

> ID：10172885
> 
> 赞同：1
> 
> 时间：2012-04-16T11:01:27.350
> 
> 标签：c#, outlook

当您在 Outlook 中标记要跟进的邮件时，它会出现红旗。当您再次标记它时，标志会变为勾号并显示任务完成时间。如何从 C# 应用程序获取/设置这个时间？

我试过使用 mailitem `TaskCompletedDate`，但它只返回日期（而不是时间）。我也试图找到分配给标记消息的任务，但也没有管理。我究竟做错了什么？我应该在哪里寻找它？

我正在使用 Outlook 2007 和 2010。

提前感谢您的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:56:04.467

我不确定您需要的实际属性，但大多数 mailitems 属性和方法都记录在 MSDN 上：

[http://msdn.microsoft.com/en-us/library/aa210946(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/aa210946(v=office.11).aspx)

注意：请务必检查您所针对的 Outlook 版本。2007+ 还有其他属性。

编辑

根据 MSDN，这个属性确实是`DateTime`：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.taskcompleteddate.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.taskcompleteddate.aspx)

至于为什么它只记得日期部分我无法解释。仅供参考，我相信`TaskCompleteDate`是UTC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T13:20:59.167

我找到了解决方法。我仍然不知道 Outlook 将与给定消息相关的 taksitem 保存在哪里，但我正在使用 Outlook 表格来显示必要的数据。表格可以为我检索所需的数据，然后我从表格的单元格中检索它。

帮助我做到这一点的代码在这里：http: [//msdn.microsoft.com/en-us/library/ff184632.aspx](http://msdn.microsoft.com/en-us/library/ff184632.aspx)

存储完成日期的列（单元格）称为“标记完成日期”。它显示整个日期时间值，而不仅仅是日期。

这种方法的缺点是您仍然无法直接访问该值并且您无法设置它，只能获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-22T13:54:34.153

您可以使用 mailItems `propertyAccessor`。

要得到：

```
myMailItem.PropertyAccessor.GetProperty("http://schemas.microsoft.com/mapi/proptag/0x10910040") 
```

设置（以发送日期为例）：

```
call myMailItem.PropertyAccessor.SetProperty("http://schemas.microsoft.com/mapi/proptag/0x10910040",myMailItem.PropertyAccessor.LocalTimeToUTC(myMailItem.SentOn)) 
```

# android - 在 Phonegap 应用程序中存储身份验证的正确方法

> ID：10172886
> 
> 赞同：5
> 
> 时间：2012-04-16T11:01:27.533
> 
> 标签：android, ios, html, cordova

假设我有一个 phonegap 应用程序连接到 Web 服务来验证登录凭据。一旦通过身份验证，我希望拥有持久身份验证，就像在浏览器中存储 cookie 的标准 Web 应用程序一样。

这些的指导方针是什么？考虑到安全性、可靠性和标准。

请不要将此作为“本机应用程序与 html5 包装应用程序”的辩论。

我感谢所有合乎逻辑的答案。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:40:51.043

这是生成身份验证还是存储身份验证的问题？

要生成，由于您不能再使用 UDID，保留 FB 或 twitter id 就可以了。要存储，您可以写入 UserDefaults 或实际文件（有 localStorage 但目前不可靠）。

# jquery - 按顺序执行功能

> ID：10172893
> 
> 赞同：0
> 
> 时间：2012-04-16T11:01:52.700
> 
> 标签：jquery, function

我想按一定顺序执行 3 个函数，我这样做：

```
function nextPage() {
    var loading_temp = $('#loading_temp');

    loading_temp.show()
        .queue(function() {
            nextPage980()
                .queue(function() {
                    loading_temp.hide();
                    $(this).dequeue();
                });
            $(this).dequeue();
        });         
} 
```

'#loading_temp' 出现，然后函数执行，但最后一个函数（隐藏加载 gif）不执行！

Chrome 给出了这个错误： Uncaught TypeError: Cannot call method 'queue' of undefined

nextPage980() 函数是这样的：

```
function nextPage980() {
        var ajax_heading = $('#ajax_heading');          
        var cur_heading = $('#cur_heading');            
        var temp_heading = $('.temp_heading');
            var temp_heading_first = temp_heading.filter(':first');         
        var loading_temp = $('#loading_temp');

        var htmlHeader = "Εγκαταστάσεις";           

        ajax_heading.attr('class', 'next_temp');        
        cur_heading.css({'margin-right' : '20px'}).after('<div id="cur_heading" class="temp_heading" data-tempPos="2"><h1 class="page_heading"><span class="heading_span">' + htmlHeader + '</span></h1></div>')        
            .queue(function() {
                ajax_heading.animate({'margin-left' : '-1000px'}, 1000, 'easeInExpo')               
                    .queue(function() {
                        temp_heading_first.remove();                        
                        cur_heading.removeAttr('style');                        
                        ajax_heading.attr('class', 'cur_temp').removeAttr('style');                                                     
                        $(this).dequeue();
                    });
                $(this).dequeue();
            });     
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:04:23.997

您只需要从`nextPage980`. 在末尾添加一个无条件`return $(this);`。就目前而言，您正在调用`queue`当前的返回值，这没什么（因此您的错误消息）。

# python - 设置标题标签的字符串属性会清除 BeautifulSoup 中另一个标签的字符串属性

> ID：10172904
> 
> 赞同：3
> 
> 时间：2012-04-16T11:02:29.223
> 
> 标签：python, beautifulsoup

我尝试使用 BeautifulSoup 使用以下代码更改一些 html 文档的标题标签：

```
>>> doc = BeautifulSoup(open(filename))
>>> root = doc.find('html') # works only with html parser
>>> hafta = root.find(id="hafta")
>>> content = hafta.find('div', {'class':'convHtml'})
>>> content.find('b').string
u'BAKANLARA N\u0130\xc7\u0130N KURBAN KES\u0130L\u0130R?'
>>> doc.title.string = content.find('b').string
>>> content.find('b').string
>>> 
```

奇怪的是，该语句`doc.title.string = content.find('b').string`清除了`content.find('b')`. 为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T13:11:30.280

这是[Beautiful Soup 中的错误](https://bugs.launchpad.net/beautifulsoup/+bug/983050)。我已经提交了一个修复，它将在下一个版本中发布。

# c# - 在 WPF 中使用数千行快速绘制地图

> ID：10172906
> 
> 赞同：4
> 
> 时间：2012-04-16T11:02:37.267
> 
> 标签：c#, wpf, draw

我正在 WPF 中制作路线规划器程序，我需要显示一个地图，该地图是具有数万条边的图形对象。如果我还想与此地图交互（例如缩放、移动、选择边缘），那么绘制这些线的最佳选择是什么？我尝试过的所有选项都导致渲染性能非常慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:24:24.763

您可以使用[Shape](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.aspx)，与这些对象交互特别简单，但如果您正在处理数千条边我建议使用[DrawingVisual](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)类，一个可用于在屏幕上渲染矢量图形的可视对象，以及它的 RenderOpen 方法. 我遇到了与您[类似的问题](https://stackoverflow.com/questions/9997891/how-to-improve-canvas-rendering-performance)，并且我使用[DrawingContext](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingcontext.aspx)来绘制我的边缘提高了我的应用程序的性能。

要缩放，您必须使用转换，特别是[ScaleTrasnform](http://msdn.microsoft.com/en-us/library/system.windows.media.scaletransform.aspx)并将转换应用于您的面板或形状。

DrawingVisual 不提供事件处理，因此如果使用 Shape 您可以使用事件与边缘交互，使用 DrawingVisual 您需要实现[Hit-Testing](http://en.wikipedia.org/wiki/Hit-testing)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:26:40.690

为了提高绘图性能，您必须避免一次渲染所有线条。即使使用较低级别的视觉效果，您也无法提高性能。

你必须遵循以下几点：

1.  如果您在一层中有这些线，则将该层拆分为不同的层。您可以在与高速公路、高速公路、地方道路、街道等相关的线的基础上拆分它们。
2.  您必须找到对这些图层进行空间索引的机制。通过使用空间索引，您可以根据边界框对线进行索引。
3.  在边界框的基础上获取线，并仅渲染位于该边界框内的线
4.  在更高的缩放级别上渲染重要的线（高速公路，高速公路），然后在放大地图时逐渐显示其他线（低重要性的道路，街道）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:26:28.653

如果您必须使用 WPF，请查看 DrawingVisual 类。这可以访问将提供更快性能的低级绘图图元。但是，当您处理较低级别的对象时，您必须自己处理焦点和命中测试等事情。在这里查看有关 DrawingVisuals 的 msdn 条目：

[http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx "MSDN") [http://msdn.microsoft.com/en-us/library/ms742254.aspx](http://msdn.microsoft.com/en-us/library/ms742254.aspx)

# jquery - JQuery - 动态文本修剪 - Iphone 问题

> ID：10172909
> 
> 赞同：0
> 
> 时间：2012-04-16T11:02:39.270
> 
> 标签：jquery, iphone

我们正在实施客户网站的移动版本。商店页面有很长的商店信息列表，其中包含指向更多信息的链接一个商店 HTML 块的示例如下 -

```
 <div class="overlayContent">
<h2>Bagot Opticians</h2>
<div>
10 Library Road
<br>
Kendal, LA9 4QB
<br>
Tel: 01539 721619
</div>
<a href="store-directory/bagot-opticians.aspx">more about S., C. &amp; T. Bagot</a>
</div> 
```

我已经使用以下代码循环遍历商店并删除了'more about part of text：

```
 $(document).ready(function() {

$('.jsGrid ul li').each(function(index) {
     var anchortext =($('.overlayContent a', this).text());
     alert(anchortext)

        $('.overlayContent a', this).html(anchortext.substring(10, anchortext.length));

});
}); 
```

它在除 iphone 之外的所有设备上都能正常工作 - 由于某种原因，它会将电话号码作为目标的一部分！？任何人都可以为这个问题提供不同的方法或任何理由吗？

干杯保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:07:11.613

尝试这个：

```
$(document).ready(function() {
  $('.jsGrid ul li').each(function(index) {
    $('.overlayContent a', this).remove();
  });
}); 
```

如果您想保留元素本身但只是清空它，请将 remove() 替换为 empty()。

# hibernate - Hibernate：删除未由子级引用的父级

> ID：10172911
> 
> 赞同：1
> 
> 时间：2012-04-16T11:02:41.030
> 
> 标签：hibernate, nhibernate, orm, fluent-nhibernate

当没有引用它的孩子时，我需要删除它。这在 Hibernate 中可能吗？（实际上我使用的是流利的 nhibernate，但我认为答案是一样的）

例如，我有很多来自不同公司的客户。当我删除公司的最后一个客户时，我也想自动删除公司详细信息。

与正常的亲子关系不同，我不会有意识地选择删除公司。就用户而言，他只是在删除一个客户；删除未引用的公司只是其副产品。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T11:09:00.113

Hibernate 不会为您神奇地做到这一点。你必须自己实现它：

```
Company company = customer.getCompany();
company.removeCustomer(customer);
session.delete(customer);
if (company.getCustomers().isEmpty()) {
    session.delete(company);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:13:56.650

我不知道通过 NHibernate 映射执行此操作的方法，您可能需要在删除客户逻辑中编写一些逻辑，该逻辑使用公司标识符计算客户表中的记录数，其中客户标识符不是一个被删除，如果结果计数为 0，则删除客户和公司。

伪代码：

```
public void Delete(Customer customer)
{
    using (var transaction = session.BeginTransaction())
    {
        int remainingCustomers = 
            session.Query<Customer>(c => c.CompanyId == customer.CompanyId && c.CustomerId != customer.CustomerId).Count();

        session.Delete(customer);

        if (remainingCustomers == 0)
        {
            session.Delete(customer.Company);
        }

        transaction.Commit();
    }
} 
```

或者，如果不需要立即删除，您可以按计划运行存储过程来“整理”旧公司。

# java - 如何通过网络传输大文件（文件大小>堆大小）？

> ID：10172913
> 
> 赞同：1
> 
> 时间：2012-04-16T11:02:54.880
> 
> 标签：java, data-structures

如何通过网络传输大文件（文件大小>堆/RAM大小）？

假设我有文件（大小 10GB），我想将它传输到机器 a（RAM 512mb）到机器 b（RAM 512mb）。

想用java代码实现这个。

首先，可能吗？关于框架的任何建议。如果可能的话，我们可以使用线程加速吗？重要标准：在传输过程中需要维护文件的数据顺序。任何例子都会有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:04:18.577

当然有可能。你只需要使用流。如果线程将提高传输速度取决于您的网络，我会说您无法获得改进，因为您正在实现发送器和接收器（并且您不会限制带宽）。因此，限制因素将是您无法扩展的网络带宽。但是你可以考虑压缩你的流。

在不了解您的要求的情况下很难举出一个例子。例如，我们使用[RMIIO](http://openhms.sourceforge.net/rmiio/)通过 RMI 传输文件。但是，如果您不是被迫使用 RMI，我不建议您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:25:42.767

> 首先，可能吗？

当然。

> 关于框架的任何建议。

没有框架。您只需读取一个缓冲区/写入一个缓冲区，直到全部完成。

> 如果可能的话，我们可以使用线程加速吗？

使用一个线程从本地读取，另一个线程写入网络套接字不太可能有帮助。在大多数情况下，读取文件的速度比将文件写入网络的速度要快几十倍或几百倍，因此双缓冲的加速空间很小。

在某些情况下，您可以通过使用多个并行流执行传输来获得更多吞吐量。但是，这也可能导致网络拥塞，从而导致吞吐量降低。当然，您可能会损害其他用户的网络性能。

所以我的建议是不要费心尝试通过多线程加速传输，除非它是一个关键问题并且你有能力在这个问题上花费大量时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:07:59.507

> 首先，可能吗？

您一次读取和写入一个块，例如`byte[]`8 KB。

> 关于框架的任何建议。如果可能的话，我们可以使用线程加速吗？

您可以通过增加您拥有的带宽量来加快速度。CPU 极不可能成为您的瓶颈，因此它不太可能的线程会使其更快（但它会使您的代码更复杂）

> 任何例子都会有很大帮助。

网络上已经有数百万。;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T11:11:57.723

使用流传输。这意味着您将数据读入一个固定大小的缓冲区，比如 64 kB，然后在缓冲区中发送数据，然后读取另一个充满数据的缓冲区，依此类推。这样，无论文件大小如何，您都需要恒定数量的内存（它甚至可以是无限的，您可以继续传输它，甚至不会占用太多内存）。查看将[`InputStream`字节读入数组](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)或`SocketChannel`从中`nio`使用的方法`ByteBuffers`。

# c# - 加双值的逻辑

> ID：10172916
> 
> 赞同：1
> 
> 时间：2012-04-16T11:03:05.040
> 
> 标签：c#, java

我在一次采访中被问到以下问题...

```
Compute the following sum:
1/2 + 1/4 + 1/8 + ... + 1/1048576 
```

有人告诉我这是一个逻辑问题，他们不是在寻找源代码，但是我的答案如下......

```
 private static double computeSum(){
        double x = 0.0;
        for(double i=2; i<=1048576; i*=2){
            x += (1 / i);
        }
        return x;         
    } 
```

这个问题的正确*逻辑*答案是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T11:08:55.397

我收到了这笔款项，我会说答案是`1 minus the nth term`，所以在你的情况下

`1 - 1/1048576 = 1048575/1048576`

我不会做任何数学或代码或任何事情。我想这就是他们正在寻找的答案。

`1/2 + 1/4 = 3/4 = 1 - 1/4;`我可能会通过说//在此处编辑来显示一些“工作”

```
1/2 + 1/4 + 1/8 = 7/8 = 1 - 1/8 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:07:55.747

总和：

```
1/2 + 1/4 + 1/8 + ... + 1/1048576 
```

相当于：

```
(1 + 2 + ... 2 ^ 20) / (2 ^ 20) - 1 =
(2 ^ 21 - 1) / (2 ^ 20) - 1 =
2 - 1 / (2 ^ 20) - 1 =
1 - 1 / (2 ^ 20) ~= 0.99999 
```

如果序列的长度增加，总和将趋于 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T00:20:53.070

这是一个简单的`convergent geometric series`

```
 s=a+ar+ar^2+ar^3+... to infinity 
```

所以总和是

```
s=1/(1-r) where in this case r =1/2 
```

但是，我们正在寻找 sa，因为给定的系列从 1/2 开始，而不是从 1。因此

```
s-a = 1/(1-r) - a = 1/(1-1/2) -1 = 1. 
```

为什么他们称之为`logic`问题对我来说并不清楚，除了他们可能想要解释为什么给定的几何级数收敛 - 这是一个简单的证明：即任何两个连续项之间的比率是小于 1 的常数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:11:16.380

他们将分数相加，直到得出一个分数 1/1048576，其值可以忽略不计。这意味着上面的答案将非常接近 1，但不完全是 1。

# android - 如何在android中更改画廊的OnItemSelected侦听器上的标记

> ID：10172919
> 
> 赞同：1
> 
> 时间：2012-04-16T11:03:32.503
> 
> 标签：android

如果画廊，我正在尝试更改 OnItemSelected 侦听器上的标记。实际上，我有一个显示项目列表的画廊和一个显示画廊中受尊重项目的标记的地图。当我选择一个时，我想更改标记（从蓝色到橙色）画廊中的项目。我该怎么做。我已经通过此链接中的代码在点击它时更改了标记

[http://www.google.com/url?q=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F7038636%2Fhow-to-change-the-marker-for-the-overlay-on-tap-for- android&sa=D&sntz=1&usg=AFQjCNFOnFJHf-f0nTea-a3Rs5hpx4U1IQ](http://www.google.com/url?q=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F7038636%2Fhow-to-change-the-marker-for-the-overlay-on-tap-for-android&sa=D&sntz=1&usg=AFQjCNFOnFJHf-f0nTea-a3Rs5hpx4U1IQ)，但不知道如何使用 onItemSelected Listener 做同样的事情。请提出一些方法。

我无法提供整个代码，但这里有一些你可以理解我到目前为止所做的事情。

这是覆盖类：

```
import java.util.ArrayList;

import android.content.Context;
import android.database.Cursor;
import android.graphics.drawable.Drawable;
import android.widget.Gallery;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

/**
 * @author Anshul
 * class is responsible for creating overlays on the map
 *
 */
public class SearchCarOverlay extends ItemizedOverlay<OverlayItem> {
    Context context;
    MapView map;
    Gallery mapGallery; 
    private Drawable heart = null;
    private ArrayList<CustomItem> aList  = null;

    public SearchCarOverlay(Cursor cursor, Context m, MapView mView,
            Gallery carGallery) {
        // super(boundCenterBottom(cursor));
        super(null);
        context             = m;
        this.map            = mView;
        this.mapGallery     = carGallery;
        aList               = new ArrayList<CustomItem>(); 
        addItemsToList(cursor);

        populate();

    }

    /**
     * @param cursor
     * This method will add all the point to the list.
     */
    private void addItemsToList(Cursor cursor) {
        GeoPoint point = null;
        if (cursor != null && cursor.getCount() > 0) {
            cursor.moveToFirst();
            do {

                int lat = (int) (cursor.getDouble(cursor
                        .getColumnIndex("Latitude")) * 1000000);
                System.out.println("checking for latitude and longitude*************"
                                + lat);
                int lng = (int) (cursor.getDouble(cursor
                        .getColumnIndex("Longitude")) * 1000000);
                point = new GeoPoint(lat, lng);
                aList.add(new CustomItem(point, "", "",
                        getMarker(R.drawable.heart_full), heart));

            } while (cursor.moveToNext());

        //  map.getController().animateTo(point);

        }

    }

    /**
     * @param resource
     * @return drawable
     * for getting the map markers
     */
    private Drawable getMarker(int resource) {
        Drawable marker = context.getResources().getDrawable(resource);

        marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                marker.getIntrinsicHeight());
        boundCenter(marker);
        return (marker);
    }

    @Override
    protected CustomItem createItem(int i) {

        return aList.get(i);
    }

    @Override
    public int size() {

        return aList.size();

    }

    @Override
    protected boolean onTap(int index) {
        mapGallery.setSelection( index );
        return true;
    }

    void toggleHeart() {
        CustomItem focus = (CustomItem) getFocus();

        if (focus != null) {
            focus.toggleHeart();
        }

        map.invalidate();
    }
/*
    public ArrayList< CustomItem > getListOfItems(){
        return aList;

    }*/
    /**
     * releases all the objects memory 
     */
    public void cleanUp(){
        context     =   null;
         map        =   null;
         mapGallery =   null;   
         heart      =   null;
    }

}

class CustomItem extends OverlayItem {
    Drawable marker = null;
    boolean isHeart = false;
    Drawable heart = null;

    CustomItem(GeoPoint pt, String name, String snippet, Drawable marker,
            Drawable heart) {
        super(pt, name, snippet);
System.out.println(" CustomItem  CONSTRUCTOR ");
        this.marker = marker;
        this.heart = heart;
    }

    @Override
    public void setMarker(Drawable marker) {
        System.out.println(" CustomItem  setMarker ");      
    //  setState(marker, android.R.attr.state_pressed);

    }

    @Override
    public Drawable getMarker(int stateBitset) {
        Drawable result = (isHeart ? heart : marker);
        System.out.println(" CustomItem  getMarker ");
        setState(result, stateBitset);

        return (result);
    }

    void toggleHeart() {
        System.out.println(" CustomItem  toggleHeart ");
        isHeart = !isHeart;
    }

}
`
and my fragment file which contains gallery and map

    public class SearchCarsFragment extends Fragmnent implements OnItemClickListener, OnClickListener{

MapView mapView;
private Gallery carGallery;

@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup v, Bundle bundle) {

        View   view    = inflater.inflate( R.layout.search_car_result, null );
        headerText     = ( TextView )view.findViewById( R.id.frag_search_result );
         carGallery    = ( Gallery )view.findViewById( R.id.car_gallery );
         mapContainer  = ( LinearLayout)view.findViewById(R.id.search_map_container );
         listOrMap     = ( Button )view.findViewById( R.id.frag_search_option );
         helpButton    = ( Button )view.findViewById( R.id.frag_search_help );

         inflaterForMap = inflater;

         InitialiseMapView();
            initialiseMapAndGallery();

        listOrMap.setOnClickListener( this );
        helpButton.setOnClickListener( this );
        return view;
    }
/**
     * used to create map view everytime we come to Searchcars fragment
     */
    private void InitialiseMapView() {

        if( mapViewFrameLayout == null ){
            mapViewFrameLayout       = ( FrameLayout )inflaterForMap.inflate( R.layout.maps, null );
            mapView =   (MapView) mapViewFrameLayout.findViewById(R.id.carhomezone);
        }else{
            mapView =   (MapView) mapViewFrameLayout.findViewById(R.id.carhomezone);
        }

    }

    /**
     * initialises the map and gallery in the screen
     */
    private void initialiseMapAndGallery() {

         dismissDialog();

         cursor = DatabaseUtil.getInstance().getSortedCarResults( Constants.SORT_BY_DEFAULT );
        if( cursor != null && cursor.getCount() > 0 ){
            headerText.setText("Search Results ("+cursor.getCount()+")");
        initialiseMap( cursor );
        initialiseGallery( cursor );
        }else{
            System.out.println("problem in getting the data from the database");
        }   

    }

/**
     * @param cursor
     * initialises the map for search results
     */
    private void initialiseMap(Cursor cursor) { 

        InitialiseMapView();
        mapContainer.addView( mapViewFrameLayout );
        //GeoPoint point = null ;

        searchCarOverlay = new SearchCarOverlay( cursor,SearchFragmentActivity.mContext,mapView,carGallery);
        mapView.getOverlays().add( searchCarOverlay );
        mapView.setSatellite( false );
        //mapView.setStreetView( true ); 
        MapController mc = mapView.getController();
        mapView.setBuiltInZoomControls( true );

        mc.setZoom( 16 );

        //mapContainer.addView(mapView);

        //mc.animateTo( point );

        mapView.invalidate();
    }

/**
     * @param cursor
     * initialises the gallery for search results
     */
    private void initialiseGallery(Cursor cursor) {
        carGallery.setAdapter( new CarGalleyAdapter( SearchFragmentActivity.mContext ,cursor ));
        carGallery.setOnItemClickListener( this );
        carGallery.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                System.out.println(" onItem selected listenert is called"+position);            

// here i need to right the code for changinh marker onItmeselected 

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                System.out.println(" onNothingSelected selected listenert is called  ");

            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:07:59.890

如果您已经实现了在单击标记时更改颜色的标记。然后把你所做的放在你的画廊的 OnclickListener 中。

# qt - 如何使用 Qt Creator 编译 .bat 文件

> ID：10172921
> 
> 赞同：1
> 
> 时间：2012-04-16T11:03:56.413
> 
> 标签：qt, batch-file, compilation, mingw

问题：如何`.bat`使用 QtCreator 编译文件？

更多信息：具体来说，我正在尝试安装 Windows Image Writer，并且下载仅包括源文件。告诉我使用`README.txt`QtCreator（我只是为此目的安装了它）来编译文件`compile.bat`，我不知道如何执行此操作。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:12:24.577

[此链接](http://bazaar.launchpad.net/~gruemaster/win32-image-writer/0.5/view/head:/README.txt)（版本 0.5）上的自述文本 列出了以下要求：

> 要求：
> 
> 1.  明威
> 2.  Qt for Windows SDK
> 
> 精简版：
> 
> 1.  安装 Qt 完整 SDK
> 2.  运行 compile.bat -或 - 运行 qmake，然后在 src 文件夹中进行 make。
> 3.  可以编辑Compile.bat来改变MinGW和QT的安装路径

=> 您不需要 Qt Creator（包含在 SDK 中），您只需要 Qt 库（也包含在 SDK 中）。

根据第2点，您只需执行compile.bat（从命令行或单击/双击它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:04:46.900

可能有不止一种方法可以做到这一点：

[bat2exe](http://www.f2ko.de/programs.php?lang=en&pid=b2e)

该程序将获取您的批处理文件并进行编译。

很多选择。多年来，当我试图隐藏管理员密码或阻止某人“修复”我编写的脚本时，我一直在使用它。

便于使用。

# google-maps - 如何将地图边界锁定到特定位置？

> ID：10172922
> 
> 赞同：2
> 
> 时间：2012-04-16T11:04:10.333
> 
> 标签：google-maps, google-maps-api-3, drag

如何将地图边界锁定到 Google Map API v3 中的特定位置？所以用户不能拖动到另一个地方，而他仍然可以放大和缩小？

为了更清楚，我需要我的视图框只显示/查看我的国家，这样用户就不能拖动到其他国家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:47:28.017

您可以将其设置为地图对象上的一个选项。

```
map.Options{ draggable: false}; 
```

[https://developers.google.com/maps/documentation/javascript/reference#MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)

# iphone - 在 web 服务中传递字节数组

> ID：10172924
> 
> 赞同：1
> 
> 时间：2012-04-16T11:04:10.740
> 
> 标签：iphone, ios

我有一个网络服务，我想向其传递一个字节数组。那么我如何在soap webservice中传递字节数组。

我怎样才能做到这一点？希望你能给我正确的解决方案。

# asp.net-mvc - Ajax 不会触发服务器操作

> ID：10172928
> 
> 赞同：0
> 
> 时间：2012-04-16T11:04:29.560
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

我正在尝试通过 ajax 触发操作，但由于某种原因它没有调用。我的js代码好吗？

```
@Html.ActionLink("LIKE", "LikeComment", "Comments", new { id = 1985 }, new{@class = "likeButton"})

$(document).ready(function () {
        $(".likeButton").click(function () {            
            $.ajax({
                url: $(this).data("action-url"),
                cache: false,
                success: function (html) {
                    alert('ss');
                }
            });
            return false;
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:16:57.513

试试这个

```
$(document).ready(function () {
        $(".likeButton").click(function () {            
            $.ajax({
                url: $(this).attr("href"),
                cache: false,
                success: function (html) {
                    alert('ss');
                }
            });
            return false;
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:18:52.910

如果您的按钮代码是 LIKE 则这部分 ajax 请求是错误的：

**这是错误的** 网址：$(this).data("action-url"),

**像这个** url 那样做：$(this).attr("href"),

# json - 在 JSON url 上指示多个 ID

> ID：10172932
> 
> 赞同：0
> 
> 时间：2012-04-16T11:04:44.453
> 
> 标签：json, wcf, web-services, rest

我正在使用 C# 开发 JSON WCF Web 服务。

我刚刚定义了这两个网址：

```
http://localhost:39325/RestServiceImpl.svc/forms

http://localhost:39325/RestServiceImpl.svc/forms/{id} 
```

检索以获取所有表单或具有 {id} 的表单。

但是现在，我需要另一个：我想获取 ID 不包含在集合中的所有表单。换句话说，在客户端我会有一些表格。我只需要获取新表格（那些尚未在客户端上的表格）。

如何在 JSON url 上指定 ids 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:16:49.410

使用查询字符串过滤所有表单的列表。东西林下面是什么

```
http://localhost:39325/RestServiceImpl.svc/forms?NotIn=1&NotIn=2&NotIn=3 
```

# javascript - 如何动态更改 HTML 链接的 href 属性

> ID：10172933
> 
> 赞同：2
> 
> 时间：2012-04-16T11:04:53.870
> 
> 标签：javascript, jquery, html, asp.net-mvc-3, jquery-ui

嗨，我的视图`HTML`上有一个链接。`MVC3`

`href`每次用户单击它时，我都想更改它的属性。

```
<a class="tabs" href="#educationDetails">
<input id="SubmitBtn" type="submit" value="Next" />
</a> 
```

有什么办法可以解决这个问题。

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T11:06:04.560

```
$(".tabs").click(function() {
   $(this).attr("href","newhref.com");
}); 
```

**更新**

* * *

你可以像这样得到属性值，

```
$(this).attr("href")  //will return '#educationDetails' 
```

所以你可以像这样检查那个值，

```
$(".tabs").click(function() {
  if ($(this).attr("href") == "#tab1")
      $(this).attr("href","#tab2");
  else if ($(this).attr("href") == "#tab2")
      $(this).attr("href","#tab1");
}); 
```

**更新-2**

* * *

如果您只想将#tab1 更改为#tab2，而不是反向。你也可以这样做，

```
$('a.tabs[href="#tab1"]')​.click(function() {
    $(this).attr("href","#tab2");​
})​;​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:23:04.530

```
$("a.tabs").click(function() {
    this.href = 'newhref';
    return false;
}); 
```

与@ocanal 解决方案相比，这种方式更有效。

来源：

[http://net.tutsplus.com/tutorials/javascript-ajax/14-helpful-jquery-tricks-notes-and-best-practices/](http://net.tutsplus.com/tutorials/javascript-ajax/14-helpful-jquery-tricks-notes-and-best-practices/)

# android - 方向更改后库调用 onItemSelected

> ID：10172936
> 
> 赞同：1
> 
> 时间：2012-04-16T11:05:09.440
> 
> 标签：android, gallery

我有一个画廊，它允许用户浏览画廊，选择图像作为他们的选择，并继续浏览画廊而不更改该选择。这通过使用 onItemSelected 来查看他们正在选择的图像（即单击）是否是已经选择的图像（通过画廊的动作）。所以：

1.  用户在画廊中前后移动。
2.  用户决定他们喜欢的图像并将画廊集中在它上面。
3.  用户单击图像，它被“选中”并被赋予绿色边框。
4.  用户可以继续在图库中前后移动，而不会自动“选择”当前居中的图像。

这可以。但是，我现在尝试在选择图像时允许方向更改，我发现在所有 onConfigChanged 代码执行后，在 Gallery 上调用了 onItemSelected。

所以 onConfigChange 我设置了参数（即，在方向改变之前画廊的索引），然后我调用了我的 initialiseUI 方法。这成功执行并设置了它需要的一切，包括将 Gallery 定位在它在方向更改之前定位的相同索引处。但随后在居中的图像上调用 onItemSelected。这会导致选择居中的图像作为他们的选择（绿色边框等），而无需用户单击它。

我尝试使用布尔标志“configIsChanging”来仅在 configIsChanging 为 false 时执行 onItemSelected 代码。不幸的是，这似乎不起作用，因为 onItemSelected 在 onConfigChange 完成后被调用，并且到那时标志已被重置为 false。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    configChanging = true; 

    tempConfigDisplayedIndex = mGallery.getSelectedItemPosition(); 

    super.onConfigurationChanged(newConfig);

    setContentView(R.layout.take_questionnaire);

    initialiseUI(); 
    configChanging = false; 
} 
```

有人对流氓 onItemSelected 事件有任何经验吗？有任何想法吗？如果需要，我可以发布更多代码。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:08:36.790

您是否尝试过将 android:configChanges="orientation" 放入清单中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:50:47.653

你不能把你的布尔值（也许是一个字段）放在你的 onResume/onCreate 中吗？

`configIsChanging = true;`在您的 2 种方法 onPause 和 onResume 中。

```
@Override    
public void onConfigurationChanged(Configuration newConfig)
{
   if(!configIsChanging){
       tempConfigDisplayedIndex = mGallery.getSelectedItemPosition(); 

       super.onConfigurationChanged(newConfig);

       setContentView(R.layout.take_questionnaire);

       initialiseUI(); 
   }else{
       configIsChanging = false;
   }
} 
```

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:20:04.747

继@Gabriel 的回答之后，我使用以下代码片段解决了这个问题。它与 Gabriel 的代码略有不同，我省略了其他人不会关心的部分:)

```
@Override
protected void onResume() {
    super.onResume();       
    configChanging = true; 
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
if (mAdapter.selectedIndex > -1) { 
    tempConfigSelectedIndex = mAdapter.selectedIndex;
}

super.onConfigurationChanged(newConfig);
if (configChanging) {
    tempConfigDisplayedIndex = mGallery.getSelectedItemPosition(); 

    setContentView(R.layout.take_questionnaire);

    initialiseUI();
}
}

@Override
public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {

if (!configChanging){
    // code here to execute only when user clicks
}
configChanging = false; 
// code here to execute when either user clicks OR config is changed
} 
```

# java - 如何在phonegap中获得幻灯片过渡？

> ID：10172938
> 
> 赞同：0
> 
> 时间：2012-04-16T11:05:22.353
> 
> 标签：java, android, plugins, cordova, transition

我在 Stackoverflow 上看到了很多关于使用 phonegap 开发应用程序时两个 html 页面之间的故障/间隔/间隙的问题。我找到了一个 用于 phonegap的插件[滑块插件。](https://github.com/sandstein/phonegap-transition-plugin)经过大量搜索后，我无法弄清楚如何执行此步骤 3。

```
Add the import for your resource Java file (yourpackage.R) to LoadingSpinner.java 
```

在我看来，这就像本机代码，我无法理解。

我的问题是：

1.  这是什么 yourpackage.R 文件？
2.  它位于哪里？？
3.  以及如何执行那里给出的第3步？

谢谢

**- - - - - -编辑 - - - - - -**

这是R.java的内容

```
 package com.somethingsomething.appone;

    public final class R {
        public static final class attr {
        }
        public static final class drawable {
            public static final int ic_launcher=0x7f020000;
        }
        public static final class layout {
            public static final int main=0x7f030000;
        }
        public static final class string {
            public static final int app_name=0x7f060001;
            public static final int hello=0x7f060000;
        }
        public static final class style {
            public static final int loading_spinner=0x7f050000;
        }
        public static final class xml {
            public static final int cordova=0x7f040000;
            public static final int plugins=0x7f040001;
        }
    } 
```

LoadingSpinner.java 的内容是

```
 package de.sandstein.phonegap.plugin.transition;

    import android.app.Dialog;
    import android.content.Context;
    import android.view.ViewGroup.LayoutParams;
    import android.widget.ProgressBar;

    public class LoadingSpinner extends Dialog {

            public static LoadingSpinner show(Context context, CharSequence title,
                    CharSequence message) {
                return show(context, title, message, false);
            }

            public static LoadingSpinner show(Context context, CharSequence title,
                    CharSequence message, boolean indeterminate) {
                return show(context, title, message, indeterminate, false, null);
            }

            public static LoadingSpinner show(Context context, CharSequence title,
                    CharSequence message, boolean indeterminate, boolean cancelable) {
                return show(context, title, message, indeterminate, cancelable, null);
            }

            public static LoadingSpinner show(Context context, CharSequence title,
                    CharSequence message, boolean indeterminate,
                    boolean cancelable, OnCancelListener cancelListener) {
                LoadingSpinner dialog = new LoadingSpinner(context);
                dialog.setTitle(title);
                dialog.setCancelable(cancelable);
                dialog.setOnCancelListener(cancelListener);
                /* The next line will add the ProgressBar to the dialog. */
                dialog.addContentView(new ProgressBar(context), new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                dialog.show();

                return dialog;
            }

            public LoadingSpinner(Context context) {
                super(context, R.style.loading_spinner);
            }
    } 
```

在 LoadingSpinner.java 中导入 R.java 作为

```
 import android.R; 
```

现在错误状态

```
loading_spinner cannot be resolved or is not a field 
```

**- - - - - -编辑 - - - - - -**

将 android.R 替换为文件 LoadingSpinner.java 中的 com.somethingsomething.appone.R 为

```
 import com.somethingsomething.appone.R; 
```

仍然是错误状态

```
loading_spinner cannot be resolved or is not a field 
```

清理项目并重新启动eclipse，错误就消失了。

用法说

```
 1) Call initTransition() on startup of the app.
    2) Call showLoadingView() to show the loading view. (Android: can use parameter "animation" ('slide' oder 'fade'))
    3) When the animation has finished 'transitionAnimationReady' is fired.
    4) Call hideLoadingView() to hide the loading view. 
```

我在哪里可以找到声明这些全局函数的地方，以便它适用于所有文件。

它应该在其他文件中，在 html 标记上方的 html 文件中，在 head 标记中。尝试将以下代码放在 html 上方和 head 标记中。

```
<script type="text/javascript" charset="utf-8" src="transition.js"></script>
<script type="text/javascript">
    initTransition();
    showLoadingView('slide');
    hideLoadingView();
    alert("hi");
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T12:48:44.183

1.  我没有使用phonegap，但就android而言，“你的包”。R是一个系统生成的java文件，它存储一个int id，对于你在应用程序中使用的每个id都是唯一的。这包括布局、字符串值等。

2.  由于它是系统生成的，它存储在应用程序的 gen 文件夹中

3.  如果您熟悉 java，它只是一个普通的导入。

只需检查此[参考资料](http://developer.android.com/resources/tutorials/hello-world.html)，您就会对 R.java 了解很多

# blackberry - 黑莓中的触摸事件

> ID：10172942
> 
> 赞同：0
> 
> 时间：2012-04-16T11:05:55.777
> 
> 标签：blackberry, touch-event

我创建了一个 VerticalFieldmanager optFieldManager，在其中添加了一些 CustomButtons 然后我想使用触摸事件方法调用按钮的功能我使用 TouchEvent() 方法尝试了这个为此我确实获取 optFieldManager 的索引，它将索引值为 0确认该字段存在但是然后我再次要求管理器内的字段返回-1值，这意味着没有字段添加到管理器...这不是真的我调试了代码并发现点击的帖子正确返回

```
int index1=optionVertFldMgr.getFieldAtLocation(message.getX(1), message.getY(1)); 
```

但是 index1 值是 -1 这是错误的

有什么问题

我在下面添加了代码片段

```
protected boolean touchEvent(TouchEvent message) {

            switch(message.getEvent())
            {

            case TouchEvent.CLICK:
            {
                int index=getFieldAtLocation(message.getX(1), message.getY(1));
                //int index1=optionVertFldMgr.getFieldAtLocation(message.getX(1), message.getY(1));
                if(index!=-1)
                {
                    Field field=getField(index);
                    if(field.equals(optionVertFldMgr))  
                    {

                        int index1=optionVertFldMgr.getFieldAtLocation(message.getX(1), message.getY(1));
                        System.out.println("HELOOOOOOO"+((VerticalFieldManager) field).getFieldAtLocation(message.getX(1), message.getY(1)));
                        //int index1=optionVertFldMgr.getFieldWithFocusIndex();
                        if(index1>-1)
                        {
                            Field fld=optionVertFldMgr.getField(index1);
                            if(fld.equals(m_agendaBtn))
                            {
                                fld.setFocus();
                                return true;
                            }else if(fld.equals(m_eventFeedBackBtn))
                            {
                                fld.setFocus();
                                UiApplication.getUiApplication().pushScreen(new EventFeedbackScreen());
                                return true;
                            }
                        }
                    }
                }
            }
            }
            return false;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:27:28.267

您始终可以在每个按钮上覆盖[Field.navigationClick](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Field.html#navigationClick%28int,%20int%29)，甚至在屏幕上覆盖一次并从那里管理来自每个字段的所有事件：

```
 public boolean navigationClick(int status, int time){
        Field f = getLeafFieldWithFocus();
        if(f == button1){
            //do something 1
            return true;    
        } else if(field == button2){
            //do something 2
            return true;
        }
        //more fields
        return false;   
    } 
```

这种方法适用于触摸屏和触控板。

# php - PHP 致命错误：在中找不到类“Facebook”

> ID：10172944
> 
> 赞同：1
> 
> 时间：2012-04-16T11:06:01.317
> 
> 标签：php, facebook, facebook-graph-api

PHP 致命错误：在第 36 行的 /mnt/releases/server/asrivastava/first-task/390f5294f2b74ffbbe729e1ce9773c39573973b8/public/subscribe.php 中找不到类“Facebook”

```
<?php
try{
    include_once "./php-sdk/src/facebook.php";
}
catch(Exception $o){
    echo '<pre>';
    print_r($o);
    echo '</pre>';
}

error_log("Subscribe.php");
error_log("included facebook classes");
define ("FB_APPID" ,"APPID") ;
define ("FB_SECRET", "KEY");
define ("VERIFY_TOKEN" ,"myFirstFB");

$access_token = "MyAccessToken";
$user = array(
        "first_name",
        "last_name"
    ) ;
$param = array('access_token' => $access_token,
        'object' => 'user',
        'fields' => 'name, feed, likes',
     //   'callback_url' => 'http://apps.facebook.com./handleCallBack.php',
        'callback_url' => 'SomeUrl',
        'verify_token' => VERIFY_TOKEN
);
$config = array ('appId' => FB_APPID, 'secret' => FB_SECRET);
    error_log("Created FB object");
$fb = new Facebook($config);
Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false;
error_log("made curl call");
try {

$subs = $fb->api('/'.APP_ID.'/subscriptions', 'POST', $param);
var_dump($subs);
} catch (FacebookApiException $e) {
    echo $e->getCode()." ".$e->getType()." ".$e->getMessage()." ".$e->getFile()." ".$e-                  >getLine()."\n";
}

?> 
```

现在，每当我点击此 URL 时，都会收到上面提到的错误。请建议我通过它的方法。

错误日志：

[2012 年 4 月 16 日星期一 06:51:02] [错误] [客户端 172.20.2.144] Subscribe.php [2012 年 4 月 16 日星期一 06:51:02] [错误] [客户端 172.20.2.144] 包括 facebook 类 [4 月 16 日星期一06:51:02 2012] [错误] [客户端 172.20.2.144] 创建 FB 对象 [2012 年 4 月 16 日星期一 06:51:02] [错误] [客户端 172.20.2.144] PHP 致命错误：在中找不到类“Facebook” /mnt/releases/server/asrivastava/first-task/390f5294f2b74ffbbe729e1ce9773c39573973b8/public/subscribe.php 在第 36 行 [Mon Apr 16 06:51:02 2012] [error] [client 172.20.2.144] PHP Stack trace: [Mon Apr 16 06:51:02 2012] [错误] [客户端 172.20.2.144] PHP 1\. {main}() /mnt/releases/server/asrivastava/first-task/390f5294f2b74ffbbe729e1ce9773c39573973b8/public/subscribe.php:0 [4 月星期一16 06:51:06 2012] [错误] [客户端 172.20.2.144] 文件不存在：/var/www/server_releases/asrivastava/first-task/flash，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:27:16.080

我有同样的问题。这是我做错的事情，你可能做错了：

当我去这个页面时： [https](https://github.com/facebook/facebook-php-sdk/tree/master/src) ://github.com/facebook/facebook-php-sdk/tree/master/src 下载 facebook.php、base_facebook.php 等。

我右键单击并执行“将链接另存为”，但没有意识到我没有保存我认为我正在保存的内容。

解决方案：单击这些链接，然后将代码复制并粘贴到 facebook.php 等中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:36:14.083

问题很可能是您在文件顶部的包含中使用了稍微不正确的路径。

首先，替换`include_once`为`require_once`- 如果找不到文件，这将给您一个错误，而不是继续进行。

假设这是错误，请仔细检查要包含的文件与您的 subscribe.php 相关的位置

“./php-sdk/src/facebook.php”的意思是“从当前目录（“.”）开始，并在名为 php-sdk/src 的子目录中查找 facebook.php”。所以在你的情况下，它试图加载的完整路径是“/mnt/releases/server/asrivastava/first-task/390f5294f2b74ffbbe729e1ce9773c39573973b8/public/php-sdk/src/facebook.php”

也许您的“php-sdk”目录实际上是上一层？在这种情况下，您希望您的路径以“..”而不是“.”开头 （“../php-sdk/src/facebook.php”表示“/mnt/releases/server/asrivastava/first-task/390f5294f2b74ffbbe729e1ce9773c39573973b8/php-sdk/src/facebook.php”）

此外，由于这似乎是 Linux/Unix 服务器，路径都将区分大小写，因此如果您的文件名为“FaceBook.php”，则与“facebook.php”不同。

# sql - 对两个不相关或具有主键的表进行 SQL 连接

> ID：10172945
> 
> 赞同：2
> 
> 时间：2012-04-16T11:06:02.260
> 
> 标签：sql, sql-server

我有以下查询： -

```
select
dbo.table1.service,
dbo.table1.level_3_structure,
Sum(table1.Reduced) as Total_Reduced

from dbo.table1

where 
dbo.table1.Period = 'Cumulative'

Group by 
dbo.table1.service,
dbo.table1.level_3_structure 
```

这导致类似于以下内容：-

```
service          level_3_structure   Total_Reduced
Service 1            Structure1          11.76
Service 2            Structure2         239.86
Service 3            Structure3         940.29 
```

我有另一个表（表 2），其中包含值 service 和 level_3_structure，还包含一个名为“FTE”的列。

我想要做的是基于服务和 level_3_structure 加入这个表并返回 FTE 的总和。

我尝试了以下查询，但它似乎为每个匹配行重复 table1，导致大约 830 万个结果。

```
select
dbo.table1.service,
dbo.table1.level_3_structure,
Sum(dbo.table1.Reduced) as Total_Reduced,
Sum(dbo.table2.fte) as 'Total FTE'

from dbo.table1
left join dbo.table2
on dbo.table1.service = dbo.table2.service and
   dbo.table1.level_3_structure = dbo.table2.level_3_structure

where 
dbo.table1.Period = 'Cumulative'

Group by 
dbo.table1.service,
dbo.table1.level_3_structure 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:13:41.597

如果您的第一个查询返回您需要的行，那么您可以将它（而不是 table1）连接到 table2：

```
select service, level_3_structure, Total_Reduced, sum(fte) as Total_FTE
from (
    select 
    dbo.table1.service, 
    dbo.table1.level_3_structure, 
    Sum(table1.Reduced) as Total_Reduced 

    from dbo.table1 

    where  
    dbo.table1.Period = 'Cumulative' 

    Group by  
    dbo.table1.service, 
    dbo.table1.level_3_structure 
) t1
inner join table2 on t1.service = table2.service 
AND t1.level_3_structure = table2.level_3_structure 

    Group by  
    dbo.table1.service, 
    dbo.table1.level_3_structure 
```

不过，听起来您的 table1 应该有列 fte。

# c# - 如何从 C# 分析内存和 CPU 使用情况

> ID：10172946
> 
> 赞同：4
> 
> 时间：2012-04-16T11:06:03.167
> 
> 标签：c#, .net, process, profiling, instrumentation

我正在运行一个使用 C# 启动两个进程的测试。我需要获得我的进程使用的顶级内存和 CPU。拜托，有人可以给我一个关于如何使用托管代码的指南吗？（我也使用单声道在 linux 上运行它）。

架构如下：

> 该进程`test.exe`启动两个进程：`A.exe`和`B.exe`。我需要测量进程 A 和 B 的最大内存和 CPU，从`test.exe`

有可能吗？提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T11:23:50.850

您可以使用`System.Diagnostics.Process`该类来启动该过程。然后，您可以检查`UserProcessorTime`、和其他属性以检查处理器使用情况和内存使用情况。检查此[MSDN 文章 System.Diagnostics.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)。`TotalProcessorTime``PeakWorkingSet64`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T11:26:30.253

尝试使用此[获取 CPU 信息](https://stackoverflow.com/questions/278071/how-to-get-the-cpu-usage-in-c)

```
PerformanceCounter cpuCounter;
PerformanceCounter ramCounter;

cpuCounter = new PerformanceCounter();

cpuCounter.CategoryName = "Processor";
cpuCounter.CounterName = "% Processor Time";
cpuCounter.InstanceName = "_Total";

ramCounter = new PerformanceCounter("Memory", "Available MBytes");

public string getCurrentCpuUsage(){
        return cpuCounter.NextValue()+"%";
}

public string getAvailableRAM(){
        return ramCounter.NextValue()+"MB";
} 
```

**编辑：** 因此您可以在开始流程之前和之后检查差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:47:53.120

或者你可以试试这个

```
private ulong GetCPU(ThreadEntry[] thList) 
{ 
  ulong result = 0; 
  for (int i = 0; i < thList.Length; i++) 
  { 
    ulong NewThC = 0; 
    ulong NewThE = 0; 
    ulong NewThK = 0; 
    ulong NewThU = 0; 
    if(GetThreadTimes(thList[i].ThreadID, ref NewThC, ref NewThE, ref NewThK, ref NewThU)) 
      result = result + NewThK + NewThU; 
    int error = Marshal.GetLastWin32Error(); 
//often ERROR == 6 or ERROR == 18
  } 
  return result; 
} 

//GET ALL PROCESS CPU USAGE 
private void timer1_Tick(object sender, EventArgs e) 
{ 
//reset results 
  this.textBox1.Text = string.Empty; 
//turn of timer 
  this.Enabled = false; 
  uint perm = GetCurrentPermissions();

  //SET PERMISION SO I CAN RECEIVE INFO ABOUT THREADS
  SetProcPermissions(0xFFFFFFFF);

//get all running process (OPENNETCF)       
  List<ProcessEntry> processList = new List<ProcessEntry>(ProcessEntry.GetProcesses()); 

//OLD Variables stored in list 
  if (OldResList == null || (OldResList != null && OldResList.Length !=   processList.Count)) 
    OldResList = new ulong[processList.Count]; 

//SORT by ID only for testing       
  processList.Sort(CompareProcessEntry); 
//GET ALL CPU USAGE       
  for(int i=0;i<processList.Count;i++) 
  { 
  //new value 
    ulong newRes = GetCPU( processList[i].GetThreads() ); 
  //result 
    ulong result = (newRes - OldResList[i]); 
  //valid result 
    result = result / (ulong)this.timer1.Interval; 
  //set result to the thexbox 
    this.textBox1.Text += processList[i].ExeFile + " " +  result.ToString() + " ;"; 
  //change old to new 
    OldResList[i] = newRes; 
  } 
  //sleep 
  Thread.Sleep(1000); 
  SetProcPermissions(0xFFFFFFFF);
  //start again 

  timer1.Enabled = true; 
  } 
  public static int CompareProcessEntry(ProcessEntry p1, ProcessEntry p2) 
  { 
   return p1.ProcessID.CompareTo(p2.ProcessID); 
  } 

  [DllImport("coredll")] 
  private static extern bool GetThreadTimes(uint p, ref ulong NewThC, ref ulong NewThE, ref ulong NewThK, ref ulong NewThU); 
```

# css - Firefox 上的 Div 不在同一行显示

> ID：10172948
> 
> 赞同：0
> 
> 时间：2012-04-16T11:06:16.943
> 
> 标签：css, firefox, twitter-bootstrap

我正在使用 Bootstrap 和自定义 CSS 来开发我的个人网站，并且我有以下 HTML 代码来生成包含两列的内容部分。

```
<div class="row-fluid">
    <div id="content" class="span9">
        content
    </div>
    <div id="ads" class="span3">
        ads
    </div>
</div> 
```

这适用于所有浏览器，但使用以下 CSS 时，在 Firefox 中查看时，广告 div 位于内容 div 下方。在所有其他浏览器中，ads div 保留在 content div 的右侧（这是正确的显示）。

```
#content{
    margin-top:2em;    
    padding: 1em;
    box-sizing: border-box;
    border-radius: 20px 20px 0 0;
    border: 2px solid #EEF;
}

#ads{
    margin-top:2em;            
    padding: 1em;
    box-sizing: border-box;
    border-radius:15px;
    border: 2px solid #EEF;
} 
```

我认为发生这种情况是因为填充 + 边框，但所有其他浏览器都正确显示。那么，有没有办法在 Firefox 中解决这个问题？

如果需要，可以在[http://www.dinhani.com.br](http://www.dinhani.com.br)中查看此错误（抱歉，内容是葡萄牙语，因为最近才开始开发）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:43:11.340

Firefox 没有前缀就无法`box-sizing`实现`-moz-`。见[bugzilla](https://bugzilla.mozilla.org/show_bug.cgi?id=243412)

此外，您的问题错过了最重要的 CSS 规则：即`width`每个`div`. `.row-fluid > .span3`您链接到的页面显示.span9 的规则和另一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:18:56.947

仅为（moz 浏览器）添加 css hack。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:14:38.427

你像这样改变你的 html （只是 div 开始标签的小改动。我希望你得到我们的输出，如下图所示

```
<div class="row-fluid">
     <div id="content" class="span9">
         content
     </div>
     <div id="ads" class="span3">
         ads
     </div>
 </div> 
```

![在此处输入图像描述](../Images/6c165c2d9b17ef683333b40904fdd717.png) 好的，你想喜欢这张图片2

```
#content{
    margin-top:2em;    
    padding: 1em;
    box-sizing: border-box;
    border-radius: 20px ;
    border: 2px solid #EEF;
    float:left;
}

#ads{
    margin-top:2em;            
    padding: 1em;
    box-sizing: border-box;
    border-radius:15px;
    border: 2px solid #EEF;
    float: left;
} 
```

![在此处输入图像描述](../Images/7baee08bd10bd74ae766792d59c1e8d1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T11:50:05.593

我希望这个小提琴可以帮助你[http://jsfiddle.net/9Zf8U/1/](http://jsfiddle.net/9Zf8U/1/)我刚刚在这里添加了 firefox css hack 并没有任何效果。

# linux - xorg.conf、xset 和 xinput set 有什么区别？

> ID：10172949
> 
> 赞同：7
> 
> 时间：2012-04-16T11:06:21.440
> 
> 标签：linux, xorg

我不明白为什么 xset 和 xorg.conf 有两个目的完全相同但选项完全不同的东西？为什么有两个而不是一个？为什么它们的参数不能具有相同的名称？甚至在 xorg.conf 本身中也有多个名称不同但效果相同的选项。为什么会如此混乱？

例如，我可以在 xorg.conf 中停用鼠标加速

```
Option "AccelerationProfile" "-1" 
```

或与

```
xset m 0 0 
```

我使用带有 Gnome 3 和 Linux Kernel 3.0.26-1-lts 的 Arch Linux。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T14:04:37.643

该`xorg.conf`文件用于设置启动 X 时的配置。启动 X 后，更改`xorg.conf`不会产生任何影响（除非您重新启动 X，但这需要注销）。

`xset`和`xinput`命令用于在启动 X 后更改配置。*这*意味着即使 内部有默认选项`xorg.conf`，您（或您的工具包）也可以在运行时更改此默认设置。您可以不断更改您的选项，而无需注销。

`xorg.conf`这解释了和 运行时应用程序（如`xset`和`xinput`）之间的区别。`xset`和的区别`xinput`写在`xset`的手册页中：

```
The setting is applied to  all  connected  pointing
devices.  xinput(1)  should be used if you need device-specific
settings. 
```

您提到`xorg.conf`有多个选项具有不同的名称和相同的效果。我想看一个例子。我知道有些选项有一些“交叉点”，但它们通常用于不同的目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T23:18:38.900

`xorg.conf`确实是一个一直存在的遗留配置系统。它的缺点是您必须重新启动 X 才能使设置生效。然而，它很好地集成在 X 服务器中，并且相对容易添加新设置。

但是当今的 X 开发人员倾向于更喜欢允许在 X 运行时动态更改 X 设置的界面。这通常需要创建 API/协议和 X 扩展来实现可以从用户空间使用的接口。xinput、xrandr、xset 等都是这种动态定制类型的示例。

# javascript - javascript旋转图像

> ID：10172961
> 
> 赞同：-1
> 
> 时间：2012-04-16T11:07:20.253
> 
> 标签：javascript

我的网页中有旋转图像。
链接如下：

[http://equosinfotech.com/testdemo/test.html](http://equosinfotech.com/testdemo/test.html)

一切都如我所愿，我只想减慢图像的旋转速度，因为它太快了，我无法找到减慢速度的方法。

（您可以从页面源代码中看到代码）

我只需要有人帮我减慢轮换速度。

我正在使用的javascript：

```
 var stop = function (){
       $("#image").rotate({

  angle:0, 
  animateTo:0, 
  callback: stop,
  easing: function (x,t,b,c,d){        // t: current time, b: begInnIng value, c:         change In value, d: duration
              return c*(t/d)+b;
          }
       });
    }

    $(document).ready(function()
    {
    rotation();​
        $("#image").rotate({ 
bind: 
{ 
    mouseover : function() { 
    stop();
    },
    mouseout : function() { 
    rotation();
    }
} 
});
    });
var rotation = function() {
$("#image").rotate({

    angle: 0,
    animateTo: 360,
    callback: rotation,
    easing: function(x, t, b, c, d) { // t: current time, b: begInnIng value, c: change In value, d: duration
        return c * (t / d) + b;
    }
});
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:14:26.477

尝试在您的代码中添加，或添加您想要`$("#image").rotate({..`的`duration:2000,`秒数（2000 是 2 秒。以毫秒为单位）。

# java - 多维数组列表 Java

> ID：10172963
> 
> 赞同：3
> 
> 时间：2012-04-16T11:07:22.733
> 
> 标签：java, arraylist, multidimensional-array

我在实现这一点时遇到了一些问题。我有一个`ArrayList`. 我一直在寻找几天，我似乎无法在任何地方找到答案：

```
private List<FamilyTree> Tree; 
```

我可以像这样添加新`Trees`的`array`：

```
FamilyTree Generation = new FamilyTree();
Generation.add(new Tree()); 
```

我基本上希望能够在几代人之间移动。例如，我向树中添加了一个新人

```
Generation.add(new Person(height, hair colour, eyes)); 
```

然后我决定，我想在上一代中增加一个人。那是为了`Arraylist`包含电流`ArrayList`（不是这个）。

我不确定我是否很好地解释了我的问题，所以这里有一个图表：

```
----John----Peter----Sandra----Rachel-----
   /   \       |       |
-Jon--Sunny---Cassie--Milo---
                     /  |  \
                   Ron-Kim-Guy 
```

所以基本上，有`ArrayList`约翰、彼得、桑德拉和雷切尔的首字母。各有各的`Arraylist(s)`。假设我想从 Guy 添加到 Rachel，我将如何在单独的数组之间来回移动？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T11:12:03.217

如果每个人有两个父母和任意数量的孩子，您可以使用类似的结构

```
class Person {
   final Person mother, father;
   final List<Person> children = new ArrayList<>();

   public Person(Person mother, Person father) {
     this.mother = mother;
     this.father = father;
     mother.addChild(this);
     father.addChild(this);
   }

   public void addChild(Person p) {
     children.add(p);
   }
} 
```

如果你想向上移动材料线，你可以做类似的事情

```
for(Person p = ...; p != null; p = p.mother) {

} 
```

与其考虑如何显示树，不如考虑它的表示方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:14:45.923

最简单的方法是每个列表都引用它的父级。也许如果您创建一个类似于此的对象 Person：

```
public class Person{

ArrayList<Person> childs;//the child's nods
Person parent; //the parent, null if is the root

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T11:11:08.077

您不需要多维列表，而是需要一棵树。有关树的实现，请参阅[此问题。](https://stackoverflow.com/questions/3522454/java-tree-data-structure)

多维列表例如表格、长方体等。维度必须在一开始就知道并定义数据的结构。

树有根节点和孩子，这些孩子在运行时可以得到更多的孩子，所以没有限制。

# actionscript-3 - 在运行时选择一个 FXG 文件 - 按其名称

> ID：10172968
> 
> 赞同：0
> 
> 时间：2012-04-16T11:07:35.707
> 
> 标签：actionscript-3, apache-flex, flex4.6, flex-mobile, fxg

我有一个测试用例来证明我的问题。

当您在 Flash Builder 4.6 中将以下 4 个短文件添加到新的 Flex Mobile 项目中时，它会立即运行：

![截屏](../Images/36a50d980d538212b97ac4aeaa2c01f3.png)

**源/TestFXG.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    firstView="Home">
</s:ViewNavigatorApplication> 
```

**src/assets/en/Star.fxg：**

```
<?xml version='1.0' encoding='UTF-8'?>
<fxg:Graphic xmlns:fxg="http://ns.adobe.com/fxg/2008" version="2">    
    <fxg:Path x="9.399" y="10.049" data="M 82.016 78.257 L 51.895 69.533 L 27.617 89.351 L 26.621 58.058 L 0.231 41.132 L 29.749 30.52 L 37.714 0.241 L 56.944 24.978 L 88.261 23.181 L 70.631 49.083 Z">
        <fxg:fill>
            <fxg:SolidColor color="#FFFFFF"/>
        </fxg:fill>
        <fxg:stroke>
            <fxg:SolidColorStroke 
                caps="none" 
                color="#FFFF66" 
                joints="miter" 
                miterLimit="4" 
                weight="10"/>
        </fxg:stroke>
    </fxg:Path>
</fxg:Graphic> 
```

**src/Home.mxml:**

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:my_components="*"
        title="Display random amount of stars">

    <fx:Script>
        <![CDATA[
            import Star;
            import spark.core.SpriteVisualElement;

            private static const STAR:SpriteVisualElement = new Star();
        ]]>
    </fx:Script>    

    <my_components:MyComp />
</s:View> 
```

**src/MyComp.as：**

```
package {
    import flash.display.DisplayObject;
    import flash.display.Sprite;
    import flash.utils.getDefinitionByName;
    import mx.core.UIComponent;
    import spark.core.SpriteVisualElement;
    import assets.Star;

    public class MyComp extends UIComponent {
        private static const WHAT:String = "assets.en.Star";

        override protected function createChildren():void {
            super.createChildren();

            for (var i:uint = 0; i < 3; i++) {
                var star:Star = new Star();
                //var star:SpriteVisualElement = new (getDefinitionByName(WHAT) as Class)();
                star.x = Math.random() * 100;
                star.y = Math.random() * 100;
                addChild(star);
            }
        }
    }
} 
```

**我的问题是：**如果我在 assets 子目录中有许多适当命名的 FXG 文件（在我的实际应用程序中，我有 spades_queen.fxg、spades_king.fxg、spades_ace.fxg 等） - 我如何在运行时选择 FXG 文件?

上面的注释行给了我运行时错误：

```
ReferenceError: Error #1065: Variable Star is not defined.
    at global/flash.utils::getDefinitionByName() 
```

当我将**src/assets/en/Star.fxg 移动**到**src/Star.fxg 时**，一切正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T03:46:42.643

我猜你会收到这个运行时错误，因为 Star.fxg 没有编译到完成的应用程序中，因为它没有按名称使用。令人困惑的是，为什么移动文件的位置会绕过错误。

但是，请尝试在其中添加文件引用。导入它：

```
import assets.en.Star 
```

并创建一个您从不使用的dum 实例，以便确保将文件编译到应用程序中：

```
private var myStart :Star; 
```

然后这一行，应该工作：

```
var star:SpriteVisualElement = new (getDefinitionByName(WHAT) as Class)(); 
```

您还可以使用编译器参数来强制将 FXG 类编译到您完成的应用程序中。

[我在我的休闲游戏](https://play.google.com/store/apps/details?id=air.com.igorKnots.magondaMaze&hl=en)中使用了同样的方法，内置在 Flex 中。

然而，奇怪的是为什么将文件移动到不同的目录会导致工作没有问题。这是一个谜，除非你引用了错误的包。（又名`assets.en.Star`——正如你在代码中使用的——`src/assets/Star`你在问题中引用的诗句）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:25:23.273

您无需对 getDefinitionByName 执行任何操作，只需创建 Start 的新实例并使用 addElement 将其放置在舞台上即可。

```
 for (var i:uint = 0; i < 3; i++) {
            var star:Star = new Star();
            star.x = Math.random() * 100;
            star.y = Math.random() * 100;
            addElement(star);
        } 
```

为了让它工作，你必须导入你的 FXP 所在的包。可能是 assets.Star

您也可以通过创建新实例来切换类型。

假设您在资产中有 Star.fxg 和 King.fxg

```
import assets.Star;
import assets.King;

var star:Star = new Star();
var king:King = new King(); 
```

# jquery - 使用 data() 方法检查存储在元素上的数据

> ID：10172969
> 
> 赞同：2
> 
> 时间：2012-04-16T11:07:38.880
> 
> 标签：jquery, firebug

是否有任何用于 firebug 的插件，可让您使用该方法检查存储在元素上的数据`data()`？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:31:43.113

自己找到了答案：http: [//firequery.binaryage.com/](http://firequery.binaryage.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:18:13.143

`.data()`将数据存储在内部缓存中，因此没有简单的方法可以知道每个元素附加了什么。html5 数据属性（如果设置）用于初始值`.data()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-26T15:29:27.907

如果您不想安装插件，可以使用常规的 Firebug 调试器。只需先将数据对象复制到局部变量中。

```
var myDataAll = $("#myElement").data();
// Stop at the next line in the debugger and examine myDataAll. 
```

或者

```
var myDataSpecific = $("#myElement").data("myKey");
// Stop at the next line in the debugger and examine myDataSpecific. 
```

# sunspot - 太阳黑子：关键字为空时不返回任何内容

> ID：10172970
> 
> 赞同：1
> 
> 时间：2012-04-16T11:07:40.137
> 
> 标签：sunspot

如果关键字是空字符串，我希望 Sunspot 不返回任何内容。当前空关键字将返回所有结果。

我无法检查并返回一个空数组。这是因为我正在使用 Kaminari 分页，它不能将空数组识别为可分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T23:03:32.997

您可以通过执行以下操作返回一个分页的 kaminari 空数组：

```
Kaminari.paginate_array([]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:57:19.897

你在跑铁轨吗？您可以围绕搜索和分页创建一个条件语句......类似于“除非关键字。空白？”

# python - 计算n维圆弧路径

> ID：10172971
> 
> 赞同：5
> 
> 时间：2012-04-16T11:07:41.470
> 
> 标签：python, math, geometry, n-dimensional, geometric-arc

我正在为 CNC 铣床实现驱动程序，但在实现 G 代码圆弧命令时遇到问题。

我发现了中点圆算法的几种实现，但它并不是真正可用的。

我发现中点圆算法的问题在于它是 2D 并且同时绘制所有八分圆，而我需要通过 3D 路径的连续步骤，由起点、终点和中心点给出。

我发现了一个[很好的多维等价于 Bresenham](http://www.cb.uu.se/~cris/blog/index.php/archives/400)使用浮点运算的线条绘制算法。绘制弧线可能存在类似的事情？

通过大量的思考和实验，我也许可以根据自己的意愿弯曲这个算法，但是由于绘制圆弧不是一个未解决的问题，而且之前已经制造了 CNC 机器，我想知道是否已经存在一个优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:45:08.207

我的[dxftools](http://rsmith.home.xs4all.nl/software/index.html#dxftools) python 包用于处理不太智能的 2D 刀具的 DXF 文件，具有将弧线分割成 2D 线段的功能。您可以使用此代码，然后使用 3D 坐标变换将其任意放置在 3D 空间中。坐标变换的示例可以在我的[py-stl](http://rsmith.home.xs4all.nl/software/index.html#stl2pov)包中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-03T20:54:41.773

在[LinuxCNC](http://linuxcnc.org)中，位置生成与步骤生成是分开的。在位置生成循环中，系统跟踪它已经沿着当前图元（直线或螺旋线）移动的距离，并使用一个简单的公式来获得沿该图元距离 D 的位置。（通常每毫秒执行一次）。根据您是否有舵机、硬件步骤生成或软件步骤生成，可以以不同的方式使用此位置。

在软件步骤生成系统中，沿每个轴确定旧指令位置和新指令位置之间的差异，这用于更新使用直接数字合成方法 (DDS) 的数字波形发生器的速率。然后，以更高的速率（通常每 20-50µs），DDS 确定每个轴是否应在此时生成一个步进。

这是一种与您描述的不同的设计，但它是一种更灵活的设计。例如，通过将位置生成与步骤生成分开，您可以在不修改步骤生成的情况下修改位置生成代码中的混合算法；并且您可以用硬件步进生成或伺服控制替换软件步进生成，或使用 PID 等算法。

在您的设计中，您可以通过简单地将螺旋弧切割成 Roland 所描述的线段，并将这些作为输入到您的仅理解线的步骤生成代码中，来近似我上面描述的方法。从某种意义上说，这与 LinuxCNC 所做的并没有太大的不同，只是曲线图元是根据距离而不是根据时间进行采样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-12T11:04:54.093

在**CNC**上，通常不仅仅是 2D，因为还有速度、每个轴运动学不止一个执行器的工具角度等……为此，我通常使用带参数的参数三次方`t=<0.0,1.0>`。所以我将路径转换为一组三次曲线，这些三次曲线很容易在任何维度上进行评估。完成此步骤后，您将获得 3 种常用的光栅化方法：

1.  **恒`dt`步**

    参数三次通常是非线性的，因此为了移动到另一个像素（或其他），您需要以`t`小于分辨率的步长来增加参数，例如：

    ```
    dt < 1.0 / curve_length 
    ```

    越少越好`dt`，你不会错过一个像素，但粗糙的会有更多的重复位置。

2.  **搜索`dt`下一步**

    使用二进制搜索，您可以找到下一个`t`，因此到当前位置的距离是单个像素。这更精确，但在某种程度上也更慢......

3.  **转换为线条**

    您可以将三次曲线采样成一组线条（多少取决于曲线的大小）并像往常一样使用 DDA 或 Bresenham 栅格化线条。这是最简单的，但结果不会完全是一条曲线。

立方是这样的：

```
P(t) = a0 + a1*t + a2*t^2 + a3*t^3
t = <0.0,1.0> 
```

其中`P(t)`是位置，`a0,a1,a2,a3`是向量 m 中的系数，其中每个轴都有自己的标量系数。

请参阅[如何生成多点线性插值？](https://stackoverflow.com/a/30438865/2521214)以及如何使用/计算它们的子链接。

**无论如何，如果您坚持假设圆弧进行圆弧插值：**

```
P(t) = ( Rotation_matrix(t) * (P0 - Pcenter) ) + Pcenter
t = <0.0,2*PI> 
```

Where将您的`Rotation_matrix`点沿曲线方向旋转，并且是起点并且是圆弧的中心。`(0,0,0,...,0)``t [rad]``P0``Pcenter`

在非轴对齐旋转的情况下，您可以使用[Rodrigues_rotation_formula](https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula)代替。

然而，使用[齐次变换矩阵](https://stackoverflow.com/a/28084380/2521214)是 ND 中的最佳选择，您只需扩大矩阵大小：

*   [如何使用 4d 转子](https://stackoverflow.com/a/45116079/2521214)

# cocoa - Cocoa 和 OpenGL：绘制矩形数组的最快方法

> ID：10172973
> 
> 赞同：0
> 
> 时间：2012-04-16T11:07:53.297
> 
> 标签：cocoa, opengl, graphics, drawing

**背景：** 我正在 Cocoa 中构建一个屏幕保护程序，其中一些 C 代码正在生成一个表示幅度的二维值数组（介于 0 和 1 之间）。然后我想在屏幕上将其显示为网格，其中单元格的颜色代表数组中的值。

我开始使用 NSBezierPath 的循环，它太慢了。然后我转到 Rect List，它更快，但仍然太慢。现在我正在考虑 nsbitmapimagerep 或迁移到 OpenGL（我相信这会更快）。

**问题：** 因此，我的问题是，在可可中使用 opengl 绘制二维正方形数组（通常为 200x200）的最佳方法是什么，其中位置是固定的，但颜色会发生变化（希望每秒最多 30 次）？

**到目前为止的尝试：**我想我会想要使用 glDrawArrays 或类似的东西而不是循环 glQUAD？或者可能移动到顶点缓冲区对象（我目前正在阅读）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:02:46.750

使用 OpenGL，您只需将 2D 数组定义为纹理。然后，您可以使用简单的四边形绘制将该纹理绘制到屏幕上。

为了获得最佳性能，建议保留 2 个纹理。1 个纹理是您正在显示的纹理，另一个纹理是您正在更新的纹理。完成更新后，将它们交换。这可能会有所帮助，因为您的大减速将是通过 PCIe 总线将纹理数据从主内存复制到图形内存。显然，尽可能节省内存将提高传输速度。使用调色板将带来巨大的胜利，因为您将上传一小部分数据......

# c++ - 使用 linux 自动工具

> ID：10172977
> 
> 赞同：0
> 
> 时间：2012-04-16T11:08:04.410
> 
> 标签：c++, c, windows, linux

我是 windows xp (SP3) 用户和 linux 实用程序的新手。我需要使用来自 linux 的 autoconf 和其他自动工具。我的系统中安装了以下内容。

-Msys 版本 1.0.11 -msysDTK-1.0.1 -msysgit -wget-1.11.4-1 -autoconf-2.68 -automake-1.11.1 -libtool-2.4.1 -libcrypt-1.1 -perl-5.8.8 -m4 -1.4.14 -gettext-runtime_0.18.1.1-2_win32 -glib_2.28.1-1_win32 -glib_2.28.8-1_win32 -pkg-config_0.23-3_win32 -pkg-config-dev_0.23-3_win32

**我尝试了http://www.dwheeler.com/autotools** Configure.ac 中的教程“autotools 简介”，它 是使用以下几行创建的，

```
AC_INIT([hello], [0.01])
AC_OUTPUT 
```

从 Msys shell，运行命令

```
$ autoreconf -i 
```

我得到以下日志，

```
/usr/share/aclocal/autoopts.m4:22: warning: underquoted definition of AG_PATH_AU
TOOPTS
/usr/share/aclocal/autoopts.m4:22:   run info '(automake)Extending aclocal'
/usr/share/aclocal/autoopts.m4:22:   or see http://sources.redhat.com/automake/a
utomake.html#Extending-aclocal 
```

我之前尝试过另一个来自网络的存档教程，即使用名为 hello-initial 的目录。'hello-initial' 有一个包含 hello.c 和 hello.h 的 src 目录。我使用以下行创建了 Makefile.am：

子目录=src。

在 src 目录中，使用以下行创建 Makefile.am，

```
helloprgdir=../
helloprg_PROGRAMS=hello
hello_SOURCES=hello.c 
```

我 cd 到 msys shell 中的 hello-initial 目录，然后按照教程进行操作，生成了以下日志，

```
Raji@COMPUTER_1 ~
$ cd /gold/hello-initial

Raji@COMPUTER_1 /gold/hello-initial
$ autoscan

Raji@COMPUTER_1 /gold/hello-initial
$ aclocal
/usr/share/aclocal/autoopts.m4:22: warning: underquoted definition of AG_PATH_AU
TOOPTS
/usr/share/aclocal/autoopts.m4:22:   run info '(automake)Extending aclocal'
/usr/share/aclocal/autoopts.m4:22:   or see http://sources.redhat.com/automake/a
utomake.html#Extending-aclocal
configure.ac:8: warning: macro `AM_CONFIG_HEADERS' not found in library

Raji@COMPUTER_1 /gold/hello-initial
$ automake -ac
configure.ac:7: installing `./install-sh'
configure.ac:7: installing `./missing'
automake: no `Makefile.am' found for any configure output. 
```

* * *

请帮忙。Rgds,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:11:47.517

配置.ac

```
AC_INIT([project name], [major.minor.revision], [bugreport@bar.xx])
AM_INIT_AUTOMAKE([foreign])dnl foreign means that its not standard gnu project or not strict
AC_PROG_CC
AC_CONFIG_FILES([
Makefile
])
AC_OUTPUT 
```

Autoconf 语言是 'm4' 在 autoconf 信息页面中检查。
automake 的信息页面是一个很好的起点。
[http://www.gnu.org/software/autoconf/](http://www.gnu.org/software/autoconf/)获取文档和 autoconf 本身
安装 autotools 使用
'autoreconf --install'
和更新 autoconf 'autoreconf' 或 'autoconf'

# email - 清除 MAMP（后缀？）Mac OS X 10.6 上的邮件队列 / PHP Mail() 循环失败

> ID：10172979
> 
> 赞同：5
> 
> 时间：2012-04-16T11:08:15.940
> 
> 标签：email, mamp, postfix-mta, php

我想这对我很有帮助，但我正在测试一个循环邮件脚本，该脚本旨在每分钟（在一段时间内）向朋友发送一封电子邮件，只是为了惹恼他们。（给健忘的人的提醒）

我在自己身上测试它是否可以工作，并在此过程中设置了一个无限循环，并给自己发了无数次电子邮件。它在我的本地主机上使用 MAMP Pro。

事故看起来像这样

```
<?php
while (1){
$to = "me@me.com";
$subject = "The Subject";
$message = "The Reminder.";
$from = "me@me.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);
echo "The End.";
}
?> 
```

我运行脚本并将其留在浏览器中大约 40 秒，同时脑子一片空白，从那时起，在关闭 MAMP 之前，我的垃圾邮件文件夹中收到了大约 800 封或更多电子邮件。

我想知道如何清除它的队列。（当 MAMP 关闭时没有收到新的垃圾邮件，当 MAMP 重新启动时）

在终端`sudo postqueue -p`会给我很长的列表但是`postfix -f`/`postfix flush`等产生

> postqueue：致命：无法刷新邮件队列 - 邮件系统已关闭

postsuper -p 给我

```
postsuper: fatal: use of this command is reserved for the superuser 
```

sudo postsuper -d 和一个 ID 将删除一条消息，但我不能全部删除。

* * *

编辑/更新

回答：

我应该一直在摆弄。

sudo postsuper -d ALL 是获胜者导致 385 条消息被删除

那可能很烦人。

适合我尝试玩一个我不完全理解的恶作剧。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T05:49:25.380

我应该一直在摆弄。

sudo postsuper -d ALL 是获胜者导致 385 条消息被删除

那可能很烦人。

适合我尝试玩一个我不完全理解的恶作剧。

# android - Appcelerator Titanium Android 软键盘

> ID：10172985
> 
> 赞同：0
> 
> 时间：2012-04-16T11:08:34.847
> 
> 标签：android, appcelerator

当文本字段获得焦点时，如何让我的键盘显示？

我从哪说起呢？我的文本字段都不起作用。下面的示例代码适用于我的 Android 应用程序。

```
var txtEmail = Titanium.UI.createTextField({
    width: 250,
    height: 35,
    top: 80,
    left: _MarginLeft,
    font:{fontSize:14,fontFamily:'Helvetica Neue'},
    hintText: 'Please enter your email address',
    keyboardType: Titanium.UI.KEYBOARD_EMAIL
});
win.add(txtEmail); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:36:53.103

尝试

```
txtEmail.focus(); 
```

但我认为这是自动的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:16:34.430

如果您删除/注释掉“keyboardType”行会发生什么？

我通常开始注释掉不需要它工作的行。一旦它再次开始工作，您就会很清楚您添加的额外内容之一会使它感到困惑。

编辑：另外，您使用的是哪个仿真器设备？我用过的所有键盘都没有屏幕键盘。他们只有一个总是在屏幕右侧。

# java - 单击按钮时出现 UmbrellaException

> ID：10172987
> 
> 赞同：0
> 
> 时间：2012-04-16T11:08:37.087
> 
> 标签：java, eclipse, gwt, smartgwt

伙计们，我正在使用 GWT，当我单击创建类的按钮时，我收到 UmbrellaException。这是有问题的代码：

```
private void addPerson(){
        final HashSet<Date> dates = new HashSet();

        HorizontalPanel horizontalPanel = new HorizontalPanel();
        HorizontalPanel buttonsPanel = new HorizontalPanel();

        final TextItem textBox = new TextItem();
        textBox.setTitle("Name");

        DynamicForm form = new DynamicForm();

        final ListBox listBox = new ListBox();
        listBox.addItem("DiplomaManager");
        listBox.addItem("Reviewer");
        //listBox.setVisibleItemCount(2);

        DatePicker datePicker = new DatePicker();
        datePicker.addValueChangeHandler(new ValueChangeHandler<Date>() {
              public void onValueChange(ValueChangeEvent<Date> event) {
                  dates.add(event.getValue());
                  SC.say(event.getValue().toString() + " Added to unavailable dates ");
              }
            });

        Button oneMoreButton = new Button("One More");
        oneMoreButton.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {

                //SC.say(listBox.getValue(0));
                getPerson(dates,textBox,listBox);
                RootPanel.get("mainDiv").clear();
                addPerson();
            }

        });

        Button back = new Button("Back");
        back.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
                RootPanel.get("mainDiv").clear();
                onModuleLoad();
            }               
        });

        Button next = new Button("Next");
        next.addClickHandler(new ClickHandler() {
            public void onClick(ClickEvent event) {
                RootPanel.get("mainDiv").clear();
                addDiploma();

            }           
        });

        form.setFields(textBox);

        horizontalPanel.add(form);
        horizontalPanel.add(datePicker);
        horizontalPanel.add(listBox);

        buttonsPanel.add(oneMoreButton);
        buttonsPanel.add(back);
        buttonsPanel.add(next);

        RootPanel.get("mainDiv").add(horizontalPanel);
        RootPanel.get("mainDiv").add(buttonsPanel);
    } 
```

当我单击`oneMoreButton`. 这是 getPerson 来源：

```
private void getPerson(HashSet<Date> set, TextItem box, ListBox list){
        if(list.getSelectedIndex()==0){
            DiplomaLeader leader = new DiplomaLeader(box.getValueAsString(), set);
            DiplomaLeaders.add(leader);
        }else if(list.getSelectedIndex()==1){
            Reviewer reviewer = new Reviewer(box.getValueAsString(), set);
            Reviewers.add(reviewer);
        }else {
            SC.say("Error accured :) Maybe nothing was entered");
        }

    } 
```

DiplomaLeader 和 Reviewer 类是一样的，只是名称不同，便于处理。这是他们的代码：

```
 package org.elsys.salvation.client;

import java.util.Date;
import java.util.HashSet;

public class Reviewer {
    private String name;
    private HashSet<Date> unavailableDates;

    public Reviewer(String name, HashSet<Date> unavailableDates) {
        super();
        this.name = name;
        this.unavailableDates = unavailableDates;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public HashSet<Date> getUnavailableDates() {
        return unavailableDates;
    }

    public void setUnavailableDates(HashSet<Date> unavailableDates) {
        this.unavailableDates.addAll(unavailableDates) ;
    }

} 
```

一切都是自动生成的。我对集合不是很好，所以问题可能来自构造函数。

错误日志：

```
16:10:12.218 [ERROR] [Salvation] Uncaught exception escaped
com.google.gwt.event.shared.UmbrellaException: One or more exceptions caught, see full set in UmbrellaException#getCauses
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:129)
    at com.smartgwt.client.widgets.BaseWidget.fireEvent(BaseWidget.java:67)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException: null
    at org.elsys.salvation.client.Salvation.getPerson(Salvation.java:190)
    at org.elsys.salvation.client.Salvation.access$2(Salvation.java:184)
    at org.elsys.salvation.client.Salvation$5.onClick(Salvation.java:145)
    at com.smartgwt.client.widgets.events.ClickEvent.dispatch(ClickEvent.java:96)
    at com.smartgwt.client.widgets.events.ClickEvent.dispatch(ClickEvent.java:1)
    at com.google.gwt.event.shared.GwtEvent.dispatch(GwtEvent.java:1)
    at com.google.web.bindery.event.shared.EventBus.dispatchEvent(EventBus.java:40)
    at com.google.web.bindery.event.shared.SimpleEventBus.doFire(SimpleEventBus.java:193)
    at com.google.web.bindery.event.shared.SimpleEventBus.fireEvent(SimpleEventBus.java:88)
    at com.google.gwt.event.shared.HandlerManager.fireEvent(HandlerManager.java:127)
    at com.smartgwt.client.widgets.BaseWidget.fireEvent(BaseWidget.java:67)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T16:42:53.847

您的 UmbrellaException 的相关部分是：

```
Caused by: java.lang.NullPointerException: null
    at org.elsys.salvation.client.Salvation.getPerson(Salvation.java:190) 
```

您在第 190 行引用的对象为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:15:49.723

@malkoto1，您在评论中提供的代码片段并未显示正在初始化**审阅者。**

IE`Reviewers = new HashSet<Reviewer>();`

请确保您已正确初始化**Reviewers**并且在第 190 行不为空。

# css - HTML/CSS：IE8 填充/背景位置问题

> ID：10172995
> 
> 赞同：0
> 
> 时间：2012-04-16T11:08:55.907
> 
> 标签：css, html, internet-explorer, cross-browser

有关问题页面的实时视图，请访问此处：[http ://rcnhca.org.uk/sites/first_steps/health-safety-and-security/](http://rcnhca.org.uk/sites/first_steps/health-safety-and-security/)

**问题 1：** 如果您转到该链接并滚动下拉导航并且它是孩子，您会注意到我在每个`li`上设置了一个星形背景图像`mouseenter`。然而，当你第一次在 IE8 中翻转它时，它会从中间开始动画，`li`即使我指定`background-position: -25px 50%;`了，奇怪的是一旦 jquery 内联应用相同的设置，它就会开始按预期工作。

**问题 2：** 如下图所示，IE8 **（在 IE7 中可以正常工作）**错误地渲染了我的填充。`* {margin: 0; padding: 0;}`我已经使用[core.css](http://rcnhca.org.uk/sites/first_steps/wp-content/themes/Mega%20Amazing/library/css/core.css)重置了所有边距和填充：

![填充错误](../Images/5b10820c1a43524cdfc0fdf5049dd415.png)

此导航栏的 HTML 标记为：

```
<header class="one">
    <nav class="container_16 clearfix" id="breadcrumbs">
        <a href="http://rcnhca.org.uk/sites/first_steps" id="home"></a>
        <ul id="parent">
            <li>
                <a href="http://rcnhca.org.uk/sites/first_steps/communication/">Communication</a>
                <ul class="child">
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/getting-started/">Getting started</a></li>
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/health-safety-and-security/">Health, Safety and Security</a></li>
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/personal-and-people-development/">Personal and people development </a></li>
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/quality/">Quality</a></li>
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/equality-diversity-and-rights/">Equality, diversity and rights </a></li>
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/clinical-skills/">Clinical skills</a></li>
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/additional-material/">Additional material</a></li>
                </ul>
            </li>
            <li>
                <a href="#">Select a topic</a>
                <ul class="child">
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/communication/why-communication-is-important/">Why communication is important</a></li>
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/communication/communication-methods/">Communication methods</a></li>
                    <li><a href="http://rcnhca.org.uk/sites/first_steps/communication/written-communication/">Barriers to communication</a></li>
                </ul>
            </li>
        </ul>
    </nav>
</header> 
```

和要启动的 CSS：

```
header {
    width: 100%;
}

header.one {
    height: 50px;
    background: #44a9c4;
}

header.two {
    height: 45px;
    background: #3393b5;
}

/* =============================================================================
   Breadcrumb navigation
   ========================================================================== */

#breadcrumbs {
    padding: 0 3px 3px 0;
    background: #ffffff;
    border: 0px solid;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

#breadcrumbs #home{
    display: block;
    height: 39px;
    width: 55px;
    float: left;
    background-image: url(library/images/home_icon.png);
    background-repeat: no-repeat;
    background-position: center;    
    text-indent: -999em;
}

#breadcrumbs ul#parent {
    height: 39px;
    width: 905px;
    float: right;
    position: relative;
    background: #f38630;
    border: 0px solid;
    -webkit-box-shadow: inset 0px -2px 0px 0px #cf7229;
    -moz-box-shadow: inset 0px -2px 0px 0px #cf7229;
    box-shadow: inset 0px -2px 0px 0px #cf7229;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

#breadcrumbs ul#parent li {
    position: relative;
    height: 39px;
    float: left;
    min-width: 1px; /* required to fix Opera bug */
    padding: 0 47px 0 15px;
    background-image: url(library/images/breadcrumb_seperator.png);
    background-repeat: no-repeat;
    background-position: right;
    line-height: 39px;
}

#breadcrumbs ul#parent li a {
    display: block;
    height: 42px;
    font-size: 0.938em;
    font-weight:900;
    letter-spacing: 0.01em;
    color: #ffffff;
    text-decoration: none;
    text-shadow: 0px 2px 0px #cf7229;
}

#breadcrumbs ul li a:visited {
    color: #ffffff;
}
#breadcrumbs ul#parent li:first-child ul {
    left: -5px;
}
#breadcrumbs ul#parent li ul {
    position: absolute;
    z-index: 1;
    left: -28px;
    top: 42px;
    background: #ffffff;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

.js #breadcrumbs ul#parent li ul {
    display:none;
}

.no-js #breadcrumbs ul#parent li ul {
    left: -999em;
}

#breadcrumbs ul#parent li ul li {
    float: none;
    height: 26px;
    margin: 0 3px 3px 3px;
    padding: 0 15px;
    background-image: url(library/images/star-icon.png);
    background-position: -25px center;
    background-repeat: no-repeat;
    background-color: #738793;
    border-radius: 5px; 
    -moz-border-radius: 5px; 
    -webkit-border-radius: 5px;
    line-height: 26px;
    white-space: nowrap;
}

#breadcrumbs ul#parent li ul li a{
    color: #ffffff;
    text-decoration: none;
    text-shadow: none;
    letter-spacing: 0.01em;
    font-weight: 100;
}

#breadcrumbs ul#parent li ul li:hover{
    background-color: #3393b5;
}

.no-js #breadcrumbs ul#parent li ul li:hover{
    background-position: 6px center;
    text-indent: 10px;
}

#breadcrumbs ul#parent li:hover ul {
    z-index: 2;
}

.no-js #breadcrumbs ul#parent li:hover ul {
    left: -5px;
} 
```

我花了很长时间试图调试这个问题，但无法弄清楚为什么会发生这种情况，如果有人能对这个问题有所了解，那就太好了。（注意：我使用[HTML5SHIV](http://code.google.com/p/html5shiv/)在旧版浏览器中呈现 HTML5 元素）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:07:58.773

我没有答案是什么错误或为什么 IE8 会这样做，但我设法克服了边距问题，方法是从浮动中移除`#home`并`ul#parent`绝对定位它们，`#breadcrumbs`并给它一个明确的高度，如下所示：

```
#breadcrumbs {
    height: 39px;
    padding: 0 3px 3px 0;
    background: #ffffff;
    position: relative;
    border: 0px solid;
    border-left: #3a90a7 2px solid;
    border-right: #3a90a7 2px solid;
    border-bottom: #3a90a7 2px solid;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}

#breadcrumbs #home{
    display: block;
    position: absolute;
    top: 0px;
    left: 0px;
    height: 39px;
    width: 55px;
    float: left;
    background-image: url(library/images/home_icon.png);
    background-repeat: no-repeat;
    background-position: center;    
    text-indent: -999em;
}

#breadcrumbs ul#parent {
    height: 39px;
    width: 885px;
    position: absolute;
    right: 3px;
    top: 0px;
    background: #f38630;
    margin: 0px;
    -webkit-box-shadow: inset 0px -2px 0px 0px #cf7229;
    -moz-box-shadow: inset 0px -2px 0px 0px #cf7229;
    box-shadow: inset 0px -2px 0px 0px #cf7229;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
} 
```

对于背景图像的问题，我制作了一个 jquery 函数，在元素加载后将背景位置添加到内联元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:19:32.650

`HTML5Shiv`在 IE 7-8 中使用有很多问题。如果 html5 标签是`position:static`（浏览器默认），当使用 javascript 在内部动画/移动某些内容时，IE 有时似乎无法重绘这些元素。大多数情况下，如果您能够`position:relative`在这些标签上添加一个，问题就会消失，因为 IE 似乎可以`hasLayout`在相对定位的元素上正确触发。

# c# - Mono 或 .NET Serialport 频繁读取导致高 CPU

> ID：10172996
> 
> 赞同：1
> 
> 时间：2012-04-16T11:08:57.240
> 
> 标签：c#, mono, serial-port, cpu

我正在开发一个轮询 RS232 到 I2C 转换器的应用程序，我连接了一个 i2c 设备，它必须实时轮询，这意味着不断：D 一旦响应到来，我再次重新发出命令......

我的代码：

```
 lock (_locker)
        {
            try
            {

                _serialPort.DiscardInBuffer();
                _serialPort.Write(sendArray, 0, sendArray.Length);
                _serialPort.ReadFixed(headerArray, headerArray.Length);
                returnOperation = (DeviceOperation)((int)headerArray[1] << 8 | (int)headerArray[3]);
                DataToReceive = headerArray[5] * 256 + headerArray[6];
                if (DataToReceive != 0)
                {
                    _serialPort.ReadFixed(recvArray, DataToReceive);
                }
                _serialPort.ReadFixed(EOT, 1); //EOT
            }
            catch (Exception e )
            {
                Logger.Log(Level.Error, _name, "Fauled to execute command.", e);
                return false;                    
            }
        } 
```

其中 ReadFixed 是一个扩展：

```
 public static void ReadFixed(this SerialPort port, byte[] buffer, int count)
    {
        int offset = 0;
        while (count != offset)
            offset += port.Read(buffer, offset, count - offset);

        if (count != offset)
            throw new TimeoutException("ReadFixed did not receive specified bytes in time!");
    } 
```

这段代码在双核处理器上导致大约 40 - 60 % 的 CPU 使用率。我用了ANTS profiler，它说函数READFIXED很热，里面消耗的cpu真的很高。

知道有什么问题吗？为什么这样的cpu使用率？难道我做错了什么 ？

谢谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-02T14:05:11.110

默认情况下`serialport.Read()`将立即返回，无论是否接收到字节。如果设置`serialport.Timeout = 2000`，线程将阻塞，直到字节可用或在 2 秒后超时。这将导致 CPU 使用率降低，并且将提供比`Thread.Sleep`.

请注意，这将阻止您的线程。如果这是一个问题，请在一个`BackgroundWorker`线程中完成所有阅读。您可以使用信号，例如使用`AutoResetEvent`，来有效地与前台线程通信。

# php - 为什么有时我的查询不能简单地用表名执行

> ID：10172997
> 
> 赞同：-1
> 
> 时间：2012-04-16T11:08:57.313
> 
> 标签：php, mysql, mysqli

我不明白为什么我的第二个查询不起作用，而其他类似的查询工作正常，谁能告诉我为什么这些查询的行为不同

查询 1

```
function update_record()
{
    $sql="insert into datas.market set title='".stripslashes($title)."',info='".stripslashes($description)."',graphics='"$image."',source_link='".$link."'";
    mysql_query($sql);
} 
```

查询 2

```
function update_record()
{
    $sql="insert into market set title='".stripslashes($title)."',info='".stripslashes($description)."',graphics='"$image."',source_link='".$link."'";
    mysql_query($sql);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:13:53.663

您是否使用 mysql_select_db() 选择了您的数据库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:28:08.083

第一个查询和第二个查询之间的唯一区别是您在第一个查询中明确指定数据库名称 {datas} 并且您的查询有效。

所以你没有选择连接后使用的数据库。

```
mysql_select_db('datas'); 
```