# StackOverflow 问答 10698000-10698999

# php - PHP框架方向

> ID：10698000
> 
> 赞同：0
> 
> 时间：2012-05-22T07:56:45.443
> 
> 标签：php, zend-framework, symfony

我正在考虑学习 Zend 或 Symfony 框架，但我不知道该选择哪一个，或者我是否真的需要它们。

我通常开发中小型网络应用程序（管理应用程序），我有自己的类来快速开发数据库连接和数据网格，也许可以改进表单开发，因为我仍然构建它们非常“手工”。到目前为止，我没有发现在小型项目中编写“意大利面条代码”有问题，也许在中型项目中是时候考虑使用 MVC 了。

所以，我想知道在哪里投入我的努力：

1.  改进我自己的课程以满足我的（有限）需求
2.  学习 Symfony 2
3.  学习 Zend

我主要关心的是我是否真的需要一个框架，并且我知道有很多关于*symfony 与 zend*的问题和意见，我阅读了它们，结论是：*“由你决定，它们都很好”*，我知道，但我想听听您对此的看法：

我的目标是找到一种开发速度更快的方法，因为我知道 MVC 标准是相似的。另外，如果您想为桌面和移动设备开发，哪个更好？有没有为此内置的实用程序？表格呢？哪些对程序员更友好？

我也在 ASP.NET 中开发，我不喜欢 .NET 的一件事是客户端和服务器的难以集成，我的意思是，如果您选择使用服务器控件编程，JavaScript 不能很好地集成，您可以更好地管理事件服务器，因此也欢迎更好的客户端/服务器集成。

欢迎您提出意见。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:42:37.353

不仅学习诸如 Zend 之类的 MVC 框架会有所帮助，而且不可避免地学习 OOP 原则，这对您来说将变得非常有价值。我说去吧，当你开始使用它们时，你会意识到创建可扩展的 Web 应用程序的潜力。

另外，考虑一个项目，选择一个框架，然后在 github 上设置自己并开始工作。我认为这是找出答案的最好方法。

另外，作为旁注：查看 codeigniter。这很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:39:52.737

在我个人看来，自己开发一个 MVC 框架可能是非常宝贵的经验。您将在此过程中了解编码技术，如果您只是在现有框架之上构建，您可能无法学习这些技术。

我最近开始阅读更多关于 MVC 框架和关于人们如何构建自己的框架并决定开始构建自己的框架的各种教程。

Youtube 上有一些教程，您可以将其用作新框架的基础，或者构建像 CodeIgniter 这样简单的东西。

另一方面，如果您想使用您将来提到的任何一个框架，您使用这些框架的经验可以用于您的简历/简历。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T09:29:42.637

如果你要创建不需要 Zend 或 Symfony 的中小型应用程序，它们都太大而且框架太重，我正在使用 Kohana，我对选择感到非常满意。

Kohana 很容易上手，代码很容易查看和分析。

在 Zend 和 Symfony 中，类是相互结合的，所以如果你正在寻找一些答案，你必须查看 2、3 甚至更多的文件。

开始考虑其他一些框架，一段时间后您可以将它们更改为更大的框架。

# eclipse-plugin - 从插件获取包路径

> ID：10698004
> 
> 赞同：0
> 
> 时间：2012-05-22T07:56:53.817
> 
> 标签：eclipse-plugin

我正在开发一个插件，我需要获取 java 包中存在的 XML 文件的路径，我的问题是如何获取文件的路径？当我按原样运行项目时，我成功获取了文件，但是当我将项目作为 eclipse 应用程序运行时，文件位于另一个路径中。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:10:39.213

您可以使用此行将每个资源作为 InputStream

```
this.getClass().getClassLoader().getResourceAsStream("/yourpackage/namefile"); 
```

希望这有帮助。

# colors - 如何为 QNX 终端添加颜色？

> ID：10698006
> 
> 赞同：1
> 
> 时间：2012-05-22T07:57:05.473
> 
> 标签：colors, ksh, qnx-neutrino

我正在使用 PuTTY 0.62 通过 SSH 连接到 QNX Neutrino。

我启用了“允许终端指定 ASCI 颜色”和“允许终端使用 xterm 256 色模式”。

如何让我的终端 (qansi-m) 为输出文本添加颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:08:40.583

您可以在使用时使用以下命令手动添加颜色`echo`：

图形渲染代码如下：

```
Number  Meaning
0       All attributes off (except charset (10, 11, 12))
1       Bold
2       Half intensity (default to cyan on color screen)
4       Underline (default to red on color screen)
5       Blink
7       Reverse
9       Invisible
10      Exit alternate char set (GR & GL are restored)
11      Enter PC-lower char set (GR & GL are ASCII; C0 & C1 are PC_LO except for ESC)
12      Enter PC-higher char set (GR, C1 & GL, C0 are PC_HI except for ESC)
21      Normal intensity (un-Bold)
22      Normal intensity (un-Half intensity)
24      Disable underline
25      Disable blink
27      Disable reverse
29      Visible
30-37   Set foreground color (30+color_number, see below)
39      Set foreground to saved
40-47   Set background color (40+color_number, see below)
49      Set background to saved 
```

颜色代码如下：

```
colour_num  Description
0           Black
1           Red
2           Green
3           Brown
4           Blue
5           Violet
6           Cyan
7           White 
```

**句法：**

```
{CSI}<setting1>;<setting2>m 
```

八进制的 CSI 是 \0233，因此要打印带有红色前景 (31) 的粗体文本 (1)，您可以：

```
echo "\023331;1m" 
```

[参考](http://www.qnx.com/developers/docs/6.5.0/index.jsp?topic=/com.qnx.doc.neutrino_utilities/d/devc-con.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:03:36.890

您需要配置在 Neutrino 上运行的程序（包括 shell）以发送必要的 ANSI 转义序列。`sshd`无法拦截和修改终端输出。

# animation - 动画后忽略 UITapGestureRecognizer

> ID：10698016
> 
> 赞同：2
> 
> 时间：2012-05-22T07:57:42.473
> 
> 标签：animation, gesture

我已经在视图上附加了一个点击手势，起初它似乎可以工作，但是在动画视图之后，手势被完全忽略，直到视图回到它的原始位置。

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap:)];
[self.cellView addGestureRecognizer:tap];
[tap release]; 
```

在这里，我为右侧的视图设置动画

```
[UIView animateWithDuration:0.3 
                      delay:0.0 
                    options:UIViewAnimationOptionAllowUserInteraction 
                 animations:^
 {
     [cellView setFrame:CGRectMake(cellViewX, cellView.frame.origin.y, cellView.frame.size.width, cellView.frame.size.height)];
     [editView setFrame:CGRectMake(editViewX, editView.frame.origin.y, cellView.frame.size.width, cellView.frame.size.height)];
 }
                 completion:^(BOOL finished)
{
    NSLog(@"Animation complete");
}]; 
```

完成处理程序被触发，但现在点击手势完全被忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:25:22.433

好的，原来我只是犯了一个愚蠢的复制/粘贴错误，我在设置动画帧时不小心使用了错误的值

```
[cellView setFrame:CGRectMake(cellViewX, cellView.frame.origin.y, cellView.frame.size.width, cellView.frame.size.height)];
[editView setFrame:CGRectMake(editViewX, cellView.frame.origin.y, cellView.frame.size.width, cellView.frame.size.height)]; 
```

必须是

```
[cellView setFrame:CGRectMake(cellViewX, cellView.frame.origin.y, cellView.frame.size.width, cellView.frame.size.height)];
[editView setFrame:CGRectMake(editViewX, editView.frame.origin.y, editView.frame.size.width, editView.frame.size.height)]; 
```

所以是的，当您在午夜左右复制/过去代码时，请务必在早上仔细检查！:)

# ruby - 在 Ruby 中将数据从一列转换为多列

> ID：10698018
> 
> 赞同：1
> 
> 时间：2012-05-22T07:57:56.907
> 
> 标签：ruby

我有两列来自预测服务器的 csv 格式的数据，如下所示。第一列是每个预测的每个变量的索引位置。因此，新数据从索引 1 开始。

```
1,2.0
2,1.5
3,1.4
1,1.1
2,2.0
3,1.5
4,2.0
5,1.6
1,2.0
2,4.0

.
.
. 
```

我希望使用这种格式的数据，

```
2.0,1.1,2.0
1.5,2.0,4.0
1.4,1.5
    2.0
    1.6 
```

为了方便工作，空的“单元格”可以用零或 # 填充，例如

```
2.0,1.1,2.0
1.5,2.0,4.0
1.4,1.5,0
0,  2.0,0
0,  1.6,0 
```

有人用优雅的方式在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:36:26.063

这应该适合你：

```
require 'csv'

# read csv contents from file to array
rows = CSV.read("path/to/in_file.csv")

res = Hash.new {|h,k| h[k] = []}
rows.each do |(key, val)|
  res[key] << val
end

# write to output csv file
CSV.open("path/to/out_file.csv", "wb") do |csv|
  # sort res hash by keys, map to have array of values and add to csv
  res.sort_by{|k, v| k}.map{|k, v| v}.each do |r|
    csv << r
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T10:43:44.627

让我们尝试用 Array#transpose 转置它：

```
# first get a 2d representation of the data
rows = CSV.read(fn).slice_before{|row| "1" == row[0]}.map{|x| x.map{|y| y[1]}}

# we want to transpose the array but first we have to fill empty cells
max_length = rows.max_by{|x| x.length}.length
rows.each{|row| row.fill '#', row.length..max_length}

# now we can transpose the array
pp rows.transpose

["2.0", "1.1", "2.0", "5.0"],
["1.5", "2.0", "4.0", "#"],
["1.4",  "1.5", "#", "#"],
["#", "2.0", "#", "#"],
["#", "1.6", "#", "#"], 
["#", "#", "#", "#"] 
```

# c# - 如何隐藏整个班级？

> ID：10698020
> 
> 赞同：1
> 
> 时间：2012-05-22T07:58:02.023
> 
> 标签：c#, class, inheritance, hide, .net-assembly

让我们想象一下：

```
// assembly 01

abstract class Foo
{
    abstract void Bar();
}
class AdvancedFoo : Foo
{
    override void Bar() { base.Foo(); ... }
}
sealed class SuperiorFoo : AdvancedFoo
{
    override sealed void Bar() { base.Foo(); }
} 
```

然后我想从我的**02 asm 引用该程序集****01**并替换中间基类（并且只有它），因此 a 的实例就像它们从程序集**02**继承一样。**`SuperiorFoo`**`AdvancedFoo`****

 ****```
// assembly 02

class AdvancedFoo : Foo
{
    override void Bar() { base.Foo(); ... }
} 
```

**如果02**`SuperiorFoo`程序集不重写类声明，有什么方法可以做到这一点？

 **```
var supFoo = new SuperiorFoo();
supFoo.Bar(); // This one should call assembly 02's Bar(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:02:56.653

不是以你不做的方式，但你可以使用组合而不是继承来解决你的问题：

```
interface IFoo
{
    abstract void Bar();
}
class AdvancedFoo : IFoo
{
    override void Bar() { base.Foo(); ... }
}
sealed class SuperiorFoo : IFoo
{
    private IFoo _fooImplementer;

    public SuperiorFoo()
    {
        _fooImplemnter = new AbstractFoo();
    }

    public SuperiorFoo(IFoo fooImplementer)
    {
       _fooImplementer = fooImplementer;
    }

    void Bar() { _fooImplementer.Foo(); }
} 
```

要从您的第二个程序集调用，您将使用第二个构造函数，并传递您的新“advancedfoo”类的一个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:10:02.157

类型转发可以提供帮助：[Common Language Runtime 中的类型转发](http://msdn.microsoft.com/en-us/library/ms404275.aspx)******

# c++ - 对 scoped_lock 解锁的无关调用

> ID：10698022
> 
> 赞同：2
> 
> 时间：2012-05-22T07:58:12.710
> 
> 标签：c++, multithreading, thread-safety, mutex, condition-variable

在以下博文中：

[http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)

有一个 'push' 方法定义如下：

```
void push(Data const& data)
{
   boost::mutex::scoped_lock lock(the_mutex);
   the_queue.push(data);
   lock.unlock();
   the_condition_variable.notify_one();
} 
```

我的问题是：

1.  为什么在 scoped_lock 变量上调用了显式的“lock.unlock()”？

2.  它的目的是什么？

3.  是否可以安全地删除它，导致“notify_one”方法调用在 scoped_mutex 的范围内？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T08:05:14.913

The unlock is not necessary. It might reduce the time that the mutex is locked for slightly, however.

Keeping it or removing it will not affect thread safety or result in deadlocks.

EDIT: As the article mentions, however, leaving the unlock in there can result in less contention on the mutex. You might as well leave it in. Alternatively, use scope around the mutex, which I personally find highlights the scope of the mutex better if glancing at the code.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T08:08:44.353

The explicit lock is so the that waiting thread isn't woken up by the notification only to have to block on the mutex. This is explained earlier in the article that you linked to.

The reason to still use a `scoped_lock` is to ensure that the mutex is properly unlocked in case the push fails and throws an exception.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T08:09:39.223

第 1 点和第 2 点可以通过您应该尽可能少地持有锁的原则来回答。一旦数据被推送到队列中，您就不再需要锁定它。

您可以按照您的建议取消解锁，但代价是锁定时间更长。

或者，可以通过添加新范围来删除解锁本身，如下所示：

```
void push(Data const& data)
{
   { // new scope
      boost::mutex::scoped_lock lock(the_mutex);
      the_queue.push(data);
   } // scope ends, lock gets destroyed
   the_condition_variable.notify_one();
} 
```

# php - 在生成目录路径时在 PHP 中使用未定义的常量

> ID：10698025
> 
> 赞同：1
> 
> 时间：2012-05-22T07:58:31.320
> 
> 标签：php

我正在使用此代码来定义我的项目的目录路径：

config.php 是

```
<?php
define('CB_HOME', realpath(dirname(__DIR__)));
define('FD_HOME', CB_HOME."/testbot"); 
```

我在其他文件中使用了 CB_home 和 FD_home。

我收到错误：

```
PHP Notice:  Use of undefined constant CB_HOME - assumed 'CB_HOME' in C:\\xampp\\htdocs\\test-bot\\testbot\\bootstrap.php on line 3
PHP Warning:  require_once(CB_HOME/AbstractCbRest.php) [<a href='function.require-once'>function.require-once</a>]: failed to open stream: No such file or directory in C:\\xampp\\htdocs\\test-bot\\testbot\\bootstrap.php on line 3
 PHP Fatal error:  require_once() [<a href='function.require'>function.require</a>]: Failed opening required 'CB_HOME/AbstractCbRest.php' (include_path='.;C:\\xampp\\php\\PEAR') in C:\\xampp\\htdocs\\test-bot\\testbot\\bootstrap.php on line 3 
```

我的 bootstrap.php 是：

```
<?php 
require_once 'config.php';
require_once CB_HOME.'/AbstractCbRest.php'; 
```

哪里出了问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:40:58.087

我的猜测是**[include_path](http://www.php.net/manual/en/ini.core.php#ini.include-path)**设置干扰了您的脚本。所以（正如@deceze 提到的）你可能正在加载一个不正确的（虽然存在）config.php 文件。

也许您可以尝试使用绝对路径来包含您的配置或使用以下内容：

```
require_once dirname(__FILE__) . DIRECTORY_SEPARATOR . 'config.php'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T08:28:02.360

很明显，带有两个“\”的windows路径不起作用。要删除双反斜杠（注意：这不是解决方案，而是一种解决方法），请执行以下操作：

```
$someValue = 'C:\\xampp\\htdocs\\test-bot\\testbot\\'; $someValue = preg_replace('/\\\\/u', '\\', $someValue); 
```

或者在你的情况下：

```
define('CB_HOME', preg_replace('/\\\\/u', '\\', realpath(dirname(DIR)))); 
```

# android - 如何为安卓手机生成构建？

> ID：10698030
> 
> 赞同：0
> 
> 时间：2012-05-22T07:58:59.017
> 
> 标签：android, iphone, cordova

我已经在我的 Mac 中安装了 PhoneGap，我可以使用 Xcode 选择 PhoneGap 项目模板。现在我的疑问是，如何在 Android 设备上部署应用程序？

我是否需要设置 Eclipse 并需要再次安装 PhoneGap Sdk？

我不能在一个平台上开发它并获得其他移动设备的构建吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:26:14.890

是的，如果您下载库，则需要在单独的平台上配置 cordova。虽然你可以使用[https://build.phonegap.com/](https://build.phonegap.com/)

只需编写一次代码，您将获得移动平台的相应可安装文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:02:07.367

我同意楼上的回答。但是如果你继续使用 Phongap 开发应用程序，你最好安装 ecplipse 和 sdk。然后添加以下插件

[http://www.mobiledevelopers.com/](http://www.mobiledevelopersolutions.com/)

它将为您生成整个应用程序设置。您需要替换 www 文件夹。让你也替换正确的cordova js文件。因为它必须是为 Android 创建的。

# javascript - ASP.NET MVC Razor 渲染脚本 javascript

> ID：10698032
> 
> 赞同：0
> 
> 时间：2012-05-22T07:59:13.817
> 
> 标签：javascript, asp.net-mvc, razor, helper

我对 Razor 上的 @helper 有疑问。我正在尝试做一个@helper 简单示例，但我无法获得结果。我需要将自定义文本添加到 javascript 代码中。在萤火虫上我可以看到测试变量是空的，我不明白这一点。这是代码：

```
@fillString()
@renderScript()

@helper fillString(){
  test  = new List<string>() ;
  test.Add("Id : '1'");
  test.Add("Text: 'hello world'");

}
@helper renderScript(){
 <script type="text/javascript">
     var count = "{ @Html.Raw(test.Count) }";
     var testArray = @{ new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(test.ToArray()); };

 </script>
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T13:58:08.547

如果您想要的只是创建一个 JSON 对象并分配给一个 javascript 变量，那么您可以检查一下，

```
 @helper renderScript()
      {
        var test = new Dictionary<string, object>();
        test.Add("Id", 1);
        test.Add("Text", "hello world");
        var json = @Html.Raw(new JavaScriptSerializer().Serialize(test));

        <script type="text/javascript">
           var testObj = @json;
        </script>
    } 
```

**输出：**

```
 var testObj = {Id: 1, Text: "hello world"} 
```

**更新**：如果你想创建一个 JSON 数组检查这个，

```
 var test = new Dictionary<string, object>();
    test.Add("Id", 1);
    test.Add("Text", "hello world");

    var test1 = new Dictionary<string, object>();
    test1.Add("Id", 2);
    test1.Add("Text", "how are you");

    var json = @Html.Raw(new 
               System.Web.Script.Serialization.JavaScriptSerializer()
               .Serialize(new[]{test, test1})); 
```

**输出：**

```
 var testArray = [{"Id":1,"Text":"hello world"},{"Id":2,"Text":"how are you"}]; 
```

# c - 字符串中的 do-while 表单问题

> ID：10698033
> 
> 赞同：0
> 
> 时间：2012-05-22T07:59:22.463
> 
> 标签：c, string, do-while

好的，我是第一次编程的学生，所以请善待；）这是在屏幕上打印“n”次字符串的正确代码...

```
#include <stdio.h>
#include <string.h>

#define MAX 80+1+1 /* 80+\n+\0 */

int main(void)
{
  char message[MAX];
  int i, n;

  /* input phase */
  printf("Input message: ");
  i = 0;
  do {
    scanf("%c", &message[i]);
  } while (message[i++] != '\n');
  message[i] = '\0';

  printf("Number of repetitions: ");
  scanf("%d", &n);

  /* output phase */
  for (i=0; i<n; i++) {
    printf("%s", message);
  }

  return 0;
} 
```

为什么在 do-while 形式中他需要检查是否 message[i++] != '\n' 而不仅仅是 message[i] != '\n'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T08:35:27.497

在我看来，编写该输入循环的正确方法是：

```
fgets(message, sizeof message, stdin); 
```

换句话说，*不要*使用逐字符循环，只需使用标准库的函数读取以换行符结尾的字符串即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:01:21.650

代码中的`do { ... } while(...)`循环一次读取一个字符并将它们存储在`message`. 下一个字符的索引比前一个字符的索引多一个，这就是为什么我们应该`i`在存储当前字符后增加索引变量。算法是：

1.  读取下一个字符并将其存储在`message[i]`.
2.  如果这个字符是`'\n'`，退出。
3.  增加`i`并转到 1。

表达式在用作 的索引后`message[i++]`递增，因此下次我们将查看字符串中的下一个字符。因此，结合步骤 2 和 3。`i``message``while (message[i++] != '\n')`

相同的`for`循环：

```
int i;
for (i = 0; scanf("%c", &message[i]) && message[i] != '\n'; ++i); 
```

但正如@unwind 指出的那样，最好不要使用逐字符输入。

# tomcat - Log4j 登录 catalina-date.log

> ID：10698036
> 
> 赞同：0
> 
> 时间：2012-05-22T07:59:46.203
> 
> 标签：tomcat, logging, log4j

我有一个 servlet，我想登录文件：**catalina-< date >.log**。配置文件**log4j.properties**（位于 catalina.home/lib 中）与[http://tomcat.apache.org/tomcat-6.0-doc/logging.html（log4j](http://tomcat.apache.org/tomcat-6.0-doc/logging.html)段落）中的相同：

```
log4j.appender.CATALINA=org.apache.log4j.DailyRollingFileAppender
log4j.appender.CATALINA.File=${catalina.base}/logs/catalina.
log4j.appender.CATALINA.Append=true
log4j.appender.CATALINA.Encoding=UTF-8
# Roll-over the log once per day
log4j.appender.CATALINA.DatePattern='.'yyyy-MM-dd'.log'
log4j.appender.CATALINA.layout = org.apache.log4j.PatternLayout
log4j.appender.CATALINA.layout.ConversionPattern = %d [%t] %-5p %c- %m%n 
```

问题是它没有登录**catalina-< date >.log**而是登录**catalina**。看来 appender 配置不正确。文件**catalina**似乎是从**log4j.appender.CATALINA.File=${catalina.home}/logs/catalina 创建的。**在配置中。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:55:54.933

如果您想在使用启动脚本启动 Tomcat 时在 win32 上轮换 logs/catalina.out，一种选择是安装一个日志记录器，例如 chronolog（可能是 *NIX-only 的东西），然后修改 catalina。 out 将标准输出通过*管道*传输到该进程，而不是重定向到文件。

**更新**：一个更好的选择（通常在 win32 上）可能是使用 Tomcat 的服务安装程序并将 Tomcat 作为服务运行，但我认为轮换日志文件不会让事情变得更容易。

最好的选择当然是首先不要写入标准输出，以避免需要轮换此日志文件。

# css - 在 Microsoft 环境中脱机安装 SaSS

> ID：10698040
> 
> 赞同：0
> 
> 时间：2012-05-22T08:00:18.043
> 
> 标签：css, windows, sass

有人知道如何在离线模式下安装 SaSS 吗？找不到正确的“gem”文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:26:40.407

宝石文件网址：[http ://rubygems.org/gems/sass](http://rubygems.org/gems/sass)

# android - Android：禁用后无法重新启用键盘保护

> ID：10698042
> 
> 赞同：3
> 
> 时间：2012-05-22T08:00:24.617
> 
> 标签：android, locking, screen, preferences, keyguard

我正在尝试在我的应用程序中创建一个选项（使用复选框首选项），以供用户禁用和重新启用锁定屏幕。我使用 disableKeyguard() 来禁用锁定屏幕，它可以完美地工作，但我无法让 reenableKeyguard() 工作。代码很简单，我不知道为什么它不起作用。

```
public void onSharedPreferenceChanged(SharedPreferences taskprefs,
        String tasks_pref) {
    boolean skiplock = taskprefs.getBoolean("pref_skiplock", false);
    boolean screentimeout = taskprefs.getBoolean("pref_screentimeout",
            false);

    skiplock(skiplock);

    // Log.v("TaskActivity", "Skiplock value is " + skiplock);
    // Log.v("TaskActivity", "ScreenTimeout value is " + screentimeout);
}

private void skiplock(boolean action) {
    KeyguardManager keyguardManager = (KeyguardManager) getSystemService(Activity.KEYGUARD_SERVICE);
    KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
    //
    if (action == true) {
        lock.disableKeyguard();
        Toast.makeText(getApplicationContext(), "Lockscreen Disabled",
                Toast.LENGTH_SHORT).show();
    }
    //
    else if (action==false) {
        lock.reenableKeyguard();
        Toast.makeText(getApplicationContext(), "Lockscreen Enabled",
                Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:28:01.847

问题是每次调用它时都会在 skiplock() 方法内创建（声明）一个新的 Keyguard 对象。一个简单的解决方案是将 keyguard 声明为全局对象并引用该单个对象，以便在方法完成执行时不会重置其状态。

简而言之，只需使用“KeguardLock lock”和“KeyguardManager keyguardManager”作为全局构造函数。

# c# - unitofwork 和 repositorypattern 一个实体对象不能被多个 IEntityChangeTracker 实例引用

> ID：10698046
> 
> 赞同：1
> 
> 时间：2012-05-22T08:00:44.990
> 
> 标签：c#, entity-framework, c#-4.0, entity-framework-4.1

我有一个复杂的对象，它引用了其他对象，我试图从我的 Web 应用程序中保存它。

因此，在我的 web 应用程序中，我调用了业务逻辑，从 bl 中，我调用了 DAL Facade，然后是 DAL。

当我执行 Insert 方法时，我遇到了异常。

**DAL 层中的代码，这是引发异常的地方。**

```
public void InsertEcoBonusRequest(EcoBonusRequest ecoBonusRequest)
        {
            _context.EcoBonusRequests.Add(ecoBonusRequest);
        } 
```

**Unitofwork.cs 中的代码**

```
public void Save()
        {
            _context.SaveChanges();
        }

 private RequestBaseRepository _requestBaseRepository;

 public EcoBonusRequestRepository EcoBonusRequestRepository
            {
                get
                {
                    return _ecobonusworkflowRepository ??
                            (_ecobonusworkflowRepository = new EcoBonusRequestRepository(_context));
                }
            } 
```

**dal门面中的代码：**

```
private  static readonly UnitOfWork UnitOfWork = new UnitOfWork();

        public void Save(EcoBonusRequest ecoBonusRequest)
        {
            UnitOfWork.EcoBonusRequestRepository.InsertEcoBonusRequest(ecoBonusRequest);
        } 
```

**BL中的代码**

```
public void Save(EcoBonusRequest ecoBonusRequest)
        {
            EcoBonusRequestFacade.Save(ecoBonusRequest);

}

**Code in the page.aspx.cs, as you can see the element ecobonusworkflow is neverstored in the database, but the navigation entities are stored already.**

 var dealer = DealerBL.GetDealer(Nuteres);
  var requester = RequesterBL.GetRequester(int.Parse(DdlRequester.SelectedItem.Value));
                var selectedVehicle = VehicleBL.GetVehicle(VehicleInformationControl.Chassis);

var ecoBonusWorkflow = new EcoBonusRequest
                {
                    IsOnHold = true,
                    AmmountWithoutVAT = decimal.Parse(TxtVatExcluded.Text),
                    AmmountWithVAT = decimal.Parse(TxtVatIncluded.Text),
                    BrandReturnedVehicle = TxtBrandReturnedVehicle.Text,
                    ChassisReturnedVehicle = TxtChasisReturnedVehicle.Text,
                    Percentage = (decimal.Parse(TxtVatExcluded.Text)/VehicleInformationControl.InvoicedAmmount)*100,
                    Comments = TxtComments.Text,
                    Customer = new Customer
                    {
                        FirstName = TxtFirstName.Text,
                        LastName = TxtLastName.Text,
                        Address = new Address
                        {
                            Street = TxtStreet.Text,
                            Number = TxtNumber.Text,
                            Box = TxtBox.Text,
                            City = TxtCity.Text,
                            Zip = TxtZip.Text
                        }
                    },
                    CurrentStatus = "Approval1",
                    Dealer = dealer,
                    Requester = requester,
                    VehicleDesctructionDate = DateTime.Parse(TxtVehicleDestructionDateReturnedVehicle.Text, userCulture),
                    DestructionCertificateNumberReturnedVehicle = TxtDestructionCertificateNumberReturnedVehicle.Text,
                    TypeReturnedVehicle = TxtTypeReturnedVehicle.Text,
                    Vehicle = selectedVehicle
                };
                EcoBonusRequest = ecoBonusWorkflow;
                UploadFiles();
                RedirectToPage("~/Requests/confirmation.aspx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:10:42.467

异常表明您的实体或根实体的导航实体已附加到另一个上下文。根据您的架构，您应该创建一个新的上下文并每次都附加它；或者，如果您正在重用上下文，您应该使用新值刷新上下文。

在您的情况下，您似乎正在创建一个新上下文，但尚未处理以前的上下文，因此该实体仍附加到旧上下文。在这种情况下，只需重用旧上下文而不是创建新上下文。

# ruby-on-rails - 在 ruby on rails 中选择产品后动态选择价格

> ID：10698047
> 
> 赞同：1
> 
> 时间：2012-05-22T08:00:45.967
> 
> 标签：ruby-on-rails, jquery, ruby-on-rails-3.2

我在表格中有这个

```
 <%= simpleform_for @customer_bill do |f| %>
    <%= f.label :product_id %>
    <%= f.collection_select :product_id,Product.all,:id,:title, :prompt => "Select a Product", :style => 'width:150px;' %>

     <%= f.label :price %> 
    <%= f.text_field :price, :size=>20, :id =>"price", :class =>"price" %>
    <br/>
/*rest of code*/ 
```

在产品表中，我有“产品标题”和“价格”。我在客户账单和产品模型之间建立了必要的关联。

选择产品后，价格应自动出现。最好的方法是什么？Ajax/Jquery 我该如何处理这个问题？？？？任何指导都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:26:04.680

一种方法是将 jQuery 与 ajax 一起使用。您有两种选择：

*   您的 ajax 请求返回 html 代码 -> 您更改页面中的一个块以使用新价格更新它

*   您的 ajax 返回 json -> 您使用 javascript 函数来解析 json 并更新您的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T09:23:26.460

您可以使用 select-tag 的 data-xxx 属性来存储价格并让 javascript 处理它：

JavaScript：

```
 $(function() {
        $('#products').change(function() {
            var product_id = $(this).val()
            var price = eval($(this).data('prices'))[product_id]
            $("#price").html(price)
        })
    }) 
```

模板（它是 Haml，但我想即使你是 ERb-guy，你也会明白的）：

```
= simple_form_for ........ do |f|
    - prices = Hash[Product.all.map{|p| [p.id, p.price]}].to_json
    = f.association :product, input_html: {data:{prices: prices}, id: 'products'}
    = f.label :price, id: 'price' 
```

请注意使用`f.association`of `f.collection_select`。我认为在您的情况下使用起来更简单。

# java - 如何动态加载具有通用抽象类的 jar？

> ID：10698049
> 
> 赞同：2
> 
> 时间：2012-05-22T08:00:56.407
> 
> 标签：java, jar

我正在尝试开发一个插件系统，它提供了一个在运行时加载 jar 的接口。每个 jar 包含一个从通用抽象类扩展而来的类。例如：

```
//BasicPlugin.java
package byv;

abstract class BasicPlugin {
    abstract public int test(int a);
} 
```

我实现了一个子类：

```
//PluginA.java
package byv;

import byv.BasicPlugin;

public class PluginA extends BasicPlugin {
    @Override
    public int test(int a) {
        return a + a;
    }
} 
```

上面的子类被编译并打包成一个jar文件（PluginA.jar）。这个 jar 只包含 PluginA.class。然后在主项目中使用 URLClassLoader 加载它：

```
private static void loadTest() throws Exception {
    URL url = new File("PluginA.jar").toURI().toURL();
    URLClassLoader ClassLoader = URLClassLoader.newInstance(new URL[] {url});

    Class<?> clazz = Class.forName("byv.PluginA", true, ClassLoader);

    BasicPlugin obj = (BasicPlugin) clazz.newInstance();
    obj.test(2);
} 
```

我已经在主项目中添加了对 BasicPlugin 的引用。但是仍然出现错误：

```
Exception in thread "main" java.lang.IllegalAccessError: class byv.PluginA cannot access its superclass byv.BasicPlugin
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:615)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at byv.Main.loadTest1(Main.java:18)
    at byv.Main.main(Main.java:11) 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:09:40.160

既然是`IllegalAccessError`我建议你`BasicPlugin`公开解决问题。据我所知，您定义的类是包保护的。因此，它不能从不同的类加载器访问。由于这是您的插件所需要的，因此将类设为公开之外的任何其他内容是没有意义的。

还有一件事，`URLClassLoader`有第二个构造函数，您可以在其中指定父加载器。然后使用这个加载器来加载插件类。在更复杂的环境中，您可能需要指定该加载程序。目前，您的代码或多或少地使用了系统加载程序，这在您的示例中是可以的，但我不知道您以后打算做什么。`BasicPlugin.class.getClassLoader()`肯定会为您提供该类的正确加载器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:10:49.427

`URLClassLoader`在构造实例时传递要使用的类加载器上下文：

```
URLClassLoader ClassLoader = URLClassLoader.newInstance(new URL[] {url},
                                                        this.getClassLoader()); 
```

# ios - iOS - 内存警告后应用程序崩溃 - 仪器显示没有泄漏

> ID：10698055
> 
> 赞同：1
> 
> 时间：2012-05-22T08:01:29.923
> 
> 标签：ios, xcode, memory-leaks, uiimage, instruments

我正在开发一个应用程序，它使用`AVCaptureSession`, 来显示来自设备摄像头的“实时”视频流。我还使用从 sampleBuffer`AVCaptureVideoDataOutputSampleBufferDelegate`中捕获静止图像 ( `UIImage`) 的方法来处理这些图像，同时视频仍在屏幕上显示（使用`OpenCV`）。无论如何，有很多代码，比我可以在这里粘贴的要多得多，但这实际上不是重点。

该应用程序将在几秒钟后显示内存警告，再过几秒钟后，静默崩溃。我尝试使用 Instruments 来检查泄漏和内存分配，但没有出现任何可疑情况，根本没有泄漏，内存使用量永远不会超过 5MB（整体和实时字节）。

如何找出触发内存警告的原因？

编辑：我试图在代码中添加一些故意泄漏，这将出现在 Instruments 中，所以它似乎在理论上有效......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:13:34.697

我相信您遇到的问题与使用`UIImage`和 Apple 的幕后缓冲有关。我在使用 iOS 的 PDF 功能时遇到了类似的问题。由于您没有发布任何代码，所以我能具体建议的是发布发布命令（即`CGImageRelease()`，`CGContextRelease()`等等），并始终牢记参考数据与实际数据之间的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:25:21.957

我刚刚找到了原因，虽然我不明白为什么仪器不显示这个......

我用了`[t performSelectorInBackground:sel withObject:[self imageFromSampleBuffer:sampleBuffer]];`

在

`- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection`

方法。在我将其注释掉之后，该应用程序将运行良好。所以这里的问题是，虽然我`NSLock`在选择器中使用了 a，但应用程序会为每个选择器生成越来越多的线程，直到达到内存限制。所以这里的解决方案是在执行选择器之前使用锁，而不是在选择器方法内部。

感谢你的帮助。

# android - NFC 标签贴纸在安装了 ICS 的 Android 上显示空 NFC 标签

> ID：10698057
> 
> 赞同：0
> 
> 时间：2012-05-22T08:01:32.707
> 
> 标签：android, nfc

这是我在 stack over flow 中的第一篇文章。我一直遇到通过 Google Nexus S ICS android 手机读取 NFC 贴纸标签的问题。每当我阅读标签时，它都会显示一条消息 "Empty NFC Tag" 。任何人都可以在这方面帮助我吗？我想读取 NFC Sticker 的 UID。 [http://www.buynfctags.com/nfc-tags/inlays/smartrac-circus-ntag-paper-nfc-tag.html](http://www.buynfctags.com/nfc-tags/inlays/smartrac-circus-ntag-paper-nfc-tag.html) 我已经买了这些标签。但我无法读取它的 UID。请帮助我，因为我需要继续我的项目。

谢谢你 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:55:23.253

我就是这样做的：

```
 void resolveIntent(Intent intent) {
      ...
      String uid = toHex(intent.getByteArrayExtra(NfcAdapter.EXTRA_ID));
      Toast.makeText(this, uid, Toast.LENGTH_LONG).show();
      ...
    } 
```

（toHex是将字节数组转换为字符串的便捷函数）

现在，如果您的问题是标签缺少 UID，那么这可能无济于事。也许您应该订购一些预先格式化并准备好写入/读取的标签。

希望这可以帮助，

血压

# forms - 如何将联系表格添加到静态网站？

> ID：10698058
> 
> 赞同：2
> 
> 时间：2012-05-22T08:01:32.943
> 
> 标签：forms, server-side

我有一个主要是“静态”的网站，没有服务器端代码，只有一点 JavaScript。现在我想添加一个联系表格。我不在乎如何获取联系表单数据（因此只需将此数据写入服务器中的文本文件即可）。

*这个问题最简单*的解决方案是什么？人们通常如何处理这个问题？

我相信我可以添加一些服务器端代码（PHP 或其他东西）来处理表单（例如，将表单数据写入文件），但我更喜欢客户端解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:04:33.100

使用外部工具，它们通常被称为“ [formmailer](http://www.google.com/search?q=formmailer) ”。您基本上将表单提交到他们的服务器，然后他们通过邮件将表单内容发送给您。

如果您不希望这样，则必须在服务器端做一些事情：在服务器上存储数据，而没有从客户端接收数据的服务器端程序，这是不可能的。

* * *

您可以安装 CouchDB 并从 Javascript 进行接口 :) 那时每个人都可以使用它 :)

* * *

将 POST 数据存储在硬盘上的最简单的 PHP 脚本：

```
<?php file_put_contents('/path/to/file', serialize($_POST) . "\n", FILE_APPEND); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:04:25.713

您可以使用 Google Drive 并创建带有必填字段的表单。并在您的静态网页中嵌入代码（将是 iframe）。您将能够在电子表格中获取提交的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T15:24:40.983

您可以使用[qontacto](http://www.qontacto.com)。这是一个免费的联系表格，您可以添加到任何网站。它会向您转发消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-02T13:20:58.290

我为这个确切的需要设置了[fwdform服务。](http://samdobson.github.io/fwdform/)

只需两个简单的步骤即可将表单转发到您的电子邮件。

## 1.注册

发出 HTTP POST 请求以注册您的电子邮件。

```
$ curl --data "email=<your_email>" https://fwdform.herokuapp.com/register
Token: 780a8c9b-dc2d-4258-83af-4deefe446dee 
```

## 2\. 设置您的表格

```
<form action="https://fwdform.herokuapp.com/user/<token>" method="post">
    Email: <input type="text" name="name"><br>
    Name: <input type="text" name="email"><br>
    Message: <textarea name="message" cols="40" rows="5"></textarea>
    <input type="submit" value="Send Message">
</form> 
```

多花几秒钟，您就可以在 Heroku 上[启动您自己的实例。](http://samdobson.github.io/fwdform/#privacy-concerns)

# ios - FBConnect - sessionValid - 在 facebook 网站上删除应用程序之后

> ID：10698061
> 
> 赞同：2
> 
> 时间：2012-05-22T08:01:39.320
> 
> 标签：ios, facebook, session

在我的 iOS iPhone 应用程序中，我使用 facebook connect。SSO 工作得很好，我可以发布到墙上等，但是有一个问题：

1.  我启动我的应用程序
2.  允许 facebook 连接
3.  应用程序中的一切都很好，
    但现在......
4.  我删除了 facebook 网站上的应用程序！
5.  如果我现在启动我的应用程序 - NSLOG 说，FB-Connections 没问题。..？

所以我想，如果我在我的帐户中删除在线应用程序，则 iphone 应用程序没有有效会话并且必须要求重新登录，但这失败了。

怎么了？我怎样才能以正确的方式检查？或者 sessionValid 是如何记录的？在该方法再次运行之前是否有时间限制？那么我的检查（在线删除，重新启动应用程序）是否快速？

- - 更新：

```
- (void)fbLogin:(id)sender{
    NSLog(@"FB Login Alert");

    [self checkForPreviouslySavedAccessTokenInfo];    
    if (!isConnected == YES) {              
        NSLog(@"NO - Facebook Connection");

        UIAlertView *popupFacebook =  [[UIAlertView alloc]                     
                                      initWithTitle:NSLocalizedString(@"Headline_FacebookL", @"Headline")
                                            message:NSLocalizedString(@"Facebook-Text", @"Facebook") 
                                           delegate:self
                                  cancelButtonTitle:NSLocalizedString(@"later",@"Facebook Login später")
                                  otherButtonTitles:NSLocalizedString(@"Facebook",@"Login"), nil];
    popupFacebook.tag = alertFacebook;
    [popupFacebook show];
    [popupFacebook release];

}
    else{
        NSLog(@"Facebook Connection OK");
    }

}

(void)checkForPreviouslySavedAccessTokenInfo:

-(void)checkForPreviouslySavedAccessTokenInfo{
// Initially set the isConnected value to NO.
isConnected = NO;
NSLog(@"FB Status erst mal auf NEIN");

// Check if there is a previous access token key in the user defaults file.
appDelegate.facebook = [[Facebook alloc] initWithAppId:@"XXXXXXXXX" andDelegate:(AppDelegate *) [[UIApplication sharedApplication] delegate]];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    appDelegate.facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    appDelegate.facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}  

    // Check if the facebook session is valid.
    // If it’s not valid clear any authorization and mark the status as not connected.
if (![appDelegate.facebook isSessionValid]) {
        //[facebook authorize:permissions];
        isConnected = NO;
        NSLog(@"FB NO");
    }
    else {

        isConnected = YES;
        NSLog(@"FB YES");
    }
} 
```

转变：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"clicking");
    //NSString *title = [actionSheet buttonTitleAtIndex:buttonIndex];

    if (alertView.tag == alertWelcome )  {
        if (buttonIndex == 0) {
            NSLog(@"close");
        }
    }  

    else if (alertView.tag == alertFacebook )  {

        if (buttonIndex == 0) {
            NSLog(@"später");
        }  

        if (buttonIndex == 1) {
            //self.label.text = NSLocalizedString(@"Facebook",@"Login"),
            [self fbActive:nil];
            NSLog(@"Login to FB");
        }  

    }
} 
```

权限：

```
-(void)fbActive:(id)sender{

    if (![appDelegate.facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"user_likes", 
                                @"read_stream",
                                @"user_status",
                                @"publish_stream",
                                //@"publish_actions",
                                //@"manage_pages",
                                @"read_requests",
                                nil];
        [appDelegate.facebook authorize:permissions];
        NSLog(@"FB - Permissions");
        [permissions release];   
    }
} 
```

# php - Cakephp 记录生产服务器中的所有错误

> ID：10698065
> 
> 赞同：1
> 
> 时间：2012-05-22T08:01:54.483
> 
> 标签：php, cakephp-2.0

我已经浏览了这个链接，但它对我没有帮助。

[当调试为 0 时，如何使用 cakephp 记录 php 错误](https://stackoverflow.com/questions/4904306/how-do-you-log-php-errors-with-cakephp-when-debug-is-0)

当调试为 0 时，我需要记录所有错误。我正在使用 cakephp2.0 。我应该在 core 中提供哪些设置？我尝试使用 define('LOG_ERROR', 2); 并故意犯了一个错误，但它没有插入到 cake/app/tmp/logs 文件夹下的任何日志文件中。

这取决于 php.ini 设置吗？

# c# - 正则表达式 - 在范围内或零

> ID：10698066
> 
> 赞同：1
> 
> 时间：2012-05-22T08:01:55.893
> 
> 标签：c#, regex

我需要一个正则表达式来检查项目订单计数是 0 还是介于 2500 和 999999 之间。这甚至可能吗？

示例：您可以订购 0 件（无商品），也可以订购 2500 件或更多商品。

**更新：** 这需要是一个正则表达式，因为它将用于 MVC 中的验证属性。

```
[RegularExpression(@"SomeRegExpression", ErrorMessage = "Min order error")] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T08:09:39.973

如果它必须是正则表达式：

```
^(?:0|\d{5,6}|2[5-9]\d\d|[3-9]\d\d\d)$ 
```

解释：

```
^                # Start of string
(?:              # Either match...
 0               # 0
|                # or
 \d{5,6}         # a five- or six-digit number
|                # or
 2[5-9]\d\d      # 2500-2999
|                # or
 [3-9]\d\d\d     # 3000-9999
)                # End of alternation
$                # End of string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T08:12:14.527

您还可以编写自己的自定义验证属性。

有关示例，请参阅[如何为 MVC](https://stackoverflow.com/questions/2383669/how-to-create-custom-validation-attribute-for-mvc)和/或[http://www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3创建自定义验证属性。](http://www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3)

例如;

```
public class CustomValidationAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        int number = value as int;
        return (number == 0 || (number >= 2500 && number <= 999999));
    }
} 
```

# java - 在 Java 中获取欧元兑换率

> ID：10698068
> 
> 赞同：3
> 
> 时间：2012-05-22T08:02:00.887
> 
> 标签：java, interface, euro

我有一个必须将美元转换为欧元的应用程序，反之亦然。有没有可以用来获取当前汇率的接口或 API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:04:47.217

你可以使用谷歌计算器，看看[这个例子](http://blog.caplin.com/2011/01/06/simple-currency-conversion-using-google-calculator-and-java/)如何使用它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:09:30.970

如果您不是 Google 的粉丝，您也可以使用[Yahoo Converter](http://www.techiegyan.com/2009/01/14/currency-converter-in-java-using-financeyahoocom/)。

他们那里也有代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:09:57.583

[该](http://www.exchangerate-api.com/java-currency-api)站点似乎提供了您正在寻找的功能。但不幸的是，它不是免费的。[该](http://currencies.apps.grandtrunk.net/)站点提供 REST 风格的 API，包括用于非盈利用途的历史转换率。要将其用于您的目的，您所要做的就是以所述格式向以下 URL 发送请求：

`http://currencies.apps.grandtrunk.net/getlatest/EUR/USD`

支持的货币代码列表包括美元和欧元，其中包括：

> ATS, AUD, BEF, BGN, BRL, CAD, CHF, CNY, CYP, CZK, DEM, DKK, EEK, ESP, EUR, FIM, FRF, GBP, GRD, HKD, HRK, HUF, IDR, IEP, ILS, INR, ITL, JPY, KRW, LKR, LTL, LUF, LVL, MCF, MTL, MXN, MYR, NLG, NOK, NZD, PHP, PLN, PTE, RON, RUB, SEK, SGD, SIT, SKK, SML, THB、TRY、TWD、USD、VAL、VEB、VEF、ZAR

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T08:19:51.423

No Body 免费出售数据。如果您想在您的应用程序中拥有这样的功能并且您要获取的信息将以定制的方式进行，那么您需要支付一些钱

[http://www.exchangerate-api.com/java-currency-api](http://www.exchangerate-api.com/java-currency-api)

或者

[http://www.oanda.com/rates/currency-data/](http://www.oanda.com/rates/currency-data/)

# javascript - 在 Javascript 中动态访问函数参数

> ID：10698070
> 
> 赞同：1
> 
> 时间：2012-05-22T08:02:01.663
> 
> 标签：javascript, function, dojo

我有一个像这样的 dojo 定义函数

```
define([
    // some param
]),function(foo, bar, baz, fooz, ...){
    return{
        // some custom code
    }
} 
```

我想动态访问我的函数 args(foo, bar, ...)

我知道我可以把它包装成 var

```
foo : foo 
```

并使用

```
this[objectToCall].methodToRun(); 
```

在这个例子中，调用应该是

```
this.run('foo');

function run(objectToCall){ // foo    
    this[objectToCall].methodToRun(); // refer to foo
} 
```

有没有办法在不将其包装成 var 的情况下实现这一点？

提前谢谢

编辑 ：

更进一步，我可以使用`arguments`关键字。

```
function(foo, bar, baz, fooz, ...){
    var functionArguments = arguments;
    return{
        // some custom code
    }
} 
```

但我无法访问 foo 对象`functionArguments['foo']`；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:31:27.373

您似乎正在尝试使用类似于接口定义的“methodToRun”函数。

当您说想要动态选择正确的对象时，听起来您将对象存储在代码中某处的某个 var 中（例如：var selectedObject = foo;）

作为动态的，您应该能够使用 selectedObject.methodToRun(); 调用对象上的方法；

（但现在由您决定只提供实际上实现“methodToRun”的对象，否则您将收到“对象不支持此方法”错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:56:42.587

找到了解决方案：

```
function(method){
    var len = functionArguments.length;
    for(var i = 0; i < len; i ++){
        if(typeof functionArguments[i] === "object")
            if(functionArguments[i].name == method)
                functionArguments[i].test();
            } 
```

并在我的对象定义中添加了一个名称参数

# c++ - 谁能解释一下我关于二叉树的作业？我觉得很奇怪

> ID：10698071
> 
> 赞同：0
> 
> 时间：2012-05-22T08:02:02.237
> 
> 标签：c++, binary-tree

我有一个构建二叉树的任务如下：

1.  建立理想的平衡树。
2.  查找具有指定值的节点数量
3.  将树转换为二叉搜索树

所以......对我来说奇怪的是：我在任何地方都读到二叉树，它们从不包含具有重复值的节点，但在第二个任务中，我必须找到数学输入值的节点数量......如果它不只是 0 或 1我按规则建树？

或者，也许，我构建的第一棵树必须是无序的并且允许重复？如果我将树重建为二叉搜索树，我只需要删除重复项并通过左少右多规则对节点进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T08:04:34.420

二叉树对重复值没有限制。二叉树是每个节点最多有 2 个子节点的树。就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:05:53.067

二叉搜索树可能有重复项，例如多重集和多重映射。只需定义是否将具有相同键的元素放在给定节点的右子树或左子树中，并且没有任何实质性变化。

编辑：同样在第二个任务中，你不需要二叉搜索树。如果我做对了，你那里只有一棵二叉树（即它没有排序）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T08:06:18.243

您可以轻松地将其中一项规则设置为 >= 而不仅仅是 > 从而轻松找到所有元素...

# ios - iOS：ASIHTTPRequest POST 不起作用，而 GET 使用完全相同的 URL

> ID：10698074
> 
> 赞同：1
> 
> 时间：2012-05-22T08:02:15.783
> 
> 标签：ios

我在我的代码中使用了 ASIHTTPRequest API。GET 请求成功，但 POST 请求不起作用。唯一的区别是，在 POST 请求的情况下，我附加了用 NSUTF8Encoding 编码的 post 数据。POST API 适用于 Android 应用程序。以下是我的代码：

```
NSString *strToken = [NSString stringWithFormat:@"access_token=\"%@\"", securityToken];

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:url]];
[request addRequestHeader:@"ContentType" value:@"application/json"];
[request addRequestHeader:@"Authorization" value:strToken];

if( type == GET )
    [request setRequestMethod:@"GET"];
else if( type == POST )
{
    [request setRequestMethod:@"POST"];
    [request appendPostData:[data dataUsingEncoding:NSUTF8StringEncoding]]; 
}
else if( type == PUT )
{
    [request setRequestMethod:@"PUT"];
    [request appendPostData:[data dataUsingEncoding:NSUTF8StringEncoding]]; 
}

[request setDelegate:owner];
[request startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T08:12:03.237

请求标头键“ContentType”中有错字。预期的键是“内容类型”。

# ios - 如何显示附近蜂窝塔的信息？

> ID：10698082
> 
> 赞同：2
> 
> 时间：2012-05-22T08:03:00.340
> 
> 标签：ios, ios5, cell, core-telephony

我正在寻找一种方法来显示有关位于附近的手机信号塔的信息。我知道我必须使用 CoreTelephony 框架。我不需要部署它，所以我不关心Apple是否批准。

请帮助我找到合适的方法。我在 iPhone 4S 上使用 iOS 5.0.1。

谢谢！

# regex - 用于搜索子集的正则表达式

> ID：10698084
> 
> 赞同：0
> 
> 时间：2012-05-22T08:03:13.940
> 
> 标签：regex, search

我正在寻找一种将字符串搜索到一个大集合中的方法，但不考虑包含特定字符序列的字符串。例如：

原来的集合是：

```
proc-smile
func-get-aaa
func-get-smile
func-has-ccc
func-has-ddd
func-hello-bye
func-cheers-hey
func-smile-lol 
```

如果用户搜索“sm”，正则表达式必须只考虑由不包含“-get-”或“-has-”子字符串的字符串组成的子集。因此，结果必须是：

```
proc-smile
func-smile-lol 
```

（没有 func-get-smile）

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:05:28.883

```
^(?!.*-(?:get|has)-).*sm 
```

将匹配包含`sm`但不包含`-get-`或`-has-`其中的字符串。

`(?!...)`是一个否定的[前瞻断言](http://www.regular-expressions.info/lookaround.html)。

# jquery - 如何从 jQuery 触发 JSF 渲染

> ID：10698085
> 
> 赞同：2
> 
> 时间：2012-05-22T08:03:19.040
> 
> 标签：jquery, jsf, jsf-2, richfaces

`<f:ajax render>`是否可以在 jQuery中触发 jsf ？

例如这样的：

```
/* if component Y changes
    trigger render event on component Y */

$("#source_compoment").bind("change", function(e) {
    $("#target_component").trigger("render");
}); 
```

或者换句话说，jQuery 中是否有“f:ajax render”的等价物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:20:37.860

是的，做一个隐藏按钮

```
<h:commandButton id="myHiddenButtonID" value="RenderSomething" style="display:none">
    <f:ajax render="target_component"></f:ajax>
</h:commandButton> 
```

并从 js 中单击它

```
$("#myHiddenButtonID").click(); 
```

在您的特定情况下，它将如下所示：

```
$("#source_compoment").bind("change", function(e) {
    $("#myHiddenButtonID").click();
}); 
```

顺便说一句，在 jQuery 中没有“f:ajax render”的等效项，您只需使用 jquery 单击隐藏的 JSF 按钮。

* * *

**编辑**

如果第三方 JSF 库使用相关，您可以使用

[Primefaces RemoteCommand -（使用更新属性）](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)

或者

[Richfaces/a4j:jsFunction - （使用 reRender 属性）](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_jsFunction.html)

# ajax - ajax 安全性防止通过浏览器访问 url

> ID：10698086
> 
> 赞同：1
> 
> 时间：2012-05-22T08:03:33.797
> 
> 标签：ajax, asp-classic, security

我有 default.asp，它通过 ajax 与 3 个不同的 *.asp 联系。我的问题是，如果人们试图以 url 的形式打开这些页面，是否有人试图在不访问 default.asp 的情况下执行这些 *.asp 页面。[http://sample.com/ajax1.asp?get=foo](http://sample.com/ajax1.asp?get=foo)是一个示例，如何防止这种访问我的 ajax 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:12:35.167

您可以检测调用是否是 AJAX 请求来寻找`HTTP_X-Requested-With`标头，但即使您可以检测到 AJAX 调用，**您也应该对所有请求进行身份验证**，因为恶意用户可以轻松欺骗所有标头。

检测 AJAX 标头：

```
If Request.ServerVariables("HTTP_X-Requested-With") = "XMLHttpRequest" Then
   ''do stuff
Else 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T23:06:43.360

解决方案是将粗线添加到 ajax 请求中。

```
 function callit()
    {
     if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
     xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){document.getElementById('alp').innerHTML=xmlhttp.responseText;}}
     xmlhttp.open("get", "call.asp", true);
     **xmlhttp.setRequestHeader("X-Requested-With","XMLHttpRequest");**
     xmlhttp.send();
    } 
```

# sql-server - Microsoft SQL Server 2005 XP_DELETE_FILE

> ID：10698088
> 
> 赞同：1
> 
> 时间：2012-05-22T08:03:35.127
> 
> 标签：sql-server

我不幸继承了一个系统，这给我带来了很大的问题。它在 SQL Server 2005 上运行，我遇到的问题是在数据库维护计划中。清理例程正在使用未记录的 XP_DELETE_FILE 命令，并且或多或少每晚都会卡住。

看来我们的夜间备份程序（我无法控制）正在备份 XP_DELETE_FILE 命令试图删除的文件。与失败或只是绕过文件相反，它似乎挂起。这意味着不会执行维护计划中的其他步骤。

我一直在寻找解决方案：

1.  不使用 XP_DELETE_FILE 命令，或
2.  在我运行 XP_DELETE_FILE 之前检查文件访问权限。

但我没有这样的运气。任何人有任何想法或解决方案，我会很高兴地感谢他们。

问候

代码示例：

```
 -- Delete old backup files
  IF (@CurrentCommandOutput02 = 0 AND @Verify = 'N' AND @CurrentCleanupDate IS NOT NULL)
  OR (@CurrentCommandOutput02 = 0 AND @Verify = 'Y' AND @CurrentCommandOutput03 = 0 AND @CurrentCleanupDate IS NOT NULL)
  BEGIN
    IF @BackupSoftware IS NULL
    BEGIN
      SET @CurrentCommand04 = 'DECLARE @ReturnCode int EXECUTE @ReturnCode = master.dbo.xp_delete_file 0, N''' + REPLACE(@CurrentDirectory,'''','''''') + ''', ''' + @CurrentFileExtension + ''', ''' + CONVERT(nvarchar(19),@CurrentCleanupDate,126) + ''' IF @ReturnCode <> 0 RAISERROR(''Error deleting files.'', 16, 1)'
    END

    IF @BackupSoftware = 'LITESPEED'
    BEGIN
      SET @CurrentCommand04 = 'DECLARE @ReturnCode int EXECUTE @ReturnCode = master.dbo.xp_slssqlmaint N''-MAINTDEL -DELFOLDER "' + REPLACE(@CurrentDirectory,'''','''''') + '" -DELEXTENSION "' + @CurrentFileExtension + '" -DELUNIT "' + CAST(DATEDIFF(mi,@CurrentCleanupDate,GETDATE()) + 1 AS nvarchar) + '" -DELUNITTYPE "minutes" -DELUSEAGE'' IF @ReturnCode <> 0 RAISERROR(''Error deleting LiteSpeed backup files.'', 16, 1)'
    END

    EXECUTE @CurrentCommandOutput04 = [dbo].[CommandExecute] @CurrentCommand04, '', 1, @Execute
    SET @Error = @@ERROR
    IF @Error <> 0 SET @CurrentCommandOutput04 = @Error
  END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:34:59.867

你想删除什么样的文件？

xp_delete_file 是 SQL 2000 的一个 SP。它检查要删除的文件的第一行，以验证它是 SQL 备份文件还是 SQL 报告文件。它不根据文件扩展名进行检查。

也许如果您发布一些删除代码会更容易提供帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:22:38.443

我建议使用 CLR 函数来执行文件操作。创建一个操作文件的程序集（例如，使用[`File.Delete`](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)，在系统中加载此程序集，`EXTERNAL_ACCESS`并使用您添加的 CLR 函数而不是已弃用的、未记录的 XP 进行标记。请参阅[如何：创建和运行 CLR SQL Server 存储过程](http://msdn.microsoft.com/en-US/library/5czye81z%28v=vs.80%29).

# android - 使用磁场计算旋转矩阵

> ID：10698092
> 
> 赞同：2
> 
> 时间：2012-05-22T08:03:51.083
> 
> 标签：android, accelerometer, sensors, rotational-matrices, magnetometer

在获取它包含的旋转矩阵值中，`public static boolean getRotationMatrix (float[] R, float[] I, float[] gravity, float[] geomagnetic)` 我该如何计算`float[] gravity`？我找到了一个代码示例，它计算`orientation`使用两者`Accelerometer`和`Magnetic field`

```
boolean success = SensorManager.getRotationMatrix(
   matrixR,
   matrixI,
   valuesAccelerometer,
   valuesMagneticField);

if(success){
SensorManager.getOrientation(matrixR, matrixValues);

double azimuth = Math.toDegrees(matrixValues[0]);
double pitch = Math.toDegrees(matrixValues[1]);
double roll = Math.toDegrees(matrixValues[2]);

readingAzimuth.setText("Azimuth: " + String.valueOf(azimuth));
readingPitch.setText("Pitch: " + String.valueOf(pitch));
 readingRoll.setText("Roll: "+String.valueOf(roll));
} 
```

我的问题是：

*   方向值是旋转矩阵值吗？
*   如果没有，那么我如何实现此代码以使用磁性获取旋转矩阵值？场地？

要获得旋转矩阵，我使用此代码

```
 public void onSensorChanged(SensorEvent sensorEvent) {
    if (timestamp != 0) {
        final double dT = (sensorEvent.timestamp - timestamp) * NS2S;
            double magneticX = sensorEvent.values[0];
            double magneticY = sensorEvent.values[1];
            double magneticZ = sensorEvent.values[2];
                        double omegaMagnitude =Math.sqrt(magneticX*magneticX + magneticY*magneticY + magneticZ*magneticZ);

                        if (omegaMagnitude > EPSILON) {
                            magneticX /= omegaMagnitude;
                            magneticY /= omegaMagnitude;
                            magneticZ /= omegaMagnitude;
        }
                        double thetaOverTwo = omegaMagnitude * dT / 2.0f;
                        double sinThetaOverTwo =Math.sin(thetaOverTwo);
                        double cosThetaOverTwo = Math.cos(thetaOverTwo);
                        deltaRotationVector[0] = (double) (sinThetaOverTwo * magneticX);
                        deltaRotationVector[1] = (double) (sinThetaOverTwo * magneticY);
                        deltaRotationVector[2] = (double) (sinThetaOverTwo * magneticZ);
                        deltaRotationVector[3] = cosThetaOverTwo;

    }
     double[] deltaRotationMatrix = new double[9];
     SensorManager.getRotationMatrixFromVector(deltaRotationMatrix, deltaRotationVector);
} 
```

但问题是这`getRotationMatrixFromVector`对传感器来说是未定义的。知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:06:34.250

方向不是旋转矩阵，因为它只为您提供与磁北相关的角度。您可以获得**旋转矩阵**（方向余弦矩阵），它将帮助您以这种方式将坐标从设备框架转换到地球框架：

![来自维基百科的 DCM](../Images/5972d95b94bf5dfc3efdf7427dabe732.png)

*和*

![方位角](../Images/67b52971cb9463ecb473f6195c5282c1.png) = 方位角（弧度）

![沥青](../Images/a30e29c5d10f7fa4b267a69c35e5bd27.png) = 间距（弧度）

![卷](../Images/415ca04ea06775a1dee971369a1e96f3.png) =滚动（弧度）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:05:11.547

我知道这是一个旧线程，但如果它有帮助，对于 Android，我认为 3x3 旋转矩阵实际上是由已批准答案的变体给出的。具体来说，在Android中，旋转矩阵是

```
     (cosφ cosψ - sinφ sinψ sinθ) sinφ cosθ ( cosφ sinψ + sinφ cosψ sinθ)
    -(sinφ cosψ + cosφ sinψ sinθ) cosφ cosθ (-sinφ sinψ + cosφ cosψ sinθ)
              -sinψ cosθ -sinθ cosφ cosθ

```

在哪里

```
    φ = 方位角
    θ = 间距
    ψ = 滚动

```

对应于 3x3 Android 旋转矩阵 R[0] 到 R[8]（问题中的矩阵R）通过

```
    R[0] R[1] R[2]
    R[3] R[4] R[5]
    R[6] R[7] R[8]

```

# jquery - 为什么jQuery显示错误的页面？

> ID：10698094
> 
> 赞同：1
> 
> 时间：2012-05-22T08:04:02.083
> 
> 标签：jquery, html

这是 jQuery：

```
$(document).on('change', '.ui-slider-switch', function () {
    if ($(this).val() == 'on') {
        $("#content1").hide();
        $("#content2").show();
    }
    else {
        $("#content1").show();
        $("#content2").hide();
    }
}); 
```

我的 HTML：

```
<div id="switch" data-role="fieldcontain">      
    <select name="slider" id="flip-a" data-role="slider">
        <option value="off"></option>
        <option value="on"></option>
    </select>   
</div> 
```

在我的站点中，我有时会使用自定义 URL（并使用 从中获取数据`$ _GET`）。当页面重新加载时，我总是得到`$("#content2").show();`而不是`$("#content1").show();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:09:55.730

尝试改变：

```
$(document).on('change', '.ui-slider-switch', function () { 
```

至：

```
$(document).on('change', 'select[name=slider]', function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:49:04.240

您确定事件处理程序中的代码正在运行吗？（即您是否使用`alert`or`console.log`或类似的东西对其进行了测试？）如果页面刚刚重新加载，并且没有人（人或代码）更改选择的值，则处理程序原则上不会运行。

我建议`change`在您的页面（或元素）完成加载后手动触发事件，这样将检查/双重检查正确的值：

```
$('.ui-slider-switch').trigger('change'); 
```

确保在页面刚刚完成重新加载后运行代码。

# git - github从分支创建项目

> ID：10698095
> 
> 赞同：1
> 
> 时间：2012-05-22T08:04:17.560
> 
> 标签：git, github, git-branch, git-fork

我有 master 分支`https://github.com/Fivell/PHP_PROJECT/`，最近为 php 5.3 创建了新分支`https://github.com/Fivell/PHP_PROJECT/tree/php5.3`

但我认为在这种情况下创建 fork 而不是分支会更好。有人可以帮忙吗？我如何创建自己项目的 fork，而不是将其与 fork php5.3 合并，而不是删除分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:50:50.690

你不能在 GitHub 上 fork 自己的项目。

一种解决方案是创建另一个帐户，然后从那里分叉。

另一个是“手动分叉”，即您的 GitHub 存储库的本地克隆“上传”（`git push`）到一个新的空 gitHub 存储库（但两个存储库之间不会有任何“拉取请求”链接）

看到[这个要点](https://gist.github.com/1834845)：

> 假设我们有一个名为“<code>foo”的现有项目，并且我们想要创建一个名为“<code>bar”的分支。
> 
> 首先，在 GitHub 上创建一个名为“<code>bar”的新项目。
> 
> 接下来，使用名称 '<code>bar' 克隆 foo：

```
$ git clone git@github.com:YOURNAME/foo.git bar
$ cd bar 
```

> 接下来，编辑您的 Git 配置文件并将原始 URL 替换为您的新 URL：

$ vim .git/配置

> 将您的原始存储库添加为上游源：

```
$ git remote add upstream git@github.com:YOURNAME/foo.git 
```

> 最后，将您的新存储库推送到 GitHub：

```
$ git push -u origin master 
```

> `bar`现在您可以按预期从新的 repo ( ) 中推/拉。
> 您还应该能够使用以下命令合并上游更改：

```
$ git fetch upstream
$ git merge upstream/master 
```

* * *

OP补充说：

> 有机会从新的分叉创建拉请求到当前的主控吗？任何编辑？

我在评论中回复：

不会有任何拉取请求，只会从您的“手动分叉”存储库中直接获取到您的主 GitHub 存储库的本地克隆。
即：您将`remote`在本地存储库中添加第二个，指向您在 GitHub 上的“手动分叉”

因此，如果您在 GitHub 上的第二个存储库（“手动分叉”）上发布任何修改，您可以直接在原始 GitHub 存储库的本地克隆中获取它们，合并它们，测试它们，最后将它们推回原始存储库.

# c# - c# 十六进制字符串到字节图像和过滤

> ID：10698097
> 
> 赞同：2
> 
> 时间：2012-05-22T08:04:21.170
> 
> 标签：c#, image, filtering

我需要一些帮助将十六进制字符串转换为图像

做一些研究我想出了这个代码：

```
private byte[] HexString2Bytes(string hexString)
{
    int bytesCount = (hexString.Length) / 2;
    byte[] bytes = new byte[bytesCount];
    for (int x = 0; x < bytesCount; ++x)
    {
        bytes[x] = Convert.ToByte(hexString.Substring(x*2, 2),16);
    }

    return bytes;
}

public bool ByteArrayToFile(string _FileName, byte[] _ByteArray)
{
    try
    {
            System.IO.FileStream _FileStream = new  System.IO.FileStream(_FileName, System.IO.FileMode.Create, System.IO.FileAccess.Write);
            _FileStream.Write(_ByteArray, 0, _ByteArray.Length);
            _FileStream.Close();
            return true;
     }
     catch (Exception _Exception)
     {
         MessageBox.Show(_Exception.Message);
     }

        return false;
 } 
```

问题是生成的图像几乎全是黑色的，我想我需要应用一些过滤器来更好地转换灰度（因为原始图像只有灰度）

谁能帮我？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:10:24.467

您不需要应用任何过滤器。我猜`hexString`您作为输入传递的变量只是一个黑色图像。以下对我很有用：

```
class Program
{
    static void Main()
    {
        byte[] image = File.ReadAllBytes(@"c:\work\someimage.png");
        string hex = Bytes2HexString(image);

        image = HexString2Bytes(hex);
        File.WriteAllBytes("visio.png", image);
        Process.Start("visio.png");
    }

    private static byte[] HexString2Bytes(string hexString)
    {
        int bytesCount = (hexString.Length) / 2;
        byte[] bytes = new byte[bytesCount];
        for (int x = 0; x < bytesCount; ++x)
        {
            bytes[x] = Convert.ToByte(hexString.Substring(x * 2, 2), 16);
        }

        return bytes;
    }

    private static string Bytes2HexString(byte[] buffer)
    {
        var hex = new StringBuilder(buffer.Length * 2);
        foreach (byte b in buffer)
        {
            hex.AppendFormat("{0:x2}", b);
        }
        return hex.ToString();
    }
} 
```

# android - BitmapFactory.decodeStream 偶尔返回 null

> ID：10698098
> 
> 赞同：2
> 
> 时间：2012-05-22T08:04:31.333
> 
> 标签：android

我遇到了以下问题。我的资产文件夹中有大图像。当用户第一次打开应用程序时，我会针对他们的设备优化这些图像并将其缓存到 SD。

我使用以下命令从资产中打开文件：

```
stream = getResources().getAssets().open("assetName"); 
```

我包装在 BufferedInputStream

```
BufferedInputStream bis = new BufferedInputStream(stream, BUFFER_SIZE); 
```

然后我只是用 BitmapFactory 解码图像并用结果做所有的事情。好吧，我实际上曾经为较小的设备传递 inSampleSize，但后来我选择将图像的半尺寸版本与全尺寸一起存储，因为它大大提高了图像解码速度（我怀疑是由于 IO 操作）。

我遇到的问题是我收到`BitmapFactory.decodeStream`为它们返回 null 的异常（很少见，但仍然如此）。我不明白为什么。我收到的报告来自 Android 4.0.3 Galaxy Note 用户，它的功能强大到足以保留大约 4 Mb 的图像数据。所以我怀疑这是 OOM，或者“超出 VM 预算”。如果资产丢失，`getAssets().open(...)`可能会抛出异常。

然后呢？有没有人遇到过类似的问题？

谢谢。

# perl - fork + exec + caller 不应该等待孩子

> ID：10698103
> 
> 赞同：3
> 
> 时间：2012-05-22T08:04:52.563
> 
> 标签：perl, exec, fork

我有两个脚本 script_a 和 script_b。script_a 调用 script_b。script_b 分叉两个进程。如下所示。

script_a 等待 script_b 的父级和子级都完成。我希望 script_a 继续而不等待 script_b 的子进程。

我为此所做的是在 script_b 中，我添加了以下代码。

```
if (! $f_id) {
    close STDOUT;
    close STDERR;
    exec("sleep 10; echo 'i am child'");
} 
```

这对我有用。script_a 不再等待子进程。

我的问题是，1.这是正确的方法吗？2\. 父进程和子进程是否共享相同的 STDOUT 和 STDERR，如果存在竞争条件，我最终会遇到麻烦吗？3\. 有没有更好的方法来做到这一点？

在此先感谢您的帮助。

script_a.pl

```
#! /usr/local/bin/perl
print `script_b.pl`; 
```

script_b.pl

```
#! /usr/local/bin/perl

$f_id = fork();

if (! $f_id) {
    exec("sleep 10; echo 'i am child'");
}

if ($f_id) {
    print "i am parent\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:33:14.280

而不是在 script_a 中使用 ``。我们在 script_a 中重定向了 STDOUT 和 STDERR。就像是

脚本_a

```
system("script_b.pl > /var/tmp/out_file 2>&1"); 
```

脚本_b

```
#! /usr/local/bin/perl

$f_id = fork();

if (! $f_id) {
    exec("sleep 10; echo 'i am child'");
}

if ($f_id) {
    print "i am parent\n";
} 
```

这样调用者就不会等待 exec 中的子进程完成。

感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:19:12.800

**``** perl 中的反引号等待命令完成。因此，如果您不希望父进程等待将**sytem(command &)**放入后台。

# c# - C# WPF ComboBox - Allow item to be selected only once per list

> ID：10698106
> 
> 赞同：3
> 
> 时间：2012-05-22T08:05:02.860
> 
> 标签：c#, wpf, mvvm, combobox, observablecollection

I use C#, WPF and try to use MVVM. So I have an ObservableCollection of MyObjects. The list is rendered into a DataGrid, and one property of MyObject is a static list of items which is shown in a ComboBoxes in each row.

Now I would like to select an item in one row in this combobox, and if it was selected in another row before, the last selection has to be removed to the default value. How can I manage this? My MyObjectViewModel knows about the change of its 'own" combobox but how can it tell the MainViewModel (which holds the ObservableCollection of MyObjects) to change the last selected ComboBox item from another MyObject object?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:02:01.563

最好的方法是将绑定焦点更改为 ListCollectionViews，因为这将允许您管理光标。下面是一个例子：

视图模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Data;

    namespace BindingSample
    {
        public class ViewModel
        {
            private string[] _items = new[] { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };

            public ViewModel()
            {
                List1 = new ListCollectionView(_items);
                List2 = new ListCollectionView(_items);
                List3 = new ListCollectionView(_items);

                List1.CurrentChanged += (sender, args) => SyncSelections(List1);
                List2.CurrentChanged += (sender, args) => SyncSelections(List2);
                List3.CurrentChanged += (sender, args) => SyncSelections(List3);
            }

            public ListCollectionView List1 { get; set; }

            public ListCollectionView List2 { get; set; }

            public ListCollectionView List3 { get; set; }

            private void SyncSelections(ListCollectionView activeSelection)
            {
                foreach (ListCollectionView view in new[] { List1, List2, List3 })
                {
                    if (view != activeSelection && view.CurrentItem == activeSelection.CurrentItem)
                        view.MoveCurrentTo(null);
                }
            }
        }
    } 
```

看法

```
<Window x:Class="ContextMenuSample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel Orientation="Vertical">
        <ListBox ItemsSource="{Binding List1}" />
        <ListBox ItemsSource="{Binding List2}" />
        <ListBox ItemsSource="{Binding List3}" />        
    </StackPanel>
</Window> 
```

这将允许您只选择一项。它现在是硬编码的，但可以很容易地使其更灵活地用于附加列表。

# c# - Do we need to dispose or terminate a thread in C# after usage?

> ID：10698107
> 
> 赞同：41
> 
> 时间：2012-05-22T08:05:12.720
> 
> 标签：c#, multithreading, smtpclient

I have the following code:

```
 public static void Send(this MailMessage email)
    {
        if (!isInitialized)
            Initialize(false);
        //smtpClient.SendAsync(email, "");
        email.IsBodyHtml = true;

        Thread mailThread = new Thread(new ParameterizedThreadStart(
            (o) => 
            {
                var m = o as MailMessage;

                SmtpClient client= new SmtpClient("smtpserveraddress");
                client.Send(m);

            }));
        mailThread.Start(email); 
```

I want the mail sending to be done in the background without interfering with the main thread. I do not care when it is finished.

Do I need to somehow handle the dispose of the created thread (**mailThread**)? Or does it automatically dispose when it finishes its job?

Please do not recommend the SendAsync method. I would like to create the thread manually. Mail.Send was only an example scenario.

Thank you.

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-22T08:07:11.080

NO!

there is no need to dispose the Thread object (BTW, the Thread class does not provide the Dispose method).

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-22T08:08:12.160

Thread is diposed when its routine comes at end.
So NO, you don't have to do it, it's not necessary (nor possible I think).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-12T21:43:39.143

好吧，你`SmtpClient`应该是`Dispose()`'d。我会使用任务并行库而不是创建原始线程：

```
public static void Send(this MailMessage email)
{
    if (!isInitialized)
        Initialize(false);
    //smtpClient.SendAsync(email, "");
    email.IsBodyHtml = true;

    Task.Factory.StartNew(() =>
    {
        // Make sure your caller Dispose()'s the email it passes in at some point!
        using (SmtpClient client = new SmtpClient("smtpserveraddress"))
        {
            client.Send(email);
        }
    });
} 
```

# javascript - Retrieve popup window selection

> ID：10698109
> 
> 赞同：0
> 
> 时间：2012-05-22T08:05:21.787
> 
> 标签：javascript, popup

I have a popup window from which I want to retrieve a value, I want to send the value back to the page that initiated the popup window. I want to avoid using php if that's possible? Can someone tell me if this is possible, if so can it be done with javascript? And how could I start with it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:16:54.683

是的：

```
child = window.open(...)
child.callback = function(value) { ... do something with value ... } 
```

在您的子窗口中，您现在可以调用`callback`，就好像它是在那里定义的一样：

```
callback(value); 
```

# mysql - 使用 Coldfusion 和 MySQL 解析和比较数据

> ID：10698115
> 
> 赞同：1
> 
> 时间：2012-05-22T08:05:45.733
> 
> 标签：mysql, coldfusion

首先，我将解释我需要做什么，然后我*认为*我可以实现它。我目前的计划在理论上似乎效率很低，所以我的问题是是否有更好的方法来完成它。

我有 2 个表 - 我们称它们为“Products”和“Products_Temp”，两者都是相同的。我需要从供应商处下载包含产品详细信息（库存、定价等）的大量文件（XML 或 XLS）。然后将它们解析到 Products_Temp 表中。现在，我计划使用 CF 计划任务来处理下载，并使用 Navicat 来进行实际的解析——我很高兴这足够有效。

下一步是我苦苦挣扎的地方——一旦文件被下载和解析，我需要寻找数据中的任何变化。这将与 Products 表进行比较。如果发现更改，则应该添加或更新该行（如果应该删除它，那么我需要标记它而不是仅仅删除它）。比较所有数据后，应该清空 products_temp 表。

我知道比较表并相应地同步它们的方法，但是我遇到的问题是我将处理来自不同来源的多个文件。我曾考虑仅使用产品表和追加/更新，但我不确定如何管理“已删除标志”要求。

现在，我*知道*我可以让它工作的唯一方法是遍历 products_temp 表，执行各种 cfquery 并在完成后删除该行。但是，这似乎非常低效，而且考虑到我们可能要处理数十万行，如果我们每天更新所有内容，就不太可能有效。

任何关于更好路线的指示或建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T13:39:38.427

为了找到更改，我会根据您要匹配的字段查看连接。这可能很慢，具体取决于字段的数量以及它们是否被索引，但我仍然会说它比循环快。类似于以下内容：

```
SELECT product_id
FROM Products
WHERE product_id NOT IN (
    SELECT T.product_id
    FROM Products_Temp T
    INNER JOIN PRODUCTS P
    ON (
        P.field1 = T.field1
        AND P.field2 = T.field2
        ...
    )
) 
```

对于缺少的产品来查找不匹配项：

```
SELECT P.product_id
FROM Products P
LEFT OUTER JOIN Products_Temp T
ON (P.field1 = T.field1
    AND P.field2 = T.field2
    ...)
WHERE T.product_id IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:32:46.127

两种反应都有可能。只是为了稍微扩展您的选择..

## 选项1

*IF* mySQL supports some sort of hashing, *on a per row basis*, you could use a variation of [comodoro's suggestion](https://stackoverflow.com/a/10698350/104223) to avoid hard deletes.

**Identify Changed**

To identify changes, do an inner join on the primary key and check the hash values. If they are different, the product was changed and should be updated:

```
 UPDATE Products p INNER JOIN Products_Temp tmp ON tmp.ProductID = p.ProductID
    SET    p.ProductName = tmp.ProductName
           , p.Stock = tmp.Stock
           , ...
           , p.DateLastChanged = now()
           , p.IsDiscontinued  = 0
    WHERE  tmp.TheRowHash <> p.TheRowHash 
```

**Identify Deleted**

Use a simple outer join to identify records that do not exist in the temp table, and flag them as "deleted"

```
 UPDATE Products p LEFT JOIN Products_Temp tmp ON tmp.ProductID = p.ProductID
    SET    p.DateLastChanged = now()
           , p.IsDiscontinued = 1
    WHERE  tmp.ProductID IS NULL 
```

**Identify New**

Finally, use a similar outer join to insert any "new" products.

```
 INSERT INTO Products ( ProductName, Stock, DateLastChanged, IsDiscontinued, .. )
    SELECT tmp.ProductName, tmp.Stock, now() AS DateLastChanged, 0 AS IsDiscontinued, ...
    FROM   Products_Temp tmp LEFT JOIN Products p ON tmp.ProductID = p.ProductID
    WHERE  p.ProductID IS NULL 
```

## Option #2

If per row hashing is not feasible, an alternate approach is a variation of [Sharondio's suggestion](https://stackoverflow.com/a/10703239/104223).

Add a "status" column to the temp table and flag all imported records as "new", "changed" or "unchanged" through a series of joins. (The default should be "changed").

**Identify UN-Changed**

First use an inner join, on all fields, to identify products that have NOT changed. (Note, if your table contains any nullable fields, remember to use something like `coalesce` Otherwise, the results may be skewed because `null` values are not equal to anything.

```
 UPDATE  Products_Temp tmp INNER JOIN Products p ON tmp.ProductID = p.ProductID
    SET     tmp.Status = 'Unchanged'
    WHERE   p.ProductName = tmp.ProductName
    AND     p.Stock = tmp.Stock
    ... 
```

**Identify New**

Like before, use an outer join to identify "new" records.

```
 UPDATE  Products_Temp tmp LEFT JOIN Products p ON tmp.ProductID = p.ProductID
    SET     tmp.Status = 'New'
    WHERE   p.ProductID IS NULL 
```

By process of elimination, all other records in the temp table are "changed". Once you have calculated the statuses, you can update the Products table:

```
 /*  update changed products */
    UPDATE Products p INNER JOIN Products_Temp tmp ON tmp.ProductID = p.ProductID
    SET    p.ProductName = tmp.ProductName
           , p.Stock = tmp.Stock
           , ...
           , p.DateLastChanged = now()
           , p.IsDiscontinued = 0
    WHERE  tmp.status = 'Changed'

    /*  insert new products */
    INSERT INTO Products ( ProductName, Stock, DateLastChanged, IsDiscontinued, .. )
    SELECT tmp.ProductName, tmp.Stock, now() AS DateLastChanged, 0 AS IsDiscontinued, ...
    FROM   Products_Temp tmp
    WHERE  tmp.Status = 'New'

    /* flag deleted records */
    UPDATE Products p LEFT JOIN Products_Temp tmp ON tmp.ProductID = p.ProductID
    SET    p.DateLastChanged = now()
           , p.IsDiscontinued = 1
    WHERE  tmp.ProductID IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T08:24:30.327

我不得不解决一次类似的问题，也许该解决方案适用于您的情况（我不太了解 Coldfusion）。为什么不（对于每个来源）从表 Products 中删除与该来源相对应的所有内容，并将其替换为来自同一来源的 Products_Temp ？它假定您可以为每个来源创建一个唯一字段。SQL 代码如下所示：

```
从产品中删除 source_id = x;
插入产品（field1、field2、...、source_id）
  选择字段 1、字段 2、...、x FROM Products_Temp；

```

此外，如果源没有太大变化，您可以考虑在下载后进行哈希处理，如果没有更改则跳过更新以节省一些数据库访问权限。

# jquery - jQuery animate and transition conflict - firefox

> ID：10698116
> 
> 赞同：0
> 
> 时间：2012-05-22T08:05:46.840
> 
> 标签：jquery, firefox, jquery-animate, transition

adding css properties:

```
-moz-transition: all 1s ease-in-out;
-webkit-transition: all 1s ease-in-out;
-o-transition: all 1s ease-in-out;
-ms-transition: all 1s ease-in-out;
 transition: all 1s ease-in-out; 
```

makes only firefox (version 12) act differently on jquery.animate()

just see the difference between clicking the two images on: [http://jsfiddle.net/6Yj2f/1/](http://jsfiddle.net/6Yj2f/1/)

is there is an explanation to this behavior?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:23:24.340

我已经使用 chrome 21 和 firefox 13 进行了尝试，但我想所有其他浏览器都会有所不同，我想我会期待的。

您在这里拥有的是**两个简化的“动画”的总和**，这就是您遇到问题的原因，这是因为 jQuery 通过内联样式逐渐改变宽度样式（其中 XX 随时间变化）：

```
<img id="conflicted" class="handCard" src="https://path/to/image.jpg" style="display: inline-block; width: XXpx; "> 
```

所以，你正在做一个 5 秒的过渡，只是逐渐改变对象的宽度样式，如果你没有设置 CSS 过渡，这很好，因为浏览器不会应用它自己的过渡。但是，当您逐渐更改宽度样式同时还具有 CSS 过渡缓动（在您的情况下设置为 1 秒线性缓动）时，**您正在使浏览器缓和宽度样式的每次更改**。如果你将 CSS transition ease 设置为 0.1，你会看到 jQuery 如何改变宽度样式，浏览器也会改变它，几乎是同时发生的。

我发现了一些有趣[的“增强的 $.animation()”](http://playground.benbarnett.net/jquery-animate-enhanced/)，声称“扩展 $.animate() 以检测 Webkit、Mozilla 和 Opera 的 CSS 转换并自动转换动画。兼容 IE6+”，我自己没有尝试过，但是希望你会发现它有用。

# android - AChartEngine display value not to be shown when its value = 0

> ID：10698118
> 
> 赞同：0
> 
> 时间：2012-05-22T08:06:07.707
> 
> 标签：android, achartengine

I am working on Pie charts using AChartEngine library. Here I want to disable chart values to show on charts, but only those whose content value is 0.

Now I am using it like:

```
 public Intent execute_assetLifecycle(Context context,RelativeLayout parent) {
    int[] colors = new int[] { Color.RED, Color.DKGRAY, Color.BLUE, Color.CYAN,Color.GREEN,Color.GRAY };
    DefaultRenderer renderer = buildCategoryRenderer(colors);

    CategorySeries categorySeries = new CategorySeries("Title1");

        categorySeries.add("30 Days=" days_count_30);  

        categorySeries.add("60 Days=", days_count_60);

        categorySeries.add("90 Days=", days_count_90);

        categorySeries.add("180 Days=", days_count_180);

    mChartView2=ChartFactory.getPieChartView(context, categorySeries,renderer);

    parent.addView(mChartView2);
    return ChartFactory.getPieChartIntent(context, categorySeries, renderer,null);
    }

    protected DefaultRenderer buildCategoryRenderer(int[] colors) {
    DefaultRenderer renderer = new DefaultRenderer();
    for (int color : colors) {
    SimpleSeriesRenderer r = new SimpleSeriesRenderer();
    r.setColor(color);
    renderer.addSeriesRenderer(r);

    }
    return renderer;
    } 
```

I am using the above code to display pie chart with display values, but I want to show only those display values which are >0 otherwise They will not be shown on the charts as label like: **30 days=0**

Please suggest any method that would stop displaying chart values when its value ==0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T10:11:31.673

在添加系列之前，我会使用 If 语句检查值是否为零。也许为类似的东西制作自己的包装函数`categorySeries.add`：

```
private void add(String category,double value){
    if(value != 0){
        categorySeries.add(category,value);
    }
} 
```

您可能必须将渲染数量限制为实际添加的系列数量。

# c++ - libGL 堆使用

> ID：10698125
> 
> 赞同：5
> 
> 时间：2012-05-22T08:06:34.750
> 
> 标签：c++, linux, opengl, heap-memory, valgrind

我正在使用 Nvidia 290.10 64 位驱动程序开发基于 linux 的 c++ OpenGL 应用程序。我正在尝试减少它的内存占用，因为它使用了大量的实时数据。

我一直在使用 valgrind/massif 来分析堆使用情况，虽然它帮助我优化了各种事情，但现在使用的最大堆内存块是由 libGL 分配的。无论我如何设置阈值，massif 都不会让我详细了解这些分配的来源，只是它是 libGL。在高峰期，我看到 libGL 分配了大约 250MB（总堆使用量为 900MB）。我在显卡上拥有与 VBO 和纹理（主要是一个大的 4096*4096 纹理）类似的内存量。

因此，libGL 在堆上分配的内存量似乎与我上传到 GPU 内存的内存量相似。当 VBO 的数量达到峰值时，libGL 分配也会达到峰值。这正常吗？我认为拥有大量 GPU 内存的好处之一是它可以保持 RAM 空闲？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T09:49:15.260

您所经历的一切都是正常的，因为出于各种原因，OpenGL 实现必须在系统内存中保留一份数据。

在 OpenGL 中，没有对 GPU 的独占访问权限，因此根据其使用情况，可能需要交换数据（或仅从 GPU 内存中释放一些对象）。此外，GPU 可能会崩溃，然后驱动程序会在用户没有注意到的情况下默默地重置它们。这也需要所有缓冲区数据的完整副本。

并且不要忘记*地址空间分配*（Valgrind 报告的值）和实际*内存利用率*之间存在重大差异。

# c++ - Eclipse Helios-“无法运行程序‘make’：未知原因”在 Mac OS X 上

> ID：10698128
> 
> 赞同：1
> 
> 时间：2012-05-22T08:06:47.647
> 
> 标签：c++, eclipse, macos, osx-lion

我是一名大学本科生，试图在我的 Macbook 上学习 C++ 编程。它与 Mac OSX 10.7.3 一起安装。

我一直在尝试在 Eclipse Helios 上构建“hello world”项目，但是在我单击构建项目按钮后，它一直告诉我“无法运行程序'make：unknow reason”。

我注意到[这篇文章](https://stackoverflow.com/questions/4762578/eclipse-helios-cannot-run-program-make-unknown-reason)，但它似乎是针对 Windows 操作系统而不是 MAC 操作系统的，而且我也没有完全按照其中的说明进行操作（抱歉，我对编程不熟悉......）。PATH 变量的描述是“不可用”，我不知道这是否有问题。我也对在“名称”插槽中放入什么感到困惑。

![在此处输入图像描述](../Images/e4779757b1f5e258f6be8f8e61e7a25c.png)

**编辑：** 现在经过一些试验，我的 PATH 中有“make”。（即在我输入“make --version”后命令行给出了make的信息）并且我的PATH设置为

> /opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/texbin

然而，同样的问题仍然存在。有人可以帮忙吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:54:02.233

我的建议是从 App Stor（适用于 Mac）安装 Xcode（http://itunes.apple.com/se/app/xcode/id497799835?mt=12）。Xcode 是 Apple 提供的（免费）开发人员工具。安装 Xcode 后，您可以转到菜单“Xcode”->“打开开发者工具”->“更多开发者工具”，这将带您到苹果开发者网站（您可能必须在其中注册）并在那里您可以下载“命令行” Xcode 的工具，将包含用于 unix 样式开发的 make 等。

Xcode 很好，如果没有使用 Eclipse 的需求，你可能会用 Xcode 做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:15:26.787

**编辑**：取消删除这个答案，因为它被证明是正确的。

是的，我会说这`$PATH`就是问题所在。

您的系统默认版本`$PATH`应该足够了，如果没有，请在您的`.profile`或`.bash_profile`. 您需要注销并重新登录才能使这些更改生效。这样做意味着您可以在不进入 Eclipse 的情况下从命令行编译，这是您在某个时候想要做的事情。

现在只需配置 eclipse 以避免设置任何构建变量，一切都应该很好。在 Window > Preferences > C/C++ > Build > Build Variables 下，列表应该是空的：

![在此处输入图像描述](../Images/286a127434fe23907f97756de87ba9d5.png)

# java - how to download image to local computer when click on a image in java?

> ID：10698131
> 
> 赞同：1
> 
> 时间：2012-05-22T08:06:59.633
> 
> 标签：java

How can i download image to local computer when click on a image in java?

Image store in a folder name images in web-inf, and this image given in a link as src. When i click on this link i can download this images to local computer. any on can help me??

```
<a href="<%=request.getContextPath()%>/pages/imageDownload.jsp"> Image download </a>
this is the link to next page.

<img src="images/abt.jpg" width="300" height="100" alt="" /> 
```

This is the image link.. I want to download image when click on this link.

Thanks in advance..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:11:30.347

看到这个答案：[https ://stackoverflow.com/a/1134128/34088](https://stackoverflow.com/a/1134128/34088)

在您的情况下，您应该`content-type`将`image/jpeg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:01:33.777

当您使用 包装图像时`a href`，单击该链接时，您可以在 Web 浏览器本身中查看该图像。要下载它，您必须右键单击并提供保存链接，然后选择要存储文件的目录。
但是，如果您严格希望通过单击链接本身进行下载，则可以使用表单。
例如：
将链接位置提供给名为包含的 servlet：

在“你的 servlet”的 doGet() 方法中，按照 Aaron Digulla 指出的[https://stackoverflow.com/a/1134128/34088](https://stackoverflow.com/a/1134128/34088)使用：

```
byte[] data = getBinaryFromSomeWhere(request.getParameter("xyz"));
response.setContentType("image/jpeg");
request.setHeader("Content-length", Integer.toString(data.length));
out.write( data, start, end );
out.flush(); 
```

该文件将保存在您的系统中。

# perl - 如何避免在 CGI 环境中使用 Excel::Writer::XLSX 出现编码问题？

> ID：10698137
> 
> 赞同：2
> 
> 时间：2012-05-22T08:07:38.487
> 
> 标签：perl, encoding

我正在尝试根据[`cgi.pl`Excel::Writer::XLSX::Examples 中的示例](http://p3rl.org/Excel%3a%3aWriter%3a%3aXLSX%3a%3aExamples#Example%3a-cgi.pl)将 OOXML Excel 文件发送到浏览器。

```
#!/usr/bin/perl

###############################################################################
#
# Example of how to use the Excel::Writer::XLSX module to send an Excel
# file to a browser in a CGI program.
#
# On Windows the hash-bang line should be something like:
#
#     #!C:\Perl\bin\perl.exe
#
# The "Content-Disposition" line will cause a prompt to be generated to save
# the file. If you want to stream the file to the browser instead, comment out
# that line as shown below.
#
# reverse('©'), March 2001, John McNamara, jmcnamara@cpan.org
#

use strict;
use warnings;
use Excel::Writer::XLSX;

# Set the filename and send the content type
my $filename = "cgitest.xlsx";

print "Content-type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n";

# The Content-Disposition will generate a prompt to save the file. If you want
# to stream the file to the browser, comment out the following line.
print "Content-Disposition: attachment; filename=$filename\n";
print "\n";

# Redirect the output to STDOUT. Binmode the filehandle in case it is needed.
binmode STDOUT;

my $workbook  = Excel::Writer::XLSX->new( \*STDOUT );
my $worksheet = $workbook->add_worksheet();

# Set the column width for column 1
$worksheet->set_column( 0, 0, 20 );

# Create a format
my $format = $workbook->add_format();
$format->set_bold();
$format->set_size( 15 );
$format->set_color( 'blue' );

# Write to the workbook
$worksheet->write( 0, 0, "Hi Excel!", $format );

__END__ 
```

该文件还包含`č š ž ć đ`显示为 的字符`Ä Å¡ Ä Å¾ Ä !`。我想这是编码的问题。

有谁知道可能出了什么问题以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:11:56.637

你有一个编码问题。在源代码中使用 Unicode 文字时，必须使用`utf8`编译指示并将程序源代码保存为 UTF-8 编码。这有效：

```
use utf8;
⋮
$worksheet->write( 0, 0, "Hi Excel! č š ž ć đ", $format ); 
```

# json - 通过 WCF RIA 服务将 JSON 从服务器传输到客户端

> ID：10698138
> 
> 赞同：0
> 
> 时间：2012-05-22T08:07:46.577
> 
> 标签：json, silverlight, wcf-ria-services

我是 Silverlight 和 WCF 平台的新手。我想使用 Silverlight 客户端从服务器获取一些数据。该解决方案有一个 WCF RIA 服务类库，用于读取数据并将其序列化为 JSON 字符串，但我不知道如何创建数据请求、运行服务器方法并返回 JSON 字符串以进行反序列化客户端。

我花了好几个小时寻找并没有合理的解决方案。到目前为止，我已经这样做了：

```
[WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            UriTemplate = "data/{id}")]
public string getLogs(string server)
{
    EventLog[] remoteEventLogs = EventLog.GetEventLogs(System.Environment.MachineName);

    ObservableCollection<string> logs = new ObservableCollection<string>();

    for (int i = 0; i < remoteEventLogs.Length; i++)
    {
        logs.Add(remoteEventLogs[i].Log);
    }

     return serializer(logs); //helper function using DataContractJsonSerializer

} 
```

但我无法理解正在发生的事情。请提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:24:53.093

如果您使用 RIA 服务，您只需执行以下操作：

```
[Invoke]
public string getLogs(string server)
{
    ...
    return serializer(logs);
} 
```

现在您可以从 Silverlight 调用 getLogs。但你也可以使用：

```
[Invoke]
public IEnumerable<string> getLogs(string server)
{
    ...
    return logs;
} 
```

这样，您返回列表而无需将其序列化为 json。

# android - 数据在数据库中插入两次，当我插入新数据时它插入两次但是当我更新它时它可以在单行上完美更新

> ID：10698140
> 
> 赞同：0
> 
> 时间：2012-05-22T08:07:55.710
> 
> 标签：android, database, sqlite, insert

我被困在这里，无法找到它两次插入具有相同值的数据的问题，但它是 autoIncrement Id，请帮帮我..我想一次添加一条记录

```
if(count>0)
                        {
                            sing.gs.updateSettings();
                            Toast.makeText(this, "Settings Updated", 5000).show();
                        }
                    else
                        {
                            sing.gs.addSettings(); 
```

在我用来在我的活动中调用的 GETTER SETTER 中添加设置方法

```
public void addSettings()
    {
        dbm.addSettings(

                golfCourse,
                address,
                phone, 
                userName, 
                userEmail, 
                applicator1, 
                applicator2, 
                applicator3, 
                applicator4, 
                supersEmail, 
                assistSupersEmail, 
                sprayTechEmail, 
                clubMangEmail);
    } 
```

在负责在数据库中插入数据的数据库管理器类中添加设置方法 //添加设置 public void addSettings (

```
 String gc,
            String add,
            String ph,
            String un,
            String ue,
            String ap1,
            String ap2,
            String ap3,
            String ap4,
            String se,
            String ase,
            String ste,
            String cme
            )
    {
        ContentValues values = new ContentValues();

        values.put(Cgc_golf_course, gc);
        values.put(Caddress, add);
        values.put(Cphone, ph);
        values.put(Cun_user_name, un);
        values.put(Cue_user_email, ue);
        values.put(Cap1, ap1);
        values.put(Cap2, ap2);
        values.put(Cap3, ap3);
        values.put(Cap4, ap4);
        values.put(Cse_supers_email, se);
        values.put(Case_assist_supers_email, ase);
        values.put(Cste_spray_tech_email, ste);
        values.put(Ccme_club_manager_email, cme);

        try {
            a++;
            db.insert(TABLE_NAME, null, values);
            insertId = (db.insert(TABLE_NAME, null, values));

        } catch (Exception e) {
            Log.e("DB ERROR", e.toString());
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:11:17.447

您`insert`在以下代码中调用了两次：

```
 db.insert(TABLE_NAME, null, values);
        insertId = (db.insert(TABLE_NAME, null, values)); 
```

# iphone - how to access parent view reponder

> ID：10698143
> 
> 赞同：0
> 
> 时间：2012-05-22T08:08:02.237
> 
> 标签：iphone

I have 3 viewcontroller. FirsViewController, SecondViewController and ThirdViewController. The FirstviewController is root viewcontroller and it is adding secondviewcontrooler xib as the subview. like..

[firstviewcontrollerObject.view addsubview:secondViewcontrollerObj.view].

In secondViewcontroller I have one button. When button touch action is called, ThirdViewController is loaded. like..

[SecondViewControllerobj.view addsubview:thirdviewcontrollerobj.view];

Now ThirdViewCOntroller is on the screen. This viewcontroller has nothing only a small button. So I am seeing 2 buttons on screen. First button is of SecondviewCOntroller and second button is of ThirdViewCOntroller. But, I am able to give touch action of 3rdviewcontroller only not 2ndviewcontroller button.

How should I design my view to take touch of both button and I don't want to merge both controller i one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:14:21.427

我认为您应该在不使用多个 UIViewController 的情况下实现它。

视图控制器对于从导航堆栈推送和弹出很有用：一次只显示一个视图。我没有尝试，但我认为这就是你得到这个错误的原因。

但是您更喜欢 navigationControllers 而不是他们的 xib 的好处，不是吗？

如果是这样，有一种方法可以将 xib 与视图一起使用：

```
NSArray * arr1 = [[NSBundle mainBundle] loadNibNamed:@"MyView1" owner:nil options:nil];
NSArray * arr2 = [[NSBundle mainBundle] loadNibNamed:@"MyView2" owner:nil options:nil];
NSArray * arr3 = [[NSBundle mainBundle] loadNibNamed:@"MyView3" owner:nil options:nil];
UIView * v1 = [arr1 objectAtIndex:0];
UIView * v2 = [arr2 objectAtIndex:0];
UIView * v3 = [arr3 objectAtIndex:0];

// now you have your 3 views, do what you want with them:
v1.center = CGPointMake(100,100);
[self.view addSubview:v1];
v2.center = CGPointMake(100,200);
[self.view addSubview:v2];
v3.center = CGPointMake(100,300);
[self.view addSubview:v3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:23:23.187

这意味着您的第一个视图控制器包含两个视图，它们来自 secontroller.view 和 thirdviewcontroller.view 现在第三个是按下手势，但第二个不是按下手势。

请在 firstviewcontroller.view 上查看两个视图并这样做

```
firstviewcontroller.secondVW=[[Secondviewcontroller alloc]init].view;
    firstviewcontroller.thirdVW=[[Thirdviewcontroller alloc]init].view; 
```

以这种方式，两个视图都会发生变化。

# c# - NHibernate Evict By type And Id From First Level Cache

> ID：10698144
> 
> 赞同：0
> 
> 时间：2012-05-22T08:08:06.790
> 
> 标签：c#, nhibernate, caching

I Have a Nhibernate object called Car, this Car object have a PersietentBag IList collection called Doors, all in lazy loading.

if i do (IN SESSION 1)

```
int singleDoor = Car.Doors[0]; 
```

the lazyest collections loads from db and the related objects becomes added to the first level cache, the i will have in the 1rst level cache N objects Car and N Doors loaded from db.

From another hand (at other part of the code IN SESSION 2) i loads the same Car objects and do the same assigment

```
int singleDoor = Car,Doors[0]; 
```

and i Evicts Car and all the Door(s) objects from SESSION2

i modify the state of this objects and want to attach the doscontected objects tu the SESSION1 for save nd do

```
mySession.Update(Car); 
```

But when i try to update the Door(s) obejcts obviously i have the (an other obejct with the same id, etc) exception is thrown because there's yet another object with the same id.

Bot it's dificult to find the old object to evict, how can i EVICT the old objects or clear the 1rst level cache (only by type and id) or discard old objects from cache and update what i want?.

thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T08:15:51.970

这不是因为二级缓存，而是因为您试图从会话 2 中保存实体，而该实体已经在会话 1 中加载（实际上是导致此问题的一级缓存）。

您的问题的答案是使用（在会话 1 中）session.Evict(car)，但这并不是最好的方法 - 我宁愿建议使用 session.Merge(car) 来更新会话 1 中的持久对象，而无需抛出关于另一个具有相同 id 的对象的异常。

# asp.net - Run solution exe after installtion using installshield

> ID：10698145
> 
> 赞同：8
> 
> 时间：2012-05-22T08:08:07.947
> 
> 标签：asp.net, installshield, facebook-c#-sdk

I want to run my exe after installation using InstallShield. InstallShield completes the setup correctly but do not run the exe.

I found another way to add an exe in startup but it runs after restart. I would like it to run without restart.

Is it possible ?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-22T12:35:53.360

您使用的是哪个版本的 InstallShield？另外，您使用的是什么项目类型？（InstallScript、InstallScript MSI、基本 MSI？）

假设 Basic MSI，InstallShield 有一个内置模式来支持这个故事：

1) 单击项目助手选项卡

2）点击安装面试图标（页面）

3) 对于“您是否希望在安装完成后让用户选择启动您的应用程序？

4) 单击浏览按钮选择应作为操作目标的 EXE。

默认情况下，设置完成对话框上的复选框（启动程序）不会被选中。要选择它，会自动将属性 LAUNCHPROGRAM 添加到属性表并将其设置为值“1”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-14T22:18:12.977

Christopher Painter 的答案在大多数情况下都对您有用。这些是要采取的初步步骤，但如果您发现这还不够，还有一些额外的细节。例如，skb 报告说这对他不起作用。我发现我在同一条船上（即使我已经建立了十几个其他安装程序来完成这项工作！）。

1.  按照克里斯托弗画家的指示。
2.  单击“安装设计器”选项卡。在“用户界面”中选择“对话框”。
3.  在“所有对话框”中，展开“SetupCompleteSuccess”，然后选择“行为”。
4.  选择“确定”按钮控件。然后，选择“事件”。（查看屏幕底部的事件/订阅/条件）
5.  您应该有一个“DoAction”事件，其“参数”等于“IS_LAUNCH_MY_PROGRAM_PLEASE”，“条件”为“LAUNCHPROGRAM”。如果没有 - 添加。“LAUNCHPROGRAM”是指该名称的属性。如果选择了启动复选框，它将具有值 1，因此满足此条件。IS_LAUNCH_MY_PROGRAM_PLEASE 是指启动的自定义操作。如果需要，您可以在此处更改该 CA 以触发任何自定义操作。我选择不理会它，而是用我自己的一个替换 CA。
6.  打开您的自定义操作列表（行为和逻辑......自定义操作和序列）。您应该在那里找到一个名为 IS_LAUNCH_MY_PROGRAM_PLEASE 的 CA。删除它！
7.  添加您自己的 IS_LAUNCH_MY_PROGRAM_PLEASE CA。右键单击“自定义操作”（列表标题）并选择所需的 CA 类型 - 或启动向导。如果您将对话框行为保留为默认设置，请务必将其命名为“IS_LAUNCH_MY_PROGRAM_PLEASE”。
8.  要启动一个 exe - 工作目录已更改（这是我的应用程序不会出现的原因，显然 skb 也是基于评论）选择“新 EXE”...“引用目录的路径”。将“返回处理”更改为“异步（不等待完成）”。注意“MSI 类型号”变为 226。将“工作目录”设置为`INSTALLDIR`（假设您要启动的程序应该在新程序的目录中找到）。将“文件名和命令行”设置为`[INSTALLDIR]YourApp.exe`.

# javascript - Loop in js to set the default value of a DropDown list.Not working in IE8

> ID：10698149
> 
> 赞同：0
> 
> 时间：2012-05-22T08:08:25.137
> 
> 标签：javascript, sharepoint-2010

I have used the following piece of code to set defailt value of a DropDownn List in Sharepoint List form

```
for ( var i = 0; i < getField('select','County').options.length; i++ ) {
if ( getField('select','County').options[i].text == "New County" ) {
getField('select','County').options[i].selected = true;
}
} 
```

The loop works fine on all other browser except IE8, how can i solve this issue

i get the error in IE8 as:

```
options is null or not an object 
```

EDIT:

```
function getField(fieldType,fieldTitle) 
 {     
   var docTags = document.getElementsByTagName(fieldType);     
   for (var i=0; i < docTags.length; i++)
    {         
      if (docTags[i].title == fieldTitle)
      { 
         return docTags[i]; 
      }     
    } 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:25:46.737

上述异常不是因为 IE8，而是因为在 sharepoint 中，当 select 中的列表值超过 20 时，控件呈现为`input`而不是`select`。

当我在 IE9 中尝试时，我在选择中只有很少的值，而在服务器上它是 IE8，并且在列表中有很多值。

# jquery - Css / Jquery Div Style

> ID：10698152
> 
> 赞同：1
> 
> 时间：2012-05-22T08:08:34.123
> 
> 标签：jquery, css

I have a div that i have added a border style to. However when I try to add a CSS class to it the div style over rides it.

```
if ($("#input-whatmask").val() != '')
        {
            if(!searchReg.test($("#input-whatmask").val())){
                $("#input-whatmask").addClass("errorinput").after('<span class="error">Enter a valid value.</span>');
                hasError = true;
                return false;
            }
        } 
```

Anyone confirm the correct way / method of doing this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:18:01.670

我确定您的问题是因为 css 样式优先级。id ( `#input-whatmask`) 的样式比 class ( `.errorinput`) 的样式更重要，所以什么都不会改变。要纠正这个问题，请将您的样式声明为，`#input-whatmask.errorinput`而不是只是`.errorinput`这样它将是首选（带类的 id 比 id 更具体）。

解释它是如何工作的（引用[这篇很棒的文章](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)）：

> 特异性是通过计算 css 的各种组件并以 (a,b,c,d) 的形式表达它们来计算的。举个例子会更清楚，但首先是组件。
> 
> *   元素，伪元素：d = 1 – (0,0,0,1)
> *   类，伪类，属性：c = 1 – (0,0,1,0)
> *   ID：b = 1 – (0,1,0,0)
> *   内联样式：a = 1 – (1,0,0,0)
> 
> id 比类更具体，比元素更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:20:33.600

div 标签中的样式，例如：

```
<div style="border: 1px solid blue;"></div> 
```

将覆盖附加到 div 的类中的样式，例如，此 div 仍将具有蓝色边框：

```
<div class="myClass" style="border: 1px solid blue;"></div> 
```

...

```
.myClass
{
    border: 1px solid red;
} 
```

但是这个 div 会有一个红色边框：

```
<div class="myClass" style="border: 1px solid blue;"></div> 
```

...

```
.myClass
{
    border: 1px solid red !important;
} 
```

看到这个 js 小提琴：http: [//jsfiddle.net/jtVRK/](http://jsfiddle.net/jtVRK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:56:02.153

你想要这样吗

```
if ($("#input-whatmask").val() != '')
{
    if(!searchReg.test($("#input-whatmask").val())){
        $("#input-whatmask").attr("class","errorinput").after('<span class="error">Enter a valid value.</span>');
        hasError = true;
        return false;
    }
} 
```

如果您使用 attr() 而不是 addClass() 则样式将被覆盖。attr() 将 oldclass 名称更改为 newClass 名称， addClass() 只是将 newClass 添加到 oldClass。

`or`

用于`!important`必须在 newCalss 中使用相同代码覆盖的属性

`or`

```
if ($("#input-whatmask").val() != '')
    {
        if(!searchReg.test($("#input-whatmask").val())){
            $("#input-whatmask").removeClass("oldClass").addClass("errorinput").after('<span class="error">Enter a valid value.</span>');
            hasError = true;
            return false;
        }
    } 
```

# java - Selenium webdriver: finding all elements with similar id

> ID：10698157
> 
> 赞同：11
> 
> 时间：2012-05-22T08:08:51.657
> 
> 标签：java, xpath, selenium, webdriver

I have this xpath: `//*[@id="someId::button"]`

Pressing it shows a dropdown list of values.

Now, I know all the elements in the list have an id like this :

```
//*[@id="someId--popup::popupItemINDEX"] 
```

, where INDEX is a number from 1 to whatever the number of options are.

I also know the value which I must click.

One question would be: since I will always know the id of the button which generates the dropdown, can I get all the elements in the dropdown with a **reusable** method? (I need to interact with more than one dropdown)

The way I thought about it is: get the root of the initial ID, as in:

```
//*[@id="someId 
```

then add the rest : `--popup::popupItem`. I also need to add the index and I thought I could use a try block (in order to get though the exceptions when I give a bigger than expected index) like this:

```
 for(int index=1;index<someBiggerThanExpectedNumber;index++){
     try{
         WebElement aux= driver.findElement(By.xpath(builtString+index+"\"]"));
         if(aux.getText().equals(myDesiredValue))
             aux.click();
     }catch(Exception e){}
 } 
```

Note that I am using the webdriver api and java.

***I would like to know if this would work and if there is an easier way of doing this, given the initial information I have.***

EDIT: The way I suggested works, but for an easier solution, the accepted answer should be seen

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T08:58:22.323

根据经验，如果可能，请尝试通过一个查询选择更多元素。逐个搜索许多元素将变得非常缓慢。

如果我很好地了解您的需求，那么这样做的好方法是使用

```
driver.findElement(By.id("someId::button")).click();
driver.findElement(By.xpath("//*[contains(@id, 'someId--popup::popupItem') " +
    "and text()='" + myDesiredValue + "']"))
    .click(); 
```

有关 XPath 的更多信息，请参阅[规范](http://www.w3.org/TR/xpath/)。如果您可以跳过废话，这将是一本非常好的读物！

这将查找并单击文本等于所需值的元素，该元素的 ID 中包含“someId--popup::popupItem”。

```
List<WebElement> list = driver.findElements(By.xpath("//*[contains(@id, 'someId--popup::popupItem')]")); 
```

这会找到所有在其 ID 中包含“someId--popup::popupItem”的元素。然后，您可以遍历列表并查找所需的元素。

你知道你可以调用`findElement()`一个`WebElement`来搜索它的孩子吗？-`driver.findElement(By.id("someId")).findElements(By.className("clickable"))`

如果不了解底层 HTML，我想我无法提供最好的方法，但我有一些想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T08:58:13.323

您是否尝试过使用[JavascriptExecutor](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/JavascriptExecutor.html)？

如果您愿意编写一点 JavaScript，那么这将比在 java 中简单（我认为）

您需要做的就是让一些 JavaScript 爬过 DOM 子树，并返回与您的条件匹配的 DOM 元素列表。然后，WebDriver 将像`List<WebElement>`在 java 世界中一样愉快地编组它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-09T09:10:31.673

在这里使用的更安全的方法是

```
int size=driver.findElements(By.xpath("//*[@id='someId::button']")).size();

Start using Index Now

String builtString="//*[@id='someId::button'][";

for(int index=1;index<=size();index++)
{

try
{

   WebElement aux= driver.findElement(By.xpath(builtString+index+"\"]"));

   if(aux.getText().equals(myDesiredValue))
             aux.click();

}
catch(Exception e){}

} 
```

请让我知道上述funda是否有效。

# python - 当两个子进程从标准输入读取时，我的程序没有响应

> ID：10698158
> 
> 赞同：1
> 
> 时间：2012-05-22T08:09:11.630
> 
> 标签：python, subprocess, stdin

我有一个 C 程序，它在运行时需要一些控制信息。这些信息将由我的 python 程序传递。我第一次测试这个，它工作正常。

```
from subprocess import PIPE
import subprocess

cpro = ['./a_pass','2','8','7']        #2,8,7 are some parameters for init
p1 = subprocess.Popen(cpro,stdout=PIPE, stdin=PIPE)
#p2 = subprocess.Popen(cpro,stdout=PIPE, stdin=PIPE)

f1 = open('bdt.100','r')               #control information
commands = f1.read()

out1 = p1.communicate(commands)[0]     #get the c program output
#out2 = p2.communicate(commands)[0]

print out1
print '--------------'
#print out2 
```

问题是当我打开评论时。我尝试测试标准输入中的这些信息是否可以被两个进程读取。但是，当我执行它时，我的 python 程序没有响应。它只是挂在那里。我猜原因是两个子进程为读取标准输入而战。我怎样才能控制他们和谐地工作？

问候。

**更新**

我将代码更改为此，它可以工作：

```
p1 = subprocess.Popen(passOne,stdout=PIPE, stdin=PIPE)
out1 = p1.communicate(commands)[0]

p2 = subprocess.Popen(failOne,stdout=PIPE, stdin=PIPE)
out2 = p2.communicate(commands)[0] 
```

我试图说些什么，但我只是对发生的事情有所感觉。所以，我只是把如何在我的代码中解决这个问题而不做更多的分析。对不起。

# wpf - Silverlight MVVM 框架

> ID：10698165
> 
> 赞同：3
> 
> 时间：2012-05-22T08:09:41.457
> 
> 标签：wpf, silverlight, mvvm, frameworks

只是出于好奇，想知道是否需要使用任何可作为第三方安装的 MVVM 框架，或者我们可以直接在我们的应用程序中创建和定义不同的项目并将它们称为模型、视图模型和视图，并使用它们根据他们的定义。

第三方框架是否提供了任何额外的东西，并且上一段中提到的应用程序可以称为 MVVM 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:15:32.763

如果您正在寻找 MVVM 框架，那么我建议您使用[Catel](http://catel.codeplex.com/)

您正在考虑的方法不是我个人所说的“符合 MVVM”（尽管它只是一种模式）。通常，您的模型是描述和访问您的数据的类（Linq2Sql 实体），ViewModel 是驱动应用程序业务逻辑的类，而您的视图只是窗口/页面等。通常我只是在我的主项目中为所有三个创建文件夹和从那里拿它，但有时如果模型将被其他人使用，将模型放入一个单独的项目中是个好主意，但我通常会称它为`MyProjectData`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:45:32.633

不，您不必使用任何第三方框架，您只需遵循设计模式即可。您可以点击此链接了解更多信息。

[http://www.silverlight.net/learn/advanced-techniques/the-mvvm-pattern/using-the-mvvm-pattern-in-silverlight-applications](http://www.silverlight.net/learn/advanced-techniques/the-mvvm-pattern/using-the-mvvm-pattern-in-silverlight-applications)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T12:24:24.733

不，没有必要使用任何可用的 MVVM 框架，您可以创建自己的 MVVM 框架并使用它。如果您遵循 MVVM 模式的指南并正确实施框架，那么应用程序将符合 MVVM。

但是是的，MVVM 框架有一些优势，它们提供了很多开箱即用的功能/基类，您必须在自定义 MVVM 实现中自己实现这些功能；例如，Prism 提供了解决 SL 或 WPF 应用程序（EventAggregator、导航框架、命令等）中遇到的各种问题/场景的标准方法。

看看我问过的关于棱镜的这个问题 -

[自定义 MVVM 实现与。棱镜](https://stackoverflow.com/questions/6251821/custom-mvvm-implementation-vs-prism)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T13:51:51.263

不，您不需要为此使用第三方框架。您只需要遵循 MVVM 的架构并尝试在其中实现您的代码。您可以在此处了解有关 MVVM 的更多信息，在此处[输入链接描述](http://weblogs.asp.net/fredriknormen/archive/2009/11/30/silverlight-4-mvvm-with-commanding-and-wcf-ria-services.aspx)

[最适合 MVVM 架构](http://weblogs.asp.net/fredriknormen/archive/2009/11/30/silverlight-4-mvvm-with-commanding-and-wcf-ria-services.aspx)

# c++ - 了解 C++ 模板

> ID：10698166
> 
> 赞同：1
> 
> 时间：2012-05-22T08:09:44.390
> 
> 标签：c++, templates, point-cloud-library

这是我班级中的函数声明：

```
template <typename PointInT, typename PointNT, typename PointOutT>
class WrinklednessEstimation: public FeatureFromNormals<PointInT, PointNT, PointOutT>
{
    ...
    void normalsToSpherical(const PointCloud<PointNT> &input, PointCloud<Normal> &output);
    ...
} 
```

这是实现的一部分：

```
template <typename PointInT, typename PointNT, typename PointOutT> void
pcl::WrinklednessEstimation<PointInT, PointNT, PointOutT>::normalsToSpherical(const PointCloud<PointNT> &input, PointCloud<Normal> &output)
{
    ...
} 
```

这是编译器抱怨：

```
wrinkledness.cpp: In member function ‘void pcl::WrinklednessEstimation<PointInT, PointNT, pointOutT>::computeFeature(typename pcl::Feature<PointInT, PointOutT>::PointCloudOut&) [with PointInT = pcl::PointWithViewpoint, PointNT = pcl::Normal, PointOutT = pcl::InterestPoint]’:
wrinkledness.cpp:76:   instantiated from here
wrinkledness.cpp:40: error: no matching function for call to ‘pcl::WrinklednessEstimation<pcl::PointWithViewpoint, pcl::Normal, pcl::InterestPoint>::normalsToSpherical(boost::shared_ptr<const pcl::PointCloud<pcl::Normal> >&, boost::shared_ptr<pcl::PointCloud<pcl::Normal> >&)’
wrinkledness.cpp:45: note: candidates are: void pcl::WrinklednessEstimation<PointInT, PointNT, PointOutT>::normalsToSpherical(const pcl::PointCloud<PointOutT>&, pcl::PointCloud<pcl::Normal>&) [with PointInT = pcl::PointWithViewpoint, PointNT = pcl::Normal, PointOutT = pcl::InterestPoint] 
```

我不明白的是，为什么候选人有`PointOutT`而不是`PointNT`在第一个参数？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:16:44.743

您`boost::shared_ptr`在调用函数时用作参数。尝试使用类似的方法调用该函数`*my_shared_ptr`。

# git - 要求 git 查找 id_rsa 以外的其他密钥

> ID：10698167
> 
> 赞同：6
> 
> 时间：2012-05-22T08:09:46.430
> 
> 标签：git, ssh, github

我不知道为什么，但即使我在 ssh 配置中正确提到了为 github 查找名称为 viren.pub 的身份文件

**git 仍然将 id_rsa 视为默认值，除非我将viren.pub**和**viren**重命名为**id_rsa.pub**和**id_rsa**，否则它似乎不起作用

 **这里我的 ssh 配置看起来像

```
Host ec2-123-121-121-121.compute-1.amazonaws.com
        Hostname github.com
        User git
        IdentityFile /root/.ssh/viren 
```

谁能帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:20:07.640

我相信 ssh 配置仅适用于使用`host`子句中定义的别名连接到服务器的情况。

即你应该在 ssh 配置中有：

```
host github
    hostname github.com
    user git
    identityfile /root/.ssh/viren 
```

该`host`指令必须遵循您实际用于连接的内容，因此`[Amazon server]`不合适。你必须告诉 git 连接到：

```
github:/.... 
```

（而不是`git@github.com:/.....`）**

# php - 使用 PHP SDK 将外部文件上传到 AWS S3 存储桶

> ID：10698170
> 
> 赞同：8
> 
> 时间：2012-05-22T08:09:52.233
> 
> 标签：php, upload, amazon-s3

我想使用 PHP 开发工具包将文件从外部 URL 直接上传到 Amazon S3 存储桶。我设法用以下代码做到了这一点：

```
$s3 = new AmazonS3();
$response = $s3->create_object($bucket, $destination, array(
  'fileUpload' => $source,
  'length' => remote_filesize($source),
  'contentType' => 'image/jpeg'
)); 
```

其中函数 remote_filesize 如下：

```
function remote_filesize($url) {
  ob_start();
  $ch = curl_init($url);
  curl_setopt($ch, CURLOPT_HEADER, 1);
  curl_setopt($ch, CURLOPT_NOBODY, 1);
  $ok = curl_exec($ch);
  curl_close($ch);
  $head = ob_get_contents();
  ob_end_clean();
  $regex = '/Content-Length:\s([0-9].+?)\s/';
  $count = preg_match($regex, $head, $matches);
  return isset($matches[1]) ? $matches[1] : "unknown";
} 
```

但是，如果我可以在上传到亚马逊时跳过设置文件大小，那就太好了，因为这样可以节省我去我自己的服务器的时间。但是，如果我删除 $s3->create_object 函数中的“长度”属性设置，我会收到一条错误消息，指出“无法确定流式上传的流大小”。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T23:23:59.430

您可以像这样将文件从 url 直接上传到 Amazon S3（我的示例是关于 jpg 图片）：

**1.将url中的内容转换成二进制**

```
$binary = file_get_contents('http://the_url_of_my_image.....'); 
```

**2\. 创建一个带有*主体*的 S3 对象以将二进制文件传递到**

```
$s3 = new AmazonS3();
$response = $s3->create_object($bucket, $filename, array(
    'body' => $binary, // put the binary in the body
    'contentType' => 'image/jpeg'
)); 
```

仅此而已，而且速度非常快。享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T10:15:01.660

您对远程服务器/主机有任何控制权吗？如果是这样，您可以设置一个 php 服务器来在本地查询文件并将数据传递给您。

如果没有，您可以使用 curl 之类的东西来检查标题；

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://sstatic.net/so/img/logo.png');
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_exec($ch);
$size = curl_getinfo($ch, CURLINFO_CONTENT_LENGTH_DOWNLOAD);
var_dump($size); 
```

这样，您使用的是 HEAD 请求，而不是下载整个文件——仍然，您依赖于远程服务器发送正确的 Content-length 标头。

# javascript - 将脚本插入 DOM 时，jQuery .on() 未绑定

> ID：10698177
> 
> 赞同：2
> 
> 时间：2012-05-22T08:10:18.883
> 
> 标签：javascript, events, jquery, dom-manipulation

我有一个包含自定义 jQuery 事件处理程序的远程 javascript 文件。当 this 作为元素插入 DOM`<script src='...'></script>`时，自定义事件处理程序未注册。

但是，如果我添加与直接 JS ( ) 完全相同的脚本`<script>...</script>`，则事件处理程序已注册，并且一切都按预期执行。

当脚本作为远程文件插入时，为什么事件处理程序没有绑定到 jQuery 中？

## 例子

包含自定义事件处理程序的远程文件：

```
console.log('Before custom event handler');
$('button').on('customEvent', function(){
    console.log('customEvent Caught');
}); 
```

[https://gist.github.com/2767385](https://gist.github.com/2767385)

将脚本插入 DOM的（*非工作）javascript：*

```
var scriptNode = document.createElement('script');
    scriptNode.src = 'https://gist.github.com/raw/2767385/b9ddea612ff60b334bd2430e59903174e527a3b5/gistfile1.js';
document.body.appendChild(scriptNode); 
```

将脚本作为内联插入 DOM的（*工作替代）javascript：*

```
var scriptText = "console.log('Before custom event handler'); $('button').on('customEvent', function(){ console.log('customEvent Caught'); });",
    scriptNode = document.createElement('script');
scriptNode.appendChild(document.createTextNode(scriptText));
document.body.appendChild(scriptNode); 
```

触发事件：

```
$('button').triggerHandler('customEvent'); 
```

JS被正确读取，处理程序被正确执行。

### JSFiddles

*远程文件*- 非工作示例： http: [//jsfiddle.net/3CfFM/3/](http://jsfiddle.net/3CfFM/3/)
*使用文本*- 工作替代：http: [//jsfiddle.net/3CfFM/2/](http://jsfiddle.net/3CfFM/2/)

## 发生了什么？

当脚本作为远程文件插入时，为什么事件处理程序没有绑定到 jQuery 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:44:32.050

你错了。与远程脚本一起使用时，事件处理程序*被绑定；*只是需要更长的时间。浏览器需要在绑定处理程序之前发出 HTTP 请求。这意味着您触发的原始​​事件`triggerHandler('customEvent')`不会被捕获，因为它的冒泡和捕获已经完成。

如果稍等片刻，然后再次单击该按钮，您将看到事件处理程序确实已绑定。您还可以通过延迟`triggerHandler`调用直到脚本加载来看到这一点：

```
$('button').click(function() {
    var scriptNode = document.createElement('script');
    scriptNode.src = 'https://gist.github.com/raw/2767385/897cffca74411dbb542c0713bacb5a4048d6708b/gistfile1.js';
    scriptNode.onload = function() {
        $('button').triggerHandler('customEvent');
    };
    document.body.appendChild(scriptNode);
}); 
```

[http://jsfiddle.net/3CfFM/4/](http://jsfiddle.net/3CfFM/4/)

# html - 为什么 jqGrid 在移动 div 父级后无法调整列的大小？

> ID：10698181
> 
> 赞同：0
> 
> 时间：2012-05-22T08:10:35.730
> 
> 标签：html, jqgrid, jwindow

我的网格运行良好，但是当我移动父级时，我无法调整列的大小。父级是插件 jWindow。

不让我的简单 jqGrid 工作的拖动窗口更改是什么？

在这里你会发现我的想法 192.168.51.67/tests/CliT_jqm/index.html （你需要调整你的浏览器的大小，让神奇的 jWindow 出现 :)

# facebook-apps - 如何将 Facebook 应用程序集成到 Facebook 群组中？

> ID：10698182
> 
> 赞同：1
> 
> 时间：2012-05-22T08:10:36.617
> 
> 标签：facebook-apps

是否可以将 facebook 应用程序的功能集成到 facebook 群组中？例如业力系统？有没有这方面的 API？

教程也将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:48:10.497

无法在 Facebook 群组中使用应用程序，也无法更改群组功能。

# scala - 阿卡问广播

> ID：10698183
> 
> 赞同：5
> 
> 时间：2012-05-22T08:10:38.287
> 
> 标签：scala, routing, akka

我有一个 akka 2.0 循环路由器。现在我需要向所有路由广播消息并等待所有人的答案。我还没有找到这样做的方法。首先，我有一个传递给路由器的演员列表，但现在我需要从我的 application.conf 加载它们。有没有办法等待广播的所有消息？如果我能从 conf 文件中获得路由的数量，那也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:27:13.167

如果您知道路由的数量，那么您通常只会计算收到的答案数量。但是，您可能需要考虑超时，特别是如果您的演员正在分布式运行，因为无法保证消息真的被传递。

# php - 从数据库填充多个相关下拉列表

> ID：10698192
> 
> 赞同：1
> 
> 时间：2012-05-22T08:11:32.050
> 
> 标签：php, jquery, mysql, ajax

我有 2 个下拉菜单。第一个我填充了可能的大洲，并希望第二个下拉列表包含所有国家/地区，具体取决于在第一个菜单中选择的大洲。我只有 1 个带有列的 mysql 表：大陆 --> 国家。目前，即使选择了一个大洲，下拉列表中也有来自各大洲的所有国家/地区。感谢您的帮助！这是我的代码：

HTML

```
<input type="text" class="autosuggest" id="autosuggest2" placeholder="Select Country...">
<div class="country">
<ul class="result" id="result2"></ul>
</div>
<input type="text" class="autosuggest" id="autosuggest3" placeholder="Select Area...">
<div class="area">
<ul class="result" id="result3"></ul>
</div> 
```

jQuery/阿贾克斯

```
$(document).ready(function() { 
$('#autosuggest1').keyup(function() {
    var continent = $(this).attr('value');
    $.post('php/dropdown.php', {continent:continent}, function(data) {
        $('#result1').html(data);

        $('.result li').click(function() {
            var result_value = $(this).text();
            $('#autosuggest1').attr('value', result_value);
            $('#result1').html('');
            $('#result1').focusout('');
        });
    });
});

$('#autosuggest2').keyup(function() {
    var country = $(this).attr('value');
    $.post('php/dropdown.php', {country:country}, function(data) {
        $('#result2').html(data);

        $('.result li').click(function() {
            var result_value = $(this).text();
            $('#autosuggest2').attr('value', result_value);
            $('#result2').html('');
            $('#result2').focusout('');
        });
    });
});
}); 
```

PHP

```
require_once '../connect/connectdropdown.php';

if (isset($_POST['continent']) == true && empty($_POST['continent']) == false) {
$continent = mysql_real_escape_string($_POST['continent']);
$query = mysql_query("SELECT DISTINCT `continent` FROM `area` WHERE `continent`    LIKE '$continent%'");
while (($row = mysql_fetch_assoc($query)) !== false) {
    echo '<li>', $row['continent'], '</li>';
}   
}

if (isset($_POST['country']) == true && empty($_POST['country']) == false) {
$country = mysql_real_escape_string($_POST['country']);
$query = mysql_query("SELECT DISTINCT `country` FROM `area` WHERE `country` LIKE '$country%'");
while (($row = mysql_fetch_assoc($query)) !== false) {
    echo '<li>', $row['country'], '</li>';
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:27:14.137

我想知道你是否还在做这个。无论如何，我会建议几件事：

只做一个查询，将其传递给 json，然后将其传递给 javascript。

PHP

```
require_once '../connect/connectdropdown.php';
$id=0;
$result=array();
$query = mysql_query("SELECT * FROM `area` ");
while (($row = mysql_fetch_assoc($query)) !== false) {
   $result[$id]=$row;
   $id++;
}   
echo json_encode($result); 
```

Javascript

```
$(document).ready(function() { 
      var $mysqlData;
      $.post('php/dropdown.php', {continent:continent}, function(data) {

        //Json Data from server:
        alert('JSON data: '+data)
        //you can transform the data from PHP-Json to Javascript Object
        $mysqlData = jQuery.parseJSON(data)
        //now you can access your data like:
        alert ('My first continent: '+$mysqlData[0].continent+' and it\'s first country: '+$mysqlData[0].country)
      });

      $('#autosuggest1').keyup(function() {
          //Now you can use $mysqlData inside your logic
      })

      $('#autosuggest2').keyup(function() {
          //You can use $mysqlData here too
      })

}); 
```

我没有测试这段代码，可能有一些错误，但我建议你采取的逻辑。

# java-me - Java Me 视频播放器使用 http 实现错误 - MediaException

> ID：10698193
> 
> 赞同：2
> 
> 时间：2012-05-22T08:11:42.857
> 
> 标签：java-me, video-streaming, midp, mmapi

我正在使用以下代码（来自[http://www.java-tips.org/java-me-tips/midp/playing-video-on-j2me-devices.html](http://www.java-tips.org/java-me-tips/midp/playing-video-on-j2me-devices.html)的引用）。它在 'realize()' 处失败`javax.microedition.media.MediaException`，出现“无法创建本机播放器”。这里有什么问题？
我使用 Eclipse 和 Netbeans 都试过了。我是否缺少一些“互联网”权限或使用了任何不正确的编码，视频是外部“mpg”测试资源，通过桌面浏览器下载时可以正常工作。

```
public void run()
{
    String url = "http://www.fileformat.info/format/mpeg/sample/05e7e78068f44f0ea748855ef33c9f4a/MELT.MPG";

    //Append the GUI to a form
    Form form = new Form("Video on java mobile!");
    Display display = Display.getDisplay(this);
    display.setCurrent(form);

    try
    {
        HttpConnection conn = (HttpConnection)Connector.open(url, 
            Connector.READ_WRITE);
        InputStream is = conn.openInputStream();

        Player p = Manager.createPlayer(is,"video/mpeg");
        //I tried the below, but that didn't work either
        //Player p = Manager.createPlayer(url);
        p.realize();

        //Get the video controller
        VideoControl video = (VideoControl) p.getControl("VideoControl");
        if(video != null) 
        {
            //Get a GUI to display the video
            Item videoItem = (Item)video.initDisplayMode(
            VideoControl.USE_GUI_PRIMITIVE, null);

            form.append(videoItem);
        }

        //Start the video          
        p.prefetch();
        p.start();
    }
    catch(Exception e)
    {
        form.append(url + " Error:" + e.getMessage());
    }

} 
```

我刚刚开始使用 Java、Eclipse、Netbeans。因为到处都有类似的样本，我相信我错过了一些非常基本的东西。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:12:03.073

这里的问题是视频文件。虽然我的源视频看起来像是“mpeg”，但模拟器无法接受。经过一番搜索，我找到了一个转换器，我手动将一些示例 mp4 转换为“mpeg”。在我尝试下载和播放这些手动转换的文件之后，它终于可以在同一个模拟器上工作了。

如果您是新的 J2ME/JavaME 应用程序（如我），请继续使用输入数据源/格式和模拟器。切换模拟器或输入数据格式是识别不那么明显的问题的简单方法。

# iphone - 如何在内存警告 viewDidUnload 后保留值

> ID：10698195
> 
> 赞同：4
> 
> 时间：2012-05-22T08:11:49.833
> 
> 标签：iphone, ios, uiimagepickercontroller, memo

我的问题是当我使用相机 UIImagePicker 并且手机内存不足时。它会引发内存警告并卸载视图，然后重新加载。

我知道这是一个非常普遍的问题，而且很多问题已经在 SO 中了。我不会进入这个。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    MyPersonClass *persons = [[MyPersonClass alloc] init];   
    persons.images = [NSMutableDictionary dictionaryWithCapacity:4];
....
...
} 
```

我的问题是我的视图控制器有四个按钮和 UIImageViews，当我点击每个按钮时，它们会打开相机，点击的图像会显示在 UIImageViews 中，这些图像也存储在`persons.images`NSMutable 字典中。

![在此处输入图像描述](../Images/c72e88dfe36d6291413bd69a23c42ad3.png)

有时它会引发内存警告的流行错误并卸载视图，这会删除 UIImageView 中在内存警告之前拍摄的所有图像，并且我丢失了所有内容，`persons.iamges`我只想能够检索这些数据。我不知道在哪里存储它（我不想为此使用 CoreData）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:15:42.563

您可以在调用**viewDidUnload**时维护用于存储图像的实例变量。**在viewDidUnload**中设置一个标志，然后存储您的 Imageviews 的所有图像。并在**viewDidLoad**检查标志，如果**viewDidUnload**被调用，则将保存的图像分配给您的 ImageView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:18:37.943

您可以像这样将 MutableDictionary 保存为沙盒应用程序中的 plist

```
[yourMutableDictionary writeToFile:pathToSave atomically:YES]; 
```

然后，通过这种方式获取你的 NSMutableDictionary

```
NSMutableDictionary *containOfPlist = [NSMutableDictionary arrayWithContentsOfFile:pathToYourPlist]; 
```

希望这是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:21:27.050

请使用 NSCache 来存储带有 KeyValue 对的图像。在内存警告上，将 NSCache 对象写入文件，并在内存不足警告回调时清除 NScache 对象中的所有对象。在再次加载应用程序时，从该文件中读取 NSCAche。

所以我以这种方式可以保存数据并可以使用它。

另一种选择是采用 NSDictnaory 并通过使用 NSArchiver 类存储它。

# javascript - ASP.NET Javascript 未发送到 jQuery UI 对话框

> ID：10698204
> 
> 赞同：0
> 
> 时间：2012-05-22T08:12:27.617
> 
> 标签：javascript, asp.net, asp.net-mvc-3, nicedit

我在 ASP.NET MVC3 中开发，我有下面的代码来发送包含一些 javascript 的视图，它将被加载到客户端的 jQuery UI 对话框中，但我在客户端的任何地方都看不到 Javascript 代码,

看法 ：

```
@model APS.HelpDesk.Data.App_TaskComment
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Ajax.BeginForm("AllAddComment", new { area = "Task" }, new AjaxOptions
{
    HttpMethod = "POST",
    InsertionMode = InsertionMode.Replace,
    LoadingElementId = "AddCommnetloadingGif",
    UpdateTargetId = "AllCommentList" + Model.TaskId,
    OnSuccess = " $('#AddCommentDialog').dialog('close');"
}))
{
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model => model.TaskId)
    <input type="hidden" value="@Model.TaskId" id="TaskId" />
    <div class="editor-label">
        @Html.Label("کامنت جديد")
    </div>
    <div class="editor-field">
        <textarea id="CommentText" rows="2" name="CommentText" data-val-required="نوشتن کامنت ضروری است"
            data-val="true" cols="20"></textarea>
        <br />
        @Html.ValidationMessageFor(model => model.CommentText)
    </div>
    <p>
        <input type="submit" value="ارسال" />
    </p>
    <div id="AddCommnetloadingGif" style="display: none">
        <img src="@Url.Content("~/Content/Images/ajax-loader/1.gif")" />
    </div>
}
<script type="text/javascript">
    $(document).ready(function () {
        bkLib.onDomLoaded(function () {
            new nicEditor({ iconsPath: '@Url.Content("~/Content/WYSIWYG/nicEditorIcons.gif")' }).panelInstance('CommentText');
        });
    });
</script> 
```

对话框的代码来自 Firebug

```
<div style="outline: 0px; height: auto; width: 500px; position: absolute; top: 385px; left: 379px; display: block; z-index: 1002; " class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-AddCommentDialog"><div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span class="ui-dialog-title" id="ui-dialog-title-AddCommentDialog">ايجاد کامنت جديد</span><a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><div id="AddCommentDialog" style="text-align: right; width: auto; min-height: 108px; height: auto; " class="ui-dialog-content ui-widget-content">

<form action="/Task/Task/AllAddComment" data-ajax="true" data-ajax-loading="#AddCommnetloadingGif" data-ajax-method="POST" data-ajax-mode="replace" data-ajax-success=" $('#AddCommentDialog').dialog('close');" data-ajax-update="#AllCommentList15" id="form0" method="post"><input data-val="true" data-val-number="The field TaskId must be a number." data-val-required="The TaskId field is required." id="TaskId" name="TaskId" type="hidden" value="15">    <input type="hidden" value="15" id="TaskId">
    <div class="editor-label">
        <label for="">کامنت جديد</label>
    </div>
    <div class="editor-field">
        <textarea id="CommentText" rows="2" name="CommentText" data-val-required="نوشتن کامنت ضروری است" data-val="true" cols="20"></textarea>
        <br>
        <span class="field-validation-valid" data-valmsg-for="CommentText" data-valmsg-replace="true"></span>
    </div>
    <p>
        <input type="submit" value="ارسال">
    </p>
    <div id="AddCommnetloadingGif" style="display: none">
        <img src="/Content/Images/ajax-loader/1.gif">
    </div>
</form>
</div><div class="ui-resizable-handle ui-resizable-n" style=""></div><div class="ui-resizable-handle ui-resizable-e" style=""></div><div class="ui-resizable-handle ui-resizable-s" style=""></div><div class="ui-resizable-handle ui-resizable-w" style=""></div><div class="ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se" style="z-index: 1001; "></div><div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1002; "></div><div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1003; "></div><div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1004; "></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:36:49.273

很奇怪，我可以看到它并且脚本也可以工作（放一个`alert`）：

![在此处输入图像描述](../Images/e3014e2da42268b15d168ee7b377a866.png)

这是我的测试代码（当然简化以消除所有噪音）：

模型：

```
public class App_TaskComment
{
    public int TaskId { get; set; }
    public string CommentText { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Dialog()
    {
        var model = new App_TaskComment();
        return PartialView("_dialog", model);
    }
} 
```

主视图（`~/Views/Home/Index.cshtml`）：

```
<script type="text/javascript">
    $(function () {
        var url = '@Url.Action("dialog")';
        $('<div id="dialog">Loading...</div>').appendTo('body').dialog({
            modal: true
        }).load(url, { });
    });
</script>

<div id="AddCommentDialog"></div> 
```

使用 AJAX ( ) 加载的对话框部分`~/Views/Home/_Dialog.cshtml`：

```
@model App_TaskComment
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Ajax.BeginForm("AllAddComment", new { area = "Task" }, new AjaxOptions
{
    HttpMethod = "POST",
    InsertionMode = InsertionMode.Replace,
    LoadingElementId = "AddCommnetloadingGif",
    UpdateTargetId = "AllCommentList" + Model.TaskId,
    OnSuccess = "$('#AddCommentDialog').dialog('close');"
}))
{
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model => model.TaskId)
    <input type="hidden" value="@Model.TaskId" id="TaskId" />
    <div class="editor-label">
        @Html.Label("کامنت جديد")
    </div>
    <div class="editor-field">
        <textarea id="CommentText" rows="2" name="CommentText" data-val-required="نوشتن کامنت ضروری است"
            data-val="true" cols="20"></textarea>
        <br />
        @Html.ValidationMessageFor(model => model.CommentText)
    </div>
    <p>
        <input type="submit" value="ارسال" />
    </p>
    <div id="AddCommnetloadingGif" style="display: none">
        <img src="@Url.Content("~/Content/Images/ajax-loader/1.gif")" />
    </div>
}
<script type="text/javascript">
    $(document).ready(function () {
        bkLib.onDomLoaded(function () {
            new nicEditor({ iconsPath: '@Url.Content("~/Content/WYSIWYG/nicEditorIcons.gif")' }).panelInstance('CommentText');
        });
    });
</script> 
```

# javascript - Eclipse - JSP 中的 Javascript 代码验证

> ID：10698205
> 
> 赞同：2
> 
> 时间：2012-05-22T08:12:29.503
> 
> 标签：javascript, eclipse, jsp

有没有办法在 Eclipse 中为 JSP 中的 Javascript 启用某种代码检查？我在标签之间有一些代码`<script>`，当出现语法错误时，我无法轻易找到错误的位置......这很烦人......

**注意**在*Window > Preferences > Validation*我启用**了 Client-side Javascript validator** , **JSP Content validator**和**JSP Syntax validator** ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:51:35.337

1.  右键单击您的项目

2.  选择属性 -> 构建器

3.  检查“JavaScript Validator”（默认情况下应该是）

# linux - Linux 时区选择器应用程序

> ID：10698214
> 
> 赞同：0
> 
> 时间：2012-05-22T08:13:22.747
> 
> 标签：linux, qt, timezone

我正在编写一个基于 Qt 库的 Linux 应用程序。这是一个伪嵌入式系统，所以我不希望用户拥有任何 shell 访问权限。我需要设置时区。我能想到的最优雅的解决方案是将 tzselect 包装在一些应用程序代码中。但如果有更好的方法，我将不胜感激任何建议。:)

Qt 本机解决方案会更可取，但 Qt 文档指出 QDateTime 使用系统时间和时区。

# zos - 搜索来自 pds 的字符串是否存在于另一个 pds 中

> ID：10698215
> 
> 赞同：1
> 
> 时间：2012-05-22T08:13:26.133
> 
> 标签：zos, jcl

我有一个具有作业名（超集）的 pds（比如 A）。我有另一个 pds（比如 B），其作业名（子集）数量较少。

使用 JCL 在另一个文件 C 中找到 AB 的最佳方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:29:38.133

尝试使用[SYNCORT JOINKEYS](http://publib.boulder.ibm.com/infocenter/zos/v1r12/index.jsp?topic=%2Fcom.ibm.zos.r12.icea100%2Fjoinkeys.htm)，这个[例子](http://publib.boulder.ibm.com/infocenter/zos/v1r12/index.jsp?topic=%2Fcom.ibm.zos.r12.icea100%2Fice1ca50124.htm)就是你所需要的。下面的 JCL 是一个具体示例。`AF1`是包含所有作业名称的超集文件 (A)，`AF2`是子集文件 (B)。`SORTOUT`将包含差异 (AB)。

```
//MYJOB   JOB Whatever your job card needs
//AMINUSB    EXEC  PGM=SYNCSORT,PARM='INCORE=OFF'
//AF1  DD *                 Superset file 'A'
J000001
J000002
J000003
J000004
J000005
J000006
J000007
J000008
J000009
J000010
J000011
J000012
/*
//BF2  DD *                  Subset file 'B'
J000001
J000003
J000004
J000008
J000010
J000011
/*
//SORTOUT    DD SYSOUT=*    'A' - 'B'
//*
//SORTMSG   DD SYSOUT=*
//SYSOUT    DD SYSOUT=*
//CEEDUMP   DD SYSOUT=*
//STATOUT   DD SYSOUT=*
//SYSIN     DD *
  JOINKEYS FILE=F1,FIELDS=(1,7,A)
  JOINKEYS FILE=F2,FIELDS=(1,7,A)
  JOIN UNPAIRED,F1,ONLY
  REFORMAT FIELDS=(F1:1,7)
  OPTION COPY
  END
/* 
```

如果你运行它，`SORTOUT`将包含以下数据：

```
J000002 
J000005 
J000006 
J000007 
J000009 
J000012 
```

注意：您必须将`JOB`卡重新格式化为安装所需的任何格式。其余的应该如图所示。

# regex - 正则表达式的确认

> ID：10698217
> 
> 赞同：1
> 
> 时间：2012-05-22T08:13:35.680
> 
> 标签：regex, validation

我需要验证 url，所以我使用了网站[http://www.rubular.com/](http://www.rubular.com/)，也许我得到了错误的结果。所以我写了这个：`w{3}\.[a-z]+\.[a-z]{3}`在[http://www.rubular.com/](http://www.rubular.com/)它给了我几乎想要的结果。在我的模型网站中，我写道：

```
 VALID_URL_REGEX = /w{3}\.[a-z]+\.[a-z]{3}/
 validates :url, :presence => true, format: { with: VALID_URL_REGEX } 
```

问题：我该如何检查，最后一部分应该只包含 3 个字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:25:49.843

您必须使用`\A`and`\z`来匹配字符串的开头和结尾。

像这样：`/\Aw{3}\.[a-z]+\.[a-z]{3}\z/`。

但就像 Mahmoud Al-Qudsi 所说，tld 的字母可以多于或少于 3 个。你应该让它匹配多个子域或裸域（例如 stackoverflow.com 而不是 www.stackoverflow.com）。

我想出了这个`/\A(?:[\w-]+(?<!-)\.){1,}[\w]{2,}\z/`。

# redmine - Trackmine 错误：找不到 Redmine 问题状态：已接受

> ID：10698219
> 
> 赞同：1
> 
> 时间：2012-05-22T08:13:55.853
> 
> 标签：redmine, redmine-plugins, pivotaltracker

这真让我抓狂。我尝试安装[trackmine 插件](https://github.com/capita/redmine_trackmine)以集成关键跟踪器和 redmine，但我不断遇到依赖关系和设置错误的问题。

现在我几乎可以让它工作了，但是当我在 Pivotal 中添加一个故事并对其进行修改时，我收到一封包含此错误的电子邮件：

```
Got error from Trackmine:
Error while reading activity message from Pivotal Tracker: Can't find Redmine IssueStatus: 'Accepted' 
```

知道我将如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T14:28:36.863

问题是，开始一个故事会产生一个状态为“已接受”的 Redmine 问题。所以你必须有那个名字的状态，否则你会得到一个错误。您可以通过管理员面板或从控制台手动添加该状态。我每天使用 Trackmine 一年多，它似乎工作（Rails 2.3.5 + Redmine 1.0.4）。无论如何，祝你好运与积压。

# java - 如何在非线程方法“线程中的异常”main“java.util.ConcurrentModificationException”中解决这个问题

> ID：10698224
> 
> 赞同：-1
> 
> 时间：2012-05-22T08:14:33.030
> 
> 标签：java, map

我试图从映射中删除值，当我尝试这个时，我得到以下异常。

```
Exception in thread "main" java.util.ConcurrentModificationException 
```

我的代码如下。

```
public static Map removeHolyday(Map daysMap,Map holydayMap){
        Iterator<Map.Entry> workingDays = daysMap.entrySet().iterator();
          while (workingDays.hasNext()) {
              Map.Entry workingDaysEntry = workingDays.next();
              System.out.println("Key = " + workingDaysEntry.getKey() + ", Value = " + workingDaysEntry.getValue());
              Iterator<Map.Entry> holydays = daysMap.entrySet().iterator();
              while (holydays.hasNext()) {
                  Map.Entry holydayEntry = holydays.next();
                  if(workingDaysEntry.getKey().toString().equals(holydayEntry.getKey().toString())){
                      daysMap.remove(workingDaysEntry.getKey().toString());
                  }
              }
          }
        return daysMap;
    } 
```

请帮我解决这个问题。

编辑 ：

这是我使用的代码，但该值并未从地图中删除；

```
package sample;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

class Workindays {
    public static int findNoOfDays(int year, int month, int day) {
        Calendar calendar = Calendar.getInstance();
        System.out.println("month : " + month);
        calendar.set(year, month - 1, day);
        int days = calendar.getActualMaximum(Calendar.DAY_OF_MONTH);
        System.out.println("days :"+days);
        return days;
    }
    public static Map getHolydaysMap(int year, int month, int day) {
        //connect with database and check whether the date is holyday query is = SELECT * FROM holiday_calendar h WHERE date >='2008-10-01' AND date <='2008-10-30' AND type='Fixed';
        Map holydaysMap = new ConcurrentHashMap(); 
        holydaysMap.put("17","17-04-2012");
        holydaysMap.put("25","25-04-2012");
        return holydaysMap;
    }
    public static Map getWorkingDaysMap(int year, int month, int day){
        int totalworkingdays=0,noofdays=0;
        String nameofday = "";
        Map workingDaysMap = new HashMap();
        Map holyDayMap = new ConcurrentHashMap();
        noofdays = findNoOfDays(year,month,day);
        holyDayMap = getHolydaysMap(year,month,day);

        for (int i = 1; i <= noofdays; i++) {
            Date date = (new GregorianCalendar(year,month - 1, i)).getTime(); // year,month,day
            SimpleDateFormat f = new SimpleDateFormat("EEEE");
            nameofday = f.format(date);
            String formatedDate = i + "-" + month + "-" + year;
            if(!(nameofday.equals("Saturday") || nameofday.equals("Sunday"))){
                workingDaysMap.put(i,formatedDate);
                totalworkingdays++;
            }
        }
        workingDaysMap.put("totalworkingdays", totalworkingdays);
        System.out.println("removeHolyday : "+removeHolyday(workingDaysMap,holyDayMap));
        return workingDaysMap;
    }

    public static Map removeHolyday(Map daysMap,Map holydayMap){
        Iterator<Map.Entry> holyDayiterator = holydayMap.entrySet().iterator();
          while (holyDayiterator.hasNext()) {
              Map.Entry holyDayEntry = holyDayiterator.next();
             Iterator<Map.Entry> daysiterator = daysMap.entrySet().iterator();

             while (daysiterator.hasNext()) {
                  Map.Entry daysEntry = daysiterator.next();
                  if(daysEntry.getKey().equals(holyDayEntry.getKey()))
                      daysMap.remove(holyDayEntry.getKey());
              }
          }
System.out.println(daysMap);
        return daysMap;
    }

    public static void main(String[] args) {
        String delimiter = null, dateValues[] = null, startDate = "01-04-2012";
        int year = 0,month=0,day=0,totalworkingdays = 0;
        Map workingDaysMap = new LinkedHashMap();

        startDate = "01-04-2012";
        delimiter = "-";
        dateValues = startDate.split(delimiter);

        year = Integer.parseInt(dateValues[2]);
        month = Integer.parseInt(dateValues[1]);
        day = Integer.parseInt(dateValues[0]);

        workingDaysMap = getWorkingDaysMap(year, month, day);
        System.out.println("workingdays map : "+workingDaysMap);

    }
} 
```

工作代码：

```
package sample;

import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;

public class Main {
    public static Map removeHolyday(Map daysMap,Map holydayMap){
        Iterator<Map.Entry> holyDayiterator = holydayMap.entrySet().iterator();
          while (holyDayiterator.hasNext()) {
              Map.Entry holyDayEntry = holyDayiterator.next();
             Iterator<Map.Entry> daysiterator = daysMap.entrySet().iterator();

             while (daysiterator.hasNext()) {
                  Map.Entry daysEntry = daysiterator.next();
                  if(daysEntry.getKey().equals(holyDayEntry.getKey()))
                      daysMap.remove(holyDayEntry.getKey());
              }
          }
System.out.println(daysMap);
        return daysMap;
    }
    public static void main(String[] args) {

        Map holydaysMap = new ConcurrentHashMap(); 
        holydaysMap.put("17", "17-04-2012");
        holydaysMap.put("25", "25-04-2012");

    Map holydayMap = new HashMap(); 
    holydayMap.put("17", "17-04-2012");
    holydayMap.put("25", "25-04-2012");
    holydayMap.put("3", "03-04-2012");
    holydayMap.put("4", "04-04-2012");

    removeHolyday(holydayMap, holydaysMap);

}
} 
```

问候安东尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:15:52.467

在这种情况下，它实际上很容易 - 只需更改此行：

```
daysMap.remove(workingDaysEntry.getKey().toString()); 
```

至：

```
workingDays.remove(); 
```

在迭代集合时，基本上*只能*通过迭代器的方法对其进行更改。`remove()`请注意，某些迭代器不支持删除 - 希望您正在使用的 map 的实现确实......

编辑：我怀疑你有另一个错误，实际上。这一行：

```
Iterator<Map.Entry> holydays = daysMap.entrySet().iterator(); 
```

应该是：

```
Iterator<Map.Entry> holydays = holydayMap.entrySet().iterator(); 
```

目前你甚至没有使用`holydayMap`. 您还应该在调用后中断`remove()`- 您不能两次删除相同的条目。

编辑：我想我现在已经找到了问题，如果您使用泛型，您会自己发现问题。`holyDayMap`键都是字符串：

```
Map holydaysMap = new ConcurrentHashMap(); 
holydaysMap.put("17","17-04-2012");
holydaysMap.put("25","25-04-2012"); 
```

...但工作日地图键是整数：

```
 for (int i = 1; i <= noofdays; i++) {
        ...
        workingDaysMap.put(i,formatedDate);
    } 
```

现在“17”与 17 不同，因此不会匹配任何条目。如果你用它们的键/值类型声明你的地图，你会更早发现这一点。

请注意，您的“工作”代码示例*没有*这个问题 - 它在任何地方都使用字符串。

（您应该真正考虑字符串是否是开始使用的正确值 - 考虑使用[Joda Time](http://joda-time.sf.net)和`LocalDate`日期表示......）

编辑：这是一个简短但完整的程序，显示`remove()`工作：

```
import java.util.*;

public class Test {
    public static void main(String[] args) {
        Map<String, String> map = new HashMap<String, String>();
        map.put("foo1", "a");
        map.put("foo2", "b");
        map.put("bar1", "c");
        map.put("bar2", "d");
        map.put("foo3", "e");
        System.out.println("Before: " + map);

        Iterator<String> iterator = map.keySet().iterator();
        while (iterator.hasNext()) {
            if (iterator.next().startsWith("foo")) {
                iterator.remove();
            }
        }
        System.out.println("After: " + map);
    }
} 
```

输出：

```
Before: {foo3=e, foo2=b, foo1=a, bar1=c, bar2=d}
After: {bar1=c, bar2=d} 
```

所以你需要弄清楚为什么*你的*代码不这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:31:08.997

构造第一个 map(daysMap)`ConcurrentHashMap`并将您的方法签名更改为：

```
public static Map removeHolyday(ConcurrentHashMap daysMap,Map holydayMap){ 
```

# html - 使用 CSS 使文本正确居中

> ID：10698225
> 
> 赞同：1
> 
> 时间：2012-05-22T08:14:37.087
> 
> 标签：html, css

我想要的是在页面加载时将“正在加载...”显示为简单的文本，并且我希望文本居中 - 水平和垂直。我浏览了很多示例，现在我有了某种似乎可行的解决方案，但我怀疑效果是否始终相同，并且我的代码甚至接近良好的 CSS。我有一个 index.php 页面，在`<body>`标签之后我有这个：

```
<body>

        <div id="loading-standard-user">
            <p id="loading-standard-user-text">Loading...</p>
        </div> 
```

后来我有一个功能可以在页面加载时隐藏文本，但我关心的是`<div>`and`<p>`标签的样式。这是我的CSS：

```
#loading-standard-user {
  width: 100%;
}

#loading-standard-user-text {
  position: fixed;
  width: 100%;
  text-align: center;
  font-size: 40px;
  font-family: arial;
  top: 50%;
  margin-top: -40px;
} 
```

我很确定我有一些不必要的代码，同时我错过了一些东西，我想知道的一件事是我的`font-size: 40px`这必须意味着如果我希望我的代码稍后垂直居中，我`margin-top`的值应该相等到我字体大小的一半，但在视觉上它看起来`margin-top`是居中的字体大小。无论如何，关于造型的任何想法，我的错误在哪里，我怎么能做对？

谢谢

勒隆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:20:42.013

您的 CSS 代码似乎几乎完全符合您的要求。我能找到的唯一问题是你的 margin-top 应该是高度的-50%。您的 div 高度是 40px（这是字体大小），因此您的 margin-top 应该是 -20px 以使其准确居中。

更详细地说：`top: 50%`将文本的顶部设置在容器的中间。然后`margin-top: -20px`将其向上移动 20px 以使其居中。

编辑：如果你想使用`em`，就像@mgibsonbr 建议的那样，试试下面的CSS：

```
#loading-standard-user {
  position: fixed;
  width: 100%;
  height:40px;
  top: 50%;
  margin-top: -2em;

}

#loading-standard-user-text {
  width: 100%;
  text-align: center;
  font-size: 4em;
  font-family: arial; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:32:06.343

似乎没有必要，您的`#loading-standard-user`示例仅使用第二条规则就可以正常工作（至少在 Firefox 和 Chrome 上）。（您在`position: fixed`内部 div 上使用的事实使您放置外部无关紧要）

对于`top`and`margin-top`问题，它可能看起来像是居中的，但这并不意味着它实际上是：

![在此处输入图像描述](../Images/3db32d24ad325eff980394283704e03b.png)

如果您担心稍后调整文本大小，我建议您使用`em`而不是`px`设置您的大小，这样当用户调整浏览器文本大小时它们会自动调整。`1 em`是大写“M”`1 ex`的高度，而是小写“x”的高度。

（不幸的是，在实践中我无法让它工作，`em`而`px`它工作得很好。也许我错过了什么？）

# qt - QML 绑定项问题

> ID：10698226
> 
> 赞同：0
> 
> 时间：2012-05-22T08:14:48.050
> 
> 标签：qt, binding, qml, qt-quick

我在 QML 中绑定项目时遇到问题，例如：

```
Rectangle{
    id: thetarget
    width:100
    height:100
}
Item{
    id: container
    MouseArea{            
        id:mousearea
        drag.target: thetarget  //not work        
        anchors.fill: thetarget  //not work
        property int foo: thetarget.width  //work
    }
} 
```

我想要的是在不改变结构的情况下使 drag.target、anchors.fill 的绑定工作（mousearea 不是目标的兄弟或子级）。我已经使用了Binding，函数来返回目标，但是它们都没有用。有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:29:20.000

将 的父级设置`mousearea`为`thetarget`。

```
import QtQuick 1.1

Item {
    Rectangle {
        id: thetarget
        width: 100
        height: 100
    }
    Item {
        id: container
        MouseArea {
            id: mousearea
            parent: thetarget
            drag.target: thetarget
            anchors.fill: thetarget
            property int foo: thetarget.width
        }
    }
} 
```

# sql - 水晶报表和sql命令

> ID：10698229
> 
> 赞同：0
> 
> 时间：2012-05-22T08:14:59.020
> 
> 标签：sql, vb.net, crystal-reports

![在此处输入图像描述](../Images/ec4360e88ad4698f838895c72a33bd04.png)

我在水晶报表中显示连接表中的数据内容时遇到问题，我的 sql 查询很好，它显示了我自己的数据，但是当我填充水晶报表数据源并显示水晶重复重复和更多数据时，我的代码是：

```
 Dim rep As CrystalReport1 = New CrystalReport1()
Dim objcon = New SqlConnection("data source=(local);initial catalog=hesabres;user id='sa';password='Maysam7026'")
Dim objcom = New SqlCommand
Dim objdata As New DataTable
Dim objdr As SqlDataReader
objcom.CommandText = " SELECT customer.customer_name, customer.customer_tel, orders.order_stuff_name, orders.order_number" & _ " FROM   hesabres.dbo.orders orders inner JOIN hesabres.dbo.customer customer ON orders.order_customer_id=customer.customer_id"

objcom.Connection = objcon
objcon.Open()
objdr = objcom.ExecuteReader
objdata.Load(objdr)
rep.SetDataSource(objdata)
CrystalReportViewer1.ReportSource = rep 
```

事实上，可能买了一把椅子和一个球，而贾汉买了一个球！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:44:53.977

Crystal 报表本身不显示任何数据。

如果您的数据库查询结果很好，那么他们的代码就是他们的东西。

我建议请详细检查您的代码。

在 select 语句中应用 distinct 关键字，如下所示，然后检查它

```
 SELECT Distinct customer.customer_name, customer.customer_tel, 
orders.order_stuff_name, orders.order_number" & _ " 
FROM   hesabres.dbo.orders orders 
inner JOIN hesabres.dbo.customer customer 
ON orders.order_customer_id=customer.customer_id 
```

# vb.net - VB.Net 通过数据变量填充数据集中的表格

> ID：10698230
> 
> 赞同：0
> 
> 时间：2012-05-22T08:15:10.737
> 
> 标签：vb.net

嗨，我需要通过在 VB.Net 中按变量提供数据来逐行填充数据表（在数据集中）。变量通过循环分配其值..因此数据表行应逐行填充，直到循环结束。表中有三列。所以表应该填充不同类型的数据类型变量。请帮助..我需要一段代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:18:06.290

示例代码：

**将新记录插入无类型数据集中**

```
Dim newEmployeeRow As DataRow = DtEmployee.Tables("Employee").NewRow()

newEmployeeRow ("EmpNo") = value
newEmployeeRow ("EmpName") = value
newEmployeeRow ("Commission") = value

DtEmployee.Tables("Employee").Rows.Add(newEmployeeRow ) 
```

**将新记录插入类型化数据集中**

```
Dim newCustomersRow As NorthwindDataSet.CustomersRow
newCustomersRow = NorthwindDataSet1.Customers.NewCustomersRow()

newCustomersRow.CustomerID = "ALFKI"
newCustomersRow.CompanyName = "Alfreds Futterkiste"

NorthwindDataSet1.Customers.Rows.Add(newCustomersRow) 
```

# .net - 具有多服务 WCF 主机的 DI CompositionRoot

> ID：10698235
> 
> 赞同：1
> 
> 时间：2012-05-22T08:15:35.540
> 
> 标签：.net, wcf, dependency-injection, inversion-of-control

我们正在开发一个自托管的 WCF 服务主机，它将根据配置动态加载服务。

我想知道我应该将每个服务视为一个迷你应用程序并在每个托管服务中使用组合根还是在服务主机本身上使用组合根？

非常感谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:45:15.107

每个服务都有一个组合根很好，但如果可以的话，让你的 WCF 服务只包含 1 个服务和 2 种方法：一种允许您执行查询对象的方法，一种允许您执行命令的方法。这样，您的 WCF 服务仍将拥有一个组合根。

为此，您需要将所有突变建模为[命令/处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)，并将读取操作建模为[查询/处理程序](http://www.cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。完成此操作后，您将无需再对 SVC 进行任何更改。

看看[Silverlight Cookbook](http://silverlightcookbook.codeplex.com/SourceControl/changeset/view/88277#1732813)，它成功地使用了这种方法。看一下[Main\Cookbook\Services.Host\CommandService.svc.cs](http://silverlightcookbook.codeplex.com/SourceControl/changeset/view/88277#1732813)，它是 WCF 服务的入口点。

这可能会彻底颠覆您的世界，但这种架构非常灵活、可扩展，并且可以显着降低维护成本。

# jsf-2 - JSF Enterprise 应用程序内存使用情况

> ID：10698238
> 
> 赞同：0
> 
> 时间：2012-05-22T08:15:43.217
> 
> 标签：jsf-2, memory-leaks, jprofiler

我有一个 Java EE 应用程序，如下所示：
- 服务器在 Amazon 上（大型实例，2 CPU @ 2.27GHz，8GB RAM） - 由 Apache 直接提供的静态内容
- JSF2 (Mojarra 2.1.3) 和 JPA 2 (Eclipselink 2.3.0 ) 在 Glassfish 3.1.1 上运行
- Facelets/XHTML 从 ViewScoped 托管 bean 获取内容，这些 bean 连接到执行所有处理的 @Local Stateless EJB，包括从使用 JPA 的其他 @Local Stateless EJB 获取数据
所以通常：

```
XHTML --> ViewScoped Managed Bean --> Service EJB --> Data EJB --> JPA 
```

我知道我可以/应该将 2 层 EJB 删除为一层或什至没有，因为我只运行 Glassfish 的一个实例，但现在我认为这不是问题。

应用程序的性能还可以（2.2MB，包括 < 5 秒内的图像）。问题是当我们有 > 90 个用户在线时，系统变得非常慢（每页 > 30 秒，即使其中大部分被缓存）。
那时 CPU 使用了 50%，RAM 使用了 100%。

所以我运行了 JProfiler，但我不确定如何处理一种类型的结果。
在主页中，我们有一个类别列表，并且每个类别关联了许多产品（一个告诉每个类别中有多少产品的购物网站）。获取类别列表的代码是：

ViewScoped Bean

```
public List<Category> getLiveCategoriesInfo() {
    if (liveCategories == null) {
        liveCategories = liveCategoryService.getLiveCategories(getLocale().getLang().getLanguageId());
    }
    return liveCategories;
} 
```

`getLocale()`从使用 ManagedProperty 注入的 SessionScoped Bean 中检索

服务 EJB：

```
public List<Category> getLiveCategories(final Integer langId) {
  List<LiveCategory> lives = categoryBean.getLiveCategories(langId);
  // ... some processing involving looping through the list above
  return livesCategories;
} 
```

数据 EJB：

```
public List<LiveCategory> getLiveCategories(final Integer langId) {
  List<LiveCategory> categories = new ArrayList<LiveCategory>();
  Query cq = getEntityManager().createNamedQuery(Category.FIND_LIVE);
  try {
    categories = cq.getResultList();
  } catch (NullPointerException npe) {
     // ...
  }
  return categories;
} 
```

JProfiler Memory View 显示，在主页上的每个请求（即使对于同一个用户），都会将新一批 Category 添加到内存中（准确地说是 43，这是显示的类别数）。类别不由 JPA 管理（来自 JPA 的列表用于“手动”创建 POJO）。
我怎样才能从内存中释放这些实体。当视图消失时，我希望它们成为 GC。但是 ViewScoped bean 本身不是 GC'd，有一堆实例留在内存中。

我应该寻找什么来释放这些对象？
- 是否`@ManagedProperty`在 ViewScoped bean 中使用 a 来获取 SessionScoped bean 的实例，从而阻止 ViewScoped 被 GC？
- 我应该寻找其他错误吗？

我确实检查了有关 JSF 最佳实践和性能指南的其他线程，但它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:13:45.630

可能您可以尝试在用户注销时释放 FacesContext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:20:34.713

我认为您的问题与您如何使用视图范围和会话范围有关。简而言之，您正在用在页面生命周期内不会改变的对象填充内存。相反，您应该仅在处理请求时使用请求范围 bean 来缓存这些结果，并使用 @ManagedProperty 注释或其他（创建值表达式或调用[Application.evaluateExpressionGet](http://docs.oracle.com/javaee/5/api/javax/faces/application/Application.html#evaluateExpressionGet%28javax.faces.context.FacesContext,%20java.lang.String,%20java.lang.Class%29)以从视图范围或会话范围 bean 中获取参数。在这样，当请求结束时，对实体的引用将被释放，它们将被 GC 收集。

如果您真的对性能部分感兴趣，请查看此博客：

[了解 JSF 2 和 Wicket：性能比较](http://lu4242.blogspot.com/2012/05/understandingjsf-2-and-wicket.html)

测试代码已经为获得 JSF 和 Wicket 的最佳性能进行了调整。调整 JSF 非常简单，因此您通常应该关注您的 ORM 工具以获取性能提示。

# c# - 我们如何取消选中单选按钮

> ID：10698239
> 
> 赞同：9
> 
> 时间：2012-05-22T08:15:44.960
> 
> 标签：c#, .net

我想知道我们如何取消选中单选按钮。它应该像一个复选框一样工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-22T08:23:19.187

使用以下代码使用单选按钮，如复选框。

```
 bool isChecked =false;
    private void radioButton1_CheckedChanged(object sender, EventArgs e)
    {
        isChecked = radioButton1.Checked;
    }

    private void radioButton1_Click(object sender, EventArgs e)
    {
        if (radioButton1.Checked && !isChecked)
            radioButton1.Checked = false;
        else
        {
            radioButton1.Checked = true;
            isChecked = false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T08:18:33.307

当您希望用户从一系列选项中选择一个或多个项目时，通常会使用单选按钮，因此到最后，您将至少有一个选定的项目。如果您想让用户取消选中，那么，您应该首先使用复选框。

在您的情况下，您最多可以提供一些功能，例如*重置*单选按钮的按钮，方法是执行类似的操作`rdBtn.Checked = false;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T08:20:06.943

这可能有效：

```
private void radio_click(object sender, EventArgs e)
{
  if (radio.Checked)
  {
    radio.Checked = false;
  }
} 
```

# android - Android 应用的广告网络选择

> ID：10698240
> 
> 赞同：0
> 
> 时间：2012-05-22T08:15:50.907
> 
> 标签：android, admob, ads

我对广告集成有以下要求。

*   **我希望我的应用程序应仅使用我创建的广告填充。不应向我的应用程序提供或馈送其他广告。**
*   **我想对我集成的广告进行分析。**

目前 Admob 和 Inmobi 正在用他们想要的广告填充我的应用程序。但我不想那样做。

我在 Admob 和 Inmobi 上都有帐户。但是我在管理面板上没有任何选项来满足我的要求。

谁能告诉我朝着什么方向前进以实现这一目标？或

谁能推荐一个适合我要求的广告网络？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:27:47.623

借助 AdMob，您可以设置[自家广告](https://support.google.com/admob/bin/answer.py?hl=en&answer=1619751&topic=1619748&parent=1307209&rd=1)并完全分配它们，以便它们始终代替网络广告展示。您还将获得有关您的自家广告活动的请求、展示次数和 cilcks 的报告。

# jquery - 刷新页面后才应用 JQUERY Css

> ID：10698242
> 
> 赞同：0
> 
> 时间：2012-05-22T08:15:52.220
> 
> 标签：jquery, css, asp.net-mvc, asp.net-mvc-3

我在 RAZOR MVC 应用程序的单独 js 文件中使用 JQuery 来使用 APPEND 方法从头开始动态构建 html 表。这很好用，但是当我使用 ADDCLASS 时，似乎直到刷新页面后才应用任何 CSS。有时根本没有！此代码是一个简单的表格，其中包含 30 天标题单元格和下面的另一行，其中一个单元格横跨所有区域。我还包括了我的CSS。

```
$(document).ready(function () {
    var startDate = $.telerik.formatString('{0:d}', $("#Start").data("tDatePicker").value());
    var forCalendarStartDate = new Date(startDate);

    $('#CalendarWrapper').append('<table id="Master"></table>');
    $('#Master').append('<tr id="MasterDatesRow"></tr>');
    for (var i = 0; i < 31; i++) {
        var headerDate = new Date();
        var d = new Date(headerDate.setDate(forCalendarStartDate.getDate() + i));
        var s = $.datepicker.formatDate('mm-dd', d);

        $('#MasterDatesRow').append('<th>' + s + '</th>');
    }
    $('#Master').append('<tr id="Header1"></tr>');
    $('#HeaderUSARAF').append('<td colspan="31" id="HeaderCell">USARAF</td>');

    //Class
    $('#Master').addClass('CalendarTable');
    $('#MasterDatesRow').addClass('DateHeader');
    $('#HeaderCell').addClass('Header');
}); 
```

**css**

```
.CalendarTable
{
    border:1;
    width:100%;
     font-size:small;
}

.DateHeader
{
    background-color:Green;

}

.Header
{ 
    background-color:#DBACBC;
    text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:33:34.640

由于您直接为表格生成 HTML，我建议您将`class="className"`值直接放入 HTML 字符串中，而不是使用代码设置元素类：http: [//jsfiddle.net/tNVGJ/](http://jsfiddle.net/tNVGJ/)

如果你坚持用 jQuery 设置类，你能试试这个，让我知道结果如何？[http://jsfiddle.net/tNVGJ/1/](http://jsfiddle.net/tNVGJ/1/)

```
 setTimeout(function () {
          $('#Master').addClass('CalendarTable');
          $('#MasterDatesRow').addClass('DateHeader');
          $('#HeaderCell').addClass('Header');
 }, 1000); 
```

# asp.net-mvc - Asp.net MVC 的特殊服务器端包含

> ID：10698245
> 
> 赞同：0
> 
> 时间：2012-05-22T08:16:04.480
> 
> 标签：asp.net-mvc

我必须创建一个新的 asp.net mvc 页面，该页面集成了服务器端静态上的 cms 提供的内容。我的 mvc 页面提供了一个带有导航的母版页，并且某些链接应该指向 cms 的页面（安装在同一台服务器上）。它应该类似于“服务器端 iframe”。

我的想法是创建一个控制器，它使用 webrequest 加载 cms 的页面，提取页面的主体部分并将提取的数据传递给视图。视图只是输出传递的 html。我还计划添加一些逻辑来将帖子请求传递给 cms（用于新闻订阅、联系表格等）

现在我的问题是：是否可以实施此解决方案？还是有更好的方法在服务器端做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:35:07.857

您是否可以使用[应用程序请求路由](http://www.iis.net/download/applicationrequestrouting)仅将请求传递给您的 CMS，或者您是否需要在现有母版页中包含外部提供的内容？

如果您需要使用母版页，我会坚持您建议的解决方案，尽管我可能会研究从 CMS 查询内容的最强大和最有效的选项，也许缓存是否是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:25:03.550

这无疑是可能的，但跟踪用户、身份验证、cookie 等似乎是一项非常乏味的工作。此外，在您的 MVC 站点中嵌入来自 CMS 的 css 类、硬编码样式等可能会让您非常头疼。

如果 CMS 不是自制的，它可能有一个 API。在这种情况下，我更喜欢使用 API 来获取我需要的数据，然后使用纯 MVC 呈现该数据。这将为您提供与 CMS 的更清洁、更稳定的集成。

# mysql - grant all 命令有什么问题？

> ID：10698248
> 
> 赞同：2
> 
> 时间：2012-05-22T08:16:08.973
> 
> 标签：mysql

```
grant all privileges on 'bbs' to 'userone'@'localhost'  IDENTIFIED BY PASSWORD 'user2012'; 
```

表明`ERROR 1064 (42000): You have an error in your SQL syntax; check the manual`

我想添加一个用户`userone`并授予数据库所有权限`bbs`。如何纠正它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T08:18:56.260

您需要为要授予权限的数据库中的表包含一个指示器。更改查询：

`grant all privileges on bbs.* to 'userone'@'localhost' IDENTIFIED BY PASSWORD 'user2012';`

为“bbs”数据库中的所有表授予它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T08:19:44.093

保留`'`表名：

```
grant all privileges on bbs to 'userone'@'localhost'  IDENTIFIED BY PASSWORD 'user2012'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:19:20.537

```
grant all privileges on 'bbs.*' to 'userone'@'localhost' identified by ‘user2012’; 
```

# c - 函数调用是现代平台的有效内存屏障吗？

> ID：10698253
> 
> 赞同：70
> 
> 时间：2012-05-22T08:16:46.770
> 
> 标签：c, multithreading, memory-barriers

在我查看的代码库中，我发现了以下成语。

```
void notify(struct actor_t act) {
    write(act.pipe, "M", 1);
}
// thread A sending data to thread B
void send(byte *data) {
    global.data = data;
    notify(threadB);
}
// in thread B event loop
read(this.sock, &cmd, 1);
switch (cmd) {
    case 'M': use_data(global.data);break;
    ...
} 
```

“等一下”，我对作者，我团队的一位资深成员说，“这里没有内存屏障！你不保证`global.data`会从缓存刷新到主内存。如果线程A和线程B会运行两个不同的处理器——这个方案可能会失败”。

高级程序员咧嘴一笑，慢慢解释，好像在解释他五岁的男孩如何系鞋带：“听着小男孩，我们在这里看到了很多线程相关的错误，在高负载测试中，在真实客户端中”，他停下来抓挠他长长的胡须，“但我们从来没有遇到过这个成语的错误”。

“可是，书上说……”

“安静！”他迅速让我安静下来，“也许理论上，不能保证，但实际上，你使用函数调用的事实实际上是一个内存屏障。编译器不会重新排序指令`global.data = data`，因为它不知道是否任何在函数调用中使用它的人，x86 架构将确保在线程 B 从管道中读取命令时，其他 CPU 将看到这条全局数据。请放心，我们有很多现实世界的问题要担心。我们不需要在虚假的理论问题上投入额外的精力。

“放心，我的孩子，到时候你会明白将真正的问题与我需要获得博士学位的非问题区分开来。”

他是对的吗？这在实践中真的不是问题吗（比如 x86、x64 和 ARM）？

这与我学到的一切背道而驰，但他确实留着长胡子和非常聪明的外表！

如果你能告诉我一段代码证明他错了，加分！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T08:21:34.937

内存屏障不仅仅是为了防止指令重新排序。即使指令没有重新排序，它仍然会导致缓存一致性问题。至于重新排序 - 这取决于您的编译器和设置。ICC 对重新排序特别激进。具有整个程序优化的 MSVC 也可以。

如果您的共享数据变量被声明为`volatile`，*即使它不在规范中，*大多数编译器也会在从变量读取和写入时生成一个内存变量并防止重新排序。**这不是正确的使用方式`volatile`，也不是它的用途。**

（如果我还有任何选票，我会为你的旁白问题 +1。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-22T08:24:32.580

实际上，函数调用是**编译器**屏障，这意味着编译器不会将全局内存访问移过调用。需要注意的是编译器知道的函数，例如内置函数、内联函数（请记住 IPO！）等。

因此，理论上需要一个处理器内存屏障（除了编译器屏障）来完成这项工作。但是，由于您正在调用 read 和 write ，它们是改变全局状态的系统调用，所以我很确定内核在这些实现的某个地方发出了内存屏障。虽然没有这样的保证，所以理论上你需要障碍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T09:34:07.373

The basic rule is: the compiler must make the global state *appear* to be exactly as you coded it, but if it can prove that a given function doesn't use global variables then it can implement the algorithm any way it chooses.

The upshot is that traditional compilers always treated functions *in another compilation unit* as a memory barrier because they couldn't see inside those functions. Increasingly, modern compilers are growing "whole program" or "link time" optimization strategies which break down these barriers and **will** cause poorly written code to fail, even though it's been working fine for years.

If the function in question is in a shared library then it won't be able to see inside it, **but** if the function is one defined by the C standard then it doesn't need to -- it already knows what the function does -- so you have to be careful of those also. Note that a compiler will *not* recognise a kernel call for what it is, but the very act of inserting something that the compiler can't recognise (inline assembler, or a function call to an assembler file) will create a memory barrier in itself.

In your case, `notify` will either be a black box the compiler can't see inside (a library function) or else it will contain a recognisable memory barrier, so you are most likely safe.

In practice, you have to write *very* bad code to fall over this.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T16:32:12.997

在实践中，他是正确的，并且在这种特定情况下暗示了记忆障碍。

但关键是，如果它的存在是“有争议的”，那么代码已经太复杂和不清楚了。

真的，伙计们，使用互斥锁或其他适当的结构。这是处理线程和编写可维护代码的唯一安全方法。

也许你会看到其他错误，比如如果 send() 被多次调用，代码是不可预测的。

# asp.net - jqGrid中如何实现多重搜索

> ID：10698254
> 
> 赞同：2
> 
> 时间：2012-05-22T08:16:51.530
> 
> 标签：asp.net, jqgrid, webforms, ashx

我有一个与 asp.Net Web Forms 一起使用的 jqGrid ，它从数据库中正确显示所需的信息，但是它也显示了搜索选项，但是如果我尝试搜索让我们说 First Name 等于 Lijo ，它只是没有显示该记录。该记录存在。我知道我肯定缺少一些搜索所需的东西，这是代码

```
<script type="text/javascript">
    $(function() {
        $("#UsersGrid").jqGrid({
            url: 'ModCust.ashx',
            datatype: 'json',
            height: 250,
            width: 800,
            colNames: ['Application No', 'First Name', 'Middle Name', 'Last Name'],
            colModel: [
                        { name: 'cApplicationNo', index: 'cApplicationNo', width: 100, sortable: true},
                        { name: 'cFirstName', width: 100, sortable: true},
                        { name: 'cMiddleName', width: 100, sortable: true },
                        { name: 'cLastName', width: 100, sortable: true },

                    ],

            cmTemplate: { title: false},
            rowNum: 10,
            rowList: [10, 20, 30],
            pager: '#UsersGridPager',
            sortname: 'cApplicationNo',
            viewrecords: true,
            sortorder: 'asc',
            caption: 'Customer Details'
        });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false });
    });

    </script> 
```

这是我的 ModCust.ashx 处理程序

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Data;
using System.Data.SqlClient;
using System.Web;
using System.Web.Script.Serialization;

namespace CwizBankApp
{
    public struct JQGridResults
    {
        public int page;
        public int total;
        public int records;
        public JQGridRow[] rows;
    }
    public struct JQGridRow
    {
        public string id;
        public string[] cell;
    }
    [Serializable]
    public class User
    {
        public string ApplicationNo { get; set; }
        public string FirstName { get; set; }
        public string MiddleName { get; set; }
        public string LastName { get; set; }
    }
    /// <summary>
    /// Summary description for $codebehindclassname$
    /// </summary>

    public class ModCust : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            HttpRequest request = context.Request;
            HttpResponse response = context.Response;

            string _search = request["_search"];
            string numberOfRows = request["rows"];
            string pageIndex = request["page"];
            string sortColumnName = request["sidx"];
            string sortOrderBy = request["sord"];

            int totalRecords;
            //Collection<User> users = GetDummyUsers(numberOfRows, pageIndex, sortColumnName, sortOrderBy, out totalRecords);
            Collection<User> users = GetUsers(numberOfRows, pageIndex, sortColumnName, sortOrderBy, out totalRecords);
            string output = BuildJQGridResults(users, Convert.ToInt32(numberOfRows), Convert.ToInt32(pageIndex), Convert.ToInt32(totalRecords));
            response.Write(output);
        }
        private string BuildJQGridResults(Collection<User> users, int numberOfRows, int pageIndex, int totalRecords)
        {

            JQGridResults result = new JQGridResults();
            List<JQGridRow> rows = new List<JQGridRow>();
            foreach (User user in users)
            {
                JQGridRow row = new JQGridRow();
                row.id = user.ApplicationNo;
                row.cell = new string[4];
                row.cell[0] = user.ApplicationNo;
                row.cell[1] = user.FirstName;
                row.cell[2] = user.MiddleName;
                row.cell[3] = user.LastName;
                rows.Add(row);
            }
            result.rows = rows.ToArray();
            result.page = pageIndex;
            result.total = (totalRecords + numberOfRows - 1) / numberOfRows;
            result.records = totalRecords;
            return new JavaScriptSerializer().Serialize(result);
        }

        private Collection<User> GetDummyUsers(string numberOfRows, string pageIndex, string sortColumnName, string sortOrderBy, out int totalRecords)
        {
            var data = new Collection<User> {
                    new User(){ FirstName = "Bill", LastName = "Gates", ApplicationNo= "1", MiddleName = "Bill Gates"}
                };
            totalRecords = data.Count;
            return data;
        }
        private Collection<User> GetUsers(string numberOfRows, string pageIndex, string sortColumnName, string sortOrderBy, out int totalRecords)
        {
            Collection<User> users = new Collection<User>();
            string connectionString = "Server=Server;Database=CwizData;Trusted_Connection=True";

            using (SqlConnection connection = new SqlConnection(connectionString))
            {
                using (SqlCommand command = new SqlCommand())
                {
                    command.Connection = connection;
                    command.CommandText = "select cApplicationNo,cFirstName,cMiddleName,cLastName from Data_Customer_Log";
                    command.CommandType = CommandType.Text; // StoredProcedure;

                    SqlParameter paramPageIndex = new SqlParameter("@PageIndex", SqlDbType.Int);
                    paramPageIndex.Value = Convert.ToInt32(pageIndex);
                    command.Parameters.Add(paramPageIndex);

                    SqlParameter paramColumnName = new SqlParameter("@SortColumnName", SqlDbType.VarChar, 50);
                    paramColumnName.Value = sortColumnName;
                    command.Parameters.Add(paramColumnName);

                    SqlParameter paramSortorderBy = new SqlParameter("@SortOrderBy", SqlDbType.VarChar, 4);
                    paramSortorderBy.Value = sortOrderBy;
                    command.Parameters.Add(paramSortorderBy);

                    SqlParameter paramNumberOfRows = new SqlParameter("@NumberOfRows", SqlDbType.Int);
                    paramNumberOfRows.Value = Convert.ToInt32(numberOfRows);
                    command.Parameters.Add(paramNumberOfRows);

                    SqlParameter paramTotalRecords = new SqlParameter("@TotalRecords", SqlDbType.Int);
                    totalRecords = 0;
                    paramTotalRecords.Value = totalRecords;
                    paramTotalRecords.Direction = ParameterDirection.Output;
                    command.Parameters.Add(paramTotalRecords);

                    connection.Open();

                    using (SqlDataReader dataReader = command.ExecuteReader())
                    {
                        User user;
                        while (dataReader.Read())
                        {
                            user = new User();
                            user.ApplicationNo =Convert.ToString(dataReader["cApplicationNo"]);
                            user.FirstName = Convert.ToString(dataReader["cFirstName"]);
                            user.MiddleName = Convert.ToString(dataReader["cMiddleName"]);
                            user.LastName = Convert.ToString(dataReader["cLastName"]);
                            users.Add(user);
                        }
                    }
                    //totalRecords =(int)(paramTotalRecords.Value);
                   // totalRecords = 0; 

                }

                return users;
            }

        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

有人可以帮我解决这个问题，欢迎任何建议，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T15:09:58.700

在您的问题中，您主要使用了我的[旧答案](https://stackoverflow.com/a/7666711/315935)[中的演示项目](http://www.ok-soft-gmbh.com/jqGrid/jqGridInWebForm.zip)。所有其他稍后的答案显示了如何在服务器上实现高级搜索、分页和排序（例如[这个](https://stackoverflow.com/a/5501644/315935)或[这个](https://stackoverflow.com/a/9349688/315935)）我使用了更新的 ASP.NET 技术，主要是 ASP.NET MVC。另一方面，演示中的代码可以分为以下几部分：

1.  服务器代码提供了一些接口，jqGrid 可以使用这些接口来获取 JSON 响应。它可以是 ASP.NET MVC 控制器动作、WFC 方法、ASMX Web 服务的 WebMethod 或您使用的通用 ASHX 处理程序。
2.  分析 jqGrid 发送的输入参数的服务器代码。参数的默认名称是`page`, `rows`, `sidx`, `sord`, `_search`, `filters`. `prmNames`可以使用jqGrid的选项重命名参数。
3.  访问数据库。服务器代码的一部分取决于您使用的技术。例如，它可以是实体框架、LINQ to SQL 或更旧但`SqlCommand`在`SqlDataReader`.
4.  将结果编码为 JSON。例如，可以使用标准[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)或[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)或高性能 JSON 框架[Json.NET](http://json.codeplex.com/)（称为 Newtonsoft.JSON）。微软在新版 ASP.NET MVC 4.0 和 ASP.NET Web API 中使用并支持开源的 Json.NET 序列化程序。[可以在 ASP.NET 项目中包含 Json.NET，并可以使用NuGet](http://nuget.org/)将其更新到最新版本。
5.  在服务器上处理异常并将错误信息以 JSON 格式报告给客户端（jqGrid）。代码略有不同，具体取决于服务器上使用的技术。jqGrid回调中的客户端代码`loadError`应该解码错误信息并以某种形式显示出来。在使用 ASP.NET MVC 的情况下，我在[答案](https://stackoverflow.com/a/5501644/315935)中展示了如何实现`HandleJsonExceptionAttribute`可以用作`[HandleJsonException]`代替标准的属性`[HandleError]`。在使用 WCF 的情况下，可以使用`WebFaultException<string>`（请参阅[此处](http://blogs.msdn.com/b/endpoint/archive/2010/01/21/error-handling-in-wcf-webhttp-services-with-webfaultexception.aspx)）。在通用 ASHX 处理程序的情况下，可以`Application_Error`为此`Global.asax`目的使用。
6.  可选地，可以在HTTP 标头中包含[ETag的服务器代码设置。](http://en.wikipedia.org/wiki/HTTP_ETag)它允许控制服务器端的客户端缓存。如果客户端需要先前从服务器返回的 JSON 数据，它会*自动*将`If-None-Match`HTTP 请求中的一部分发送到服务器，其中包含`ETag`来自先前服务器响应的内容。服务器可以验证自上次响应以来服务器数据是否发生了变化。最后，服务器将返回新的 JSON 数据或允许客户端使用旧响应中的数据的*空*响应。
7.  需要编写创建 jqGrid 的 JavaScript 代码。

我制作[了演示项目](http://www.ok-soft-gmbh.com/jqGrid/jqGridASHX.zip)，演示了上述所有步骤。它包含一个小型数据库，我在其中填充了一些来自著名数学家的信息。该演示显示了 ![在此处输入图像描述](../Images/9b83407de0d03a666d3fbd99e7ab6d0c.png) 可以使用排序、分页、工具栏过滤或高级搜索的网格。如果出现一些错误（例如，如果您停止 Windows 服务“SQL Server (SQLEXPRESS)”），您将看到如下错误消息： ![在此处输入图像描述](../Images/99fcedd21284b177d1b1f54d276f22a8.png)

在演示中实现 ASHX 句柄的 C# 代码是

```
using System;
using System.Globalization;
using System.Net;
using System.Security.Cryptography;
using System.Text;
using System.Web;
using Newtonsoft.Json;

namespace jqGridASHX {
// ReSharper disable InconsistentNaming
    public class jqGridData : IHttpHandler {
// ReSharper restore InconsistentNaming

        public void ProcessRequest (HttpContext context) {
            // to be able to use context.Response.Cache.SetETag later we need the following:
            context.Response.Cache.SetCacheability(HttpCacheability.ServerAndPrivate);
            // to use with HTTP GET we want be sure that caching of data work correct
            // so we request revalidation of data by setting in HTTP header the line
            // "Cache-Control: private, max-age=0"
            context.Response.Cache.SetMaxAge (new TimeSpan (0));

            string numberOfRows = context.Request["rowsPerPage"];
            int nRows, iPage;
            if (String.IsNullOrEmpty (numberOfRows) || !int.TryParse (numberOfRows, NumberStyles.Integer, CultureInfo.InvariantCulture, out nRows))
                nRows = 10; // default value
            string pageIndex = context.Request["pageIndex"];
            if (String.IsNullOrEmpty(pageIndex) || !int.TryParse(pageIndex, NumberStyles.Integer, CultureInfo.InvariantCulture, out iPage))
                iPage = 10; // default value
            string sortColumnName = context.Request["sortByColumn"];
            string sortOrder = context.Request["sortOrder"];
            string search = context.Request["isSearching"];
            string filters = context.Request["filters"];

            // we can use high-performance Newtonsoft.Json
            string str = JsonConvert.SerializeObject (
                MyData.GetDataForJqGrid (
                    nRows, iPage, sortColumnName,
                    !String.IsNullOrEmpty (sortOrder) &&
                    String.Compare (sortOrder, "desc", StringComparison.Ordinal) == 0
                        ? MyData.SortOrder.Desc
                        : MyData.SortOrder.Asc,
                        search != null && String.Compare (search, "true", StringComparison.Ordinal) == 0,
                        filters));
            context.Response.ContentType = "application/json";

            // calculate MD5 from the returned data and use it as ETag
            byte[] hash = MD5.Create().ComputeHash(Encoding.ASCII.GetBytes(str));
            string newETag = Convert.ToBase64String(hash);
            // compare ETag of the data which already has the client with ETag of response
            string incomingEtag = context.Request.Headers["If-None-Match"];
            if (String.Compare(incomingEtag, newETag, StringComparison.Ordinal) == 0)
            {
                // we don't need return the data which the client already have
                context.Response.SuppressContent = true;
                context.Response.StatusCode = (int)HttpStatusCode.NotModified;
                return;
            }
            context.Response.Cache.SetETag(newETag);
            context.Response.Write(str);
        }

        public bool IsReusable {
            get { return false; }
        }
    }
} 
```

它`Newtonsoft.Json`用于 JSON 序列化并使用 MD5 哈希作为`ETag`.

该方法`MyData.GetDataForJqGrid`提供来自数据库的数据。在演示中，我主要使用[答案](https://stackoverflow.com/a/5501644/315935)中的代码，因此我使用实体框架来访问数据库：

```
using System;
using System.Data.Objects;
using System.Globalization;
using System.Linq;
using Newtonsoft.Json;

namespace jqGridASHX
{
    public static class MyData
    {
        public enum SortOrder {
            Asc,
            Desc
        }

        public static Object GetDataForJqGrid(int nRows, int iPage,
            string sortColumnName, SortOrder sortOrder,
            bool isSearch, string filters)
        {
            var context = new MyDatabaseEntities();
            var f = (!isSearch || string.IsNullOrEmpty(filters)) ? null : JsonConvert.DeserializeObject<Filters>(filters);
            ObjectQuery<User> filteredQuery =
                f == null ? context.Users : f.FilterObjectSet(context.Users);
            filteredQuery.MergeOption = MergeOption.NoTracking; // we don't want to update the data
            var totalRecords = filteredQuery.Count();
            var pagedQuery =
                    filteredQuery.Skip(
                        "it." + (String.IsNullOrEmpty(sortColumnName) ? "Id" : sortColumnName) + " " + sortOrder,
                        "@skip",
                        new ObjectParameter("skip", (iPage - 1) * nRows))
                    .Top("@limit", new ObjectParameter("limit", nRows));
            // to be able to use ToString() below which is NOT exist in the LINQ to Entity
            // we should include in queryDetails only the properies which we will use below
            var queryDetails = (from item in pagedQuery
                                select new {
                                    item.Id, item.FirstName, item.LastName, item.Birthday
                                }).ToArray();

            return new {
                total = (totalRecords + nRows - 1) / nRows,
                page = iPage,
                records = totalRecords,
                rows = (from item in queryDetails
                        select new[] {
                            // In the demo we send Id as the 4-th element of row array.
                            // The value will be not displayed in the grid, but used as rowid
                            // (the id attribute of the <tr> in the <table>)
                            item.FirstName,
                            item.LastName,
                            item.Birthday == null? String.Empty : ((DateTime)item.Birthday).ToString("yyyy-MM-dd"),
                            item.Id.ToString (CultureInfo.InvariantCulture)
                        }).ToArray()
            };
        }
    }
} 
```

在哪里上课`Filters`

```
using System;
using System.Collections.Generic;
using System.Data.Objects;
using System.Text;

namespace jqGridASHX
{
    public class Filters
    {
        // ReSharper disable InconsistentNaming
        public enum GroupOp
        {
            AND,
            OR
        }
        public enum Operations
        {
            eq, // "equal"
            ne, // "not equal"
            lt, // "less"
            le, // "less or equal"
            gt, // "greater"
            ge, // "greater or equal"
            bw, // "begins with"
            bn, // "does not begin with"
            //in, // "in"
            //ni, // "not in"
            ew, // "ends with"
            en, // "does not end with"
            cn, // "contains"
            nc  // "does not contain"
        }
        public class Rule
        {
            public string field { get; set; }
            public Operations op { get; set; }
            public string data { get; set; }
        }

        public GroupOp groupOp { get; set; }
        public List<Rule> rules { get; set; }
        // ReSharper restore InconsistentNaming
        private static readonly string[] FormatMapping = {
                "(it.{0} = @p{1})",                 // "eq" - equal
                "(it.{0} <> @p{1})",                // "ne" - not equal
                "(it.{0} < @p{1})",                 // "lt" - less than
                "(it.{0} <= @p{1})",                // "le" - less than or equal to
                "(it.{0} > @p{1})",                 // "gt" - greater than
                "(it.{0} >= @p{1})",                // "ge" - greater than or equal to
                "(it.{0} LIKE (@p{1}+'%'))",        // "bw" - begins with
                "(it.{0} NOT LIKE (@p{1}+'%'))",    // "bn" - does not begin with
                "(it.{0} LIKE ('%'+@p{1}))",        // "ew" - ends with
                "(it.{0} NOT LIKE ('%'+@p{1}))",    // "en" - does not end with
                "(it.{0} LIKE ('%'+@p{1}+'%'))",    // "cn" - contains
                "(it.{0} NOT LIKE ('%'+@p{1}+'%'))" //" nc" - does not contain
            };
        internal ObjectQuery<T> FilterObjectSet<T>(ObjectQuery<T> inputQuery) where T : class
        {
            if (rules.Count <= 0)
                return inputQuery;

            var sb = new StringBuilder();
            var objParams = new List<ObjectParameter>(rules.Count);

            foreach (var rule in rules)
            {
                var propertyInfo = typeof(T).GetProperty(rule.field);
                if (propertyInfo == null)
                    continue; // skip wrong entries

                if (sb.Length != 0)
                    sb.Append(groupOp);

                var iParam = objParams.Count;
                sb.AppendFormat(FormatMapping[(int)rule.op], rule.field, iParam);

                ObjectParameter param;
                switch (propertyInfo.PropertyType.FullName)
                {
                    case "System.Int32":  // int
                        param = new ObjectParameter("p" + iParam, Int32.Parse(rule.data));
                        break;
                    case "System.Int64":  // bigint
                        param = new ObjectParameter("p" + iParam, Int64.Parse(rule.data));
                        break;
                    case "System.Int16":  // smallint
                        param = new ObjectParameter("p" + iParam, Int16.Parse(rule.data));
                        break;
                    case "System.SByte":  // tinyint
                        param = new ObjectParameter("p" + iParam, SByte.Parse(rule.data));
                        break;
                    case "System.Single": // Edm.Single, in SQL: float
                        param = new ObjectParameter("p" + iParam, Single.Parse(rule.data));
                        break;
                    case "System.Double": // float(53), double precision
                        param = new ObjectParameter("p" + iParam, Double.Parse(rule.data));
                        break;
                    case "System.Boolean": // Edm.Boolean, in SQL: bit
                        param = new ObjectParameter("p" + iParam,
                            String.Compare(rule.data, "1", StringComparison.Ordinal) == 0 ||
                            String.Compare(rule.data, "yes", StringComparison.OrdinalIgnoreCase) == 0 ||
                            String.Compare(rule.data, "true", StringComparison.OrdinalIgnoreCase) == 0);
                        break;
                    default:
                        // TODO: Extend to other data types
                        // binary, date, datetimeoffset,
                        // decimal, numeric,
                        // money, smallmoney
                        // and so on.
                        // Below in the example for DateTime and the nullable DateTime
                        if (String.Compare(propertyInfo.PropertyType.FullName, typeof(DateTime?).FullName, StringComparison.Ordinal) == 0 ||
                            String.Compare(propertyInfo.PropertyType.FullName, typeof(DateTime).FullName, StringComparison.Ordinal) == 0)
                        {
                            // we use below en-US locale directly
                            param = new ObjectParameter("p" + iParam, DateTime.Parse(rule.data, new CultureInfo("en-US"), DateTimeStyles.None));
                        }
                        else {
                            param = new ObjectParameter("p" + iParam, rule.data);
                        }
                        break;
                }
                objParams.Add(param);
            }

            var filteredQuery = inputQuery.Where(sb.ToString());
            foreach (var objParam in objParams)
                filteredQuery.Parameters.Add(objParam);

            return filteredQuery;
        }
    }
} 
```

来自的代码`Global.asax.cs`是

```
using System;
using System.Collections.Generic;
using System.Net;
using System.Reflection;
using System.Web;
using Newtonsoft.Json;

namespace jqGridASHX
{
    internal class ExceptionInformation
    {
        public string Message { get; set; }
        public string Source { get; set; }
        public string StackTrace { get; set; }
        public string ErrorCode { get; set; }
    }
    public class Global : HttpApplication
    {
        protected void Application_Error(object sender, EventArgs e)
        {
            if (Request.ContentType.Contains("application/json"))
            {
                Response.Clear();
                Response.StatusCode = (int)HttpStatusCode.InternalServerError;
                Response.Cache.SetMaxAge(new TimeSpan(0));
                Response.ContentType = "application/json";
                var exInfo = new List<ExceptionInformation>();
                for (var ex = Server.GetLastError(); ex != null; ex = ex.InnerException) {
                    PropertyInfo propertyInfo = ex.GetType().GetProperty ("HResult");
                    exInfo.Add (new ExceptionInformation {
                        Message = ex.Message,
                        Source = ex.Source,
                        StackTrace = ex.StackTrace,
                        ErrorCode = propertyInfo != null && propertyInfo.GetValue (ex, null) is int
                                        ? "0x" + ((int)propertyInfo.GetValue (ex, null)).ToString("X")
                                        : String.Empty
                    });
                }
                Response.Write(JsonConvert.SerializeObject(exInfo));
                Context.Server.ClearError();
            }
        }
    }
} 
```

在客户端，我使用**纯 HTML 页面**清楚地表明您可以将解决方案包含在您的任何项目中，包括 Web 表单项目。该页面有以下代码

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>https://stackoverflow.com/q/10698254/315935</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="Content/themes/redmond/jquery-ui.css" />
    <link rel="stylesheet" href="Scripts/jqGrid/4.3.3/ui.jqgrid.css" />
    <link rel="stylesheet" href="Content/Site.css" />
    <script src="Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.20.min.js" type="text/javascript"></script>
    <script src="Scripts/jqGrid/4.3.3/i18n/grid.locale-en.js" type="text/javascript"></script>
    <script type="text/javascript">
        $.jgrid.no_legacy_api = true;
        $.jgrid.useJSON = true;
    </script>
    <script src="Scripts/jqGrid/4.3.3/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script src="Scripts/json2.min.js" type="text/javascript"></script>
    <script src="Scripts/Common.js" type="text/javascript"></script>
    <script src="Scripts/MyPage.js" type="text/javascript"></script>
</head>
<body>
    <table id="list"><tr><td></td></tr></table>
    <div id="pager"></div>
</body>
</html> 
```

`MyPage.js`在哪里

```
/// <reference path="jquery-1.7.2.js" />
/// <reference path="jqGrid/4.3.3/i18n/grid.locale-en.js" />
/// <reference path="jqGrid/4.3.3/jquery.jqGrid.src.js" />
/// <reference path="Common.js" />

$(function () {
    "use strict";
    $("#list").jqGrid({
        url: "jqGridData.ashx",
        colNames: ["First Name", "Last Name", "Birthday"],
        colModel: [
            { name: "FirstName", width: 200 },
            { name: "LastName", width: 180 },
            { name: "Birthday", width: 100, formatter: "date", align: "center",
                searchoptions: { sopt: ["eq", "ne", "lt", "le", "gt", "ge"], dataInit: function (elem) {
                    $(elem).datepicker({
                        dateFormat: "m/d/yy",
                        minDate: "1/1/1753",
                        defaultDate: "4/30/1777",
                        autoSize: true,
                        changeYear: true,
                        changeMonth: true,
                        showButtonPanel: true,
                        showWeek: true
                    });
                }}
            }
        ],
        jsonReader: {
            cell: "",
            // The Id value will be sent as the 4-th element of row array.
            // The value will be not displayed in the grid, but used as rowid
            // (the id attribute of the <tr> in the <table>)
            id: "3"
        },
        rowNum: 10,
        rowList: [10, 20, 30],
        pager: "#pager",
        rownumbers: true,
        viewrecords: true,
        sortname: "Birthday",
        sortorder: "desc",
        caption: "Famous Mathematicians"
    }).jqGrid("navGrid", "#pager", { edit: false, add: false, del: false })
      .jqGrid('filterToolbar', { stringResult: true, searchOnEnter: true, defaultSearch: "cn" });
}); 
```

和`Common.js`：

```
/// <reference path="jquery-1.7.2.js" />
/// <reference path="jqGrid/4.3.3/i18n/grid.locale-en.js" />
/// <reference path="jqGrid/4.3.3/jquery.jqGrid.src.js" />

$.extend($.jgrid.defaults, {
    height: "100%",
    altRows: true,
    altclass: "myAltRowClass",
    shrinkToFit: false,
    gridview: true,
    rownumbers: true,
    viewrecords: true,
    datatype: "json",
    sortable: true,
    scrollrows: true,
    headertitles: true,
    loadui: "block",
    viewsortcols: [false, "vertical", true],
    prmNames: { nd: null, page: "pageIndex", rows: "rowsPerPage", sort: "sortByColumn", order: "sortOrder", search: "isSearching" },
    ajaxGridOptions: { contentType: "application/json" },
    ajaxRowOptions: { contentType: "application/json", type: "PUT", async: true },
    ajaxSelectOptions: { contentType: "application/json", dataType: "JSON" },
    serializeRowData: function (data) {
        var propertyName, propertyValue, dataToSend = {};
        for (propertyName in data) {
            if (data.hasOwnProperty(propertyName)) {
                propertyValue = data[propertyName];
                if ($.isFunction(propertyValue)) {
                    dataToSend[propertyName] = propertyValue();
                } else {
                    dataToSend[propertyName] = propertyValue;
                }
            }
        }
        return JSON.stringify(dataToSend);
    },
    resizeStop: function () {
        var $grid = $(this.bDiv).find('>:first-child>.ui-jqgrid-btable:last-child'),
            shrinkToFit = $grid.jqGrid('getGridParam', 'shrinkToFit'),
            saveState = $grid.jqGrid('getGridParam', 'saveState');

        $grid.jqGrid('setGridWidth', this.newWidth, shrinkToFit);
        if ($.isFunction(saveState)) {
            saveState.call($grid[0]);
        }
    },
    gridComplete: function () {
        $("#" + this.id + "_err").remove();
    },
    loadError: function (xhr) {
        var response = xhr.responseText, errorDetail, errorHtml, i, l, errorDescription;
        if (response.charAt(0) === '[' && response.charAt(response.length - 1) === ']') {
            errorDetail = $.parseJSON(xhr.responseText);
            var errorText = "";
            for (i = 0, l = errorDetail.length; i < l; i++) {
                if (errorText.length !== 0) {
                    errorText += "<hr/>";
                }
                errorDescription = errorDetail[i];
                errorText += "<strong>" + errorDescription.Source + "</strong>";
                if (errorDescription.ErrorCode) {
                    errorText += " (ErrorCode: " + errorDescription.ErrorCode + ")";
                }
                errorText += ": " + errorDescription.Message;
            }
            errorHtml = '<div id="errdiv" class="ui-state-error ui-corner-all" style="padding-left: 10px; padding-right: 10px; max-width:' +
                ($(this).closest(".ui-jqgrid").width() - 20) +
                'px;"><p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span><span>' +
                errorText + '</span></p></div>';
            $("#" + this.id + "_err").remove();
            $(this).closest(".ui-jqgrid").before(errorHtml);
        }
    }
});

$.extend($.jgrid.search, {
    multipleSearch: true,
    recreateFilter: true,
    closeOnEscape: true,
    searchOnEnter: true,
    overlay: 0
}); 
```

**更新**：我做了一些小的改进：包括[json2.js](http://nuget.org/packages/json2)（见[这里](https://github.com/douglascrockford/JSON-js)）以支持`JSON.stringify`旧的 Web 浏览器，在 jQuery UI Datepicker 中固定日期格式，并在类中包括对`DateType`和`DateType?`( `System.Nullable<DateType>`) 的支持`Filters`。[因此，您可以从同一位置](http://www.ok-soft-gmbh.com/jqGrid/jqGridASHX.zip)下载项目的当前版本。

# java - 当 javascript 向小程序发送数据时网页冻结

> ID：10698258
> 
> 赞同：1
> 
> 时间：2012-05-22T08:17:03.980
> 
> 标签：java, javascript

我有一个小程序和一个 JavaScript 函数。小程序正在调用 JavaScript 函数。我已将小程序保存为 .class 并且我已经在小程序标记中给出了位置。当我加载网页并单击按钮时调用 JavaScript 函数并触发它向小程序发送数据，网页永远冻结。我能做些什么来克服这个问题？这是网页上的小程序标签。

```
Here is javascript function which sends data to applet
 function PrintReceipt(myApp)
{
var totalElem=document.getElementById("total");
 var taxElem=document.getElementById("tax");
//var changeElem=document.getElementById("change");
 //var subtotalElem=document.getElementById("subtotal");
//var discountElem=document.getElementById("discount");
//var salesitemsElem=document.getElementById("product");
var myApp = document.applets['jposprint'];
 myApp.ReceiveData(taxElem.innerHTML + totalElem.innerHTML);
alert("js k.");
}
 Here is the applet code which receives the data.
public void ReceiveData(String DataFromJS,Graphics g)
  {

  JSObject window=JSObject.getWindow(this);
   window.call("PrintReceipt()", new Object[] {DataFromJS})   ;
   System.out.print(DataFromJS);
  //System.out.println(DataFromJS);
 //return DataFromJS;

 // g.setColor(Color.black);

//Total=(int)window.eval("PrintReceipt()");
 //UserName=(String)window.eval("PrintReceipt()");

  }

}

Regards Masiela. 
```

# java - 查找在多 servlet 映射方案中使用的匹配 url 模式

> ID：10698264
> 
> 赞同：2
> 
> 时间：2012-05-22T08:17:29.517
> 
> 标签：java, servlets

假设我有一个 Java servlet，我想将其用于两个（或更多）不同的 url 模式：

```
 <servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/this/exact/path</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/that/prefix/path/*</url-pattern>
  </servlet-mapping>

  <servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/yet/another/exact/path</url-pattern>
  </servlet-mapping> 
```

MyServlet 将被调用为：

```
/this/exact/path
/yet/another/exact/path
/that/prefix/path/param1
/that/prefix/path/param2.html 
```

我想知道的是如何从我的代码中判断请求匹配的路径是什么。（即，如果向我提出请求，`/myapp/yet/another/exact/path`我想获取字符串`/yet/another/exact/path`）。

我还想应该有一种方法来区分 /that/prefix/path/ 和曾经与 * 匹配的内容如果有人能告诉我应该如何完成这将是很好的。

我试过`String path = req.getRequestURI()`了，但它也返回了 /myapp 部分。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T08:27:06.793

`HttpServletRequest.getServletPath()`返回不包括 的 URL 模式`/*`，并`HttpServletRequest.getPathInfo()`返回匹配的部分`/*`（或`null`精确匹配）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:19:45.613

你应该使用：

```
 /**
     *
     * Returns any extra path information associated with
     * the URL the client sent when it made this request.
     * The extra path information follows the servlet path
     * but precedes the query string and will start with
     * a "/" character.
     *
     * <p>This method returns <code>null</code> if there
     * was no extra path information.
     *
     * <p>Same as the value of the CGI variable PATH_INFO.
     *
     *
     * @return      a <code>String</code>, decoded by the
     *          web container, specifying 
     *          extra path information that comes
     *          after the servlet path but before
     *          the query string in the request URL;
     *          or <code>null</code> if the URL does not have
     *          any extra path information
     *
     */
    public String getPathInfo(); 
```

# ruby-on-rails - 根据 Rails 中选定的国家/地区更改货币的价值

> ID：10698265
> 
> 赞同：2
> 
> 时间：2012-05-22T08:17:36.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在构建一个 Rails 电子商务应用程序，并希望集成一个货币兑换系统，访问者可以单击复选框并显示国家列表，当单击网站上产品的货币价值时，价值会发生变化所选国家的货币。是否有一个 Rails gem 可以连接到货币兑换服务器并自动为我转换货币或我如何实现这一点的任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-26T10:42:15.457

首先要做的是拥有像 USD NGN EUR 这样的货币代码，因此用户选择的任何货币都将其货币代码保存在会话或 cookie 中，记住您的默认货币设置为您想要使用的任何一个。

然后安装[谷歌货币](https://github.com/RubyMoney/google_currency)gem，它可以让您访问实时汇率。

假设所有这些都设置好了，我们要做的是

```
require 'money'
require 'money/bank/google_currency'
bank = Money::Bank::GoogleCurrency.new
rate = bank.get_rate(:NGN, :USD).to_f 
```

对于此示例，我只是将 1 奈拉兑换为 1 美元

既然我没有汇率，我所要做的就是找到一种将商品价格转换为所选货币的方法。

假设用户选择 $ 然后`session[:selected_currency] = "USD"`

在我们的产品模型中，我们有以下

```
##Assuming default currency is NGN so it defaults to NGN if no currency code
require 'money'
require 'money/bank/google_currency'
    def converted_price(currency = :NGN)
          bank = Money::Bank::GoogleCurrency.new
          rate = bank.get_rate(:NGN, currency).to_f
          price = item_amount / rate
          price
    end 
```

所以在我们看来我们可以有`<%= @product.converted_price(session[:selected_currency])%>`

我没有对此进行测试，但这会让您了解我是如何解决这个问题的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T09:41:29.073

查看[金钱宝石](https://github.com/RubyMoney/money)
似乎有一些解决方法可以完全按照您的意愿去做，但是它会给您一个不错的基础来实现您的目标。

# xml - EMF Multilist 在查看器中对数据进行排序

> ID：10698266
> 
> 赞同：0
> 
> 时间：2012-05-22T08:17:52.073
> 
> 标签：xml, eclipse-emf

假设有一个 EMD 模型可以访问以下 xml 文件（简化）：

```
<model>
    <set name="Set1"/>
    <get name="Get1"/>
    <set name="Set2"/>
    <get name="Get2"/>
</model> 
```

现在我想要一个使用 MultiList 在 TableViewer 中包含所有这些值的列表

```
viewer.setInput(EMFProperties.multiList(
    FeaturePath.fromList(ModelPackage.Literals.DOCUMENT_ROOT__MODEL,
        ModelPackage.Literals.MODEL__SET),
    FeaturePath.fromList(ModelPackage.Literals.DOCUMENT_ROOT__MODEL,
        ModelPackage.Literals.MODEL__GET)).observe(modelRoot)); 
```

这一切都很好，除了一个问题：Multilist 首先收集所有`set`对象，然后是所有`get`对象，但我需要以正确的顺序显示对象。

我期望/需要什么：

*   设置1
*   获取1
*   第 2 组
*   获取2

我得到什么：

*   设置1
*   第 2 组
*   获取1
*   获取2

有没有办法绕过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:41:35.263

您的元素包含在 FeatureMap 中，因此您需要访问 Group 功能才能按顺序排列它们。喜欢

```
ModelPackage.Literals.MODEL__GROUP 
```

# android - Spinner 在我的活动开始时被激活

> ID：10698267
> 
> 赞同：1
> 
> 时间：2012-05-22T08:17:55.663
> 
> 标签：android, android-layout, android-intent

我正在尝试在我的应用程序中使用微调器对象，但我遇到了麻烦，事实上，它在我的活动开始时被激活。虽然我希望在单击并选择所需项目时启用它。

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.ElementaryOperations, android.R.layout.simple_spinner_dropdown_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
s1.setAdapter(adapter);
s1.setOnItemSelectedListener(new OnItemSelectedListener(){
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3){

        index1 = s1.getSelectedItemPosition()+1;
        if (index1 == 3){

            finish();
            startActivity(prod);//

        }
    }

    public void onNothingSelected(AdapterView<?> arg0) {}

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:24:21.480

`OnItemSelectedListener`由于获取默认值，当您开始活动时调用微调器侦听器。我的意思是第一个元素和第零个索引。所以你可以检查位置是否为零，然后不要做任何事情。但请注意，你不能达到默认的选定值。如果你把条件设为零。

如果不能正常工作而不是[看到这个问题](https://stackoverflow.com/questions/4234668/onitemselectedlistener-called-on-screen-rotation/4234766#4234766)

# powershell - 使用 powershell 从 sccm 获取用户的最后一次登录

> ID：10698271
> 
> 赞同：1
> 
> 时间：2012-05-22T08:18:10.407
> 
> 标签：powershell, wmi, sccm

我正在尝试创建对 sccm 的 wmi 查询以获取 PC，用户上次登录在哪里。就像是：

```
Get-WmiObject -namespace $SCCMNameSpace -computer $SCCMServer -query "select lastlogon, PCname from sms_? where LastLogonUserName='$SamAccountName'" | select lastlogon, PCname. 
```

我可以在 sccm 报告中看到此信息，但我不知道我必须使用什么类进行查询。我正在使用 sms_r_system 获取 IP 和计算机名称。

有没有人知道带有这些信息的 sccm 类或 sql 查询对我来说会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:28:24.793

您使用哪个报告查看数据？您可能想要打开报告的 SQL 代码，找出它引用的 ConfigMgr SQL 视图，然后将其转换为 SCCM WMI 类名。WMI 类名称与 SQL 视图名称密切相关。

使用 SAPIEN 的免费 WMI Explorer GUI 工具等 WMI 浏览器来帮助探索 root\sms\site_xyz WMI 命名空间并发现您正在寻找的类。您还可以使用 Windows PowerShell 来帮助发现哪个类包含此属性：

```
gwmi -name root\cimv2 -list | ? { ($_.Properties.Name -join ',') -match 'lastlogon' } 
```

**注意**：确保您为上述命令使用 PowerShell 3.0 Release Preview，否则将无法正常工作。

# javascript - 在后台播放音频 (Windows 8)

> ID：10698272
> 
> 赞同：3
> 
> 时间：2012-05-22T08:18:16.707
> 
> 标签：javascript, windows, html, windows-8

在我的应用程序中，有一个*音频*标签，播放 MP3 文件。当我最小化应用程序时，音频停止。所以，我想知道如何让它继续播放。

PD：我使用 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:48:08.117

请参阅win8 开发者博客上的这篇文章[。](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/16/being-productive-when-your-app-is-offscreen.aspx)它讨论了（除其他外）Windows 8 中的背景音频支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:55:09.830

如本文所述：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh452730.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh452730.aspx)

您可以将 msAudioCategory 属性添加到 <audio> 标记以获得更多功能。
例如：

```
<audio msAudioCategory="BackgroundCapableMedia" controls="controls"> 
<source src="song.mp3"/> 
</audio> 
```

# c# - 如何在 mvc3 中从 Html.ActionLink 中废弃控制器名称

> ID：10698281
> 
> 赞同：2
> 
> 时间：2012-05-22T08:19:01.393
> 
> 标签：c#, asp.net-mvc-3, html.actionlink

我想从**Html.ActionLink**
中删除控制器名称 ，因为我在路由中定义了我的控制器如何执行此操作，因为如果我在**Html.ActionLink**
mvc3 中将 控制器名称留空， mvc3 会自动将当前控制器名称放入 Action Link 中。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T08:42:19.210

如果你命名了你的路线，你可以使用`RouteLink`代替`ActionLink`. 您只需指定路线的名称，而不是控制器。下面是一个命名路由的例子：

```
routes.MapRoute( "myRoute", 
                 "doStuff/Now", 
                 new {controller = "MyController", action = "DoIt"} ); 
```

这是在您的视图中使用它的方法

```
Html.RouteLink( "Do it!", "myRoute" ); 
```

有关 RouteLink 的完整详细信息，请[参阅 MSDN](http://msdn.microsoft.com/en-us/library/ee703603)。**

# java - Xpath转换在java中不起作用

> ID：10698287
> 
> 赞同：0
> 
> 时间：2012-05-22T08:19:42.313
> 
> 标签：java, xml, xslt, xpath, xml-signature

这是我的 xml 文档。我只想使用 xml 签名对用户 ID 部分进行签名。我正在使用 xpath 转换来选择该特定元素。

```
<samlp:AuthnRequest xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
Version="2.0" IssueInstant="2012-05-22T13:40:52:390" ProtocolBinding="urn:oasis:na
mes:tc:SAML:2.0:bindings:HTTP-POST" AssertionConsumerServiceURL="localhos
t:8080/consumer.jsp">
<UserID>
   xyz
</UserID>
<testing>
   text
</testing>
<saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">
   http://localhost:8080/saml/SProvider.jsp
</saml:Issuer>
</samlp:AuthnRequest> 
```

我正在使用以下代码添加转换：

```
transformList.add(exc14nTransform);
 transformList.add(fac.newTransform(Transform.XPATH, new XPathFilterParameterSpec("samlp:AuthnRequest/UserID xmlns:samlp=\"urn:oasis:names:tc:SAML:2.0:protocol\""))); 
```

但我得到以下信息：

```
Original Exception was javax.xml.transform.TransformerException: Extra illegal t
okens: 'xmlns', ':', 'samlp', '=', '"urn:oasis:names:tc:SAML:2.0:protocol"' 
```

所以，我尝试删除 xmlns 部分。

```
transformList.add(fac.newTransform(Transform.XPATH, new XPathFilterParameterSpec("samlp:AuthnRequest/UserID"))); 
```

但它签署了整个文件并给出了以下信息：

```
com.sun.org.apache.xml.internal.security.utils.CachedXPa
thFuncHereAPI fixupFunctionTable
INFO: Registering Here function 
```

问题是什么？
**编辑**
正如@Jörn Horstmann 所说，该消息只是一个日志或类似的东西。现在的问题是，即使在给出 xpath 查询之后，整个文档都会被签名，而不仅仅是用户 ID。`<testing>`我通过在签署文件后更改元素的值来确认这一点。结果是文档没有得到验证（如果它只签署了 UserID 部分，那么对所做的任何更改都`<testing>`应该导致有效的签名。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:11:29.067

这不是一个有效的 xpath 表达式，无法在表达式内声明命名空间前缀。

```
samlp:AuthnRequest/UserID xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol" 
```

[XPathFilterParameterSpec](http://docs.oracle.com/javase/6/docs/api/javax/xml/crypto/dsig/spec/XPathFilterParameterSpec.html#XPathFilterParameterSpec%28java.lang.String,%20java.util.Map%29)确实有另一个构造函数，它允许指定命名空间前缀的映射，您可以尝试以下表达式：

```
new XPathFilterParameterSpec("samlp:AuthnRequest/UserID",
    Collections.singletonMap("samlp", "urn:oasis:names:tc:SAML:2.0:protocol")) 
```

**编辑：**

该消息似乎不是错误，请参见[此处的第 426 行](http://www.docjar.com/html/api/com/sun/org/apache/xml/internal/security/utils/CachedXPathFuncHereAPI.java.html)，但它的日志级别可能应该低于 INFO。

我还查看了[xpath 过滤的描述](http://www.w3.org/TR/xmldsig-core/#sec-XPath)：

> 出现在 XPath 参数中的 XPath 表达式为输入节点集中的每个节点计算一次。结果被转换为布尔值。如果布尔值为真，则该节点包含在输出节点集中。如果布尔值为假，则从输出节点集中省略该节点。

`UserID`因此，仅在签名中包含 的正确 xpath 表达式将是`self::UserID`. 但是不要问我这对于 xml 签名是否真的有意义。规范中的示例似乎使用 xpath 表达式来包含除签名元素本身之外的所有内容：

```
not(ancestor-or-self::dsig:Signature) 
```

**编辑2：**

正确的表达式实际上是`ancestor-or-self::UserID`因为过滤器还必须包含节点的文本子`UserID`节点。

# android - android - java.lang.SecurityException：连接被拒绝

> ID：10698290
> 
> 赞同：6
> 
> 时间：2012-05-22T08:19:46.603
> 
> 标签：android, smartcard

我是 UICC 和 Secure Elements 的新手，我尝试使用本教程 (http://code.google.com/p/seek-for- android/wiki/UsingSmartCardAPI) 来连接 Secure Elements 来做一个简单的 android 应用程序。当我运行应用程序时，它会抛出 java.lang.SecurityException: Connection denied !!!。请帮忙。谢谢

代码

```
public void onCreate(Bundle savedInstanceState) { 
          final String LOG_TAG = "HelloSmartcard";     
          super.onCreate(savedInstanceState);     
          LinearLayout layout = new LinearLayout(this); 
          layout.setLayoutParams(new LayoutParams( 
                  LayoutParams.WRAP_CONTENT, 
                  LayoutParams.WRAP_CONTENT)); 

          Button button = new Button(this); 
          button.setLayoutParams(new LayoutParams( 
                  LayoutParams.WRAP_CONTENT, 
                  LayoutParams.WRAP_CONTENT));     
          button.setText("Click Me"); 
          button.setOnClickListener(new OnClickListener() { 
            public void onClick(View v) { 
                try { 
                      Log.d(LOG_TAG, "Retrieve available readers..."); 
                      Reader[] readers = seService.getReaders(); 
                      if (readers.length < 1) 
                         return;     
                      Log.d(LOG_TAG, "Create Session from the first reader..."); 
                      Session session = readers[0].openSession();     
                      Log.d(LOG_TAG, 
                      "Create logical channel within the session..."); 
                      Channel channel = session.openLogicalChannel(new 
byte[] { 
                      (byte) 0xD2, 0x76, 0x00, 0x01, 0x18, 0x00, 0x02, 
                      (byte) 0xFF, 0x49, 0x50, 0x25, (byte) 0x89, 
                      (byte) 0xC0, 0x01, (byte) 0x9B, 0x01 });     
                      //Log.d(LOG_TAG, "Send HelloWorld APDU command"); 
                      byte[] respApdu = channel.transmit(new byte[] { 
                      (byte) 0x90, 0x10, 0x00, 0x00, 0x00 });     
                      channel.close();     
                      // Parse response APDU and show text but remove SW1 SW2 first 
                      byte[] helloStr = new byte[respApdu.length - 2]; 
                      System.arraycopy(respApdu, 0, helloStr, 0, 
respApdu.length - 2); 
                      Toast.makeText(MainActivity.this, new 
String(helloStr),   Toast.LENGTH_LONG).show(); 
                   } catch (Exception e) { 
                      Log.e(LOG_TAG, "Error occured:", e); 
                      return; 
                   } 
            } 
          }); 

          layout.addView(button); 
          setContentView(layout); 
          try { 
                Log.i(LOG_TAG, "creating SEService object"); 
                seService = new SEService(this, this); 
              } catch (SecurityException e) { 
                Log.e(LOG_TAG, "Binding not allowed, uses-permission org.simalliance.openmobileapi.SMARTCARD?"); 
              } catch (Exception e) { 
                Log.e(LOG_TAG, "Exception: " + e.getMessage()); 
              } 

    } 
```

日志猫

```
05-22 08:11:49.669: E/HelloSmartcard(6691): Error occured:
05-22 08:11:49.669: E/HelloSmartcard(6691): java.lang.SecurityException: Connection refused !!!
05-22 08:11:49.669: E/HelloSmartcard(6691):     at org.simalliance.openmobileapi.SEService.checkForException(SEService.java:611)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at org.simalliance.openmobileapi.SEService.openLogicalChannel(SEService.java:479)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at org.simalliance.openmobileapi.Session.openLogicalChannel(Session.java:143)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at com.gieseckedevrient.android.hellosmartcard.MainActivity$1.onClick(MainActivity.java:50)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at android.view.View.performClick(View.java:2485)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at android.view.View$PerformClick.run(View.java:9080)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at android.os.Handler.handleCallback(Handler.java:587)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at android.os.Looper.loop(Looper.java:130)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at android.app.ActivityThread.main(ActivityThread.java:3768)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at java.lang.reflect.Method.invokeNative(Native Method)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at java.lang.reflect.Method.invoke(Method.java:507)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
05-22 08:11:49.669: E/HelloSmartcard(6691):     at dalvik.system.NativeStart.main(Native Method) 
```

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.gieseckedevrient.android.hellosmartcard"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="org.simalliance.openmobileapi.SMARTCARD"/>
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         <uses-library android:name="org.simalliance.openmobileapi" android:required="false" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:25:48.547

//在AndroidManifest.xml文件中定义权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="org.simalliance.openmobileapi.SMARTCARD"/> 
```

# objective-c - 如何在objective-c中的指定时间唤醒线程

> ID：10698294
> 
> 赞同：2
> 
> 时间：2012-05-22T08:20:18.970
> 
> 标签：objective-c, multithreading, locking, manualresetevent, nscondition

我在objective-c中编写一个ssh包装器，我正在尝试实现一个命令应该执行的maxTime。我实现它的方式是：

**主线：**

1.  计算超时
2.  创建 asyncThread（GCD 队列）执行命令并解析返回的数据
3.  等待超时或信号
4.  返回结果

**异步线程：**

1.  执行命令
2.  获取返回的数据
3.  如果接收到正确的数据信号 MainThread

在 C# 中，我使用 ManualResetEvents 向 MainThread 发出信号，取得了很大的成功。在 Objective-C 中，我能找到的最接近的类是 NSCondition，但它似乎不是为线程间通信而构建的。

事实上我得到：

> 2012-05-22 00:31:05.761 libssh2-for-iOS[60821:11303] ** -[NSCondition unlock]: 条件 ('(null)') 从未锁定的线程中解锁
> 
> 2012-05-22 00:31:05.763 libssh2-for-iOS[60821:11303] ** 中断 _NSLockError() 以进行调试。

当我尝试使用它时。是否有另一种使用 NSCondition 的方法或更好的方法让线程休眠，直到它收到某种信号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T03:46:52.980

好吧，事实证明我几乎是对的。我的问题（正如编译器轻易提到的那样）是我锁定了一个线程并解锁了另一个线程。真正解决它的是学习 NSCondition 中的“信号”方法。所以现在我已经重写了代码：

**工人＃1线程：**

```
[NSCondition lock]
start worker thread
if([NSCondition waitUntil:maxTime])
    // got signal
else
    // timed out
[NSCondition unlock] 
```

**工人＃2线程：**

```
Do work
[NSCondition signal] 
```

# opencv - 16 位图像到 32 位

> ID：10698299
> 
> 赞同：0
> 
> 时间：2012-05-22T08:20:39.973
> 
> 标签：opencv

我正在加载一个`.png`16 位 1 通道的图像（来自 Kinect 传感器的深度图像）。我想将其转换为具有 3 个通道（颜色）和 32 位的图像。

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:19:31.703

第 1 步：16 --> 32 位

```
cv::Mat depthImage:
cv::Mat depth32;
float scaleFactor = 1.0; // Or what you want
depthImage.convertTo(depth32, CV_32F, scaleFactor); 
```

第 2 步：1 ---> 3 个通道

```
#include <opencv2/imgproc/imgproc.hpp>
cv::Mat depthColor32;
cv::cvtColor(depth32, depthColor32, CV_GRAY2BGR); 
```

就是这样。

# xmpp - XMPP：使客户端仅对该客户端的其他实例在线显示

> ID：10698303
> 
> 赞同：0
> 
> 时间：2012-05-22T08:20:44.640
> 
> 标签：xmpp

我想使用 XMPP 作为桌面应用程序的消息总线。由于该应用程序将使用用户现有的 XMPP 帐户（GTalk 等）并且不提供 IM 服务，因此我想让我的客户端实例对其他 XMPP 客户端不可见。

为此，我正在考虑使用客户端服务发现和隐私列表来阻止向我自己的其他客户端的完整 JID 发出的存在通知。然而，我确实怀疑这种方法的可扩展性和稳健性。有没有更好的方法来实现这一点？

**编辑：**

我现在在想，我能做到的最接近这种行为的方法就是设置一个负面优先级的存在。这将有望最大限度地减少用户的困惑并相当普遍地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:04:06.757

[XEP-0126](http://xmpp.org/extensions/xep-0126.html)没有您需要的工具，因为您无法找到您必须直接访问的其他客户端……因为它们是不可见的。

如果你所有的客户都加入一个[MUC](http://xmpp.org/extensions/xep-0045.html)房间怎么样？

# mysql - Grails 属性不能为空错误

> ID：10698305
> 
> 赞同：0
> 
> 时间：2012-05-22T08:20:55.373
> 
> 标签：mysql, grails, grails-orm

我的 Grails 应用程序运行良好。如果我没记错的话，我所做的就是将我的一个域类的约束从***blank: true, nullable:true***更改为***blank:false, nullable: false***。现在，当我尝试创建该类的新实例时，我收到以下错误消息：

```
Property [contract] of class [class com.app.Request] cannot be null
Property [description] of class [class com.app.Request] cannot be null
Property [productline] of class [class com.app.Request] cannot be null
Property [requestType] of class [class com.app.Request] cannot be null
Property [subject] of class [class com.app.Request] cannot be null 
```

我已经为所有这些属性提供了值。

我猜gorm和数据库之间存在一些冲突。有人可以向我解释发生了什么以及如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:08:12.887

我有类似的问题，已将约束更新为非空，但我存储的数据对于非空字段有空值。在某些时候，Grails 会尝试加载现有数据，但在验证步骤中失败。

尝试使用一些默认值（我的意思是使用普通 SQL `UPDATE SET x = 'temp' WHERE x IS NULL`）更新您的数据库，创建`grails clean`并重新启动您的应用程序。应该有帮助。

# iphone - 无法重新加载给出 EXC_BAD_ACCESS 的表

> ID：10698310
> 
> 赞同：0
> 
> 时间：2012-05-22T08:21:22.890
> 
> 标签：iphone, uitableview, uitextfield, reload

在尝试重新加载表时，程序给出了 BAD_EXCESS 信号。

在下面的代码中。

```
-(void)textFieldDidEndEditing:(UITextField *)textField {
    NSLog(@"%d",textField.tag);
    if (textField.tag == 2) {
            IntelligentPillBoxAppDelegate *appdelegate = (IntelligentPillBoxAppDelegate *)[[UIApplication sharedApplication]delegate];
            appdelegate.strip1_detail = [pillboxDb get_detail_for_din:value];

            [table reloadData];
    }
    [textField resignFirstResponder];
}

+(NSMutableArray*)get_detail_for_din:(int) din{
NSArray *arrDocPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *strDestPath = [NSString stringWithFormat:@"%@/samplepillbox1.sqlite",[arrDocPath objectAtIndex:0]];

//IntelligentPillBoxAppDelegate *appdelegate = (IntelligentPillBoxAppDelegate *)[[UIApplication sharedApplication]delegate];
//appdelegate.strip1_detail = [[NSMutableArray alloc]init];
NSMutableArray *strip1_detail = [[NSMutableArray alloc]init];
sqlite3 *db;
if(sqlite3_open([strDestPath UTF8String], &db)==SQLITE_OK)

{

    NSString *query = [NSString stringWithFormat:@"select * from maintable_master where din =%d ",din];

    void* v;
    char* err_msg;
    sqlite3_stmt *studentStmt;

    if(sqlite3_prepare_v2(db, [query UTF8String], -1, &studentStmt, &err_msg)==SQLITE_OK)
    {
        while (sqlite3_step(studentStmt)==SQLITE_ROW) {

            int din = sqlite3_column_int(studentStmt, 0);
            NSString *brandname = [NSString stringWithUTF8String: sqlite3_column_text(studentStmt, 1)];
            NSString *fullname = [NSString stringWithUTF8String: sqlite3_column_text(studentStmt, 2)];
            NSString *strength = [NSString stringWithUTF8String: sqlite3_column_text(studentStmt, 3)];
            NSString *medicationtype =[NSString stringWithUTF8String: sqlite3_column_text(studentStmt, 4)];
            NSString *presciptionid= [NSString stringWithUTF8String: sqlite3_column_text(studentStmt, 5)];
            //float marks = sqlite3_column_double(studentStmt, 2);

            //pillbox *st = [[pillbox alloc]init];
            //st.Din = sno;
            //st.Name = sname;

            //NSLog(@"%@",st);

            Strip_items *si = [[Strip_items alloc]init];
            si.Din = din;
            si.BrandName = brandname;
            si.FullName = fullname;
            si.Strength = strength;
            si.MedicationType = medicationtype;
            si.PresciptionID = presciptionid; 
            NSLog(@"%@",si.BrandName);
            NSLog(@"%d",si.Din);
            NSLog(@"%@",si.FullName);
            NSLog(@"%@",si.Strength);
            NSLog(@"%@",si.MedicationType);
            NSLog(@"%@",si.PresciptionID);

            [strip1_detail addObject:si];
        }

    }

}
return strip1_detail;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:28:22.253

启用僵尸对象，它会告诉你发生了什么错误。

转到产品>编辑方案>启用僵尸对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:35:47.050

似乎您没有定义所有变量。

检查在哪里`value`定义以及它的值是什么。

另外，也许您应该**先**退出文本字段的响应者，**然后**重新加载表格视图。根据您的代码，您辞职的第一响应者的文本字段在重新加载表视图后可能不再存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:46:45.883

`IntelligentPillBoxAppDelegate`你在这一行得到了 BAD_EXCESS ......有关更多解释类的邮政编码

```
appdelegate.strip1_detail = [pillboxDb get_detail_for_din:value]; 
```

# android - 通过蓝牙进行 Android 和 Windows 通信

> ID：10698311
> 
> 赞同：1
> 
> 时间：2012-05-22T08:21:24.367
> 
> 标签：android, c++, c, windows, bluetooth

有人可以帮我找到一些适当的教程或示例代码，用于通过蓝牙从 Windows C++ 应用程序发送和接收数据吗？我需要这个 Windows 应用程序与 Android 应用程序进行通信。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:25:57.903

您可以从[Windows 蓝牙 API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362932%28v=vs.85%29.aspx)开始。

# java - 查找六个数组元素的所有可能组合

> ID：10698318
> 
> 赞同：0
> 
> 时间：2012-05-22T08:21:57.363
> 
> 标签：java, arrays, algorithm, brute-force, cartesian-product

我有 6 个数组，每个数组有 8 个元素。我想编写一个方法来揭示所有数组的所有元素的所有可能组合，例如：

```
firstArray firstElement, secondArray firstElement,.... sixthArray firstElement

firstArray secondElement, secondArray firstElement,.... sixthArray firstElement

....etc...

firstArray lastElement, secondArray lastElement,.... sixthArray lastElement 
```

我怎样才能以*最有效*、对*性能最友好的*方式做到这一点？

```
for (int i = 0; i < A.length; i++) {
  for (int j = 0; j < B.length; j++) {
    for (int h = 0; h < C.length; h++) {
      for (int k = 0; k < D.length; k++) {
        for (int l = 0; l < E.length; l++) {
          for (int n = 0; n < F.length; n++) {
            System.out.println(A[i] + " "
                             + B[j] + " "
                             + C[h] + " "
                             + D[k] + " "
                             + E[l] + " "
                             + F[n]);
          }
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:28:54.473

最简单的代码是：

```
for (first array a) {
  for (second array b) {
    for (third array c) {
      for (fourth array d) {
        for (fifth array e) {
          for (sixth array f) {
            System.out.println(a[], b[], c[], d[], e[], f[]);
          }
        }
      }
    }
  }
} 
```

这不是很好的表现，因为它需要 - 不。数组 * 每个数组的元素 * 每个数组的元素时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T08:38:51.663

这正在迅速成为一个 SO FAQ，但是对于我的生活，我找不到与之重复的正确问题，所以这里是 FPA（经常提供的答案）。

依次生成从 000000 到 777777 的所有 6 位 base-8 数字。每个数字指定您要查找的集合：第一个数字标识第一个数组的元素，第二个数字标识第二个数组的元素，等等。

这应该足以让您入门，我在 Java 中提供的任何“帮助”都会被嘲笑。这是否比您已经拥有的答案更好（或者实际上与它有很大不同），我让您和其他人来判断。

为了您将来的参考，您正在尝试计算 6 个数组的*笛卡尔积*。至于这些方法的效率，很好地计算 2 个集合中每个 n 个元素的笛卡尔积是 O(n^2) 并且无法通过巧妙的编程来解决这个问题。所以对于 6 组，每组 n 个元素，计算复杂度将是 O(n^6)。

# objective-c - 如何在 UISplitViewController 中添加第三个 UIView？

> ID：10698319
> 
> 赞同：0
> 
> 时间：2012-05-22T08:22:05.693
> 
> 标签：objective-c, uisplitviewcontroller

可以以及如何在 UISplitViewController 中的 masterView 上方添加 UIView。见例子： ![在此处输入图像描述](../Images/6b896369df6c1efe0863c4718b8067cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T23:39:31.880

如果您想要比 Novarg 建议的更高级的东西，请使用[`MGSplitViewController`](https://github.com/mattgemmell/MGSplitViewController). 然后，您可以将拆分视图控制器作为顶部拆分视图控制器的详细视图。MGSplitViewController 还允许调整比例，因此您可以随意调整它。

# c# - 如何获取 WPF 中任何控件的“内容”？

> ID：10698320
> 
> 赞同：1
> 
> 时间：2012-05-22T08:22:07.480
> 
> 标签：c#, wpf, wpf-controls

我正在编写一个函数，它将采用`Control Ctrl`as`Arguement`并修改`Control.Content`它。有没有办法获取和设置`Content`任何`Control`？

代码 ：

```
void RemoveHotKey(Control Ctrl, int KeyIndex)
{
    if (Ctrl.Content.ToString().Substring(KeyIndex, 1) == "_") // System.Windows.Controls.Control does not contain a definition for 'Content'
    {
        Ctrl.Content = Ctrl.Content.ToString().Remove(KeyIndex, 1); // System.Windows.Controls.Control does not contain a definition for 'Content'
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:27:52.800

您可以将方法的签名更改为：

```
void RemoveHotKey(ContentControl Ctrl, int KeyIndex) 
```

a[`ContentControl`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)总是有一个[`Content`](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.content.aspx)属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T08:28:32.380

试试这个：

```
void RemoveHotKey(ContentControl Ctrl, int KeyIndex) 
{ 
    if (Ctrl.Content.ToString().Substring(KeyIndex, 1) == "_")
    { 
        Ctrl.Content = Ctrl.Content.ToString().Remove(KeyIndex, 1);
    } 
} 
```

看看[这里](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)。

或这个：

```
void RemoveHotKey(Control Ctrl, int KeyIndex)
{
    ContentControl contentCtrl = Ctrl as ContentControl;
    if (contentCtrl != null && contentCtrl.Content != null)
    {
        if (contentCtrl.Content.ToString().Substring(KeyIndex, 1) == "_")
        { 
            contentCtrl.Content = contentCtrl.Content.ToString().Remove(KeyIndex, 1);
        }
    } 
} 
```

这比使用反射便宜得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T08:26:19.290

您可以使用反射来检查*Control*实际上是否具有*Content*属性...

```
Type t = Ctrl.GetType();
PropertyInfo p = t.GetProperty("Content");
if (p != null)
{
    string val = p.GetValue(Ctrl, null) ?? "";
    val = val.Replace("_", "");
    p.SetValue(Ctrl, val, null);
} 
```

# c# - 对 Array.Reverse 的实现非常感兴趣

> ID：10698326
> 
> 赞同：0
> 
> 时间：2012-05-22T08:22:34.283
> 
> 标签：c#, arrays

> **可能重复：**
> [Array.Reverse 方法背后的逻辑](https://stackoverflow.com/questions/2866372/logic-behind-the-array-reverse-method)

我找不到这种方法的来源。谁知道它是如何实现的？

```
char[] inputstream = source.ToCharArray();
Array.Reverse(inputstream); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:29:34.613

使用 .NET 反射器 :)

```
public static void Reverse(Array array, int index, int length)
{
    if (array == null)
    {
        throw new ArgumentNullException("array");
    }
    if ((index < array.GetLowerBound(0)) || (length < 0))
    {
        throw new ArgumentOutOfRangeException((index < 0) ? "index" : "length", Environment.GetResourceString("ArgumentOutOfRange_NeedNonNegNum"));
    }
    if ((array.Length - (index - array.GetLowerBound(0))) < length)
    {
        throw new ArgumentException(Environment.GetResourceString("Argument_InvalidOffLen"));
    }
    if (array.Rank != 1)
    {
        throw new RankException(Environment.GetResourceString("Rank_MultiDimNotSupported"));
    }
    if (!TrySZReverse(array, index, length))
    {
        int num = index;
        int num2 = (index + length) - 1;
        object[] objArray = array as object[];
        if (objArray == null)
        {
            while (num < num2)
            {
                object obj3 = array.GetValue(num);
                array.SetValue(array.GetValue(num2), num);
                array.SetValue(obj3, num2);
                num++;
                num2--;
            }
        }
        else
        {
            while (num < num2)
            {
                object obj2 = objArray[num];
                objArray[num] = objArray[num2];
                objArray[num2] = obj2;
                num++;
                num2--;
            }
        }
    }
} 
```

# facebook - iOS Facebook SDK 连接在 iDevice 上失败

> ID：10698327
> 
> 赞同：0
> 
> 时间：2012-05-22T08:22:37.440
> 
> 标签：facebook, ios5, sdk

我在 iOS 应用程序（ARC，在 iOS 5 上运行）中使用 facebook 连接。它在模拟器和设备上都可以正常工作，但是从今天早上它已经停止在设备上工作，它仍然可以在模拟器上工作。在设备上，我调用了 fbDinNotLogin 方法。

现在，我知道区别在于模拟器使用移动 facebook，而我的应用程序使用原生 iOS facebook 应用程序，而且我也知道您可以调整 facebook.m 文件以强制应用程序在其他地方登录，但我不想这样做那。

从昨天加载我以前的构建（一切正常）也给了我相同的结果。所以昨天运行的相同代码今天不会运行。知道为什么会这样吗？下面是我的委托 .m 文件：

**[EIDT]**我从本机 facebook 应用程序中获得了各种不同的行为。有时它会打开 facebook 应用程序，并停留在那里不会回到我的应用程序。有时它只是快速返回到我的应用程序，而不允许 Facebook 应用程序征求我的许可。我很困惑。**[/编辑]**

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:       (NSDictionary *)launchOptions {

user *userClass= [[user alloc] init];
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"]) 
{
    // app already launched for the first time

}
else
{
    // This is the first launch ever
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"HasLaunchedOnce"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    [userClass CopyDbToDocumentsFolder];

}

facebook = [[Facebook alloc] initWithAppId:@"XXXXXXXXXX" andDelegate:self];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
&& [defaults objectForKey:@"FBExpirationDateKey"]) {
facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}
if (![facebook isSessionValid]) {
[facebook authorize:nil];

}

return YES;
}

-(void)fbDidLogout
{
NSLog(@"Facebook loggedOut");
}

- (void)fbDidNotLogin:(BOOL)cancelled
{

NSLog(@"Facebook Connect Failed");

}

- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize];

}

- (void)fbSessionInvalidated
{
NSLog(@"Facebook Session Invalidated");
}

- (void)fbDidExtendToken:(NSString*)accessToken
           expiresAt:(NSDate*)expiresAt
{
NSLog(@"Facebook Toekn was extended");
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [self.facebook handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:            (NSString *)sourceApplication annotation:(id)annotation {
    return [self.facebook handleOpenURL:url];
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
// Although the SDK attempts to refresh its access tokens when it makes API calls,
// it's a good practice to refresh the access token also when the app becomes active.
// This gives apps that seldom make api calls a higher chance of having a non expired
// access token.
[[self facebook] extendAccessTokenIfNeeded];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:55:40.010

原来问题确实出在facebook而不是我的应用程序上！我的开发者帐户一直未能保存更改等，但它现在恢复正常。

# asp.net - 为什么我们不在我们的asp.net页面中使用html标签控件

> ID：10698328
> 
> 赞同：2
> 
> 时间：2012-05-22T08:22:40.967
> 
> 标签：asp.net, .net

我正在尝试使用 asp.net 。令我惊讶的一件事是，在我们的设计代码中，我们没有使用通用等`<html>`，`<body>`但我们使用了`<asp:content>`，`<asp:button>`等等。我试图找出原因，但最终以抽象的 msdn 页面结束。所以请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:03:55.750

带有`<asp:...`标签前缀的标签意味着它们是“服务器端控件”，这意味着：

*   您的程序可以在服务器端（事件、参数等）**和**客户端脚本（例如 JavaScript）访问它们

*   当您实际运行您的网站时，它们将作为标准 HTML 标记“渲染”（运行时输出/“翻译为”）

例如，当您构建您的网页时，标签`<asp:textbox runat="server" id=foo...`将像`<input type="text" id="foo`您在浏览器中运行 ASP.net 应用程序时一样输出。

您可以创建一个简单的网页，在浏览器中运行它，然后`VIEW SOURCE`查看这个“翻译”在工作中。

因此，当您开发/设计您的 Web 应用程序时，ASP.Net 将为您提供他们所谓的“控件”（例如按钮控件、标签控件等）。它们**都**将在运行时被翻译成标准的 HTML 标签/元素。

以上涉及到称为[**“Web Forms”**](http://www.asp.net/web-forms)的 ASP.Net 技术。

你可以从它开始 - 它更容易编程。当您变得更高级和/或更喜欢做更多“裸机”标准 HTTP POST/GET 时，您可以查看 ASP.Net MVC/Razor - 这种 ASP.Net 架构将让您使用标准 HTML 并几乎可以控制一切（这也意味着您需要知道*如何*控制“一切”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:35:47.933

在 ASP.NET 页面中使用 HTML 标记没有任何问题，当然，只要您`runat="server"`在它们上使用。我喜欢两者都用，取决于它是什么。我认为使用 HTML 标记的好处意味着您对 HTML 更加熟悉，并且不依赖于 ASP.NET 语法。

另一方面，在某些情况下，实际编写所有 HTML 以复制控件将是一项非常费力的任务。像一个`DataGrid`包含所有事件的复杂的东西对于编写纯 HTML/JavaScript 来说绝对是一场噩梦。在这种情况下，使用 ASP.NET 控件和语法使其更快、更清晰。

# c# - AsyncEnumerator 使用示例

> ID：10698329
> 
> 赞同：1
> 
> 时间：2012-05-22T08:22:40.927
> 
> 标签：c#, asynchronous

刚接触 AsyncEnumerator 库，但不确定我缺少什么。我试图运行库作者自己提供[的示例](http://msdn.microsoft.com/en-us/magazine/cc721613.aspx)，但不知道行中的“执行”是什么：

```
ae.Execute(ProcessAllAndEachOps(ae, urls)); 
```

方法参考。谁能给我一些线索？

更新：我设法通过进行一些更改使其运行，这些更改已包含在下面的代码中。归功于 Peter 注意到 AsyncEnumerator 对象的 Execute() 方法已过时，应该用一些辅助函数替换。

```
using System;
using System.Collections.Generic;
using System.Net;
using Wintellect.Threading.AsyncProgModel;

public static class AsyncEnumeratorPatterns {

    private static void Execute(AsyncEnumerator ae, IEnumerator<Int32> enumerator){
                    ae.EndExecute(ae.BeginExecute(enumerator, null));
    }

      public static void Main() {
        String[] urls = new String[] { 
          "http://Wintellect.com/", 
          "http://1.1.1.1/",   // Demonstrates error recovery
          "http://www.Devscovery.com/" 
        };

        // Demonstrate process
        AsyncEnumerator ae = new AsyncEnumerator();
        Execute(ae, ProcessAllAndEachOps(ae, urls));
      }

      private static IEnumerator<Int32> ProcessAllAndEachOps(
           AsyncEnumerator ae, String[] urls) {
        Int32 numOps = urls.Length;

        // Issue all the asynchronous operation(s) so they run concurrently
        for (Int32 n = 0; n < numOps; n++) {
          WebRequest wr = WebRequest.Create(urls[n]);
          wr.BeginGetResponse(ae.End(), wr);
        }

        // Have AsyncEnumerator wait until ALL operations complete
        yield return numOps;

        Console.WriteLine("All the operations completed:");
        for (Int32 n = 0; n < numOps; n++) {
          ProcessCompletedWebRequest(ae.DequeueAsyncResult());
        }

        Console.WriteLine(); // *** Blank line between demos ***

        // Issue all the asynchronous operation(s) so they run concurrently
        for (Int32 n = 0; n < numOps; n++) {
          WebRequest wr = WebRequest.Create(urls[n]);
          wr.BeginGetResponse(ae.End(), wr);
        }

        for (Int32 n = 0; n < numOps; n++) {
          // Have AsyncEnumerator wait until EACH operation completes
          yield return 1;

          Console.WriteLine("An operation completed:");
          ProcessCompletedWebRequest(ae.DequeueAsyncResult());
        }
      }

      private static void ProcessCompletedWebRequest(IAsyncResult ar) {
        WebRequest wr = (WebRequest)ar.AsyncState;
        try {
          Console.Write("   Uri=" + wr.RequestUri + "    ");
          using (WebResponse response = wr.EndGetResponse(ar)) {
            Console.WriteLine("ContentLength=" + response.ContentLength);
          }
        }
        catch (WebException e) {
          Console.WriteLine("WebException=" + e.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:30:54.027

正如其他人所说，Execute 方法不久前被弃用，现在完全消失了，那个 MSDN 示例已经很老了。

该方法略微违背了 AsyncEnumerator 类的观点，因为进行调用的线程将运行迭代器，直到第一次产生，然后阻塞，直到迭代器完成处理。

因此，将其替换为以下内容可能更清楚：

```
var asyncResult = ae.BeginExecute(ProcessAllAndEachOps(ae, urls), null);
asyncResult.AsyncWaitHandle.WaitOne();
ae.EndExecute(asyncResult); 
```

这看起来有点像从 AsyncEnumerator 迭代器中进行常规 APM 调用，并使阻塞更加明确。

# javascript - 更改网站主题

> ID：10698337
> 
> 赞同：-3
> 
> 时间：2012-05-22T08:23:12.080
> 
> 标签：javascript, css, ajax

我想在按钮单击时更改我网站的颜色主题。请给我任何参考网站的网址，我可以从中有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:27:35.333

您应该使用 Google 来查找该信息，但无论如何...

在我的主题网站上，我使用 PHP 在用户机器上存储了一个 cookie（例如 $_COOKIE['themePref']）。cookie 存储要为用户加载的 CSS 文件的名称，然后使用 PHP 在头部回显。

我发现 cookie 是最好的方法，因为这意味着用户不需要帐户（将他们的偏好存储在数据库中）。

# c++ - 理想的缓冲区大小是多少？

> ID：10698339
> 
> 赞同：30
> 
> 时间：2012-05-22T08:23:22.027
> 
> 标签：c++, c, io

> **可能重复：**
> [使用 FileInputStream 时如何确定理想的缓冲区大小？](https://stackoverflow.com/questions/236861/how-do-you-determine-the-ideal-buffer-size-when-using-fileinputstream)

当使用 C++`istream`系列`read()`或 C从文件（或任何输入流）读取原始数据时`fread()`，必须提供缓冲区，以及要读取的数据量。我见过的大多数程序似乎都是在 512 和 4096 之间任意选择 2 的幂。

1.  是否有理由必须/应该是 2 的幂，或者这只是程序员对 2 的幂的自然倾向？
2.  “理想”的数字是多少？“理想”是指它是最快的。我认为它必须是底层设备缓冲区大小的倍数？或者可能是底层流对象的缓冲区？无论如何，我将如何确定这些缓冲区的大小？一旦我这样做了，使用它的倍数会比仅使用确切的大小来提高速度吗？

**编辑**
大多数答案似乎是在编译时无法确定。我可以在运行时找到它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-22T08:29:42.300

SOURCE：
[在使用 FileInputStream 时，您如何确定理想的缓冲区大小？](https://stackoverflow.com/questions/236861/how-do-you-determine-the-ideal-buffer-size-when-using-fileinputstream)

> 最佳缓冲区大小与许多因素有关：文件系统块大小、CPU 缓存大小和缓存延迟。
> 
> 大多数文件系统配置为使用 4096 或 8192 的块大小。理论上，如果您配置缓冲区大小以便读取比磁盘块多几个字节，则对文件系统的操作可能非常低效（即，如果您将缓冲区配置为一次读取 4100 个字节，每次读取需要文件系统读取 2 次块）。如果这些块已经在缓存中，那么您最终会付出 RAM -> L3/L2 缓存延迟的代价。如果你不走运并且块还没有在缓存中，那么你也要付出磁盘-> RAM 延迟的代价。
> 
> 这就是为什么您会看到大多数缓冲区大小为 2 的幂，并且通常大于（或等于）磁盘块大小。这意味着您的一个流读取可能会导致多个磁盘块读取 - 但这些读取将始终使用完整块 - 不会浪费读取。

确保这一点通常还会导致影响读取和后续处理的其他性能友好参数：数据总线宽度对齐、DMA 对齐、内存高速缓存行对齐、虚拟内存页面的整数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T08:29:45.640

1.  至少在我的情况下，假设底层系统正在使用大小也是 2 的幂的缓冲区，所以最好尝试匹配。我认为现在的缓冲区应该比“大多数”程序员倾向于制作的缓冲区大一点。例如，我会选择 32 KB 而不是 4 KB。
2.  不幸的是，很难提前知道。例如，这取决于您的应用程序是受 I/O 限制还是受 CPU 限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T08:30:53.933

1.  我认为主要是选择一个“整数”。如果计算机以十进制工作，我们可能会选择 1000 或 10000 而不是 1024 或 8192。没有很好的理由。

一个可能的原因是磁盘扇区的大小通常为 512 字节，因此读取其中的倍数会更有效，假设所有硬件层和缓存导致低级代码实际上能够有效地使用这一事实。除非您正在编写设备驱动程序或进行无缓冲读取，否则它可能无法做到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T08:33:03.230

我没有理由知道它必须是二的幂。您受到缓冲区大小必须在 max 范围内的限制，`size_t`但这不太可能成为问题。

显然，缓冲区越大越好，但这显然不可扩展，因此必须在编译时或最好在运行时考虑系统资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T08:36:38.697

> 1\. 是否有理由必须/应该是 2 的幂，或者这只是程序员对 2 的幂的自然倾向？

并不真地。它可能应该是数据总线宽度的大小以简化内存复制，因此任何划分为 16 的东西在当前技术下都会很好。使用 2 的幂使其很可能适用于任何未来的技术。

> 2\. “理想”的数字是多少？“理想”是指它是最快的。

最快的应该是尽可能的。但是，一旦超过几千字节，与您使用的内存量相比，您的性能差异将非常小。

> 我认为它必须是底层设备缓冲区大小的倍数？或者可能是底层流对象的缓冲区？无论如何，我将如何确定这些缓冲区的大小？

您无法真正知道底层缓冲区的大小，或者依赖于它们保持不变。

> 一旦我这样做了，使用它的倍数会比仅使用确切的大小来提高速度吗？

有些，但很少。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T12:15:20.703

我认为缓冲区的理想大小是硬盘驱动器中一个块的大小，因此它可以在存储或从硬盘驱动器获取数据时与缓冲区正确映射。

# javascript - 使用下划线检查对象数组是否具有键值

> ID：10698340
> 
> 赞同：14
> 
> 时间：2012-05-22T08:23:25.817
> 
> 标签：javascript, functional-programming, underscore.js

如何使用下划线检查对象数组是否具有键值。

例子：

```
var objects = [
  {id:1, name:'foo'},
  {id:2, name:'bar'}
]

check(objects, {name: foo}) // true 
```

我认为应该使用地图制作：

```
_.map(objects, function(num, key){ console.log(num.name) }); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-22T10:22:42.313

你可以用[`some`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some)这个。

```
check = objects.some( function( el ) {
    return el.name === 'foo';
} ); 
```

`check`是`true`函数是否返回`true`一次，否则为`false`.

但是在 IE7/8 中不支持。您可以查看 shim 的 MDN 链接。

对于下划线库，它看起来也实现了（它是 的别名[`any`](http://underscorejs.org/#any)）。例子：

```
check = _.some( objects, function( el ) {
    return el.name === 'foo';
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T08:26:54.147

使用`find` [http://underscorejs.org/#find](http://underscorejs.org/#find)

```
var check = function (thelist, props) {
    var pnames = _.keys(props);
    return _.find(thelist, function (obj) {
        return _.all(pnames, function (pname) {
            return obj[pname] == props[pname];
        });
    });
}; 
```

# r - 在R中转换时间间隔

> ID：10698342
> 
> 赞同：1
> 
> 时间：2012-05-22T08:23:54.380
> 
> 标签：r, time, format, intervals

我对R的知识和经验有限，所以请多多包涵。

我有以下形式的持续时间测量：

d+h:m:ss

例如 3+23:12:11.931139，其中 d=天，h=小时，m=分钟，ss=十进制秒。我想创建这些值的直方图。

有没有一种简单的方法可以将此类字符串输入转换为数字形式，例如秒？我发现的所有信息似乎都针对日期时间对象。

理想情况下，我希望能够在命令行上将数据列表通过管道传输到 R，从而动态创建直方图。

干杯

洛里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:50:35.837

我会这样做：

```
str = "3+23:12:11.931139"    
result = sum(as.numeric(unlist(strsplit(str, "[:\\+]", perl = TRUE))) * c(24*60*60, 60*60, 60, 1))
> result
[1] 342731.9 
```

然后，您可以将其包装成一个函数并应用于列表或向量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T08:56:26.177

基于[SO](https://stackoverflow.com/questions/2150138/how-to-parse-milliseconds-in-r)的另一种解决方案：

```
op <- options(digits.secs=10)
z <- strptime("3+23:12:11.931139", "%d+%H:%M:%OS")
vec_z <- z + rnorm(100000)
hist(vec_z, breaks=20) 
```

简短说明：首先，我以显示毫秒的方式设置选项。现在，如果你`z`在控制台中输入，你会得到“2012-05-03 23:12:11.93113”。然后，我将您的字符串解析为日期对象。然后我创建更多日期并绘制直方图。我认为对您来说重要的一步是解析，`strptime`应该可以帮助您

# wordpress - Wordpress Nextgen Gallery 幻灯片 - 如何添加简单的导航按钮/箭头？

> ID：10698344
> 
> 赞同：1
> 
> 时间：2012-05-22T08:24:20.170
> 
> 标签：wordpress, jquery-plugins, nextgen-gallery

我希望在 Wordpress 网站中使用 Nextgen Gallery 幻灯片来显示包含 50 多张高分辨率图像的大型图像库，但 Nextgen 库仅允许通过单击图像前进到库中的下一张图像。没有导航按钮或箭头可以让人们在画廊中来回走动。我浏览了整个网络，不幸的是我的 jQuery 知识还没有达到我自己解决这个问题的标准。

我正在尝试使 Nextgen Gallery 幻灯片看起来像 Nivo Slider 所做的那样 - [http://nivo.dev7studios.com/demos/](http://nivo.dev7studios.com/demos/) - 带有 prev/next 箭头和分页按钮

我使用 Nextgen Gallery 的原因是它加载图像的方式——一次加载 3 到 4 张图像，这大大减少了页面加载时间。由于试图一次完成所有图像的加载，其他提供导航功能的图像库会冻结主页。

编辑：我们远离 Nextgen Flash 画廊功能

任何帮助将不胜感激！凯拉

# ruby-on-rails - 如何处理过期的 Facebook 访问令牌以发布活动

> ID：10698347
> 
> 赞同：0
> 
> 时间：2012-05-22T08:24:24.267
> 
> 标签：ruby-on-rails, facebook, android-activity, facebook-opengraph, facebook-access-token

将活动发布到 opengraph 时我遇到了一些问题。例如：

*   用户 A 在我的应用程序中登录并对文章 XX 发表评论，然后将活动发布到他们的 Facebook 个人资料
*   然后..用户注销facebook，这将[自动过期](https://developers.facebook.com/roadmap/offline-access-removal/)他们的access_token
*   用户 A 仍然登录我的应用程序并发表另一条评论，当然该活动不会发布到他的 Facebook 个人资料，因为他已从 Facebook 注销

我想做的是：

当用户 A 注销 facebook，然后在我的应用程序中对文章发表评论。然后用户 A 再次登录 facebook，活动将发布到他们的 facebook 个人资料中。我相信这是可能的。因为[http://www.foodspotting.com/](http://www.foodspotting.com/)可以做到这一点.. 但我不知道该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:21:24.887

如果您是 Web 应用程序，则在 JS SDK 中调用 FB.getLoginStatus() 将为您获取新的访问令牌。

否则，您需要再次让用户通过身份验证流程。

[http://developers.facebook.com/docs/authentication/client-side/](http://developers.facebook.com/docs/authentication/client-side/)

# powershell - Powershell：其中 {_.Name 不在 $object} 中

> ID：10698348
> 
> 赞同：9
> 
> 时间：2012-05-22T08:24:25.303
> 
> 标签：powershell, filtering

我正在构建一个列出所有非活动计算机帐户的脚本。我想从结果中排除一些系统。

我有一个包含所有要排除的系统的文本文件（每行一个系统名）。所有项目都存储在属性名称为“name”的对象中。所以 $excluded 将包含：

```
name
----
system1
system2 
```

要列出所有非活动系统，我使用 Search-ADAccount cmdlet：

```
$InactiveComputers = Search-ADAccount -AccountInactive -TimeSpan 90 -ComputersOnly | Where {$_.Enabled -eq $true} 
```

当然，我可以逐个循环所有结果，但是有没有一种简单的方法可以直接从结果中排除系统？我感觉可以使用 select-object 或 where-object，但我不知道如何与对象中的结果进行比较。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-04-14T21:13:46.370

您在标题中使用它基本上是正确的：“其中 {_.Name 不在 $object} 中”

语法有点不同。将其通过管道传输到以下

```
Where { !($_.Name -in $excluded) } 
```

或者

```
Where { $_.Name -notin $excluded } 
```

两者似乎都在控制台中给出了相同的结果。快乐编码！

**注意：在 PSv2 和 v3 上对此进行了测试。**

我在寻找答案时遇到了这个问题，并认为我会为遇到此问题的其他人更新这些选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T08:31:07.123

导入排除文件（作为 csv）并使用 -notcontains 运算符：

```
$names = Import-csv exclude.txt | Foreach-Object {$_.Name} 

$InactiveComputers = Search-ADAccount -AccountInactive -TimeSpan 90 -ComputersOnly | Where {$_.Enabled -eq $true -and $names -notcontains $_.Name} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T08:33:08.573

我认为您可以使用`-notcontains`（[TechNet 文章](http://technet.microsoft.com/en-us/library/ee692798.aspx)）运算符：

```
$InactiveComputers = Search-ADAccount -AccountInactive -TimeSpan 90 -ComputersOnly | Where {$_.Enabled -eq $true -and $excluded -notcontains $_.name } 
```

# xss - 了解 HTTPOnly 标志的预期行为

> ID：10698349
> 
> 赞同：2
> 
> 时间：2012-05-22T08:24:29.420
> 
> 标签：xss, setcookie, httpcookie, httponly

我对 cookie 中的 HTTPOnly 属性有点困惑。我知道它的主要用途是防止 XSS 攻击。让我们假设有一个 Web 应用程序为 cookie 设置了 httponly。为此，我使用了 Fiddler 之类的拦截代理。但是在所有后续事务中，cookie 都没有附带 httponly 标志。这是一个像设置一次一样的功能，整个会话都被 httponly 标志覆盖......或者这是一个实现缺陷。但是，当通过 cookie 管理器插件进行监控时，属性显示 httponly 已启用。我的问题是它是否启用了为什么 cookie 管理器显示它已启用但不是拦截代理，这是正常的预期行为还是错误的实现。请帮我理解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:23:20.563

HttpOnly 由服务器在 Set-Cookie 标头中发送，以指示浏览器不要使 cookie 可用于 javascript。浏览器仍将通过 http 连接发送它。Set-Cookie 标头可以包含 cookie 的各种指令，例如它们何时过期、它们的域、路径、它们是否应该只通过 https（安全标志）和 HttpOnly 发送。这些都是从服务器到浏览器的指令，因此浏览器没有必要在每次请求时将它们发送回服务器。

# titanium - 我可以在没有不需要的权限的情况下使用 zxing 库吗？

> ID：10698352
> 
> 赞同：0
> 
> 时间：2012-05-22T08:24:33.993
> 
> 标签：titanium, zxing

我在我的 Titanium Android 应用程序上使用条码扫描器模块来扫描条码。但是，由于这个库，我的应用程序向用户请求了太多权限，其中包括 READ_HISTORY_BOOKMARKS 和 WRITE_CONTACT。显然，这对于最终用户来说是不必要的并且过于干扰。有什么办法可以删除一些权限？我已经尝试过编辑自定义 AndroidManifest 文件。但它总是在 .gen 文件中添加这些权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:37:30.263

您正在使用 Titanium 构建应用程序。Titanium 不使用 Androidmanifest。它可能是由 Titanium 生成的，但未使用。

您需要编辑 Tiapp.xml 文件，并从那里删除您不需要的权限。这样，它不应该回来。

但正如 Sean Owen 建议的那样，不要复制粘贴应用程序并将其用于自己的目的。如果您只需要一个模块，请自己实现该模块，然后从那里使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:01:22.853

您可以通过获取生成的清单文件并将其粘贴到 tiapp.xml 中来维护 Titanium 中的自定义清单文件。Titanium 每次都会使用那个，而不是生成的那个。在此处阅读有关其工作原理的更多信息[http://developer.appcelerator.com/doc/mobile/android-custom-androidmanifest](http://developer.appcelerator.com/doc/mobile/android-custom-androidmanifest)

# android - 自定义图库：图库中的 ScrollView：所选项目具有覆盖颜色

> ID：10698353
> 
> 赞同：1
> 
> 时间：2012-05-22T08:24:37.527
> 
> 标签：android, android-layout, android-gallery

我在[这里](https://stackoverflow.com/questions/5286115/scrollview-inside-gallery-both-scrolling-independently)使用自定义画廊。但是当我通过**setSelection()**方法选择一个项目时，所选项目有一个白色覆盖。有什么办法可以预防吗？

# javascript - 如何循环浏览没有 display:none 的元素？

> ID：10698355
> 
> 赞同：2
> 
> 时间：2012-05-22T08:24:39.293
> 
> 标签：javascript, jquery, html

我有一组元素（li），其中一些元素可能通过“.hide()”不可见，也可能不可见。如何仅选择可见元素？

基本上我有一个文本字段，当用户单击或关注它时，会出现一个可能的选项列表，用户可以输入一些东西，并且选项会在相应过滤时缩小，或者用户可以使用向上和向下箭头来滚动浏览可用选项。当一个选项变得不可用时，它会通过“.hide()”“隐藏”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:28:09.950

使用[`:visible`](http://api.jquery.com/visible-selector/)选择器

```
$('li:visible').doSomething() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:27:11.753

jQuery 有一个专门针对这种情况的[选择器。](http://api.jquery.com/visible-selector/)

```
$('li:visible').each(function(x,y){...}); 
```

# hibernate - 如何在 Hibernate 中将两个类映射到一个 DB 表

> ID：10698356
> 
> 赞同：1
> 
> 时间：2012-05-22T08:24:50.630
> 
> 标签：hibernate, hibernate-mapping

我正在学习 Hinbernate，所以如果我可以将两个类映射到一个 DB 表，那么一个想法就通过了。

前任 ：

```
Class Developer {
    String name;
}

Class Manager {
    String name;
} 
```

虽然这两个类都映射到一个表，但假设名称为 Employee，其中一列是 String 数据类型。

Hibernate 是否能够根据我用于创建的类在表中创建行。还是您认为应该有一个鉴别器列来区分类别？

注意：类之间没有继承关系，它们是分开的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:04:55.733

使用xml映射文件时，只需创建两个映射文件Developer.hbm.xml和Manager.hbm.xml，它们都引用同一个数据库表。这样可行。

问题是，您必须确保仅将表行加载为 Developer 或 Manager，但不能同时加载两者。例如，如果您使用`session.createQuery("from Developer")`and加载它们`session.createQuery("from Manager")`，那么您在会话缓存中有两次相同的行。如果先修改更新Developer，再修改更新Manager中的同一行，Developer中的修改丢失，会话缓存不一致。

因此，鉴别器行不是绝对必要的，但强烈推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:56:30.730

好吧，考虑数据库模式，而不是您的对象模型。给定表中的一条记录，任何人（无论是您还是 Hibernate）怎么能说出它实际上是哪个实体？

您将需要引入一些类层次结构并通过添加鉴别器列来指定类型或将这些实体映射到不同的表中来使用[SINGLE_TABLE继承。](http://docs.oracle.com/javaee/5/api/javax/persistence/InheritanceType.html#SINGLE_TABLE)

# java - 如何在 Android 中将 PDF 页面转换为图像？

> ID：10698360
> 
> 赞同：26
> 
> 时间：2012-05-22T08:24:58.577
> 
> 标签：java, android, pdf

我需要做的就是获取一个（本地保存的）`PDF-document`并将**其中的一个或所有页面转换为**JPG 或 PNG 等图像格式。

我已经尝试了很多 PDF 渲染/查看解决方案，例如[APV PDF Viewer](http://code.google.com/p/apv/)、[APDFViewer](http://code.google.com/p/apdfviewer/)、[droidreader](http://code.google.com/p/droidreader/)、[android-pdf](http://code.google.com/p/android-pdf/)、[MuPdf](https://stackoverflow.com/questions/10070137/pdf-viewer-using-mupdf-library/10071012#10071012)等等，但到目前为止还没有弄清楚**如何将 pdf 页面转换为图像？**.

编辑：另外，我宁愿拥有一个 PDF 到图像转换器，而不是一个我需要编辑以将 PDF 转换为图像的 PDF 渲染器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-14T08:38:54.557

要支持 API 8 及更高版本，请执行以下操作：

使用此库：[android-pdfview](https://github.com/JoanZapata/android-pdfview)和以下代码，您可以可靠地将 PDF 页面转换为图像（JPG、PNG）：

```
DecodeServiceBase decodeService = new DecodeServiceBase(new PdfContext());
decodeService.setContentResolver(mContext.getContentResolver());

// a bit long running
decodeService.open(Uri.fromFile(pdf));

int pageCount = decodeService.getPageCount();
for (int i = 0; i < pageCount; i++) {
    PdfPage page = decodeService.getPage(i);
    RectF rectF = new RectF(0, 0, 1, 1);

    // do a fit center to 1920x1080
    double scaleBy = Math.min(AndroidUtils.PHOTO_WIDTH_PIXELS / (double) page.getWidth(), //
            AndroidUtils.PHOTO_HEIGHT_PIXELS / (double) page.getHeight());
    int with = (int) (page.getWidth() * scaleBy);
    int height = (int) (page.getHeight() * scaleBy);

    // you can change these values as you to zoom in/out
    // and even distort (scale without maintaining the aspect ratio)
    // the resulting images

    // Long running
    Bitmap bitmap = page.renderBitmap(with, height, rectF);

    try {
        File outputFile = new File(mOutputDir, System.currentTimeMillis() + FileUtils.DOT_JPEG);
        FileOutputStream outputStream = new FileOutputStream(outputFile);

        // a bit long running
        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);

        outputStream.close();
    } catch (IOException e) {
        LogWrapper.fatalError(e);
    }
} 
```

你应该在后台完成这项工作，即使用一个`AsyncTask`或类似的东西，因为相当多的方法需要计算或 IO 时间（我在评论中标记了它们）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T09:12:20.910

您需要查看此项目的开源项目以获得相同的要求，这也有助于您做更多的事情。

项目：[**PdfRenderer**](http://grepcode.com/project/repo1.maven.org/maven2/org.swinglabs/pdf-renderer/)

包中有一个名为[**PDFPage.java**](http://www.jarvana.com/jarvana/view/org/swinglabs/pdf-renderer/1.0.5/pdf-renderer-1.0.5-javadoc.jar!/index.html)的Java 类`pdfview`。该类有一个方法来获取页面的图像。

我也在我的测试项目中实现了同样的东西，Java 代码就[**在这里**](http://pastebin.com/vmFU0fzD)。我创建了一种方法`showPage`，它接受页面编号和缩放级别并将该页面返回为`Bitmap`.

希望这可以帮到你。您只需要为此获取该项目或 JAR，阅读文档齐全的 JAVADOC 以获得相同的内容，然后尝试像我一样实现相同的内容。

慢慢来，快乐编码 :)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-28T16:31:39.350

从 Android API 21 [PdfRenderer](https://developer.android.com/reference/android/graphics/pdf/PdfRenderer.html)开始就是你要找的东西。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-02-02T09:42:02.060

使用库[https://github.com/barteksc/PdfiumAndroid](https://github.com/barteksc/PdfiumAndroid)

```
public Bitmap getBitmap(File file){
 int pageNum = 0;
            PdfiumCore pdfiumCore = new PdfiumCore(context);
            try {
                PdfDocument pdfDocument = pdfiumCore.newDocument(openFile(file));
                pdfiumCore.openPage(pdfDocument, pageNum);

                int width = pdfiumCore.getPageWidthPoint(pdfDocument, pageNum);
                int height = pdfiumCore.getPageHeightPoint(pdfDocument, pageNum);

                // ARGB_8888 - best quality, high memory usage, higher possibility of OutOfMemoryError
                // RGB_565 - little worse quality, twice less memory usage
                Bitmap bitmap = Bitmap.createBitmap(width , height ,
                        Bitmap.Config.RGB_565);
                pdfiumCore.renderPageBitmap(pdfDocument, bitmap, pageNum, 0, 0,
                        width, height);
                //if you need to render annotations and form fields, you can use
                //the same method above adding 'true' as last param

                pdfiumCore.closeDocument(pdfDocument); // important!
                return bitmap;
            } catch (IOException ex) {
                ex.printStackTrace();
            }
            return null;
}

 public static ParcelFileDescriptor openFile(File file) {
        ParcelFileDescriptor descriptor;
        try {
            descriptor = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_ONLY);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
            return null;
        }
        return descriptor;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-01T08:35:07.047

从下面的代码中，您可以使用 PDFRender 从 PDF 中将所有页面提取为图像 (PNG) 格式：

```
// This method is used to extract all pages in image (PNG) format.
    private void getImagesFromPDF(File pdfFilePath, File DestinationFolder) throws IOException {

        // Check if destination already exists then delete destination folder.
        if(DestinationFolder.exists()){
            DestinationFolder.delete();
        }

        // Create empty directory where images will be saved.
        DestinationFolder.mkdirs();

        // Reading pdf in READ Only mode.
        ParcelFileDescriptor fileDescriptor = ParcelFileDescriptor.open(pdfFilePath, ParcelFileDescriptor.MODE_READ_ONLY);

        // Initializing PDFRenderer object.
        PdfRenderer renderer = new PdfRenderer(fileDescriptor);

        // Getting total pages count.
        final int pageCount = renderer.getPageCount();

        // Iterating pages
        for (int i = 0; i < pageCount; i++) {

            // Getting Page object by opening page.
            PdfRenderer.Page page = renderer.openPage(i);

            // Creating empty bitmap. Bitmap.Config can be changed.
            Bitmap bitmap = Bitmap.createBitmap(page.getWidth(), page.getHeight(),Bitmap.Config.ARGB_8888);

            // Creating Canvas from bitmap.
            Canvas canvas = new Canvas(bitmap);

            // Set White background color.
            canvas.drawColor(Color.WHITE);

            // Draw bitmap.
            canvas.drawBitmap(bitmap, 0, 0, null);

            // Rednder bitmap and can change mode too.
            page.render(bitmap, null, null, PdfRenderer.Page.RENDER_MODE_FOR_DISPLAY);

            // closing page
            page.close();

            // saving image into sdcard.
            File file = new File(DestinationFolder.getAbsolutePath(), "image"+i + ".png");

            // check if file already exists, then delete it.
            if (file.exists()) file.delete();

            // Saving image in PNG format with 100% quality.
            try {
                FileOutputStream out = new FileOutputStream(file);
                bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
                Log.v("Saved Image - ", file.getAbsolutePath());
                out.flush();
                out.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
```

您可以通过以下方式调用此方法：

```
// Getting images from Test.pdf file.
        File source = new File(Environment.getExternalStorageDirectory() + "/" + "Test" + ".pdf");

        // Images will be saved in Test folder.
        File destination = new File(Environment.getExternalStorageDirectory() + "/Test");

        // Getting images from pdf in png format.
        try {
            getImagesFromPDF(source, destination);
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

干杯!

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-25T18:03:21.873

我会说你一个简单的技巧不是一个完整的解决方案。一旦你成功渲染了 pdf 页面，你将从屏幕上得到它的位图，如下所示

```
View view = MuPDFActivity.this.getWindow().getDecorView();
if (false == view.isDrawingCacheEnabled()) {
    view.setDrawingCacheEnabled(true);
}
Bitmap bitmap = view.getDrawingCache(); 
```

然后你可以保存这个位图，也就是你的pdf页面作为图片保存在本地

```
try {
    new File(Environment.getExternalStorageDirectory()+"/PDF Reader").mkdirs();
    File outputFile = new File(Environment.getExternalStorageDirectory()+"/PDF Reader", System.currentTimeMillis()+"_pdf.jpg");
    FileOutputStream outputStream = new FileOutputStream(outputFile);

    // a bit long running
    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);
        outputStream.close();
} catch (IOException e) {
    Log.e("During IMAGE formation", e.toString());
} 
```

就是这样，希望你能帮助这个。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-29T19:32:02.740

使用 AppCompat 等 Android 默认库，您可以将所有 PDF 页面转换为图像。这种方式非常快速且经过优化。**以下代码用于获取 PDF 页面的单独图像**。这是非常快速和快速的。

我已经实现如下：

```
ParcelFileDescriptor fileDescriptor = ParcelFileDescriptor.open(new File("pdfFilePath.pdf"), MODE_READ_ONLY);
    PdfRenderer renderer = new PdfRenderer(fileDescriptor);
    final int pageCount = renderer.getPageCount();
    for (int i = 0; i < pageCount; i++) {
        PdfRenderer.Page page = renderer.openPage(i);
        Bitmap bitmap = Bitmap.createBitmap(page.getWidth(), page.getHeight(),Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);
        canvas.drawColor(Color.WHITE);
        canvas.drawBitmap(bitmap, 0, 0, null);
        page.render(bitmap, null, null, PdfRenderer.Page.RENDER_MODE_FOR_DISPLAY);
        page.close();

        if (bitmap == null)
            return null;

        if (bitmapIsBlankOrWhite(bitmap))
            return null;

        String root = Environment.getExternalStorageDirectory().toString();
        File file = new File(root + filename + ".png");

        if (file.exists()) file.delete();
        try {
            FileOutputStream out = new FileOutputStream(file);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
            Log.v("Saved Image - ", file.getAbsolutePath());
            out.flush();
            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

==================================================== =====

```
private static boolean bitmapIsBlankOrWhite(Bitmap bitmap) {
    if (bitmap == null)
        return true;

    int w = bitmap.getWidth();
    int h = bitmap.getHeight();
    for (int i =  0; i < w; i++) {
        for (int j = 0; j < h; j++) {
            int pixel =  bitmap.getPixel(i, j);
            if (pixel != Color.WHITE) {
                return false;
            }
        }
    }
    return true;
} 
```

我已经在另一个问题中发布了它：P

链接是 - [https://stackoverflow.com/a/58420401/12228284](https://stackoverflow.com/a/58420401/12228284)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-07T13:45:34.510

最后我找到了非常简单的解决方案，从[这里](https://github.com/JoanZapata/android-pdfview)下载库。

使用以下代码从 PDF 中获取图像：

```
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.RectF;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Environment;
import android.provider.MediaStore;

import org.vudroid.core.DecodeServiceBase;
import org.vudroid.core.codec.CodecPage;
import org.vudroid.pdfdroid.codec.PdfContext;

import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.util.ArrayList;

/**
 * Created by deepakd on 06-06-2016.
 */
public class PrintUtils extends AsyncTask<Void, Void, ArrayList<Uri>>
{
    File file;
    Context context;
    ProgressDialog progressDialog;

    public PrintUtils(File file, Context context)
    {

        this.file = file;
        this.context = context;
    }

    @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
        // create and show a progress dialog
        progressDialog = ProgressDialog.show(context, "", "Please wait...");
        progressDialog.show();
    }

    @Override
    protected ArrayList<Uri> doInBackground(Void... params)
    {
        ArrayList<Uri> uris = new ArrayList<>();

        DecodeServiceBase decodeService = new DecodeServiceBase(new PdfContext());
        decodeService.setContentResolver(context.getContentResolver());
        // a bit long running
        decodeService.open(Uri.fromFile(file));
        int pageCount = decodeService.getPageCount();
        for (int i = 0; i < pageCount; i++)
        {
            CodecPage page = decodeService.getPage(i);
            RectF rectF = new RectF(0, 0, 1, 1);
            // do a fit center to A4 Size image 2480x3508
            double scaleBy = Math.min(UIUtils.PHOTO_WIDTH_PIXELS / (double) page.getWidth(), //
                    UIUtils.PHOTO_HEIGHT_PIXELS / (double) page.getHeight());
            int with = (int) (page.getWidth() * scaleBy);
            int height = (int) (page.getHeight() * scaleBy);
            // Long running
            Bitmap bitmap = page.renderBitmap(with, height, rectF);
            try
            {
                OutputStream outputStream = FileUtils.getReportOutputStream(System.currentTimeMillis() + ".JPEG");
                // a bit long running
                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);
                outputStream.close();
               // uris.add(getImageUri(context, bitmap));
                uris.add(saveImageAndGetURI(bitmap));
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }
        }
        return uris;
    }

    @Override
    protected void onPostExecute(ArrayList<Uri> uris)
    {
        progressDialog.hide();
        //get all images by uri 
        //ur implementation goes here
    }

    public void shareMultipleFilesToBluetooth(Context context, ArrayList<Uri> uris)
    {
        try
        {
            Intent sharingIntent = new Intent();
            sharingIntent.setAction(Intent.ACTION_SEND_MULTIPLE);
            sharingIntent.setType("image/*");
           // sharingIntent.setPackage("com.android.bluetooth");
            sharingIntent.putExtra(Intent.EXTRA_STREAM, uris);
            context.startActivity(Intent.createChooser(sharingIntent,"Print PDF using..."));
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    private Uri saveImageAndGetURI(Bitmap finalBitmap) {
        String root = Environment.getExternalStorageDirectory().toString();
        File myDir = new File(root + "/print_images");
        myDir.mkdirs();
        String fname = "Image-"+ MathUtils.getRandomID() +".jpeg";
        File file = new File (myDir, fname);
        if (file.exists ()) file.delete ();
        try {
            FileOutputStream out = new FileOutputStream(file);
            finalBitmap.compress(Bitmap.CompressFormat.JPEG, 100, out);
            out.flush();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

        return Uri.parse("file://"+file.getPath());
    }

} 
```

FileUtils.java

```
package com.airdata.util;

import android.net.Uri;
import android.os.Environment;
import android.support.annotation.NonNull;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.OutputStream;

/**
 * Created by DeepakD on 21-06-2016.
 */
public class FileUtils
{

    @NonNull
    public static OutputStream getReportOutputStream(String fileName) throws FileNotFoundException
{
    // create file
    File pdfFolder = getReportFilePath(fileName);
    // create output stream
    return new FileOutputStream(pdfFolder);
}

    public static Uri getReportUri(String fileName)
    {
        File pdfFolder = getReportFilePath(fileName);
        return Uri.fromFile(pdfFolder);
    }
    public static File getReportFilePath(String fileName)
    {
        /*File file = new File(Environment.getExternalStoragePublicDirectory(
                Environment.DIRECTORY_DOWNLOADS), FileName);*/
        File file = new File(Environment.getExternalStorageDirectory() + "/AirPlanner/Reports");
        //Create report directory if does not exists
        if (!file.exists())
        {
            //noinspection ResultOfMethodCallIgnored
            file.mkdirs();
        }
        file = new File(Environment.getExternalStorageDirectory() + "/AirPlanner/Reports/" + fileName);
        return file;
    }
} 
```

您可以在图库或 SD 卡中查看转换后的图像。如果您需要任何帮助，请告诉我。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-04T16:36:32.440

在经历并尝试了所有答案之后，对于所有 PDF 文件，没有一个对我有用。自定义字体 PDF 文件中存在渲染问题。然后我尝试使用[library](https://github.com/barteksc/AndroidPdfViewer/)。我从 NickUncheck 的从所有 PDF 页面获取图像的答案中获得灵感。

代码如下：

在您的应用程序 build.gradle 文件中添加以下依赖项：

```
implementation 'com.github.barteksc:android-pdf-viewer:3.2.0-beta.1' 
```

PDF页面转图片的代码：

```
 public static List<Bitmap> renderToBitmap(Context context, String filePath) {
            List<Bitmap> images = new ArrayList<>();
            PdfiumCore pdfiumCore = new PdfiumCore(context);
            try {
                File f = new File(pdfPath);
                ParcelFileDescriptor fd = ParcelFileDescriptor.open(f, ParcelFileDescriptor.MODE_READ_ONLY);
                PdfDocument pdfDocument = pdfiumCore.newDocument(fd);
                final int pageCount = pdfiumCore.getPageCount(pdfDocument);
                for (int i = 0; i < pageCount; i++) {
                    pdfiumCore.openPage(pdfDocument, i);
                    int width = pdfiumCore.getPageWidthPoint(pdfDocument, i);
                    int height = pdfiumCore.getPageHeightPoint(pdfDocument, i);
                    Bitmap bmp = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
                    pdfiumCore.renderPageBitmap(pdfDocument, bmp, i, 0, 0, width, height);
                    images.add(bmp);
                }
                pdfiumCore.closeDocument(pdfDocument);
            } catch(Exception e) {
                //todo with exception
            }
     return images;
   } 
```

到目前为止，我尝试过的所有 PDF 文件都适用于我。

# c# - 在 C# 中的字符串中使用 int 数组

> ID：10698363
> 
> 赞同：2
> 
> 时间：2012-05-22T08:25:10.730
> 
> 标签：c#

我有一个 int 数组，例如 {1,2,3,4} 值。

例如，我想将这些数字放入我的列表框中，如下所示：

```
listBox2.Items.Add("After Inserting (" + page[i].ToString() + ')' + <use all my numbers like this : 1234 here>+"Page Fault = " + pf.ToString()); 
```

输出 ：

```
After Inserting (3) 1234 page fault = 5 
```

1234 只是一个例子。我的阵列要大得多。

我怎么能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:28:09.367

您可以使用[`String.Join`](http://msdn.microsoft.com/en-us/library/dd992421.aspx)（实际上是`IEnumerable<T>`重载）：

```
String joined = String.Join("", yourArray); 
```

> 我是 C# 的新手，我怎么不知道如何将字符串放在文本中

您可以使用[`String.Format`](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx)来构建文本并提高可读性：

```
var inserted = page[i].ToString();
var allInserted = String.Join("", yourArray);
var pageFault = pf.ToString();
var itemText = String.Format("After Inserting ({0}) {1} page fault = {2}"
                             ,inserted, allInserted, pageFault);
listBox2.Items.Add(itemText); 
```

**编辑 2**：

> 我可以替换一些字符而不是数组中的一个数字吗？我的数组：{1,2,3,4,-1"} 输出：1,2,3,4,empty

是的，您可以替换输出：

```
String.Join("", yourArray.Where(i => i != -1)); 
```

**编辑 3**：

> 我了解如何排除-1，但我不明白如何用它替换某些东西……例如“空”而不是-1

开始了 ...

```
String.Join(", ", intArray.Select(i => i == -1 ? "empty" : i.ToString())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T08:30:12.130

string.Join 也适用于 ToList()

```
int[] numbers = new int[] {1,2,3,4,5};
string s = string.Join("", numbers.ToList());
Console.WriteLine(s); 
```

输出为=“12345”

编辑：我不知道你的数组的名称，所以我仍然使用上面的数字示例

```
listBox2.Items.Add("After Inserting (" + page[i].ToString() + ") " + 
                    string.Join("", numbers.ToList()) + 
                    " Page Fault = " + pf.ToString()); 
```

编辑：

排除像 -1 这样的数字

```
int[] numeri = new int[] {1,2,3,4,5,-1};
string s = string.Join(",", numeri.Where(i => i != -1).ToList());
Console.WriteLine(s); 
```

注意，添加了逗号来分隔数字

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T08:27:56.417

```
string.Join(", ", intArray.Select(i => i.ToString())) 
```

# ios - 以编程方式启用/禁用相机应用程序

> ID：10698364
> 
> 赞同：0
> 
> 时间：2012-05-22T08:25:18.010
> 
> 标签：ios, ios5, camera

有没有办法以编程方式限制 iPhone 4S 5.0.1 上的相机访问？

我正在构建一个简单的应用程序，带有一个按钮来启用/禁用相机拍摄。
我相信它应该以与设置应用程序中的限制类似的方式工作。
我不打算部署它，所以我不介意苹果的批准。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:23:37.067

没有像 android 这样的基于策略的编程来禁用相机。它只可能在有根的 iphone 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T07:10:56.820

我认为唯一的选择是使用 MDM 解决方案

# mysql - 仅使用一个选择在随机排序的子查询上重写 group-by

> ID：10698366
> 
> 赞同：2
> 
> 时间：2012-05-22T08:25:25.830
> 
> 标签：mysql, sql, select, random, sql-order-by

事情就是这样。我有 3 个表，我正在做这个查询：

```
select t.nomefile, t.tipo_nome, t.ordine
from
(select nomefile, tipo_nome, categorie.ordine
from t_gallerie_immagini_new as immagini
join t_gallerie_new as collezioni on collezioni.id=immagini.id_ref
join t_gallerie_tipi as categorie on collezioni.type=categorie.id
order by RAND()
) as t
group by t.tipo_nome
order by t.ordine 
```

它应用于 3 个表，都在关系 1-N 中，需要将它们连接起来，然后从更高级别表中的每个不同结果中获取 1 个随机结果。这个查询工作得很好，问题是我被要求重写这个查询**USING ONLY ONE SELECT**。我已经有了另一种方法，只有一个选择，问题是根据 SQL 语法，GROUP BY 必须在 ORDER BY 之前，所以当你已经只有第一条记录时，随机排序是没有意义的更高级别表中的值。

有人知道如何仅使用一个选择来编写此查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:20:05.730

一般来说，如果我没记错的话，`ORDER BY`像这样的查询的子查询中的子句与允许您根据指定的顺序提取非 GROUP BY 列（在外部查询中）的技术有关。所以你在这里可能不走运，因为这意味着子查询对于这个查询很重要。

好吧，因为在这种特定情况下，选择的顺序是`BY RAND()`而不是特定列/列集，所以通过在同一级别上进行连接和分组，您可能会得到一个非常粗略的等价物，如下所示：

```
select nomefile, tipo_nome, categorie.ordine
from t_gallerie_immagini_new as immagini
join t_gallerie_new as collezioni on collezioni.id=immagini.id_ref
join t_gallerie_tipi as categorie on collezioni.type=categorie.id
group by tipo_nome
order by categorie.ordine 
```

但是，您必须了解为什么这*不是*完全等价的。问题是，MySQL 确实允许您在 GROUP BY 查询中提取非 GROUP BY 列，但如果它们与 GROUP BY 列不相关，则返回的值将是......不，不是*随机*的，使用的术语按[手册](http://dev.mysql.com/doc/refman/5.6/en/group-by-hidden-columns.html "GROUP BY 和 HAVING 隐藏列 (MySQL)")是*不确定*的。另一方面，第一段中提到的技术利用了这样一个事实，即如果行集*在 grouping 之前*明确且明确地排序，则非 GROUP BY 列值将始终相同^*。因此，*不确定性*与“通常”行在分组之前没有明确排序的事实有关。

现在您可能会看到不同之处。原始版本明确地对行进行排序。即使它是`BY RAND()`，它也是故意的，以确保（尽可能）在大多数情况下输出不同的结果。但是修改后的版本被“剥夺”了显式排序，因此您可能会连续多次执行相同的结果，即使它们是“随机的”。

因此，总的来说，由于上述原因，我认为您的问题无法解决，如果您选择使用建议的修改版本之类的东西，那么请注意它的行为可能与原始版本略有不同。

[^*顺便说一句，该技术可能没有得到很好的记录，并且可能是通过经验而不是通过遵循手册找到的。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T12:06:52.973

我无法理解重写此查询的请求背后的原因，但是，我发现有一个解决方案只使用一次“选择”字。这是查询：

```
SELECT g.type, SUBSTRING_INDEX(GROUP_CONCAT(
i.nomefile ORDER BY
RAND()),',',1) nomefile
FROM t_gallerie_new g JOIN t_gallerie_immagini_new i ON g.id=i.id_ref
GROUP BY g.type; 
```

对于任何对此问题感兴趣的人。

注意：使用 GROUP_CONCAT 有几个缺点：不建议在使用中型/大型表时使用此关键字，因为它可能会增加服务器端的负载。另外，GROUP_CONTACT 返回的字符串的大小有一个限制，默认为 1024，因此，需要在 mySql 服务器中修改一个参数，以便能够从该指令接收更大的字符串。

# jquery - 如何在jquery中选择selectedIndex的id

> ID：10698368
> 
> 赞同：2
> 
> 时间：2012-05-22T08:25:39.483
> 
> 标签：jquery, select, indexing

`dropdown`我想在 jquery中选择列表中所选项目的 id

```
networkId = $("#availableFbProfiles").selectedIndex.id; 
```

但控制台上的错误是

```
Cannot read property 'id' of undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:27:44.520

尝试这个：

```
networkId = $("#availableFbProfiles option:selected").prop("id"); 
```

如果您使用的是旧版本的 jQuery (< 1.7) ，请`attr()`使用`prop()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:29:30.650

尝试

```
$("#availableFbProfiles option:selected").get(0).id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T06:59:38.853

```
networkId = $("#availableFbProfiles option:selected").prop(""); 
```

# css - 我可以在悬停时仅更改css3中线性渐变的角度吗？

> ID：10698373
> 
> 赞同：0
> 
> 时间：2012-05-22T08:26:07.200
> 
> 标签：css

所以我在一个元素上有一个线性渐变，当我悬停元素而不再次编写所有规则时，我想将渐变角度更改为倒置。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:21:48.940

[`sass`](http://sass-lang.com/)您可以通过使用和 mixins使其更干燥。

```
@mixin gradient($angle) {
    background: linear-gradient($angle , rgb(23,125,250) 28%, rgb(0,0,0) 80%);
}

#grad {
    @import gradient("bottom");
}

#grad:hover {
    @import gradient("right");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:39:00.507

为什么不？`hover`只需通过在 CSS 中指定伪类来为状态创建规则：

```
#grad {
    background-image: linear-gradient(bottom, rgb(23,125,250) 28%, rgb(0,0,0) 80%);
}
#grad:hover {
    background-image: linear-gradient(right , rgb(23,125,250) 28%, rgb(0,0,0) 80%);
} 
```

如果您希望遵循 DRY 原则，请将这些规则创建为辅助类，而不是将它们附加和分离到元素。这是一个使用 jQuery 的示例：

**CSS：**

```
.grad {
    background-image: linear-gradient(bottom, rgb(23,125,250) 28%, rgb(0,0,0) 80%);
}
.grad-rotated {
    background-image: linear-gradient(right , rgb(23,125,250) 28%, rgb(0,0,0) 80%);
} 
```

**JS：**

```
$('.grad').hover(
    function() {
        $(this).toggleClass('grad', false).toggleClass('grad-rotated', true);
    },
    function() {
        $(this).toggleClass('grad', true).toggleClass('grad-rotated', false);
    }
); 
```

**参考：**

*   [jQuery的`hover()`](http://api.jquery.com/hover/)
*   [`linear-gradient`在 Mozilla 开发者网络上](https://developer.mozilla.org/en/CSS/linear-gradient)
*   [一个不错的，易于使用的 CSS 渐变生成器](http://gradients.glrzad.com/)

***注意：**为方便起见，此处仅显示属性值的基本形式`linear-gradient`，为提供跨浏览器兼容性，请添加供应商特定的前缀属性值（例如`-o-linear-gradient`, `-moz-linear-gradient`）。*

***免责声明：**由于用户代理将更有效地呈现 CSS，通常最好选择基于 CSS 的解决方案而不是基于 JS 的解决方案。*

# php - activecollab 中的模块操作权限

> ID：10698378
> 
> 赞同：0
> 
> 时间：2012-05-22T08:26:23.537
> 
> 标签：php, model, permissions, module, activecollab

我正在研究 activecollab 自定义模块，面临权限问题；我在“on_system_permissions.php”处理程序的帮助下添加了权限。但问题是我如何检查登录用户是否具有特定操作权限的代码..

我从 activecollab 其他模块得到以下代码：

```
class Role extends FwRole implements IHomescreen {

..
..

    function isPeopleManager(){

       $this->getPermissionValue('can_manage_people');

    }
...
...

} 
```

那是检查任何行动的许可吗？或者它只是返回那个动作的一个值？

在上面的课程中，他们使用**$this->并通过****FwRole**扩展了一个类。当我使用`FwRole::getPermissionValue('can_manage_people');`返回时，它给了我 $this 和 object 的错误。

所以我的问题是我们如何检查代码中特定操作的权限以及如何使用 getPermissionValue() 函数来检索权限是或否..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:57:47.600

错误是说您调用 $this 但您不在对象上下文中-那是因为您`getPermissionValue`在**静态**上下文中调用方法...

在您调用的代码中，您`FwRole::getPermissionValue('can_manage_people');`必须这样做：

```
$role = new FwRole; // if it needs a parameter in constructor, call it like new FwRole($param);
$permission_value = $role->getPermissionValue('permission'); 
```

通过创建类 FwRole 的实例，您创建了 FwRole 对象，因此您在对象上下文中并且错误（您提供）消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:04:18.750

`getSystemPermission`当您有一个用户实例时，您可以通过执行方法检查该用户是否具有设置为 Yes 的特定权限：

```
$user = Users::findById(12);

if($user instanceof User) {
  if($user->getSystemPermission('my_permission')) {
    print 'My permission set to Yes';
  } else {
    print 'My permission set to No';
  } // if
} // if 
```

请注意，activeCollab 权限级联（可以相互依赖）。如果您有依赖权限，系统还会检查您是否将父权限设置为是，而不仅仅是这样（例如，`manage_projects`如果您没有`system_access`权限，系统将返回 false 以获得权​​限，因为它依赖于它）。

**更新**

activeCollab 3 中引入了权限级联！

# special-characters - Sikuli脚本中的特殊字符

> ID：10698380
> 
> 赞同：0
> 
> 时间：2012-05-22T08:26:42.740
> 
> 标签：special-characters, sikuli

当我在 Sikuli IDE 中键入时，我正在尝试在 Sikuli 中使用一些法语特殊字符，

```
App.open('C:\\à table\\app.exe') 
```

但我得到这个错误：

```
[log] App.open C:\Ã  table\NDC.exe(0)
[error] App.open failed: C:\Ã  table\NDC.exe not found 
```

似乎 Sikuli 目前无法正确处理 utf-8。我在谷歌上能找到的只是 type() 函数和使用剪贴板的 paste() 相同的问题。

在 App.open 的情况下是否有解决方法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:05:45.297

这个问题的原因似乎是 Python 2.5.X 不正确支持字符编码。必须使用诸如 encode('cp1252')、encode('utf8') 之类的技巧...

由于 Sikuli 是基于基于 Python 2.5.2 的 Jython，所以我们被卡住了！

我希望我生活在一个只使用标准 ASCII 表的国家，我真的讨厌所有这些与代码页和编码相关的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:41:24.507

可以制作一个bat文件，`App.Open('path/to/bat/file.bat')`里面有.exe的路径

# java - 用于制作 Java 程序的代码编辑器软件

> ID：10698387
> 
> 赞同：0
> 
> 时间：2012-05-22T08:27:36.627
> 
> 标签：java, editor, code-formatting, editing, code-editor

我不确定我问的问题是否正确...

到目前为止，我一直在使用 Java 编辑器 (JE) 和 Java SDK 来编译代码。但是在 JE 中编写代码就像在记事本中编写文本一样，它在许多不同的情况下都会返回错误“找不到符号”（我不知道是编辑器返回此错误还是编译器返回此错误）。但是使用起来真的很简单。

我正在寻找一个自动格式化代码的编辑器。例如：将单词“int”、“double”等加粗、更改类名称的颜色、隐藏方法的代码等 我相信有很多编辑器可以做到这一点。

我一直在尝试自己寻找其他编辑，但没有任何运气。可能是因为我搜索的方式不对。

我对 C++ 和 C# 有一定的了解。我一直在使用 MS Visual Studio Express，我真的很喜欢编辑器如何自动格式化代码并允许我隐藏代码的某些部分。

我是 Java 的绝对初学者，所以现在我只制作简单的程序。但是我排列代码的方式导致我经常滚动浏览代码，尤其是当代码很长时，而且很难看清 JE 中的内容。

你能介绍一下你用过的编辑器，解释一下它们的优点和缺点吗？

PS对不起标签，如果它们不够合适。我只能使用 2 个合适的标签...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T08:29:00.713

使用**Eclipse**或**NetBeans**，Java 程序的两个最佳编辑器。

您可以从此链接下载 Eclipse，并[从此](http://netbeans.org/downloads/)[链接](http://www.eclipse.org/downloads/)下载NetBeans

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T08:39:38.277

有许多免费的编辑器 (IDE) 可用，但我最喜欢的是 Eclipse（[在此处](http://www.eclipse.org/downloads/)下载）。

eclipse 最好的地方是它支持你正在寻找的操作。代码高亮没有问题。它还具有代码完成、自动缩进功能，并且您可以格式化您的 java 类，以便它们以您喜欢的方式显示。

不仅如此，还有大量可用于 eclipse 的插件。另请查看入门指南（[此处](http://www.eclipse.org/resources/?category=Getting%20Started)）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T08:39:25.410

免费的成熟 IDE 包括：

*   Eclipse 基金会的 Eclipse
*   Oracle（前 Sun）的 NetBeans
*   甲骨文的 JDeveloper

jetbrains.com 上的 IntelliJ IDEA 是一个花钱的好方法

一些支持代码完成和语法高亮的更简单的文本编辑器是：

*   sublime text 2 (up and commer - 具有大量插件的优秀可扩展框架)
*   杰迪特
*   kate（针对 KDE 爱好者 - linux、Mac OSX 和 Windows 上的 KDE）
*   记事本++
*   文本板

希望这可以帮助。

# php - 如何获得 2 或 3 个径向位置的中点（纬度、经度）

> ID：10698391
> 
> 赞同：2
> 
> 时间：2012-05-22T08:27:52.380
> 
> 标签：php, mysql, objective-c

我尝试使用[hasrsine](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)我无法成功基本上我的问题是我有 3 个地图位置及其 Lat 和 Long 值。我想做的是得到这个三角形的中点。

这是图片

![在此处输入图像描述](../Images/5014380b535048f114e798cf91ba414e.png)

我有 H、F 和 I 点的位置。我需要知道问号的位置。41.040035,28.984026 41.040868,28.985807 41.039136,28.984981

PHP、MYSQL 或 Objective C 这些语言中的任何一种都可以作为答案。甚至建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:13:09.770

我检查了这个例子： http: [//geomidpoint.com/example.html](http://geomidpoint.com/example.html)

并用PHP写了一个函数，希望这有帮助......

[编辑]我忘记转换为弧度进行计算，所以它给出了不同的输出，所以现在它应该可以正常工作了......

```
 <?php

function middlepoint($lat1,$lon1,$lat2,$lon2,$lat3,$lon3){
    $w1=1095.75;$w2=730.5;$w3=365.25;$tw=$w1+$w2+$w3;   //weighting factors

    $x1=cos(floatval(deg2rad($lat1)))*cos(floatval(deg2rad($lon1)));$y1=cos(floatval(deg2rad($lat1)))*sin(floatval(deg2rad($lon1)));$z1=sin(floatval(deg2rad($lat1)));$x2=cos(floatval(deg2rad($lat2)))*cos(floatval(deg2rad($lon2)));$y2=cos(floatval(deg2rad($lat2)))*sin(floatval(deg2rad($lon2)));$z2=sin(floatval(deg2rad($lat2)));$x3=cos(floatval(deg2rad($lat3)))*cos(floatval(deg2rad($lon3)));$y3=cos(floatval(deg2rad($lat3)))*sin(floatval(deg2rad($lon3)));$z3=sin(floatval(deg2rad($lat3)));  //convert lat/long to cartesian (x,y,z) coordinates

    $x = ($x1*$w1+$x2*$w2+$x3*$w3)/$tw;$y=($y1*$w1+$y2*$w2+$y3*$w3)/$tw;$z=($z1*$w1+$z2*$w2+$z3*$w3)/$tw;   //Compute combined weighted cartesian coordinates

    $lon=atan2($y,$x);$hyp=sqrt(pow($x,2)+pow($y,2));$lat=atan2($z,$hyp);   //Convert cartesian coordinate to latitude and longitude for the midpoint

    $midpoint[0] = $lon * (180/pi());$midpoint[1] = $lat * (180/pi());  //Convert from radians to degrees

    return $midpoint;   //return an array(lat,lon);

}

$test = middlepoint(41.040035,28.984026,41.040868,28.985807,41.039136,28.984981);
print_r($test);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:33:02.037

在您工作的规模上，将纬度/经度坐标视为平面坐标并使用欧几里德几何的基本运算来确定位置（例如三角形的中点）不会有任何危害。

您可能还对[重心坐标](http://en.wikipedia.org/wiki/Barycentric_coordinate_system_%28mathematics%29)感兴趣。

# javascript - 使用javascript以斜体显示字符串

> ID：10698393
> 
> 赞同：0
> 
> 时间：2012-05-22T08:27:53.460
> 
> 标签：javascript, string, textbox, italics

我在 xul 中使用多行文本，我需要显示一个字符串。但是，字符串的一部分需要使用斜体，如果在 javascript 中使用 .italics() 方法，则显示的只是闪烁！字符串旁边的标签。有没有另一种方法可以使用 javascript 使字符串斜体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:32:26.140

1.  `<i>`String.prototype.italics() 只是用and包裹文本`</i>`，这仅适用于 HTML 而不是 XUL。
2.  当您说“多行文本”时，您指的`<textbox>`是 XUL 中的元素吗？如果是这样，此包装器不适用于富文本。尝试一些其他元素来包含您的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:32:24.677

如果这适用于 XUL 文档，我不肯定，但您可以尝试样式对象：

```
document.getElementById("myString").style.fontStyle = "italic"; 
```

# java - 我可以在 java 中散列 Map 3 类吗？

> ID：10698397
> 
> 赞同：0
> 
> 时间：2012-05-22T08:28:03.553
> 
> 标签：java, hashmap

```
courses = new ArrayList<Course>();
units = new HashMap<Integer,Unit>();
staffs = new HashMap<Integer,Staff>(); 
```

我可以像这样将单元班和员工班映射到课程班吗？我想将数据作为序列化数据存储到 dat 文件中。

我的场景是这样的。课程单位多，课程主任1人，副主任1人，均来自职工班。

我确实喜欢第一个。问题是我有一个名为 database.java 的类，在那里我有一个这样的方法。

```
public boolean setDatabase(ArrayList<Course> iCourse, Map<Integer,Unit> iUnit) 
```

所以如果我使用这个：

```
courses = new ArrayList<Course>();
units = new HashMap<Integer,Unit>();
staffs = new HashMap<Integer,Staff>(); 
```

我可以在下面试试这个吗？

```
public boolean setDatabase(ArrayList<Course> iCourse, Map<Integer,Unit> iUnit, Map<Integer,Staff> iStaff) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:36:29.027

尝试这个，

```
public final class Course {
    Staff director;
    Staff deputyDirector;
    List<Unit> units;
    ...
} 
```

或者如果你想强制主任和副主任，那么你可以像下面这样子类化你的员工类，

```
public final class Director extends Staff {
    ...
}

public final class DeputyDirector extends Staff {
    ...
} 
```

**注意：**不要创建你的`Staff`类`final`，否则你不能创建这些子类。

然后让你的`Course`班级使用那些特定的班级，如下所示，

```
public final class Course {
    Director director;
    DeputyDirector deputyDirector;
    List<Unit> units;
    ...
} 
```

**[已编辑]**

我不知道应该`setDatabase()`用什么方法。我建议你想一个有意义的名字。但是，如果您按照我的建议，您将能够如下定义您的方法，

```
public boolean setDatabase(List<Course> courses) {
    ...
} 
```

`Course`对象将具有相关的`Staff`和`Unit`与之关联的对象。

# jsf-2 - 使用 Mojarra 2.0.4 问题配置 JBoss AS 7.1.1

> ID：10698401
> 
> 赞同：2
> 
> 时间：2012-05-22T08:28:14.427
> 
> 标签：jsf-2, jboss7.x, mojarra

我在 JBoss AS 5.1.0 GA 上有一个工作 webapp。它使用 Mojarra 2.0.4 罐子。我正在将其迁移到 JBoss AS 7.1.1。此版本的 JBoss 随 2.1.7 一起提供。`META-INF/jboss-deployment-structure.xml`因此，我通过为 2.0.4 定义插槽并将它们与其他依赖项一起称为依赖项来降级 Mojarra 版本。

**jboss-部署-结构.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
  <deployment>
    <exclusions>
          <module name="javax.faces.api" slot="main"/>
          <module name="com.sun.jsf-impl" slot="main"/>
          <module name="javax.faces.api" slot="1.2"/>
          <module name="com.sun.jsf-impl" slot="1.2"/>          
        </exclusions>
        <dependencies>
          <module name="org.hibernate.validator" export="true"/>
          <module name="javax.validation.api" export="true"/>
          <module name="com.google.gson" export="true"/>
          <module name="org.codehaus.jettison" export="true"/>
          <module name="org.jboss.resteasy.resteasy-jaxrs" export="true"/>
          <module name="org.jboss.resteasy.resteasy-jackson-provider" export="true"/>
          <module name="org.apache.log4j" export="true"/>
          <module name="org.jboss.as.web" slot="main" export="true"/>
          <module name="javax.faces.api" slot="2.0.4" export="true"/>
          <module name="com.sun.jsf-impl" slot="2.0.4" export="true"/>       
        </dependencies>
  </deployment>   
 </jboss-deployment-structure> 
```

这导致在部署时引发以下异常

```
12:51:18,761 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-3) Initializing Mojarra 2.0.4 (FCS b09) for context ''
12:51:20,355 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-3) Unsanitized stacktrace from failed start...: javax.faces.FacesException: Class org.jboss.as.web.deployment.jsf.JandexAnnotationProvider is not an instance of com.sun.faces.spi.AnnotationProvider 
```

我参考了[这个](https://issues.jboss.org/browse/AS7-2656)链接并修改了我的依赖项，如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
  <deployment>
        <exclusions>
          <module name="javax.faces.api" slot="main"/>
          <module name="com.sun.jsf-impl" slot="main"/>
          <module name="javax.faces.api" slot="1.2"/>
          <module name="com.sun.jsf-impl" slot="1.2"/>
          <module name="org.jboss.as.web" slot="main" />
        </exclusions>
        <dependencies>
          <module name="org.hibernate.validator" export="true"/>
          <module name="javax.validation.api" export="true"/>
          <module name="com.google.gson" export="true"/>
          <module name="org.codehaus.jettison" export="true"/>
          <module name="org.jboss.resteasy.resteasy-jaxrs" export="true"/>
          <module name="org.jboss.resteasy.resteasy-jackson-provider" export="true"/>
          <module name="org.apache.log4j" export="true"/>
          <module name="org.jboss.as.web" slot="main" export="true"/>
          <module name="javax.faces.api" slot="2.0.4" export="true"/>
          <module name="com.sun.jsf-impl" slot="2.0.4" export="true"/>
          <module name="org.jboss.as.web" slot="main">
          <imports>
            <include path="/org/**" />
            <exclude path="/META-INF/**" />
          </imports>
          </module>
        </dependencies>
  </deployment>   
 </jboss-deployment-structure> 
```

它消除了部署时的错误，但引入了以下运行时异常

```
12:59:19,434 ERROR [stderr] (http--0.0.0.0-8080-4) java.lang.IllegalArgumentException: null source
12:59:19,435 ERROR [stderr] (http--0.0.0.0-8080-4)  at java.util.EventObject.<init>(EventObject.java:38)
12:59:19,436 ERROR [stderr] (http--0.0.0.0-8080-4)  at javax.faces.event.SystemEvent.<init>(SystemEvent.java:71)
12:59:19,444 ERROR [stderr] (http--0.0.0.0-8080-4)  at javax.faces.event.ComponentSystemEvent.<init>(ComponentSystemEvent.java:73) 
```

和

```
12:59:19,489 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/].[Faces Servlet]] (http--0.0.0.0-8080-4) Servlet.service() for servlet Faces Servlet threw exception: java.lang.NullPointerException
    at com.sun.faces.context.PartialViewContextImpl.createPartialResponseWriter(PartialViewContextImpl.java:431) [jsf-impl.jar:2.0.4-b09]
    at com.sun.faces.context.PartialViewContextImpl.access$300(PartialViewContextImpl.java:72) [jsf-impl.jar:2.0.4-b09]
    at com.sun.faces.context.PartialViewContextImpl$DelayedInitPartialResponseWriter.getWrapped(PartialViewContextImpl.java:559) [jsf-impl.jar:2.0.4-b09] 
```

我认为（当然是通过谷歌搜索）异常通常是由三件事引起的

1.  xhtml 中使用了无效/未关闭的标签（错误传播的异常）
2.  会话超时（错误传播的异常）
3.  Tomcat中POST参数的限制

不幸的是，前两个不是原因。我通过验证器运行了错误的 xhtml 页面，发现标记是有效的，我的会话也没有过期。我还增加了`org.apache.tomcat.util.http.Parameters.MAX_COUNT`5000`standalone.xml`以解决第三点。错误仍然存​​在。

我还尝试迁移到默认捆绑的 Mojarra 2.7.1 版本。这阻止了第一个运行时异常，但第二个仍然存在。导致此错误的那些页面的唯一特殊之处在于它们中有 ajax 调用。有趣的是，该应用程序在 AS 5.1.0 GA 上运行良好，所以如果我的标记有误，我在 5.1.0 上也会遇到困难，但事实并非如此。所以无效标记是不可能的。非常感谢任何指针！

**更新**：刚刚发现那行在`PartialViewContextImpl.java:431`显示`ctx.getRenderKit()`正在评估到`null`。不知道*为什么*

**UPDATE2**：事实证明，只有当我在表单中使用纯 html 输入组件时才会看到问题，如果`<input type="text">, <select>`我从 ie 等中删除它们，`<h:form>`或者将它们转换为相应的 JSF 标记，它工作正常。某处出现了严重的问题。我无法确定这是由 jboss、Mojarra 还是特别是我的应用程序引起的。我用一个普通的 JSF 应用程序尝试了它，无论我是否使用 html 输入标签，它都没有错误。所以它是我的应用程序和 jboss 7.x 的组合导致了这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T05:17:00.380

最后！[该问题与此处](http://java.net/jira/browse/JAVASERVERFACES-2376)报告的 Mojarra 2.1.7 中的错误有关

解决方案是为**包含**在`<h:form>`. 我无法理解这个错误似乎与 Mojarra 2.1.7 有关的部分。我为我的应用程序配置的 jars 是 2.0.4 版本，但出现了错误。

# mysql - mysql复杂的sql 2

> ID：10698406
> 
> 赞同：1
> 
> 时间：2012-05-22T08:28:50.943
> 
> 标签：mysql

几周前我问了一个关于mysql复杂语句的问题，得到了很好的回应：[mysql complex sql](https://stackoverflow.com/questions/10191535/mysql-complicated-sql)

此处有该语句的 sql fiddle 张贴[。](http://www.sqlfiddle.com/#!2/34906/58)

一切都很好，但我现在需要扩展/调整语句以选择具有相同subjects.parent_id或subjects.id的问题

主题表是简单的 id,subject,parent_id - 如果 parent_id 为 0，则主题本身就是父项。我需要从主题（如果它没有父项，即 parent_id = 0）和所有以它的 id 作为 parent_id 的主题返回所有问题，其中包含 4 个随机答案。sql fiddle 的当前 sql 返回带有随机答案的问题，但仅针对特定主题。

希望这是有道理的，但如果没有，请询​​问。

谢谢

史蒂夫

# file - 通过项目文件从 TFS 中排除文件

> ID：10698407
> 
> 赞同：8
> 
> 时间：2012-05-22T08:28:53.740
> 
> 标签：file, tfs, project

我正在寻找从 TFS 中排除我生成的 VS 项目文件的一些文件的可能性。我知道之后可能会使用 .vspscc 文件。

但我想要的是，在我将项目添加到 TFS 之前，我可以告诉 VS 项目文件，其中一些文件不允许添加到 TFS。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T09:29:28.017

TFS 中有几个级别的排除文件：

1.  通过在签入对话框中手动排除文件或文件夹。
2.  手动排除`Add items to Folder`对话框中的文件或文件夹。 ![tfs scm 手动排除](../Images/dfb3cf6c3b7b62f7fbca5ad57c777dec.png)
3.  在`Add items to Folder`对话框中> `Automatically exclude from source control`： ![tfs 排除](../Images/f9ea85d1f71b4b27b1ed39aef6488f84.png)
    *注意*：可以[使用注册表修改](http://blog.accentient.com/2011/04/14/ExcludingFoldersAndFilesWhenAddingToSourceControl.aspx)默认项。

4.  在团队项目源代码控制级别上使用[**签入策略**](https://stackoverflow.com/a/9749057/147211)。

5.  在源代码管理权限级别： `Source Control`> 标记文件夹 > `Security`> 拒绝签入权限 ![tfs scm 权限](../Images/be970308f4b0e0d7adca8989ffc33f59.png)
6.  在工作区级别通过**[隐藏](https://stackoverflow.com/a/9742947/147211)**.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-06T03:37:33.943

不确定 KMoraz 接受的答案。#1 和 #2 似乎不是永久性的，#3 甚至没有出现在我面前（我使用的是 VS2012），#4 和 #5 需要权限（我在 CodePlex 上没有）和 #6甚至不相关（因为您无法隐藏未首先签入的内容）。

我知道您的问题是关于添加之前的问题，但我认为创建“.tfignore”文件的答案仅适用于 TFS 2012。

对我来说，我必须在项目文件夹中找到“.vspscc”文件（我知道你已经说过）并寻找这一行：

```
"NUMBER_OF_EXCLUDED_FILES" = "0" 
```

就我而言，我想排除 TypeScript 生成的文件，所以我添加了这个：

```
"NUMBER_OF_EXCLUDED_FILES" = "3"
"EXCLUDED_FILE0" = "app.js"
"EXCLUDED_FILE1" = "app.js.map"
"EXCLUDED_FILE2" = "app.min.js" 
```

我真的希望他们能直截了当，并以更易于访问的方式将您正在寻找的功能添加到 VS。

...是的，在“文件->源代码管理->高级”中有一个用于排除文件的菜单，但它应该在上下文菜单中，并且不适用于嵌套文件（例如 app.* 的[对于 .ts 文件]）。

# javascript - 自动创建带有锚标记的列表视图项

> ID：10698409
> 
> 赞同：0
> 
> 时间：2012-05-22T08:28:55.747
> 
> 标签：javascript, jquery, html, ajax, jquery-mobile

我正在用 Jquery Mobile 制作一个 webapp。我从网络服务功能中取回了我的数据。现在要在我的网页中获取这些数据，我正在使用 ajax 调用。

```
$('[data-role=page]').live('pageshow', function () {
var userId =  $("#userId").val();
        $.ajax({
            url: "~SYSTEM.URL~~CAMPAIGN.URL~/SelligentMobile/Webservice/WebService.asmx/getNieuwtjes",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: "{'userId':'" + userId + "'}",
            success: function (response) {       
            var nieuwtjes = response.d;
              if (nieuwtjes.length > 0) {   
                        $.each(nieuwtjes, function (i, entity) {
                    $('#nieuwtjesList').append(
                            //Here come's the data from web function         
                  });
            } 
        }        
      });
}); 
```

现在在#nieuwtjesList 中应该包含我从服务器返回的所有数据。这些数据是一个newsTopic。它应该像这样显示。

```
<li><a href="~PROBE(239)~">~ITEM.ONDERWERP~ </a></li> 
```

我的问题是，如何为从我的网络服务功能返回的每条记录创建上面的行。

亲切的问候。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:35:09.073

您可以使用此代码创建要为每一行附加的 HTML

```
$("<li/>").append($("<a/>")
    .attr("href", <HREF FROM YOUR DATA>)
    .text(<TEXT FROM YOUR DATA>)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:32:48.083

您可以使用[jQuery.tmpl](http://api.jquery.com/jquery.tmpl/)轻松实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:31:43.210

```
var nieuwtjes = response.d;
          if (nieuwtjes.length > 0) {   
                    var html ='';
                    $.each(nieuwtjes, function (i, entity) {
                     html += '<li><a href="'+ _urs_href_data+'">'+ i.ONODERWERP+'</a></li>';
                   });

                $('#nieuwtjesList').append($(html));
        } 
```

# api - 如何将 Jenkins 用户身份验证详细信息“传递”到使用 Jenkins API 创建作业的脚本？

> ID：10698419
> 
> 赞同：68
> 
> 时间：2012-05-22T08:29:38.183
> 
> 标签：api, curl, jenkins, token

我有一个通过 curl HTTP 调用删除和重新创建作业的脚本，我想摆脱任何硬编码的“用户名：密码”。例如`curl -X POST $url --user username:password`

注意事项：

*   **Jenkins CLI**（可能不是一个选项）。使用 CLI 应该能够实现与使用 Jenkins API（创建作业等）相同的效果，但据我了解，Jenkins CLI 对我来说不是一个好的选择，因为使用创建的作业只会在重新启动或“重新加载”后出现在 Jenkins 中从磁盘配置”，这将取消任何其他正在运行的作业。

*   **API 令牌**。无法找出如何获取用户令牌，然后将其作为参数传递给脚本，但这可能是一个解决方案..

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-02-13T21:06:05.533

试试这种方式：（例如删除作业）

```
curl --silent --show-error http://<username>:<api-token>@<jenkins-server>/job/<job-name>/doDelete 
```

api-token 可以从`http://<jenkins-server>/user/<username>/configure`.

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-10-28T21:50:18.480

这对我有用：

```
curl -u $username:$api_token -FSubmit=Build 'http://<jenkins-server>/job/<job-name>/buildWithParameters?environment=' 
```

API token 可以从 Jenkins 用户配置中获取。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-22T08:47:45.043

*   使用 Jenkins CLI，您不必重新加载所有内容 - 您只需加载作业（*update-job*命令）。您不能在 CLI、AFAIK 中使用令牌 - 您必须使用密码或密码文件。

*   用户的令牌名称可以通过`http://<jenkins-server>/user/<username>/configure`- 按下“显示 API 令牌”按钮获得。

*   这是[有关如何使用 API 令牌的链接](https://wiki.jenkins-ci.org/display/JENKINS/Authenticating+scripted+clients)（它使用`wget`，但`curl`非常相似）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-25T10:41:05.893

我需要在 CURL 命令中显式添加 POST：

```
curl -X POST http://<user>:<token>@<server>/safeRestart 
```

我还安装了[SafeRestart 插件](https://wiki.jenkins-ci.org/display/JENKINS/SafeRestart+Plugin)，以防万一。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-19T06:28:43.220

如果您想编写一个脚本来使用 Jenkins API 自动创建作业，您可以使用其中一个 API 客户端来执行此操作。Jenkins 的 ruby​​ 客户端可在[https://github.com/arangamani/jenkins_api_client获得](https://github.com/arangamani/jenkins_api_client)

```
gem install jenkins_api_client

require "rubygems"
require "jenkins_api_client"

# Initialize the client by passing in the server information
# and credentials to communicate with the server
client = JenkinsApi::Client.new(
  :server_ip => "127.0.0.1",
  :username => "awesomeuser",
  :password => "awesomepassword"
)

# The following block will create 10 jobs in Jenkins
# test_job_0, test_job_1, test_job_2, ...
10.times do |num|
  client.job.create_freestyle(:name => "test_job_#{num}")
end

# The jobs in Jenkins can be listed using
client.job.list_all 
```

API 客户端可用于执行很多操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-21T04:34:54.493

从 API 的角度来看，API 令牌与密码相同，请参阅源代码[使用令牌代替 API 的密码](https://github.com/jenkinsci/jenkins/blob/master/core/src/main/java/jenkins/security/ApiTokenFilter.java#L49)。

在我的问题[python-jenkins 或 jenkinsapi 中查看@coffeebreaks 的相关答案，了解 python 中的 jenkins 远程访问 API](https://stackoverflow.com/questions/18074521/python-jenkins-or-jenkinsapi-for-jenkins-remote-access-api-in-python)

其他在 doc 中描述为使用 http 基本身份验证模型

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-15T13:52:35.920

为了使用 API 令牌，用户必须从`https://<jenkins-server>/me/configure`或获取他们自己的令牌`https://<jenkins-server>/user/<user-name>/configure`。作为脚本的作者，您可以决定用户如何向脚本提供令牌。例如，在 Git 存储库中以交互方式运行的 Bourne Shell 脚本中，其中`.gitignore`contains `/.jenkins_api_token`，您可能会执行以下操作：

```
api_token_file="$(git rev-parse --show-cdup).jenkins_api_token"
api_token=$(cat "$api_token_file" || true)
if [ -z "$api_token" ]; then
    echo
    echo "Obtain your API token from $JENKINS_URL/user/$user/configure"
    echo "After entering here, it will be saved in $api_token_file; keep it safe!"
    read -p "Enter your Jenkins API token: " api_token
    echo $api_token > "$api_token_file"
fi
curl -u $user:$api_token $JENKINS_URL/someCommand 
```

# algorithm - 背包算法变量

> ID：10698424
> 
> 赞同：0
> 
> 时间：2012-05-22T08:30:10.270
> 
> 标签：algorithm, knapsack-problem

我遇到的问题如下：
假设我有一个给定重量的存钱罐，我正在用一组给定的硬币存钱。最后，我知道了存钱罐的总重量以及我使用的硬币的重量和价值。

我想找出我可以保证存入存钱罐的最低金额，即最坏的情况。例如，如果：

*   总重量 = 100
*   使用的硬币重量 = {1, 50}
*   硬币的价值 = {1, 30}

那么我可以保证的银行最低值是60。

问题是背包变体，但我无法找到正确的重复出现。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:55:57.567

我处理这个问题的方法是评估集合中的每个硬币以确定它的“价值密度”（因为需要一个更好的术语）——价值除以重量。在您的示例中，第一枚硬币的价值密度为 1，然后第二枚硬币的价值密度为 30/50 = 0.6。

然后从总重量为零开始，在不超过给定重量的情况下使用最低的“价值密度”硬币。然后应用下一个最低的“价值密度”硬币，依此类推，直到达到给定的重量。

这大致是一种贪心算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T12:30:45.457

显然你知道这个问题，但你想得到一种计算解决方案的方法^^。

对于精确的方法，您可以查看分支定界算法。这是一种相对简单的 OR 方法，可以找到背包问题的确切解决方案，你应该找到很多关于它的课程。

Vicky 提交了一个很好的解决方案来计算分支定界算法的下限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T10:43:38.240

通常背包问题AFAIK只有指数解决方案。也就是说，假设您拥有特定数量的每种硬币。在最一般的情况下，您必须尝试所有可能的组合（当然不超过总重量）。

递归算法如下所示：

```
const int N = /* type count*/;

const int g_Weight[N] = { ... };
const int g_Value[N] = { ... };

int CalcMinValueFrom(int weight, int i)
{
    int valBest = 0, valMy = 0;

    if (weight <= 0)
        return 0; // weight already reached

    if (i >= N)
        return -1; // out of coins

    while (true)
    {
        int valNext = CalcMinValueFrom(weight, i+1);
        if (valNext >= 0)
        {
            valNext += valMy;
            if (!valBest || (valBest > valNext))
                valBest = valNext;
        }

        valMy += g_Value[i];
        weight -= g_Weight[i];

        if (valBest && (valBest <= valMy))
            return valBest;
    }
}

// Returns the minimum value for the given weight    
int CalcMinValue(int weight)
{
    return CalcMinValueFrom(weight, 0);
} 
```

然而，在特定情况下，存在更好的解决方案。如果重量远大于任何硬币的重量，那么您可以很容易地粗略估计结果。将每枚硬币的“效率”定义为其价值和重量之间的比率。为了使价值最小化，您应该只选择“效率”最低的硬币。该解决方案精确到“边缘效应”，例如四舍五入等（意味着 - 你只能取整数个硬币）。

# php - 出现错误'#1111 - 组函数的使用无效'

> ID：10698425
> 
> 赞同：0
> 
> 时间：2012-05-22T08:30:10.400
> 
> 标签：php, mysql, sql

我通过以下查询收到此错误。请帮我改正。

`#1111 - Invalid use of group function`

*   `t_person`表包含人员详细信息
*   `tr_category`表包含类别详细信息
*   `tr_testimonial`表包含评级值详细信息

所有表都有`personpkid`相同的字段。

```
SELECT
    p.*,c.*,t.*
FROM
    t_person p
    LEFT JOIN tr_category c ON p.personpkid=c.personpkid
    LEFT JOIN tr_testimonial t ON p.personpkid=t.personpkid
WHERE
    avg(t.ratingvalue)>=5
GROUP BY
    p.personpkid ORDER BY approvedate DESC 
```

提前谢谢你，SG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:33:11.443

当您使用分组表达式过滤结果时，您需要使用`HAVING`子句。尝试这个：

```
SELECT
    p.*,c.*,t.*
FROM
    t_person p
    LEFT JOIN tr_category c ON p.personpkid=c.personpkid
    LEFT JOIN tr_testimonial t ON p.personpkid=t.personpkid
GROUP BY
    p.personpkid ORDER BY approvedate DESC
HAVING
    avg(t.ratingvalue)>=5 
```

# php - 识别 CURL 调用的最佳方法

> ID：10698430
> 
> 赞同：0
> 
> 时间：2012-05-22T08:30:41.197
> 
> 标签：php, curl

当 CURL 从我网站上的另一个脚本调用脚本时，在脚本中识别的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:37:54.630

设置自定义 User-Agent 标头。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_USERAGENT, 'your_custom_user_agent'); 
```

在被调用的脚本中，您可以识别这个内部请求

```
if ($_SERVER['HTTP_USER_AGENT'] == 'your_custom_user_agent') {
  // This is internal request!
} 
```

# c# - 导出到excel时将数字转换为文本

> ID：10698431
> 
> 赞同：2
> 
> 时间：2012-05-22T08:30:51.037
> 
> 标签：c#, excel

我在网格视图中显示我的数据（逗号分隔的数字），它会根据需要发生。但是，当我将其导出到 excel 时，值会在显示方面发生变化

例如我的值是 901155465, 978785496, 987458986 然后它显示为 901,155,465,978,785,496,987,458,986

这就是我将数据集传递到excel中的方式。我知道我们也可以渲染 HTML，但我只需要传输数据。

```
 GridView GridView1 = new GridView();
GridView1.DataSource = myDataSet;
GridView1.DataBind();
string style = @" .text { mso-number-format:\@; }  "; 
Response.Clear();
Response.AddHeader("content-disposition", "attachment;filename=Report.xls");
Response.Charset = "";
Response.Cache.SetCacheability(HttpCacheability.NoCache);
esponse.ContentType = "application/vnd.ms-excel";
System.IO.StringWriter s_Write = new System.IO.StringWriter();
System.Web.UI.HtmlTextWriter h_write = new HtmlTextWriter(s_Write);
GridView1.ShowHeader = true;
GridView1.RenderControl(h_write);
Response.Write(style); 
Response.Write(s_Write.ToString());
Response.End(); 
```

似乎 excel 将数字视为一个数字并在适当的位置添加逗号。

是否有任何解决方案来显示gridview中显示的数据。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T08:36:59.850

尝试这个：

```
_worksheet.Cells[1, 1] = "=\"" + YOUR_VALUE + "\""; 
```

这就是我使用 Interop.Excel 的方式

Excel 将忽略 (=)，因为它启动了一个公式，而双引号将告诉 Excel 将该值用作字符串。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T09:37:51.650

您也可以尝试导出 excel 样式表：

```
mso-number-format:"0"   NO Decimals 
```

[http://cosicimiento.blogspot.fr/2008/11/styling-excel-cells-with-mso-number.html](http://cosicimiento.blogspot.fr/2008/11/styling-excel-cells-with-mso-number.html)

因此，您需要将其写入`Response`：

```
// ...
string style = @"<style> td { mso-number-format:"0"; } </style> ";
// Style is added dynamically
Response.Write(style);
Response.Write(s_Write.ToString());
// ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T08:28:30.960

试试这个它工作正常

for (int i = 0; i < gvExportExcel.Rows.Count; i++) gvExportExcel.Rows[i].Cells[0].Attributes.Add("style", "mso-number-format:\@");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-18T12:35:31.067

```
"\"\t" + value?.ToString() + "\""; 
```

如果您需要转换和导出数字或任何值，任何人都可以使用这行代码。

就我而言， value = "13291440533000102"; 当我尝试使用 StreamWriter 导出时，该值以 CSV 格式正确导出。但是在打开 .csv 文件期间，excel 将值视为数字。由于数字超过 16 个字符，因此转换为 13291440533000100。最后一个字符已更改。我已经解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-02T10:59:35.290

这个问题困扰了我一年，这对我有帮助。我尝试了许多解决方案 stackoverflow.com，但没有帮助。希望这可以帮助某人

```
Dim formatRange As Excel.Range
formatRange = xlWorkSheet.Range("a1", "b1")
formatRange.NumberFormat = "@" 
```

将数据放入单元格 A1

```
xlWorkSheet.Cells(1, 1) = "098" 
```

或者如果您从 datagridview 复制

```
xlWorkSheet.PasteSpecial("Text", False, False, Type.Missing, Type.Missing, Type.Missing, True) 
```

[http://vb.net-informations.com/excel-2007/vb.net_excel_page_format.htm](http://vb.net-informations.com/excel-2007/vb.net_excel_page_format.htm) 祝你好运。

# android - Android 3rd 方 MDM 服务器设置/配置

> ID：10698434
> 
> 赞同：1
> 
> 时间：2012-05-22T08:30:56.873
> 
> 标签：android, android-c2dm, mdm

我正在为 Android 开发一个 MDM 设置，以专门禁用相机（适用于 android 4.0）并更改密码并从设备中擦除数据。

对于背景信息，我只是 Android 开发的初学者。

我已阅读[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)并开始制作一个简单的应用程序供用户注册设备管理。

但是，我不知道如何从这里进行下去。如何设置/配置服务器以使用 C2DM 向用户推送消息？我也没有任何服务器知识，任何人都可以提供这方面的教程吗？

一步一步的指南将非常有用，在问这个问题之前，我已经搜索了很长时间。

# c# - 分组和计数

> ID：10698439
> 
> 赞同：1
> 
> 时间：2012-05-22T08:31:07.263
> 
> 标签：c#, .net, linq, linq-to-sql

我从数据库中检索数据，就像这样

```
ID - item ID  - State - type  - comment
===
1  - 158      -   0   - 114589- AAAAA    
2  - 158      -   1   - 108965- BBBBB    
3  - 159      -   1   - 100145- CCCCC    
4  - 159      -   0   - 100145- DDDDD    
5  - 159      -   1   - 114589- EEEEE    
6  - 162      -   0   - 100145- FFFFF    
7  - 162      -   1   - 108965- GGGGG 
```

我需要返回结果选择项目 ID，按项目 ID、状态、类型和评论分组的状态计数

如何使用 LINQ 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:36:04.453

```
var grouped = from x in yourList
             group by new {x.itemID, x.type ,x.comment };

var counts = grouped.Select(x=>new {key = x.Key, count = x.Count()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:38:02.970

我不确定你的意思，但我认为这就是你想要的：

```
var result = 
   from d in dataList
   group d by new { d.State, d.Type, d.Comment } in g
   select new { ItemId = g.Key, StateCount = g.Count(m => m.State) } 
   // I don't know what you mean with count the state. 
   // If you mean sum then you can use g.Sum(m => m.State) instead of g.Count(..) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T08:46:12.923

```
from DataRow row in dataSet
group row by new
{
    ID = (int) row["ID"],
    State = row["State"].ToString(),
    Type = (int)row["type"],
    Comment = row["comment"].ToString()
} into rowGroup
select new
{
    Key = rowGroup.Key,
    Count = rowGroup.Count()
}; 
```

# excel - 向图表数据源添加零

> ID：10698442
> 
> 赞同：0
> 
> 时间：2012-05-22T08:31:20.120
> 
> 标签：excel, vba

我想将数字（0）添加到值中并发现一些麻烦。Excels 宏将此记录为

```
Sub Makro2()
    ActiveSheet.ChartObjects("Chart 1").Activate
    ActiveChart.SeriesCollection.NewSeries
    ActiveChart.SeriesCollection(2).XValues = _
        "='Sheet'!$C$221;'Sheet'!$C$223;'Sheet'!$C$225"
    ActiveChart.SeriesCollection(2).Values = _
        "='Sheet'!$B$222;'Sheet'!$B$224;'Sheet'!$B$226"
End Sub 
```

但是当我对我的代码尝试同样的操作时，我得到了错误。

```
Dim lineSeries1 As Range
Dim lineSeries2 As Range
With ActiveChart.SeriesCollection.NewSeries
    .Values = "={0;100}" 'It works 
    .Name = ""
    .XValues = "={0;100}" 'It works 
End With

With ActiveChart.SeriesCollection.NewSeries
    .Values = lineSeries1 ' + {0} or & SomeCellWithZero.Address
    .Name = ""
    .XValues = lineSeries2  ' + {0} or & SomeCellWithZero.Address
End With 
```

所以问题是如何将零添加到值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:12:00.927

就我个人而言，我会将我的范围扩大一个单元格并添加一个恒定的零值。如果由于某种原因无法做到这一点，那么以下内容可能会有所帮助；-)

这是到达那里的稍微迂回的方式。可能可以用更少的步骤来完成，但我还看不出怎么做。

我将使用 VBA 函数从包含零的原始范围构建一个新数组。我将零放在数组的开头，将代码更改为不同的东西。这是VBA函数：

```
Public Function PrependZero(rng As range)    
Dim val As Variant, res As Variant
Dim idx As Long
    val = Application.Transpose(rng.Columns(1).Value) ' get range values as a 1-dimensional array, assumes values are in a column
    ReDim res(LBound(val) To UBound(val) + 1) ' array to hold the extended values
    res(LBound(res)) = 0 ' add the fixed value        
    For idx = LBound(val) To UBound(val)
        res(idx + 1) = val(idx) ' copy the other values
    Next        
    PrependZero = res        
End Function 
```

Excel 似乎不喜欢我们在系列定义中使用 VBA 函数，所以我们需要添加一些间接来欺骗它。创建一个新的命名公式（公式...定义名称）。我打电话给我`YSeries`并将“引用”值设置为`=PrependZero(Sheet1!$A$2:$A$6)`，使用我的 Y 值范围作为函数的输入。

该命名公式*可*用于图表系列定义：将“系列 Y 值”设置为`[YourWorkbookNameHere]!YSeries`（使用您在上面创建的任何名称）。

如果您想对 X 值执行相同的操作，则应该使用相同的方法。

# ruby-on-rails - 如何在 formtastic 中生成多个输入？

> ID：10698443
> 
> 赞同：0
> 
> 时间：2012-05-22T08:31:27.357
> 
> 标签：ruby-on-rails, forms, nested-forms, formtastic

改编自[嵌套形式 Railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)，我有：

在我的模型中

```
class Post < ActiveRecord::Base
  has_many :fields
  accepts_nested_attributes_for :fields
end

class Field < ActiveRecord::Base
  belongs_to :post
end 
```

在我的控制器中

```
def new
  @post = Post.new
  4.times { @post.fields.build }

  respond_to do |format|
    format.html
  end
end 
```

在我看来

```
<%= semantic_form_for @post do |f| %>

  <%= f.inputs do %>
    <%= f.input :title %>
  <% end %>

  <%= semantic_fields_for :fields do |h| %>
    <%= h.input :name %>
  <% end %>

  <%= f.buttons do %>
    <%= f.commit_button %>
  <% end %>
<% end %> 
```

问题是即使我运行了四次@post.fields.build，这也只会生成一个 :field 输入。我不知道如何生成多个输入，以便用户可以输入多个字段。

对不起，如果这很明显，但我是 Rails 的新手，而且对整体编程很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:20:37.350

您的嵌套表格不正确
更改`<%= semantic_fields_for :fields do |h| %>`为
`<%= f.inputs :for => :fields do |h|%>`

# java - java spring config是否有能力从自定义变量解析器解析变量？

> ID：10698445
> 
> 赞同：1
> 
> 时间：2012-05-22T08:31:34.720
> 
> 标签：java, spring, variables, configuration

在 .net spring land 中，您可以声明自定义变量源并`${variableName}`在您的 spring 配置中执行样式变量。你可以通过实现一个接口 ( `IVariableSource`) 来实现它，它看起来像这样：

```
<object type="Spring.Objects.Factory.Config.VariablePlaceholderConfigurer, Spring.Core">
    <property name="VariableSources">
        <list>
            <ref object="MyVariableSource" />
        </list>
    </property>
</object>

<object id="TestObject" type="TestProject.TestObject, TestProject" singleton="false">
    <constructor-arg type="string" value="${MyVariableDefinedInMyVariableSource}" />
</object> 
```

在 java spring land 中这相当于什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:52:44.117

你也可以达到同样的`Java`效果。下面是示例。

```
<bean id="propertyConfigurer"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:config/config.properties" />
</bean>

<bean id="myController"
    <property name="variableName" value="${variableName}" />
</bean> 
```

# javascript - 实时复制另一个文本框值Jquery

> ID：10698448
> 
> 赞同：4
> 
> 时间：2012-05-22T08:31:46.453
> 
> 标签：javascript, jquery, html

我想获取另一个文本框的值并将其实时输入到另一个文本框中。如何检测 TEXT_3 是否已更改？如果 TEXT_3 值更改，则必须将其输入到 TEXT_4 为方便起见，这里是代码和演示：

```
**HTML**
    <label>TEXT 1: </label><input type="text" id="text_1" value=""/>
    <label>TEXT 2: </label><input type="text" id="text_2" value=""/>
    <label>TEXT 3: </label><input type="text" id="text_3" value=""/>
    <label>TEXT 4: </label><input type="text" id="text_4" value=""/>

**JAVASCRIPT**
    /* INPUT TEXT_1 AND TEXT_2 VALUE TO TEXT_3 ON TEXT_1 KEYUP*/
    $("#text_1").keyup(function() {
        $("#text_3").val($("#text_1").val() + " " + $("#text_2").val());
    })

    /* INPUT TEXT_1 AND TEXT_2 VALUE TO TEXT_3 ON TEXT_1 AND TEXT_2 KEYUP*/    
    $("#text_2").keyup(function(){
        $("#text_3").val($("#text_1").val() + " " + $("#text_2").val());
    })

    /* HOW CAN I  DETECT IF TEXT_3 WAS CHANGED? IF TEXT_3 VALUE CHANGED, IT MUST BE INPUTTED TO TEXT_4*/

    /* not working solution */   
    $("#text_3").change(function(){
        $("#text_4").val($("#text_3").val());
    }) 
```

演示：http: [//jsfiddle.net/8eXRx/7/](http://jsfiddle.net/8eXRx/7/)

感谢您的回复！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T08:38:39.337

在你的 textbox3.val() 之后添加 change()，如下所示：

```
$("#text_1").keyup(function() {
    $("#text_3").val($("#text_1").val() + " " + $("#text_2").val()).change();
})

/* INPUT TEXT_1 AND TEXT_2 VALUE TO TEXT_3 ON TEXT_1 AND TEXT_2 KEYUP*/    
$("#text_2").keyup(function(){
    $("#text_3").val($("#text_1").val() + " " + $("#text_2").val()).change();
}) 
```

[http://jsfiddle.net/8eXRx/12/](http://jsfiddle.net/8eXRx/12/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T08:36:26.717

问题是您无法绑定特殊事件来检查文本框值是否已使用 JavaScript 而不是手动更改。要解决该任务，一种选择是对 和 使用相同的`keyup`事件。JQuery 会将新的处理程序添加到现有的处理程序中：`text_1``text_2`

```
$("#text_1, #text_2").keyup(function(){
    $("#text_4").val($("#text_3").val());
}) 
```

**演示：http:** [//jsfiddle.net/8eXRx/11/](http://jsfiddle.net/8eXRx/11/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T08:35:59.513

该`change`事件在输入字段失去焦点后触发。如果你想实时更新它，你还需要这个`keyup`事件，所以像这样：

```
$("#text_3").keyup(function(){
    $("#text_4").val($("#text_3").val());
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T08:49:27.287

尝试：

```
$("#text_3").keyup(function(){
   cur_val = $(this).val(); //grab #text_3's current value
   $(this).val(cur_val); // this is optional, but keep for sake
   $("#text_4").val(cur_val); //set #text_4's value as what #text_3 is having
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-24T06:37:04.067

试试这个.. n1 和 n2 是`textbox`

```
 $(document).ready(function(){

    $(':input').keyup(function(){

      $("#n2").val($("#n1").val()).change(); 

    });
}); 
```

# node.js - node js 同时使用 Mongo 和 Redis

> ID：10698449
> 
> 赞同：0
> 
> 时间：2012-05-22T08:31:47.297
> 
> 标签：node.js, mongodb, redis, socket.io

我正在使用 Node.js 开发一个小项目。我正在使用`mongoose`模型，因此我正在使用`MongoDb`. 我保持会话`MongoStore`。我也想使用`socket.io`运行几个 Node.js 进程。来自`socket.io`文档：

```
 The MemoryStore only allows you deploy socket.io on a single process. 
If you want to scale to multiple process and / or multiple servers 
you can use our RedisStore which uses the Redis 
NoSQL database as man in the middle. 
```

所以我想我`Redis`也需要。我是 Node 的新手，我想知道 - 使用两个数据库来管理应用程序的不同部分是否正常。`socket.io`或者在运行Node的多个进程并且仅使用时有一种方法可以使用`MongoDb`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T14:50:32.733

就在最近，出现了一个使用 MongoStore 和使用[mubsub](https://github.com/scttnlsn/mubsub)（Node.js 和 MongoDB 的 Pub/sub）的 pub/sub 功能的解决方案。

它可以以与 RedisStore 几乎相同的方式附加到 socket.io：

```
io.configure(function() {
    io.set('store', new MongoStore({host: 'localhost', port: 27017, db:'session_db'}));
}); 
```

更多信息和来源：[https ://github.com/kof/socket.io-mongo](https://github.com/kof/socket.io-mongo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:06:25.280

Redis store 已经内置在 Socket.IO 中，但更重要的是有 2 个 Socket.IO 特别需要的重要特性：

1) 发布-订阅（进程间通信）
2) 键值存储（存储所有连接信息）

虽然键值存储部分可以使用 MongoDB 完成，但它不提供 pub-sub 功能。

归根结底，如果您需要扩展一个进程（意味着您期望超过数千个并发请求）而不是 RedisStore 是解决方案。

资源：

*   [在 socket.io 中使用 RedisStore 的示例](https://stackoverflow.com/questions/9267292/examples-in-using-redisstore-in-socket-io)
*   [http://www.ranu.com.ar/2011/11/redisstore-and-rooms-with-socketio.html](http://www.ranu.com.ar/2011/11/redisstore-and-rooms-with-socketio.html)

# mysql - 当另一列具有相等的值时对一列求和

> ID：10698450
> 
> 赞同：4
> 
> 时间：2012-05-22T08:31:47.397
> 
> 标签：mysql

假设我有这个 MySQL 表：

```
id place_id area_mq n
-- -------- ------- --
1  1             50 1

2  2             90 1
3  2             20 1

4  3             10 1
5  3             10 2
6  3             10 3

7  4             20 1
8  4             20 2

9  5             15 1
10 5             25 1 
```

`id`是主键，`place_id`代表一个区域id，`area_mq`是mq中这个地方的表面积。

我要做的是找到一个紧凑的查询来计算`area_mq`这些规则的总和：

*   如果**相同**，`n`则计算每个（f.ex for =2，我计算总和中的 90*和*20）**`place_id``area_mq``place_id`**
****   如果相同`n`的**不同**，则只`place_id`计算*一次*（可以这样做，因为对于这些“地方”，值将是相同的；f.ex. =4，有两个 20，我只求和 20 而不是 40） .`area_mq`*`place_id`****

 ****在这个例子中，我的正确总数是：50 + (90 + 20) + 10 + 20 + (15 + 25)。

我可以通过查询（无代码或过程）来完成此操作吗？如果对 n 的要求颠倒了，那么使用 GROUP BY 和子查询会很简单......但是在这些条件下，我被卡住了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T08:43:04.190

```
select place_id, sum(area_sq)/count(distinct n)
from your_table
group by place_id; 
```

[在这里](http://sqlfiddle.com/#!3/7fed0/2)测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:42:31.190

从我在您的模式中看到的所有`n = 1`内容都添加了？

```
SELECT SUM((n = 1) * area_mq) AS total
FROM table_name 
```

我进行验证，返回 1 或 0，然后将其与列值相乘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:42:50.590

我想你可以使用这样的东西。取**n的***总和*和*计数*，以及*min*和*max*（可能是矫枉过正）；用它来确定**n**的所有值是否都相同。沿着这些思路：

 ******```
SELECT
    CASE WHEN sm/cnt = mn AND sm/cnt = mx THEN sum_area
    ELSE area/cnt END
    AS sum_area
FROM (
    SELECT COUNT(n) cnt, SUM(n) sm, MIN(n) mn, MAX(n) mx, SUM(area_mq) sum_area
    GROUP BY place_id
) a 
```

因此，假设 n 的值为 2 和 2 => sm/cnt = mn (4/2 = 2) 和 mx。如果它的值为 2 和 1 => sm/cnt != mn (3/2 != 1)。**********

# c# - wcf 中的数据契约

> ID：10698453
> 
> 赞同：0
> 
> 时间：2012-05-22T08:32:17.717
> 
> 标签：c#, .net, wcf

如何在 WCF 中初始化类？

假设我只想对一个类中的两个成员求和。

我在 iService 中进行了编码，例如：

```
[DataContract]
class Sample
{
    public int i { get; set; }
    public int q { get; set; }
}

[OperationContract]
public int Sum(Sample obj); 
```

在服务中：

```
public int Sum(Sample obj)
{
} 
```

由于我对两个页面中的类声明感到困惑，因此需要添加什么代码才能使其运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:37:30.943

通常，它会像下面这样设置。您应该清楚地将服务与数据合同分开。

```
[ServiceContract]
public interface ISampleService
{
        [OperationContract]
        int sum(SampleData obj);
}

public class SampleService : ISampleService
{
        public int sum(SampleData obj)
        {
           // logic here
        }
}

[DataContract]
public class SampleData
{
       [DataMember]
       public int i { get; set; }

       [DataMember]
       public int q { get; set; }
} 
```

# html - 谱系的 HTML CSS 无序列表。如何让它在IE8中显示与firefox一致？

> ID：10698457
> 
> 赞同：0
> 
> 时间：2012-05-22T08:32:38.777
> 
> 标签：html, css, cross-browser, html-lists

我正在通过使用 html 无序列嵌套列表创建一个类似表格的表格，使用 css 进行样式设置以使其看起来像表格。[现在它在Firefox](http://i.stack.imgur.com/V7mrG.png)中看起来完全符合我的要求，但在[IE8](http://i.stack.imgur.com/HpGSt.png)中看起来很糟糕。（抱歉，我没有足够的声誉来发布图片来向您展示差异，请参阅下面的代码）。

HTML代码如下：

```
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div>
    TODO write content
</div>
<ul>
    <li>
    <div class="box">
        <div class="title">
            My Categories
        </div>
        <div class="description">
            My Categories
        </div>
    </div>
    <ul>
        <li>
        <div class="box">
            <div class="title">
                Fun
            </div>
            <div class="description">
                Fun
            </div>
        </div>
        <ul>
            <li>
            <div class="box">
                <div class="title">
                    Sport
                </div>
                <div class="description">
                    Sport
                </div>
            </div>
            <ul>
                <li>
                <div class="box">
                    <div class="title">
                        Surfing
                    </div>
                    <div class="description">
                        Surfing
                    </div>
                </div>
                </li>
                <li>
                <div class="box">
                    <div class="title">
                        Extreme knitting
                    </div>
                    <div class="description">
                        Extreme knitting
                    </div>
                </div>
                </li>
            </ul>
            </li>
            <li>
            <div class="box">
                <div class="title">
                    Friends
                </div>
                <div class="description">
                    Friends
                </div>
            </div>
            <ul>
                <li>
                <div class="box">
                    <div class="title">
                        Gerald
                    </div>
                    <div class="description">
                        Gerald
                    </div>
                </div>
                </li>
                <li>
                <div class="box">
                    <div class="title">
                        Gwendolyn
                    </div>
                    <div class="description">
                        Gwendolyn
                    </div>
                </div>
                </li>
            </ul>
            </li>
        </ul>
        </li>
        <li>
        <div class="box">
            <div class="title">
                Work
            </div>
            <div class="description">
                Work
            </div>
        </div>
        <ul>
            <li>
            <div class="box">
                <div class="title">
                    Reports
                </div>
                <div class="description">
                    Reports
                </div>
            </div>
            <ul>
                <li>
                <div class="box">
                    <div class="title">
                        Annual
                    </div>
                    <div class="description">
                        Annual
                    </div>
                </div>
                </li>
                <li>
                <div class="box">
                    <div class="title">
                        Status
                    </div>
                    <div class="description">
                        Status
                    </div>
                </div>
                </li>
            </ul>
            </li>
            <li>
            <div class="box">
                <div class="title">
                    Trips
                </div>
                <div class="description">
                    Trips
                </div>
            </div>
            <ul>
                <li>
                <div class="box">
                    <div class="title">
                        National
                    </div>
                    <div class="description">
                        National
                    </div>
                </div>
                </li>
                <li>
                <div class="box">
                    <div class="title">
                        International
                    </div>
                    <div class="description">
                        International
                    </div>
                </div>
                </li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
    </li>
</ul>
</body>
</html> 
```

CSS：

```
.box {
    border: 1px solid #BBBBBB;
    border-radius: 4px 4px 4px 4px;
    margin: 10px;
    width: 200px;
    position: relative;
    padding: 10px;
    color: #333333;
    font-weight: normal;
    min-width: 0;
    text-decoration: none;
    text-shadow: 0 1px 0 #FFFFFF;
    background: #e6e49f;
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.3) inset, 0 1px 1px rgba(0, 0, 0, 0.2);
}
.title {
    width: 100%;
    font-weight: bolder;
}
.description {
    width: 100%;
    font-size: medium;
}
li,
ul {
    padding: 0;
    margin: 0;
    list-style: none;
}
ul {
    line-height: 38em;
    position: relative;
}
ul ul {
    line-height: 18em;
    position: absolute;
    left: 200px;
    top: 0;
}
ul ul ul { line-height: 8em }
ul ul ul ul { line-height: 3em }
ul li { position: relative } 
```

我试图在这个问题上研究很多关于 CSS 的一周，并认为“line-Height”是问题，因为它在 IE8 中看起来很尴尬。我研究了IE8版本应该能够满足无序列表的问题。

任何人都可以给我一些想法如何解决这个问题？或者我可以用来替换“行高”的任何东西？我还是想提醒 unorderedlisted( `<ul>`) 只用 css，不，`<div>`因为我不想改变 cakephp 的核心文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:56:30.423

感谢@ZippyV 提醒我`<!DOCTYPE>`只需在标签前添加一行代码就可以声明它`<html>`，以便浏览器进入标准模式并且 html 是有效的。

现在 IE8 显示它与 firefox 完全一样。

# mysql - mysql查询连接表不起作用

> ID：10698459
> 
> 赞同：0
> 
> 时间：2012-05-22T08:32:42.037
> 
> 标签：mysql

这是我的查询，它使 Join 出错

```
 $query = 'SELECT 
                    a.ks_u_id, 
                    a.ks_keyword,
                    b.u_photo 
                FROM 
                '.T_KEYWORD_HISTORY.' a 
                WHERE a.ks_u_id in ( SELECT uf_target_id FROM '.T_USER_FOLLOW.' WHERE uf_user_id="'.$u_id.'" and uf_target_id <> "'.$u_id.'" )
                JOIN '.T_USER_ACCOUNT.' b ON b.u_id = a.ks_u_id 
                ORDER BY a.ks_time DESC 
                LIMIT 0 , 5 '; 
```

我收到此错误消息。

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`'JOIN T_USER_ACCOUNT b ON b.u_id = a.ks_u_id ORDER BY a.ks_time DESC '`在第 8 行附近使用正确的语法

```
SELECT 
     a.ks_u_id, a.ks_keyword, b.u_photo 
FROM T_KEYWORD_HISTORY a 
WHERE a.ks_u_id in ( SELECT uf_target_id 
                     FROM T_USER_FOLLOW 
                     WHERE uf_user_id="jake" and uf_target_id <> "jake" ) 
JOIN T_USER_ACCOUNT b ON b.u_id = a.ks_u_id 
ORDER BY a.ks_time DESC 
LIMIT 0 , 5 
```

看起来我为 JOIN 命令编写了错误的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:36:49.417

尝试

```
SELECT 
     a.ks_u_id, a.ks_keyword, b.u_photo 
FROM T_KEYWORD_HISTORY a 
JOIN T_USER_ACCOUNT b ON b.u_id = a.ks_u_id 
WHERE a.ks_u_id in ( SELECT uf_target_id 
                     FROM T_USER_FOLLOW 
                     WHERE uf_user_id="jake" and uf_target_id <> "jake" ) 
ORDER BY a.ks_time DESC 
LIMIT 0 , 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:42:16.013

`JOIN`子句在子句之前`WHERE`。您的查询应该是：

```
SELECT 
 a.ks_u_id, a.ks_keyword, b.u_photo 
FROM T_KEYWORD_HISTORY a 
JOIN T_USER_ACCOUNT b ON b.u_id = a.ks_u_id 
WHERE a.ks_u_id in ( SELECT uf_target_id 
                 FROM T_USER_FOLLOW 
                 WHERE uf_user_id="jake" and uf_target_id <> "jake" ) 
ORDER BY a.ks_time DESC 
LIMIT 0 , 5 
```

# eclipse - 从 Eclipse Launch Delegate 访问 Active Editor

> ID：10698466
> 
> 赞同：1
> 
> 时间：2012-05-22T08:33:26.327
> 
> 标签：eclipse, interpreter, eclipse-plugin

我正在为我正在使用 Eclipse、EMF 和 GEF 实现的可视化编程语言开发一个解释器。我目前正在为图表创建解释器。

为了执行图表，我决定实现启动器配置。执行配置时，我想从活动编辑器中读取 EMF 模型并对其进行解释。我遇到的问题是只能从 UI 线程访问活动编辑器，并且我不希望解释器在 UI 线程中执行，因为它可能是一个漫长的过程。这是有效但不应使用的代码：

```
@Override
public void launch(ILaunchConfiguration configuration, String mode, ILaunch launch, IProgressMonitor monitor)
        throws CoreException {
    final IWorkbench workbench = PlatformUI.getWorkbench();
    workbench.getDisplay().asyncExec(new Runnable() {
        @Override
        public void run() {
            IEditorPart activeEditor = workbench.getActiveWorkbenchWindow().getActivePage().getActiveEditor();
            OPMGraphicalEditor editor = (OPMGraphicalEditor) activeEditor;
            OPMObjectProcessDiagram opd = editor.getOPD();
            Interpreter.INSTANCE.interpret(opd);
        }
    });
} 
```

我确信有一个正确的方法可以做到这一点，但我还没有找到它。我在互联网上找到的启动配置示例使用外部程序，但我（目前）正在将我的解释器作为工作台的一部分来实现。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:38:40.320

您可以将上面的代码与 a 一起使用`...getDisplay().syncExec(...)`，然后将指向编辑器的指针存储到某个封闭对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:47:55.720

如果您直接从编辑器启动配置（右键单击，运行为..），那么您可以使用`ILaunchShortcut`并覆盖其`void launch(IEditorPart editor, String mode)`方法来访问启动文件的编辑器。

# c++ - 如何在opencv2.1中使用opencv2.3头文件

> ID：10698467
> 
> 赞同：0
> 
> 时间：2012-05-22T08:33:32.067
> 
> 标签：c++, c, opencv

我正在使用**openCv 2.1**，我正在尝试保存`cv::Mat featureVect`格式`.xml`。featureVect 已初始化并且它具有数据。当我使用以下代码时

```
#include "opencv2/opencv.hpp"

cv::FileStorage fs("myFile.xml", FileStorage::WRITE);
fs << "Feature_Mtx" << featureVect; 
```

我收到错误消息。即#include "opencv2/opencv.hpp" 不包括在内。我知道上面的头文件不在目录中`C:\OpenCV2.1\include\opencv` ，并且这个头文件存在于**opencv2.3**中。是否可以在我的程序中使用这个头文件，即在**opencv2.1**中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:58:32.147

你有两种可能性：

1.  创建一个头文件`opencv2/opencv.hpp`，它只包含每个模块的头文件（这是 opencv.hpp 所做的）。

2.  包括正确的头文件：`opencv2/highgui/highgui.hpp`改为或`opencv2/opencv.hpp`.

# python - Argparse：检查是否传递了任何参数

> ID：10698468
> 
> 赞同：65
> 
> 时间：2012-05-22T08:33:35.110
> 
> 标签：python, command-line-arguments, argparse

当没有给出参数时，我的脚本应该启动演示模式。我试过这个：

```
args = parser.parse_args()
if len(args) == 0:
    run_demo()
else:
    # evaluate args 
```

这给出了一个`*** TypeError: object of type 'Namespace' has no len()`没有`args`列表。

我将如何实现我想要的？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-05-22T09:44:37.580

如果您的目标是检测何时**没有**为命令提供参数，那么执行此`argparse`操作是错误的方法（正如 Ben 很好地指出的那样）。

想的简单！:-) 我相信 argparse 不会减少人口`sys.argv`。因此，`if not len(sys.argv) > 1`，则用户没有提供任何参数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-22T09:30:56.177

argparse 允许您根据您的规范和正在解析的命令行设置（在命名空间对象内）您添加到解析器的参数中提到的所有变量。如果您设置了默认值，那么如果在命令行上没有看到这些变量，那么它们将具有该默认值，命名空间对象中也不会缺少它们。如果您*不*指定默认值，则存在隐式默认值`None`. 所以检查 Namespace 对象的长度，不管你怎么做，作为检查是否有任何参数被解析的方法是没有意义的；它应该始终具有相同的长度。

相反，如果你知道你有一堆没有默认值的参数，并且你想检查它们中的任何一个是否被设置为任何非`None`值......就这样做。您可以使用列表推导和`vars`函数来遍历它们，而不必从`add_argument`调用中复制名称列表，如 Martijn 的回答所示。

如果您的某些参数具有默认值，那么它会变得有点棘手，如果它们具有可以在命令行上显式提供的默认值（例如，默认为 0 的数字参数使得无法告诉用户默认值）提供 0)。在那种情况下，我不确定是否有一个通用的解决方案在不知道参数是什么的情况下总是有效的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-21T15:25:13.760

如果真的需要参数编号（无论出于何种原因）。我发现这段代码很有帮助（但不知道它优化了多少，我会很感激任何评论）。

```
args = parser.parse_args()
print( len( vars(args) ) ) 
```

此版本仅计算 -xx 参数，而不计算传递的任何附加值。

如果一个人想要所有东西（还有传递的值），那么就像`len(sys.argv)`前面提到的那样使用。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-01-04T23:22:47.370

不要使用 argparse。相反，只需使用`sys.argv`. `argparse`创建一个命名空间，因此它总是会为您提供一个带有它们的值的“dict”，具体取决于您在调用脚本时使用的参数。

这是我过去所做的：

```
args = parser.parse_args()
if len(sys.argv) == 1:
    parser.print_help()
    sys.exit()
return args 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-07-22T19:07:42.800

我知道这是一个旧线程，但我找到了一个更直接的解决方案，可能对其他人也有用：

您可以检查是否已传递任何参数：

```
if any(vars(args).values()):
    # evaluate args 
```

或者，如果没有传递任何参数（注意`not`运算符）：

```
if not any(vars(args).values()):
    run_demo() 
```

**解释：**

*   `parse_args()`返回包含每个参数名称及其关联值的“命名空间”对象。例子：`Namespace(arg1='myfile.txt', arg2='some/path/to/some/folder')`

*   如果没有传递*任何参数*`parse_args()`，将返回相同的对象，但所有值都为`None`. 例子：`Namespace(arg1=None, arg2=None)`

但是，这个对象是不可迭代的，所以你必须使用`vars()`它来把它变成 a`dict`以便我们可以访问这些值。

最后，由于我们现在`dict`手头有 a ，我们可以获取所有值（在 a 中`list`）， with `.values()`，并使用内置`any()`函数检查是否有任何值不是`None`。为了更清楚：如果在您提供给它的列表中没有一个 is not 或（检查文档以供参考）的单个值，则返回`any()`。`False``None``False``0`

希望能帮助到你。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-28T22:00:58.033

让我们假设以下示例来扩展您的完整性：

```
#!/usr/bin/env python3

import argparse

...
def main():
    parser = argparse.ArgumentParser()
    parser.add_argument('input', nargs='?' action='store')
    parser.add_argument('-l', '--length', type=int, action='store')
    parser.add_argument('-v', '--verbose', action='store_true')
    args = parser.parse_args()
    if (args.input == None and args.length == None):
        parser.print_help()
    else:
        print(args)

if __name__ == '__main__':
    main() 
```

@Ben 提到的您的命名空间对象在此示例中是`args`. 从`parser.add_argument`变量中的字符串创建。您可以通过`args.input`或`args.length`或访问它`args.verbose`。您可以通过执行来验证这一点，`print(args)`这实际上会显示如下内容：

```
Namespace(input=None, length=None, verbose=False) 
```

因为 verbose 设置为`True`, 如果存在，并且 input 和 length 只是变量，不必实例化（不提供参数）。

`group = parser.add_mutually_exclusive_group()`如果您想确保不能同时提供两个属性，这也很有帮助。

如需进一步参考，请参阅：

*   [https://docs.python.org/3/howto/argparse.html](https://docs.python.org/3/howto/argparse.html) 结构良好的HOWTO
*   [https://docs.python.org/3/library/argparse.html](https://docs.python.org/3/library/argparse.html) Argparse 模块文档

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-16T16:42:55.993

我扩展了 2dvisio 的概念来计算非零或无参数：

```
vm_opts = parser.parse_args()
v = vars(vm_opts)
n_args = sum([ 1 for a in v.values( ) if a]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-22T18:00:37.513

对于要检查是否已传递所有输入中相同的单一类型参数的最简单情况，您可以使用`argparse`和分三步完成`numpy`。

```
import argparse
import numpy as np

args = parser.parse_args()
# namespace to dictionary
args_dict = vars(args)
# unpack values from dictionary, pass to array
values = np.array([*args_dict.values()])
# Check if the defaults have changed
args_indices = np.where(values != default)[0]
# Did we pass any arguments?
if len(values) == len(args_indices):
   print("No arguments were passed") 
```

长度用作代理来检查是否传递*了任何**参数*。如果您想知道哪个已通过，您可以解压缩密钥并检查更改的索引。

 *`np.array()`接受更复杂情况的逻辑运算符。*

# java - java.util.GregorianCalendar 在 1976 年 3 月 28 日到 3 月 29 日之间发生了什么？

> ID：10698470
> 
> 赞同：20
> 
> 时间：2012-05-22T08:33:46.273
> 
> 标签：java, scala, date, long-integer, gregorian-calendar

尝试使用 GregorianCalendar 时，我在计算自特定日期以来的天数时陷入了奇点。在 scala 解释器中，我输入：

```
scala>import java.util.GregorianCalendar
scala>import java.util.Calendar
scala>val dateToday = new GregorianCalendar(2012,Calendar.MAY,22).getTimeInMillis()
dateToday: Long = 1337637600000
scala>val days1 = (dateToday - (new GregorianCalendar(1976,Calendar.MARCH,28).getTimeInMillis())) / (1000*3600*24)
days1: Long = 13203
scala>val days2 = (dateToday - (new GregorianCalendar(1976,Calendar.MARCH,29).getTimeInMillis())) / (1000*3600*24)
days2: Long = 13203 
```

我不知道 1976 年是闰年这一事实是否重要，但 days1 和 days2 应该被 1 隔开。这是自 1970 年以来历史上唯一发生这种奇点的时刻。

想知道发生了什么，我计算了前面提到的两个日期之间的差异，它只给了我 23 小时的差异！那天发生了什么？维基百科显然对此只字未提。

更重要的是，如何计算自特定日期以来的实际天数？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-22T08:38:33.600

## 问题

夏令时只有 23 小时。

根据[这个](http://www.timeanddate.com/worldclock/clockchange.html?n=195&year=1976)1976 年 3 月 28 日，至少在巴黎是夏令时。那天凌晨 1 点到 2 点之间的时间根本不存在。

虽然它必须是一个区域设置问题，因为在我的计算机上我做对了：

```
scala> val days1 = (dateToday - (new GregorianCalendar(1976, Calendar.MARCH, 28).getTimeInMillis())) / (1000 * 3600 * 24)
days1: Long = 13203

scala> val days2 = (dateToday - (new GregorianCalendar(1976, Calendar.MARCH, 29).getTimeInMillis())) / (1000 * 3600 * 24)
days2: Long = 13202 
```

那天我不在巴黎或其他任何时间变化的地方；时间在我所在的 1976 年 4 月 25 日改变了。所以我在那个日期得到了“跳过的一天”行为：

```
scala> val days3 = (dateToday - (new GregorianCalendar(1976, Calendar.APRIL, 25).getTimeInMillis())) / (1000 * 3600 * 24)
days3: Long = 13175

scala> val days4 = (dateToday - (new GregorianCalendar(1976, Calendar.APRIL, 26).getTimeInMillis())) / (1000 * 3600 * 24)
days4: Long = 13175 
```

Erwin 在评论中指出，您在这里唯一注意到不正确日期差异的可能原因是，所有其他夏令时都被那些年份中也发生的 25 小时制所抵消，当时夏令时已得到纠正。

## 解决方案

使用更好的库进行日期处理。joda [-time](http://joda-time.sourceforge.net/)库正确地做到了（以及整体上更好的日期/时间框架）：

```
import org.joda.time.Days
import org.joda.time.DateTimeConstants
import org.joda.time.DateMidnight

val d1 = new DateMidnight(1976, DateTimeConstants.APRIL, 25)
val d2 = new DateMidnight(1976, DateTimeConstants.APRIL, 26)
val x = Days.daysBetween(d1, d2).getDays()
println(x) // 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T09:18:37.903

如果浮动除法选项不可用，我能想到的最佳答案是在计算两天之间的差异时增加一小时（1000 * 3600）：

```
scala> (dateToday - (new GregorianCalendar(1976, Calendar.MARCH, 28).getTimeInMillis()) + 1000*3600) / (1000 * 3600 * 24)
days1: Long = 13204
scala> (dateToday - (new GregorianCalendar(1976, Calendar.MARCH, 29).getTimeInMillis()) + 1000*3600) / (1000 * 3600 * 24)
days1: Long = 13203 
```

它应该适用于每个日期，因为您不再受闰小时的影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T08:54:10.153

dhg 指出了我的想法：这一天是“夏令时”的一天。由于这一天只有 23 小时，欧几里得除以一天等于 0。

实际上，使用 GregorianCalendar 对象只是将日期用作毫秒，因此除以一天作为整数只会截断结果。

尝试进行浮点除法，而不是欧几里得（整数）除法，然后将结果四舍五入。

# xml - 如何将 XML 数据转换为 SVG 以实现文档布局可视化？

> ID：10698471
> 
> 赞同：2
> 
> 时间：2012-05-22T08:34:17.473
> 
> 标签：xml, xslt, svg, visualization

在我的 XML 文件中，我有表示打印文档的物理布局的注释，我想使用以 SVG 格式绘制的简单网格将其可视化。

所讨论的文档是使用一组元素来描述的，下面举例说明。首先，*area-model*元素定义了文档的宽度和高度，以及文档如何垂直（1 行）和水平（3 列）划分。

列和行使用 hspacing 和 vspacing 属性定义，其值是宽度和高度属性的百分比。

然后使用嵌套*的子区域元素详细说明**area-model*元素中定义的初始布局，这些子区域元素具有与布局的物理特性相关的相似属性。在这种情况下，第一列总共有九行。location 属性描述了子区域在父元素中的位置。在示例中，子区域位于第一列。

 *```
<area-model>
  <area-root id="layout" cols="3" rows="1" hspacing="25 25 50" vspacing="100" width="404mm" height="210mm" />
    <sub-area id="column-1" location="col-1" cols="1" rows="9" hspacing="100" vspacing="2 8 9 3 3 10 22 39 4" width="101mm" height="210mm">
    </sub-area>
  </area-root>
</area-model> 
```

预期的结果将是我使用 Inkscape 创建的 SVG 的以下内容：

```
<svg>
 <g id="layout">
   <rect y="842" x="0" height="210" width="404" id="area-root" style="fill:none;stroke:#000000;stroke-width:1"/>
   <rect y="842" x="0" height="210" width="101" id="area-root-col-1" style="fill:none;stroke:#000000;stroke-width:1"/>
   <rect y="842" x="101" height="210" width="101" id="area-root-col-2" style="fill:none;stroke:#000000;stroke-width:1"/>
   <path id="column-1-row-1" d="m 0.50493076,847.86029 99.99013924,0" style="fill:none;stroke:#000000;stroke-width:1"/>
   <path id="column-1-row-2" d="m 0.50243229,869.8569 99.99513771,0" style="fill:none;stroke:#000000;stroke-width:1"/>
   <path id="column-1-row-3" d="m 0.50243229,888.85128 99.99513771,0" style="fill:none;stroke:#000000;stroke-width:1"/>
   <path id="column-1-row-4" d="m 0.50243229,894.8495 99.99513771,0" style="fill:none;stroke:#000000;stroke-width:1"/>
   <path id="column-1-row-5" d="m 0.50243229,900.84772 99.99513771,0" style="fill:none;stroke:#000000;stroke-width:1"/>
   <path id="column-1-row-6" d="m 0.50243229,921.8415 99.99513771,0" style="fill:none;stroke:#000000;stroke-width:1"/>
   <path id="column-1-row-7" d="m 0.50243229,963.82907 99.99513771,0" style="fill:none;stroke:#000000;stroke-width:1"/>
   <path id="column-1-row-8" d="m 0.50243229,1045.8048 99.99513771,0" style="fill:none;stroke:#000000;stroke-width:1"/>
</g>
</svg> 
```

我的问题是，您将如何使用 XSLT 将 XML 转换为 SVG？

就我而言，最大的挑战是设计计算*子区域*元素所需测量值（位置、宽度和高度）的方法，以便将它们正确放置在*区域根*元素中定义的列或行中。

另一方面，上面 SVG 中的*路径*元素可以被 SVG 中重叠的*rect*元素替换，只要它反映了存储在 XML 中的信息。基本上，我所需要的只是 XML 文件的可视化表示。

提前谢谢了！如果需要进一步澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T02:15:39.070

> 我的问题是，您将如何使用 XSLT 将 XML 转换为 SVG？

使用从每个元素属性到相应 SVG 的映射，如下例所示：

### XML

```
<?xml version="1.0"?>
<dataSet>
  <bar fill="rgb(255,100,75)">
    <value>71</value>
    <desc>01</desc>
  </bar>
  <bar fill="rgb(0,225,0)">
    <value>89</value>
    <desc>02</desc>
  </bar>
  <bar fill="rgb(75,100,245)">
    <value>23</value>
    <desc>03</desc>
  </bar>
  <bar fill="rgb(200,200,200)">
    <value>108</value>
    <desc>04</desc>
  </bar>
  <bar fill="rgb(245,245,25)">
    <value>93</value>
    <desc>05</desc>
  </bar>
</dataSet> 
```

### XSLT

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" >
  <xsl:template match="dataSet">
    <svg width="200px" height="250px" xmlns="http://www.w3.org/2000/svg">
      <g id="bar" transform="translate(0,200)">
        <xsl:for-each select="bar">
          <xsl:variable name="val" select="value"/>
          <rect x="{position()*25}" y="-{$val*1.5}" height="{$val*1.5}" width="15" style="fill:{@fill};"/>
          <text x="{position()*25 + 7.5}" y="0" style="font-family:arial;text-anchor:middle;baseline-shift:-15;">
            <xsl:value-of select="desc"/>
          </text>
        </xsl:for-each>
      </g>
    </svg>
  </xsl:template>
</xsl:transform> 
```

> 就我而言，最大的挑战是设计计算子区域元素所需测量值（位置、宽度和高度）的方法，以便将它们正确放置在区域根元素中定义的列或行中。

为此使用 CSS，如在这些不相关的问题中：

*   [在超链接区域内显示链接](https://stackoverflow.com/questions/4271927/displaying-a-link-within-a-hyperlinked-area/4271951#4271951)
*   [CSS：显示：内联块和定位：绝对](https://stackoverflow.com/questions/5042467/css-displayinline-block-and-positioningabsolute)

**参考**

*   [自动绘制树：XSLT 和 SVG](http://www.xml.com/lpt/a/1472)
*   [CSSPlay 旋转画廊](http://www.cssplay.co.uk/menu/cssplay-target-rotary.html)
*   [使用 XSLT 从 XML 创建 SVG 条形图](https://stackoverflow.com/questions/13862085/create-svg-bar-charts-from-xml-with-xslt/20408560#20408560)*

# java - 如何使用 Java 在 AS400 服务器中获取 PSF 设置

> ID：10698472
> 
> 赞同：0
> 
> 时间：2012-05-22T08:34:36.843
> 
> 标签：java, ibm-midrange, jt400, jtopen

我是这个网站的新手，但我知道这里的任何人都可以帮助我解决我现在遇到的这个问题。我曾经使用 JDK7 编写 Java，现在我面临着这个 JTOpen API for AS400-Java 接口，但我现在的问题是如何获取某个 Writer 的设备描述的所有 PSF 设置？

提前谢谢各位....

请帮忙.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:26:30.333

[在http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/print1a.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/apis/print1a.htm)查看打印 API

如果你能找到一个提供你正在寻找的信息的 API，那么从 java 调用它应该不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:37:44.293

其中一些信息在 com.ibm.as400.access.PrintObject 中可用，但不是全部。我会在 Retrieve AFP Information (QPQRAFPI) API 上编写一个包装程序/过程，并使用 JT400 来调用它。等效的 CL 命令是 WRKPSFCFG。

# c# - 用于在服务器上上传代码的软件工具

> ID：10698473
> 
> 赞同：0
> 
> 时间：2012-05-22T08:34:37.263
> 
> 标签：c#

在我们公司，我们在本地服务器上测试代码后手动上传服务器上的代码以使其生效。

因此，几乎所有开发人员都有权插入新代码和更新现有代码，并且任何开发人员都可以从现场删除/删除页面或代码。

所以，我只想跟踪哪个开发人员插入/更新/删除或访问服务器上部分代码的页面。

**`Is there any software available for uploading code on server ? Which keeps tracks of the user who has last access the page that is on server.`**

我想要一个这样的工具，以便我可以收到谁更改或编辑代码或页面的通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:38:34.173

我不知道有任何东西会监视文件的更改并记录进行更改的进程正在运行的用户。

这个问题通常通过拥有（至少）一个 VCS（git、svn、mercurial、cvs 等）来解决。这记录了谁对代码进行了哪些更改。

在持续集成服务器（例如 Jenkins CI）上运行自动构建是很常见的。

理想情况下，这些构建会生成一个安装在服务器上的可安装包（例如 deb、rpm），而不是手动复制代码。

# javascript - 检测 facebook 用户是否在没有弹出窗口的情况下登录

> ID：10698475
> 
> 赞同：2
> 
> 时间：2012-05-22T08:34:57.950
> 
> 标签：javascript, jquery, facebook

我正在尝试检查用户是否已登录 facebook（并重定向到其他页面），但我无法为此打开任何弹出窗口：

这将起作用：但会打开一个弹出窗口以防用户未登录 facebook

```
FB.login(function(response) {
    if(response.status == 'connected')
              /*Redirect here*/
}); 
```

这在我的另一个网站上工作，但不是在这里

```
window.fbAsyncInit = function() {
                FB.init({
                  appId      : myAppid, // App ID 
                  status     : true, // check login status
                  cookie     : true, // enable cookies to allow the server to access the session
                  xfbml      : true  // parse XFBML
                });
                FB.Event.subscribe('auth.login', function() {
                      /* REDIRECT HERE */
                });
              };
              // Load the SDK Asynchronously
              (function(d){
                 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                 if (d.getElementById(id)) {return;}
                 js = d.createElement('script'); js.id = id; js.async = true;
                 js.src = "//connect.facebook.net/es_ES/all.js";
                 ref.parentNode.insertBefore(js, ref);
               }(document)); 
```

这里有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T08:43:22.773

您可以使用它[`FB.getLoginStatus`](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)来获取您想要的信息。

> 在当前浏览器会话中第一次`FB.getLoginStatus`被调用，或者 JS SDK 被初始化时`status: true`，响应对象将被 SDK 缓存。后续调用`FB.getLoginStatus`将从此缓存响应返回数据。

文档中的示例：

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
}); 
```

# java - 如何使用 JSOUP 获取解析的 HTML 特殊字符

> ID：10698477
> 
> 赞同：2
> 
> 时间：2012-05-22T08:35:03.620
> 
> 标签：java, jsoup

我正在使用 JSoup 从网页中获取 H1 标签值，该标签包含以下 HTML。

**己基β-D-吡喃葡萄糖苷**

当我使用 .text() 方法时，我得到以下信息。（注意？）我认为这是因为它无法计算出“β”字符的 HTML。我如何获得在网页上呈现的这个值。

**己基 α-D-吡喃葡萄糖苷**

* * *

拿起我想要的文字后，是否需要进行某种转换？

这是我的代码。

```
 String check = "<title>Hexyl &#946;-D-glucopyranoside &#8805;98.0% (TLC) | &#8805; &#8805;</title>";
        Document doc3 = Jsoup.parse(check);
        doc3.outputSettings().escapeMode(Entities.EscapeMode.base); // default

        doc3.outputSettings().charset("UTF-8");
        System.out.println("UTF-8: " + doc3.html());
        //doc3.outputSettings().charset("ISO 8859-1");
        doc3.outputSettings().charset("ASCII");
        System.out.println("ASCII: " + doc3.html());` 
```

------控制台输出-----

```
 UTF-8: <html>
    <head>
    <title>Hexyl ?-D-glucopyranoside ?98.0% (TLC) | ? ? </title>
     </head>
    <body></body>
   </html>
   ASCII: <html>
    <head>
    <title>Hexyl &#946;-D-glucopyranoside &#8805;98.0% (TLC) | &#8805; &#8805;</title>
     </head>
    <body></body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:43:05.703

看起来您使用的 IDE 使用了错误的字符编码。

这与您的代码无关，因为我已经运行它并且很好（输出奇怪的字符）。如果您使用的是 Eclipse，请转到该特定项目的运行配置设置并单击“通用”选项卡，然后选择 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:24:46.790

解析文档后设置字符集为时已晚。我曾经遇到过同样的问题，试图按照你的方式去做，但失败了。

这对我有用：

```
String url = "url to html page";
InputStream is is =new URL(url).openStream();
org.jsoup.nodes.Document doc = org.jsoup.Jsoup.parse(is , "ISO-8859-2", url); 
```

如果我只有 html 文本作为字符串，我首先将其转换为 InputString ( [http://www.kodejava.org/examples/265.html](http://www.kodejava.org/examples/265.html) )

```
InputStream is = new ByteArrayInputStream(text.getBytes("UTF-8")); 
```

然后用正确的字符集阅读它：

```
BufferedReaderr = new BufferedReader(new InputStreamReader(is, "UTF-8"), 4*1024);
StringBuilder total = new StringBuilder();
String line = "";
while ((line = r.readLine()) != null) {
     total.append(line);
}
r.close();
is.close();
String html = total.toString(); 
```

...并解析：

```
doc = org.jsoup.Jsoup.parse(html); 
```

重要的是以某种方式获取 InputStream 对象，并且从这里有一些方法可以使用您想要的字符集。也许它可以以更直接的方式完成。但它有效。

# objective-c - 如何按对象的参数对 NSMutableArray 进行排序

> ID：10698480
> 
> 赞同：2
> 
> 时间：2012-05-22T08:35:06.983
> 
> 标签：objective-c, sorting, nsmutablearray

我有带有参数`NSMutableArray`的对象。我必须按此参数对对象进行排序。`Link``Byte taskOne`

```
 for (Byte i = 0; i < [linksArray count]-1; i++) {
        Link *l = [linksArray objectAtIndex:i];
        Link *lNext = [linksArray objectAtIndex:i+1];
        if (l.taskOne >= lNext.taskOne) {
            NSLog(@"%d >= %d", l.taskOne, lNext.taskOne);
            [linksArray replaceObjectAtIndex:i withObject:lNext];
            [linksArray replaceObjectAtIndex:i+1 withObject:l];
        }
    } 
```

这给了我错误的结果，但我不知道出了什么问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:40:30.520

对数组进行排序的最简单方法是使用`NSSortDescriptor`KVC，如下所示：

```
NSArray *linksArray;    // Assume that this contains objects which respond to the -taskOne method

NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"taskOne" ascending:YES];
NSArray *sortedLinks = [linksArray sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

这将创建一个新数组。`NSMutableArray`要就地排序，请执行以下操作：

```
NSMutableArray *linksArray; // Assume that this contains objects which respond to the -taskOne method

NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"taskOne" ascending:YES];
[linksArray sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:41:29.833

这看起来像一种冒泡排序，但你需要两个循环。目前，您通过数组运行一次​​，最高的对象应该在最新的索引处。现在您需要遍历数组直到长度为 1。尝试这样的事情：

```
for (Byte j = 1; j < [linksArray count]; j++) {
    for (Byte i = 0; i < [linksArray count]-j; i++) {
        //your code from above
    }
} 
```

# django - 接受布尔值并返回 html 的 Django 模板标签

> ID：10698482
> 
> 赞同：1
> 
> 时间：2012-05-22T08:35:08.917
> 
> 标签：django, django-templates

我有一些 HTML 将在多个地方使用。

```
 {% if event.finished_payments %}
            <span class="label label-success">Complete</span>
            {% else %}
            <span class="label label-important">Incomplete</span>
            {% endif %} 
```

我想编写一个模板标签，它接受一个 bool 并返回`<span class="label label-success">Complete</span>`或`<span class="label label-important">Incomplete</span>`取决于参数是否`True`或`False`我认为看起来像这样：

{% tf_label event.finished_pa​​yments %}

`include`或者，是否有另一种使用模板标签并传入参数来实现此目的的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:51:43.200

这应该可以解决问题（未经测试）：

```
from django import template

register = template.Library()

@register.simple_tag
def tf_label(request, complete):
    if complete:
        element = '<span class="label label-success">Complete</span>'
    else
        element = '<span class="label label-important">Incomplete</span>'

    return element 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T08:55:35.880

```
{{ event.finished_payments|yesno:"<span class='label label-success'>Complete</span>,<span class='label label-important'>Incomplete</span>" }} 
```

但它认为，`{% if %}`在这里使用标签是最好的主意，它更具可读性。无论如何，HTML 应该存在于模板中，而不是 Python 代码中。

# android - 从不同的 Activity 启用按钮 android

> ID：10698485
> 
> 赞同：0
> 
> 时间：2012-05-22T08:35:16.560
> 
> 标签：android, button, android-activity

在我的代码中，我有一个禁用按钮，`activity 'A'` 我可以在`activity 'A'`from上启用该按钮`activity 'B'`吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T08:38:55.410

通常，你不能。

如果您正在从活动 B 调用活动 A，那么您可以通过意图传递有关是否启用按钮的信息。

如果 A 调用 B 并且您需要根据用户在 B 中的操作在 A 中执行某些操作，那么您可以调用 B`startActivityForResult`并将结果从 B 发送回 A；然后在`onActivityResult`您的活动 A 中，您可以根据 B 传回的内容启用/禁用按钮。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-22T08:47:44.107

使用一个`Global class`并声明`static boolean flag`变量

并`set flag value`根据需要设置 Button 的属性`btn.setEnabled(Global.flag);`

# asp.net-mvc - Knockout.js 和复选框列表：发布到 mvc 控制器

> ID：10698486
> 
> 赞同：6
> 
> 时间：2012-05-22T08:35:18.167
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, knockout.js, knockout-mapping-plugin

我有一个看起来像这样的 MVC 视图模型：

```
public class DirectorySearchModel
{
    [Display(Name = "First name contains")]
    public string FirstName { get; set; }

    [Display(Name = "Last name contains")]
    public string LastName { get; set; }

    public CountriesCollection Countries { get; set; }
    public IEnumerable<Country> SelectedCountries { get; set; }
    public IEnumerable<Country> AllCountries { get; set; }
} 
```

CountryCollection 对象（第 9 行）如下所示：

```
public class CountriesCollection
{
    [Display(Name = "Countries")]
    public int[] arrCountries { get; set; }
} 
```

现在，我正在创建 CountryCollection 的新空白实例，然后将其添加到 DirectorySearchModel 视图模型的空白实例中，然后将其全部序列化为 Knockout.js 的 javascript 视图模型：

```
{
"FirstName":null,

"LastName":null,

"Countries":{"arrCountries":[]},

"SelectedCountries":[{"RelationshipManager":{},"CountryId":1,"CountryName":"UK"},{"RelationshipManager":{},"CountryId":2,"CountryName":"France"},{"RelationshipManager":{},"CountryId":3,"CountryName":"Spain"}],

"AllCountries":[{"RelationshipManager":{},"CountryId":1,"CountryName":"UK"},{"RelationshipManager":{},"CountryId":2,"CountryName":"France"},{"RelationshipManager":{},"CountryId":3,"CountryName":"Spain"}]
} 
```

我的复选框呈现为：`<input checked="checked" data-bind="checked: Countries.arrCountries" id="Countries_arrCountries30" name="Countries.arrCountries" type="checkbox" value="1">`. 检查一对意味着你最终得到了这个 Knockout.js 视图模型：

```
{
"FirstName":null,

"LastName":null,

"Countries":{"arrCountries":["1", "3"]},

"SelectedCountries":[{"RelationshipManager":{},"CountryId":1,"CountryName":"UK"},{"RelationshipManager":{},"CountryId":2,"CountryName":"France"},{"RelationshipManager":{},"CountryId":3,"CountryName":"Spain"}],

"AllCountries":[{"RelationshipManager":{},"CountryId":1,"CountryName":"UK"},{"RelationshipManager":{},"CountryId":2,"CountryName":"France"},{"RelationshipManager":{},"CountryId":3,"CountryName":"Spain"}]
} 
```

将我的视图正常提交（即通过提交按钮而不是使用 Knockout.js）到需要 a 的 MVC 操作`DirectorySearchModel`，我可以要求`model.Countries.arrCountries`获取已检查项目的列表，但是当我使用...

```
$.post("/MyController/MyAction", ko.toJS(viewModel), function(returnData) {
    $("#resultCount").html(returnData);
}); 
```

或者...

```
$.post("/MyController/MyAction", viewModel, function(returnData) {
    $("#resultCount").html(returnData);
}); 
```

对另一个期望相同的动作`DirectorySearchModel`， `model.Countries.arrCountries`总是`null`！我想知道这是否是由于 Knockout.js在 MVC 期望 s 时将`arrCountries`条目发布为s，但是将我的 MVC 代码更改为期望s 似乎并没有太大变化..！内在的对象似乎存在，但始终存在的却是内在。`string[]``int[]``string[]``CountriesCollection``DirectorySearchModel``arrCountries``null`

有任何想法吗？非常感谢任何帮助！

## 编辑

接收 Knockout.js viewModel 的操作：

```
public MvcHtmlString ResultCount(DirectorySearchModel model)
{
    return new MvcHtmlString(getResultCount(model).ToString());
} 
```

`getResultCount`方法：

```
public int getResultCount(DirectorySearchModel model)
{
    IUserRepository userRepository = new UserRepository();
    int count = userRepository.Search(model, null).Count();
    return count;
} 
```

## 固定的！

感谢 Konstantin 指出只需简单地从 $.post 切换到 $.ajax 即可将我的 Knockout.js 视图模型发送回我的 mvc 操作！这是我正在使用的 $.ajax 代码：

```
$.ajax({  
    type: "POST",
    url: "/MyController/MyAction",
    data: ko.toJSON(viewModel),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data) {
        $("#resultCount").html(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:30:00.797

您不能使用 $.post 您需要使用底层 $.ajax 并添加正确的内容类型以使 mvc 接受发布的 json 并进行模型绑定（内容类型应为“application/json; charset=utf-8”）google为它，你会看到很多例子

# c++ - Binary I/O to file with 2 dimensional dynamic array

> ID：10698495
> 
> 赞同：0
> 
> 时间：2012-05-22T08:35:48.760
> 
> 标签：c++, arrays, serialization, dynamic, binary

I am having troubles with I/O to file with 2 dimensional dynamic array. It compiles good but it does not work as I want. Example, I save "map" of numbers 1 and after this I change number in source code to example 5 and compile it, now I load my "map" of numbers 1 but when it writes in cycle for at the end it, the output is 5 not 1\. Please can somebody help to fix the code?

```
#include <iostream>
#include <fstream>
int main()
{
int ** array;

array = new int*[20];
for(int y=0;y<20;y++)
    array[y] = new int[30];

for(int y=0;y < 20;y++)
    for(int x=0;x < 30;x++)
        array[y][x] = 1;

int volba = 1;
std::cin >> volba;

if(volba)
{
    std::ifstream in("map",std::ios::in | std::ios::binary);
    if(!in.is_open())
        std::cout << "in map open error\n";
    in.read((char*)&array, sizeof(array));
    in.close();
    std::cout << "loaded\n";
}
else
{
    std::ofstream out("map",std::ios::out | std::ios::binary);
    if(!out.is_open())
        std::cout << "out map open error\n";
    out.write((char*)&array, sizeof(array));
    out.close();
    std::cout << "saved\n";
}

std::cout << "array\n";
for(int y=0;y < 20;y++)
{
    for(int x=0;x < 30;x++)
        std::cout << array[y][x] << " ";
    std::cout << std::endl;
}

for(int y=0;y<20;y++)
    delete [] array[y];
delete [] array;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:48:34.713

The main problem is this: Hereby

```
array = new int*[20]; 
```

you allocate an array of pointers, and this will not become a two dimensional array as you later do:

```
array[y] = new int[30]; 
```

Note that there is a difference between this

```
// array of pointers to integer arrays
int ** array = new int*[20];
for(int y=0;y<20;y++)
  array[y] = new int[30]; 
```

and this

```
// two dimensional integer array
int array[20][30]; 
```

You cannot assume that your array of arrays will lie in contiguous memory.

* * *

Besides: Hereby

```
out.write((char*)&array, sizeof(array)); 
```

you just write out the pointer, not the actual data. Try to print the `sizeof(array)`:

```
#include <iostream>

int main() {
  int * array = new int[10];
  std::cout << sizeof(array) << std::endl; // probably prints 4 or 8
  return 0;
} 
```

* * *

Conclusion: Unless you need to implement this for educational purposes, [std::vector](http://en.cppreference.com/w/cpp/container/vector) will far more conveniently serve you memory management for free. Also have a look on [Boost Serialization](http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/index.html). It provides functionality for serialization of STL collections.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:41:12.710

The error is in the fact that `sizeof(array)` equals to the size of a *pointer*, not the size of dynamically allocated memory. As an effect, you read/write only 4 (or 8) bytes. Use actual array size (in this case `20*30`) instead of `sizeof(array)`.

# compilation - 为 Windows8-Metro 环境编译 WebKit

> ID：10698498
> 
> 赞同：4
> 
> 时间：2012-05-22T08:36:04.423
> 
> 标签：compilation, webkit, windows-8, windows-runtime, winrt-xaml

我想向 SO 社区询问以下信息： - 是否可以为 Windows8-Metro 环境编译 WebKit，以 WinRT 组件的形式或仅作为 C++/XAML 应用程序中的链接库？- 实现这一目标的主要步骤是什么？- 哪些可能的事情会使这不可能或非常困难？- 是否有人正在努力？- 是否有可能聚集感兴趣的人，让他们从事这方面的工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T14:23:21.147

我认为你不能只为 WinRT/Metro 风格“编译”Webkit。Metro Style 应用程序的 API 调用类型受到限制，例如 WinRT 没有 GDI/GDI+/MFC。WebKit 有几种你可以使用的构建模式，你可以使用 QT 作为渲染引擎，或者使用 GTK，或者纯 GDI，但是在所有这些情况下，当你为 Windows 操作系统创建新的构建时，你将在最后。

不过，您可以修改 Webkit 源代码并添加使用 WinRT 新 API 的新渲染引擎。如果你这样做，你可能会成名。

附带说明一下，即使有 Chrome 的“Windows Store”版本，通过查看 Chromium 的源代码，在我看来这个版本只是一个简单的应用程序启动器，它使用“普通”桌面版本与IPC 通道。它似乎不是整个源代码的真正 Windows 应用商店构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T04:51:21.677

我不确定 WinRT 环境是否允许这样做，但有一个名为[Awesomium](http://awesomium.com/)的项目是 Google Chrome 的包装器，我认为 Google Chrome 是基于 WebKit 的。它还具有 .NET 包装器，因此您可以将其嵌入到您的 .NET 应用程序中。

我从未尝试过使用它，也不知道这个库是否适用于 WinRT，但至少这是一个开始。

*   [极品](http://awesomium.com/)
*   [Awesomium .NET 示例](http://awesomium.codeplex.com)
*   [DownMakerWPF](https://github.com/Code52/DownmarkerWPF)，一个嵌入它以显示降价的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:48:09.113

WinRT 是托管代码和本机代码的组合，因此，您有机会移植 WebKit，但请记住 - 本机代码有一些沙盒限制。

您也可以选择 XNA。

# java - 如何在 Weld 中将 Jersey bean 注入到 Quartz 工作中？

> ID：10698503
> 
> 赞同：1
> 
> 时间：2012-05-22T08:36:14.023
> 
> 标签：java, dependency-injection, jersey, quartz-scheduler, jboss-weld

我在 Glassfish 和 jetty-servlet 中都有一个纯 JAX-RS 应用程序。我正在尝试将一些 bean 注入 Quartz 工作中。

我已经用 注释了 Job 字段`@javax.inject.Inject`，但我也相信我需要让 Job factory 可用于容器，反之亦然 - 我在这里有点迷失了从什么开始。

我该如何完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:46:40.580

嗨，Victor，没有关于您的应用程序的更多详细信息，我假设您在 servlet 容器中运行。使用“纯”JAX-RS 应用程序无法做到这一点。

不过，我建议您使用 CDI（Weld 或 OpenWebBeans）。然后，您可以使用 Deltaspike 启用 Quartz 作业中的请求上下文，以获取对请求范围 bean 的引用。

在 servlet 容器中启用 Weld 非常[简单](http://docs.jboss.org/weld/reference/1.1.0.Final/en-US/html/environments.html#d0e5221)

[此处](http://struberg.wordpress.com/2012/03/17/controlling-cdi-containers-in-se-and-ee/)提供了有关在 HTTP 请求之外启用请求上下文的指南

默认情况下，您不能将 @RequestScoped bean 注入到您的石英作业中（没有 HTTP 请求，因此没有请求上下文）。要解决此问题，您可以按照上面的链接启用请求上下文，或者（可能是我的方法）将 @Dependent 范围内的 bean（它完成工作）注入您的 JAX RS bean（基本上是包装器），然后您可以轻松获取引用到您的石英作业中的 @Dependent 范围 bean。

这是我的[web.xml](https://gist.github.com/2767693)和[pom.xml](https://gist.github.com/2769823)，用于在 jetty 中运行 Weld 和 Jersey，您将需要 jetty-plus、jetty-jndi 和 Weld 依赖项。

以下是有关在 jetty 中设置 JNDI 的一些[信息](http://docs.codehaus.org/display/JETTY/JNDI)，但是我不使用此方法，因为我将 jetty 作为 SE 应用程序中的嵌入式容器启动，这是我所做的代码片段：

```
String[] configurationClasses =
{
    "org.eclipse.jetty.webapp.WebInfConfiguration",
    "org.eclipse.jetty.webapp.WebXmlConfiguration",
    "org.eclipse.jetty.webapp.MetaInfConfiguration",
    "org.eclipse.jetty.webapp.FragmentConfiguration",
    "org.eclipse.jetty.plus.webapp.EnvConfiguration",
    "org.eclipse.jetty.webapp.JettyWebXmlConfiguration"
};
WebAppContext webapp = new WebAppContext();
webapp.setConfigurationClasses(configurationClasses);
webapp.setDescriptor("/path/to/webapp/WEB-INF/web.xml");
webapp.setContextPath("/");
webapp.setResourceBase("/path/to/webapp");
webapp.setClassLoader(Thread.currentThread().getContextClassLoader()); 
```

# django - 如何从另一个模型将值传递给 InputHidden charField 中的 Django-Modelform

> ID：10698515
> 
> 赞同：1
> 
> 时间：2012-05-22T08:36:51.303
> 
> 标签：django, django-models, django-forms

我有这个form.py：

```
 from shortcut import get_timezone
 class HostCreateForm(forms.ModelForm):
     def save(self, commit=True):
         host1 = super(HostCreateForm, self).save(commit=False)
         user = request.user.username 
         host1.timezone=get_timezone(user=user)
         host1.save()
         return host1

 class Meta:
     model = Host
     widgets = {
         'user': forms.HiddenInput(),
         'timezone': forms.HiddenInput()
     } 
```

**timezone**

**get_timezone**

```
 def get_timezone(user=None):
 timezone = Userprofile.objects.all()
 timezone = timezone.get(user=user)
 return timezone.timezone 
```

而 UserProfile 是也在 models.py 中定义的另一个模型，用于存储用户注册时的时区、名字和姓氏。我的主要动机是从 Userprofile 模型中获取这个默认时区并将其传递给隐藏的输入字段（时区）。我尝试使用上面的代码（host1.timezone=get_timezone(user=user) 编写在 save 方法中调用 get_timezone 方法，它应该为登录用户返回时区表单 Userprofile 模型，但它没有工作。

我认为主要问题是在从 save 方法调用 get_timezone 方法时传递请求用户的名称。我无法做到这一点。从当前场景中，我收到以下错误： *未定义全局名称“请求”*

任何帮助都将是可观的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:44:13.110

```
timezone = timezone.filter(user=user)
return timezone.timezone 
```

`timezone.filter(...)`将返回一个查询集，您不能调用`.timezone`查询集。您必须使用以下任一方法获取相关对象`get`：

```
timezone = timezone.get(user=user) 
```

或通过列表切片：

```
timezone = timezone.filter(user=user)[0] 
```

更新：好的，我只是注意到它。

问题是，您不能将请求对象传递给表单的`save`方法。处理该问题的最佳方法是在您的视图层中进行。

在您看来：

```
my_form = HostCreateForm(request.POST):
    if my_form.is_valid(): #do the validation
        my_inst = my_form.save(commit=False) #pass the form values to a new model instance without saving.
        my_inst.timezone = request.user.username #set the user or do whhatever you want eith the form data.
        my_inst.save() #that will call your save methhod that you override. 
```

`save`然后您从您的方法中删除设置用户的部分。

# java - 具有继承的静态块的行为

> ID：10698516
> 
> 赞同：34
> 
> 时间：2012-05-22T08:36:59.570
> 
> 标签：java, inheritance, static, static-block

我正在尝试使用这样的静态块：

我有一个名为的基类`Base.java`

```
public class Base {

    static public int myVar;

} 
```

和一个派生类`Derived.java`：

```
public class Derived extends Base {

    static
    {
        Base.myVar = 10;
    }
} 
```

我的`main`功能是这样的：

```
public static void main(String[] args)  {
    System.out.println(Derived.myVar);
    System.out.println(Base.myVar);
} 
```

`0 0`这会按照我的预期打印输出`10 0`。有人可以解释这种行为吗？另外，如果我希望我的派生类设置静态变量的值，我该如何实现？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-22T08:57:48.923

我认为。您不调用任何`Derived`属性（`myVar`属于`Base`，不属于`Derived`）。并且 java 没有从`Derived`. 如果您添加一些静态字段`Derived`并访问它，那么 java 会执行所有静态块。

```
class Base {

    static public int myVar;

}

class Derived extends Base {

    static public int myVar2;

    static
    {
        Base.myVar = 10;
    }
}

public class Main {
    public static void main( String[] args ) throws Exception {
        System.out.println(Derived.myVar2);
        System.out.println(Base.myVar);
    }
} 
```

根据 java 规范，当类被初始化（并且静态块被执行）时：

> 12.4.1 初始化发生时 类或接口类型 T 将在以下任何一项第一次出现之前立即初始化：
> 
> • T 是一个类，并创建了一个 T 的实例。
> • T 是一个类，并且调用了由 T 声明的静态方法。
> • 分配了一个由 T 声明的静态字段。
> • 使用了由 T 声明的静态字段，并且该字段不是常量变量（第 4.12.4 节）。
> • T 是一个顶级类（第 7.6 节），并且执行在词法上嵌套在 T（第 8.1.3 节）中的断言语句（第 14.10 节）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T08:52:58.737

静态初始化程序块在类初始化之前不会运行。请参阅[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)第 8.7 段（静态初始化程序）和 12.4.1（初始化发生时）：

> 类中声明的静态初始化程序在类初始化时执行（第 12.4.2 节）。与类变量的任何字段初始化器（第 8.3.2 节）一起，静态初始化器可用于初始化类的类变量。

这是直接来自 JLS 12.4.1 的类似示例：

```
class Super {
  static int taxi = 1729;
}
class Sub extends Super {
  static { System.out.print("Sub "); }
}
class Test {
  public static void main(String[] args) {
    System.out.println(Sub.taxi);
  }
} 
```

> 该程序仅打印：

```
1729 
```

> 因为 Sub 类从未初始化；对 Sub.taxi 的引用是对 Super 类中实际声明的字段的引用，不会触发 Sub 类的初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T08:51:06.490

有一个副本，`myVar`父类和子类将共享相同的副本。直到和除非子类被初始化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T07:56:42.707

当我们这样做

```
class Base {

    public static int myVar = 0;
    static {
        System.out.println("Base");
    }
}

class Derived extends Base {

    static {
        System.out.println("Derived");
        Base.myVar = 9;

    }
}

public class StaticBlock {

    public static void main(String[] args) {

        System.out.println(Base.myVar);
        System.out.println(Derived.myVar);
    }
} 
```

输出将是 `Base 0 0`

这意味着派生类的静态块没有执行..!!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T08:54:25.787

这是 Java 规范的链接 - 第 8.7 节讨论了静态初始化程序。它提供了有关它们应该如何运行以及它们被调用的顺序的详细信息。[http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7)

# windows - win32控制台项目生成日志文件出错

> ID：10698521
> 
> 赞同：0
> 
> 时间：2012-05-22T08:37:25.500
> 
> 标签：windows, visual-studio-2010, visual-c++, mfc, ini

我有一个生成日志文件的代码：-

```
// INI.cpp: implementation of the CINI class.

//#include "stdafx.h"

#include "INI.h"
#include <iostream>

#ifdef _DEBUG
#undef THIS_FILE
static char THIS_FILE[]=__FILE__;
#define new DEBUG_NEW
#endif

CINI::CINI(char* szFileName)
{

    memset(m_szFileName, 0x00, 255); 
    memcpy(m_szFileName, szFileName, strlen(szFileName));

}

CINI::~CINI()
{

}

float CINI::ReadFloat(char* szSection, char* szKey, float fltDefaultValue)
{
    char szResult[255]; 
    char szDefault[255]; 
    float fltResult; sprintf(szDefault, "%f",fltDefaultValue); 
    GetPrivateProfileString(szSection,  szKey, szDefault, szResult, 255, m_szFileName);  
    fltResult =  atof(szResult); return fltResult;
}

bool CINI::ReadBoolean(char* szSection, char* szKey, bool bolDefaultValue)
{
    char szResult[255]; 
    char szDefault[255]; 
    bool bolResult; 
    sprintf(szDefault, "%s", bolDefaultValue? "True" : "False"); 
    GetPrivateProfileString(szSection, szKey, szDefault, szResult, 255, m_szFileName);
    bolResult =  (strcmp(szResult, "True") == 0 || strcmp(szResult, "true") == 0) ? true : false; return bolResult;
}

char* CINI::ReadString(char* szSection, char* szKey, const char* szDefaultValue)
{ 
    memset(m_szResult, 0x00, 255); 
    GetPrivateProfileString(szSection,  szKey, szDefaultValue, m_szResult, 255, m_szFileName);  
    return m_szResult;
}

void CINI::WriteInteger(char* szSection, char* szKey, int iValue)
{ 
    char szValue[255]; sprintf(szValue, "%d", iValue); 
    WritePrivateProfileString(szSection,  szKey, szValue, m_szFileName);
}

void CINI::WriteFloat(char* szSection, char* szKey, float fltValue)
{
    char szValue[255]; 
    sprintf(szValue, "%f", fltValue); 
    WritePrivateProfileString(szSection,  szKey, szValue, m_szFileName);
}

void CINI::WriteBoolean(char* szSection, char* szKey, bool bolValue)
{ 
    char szValue[255]; sprintf(szValue, "%s", bolValue ? "True" : "False"); 
    WritePrivateProfileString(szSection,  szKey, szValue, m_szFileName);
}

void CINI::WriteString(char* szSection, char* szKey, char* szValue)
{
    WritePrivateProfileString(szSection,  szKey, szValue, m_szFileName);
} 
```

**运行代码时出现以下错误：-**

```
c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\afx.h(24): fatal error C1189: #error :  Building MFC application with /MD[d] (CRT dll version) requires MFC shared dll version. Please #define _AFXDLL or do not use /MD[d] 
```

**当我包含 StdAfx.h 和 StdAfx.cpp 时，我收到以下错误：-**

```
 StdAfx.cpp
1>c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\afx.h(24): fatal error C1189: #error :  Building MFC application with /MD[d] (CRT dll version) requires MFC shared dll version. Please #define _AFXDLL or do not use /MD[d]
1>  INI.cpp
1>c:\program files\microsoft visual studio 10.0\vc\atlmfc\include\afx.h(24): fatal error C1189: #error :  Building MFC application with /MD[d] (CRT dll version) requires MFC shared dll version. Please #define _AFXDLL or do not use /MD[d] 
```

我正在使用 VS2010，需要构建 win32 控制台项目。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:46:59.000

您必须更改项目的属性：

转到项目-> 属性（最后一个菜单项）-> 配置属性-> 常规。

在那里，您将看到带有“使用 MFC”选项的“项目默认值”部分。选择“在静态库中使用 MFC”。

基本上，您遇到了冲突，因为在代码生成设置中选择了多线程静态运行时库，并且您尝试使用的 MFC 库是使用基于 dll 的 C 运行时构建的。

# opengl - 为什么我不能将纹理加载到我的应用程序中？

> ID：10698522
> 
> 赞同：1
> 
> 时间：2012-05-22T08:37:28.593
> 
> 标签：opengl, textures, texture-mapping, texture2d

我认为纹理映射是一项非常简单的任务。实际上，我实施了很多次，但这次失败了，不知道为什么？而且我可以保证加载纹理的路径是正确的。我的困惑还有其他原因吗？

这是我的代码：

```
GLuint mytexture;
// two functions below come from NeHe's tut. I think it works well.
AUX_RGBImageRec *LoadBMP(CHAR *Filename)                
{
    FILE *File=NULL;                                    
if (!Filename)                                      
{
    return NULL;                                    
}
File=fopen(Filename,"r");                           
if (File)                                           
{
    fclose(File);                                   
    return auxDIBImageLoadA(Filename);              
}
return NULL;                                        
}

int LoadGLTextures()                                    
{
int Status=FALSE;                                   
AUX_RGBImageRec *TextureImage[1];                   
memset(TextureImage,0,sizeof(void *)*1);            

if (TextureImage[0]=LoadBMP("NeHe.bmp"))
{
    Status=TRUE;                                    
    glGenTextures(1, &mytexture);                   
    glBindTexture(GL_TEXTURE_2D, mytexture);
        glTexImage2D(GL_TEXTURE_2D, 0, 3, TextureImage[0]->sizeX, TextureImage[0]->sizeY, 0, 
        GL_RGB, GL_UNSIGNED_BYTE, TextureImage[0]->data);

    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); 
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR); 
}

if (TextureImage[0])                                
{
    if (TextureImage[0]->data)                      
    {
        free(TextureImage[0]->data);                
    }

    free(TextureImage[0]);                          
}
return Status;                                      
}

//next is my Init() code:
bool DemoInit( void )
{
if (!LoadGLTextures())                          
{
    return FALSE;                                   
}
glEnable(GL_TEXTURE_2D);
........//other init is ok
}

bool DemoRender()
{
...///render other things
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, mytexture);
glColor3f(0,0,1);
glBegin(GL_QUADS);
glTexCoord2f(0, 0); glVertex2f(0, 0);
glTexCoord2f(1, 0); glVertex2f(200, 0);
glTexCoord2f(1, 1); glVertex2f(200, 200);
glTexCoord2f(0, 1); glVertex2f(0, 200);
glEnd();
glDisable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, 0);
} 
```

很清楚，哈？但是，最终结果只有一个没有纹理的蓝色矩形。任何人都可以给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:44:38.000

假设`TextureImage[0]->data`正确填充：

> 但是，最终结果只有一个没有纹理的**蓝色矩形。**

您正在使用默认[`GL_MODULATE`](http://www.khronos.org/opengles/documentation/opengles1_0/html/glTexEnv.html)纹理环境。切换`glColor3f(0,0,1)`到`glColor3f(1,1,1)`或使用`GL_DECAL`.

您也可以尝试 a [`glPixelStorei(GL_UNPACK_ALIGNMENT, 1)`before your`glTexImage2D()`](http://www.opengl.org/wiki/Common_Mistakes#Texture_upload_and_pixel_reads)因为您使用的是`GL_RGB`for *format*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:12:45.870

问题是我在加载纹理之前设置了 GL_LINE 模式，但我没有注意到这一点。所以在我设置了 GL_FILL 模式后，一切都很好！！！

# php - 使用 MySql、PHP 和 ADODB 在准备好的语句中参数化 IN 子句

> ID：10698524
> 
> 赞同：4
> 
> 时间：2012-05-22T08:37:31.073
> 
> 标签：php, mysql, sql, prepared-statement, adodb

我正在编写一些 SQL 并使用 AdoDb 连接到我的数据库并运行查询等等。我正在使用参数化查询并且遇到了障碍。

他们是一种将值数组传递给 AdoDb/MySql 中的 in_clause 以进行参数化的方法。

我的问题是，如果我将准备好的字符串作为参数传递，即**'test','test2','test3'**它不起作用，因为库或数据库会自动转义它并在开头和结尾添加外部引号，因此所有内部然后引号会自动转义，因此查询不会返回任何内容，因为它会查找**'\'test\',\'test2\',\'test3\''**而不是我输入的内容。

**更新了另一种可能的方法来完成这个**

```
<?php
$in_clause = implode(",", $first_names);

$query = "
SELECT    
    mytable_id_pk
FROM 
    mytable
WHERE
FIND_IN_SET(mytable_fname," . $DB->Param('first_names') . ")"

$stmt = $DB->Prepare($query);

$result = $DB->Execute($stmt,array($in_clause));
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T09:04:40.473

我会这样做（因为我在谷歌上搜索了一段时间，谷歌没有找到任何有用的东西）：

```
$count = count($first_names);
$in_params = trim(str_repeat('?, ', $count), ', ');

$query = "
SELECT    
    mytable_id_pk
FROM 
    mytable
WHERE
    mytable_fname IN ({$in_params});";

$stmt = $DB->Prepare($query);
$result = $DB->Execute($stmt, $first_names); 
```

这个应该做...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T09:04:45.157

先说几个tips：

1.  请仔细阅读有关准备好的语句的 AdoDB 文档。
2.  从不包括 ; 在 SQL 查询字符串中。

你可以尝试这样的事情：

```
$question_marks = substr(str_repeat('?,', count($first_names)), 0, -1);

$query = "SELECT mytable_id_pk FROM mytable WHERE mytable_fname IN (" . $question_marks . ")";
$stmt = $DB->Prepare($query);
$result = $DB->Execute($stmt,$first_names); 
```

警告：我没有对此进行测试（这里没有安装 mySQL）。

# apache - 如何在一个端口和一个服务器块上设置具有不同域的 nginx

> ID：10698526
> 
> 赞同：5
> 
> 时间：2012-05-22T08:37:52.143
> 
> 标签：apache, nginx, reverse-proxy

我有

```
server {
    listen 80;
    server_name domain1 domain2 domain3

    location / {
        proxy_pass http://127.0.0.1:8088;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $remote_addr;

        proxy_connect_timeout   120;
        proxy_send_timeout      120;
        proxy_read_timeout      180;
    }
}

server {
     listen domainX:80;
     server_name domainX www.domainX

     location / {
            proxy_pass http://127.0.0.1:8088;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $remote_addr;

            proxy_connect_timeout   120;
            proxy_send_timeout      120;
            proxy_read_timeout      180;
    }

    location ~* \.(jpeg|jpg|gif|png|ico|bmp|swf|css|js)$ {
            root domainXStaticRoot
    }

    # other options for domainX only
} 
```

对于来自第一个服务器块的域，nginx 仅返回根页面：

```
http://domain1 -> returns root page for domain1
http://domain1/style.css -> nginx trying return according location from server block two eg domainXStaticRoot/style.css 
```

如果修改监听80；听 domain1:80; 然后对于 domain1 一切正常，但我没有找到如何在 listen 指令中编写多个域。

我的错误在哪里？

# iphone - 如何从 .XIB 加载 UIViewController？

> ID：10698530
> 
> 赞同：0
> 
> 时间：2012-05-22T08:38:05.770
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, xib

您好我有一个应用程序，我想从一个名为 ImageViewController 的 .xib 文件加载 UIViewController。

![在此处输入图像描述](../Images/52b3b4d133212574cb1c308e50a020fb.png)

我已经为 ImageViewController 创建了 .h 和 .m 文件。我已经在应用程序委托中向它声明了一个 IBOutlet。

我曾多次拖放 UIView（例如），它通常由 nib 初始化。由于 IB 中有一个 UIViewController 对象，我假设您必须能够做到这一点。如果是这样，在 UIViewController 中调用什么方法？例如，我知道 awakeFromNib 在视图中被调用。

进阶干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:52:47.473

方法是使用 awakeFromNib。它似乎是 NSObject UIKit Additions References 的一部分，而不是 UIView 方法。在那里，您应该能够将它用于从 nib 实例化的所有类。

当你知道怎么做时很容易。

# linux - 具有双以太网接口的 ffmpeg 工作错误

> ID：10698533
> 
> 赞同：2
> 
> 时间：2012-05-22T08:38:33.800
> 
> 标签：linux, ffmpeg, multicast

具有双接口的服务器。

1.  One(eht0) 用于为互联网用户提供 http/ssh 服务的 WAN。

2.  另一个（eth1）用于接收来自内网的组播数据。

> 218.108.132.177是公网网关。
> 
> 125.210.198.1 是专用网络网关。
> 
> 233.49.3.*/24 是多播地址。
> 
> 10.0.11.*/24 是组播数据的来源。

当路由表如下图时，ffmpeg 无法从 eth1 读取 udp 数据，ffmpeg 挂了：

```
rrca@rcasnap02:~$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
218.108.132.176 *               255.255.255.252 U     0      0        0 eth0
125.210.198.0   *               255.255.255.240 U     0      0        0 eth1
default         218.108.132.177 0.0.0.0         UG    100    0        0 eth0
default         125.210.198.1   0.0.0.0         UG    100    0        0 eth1 
```

或者

```
rrca@rcasnap02:~$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
218.108.132.176 *               255.255.255.252 U     0      0        0 eth0
125.210.198.0   *               255.255.255.240 U     0      0        0 eth1
default         218.108.132.177 0.0.0.0         UG    100    0        0 eth0
10.0.11.0       125.210.198.1   0.0.0.0         UG    100    0        0 eth1 
```

或者

```
rrca@rcasnap02:~$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
218.108.132.176 *               255.255.255.252 U     0      0        0 eth0
125.210.198.0   *               255.255.255.240 U     0      0        0 eth1
default         218.108.132.177 0.0.0.0         UG    100    0        0 eth0
233.49.3.0      125.210.198.1   255.255.255.0   UG    100    0        0 eth1 
```

我想让ffmpeg正常工作，但现在我认为路由表中的两个默认路由相互干扰，我尝试一下，当公共网关路由被删除，或者私有网关路由在公共默认网关路由的头部, ffmpeg 运行良好，我认为它从 eth1 读取多播。但路由表不是这样，ffmpeg 无法从 eth1 读取数据，我认为它读取 eth0（不是专用网络接口）上的数据。

ffmpeg如何同时与两个接口一起工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T10:20:33.700

您需要为多播流量配置正确的路由。内核对所有传入的多播流量进行来源检查：如果它到达与用于发送此类流量的接口不同的接口，则将其丢弃。

只需在 eth1 接口上设置多播路由：

```
# route add -net 224.0.0.0/8 dev eth1 
```

或者，禁用源检查：

```
# echo 0 > /proc/sys/net/ipv4/conf/eth1/rp_filter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-21T21:29:20.320

虽然答案是正确的，因为需要路由，但我必须路由**224.0.0.0/4**（最多包括 239.255.255.255），因为我的设备正在将视频流发送到 239.255.42.42

# .net - 如何使用 Umbraco 开发中大型项目？

> ID：10698543
> 
> 赞同：3
> 
> 时间：2012-05-22T08:39:00.883
> 
> 标签：.net, content-management-system, umbraco

我目前正在研究如何在我们未来的项目中使用 Umbraco。我观看了 Umbraco.tv 并阅读了不同的“入门”指南——它的强项非常明显，它作为 CMS 的能力也很棒。当您想要的不仅仅是 CMS 编写的网站时，如何使用 Umbraco 并不明显。

当然，没有人会使用 CMS 编写大型业务应用程序。但是，如果你只有一点复杂的逻辑，你会在 Umbraco 环境中解决它吗？如果你需要一些世界上最简单的工作流模型，你会把它放在一些用户控件中，还是将它放在其他任何地方，或者这可能是放弃 Umbraco 的地方？...

所以也许我要问的问题是： **超过什么复杂程度你应该停止使用 Umbraco 并更好地使用 ASP.NET MVC（或任何你喜欢的东西）从头开始编写所有东西？你会把复杂的逻辑放在 Umbraco 的什么地方？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:34:46.843

你没有说哪个版本，所以我假设是 4.7，尽管在这两种情况下答案或多或少是相同的——唯一的区别是现在我不会在 5.x 中进行大型项目，除非你有很大的耐心，理解客户和至少 6 个月后的最后期限。（我是 5.x 的粉丝，但它还没有准备好用于生产应用程序）。

如果我需要添加很多复杂的逻辑，我会像在任何其他 asp.net 应用程序中一样编写它们 - 使用 c# 在（最有可能）或自定义控件（不太可能）中创建新的类/对象然后在适当的时候从我的页面加载或调用该对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T16:50:12.600

我使用 Umbraco 管理一系列企业级网站。我也有很多我自己编写的自定义代码。在宏和事件挂钩，甚至社区编写的其他一些杂项项目之间，我没有发现很多我不能做的事情，尽管有些事情比其他事情更难。

以我的拙见，人们应该问的问题是***它是一个什么样的网站***，而不仅仅是应该确定一个阈值的复杂程度。如果它是一个内容驱动的网站，由 CMS 提供最好的服务，我不会因为必须编写一些自定义代码而被阻止使用它。有很多方法可以添加代码来扩展 Umbraco。如果网站内容主要是由应用程序驱动的，我不会为了能够做到而将其强加到 CMS 中。

希望这可以帮助。

# java-me - 如何从 LWUIT 应用程序使用 LCDUI？

> ID：10698547
> 
> 赞同：3
> 
> 时间：2012-05-22T08:39:17.000
> 
> 标签：java-me, lwuit, lcdui, nokia-s40

我想在我的 LWUIT 应用程序中使用标准警报对话框（作为 LCDUI）：[lcdui Alert javadocs](http://www.developer.nokia.com/Resources/Library/Java/_zip/GUID-0D0A1092-5037-4421-B466-B958CB777414/javax/microedition/lcdui/Alert.html)

如何从 LWUIT 表单中调用此方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T19:00:17.100

LWUIT 的 1.5 的`Display`有方法`showNativeScreen`。

我不建议这样做，它可能会导致一些问题。

要返回 LWUIT，只需显示一个`Form`.

# objective-c - 如何更改 Apple 示例代码项目 MoviePlayer

> ID：10698550
> 
> 赞同：1
> 
> 时间：2012-05-22T08:39:40.660
> 
> 标签：objective-c, ios, tabbar

在 Apple 示例代码项目：`MoviePlayer`中，我想实现，当示例 App 启动时，本地视频会立即以编程方式播放。

我添加最后两句话：

```
[self.tabBarController setSelectedIndex:1];
[self performSelector:@selector(playMovieButtonPressed:) withObject:tabBarController.selectedViewController afterDelay:0.0]; 
```

在下面的函数中：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application
{
    /* Override point for customization after app. launch. */

    /* Add the tab bar controller's current view as a subview of the window. */
    [window addSubview:tabBarController.view];
    [window makeKeyAndVisible]; 
    [self.tabBarController setSelectedIndex:1];
    [self performSelector:@selector(playMovieButtonPressed:) withObject:tabBarController.selectedViewController afterDelay:0.0];
} 
```

但得到以下错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[MyLocalMovieViewController playMovieButtonPressed]：无法识别的选择器发送到实例 0x6190330”

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:09:00.870

您需要获得指向您的指针，`MyLocalMovieViewController`然后执行类似的操作

```
[pointer playMovieButtonPressed:nil] 
```

# silverlight - Silverlight 中身份验证/授权的最佳方式是什么？

> ID：10698551
> 
> 赞同：1
> 
> 时间：2012-05-22T08:39:49.133
> 
> 标签：silverlight, authentication, authorization

我们有一个 SL 应用程序和许多使用这个系统的用户，他们具有不同的数据和访问角色。例如，每个用户可以拥有一些设备，每个设备将每 5 分钟将其位置发送到服务器。

一种方法是在数据库中定义一个用户表，并有许多表将实体连接到用户 ID，但这不是一个好主意，因为这会在用户和其他实体之间创建许多表。

选择用户数据或报告将是一个耗时的过程，所以我想知道在 Silverlight 中处理此类行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:18:49.073

您可以使用 AuthenticationDomainService。这是具有角色的授权用户的流行服务。您可以在那里获得更多信息：http: [//msdn.microsoft.com/en-us/library/ee707361 (v=VS.91).aspx](http://msdn.microsoft.com/en-us/library/ee707361(v=VS.91).aspx)

# c# - 相当于 BN_hex2bn

> ID：10698553
> 
> 赞同：0
> 
> 时间：2012-05-22T08:40:04.030
> 
> 标签：c#, bouncycastle, biginteger

在 C# 中是否有任何等价物`BN_hex2bn`，我想用`BigInteger`十六进制字符串制作！

我`BouncyCastel`用来创建`BigIntegers`

`BigInteger N = new BigInteger("894B645E89E1535BBDAD5B8B290650530801B18EBFBF5E8FAB3C82872A3E9BB7", 16);`

现在当我比较它的值时`BouncyCastel's BigInteger`，`OpenSSL's BN_hex2bn`它给了我不同的值

```
openssl = 894B645E89E1535BBDAD5B8B290650530801B18EBFBF5E8FAB3C8287

BouncyCastel = 62100066509156017342069496140902949863249758336000796928566441170293728648119 
```

我不明白是什么导致它具有不同的价值，或者我怎样才能获得与`OpenSSL`!!! 相同的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:52:33.353

```
0894B645E89E1535BBDAD5B8B290650530801B18EBFBF5E8FAB3C82872A3E9BB7 
```

是十进制数的十六进制表示：

```
62100066509156017342069496140902949863249758336000796928566441170293728648119 
```

这意味着两个数字相等。您只是在不同的基础上查看它们。

# java - Maven jarsigner 插件在发布期间不起作用

> ID：10698558
> 
> 赞同：4
> 
> 时间：2012-05-22T08:40:52.740
> 
> 标签：java, maven, maven-3, maven-release-plugin, jarsigner

我需要对已发布的 jar 进行签名，并且我想使用 maven jarsigner 插件来完成。所以我像这样添加它：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jarsigner-plugin</artifactId>
            <version>1.2</version>
            <configuration>
                <archive>target/${myarchive}.jar</archive>
                <keystore>${key.location}</keystore>
                <storepass>${keypass}</storepass>
                <alias>${key.alias}</alias>
                <verbose>true</verbose>
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>sign</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

我在命令行中提供了缺少的参数。

当我运行`mvn install`一切正常并且存档已签名。但是当我运行`release:prepare release:perform`jarsigner 插件失败时：`目标 org.apache.maven.plugins:maven-jarsigner-plugin:1.2:sign 的参数'别名'丢失或无效'

当我在调试模式下运行时，我看到以下内容：

对于`mvn install`：

```
[DEBUG] Configuring mojo org.apache.maven.plugins:maven-jarsigner-plugin:1.2:sign from plugin realm ClassRealm[plugin>org.apache.m
aven.plugins:maven-jarsigner-plugin:1.2, parent: sun.misc.Launcher$AppClassLoader@6d6f0472]
[DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-jarsigner-plugin:1.2:sign' with basic configurator -->
[DEBUG]   (f) alias = myalias
[DEBUG]   (f) archive = myarchive
[DEBUG]   (f) arguments = []
[DEBUG]   (f) keystore = mykeystore
[DEBUG]   (f) processAttachedArtifacts = true
[DEBUG]   (f) processMainArtifact = true
[DEBUG]   (f) project = MavenProject: com.playtech.chat:ums_supportchatapplet:12.4-SNAPSHOT @ *********\pom.xml
[DEBUG]   (f) removeExistingSignatures = false
[DEBUG]   (f) skip = false
[DEBUG]   (f) storepass = changeit
[DEBUG]   (f) verbose = true
[DEBUG] -- end configuration -- 
```

但是当我运行时`release:prepare release:perform`，我看到：

```
Configuring mojo org.apache.maven.plugins:maven-jarsigner-plugin:1.2:sign from plugin realm ClassRealm[plugin>org.apache.maven.plugins:maven-jarsigner-plugin:1.2, parent: sun.misc.Launcher$AppClassLoader@553f5d07]
[INFO] [DEBUG] Configuring mojo 'org.apache.maven.plugins:maven-jarsigner-plugin:1.2:sign' with basic configurator -->
[INFO] [DEBUG]   (f) archive = myarchive
[INFO] [DEBUG]   (f) arguments = []
[INFO] [DEBUG]   (f) processAttachedArtifacts = true
[INFO] [DEBUG]   (f) processMainArtifact = true
[INFO] [DEBUG]   (f) project = MavenProject: com.playtech.chat:ums_supportchatapplet:12.4.0.1 @ *****\pom.xml
[INFO] [DEBUG]   (f) removeExistingSignatures = false
[INFO] [DEBUG]   (f) skip = false
[INFO] [DEBUG]   (f) verbose = true
[INFO] [DEBUG] -- end configuration -- 
```

因此，除了`archive`属性之外，其他属性在发布期间都会被忽略。

任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T11:57:23.550

找到了答案。

简而言之`-D`，参数不会从命令行传递到发布插件。
`-Darguments=`应该使用。

有关更多详细信息，请阅读帮助我解决此问题[的博客文章。](http://mrhaki.blogspot.com/2008/07/passing-d-arguments-along-to-release.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:31:30.577

Enter this command at the cmd prompt:

```
keytool -list -keystore [keystore location here] 
```

Is the 'myalias' alias in that specific keystore? If not you'll need to [create one](http://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html).

The only other thing that I can see that could go wrong is if the password is incorrect for that keystore.

# powershell - Powershell - `& .\monkeys.ps1` 和 `& powershell .\monkeys.ps1` 之间有区别吗？

> ID：10698561
> 
> 赞同：3
> 
> 时间：2012-05-22T08:40:57.743
> 
> 标签：powershell

`& .\monkeys.ps1`在 Powershell 中，和之间有区别`& powershell .\monkeys.ps1`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:45:27.367

'& .\monkeys.ps1' 在当前控制台（会话）中执行脚本。'& powershell .\monkeys.ps1' 打开一个新的 PowerShell 进程并执行脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T15:46:04.497

同样，如果您查看与 powershell 关联的帮助文件，您可以看到 powershell 可执行文件提供的所有可配置选项

```
powershell /? 
```

这允许高级功能，例如指定窗口参数、直接从批处理文件运行命令或运行脚本（如上）

# visual-studio-2010 - MVC3 -> 4 扩展库的 Nuget 版本控制：隐藏还是不隐藏以前的版本？

> ID：10698566
> 
> 赞同：0
> 
> 时间：2012-05-22T08:41:10.073
> 
> 标签：visual-studio-2010, versioning, nuget

我在我们的公司 nuget 服务器上有一个用于 Asp.Net MVC 3 的扩展包 - 假设包 ID 当前是`Acme.Mvc`，它的版本是`2.x`.

我现在已经对该项目进行了分支，并准备发布针对 MVC 4 Beta 的同一包的预发布版本。现在，从逻辑上讲，这是`3.x`该库的版本；但是，一旦我发布它（一旦它不再预发布），它就`2.x`不再出现在 VS 的 UI 中；这可能会导致其他开发人员将其添加到他们的 MVC 3 项目中；`v2.x`并拒绝他们在不使用控制台的情况下轻松访问对旧库的任何未来升级）。

在其他一些情况下，我更改了包 ID 以包含一个版本，即`Acme.Mvc.3`新旧版本可以并排放置。唯一的问题是，有人可能会尝试将两者都包含在内！还有一个有点迂腐的问题，称这`v3.x`不一定是正确的。因为它是一个新包。

另外，我真的需要能够维护两个流。我可以依赖 MVC 4 站点中的绑定重定向，这些站点仍然引用针对 MVC 3 的库版本；因为我的扩展都不依赖于已经消失的东西。

当我查看公共 nuget 提要时；我很少看到这种在包 ID 中粘贴主要版本的做法，但真的有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:53:16.637

有许多现有的包使用 MVC 版本作为其命名约定的一部分来区分支持的版本：WindowsAzure.WebRole.MVC3 Unity.Mvc3 Spark.Web.Mvc2 Spark.Web.Mvc3 ...

“唯一的问题是，有人可能会尝试将两者都包括在内！”

我不会费心试图阻止这种情况，从包的名称看来，两者并不意味着并排。

# ios - 如何为我的 iOS 应用程序图像做 PngCrush？

> ID：10698568
> 
> 赞同：0
> 
> 时间：2012-05-22T08:41:25.517
> 
> 标签：ios, xcode, image-optimization, pngcrush

> **可能重复：**
> [iOS 中的 PngCrush 是什么？](https://stackoverflow.com/questions/10716303/what-is-pngcrush-in-ios)

我对 iOS 应用程序**Pngcrush**的图像优化技术有 疑问我的疑问是，pngcrush 是 xcode 内置的还是我们需要明确下载 pngcrush 工具并优化我们的图像？如果我们想明确地做到这一点，我们怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:47:13.327

这个问题可能会解决您的问题：[Skipping the 'CompressResources' build step for XCode iPhone apps](https://stackoverflow.com/questions/177160/skipping-the-compressresources-build-step-for-xcode-iphone-apps)

另一件事是 PNG 可能是 JPG 类型的，并且扩展已用 png 进行了修改。

# sql - 卡在写sql查询

> ID：10698570
> 
> 赞同：0
> 
> 时间：2012-05-22T08:41:35.013
> 
> 标签：sql, hibernate, postgresql

我有一个表，其中 termid、termversion 是两个主键。表中存在的列 - termid、termversion、name

我想选择名称为 ilike`'%AB%'`的所有术语，结果应包含具有最大版本号的每个匹配术语。

例子：

```
id    name   ver
1     ABBBB  1
1  ABBBB  2
1  ABBBB 3
2  ABC   1
2  ABC   2 
```

输出应该来

```
1 ABBBB 3
2 ABC   2 
```

我想使用 Criteria 在休眠中编写此查询...如果有人可以在休眠中建议我，那么它真的很好，否则至少可以帮助我编写 sql 查询。PS我正在使用postgresql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T08:51:15.880

我认为这就是您要寻找的：

```
SELECT id, name, MAX(ver)
  FROM table
 WHERE name ILIKE '%AB%'
 GROUP BY name, id        -- I assume: id == id' <==> name == name' 
```

是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:55:27.097

select id, name, max(ver) from mytable where name like '%AB%' group by id, name

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:00:06.087

你能试试这个sql命令吗？

select id,name,max(ver) from table_name group by id, name 像 '%AB%'

# asp.net - upshot.js + 信号器 + 淘汰赛

> ID：10698573
> 
> 赞同：3
> 
> 时间：2012-05-22T08:41:49.727
> 
> 标签：asp.net, knockout.js, signalr, upshot

是否可以将 upshot/knockout 与 signalr 结合起来（我只能找到关于 knockout 和 signalr 的问题）？例如，如果我使用以下命令添加任务：

```
 self.addTask = function () {
        var task = new Task({
            LastUpdated : new Date().toMSJSON(),
             Title : this.newTaskText(),
             IsDone : true
         });
         self.tasks.unshift(task);
    } 
```

在视图模型中，这将自动将其添加到视图中（基于敲除数据绑定）并调用：

```
 public void InsertTask(Task task)
        {
            InsertEntity(task);
        } 
```

在服务器中。如果我也想将它广播给其他客户怎么办.. 是否可以使用相同的库？如果是..我应该做哪些改变/我需要做的其他事情？是否有任何替代方案可以使这更容易，但仍然遵循即将推出的 Microsoft ASP.NET MVC 4 堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:30:22.407

你应该可以，在服务器上你可以调用

```
var connection = AspNetHost.DependencyResolver.Resolve<IConnectionManager().GetConnection<MyConnection>();
connection.Broadcast("Called from an mvc controller or server side method"); 
```

或者您可以创建一个集线器并在函数中实现它的客户端：

```
 self.addTask 
```

向客户端发送“addTask”消息。

# android - 如何提供从本机 android 联系人详细信息页面启动我自己的应用程序的选项？

> ID：10698575
> 
> 赞同：4
> 
> 时间：2012-05-22T08:41:54.467
> 
> 标签：android, android-layout

我正在从 android 市场获取一个应用程序的参考，实际上我想要一个类似的界面，所以实际问题是这样的：

第 1 步）我们在 android 手机中拥有我们的原生联系人列表，请参阅随附的屏幕截图：

![NativePhoneBook](../Images/b482b3dcefaf31cb74d9a3ded921f13c.png)

Step2）现在我从这个联系人列表中选择一个特定联系人假设我选择Narendra Kirusa，所以我们将到达以下页面

![点击联系页面](../Images/46f54f497219bd8ca0e863b79db22b17.png)

在此页面上，呼叫移动选项是 Android 手机的默认选项，但之后有第二行带有 Walkie-talkie 选项，这是应用程序开发人员现在自定义的选项，当您单击该对讲机时它开始附上您的应用程序屏幕截图：

![点击对讲机](../Images/ea8fb2d5b16f114192c131bc1153290e.png)

现在它登陆应用程序。现在的问题是我应该在哪里进行更改，并提供对讲机的选项来启动您自己的应用程序。就像在这里，他们在联系方式页面上给了对讲机我想为我的应用程序提供的类似选项，那么我应该在哪里提供这个选项？

1.  我们无法在 OS 文件中进行更改，因为它是应用程序。
2.  在 android-manifest.xml 文件中必须有一些选项来提供这个选项，即放置一个新行以从 android Native Contact Details Page 启动我们自己的应用程序。我尝试用谷歌搜索它，但想不通。
3.  看到有与本机电话或短信交互的意图，例如仅在单击通话电话时发送短信，我们可以这样做以将其移动到我们的应用程序，例如，如果您单击通话移动，那么我们能够提供选项，例如点击通话手机查看

如果您单击拨号，它会转到 android 本地电话呼叫，如果您单击发送语音短信，那么它会转到我的应用程序，他们所做的是在 android-manifest.xml 文件中看到他们放置此选项的邮件活动，我我不确定这可以使用广播接收器完成还是如何？

那么您能否建议我如何在android原生调用Mobile row之后放置一个新行.....？

![在此处输入图像描述](../Images/6b650d85ed7283f99790f29253864260.png)

最后如何添加这个对讲机选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:59:20.547

我认为这里应该使用与在不同应用程序中打开文件相同的机制。

您可以实现自定义 BroadcastReceiver ，它将被注册以接收此类操作（您需要找出使用的操作和类别）

您可以在文档[http://developer.android.com/reference/android/content/Intent.html中阅读更多相关信息](http://developer.android.com/reference/android/content/Intent.html)

# iphone - 在地图视图上点击注释时将数据传递给详细视图

> ID：10698576
> 
> 赞同：4
> 
> 时间：2012-05-22T08:41:56.057
> 
> 标签：iphone, ios, annotations, mkmapview

我有一个地图视图，并且有 10 个商店位置的数据来自网络服务。我只想推送到我的详细视图以显示点击商店的地址、电话和其他信息。

`detailview`当用户在 mapkit 上点击或触摸内部注释时，我需要将数据传递给我。我的里面有10个注解，`mapview`首先我想知道，我怎么理解或者如何获取点击了哪个注解的annotationID？

这是我返回别针的方法

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{

    if ([annotation isKindOfClass:[MKUserLocation class]]) return nil;

    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";

    MKPinAnnotationView* pinView = [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];

     pinView.animatesDrop=YES;
     pinView.canShowCallout=YES;
     pinView.pinColor=MKPinAnnotationColorPurple;

     UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
     [rightButton setTitle:annotation.title forState:UIControlStateNormal];

     [rightButton addTarget:self
     action:@selector(showDetails:)
     forControlEvents:UIControlEventTouchUpInside];

     pinView.rightCalloutAccessoryView = rightButton;

    return pinView;
}
   /* and my action method for clicked or tapped annotation: */

 - (IBAction)showDetails:(id)sender{

      NSLog(@"Annotation Click");

      [[mtMap selectedAnnotations]objectAtIndex:0];
      magazaDetayViewController *detail = [[magazaDetayViewController 
      alloc]initWithNibName:@"magazaDetayViewController" bundle:nil];

      detail.sehir=@"";
      detail.magazaAdi=@"";
      detail.adres=@"";
      detail.telefon=@"";
      detail.fax=@"";
      [self.navigationController pushViewController:detail animated:YES];

 } 
```

如果我只能获得单击的注释索引，我可以用我的数组填充详细属性。如果这是不可能的，还有其他方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T09:11:27.603

首先在您的注释视图委托中制作一个按钮以进入详细视图，如下所示：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{

MKPinAnnotationView *mypin = [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:@"current"];
mypin.pinColor = MKPinAnnotationColorPurple;
mypin.backgroundColor = [UIColor clearColor];
UIButton *goToDetail = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
mypin.rightCalloutAccessoryView = myBtn;
mypin.draggable = NO;
mypin.highlighted = YES;
mypin.animatesDrop = TRUE;
mypin.canShowCallout = YES;
return mypin;
} 
```

现在，只要点击 annotationView 中的按钮，就使用下面的委托，下面的委托将被调用，您可以从那里轻松获取点击了哪个特定的注释按钮

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view 
 calloutAccessoryControlTapped:(UIControl *)control
{
annotation *annView = view.annotation;
detailedViewOfList *detailView = [[detailedViewOfList alloc]init];
detailView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
detailView.address = annView.address;
detailView.phoneNumber = annView.phonenumber;
[self presentModalViewController:detailView animated:YES];
} 
```

这里 annotaion 是一个导入 MKAnotaion.h 的类，address 和 phonenumber 是 annotaion 类的属性，您可以制作更多的属性，而 detailView 类的 address 和 phoneNumber 属性很强大。这样您就可以传递值。希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:51:07.210

Bellow是`MapView`......的委托方法

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{

} 
```

当用户点击方法调用上方的注释引脚时，如果方法在 .m 文件中定义，则首先`MKMapViewDelegate`在 .h 文件中声明委托

您还可以从 google place API 获取标题或副标题和 ID ....链接是... [https://developers.google.com/maps/documentation/places/](https://developers.google.com/maps/documentation/places/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T18:08:16.233

```
for(int i=0; i<[arrLat count];i++) {

CLLocationCoordinate2D theCoordinate1; 
konumpin* myAnnotation1=[[konumpin alloc] init]; 

theCoordinate1.latitude = [[arrLong objectAtIndex:i] doubleValue]; 

theCoordinate1.longitude = [[arrLat objectAtIndex:i] doubleValue]; 

myAnnotation1.coordinate=theCoordinate1; 
myAnnotation1.title=[arrMagaza objectAtIndex:i]; 
[annotations addObject:myAnnotation1]; 

} 

[mtMap addAnnotations:annotations]; 
```

# javascript - 如何使用 Javascript 将一组数字绘制为图像？

> ID：10698578
> 
> 赞同：1
> 
> 时间：2012-05-22T08:42:03.687
> 
> 标签：javascript, arrays, image, numbers, plot

我想使用 Javascript 将一组数字（int/float/binary/..）绘制为图像，但我不知道该怎么做。

该系统由 C++ 完成的 CORE 部分和 jQuery 完成的 GUI 部分组成，我必须在 GUI 端显示 CORE 计算的结果。我可以以任何格式传递它们，例如二进制文件、XML 文件......但我不知道 GUI 如何绘制数字数组并将它们作为图像显示给用户......另外它可能很有用有一个颜色的比例..

有什么建议吗？任何可用的图书馆为此目的？欢迎每一个想法！

提前致谢！干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:44:40.660

看看[d3.js](http://d3js.org/)。这个库提供了大量可能的可视化，并且很容易定制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:44:38.290

这是 js 中的绘图库列表：http: [//javascript.open-libraries.com/utilities/chart/20-best-javascript-charting-and-plotting-libraries/](http://javascript.open-libraries.com/utilities/chart/20-best-javascript-charting-and-plotting-libraries/)

您需要在 json 中格式化您的数据才能使其正常工作。如果数据集非常大，最好在服务器端绘制并将图像文件发送到客户端。

# performance - Oracle：具有未使用列的表会影响性能吗？

> ID：10698581
> 
> 赞同：2
> 
> 时间：2012-05-22T08:42:27.913
> 
> 标签：performance, oracle

我的 oracle 数据库中有一个包含 100 列的表。此表中的 50 列未被访问此表的程序使用。（即选择查询只选择相关列而不使用'*'）

**我的问题是这样的：** 如果我只用我需要的列重新创建同一个表，它是否会使用与原始表相同的查询来提高查询性能（请记住，只选择了相关的列）

值得一提的是，该程序使这些查询每秒进行合理的次数！

**PS：** 这是我正在进行的现有项目，很久以前为其他产品设计了表格（这就是为什么我们现在有未使用的列）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:31:30.183

所以这样做的效果是平均行会更小，如果额外的列有数据将不再在表中。因此，表可以更小，不仅会使用更少的磁盘空间，还会使用更少的 SGA 内存空间，并且缓存会更有效。

因此，如果您通过全表扫描访问表，那么读取段会更快，但如果您使用基于索引的访问机制，那么唯一的性能改进可能是通过提高从缓存中获取块的机会.

**[已编辑]**

这个[SO 线程](https://stackoverflow.com/a/3180412/42769)建议“**它总是拉一个元组......** ”。因此，如前所述，您可能会看到一些性能改进，不确定主要还是次要。

# javascript - 如何为实时 ajax div 块制作发光效果

> ID：10698585
> 
> 赞同：0
> 
> 时间：2012-05-22T08:42:38.460
> 
> 标签：javascript, ajax, real-time, effects

我有一个 Ajax 代码可以实时捕获 txt 文件中的结果，然后结果会自动显示在 div 块中，其中包含以下几行：

```
if (xmlhttp.responseText != "") {
    InnerHTMLText = xmlhttp.responseText + document.getElementById("div").innerHTML;
    document.getElementById("div").innerHTML = InnerHTMLText;
} 
```

如你看到的。此代码首先从 div 块中获取结果并将其添加到 xmlhttp.responseText，然后再次显示在 div 块中。

我的问题是**用发光或褪色效果显示新结果**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:28:40.077

在jQuery中：

```
$(document).ready(function () {
    $(".glow")
        .bind("fadeglow", function() {        
            $(this)
                .fadeOut(1000)
                .fadeIn(1000)
                .trigger("fadeglow");
        }).trigger("fadeglow");
   }
);
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:56:15.443

如果对您有帮助，请查看我的代码。我刚刚使用css3作为div的发光边框

```
http://jsfiddle.net/yncqk/16/ 
```

# plot - 2列的gnuplot绘图差异

> ID：10698586
> 
> 赞同：3
> 
> 时间：2012-05-22T08:42:43.530
> 
> 标签：plot, gnuplot

我有两个文件 A 和 B。两个文件都包含 2 列，x 和 y。

现在，我想绘制 x vs (yA - yB) 的图表。gnuplot 是否提供相同的命令？

还有一件事，假设 xA 和 xB 不一样。我应该如何绘制一个图表，其中 x 轴包含 xA 和 xB 中的所有元素，并且 y 轴的差异是对应的 y 分量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T08:58:40.887

首先，使用`join`bash 对文件进行预处理：

```
join <(sort -k1,1 file1) <(sort -k1,1 file2) > file3 
```

对文件进行排序是必不可少的，否则`join`将无法正常工作。

然后您可以使用结果来绘制图形：

```
plot '< sort -n file3' using 1:($2-$3) with lines 
```

同样，这里需要数字排序，因为`join`使用字母数字排序使线条相互交叉。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T12:25:24.470

我认为这可能是一个很好的工作`paste`。

```
plot "<paste A B" u 1:($2-$4) w points #whatever line style you want...
                  #xA #yA-yB 
```

对于 xA != xB 的文件，我有点不清楚您是想仅绘制两者共有的点集（两组的交集）还是要绘制所有点（联合的集合）。工会很简单：

```
plot "<paste A B" u 1:($2-$4) w points ls 1,\
     "<paste A B" u 3:($2-$4) w points ls 1 
```

仅使用 unix 命令行工具很难进行交集（特别是如果您想保留输入的顺序）

虽然使用 Python，但它并不算太糟糕......

```
#joinfiles.py
import sys
f1=sys.argv[1]
f2=sys.argv[2]
xA,yA=zip(*[map(float,line.split()) for line in f1.readlines()])
xB,yB=zip(*[map(float,line.split()) for line in f2.readlines()])
f1.close()
f2.close()
for i,x in enumerate(xA):
    if(x in xB):
        sys.stdout.write('%f %f %f\n'%(x,yA[i],yB[i])) 
```

然后从gnuplot：

```
plot "<python joinfiles.py A B" u 1:($2-$3) #... 
```

# mysql - 使用 PHP 将 mysql 日期格式从 ISO 转换为 UK

> ID：10698589
> 
> 赞同：2
> 
> 时间：2012-05-22T08:42:51.583
> 
> 标签：mysql, date, format

我在 mysql 数据库中有一个日期字段，我试图在 .php 文档中显示它。当我插入以下代码时，它当前显示在 yyyy-mm-dd 中：

```
<?php echo $row_rs_dealItem['dateend']; ?> 
```

但是我希望它显示在 dd-mm-yyyy

我需要最简单/最干净的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:49:37.070

我会使用[DateTime](http://www.php.net/manual/en/datetime.construct.php)类

```
<?php
$date = new DateTime($row_rs_dealItem['dateend']);
echo $date->format('d-m-Y');
?> 
```

# c# - LINQ 查询未将所需结果作为字符串返回。为什么？

> ID：10698590
> 
> 赞同：2
> 
> 时间：2012-05-22T08:42:59.113
> 
> 标签：c#, .net, linq

我的代码：

```
public string LocName(string locID)
    {
        var name = (from a in idc.Locations
                    where a.ID.ToString() == locID
                    select a.Name).Single();
        return name;   
    } 
```

我需要它将与 ID 匹配的位置名称作为 TextBlock 的字符串返回。相反，它不返回任何元素，我检查了 ID 是否正确，因此它应该至少返回一个元素。

我也试过：

```
where a.ID == new Guid(locID) 
```

也

```
.First()
.FirstOrDefault() 
```

已尝试将结果作为元素返回并对其进行数据绑定，但仍然 - 没有元素。

什么错误？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:50:46.583

如果数据存在，则必须是大小写问题，您应该始终使用`ToUpper()`它，因为它已针对字符串相等性检查进行了优化。

此外，如果有多个匹配项，您应该始终使用`FirstOrDefault`as将引发异常，如果没有匹配项将引发异常。尝试：`Single``First`

**编辑**：我还添加`Trim`了输入值以清理空间。我还在`locID`参数上添加了一个空检查，因为如果它被传递为空，它会爆炸。最后，我`??`在语句上添加了一个 (coalesce)`return`以防它返回 null 并且您正在对该字符串执行其他操作（例如`Trim`or `ToLowerCase`），因为这会导致异常。

```
public string LocName(string locID)
{
    if (locID == null) return string.Empty;

    var name = (from a in idc.Locations
                where a.ID.ToString().Trim().ToUpper() == locID.Trim().ToUpper()
                select a.Name).FirstOrDefault();

    return name ?? string.Empty;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:50:40.797

`Single()`如果查询有多个匹配项，那么首先将引发异常。`FirstOrDefault()`如果您期望得到多个答案，我建议您使用。

此外，我会尝试使用`Trim()`并`ToUpper()`消除任何可能阻止字符串匹配的空格/大小写问题。

# iphone - 合并 UIImageViews 以另存为 1 个图像 - 透明区域显示以前的图像

> ID：10698596
> 
> 赞同：1
> 
> 时间：2012-05-22T08:43:28.037
> 
> 标签：iphone, image-processing, uiimageview, transparency

我的应用程序允许用户选择或拍照，然后在顶部添加其他对象或文本并旋转/调整它们的大小。

为了保存，我只是截取了 iPhone 屏幕的屏幕截图，因为经过数小时的尝试，我无法弄清楚如何保存原始图像，并将添加的对象放置在正确的位置，并进行正确的旋转/调整大小/etc...（如果有人知道如何做到这一点的好例子/教程，那将非常有帮助！）

我有一个大小为 320x366 的 UIView。当用户选择图像时，我将其加载到 UIView 中，并调整其大小以适合其纵横比。当用户完成在他的图像上添加/编辑对象时，他可以保存它。

```
-(UIImage *)createMergedImage
{
    UIGraphicsBeginImageContextWithOptions(CGSizeMake(contentView.frame.size.width, contentView.frame.size.height), NO, 0.0f);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextClearRect(context, CGRectMake(0, 0, contentView.frame.size.width,contentView.frame.size.height));
//contentView is the 320x366 view with all the images
    [contentView.layer renderInContext:context];
    UIImage *screenShot = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return screenShot;
} 
```

这就是我用来将 UIView 保存为图片的代码。以正确的缩小纵横比拟合图像，顶部/底部或左侧/右侧有透明边框。

现在它正在保存并且可以正常工作，当我打开图像时，这正是我所期望的。问题是当我查看预览图像时，它会在图片的透明部分显示其他图像（我以前在我的 iPhone 上看到的）。正如您在下图中看到的那样。 ![图 1](../Images/5db184471b1f17c0f729f1efcb28c237.png)

当我进入相机胶卷时，透明部分看起来是黑色的（就像它应该的那样），如第二张图片所示。 ![图 2](../Images/57450f37ebb7cc734c5a7969517e514b.png)

此外，当我滚动浏览我的相机胶卷时，当我到达我的应用程序保存的图像时，我会在透明区域中看到那些额外的随机图像 0-1 秒，然后它就会消失并变黑（留下正确的图像应该是这样）。

我希望有人以前见过这样的事情并且知道如何解决它。

谢谢！

# ruby - 曲目：gem::installerror

> ID：10698604
> 
> 赞同：1
> 
> 时间：2012-05-22T08:44:04.857
> 
> 标签：ruby, rvm, bundle

我在为曲目安装 gem 时遇到问题。我执行了以下步骤： 安装 rvm：

```
bash < <(curl -sk https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)
echo '[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"' >> ~/.bashrc
source ~/.bashrc 
```

红宝石的安装：

```
rvm install ruby-1.8.7
rvm use ruby-1.8.7 --default
ruby -v 
```

最后一个命令响应：

```
ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux] 
```

轨道的 Git 克隆：

```
git clone https://github.com/TracksApp/tracks.git
cd tracks
nano backup.rails2.3/Gemfile.rails2.3 
```

此文件中所做的更改： - 注释掉 gem "sqlite3" - 更改 gem "ZenTest", "=4.6.0"

在此之后，我执行了 bundle install 退出并出现以下错误：

```
Gem::InstallError: factory_girl requires Ruby version >= 1.9.2.
An error occured while installing factory_girl (3.3.0), and Bundler cannot continue.
Make sure that `gem install factory_girl -v '3.3.0'` succeeds before bundling. 
```

Tracks 不支持 ruby​​ 1.9.x，因此无法进行版本升级。如何解决上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:07:13.940

您已经克隆了为 Ruby 1.9 做准备的开发版本： [https ://github.com/TracksApp/tracks/blob/master/Gemfile#L51](https://github.com/TracksApp/tracks/blob/master/Gemfile#L51)

将它与 ruby​​ 1.9 一起使用或使用旧版本： [https ://github.com/TracksApp/tracks/tags](https://github.com/TracksApp/tracks/tags)

# php - Urban Airship - 将 PUSH 发送到 1 个特定设备（设备令牌）

> ID：10698608
> 
> 赞同：2
> 
> 时间：2012-05-22T08:44:17.057
> 
> 标签：php, ios, push, urbanairship.com, devicetoken

所以我想通过 Urban Airship 定位一个特定的设备令牌，但无论我做什么，我的所有设备都会收到针对特定设备令牌的消息。

这是我的 PHP 代码 - 任何帮助都像往常一样非常感谢！

```
define('APPKEY','XXXXXXXXXXXXXX'); 
define('PUSHSECRET', 'XXXXXXXXXXXXX '); // Master Secret
define('PUSHURL', 'https://go.urbanairship.com/api/push/broadcast/'); 

$msg = "This is a message intended for my iPad 3";

    $devicetokens = array();
$devicetokens[0] = $devicetoken;

 $contents = array(); 
 $contents['badge'] = "1"; 
 $contents['alert'] = $msg; 
 $contents['sound'] = "default"; 

 $push = array("aps" => $contents, "device_tokens" =>$devicetokens); 

 //var_dump($push);

 $json = json_encode($push); 

 $session = curl_init(PUSHURL); 
 curl_setopt($session, CURLOPT_USERPWD, APPKEY . ':' . PUSHSECRET); 
 curl_setopt($session, CURLOPT_POST, True); 
 curl_setopt($session, CURLOPT_POSTFIELDS, $json); 
 curl_setopt($session, CURLOPT_HEADER, False); 
 curl_setopt($session, CURLOPT_RETURNTRANSFER, True); 
 curl_setopt($session, CURLOPT_HTTPHEADER, array('Content-Type:application/json')); 
 $content = curl_exec($session); 
 //var_dump($content); // just for testing what was sent

 // Check if any error occured 
 $response = curl_getinfo($session); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T03:07:54.113

您使用的 URL 用于广播。要将通知发送到特定设备，您应该使用的 url 是“https://go.urbanairship.com/api/push/”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:07:06.530

Urban Airship 提供了示例 PHP 代码来解决您的问题。

在这里查看-> [https://github.com/urbanairship/php-library/blob/master/sample.php](https://github.com/urbanairship/php-library/blob/master/sample.php)

# jquery - 使用 jquery json 解析特殊字符

> ID：10698609
> 
> 赞同：4
> 
> 时间：2012-05-22T08:44:24.233
> 
> 标签：jquery, json

我有以下 JSON：

```
{
    "parse": {
        "title":"Wiki",
        "revid":491629701,
        "text": {
            "*": "<div class=\"dablink\">"
        }
    }
} 
```

我尝试访问: `parse->text->*`:

```
$.getJSON(
    'my_url&callback=?', 
    function(json) {    
        console.log(json.parse.text.*); 
    }
); 
```

出现以下错误：

> Uncaught SyntaxError: Unexpected token * 。

我怎样才能正确解析这个对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:45:22.030

改用[方括号表示法](http://www.jibbering.com/faq/faq_notes/square_brackets.html)：

```
console.log(json.parse.text["*"]); 
```

**演示：http:** [//jsfiddle.net/Nnefq/](http://jsfiddle.net/Nnefq/)

# c - 无法在 cmd.exe 上运行此程序

> ID：10698610
> 
> 赞同：0
> 
> 时间：2012-05-22T08:44:24.667
> 
> 标签：c, file, fopen

我试图从文件中复制一些文本并将它们保存在结构成员中，我在 cmd.exe 上运行我的程序并且它崩溃了，但是当我在代码块或 Visual Studio 上运行它时它可以工作，

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

struct AMIGOS 
{ 
    char nom[' '];
    char apellido[' '];
    char nompila[' '];
    char tel[' '];
    char correo[' '];
    char dir[' '];
    char fecha[' ']; 
};

int main()
{
    struct AMIGOS reg;
    char registro[128];

    char**datos;
    char*dato;
    datos = (char**)malloc(10*sizeof(char**));
    int tam;
    int i=0;

    FILE* pt = fopen("arch.txt","r");
    if(pt==NULL)
    {
        printf("filenotfound\n");
    }
    else
    {
        while(fgets(registro,128,pt))
        {
            dato = strtok(registro,"|");
            while(dato)
            {
                tam = strlen(dato);
                datos[i] = (char *)malloc(tam);
                memcpy(datos[i],dato,tam);
                datos[i][tam]=0;
                i++;
                datos[i]=0;
                dato = strtok(0,"|");
            }    
        }
        strcpy(reg.nom,datos[0]);
        strcpy(reg.apellido,datos[1]);
        strcpy(reg.nompila,datos[2]);
        strcpy(reg.fecha,datos[3]);
        strcpy(reg.tel,datos[4]);
        strcpy(reg.correo,datos[5]);
        strcpy(reg.dir,datos[6]);

        printf("%s\n",reg.nom);
        printf("%s\n",reg.apellido);
        printf("%s\n",reg.nompila);
        printf("%s\n",reg.fecha);
        printf("%s\n",reg.tel);
        printf("%s\n",reg.correo);
        printf("%s\n",reg.dir);
    }    
} 
```

文件上的文字：

kevin|clark|ns|2001 年 3 月 15 日|5555555|l@mail.com|123 街

当我尝试在 cmd.exe 上运行它时，有人知道它为什么会崩溃吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:51:58.130

这是超出数组末尾的写入：

```
tam = strlen(dato);
datos[i] = (char *)malloc(tam);
memcpy(datos[i],dato,tam);
datos[i][tam]=0;                 <---- 'tam -1' is the last element 
```

您需要添加一个额外的字符来存储空终止符，或者您可以只使用`strdup()`：

```
datos[i] = strdup(dato); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:53:58.487

我不知道为什么它在 Visual Studio 中有效，但在 Cmd Line 中崩溃。但是，您的代码中存在一些问题：

```
 tam = strlen(dato); 
        datos[i] = (char *)malloc(tam); //You are not allocating memory for '\0' character
        memcpy(datos[i],dato,tam);
        datos[i][tam]=0; //So this is effectively an array out of bound write 
```

应该

```
 tam = strlen(dato); 
        datos[i] = (char *)malloc(tam+1); 
        memcpy(datos[i],dato,tam);
        datos[i][tam]=0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T08:54:07.300

这里有几个问题：

```
datos = (char**)malloc(10*sizeof(char**)); 
```

你实际上的意思是：

```
datos = (char**)malloc(10*sizeof(char*)); 
```

（按照正常的 C 习惯用法：

```
var = malloc(n * sizeof *var); 
```

会避免这个错误。在实践中，大小可能相同，但原则上是错误的。另请注意，`malloc`在 C 中强制转换 of 的结果也是不受欢迎的。）

```
tam = strlen(dato);
datos[i] = (char *)malloc(tam);
memcpy(datos[i],dato,tam);
datos[i][tam]=0; 
```

你的缓冲区溢出了。您分配`tam`了内存字节，然后将字节复制`tam`到其中，但随后您尝试 NUL 终止它。您需要分配`tam + 1`字节。

作为其他建议：

*   您的使用`strcpy`不安全；您不能保证标记化的输入也不会导致您溢出这些缓冲区。
*   `fgets(registro,128,pt)`会更好`fgets(registro, sizeof registro, pt)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T08:47:18.333

这个：

```
char nom[' ']; 
```

是非常奇怪的代码，几乎可以肯定它不会像你期望的那样做。我很想听听这段代码的动机。

它将基本上声明`nom`为一个字符数组，其长度由字符的整数值给出`SPACE`。假设一台 ASCII 机器，这将等价于：

```
char nom[32]; 
```

# android - 如何在原生代码中使用 Android 系统 FreeType 库？

> ID：10698612
> 
> 赞同：5
> 
> 时间：2012-05-22T08:44:36.450
> 
> 标签：android, android-ndk, freetype

我在我的 Android 应用程序中使用 FreeType 作为我自己编译的静态库。我想让我的应用程序更小，所以我正在寻找使用 FreeType 系统版本的可能性。有可能吗？它是一个稳定的 API 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:32:36.247

根据[这篇文章](http://en.wikibooks.org/wiki/OpenGL_Programming/Installation/Android#FreeType)，这是不可能的，需要您交叉编译库。

> 如果你需要 FreeType（一个渲染字体的库），你需要交叉编译它。注意：Android 系统使用 FreeType，但在内部它不会将其暴露给原生应用程序。

# c# - 使用 Microsoft Outlook 14.0 对象库处理所有 Outlook 版本

> ID：10698616
> 
> 赞同：1
> 
> 时间：2012-05-22T08:45:00.847
> 
> 标签：c#, outlook, compatibility

我安装了 Microsoft Outlook 14.0 对象库，然后我使用 C# 进行了编程。

我的应用程序引用 Outlook 2010 主要互操作程序集。（Microsoft Outlook 14.0 对象库）

我可以在此 PIA 中使用任何 Outlook 版本吗？（展望 2000、展望 2003、展望 2007、展望 2010）

在这种情况下，我是否需要修改我的程序以引用旧的 PIA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:00:57.970

“有点”。

不能将任何版本的 Outlook 与任何 PIA 调用一起使用。但是，可以使用*特定底层 Outlook COM 支持*的 PIA 调用。PIA 只是 Outlook COM 接口的包装。（这意味着较新的 ​​PIA 将显示*不能*在旧客户端上使用的方法/属性；请参阅 Bradley 的评论。）

也就是说，新的 PIA*将*与旧的 Outlook* 一起使用，只要不需要引用不同的 PIA，因为底层 COM 接口已经定义好。

2007 年之前的 Outlook 缺少一些功能。Add-in Express 提供了一个（非免费的）“版本中性 API”，它支持最低公分母方法。

*IIRC，至少到 Outlook 2000

快乐编码。

# c# - Math.Round() 十进制 c#

> ID：10698618
> 
> 赞同：0
> 
> 时间：2012-05-22T08:45:15.823
> 
> 标签：c#, .net

我有一个`TimeSpan`，`ts`。

当我使用`Math.Round(ts.TotalHours,2)`它时，它会返回`3,3`，这是正确的。

我想将我的小数格式化为`3,33 -> 3,5`

像这样：

```
3 hours = 3,0
3 hours and 10 minutes = 3,25
3 hours and 20 minutes = 3,5
3 hours and 35 minutes = 3,75
3 hours and 55 minutes = 4 
```

有没有人有一个好主意？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T08:47:35.540

如果你想四舍五入最接近的 0.25，你可以简单地乘以 4，四舍五入，然后除以 4。

```
public static decimal RoundToQuarter(decimal x)
{
  return Math.Round(x*4)/4;
} 
```

您还应该考虑`MidPointRounding`您想要哪种行为。`1/8`即像or之类的值会发生什么`3/8`。默认为四舍五入，其中`1/8`变为`0`，`3/8`变为`0.5`。

# jquery - 动态添加 Facebook 评论控件

> ID：10698622
> 
> 赞同：1
> 
> 时间：2012-05-22T08:45:29.270
> 
> 标签：jquery, asp.net, html, facebook

是否可以动态添加 Facebook 评论控件？我有一个我希望用户能够评论的项目列表，但我不希望页面上同时出现一堆评论控件。我希望能够单击“添加评论”按钮并弹出指向正确项目的评论框？

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T09:07:01.453

是的，这可以通过将 Comments Social 插件代码添加到 DOM 并调用`FB.XFBML.parse()`

# javascript - 是否可以在小胡子（或霍根）中以不同的方式处理 null 和 false？

> ID：10698629
> 
> 赞同：1
> 
> 时间：2012-05-22T08:46:34.123
> 
> 标签：javascript, node.js, mustache, hogan.js

我有一些数据（相当合理）使用 null 和 false 来表示不同的含义。

例如，失败的测试为假，而未完成的测试为空。

我知道在大多数情况下，小胡子部分对 null/false 的处理方式相同。有什么办法可以让 mustache（或者更具体地说，是我正在使用的实现）对 null 和 false 进行不同的处理？

或者我应该为“正在进行的测试”或类似的东西添加一些额外的布尔值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:28:59.697

在 Mustache 规范[[1]](https://github.com/mustache/spec/tree/master/specs)中，所有虚假值都被解释为 false ，除了大多数 javascript 实现将其解释为 falsey 但 Hogan 将其视为真实[[2]](https://github.com/twitter/hogan.js/issues/48)的空字符串（因为 canon Ruby 实现就是这样做的，并且规范省略了空字符串，因此实现者可以随意解释）。

所以简而言之，在 Mustache`null`和`false`Hogan 中是相同的，您将需要另一个属性来传达这种差异。

# jboss - 有人用 JBoss AS 7.1.1 final 运行 AspectJ 吗？

> ID：10698631
> 
> 赞同：1
> 
> 时间：2012-05-22T08:46:38.253
> 
> 标签：jboss, aspectj

我按照他们所说[的在这里](https://issues.jboss.org/browse/AS7-3681?focusedCommentId=12694208&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-12694208)配置了所有内容。

它仍然不会运行。它只是给了我一个 LogManager 异常。
有人在那里成功运行 AspectJ 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:42:22.947

这是一个可能的解决方法/解决方案（来自[http://wiki.eclipse.org/LTWJboss7](http://wiki.eclipse.org/LTWJboss7)）：

> IllegalStateException 由 jBoss7 引发，因为存在限制对 java.util.logging 访问的错误： [https](https://issues.jboss.org/browse/AS7-1) ://issues.jboss.org/browse/AS7-1 - 建议使用部分解决方案来避免此问题，关于更改loadmanager 的加载方式，将其推送到 BootClasspath 并添加几个配置选项。但是，我们建议停用 AspectJ 跟踪工具。您可以通过添加以下选项来实现此目的：

```
-Dorg.aspectj.tracing.enabled=false -Dorg.aspectj.tracing.factory=default 
```

> 由于新的 JBoss 类加载器和模块化架构，存储在 javaagent 中的类对其余模块是不可见的，因此您的方面将不会被找到，并且您会得到不同类型的错误。为了让你的所有代码都能找到你的方面，你必须将 aspectjweaver 和 aspect.jar 文件添加到 bootclasspath 中，并将下一个选项添加到 JBoss 启动：

```
-Djboss.modules.system.pkgs=org.aspectj,com.yourcompany.aspects.package 
```

> 这使得这些包下的每个类在 JBoss 系统中的所有模块之间共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T17:35:22.647

这对我来说非常有效；）。

我配置了三个模块ec.com.acme、org.springframework、org.aspectj。

**关键是将 ironjacamar 模块添加为 org.aspectj 模块的依赖项，并将它们导出为对所有依赖 org.aspectj 模块的模块可见，例如 org.springframework 模块：**

org.aspectj 模块配置：

```
<module xmlns="urn:jboss:module:1.1" name="org.aspectj">
    <resources>             
        <resource-root path="aspectjweaver-1.7.2.jar"/>
    </resources>
    <dependencies> 
        <!--Add and export it to work-->
        <module name="org.jboss.ironjacamar.jdbcadapters"  export="true"/>          
    </dependencies>
</module> 
```

模块配置 org.springframework：

```
<module xmlns="urn:jboss:module:1.1" name="org.springframework">
    <resources>     
        <resource-root path="com.springsource.org.aopalliance-1.0.0.jar"/>
        <resource-root path="org.springframework.aop-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.asm-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.aspects-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.beans-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.context-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.context.support-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.core-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.expression-3.1.0.RELEASE.jar"/>        
        <resource-root path="org.springframework.jdbc-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.orm-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.oxm-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.transaction-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.web-3.1.0.RELEASE.jar"/>
        <resource-root path="org.springframework.web.servlet-3.1.0.RELEASE.jar"/>
        <resource-root path="spring-batch-core-2.1.9.RELEASE.jar"/>
        <resource-root path="spring-batch-infrastructure-2.1.9.RELEASE.jar"/>
    </resources>
    <dependencies>              
        <module name="org.apache.commons.logging" export="true"/>    
        <module name="org.hibernate" slot="3" export="true"/>   
        <module name="javax.api"/>
        <module name="javax.annotation.api"/>
        <module name="javax.el.api"/>
        <module name="javax.enterprise.api"/>
        <module name="javax.ejb.api"/>
        <module name="javax.faces.api"/>
        <module name="javax.interceptor.api"/>            
        <module name="javax.servlet.api"/>
        <module name="javax.servlet.jsp.api"/>
        <module name="javax.transaction.api"/>            
        <module name="javax.xml.bind.api"/> 
        <!--Add and export it to work-->            
        <module name="org.aspectj" export="true"/>
        <module name="com.ibm.as400" slot="main" export="true"/>                
    </dependencies>
</module> 
```

ec.com.acme 模块配置：

```
<module xmlns="urn:jboss:module:1.1" name="ec.com.acme">
    <resources>     
        <resource-root path="prjAcme.jar"/>     
    </resources>
    <dependencies>      
        <module name="org.apache.commons.lang" slot="main" export="true"/>
        <module name="org.apache.commons.beanutils" slot="main" export="true"/>
        <module name="org.apache.commons.collections" slot="main" export="true"/>                       
        <module name="org.apache.commons.io" slot="main" export="true"/>
        <module name="org.apache.commons.lang3" slot="main" export="true"/>
        <!--Add and export it to work-->
        <module name="org.springframework" slot="main" export="true"/>                      
    </dependencies>
</module> 
```

# iphone - 如何设置视图框架宽度？（为什么不能直接设置？）

> ID：10698633
> 
> 赞同：9
> 
> 时间：2012-05-22T08:46:41.687
> 
> 标签：iphone, objective-c, ios, uiview, positioning

我想重置 UIView 的帧大小，所以我写道：

```
view.frame.size.width = x; 
```

但它不起作用，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-22T08:49:59.547

你不能直接设置宽度，这样做

```
CGRect frm = view.frame;
frm.size.width = x;
view.frame = frm; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T08:54:46.957

当您调用时，`view.frame`您会获得 frame rect 属性的副本，因此设置它会`frame.size.width`更改副本的宽度而不是视图的框架大小

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-27T23:15:25.320

这是*为什么*。您的代码转换为

```
[view frame] // <- This hands you a CGRect struct, which is not an object.
             //    At this point, view is out of the game.
.size        // <- On the struct you were handed
.width       //             "
= x;         // <- the struct you were handed changed, but view was untouched 
```

另一种思考方式是那里有一个不可见的变量，您无法访问：

```
 CGRect _ = [view frame]; // hands you a struct
 _.size.width = x; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-30T03:58:05.160

```
-(void)changeWidth:(UIView*)view wid:(int)newWid{
    CGRect rc=view.frame;
    view.frame=CGRectMake(rc.origin.x, rc.origin.y, newWid, rc.size.height);
}

- (void) adjustViewtForNewOrientation: (UIInterfaceOrientation) orientation {
    //if (UIInterfaceOrientationIsLandscape(orientation)) {
    loadMoreView.frame=CGRectMake(0, 0, WIDTH, 50);
    headerView.frame=CGRectMake(0, [MLTool getPaddingHeight:self], WIDTH, HEI_SEGMENT);
    [self changeWidth:webview wid:WIDTH];
    [self changeWidth:tableView wid:WIDTH];
    [self changeWidth:  segmentedControl  wid:WIDTH-SEG_LEFT*2];
} 
```

# iphone - 将 CGPDFPageRef 转换为整数

> ID：10698634
> 
> 赞同：0
> 
> 时间：2012-05-22T08:46:45.150
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我需要将`CGPDFPageRef`var 转换为 integer ，我创建一个`if`语句来检查 PDF 页面是否小于或大于文件未显示的内容。

```
- (id) setUpPDF: (int) pageNumber {    

//** = I need some integer that automatically detects PDF pages
    if ((pageNumber < **) || (pageNumber > **)) return nil;

 CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(),

                                              CFSTR("test"),
                                              CFSTR("pdf"), NULL);

    myDocumentRef = CGPDFDocumentCreateWithURL(pdfURL);
    myPageRef = CGPDFDocumentGetPage(myDocumentRef, pageNumber); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:27:27.797

您可以使用 获取总页数`CGPDFDocumentGetNumberOfPages(myDocumentRef)`。

`CGPDFDocumentGetNumberOfPages()`返回一个 size_t，它是无符号整数。您可以直接将其与整数类型进行比较。

所以对于你上面的代码片段，我假设你想要这样的东西：

```
CFURLRef pdfURL = CFBundleCopyResourceURL(CFBundleGetMainBundle(), CFSTR("test"), CFSTR("pdf"), NULL);
myDocumentRef = CGPDFDocumentCreateWithURL(pdfURL);
// take note that pdf page numbering starts at 1
if ((pageNumber < 1) || (pageNumber > CGPDFDocumentGetNumberOfPages(myDocumentRef))) return nil; 
```

我建议将您的参数从更改`(int)pageNumber`为`(size_t)pageNumber`。

# css - CSS 两个 div 宽度 50% 在一行中，文件中有换行符

> ID：10698636
> 
> 赞同：60
> 
> 时间：2012-05-22T08:46:50.780
> 
> 标签：css, inline

我尝试使用百分比作为宽度来构建流畅的布局。这样做我试过这个：

```
<div style="width:50%; display:inline-table;">A</div>
<div style="width:50%; display:inline-table;">B</div> 
```

在那种情况下，它们不会排成一行，但是如果我删除它们之间的换行符，如下所示：

```
 <div style="width:50%; display:inline-table;">A</div><div style="width:50%;   display:inline-table;">B</div> 
```

然后它工作正常。哪里有问题？我怎么能做这样的事情，但不使用绝对位置和浮动。

ps对不起英语。pss 我希望我能很好地解释我的问题

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-05-22T08:55:02.400

问题是当某些东西是内联的时，每个空格都被视为一个实际的空间。所以它会影响元素的宽度。我建议使用`float`or `display: inline-block`。（只是不要在 div 之间留下任何空格）。

这是一个演示：

```
div {
  background: red;
}
div + div {
  background: green;
}
```

```
<div style="width:50%; display:inline-block;">A</div><div style="width:50%; display:inline-block;">B</div>
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-05-22T09:06:33.967

问题是，如果在 HTML 中它们之间有一个新行，那么当您使用`inline-table`或`inline-block`

50% + 50% + 那个空间 > 100% 这就是为什么第二个最终低于第一个

解决方案：

```
<div></div><div></div> 
```

或者

```
<div>
</div><div>
</div> 
```

或者

```
<div></div><!--
--><div></div> 
```

这个想法是在您的 HTML 中的第一个结束 div 标记和第二个开始 div 标记之间没有任何类型的空间。

PS - 我也会用这个`inline-block`代替`inline-table`

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-03-19T09:02:00.147

使用以下 CSS 将它们包裹在 div 周围

```
.div_wrapper{
    white-space: nowrap;
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-05-22T09:13:46.650

给这个`parent`DIV **font-size:0**。像这样写：

```
<div style="font-size:0">
  <div style="width:50%; display:inline-table;font-size:15px">A</div>
  <div style="width:50%; display:inline-table;font-size:15px">B</div>
</div> 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-03-19T10:15:09.893

> 我怎么能做这样的事情，但不使用绝对位置和浮动？

除了使用该`inline-block`方法（如其他答案中所述）之外，还有其他一些方法：

## 1) CSS 表格 ( [FIDDLE](http://jsfiddle.net/danield770/q5xzyk76/) )

```
.container {
  display: table;
  width: 100%;
}
.container div {
  display: table-cell;
}
```

```
<div class="container">
  <div>A</div>
  <div>B</div>
</div>
```

## 2）弹性盒（[小提琴](http://jsfiddle.net/danield770/q5xzyk76/1/)）

```
.container {
  display: flex;
}
.container div {
  flex: 1;
}
```

```
<div class="container">
  <div>A</div>
  <div>B</div>
</div>
```

作为参考，[这篇 CSS-tricks 文章](https://css-tricks.com/left-and-right/)似乎总结了实现这一目标的各种方法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-08-04T09:45:46.293

# [CSS 弹性盒](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout)

简单的现代解决方案。[比 HTML 表格更好！](https://stackoverflow.com/questions/18419082/flexbox-vs-tables-why-do-we-need-flexbox)

```
.container {
  display: flex;
}
.container div {
  flex: auto; /* also 1 or 50% */
}
```

```
<div class="container">
  <div>A</div>
  <div>B</div>
</div>
```

## 替代方案：[CSS 网格](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout)

```
.container {
  display: grid;
  grid-template-columns: 1fr 1fr; /* also 50% */
}
```

```
<div class="container">
  <div>A</div>
  <div>B</div>
</div>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-22T09:13:18.787

```
<div id="wrapper" style="width: 400px">
    <div id="left" style="float: left; width: 200px;">Left</div>
    <div id="right" style="float: right; width: 200px;">Left</div>
    <div style="clear: both;"></div>
</div> 
```

我知道这个问题需要内联块，但尝试在 IE 7中查看[http://jsfiddle.net/N9mzE/1/ （我工作的地方支持的最古老的浏览器）。](http://jsfiddle.net/N9mzE/1/)div不是并排的。

OP 说他不想使用花车，因为他不喜欢它们。嗯......在我看来，制作在任何浏览器中看起来都不奇怪的好网页应该是主要目标，而您可以通过使用浮动来做到这一点。

老实说，我能看出问题所在。花车很棒。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-22T08:59:21.353

基本上`inline-table`是用于元素表的，我想你真正需要的是`inline-block`，如果你不得不使用`inline-table`，试试这种方式：

```
<div style="width:50%; display:inline-table;">A</div><!--
--><div style="width:50%; display:inline-table;">B</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-02T12:37:17.910

抱歉，如果您打喷嚏更用力，我在这里看到的所有答案要么是骇人听闻的，要么是失败的。

如果您使用表格，您可以（如果您愿意）在 div 之间添加空格、设置边框、填充...

```
<table width="100%" cellspacing="0">
    <tr>
        <td style="width:50%;">A</td>
        <td style="width:50%;">B</td>            
    </tr>
</table> 
```

在此处查看更完整的示例：http: [//jsfiddle.net/qPduw/5/](http://jsfiddle.net/qPduw/5/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-05-22T09:04:25.487

将宽度设置为 50% 时遇到的问题是子像素的舍入。如果您的容器的宽度是 99 像素，则 50% 的宽度可以产生 2 个每个 50 像素的容器。

使用 float 可能是最简单的，而且不是一个坏主意。有关如何解决该问题的更多详细信息，请参阅[此问题。](https://stackoverflow.com/questions/1309964/how-to-fix-internet-explorer-7-bug-when-using-percentage-widths-for-layout)

如果您不想使用浮动，请尝试使用 49% 的宽度。据我所知，这将跨浏览器工作，但不是像素完美的..

html:

```
<div id="a">A</div>
<div id="b">B</div> 
```

CSS：

```
#a, #b {
    width: 49%;
    display: inline-block; 
}
#a {background-color: red;}
#b {background-color: blue;} 
```

# c# - MvvmCross ViewTypeResolver 不解析标签（片段或自定义类型）

> ID：10698638
> 
> 赞同：3
> 
> 时间：2012-05-22T08:47:03.500
> 
> 标签：c#, xamarin.android, mvvmcross

实际情况是，我在`MvxViewTypeResolver`类中添加了“Fragment”-Case，所以它看起来像这样：

```
 #region Copyright
// <copyright file="MvxViewTypeResolver.cs" company="Cirrious">
// (c) Copyright Cirrious. http://www.cirrious.com
// This source is subject to the Microsoft Public License (Ms-PL)
// Please see license.txt on http://opensource.org/licenses/ms-pl.html
// All other rights reserved.
// </copyright>
// 
// Project Lead - Stuart Lodge, Cirrious. http://www.cirrious.com
#endregion

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Android.Views;
using Cirrious.MvvmCross.Binding.Android.Interfaces.Binders;

namespace Cirrious.MvvmCross.Binding.Android.Binders
{
    public class MvxViewTypeResolver : IMvxViewTypeResolver
    {
        private Dictionary<string, Type> _cache = new Dictionary<string, Type>();

        public IDictionary<string, string> ViewNamespaceAbbreviations { get; set; }

        #region IMvxViewTypeResolver Members

        public virtual Type Resolve(string tagName)
        {
            Type toReturn;
            if (_cache.TryGetValue(tagName, out toReturn))
                return toReturn;

            var unabbreviatedTagName = UnabbreviateTagName(tagName);

            var longLowerCaseName = GetLookupName(unabbreviatedTagName);
            var viewType = typeof(View);

#warning AppDomain.CurrentDomain.GetAssemblies is only the loaded assemblies - so we might miss controls if not already loaded
            var query = from assembly in AppDomain.CurrentDomain.GetAssemblies()
                        from type in assembly.GetTypes()
                        where viewType.IsAssignableFrom(type)
                        where (type.FullName ?? "-").ToLowerInvariant() == longLowerCaseName
                        select type;

            toReturn = query.FirstOrDefault();
            _cache[tagName] = toReturn;

            return toReturn;
        }

        private string UnabbreviateTagName(string tagName)
        {
            var filteredTagName = tagName;
            if (ViewNamespaceAbbreviations != null)
            {
                var split = tagName.Split(new char[] {'.'}, 2, StringSplitOptions.RemoveEmptyEntries);
                if (split.Length == 2)
                {
                    var abbreviate = split[0];
                    string fullName;
                    if (ViewNamespaceAbbreviations.TryGetValue(abbreviate, out fullName))
                    {
                        filteredTagName = fullName + "." + split[1];
                    }
                }
            }
            return filteredTagName;
        }

        #endregion

        protected string GetLookupName(string tagName)
        {
            var nameBuilder = new StringBuilder();

            switch (tagName)
            {
                case "View":
                case "ViewGroup":
                    nameBuilder.Append("android.view.");
                    break;
                case "fragment":
                    nameBuilder.Append("android.app.");
                    break;
                default:
                    if (!IsFullyQualified(tagName))
                        nameBuilder.Append("android.widget.");
                    break;
            }

            nameBuilder.Append(tagName);
            return nameBuilder.ToString().ToLowerInvariant();
        }

        private static bool IsFullyQualified(string tagName)
        {
            return tagName.Contains(".");
        }
    }
} 
```

现在它正在提交正确的`longLowerCaseTagName`（android.app.fragment），但在查询中它无法解析类型。

我的建议是，在应该解析类型时不加载片段控件。也许还有其他方法可以解决类型？

此外，如果我添加一个自定义类型（`Mvx.MyCustomType`在 axml 中给出标签）它不会得到解决。`MvxBindingAttributes.xml`在这种情况下我必须添加一些东西吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:39:34.487

先解释一下代码：

MvvmCross Binder 使用的自定义 XML 充气器工厂尝试以与标准 2.x Android XML 充气器非常相似的方式加载视图。

视图类型解析的默认代码确实在：[https ://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/Android/Binders/MvxViewTypeResolver.cs](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/Android/Binders/MvxViewTypeResolver.cs)

如果您的 xml 包含一个名称，例如`<MyCompany.MyProject.MyViews.MyFirstView />`视图类型解析器：

*   首先检查缩写并将它们扩展为完整的命名空间 - 默认情况下，唯一已知的缩写`Mvx.`是扩展为：`Cirrious.MvvmCross.Binding.Android.Views.`. 如果您想添加更多缩写，请`ViewNamespaceAbbreviations`在[https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/Android/MvxBaseAndroidBindingSetup.cs中覆盖](https://github.com/slodge/MvvmCross/blob/master/Cirrious/Cirrious.MvvmCross.Binding/Android/MvxBaseAndroidBindingSetup.cs)

*   然后检查未缩写名称是否为非命名空间名称。如果是，则假定该类是 Android 命名空间并在其前面加上`android.view.`or`android.widget.`

*   然后将完全命名空间的名称转换为全小写作为不区分大小写的查找键

*   使用该小写键在所有加载的程序集中搜索从 View 派生的所有类型。

*   缓存结果（无论是否为空）以加速后续的膨胀。

所有这些行为都旨在匹配[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.6_r1/android/中的默认 Android xml 视图膨胀代码视图/LayoutInflater.java#LayoutInflater.createViewFromTag%28java.lang.String%2Candroid.util.AttributeSet%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.6_r1/android/view/LayoutInflater.java#LayoutInflater.createViewFromTag%28java.lang.String%2Candroid.util.AttributeSet%29)

* * *

有了这个解释 - 这是您问题的答案：

* * *

MvvmCross 目前还不包含任何 Fragment 支持。官方的 MonoDroid 片段支持本身仅在上周发布，我还没有任何人请求片段 - Android“片段化”似乎让大多数人回到基于 Activity 和 Dialog 的代码。

简而言之；查看文档，`fragment`这不是 Android 视图 - 看起来 Fragment 直接继承自 Java.Lang.Object - 请参阅[http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

因此，MvvmCross ViewTypeResolver 目前无法处理片段。

我建议如果您今天需要 mvvmcross 和 Fragments，那么您最好的选择是用您自己的解析器替换默认解析器（使用 IoC） - 但我对此无法提供太多建议，因为我还没有完全阅读并了解[http://developer.android.com/guide/topics/fundamentals/fragments.html上的 droid 文档](http://developer.android.com/guide/topics/fundamentals/fragments.html)

根据我在创建当前通货膨胀代码方面的经验，我认为您会在执行此操作时找到必要的源代码 - 例如，请参阅： http: [//grepcode.com/file/repository.grepcode.com/java/ext/com。 google.android/android/4.0.1_r1/android/view/LayoutInflater.java#LayoutInflater.createViewFromTag%28android.view.View%2Cjava.lang.String%2Candroid.util.AttributeSet%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/view/LayoutInflater.java#LayoutInflater.createViewFromTag%28android.view.View%2Cjava.lang.String%2Candroid.util.AttributeSet%29)

我无法向您提供有关何时提供官方 mvvmcross 片段支持的任何信息 - 这不是当前计划的内容。

* * *

支持自定义视图，但通常不会存在于`Mvx.`缩写命名空间中。

它们更有可能存在于您的 UI 应用程序命名空间或某些共享库中。

要查看实际的自定义视图，请参阅教程中的 PullToRefresh 示例 - [https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.Droid/Resources/Layout /Page_PullToRefreshView.axml](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.Droid/Resources/Layout/Page_PullToRefreshView.axml)

# mongodb - 多次更新子文档

> ID：10698639
> 
> 赞同：5
> 
> 时间：2012-05-22T08:47:07.367
> 
> 标签：mongodb

如果“oid”和“instance”字段匹配，我想对子文档“value”字段执行多次更新。我可以一次做一个子文档，但是有没有办法做多个

-- 这适用于一个 --

```
db.myTable.update({ "data" : { "$elemMatch" : { "oid" : "1.3.6.1.4.1.111.3.10.2.5.35.3", 
                                                "instance" : "0" } }, 
                    "$atomic" : "true" },
                  { $set: { "data.$.value": "change good" }}, 
                  false, 
                  true);

  "_id" : 483,
  "data" : [{
      "oid" : "1.3.6.1.4.1.111.3.10.2.5.35.3",
      "instance" : "0",
      "value" : "0"
    }, {
      "oid" : "1.3.6.1.4.1.111.3.999.2.5.2",
      "instance" : "0",
      "value" : "aaa"
    }, {
      "oid" : "1.3.6.1.4.1.111.3.30.5.1.1",
      "instance" : "0",
      "value" : "BBB"
    }]} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T10:29:13.773

这个问题已经被问过几次[了](https://stackoverflow.com/questions/10662779/change-all-my-documents-nested-document-value/10663716)，但是不，你不能一次完成。重复答案：

> 您必须自己在应用程序代码中执行此操作，方法是查询文档并遍历所有嵌套文档；然后将其保存回 MongoDB。
> 
> 为了防止出现这种情况，请查看 [http://www.mongodb.org/display/DOCS/Atomic+Operations上的比较和交换部分](http://www.mongodb.org/display/DOCS/Atomic+Operations)
> 
> 目前有一个开放的票证可以将此功能添加到 MongoDB。您可能想要投票： [https ://jira.mongodb.org/browse/SERVER-1243](https://jira.mongodb.org/browse/SERVER-1243)

# python - 多维 numpy 数组 __eq__

> ID：10698640
> 
> 赞同：1
> 
> 时间：2012-05-22T08:47:11.933
> 
> 标签：python, arrays, numpy

我有一个`np.array`像

```
x = np.array([[1,2], [4,5], [4,6], [5,4], [4,5]]) 
```

现在我想要 x 等于`[4,5]`( `-> [1, 4]`) 的索引。操作员`==`以不同的方式工作：

```
x == [4,5]
array([[False, False],
       [ True,  True],
       [ True, False],
       [False, False],
       [ True,  True]], dtype=bool) 
```

但我想要类似的东西`[False, True, False, False, True]`。可以做`and`吗？

通常数组非常大，我必须做很多次，所以我需要一个非常快速的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:21:16.387

这应该是numpy方式：

```
x = np.array([[1,2], [4,5], [4,6], [5,4], [4,5]])
(x == [4,5]).all(1)

#out: array([False,  True, False, False,  True], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:52:37.847

没有使用 numpy 的经验，但这适用于标准数组：

```
x = [[1, 2], [4, 5], [4, 6], [5, 4], [4, 5]]

indices = [i for i, v in enumerate(x) if v == [4, 5]]
# gives [1, 4]

matches = [v == [4, 5] for v in x]
# gives [False, True, False, False, True] 
```

# c# - 通过 webclient 下载正确编码的 html 页面

> ID：10698648
> 
> 赞同：3
> 
> 时间：2012-05-22T08:48:07.210
> 
> 标签：c#, encoding, webclient

我下载了一个带有编码的页面：“usa-ascii”，但我得到了错误的字符。为什么？？

```
WebClient wb = new WebClient();
Encoding enc = Encoding.GetEncoding("US-ASCII");
wb.Encoding = enc;
byte[] by = wb.DownloadData(link);
string htmlDoc = enc.GetString(by); 
```

但我得到：**Pr?z**而不是：**Präz**。

我的[链接](http://www.rosenkranz-elektronik.de/usedline.htm)的 HTML : (charest=us-ascii)

```
<html debug="true">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii"/>
</head>
................... 
```

怎么了？？？

ps 我尝试编码 utf-8，但也没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:57:25.877

US-ASCII 没有该字符，因此页面包含无效字符（对于已定义的字符集）。您的代码没有错，问题是 US-ASCII 不能满足`ä`.

US-ASCII 数据表：[链接](http://en.wikipedia.org/wiki/File%3aASCII_Code_Chart.svg)

# node.js - 在 Heroku 上每次部署后避免 npm refresh

> ID：10698652
> 
> 赞同：13
> 
> 时间：2012-05-22T08:48:30.393
> 
> 标签：node.js, heroku, npm

我有一个托管在 Heroku 上的 Node.js 网站，我使用 git 进行部署。我使用了几个 node 模块，在 package.json 中引用；有没有办法阻止 Heroku 在我每次部署新版本的代码时“刷新”它们，只要 package.json 没有改变？

注意：这对于“本机”模块特别有用，其编译需要一些时间；对于 .js-only 模块，我成功地将它们从 package.json 中删除，并将它们的 node_modules/ 文件夹添加到 git repo 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-04T23:40:24.687

我是官方 Heroku Node.js Buildpack 的维护者。

我们有一个新版本的 beta 版本的 buildpack，它具有缓存支持，专为您上面描述的用例而设计。您可以在[https://github.com/heroku/heroku-buildpack-nodejs/tree/diet#about-this-refactor阅读更多相关信息](https://github.com/heroku/heroku-buildpack-nodejs/tree/diet#about-this-refactor)

最终这将成为 Heroku 上的默认 Node.js 构建包，但如果你现在想使用它，你需要显式设置 BUILPACK_URL 配置变量：

```
heroku config:set BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-nodejs#diet -a my-node-app
git commit -am "fakeout" --allow-empty
git push heroku 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T14:47:17.007

似乎 David Dollar 最近在[heroku-buildpack-nodejs](https://github.com/heroku/heroku-buildpack-nodejs/pull/43)取得了进展。

简而言之：

`heroku config:set BUILDPACK_URL=https://github.com/ddollar/heroku-buildpack-nodejs`

在这里查看答案： [https ://stackoverflow.com/a/18535675/1318839](https://stackoverflow.com/a/18535675/1318839)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T16:13:20.350

您可以同时添加 .js 和本机 npm 包，并且仍然避免“刷新”，（至少是“刷新”的重新下载部分。）

将本机包包含到您的`node_modules/`目录中。当您部署到 Heroku 时， `npm install`将跳过包的下载。 `npm rebuild`也在运行。重新编译原生包需要一些时间，但它应该是可以忍受的，除非你有大量的原生包。

*旁注*：[Heroku 文档介绍了当您推送 nodejs 应用程序时 Heroku 所做的事情](https://devcenter.heroku.com/articles/nodejs-support#build-behavior)。

*旁注：*之所以`npm rebuild`需要，是因为“[节点升级后节点和本机代码模块](https://github.com/mranney/node_redis#redis---a-nodejs-redis-client)之间可能会发生神秘的故障”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T17:11:13.877

克隆 Heroku node.js buildpack，并修改它以删除该`rebuild`命令。

该命令当前在此处运行： [https](https://github.com/heroku/heroku-buildpack-nodejs/blob/master/bin/compile#L180) ://github.com/heroku/heroku-buildpack-nodejs/blob/master/bin/compile#L180 ，但这势必会改变。

您可以通过修改以下命令以匹配您自己的 repo 来运行创建一个使用您自己的 buildpack 的应用程序：
`heroku create --buildpack http://github.com/heroku/heroku-buildpack-nodejs.git`

或者使用以下命令更改现有应用程序的 buildpack：
`heroku config:add BUILDPACK_URL=git://github.com/heroku/heroku-buildpack-nodejs.git`

# c++ - 选择抛出错误 WSAENOTSOCK

> ID：10698657
> 
> 赞同：0
> 
> 时间：2012-05-22T08:48:46.753
> 
> 标签：c++

**我面临的问题**：-

在 Win7 Home Premium 上使用包含 IPv6 和 IPv4 套接字的 FD_SET 集调用 Select(..) API 时会引发错误，但相同的应用程序在其他 win7 机器上运行良好。但是如果我在 FD_SET 中只使用 IPv6 或 IPv4 套接字，那么它运行良好。所以我认为，系统同时支持 IPv6 和 IPv4。

我尝试使用以下链接中的服务器：-

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms738639%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738639%28v=vs.85%29.aspx)

即使这个示例也是来自 select 调用的相同错误。

任何人都可以帮助我了解此错误背后的原因并解决此问题。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:05:57.907

不幸的是，Windows 不允许在对`select`. 这是因为每个提供者都被允许实现自己的`select`处理程序。

> fd_set 结构中包含的套接字必须与单个服务提供者相关联。--[选择功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)

Windows 将选择一个提供者发送`select`到（我相信集合中第一个套接字的提供者），并且该提供者不会识别其他提供者的套接字。老实说，无论如何你都不应该使用`select`它——它只是为了与 BSD 套接字接口兼容而提供的。这绝对不是“Windows 方式”。

# export - 使用 WebDAV 从 Plone 导出文件

> ID：10698662
> 
> 赞同：0
> 
> 时间：2012-05-22T08:49:11.297
> 
> 标签：export, plone, webdav, zope

我有一个 Plone 网站，其中包含数千份 PDF 格式的合同，我需要下载。现在的问题是，如果我使用 WebDAV 连接到门户并下载它。我只能下载大约 1607 个文件，但应该还有更多！如果我看一下该网站，我意识到我只能查询 1000 个结果。大约有 5K 个结果，但如果我将 &query_start=999 放在 url 中，我只会看到第 999 个和第 1000 个结果。这会是那个问题吗？我使用的是未修改的配置，只是添加了启用 WebDAV 的参数。

谁能解释发生了什么并告诉我该怎么做？非常感谢，我将不胜感激！:)

# iphone - 来自相机的原始图像数据

> ID：10698663
> 
> 赞同：4
> 
> 时间：2012-05-22T08:49:11.590
> 
> 标签：iphone, objective-c, ios, image, camera

我一直在搜索这个论坛，但我找不到我真正需要的东西。我想从相机获取原始图像数据。到目前为止，我试图从该方法中从 imageDataSampleBuffer 中获取数据 `captureStillImageAsynchronouslyFromConnection:completionHandler:` 并将其写入一个`NSData`对象，但这不起作用。也许我走错了路，或者我只是做错了。我不想要以任何方式压缩图像。

简单的方法是使用`jpegStillImageNSDataRepresentation:` from `AVCaptureStillImageOutput`，但就像我说的那样，我不希望它被压缩。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T09:10:51.037

我就是这样做的：

1：我首先使用以下方法打开相机：

```
- (void)openCamera
{
    imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;

    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {        
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                              (NSString *) kUTTypeImage,
                              (NSString *) kUTTypeMovie, nil];
        imagePicker.allowsEditing = NO;

        [self presentModalViewController:imagePicker animated:YES];
    }
    else {
        lblError.text = NSLocalizedStringFromTable(@"noCameraFound", @"Errors", @"");  
    }
} 
```

拍摄照片时，将调用此方法：

```
 -(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    // Save and get the path of the image
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    if([mediaType isEqualToString:(NSString *)kUTTypeImage]) 
    {
        // Save the image
        image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
        [library writeImageToSavedPhotosAlbum:[image CGImage] orientation:(ALAssetOrientation)[image imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error){
            if(!error) {
               //Save path and location to database
               NSString *pathLocation = [[NSString alloc] initWithFormat:@"%@", assetURL];
            } else {
                NSLog(@"CameraViewController: Error on saving image : %@ {imagePickerController}", error);
            }
        }];

    }
    [imagePicker dismissModalViewControllerAnimated:YES];
} 
```

然后通过该路径，我以全分辨率从库中获取图片（使用“1”）：

```
 -(void)preparePicture: (NSString *) filePathPicture{
    ALAssetsLibraryAssetForURLResultBlock resultBlock = ^(ALAsset *myasset)
    {
        if(myasset != nil){
            ALAssetRepresentation *assetRep = [myasset defaultRepresentation];
            CGImageRef imageRef = [assetRep fullResolutionImage];
            if (imageRef) {
                NSData *imageData = UIImageJPEGRepresentation([UIImage imageWithCGImage:imageRef], 1);
            }
        }else {
            //error
        }
     };

    ALAssetsLibraryAccessFailureBlock failureBlock  = ^(NSError *error)
    {      
         NSString *errorString = [NSString stringWithFormat:@"can't get image, %@",[error localizedDescription]];
        NSLog(@"%@", errorString);
    };

     if(filePathPicture && [filePathPicture length])
     {
         NSURL *assetUrl = [NSURL URLWithString:filePathPicture];
         ALAssetsLibrary *assetslibrary = [[ALAssetsLibrary alloc] init];
        [assetslibrary assetForURL:assetUrl 
                   resultBlock:resultBlock
                  failureBlock:failureBlock];
    }
} 
```

希望这可以帮助您进一步:-)。

# javascript - 将文件分配为隐藏输入的值

> ID：10698668
> 
> 赞同：1
> 
> 时间：2012-05-22T08:49:31.717
> 
> 标签：javascript, file, file-upload, hidden-field

我`<input name="filesToUpload" id="filesToUpload" type="file" multiple />`在我的应用程序中使用了多个文件上传字段。

我想要完成的是列出用户选择的文件，然后允许他们删除列表中的任何文件。最后，当提交表单时，我使用`FormData`对象通过 AJAX 以二进制形式发送整个数据。

一切都很好，除了删除部分。

我知道该`FileList`属性是只读的，所以我所做的是将文件作为隐藏输入字段的值分发，附加到`li`我列出文件名的每个位置。因此，如果用户删除了一个`li`项目，隐藏的输入字段将随之消失，最后，我通过将它们附加到`FormData`对象来收集所有剩余的字段。

问题是，我将文件作为值分配给隐藏输入的每一次尝试都给了我奇怪的结果。

我的代码是这样的：

```
listFiles : function () {
    var file, files, filesList, filesLength, read;

    files = this.files;
    filesList = $('.files');
    filesLength = files.length;

    // Clear the list
    filesList.html('');

    for ( var i = 0; i < filesLength; i++ ) {
        file = files[i];

        // This is to read the content of the file
        read=new FileReader();
        read.readAsBinaryString( file );

        // When reading is finished
        read.onloadend = function() {
           filesList.append(
                    '<li>' + 
                    '<span class="fileName">' + file.name + '</span>' + 
                    '<a href="#" class="deleteAttachment">x</a>' +
                    '<input type="hidden" name="file[]" value="' + read.result +'"/>' +
                    '</li>');
         }
     }
  } 
```

我只是从最后一个文件中获取数据，此外，由于数据被打印到各处，DOM 已损坏。

此处演示 => [http://jsfiddle.net/zKyXC/](http://jsfiddle.net/zKyXC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:16:52.427

我尝试了各种方法来实现上述方法（将每个单独的文件分配给 input[type="hidden"] 字段的值以允许文件删除功能），但没有一个成功。此刻，我不知道这是否有可能做到。

但是，我确实使用替代解决方案来解决问题。这是以防其他人发现它有用。

我没有使用，而是`input[type="hidden"]`使用了一个全局数组，我在收到文件时将它们存储在其中。然后我从该数组中删除项目，这是您从数组中删除对象的标准方式。最后，我将每个项目附加到`formData`对象并将其发送到服务器。

我像这样创建并填充全局数组：

```
globals.files =[].slice.call( this.files ); 
```

我像这样从中删除：

```
$.each( files, function( index, val ) {
            if ( this.name === fileText ) {
                globals.files.splice( index, 1 );
            }
        }); 
```

注意：`fileText`是我存储要删除的项目名称的地方。

最后我将它附加到`formData`：

```
var formData = new FormData();

$.each( files, function( ind, val ) {
            formData.append( 'files[]', this );
       }); 
```

并将其作为`data`标准 jQuery ajax 调用的属性发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:11:54.640

如果我没记错，只有带引号的文件`"`出错，如果不转义，`value`第一次出现时会被截断，`"`其余部分将显示为html，所以你需要的是

```
read.result.replace(/"/g, '&quot;'); 
```

# java - Spring多个@Configuration类

> ID：10698669
> 
> 赞同：18
> 
> 时间：2012-05-22T08:49:32.123
> 
> 标签：java, spring

我正在使用 Spring`@Configuration`注释来配置我的应用程序。

目前，我有一个`@Configuration`类，其中声明了我的所有 bean。随着 bean 数量的增加（超过 30 个），我想将它分成许多类。

一些 bean 使用公共类（主要是实用程序类）：

*Foo.class*是一个实用类 *Bar.class*和*Baz.class*都使用*Foo.class*

我想拥有`Foo, Bar and Baz`三个不同的`@Configuration`班级（分别`Conf1, Conf2 and Conf3`）

问题是我无权访问`Conf1`from的实例`Conf2 and Conf3`：

**Conf1.class**

```
@Configuration 
public class Conf1 {
    @Bean
    public Foo foo() {
        return new Foo();
    }
} 
```

**Conf2.class**

```
@Configuration 
public class Conf2 {
    @Bean
    public Bar bar() {
        Bar bar = new Bar();
        bar.setFoo(conf1.foo()); // Not possible !
        return bar;
    }
} 
```

**Conf3.class**

```
@Configuration 
public class Conf3 {
    @Bean
    public Baz baz() {
        Baz baz = new Baz();
        baz.setFoo(conf1.foo()); // Not possible !
        return baz;
    }
} 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-22T09:09:12.920

您应该能够自动装配它们：

```
@Configuration 
public class Conf2 {
    @Autowired
    Conf1 conf1;
    ...
} 
```

或者，您可以自动装配 bean 而不是配置：

```
@Configuration 
public class Conf2 {
    @Autowired
    Foo foo;
    ...
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-03-18T11:29:47.163

```
@Configuration
@Import({ DataSourceConfig.class, TransactionConfig.class })
public class AppConfig extends ConfigurationSupport {
      // bean definitions here can reference bean definitions in DataSourceConfig or TransactionConfig
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-22T16:13:46.360

Spring 框架[第 5 章](https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/modularizing-configurations.html)很好地解释了它。

*   **@ExternalBean** ：一个配置类可能需要引用在另一个配置类（或在 XML 中，就此而言）中定义的 bean。@ExternalBean 注解就提供了这样一种机制。当 JavaConfig 遇到注解为 @ExternalBean 的方法时，它会将该方法定义替换为在封闭的 bean 工厂中查找与方法名称同名的 bean

*   **@Import**：@Import 代表 JavaConfig 的 XML 配置元素的等价物。一个配置类可以导入任意数量的其他配置类，它们的 bean 定义将像本地定义一样处理

*   **ConfigurationSupport**：为方便起见，@Configuration 类可以扩展 ConfigurationSupport，主要是为了便于从封闭的 BeanFactory / ApplicationContext 中轻松查找 bean。

# python - 使用 Python 授权下载到特定位置

> ID：10698671
> 
> 赞同：1
> 
> 时间：2012-05-22T08:49:33.230
> 
> 标签：python, authentication, download, mechanize

我正在尝试从具有身份验证的网站下载文件。我想出了如何下载该文件，但它会保存在 %PROFILE\appdata\local\temp\ 目录中，名称类似于 tmpxhq6u1.mobi。如何使用另一个文件名将其保存到另一个位置？

```
from mechanize import Browser

USER_AGENT = "Mozilla/5.0 (X11; U; Linux i686; tr-TR; rv:1.8.1.9) Gecko/20071102 Pardus/2007 Firefox/2.0.0.9"

br = Browser()
br.addheaders = [("User-agent", USER_AGENT)]

br.open("https://login.nrc.nl/login?service=http://digitaleeditie.nrc.nl/digitaleeditie/")

br.select_form(nr=0)
br['username'] = "XXXXXXX"
br['password'] = "xxxxxxx"
# br['rememberMe'] = ["1"]

response = br.submit()
print response.read()
f = br.retrieve('http://digitaleeditie.nrc.nl/digitaleeditie/helekrant/mobipocket/nn_20120521.mobi')[0]
print f 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:57:20.200

该`retrieve`方法采用文件名：

```
(filename, headers) = br.retrieve(url, filename) 
```

仅当您不指定文件名时，它才会在临时目录中为您生成一个。

mechanize`retrieve`方法与 ( )[http://docs.python.org/library/urllib.html#urllib.urlretrieve] 基本相同，因此您可以通过阅读 urllib 文档`urllib.urlretrieve`了解如何使用。`retrieve`

享受你的报纸！

# javascript - For循环和用JavaScript编写

> ID：10698673
> 
> 赞同：-2
> 
> 时间：2012-05-22T08:49:38.830
> 
> 标签：javascript, loops

> **可能重复：**
> [循环 Javascript 对象的最安全方法](https://stackoverflow.com/questions/6866411/safest-way-to-loop-over-javascript-object)

我在 JavaScript 中有这段硬编码的代码片段，我想知道是否可以通过 for 循环使其动态化。我的问题是我不确切知道如何输出 JavaScript 文件中的值。

```
function getEventData() {
    return {
        events: [
        {
        "id":1,
        "start": new Date(year, month, day, 12),
        "end": new Date(year, month, day, 13, 30),
        "title":"Check Up"
        },
        {
        "id":2,
        "start": new Date(year, month, day, 14),
        "end": new Date(year, month, day, 14, 45),
        "title":"Free Trial",
        readOnly: true
        },
        {
        "id":3,
        "start": new Date(year, month, day + 1, 17),
        "end": new Date(year, month, day + 1, 17, 45),
        "title": "Consultant"
        },
        {
        "id":4,
        "start": new Date(year, month, day - 1, 8),
        "end": new Date(year, month, day - 1, 9, 30),
        "title":"Check Up"
        }
     ]
    };
} 
```

那是硬编码的 JavaScript 代码。是否可以遍历列表并输出如下所示的值：

```
for(var i = 0; i < listEvents.lenght; i++)
        {
            {
             "id": listEvents[i].Id,
            "start": listEvents[i].Start,
            "end": listEvents[i].End,
            "title": listEvents[i].Title
            },
        } 
```

非常感谢您的帮助.. 非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:54:00.827

像这样的东西？

```
var result = { events: [] };

for(var i = 0; i < listEvents.length; i++)
{
    result.events.push ({
         "id": listEvents[i].Id,
        "start": listEvents[i].Start,
        "end": listEvents[i].End,
        "title": listEvents[i].Title
        });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:00:24.787

好吧，看起来您必须在某个时间点创建所有“事件”，因此以您显示的第二种方式执行此操作没有多大意义，因为您必须首先填充“listEvents”数组。

使代码更整洁的一种方法是使用构造函数，如下所示：

```
var Event = function(id, start, end, title) {
    this.id = id;
    this.start = start;
    this.end = end;
    this.title = title;
    return this;
}

var getEventData = function () {
    return {
        events : [
            new Event("1", new Date(...), new Date(...), "title"),
            new Event("2", new Date(...), new Date(...), "title"),
            new Event("3", new Date(...), new Date(...), "title")
        ]
    }
} 
```

# jquery - jQuery：关于 Animate() 完成的 Stop() 事件处理问题

> ID：10698676
> 
> 赞同：0
> 
> 时间：2012-05-22T08:49:48.643
> 
> 标签：jquery, event-handling, jquery-animate

## 假设我有这两个功能：

```
$(".a").animate(
        {"left":"100%"},
        {duration:10000, complete:function(){
             //Something is triggered!! e.g 
             alert("a");
            //Please note: In actual case it is never as simple as alert("a").
        }}
);

$(".b").mouseover(function(){
    $(".a").stop().animate({"top":"100px"},{duration:5000});
}); 
```

*   根据这些，`.a`只要`.b`是 `mouseover`-ed 就会停止并且`animate({"top":"100px"},{duration:5000})`会被触发。

*   但我希望它在is -ed 然后触发`alert("a")` **一次**。`.b``mouseover``animate({"top":"100px"},{duration:5000})`

## 但是，我不能这样设置第二个函数：

```
$(".b").mouseover(function(){
        //something happens! e.g
        alert("a");
        $(".a").stop().animate({"top":"100px"},{duration:5000});
    }); 
```

*   如果is -ed 在done 之后，它会`alert("a")` **两次**。`.b``mouseover``.a``animate`

## 我试过了`stop()`，`jumpToEnd parameter`但并不理想

无论何时`.b`-ed `mouseover`，`.a`'s`animte`都会立即完成并`.a`转移到`left:100%`. 我希望它`stop`在它所在的位置，但`alert("a")`在第二次`animate`被触发之前

* * *

**如果有人可以为此提供快速简便的解决方案，我将不胜感激！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:53:40.903

您可以通过过滤元素来检查元素当前是否**正在制作动画**`:animated`。

```
$('.b').mouseover(function () {

    // if NOT animating, then terminate
    if (!$('.a').is(':animated')) { return; }

    // carry on

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:55:29.793

```
$(".a").animate(
        {"left":"100%"},
        {duration:10000, complete:myAfterWork} // Use the function name only
);

$(".b").mouseover(function(){
    myAfterWork();
    $(".a").stop().animate({"top":"100px"},{duration:5000});
});

function myAfterWork()
{
  if($(".a").is(":animated"))
  {
    //Access $(".a") here and do your job

    //Note if you use $(this) in place of $(".a") it will be different 
    //when called from .a's animation than from .b's animation
  }

} 
```

# java - 正则表达式只接受字母和空格，不允许在字符串的开头和结尾使用空格

> ID：10698677
> 
> 赞同：8
> 
> 时间：2012-05-22T08:49:50.953
> 
> 标签：java, regex

我对验证输入字段有以下要求：

1.  它应该只包含字母和字母之间的空格。
2.  它不能在字符串的开头或结尾包含空格。
3.  它不能包含任何其他特殊字符。

我为此使用以下正则表达式：

```
^(?!\s*$)[-a-zA-Z ]*$ 
```

但这在开始时允许空格。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T08:53:47.860

如果您将它与`String.matches`方法一起使用，这应该可以工作。我假设你想要英文字母。

```
"[a-zA-Z]+(\\s+[a-zA-Z]+)*" 
```

请注意，这`\s`将允许各种空白字符。在 Java 中，它相当于

```
[ \t\n\x0B\f\r] 
```

其中包括水平制表符 (09)、换行 (10)、回车 (13)、换页 (12)、退格 (08)、空格 (32)。

如果您只想专门允许空格 (32)：

```
"[a-zA-Z]+( +[a-zA-Z]+)*" 
```

*您可以通过使捕获*组`( +[a-zA-Z]+)` *不捕获*来进一步优化上述正则表达式（`String.matches`无论如何您将无法单独获取单词）。也可以更改量词以使它们*具有所有格*，因为这里没有必要回溯。

```
"[a-zA-Z]++(?: ++[a-zA-Z]++)*+" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T09:34:36.173

对我来说，这样做的唯一合乎逻辑的方法是：

```
^\p{L}+(?: \p{L}+)*$ 
```

在字符串的开头必须至少有一个字母。（我用`[a-zA-Z]`字母的Unicode代码属性替换了你的`\p{L}`）。然后可以有一个空格后跟至少一个字母，这部分可以重复。

`\p{L}`: 任何语言的任何类型的字母。请参阅[正则表达式.info](http://www.regular-expressions.info/unicode.html#prop)

您的表达式中的问题是，如果**在 string 末尾**`^(?!\s*$)`只有空格，那么前瞻将失败。如果您想禁止前导空格，只需删除前瞻 ==> 内的字符串锚的结尾。但这仍然允许字符串以空格结尾。为避免这种情况，请查看字符串的末尾。但我认为这项任务不需要环顾四周。**`^(?!\s)[-a-zA-Z ]*$``^(?!\s)[-a-zA-Z ]*(?<!\s)$`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T09:10:15.933

我认为问题是有一个？在否定空格之前，这意味着它是可选的

这应该有效：

```
[a-zA-Z]{1}([a-zA-Z\s]*[a-zA-Z]{1})? 
```

至少一个字母序列，然后是带有空格但总是以字母结尾的可选字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:48:00.717

我不知道您接受的字符串中的单词是否可以用一个以上的空格分隔。如果他们可以：

```
^[a-zA-Z]+(( )+[a-zA-z]+)*$ 
```

如果不能：

```
^[a-zA-Z]+( [a-zA-z]+)*$ 
```

字符串必须以字母（或几个字母）开头，而不是空格。

字符串可以包含几个单词，但 first 旁边的每个单词前面都必须有空格。

希望我有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T08:55:28.753

尝试这个：

```
^(((?<!^)\s(?!$)|[-a-zA-Z])*)$ 
```

此表达式使用[*负前瞻*和*负后瞻*](http://www.regular-expressions.info/lookaround.html)来禁止字符串开头或结尾的空格，并要求匹配整个字符串。**

# tsql - 重置任何标识列以从 1 作为下一个值开始

> ID：10698678
> 
> 赞同：0
> 
> 时间：2012-05-22T08:49:53.777
> 
> 标签：tsql, sql-server-2008-r2, identity

我正在构建一个 SQL 脚本来重置数据库。为此，我想清空几个（不是全部）表并将它们的标识值重置为 0。

对于我使用的某些表`TRUNCATE TABLE`，但是当表已被外键约束引用时，这不起作用。对于我使用的那些表`DBCC CHECKIDENT(TableName, RESEED, 0)`。这适用于大多数表，但不适用于所有表。如果表从未有任何数据，则当前标识值为 NULL 而不是 0：

```
CREATE TABLE TableName (Id int identity, Value varchar(10))
DBCC CHECKIDENT(TableName)

-- Checking identity information: current identity value 'NULL', current column value 'NULL'. 
```

如果我`DBCC CHECKIDENT(TableName, RESEED, 0)`对它们使用，它们将具有 0 作为下一个标识值。我可以改为使用 1 作为种子值，但是其中包含数据的表将从 2 开始。

是否可以在任何系统视图中找到下一个标识值？如果我可以将下一个值放入变量中，我可以使用它将下一个值设置为 0 或 1。我已经尝试过，`IDENT_CURRENT('TableName')`但它表示 1 表示 NULL 和 0 作为下一个值。

拜托，我不想要任何问题，比如“为什么你需要所有这些都从 1 开始”或任何其他暗示我所要求的结果之外的结果的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T08:54:29.203

如果所有表都有标识字段，则使用。

```
exec sp_MSforeachtable @command1 = 'DBCC CHECKIDENT(''?'', RESEED, 1)' 
```

`MSforeachtable`是一个未记录但非常方便的存储过程，它对数据库中的所有表执行给定的命令。

要只为带有标识列的表重新设置种子，您可以使用下一个脚本。它还利用`sp_MSforeachtable`但考虑到正确的表格。

```
EXEC sp_MSforeachtable '
IF (SELECT COUNT(1) 
    FROM INFORMATION_SCHEMA.TABLES 
    WHERE TABLE_TYPE = ''BASE TABLE'' 
    AND ''[''+ TABLE_SCHEMA + ''].['' + TABLE_NAME + '']'' = ''?'' 
    AND OBJECTPROPERTY(OBJECT_ID(TABLE_NAME), ''TableHasIdentity'') = 1) > 0 
BEGIN
    DBCC CHECKIDENT (''?'', RESEED, 1)
END' 
```

使用以下查询获取插入到数据库表中的 Last Identity 值。

```
 SELECT TableName = OBJECT_NAME(OBJECT_ID) ,
       ColumnName = name ,
       OriginalSeed = seed_value ,
       Step = increment_value ,
       LastValue = last_value ,
       IsNotForReplication = is_not_for_replication
FROM sys.identity_columns 
```

[有关更多详细信息，请参阅此](http://www.databasejournal.com/features/mssql/article.php/3441031/SQL-Server-Undocumented-Stored-Procedures-spMSforeachtable-and-spMSforeachdb.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-27T00:35:46.527

首先禁用约束：

```
ALTER TABLE foo NOCHECK CONSTRAINT CK_foo_column 
```

或者

```
ALTER TABLE foo NOCHECK CONSTRAINT ALL 
```

然后在桌子上截断

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T08:54:56.943

澄清一下，您基本上是否希望所有未来的插入都从 开始`1`？

我不是这个特定主题的 MS-SQL 专家，但你可以截断表，然后按照你的建议重置标识，然后如果标识为 NULL，插入一条记录（应该得到`0`）然后删除它？那不会留下下一个要创建的记录`1`吗？

# installation - Wix - 从控制面板卸载的自定义操作

> ID：10698680
> 
> 赞同：1
> 
> 时间：2012-05-22T08:49:59.657
> 
> 标签：installation, wix, windows-installer

我有一个 .NET 4 桌面应用程序和一个用 Wix 开发的 MSI 安装程序。

目前，当我的应用程序最小化到系统托盘运行并且用户尝试从控制面板卸载它时，卸载通过，ProgramFiles 位置的文件被删除并且仍在运行的应用程序给我抛出了一堆异常。

为了防止这种情况，我在我的 wxs 文件中设置了一个自定义操作，定义如下：

```
<Custom Action="CheckForRunningInstance" After="ValidateProductID">(REMOVE="ALL") OR NOT(REMOVE="ALL")</Custom> 
```

这是检查我的应用程序的任何实例当前是否正在运行以防止安装程序继续进行。如果我尝试运行我的 MSI 文件，它可以正常工作，但是当用户尝试从“控制面板”>“添加/删除程序”卸载应用程序时，该 CA 不会运行。**在这种情况下有什么办法强制它吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:14:01.020

您需要将自定义操作放在 **InstallExecuteSequence**中，以便即使包未使用完整 UI 运行时也会调用它。

# java - Max Thread.Sleep 时间是多少？

> ID：10698688
> 
> 赞同：3
> 
> 时间：2012-05-22T08:50:44.947
> 
> 标签：java, android, thread-safety

谁能告诉我`Thread.sleep(time);`在 Android 操作系统中使用的最大睡眠时间（毫秒）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T08:56:33.663

我认为没有最长时间`Thread.sleep()`。无论您何时进入，该时间线程都处于休眠状态。

# java - 如何使用 CompletionHandlers 和小于请求的 ByteBuffer 读取请求？

> ID：10698689
> 
> 赞同：5
> 
> 时间：2012-05-22T08:50:46.443
> 
> 标签：java, asynchronous, nio, bytebuffer, completionhandler

我正在使用 Java 7 和[`AsynchronousSocketChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousSocketChannel.html#read%28java.nio.ByteBuffer,%20A,%20java.nio.channels.CompletionHandler%29). 我想阅读一个请求（例如`HTTP POST`），但我正在努力想出一个很好的解决方案来阅读完整的请求，如果它大于`ByteBuffer`我正在使用的大小。例如，如果`ByteBuffer`是 4048 字节并且 HTTP POST 包含大于 4kB 的图像。

有什么好的递归解决方案或循环吗？

这是我的阅读请求代码：

```
public void readRequest(final AsynchronousSocketChannel ch) {
    final ByteBuffer buffer = ByteBuffer.allocate(BUFFER_SIZE);
    final StringBuilder strBuilder = new StringBuilder();
    final CharsetDecoder decoder = Charset.forName("US-ASCII").newDecoder();

    ch.read(buffer, null, new CompletionHandler<Integer, Void>() {

        public void completed(Integer bytes, Void att) {

            buffer.flip();                          
            try {
                decoder.reset();
                strBuilder.append(decoder.decode(buffer).toString());
            } catch (CharacterCodingException e) {
                e.printStackTrace();
            }           
            buffer.clear();         

            // More data to read or send response
            if(bytes != -1) {

                // More data to read
                ch.read(...);

            } else {

                // Create and send a response

            }
        }

        public void failed(Throwable exc, Void att) {
            exc.printStackTrace();
        }

    });
} 
```

我写的地方：

```
// More data to read
ch.read(...); 
```

它看起来是代码重用的好地方，但我想不出一个好的解决方案。有什么办法可以在这里重用 CompletionHandler 吗？有什么建议可以阅读有限的完整请求`ByteBuffer`吗？

我想以非阻塞和异步的方式解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T10:43:32.997

`completed`当读取数据块时，从 java 管理的线程异步调用该方法。要重用 CompletionHandler：

```
// More data to read
ch.read(buffer, null, this); //here you pass the same CompletionHandler you are using 
```

java 的人建议，当你完成读操作（`else`块）时，你应该使用另一个线程上下文。

这是说避免在 a 中阻塞和长期操作的文档`CompletionHandler`，请查看第 33 页[http://openjdk.java.net/projects/nio/presentations/TS-4222.pdf](http://openjdk.java.net/projects/nio/presentations/TS-4222.pdf)

# php - Doctrine 存储库中查询构建器的基于事件的扩展

> ID：10698695
> 
> 赞同：0
> 
> 时间：2012-05-22T08:51:07.003
> 
> 标签：php, events, doctrine, doctrine-orm, dql

我有一个`Page`由 module 加载的 Doctrine 实体`Foo`。该页面是[Gedmo Doctrine Extension](https://github.com/l3pp4rd/DoctrineExtensions)提供的嵌套集。该模块`Bar`有另一个模型`Metadata`，1:1 与页面相关。我想在`Foo`加载树时直接加入元数据。

所以在模块内部`Foo`：

```
$em->getRepository('My\Entity\Page')->getRootNodes(); 
```

这会加载一组页面，但我希望直接使用元数据。因为我在加载节点后触发了一个事件，所以所有模块都可以订阅这个事件并使用它们想要的任何页面（在这种情况下，导航结构需要元数据，但导航与 module 无关`Foo`，仅与`Bar`）。

系统必须保持模块化，因此`Page`不依赖于`Metadata`. 是否有可能`Bar`监听一个事件，在存储库中构建查询？然后它添加一个额外的连接来加载每个页面的元数据。

```
function getCalledOnEventTrigger($event)
{
    $q = $event->getQueryObject();
    $q->leftJoin('some join expression');
    // Query now joins metadata as well
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T08:48:26.233

我通过使用我注入自定义存储库的 Zend\EventManager 完成了这项工作。这行得通，但仍然不能很好地工作，因为 Doctrine 必须了解所有关系，所以我实际上想要在定义到位的情况下执行的查询是不可能执行的。尽管如此，我还是通过添加定义来解决它。

# coldfusion - 循环月份不显示上个月

> ID：10698696
> 
> 赞同：3
> 
> 时间：2012-05-22T08:51:07.207
> 
> 标签：coldfusion

我正在尝试遍历 motnhs 之类的。

```
<cfloop index="i" from="05-2012" to="12-2012" step="#createTimeSpan(31, 0, 0, 0)#">
        #LSDateFormat(i, "MMM")#  
</cfloop> 
```

但它只显示到 2012 年 11 月的月份。为了显示 2012 年 12 月，我必须输入

```
#LSDateFormat(i, "MMM")# 
```

循环后再次。有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T09:09:54.030

我想这是因为“12-2012”是“01-12-2012”并且您使用的是 31 天的步骤（与一个月不同）。所以最后一次迭代是在寻找 04-12-2012 而你的“to”是 01-12-2012。你可以很容易地看到这样的问题：

```
<cfloop index="i" from="05-2012" to="12-2012" step="#createTimeSpan(31, 0, 0, 0)#">
    #LSDateFormat(i)#<br/>
</cfloop> 
```

简单的解决方案是这样的：

```
<cfloop index="i" from="#CreateDate(2012, 5, 1)#" to="#CreateDate(2012, 12, 31)#" step="#CreateTimeSpan(31, 0, 0, 0)#">
    #LSDateFormat(i)#<br/>
</cfloop> 
```

另外，它看起来对我来说更具可读性。

请注意，如果时间较长，问题可能会再次出现。最可靠的解决方案是使跨度等于 1 个月，比如说使用这样的东西：

```
<cfset i = CreateDate(2012, 5, 1) />
<cfset stop = CreateDate(2012, 12, 31) />
<cfloop condition="i LTE stop">
    #LSDateFormat(i)#<br/>
    <cfset i = DateAdd("m",1,i)>
</cfloop> 
```

看，它总是一个月的第一天。

# asp.net-mvc - MVC - 表单发布到布局页面中返回 JavaScriptResult 的操作会干扰基本表单 - 导致浏览器呈现应用程序 HTML 文本

> ID：10698697
> 
> 赞同：0
> 
> 时间：2012-05-22T08:51:08.347
> 
> 标签：asp.net-mvc, model-view-controller

在 ASP.NET MVC 中，我有一个发布到操作的主要标准表单，并在同一视图中呈现响应。

问题是响应类型返回为 application/x-javascript，因此浏览器将 HTML 呈现为文本。

我已将问题缩小到由在母版页中包含一些部分视图引起的，这些部分视图呈现回发到返回**JavaScriptResult**的操作的表单。

当我删除这些部分视图引用时，主表单发布响应的响应类型是我想要的 text/html。

为什么 JavaScriptResult 操作会干扰主表单发布。我没有发布此操作，那么为什么 MVC 会决定推断响应内容类型应该是 application/x-javascript？

**基本主表格：**

```
@using (Html.BeginForm("TestSearch", "TestSearch", FormMethod.Post))
{
    ....
}

[HttpPost]
public ActionResult TestSearch(TestSearchInfo testSearchInfo)
{
    ...

    return View(testSearchInfo);
} 
```

**在布局页面中：**

```
@{Html.RenderPartial("~/Views/Account/LoginOrRegister.cshtml");}

Which is a form that posts to...

[HttpPost]
public JavaScriptResult Login(LoginInfo loginInfo)
{
} 
```

**更新：**

核心问题似乎是，当我点击主表单的提交按钮时，另一个启用了 MVC ajax 的表单也在回发，因此，两个动作都在触发，返回 JavaScriptResult 的那个是正在第二次开火。我仍然不确定如何防止这种行为......

**更新：**

请看下面的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:23:53.613

我想你应该避免 HTML 表单嵌套来摆脱这个问题。这在语义上也不正确。

这在 ASP.NET WebForms 时代是一个问题，但使用 ASP.NET MVC 应该会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:23:48.350

在这里回答，希望对其他人有所帮助。

我已经修改了所有涉及 JavaScript 响应的表单，以便呈现控件的操作，传统上是具有 HttpGet 属性的操作以删除 HttpGet，因此该操作可以在 GET 和 POST 上下文中触发。

这需要重命名表单发布到的操作，因此对于应该触发哪个方法没有歧义。

我想这是有道理的——我想我希望看到的是渲染包含的表单不是 POST 目标的部分视图应该使用 get 重载来渲染。我明白为什么这不是它的工作方式。

```
// No GET / POST Attribute, this can no fire in both GET and POST contexts
public ActionResult Login()
{
    .. This will now fire for every page load, where as before the HttpGet
       filter only allowed to run in a GET context. 
}

[HttpPost]
public JavaScriptResult DoLogin(LoginInfo loginInfo)
{
} 
```

# php - Android + 网站/服务器上的 Facebook 身份验证

> ID：10698698
> 
> 赞同：1
> 
> 时间：2012-05-22T08:51:13.340
> 
> 标签：php, android, mysql, facebook

我正在开发一个 Android 应用程序，用户可以使用他的 Facebook 帐户登录。另外，我想将用户的一些输入存储在 mysql 数据库中。在服务器端，我知道会检查用户是否使用 Facebook 登录（出于安全风险），以便只有使用 Facebook 登录的用户才能访问数据库。我将如何管理这个？Facebook 身份验证对我来说没问题，但我没有解决方案来检查我网站上的登录状态。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:02:03.053

您需要保存/共享 AccessToken。将访问令牌视为 PHP 中的会话 ID。

在 PHP 中，使用 SDK，您需要 getAccessToken() 和 setAccessToken() 函数（也告诉 Facebook API 不要使用 cookie）* 并且您共享此值。

对于移动设备，我没有在 Android Java 中使用 Facebook Auth，但我在移动设备上使用了 Titanium，并且调用完全相同（Titanium.Facebook.getAccessToken）。当您将其传回 PHP 时，工作非常顺利。Facebook Java SDK 也有

```
public String getAccessToken() {        return mAccessToken;    }
public void setAccessToken(String token) {        mAccessToken = token;        mLastAccessUpdate = System.currentTimeMillis();    } 
```

在 Facebook 课堂上。因此，您需要使用这些调用或您用于 Android 的任何 SDK。

*   警告：PHP Facebok SDK 中存在一个缺陷，如果您使用无效令牌（这很常见）调用“setAccessToken”并且您没有使用 cookie，那么 Facebook API 会删除您的所有会话数据。如果您将会话用于其他用途，则需要注意这一点。

# backbone.js - 在骨干集合中添加模型后自动排序

> ID：10698699
> 
> 赞同：2
> 
> 时间：2012-05-22T08:51:13.747
> 
> 标签：backbone.js

我希望能够在将模型添加到集合后对数据进行排序。如果我不应用`silent:true`集合将被渲染，但一切都会加倍。还有其他方法吗？

我在初始化函数上渲染模板并在重置后渲染集合子视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-23T18:43:02.983

只需实现一个比较器：

```
Backbone.Collection.extend({

    // ...

    comparator: function( doc ) 
    {
        var str = doc.get('name') || '';
        return str.toLowerCase();
    },

    // ...

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:05:00.713

让它工作虽然我会回答我的问题，因为我不确定这是否是最好的答案，所以欢迎发表评论。

在我看来：

```
 initialize : function(){
        this.$el.html( this._template );
        this.collection.bind('reset', this.LoadItems, this);
        this.collection.bind('add', this.AddOneItem, this);
        $("#settings-category").trigger("create");  
    },

    LoadItems : function(){
        this.collection.each(function(model){
            this.view = new CurrentCategoryView({model : model});
             $("#currentCategoryListContainer").append(this.view.render().el);
        });
        $("#currentCategoryListContainer").listview("refresh");
    }, 
```

这会导致 DOM 元素的正常呈现，但是如果我使用最终触发重置的排序，我的函数不包含上面的代码，因此结果是它不会清除 DOM 元素并继续添加更多元素导致集合模型被渲染两次。所以这是我的解决方案。

```
$("#currentCategoryListContainer").empty();
this.collection.sort(); 
```

通过这种方式，我清除了已经占用的 DOM，以便为要呈现的新项目（排序项目）让路。

# javascript - 如何使图像在图像墙内反弹？

> ID：10698703
> 
> 赞同：3
> 
> 时间：2012-05-22T08:51:41.340
> 
> 标签：javascript, html, svg

我正面临这个问题，在动画过程中，我希望鱼图像在背景图像（池塘）中移动，并且每当它撞到墙壁或图像边界时它都会反弹。

使用 svg 方法和 javascript 方法..

非常感谢任何可以提供帮助的人。再次感谢您花时间阅读并帮助解决这个问题。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
    <style type="text/css">

    body {
    font:76% normal verdana,arial,tahoma;
    }

    h1, h2 {
    margin:0px;
    font-size:1.2em;
    }

   p {
   margin:0px 0px 1em 0px;
   padding:0px;
   }

  .balls img {
  position:absolute;
  width:50px;
  height:50px;
  }

  </style>
  <script type="text/javascript">

  var balls = [];
  var canvasX = 485;
  var canvasY = 520;
  var timer = null;
  var m_lastX = 0;
  var m_lastY = 0;
  var M_SPACE = 24;
  var B_VMIN = 5;
  var B_VMAX = 5;
  var B_WIDTH = 13;
  var B_HEIGHT = 10;

  function rnd(n) {
    return Math.random()*n;
  }

  function rndI(n) {
    return parseInt(rnd(n));
  }

  function initBall(oBall) {
    oBall._x = rnd(canvasX);
    oBall._y = rnd(canvasY);
    oBall._vX = B_VMIN+rnd(B_VMAX)*(Math.random()>0.5?1:-1);
    oBall._vY = B_VMIN+rnd(B_VMAX);
  }

  function moveBall(oBall) {
    oBall._x += oBall._vX;
    oBall._y += oBall._vY;
    oBall.style.left = oBall._x+'px';
    oBall.style.top = oBall._y+'px';
    if ((oBall._vX>0 && oBall._x+oBall._vX+B_WIDTH>canvasX) || (oBall._vX<1 &&                           oBall._x+oBall._vX<0)) oBall._vX *= -1;
      if ((oBall._vY>0 && oBall._y+oBall._vY+B_HEIGHT>canvasY) || (oBall._vY<0 &&         oBall._y+oBall._vY<0)) oBall._vY *= -1;
    }

    function animateStuff() {
      for (var i=balls.length; i--;) {
        moveBall(balls[i]);
      }
    }

    function startAnimation() {
      if (!timer) timer = setInterval(animateStuff,20);
    }

    function stopAnimation() {
      if (!timer) return false;
      clearInterval(timer);
      timer = null;
    }

    function init() {
      balls = document.getElementById('ball-container').getElementsByTagName('img');
      for (var i=balls.length; i--;) {
        initBall(balls[i]);
      }
      //getWindowCoords();
      startAnimation();
      //document.onmousedown = mouseDown;
    }

    getWindowCoords =                 (navigator.userAgent.toLowerCase().indexOf('opera')>0||navigator.appVersion.toLowerCase().in        dexOf('safari')!=-1)?function() {
      canvasX = innerWidth;
      canvasY = innerHeight;
    }:function() {
      canvasX;
      canvasY;
    }

    </script>
    </head>
    <body>

    <h1>Interval-based animation</h1>

    <p>
     Click and drag to create more.
    </p>

    <p>
     <button onclick="startAnimation(); init();">Start</button>
     <button onclick="stopAnimation()">Stop</button>
    </p>

    <div id="ball-container" class="balls">
    <SVG xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink" id="ball-container" style="border:solid         1px #000000;width:515;height:474;">
            <image xlink:href="pond.png" x="0" y="0" width="513" height="474" />
    </SVG>
     <img src="anchovies.png" alt="" width="8" height="70" />
    </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:03:03.737

[这是David Dailey](http://srufaculty.sru.edu/david.dailey/)的一个例子，展示了如何[在 SVG 中弹跳墙壁](http://www.svgopen.org/2008/papers/39-The_Edges_of_Plausibility/bouncing3.svg)。

# c# - c#：HttpRuntime.Cache 产生无效的强制转换异常

> ID：10698706
> 
> 赞同：-1
> 
> 时间：2012-05-22T08:51:52.217
> 
> 标签：c#, asp.net, httpruntime.cache

以下如何产生“无效的强制转换异常”？？？

```
foreach (KeyValuePair<String,Object> entry in HttpRuntime.Cache)
{
    if (entry.Value.GetType() == typeof(MyClass))
    {
        MyClass mc = (MyClass)entry.Value; // ===> Invalid Cast Exception !!! 
```

（对于那些问我为什么要这样做的人：我在缓存中/从缓存中随机添加和删除一些不同的对象，因此需要进行这种测试。我计划创建某种容器对象来保存我的各种对象；我只会将这个对象推送到缓存中，但问题仍然存在：它会解决强制转换异常吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:07:33.467

您是否处于进行动态（重新）编译的环境中？例如，如果代码文件发生更改，ASP.NET 网站会在运行时重新编译页面。他们将该页面编译为程序集并加载该程序集。即使运行时在某个时候卸载旧程序集，这仍然会为您提供与旧程序集不兼容的新类型。

我不知道，您是否可以通过某种版本控制或强命名来解决此问题。但由于发生了变化，似乎不太可能，你会想要旧的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:09:41.020

不知道为什么您的代码会失败，但您可以使用“软广播”来尝试：

```
foreach (KeyValuePair<String,Object> entry in HttpRuntime.Cache) 
{ 
     MyClass mc = entry.Value as MyClass;
     if (mc != null)     
     {         
          //Do your stuff 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:03:58.433

好的，我终于成功了。

首先，我很抱歉，我错误地阅读了我的日志文件。异常没有出现

```
MyClass mc = (MyClass)entry.Value; 
```

但从

```
foreach (KeyValuePair<String,Object> entry in HttpRuntime.Cache) 
```

看来缓存不能用 KeyValuePair （我在互联网上找到的代码......）进行迭代。再一次，很抱歉浪费您的时间在错误的方向搜索......无论如何感谢您的帮助！

现在对于有效的代码：

```
IDictionaryEnumerator CacheEnum = HttpRuntime.Cache.GetEnumerator();
    while (CacheEnum.MoveNext()) {
        MyClass mc = ((DictionaryEntry)CacheEnum.Current).Value as MyClass;
        if (mc != null) {
            // Doing stuff... 
```

# java - 如何在 JDeveloper 的日志记录控制台中显示希腊字符

> ID：10698709
> 
> 赞同：1
> 
> 时间：2012-05-22T08:52:04.400
> 
> 标签：java, oracle, jdeveloper

我正在使用 JDeveloper 11.1.1.4.0，我想在**调试中显示希腊字符：IntegratedWebLogicServer - 日志**控制台。

当我尝试执行 System.out.print 语句时，希腊字符显示为问号。

我已将 Preferences>Environment>Encoding 更改为 UTF-8，但没有运气。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T10:58:36.740

我找到了解决该问题的有效解决方案（至少它适用于 JDev 12.1.2.0，但我相信它也适用于 11.x）：

在 jdk.conf (JDEV_HOME/jdeveloper/ide/bin) 中添加以下行并重新启动 JDeveloper：

```
AddVMOption  -Dfile.encoding=UTF-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:14:21.913

我认为您需要为编译器设置 UTF-8 编码。

在**项目的属性**对话框中转到**编译器**并在那里设置所需的字符编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-02T16:12:06.580

在日志输出中得到了西里尔字母???ed。按照@Ravinder Reddy 的建议解决了这个问题：

**运行->管理运行配置...->管理...** 然后在弹出窗口中指示配置并单击铅笔图标进行编辑

[![在此处输入图像描述](../Images/e26953d32c9286a97c3b1ab83428d785.png)](https://i.stack.imgur.com/ZSZQy.jpg)

然后在 java 选项中放入 **-Dfile.encoding=UTF-8**

[![在此处输入图像描述](../Images/7a746c16b318cbd14f314bd64401a5fb.png)](https://i.stack.imgur.com/HjIoV.jpg)

现在它们看起来编码正确

# google-maps - 谷歌地图版本更改冻结网站 - v3

> ID：10698711
> 
> 赞同：2
> 
> 时间：2012-05-22T08:52:10.390
> 
> 标签：google-maps, google-maps-api-3

**编辑：该网站再次正常工作。我删除了下面评论者标记的代码行（引用不存在的 div），尝试了版本语法，以及我的 contentBox 函数中的参数顺序）。还删除了语法并添加了一行代码来从 DOM 调用函数。感谢所有评论的人。以上的一些组合工作。干杯，谢丽尔）**

注意：我昨天在主论坛上问了这个问题——没有意识到谷歌地图用户组在 Stack Overflow 中有自己的标签。这是问：

我有一个应用程序，它使用 Google maps API v. 3 并访问数据库中的内容以显示在 google 的 infowindows 和侧边栏中。在此处查看主文件的代码：www.corkmemorymap.org。

我的问题是，当用户单击标记时，在侧边栏中显示内容的功能会定期停止工作。您仍然可以通过页面顶部的主题搜索访问侧边栏内容（使用 jquery 完成，并且不绑定到谷歌或标记），但我无法通过标记获取侧边栏内容。

上次发生这种情况，是版本问题。我在调用 API 的脚本代码中添加了一个版本，一切都很好。

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.9&sensor=false"></script> 
```

这一次我认为是同样的事情，因为我看到谷歌已经弃用了那个版本。所以我更新到了新版本，然后...... nada。所以现在我很难过。我试着弄乱不同的版本，或者没有版本，然后让它再次短暂工作。然后没有。其他人有这方面的经验吗？版本不稳定吗？有什么建议么？

如果有帮助，这是调用侧边栏内容更改的函数：

```
function contentBox(marker, map, sidebar, winHtml, infoWindow) {
    google.maps.event.addListener(marker, 'click', function() {
        document.getElementById('sidebar').innerHTML=winHtml;
        infoWindow.close(map, marker);
    });
} 
```

哦，还有一件事——我没有使用 API 密钥，因为这是一个非盈利网站。我是否需要 API 密钥（自 2011 年 12 月以来一直没有 API 密钥）？他们有什么棘手的地方吗？

问候，谢丽尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:58:11.307

这个问题在上面的评论中得到了回答。有两个问题：我需要更新我在标题中引用的 Google Maps API 的版本，并且我有一行代码指向一个不存在的 div。我更新了前者并删除了后者。感谢那些回复的人。

# asp.net - ASP.Net MVC 3 多次提交

> ID：10698713
> 
> 赞同：0
> 
> 时间：2012-05-22T08:52:24.867
> 
> 标签：asp.net, asp.net-mvc-3, submit, action

我的页面上有一个表单，有两种提交方式。第一个是锚标记，另一个是提交按钮，它们都有不同的行为。

如何为每个单独的操作方法分配？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:58:10.110

这真的取决于锚标记的作用 - 大概它触发了 javascript 中的提交？

如果它实际上只是在做 a`GET`而不是 a `POST`，那么您可以按照@dbaseman 的建议进行操作 - 为两种请求类型提供单独的操作方法。

但是，如果锚点确实 javascript 提交，那么我的偏好是简单地给提交按钮一个名称，以便您可以在服务器上以一种操作方法检测它，然后从那里分叉代码：

```
<submit name="fromButtom" value="Submit" /> 
```

然后你的操作方法：

```
public ActionResult Foo(string fromButton)
{
  //if 'fromButton' contains 'Submit' then you assume it was the button.
} 
```

更好的是，您可以使用 a`<button>`代替，然后您可以将显示的文本与按钮提交的值分开（如果您正在本地化页面，这很有用）：

```
<button name="submitMethod" value="fromButton">Submit</button> 
```

现在您可以`submitMethod`在您的操作方法上有一个参数，您可以在其中查找`'fromButton'`.

无论哪种方式 - 锚标记/javascript（如果您这样做的话）都不会提交此值，因为按钮的值仅在单击时提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T08:55:50.763

只需在不同版本的操作上使用 MVC **HttpPost**和**HttpGet属性：**

```
[HttpPost]
public ActionResult FormAction(Model model, string method = post) { ... }

[HttpGet]
public ActionResult FormAction(Model model) { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:29:39.093

只是为了添加另一个解决方案，如果您想创建可以在关闭 javascript 的情况下使用的东西，并且更改按钮名称和值不方便，那么您可以尝试我在生产代码中使用的这个。

创建一个这样的助手：

```
using System;
using System.Reflection;
using System.Web.Mvc;

namespace Whatever
{
    [AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
    public class MultipleSubmitAttribute : ActionNameSelectorAttribute
    {
        public string Name { get; set; }
        public string Argument { get; set; }

        public override bool IsValidName(ControllerContext controllerContext,
        string actionName, MethodInfo methodInfo)
        {
            bool isValidName = false;
            string keyValue = string.Format("{0}:{1}", Name, Argument);
            var value = controllerContext.Controller.ValueProvider.GetValue(keyValue);
            if (value != null)
            {
                value = new ValueProviderResult(Argument, Argument, null);
                controllerContext.Controller.ControllerContext.RouteData.Values[Name] = Argument;
                isValidName = true;
            }

            return isValidName;
        }
    }
} 
```

现在在您的表单中，您可以执行以下操作：

```
<input type="submit" name="action:DoSomething" value="Do something" /> 
<input type="submit" name="action:DoSomethingElse" value="Do something else" /> 
```

然后在您的控制器中，您可以像这样装饰您的操作方法：

```
[HttpPost]
[MultipleSubmit(Name = "action", Argument = "DoSomething")]
public ActionResult DoSomething(ViewModel vm)
{ ... }

[HttpPost]
[MultipleSubmit(Name = "action", Argument = "DoSomethingElse")]
public ActionResult DoSomethingElse(ViewModel vm)
{ ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T08:57:03.243

您可以使用 Url.Action 或 Html.ActionLink [http://geekswithblogs.net/liammclennan/archive/2008/05/21/122298.aspx](http://geekswithblogs.net/liammclennan/archive/2008/05/21/122298.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T09:03:42.373

如果方法完全不同，那么您应该使用 JavaScript 使它们的行为不同。以 jQuery 为例，它看起来像：

```
$("#sbutton").click(function() {
  alert("Submit button clicked!");
  // Do whatever you need - validate/initialize-fields/etc.
  return false; // This is required to prevent normal form submit
});

$("#slink").click(function() {
  alert("Link clicked!");
  // Do whatever you need - validate/initialize-fields/etc.
  return false; // This is required to prevent normal form submit
}); 
```

# ruby-on-rails - 安装 Gitorious 后出现 Ultrasphinx 错误

> ID：10698725
> 
> 赞同：3
> 
> 时间：2012-05-22T08:53:12.573
> 
> 标签：ruby-on-rails, ruby, git, gitorious, ultrasphinx

我在我的服务器 Linux 上安装了 Gitorious。我用我的管理员用户登录。我在 Gitorious 上上传了我的公共 ssh 密钥。现在，我想创建一个新项目，但是当我创建一个新项目时，我的日志中出现此错误

> `** ultrasphinx: spelling support not available (raspell configuration raised "uninitialized constant Ultrasphinx::Spell::Aspell")`

我执行此命令，但这不是解决方案...

> $ aptitude 安装 libaspell-dev
> 
> $ gem 安装 raspell

如果您愿意，可以阅读[http://cweiske.de/tagebuch/gitorious-spelling-problems.htm](http://cweiske.de/tagebuch/gitorious-spelling-problems.htm)。这是一个谈论这个错误的网站

如果有人可以帮助我，我会很高兴，因为我已经有一段时间没有寻求解决这个错误的方法了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:08:24.820

我无法解决这个问题，但我已经安装了 Gitlab，现在 Gitlab 非常适合我。

# xml - XML 序言/指令未从 XHTML 输出中删除

> ID：10698726
> 
> 赞同：13
> 
> 时间：2012-05-22T08:53:14.697
> 
> 标签：xml, jsf-2, facelets

我开始学习 JavaServer Faces (JSF)。我正在使用 GlassFish 3+。我刚刚在 NetBeans 中创建了一个新的 JSF 项目并运行了该项目。它工作得很好，但是在检查 XHTML 输出时，我注意到 XML 声明被留下了。这弄乱了 DOCTYPE 声明（它总是应该在文档中的第一个）。

![在此处输入图像描述](../Images/5dc209496089a6fa2873c5aa5b75f3e6.png)

JSF 应该删除 XML 声明，还是我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T16:28:17.777

默认情况下，Facelets 只会将其从组合（包括文件和组合组件）和标记文件中删除。它不会将其从主模板中删除。只需自己删除即可。编写 HTML 时根本不应该使用 XML 序言。

是否从主模板中删除 XML 序言在[JSF 2.2 规范](http://download.oracle.com/otndocs/jcp/jsf-2_2-fr-eval-spec/index.html)`<facelets-processing>`的附录1.1.1.1中指定，该规范描述了`faces-config.xml`. XML prolog 被描述为“处理指令”。在表中，您将看到仅当模板作为 XML 或 JSPX 视图处理时才被删除（使用）。

> ## 1.1.1.1`facelets-processing`元素
> 
> 该`<facelets-processing>`元素用于影响 Facelets VDL 文件的处理。因此，此设置仅适用于到达 Facelets 实现的那些请求，正如通过和条目`ViewDeclarationLanguage`指定给运行时的那样。该规范为 Facelets 文件定义了三种处理模式：Facelets XHTML 语法、XML View 语法和 Facelets JSPX 语法。最后一种语法旨在简化已经使用 JSP 文档语法（也称为 JSPX 语法）的应用程序向 Facelets 的迁移。这三种模式对文件处理的影响如下表所示。`javax.faces.FACELETS_VIEW_MAPPINGS``javax.faces.DEFAULT_SUFFIX` `<context-param>`
> 
> ```
> Valid <process-as> values and their implications on the processing of Facelets.
> -----------------------------------------------------------------------------------------
>               <process-as>         <process-as>         <process-as>       <process-as>
>               html5</process-as>   xhtml</process-as>   xml</process-as>   jspx</process-as>
>               HTML 5 (default)     Facelets XHTML       XML View           Facelets JSPX
> -----------------------------------------------------------------------------------------
> XML Doctype   Simplified to        passed through       consumed           consumed
>               <!DOCTYPE html>  
> 
> XML           passed through       passed through       consumed           consumed
> declaration 
> 
> Processing    passed through       passed through       consumed           consumed
> instructions
> 
> CDATA         passed through       passed through       consumed           consumed
> section
> 
> Escaping of   escaped              escaped              escaped            not escaped
> inline text    
> 
> XML           passed through       passed through       consumed           consumed
> Comments 
> ```
> 
> 在上表中，“通过”是指内容未经修改地传递给用户代理。“消费”意味着内容在服务器上被静默消费。请注意，对于 CDATA 部分，即使应该使用开始和结束标记，也会传递 CDATA 部分本身的内容。“转义”意味着响应中的敏感内容会自动转义：例如，`&`变为。`&amp;`“未转义”表示此类内容未转义。

换句话说，当您创作 HTML5/XHTML 时，您必须自己删除它。更好的措辞实际上是：**您不应该在 HTML5 和 XHTML 页面中自己包含 XML 序言，因为这不是必需的；它仅在 XML 和 JSPX 页面中需要（因此 Facelets 会自动删除它）**。

### 也可以看看：

*   [JavaServer Faces 2.2 和 HTML5 支持，为什么还在使用 XHTML](https://stackoverflow.com/questions/19189372/javaserver-faces-2-2-and-html5-support-why-is-xhtml-still-being-used)
*   [是否可以在 HTML 4/5 中使用 JSF+Facelets？](https://stackoverflow.com/questions/2935759/is-it-possible-to-use-jsffacelets-with-html-4-5)

* * *

**与具体问题无关**，您应该使用`<h:outputStylesheet>`而不是`<link rel="stylesheet">`独立于请求 URL。

```
<h:outputStylesheet name="css/default.css" />
<h:outputStylesheet name="css/cssLayout.css" /> 
```

### 也可以看看：

*   [如何在 Facelets 模板中引用 CSS / JS / 图片资源？](https://stackoverflow.com/questions/8367421/how-to-reference-css-js-image-resource-in-facelets-template)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T16:37:12.893

为了使 XML 声明不出现在我呈现的页面上，我发现我可以配置 JSF 以将我的 .xhtml 文件作为 XML 处理。在 XML 模式下处理时，xml 声明不会从我的源文件传递到输出。我还没有注意到进行此更改的任何其他副作用。（但如果我找到任何东西，我会在这里跟进。）

为了进行配置更改，我在 faces-config.xml 中添加了以下内容：

```
<faces-config-extension>
    <facelets-processing>
        <file-extension>.xhtml</file-extension>
        <process-as>xml</process-as>
    </facelets-processing>  
</faces-config-extension> 
```

希望这可以帮助

# android - 如何在 Scrollview 中使用画布进行绘画？

> ID：10698727
> 
> 赞同：0
> 
> 时间：2012-05-22T08:53:14.540
> 
> 标签：android, canvas, scrollview

我有一个画布，我想在其中绘制几个矩形，我可以在 InternalView 中用画布绘制，但我需要在滚动视图中绘制，我尝试使用此代码，但有些有邪恶。这是代码：

```
 package prueba.android.ondraw;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

public class Prueba_ondrawActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        super.onCreate(savedInstanceState);

        LinearLayout layout = (LinearLayout) findViewById(R.id.layout);
        setContentView(R.layout.main);

        MyView v = new MyView(this);
        layout.addView(v);

    }
    private class MyView extends View{
        public MyView(Context context) {
            super(context);
        }
        protected void onDraw(Canvas canvas) {
            int j = 0;
            for(int i=0;i<10;i++){
                super.onDraw(canvas);
                Paint paint = new Paint();
                paint.setColor(Color.CYAN);
                paint.setAntiAlias(true);
                canvas.drawRect(0, j,50,50, paint);
                j= j+100;
            }
        }
    }
} 
```

主.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@android:color/darker_gray">

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="150dp"
        android:layout_height="400dp"
        android:layout_marginLeft="100dp" >
        <LinearLayout
            android:id="@+id/layout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:02:39.210

您在代码中做了一些奇怪的事情：
首先您尝试在`findViewById()`使用之前找到一个视图`setContentView()`(`sv`不要使用），最后将内容设置为布局。

相反，您可能*想要*做的是创建自己的视图，然后在 ScrollView 中使用它？

在您的 ScrollView 中，您有一个布局，这将需要一个 ID：

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="150dp"
    android:layout_height="400dp"
    android:layout_marginLeft="100dp" >
    <LinearLayout
        android:id="@+id/layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>
</ScrollView> 
```

然后你在代码中找到这个布局：

```
setContentView(R.layout.main);
LinearLayout layout = (LinearLayout) findViewById(R.id.layout);
//Create a new instance of MyView...
MyView v = new MyView(this);
//...And add it to the layout:
layout.addView(v); 
```

您可以像这样定义自己的`MyView`：

```
private class MyView extends View{
    //Your onDraw() method here.
} 
```

（请注意，我调用了自定义 View `MyView`。这是因为 android 已经有一个名为 的类`View`，所以如果你给已经存在的类名，它可能会引起很多混乱）

# javascript - Firefox 上的 Web Worker 中的 IndexedDB

> ID：10698728
> 
> 赞同：3
> 
> 时间：2012-05-22T08:53:30.203
> 
> 标签：javascript, firefox, indexeddb

我正在尝试在**web worker**的 Firefox 12 中使用 indexedDB 。

```
dbRequest = mozIndexedDB.open("mydb","test db"); 
```

但是 Firefox 显示错误：*mozIndexedDB is undefined*

尝试了一些其他的，例如`self.mozIndexedDB`，`moz_indexedDBSync`但无济于事。
它在 Chrome 中使用`webkitIndexedDB`.

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:05:34.670

几个月前我遇到了类似的事情。Firefox 不支持这个（还）：

> IndexedDB 包括同步和异步 API。同步 API 旨在与 WebWorkers 一起使用（但是，截至 2011 年 12 月，WebWorkers 仍不支持 IndexedDB）；而异步 API 旨在用于正常的 Web 使用。在您使用 IndexedDB 的大多数情况下，您将使用异步 API，因此本文讨论如何使用异步 API。

来自[https://developer.mozilla.org/en/IndexedDB/Using_IndexedDB](https://developer.mozilla.org/en/IndexedDB/Using_IndexedDB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:37:20.557

从 IndexedDB 规范中，可以删除 Sync API

> 有风险的功能
> 
> 由于可能缺乏实现，以下功能存在风险并且可能会被删除。
> 
> ```
> 3.3 Synchronous APIs 
> ```

另外，请注意，您也可以在 Web Worker 中使用异步 API。

# html - swf 文件没有动态引用其他 swf 文件

> ID：10698729
> 
> 赞同：0
> 
> 时间：2012-05-22T08:53:38.033
> 
> 标签：html, flash

我有一个网站 www.gotmilk.com，它有一个完整的网页 flash 内容。正在显示的第一个 Flash 文件是“shell.swf”。当我用 etheral 捕获网络流量时，我知道了这个“shell.swf”，它引用了一些其他文件（例如 main.swf、一些 .flv 和一些其他 .mp3），以使该网站正常运行。

现在我的问题是，如果我下载完整的网页，然后尝试使用下载的网页再次加载它，为什么这不起作用。

形式 etheral 我可以看到只有“shell.swf”是从服务器下载的，但是这个文件没有被引用任何其他文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:30:56.607

您下载的文件很可能是指 SWF 文件本身中的其他文件。简单地保存网页不会捕获这些其他文件。如果您希望 shell.swf 始终加载外部文件，请确保它使用静态路径（例如：“http://www.gotmilk.com/flash/file.swf”）而不是相对路径（“闪存/文件.swf")。

我希望这是有帮助的 ：）

# matlab - 如何在matlab图形中对数据对象进行分组

> ID：10698730
> 
> 赞同：1
> 
> 时间：2012-05-22T08:53:38.470
> 
> 标签：matlab, object, grouping, handlers, figures

我正在用 Matlab 制作一个简单的交互式绘图仪。我所做的很简单：我使用命令：

```
[x,y] = ginput(1) 
```

精确定位位置 (x,y)。然后，我使用这个点作为种子点来绘制曲线，并在绘制曲线的顶部添加一些箭头（显示方向）。

现在我的问题是：在我完成图之后，我希望能够通过单击来选择（例如删除）一条曲线及其对应的箭头。

问题是这些箭头和曲线不是同一个对象的一部分，这就是为什么 Matlab 只会删除曲线或箭头，这取决于选择了/被选择的一个。

缩小范围，我知道曲线和箭头确实有单独的对象处理程序。改写我的问题：无论如何我可以将这两个单独的处理程序组合在一起，或者例如，使箭头成为原始曲线的子级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:20:30.520

您可以使用该`tag`属性对绘图中的元素进行分组。例如，使用

```
hold on;    
plot(x, y, 'tag', 'group1');
plot(x2, y2, 'tag', 'group1');

plot(x3, y3, 'tag', 'group2');
plot(x4, y4, 'tag', 'group2'); 
```

之后，您可以选择属于第一组的所有元素

```
h = findall(0, 'tag', 'group1'); 
```

并删除它们

```
delete(h); 
```

根据 OP 在评论中的要求，这是一个允许交互式分组删除数据点的解决方案：

```
 plot(x, y, 'tag', 'group1', 'buttondownfcn', @(obj, evt) delete(findall(gca, 'tag', 'group1')))
   plot(x2, y2, 'tag', 'group2', 'buttondownfcn', @(obj, evt) delete(findall(gca, 'tag', 'group2'))) 
```

如果您现在单击一个数据点，则属于同一组的所有点都将被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:34:10.167

Well you can approach this problem in different ways.

First about storing the informations:

*   Most cleanly would be if you would write your own classes with `classdef` to hold your objects, there is the class `handles` you can extend for such purposes. Alternatively you could store them in the `userdata` fields of all graphic objects.

*   about the selection and deletion - lines can be assosiciated with a `ButtonDownFcn` and `DeleteFcn`. The first can be used to highlight the related lines, the second to delete the related ones.

# php - 从 Web 执行过程创建的记录少于从 SQL Management Studio 运行

> ID：10698732
> 
> 赞同：1
> 
> 时间：2012-05-22T08:53:40.093
> 
> 标签：php, sql, sql-server

在 MS SQL 上，我有将记录插入表的过程 CM_Export。当我直接从 SQL Management Studio ( `EXEC dbo.CM_Export 'DB1', 'DB2', 1`) 运行它时，它会插入 80 行。但是当我从网络上运行它时，它只插入了 20 行。在这两种情况下都需要 1 秒。在网络中，我尝试了两种方法：

1)

```
 $sql = "EXEC dbo.CM_Export 'DB1', 'DB2', 1";
sqlsrv_query($conn, $sql); 
```

2)

```
 $tsql = "{call CM_Export(?, ?, ?)}";

$params = array(array("DB1", SQLSRV_PARAM_IN),
 array("DB2", SQLSRV_PARAM_IN),
 array(1, SQLSRV_PARAM_IN)
);

$stmt = sqlsrv_prepare($conn, $tsql, $params);    
if($stmt) {    
 echo "Statement prepared.\n";    
} else {    
 echo "Error in preparing statement.\n";    
 die( print_r( sqlsrv_errors(), true));    
}    

if(sqlsrv_execute($stmt)) {    
 echo "Statement executed.\n";
} else {
 echo "Error in executing statement.\n";
 die(print_r(sqlsrv_errors(), true));
}
sqlsrv_free_stmt($stmt); 
```

没有发生错误。我尝试在探查器中捕获运行的内容以及将其复制到 Management Studio 时，因此过程插入 80 行并从 web 20。当我添加到存储过程 TRANS 时，因此从 web 运行不会添加任何行。但没有错误 - 从 Management Studio 运行再次正常。我也尝试过tracelog，有：

退出 SQLExecDirectW 并返回代码 0 (SQL_SUCCESS)

当我进行多次刷新（程序中没有 TRANS 的 Ctrl + R）时，所以从前 20 行过程中添加另一行，我可以创建大约 40 行。所以似乎问题出在了一些超时中。但是在脚本中添加超时参数没有任何效果。

```
sqlsrv_query($conn, $sql, array(), array('QueryTimeout' => 100)) 
```

在跟踪日志中，我还发现：

WCHAR * 0x50418B34 [-3]

谷歌说这是使用 SQL 的 ODBC 驱动程序的问题。我使用 SQL 2008 R2 64b。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:00:52.260

所以我找到了解决方案 -[将 SET NOCOUNT ON 添加到存储过程](http://social.msdn.microsoft.com/Forums/en-US/sqldriverforphp/thread/e0908b2f-4afa-4626-830d-9683486186c8)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:18:54.513

您是否尝试过删除 sqlsrv_free_stmt？可能是该语句在工作完成之前被释放。

脚本执行完毕后，仍应清理该语句。

# google-app-engine - “添加：模型”未触发骨干关系

> ID：10698737
> 
> 赞同：0
> 
> 时间：2012-05-22T08:53:55.490
> 
> 标签：google-app-engine, backbone.js, backbone-relational

我刚刚开始研究 Backbone-relational，我正面临“HasMany”案例的问题。

首先是模型：

```
 var Word = Backbone.RelationalModel.extend({
    urlRoot: '/test/api/word',
    idAttribute: '_id'
});

var List = Backbone.RelationalModel.extend({
    urlRoot: '/test/api/list',
    idAttribute: '_id',
    relations: [{
        type: Backbone.HasMany,
        key: 'words',
        relatedModel: 'Word',
        reverseRelation: {
            key: 'list',
            includeInJSON: '_id'
        }
    }]
}); 
```

“列表”模型的视图，其中“单词”应该呈现如下：

```
 var ListWordsView = Backbone.View.extend({
    tagName: 'div',

    initialize: function(){
        _.bindAll(this,'render', 'renderWords');
        //alert("its clicked!," + this.model.get('desc'));
        this.model.bind('change',this.render);
        this.model.bind('reset',this.render);
        this.model.bind('add:words',this.renderWords);
    },

    renderWords: function(word){
        alert("hello it's there!" + word.get("word_name"));
        var wordView = WordView({ model: word });
        this.$("#words_list").append(wordView.render());
    },
    render: function(){
        try{
        $("#list_box.title_name").html(this.model.get('list_name'));
        this.model.toJSON();
        //this.model.get('words').each(renderWords);
        //this.setContent();
        alert(JSON.stringify(this.model));
        }
        catch(e){
            alert("error! : " + e.message);
        }
    } 
}); 
```

所以问题出在调用这个 ListWordsView 时（在 List 的 fetch() 完成之后），“add:words”没有被触发，因此没有显示单词。

尝试了几种方法，但没有奏效。我渲染列表本身或其他东西的方式有什么问题吗？

# selenium - 如何创建正确的拆解脚本

> ID：10698744
> 
> 赞同：0
> 
> 时间：2012-05-22T08:54:10.747
> 
> 标签：selenium, automated-tests, selenium-rc

我的问题如下：我们在工作中使用 Selenium IDE 和 RC 来测试我们网站的功能。我们的网站有一个列表，每次添加项目时都会保存在服务器上。它还允许用户登录。

当我的 selenium 套件中途失败时（例如，因为网站上出现错误），它可能会在列表中留下一些项目，它可能会让用户保持登录状态等。拆卸脚本（注销，清除列表）现在是套件的一部分，但是当套件中途失败时它们不会被执行。因此，当下一个测试开始时，它不会像应有的那样从头开始。这当然会使该套件中的几个步骤失败，从而导致整个测试运行崩溃和烧毁。

我想出的解决方案之一是，在每个测试套件之后，运行几个允许失败的较小拆解套件。

示例：Big Main Suite Fail Log out Fail clear list Success

这就是测试中途失败并在列表中留下一些项目时会发生的情况

Big Main Suite 成功 注销 失败 清除列表 失败

这就是成功运行时会发生的情况。

即使这个解决方案可能会起作用，但它对您的报告来说真的很糟糕。

所以我基本上有2个问题：

1.  确保套件从头开始的最优雅方法是什么，即使之前的套件失败了？
2.  是否可以抑制您不介意失败的套件和案例的“失败”消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:06:38.223

**对于问题 1。确保套件从头开始的最优雅方法是什么，即使之前的套件失败了？**

我建议你使用 testNG 或 JUnit 框架。这两个都有注释，可以帮助您编写测试完成时应该发生的事情，而不管测试结果如何。我只用过testNG。testNG 提供了额外的侦听器，您可以在其中定义方法通过、跳过或失败时应该发生的情况。

您还可以定义将在调用任何方法或类之前执行的方法（@BeforeMethod 注释）。

我不知道你现在是如何处理你的报告的，但是 testNG 有一个很好的 HTML 报告，它显示了基本的细节。

通过使用 testNG，您可以实现**问题 2**中所述的内容。testNG 允许您将测试分组并一起运行这些测试。您可以将所有您不介意失败的测试添加到一组并运行它。

学习曲线相对较少，它会让你的工作更轻松。[您可以在此处](http://testng.org)找到有关 testng 及其与 selenium 集成的更多详细信息

# mfc - 关于在静态控制 (MFC) 中绘制椭圆

> ID：10698748
> 
> 赞同：0
> 
> 时间：2012-05-22T08:54:25.927
> 
> 标签：mfc, draw, ellipse

当我在静态控件中双击时，我将在静态控件中的鼠标位置绘制椭圆。（MFC）；但是，看起来： ![吃惊](../Images/911f863e432a8d99a2502469d99b0cfb.png)

我的代码：

无效 CTreeShowLabel::OnLButtonDblClk(UINT nFlags, CPoint 点)

{

//设置画笔

COLORREF 黑色 = RGB(255, 0, 0);

CPen笔（PS_SOLID，1，黑色）；

CClientDC Dc(GetDlgItem(IDC_TREESTATIC));

Dc.SelectObject(笔);

```
//在鼠标处画图
CPoint curPos;
GetCursorPos(&curPos);

CPoint point1(0,0);
point1.x = curPos.x - 50;
point1.y = curPos.y - 50;

CPoint point2(0,0);
point2.x = curPos.x + 50;
point2.y = curPos.y + 50;

    //画圆
Dc.Ellipse(CRect(point1, point2));
CStatic::OnLButtonDblClk(nFlags, point); 
```

}

关于圈子是可怕的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:18:58.537

在 OnLButtonDblClk 事件捕获器中绘制椭圆似乎不是一个好主意。您应该创建自己的从 CStatic 派生的类并覆盖 OnPaint 方法。

然后从事件捕获器中，您应该告诉静态它必须绘制椭圆以及在哪里（例如两个成员变量：bool m_bDraw / CPoint m_DrawingPoint）并在静态中调用 Invalidate。

# macos - 附加到受保护的文件

> ID：10698751
> 
> 赞同：6
> 
> 时间：2012-05-22T08:54:33.947
> 
> 标签：macos, bash, shell, unix

我想做一些类似的事情：

```
echo "Append string" >> protected_file 
```

但是，由于此文件受写保护，我收到错误消息。跑步：

```
sudo echo "Append string" >> protected_file 
```

似乎在 echo 命令上运行 sudo ，仍然给我权限错误，我该如何附加到这个文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T14:50:00.373

```
echo "Append string" | sudo tee -a protected_file >/dev/null 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T08:58:10.733

对于一个字面的答案，

```
sudo sh -c 'echo "Append string" >> protected_file' 
```

但我原则上同意 ShivanRaptor。

解释：`>>`是一个shell操作符。如果调用`sudo command`，则不会运行另一个 shell；因此，如果不进行重定向，您将无法`echo`进行重定向`sudo`（最终，在进行重定向时会为您提供错误的用户 ID）。诀窍是在内部启动一个单独的外壳`sudo`，您可以在其中发出重定向运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:06:41.580

或试试这个：

```
echo "echo 'append string' >> protected_file" | sudo bash 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-01T16:12:54.793

将它们放在一起并修复其中一个答案，有 3 种方法：

```
sudo su root -c "echo 'append string' > protected_file"
echo "echo 'append string' >> protected_file" | sudo bash
echo "append string" | sudo tee -a protected_file >/dev/null 
```

# java - 具有自定义约束的 apache poi

> ID：10698754
> 
> 赞同：2
> 
> 时间：2012-05-22T08:54:46.143
> 
> 标签：java

我想使用带有自定义约束的 apache-poi 运行这个自定义公式

```
=OR(IF(ISERROR(FIND(".",A1)),LEN(A1)>0,LEN(MID(A1,FIND(".",A1)+1,25))<3)) 
```

所以知道怎么做吗？代码如下...

公共类 PoiWriteExcelFile {

```
public static void main(String[] args) {
    try {
        FileOutputStream fileOut = new FileOutputStream("c:/poi-test.xls");
        HSSFWorkbook workbook = new HSSFWorkbook();
        HSSFSheet worksheet = workbook.createSheet("POI Worksheet");
        HSSFCellStyle style = workbook.createCellStyle();
        HSSFDataFormat df = workbook.createDataFormat();
        CellRangeAddressList addressList = new CellRangeAddressList(0, 4, 3, 3);
        DataValidationHelper helper = worksheet.getDataValidationHelper();
//            helper.create
            helper.createFormulaListConstraint("OR(IF(ISERROR(FIND('.',A1)),LEN(A1)>0,LEN(MID(A1,FIND('.',A1)+1,25))<3))");
            DVConstraint dvConstraint = DVConstraint.createNumericConstraint(ValidationType.DECIMAL, DVConstraint.OperatorType.BETWEEN, "1.00", "1000000000000.00");
            dvConstraint.createCustomFormulaConstraint("OR(IF(ISERROR(FIND('.',A1)),LEN(A1)>0,LEN(MID(A1,FIND('.',A1)+1,25))<3))");
            DataValidation dataValidation = new HSSFDataValidation(addressList,
                    dvConstraint);
            dataValidation.setSuppressDropDownArrow(false);
            worksheet.addValidationData(dataValidation);
            style.setLocked(true);
            //style.setDataFormat(workbook.createDataFormat().getFormat("0.00"));
            style.setDataFormat(df.getFormat("0.000"));
            // index from 0,0... cell A1 is cell(0,0)
        List val = new ArrayList();
        val.add("srNo");
        val.add("name");
        val.add("qty");
        val.add("price");
        val.add("total");
        val.add(1);
        val.add("a");
        val.add(100);
        val.add(0);
        val.add(0);
        val.add(2);
        val.add("b");
        val.add(1000);
        val.add(0);
        val.add(0);
        val.add(3);
        val.add("c");
        val.add(10000);
        val.add(0);
        val.add(0);
        int k = 0;
        int count = 1;
        int countt = 1;
        String formula = "";
        for (int i = 0; i < 4; i++) {
            HSSFRow row1 = worksheet.createRow(i);
            for (int j = 0; j < 5; j++) {
                HSSFCell cellA1 = row1.createCell(j);
                try {
                    //cellA1.setCellValue((Integer) val.get(j + k));
                    cellA1.setCellStyle(style);
                } catch (Exception e) {

                    cellA1.setCellStyle(style);
                }
                if (j == 4 && i != 0) {
                    count++;
                    formula = "C" + count + "*D" + (count);
                    cellA1.setCellFormula(formula);
                }
                if (j == 3 && i != 0) {
                    countt++;
                    formula = "ROUNDUP(D"+countt+",3)";
                    cellA1.setCellStyle(style);
                    cellA1.setCellFormula(formula);
                }
            }
            k = k + 5;
        }
        //worksheet.protectSheet("jogi");
        workbook.write(fileOut);
        fileOut.flush();
        fileOut.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:23:33.047

你需要使用*[`org.apache.poi.hssf.usermodel.HSSFFormulaEvaluator`](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFFormulaEvaluator.html)*

**示例**：

```
HSSFFormulaEvaluator formulaEvaluator = new HSSFFormulaEvaluator( currentWorkbook );  

HSSFCell cellA1 = currentRow.createCell( 0, Cell.CELL_TYPE_NUMERIC );  
cellA1.setCellValue( 6 );  

HSSFCell cellB1 = currentRow.createCell( 1, Cell.CELL_TYPE_FORMULA );  
cellB1.setCellFormula( "power( A1, 2 )" );  

// returns 0, because formula is not evaluated yet
// prints: cellB1.getNumericCellValue() = 0.0
System.out.println( "cellB1.getNumericCellValue() = " + cellB1.getNumericCellValue() );

HSSFCell cellC1 = currentRow.createCell( 2, Cell.CELL_TYPE_NUMERIC );  
// the base cell retains formula and returns evaluated cell value  
CellValue evaluatedCellValue = formulaEvaluator.evaluate( cellB1 );  
cellC1.setCellValue( evaluatedCellValue.getNumberValue() );  

// if you want to remove formula and write its evaluated value use the following.  
// removes formula and overwrites the cell with resulting value.  
formulaEvaluator.evaluateInCell( cellB1 ); 
```

有关更多详细信息，请阅读提到的文档。

通过这种方式，您可以评估并进一步处理您想要的公式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:03:28.430

使用这种方法`org.apache.poi.hssf.usermodel.HSSFCell.setCellValue(String)`。您的单元格应该是`org.apache.poi.ss.usermodel.Cell.CELL_TYPE_FORMULA`.

# c++ - 为什么while循环从不执行？

> ID：10698763
> 
> 赞同：0
> 
> 时间：2012-05-22T08:55:20.797
> 
> 标签：c++, while-loop, flags

我正在开发一个简单的程序来测试带有标志的 while 循环。

但是我不确定为什么我的程序由于某些原因甚至没有进入while循环，如果我犯了简单的错误，请原谅我。

主要的

```
int main()
{
  int xflag=0;
  int n=0;

while ( xflag==1 )
{
    if (n == 10)
    {

        cout<<"exiting loop"<<endl;
        xflag = 1;
    }

    else
    {
        cout << n << endl;
        ++n;
        xflag = 0;
    }

}

cout<<"hey"<<endl;

return 0;
} 
```

输出

```
 hey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T08:56:33.333

正确的。`while`循环体将执行 if `xflag == 1`。但事实并非如此。

由于您设置`x = 1`退出循环，您需要的可能是将条件更改`xflag == 1`为`xflag == 0`（或 simpy `!xflag`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:00:18.143

的`xflag`值为`0`。因此情况`xflag == 1`正在恢复`false`。这就是控件没有进入 while 循环的原因。

# sharepoint - 如何更改 sharepoint server 2010 中的身份验证？

> ID：10698769
> 
> 赞同：0
> 
> 时间：2012-05-22T08:55:34.057
> 
> 标签：sharepoint, authentication, sharepoint-2007, moss

如何更改 sharepoint server 2010 中的身份验证？默认情况下，它需要 Windows 身份验证。

创建网站后，如果可以的话，可以更改网站中的身份验证名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:15:06.853

如果要将 Windows 身份验证更改为基于表单的身份验证，可以按照以下步骤操作：http: [//blog.summitcloud.com/2009/11/forms-based-authentication-sharepoint-2010-fb/](http://blog.summitcloud.com/2009/11/forms-based-authentication-sharepoint-2010-fb/)

# ios - 我需要在后台执行一些计算。这是正确的方法吗？

> ID：10698771
> 
> 赞同：2
> 
> 时间：2012-05-22T08:55:36.283
> 
> 标签：ios, background, grand-central-dispatch, multitasking, background-process

我需要在后台执行一些计算。这是正确的方法吗？

**重要**请参阅 onPerformBackgroundTask。方法的第一部分结束了后台任务。是否有可能在应用程序暂停之前调用方法的第二部分？

```
- (void)applicationDidEnterBackground:(UIApplication *)application {  
[application endBackgroundTask:bgTask];
bgTask = UIBackgroundTaskInvalid; 

if ([self isNeedTimeToFinishTask]) 
{        
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    if (!backgroundTimer) 
    {
        self.backgroundTimer = [NSTimer scheduledTimerWithTimeInterval:540 target:self selector:@selector(onPerformBackgroundTask:) userInfo:nil repeats:YES];
    }
}

 -(void) onPerformBackgroundTask:(id) sender
{
 [[UIApplication sharedApplication] endBackgroundTask:bgTask];
 bgTask = UIBackgroundTaskInvalid; 

 if ([self isNeedTimeToFinishTask]) 
 {
    bgTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        [[UIApplication sharedApplication] endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];
 }
}

-(void) endBackgroundTask
{
 if ([backgroundTimer isValid]) 
 {
    [backgroundTimer invalidate];
    [backgroundTimer release];
 }    
 [[UIApplication sharedApplication] endBackgroundTask:bgTask];
 bgTask = UIBackgroundTaskInvalid;
} 
```

# c# - SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应是：5.5.1 Authentication Required

> ID：10698779
> 
> 赞同：5
> 
> 时间：2012-05-22T08:55:57.003
> 
> 标签：c#

我有一个问题，当我通过此代码发送邮件时，会发生错误“SMTP 服务器需要安全连接或客户端未经过身份验证。服务器响应为：5.5.1 需要身份验证。”

我的代码是：

```
protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{

    MailMessage mail = new MailMessage();
    mail.To.Add("info@msslindia.com");
    mail.From = new MailAddress("info@msslindia.com");
    string body = "<table><tr><td>Company Name:</td><td>" + txt_cname.Text + "</td></tr><tr><td>Address With No.:</td><td>" + txt_addwithno.Text + "</td></tr><tr><td>Contact Person:</td><td>" + txt_conperson.Text + "</td></tr><tr><td>Email Id</td><td>" + txt_email.Text + "</td></tr><tr><td>Description</td><td>" + txt_description.Text + "</td></tr></table>";
    mail.Body = body;
    mail.IsBodyHtml = true;
    SmtpClient smtp = new SmtpClient();
    smtp.Host = "smtp.gmail.com";
    smtp.Port = 25;
    smtp.UseDefaultCredentials = true;
    smtp.Credentials = new System.Net.NetworkCredential("info@msslindia.com", "xyz");
    smtp.EnableSsl = true;
    smtp.Send(mail);

    txt_cname.Focus();
    txt_cname.Text = "";
    txt_addwithno.Text = "";
    txt_conperson.Text = "";
    txt_email.Text = "";
    txt_description.Text = "";

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T12:53:38.747

Google 可能会阻止应用程序访问您的帐户
您可以在此处启用应用程序以使用您的凭据访问 google 帐户：

[https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T09:00:38.670

我认为您应该将[UseDefaultCredentials](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.usedefaultcredentials.aspx)设置为 false，因为您为连接定义了凭据。

> 如果服务器请求此 SmtpClient 对象应使用当前登录用户的默认凭据进行身份验证，则将此属性设置为**true 。**
> 
> [...]
> 
> 如果 UseDefaultCredentials 属性设置为**false**，则*Credentials 属性中设置的值将用于*连接到服务器时的凭据

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T09:05:00.267

尝试端口 587（它对我有用）并将 UseDefaultCredentials 设置为 false。设置这个并尝试发送邮件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:02:03.893

我认为您使用了错误的端口。

你应该使用 465

[http://support.google.com/mail/bin/answer.py?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-26T20:21:43.807

端口并不重要，因为 System.Net.Mail 不支持隐式 SSL，换句话说，它完全忽略了“端口”参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-30T03:06:22.520

我试图通过 SQL Server 2012 数据库邮件进行设置，并收到相同的消息。

即使使用了应用程序特定的密码，我也无法使用我的主 g-mail 帐户使用双重身份验证。我最终尝试了没有双重身份验证的辅助帐户，并且立即生效。因此，对于使用上述解决方案之一无法使其正常工作的任何人，请使用标准的 auth g-mail 帐户进行尝试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-03T22:22:40.913

Microsoft 声明不推荐使用 SmtpClient。你应该使用 MailKit 它肯定会工作。

[https://docs.microsoft.com/en-us/dotnet/api/system.net.mail.smtpclient?view=netframework-4.0](https://docs.microsoft.com/en-us/dotnet/api/system.net.mail.smtpclient?view=netframework-4.0)

**我们不建议您将 SmtpClient 类用于新开发，因为 SmtpClient 不支持许多现代协议。请改用 MailKit 或其他库。有关更多信息，请参阅 SmtpClient 不应在 GitHub 上使用。**

# android - Android 如何通过滑动手势实现视图组的更改

> ID：10698781
> 
> 赞同：0
> 
> 时间：2012-05-22T08:55:59.110
> 
> 标签：android, transition, fragment, swipe

使用 gmail 或 greader 时，您可以通过发出滑动手势从一条消息/新闻转到下一条/上一条。

我想知道如何最好地实施这种行为？是否有一些内置视图可以做到这一点，或者我应该选择源视图和目标视图并在它们之间进行转换？

有什么代码示例可以解决这个问题吗？

此外，假设我想从一个列表滑动到第二个列表。当在平板电脑中时，我希望两个列表并排显示。这是典型的片段用法吗？不过，如何实现刷卡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:05:30.307

您需要查看[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html). 简要概述和示例源代码可在开发人员的博客条目[使用 ViewPager 的水平视图滑动中找到](http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html)。

> 我想从一个列表滑动到第二个列表。当在平板电脑中时，我希望两个列表并排显示。这是典型的片段用法吗？

`Fragment`在上述用例中使用会更好。

# python - 使用 boto 从 Amazon SQS 读取原始消息

> ID：10698786
> 
> 赞同：9
> 
> 时间：2012-05-22T08:56:27.297
> 
> 标签：python, amazon-web-services, boto, amazon-sqs

默认情况下，boto 在将消息发送到 SQS 之前使用 Base64 对消息进行编码。示例代码：

```
conn = boto.connect_sqs('access_key_id', 'secret_key') 
q = conn.get_queue('myqueue')
m = Message()
m.set_body('hello!')
q.write(m) 
```

通过用 RawMessage() 替换 Message()，我可以将原始消息发送到队列而无需编码。但是如何在不解码的情况下从队列中读取消息？如果我使用以下代码：

```
rs = q.get_messages(1)
if rs:
    m = rs[0]
    print m.get_body() 
```

m.get_body() 自动返回解码结果。有没有办法检索原始消息？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-05T22:19:32.623

如果您有兴趣从 SQS 队列中读取消息并且生产者是其他人，则在调用 get_messages() 时可能会开始看到垃圾字符。见[https://github.com/boto/boto/issues/831](https://github.com/boto/boto/issues/831)

再次在这种情况下的解决方案是

```
from boto.sqs.message import RawMessage
q.set_message_class(RawMessage) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T09:24:17.200

实际上`Message`类继承自`RawMessage`，因此它具有所有方法。这些方法之一是：

**[`get_body_encoded()`](http://boto.s3.amazonaws.com/ref/sqs.html#boto.sqs.message.RawMessage.get_body_encoded)**

> *该方法实际上是Queue.write方法在将消息内容写入SQS时使用的半私有方法。您可能不需要在正常的事件过程中调用此方法。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T09:26:42.117

的构造函数`boto.sqs.queue.Queue`有一个`message_class`参数，您可以将其设置为`RawMessage`. 另一方面，我不明白为什么在传输数据之前不对数据进行编码是有意义的。

# data-binding - AngularJS如何将数据与SVG小部件绑定

> ID：10698791
> 
> 赞同：9
> 
> 时间：2012-05-22T08:56:38.907
> 
> 标签：data-binding, svg, widget, raphael, angularjs

我知道这通常不是使用 AngularJS 的方式，但我想知道我想要实现的目标是否可以通过 AngularJS 实现。如果这不是推荐的方式，您能否提供有关如何实现此目的的提示？请考虑我是网络编程领域的新手。

所以在我的项目中，我使用 SVG 和 RaphaelJS 在画布上绘制了几个小部件，这些小部件放置在“持有人”div 内。我正在尝试使用 AngularJS 将这些小部件绑定到数据，基本上每个小部件都链接到 CustomController 中的一个对象。初始化小部件时如何访问 CustomController？

```
<html lang="en" style="height: 100%;"  ng-app="myApp">
<head>
  <script type="text/javascript"">
    $(document).ready(function () {
      var canvas = Raphael('holder', '800', '600');
      var widget1 = new Widget1(params);
      // initialize widgets here, that I need to bind to data using AngularJS
      // I am not able to access the CustomController here when drawing my widgets
    });
  </script>
</head>
<body>
  <div id="holder" ng-controller="CustomController">

  </div>
</body>
</html> 
```

无论如何，这是使用 AngularJS 实现对 SVG 小部件的数据绑定吗？我开始认为这不是 AngularJS 的目的。在这种情况下，你能告诉我如何做到这一点吗？

**更新：**

伙计们非常感谢您的回答！要求是小部件接受用户输入，并且我希望它不要放在 html 文件中（出于模块化目的）。因此，该指令似乎是目前的主要选择。在链接方法中，我将使用 RaphaelJS 绘制小部件，也可以绘制可编辑对象，但这样我就不会正确使用 AngularJS 绑定机制，它只是手表和事件处理程序......这对我来说似乎很乱。如果我可以通过某种方式将 SVG 标记放在指令的模板属性中并在模板中进行投标，那就太好了，但这似乎不受支持。

你们对此有其他想法吗？

顺便说一句，有没有办法以编程方式在使用 jQuery 获得的属性和 HTML 元素（例如文本框）之间应用绑定？

问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T04:48:52.987

You could get hold of the controller, but that would make the whole communication between SVG and your app in-side-out. Instead invert how the application is composed: Let angular drive the app and wrap the svg using a directive into a reusable component as Dan mentioned.

btw using SVG and angular is not such a rare thing. check out this pretty awesome example: [http://sullerandras.github.com/SVG-Sequence-Diagram/](http://sullerandras.github.com/SVG-Sequence-Diagram/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:05:17.843

You should look at creating an angularjs directive that wraps these objects. When data that is bound to angular scope changes, you need to do a scope.$apply(). This is a simplistic answer, take a look at the [http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive) doc.

# java - Java 客户端 - 服务器不重复响应

> ID：10698795
> 
> 赞同：1
> 
> 时间：2012-05-22T08:56:52.430
> 
> 标签：java, sockets, client-server

//编辑 13:25 **客户端控制台**

```
Connect to server<br />
Repsonded: Tue May 22 13:23:28 CEST 2012<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Repsonded: Tue May 22 13:23:38 CEST 2012<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br />
Connect to server<br />
Not run: java.net.SocketException: Software caused connection abort: recv failed<br />
Disconnect to server<br /> 
```

**服务器控制台**

```
Server Initialized<br />
111111<br />
111111<br />
111111<br />
111111<br />
111111<br />
111111<br />
111111<br />
111111<br />
111111<br />
111111<br />
111111<br />
Error(run): java.net.SocketException: Connection reset by peer: socket write error<br />

Server load data and not return repead "Repsonded: Tue May 22 13:23:38 CEST 2012" or client not ouput print. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:39:39.603

问题在于您的服务器实现。您没有在 run 语句中循环，检查来自该连接的新传入消息。您阅读了一次信息，然后在 finally 语句中关闭连接：

```
 @Override
    public void run() {

        try {

            BufferedInputStream is = new BufferedInputStream(connection.getInputStream());
            InputStreamReader isr = new InputStreamReader(is);
            ...
        finally {
            try {
                connection.close(); 
```

当然，您的服务器有一个循环检查传入的连接请求，因此如果客户端在发送每条消息后再次尝试连接到服务器，但您的客户端只发送一个请求（在主语句的开头），这将起作用。

所以，我会建议你做什么：服务器端，在`run`语句中设置流等，一旦设置好就进入一个无限循环`while(true)`，在该循环中让服务器从输入流中读取，如果`read()`确实如此不返回 null，打印消息。这将导致服务器检查来自该客户端的传入数据，一旦你得到一个不为空的字符串，它将打印它（如果你愿意，它会触发响应）。

客户端也是如此，您需要一个循环来侦听来自服务器的传入消息

# c# - 在 C# 的 Windows 窗体上显示文本文件

> ID：10698799
> 
> 赞同：0
> 
> 时间：2012-05-22T08:57:04.820
> 
> 标签：c#, forms, file

我正在尝试显示 txt 文件的内容。我认为我应该为该方法使用 RichTextBox。我所做的是这个。但是它不起作用。

```
public static byte[] ReadFile() {

        FileStream fileStream = new FileStream(@"help.txt", FileMode.Open, FileAccess.Read);
        byte[] buffer;
        try {
            int length = (int)fileStream.Length;  // get file length
            buffer = new byte[length];            // create buffer
            int count;                            // actual number of bytes read
            int sum = 0;                          // total number of bytes read

            // read until Read method returns 0 (end of the stream has been reached)
            while ((count = fileStream.Read(buffer, sum, length - sum)) > 0)
                sum += count;  // sum is a buffer offset for next reading
        } finally {
            fileStream.Close();
        }
        return buffer;
    }

    private void richTextBox1_TextChanged(object sender, EventArgs e) {
        ReadFile();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:01:29.310

我可能遗漏了一些东西，但我看不到您将阅读结果附加到文本框的位置！

您正在返回缓冲区，但没有在任何地方使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:15:35.950

你这里有几个问题。

我想 richTextBox1_TextChanged 与您要填充的 RichTextBox 的更改事件相关联。这意味着除非您手动更改 RichTextBox 本身的内容，否则它不会执行。

此外，在该方法中，您正在调用一个方法 (ReadFile)，该方法读取您的文件并将内容作为字节 [] 返回，但结果会丢失，因为您仍然没有使用它。

然后，即使您读取文件的方式也不正确，因为您正在一次读取所有文件（您指定读取文件中包含的确切字符数），因此不需要 while 循环。

我将附加到表单的加载事件并编写如下内容：

```
public string FillRichText(string aPath)
{
    string content = File.ReadAllText(aPath);
    richTextBox1.Text = content;
}

private void Form1_Load(object sender, EventArgs e)
{
    FillRichText(@"help.txt");
} 
```

您将需要在表单的 InitializeComponent() 中使用这一行：

```
this.Load += new System.EventHandler(this.Form1_Load); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:04:23.253

做这个：

1.  有一个按钮。

2.  单击按钮时，调用 ReadFile()，将从 ReadFile() 接收到的 byte[] 转换为字符串并显示在 TextBox 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:04:45.620

用这个：

在表单的构造函数中，编写以下代码：

```
public Form1()
{
    InitializeComponent(); // This should already be there by default

    string content = File.ReadAllText(@"help.txt");
    richTextBox1.Text = content;
} 
```

这会一次性从给定文件中读取所有文本并将其分配给富文本框。当您阅读方法中的文本时，您没有将结果`byte`数组转换为字符串，也没有将其分配给富文本框。简单地阅读文件将无济于事。

**请同时删除该`TextChanged`事件：**`TextChanged`每次更改富文本框中的文本时都会调用该事件。在为属性设置新值时也是如此`Text`，这将导致无限递归。此外，当文本首先没有更改时，永远不会调用此事件，因此您必须在富文本框中手动输入文本才能触发此事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T09:08:20.973

将方法更改为以下，**您不需要富文本框**，一个简单的文本框就可以达到目的。

```
public void ReadFile() {

    TextReader reder = File.OpenText(@"help.txt");
    textBox1.Text = reder.ReadToEnd();        
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-17T07:13:48.870

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog() == DialogResult.OK)   
        {
            label1.Text = openFileDialog1.FileName;
            richTextBox1.Text = File.ReadAllText(label1.Text);
        }
 } 
```

# c# - 从xdocument c#获取字典

> ID：10698800
> 
> 赞同：2
> 
> 时间：2012-05-22T08:57:12.227
> 
> 标签：c#, dictionary, linq-to-xml, xelement

我有一个如下的 xml：

```
<NewDataSet>
<Person>
    <FirstName>abc</FirstName>
    <LastName>xyz</LastName>
    <Address>12345abc</Address>
</Person>
<Person>
    <FirstName>abcd</FirstName>
    <LastName>pqr_xyz</LastName>
    <Address>1111abc</Address>
</Person>
<Person>
    <FirstName>abcde</FirstName>
    <LastName>ghy_xyz</LastName>
    <Address>98765abc</Address>
</Person>
</NewDataSet> 
```

现在我想要这个 xml 到字典中。以下是我正在使用的代码。

```
 string data =
 @"<NewDataSet><Person>...";
 XDocument doc = XDocument.Parse(data); 
 Dictionary<string, string> dataDictionary = new Dictionary<string, string>();
 foreach (XElement elem in doc.Descendants("Person"))
    {
        var row = elem.Descendants();
        string str = elem.ToString();
        foreach (XElement element in row)
        {
           string keyName = element.Name.LocalName;
           dataDictionary.Add(keyName, element.Value);
        }
        yield return dataDictionary;
    } 
```

现在这段代码不起作用。我知道某处有一个愚蠢的错误，有人可以帮我吗？[这是将 xdocument 转换为 IEnumerable<Dictionary<string, object>>](https://stackoverflow.com/questions/7255882/convert-xdocument-to-ienumerabledictionarystring-object)的一些类似要求的示例，但我也无法使其正常工作。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:34:27.407

You were trying to use the same instance of the dataDictionary object which threw the argument exception. An item with the same key has already been added. To correct this you need to initialize the dataDictionary within the first for each loop.

```
 Dictionary<string, string> dataDictionary = null;

        foreach (XElement elem in doc.Descendants("Person")) 
        { 
            var row = elem.Descendants(); 
            string str = elem.ToString();

            dataDictionary = new Dictionary<string, string>();

            foreach (XElement element in row) 
            { 
                string keyName = element.Name.LocalName; 
                dataDictionary.Add(keyName, element.Value); 
            } 

            yield return dataDictionary; 
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:04:18.707

您可以在循环时添加到列表中：

```
var list = new List<Dictionary<string, string>>();
foreach (XElement elem in doc.Descendants("Person"))
{
    var dataDictionary = new Dictionary<string,string>();
    var row = elem.Descendants();
    foreach (XElement element in row)
    {
       string keyName = element.Name.LocalName;
       dataDictionary.Add(keyName, element.Value);
    }
    list.Add(dataDictionary);
}
var enumDict = list.AsEnumerable(); 
```

我在这里假设您想要一个 Dictionary 对象列表，每个人都表示为字典。不过，重新阅读这个问题，我不确定这就是你所追求的......

# objective-c - 当我们在 MacOS 中创建标准应用程序时，第一响应者是什么？

> ID：10698801
> 
> 赞同：1
> 
> 时间：2012-05-22T08:57:12.167
> 
> 标签：objective-c, xib, xcode4.3, first-responder

Xcode 4.3 将开始生成 mainmenu.xib

我看那个mainmenu.xib

它有一个名为 Main Menu 的对象

我也去看看菜单点是什么

菜单项 - 显示全部，例如，链接到 unhideAllApplications：

我试图找到 unhideAllApplications 定义的位置，但找不到。出口窗口说它链接到第一响应者。

它与第一响应者相关联

我检查了第一响应者的班级，我也找不到任何东西

例如，mainmenu.xib 的文件所有者是 NSApplication 类的对象。

![在此处输入图像描述](../Images/159991d57a2acc638064ef8d290aaab1.png)

First Responder 的类别是什么？类视图中没有提到任何内容

![在此处输入图像描述](../Images/fafab78858702d5b85d71b6ba0b0a481.png)

奇怪的是 mainmenu.xib 中有 3 个对象，Application 和 Owner 都是 NSApplication 类型。去搞清楚

![在此处输入图像描述](../Images/0fc478a2a630ad2374c9dbcc0e121235.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T08:59:55.047

第一响应者是当前关注的 UI 元素。每当焦点移动时，它就会改变。

下一个响应者通常是该元素的父元素，后一个是该父元素的父元素，依此类推，以窗口内容视图、窗口、应用程序和可能的应用程序委托结束。

每个事件都沿链向下传递，每个响应者要么处理它，要么传递给下一个响应者。

例如，`unhideAllApplications`在 中定义`NSApplication`。当这个动作产生时，当前链中的每个响应者都会尝试它，直到它最终被应用程序对象处理。与直接发送到应用程序的区别在于其他对象将有机会拦截它。

[Cocoa 事件处理指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/Introduction/Introduction.html#//apple_ref/doc/uid/10000060i)

# .net - 调试 WF 4 工作流服务时如何查看工作流变量

> ID：10698806
> 
> 赞同：6
> 
> 时间：2012-05-22T08:57:41.153
> 
> 标签：.net, visual-studio-2010, workflow-foundation-4, visual-studio-debugging

在调试 WF 4 工作流服务（托管在 IIS 7.5 / AppFabric 中）时，如何查看工作流变量的当前值？

我将 Visual Studio 2010 附加到 w3wp.exe，但是当某个活动的断点被命中时，“Locals”调试器窗口中仅显示以下参数：

*   是启动
*   typeIsland参数
*   调试信息

尝试手动将工作流变量添加到“Watch”会导致“名称 'xyz' 在当前上下文中不存在”。

难道我做错了什么？我的环境是否混乱（安装了 VS 2010 和 VS 11 Beta 的 Windows Server 2008 R2 机器 - VS 11 是否有可能破坏了某些东西）？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T00:07:29.103

您可以使用内置的 IIS 管理控制台查看变量的值等。正如@Vivek 所说，您还可以构建自己的自定义跟踪机制，但这听起来不像您在这里需要的。

本质上，您只需要稍微提高一下日志记录，使其更具诊断性，并且您将能够看到有关在 AppFabric 中运行的实时运行工作流的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T05:28:24.253

是您要求对某些变量进行价值分析，那么您也可以使用自定义跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T10:37:30.360

我通过修复 Visual Studio 解决了这个问题。

*控制面板->程序和功能->VS 20XX->修复*

该问题可能是由 appfabric、vs 和其他工具的安装顺序引起的。更多信息可以在[这里](https://msdn.microsoft.com/en-us/library/bb157687.aspx)找到。

# matlab - 当太多值相同时，Matlab 绘图失败

> ID：10698810
> 
> 赞同：1
> 
> 时间：2012-05-22T08:57:57.593
> 
> 标签：matlab, plot

我使用 Matlabs 绘图函数创建两个矩阵的比较（每个 1300x1 双）。这些值以数百为单位绘制，因为每一百个都需要自己的颜色和标记类型。它看起来像这样：

```
Start=1
for i=1:1:13
    plot(ArrayA(Start:Start+99,1),ArrayB(Start:Start+99,1));
    Start=Start+100;
end 
```

为了便于阅读，我省略了标记和颜色的参数。

它通常工作正常，但有时，有一种特殊情况，矩阵中的所有值都等于某个标量值（或者至少有 1000 个左右，其余 300 个等于其他一些标量）。在这些情况下，我们可以确定 ArrayA 中的值逐个元素地等于 ArrayB 中的值。

发生这种情况时，整个 matlab 失败并给我“Matlab 系统错误”。如果您需要此错误的详细信息，我很乐意提供。

我很确定这与点是否相等有关，因此无法正确绘制，就像在其他情况下一样，它工作得很好。

我想请您提供解决方法的建议，因为解决方案不需要非常整洁（因为这种情况很少发生）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:23:27.013

这很奇怪。双倍的 1300 不算什么，Matlab 应该能够处理。我只是尝试在一个图形上绘制 13000 个相同的值，而 Matlab 并没有打扰。

无论如何，我不能 100% 确定 Matlab 崩溃的原因（也许完整的错误消息可能有用），但如果您可以更具体地了解您要解决的问题，我们可能会找到不同的解决方案。

您是否试图在向量中找到不同值的位置？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:20:44.243

尝试：

```
pause(.1) 
```

在循环

或者，您可以尝试每次定义 1 个图并设置数据：

```
fig = figure;
hold on;
myplot = plot(NaN,NaN,'-')
for i = 1:100
   set(myplot,'XData',X(i),'YData',Y(i))
   dummy = dummy+1;
   drawnow;
end 
```

其中 X 和 Y 是您各自的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T07:07:21.887

我在 Mac OS X 上遇到了完全相同的问题`Matlab2010b`：在循环中绘图，vector 有时会变成 all `NaNs`，Matlab 会在那时或不久之后崩溃，但并非总是如此。

现在阅读这个线程，我认为这很可能是不同线程之间的竞争条件，所以来自 Mathworks 的人应该真正解决这个问题。

放置 a`pause(0.1)`会增加另一个线程首先完成的可能性（但这并不是真正的解决方案）。

竞争条件也可以解释为什么它只偶尔发生一次，因为它取决于任务（随机）分配给线程等。

# facebook - 在画布页面中获取发件人的 ID

> ID：10698811
> 
> 赞同：1
> 
> 时间：2012-05-22T08:58:01.853
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-canvas

我想使用 JS SDK 在我的画布页面中获取发件人的 ID。

我已经编写了这段代码，但它不起作用：

```
 <html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml" xml:lang="en" lang="en">
    <head>
    </head>

    <body>

    <div id="fb-root"></div>
<script>
console.log("one");
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'myAppId', // App ID
        status: true, 
        cookie: true,
        xfbml: true,
        oauth: true});

console.log("two");
FB.api("/me/apprequests", function(response) {
    console.log("1");
    if (response.data && response.data.length > 0) {
        console.log("2");
        for (var i = 0; i < response.data.length; i++) {
            console.log("3");
            if (response.data[i].from) {
                console.log("Sender: " + response.data[i].from);
            }
            else {
                console.log("App request and not a user request, unknown sender");
            }
        }
    }
});

  };
console.log("three");
  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
    </body>

    </html> 
```

为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:23:10.453

如果您想获取所有请求，那么您应该查询[/me/apprequests](http://developers.facebook.com/tools/explorer/me/?method=GET&path=me/apprequests)这将为您获取一个包含所有应用程序未决应用程序请求的 json 数组。然后，您可以遍历它们并获取发件人 ID。

但是，如果您只需要一个请求，那么您应该查询`/REQUEST_ID`. 例如，假设请求的 id 是`xxxx_yyyy`（其中 xxx 是请求 id，yyyy 是您的用户 id），那么您需要：`https://graph.facebook.com/REQUEST_ID`。

* * *

# 编辑

好吧，如果您想遍历所有请求，请先询问所有请求，然后对其进行遍历，而不是针对每个请求发出 http 请求。此外，请求中的“表单”字段仅适用于“用户生成的请求”，而不适用于“应用程序生成的请求”。

试试这个代码：

```
FB.api("/me/apprequests", function(response) {
    if (response.data && response.data.length > 0) {
        for (var i = 0; i < response.data.length; i++) {
            if (response.data[i].from) {
                console.log("Sender: " + response.data[i].from);
            }
            else {
                console.log("App request and not a user request, unknown sender");
            }
        }
    }
}); 
```

# asp.net-mvc - Orchard CMS：没有 web.sitemap 来构建我的自定义菜单

> ID：10698821
> 
> 赞同：0
> 
> 时间：2012-05-22T08:58:50.360
> 
> 标签：asp.net-mvc, navigation, orchardcms, sitemapprovider, asp.net-mvc-sitemap

我从 OrchardCMS 开始，遇到了障碍（至少对我来说）。

我有代码可以生成我需要的菜单（增量、下拉或其他，代码可以做到），但它使用 web.sitemap 或 mvc.sitemap，这在 Orchard 中不可用。

有什么方法/模块可以用来获取我的代码可以使用的站点地图吗？

高级菜单或其他导航模块是否提供类似于我需要的东西？

或者，果园是否为这种事情公开了任何 api？

我的问题是我正在将果园集成到现有站点中，因此需要提供相同的菜单。我的菜单生成器突出显示“当前分支”上的任何项目，以便用户对它们在导航层次结构中的位置有强烈的视觉提示。面包屑不是一种选择，因为我使用的网站之一涉及有精神障碍的人。

**编辑：**

编写一个模块从高级菜单中即时构建站点地图并通过站点地图提供程序获取它是否可行？应该没那么难...

那是正确的方法吗？

我真的需要我的菜单来显示当前分支和当前节点的视觉提示。

**笔记：**

在我的菜单中，当前分支和节点是从当前页面的 url 动态构建的（当前分支由从当前页面到根的层次结构中的所有页面组成）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:29:11.247

看看 INavigationProvider 及其实现。还可以看看目前在 Orchard 1.5 中对改进的菜单系统所做的工作：它对添加动态菜单项的扩展非常开放。

# mobile - 如果请求来自移动电话网络，我可以仅从 IP 地址判断吗？

> ID：10698823
> 
> 赞同：0
> 
> 时间：2012-05-22T08:59:14.073
> 
> 标签：mobile, tcp, ip

假设我不能依赖用户代理字符串，如果连接的客户端来自移动网络，我可以简单地从 IP 地址判断吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:16:36.860

有某些 IP 范围由其所有者专用于移动网络（我刚刚搜索了[RIM](http://btsc.webapps.blackberry.com/btsc/viewdocument.do?noCount=true&externalId=KB11036&sliceId=2&dialogID=63832630&cmd=displayKC&docType=kc&stateId=1%200%2063826436&ViewedDocsListHelper=com.kanisa.apps.common.BaseViewedDocsListHelperImpl)（黑莓）的地址）。但是，IANA 没有专门用于移动网络的 IP 范围，因此您必须搜索每个可能的提供商的范围。此外，您必须搜索每个移动到网络代理的地址（即，opera mobile 使用的地址）。而且您仍然无法捕获 WiFi 上的客户端，使用私有代理或 VPN...

所以，简而言之，是的，如果客户端在移动网络上，您可以在一定程度上从 IP 地址判断，但这需要很难维护查找数据库，并且您不会捕获所有移动客户端

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:33:11.167

No not really, these adresses are determined by the provider and his ip-pool. If that ISP provides internet via cable then it's up to that provider to divide his ranges over mobile and cabled. You cannot know for sure which ip goes where for that provider.

# objective-c - 在 cocos2d 中使用 CCMenu

> ID：10698824
> 
> 赞同：0
> 
> 时间：2012-05-22T08:59:18.827
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone, ccmenuitem

*嗨，大家好！*
我正在尝试使用**CCMenu**类。我有这个方法：

```
 -(void)showMenuItems {
    CGSize size = [[CCDirector sharedDirector] winSize];
    [CCMenuItemFont setFontSize:28];
    CCMenuItem *runAlertItem = [CCMenuItemFont itemWithString:@"Show Alert" target:self selector:@selector(showAlert)];
    CCMenuItem *showTwitterPageItem = [CCMenuItemFont itemWithString:@"Twitter" target:self selector:@selector(showWebView)];
    CCMenuItem *showApplePageItem = [CCMenuItemFont itemWithString:@"Apple" block:^(id sender) {
        webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 480.0, 320.0)];
        [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http:/www.apple.com"]]];
        [[[CCDirector sharedDirector] view] addSubview:webView];
        [self scheduleOnce:@selector(hideWebView) delay:10];
    }];

    mainMenu = [CCMenu menuWithItems:runAlertItem, showTwitterPageItem, showApplePageItem, nil];
    [mainMenu alignItemsVerticallyWithPadding:10];
    mainMenu.position = CGPointMake(size.width / 2, size.height / 2);
    [self addChild:mainMenu];
} 
```

现在，我想这样调用这个方法：

```
 [self scheduleOnce:@selector(showMenuItems) delay:71]; 
```

不幸的是，菜单没有出现。
**我做错了什么？**

*提前致谢！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:27:10.360

我已经在我的系统中运行了上面的代码，它工作正常。
因为您使用 scheduleOnce 选择器来显示菜单，所以它将在 71 秒后出现。

```
 [self scheduleOnce:@selector(showMenuItems) delay:71]; 
```

# jquery - 获取范围滑块中特定范围之间的数组中的所有值。（jQuery 用户界面）

> ID：10698827
> 
> 赞同：0
> 
> 时间：2012-05-22T08:59:35.253
> 
> 标签：jquery, arrays, jquery-ui-slider

我想在数组中获取用户使用 jquery ui rangeSlider 设置的特定范围之间的所有值。

[http://jqueryui.com/demos/slider/#range](http://jqueryui.com/demos/slider/#range)

```
$(function() {
    $( "#slider-range" ).slider({
        range: true,
        min: 0,
        max: 500,
        values: [ 75, 300 ],
        slide: function( event, ui ) {
            $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
        }
    });
    $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) + " - $" + $( "#slider-range" ).slider( "values", 1 ) );
}); 
```

```
</script>

<div>

    <label for="amount">Price range:</label>
    <input type="text" id="amount" style="border:0; color:#f6931f; font-weight:bold;" />

<div id="slider-range"></div> 
```

所以在这个例子中，当我将范围设置为 75 到 90 并按下提交按钮时，我想得到一个像这样的数组：

```
var myArray = ['75','76', '77', '78', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90'] ; 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:14:39.537

我不确定你为什么需要这个，但这里有一个简单的解决方案来满足你的要求：

```
$('#target').submit(function() {
  var start = $( "#slider-range" ).slider( "values", 0 );
  var end = $( "#slider-range" ).slider( "values", 1 );
  var myArray = range(start, end);
  // do your things here
  return false;
});

function range(start, end) {
  var arr = [];
  for(var i = start; i <= end; i++)
    arr.push(i);
  return arr;
} 
```

# javascript - Asp.Net 应用程序中的 Jquery DataTable 本地化

> ID：10698829
> 
> 赞同：1
> 
> 时间：2012-05-22T08:59:54.443
> 
> 标签：javascript, jquery, asp.net, localization, datatable

我有积极使用 jquery DataTable 组件的 ASP.NET MVC 2 应用程序。很好，但是那里没有本地化支持。通过本地化，我的意思不仅是翻译版本渲染，而且是根据会话中会话对象中设置的当前语言正确翻译 DataTable。如果不设置像 Lang=en-Us 这样的 cookie，我该怎么做？如果翻译文件没有资源也没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-22T15:50:07.137

我可能迟到了，但我给你我的解决方案：

我没有在 DOM 中添加每个资源，而是使用了 ajax 加载选项。为了制作简短的 DataTables，可以将 .json 加载到初始化程序中（包含所有漂亮的、本地化的资源文本）。

所以我实现了一个新的动作来获取 .json ：

```
public JsonResult LocalizedDataTableLanguage()
{
    // Create ressource object.
    var jsonObject = new
    {
        sEmptyTable = Resources.EmptyTable
    };
    // Serialize and send the object resource.
    return Json(jsonObject);
} 
```

然后你只需要将这个方法的 Url 提供给[language.url 选项](http://datatables.net/reference/option/language.url)

希望这可以帮助

## 编辑

[您可以在此处](http://www.datatables.net/plug-ins/i18n/English)检查 DataTables 预期的 json 结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:53:29.103

我在我的 ASP.NET 应用程序中使用服务器端资源文件，这在这种情况下会有所帮助，我使用后面的代码来测试哪种文化，然后在 javascript 端填充公共变量。您可以浏览所有字符串，但请确保您记得在资源文件中包含正确的替换字符串，即。"sInfo": "RAV 显示*TOTAL*条目的*START*到*END "。*这是一个javascript的例子

 *```
var _sEmptyTable = "<%=mstrEmptyTable %>";

jQuery('#example').dataTable(
{
    "oLanguage": {"sEmptyTable": _sEmptyTable}
}); 
```

背后的代码

```
public string mstrEmptyTable = "No data available"; 
```

只需将 mstrEmptyTable 替换为您的会话对象或资源文件。

希望有帮助*

# matlab - 查找单元格向量的唯一值而不对结果进行排序

> ID：10698831
> 
> 赞同：3
> 
> 时间：2012-05-22T09:00:02.790
> 
> 标签：matlab, vector, cell

我有一个字符串向量

```
 x = {'rrr' 'aaa' 'bbb' 'hhh' 'aaa' 'ppp'};
          y = unique(x); 
```

此代码返回唯一值，但对它们进行排序。此代码的输出是

```
 y = {'aaa' 'bbb' 'hhh' 'ppp' 'rrr'} 
```

我希望它返回唯一值，但未排序。我想要的输出是

```
 y =  {'rrr' 'aaa' 'bbb' 'hhh' 'ppp'} 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:09:16.170

您可以使用 的第二个输出参数`unique`，它返回唯一元素的索引。要以原始顺序显示它们，请`sort`在索引原始向量之前对索引向量使用该函数。

```
 x = {'rrr' 'aaa' 'bbb' 'hhh' 'aaa' 'ppp'};
 [y,i] = unique(x);

 x(sort(i)) 
```

输出：

```
ans = 

    'rrr'    'bbb'    'hhh'    'aaa'    'ppp' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T10:29:38.550

最新版本的 MATLAB R2012a 具有额外的`unique`命令选项，可以[完全满足您的需求](http://www.mathworks.com/help/techdoc/rn/bs8f84v-1.html#btah2bc)。对于旧版本，@HMuster 和 @Dan 有很好的答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T09:09:36.530

[这篇博文解释得很好：](http://blogs.mathworks.com/loren/2009/11/26/unique-values-without-rearrangement/)

```
 [X, SortVec] = sort(x);
    %Remove duplicates
    UV(SortVec) = ([1; diff(X)] ~= 0);
    %Resort to be back in original order
    y = B(UV); 
```

# jquery - 尝试为元素找到正确的 jQuery 选择器

> ID：10698834
> 
> 赞同：0
> 
> 时间：2012-05-22T09:00:22.123
> 
> 标签：jquery, ajax

这是我的标记示例：

```
<li class="websites" id="3">
    <span class="id">3</span>
    <span><a href="http://www.google.com"><span class="url">www.google.com</span></a></span>
    <span class="action"><span class="edit">edit</span> | <span class="delete">delete</span></span>
</li> 
```

这是我的 jQuery，我试图`3`通过 ajax 将这个网站的 id () 传递给另一个脚本。

```
$('.delete').click(function(){
        var id = $(this).find('span.id').html();

        $.ajax(
            {
                type:    "POST",
                url:     "edit.php",
                data:    ({"id":id}),
                cache:   false,
                success: function(message)
                {
                    $('#'+message).fadeOut('slow');                 
                } // end AJAX return
            }); // end AJAX call
    }); 
```

当我检查我的 POST 标头时，我可以看到 的值为`id`null 所以显然我尝试设置它的尝试是错误的。

如您所见，我在实际元素中具有 id以及另一个具有相同值的`li`类跨度。`id`

使用哪一个来实现这一功能并不重要。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:03:13.590

```
var id = $(this).closest('li.websites').attr('id'); 
```

Closest 找到`$(this)`与选择器匹配的祖先，在您的情况下，它`li`与类`websites`

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:06:10.713

你可以试试这个选择器

```
var id = $(this).closest('li').attr('id'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T09:08:03.253

经测试，有效。

```
<script type="text/javascript">

    $(document).ready(function(){

        $('.delete').click(function(){

         var id = $(this).parents('li.websites').children('span.id').html();

        });

    });

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:05:31.180

尝试

```
var id = $(this).parent().parent().get(0).id; 
```

# php - 没有图像的表单提交错误

> ID：10698838
> 
> 赞同：0
> 
> 时间：2012-05-22T09:00:49.247
> 
> 标签：php, forms, file-upload

我有一个 html 表单，我用它来上传图片到服务器

```
 <form id="form1" name="form1" method="post" action="testimage.php" enctype="multipart/form-data" >   <table width="1000" border="0">
    <tr>
    <td width="108">ID</td>
    <td width="229">
      <input type="text" name="id" id="id" value="<?php if(isset($_GET['editcat'])){echo $_GET['editcat'] ;}; ?>" tabindex="1" />
   </td>
   <tr>
    <td>Image</td>
    <td>:</td>
    <td><input type="file" name="image" id="image" tabindex="7"  /></td>
    <td>&nbsp;</td>
    </tr>
    <tr>
    <td>User</td>
    <td>:</td>
    <td><input type="text" name="user" id="user" value="<?php echo $user ; ?>" tabindex="8" /></td>
    <td>&nbsp;</td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td><?php if(isset($_GET['editcat'])){ ?> <input name="editcat" type="hidden" value="set" /> <?php }?> </td>
    <td><input type="submit" name="submit" id="submit" value="Add/Edit" tabindex="9" />                        </td>
    <td>&nbsp;</td>
  </tr>
</table> </form> 
```

我通过 php 文件检索此表单数据

```
 <?php session_start();
       $user_name = $_SESSION['username'];
       $user_pass = $_SESSION['password'];
       if ( $user_name == '' ) {
       header('location:login.php');
       exit();
       }
       ?>
       <?php require_once('connection.php');?>
        <?php require_once('function.php');?>
       <?php 
       $err = 0;
       if(!isset($_SESSION['msgback'])){
       $_SESSION['msgback'] = array();
       }else{
   unset($_SESSION['msgback']);
   $_SESSION['msgback'] = array();
       }
       if(isset($_POST['id'])){
   $id = $_POST['id'];
       }else{
   $id = "";
       }if(isset($_POST['user'])){
   $user = $_POST['user'];
       }else{
   $user="";
        }
       if(!empty($_FILES['image'])){
       $name= basename($_FILES['image']['name']); 
       move_uploaded_file($_FILES["image"]                                  ["tmp_name"],"Hants/admin/uploads/fron_sect/$name")or die(mysql_error());   
        }
         ?>
        <?php
        /////          
        if(isset($_POST['editcat'])){
     if($err == 0){
    if($_POST['id'] == ""){ $_SESSION['msgback'][] = "empty id"; }
        if(empty($_SESSION['msgback'])){
        $user_query = "
        UPDATE  
         pro_category 
        SET  
        `image`='$name',
    `update_user`='$user'
    WHERE  
        `id`='$id'";
        $user_result = mysql_query($user_query) or die(mysql_error());
    $_SESSION['msgback'][] = "Product category is updated sucesfully.";
    header('location:product_cat.php');
    }
   } 
    } 

    ////////Inserting a new Iteme////////
    if(!isset($_POST['editcat'])){ echo "editcat not set" ."<br/>";
   if($err == 0){ 
    if($_POST['id'] == "") {    
         $_SESSION['msgback'][] = "empty id";
        }
        if(empty($_SESSION['msgback'])){
          $user_query = "INSERT                            INTO `pro_category` (`section_id`,`category_name`,`description`,`position`,`visible`,`image`,`pro_view`,`update_user`) VALUES('{$secid}','{$catnam}','{$descrptn}','{$pstion}','{$visble}','{$name}','{$proview}','{$user}')
                                ";
$user_result = mysql_query($user_query) or die(mysql_error());
//if(mysql_affected_rows()){
//$_SESSION['user_name'] = $username;
$_SESSION['msgback'][] = "Successfuly Added";
header('location:product_cat.php');
                    //}
                }else{
                $_SESSION['msgback'][] = "Not Successfuly Added";
                    header('location:product_cat.php');
                //redirect_to("product.php?msgback=msgerr");
                    }
    }
}
?> 
```

当我选择要上传的图像时，此代码运行良好。但在某些情况下，我不需要上传图片，但表单字段的其余部分必须上传到服务器。当我尝试在不选择图像的情况下提交表单时，它向我显示一个空白页面并且没有任何反应。我无法弄清楚错误在哪里。如果有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:05:53.470

更新您的代码以添加此检查以查看文件是否实际上传：

```
if ($_FILES['image']['error'] == UPLOAD_ERR_OK) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:08:31.927

您的问题可能出`if(!empty($_FILES['image'])){`在您所说的上传图片时效果很好，但是当您不上传图片时会收到一个空白页面。

`print_r($_FILES['image])`当您不上传图像并查看正在发送的内容时，我会这样做。我怀疑你`empty()`还在捡东西，也许是一个数组。

也按照建议做 davidethell。

# syntax - Haskell-表达式上下文中的模式语法：_

> ID：10698839
> 
> 赞同：5
> 
> 时间：2012-05-22T08:55:48.273
> 
> 标签：syntax, haskell

我一直在学习一些 Haskell 并编写非常简单的程序。我想做一个函数来返回给定位置的元素。这就是我试图做的 -

```
elempos::Int->[a]->a
elempos n (b:_)=head (drop n (b:_) ) 
```

但是当我在 GHCi 编辑器中加载 Test.hs 文件时出现此错误。

```
Pattern syntax in expression context: _ 
```

它说失败，加载模块：无。因为我对这门语言很陌生，所以我真的不知道错误是什么（目前在第 4 章学习你的 Haskell）。谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T09:03:37.670

`_`仅在模式内部有效，您试图在表达式中使用它：`head (drop n (b : _))`。由于您实际上并不需要分解列表，并且确实需要尾部，因此解决方案是：

```
elempos n xs = head (drop n xs) 
```

# javascript - 从日历jquery获取日期

> ID：10698842
> 
> 赞同：3
> 
> 时间：2012-05-22T09:01:10.680
> 
> 标签：javascript, jquery

我试图用 jquery 从两个日历中获取两个日期
我该怎么做。
编码 ：

```
 <div id="checklinkform" data-role="fieldcontain">
                    <label for="checkin">Date début :</label></td>
                         <input name="checkin" id="checkin" data-role="datebox" type="date" data-mini="true"
                                 data-options='{"closeCallback":"linkedCheckin", "noButton": false, "closeCallbackArgs":["checkin"], "mode": "calbox", "focusMode": true, "centerWindow": true, "afterToday": false, "beforeToday":true}'>

                        <input name="checkin_monthday" type="hidden" size="2" id="checkin_monthday" data-mini="true"/>
                        <input name="checkin_year_month" type="hidden" size="7" id="checkin_year_month" data-mini="true"/>

                    <label for="checkout">Date fin :</label></td>   
                        <input name="checkout" id="checkout" data-role="datebox" type="date" data-mini="true"
                                data-options='{"calHighToday":false, "closeCallback":"linkedCheckin", "noButton": false, "closeCallbackArgs":["checkout"], "mode": "calbox", "focusMode": true, "centerWindow": true}'>

                       <input name="checkout_monthday" type="hidden" size="2" id="checkout_monthday" data-mini="true"/>
                       <input name="checkout_year_month" type="hidden" size="7" id="checkout_year_month" data-mini="true"/>

             </div> 
```

编辑。

这是我使用的 cheklinkform 函数：

```
linkedCheckin = function (date, name) {
    // The widget itself
var self     = this,
    // The day after whatever just got set
      nextday  = date.copymod([0,0,1]);
    // Today
    today    = new Date();
    // The difference of today and whatever got set (secs)
    diff     = parseInt((date - today) / ( 1000 * 60 * 60 * 24 ),10);
    // The same difference, in days (+2)
    diffstrt = (diff * -1)-2;

// Lets fill in the other fields.
$('#'+name+'_year_month').val(self._formatter('%Y-%m', date));
$('#'+name+'_monthday').val(self._formatter('%d', date));
// Update the seen output
$('#checkoutput').text($('#checklinkform input').serialize());

// If we edited the checkin date, more work to do
if ( name === "checkin" ) {
  // Ok, so in steps: (nuke the comments)
  // Set the (internal) checkout date to be whatever was picking in checkin +1 day
  $('#checkout').data('datebox').theDate = nextday;
  // Show that to the user
  $('#checkout').trigger('datebox', {'method':'doset'});
  // Make sure that minDays won't let them check out same day or earlier
  $('#checkout').datebox({"minDays": diffstrt});
  // Open it up
  $('#checkout').datebox('open');
}
} 
```

我想获得 2 日期以使用另一个功能发送它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:14:39.117

[**演示**是你要找的东西让我知道 - 点击这里](http://jsfiddle.net/AXrsH/2/)

如果这不对，请发表评论，我将删除我的帖子。

**更新**

**代码**

```
alert(" Date Check in: " + $("#checkin").val());
    alert(" Date Check out: " + $("#checkout").val()); 
```

# installshield-2011 - 本地化 installshield 中的快捷菜单

> ID：10698844
> 
> 赞同：0
> 
> 时间：2012-05-22T09:01:20.283
> 
> 标签：installshield-2011

我有快捷程序菜单 --> 公司名称 --> 产品名称。我的要求是当区域设置语言（操作系统）为日语时，产品名称应本地化。这在 Install shield 2011 中怎么可能？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:48:53.613

Windows Installer 仅支持以两种方式本地化快捷方式名称。一种是通过语言转换，然后将安装期间选择的语言反映为快捷方式的唯一名称；这适用于所有版本的 Windows Installer，但仅适用于 Premier 版本的 InstallShield。

另一种是通过 MUI 属性。通过设置快捷方式的显示资源设置以引用多语言资源 dll，名称会更新以匹配用户的首选语言。此方法仅适用于装有 Windows 安装程序 4.0 或更高版本的计算机。

# cordova - 如何在一页上插入两个iscroll

> ID：10698848
> 
> 赞同：1
> 
> 时间：2012-05-22T09:01:30.330
> 
> 标签：cordova, scroll, iscroll

如何在一个 html 页面的独立分区中插入两个 iscrolls？

有两个部门，如

```
<div> 
    <div> 
       some text and images
    </div>
    <div>
       some other text and images
    </div>
</div> 
```

每个部门应独立滚动

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:35:54.893

```
<div id="wrapper1">
    <div id="scroller1">
        /* scrollable content */
    </div>
</div>
<div id="wrapper2">
    <div id="scroller2">
        /* another scrollable content */
    </div>
</div>
<script>
    var myScroll1 = new iScroll('wrapper1');
    var myScroll2 = new iScroll('wrapper2');
</script> 
```

[在这里](http://jsfiddle.net/ranganadh/2Hw6r/1/)查看演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:34:11.597

感谢帮助。我也找到了答案。。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0,      minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>iScroll demo: Use transition</title>

<script type="text/javascript" src="../../src/iscroll.js"></script>

<script type="text/javascript">

var scroll1, scroll2;
function loaded() {
    scroll1 = new iScroll('standard');
    scroll2 = new iScroll('transition', { useTransition:true });
}

document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
document.addEventListener('DOMContentLoaded', loaded, false);

    </script>

<style type="text/css" media="all">
ul,li {
    padding:0;
    margin:0;
    border:0;
}

body {
    font-size:12px;
    -webkit-user-select:none;
    -webkit-text-size-adjust:none;
    font-family:helvetica;
    padding:20px;
}

#standard, #transition {
    position:relative; z-index:1;
    display:block; float:left;
    width:300px; height:400px;
    background:#aaa;
overflow:auto;
border:1px solid #aaa;
}

#standard {
margin-right:20px;
}

.scroller {
position:absolute; z-index:1;
/*  -webkit-touch-callout:none;*/
-webkit-tap-highlight-color:rgba(0,0,0,0);
width:100%;
padding:0;
}

.scroller ul {
list-style:none;
padding:0;
margin:0;
width:100%;
text-align:left;
}

.scroller li {
padding:0 10px;
height:40px;
line-height:40px;
border-bottom:1px solid #ccc;
border-top:1px solid #fff;
background-color:#fafafa;
font-size:14px;
}

#myFrame {
position:absolute;
top:0; left:0;
}

</style>
</head>
<body>
<h1>Open this page on iPad to test the difference between standard iScroll and iScroll in "transition mode"</h1>

<div id="standard">
<div class="scroller">
    <ul>
        <li><strong>Standard iScroll</strong></li>
        <li>Pretty row 2</li>
        <li>Pretty row 3</li>
        <li>Pretty row 4</li>
        <li>Pretty row 5</li>
        <li>Pretty row 6</li>
        <li>Pretty row 7</li>
        <li>Pretty row 8</li>
        <li>Pretty row 9</li>
        <li>Pretty row 10</li>
        <li><strong>Standard iScroll</strong></li>
        <li>Pretty row 12</li>
        <li>Pretty row 13</li>
        <li>Pretty row 14</li>
        <li>Pretty row 15</li>
        <li>Pretty row 16</li>
        <li>Pretty row 17</li>
        <li>Pretty row 18</li>
        <li>Pretty row 19</li>
        <li>Pretty row 20</li>
        <li><strong>Standard iScroll</strong></li>
        <li>Pretty row 22</li>
        <li>Pretty row 23</li>
        <li>Pretty row 24</li>
        <li>Pretty row 25</li>
        <li>Pretty row 26</li>
        <li>Pretty row 27</li>
        <li>Pretty row 28</li>
        <li>Pretty row 29</li>
        <li>Pretty row 30</li>
        <li><strong>Standard iScroll</strong></li>
        <li>Pretty row 32</li>
        <li>Pretty row 33</li>
        <li>Pretty row 34</li>
        <li>Pretty row 35</li>
        <li>Pretty row 36</li>
        <li>Pretty row 37</li>
        <li>Pretty row 38</li>
        <li>Pretty row 39</li>
        <li>Pretty row 40</li>
    </ul>
</div>
</div>

<div id="transition">
<div class="scroller">
    <ul>
        <li><strong>Transition mode</strong></li>
        <li>Pretty row 2</li>
        <li>Pretty row 3</li>
        <li>Pretty row 4</li>
        <li>Pretty row 5</li>
        <li>Pretty row 6</li>
        <li>Pretty row 7</li>
        <li>Pretty row 8</li>
        <li>Pretty row 9</li>
        <li>Pretty row 10</li>
        <li><strong>Transition mode</strong></li>
        <li>Pretty row 12</li>
        <li>Pretty row 13</li>
        <li>Pretty row 14</li>
        <li>Pretty row 15</li>
        <li>Pretty row 16</li>
        <li>Pretty row 17</li>
        <li>Pretty row 18</li>
        <li>Pretty row 19</li>
        <li>Pretty row 20</li>
        <li><strong>Transition mode</strong></li>
        <li>Pretty row 22</li>
        <li>Pretty row 23</li>
        <li>Pretty row 24</li>
        <li>Pretty row 25</li>
        <li>Pretty row 26</li>
        <li>Pretty row 27</li>
        <li>Pretty row 28</li>
        <li>Pretty row 29</li>
        <li>Pretty row 30</li>
        <li><strong>Transition mode</strong></li>
        <li>Pretty row 32</li>
        <li>Pretty row 33</li>
        <li>Pretty row 34</li>
        <li>Pretty row 35</li>
        <li>Pretty row 36</li>
        <li>Pretty row 37</li>
        <li>Pretty row 38</li>
        <li>Pretty row 39</li>
        <li>Pretty row 40</li>
    </ul>
</div>
</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T20:00:12.750

对于 user1409743 来说可能有点晚了，但对于所有其他人来说：这是我的工作解决方案。

注意：这仅在 iScroll5 中进行了测试，但可能仅适用于 iScroll4。

myScroll 将定义为一个数组，所有的 iscroller 都会获得一个类似 ID 的属性，该属性通过索引自增来枚举。

我在带有几个子菜单的移动页面菜单上使用它，如果需要，所有这些都可以单独滚动，就像一个魅力。它也有效，当 ajax 添加更多滚动条时，只需回忆`iscroll_load();`一下

```
$.ajax({
    complete: function(){
        iscroll_load();
    }
}); 
```

或类似，根据我的经验，最好有一个小的超时。这就是我使用它的方式。新的 myScroll 事件仅适用于新的 iscroll-container，它还没有 scroller 属性。

```
$(document).ajaxComplete(function(){
    setTimeout(function(){
        iscroll_load();
    },100);
}); 
```

HTML 是

```
<ul id="menus">
    <li class="iscroller menu">
        <ul class="scroller">
        ... some li content here ...
        </ul>
    </li>
    <li class="iscroller menu">
        <ul class="scroller">
        ... some li content here ...
        </ul>
    </li>
</ul 
```

JS是

```
var iscroll_load = function () {
    var myScroll = new Array();
    var iscroller = $('.iscroller');
    iscroller.each(function(index){
        var el = $(this);
        if (!el.is('[scroller]')) {
            el.attr('scroller',index);
            myScroll[index] = new IScroll('[scroller="'+index+'"]',{ 
                mouseWheel: true
                /*
                ... other options...
                */
            });
        }
    });
}; 
```

# android - 动态设置布局

> ID：10698850
> 
> 赞同：0
> 
> 时间：2012-05-22T09:01:33.387
> 
> 标签：android, android-layout

我想在添加按钮单击和动态布局上动态添加布局显示日期选择器，时间选择器对话框并在给定的编辑文本中设置值。在日期图像中显示单击设置日期右侧。这里的问题在添加第二个相同布局时开始并设置它仅在新创建的布局上设置的日期

![一世](../Images/50f14af5053fab99a45c10de5c85a4a3.png)

![在此处输入图像描述](../Images/478b979ddc0f77a901bbe600649483e4.png)

![在此处输入图像描述](../Images/3564fffaaf44f4c3f4f4a71f5b8bf715.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:09:48.277

例如，您需要创建带有 ScrollView 和 LinearView 的 xml 布局文件。然后在您的活动课程中：

```
 LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View main = inflater.inflate(R.layout.your_layout, null);
   setContentView(main);

   LinearLayout linear = (LinearLayout)main.findViewById(R.id.linear_layout); 
```

然后在 onClick 方法中：

```
View yourView = inflater.inflate(R.layout.yourView, null);
// Do whatever you want with your View, set up some variables etc. 
```

并将您的视图添加到主视图：

```
linear.addView(yourView); 
```

我知道这不是您问题的直接答案，但可能会帮助您动态添加视图。

# python - SQLAlchemy 中与多个父级的通用关联

> ID：10698852
> 
> 赞同：3
> 
> 时间：2012-05-22T09:01:35.127
> 
> 标签：python, sqlalchemy

我试图了解SQLAlchemy 附带的“[关联鉴别](http://techspot.zzzeek.org/files/2007/discriminator_on_association.py)`addresses`器”示例，该示例定义了 HasAddresses mixin，因此每个模型子类化 HasAddresses 都会神奇地获得一个属性，该属性是可以添加 Address 对象的集合。链接是通过一个中间表执行的，所以乍一看关系看起来像是多对多的，我希望能够将多个地址链接到一个客户，并且多个客户和供应商也链接到一个地址。

但是，该`Address`模型的设置方式是它具有一个`parent`只能引用单个对象的属性。因此，在示例中，地址只能链接到单个客户或供应商。

如何修改该示例，以便 Address 能够反向引用多个父对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T15:37:56.917

我们可以修改 sqlalchemy/examples/generic_associations/table_per_association.py 以将一个命名的反向引用添加到地址，然后是一个 @property，它汇总了所有创建的反向引用。

```
"""table_per_association.py

The HasAddresses mixin will provide a new "address_association" table for
each parent class.   The "address" table will be shared
for all parents.

This configuration has the advantage that all Address
rows are in one table, so that the definition of "Address"
can be maintained in one place.   The association table 
contains the foreign key to Address so that Address
has no dependency on the system.

"""
from sqlalchemy.ext.declarative import declarative_base, declared_attr
from sqlalchemy import create_engine, Integer, Column, \
                    String, ForeignKey, Table
from sqlalchemy.orm import Session, relationship
import itertools

class Base(object):
    """Base class which provides automated table name
    and surrogate primary key column.

    """
    @declared_attr
    def __tablename__(cls):
        return cls.__name__.lower()
    id = Column(Integer, primary_key=True)
Base = declarative_base(cls=Base)

class Address(Base):
    """The Address class.   

    This represents all address records in a 
    single table.

    """
    street = Column(String)
    city = Column(String)
    zip = Column(String)

    @property
    def all_owners(self):
        return list(
            itertools.chain(
            *[
                getattr(self, attr)
                for attr in [a for a in dir(self) if a.endswith("_parents")]
            ]
        ))

    def __repr__(self):
        return "%s(street=%r, city=%r, zip=%r)" % \
            (self.__class__.__name__, self.street, 
            self.city, self.zip)

class HasAddresses(object):
    """HasAddresses mixin, creates a new address_association
    table for each parent.

    """
    @declared_attr
    def addresses(cls):
        address_association = Table(
            "%s_addresses" % cls.__tablename__,
            cls.metadata,
            Column("address_id", ForeignKey("address.id"), 
                                primary_key=True),
            Column("%s_id" % cls.__tablename__, 
                                ForeignKey("%s.id" % cls.__tablename__), 
                                primary_key=True),
        )
        return relationship(Address, secondary=address_association, 
                    backref="%s_parents" % cls.__name__.lower())

class Customer(HasAddresses, Base):
    name = Column(String)

class Supplier(HasAddresses, Base):
    company_name = Column(String)

engine = create_engine('sqlite://', echo=True)
Base.metadata.create_all(engine)

session = Session(engine)

a1 = Address(
            street='123 anywhere street',
            city="New York",
            zip="10110")
a2 = Address(
            street='40 main street',
            city="San Francisco",
            zip="95732")

session.add_all([
    Customer(
        name='customer 1', 
        addresses=[a1, a2]
    ),
    Supplier(
        company_name="Ace Hammers",
        addresses=[a1]
    ),
])

session.commit()

for customer in session.query(Customer):
    for address in customer.addresses:
        print address.all_owners 
```

# python - 从python中的文件名中提取和排序数字

> ID：10698854
> 
> 赞同：0
> 
> 时间：2012-05-22T09:01:54.767
> 
> 标签：python, numbers, extract

我有一个非常基本的问题。我有名为 like 的文件`Dipole_E0=1.2625E-01.dat`，我想提取该`1.2625E-01`部分，最后按升序对它们进行排序。如何才能做到这一点 ？我首先尝试使用 .split() 拆分文件名，但这不是我所期望的。谢谢你的帮助。

最好的

罗兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:11:07.590

最好的方法是使用正则表达式。从文件名中获取值：

```
m = re.search(filename, '^Dipole_E0=(.*)/s?')
val = m.group(0) 
```

遍历所有 dilenames 并将所有值附加到数组。在那之后，就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T09:12:49.243

您想研究正则表达式。在 python 中，它们位于 re 模块中。根据确切的格式，例如：

```
import re
ematch = re.compile("=([0-9]*\.[0-9]*[eE][+-][0-9]+)")
val = ematch.search(filename).group(0) 
```

可以使用列表上的 .sort() 方法或内置的 sorted(list) 对列表进行排序，它会为您提供一个新列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:08:43.550

您可以使用 glob 模块获取文件名。

```
 from glob import glob
    file_names = glob("yourpath/*.dat")

    vals = []
    for name in file_names:
         vals.append(float(name[:-4].rpartition("=")[2]))

    vals.sort() 
```

name[:-4] 丢弃“.dat”。rpartition 是一个字符串方法。它返回一个元组，其中条目 0 是用于拆分的字符串左侧的字符串，条目 1 是用于拆分的字符串（此处：“=”），条目 2 是该字符串右侧的字符串（此处：您的浮点数）。然后将其转换为浮点数并附加到值列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:13:59.653

这是使用[生成器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)和[内置函数](http://docs.python.org/library/functions.html#sorted)[的`sorted`](http://docs.python.org/library/functions.html#sorted)好情况：

```
sorted(float(filename.split("=", 1)[1].rsplit(".", 1)[0]) for filename in filenames) 
```

您的文件名列表在哪里`filenames`。

```
>>> filenames = ["Dipole_E0=1.2625E-01.dat", "Dipole_E0=1.3625E-01.dat", "Dipole_E0=0.2625E-01.dat"]
>>> sorted(float(filename.split("=", 1)[1].rsplit(".", 1)[0]) for filename in filenames)
[0.02625, 0.12625, 0.13625] 
```

# jquery - jQuery子函数没有结果

> ID：10698855
> 
> 赞同：0
> 
> 时间：2012-05-22T09:01:57.157
> 
> 标签：jquery, html

我想要达到的是使用 jQuery 生成动态文本框，因此，jQuery 代码：

```
var num = $('.question-container-1').length;
var newNum = new Number(num + 1); 

var newElem = $('#question-container-' + num).clone().attr('id', 'question-container-' + newNum);            
newElem.children('input[type=text]').val('');

$('#question-container-' + num).after(newElem); 
```

和html代码：

```
<fieldset id="question-container-1" class="question-container-1">
    <div class="control-group">
        <label class="control-label" for="input01">Întrebare</label>
        <div class="controls">
            <input type="text" name="question" id="question-box" value=""/>
        </div>
    </div>
</fieldset>

<fieldset>
    <div class="control-group">
        <div class="controls">
            <a href="#" id="add-question-1" class="add-question-1">Adaugă întrebare</a>
            <a href="#" id="delete-question-1" class="delete-question-1" style="margin-left: 20px;">Șterge întrebare</a>
        </div>
    </div>
</fieldset> 
```

毕竟，一切都很完美，除了一件事，它们是最后一个文本字段的克隆，但我也不想复制它的值，你怎么能看到我尝试使用子函数来查找文本字段，但是它不删除值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:04:24.270

`.children()`仅向下一层后代工作。相反，您想要`.find()`，它一直到最后一个，最远的后代。:D

# jasper-reports - 如何在 Jasper Reports 中强制分页 beetwen 记录？

> ID：10698857
> 
> 赞同：2
> 
> 时间：2012-05-22T09:02:05.123
> 
> 标签：jasper-reports

我需要在数据源的每条记录后强制分页。我试过了`<break type="Page">`，但没有用。怎么做 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T05:44:34.987

我是这样做的`<group>`：

```
<group name="record" isStartNewPage="true">
    <groupExpression><![CDATA[$V{REPORT_COUNT}]]></groupExpression>
</group> 
```

# python - 内置范围或 numpy.arange：哪个更有效？

> ID：10698858
> 
> 赞同：74
> 
> 时间：2012-05-22T09:02:05.640
> 
> 标签：python, numpy, python-3.x, range

在使用范围表达式迭代大型数组时，我应该使用 Python 的内置`range`函数还是 numpy 的函数`arange`来获得最佳性能？

到目前为止我的推理：

`range`可能诉诸本机实现，因此可能更快。另一方面，`arange`返回一个完整的数组，它占用内存，因此可能会有开销。Python 3 的范围表达式是一个生成器，它不会保存内存中的所有值。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-22T20:23:16.343

对于大型数组，向量化的 numpy 操作是最快的。如果必须循环，请首选`xrange`/`range`并避免使用`np.arange`.

在 numpy 中，您应该使用矢量化计算、[ufunc](http://docs.scipy.org/doc/numpy/reference/ufuncs.html)和[索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)的组合来解决您的问题，因为它正在`C`快速运行。与此相比，循环遍历 numpy 数组效率低下。

`range`（您可以做的最`np.arange`糟糕的事情就是使用创建的索引遍历数组

```
import numpy as np
import sys

sys.version
# out: '2.7.3rc2 (default, Mar 22 2012, 04:35:15) \n[GCC 4.6.3]'
np.version.version
# out: '1.6.2'

size = int(1E6)

%timeit for x in range(size): x ** 2
# out: 10 loops, best of 3: 136 ms per loop

%timeit for x in xrange(size): x ** 2
# out: 10 loops, best of 3: 88.9 ms per loop

# avoid this
%timeit for x in np.arange(size): x ** 2
#out: 1 loops, best of 3: 1.16 s per loop

# use this
%timeit np.arange(size) ** 2
#out: 100 loops, best of 3: 19.5 ms per loop 
```

`xrange`因此，对于这种情况，如果操作正确，numpy 比使用快 4 倍。根据您的问题，numpy 的速度可能比 4 或 5 倍快得多。

[这个问题](https://stackoverflow.com/q/993984/1301710)的答案解释了使用 numpy 数组而不是 python 列表来处理大型数据集的更多优势。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-22T09:52:05.347

首先，正如@bmu 所写，*您应该使用矢量化计算、ufuncs 和 indexing 的组合*。确实在某些情况下需要显式循环，但这种情况确实很少见。

如果需要显式循环，使用 python 2.6 和 2.7，您应该使用*xrange*（见下文）。从您所说的来看，在 Python 3 中，*range与**xrange*相同（返回一个生成器）。所以也许*范围*对你有好处。

现在，您应该自己尝试一下（使用 timeit: - 这里是 ipython“魔术函数”）：

```
%timeit for i in range(1000000): pass
[out] 10 loops, best of 3: 63.6 ms per loop

%timeit for i in np.arange(1000000): pass
[out] 10 loops, best of 3: 158 ms per loop

%timeit for i in xrange(1000000): pass
[out] 10 loops, best of 3: 23.4 ms per loop 
```

同样，如上所述，大多数时候可以使用运行 ac speed: **much faster**的 numpy 向量/数组公式（或 ufunc 等） 。这就是我们所说的“向量编程”。它使程序比 C 更容易实现（并且更具可读性），但最终几乎一样快。

# build - 如何使用 cmake 组织库功能

> ID：10698859
> 
> 赞同：0
> 
> 时间：2012-05-22T09:02:06.383
> 
> 标签：build, cmake

在一个项目中，有很多库：

*   库之间存在依赖关系。
*   每个库都有一些功能可以在构建时启用/禁用。
*   一个库功能可能依赖于另一个库的指定功能。

问题：

1.  如何使用 cmake 来组织这种基于特征的依赖。
2.  如何使用不同的功能列表配置不同的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:30:08.470

使用[带有 CACHE 关键字](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3aset)命令的[option()](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3aoption)和set() 来定义构建选项。

用于`if(OPTION_NAME)`测试期权价值。在 if 块内部使用`add_dependencies()`以使其中一些是可选的。

使用[configure_file()](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3aconfigure_file)将模板文件（例如配置 headerm）替换为选项的值。

# javascript - 加载外部页面时运行 javascript 以在 Firefox 中对其进行操作

> ID：10698863
> 
> 赞同：0
> 
> 时间：2012-05-22T09:02:41.207
> 
> 标签：javascript, jquery, firefox, firefox-addon

我想调整一些我经常使用 javascript + jquery 访问的页面。例如，我想在页面上隐藏一个块并放大另一个块。我需要存储脚本并让它在每次访问指定地址时自动运行。

Firefox 中是否有任何方法/扩展可以启用这种 javascript 执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:10:06.433

你可以试试非常流行的greasemonkey扩展： [Greasemonkey](https://addons.mozilla.org/en/firefox/addon/greasemonkey/)

# ms-word - 从 C# 写入只读文件

> ID：10698865
> 
> 赞同：0
> 
> 时间：2012-05-22T09:03:01.083
> 
> 标签：ms-word, c#-2.0, file-permissions

我有 Word 加载项，它不断更新“C:\program files\microsoft office\”中的“winword.exe.config.xml”文件。

我需要对此文件进行更改，在运行 MS Word 时更新一些参数。

当用户为“管理员”时，文件中的更改已成功更新，没有任何问题。

如果是非管理员帐户（他们没有文件权限），则不会反映更改，因为没有写入权限。

有什么方法我可以从非管理员帐户的 C# 代码成功写入这些文件，而不要求用户更改文件的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T09:12:26.073

如果您可以控制加载项，那么您只需为配置文件选择不同的位置。标准用户具有写入权限的位置。

如果您无法控制加载项，那么您有两个可行的选择：

1.  始终以管理员身份运行 Word。
2.  将 ACL 添加到配置文件以授予标准用户写入权限。

你问：

> 有没有什么方法可以从非管理员帐户的 C# 代码中成功写入这些文件，而无需要求用户更改文件的权限。

不，那里没有。想象一下，如果有办法做到这一点。这将完全否定文件系统安全的实用性。

# java - 导航后未呈现 JSF 标记

> ID：10698869
> 
> 赞同：1
> 
> 时间：2012-05-22T09:03:04.440
> 
> 标签：java, jsf, tags, navigation

我实际上是在尝试使用 JSF 做一个 Web 应用程序，但我在 Web 浏览器中的渲染存在一些问题。

这是上下文：

我有一个正确显示 JSF 标记的 index.xhtml 页面，我想通过一个简单的超链接导航到另一个页面。

```
<h:outputLink  value="/Advisor/AddClient.xhtml">
       <h:outputText value="Add a client" />   </h:outputLink> 
```

但是，AddClient 页面并没有按应有的方式显示 JSF 标记的结果。

这是 addclient 文件：

```
<html xmlns="http://www.w3.org/1999/xhtml"      
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    </head>
    <h:body>
    <ui:composition template="template.xhtml">
        <script type="text/javascript">
            <!-- a validation script used in py page -->
        </script>

        <h:panelGroup layout="block" rendered="#{loginBean.isLogged}">
            <h:form id="formu" onsubmit="return validation()">
                <table>
                    <tr>
                        <td>
                            First name :
                        </td>
                        <td>
                            <h:inputText id="txtFName" value="#{clientCreationBean.fname}"/>                            
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Last name :
                        </td>
                        <td>
                            <h:inputText id="txtLName" value="#{clientCreationBean.lname}"/>                           
                        </td>
                    </tr>
                    <tr>
                        <td>
                            E-Mail :
                        </td>
                        <td>
                            <h:inputText id="txtEmail" value="#{clientCreationBean.email}"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Address :
                        </td>
                        <td>
                             <h:inputText id="txtAddress" value="#{clientCreationBean.address}"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Zip code :
                        </td>
                        <td>
                            <h:inputText id="txtZip" value="#{clientCreationBean.zip}"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            City :
                        </td>
                        <td>
                            <h:inputText id="txtCity" value="#{clientCreationBean.city}"/>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Phone :
                        </td>
                        <td>
                            <h:inputText id="txtPhone" value="#{clientCreationBean.phone}"/>
                        </td>
                    </tr>
                </table>
                <h:commandButton action="#{clientCreationBean.CreateClient()}" value="Ajouter"/>
            </h:form>
          </h:panelGroup>

    </ui:composition>
    </h:body>
</html> 
```

这是我的 web.xml ：

```
 <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>   
    </context-param>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list> 
```

知道为什么 JSF 没有在我的其他页面中解释吗？

**更新 ：**

我让 AddClient 像这样工作：

```
 <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
 </servlet-mapping> 
```

将 AddClient.xhtml 移动到与 Index.xhtml 相同的文件夹（不再位于“顾问”文件夹中），并将我的链接更改为：

```
<h:outputLink  value="AddClient.xhtml">
    <h:outputText value="Ajouter un client" />
 </h:outputLink> 
```

但是，当我让 Advisor 文件夹中的页面带有指向 /Advisor/AddClient.xhtml 的链接时，它不起作用。为什么？

谢谢，

风筝

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:08:45.650

您的链接与 faces servlet 映射不匹配：

```
<h:outputLink  value="/Advisor/AddClient.xhtml"> 
```

将不匹配模式：

```
/faces/* 
```

这就是为什么不调用 FacesServlet 并且不处理您的 JSF 标记的原因。

您可以将链接更改为：

```
<h:outputLink  value="/faces/Advisor/AddClient.xhtml"> 
```

或者更好地在*web.xml*中使用 .xhtml 后缀映射：

```
 <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
 </servlet-mapping> 
```

# java - 通过 UDP 套接字的 Unicode 字符串

> ID：10698870
> 
> 赞同：0
> 
> 时间：2012-05-22T09:03:05.660
> 
> 标签：java, sockets, udp

我想通过 udp 套接字发送和接收数据（unicode utf-8 字符串，`DatagramSocket`。我一直在寻找答案，但只能找到使用`InputStream`和类似的 TCP 传输的解决方案。

UDP有类似的方法吗？

**UDP客户端**

```
package testsocket;

import java.io.IOException;
import java.net.*;

public class TestSocketSender {

    private DatagramSocket sock;

    public static void main(String[] args) {
        new TestSocketSender();
    }

    public TestSocketSender(){
        try {
            sock = new DatagramSocket();//, Inet4Address.getLocalHost());
            sendData("Hello World\u00A9");
        } catch (SocketException ex) {
            ex.printStackTrace();
        } catch(IOException e){
            e.printStackTrace();
        }
    }

    private void sendData(String data) throws IOException{
        DatagramPacket datagram = new DatagramPacket(data.getBytes("utf-8"), data.length(), InetAddress.getLocalHost(), 5060);
        sock.send(datagram);
    }
} 
```

**UDP 服务器**

```
package testsocket;

import java.io.IOException;
import java.net.*;

public class TestSocketListerner {

    private DatagramSocket sock;

    public static void main(String[] args) {
        new TestSocketListerner();
    }

    public TestSocketListerner(){
        try {
            sock = new DatagramSocket(5060);//, Inet4Address.getLocalHost());
            while(true){
                System.out.println(recvData());
            }
            } catch (SocketException ex) {
            ex.printStackTrace();
        } catch(IOException e){
            e.printStackTrace();
        }
    }

    private String recvData() throws IOException{
        byte[] data = new byte[100];
        DatagramPacket datagram = new DatagramPacket(data , data.length);
        sock.receive(datagram);
        return new String(datagram.getData(),datagram.getOffset(),datagram.getLength(),"utf-8");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:14:11.347

UDP 是一种基于数据报的协议。这意味着您只能发送固定数量的数据，而对所交付的数据没有任何保证。数据包可能会丢失，内部数据可能会损坏，因为即使 CRC 在 UDP 中也不是强制性的，甚至更糟 - 由于数据包沿途有多个路由器，您发送的数据包可能会在接收端重新排序。

使用 UDP 通道实现看起来像 Stream 的东西并非易事，但肯定是可能的。您必须将数据分成小部分（系统的 MTU），将它们与一些恢复信息一起打包，为每个数据包分配序列号，并提供一些机制来重新请求在途中丢失的数据包。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T09:17:13.187

先发长度。

让您的发件人先打包字节，然后发送长度，然后发送字符串。我建议你把它打包成四个字节。

让您的阅读器读取 4 个字节，然后重建长度，然后读取字符串。

然后您可以处理数据未到达和超时等问题......

# php - mySQL 语法问题

> ID：10698871
> 
> 赞同：2
> 
> 时间：2012-05-22T09:03:06.017
> 
> 标签：php, mysql, syntax

我遇到了 SQL 问题。

**此 SQL 语句：**

> SELECT * from chat WHERE id=16

**输出：**

> 数组（[id] => 16 [from] => 5 [to] => 6 [message] => Example Message [time] => 1337674546）

**以下 SQL 语句：**

> SELECT * from chat WHERE from=5

**输出错误：**

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“from=5”附近使用正确的语法

如您所见，第二条语句应该返回相同的结果，但事实并非如此。

我正在使用新安装的 XAMPP，其中包括：
Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1
MySQL 客户端版本：mysqlnd 5.0 .8-dev - 20102224 - $修订版：310735 $

似乎我在这里遗漏了一些明显的东西，但我无法弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:05:13.037

将第二个查询更改为：

```
SELECT * from chat WHERE `from`=5 
```

from 是一个保留关键字，您应该始终避免使用或至少使用引号来使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:11:15.823

与`form`MY SQL 中的保留关键字一样，您需要使用***反引号***来转义。

```
 SELECT * FROM chat WHERE `from`=5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:05:23.393

`from`是 MySQL 中的关键字，因此您需要对关键字进行转义。因此，MySQL 可以将其视为列名。使用 `` 转义关键字。

你可以试试这个。

```
SELECT * from chat WHERE `from`=5; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:05:58.650

当您使用该单词`from`作为字段名称时，您需要在反引号中对其进行转义，因为它是一个保留字。

这是整个 SQL 转义和大写：

```
SELECT * FROM `chat` WHERE `from` = 5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T09:09:12.270

```
SELECT * FROM `chat` WHERE `from`='5' 
```

# javascript - 使用从作为“数据”传递的数据派生的数据制作 jqgrid 填充列

> ID：10698873
> 
> 赞同：0
> 
> 时间：2012-05-22T09:03:10.120
> 
> 标签：javascript, jquery, jqgrid

我正在使用本地数据类型制作 jqgrid - 从服务器返回的 json 数组。

```
jQuery("#my_table").jqGrid(
                        { datatype: "local", 
                          colNames: ['ID', 'Name','Status', 'Date'],
                          colModel:[ {name:'id',index:'id', width:50, sorttype:"int"}, 
                                     {name:'name',index:'name', sorttype:"string"}, 
                                     {name:'status',index:'status', width:50, sorttype:"string"}, 
                                     {name:'date',index:'date', width:120, align:"left",sorttype:"date"} ], 
                          data: result,
                          ...}); 
```

但是，其中一列 - 状态 - 表示为数字。

我想将此数据显示为相应的字符串。例如，状态 = 1 的“活动”和状态 = 0 的“非活动”。

是否可以直接在 jqgrid 中执行此操作，例如作为附加 colModel 参数或 jqgrid 方法？我已经阅读了 jqgrid 的文档，但没有注意到解决这个问题的方法。

我不想更改从服务器返回的数据，因为我看不到传递冗余信息的任何意义。

如果我不必`result`直接在 javascript 中操作数组，我也会更喜欢，因为我没有看到遍历数组 2 次的意义（一次更改状态，第二次用于 jqgrid 加载）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:06:32.960

您可以使用[格式化程序：“选择”](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#formatter_type_select)：

```
{name:'status',index:'status', width:50, 
    formatter:'select', editoptions: {value:'0:Inactive;1:Active'}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:00:25.103

js代码中的某处：

```
var status_lines = ['Inactive', 'Active'];
function status_formatter(cellvalue, options, rowObject) {
    return status_lines[cellvalue];
} 
```

然后在 colModel 中：

```
{name:'status',index:'status', width:50, sorttype:"string", formatter:status_formatter} 
```

当然，`formatter:function(c,o,r){...}`如果你愿意的话，你可以在风格上做到这一点。

# php - 太多的连接用于在mysql中插入数据

> ID：10698874
> 
> 赞同：1
> 
> 时间：2012-05-22T09:03:10.677
> 
> 标签：php, mysql, phpmyadmin

我正在询问 mysql 服务器和 phpmyadmin 中的连接太多，因为我的数据库中的数据速度每小时 ~ 1000。当我在服务器上 TOP 时，mysqld 显示 100-145% 的 cpu 利用率也有很多 php 线程在那里运行，作为通过 php 脚本插入数据。我的问题是，是否有任何机制可以使连接不溢出并且mysql服务器尽可能低地使用cpu。因为我使用的是 VPS 服务器，但是在 vps 上使用另一个应用程序并不是那么有效，因为 mysql 服务器占用 100% cpu。有时 phpmyadmin 崩溃并显示一些民间错误。我已经阅读了**查询缓存**机制，但它用于缓存相同的选择查询，我应该将它用于插入还是有任何其他最佳解决方案类型的**队列机制**. 另外，我不能说何时插入数据速度低或高，如果它知道，那么我可以尝试队列机制。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:12:31.690

检查您的代码，看看您是否有类似的东西

```
for($i = 0; $i < 10000; $i++) // basicly long loop with inserts
    mysql_query("INSERT INTO table_name (id, value) VALUES ({$i}, 100)"); 
```

这应该更改为类似

```
$arr_values = array();
for($i = 0; $i < 10000; $i++)
    $arr_values[] = "({$i}, 100)";

$str_values = implode(', ', $arr_values);

mysql_query("INSERT INTO table_name (id, value) VALUES {$str_values}"); 
```

基本上要注意代码中不需要的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:08:32.207

您应该从以下链接 [mysql_query cache中获得有关](http://www.docplanet.org/mysql/mysql-query-cache-in-depth/)**“QUERY CACHE”的基本概念**

# java - java jna - 通过引用 java.lang.IndexOutOfBoundsException 获取字节数组

> ID：10698876
> 
> 赞同：1
> 
> 时间：2012-05-22T09:03:11.710
> 
> 标签：java, bytearray, pass-by-reference, jna

我正在使用 JNA，但在获取字节数组时遇到了一个奇怪的错误。

我使用这段代码：

```
PointerByReference mac=new PointerByReference();
NativeInterface.getMac(mac);
mac.getPointer().getByteArray(0,8) 
```

如果我确定返回的字节是 8 字节长度，它也会抛出一个 IndexOutOfBoundsException：边界超出可用空间：大小 = 4，偏移量 = 8。我试图将该数组作为字符串：

```
mac.getPointer().getString(0) 
```

在这里我成功地得到了一个 8 字符长度的字符串。你能明白为什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T11:07:57.223

`PointerByReference.getValue()`返回`Pointer`您正在寻找的。 `PointerByReference.getPointer()`返回它的地址。

`mac.getPointer().getByteArray(0, 8)`正在尝试从`PointerByReference`分配的内存（这是一个指针）中读取 8 个字节，并将这些字节放入 Java 原始数组中。您要求 8 个字节，但只分配了 4 个字节，因此出现相应的错误。

`mac.getPointer().getString(0)`正在尝试从为指针值分配的内存中读取 C 字符串（好像是`const char *`，并将该 C 字符串转换为 Java `String`。它仅在 Java 端对字符串的开头进行边界检查，因此它将继续读取内存（即使它在技术上超出范围）直到它找到一个零值。

**编辑**

`mac.getValue().getByteArray(0, 8)`将为您提供您最初尝试获取的内容（8 个字节的数组）。

**编辑**

如果您调用的函数应该写入缓冲区（而*不是*写入缓冲区的地址），那么您应该将其签名更改为接受`byte[]`，例如

```
byte[] buffer = new byte[8];
getMac(buffer); 
```

# r - quantstrat：在开盘时买入下一个柱

> ID：10698879
> 
> 赞同：5
> 
> 时间：2012-05-22T09:03:28.450
> 
> 标签：r, quantstrat

如何在 quantstrat 中实现“以开盘价在下一个柱买入”？

这是我对maCross.R 样本的实验。

1.  添加`prefer='Open'`规则信号

    ```
    stratMACROSS <- add.rule(strategy = stratMACROSS, name='ruleSignal',
                             arguments = list(sigcol="ma50.gt.ma200", sigval=TRUE, orderqty=100000, ordertype='market', orderside='long', prefer='Open'), type='enter')
    stratMACROSS <- add.rule(strategy = stratMACROSS, name='ruleSignal', 
                             arguments = list(sigcol="ma50.lt.ma200", sigval=TRUE, orderqty=-100000, ordertype='market', orderside='long', prefer='Open'), type='exit') 
    ```

2.  订单以当前`Open`价格生成，但在下一个柱执行`Close`。

    ```
    > orders <- getOrderBook(portfolio.st)
    > head(orders)
                    Order.Qty Order.Price Order.Type Order.Side Order.Threshold Order.Status Order.StatusTime     
    2011-05-22 00:00:00 "0"       NA          "init"     "long"     "0"             "closed"     "2011-05-22"         
    2011-05-24 04:30:00 "1e+05"   "1.61297"   "market"   "long"     NA              "closed"     "2011-05-24 05:00:00"
    2011-05-25 03:00:00 "-1e+05"  "1.61523"   "market"   "long"     NA              "closed"     "2011-05-25 03:30:00"
    2011-05-25 05:00:00 "1e+05"   "1.61537"   "market"   "long"     NA              "closed"     "2011-05-25 05:30:00"
    2011-05-30 09:30:00 "-1e+05"  "1.64679"   "market"   "long"     NA              "closed"     "2011-05-30 10:00:00"

    > txns <- getTxns(Portfolio=portfolio.st, Symbol=fx.st[1])
    > head(txns)
                    Txn.Qty Txn.Price Txn.Fees Txn.Value Txn.Avg.Cost Net.Txn.Realized.PL
    2011-05-22 00:00:00   0e+00   0.00000        0         0      0.00000                   0
    2011-05-24 05:00:00   1e+05   1.61227        0    161227      1.61227                   0
    2011-05-25 03:30:00  -1e+05   1.61437        0   -161437      1.61437                 210
    2011-05-25 05:30:00   1e+05   1.61929        0    161929      1.61929                   0
    2011-05-30 10:00:00  -1e+05   1.64584        0   -164584      1.64584                2655
    2011-05-30 19:30:00   1e+05   1.65046        0    165046      1.65046                   0 
    ```

3.  例如，订单在 2011-05-25 03:00:00 生成，`Open`价格为 1.61523，但交易在 03:30:00，`Close`价格为 1.61437

    市场数据如下所示。

    ```
    Date    Time    Open    High    Low     Close   Up  Down
    5/24/2011   430 1.61297 1.6153  1.61288 1.61421 1804    1700
    5/24/2011   500 1.61409 1.61445 1.61224 1.61227 1709    1662
    5/25/2011   300 1.61523 1.61628 1.61318 1.6139  1526    1465
    5/25/2011   330 1.61393 1.61541 1.61345 1.61437 1713    1583 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:21:58.303

使用 maCross.R 演示，如果您将 applyStrategy 行更改为包含`prefer=Open`这样

```
out<-try(applyStrategy(strategy=stratMACROSS , portfolios=portfolio.st, prefer='Open')) 
```

您将在下一个酒吧开盘时被处决。

```
> head(txns)
           Txn.Qty Txn.Price Txn.Fees Txn.Value Txn.Avg.Cost Net.Txn.Realized.PL
1999-12-31   0e+00  0.000000        0       0.0     0.000000                   0
2001-06-27   1e+05 11.863950        0 1186395.0    11.863950                   0
2001-09-07  -1e+05  8.709491        0 -870949.1     8.709491             -315446
2002-01-07   1e+05 11.808210        0 1180821.0    11.808210                   0
2002-07-10  -1e+05  8.814099        0 -881409.9     8.814099             -299411
2003-05-16   1e+05  9.255447        0  925544.7     9.255447                   0

> head(AAPL['2001-06-26/'])
           AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted
2001-06-26  11.61595  11.82995 11.45171      11.82     9742200         11.82
2001-06-27  11.86395  11.94859 11.20180      11.62    13361800         11.62
2001-06-28  11.47604  11.90421 11.42127      11.72    12443200         11.72
2001-06-29  11.78421  12.50142 11.55510      11.58    18406800         11.58
2001-07-02  11.77054  12.06431 11.52159      11.90     8216000         11.90
2001-07-03  11.70569  12.03929 11.70071      11.87     4019400         11.87 
```

并检查信号是否在执行栏之前在栏上发送

```
> .strategy$order_book.macross$macross$AAPL
           Order.Qty Order.Price        Order.Type Order.Side Order.Threshold Order.Status Order.StatusTime      Prefer Order.Set Txn.Fees Rule             
1999-12-31 "0"       NA                 "init"     "long"     "0"             "closed"     "1999-12-31"          ""     ""        "0"      ""               
2001-06-26 "1e+05"   "11.6159494736842" "market"   "long"     NA              "closed"     "2001-06-27 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2001-09-06 "-1e+05"  "9.15846501128668" "market"   "long"     NA              "closed"     "2001-09-07 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2002-01-04 "1e+05"   "11.6158125791473" "market"   "long"     NA              "closed"     "2002-01-07 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2002-07-09 "-1e+05"  "9.0088819167142"  "market"   "long"     NA              "closed"     "2002-07-10 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2003-05-15 "1e+05"   "9.25531233315537" "market"   "long"     NA              "closed"     "2003-05-16 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2006-06-21 "-1e+05"  "57.4905184929139" "market"   "long"     NA              "closed"     "2006-06-22 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2006-09-25 "1e+05"   "73.498195379538"  "market"   "long"     NA              "closed"     "2006-09-26 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2008-03-06 "-1e+05"  "124.074175969569" "market"   "long"     NA              "closed"     "2008-03-07 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2008-05-16 "1e+05"   "189.299382795011" "market"   "long"     NA              "closed"     "2008-05-19 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2008-09-23 "-1e+05"  "131.28867076632"  "market"   "long"     NA              "closed"     "2008-09-24 00:00:00" "Open" NA        "0"      "ruleSignal.rule"
2009-05-13 "1e+05"   "122.684122520713" "market"   "long"     NA              "closed"     "2009-05-14 00:00:00" "Open" NA        "0"      "ruleSignal.rule" 
```

请注意，这不是`prefer`应该如何使用的（至少不是它的记录方式）。此外，我不确定这是否或如何改变信号触发的位置。

# c# - 大型 ASP.NET MVC 项目中的模型怎么样

> ID：10698884
> 
> 赞同：1
> 
> 时间：2012-05-22T09:03:40.320
> 
> 标签：c#, asp.net-mvc, entity-framework, architecture

我一直在为一个相当大的项目一起使用 ASP.NET MVC 和 Entity Framework 进行一些研究。大多数示例通过将 .edmx 文件从 MVC 项目中移到新的 DAL 项目中来将其分离。在这个项目中，您还可以找到存储库和接口。

虽然这种方法对我来说非常有意义，但有一件事我似乎无法弄清楚：MVC 中的模型呢？在大多数示例中，控制器直接从 DAL 项目中处理存储库接口，因此不再使用 MVC 模型？还是继续使用它们是个好主意，但将它们映射到控制器中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T09:05:52.800

有 2 种类型的模型：

*   领域模型
*   查看模型

域模型代表您的域实体。它们可能是来自您的数据库的自动生成的 EF 类，也可能来自其他地方，例如从您正在使用的 WCF 服务生成的代理。这些应该存在于您的域层中。

另一方面，查看模型位于`Models`ASP.NET MVC 项目的文件夹中。这些是您为每个视图定义的特定类。控制器操作将查询您的 DAL 层以获取一个或多个域模型并实例化您为要从此控制器呈现的给定视图专门定义的视图模型。所以一个视图模型可以保存来自多个域模型的信息（只是因为在给定的视图中你需要所有这些信息）。然后控制器将视图模型传递给视图进行显示。

# keyboard-shortcuts - 在 Etherpad 中，除了粗体、斜体和下划线（罢工、项目符号...）之外，还有其他操作的快捷方式吗？

> ID：10698889
> 
> 赞同：8
> 
> 时间：2012-05-22T09:03:52.927
> 
> 标签：keyboard-shortcuts, etherpad

好吧，几乎所有内容都在标题中：除了使文本变为粗体、斜体或下划线之外，还有什么捷径可以执行其他操作吗？或者任何允许这样做的插件？

根据我的一位同事的说法，源代码似乎不包含这些东西，但也许我们错过了一些东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T13:19:00.153

Etherpad 包含一个名为 ACE2（最初是 AppJet 代码编辑器）的嵌入式富文本编辑器，它似乎负责键盘快捷键处理。

默认嵌入的`ace.js`文件曾经被缩小，因此在旧版本的 Etherpad 中难以阅读，但您可以直接在`infrastructure/ace` [源代码部分中](http://code.google.com/p/etherpad/source/browse/trunk/infrastructure/ace/www/)读取原始源文件，从中生成缩小版本。有关这方面的更多信息，请查看[ACE2 的 README](http://code.google.com/p/etherpad/source/browse/trunk/infrastructure/ace/README)。较新的版本（至少 etherpad.org 的版本）似乎包含正常的 ACE2 JS 源代码。

键盘快捷键处理代码位于函数`ace2_inner.js`内部[`handleKeyEvent()`](http://code.google.com/p/etherpad/source/browse/trunk/infrastructure/ace/www/ace2_inner.js#3125)。基于此，开箱即用支持的键盘快捷键如下（在浏览器的快捷键之上，如剪切/复制/粘贴）：

*   `Enter`- 特殊的etherpad回车
*   `Tab`或`Shift`+ `Tab`- 缩进或突出项目符号列表
*   `Ctrl`+ `Z`- 特殊的 etherpad 撤消
*   `Ctrl`+ `Y`- 特殊的etherpad重做
*   `Ctrl`+ `B`- 粗体
*   `Ctrl`+ `I`- 斜体
*   `Ctrl`+ `U`- 下划线
*   `Ctrl`+ `H`- 删除
*   `Ctrl`+ `S`- 保存修订

确实没有删除线或项目符号列表，也没有任何看起来像快捷方式的简单扩展机制的东西，所以你可能需要动手;-)

如果您有自己的 Etherpad 部署，最简单的可能是修改 ACE2 的源代码以处理其他快捷方式，然后在需要时重新构建`ace2.js`缩小版本（根据[README](http://code.google.com/p/etherpad/source/browse/trunk/infrastructure/ace/README)中的说明）。这是一个如何处理删除线切换的`Ctrl`+`S`快捷方式和项目符号列表切换的`Ctrl`+的示例。`L`删除线快捷方式禁用内置浏览器另存为...快捷方式，我发现这是一个奖励，但如果您不喜欢这样，您可以随时选择其他键而不是`S`. 在处理其他快捷方式的类似块之间
插入以下代码段，大约第 3200 行：`ace2_inner.js`

```
/* Ctrl+S toggles striketrough, and prevents triggering the browser's Save dialog */
if ((!specialHandled) && isTypeForCmdKey &&
    String.fromCharCode(which).toLowerCase() == "s" &&
    (evt.metaKey ||  evt.ctrlKey)) {
  // ctrl/cmd-s (strikethrough toggle)
  fastIncorp(13); // don't ask me ;-)
  evt.preventDefault();
  toggleAttributeOnSelection('strikethrough');
  specialHandled = true;
}
if ((!specialHandled) && isTypeForCmdKey &&
    String.fromCharCode(which).toLowerCase() == "l" &&
    (evt.ctrlKey)) {
  // ctrl/cmd-L (bullet list toggle)
  fastIncorp(9); // seriously, don't ask me ;-)
  evt.preventDefault();
  doInsertUnorderedList();
  specialHandled = true;
} 
```

如果您无法重建缩小版本，您也可以尝试使用缩小名称直接修补它。这是上述代码片段的缩小版本，虽然是 YMMV，但我没有检查缩小是否稳定并且每次都重用相同的缩短名称。搜索“y”（带引号）以找到`handleKeyEvent()`inside的缩小版本`ace.js`：

```
if ((!Cp)&&Cu&&String.fromCharCode(Ct).toLowerCase()=="s"&&(i.metaKey || i.ctrlKey)){G(13);\\ni.preventDefault();c("strikethrough");Cp=true;}if((!Cp)&&Cu&&String.fromCharCode(Ct).toLowerCase()=="l"&&(i.metaKey||i.ctrlKey)){G(9);\\ni.preventDefault();As();Cp=true;} 
```

最后，如果您不控制 etherpad 部署，您也许可以使用修补默认功能的浏览器内[GreaseMonkey](http://en.wikipedia.org/wiki/Greasemonkey)脚本来实现类似的东西。`handleKeyEvent()`作为挂钩到编辑器的起点，请尝试检查`window.pad*`对象，例如`window.padeditor`. 例如，在编辑器中选择一些文本并在控制台中尝试以下操作：

```
> window.padeditor.ace.execCommand('bold')
> window.padeditor.ace.execCommand('insertunorderedlist') 
```

# c++ - 从 QtreeView 列表中获取字符串

> ID：10698891
> 
> 赞同：2
> 
> 时间：2012-05-22T09:04:00.103
> 
> 标签：c++, qt, qtreeview

我想从 QtreeView 列表中获取字符串。

在我的 qtreeview 我有：

```
 [*] Node1
        [*] Subnode1_1
            test_1
            test_2
    [*] Node2
        test_3
        [*] Subnode2_1
            test_4    
    test_5 
```

我想获取字符串： test_1, test2, test3, test4, test5 在数据库中启动请求。

我发现的唯一一件事是从您选择的节点中获取字符串。

经过 ：`Tree->model()->itemData(m_listOfModelIndex.at(0))[Qt::DisplayRole].toString()`

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T09:52:19.597

```
QStringList strings = extractStringsFromModel(Tree->model(), QModelIndex()); 
```

extractStringsFromModel 的实现

```
QStringList extractStringsFromModel(QAbstractItemModel *model, const QModelIndex &parent)
{
    QStringList retval;

    int rowCount = model->rowCount(parent);

    for(int i = 0; i < rowCount; ++i)
    {
        QModelIndex idx = model->index(i, 0, parent);

        if(idx.isValid())
        {
            retval << idx.data(Qt::DisplayRole).toString();
            retval << extractStringsFromModel(model, idx);
        }
    }

    return retval;
} 
```

此递归函数将从您的模型中提取所有文本。如果要获取“特定”数据，则应添加一些过滤。但基本上它会穿过整棵树。

# asp.net-mvc - 如何在实现 IValidatableobject 的类中验证 ILIST 类属性中的一行？

> ID：10698895
> 
> 赞同：1
> 
> 时间：2012-05-22T09:04:04.893
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在将我当前的 asp.net 站点迁移到 mvc 3。旧的 asp.net 页面实现了转发器控制，并且可以验证后面代码中的每一行。

我创建了一个模型类并继承了 IValidatableObject。见下面的代码：

```
public class ManageInstitutions : IValidatableObject
{
        public ManageInstitutions() { }

        public int InstitutionID { get; set; }
        public string InstituteName { get; set; }
        public string FName { get; set; }
        public string LName { get; set; }
        public string EAddress { get; set; }

        public IList<InstitutionIPBL> IPDetailsList { get; set; }

        //Validation Function
        public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {
            foreach (var item in IPDetailsList)
            {
                 if (item.IPPart1.Length == 0 && item.IPPart2.Length == 0 && item.IPPart3From.Length == 0 && item.IPPart3To.Length == 0 && item.IPPart4From.Length == 0 && item.IPPart4To.Length == 0)
                  {
                        //How to return ValidationResult that will identify which row got an error????????? 
                  }
            }
        }

} 
```

这`InstitutionIPBL`是一个来自旧的 asp.net 业务层的类。我重新使用这个类来表示我模型中的一个属性。

我需要知道如何确定哪一行出现错误。我正在使用此语法来检查该字段是否有效：`Html.ViewData.ModelState.IsValidField("[Field Name]"))`

我的问题是如何根据上述代码的说明性注释来识别哪一行出错。

任何人？请指教。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T20:54:11.677

由于缺乏支持，验证数组和集合在 MVC 中是一件棘手的事情。

在验证 IEnumerable、ICollection、IList 等中的单个元素时，您必须在 HTML 元素中包含每个元素的索引，并在 ModelState 中包含验证索引（至少作为最常见的解决方法，而无需创建自定义模型粘合剂）。

因此，如果您的模型如下所示：

```
public IList<string> List { get; set; } 
```

您的标记如下所示：

```
<input type="text" name="List[0]" />
<input type="text" name="List[1]" />
<input type="text" name="List[2]" /> 
```

然后你会注意到每个元素都有自己的索引，这是 MVC 的表单提供程序用来将输入绑定到模型的。

因此，当您编写验证时，您需要确保包含违规元素的索引（为简单起见扩展了代码）：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
{
        for (int i = 0; i < List.Count; i++) {
            if (string.IsNullOrEmpty(List[i])) {
                yield return new ValidationResult(i + 
                                  ": You forgot to fill in the box.",
                                  new[] { "List[" + i + "]" });
            }  
        }
} 
```

然后当你去写你的验证消息时：

```
@Html.ValidationMessage("List[1]") 
```

现在就实际查找 WHICH 元素具有验证消息而言，您需要查看 ModelState 以获取无效元素的键。

```
ModelState.Where(x => x.Key.StartsWith("List") && x.Value.Errors.Count > 0)
          .Select(x => x.Key); 
```

像这样的东西可以做成一个 HtmlHelper 可以通过以下方式访问 ModelState：

```
public static IEnumerable<string> 
      GetValidationMessagesForGroup(this HtmlHelper helper, string keyStart) {
    return helper.ViewData.ModelState.Where(x => x.Key.StartsWith("List")
                         && x.Value.Errors.Count > 0).Select(x => x.Key);
} 
```

并在您的视图中调用它：

```
@{
   foreach(string key in Html.GetValidationMessagesForGroup("List")) 
       @Html.ValidationMessageFor(key)
} 
```

对于强类型对象，你需要做的就是在最后添加属性。

```
Child[0].FirstName 
```

重要的是要记住，列表中每个元素的每个属性都有自己的条目。

# css - CSS 两列全宽

> ID：10698900
> 
> 赞同：1
> 
> 时间：2012-05-22T09:04:18.740
> 
> 标签：css, html, width

所以我有一个网站，它有一个页眉、一个页脚和两个主要内容列。

左列用于导航。右边的是地图。我希望两者都填充浏览器的宽度。我似乎面临着不同分辨率和不同浏览器的问题。地图总是移动到页脚下方，或者在右侧留下一个空白区域。

我的链接：[http ://www.trashvigil.com/nsdf/www/index1.php](http://www.trashvigil.com/nsdf/www/index1.php)

这是我的代码：

```
 #map{
    float:left;
    height:572px;
    width:79.88%;
            border-right: 2px solid #000;
            border-bottom: 3px solid #000;
    }

            #leftnav
    {
    float:left;
    width:250px;
    height: 572px;  
            border-right: 3px solid #000;
            border-bottom: 3px solid #000;
             } 
```

`#map`是地图容器。`#Leftnav`是导航。

谢谢，

考希克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:23:16.560

你需要这样的东西：

```
#map {
    margin-left:250px;    
    height:572px;
}
#leftnav {
    float:left;
    width:250px;
    height: 572px;  
} 
```

这个想法是浮动leftnav，然后为地图设置一个左边距，该左边距等于leftnav的宽度。

你可以在这里看到它：http: [//dabblet.com/gist/2767788](http://dabblet.com/gist/2767788)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T15:25:37.867

```
#nav {
position:absolute; 
left:0px; width:250px;
height:375px; top:50px; /* height of your top bar*/
}

#map{
margin-left:250px;
height:572px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:15:29.207

像这样的东西应该是你需要的。

```
<style>
#main
{
    width: 900px;
    overflow: hidden;
}

#leftnav
{
    float: left;
}

#map
{
    float: right;
}
</style>

<div id="header">
</div>

<div id="main">
    <div id="leftnav">
    </div>

    <div id="map">
    </div>
</div>

<div id="footer">
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:21:31.747

像这样写：

```
#map{
    overflow:hidden;
    height:572px;
    border-right: 2px solid #000;
    border-bottom: 3px solid #000;
    }

#leftnav{
    float:left;
    width:250px;
    height: 572px;  
    border-right: 3px solid #000;
    border-bottom: 3px solid #000;
    } 
```

# android - 为 iOS（和 Android）打开 GL 3D 库？

> ID：10698909
> 
> 赞同：1
> 
> 时间：2012-05-22T09:04:51.163
> 
> 标签：android, ios, opengl-es, 3d

是否有一些适用于 iOS（和 Android）的免费且易于使用的 3D 库来简化 Open GL ES 框架。就像有一个很酷的 WebGL 库：[ThreeJS](https://github.com/mrdoob/three.js/) for javascript。

到目前为止，我看到了[Unity](http://unity3d.com/)，但它不是免费的，我想要一些简化的东西。

我的用途是设置场景、网格、相机、旋转相机等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:07:36.467

对于 Android，您可以使用支持 GL ES1 和 GL ES2 的 AndEngine。对于 IOS，您可以使用 Cocos2D。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T15:07:36.843

我决定使用 Cocos3D，因为它具有我需要的所有功能，并且类似于 JS 库。它是免费的，您不必使用任何特殊的引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:08:15.010

我相信一个选择是 [SiO2](http://sio2interactive.com/) .. 还有[乌龙](http://code.google.com/p/oolongengine/).. 我曾经玩过搅拌机和 SiO2 并且进展顺利.. 如果你只对 2D 游戏感兴趣，那么[Cocos2D](http://www.cocos2d-iphone.org/)是 iPhone 的最佳选择.. 对于 android [AndEngine](http://www.andengine.org/)很好我相信 SiO2 也适用于 android..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T09:10:26.557

嗯，有适用于 iOS 的[Sparrow](http://gamua.com/sparrow/)，至于 Android，你可以考虑[AndEngine](http://www.andengine.org/) （更简单）或[LibGDX](https://code.google.com/p/libgdx/)（更快）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T18:52:13.693

啊，Unity 确实在今年 3 月 / 4 月发布[了](http://www.blendernation.com/2012/03/07/non-blender-get-free-unity-licenses-for-ios-and-android/)iOS/Android 版本——如果你问得好的话？

[OpenSceneGraph](http://openscenegraph.com)在 Vis/Sim 社区中拥有大量活跃的追随者，并且开始进入游戏，这里有几个来自他们论坛的 iOS/游戏相关主题：

[http://forum.openscenegraph.org/viewtopic.php?t=10291](http://forum.openscenegraph.org/viewtopic.php?t=10291)

[http://forum.openscenegraph.org/viewtopic.php?t=10308](http://forum.openscenegraph.org/viewtopic.php?t=10308) （本帖的第 2 页链接到 iTunes 商店中基于 osg 的游戏）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-22T07:48:37.913

对于 iOs 的开放 GL 非常基础的学习，我建议看看这个[http://antonholmquist.com/blog/opengl-es-2-0-ios-tutorial-getting-started/](http://antonholmquist.com/blog/opengl-es-2-0-ios-tutorial-getting-started/)。这给出了顶点和片段着色器的基本概念。完成后，初学者可以阅读其他教程，这些教程解释了 openGL 的详细概念。

我已经浏览了很多链接，但是这个链接很好地解释了基本内容。

# c++ - 通过引用另一个类来传递变量

> ID：10698913
> 
> 赞同：1
> 
> 时间：2012-05-22T09:05:07.247
> 
> 标签：c++, class, reference

我试图通过引用一个不同的类来传递一个变量，但我无法让它工作。

我在主应用程序中创建了一些配置对象，然后当我运行配置对话框时，我想将此配置对象提供给对话框。

这是我到目前为止所拥有的：

**配置对话框.h**：

```
class ConfigDialog {

public:
    explicit ConfigDialog(kimai::Config& config, QWidget *parent = 0);

private:
    kimai::Config& config_;
}; 
```

**配置对话框.cpp**：

```
ConfigDialog::ConfigDialog(kimai::Config& config, QWidget *parent) {        
    config_ = config;
    // Do something with config_ - get/set values, etc.
} 
```

当我尝试编译时，出现以下错误：

```
ConfigDialog.cpp:7: error: C2758: 'ConfigDialog::config_' : must be initialized in constructor base/member initializer list 
```

知道如何解决这个问题吗？

（我尝试添加`config_ = config`到初始化列表，但这无效）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:06:59.987

您应该使用初始化列表来初始化引用：

```
ConfigDialog::ConfigDialog(kimai::Config& config, QWidget *parent) 
        : config_(config)
{        
    // Do something with config_ - get/set values, etc.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T09:07:01.210

您必须使用构造函数初始化程序列表：

```
ConfigDialog::ConfigDialog(kimai::Config& config, QWidget *parent)
    : config_(config)
{
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T09:07:18.647

您不能通过赋值来初始化引用，它需要在初始化列表中完成：

```
ConfigDialog::ConfigDialog(kimai::Config& config, QWidget *parent) : config_(config) {        
    // Do something with config_ - get/set values, etc.
} 
```

`config_ = config`赋值是赋值运算符对被引用的值调用到被引用的`config`变量中`config_`，该变量未初始化。赋值语法仅在与声明结合使用时才有效：

```
int y = 5;
int &x = y;    // This works
int &z; z = y; // This does not work!
int w = 4;
x = y;         // This is an assignment to y through a reference 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:07:07.787

错误信息告诉你一切。尝试这个：

```
ConfigDialog::ConfigDialog(kimai::Config& config, QWidget *parent) 
   :config_(config)
{           
    // Do something with config_ - get/set values, etc.
} 
```

引用类型的类成员必须在[初始化列表](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.6)中进行初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T09:07:34.063

您应该使用构造函数语法将其添加到初始化列表中：

```
ConfigDialog::ConfigDialog(kimai::Config& config, QWidget *parent)
    : config_ (config)
{        
    // Do something with config_ - get/set values, etc.
} 
```

# .net - 对接口进行排序时出现“DynamicMethod 的类型所有者无效”错误

> ID：10698915
> 
> 赞同：12
> 
> 时间：2012-05-22T09:05:16.670
> 
> 标签：.net, sorting, interface

我们通过[sourceforge使用](http://blw.sourceforge.net/)[Andrew Davey 的](http://aboutcode.net/) `BindingListView<T>`类将集合绑定到 a并允许排序和过滤。 `DataGridView`

这适用于普通收藏。然而，在一种情况下，我们绑定到的集合是一个接口类型，如果我们尝试对其进行排序，则会出现此错误：

`Invalid type owner for DynamicMethod`

这个错误在 Andrew Davies 的代码中很深，所以我们很难知道从哪里开始。

```
 private static Comparison<T> BuildValueTypeComparison(PropertyInfo pi, ListSortDirection direction)
        {
            MethodInfo getMethod = pi.GetGetMethod();
            Debug.Assert(getMethod != null);

            DynamicMethod dm = new DynamicMethod("Get" + pi.Name, typeof(int), new Type[] { typeof(T), typeof(T) }, typeof(T), true);
            //^^^ ======== Here's the line reporting the error=========== ^^^

            ILGenerator il = dm.GetILGenerator();

            // Get the value of the first object's property.
            il.Emit(OpCodes.Ldarg_0);
            il.EmitCall(OpCodes.Call, getMethod, null);
            // Box the value type
            il.Emit(OpCodes.Box, pi.PropertyType);

            // Get the value of the second object's property.
            il.Emit(OpCodes.Ldarg_1);
            il.EmitCall(OpCodes.Call, getMethod, null);
            // Box the value type
            il.Emit(OpCodes.Box, pi.PropertyType);

            // Cast the first value to IComparable and call CompareTo,
            // passing the second value as the argument.
            il.Emit(OpCodes.Castclass, typeof(IComparable));
            il.EmitCall(OpCodes.Call, typeof(IComparable).GetMethod("CompareTo"), null);

            // If descending then multiply comparison result by -1
            // to reverse the ordering.
            if (direction == ListSortDirection.Descending)
            {
                il.Emit(OpCodes.Ldc_I4_M1);
                il.Emit(OpCodes.Mul);
            }

            // Return the result of the comparison.
            il.Emit(OpCodes.Ret);

            // Create the delegate pointing at the dynamic method.
            return (Comparison<T>)dm.CreateDelegate(typeof(Comparison<T>));
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T18:33:55.557

**更新：**我终于以正确的方式工作了，请参见下文。

`DynamicMethod`在运行时动态构建方法；在您使用的库中，所创建的方法被添加到对象中`T`；但是，什么时候`T`是接口失败，因为您无法向接口添加方法。

主要问题出在方法上：

`private static GetPropertyDelegate BuildGetPropertyMethod(PropertyInfo pi)`

按照这种编写方式，它仅在集合类型`T`具体时才有效。

如果您将实现更改为：

```
private static GetPropertyDelegate BuildGetPropertyMethod(PropertyInfo pi)
{
    MethodInfo getMethod = pi.GetGetMethod();
    Debug.Assert(getMethod != null);

    DynamicMethod dm = new DynamicMethod(
        "GetProperty_" + typeof(T).Name + "_" + pi.Name, typeof(object), 
        new Type[] { typeof(T) },
        pi.Module, 
        true);

    ILGenerator il = dm.GetILGenerator();

    il.Emit(OpCodes.Ldarg_0);
    il.EmitCall(OpCodes.Callvirt, getMethod, null);
    if (pi.PropertyType.IsValueType)
    {
        il.Emit(OpCodes.Box, pi.PropertyType);
    }

    // Return the result of the comparison.
    il.Emit(OpCodes.Ret);

    return (GetPropertyDelegate)dm.CreateDelegate(typeof(GetPropertyDelegate));
} 
```

[它适用于具体类型和接口](http://web.archive.org/web/20121028071433/https://www.codingday.com/reflection-for-properties-and-fields-with-dynamicmethod/)。

您还需要更新以下两种方法：

`private static Comparison<T> BuildValueTypeComparison(PropertyInfo pi, ListSortDirection direction)`

`private static Comparison<T> BuildNullableComparison(PropertyInfo pi, ListSortDirection direction)`

我可能是错的，但我认为这些方法实现的速度增益来自快速属性读取，因此使用该`DynamicMethod`方法编写整个方法并没有太大的好处；我们可以重用`BuildGetPropertyMethod`上面的。所以这样做，这些变成：

```
private static Comparison<T> BuildValueTypeComparison(
    PropertyInfo pi, 
    ListSortDirection direction)
{
    GetPropertyDelegate m = BuildGetPropertyMethod(pi);
    Comparison<T> d = delegate(T x, T y)
    {
        object mx = m(x);
        object my = m(y);

        IComparable c = (IComparable)mx;

        if (direction == ListSortDirection.Descending)
        {
            return -c.CompareTo(my);
        }

        return c.CompareTo(my);
    };

    return d;
}

private static Comparison<T> BuildNullableComparison(
    PropertyInfo pi, 
    ListSortDirection direction)
{
    GetPropertyDelegate m = BuildGetPropertyMethod(pi);
    Comparison<T> d = delegate(T x, T y)
        {
            object mx = m(x);
            object my = m(y);

            IComparable c = (IComparable)mx;

            if (c == null)
            {
                c = (IComparable)my;

                if (c == null)
                {
                    return 0;
                }

                return direction == ListSortDirection.Descending 
                    ? c.CompareTo(mx) : -c.CompareTo(mx);
            }

            return direction == ListSortDirection.Descending 
                ? -c.CompareTo(my) : c.CompareTo(my);
        };

    return d;
} 
```

显然对它做一些测试，但我很确定这就是你想要的，它应该和前面的代码一样快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T04:58:54.740

不要放弃，去使用DataSet！你正朝着正确的方向前进！现在，我们先来看看函数签名：

```
DynamicMethod(string name, 
              Type returnType, 
              Type[] parameterTypes, 
              Type owner, 
              bool skipVisibility)

Error is “Invalid type owner for DynamicMethod" 
```

错误消息试图告诉您，`Type owner`这不是函数所期望的。它需要一个 Class 类型。您可能正在将 Interface 类型传递给**Type owner**。在接口上创建动态方法是不可能的。

**1.错误示例**

也许您正在使用依赖注入，并且您可能喜欢使用接口。

但是，此代码会遇到运行时错误。

```
var viewModelList = GetViewModels(); //returns an IList<IViewModel> <-- has i !!
var blv = new BindingListView<IViewModel>(viewModelList); 
```

**2.工作示例**

尝试重新设计您的代码以使用具体类型。

现在，此代码不会遇到运行时错误

```
var viewModelList = GetViewModels(); //returns an IList<ViewModel> <-- has no i !!
var blv = new BindingListView<ViewModel>(viewModelList); 
```

然后，您的排序和过滤`DataGridView`将自动工作:)

编辑 - - - - - - - - - - - - - - - - - - - - - - -

PS关于尝试重新设计您的代码：

如果您使用的是 MVVM/MVP 模式，请考虑以下逻辑。`IList<IViewModel>`应该留在“VM+P”一侧。使用 IViewModel 的目的主要是因为我希望能够将其替换为，例如，`MockingViewModel : IViewModel`用于单元测试逻辑的“VM+P”端。

现在，`BindingListView<ViewModel>`应该真的在“V”侧，即`YourView : System.Windows.Form { ... }`. 并且它将从那里绑定到绑定源`YourBindingSource.DataSource = blv;`由于我不会对 WinForm 进行单元测试，因此我将尝试将它们重构为演示者和视图模型，并使视图尽可能薄。所以，我只会在 BindingListView 中使用 ViewModel，而不是 IViewModel 接口。

因此`BindingListView<ConcreteViewModel>`，它不接受模型接口对我来说自然是有意义的。

请参阅有关 MVVM MVP 设计和单元测试 WinForm 的这个问题： [我应该在 MVP（或 VM）中对我的视图进行单元测试，还是如何将视图中的代码保持在最低限度？](https://stackoverflow.com/questions/1362814/should-i-unit-test-my-view-in-mvpor-vm-or-how-to-keep-the-code-in-the-view-to)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-22T14:16:30.060

他们为什么要为属性创建一个新方法 get，为什么？他们不能只使用该 PropertyInfo 并获取属性值吗？如果我这样做，我会考虑界面而不限制用户使用它们。他们正在创建与原始“get”方法相同的方法，我不明白这是什么意思。

```
 private static GetPropertyDelegate BuildGetPropertyMethod(PropertyInfo pi)
        {
            MethodInfo getMethod = pi.GetGetMethod();
            Debug.Assert(getMethod != null);

            DynamicMethod dm = new DynamicMethod("__blw_get_" + pi.Name, typeof(object), new Type[] { typeof(T) }, typeof(T), true);
            ILGenerator il = dm.GetILGenerator();

            il.Emit(OpCodes.Ldarg_0);
            il.EmitCall(OpCodes.Call, getMethod, null);

            // Return the result of the comparison.
            il.Emit(OpCodes.Ret);

            // Create the delegate pointing at the dynamic method.
            return (GetPropertyDelegate)dm.CreateDelegate(typeof(GetPropertyDelegate));
        } 
```

固定排序：

```
 private static Comparison<T> BuildComparison(string propertyName, ListSortDirection direction)
        {
            PropertyInfo pi = typeof(T).GetProperty(propertyName);
            Debug.Assert(pi != null, string.Format("Property '{0}' is not a member of type '{1}'", propertyName, typeof(T).FullName));

            if (typeof(IComparable).IsAssignableFrom(pi.PropertyType))
            {
                if (pi.PropertyType.IsValueType)
                {
                    return BuildValueTypeComparison(pi, direction);
                }
                else
                {
                    //CHANGED!!!!!
                    //GetPropertyDelegate getProperty = BuildGetPropertyMethod(pi);
                    return delegate(T x, T y)
                    {
                        int result;
                        //CHANGED!!!!!
                        object value1 = pi.GetValue(x, null);// getProperty(x);
                        //CHANGED!!!!!
                        object value2 = pi.GetValue(y, null); //getProperty(y);
                        if (value1 != null && value2 != null)
                        {
                            result = (value1 as IComparable).CompareTo(value2);
                        }
                        else if (value1 == null && value2 != null)
                        {
                            result = -1;
                        }
                        else if (value1 != null && value2 == null)
                        {
                            result = 1;
                        }
                        else
                        {
                            result = 0;
                        }

                        if (direction == ListSortDirection.Descending)
                        {
                            result *= -1;
                        }
                        return result;
                    };
                }
            }
            else if (pi.PropertyType.IsGenericType && pi.PropertyType.GetGenericTypeDefinition().Equals(typeof(Nullable<>)))
            {
                var compare = typeof(Nullable).GetMethod("Compare", BindingFlags.Static | BindingFlags.Public).MakeGenericMethod(pi.PropertyType.GetGenericArguments()[0]);
                return delegate (T x, T y)
                {
                    return (int)compare.Invoke(x,new[] { pi.GetValue(x, null), pi.GetValue(y, null) } );
                };
                //return BuildNullableComparison(pi, direction);
            }
            else
            {
                return delegate(T o1, T o2)
                {
                    if (o1.Equals(o2))
                    {
                        return 0;
                    }
                    else
                    {
                        return o1.ToString().CompareTo(o2.ToString());
                    }
                };
            }
        } 
```

# algorithm - 推荐系统数据集

> ID：10698916
> 
> 赞同：0
> 
> 时间：2012-05-22T09:05:19.543
> 
> 标签：algorithm, matlab, dataset

我有一个完整的推荐系统数据集，我需要在 matlab 中构建。

我将所有数据集作为元胞数组导入 MATLAB。

我现在需要为单词添加值并应用 k 模式算法。

我怎么能这样做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:09:38.133

您应该首先检查 matlab 文档

[http://www.mathworks.com/help/toolbox/stats/kmeans.html](http://www.mathworks.com/help/toolbox/stats/kmeans.html)

编辑：
还要检查[Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)和[Jaccard Index](http://en.wikipedia.org/wiki/Jaccard_index)

# javascript - 使用 Coldfusion 以面向对象的方法在哪里呈现 Ajax 搜索结果？

> ID：10698919
> 
> 赞同：0
> 
> 时间：2012-05-22T09:05:28.397
> 
> 标签：javascript, ajax, jquery-mobile, coldfusion, templating-engine

我正在更新一个 Coldfusion8/MySql 站点，其中包含从“意大利面条到对象”的相当复杂的搜索（= 单独的视图、控制器和进程 - 没有框架，一切都由 Jquery Mobile 处理）。

我需要通过 Jquery-AJAX 运行搜索查询，现在将搜索表单发布到我的 searchProcess.cfc，它执行数据库查询。

**问题：**
我不确定在哪里呈现结果？

结果将相当复杂（数据库有几百万条记录，40 个字段的行）并且应该以**单个结果**布局或**多个结果**布局文件结束。

我正在考虑在 cfc 中构建文件并通过**cfsavecontent**将它们交还，但我正在到处阅读这是一个禁忌......

那么有哪些替代方案呢？

我可以设置一个**template_single.cfm**和**template_multi.cfm ，将***纯*搜索结果作为 AJAX 响应传回，然后从成功处理程序中触发另一个 AJAX 调用来调用模板，然后呈现第二次调用的输出。这似乎非常复杂，而且如果不传递大型数据集，我看不出我可以在哪里放置我的分页。

所以我正在寻找一些关于如何以面向对象的方式处理搜索结果的建议？

感谢您的输入！

**编辑：**
经过几个小时的谷歌搜索，我目前正在查看以下选项：
1.）运行单个数据库查询以返回分页结果 - 根据[此处](http://www.bennadel.com/blog/990-Paginating-Record-Sets-In-ColdFusion-With-One-SQL-Server-Call.htm)
2.）将具有 0-25 条记录的数据发送回 AJAX JSON
3.) 尝试在循环中使用模板 cf/js（长度为 1 或长度为 25） - 如此[处](http://www.andymatthews.net/read/2012/03/02/Creating-a-dynamic-jQuery-Mobile-list-view-with-ColdFusion,-Mustache-templates-and-JSON-data)

这意味着仅对 JSON 中的 1-25 条原始记录进行数据传输。如果我尝试在成功处理程序中呈现，我不必 http 请求另一个模板。

这种方法有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:09:33.107

首先，我认为将显示逻辑放在专门用于显示逻辑的 .cfc 中没有任何问题。我知道这不是严格的 MVC，但取决于你在做什么，它可以正常工作。我不喜欢在函数中执行任何类型输出的 .cfc。我总是交回函数中的任何数据。

/结束意见

对于这个特殊问题，我第二次编辑想法，将视图设置为几乎所有 HTML/jQuery，并使用 AJAX 调用分页记录集。至于单个/多个结果，我会根据您需要的单独的 jQuery 函数来选择。这样做的好处是您可以让多个记录集显示调用单个记录显示来查看单个记录（同时仍将完整记录集保留在 Dom 中）。

在这两种情况下，我强烈建议使用[Javascript Dump](http://www.netgrow.com.au/files/javascript_dump.cfm)函数（在可视化 DOM 数据方面有很大帮助。）

PS。如果有人发现任何更新/更好的 JS Dump 函数可以像 cfdump 一样工作，请告诉我！

# sql - Sql Query 根据输入的百分比获取值

> ID：10698930
> 
> 赞同：1
> 
> 时间：2012-05-22T09:06:00.943
> 
> 标签：sql, sql-server-2008, sql-server-2005

我有一张如下表

```
 Board Component Cost

    b1     c1       5
    b1     c2       10
    b2     c3       15
    b3     c4       20
    b3     c5       25
    b4     C6       25
  ---------------------
                  100% 
```

我应该提供输入以从表中获取值，例如...

如果输入为 20%

输出应该是

```
 Board Component Cost

    b1      c1      5
    b1      c2     10
    b2      c3     15 
```

如果输入为 50%

输出应该是

```
 Board Component Cost

    b1      c1      5
    b1      c2     10
    b2      c3     15
    b3      c4     20 
```

等等

如何在sql server中编写查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:14:35.463

首先，由于我们需要对以前的值进行分组和求和，因此您需要一个身份来实现这一点。我希望你能想出一个。我创建了这张表来模拟你的情况：

```
create table mySUM(
id int identity(1,1),
id2 varchar(50),
cost int)

insert into mySUM values
('c1',  5),   ('b1', 10),    ('b2',15),    ('b3',20),    ('b3',25),    ('b4',25) 
```

我有两个选择给你。这是主要的，但由于我们正在分组和求和，它将导致最后一列的总和：

```
select a.Id, a.id2, sum(b.cost) as totalCost
from mySUM a cross join mySUM b
where b.Id <= a.Id
group by a.Id,a.id2
having sum(b.cost)<=50
order by  a.Id 
```

结果：

```
1   c1  5
2   b1  15
3   b2  30
4   b3  50 
```

如果您不希望这样，您可以根据上述选择的 id 在主表上运行选择：

```
select * from mySUM where id in(
    select a.Id
    from mySUM a cross join mySUM b
    where b.Id <= a.Id
    group by a.Id,a.id2
    having sum(b.cost)<=50
) 
```

结果：

```
1   c1  5
2   b1  10
3   b2  15
4   b3  20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:21:07.930

```
DECLARE @T TABLE (Col1 VARCHAR(10), Col2 VARCHAR(10), Col3 INT, SumValue Int)

INSERT INTO @T(Col1, Col2, Col3)
VALUES ('b1','c1',5)

INSERT INTO @T(Col1, Col2, Col3)
VALUES ('b1','c2',10)

INSERT INTO @T(Col1, Col2, Col3)
VALUES ('b2','c3',15)

INSERT INTO @T(Col1, Col2, Col3)
VALUES ('b3','c4',20)

INSERT INTO @T(Col1, Col2, Col3)
VALUES ('b3','c5',25)

INSERT INTO @T(Col1, Col2, Col3)
VALUES ('b4','C6',25) 

DECLARE @SumValue INT

UPDATE @T
SET @SumValue=SumValue = ISNULL(@SumValue,0)+ Col3
FROM @T T

SELECT *
FROM @T
WHERE SumValue <= (
    SELECT TOP 1 SumValue
    FROM @T AS T
    WHERE T.SumValue>=40
    ORDER BY SumValue) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T09:22:01.580

试试这个

```
SELECT  t.* ,
        rt.runningTotal
FROM    Test t
        CROSS APPLY ( SELECT    SUM(cost) AS runningTotal
                      FROM      Test
                      WHERE     Board <= t.Board
                                AND Component <= t.Component
                    ) AS rt
WHERE   runningTotal <= 50
ORDER BY t.Board 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T10:12:25.920

试试这个：

```
with CTE (Board, Component ,Cost, rownum)
as
(
SELECT Board,Component, Cost,
ROW_NUMBER() OVER(order by Cost asc, Board asc, Component asc) rownum
  FROM yourTable t0
  where Cost > 0
)
select
t1.Board,t1.Component, t1.Cost, t1.rownum, sum(t2.Cost)
from 
CTE t1 join CTE t2 on t1.rownum >= t2.rownum
group by t1.Board,t1.Component, t1\. Cost, t1.rownum
having sum(t2.Cost) < 50
order by t1.rownum; 
```

应该管用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T12:45:51.250

```
create table #per(
Board varchar(10),
Component varchar(max),
Cost int)

create proc out_per (
@desire_per int)
as begin

declare @sum int, @count int;
declare @board varchar(max), @component varchar(max);
declare @cost int;
declare per_cursor cursor for
select Board,Component,Cost from per
open per_cursor
fetch next from per_cursor into @Board, @component, @cost
while(@@fetch_status=0)
    begin
        insert into #per values (@Board, @component, @cost);
        set @sum=(select sum(cost) from #per)
        if(@sum>=@desire_per)
        begin
            break;
        end
        fetch next from per_cursor into @Board, @component, @cost
    end
    close per_cursor
    deallocate per_cursor
    select * from #per
    truncate table #per
end

exec out_per @desire_per=30 
```

# emacs - Emacs 切换到不同帧的缓冲区

> ID：10698933
> 
> 赞同：4
> 
> 时间：2012-05-22T09:06:13.263
> 
> 标签：emacs, frame

我目前正在使用 emacs 进行编程。我在 .emacs 中定义了一个函数，它保存我的所有工作并执行解释器以在当前打开的 shell 缓冲区中运行我的工作。通常我会在一帧或多帧中进行编辑，并在单独的帧中打开外壳。我遇到的问题是，当我运行我的保存和执行功能时，所有内容都已保存，但外壳缓冲区随后会显示在我当前正在编辑的帧中。所以我有两帧显示 shell 缓冲区，我看不到我刚刚编辑的源代码。很多时候，当我在编程时，我想立即将代码的输出与我刚刚编写的代码进行比较。它'

```
(defun execute-script ()
  "Switch to shell buffer and re-execute the last command."
  (interactive)
  (save-some-buffers)
  (switch-to-buffer "*shell*")
  (end-of-buffer)
  (comint-previous-input 0)
  (comint-send-input)) 
```

正如你所看到的，我的功能目前相当原始，只是在 shell 中重新执行最近使用的命令。

我知道 Emacs 具有切换到不同帧中的缓冲区的功能，因为 ido 缓冲区切换器代码就是这样做的。有人对我需要用什么来替换对 switch-to-buffer 的调用以获得所需的效果有任何指示吗？

问候贾尔斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:26:02.790

交换

```
(switch-to-buffer "*shell*") 
```

为了

```
(switch-to-buffer-other-window "*shell*") 
```

这将强制执行两个窗口布局，左侧是先前的缓冲区，右侧是 shell 缓冲区。
**编辑：**如果您使用的是多*框架*布局而不是多*窗口*布局，您可以使用

```
(switch-to-buffer-other-frame "*shell*") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T01:22:56.183

您还可以使用`pop-to-buffer`which 稍后将让您准确自定义其行为方式，例如 via `display-buffer-reuse-frame`、 or `display-buffer-alist`、 or `special-display-regexp`。

# ruby-on-rails - 从'has many through'连接表中查找rails记录上的ruby，有没有更简单的方法？

> ID：10698936
> 
> 赞同：1
> 
> 时间：2012-05-22T09:06:20.540
> 
> 标签：ruby-on-rails

我有两个模型之间的“多通”关系：

```
Task:  
has_many :placements
has_many :games, :through => :placements

Game:
  has_many :placements
  has_many :tasks, :through => :placements

Placements:
  belongs_to :task
  belongs_to :game 
```

在我的控制器的索引方法中，我只想列出那些具有特定游戏 ID 的任务。我想出的解决方案使用了一组 id，但我认为必须有一种更简单但对我来说不太明显的方法！

@tasks = Task.find(Placement.where(:game_id => current_user.selectedgame).collect(&:task_id))

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:09:32.470

也许我在你的问题中遗漏了一些东西，但是......

```
@tasks = Game.find(current_user.selectedgame).tasks 
```

您可能应该使用`has_and_belongs_to_many`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T09:30:40.807

您可以从`Games`对象开始：

```
Games.find(current_user.selectedgame).tasks 
```

您可以使用`has_and_belongs_to_many`关系代替`has_many :through`，但这不是必需的。关于 Active Record 关联的[Ruby on Rails 指南](http://guides.rubyonrails.org/association_basics.html)有[一个关于此的部分](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)。

# javascript - 如何将javascript设置样式属性返回为CSS默认值

> ID：10698942
> 
> 赞同：23
> 
> 时间：2012-05-22T09:06:36.637
> 
> 标签：javascript, css, dom

我正在尝试弄清楚如何在使用 javascript 更改样式属性后恢复为样式表中的值（包括单位）。

在下面的示例中，我希望输出读取`100px`（CSS 中的值），而不是`10px`,`getComputedStyle`给出。

我还将虚拟 div 保留在`top:25px`，因此删除该`style`属性将不起作用。

我最好的方法是克隆节点并读取高度并存储在属性中（[http://jsfiddle.net/daneastwell/zHMvh/4/](http://jsfiddle.net/daneastwell/zHMvh/4/)），但这并没有真正获得浏览器的默认 css 值（特别是如果这是设置在`em`s)。

[http://jsfiddle.net/daneastwell/zHMvh/1/](http://jsfiddle.net/daneastwell/zHMvh/1/)

```
<style>
 #elem-container{
   position: absolute;
   left:     100px;
   top:      200px;
   height:   100px;
 }
</style>

<div id="elem-container">dummy</div>
<div id="output"></div>  

<script>
  function getTheStyle(){
    var elem = document.getElementById("elem-container");
    elem.style.left = "10px";
    elem.style.top = "25px";
    var theCSSprop = window.getComputedStyle(elem,null).getPropertyValue("left");
    document.getElementById("output").innerHTML = theCSSprop;
   }
  getTheStyle();
</script> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-22T09:15:02.610

只需清除您希望回退到原始样式表的内联样式即可。

```
elem.style.left = null; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-30T23:08:03.880

[style 对象](https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration)有一个内置的方法`removeProperty()`，所以你可以这样做：

```
elem.style.removeProperty('left'); 
```

据我所知，这与将属性设置`null`为[abaelter 建议](https://stackoverflow.com/a/10699088/2759272)的效果完全相同。我只是认为为了完整起见可能值得包括在内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:57:50.877

结合 abaelter 的答案和[http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/](http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/)为我们提供了以下功能：

```
var getCssStyle = function(elementId, cssProperty) {
  var elem = document.getElementById(elementId);
  var inlineCssValue = elem.style[cssProperty];

  // If the inline style exists remove it, so we have access to the original CSS
  if (inlineCssValue !== "") {
    elem.style[cssProperty] = null;
  }

  var cssValue = "";
  // For most browsers
  if (document.defaultView && document.defaultView.getComputedStyle) {
    cssValue = document.defaultView.getComputedStyle(elem, "").getPropertyValue(cssProperty);
  }
  // For IE except 5
  else if (elem.currentStyle){
    cssProperty = cssProperty.replace(/\-(\w)/g, function (strMatch, p1) {
      return p1.toUpperCase();
    });
    cssValue = elem.currentStyle[cssProperty];
  }

  // Put the inline style back if it had one originally
  if (inlineCssValue !== "") {
    elem.style[cssProperty] = inlineCssValue;
  }

  return cssValue;
} 
```

放入您的示例代码并进行测试：

```
console.log("getCssStyle: " + getCssStyle("elem-container", "left")); 
```

让我们`getCssStyle: 100px`允许您查看原始 CSS 值。如果您只想恢复该值，请按照 abaelter 所说的以及`null`您要恢复的 CSS 值执行操作。

# android - 从代码中引用字符串资源

> ID：10698945
> 
> 赞同：5
> 
> 时间：2012-05-22T09:06:51.290
> 
> 标签：android, string, settext

我在 strings.xml 中声明了以下字符串：

```
<string name="last_msg">Your last click was on</string> 
```

现在当有人点击一个按钮时，我想要一个文本视图来显示这个字符串，一个空格，然后是一个变量值，它是一个时间戳。

不幸的是，使用 @string/last_msg 不起作用，我不确定如何正确执行此操作，因此我没有对内容进行硬编码。

这是我的 onClick 函数代码：

```
public void showMsgNow(View view) {
    TextView lastMsg = (TextView)findViewById(R.id.textView2);
    long currentTimeStamp = System.currentTimeMillis();
    lastMsg.setText(@string/last_msg + " " + currentTimeStamp);
} 
```

我是新手，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T09:08:26.810

我在谷歌上找到了答案：

```
getString(R.string.last_msg) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-22T09:09:13.673

你不能`String`直接访问`@`，因为你需要有上下文资源，然后就这样做......

```
lastMsg.setText(context.getResources().getString(R.string.last_msg) + " " + currentTimeStamp); 
```

在你的情况下使用

```
<string name="last_msg">Your last click was on %1$s</string> 
```

执行：

```
public void showMsgNow(View view) {
    TextView lastMsg = (TextView)findViewById(R.id.textView2);
    long currentTimeStamp = System.currentTimeMillis();
    lastMsg.setText(context.getResources()
        .getString(R.string.last_msg, currentTimeStamp));
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-22T09:08:14.440

```
// getString is method of context
if (this instanceof Context) 
//If you are in Activity or Service class            
 lastMsg.setText(getString(R.string.last_msg)+ " " + currentTimeStamp);
else                         
//you need to context to get the string 
  lastMsg.setText(getString(mContext,R.string.last_msg)+ " " + currentTimeStamp);

  public String getString(Context mContext, int id){
     return mContext.getResources().getString(id);
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:09:38.523

使用下面的行

```
 lastMsg.setText(getString(R.string.last_msg) + " " + currentTimeStamp); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T09:13:23.203

试试这个 ：

```
lastMsg.setText(R.string.last_msg + " " + new SimpleDateFormat(d-MM-YYYY).format(new Date())); 
```

# puppet - Vagrant如何处理Mysql、网站源等数据？

> ID：10698957
> 
> 赞同：5
> 
> 时间：2012-05-22T09:07:37.263
> 
> 标签：puppet, vagrant

如何使用 Vagrant 处理 Mysql、网站源等数据？

作为一名程序员，我喜欢能够轻松设置开发环境。所以我创建了一个 vagrant box 并用 puppet 配置它，但我问自己，盒子里的数据呢？如果我需要销毁盒子并重新创建它会怎样？我所有的数据都将被删除！

我在崩溃的虚拟机上遇到了一些问题，我不想重犯同样的错误，我想控制我的数据。

你好吗 ？您是否使用共享文件夹来放置您的实时数据？你把你的数据放在哪里，在盒子里还是盒子里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T18:00:51.717

在当前版本的 Vagrant (1.0.3) 中，您有两个主要选择：

1.  使用共享文件夹。您可以将 MySQL 数据目录放入共享文件夹中，以便数据返回到您的主机上。这样做的缺点是，与 VirtualBox 中的本地 VM 文件系统相比，共享文件夹实际上非常慢，而且您也可能遇到奇怪的权限问题。
2.  设置任务（rake、make 等）以按需将 MySQL 数据复制到共享文件夹。然后，在决定销毁 VM 之前，您可以运行任务将数据导出到共享文件夹，然后在恢复 VM 时重新导入数据。

# asp.net - 无法将类型“System.Data.DataSet”隐式转换为“字符串”

> ID：10698958
> 
> 赞同：2
> 
> 时间：2012-05-22T09:07:39.743
> 
> 标签：asp.net, web-services, soap

下面的代码是 web 方法（这是最常见的方法，你可以在任何地方看到它），但我不断从标题中得到错误。我刚开始使用 .NET，所以如果有人能指出我正确的方向，请这样做。

```
SqlConnection myConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["mySQLconn"].ConnectionString);

[WebMethod(Description = "Select Customers")]
    public string GetVersionofSelectedCustomer(string versionEmail)
    {

        string select = "SELECT version FROM customer WHERE EMAIL = '" + versionEmail + "'";
        SqlDataAdapter adapter = new SqlDataAdapter(select, myConnection);

        DataSet custDS = new DataSet();            
        //adapter.MissingSchemaAction = MissingSchemaAction.AddWithKey;
        adapter.Fill(custDS, "Customers");

        return custDS;

    } 
```

连接在 Web.config 中定义（本地连接）并**返回 custDS；**是失败的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T09:09:34.157

您正在返回数据集，因此您应该使用返回类型作为`Dataset`

```
public Dataset GetVersionofSelectedCustomer(string versionEmail)
{
    //add your code to return dataset
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T09:10:53.343

您的函数的返回类型是`string`并且您正在尝试返回一个`DataSet`对象。你可以这样尝试：

```
public DataSet GetVersionofSelectedCustomer(string versionEmail)
{
     string select = "SELECT version FROM customer WHERE EMAIL = '" + versionEmail + "'";
     SqlDataAdapter adapter = new SqlDataAdapter(select, myConnection);

     DataSet custDS = new DataSet();            
     //adapter.MissingSchemaAction = MissingSchemaAction.AddWithKey;
     adapter.Fill(custDS, "Customers");

     return custDS;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T09:09:40.037

您的方法签名返回一个字符串，但您返回的是一个 DataSet - 不清楚您想在这里做什么 - 可能只是更改签名以返回数据集？

# matrix - 为什么二维变换需要 3x3 矩阵？

> ID：10698962
> 
> 赞同：19
> 
> 时间：2012-05-22T09:08:02.503
> 
> 标签：matrix, 2d, homogenous-transformation

我想做一些 2D 绘图，因此想实现一些矩阵转换。凭借我的浅数学背景，我试图了解如何在 C# 中做到这一点（任何其他 oop 语言显然都会这样做）。

我所读到的只是解释我们需要使用 3x3 矩阵才能应对翻译。因为你不能用乘法进行翻译。但这是我们创建转换的矩阵的乘法。所以我们使用类似的东西：

```
{ x1, x2, tx }
{ y1, y2, ty }
{ 0,  0,  1  } 
```

我理解第三列的意思，但为什么我们需要第三行？在单位矩阵以及旋转、缩放或旋转中，最后一行是相同的。是否有我尚未达到的需要它的操作？是因为某些语言（Java）在“平方维度”数组中表现更好吗？如果是这样，我可以在 C# 中使用 3 列和 2 行（因为锯齿状数组也可以正常工作或更好）。

例如，对于旋转+平移，我有一个这样的矩阵

```
{ cos(rot)*x1, (-sin(rot))*x2, tx }
{ sin(rot)*y1, cos(rot)*y2,    ty }
{ 0,           0,              1  } 
```

不需要最后一行。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-22T12:23:00.530

> 这是我们创建转换的矩阵的乘法

*这*就是我们想要方阵的原因。

假设我们按照您的建议做了，并使用 2x3 矩阵进行转换。

然后旋转将是

```
( x1, x2, 0 )
( y1, y2, 0 ) 
```

和翻译将是

```
( 1, 0, tx )
( 0, 1, ty ) 
```

我们可以通过将矩阵乘以表示该点的列向量来执行旋转或平移：

```
 ( x )
M   ( y )
    ( 0 ) 
```

以获得正确的答案。

**但是**- 我们将如何**组合**转换？确实，对于您的“对于旋转+平移，我有一个这样的矩阵”示例，您是如何*到达*该矩阵的？当然，在这种情况下你可以把它写出来，但一般来说呢？好吧，你知道答案：

> 这是我们创建转换的矩阵的乘法

所以必须有可能*将两个变换矩阵相乘得到另一个变换矩阵*。矩阵乘法的规则表明：

```
( . . . ) ( . . . )
( . . . ) ( . . . ) = ??? 
```

不是有效的矩阵乘法。我们需要可以复用的矩阵，以便我们的转换是可组合的。所以我们有额外的行。

* * *

现在，我在这里表达它的方式实际上完全背离了标准数学表示，其中熟悉的旋转和平移变换只是投影平面上齐次坐标变换的全部威力的特例——但我认为它将向您展示为什么我们需要额外的行 - 使矩阵成为正方形，从而能够与类似的矩阵相乘。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T11:59:30.757

答案是齐次坐标。要在一个操作中结合旋转和平移，需要比模型所需的额外维度。对于平面事物，这是 3 个组件，对于空间事物，这是 4 个组件。运算符采用 3 个组件并返回 3 个需要 3x3 矩阵的组件。

# ssrs-2008 - SSRS 报告服务

> ID：10698965
> 
> 赞同：2
> 
> 时间：2012-05-22T09:08:12.770
> 
> 标签：ssrs-2008

我一直在尝试 SSRS 2008R2 报告从我的一台服务器（OS windows 2008 R2 服务器）访问我在另一台服务器上托管的 Web 应用程序。我尝试使用 reportviewer 并传递服务器凭据. 我收到一个错误：无法连接到远程服务器连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机没有响应 IPAddess:80

PLZ任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:19:59.790

对我来说，这更像是一个防火墙端口阻塞问题。

`http://yourserver/reports`您可以通过机器本身打开报表服务器吗？如果是这样，请检查服务器上的防火墙设置。默认情况下，它们会阻止“域”、“公共”和“私有”中的所有传入端口。

编辑：

查看防火墙设置的屏幕截图（德语，但英语 gui 是相同的位置） ![在此处输入图像描述](../Images/0f60d31969bd6702f6f563853b24ca3e.png)

# c# - C# 桌面应用程序中 Windows 窗体上的菜单

> ID：10698969
> 
> 赞同：2
> 
> 时间：2012-05-22T09:08:15.687
> 
> 标签：c#, winforms

我正在以 Windows 形式添加菜单，看起来很简单，但我想要银色背景的菜单，就像 Windows 7 菜单一样。请告诉我这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:32:37.497

`MenuStrip`除了背景颜色外，没有其他方法可以改变它的外观。所以你必须`MenuStrip`通过扩展覆盖或绘制你自己的菜单`MenuStrip`。

# struts - 在嵌套的表单验证期间强制转换异常：选择（Struts 1.3.10）

> ID：10698972
> 
> 赞同：0
> 
> 时间：2012-05-22T09:08:20.300
> 
> 标签：struts, nested

我现在正在尝试深入研究 struts 框架，现在，我正在测试嵌套标签。检索数据时遇到问题。我的代码如下：

```
 <nested:select property="formatDisponible">
                <logic:iterate id="listFormat" property="formatList" name="videoGameForm">
                <html:option value="${listFormat}" />
                </logic:iterate>
            </nested:select> 
```

当我执行验证操作（我的意思是从我的表单中检索数据）时，我得到了以下异常：

`GRAVE: Method invocation failed. java.lang.IllegalArgumentException: java.lang.ClassCastException@110e3b5 at sun.reflect.GeneratedMethodAccessor80.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)`

感谢您的帮助（我会向您更新任何更改）。

我终于发现我之前的代码出了什么问题。如果不知何故，其他人面临同样的问题，我将把正确的代码放在下面。

```
 <nested:nest property="formatDisponible">
                <nested:select property="id">
                    <html:options collection="formatList" property="id" labelProperty="nom" labelName="id"></html:options>
                </nested:select>
            </nested:nest> 
```

我纠正了我的第一个测试并最终得到了那个解决方案。我现在唯一想弄清楚的是如何设置选定的值（因为我正在使用这个表单来更新我的对象）。如果我能解决它，我会更新我的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:26:40.320

我与这个问题相关的所有问题都已解决（至少目前如此）。我不小心重载了 select 属性的值。

# grails - Grails - Quartz 插件持久性的数据库迁移

> ID：10698974
> 
> 赞同：4
> 
> 时间：2012-05-22T09:08:21.673
> 
> 标签：grails, quartz-scheduler, dbmigrate

我们想使用 Quartz 插件持久化模式在集群中工作。我们的 DB 模式是使用 DB-migration 插件维护的，因此我们不能使用提供的 SQL 脚本来更新 DB。

是否有一个我们可以使用的创建表的 db-migration 脚本（即 Groovy 文件）？成功运行迁移的人可以与我们分享一个吗？

或者-在数据库迁移模式下工作时，是否有另一种创建表的方法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:25:28.563

也许不是尝试转换脚本，您可以通过考虑以下内容直接使用它们：http://www.liquibase.org/manual/formatted_sql_changelogs 或此： [http](http://www.liquibase.org/manual/formatted_sql_changelogs) ://www.liquibase.org/manual/custom_sql_file。我认为您可以将 liquibase 的包含标签与 sql 更改日志一起使用。基本上只需复制并粘贴内容并使用我上面列出的两种方法之一运行它们。如果你使用第二种方法，也许你不需要复制和粘贴任何东西，直接引用它？

# magento - Magento 新的基本运输方式未显示在前端

> ID：10698975
> 
> 赞同：1
> 
> 时间：2012-05-22T09:08:23.283
> 
> 标签：magento, module, shipping

我正在尝试创建一种新的运输方式。此方法允许用户从特定仓库收集物品。所以真的没有太多参与。

我在网上关注了几个 tuts，并构建并安装了我的模块。它在后端工作，我可以启用它并设置各种值。

当我使用前端结帐时....甚至使用以下代码：

**Mage::getSingleton('shipping/config')->getAllCarriers();**

我没有得到新的运输方式名称输出。

我在前端结帐时收到的消息是：

**抱歉，此订单目前没有可用的报价。**

即使我启用了其他运输方式。

* * *

我有另一个正在使用的扩展（关于位于多个仓库的库存）。作为此扩展的一部分，它列出了可用的运输选项...以便我可以将特定选项分配给特定仓库。我的新运输方式未在运输选项列表中列出。

* * *

我似乎拥有所需的一切。我的另一个扩展程序没有采用该方法……所以必须遗漏一些东西。此外，鉴于我在前端没有运输选项......令人困惑。已经有一段时间了...调试:(

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:36:04.900

我正在创建一种复杂的运输方式......而不是免费运输方式的副本。原来我实际上需要一份免费送货方式的副本，所以让我的生活更轻松......这比我想象的要容易。

不想发布我的所有代码（您还需要一个 config.xml 和 system.xml 文件），但这是我的运营商模型逻辑文件：

```
class Myco_Clickcollectshipping_Model_Carrier_Mymethod extends Mage_Shipping_Model_Carrier_Abstract {

protected $_code = 'mymethod ';

public function collectRates(Mage_Shipping_Model_Rate_Request $request)
{

    if (!$this->getConfigFlag('active')) {
        return false;
    }

    $freeBoxes = 0;
    if ($request->getAllItems()) {
        foreach ($request->getAllItems() as $item) {
            if ($item->getFreeShipping() && !$item->getProduct()->isVirtual()) {
                $freeBoxes+=$item->getQty();
            }
        }
    }

    $this->setFreeBoxes($freeBoxes);

    $result = Mage::getModel('shipping/rate_result');
    if ($this->getConfigData('type') == 'O') { // per order
        $shippingPrice = $this->getConfigData('price');
    } elseif ($this->getConfigData('type') == 'I') { // per item
        $shippingPrice = ($request->getPackageQty() * $this->getConfigData('price')) - ($this->getFreeBoxes() * $this->getConfigData('price'));
    } else {
        $shippingPrice = false;
    }

    $shippingPrice = $this->getFinalPriceWithHandlingFee($shippingPrice);

    if ($shippingPrice !== false) {
        $method = Mage::getModel('shipping/rate_result_method');

        $method->setCarrier('mymethod ');
        $method->setCarrierTitle($this->getConfigData('title'));

        $method->setMethod('mymethod ');
        $method->setMethodTitle($this->getConfigData('name'));

        if ($request->getFreeShipping() === true || $request->getPackageQty() == $this->getFreeBoxes()) {
            $shippingPrice = '0.00';
        }

        $method->setPrice($shippingPrice);
        $method->setCost($shippingPrice);

        $result->append($method);

    }

    return $result;
}

public function getAllowedMethods()
{
    return array('mymethod ' => $this->getConfigData('name'));
}
} 
```

# c - 快速排序返回未排序的中间/中值元素？

> ID：10698978
> 
> 赞同：2
> 
> 时间：2012-05-22T09:08:27.413
> 
> 标签：c, algorithm, sorting

我对编程相当陌生，并且已经学习了一段时间的排序算法。我已经在 C 中实现了下面的快速排序。它使用三个分区的中值来选择枢轴。代码的问题是每次我运行它时，应该是排序数组的中值/中间值的元素是未排序的，即它出现在其他地方。这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <limits.h>

void swap(int *x, int *y)
{
    int temp = *x;
    *x = *y;
    *y = temp;
    return ;
}

int median3(int a[], int left, int right)//Uses median of three partitioning technique
{
    int center = (left + right)/2;
    if (a[center] < a[left]) 
        swap(&a[left],&a[center]);
    if (a[right] < a[left])
        swap(&a[left],&a[right]);
    if (a[right]< a[center])
        swap(&a[center],&a[right]);

    swap(&a[center], &a[right - 1]);//since the largest is already in the right.
    return a[right - 1];
}

void quicksort(int a[], int left, int right)
{
  if (left < right) {
    int pivot = median3(a,left,right);
    int i = left;
    int j = right - 1;
    for ( ; ;) {
        while(a[++i]<pivot) {} 
        while(pivot<a[--j]) {} 
        if ( i < j)
            swap(&a[i],&a[j]);
        else
            break ;
    }
    swap(&a[i],& a[right -1]);
    quicksort(a,left,i-1);
    quicksort(a,i+1,right);
  }
    return ;
}

int main(int argc, char* argv[])
{
    int i;
    int a[] = {8,1,4,9,6,3,5,2,7,0};
    quicksort(a,0,9);
    for ( i = 0 ; i < 10 ; i++)
        printf("%d\n",a[i]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T09:33:10.467

Watch out for the edge case, where `left == right - 1`:

```
void quicksort(int a[], int left, int right)
{
  if (left < right) {
    int pivot = median3(a,left,right);
    if (left == right - 1) return;  // only two elements, already sorted by median3()
    int i = left;
    int j = right - 1; 
```

[http://ideone.com/X5Ydx](http://ideone.com/X5Ydx)

# facebook - 编辑连接到已批准操作的 opengraph 对象

> ID：10698985
> 
> 赞同：1
> 
> 时间：2012-05-22T09:08:48.527
> 
> 标签：facebook, facebook-opengraph

如果我将编辑连接到已批准操作的对象/聚合会发生什么？它会放弃我的批准吗？我想为对象添加更多属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:12:01.677

什么都不会发生，它只会将此对象添加到动作中。您不会失去最初的认可。

# python - 在python中提高关键字？

> ID：10698991
> 
> 赞同：-2
> 
> 时间：2012-05-22T09:09:30.517
> 
> 标签：python, python-3.x

我是 python 编程的新手。是否可以在 python 中引发异常而不使用 try except 块（或）仅使用 except（或）仅使用 try 块。

谢谢穆克西尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T09:14:41.020

您不需要它位于 try..except 块中，但是当您引发异常时，您总是希望捕获它并在代码中的某个位置处理它。这就是 try..except 块的使用。您需要在代码中的某处使用它来处理引发的异常，否则该异常将停止程序的执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T09:16:19.130

您可以在代码中的任何位置引发异常，它将退出调用链上的所有函数，直到它到达匹配的 except 块。您不需要*在*try 块内*引发*异常 - 只需捕获一个异常。

你可以在 try 块上拥有的全部内容如下所示：

```
try:
    ...
except A:
    ...
except B:
   ...
else:
   ...
finally:
   ... 
```

你可以在文档中找到所有这些的完整定义，但我认为你要问的是你是否可以`except:`没有`try:`- 你不能。在`try:`上面是强制性的，你至少需要一个，但它可以是其中任何一个（你可以有多个，包括任意多个`except:`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T09:13:26.760

阅读有关[错误和异常](http://docs.python.org/tutorial/errors.html)的文档，尤其是[引发异常部分](http://docs.python.org/tutorial/errors.html#raising-exceptions)

> 该`raise`语句允许程序员强制发生指定的异常。例如：
> 
> ```
> >>>
> >>> raise NameError('HiThere')
> Traceback (most recent call last):
>   File "<stdin>", line 1, in ?
> NameError: HiThere 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T09:14:44.043

您无需在`try/except`块内即可引发异常。另一方面，如果您想捕获并处理异常，那么您确实需要使用`try/except`块。

`try`不带`except`or写成语法错误`finally`。或者确实写`except`没有它的匹配`try`。这些语言结构有着千丝万缕的联系。