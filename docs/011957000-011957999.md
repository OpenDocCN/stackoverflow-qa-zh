# StackOverflow 问答 11957000-11957999

# objective-c - 从我不分配的对象中泄漏内存

> ID：11957006
> 
> 赞同：0
> 
> 时间：2012-08-14T16:45:11.780
> 
> 标签：objective-c, memory-management

我有以下功能，这会导致`*timeString`内存泄漏。我对Objective-C（和内存管理）相当陌生，但我读到您只需要首先`release`使用您的对象`alloc`。因为 I `alloc` `*formatter`，然后将其设置为`*timeString`，这是否意味着我现在也必须释放`*timeString`？

这是代码：

```
-(NSString *)getDate{

    NSLog(@"getDate");

    NSDateFormatter *formatter;
    NSString *timeString;

    formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"yyyy-MM-dd"];

    timeString = [formatter stringFromDate:[NSDate date]];

    [formatter release];

    return timeString;
} 
```

* * *

编辑：这里是`getDate`调用函​​数的地方：

```
-(NSString *)getFileName{

    //nameofXMLFile = page_##
    NSString *nameOfFile = [NSString stringWithString:pageTitle];

    //nameOfXMLFile = page_##.DataCheckSheet.xml
    nameOfFile = [nameOfFile stringByAppendingString: @".DataCheckSheet.xml"];

    NSString *dateString = [self getDate];
    dateString = [dateString stringByAppendingString: @"_"];

    NSLog(@"datestring: %@", dateString);

    dateString = [dateString stringByAppendingString:nameOfFile];

    NSLog(@"datestring with append: %@", dateString);

    //nameOfXMLFile = yyyy-MM-dd_page_##.DataCheckSheet.xml
    nameOfFile = dateString;

    return nameOfFile;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:10:00.577

正如您已经正确指出的那样，所有未显式分配的对象都是按照定义“自动释放”的，这意味着一旦它们离开定义它们的函数范围，它们就会被销毁。

要使对象的有效期更长，例如，通过将其作为类对象保留，您可以在其上调用“保留”。这个“保留”需要“释放”，就像一个“分配”的对象。

通过将相关对象的引用作为返回值传递，对象的范围扩展到函数，该函数首先调用该函数......这意味着，该对象将在调用函数结束时被销毁, 除非它在那时被保留。

nameOfFile 仍然是那个有问题的对象，因为您将 dateString 的地址复制到了该变量，有效地从存在中删除了该字符串（因此它将自动释放）。尽量避免这样的分配，除非你有理由这样做，以避免混淆。

简而言之：如果您有一系列函数调用和返回，请确保沿线某处没有“保留”，它没有被适当地释放，你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:02:20.933

了解泄漏的最佳选择是使用 Instruments 及其“泄漏”模板。

“泄漏”工具将向您显示哪些对象被泄漏，您将能够立即跳转到 ObjectAlloc 工具以查看对泄漏对象的保留/释放调用。然后，您应该能够找到丢失的版本在哪里。

照原样，您的代码在内存管理方面看起来不错。然而，这里创建的大多数字符串都是自动释放的，这意味着当外部自动释放池被耗尽时，它们将被有效释放。在池被耗尽之前，您的对象可能会出现泄漏。

在典型的应用程序中，主线程有一个由 NSApplication/UIApplication 自动安装的自动释放池，但只有当应用程序接收到事件时，池才会被耗尽（参见[这个问题](https://stackoverflow.com/questions/11874726/nstableview-reloaddata-leaking-memory/11880403#comment15820198_11880403)）

在通常的分离线程（使用 NSThread 或 pthread）中，您必须安装自己的池（并定期排空它们）。

GCD 调度队列会安装自己的自动释放池并时不时地耗尽它们。

# codeigniter - 将 CodeIgniter 从版本 1.7.2 更新到 2.0.0 - 找不到类 CI_Controller

> ID：11957007
> 
> 赞同：0
> 
> 时间：2012-08-14T16:45:12.173
> 
> 标签：codeigniter

我正在尝试将我的项目从 CI 版本 1.7.2 更新到 CI v. 2.0.0（然后我将更新到下一个版本 - 但首先我需要处理这个问题）。

所以：

我的 CI 的路径是：/home/user/www/mysite。没关系，写在这里：[http](http://codeigniter.com/user_guide/installation/upgrade_200.html) ://codeigniter.com/user_guide/installation/upgrade_200.html我应该用 v2.0 中的这个替换我的系统文件夹（应用程序文件夹除外）。

我从 2.0.0 的系统文件夹（即核心、数据库、字体、助手、语言、库）中复制了这些目录并替换了旧的。我已经完成了所有其他事情 - 在尝试启动我的新版本 CI 之后 - 它显示

```
Fatal error: Class ‘CI_Controller’ not found in/home/user/sitesystem/application/controllers/test.php on line 3. 
```

我的 /system/core 文件夹包含文件 Controller.php ，它以

类 CI_Controller - 所以一切都应该正常工作 - 发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:19:11.610

首先，在 CI 2 中，应用程序文件夹位于根目录下，而不是系统目录下。其次，如果你仔细观察你的错误说：

/home/用户/站点系统/应用程序/

你之前写过，路径是：

/home/user/www/mysite

所以我会先检查这两件事。

# css - CSS3 旋转导致问题 IE9

> ID：11957008
> 
> 赞同：3
> 
> 时间：2012-08-14T16:45:13.730
> 
> 标签：css, rotation, internet-explorer-9

我在 IE9 中使用以下内容：

```
filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3); 
```

它以旋转文本的方式工作，但奇怪的是它无缘无故地给元素一个黑色背景？！

CSS：

```
.view-see-the-difference-in-your-sector .views-field-title span {
   display: block;
   -moz-transform: rotate(-90deg); 
  -webkit-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  -ms-transform:rotate(-90deg);
  filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
  zoom: 1;
  -moz-transform-origin: 0 0;
  -webkit-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
   width: 200px;
} 
```

另请注意，除了过滤器之外，我还有所有浏览器旋转的来源。在这里使用的正确语法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T11:43:07.707

我发现这个 hack 可以为我解决问题。您应该添加过滤器：无；样式到具有黑色背景的容器。不知何故，ie9 不支持用于 ie8 的过滤器样式，因此您必须禁用它。在你的情况下：

```
.ie9 .view-see-the-difference-in-your-sector .views-field-title span  {
   filter:none;
} 
```

您必须检测您的浏览器是否为 ie9 并将此类添加到某些父节点，例如 body 标记。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-28T12:00:39.650

我们正在使用：变换：旋转（45度）；不适用于 Chrome 和 IE9。

第一次尝试：尝试[在 IE 中的 CSS 旋转属性中](https://stackoverflow.com/questions/4617220/css-rotate-property-in-ie/4617511#4617511)给出的解决方案，它在 IE9 中不起作用。

```
 i.e:

        -moz-transform: rotate(45deg);  /* FF3.5/3.6 */
        -o-transform: rotate(45deg);  /* Opera 10.5 */
        -webkit-transform: rotate(45deg);  /* Saf3.1+ */
        transform: rotate(45deg); 
```

解决方案：最终解决方案，即：

```
 -moz-transform: rotate(45deg);  /* FF3.5/3.6 */
        -o-transform: rotate(45deg);  /* Opera 10.5 */
        -webkit-transform: rotate(45deg);  /* Saf3.1+ */
         transform: rotate(45deg);  
         -ms-transform: rotate(45deg); 
          ms-transform: rotate(45deg);  /* This Line did the trick for IE9 
```

Found the solution from following URL : [http://bugs.jquery.com/ticket/8346](http://bugs.jquery.com/ticket/8346)

# c# - 添加/删除元素时列表的索引发生了什么？

> ID：11957011
> 
> 赞同：-1
> 
> 时间：2012-08-14T16:45:21.663
> 
> 标签：c#

我有一个字符串列表**Dad**，**mam**，**Junior**，**Richard**。假设我从列表中删除了索引为**2的 Junior。**理查德的指数是变成 2 还是仍然是 3 与第二位的差距？

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T16:47:01.740

> 假设我从列表中删除了索引为 2 的 Junior。理查德的指数是变成 2 还是仍然是 3 与第二位的差距？

它变成 2。没有间隙。当您添加一个元素时，该元素将附加到列表的末尾。

顺便说一句，伙计，这很难验证吗？我的意思是您无权访问编译器或其他东西？

```
using System;
using System.Linq;

public class Program
{
    static void Main()
    {
        var list = new[] { "Dad", "mam", "Junior", "Richard" }.ToList();
        list.RemoveAt(2);
        Console.WriteLine(list[2]);
    }
} 
```

印刷：

```
Richard 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T16:52:06.897

没有间隙。如果你想要一个差距，用你自己替换那个位置的值`null`。

大多数情况下，您不想要间隙，因此您会很高兴它为您保持整洁。

但是，一个实际的结果是，如果您要在同一操作中删除**很多**项目，您可能会发现仅使用未删除的项目构建一个新列表会更快（因为它会在每个消除）。

不过，这必须花很多钱才值得。如果您遇到了很大的延迟，请记住这一点，而不是直接跳入该方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T16:46:54.913

没有差距 - 编辑后的列表仅包含三个项目，它们的索引为`0`,`1`和`2`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T16:46:59.033

常规`List<T>`不是排序列表。

如果您使用[Add](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)将内容添加到末尾，则当前项目将保留在原处，而新项目将添加到列表的末尾。当前项目索引不变。

如果您使用[Insert](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)在列表中间插入项目，则索引将向上移动超过插入点。

同样，如果您[删除](http://msdn.microsoft.com/en-us/library/cd666k3e)一个项目，该项目上方的列表元素的索引将向下移动。

*索引编号永远不会有间隙。索引将始终从 0 开始，并且比列表的长度小一。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T16:47:06.277

如果您使用[Remove 方法](http://msdn.microsoft.com/en-us/library/cd666k3e.aspx)，那么是的，Richard 的索引变为 2。您删除的元素实际上是从 List 中删除的，因此索引将被更新。

如果使用[Add 方法](http://msdn.microsoft.com/en-us/library/3wcytfd1%28v=vs.80%29.aspx)，则该项会附加到 List 的末尾，因此所有其他元素的索引都不会改变。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-14T16:47:41.793

它会变成 2。 List 的 index 始终是 item 在 list 中的位置；可以而且永远不会有差距。此外，`Count`将始终返回列表中的项目数，并且项目的索引将始终为 0 到`Count-1`.

# ms-access-2010 - MS Access 子表单到基于查询的表单填充错误

> ID：11957019
> 
> 赞同：0
> 
> 时间：2012-08-14T16:45:52.017
> 
> 标签：ms-access-2010

我正在研究一个 Access 数据库，该数据库具有一个跟踪基本用户信息的主表和几个与主表具有一对多关系的子表。现在所有用户都在两个组之一中，他们可以在这两个组之间移动，并且一半的表只适用于一个组。用户所在的组由布尔值确定。

我打算如何设置各种表单和子表单是基于查询拥有主表单：

```
SELECT *
FROM Foo
WHERE InGroup1 = TRUE 
```

和

```
SELECT *
FROM Foo
WHERE InGroup1 = FALSE 
```

然后添加适当的子表单。

**但是**，一直发生的情况是，如果子表中没有与当前选择的主表 ID 相关联的记录，它只会显示表中的第一条记录。

如果我制作一个不基于查询的主表单，它可以正常工作，但是这两个组混合在一起。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:39:15.153

我无法重现您的问题。这是一个表单和子表单的示例，其中子表单数据不包含主表单的记录。主要形式是基于一个查询：

```
 SELECT * FROM groups WHERE  ingroup1 = true 
```

并且内置于 MS Access 2010 中。

![样本表格/子表格](../Images/6467cc5e5cadbdccbcc98e805f8e71b0.png)

# php - 将字符串数组写入由换行符分隔的文本文件

> ID：11957021
> 
> 赞同：5
> 
> 时间：2012-08-14T16:46:02.653
> 
> 标签：php, html

我有一个 PHP 页面，它在文本区域中接受用户的输入。多个字符串被接受为用户的输入，并且将包含 '\n' 我将其扫描为：

```
$data = explode("\n", $_GET['TxtareaInput']); 
```

每个字符串都应该以换行符分隔移动到文本文件中。这是我现在使用的代码，它用'^M'字符分隔每个字符串：

```
foreach($data as $value){
    fwrite($ourFileHandle, $value);
} 
```

无论如何我可以得到每个字符串后跟回车吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-14T16:51:50.147

您可以简单地使用 implode 将其写回：

```
file_put_contents('file.csv', implode(PHP_EOL, $data)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:56:07.927

试试这个：

```
$data = explode("\n", $_GET['TxtareaInput']);
foreach($data as $value){
    fwrite($ourFileHandle, $value.PHP_EOL);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T16:56:26.053

如果要添加新行，那么为什么要先删除它们？

```
$data = explode("\n", $_GET['TxtareaInput']); 
```

只保留这一行：

```
fwrite($ourFileHandle, $data); 
```

它将在收到您的数据时将其写入文件。

如果要在写入文件之前用回车替换所有新行，请使用以下代码：

```
 fwrite($ourFileHandle, str_replace("\n", "\r", $data)); 
```

# asp.net-mvc-3 - 单击按钮后如何关闭窗口？

> ID：11957027
> 
> 赞同：1
> 
> 时间：2012-08-14T16:46:24.970
> 
> 标签：asp.net-mvc-3, window, actionlink

我正在使用 MVC 3，并且我有一个按钮，用户可以按下该按钮来更新某些记录或不更新某些记录。我试图在用户按下`No, thank you button`. 在做了一些研究之后，我能够找到的关于这个主题的所有内容都是使用 jQuery 或 javascript 关闭一个窗口。我希望有一种方法可以关闭 actionLink 中的窗口。我在下面包含了按钮代码，请随时提出您可能遇到的任何问题，因为我会经常回来查看。如果您需要任何其他代码，我也很乐意提供。谢谢你的帮助！

```
<div class="message dialog" title="Changes Saved">
            You have successfully saved your changes.<br/>Would you like to update the other versions of this Project?
            <br />
            @Html.ActionLink("Yes, Update Projects", "UpdateProject", "Project", new { id = Model.IAMP_PK }, new { @class = "button2" })
            @Html.ActionLink("No, Thank you", null, null, new { @class = "button2" })
            </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:00:55.213

您无法从服务器端关闭浏览器。而且我不确定当客户端解决方案非常简单时为什么要这样做。

将按钮更改为：

```
@Html.ActionLink("No, Thank you", null, null, new { @class = "button2", id="close" }) 
```

然后做

```
$("#close").click(function() { window.close(); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T16:51:59.313

javascript 是答案，因为客户端代码是关闭浏览器的唯一方法。您可以基于 class=button2 将 jquery onclick 事件附加到按钮。

[http://api.jquery.com/click/](http://api.jquery.com/click/)

$(".button2").click(function() { window.close(); });

[如何在浏览器窗口中关闭当前选项卡？](https://stackoverflow.com/questions/2076299/how-to-close-current-tab-in-a-browser-window)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-13T10:28:22.370

关闭与我们当前项目相关的窗口或选项卡非常简单。

使用 onclick 函数创建按钮后，`name(closeWindow)` 使用以下代码。

```
function closeWindow() {
    alert("Your Tab is closing.....");
    //window.open('', '_self', '');
    self.close();
} 
```

# arduino - Arduino LCD 提供奇怪的输出

> ID：11957033
> 
> 赞同：0
> 
> 时间：2012-08-14T16:46:59.003
> 
> 标签：arduino

我已将 LCD 连接到不同的引脚组。它与使用的默认引脚配合得很好`LCDLirary`。但是现在当我编程显示一些有意义的东西时，它会显示奇怪的字符。如何解决这个问题？（Rx引脚是我的新引脚之一。但是我在编程时断开了LCD，只有在上传完成后才连接。但这可能与问题无关）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:50:30.940

好吧，这就是问题！*（如果我的想法是正确的）*

正如您所说，您在编程时断开了 LCD，当 LCD 单元由板初始化时，LCD 将不会连接。（初始化在编程后不久就开始了，嗯？）。那么液晶显示器如何在没有正确初始化的情况下显示正确的值呢？

只需在连接 LCD 后重置板即可。如果您希望将 Rx（可能还有 Tx）引脚用于除通过 USB 通信之外的其他目的，您也必须在其他情况下执行此操作。

# php - 使用 php 和 fopen 进行屏幕抓取

> ID：11957038
> 
> 赞同：1
> 
> 时间：2012-08-14T16:47:10.223
> 
> 标签：php, screen, scrape

> **可能重复：**
> [使用 file_get_contents 在 php 中进行屏幕截图](https://stackoverflow.com/questions/11954742/screen-scapingin-in-php-using-file-get-contents)

谁能帮助我.. 我正在尝试从 LateRooms.com 上抓取酒店评论，不要告诉我这是一个坏主意，因为我已经获得了会员的许可

我的代码：

```
<?php
header('content-type: text/plain');

$contents = file_get_contents('http://www.laterooms.com/en/hotel-reviews/238902_the-westfield-bb-sandown.aspx');
$contents = preg_replace('/\s(1,)/', ' ', $contents);

print $contents . "\n";

$records = preg_split('/<div id="review/', $contents);

for ($ix = 1; $ix < count($records); $ix++) {

$tmp = $records[$ix];

preg_match('/id="review"/', $tmp, $match_reviews);

print_r($match_reviews);

exit();

}
?> 
```

这真的很好，唯一的问题是它拉入了整个代码页面并且与 div id 'review' 不匹配

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:45:11.043

```
function file_get_contents_curl($url){
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$data = curl_exec($ch);
curl_close($ch);

return $data;
}
function DOMinnerHTML($element){ 
$innerHTML = ""; 
$children = $element->childNodes; 
foreach ($children as $child) 
{ 
    $tmp_dom = new DOMDocument(); 
    $tmp_dom->appendChild($tmp_dom->importNode($child, true)); 
    $innerHTML.=trim($tmp_dom->saveHTML()); 
} 
return $innerHTML; 
}
$url  = 'http://www.laterooms.com/en/hotel-reviews/238902_the-westfield-bb-sandown.aspx';
$html = file_get_contents_curl($url);

//parsing begins here:
$doc = new DOMDocument();
@$doc->loadHTML($html);
$div_elements = $doc->getElementsByTagName('div');

if ($div_elements->length <> 0){
foreach ($div_elements as $div_element) {
    if ($div_element->getAttribute('class') == 'review newReview'){
        $reviews[] = DOMinnerHTML($div_element);

    }
}
}

print_r($reviews); 
```

试试这个，它将返回所有评论。您可以根据需要细化内容。

# python - Python：顺序很重要的嵌套列表的交集

> ID：11957040
> 
> 赞同：8
> 
> 时间：2012-08-14T16:47:13.190
> 
> 标签：python, list, intersection, nested-lists

我想在保持顺序的同时找到嵌套列表之间的交集。

```
taxa = [['E_pyrifoliae_Ep1_96', 'Bacteria', 'Proteobacteria', 'Gammaproteobacteria', 'Enterobacteriales', 'Enterobacteriaceae', 'Erwinia'],
 ['E_amylovora_CFBP1430', 'Bacteria', 'Proteobacteria', 'Gammaproteobacteria', 'Enterobacteriales', 'Enterobacteriaceae', 'Erwinia'], 
 ['E_amylovora_ATCC49946', 'Bacteria', 'Proteobacteria', 'Gammaproteobacteria', 'Enterobacteriales', 'Enterobacteriaceae', 'Erwinia']] 
```

要找到我的交叉点：

```
set.intersection(*map(set, taxa)) 
```

或者

```
set(taxa[0]).intersection(*taxa) 
```

但不保留原来的顺序。

```
set(['Erwinia', 'Gammaproteobacteria', 'Enterobacteriaceae', 'Enterobacteriales', 'Proteobacteria', 'Bacteria']) 
```

基本上，我需要做的是找到嵌套列表之间的最后一个共同元素（它们是分类学分类）。所以当我可以调用最后一个条目时，我不需要找到所有的交叉点，只需要找到最后一个或所有交叉点。

```
intersection_lst[-1] 
```

在这种情况下，我希望输出为“Erwinia”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T17:06:20.867

找到交叉点，然后重新排序。

```
intersection_set = set.intersection(*map(set, taxa))
intersection_lst = [t for t in taxa[0] if t in intersection_set] 
```

或者，如果您非常喜欢单线：

```
sorted(set.intersection(*map(set, taxa)), key=lambda x: taxa[0].index(x)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:59:38.897

您可以通过以下方式获得：

```
[t for t in taxa[0] if all(t in l for l in taxa)]
# ['Bacteria', 'Proteobacteria', 'Gammaproteobacteria', 'Enterobacteriales', 'Enterobacteriaceae', 'Erwinia'] 
```

如果列表很大，这样做会更有效率：

```
taxa_set = map(set, taxa)    
[t for t in taxa[0] if all(t in l for l in taxa_set)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:02:31.140

```
from collections import OrderedDict
from itertools import chain

d=OrderedDict()
for elem in chain(*taxa):
    if elem in d:
        d[elem] += 1
    else:
        d[elem] = 1

intersection_lst = [ k for k,v in d.items() if v == len(taxa) ] 
```

请注意，这仅在内部列表是唯一的情况下才有效。

这是一个使用有序计数器的示例：

```
from collections import OrderedDict,Counter
from itertools import chain

class OrderedCounter(Counter,OrderedDict): pass

d = OrderedCounter(chain(*taxa))
intersection_lst = [ k for k,v in d.items() if v == len(taxa) ] 
```

*仅当元素在每个子列表中都是唯一的时才有效*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T22:00:32.737

我今天遇到了类似的问题。在我的基准测试中，使用`set.intersection`是在 CPython 中实现这一目标的最快方法，我的数据集大约需要 170us。

然而，在 PyPy 中，利用排序的手动函数只需要大约 80 微秒，*几乎是 CPython 速度的两倍*！CPython 中的相同函数耗时约 6200us。

这是后代的功能：

```
def intersect_ordered(a, b):
    matches = []
    ia, ib = 0, 0
    la, lb = len(a), len(b)
    while ia < la and ib < lb:
        va, vb = a[ia], b[ib]
        if va < vb:
            ia += 1
        elif vb < va:
            ib += 1
        else:
            matches.append(va)
            ia += 1
            ib += 1
    return matches 
```

# javascript - 如何使用画布和 Kinetic.js 裁剪图像

> ID：11957042
> 
> 赞同：4
> 
> 时间：2012-08-14T16:47:15.230
> 
> 标签：javascript, html, canvas, kineticjs

我的函数用 Kinetic.js 在另一个图层上绘制一个图像，但我想裁剪第二个名为 smsTopBg_image 的图像

```
 window.onload = function() {
        //INITIALISATION
        var stage = new Kinetic.Stage({
            container: "iPhone",
            width: 480,
            height: 720
        });
        //LAYERS
        var background_layer = new Kinetic.Layer();
        var sms_layer = new Kinetic.Layer();
        var text_layer = new Kinetic.Layer();

        //ELEMENTS
        var iPhoneBg = new Image();
        iPhoneBg.onload = function() {
                var iPhoneBg_image = new Kinetic.Image({
                image: iPhoneBg
            });
            background_layer.add(iPhoneBg_image);
            stage.add(background_layer);
        }
        iPhoneBg.src = "iPhoneBg.jpg";
        //--------------------------------------------------
        var smsTopBg = new Image();
            smsTopBg.onload = function() {
                var smsTopBg_image = new Kinetic.Image({
                image: smsTopBg,
                x: 10,
                y: 10,
            });
            sms_layer.add(smsTopBg_image);
            stage.add(sms_layer);
        }
        smsTopBg.src = "iPhoneBg.jpg";
    }; 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T01:01:20.347

您可以在 Image 构造函数中将可选的裁剪对象添加到主要属性对象。它有一个`x, y, width and height`属性。

```
var smsTopBg_image = new Kinetic.Image({
    image: smsTopBg,
    x: 10,
    y: 10,
    // random values, choose your own :
    crop: {
        x: 20,
        y: 3,
        width: 100,
        height: 42
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T08:14:16.840

好的，我在您的帮助下找到了完整的解决方案，有必要在裁剪之前添加高度和图像：

```
var smsTopBg = new Image();
            smsTopBg.onload = function() {
                var smsTopBg_image = new Kinetic.Image({
                image: smsTopBg,
                x: 200,
                y: 20,
                    width: 50,
                    height: 20,
                crop: {
                    x: 20,
                    y: 10,
                    width: 50,
                    height: 50
                }

            });
            sms_layer.add(smsTopBg_image);
            stage.add(sms_layer);
        } 
```

谢谢 ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T06:00:02.970

请参阅此 URL 以了解 Kinetic.js 中的图像裁剪：http: [//jsfiddle.net/umhm7/](http://jsfiddle.net/umhm7/)

# android - 使用 Canvas 在图像上添加文本 - Android

> ID：11957044
> 
> 赞同：0
> 
> 时间：2012-08-14T16:47:27.003
> 
> 标签：android, android-canvas, android-imageview

我想在图像顶部添加一些文本。我从 sd 卡读取图像并将其设置为 Bitmap 变量。

```
Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath()); 
```

然后我将它添加到画布上。我使用的代码如下所示，

```
Canvas c = new Canvas(myBitmap); 
```

但是当我添加这一行时，应用程序在那时崩溃了。为什么会这样，我该如何解决？

注意：上面提到的代码行在`onActivityResult`方法内部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:32:54.790

您的应用程序崩溃是因为您的

> BitmapFactory.decodeFile

返回一个不可变位图并且`public Canvas (Bitmap bitmap)`只接受一个可变位图。

要解决您的问题，您必须将不可变位图转换为可变[的，请参见此处的方法](https://stackoverflow.com/questions/4349075/bitmapfactory-decoderesource-returns-a-mutable-bitmap-in-android-2-2-and-an-immu/9194259#9194259)

如果您只定位 >= API 11 ，您可以使用

```
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inMutable = true;
Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath(), options); 
```

# c# - 与进口商 XNA 打交道

> ID：11957051
> 
> 赞同：0
> 
> 时间：2012-08-14T16:47:45.470
> 
> 标签：c#, xna

我添加`test1.bin`到我的游戏内容中。已经有一个`test.bin`完美的作品。我遇到的问题是：

> 错误 11：无法自动检测要为“Levels\test1.bin”使用哪个导入器。没有处理这种文件类型的进口商。在您的项目中指定处理此文件类型的导入器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:04:42.633

XNA 内容管道依赖文件扩展名来自动确定哪个内容导入器和处理器适用于给定文件。没有内置的`.bin`文件导入器或处理器，所以除非你自己定义了一些，否则 XNA 无法确定你想用这个文件做什么。

在 Visual Studio 中，单击您的`test.bin`文件并在属性窗口中查看其属性。应该有内容导入器和处理器的条目。记下这些值，然后选择您的`test1.bin`文件并确保它使用相同的设置。

请注意，如果您手动读取原始数据 - 换句话说，如果您不使用 a`ContentManager`加载此文件 - 您需要将其**Build Action**设置为**None**并将**Copy to Output Directory**设置为**Copy if Newer**。

# php - ping url 以使服务器具有最小可能负载的最佳方法是什么

> ID：11957060
> 
> 赞同：-1
> 
> 时间：2012-08-14T16:48:08.227
> 
> 标签：php, curl, ping

我希望在不关心输出的情况下 ping 很多 URL，我关心的是性能，我想知道这样做的最佳方式是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:37:42.733

HTTP HEAD 请求可能是您正在寻找的。它将返回有关特定 URL 的完整信息（状态代码、大小等），但不会传输其内容。可以使用任何“低级”TCP 函数发出此请求，例如 PHP 的 fsockopen 和 CURL 扩展、shell 的 telnet 等。

# javascript - 使用 switch 语句更改页面正文

> ID：11957065
> 
> 赞同：-2
> 
> 时间：2012-08-14T16:48:36.630
> 
> 标签：javascript, function, arguments, switch-statement

我正在尝试制作一个菜单，当单击 5 个按钮中的任何一个时，它将更改页面的正文而不更改菜单或其他任何内容，我还没有开始重新加载页面的工作，我仍然停留在这部分！

来自 index.html

```
<div id="quickstats">
    <p>
        <a href="#" onclick="quickStats(0);"><img src="./images/qstata.png" /></a>
        <a href="#" onclick="quickStats(1);"><img src="./images/qstatb.png" /></a>
        <a href="#" onclick="quickStats(2);"><img src="./images/qstatc.png" /></a>
        <a href="#" onclick="quickStats(3);"><img src="./images/qstatd.png" /></a>
        <a href="#" onclick="quickStats(4);"><img src="./images/qstate.png" /></a>
    </p>
</div> 
```

来自 java.js

```
quickStats(x)
{
    var print;
    switch (x)
    {
        case 0:
            print="<p>Page A</p>"
            break;
        case 1:
            print="<p>Page B</p>"
            break;
        case 2:
            print="<p>Page C</p>"
            break;
        case 3:
            print="<p>Page D</p>"
            break;
        case 4:
            print="<p>Page E</p>"
            break;
    }
    document.getElementById("currentactivity").innerHTML=print;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:55:43.377

我发现您的代码有两个问题：

1.  它应该是`function quickStats(x)`
2.  您需要有一个带有 id 的元素，`currentactivity`最后一行才能执行任何操作。添加`<div id="currentactivity"></div>`到 HTML。

# c# - 如何将对象列表转换为两级字典？

> ID：11957066
> 
> 赞同：2
> 
> 时间：2012-08-14T16:48:38.350
> 
> 标签：c#, collections, dictionary, extension-methods

我有一个客户对象列表（例如：列出客户）

```
 public class Customer
    {
        public int ID { get; set; }
        public string City { get; set; }
        public bool DidLive { get; set; }
    } 
```

我需要做的是将此“客户”集合转换为`dictionary`如下所示，

**"Dictionary<int, Dictionary<string, bool>>** " 其中外键是“ID”，内键是“城市”。

这可以使用`"GroupBy"`或`"ToDictionary"`扩展方法来完成`"IEnumerable<T>"`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:54:13.923

我在这里假设您有多个具有相同 Id 但具有不同 Cities 的 Customer 对象（如果不是这种情况并且内部字典将始终包含一个项目，请使用@oleksii 的答案）。

```
var result = customers.GroupBy(c => c.Id)
                      .ToDictionary(group => group.Key,
                                    group => group.ToDictionary(c => c.City, 
                                                                c => c.DidLive)); 
```

当然，如果有多个具有相同 Id*和*Cities 的客户，这将引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:54:33.263

这是一个开始的地方

```
var data = new List<Customer>();

data.ToDictionary(item => item.ID, 
                    item => new Dictionary<string, bool>
                    {
                        {item.City,item.DidLive}
                    }); 
```

# .net - 是否有可能有一个文件 exe.settings 的值将适应 msi 的安装文件夹？

> ID：11957067
> 
> 赞同：0
> 
> 时间：2012-08-14T16:48:44.563
> 
> 标签：.net, windows-installer, settings

所以，我有一个在 vs2010 下构建的应用程序，该应用程序在文件 .exe.config 中定义了一些值。其中一些值是路径，路径可能会有所不同，因为它取决于用户在运行 msi 时选择的安装文件夹。

有没有办法在配置文件中定义一个可以被实际安装文件夹替换的字符串？

我需要的是我的配置文件中的内容，如下所示：

```
 <setting name="path" serializeAs="String">
       <value>[installationFolder]\Germaine\RapportsBrut\</value>
    </setting> 
```

这样，我将有一个工作的默认位置，但用户将能够在不破坏应用程序的情况下更改它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:51:53.037

当然，在配置文件中使用相对路径。

而不是像这样的条目

> C:\MyHardCodedInstallPath\Data\file1.csv

在您的设置文件中有一个相对路径

> 数据\file1.csv

在您的代码中，使用 Path.Combine 将该安装路径与相对路径组合起来。

```
string fullPath = Path.Combine(InstallationPath, relativePathFromSettings); 
```

# joomla - Joomla Single Contact Form 组件不发送电子邮件

> ID：11957068
> 
> 赞同：1
> 
> 时间：2012-08-14T16:48:48.937
> 
> 标签：joomla, smtp, gmail, joomla-extensions, contact-form

我已配置此组件并配置了我的系统邮件

![](../Images/78795762b2a774cdc852ddc90f449e29.png)

![](../Images/66730cc8e55d92a9dcda456ede0d9955.png)

但从来没有任何迹象表明这个模块发送了一封电子邮件。我的发件人电子邮件或服务器的电子邮件没有收到任何内容。

管理控制台中的“群发电子邮件”功能以及使用完全相同设置的其他插件有效。所以我觉得这个模块缺少一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:38:51.150

我看到这种情况发生的唯一情况（即邮件似乎正确设置为“群发邮件”并且其他邮件功能正常工作）是当用于联系表单的联系人实际上没有设置有效的电子邮件地址时。

一旦它是电子邮件地址中的拼写错误，另一个是一个完全空白的电子邮件字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T18:31:12.813

[已验证] 我通过创建与 NO LINKED USER 的联系人解决了这个问题。意思是，从联系人中，我只是输入了我想接收的电子邮件，没有指定其他任何内容。保存后，我继续菜单以指定单个联系人并选择我刚刚创建的联系人。

# php - 下载多张个人资料照片

> ID：11957069
> 
> 赞同：0
> 
> 时间：2012-08-14T16:48:58.507
> 
> 标签：php, facebook, facebook-graph-api

这就是我现在正在做的事情。

```
 foreach($response['data'] as $friends_phtoos) {
     $f_id = $friends_phtoos['id'];
     $img = 'https://graph.facebook.com/'.$f_id.'/picture';
     $image = $f_id.'.jpg';
getFacebookPhoto($img, $image);
 } 
```

我正在为最多 10 张照片执行此循环但是下载所有 10 张照片需要很多时间。

快速获取这些照片的最佳方法是什么？我听说过**batch**。但我不知道如何将它与 PHP 一起使用。

getFacebookPhoto 函数是用于下载照片的 curl 函数。我可以使用 curl 获取 Facebook 照片吗？是否违反 FB 的条款和条件？（附加问题；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:16:05.030

您正在进行 10 次 API 调用，这会减慢您的速度。使用 curl 没有问题，但是由于我不知道你的`getFacebookPhoto`函数是什么样子的，所以我将使用它`file_get_contents`来给你一个完整的解决方案。

诀窍是进行一次 API 调用并获取所有照片。使用 Graph API 路径`/ID/photo/`也会稍微减慢速度，因为这会导致 301 重定向到用户的照片。我将使用 FQL，因为它要快得多。这为您提供了一个包含 Facebook 照片的 ID 和 URL 的数组。不要假设数据会按照您发送 ID 的顺序返回。

```
$f_id = array();
foreach($response['data'] as $friends_phtoos) {
     $f_id[] = $friends_phtoos['id'];
 }
$ids = implode(',',$f_id);
$fql = "SELECT id, pic FROM profile WHERE id IN ({$ids})";
$url = 'http://graph.facebook.com/fql?q=' . urlencode($fql);
$fb_photos = json_decode( file_get_contents($url) ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T16:51:41.500

考虑到这个 forloop 没有什么特别之处，问题很可能在于您的下载。这需要这么长时间的原因与您的实施无关，但很可能与下载速度本身有关。

# php - 在子目录中安装 cakephp 2.0.0

> ID：11957072
> 
> 赞同：1
> 
> 时间：2012-08-14T16:49:10.190
> 
> 标签：php, macos, apache, cakephp, installation

[我在这里](https://stackoverflow.com/questions/4928131/cakephp-inside-a-subdirectory)发现了类似的问题，但没有找到解决方案。基本上我已经在子目录'localhost/dyod'中安装了一个现有的 cakephp 应用程序。在不编辑 htaccess 文件的情况下，我收到一条错误消息，告诉我该应用程序正在寻找 dyod 控制器，因此似乎 uri 以某种方式关闭。当我向 htaccess 文件 (/dyod/) 添加 rewritebase 时，所有资产的 url 都关闭并且不包括 webroot。此外，它仍在寻找 dyod 控制器。我的 htaccess 文件是从[这里](http://book.cakephp.org/2.0/en/installation/advanced-installation.html)复制的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-22T15:51:26.820

添加到这一点，因为它在我的谷歌搜索的顶部，这些答案没有帮助。

CakePHP 使用了 3 个都需要修改的 .htaccess 文件。一个在顶级 CakePHP 目录中，一个在 app/ 中，一个在 app/webroot 中。将以下内容添加到其中的每一项中：

RewriteBase /path/to/dir/

在我的机器上，我有以下结构： ~/Sites/site1 ~/sites/site2/admin

每个目录都有一个单独的 CakePHP 安装。

在 site1 和 site2/admin 中安装 CakePHP。这些网站的网址是：

```
http://localhost/~me/site1
http://localhost/~me/site2/admin 
```

我一直收到此错误：在此服务器上找不到请求的 URL /home/me/Sites/site1/app/webroot/index.php。

我修改了 3 个 .htaccess 文件来获得这些：

```
site1 .htaccess:

<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteBase /~me/site1/
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule>

site1/app .htaccess:

<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /~me/site1/app/
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule>

site1/app/webroot .htaccess:

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /~me/site1/app/webroot/
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule> 
```

而已。这三个变化就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:08:32.230

在您的 .htaccess 文件中添加 RewriteBase 指令：

RewriteBase /path/to/cake/app

在您的情况下，这将是：

RewriteBase /path/to/dyod

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:33:44.683

本页解释了如何在不同于“正常”位置的地方安装 CakePHP：

[http://book.cakephp.org/2.0/en/installation/advanced-installation.html](http://book.cakephp.org/2.0/en/installation/advanced-installation.html)

基本上，您只需更改`webroot/index.php`文件中的 3 个值。您不必编辑任何 .htaccess 文件。我现在在每个站点的子目录中安装 CakePHP，而且我从来没有接触过 .htaccess 文件。只需更改其中的值`webroot/index.php`，您就可以开始了。

**示例 - 我的目录结构：**

```
-cakephp
    -cakephp_2_2
    -cakephp_1_3
    -cakephp_2_1_beta
    - ...etc
-public_html
    -mysite1
        -Config
        -Console
        -Controller
        -Lib
        - ...etc
        -View
        -webroot
    -mysite2
        -Config
        -Console
        -Controller
        -Lib
        - ...etc
        -View
        -webroot 
```

**在我的网络根目录中：**

```
if (!defined('ROOT')) {
define('ROOT', DS.'home'.DS.'myusername'.DS.'public_html');
}

if (!defined('APP_DIR')) {
define('APP_DIR', 'mysite1');
}

define('CAKE_CORE_INCLUDE_PATH', DS.'home'.DS.'myusername'.DS.'cakephp'.DS.'cakephp_2_2'.DS.'lib'); 
```

# javascript - 在 WordSmith jquery 中，双击后链接图标的位置由什么决定？

> ID：11957074
> 
> 赞同：0
> 
> 时间：2012-08-14T16:49:14.110
> 
> 标签：javascript, jquery, html, css

我已经实现了令人惊叹的 WordSmith jquery 插件并且它可以工作，但是由于某种原因我失去了我的问号图标；即它偏移到右下角而不是在所选单词的顶部。这可以在[http://dev.thediabetesnetwork.com/diabetes-articles/找到](http://dev.thediabetesnetwork.com/diabetes-articles/)

在与社区核实之前，我不想跳入并开始破解代码。WordSmith 位于[http://getwordsmith.co/](http://getwordsmith.co/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:52:28.970

Shane - 我修改了 Wordsmith 代码。请尝试这个修改后的版本（见下面的链接），看看它是否能解决您的问题。我需要做进一步的测试，但假设它对你工作正常并且测试正常，那么这将在下一个版本中。

从这里下载 wordsmith.js：

[https://docs.google.com/open?id=0B0MCUii-LndWRFpwMXQzcFlSSzQ](https://docs.google.com/open?id=0B0MCUii-LndWRFpwMXQzcFlSSzQ)

# php - 注册表单的 PHP TripleDES 密码加密

> ID：11957075
> 
> 赞同：0
> 
> 时间：2012-08-14T16:49:14.070
> 
> 标签：php, phpmyadmin, 3des

我需要这里的专业知识，我通过了很多资源却找不到答案。

我正在编写一个带有用户注册的简单登录脚本，但找不到太多帮助/

我想在新用户注册的密码上使用 3des 加密，并在注册后能够登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:04:51.980

评论者是正确的，您没有加密密码。您将为用户创建的盐字符串（或为您的应用程序创建的常量）添加到密码中。然后，您使用 SHA1 或更好的散列算法对密码进行散列。您存储散列值和盐（如果是每个用户）。当用户进行身份验证时，您获取他们给您的密码，预先添加盐并对其进行哈希处理。将其与存储的内容进行比较，如果它们匹配，则使用正确的密码。

这里有更好的解释：http: [//phpsec.org/articles/2005/password-hashing.html](http://phpsec.org/articles/2005/password-hashing.html)

# php - 如何限制饲料？

> ID：11957078
> 
> 赞同：0
> 
> 时间：2012-08-14T16:49:20.590
> 
> 标签：php, rss, feed

我正在建立一个网站来学习 PHP，并且正在将 combine-rss-feeds 制作成一个可以在我的网站上显示的提要。

这是代码：

```
<?php

    class Feed_Amalgamator
    {
        public $urls = array();
        public $data = array();

        public function addFeeds( array $feeds )
        {
            $this->urls = array_merge( $this->urls, array_values($feeds) );
        }

        public function grabRss()
        {
            foreach ( $this->urls as $feed )
            {
                $data = @new SimpleXMLElement( $feed, 0, true );
                if ( !$data )
                    throw new Exception( 'Could not load: ' . $feed );
                foreach ( $data->channel->item as $item )
                {
                    $this->data[] = $item;
                }
            }
        }

        public function amalgamate()
        {
            shuffle( $this->data );
            $temp = array();
            foreach ( $this->data as $item )
            {
                if ( !in_array($item->link, $this->links($temp)) )
                {
                    $temp[] = $item;
                }
            }
            $this->data = $temp;
            shuffle( $this->data );
        }

        private function links( array $items )
        {
            $links = array();
            foreach ( $items as $item )
            {
                $links[] = $item->link;
            }
            return $links;
        }
    }

    /********* Example *********/

    $urls = array( 'http://newsrss.bbc.co.uk/rss/sportonline_uk_edition/football/teams/m/man_city/rss.xml', 'http://newsrss.bbc.co.uk/rss/sportonline_uk_edition/football/teams/l/liverpool/rss.xml' );

    try
    {
        $feeds = new Feed_Amalgamator;
        $feeds->addFeeds( $urls );
        $feeds->grabRss();
        $feeds->amalgamate();
    }
    catch ( exception $e )
    {
        die( $e->getMessage() );
    }

    foreach ( $feeds->data as $item ) :
    extract( (array) $item );
    ?>
    <a href="<?php echo $link; ?>"><?php echo $title; ?></a>
    <p><?php echo $description; ?></p>
    <p><em><?php echo $pubDate; ?></em></p>
    <?php endforeach; ?> 
```

这是一个很棒的脚本，运行良好，但它在我的网站上占用了很多空间。如何将其限制为仅显示 5 个结果，有点像 MySQL 限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:58:57.490

将您的 foreach 更改为 for(i=0; i<5; i++) 循环。另一种可能性：引入一个计数器变量，您可以在 foreach 开始时递增和测试。当它达到 5 时跳出循环。

# java - Jar 文件自发无法定位内部根资源

> ID：11957081
> 
> 赞同：0
> 
> 时间：2012-08-14T16:49:27.743
> 
> 标签：java, class, resources, jar, jvm

我正在使用工作 JVM 来做各种事情的应用程序服务器。

工作 jvm 使用 -cp 开关启动并指定包含供应商库和其他重要功能的 JAR 文件。

我有一个非常有趣的问题，其中 jar 文件 CLASSES 正确加载和执行代码，但是任何时候他们尝试访问 jar 文件中的 RESOURCE（特别是使用 getResourceAsStream() 方法），然后它就会爆炸，声称找不到它。我已经验证这些资源肯定存在于正在加载的 JAR 中，事实上，如果我操纵 JAR 以在外部定位资源，它就可以工作。问题是这些都是专有库并且不附带源代码，所以我不得不通过反编译和方法入口断点来完成所有事情。

也许最奇怪的部分是这些库已经好几个月没有改变了，并且一直在其他（包括生产）应用程序服务器中工作。

它们在 JRE 1.6.0_17 上

所以我的问题是

*   为什么带有 -cp 条目的 JVM 能够从 jar 中加载 CLASSES 而不是 RESOURCES
*   此领域中的任何内容是否从 JRE 1.6.0_06 更改为 1.6.0_17（最近已更改）

澄清一下，在 JAR 结构中，这些资源位于 jar 的根目录上，即：

```
resource.prop
META-INF/Manifest
package/package/class.class 
```

JAR 本身在加载时显然位于类路径中。但是，以下所有内容都解析为 NULL（是的，这让我发疯了，所以我确实尝试了所有 3 个）：

```
Jarclass.getClassLoader().getResourceAsStream("./resource.prop");
Jarclass.getClassLoader().getResourceAsStream("/resource.prop");
Jarclass.getClassLoader().getResourceAsStream("resource.prop"); 
```

这看起来类似于[无法在所有计算机上访问 JAR 中的资源，](https://stackoverflow.com/questions/8621641/cant-access-resource-in-a-jar-on-all-computers)但该问题没有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:30:29.670

您是否检查过 JAR 中的 manifest.mf 文件？这是控制用于加载位于 JAR 内的资源的类路径的最简单（如果不是唯一的话）方法之一。

从 JAR 中读取资源仅与用于加载 JAR 的类路径部分相关。对于类文件，JAR 中的文件夹结构足以让类加载器加载类，基本上是 [CLASSPATH]/[Package]/[Classname]。

对于资源来说，则是另外一回事。JAR 的根目录被添加到 CLASSPATH 但不是任何子目录，因此如果“resource.prop”位于 jar 的根目录中，那么您提供的三个示例中的任何一个都可以工作。既然你说它们已经在罐子里了，那只会加深谜团。

JAR 是否以某种方式发生了变化，例如旧版本有效而​​新版本无效？

您的应用服务器的 CLASSPATH 设置最近是否更改过？我们在 IBM 的 WebSphere Application Server 上遇到了一个问题，我们必须将类加载器的规则设置为“最后一个父级”（至少如果我的记忆在这里没有让我失望的话），以便它首先使用 JVM 实例中的类路径，然后然后使用 WebSphere 的类加载器，因为我们加载了一个比 IBM 开始包含在较新版本的 WebSphere 中的 log4j.jar 更旧的 log4j.jar。

另一种选择是扩展 JAR，更新 manifest.mf 文件以包含对属性的绝对引用，然后将文件重新压缩为自定义版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:36:38.807

检查放置非工作 jar 的目录的名称。当我的应用程序被复制到带有符号`!`或其`%`名称的目录时，我遇到了类似的问题。

# c# - 在linq to sql中转换为十进制，然后转换为varchar

> ID：11957085
> 
> 赞同：0
> 
> 时间：2012-08-14T16:49:43.407
> 
> 标签：c#, sql-server, linq, linq-to-sql, type-conversion

我曾经有一个存储过程，它会简单地调用

```
SELECT item = CONVERT(VARCHAR(6), CONVERT(DECIMAL(5, 2), (t.aNumber/(t.aSecondNumber+ .0000000000001)) * 100)) + ' %',
FROM table t; 
```

得到一个百分比值。

我希望更新它，并在我的 linq to sql 查询中调用它，但是我无法弄清楚如何在对象实例化中执行此操作。所以，目前我有：

```
using (context db = new context(ConnectionString))
                {
                    var versions =
                                from t1 in db.table
                                select new CustomObject
                                {
                                    Id = t1.ID,
                                    Item = (t1.aNumber/(t1.aSecondNumber+ .0000000000001)) * 100,

                                };
                 } 
```

但这与我上面的查询不同，如何在对象实例化中使用我正在使用的 linq to sql 语法以与上面相同的方式编写转换它？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:00:51.213

这可能对您有用：

```
Item = (Convert.ToDecimal((t1.aNumber/(t1.aSecondNumber+ .0000000000001))) * 100m).ToString(), 
```

# c++ - Bada 中未解决的包含错误

> ID：11957086
> 
> 赞同：0
> 
> 时间：2012-08-14T16:49:47.417
> 
> 标签：c++, std, bada

我正在为 Bada OS 开发和应用程序，我需要使用来自 stl 的向量和其他标准结构。但是当我写：

```
#include <vector> 
```

Bada sdk 给我一个错误：

```
unresolved inclusion: vector 
```

我在 Internet 上寻找解决方案，解决方案总是在项目配置中包含 stl 的路径（Bada IDE 源自 Eclipse）。

但我不知道该路径在哪里，我试图包含我找到的所有路径（在 minGW、bada 目录等中），如果我包含它，编译器将不会运行。

请帮我！（对不起我糟糕的英语）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:54:42.610

`<vector>`是 C++ 标准库的一部分。如果您可以从标准库中获取其他头文件，那么您不需要弄乱路径。

一些嵌入式编译器可能不做模板，所以`<vector>`不会成为他们库的一部分。如果是这种情况，那你就不走运了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T15:19:35.317

如果编译器抛出错误，还是 Eclipse？根据我的 bada 经验，标准 C++ 头文件（STL 等）被 Eclipse 标记为未解析，但编译器发现它们没问题。

这不是编译错误 - 这是 IDE 错误。忽略它并继续工作。bada 支持 STL。

Bada SDK 2.0.5，针对 bada 2.0（HVGA 和 WVGA）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:43:47.713

即使这样说，它编译得很好，Eclipse 在包含使用 c++ 字符串时给了我同样的评论，但它编译得很好

此致

# clojure - 如何检查 Clojure 测试中是否抛出了 AssertionException？

> ID：11957087
> 
> 赞同：4
> 
> 时间：2012-08-14T16:49:47.900
> 
> 标签：clojure

我正在尝试为我的`:pre`和`:post`条件编写一个单元测试，我的第一个想法是这样做：

```
(ns myproj.battle-test
  (:use clojure.test
        myproj.battle))

(deftest lose-only-positive-amount-of-health
  (let [actor {:health 100}]
    (is (thrown? AssertionException
          (:health (lose-health actor -5)))))) 
```

但我不知道如何`AssertionException`从我的测试文件中引用，而是得到一个异常：

```
java.lang.IllegalArgumentException: Unable to resolve classname: AssertionException 
```

我已经尝试了各种方法（谷歌并没有提供帮助，大概是因为这是一个太简单的问题）但是没有任何运气，那么我该如何检查是否`AssertionException`被抛出？

我意识到这在很大程度上是一个初学者的问题；这些是我的前几行 Clojure :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:59:28.533

例外是类，所以只需导入它。

```
(ns myproj.battle-test
  (:use clojure.test
        myproj.battle)
  (:import a.package.which.contains.AssertionException))
... 
```

找到（在哪个包中）`AssertionException`所在的位置并将其替换为`a.package.which.contains`上面的代码。

或者您可以使用全名，就像`:import`上面的条款一样，但是如果您有多个使用该类的地方，这可能会很乏味。

UPD。我犯了一个错误。没有这样的课，`AssertionException`. 有一个 class `AssertionError`，因为它位于`java.lang`包内，所以它是自动导入的。Clojure 前置/后置条件抛出它，所以只需使用`AssertionError`而不是`AssertionException`，您的代码应该可以正常运行。

# scala - Scala 模式与清单匹配

> ID：11957089
> 
> 赞同：7
> 
> 时间：2012-08-14T16:49:49.687
> 
> 标签：scala, pattern-matching, type-erasure

[这篇很棒的 Scala 每日文章](http://daily-scala.blogspot.co.uk/2010/01/overcoming-type-erasure-in-matching-1.html)描述了如何克服匹配中的类型擦除。我正在尝试应用该技术来转换参数化类型的 IndexesSeq，但匹配失败。为什么会这样，我该如何解决？

```
object Example extends App{
    class TableColumn[T](
        val values: IndexedSeq[T], 
        val name: Option[String] = None
    )(implicit val m: Manifest[T])

    class Def[C](implicit desired : Manifest[C]) {
        def unapply[X](c : X)(implicit m : Manifest[X]) : Option[C] = {
            //println("m.toString+", "+desired.toString)
            def sameArgs = desired.typeArguments.zip(m.typeArguments).forall {
                case (desired,actual) => desired >:> actual
            }
            if (desired >:> m && sameArgs) Some(c.asInstanceOf[C])
            else None
         }
    }

    val IntTableColumn = new Def[TableColumn[Int]]
    val DoubleTableColumn = new Def[TableColumn[Double]]

    class Analysis(data: IndexedSeq[TableColumn[_]]){
        val transformedData = data.map{_ match{
            case IntTableColumn(tc) => println("Column of Int! "+ tc)
            case DoubleTableColumn(tc) => println("Column of Double! "+ tc)
            case _ => println("no match")
        }}
    }

    new Analysis(IndexedSeq(
            new TableColumn(IndexedSeq(1,2,3)),
            new TableColumn(IndexedSeq(1.0,2.0,3.0))
    ))
} 
```

如果我取消注释 Def 中的行，那么我会看到诸如

```
prototype.Example$TableColumn[_ <: Any], prototype.Example$TableColumn[Int] 
```

暗示 Analysis 构造函数中的 _ 是问题所在，但我不知道还有什么可以放在那里的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T10:22:37.733

感谢 Rex Kerr 的评论，我拼凑了一些我认为可行的东西。它可能可以更优雅/更普遍地完成，但现在似乎可以完成工作：

```
object Example extends App{
    class TableColumn[T](
            val values: IndexedSeq[T], 
            val name: Option[String] = None
    )(implicit val m: Manifest[T])

    class TableColumnMatcher[T](implicit desired: Manifest[T]){
        def unapply(tc: TableColumn[_]): Option[TableColumn[T]] = {
            if(tc.m == desired) Some(tc.asInstanceOf[TableColumn[T]])
            else None
        }
    }
    object TableColumnMatcher{
        lazy val IntTC = new TableColumnMatcher[Int]
        lazy val DoubleTC = new TableColumnMatcher[Double]
    }

    class Analysis(data: IndexedSeq[TableColumn[_]]){
        import TableColumnMatcher._
        val transformedData = data.map{_ match{
            case IntTC(tc) => println("Column of Ints!"); 
            case DoubleTC(tc) => println("Column of Doubles!")
            case _ => println("no match")
        }}
    }

    new Analysis(IndexedSeq(
            new TableColumn(IndexedSeq(1,2,3)),
            new TableColumn(IndexedSeq(1.0,2.0,3.0))
    ))
} 
```

# django - TemplateSyntaxError 尽管名称已定义？

> ID：11957095
> 
> 赞同：2
> 
> 时间：2012-08-14T16:50:24.793
> 
> 标签：django, django-templates

我有以下行`urls.py`：

```
url(r'^changepassword/$', 'django.contrib.auth.views.password_change',
    {'template_name': 'account/changepass.html', 
     'post_change_redirect' : reverse('settings')}, name='change_password'), 
```

但是，当加载不同的视图（带有指向此 url 的链接）时，我得到`TemplateSyntaxError`：

> # /account/ 处的 TemplateSyntaxError
> 
> 渲染时捕获 NoReverseMatch：未找到带有参数“()”和关键字参数“{}”的“change_password”的反向。
> 
> `In template ..../templates/account/settings.html, error at line 7`
> 
> `<p><a href='{% url change_password %}'>Change your password</a>`

可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:41:34.380

您不应`reverse`在加载 url 配置之前执行的代码中使用，例如 in`settings.py`或在您的情况下为 url 配置。

从 Django 1.4 开始，您可以在这些情况下使用[`reverse_lazy`](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-lazy)而不是。`reverse`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:58:47.413

删除`reverse`呼叫并更改它只是为了`/settings/`解决这个问题。我不确定为什么`reverse`不在这里工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T17:38:05.507

尝试：（`<a href='{% url "change_password" %}'>`用引号括起来的名称 -`change_password`应该是一个字符串，而不是一个模板变量）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-14T17:43:44.217

你可以这样使用：`{% url django.contrib.auth.views.password_change %}`

# mysql - MySQL 插入唯一且仅当条件为真时

> ID：11957098
> 
> 赞同：1
> 
> 时间：2012-08-14T16:50:32.200
> 
> 标签：mysql, sql

我有一个名为**batch1**的表，其中只有一列**id**是主键。

我可以使用以下查询将数据插入其中。

```
INSERT INTO batch1 VALUES(NULL); 
```

现在我需要为该表设置记录限制，以便它只能插入所需的行数。例如，如果 limit 设置为**1000**，则上表不得在此之上插入更多记录并给出错误。

我将限制存储在其他表中。除了LOCKS，我还有什么选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:02:09.227

以 Andomar 的回答为基础，它为我的 MySQL 版本引发了语法错误：

```
insert  into batch1 (id)
select  null
from    (
        select  count(*) as num
        from    batch1
        ) as counted
where   counted.num < 1000; 
```

这从派生表中进行选择，使用结果从外部选择返回一行或零行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:59:02.153

您可以使用一个`where`子句来防止不需要的更新：

```
insert  into batch1 
select  null
where   (
        select  count(*)
        from    batch1
        ) < 1000 
```

您可以使用[row_count](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_row-count)测试更新是否通过：

```
select  row_count() as InsertedRecords; 
```

# capifony - CAPIFONY 和 SYMFONY。部署不创建文件

> ID：11957101
> 
> 赞同：1
> 
> 时间：2012-08-14T16:50:47.010
> 
> 标签：capifony

我已经为此苦苦挣扎了一段时间。在 capifony 下，我运行 $ cap deploy:setup 并在我的远程主机上创建两个文件：1/ 发布 2/ 共享。我认为这表明到目前为止一切都很完美。

但是当我开始部署时，出现以下错误。

```
 *** [err :: ***] ln: creating symbolic link `public_html/Symfony/releases/20120814164750/app/logs': Permission denied
    *** [deploy:update_code] rolling back
    failed: "sh -c 'ln -nfs public_html/Symfony/shared/app/logs public_html/Symfony/releases/20120814164750/app/l

ogs'" 
```

看起来没有任何内容被复制到版本中。很多都复制到shared（也许所有）我不知道是否正常。

我可以得到你的建议，我可以如何解决这个问题吗？我应该在哪里寻找一些提示。我一无所知.. 非常感谢。

PS：下面是我的 deploy.rb 文件

```
set   :application,   "My app"
set   :deploy_to,     "public_html/Symfony"
set   :domain,        "mydomain.com"
ssh_options[:port] = "2222"
set :user, "****"

set   :scm,           :git
set   :repository,    "file:///media/Pierre/Symfony"
set   :deploy_via,    :rsync_with_remote_cache

role  :web,           domain
role  :app,           domain
role  :db,            domain, :primary => true

set   :use_sudo,      false
set   :keep_releases, 3

set :shared_files,      ["app/config/parameters.yml"]

set :shared_children,     [app_path + "/logs", web_path + "/uploads", "vendor"]

set :use_composer, true

set :update_vendors, true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:36:26.187

根据您发布的内容，我有两个建议。

首先是它与权利有关。检查文档中的“设置权限”部分：http: [//symfony.com/doc/current/book/installation.html#configuration-and-setup](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)。由于共享日志，这可能是一个问题。

但是，如果这是您的第一次部署，那么您是否有 app/logs 目录在版本控制之下？检查您的 .gitignore 是否正确：[http ://symfony.com/doc/current/cookbook/workflow/new_project_git.html](http://symfony.com/doc/current/cookbook/workflow/new_project_git.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T13:54:42.790

我通过在 deploy.rb 文件中添加以下行来修复此错误：

```
ssh_options[:forward_agent] = true
default_run_options[:pty] = true 
```

此[答案](https://stackoverflow.com/a/20364420/660828 "回答")对于调试 capistrano 并准确找出导致部署失败的错误很有用。

# mysql - 以分钟分辨率连接日历表上的多个表

> ID：11957102
> 
> 赞同：3
> 
> 时间：2012-08-14T16:50:47.353
> 
> 标签：mysql, performance, join, calendar

场景的简要概述：

我们在船上有一个数据记录系统，其中各种传感器读取实时数据并将该数据存储在 MySQL 数据库中。

每个传感器都有一个表格，其中瞬时传感器值带有时间戳并存储在数据库中。

现在的要求是将所有传感器的数据合并到一个表中，并在两个日期时间值之间平均每分钟的值。

**这是我到目前为止所做的：**

*1.创建了一个存储过程来创建一个日历表。* 日历过程创建一个表，其中包含两个指定日期时间值之间的日期时间戳。对于巡航报告，我正在处理日历表，如下所示：

```
cal
-------------------+
dt            
-------------------+
2012-07-09 00:00:00
2012-07-09 00:01:00
2012-07-09 00:02:00

... etc

2012-07-29 23:57:00
2012-07-29 23:58:00
2012-07-29 23:59:00 
```

总共 30241 条记录，在 0.016 秒内获取，所以没有问题。

*2\. 为每分钟平均的传感器值创建临时表。*

平均传感器表示例：

```
tbl_gyro_hdt_1min_ave
-------------------+------------------
tmstamp            | average_heading
-------------------+------------------
2012-07-09 00:00:00, 135.633333333333
2012-07-09 00:01:00, 135.633333333333
2012-07-09 00:02:00, 136.1
2012-07-09 00:03:00, 135.433333333333
etc...

29546 records fetched in 0.047 secs 
```

和另一个传感器表：

```
tbl_par_sensor_1min_ave
-------------------+------------------
tmstamp            | average_par
-------------------+------------------
2012-07-09 00:00:00, 16.269949
2012-07-09 00:01:00, 16.270832
2012-07-09 00:02:00, 16.2637752
2012-07-09 00:03:00, 16.2678025
2012-07-09 00:04:00, 16.269324
2012-07-09 00:05:00, 16.2721382
etc...

29543 records fetched in 0.047 secs 
```

*3\. 现在将临时表连接到日历表是轮子脱落的地方。*

要将单个表加入日历表，我这样做：

```
 SELECT cal.dt, tbl_gyro_hdt_1min_ave.average_heading
    FROM cal

    LEFT JOIN tbl_gyro_hdt_1min_ave
    ON cal.dt = tbl_gyro_hdt_1min_ave.tmstamp 
```

解释上述查询：

```
+----+---------------+-----------------------+--------+---------------+-------+---------+------+-------+-------------+
| Id |  Select_Type  |  Table                |  Type  | Possible_Keys | Key   | Key_Len | Ref  | Rows  | Extra       |
+----+---------------+-----------------------+--------+---------------+-------+---------+------+-------+-------------+
| 1  |  SIMPLE       | cal                   |  index | NULL          | dt    | 9       | NULL | 30243 | Using index |
| 1  |  SIMPLE       | tbl_gyro_hdt_1min_ave |  ALL   | date_index    | NULL  | NULL    | NULL | 29546 |             |
+----+---------------+-----------------------+--------+---------------+-------+---------+------+-------+-------------+ 
```

对于非常小的数据集，这可以正常工作，但对于上面的示例，它只是挂起。我试图为所有表添加索引，结果相同。

**编辑>** 我让整个数据集在一夜之间运行。

结果：

获取 30243 条记录。

持续时间：23.697 秒，**获取时间为 3000.352 秒**

下一步是在日历表中加入两个以上的表，如下所示：

```
 SELECT cal.dt, tbl_par_sensor_1min_ave.average_par, tbl_gyro_hdt_1min_ave.average_heading
    FROM tbl_par_sensor_1min_ave

    LEFT JOIN cal
    ON cal.dt = tbl_par_sensor_1min_ave.tmstamp

    LEFT JOIN tbl_gyro_hdt_1min_ave
    ON cal.dt = tbl_gyro_hdt_1min_ave.tmstamp 
```

毫不奇怪，这也挂起。

任何指针将不胜感激。

根据以下评论中的要求，以下是表模式：

```
show columns from cal;
+-------+----------+------+-----+---------+-------+
| Field | Type     | Null | Key | Default | Extra |
+-------+----------+------+-----+---------+-------+
| dt    | datetime | YES  | MUL | NULL    |       |
+-------+----------+------+-----+---------+-------+
1 row in set (0.00 sec)

show columns from  tbl_gyro_hdt_1min_ave;
+-----------------+-------------+------+-----+---------+-------+
| Field           | Type        | Null | Key | Default | Extra |
+-----------------+-------------+------+-----+---------+-------+
| tmstamp         | varchar(24) | YES  | MUL | NULL    |       |
| average_heading | double      | YES  |     | NULL    |       |
+-----------------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec)

show columns from tbl_par_sensor_1min_ave;
+-------------+-------------+------+-----+---------+-------+
| Field       | Type        | Null | Key | Default | Extra |
+-------------+-------------+------+-----+---------+-------+
| tmstamp     | varchar(24) | YES  | MUL | NULL    |       |
| average_par | double      | YES  |     | NULL    |       |
+-------------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec) 
```

**解决了：**

实施 setsuna 的更改后：

单外连接：

```
SELECT cal.dt, tbl_gyro_hdt_1min_ave.average_heading
FROM cal
LEFT JOIN tbl_gyro_hdt_1min_ave
ON cal.dt = tbl_gyro_hdt_1min_ave.tmstamp  

Fetched 30243 records 
Duration: 0.015 sec
Fetched in: 0.172 sec 
```

双外连接：

```
SELECT cal.dt, tbl_gyro_hdt_1min_ave.average_heading, tbl_par_sensor_1min_ave.average_par
FROM cal
LEFT JOIN tbl_gyro_hdt_1min_ave
ON cal.dt = tbl_gyro_hdt_1min_ave.tmstamp  
LEFT JOIN tbl_par_sensor_1min_ave
ON cal.dt = tbl_par_sensor_1min_ave.tmstamp  

Fetched 29543 records
Duration: 0.000s
Fetched in: 0.281 sec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:55:24.827

将列*cal.dt*更改为**NOT NULL**以及将*tmstamp 更改*为**TIMESTAMP**或**DATETIME**和**NOT NULL**。具有约 30,000 条记录和正确索引的 JOIN 条件字段的 JOIN 应该运行得非常快。

**注意：** @Knapie 已经给出了这个答案的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:36:15.777

解决了！

感谢setsuna（见评论）

> 将列 cal.dt 更改为 NOT NULL 以及将 tmstamp 更改为 TIMESTAMP 或 DATETIME 和 NOT NULL。具有约 30,000 条记录和正确索引的 JOIN 条件字段的 JOIN 应该运行得非常快。

实施 setsuna 的更改后：

单外连接：

```
SELECT cal.dt, tbl_gyro_hdt_1min_ave.average_heading
FROM cal
LEFT JOIN tbl_gyro_hdt_1min_ave
ON cal.dt = tbl_gyro_hdt_1min_ave.tmstamp 

Fetched 30243 records 
Duration: 0.015 sec
Fetched in: 0.172 sec 
```

双外连接：

```
SELECT cal.dt, tbl_gyro_hdt_1min_ave.average_heading, tbl_par_sensor_1min_ave.average_par
FROM cal
LEFT JOIN tbl_gyro_hdt_1min_ave
ON cal.dt = tbl_gyro_hdt_1min_ave.tmstamp  
LEFT JOIN tbl_par_sensor_1min_ave
ON cal.dt = tbl_par_sensor_1min_ave.tmstamp  

Fetched 29543 records
Duration: 0.000s
Fetched in: 0.281 sec 
```

# eclipse - 如何使用 eclipse 在 testng 中设置 sysproperty？

> ID：11957105
> 
> 赞同：2
> 
> 时间：2012-08-14T16:51:01.200
> 
> 标签：eclipse, ant, selenium, testng, reportng

我必须在 TestNG 中设置 'sysproperty key="org.uncommons.reportng.escape-output" value="false"/'。

1.  让我知道如何使用eclipse来做到这一点。
2.  如果我不能使用 eclipse 设置属性，还请告诉我如何创建 TestNG ANT 任务。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T08:41:34.023

如果您不需要经常更改它，您还可以在 pom.xml 中的 maven-surefire-plugin 中将它添加为 syspropertyVariable，就像这样。否则，请使用之前答案中的 VM 参数。

```
<groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.6</version>
            <configuration>
                <properties>
                    <property>
                        <name>usedefaultlisteners</name>
                        <value>false</value>
                    </property>
                    <property>
                        <name>listener</name>
                        <value>org.uncommons.reportng.HTMLReporter,org.uncommons.reportng.JUnitXMLReporter</value>
                    </property>
                </properties>

                <reportsDirectory>target/surefire-reports</reportsDirectory>
                <skipTests>false</skipTests>
                <systemPropertyVariables>
                    <org.uncommons.reportng.escape-output>false</org.uncommons.reportng.escape-output>
                </systemPropertyVariables>
            </configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T21:51:57.843

问题的第一部分可以通过访问以下菜单来解决 - 运行 -> 运行|调试配置 -> 您的配置 -> 'Arguments' 选项卡 -> VM 参数。将以下行添加到文本区域：

```
-Dorg.uncommons.reportng.escape-output=false 
```

对于第二个问题，请参考[TestNG Ant 文档](http://testng.org/doc/ant.html)：

```
<testng>
   <sysproperty key="org.uncommons.reportng.escape-output" value="false"/>
   <!-- the rest of your target -->
</testng> 
```

# python - “未使用的导入警告”和 pylint

> ID：11957106
> 
> 赞同：28
> 
> 时间：2012-08-14T16:51:08.990
> 
> 标签：python, warnings, pylint

所以我正在用 Python 做一个项目，并试图用 pylint 和一般地保持它的标准。所以，我有一个源文件，（我们就叫它a.py）

```
#a.py
import loggingsetup

def foo():
   log.info("This is a log message") 
```

但是，我想控制日志记录的样子，所以在 loggingsetup 我有类似的东西：

```
#loggingsetup.py
import logging

logging.root.setLevel(logging.DEBUG)

consoleOut = logging.StreamHandler()
consoleOut.setLevel(logging.INFO)  
consoleOut.setFormatter(logging.Formatter("\t"+logging.BASIC_FORMAT))
logging.root.addHandler(consoleOut)

#etc 
```

现在，这似乎工作正常。我想作为一个初步问题，我应该问这是否是解决此问题的正确方法，或者是否有一种不同的方式来构建我的代码更可取。

但我的主要问题是，当我在 a.py 上运行 pylint 时，我会收到类似“未使用的导入 - 导入 loggingsetup”的警告，因为我实际上并没有从 loggingsetup 调用任何方法或函数。

我可以做一些事情，比如将 loggingsetup 的主体重新定义为一个函数并调用它，但它看起来很愚蠢而且容易出错（如果我确实从其他地方导入 loggingsetup，我不得不担心调用它两次，如果我了解如何python 处理导入，这不是我当前设置的问题）。

我显然可以告诉 pylint 忽略该警告，但我想我会先在这里询问以确保这实际上不是我应该以不同方式处理的事情。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-20T10:32:49.697

在这种情况下，您仍然可以明确告诉 pylint 这个未使用的导入是有意的：

```
import loggingsetup # pylint: disable=unused-import 
```

请注意，该指令与导入位于同一行，因此 W0611 仅对该行禁用，而不是对下面的所有块禁用。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-04-20T10:46:19.043

如果您使用`pylint` *并且* `flake8`可以通过这种方式忽略两个工具中未使用的导入警告：

```
import loggingsetup  # noqa # pylint: disable=unused-import 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-14T17:21:48.837

我将使用的方法是`loggingsetup`用作`logging`.

```
import logging

# set up logging config here

from logging import * 
```

然后在您的其他模块中：

```
import loggingsetup as logging 
```

您可能想使用`loggingsetup`本例以外的名称，例如`tweaked_logging`or `logging_with_my_settings`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-14T17:25:19.367

您的代码应该在主脚本中调用一次的函数中

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-14T17:25:25.887

正如您所提到的，您将其包装在一个函数中并显式调用设置将解决此警告。正如 Steven 所提到的，这将被认为是更好的代码，因为它更明确地说明了你在做什么。

如果你担心调用这个函数两次，你当然可以使用模块实习生标志来允许函数体只执行一次。

```
__initialized = False

def init():
    if not __initialized:
        __initialized = True
        #DoStuff 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-10T07:58:25.893

你也可以

```
assert loggingsetup 
```

把短绒从你的背上取下来

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-01-07T00:45:47.410

我的导入路径很长，由于行大小的限制，它跨越了多行。我必须确保`# noqa`在导入的第一行而不是最后一行使用它。例如

```
from this.could.be.a.very.long.path import (  # noqa
some_method,
) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-25T20:41:23.517

这是满足警告的方法（vscode + pylint）；

```
from array import array
ar = array('i', []) 
```

因此，不再使用通配符，而是再次指定“数组”方法。

# java - 重叠时 Windows 会擦除 JFrame 的内容

> ID：11957107
> 
> 赞同：4
> 
> 时间：2012-08-14T16:51:10.803
> 
> 标签：java, swing, jframe, jpanel, paintcomponent

我使用 JFrame 创建并显示一个窗口，并将其设置为非常基本的属性。

```
public FrameVertices( String sTitle, Graph mMap, int iMul ) {
    super( sTitle );

    setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    setSize ( 300, 300 );
    setLocation ( 600, 300 );
    setVisible ( true);

    this.iMul = iMul;
    this.gGraph = mMap;
} 
```

**然后我使用paint()**方法在窗口内绘制一些东西。

问题是，当其他一些窗口覆盖我`JFrame`然后打开它时，`JFrame`不会重新绘制`JFrame`.

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T17:28:02.900

直接绘制到`JFrame`. 更好的方法是覆盖`paintComponent()`a`JPanel` 并将其添加`JPanel` 到`JFrame`：

测试.java：

```
public class Test extends JFrame {

    public static void main(String[] args) {

       SwingUtilities.invokeLater(new Runnable() {
          public void run() {
           new Test().createUI();
          }
       });

    }

  void createUI() {

             setSize(500,500);
             getContentPane().add(new MyPanel());
             setVisible(true);      
       }
} 
```

MyPanel.java：

```
class MyPanel extends JPanel {

    @override
    public void paintComponent(Graphics g) {
      super.paintComponent(g);
      //paint what you want here
      g.drawString("Hello world",250,250);
    }
} 
```

但是，如果必须，我建议添加一个 Window并在它成为焦点时`FocusListener`调用实例：http: [//docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)`repaint()``JFrame`

通过方法`windowGainedFocus(WindowEvent e)`或`windowStateChanged(WindowEvent e)`或`windowActivated(WindowEvent e)`调用`repaint()`这些方法之一然后将调用该`paint()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:36:54.927

正如大卫在较早的回答中所建议的那样，这不是处理 Swing 东西的好方法，但如果你必须这样做，或者以某种方式想要这样做，你可能想要使用`WindowListener`接口（或`WindowAdapter`类，以防你想简化覆盖方法的任务）并使用`windowActivated`or`windowDeactivated`函数以某种方式调用该`repaint()`方法。这是文档：[WindowListener#windowDeactivated](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/WindowListener.html#windowDeactivated%28java.awt.event.WindowEvent%29)

编辑：
从给定的代码示例中，您似乎已经扩展了`JFrame`该类，因此您唯一的选择是实现`WindowListener`接口。

# javascript - 我可以在 getElementsByClassName 中使用变量吗

> ID：11957112
> 
> 赞同：0
> 
> 时间：2012-08-14T16:51:35.043
> 
> 标签：javascript, variables, getelementsbyclassname

我想知道是否可以创建一个字符串并将其用作 getElementsByClassName 中的变量来获取 div 的 ID？

```
<div id="000" class="item 1 currColor">
<div id="001" class="item 2 currColor">

var class_name = "1" + "currColor";
var get_color = document.getElementsByClassName(class_Name)[0].id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:57:01.733

是的，您可以：http: [//jsfiddle.net/6XZRf/](http://jsfiddle.net/6XZRf/)

但是 javascript 区分大小写，因此`class_name`与`class_Name`.

此外，`"1" + "currColor"`是`"1currColor"`。你没有任何带有 class 的元素`"1currColor"`，你必须改变

```
<div id="000" class="item 1 currColor">
<div id="001" class="item 2 currColor"> 
```

进入

```
<div id="000" class="item 1currColor">
<div id="001" class="item 2currColor"> 
```

或相反，改变

```
var class_name = "1currColor"; 
```

进入

```
var class_name = "1 currColor"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:57:09.800

您的代码不起作用的原因是您正在搜索具有类的元素，`1currColor`但您实际上是要查找具有两个类的元素。

您可以使用`document.getElementsByClassName("1"+ " " + "currColor")`注意两个类之间的空间来做到这一点。这意味着找到我包含两个类的对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:05:18.240

当然，但是您缺少类名之间的空格，

`var class_name = "1" + "currColor";`应该`var class_name = "1" + " currColor";`

但这对类的使用更有意义，

```
//note the class name
var class_name = "item" + " currColor";
var get_color = document.getElementsByClassName(class_Name)[0].id; 
```

这是一个[简单的演示](http://jsfiddle.net/WmYkH/2/)

# javascript - 将文本文件读入数组

> ID：11957116
> 
> 赞同：0
> 
> 时间：2012-08-14T16:51:43.187
> 
> 标签：javascript, google-chrome, text, google-chrome-extension, content-script

> **可能重复：**
> [在内容脚本中读取使用 Chrome 扩展程序打包的文件](https://stackoverflow.com/questions/8550383/read-file-packaged-with-chrome-extension-in-content-script)

我想开发一个需要执行以下操作的小型扩展：

1.  读取文本文件（随扩展程序一起提供）
2.  将每一行保存为数组中的字符串
3.  检查页面的 URL 以查看它是否是与其兼容的页面之一。
4.  阅读页面以查找数组中存在的单词
5.  将这些词链接到谷歌搜索。

所以，第 3 步到第 5 步，我知道该怎么做，但第 1 步和第 2 步让我迷失了方向。我正在考虑通过 获取文件`chrome.extension.getURL("files/mytext.txt");`，但这只会给我文件，不会读取它。

谢谢！编辑：格式化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:07:54.493

`我不确定这是不是最好的方法，我对扩展编程知之甚少，但如果你有一个 URL，那么 XMLHttpRequst 应该可以工作。

```
var fileURL = chrome.extension.getURL("files/mytext.txt"); 
var xmlreq = new XMLHttpRequest()
xmlreq.open("GET", fileURL, false) //false makes it syncronous, we'll just wait till it's done
xmlreq.send()
//The file should be in xmlreq.responseText array
lineArray = xmlreq.responseText.split("\n") //standard splitting by linebreaks 
```

那里可能会进行一些错误检查，但这应该是基本协议。你也可以做同步，但如果你只是加载一个相当文本的文件，除非它很大，异步应该不是问题。

`xmlreq.send()`编辑：第一次 忘记了。

# python - Django-registration - 以异步方式发送电子邮件

> ID：11957124
> 
> 赞同：6
> 
> 时间：2012-08-14T16:52:06.090
> 
> 标签：python, django, django-registration

所以，我在我的项目中使用[django-registration](https://bitbucket.org/ubernostrum/django-registration/wiki/Home)来启用我正在构建的应用程序中的用户自我注册。我已将 django-registration 配置为向注册用户发送确认电子邮件。

我的`settings.py`：

```
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_PORT = 587
EMAIL_HOST_USER = 'myUser@myCompany.com'
EMAIL_HOST_PASSWORD = 'apassword'
...
ACCOUNT_ACTIVATION_DAYS = 7 
```

但是，用户填写注册表并点击注册按钮后，页面一直在等待电子邮件发送过程。看起来只有在发送电子邮件后才会收到响应（确认页面）。

我已经阅读了另一个[线程](https://stackoverflow.com/questions/4447081/how-to-send-asynchronous-email-using-django)，该线程显示了如何在线程中发送电子邮件。有没有办法使用 django-registration 发送电子邮件，使得表单注册提交的响应在发送电子邮件之前不会一直被阻止？我的意思是，我不想修改它`django-registration`本身。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:40:35.750

您应该使用[Django Mailer](https://github.com/jtauber/django-mailer/)来排队发送电子邮件。

或者，您可以使用[Celery 和 Django](http://celeryproject.org/)将您的电子邮件排队到 SMTP 服务器或使用[Amazon SES](http://aws.amazon.com/ses/)

```
from registration.signals import user_activated, user_registered

user_registered.connect(<Hook your add email to celery task queue> ) 
```

# c++ - 多重继承中返回的奇怪的 int 值

> ID：11957126
> 
> 赞同：4
> 
> 时间：2012-08-14T16:52:08.117
> 
> 标签：c++, multiple-inheritance

我正在从[这里](http://www.cplusplus.com/doc/tutorial/polymorphism/)修改多态性示例以测试多重继承。当我运行以下代码时，我在控制台上打印出一个奇怪的值“15794192”，我预计结果为 20。怎么了？我很欣赏你的意见。

我试图解决由多重继承问题引起的错误，并提出不会产生任何构建错误的代码。我正在讨论的问题可能不是源于多重继承，但我还不确定。网页中引用的原始示例效果很好，不用说。

(环境) Ubuntu 12.04, cmake 2.8.7 在eclipse Indigo上运行

```
#include <iostream>
using namespace std;

class CPolygon //: public CShape
{
protected:
  int width, height;
public:
  void set_values(int a, int b)
  {
    width = a;
    height = b;
  }
  virtual int area(void) =0;
  void printarea(void)
  {
    cout << this->area() << endl;
  }
};

class CustomPolygon : public CPolygon
{
public:
  int customParam;
  void printarea(void)
  {
    this->CPolygon::printarea();
  }
};

class Rectangle : public CPolygon // This class should be concrete.
{
public:
  int area(void)
  {
    return (width * height);
  }
  void printarea(void)
  {
    this->CPolygon::printarea();
  }
};

class CustomSquare : public CustomPolygon, Rectangle  // Concrete class
{
public:
  int area()
  {
    this->Rectangle::area();
  }
  void printarea(void)
  {
    this->Rectangle::printarea();
  }
  void set_values(int a, int b)
  {
    this->Rectangle::set_values(a, b);
  }
};

int main()
{
  CustomSquare *cs = new CustomSquare();
  cs->CustomSquare::set_values(4, 5);
  cs->CustomSquare::printarea();
  return 0;
} 
```

* * *

（2012 年 8 月 14 日更新）感谢建议，现在我可以避免使用`virtual inheritance`. 更新的代码在这里：

```
#include <iostream>
using namespace std;

class CPolygon
{
protected:
  int width, height;
public:
  void set_values(int a, int b)
  {
    width = a;
    height = b;
  }
  virtual int area(void) =0;
  void printarea(void)
  {
    cout << this->area() << endl;
  }
};

class CustomPolygon : virtual public CPolygon
{
public:
  int customParam;
};

class Rectangle : virtual public CPolygon
{
public:
  int area(void)
  {
    return (width * height);
  }
};

class CustomSquare : public CustomPolygon, Rectangle
{
};

int main()
{
  CustomSquare *cs = new CustomSquare();
  cs->CustomSquare::set_values(4, 5);
  cs->CustomSquare::printarea();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T16:54:12.093

你需要从方法中返回一些东西`CustomSquare::area()`：

```
int area()
{
  return this->Rectangle::area();
} 
```

您还应该考虑使用虚拟继承，因为您有一个菱形继承的例子：

```
class CustomPolygon : virtual public CPolygon {};

class Rectangle : virtual public CPolygon {}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T16:57:04.280

在 中的函数`area`中`CustomSquare`，您不会返回任何值！

我不熟悉 Eclipse，但我很确定有一种方法可以针对这种情况启用警告。
在 g++ 中，它将是`-Wreturn-type`开关，或者`-Wall`

# jquery - 带有一系列面板的一页网站，每个面板的大小与视口大小相同

> ID：11957132
> 
> 赞同：4
> 
> 时间：2012-08-14T16:52:49.210
> 
> 标签：jquery, jquery-plugins, responsive-design, viewport

我一直在寻找一种方法来实现这一点，但似乎无法找到答案。我想创建一个单页网站，该网站由一系列面板组成，每个面板的大小（高度和宽度）和不同的背景颜色。

所以，当我进入页面时，我的视口充满了面板 1，然后我可以向下滚动到面板 2，这也将完全填满视口。

这是一个快速测试页面来说明我的意思：[http](http://dev.manifold.ws/test/) ://dev.manifold.ws/test/ 但是，很明显，我想要的是每个面板的高度是视口的 100%（不是固定高度）。

这是一个更复杂的网站，它成功地做到了：http: [//www.deuxhuithuit.com](http://www.deuxhuithuit.com)

我觉得必须有一个相当简单的方法来实现这一点，但我似乎找不到它。

任何帮助将不胜感激。我需要一些 jQuery 吗？我应该依赖插件吗？或者有没有办法用 CSS 做到这一点？

谢谢，

-汤姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T21:30:24.663

好吧，看来我终于想通了。最后真的很简单。不需要 jQuery 或插件。我用一个工作示例更新了我的测试页面：http: [//dev.manifold.ws/test/](http://dev.manifold.ws/test/)

这是HTML：

```
<body>

  <section id="red">
  </section>

  <section id="blue">
  </section>

  <section id="green">
  </section>

</body> 
```

和CSS：

```
html,body {
height:100%;
margin:0;
padding:0;
}

#red {
min-height:100%;
position:relative;
background:#F00;
}

#blue {
min-height:100%;
position:relative;
background:#00F
}

#green {
min-height:100%;
position:relative;
background:#0F0;
} 
```

很直接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:08:42.020

听起来您正在使用 One Page Nav jQuery 插件：

[http://trevordavis.net/blog/jquery-one-page-navigation-plugin/](http://trevordavis.net/blog/jquery-one-page-navigation-plugin/)

这是一个演示： [http ://trevordavis.net/play/jquery-one-page-nav/](http://trevordavis.net/play/jquery-one-page-nav/)

我今天早上在 StackOverflow 问题上看到了这一点：http: [//www.visualwayofthinking.com/en/](http://www.visualwayofthinking.com/en/)

单击顶部的选项卡以查看动画。

# c# - dll中的访问类？

> ID：11957133
> 
> 赞同：0
> 
> 时间：2012-08-14T16:52:51.410
> 
> 标签：c#

从 Windows 窗体的主类中，我试图在另一个库（dll）中创建一个类的对象。

但是我无法创建这个对象，因为当我输入该类的名称时，我没有得到 Visual Studio 的任何帮助。

我想我需要一个对库的引用，我试图右键单击库，然后添加引用并选择我有主类和 Windows 窗体的项目的名称。

但它仍然无法正常工作！我做错了还是错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T16:54:02.377

> 但它仍然无法正常工作！我做错了什么还是我错过了什么？

确保您已将定义此类的名称空间纳入范围。例如：

```
namespace FooBar
{
    public class Foo  
    {

    }
} 
```

然后在您的 WinForms 应用程序中添加对包含该类的类库的引用后添加命名空间：

```
using FooBar; 
```

现在您可以创建实例：

```
Foo foo = new Foo(); 
```

当然，为此`Foo`必须声明为`public`. 如果不是，那么您当然无法访问它。请记住，如果该类没有可见性修饰符：

```
namespace FooBar
{
    class Foo  
    {

    }
} 
```

相当于：

```
namespace FooBar
{
    internal class Foo  
    {

    }
} 
```

所以`internal`假设这意味着您不能从另一个程序集中访问它。一定是`public`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:54:14.463

对(dll)，[MSDN](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.80%29.aspx)`access`中的方法进行如下步骤`library`

*   右键单击`references`表单项目中的文件夹添加单击添加引用选择dll的项目或文件夹。
*   在您的类（表单）中包含 dll 的名称空间假设您有名称空间 yourcomapany.communication 然后使用`using`包含名称空间来访问其中的类。

    使用 yourcomapany.communication；

# javascript - 在其他网站上查找/着色/标记文本

> ID：11957134
> 
> 赞同：1
> 
> 时间：2012-08-14T16:52:49.783
> 
> 标签：javascript, html, cross-domain

我想更改另一个网站上的文本。假设我想将这个问题*的其他网站上的标题查找/颜色/标记文本着色*为红色（无需访问文件/服务器本身）。因此，当您访问 mywebsite.com/example 时，您会看到该页面带有已读标题。

有什么聪明的方法可以做到这一点吗？

我找到了几种解决方案，但没有什么是我真正需要的：

1：浏览器插件。然后我就可以完全访问网站并可以更改它们，但我真的不想强迫人们安装浏览器插件。

2：通过服务器加载网站，改变标题，然后发送给客户端。这是有问题的，因为服务器必须在发送之前完成工作。这也可能会破坏某些东西（尽管 BASE-tag 可以用来克服一些错误）

3：书签。我可以编写一些javascript，当用户单击书签时，它们会附加到实际页面。问题是您的用户必须主动做某事，这是我不想要的。

我想做的：将页面加载到 iframe 中，并以某种方式将脚本附加到内容中。我可以以正常方式显示网页，但仍将文本更改为红色。据我所知，这是不可能的，但我希望你能得到我想要的照片。

如果您能以任何方式帮助我，或者只是为我指明某个方向，我们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:59:10.510

据我所知，如果不访问域或不访问代码，就无法更改另一个网站。通常，如果您没有权限，不建议这样做。

# php - PHP MySQL 连接两个表

> ID：11957140
> 
> 赞同：1
> 
> 时间：2012-08-14T16:53:14.303
> 
> 标签：php, mysql

我有两张桌子，歌曲和历史。歌曲表如下所示：

```
ID | title      | artist      | duration
1  | some title | some artist | 83592 
```

历史表如下所示：

```
ID | title      |   artist    | duration | date_played
5  | some title | some artist | 83592    | 2012-08-08 11:22:00 
```

如果历史表中最新条目中的标题和艺术家匹配，我将如何从歌曲表中回显 ID？

我试过`SELECT * FROM history JOIN songs ON title=songs.title AND artist=songs.artist ORDER BY date_played DESC LIMIT 0, 1`了，但没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:58:28.040

```
SELECT s.ID
FROM songs s
INNER JOIN (SELECT * FROM history h ORDER BY date_played DESC LIMIT 1) lastHistory
ON lastHistory.title = s.title AND lastHistory.artist = s.artist 
```

( [Sqlfiddle](http://sqlfiddle.com/#!2/54f95/3) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T17:10:03.833

```
SELECT * FROM history A INNER JOIN songs B 
ON A.title=B.title AND A.artist=B.artist 
ORDER BY A.date_played DESC 
```

我的建议是在历史表中，您可以使用歌曲表的歌曲 ID 而不是艺术家和标题。

表：歌曲

```
ID | title      | artist      | duration
1  | some title | some artist | 83592 
```

表：历史

```
ID | songid  | date_played
5  | 1       | 2012-08-08 11:22:00 
```

这样您就可以在架构中进行一些优化。

然后你可以试试这个查询。

```
SELECT * FROM history A INNER JOIN songs B 
ON A.songid=B.ID ORDER BY A.date_played DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:08:48.743

```
SELECT songs.* 
FROM songs, (SELECT * FROM history ORDER BY DESC date_played LIMIT 1) hist_view
WHERE songs.title = hist_view.title 
    AND songs.artist = hist_view.artist 
```

上面的查询创建了最近播放的名为 hist_view 的歌曲的内联视图（使用 LIMIT 和 ORDER BY DESC）。然后它与歌曲表结合，根据艺术家和标题查找匹配的歌曲。

我建议你在历史表中添加类似 song_id 的东西作为外键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T19:03:25.600

您可以使用

```
SELECT   songs.id
FROM     songs,
         history
WHERE    songs.title = history.title
AND      songs.artist = history.artist
ORDER BY history.date_played DESC 
```

或者

```
SELECT     songs.id
FROM       songs
INNER JOIN history ON  history.title = songs.title
                   AND history.artist = songs.artist
ORDER BY   history.date_played DESC 
```

但如果你按照 Vinay 的建议组织你的桌子会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T16:57:14.733

检查这个

```
select songs1.id,history1.title,history1.artist 
from songs as songs1,history as history1
order by date_diplayed desc 
```

我认为这个查询可以解决您的问题

# java - 避免将对象中的某些属性包含在 WSDL 中

> ID：11957141
> 
> 赞同：0
> 
> 时间：2012-08-14T16:53:17.143
> 
> 标签：java, eclipse, web-services, axis2

我有一个将对象作为参数的 Web 服务类。该对象有许多字段，但 Web 服务并不需要所有字段。我正在使用 Eclipse Web 服务向导和 Axis2 创建 Web 服务。有没有办法阻止这些属性出现在 eclipse 向导生成的 wsdl 中。我尝试在 services.xml 中设置 beanPorpertyRules，如下所示，但这也不起作用。任何帮助，将不胜感激。

```
<service name="VerifyService" >
<Description>
    Please Type your service description here
</Description>
<messageReceivers>
    <messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-only" class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver" />
    <messageReceiver  mep="http://www.w3.org/2004/08/wsdl/in-out"  class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/>
</messageReceivers>
<parameter name="ServiceClass" locked="false">xxxxxxxxx</parameter>
<parameter name="beanPropertyRules">
    <bean class="xxxxxxxxx" excludeProperties="orderID,ship,bill,items,itemIds,mercTotal,ordTotal,cCode" />
</parameter> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:36:44.707

事实证明，您必须使用管道而不是逗号来分隔排除属性。

# iphone - Facebook iOS SDK：isSessionValid 返回 no，但是当我实际登录时

> ID：11957144
> 
> 赞同：0
> 
> 时间：2012-08-14T16:53:40.297
> 
> 标签：iphone, ios, facebook-graph-api

我正在尝试使用 Facebook SDK 从我的应用程序登录到 FB。我虔诚地遵循了本教程[https://developers.facebook.com/docs/mobile/ios/build/#implementsso ！](https://developers.facebook.com/docs/mobile/ios/build/#implementsso)

我的问题 这就是我所做的（我的 iPhone 中没有安装 Facebook 应用程序） 1\. 我第一次从“iPhone”中的应用程序登录到 Facebook 时，它打开了 Safari。我登录并授予了我的应用程序的权限。2\. 我从我的 iPhone 中删除了我的应用程序并重新启动了我的 iPhone。3\. 现在，当我再次尝试从我的应用程序登录到 FB 时，isSessionValid 调用返回“no”，并且我尝试打印访问令牌并返回 null。这可以。但是应用程序在执行 isSessionValid 时，应用程序然后调用（如教程中所示）[thisAppDelegate.facebook authorize:nil]; 它在 iPhone 中打开 Safari 并带我到一个 Facebook 页面，上面写着我已登录（怎么会，当 isSessionValid 返回 null 时？好的，假设这个应用程序' 尽管我已登录，但与 FB 的会话结束了）并且该应用程序已获得授权。我在下面的屏幕中单击“确定”，应用程序崩溃。

![在此处输入图像描述](../Images/be9429d2d07b98ab89fd1bd5d6c9391d.png)

fbLogin 调用完成后，我得到一个 EXC_BAD_ACCESS（代码 1）。这似乎发生在第 2 行（“for”循环）的这个方法中的 FBURLConnection.m 中：

```
- (BOOL)isCDNURL:(NSURL *)url
{
    NSString* urlHost = url.host;
    for (NSString* host in _cdnHosts) {
        if ([urlHost hasSuffix:host]) {
            return YES;
        }
    }

    return NO;
} 
```

打印“urlHost”的值给了我“graph.facebook.com”的值。

有人可以帮忙吗？

**代码片段**

**AppDelegate.h**

```
#import <UIKit/UIKit.h>
#import "FBConnect.h"

@interface com_AppDelegate : UIResponder <UIApplicationDelegate, FBSessionDelegate> {

    Facebook *facebook;
}

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, retain) Facebook *facebook;

@end 
```

**我的 AppDelegate.m**

```
...
@synthesize facebook;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    facebook = [[Facebook alloc] initWithAppId:kFBAppId andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    return YES;
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    NSLog(@"AppDelegate.handleOpenURL");
    return [facebook handleOpenURL:url]; 
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    NSLog(@"AppDelegate.openURL");
    return [facebook handleOpenURL:url]; 
}

- (void)fbDidLogin {

    NSLog(@"AppDelegate.fbDidLogin");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
    NSLog(@"Set the facebook accessToken to '%@' & expiry to '%@'", [facebook accessToken], [facebook expirationDate]);
}
... 
```

我有一个 FBTalker 类，它将打开一个 FB 连接。

来自**FBTalker.h**

... @interface ViewController_FBTalker : UIViewController { id appDelegate; @property (非原子) com_AppDelegate *thisAppDelegate; ...

**FBTalker.m**

```
...
-(void) initializeView {

    appDelegate = [[UIApplication sharedApplication] delegate];
    thisAppDelegate = (com_AppDelegate *) appDelegate;

    /*
     Check for a valid session and if it is not valid call the authorize method which will both log the user in and prompt the user to authorize the app
     */
    NSLog(@"thisAppDelegate.facebook: access token - %@", [thisAppDelegate.facebook accessToken]);
    NSLog(@"thisAppDelegate.facebook: exp date - %@", [thisAppDelegate.facebook expirationDate]);

    if (![thisAppDelegate.facebook isSessionValid]) {
        [thisAppDelegate.facebook authorize:nil];
        NSLog(@"No valid FB Session yet");
        // Checks if the App has permission to publish to the user stream
        /* NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"publish_stream", 
                                nil];
        [thisAppDelegate.facebook authorize:permissions];
        */
    } else {
        NSLog(@"Valid FB Session exists");
    }

... 
```

**环境** XCode 4.3.3 Facebook iOS SDK（来自 Github 的最新版本）[https://github.com/facebook/facebook-ios-sdk/](https://github.com/facebook/facebook-ios-sdk/) iOS 5 iPhone 4（未安装 Facebook 应用程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:47:27.420

我也遇到过类似的问题，一次。这是因为，通常在登录时，访问令牌保存在`UIWebView`的缓存存储中。如果您想一次又一次地登录，您需要从 web 视图中删除缓存。您可以使用此方法单独清除 facebook 域的缓存。

```
- (void) clearFBCache 
  {
   for(NSHTTPCookie *cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {

    if([[cookie domain] isEqualToString:@"facebook"]) {

        [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:cookie];
    }
   }
  } 
```

这种方法对我有用。希望这对你也有帮助。

# php - mysql 查询按上一篇文章的顺序

> ID：11957145
> 
> 赞同：1
> 
> 时间：2012-08-14T16:53:43.437
> 
> 标签：php, mysql, sql, database

dHello 你能帮我查询一下最近帖子的主题排序吗？我的意思是，当有人在上面发帖时，我希望某个主题能够排在首位。以下是表格：

**讨论**

*   id_discution
*   姓名
*   id_category
*   日期

**注释**

*   id_comment
*   id_user
*   描述
*   类型
*   id_discussion
*   日期（时间戳）

这是我的代码，但我得到了重复的主题，但它们的顺序很好

```
select discussion.id_discution, discussion.name, discussion.id_category, 
    discussion.date, discussion.report, comments.id_comment, comments.id_pet_dem_des, 
    comments.date,comments.type 
from discussion,comments 
where discussion.id_discution=comments.id_discussion 
    AND type=3
order by comments.id_comment  desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:47:25.300

对于那些感兴趣的人，这里有一个适用于所有 RDBMS 提供者的示例（尽管显然是 DB2 保留`COMMENT`和`TYPE`......）：

```
SELECT Discussion.discussionId, Discussion.title, 
       Discussion.categoryId, Discussion.startedAt -- + other columns
FROM Discussion
LEFT JOIN (SELECT discussionId, MAX(madeAt) as madeAt
           FROM Comment
           WHERE type = 3
           GROUP BY discussionId) as Most_Recent
ON Most_Recent.discussionId = Discussion.discussionId
ORDER BY COALESCE(Most_Recent.madeAt, Discussion.startedAt) DESC 
```

（有一个有效的 SQLFiddle[示例](http://www.sqlfiddle.com/#!2/ed188/2)。）

其他注意事项：

*   不要只将事物标记为“日期”——尽量具体——也不要用它们的数据类型来标记它们。使用诸如`startedAt`等之类的东西来说明清楚。
*   我相信通常的做法是使用`<entity_name> + 'Id'`，而不是相反（至少，大多数人会期待这种格式）。
*   尝试与您的实体（表）名称是单数还是复数保持一致。显然已经为此进行了圣战，但我看到的大多数建议都说要使它们变得单一（以表格中的*一行*命名，而不是整个集合命名）。
*   如前所述，只使用显式连接，不要使用逗号分隔的`FROM`子句（通常在 s 期间你还可以`INNER JOIN`，但除此之外事情会变得很奇怪，所以在这些时间练习适当的行为）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T17:00:47.877

`GROUP BY`讨论表的主键...

```
SELECT
  discussion.id_discution, discussion.name, discussion.id_category, discussion.date, discussion.report
FROM
  discussion
INNER JOIN
  comments
    ON  discussion.id_discution = comments.id_discussion
    AND type=3
GROUP BY
  discussion.id_discution
ORDER BY
  MAX(comments.date)  desc 
```

注意：我没有在子句中包含`comments`表中的任何数据。`SELECT`

这是因为您只希望每个讨论出现一次，但每个讨论可以有很多评论。您要么让讨论出现多次，并包含评论，要么在结果中不包含评论数据。

您*可以*包含聚合值，例如`COUNT(*)`显示有多少评论，`MAX(comments.date)`以显示讨论的评论最近时间等。

# javascript - 显示/隐藏 div onmouseover/onmouseout Javascript

> ID：11957147
> 
> 赞同：0
> 
> 时间：2012-08-14T16:53:46.490
> 
> 标签：javascript, html, css, onmouseover, onmouseout

我的页面上有一个超链接。我想在鼠标悬停在超链接上时显示一个 div，并在鼠标移出时隐藏它。

我的html：

```
<a onmouseover="showDiv(this)" onmouseout="hideDiv(this)">
    <img>
    <div class="inner-block">
         Content
    </div>
</a> 
```

Javascript：

```
function showDiv(elem) {
    elem.getElementsByTagName("div").style.visibility="visible";
}

function hideDiv(elem) {
    elem.getElementsByClassName("inner-block2").style.visibility="hidden";
} 
```

和 CSS：

```
.inner-block {
    visibility: hidden
} 
```

我尝试过 getElementsByTagName、getElementsByClassName，无论我尝试得到什么

```
Uncaught TypeError: Cannot set property 'visibility' of undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T16:56:36.777

尝试这个 ：

```
function showDiv(elem) {
    elem.getElementsByTagName("div")[0].style.visibility="visible";
}

function hideDiv(elem) {
    elem.getElementsByTagName("div")[0].style.visibility = "hidden"
} 
```

因为 getElementsByClassName("inner-block2") 将返回 NodeList

# javascript - 如何在第一页加载时制作 jQuery 弹出消息？

> ID：11957149
> 
> 赞同：0
> 
> 时间：2012-08-14T16:53:49.127
> 
> 标签：javascript, jquery, popup

我正在使用 C# 中的 ASP.NET 在 Web 应用程序中工作，我想实现一个弹出消息来通知用户新功能可用，它与 Facebook 新功能消息类似。

弹出窗口应该只在主页和用户首次加载时触发，弹出消息的位置是固定的，当页面滚动到底部时应该消失。

我的问题是如何跟踪页面加载是主页并且是用户的第一次？以及任何能够帮助弹出消息的 jQuery 插件？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:57:51.163

您可以执行一个 ajax 请求，该请求调用一个控制器，该控制器创建一个会话，指示它是第一个页面加载。

根据结果​​，标记弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:00:27.537

只是[谷歌](http://bit.ly/IKxFaY)`jQuery`弹出解决方案。他们有很多。

要仅在主页上显示弹出窗口，您可以使用：

```
jQuery(location).attr('href'); 
```

并且只显示一次，您可以设置`cookie`.

这是一个非常好的`jQuery`cookie 插件：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

它可以让您轻松设置 cookie：

```
$.cookie("cookieName", "cookieValue"); 
```

# php - MYSQL - 文件名的字段类型？

> ID：11957162
> 
> 赞同：2
> 
> 时间：2012-08-14T16:54:34.980
> 
> 标签：php, mysql, database, database-design

了解我的数据库后，在我的应用程序中的某个时刻，用户将能够上传一张（或多张照片）。我的朋友告诉我，使用文件名比使用一团文本更好。我应该为此使用 varchar 还是 varbinary？

此外，如果用户要上传更多图片（假设最大值为 10），最好为图片创建一个表并创建一个连接表，例如 userspictures，还是将所有图片存储在一个字符串中会更好用逗号或类似的东西分隔？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T16:57:36.130

正如您的朋友所说，最好只将文件名存储在数据库中。我会建议`VARCHAR(255)`。

我真的建议您为多个文件创建另一个表：

```
CREATE TABLE photos (
  id INTEGER UNSIGNED AUTO_INCREMENT,
  user_id INTEGER UNSIGNED,
  filename VARCHAR(255) UNIQUE NOT NULL,

  PRIMARY KEY(id)
);

SELECT id, filename FROM photos WHERE user_id = [user_id] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:01:53.567

将所有图片存储在逗号分隔的字符串中将违反第一范式，这可能导致查询效率低下。您必须将数据简化为原子形式，因此在这种情况下，请始终形成一个单独的表来存储各个数据项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:20:46.707

您应该将数据库中的图像文件名与`varchar`数据类型一起使用，而不是`blob`因为`blob`（二进制大对象）数据类型用于存储大量二进制数据。将图像保存在服务器上并将图像名称传递给数据库。您为多个文件创建另一个表，这很好。

# git - 基本的 git 工作流程理解

> ID：11957167
> 
> 赞同：1
> 
> 时间：2012-08-14T16:54:45.780
> 
> 标签：git, git-svn, magento

我有一些基本的 git 问题，我还不明白，希望有人能帮助我。假设我正在做一个 Magento 项目，我在本地运行它，但我想把它带到网上。所以我使用 git 将我的商店推送到我的服务器。在 Magento 提供更新之前一切正常。所以这是我的问题：

我在本地目录和 git add + git commit 中进行了任何更改，但是当我通过 Magento Connect 将我的 Magento Shop 从 1.7 更新到 1.7.1 时，我的服务器上的设置与本地计算机上的设置不同，对吧?

那么我该怎么做，让他们平等？我是否必须从我的服务器上运行的版本中签出并用我的本地 magento 替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:46:29.900

从版本控制的角度来看，您不希望您的开发环境和实时环境在同一个分支上。例如，您可以使用`master`分支进行开发，然后将您的实时环境放在`stable`分支上。还有具有多个`feature`,`release`和`hotfix`分支的分支结构。但现在让我们保持简单。

关于更新。您永远不想直接在实时环境中运行它们。回滚相关的数据库更改几乎是不可能的。因此，请始终更新并将您的工作从开发推向上游，而不是相反。

因此，请始终在您的开发环境（因此是 master 分支）上进行升级，并在测试后将它们提交到您的存储库。之后，您可以合并或挑选到另一个分支。然后更新实时分支（即 git pull 或 git fetch、git rebase）以部署升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:27:11.733

我（正在尝试）[将此工作流程](http://nvie.com/posts/a-successful-git-branching-model/)用于我的 Magento 安装和升级。恕我直言，没有办法无缝升级 Magento 实时站点。在某些时候，当数据库重建到新版本时，需要停机来阻止订单进入。

我得到的最接近的是设置另一个运行新版本的云实例，并在解决所有错误后对数据库进行核对。然后导入当前的实时数据库并让新的 magento 主机在其上运行一段时间。

然后决定是否在升级完成后禁用需要手动输入数据的旧站点。

然后，一旦新的 Magento 主机工作，切换域以指向新实例。

# html - 同一行上有两个表单元素？

> ID：11957171
> 
> 赞同：1
> 
> 时间：2012-08-14T16:55:04.027
> 
> 标签：html, css

是否可以在同一行上有两个元素？（紧密配合）我设置一个使用 80% 宽度，另一个使用 20%，但它不适合空间？

这就是我的意思[http://jsfiddle.net/NuZxj/](http://jsfiddle.net/NuZxj/)

我认为这是可能的，但我对 HTML 和 CSS 很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:02:44.493

这是因为两件事；首先：该`width`属性没有设置元素的“总宽度”，总宽度由宽度、边框宽度和填充组成。

其次，HTML 中两个元素之间的换行符将呈现为单个空格字符，因此 20% 加上 80% 无论如何都会超过 100%。

也就是说，如果您将两个元素放在 HTML 中的同一行并使用以下内容`box-sizing`，则边框宽度和填充包含在`width`元素中，如通过 CSS 设置的那样（我相信，IE`width`默认以这种方式计算):

```
-webkit-box-sizing: border-box;
-o-box-sizing: border-box;
-moz-box-sizing: border-box; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NuZxj/11/)。

`input`另请注意，HTML 已更改，因此两个元素之间没有任何类型的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:59:30.477

元素有一个边框，可以防止它们在同一条线上，因为它会增加它们的宽度。将其设置为 0 并使它们向左浮动。[**演示**](http://jsfiddle.net/NuZxj/10/)

```
#footer input[type=text]
{
    border: 0;
    float: left;
}

input.button {
    border: 0;
    float: left;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:57:31.547

[http://jsfiddle.net/NuZxj/13/](http://jsfiddle.net/NuZxj/13/)

添加`float: right;`到按钮以将其强制到 div 的右侧，这会将两个元素放在同一行。如果您不希望它在右侧，这当然看起来不正确。

请注意，我还将文本元素的宽度更改为略小于 80%，以便它适合同一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T17:04:43.817

这两个元素不适合同一行，因为定义了填充和/或边距。

这意味着`80% + 20% + margin + padding + border > 100%`.

width 属性不考虑边距、填充或边框。

为了解决这个问题，您可以将边距、填充和边框设置为`0px`，将百分比宽度减小一点以进行补偿，或者（最复杂的选项）将输入包装在不可见的 div 中并设置其宽度.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T17:02:19.840

肯定的事。

[http://jsfiddle.net/NuZxj/7/](http://jsfiddle.net/NuZxj/7/)

但是关于 HTML 元素的事情，你不能总是`width`单独依赖它，因为有些东西会增加元素占用的实际空间，例如`margin`和`border`。这称为“盒子模型”，您可以在此处阅读：[http](http://www.quirksmode.org/css/box.html) ://www.quirksmode.org/css/box.html或此处：[http ://www.w3.org/TR/CSS2/box .html](http://www.w3.org/TR/CSS2/box.html)

在您的示例中，这意味着`width`确实占据了 100%，例如，按钮上的边框没有空间 - 这就是按钮跳到下一行的原因。

您可以删除`border`,`padding`和`margin`, 或调整`width`这两个元素中的 。

# c# - 为 x86 编译的 ShowDialog 在 x64 上的主窗体后面显示

> ID：11957173
> 
> 赞同：0
> 
> 时间：2012-08-14T16:55:20.547
> 
> 标签：c#, visual-studio-2010, x86, 64-bit

我有一个必须编译为 x86 的应用程序，因为一些旧的 COM 控制器与非常旧的第 3 方软件驱动程序有关。

我注意到，每当我调用窗体的模态对话框时，而其他一些应用程序具有焦点（例如我正在逐步执行的 Visual Studio 代码），该对话框就会出现在父窗口的**后面。**

```
private string Locate(string filename) {
  if (!File.Exists(filename)) {
    using (OpenFileDialog dlg = new OpenFileDialog()) {
      dlg.FileName = filename;
      if (dlg.ShowDialog(this) == DialogResult.OK) {
        return dlg.FileName;
      }
    }
  }
  return filename;
} 
```

我可以将应用程序编译为 x64，但加载 COM 驱动程序将失败，导致应用程序永远无法启动。

有没有其他人从（Visual Studio、.NET Framework 或 Windows 7）注意到这种行为？如果没有，那么我在其他地方的代码中一定有一些奇怪的地方。

有没有办法“修复”它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:18:07.857

VS2010 默认为 x86，因此您的配置很常见，这表明您的代码确实有问题。

你确定***这***在 dlg.ShowDialog(this) 实际上是父级并且是可见的等？

是否从非 UI 线程调用定位？如果没有，您是否尝试使用 dlg.ShowDialog()。

# git - 修复 Git 错误“错误：无法找到”

> ID：11957184
> 
> 赞同：8
> 
> 时间：2012-08-14T16:55:53.590
> 
> 标签：git

当我执行`git pull origin master`.

```
error: Unable to find a47058d09b4ca436d65609758a9dba52235a75bd under http://myweb.com/myapp.git
Cannot obtain needed blob a47058d09b4ca436d65609758a9dba52235a75bd
while processing commit 041d57dd5bed9d6c75fe7cce944b2b2904ae3a62.
error: Fetch failed. 
```

直到几分钟前，一切都运行良好。我没有做任何不寻常的事情。我一直在做我通常的提交推拉，现在我突然收到这个错误。

这个错误是什么意思？排除/纠正此错误的步骤是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T19:40:06.353

就像[亚当说](https://stackoverflow.com/questions/11957184/fixing-the-git-error-error-unable-to-find/11959404#11959404)的那样，从另一个存储库/克隆中恢复对象。

不要忘记考虑包。所以，一个更通用的过程是这样的：

在“完整”的 Git 数据库上：

```
git cat-file -p a47058d09b4ca436d65609758a9dba52235a75bd > tempfile 
```

在接收端：

```
git hash-object -w tempfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:28:09.893

从您的目录 ( `.git/objects`) 和其他在此存储库的克隆上工作的人复制对象。一个物体被电击了，所以这应该可以修复它。

以下是关于移动对象的更多信息：*[对象数据库](http://www-cs-students.stanford.edu/%7Eblynn/gitmagic/ch08.html#_the_object_database)*

# selenium - 如何使用 Selenium Webdriver 验证文本，

> ID：11957185
> 
> 赞同：1
> 
> 时间：2012-08-14T16:55:56.077
> 
> 标签：selenium, webdriver, selenium-webdriver

**更新 2：**

这里发生了一些非常奇怪的事情......

与我以前的代码相比，我想知道它到底得到了什么`.Text`，我发现第一行代码返回给我的东西很奇怪`A11`，不知道它来自哪里

```
string _name = driver.FindElement(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_EditControl1_gv']/tbody/tr[11]/td[3]")).Text; 
```

//它失败了，难怪......

```
Assert.IsTrue(_name.Equals("Selenium")); 
```

但它是如何与 Firefox 一起工作的？

更新：

使用 C#

这是我正在使用的代码，它在 Firefox 上运行良好，但在 IE8 上运行良好

Assert.IsTrue(driver.FindElement(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_EditControl1_gv']/tbody/tr[11]/td[3]")).Text.Equals("Selenium"));

得到这个错误：

```
 failed: Assert.IsTrue failed. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:01:41.297

xpath 在 IE 中的呈现方式与在 Firefox 中的呈现方式不同。因此，您的 xpath 确实有可能在 IE 中捕获完全不同的文本。尝试获取输出（Console.WriteLine）`driver.FindElement(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_EditControl1_gv']/tbody/tr[11]/td[3]")).Text`以查看 IE 中的输出。

您可能必须为 IE 定义一个专用的 xpath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:42:06.423

假设您正在使用 java 尝试 getText()

```
String foo = driver.findElement(By.xpath("//*[@id='ctl00_ContentPlaceHolder1_EditControl1_gv']/tbody/tr[11]/td[3]")).getText();

assertEquals(foo, "Selenium"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:29:34.313

与几乎所有其他浏览器相比，Internet Explorer 对 XPath 的解读不同。IE5 及更高版本已经实现 [0] 应该是第一个节点，但是大多数其他浏览器都将第一个节点作为 [1]。

您需要通过将节点减一来重写您的 XPath 表达式。

# webgl - 用 x3dom 开发第三人称视角？

> ID：11957189
> 
> 赞同：0
> 
> 时间：2012-08-14T16:56:16.820
> 
> 标签：webgl, x3dom

有人可以帮助我如何在 x3dom 上开发具有第三人称视图的应用程序？相机必须跟随一个物体和它被左右键操纵的物体。

疙瘩..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:28:59.470

要获得第三人称视图，只需将 Viewpoint 放在变换分组节点中，调整其旋转平移

```
<X3D><Scene>
<Transform translation="0 0 0">
<Viewpoint/>
<Shape><Box/></Shape>
</Transform>
</Scene></X3D> 
```

请为问题的第二部分解释更多。

# android - 删除选项卡内的夏洛克动作栏

> ID：11957190
> 
> 赞同：0
> 
> 时间：2012-08-14T16:56:16.540
> 
> 标签：android, hide, actionbarsherlock

我有一个扩展 SherlockListActivity 的类 DashBoardTasks，它具有以下代码：

```
public class DashBoardTasks extends SherlockListActivity
{
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_listview);

  ActionBar a = DashBoardTasks.this.getSupportActionBar();
    a.hide();
  (...)
} 
```

发生的事情是我的 SherlockActionBar 消失了。到目前为止，一切都很好。

现在我有这个类 TabHostTasks：

```
public class TabHostTasks extends tabActivity 
```

当我在 TabHostTasks 中调用 DashBoardTasks 时，会发生 **a = null** 并且应用程序崩溃！！！！为什么？为什么它在选项卡外工作但在选项卡内崩溃？我只是隐藏操作栏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:41:19.133

我怀疑`TabActivity`在其内容区域内显示活动时，这些活动没有像`ActionBar`. 您的`DashBoardTasks`活动没有`ActionBar`; `TabHostTasks`做。

写一个方法`TabHostTasks`来操作你的`ActionBar`. 您可以调用`getParent()`from`DashBoardTasks`并将其转换为`TabHostTasks`，然后调用您的方法来隐藏栏。

您也可以考虑尝试使用选项卡来实现您的应用程序`ActionBar`。（`TabActivity`已弃用）

# javascript - “var”变量、“this”变量和“global”变量 - 在 JavaScript 构造函数中

> ID：11957191
> 
> 赞同：5
> 
> 时间：2012-08-14T16:56:21.000
> 
> 标签：javascript, constructor, this, var

在我的最后一个问题之后，这个问题对我来说更准确：

例子：

```
function Foo() {
    this.bla = 1;
    var blabla = 10;
    blablabla = 100;
    this.getblabla = function () { 
        return blabla; // exposes blabla outside
    }
}
foo = new Foo(); 
```

我现在理解的：

```
this.bla = 1;     // will become an attribute of every instance of FOO.
var blabla = 10;  // will become a local variable of Foo(will **not** become an attribute of every instance of FOO), which could be accessed by any instance of FOO - only if there's a method like "this.getBlabla". that's a "closer" ?
blablabla = 100;  // will define a **new** (or change if exist) global(window) variable. 
```

我理解正确吗？

另外 - 如果我在承包商中包含`var blabla = 10;`并`getblabla`使用它的函数，那么对于 Foo("foo"...) 的每个实例，将在内存中保存一个包含此“私有”变量的 Foo 承包商函数。还是与私有变量的位置相同的 Foo 函数 - 对于 Foo 的**所有**实例（如“foo”）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T17:30:32.307

只是为了关注范围，我将运行这个示例，（使用更清晰的变量）然后，我会将它连接回您的变量。

```
var x = "Global scope";
var y = "Not changed.";

function Foo() {
    this.x = "Attribute of foo";
    var x = "In foo's closure";
    y = "Changed!"
    this.getX = function () { 
        return x;
    }
}

// do some logging

console.log(x); // "Global scope"
console.log(y); // "Not changed"
foo = new Foo();
console.log(y); // "Changed!"
console.log(foo.x); // "Attribute of foo"
console.log(x); // "Global scope"
console.log(foo.getX()); // "In foo's closure" 
```

line:`this.x`等价于`this.bla`，它定义了一个`Foo`对象的外部可用属性。`y`等价于`blablabla=100`然后`x`within foo 等价于你`blablabla`的inner foo。这是一个非常粗糙的[jsfiddle](http://jsfiddle.net/XDCNq/)，您可以运行它来查看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T17:28:44.553

你所说的一切都是正确的。（当然，在[Strict Mode 下](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode?redirectlocale=en-US&redirectslug=JavaScript%2FStrict_mode)`blablabla`赋值会报错。

后半部分，构造函数没有什么特别之处。它就像任何其他函数一样，它创建一个闭包，只要它被引用（`this.getblabla`在这种情况下是生命周期），它就会持续存在。

举个例子：

```
function initBlaBla() {
    var blabla = 10;
    this.getblabla = function () { 
        return blabla; // exposes blabla outside
    }
}

function Foo() {
    this.bla = 1;
    blablabla = 100;
    initBlaBla.call(this);
}

foo = new Foo(); 
```

在这里，`Foo`构造函数不会形成闭包，它的作用域会立即释放。 `initBlaBla`另一方面创建一个闭包。有趣的是，编译器可能会看到 blabla 永远不会被写入并优化`this.getblabla`为始终返回 10 并且永远不会保存闭包范围。当您在闭包内的函数中中断执行并尝试读取它没有在内部引用的值时，可以看到这一点。

如果您调用以下任何一项，闭包范围将被释放并排队等待垃圾收集：

```
delete foo.getblabla;
foo.getblabla = "Anything!";
foo = "Anything else."; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:10:26.323

是的，你懂的！
至于问题的第二部分，这都是关于继承的，就像（全局）窗口与其范围内定义的函数之间的关系（想想根）。所以所有你不重新指定的东西，都会被祖先查到。

这是Crockford制作的一个非常棒的[视频，他解释得非常好。](http://www.youtube.com/watch?v=RO1Wnu-xKoY)

# objective-c - 如何验证从队列返回的内容是否与它们预期的 UITableView 单元格匹配？

> ID：11957194
> 
> 赞同：0
> 
> 时间：2012-08-14T16:56:25.400
> 
> 标签：objective-c, ios, uitableview, cs193p

我是 iOS 开发的新手，这是我关于 stackoverflow 的第一个问题，尽管我经常来这里。感谢提供这么好的资源！

我正在参加斯坦福 CS193P 课程，但在“作业 5 额外学分 1”方面遇到了麻烦。
我有一个显示标题、副标题和缩略图的 UITableView。我排队获取缩略图，但需要验证当缩略图图像返回时表格单元格没有被回收。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Photo";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *imageDescription = [self.photoList objectAtIndex:indexPath.row];
    NSString *expectedPhotoID = [imageDescription objectForKey:FLICKR_PHOTO_ID];

    // Configure the cell...

    cell.imageView.image = [UIImage imageNamed:@"placeholder.png"];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage *imageThumb = [self imageForCell:imageDescription];
        [NSThread sleepUntilDate:[NSDate dateWithTimeIntervalSinceNow:2]]; // simulate 2 sec latency

        dispatch_async(dispatch_get_main_queue(), ^{
            NSString *photoID = [imageDescription objectForKey:FLICKR_PHOTO_ID];
            if ([expectedPhotoID isEqualToString:photoID]) {
                cell.imageView.image = imageThumb;
            } else {
                NSLog(@"cellForRowAtIndexPath: Got image for recycled cell");
            }
        });
    });

  return cell;
} 
```

在此代码中，`photoID`始终匹配`expectedPhotoID`. 我假设这是因为`imageDescription`指针在创建时用于两个队列。我试过`[self.photoList objectAtIndex:indexPath.row]`直接使用（代替`imageDescription`），但这也没有用。似乎在创建队列时也已解决。

我在这里缺少一些基本的理解，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:04:48.110

表视图不会为所有行分配表视图单元格。相反，仅分配*可见*行（或更多）的单元格。如果滚动表格，一些行会消失，而其他行会出现。对于新出现的行，表格视图尝试**重用**不再需要的单元格。（就是`dequeueReusableCellWithIdentifier:`这样。）

如果您启动异步任务来检索单元格的图像，则可能会发生以下情况：

当任务完成并执行最里面的块时，单元格**同时被重新用于不同的行**！在这种情况下，将图像分配给单元格是没有意义的。

因此，当您拥有图像时，您必须检查单元格是否仍与之前相同。例如，您可以调用`[tableView indexPathForCell:cell]`并将该值与原始值进行比较`indexPath`。如果它们相同，则单元格仍位于同一位置，您可以分配图像。如果没有，您必须丢弃图像。

但这只是最简单的解决方案。更好的解决方案是缓存所有行的图像。

我只能推荐 WWDC 2012 Session 2011 “Building Concurrent User Interfaces on iOS”。它涵盖了这个主题。

# javascript - 由于尚未收到数据，因此无法查看内容

> ID：11957196
> 
> 赞同：0
> 
> 时间：2012-08-14T16:56:46.870
> 
> 标签：javascript, knockout.js

如何等待数据加载然后打印 html 内容？

这是 HTML 标记：

```
<div id="item-details-content">
    <input type="hidden" id="item-id" value="@id" data-bind=""/>
    <div class="item-list" data-bind="init: itemPage.loadcontent(@id), with: itemPage.item">
        <div class="item-container clearfix">
            <div class="item-content clearfix">
                <div class="title" data-bind="text: Title"> 
```

这是JS标记：

```
var itemViewModel = {
    item: {},
    loadcontent: function (getID) {
        $.ajax({
            url: '/api/item/details/' + getID,
            dataType: 'json',
            success: function (data) {
                itemViewModel.item = data;
            }
        });
    }
};

var mainViewModel = {
    indexPage: indexViewModel,
    itemPage: itemViewModel
}; 
```

## 观察

1.  当变量`ko.observable()`最终显示数据时，问题是我不希望它更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:59:41.533

像这样的东西应该工作。

```
<div id="item-details-content" data-bind="if: isLoaded">
....
</div>

and javascript:

var itemViewModel = {
    item: {},
    loadcontent: function (getID) {
        $.ajax({
            url: '/api/item/details/' + getID,
            dataType: 'json',
            success: function (data) {
                itemViewModel.item = data;
                mainViewModel.isLoaded(true);
            }
        });
    }
};

var mainViewModel = {
    indexPage: indexViewModel,
    itemPage: itemViewModel,
    isLoaded: ko.observable(false)
}; 
```

另一种方法是在 #item-details-content div 上使用隐藏类，然后执行 $('#item-details-content').show();

```
 <div id="item-details-content" class="hidden">
    ....
   </div>

success: function (data) {
    itemViewModel.item = data;
    $('#item-details-content').show();
} 
```

# mysql - 如何杀死 mySQL 线程 ID/表锁

> ID：11957200
> 
> 赞同：0
> 
> 时间：2012-08-14T16:57:03.043
> 
> 标签：mysql

我有一个有挂起事务的 mySQL 服务器：

---事务 4DC445419，活动 11869 秒，进程号 4607，操作系统线程 ID 139794812577536

我无法在进程列表中看到此事务，也无法将其杀死。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:48:05.030

以超级用户身份登录 - 在大多数 linux 安装中，这是用户 root。这将允许您终止任何进程。或者重启服务器。

# r - 如何在 R 中导出一个变量，显示在较早日期记录的具有相同值的观测值的数量？

> ID：11957205
> 
> 赞同：4
> 
> 时间：2012-08-14T16:57:19.357
> 
> 标签：r

我正在使用 R，并且我有一个数据框，其中包含有关个人申请拨款的信息。个人可以根据需要多次申请补助金。我想派生一个新变量，告诉我每个人已经完成了多少申请，包括每条记录所代表的申请日期。

目前我的数据如下所示：

```
app number  date app made     applicant
1           2012-08-01        John
2           2012-08-02        John
3           2012-08-02        Jane
4           2012-08-04        John
5           2012-08-08        Alice
6           2012-08-09        Alice
7           2012-08-09        Jane 
```

我想添加一个进一步的变量，所以我的数据框看起来像这样：

```
app number  date app made    applicant  applications by applicant to date
1           2012-08-01       John       1
2           2012-08-02       John       2
3           2012-08-02       Jane       1
4           2012-08-04       John       3
5           2012-08-08       Alice      1
6           2012-08-09       Alice      2
7           2012-08-09       Jane       2 
```

我是 R 新手，我真的很难弄清楚如何做到这一点。我能得到的最接近的答案类似于这个问题的答案： [如何计算 R 中给定间隔的观察次数？](https://stackoverflow.com/questions/9420027/how-do-i-count-the-number-of-observations-at-given-intervals-in-r)

但是我无法根据每条记录中的日期而不是预设的时间间隔来计算如何执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T17:04:46.453

你可以用`plyr`这个。如果您的数据在`data.frame`dat 中，我会添加一个名为 count 的列，然后使用`cumsum`

```
library(plyr)
dat <- structure(list(number = 1:7, date = c("2012-08-01", "2012-08-02", 
"2012-08-02", "2012-08-04", "2012-08-08", "2012-08-09", "2012-08-09"
), name = c("John", "John", "Jane", "John", "Alice", "Alice", 
"Jane")), .Names = c("number", "date", "name"), row.names = c(NA, 
-7L), class = "data.frame")

dat$count <- 1

ddply(dat, .(name), transform, count=cumsum(count))

  number       date  name count
1      5 2012-08-08 Alice     1
2      6 2012-08-09 Alice     2
3      3 2012-08-02  Jane     1
4      7 2012-08-09  Jane     2
5      1 2012-08-01  John     1
6      2 2012-08-02  John     2
7      4 2012-08-04  John     3
> 
```

我假设您的日期已经排序，但是您可能希望在进行“计数”之前对它们进行明确排序：

```
dat <- dat[order(dat$date),] 
```

* * *

根据评论，如果您理解（我没有！）这种方式`transform`的工作原理，这可以简化：

```
ddply(dat, .(name), transform, count=order(date))
  number       date  name count
1      5 2012-08-08 Alice     1
2      6 2012-08-09 Alice     2
3      3 2012-08-02  Jane     1
4      7 2012-08-09  Jane     2
5      1 2012-08-01  John     1
6      2 2012-08-02  John     2
7      4 2012-08-04  John     3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T17:10:41.963

这是一种比@Justin 更不优雅的方式：

```
 A <- read.table(text='"app number"  "date app made"     "applicant"
    1           2012-08-01        John
    2           2012-08-02        John
    3           2012-08-02        Jane
    4           2012-08-04        John
    5           2012-08-08        Alice
    6           2012-08-09        Alice
    7           2012-08-09        Jane',header=TRUE)

    # order by applicant name
    A <- A[order(A$applicant), ]
    # get vector you're looking for
    A$app2date <- unlist(sapply(unique(A$applicant),function(x, appl){
                         seq(sum(A$applicant == x))
                       }, appl = A$applicant)
                     )
    # back in original order:
    A   <- A[order(A$"app.number"), ] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-14T17:50:42.837

这是使用该`ave`功能的 1 行方法。此版本不需要重新排序数据，但保留数据的顺序与原来相同：

```
A$applications <- ave(A$app.number, A$applicant, FUN=seq_along) 
```

# textmate - 如何在 TextMate 中格式化 JavaScript 程序？

> ID：11957206
> 
> 赞同：4
> 
> 时间：2012-08-14T16:57:22.327
> 
> 标签：textmate

```
$(document).ready(function() {
$("body").hide().fadeIn(250);
}) 
```

如果我将光标放在上述代码的末尾（文件中仅有的几行代码并且文件保存为sample.js）并按^Q，最后会添加一个*回车*。

如果我选择所有三行并按 ^Q，则代码的格式如下。

```
$(document).ready(function() { $("body").hide().fadeIn(250); }) 
```

如果我选择顶部的代码片段并按 ^J，我再次得到

```
$(document).ready(function() { $("body").hide().fadeIn(250); }) 
```

我应该怎么做才能得到如下格式的代码？

```
document).ready(function() {
    $("body").hide().fadeIn(250);
}) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T06:06:11.797

使用 Javascript tmbundle, `Ctrl`+ `Shift`+`H`

# jquery - 如果未输入文本，则保持按钮禁用

> ID：11957208
> 
> 赞同：4
> 
> 时间：2012-08-14T16:57:28.603
> 
> 标签：jquery

我想实现这样的目标。我有 4 个文本字段和一个表单提交所需的选择字段。我想让按钮保持禁用状态，除非文本字段有值并且从下拉列表中选择了一个选项。我的代码在[这里](http://jsfiddle.net/C2mRd/3/)

我遇到的问题是，每当我在 4 个文本字段中输入数据时，尽管将下拉菜单选择为默认文本，但按钮就会启用。在我更改下拉列表后，它被永久禁用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T17:05:41.077

试试这个 -[**演示**](http://jsfiddle.net/C2mRd/6/)

```
$('#fname, #lname, #zipcode').on("keyup", action);
$('#location').on("change", action);

function action() {
    if( $('#fname').val().length > 0 && $('#lname').val().length > 0 && $('#zipcode').val().length > 0 && $('#location').val() != '' ) {
        $('#submit').prop("disabled", false);
    } else {
        $('#submit').prop("disabled", true);
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:09:09.397

使用 JQuery：

```
var text_valid = false, dropdown_valid = false;
$("input[type='text'].required:focus").each(function() {
    if($(this).val().length > 0){
        text_valid = true
    }
}

if($("#mydropdown option:selected").length){
    dropdown_valid = true;
}

if(text_valid && dropdown_valid) {// Our form is valid
    $("#mybutton").removeAttr("disabled");
}
else { // Our form is invalid
    $("#mybutton").attr("disabled", "disabled");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:20:01.467

我想你可以数出有多少输入有文本

```
$('input').keyup(function(){
    var count = $('input:text').filter(function(){return $(this).val() == "";}).size();
}); 
```

但是，由于您使用的是选择标签，我认为您还应该检查它是否具有值。

```
$('input').keyup(function(){
    var count = $('input:text').filter(function(){return $(this).val() == "";}).size()
            + $('select:text').filter(function(){return $(this).val() == "";}).size();
    if(count > 0){
        $('#submit').button({disabled: true});
    }else{
        $('#submit').button({disabled: false});
    }
}); 
```

# c# - 文件读取问题 C++ /C#

> ID：11957218
> 
> 赞同：0
> 
> 时间：2012-08-14T16:58:01.983
> 
> 标签：c#, c++, io, fstream

我有两个程序一起工作以从文件中写入和读取数据。

第一个程序是一个 C# 表单。它从用户那里获取文件名并将其写入 C 驱动器上的文件并退出/关闭 C# 应用程序。

相关代码：

```
private void startBtn_Click(object sender, System.EventArgs e)
{
     using (StreamWriter writer = new StreamWriter("C:\\File.txt"))
     {
         writer.WriteLine(fileName.Text + ".txt");
         writer.Close();
     }
     Application.Exit();
} 
```

C++ 中的第二个程序。该程序仅在按下 f10 时创建 C# 应用程序，然后停止直到 C# 应用程序关闭。然后 C++ 程序恢复并读入写入 C 驱动器上文件的文件名。C++ 程序是高度专业化/定制的，必须小心处理对其的添加。

相关代码：

```
std::string path("C:\\CSharpApp.exe");
system(path.c_str()); //Halts here until CSharpApp exits
if(!reader.is_open()) //Reader is a global ifstream object
{
    reader.open("C:\\File.txt");
}
char temp[MAX_FILE_NAME];//250
reader >> temp;
reader.close();
string temp2 = temp;
//cout << temp2 << endl; //Using to debug
FileName = "C:\\data\\" + temp2;//temp2 contains a file name ending with .txt
if(!writer.is_open())//Writer is a global ofstream object
{
    writer.open(FileName.c_str(),ios::app);
}
//write some stuff to file
writer.close(); 
```

第一次按 f10 键会调用 C++ 代码，它会调用 C# 应用程序，并且文件名已正确存储。当 CSharpApp 关闭并且文件名被正确读取时，C++ 程序将恢复。

问题：

任何额外的 f10 按键都会导致 cout 语句显示 temp2 的值为零，我只在控制台中看到 endl 。File.txt 包含下一个文件的正确名称，但由于某种原因，C++ 程序仅在第一次按下 f10 时才正确获取文件名。

此功能的目的是按 f10 并在每次按 f10 时创建一个具有新名称的新文件。

我认为这两个程序不能同时访问该文件，因为 C# 应用程序的执行会暂停 C++ 程序。我还尝试更改 CSharp 应用程序中的编写器以附加文件名而不是覆盖文件。这导致 C++ 应用程序仅将 temp2 打印为第一个文件名，并且没有空行。不知道这意味着什么。

我目前正在努力解决这个问题，并将随着我的进步而更新。

更新：

我添加了以下内容来代替： reader >> temp;

代码：

```
if(reader >> temp)
    cout << "Read in ok" << endl;
else
    cout << "PROBLEM OCCURRED" << endl; 
```

现在我的程序运行正常，但是我不清楚它为什么现在可以运行。对我来说，我假设添加这个 if test 和 cout 语句必须给程序更多时间。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:43:07.760

我怀疑在您的 C++ 应用程序尝试读取文件之前，C# 应用程序中的文件写入尚未完成提交到磁盘。您可以尝试在调用 writer.Close() 之前添加 writer.Flush() 并查看是否有任何不同。

# python - 无类型对象不可下标

> ID：11957219
> 
> 赞同：-8
> 
> 时间：2012-08-14T16:58:05.540
> 
> 标签：python

我尝试修复它，但是，我不能....请帮助我，我不知道为什么它会显示该错误。

```
def sorted_point_list(lst):
    import math
    def distance(point):
        return math.sqrt(point[0]**2 + point[1]**2)
    def max_point(lst):
        def max_distance(lst):
            if lst == []:
                return 0 
            else:
                return max(distance(lst[0]),max_distance(lst[1:]))
        a = max_distance(lst)
        for i in lst:
            if distance(i) == a:
                return i
    def iter_(lst,result):
        if lst == []:          
            return result
        c = max_point(lst)
        return iter_(lst.remove(c),c+result)
    return iter_(lst,[]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:03:46.630

这通常发生在您获得`None`某个东西的返回值时，您假设您将获得一些其他值（在这种情况下为列表）。

您的`max_point()`函数并非在所有情况下都返回值。因此，它`None`在这些情况下返回。这是您收到的错误消息的可能来源。

此外，您将`remove()`列表的方法视为返回列表。它不是; 它会修改列表但返回`None`. 这也是错误的可能来源。

顺便说一句，嵌套函数通常不是一个好主意。每次调用外部函数时都会重新定义内部函数，这可能会显着降低性能，尤其是在循环调用外部函数时。（类似地，`import`每次调用时都会执行`sorted_point_list()`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:02:05.597

问题似乎是这样`lst.remove(c)`，`remove()` 更改列表并返回`None`。您假设它是此处的列表。

在里面`max_distance()`你传递`lst[0]`给`distance()`，因为`None`它会引发错误`None Type object is not subscriptable`。

# java - 设置 DNS 属性没有任何效果

> ID：11957221
> 
> 赞同：3
> 
> 时间：2012-08-14T16:58:18.770
> 
> 标签：java, dns

在使用 Java`InetAddress.getByName()`将主机解析为 IP 时，我想使用 Google 的 DNS 而不是本地系统的默认值。基于其他 stackoverflow 问题以及[http://docs.oracle.com/javase/6/docs/technotes/guides/net/properties.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/properties.html)提供的信息，我使用以下内容设置适当的属性：

```
System.setProperty("sun.net.spi.nameservice.nameservers", "8.8.8.8");
System.setProperty("sun.net.spi.nameservice.provider.1", "dns,sun"); 
```

稍后在程序中调用`System.getProperty("sun.net.spi.nameservice.nameservers")`确认该属性设置为 8.8.8.8 - 但是，网络流量清楚地显示所有 DNS 请求都发送到系统的默认值，而不是 Google 的 DNS。为了让 Java 使用请求的 DNS 服务器，还应该做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:04:23.153

更一般地说，这是您可能必须在 Java 之外设置的内容。JVM 拥有自己的网络堆栈与操作系统提供的网络堆栈并行是没有意义的，因此 DNS 解析可能是您需要在操作系统级别配置的东西。

如果 DNS 解析是您的应用程序的核心要求，那么您自己进行解析而不是通过正常的网络库（将 DNS 解析作为正常网络操作的副作用）实际上可能更有意义。我不怀疑您可以找到一个库来帮助您创建查找请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T13:48:03.667

我面临着类似的问题。[干净的 dns-server-in-jvm](https://stackoverflow.com/questions/17420620/clean-dns-server-in-jvm)

我认为您的问题不是因为设置 DNS 属性没有效果，而是因为您将这些参数设置在代码的后期，或者可能是在第一次网络连接之后。

试着放

```
System.setProperty("sun.net.spi.nameservice.nameservers", "8.8.8.8");
System.setProperty("sun.net.spi.nameservice.provider.1", "dns,sun"); 
```

在你的 Main 的第一行告诉我。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:26:56.767

尝试在 \Windows\System32\drivers 下的主机文件中设置 sun.net.spi.nameservice.nameservers 8.8.8.8。看起来您的主机文件中已经有 sun.net.spi.nameservice.nameservers 指向某个条目。所以尝试在主机文件的最后设置尝试设置 sun.net.spi.nameservice.nameservers 8.8.8.8 因为主机文件获取是解析主机名条目的第一个位置

# magento - Magento中的重写控制器，一个功能不起作用

> ID：11957222
> 
> 赞同：0
> 
> 时间：2012-08-14T16:58:19.663
> 
> 标签：magento, controller, magento-1.4

我试图在提交表单后让我的联系表单重定向到主页。我设置了我的模块并且可以确认它正在工作。在下面的代码中，我收到了“预调度”和“索引操作”日志消息，但没有收到“后操作”，正如您所料，它也不会在完成后将我重定向到主页。我确实正确收到了联系电子邮件。谁能告诉我为什么前两个函数可以正常工作而 postAction() 不能？

我将原始控制器中的所有代码复制到我的控制器中以进行故障排除。除了添加日志消息和底部的重定向之外，一切都是默认的。

```
class MyCompany_Contacts_IndexController extends Mage_Contacts_IndexController
{   
const XML_PATH_EMAIL_RECIPIENT  = 'contacts/email/recipient_email';
const XML_PATH_EMAIL_SENDER     = 'contacts/email/sender_email_identity';
const XML_PATH_EMAIL_TEMPLATE   = 'contacts/email/email_template';
const XML_PATH_ENABLED          = 'contacts/contacts/enabled';

public function preDispatch()
{
    parent::preDispatch();
    Mage::log('Pre-dispatched');

    if( !Mage::getStoreConfigFlag(self::XML_PATH_ENABLED) ) {
        $this->norouteAction();
    }
}

public function indexAction()
{
    Mage::log('Index Action.');
    $this->loadLayout();
    $this->getLayout()->getBlock('contactForm')
        ->setFormAction( Mage::getUrl('*/*/post') );

    $this->_initLayoutMessages('customer/session');
    $this->_initLayoutMessages('catalog/session');
    $this->renderLayout();
}

public function postAction()
{
    parent::postAction();
    Mage::log('Post Action.');
    $post = $this->getRequest()->getPost();
    if ( $post ) {
        $translate = Mage::getSingleton('core/translate');
        /* @var $translate Mage_Core_Model_Translate */
        $translate->setTranslateInline(false);
        try {
            $postObject = new Varien_Object();
            $postObject->setData($post);

            $error = false;

            if (!Zend_Validate::is(trim($post['name']) , 'NotEmpty')) {
                $error = true;
            }

            if (!Zend_Validate::is(trim($post['comment']) , 'NotEmpty')) {
                $error = true;
            }

            if (!Zend_Validate::is(trim($post['email']), 'EmailAddress')) {
                $error = true;
            }

            if (Zend_Validate::is(trim($post['hideit']), 'NotEmpty')) {
                $error = true;
            }

            if ($error) {
                throw new Exception();
            }
            $mailTemplate = Mage::getModel('core/email_template');
            /* @var $mailTemplate Mage_Core_Model_Email_Template */
            $mailTemplate->setDesignConfig(array('area' => 'frontend'))
                ->setReplyTo($post['email'])
                ->sendTransactional(
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_TEMPLATE),
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_SENDER),
                    Mage::getStoreConfig(self::XML_PATH_EMAIL_RECIPIENT),
                    null,
                    array('data' => $postObject)
                );

            if (!$mailTemplate->getSentSuccess()) {
                throw new Exception();
            }

            $translate->setTranslateInline(true);

           // Mage::getSingleton('customer/session')->addSuccess(Mage::helper('contacts')->__('Your inquiry was submitted and will be responded to as soon as possible. Thank you for contacting us.'));
            $this->_redirect('');

            return;
        } catch (Exception $e) {
            $translate->setTranslateInline(true);

           // Mage::getSingleton('customer/session')->addError(Mage::helper('contacts')->__('Unable to submit your request. Please, try again later'));
            $this->_redirect('');
            return;
        }

    } else {
        $this->_redirect('');
    }
}

} 
```

配置文件

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
  <modules>
    <MyCompany_Contacts>
        <version>0.0.1</version>
    </MyCompany_Contacts>
  </modules>

  <frontend>
    <routers>
      <contacts>
        <args>
          <modules>
              <MyCompany_Contacts before="Mage_Contacts">MyCompany_Contacts</MyCompany_Contacts>
          </modules>
        </args>
      </contacts>
    </routers>
  </frontend>
</config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:22:08.020

问题在于`parent::postAction();`您的自定义 postAction 中的部分。您现在正在做的是将表单发布到 /post。它最终会出现在您的 postAction 中，但随后会直接通过 parent::postAction() 路由。

因此`Mage_Contacts_IndexController::postAction()`，父方法也包含发送电子邮件的逻辑。因此，您收到一个。问题是在父方法的末尾仍然有重定向`$this->_redirect('*/*/');`。这可以防止代码到达您的 `Mage::log('Post Action.') 和您的其余自定义代码。

解决方案：删除`parent::postAction()`并且您的方法中的自定义代码`postAction`将被执行，最终您自己的重定向到主页将被运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:10:12.330

我想我想通了。我记得 Akismet 在发送数据之前会对其进行分析，因此完全有可能默认的 Mage_Contacts 已经得到扩展，并且首先通过该模块。将日志记录添加到 Akismet 控制器中的 postAction() 并对其进行验证。感谢您让我走上正轨。

# android - Android 方法的自定义 Overlay MKMapOverlay iOS 端口

> ID：11957234
> 
> 赞同：0
> 
> 时间：2012-08-14T16:59:32.543
> 
> 标签：android, iphone, mkoverlay

我有一个我编写的android应用程序，它基本上有一个自定义叠加层，在这个叠加层中，我已经覆盖了 DRAW 方法以在画布上绘制一些东西，并且在我的 DRAW 覆盖结束时，我调用了在画布中传递的超级 DRAW 我已经画了.. 结果是，每次修改地图时，我的自定义叠加层都会按预期重绘。

现在，我试图在 iPhone 上完成同样的事情，但我有点困惑。

基本上，每次重绘地图时，我都需要在地图的右上角绘制一些东西。绘图也会随着每次更新而改变，因此不能简单地在地图上放置视图并通过触摸等。

所以，我想问题是，iOS 中的 DRAW 方法的等效性是什么。我将如何大致完成同样的事情？API中有MKOverlayView，但似乎有一些显着差异..所以，我如何在地图上放置10x10的东西，谁的大小是可变的，并确保每次移动、缩放或以其他方式与地图交互此对象在屏幕上的 10x10 位置重绘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:10:12.770

MKMapView 的文档声明您不应该继承 MKMapView，因此您不能/不应该覆盖 drawRect 方法。不过，您可以添加 UIView，并覆盖 drawRect 来进行自定义绘图。

# javascript - Mocha 与 Nimble 冲突（异步）

> ID：11957235
> 
> 赞同：0
> 
> 时间：2012-08-14T16:59:34.100
> 
> 标签：javascript, asynchronous, mocha.js, nimble

我在我的应用程序中使用 nimble.js 并使用 mocha + chai 进行测试，但昨天我发现它们可能存在冲突。

基本上，当我在浏览器中执行特定的 http 请求时，我得到

```
Unauthorized. 
```

这是正确的反应。

但是使用节点的http模块使用相同的url执行http请求，我得到

```
not found 
```

这让我很困惑。

我知道 http 请求得到了正确的 url，因为我在服务器控制台中看到了它，甚至将它复制粘贴到我的浏览器中以确保它。

此外，我将代码追溯到 nimble.parallel 函数。

我有这样的事情：

```
// var _ = require('nimble');
_.parallel(
  [
    fetch_account(options)
  , fetch_invoice(options)
  , fetch_site(options)
  , fetch_account_stats(options)
  ]
, render(res, subdomain)
);
// each of the function above returns another function, no simple API gotcha here 
```

在浏览器案例中，错误在 fetch 函数中被正确识别，然后在渲染案例中也是如此。

在 mocha 案例中，错误在 fetch 函数中被正确识别，但未执行渲染。因此，mocha 必须有自己的 res.render("not found");

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:06:01.927

我真是个白痴。

忘记设置接受标头。

但是我仍然很困惑为什么我追踪到相同的代码却得到了不同的行为。

# c# - 将解决方案更改为 x64 后，编译器指令 #if 不再识别 DEBUG

> ID：11957236
> 
> 赞同：5
> 
> 时间：2012-08-14T16:59:35.600
> 
> 标签：c#, visual-studio-2010, c-preprocessor

我正在使用 Visual Studio 2010 C#。

除了更改所有项目的构建属性外，我最近还使用配置管理器将解决方案中的所有项目更改为 x64。从那时起，该`#if (DEBUG)`指令就好像 DEBUG 常量消失了一样不起作用。

```
#if (DEBUG)
    // This code does not execute even in debug mode!
#endif 
```

我还注意到，项目现在被编译成and而不是通常`bin\Debug`的文件夹。`bin\Release``bin\x64\Debug``bin\x64\Release`

`x64`我四处搜索，但大多数相关结果都涵盖了默认情况下不显示时如何配置。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T17:01:34.447

创建 x64 平台时，很可能该平台的调试设置没有定义`DEBUG`常量。

在项目的属性中，转到您的 x64/Debug 配置/平台，然后检查“构建”选项卡。有一个名为：“定义调试常量”的复选框。确保已检查。

# php - PDO 语句未执行？

> ID：11957245
> 
> 赞同：1
> 
> 时间：2012-08-14T17:00:01.000
> 
> 标签：php, pdo

我正在尝试使用 PDO（php 数据对象）在 .php 文件中执行查询，如下所示：

```
global $db, $table;
$sth = $db->prepare('INSERT INTO $table(user, timerun, magexp, crimsons, blues, golds, greens) VALUES (:user,:timerun,:magexp,:crimsons,:blues,:golds,:greens) ON DUPLICATE KEY UPDATE timerun=timerun+:timerun, magexp=magexp+:magexp, crimsons=crimsons+:crimsons, blues=blues+:blues, golds=golds+:golds, greens=greens+green');
$sth->execute(array(':user' => $user, ':timerun' => $timerun, ':magexp' => $magexp, ':crimsons' => $cr, ':blues' => $bl, ':golds' => $go, ':greens' => $gr));
echo "success"; 
```

但是，它实际上并没有更新我的表。我没有收到错误或任何东西。

我做错了什么还是不支持 PDO？PDO 文档说“注意：某些 MySQL 表类型（存储引擎）不支持事务。当使用不支持事务的表类型编写事务数据库代码时，MySQL 将假装事务已成功启动。此外，任何 DDL发出的查询将隐式提交任何待处理的事务。”

我相当肯定我的 MySQL 表确实支持事务，因为常规的“mysql_query”确实有效。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:04:04.597

我不确定您的代码，您在单引号字符串中有变量，它将不起作用，您应该使用这样的双引号：

```
global $db, $table; 

$sth = $db->prepare("INSERT INTO $table(user, timerun, magexp, crimsons, blues, golds,  greens) VALUES (:user,:timerun,:magexp,:crimsons,:blues,:golds,:greens) ON DUPLICATE KEY   UPDATE timerun=timerun+:timerun, magexp=magexp+:magexp, crimsons=crimsons+:crimsons, blues=blues+:blues, golds=golds+:golds, greens=greens+green:"); 

$sth->execute(array(':user' => $user, ':timerun' => $timerun, ':magexp' => $magexp, ':crimsons' => $cr, ':blues' => $bl, ':golds' => $go, ':greens' => $gr)); echo "success"; 
```

为了安全：

首先，我将创建一些关联数组，其中项目中的所有可能表作为键，然后使用 if(isset($validTables[$table])) 检查变量中的表是否作为数组索引存在，然后继续查询。例如

```
<?php
  $validTables = array('foo' => true, 'bar' => true, 'other' => true);
  if(isset($validTables[$table])) 
  {
    // query logic here
  }
  else throw new Exception(sprintf('Security error %s table not exists', $table)); 
```

检查此代码，因为我编写它时没有使用 php 解析

# java - In Json: What exactly is a "direct self-reference"

> ID：11957251
> 
> 赞同：3
> 
> 时间：2012-08-14T17:00:48.013
> 
> 标签：java, json, google-app-engine, restlet, objectify

The question may seems stupid, but for me a cycle reference is for example the object A refers an object B AND the object B refers the object A.

I am working with on a android application communicating with a GAE server with objectify DB.

My model is quite simple but I get a error:

```
org.codehaus.jackson.map.JsonMappingException: Direct self-reference leading to cycle (through reference chain: java.util.ArrayList[0]->com.my.model.MyMessage["senderKey"]->com.googlecode.objectify.Key["root"]) 
```

Here is my model: a MyMessage refers a MyUser (the MyUser DOESNT refer a MyMessage...

Here is the code:

```
public class MyMessage implements Serializable {
private static final long serialVersionUID = -1075184303389185795L;

@Id
private Long id;

@Unindexed
private String sendMessage;

@Unindexed
private String answerMessage;

private MessageStatus status = MessageStatus.FREE;

@Parent
Key<MyUser> senderKey;

Key<MyUser> answererKey;

@SuppressWarnings("unused")
private MyMessage() {
}

public MyMessage(MyUser user, String message) {
    super();
    this.sendMessage = message;
    this.senderKey = new Key<MyUser>(MyUser.class, user.getId());
}

[... getters and setters ...]
} 
```

.

```
public class MyUser implements Serializable {

private static final long serialVersionUID = 7390103290165670089L;
@Id private String id;

@SuppressWarnings("unused")
private MyUser() {
    this.setId("default");
}

public MyUser(String mail) {
    this.setId(mail);
}

public void setId(String mail) {
    this.id = mail;
}

public String getId() {
    return id;
} 
```

}

So what is exactly a Direct self-reference ?? What is wrong with my model??

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T19:17:47.860

`Key` internally contains reference to parent `Key`, this is type-wise a reference to iteslf, i.e. a direct self-reference. This could potentially lead to endless loop, so Jackson is throwing an error.

Bottom line: `Key` is not serializable out-of-the-box. You might get by by writing a custom Jackson [serializer](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)/[deserializer](http://wiki.fasterxml.com/JacksonHowToCustomDeserializers/).

# qt - Qt、PDF 查看器和跳转到特定页面

> ID：11957255
> 
> 赞同：1
> 
> 时间：2012-08-14T17:01:09.217
> 
> 标签：qt, pdf

我花了几天时间在互联网的内部寻找我的问题的答案，所以因为我找不到答案，所以我把它扔给大众......

在我的 Qt 应用程序中，我可以通过以下命令使用操作系统默认查看器打开 PDF：

```
QDesktopServices::openUrl(QUrl("file:////C:help.pdf", QUrl::TolerantMode)); 
```

这很好用，因为我想要做的就是向用户显示帮助文件，但是当我尝试向我的 URL 添加“#page=20”参数时，文档仍然只打开到第一页，而不是页面20\. 如果我将命令剪切并粘贴到浏览器中，它会正确跳转。

所以——我的问题是：

1.  poppler 或其他查看工具会允许我跳转到页面吗？
2.  Qt 还有另一种跳转页面的方法吗？或者也许是另一个命令来打开文件而不是使用 QDesktopServices？

编辑：我尝试使用 QProcess 并且也没有跳转到页面 - 不是我期望它......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:28:22.130

`QProcess`与[Adob​​e Reader 命令行参考](https://stackoverflow.com/questions/619158/adobe-reader-command-line-reference)中的答案之一一起使用：

```
<path to Adobe Reader> /A "page=100" "<Path To PDF file>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:52:57.577

1.  是的。 `evince`，例如，采用`--page-index`您可以设置页码的选项
2.  不 `QDesktopServices::openUrl()`，最终调用辅助命令之一，例如`xdg-open`or `kfmclient`，没有任何参数。

当然，您始终可以在您的应用程序中使用[libpoppler](http://poppler.freedesktop.org/)打开您的 PDF。[`Poppler::Document::page()`](http://people.freedesktop.org/~aacid/docs/qt4/classPoppler_1_1Document.html#a2b95d382dbeb371ff149a35be560e6b0)是你的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T18:37:37.217

我能够制定的另一个解决方案是将我的 PDF 转换为 HTML，创建一个 QWebView，并在那里显示 HTML。然后，我在 HTML 文档中添加了一个 ID 属性，当我将该 ID 添加到我的 URL 时，它加载到该属性位置的小部件中......

斯科特

# database - Codeigniter：使用语言助手和数据库的多语言

> ID：11957256
> 
> 赞同：2
> 
> 时间：2012-08-14T17:01:30.593
> 
> 标签：database, codeigniter, multilingual

我的语言文件`(application/language/english/english_lang.php);`

```
$CI =& get_instance(); 

foreach($CI->db->get('language')->result() as $language):

    $lang[''.$language->name.''] = "".$language->turkish.".";

endforeach; 
```

我的数据库；

> > 选择`id`, `name`, `english`, `turkish`,`create_date`从`language`哪里 1

我的视图文件；

> > echo lang('title','title');

但它不工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T09:41:51.160

This looks like the solution:

[Language Class Extended DB](https://github.com/EllisLab/CodeIgniter/wiki/Language-Class-Extended-DB)

# iphone - 正则表达式模式和/或 NSRegularExpression 在非常大的文件上搜索有点太慢，可以优化吗？

> ID：11957258
> 
> 赞同：6
> 
> 时间：2012-08-14T17:01:34.837
> 
> 标签：iphone, objective-c, regex, nsregularexpression, openears

在 iOS 框架中，我在这个 3.2 MB 的文件中搜索发音：[https ://cmusphinx.svn.sourceforge.net/svnroot/cmusphinx/trunk/pocketsphinx/model/lm/en_US/cmu07a.dic](https://cmusphinx.svn.sourceforge.net/svnroot/cmusphinx/trunk/pocketsphinx/model/lm/en_US/cmu07a.dic)

我正在使用 NSRegularExpression 搜索作为 NSArray 给出的任意一组单词。搜索是通过大文件的内容作为 NSString 完成的。我需要匹配由换行符和制表符括起来的任何单词，然后抓取整行，例如，如果我的 NSArray 中有单词“monday”，我想在字典文件中匹配这一行：

```
monday  M AH N D IY 
```

此行以换行符开头，字符串“monday”后跟一个制表符，然后是发音。整行需要由正则表达式匹配才能最终输出。我还需要找到以下列出的单词的替代发音：

```
monday(2)   M AH N D EY 
```

替代发音总是以 (2) 开头，最高可达 (5)。因此，我还搜索单词的迭代，后跟括号，其中包含由换行符和制表符括起来的单个数字。

我有一个 100% 工作的 NSRegularExpression 方法，如下所示：

```
NSArray *array = [NSArray arrayWithObjects:@"friday",@"monday",@"saturday",@"sunday", @"thursday",@"tuesday",@"wednesday",nil]; // This array could contain any arbitrary words but they will always be in alphabetical order by the time they get here.

// Use this string to build up the pattern.
NSMutableString *mutablePatternString = [[NSMutableString alloc]initWithString:@"^("]; 

int firstRound = 0;
for(NSString *word in array) {
    if(firstRound == 0) { // this is the first round

        firstRound++;
    } else { // After the first iteration we need an OR operator first.
        [mutablePatternString appendString:[NSString stringWithFormat:@"|"]];
     }
    [mutablePatternString appendString:[NSString stringWithFormat:@"(%@(\\(.\\)|))",word]];
}

[mutablePatternString appendString:@")\\t.*$"];

// This results in this regex pattern:

// ^((change(\(.\)|))|(friday(\(.\)|))|(monday(\(.\)|))|(saturday(\(.\)|))|(sunday(\(.\)|))|(thursday(\(.\)|))|(tuesday(\(.\)|))|(wednesday(\(.\)|)))\t.*$

NSRegularExpression * regularExpression = [NSRegularExpression regularExpressionWithPattern:mutablePatternString
                                                                                     options:NSRegularExpressionAnchorsMatchLines
                                                                                       error:nil];
int rangeLocation = 0;
int rangeLength = [string length];
NSMutableArray * matches = [NSMutableArray array];
[regularExpression enumerateMatchesInString:string
                                     options:0
                                       range:NSMakeRange(rangeLocation, rangeLength)
                                  usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop){
                                      [matches addObject:[string substringWithRange:result.range]];
                                  }];

[mutablePatternString release];

// matches array is returned to the caller. 
```

我的问题是，考虑到大文本文件，它在 iPhone 上的速度还不够快。在 iPhone 4 上 8 个单词需要 1.3 秒，这对于应用程序来说太长了。鉴于以下已知因素：

• 3.2 MB 的文本文件按字母顺序列出要匹配的单词

• 使用此方法时，要查找的任意单词数组始终按字母顺序排列

• 替代发音在单词后面的括号中以 (2) 开头，而不是 (1)

• 如果没有 (2)，则不会有 (3)、(4) 或更多

• 一种替代发音的出现很少见，平均可能出现 8 次中的 1 次。更多的替代发音更加罕见。

可以通过改进正则表达式或 Objective-C 的某些方面来优化此方法吗？我假设 NSRegularExpression 已经足够优化，不值得尝试用不同的 Objective-C 库或 C 语言来做，但如果我在这里错了，请告诉我。否则，非常感谢任何关于提高性能的建议。我希望将其推广到任何发音文件，因此我试图远离解决方案，例如提前计算字母范围以进行更多受限搜索。

****编辑****

以下是 2012 年 8 月 16 日给出的所有与搜索相关的答案在 iPhone 4 上的时间安排：

dasblinkenlight 的创建 NSDictionary 方法[https://stackoverflow.com/a/11958852/119717](https://stackoverflow.com/a/11958852/119717) : 5.259676 秒

Ωmega 在[https://stackoverflow.com/a/11957535/119717](https://stackoverflow.com/a/11957535/119717)上最快的正则表达式：0.609593 秒

[dasblinkenlight 在https://stackoverflow.com/a/11969602/119717](https://stackoverflow.com/a/11969602/119717)的多个 NSRegularExpression 方法：1.255130 秒

[我在https://stackoverflow.com/a/11970549/119717](https://stackoverflow.com/a/11970549/119717)的第一个混合方法：0.372215 秒

[我在https://stackoverflow.com/a/11970549/119717](https://stackoverflow.com/a/11970549/119717)的第二种混合方法：0.337549 秒

迄今为止最好的时间是我答案的第二个版本。我无法将任何答案标记为最佳，因为所有与搜索相关的答案都告知了我在我的版本中采用的方法，因此它们都非常有用，而我的答案只是基于其他答案。我学到了很多东西，我的方法结束了原来的四分之一，所以这非常有帮助，感谢 dasblinkenlight 和 Ωmega 与我讨论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:51:09.940

由于无论如何您都将整个文件放入内存中，因此您不妨将其表示为易于搜索的结构：

*   创建一个可变的`NSDictionary words`，带有`NSString`键和`NSMutableArray`值
*   将文件读入内存
*   逐行遍历代表文件的字符串
*   对于每一个`line`，通过搜索一个`'('`或一个`'\t'`字符来分离单词部分
*   获取单词的子字符串（从零到`'('`或`'\t'`减一的索引）；这是你的`key`。
*   检查是否`words`包含您的`key`; 如果没有，添加新的`NSMutableArray`
*   添加`line`到`NSMutableArray`您在特定位置找到/创建的`key`
*   完成后，丢弃代表文件的原始字符串。

有了这个结构，您应该能够及时进行搜索，而没有正则表达式引擎能够匹配，因为您将线性的全文扫描替换为恒定的哈希查找 -时间。

** 编辑：** 我检查了这个解决方案与正则表达式的相对速度，它在模拟器上快了大约 60 倍。这一点也不奇怪，因为基于正则表达式的解决方案的可能性很大。

读取文件：

```
NSBundle *bdl = [NSBundle bundleWithIdentifier:@"com.poof-poof.TestAnim"];
NSString *path = [NSString stringWithFormat:@"%@/words_pron.dic", [bdl bundlePath]];
data = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
NSMutableDictionary *tmp = [NSMutableDictionary dictionary];
NSUInteger pos = 0;
NSMutableCharacterSet *terminator = [NSMutableCharacterSet characterSetWithCharactersInString:@"\t("];
while (pos != data.length) {
    NSRange remaining = NSMakeRange(pos, data.length-pos);
    NSRange next = [data
        rangeOfCharacterFromSet:[NSCharacterSet newlineCharacterSet]
        options:NSLiteralSearch
        range:remaining
    ];
    if (next.location != NSNotFound) {
        next.length = next.location - pos;
        next.location = pos;
    } else {
        next = remaining;
    }
    pos += (next.length+1);
    NSString *line = [data substringWithRange:next];
    NSRange keyRange = [line rangeOfCharacterFromSet:terminator];
    keyRange.length = keyRange.location;
    keyRange.location = 0;
    NSString *key = [line substringWithRange:keyRange];
    NSMutableArray *array = [tmp objectForKey:key];
    if (!array) {
        array = [NSMutableArray array];
        [tmp setObject:array forKey:key];
    }
    [array addObject:line];
}
dict = tmp; // dict is your NSMutableDictionary ivar 
```

搜索：

```
NSArray *keys = [NSArray arrayWithObjects:@"sunday", @"monday", @"tuesday", @"wednesday", @"thursday", @"friday", @"saturday", nil];
NSMutableArray *all = [NSMutableArray array];
NSLog(@"Starting...");
for (NSString *key in keys) {
    for (NSString *s in [dict objectForKey:key]) {
        [all addObject:s];
    }
}
NSLog(@"Done! %u", all.count); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T17:22:22.013

*试试这个：*

```
^(?:change|monday|tuesday|wednesday|thursday|friday|saturday|sunday)(?:\([2-5]\))?\t.*$ 
```

*还有这个（使用带有可能首字母列表的正向前瞻）：*

```
^(?=[cmtwfs])(?:change|monday|tuesday|wednesday|thursday|friday|saturday|sunday)(?:\([2-5]\))?\t.*$ 
```

*最后，有一些优化的版本：*

```
^(?=[cmtwfs])(?:change|monday|t(?:uesday|hursday)|wednesday|friday|s(?:aturday|unday))(?:\([2-5]\))?\t.*$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T13:52:59.800

这是我的 dasblinkenlight 和 Ωmega 答案的混合方法，我认为此时我也应该将其添加为答案。它使用 dasblinkenlight 的方法对字符串进行前向搜索，然后在命中时在小范围内执行完整的正则表达式，因此它利用了字典和要查找的单词都按字母顺序排列的事实，并受益于优化的正则表达式。希望我有两个最佳答案检查要发出！这给出了正确的结果，并且在模拟器上花费了纯正则表达式方法的大约一半时间（我必须稍后在设备上进行测试，以查看作为参考设备的 iPhone 4 上的时间比较是什么）：

```
NSMutableArray *mutableArrayOfWordsToMatch = [[NSMutableArray alloc] initWithArray:array];
NSMutableArray *mutableArrayOfUnfoundWords = [[NSMutableArray alloc] init]; // I also need to know the unfound words.

NSUInteger pos = 0;

NSMutableString *mutablePatternString = [[NSMutableString alloc]initWithString:@"^(?:"];
int firstRound = 0;
for(NSString *word in array) {
    if(firstRound == 0) { // this is the first round

        firstRound++;
    } else { // this is all later rounds
        [mutablePatternString appendString:[NSString stringWithFormat:@"|"]];
    }
    [mutablePatternString appendString:[NSString stringWithFormat:@"%@",word]];
}

[mutablePatternString appendString:@")(?:\\([2-5]\\))?\t.*$"];

// This creates a string that reads "^(?:change|friday|model|monday|quidnunc|saturday|sunday|thursday|tuesday|wednesday)(?:\([2-5]\))?\t.*$"

// We don't want to instantiate the NSRegularExpression in the loop so let's use a pattern that matches everything we're interested in.

NSRegularExpression * regularExpression = [NSRegularExpression regularExpressionWithPattern:mutablePatternString
                                                                                    options:NSRegularExpressionAnchorsMatchLines
                                                                                      error:nil];
NSMutableArray * matches = [NSMutableArray array];

while (pos != data.length) {

    if([mutableArrayOfWordsToMatch count] <= 0) { // If we're at the top of the loop without any more words, stop.
        break;
    }  

    NSRange remaining = NSMakeRange(pos, data.length-pos);
    NSRange next = [data
                    rangeOfString:[NSString stringWithFormat:@"\n%@\t",[mutableArrayOfWordsToMatch objectAtIndex:0]]
                    options:NSLiteralSearch
                    range:remaining
                    ]; // Just search for the first pronunciation.
    if (next.location != NSNotFound) {

        // If we find the first pronunciation, run the whole regex on a range of {position, 500} only.

        int rangeLocation = next.location;
        int searchPadding = 500;
        int rangeLength = searchPadding;

        if(data.length - next.location < searchPadding) { // Only use 500 if there is 500 more length in the data.
            rangeLength = data.length - next.location;
        } 

        [regularExpression enumerateMatchesInString:data 
                                            options:0
                                              range:NSMakeRange(rangeLocation, rangeLength)
                                         usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop){
                                             [matches addObject:[data substringWithRange:result.range]];
                                         }]; // Grab all the hits at once.

        next.length = next.location - pos;
        next.location = pos;
        [mutableArrayOfWordsToMatch removeObjectAtIndex:0]; // Remove the word.
        pos += (next.length+1);
    } else { // No hits.
        [mutableArrayOfUnfoundWords addObject:[mutableArrayOfWordsToMatch objectAtIndex:0]]; // Add to unfound words.
        [mutableArrayOfWordsToMatch removeObjectAtIndex:0]; // Remove from the word list.
    }
}    

[mutablePatternString release];
[mutableArrayOfUnfoundWords release];
[mutableArrayOfWordsToMatch release];

// return matches to caller 
```

编辑：这是另一个版本，它不使用正则表达式，并且从该方法中节省了更多时间：

```
NSMutableArray *mutableArrayOfWordsToMatch = [[NSMutableArray alloc] initWithArray:array];
NSMutableArray *mutableArrayOfUnfoundWords = [[NSMutableArray alloc] init]; // I also need to know the unfound words.

NSUInteger pos = 0;

NSMutableArray * matches = [NSMutableArray array];

while (pos != data.length) {

    if([mutableArrayOfWordsToMatch count] <= 0) { // If we're at the top of the loop without any more words, stop.
        break;
    }  

    NSRange remaining = NSMakeRange(pos, data.length-pos);
    NSRange next = [data
                    rangeOfString:[NSString stringWithFormat:@"\n%@\t",[mutableArrayOfWordsToMatch objectAtIndex:0]]
                    options:NSLiteralSearch
                    range:remaining
                    ]; // Just search for the first pronunciation.
    if (next.location != NSNotFound) {
        NSRange lineRange = [data lineRangeForRange:NSMakeRange(next.location+1, next.length)];
        [matches addObject:[data substringWithRange:NSMakeRange(lineRange.location, lineRange.length-1)]]; // Grab the whole line of the hit.
        int rangeLocation = next.location;
        int rangeLength = 750;

        if(data.length - next.location < rangeLength) { // Only use the searchPadding if there is that much room left in the string.
            rangeLength = data.length - next.location;
        } 
        rangeLength = rangeLength/5;
        int newlocation = rangeLocation;

        for(int i = 2;i < 6; i++) { // We really only need to do this from 2-5.
            NSRange morematches = [data
                            rangeOfString:[NSString stringWithFormat:@"\n%@(%d",[mutableArrayOfWordsToMatch objectAtIndex:0],i]
                            options:NSLiteralSearch
                            range:NSMakeRange(newlocation, rangeLength)
                            ];
            if(morematches.location != NSNotFound) {
                NSRange moreMatchesLineRange = [data lineRangeForRange:NSMakeRange(morematches.location+1, morematches.length)]; // Plus one because I don't actually want the line break at the beginning.
                 [matches addObject:[data substringWithRange:NSMakeRange(moreMatchesLineRange.location, moreMatchesLineRange.length-1)]]; // Minus one because I don't actually want the line break at the end.
                newlocation = morematches.location;

            } else {
                break;   
            }
        }

        next.length = next.location - pos;
        next.location = pos;
        [mutableArrayOfWordsToMatch removeObjectAtIndex:0]; // Remove the word.
        pos += (next.length+1);
    } else { // No hits.
        [mutableArrayOfUnfoundWords addObject:[mutableArrayOfWordsToMatch objectAtIndex:0]]; // Add to unfound words.
        [mutableArrayOfWordsToMatch removeObjectAtIndex:0]; // Remove from the word list.
    }
}    

[mutableArrayOfUnfoundWords release];
[mutableArrayOfWordsToMatch release]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T17:26:18.690

查看您提供的字典文件，我想说一个合理的策略可能是读取数据并将其放入任何类型的持久数据存储中。

通读文件并为每个独特的单词创建对象，并带有`n`发音字符串（其中`n`是独特发音的数量）。字典已经按字母顺序排列，因此如果您按照阅读顺序对其进行解析，您最终会得到一个按字母顺序排列的列表。

然后你可以对数据进行二分搜索——即使有大量的对象，二分搜索也会很快找到你要找的东西（假设按字母顺序）。

如果您需要闪电般的性能，您甚至可以将整个内容保存在内存中。

# .net - 将数字添加到长数字（13 位以上）

> ID：11957259
> 
> 赞同：0
> 
> 时间：2012-08-14T17:01:37.130
> 
> 标签：.net, numbers

用户输入完整的第一个卡号和最后一个完整的卡号，所以我需要获取从第一个到最后一个的一系列卡号。然后处理每个卡号。

我所做的是拆分第一个数字，然后使用 for 循环增加最后几个数字。

问题是，如果最后 5 个数字的第一个数字是 0，那么它会被循环忽略，所以我的所有卡都缺少所有卡号中间的数字......

```
Dim StartFirstNumbers = StartCard.Substring(0, StartCard.Length - 5)
Dim StartLast9 = StartCard.Substring(StartFirstNumbers.Length, StartCard.Length - StartFirstNumbers.Length)

Dim EndFirstNumbers = EndCard.Substring(0, EndCard.Length - 5)
Dim EndLast9 = EndCard.Substring(EndFirstNumbers.Length, EndCard.Length - EndFirstNumbers.Length)

For i As Integer = StartLast9 To EndLast9
    Row.CardNo = StartFirstNumbers & i
Next 
```

我可以检查那个数字并相应地处理它，但我觉得有更好的方法来做到这一点。

例如：如果卡号是 98300100001，最后一个数字将是“0001”，“i”以 1 开头，而不是 0001。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:21:47.910

试试这样的东西？

```
For i As Integer = StartLast9 To EndLast9
    Row.CardNo = StartFirstNumbers & i.ToString("D5")
Next 
```

# mysql - MYSQL 错误：1045 (28000): 用户'root'@'localhost' 的访问被拒绝

> ID：11957260
> 
> 赞同：5
> 
> 时间：2012-08-14T17:01:46.553
> 
> 标签：mysql, access-denied

当我尝试连接到 sql server 并在命令提示符中输入以下内容时：

```
shell> mysql --user=username--password=password db_name 
```

我得到错误：

> 错误 1045 (28000): 用户 'root'@'localhost' 的访问被拒绝（使用密码：Y ES）

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-10T11:37:35.053

用户名和 --password 之间似乎缺少空格

如果您不知道 root 密码，使用 Debian 或 Ubuntu，有一个简单的方法来重置它：首先，使用

```
sudo dpkg --get-selections | grep 'mysql-server-' 
```

然后，只需使用 sudo dpkg-reconfigure mysql-server-5.x

（顺便说一句，用你的真实版本号替换 5.x）

在全新安装时，默认的 root 密码为空，因此应该能够使用仅登录

```
mysql -u root 
```

您显然应该在安装后添加root密码

```
mysqladmin -u root password [newpassword] 
```

在大多数情况下，您还应该在使用数据库之前设置具有有限权限的专用帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-05T05:31:49.130

在 Windows 上 -

1.  搜索服务
2.  停止名为**MySQL[#]**的服务（在我的例子中是 MySQL80）。
3.  再次启动服务。
4.  打开命令提示符并输入：

    > mysql [数据库名称] -u [用户名] -p

当没有其他解决方案有效时，它对我有用。希望这也能解决您的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T17:03:25.813

这意味着您的密码错误或帐户“root”无法访问主机“localhost”上的数据库。

看右边栏。有多个问题与您的问题相同。

# php - 使用 PHP 下载文件时，没有任何反应？

> ID：11957266
> 
> 赞同：0
> 
> 时间：2012-08-14T17:02:12.543
> 
> 标签：php

我无法通过 PHP 下载远程文件。

我尝试过使用 cURL 和流式传输，但都不会产生错误。

这是我当前的流式传输代码。

```
$url = "http://commissiongeek.com/files/text.txt";
$path = "/files/cb.txt";     
file_put_contents($path, file_get_contents($url)); 
```

当我得到这个工作时，我会下载一个 zip 文件，但理论上这应该工作得很好......

该文件夹的权限设置为 777，如前所述，不会引发任何错误。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:04:08.267

将其拆分为多个部分，以便您可以验证每个阶段是否正常工作：

```
$url = 'http://...';
$txt = file_get_contents($url);
var_dump($txt);
var_dump(file_put_contents('/files/cb.txt', $txt)); 
```

第一个转储应该向您显示 url 返回的任何文本。第二个转储应输出布尔值 true/false，具体取决于 file_put 是否失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:06:49.030

看来您有一个要保存的绝对路径。我相信您希望将路径更改为“files/cb.txt”，并且无权访问 /files/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:09:30.560

如果您将 allow_url_fopen 设置为 true：

```
$url = 'http://example.com/image.php';
$img = '/my/folder/flower.gif';
file_put_contents($img, file_get_contents($url)); 
```

否则使用 cURL：

```
$ch = curl_init('http://example.com/image.php');
$fp = fopen('/my/folder/flower.gif', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

# javascript - 如何在javascript中访问全局变量？

> ID：11957269
> 
> 赞同：0
> 
> 时间：2012-08-14T17:02:14.993
> 
> 标签：javascript, jquery, variables, global-variables

考虑这个例子：

```
/**/
var sizes;

$(window).resize(function() {

    var viewportWidth = $(window).width();
    //var viewportHeight = $(window).height();
    if (viewportWidth > 1024) {
        sizes = '320';
    } else if (viewportWidth < 1024) {
        sizes = '300';
    }
}); /**/

jQuery(document).ready(function($) {
    console.log(sizes);
    $('#full_width_anything_slider').anythingSlider({
        delay: sizes
    });

});​ 
```

我如何才能访问`sizes`其他方法中的 var？

现在它不起作用

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:06:59.547

`sizes`当您的文档 onReady 函数执行时，没有与之关联的值。事实上，在您的 onResize 函数执行之前，它不会有任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:07:37.257

只要发布的代码未包装在函数中，您的声明就是全局的。

但是，如果您的 viewportWidth 正好是 1024，则永远不会设置大小。所以做这样的事情： `sizes`在调用 resize 之前不会有值所以在声明它时设置值并在调整窗口大小时重置它

```
var sizes = $(window).width() <= 1024 ? '300' : '320';
$(window).resize(function() {
    var viewportWidth = $(window).width();
    sizes = $(window).width() <= 1024 ? '300' : '320';
}); 
```

be aware that global variables in general is a bad idea. In your case you might as well do

```
$(function() {
    $('#full_width_anything_slider').anythingSlider({
        delay: $(window).width() <= 1024 ? '300' : '320';
    });
});​ 
```

**note** the first part of the code will not really work with the way you are using it since, the value is passed to anythingSlider when the document is loaded and will not change when the window is resized (it's a value not a reference). The second part won't solve this problem either but repeating the code in window.resize like below will

```
var setupSlider = function()
    $('#full_width_anything_slider').anythingSlider({
        delay: $(window).width() <= 1024 ? '300' : '320';
    });
});​
$(function(){
    setupSlider();
});
$(window).resize(setupSlider); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:11:50.870

You are correctly declaring a global variable, however what you are passing into `anythingSlider` is a snapshot of what the value is, not a reference to a variable that contains that value. Changing the global variable will not change the delay of `anythingSlider` unless you re-initialize anythingSlider with the new value every time you change it (on resize)

It doesn't need to be global anyway.

```
$(window).resize(function() {
    var sizes = '0';
    var viewportWidth = $(window).width();
    //var viewportHeight = $(window).height();
    if (viewportWidth >= 1024) {
        sizes = '320';
    } else if (viewportWidth < 1024) {
        sizes = '300';
    }
    $('#full_width_anything_slider').anythingSlider({
        delay: sizes
    });
});
$(document).ready(function(){
    $(window).trigger("resize");
}); 
```

Note however i can't find any documentation on re-initializing this plugin or changing it's options, I'm not sure if this is the correct way to re-initialize it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T17:06:39.123

这不是很好的做法......但是：

```
/**/
$(window).resize(function() {
    updateSize();
}); /**/

function updateSize() {
    var viewportWidth = $(window).width();
    //var viewportHeight = $(window).height();
    if (viewportWidth > 1024) {
        sizes = '320';
    } else if (viewportWidth <= 1024) {
        sizes = '300';
    }
}    

jQuery(document).ready(function($) {
    updateSize();
    console.log(sizes);
    $('#full_width_anything_slider').anythingSlider({
        delay: sizes
    });

});​ 
```

我假设（并希望）您以后也会使用尺寸？

# asp.net-mvc - 如何从 MVC Grid 的 Kendo UI 中的自定义命令重定向用户？

> ID：11957272
> 
> 赞同：2
> 
> 时间：2012-08-14T17:02:18.683
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, kendo-ui

我有一个用于 MVC 的 Kendo Grid，并且我为每一行添加了一个自定义命令。现在我需要连接 click 事件以使用所选行中的 ID 值将用户重定向到另一个视图。

这按原样工作，但 ID 是硬编码的。我需要动态构建重定向的帮助：

```
 function editShippment() {

var grid = $('#Grid').data('kendoGrid');   //get a reference to the grid data 
var record = grid.dataItem(grid.select()); //get a reference to the currently selected row
var shippingHeaderID = record.ShippingHeaderID;
window.location.href = "@Url.Action("ShippingLineItemsEdit","Shipping",new {id= 182})"; //hard coded but need the record.ShippingHeaderID inserted here.  
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T17:06:51.777

使用`Url.Action`helper 构建主 url，然后附加 id。

```
window.location.href = "@Url.Action("ShippingLineItemsEdit","Shipping")" 
                       + "/" + shippingHeaderID; 
```

# c - 如何在 ansi-c 中使用指向全局结构的指针？

> ID：11957276
> 
> 赞同：4
> 
> 时间：2012-08-14T17:02:33.993
> 
> 标签：c, struct

情况就是这样。在文件“fileA.c”中我有

```
typedef struct MY_STRUCT
{
  int A;
  int B;
  int C;
}MY_STRUCT;

MY_STRUCT Data;

/* Function */
int function(MY_STRUCT *params)
{
  int varA, varB, varC;

  varA = params->A;
  varB = params->B;
  varC = params->C;
} 
```

我需要从其他例程中填充结构元素，例如“fileB.c”，其中包含以下内容：

```
extern MY_STRUCT Data;

int function(MY_STRUCT *params);

/* Function  */
void userMain(void)
{
  Data.A = 1254;
  Data.B = 5426;
  Data.C = 1236;

  function(&Data);
} 
```

但我得到了错误：

"[Error] fileB.c E208: 语法错误 - 标记 ";" 插入到 "Data" 之前

当我交叉探测错误时，编译器将我带到声明“extern MY_STRUCT Data;”

所以我的问题是如何完成这个功能？我的意思是，如何从与我声明结构的文件不同的另一个文件中的另一个函数填充结构的元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T17:04:27.630

当编译器编译*fileB.c*时，它不知道`typedef`您在*fileA.c*中定义的内容。所以在 fileB.c 中，`MY_STRUCT`是一个未知类型。

您应该将 移动`typedef`到一个公共标题，并将其包含在 fileA.c 和 fileB.c 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:34:25.077

详细说明@pb2q 答案：

创建一个 filea.h 文件（省略定义和东西）：

```
struct MY_STRUCT
{
(blah blah blah ...)
};

extern MY_STRUCT Data; 
```

这将声明结构并告诉任何想知道该变量是在另一个文件中声明的人。然后在 filea.c 中放入以下几行

```
#include "filea.h"     // near the top
(...)
MY_STRUCT Data;    // Somewhere meaningful 
```

这实际上将声明变量 Data。最后，在文件“fileb.c”中输入

```
#include "filea.h" 
```

这允许您使用变量数据。

# unicode - 如何确定请求查询字符串的编码

> ID：11957280
> 
> 赞同：0
> 
> 时间：2012-08-14T17:02:48.247
> 
> 标签：unicode, encoding, sql-injection, httprequest, httpmodule

假设我有一个 .NET`HttpModule`可以分析传入请求以检查可能的攻击，例如`Sql Injection`. 现在假设我的应用程序的用户在表单字段中输入以下内容并提交：

```
&#039&#032&#079&#082&#032&#049&#061&#049 
```

那是 Unicode 的`' OR 1=1`。所以在请求中我得到类似的东西：

```
http://example.com/?q=%26%23039%26%23032%26%23079%26%23082%26%23032%26%23049%26%23061%26%23049 
```

在我`HttpModule`看来这很好（没有 Sql 注入），但服务器会正​​确解码它`q=' OR 1=1`并且我的过滤器会失败。

所以，我的问题是：`Is there any way to know at that point what is the encoding used by the request query string, so I can decode it and detect the attack?`

我猜浏览器必须告诉服务器请求的编码是什么，这样才能正确解码。还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:30:54.943

您看到的是 URL 编码，其中百分号后跟 2 个十六进制数字表示单个编码字节八位字节。在 HTML 中，以 & 符号开头并以分号结尾的实体包含实体名称或显式 Unicode 代码点值。

通过浏览器和服务器之间的线路发送的内容是`http://example.com/?q=%26%23039%26%23032%26%23079%26%23082%26%23032%26%23049%26%23061%26%23049`，但从逻辑上讲，它实际上表示`http://example.com/?q=&#039&#032&#079&#082&#032&#049&#061&#049`服务器在接收到它时解码时的内容。当您的代码读取查询字符串时，它应该正在接收`&#039&#032&#079&#082&#032&#049&#061&#049`. 服务器不应该进一步解码`' OR 1=1`，您必须在自己的代码中执行此操作。

如果您允许 URL 查询字符串按原样指定 SQL 查询过滤器，那么您一开始就是一个错误。这表明您正在动态构建 SQL 查询，而不是使用参数化 SQL 查询或存储过程，因此您将面临 SQL 注入攻击。你不应该使用它。参数化 SQL 查询和存储过程不会受到注入攻击，因此您的客户端应该只被允许提交 URL 中的单个参数值。然后，您的服务器代码可以从 URL 查询中提取各个值，并根据需要将它们传递给 SQL 参数。SQL 引擎将确保对值进行清理和格式化以避免攻击。您不应该手动处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:24:32.533

> 服务器会将其正确解码为`q=' OR 1=1`

它不应该。`&#039...`在 SQL 查询中使用字符串之前，应用程序没有正当理由 (*) 对字符串进行 HTML 解码。HTML 解码是客户端事件。

(* 有一个无效的原因：应用程序作者对他们在做什么一无所知，试图编写一个输入 HTML 转义函数 - 首先是一个被误导的想法 - 由于无能而写了一个输入-de-escaping 函数......但这是不太可能的情况。希望。）

> 有什么方法可以知道请求查询字符串使用的编码是什么

不会。一些 Web 应用程序防火墙试图通过将他们能想到的每个解码方案应用于传入数据，并在其中*任何*一个匹配可疑的东西时触发，以防应用程序碰巧有一个该类型的任意解码器坐在在输入和易受攻击的系统之间。

这可能会导致性能下降以及误报率增加，对于尝试两个或多个解码器的所有可能组合的 WAF 来说更是如此。（例如，是`T1IrMQ`base-64 编码、URL 编码的`OR 1`SQL 攻击，还是只是车牌号？）

你在多大程度上采用这个想法是在你捕获多少潜在攻击和你对应用程序的真实用户产生多少负面影响之间进行权衡。没有一个“正确”的解决方案，因为最终您永远无法在应用程序外部的一层中提供针对应用程序漏洞的完整保护（又名“WAF 不起作用”）。

# excel - 检测/处理查询表故障

> ID：11957281
> 
> 赞同：0
> 
> 时间：2012-08-14T17:02:53.370
> 
> 标签：excel, vba

我对 excel 的 Visual Basic 使用知之甚少，但我正在处理一些现有代码。只要查询表服务器响应，我几乎可以正常工作。

我想知道是否有任何方法可以检测到查询表操作的失败？

这是代码...

```
With ActiveSheet.QueryTables.Add(Connection:="URL;" & qurl, Destination:=DataSheet.Range(Cells(row_stock, 27), Cells(row_stock + 199, 27))) ' was "AA7"
    .BackgroundQuery = True
    .TablesOnlyFromHTML = False
    .Refresh BackgroundQuery:=False
    .SaveData = True
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:12:11.397

现在失败时会发生什么？通常你会使用 On Error Goto ... 来处理错误。

如果您不熟悉在 VBA 中处理错误，那么 [http://www.cpearson.com/excel/errorhandling.htm](http://www.cpearson.com/excel/errorhandling.htm)是一个很好的概述，可以帮助您入门。

# android - 如何将 char 数组从 JNI 发送到 android

> ID：11957282
> 
> 赞同：3
> 
> 时间：2012-08-14T17:02:58.563
> 
> 标签：android, arrays, android-ndk, java-native-interface

我想将一块数据从 JNI 发送到 android。

我`jchar*`在 JNI 中创建了一个并用我的数据填充它，并将其作为`jcharArray`. 但是在android中显示数据时，会产生垃圾值。

这是我的 JNI 代码：

```
JNIEXPORT jcharArray JNICALL Java_com_android_test_dsp_Vread(
      JNIEnv *env,
      jobject thiz,  
      jint length)
{
   jchar* datatosend;
   jcharArray ret;
   ret= (*env)->NewCharArray(env, length);
   memset(datatosend,1,length);
   (*env)->SetCharArrayRegion(env, ret, 0, length, datatosend);
   return ret;
} 
```

我的Java代码：

```
char[] rxvddata = new rxvddata[length];
rxvddata =Vread(length);
textview.setText("Data1:"+Integer.tostring(rxvddata[0]) + 
    "Data2:"+Integer.tostring(rxvddata[1])); 
```

谁能指出错误？挣扎了很久。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:16:34.203

以下是一些与您正在使用的代码类似的代码。
在此示例中，将一个 jobjectArray 返回给 Java，其中 Array 中的对象是 UTF 字符串。

本机代码： *ExampleNativeJni.c*

```
#include <jni.h>
#include <android/log.h>

#define LOG_TAG "AndroidJniExample"
#define LOG(...)  __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)
#define LOGI(...) __android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)
#define LOGE(...) __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)
#define AUDIO_TRACK_BUFFER_SIZE (48)

/*
*  Method used to get the audio track language codes from a video file
*/

JNIEXPORT jobjectArray JNICALL Java_com_example_nativeGetAudioTracks (JNIEnv * env, jobject obj, jstring filePath) {

    // Convert filePath from jstring to null terminated UTF8 string
    const char *path = (*env)->GetStringUTFChars(env, filePath, 0);
    if (!path ) {
            LOGE ("ERROR : pathToFile Conversion error in nativeGetAudioTracks");
            (*env)->ReleaseStringUTFChars(env, filePath, path);
            return NULL;
    }

    // Each track is 3 chars + a null terminator.
    // Allows for up to 12 languages.
    char langCodeHolder[AUDIO_TRACK_BUFFER_SIZE] = {0};
    int numTracks = 0;
    int fd = open(path, O_RDONLY);
    if (fd > 0) {
        // get audio track magic through custom FUSE IOCTL handler
        numTracks = ioctl(fd, GET_AUDIO_TRACKS, &(langCodeHolder[0]));
        close(fd);
    } else {
        LOGE ("ERROR: open(%s) failed in nativeGetAudioTracks", path);
        (*env)->ReleaseStringUTFChars(env, filePath, path);
        close(fd);
        return NULL;
    }

    if (numTracks < 0) {
        LOG("ERROR: Invalid value returned from GET_AUDIO_TRACKS");
        (*env)->ReleaseStringUTFChars(env, filePath, path);
        return NULL;
    }

    if (numTracks == 0) {
        LOG("ERROR: No audio tracks returned");
        (*env)->ReleaseStringUTFChars(env, filePath, path);
        return NULL;
    }

    // Instantiate array to hold language codes.
    jobjectArray langs;
    const jint langArraySize = numTracks;
    jclass stringObject = (*env)->FindClass(env, "java/lang/String");
    if (stringObject == NULL) {
        (*env)->ReleaseStringUTFChars(env, filePath, path);
        return NULL;
    }
    langs = (*env)->NewObjectArray(env, langArraySize, stringObject, (*env)->NewStringUTF(env, NULL));

    // Extract each 3-letter language code and stuff them into the array.
    jstring langCode;
    char* temp = &(langCodeHolder[0]);
    jint i;
    for (i = 0; i < langArraySize; i++) {
        langCode = temp;
        (*env)->SetObjectArrayElement(env, langs, i, (*env)->NewStringUTF(env, langCode));
        temp += 4;
    }

    (*env)->ReleaseStringUTFChars(env, filePath, path);
    return langs;
} 
```

Android JNI 代码：*ExampleAndroidJni.java*

```
public class ExampleAndroidJni {

    private static ExampleAndroidJni sInstance;
    private static final String TAG = "ExampleAndroidJni";

    public static String[] getAudioTracks(final String filePath) {
        if (sInstance == null) {
            sInstance = new ExampleJniClient();
        }

        if (filePath == null) {
            Log.e(TAG, "file path is null");
            return null;
        }

        final String[] auduioTracks = sInstance.nativeGetAudioTracks(filePath);
        if (auduioTracks == null || auduioTracks.length == 0) {
            Log.i(TAG, "No audio tracks returned for : " + filePath);
        }

        return auduioTracks;
    }

    native String[] nativeGetAudioTracks(String filePath);

    static {
        System.loadLibrary("ExampleNativeJni");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:29:51.200

万一有人偶然发现如何在 JNI 中创建 NewCharArray，你不能......你必须使用 NewObject 代替（如 Akos 所说）。以下是如何在 C++ 中执行此操作：

这里，“SendClass”是我的 jclass，“sendMain”是我的 jmethod，“env”是我的 JNIEnv

```
jstring stringOne = env->NewStringUTF("test1");
jstring stringTwo = env->NewStringUTF("test2");
jobject jobjDet = env->NewObject(SendClass, sendMain, stringOne, stringTwo);
env->CallStaticIntMethod(SendClass, sendMain, jobjDet);
env->DeleteLocalRef(stringOne);
env->DeleteLocalRef(stringTwo);
//may need to release more resources 
```

===============================

编辑：

我不认为我之前写的代码会发送一个 String[] arg ......我相信这会起作用，但：

```
//array size of 3 means [0], [1], [2]
jobjectArray jobjDet;
//creates String[3] = ""
jobjDet = env->NewObjectArray(3, env->FindClass("java/lang/String", env->NewStringUTF(""));
env->SetObjectArrayElement(jobjDet, 0, env->NewStringUTF("test1"));
env->SetObjectArrayElement(jobjDet, 1, env->NewStringUTF("test2"));
env->SetObjectArrayElement(jobjDet, 2, env->NewStringUTF("test3")); 
```

# javascript - 遍历 fusiontable 结果

> ID：11957285
> 
> 赞同：0
> 
> 时间：2012-08-14T17:03:14.320
> 
> 标签：javascript

我想从 GoogleFusion 表中读取一些数据，然后使用结果，作为 javascript 的新手，我想了解如何公开结果以便我可以在全球范围内使用它，这是我目前所拥有的：

```
<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <script src="http://ft2json.appspot.com/api/ft2json.js" type="text/javascript"></script>
    <script type="text/javascript">

    var results = ft2json.query(
        'SELECT * FROM 1j1kKW9s9CrtZ6_o6MdC-xb0YNWb73rQQYENmzQ', /* Fusion Tables query. */
        function(result) {
            /* Callback function. */
            console.log(result);
        },
        {
            /* Optional parameters. */
            start : 25,
            limit : 50
        }
    );
    console.log('data', results);
    </script>
</head>

<body>

</body>
</html> 
```

第一个`console.log`返回 Object，但第二个`console.log('data', results);`返回`Undefined`.

在 Chrome 控制台中，`console.log('data', results);`首先读取，我不明白为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:22:36.850

这是发生的事情

1.  您的查询已发送（查询功能）
2.  调用了 console.log('data', results)
3.  您的回调函数被调用

查询是异步的。所以，发生的事情是您的代码在等待查询结果的同时继续运行。请参阅下面的示例。

示例 1

```
 ft2json.query(
        'SELECT * FROM 1j1kKW9s9CrtZ6_o6MdC-xb0YNWb73rQQYENmzQ', /* Fusion Tables query. */
        function(result) {
            /* Callback function. */
            console.log(result);
            // do stuff with result object here
        },
        {
            /* Optional parameters. */
            start : 25,
            limit : 50
        }
    );
</script> 
```

示例 2

```
 var doSomethingWithResult = function (result) {
         // do stuff with result object here
    };

    ft2json.query(
        'SELECT * FROM 1j1kKW9s9CrtZ6_o6MdC-xb0YNWb73rQQYENmzQ', /* Fusion Tables query. */
        function(result) {
            /* Callback function. */
            doSomethingWithResult(result);
        },
        {
            /* Optional parameters. */
            start : 25,
            limit : 50
        }
    );
</script> 
```

# visual-studio-2010 - “无法在证书存储中找到清单签名证书” - 即使添加新密钥

> ID：11957295
> 
> 赞同：204
> 
> 时间：2012-08-14T17:03:34.987
> 
> 标签：visual-studio-2010, visual-studio, code-signing, strongname

我无法使用强名称密钥签名构建项目 - 标题中的消息总是出现。

是的，该项目最初是从另一台机器复制过来的。但是，即使我通过项目属性中的签名选项卡添加新密钥，仍然会显示此错误。

我尝试以管理员身份运行 Visual Studio，并尝试手动将密钥添加到 Windows 证书存储区。

帮助！

编辑：我没有在新项目中遇到此错误，但我很想让这个现有项目正常工作。即使我创建一个新证书也不起作用！

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2012-08-26T12:27:04.500

我终于找到了解决方案。

1.  编辑相关`.csproj`项目的文件。

2.  删除以下代码行：

    ```
    <PropertyGroup>
       <ManifestCertificateThumbprint>...........</ManifestCertificateThumbprint>
    </PropertyGroup>
    <PropertyGroup>
       <ManifestKeyFile>xxxxxxxx.pfx</ManifestKeyFile>
    </PropertyGroup>
    <PropertyGroup>
       <GenerateManifests>true</GenerateManifests>
    </PropertyGroup>
    <PropertyGroup>
       <SignManifests>false</SignManifests>
    </PropertyGroup> 
    ```

* * *

## 回答 #2

> 赞同：196
> 
> 时间：2015-03-02T13:17:06.497

转到 Visual Studio 中项目的“属性”。然后转到签名选项卡。

然后确保 Sign the Click Once manifests 已关闭。

* * *

***更新说明：***

**在您的解决方案资源管理器中：**

1.  **右键单击您的项目**
2.  **点击属性**
3.  通常在左侧，**选择“签名”选项卡**
4.  **勾选签署 ClickOnce 清单**
5.  **确保你保存！**

[![在此处输入图像描述](../Images/5a131b7940ce50c99790eedb8ae089fb.png)](https://i.stack.imgur.com/FIHjg.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-04-29T03:37:03.990

这很简单！！

我按照以下步骤解决了这个问题：

1.  打开项目属性 [![图像](../Images/8e01d4ca7aba934a81b7a719f6330639.png)](https://i.stack.imgur.com/1sCeD.png)
2.  单击签名选项卡
3.  并取消选中“签署程序集”

就是这样！！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-08-13T12:51:50.003

1.  在记事本中打开 .csproj 文件。
2.  删除证书存储区中与签名证书相关的以下信息

    ```
    <PropertyGroup>
      <ManifestCertificateThumbprint>xxxxx xxxxxx</ManifestCertificateThumbprint>
      <ManifestKeyFile>xxxxxxxx.pfx</ManifestKeyFile>
    <GenerateManifests>true</GenerateManifests>
    <SignManifests>false</SignManifests>
    </PropertyGroup> 
    ```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-11-28T08:53:04.417

试试这个：右键单击您的项目 -> 转到**属性**-> 单击屏幕左侧的签名 ->取消**选中****Sign** **the click once manifests** -> Save & Build

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-05-05T15:50:55.830

转到 Visual Studio 中的项目“属性”。然后转到签名选项卡。

然后确保 Sign the Click Once manifests 已关闭。

或者

1.在记事本中打开 .csproj 文件。

2.删除证书存储中与签名证书相关的以下信息 xxxxx xxxxxx xxxxxxxx.pfx true false `

为我工作。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-10-27T17:52:20.273

假设这是您从中复制项目的系统上的 Windows 创建的个人证书，您可以在项目现在所在的系统上使用证书管理器并导入证书。启动证书管理器 (certmgr) 并选择个人证书，然后右键单击现有证书列表下方并从任务中选择导入。使用浏览器在项目中查找 .pfx（您在项目中复制的上一个系统中的 .pfx）。它应该在与项目目录同名的子目录中。我熟悉 C# 和 VS，所以如果这不是您的环境，那么 .pfx 可能会在其他地方，或者这个建议可能不适用。导入后，您应该会收到一条状态消息。如果成功，编译证书错误应该消失了。![certmgr 屏幕](../Images/40a40059ebe4de933ae571c016b23b6f.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-19T17:23:41.153

使用属性对具有强名称的程序集进行签名

打开`AssemblyInfo.cs`（中`$(SolutionDir)\Properties`）

`AssemblyKeyFileAttribute`或`AssemblyKeyNameAttribute`，指定包含密钥对的文件或容器的名称，以在使用强名称对程序集进行签名时使用。

添加以下代码：

```
[assembly:AssemblyKeyFileAttribute("keyfile.snk")] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-23T21:10:31.310

手动将密钥添加到 Windows 证书存储是不够的。证书仅包含签名的公钥。您还必须导入与证书中的公钥关联的私钥*。*.pfx 文件在单个文件中包含公钥和私钥。这就是您需要导入的内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-24T15:39:24.013

您说您从另一台计算机复制文件。复制它们后，您是否“取消阻止”它们？具体来说，应该检查 .snk 文件以确保它没有被标记为不安全。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-03T22:58:57.950

如果您只需要在*本地*构建项目或解决方案，那么正如其他人所建议的那样，删除签名可能是一个非常简单的解决方案。

但是，如果您在像 TeamCity 这样的自动化构建服务器上遇到此错误，您可以在其中构建用于部署或分发的实际发布部分，您可能需要考虑如何将此证书正确安装到构建机器上的证书存储中，以便您获得在构建结束时签名的包。

通常不建议将任何**PFX**证书签入/提交到源代码控制中，因此在构建过程中如何在构建服务器上获取这些文件是另一个问题，但有时人们确实将此文件与解决方案一起存储代码，所以你可以在项目文件夹中找到它。

您需要做的只是在您的构建服务器上以*适当的*帐户安装此证书。

1.  从 Windows Sysinternals下载[PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)。

2.  打开命令提示符，然后输入以下内容。它将生成一个新的命令提示符，以**本地系统**身份运行（假设您的 TeamCity 在默认的本地系统帐户下运行）：

    `> psexec.exe -i -s cmd.exe`

3.  在这个新的命令提示符下，切换到包含证书的目录并输入要安装的文件名（将文件名更改为您的文件名）：

    `> mykey.pfx`

4.  导入证书向导将启动。单击并选择所有建议的默认值。

5.  运行构建。

所有学分都归功于**[Stuart Noble](http://stuartnoble.com/install-clickonce-certificate-teamcity/)**（然后我相信**Laurent Kempé** ☺）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-17T20:10:09.433

出于安全考虑，由于代码中未包含 PFX 证书，因此（再次）遇到了这个问题。

对于本地测试，如调试构建，该解决方案的首席程序员让我进入属性，签名，单击“创建测试证书”。在我们的设置中，他说只需单击确定，但如果有必要/需要，可以在此处输入强密码。

# solr - 如何在 Solr 中查询空字段或特定值

> ID：11957297
> 
> 赞同：9
> 
> 时间：2012-08-14T17:03:39.620
> 
> 标签：solr

如何执行过滤到空白字段或特定值的 OR 表达式？

这似乎没有这样做：

`q=(-PrivacyLevel:*) OR PrivacyLevel:2`

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-08-14T12:23:14.477

答案是使用[Maurizio In denmark](https://stackoverflow.com/questions/17044661/how-to-filter-search-by-values-that-are-not-available/17045097#17211744)所建议的双重否定。从数学上讲，这与非否定查询相同，但是，Solr 只理解双重否定版本：

```
q=-(-PrivacyLevel:2 PrivacyLevel:*) 
```

注意：这也适用于过滤器查询：

```
fq=-(-PrivacyLevel:2 PrivacyLevel:*) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T05:59:03.657

结帐[SolrQuery 语法](http://wiki.apache.org/solr/SolrQuerySyntax#Differences_From_Lucene_Query_Parser)

纯否定查询：-

`-field:[* TO *]`查找所有没有字段值的文档

你可以试试 ：-

`q=-PrivacyLevel:[* TO *] OR PrivacyLevel:2`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-21T22:13:24.477

这应该有效：

```
q=(*:* AND -PrivacyLevel:[* TO *]) OR PrivacyLevel:2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-21T14:11:02.127

这对我有用：

```
fq=(* -type:[ * TO * ]) || (* +type:company) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-21T09:00:46.933

另请参阅[使用 AND 和 OR 运算符的 Solr 字段查询 (fq)，](https://stackoverflow.com/questions/33002648/solr-field-query-fq-with-and-and-or-operator/41258717#41258717)了解潜在问题和否定查询的解决方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-08T07:39:49.957

对我有用的解决方案是`q = -PrivacyLevel:(*) PrivacyLevel:("2")`.

快乐编码。

# excel - 标准化Excel工作表的简单方法？

> ID：11957298
> 
> 赞同：1
> 
> 时间：2012-08-14T17:03:45.847
> 
> 标签：excel, normalization, excel-2010, vba

我有几个相当大的Excel 工作表（`WorksheetID`由相应记录的字段值 ( )（或为空白）。`DataRecordID``DataFieldID``Value`

我有兴趣将它们分成（许多）这样的记录，以便我可以将它们导入 MS Access：

`ID | WorksheetID | DataRecordID | DataFieldID | Value`

我已经手动完成了。我发现编写一个 VBA 脚本来遍历工作表并（可选地）删除最终表中的记录可能是一件简单的事情。

我的问题是：在我卷起袖子开始编码之前，Excel 2010 中是否已经有内置功能，我什至不需要编写脚本来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-13T22:01:24.340

如果数据源具有一致的布局，则不需要为此编写脚本。[此处](https://stackoverflow.com/questions/20541905/convert-matrix-to-3-column-table-reverse-pivot-unpivot-flatten-normal/20543651#20543651)描述了基本过程（用图片！）。但是，由于这是考虑单个矩阵，您将需要一些额外的步骤：

内置到其工作表来源的 DataRecordIDs 指示中。假设您的第一个 DataFieldID 在 A2 中，假设您的第一个 DataFieldID 位于 A2 中，假设您的第一个 DataFieldID 位于所有工作表中，使用公式（例如`=A2&"|WorksheetID"`复制下来以适合插入为（新）ColumnB 的列）进行说。

在流程的第 4 步（向导中的第 2b 步，共 3 步），您需要分别添加每张工作表中的相关范围。

一旦你有了结果表，你就需要插入一个新的 ColumnB 并将文本应用于列，用其他分隔`|`到 ColumnA。

# c# - Microsoft.SqlServer.Types.GLArgumentException：24205

> ID：11957307
> 
> 赞同：0
> 
> 时间：2012-08-14T17:04:08.920
> 
> 标签：c#, sql-server, geospatial, geography, sqlgeography

嗨，我正在尝试创建一个地理区域，我们的西北纬度和经度，东南纬度和经度但是当我使用这些坐标运行查询时出现此异常。

> 选择 (geography::STGeomFromText('POLYGON((-0.534717 0.524190,0.426951 0.524190,0.426951 -0.578706,-0.534717 -0.578706,-0.534717 0.524190))', 4326))

```
A .NET Framework error occurred during execution of user-defined routine or aggregate "geography": 
Microsoft.SqlServer.Types.GLArgumentException: 24205: The specified input does not represent a valid geography instance because it exceeds a single hemisphere. Each geography instance must fit inside a single hemisphere. A common reason for this error is that a polygon has the wrong ring orientation. To create a larger than hemisphere geography instance, upgrade the version of SQL Server and change the database compatibility level to at least 110.
Microsoft.SqlServer.Types.GLArgumentException: 
   at Microsoft.SqlServer.Types.GLNativeMethods.GeodeticIsValid(GeoData& g, Double eccentricity, Boolean forceKatmai)
   at Microsoft.SqlServer.Types.SqlGeography.IsValidExpensive(Boolean forceKatmai)
   at Microsoft.SqlServer.Types.SqlGeography..ctor(GeoData g, Int32 srid)
   at Microsoft.SqlServer.Types.SqlGeography.GeographyFromText(OpenGisType type, SqlChars taggedText, Int32 srid)
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:20:13.410

您的环方向不正确，因此您的多边形是“由内向外”。你应该改用这个：

```
SELECT geography::STGeomFromText('POLYGON ((0.426951 0.52419, -0.534717 0.52419, -0.534717 -0.578706, 0.426951 -0.578706, 0.426951 0.52419))', 4326); 
```

# linq - 在 EF 实体上复制一行

> ID：11957308
> 
> 赞同：0
> 
> 时间：2012-08-14T17:04:22.287
> 
> 标签：linq, entity-framework, duplicates

我有以下代码：

```
Chart getChart = _db.Charts.SingleOrDefault(p => p.ChartID == chart.ChartID);
if (ModelState.IsValid)
        {
            getChart.MainChart = false;
            _db.Charts.AddObject(getChart);
            _db.SaveChanges(); 
```

所以我想复制该行。但我收到此错误：ObjectStateManager 中已存在具有相同键的对象。现有对象处于已修改状态。只有处于添加状态的对象才能再次添加到 ObjectStateManager。

更改身份列以让遇到添加此行的最简单方法是什么。我不想创建一个新图表，因为该表中有很多列。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:35:09.183

AFAIK 你想要达到的目标是不可能用你的方法实现的。
您必须使用像[AutoMapper](http://automapper.org/)这样的映射库，或者`IClonable`为您的`Chart`实体和使用`Clone()`方法实现。

*更新*：
此外，您可以编写/使用通用方法将每个属性复制到另一个对象中的相似属性。一些有用的链接是[CodeProject 上的这篇文章](http://www.codeproject.com/Articles/71598/Simple-properties-Mapper-by-reflection-Stop-copyin)或[这篇博客文章](http://weblogs.asp.net/gunnarpeipman/archive/2010/02/03/performance-using-dynamic-code-to-copy-property-values-of-two-objects.aspx)。

# random - 智能“谁想成为百万富翁”百分比算法

> ID：11957309
> 
> 赞同：1
> 
> 时间：2012-08-14T17:04:24.167
> 
> 标签：random, distribution, percentage

我正在写一个“谁想成为百万富翁”的克隆，偶然发现了一个我无法理解的小问题。

我有一个小丑，显示每个答案的百分比，显示答案正确的可能性。为此，我将 15% 分配给每个错误答案，将剩余的 55% 分配给正确答案。

然后我使用一个循环，在这些答案中循环 (level * 10) 次，并将其中一个答案（随机选择）的 1% 分配给其他答案之一（也随机选择）。

其背后的想法是，较低的级别仍然会以较高的百分比显示真正的答案，但较高的级别将很有可能以最多的百分比显示错误答案或答案之间的总体相等.

唉，它并没有想象中那么好，即使在高水平（高达 12），真正的答案仍然非常明显可见，我不知道我可以使用什么样的算法来让它变得更好？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:30:02.480

好吧，您可以尝试使用指数失真而不是线性失真。

在此处查看 JavaScript 中的实现：http: [//jsfiddle.net/hua7R/1/](http://jsfiddle.net/hua7R/)

首先我们设置级别数和指数失真：

```
var levels=12,
    distortion=5; 
```

以下函数并不重要，我只是为了让日志按列分布而使用它。

```
function numToStr(n){
    var s=String(n);
    for(var i=s.length;i<3;i++){
        s=' '+s;
    }
    return s;
} 
```

我们遍历所有级别以查看它们之间的差异：

```
for(var l=0;l<=levels;l++){

    //In this test the right solution is always the last:

    var percentages=[15,15,15,55];

    /*The following function gives us a random number from 0 (included)
      to `percentage`'s lenght (not included).
      If it's called with the argument `true`, it checks if we can
      subtract 1 to that percentage (we don't want negative percentages).*/

    function random(cond){
        var i=Math.floor(Math.random()*percentages.length);
        if(!cond||percentages[i]>0){
            return i;
        }
        return random(true);
    }

    /*Then we iterate from 0 to the maximum value between `l*10`
      (`l` is the current level) and `l` raised to the power of `distortion`*/

    for(var i=0;i<Math.max(l*10,Math.pow(l,distortion));i++){
        percentages[random(true)]--;
        percentages[random()]++;
    }

    //Finally, the log:

    document.getElementById('log').innerHTML+="level "+numToStr(l)+" -> ["+numToStr(percentages[0])+", "+numToStr(percentages[1])+", "+numToStr(percentages[2])+", "+numToStr(percentages[3])+"]\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:02:42.173

在没有对概率分布进行分析的情况下，我认为一个可能对您有用的简单易懂的算法如下所示：

```
select 100 rand numbers from 1 to n (I will get to how you set n)
calculate how many 1's,2's,3's and numbers >= 4 you get
Use these counts as your answer scores, with the counts for >=4 being for the correct answer 
```

因此，例如，如果您从 n 到 4，您将在所有答案中平均获得 25% 的分数。如果将 n 设置为 5，则正确答案的平均得分为 40%。通过改变 n、您绘制的兰特数量以及如何将数字映射到答案（例如，您可以将 1 和 2 分配给第二好的答案等），您可以非常精确地改变均值和方差。

如果您对概率分布有更多了解，这些绝对是直接执行此操作的更好方法。这种方法只是因为它的算法简单。

# c# - Listview 数据绑定混乱

> ID：11957311
> 
> 赞同：0
> 
> 时间：2012-08-14T17:04:38.690
> 
> 标签：c#, listview, data-binding, stored-procedures

我目前有一个正在运行的存储过程，并希望将 sp 中的数据与我的列表视图绑定。但是，我不确定如何继续这样做。

这是我当前的代码。我在想它类似于对 gridview 进行数据绑定，但在这样做时迷路了。

HTML

```
<asp:ListView runat="server">
                        <LayoutTemplate>
                            <table>
                                <tr style="background-color:green">
                                    <th><asp:LinkButton ID="lnkid" runat="server">Role ID</asp:LinkButton></th>
                                    <th><asp:LinkButton ID="lnkdesc" runat="server">Role Description</asp:LinkButton></th>
                                </tr>
                            </table>
                        </LayoutTemplate>
                        <ItemTemplate>
                            <tr>
                                <td><asp:Label runat="server" ID="lblroleid">Role ID</asp:Label></td>
                                <td><asp:Label runat="server" ID="lblroledesc">Role Desc></asp:Label></td>
                            </tr>
                        </ItemTemplate>
                        <AlternatingItemTemplate>
                            <tr style="background-color:Aqua">
                                <td><asp:Label runat="server" ID="lblroleid">Role ID</asp:Label></td>
                                <td><asp:Label runat="server" ID="lblroledesc">Role Desc</asp:Label></td>
                            </tr>
                        </AlternatingItemTemplate>
                    </asp:ListView> 
```

C＃

```
protected void roles()
    {
        txtSearch.Focus();
        string[] queryvalue = txtSearch.Text.Split(' ');
        SqlConnection myconn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Rollup2ConnectionString"].ConnectionString);
        SqlCommand cmd = new SqlCommand();

        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "USP_GET_USER_ROLES";
        cmd.Connection = myconn;
        cmd.Parameters.Add("@NUID", SqlDbType.VarChar).Value = queryvalue[0].ToString();
        myconn.Open();
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataSet ds = new DataSet();

        da.Fill(ds);

        myconn.Close();
        myconn.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:29:19.120

这应该可以帮助你

[ASP.NET 使用存储过程填充 ListView](https://stackoverflow.com/questions/6196300/asp-net-populate-listview-with-stored-procedure)

```
<asp:SqlDataSource ID="sdsYourData" Runat="server"
    ProviderName="System.Data.SqlClient"
    ConnectionString="Server=(local);Database=Northwind;Integrated Security=SSPI;"
    SelectCommand="dbo.YourStoredProcName" 
    <SelectParameters>
        <asp:Parameter Name="Param1" Type="String" />>
    </SelectParameters>
</asp:SqlDataSource> 
```

# jsp - JSF中渲染组件时如何设置ManagedBean的属性不丢失值（首选不使用SessionBean或使用静态变量）

> ID：11957314
> 
> 赞同：0
> 
> 时间：2012-08-14T17:04:42.227
> 
> 标签：jsp, jsf-2

众所周知，当我们渲染 JSF Web 应用程序的一个组件时，我们会失去属性值。我们有两种解决方案：

1.  在 face-config.xml 中设置 ManagedBean 类型的 Session
2.  设置托管 Bean 静态类型的属性。前任：

    **公共静态字符串 txtName 例如。**

我想找到一种不使用第二种方式的方式（很多他们只会通过 Web 浏览器访问单个静态变量），而不是像第一种方式那样使用 SessionBean。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:11:48.273

只需使用视图范围。它正是为此目的而设计的。记住负责同一视图上 ajax 请求的视图状态的值。

```
@ManagedBean
@ViewScoped
public class Bean {

    // ...

} 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scop)

# php - 基于 php 的 javascript 加载器优化器？

> ID：11957316
> 
> 赞同：2
> 
> 时间：2012-08-14T17:04:44.353
> 
> 标签：php, javascript, minify

我正在构建一个网络应用程序框架，我正在寻找一种在运行时编译 javascript 和 css 源文件的方法，我希望得到一些建议。

我使用过 Require.js，但是优化器似乎依赖于安装的 Node.js 或 Java/Rhino，这并不理想，因为我想降低依赖关系，以便它可以在任何 WAMP/LAMP 环境中运行（即没有需要 Java/rhino 或 Node）

理想情况下，它会在运行时查找源更新并将 js 编译/缩小到单个平面文件中`<script src="js.php">`

我已经尝试过[php packer](http://dean.edwards.name/weblog/2006/12/packer-php/)，但是我的测试表明，每当我使用它时，它都会导致一堆 javascript 错误，它现在已经 6 岁了，而且似乎没有积极开发。

据我所知，YUI 压缩器和 Google 闭包再次需要 Java。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:11:22.293

[Minify](http://code.google.com/p/minify/)似乎正是这样做的。它提供缩小的 Javascript 和 CSS 文件。如果自上次访问以来未更新，它会在标头中添加 ETag 并发送 304 HTTP 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-28T17:45:05.770

我建议在这里看看：

*   [YUICompressor 或 PHP 中的类似功能？](https://stackoverflow.com/questions/972757/yuicompressor-or-similar-in-php)
*   [如何在多页面项目中使用 RequireJS build profile + r.js](https://stackoverflow.com/questions/11674824/how-to-use-requirejs-build-profile-r-js-in-a-multi-page-project)

我仍在寻找一些使用依赖管理器和压缩实用程序（如 r.js）的代码结构示例；但是在 php 中我没有找到任何管理 require.js 的代码压缩的东西。

# matlab - 在matlab中的图像上叠加数据

> ID：11957321
> 
> 赞同：0
> 
> 时间：2012-08-14T17:05:08.033
> 
> 标签：matlab

我有两个要叠加的图，如下面的链接所示：

![在此处输入图像描述](../Images/5c042e5840fb2fb3618338572336edfa.png)

输入是左侧的两个图像，输出是右侧的图像。这是我使用的代码：

```
reference = imread('ref_foam.png');
figure, imshow(reference);
hold on;
h = imshow(data,[]);
hold off
colormap jet;
alphamap = zeros(size(reference,1),size(reference,2));
for i = 0:size(data,1)-1
    for j = 0:size(data,2)-1
        if(~(data(i+1,j+1) == 0))
             alphamap(i+1,j+1) = 0.75;
        end            
    end
end
set(h, 'AlphaData', alphamap); 
```

每当数据数组中有零时，它将透明度设置为零，否则它将透明度设置为 0.75。

现在，我的问题是：如何让颜色图仅应用于数据数组？在这个例子中它可以工作，但如果我将“参考”转换为灰度，颜色图也适用于它。颜色图的输入是一个轴句柄，是否有输入图像的句柄（h）以便它仅适用于顶部（数据）数组？另外，我也想实现一个颜色条。无论如何将颜色条仅应用于数据数组？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:27:48.040

您可能想要使用该`subimage`命令 - 它允许您在具有不同颜色图的同一图形上创建图像。

在脚本中创建和修改后，通过将它们的轴位置设置在彼此之上来覆盖图像。

# itk - 关于术语“图像标签文件”（ITK）的不确定性

> ID：11957325
> 
> 赞同：0
> 
> 时间：2012-08-14T17:05:36.403
> 
> 标签：itk

我最近一直在使用 ITK，但我并不是很熟练，所以如果我的问题看起来很幼稚，我深表歉意！这是问题：我已经在我的机器（Win 7 x64）上成功构建了几个 ITK 示例，然后尝试运行一个示例来测试结果，因为我对分水岭分割感兴趣我尝试了它（WS3D），但是除了必须定义的输入和输出图像文件外，还需要定义一个名为：LabelImageFile 的附加参数，就像这样：

WS3D 输入图像文件标签图像文件输出图像文件

不幸的是，我不知道什么是 LabelImageFile，我怎样才能获得特定图像的标签图像？如果有人能帮助我，我将非常感激，非常感谢，Shawn

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T09:05:23.997

The watershed segmentation algorithm looks for a function f that is a continuous height function defined over an image domain. Such that a catchment basin is defined as the set of points whose paths of steepest descent terminate at the same local minimum of f. This catchment basin is your watershed result. The label image that the filter is expecting is the function f or the height function. You can generate one such image by applying gradient magnitude to the original image.

# c# - OR 表达式连接的 Lambda 实现

> ID：11957327
> 
> 赞同：1
> 
> 时间：2012-08-14T17:05:40.717
> 
> 标签：c#, lambda

我是 lambda 表达式的新手；我正在通过实施它们来学习。我有一个关于如何将 for 循环转换为 lambda 表达式的问题。

`EnumHelper.GetEnumFromString`是一个辅助方法，它接受字符串描述并发回枚举。

```
 [Flags]
    public enum Colors
    {
        [DescriptionAttribute("YL")]
        Yellow = 1,
        [DescriptionAttribute("RD")]
        Red = 2,
        [DescriptionAttribute("GR")]
        Green = 4
    }

 string colorStr = "GR,RD";
 List<Colors> clrs = colorStr.Split(new char[] { ',' }).Select(p => EnumHelper.GetEnumFromString<Colors>(p)).ToList();
 Colors currentValidColors = Colors.Green;

    for (int i = 0; i < clrs .Count; i++)
    {
         if (i == 0)
              currentValidColors = clrs [i];
          else
              currentValidColors = currentValidColors | clrs [i];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:39:47.813

这种方式可能更简洁：

```
Colors currentValidColors = 
    colorStr.Split(',')
            .Select(EnumHelper.GetEnumFromString<Colors>)
            .Aggregate((a, b) => a | b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:22:21.670

这是你在想的吗？ForEach 扩展方法仅适用于通用列表。

```
Colors currentValidColors = 0;
colorStr.Split(new char[] { ',' })
.Select(p => EnumHelper.GetEnumFromString<Colors>(p))
.ToList()
.ForEach(c => currentValidColors |= c); 
```

# xcode - Xcode 代码完成“闪烁”

> ID：11957334
> 
> 赞同：11
> 
> 时间：2012-08-14T17:06:07.893
> 
> 标签：xcode, xcode4, xcode4.5, xcode4.4, xcode4.6

我最近从 Xcode 4.3 升级到 4.4，我正要沮丧地砸我的屏幕。

我遇到的问题是代码完成。当我输入一个变量或方法名称时，完成窗口会弹出它应该的建议。但是，如果我尝试使用光标键在建议之间滚动，建议就会消失，并且光标会在代码中移动，而不是在建议之间移动。如果我按 Enter 键接受默认建议，它会再次取消建议并在代码中插入一个返回值，将光标移至下一行。

每次我尝试代码完成时都不会发生这种情况，但它确实经常发生。对于我要完成的给定名称，它要么有效，要么无效（例如，如果我按转义键以获取建议，它会像我第一次消失的那条线/名称一样快地消失试图完成）。当我进入下一行代码时，无论它是否有效，这是一个全新的赌注。似乎我的名字越接近实际完成，就越有可能实际工作并接受建议或在建议之间移动。有时，如果我行动足够快，我可以在建议消失之前将突出显示的建议移动一到两行。我知道，如果你没有足够快地选择一个建议，那么它' s 应该最终删除建议（大约几秒钟），但这种行为不是我所描述的。如果我有一秒钟的时间来实际响应并从弹出窗口中选择一个建议，我会非常高兴。

到目前为止，我已经尝试清理项目，删除项目的所有派生数据，然后重新启动 xcode。所有这些似乎都不会影响行为。有任何想法吗？我搜索了 stackoverflow 和 google 并没有发现任何其他人报告这个问题......

感谢您的任何想法，

将要

更新：

升级到 XCode 4.6 发布版本（以及中间某个地方的 4.5）后，这个问题仍然存在......在左侧/主编辑器窗口中进行编辑仍然是一种解决方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T10:15:21.973

我在 Xcode 4.4.1 中看到了同样的情况。这似乎与弹出完成窗口的位置有关。调试器窗格打开或关闭不会在此处更改任何内容。

当在助手编辑器中尝试在右窗格中时，完成窗口会闪烁。左侧窗口中的同一行代码工作正常。单一编辑器也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:31:40.703

尝试升级到 Xcode 4.4.1。我以前也有这个问题，但是升级后好像没有了。

如果这不能解决问题，粗略的解决方法似乎是在每个文件的底部放置很多空白行 - 当文件一直滚动到底部时，问题似乎经常发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T21:55:06.493

有一个修复（至少 Xcode 4.6.3）：通过删除它来重新创建受影响的文件。现在创建一个新文件并将内容复制到其中并将其拖到项目中 - 完成。修复这里的问题。它似乎与某些文件有关。

# java - 从另一个进程的输出流中读取

> ID：11957337
> 
> 赞同：2
> 
> 时间：2012-08-14T17:06:19.157
> 
> 标签：java, process, stream

我想在我的 Java 程序中读取 c-Application 的输出流。*iremoted*（可在此处获得：http: [//osxbook.com/software/iremoted/download/iremoted.c](http://osxbook.com/software/iremoted/download/iremoted.c)）是一个 C 应用程序，如果按下 Apple Remote 上的按钮，它会显示单独的行，如“0x19 已按下”。如果我启动 iremoted 程序，一切都运行良好，每次按下按钮时，这些单独的行都会显示在我的屏幕上。现在我想在我的 Java 应用程序中读取 c 应用程序的输出流，以处理 Java 项目中 Apple Remote 的输入。不幸的是，我不知道为什么*没有输入被重新识别*？

我用一个简单的 HelloWorld.c 程序进行了尝试，我的程序在这种情况下按预期响应（打印出 HelloWorld）。

*为什么它不适用于 iremoted 程序？*

```
public class RemoteListener {

public void listen(String command) throws IOException {

    String line;
    Process process = null;
    try {
        process = Runtime.getRuntime().exec(command);
    } catch (Exception e) {
        System.err.println("Could not execute program. Shut down now.");
        System.exit(-1);
    }

    Reader inStreamReader = new InputStreamReader(process.getInputStream());
    BufferedReader in = new BufferedReader(inStreamReader);

    System.out.println("Stream started");
    while((line = in.readLine()) != null) {
        System.out.println(line);
    }
    in.close();
    System.out.println("Stream Closed");
}

public static void main(String args[]) {
    RemoteListener r = new RemoteListener();
    try {
        r.listen("./iremoted"); /* not working... why?*/
        // r.listen("./HelloWorld"); /* working fine */
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:20:47.823

`stdout`被缓冲，如果您不写入屏幕，它不会自动刷新。添加：

```
fflush(stdout); 
```

后：

```
printf("%#lx %s\n", (UInt32)event.elementCookie,
    (event.value == 0) ? "depressed" : "pressed"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:13:35.207

如果 hello world 程序有效，iremoted 可能会写入 stderr。在这种情况下，您会想要错误流。我不确定这如何适用于您的 hello world 案例 - 我认为您在这里做错了事：

```
 new InputStreamReader(process.getInputStream()); 
```

应该

```
 new InputStreamReader(process.getOutputStream()); 
```

或者

```
 new InputStreamReader(process.getErrorStream()); 
```

# load - 加快 DB2 数据导入

> ID：11957346
> 
> 赞同：0
> 
> 时间：2012-08-14T17:06:52.050
> 
> 标签：load, db2

我在 600 个 IXF 文件中有一个 185GB 的数据转储，大小从 4K 到 50GB 不等。到目前为止，导入命令在 10 小时内完成了 30GB。我正在尝试加快导入过程，似乎要走的路是：

```
db2move newdb load 
```

问题是我没有原始模式，所以我不能在加载之前先创建表。有没有办法破解加载命令来创建表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T22:44:53.880

您不能使用`db2move`命令执行此操作；但是，您可以使用`IMPORT`带有`ROWCOUNT`选项的命令来创建每个表并仅将单行加载到每个表中。使用该`db2move.lst`文件来确定哪个 IXF 文件对应于每个表。

使用 IMPORT 命令创建表后，然后使用`db2move newdb load`替换您已通过以下方式插入的所有数据`db2move import`：

例如，假设`tab1.ixf`对应于表`DB2INST1.TAB1`：

```
db2 "import from tab1.ixf of ixf rowcount 1 create into db2inst1.tab1"
# repeat for additional tables
db2move newdb load -lo replace 
```

# sql-server-2008 - 为什么执行 sql 脚本在设计视图中显示不同的约束

> ID：11957353
> 
> 赞同：0
> 
> 时间：2012-08-14T17:07:09.123
> 
> 标签：sql-server-2008, ssms

我在 sql server management studio 中执行了以下脚本。

```
create table Accounts_RolePermissions
(
    RoleID int not null,
    PermissionID int not null,
    Primary key(RoleID,PermissionID),
    Foreign key(RoleID) references Accounts_Roles(RoleID),
    Foreign key(PermissionID) references Accounts_Permissions(PermissionID)
) 
```

但是当单击表上的设计选项时，它显示只有 RoleID 被视为主键。为什么不考虑 Permission ID ？ *为方便起见附上快照* ![在此处输入图像描述](../Images/2ad9a1ac617f218dc06b9363fe769645.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:18:05.767

只有主键列由设计视图中的键标记，`foreign keys are not marked`。也可以查看表中的所有键，在对象资源管理器中左键单击表，它会显示一个名为 Key 的文件夹，打开此文件夹，它将显示此表的所有键。
在您的情况下，我认为问题是由外键引起的，如果您在没有外键的情况下运行查询，它会将您的两列都显示为主键。我测试了它

```
create table Accounts_RolePermissions
(
  RoleID int not null,
  PermissionID int not null,
  Primary key(RoleID,PermissionID),
--Foreign key(RoleID) references Accounts_Roles(RoleID),
--Foreign key(PermissionID) references Accounts_Permissions(PermissionID)
) 
```

# javascript - 如何使用 on() 将元素的 ID 和字符串传递给我的函数？

> ID：11957356
> 
> 赞同：2
> 
> 时间：2012-08-14T17:07:34.227
> 
> 标签：javascript, jquery, asp.net, .net

必须接受触发它的`OnChangeListener`元素`ID`，并且还必须传入一个字符串（将被硬编码）。这不起作用，因为我了解到 e 实际上是事件，而不是`select`元素。但是，我不知道如何以这种方式检索 ID。该脚本应该将此事件处理程序附加到满足选择器条件的所有选择元素。

```
$(document).on('change', '[data-controltype=dropdown]', function (e) {
    OnChangeListener($(e).attr('id'), 'Dashboard.aspx/GetFilterDataCallBack');
}); 
```

我也试过这个：

```
$(document).on('change', {senderId:$(this).attr('id'), callBack:'Dashboard.aspx/GetFilterDataCallBack' }, '[data-controltype=dropdown]', OnChangeListener}); 
```

这似乎也不起作用。

**编辑：这是`<script>`在我页面的标签中。**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:10:39.060

in`$(document).on('change', '[data-controltype=dropdown]', function (e) { OnChangeListener($(e).attr('id'), 'Dashboard.aspx/GetFilterDataCallBack'); });` `e`指事件。要获得触发元素，请使用

```
$(document).on('change', '[data-controltype=dropdown]', function (e) {
    OnChangeListener(this.id, 'Dashboard.aspx/GetFilterDataCallBack');
}); 
```

# servlets - 如何将 HttpServletResponse 传递给其他线程

> ID：11957363
> 
> 赞同：0
> 
> 时间：2012-08-14T17:08:24.817
> 
> 标签：servlets, httpresponse

我有一个 tomcat6 servlet，它以这种方式管理传入的 HttpPosts：

```
public void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
        if (request.getParameter("cmd") != null) {
        eventPool.addEvent(new CommandEvent(new String[] { request.getParameter("cmd"),
                request.getParameter("json") }, response));
    }
} 
```

现在将处理该请求。完成后，我想以这种方式将结果写入请求客户端：

```
protected void sendResponse(HttpServletResponse httpResponse, String content){
    try {
        httpResponse.getWriter().println(CMD + "#" + content);
        httpResponse.getWriter().close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

但它无法刷新，我得到一个 NullPointerException 因为 HttpResponse 已经关闭。

如何防止 HttpResponse 在我想要之前刷新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:33:25.920

您需要使用 Tomcat 7（或任何其他支持 Servlet 3.0 及更高版本的容器）来使用这种编程风格。查看 Servlet 3.0 规范的异步请求处理部分。

在 Servlet 3.0 之前，请求/响应处理是同步的。即，您不能“停放”请求/响应对，然后稍后在不同的线程中处理它们。几乎只要您的 doPost() 方法退出，Tomcat 就会回收请求和响应对象，准备使用它们来处理新请求。

# rest - Asp.Net Web Api 控制器中是否提供身份验证令牌？

> ID：11957365
> 
> 赞同：1
> 
> 时间：2012-08-14T17:08:33.027
> 
> 标签：rest, authentication, asp.net-web-api, restful-authentication

我正在关注这篇文章来验证我正在编写的 Web API 服务的用户：

[http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)

这工作得很好。

总之，我们使用自定义操作过滤器（适用于所有请求），检查加密的请求标头以确定用户是谁。

但是，我的控制器操作方法中也有需要知道当前用户是谁的代码。与其重复在 ActionFilter 中执行的逻辑，有没有办法可以在操作过滤器中设置一个变量并在控制器操作方法中引用它？

我还看到它建议应该使用 MessageHandler 而不是 actionFilter。这会在某种程度上有所帮助吗？

本质上，我需要以某种方式在过滤器代码中标记当前用户是谁，并能够在我的控制器中引用它

还是我离这儿很远？有更聪明的方法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:06:21.970

创建一个 Principal 并将其存储在 Thread.CurrentPrincipal 中。

然后，您可以使用 User.Identity 在 Web Api 控制器中访问它

[这种方法适用于我的机器](https://stackoverflow.com/a/11445232/12919)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T17:16:06.723

该`HttpRequestMessage`对象有一个 Properties 集合，您可以在其中添加可以在控制器操作中访问的任意状态。

如果您使用 a`HttpMessageHandler`而不是.，您将使用相同的方法`ActionFilter`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T17:48:04.547

不幸的是，没有内置机制来支持这种安全性。

在我们的项目中，我们在集合中使用了一个自定义令牌`Request.Headers`，我们在所有 Web Api 调用中往返。我们创建了一个`ActionFilter`对所有非 GET 请求进行操作的自定义。我们从 中提取令牌`Request.Headers`并将其与我们的令牌进行比较`IClaimsIdentity`，可以通过`Thread.CurrentPrincipal.Identity`

# objective-c - 如何在目标c中写入plist文件

> ID：11957367
> 
> 赞同：0
> 
> 时间：2012-08-14T17:08:41.893
> 
> 标签：objective-c, button, file-io, plist

> **可能重复：** [如何成功写入 plist？](https://stackoverflow.com/questions/7254596/how-to-write-to-plist-successfully)

我正在尝试写入 test.plist 文件，该文件存储在我的支持文件中，这是我的代码

```
- (IBAction)acceptAction:(id)sender {
NSBundle *mainBundle = [NSBundle mainBundle];
NSString *pathToFile = [mainBundle pathForResource:@"test" ofType:@"plist"];
NSMutableDictionary *md = [[NSMutableDictionary alloc] initWithContentsOfFile:pathToFile];
[md setValue:@"yes" forKey:@"hasAgree"];
[md writeToFile:pathToFile atomically:YES];
}

- (IBAction)declineAction:(id)sender {
NSBundle *mainBundle = [NSBundle mainBundle];
NSString *pathToFile = [mainBundle pathForResource:@"test" ofType:@"plist"];
NSMutableDictionary *md = [[NSMutableDictionary alloc] initWithContentsOfFile:pathToFile];
NSString *value;
value = [md objectForKey:@"hasAgree"];
NSLog(@"value is %@", value);
} 
```

接受用于写入的操作按钮..拒绝用于阅读的操作按钮..但根本不起作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:10:46.800

你不能在你的包的目录中写。您必须改用文档目录。稍微搜索一下，你就会发现启示。

# sql-server - 在 SQL Management Studio 2012 中调试

> ID：11957368
> 
> 赞同：4
> 
> 时间：2012-08-14T17:08:47.330
> 
> 标签：sql-server, sql-server-2012, ssms

我正在使用 Management Studio 2012，但无法调试任何 SQL 代码。在我点击 Debug 按钮后，左侧没有任何绿色箭头，并且我的 SQL 对象都没有加载到内存中。

当我将光标移到我设置的断点上时，我收到了这条消息：`The breakpoint will not currently be hit. Unable to bind SQL breakpoint at this time. Object containing the breakpoint not loaded.`

我观看了一段 youtube 视频，演示了如何在 Studio 2012 中进行调试：[http](http://www.youtube.com/watch?v=_jsFM_PUPgA&feature=relmfu) ://www.youtube.com/watch?v=_jsFM_PUPgA&feature=relmfu 视频中 的人在 4:30 左右编写了一个小 SQL 查询，在选择并点击`Debug`。然后他会在编辑器的左上角得到一个绿色的小箭头，并且他的断点也被击中。我的不是。

这是我想调试的：

```
declare @count int = 0
while @count <> 10
begin
   select @count
   set @count = @count + 1
end 
```

这很简单，调试应该可以工作。当然，我想稍后调试更复杂的存储过程..

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T00:42:34.590

我[在 YouTube 上制作了一个简短的视频，](http://www.youtube.com/watch?v=zDiiL_EK8Oc)展示了在 SQL Server 2012 SSMS 中调试 T-SQL 查询的过程 - 这是链接。如果这没有帮助，如果您发布一个关于您正在采取的步骤的简短视频，然后编辑您的答案以包含该视频，这可能会有所帮助，然后我会看看并尝试从那里提供建议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T06:21:45.237

我发现我正在尝试从远程机器进行调试。登录到服务器计算机并在本地进行调试工作正常。

# symfony - 如何发布我的 symfony2 包？

> ID：11957370
> 
> 赞同：2
> 
> 时间：2012-08-14T17:08:48.087
> 
> 标签：symfony, bundle

我正在尝试查找有关创建和发布 symfony2 包以供其他开发人员使用的文档或教程。

我试图查看一些公共捆绑包的一些源代码，但似乎需要更多深入的理解。

有没有关于这个的官方文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T20:04:11.150

您可以从官方 symfony 文档中找到大部分建议：http: [//symfony.com/doc/master/cookbook/bundles/best_practices.html](http://symfony.com/doc/master/cookbook/bundles/best_practices.html)

我还鼓励您阅读著名的@stof70 和@lsmith 的幻灯片，其中公开了有关捆绑包（composer、travis、knpbundles 等）的最新最佳实践：http://friendsofsymfony.github.com/slides/there_is_a_bundle_for_that [。 html#1](http://friendsofsymfony.github.com/slides/there_is_a_bundle_for_that.html#1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:06:59.170

没有关于这个主题的官方文档。但从我的角度来看，我可以告诉你，对你来说最重要的是：

*   独特性
*   **自述文件**
*   测试
*   避免依赖

良好的做法也是标记稳定版本。

顺便说一句，在[KnpBundles](http://knpbundles.com/)中，您可以看到捆绑名称左侧的数字。它代表了社区内捆绑的可敬性。您可以检查最受尊敬的和较松散的，比较和分析它们以定义使捆绑成功的点。

# python - Matplotlib LaTeX：与希腊字母不一致的行为（特别是 \rho）

> ID：11957371
> 
> 赞同：12
> 
> 时间：2012-08-14T17:08:48.390
> 
> 标签：python, latex, matplotlib

我正在尝试将一些轴标签添加到包含希腊字母“rho”的图形中。为此，我想使用 Matplotlib 的 LaTeX 功能，但 \rho 符号似乎有问题。

这是一个最小的例子：

```
import matplotlib.pyplot as plt
from matplotlib import rc,rcParams

rc('text',usetex=True)
rcParams.update({'font.size': 16})

plt.plot([0,1,2,3,4],[0,1,4,9,16])
plt.xlabel('\rho A_i') # works if \rho is replaced with, for example, \sigma
plt.ylabel('Something else')
plt.show() 
```

第一次运行时，我得到一堆 LaTeX 错误和一个空白图形窗口，再次运行显示图形，但 xlabel 读取 ' *ho Ai* ' 其中*i*是预期的下标。

奇怪的是，如果我`\rho`用其他东西代替，比如说，`\sigma`它会正确显示。谁能告诉我为什么它对我的代码示例不满意以及如何解决它？

谢谢。

Ps 我试着把表达式放进去，`$..$`但没有任何改变。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T17:12:51.473

我认为您应该使用原始字符串，并使用 $ 符号。尝试：

```
plt.xlabel(r'$\rho A_i$') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-15T10:01:50.387

`\n`在字符串中使用,`\r`等等时要小心。这些是用于例如输入新行等的命令。

[https://docs.python.org/2/library/re.html](https://docs.python.org/2/library/re.html)

为确保您不使用这些正则表达式运算符 put`\\rho`而不是`\rho`.

# c# - 点击 WAKFU C#

> ID：11957372
> 
> 赞同：0
> 
> 时间：2012-08-14T17:08:53.350
> 
> 标签：c#, click, mouse, bots

我目前正在实施一个在 WAKFU 中采集草药种子的自动化程序。我做了很多研究，几乎完成了。我唯一的问题是鼠标点击。当我在“收获图标”上单击鼠标时，鼠标似乎忽略了收获图标并按下了地面，为此我的角色移动而不是收获

请参考我上传的这个视频。

[http://youtu.be/W69hKqtH9HE](http://youtu.be/W69hKqtH9HE)

鼠标点击代码

```
 public void MouseClickLeft()
    {
        int x = Cursor.Position.X;
        int y = Cursor.Position.Y;
        mouse_event(MOUSEEVENTF_LEFTDOWN, x, y, 0, 0);
        mouse_event(MOUSEEVENTF_LEFTUP, x, y, 0, 0);
    }
    public void MouseClickRight()
    {
        int x = Cursor.Position.X;
        int y = Cursor.Position.Y;
        mouse_event(MOUSEEVENTF_RIGHTDOWN, x, y, 0, 0);
        mouse_event(MOUSEEVENTF_RIGHTUP, x, y, 0, 0);
    }

            Point point3 = new Point( points[0].X +60 , points[0].Y - 60);

        LinearSmoothMove(point3, delayt);

        MouseClickLeft(); 
```

如果您需要更多代码，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T01:42:41.793

此外，您可以使用避风港包重置相机。Ctrl+H 或单击避风袋图标 - 这将传送您进/出（前提是您在可以打开避风袋的位置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:58:09.377

我知道这是一个长期死的问题，但对于那些后来在谷歌上偶然发现的人来说，知道这一点：Wakfu 带有我只能描述为“可变加速”形式的针对机器人的“自然防御”相机。这会导致在您的屏幕上两次点击到相同的 x 和 y 坐标，从而转化为游戏中的不同点击。

这打破了大多数基本的点击机器人。

为了规避这一点，您必须利用瞬移“重置”相机的方式。可以使用 zap 传送门、drago-express 或只需单击地面上发光的脉动蓝色圆圈即可离开（然后重新进入）该区域，从而通过传送重置相机。这些将重置您的相机，并让您在使用机器人时有一个基础工作。

我希望这对未来的 Google 员工有所帮助，并节省数小时的时间和研究时间；）

# objective-c - 替换 NSMutableArray 中的指定字典

> ID：11957377
> 
> 赞同：0
> 
> 时间：2012-08-14T17:09:26.970
> 
> 标签：objective-c, cocoa

我正在尝试替换可变数组中的字典。第 1 步到第 4 步应该很好，但我在第 5 步到第 6 步中遇到了一些麻烦。你能告诉我必须做什么才能使这个函数工作吗：

```
- (void) updatePlist {
     // 1: String with plist path:
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                         NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory
             stringByAppendingPathComponent:@"Object.plist"];
    // 2: Create a mutable dictionary containing current object and write 
    // "Yes" to the "Favorite" string:
     NSMutableDictionary *mutDict = [NSMutableDictionary
      dictionaryWithDictionary:[detailsDataSource objectAtIndex:detailIndex]];
     [mutDict setObject:@"Yes" forKey:@"Favorite"];
     // 3: Make a string containing current object name:
     NSString *nameString = [[detailsDataSource objectAtIndex:detailIndex]
                                 valueForKey:@"Name"];
    // 4: Make a mutable array containing all objects:          
     NSArray *allObjectsArray = [[NSArray alloc] initWithContentsOfFile:path];
     NSMutableArray *tmpMutArr = [NSMutableArray arrayWithArray:allObjectsArray];
    // 5: Search for the dictionary in tmpMutArr with "Name" value matching nameString:
     int *index;        
     for(int i=0;i<[tmpMutArr count];i++) 
     {
         if([[tmpMutArr  objectAtIndex:i] isKindOfClass:[NSDictionary class]])
         {
             NSMutableDictionary *tempDict = [tmpMutArr  objectAtIndex:i];
             if([[tempDict valueForKey:@"Name"] isEqualToString:[NSString
                           stringWithFormat:@"%@", nameString]])nameString];)
             {
                 index = i;
             }
         }
     }
    // 6: Replace the old dictionary with the new one and write array to plist:
     [tmpMutArr replaceObjectAtIndex:index withObject:
                 [NSDictionary dictionaryWithDictionary:mutDict]];
     allObjectsArray = nil;
     allObjectsArray = [[NSArray alloc] initWithArray:tmpMutArr];
     [allObjectsArray writeToFile:path atomically:YES];
     } 
```

**编辑**：

现在的问题是：

```
 for(int i=0;i<[tmpMutArr count];i++) 
 {
     if([[tmpMutArr  objectAtIndex:i] isKindOfClass:[NSDictionary class]])
     {
         NSMutableDictionary *tempDict = [tmpMutArr  objectAtIndex:i];
         if([[tempDict valueForKey:@"Name"] isEqualToString:
         [NSString stringWithFormat:@"%@", nameString]])nameString];)
         {
             index = i;   // Here 1
         }
     }
 }
 // ---------------------------- v And here 2
 [tmpMutArr replaceObjectAtIndex:index withObject:
              [NSDictionary dictionaryWithDictionary:mutDict]]; 
```

1：从 'int' 分配给 'int' 的整数到指针转换不兼容；用 & 取地址

2：指向整数转换的不兼容指针将“int *”发送到 NSUInteger 类型的参数（又名“unsigned int”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:31:13.893

换行：

```
if([tempDict valueForKey:@"Name" == [NSString stringWithFormat:@"", nameString];) 
```

用这条线：

```
if([[tempDict valueForKey:@"Name"] isEqualToString: [NSString stringWithFormat:@"%@", nameString]]) 
```

因为您在这里使用字符串比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:56:23.947

正如 Martin R 在评论中指出的那样，您正在尝试将 int 值保存到 int 指针变量中。

```
int index; //instead of 'int *index;' 
```

这种改变应该可以解决问题。

`int *index;`如果您编写了then ，它可能会起作用`index = &i;`，因为您正在以这种方式保存指向整数的指针。但这似乎不是你想要做的。

第二个错误是由于您为此方法提供了一个 int 指针而不是整数：

```
[tmpMutArr replaceObjectAtIndex:index withObject:
              [NSDictionary dictionaryWithDictionary:mutDict]]; 
```

但是将索引声明为整数已经解决了这两个错误。

# c# - 从注册表动态获取 dll 路径名

> ID：11957379
> 
> 赞同：0
> 
> 时间：2012-08-14T17:09:30.637
> 
> 标签：c#, asp.net, .net, vb.net, winforms

安装它的软件时我有一个 dll，它被安装在

`HKEY_LOCAL_MACHINE\\SOFTWARE for 32-bit OS`和

```
HKEY_CURRENT_USER\\SOFTWARE for 64-bit OS. 
```

如何根据注册表项检测 dll 路径？

我不想像这样硬编码。

```
RegistryKey registryKey = Registry.LocalMachine.OpenSubKey("Software//NodeName") 
```

我可以尝试检测 32 位或 64 位操作系统并执行类似的操作

如果`32-bit`

```
RegistryKey registryKey = Registry.LocalMachine.OpenSubKey("Software//NodeName") 
```

如果`64-bit`

```
RegistryKey registryKey = Registry.CurrentUser.OpenSubKey("Software//NodeName") 
```

但是有没有一种方法可以直接检测 dll 的路径，例如，如果指定了 dll 名称，我如何进行整个注册表检查并找到它的路径名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T17:09:21.593

在 WOW64 下，某些注册表项被重定向。当 32 位或 64 位应用程序对重定向的键进行注册表调用时，注册表重定向器会拦截调用并将其映射到键的相应物理注册表位置。

对于 64 位，尝试在 HKEY_CLASSES_ROOT\Wow6432Node\CLSID\ 中查找值

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:26:38.010

HKEY_CLASSES_ROOT\CLSID 包含系统上所有已注册的 COM 文件（.ocx、.dll、.ax）的列表，无论是 32 位还是 64 位。

CLSID 下的键由每个 COM 生成的 GUID 表示。

最后进入 GUID 键，有 InprocServer32 子键，在其中，默认值包含 COM 文件进入系统的路径，因此您可以找到它，如下所示：

VB代码：

```
 ''' <summary>
    ''' Search and Find Registry Function
    ''' </summary>
    Public Shared Function SearchRegistry(ByVal dllName As String) As String

        'Open the HKEY_CLASSES_ROOT\CLSID which contains the list of all registered COM files (.ocx,.dll, .ax) 
        'on the system no matters if is 32 or 64 bits.
        Dim t_clsidKey As RegistryKey = Registry.ClassesRoot.OpenSubKey("CLSID")

        'Get all the sub keys it contains, wich are the generated GUID of each COM.
        For Each subKey In t_clsidKey.GetSubKeyNames.ToList

            'For each CLSID\GUID key we get the InProcServer32 sub-key .
            Dim t_clsidSubKey As RegistryKey = Registry.ClassesRoot.OpenSubKey("CLSID\" & subKey & "\InProcServer32")

            If Not t_clsidSubKey Is Nothing Then

                'in the case InProcServer32 exist we get the default value wich contains the path of the COM file.
                Dim t_valueName As String = (From value In t_clsidSubKey.GetValueNames() Where value = "")(0).ToString

                'Now gets the value.
                Dim t_value As String = t_clsidSubKey.GetValue(t_valueName).ToString

                'And finaly if the value ends with the name of the dll (include .dll) we return it
                If t_value.EndsWith(dllName) Then

                    Return t_value

                End If

            End If

        Next

        'if not exist, return nothing
        Return Nothing

    End Function 
```

C#代码：

```
 /// <summary>
    /// Search and Find Registry Function
    /// </summary>
    public static string SearchRegistry(string dllName)
    {

        //Open the HKEY_CLASSES_ROOT\CLSID which contains the list of all registered COM files (.ocx,.dll, .ax) 
        //on the system no matters if is 32 or 64 bits.
        RegistryKey t_clsidKey = Registry.ClassesRoot.OpenSubKey("CLSID");

        //Get all the sub keys it contains, wich are the generated GUID of each COM.

        foreach (object subKey_loopVariable in t_clsidKey.GetSubKeyNames.ToList) {
            subKey = subKey_loopVariable;
            //For each CLSID\GUID key we get the InProcServer32 sub-key .
            RegistryKey t_clsidSubKey = Registry.ClassesRoot.OpenSubKey("CLSID\\" + subKey + "\\InProcServer32");

            if ((t_clsidSubKey != null)) {
                //in the case InProcServer32 exist we get the default value wich contains the path of the COM file.
                string t_valueName = (from value in t_clsidSubKey.GetValueNames()where string.IsNullOrEmpty(value))(0).ToString;

                //Now gets the value.
                string t_value = t_clsidSubKey.GetValue(t_valueName).ToString;

                //And finaly if the value ends with the name of the dll (include .dll) we return it

                if (t_value.EndsWith(dllName)) {
                    return t_value;

                }

            }

        }

        //if not exist, return nothing
        return null;

    } 
```

# sql-server - 什么版本的 MS SQL 支持 FullGlobe STGeomFromText？

> ID：11957383
> 
> 赞同：0
> 
> 时间：2012-08-14T17:09:52.907
> 
> 标签：sql-server, sql-server-2008-r2, gis

根据[此文档](http://msdn.microsoft.com/en-us/library/bb933834.aspx)，`STGeomFromText`支持 FullGlobe：

> 此**地理**数据类型方法支持大于半球的**F​​ullGlobe**实例或空间实例。

但是，我不知道该文档指的是哪个版本的 MS-SQL。

在“其他版本”下，它列出了*2008*和*2008 R2*，但如果单击，则不会说它们支持*FullGlobe*。

# 问题：

**我必须安装什么版本的 MS-SQL 或服务包才能让 FullGlobe 工作？**

# 测试用例：

这是我的 sql：

```
SELECT geography::STGeomFromText('POLYGON((14.1977984372468 49.7086179545186,14.0975789966719 49.490931050796,12.5900898047007 45.9899553708373,11.2416180142584 42.4725018717541,10.0189326479206 38.9414519482468,8.89701484835269 35.3990096092695,7.85664665475729 31.8469172968655,6.88278698469561 28.2865986360566,5.9634518930894 24.7192549336294,5.08892530812995 21.1459314523495,4.25119070563764 17.5675630126313,3.44351321077389 13.985005924225,2.66012537113857 10.3990599134859,1.89598509474054 6.81048335641945,1.1465837262999 3.22000326571774,0.407788590200467 -0.371677988700824,-0.324291851935639 -3.96387852745089,-1.05342955105917 -7.55593436365933,-1.78339318076703 -11.1471976352728,-2.51806681006348 -14.7370348965234,-3.26157909469963 -18.3248253652926,-4.01845238057626 -21.9099575448643,-4.79378397261009 -25.4918242201927,-5.59347616002234 -29.0698144501277,-6.42453876771587 -32.6433010407778,-7.29549969159991 -36.211621758752,-8.21697775205904 -39.774051024648,-9.20250398028347 -43.3297576050588,-10.2697317463825 -46.8777402574098,-11.4422726186086 -50.4167283166232,-12.7525722806525 -53.9450245293382,-14.2465807422689 -57.460247128251,-15.9916555981513 -60.9588899763672,-18.0905888714589 -64.4355326552956,-20.7079207471342 -67.8813344075985,-24.1225654627664 -71.2809433475941,-28.8408188355059 -74.6055692800629,-35.8463883696685 -77.7924382401655,-47.2063856590074 -80.7065857738326,-66.9785058803618 -83.0052691165418,-97.9750390100537 -83.9384177606558,-128.643556044951 -82.9375576334944,-148.00391894514 -80.6054307189309,-159.139108412103 -77.6779603190499,-166.029981462794 -74.4857156018706,-170.684840043845 -71.1595774540993,-174.061735811063 -67.7603847042112,-176.654974376848 -64.3161893679373,-178.737627762043 -60.8419881952857,179.528828146465 -57.3464295623487,178.043316526901 -53.8348168444905,176.739494352815 -50.3105766671909,175.572040277034 -46.7760308036764,174.508913762508 -43.2328270400433,173.526773241969 -39.6821924739992,172.608150515157 -36.1250880589781,171.739644782635 -32.5623067842119,170.910730829305 -28.9945370682842,170.112949405406 -25.4224048384334,169.339341980169 -21.846501773014,168.58404528169 -18.2674039867933,167.841992255889 -14.6856847908136,167.10868448838 -11.1019226955191,166.380012729174 -7.51670676722884,165.941432353483 -5.35533773778457,159.776665988585 -6.57902683369825,160.177433883186 -8.72380367556899,160.822079257621 -12.2824960195651,161.443414585553 -15.8408809387369,162.043430549844 -19.398296263682,162.623815450699 -22.9541494522971,163.185982448494 -26.5079178675654,163.73108551617 -30.0591498688561,164.26002344831 -33.6074656910582,164.773430063532 -37.1525586793143,165.271646700603 -40.6941960473808,165.754670150563 -44.2322194161788,166.222063966029 -47.7665451784619,166.672811789969 -51.2971640454233,167.105074008517 -54.8241408276084,167.515774078978 -58.3476136686714,167.899867192761 -61.8677941701833,168.248975202488 -65.3849687010856,168.548650592718 -68.899502591151,168.772353767069 -72.4118497117796,168.86640163402 -75.9225678964884,168.706491743022 -79.4152462878817,167.927467291569 -82.8961624959035,164.732805578133 -86.3800283841654,90.7183887585475 -89.5255796637184,0.869476212320378 -86.5107511675832,-2.53511419326111 -83.0263801264859,-3.35347936173547 -79.5441534398354,-3.52714539202692 -76.0510262182095,-3.43943131235962 -72.5383029542796,-3.21903289869946 -69.0235405384683,-2.9212128486995 -65.5061918147878,-2.57316966777165 -61.9858166317077,-2.18966563058102 -58.4620663215801,-1.77924490961034 -54.9346738854397,-1.34704681853976 -51.4034493155988,-0.896205077108871 -47.8682781762759,-0.428595677041346 -44.329121290399,0.0547408943611908 -40.786015213663,0.553351609541117 -37.2390723089532,1.06722155761446 -33.6884808125902,1.59668364420096 -30.1345044451656,2.14236556311945 -26.5774814836359,2.70516170545828 -23.0178236671284,3.28622299594447 -19.4560147963763,3.88696070360683 -15.8926094397698,4.50906229046143 -12.3282317178813,5.15451864742359 -8.76357458301829,5.82566311373916 -5.19940031270823,6.5252236911824 -1.63654187123703,7.25639066630586 1.92409340837588,8.02290309530139 5.48151764590984,8.82915889854057 9.03465271716534,9.6803551482695 12.5823158658826,10.5826675131422 16.1231989255446,11.5434812953803 19.6558394558106,12.5716910643249 23.1785804132512,13.6780927958767 26.689514921038,14.8759019115514 30.1864100426377,16.1814448369554 33.6666019429789,17.6150918852402 37.1268498599495,19.2025294573402 40.5631314224601,20.9765131252558 43.9703521754743,22.979305680181 47.3419272187238,23.1129487986833 47.550807797626,14.1977984372468 49.7086179545186))', 4326) 
```

**错误：**

> 指定的输入不代表有效的地理实例，因为它超出了一个半球。每个地理实例**必须适合单个半球**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:33:43.053

显然，该功能是[SQL Server 2012 中的新](http://msdn.microsoft.com/en-us/library/cc645577.aspx)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:11:55.763

*您的问题*的答案是“SQL Server 2012”。但是，这可能不是您*问题*的答案...

通常情况下，人们遇到“大于单个半球”限制的原因是当他们使用不正确的环方向时 - 将他们的多边形定义为“由内而外”。这意味着您的多边形最终会*排除*它本应包含的区域，并*包括*整个地球表面的其余部分。

我已包含一张图像，显示您在 SQL Server 2012 中呈现的蓝色多边形 - 这是您要定义的区域吗？ ![在此处输入图像描述](../Images/34d82db4bae158cf575a4ceb011d10a4.png)

# c# - DDD 领域模型复杂验证

> ID：11957384
> 
> 赞同：12
> 
> 时间：2012-08-14T17:09:54.297
> 
> 标签：c#, asp.net-mvc, validation, domain-driven-design

我正在使用域驱动设计原则重写我的 ASP.NET MVC 应用程序。我正在尝试验证我的用户实体。到目前为止，我能够验证基本规则（例如用户名和密码是非空/空白字符串）。但是其中一条规则，我需要确保用户名是唯一的。但是，我需要访问数据库才能执行此操作，这意味着我必须像这样将 IUserRepository 注入我的 User 实体中。

```
public class User
{
    private readonly IUserRepository _userRepository;
    public User(IUserRepository repo)
    {
        _userRepository = repo;
    }

    public override void Validate()
    {
        //Basic validation code
        if (string.IsNullOrEmpty(Username))
            throw new ValidationException("Username can not be a null or whitespace characters");
        if (string.IsNullOrEmpty(Password))
            throw new ValidationException("Password can not be a null or whitespace characters");

        //Complex validation code
        var user = _userRepository.GetUserByUsername(Username);
        if (user != null && user.id != id)
            throw new ValidationException("Username must be unique")
    }
} 
```

然而，这似乎......错了。让我的实体依赖于我的存储库似乎是个坏主意（如果我错了，请纠正我）。但是在实体中包含验证代码是有意义的。放置复杂验证代码的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T00:11:42.507

我在这些类型的情况下使用的一种模式是将这种类型的验证逻辑放在应用程序服务中。在某种程度上，这是有道理的，因为`User`实体只对自己的有效性负责，而不是对用户集的有效性负责。创建用户的应用程序服务方法可以如下所示：

```
public User CreateUser(string userName)
{
  if (this.userRepository.Exists(userName))
    throw new Exception();
  var user = new User(userName);
  this.userRepository.Add(user);
  return user;
} 
```

应用程序服务是一个抽象，无论您是否使用 DDD，它都存在，因此当 DDD 产生摩擦时，它是一个很好的回退位置。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T18:12:15.220

> 然而，这似乎......错了。让我的实体依赖于我的存储库似乎是个坏主意（如果我错了，请纠正我）。

一般来说，对存储库的依赖并不是“错误的”，它有时是不可避免的。但是我认为这应该是一个例外，应该尽可能避免。在您的场景中，您可能会重新考虑拥有这种依赖关系。如果您考虑一下，“唯一性”不是实体本身的责任，因为实体不了解其他实体。那么为什么要让实体执行这条规则呢？

> 但是在实体中包含验证代码是有意义的。放置复杂验证代码的最佳位置在哪里？

我认为您可能过度概括了“验证”。我将摆脱“验证”方法，并首先确保对象不会进入“无效”状态。几个月前我[回答了类似的问题。](https://stackoverflow.com/a/9382568/625332)

现在回到唯一性规则。我认为这是 DDD 有点“泄漏”的例子之一，从某种意义上说，这个业务规则的执行不能纯粹用域代码来表达。我会这样处理它：

```
// repository
interface Users {
  // implementation executes SQL COUNT in case of relation DB
  bool IsNameUnique(String name);

  // implementation will call IsNameUnique and throw if it fails
  void Add(User user);
} 
```

客户端代码会知道，在添加新用户之前，它应该明确检查唯一性，否则会崩溃。这种组合在域代码中强制执行业务规则，但这通常是不够的。作为附加的执行层，您可能希望在数据库中添加 UNIQUE 约束或使用显式锁定。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-14T17:11:55.253

> 然而，这似乎......错了

不，这根本没有错。让域模型依赖于存储库是非常好的。除此之外，您还在一个更好的接口后面抽象了您的存储库。

或者不要使用构造函数注入。将存储库传递给 Validate 方法，如果它是唯一需要它的方法：

```
public class User
{
    public void Validate(IUserRepository repo)
    {
        //Basic validation code
        if (string.IsNullOrEmpty(Username))
            throw new ValidationException("Username can not be a null or whitespace characters");
        if (string.IsNullOrEmpty(Password))
            throw new ValidationException("Password can not be a null or whitespace characters");

        //Complex validation code
        var user = repo.GetUserByUsername(Username);
        if (user != null && user.id != id)
            throw new ValidationException("Username must be unique")
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T17:59:01.947

我同意@oleksii，[使用规范模式](https://stackoverflow.com/questions/9655171/ddd-using-specification-pattern-for-validation)是一种更好的方法。验证在不同的上下文中具有不同的含义，因此对我来说分开这个问题是有意义的。

# cordova - Android上的PhoneGap相机

> ID：11957385
> 
> 赞同：0
> 
> 时间：2012-08-14T17:10:01.013
> 
> 标签：cordova, camera

我尝试了多个 PhoneGap 版本，但总是收到此错误： `08-14 19:07:52.149: D/CordovaLog(581): file:///android_asset/www/cordova-1.5.0.js: Line 651 : Error in success callback: Camera3 = TypeError: Object #<Object> has no method 'loading'` 在模拟器上捕获图片后。在 iOS 中它运行良好。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:15:48.880

我对在 iOS 中有效但在 Android 中无效的下一个代码有疑问：

```
destinationType: Camera.DestinationType.DATA_URL, 
```

此代码适用于两者：

```
destinationType: navigator.camera.DestinationType.DATA_URL, 
```

# sql-server-2008 - 由于“获取连接”错误，SSIS 包失败

> ID：11957391
> 
> 赞同：2
> 
> 时间：2012-08-14T17:10:27.377
> 
> 标签：sql-server-2008, ssis

SSIS 的新手。我正在尝试运行包，但每次它返回：“**无法获取连接 [ConnectionName]**。连接可能未正确配置，或者您可能对此连接没有正确的权限。”

我指定的连接使用`SQL login`和部署时 - 依靠服务器存储进行加密（ServerStorage）。登录本身具有适当的权限，即 sa 帐户。

**SSIS 包**位于SQL 服务器上。

关于如何绕过这个问题的任何建议？

# c# - 使用 Microsoft.ReportViewer.WebForms 在 VS 2010 中重建旧的 VS 2008 Web 应用程序

> ID：11957397
> 
> 赞同：0
> 
> 时间：2012-08-14T17:10:53.490
> 
> 标签：c#, asp.net, ajax, reportviewer

我在使用最初在 VS2008 中开发的包含 Microsoft.ReportViewer.WebForms 的 Web 应用程序时遇到了困难。为了在 VS2010（我们现在正在使用）中重建这个应用程序，我删除了对旧 ReportViewer (v9.0.0.0) 的引用并将它们替换为对版本 10.0.0.0 (Microsoft.ReportViewer.Common) 的引用和 Microsoft.ReportViewer.WebForms）。web.config 似乎已正确更新，并且我在更新为 10.0.0.0 的 .aspx 页面上也有一个 AJAX 引用。当我在 VS 调试模式下运行应用程序时，应用程序运行**良好**，但是当我尝试构建时，我收到以下消息：

“命名空间‘Microsoft’中不存在类型或命名空间名称‘Reporting’（您是否缺少程序集引用？）”

命名空间名称“报告”**确实**存在于命名空间“Microsoft”中，因为我查找了它。对“报告”命名空间的唯一引用是在 .aspx 页面上的 AJAX 注册标记中，这会自动更新 .aspx.designer 脚本，我在此处收到错误消息。我不明白为什么它会在调试模式下工作，但它不能正确编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:26:45.663

应用程序所在的服务器需要运行 .NET Framework 4.0。几个月前我遇到了这个问题。

让我知道这是否有帮助。

# wpf - 如何在 WPF 的单独 ResourceDictionary 中引用资源？

> ID：11957402
> 
> 赞同：0
> 
> 时间：2012-08-14T17:11:27.437
> 
> 标签：wpf, xaml

在我的项目 (ABC) 中，我有 MainWindow.xaml，我在其中定义了一个工具栏，该工具栏在 Resource/Views/ApplicationToolbar.xmal 下的项目中定义，如下所示：

我已经在我的 MainWindow.xaml 中引用了它， `xmlns:local="clr-namespace:ABC"`一旦我运行它，我就会收到一个错误，指出找不到 View123。

更多信息：（编辑）

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:ABC">

    <StackPanel x:Key="View1">
        <Button Margin="3" Content="Test1"></Button>
        <Button Margin="3" Content="Test2"></Button>
    </StackPanel>

</ResourceDictionary> 
```

现在在 MainWindow.xmal 中有：

```
<Window x:Class="ABC.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ABC"
        Title="MainWindow" Height="350" Width="525">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="10"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="10"/>
        </Grid.RowDefinitions>

        <!-- FOLLOWING LINE CAUSING ERROR-->
        <ContentControl Name="Toolbar" Content="{StaticResource View1 }"></ContentControl>

    </Grid>
</Window> 
```

我错过了什么？

谢谢，阿米特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:28:51.640

由于`View1`在单独中引用，`ResourceDictionary`您需要将其合并到`ResourceDictionary`for this`Window`中。

尝试将其添加到`Window`声明中的代码中：

```
<Window.Resources>
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="Resource/Views/ApplicationToolbar.xaml"/>
  </ResourceDictionary.MergedDictionaries>
</Window.Resources> 
```

此时你`Window`应该可以参考`View1`。

**注意：**我尚未在 IDE 中对此进行全面测试，因此可能存在轻微的语法错误或路径问题。您可能必须使用[Pack URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)格式化您的字典 URL，以便正确解析引用。WPF 中的资源路径往往有点棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:41:41.340

谢谢大家。好的，我尝试了这里的建议，我很欣赏迈克，它接近解决方案。对我有用的是在*App.xaml*添加以下标签：

```
<Application.Resources>
    <ResourceDictionary Source="Resources/views/ApplicationToolbar.xaml"/>
</Application.Resources> 
```

谢谢。阿米特

# ruby - 用于条件的 ruby 简写，何时使用实例变量以及循环通过解析的 xml 与存储为哈希的效率

> ID：11957403
> 
> 赞同：0
> 
> 时间：2012-08-14T17:11:31.143
> 
> 标签：ruby

我正在学习 ruby​​，并且对我为新手挑战编写的一些代码有一些疑问。挑战的目的是从 xml 文档中找到人口最多的国家。

我在下面包含了我的代码。我的问题是：

1.  有没有办法避免初始化`@max_pop`变量（`@max_pop=0`）？
2.  是否有将整个条件块组合成 1 行的简写？
3.  我必须使用实例变量`@max_pop`吗`@max_pop_country`？没有他们就会出错。
4.  哪个更有效：
    1.  遍历每个国家并检查是否`pop > max_pop`（以下代码中的方法）
    2.  创建pop hash ( `pop[:country]`)，然后找到pop 最高的国家
5.  是否有散列方法返回散列中最大元素的键值对（做 4.1）？

源代码：

```
@max_pop=0
doc.elements.each("cia/country") do |country|
 if country.attributes["population"].to_i > @max_pop
  @max_pop=country.attributes["population"].to_i
  @max_pop_country=country.attributes["name"]
 end
end 
puts "country with largest pop is #{@max_pop_country} with pop of #{@max_pop} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:18:02.647

我不熟悉 rexml，但您应该能够将所有内容简化为以下内容：

```
max_pop_elem = doc.elements.enum_for(:each, "cia/country").max_by { |c| c.attributes["population"].to_i }
max_pop_country = max_pop_elem.attributes["name"]
max_pop = max_pop_elem.attributes["population"].to_i 
```

1.  是的，见上文。
2.  是的，见上文。
3.  不，您应该尽可能使用局部变量而不是实例变量。
4.  在你有一个缓慢的程序之前，不要担心 CPU 时间的效率。然后使用 ruby​​-prof。在那之前，只需要担心编码时间的效率（做事简单）。
5.  是的，只是做`key, value = hash.max_by{|k,v| v}`。

一般来说，如果你要迭代一些东西，你应该了解 Ruby 的[Enumerable](http://ruby-doc.org/core-1.9.3/Enumerable.html)模块。[我在这里](http://blog.davidegrayson.com/2012/03/ruby-enumerable-module.html)为它做了一个参考表。

# php - php imagick - 从 base64 读取图像

> ID：11957405
> 
> 赞同：8
> 
> 时间：2012-08-14T17:11:32.803
> 
> 标签：php, base64, imagick

我正在用js处理图像，我想保存这些转换后的图像。我正在使用 ajax 发布这些数据：

```
image : canvas.toDataURL('image/jpeg') 
```

这样，我得到了图像的 base64 代码，但我找不到用 Imagick 读取它的方法。

这是我的过程：

```
$img = new Imagick();
$decoded = base64_decode($_POST['image']);
$img->readimageblob($decoded); 
```

但这失败了：

致命错误：/Library/WebServer/Documents/test/save.php:7 中的未捕获异常 'ImagickException' 和消息 'no decode delegate for this image format `' @ error/blob.c/BlobToImage/360' 堆栈跟踪：

#0 /Library/WebServer/Documents/test/save.php(7): Imagick->readimageblob('u?Z?f?{??z?????...')

任何想法为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-14T17:40:23.867

想通了。

我必须从发布的字符串中删除该`data:image/png;base64,`部分，然后 imagick 可以将其解释为 blob。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-14T02:08:12.740

readImageBlob — 从二进制字符串中读取图像：http: [//php.net/manual/en/imagick.readimageblob.php](http://php.net/manual/en/imagick.readimageblob.php)

```
$base64 = "iVBORw0KGgoAAAAN....";

$imageBlob = base64_decode($base64);

$imagick = new Imagick();
$imagick->readImageBlob($imageBlob);

header("Content-Type: image/png");
echo $imagick; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T17:32:27.403

阅读此网址；--

[PHP-Imagemagick 图片展示](https://stackoverflow.com/questions/6087569/php-imagemagick-image-display)

或尝试一下：-

```
$thumbnail = $img->getImageBlob();
$contents =  ob_get_contents();
ob_end_clean();

echo "<img src='data:image/jpg;base64,".base64_encode($contents)."' />"; 
```

# javascript - Javascript-从数组中按顺序排列生日

> ID：11957406
> 
> 赞同：1
> 
> 时间：2012-08-14T17:11:33.723
> 
> 标签：javascript, arrays, sorting

我在下面有这个 Javascript，我知道可能有更好的方法来做我所做的事情，所以如果你想分享更好的方法，请做，我一定会使用它。

```
var Apeople = ["bob", "joe", "jane", "mike", "henry", "alex"];
var Abdays = ["08/20", "01/23", "04/19", "08/16", "01/08", "04/02"]; 
```

Apeople 和 Abdays 互相排队，所以 Janes 的生日是 04/19。

我知道我不应该使用 eval() 所以如果你知道更好的方法请告诉我。

```
var mnths = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
for(i=0; i<mnths.length; i++){
   eval("var "+mnths[i]+" = []");
}

for(i=0; i<Abdays.length; i++){
   var ab = Abdays[i];
   if(ab.substring(0,1) == "0"){
      var mn = ab.substring(1,2); //month number without 0 before it
   } else {
      var mn = ab.substring(0,2); //month number if 11 or 12
   }
   eval(""+mnths[mn-1]+".push(i)");
} 
```

现在我有`January=[1,4] April=[2,5] August=[0,3]`. 我这样做是为了找出谁的名字和生日有关。

例如`Apeople[January[0]]`，joe`Abdays[January[0]]`是 01/23。

我需要做的是按生日前的顺序排列每个月的条目。`Abdays[January[0]]`是 01/23 但是 01/08`Abdays[January[1]]`所以它们应该被交换。

当我输入这个时，我在想我可能应该使用 JSON。

所以我需要帮助的是将生日按顺序排列，同时仍然能够分辨出哪个生日对应哪个名字，同时可能找到更好的方法来编写这段代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:51:18.113

另一种方法。这利用了自定义排序功能。

```
​
var birthdays = [];

​birthdays[0] = { "name": "Bob", "month": 8, "day": 1 };
birthdays[1] = { "name": "John", "month": 4, "day": 2 };
birthdays[2] = { "name": "Jane", "month": 1, "day": 15 };

birthdays.sort( function( a, b ) { 

    if(a["month"] < b["month"] ) return -1;
    if(a["month"] > b["month"] ) return 1;
    if( a["day"] < b["day"] ) return -1;
    if( a["day"] > b["day"] ) return 1;

    return 0; //they are the same
}); 
```

额外的好处是您可以修改排序功能以满足您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:30:39.457

您可以`Abdays`像这样对数组进行排序。

```
Abdays = Abdays.sort(function(a, b){
   var d1 = new Date(a + " 2010");
   var d2 = new Date(b + " 2010");
   return d1 > d2;
}); 
```

我随机选择了 2010。您将不得不对此进行修改，如果需要添加更多条件并编写代码以`Apeople`根据 sorted 进行排序`Abdays`。

更新：

写得很快。您可以找到更好的方法，但希望这会有所帮助

```
var map = {};
for(var i=0 ; i < Apeople.length; i++){
   map[Abdays[i]] = Apeople[i];
}

Abdays = Abdays.sort(function(a, b){      
   var d1 = new Date(a + " 2010");
   var d2 = new Date(b + " 2010");
   return d1 > d2;
});

for(var i=0 ; i < Apeople.length; i++){
   Apeople[i] = map[Abdays[i]];
}

console.log(Apeople, Abdays); 
```

# android - Activity 泄露了最初添加在这里的窗口 com.android.internal.policy.impl.PhoneWindow$DecorView@44f72ff0

> ID：11957409
> 
> 赞同：29
> 
> 时间：2012-08-14T17:11:51.720
> 
> 标签：android, dialog, memory-leaks

我正在使用 google place api 并想获取最近的餐厅和咖啡馆，但是当我使用进度条获取该数据时出现一个错误

```
class LoadPlaces extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage(Html.fromHtml("<b>Search</b><br/>Loading Places..."));
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Places JSON
     * */
    protected String doInBackground(String... args) {
        // creating Places class object
        googlePlaces = new GooglePlaces();

        try {
            // Separeate your place types by PIPE symbol "|"
            // If you want all types places make it as null
            // Check list of types supported by google
            // 
            String types = "cafe|restaurant"; // Listing places only cafes, restaurants

            // Radius in meters - increase this value if you don't find any places
            double radius = 1000; // 1000 meters 

            // get nearest places
            nearPlaces = googlePlaces.search(gps.getLatitude(),
                    gps.getLongitude(), radius, types);

        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

 protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        if(pDialog != null)
            pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed Places into LISTVIEW
                 * */
                // Get json response status
                String status = nearPlaces.status;

                // Check for all possible status
                if(status.equals("OK")){
                    // Successfully got places details
                    if (nearPlaces.results != null) {
                        // loop through each place
                        for (Place p : nearPlaces.results) {
                            HashMap<String, String> map = new HashMap<String, String>();

                            // Place reference won't display in listview - it will be hidden
                            // Place reference is used to get "place full details"
                            map.put(KEY_REFERENCE, p.reference);

                            // Place name
                            map.put(KEY_NAME, p.name);

                            // adding HashMap to ArrayList
                            placesListItems.add(map);
                        }
                        // list adapter
                        ListAdapter adapter = new SimpleAdapter(MainActivity.this, placesListItems,
                                R.layout.list_item,
                                new String[] { KEY_REFERENCE, KEY_NAME}, new int[] {
                                        R.id.reference, R.id.name });

                        // Adding data into listview
                        lv.setAdapter(adapter);
                    }
                }
                else if(status.equals("ZERO_RESULTS")){
                    // Zero results found
                    alert.showAlertDialog(MainActivity.this, "Near Places",
                            "Sorry no places found. Try to change the types of places",
                            false);
                }
                else if(status.equals("UNKNOWN_ERROR"))
                {
                    alert.showAlertDialog(MainActivity.this, "Places Error",
                            "Sorry unknown error occured.",
                            false);
                }
                else if(status.equals("OVER_QUERY_LIMIT"))
                {
                    alert.showAlertDialog(MainActivity.this, "Places Error",
                            "Sorry query limit to google places is reached",
                            false);
                }
                else if(status.equals("REQUEST_DENIED"))
                {
                    alert.showAlertDialog(MainActivity.this, "Places Error",
                            "Sorry error occured. Request is denied",
                            false);
                }
                else if(status.equals("INVALID_REQUEST"))
                {
                    alert.showAlertDialog(MainActivity.this, "Places Error",
                            "Sorry error occured. Invalid Request",
                            false);
                }
                else
                {
                    alert.showAlertDialog(MainActivity.this, "Places Error",
                            "Sorry error occured.",
                            false);
                }
            }
        });

    } 
```

GooglePlaces 类的搜索方法是

```
public PlacesList search(double latitude, double longitude, double radius, String types)
        throws Exception {

    this._latitude = latitude;
    this._longitude = longitude;
    this._radius = radius;

    try {

        HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
        HttpRequest request = httpRequestFactory
                .buildGetRequest(new GenericUrl(PLACES_SEARCH_URL));
        request.getUrl().put("key", API_KEY);
        request.getUrl().put("location", _latitude + "," + _longitude);
        request.getUrl().put("radius", _radius); // in meters
        request.getUrl().put("sensor", "false");
        if(types != null)
            request.getUrl().put("types", types);

        PlacesList list = request.execute().parseAs(PlacesList.class);
        // Check log cat for places response status
        Log.d("Places Status", "" + list.status);
        return list;

    } catch (HttpResponseException e) {
        Log.e("Error:", e.getMessage());
        return null;
    }

} 
```

我已经使用了许可

但我在 logcat 中遇到错误是

```
08-14 22:29:59.867: E/AndroidRuntime(331): FATAL EXCEPTION: AsyncTask #1
08-14 22:29:59.867: E/AndroidRuntime(331): java.lang.RuntimeException: An error occured    while executing doInBackground()
08-14 22:29:59.867: E/AndroidRuntime(331):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-14 22:29:59.867: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-14 22:29:59.867: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-14 22:29:59.867: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-14 22:29:59.867: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-14 22:29:59.867: E/AndroidRuntime(331):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-14 22:29:59.867: E/AndroidRuntime(331):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-14 22:29:59.867: E/AndroidRuntime(331):  at java.lang.Thread.run(Thread.java:1096)
08-14 22:29:59.867: E/AndroidRuntime(331): Caused by: java.lang.NoClassDefFoundError: com.google.common.base.Preconditions
08-14 22:29:59.867: E/AndroidRuntime(331):  at com.google.api.client.util.ClassInfo.<init>(ClassInfo.java:164)
08-14 22:29:59.867: E/AndroidRuntime(331):  at com.google.api.client.util.ClassInfo.of(ClassInfo.java:92)
08-14 22:29:59.867: E/AndroidRuntime(331):  at com.google.api.client.util.GenericData.<init>(GenericData.java:79)
08-14 22:29:59.867: E/AndroidRuntime(331):  at com.google.api.client.util.GenericData.<init>(GenericData.java:61)
08-14 22:29:59.867: E/AndroidRuntime(331):  at com.google.api.client.http.GenericUrl.<init>(GenericUrl.java:97)
08-14 22:29:59.867: E/AndroidRuntime(331):  at com.eheuristic.android.googlemap.GooglePlaces.search(GooglePlaces.java:56)
08-14 22:29:59.867: E/AndroidRuntime(331):  at com.eheuristic.android.googlemap.MainActivity$LoadPlaces.doInBackground(MainActivity.java:1 85)
08-14 22:29:59.867: E/AndroidRuntime(331):  at com.eheuristic.android.googlemap.MainActivity$LoadPlaces.doInBackground(MainActivity.java:1)
08-14 22:29:59.867: E/AndroidRuntime(331):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-14 22:29:59.867: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-14 22:29:59.867: E/AndroidRuntime(331):  ... 4 more
08-14 22:29:59.967: W/IInputConnectionWrapper(331): showStatusIcon on inactive InputConnection
08-14 22:30:02.298: E/WindowManager(331): Activity com.eheuristic.android.googlemap.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f72ff0 that was originally added here
08-14 22:30:02.298: E/WindowManager(331): android.view.WindowLeaked: Activity com.eheuristic.android.googlemap.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f72ff0 that was originally added here
08-14 22:30:02.298: E/WindowManager(331):   at android.view.ViewRoot.<init>(ViewRoot.java:247)
08-14 22:30:02.298: E/WindowManager(331):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
08-14 22:30:02.298: E/WindowManager(331):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
08-14 22:30:02.298: E/WindowManager(331):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
08-14 22:30:02.298: E/WindowManager(331):   at android.app.Dialog.show(Dialog.java:241)
08-14 22:30:02.298: E/WindowManager(331):   at com.eheuristic.android.googlemap.MainActivity$LoadPlaces.onPreExecute(MainActivity.java:164)
08-14 22:30:02.298: E/WindowManager(331):   at android.os.AsyncTask.execute(AsyncTask.java:391)
08-14 22:30:02.298: E/WindowManager(331):   at com.eheuristic.android.googlemap.MainActivity.onCreate(MainActivity.java:104)
08-14 22:30:02.298: E/WindowManager(331):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-14 22:30:02.298: E/WindowManager(331):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-14 22:30:02.298: E/WindowManager(331):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-14 22:30:02.298: E/WindowManager(331):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-14 22:30:02.298: E/WindowManager(331):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-14 22:30:02.298: E/WindowManager(331):   at android.os.Handler.dispatchMessage(Handler.java:99)
08-14 22:30:02.298: E/WindowManager(331):   at android.os.Looper.loop(Looper.java:123)
08-14 22:30:02.298: E/WindowManager(331):   at android.app.ActivityThread.main(ActivityThread.java:4627)
08-14 22:30:02.298: E/WindowManager(331):   at java.lang.reflect.Method.invokeNative(Native Method)
08-14 22:30:02.298: E/WindowManager(331):   at java.lang.reflect.Method.invoke(Method.java:521)
08-14 22:30:02.298: E/WindowManager(331):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-14 22:30:02.298: E/WindowManager(331):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-14 22:30:02.298: E/WindowManager(331):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-14T17:19:21.433

您正在泄漏对话框。您需要调用`pDialog.dismiss();`异步任务的 onPostExecute() 方法。你也应该放...

```
if(pDialog != null)
    pDialog.dismiss(); 
```

在主线程上活动的 onPause() 方法中。这将确保窗口不会泄漏，即使您的应用程序在执行某些后台执行时丢失了前台。你应该有这样的东西......

```
public class Login extends Activity implements View.OnClickListener{

    ProgressDialog pd;

    public void onCreate(Bundle savedInstanceState){

        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.login);
        pd = null;
    } 

    @Override
    public void onPause(){

        super.onPause();
        if(pd != null)
            pd.dismiss();
    }

    public void onClick(View v){
        new SendTask().execute("");
    }

    /*
    No networking allowed on the main thread.
    */
    private class SendTask extends AsyncTask<String,String,String>{

        int result;

        @Override
        protected void onPreExecute(){
            pd = ProgressDialog.show(Login.this,"","Retrieving Inbox...", true,false);
        }

        @Override
        protected String doInBackground(String...strings){

            //do networking here
            result = account.prepare();
            return null;
        }

        @Override
        protected void onPostExecute(String unused){

            //check result
            pd.dismiss();
            Intent intent = new Intent(Login.this,NextActivity.class);
            finish();
            startActivity(intent);
        }
     }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-12T06:52:45.047

从屏幕退出后，您正试图显示一个对话窗口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-05T08:05:21.287

在 onStop 中使用它--->

```
@Override
    protected void onStop() {

        super.onStop();

        if (pDialog != null) {
            pDialog.dismiss();
            pDialog = null;
        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-26T07:45:58.673

您必须在活动被破坏之前关闭对话框

```
@Override
protected void onDestroy() {
    super.onDestroy();
    if(pDialog!=null && pDialog.isShowing())
        pDialog.dismiss();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-20T22:34:53.847

当您两次调用方法或活动时会发生此错误，请检查您的代码，因为您只需调用一次。

```
 if(pDialog != null){
            pDialog.dismiss();
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-17T08:19:43.120

只需在 IsNetworkAvailable() 函数中调用 Asynctask ......就像......

```
if(isNetworkAvailable()) {
      AsyncTask_WebAPI asyncTask = new AsyncTask_WebAPI(this, strURL, this);
        asyncTask.execute();
    }else
    {
Toast.makeText(this,"Please Check internet Connectivity",Toast.LENGTH_LONG).show();
   } 
```

IsNetworkAvailable() 函数

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager
            = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null && activeNetworkInfo.isConnected();
} 
```

# hadoop - Hadoop 或 HBase 写入部分结果？

> ID：11957410
> 
> 赞同：0
> 
> 时间：2012-08-14T17:11:53.810
> 
> 标签：hadoop, mapreduce, hbase

我有一个很少发生的问题，其中部分结果被写入我们的 HBase 数据库。这是我的映射器和减速器的描述：

*   映射器计算与特定功能关联的数据，并使用键 = 数据名称和值 = 计数发送 MapWritables。例如：

    > ```
    > Key = "Feature X"
    > MapWritables = 
    >    {"Total Usage":"4", "Unique Usage":2, "Associated Revenue":22}, 
    >    {"Total Usage":"3", "Unique Usage":1, "Associated Revenue":20} 
    > ```

*   如果键相同，Reducers 会将 MapWritable 中的值相加。结果被写入 HBase，其中键是行 ID，列是映射中的键，值是总和。给定上面的示例键和映射，我们将写入 HBase：

    > ```
    >  rowID = "Feature X" 
    >  column,value="Total Usage", 7 
    >  column,value="Unique Usage", 3 
    >  column,value="Associated Revenue", 42 
    > ```

在过去的 4 个月中两次（所以不是很频繁），结果已写入 HBase，使得其中一列的数字非常低（如 1 或 3），其余列的数字正常。当我重新运行作业时，错误的列值会跳到其预期值。两次都“损坏”的不是同一列。没有错误写入日志。

有没有其他人经历过类似的行为？有人有想法吗？任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:39:47.917

如果您使用的是 hadoop 0.20.*，它缺少附加支持，这会导致 hbase 偶尔丢失数据。HBase 需要 append 诸如写入 WAL 之类的东西，没有它就不能保证所有写入都写入磁盘。- 如果这是您的情况，您可以将 hadoop 更新到更高版本。

# c# - 点的 lat lng ，知道给定点的 x 距离和 y 度

> ID：11957413
> 
> 赞同：1
> 
> 时间：2012-08-14T17:11:56.807
> 
> 标签：c#, google-maps, geocoding, geospatial

我在一个 C# 项目上工作，我有一个给定纬度和经度的点。
我需要找到与给定点成 x 度角和 y 米的第二个点的纬度和经度。

谢谢你，
阿吉西劳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:25:46.470

请参阅此页面以获取[从起点给定距离和方位的目的地点](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T04:54:25.817

这是改编自[http://www.movable-type.co.uk/scripts/latlong-vincenty-direct.html的](http://www.movable-type.co.uk/scripts/latlong-vincenty-direct.html)[WGS-84](http://en.wikipedia.org/wiki/World_Geodetic_System)（非球形地球）版本：

```
private const double wgs84_major = 6378.137;
private const double wgs84_minor = 6356.7523142;
private const double wgs84_flattening = 1D / 298.257223563;

public static bool PointFromDistance(double latitude, double longitude, double angleRadians, double distanceMetres, out double newLatitude, out double newLongitude)
{
    double a = wgs84_major * 1000;
    double b = wgs84_minor * 1000;
    double f = wgs84_flattening;

    double s = distanceMetres;
    double sinAlpha1 = Math.Sin(angleRadians), cosAlpha1 = Math.Cos(angleRadians);

    double tanU1 = (1 - f) * Math.Tan(latitude * Math.PI / 180D);
    double cosU1 = 1 / Math.Sqrt((1 + tanU1 * tanU1)), sinU1 = tanU1 * cosU1;
    double sigma1 = Math.Atan2(tanU1, cosAlpha1);
    double sinAlpha = cosU1 * sinAlpha1;
    double cosSqAlpha = 1 - sinAlpha * sinAlpha;
    double uSq = cosSqAlpha * (a * a - b * b) / (b * b);
    double A = 1 + uSq / 16384 * (4096 + uSq * (-768 + uSq * (320 - 175 * uSq)));
    double B = uSq / 1024 * (256 + uSq * (-128 + uSq * (74 - 47 * uSq)));

    double sigma = s / (b * A), sigmaP = 2 * Math.PI;
    double cos2SigmaM = 0;
    double sinSigma = 0;
    double cosSigma = 0;
    double deltaSigma = 0;
    while (Math.Abs(sigma - sigmaP) > 1e-12)
    {
        cos2SigmaM = Math.Cos(2 * sigma1 + sigma);
        sinSigma = Math.Sin(sigma);
        cosSigma = Math.Cos(sigma);
        deltaSigma = B * sinSigma * (cos2SigmaM + B / 4 * (cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM) -
            B / 6 * cos2SigmaM * (-3 + 4 * sinSigma * sinSigma) * (-3 + 4 * cos2SigmaM * cos2SigmaM)));
        sigmaP = sigma;
        sigma = s / (b * A) + deltaSigma;
    }

    double tmp = sinU1 * sinSigma - cosU1 * cosSigma * cosAlpha1;
    double lat2 = Math.Atan2(sinU1 * cosSigma + cosU1 * sinSigma * cosAlpha1,
        (1 - f) * Math.Sqrt(sinAlpha * sinAlpha + tmp * tmp));
    double lambda = Math.Atan2(sinSigma * sinAlpha1, cosU1 * cosSigma - sinU1 * sinSigma * cosAlpha1);
    double C = f / 16 * cosSqAlpha * (4 + f * (4 - 3 * cosSqAlpha));
    double L = lambda - (1 - C) * f * sinAlpha *
        (sigma + C * sinSigma * (cos2SigmaM + C * cosSigma * (-1 + 2 * cos2SigmaM * cos2SigmaM)));

    double revAz = Math.Atan2(sinAlpha, -tmp);  // final bearing

    newLatitude = lat2 * 180D / Math.PI;
    newLongitude = longitude + L * 180D / Math.PI;

    return true;
} 
```

# shell - 使用 Sed 的 shell 脚本问题

> ID：11957414
> 
> 赞同：0
> 
> 时间：2012-08-14T17:11:59.343
> 
> 标签：shell, unix, loops, sed

我和一个朋友正在做一个项目，我们必须创建一个可以进入文件的脚本，并使用 Sed 将某个表达式/单词/字母的所有出现替换为另一个。它旨在通过多次测试来替换所有这些事件，我们不知道它们会是什么，所以我们必须预测任何事情。我们在某个测试中遇到了麻烦，我们需要使用循环将不同文件中的 'l*' 替换为 'L'。我拥有的代码是

```
#!/bin/sh
p1="$1"

shift

p2="$1"

shift

for file in "$@" #for any file in the directory
do
   # A="$1"

    #echo $A
    #B="$2"
    echo "$p1" | sed -e 's/\([*.[^$]\)/\\\1/g' > temporary #treat all special characters as plain text
    A="`cat 'temporary'`"
    rm temporary
    echo "$p1"
    echo "$file"
    sed "s/$p1/$p2/g" "$file" > myFile.txt.updated #replace occurances 
    mv myFile.txt.updated "$file"
    cat "$file"
done 
```

我曾尝试在包含不同单词和“l*”的练习文件上对此进行测试，但每当我测试它时，它都会删除文件中的所有文本。有人可以帮我解决这个问题，我们希望尽快完成。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:04:07.193

看起来您正在尝试设置`A`为`p1`所有特殊字符都已转义的版本。但是您`p1`稍后使用而不是`A`. 尝试使用变量`A`，并尝试在没有临时文件的情况下设置它：

```
A=$( echo "$p1" | sed -e 's/\([*.[^$]\)/\\\1/g' ) 
```

# javascript - Ember.js TextField id 用于带有 ember 路由器的标签标签

> ID：11957415
> 
> 赞同：2
> 
> 时间：2012-08-14T17:12:07.380
> 
> 标签：javascript, ember.js

我在 Ember.js 应用程序中构建了一个表单，该表单要求标签与`<label>`标签分开`<input>`。这造成了一个问题 b/c 我似乎无法正确绑定标签的`for=""`属性。`<label>`

我在解决方案的评论中查看了这个[问题](https://stackoverflow.com/questions/10468164/using-ember-js-text-field-ids-for-a-label-tag)和[小提琴](http://jsfiddle.net/GtsKK/2/)，但它似乎不适用于使用该`Ember.Router`架构的应用程序

这是我的小提琴示例：http: [//jsfiddle.net/wmarbut/jKGMW/](http://jsfiddle.net/wmarbut/jKGMW/)

我**非常希望**不使用任何需要我为每个单独的表单字段在我的视图或控制器对象中进行实际输入的解决方案。

代码的快速和肮脏可以在这里看到

```
<table>
    <tr>
        <th>
            <!-- XXX: How do I bind the "for" attribute correctly? -->
            <label {{bindAttr for="curUser.elementId"}}>Current User</label>
        </th>
        <td>    
            {{view Ember.TextField valueBinding="current_user.first_name" viewName="curUser"}}   
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T19:31:50.813

Apparently you need to explicitly access the element at its namespace with `view.`

This fiddle works: [http://jsfiddle.net/wmarbut/jKGMW/5/](http://jsfiddle.net/wmarbut/jKGMW/5/)

updated code would be

```
<table>
<tr>
    <th>
        <!-- XXX: This now works -->
        <label {{bindAttr for="view.curUser.elementId"}}>Current User</label>
    </th>
    <td>    
        {{view Ember.TextField valueBinding="current_user.first_name" viewName="curUser"}}   
    </td>
</tr> 
```

# shell - GDB：不打印 .gdbinit 命令的输出

> ID：11957417
> 
> 赞同：0
> 
> 时间：2012-08-14T17:12:16.913
> 
> 标签：shell, gdb

每次调用 gdb 时，我都有一组 .gdbinit 文件来运行命令。这些命令在 shell 中输出了很多东西，这变得很烦人。

我可以阻止 .gdbinit 中的命令打印到 shell 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:21:36.443

使用`set logging redirect on`：

这是一个例子：

```
host: srv2-x64rh5-02, OS: Linux 2.6.18-238.el5>more .gdbinit
set logging redirect on
set logging file /dev/null
set logging on
file a.out
b main
commands
bt
info args
c
end
help
r
set logging off
quit 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T04:53:34.197

是的，所有必须在 shell 中输出的信息，您可以在 .gdbinit 中阻止您可以从这个人那里查看 ./gdbinit 的示例[http://reverse.put.as/](http://reverse.put.as/)

# c# - 获取 JSONArray 中的值

> ID：11957418
> 
> 赞同：1
> 
> 时间：2012-08-14T17:12:22.903
> 
> 标签：c#, asp.net, facebook

我在 asp.net 中有一个带有 C# 的 Facebook 应用程序，我在`JsonObject`. 代码是：

```
JsonObject basicData = (JsonObject)facebook.Get("me?fields=id,name,email,education");
string id = Convert.ToString(basicData["id"]);
string name = Convert.ToString(basicData["name"]);
string email = Convert.ToString(basicData["email"]); 
```

有了这个，我将 JsonObject 转换为 JsonArray：

```
JsonArray educ = basicData["education"] as JsonArray; 
```

好的。我的意图是访问 JSON 结构的值，但我不知道该怎么做！我尝试执行以下操作：

```
for (int i = 0; i < educ.Count; i++)
{
    Response.Write(educ[i].ToString());                  
} 
```

那就是每一行的印象：

```
{"school":
    {"id":"112933022109824",
     "name":"Colégio Estadual Antônio de Castro Alves"},
     "year":{"id":"138383069535219",
             "name":"2005"},
     "type":"High School"} 
```

# python - Python - 如何在非第一行的单元格上打开 Excel 自动筛选？

> ID：11957420
> 
> 赞同：0
> 
> 时间：2012-08-14T17:12:31.863
> 
> 标签：python, excel, win32com

我正在尝试在 Excel 中为第 5 行的某些单元格打开自动筛选，最好使用 Python Win32。

例如：

```
from win32com.client import Dispatch
xl = Dispatch("Excel.Application")
xl.Workbooks.Open(<file name>)
xl.ActiveWorkbook.ActiveSheet.Range('A5:D5').AutoFilter()
xl.ActiveWorkbook.Close(SaveChanges=1)
del(xl) 
```

~~它仍然在第一行创建自动过滤器。~~更新：它工作正常，请参阅评论。

我知道可以使用`ActiveSheet.Columns`属性设置 AutoFilter，但这意味着第一行？

我使用的是安装了 Excel 2002 的 Windows XP。

# php - 如何用 PHP 解析这个 XML 文件

> ID：11957427
> 
> 赞同：0
> 
> 时间：2012-08-14T17:13:14.427
> 
> 标签：php, xml, arrays, simplexml

我需要解析以下 XML 文件：

[https://www.performanceexchange.com/publisher/report/api/17adeb41da1343209a32e6790ee1a286/xml/report/stats?startDate=2012-07-01&endDate=2012-08-13](https://www.performanceexchange.com/publisher/report/api/17adeb41da1343209a32e6790ee1a286/xml/report/stats?startDate=2012-07-01&endDate=2012-08-13)

`$xml = simplexml_load_file( urlencode($mediatrust_url) );`

哪个输出：

```
SimpleXMLElement Object
(
    [@attributes] => Array
    (
        [name] => StatsReport
    )

) 
```

所以它似乎只是选择了第一个标签的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:41:52.550

尝试这个：

```
foreach($xml->attributes() as $k => $v)
{
    if($k == "name")
    {
        //do something
    }
} 
```

此外，尝试使用加载 XML 字符串，如下所示：

```
$sxml = simplexml_load_string(@file_get_contents($url)); 
```

# magento - Magento：如何将数据保存到 order_payment 和 quote_payment

> ID：11957429
> 
> 赞同：0
> 
> 时间：2012-08-14T17:13:15.610
> 
> 标签：magento

我正在尝试将自定义信用卡支付属性保存到两个不同的表中，但我不确定如何执行此操作。

正常的信用卡信息保存到两个不同的表中。

*   sales_flat_quote_payment
*   sales_flat_order_payment

我创建了新属性，它应该保存到两个表中。两个表上都设置了正确值的列，但仅在客户下订单时才保存到一个“sales_flat_quote_payment”。

我怎样才能使它将数据保存到两个表中？

我找到了这个参考，但我不确定如何实现它以使其与信用卡属性值一起使用。

[http://www.magentocommerce.com/boards/viewthread/19344/P0/](http://www.magentocommerce.com/boards/viewthread/19344/P0/)

谁能确认这是否可行？

```
 <sales_copy_order_payment>
        <cc_bankname>
        <to_order>*</to_order>
        </cc_bankname>
    </sales_copy_order_payment> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:14:00.453

您是否配置 Magento 将新属性从报价转换为订单？如果您`config.xml`从`Mage_Sales`模块中检查并搜索`sales_convert_quote_payment`. 您会看到如下内容：

```
 <sales_convert_quote_payment>
            <method><to_order_payment>*</to_order_payment></method>
            <additional_data><to_order_payment>*</to_order_payment></additional_data>
            <additional_information><to_order_payment>*</to_order_payment></additional_information>
            <po_number><to_order_payment>*</to_order_payment></po_number>
            <cc_type><to_order_payment>*</to_order_payment></cc_type>
            <cc_number_enc><to_order_payment>*</to_order_payment></cc_number_enc>
            <cc_last4><to_order_payment>*</to_order_payment></cc_last4>
            <cc_owner><to_order_payment>*</to_order_payment></cc_owner>
            <cc_exp_month><to_order_payment>*</to_order_payment></cc_exp_month>
            <cc_exp_year><to_order_payment>*</to_order_payment></cc_exp_year>

            <cc_number><to_order_payment>*</to_order_payment></cc_number>
            <cc_cid><to_order_payment>*</to_order_payment></cc_cid>

            <cc_ss_issue><to_order_payment>*</to_order_payment></cc_ss_issue>
            <cc_ss_start_month><to_order_payment>*</to_order_payment></cc_ss_start_month>
            <cc_ss_start_year><to_order_payment>*</to_order_payment></cc_ss_start_year>
        </sales_convert_quote_payment> 
```

Magento 使用这些`fieldsets`在实体之间传输数据。在这种情况下从`quote_payment`到`order_payment`。

由于所有配置 XML 都合并到一大堆 XML 中，因此您可以从自己的模块 config.xml 添加其他节点。就像是：

```
<global>
    <fieldsets>
        <sales_convert_quote_payment>
            <your_attribute><to_order_payment>*</to_order_payment></your_attribute>
        </sales_convert_quote_payment>
    </fieldsets>
</global> 
```

希望这可以帮助您开始。

# autohotkey - 如何通过自动热键中的 PID 获取窗口句柄？

> ID：11957430
> 
> 赞同：1
> 
> 时间：2012-08-14T17:13:16.067
> 
> 标签：autohotkey

我想通过自动热键中的 PID 获取窗口句柄，因为窗口的标题总是在变化。如果有人想知道，我想处理 last.fm 主窗口。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-04T18:26:48.300

要获取 PID 的第一个窗口类/ID，您可以执行以下操作：

```
Process, Exist, "notepad.exe"
NewPID = %ErrorLevel%  ; Save the value immediately since ErrorLevel is often changed.
if NewPID
{ ; process exists!
    WinGetClass, ClassID, ahk_pid %NewPID%   ; ClassID will be read here for the process
    WinGetTitle, Title, ahk_pid %NewPID% ; Title will contain the processe's first window's title
    IfWinExist ahk_class %ClassID% ; this will find the first window by the ClassID
    {
        WinGet, WinID, ID ; this will get the ID of the window into WinID variable
        WinActivate ; this will bring this window to front (not necessary for example)  
        ListVars ; this will display your variables
        Pause
    }
    IfWinExist %Title% ; this will find the first window with the window title
    {
        WinGet, WinID, ID
        WinActivate ; this will bring this window to front (not necessary for example)  
        ListVars
        Pause
    }
} 
```

我敢肯定，除了 IfWinExist 之外，还有其他方法可以转换 PID，并且可能有多个具有相同类 ID 的进程。:) 此外，您可以使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T18:48:47.627

作为可重用的功能：

```
getHwndForPid(pid) {
    pidStr := "ahk_pid " . pid
    WinGet, hWnd, ID, %pidStr%
    return hWnd
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T21:21:25.797

您可以使用带有 Cmd 参数的[WinGet](https://autohotkey.com/docs/commands/WinGet.htm)`ID`命令作为.

> Cmd 是要执行的操作，如果为空则默认为 ID。
> ID：检索窗口的唯一 ID 号。也称为窗口句柄 (HWND)。

[WinTitle](https://www.autohotkey.com/docs/misc/WinTitle.htm)可以是 PID。

```
WinGet, UniqueID, ID, ahk_pid %VarContainingPID% 
```

另一个选项是[WinExist()](https://www.autohotkey.com/docs/commands/WinExist.htm)

```
UniqueID := WinExist("ahk_pid" . VarContainingPID) 
```

# ios - iOS 开发：通过按下警报中的按钮来进行 Segue？

> ID：11957433
> 
> 赞同：0
> 
> 时间：2012-08-14T17:13:48.307
> 
> 标签：ios, cocoa-touch, uialertview

我一直在寻找几个小时，但没有找到任何答案，所以非常感谢您的帮助！

我正在设计一个应用程序，当按下警报中的按钮时，需要切换到不同的视图控制器。我已经设置了警报，但只需要代码来切换到新视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:26:01.683

尝试这个。首先创建警报视图。

```
UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:@"Message"  message:@"Open New controller?" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes",nil];
[alertView show];
[alertView release]; 
```

实现 AlertView 委托方法

```
#pragma mark AlertView Delegate
-(void) alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex != alertView.cancelButtonIndex)
    {
        Viewcontroller *vc = [[UIViewcontroller alloc] initWithNib:@"Viewcontroller"];
        [self presentModalViewController:vc];
        [vc release];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:23:31.773

实现`UIAlertViewDelegate`并添加方法`alertView:clickedButtonAtIndex:`。单击右键后，调用该方法以进入新视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:23:22.420

实施`UIAlertViewDelegate`，然后你会得到一个回调，当警报被解除时按下哪个按钮。只需`performSegueWithIdentifier`在那里打电话。

[UIAlertViewDelegate 协议参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertViewDelegate_Protocol/UIAlertViewDelegate/UIAlertViewDelegate.html)中的更多详细信息

# css - JSF 为静态资源加载资源

> ID：11957438
> 
> 赞同：1
> 
> 时间：2012-08-14T17:14:20.250
> 
> 标签：css, jsf, resources, primefaces

我们覆盖`javax.faces.application.ResourceHandlerWrapper`并`javax.faces.application.ResourceWrapper`从文件系统加载静态资源，例如 css 文件。我们如何才能实现这种资源加载机制也适用于文件系统中新加载的 css 文件中引用的资源？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:32:22.987

使用 CSS 文件中的 EL 表达式`#{resource}`来动态引用它们，而不是使用硬编码路径之类的`/context/resources/someLibrary/somePath/someFile.ext`东西。

例如

```
.foo {
    background-image: url(#{resource['someLibrary:somePath/foo.ext']})
}

.bar {
    background-image: url(#{resource['someLibrary:bar.ext']})
}

.baz {
    background-image: url(#{resource['somePath/baz.ext']})
}

.moo {
    background-image: url(#{resource['moo.ext']})
} 
```

这将参考

```
WebContent
 |-- resources
 |    |-- someLibrary
 |    |    |-- somePath
 |    |    |    `-- foo.ext
 |    |    `-- bar.ext
 |    |-- somePath
 |    |    `-- baz.ext
 |    `-- moo.ext
 : 
```

这样，JSF 默认资源处理程序将用正确的 URL 替换它们，这些`/javax.faces.resource`URL 反过来也会通过资源处理程序。

# android - API 级别 < 8 的 Dialog.setOnShowListener() 替代方案

> ID：11957441
> 
> 赞同：1
> 
> 时间：2012-08-14T17:14:22.533
> 
> 标签：android, android-dialog, android-dialogfragment

我有一个`AlertDialog`通过`DialogFragment.onCreateDialog()`. 该对话框有一个`EditText`和两个按钮，确定和取消。单击“确定”按钮时，我需要检查`EditText`: 如果内容错误，则不应关闭对话框。在 SO 上搜索我发现可以通过这种方式轻松实现此功能：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    view = getActivity().getLayoutInflater().inflate(AD_LAYOUT, null);
    mEditText = (EditText) view.findViewById(AD_VIEW);
    myAlertDialog = new AlertDialog.Builder(getActivity())
    .setView(view)
    .setTitle(getResources().getString(AD_TITLE))
    .setPositiveButton(getResources().getString(AD_PB),
            new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int buttonID) {
            //Do nothing. We are going to override this method
        }
    })
    .setNegativeButton(getResources().getString(AD_NB),
            new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int buttonID) {
            ((MainActivity)getActivity()).doNegative(NewGalleryDlg.this);
        }
    })
    .create();
    ad = myAlertDlg;

    ad.setOnShowListener(new DialogInterface.OnShowListener() {
        @Override
        public void onShow(DialogInterface dialog) {
            Button b = ad.getButton(AlertDialog.BUTTON_POSITIVE);
            b.setOnClickListener(new View.OnClickListener(){
                @Override public void onClick(View view) {
                    ((MainActivity)getActivity())
                    .doPositive(NewGalleryDlg.this, mEditText);
                }
            });
        }
    });
    return ad;
} 
```

问题是我正在使用支持库 v4，但`setOnShowListener()`需要 API 级别 8 或更高。有人可以给我一个替代方案吗？TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:50:19.573

好的，最后我用不同的方法解决了它。我没有使用`AlertDialog.setOnShowListener()`（如果 API 级别 > 7 可以正常工作），而是在`EditText`我的`AlertDialog`. 如果输入的文本无效，则确定按钮将被禁用。

实施步骤如下：

*   使活动实现`TextWatcher`接口
*   `afterTextChanged()`包含执行验证和启用/禁用“确定”按钮的代码
*   在`DialogFragment.onCreateDialog()`将 TextChanged 侦听器添加到 EditText 中（见下文）

就这样。它现在就像一个魅力。

```
mEditText.addTextChangedListener((MainActivity)getActivity()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:20:29.563

尝试将具有布局（使用 edittext 、按钮和任何其他小部件设计）的特定活动膨胀为清单文件中的主题对话框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:29:40.877

如果您使用按钮并直接为其`findViewById()`设置一个怎么办？`onClickListener`如果可行，您可能不需要`onShowListener`。

# asp.net - 关于 SQL-Server 查询的建议

> ID：11957445
> 
> 赞同：6
> 
> 时间：2012-08-14T17:14:44.730
> 
> 标签：asp.net, sql, sql-server-2005

我希望改进我为使用 SQL-Server 2005 在 ASP.NET 4.0 中的小型 Web 应用程序编写的此查询。此应用程序将允许用户按产品 ID 搜索并让它返回以下信息：

*   最高购买价格 + 最近购买日期@此价格
*   最低购买价格 + 最近购买日期@此价格
*   最近购买价格 + 日期
*   平均购买价格（可选，我认为这可能会提高应用程序的实用性）

这是 Products 表的结构（我只包括相关列，这是一个已经在生产中的数据库，这些是非 pk 列）

*   product_id (nvarchar(20))
*   价格（十进制（19,2））
*   pDate（日期时间）

在我放下查询之前，我只想说我可以通过多个查询轻松获取这些信息，所以如果这是最佳实践，那么请忽略改进查询，但我的目标是尽量减少所需的查询数量获取所有需要的信息。

到目前为止我所拥有的：（注意：有价格 = 0 的行，所以我忽略了底部选择中寻找最低价格的行）

```
SELECT price, MAX(pDate)
FROM Products
WHERE product_id = @product_id AND
     (price = (SELECT MAX(price)
               FROM Products
               WHERE product_id =@product_id) OR
      price = (SELECT MIN(price)
               FROM Products
               WHERE product_id = @product_id AND price > 0))
GROUP BY price 
```

现在这是返回 2 行：

*   第一个 = 最低价 + 日期
*   第二行 = 高价 + 日期

如果可能的话，我希望有一个查询返回 1 行，其中包含上述所有需要的信息，因为它可以简化在 ASP 中显示信息的过程。就像我之前说的，如果多个查询是 be 方法，那么不需要在这里重新编写一个复杂的查询。

*编辑*

这是一些示例数据

![样本数据](../Images/7f5f017a6c5e0d1c31b6b272e31323aa.png)

期望的查询结果：（忽略我在 excel 中输入的格式）

![在此处输入图像描述](../Images/a6aedfba46c77787330d396b570cc9cd.png)

感谢 Ken Benson，这是我将使用的查询：

```
SELECT TOP 1 prod.product_id,
   minp.price AS minprice, minp.pDate as minlastdate,
   maxp.price AS maxprice, maxp.pDate as maxlastdate,
   ag.price AS averageprice
FROM products AS prod
LEFT JOIN (SELECT lmd.product_id,max(lmd.pDate) as pDate,mn.price FROM products as lmd INNER JOIN 
           (SELECT product_id, min(price) AS price from products WHERE price > 0 group by product_id) as mn ON lmd.product_id=mn.product_id AND lmd.price=mn.price
                  group by lmd.product_id,mn.price ) AS minp ON minp.product_id=prod.product_id
LEFT JOIN (SELECT lxd.product_id,max(lxd.pDate) as pDate,mx.price FROM products as lxd INNER JOIN 
           (SELECT product_id, max(price) AS price from products group by product_id) as mx ON lxd.product_id=mx.product_id AND lxd.price=mx.price
              group by lxd.product_id,mx.price ) AS maxp ON maxp.product_id=prod.product_id
LEFT JOIN (SELECT product_id,avg(price) as price FROM products WHERE price > 0 GROUP BY product_id) AS ag ON ag.product_id=prod.product_id
WHERE prod.product_id=@product_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:54:49.207

我想你可以做几个连接回到桌子......

```
Select product_id, min.price, min.pDate, max.price, max.pDate
FROM products as p
LEFT JOIN (Select Min(price), pDate, product_id FROM products GROUP BY product_id) 
   as min on min.product_id=p.product_id
LEFT JOIN (Select max(price), pDate, product_id FROM products GROUP BY product_id) 
   as max on max.product_id=p.product_id
Where p.product_id = @product_id 
```

这第二段代码应该会产生预期的结果......

```
SELECT prod.product_id,
   minp.price AS minprice, minp.pDate as minlastdate,
   maxp.price AS maxprice, maxp.pDate as maxlastdate,
   ag.price AS averageprice
FROM products AS prod
 LEFT JOIN (SELECT lmd.product_id,max(lmd.pDate) as pDate,mn.price FROM products as lmd INNER JOIN 
           (SELECT product_id, min(price) AS price from products group by product_id) as mn ON lmd.product_id=mn.product_id
                  group by lmd.product_id,mn.price ) AS minp ON minp.product_id=prod.product_id
 LEFT JOIN (SELECT lxd.product_id,max(lxd.pDate) as pDate,mx.price FROM products as lxd INNER JOIN 
           (SELECT product_id, max(price) AS price from products group by product_id) as mx ON lxd.product_id=mx.product_id
                  group by lxd.product_id,mx.price ) AS maxp ON maxp.product_id=prod.product_id
 LEFT JOIN (SELECT product_id,avg(price) as price FROM products GROUP BY product_id) AS ag ON ag.product_id=prod.product_id
WHERE prod.product_id=1
LIMIT 1 
```

是的 - 遗漏了一个“和”条件：

```
SELECT TOP 1
 prod.product_id,
   minp.price AS minprice, minp.pDate as minlastdate,
   maxp.price AS maxprice, maxp.pDate as maxlastdate,
   ag.price AS averageprice
FROM products AS prod
 LEFT JOIN (SELECT lmd.product_id,max(lmd.pDate) as pDate,mn.price FROM products as lmd INNER JOIN 
           (SELECT product_id, min(price) AS price from products group by product_id) as mn ON lmd.product_id=mn.product_id **AND lmd.price=mn.price**
                  group by lmd.product_id,mn.price ) AS minp ON minp.product_id=prod.product_id
 LEFT JOIN (SELECT lxd.product_id,max(lxd.pDate) as pDate,mx.price FROM products as lxd INNER JOIN 
           (SELECT product_id, max(price) AS price from products group by product_id) as mx ON lxd.product_id=mx.product_id AND **lxd.price=mx.price**
                  group by lxd.product_id,mx.price ) AS maxp ON maxp.product_id=prod.product_id
 LEFT JOIN (SELECT product_id,avg(price) as price FROM products GROUP BY product_id) AS ag ON ag.product_id=prod.product_id
WHERE prod.product_id=@product_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:46:54.263

我会结合排名函数和条件聚合来做到这一点：

```
select product_id, 
       max(case when seqnum_hi = 1 then price end) as highPrice,
       max(case when seqnum_hi = 1 then pdate end) as highPrice_date
       max(case when seqnum_low = 1 then price end) as lowPrice,
       max(case when seqnum_low = 1 then pdate end) as lowPrice_date,
       max(case when seqnum_rec = 1 then price end) as recentPrice,
       max(case when seqnum_rec = 1 then pdate end) as recentPrice_date,
       avg(price) as avg_price
from (select p.*,
             row_number() over (partition by product_id order by price asc) as seqnum_low,
             row_number() over (partition by product_id order by price desc) as seqnum_hi,
             row_number() over (partition by product_id order by pdate desc) as seqnum_rec
      from price
      where product_id = @product_id
group by product_id 
```

序列号标识具有您关心的特定属性（高价、低价、最新）的行。然后，条件最大值仅从这些行中选择信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:09:08.467

以下应该得到你想要的。它很长，但可读性强，因此任何需要的人都可以轻松修改：

```
;WITH CTE_MaxPrice AS
(
  SELECT product_id, MAX(P.price) AS MaxPrice
  FROM Products P
  GROUP BY product_id
  HAVING product_id = @product_id
),
CTE_MinPrice AS
(
  SELECT product_id, MIN(P.price) AS MinPrice
  FROM Products P
  GROUP BY product_id
  HAVING product_id = @product_id 
),
CTE_MaxPriceDate AS
(
  SELECT P.product_id, MAX(P.pDate) AS MaxDate
  FROM Products P
  INNER JOIN CTE_MaxPrice MaxP ON P.product_id = MaxP.product_id 
                               AND P.price = MaxP.MaxPrice
  GROUP BY P.product_id
),
CTE_MinPriceDate AS
(
  SELECT P.product_id, MAX(P.pDate) AS MinDate
  FROM Products P
  INNER JOIN CTE_MinPrice MinP ON P.product_id = MinP.product_id 
                               AND P.price = MinP.MinPrice
  GROUP BY P.product_id
)
SELECT MaxP.MaxPrice, MaxPD.MaxDate, 
       MinP.MinPrice, MinPD.MinDate, 
       RP.price AS RecentPrice, MAX(RP.pDate) AS RecentDate, 
       AVG(AP.price) AS AveragePrice 
FROM Products P
INNER JOIN CTE_MaxPrice MaxP ON P.product_id = MaxP.product_id
INNER JOIN CTE_MinPrice MinP ON P.product_id = MinP.product_id 
                             AND MinP.MinPrice > 0
INNER JOIN CTE_MaxPriceDate MaxPD ON P.product_id = MaxPD.product_id
INNER JOIN CTE_MinPriceDate MinPD ON P.product_id = MinPD.product_id
INNER JOIN Products RP ON P.product_id = RP.product_id
INNER JOIN Products AP ON P.product_id = AP.product_id
GROUP BY MaxP.MaxPrice, MaxPD.MaxDate, 
MinP.MinPrice, MinPD.MinDate, RP.price
HAVING P.product_id = @product_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T21:38:59.040

好吧，既然已经尝试了 3 次，但都没有达到你想要的效果，我会告诉你我会怎么做 - 这假设你可以使用存储过程，并且假设产品表不是那么大多个单独的查询将是一个问题：

```
CREATE PROCEDURE myproc AS

  DECLARE @Price1 money
  DECLARE @Date1 smalldatetime

  DECLARE @Price2 money
  DECLARE @Date2 smalldatetime

  DECLARE @Price3 money
  DECLARE @Date3 smalldatetime

  DECLARE @Price4 money

  SELECT @Price1 = MAX(Price) FROM Products
  SELECT @Date1 = MAX(pDate) FROM Products WHERE Price=@Price1

  SELECT @Price2 = Min(Price) FROM Products WHERE Price >0
  SELECT @Date2 = MAX(pDate) FROM Products WHERE Price=@Price2

  SELECT @Date3 = Max(pDate) FROM Products
  SELECT @Price3 = MAX(Price) FROM Products WHERE pDate=@Date3 --max in case there are more than one purchases with the same date.

  SELECT @Price4 = AVG(Price) FROM Products WHERE Price>0

  SELECT @Price1 As MaxPrice, 
         @Date1 As MaxPriceDate,
         @Price2 As LowPrice, 
         @Date2 As LowPriceDate,
         @Price4 As AveragePrice,
         @Price3 As RecentPrice,
         @Price3 As RecentPriceDate
GO 
```

请原谅任何印刷错误，我没有对此进行测试，但是如果您可以使用存储过程，这将起作用。

因此，这与从客户端执行多个查询没有太大区别，但将它们全部放入单个 SP 应该会更好。您还可以通过使用其他答案中的一些代码来减少查询的数量，但为了清楚起见，我将其保留为这种方式。

# jquery - jqplot邻居问题

> ID：11957446
> 
> 赞同：1
> 
> 时间：2012-08-14T17:14:53.540
> 
> 标签：jquery, jqplot

我是jqplot的新手，所以请原谅我的无知。我继承了一个生成 OHLC 图表的应用程序。每个系列都显示有一条从最小值到最大值的垂直线，平均值上有一个刻度线。定义了 jqplotClick 和 jqplotMouseMove 函数，它们都以：

```
 if (neighbor) { 
```

我的问题是，当该系列仅包含一个数据点时 - 即 O == H == L == C （在这种情况下，它只用刻度线呈现，没有线），neighbor 为 null 并且单击和鼠标移动操作不要发生。我被要求对其进行修改，以便这些动作确实发生在这些单点系列上。

既然有数据点，为什么neighbor null？在这些情况下，我怎样才能使这项工作？

蒂亚！

这是对 dnagirl 帖子的更多信息。

这是传入 jqplot 的系列：

```
[
Array[4]
0: Array[6]
0: 1
1: 59.351
2: 62.621
3: 55.89
4: 59.351
5: Object
length: 6
__proto__: Array[0]
1: Array[6]
0: 2
1: 60.805
2: 60.805
3: 60.805
4: 60.805
5: Object
length: 6
__proto__: Array[0]
2: Array[6]
0: 3
1: 59.7385
2: 62.224
3: 57.947
4: 59.7385
5: Object
length: 6
__proto__: Array[0]
3: Array[6]
0: 4
1: 58.9365
2: 59.48
3: 58.393
4: 58.9365
5: Object
length: 6
__proto__: Array[0]
length: 4
__proto__: Array[0]
, 
Array[4]
0: Array[3]
0: 1
1: 1
2: Object
length: 3
__proto__: Array[0]
1: Array[3]
0: 2
1: 3
2: Object
length: 3
__proto__: Array[0]
2: Array[3]
0: 3
1: null
2: Object
length: 3
__proto__: Array[0]
3: Array[3]
0: 4
1: 2
2: Object
length: 3
__proto__: Array[0]
length: 4
__proto__: Array[0]
] 
```

这是图表的图片：

![这是图表的图片](../Images/e5c913235a3f7d5bbc5612999a331d9d.png)

我已经将其追溯到 jqplot 中的 checkIntersection 函数。问题是，如果您有一个 OHLC 图表并且 O==H==L==C 邻居不会被拾取。在这个块中，if 永远不会为真：

```
else if (!r.hlc){
    var yp = s._yaxis.series_u2p;
    if (x >= p[0]-r._tickLength && x <= p[0]+r._tickLength && y >= yp(s.data[j][2]) && y <= yp(s.data[j][3])) {
        return {seriesIndex: i, pointIndex:j, gridData:p, data:s.data[j]};
    }
} 
```

但是当 O、H 和 L 不相等时，它确实返回 true。

# javascript - Basic D3.js：如何在函数中使用连接？

> ID：11957447
> 
> 赞同：1
> 
> 时间：2012-08-14T17:14:59.267
> 
> 标签：javascript, d3.js

我开始掌握 D3.js。我想编写一个函数，用一组数据绘制一组点，然后用另一组数据绘制另一组点。

我已经写了这个，但是第二组点覆盖了第一组点！如果没有，我该如何重写它，`selectAll`以便我正确地得到两组点？

```
function drawDots(mydata) { 
  focus.selectAll(".dot").data(mydata)
    .enter().append("circle")
    .attr("class", "dot")
    .attr("cx", line.x())
    .attr("cy", line.y())
    .attr("r", 3.5);
}
drawDots(data[0]);
drawDots(data[1]); 
```

（注意：这是一个简化。基本上我想知道如何使用`.enter()`函数调用。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:28:54.710

你需要给两组数据不同的类名。现在两者都被标记为相同的类（“.dot”），但如果它们代表不同的集合，您还需要能够区分它们。例如：

```
function drawDots(mydata, name) { 
  focus.selectAll(".dot"+"."+name).data(mydata)
    .enter().append("circle")
    .attr("class", "dot" + " " + name)
    .attr("cx", line.x())
    .attr("cy", line.y())
    .attr("r", 3.5);
}
drawDots(data[0], "set1");
drawDots(data[1], "set2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:25:47.057

我只使用 d3js 来构建力图，但我认为在您的情况下，您需要先将节点添加到可视化中，然后调用 enter()，然后获取图中的内容。

```
function drawDots(mydata) 
{ 
  myD3Object.nodes(myData).start();
  focus.selectAll(".dot").data(myD3Object.nodes())
  .enter().append("circle")
  .attr("class", "dot")
  .attr("cx", line.x())
  .attr("cy", line.y())
  .attr("r", 3.5);
} 
```

# c++ - 这是对联合的正确用法吗

> ID：11957450
> 
> 赞同：4
> 
> 时间：2012-08-14T17:15:17.020
> 
> 标签：c++, c, unions

我想命名字段而不是索引字段，但对于某些用途，我必须迭代字段。愚蠢的简化示例：

```
struct named_states {float speed; float position;};

#define NSTATES (sizeof(struct named_states)/sizeof(float))
union named_or_indexed_states {
   struct named_states named;
   float indexed[NSTATES];
}
...
union named_or_indexed_states states,derivatives;
states.named.speed = 0;
states.named.position = 0;
...
derivatives.named.speed = acceleration;
derivatives.named.position= states.named.speed;
...
/* This code is in a generic library (consider nstates=NSTATES) */
for(i=0;i<nstates;i++)
    states.indexed[i] += time_step*derivatives.indexed[i]; 
```

这避免了从命名结构到索引数组的复制，反之亦然，并将其替换为通用解决方案，因此更易于维护（当我增加状态向量时，我几乎没有地方可以更改）。它也适用于各种我测试过的编译器（多个版本的 gcc/g++ 和 MSVC）。

但从理论上讲，据我了解，它并没有严格遵守正确的联合使用，因为我编写了命名字段然后读取了索引字段，而且我完全不确定我们可以说它们共享相同的结构字段......

你能确认它在理论上是坏的（不可移植）吗？

我应该更好地使用演员表、memcpy() 还是其他东西？

除了理论之外，从实用的 POV 来看，是否存在任何真正的可移植性问题（一些不兼容的编译器、奇异的结构对齐、计划的演变......）？

**编辑：**你的答案应该更清楚地说明我的意图是：

*   让程序员专注于特定领域的方程并将它们从转换函数的维护中释放出来（我不知道如何编写一个通用的，除了看起来不太健壮的强制转换或 memcpy 技巧）
*   通过使用结构（由编译器完全控制）与数组（声明和访问受更多程序员错误影响）来增加更多的编码安全性
*   避免使用 enum 或 #define 过多地污染命名空间

我需要知道

*   我偏离标准有多便携/危险（也许一些具有激进内联的编译器将使用完整的寄存器解决方案并避免任何内存交换破坏技巧），
*   如果我错过了部分或全部解决上述问题的标准解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:26:36.387

没有要求 named_states 中的两个字段与数组元素的排列方式相同。他们很有可能这样做，但是您在那里有一个编译器依赖项。

这是您尝试执行的 C++ 中的简单实现：

```
struct named_or_indexed_states {
    named_or_indexed_states() : speed(indexed[0], position(indexed[1]) { }
    float &speed;
    float &position;
    float indexed[2];
}; 
```

如果由于引用元素过多导致大小增加，请使用访问器：

```
struct named_or_indexed_states {
    float indexed[2];
    float& speed() { return indexed[0]; }
    float& position() { return indexed[1]; }
}; 
```

编译器将没有问题内联访问器，因此读取或写入将`speed()`与`position()`成员数据一样快。但是，您仍然必须编写那些烦人的括号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T17:21:02.463

只有访问联合的最后一个写入成员是明确定义的；就仅标准 C（或 C++）而言，您提供的代码使用**未定义的行为**- 它可能有效，但它是错误的方法。struct 使用与数组类型相同的类型并不重要 - 可能涉及填充，以及编译器使用的其他不可见技巧。

一些编译器，如 GCC，确实将其定义为实现类型双关的允许方式。现在问题出现了——我们是在谈论标准 C（或 C++），还是 GNU 或任何其他扩展？

至于你应该使用什么 - 正确的转换运算符和/或构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:29:11.393

这可能有点过时，但在这种情况下我会做的是：

枚举{

F_POSITION,

F_SPEED,

F_COUNT };

浮动状态[F_COUNT];

然后您可以将它们引用为：states[F_POSITION] 和 states[F_SPEED]。

这是我写这篇文章的一种方式。我相信还有很多其他的可能性。

# java - 混淆proguard时只保留函数名

> ID：11957451
> 
> 赞同：6
> 
> 时间：2012-08-14T17:15:17.583
> 
> 标签：java, proguard

我使用 proguard 进行混淆。如何在混淆时只保留函数名称。类名必须混淆，但函数名。

如果我使用，

```
-keep class * {
     void somefunction();
} 
```

它保留了某些功能的功能，但不会更改类名。

但是，我想更改类名但是一些功能

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T20:28:29.607

您可以使用`-keepclassmembers`或`-keepclassmembernames`。

参照。ProGuard 手册 > 使用 > [Keep 选项概述](http://proguard.sourceforge.net/manual/usage.html#keepoverview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-11T15:43:05.527

使用 Proguard，您可以使用`-keepclassmembernames`

在 JNI 中，类名是本地环境中函数名的一部分。

如果您重命名该类，您将获得`java.lang.UnsatisfiedLinkError`.

您必须保留类名和成员函数名。

# jquery - WCF 异常在 Google Chrome 浏览器中返回空 Jquery 错误

> ID：11957452
> 
> 赞同：1
> 
> 时间：2012-08-14T17:15:26.747
> 
> 标签：jquery, ajax, wcf, exception

WCF 异常在 Google Chrome 浏览器中返回空 Jquery 错误

我有一个发送密码的 wcf。我尝试强制出错，但 $ 的 Chrome 浏览器返回空。jquery ajax 错误。

wcfUser.svc：

> [OperationContract(), WebInvoke (Method = "POST", RequestFormat = WebMessageFormat.Json, ResponseFormat WebMessageFormat.Json =)]
> 
> ```
>  public string lembrarSenha ()
>       {
> 
>           try
> 
>           {
> 
>               int id = Convert.ToInt32 ("asssaas");
>               return id.ToString();
> 
>           }
>           catch (Exception ex)
>           {
> 
>               HttpContext.Current.Response.Write (ex.Message);
>               HttpContext.Current.Response.ContentType = "application/json";
>               HttpContext.Current.Response.Flush ();
>               return ex.Message;
> 
>           }
> 
>       } 
> ```

jQuery：

> 美元。阿贾克斯（{
> 
> ```
>  url: "wcf/wcfUser.svc/lembrarSenha",
>                   type: "POST",
>                   contentType: "application/json; charset=utf-8",
>                   dataType: 'json',
>                   ProcessData: true,
>                   success: function (msg) {
> 
>                       if (msg.d == true) {
>                           alert ("Please check your inbox for your email.");
> 
>                       Else {}
>                           alert ("Email is not registered in the system.");
>                       }
> 
>                   }
>                   error: function (XHR, ErrorText, thrownError) {
> 
>                       alert (xhr.responseText);
> 
>                   }
> 
>               }); 
> ```

必须返回错误，但在 Chrome 中返回空，在其他浏览器中正确返回错误。

# url - Rails Spree 登录页面未显示，连接被拒绝

> ID：11957453
> 
> 赞同：0
> 
> 时间：2012-08-14T17:15:31.640
> 
> 标签：url, routes, capistrano, production, spree

刚刚设法在生产模式下在 Rackspace 云服务器（Ubuntu 12.04）上部署 Spree 应用程序。我正在使用 Capistrano 和 Spree 部署服务。

我更改了我的 DNS 设置，将域[http://opp5.oppermann-london.com](http://opp5.oppermann-london.com)指向服务器的 IP 地址。我可以访问页面和 URL，例如 /products 和 /cart 工作，但是尝试访问 /admin 或 /login 页面在 Chrome 上会出现以下错误：

> 错误 102 (net::ERR_CONNECTION_REFUSED)：服务器拒绝连接。

我用谷歌搜索了这个问题，没有发现类似的问题。任何帮助都是极好的！

如果这有帮助，一些细节：

> 红宝石：1.9.2 p290
> 
> 导轨 3.2.6
> 
> 大礼包：1.1.3

非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T13:25:44.613

刚刚遇到了同样的问题。默认情况下`/admin`，`/login`在生产模式下需要 https。查看 nginx 配置，我可以看到 https 站点未启用，并且它的配置指向不存在的证书。

作为临时解决方法，我`config/initializers/spree.rb`通过添加禁用 SSL`config.allow_ssl_in_production = false`

# udp - 通过 Internet 向外部网络广播 UDP

> ID：11957454
> 
> 赞同：0
> 
> 时间：2012-08-14T17:15:40.567
> 
> 标签：udp, external, local, broadcast

我有一个将 UDP 广播到我的本地网络的程序，一个主机设备会读取此消息并完美地运行它。现在我想远程完成这项工作，知道接收主机在哪里我有一个由 ISP 提供的公共静态 IP，例如我在这个网络之外，我想通过 Internet 向它广播这个 UDP 流量，是否有任何可能的路由配置可以让该流量到达本地网络并在那里爆炸？

如果不。有没有其他方法可以使这个流量，而不是直接广播到这个接收器主机？那将只需要在我的静态 IP 路由器中进行一些端口转发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:22:22.080

根据 RFC，路由器不能转发广播。另外，一些 ISP 无论如何都会过滤掉这样的数据包。广播仅限于本地子网。

我建议您改为研究多播。

# php - CSRF 状态令牌与提供的不匹配

> ID：11957455
> 
> 赞同：4
> 
> 时间：2012-08-14T17:15:43.967
> 
> 标签：php, facebook, facebook-graph-api

我知道 stackoverflow 上有大量关于“CSRF 状态令牌与提供的令牌不匹配”的问题。但是，我试过了，似乎并没有解决问题。你能看看我下面的代码吗？请告诉我您的想法以及如何解决问题。我已经更新到最新的 PHP SDK 版本。

```
<?
require_once ('src/facebook.php');
require_once ('src/fbconfig.php');

//Facebook Authentication part
$user_id = $facebook->getUser();
$loginUrl = $facebook->getLoginUrl(array(
    'scope' => 'publish_stream')
);

if ($user_id) {
    $_SESSION['user_id'] = $user_id;
    echo "<script>top.location.href = 'https://www.example.com/app-folder/welcome'</script>"; 
    exit;
} 
?>
    .
    .
<body>
<?php echo '<a href="'.$loginUrl.'" target="_top">Please login</a>'; ?>
    .
    .
</body> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T18:21:50.337

`getLoginUrl()`生成一个新的令牌。如果您的用户已经登录（使用`$user_id = $facebook->getUser()`），您最终将获得 2 个令牌。

如果用户已经通过身份验证，则不要询问 $loginUrl。

```
$user_id = $facebook->getUser();

if ($user_id) {
    $_SESSION['user_id'] = $user_id;
    echo "<script>top.location.href = 'https://www.example.com/app-folder/welcome'</script>"; 
    exit;
} else {
    $loginUrl = $facebook->getLoginUrl(array(
        'scope' => 'publish_stream')
    );
} 
```

?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:54:57.997

我必须执行以下操作：

1.  仅在第一页（即登录/索引）上使用[PHP SDK 的 getLoginUrl](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)并将其从所有其他页面中删除。
2.  使用[Javascript SDK 中的 FB.getLoginStatus() 并回退到 FB.login()](https://developers.facebook.com/docs/howtos/login/getting-started/#step4)或重定向到登录/索引页面
3.  在尝试任何可能需要有效 access_token 的操作之前检查 FB.getLoginStatus()

我确信主要问题是我在每一页上都调用了**getLoginUrl 。**

由于我进行了这些更改，因此当机器人访问我的页面时，我只会在日志中收到“CSRF 状态令牌”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T17:46:49.360

尽管 Facebook PHP API 文档中没有说明，但您必须为 PHP 会话配置 apache 才能使登录过程正常工作。这就是我们在获得“CSRF 状态令牌与提供的令牌不匹配”时遇到的问题。

确保您使用的服务器池已设置为使用 memcache 获取会话信息，否则 apache 将在本地写入会话信息，如果下一个请求未发送到同一服务器，您将获得“CSRF 状态令牌与提供的令牌不匹配”。

这是在开发环境（使用一台服务器）中像魅力一样工作但在生产中失败的事情之一。

我们还必须重新配置我们的 CDN 设置以确保我们通过 PHP 会话 cookie。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-11T13:09:44.273

解决方法：
转到`base_facebook.php`

寻找`protected function getCode()`这就是问题所在。
该`$this->state`变量不会为异地导航而保存（自然）

替换这个：

```
if ($this->state !== null &&
isset($_REQUEST['state']) &&
$this->state === $_REQUEST['state']) { 
```

有了这个：

```
if ($_REQUEST['state'] != '' && $_REQUEST['code'] != '') { 
```

它会很好地工作

G@bri3l

# jquery - jquery datetimepicker minDate 上的单选按钮更改

> ID：11957457
> 
> 赞同：0
> 
> 时间：2012-08-14T17:15:50.243
> 
> 标签：jquery, jquery-ui, datetime, datepicker

我有这个脚本[http://jsfiddle.net/Kj55E/6/](http://jsfiddle.net/Kj55E/6/)

我正在使用 datetimepicker 插件

我有以下问题： exp_date minDate 必须是 begin_date + 1 。第一次运行时一切正常。但是在我更改 begin_date ... minDate for exp_date 后不要刷新...请帮助

谢谢科斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:40:10.637

尝试将所有逻辑放在 #begin_date 的 onClose 事件中，而不是通过单击启动

end_date 是在单击时启动的……而不是在选择时启动的。

```
 $('#begin_date').datetimepicker({
            showSecond : true,
            dateFormat : 'yy-mm-dd',
            timeFormat : 'hh:mm:ss',
            stepMinute : 5,
            stepSecond : 5,
            minDate: 1,
            onClose: function () {
                test = $("#begin_date").datetimepicker('getDate');
                testm = new Date(test.getTime());
                testm.setDate(testm.getDate() + 1);

                $("#exp_date").datetimepicker("option", "minDate", testm);
                $("#exp_date").datetimepicker('setDate', testm );
            } 
```

# c# - 非静态字段、方法或属性需要对象引用

> ID：11957458
> 
> 赞同：0
> 
> 时间：2012-08-14T17:15:51.363
> 
> 标签：c#

您好我正在尝试编写一个将文件从源文件夹复制到目标文件夹的代码。如果目标文件夹包含相同的文件名，那么我的程序应该存储不同名称的文件。例如源文件夹包含：C:\test\ test1.txt test2.txt

目标文件夹包含 D:\test\ test1.txt test2.txt test3.txt

然后复制操作应将 test1.txt 和 test2.txt 从源文件夹复制到目标文件夹，并将名称更改为 test4.txt 和 test5.txt

这不是完整的代码。但我收到错误非静态字段、方法或属性需要对象引用。在 getFileName(ref destfileName, ref targetPath)。对此有什么帮助吗？

```
class Program
{
    static void Main(string[] args)
    {
        string sourcefileName = null;
        string destfileName = null;
        string sourcePath = @"C:\test";
        string targetPath = @"D:\test";
        List<int> seqNum = new List<int>();

        // To copy a folder's contents to a new location:
        // Create a new target folder, if necessary.
        if (!System.IO.Directory.Exists(targetPath))
        {
            System.IO.Directory.CreateDirectory(targetPath);
        }

        // To copy all the files in one directory to another directory.
        // Get the files in the source folder. (To recursively iterate through
        // all subfolders under the current directory, see
        // "How to: Iterate Through a Directory Tree.")
        // Note: Check for target path was performed previously
        //       in this code example.
        if (System.IO.Directory.Exists(sourcePath))
        {
            string[] files = System.IO.Directory.GetFiles(sourcePath);

            // Copy the files and overwrite destination files if they already exist.
            foreach (string s in files)
            {
                // Use static Path methods to extract only the file name from the path.
                //File name is like text1.txt
                sourcefileName = System.IO.Path.GetFileName(s);       
                if (System.IO.Directory.GetFiles(targetPath).Count() > 0)
                {
                    foreach (string file in System.IO.Directory.GetFiles(targetPath))
                    {
                        if (file.Contains(sourcefileName))
                        {
                            int num;
                            string existingLatestFile = string.Empty;
                            destfileName = sourcefileName.Replace(".txt", string.Empty);
                            for (int i = 0; i < sourcefileName.Length; i++)
                            {
                                if (Char.IsDigit(sourcefileName[i]))
                                {
                                    existingLatestFile += sourcefileName[i];
                                }
                            }
                            if (int.TryParse(existingLatestFile, out num))
                            {
                                seqNum.Add(num);
                            }
                            destfileName = destfileName.Replace(existingLatestFile, string.Empty);//Remove existing number
                            num = num + 1;
                            destfileName = destfileName + num.ToString() + ".txt"; // Make a new file name
                            while (!getFileName( ref destfileName, ref targetPath))
                            {

                            }

                        }
                        else
                        {
                            destfileName = sourcefileName;
                        }
                        string destFile = System.IO.Path.Combine(targetPath, destfileName);
                        System.IO.File.Copy(s, destFile, false);
                    }
                }

            }
        }
        else
        {
            Console.WriteLine("Source path does not exist!");
        }

        if (System.IO.Directory.GetFiles(targetPath).Count() > 0)
        {
            foreach (string file in System.IO.Directory.GetFiles(targetPath))
            {
        /*        if (file.Contains(dir + "\\" + filename))
                {
                    int num;
                    existingLatestFile = file.Replace(dir + "\\" + filename, string.Empty);
                    existingLatestFile = existingLatestFile.Replace(".txt", string.Empty);

                    if (int.TryParse(existingLatestFile, out num))
                    {
                        seqNum.Add(num);
                    }
              }*/
          Console.WriteLine(file);
            }
        }

        // Keep console window open in debug mode.
        Console.WriteLine("Press any key to exit.");
        Console.ReadKey();
    }

    bool getFileName(ref string filename, ref string destFolder)
    {
        bool retValue =false;
        foreach (string file in System.IO.Directory.GetFiles(destFolder))
        {
            if (file.Contains(filename))
            {
                retValue = false;
            }
            else
            {
                retValue = true;
            }                
        }           
        return retValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T17:18:35.250

`Main()`是一种*静态*方法。
它不与任何实例关联。

您还需要将其他方法设为静态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:21:21.577

main 是一个静态方法，要调用非静态方法 getFileName 需要先创建一个实例

改变

```
while (!getFileName... 
```

到

```
Program p = new Program();
while (!p.getFileName... 
```

# jpa - EclipseLink 合并意外级联

> ID：11957461
> 
> 赞同：5
> 
> 时间：2012-08-14T17:16:03.380
> 
> 标签：jpa, eclipselink

我有两个实体类用户和设备。

用户实体：

```
public class User {
    private Long userId;

    @OneToMany( mappedBy = "userId", fetch = FetchType.LAZY)
    private Collection<Device> deviceCollection; 
```

和设备实体：

```
public class Device implements Serializable {
    @JoinColumn(name = "user_id", referencedColumnName = "user_id")
    @ManyToOne(optional = false, fetch = FetchType.LAZY)
    private User userId; 
```

当我在删除父用户后将以前分离的设备实体合并到实体管理器中时，（以前删除的）用户和设备都会重新插入到数据库中。用户或设备实体上没有级联注释；因此，我不希望重新插入用户实体，但确实如此；

如何防止合并操作级联到用户实体？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:05:46.570

尝试将**insertable=false, updatable=false**添加到您的 JoinColumn，例如

```
@JoinColumn(name = "user_id", referencedColumnName = "user_id", insertable=false, updatable=false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:29:31.703

您在分离状态下所做的任何更改，会话管理器都无法知道它，因此更改始终是需要合并的新对象（如果您正在调用合并）

因此，当您调用合并时，它将从数据库中加载它，因此您的对象将具有 Prev+ 新更改。所以这就是为什么提到的行为正在发生。

您可以做的是首先在会话中加载实体应用更改，然后调用合并。

您可以做的如下所示我在我的一个项目中使用 Eclipse Link 使用了类似的关系

```
Query query = entityManager
            .createNamedQuery("User.FindByUserId");
    User fromDatabase = null;
    try {
        query.setParameter("userId", device.getUser().getUserId());
        fromDatabase = (User) query.getSingleResult();

    } catch (NoResultException noResultException) {
        // There is no need to do anything here.
    }
    if (fromDatabase == null) {
        User user= entityManager.merge(device.getUser());
         device.setUser(user);
    } else {
        device.setUser(user);
    }
    entityManager.persist(device); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:47:44.767

您应该使用版本号来防止实体被错误地复活。这将强制出现一个异常，因为规范对于在未标记为 cascade all 或 merge 的关系上进行合并时应该发生什么有点不清楚。规范指出托管实体将同步到数据库，而处理合并的部分意味着即使是由关系引用的实体，没有级联合并/所有选项也将在之后进行管理。这种行为可能不是预期的，但在澄清之前不应依赖。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T13:26:55.653

我遇到了同样的问题，我发现了一个关于此的错误：[EntityManager.merge() 默认为级联，](https://bugs.eclipse.org/bugs/show_bug.cgi?id=247662) 但我真的不明白为什么这种行为永远无法修复。这是我不使用 EclipseLink 的原因之一（但这不是重点）

***编辑：***

克里斯，以“我不是专家”开头的评论放在头脑中的论点是不正确的，我认为。据我了解，它只是具有没有 cascade=MERGE 或 cascade=ALL 的关系的实体，您可以导航，仅此而已。

否则为什么要使用 Merge 注释？这没有意义。

# java - Struts2 框架中的 NoClassDefFoundError

> ID：11957465
> 
> 赞同：2
> 
> 时间：2012-08-14T17:16:26.957
> 
> 标签：java, struts2, httpclient

我正在使用 Struts2 框架并使用 HttpClient 类来发出 put 请求。当我尝试在 LoginAction 类中调用 httpClient 的 requestEntity 方法时，出现以下错误。

严重：异常启动过滤器 struts2 java.lang.NoClassDefFoundError: org/apache/commons/httpclient/methods/RequestEntity

我已经在类路径中包含了所有必需的 jar 文件。

请帮我弄清楚可能是什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:23:15.117

如果您使用的是旧版本（apache commons 小于 3.0），那么该类在旧 jar 中将不可用。你必须使用`Apache commons 3.0`图书馆。`org/apache/commons/httpclient/methods/RequestEntity`类被添加，因为`v3.0`. 检查[javadoc](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/methods/RequestEntity.html)。

通常，如果我们没有在类路径中添加 jar（或没有在项目中），那么我们会得到`ClassNotFoundException`，如果我们在项目中包含 jar 并且它在类路径中但特定类不可用，那么我们会得到`NoClassDefFoundError`.

# google-chrome - Google Chrome 扩展清单 2 更新

> ID：11957466
> 
> 赞同：0
> 
> 时间：2012-08-14T17:16:28.627
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

我只是想知道清单 2 中是否有一种新方法可以重写像这样的示例应用程序。

[http://developer.chrome.com/extensions/samples.html#4e35caa9742fb82dbd628892d23a781614f6eff6](http://developer.chrome.com/extensions/samples.html#4e35caa9742fb82dbd628892d23a781614f6eff6)

我开始将其转换为清单 2 应用程序并遇到了一些问题。

```
bgPage.oauth.authorize(function() {
Uncaught TypeError: Cannot call method 'authorize' of undefined
  if (!bgPage.docs.length) {
    gdocs.getDocumentList();
  } else {
    gdocs.renderDocList();
  }
  util.scheduleRequest();
});

bgPage.oauth.sendSignedRequest(url, gdocs.processDocListResults, params); 
```

由于 manifest2 中的某些原因，bgPad.oauth 调用不再有效。

有没有办法让这项工作再次发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:43:27.623

当我将自己的应用程序转换为清单版本 2 时，我遇到了同样的问题。首先，我只是想确保您知道您需要删除所有内联代码，并将其放在单独的脚本包含中。例如，popup.html 有很多内联代码；我将它移到一个 popup.js 中，并将其放在内联代码所在的位置。（这必须在`background.html`、`popup.html`和`chrome_ex_oauth.html`

其次，由于 Google 进一步收紧了应用程序和扩展程序中允许的权限，您需要在清单中添加以下内容：

```
"web_accessible_resources": [
  "chrome_ex_oauth.html"
] 
```

我已经压缩了我修改后的扩展版本以供您启发： [https ://dl.dropbox.com/u/73603348/gdocs.zip](https://dl.dropbox.com/u/73603348/gdocs.zip)

# apache - 从 Internet 访问 Apache 服务器

> ID：11957468
> 
> 赞同：0
> 
> 时间：2012-08-14T17:16:31.787
> 
> 标签：apache, redirect, permissions

我已经在 Xubuntu 上安装了 Apache，但从 Internet 访问它时遇到问题。如果我通过 localhost 访问它，我可以访问主页以及子目录中的页面。如果我从互联网访问它，我可以得到主页，但没有别的。当我输入子目录和页面时，此时没有链接，它要么永远不会离开主页，要么被重新路由回主页。

我没有 .htaccess 文件，我尝试在 conf 文件中添加别名和条目，并且检查了所有权和权限。我已经尽可能地擦拭机器并以相同的结果开始。

我觉得这将是缺少一些简单的东西的情况，但我想不出是什么。日志文件表明 IP 尝试访问子目录，但这样做没有显示错误。当输入 URL 时，/Directory/Index.html 会显示在地址栏中，但会显示主页。

谁能指出我正确的方向？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:53:43.900

问题很可能包含在您的 apache.conf 文件或防火墙中。我会好好看看你的 apache.conf 看看是否有任何限制访问你的子目录的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:57:21.620

如果你想使用默认的 http 端口（80），长话短说 www.abc.com 没有明确的端口号，你必须在你的服务器上允许这个，因为 80 在大多数系统上是特权，这可能是一个问题

# c - 我在我的程序中找不到内存泄漏

> ID：11957469
> 
> 赞同：0
> 
> 时间：2012-08-14T17:16:41.200
> 
> 标签：c

我编写了一些将值存储在数组数组中的代码。我正在释放方法中释放内存，但 Valgrind 仍然报告以下内容：

```
==640== 
==640== HEAP SUMMARY:
==640==     in use at exit: 6,094 bytes in 33 blocks
==640==   total heap usage: 12,040 allocs, 12,007 frees, 24,146,162 bytes allocated
==640== 
==640== LEAK SUMMARY:
==640==    definitely lost: 0 bytes in 0 blocks
==640==    indirectly lost: 0 bytes in 0 blocks
==640==      possibly lost: 0 bytes in 0 blocks
==640==    still reachable: 6,094 bytes in 33 blocks
==640==         suppressed: 0 bytes in 0 blocks
==640== Rerun with --leak-check=full to see details of leaked memory
==640== 
==640== For counts of detected and suppressed errors, rerun with: -v
==640== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) 
```

我的代码如下。我首先分配一个堆并在 1 个数组中插入键。然后我有一个二维数组（数组中的数组）来保存键。插入后，我想释放内存。

我找不到这个记忆仍然活跃的地方。有人可以帮忙吗？谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>

struct hashmap
{
    int** value;
    int* key;
    int keylength;
    int x;
    int y;
};

typedef struct hashmap hashmap;

/*
hashmap* hm_initialize();
Dynamically allocates a new hashmap and returns a pointer to it.
*/
hashmap* hm_initialize()
{
    hashmap *hm = malloc(sizeof(hashmap));
    hm->value = (int**)malloc(sizeof(int*));
    hm->value[0] = (int*)malloc(sizeof(int));
    hm->value[0][0] = -999999991;
    hm->key = (int*)malloc(sizeof(int));
    hm->key[0] = -999999991;
    hm->keylength = 1;
    hm->x = 1;
    hm->y = 1;
    return hm;
};

/*
void hm_release(struct hashmap*);
Releases all memory allocated for the given hashmap.
*/
void hm_release(struct hashmap* hm)
{
    free(hm->key);
    for(int x = 0; x<hm->x;x++)
        free(hm->value[x]);
    free(hm->value);
    free(hm);
}

/*
void hm_insert(struct hashmap* hm, int key, int value);
Inserts the key-value pair to the hashmap.
*/
void hm_insert(struct hashmap* hm, int key, int value)
{
    int flagkey = 0;
    int flagvalue = 0;
    int flaglocationkey;
    int flaglocationvalue;
    int valueexists = 0;
    int counter1 = 0;

    for(int x = 0;x<hm->keylength;x++) {
        if(hm->key[x] == key) { //Old Key Exists and is Active
            flagkey = 1;
            flaglocationvalue = x;
        }
    }

    if(flagkey == 0) {
        hm->key = realloc(hm->key,(hm->keylength+1)*sizeof(int));
        hm->key[hm->keylength-1] = key;
        hm->key[hm->keylength] = -999999991;
        hm->keylength = hm->keylength + 1;
        hm->value = (int**)realloc(hm->value,(hm->x+1)*sizeof(int*));
        hm->value[hm->x] = (int*)malloc(sizeof(int));
        hm->value[hm->x][0] = -999999991;
        hm->value[hm->x-1] = (int*)realloc(hm->value[hm->x-1],2*sizeof(int));
        hm->value[hm->x-1][1] = -999999991;
        hm->value[hm->x-1][0] = value;
        hm->x++;
    }

    if(flagkey == 1) {
       printf("FOUND KEY \n");
       printf("CONTENTS OF VAL1: %d \n", hm->value[flaglocationvalue][0]);

        while((hm->value[flaglocationvalue][counter1]) != -999999991) {
            if(hm->value[flaglocationvalue][counter1] == value) {
                 printf("TRUE");
                valueexists = 1;
            }
            counter1++;
        }

        printf("CONTENTS OF VAL2: %d \n", hm->value[flaglocationvalue][counter1]);
        printf("LENGTH %d \n", counter1);

        if(valueexists == 0) {
            hm->value[flaglocationvalue] = (int*)realloc((hm->value[flaglocationvalue]),(counter1+2)*sizeof(int));
            hm->value[flaglocationvalue][counter1] = value;
             hm->value[flaglocationvalue][counter1+1] = -999999991;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:35:44.707

您发布的 Valgrind 输出表明未检测到内存泄漏：

```
==640==    definitely lost: 0 bytes in 0 blocks
==640==    indirectly lost: 0 bytes in 0 blocks
==640==      possibly lost: 0 bytes in 0 blocks 
```

第四行（下面）并不意味着您泄漏了内存。这只是意味着您在退出之前没有释放所有内存。**这并不构成内存泄漏**，因为操作系统会在您退出时隐式释放程序分配的所有内存。

```
==640==    still reachable: 6,094 bytes in 33 blocks 
```

如果您尝试测试您的 hashmap 以确保它在退出时释放所有内存，您可能忘记`hm_release`在退出之前调用您的函数。

# css - 隐藏在 IE7 内容后面的下拉导航栏

> ID：11957470
> 
> 赞同：0
> 
> 时间：2012-08-14T17:16:42.667
> 
> 标签：css, internet-explorer-7

我有一个下拉导航栏，当您将鼠标悬停在项目上时，下拉选项出现在`IE7`它们隐藏在滑块后面。

我试过`z-index`没有运气。此外，菜单按钮和IE7中的第一个选项下也有一些间距。我还没有尝试解决这个问题，我主要关心的是让它显示在滑块内容之上。

你可以在这里看到它：http: [//www.condorstudios.com/stuff/temp/index.php](http://www.condorstudios.com/stuff/temp/index.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:54:59.830

将此添加到您的`$(document).ready()`处理程序：

```
var zi = 1000;
$('*').each( function() {
    $(this).css('zIndex', zi);
    zi -= 10;
}); 
```

为了确保这仅在 IE7 上执行，请将其添加到您的标签**之外**，但在：`<script>``<head>`

```
<!--[if IE 7]>
<script type="text/javascript">
    $(document).ready(function() {
        var zi = 1000;
        $('*').each( function() {
            $(this).css('zIndex', zi);
             zi -= 10;
        });
    });
</script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:14:43.253

[我最近在这里](https://stackoverflow.com/questions/11618649/css-drop-down-menu-explosion-in-internet-explorer-7)解决了同样的问题，所以这里有两个针对 IE7 的修复：

[CSS](https://stackoverflow.com/questions/10581160/css-dropdown-menu-hidden-behind-content-ie7/)：

```
/* show menu above content */
#nav li {
    display: block;
    position: relative;
    z-index: 1;         // force IE to recognize stack at this point
}

/* normalize layout, IE7 not makes this automatically */
body,ul,li {
    margin:0;
    padding:0;
} 
```

# hibernate - JPA - 作为集合的属性

> ID：11957472
> 
> 赞同：3
> 
> 时间：2012-08-14T17:17:08.537
> 
> 标签：hibernate, jpa

我使用 Hibernate 作为 JPA 提供程序。我有例如这个类：

```
@Question("multipleChoiceQuestion")
@Entity
public class MultipleChoiceQuestion extends QuestionUnit {

    private ArrayList<String> questionContent;

    public MultipleChoiceQuestion() {
        this(null, null);
    }

    public MultipleChoiceQuestion(ArrayList<String> questionContent,
            AnswerUnit correctAnswer) {
        super(correctAnswer);
        this.questionContent = questionContent;
    }

    public ArrayList<String> getQuestionContent() {
        return this.questionContent;
    }
} 
```

如果我坚持它，该`questionContent`属性将保存为 blob。我知道我可以使用`ElementCollection`注释为我的 ArrayList 的内容创建单独的表。

我想知道这种行为（将作为属性的集合保存为 blob）是在 JPA 规范中的某处指定的，还是特定于 Hibernate 的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T20:35:31.620

我在 JPA 看到过这种行为，所以它不是特定于 Hibernate 的。问题是，由于您没有该属性的注释，并且它是基元的 ArrayList（因此没有 id）并且 ArrayList 是可序列化的，因此 JPA 引擎“理解”该属性应该我映射为 BLOB。显然，字符串的概念并不是真正的对象，因此，将字符串映射为 ORM 中的对象是没有意义的。我找到了一篇关于这个主题的非常好的[帖子。](http://jazzy.id.au/default/2008/03/24/jpa_2_0_new_features_part_1.html)

在[休眠规范](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html)的项目中-“ **2.2.2.5\. Non-annotated property defaults** ”（我知道，它不是 JPA。但是 Hibernate 遵循它）：

> 如果属性没有注释，则适用以下规则：
> 
> 否则，如果属性的类型是可序列化的，则将其映射为@Basic 在保存序列化版本中的对象的列中；

# git - 推送到远程存储库时出现 GIT 错误。权限问题

> ID：11957474
> 
> 赞同：0
> 
> 时间：2012-08-14T17:17:13.883
> 
> 标签：git

在裸存储库上，当我尝试将 GIT 更改从本地存储库推送到远程存储库时出现此错误：

```
c:\mockema>git push origin master
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 331 bytes, done.
Total 3 (delta 2), reused 0 (delta 0)
error: insufficient permission for adding an object to repository database ./objects
fatal: failed to write object
error: unpack failed: unpack-objects abnormal exit
To //Apps-raphael/em/MockEMA/mockema.git
 ! [remote rejected] master -> master (n/a (unpacker error))
error: failed to push some refs to '//Apps-raphael/em/MockEMA/mockema.git' 
```

但是，我登录服务器并进入远程存储库并尝试使用 CHMOD 更改（仅用于测试）权限为“ chmod -R 777 * ”

但权限仍保留为“drwxr-xr-x”。

试图在网上寻找一些帮助，大多数解决方案都表明使用 chmod 来更新权限。它似乎对我不起作用。我使用 chmod 不正确？

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:24:29.520

使用裸路径存在问题。`file`如果你在访问 windows 机器的 Linux 机器上执行它，你应该使用该协议来避免 Git 尝试建立硬链接。

要阻止 Git 尝试帮助您处理硬链接，请使用

```
file:///Apps-raphael/em/MockEMA/mockema.git 
```

或类似的东西。

# c# - MS Test Dictate Dialog Click事件c#

> ID：11957476
> 
> 赞同：0
> 
> 时间：2012-08-14T17:17:39.130
> 
> 标签：c#, automated-tests, mstest

我有一个看起来像这样的方法：

```
public void CloseInputTab()
    {
        if (MessageBox.Show("Are you sure you want to cancel? Any Unsaved changes will be lost", "Confirm Cancel", MessageBoxButtons.YesNo) == DialogResult.Yes)
        {
            //Do Stuff
        }
    } 
```

我正在编写两个自动化测试用例。1) 如果单击“确定”，则验证内容发生 2) 如果单击“取消”，则验证内容未发生

Visual Studio 测试工具中有没有办法为每个测试单击相应的按钮。

如果不是，我可以将代码复制到我可以使用的 Mocked 类中，但我不希望这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:23:52.560

如果您使用的是 WinForms，最好坚持[Model-View-Presenter 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter)。（[如何：对演示者进行单元测试](http://msdn.microsoft.com/en-us/library/ff648002.aspx)）

如果您使用的是 WPF，请考虑使用[Model-View-ViewModel 模式](http://en.wikipedia.org/wiki/Model_View_ViewModel)。它们都提供可测试性。

**更新**

下面是一个示例：[(MVP) Model View Presenter -](http://coding.infoconex.com/post/2010/01/16/%28MVP%29-Model-View-Presenter-Passive-View.aspx)带有消息框的被动视图。

# php - Magento：显示随机子类别

> ID：11957483
> 
> 赞同：1
> 
> 时间：2012-08-14T17:18:06.677
> 
> 标签：php, magento, random

我需要显示来自父类别的 4 个随机子类别。

我有以下代码，显示来自所需父类别（ID = 4）的所有子类别以及随机产品图像：list.phtml \app\design\frontend\MYTHEME\default\template\catalog\category

```
<?php 
```

// 迭代存储中的所有类别 foreach ($this->getChildCategories(4) as $_childCategory):

```
 // If category is Active
   if($_childCategory->getIsActive()):

       // Load the actual category object for this category
       $cur_category = Mage::getModel('catalog/category')->load($_childCategory->getId());

       // Load a random product from this category
       $products = Mage::getResourceModel('catalog/product_collection')->addCategoryFilter($cur_category)->addAttributeToSelect('small_image');
       $products->getSelect()->order(new Zend_Db_Expr('RAND()'))->limit(1);

       $products->load();

       // This a bit of a fudge - there's only one element in the collection
       $_product = null;
       foreach ( $products as $_product ) {}        
       ?>

       <div style="float: left; padding-right: 30px; text-align: center;">
           <div class="linkimage"><p><a href="<?php echo $this->getCategoryUrl($_childCategory)?>">

       <?php
       if(isset($_product)):
       ?>
       <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(135, 135); ?>" alt="<?php echo $_childCategory->getName()?>" title="<?php echo $_childCategory->getName()?>" />
       <?php
       endif;
       ?>
           </div>
           <?php echo $_childCategory->getName()?></a></p>
       </div>
       <?php
   endif; 
```

结束；?>

并在 navigation.php \app\code\local\Mage\Catalog\Block

```
public function getChildCategories($categoryId) //inserted for random subcategories on category page
    {
          $category = Mage::getModel('catalog/category');
          if($category->checkId($categoryId) === false) {
              return false;
          }
        $layer = Mage::getSingleton('catalog/layer');
        $category->load($categoryId);
        $layer->setCurrentCategory($category);
        /* @var $category Mage_Catalog_Model_Category */
        $collection = Mage::getModel('catalog/category')->getCollection();
        /* @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Collection */
        $collection->addAttributeToSelect('url_key')
            ->addAttributeToSelect('name')
            ->addAttributeToSelect('is_anchor')
            ->addAttributeToFilter('is_active', 1)
            ->addIdFilter($category->getChildren())
            ->joinUrlRewrite()
            ->load();

        //$productCollection = Mage::getResourceModel('catalog/product_collection');
        //$layer->prepareProductCollection($productCollection);
        //$productCollection->addCountToCategories($collection);
        return $collection;
    } 
```

如何将子类别限制为 4 并随机显示？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:22:45.463

要限制集合，您可以添加以下内容：

```
$collection->setPageSize(4); 
```

随机化您返回的记录，是一种可能性：

```
$collection->getSelect()
    ->order('rand()'); 
```

# java - PowerMockito Mocking whenNew 不生效

> ID：11957485
> 
> 赞同：6
> 
> 时间：2012-08-14T17:18:31.167
> 
> 标签：java, mockito, powermock

**描述：**

我似乎无法让我的存根或模拟在我正在测试的课程中产生影响。我正在尝试使用 whenNew 操作，以便可以模拟返回对象，然后使用返回值模拟对该对象的操作。

我想它是我想念但没有看到的一些简单的东西。

解决方案：最初我正在运行，`MockitoRunner.class`需要将其更改为`PowerMockRunner.class`. 下面的代码反映了解决方案。

类路径上的罐子：

*   powermock-mockito-1.4.11-full.jar
*   mockoito-all-1.9.0.jar
*   javassist-3.15.0-GA.jar
*   junit-4.8.2.jaf
*   objensis-1.2.jar
*   cglib-nodep-2.2.2.jar

**测试班**

```
 import org.junit.Test;
    import org.junit.runner.RunWith;
    import org.powermock.api.mockito.PowerMockito;
    import static org.powermock.api.mockito.PowerMockito.*;
    import org.powermock.core.classloader.annotations.PrepareForTest;
    import org.powermock.modules.junit4.PowerMockRunner;
    import static org.mockito.Matchers.any;
    @RunWith(PowerMockRunner.class)
    @PrepareForTest(ClassA.class)
    public class ClassATest {

        @Test
        public void test() throws Exception
        {
                String[] returnSomeValue = {"PowerMockTest"};
                String[] inputValue = {"Test1"};
                ClassB mockedClassB = mock(ClassB.class);
                whenNew( ClassB.class).withNoArguments().thenReturn( mockedClassB );
                when( mockedClassB, "getResult", any(String[].class) ).thenReturn(returnSomeValue);       

                IClassA classUnderTest = new ClassA();
                String[] expectedValue = classUnderTest.runTest(inputValue);      
        }

    } 
```

**A 类实现**

```
public class ClassA implements IClassA {

    @Override
    public String[] runTest(String[] inputValues) {

        String[] result;
        IClassB classB = new ClassB();
        result = classB.getResult(inputValues);

        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T19:48:00.023

由于您使用的是 powermock 功能（`@PrepareForTest`等`PowerMockito.whenNew`），因此您必须使用 PowerMockRunner 运行您的测试。

```
@RunWith(PowerMockRunner.class) 
```

因为 ClassB#geResult 不是私有的，你也可以简化你的代码并替换

```
when( mockedClassB, "getResult", any(String[].class) ).thenReturn(someValue); 
```

经过

```
when(mockedClassB.getResult(any(String[].class))).thenReturn(someValue); 
```

# c# - FormClosing后的计时器滴答声？

> ID：11957486
> 
> 赞同：3
> 
> 时间：2012-08-14T17:18:32.560
> 
> 标签：c#, winforms

在下面的代码中是否有**可能**在 myForm_FormClosing 之后调用 timer_Tick 。

如果有机会：是否足以在 myForm_FormClosing 中调用 timer.Stop() 以避免在 myForm_FormClosing 之后调用 timer_Tick？

```
using System;
using System.Windows.Forms;
using System.ComponentModel;

namespace Test
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MyForm());
        }
    }

    class MyForm : Form
    {
        private IContainer components;
        private Timer timer;

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        public MyForm()
        {
            components = new Container();
            timer = new Timer(components);

            timer.Interval = 50;
            timer.Tick += timer_Tick;
            timer.Enabled = true;

            FormClosing += myForm_FormClosing;
        }

        private void timer_Tick(object sender, EventArgs e)
        {
        }

        private void myForm_FormClosing(object sender, FormClosingEventArgs e)
        {
        }
    }
} 
```

**更新**：收到一些提示（感谢您的帮助）后，我基本上选择了以下代码来实现我想要的。请不要在调用 myForm_FormClosing 之后仍然可以调用 timer1_Tick！这个解决方案只是引入了一个标志（我称之为 doWork），它停止 timer1_Tick 内的代码在调用 myForm_FormClosing 之后执行。

```
using System;
using System.Windows.Forms;
using System.ComponentModel;

namespace Test
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MyForm());
        }
    }

    class MyForm : Form
    {
        private IContainer components;
        private Timer timer;
        private bool  doWork = true;

        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        public MyForm()
        {
            components = new Container();
            timer = new Timer(components);

            timer.Interval = 50;
            timer.Tick += timer_Tick;
            timer.Enabled = true;

            FormClosing += myForm_FormClosing;
        }

        private void timer_Tick(object sender, EventArgs e)
        {
            if (doWork)
            {
                //do the work
            }
        }

        private void myForm_FormClosing(object sender, FormClosingEventArgs e)
        {
            doWork = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:46:50.317

对的，这是可能的。根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)...

> 在窗体关闭之前发生。
> 
> 当表单关闭时，它会被释放，释放与表单相关的所有资源。

在 FormClosing 事件之后，计时器才会被释放。这是一个**非常人为的**例子，说明它是如何发生的。在调用 FormClosing 之后，您将看到在 Timer 滴答声上点击了调试器断点。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using System.Threading.Tasks;
using System.Threading;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private System.Windows.Forms.Timer _time = new System.Windows.Forms.Timer();
        private Task _t1 = null;
        private Task _t2 = null;
        private bool _closingFlag = false;
        public Form1()
        {
            InitializeComponent();

            _time.Interval = 50;
            _time.Tick += (s, e) => { 
                textBox1.Text = DateTime.Now.ToString();
                if (_closingFlag) Debugger.Break();
            };

            _time.Start();
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            _closingFlag = true;

            _t1 = Task.Factory.StartNew(() => { Thread.Sleep(1000); });
            _t2 = Task.Factory.StartNew(() => { Thread.Sleep(1000); });

            Task.WaitAll(_t1, _t2);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:20:09.213

如果您使用计时器`System.Windows.Forms.Timer`，则 UI 线程必须处于空闲状态才能处理来自计时器的滴答声，因此根据我的理解，这是不可能的。

如果您将计时器与自己的线程一起使用，则可能会发生这种情况`System.Timers.Timer`。在这种情况下，我们可以通过实现以下内容来避免您提到的内容：

```
class MyForm : Form
{
    private System.Timers.Timer timer;

    private Object justForLocking = new Object();
    private Boolean safeToProceed = true;

    [...]

    public MyForm()
    {
        components = new Container();
        timer = new System.Timers.Timer();

        timer.Interval = 50;
        timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
        timer.Start();

        FormClosing += myForm_FormClosing;
    }

    void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
         // In case that this code is being executed after
         // the method myForm_FormClosing has adquired the 
         // exclusive lock over our dummy resource,
         // the timer thread will wait until the resource if released.
         // Once is released, our control flag will be set to false
         // and the timer should just return and never execute again.
         lock(justForLocking)
         {
             if (safeToProceed)
             {
                 // Do whatever you want to do at this point
             }
         }
    }

    private void myForm_FormClosing(object sender, FormClosingEventArgs e)
    {
         lock(justForLocking)
         {
             safeToProceed = false;
         }
         timer.Stop();

         // Do something else
    }

    [...]
} 
```

This other [SO question](https://stackoverflow.com/questions/5694469/does-the-system-windows-forms-timer-run-on-a-different-thread-than-the-ui)有相关信息。

*编辑：*`System.Timers.Timer`上面的代码仅在使用 a 而不是 System.Windows.Forms.Timer时才有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:24:08.753

我不这么认为，但无论如何最好还是调用 timer.stop() 。如果您需要它，尽管您应该在 program.cs 中创建计时器对象

# c++ - iOS 开发中的 C++ 问题

> ID：11957488
> 
> 赞同：0
> 
> 时间：2012-08-14T17:18:43.290
> 
> 标签：c++, ios

所以我有一个 .h 文件，当我包含 iostream xcode 时说头文件不存在。但是让我生气的是，每当我选择 c++ 类的新文件进程时，默认的 .h 文件都带有一行代码，其中包括 iostream.h 所以当我将它导入到我的 Objective-C 代码时它失败了编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:22:14.347

如果您放入`#include <iostream>`一个`.h`文件，那么您必须确保只将该`.h`文件包含在 C++ 文件 (`.cpp`或`.cc`) 或 Objective-C++ 文件 ( `.mm`) 中。您收到编译器错误，因为您将`.h`文件包含在 C ( `.c`) 或 Objective-C ( `.m`) 文件中。

# javascript - 淘汰赛绑定复选框组

> ID：11957493
> 
> 赞同：1
> 
> 时间：2012-08-14T17:18:59.030
> 
> 标签：javascript, jquery, knockout.js

我有一个动态生成的复选框组，我需要将它绑定到我的淘汰视图模型。

这是我的复选框组代码：

```
<p>
    <label>Properties</label>
    <span class="formwrapper">
        @{
            foreach (ComboProperty item in this.Model.Properties)
            { 
                @:<input type="checkbox" name="chkproperty" value="@item.PropertyId" /> @item.Name<br/>

                }
        }
    </span>
</p> 
```

所以在这里我可以选择多个复选框，而不是单选按钮组。所以首先需要知道如何创建我的淘汰视图模型以管理多个值，然后如何绑定它。

我在提琴手中创建了这个以供参考。它有 json 集合。

[http://jsfiddle.net/SSHev/5/](http://jsfiddle.net/SSHev/5/)

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:58:02.397

我不确定您要完成什么，但我已经更新了您的 jsFiddle 以使其正常工作：

[http://jsfiddle.net/SSHev/11/](http://jsfiddle.net/SSHev/11/)

当您有多个相关的复选框时，您有一个多项选择输入。在 Knockout 中，这样的输入可以映射到值数组。正如您在我更新的小提琴中看到的那样，选中和取消选中这些框将从`self.properties`变量中插入或删除适当的值。这个变量是一个可观察的数组。

# ruby-on-rails - Rails - 模型关联似乎正在保存，但在 find() 期间未加载？

> ID：11957494
> 
> 赞同：0
> 
> 时间：2012-08-14T17:19:02.297
> 
> 标签：ruby-on-rails, ruby, activerecord, model

在一个模型中，我有这个：

```
class Game < ActiveRecord::Base
  has_one :turn

  attr_accessor :turn
  attr_accessible :turn

  default_scope :include => :turn

  def Game.new_game
    turn = Turn.create count: 1, phase: 'upkeep', player: 1
    game = Game.create turn: turn
    game
  end
end

class Turn < ActiveRecord::Base
  belongs_to :game
end 
```

后来，在控制器中，我有这个：

```
respond_with Game.find(params[:id]) 
```

但是由于某种原因，返回的游戏有一个`turn_id`that is`nil`并且没有关联的`turn`对象。

为什么关联没有正确保存，或者没有正确返回`find()`？

在我的迁移中，我认为我已经正确设置了关联：

```
create_table :games do |t|
   t.timestamps
end

def change
 create_table :turns do |t|
   t.string :phase
   t.integer :count

   t.references :game
   t.timestamps
 end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:17:00.477

你似乎搞砸了联想

根据对场景的理解，这就是我的想法。

关联应该像

```
class Game < ActiveRecord::Base
  has_one :turn

  #.....
end

class Turn < ActiveRecord::Base
  belongs_to :game
  #.....
end 
```

和像这样的迁移

```
create_table :games do |t|
  #add some columns
  t.timestamps
end

create_table :turns do |t|
  t.references :game
  #add some columns
  t.timestamps
end 
```

现在添加新游戏并转

```
 game = Game.create 
    turn = game.turn.create  count: 1, phase: 'upkeep', player: 1 
```

`game.tun.create``game_id = game.id`将使用和其他提供的 args自动创建转弯记录。

您的迁移问题是游戏指的是转，而不是应该相反。

在此处查找有关关联的更多信息 [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html) [http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:04:26.507

有些东西是颠倒的。

由于Turn 有belongs_to 语句，Turn 应该包含game_id，而不是相反。

因此，您无法访问 Game turn_id，因为该字段不存在。它将始终为零，如果您删除 has_one 语句，它将引发异常。

# c# - 如何使用 C# 在 Excel 中添加图表工作表

> ID：11957501
> 
> 赞同：6
> 
> 时间：2012-08-14T17:19:47.647
> 
> 标签：c#, excel

我已经创建了 sheet1 并在工作表中填充了一些数据，使用 sheet1 中的数据我想创建一个图表表并绘制数据

```
try
{
    app = new Excel.Application();
    app.Visible = true;
    workbook = app.Workbooks.Add(1);
    worksheet = (Excel.Worksheet)workbook.Sheets[1];

    PopulateDateInExcel(pathtologsfolder, startdate, enddate);
    // create a chart

    Excel.Range chartRange;
    object misValue = System.Reflection.Missing.Value;
    Excel.ChartObjects xlCharts = (Excel.ChartObjects)worksheet.ChartObjects(Type.Missing);
    Excel.ChartObject myChart = (Excel.ChartObject)workbook.Charts[2];
    Excel.Chart chartPage = myChart.Chart;
    chartRange = worksheet.get_Range("AN1", "AP6");
    chartPage.SetSourceData(chartRange, misValue);
    chartPage.ChartType = Excel.XlChartType.xl3DLine; 
}
catch (Exception e)
{
    //Console.Write("Error");
}
finally
{

} 
```

在此先感谢 Excel 自动化

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:14:55.040

试试这个（**未经测试**）

```
Excel.ChartObject myChart = (Excel.ChartObject)charts.Add(10, 70, 250, 250); 
```

代替

```
Excel.ChartObject myChart = (Excel.ChartObject)workbook.Charts[2]; 
```

然后创建图表后，使用此代码将其移动到图表表

```
chart.Location(XlChartLocation.xlLocationAsNewSheet, Type.Missing); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T15:22:44.837

这样做的方法是使用[Add 方法](https://docs.microsoft.com/en-us/office/vba/api/excel.charts.add)：

```
Excel.Workbook xlWorkbook;
Excel.Chart chartName = (Excel.Chart)xlWorkbook.Charts.Add(); 
```

诚然，至少在我的实验中，这会导致麻烦，因为它默认使用的数据集是相当随机的（Excel 魔术......）所以你可能需要在之后重新格式化它（删除和添加数据集等），但这就是方法去做吧。

编辑：

我应该注意到 Excel 支持文档似乎推荐了[Add2 方法](https://docs.microsoft.com/en-us/office/vba/api/excel.charts.add2)方法，但我没有成功使用它：

```
Excel.Workbook xlWorkbook;
Excel.Chart chartName = (Excel.Chart)xlWorkbook.Charts.Add2(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-27T10:17:59.650

```
Excel.Application oXL = new Excel.Application(); 
```

之后

`oXL.Run()`并见附件：

[![在此处输入图像描述](../Images/915b8e54437f2de93505ac4931f85c8a.png)](https://i.stack.imgur.com/wfeOf.png)

# android - getOrientation() Pitch 反映地平线

> ID：11957503
> 
> 赞同：1
> 
> 时间：2012-08-14T17:19:56.647
> 
> 标签：android, sensors, compass-geolocation, pitch

我注意到当我将手机放在地平线以下时，我得到 > -90。当我开始倾斜手机使其指向天空时，它会反射在 -90 左右，即 -88、-90、-88。当它从地面倾斜到天空时。

有谁之前经历过这个吗。（它似乎与 remapCoordinateSystem 无关）。（我之前已经评论过了）。当手机摄像头指向地面时，俯仰读数为零。当它指向天花板时，它也为零。

谢谢你的帮助。

```
 @Override
    public void onSensorChanged(SensorEvent event) {
        synchronized (MainActivity.this) { // TilteController
            switch (event.sensor.getType()) {
            case Sensor.TYPE_MAGNETIC_FIELD:
                mMagneticValues = event.values.clone();
                break;
            case Sensor.TYPE_ACCELEROMETER:
                mAccelerometerValues = event.values.clone();
                break;
            }

            if (mMagneticValues != null && mAccelerometerValues != null) {
                SensorManager.getRotationMatrix(R, null, mAccelerometerValues, mMagneticValues);

                Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
                int rotation = display.getRotation();

                switch (rotation)
                {
                case Configuration.ORIENTATION_LANDSCAPE:
                    SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_MINUS_Y, SensorManager.AXIS_MINUS_X, R);//shouldnt be the same R in and out
                case Configuration.ORIENTATION_PORTRAIT:
                    SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_Y, SensorManager.AXIS_X, R);//shouldnt be the same R in and out
                }

                float[] orientation = new float[3];
                SensorManager.getOrientation(R, orientation);

                mAzimuth = orientation[0];
                mPitch = orientation[1];
                mRoll = orientation[2];

                dirText.setText("Azimuth, Pitch, Roll || " + radStr(mAzimuth) +", "+ radStr(mPitch) +", "+ radStr(mRoll));

                glView.rotate((float)Math.toDegrees(mAzimuth),(float)Math.toDegrees(mPitch),(float)Math.toDegrees(mRoll));
                //glView.azimuth=(float)Math.toDegrees(smooth(mAzimuth));
                glView.pitch=(float)(Math.toDegrees(smooth(mPitch)));//-90 makes it cenetr
                //glView.roll=(float)Math.toDegrees(smooth(-mRoll));
                //Log.i("Azimuth, Pitch, Roll", mAzimuth+", "+mPitch+", "+mRoll);
            }
        }
    } 
```

* * *

我需要的一个临时解决方法是在调用获取方向之前旋转矩阵。

```
Matrix.rotateM(R, 0, 90, 0, 1, 0); 
```

无论您如何进行完全翻转，它都会遇到同样的问题。（这应该通过添加方位角来解决）但这不是一个出色的解决方案。

因此，如果其他人正在阅读本文并试图将地平线设为 0 度。之前旋转矩阵，而不是旋转显示器（我使用 OpenGL）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:17:18.003

最终将应用程序锁定在横向并应用以下内容

```
 SensorManager.getRotationMatrix(R, null, mAccelerometerValues, mMagneticValues);

    Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    int rotation = display.getRotation();

    SensorManager.remapCoordinateSystem(R, SensorManager.AXIS_X, SensorManager.AXIS_Z, R);//shouldnt be the same R in and out

    float[] orientation = new float[3];
    SensorManager.getOrientation(R, orientation); 
```

# java - 如何在 Java 程序中更改 Mac OS X 的“关于”屏幕？

> ID：11957504
> 
> 赞同：1
> 
> 时间：2012-08-14T17:19:59.707
> 
> 标签：java, macos

Mac OS X 为应用程序提供了一个“关于”屏幕。

![在此处输入图像描述](../Images/97aa7975dfa817538e79cb59fd6675f3.png)

![默认关于屏幕](../Images/ac229919836fda5dc53dcdc172e1304d.png)

但是如何更改显示的版本号、显示的图标并以编程方式添加一些文本？我不想要一个单独的 Mac 应用程序包槽，我想将任何东西保存在一个单一的多平台 Jar 文件中。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:10:31.640

做到这一点的方法是使用[OSXAdapter](http://developer.apple.com/library/mac/#/legacy/mac/library/samplecode/OSXAdapter)并调用它的`setAboutHandler(...)`方法来指向你的方法来弹出一个关于对话框。但显然这是现在的遗产。

# django-models - 过滤外键的可能选择

> ID：11957506
> 
> 赞同：0
> 
> 时间：2012-08-14T17:20:01.173
> 
> 标签：django-models, django-forms

欢迎，

我在限制与 ForeignKey 相关的选择方面遇到了一些问题。下面我附上我的代码片段（*models.py*）：

```
class Car(models.Model):
    name = models.CharField(max_length=50)
    ....

class Driver(models.Model):
    name = models.CharField(max_length=50)
    car = models.ForeignKey(Car)
    ....

class CarForm(ModelForm):
    class Meta:
        model = Car

class DriverForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super (DriverForm,self).__init__(*args, **kwargs)
        self.fileds['car'].queryset = Car.objects.filter(???_1_???)    
    class Meta:
        model = Driver 
```

谁能给我一些建议应该如何定义？？？*1*？？？仅将可用的 Car 对象限制为未分配给任何 Driver 的对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:51:27.533

首先，您可能需要考虑将`Car`and之间的关系更改`Driver`为 a[`OneToOneField`](https://docs.djangoproject.com/en/dev/ref/models/fields/#onetoonefield)而不是 a`ForeignKey`如果每个`Car`总是只能有一个`Driver`.

但是，如果您只想限制表单中的选择，您的查询集需要类似于：

```
from django.db.models import Count
self.fields['car'].queryset = Car.objects.annotate(num_drivers=Count('driver')).filter(num_drivers=0) 
```

# iphone - 如何在openGL中调整窗口大小

> ID：11957512
> 
> 赞同：0
> 
> 时间：2012-08-14T17:20:48.347
> 
> 标签：iphone, objective-c, opengl-es, scale, viewport

我正在用 OpenGL 制作游戏。我有一个使用 . 乘以变换矩阵的视口`glOrthof()`。我几乎完成了游戏，但我在最后一刻决定将所有内容缩小一点以提高知名度。我已经包含了一个图表，描述了我的屏幕当前是如何设置的（黑框）以及我希望如何缩放它（红框）。

![窗户](../Images/d9925759b8b001d48448412b44fb99bc.png)

给定黑匣子的宽度和高度，`x`以及`y`在图中，是否可以调整视口，或者进行某种矩阵乘法来增加窗口大小？

我不想真正缩放游戏，我只想增加窗口的大小（我猜这最终会缩放游戏，但我想保留相对比例）。

现在，这就是我设置视图的方式：

```
glViewport(0, 0, backingWidth, backingHeight);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrthof(-backingWidth/2.0, backingWidth/2.0, -backingHeight/2.0, backingHeight/2.0, -1.0f, 1.0f);

glMatrixMode(GL_MODELVIEW); 
```

其中`backingWidth`, 和`backingHeight`分别是黑盒的宽度和高度。

我对 OpenGL 还很陌生，因此感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:39:41.243

如果您想在相同的视口大小中看到更多区域，您可以增加 glOrthof 的值。

如果您将 glOrthof 的顶部/左侧/底部/右侧乘以两倍大，那么您将在每个方向上看到两倍，并且每个方向上的所有内容都将是原始大小的一半，因为您放置的量是原来的两倍内容转换为相同数量的像素。

您可以将 glOrthof 乘以您想要的任何比例因子。

==编辑==

抱歉，我注意到您只想将 X 向右缩放，而不是中心。在这种情况下，保持`left`属性不变，只需向`right`glOrthof 的值添加更多。

# node.js - 对象访问数据 - Nodejs

> ID：11957517
> 
> 赞同：0
> 
> 时间：2012-08-14T17:21:14.320
> 
> 标签：node.js

如何从以下代码（JSON 结构）访问位置属性并在 Nodejs 中分配值。

```
{ pos : { lon : 30, lat : 30 } } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:14:01.367

如果您在字符串变量中有 JSON，则可以使用

```
var json = JSON.parse(theString); 
```

然后通过

```
json.pos.lon; 
```

# jquery - Jcoverflip 自定义代码

> ID：11957527
> 
> 赞同：0
> 
> 时间：2012-08-14T17:21:56.340
> 
> 标签：jquery

我正在使用来自[http://it.post80s.com/jquery-auto-play-jcoverflip的 Jcoverflip (](http://it.post80s.com/jquery-auto-play-jcoverflip) [https://github.com/NewSignature/jcoverflip](https://github.com/NewSignature/jcoverflip) )的自定义代码。它解决了我遇到的一个问题，但是在实现它之后，我的轮播中的图像并没有像 jcoverflip.com 演示中看到的原始代码那样逐渐减小大小。中心图像左右的第 2、3 等图像大小相同。

下面是定制的 JS，我可以修改它以包括从中心向外减小第二、第三个元素的大小，即添加另一个适用于这些图像的名为“otherPicTwo”的变量？所有其他代码直接来自 jcoverflip 下载。

感谢您的帮助，我可以很好地修改代码，但很少从头开始编写 JS。

```
/*The center picture has 178px in width*/
var centerPic = 178;

/*Other pictures should have 118px in width*/
var otherPic = 118;

//You can adjust the following position params
var centerPos = 101; var spaceRightCenterLeft = 74;

/* Spaces between pictures/frames */
var spaceOther = 118;
jQuery( document ).ready( function(){

  jQuery( '#flip' ).jcoverflip({
         current: 2,
         time: 600, //animation transition period

         beforeCss: function( el, container, offset ){
            return [
              $.jcoverflip.animationElement( el, { left: ( container.width( )/2 - (centerPos/2+otherPic) -spaceRightCenterLeft - spaceOther*offset  )+'px', bottom: 0 }, { } ),
              $.jcoverflip.animationElement( el.find( 'img' ), { opacity: 0.65, width: otherPic +'px' }, {} )
            ];
          },

          afterCss: function( el, container, offset ){
            return [
              $.jcoverflip.animationElement( el, { left: ( container.width( )/2 + spaceRightCenterLeft +25 +  spaceOther*offset  )+'px', bottom: 0 }, { } ),
              $.jcoverflip.animationElement( el.find( 'img' ), { opacity: 0.65, width: otherPic +'px' }, {} )
            ];
          },

          currentCss: function( el, container ){
            return [
              $.jcoverflip.animationElement( el, { left: ( container.width( )/2 - centerPos )+'px', bottom: '-38px' }, { } ),
              $.jcoverflip.animationElement( el.find( 'img' ), { opacity: 1.0, width: centerPic +'px' }, { } )
            ];
          }  

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T11:55:48.517

看起来您并没有`li`每次都减小元素的宽度。这意味着它保持不变，就像您使用 width 作为变量一样`otherPic`。

下面的代码可能会对您有所帮助。

```
jQuery( document ).ready( function(){
var videoreelmove = true;
jQuery("#flip").hover(function() { videoreelmove = false;  }, function() {videoreelmove = true;  });
jQuery("#flipnav").hover(function() { videoreelmove = false;  }, function() {videoreelmove = true;  });
setInterval(function() {
    if(videoreelmove) {
    $('#flip').jcoverflip('next', '1', true);
    }
}, 5000);

jQuery( '#flip' ).jcoverflip({
    current: 2,
    time: 600, //animation transition period
    beforeCss: function( el, container, offset ){
    return [
    $.jcoverflip.animationElement( el, { left: ( container.width( )/2 - 250 - 130*offset -10*offset )+'px', top: '30px' }, { } ),
    $.jcoverflip.animationElement( el.find( 'img' ), { width: Math.max(0,130-20*offset*offset) + 'px' }, {} )
    ];
  },
  afterCss: function( el, container, offset ){
     return [
      $.jcoverflip.animationElement( el, { left: ( container.width( )/2 + 100 + 160*offset + 10*offset)+'px', top: '30px' }, { } ),
      $.jcoverflip.animationElement( el.find( 'img' ), { width: Math.max(0,130-20*offset*offset) + 'px' }, {} )
    ];
  },
  currentCss: function( el, container ){
  /*  jQuery('#flip>li.selected').removeClass('selected');
    el.addClass('selected');*/
    return [
      $.jcoverflip.animationElement( el, { left: ( container.width( )/2 - 90 )+'px', bottom: 0 }, { } ),
      $.jcoverflip.animationElement( el.find( 'img' ), { width: '180px' }, { } )
    ];
  },
  change: function(){ $('#flip li:first').appendTo('#flip'); }
});

jQuery('#scrollbar').slider({
  value: 50,
  stop: function(event, ui) {
    if(event.originalEvent) {
      var newVal = Math.round(ui.value/25);
      jQuery( '#flip' ).jcoverflip( 'current', newVal );
      jQuery('#scrollbar').slider('value', newVal*25);
    }
  }
});

 <!-- Navigation buttons-->
 $('.flipnext').click(function(){
     var i = $('#flip').jcoverflip('next');
     i.next();
});

$('.flipprev').click(function(){
     var i = $('#flip').jcoverflip('previous');
             i.next();

});
}); 
```

# php - 参数号无效。参数未定义

> ID：11957528
> 
> 赞同：0
> 
> 时间：2012-08-14T17:22:00.507
> 
> 标签：php, yii

更新2：

我在 /protected/components 中创建了一个新的 WebUser.php 组件，如下所示：

```
<?php
class WebUser extends CWebUser{
private $_model;

function getId(){
    $user = $this->loadUser(Yii::app()->user->id);
    return $user->id;
}

protected function loadUser($id=null){
    if($this->_model===null)
    {
        if($id!==null)
        {
            $this->_model=Users::model()->findByPk($id);
        }
        return $this->_model;
    }       
}
} 
```

我也在 main.php 中注册了该组件。上传更改后，我的应用程序仍然声明 WebUser.getId 未定义。

更新：
进行更改然后回滚后，我收到一个新错误：

```
Property "CWebUser.getId" is not defined. 
```

有问题的代码片段是：

```
$user = Users::model()->find('username=?', array(
Yii::app()->user->getId)); 
```

应该如何以及在哪里设置 getId 以引用 Users 模型中的 $id 字段？

我的 UserController 抛出以下 SQL 错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number:     
parameter was not defined. The SQL statement executed was: SELECT * FROM `users` `t` WHERE 
username=? LIMIT 1 
```

错误是由控制器的这个片段引起的：

```
public function actionProfile($id=''){        

        $user = Users::model()->find('username=?', array(Yii::app()->user->getId()));
        if(!$id){
            $id = $user->id;
            if(!$id)
            $this->redirect('login');
        }
        if( getUserSess('user_type') == 'Sitter') {
            $this->render('profile_detail', array('user_id' => $id ));
        } else {
            $this->render('petowner_profile_detail',array(
        'model'=>$this->loadModel($id),
    ));
        }
    } 
```

profile_detail 视图如下：

```
<?php
if(!$user_id){
    $user_id = getUserSess('id');
}
$this->widget('ext.UserProfile.BasicProfile',array('user_id'=>$user_id)); ?>
<?php //$this->widget('ext.UserProfile.UserServices',array('user_id'=>$user_id)); ?> 
```

petowner_profile_detail 视图如下：

```
<?php $this->widget('zii.widgets.CDetailView', array(
'data'=>$model,
'attributes'=>array(
    'username',
    'email',
    'phone',
    'fname',
    'lname',
    'address1',
    'address2',
    'city',
    'state',
    'zip',
    'is_year_old',
    'user_type',
//      'register_date',
//      'varified_date',
//      'is_premium',
//      'last_login',
),
)); ?> 
```

我该如何纠正他的 SQL 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:22:47.737

更新：

$user = Users::model()->find('username=:id', array(":id" => Yii::app()->user->id));

更新2：

Yii::app()->user->getId() 或 Yii::app()->user->id 不是 Yii::app()->user->getId

# javascript - 附加 HTML 转义文本：jQuery

> ID：11957529
> 
> 赞同：8
> 
> 时间：2012-08-14T17:22:01.240
> 
> 标签：javascript, jquery, html, dom, escaping

我习惯于使用 jQuery 的`.append()`方法将文本或 HTML 添加到预先存在的元素的末尾。我目前正在使用 jQuery`.text()`来转义可能包含 HTML 的字符串。不幸的是，似乎没有 jQuery 方法将方法的结果附加`.text()`到元素而不是替换其内容。

有没有办法将此转义文本附加而不是替换到元素？或者有没有更好的方法来转义包含 HTML 的字符串？

谢谢。

**- 编辑 -**

更多上下文：我正在动态构建一个 HTML 字符串，因此我需要能够以编程方式添加多个带有转义内容的元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-23T06:58:18.320

由于我尝试了很多方法，我认为以下方法是将文本添加到您想要的任何节点的最干净的方法。不需要股票标签，只有纯文本，这将有助于避免潜在的问题

```
$(document.createTextNode("SomePlainText")).appendTo(p); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T17:26:36.257

您可以创建一个虚拟元素来保存其结果，`.text()`然后可以将其附加到您的目标元素：

```
$('<div/>').text('your <span>html</span> string').appendTo(...); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:24:12.233

你可以使用

```
$(whatever).text($(whatever).text() + whatever_you_want_to_append); 
```

编辑我评论中的小提琴，试试这个：

```
for ( /* some looping parameters */ ) {
    $('<li></li>') // create an li
        .text(stringWithHtml) // pass it the text, as text not html
        .appendTo('#thisIsWhatINeed'); // append it where you want it
} 
```

[jsFiddle](http://jsfiddle.net/qtZ7u/4/)

# canvas - 仅使用类型和文字再现图像或形状

> ID：11957531
> 
> 赞同：1
> 
> 时间：2012-08-14T17:22:07.410
> 
> 标签：canvas, word

我的任务是构建一个应用程序，该应用程序将仅使用单词和类型来重新创建图像。对于最终结果可能是什么的一个非常粗略的例子 [http://fineartamerica.com/featured/manhattan-new-york-typographic-map-michael-tompsett.html](http://fineartamerica.com/featured/manhattan-new-york-typographic-map-michael-tompsett.html)

我的第一个问题是这样的应用程序可以完全使用 Canvas 在前端构建吗？

如果是这样，哪个画布库效果最好，Kinetic.js 还是 Easel.js？

是否有任何 CC javascript 库可能有助于实现某些功能？

如果不是 Canvas，还有哪些其他可能的前端解决方案可行？（无闪光灯、银光等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:35:23.237

是的，这在 Canvas 中是很有可能的。如果您不想使用插件，canvas 是一个不错的选择，但 SVG 也是一个不错的选择，因为不涉及性能问题，并且 SVG 已经有一些内置的事件处理程序可以帮助您。

我不会费心使用 Kinetic 或 Easel ，除非您非常愿意将它们用于您的项目。如果您不知道哪个更好，*那么您对他们的任何一个项目都不够满意*。首先了解更多关于它们的信息，但如果你计划未来的画布开发，我会鼓励你独自一人，这不仅仅是一个一次性的画布项目。

SVG 有类似的库，例如 Raphael。

制作一个可以渲染文本的画布或 SVG 应用程序，然后您可以调整大小、旋转和移动，这并不是特别难。然而，给出一堆单词和一个形状并让它自动完成，这完全是另一回事，并不是真正的画布问题，它更像是一个在任何平台上都是相同的通用拓扑程序，而不是实现起来微不足道。

# javascript - 将地理 WGS 84 转换为 Web Mercator 102100

> ID：11957538
> 
> 赞同：8
> 
> 时间：2012-08-14T17:22:39.283
> 
> 标签：javascript, arcgis, esri

我正在尝试将地理坐标系转换为 Esri Webmercator，但是当我进行转换时，结果 x 和 y 的值分别为 0000003232112222... 和 00000012665321...。这很奇怪，因为坐标不存在。

```
var positions = [];
positions.push(x, y);

var g = new esri.geometry.Point(positions);
g = esri.geometry.geographicToWebMercator(g);
x = g.x;
y = g.y; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-25T00:55:07.317

您应该尝试模块中的`geographicToWebMercator`方法`esri/geometry/webMercatorUtils`。请参阅详细[文档](http://localhost/arcgis_js_api/arcgis_js_api_v3/sdk/jsapi/esri.geometry.webmercatorutils-amd.html#geographictowebmercator)。

```
 //a point in GCS_WGS_1984(wkid is 4326)
        var point = new Point(-118.15, 33.80, new SpatialReference({
            wkid: 4326
        }));

        var pointWebMercator = webMercatorUtils.geographicToWebMercator(point);

        alert("the point in 102100 is ( " + pointWebMercator.x + "," + pointWebMercator.y + " )"); 
```

现场演示：

```
<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no" />
    <title>Converting geographic WGS 84 to Web Mercator 102100</title>
    <link rel="stylesheet" href="https://js.arcgis.com/3.20/esri/css/esri.css">
    <style>
        html,
        body,
        #map {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <script src="https://js.arcgis.com/3.20/"></script>
    <script>
        var map;

        require(["esri/map", "esri/geometry/Point", "esri/SpatialReference", "esri/geometry/webMercatorUtils", "dojo/domReady!"], function (Map, Point, SpatialReference, webMercatorUtils) {
            map = new Map("map", {
                basemap: "topo", //For full list of pre-defined basemaps, navigate to http://arcg.is/1JVo6Wd
                center: [-122.45, 37.75], // longitude, latitude
                zoom: 13
            });

            //a point in GCS_WGS_1984(wkid is 4326)
            var point = new Point(-118.15, 33.80, new SpatialReference({
                wkid: 4326
            }));

            var pointWebMercator = webMercatorUtils.geographicToWebMercator(point);

            alert("the point in 102100 is ( " + pointWebMercator.x + "," + pointWebMercator.y + " )");
        });
    </script>
</head>

<body>
    <div id="map"></div>
</body>

</html>
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T06:22:49.353

您实际上不必转换纬度/经度即可将点添加到 webmercator 中的底图。

您可以通过几种不同的方式直接使用纬度/经度创建点（API 将在内部进行从地理到 webmercator 的转换）。这从 3.3 版（2013 年 1 月）开始可用。

```
var point = new Point(-98, 38); // note that longitude(x) comes before the latitude(y).

// or as an array
var point = new Point([-98, 38]);

// or as an object
var point = new Point({latitude: 38, longitude: -98}); 
```

[https://developers.arcgis.com/javascript/3/jsapi/point-amd.html#point4](https://developers.arcgis.com/javascript/3/jsapi/point-amd.html#point4)

# python - python - 内存没有被归还给内核

> ID：11957539
> 
> 赞同：6
> 
> 时间：2012-08-14T17:22:41.147
> 
> 标签：python, memory-management, memory-leaks, python-2.7

我有一个非常简单的脚本，它分配内存，`dels`唯一引用一个相当大的对象，同时打印`heapy`和`pidstat`报告。运行脚本后，heapy 告诉我不应该使用太多内存，而 pidstat 告诉我相反：

```
from guppy import hpy
import time
import sys
import os

'''
1) print heapy and pidstat report after starting and before actually doing any work
2) allocate some memory in a simple 2d array
3) print heapy and pidstat report
4) del the d2 array (attempt at garbage collection)
5) print heapy and pidstat report
6) sleep so pidstat can continue to be run to check on memory
'''

def pidstat(msg):
    print '==============================='
    print msg
    os.system('pidstat -r -p %s' % os.getpid())
    print '+++++++++++++++++++++++++++++++'
    print hpy().heap()[0]
    print '==============================='

pidstat('before doing anything')
docs = []
for doc in range(0, 10000):
    docs.append([j for j in range(0, 1000)])

pidstat('after fetching all the docs into memory')
del docs

pidstat('after freeing the docs')
time.sleep(60) 
```

输出如下所示：

```
================================
在做任何事情之前
Linux 2.6.38-15-generic (hersheezy) 08/14/2012 _x86_64_ (4 CPU)

01:05:20 PM PID minflt/s majflt/s VSZ RSS %MEM 命令
01:05:20 PM 5360 0.44 0.00 44768 9180 0.11 蟒蛇
+++++++++++++++++++++++++++++++++++
一组 19760 个对象的分区。总大小 = 1591024 字节。
 索引计数 % 大小 % 累积 % 种类（类/类字典）
     0 19760 100 1591024 100 1591024 100 力量
================================
================================
将所有文档提取到内存后
Linux 2.6.38-15-generic (hersheezy) 08/14/2012 _x86_64_ (4 CPU)

01:05:21 PM PID minflt/s majflt/s VSZ RSS %MEM 命令
01:05:21 PM 5360 8.95 0.00 318656 279120 3.49 蟒蛇
+++++++++++++++++++++++++++++++++++
一组 7431665 个对象的分区。总大小 = 178359960 字节。
 索引计数 % 大小 % 累积 % 种类（类/类字典）
     0 7431665 100 178359960 100 178359960 100 整数
================================
================================
释放文档后
Linux 2.6.38-15-generic (hersheezy) 08/14/2012 _x86_64_ (4 CPU)

01:05:29 PM PID minflt/s majflt/s VSZ RSS %MEM 命令
01:05:29 PM 5360 40.23 0.00 499984 460480 5.77 蟒蛇
+++++++++++++++++++++++++++++++++++
一组 19599 个对象的分区。总大小 = 1582016 字节。
 索引计数 % 大小 % 累积 % 种类（类/类字典）
     0 19599 100 1582016 100 1582016 100 力量
================================

```

如何确保将内存返回给操作系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:29:12.063

内存在进程内可用于重用的`python`时间与将其释放到操作系统的时间可能有所不同。特别是，标准 Python 解释器 (CPython) 为特定类型的对象维护自己的池和空闲列表。它将重用这些池本身中的内存，但一旦使用就不会将其释放给操作系统。

有关更多详细信息，请参阅[此](http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm)内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:28:58.210

> 如何确保将内存返回给操作系统？

一般不会。Python 在“arenas”中分配内存，即使在解释器中删除了引用，它也会保留该内存区域以供以后使用。我认为在较新版本的 python 中有一种机制可以在它们完全为空的情况下取消声明竞技场。但是您无法控制对象的放置位置。

# php - mysql_fetch_array 返回重复数据

> ID：11957541
> 
> 赞同：7
> 
> 时间：2012-08-14T17:22:50.163
> 
> 标签：php, mysql

每次我运行 mysql_fetch_array 时，都会返回一个带有重复值的数组，**例如**

```
Array
(
    [0] => 1
    [row_id] => 1
    [1] => some text
    [first_field] => some text
    [2] => some text
    [second_field] => some text 
} 
```

但我只想要数组中的单个结果，我尝试过使用

```
mysql_fetch_array($data, MYSQL_ASSOC); 
```

但这没有什么区别。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T17:25:03.167

这是[`mysql_fetch_array()`](http://php.net/mysql_fetch_array). 如果您不想拥有“重复项”而只拥有关联数组，请[`mysql_fetch_assoc()`](http://php.net/mysql_fetch_assoc)改用。

例子：

```
while ($row = mysql_fetch_assoc($data)) { ... } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T18:36:42.507

mysql_fetch_array 以关联数组和数值数组的形式返回作为对查询执行的响应返回的结果集。要将结果集作为关联数组返回，您需要使用 mysql_fetch_assoc 函数。要将结果集作为数字数组返回，您需要使用 mysql_fetch_row 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:25:13.850

将 mysql_fetch_assoc() 用于关联数组，或 mysql_fetch_row 用于数值数组

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T17:26:38.607

`mysql_fetch_array()`返回一个包含关联键（查询指定的字段名称）和整数位置键（即 0 是第一个字段，1 是第二个等）的数组。这是为了方便通过任一方法访问数据。

如果你只想要命名键，你应该使用`mysql_fetch_assoc()` 或者更好，使用 mysqli 函数，因为这里的每个人都会抨击你使用旧的 mysql_* 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T17:25:13.290

从[手册](http://php.net/manual/en/function.mysql-fetch-array.php)：

> 返回与获取的行相对应的字符串数组，如果没有更多行，则返回 FALSE。**返回数组的类型取决于 result_type 的定义方式。通过使用 MYSQL_BOTH（默认），您将获得一个包含关联索引和数字索引的数组。**使用 MYSQL_ASSOC，你只能得到关联索引（因为 mysql_fetch_assoc() 有效），使用 MYSQL_NUM，你只能得到数字索引（因为 mysql_fetch_row() 有效）。

换句话说，由于 MYSQL_BOTH 是默认值，因此您可以同时返回。您可以指定 MYSQL_ASSOC 或 MYSQL_NUM 来获取关联数组或数值数组。您也可以使用[mysql_fetch_assoc()](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)代替，它只会返回一个关联数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-21T11:07:25.077

`mysqli_fetch_array($result, MYSQL_ASSOC)`正如上面建议的那样，这对我`mysql_fetch_assoc`有用，在 PHP5.5 中它现在已被弃用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-17T19:57:54.113

mysql_fetch_array() 返回索引数组和关联数组。然而 mysql_fetch_assoc() 只返回关联数组。

当 mysql_fetch_array 与 MYSQLI_NUM 参数一起使用时，只返回一个索引数组。示例：mysql_fetch_array($resultset,MYSQLI_NUM)

# mysql - 用多张桌子订购热门商品

> ID：11957543
> 
> 赞同：1
> 
> 时间：2012-08-14T17:23:14.040
> 
> 标签：mysql

我有一个产品列表 A，随着时间的推移，我可以在其中获得最受欢迎的产品。我还有一个产品清单 B。这个列表每天都会改变。

我要做的是显示列表B的所有产品，并与列表A的热门产品一起订购。例如：

清单 A 将包含：

```
banana
apple
banana
orange
apple
banana 
```

清单 B 将包含：

```
potato
rice
banana
bread
orange 
```

现在输出必须是：

```
banana
orange
potato
rice
bread 
```

如何使用单个 SQL 命令执行此操作？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:27:39.843

```
 SELECT B.Col1, CNT FROM LISTB B
    LEFT OUTER JOIN 
    (SELECT Col1, COUNT(*) CNT 
     FROM LISTA A GROUP BY Col1) A1 ON b.col1 = A1.col1
    ORDER BY CNT DESC 
```

检查这个 - [http://sqlfiddle.com/#!3/34f5f/1](http://sqlfiddle.com/#!3/34f5f/1)

# dependencies - AXIS2 的最低 JDK？

> ID：11957550
> 
> 赞同：1
> 
> 时间：2012-08-14T17:24:02.027
> 
> 标签：dependencies, axis2

我正在尝试将 AXIS2 添加到与 JDK 1.5 绑定的旧旧系统中。我收到如下错误：

```
 java.lang.NoClassDefFoundError: javax/xml/stream/XMLStreamException
       at org.apache.axis2.builder.SOAPBuilder.processDocument(SOAPBuilder.java:50)
       ... 
```

看起来很清楚，不是吗？所以我做了一些研究，这就是我发现的：

*   根据“系统要求”（http://axis.apache.org/axis2/java/core/docs/installationguide.html#requirements），AXIS2 应该可以使用 JDK 1.5。
*   但是，查看源代码，我看到许多对 XMLStreamException 的引用。此类直到 JDK 1.6 (http://docs.oracle.com/javase/6/docs/api/javax/xml/stream/XMLStreamException.html) 才可用。

我难住了。文档说它应该可以工作，但事实并非如此。我错过了什么吗？最新的 AXIS2 版本是否与 JDK 1.5 兼容？如果不是，是哪个版本？还是我完全脱离了剧本？

谢谢，直流

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:33:36.793

在 Java 6 之前，StAX 不是 JRE 的一部分。您仍然可以通过提供自己的 StaX 实现来使用它，请参阅[此问题](https://stackoverflow.com/questions/1319264/which-jar-file-has-javax-xml-stream)。

# javascript - 使用 Jasmine 测试 Marionette View 和 Handlebars 模板

> ID：11957553
> 
> 赞同：0
> 
> 时间：2012-08-14T17:24:09.127
> 
> 标签：javascript, backbone.js, jasmine, handlebars.js, marionette

我正在尝试测试主干应用程序。
当我需要测试一个简单的backbone.view 时，我没有问题。
如果我需要测试使用`Backbone.Marionette`（ItemView 或 CompositeView）制作的主干视图，`Handlebars template`我会收到以下消息：

```
NoTemplateError: Could not find template: 
function(context, options) {
    if (!compiled) {
      compiled = compile();
    }
    return compiled.call(this, context, options);
  }; 
```

关于的代码`function(context, options)`来自`handlebars-1.0.0.beta.6.js`.
知道如何修复代码吗？

这是我正在执行的测试：

```
describe("AppViewMarionette", function() {
    beforeEach(function(){
        this.view = new AppViewMarionette();

    });

    describe("Rendering", function () {

        it("returns the view object", function () {
            expect(this.view.render()).toEqual(this.view);
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:13:13.153

您需要更新 Marionette 的版本。v0.9.1 不支持直接分配给`template`设置的预编译模板。为此，您需要 v0.9.7 或更高版本。

如果您无法更新，则需要按照以下说明进行操作：[https ://github.com/derickbailey/backbone.marionette/wiki/Using-pre-compiled-templates](https://github.com/derickbailey/backbone.marionette/wiki/Using-pre-compiled-templates)

# android - 如何在 Eclipse 中创建新的 android 项目并在本地 git 存储库中共享？

> ID：11957554
> 
> 赞同：10
> 
> 时间：2012-08-14T17:24:10.250
> 
> 标签：android, eclipse, classpath, egit

我使用该向导在 Eclipse Juno 中使用 Android SDK 工具修订版 20.0.3 在构建 SDK 15 和最低要求的 SDK 15 中创建一个新的 Android 项目。这些文件是使用活动、清单等的示例代码生成的。我尝试了不同的模板（如 MasterDetail 或 BlankActivity with Tabs）在此过程中，有时会出现诸如 AndroidManifest.xml 或 activity_main.xml 重复 XML 元素等问题。所以我手动修复了这些问题（我认为这是向导的错误）。

现在，我想通过 EGIT “团队共享”该项目。所以我右键单击项目和“团队->共享项目->git”。此时，它要我选择一个存储库。我在 Eclipse 工作区之外创建了一个新的（并在创建后重新使用它）。（我还尝试在父目录中创建一个（即在工作区中，尽管 Eclipse 警告不要这样做）。

无论哪种方式，当共享操作完成时，库“Android Dependencies”的构建路径在工作区中指定的位置没有“android-support-v4.jar”。貌似在egit操作之后，项目目录好像已经移到了repository，但是.classpath文件并没有改变。

这是 egit 应该如何工作（在 git repo 中移动项目工作区并告诉 Eclipse 项目目录位于新位置）？是手动修复构建路径的唯一解决方法吗？

是否有不同的方法可以在 Eclipse 中创建新的 android 项目，然后将相关文件（即排除生成的 java 文件）放入本地 git 存储库，以便 Eclipse EGIT 工作？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-15T16:49:17.120

经过反复试验，我正在回答我自己的问题。

以下是步骤。

1.  通过向导创建 android 项目。
2.  修复任何 XML 错误（根据需要）以获得可构建的项目。
3.  右键单击项目和团队->共享项目->Git
4.  选择 Git 存储库（并在必要时创建）。

此时，Java Build Path 中的 Android Dependencies（一个动态类路径容器）会出错，因为 Git 已将文件移动到存储库。

1.  关闭项目（项目->关闭项目）
2.  重新打开项目（Project->Open Project） 现在，Android Dependencies 是正确的，因为它是动态的。我不知道 Eclipse 用于动态类路径容器的确切机制，但如果您阅读[Android 工具网站](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)，它将解释用于填充此容器的规则。
3.  清理项目。（项目->清理...）

重要的是不要尝试自己修复这些 Android 依赖项（例如删除它），因为那样当您开始构建 APK 时，您的 Android 项目可能会出现问题。

# c# - 反转字符串并得到错误

> ID：11957556
> 
> 赞同：0
> 
> 时间：2012-08-14T17:24:26.707
> 
> 标签：c#, linq

错误是

> 'string.String(char[])' 的最佳重载方法匹配有一些无效参数

我的代码：

```
string reverseValue = new string(
                      value.Select((c, index) => new { c, index })
                      .OrderByDescending(x => x.index).ToArray()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:26:56.213

```
char[] chars = value.ToCharArray();
Array.Reverse(chars);
new String(chars); 
```

或者（有点慢）

```
new String(value.Reverse().ToArray()); 
```

请注意，这不会处理 UTF32 代理对，也不会组合字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:26:04.450

您正在选择一个新对象，而不是字符。尝试这个：

```
string reverseValue = new string( 
                            value.Select((c, idx) => new { 
                                                       charVal = c,  
                                                       index = idx 
                                                     })
                                 .OrderByDescending(x => x.index)
                                 .Select(x => x.charVal)
                                 .ToArray()); 
```

假设这不仅仅是学术上的，我可以建议：

```
/// <summary>
/// Reverses a string
/// </summary>
public static string ReverseString(this string s)
{
    char[] arr = s.ToCharArray();
    Array.Reverse(arr);
    return new string(arr);
} 
```

用法：

```
string reverseValue = value.ReverseString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:26:36.400

您忘记选择字符：

```
string reverseValue = new string(
    value.Select((c, index) => new { c, index })
    .OrderByDescending(x => x.index)
    .Select(x => x.c)
    .ToArray()
); 
```

另请注意，这是一种非常低效的反转字符串的方法。您可以使用`Array.Reverse`或者如果您真的关心性能：

```
public static string Reverse(string input)
{
    var length = input.Length;
    var last = length - 1;
    var chars = input.ToCharArray();
    for (int i = 0; i < length / 2; i++)
    {
        var c = chars[i];
        chars[i] = chars[last - i];
        chars[last - i] = c;
    }
    return new string(chars);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T17:46:59.947

你为什么不做类似的事情：

```
 string r = new string( s.Reverse().ToArray() ) ; 
```

或（因为已经采用 Reverse() ）是这样的：

```
public static class StringHelpers
{
    public static string ToReverse( this string s )
    {
        char[] buf = new char[s.Length] ;
        int    i   = 0        ; 
        int    j   = s.Length ;
        while ( j > 0 )
        {
            buf[i++] = s[--j] ;
        }
        return new string(buf) ;           
    }

} 
```

它不是 LINQ，但我敢打赌在这种情况下它的性能比 LINQ 更好。

# c# - C# 中的 DTD 验证

> ID：11957574
> 
> 赞同：1
> 
> 时间：2012-08-14T17:25:30.627
> 
> 标签：c#, dtd

我有一个带有以下 DOCTYPE 的 XML 文件：

```
<!DOCTYPE localdtd PUBLIC "-//local host//local dtd - XML//EN" "localdtd.dtd"[]> 
```

我正在尝试使用以下代码针对驻留在我的根文件夹中的 localdtd.dtd 验证 XML

```
XmlDocument xml = new XmlDocument();

using (var xmlreader = XmlReader.Create(
                          new StringReader(xmlcontent), 
                          new XmlReaderSettings() 
                          { 
                             ProhibitDtd = false, ValidationType = ValidationType.DTD
                          }   ) )
{
            xml.Load(xmlreader); 
} 
```

我收到以下错误

找不到文件“C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\localdtd.dtd”。

我们可以指定 localdtd.dtd 文件的位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:55:45.003

这里：

> `<!DOCTYPE localdtd PUBLIC "-//local host//local dtd - XML//EN" "localdtd.dtd"[]>`

我相信您可以使用以下命令指定直接路径：

> `<!DOCTYPE localdtd PUBLIC "-//local host//local dtd - XML//EN" @"C:\MYLOCATION\localdtd.dtd"[]>`

或者尝试添加：

> XmlResolver.ResolveUri(@"C:\MYLOCATION\localdtd.dtd", null)

给你的`XmlReaderSettings`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T07:31:09.547

对于相对路径使用**〜**

```
<!DOCTYPE localdtd PUBLIC "-//local host//local dtd - XML//EN" "~/localdtd.dtd"[]> 
```

# cloudbees - 应用程序在本地运行，但在 cloudbees 上运行时返回 404

> ID：11957578
> 
> 赞同：0
> 
> 时间：2012-08-14T17:25:51.793
> 
> 标签：cloudbees

我的应用程序 ([URL]) 没有响应。我已经完成了您网站上推荐的步骤。

我已经将这场战争部署到我的本地 tc-server 并且一切都在那里工作（/people-server/rest/persons/）。我希望从 [URL]/people-server/rest/persons/ 中获取一些 xml。

请指教

梁达伦

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T21:14:05.143

您的应用实际上是在响应 http://[URL]/_stax/status，这意味着容器能够正确接收和处理请求。

由于您的应用程序为 /people-server/rest/persons 路径请求返回 404，这意味着容器当前没有加载任何 Servlet 来处理这些请求。您的应用程序可能没有在运行时配置 servlet 的主要原因有两个：

1.  您尚未使用 Servlet 正确配置您的应用程序以处理这些请求（这通常通过 WEB-INF/web.xml 中的 servlet 和 servlet-path 条目完成）
2.  在您的应用程序启动过程中发生错误，导致容器无法加载您配置的 Servlet。

要确定是否存在错误，您应该首先检查应用程序的日志。由于您没有发布任何错误，我假设您已经检查了日志并且没有发现任何错误。

这会给您留下没有配置任何 Servlet 来处理请求的情况。看到您的 URL 后，我注意到它的前缀是 /people-server，这看起来很像您可能在本地配置的 TC 服务器中使用的上下文路径前缀。由于部署在 CloudBees 上的应用程序在根上下文路径中运行，因此我尝试使用以下 URL 并看到它确实在响应：[URL]/rest/persons/

这意味着您确实配置了一个用于处理 /rest/persons/ 路径的 Servlet，这意味着您在本地环境中与部署环境中预期的 URL 略有不同。

如果您希望此 Servlet 在 /people-server 上可用，则需要更新 web.xml 以将此前缀用于 REST Servlet 使用的路径。或者，您可以将应用程序部署为带有 application.xml 的 EAR 文件，该文件将 /people-server 的上下文路径用于您的 webapp 存档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T23:00:11.957

作为一般规则 - 400 类型错误（例如，在这种情况下为 404）几乎**总是**表明应用程序存在问题- 并且通常与路径错误和映射有关。

500 类型错误意味着应用程序中存在未经处理的错误，这是按照：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

它们的一些原因可能是如果应用程序启动缓慢，可能会在短时间内出现一些错误，如果应用程序（它的所有实例）非常非常慢（太慢），则会出现 504。

如果发生持续的 502，这可能表明在某些情况下存在平台问题（即请求未到达您的应用程序）。

您经常会在您的应用程序日志中看到错误（bees app:tail 将对此进行流式传输 - 或使用控制台）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T09:12:47.077

如果您的应用程序使用 JAX-RS 在 jboss（“JavaEE 6 Web 配置文件”）容器上提供剩余内容，则需要启用容器对此功能的支持。只需将此 servlet 声明添加到您的 web.xml

```
<servlet>
    <servlet-name>jax-rs</servlet-name>
    <servlet-class>javax.ws.rs.core.Application</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jax-rs</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

您的 IDE 可能会警告 javax.ws.rs.core.Application 不是 servlet，这确实是来自 JAX-RS API 的一个奇怪的细节，但这是要使用的正确类。

# version-control - tfs build 不会将最新的配置文件复制到放置文件夹

> ID：11957584
> 
> 赞同：1
> 
> 时间：2012-08-14T17:26:19.517
> 
> 标签：version-control, tfs, tfsbuild

我的主解决方案中的不同项目中有几个配置文件设置为“**如果更新则复制**”，即 tfs 构建在每个构建中都没有获得最新的。

我目前将构建配置选项“ **Clean Workspace** ”设置为“ **All** ”。我认为它会从 TFS 复制最新文件，但事实并非如此。它正在获取以前的版本。

此外，我本地机器上的构建文件夹反映了来自 TFS 的最新文件。有没有我在某处缺少的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T11:48:36.003

我设法找到了问题，它与 TFS 没有任何关系。在我的解决方案中的不同项目中，我有同一个配置文件的多个版本。

为了纠正这个问题，我在解决方案级别添加了一个配置文件，并将其作为链接文件添加到我需要的所有项目中。

[如何共享 App.config？](https://stackoverflow.com/questions/426245/how-to-share-app-config)

# mercurial - 如何使用 PyCharm 克隆本地存储库

> ID：11957588
> 
> 赞同：2
> 
> 时间：2012-08-14T17:26:35.663
> 
> 标签：mercurial, pycharm

我目前正在使用 PyCharm，但发现无法从本地 Mercurial 存储库中签出或克隆。

在`Clone Mercurial Repository`对话框中，您可以放置​​一个要从中克隆的 URL，并且可以与 HTTP URL 一起使用，但我对如何从本地存储库执行此操作一无所知。

我试过把`file://`绝对路径放在前面，但 PyCharm 一直告诉我在那里找不到存储库，所以我必须打开控制台、克隆、设置项目等。

必须有一种方法，我使用过的所有其他 IDE 都允许这样做

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:18:29.057

这个对我有用：![Mercurial 结帐对话框](../Images/66a38d0d531c66bc761d6aedfe7fc723.png)

它不需要“file://”，只需输入路径即可。您使用的是 Windows 还是 Linux/Mac？

也许，您使用“tilda”符号 (~) 作为主目录？此对话框不理解 tildas。

另请注意，您必须指定 Mercurial 根目录的路径，而不是“.hg”目录本身。

请分享您的路径，以便我们可以看到，那里可能会被错误地对待。

# html - 动态拆分 3 个 div

> ID：11957591
> 
> 赞同：0
> 
> 时间：2012-08-14T17:26:40.560
> 
> 标签：html, dynamic, split

我需要三个 div 来根据它们的显示属性动态分割容器的空间。如果所有三个都显示，那么用户应该看到三个等分的 div（1/3、1/3、1/3）。如果只显示两个，那么用户应该看到 1/2 和 1/2。如果只有一个可见，那么它应该填满所有容器空间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-28T00:31:05.637

你可以使用jquery

```
<html>
<head>
    <title>equal div</title>
    <script type="text/javascript" src="jquery.js"></script>
    <style type="text/css">
        body{margin: 0; padding: 0;}
        #container{width: 100%, height: 100%;background: #666;}
        #container div{ float: left; border: 1px solid #000; margin: -1px; background: red}
    </style>
    <script type="text/javascript">
    $().ready(function(){
        var c = $('#container').children('div').length;
        $('#container').children().css('width', 100/c+'%');
    });
    </script>
</head>
<body>
    <div id="container">
        <div>1</div>
        <div>2</div>
        <div>3</div>
    </div>
</body> 
```

希望能帮助到你。

# joomla - 移动到服务器后 Joomla 空白

> ID：11957593
> 
> 赞同：2
> 
> 时间：2012-08-14T17:26:43.557
> 
> 标签：joomla

我刚刚将一个 Joomla 网站从一台服务器迁移到另一台服务器，复制了所有文件，导入了 db 并更改了 configuration.php 文件中的 db 参数。但是现在 Joomla 站点只显示一个空白页面（不仅仅是管理页面，还有首页！）。所有文件都存在，并且导入到数据库是成功的。

这是地址：[http ://astrorama.nl/joomla](http://astrorama.nl/joomla)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:43:37.447

这可能是由于执行代码时出现 PHP 或网络服务器错误。您可能想查看您的虚拟主机是否提供错误日志以供查看。通常这些“死机白屏”是由于已上传文件的权限或所有权问题，但出于验证目的，请检查（通常是[Apache](http://httpd.apache.org/)）错误日志。

# python - 带有日期时间的 MongoDB / Pymongo 查询

> ID：11957595
> 
> 赞同：14
> 
> 时间：2012-08-14T17:26:52.463
> 
> 标签：python, mongodb, datetime, pymongo

我正在尝试检索通过 pymongo 插入 mongodb 的数据。

我的插入代码如下（通过正则表达式解析后）

```
if connection is not None:
    db.model.insert({"time": datetime.datetime(int(int3), int(int1),
                                               int(int2), int(int4),
                                               int(int5), int(int6),
                                               int(int7))}) 
```

然后我在 shell 中输入了两个数据点。

```
>>> start = datetime.datetime(2012, 2, 2, 6, 35, 6, 764)
>>> end = datetime.datetime(2012, 2, 2, 6, 55, 3, 381) 
```

然后我尝试查询这两个数据点之间的数据范围并收到返回的内容。

```
>>> db.wing_model.find({'time': {'$gte': start, '$lt': end}})
<pymongo.cursor.Cursor object at 0x0301CFD0>
>>> db.wing_model.find({'time': {'$gte': start, '$lt': end}})
<pymongo.cursor.Cursor object at 0x0301C110> 
```

数据如下所列。

```
[02/02/2012 06:32:07.334][INFO]
[02/02/2012 06:32:07.334][INFO]
[02/02/2012 06:32:07.334][INFO]
[02/02/2012 06:32:13.711][INFO]
[02/02/2012 06:32:13.711][INFO]
[02/02/2012 06:32:13.711][INFO]
[02/02/2012 06:32:22.473][INFO]
[02/02/2012 06:32:22.473][INFO]
[02/02/2012 06:32:22.473][INFO]
[02/02/2012 06:35:06.764][INFO]
[02/02/2012 06:35:06.765][INFO]
[02/02/2012 06:35:06.765][INFO]
[02/02/2012 06:54:52.008][INFO]
[02/02/2012 06:54:52.008][INFO]
[02/02/2012 06:54:52.008][INFO]
[02/02/2012 06:54:59.512][INFO]
[02/02/2012 06:54:59.512][INFO]
[02/02/2012 06:54:59.512][INFO]
[02/02/2012 06:55:03.381][INFO]
[02/02/2012 06:55:03.381][INFO]
[02/02/2012 06:55:03.381][INFO]
[02/02/2012 06:55:06.142][INFO]
[02/02/2012 06:55:06.142][INFO]
[02/02/2012 06:55:06.142][INFO]
[02/02/2012 06:55:09.652][INFO]
[02/02/2012 06:55:09.652][INFO]
[02/02/2012 06:55:09.652][INFO]
[02/02/2012 06:55:13.396][INFO]
[02/02/2012 06:55:13.396][INFO] 
```

如何让我的查询返回“开始”和“结束”数据之间的所有内容？

另外，我如何以可理解的形式收到此信息？

最后，为什么同一个查询返回不同的游标对象位置？

谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-14T17:38:03.753

重复现有的基本教程文档：

```
start = datetime.datetime(2012, 2, 2, 6, 35, 6, 764)
end = datetime.datetime(2012, 2, 2, 6, 55, 3, 381)

for doc in db.wing_model.find({'time': {'$gte': start, '$lt': end}}):
    print doc 
```

> 最后，为什么同一个查询返回不同的游标对象位置？

哪里应该这样？

您会看到两个不同的游标实例，它们可能会返回相同的结果集 - 或者？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-01-11T19:15:46.317

```
@staticmethod
def _get_results_to_json(data):
    """Get documents from a MongoDB search result.
    Transforms MongoDB BSON documents into JSON serializable documents.
    This process converts the ObjectIds into hexadecimal strings.
    Parameters
    ----------
    data : `~pymongo.cursor.Cursor`
        A MongoDB search result.
    Returns
    -------
    |list| of |dict|
        A list of JSON serializable documents.
    """
    if isinstance(data, Cursor):
        data = list(data)

    if isinstance(data, list):
        for doc in data:
            doc['_id'] = str(doc['_id'])
    elif isinstance(data, dict):
        data['_id'] = str(data['_id'])

    return data

_get_results_to_json(db.wing_model.find({'time': {'$gte': start, '$lt': end}})) 
```

# android - WCF、WIF、Android 和 iOS

> ID：11957602
> 
> 赞同：1
> 
> 时间：2012-08-14T17:27:08.077
> 
> 标签：android, ios, wcf, wif

我有一个 MVC 应用程序，我想将它的至少一小部分移植到移动应用程序（首先是 android）。我的第一个目标是尝试弄清楚如何对用户进行身份验证。

似乎基于表单的身份验证使用 cookie 并且移动应用程序无法使用？最终确认将不胜感激。

但似乎您可以使用 WCF 服务进行某种形式的身份验证来创建令牌。现在我发现很多网站都在讨论如何创建和保护服务端点，但没有一个真正讨论令牌生成。

然后我偶然发现了 WIF 和 usersecuritytoken，这似乎是我想要完成的。

因此，如果有人可以确认这是我需要寻找的地方，那么我实际上可以回到编码而不是阅读，我将不胜感激。

我看到这个工作的方式是：

1.  安全的 WCF 服务。
2.  它使用 System.IdentityModel 为有效用户生成令牌并将其传递回移动应用程序。
3.  然后应用程序在任何时候调用需要特权的服务时传递令牌。例如更新用户的个人资料。

这是它应该如何工作的吗？如果不能，请给我举一个例子，说明它是如何工作的。

另一个问题，看看 WIF 网站，它似乎提供了很多令牌类型，android 和 iOS 的首选类型是什么？

**更新**正如它所指出的，如果我提供更多的上下文会很有帮助。原始网站是一个 MVC3 网络应用程序。

我正在尝试使用单点触控为一些后端管理功能编写应用程序。

WCF 对于跨平台来说似乎是一个糟糕的解决方案，而一个名为 ServiceStack 的包是我现在倾向于用于我的 Web 服务的包。ServiceStack 有自己的身份验证模块，但它不与 .net 成员提供程序接口，这是一个问题，因为 Web 应用程序是使用成员提供程序设计的。

这点我得想多了。让一个 android 或 iphone 应用程序通过某种形式的 Web 服务安全地向 .net 会员提供者进行身份验证并不是那么复杂。

提前谢谢你，克里斯

# jquery - 您将如何在 Jquery 和 Coffeescript 中迭代选择元素的选项？

> ID：11957607
> 
> 赞同：2
> 
> 时间：2012-08-14T17:27:44.320
> 
> 标签：jquery, coffeescript

我基本上需要将一个选择元素转换为一组隐藏字段以与 Rails 应用程序通信，因此需要遍历每个元素，我只能找出如何遍历数组，我可能在这里遗漏了一些愚蠢的东西，但我知道谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T17:30:48.797

jQuery

```
$("select option").each(function(i, option){
  # do your stuff
}); 
```

咖啡脚本

```
for option in $("select option")
  # do your stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T17:29:30.473

像这样迭代，

带选择 ID

```
$('#selectId option').each(function(){

}); 
```

与选择类

```
$('.selectclass option').each(function(){

}); 
```

对于所有选择，无论 id 和 class

```
$('select option').each(function(){

}); 
```

# jquery - 淘汰js，使用jquery更改后使用订阅。

> ID：11957608
> 
> 赞同：0
> 
> 时间：2012-08-14T17:27:44.913
> 
> 标签：jquery, knockout.js, knockout-2.0

当我们使用 jquery 更改某些内容时，有没有办法激活订阅？

例如：

```
var MyModel = function (){
 var self = this;
 this.ImageUrl= ko.observable("Image.jgp");
}

var Model = new MyModel (); 
ko.applyBindings(Model);
Model.ImageUrl.subscribe(function (NewValue)
{
console.log(NewValue);
})

<img data-bind:"attr{src: ImageUrl}" id ="image1" src = "" alt= "new image"/> 
```

我正在使用 jquery 来更改 src：

```
$("#button1").click(function(){
$("#image1").attr("src","image2.jpg");
}) 
```

这是一个小例子，我不确定这是否是最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:35:40.333

`attr`绑定是一种单向绑定，因此它不会对元素的更改做出反应（不处理任何事件）。

Knockout 确实包含两个调用的辅助函数`ko.dataFor`，`ko.contextFor`它们可以在给定 DOM 元素的情况下为您提供当前数据/上下文。以下是我们拥有的文档：http: [//knockoutjs.com/documentation/unobtrusive-event-handling.html](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)。

所以，基本上，如果你想通过 jQuery 附加你的事件处理程序，那么你会想用它`ko.dataFor`来获取你的数据，然后`ImageUrl`直接更新你的 observable。

这是一个示例：http: [//jsfiddle.net/rniemeyer/gbruu/](http://jsfiddle.net/rniemeyer/gbruu/)

# python - 您可以在不同的功能中使用相同的 xlwt 工作簿实例吗？

> ID：11957609
> 
> 赞同：1
> 
> 时间：2012-08-14T17:27:49.390
> 
> 标签：python, excel, xls, xlwt

我必须编写一个非常烦人的脚本，它使用一个 excel 文件来更新另一个文件，但是因为您不能直接编辑 xls 文件，也不能插入行，所以我不得不即兴发挥。

现在我的问题是：使用 Python 的 xlwt 模块（使用 2.7x），当您创建工作簿并正在处理它时，如何写入在不同函数中创建的同一个工作表？我可以用它的变量名来回传递工作簿吗？如果是这样，我如何访问我制作的第一个工作表，工作簿 [0]？

我有多个函数需要与我正在制作的这个 xlwt xls 文件进行交互，所以我只想确保我可以将它传递给不同的函数。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:41:26.720

...是的

```
import xlwt
class MyWorkbook:
    ''' allow access to a workbooks sheets'''
    def __init__(self,*args,**kwargs):
        self.wb = xlwt.Workbook(*args,**kwargs)
        self.sheets = []
    def add_sheet(self,sheet_name):
        self.sheets.append(self.wb.add_sheet(sheet_name))
        return self.sheets[-1]
    def GetSheetByIndex(self,n):
        return self.sheets[n]
    def save(self,fname_or_stream):
        return self.wb.save(fname_or_stream)

def CreateWB():
    ''' return a MyWorkbook instance with 1 sheet'''
    m= MyWorkbook()
    m.add_sheet("first_sheet")
    return m
def ModifySheet0(mwb):
    '''uses instance of MyWorkbook and modifies sheet0'''
    s = mwb.GetSheetByIndex(0)
    s.write(0,0,"Hello World!")
def DoItAll()
    '''passing around MyWorkbook'''
    wb = CreateWB()
    ModifySheet0(wb)
    wb.save("somefile.xls") 
```

# facebook - 带有标题的图形 API 帖子无法在朋友源中显示标题

> ID：11957610
> 
> 赞同：0
> 
> 时间：2012-08-14T17:27:50.043
> 
> 标签：facebook, api, facebook-graph-api

帖子在原始时间线上显示带有标题，但在朋友提要中，使用链接的域而不是标题。这对我们来说是一个大问题——客户抱怨，他们希望在帖子的所有迭代中看到正确的标题。

复现步骤：

1) 登录脸书

2）去[http://developers.facebook.com/tools/console/](http://developers.facebook.com/tools/console/)

3）输入此代码（改编自示例代码）：

```
<fb:login-button scope="read_stream,publish_stream">
  Grant Permissions to make more examples work
</fb:login-button>
<button onclick="doPost()">Post to Stream</button>

<script>
window.doPost = function() {
  FB.api(
    '/me/feed',
    'post',
    { message: 'testing caption friend view',
      link:'http://xetra.tunegenie.com',caption:'caption' },
     Log.info.bind('/me/feed POST callback')
  );
};
</script> 
```

4）点击代码输入框下的“运行代码”按钮

5）点击“发布到流”按钮（您可能需要先点击按钮添加权限）

6）请注意，这篇文章在您登录的用户时间线上，标题文本代替了链接（如果不是，您可能需要单击“添加权限”按钮“）

7) 用该用户的朋友登录，注意这里没有使用标题文本，而是用所用链接的域代替。

预期：标题文本应携带到帖子的所有迭代中。

我认为这是一个 facebook 错误，但我无法在那里输入错误报告（也许您需要特殊权限？），因为看起来您应该能够按照此处所述：

[http://developers.facebook.com/blog/post/559/](http://developers.facebook.com/blog/post/559/)

任何信息、确认或解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:34:12.057

根据您的描述，这听起来绝对像是一个 FB 错误。您必须开始搜索错误才能创建错误。

只需开始在**错误搜索栏中输入文本** *（不是主要的顶部搜索）*，您就会在结果下拉菜单中看到“创建错误”选项 -

![](../Images/b5c91c791b268e33edf7843fe464353f.png)

# jsf - 如何在 modalpanel 中重新渲染组件？

> ID：11957611
> 
> 赞同：0
> 
> 时间：2012-08-14T17:27:56.580
> 
> 标签：jsf, richfaces, jsf-1.2, jboss-4.2.x, richfaces-modal

可能吗？如果是，我该怎么做？

我需要在执行操作`<h:outputText>`后重新渲染 a `<a4j:commandLink>`，两个组件都在模态面板内，而模态面板在我尝试过的 a 内：

```
<a4j:commandLink value="somevalue" id="someid" action="#{MyBean.myAction()}"
    reRender="outputtextid">
    <f:param name="paramid" value="paramvalue"/>
</a4j:commandLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:04:35.520

确保您`<h:outputText>`在包含 的表单之外，`<a4j:commandLink>`否则它将 outputText 的值与表单中的实际值绑定，从而导致页面中出现奇怪的行为。

```
<h:form>
    <a4j:commandLink value="somevalue" id="someid" action="#{MyBean.myAction()}"
        reRender="outputtextid">
        <f:param name="paramid" value="paramvalue"/>
    </a4j:commandLink>
</h:form>
<h:outputText value="#{MyBean.outputValue}" id="outputtextid" /> 
```

如果您必须拥有`<h:outputText>`表单内部，则应考虑使用`oncomplete`执行 JavaScript 代码的 commandLink 中的 tag 属性更新值。

如果您想向用户显示消息，可以使用`<h:messages>`或`<rich:messages>`标记组件，这将是比使用 outputText 更好的选择。

# c# - 加入包含参数字符串的“on” - EntityFramework

> ID：11957616
> 
> 赞同：0
> 
> 时间：2012-08-14T17:28:17.703
> 
> 标签：c#, sql, entity-framework, entity-framework-4

我有一个复杂的 sql 语句，我正在尝试将其转换为 EF，但我只剩下一个问题。

这是 SQL 中有问题的部分

```
inner join history_master h2
on h.taskid=h2.taskid and h2.file_no = 'REX223349' 
```

我正在 EF 中尝试，但我不知道如何将 file_no 作为参数传递。

我试过了：

```
.Join(context.History_master, h => new { h.h.h.taskid, h.h.h.file_no }, h2 => new { h2.taskid, h2.file_no.Where(fileNumber) }, (h, h2) => new { h, h2 }) 
//fileNumber is a string passed to the function 
```

我认为这会在 and 上执行连接`taskid`，`h2.file_no = 'REX223349'`但它给了我一个错误。

谁能在这里指出我正确的方向？如何将字符串传递给 EF，以便按照上述 SQL 语句执行连接？如果您需要更多详细信息或需要解释的内容，请告诉我。将这个问题用有意义的语言表达是相当困难的：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:35:58.693

尝试这样的事情：

```
var result = (from t in context.Task
    join h in context.History_mast on new (taskID = t.taskID, File_no = "REX223349") equals new (taskID = h.taskID, File_no = h.File_no)
    select new (t,h)); 
```

# php - Captcha Validation - Bootstrap 模板和 jQuery Ajax Webform

> ID：11957617
> 
> 赞同：0
> 
> 时间：2012-08-14T17:28:26.913
> 
> 标签：php, jquery, validation, twitter-bootstrap, captcha

我的问题是：如何使用 ajax 表单脚本实现验证码验证我正在使用： http: [//malsup.com/jquery/form/](http://malsup.com/jquery/form/)

但是，我愿意接受有关更好的脚本或 jquery 插件的建议。这是第 3 天，第一次使用 bootstrap 和 jquery。目标是有一个简单的联系表单，onSubmit 执行以下操作：验证字段和验证码，表单操作将数据发送到我自己的服务器上的 URL，vtiger 负责处理数据，然后完成一些花哨的 jQuery 转换，而重置自己。

问题：我可以做 ajax 花哨的重置东西或验证码验证，但不能两者兼而有之。对于 ajax 表单，我使用的是脚本： http: [//malsup.com/jquery/form/](http://malsup.com/jquery/form/)我有以下函数来处理表单：

```
$('#myForm').ajaxForm(function() {
  $('#myForm').hide(300).delay(800).show(400); 
  $('#myForm').resetForm();
  $('#myModal').modal('toggle');
}); 
```

这还不是一个完美平滑的过渡，但我仍在努力。我想避免重新验证，因为我发现它们中的大多数完全不可读。我什至会满足于一些简单的数学，比如：

```
<?php
# Set both random numbers you want to add
$randomNum = rand(0,9);
$randomNum2 = rand(0,9);
# Get the total.
$randomNumTotal = $randomNum + $randomNum2;
?> 
```

接着

```
<input type="text" name="captchaImage" size="6" value="<?php echo $randomNum; ?> + <?php echo $randomNum2; ?>" disabled="disabled" /><br />
<input type="text" name="math" id="math" size="6" maxlength="6" /> Please enter the correct result. 
```

并使用一些 jquery 来验证。我试过实现 2 或 3 个不同的验证码脚本。问题是我不知道如何将任何验证码内容与我正在使用的 ajax jquery 插件集成。

有什么建议么？

# mysql - MYSQL - 通用日志文件

> ID：11957618
> 
> 赞同：0
> 
> 时间：2012-08-14T17:28:27.513
> 
> 标签：mysql

这里有一种方法可以检查mysql是否已经有一个日志文件正在写入一般日志？

我正在尝试使用以下命令启动我的 sql： --general-log-file="" 以查看正在向服务器发送哪种查询，但该命令不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:37:57.043

检查[log_output](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_log_output) 如果值为 NONE，即使启用了日志，也不会写入日志条目。如果未启用日志，即使 log_output 的值不是 NONE，也不会发生日志记录。如果它不是 None 然后使用这个[file_name检查日志文件名](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_general_log_file)

# ios5 - 我如何为以编程方式创建的文本字段触发 textFieldDidEndEditing 函数

> ID：11957619
> 
> 赞同：1
> 
> 时间：2012-08-14T17:28:40.373
> 
> 标签：ios5, uitextfield, keyboard-events

以下是我正在编写的代码

```
UITextField *category =[[UITextField alloc] initWithFrame:CGRectMake(10, 90, subView.frame.size.width-15, 30)];
category.backgroundColor=[UIColor whiteColor];
category.placeholder = @"Category, Description, Model (optional)";
category.returnKeyType = UIReturnKeyNext;
// [category addTarget:self action:@selector(textFeild) forControlEvents:<#(UIControlEvents)#>] 
```

该语句应该是什么，以便我可以添加 textFieldDidEndEditing 控件事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:13:13.970

将委托设置`UITextField`为自己

```
category.delegate = self; 
```

确保创建`UITextField`实现的类`UITextFieldDelegate`

# perl - perl：模块间变量使用

> ID：11957621
> 
> 赞同：0
> 
> 时间：2012-08-14T17:28:44.920
> 
> 标签：perl, perl-module

我有一个`misc`带有变量的模块`$verbose`：

```
use strict;
use diagnostics;
package misc;
my $verbose = 1; 
```

和`mymod`使用的模块`misc`：

```
use strict;
use diagnostics;
use misc;
package mymod;
sub mysub ($) {
  ...
  ($misc::verbose > 0) and print "verbose!\n";
} 
```

这反过来又被`myprog`：

```
use strict;
use diagnostics;
use misc;
use mymod;
mymod::mysub("foo"); 
```

当我执行时`myprog`，我收到此警告：

```
Use of uninitialized value $misc::verbose in numeric gt (>) at mymod.pm line ... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:32:57.537

在`mymod.pm`你应该使用：

```
our $verbose = 1; 
```

代替：

```
my $verbose = 1; 
```

警告是因为`$misc::verbose`试图访问包中的*包变量* ，顺便说一下，它没有被声明。`$verbose``misc`

该[`my`](http://perldoc.perl.org/functions/my.html)函数创建一个词法范围的变量。在这种情况下，您需要使用该[`our`](http://perldoc.perl.org/functions/our.html)函数创建的包作用域变量。

请关注**[大信](https://stackoverflow.com/users/46395/daxim)**的[评论](https://stackoverflow.com/questions/11957621/perl-inter-module-variable-use#comment-15934371)。

# linq-to-sql - 仅对 linq 使用 Linq2Sql 关系

> ID：11957627
> 
> 赞同：0
> 
> 时间：2012-08-14T17:29:10.230
> 
> 标签：linq-to-sql, one-to-many

我在 Linq2Sql 中有两个表是一对多的关系。每个都通过集合或单个实例值相互引用。

我想确保我的最终用户仅将集合用于 linq 查询。我不希望他们能够将项目添加到集合和“SubmitChanges”中。

如何使用 Linq2Sql 将集合注册为集合，但还告诉它永远不要使用集合中的项目更新（仅关系，而不是属性/字段）数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:30:30.520

好吧，您可以在数据上下文上禁用更改跟踪。

[http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.objecttrackingenabled.aspx](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.objecttrackingenabled.aspx)

f ObjectTrackingEnabled 为假，DeferredLoadingEnabled 被忽略并视为假。在这种情况下，DataContext 是只读的。

# c++ - C++ 中继承（无虚拟性）的运行时成本？

> ID：11957632
> 
> 赞同：7
> 
> 时间：2012-08-14T17:29:29.443
> 
> 标签：c++, performance, optimization, inheritance

在使用 -O3 编译的 C++ 中，没有虚拟性的继承是否会在以下方面产生成本：

*   执行时间处理时间
*   记忆

如果答案是肯定的：为什么？

例如：MyClass1 和 MyClass2 在性能和内存方面是否相同？

![在此处输入图像描述](../Images/95a0263cfd08485eee17e62512236b44.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T17:32:46.400

> 执行时间处理时间

什么的？函数是静态解析的，所以函数调用是一样的。`MyClass1`的构造函数会调用基类的构造函数，其析构函数会调用基类的析构函数，所以构造和销毁可能会有一些开销。*也许*。一些编译器可能会优化调用。

> 记忆

这将是相同的，两者都只有一个 member `double`。理论上。取决于我猜的实现，因为它不是标准规定的，但最常见的是不会有内存开销。

**请注意**`MyClass1`，通过指针删除对象会`Derived`导致未定义的行为，因为没有`virtual`析构函数。

**注意 2**没有多态性的继承是代码异味。并不是说这是错误的，但在大多数情况下，构图更好。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-14T17:34:54.570

在内存空间方面，我猜你的 MyClass1 消耗更多，因为它需要跟踪所有类结构和关系。对于性能，我没有看到任何显着差异。

# python - 在 Python 中获取地球上某个位置的 J2000 XYZ 坐标

> ID：11957633
> 
> 赞同：2
> 
> 时间：2012-08-14T17:29:29.753
> 
> 标签：python, coordinate-transformation, astronomy, pyephem

编辑：刚刚发现我需要将地球上某个位置的纬度、经度和海拔转换为 J2000 坐标，与 ra/dec 或月球无关。非常遗憾。你的回答确实给了我很多见解。请参阅下面的编辑问题。

问题：如何将纬度、经度和海拔转换为 J2000 坐标 (XYZ)。ehem 中是否存在转换？我检查了文档，但找不到我需要的东西（或者由于我缺乏该领域的知识而可能忽略了一些东西）。谢谢

****** *** ** *** ** *** ** *** ** *** ******旧（无视）******* *** ** *** ** *** ** *** ** *** **********

 *****我在赤经 (RA) 和赤纬 (Dec) 中有月亮位置，我想将它们转换为 XYZ 坐标。是否有内置的 PyEphem 函数？另外，它背后的数学原理是什么？谢谢。

编辑：我正在使用 J2000 坐标系（我认为这是赤道的，这是我第一次使用天文学）。我有到月球的距离可用。ra/dec 值已经在 J​​2000（赤道）坐标中。

X 指向北方

Y 点西

Z指向天空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T02:40:50.450

**最佳答案：**

我刚刚注意到，在 2011 年 6 月，海军天文台发布了一个 Python 接口，用于连接强大的 NOVAS 参考软件，使用该软件执行最高精度的天文计算：

[http://aa.usno.navy.mil/software/novas/novas_py/novaspy_intro.php](http://aa.usno.navy.mil/software/novas/novas_py/novaspy_intro.php)

使用这个库，您可以获得您正在寻找的答案，其精度远高于 PyEphem 提供的精度：

```
from novas import compat as novas
jd_tt = novas.julian_date(2012, 9, 8, 12.00)
delta_t = 66.603  # from http://maia.usno.navy.mil/ser7/deltat.preds
lat = 42.3583     # positive is north
lon = -71.0603    # negative is west
observer = novas.make_observer_on_surface(lat, lon, 0, 0, 0)
print novas.geo_posvel(jd_tt, delta_t, observer) 
```

在我的机器上，这给出了答案：

((-3.5081406460494928e-06, 3.135277713623258e-05, 2.858239912567112e-05), (-0.00019753847060164693, -2.23299422712780555e-05, 72.48)555e-05, 72.48)

自己尝试一下，看看这是否能给你带来你需要的结果！

* * *

**较新的答案：**

答案似乎是“不”——令我惊讶的是，PyEphem 没有简单的方法来回答“在*x、y、z*坐标中，波士顿在时间*t*在哪里？”</ p>

这是一个惊喜，因为 PyEphem 背后的库“libastro”当然必须在内部进行计算，以便确定其他对象相对于观察者的位置。它似乎在两个地方这样做。在`parallax.c`它定义`ta_par()`which 只谈论外部的角度，但在它的内部你可以看到它临时计算观察者的*x、y、z*。你甚至可以看到`298.257`隐藏在其中的重要常数，它衡量地球的平坦程度，因为它不是一个完美的球体。

另一个地方是`earthsat.c`看起来与“libastro”的其余部分完全不同的代码库，因此它复制了一些逻辑。它的`EarthFlat`常数 of`298.25`不太精确，但做同样的工作。它的功能，`GetSitPosition()`实际上是暴露*x,y,z*坐标而不是隐藏它们。但是它被声明`static`了，所以没有办法从外部调用这个有用的函数！

所以目前，PyEphem 无法让您直接计算*x,y,z*。但它确实提供了一条重要的信息：当前的恒星时，你将（我认为）能够使用它来计算波士顿（或任何地方）按时间绕地球走了多远`t`，这对于弄清楚你的坐标。

我会看看我是否可以在 Python 中找到一个快速的解决方案，将 PyEphem 的小时角与一些明确的三角函数结合起来，为您提供答案。但是，目前还没有：PyEphem 并没有直接公开这些信息，这很可悲。我会把它放在未来版本的清单上！

* * *

**较早的答案，从问题是关于月球的*x,y,z位置开始：***

唉，PyEphem 没有内置函数来将业余天文学中使用的极坐标转换为 x/y/z 坐标，这将使您能够绘制出物体在地球周围空间中的分布情况。但是转换很容易自己完成：

```
import ephem
import math

m = ephem.Mars('2012/8/1')
print m.ra, m.dec

x = math.cos(m.dec) * math.cos(m.ra)
y = math.cos(m.dec) * math.sin(m.ra)
z = math.sin(m.dec)

print x, y, z
print 'sanity check: vector length =', math.sqrt(x*x + y*y + z*z) 
```

这个脚本的输出是：

```
12:58:51.20 -6:24:05.6
-0.961178016954 -0.252399543786 -0.111495695074
sanity check: vector length = 1.0 
```

我在这里使用的随机日期的火星位置是相当合理的值：RA 几乎比大圆的一半多一个小时（因为 12 小时正好是一半），以及将位置推向南一点的赤纬. 因此，我们得出的`x`,和 ：`y`是一个略微负数，因为 -6° 确实在赤道以南，并且和都是负数，因为绕 24 小时圆走 13 小时会使您处于负/负象限 a正常单位圆。`z``z``x``y`

请注意，虽然 J2000 有南北——所以我们可以如实说，稍微负`z`一点的方向是向南——它没有**东西**，因为在它下方转动的地球在各个方向不断地向东和向西摆动。相反，RA 从“阿瑞斯的第一点”开始测量，这是春分期间太阳所在的方向。so `x`and`y`不是东方或西方；它们是指向太阳系的坐标，位于固定轴上，该轴由地球在每个春天所处的方向定义。

我创建的这个`x` `y` `z`向量是一个“单位向量”——一个大小为 1.0 的小向量，正如我在脚本中验证的那样，以确保我的公式正确。如果您正在计算已知与地球距离的物体的坐标`x` `y`和坐标，那么您可以通过将三个中的每一个乘以到物体的距离来获得一个实数向量——其大小是距离，而不是 1 的分数。`z``x` `y``z`

这对你有帮助吗？从你的描述——以及你关于东西方的问题——我无法判断你是否想要 RA 和 dec 转换`x` `y` `z`，或者你是否真的想要转换方位角和高度（但无论哪种方式，数学都是相同的）。这看起来像：

```
x = math.cos(m.alt) * math.cos(m.az)
y = math.cos(m.alt) * math.sin(m.az)
z = math.sin(m.alt) 
```

你想用这些坐标完成什么？这可以帮助我们确保以有用的格式将它们提供给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:55:49.143

我建议您查看[PyEphem 文档](http://rhodesmill.org/pyephem/quick.html)以进行[坐标转换](http://rhodesmill.org/pyephem/quick.html#coordinate-conversion)。

基本上，PyEphem 只处理三个坐标系——赤道、黄道和银河——每个坐标系由两个角度和一个纪元（极坐标调整偏移）定义。

**根据您的坐标方案的外观，如果**您也有对象的距离，您应该能够使用三角函数来转换它。

**编辑：**您的“XYZ”坐标似乎是左手黄道坐标。

```
from ephem import Equatorial, Ecliptic, degree

def convert_equatorial_to_XYZ(ra, dec, dist=1.0, epoch='2000'):
    """
    Given
        ra     right ascension (in hours)
        dec    declination     (in degrees)
        dist   distance        (optional, defaults to 1.0)
        epoch  epoch           (optional, assumes J2000)
    Return
        degrees North, degrees West, distance
    """
    eq = Equatorial(ra, dec, epoch=epoch)
    ec = Ecliptic(eq)
    return ec.lat/degree, 360.0 - ec.lon/degree, dist 
```*****

# mysql - “NOT IN”值列表的 MySQL 变量格式

> ID：11957643
> 
> 赞同：81
> 
> 时间：2012-08-14T17:29:59.343
> 
> 标签：mysql, sql, in-clause

疯狂地尝试在类型查询中设置变量：

```
SET @idcamposexcluidos='817,803,495'; 
```

所以我可以在

```
WHERE id_campo not in (@idcamposexcluidos) 
```

我尝试以不同的格式定义变量，但没有运气，似乎没有找到上述的具体示例：

```
SET @idcamposexcluidos='(817,803,495)';
...
WHERE id_campo not in @idcamposexcluidos

SET @idcamposexcluidos=817,803,495; 
```

没有成功。它要么返回错误，要么忽略这些值。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-08-14T17:35:27.160

你不能使用这样的`IN`子句。它在您的子句中编译为**单个**字符串。`IN`但是一个`IN`子句需要**单独**的值。

```
WHERE id_campo not in (@idcamposexcluidos) 
```

编译为

```
WHERE id_campo not in ('817,803,495') 
```

但应该是

```
WHERE id_campo not in ('817','803','495') 
```

要克服这个问题，可以使用动态 SQL 或在 MySQL 中使用[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)：

```
SET @idcamposexcluidos='817,803,495';
...
WHERE FIND_IN_SET(id_campo, @idcamposexcluidos) = 0 
```

但是使用类似的功能`FIND_IN_SET()`不能使用索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T18:19:39.760

如果你使用 mysql > 5.1，你可以使用：

```
CREATE TYPE lista as (
    clave int4,
    valor int4
);

CREATE OR REPLACE FUNCTION test(IN vArray lista[])
...

   WHERE FIND_IN_SET(id_campo, vArray)
... 
```

在其他情况下，您可以使用一个技巧：

```
WHERE id_campo IN ( SELECT 817 as valor UNION ALL 
                SELECT 803 as valor UNION ALL
                    SELECT 495 as valor) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T17:56:49.747

通过使用`CONCAT()`管道分隔符（而不是逗号）和一些“逆向逻辑”，您可以在`NOT IN`列表中使用变量，但可以使用`NOT LIKE`!

例子：

```
SET @idcamposexcluidos = '|817|803|495|';

SELECT
    *
FROM
    your_table
WHERE
    @idcamposexcluidos NOT LIKE CONCAT('%|', id_campo, '|%'); 
```

这应该适用于字符串和数字列。

# jquery - 基于xml构建jstree菜单

> ID：11957646
> 
> 赞同：0
> 
> 时间：2012-08-14T17:30:15.183
> 
> 标签：jquery, jstree

我正在尝试基于 xml 文件构建 jstree menue。我的代码是这样的：

```
$("#div").jstree({  
         "xml_data" : {  
             "ajax" : {

             //"url": "jstree.xml" 
                 "url": "http://192.168.101.1/xml/jstree.xml"    
                 },  
             "xsl" : "nest"
               },        
         "plugins" : ["themes", "xml_data", "ui","types"] 
```

当文件是如上所述的本地文件后跟//时，它可以工作。如果我尝试通过 http 调用访问 xml 文件，它不起作用。有任何想法吗？我真的很喜欢通过 http 调用 xml 文件，因为该文件会一直在更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:09:49.087

首先确保`http://192.168.101.1/xml/jstree.xml`实际返回 xml 数据。此外，根据[Xml data plugin](http://www.jstree.com/documentation/xml_data)，`url`参数参数需要用引号引起来：

```
$("#div").jstree({  
         "xml_data" : {  
             "ajax" : {

             //"url": "jstree.xml" 
                 "url": "http://192.168.101.1/xml/jstree.xml"      
                 },  
             "xsl" : "nest"
               },        
         "plugins" : ["themes", "xml_data", "ui","types"] 
```

# sql - MSSQL 对一天或一天 范围的日期范围的最佳查询

> ID：11957656
> 
> 赞同：9
> 
> 时间：2012-08-14T17:30:58.417
> 
> 标签：sql, sql-server, datetime, range

我想找出对带有日期（无时间）的日期时间记录集进行查询的“最佳实践”方法是什么。

我使用了几个查询，这些查询从使用日期时间数据类型的记录集中返回基于日期范围的记录，这意味着需要使用中间范围检查每条记录。

查询示例为：

```
Select * 
FROM Usages 
where CreationDateTime between '1/1/2012' AND '1/2/2012 11:59:59' 
```

我知道 using`BETWEEN`是一种资源消耗，并且检查日期的日期时间数据类型总是会占用大量资源，但我想听听其他人在这种情况下使用（或将使用）什么。

我会得到任何类型的性能提升，将日期时间记录转换为日期，例如：

```
Select * 
FROM Usages 
where CONVERT(DATE,CreationDateTime) between '1/1/2012' AND '1/2/2012' 
```

或者可能做一个小于/大于的检查？

```
Select * 
FROM Usages 
where (CreationDateTime > '1/1/2012') 
    AND (CreationDateTime < '1/2/2012 11:59:59') 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T17:53:23.570

你认为你知道的东西是不正确的。

using`BETWEEN`或 DATETIME 数据类型都不是资源消耗。

如果您为该列编制索引，该列确实是 DATETIME 而不是 VARCHAR()，并且您不将该字段包装在函数中，那么一切都会变得又快又好。

也就是说，我会使用`>=`and`<`来代替。不是为了性能，而是逻辑正确。

```
WHERE
  myField >= '20120101'
  AND myField < '20120102' 
```

无论该字段是否包含小时、分钟，甚至（具有神话数据类型）皮秒，这都将起作用。

通过字段上的索引，它还将进行范围扫描。

你不会变得更快。不需要任何技巧或功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:01:22.207

关于日期有几个考虑因素。

首先，您要确保使用相关索引。一般来说，这意味着要避免列上的函数。这适用于日期以外的数据类型，但对于理解日期来说很普遍。因此，假设列已编入索引，从性能角度来看，CONVERT() 是一个坏主意。

其次，您要避免格式之间不必要的转换。因此，每一行都必须调用函数。相反，将常量字符串转换为日期/时间会在编译时发生一次。第一个效率较低。避免 CONVERT() 的另一个原因。但是，在许多查询中，其他处理（例如连接）比转换更耗时，因此这可能并不重要。

至于“介于”和签名操作之间的选择。更好的做法是使用“<”和“>”以及“>=”和“<=”。它使日期的逻辑更清晰，并且不会出现秒数精确到 3 毫秒的问题。

据我所知，在日期之间使用索引与使用其他类型的字段一样有效。但是，为了准确性和便携性，最好进行个别比较。

因此，首选第三个版本。

# jquery - 单击事件上的jQuery .on（）函数

> ID：11957660
> 
> 赞同：2
> 
> 时间：2012-08-14T17:31:19.980
> 
> 标签：jquery

我有一些由 jQuery 插入的 DIV。结构是这样的：

```
<div class="preview_images" id="preview_upload">
     <div class="image_box" id="img_box8793">
         <p>
            <img class="count_19" src="[...]">
            <br>
             <span class="del_img">löschen</span>
         </p>
     </div>
</div> 
```

在使用 live() 之前，我想使用 on() 函数。这是我的 jQuery 函数：

```
$('#preview_upload div p').on("click", "span", function () {
    alert('###');
    parent_div_id = $(this).parent().parent('div').attr('id');
    $(this).parent().parent('div').fadeOut('slow');
    $('#final_img_prev #' + parent_div_id).remove();
    del_val = $(this).attr('title');
    $('#customfields-tf-150-tf,#customfields-tf-16-tf, #customfields-tf-17-tf, #customfields-tf-18-tf, #customfields-tf-19-tf').each(function () {
        if ($(this).val() == del_val) {
            $(this).val('');
            var img_count = jQuery.cookie('img_count');
            new_img_count = parseInt(img_count) - 1;
            if (new_img_count > 0) {
                jQuery.cookie('img_count', '', {
                    expires: -1
                });
                jQuery.cookie('img_count', new_img_count, {
                    expires: 1
                });
                if (new_img_count < 4) {
                    new_file = '<input type="file" id="file1" name="file1">';
                    $('#uploadForm .file_box').html('');
                    $('#uploadForm .file_box').html(new_file);
                    $('#uploadForm').fadeIn();
                }
            }
            return false;
        }
    });
}); 
```

alert() 没有被解雇。

错误在哪里？

**编辑：**

这是您回答后的代码：

```
jQuery(function($){
   $(document).ready(function() {
      $('#preview_upload div p').on("click", "span", function(){
            alert('###');
      });
   });
)}; 
```

我正在使用 Jquery 1.7.2。Firebug 没有显示错误。不会触发 alert()。

也许是因为 DIV 及其内容是动态创建的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:40:38.950

使用时`on`，事件应该从元素的静态父元素之一委托，div`#preview_upload`是动态生成的，因此您应该选择另一个元素，如`body`or`document`对象来委托事件，试试这个：

```
$(document).on("click", "#preview_upload span", function(){
   // ..
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:35:44.010

将此代码包装在文档`ready`事件中，它工作正常

```
$(function(){

   $('#preview_upload div p').on("click", "span", function(){
       alert("working")   
      //your code

   });

}); 
```

工作样本：http: [//jsfiddle.net/HBunv/](http://jsfiddle.net/HBunv/)

如果这不起作用，请检查页面中的其他脚本错误。Firebug 控制台将有助于找出什么是脚本错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:38:03.037

我认为您要么拥有过时的 jQuery 版本（低于 1.7），要么在内容加载到 DOM 之前运行代码，这意味着您需要`$(document).ready(function()`.

您的代码在下面的示例中运行良好，并且警报正在触发！

请检查有效的[jsFiddle 示例](http://jsfiddle.net/rostovtsev/9cDnn/1/)。

# android - Android STDIO 重定向不起作用

> ID：11957665
> 
> 赞同：1
> 
> 时间：2012-08-14T17:32:10.230
> 
> 标签：android, android-emulator, android-ndk

android 系统设置 log.redirect-stdio 似乎对 ICS 设备没有任何影响。这对已经很痛苦的 C/C++ Native 代码调试来说是一个巨大的痛苦。

根据此链接 STDIO 重定向就像将系统属性 log.redirect-stdio 设置为 true 一样简单。

[http://developer.android.com/tools/debugging/debugging-log.html](http://developer.android.com/tools/debugging/debugging-log.html)

这确实适用于 ICS 之前的设备，但不适用于 ICS 上或过去的任何设备。谷歌 = 虫王！

谢谢，凯文

# javascript - 跨多个表单提交和页面更新持续存在的用户可修改列表的 Web 设计模式？

> ID：11957668
> 
> 赞同：1
> 
> 时间：2012-08-14T17:32:19.100
> 
> 标签：javascript, jquery, web-applications, bottle, beaker

我正在开发一个 Web 应用程序（bottle + beaker + jQuery），我希望用户有一个可以修改的项目列表，这些列表在各种表单提交和页面更新中持续存在。单击列表中的项目可查询数据库以获取有关该列表项目的信息，并且该信息可以由用户更新。我希望列表在查询/更新不同的列表项时保持不变。此外，为了方便用户，该列表允许“勾选”（或取消勾选）项目，例如在处理或查看项目时。

我已经研究了几种不同的方法来实现这一点（例如，更新页面上每个表单中的隐藏元素，然后使用会话管理在每次往返时更新服务器上的工作列表；每次使用 Ajax 更新会话变量列表中的项目被选中或成为“活动”列表元素），但它们看起来都不是非常令人满意或优雅。

我的问题是有处理这类事情的标准方法吗？当然，这对于类似的 Web 应用程序来说是相当普遍的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:12:01.787

对 stackoverflow.com 的进一步研究（这些链接很有帮助：

[如何在浏览器选项卡中区分会话？](https://stackoverflow.com/questions/368653/how-to-differ-sessions-in-browser-tabs)

[管理多个选项卡的 webapp 会话数据/控制器流](https://stackoverflow.com/questions/4479995/managing-webapp-session-data-controller-flow-for-multiple-tabs/4480310#4480310) ）

连同与同事的一些有益讨论，给出了一个应该适用于大多数现代浏览器的答案，即使用 HTML5 本地存储。由于原始问题中提到的列表仅与该特定用户会话相关，因此甚至没有理由将此信息传递给服务器。每次刷新页面时，使用[jStorage](http://www.jstorage.info/)之类的东西在本地保存列表，然后在返回时使用预定义的键再次检索它。唯一的技巧是如何为不同的浏览器选项卡或窗口维护不同的工作列表。您不能使用会话或 cookie 来执行此操作（这些由所有选项卡/窗口共享）；但是，您可以使用 javascript 设置（或使用，如果已设置）`window.name`. 这省去了在每次往返服务器时将选项卡或窗口 ID 作为 GET 变量传递的麻烦，因为您可以使用 window.name 作为存储本地列表/数据的键。

# java - 在 Openbravo 中同时运行两次的计划进程（使用 Quartz）

> ID：11957673
> 
> 赞同：8
> 
> 时间：2012-08-14T17:32:29.737
> 
> 标签：java, quartz-scheduler, openbravo

我不太确定这更多的是 Openbravo 问题还是 Quartz 问题，但我们有一些手动进程通过 Openbravo`ProcessRequest`对象（OB v2.50MP24）按计划运行，但似乎这些进程运行了两次，同时。Openbravo 为他们的调度扩展了 Quartz 平台。我试图通过确保我的流程类扩展此类来自行解决此问题：

```
import java.util.List;

import org.openbravo.dal.service.OBDal;
import org.openbravo.model.ad.ui.ProcessRequest;
import org.openbravo.scheduling.ProcessBundle;
import org.openbravo.service.db.DalBaseProcess;

public abstract class RBDDalProcess extends DalBaseProcess {

    @Override
    protected void doExecute(ProcessBundle bundle) throws Exception {
        org.quartz.Scheduler sched = org.openbravo.scheduling.OBScheduler
                .getInstance().getScheduler();
        int runCount = 0;
        synchronized (sched) {
            List<org.quartz.JobExecutionContext> currentlyExecutingJobs = (List<org.quartz.JobExecutionContext>) sched
                    .getCurrentlyExecutingJobs();
            for (org.quartz.JobExecutionContext jec : currentlyExecutingJobs) {
                ProcessRequest processRequest = OBDal.getInstance().get(
                        ProcessRequest.class, jec.getJobDetail().getName());
                if (processRequest == null)
                    continue;
                String processClass = processRequest.getProcess()
                        .getJavaClassName();
                if (bundle.getProcessClass().getCanonicalName()
                        .equals(processClass)) {
                    runCount++;
                }
            }
        }

        if (runCount > 1) {
            System.out.println("Process "
                    + bundle.getProcessClass().getSimpleName()
                    + " is already running. Cancelling.");
            return;
        }

        doRun(bundle);
    }

    protected abstract void doRun(ProcessBundle bundle);

} 
```

当我通过请求该进程同时立即运行两次来进行测试时，这工作得很好。其中之一取消了。但是，它不适用于预定的流程。我将 Sop 设置为在进程启动时记录日志，查看日志会显示输出的每一行两次，每一行一个接一个。

我有一个偷偷摸摸的怀疑，这是因为这些进程要么在两个完全不同的线程中运行，它们不知道彼此的进程，但是，我不知道如何验证我的怀疑，或者，如果我是正确的，应该怎么做去做吧。我已经验证`ProcessRequest`了数据库中存储的每个对象只有一个实例。

有没有其他人经历过这种情况，知道为什么他们可能会运行两次，或者知道我可以做些什么来防止他们同时运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T11:32:51.830

双重作业执行的最常见原因如下：

**编辑：**

> *   您的应用程序部署在集群环境中，并且您尚未将 Quartz 配置为在集群环境中运行。
> *   您的应用程序被多次部署。应用程序部署两次的情况很多，尤其是在 Tomcat 服务器中。因此，QuartzInitializerListener 被调用了两次并且 Jobs 被执行了两次。如果您使用 Tomcat 服务器并在 server.xml 中明确定义上下文，则应关闭自动应用程序部署或指定 deployIgnore。设置为 true 的 autoDeploy 和 server.xml 中存在的上下文元素都导致应用程序的两次部署。将 autoDeploy 设置为 false 或从 server.xml 中删除上下文元素。
> *   您的应用程序已重新部署，但未取消计划当前进程。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:06:55.453

Quartz 使用线程池来执行作业。因此，正如您所怀疑的那样，`RBDDalProcess`可能会在单独的线程中有单独的实例，并且计数器检查将失败。

您可以做的一件事是列出在调度程序中注册的作业（您可以使用 OB API 获取调度程序：）`OBScheduler.getScheduler()`：

```
// enumerate each job group
for(String group: sched.getJobGroupNames()) {
    // enumerate each job in group
    for(JobKey jobKey : sched.getJobKeys(groupEquals(group))) {
        System.out.println("Found job identified by: " + jobKey);
    }
} 
```

如果您看到相同的作业添加了两次，请查看用于控制作业实例化的[org.quartz.spi.JobFactory](http://quartz-scheduler.org/api/2.0.0/org/quartz/spi/JobFactory.html)和[org.quartz.Scheduler.setJobFactory](http://quartz-scheduler.org/api/2.1.0/org/quartz/Scheduler.html#setJobFactory%28org.quartz.spi.JobFactory%29)方法。

还要确保在 Openbravo 的“报告和流程”表中只有一个该流程的条目。

我`DalBaseProcess`在 Openbravo 3.0 中使用过，我无法确认您所描述的这种行为。[考虑到这一点，检查 Openbravov2.50MP24 和 Quartz 的已报告错误或在Openbravo Forge](http://forge.openbravo.com/)论坛中发布有关您的问题的主题可能是个好主意。

# matplotlib - 将亮度转换为 RGB 数组

> ID：11957676
> 
> 赞同：1
> 
> 时间：2012-08-14T17:32:46.737
> 
> 标签：matplotlib

我正在尝试将亮度（N x M x 1 阵列）转换为 rgb 阵列（N x M x 3）。

这个想法是使用 rgb 数组来获取 rgba 数组`imshow()`。我正在寻找的结果与我将亮度数组馈送到 的结果相同`imshow()`，但它让我可以控制 alpha。是否有一些简单的功能可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T22:08:53.913

您可以在 matplotlib 中使用一些有用的东西来实现您想要的。

您可以轻松地获取一组数字，并给定适当的规范化和颜色图，将它们转换为 rgba 值：

```
import matplotlib.pyplot as plt

# define a norm which scales data from the range 20-30 to 0-1
norm = plt.normalize(vmin=20, vmax=30)
cmap = plt.get_cmap('hot') 
```

有了这些，您可以做一些有用的事情：

```
>>> # put data in the range 0-1 
>>> norm([20, 25, 30])
masked_array(data = [ 0\.   0.5  1\. ],
             mask = False,
             fill_value = 1e+20)

# turn numbers in the range 0-1 into colours defined in the cmap
>>> cmap([0, 0.5, 1])
array([[ 0.0416   ,  0\.       ,  0\.       ,  1\.       ],
       [ 1\.       ,  0.3593141,  0\.       ,  1\.       ],
       [ 1\.       ,  1\.       ,  1\.       ,  1\.       ]]) 
```

这是你的意思，还是你试图做其他事情？

# javascript - html - 如何在下拉列表中获取选项标签的自定义属性？

> ID：11957677
> 
> 赞同：39
> 
> 时间：2012-08-14T17:32:49.847
> 
> 标签：javascript, html, select

如果我有这个代码：

```
 <select onchange="alert('?');" name="myname" class="myclass"> 
    <option isred="-1" value="hi">click</option>
 </select> 
```

如何从自定义属性 isred 中获取值“-1”？我不想使用 value 属性。而且我不想通过名称或ID来定位选项标签。

我想要类似的东西`onchange="alert(this.getselectedoptionID.getAttribute('isred'));"`

任何人都可以帮忙吗？

我也不想使用jquery。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-14T17:38:55.060

您需要弄清楚 selectedIndex 是什么，然后`getAttribute`从该 options[] 数组中找出。

```
<select onchange="alert(this.options[this.selectedIndex].getAttribute('isred'));" name="myname" class="myclass"> 
    <option isred="-1" value="hi">click</option>
    <option isred="-5" value="hi">click</option>
</select>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[**jsFiddle 演示**](http://jsfiddle.net/sp6dQ/)

## **作为旁注：**

**不要**在你的`HTML`. 您希望将业务逻辑与 UI 分开。而是创建一个 javascript 事件处理程序来处理此问题。（jQuery / 角度 / 等）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-11-12T13:45:31.167

在 jquery 中，你可以写：

```
$("#myname").find(':selected').attr('isred'); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-14T17:38:21.607

使用这样的东西：

```
document.getElementById("x").onchange = function () {
    console.log(this.options[this.selectedIndex].getAttribute("isred"));
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-01T21:51:59.383

假设我们有`HTML`如下标记：

```
<form id="frm_">
    <select name="Veh">
        <option value='-1' selected='selected'>Select</option>
        <option value='0' ren='x'>xxx</option>
        <option value='1' ren='y'>yyy</option>
    </select>
</form> 
```

`attr "ren"`可以这样访问：

```
function getRep() {
    var ren = document.forms['frm_'].elements['Veh'].options[document.forms['frm_']
                 .elements['Veh'].selectedIndex].getAttribute('ren');
    console.log("Val of ren " + ren); //x or y
} 
```

[演示](http://jsfiddle.net/4fpaaxgy/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-03T09:38:09.913

```
//Pure Javascript solution, and elegant one check if you really want to leverage the power of javascript.

// Listening to a onchange event by ID attached with the select tag.
document.getElementById("name_your_id").onchange = function(event) {

//event.target.selectedOptions[0] have that option. as this is single selection by dropdown. this will always be 0th index :) 
let get_val = event.target.selectedOptions[0].getAttribute("isred");
console.log("Value from the Attribute: ", get_val)
}
```

```
 <select id="name_your_id" name="myname" class="myclass">
    <option isred="423423" value="hi">One</option>
    <option isred="-1" value="hi">Two</option>
 </select>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-14T17:35:50.867

你用：`.getAttribute('isred')`

你要：

```
<select onchange="alert(this.options[this.selectedIndex].getAttribute('isred'));" name="myname" class="myclass">
    <option isred="-1" value="hi">click</option>
    <option isred="-1" value="ho">click</option>
</select> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-10-05T06:28:15.393

你可以

```
$(".myclass").val(function(){alert($("option",this).attr("isred"));}) 
```

# spring - 为什么这个 Spring 地图没有注入到我的 Scala 对象中？

> ID：11957681
> 
> 赞同：2
> 
> 时间：2012-08-14T17:32:58.660
> 
> 标签：spring, scala, dependency-injection

我正在创建一个基于 Spring 的 Scala 项目。我的一个对象需要一个简单的`Map[String, String]`注入。我有以下代码：

`applicationContext.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:p="http://www.springframework.org/schema/p"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:util="http://www.springframework.org/schema/util"
  xmlns:device="http://www.springframework.org/schema/mobile/device"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
        http://www.springframework.org/schema/mobile/device http://www.springframework.org/schema/mobile/device/spring-mobile-device-1.0.xsd">

  <util:map id="validHosts">
    <entry key="host1.domain.com" value="queue-1" />
    <entry key="host2.domain.com" value="queue-2" />
  </util:map>

</beans> 
```

`HostMapper.Scala`

```
import scala.collection.JavaConversions._

import org.springframework.beans.factory.annotation.Autowired
import org.springframework.stereotype.Component

@Component
class HostMapper() {

  @Autowired private var validHosts:java.util.Map[String, String] = null

} 
```

运行此应用程序时，我在启动时收到以下错误：

org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [java.lang.String] 的匹配 bean [map with value type java.lang.String]：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者.

我尝试将键和值类型明确声明为`java.lang.String`，但这没有效果。有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T18:06:53.543

我自己不知道这一点，实际上发现了这一点：

> 作为这种语义差异的特定结果，本身定义为集合或映射类型的 bean 不能通过 @Autowired 注入，因为类型匹配不适用于它们。对此类 bean 使用 @Resource，通过唯一名称引用特定的集合/映射 bean

我测试了这个，而不是

```
 @Autowired 
```

我用了：

```
 @Resource
 private Map<String, String> validHosts;

 <util:map id="validHosts" key-type="java.lang.String" value-type="java.lang.String">
    <entry key="host1.domain.com" value="queue-1" />
    <entry key="host2.domain.com" value="queue-2" />
</util:map> 
```

它奏效了。

# c# - 比较两个列表并使用 linq 返回不匹配的项目

> ID：11957685
> 
> 赞同：42
> 
> 时间：2012-08-14T17:33:14.197
> 
> 标签：c#, linq, list, c#-4.0

我有两个清单

```
List<Sent> SentList;
List<Messages> MsgList; 
```

两者都具有称为 MsgID 的相同属性；

```
MsgList            SentList  

MsgID Content      MsgID Content Stauts
1       aaa        1       aaa     0
2       bbb        3       ccc     0
3       ccc        
4       ddd
5       eee 
```

我想将 Msglist 中的 MsgID 与 sentlist 进行比较，并需要使用 linq 不在已发送列表中的项目

```
Result 

MsgID Content
2       bbb
4       ddd
5       eee 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-14T17:36:17.473

您可以执行以下操作：

```
HashSet<int> sentIDs = new HashSet<int>(SentList.Select(s => s.MsgID));

var results = MsgList.Where(m => !sentIDs.Contains(m.MsgID)); 
```

这将返回所有`MsgList`没有匹配 ID 的消息`SentList`。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-14T17:36:02.047

天真的方法：

```
MsgList.Where(x => !SentList.Any(y => y.MsgID == x.MsgID)) 
```

请注意，这将占用`m*n`操作，因为它将每个`MsgID`in`SentList`与每个 in进行比较（“最多”，因为它在匹配时*会*`MsgList`短路）。

 ** * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-14T17:52:14.233

好吧，您已经有了很好的答案，但它们大多数是 Lambda。更多的 LINQ 方法就像

```
var NotSentMessages =
                from msg in MsgList
                where !SentList.Any(x => x.MsgID == msg.MsgID)
                select msg; 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-09-08T11:53:58.043

你可以这样做，这是最快的过程

```
Var result = MsgList.Except(MsgList.Where(o => SentList.Select(s => s.MsgID).ToList().Contains(o.MsgID))).ToList(); 
```

这将为您提供预期的输出。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-14T17:36:33.093

你可以做类似的事情

```
var notSent = MsgSent.Except(MsgList, MsgIdEqualityComparer); 
```

您将需要提供 MSDN 上概述的自定义相等比较器

[http://msdn.microsoft.com/en-us/library/bb336390.aspx](http://msdn.microsoft.com/en-us/library/bb336390.aspx)

只需让相等比较器基于每个相应类型的 MsgID 属性的相等即可。由于相等比较器比较相同类型的两个实例，因此您需要定义*Sent*和*Messages*都实现的具有*MsgID*属性的接口或公共基类型。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-09T12:19:30.690

尝试，

```
 public class Sent
{
    public int MsgID;
    public string Content;
    public int Status;

}

public class Messages
{
    public int MsgID;
    public string Content;
}

  List<Sent> SentList = new List<Sent>() { new Sent() { MsgID = 1, Content = "aaa", Status = 0 }, new Sent() { MsgID = 3, Content = "ccc", Status = 0 } };
            List<Messages> MsgList = new List<Messages>() { new Messages() { MsgID = 1, Content = "aaa" }, new Messages() { MsgID = 2, Content = "bbb" }, new Messages() { MsgID = 3, Content = "ccc" }, new Messages() { MsgID = 4, Content = "ddd" }, new Messages() { MsgID = 5, Content = "eee" }};

            int [] sentMsgIDs = SentList.Select(v => v.MsgID).ToArray();
            List<Messages> result1 = MsgList.Where(o => !sentMsgIDs.Contains(o.MsgID)).ToList<Messages>(); 
```

希望它应该有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-09T07:38:45.373

作为扩展方法

```
public static IEnumerable<TSource> AreNotEqual<TSource, TKey, TTarget>(this IEnumerable<TSource> source, Func<TSource, TKey> sourceKeySelector, IEnumerable<TTarget> target, Func<TTarget, TKey> targetKeySelector) 
{
    var targetValues = new HashSet<TKey>(target.Select(targetKeySelector));

    return source.Where(sourceValue => targetValues.Contains(sourceKeySelector(sourceValue)) == false);
} 
```

例如。

```
public class Customer
{
    public int CustomerId { get; set; }
}

public class OtherCustomer
{
    public int Id { get; set; }
}

var customers = new List<Customer>()
{
    new Customer() { CustomerId = 1 },
    new Customer() { CustomerId = 2 }
};

var others = new List<OtherCustomer>()
{
    new OtherCustomer() { Id = 2 },
    new OtherCustomer() { Id = 3 }
};

var result = customers.AreNotEqual(customer => customer.CustomerId, others, other => other.Id).ToList();

Debug.Assert(result.Count == 1);
Debug.Assert(result[0].CustomerId == 1); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-22T12:29:06.633

```
List<Person> persons1 = new List<Person>
           {
                    new Person {Id = 1, Name = "Person 1"},
                    new Person {Id = 2, Name = "Person 2"},
                    new Person {Id = 3, Name = "Person 3"},
                    new Person {Id = 4, Name = "Person 4"}
           };

        List<Person> persons2 = new List<Person>
           {
                    new Person {Id = 1, Name = "Person 1"},
                    new Person {Id = 2, Name = "Person 2"},
                    new Person {Id = 3, Name = "Person 3"},
                    new Person {Id = 4, Name = "Person 4"},
                    new Person {Id = 5, Name = "Person 5"},
                    new Person {Id = 6, Name = "Person 6"},
                    new Person {Id = 7, Name = "Person 7"}
           };
        var output = (from ps1 in persons1
                      from ps2 in persons2
                      where ps1.Id == ps2.Id
                      select ps2.Name).ToList(); 
```

人物类

```
public class Person
{        
    public int Id { get; set; }       

    public string Name { get; set; }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-01T07:01:53.667

如果您想从第二个列表中选择列表项：

MainList.Where(p => 2ndlist.Contains(p.columns from MainList )).ToList();

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-08-14T17:44:06.293

```
List<Car> cars = new List<Car>() {  new Car() { Name = "Ford", Year = 1892, Website = "www.ford.us" }, 
                                    new Car() { Name = "Jaguar", Year = 1892, Website = "www.jaguar.co.uk" }, 
                                    new Car() { Name = "Honda", Year = 1892, Website = "www.honda.jp"} };

List<Factory> factories = new List<Factory>() {     new Factory() { Name = "Ferrari", Website = "www.ferrari.it" }, 
                                                    new Factory() { Name = "Jaguar", Website = "www.jaguar.co.uk" }, 
                                                    new Factory() { Name = "BMW", Website = "www.bmw.de"} };

foreach (Car car in cars.Where(c => !factories.Any(f => f.Name == c.Name))) {
    lblDebug.Text += car.Name;
} 
```*

# c++ - 使用除法和模数

> ID：11957689
> 
> 赞同：-1
> 
> 时间：2012-08-14T17:33:40.237
> 
> 标签：c++, math

我是 C++ 的新手（我是一名 Java 开发人员），我自己学习它。我需要将以下数字“12345”分成单独的数字，在这种情况下意味着 1、2、3、4 和 5。我的书说它可以在没有任何内置 c++ 方法的帮助下完成。那个怎么样？请帮忙！我发现模数和除法可以提供帮助。但是怎么做？我不知道！请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:38:46.653

继续将数字除以 (/) 10。每个除法的余数 (%) 以相反的顺序为您提供数字。

# javascript - 如何替代 in a href tag with javascript activated by onclick

> ID：11957691
> 
> 赞同：0
> 
> 时间：2012-08-14T17:33:56.760
> 
> 标签：javascript, html, noscript

I have a question about retrofitting the following code to gracefully handle noscript scenario.

```
Call me <a href="" onclick="activateContact(); return false;" unselectable="on"> <span>My Contact</span> </a> 
```

I'd like to subsitute the line above in case of noscript with:

```
Call me at 1-800-555-1525\. 
```

Thanks in advace.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:43:20.170

Set the link to noscript behavior:

```
 Call me at <a  id="callMeLink" href="#" unselectable="on"> <span>1-800-555-1525.</span> </a> 
```

Then do the progressive enhancement with js. If the js is not activated in browser, the link above will be on the right format already.

```
<script>
   var callMeLink = document.getElementById("callMeLink");
   callMeLink.onclick = activeContact;
   callMeLink.innerHTML = "<span>My Contact</span>";
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:43:38.820

**script** tag is used for javaScript. Same way there is tag which gets in action when the Javascript is diabled in browser. So to substitute your anchor with noscript data when JS is disbaled in browser. Use this

```
<script>
  Call me <a href="" onclick="activateContact(); return false;" unselectable="on"> 
  <span>My Contact</span> </a>
</script>

<noscript>
    Call me at 1-800-555-1525\. 
</noscript> 
```

# java - 在使用拉绳将字符串写入图像期间更改颜色

> ID：11957692
> 
> 赞同：0
> 
> 时间：2012-08-14T17:33:57.820
> 
> 标签：java, image, colors, drawstring

我正在从三个不同的文本文件中读取的三个较小的字符串中创建一个字符串，然后将该字符串写入图像中。我想更改创建图像中间段落的颜色。我可以创建包含三个段落的图像，如下[所示。](http://i50.tinypic.com/4id44y.jpg)

但是如何将中间段落的字体颜色更改为红色？

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.font.FontRenderContext;
import java.awt.geom.Rectangle2D;
import java.awt.image.BufferedImage;
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;

import javax.imageio.ImageIO;

public class writeToImage {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    int imgnumber = 0;

      FileInputStream fstream1 = null;
      FileInputStream fstream2 = null;
      FileInputStream fstream3 = null;
    try {
        fstream1 = new FileInputStream("vorlauf.txt");
        fstream2 = new FileInputStream("mitte.txt");
        fstream3 = new FileInputStream("nachlauf.txt");

    } catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
      // Get the object of DataInputStream
      DataInputStream vorlauf = new DataInputStream(fstream1);
      BufferedReader br1 = new BufferedReader(new InputStreamReader(vorlauf));

      DataInputStream mitte = new DataInputStream(fstream2);
      BufferedReader br2 = new BufferedReader(new InputStreamReader(mitte));

      DataInputStream nachlauf = new DataInputStream(fstream3);
      BufferedReader br3 = new BufferedReader(new InputStreamReader(nachlauf));

      String vorlauf1   = null;
      String mitte1 = null;
      String nachlauf1  = null;

        try {
            while ((vorlauf1 = br1.readLine()) != null && (mitte1 = br2.readLine()) != null && (nachlauf1 = br3.readLine()) != null){
            try {

                String vorlaufdiv = StringDivider(vorlauf1);
                String mittediv = StringDivider(mitte1);
                String nachlaufdiv = StringDivider(nachlauf1);

                String totalPassage = vorlaufdiv + "\n\n" + mittediv + "\n\n" + nachlaufdiv;

                //Image file name
                   String fileName = "English-translated-";

                   imgnumber++;

                    //create a File Object
                    File newFile = new File("./" + fileName + imgnumber + ".jpg");

                    //create the font you wish to use
                    Font font = new Font("Tahoma", Font.PLAIN, 15);

                    //create the FontRenderContext object which helps us to measure the text
                    FontRenderContext frc = new FontRenderContext(null, true, true);

                    //get the height and width of the text
                    Rectangle2D bounds = font.getStringBounds(totalPassage, frc);
                    int w = 750;
                    int h = 430;

                    //create a BufferedImage object
                   BufferedImage image = new BufferedImage(w, h,   BufferedImage.TYPE_INT_RGB);

                    //calling createGraphics() to get the Graphics2D
                    Graphics2D g = image.createGraphics();

                    //set color and other parameters
                    g.setColor(Color.WHITE);
                    g.fillRect(0, 0, w, h);
                    g.setColor(Color.BLACK);
                    g.setFont(font);

                    int index = 0;
                    String[] parts = totalPassage.split("\n");
                    for(String part : parts){
                    g.drawString(part, (float) bounds.getX(), (float) -bounds.getY() + 20 * index++);
                    }

                  //releasing resources
                  g.dispose();

                    //creating the file

                    try {
                        ImageIO.write(image, "jpg", newFile);
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            }

        }catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

public static String StringDivider(String s){

    StringBuilder sb = new StringBuilder(s);

    int i = 0;
    while ((i = sb.indexOf(" ", i + 100)) != -1) {
        sb.replace(i, i + 1, "\n");
    }

    return sb.toString();

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:03:23.250

这真的不是你想要的方式......如果你阅读评论有更好的方法，但这是一种无需更改任何其他内容的方法。这将在您的字符串中第一次出现 \n\n 时着色，因此前提是您的文件不包含 \n\n。

```
 int index = 0;
                int paragraphCount = 1; // starting on first paragraph
                String[] parts = totalPassage.split("\n");
                for(String part : parts){
                   if(part.length() == 0) {    
                       paragraphCount++;
                   }
                   if(paragraphCount==2){
                       g.setColor(Color.RED);
                   }else{
                       g.setColor(Color.BLACK);
                   }
                    g.drawString(part, (float) bounds.getX(), (float) -bounds.getY() + 20 * index++);
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:57:03.080

我不认为您的解决方案很好，但对您的代码最简单的可能答案是将您的代码部分更改为中间段落为红色。

```
 int index = 0;
      String[] parts = totalPassage.split("\n");
      for(String part : parts){
         if (index == 2)
             g.setColor(Color.red);
         else 
            g.setColor(Color.black);
         g.drawString(part, (float) bounds.getX(), (float) -bounds.getY() + 20 * index++);
       } 
```

我建议你坚持别人在评论中给你的建议。

# ruby-on-rails - TC 服务器无法读取 Rails 代码错误说堆栈级别太深

> ID：11957697
> 
> 赞同：0
> 
> 时间：2012-08-14T17:34:25.020
> 
> 标签：ruby-on-rails, tomcat

我正面临这个问题，无法通过任何方式。这是它一直在说的话：

```
ActionView::Template::Error (stack level too deep):
    1: $('#workflow_selection').html("<%=j render "show_workflow_list" %>");
  app/views/deployment_group/show_workflow_list.js.erb:1:in `_app_views_deployment_group_show_workflow_list_js_erb___1968905592_2026' 
```

每当遇到 <%= %> 时，几乎在所有情况下，它都会表示堆栈级别太深。我删除了所有这些 <%= %> 并复制粘贴了 HTML 代码。现在视图渲染得很好，要转到另一个视图，它应该借助这个 js.erb 文件。现在它说这里的堆栈级别太深了。

在这方面的任何建议或帮助将对我非常有帮助，谢谢

# 更新

使用普通代码链接到相同类型的错误 -[链接](https://stackoverflow.com/questions/11940055/deploying-a-rails-application-on-tc-server) 很可能我错过了供应商文件夹或某些 gem 或应用程序中的某些“要求”。已经在 tcserver 上部署过 Rails 应用程序的人肯定知道这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:56:23.090

您正在 show_workflow_list 内渲染 show_workflow_list，这会导致渲染无限循环。这就是堆栈级别太深的原因。

# ios - 使用矩阵、加速框架、iOS

> ID：11957699
> 
> 赞同：7
> 
> 时间：2012-08-14T17:34:46.640
> 
> 标签：ios, frameworks, matrix

我有两个矩阵：A 和 B。

1.  我该如何存储它们？
2.  如何使用 Accelerate 框架计算矩阵 A 的逆矩阵？
3.  如何找到 A*B 的乘积？
4.  如何使用 Accelerate 框架转置矩阵 A？

谢谢你回答我的问题！

帮助文件

```
#import <Foundation/Foundation.h>
#include <Accelerate/Accelerate.h>

@interface Working_with_matrices : NSObject
-(int)invert_matrix:(int) N andWithMatrix:(double*) matrix;
@end 
```

实施文件

```
#import "Working_with_matrices.h"
#include <Accelerate/Accelerate.h>

@implementation Working_with_matrices
-(int) matrix_invert:(int) N andWithMatrix:(double*)matrix
{    
int error=0;
int *pivot = malloc(N*N*sizeof(int));
double *workspace = malloc(N*sizeof(double));

dgetrf_(&N, &N, matrix, &N, pivot, &error);

if (error != 0) {
    NSLog(@"Error 1");
    return error;
}

dgetri_(&N, matrix, &N, pivot, workspace, &N, &error);

if (error != 0) {
    NSLog(@"Error 2");
    return error;
}

free(pivot);
free(workspace);
return error;
} 
```

从主函数调用我的代码

```
#import <Foundation/Foundation.h>
#import "Working_with_matrices.h"

int main(int argc, const char * argv[])
{
int N = 3;
double A[9];
Working_with_matrices* wm=[[Working_with_matrices alloc]init];

A[0] = 1; A[1] = 1; A[2] = 7;
A[3] = 1; A[4] = 2; A[5] = 1;
A[6] = 1; A[7] = 1; A[8] = 3;
[wm invert_matrix:N andWithMatrix:A];
//        [ -1.25  -1.0   3.25 ]
// A^-1 = [  0.5    1.0  -1.5  ]
//        [  0.25   0.0  -0.25 ] 
for (int i=0; i<9; i++) 
{
    NSLog(@"%f", A[i]);
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T18:07:46.343

我对使用加速框架还是有点陌生​​，但我会回答我能回答的问题。

1.  加速框架期望矩阵作为一维数组传入。因此，如果您有一个 4x4 矩阵，则第一行将放置在数组的索引 0-3 中，第二行将放置在索引 4-7 中，依此类推。
2.  我从来没有做过，但这个答案看起来是一个很好的起点。[https://stackoverflow.com/a/11321499/385017](https://stackoverflow.com/a/11321499/385017)
3.  您要使用的方法是`vDSP_mmul`单精度或`vDSP_mmulD`双精度。您可能想查看它的[文档](http://developer.apple.com/library/ios/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html)以更好地了解如何使用它，但这里有一个示例可以帮助您入门。

    ```
    float *matrixA;  //set by you
    float *matrixB;  //set by you
    float *matrixAB; //the matrix that the answer will be stored in

    vDSP_mmul( matrixA, 1, matrixB, 1, matrixAB, 1, 4, 4, 4 );
    // the 1s should be left alone in most situations
    // The 4s in order are:
    //     the number of rows in matrix A
    //     the number of columns in matrix B
    //     the number of columns in matrix A and the number of rows in matrix B. 
    ```

# objective-c - Objective-C 在 performSelectorOnMainThread 中使用参数传递消息：

> ID：11957702
> 
> 赞同：-3
> 
> 时间：2012-08-14T17:34:55.247
> 
> 标签：objective-c, ios5, objective-c-blocks, performselector

当传递给 @selector 的方法有参数时，需要语法帮助。谢谢！

```
//This works
dispatch_async(kBgQueue, ^{ 

 [self performSelectorOnMainThread:@selector(hydrateList) withObject:nil waitUntilDone:YES];   

});

//But what about when the method in the selector has arguments?
//This is incorrect, syntactically
  dispatch_async(kBgQueue, ^{ 

     [self performSelectorOnMainThread:@selector(hydrateListForCategory:self.categorySelected) withObject:nil waitUntilDone:YES];
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:37:33.880

提示：这就是“withObject:”部分存在的原因。

提示 2：Apple 为他们的框架提供了非常好的文档。

提示 3：

```
[self performSelectorOnMainThread:@selector(hydrateListForCategory:) withObject:self.categorySelected waitUntilDone:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:37:30.957

```
[self performSelectorOnMainThread:@selector(hydrateListForCategory:) withObject:self.categorySelected waitUntilDone:YES]; 
```

# php - 使用 HTML 和任何服务器端语言（PHP、.net、ruby）制作的网站是否可以在每个具有浏览器的设备上运行？

> ID：11957708
> 
> 赞同：-3
> 
> 时间：2012-08-14T17:35:27.273
> 
> 标签：php, javascript, css, cross-browser, cross-platform

如果我们想制作一个 Web 应用程序/网站并希望获得最大的兼容性

使用 HTML 和任何服务器端语言（PHP、.net、ruby）制作的网站是否可以在每个具有浏览器的设备上运行？没有 CSS，没有 JS，没有图像。

它会覆盖至少 90% 的可以连接到互联网并具有 Web 浏览器的设备吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:40:27.503

HTML 将在任何具有支持 HTML 的浏览器（iPhone、Android 等）的设备上呈现。所以，如果你的网站是用 HTML 编写的——你应该没问题。

服务器端语言、PHP、.Net、Ruby 等 - 它们都在服务器端执行，除了生成动态内容并将其作为 HTML 发送之外，与客户端设备无关。所以，我猜技术答案可能是“是的——任何带有浏览器的设备都被所有服务器端语言覆盖”，等待它们返回可渲染的 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T17:40:54.857

基本上，服务器端语言所做的是决定向客户端发送什么 HTML（最基本的）。客户端永远不会看到任何实际的服务器端代码。这意味着兼容性取决于服务器端语言输出的 HTML，而不是用于创建 HTML 的语言。

因此，您的实际问题的答案是，是的，任何服务器端语言，是的，它将覆盖至少 90% 的能够呈现 HTML 的设备（取决于 HTML 的有效性）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T17:40:16.750

取决于市场。在世界许多地方，许多移动浏览器仍然只显示 WAP/WML。否则，正如您所指出的，“服务器端”语言就是这样，因此与问题无关。如果它只是纯 HTML，那么它将适用于许多移动设备。确切的百分比将因市场而异。

您使用的标准越新，能够正确显示它的设备就越少。另外请记住，不要使用 CSS 和图像之类的东西，虽然更多的人可能会看到它，但由于它的外观和工作方式，你可能会让更多的人离开网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T17:40:36.827

PHP 仅在服务器端运行。浏览器从不接收 PHP 代码（除非您的 Web 服务器中存在重大配置错误）。
因此，只要浏览器可以理解您使用 PHP 生成的内容，它就可以在所有浏览器中使用。

# c# - 在 Windows Azure 上托管 MongoDB 以进行 C# 访问

> ID：11957715
> 
> 赞同：1
> 
> 时间：2012-08-14T17:35:49.017
> 
> 标签：c#, mongodb, azure

我已阅读此页面：[http](http://www.mongodb.org/display/DOCS/Azure+Deployment) ://www.mongodb.org/display/DOCS/Azure+Deployment ，但它似乎是在谈论实际设置 Azure 应用程序，我对此不感兴趣。我只想在 Azure 上托管一个 Mongo DB，我可以使用连接字符串从一些非 Azure 应用程序访问它。我还尝试在此页面上运行脚本：[http](http://www.mongodb.org/display/DOCS/MongoDB+Installer+for+Windows+Azure) ://www.mongodb.org/display/DOCS/MongoDB+Installer+for+Windows+Azure但它在尝试验证图像名称时抛出异常。我想要的可能吗？

这一切的原因是我试图比较 MongoDB 和 Azure 表存储，并且我希望在我进行性能测试时使场景尽可能相似。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:54:04.490

您问题中的第一个链接谈到在 Windows Azure 中部署 MongoDB（其他应用程序也可以访问），但这是在传统的 PaaS 上下文中。这意味着您将在托管服务/云服务中部署 MongoDB。

如果您想以“感觉更自然”的方式在 Windows Azure 上托管 MongoDB，您应该考虑将其部署在虚拟机中（您问题中的第二个链接）。实际上，在 Windows Azure 网站上有一个操作方法，它将指导您完成创建 VM 并在该 VM 上部署 MongoDB 的整个过程：[在 Windows Azure 中运行 Windows Server 2008 R2 的虚拟机上安装 MongoDB](http://www.windowsazure.com/en-us/manage/windows/common-tasks/install-mongodb/)

两种部署 MongoDB 的方式都允许您从非 Azure 应用程序访问它，您只需正确配置端点（允许从数据中心外部访问特定端口）。

请注意，虚拟机 (IaaS) 仍是预览功能，预览中的性能可能无法反映最终版本的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:54:46.883

您可以通过两种方式在 Windows Azure 上运行 MongoDB。第一种方法是作为[此处](http://www.mongodb.org/display/DOCS/Azure+Deployment)描述的云服务运行，但这不是您想要的。

在 Windows Azure 上运行 MongoDB 的第二个选项是使用 Windows Azure 虚拟机（Linux 或 Windows），然后在其上安装 MongoDB。下面的链接解释了如何在 Windows Azure 的 CentOS 机器上安装 MongoDB：

[https://www.windowsazure.com/en-us/manage/linux/common-tasks/mongodb-on-a-linux-vm/](https://www.windowsazure.com/en-us/manage/linux/common-tasks/mongodb-on-a-linux-vm/)

如果您决定使用 Windows 虚拟机，您肯定可以在配置 Windows 虚拟机后使用任何 MongoDB 教程将其安装到 Windows 机器上，或者只[使用这个](https://www.windowsazure.com/en-us/manage/windows/common-tasks/install-mongodb/)。

由于您已经尝试[使用 Powershell 将 MongoDB 从您的桌面部署到 Windows VM](http://www.mongodb.org/display/DOCS/MongoDB+Installer+for+Windows+Azure)，但未能正常工作，请写另一个带有错误详细信息的问题，我当然可以提供帮助。

最后，根据您的实际目标，我建议按照上述教程在 CentOS 上创建 MongoDB 并完成您的测试，这可能是我们讨论过的所有方法中最简单的 MongoDB 设置。

# ember.js - 视图从容器视图（1.0pre）退出时将其状态更改为“已销毁”

> ID：11957718
> 
> 赞同：1
> 
> 时间：2012-08-14T17:36:00.247
> 
> 标签：ember.js

我正在将我当前的应用程序从 0.9.8 更新到 1.0pre，我正在尝试一些我不太理解的东西。

我的一个模板有一个绑定到属性的容器视图：

```
...
{{view Ember.ContainerView currentViewBinding="oTabPanelFrame"}}
... 
```

然后我通过执行类似这样的代码（由观察者执行的代码）更改了容器的视图：

```
...
if (sender[key])
    this.set('oTabPanelFrame', sender.get('oFrameView'));
... 
```

由于 1.0pre 这仅工作一次，第二次尝试设置视图时，其状态更改为“已销毁”（在 0.9.8 中始终为“preRender”），然后不再显示。

所以，这就是发生的事情：

1.  用户单击 UI 并正确显示视图 A。
2.  用户单击其他 UI 项目，它也正确显示视图 B。
3.  用户单击第一个 UI 项目并尝试显示视图 A，但它没有。在深入查看视图属性后，我意识到它的状态变为“已销毁”。

这是正常行为吗？我检查了 1.0pre 更新日志和与视图状态相关的不同帖子，但我看不到任何类似的东西。

提前致谢！

PS：我认为这里的代码无关紧要，如果您想让我发布更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:53:49.290

好吧，我不知道 0.9.8 和 1.0-pre 之间到底添加了什么，但我认为已经做了一些工作以避免内存泄漏。然后正如你所说，从containerView中删除时，视图似乎被破坏了。我找到的解决方案是在每次需要时创建视图。我认为这不是最佳解决方案。我会尝试做得更好，尤其是通过使用`childViews`.`Ember.ContainerView`

这是非常接近您的实现：

```
Test = Ember.Application.create();

Test.TabPanel = Ember.View.extend({
  templateName: 'tabpanel',
  tagName: 'span',

  init: function() {
    this._super();
    this.set('oTabPanelFrame', Ember.View.create());
  },
  click1: function(event) {
    event.context.set('oTabPanelFrame', event.context.get('view1').create());
  },
  click2: function(event) {
    event.context.set('oTabPanelFrame', event.context.get('view2').create());
  },

  view1: Ember.View.extend({
    defaultTemplate: Ember.Handlebars.compile("View1's contents")
  }),

  view2: Ember.View.extend({
    defaultTemplate: Ember.Handlebars.compile("View2's contents")
  }),
});

var oMyPanel = Test.TabPanel.create();
oMyPanel.appendTo('#content');​ 
```

***更新***

由于这对你不起作用，对于 1.0 版本，我认为实现它的首选方法是使用`outlets`. 在这里，有一个很好的例子来说明它是如何实现的：[emberjs - how to mark active menu item using router infrastructure](https://stackoverflow.com/questions/11628489/emberjs-how-to-mark-active-menu-item-using-router-infrastructure)

我已经修改了小提琴，以向您展示如何在切换视图时保持状态。事实上，当视图被“连接”时，它们也每次都被实例化。但是状态应该保存在控制器或模型中。

这是小提琴：http: [//jsfiddle.net/Sly7/z8ssG/11/](http://jsfiddle.net/Sly7/z8ssG/11/)

# c#-4.0 - 使用自定义工具 ProtBufTool 从 proto 文件生成的 C# 类没有 parseFrom 和 mergeFrom 方法

> ID：11957729
> 
> 赞同：1
> 
> 时间：2012-08-14T17:36:49.780
> 
> 标签：c#-4.0, protocol-buffers

我在 Visual Studio 中使用自定义工具“ProtoBufTool”从 .proto 文件生成 C# 类文件。但是，生成的输出类没有 parseFrom 和 mergeFrom 方法。我是否错过了在 proto 文件或工具设置中提供某些选项或某些内容？我没有在网上找到任何可以给我任何线索来解决这个问题的东西。此外，除了消息之外，我的 proto 文件在文件开头只有选项 *optimize_for = SPEED;*。我对 proto 文件没有任何构建操作。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:53:59.587

从工具的名称来看，听起来您正在使用 protobuf-net。这只是 c# / .net 的[几个 protobuf 实现之一，但它不是直接端口并且具有不同的 API - 相反，它](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)**首先**尝试成为惯用的 .net ，*然后*是序列化程序（例如，您甚至不需要.proto - 你可以使用常规的 POCO 类型）。例如，典型用法可能是：

```
var obj = Serializer.Deserialize<YourType>(inputStream); 
```

如果您想要一个与 java 等实现具有相同 API 的实现，那么[protobuf-csharp-port](http://code.google.com/p/protobuf-csharp-port/)可能更符合您的喜好。这是 java API 的一个更直接的端口。

# c# - 将实体数据模型导入项目的最佳方式

> ID：11957732
> 
> 赞同：1
> 
> 时间：2012-08-14T17:37:16.833
> 
> 标签：c#, wpf, entity-framework, mvvm

我正在使用 MVVM 布局，但我想将我的 .edmx 文件作为我的“模型”仅作为项目而不是主项目中的“模型”文件夹导入。

::Edit:: 主要问题：当我导入包含 EDMX 和 Designer 文件的“DataProject”（正如我所说的）时，对主项目的命名空间有无数个引用。这让我觉得如果我只是将 EDMX 和 Designer 文件而不是包含 DataProject 的整个文件导入到“Model”文件夹下的 MVVM 项目中，我将不得不将所有这些命名空间更改为 Main MVVM 项目命名空间。

人们在将现有的 EDMX/设计器文件导入到他们的项目中以使 EDMX/设计器与他们导入的主项目正确通信时通常会做什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:59:13.613

我发现重新创建模型通常更容易，但是使用“查找和替换”对话框同样可以查找和替换模型的实体容器名称和命名空间。

# c# - HttpHandler 问题，正在检索图像

> ID：11957733
> 
> 赞同：0
> 
> 时间：2012-08-14T17:37:25.770
> 
> 标签：c#, asp.net, image, listview, httphandler

以下 HttpHandler 用于从数据库中检索图像。当我最初测试它时，它工作正常。但现在的问题是它仍然检索图像，但没有在 Listview 中的图像控件中显示它。

```
 `public void ProcessRequest (HttpContext context) 
{
    string imageid = context.Request.QueryString["ImID"];
    using (SqlConnection connection = ConnectionManager.GetConnection())
    {
        SqlCommand command = new SqlCommand("select Normal_Thumbs from User_Images where Id=" + imageid, connection);
        SqlDataReader dr = command.ExecuteReader();
        dr.Read();
        if (dr[0] != DBNull.Value)
        {
            Stream str = new MemoryStream((Byte[])dr[0]);

            Bitmap Photo = new Bitmap(str);
            int Width = Photo.Width;
            int Height = Photo.Height;
            int imagesize = 200;
            if (Photo.Width > Photo.Height)
            {
                Width = imagesize;
                Height = Photo.Height * imagesize / Photo.Width;
            }
            else
            {
                Width = Photo.Width * imagesize / Photo.Height;
                Height = imagesize;
            }

            Bitmap bmpOut = new Bitmap(150, 150);

            Graphics g = Graphics.FromImage(bmpOut);
            g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
            g.FillRectangle(Brushes.White, 0, 0, Width, Height);
            g.DrawImage(Photo, 0, 0, Width, Height);

            MemoryStream ms = new MemoryStream();
            bmpOut.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
            byte[] bmpBytes = ms.GetBuffer();
            bmpOut.Dispose();
            ms.Close();

            context.Response.Write(bmpBytes);

            context.Response.End();

        }
    }
} 
```

处理程序检索图像但列表视图不显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:53:47.200

尝试这种方法，将内容类型设置为响应。

```
...
    context.Response.Clear();
    context.Response.ContentType = System.Drawing.Imaging.ImageFormat.Png.ToString();
    context.Response.OutputStream.Write(bmpBytes, 0, bmpBytes.Length);             
    context.Response.End(); 
... 
```

问候。

# sql - 设置日常任务以将平面文件导入 SQL Server 中的现有表

> ID：11957736
> 
> 赞同：0
> 
> 时间：2012-08-14T17:37:31.893
> 
> 标签：sql, sql-server, file, import, flat

这是我对 SQL Server 问题的新手。

1.  我使用导入和导出数据向导创建了一个带有平面文件 (.txt) 的表。
2.  为了在 Arc SDE 中使用该表，我必须创建另一个名为 ObjectID 的字段。

需要执行以下操作：

1.  使用每日生成的平面文件并从表中删除数据并替换为新数据。
2.  ObjectID 字段是派生的，不在平面文件中，但需要它留在表中并自动填充。
3.  开发脚本或sql语句
4.  设置日常流程
5.  提供错误或完成的报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:44:52.423

一般来说，我会使用作为 Sql Server 计划任务的一部分执行的集成服务包。这些是涉及的两项主要技术，这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:45:21.523

您可以使用 ssis technologie (Business Intelligence Development Studio) BIDS，它允许您将 sql server 表中的文本文件与您想要的转换集成（添加对象 ID 字段）

示例：http://www.databasejournal.com/features/mssql/article.php/3832386/Flat-File-Imports-with-SQL-Server-Integration-Services-2008.htm

使用 sql 代理进行计划任务

这里有一个示例：http://decipherinfosys.wordpress.com/2008/09/17/scheduling-ssis-packages-with-sql-server-agent/

# javascript - SSJ - 不可更改的异常

> ID：11957739
> 
> 赞同：0
> 
> 时间：2012-08-14T17:37:38.007
> 
> 标签：javascript, exception, xpages

今天我的服务器端 javascript 出现了一个奇怪的问题。

我有一个 scriptLibrary，其中有一些错误处理（尝试 {...} catch(e) {...}）但是变量“e”有问题。在命令 e.printStacktrace() （有用）上，我遇到了一个异常：**Error calling method 'printStackTrace()' on an object of type 'Error [JavaScript Object]'**

我有另一个库，在其中我将异常传递给一个 Java 类，该类在我的数据库中创建一个日志文档，使用它抛出另一个异常，它表示变量“e”不是一个可抛出的异常。使用 print(typeof e) 进行检查仅返回“对象”。

那不应该是我可以使用标准方法的一种例外吗？你知道是什么原因造成的吗？

提前致谢。

马蒂亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:47:13.443

该错误不是 Java 异常，这就是没有堆栈信息并且没有可用的*printStackTrace()*方法的原因。

您的代码会引发 Javascript 错误对象。尝试*e.getMessage()*或仅使用*print(e)*来获取代码失败的原因。

# php - 使用特殊搜索/工具构建搜索

> ID：11957740
> 
> 赞同：2
> 
> 时间：2012-08-14T17:37:41.173
> 
> 标签：php, mysql, search

我正在建立一个基本上是“发现你的城市”类型的网站（例如，商业目录、天气、新闻......）。我的网站的主要功能只是作为一个商业目录。我已经建立了一个从几个 mysql 表中填充的企业列表搜索（我镇上只有大约 10,000 家企业，这意味着只有 10,000 个列表，所以我真的没有速度问题并且需要移动到全文或狮身人面像）。

现在，我想构建特殊搜索，即用户，而不是输入“Restaurants”或“Joe's Crab Shack”，而是输入“News”或“Weather”，并显示城镇的当前天气或当地新闻。新闻和天气都是从外部网站中提取的。[谷歌在这里](http://www.google.com/#q=weather&hl=en&biw=1920&bih=906&fp=1&bav=on.2,or.r_gc.r_pw.r_qf.&cad=b)有一个很好的例子。

我怎样才能建造这个？Switch Statements 是我认为的一种方式，但不确定这是否会成为一个很好的解决方案。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:10:35.273

制作一个“关键字”表来存储这些特殊单词。首先在该表上进行查找，如果得到零结果，则运行实际搜索。只要您始终对索引 ( `WHERE term='$search'`) 进行精确查找，而不是使用 LIKE，查询应该几乎是即时的，因此执行两个查询不会对性能造成太大影响。

# jquery - 为什么 val() 函数返回 [object Object]？

> ID：11957743
> 
> 赞同：3
> 
> 时间：2012-08-14T17:37:52.353
> 
> 标签：jquery

html代码：

```
 <div data-role="popup" id="popup-activity">
        <div data-role="header">
            <h1>Error</h1>
        </div>
        <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
            <h3 id="error" class="ui-title"></h3>  
        </div>
    </div> 
```

查询：

```
 $('#error').val('Please select Activity');                     
 alert($('#error'));
 $('#popup-activity').popup("open"); 
```

嗨，我是 jquery 的新手。

我正在使用 jquery.mobile-1.2.0-alpha.1.js ，它允许弹出窗口，如上述描述。当我打开弹出窗口时，错误 ID 中的值不显示。实际上它显示为空。所以我放了一个警告框来查看它的值，上面写着 [object Object]。

有谁知道如何在弹出窗口中显示文本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T17:38:28.547

```
$('#error').val('Please select Activity'); 
```

应该

```
$('#error').text('Please select Activity'); 
```

或者

```
$('#error').html('Please select Activity'); 

alert( $('#error').text() ); // or $('#error').html() 
```

因为,[`.val()`](http://api.jquery.com/val)是用于`input, textarea`控件，所以你需要[`.text()`](http://api.jquery.com/text)or [`.html()`](http://api.jquery.com/html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T17:38:56.283

`val()`不用于`h3`、使用`html()`或`text()`

采用

```
$('#error').html('Please select Activity'); 
```

或者

```
$('#error').text('Please select Activity'); 
```

# objective-c - 使用 NSCoding 解码：键值是否存在？

> ID：11957748
> 
> 赞同：8
> 
> 时间：2012-08-14T17:38:11.653
> 
> 标签：objective-c, nscoding

使用 NSCoding 和解码值时，有没有办法判断给定键是否存在值？换句话说，我想做的是...

```
if([decoder valueExistsForKey:@"myKey"])   //valueExistsForKey is not a real method :(
{
    NSInteger *myInt = [decoder decodeValueForKey:@"myKey"];
}
else
{
    //handle special case
} 
```

问题是我的应用程序中有旧版本的文档没有“myKey”值，如果他们没有它，则使用 0 表示 myInt（如果您解码不存在的密钥会发生什么）不是我想要的行为。但是，我不能只解码并检查 myInt == 0，因为它可能合法地等于 0。

由于 valueExistsForKey 方法似乎不存在，我该如何复制这种行为？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-14T17:40:00.280

怎么样[`containsValueForKey`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSCoder_Class/index.html#//apple_ref/occ/instm/NSCoder/containsValueForKey:)？

# c# - c# StreamWriter 使用 50% cpu

> ID：11957751
> 
> 赞同：-2
> 
> 时间：2012-08-14T17:38:14.663
> 
> 标签：c#, cpu, streamwriter

我已经尝试了我能想到的一切，我准备把头发拔掉。我有一个使用 TCPClient、NetworkStream、StreamWriter 和 StreamReader 与调制解调器通信的应用程序。调制解调器每隔一小时左右只接受一个连接，所以我必须保持连接打开。我刚刚切换到一个新的调制解调器，它在几个小时后显然停止了通信，但它的网络连接保持打开状态。我已将 NetworkStream.ReadTimeout 和 NetworkStream.WriteTimeout 属性设置为 1000 毫秒，但是当调制解调器停止通信时 StreamWriter 不会超时，它只是开始使用我计算机 50% 的 CPU。没有无限循环，它在我的代码中的单个 StreamWriter.WriteLine() 上停止。任何帮助是极大的赞赏。

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:48:27.450

在某个地方，甚至在您只使用但未编写的代码中，也有一个看起来像这样的循环：

```
while (condition)
{
    condition = checkCondition(); //possibly looking for new data from the socket
} 
```

你有一台双核计算机，这个循环占用了一个核心的所有 cpu 时间。解决这个问题的最简单方法是在循环中添加一个 sleep 调用：

```
while (condition)
{
    Thread.Sleep(100);
    condition = checkCondition();
} 
```

但同样，此代码可能隐藏在您正在使用的函数调用中，您无法更改它。如果是这种情况，您可能需要查看您正在使用的类，并找到一种替代方法来等待不依赖于违规函数的数据。

您可以通过在 bugger 中运行您的应用程序来找出导致问题的函数，等待它达到问题状态，然后暂停执行。稍微浏览一下程序，问题出在哪里应该会变得相当明显。

# javascript - html jquery 函数在 keydown 事件上不起作用？

> ID：11957752
> 
> 赞同：0
> 
> 时间：2012-08-14T17:38:15.267
> 
> 标签：javascript, jquery

我试图在 jquery 中创建一个自动建议功能（只是实验性的 jquery noob），我使用 $(el).html 函数来呈现正在提供的数据：

```
$("#suggestions").addClass("active");
     var words = $(this).val();
     var results = searchData(questions,words);
     $("#suggestions").html(function () {
            _.each(results, function(q, key){
                return "<p>" + q.question + "</p>"; // problem is here
            });
        }); 
```

完整的工作代码在这里：http: [//jsfiddle.net/HSBWt/6/](http://jsfiddle.net/HSBWt/6/) 我似乎不知道出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:44:07.830

问题是你在函数`each`内部的声明`html`。

`We can break the $.each() loop at a particular iteration by making the callback function return false. Returning non-false is the same as a continue statement in a for loop; it will skip immediately to the next iteration.`
[参考](http://api.jquery.com/jQuery.each/)

修复以下代码：

```
var suggestions;
_.each(results, function(q, key){
    suggestions += "<p>" + q.question + "</p>";
});
return suggestions; 
```

[演示](http://jsfiddle.net/ricardolohmann/HSBWt/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:45:15.140

[http://jsfiddle.net/HSBWt/9/](http://jsfiddle.net/HSBWt/9/)

使用该`map`函数取回对象数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:47:17.423

结果 from`_each`未用于`html`. 您需要保存并**返回**结果字符串：

```
var results = [];
_.each(results, function(q, key){
  console.log(q.question);
  results.push("<p>" + q.question + "</p>");
});
return results.join(''); 
```

# java - Guice，JerseyServletModule，缺少对方法的依赖，REST 服务配置

> ID：11957756
> 
> 赞同：3
> 
> 时间：2012-08-14T17:38:32.910
> 
> 标签：java, rest, servlets, guice

我的 Guice 配置如下所示：

```
public class SocialServiceGuiceConfig extends GuiceServletContextListener {
   @Override
   protected Injector getInjector() {
       final Module [] modules = {
               new JerseyServletModule() {
                   @Override
                   protected void configureServlets() {
                       bind( GraphApi.class );

                       bind( SocialUncheckedExceptionMapper.class ).in( Singleton.class );
                       bind( SocialUnhandledExceptionMapper.class ).in( Singleton.class );

                       serve( "/*" ).with(
                           GuiceContainer.class );
                   }
               },
       };

       return Guice.createInjector( modules );
   } 
} 
```

我的 API 定义如下所示：

```
@Path( "/{" + BUSINESS_CUSTOMER_PARAMETER + "}" )
public BusinessCustomerApi businessCustomerAndContext(
        @PathParam( BUSINESS_CUSTOMER_PARAMETER ) final BusinessCustomerPathParam businessCustomerPathParam,
        @QueryParam( LOCALE_PARAMETER ) final String locale) { 
```

我在日志中遇到的异常：

```
INFO: Binding com.business.social.next.service.api.v1.GraphApi to GuiceManagedComponentProvider with the scope "PerRequest"
Aug 13, 2012 9:20:05 PM com.sun.jersey.spi.inject.Errors processErrorMessages
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  WARNING: A HTTP GET method, public void com.business.social.next.service.api.v1.GraphApi.get(), MUST return a non-void type.
  SEVERE: Missing dependency for method public com.business.social.next.service.api.v1.BusinessCustomerApi com.business.social.next.service.api.v1\.    GraphApi.graphRequestContext(com.business.social.next.graph.protocol.BusinessCustomer,java.lang.String) at parameter at index 0
Aug 13, 2012 9:20:05 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter Guice Filter
com.sun.jersey.spi.inject.Errors$ErrorMessagesException
    at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)
    at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:771)
    at com.sun.jersey.guice.spi.container.servlet.GuiceContainer.initiate(GuiceContainer.java:121)
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at com.google.inject.servlet.ServletDefinition.init(ServletDefinition.java:117)
    at com.google.inject.servlet.ManagedServletPipeline.init(ManagedServletPipeline.java:82)
    at com.google.inject.servlet.ManagedFilterPipeline.initPipeline(ManagedFilterPipeline.java:102)
    at com.google.inject.servlet.GuiceFilter.init(GuiceFilter.java:172)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3693)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1015)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1015)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:448)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:552)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Aug 13, 2012 9:20:05 PM org.apache.catalina.core.StandardContext start
SEVERE: Error filterStart
Aug 13, 2012 9:20:05 PM org.apache.catalina.core.StandardContext start
SEVERE: Context [] startup failed due to previous errors 
```

为什么会这样？很难在网上找到信息，并且无法弄清楚要四处寻找的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:02:47.207

原来我没有遵循`@PathParam`type 上的类型规则`BusinessCustomerPathParam`。

此处概述了规则：http: [//jsr311.java.net/nonav/releases/1.1/javax/ws/rs/PathParam.html](http://jsr311.java.net/nonav/releases/1.1/javax/ws/rs/PathParam.html)

> 带注释的参数、字段或属性的类型必须：
> 
> *   Be `PathSegment`，该值将是路径匹配部分的最后一段。参见`UriInfo`检索所有请求路径段的方法。
> *   Be `List<PathSegment>`，该值将是`PathSegment`对应于与命名模板参数匹配的路径段的列表。参见`UriInfo`检索所有请求路径段的方法。
> *   成为原始类型。
> *   有一个接受单个 String 参数的构造函数。
> *   有一个名为`valueOf`或`fromString`接受单个字符串参数的静态方法（例如，参见`Integer.valueOf(String)`）。

我没有采用一个`String`或一个`static`选项的构造函数。

不幸的是，日志中提供的错误消息并不是很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T11:23:24.743

我在尝试绑定已注入参数的接口时收到了同样的消息，但是我忘记将`@Inject`注释添加到我的构造函数中。记得检查一下，因为它让我多年来一直把头撞在墙上。

# java - 在自定义 AlertDialog 中设置嵌套 LinearLayout 的可见性时出现 NPE？

> ID：11957766
> 
> 赞同：1
> 
> 时间：2012-08-14T17:39:10.167
> 
> 标签：java, android, nullpointerexception, visibility, android-linearlayout

我正在尝试显示自定义 AlertDialog。我在包含几个按钮的主 LinearLayout 中有一个 LinearLayout。这些按钮只应该在特定时间显示，所以我试图将布局设置为 GONE。但是，这会在下面指示的行处引发 NPE。有任何想法吗？

```
 @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {      
        //case 0 removed for purposes of space
        case 1: 
            LayoutInflater layoutInflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view=layoutInflater.inflate(R.layout.ingamepopup,null);

        if(getPrefs.getBoolean("custom button checked"+gameNum, false)){
            customButtonLayout.setVisibility(View.VISIBLE);

            cb1.setText(Float.toString(getPrefs.getFloat("button 1 value"+gameNum,1)));
            cb2.setText(Float.toString(getPrefs.getFloat("button 2 value"+gameNum,5)));
            cb3.setText(Float.toString(getPrefs.getFloat("button 3 value"+gameNum,10)));
        } else
            customButtonLayout.setVisibility(View.GONE); //Line 172

        scoreChangeDialog = new AlertDialog.Builder(this)
        .setTitle("Score change")
        .setView(view)
        .create();

        return scoreChangeDialog;
        }
        return null;
    } 
```

customButtonLayout 在 onCreate() 中定义：

```
customButtonLayout = (LinearLayout) findViewById(R.id.llCustomButtonsScoreChange); 
```

并在 R 中定义：

```
public static final int llCustomButtonsScoreChange=0x7f070015; 
```

和 LogCat：

```
 08-14 13:56:07.192: E/AndroidRuntime(10020): FATAL EXCEPTION: main
08-14 13:56:07.192: E/AndroidRuntime(10020): java.lang.NullPointerException
08-14 13:56:07.192: E/AndroidRuntime(10020):    at com.webs.pratia.scorekeeper.InGame.onCreateDialog(InGame.java:172)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.app.Activity.onCreateDialog(Activity.java:2472)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.app.Activity.createDialog(Activity.java:881)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.app.Activity.showDialog(Activity.java:2547)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.app.Activity.showDialog(Activity.java:2514)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at com.webs.pratia.scorekeeper.InGame.onListItemClick(InGame.java:121)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.app.ListActivity$2.onItemClick(ListActivity.java:321)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.widget.AdapterView.performItemClick(AdapterView.java:289)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.widget.ListView.performItemClick(ListView.java:3688)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1873)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.os.Handler.handleCallback(Handler.java:587)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.os.Looper.loop(Looper.java:123)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at android.app.ActivityThread.main(ActivityThread.java:4627)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at java.lang.reflect.Method.invokeNative(Native Method)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at java.lang.reflect.Method.invoke(Method.java:521)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-14 13:56:07.192: E/AndroidRuntime(10020):    at dalvik.system.NativeStart.main(Native Method) 
```

**编辑**

经过更多测试，我在 ingamepopup.xml 中定义的所有变量似乎都返回 null（如 cb1、cb2、cb3）。ingamepopup.xml 不是活动的主要 xml。setContentView(ingame.xml) 和尝试从 ingamepopup.xml 访问视图（由充气机充气）之间是否存在冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:32:40.320

此行中的 NPE 表示 customButtonLayout 为空。因为 View 是一个类，因此不能为空。看起来你已经意识到了这一点。现在，如果 customButtonLayout 为空，则可能有不同的原因

1.  尚未调用 Create。当您尝试隐藏视图时，我认为它之前已经显示过。如果是这样，那不是一个选择。
2.  findViewById 没有找到视图。同样的逻辑适用。
3.  最后一个选项是有人在初始化后将其设置为空。这个很明显，你可能已经分析过了。
4.  此调用在一个实例上完成，而另一个实例已被初始化。也许 customButtonLayout 是在一个超类中定义的，并且您假设它是每个子类型实例上的相同变量。仅当它是静态成员时才适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:26:22.027

终于发现问题了。因为我试图从 AlertDialog 的视图中引用对象（正确的术语？），所以我引用了我膨胀的视图：view.findViewById(...)。通过声明 findViewById(...) 程序试图从加载到主活动的视图中查找 ID。新代码如下所示：

```
 LayoutInflater layoutInflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            View view=layoutInflater.inflate(R.layout.ingamepopup,null); //This is the view that has to be referenced.

            mainLayout = (LinearLayout) view.findViewById(R.id.llScoreChange); 
//notice view.findViewById(...)
            customButtonLayout = (LinearLayout)  view.findViewById(R.id.llCustomButtonsScoreChange);
            plus = (ImageButton)  view.findViewById(R.id.ibPlusPU);
            minus = (ImageButton)  view.findViewById(R.id.ibMinusPU);
            cancel = (ImageButton)  view.findViewById(R.id.ibCancelPU);
            cb1 = (Button)  view.findViewById(R.id.bCustom1PU);
            cb2 = (Button)  view.findViewById(R.id.bCustom2PU);
            cb3 = (Button)  view.findViewById(R.id.bCustom3PU);
            score = (EditText)  view.findViewById(R.id.etScoreChange);

            if(getPrefs.getBoolean("custom button checked"+gameNum, false)){
                customButtonLayout.setVisibility(View.VISIBLE);

                cb1.setText(Float.toString(getPrefs.getFloat("button 1 value"+gameNum,1)));
                cb2.setText(Float.toString(getPrefs.getFloat("button 2 value"+gameNum,5)));
                cb3.setText(Float.toString(getPrefs.getFloat("button 3 value"+gameNum,10)));
            } else{
                customButtonLayout.setVisibility(View.GONE);
            }

            scoreChangeDialog = new AlertDialog.Builder(this)
            .setTitle("Score change")
            .setView(view)
            .create();

            return scoreChangeDialog;
        } 
```

# java - 从 Java 文件创建 jar 的库

> ID：11957767
> 
> 赞同：-1
> 
> 时间：2012-08-14T17:39:11.207
> 
> 标签：java, jar

我正在尝试用 Java 编写一个程序，该程序将从物理位置收集一组指定的文件并将它们放在某个目录的 jar 中。

我知道我可以`java.util.jar`为此使用包。这个包肯定很棒，但我想知道 SO 的任何人是否有任何他们可以推荐的第三方库。

TL;DR：拾取文件，通过将它们放置在预定义的目录中来创建 jar，所有这些都在运行时在 java 文件中。

PS：我没有找到任何与此问题类似的参考资料，但如果有，请参考我。此外，标题可能具有误导性，但我没有找到更好的词来解释我的问题。

编辑1：无论如何，我并不是说`java.util.jar`不好或不完整。我要问的是是否有人使用过任何替代解决方案！

编辑 2：我正在尝试从 java 程序内部创建 jar。罐子也可以很大（~500mb）。也尝试 jar 媒体文件。简单地说，我从驱动器上的某些位置获取各种文件，并尝试通过将它们放置在标准位置来创建一个 jar 文件。

谢谢，
伊瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:12:18.690

查看 java.util.zip 包。罐子只是 zip 文件，里面有一些额外的东西

# matlab - 在matlab中绘制彩色编码图

> ID：11957769
> 
> 赞同：0
> 
> 时间：2012-08-14T17:39:16.230
> 
> 标签：matlab, 2d

我需要使用 .dat 文件绘制彩色编码的 2d 图。文件中的数据排列为

> ```
> 48.000000 0.000184 0.400000
> 48.500000 0.000185 0.400000
> 49.000000 0.000186 0.400000
> 49.500000 0.000187 0.400000
> 50.000000 0.000187 0.400000
> 50.500000 0.000186 0.400000
> 51.000000 0.000186 0.400000
> 51.500000 0.000186 0.400000
> 52.000000 0.000185 0.400000
> 52.500000 0.000184 0.400000
> 53.000000 0.000184 0.400000
> 53.500000 0.000182 0.400000
> 54.000000 0.000180 0.400000
> 54.500000 0.000179 0.400000
> 55.000000 0.000177 0.400000
> 55.500000 0.000174 0.400000
> 56.000000 0.000172 0.400000
> 
> ```

这里的第 3 列也在发生变化。有将近3000行。我需要在第一个和第二个变量之间绘制一个彩色编码的二维图，并且颜色必须作为第三个变量的高度。有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T02:21:59.343

如果您希望数据的颜色根据第 3 列中的值从深色变为浅色，那么您最好只使用[scatter](http://www.mathworks.com/help/techdoc/ref/scatter.html)函数。根据文档

> **scatter(X,Y,S,C)**在向量 X 和 Y 指定的位置显示彩色圆圈（大小必须相同）。
> 
> **S**确定每个标记的面积...
> 
> **C**确定每个标记的颜色。当 C 是与 X 和 Y 长度相同的向量时，C 中的值线性映射到当前颜色图中的颜色。

这意味着您可以明确选择您希望数据使用的颜色图。假设*col1*、*col2*、*col3*包含数据三列中的每一列中的值，以下代码将绘制散点图，其中 col1 和 col2 分别定义 x 和 y 位置， col3 定义每个点的颜色。

```
scatter(col1, col2, 25, col3, '.');
colormap(gray); 
```

绘制散点图后，我明确地将颜色图设置为*灰色*，这样 col3 中值小的点会变暗，而值大的点会变亮。请注意，在此示例中，标记区域为 25，标记类型为点 ('.')，由*scatter*函数的第 3 和第 5 个参数指定。

除了*gray*之外，您还可以使用许多其他颜色图。例如，*热的*或*铜*的可能更美观。colormap 函数的[文档](http://www.mathworks.com/help/techdoc/ref/colormap.html)提供了有关其他选项的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:55:48.803

利用`>> gscatter(column1,column2,column3)`

由于您的第 3 列是相同的值，因此该图将如下所示： ![在此处输入图像描述](../Images/498576041b9fb53c63e1761ed0394c7e.png)

但是，在第三列添加一些噪音，你会得到这样的结果：

![在此处输入图像描述](../Images/def1b704085569044a43f79e922a9871.png)

# android - 禁用从纵向到横向的默认动画

> ID：11957772
> 
> 赞同：42
> 
> 时间：2012-08-14T17:39:33.283
> 
> 标签：android, android-layout, android-animation

我有一个包含几个“正常”活动的应用程序，可以在横向或纵向上运行。它们专为肖像而设计，主要用于肖像。

这个应用程序有一个使用相机并锁定在横向上的活动。我通过将图像和文本旋转 90 度来“模拟”这个活动是纵向的，所以它看起来像其他活动。

在某些设备上，例如三星 Galaxy Tab 7 和 Galaxy S3，**从正常的纵向活动到相机横向活动并返回时会显示旋转动画**。这让用户感到困惑，因为横向活动模拟纵向。

**有没有办法删除这个旋转动画**？理想情况下，我想将默认纵向更改为纵向动画，但只需删除旋转动画就足够了。

我试过了

```
overridePendingTransition(0, 0); 
```

该方法的其他变体没有成功。

[添加]

根据@igalarzab、@Georg 和@Joe 的建议，我做到了（仍然没有运气）：

*   将 android:configChanges="orientation|screenSize" 添加到 Manifest
*   添加了 onConfigurationChanged
*   创建了一个什么都不做的虚拟动画并添加了 overridePendingTransition(R.anim.nothing, R.anim.nothing);

我有这些结果：

*   onConfigurationChanged 仅在旋转相同的 Activity 时调用（纵向上的 Activity A -> 横向上的 Activity A）。但是从纵向上的活动 A -> 横向上的活动 B 时不会调用它
*   这阻止了 Activity 在旋转时重新启动，但它没有删除旋转动画（在 Galaxy S3、Galaxy Nexus、Galaxy Tab 7.0 和 Galaxy Tab 10.1 上测试）
*   overridePendingTransition(R.anim.nothing, R.anim.nothing); 删除了正常的过渡（纵向->纵向和横向->横向），但没有删除旋转动画（纵向->横向，反之亦然）。

[视频]

我上传了一个视频，显示我想禁用的动画。在将手机保持在纵向时从相机活动（锁定为横向）更改为其他活动时会发生这种情况：

[http://youtu.be/T79Q1P_5_Ck](http://youtu.be/T79Q1P_5_Ck)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-28T05:59:56.357

抱歉没有办法控制旋转动画。这是在您的应用程序之外完成的，在窗口管理器的深处，它会在其中截取当前屏幕的屏幕截图，调整大小并重建其背后的 UI，然后运行内置动画以从原始屏幕截图过渡到新重建的屏幕截图用户界面。当屏幕旋转发生变化时，无法修改此行为。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-01-16T15:20:07.597

这是股票相机应用程序禁用旋转动画的方式：

```
private void setRotationAnimation() {
    int rotationAnimation = WindowManager.LayoutParams.ROTATION_ANIMATION_CROSSFADE;
    Window win = getWindow();
    WindowManager.LayoutParams winParams = win.getAttributes();
    winParams.rotationAnimation = rotationAnimation;
    win.setAttributes(winParams);
} 
```

注意：根据下面的[API 参考](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#rotationAnimation)和评论，这只有效：

*   API 级别 18 或以上
*   该`FLAG_FULLSCREEN`标志是为`WindowManager.LayoutParams`活动设置的
*   Activity 未被另一个窗口覆盖（例如，长按电源按钮触发的关机弹出窗口）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-26T12:32:07.020

You can set in the AndroidManifest a property called `android:configChanges` where you can decide which changes you want to manage in code. In this way, the rotation change animation will be disabled and you can handle it as you want in the method `onConfigurationChanged` of your `Activity`.

```
<activity
    android:name=".MySuperClass"
    android:label="@string/read_qrcode"
    android:screenOrientation="portrait"
    android:configChanges="orientation" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-24T20:56:03.623

我把它放在 mainActivity 中，它取消了旋转动画：

```
@Override
    public void setRequestedOrientation(int requestedOrientation) {
        super.setRequestedOrientation(requestedOrientation);

        int rotationAnimation = WindowManager.LayoutParams.ROTATION_ANIMATION_JUMPCUT;
        Window win = getWindow();
        WindowManager.LayoutParams winParams = win.getAttributes();
        winParams.rotationAnimation = rotationAnimation;
        win.setAttributes(winParams);

    } 
```

更多细节[在这里](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#rotationAnimation)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-26T12:16:33.883

您可能已经尝试过，但以防万一：

尝试定义一个“什么都不做”动画并`overridePendingTransition()`用它的 id 调用。也许是这样的：

```
 <set xmlns:android="http://schemas.android.com/apk/res/android" 
         android:fillAfter="true">
        <translate
            android:fromXDelta="0"
            android:toXDelta="0"
            android:duration="100" />
    </set> 
```

抱歉，我没有用于测试的 Galaxy 设备 :)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-15T08:10:32.007

如果您只想将活动设置为纵向模式，您可以像这样在清单文件中执行此操作

```
 <activity
     android:name=".Qosko4Activity"
     android:label="@string/app_name"
     android:screenOrientation="portrait" >
     <intent-filter>
         <action android:name="android.intent.action.MAIN" />
         <category android:name="android.intent.category.LAUNCHER" />
     </intent-filter>
 </activity> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-26T20:58:27.693

> 您可以在 AndroidManifest 中设置一个名为 android:configChanges 的属性，您可以在其中决定要在代码中管理哪些更改。这样旋转变化动画就会被禁用，你可以在你的Activity的onConfigurationChanged方法中随意处理。

这应该可以，但是根据[此页面](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)，您还应该通过将 android:configChanges="orientation|screenSize" 添加到您的活动标签来将 screenSize 添加到 configChanges。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-04-25T07:47:31.747

成功勾选：Java - Android 9 (Pie) - Android Studio 4.1.3 - 华为P10

六个月来，我无法解决这个需求。问题出在代码中未分配的标志“FLAG_FULLSCREEN”中。

第一步MainActivity.java：

```
public class MainActivity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    /* getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN); */ // If the animation still is, try applying it.
    setRotationAnimation(); 
  }

  private void setRotationAnimation() {
    int rotationAnimation = WindowManager.LayoutParams.ROTATION_ANIMATION_JUMPCUT;
    Window win = getWindow();
    WindowManager.LayoutParams winParams = win.getAttributes();
    winParams.rotationAnimation = rotationAnimation;
    win.setAttributes(winParams); 
  }

  public void Button (View view) {
    // Connected to android:onClick="Button" in XML.
    Intent intent = new Intent(MainActivity.this, MainActivity2.class);
    startActivity(intent);
  }
} 
```

下一步MainActivity2.java：

```
public class MainActivity2 {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main2);

    /* getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN); */ // If the animation still is, try applying it.
    setRotationAnimation(); 
  }

  private void setRotationAnimation() {
    int rotationAnimation = 
       WindowManager.LayoutParams.ROTATION_ANIMATION_JUMPCUT;
    Window win = getWindow();
    WindowManager.LayoutParams winParams = win.getAttributes();
    winParams.rotationAnimation = rotationAnimation;
    win.setAttributes(winParams); 
  }

  public void Button (View view) {
    Intent intent = new Intent(MainActivity2.this, MainActivity.class);
    startActivity(intent);
  }
} 
```

下一步styles.xml：

```
<resources>
  <style name="AppTheme" parent="Theme.AppCompat.DayNight.NoActionBar">
      <item name="android:windowFullscreen">true</item>
  </style>
</resources> 
```

我理解的简单事情：您必须首先在任何地方启动“setRotationAnimation()”，然后再运行 activity2。启动 activity2 时，您必须在其中运行“setRotationAnimation()”。工作不正确。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-01-16T14:06:19.000

Against them who said no I say yes it is possible and it is very simple! The first thing may sound stupid but lock your application to the desired orientation! Then keep asking the gyrometer what orientation the device has an last but not least rotate or animate your views to the new orientation!

Edit: you may want to hide the system ui since it won't rotate. Mario

# ruby-on-rails-3 - letter_opener 预览中的错误编码

> ID：11957774
> 
> 赞同：2
> 
> 时间：2012-08-14T17:39:45.307
> 
> 标签：ruby-on-rails-3, email, encoding, devise

我正在使用`letter_opener`gem 来预览发送电子邮件。

默认`Devise`和应用程序区域设置是`ru`（俄语，[https://github.com/kiote/devise-rus/blob/master/devise.ru.yml](https://github.com/kiote/devise-rus/blob/master/devise.ru.yml)）。

我对电子邮件编码有疑问：![在此处输入图像描述](../Images/c61dd24c9076457ae487f7d791cafc14.png)

有人有同样的问题吗？我已经检查了语言环境文件编码，它似乎没问题。

# knockout.js - 对象层次导航是否会导致 KO 出现问题？

> ID：11957777
> 
> 赞同：0
> 
> 时间：2012-08-14T17:39:57.893
> 
> 标签：knockout.js

这是小提琴：http: [//jsfiddle.net/edsinek/5EP4n/](http://jsfiddle.net/edsinek/5EP4n/)

我被两个问题困住了。

首先，在我的 MaterialLineItem 数据结构中，我有一个对所选材质对象的引用（材质 - 其中 Material 被定义为它自己的对象）。由此，我想在跨度中显示材料名称或在选择中选择。我有条件的东西工作，但跨度没有显示文本。我很困惑为什么向下导航对象层次结构不起作用。

其次，我试图根据材料选择的选择使“其他材料”文本框可见。最初，我将 isOtherMaterial 函数设置为对 MaterialLineItem 结构的计算（我认为它看起来更好），但这不起作用，所以我尝试了另一种方法，将其设为根函数 - 这也不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T02:08:58.857

1.  `()`再次访问 observable 时忘记添加括号。你需要：`text: material().materialName`

2.  您正在引用`material.otherMaterial`，但您的模型仅在订单项级别定义了 otherMaterial。你也忘记了这里的括号 - 也在你的`isOtherMaterial`函数中。我不知道我对 otherMaterial 所做的更改是否有意义，但您当前的代码也没有多大意义：P

更新小提琴：http: [//jsfiddle.net/antishok/5EP4n/5/](http://jsfiddle.net/antishok/5EP4n/5/)

# python - 绘制对数正态分布

> ID：11957798
> 
> 赞同：0
> 
> 时间：2012-08-14T17:41:33.633
> 
> 标签：python, matplotlib

我正在尝试绘制对数正态分布，以便可以使用下面的代码将其与样本数据的直方图进行比较，但我的图看起来不正确。我的代码有什么地方我做得不对吗？C数组的长度为17576

```
import matplotlib.pyplot as plt
import numpy as np

data=np.loadtxt(F)
C=data[:,3]

x = np.ma.log(C)
avg = np.mean(x)
std = np.std(x)
dist=lognorm(std,loc=avg)
plt.plot(C,dist.pdf(C),'r')
plt.show() 
```

![我的情节](../Images/3012aec7fc7a330af0bfc4255ac89b8b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:53:08.693

看起来您的 x 数据未按排序顺序排列。试试这个

```
ind = np.argsort(C)
xx = C[ind]
yy = dist.pdf(C)[ind]
plt.plot(xx, yy, 'r') 
```

绘图只是用直线连接所有 (x,y) 对，因此您需要确保从左到右（或从右到左）跟踪您的函数。或者，您可以跳过情节之间的线条：

```
plt.plot(C, dist.pdf(C), 'ro') 
```

# java - 将 HttpSession 与 GAE 一起使用时，我还需要做什么？

> ID：11957800
> 
> 赞同：1
> 
> 时间：2012-08-14T17:41:42.853
> 
> 标签：java, google-app-engine, session, jakarta-ee, httpsession

我读到，设置我需要放置的会话属性：

```
<sessions-enabled>true</sessions-enabled> 
```

在*appengine-web.xml*内部并实现`java.io.Serializable.` *（虽然我不明白这是为什么！）*

以下是使用*HttpSession*的 servlet 之一：

```
 @Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) 
        throws ServletException, IOException {
    String userName = request.getParameter("username");
    String password = request.getParameter("password");
    ArrayList list = new ArrayList();
    if(userName.compareTo("user") != 0 ) {
        list.add("Wrong Username");
    } else if(password.compareTo("password") != 0) {
        list.add("Wrong Password");
    }

    if(list.isEmpty()) {
        HttpSession session = request.getSession();
        if(session.isNew()) {
            session.setAttribute("UserRole", "PW :Admin");
            session.setMaxInactiveInterval(900);
            RequestDispatcher rd = request.getRequestDispatcher("abc/cpanel/PcPanel.jsp");
            request.setAttribute("SessionStatus", "JC"); // Just Created 
            rd.forward(request, response);
        }
    } else {
        response.sendRedirect("abc/cpanel/PcPanel_Login.jsp");
    }
} 
```

在验证用户名和密码并输入`if`块后，请求应该被转发到*PcPanel Login.jsp*但它不会发生。而是会出现一个空白页面，其中包含该 servlet 的地址。但如果我删除/评论所有会话垃圾，它工作正常。为什么会这样？我错过了什么还是我在某个地方犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:23:35.140

不要使用`isNew()`. `isNew()`仅在首次建立会话 = 用户首次登陆您的任何页面时才成立。

请参阅此问题的答案：[会话不工作 - GAE/J](https://stackoverflow.com/questions/10712910/session-is-not-working-gae-j)

# php - 数据库中的 PDO 计数表

> ID：11957806
> 
> 赞同：0
> 
> 时间：2012-08-14T17:42:24.523
> 
> 标签：php, mysql, count, pdo

以下函数旨在获取数据库中的表。

```
$check = $fsdbh->query('show tables')->fetch(); 
```

它无法计数，因为它有一个额外的层，即数据库名称。

打印_r（）：

```
Array ( [Tables_in_dbtest] => test [0] => test ) 
```

所以我们需要进一步进入数组，只计算数据库的数量。我们将如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T17:46:13.787

默认获取样式是`PDO::FETCH_BOTH`，您需要的是`PDO::FETCH_ASSOC`或`PDO::FETCH_NUM`。

[有关更多信息，`fetch`](http://php.net/manual/en/pdostatement.fetch.php)请参阅[文档](http://php.net/manual/en/pdostatement.fetch.php)。

此代码应该适合您：

```
$check = $fsdbh->query('show tables')->fetch(PDO::FETCH_NUM); 
```

您可以做的另一件事是在连接到数据库后使用[PDO::setAttribute更改默认提取样式。](http://www.php.net/manual/en/pdo.setattribute.php)`PDO::FETCH_ASSOC`

```
$dbh = new PDO('...');
$dbh->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:03:29.223

正确的方法是做

```
SELECT count(*)
FROM INFORMATION_SCHEMA
WHERE TABLE_SCHEMA='yourdbname'; 
```

# symfony - Amazon ELB 背后的 symfony2：总是信任代理数据？

> ID：11957811
> 
> 赞同：3
> 
> 时间：2012-08-14T17:42:44.443
> 
> 标签：symfony, proxy, amazon-web-services, load-balancing

我在 AWS 上运行 Symfony2 Web 应用程序，并且正在使用弹性负载均衡器。

在控制器方法中，我需要执行以下操作来获取请求网页的用户的 IP：

```
$request->trustProxyData();
$clientIp = $request->getClientIp(True); 
```

这会带来任何安全风险吗？我没有使用客户端 IP 进行权限提升，我只是在记录它。

有什么方法可以强制`trustProxyData()`，或者重新配置`$request->getClientIp()`为[DWIM](http://en.wikipedia.org/wiki/DWIM)吗？我的应用程序将始终位于负载均衡器后面（除非我在桌面上进行开发）。

相关： http: [//fabien.potencier.org/article/51/create-your-own-framework-on-top-of-the-symfony2-components-part-2](http://fabien.potencier.org/article/51/create-your-own-framework-on-top-of-the-symfony2-components-part-2)（但它没有说是否有一些全球性的配置所以我不必`trustProxyData()`到处打电话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:59:44.977

您可以配置框架包来执行此操作：[http ://symfony.com/doc/2.0/reference/configuration/framework.html#trust-proxy-headers](http://symfony.com/doc/2.0/reference/configuration/framework.html#trust-proxy-headers)

```
framework:
    trust_proxy_headers: true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T10:12:38.657

笔记：

trust_proxy_headers 选项已被弃用，并将在 Symfony 2.3 中删除。

有关如何正确信任代理数据的详细信息，请参阅[trusted_proxies](http://symfony.com/doc/2.0/reference/configuration/framework.html#trusted-proxies)和[Trusting Proxies 。](http://symfony.com/doc/2.0/components/http_foundation/trusting_proxies.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-01T12:55:06.077

我用了

```
Request::setTrustedProxies(array($request->server->get('REMOTE_ADDR'))); 
```

在`web/app.php`解决问题。

在这里查看我的答案：[https ://stackoverflow.com/a/28793609/2030937](https://stackoverflow.com/a/28793609/2030937)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T19:01:11.390

我不确定任何一般的安全风险，但我可以给你一个提示，如何避免在每个控制器操作中调用此方法。

在你`app.php`之前`$kernel->handle(...);`你应该设置：

```
Request::trustProxyData(); 
```

* * *

干杯；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-30T12:01:34.117

在现代 symfony 版本中：[https ://symfony.com/doc/current/deployment/proxies.html#but-what-if-the-ip-of-my-reverse-proxy-changes-constantly](https://symfony.com/doc/current/deployment/proxies.html#but-what-if-the-ip-of-my-reverse-proxy-changes-constantly)

如果您的 elb 在云端代理后面，您也应该看看这个包： [https ://packagist.org/packages/fmaj/cloudfront-trusted-proxies](https://packagist.org/packages/fmaj/cloudfront-trusted-proxies)

# javascript - 通过 Websocket 发送的 JSON 对象的大小

> ID：11957812
> 
> 赞同：1
> 
> 时间：2012-08-14T17:42:52.033
> 
> 标签：javascript, json, web-applications, websocket, benchmarking

有没有办法获取通过 websockets 发送的 JSON 的大小？我每 20 毫秒发送一次可变长度的消息，我想知道它们的大小以进行优化。

我已经设法通过 Chrome 开发人员工具中网络部分的 websockets 框架选项卡找出消息的长度。有没有类似的东西可以查看邮件大小？或者也许我必须用 javascript 编写自己的函数？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:52:42.583

这是有关如何在 Google Chrome 中启用 WebSocket 帧调试的[详细指南。](http://blog.kaazing.com/2012/05/09/inspecting-websocket-traffic-with-chrome-developer-tools/)如果博客文章离线，我会将它们发布在这里：

1.  确保您的 Chrome 版本为 20+。
2.  导航到托管在 websocket.org 站点上的 Echo 演示。
3.  打开 Chrome 开发者工具。
4.  单击网络，并过滤开发工具显示的流量，单击 WebSockets（一直在底部）。
5.  在 Echo 演示中，单击连接。
6.  点击左侧的www.websocket.org，代表WebSocket连接。
7.  确保您位于“标题”选项卡上。此选项卡显示 WebSocket 握手。
8.  单击 Echo 演示中的发送按钮。
9.  这一步很重要：要在 Chrome 开发人员工具中查看 WebSocket 框架，在名称/路径下，单击 echo.websocket.org 条目，代表您的 WebSocket 连接。这会刷新右侧的主面板，并使 WebSocket Frames 选项卡显示实际的 WebSocket 消息内容。注意：每次发送或接收新消息时，都必须通过单击左侧的 echo.websocket.org 条目来刷新主面板。

另一种可能性是使用[WireShark](http://www.wireshark.org/)。

# asp.net - 带有 IIS 的 Web 管理工具数据库

> ID：11957813
> 
> 赞同：0
> 
> 时间：2012-08-14T17:42:54.920
> 
> 标签：asp.net, visual-studio-2010, iis, asp.net-membership, web-administration

我为我的大学创建了一个需要会员资格的网站。我使用了 Visual Studio 中的 Web 管理工具并创建了用户和规则。当我从 Visual Studio 中对其进行测试时，它工作正常。Web 管理工具会在保存成员数据的 App_Data 文件夹中自动创建一个名为 ASPNETDB.MDF 的 SQL 数据库。我的问题是当我在 IIS 中添加网站时数据库会工作吗？我必须创建一个 sql server 数据库并添加一个连接吗？请回答我。这真的很重要。我只想要一个非常基本的会员资格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:34:05.920

您可以使用 /App_Data 中的 db，如此 SO 答案中所述：
[ASP.NET: How to deploy App_Data to webhost?](https://stackoverflow.com/questions/1570893/asp-net-how-to-deploy-app-data-to-webhost) - 但这取决于您的服务器设置。

使用会员资格时，我的偏好是从 SQL / SQL Express 中的单独数据库运行它，因为如果需要，可以选择在不同的服务器上运行 IIS 站点和数据库。对于安全/扩展等也更好。

创建数据库后，您可以使用 aspnet_regsql.exe 将会员服务安装到数据库中。它通常位于此处 - c:\Windows\Microsoft.NET\Framework\< versionNumber >\aspnet_regsql.exe。可以作为 GUI 或命令行运行：http:
[//msdn.microsoft.com/en-us/library/x28wfk74.aspx](http://msdn.microsoft.com/en-us/library/x28wfk74.aspx)

从单独的数据库运行会员资格时，您还需要在 web.config 中配置提供程序。类似这样的东西：

```
<connectionStrings>
    <remove name="LocalSqlServer" />
    <add name="MyMembershipConnectionString" 
    connectionString="Data Source=SERVER123\SQLEXPRESS;Initial Catalog=Database123;Persist Security Info=True;User ID=User123;Password=Password123" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

在 <System.Web> 部分：

```
<roleManager defaultProvider="MySqlRoleProvider" enabled="true" 
    cacheRolesInCookie="true" cookieName=".ASPROLES" cookieTimeout="30" 
    cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="All">
  <providers>
    <clear />
    <add name="MySqlRoleProvider" type="System.Web.Security.SqlRoleProvider"
        connectionStringName="MyMembershipConnectionString" applicationName="MyAppName" />
  </providers>
</roleManager>

<membership defaultProvider="MySqlMembershipProvider" userIsOnlineTimeWindow="720">
  <providers>
    <clear />
    <add name="MySqlMembershipProvider" 
         type="System.Web.Security.SqlMembershipProvider" 
         connectionStringName="MyMembershipConnectionString" 
         enablePasswordRetrieval="false" 
         enablePasswordReset="true" 
         requiresQuestionAndAnswer="false" 
         requiresUniqueEmail="true" 
         passwordFormat="Hashed" 
         minRequiredPasswordLength="8" 
         minRequiredNonalphanumericCharacters="0" 
         passwordStrengthRegularExpression="((?=.*\d)(?=.*[a-z]).{6,20})" 
         maxInvalidPasswordAttempts="5" 
         passwordAttemptWindow="30" />
  </providers>
</membership> 
```

我已经多次使用类似的设置，没有任何问题。如果使用 /App_Data 中的 db，则不需要执行任何 web.config 内容

# php - 产品数据库属性

> ID：11957821
> 
> 赞同：0
> 
> 时间：2012-08-14T17:43:49.670
> 
> 标签：php, mysql, zend-framework

我在为在线网络打印和产品数据库设置产品数据库时遇到了困难。有些产品只是静态产品，有些可能有尺寸，有些则具有完整的网络打印功能。Web-to-print 产品可能很简单，例如具有一个或两个属性（名称/标题）的名称标签或具有 40 个或更多属性和约束的小册子。任何以正确方式建模的方向都将不胜感激。目前使用 MySQL/PHP。我应该考虑使用 NoSQL 方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:50:15.720

我可能会建议使用下表来实现您想要做的事情：

*   `products`- 每个产品一行的通用表格，其中包含所有产品共有的一般信息
*   `product_attributes`- 每个产品属性的列表及其名称和所有产品属性共有的任何其他信息
*   `product_attribute_assignments`- 一个表，其中包含一个产品列，该列具有产品表的外键，以及分配给产品的每个属性的列，该表具有 product_attributes 表的外键
*   `product_attribute_values`- 如果您想存储每个用户为这些属性输入的值，您将需要一些用于会话的列，一个用于产品的列，一个用于属性的列，以及一个用于属性值的列会议。

然后，您应该能够遍历每个 product_attribute_assignments 行以提示每个值，然后根据需要将每个值存储在`product_attribute_values`表中。

# objective-c - UIView 完全隐藏

> ID：11957823
> 
> 赞同：0
> 
> 时间：2012-08-14T17:43:58.747
> 
> 标签：objective-c, ios, cocoa-touch, uiview, uitabbar

我已经实现了一个自定义 UITabbar （从头开始制作），但是当我尝试使用 KTPhotoBrowser 浏览照片时它仍然显示并且当我将它设置为隐藏或 removeFromSuperView 我在它的位置出现白条时，我该如何删除视图完全？编辑：最终隐藏了标签栏的视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:48:45.297

这可能取决于你的 UIView 层次结构的结构。发布代码或尝试设置隐藏 UITabbar 的超级视图或标签栏本身。

# c# - ListItems 文本未显示在列表框中

> ID：11957827
> 
> 赞同：0
> 
> 时间：2012-08-14T17:44:38.977
> 
> 标签：c#, asp.net

在我的带有 Listbox 的 asp.net 应用程序中，最奇怪的事情发生在我身上——ListItems 没有显示它们的文本。我知道它们在那里，因为当我设置断点时我可以看到它们，最重要的是，我使用的代码几乎与我在另一个页面上显示的代码完全相同。我的列表框位于一个由模式弹出窗口调用的面板上，如下所示：

```
<asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" 
DynamicServicePath="" Enabled="True" TargetControlID="Button5"
BackgroundCssClass="modalBackground" 
DropShadow="True"
PopupControlID="Panel2" CancelControlID="Button5" OkControlID="Button5">
</asp:ModalPopupExtender>
<asp:Panel ID = "Panel2" runat="server" CssClass="modalPopup">
  <table>
    <tr>
      <td class="style3">
        <asp:Label ID="Label5" runat="server" Text="The following users are queued front of you. Select 'OK' to add your name  to the queue and 'Cancel' to cancel."></asp:Label>
      </td>
    </tr>
  </table>
  <asp:ListBox ID="ListBox6" runat="server" Width="100%"></asp:ListBox>
  <center>
    <asp:Button ID="reqOk" runat="server" Text="OK" onclick="reqOk_Clk" />
    <asp:Button ID="reqCncl" runat="server" Text="Cancel" onclick="reqCncl_Clk" />
  </center>
</asp:Panel> 
```

列表框（ListBox6）的填充就像在页面后面的代码中一样：

```
SqlConnection sqlconn = new SqlConnection(ConfigurationManager.ConnectionStrings  
["something"].ConnectionString);
SqlCommand sqlcommand = new SqlCommand();
sqlcommand.Connection = sqlconn;
string cmd = "";
cmd = " SELECT devices.requestQueue, devices.invnumber FROM devices WHERE devices.invnumber='" + str + "'";
sqlcommand.CommandText = cmd;
SqlDataAdapter da = new SqlDataAdapter(sqlcommand);
DataSet ds = new DataSet();
da.Fill(ds);
DataTable dt = ds.Tables[0];
object[] obj = dt.Rows[0].ItemArray;
sqlconn.Close();
hasRequest = true;
int i2 = 0;
if (!obj[0].Equals(System.DBNull.Value))
{
  string see = (string)obj[0];
  string[] words = see.Split(',');
  foreach (string word in words)
  {
    i2++;
    if (word.Contains(getname(HttpContext.Current.User.Identity.Name)))
    {
      showStuff = false;
      ListItem item = new ListItem(word);
      ListBox6.Items.Add(item);
      ModalPopupExtender1.Show();
      Label5.Text = "You have already requested " + (string)ViewState["inventory"] + ". Please press cancel and request a different device.";
      reqOk.Visible = false;
    }
    else
    {
      ListItem item = new ListItem(word);
      ListBox6.Items.Add(item);
    }
  }
}
/*foreach (object o in ListBox6.Items)
{
  Label4.Text += o.ToString() + " ";
}*/
if (showStuff == true)
{
  ListBox6.DataBind();
  if (obj[0].Equals(System.DBNull.Value) || (string)obj[0] == "")
    i2 = 0;
  Label5.Text = "The following " + i2 + " user(s) are queued in front of you for device " + str + ". Select 'OK' to add your name to the queue and 'Cancel' to cancel. Your name will not be added to the queue if you select 'Cancel'.";
ModalPopupExtender1.Show(); 
```

让这超级令人沮丧的是，当我从上面取消注释这段代码时：

```
/*foreach (object o in ListBox6.Items)
{
  Label4.Text += o.ToString() + " ";
}*/ 
```

然后标签 4 正确显示了我希望我的 ListBox 显示的 ListBox 中的每个项目！所以，我知道 ListItems 被正确添加到 ListBox 中；我只是不明白为什么他们没有在列表框中显示任何文本。有任何想法吗？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:18:33.647

从您的代码来看，问题出`showStuff`在`true`. 您正在手动将项目添加到 ListBox，然后调用`ListBox.DataBind`非数据绑定列表框，这将清空其内容（因为`AppendDataBoundItems`未设置为`true`）。设置`DataSource`、`DataValueField`和`DataTextField`，或停止数据绑定，您的 ListBox 应按预期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:40:38.150

好的，我假设这只是发生了一些奇怪的错误。为了解决这个问题，我刚刚制作了一个新的模态弹出扩展器、一个新面板并更改了列表框和模态弹出扩展器上的名称。现在它工作得很好......真的很奇怪，但它现在工作了。

# post - wkhtmltopdf 获取/发布命令

> ID：11957832
> 
> 赞同：2
> 
> 时间：2012-08-14T17:45:32.033
> 
> 标签：post, get, wkhtmltopdf

我正在尝试让 wkhtmltopdf 截取[http://www.health.ny.gov/professionals/doctors/conduct/license_lookup.htm](http://www.health.ny.gov/professionals/doctors/conduct/license_lookup.htm)的屏幕截图，并在字段搜索许可证“姓氏，第一”。以下是我当前在命令行中发送但无法正常工作的内容。

wkhtmltopdf -n post [http://www.nysed.gov/COMS/OP001/OPSCR1](http://www.nysed.gov/COMS/OP001/OPSCR1) lastname,first screenshot.pdf

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:04:49.267

如果您尝试从搜索结果页面中获取 PDF，则以下命令使用发布时的最新版本 (wkhtmltopdf 0.11.0 rc2)：

```
wkhtmltopdf --post profcd 60 --post pname smith http://www.nysed.gov/COMS/OP001/OPSCR1 out.pdf 
```

您可以使用`wkhtmltopdf -V`.

您需要 profcd ，因为支持似乎需要它才能进行搜索，否则您会得到类似“必须选择专业”的信息。

这是你的意思吗？或者您是否想要搜索页面本身的 PDF，其中包含您的值填充的表单输入？这将需要一些技巧，我认为这不是不可能的。

# wpf - WPF - 按钮 IsEnabled 绑定转换器

> ID：11957833
> 
> 赞同：1
> 
> 时间：2012-08-14T17:45:51.010
> 
> 标签：wpf, button, binding, converter, isenabled

我有一个`ObservableCollection<MyEntity>`并且`MyEntity`有一个`IsChecked`带有`PropertyChanged`事件的属性。我有一个`Button`并且我想将`IsEnabled`属性更改为`true`当至少其中一个`MyEntity`被`MyObservableCollection`选中时。我创建了一个转换器，它至少在检查`ObservableCollection`a 时接受并返回 true 。`MyEntity`但是`return "null"`被退回了。怎么了 ？感谢您的帮助。

XAML

```
<Window.Resources>
    <CollectionViewSource x:Key="MyObservableCollection"/>
    <src:MyConverter x:Key="MyConverter"/>
</Window.Resources>
<Button IsEnabled="{Binding Converter={StaticResource MyConverter}, Source={StaticResource MyObservableCollection}}"/> 
```

C# 转换器

```
class MyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (null == value)
            return "null";

        ReadOnlyObservableCollection<object> items = (ReadOnlyObservableCollection<object>)value;

        List<MyEntity> myEntities = (from i in items select (MyEntity)i).ToList();

        foreach (MyEntity entity in myEntities)
        {
            if (entity.IsChecked)
            {
                return true;
            }
        }
        return false;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new System.NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:08:30.073

由于 StaticResources 是在初始化自身时解决的，即在那时`InitializeComponent()`但直到那时您的集合尚未初始化，这就是为什么将 null 值传递给转换器的原因。因此，更好的选择是将代码中的该属性移到后面并绑定到该属性，因为绑定将在`InitializeComponent()`. 在您的代码隐藏中创建属性-

```
public CollectionViewSource MyObservableCollection { get; set; } 
```

并绑定到您的按钮 -

```
 <Button IsEnabled="{Binding MyObservableCollection, RelativeSource=
{RelativeSource AncestorType=Window}, Converter={StaticResource MyConverter}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T19:09:41.687

我认为你的绑定是错误的。转换器想要的是基础集合而不是`CollectionView`. 并设置`CollectionViewSource.Source`after `InitializeComponent()`，Binding 将被刷新。

```
<Button IsEnabled="{Binding Path=SourceCollection,
                            Converter={StaticResource MyConverter},
                            Source={StaticResource MyObservableCollection}}" /> 
```

# sql - 查明报表是否正在使用表

> ID：11957835
> 
> 赞同：0
> 
> 时间：2012-08-14T17:46:08.070
> 
> 标签：sql, sql-server, tsql, reporting-services, ssms

无论如何要找出报告服务器上的报告是否正在使用特定表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:47:56.893

```
USE ReportServer

DECLARE @TEXTTOSEARCH AS VARCHAR(200)
SET @TEXTTOSEARCH = 'urtableorview'

;WITH XMLNAMESPACES 
(DEFAULT 'http://schemas.microsoft.com/sqlserver/reporting/2005/01/reportdefinition',
'http://schemas.microsoft.com/SQLServer/reporting/reportdesigner' AS rd)

SELECT name
    , x.value('CommandType[1]', 'VARCHAR(100)') AS CommandType
    , x.value('CommandText[1]','VARCHAR(MAX)') AS CommandText
    , x.value('DataSourceName[1]','VARCHAR(150)') AS DataSource
FROM (SELECT name, 
    CAST(CAST(content AS VARBINARY(MAX)) AS XML) AS reportXML 
    FROM Catalog 
    WHERE content IS NOT NULL AND type != 3) AS a
CROSS APPLY reportXML.nodes('/Report/DataSets/DataSet/Query') r(x)
WHERE x.value('CommandType[1]', 'VARCHAR(50)') IS NULL
    AND x.value('CommandText[1]','VARCHAR(MAX)') LIKE '%' + @TEXTTOSEARCH + '%'
ORDER BY name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-22T14:51:11.100

[我在 Ajit Kumar Thakur https://blogs.technet.microsoft.com/dbtechresource/2015/04/04/retrieve-ssrs-report-server-database-information/](https://blogs.technet.microsoft.com/dbtechresource/2015/04/04/retrieve-ssrs-report-server-database-information/)的 Technet 文章中发现了这个类似但更简单的查询 。

```
WITH Reports AS 
(   
  SELECT *
    , CONVERT( VARCHAR(MAX), CONVERT(VARBINARY(MAX), Content)) AS ReportContent
  FROM Catalog
)
SELECT Name, [Path] 
FROM Reports
WHERE ReportContent LIKE '%tablename%'; 
```

当您需要“识别任何报告中的任何表、过程或函数的依赖关系时，这非常有用。它提取每个报告的 [the] XML 内容，将其转换为 varchar，然后搜索给定的对象 [name]。目录表包含报表服务器中所有 RDL 文件的 XML 内容。

# java - 未创建 Log4j 文件：从在 WAS6.1 上运行的应用程序进行日志记录

> ID：11957839
> 
> 赞同：1
> 
> 时间：2012-08-14T17:46:18.623
> 
> 标签：java, logging, log4j, websphere, web.xml

我有一个在 WAS 6.1 上运行的 Java 应用程序，Log4j 用于日志记录。不创建日志文件。使用了其他一些日志配置，但不是与应用程序一起打包的配置。

我应该在哪里检查 WAS6.1 全局 log4j 配置？如何为特定应用程序覆盖它？

该应用程序是从战争档案中部署的。
log4j-1.2.14.jar 与应用程序一起打包在 WEB-INF/lib 目录下。我在 WEB-INF 目录中放置了一个 commons-logging.properties 文件。

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?><web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:web="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
    id="WebApp_ID" version="2.4">
    <display-name>LineCheckOptimizerWeb</display-name>
    <welcome-file-list>
            <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/log4j.xml</param-value>
</context-param>

<listener>
    <description>Initializes a Guice Injector and installs it into the ServletContext</description>
    <display-name>GuiceInitializer</display-name>
    <listener-class>com.aa.otrs.lco.guice.GuiceInitializer</listener-class>
</listener>

    <servlet>
            <servlet-name>MessageBrokerServlet</servlet-name>
            <servlet-class>flex.messaging.MessageBrokerServlet</servlet-class>
            <init-param>
                    <param-name>services.configuration.file</param-name>
                    <param-value>/WEB-INF/flex/services-config.xml</param-value>
            </init-param>
            <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
            <servlet-name>MessageBrokerServlet</servlet-name>
            <url-pattern>/messagebroker/*</url-pattern>
    </servlet-mapping>

    <resource-ref>
            <description>LCO JDBC Datasource</description>
            <res-ref-name>jdbc/lco</res-ref-name>
            <res-type>javax.sql.DataSource</res-type>
            <res-auth>Container</res-auth>
    </resource-ref> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:53:22.667

Check if any other jar file is present in your application which also includes a log4j.xml. Conflict will not allow proper logging to be enabled. Also enable trace with trace string com.ibm.ws.classloader.*=all and restart the server. Check trace.log

I faced similar issue recently where the team added external jars

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:41:23.103

I would turn on the debugger for log4j (via the System D property) and see what is the log4j properties that is picked and if it picks up the one that you expect it to. This is the first thing to do when you encounter log4j config issues.

If you are using JCL , WAS 6.1 has moved away from JCL and uses JUL (saying this from memory) Have a look at this -> [http://www.ibm.com/developerworks/websphere/techjournal/0901_supauth/0901_supauth.html](http://www.ibm.com/developerworks/websphere/techjournal/0901_supauth/0901_supauth.html) and see if that helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:54:30.243

Turns out it was missing a log4j jar inside one of the project *.jar-s that had the logging inside it. Fixed it, and viola - it worked, log files magically appeared as expected.

# asp.net - ASP.NET PostBacks 和 Fiddler

> ID：11957840
> 
> 赞同：1
> 
> 时间：2012-08-14T17:46:22.830
> 
> 标签：asp.net, fiddler

在 Asp.net Web 表单中，我单击一个按钮来提交请求。在`Page_Load`方法中，`IsPostBack`设置为 true 并调用按钮的`OnClick`处理程序。

但是，如果我捕获该 HTTP Post 请求（例如在 Fiddler 中）并准确地重新发送它，则该`Page_Load`方法说`IsPostBack`是假的，并且`OnClick`永远不会调用按钮的处理程序。

为什么是这样？

编辑：请注意，方法处理程序实际上是用

```
[System.Web.Services.WebMethod] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:58:14.243

你可能想看看这个...

[http://www.versomas.com/dannyg/post/Simulating-POST-with-Fiddler.aspx](http://www.versomas.com/dannyg/post/Simulating-POST-with-Fiddler.aspx)

# php - 呈现的空白页 - codeigniter 应用程序

> ID：11957841
> 
> 赞同：1
> 
> 时间：2012-08-14T17:46:26.327
> 
> 标签：php, codeigniter

我刚刚将我的 codeigniter 应用程序从一台机器移到了另一台机器上。我收到上述错误消息。

这是我到目前为止检查过的内容：

用于代码点火器的 config.php 具有以下内容：

```
 $config[‘base_url’] = ‘http://myserver/myapp/’; 
```

当我导航到

```
 http://myserver/myapp/index.php 
```

我没有，没有收到任何错误消息，也没有显示/渲染任何内容。我做了一个视图源，页面上没有 html。（顺便说一句。我在路由中指定了“欢迎”作为我的默认控制器）。当我导航到：

```
 http://myserver/myapp/index.php/welcome 
```

这是相同的结果。

我检查了我的 apache2 访问日志，这是它包含的内容：

```
 127.0.0.1 - - [14/Aug/2012:13:27:37 -0400] "GET /myapp/index.php/welcome HTTP/1.1" 200 293 "-" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:14.0) Gecko/20100101 Firefox/14.0.1" 
```

127.0.0.1 - - [14/Aug/2012:13:27:48 -0400] "GET /myapp/index.php/switches HTTP/1.1" 200 293 "-" "Mozilla/5.0 (X11; Ubuntu; Linux i686 ; rv:14.0) Gecko/20100101 Firefox/14.0.1"

它不应该有吗

```
 “GET http://myserver/myapp/index.php/welcome” 
```

而不仅仅是

```
 “myapp/welcome”? 
```

我也尝试查找 apache 错误消息 # 293，但我没有遇到任何有助于故障排除的东西。

问题是其他应用程序工作。所以我可以

```
 “http://myserver/phpmyadmin” 
```

它有效。我还在我的“myapp”文件夹中创建了一个 test.php 页面，它也可以工作。

据我所知，我没有使用 .htaccess。我在我的 config.php 中为 codeigniter 设置了以下变量：

```
 $config[‘index_page’] = ‘index.php’;
       $config[‘uri_protocol’] = ‘AUTO’; 
```

在 php.ini 文件和代码点火器配置文件中都打开了错误日志记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:12:06.813

问题是 autoload.php 包含帮助类“url”。在新机器上，没有设置此项。目前尚不清楚为什么该文件是唯一没有被复制的文件..或被正确覆盖的文件。无论如何，CI 在我的页面上快要死了，因为我调用了 base_url()。目前还不清楚为什么没有显示错误消息。目前，该应用程序已备份并运行。我仍在试图弄清楚为什么没有显示 PHP 错误，但我会在发回之前先检查所有内容。

谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T21:32:21.173

你有“死亡的白屏”。向后工作 - 安装 Codeigniter 的“干净”版本并查看它是否有效 - 然后从那里慢慢向前移动。

然后你要做的是“慢慢地”转换你的网站。即从您的站点配置开始- 将其移至“新”站点。然后更改您的主控制器，然后更改您的数据库等 - 直到错误出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:24:49.150

可能是因为您使用的是大引号而不是常规引号？

`$config[‘base_url’] = ‘http://myserver/myapp/’;`

不同于

`$config['base_url'] = 'http://myserver/myapp/';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-11T15:34:33.717

我在移动服务器时遇到了一个问题，其中`<?= ?>`php.ini 中未启用 php 短标签，这意味着我得到了一个空白页面，而这在 html 源代码中（由 layout->render_page 输出）：

```
<?= $header; ?>
<?= $contents; ?>
<?= $footer; ?> 
```

在 php.ini 中启用它们`short_open_tag = On`解决了我的问题。

# unix - unix 降序排序

> ID：11957845
> 
> 赞同：60
> 
> 时间：2012-08-14T17:46:33.047
> 
> 标签：unix, sorting

我想根据记录的第 5 个字段按降序对选项卡受限文件进行排序。

我试过了

```
sort -r -k5n filename 
```

但它没有用。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-14T17:58:32.870

`n`附加到的选项的存在`-k5`导致该字段的全局`-r`选项被忽略。您必须在同一级别（全局或本地）`n`指定两者。`r`

```
sort -t $'\t' -k5,5rn 
```

或者

```
sort -rn -t $'\t' -k5,5 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-14T17:52:42.910

如果您只想对第 5 个字段进行排序，请*使用*`-k5,5`.

此外，使用 `-t`命令行开关将分隔符指定为`tab`. 尝试这个：

```
sort  -k5,5 -r -n -t \t filename 
```

或者如果上述方法不起作用（使用`tab`），则：

```
sort  -k5,5 -r -n -t $'\t' filename 
```

sort的[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?sort)指出：

> -t, --field-separator=SEP 使用 SEP 而不是非空白到空白的过渡

最后，这个 SO question [Unix Sort with Tab Delimiter](https://stackoverflow.com/questions/1037365/unix-sort-with-tab-delimiter)可能会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-04T12:00:19.067

根据大小按升序列出文件。

```
find ./ -size +1000M -exec ls -tlrh {} \; |awk -F" " '{print $5,$9}'  | sort -n\ 
```

# wpf - 有没有办法让 WindowsFormsHost 中的 winforms 用户控件更大？

> ID：11957848
> 
> 赞同：0
> 
> 时间：2012-08-14T17:46:43.350
> 
> 标签：wpf, vb.net, winforms

我有一些来自旧 Windows CE 项目的用户控件，我想在 WPF 窗口中拥有这些用户控件，因此我已将代码/设计复制到 WPF 项目中，并将用户控件放入 WindowFormsHost 对象中。它似乎工作正常，但控件看起来相当小，我想让它更大。我尝试了一个视图框，但这实际上并没有使它变大（我有点预料到，因为它基于基于矢量的 WPF 系统）。有谁知道在此设置中是否有任何方法可以使 Winforms 用户控件更大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:52:47.417

除非 Winforms 控件使用停靠或锚定以便它们随容器调整大小，否则没有简单的方法可以做到这一点。

也许您可以更改 Winforms 控件的代码，以便它们停靠和/或锚定。但即使你这样做，字体也不会变大。

# zend-framework - Zend Framework：我的表单不会呈现

> ID：11957856
> 
> 赞同：0
> 
> 时间：2012-08-14T17:47:13.623
> 
> 标签：zend-framework, zend-form, zend-form-element

所以我用 Zend 框架在下面创建了一个表单，然后我将对其进行自定义。我的第一个问题是使用 csrf 哈希安全性时出现应用程序错误。但是，当我删除它们时，我得到的只是一个空白屏幕，只有在我删除 CPATCHA 保护时才能解决。谁能向我解释为什么？

我的表格：

```
class Application_Form_Clips extends Zend_Form
{

    public function init()
    {

        // Set the method for the display form to POST
        $this->setMethod('post');

        // Add an email element
        $this->addElement('text', 'email', array(
            'label'      => 'Your email address:',
            'required'   => true,
            'filters'    => array('StringTrim'),
            'validators' => array(
                'EmailAddress',
            )
        ));

        // Add the comment element
        $this->addElement('textarea', 'comment', array(
            'label'      => 'Please Comment:',
            'required'   => true,
            'validators' => array(
                array('validator' => 'StringLength', 'options' => array(0, 20))
                )
        ));

        // Add a captcha
        $this->addElement('captcha', 'captcha', array(
            'label'      => 'Please enter the 5 letters displayed below:',
            'required'   => true,
            'captcha'    => array(
                'captcha' => 'Figlet',
                'wordLen' => 5,
                'timeout' => 300
            )
        ));

        // Add the submit button
        $this->addElement('submit', 'submit', array(
            'ignore'   => true,
            'label'    => 'Sign Guestbook',
        ));

        // And finally add some CSRF protection
        $this->addElement('hash', 'csrf', array(
            'ignore' => true,
        ));

    }

} 
```

我的控制器：

```
class AdminController extends Zend_Controller_Action
{

    public function init()
    {

        // get doctrine and the entity manager
        $this->doctrine = Zend_Registry::get('doctrine');
        $this->entityManager = $this->doctrine->getEntityManager();

        // get the users repository
        $this->indexVideos = $this->entityManager->getRepository('\ZC\Entity\Videos');
        $this->indexClips = $this->entityManager->getRepository('\ZC\Entity\Clips');

    }

    public function indexAction()
    {
        // action body
    }

    public function clipsAction()
    {

        // get a form
        $form = new Application_Form_Clips(); 
        $this->view->form = $form;

    }

    public function videosAction()
    {
        // action body
    }

} 
```

我的观点：

```
<?php echo $this->form; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:37:07.877

基本错误，我没有在我的 php.ini 中取消注释 session.pat

# objective-c - 使用 NSMutableArray 的类崩溃？

> ID：11957863
> 
> 赞同：-3
> 
> 时间：2012-08-14T17:47:41.253
> 
> 标签：objective-c, ios5, nsmutablearray

所以我是 Objective-C 的新手，但不是 OOP 编程的新手。我正在尝试创建一个将“Squares”添加到 NSMutableArray 的类，但是当我编写该类并运行我的应用程序时，它崩溃了。这是 Squares.h 文件：

```
#import <Foundation/Foundation.h>
#import "Square.h"

@interface Squares : NSObject {
    NSMutableArray *squares; }

-(id) init;
-(void) addSquare: (CGPoint) pos;
-(NSMutableArray *) getSquares;
-(void) update;
-(void) render;

@end 
```

这是 Squares.m 文件：

> # 导入“Squares.h”
> 
> @实施广场
> 
> -(id) init{ self = [super init]; if (self != nil) { squares = [[NSMutableArray alloc] init];
> 
> ```
> [self addSquare: CGPointMake(100, 100)];
>       }
>   return self; } 
> ```
> 
> -(void) addSquare: (CGPoint) pos{ Square *square; square = [[Square alloc] init]; [方setPosition：pos]；
> 
> ```
> [squares addObject: square]; } 
> ```
> 
> -(NSMutableArray *) getSquares{ 返回正方形；}
> 
> -(void) update{ for (int i = 0; i < squares.count; i++){ Square *s; s = [正方形 objectAtIndex: i]; [s 移动];
> 
> ```
> } } 
> ```
> 
> -(void) 渲染{ for (int i = 0; i < squares.count; i++){ Square *s; s = [正方形 objectAtIndex: i]; [s 渲染];
> 
> ```
> } } 
> ```
> 
> @结尾

那么这不是因为我编程错误而不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:53:00.227

代替`for (int i = 0; i <= squares.count; i++`

尝试`for (int i = 0; i < squares.count; i++`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:10:06.033

正如其他人所指出的，`Square *s = [Square alloc];`在`update`and`render`方法中是无用的。

正如安德烈告诉你的那样，`for (int i = 0; i <= squares.count; i++)`会算得太远，你应该使用`<`而不是`<=`.

更好的是：

```
-(void) update{
    [squares makeObjectsPerformSelector:@selector(move)]; }

-(void) render{
    [squares makeObjectsPerformSelector:@selector(render)]; } 
```

# php - 存储上传的用户图像

> ID：11957864
> 
> 赞同：1
> 
> 时间：2012-08-14T17:47:41.913
> 
> 标签：php, mysql, webserver

这是理论上的问题。

Twitter 保留用户个人资料图片如下：

```
https://twimg0-a.akamaihd.net/profile_images/2044921128/finals_normal.png 
```

无法想象他们有一个包含 2044921128 个目录的服务器（例如）。也许这个 URL 是使用创建的`mod_rewrite`？

那么如何存储海量的用户图片呢？如何完成此方案：

1.  用户选择和 PHP 脚本上传应该是他的个人资料图片的图像。
2.  PHP 脚本重命名它，设置 PATH 以存储此图像，移动它，最后将此路径添加到数据库以供进一步使用。

那么 PATH 必须是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:53:29.443

没有什么说 Akamai（根据您的 URL 为 Twitter 存储图片）实际上将文件存储在目录结构中。它们完全有可能存储在内存中（由目录结构支持）、数据库（SQL / NoSQL）或 Akamai 认为有效的任何其他存储机制。

您可以路由以开头的 URL 的所有请求

```
https://yourService.com/profile_images/ 
```

到您选择的 PHP 脚本，然后解析 URL 的其余部分以确定正在请求的图像并根据解析的 URL 从您想要的任何存储机制（可能是数据库）中存储/检索。

这是一篇简短的博客文章，展示了使用 mod_rewrite 的一种方法

[http://www.phpaddiction.com/tags/axis/url-routing-with-php-part-one/](http://www.phpaddiction.com/tags/axial/url-routing-with-php-part-one/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:02:14.130

大多数操作系统不鼓励在单个目录中包含超过 1024 个目录/文件，因为上面的任何数字都会缓慢地扫描和定位其中的特定资源，因此我认为可以安全地认为 akamai 在 profile_images 中不会有 2044921128 个目录！

它要么是在 profile_images 中生成的特殊唯一标识符号，要么是 url 路由中的众多方法之一，可用于定位资源。无论如何，我认为它不会对应于目录的数量..

# javascript - 使用 Jquery 使取消按钮绕过自定义验证

> ID：11957871
> 
> 赞同：1
> 
> 时间：2012-08-14T17:48:23.513
> 
> 标签：javascript, jquery, checkbox, submit

我的 mvc 应用程序上有两个提交按钮。

1.

```
 <input type="submit" class="btnsubmit" value="Add Subscription" name="Submit" /> 
```

2.

```
 <input class="cancel" type="submit" value="Cancel" onclick="CheckBox()"/> 
```

在文档准备功能中，我有这个。

```
 $(document).ready(function () {
        $('#form').submit(function () {
            var $fields = $(this).find('input[name^="chk_"]:checked');
            if (!$fields.length) {
                alert('You must select at least one record !');
                return false; // The form will *not* submit
            }
        });
    }); 
```

基本上只有在选中至少一个复选框时才能提交表单，但我希望该用户能够点击取消并返回主页。但是现在，当我单击取消按钮时，应用程序会尝试提交页面，并检查是否选中了任何复选框，这是我在取消按钮单击时不想要的。

任何方法/意见？谢谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:49:51.350

```
<input class="cancel" type="submit" value="Cancel" onclick="CheckBox()"/> 
```

更改`tye=submit`为`type=button`. 因为，`type=submit`默认情况下进行表单提交。所以它看起来像：

```
<input class="cancel" type="button" value="Cancel" onclick="CheckBox()"/> 
```

或者，您可以更改按钮，如：

```
<button class="cancel" onclick="CheckBox()">Cancel</button> 
```

# spring - 非托管容器中带有 XA/JTA 的 Spring + JPA/Hibernate + ActiveMQ。没有看到错误，但没有看到提交到数据库的数据

> ID：11957876
> 
> 赞同：0
> 
> 时间：2012-08-14T17:48:45.277
> 
> 标签：spring, hibernate, transactions, jta, xa

我正在向现有的 Spring/Hibernate Web 应用程序添加 JMS 功能（通过 ActiveMQ）。因此，我想向这个应用程序添加 XA/JTA 功能，以便我可以管理跨越数据存储和消息代理的事务（使用 Spring）。

我在 ActiveMQ 集成方面取得了成功，但是在将 XA/JTA 合并到应用程序中时遇到了问题。具体来说，没有数据被插入/更新到底层数据库中（不过，我在事务期间没有看到错误/异常）。

详细信息：Spring 3.1.2.RELEASE、Hibernate 3.6.10.Final、ActiveMQ 5.6.0

我正在使用 Spring Data JPA 来编写我的 DAO 接口，然后他们会拿起我的 LocalContainerEntityManagerFactoryBean 来完成他们的 CRUD 工作。

我已经尝试过 Atomikos (5.6.0) 和 Bitronix (2.1.3) XA/JTA 实现。每个都会导致相同的行为（没有数据写入基础数据库表）。

我有很多日志记录，如果需要，当然可以提供日志摘录。而且，配置细节也是如此。日志中特别值得注意的是，Spring 似乎表明 JTA 事务正在（试图？）提交。但是，鉴于缺少写入底层数据库的数据，尚不清楚它是否真的完成了提交（不过，我再次看到没有错误表明它没有完成）。此外，值得注意的是，此特定事务 - populateSampleData - 仅涉及数据库资源（根本不涉及消息代理）。

```
2012-08-14 13:16:09,770 DEBUG [org.springframework.transaction.annotation.AnnotationTransactionAttributeSource] - Adding transactional method 'populateSampleData' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-08-14 13:16:09,772 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:09,776 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Creating new transaction with name [com.teg.saamweb.service.SaamWebServiceTransactional.populateSampleData]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-08-14 13:16:09,811 DEBUG [org.springframework.orm.jpa.EntityManagerFactoryUtils] - Opening JPA EntityManager
2012-08-14 13:16:09,812 DEBUG [org.springframework.orm.jpa.EntityManagerFactoryUtils] - Registering transaction synchronization for JPA EntityManager
2012-08-14 13:16:09,898 DEBUG [org.springframework.data.repository.core.support.TransactionalRepositoryProxyPostProcessor$CustomAnnotationTransactionAttributeSource] - Adding transactional method 'save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-08-14 13:16:09,899 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:09,899 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:09,964 DEBUG [org.springframework.data.repository.core.support.TransactionalRepositoryProxyPostProcessor$CustomAnnotationTransactionAttributeSource] - Adding transactional method 'save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-08-14 13:16:09,964 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:09,964 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:09,982 DEBUG [org.springframework.data.repository.core.support.TransactionalRepositoryProxyPostProcessor$CustomAnnotationTransactionAttributeSource] - Adding transactional method 'save' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
2012-08-14 13:16:09,982 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:09,983 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:09,992 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:09,992 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:09,996 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:09,996 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,000 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,000 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,003 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,003 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,007 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,007 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,011 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,011 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,014 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,014 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,017 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,017 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,020 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,020 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,023 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,023 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,026 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,026 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,030 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,030 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,033 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,033 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,036 DEBUG [org.springframework.beans.factory.support.DefaultListableBeanFactory] - Returning cached instance of singleton bean 'transactionManager'
2012-08-14 13:16:10,036 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Participating in existing transaction
2012-08-14 13:16:10,038 DEBUG [org.springframework.orm.jpa.EntityManagerFactoryUtils] - Closing JPA EntityManager
2012-08-14 13:16:10,039 DEBUG [org.springframework.transaction.jta.JtaTransactionManager] - Initiating transaction commit 
```

我希望找到一个成功地为事务管理设置了这样一个 Spring XA/JTA 应用程序的人，他可以就我可能做错了什么（或遗漏）提供一些建议。我基本上遵循了[本文](http://blog.springsource.com/2011/08/15/configuring-spring-and-jta-without-full-java-ee/)中的规定（在 Atomikos 案例中从 Atomikos 网站收集了一些附加信息）。

感谢您提供的任何启发。

**更新：**我解决了我的问题。问题是我没有使用 persistence.xml 文件（而是在使用 setPackagesToScan 方法设置 LocalContainerEntityManagerFactoryBean 时以编程方式配置持久性单元）。虽然持久性单元确实正确加载了我的@Entity 类，但由于缺少persistence.xml 文件（特别是缺少持久性单元元素的事务类型属性），事务类型被默认为RESOURCE_LOCAL（这是非 Java EE 容器的默认值）。我现在明确地提供了一个 persistence.xml 文件并明确地设置了 transaction-type="JTA"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:11:42.820

`LocalContainerEntityManagerFactoryBean`只要包含作为属性传递的属性值之一，您仍然可以使用`jpaPropertyMap`：

```
<prop key="javax.persistence.transactionType">JTA</prop> 
```

# odbc - 插入postgresql时出现swi-prolog odbc错误

> ID：11957877
> 
> 赞同：2
> 
> 时间：2012-08-14T17:48:47.157
> 
> 标签：odbc, prolog, swi-prolog

我有以下问题，我正在寻求帮助：我正在使用 swi-prolog 和 odbc 接口连接到 postgresql 数据库。当我尝试插入数据库时​​出现问题。SELECT 工作正常，但 INSERT 不起作用。有谁知道我做错了什么。

这是我的简单测试代码：

```
:-use_module(library(odbc)).

connect(C):-
  odbc_connect(baza, C, [user(Mat), 
              password(lozinka), alias(baza), open(once)]).

sel(R) :-
    odbc_query(baza,
               'SELECT * FROM pacijent',
               R). 

ins:-
 odbc_query(baza, 'INSERT INTO pacijent (name, surname, passw, number) VALUES ("James", "Bond", 007, 007)'). 
```

这是我尝试插入时的错误：

```
?- ins.
ERROR: ODBC: State S1000: [unixODBC]ERROR:  column "James" does not exist at character 30;
Error while executing the query 
```

我也尝试通过 psql 控制台插入，一切正常，但正如所说的问题是从 prolog 插入时。

请帮忙，我卡在这里。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T21:49:47.863

一个建议：适当的转义，但不知道是否足够。我会转

```
"James", "Bond" 
```

进入

```
\'James\', \'Bond\' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:18:06.790

问题是您已经用双引号而不是单引号传递了列名称和姓氏的列数据。大多数数据库使用 " （双引号）作为标识符，如表和列名，使用 ' （单引号）作为数据。你如何确保在序言中我不知道。

我怀疑您也想引用其他两列。

在 ODBC 中，您将使用 SQLGetInfo 并获取 SQL_IDENTIFIER_QUOTE_CHAR ，这通常会返回双引号，这意味着引用标识符使用这些引号。

# wordpress - Wordpress phpinfo cookie 问题

> ID：11957880
> 
> 赞同：-1
> 
> 时间：2012-08-14T17:49:01.677
> 
> 标签：wordpress, cookies, php

嘿你们我有这个网站[http://www.taranmarlowjewelry.com/](http://www.taranmarlowjewelry.com/)在右上角有一个购物车，但是当你第一次访问该网站时它不会出现，但是当你刷新页面时它出现了。

我一直在研究这个，我认为它与这个 cookie PHPSESSID 有关，因为当我删除那个 cookie 时，购物车又消失了。

我也被告知这是一个 PHP 配置问题。

我尝试像这样对我的 php5.ini 文件进行一些调整......

```
session.use_only_cookies = 1
session.use_trans_sid = 0

session.url_rewriter.tags = "" 
```

但这没有用....我从这里得到它[http://wordpress.org/support/topic/frontpage-slideshow-and-phpsessid-in-general-fix?replies=1](http://wordpress.org/support/topic/frontpage-slideshow-and-phpsessid-in-general-fix?replies=1)

有谁知道我需要在我的 php 配置中调整哪些？

我试图在 wp-content/themes/twentyeleven/header.php 中设置一个cookie，就在这样的标签之后......

```
<?php
setcookie("PHPSESSID","6a52e6037be6342014834c475b6c0637","/","http://www.taranmarlowjewelry.com/") 
?> 
```

然后我得到这个错误......

```
Warning: setcookie() expects parameter 3 to be long, string given in /home/content/19/9468119/html/wp-content/themes/twentyeleven/header.php on line 54 
```

当您第一次访问我的网站时，购物车不会显示，但当您刷新时，它仍会显示。

我什至像这样手动将cookie放入主题的functions.php文件底部......

```
function set_new_cookie() {
    setcookie("PHPSESSID", '6a52e6037be6342014834c475b6c0637', time()+3600);  /* expire in 1 hour */

}
add_action( 'init', 'set_new_cookie'); 
```

它设置它，它没有显示任何错误，但它不能解决我的问题。

我也在我的主题的functions.php文件中尝试了这个......

```
 function set_new_cookie() {

    set_cookie('PHPSESSID', '6a52e6037be6342014834c475b6c0637');
    $_COOKIE['PHPSESSID'] = '6a52e6037be6342014834c475b6c0637';

}
add_action( 'init', 'set_new_cookie'); 
```

并得到了这个错误

```
Fatal error: Call to undefined function set_cookie() in /home/content/19/9468119/html/wp-content/themes/twentyeleven/functions.php on line 5 
```

这是购物车表格...

```
<form class="product_search" style="font-size:0px !important;" method="GET" action="<?php echo $pp_url?>/" >
                <input name="product_search" id="wpsc_search_autocomplete" class="wpsc_product_search wpsc_live_search_embed .wpsc_live_search" autocomplete="off" style="padding:0px !important; height:25px !important; vertical-align:top;" />
                <script type='text/javascript' > /* <![CDATA[ */
                    jQuery('#wpsc_search_autocomplete').keypress( function(e){
                        if ( e.keyCode == 13 ) {
                            var url = '<?php echo $pp_url ?>'+'?product_search='+jQuery(this).val();
                            url = encodeURI(url);
                            jQuery(window.location).attr('href', url);
                        }
                    });
                     /* ]]> */
                     </script>
                     <input type="submit" id="button" name="button" class="searchBtn" value="GO"/>
            </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:55:01.243

我通过进入 wp-ecommerce/wpsc-includes/shopping_cart_functions.php 并调整此行来解决我的购物车问题

```
if ( isset( $cart ) ) {
echo wpsc_shopping_basket_internals( $cart, false, true );
} 
```

对此

```
//if ( isset( $cart ) ) {
echo wpsc_shopping_basket_internals( $cart, false, true );
//} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:31:53.950

问题不在于设置的 cookie。您的 session_start() 将设置它。但是，您需要了解 cookie（包括会话 cookie）是如何工作的。cookie 在响应标头中从服务器发送到浏览器。因此，在用户开始获取您的响应源之前，他们不会在浏览器中设置 cookie。在他们对网站的下一次请求时，他们的浏览器将随请求一起发送 cookie。

所以问题是你试图在第一个页面加载时依赖 $_COOKIE 超全局中的某些东西，它不会存在（除非用户已经在之前的访问中设置了它）。如果您需要在初始页面加载中使用 $_COOKIE，您需要执行以下操作

```
setcookie('cookiename', 'cookie value');
$_COOKIE['cookiename'] = 'cookie value'; 
```

# android - 无法以编程方式创建按钮数组而不会出现错误

> ID：11957881
> 
> 赞同：2
> 
> 时间：2012-08-14T17:49:02.890
> 
> 标签：android, arrays, button, nullpointerexception

这段代码对我不起作用。我进行了调试，我认为错误来自 setlayoutparams 但它没有意义，因为如果我取出 for 循环并只创建 1 个按钮（而不是按钮数组），那么它将起作用。

```
 Button btn[] = new Button[oNumber];
    for (int i=0;i<oNumber;i++){
        btn[i].setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
        btn[i].setText(oName[i]);
        System.out.println("making b's");
        layout.addView(btn[i]);
    } 
```

这是我得到的错误。我确实在清单中正确写入了活动。

```
 08-14 12:45:56.482: E/AndroidRuntime(4060): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.rcontrol/com.example.rcontrol.ViewTarget}: java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T17:52:02.537

您创建了按钮数组，但没有对其进行初始化：

```
Button btn[] = new Button[oNumber];
for (int i=0;i<oNumber;i++){
    btn[i] = new Button(this); // initialize it
    btn[i].setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
    btn[i].setText(oName[i]);
    System.out.println("making b's");
    layout.addView(btn[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T03:06:06.477

了解更多详情。

int oNumber = 4;

```
 String oName[] = {"x","2","3","4"};
    Button btn[] = new Button[oNumber];
     LinearLayout layout = (LinearLayout) findViewById(R.id.layout1);

    for (int i=0;i<oNumber;i++){
        btn[i] = new Button(this); // initialize it
        btn[i].setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));
        btn[i].setText(oName[i]);
        btn[i].setOnClickListener(this);
        System.out.println("making b's");
        layout.addView(btn[i]);
    } 
```

# c# - 实现多个合同时如何拥有多个 WCF 服务端点？

> ID：11957883
> 
> 赞同：1
> 
> 时间：2012-08-14T17:49:05.687
> 
> 标签：c#, wcf, rest, service, endpoint

这是我的服务类，它实现了一切：

```
 [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class RESTservice : IRESTservice, IRESTservice2
{
    List<Person> persons = new List<Person>();
    int personCount = 0;

    public Person CreatePerson(Person createPerson)
    {
        createPerson.ID = (++personCount).ToString();
        persons.Add(createPerson);
        return createPerson;
    }

    public List<Person> GetAllPerson()
    {
        return persons.ToList();
    }

    public List<Person> GetAllPerson2()
    {
        return persons.ToList();
    }

    public Person GetAPerson(string id)
    {
        return persons.FirstOrDefault(e => e.ID.Equals(id));
    }

    public Person UpdatePerson(string id, Person updatePerson)
    {
        Person p = persons.FirstOrDefault(e => e.ID.Equals(id));
        p.Name = updatePerson.Name;
        p.Age = updatePerson.Age;
        return p;
    }

    public void DeletePerson(string id)
    {
        persons.RemoveAll(e => e.ID.Equals(id));
    }
} 
```

（两个合同都运行良好）

这是我的网络。配置文件：

```
 <?xml version="1.0"?>
    <configuration>

      <system.web>
        <compilation debug="true" targetFramework="4.0" />
      </system.web>
      <system.serviceModel>

        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true">
        </serviceHostingEnvironment>
        <services>
          <service name="RESTservice">
            <endpoint address="RestService" binding="webHttpBinding" contract="test.IRESTservice" />
            <endpoint address="RestService2" binding="webHttpBinding" contract="test.IRESTservice2" />
          </service>
        </services>
        <standardEndpoints>
          <webHttpEndpoint>
            <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="true"></standardEndpoint>
          </webHttpEndpoint>
        </standardEndpoints>
      </system.serviceModel>
     <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
      </system.webServer>

    </configuration> 
```

当然还有我的服务声明：

```
 RouteTable.Routes.Add(new ServiceRoute("RestService", new WebServiceHostFactory(), typeof(RESTservice))); 
```

在 localhost:port/RestService 上执行 http GET 时出现以下异常：

服务 'RESTservice' 实现了多种 ServiceContract 类型，并且在配置文件中没有定义端点。WebServiceHost 可以设置默认端点，但前提是服务仅实现单个 ServiceContract。要么将服务更改为仅实现单个 ServiceContract，要么在配置文件中明确定义服务的端点。

我不知道出了什么问题。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:01:31.417

IRESTservice 和 IRESTservice2 声明都必须将 ServiceContractAttribute ConfigurationName 设置为与配置文件中相同的名称：

```
[System.ServiceModel.ServiceContractAttribute(ConfigurationName="test.IRESTservice")
public interface IRESTService
{
}

[System.ServiceModel.ServiceContractAttribute(ConfigurationName="test.IRESTservice2")
public interface IRESTService2
{
} 
```

# c# - 在 Windows 窗体中的 Web 浏览器中向用户提供验证码

> ID：11957885
> 
> 赞同：0
> 
> 时间：2012-08-14T17:49:20.660
> 
> 标签：c#, html, screen-scraping, captcha

我正在编写一个应用程序来自动搜索航空公司网页上的航班。不幸的是，它使用了严重的验证码。. . 自动化过程不是很复杂，运行速度也不是很快，但是手动搜索并记下价格非常费力。

我想保留我的自动代码，但是当页面被重定向到验证码时（每 10 个请求左右发生一次），我想在网络浏览器的网络表单中提供验证码，允许用户阅读验证码，输入文本并点击“继续”。它并不比手动完成整个事情快多少，但它更容易！

不幸的是，我无法让验证码图像在网络浏览器中呈现。事实上，当我手动运行 Web 请求时，我什至在 Fiddler 中都看不到它。

关于如何以 Windows 形式显示验证码的任何想法？一旦用户可以看到它，我就可以像往常一样继续创建 webrequests 和 postdata。

将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:51:26.463

我最近在县法院网站上看到了这样一个。IMG 是一个 GET 请求，但如果直接请求它，它将不起作用。事实证明，对图像的请求需要一个 cookie。就我而言，我更新了 HTTPClient 以适应它。

# c# - 无法为 Windows 窗体应用程序切换任务

> ID：11957886
> 
> 赞同：0
> 
> 时间：2012-08-14T17:49:22.660
> 
> 标签：c#, winforms, visual-studio-2010, task-switching

我是 Visual Studio 和 C# 的新手。刚刚完成一个 Windows 窗体应用程序，但检测到以下错误。每当用户最小化/恢复它或切换到另一个任务时，程序都会死掉（显示无响应）。这个错误会阻止用户在运行这个程序时进行多任务处理，所以我真的很想修复 if。我想知道问题的可能原因是什么，以及如何解决这些问题。我真的很感激任何建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:01:36.107

If i am not wrong you are running with a problem of UI freezing. if so why don't you use C# BackgroundWorker. it help you to prevent freezing the window form whether you doing a long task. you can find a good tutorial [http://www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker) here. Hope this will help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T18:43:58.917

它可以是任何您的`Form`. 最小化和还原时仅看到“无响应”这一事实可能是由于您已强制窗口重绘并强制 Windows 识别应用程序已挂起并使用幽灵窗口。在您最小化并恢复它之前，该窗口可能已经挂起。您可以通过尝试移动窗口来验证这一点。如果它不动，它就挂了。如果它确实移动了，请尝试将标题栏移出屏幕并向后移动（例如，单击标题栏的中间并将其一直拖动到右侧并释放按钮，然后执行相同操作并将其重新显示在屏幕上）。

# c++ - NLP - 英语形态词典

> ID：11957888
> 
> 赞同：-1
> 
> 时间：2012-08-14T17:49:23.690
> 
> 标签：c++, python, xml-parsing, nlp

我需要能够根据其引理和 POS Tag 值在形态上生成一个单词。例如，将引理动词形式更改为过去时，现在或将引理名词更改为复数形式...为此，我需要一个英语词法词典，其中包括从引理到具有请求类型的单词的映射（复数，过去时等...）。有谁知道可以下载的好的英语词法词典吗？

非常感谢，亚龙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:03:49.740

你见过[NodeBox 库](http://nodebox.net/code/index.php/Linguistics)吗？

# vim - 使用星号 + 斜杠时 Macvim CSS/Sass 语法高亮错误

> ID：11957889
> 
> 赞同：1
> 
> 时间：2012-08-14T17:49:26.197
> 
> 标签：vim, macvim, vim-syntax-highlighting

我在我的 Sass 样式表中使用了 Compass sprite @import 语句，其中包括目录 ( `@import 'place-detail-icons/*.png';`) 中的所有 PNG 文件。问题是 Macvim 将 之后的所有内容都`/*`视为 CSS 注释，因此它将样式表的其余部分显示为注释。

我可以通过`/**/`在@import 语句下方添加一行来伪造 Macvim 来解决这个问题。但想知道是否有人找到了一种非黑客方法来解决这个问题。这是代码的更大选择。

```
@import 'mixins/tabs';
@import 'mixins/timestamps';
@import 'mixins/triangles';
@import 'place-detail-icons/*.png';

  #modal .file-upload {
    margin-bottom: 20px;
  }

  #details {
    position: relative;
    left: -160px;
    width: 1280px;
    min-height: 410px;
    padding: 30px 0 50px;
    border-top: 1px solid $white;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:39:16.007

这是 CSS 语法文件的问题。如果您查看`:e $VIMRUNTIME/syntax/css.vim`第 179 行，您会看到：

```
syn region cssInclude start="@import" end=";" contains=cssComment,cssURL,cssUnicodeEscape,cssMediaType 
```

如果您从中删除`cssComment`它`contains=`，它将修复它；但是，不建议直接编辑内置语法文件，因为升级 vim 时您的更改将被覆盖。相反，打开文件并`:sav! ~/.vim/syntax/css.vim`创建一个副本，该副本将首先覆盖内置语法并对其进行编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T13:45:45.357

或者你可以把它放到你的`~/.vimrc`文件中：`au BufRead,BufNewFile *.scss setfiletype sass`
Vim 将使用 Sass 语法和 *.scss 文件。

# c# - WCF 代理仅在使用时出现故障

> ID：11957890
> 
> 赞同：0
> 
> 时间：2012-08-14T17:49:28.303
> 
> 标签：c#, .net, wcf, proxy, wcf-client

我正在学习 WCF 并尝试从书中学到的不同示例。

我有一个简单的服务设置如下：

```
[ServiceContract]
interface MyService
{
    [OperationContract(IsOneWay = true)]
    void Throws();
} 
```

我的客户端代码使用 ChannelFactory 类来创建代理：

```
var baseTcpAddress = new Uri("net.tcp://localhost/hello");

var tcpBinding = new NetTcpBinding();

// Create client channel.
ChannelFactory<ITestService> factory = new ChannelFactory<ITestService>(tcpBinding, new EndpointAddress(baseTcpAddress));
var channel = factory.CreateChannel();

var commObject = channel as ICommunicationObject;

commObject.Faulted += commObject_Faulted;
commObject.Closed += commObject_Closed; 
```

调用此方法时，它会引发未处理的异常（不是从 FaultException 派生的），并且使用相同代理的后续调用会引发异常并且通道出现故障。

问题是我在代理通道的*故障*事件中注册，但我没有收到任何通知，**只有**在尝试访问代理时。

我的问题是——客户端如何保护自己免受故障代理的影响？代理不应该通知客户端它不可用，而不是让客户端尝试使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:07:45.970

“问题”是方法是单向的。在某种程度上，这是一个“一劳永逸”的操作（将会话放在一边），如果它引发异常 - 客户端无法知道这一点。从客户端的角度来看，一旦在另一端收到请求（*收到*未处理*）* ，请求就成功了。

我建议你先用非一种方式尝试同样的方法。

另外，请发布您用于订阅故障事件的代码。您使用的是什么主机？你是如何创建代理的？（通道工厂？）

您可以尝试订阅 ServiceHost 的 Faulted 事件（如果有的话）并查看它是否会触发。

另外，您是否尝试过查询代理的状态？

另外，请在 SO 上参考[这个问题](https://stackoverflow.com/questions/315736/how-do-i-prevent-a-wcf-service-from-enter-a-faulted-state)，我相信您可能会在那里得到答案。

干杯

# android - 自定义 ActionBar TabBar (ActionBarSherlock)

> ID：11957892
> 
> 赞同：6
> 
> 时间：2012-08-14T17:49:48.167
> 
> 标签：android, android-actionbar, android-theme

我已经在这个问题上停留了几天。谁能帮我自定义 ActionBar 下方显示的选项卡（NavigationMode 是`NAVIGATION_MODE_TABS`）？

我基本上想更改选项卡的背景颜色和当前选择的选项卡的下划线颜色。到目前为止，这是我所做的，但它不起作用。我正在使用`ActionBarSherlock`.

```
<style name="Theme.Styled" parent="@style/Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.Theme.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Theme.Styled.ActionBar</item>

    <item name="actionBarTabBarStyle">@style/customActionBarTabStyle</item>
    <item name="android:actionBarTabBarStyle">@style/customActionBarTabStyle</item>

    <item name="actionBarTabBarStyle">@style/customActionBarTabBarStyle</item>
    <item name="android:actionBarTabBarStyle">@style/customActionBarTabBarStyle</item>

    <item name="actionBarTabTextStyle">@style/customActionBarTabTextStyle</item>
    <item name="android:actionBarTabTextStyle">@style/customActionBarTabTextStyle</item>
</style>

<style name="customActionBarTabStyle" parent="style/Widget.Sherlock.Light.ActionBar.TabView">
    <item name="android:background">@color/red</item>

    <item name="android:textSize">12dp</item>

</style>

<style name="customActionBarTabBarStyle" parent="style/Widget.Sherlock.Light.ActionBar.TabBar">
    <item name="android:background">@color/red</item>
</style>

<style name="customActionBarTabTextStyle" parent="style/Widget.Sherlock.Light.ActionBar.TabText">
    <item name="android:titleTextStyle">@style/Theme.Styled.ActionBar.TitleTextStyle</item>
    <item name="android:textStyle">bold</item>
</style>

<style name="Widget.Theme.Styled.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#A9E2F3</item>
    <item name="background">#A9E2F3</item>
    <item name="android:titleTextStyle">@style/Theme.Styled.ActionBar.TitleTextStyle</item>
</style>

<style name="Theme.Styled.ActionBar.TitleTextStyle" parent="android:style/TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">@color/red</item>
    <item name="android:textStyle">bold</item>
</style>

<style name="Animations" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-24T16:03:18.500

我不确定你是否需要这个，但我会发布答案让其他人看到。您可以在后台`Drawable`将其设置`customActionBarTabStyle`为 Drawable 资源：

```
<style name="customActionBarTabStyle" parent="style/Widget.Sherlock.Light.ActionBar.TabView">
    <item name="android:background">@drawable/actionbar_tabs_selector</item>
    <item name="android:textSize">12dp</item>
</style> 
```

该资源应该是一个选择器，包括以下几行：

```
<!-- This is the "@drawable/actionbar_tabs_selector" layout !-->

<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/actionbar_tab_style_nselected"/>
    <item android:state_focused="false" android:state_selected="true" android:state_pressed="false" android:drawable="@drawable/actionbar_tab_style_selected"/>

    <!-- Pressed state -->
    <item android:state_pressed="true" android:drawable="@drawable/actionbar_tab_style_selected" />

    <!-- Focused state -->
    <item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/actionbar_tab_style_nselected"/>
    <item android:state_focused="true" android:state_selected="true" android:state_pressed="false" android:drawable="@drawable/actionbar_tab_style_nselected"/>

</selector> 
```

所以这里的资源是2层列表。一种用于选项卡处于非活动状态，另一种用于选项卡被选中**并**处于活动状态。因此，您可以根据所选状态设置 2 个图层列表。

单个图层列表可能如下所示：

```
<!-- This is the "@drawable/actionbar_tab_style_nselected" layout !-->

<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Bottom Line -->
    <item>
        <shape android:shape="rectangle">
            <solid android:color="@color/HCL_orange" />
        </shape>
    </item>

    <!-- Tab color -->
    <item android:bottom="2dip">
        <shape android:shape="rectangle">
            <solid android:color="@android:color/white" />
        </shape>
    </item>
</layer-list> 
```

因此，第一项是您可以定义为当前选定选项卡的下划线颜色的底线，第二项是整个选项卡的颜色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T18:14:29.340

您可以使用可用的[样式生成器，或者从](http://jgilfelt.github.com/android-actionbarstylegenerator)[这个](https://stackoverflow.com/questions/9172504/how-to-style-the-divider-between-ice-cream-sandwich-tabs)或[这个](https://stackoverflow.com/questions/8647836/how-to-change-the-colour-of-actionbar-navigation-tabs)相关问题中获得更多见解。

# .net - 我可以同时使用 WebHttpBinding 和 NetNamedPipeBinding 吗？

> ID：11957897
> 
> 赞同：0
> 
> 时间：2012-08-14T17:49:58.677
> 
> 标签：.net, wcf

对于使用 运行的基于 REST 的服务，`WebHttpBinding`我可以在使用 的同一台机器上添加服务间通信功能`NetNamedPipeBinding`，以便更快吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T20:20:17.413

如果我正确理解了您的问题，您想添加多个具有不同绑定的端点。

例如：

```
<service name = "MyService">
<endpoint
address = "http://localhost:8000/MyService"
binding = "wsHttpBinding"
contract = "IMyContract"
/>
<endpoint
address = "net.tcp://localhost:8001/MyService"
binding = "netTcpBinding"
contract = "IMyContract"
/>
<endpoint
address = "net.tcp://localhost:8002/MyService"
binding = "netTcpBinding"
contract = "IMyOtherContract"
/>
</service> 
```

# c++ - 用strtok拆分后大部分字符串都消失了吗？

> ID：11957901
> 
> 赞同：0
> 
> 时间：2012-08-14T17:50:08.957
> 
> 标签：c++, string, token, strtok

**e：谢谢大家，没有意识到 strtok 实际上修改了字符串本身。希望以后我不会那么傻。**

我最近开始从一本书中学习 C++。我现在在关于解析字符串的章节。

我的下一个任务是在用 strtok 拆分字符串的标记后将它们重新组合在一起，但我不明白字符串的其余部分在第一个分隔符之后去了哪里！请记住，我对此很陌生，如果这是一个愚蠢的问题，我很抱歉。

基本上发生的事情是这样的： 1\. 我输入了一个字符串“嘿，你好吗？” 2.打印出来，正常。3\. 然后我将它分成标记（使用分隔符和空格） 4\. 它们都打印整齐 5\. 再次打印字符串，剩下的就是“嘿”。

那么如何取回剩余的字符串呢？

这是我的代码：

```
char the_string[ 81], *p;

cout << the_string << endl;

cout << "Input a string to parse: ";
cin.getline(the_string, 81);
p = strtok(the_string, ", ");
while (p != NULL) {
  cout << p << endl;
  p = strtok(NULL, ", ");
} 

cout << the_string << endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:53:02.217

[`strtok()`](http://en.cppreference.com/w/c/string/byte/strtok)修改它所操作的字符串：

> 如果 str != NULL，该函数搜索不是分隔符的第一个字符。这个字符是令牌的开始。然后该函数搜索第一个分隔符。这个字符是令牌的结尾。如果在找到标记结尾之前遇到 str 结尾，则函数终止并返回 NULL。否则，指向令牌末尾的指针将保存在静态位置以供后续调用。**然后这个字符被一个 NULL 字符替换，函数返回一个指向标记开头的指针。**

在传递给之前复制字符串`strtok()`。

在 C++ 中有更好的方法来实现这一点，但是这听起来像是家庭作业，你可能不允许使用它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T17:53:52.520

`strtok()``'\0'`每当找到标记时插入 a 来更改它所操作的字符串。

因此，字符串`"one two three\0"`（显式`'\0'`以供参考），当被空格标记时，被更改为`"one\0two\0three\0"`并且大多数字符串操作将其视为`"one"`（我已经删除了`'\0'`现在）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:53:59.763

下次使用函数时，请阅读其手册页（更仔细）。Strtok() 通过将分隔符的第一个字符替换为空字符来标记字符串。**您的字符串最终被修改**。像这样的东西（\0 表示 NUL 字符）：

```
Hey\0 how\0 are\0 you?\0 
```

strdup() 将字符串传递给 strtok() 之前的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T17:54:00.380

正如[strtok 的文档](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)所述：

> 然后 strtok() 函数从那里搜索包含在当前分隔符字符串中的字节。如果没有找到这样的字节，则当前标记延伸到 s1 指向的字符串的末尾，随后对标记的搜索将返回一个空指针。如果找到这样的字节，**它会被 null byte 覆盖**，这会终止当前令牌。strtok() 函数保存一个指向下一个字节的指针，下一个令牌搜索将从该字节开始。

这意味着当您打印字符串时，打印它的函数会在它通过第一个标记并遇到空字符后停止。NULL 通常表示 C 字符串的“字符串结尾”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T18:02:05.627

strtok() 的工作方式是将分隔符替换为字符串结束字符。所以“嘿，你好吗？” 变成“嘿​​，\0how\0are\0you?”

这是您通常不应该使用 strtok() 的原因之一。第二个原因是它以迭代方式工作并存储有关字符串的信息，以供进一步调用 strtok() 时使用。如果您从多个线程中使用它，则信息会被覆盖，并且进一步的调用将无法正常工作。

# magento - 在 Magento 搜索结果页面上添加内容

> ID：11957909
> 
> 赞同：0
> 
> 时间：2012-08-14T17:50:36.617
> 
> 标签：magento

在搜索结果页面上添加内容或推销商品的最佳方法是什么？

例如，我有这个 URL： [http ://beta.www.com/catalogsearch/result/?q=cookies](http://beta.www.com/catalogsearch/result/?q=cookies)

我需要添加 javascript 片段或其他 HTML 以在此处显示有关牛奶的广告横幅。如果没有太多编程，我将如何做到这一点？是否可以添加扩展以实现此功能？

谢谢，

布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:53:43.023

只需编辑或创建此文件

```
/www/app/design/frontend/[template]/default/template/catalog/product/list.phtml 
```

在您的模板中。

# android - 限制主键sqlite android

> ID：11957911
> 
> 赞同：0
> 
> 时间：2012-08-14T17:50:42.730
> 
> 标签：android, database, sqlite

我正在使用 android 中的 SQLITE 数据库，我已经读过如果我们在整数主键中插入 null，它会使用一些算法，并生成唯一的整数主键。我的问题，有没有办法限制整数主键，例如它应该在某个范围内生成整数，假设在 1 到 100 之间。在 100 之后，它应该为 1 或之间的任何空数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:28:56.163

要回答您的问题 - 是的，可以借助触发器（插入前）。我从来没有在 Android 上使用过它，我不确定 Android 是否会支持这个 - 但这将是要走的路。

但是，限制PK不是你想做的。这听起来像是一个糟糕的设计。主键永远存在。它是一把钥匙，一把钥匙，只不过是一把钥匙。

任何附加逻辑都必须在附加列的帮助下完成。

[SQLite 创建触发器](http://www.sqlite.org/lang_createtrigger.html)

# wordpress - WordPress主页图片

> ID：11957912
> 
> 赞同：0
> 
> 时间：2012-08-14T17:50:48.230
> 
> 标签：wordpress

[我有一个问题，在http://poshpanel.com/](http://poshpanel.com/)的主页上 ，选择后的特色图像被裁剪为 600x250 并放置在主屏幕上，如下面的帖子所示。

我想让它变得更大，可以做些什么来让它更大更引人注目。

照片裁剪 URL [http://poshpanel.com/wp-content/uploads/2012/08/Pamela-Skaist-Levy-and-Gela-Nash-Taylor-1-600x250.jpg](http://poshpanel.com/wp-content/uploads/2012/08/Pamela-Skaist-Levy-and-Gela-Nash-Taylor-1-600x250.jpg)

感谢您提前回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:37:17.220

这可能是在functions.php 中定义的自定义缩略图大小。在您的主题的functions.php 文件中查找[add_image_size](http://codex.wordpress.org/Function_Reference/add_image_size)。

但是，从浏览主题开始，更改该图像的大小可能还需要更改主要内容区域的大小。

# .net-4.5 - ETW 自定义控制器和消费者（使用 .net 4.5 EventSource 的提供者）

> ID：11957913
> 
> 赞同：3
> 
> 时间：2012-08-14T17:50:48.333
> 
> 标签：.net-4.5, event-listener, etw

我一直在尝试在 .net 4.5 中使用 ETW。我有一个使用 EventSource 编写消息的小型示例应用程序，但是，我很难理解如何创建自己的 ETW 控制器和使用者应用程序。

我使用 PerfView 启用并查看事件源是否正常工作，以及在同一程序集中添加 EventListner。现在我希望能够拥有自己的自定义“PerfView”来管理和查看实时跟踪。我只是不知道如何绑定到事件源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T19:19:22.780

查看 PerfMonitor 和构建它的 TraceEvent 类。

PerfMonitor 是一个包装应用程序，它可以控制源并使用它们的输出，因此您可以看到事情是如何工作的，而 TraceEvent 可以完成大部分繁重的工作，因此您可以将其包含在您的项目中。

PerfMonitor 和 TraceEvent 带有完整的源代码，它们在 Ms-PL 下获得许可。

PerfMonitor 概述： [http ://bcl.codeplex.com/wikipage?title=PerfMonitor](http://bcl.codeplex.com/wikipage?title=PerfMonitor)

TraceEvent 概述： [http ://bcl.codeplex.com/wikipage?title=TraceEvent](http://bcl.codeplex.com/wikipage?title=TraceEvent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T01:45:28.043

我建议使用[Tx (LINQ to logs and traces) library](http://tx.codeplex.com/ "Tx（LINQ 到日志和跟踪）库")。

此外，还有专用的[LINQpad 驱动程序](http://www.linqpad.net/RichClient/datacontextdrivers.aspx/ "LINQpad 驱动程序")可用，因此您可以对真实 ETW 会话的 ETL 文件编写历史查询或常规查询，并立即在 LINQpad 中查看结果，甚至无需编写真实代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T14:09:06.287

在 2020 年，您可以使用它`Microsoft.Diagnostics.Tracing.TraceEvent`来创建一个简单的侦听器。例子：

```
class Program
{
    static void Main(string[] args)
    {
        var sessionName = Guid.NewGuid().ToString();
        using (var session = new
            Microsoft.Diagnostics.Tracing.Session.TraceEventSession(sessionName))
        {
            // press CTRL-C to quit
            Console.CancelKeyPress += (sender, e) => session.Stop();

            session.Source.Dynamic.All += data =>
            {
                var line = $"{data}\n";
                Console.WriteLine(line);
            };

            var providerGuid = Microsoft.Diagnostics.Tracing.Session.TraceEventProviders.GetEventSourceGuidFromName
                ("MyCompany-MyApp-MyEventSource1");
            session.EnableProvider(providerGuid);

            session.Source.Process();
        }
    }
} 
```

[TraceEvent 库程序员指南](https://github.com/microsoft/perfview/blob/master/documentation/TraceEvent/TraceEventProgrammersGuide.md)中提供了更多信息。

# javascript - 使用 jQuery/JavaScript 隐藏和禁用

> ID：11957915
> 
> 赞同：0
> 
> 时间：2012-08-14T17:51:01.723
> 
> 标签：javascript, jquery, html

当用户单击某个单选按钮时，我想隐藏页面的一部分。但除了隐藏该区域之外，我还想禁用该区域中的所有输入。当用户点击另一个按钮时，我还想恢复该区域。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T17:54:02.550

您可以尝试以下方法：

```
$('#make_hide_button').on('click', function() {
  $('#target_area').hide().find('input, textarea').prop('disabled', true);
});

$('#make_show_button').on('click', function() {
  $('#target_area').show().find('input, textarea').prop('disabled', false);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T17:54:23.527

由于您没有指定您正在使用的当前代码，因此我只能给您一些一般准则。

看看 jQuery [**hide()**](http://api.jquery.com/hide/)：

```
$("#myDivId").hide(); 
```

检查如何使用[**on()绑定点击事件**](http://api.jquery.com/on/)

```
$("#MyRadioButton").on("click", function(){
    $("#myDivId").hide();
});

$("#MyOtherButton").on("click", function(){
    $("#myDivId").show();
}); 
```

要禁用/启用元素：

```
$("#MyElementId").prop("disabled", false);

$("#MyElementId").prop("disabled", true); 
```

同样，这是让您入门的东西，您有一些遇到问题的代码，请随时发布它，我相信我们可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:54:16.620

您问题中的更多代码肯定与答案中的代码有很强的关系。

话虽如此，一种通用的方法是确保您知道输入在哪个区域。也许使用`data-`属性或 ids 的 javascript 数组，或者也许通过类名。

一旦区域被明确定义，您可以隐藏单选按钮，然后遍历定义的区域，禁用任何输入类型的元素。

**编辑**

假设：

*   如果单击单选按钮，您希望禁用整个表单：*   您的单选按钮的 id 为“radButt”

    ```
    <script type="text/javascript">
     function GetParentForm(elem) {
        while (elem && elem.nodeName && elem.nodeName.toUpperCase() != "FORM") {
            elem = elem.parentNode;
        }
        return elem;
     }

     var changeState = 0;
     $("#radButt").click( function() {
       $(this).hide();
       var thisForm = GetParentForm( $(this)[0] );
       $(thisForm).find('input').prop('disabled', true);
     });
    </script> 
    ```

# sql-server - SQL - 按 N 美元金额对记录进行分组

> ID：11957923
> 
> 赞同：1
> 
> 时间：2012-08-14T17:51:31.413
> 
> 标签：sql-server, grouping, aggregation

我的问题有点类似于

[按 T​​-SQL 中的每 N 条记录分组](https://stackoverflow.com/questions/7068235/group-by-every-n-records-in-t-sql)

但是我想按最高美元金额分组

所以我有 20 条记录，总共`amount`50,000，我需要将它们分成组，以便每个组的最大数量为 10,000。

我尝试使用一个运行值，给记录一个排名，然后将这些值相加 <= 当前排名，然后使用 将它们分成子组`Floor((RunningValue - amount) / 10000)`，但在某些情况下它会超过 10,000 个最大值

样本数据，可以看到这里SubGroup 1 超过10,000

```
SubGroupNo  RowNo   amount  RunningValue
0           1       790.5   790.5
0           2       790.5   1581
0           3       790.5   2371.5
0           4       790.5   3162
0           5       744     3906
0           6       744     4650
0           7       1348.5  5998.5
0           8       1348.5  7347
0           9       1348.5  8695.5
1           10      1348.5  10044
1           11      1302    11346
1           12      1302    12648
1           13      1302    13950
1           14      1302    15252
1           15      1255.5  16507.5
1           16      1209    17716.5
1           17      1116    18832.5
1           18      1116    19948.5
2           19      1302    21250.5
2           20      1302    22552.5
2           21      1302    23854.5
2           22      1255.5  25110
2           23      1255.5  26365.5
2           24      976.5   27342 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T19:10:29.907

这可能不是最好的方法，但它确实有效。它假定您`RowNo`的 ' 是连续的。如果没有，我会添加`ROW_NUMBER()`这个解决方案。

### 基于迭代的方法

[SQL小提琴](http://sqlfiddle.com/#!3/fd747/5)

```
DECLARE @runningTotal decimal(7,2), @sgn tinyint, @cursor int, @count int
SET @runningTotal = '0.00'
SET @sgn = 0
SET @cursor = 1
SELECT @count = COUNT(*) FROM tbl

WHILE @cursor <= @count
BEGIN
    SELECT @runningTotal = @runningTotal + amount FROM tbl WHERE RowNo = @cursor
    IF @runningTotal > 10000
        BEGIN
            SELECT @runningTotal = amount FROM dbo.tbl WHERE RowNo = @cursor
            SET @sgn = @sgn + 1
        END
    UPDATE tbl SET SubGroupNo = @sgn WHERE RowNo = @cursor
    SET @cursor = @cursor + 1
END 
```

### 编辑 1：基于光标的方法

```
SET NOCOUNT ON;

DECLARE @SubGroupNo tinyint, @RowNo smallint, 
    @amount decimal(8,2), @RunningTotal decimal(7,2)

SET @SubGroupNo = 0
SET @RunningTotal = '0.00'

DECLARE row_cursor CURSOR FOR
    SELECT RowNo, amount FROM dbo.tbl

OPEN row_cursor

FETCH NEXT FROM row_cursor
INTO @RowNo, @amount

WHILE @@FETCH_STATUS = 0
BEGIN
    SET @RunningTotal = @RunningTotal + @amount

    IF @RunningTotal > 10000
        BEGIN
            SET @RunningTotal = @amount
            SET @SubGroupNo = @SubGroupNo + 1
        END
    PRINT @RowNo 
    PRINT @RunningTotal
    PRINT @SubGroupNo

    UPDATE dbo.tbl SET SubGroupNo = @SubGroupNo WHERE RowNo = @RowNo

    FETCH NEXT FROM row_cursor
    INTO @RowNo, @amount
END

CLOSE row_cursor
DEALLOCATE row_cursor 
```

结果

```
| 子组号 | 罗诺 | 数量 | 运行价值 |
----------------------------------------------
| 0 | 1 | 790.5 | 790.5 |
| 0 | 2 | 790.5 | 1581 |
| 0 | 3 | 790.5 | 2371.5 |
| 0 | 4 | 790.5 | 3162 |
| 0 | 5 | 第744章 3906 |
| 0 | 6 | 第744章 4650 |
| 0 | 7 | 1348.5 | 5998.5 |
| 0 | 8 | 1348.5 | 7347 |
| 0 | 9 | 1348.5 | 8695.5 |
| 1 | 10 | 1348.5 | 10044 |
| 1 | 11 | 第1302章 11346 |
| 1 | 12 | 第1302章 12648 |
| 1 | 13 | 第1302章 13950 |
| 1 | 14 | 第1302章 15252 |
| 1 | 15 | 1255.5 | 16507.5 |
| 1 | 16 | 第1209章 17716.5 |
| 2 | 17 | 1116 | 18832.5 |
| 2 | 18 | 1116 | 19948.5 |
| 2 | 19 | 第1302章 21250.5 |
| 2 | 20 | 第1302章 22552.5 |
| 2 | 21 | 第1302章 23854.5 |
| 2 | 22 | 1255.5 | 25110 |
| 2 | 23 | 1255.5 | 26365.5 |
| 2 | 24 | 976.5 | 27342 |
```

架构

```
CREATE TABLE tbl (
  SubGroupNo tinyint,
  RowNo tinyint PRIMARY KEY,
  amount decimal(6,2),
  RunningValue decimal(7,2))

INSERT INTO tbl (RowNo, amount, RunningValue)
VALUES
(1, '790.5', '790.5'),
(2, '790.5', '1581'),
(3, '790.5', '2371.5'),
(4, '790.5', '3162'),
(5, '744', '3906'),
(6, '744', '4650'),
(7, '1348.5', '5998.5'),
(8, '1348.5', '7347'),
(9, '1348.5', '8695.5'),
(10, '1348.5', '10044'),
(11, '1302', '11346'),
(12, '1302', '12648'),
(13, '1302', '13950'),
(14, '1302', '15252'),
(15, '1255.5', '16507.5'),
(16, '1209', '17716.5'),
(17, '1116', '18832.5'),
(18, '1116', '19948.5'),
(19, '1302', '21250.5'),
(20, '1302', '22552.5'),
(21, '1302', '23854.5'),
(22, '1255.5', '25110'),
(23, '1255.5', '26365.5'),
(24, '976.5', '27342') 
```

# python - psycopg2 映射 Python：“字典列表”到 Postgres：INSERT 语句的“复合类型数组”

> ID：11957925
> 
> 赞同：4
> 
> 时间：2012-08-14T17:51:39.070
> 
> 标签：python, postgresql, orm, relational-database, psycopg2

Postgres 版本：9.1.x。

假设我有以下架构：

```
DROP TABLE IF EXISTS posts CASCADE;
DROP TYPE IF EXISTS quotes CASCADE;

CREATE TYPE quotes AS
(
  text  CHARACTER VARYING,
  is_direct CHARACTER VARYING
);

CREATE TABLE posts
(
    body  CHARACTER VARYING,
    q     quotes[]
); 
```

我希望执行以下插入，显示在 SQL 中，但来自 Python Psycopg2。

```
insert into posts(body,q) VALUES('ninjas rock',ARRAY[ ROW('I AGREE',True)::quotes, ROW('I DISAGREE',FALSE)::quotes ]); 
```

实现这一点的语法是什么（没有循环等）。我确信这是可能的，因为[文档说](http://initd.org/psycopg/docs/extras.html#composite-types-casting) *“在 2.4.3 版中更改：添加了对复合类型数组的支持”*。该文档仅显示`SELECT`语句示例。

注意：我的客户端代码中有一个字典列表，它们在概念上映射到上面的伪模式。

**编辑：**

嗯，我一定错过了文档中的这一点：*“从 Python 元组到复合类型的适应是自动的，不需要适配器注册。”* . 现在要弄清楚数组部分。

**编辑2：**

`%s`当传递的数据类型是`list(tuple)`或时， psycopg2 的占位符应该起作用`list(dict)`。必须测试一下：D

**编辑3：** 差不多就在那里，在这种情况下，字典不起作用，列表起作用，元组起作用。但是，我需要将元组字符串表示形式转换为复合记录类型。

这个 ：

```
quote_1 = ("monkeys rock", "False")
quote_2 = ("donkeys rock",  "True")
q_list = [ quote_1, quote_2]
print cur.mogrify("insert into posts VALUES(%s,%s)", ("animals are good", q_list)) 
```

创建以下字符串：

```
insert into posts VALUES('animals are good',ARRAY[('monkeys rock', 'false'), ('donkeys rock', 'true')]) 
```

这会产生以下错误：

```
psycopg2.ProgrammingError: column "q" is of type quotes[] but expression is of type record[] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T01:30:16.657

稍微扩展你的努力，怎么样：

```
quote_1 = ("monkeys rock", "False")
quote_2 = ("donkeys rock",  "True")
q_list = [ quote_1, quote_2]
print cur.mogrify("insert into posts VALUES(%s,%s::quotes[])", 
                  ("animals are good", q_list))
#
#                 added explicit cast to quotes[]->^^^^^^^^ 
```

**说明**：

如果你运行：

```
insert into posts 
VALUES('animals are good', ARRAY[
    ('monkeys rock', 'false'),
    ('donkeys rock', 'true')
]); 
```

直接在`psql`你会得到：

```
regress=# insert into posts 
regress-# VALUES('animals are good',ARRAY[
regress-#             ('monkeys rock', 'false'),
regress-#             ('donkeys rock', 'true')
regress-#  ]);
ERROR:  column "q" is of type quotes[] but expression is of type record[]
LINE 1: insert into posts VALUES('animals are good',ARRAY[('monkeys ...
                                                    ^
HINT:  You will need to rewrite or cast the expression. 
```

果然，告诉 Pg 你的匿名数组是类型`quotes[]`就可以了：

```
regress=# insert into posts 
regress-# VALUES('animals are good',ARRAY[
regress-#           ('monkeys rock', 'false'),
regress-#           ('donkeys rock', 'true')
regress-# ]::quotes[]);
INSERT 0 1

regress=# select * from posts;
       body       |                           q                            
------------------+--------------------------------------------------------
 animals are good | {"(\"monkeys rock\",false)","(\"donkeys rock\",true)"}
(1 row) 
```

# java - fileIO 的共享 servlet？

> ID：11957927
> 
> 赞同：0
> 
> 时间：2012-08-14T17:51:45.197
> 
> 标签：java, jakarta-ee, file-io

想象一下有一个`webservice`or `servlet`，它可以执行一些`fileIO`. 我如何确保如果多个客户端执行相应的 WS 方法，fileIO 仍然仅由一个“线程”处理？这样就不会因为几个客户端触发fileIO而丢失数据吗？

我应该寻找哪个方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:54:34.630

最好的选择可能只是使读/写的底层方法在一个公共对象上同步。（例如，文件对象可能是最简单的）。

```
private static File theFile = new File("theonetoopen.txt");
...

private void someImportantIOMethod(Object stuff){
    synchronized(theFile){

    //Your file output writing code here.

    }
} 
```

# php - Html 标记计数 - 变化率公式

> ID：11957928
> 
> 赞同：0
> 
> 时间：2012-08-14T17:51:45.180
> 
> 标签：php, scraper, rate

我一直在尝试找到一个统计公式来计算从各种网站添加或删除的 html 标签的变化率。

因此，例如，使用我正在编写的刮板，我获得了初始标签计数，然后缓存该值。稍后，在下一轮，我将获得的当前标签计数与过去的标签计数进行比较，并根据两者在变化率方面的差异计算百分比。

此处还包括其他因素，例如网站被抓取的次数，以及这些抓取发生的日期等。

这种性质的东西的理想公式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:16:08.473

计数标签是可以的，另外你可以寻找表格树或 div 树及其深度。

例如，

```
<div>
  <div>
    <div> .. </div>
  </div>
</div>
depth is 3 
```

# jquery - jquery - textarea中的最小单词数

> ID：11957929
> 
> 赞同：2
> 
> 时间：2012-08-14T17:51:47.813
> 
> 标签：jquery, textarea

我一直在到处寻找一个可以控制在 textarea 中输入的最小单词数的函数，如果用户没有输入最小单词数（比如说 250 个），一旦他尝试就会出现警报提交消息。

我正在使用这个主题：[http ://www.elegantthemes.com/demo/?theme=AskIt](http://www.elegantthemes.com/demo/?theme=AskIt)

这是提交表单的方式：

```
<form action="<?php echo(get_permalink($post->ID)); ?>#create_new_post" method="post"> 
```

这是文本区域代码：

```
<textarea name="et_newpost_content" id="et_newpost_content" class="input"><?php if ( isset( $_POST['et_newpost_content'] ) ) echo esc_textarea( $_POST['et_newpost_content'] ); ?></textarea> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T17:56:09.560

你是说单词还是字符？如果你想计算**words**，一个非常幼稚的方法是用空格分割并检查结果数组的长度：

```
if ($("#et_newpost_content").text().split(/\s+/).length < 250) {
  alert('Message must be at least 250 words.')
} 
```

如果您的意思是**characters**，那么它会容易得多：

```
if ($("#et_newpost_content").text().length < 250) {
  alert('Message must be at least 250 characters.')
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T17:58:02.783

修改您的表单标签，使其显示为：

```
<form onsubmit="checktextarea()" action="<?php echo(get_permalink($post->ID)); ?>#create_new_post" method="post"> 
```

然后在你的javascript中，输入

```
function checktextarea() {

   var minLength = 15;

   var $textarea = $('#et_newpost_content');
   if($textarea.text().length < minLength) {
      alert('You need to enter at least ' + minLength ' + characters');
      return false;
   }
} 
```

这将阻止提交表单，除非文本区域中文本的字符长度大于您为 minLength 设置的长度。

**编辑**

我看到我误读了问题并计算了字符而不是单词。如果您需要文字（和@João 的道具），该功能应类似于

```
function checktextarea() {

   var minLength = 15;

   var $textarea = $('#et_newpost_content');
   if($textarea.text().split(/\s+/).length < minLength) {
      alert('You need to enter at least ' + minLength + ' words');
      return false;
   }
} 
```

[split](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)函数使用正则表达式将textarea 中的文本按空格字符拆分，并将其放入数组中。然后你检查数组的长度，看看你是否有足够的单词

**编辑 2**

在以[noConflict](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)模式运行的 Wordpress 站点中，代码段应如下所示

```
function checktextarea() {

   var minLength = 15;

   var $textarea = jQuery('#et_newpost_content');
   if($textarea.text().split(/\s+/).length < minLength) {
      alert('You need to enter at least ' + minLength + ' words');
      return false;
   }
} 
```

# c# - 转发器按钮发回 page_load 而不是我的方法？

> ID：11957934
> 
> 赞同：0
> 
> 时间：2012-08-14T17:52:02.467
> 
> 标签：c#, asp.net, .net

在一个 aspx 页面中，我有以下转发器：

```
<asp:Repeater runat="server" ID="r" OnItemCommand="paper_ItemCommand">
    <ItemTemplate>
        <div style="padding-bottom:20px">
            <asp:HiddenField runat="server" ID="questionID" Value='<%# Eval("ID") %>'/>
            <asp:Label runat="server" ID="questionNumber" Text='<%# Eval("Number") %>'/><br />
            <asp:Label runat="server" ID="question1" Text='<%# Eval("Question1") %>' /><br />
            [ <asp:Label runat="server" ID="questionMark" Text='<%# Eval("Mark") %>'/> ]<br />
            <asp:Button ID="View_Conversations" runat="server" Text="View Conversations" CommandName="ViewConversationsCommand" />
        </div>
    </ItemTemplate>
    <SeparatorTemplate>
        <hr />
    </SeparatorTemplate>
</asp:Repeater> 
```

在文件后面的代码中，我有以下方法：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        var paperID = Session["paperID"].ToString();
        QuestionPaper = repository.GetPaper(Int32.Parse(paperID));
        r.DataSource = QuestionPaper.Questions;
        r.DataBind();
    }

    protected void paper_ItemCommand(object sender, RepeaterCommandEventArgs e)
    {
        switch (e.CommandName)
        {
            case "ViewConversationsCommand":
                var hidden = e.Item.FindControl("questionID") as HiddenField;
                var myquestionID = hidden.Value;
                break;
        }
    } 
```

我遇到的问题是，当我单击转发器上的查看对话按钮时，代码会点击**page_load**方法而不是我的**paper_ItemCommand**方法。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T17:58:24.883

发生页面加载是因为每次您点击按钮时，回发都会发生在它自身的页面上，并且它的整个页面生命周期都会运行。如果您想防止在按钮单击时不执行页面加载内容，您可以尝试如下：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack){
      // Your existing stuff
    }
} 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T17:58:23.817

每次加载页面时，包括当您回发到页面时（例如，通过单击 a `Button`），`Page_Load`都会触发事件处理程序。关键是检查`Page`对象的`IsPostBack`属性：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack) 
    {
        // do things that only should be done on the first page load
        var paperID = Session["paperID"].ToString();
        QuestionPaper = repository.GetPaper(Int32.Parse(paperID));
        r.DataSource = QuestionPaper.Questions;
        r.DataBind();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T18:01:15.147

page_load 总是先运行 [http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vbcon/html/vbconwebformspageprocessingstages.asp](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vbcon/html/vbconwebformspageprocessingstages.asp) 测试如果不是回发设置你的初始化

```
if(!Page.IsPostback)
{
 var paperID = Session["paperID"].ToString(); 
        QuestionPaper = repository.GetPaper(Int32.Parse(paperID)); 
        r.DataSource = QuestionPaper.Questions; 
        r.DataBind(); 
} 
```

# ios - 如何用自定义对象中的单个字段填充 TableView？

> ID：11957942
> 
> 赞同：0
> 
> 时间：2012-08-14T17:52:29.913
> 
> 标签：ios, titanium, tableview, appcelerator, custom-object

所以我试图`TableView`用数组中单个字段的值填充 a `Custom Objects`，但我`TableView`没有被我得到的数组填充。这是我的代码：

```
function SearchWindow(){
    var self = Ti.UI.createWindow({
        backgroundColor:'#d0d0d0d'
    });
    var Cloud = require('ti.cloud');
    Cloud.debug=true;

    var searchBar = Ti.UI.createSearchBar({
        showCancel:false
    });
    var data = [];
    Cloud.Objects.query({
        classname:'Reservacion'
    }, function(e){
        if(e.success){
            for(var i=0; i< e.Reservacion.length; i++){
                data.push({title : e.Reservacion[i].nombre});
            }
        } else {
            alert('Error \n ' + ((e.error && e.message) || JSON.stringify(e)));
        }
    });

    var tableView = Ti.UI.createTableView({
        backgroundColor:'#d0d0d0',
        search:searchBar,
        data: data,
        filterAttribute : 'title'
    });

    self.add(tableView);
    return self;
} 
```

我正在使用从被调用的字段中的值填充数据数组`nombre`，`Custom Object`但`Reservacion`数据没有显示在`Table View`. 我的方法错了吗？如果是这样，那么我该如何填写`Table View`所需的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:14:59.657

创建表视图后，您正在将**nombre**字段的值推送到**数据数组。**这意味着当创建表视图时，没有行，所以你什么也看不到。`tableView.data = data;`通过在数据完全填充后（在您的 Cloud.Objects.query 回调中）进行设置来解决此问题。

实例化您的表格视图而不指定`data`：

```
var tableView = Ti.UI.createTableView({
    backgroundColor:'#d0d0d0',
    search:searchBar,
    filterAttribute:'title'
}); 
```

我希望它有效。

# memory-management - 访问路由器内存

> ID：11957943
> 
> 赞同：-1
> 
> 时间：2012-08-14T17:52:33.807
> 
> 标签：memory-management, hardware, router

这个问题可能很愚蠢，因为我完全不知道硬件的功能。

我的问题如下：

*   您如何访问路由器内存（在软件方面）？

通过内存，我不是指路由表或 DNS 缓存，而是真正的“磁盘”。

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:56:06.360

这将因设备而异。大多数 *nix 品种都有一个简单的文件系统，您可以在读/写模式下挂载它以写入板载闪存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T17:57:52.870

选项1：如果可以的话，你安装它（如果它是基于linux的路由器或提供运行脚本privg的商业路由器硬件。）在正常的r / w操作之后。

选项 2：您可以尝试 ssh 或 telnet。（例如，我在轴 ip 摄像机上使用 telnet）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T17:56:09.370

我不太清楚你所说的真正的“磁盘”是什么意思。您是指允许您插入外部硬盘驱动器的路由器吗？

我可能错了，但我怀疑并非所有（如果有的话）都允许这种访问。我认为这将完全取决于您要使用的路由器。我怀疑每个制造商/型号都会有自己的方法。

# java - 在 Spring 上下文中导入/过滤属性

> ID：11957948
> 
> 赞同：1
> 
> 时间：2012-08-14T17:52:50.177
> 
> 标签：java, spring

我正在使用 Java 1.6 和 Spring 3.1.1。我正在尝试将外部属性文件读入 Spring 上下文。这是症结所在：第一个属性文件包含下一个属性文件的路径。例子：

${user.home} 中的第一个属性文件：

```
resource.dir=C:/users/smith
config.dir=${resource.dir}/configuration 
```

第二个属性文件 ${config.dir}（在第一个属性文件中定义）：

```
datasource.name=jdbc:mysql://dbserver:3306/test
datasource.prop1=etc
datasource.prop2=etc 
```

所以我需要读取第一个文件，处理这些属性，然后使用它们来访问第二个文件。

使用 Spring PropertyPlaceholderConfigurer 只会让我进入第一个文件。我读到您的应用程序上下文中只能有一个 PropertyPlaceholderConfigurer，这似乎是真的。[编辑：有关说明，请参见 [https://jira.springsource.org/browse/SPR-6428](https://jira.springsource.org/browse/SPR-6428)。]

有人知道最好的方法吗？

编辑：如果您在 ant 中运行构建，这显然很容易做到，不幸的是我的项目使用 Maven。您使用 PROPERTY 标记执行第一步，它“自动”解析下一步的所有内容，允许您将类路径设置为 ${cfg.dir} 目录等。然后您可以“正常”从这些目录。我希望 Spring 或 Maven 允许我使用相同的功能，但还没有找到答案......

蚂蚁示例：

```
<property file="${user.home}/global.properties" />

<target name="run-some-stuff">
    <java classname="com.mystuff.App" failonerror="true" fork="yes">
        <classpath>
            <path location="${cfg.dir}" />
            <path location="${resource.dir}" />
        </classpath>
        </java>
    </target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:36:30.527

如果资源目录只是用户的主目录，您可以在 xml 中执行以下操作...

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

  <context:property-placeholder location="file:${user.home}/configuration"/>
</beans> 
```

或者，如果您更喜欢在代码中执行此操作，也可以使用`@PropertySource`注解

这是因为在 Spring 3.1 中，PropertySource 抽象统一了来自系统属性、环境变量以及属性文件的属性。user.home 是系统属性。

# matlab - 在具有不同类型元素的元胞数组中查找字符串

> ID：11957949
> 
> 赞同：1
> 
> 时间：2012-08-14T17:52:49.863
> 
> 标签：matlab, cell-array

我有一个接受可变参数的函数。这些参数是参数-值对，因此`varargin`每个奇数索引元素都是字符串（参数）的元胞数组也是如此，但偶数索引元素可以是字符串、数字或字符串元胞数组。我想在`varargin`. 我有一个可行的解决方案，但它使用`arrayfun`了两次；有没有更干净/更快/更有效的方法在这样的单元阵列中找到一个字符串？结果`index`将用于从 中删除该元素和以下元素`varargin`。我想尽量减少新变量的创建。

```
str_to_find = 'paramX'
finds = arrayfun(@(i) strfind(varargin{i},str_to_find), 1:length(varargin), 'UniformOutput', 0);
finds2 = arrayfun(@(i) ~iscell(finds{i}) && ~isempty(finds{i}), 1:length(finds));
index = find(finds2==1);

varargin(index)=[];
varargin(index)=[]; 
```

给定`varargin`是`{'paramA', 'valueA', 'paramB', 9, 'paramX', {'z','x','c'}`，那么`finds`是`[] [] [] [] [1] {1x3 cell}`，`finds2`是`0 0 0 0 1 0`，`index`是`5`。所以，我的解决方案可以满足我的需要，但它看起来很丑。我只会使用`finds2`（即，不创建`index`）从 中删除该元素`varargin`，但我还需要删除它之后的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:18:31.090

`strcmp`您可以使用应该相当快的内置函数：

```
idx  = strcmp(str_to_find, varargin); 
```

这将为您提供与目标匹配的字符串的所有单元格元素的索引。

然后，为了修剪这些元素，您可以使用

```
varargin( or(idx, [0 idx(1:end-1)]) ) = []; 
```

假设 idx 是一个行数组。

最后，您可能还需要运行一些格式检查，以确保用户没有以错误的顺序输入参数对（或使用与参数名称匹配的参数名称），否则这种代码会表现得很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T14:17:33.637

试试这个怎么样：

```
index  = find(strcmp(str_to_find, varargin)); 
```

这应该给出“参数”的索引，并向其添加一个将获得其“值”的索引

# php - 如何加快这个 maxmind 数据库查询？

> ID：11957953
> 
> 赞同：0
> 
> 时间：2012-08-14T17:53:07.090
> 
> 标签：php, mysql

我们目前正在使用此查询来搜索我们在本地托管的 maxmind db：

```
$db_result = mysql_query("select countryCode from example_table where $num BETWEEN beginIpNum AND endIpNum LIMIT 1"); 
```

当我们从页面中删除查询时，它的加载速度快了近一秒（大约 0.7 到 0.8 秒），我们真的可以利用这段时间。

关于如何改善这一点的想法？

将代码改编为 mysqli 会提高速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:21:14.513

索引是提高查询执行速度的最佳技术。where 中使用的列应该被索引，这将更快地返回结果。所以分别在 beginIpNum 和 endIpNum 字段上应用索引。有关 sql 索引的更多信息，请参阅以下链接 [http://beginner-sql-tutorial.com/sql-index.htm](http://beginner-sql-tutorial.com/sql-index.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:28:56.397

快速“修复”是确保您有适当的覆盖索引：

```
on example_table (beginIpNum, endIpNum, countryCode) 
```

* * *

使用 mysql 命令行客户端（或 SQLYog 等）针对数据库测试查询，以进行计时，并验证您的 SQL 语句是否正在使用索引 (EXPLAIN)。

# delphi - TTimer 不触发

> ID：11957954
> 
> 赞同：3
> 
> 时间：2012-08-14T17:53:21.880
> 
> 标签：delphi, windows-7, timer, delphi-7

我有一个奇怪的问题。我的主窗体上有一个 TTimer，应该触发 500 毫秒。创建表单后。

当我从 IDE 运行它时它工作正常，但是当我在其他 W7 PC 上运行它时，会创建主窗体，但计时器不会触发。（有些组件没有更新）如果我点击一个控件，一切都会更新，计时器会触发，一切都很好。如果我移动表单，所有内容都会更新，但不会启动计时器。如果我在安装了 Delphi 的 PC 上运行它，它工作正常。没问题。

MyForm.OnCreate 中的代码执行得很好。`Timer.Enabled := True`没有改变。

知道是什么原因造成的吗？我真的被困在这里了。

最好的祝福。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T00:23:43.687

有多种可能性：

1.  WM_TIMER 消息仅在您的消息队列为空时传送。如果您的应用程序中的某些内容，或者在其他计算机上运行的另一个应用程序中的某些内容频繁地向窗口句柄发布消息，以至于该窗口的消息队列永远不会清空，则 WM_TIMER 事件将永远不会触发。如果发生这种情况，您可能需要等待正常 TTimer 周期的 10 倍或 20 倍或 30 倍，但事件最终可能会触发。到目前为止，我还没有观察到任何计时器根本不触发的情况，但这当然在理论上是可能的......

2.  尽管您说您确定计时器已启用（您将其设置为启用），但您可能在代码中的其他地方禁用了它。

3.  如果你在做一些尝试...除了...结束块并忽略异常，那么可能会发生一些你在其他机器上看不到的不好的事情。

4.  您的计时器代码可能正在触发，但在计时器上运行的代码中可能会发生异常、崩溃或挂起。

5.  在您的代码中，您可能有一些 Delphi 事件处理程序，它们创建了一个几乎“无限循环”的情况，因为您编写的一些事件处理程序在您不希望它们触发时触发，从而导致副作用，从而使您的应用程序忙。您提到您正在单击某处并且问题消失了。该点击可能足以中断代码中的其他一些恶性循环。

6.  您提到它可以在任何安装了 delphi 的 PC 上运行。您是否使用了具有某些限制的第三方控件（例如要求您在调试器中运行？）。或者您的应用程序是否加载了一些未安装在其他计算机上的 DLL 或 BPL？

从一个没有任何内容的全新应用程序开始。添加一个 TTimer。现在在计时器事件上增加一个整数字段值并将该值写入表单的标题。现在在其他机器上运行它。它会正常工作。

现在去看看你写的那一大堆代码，然后决定如何把你那一大堆代码一分为二，找出坏掉的那一半。经过足够的步骤，你会发现你的问题。这里没有人可以为您调试它。

尝试添加一些日志消息，`OutputDebugString`在其他机器上使用并运行 DebugView，如果您想在另一台机器上查看应用程序的一些内部结构

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-02T22:31:20.187

老问题我知道，但是想和你分享这块金子，老而金;-)

您也可以将其转换为线程（因为计时器是有限的），我对此做了一个简单的解决方案，一个名为`TimerAsThread`. 将代码另存为 TimerAsThread.pas。您需要在 extctrls 之后包含此单元或将其包含为最后一个单元。您不必更改代码，它的工作原理完全相同，但现在基于线程。线程是一个单独的进程，如果您想了解更多信息，请在 google 上搜索。

玩得开心。

```
{*******************************************************}
{                                                       }
{         Delphi VCL Extensions (RX)                    }
{                                                       }
{         Copyright (c) 1996 AO ROSNO                   }
{         Copyright (c) 1997, 1998 Master-Bank          }
{                                                       }
{*******************************************************}

unit TimerAsThread;

interface

uses {$IFDEF WIN32} Windows, {$ELSE} WinTypes, WinProcs, {$ENDIF}
  Messages, SysUtils, Classes;

type

{ TTimer }

  TTimer = class(TComponent)
  private
    FEnabled: Boolean;
    FInterval: Cardinal;
    FOnTimer: TNotifyEvent;
    FWindowHandle: HWND;
{$IFDEF WIN32}
    FSyncEvent: Boolean;
    FThreaded: Boolean;
    FTimerThread: TThread;
    FThreadPriority: TThreadPriority;
    procedure SetThreaded(Value: Boolean);
    procedure SetThreadPriority(Value: TThreadPriority);
{$ENDIF}
    procedure SetEnabled(Value: Boolean);
    procedure SetInterval(Value: Cardinal);
    procedure SetOnTimer(Value: TNotifyEvent);
    procedure UpdateTimer;
    procedure WndProc(var Msg: TMessage);
  protected
    procedure Timer; dynamic;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
{$IFDEF WIN32}
    procedure Synchronize(Method: TThreadMethod);
{$ENDIF}
  published
    property Enabled: Boolean read FEnabled write SetEnabled default True;
    property Interval: Cardinal read FInterval write SetInterval default 1000;
{$IFDEF WIN32}
    property SyncEvent: Boolean read FSyncEvent write FSyncEvent default True;
    property Threaded: Boolean read FThreaded write SetThreaded default True;
    property ThreadPriority: TThreadPriority read FThreadPriority write
      SetThreadPriority default tpNormal;
{$ENDIF}
    property OnTimer: TNotifyEvent read FOnTimer write SetOnTimer;
  end;

implementation

uses Forms, Consts, VCLUtils;

{$IFDEF WIN32}

{ TTimerThread }

type
  TTimerThread = class(TThread)
  private
    FOwner: TTimer;
    FInterval: Cardinal;
    FException: Exception;
    procedure HandleException;
  protected
    procedure Execute; override;
  public
    constructor Create(Timer: TTimer; Enabled: Boolean);
  end;

constructor TTimerThread.Create(Timer: TTimer; Enabled: Boolean);
begin
  FOwner := Timer;
  inherited Create(not Enabled);
  FInterval := 1000;
  FreeOnTerminate := True;
end;

procedure TTimerThread.HandleException;
begin
  if not (FException is EAbort) then begin
    if Assigned(Application.OnException) then
      Application.OnException(Self, FException)
    else
      Application.ShowException(FException);
  end;
end;

procedure TTimerThread.Execute;

  function ThreadClosed: Boolean;
  begin
   if( Application.Terminated ) and ( NOT Terminated ) then
    Terminate;

   Result := Terminated or Application.Terminated or (FOwner = nil);
  end;

begin
  repeat
    if not ThreadClosed then
      if SleepEx(FInterval, False) = 0 then begin
        if not ThreadClosed and FOwner.FEnabled then
          with FOwner do
            if SyncEvent then Synchronize(Timer)
            else
              try
                Timer;
              except
                on E: Exception do begin
                  FException := E;
                  HandleException;
                end;
              end;
      end;
  until Terminated;
end;

{$ENDIF}

{ TTimer }

constructor TTimer.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FEnabled := True;
  FInterval := 1000;
{$IFDEF WIN32}
  FSyncEvent := True;
  FThreaded := True;
  FThreadPriority := tpNormal;
  FTimerThread := TTimerThread.Create(Self, False);
{$ELSE}
  FWindowHandle := AllocateHWnd(WndProc);
{$ENDIF}
end;

destructor TTimer.Destroy;
begin
  Destroying;
  FEnabled := False;
  FOnTimer := nil;
{$IFDEF WIN32}
  {TTimerThread(FTimerThread).FOwner := nil;}
//  while FTimerThread.Suspended do FTimerThread.Resume;
  FTimerThread.Terminate;
  {if not SyncEvent then FTimerThread.WaitFor;}
  if FWindowHandle <> 0 then begin
{$ENDIF}
    KillTimer(FWindowHandle, 1);
    DeallocateHWnd(FWindowHandle);
{$IFDEF WIN32}
  end;
{$ENDIF}
  inherited Destroy;
end;

procedure TTimer.WndProc(var Msg: TMessage);
begin
  with Msg do
    if Msg = WM_TIMER then
      try
        Timer;
      except
        Application.HandleException(Self);
      end
    else Result := DefWindowProc(FWindowHandle, Msg, wParam, lParam);
end;

procedure TTimer.UpdateTimer;
begin
{$IFDEF WIN32}
  if FThreaded then begin
    if FWindowHandle <> 0 then begin
      KillTimer(FWindowHandle, 1);
      DeallocateHWnd(FWindowHandle);
      FWindowHandle := 0;
    end;
    if not FTimerThread.Suspended then FTimerThread.Suspend;
    TTimerThread(FTimerThread).FInterval := FInterval;
    if (FInterval <> 0) and FEnabled and Assigned(FOnTimer) then begin
      FTimerThread.Priority := FThreadPriority;
      while FTimerThread.Suspended do FTimerThread.Resume;
    end;
  end
  else begin
    if not FTimerThread.Suspended then FTimerThread.Suspend;
    if FWindowHandle = 0 then FWindowHandle := AllocateHWnd(WndProc)
    else KillTimer(FWindowHandle, 1);
    if (FInterval <> 0) and FEnabled and Assigned(FOnTimer) then
      if SetTimer(FWindowHandle, 1, FInterval, nil) = 0 then
        raise EOutOfResources.Create(ResStr(SNoTimers));
  end;
{$ELSE}
  KillTimer(FWindowHandle, 1);
  if (FInterval <> 0) and FEnabled and Assigned(FOnTimer) then
    if SetTimer(FWindowHandle, 1, FInterval, nil) = 0 then
      raise EOutOfResources.Create(ResStr(SNoTimers));
{$ENDIF}
end;

procedure TTimer.SetEnabled(Value: Boolean);
begin
  if Value <> FEnabled then begin
    FEnabled := Value;
    UpdateTimer;
  end;
end;

procedure TTimer.SetInterval(Value: Cardinal);
begin
  if Value <> FInterval then begin
    FInterval := Value;
    UpdateTimer;
  end;
end;

{$IFDEF WIN32}

procedure TTimer.SetThreaded(Value: Boolean);
begin
  if Value <> FThreaded then begin
    FThreaded := Value;
    UpdateTimer;
  end;
end;

procedure TTimer.SetThreadPriority(Value: TThreadPriority);
begin
  if Value <> FThreadPriority then begin
    FThreadPriority := Value;
    if FThreaded then UpdateTimer;
  end;
end;

procedure TTimer.Synchronize(Method: TThreadMethod);
begin
  if (FTimerThread <> nil) then begin
    with TTimerThread(FTimerThread) do begin
      if Suspended or Terminated then Method
      else TTimerThread(FTimerThread).Synchronize(Method);
    end;
  end
  else Method;
end;

{$ENDIF}

procedure TTimer.SetOnTimer(Value: TNotifyEvent);
begin
  if Assigned(FOnTimer) <> Assigned(Value) then begin
    FOnTimer := Value;
    UpdateTimer;
  end else FOnTimer := Value;
end;

procedure TTimer.Timer;
begin
  if FEnabled and not (csDestroying in ComponentState) and
    Assigned(FOnTimer) then FOnTimer(Self);
end;

end. 
```

# php - While 循环和防止重复信息循环通过

> ID：11957962
> 
> 赞同：0
> 
> 时间：2012-08-14T17:53:47.580
> 
> 标签：php

我有一个 while 循环，它遍历一个收集与搜索词相关的所有行的表。问题是我的数据库中有多行包含完全相同的信息，因此当 while 循环运行时，它将发布重复的信息。我试图找到一种方法来防止 while 循环显示重复的情况。我正在考虑围绕 echoed 变量运行 if 语句，但我不确定要检查什么以防止显示重复信息。这是下面的代码。

```
$search = mysql_query("SELECT `primary_id`, `person_requested`, `likes` FROM 

`requests` WHERE `person_requested` LIKE '%$search_term%'");

while ($results_row = mysql_fetch_assoc($search)) 

{

$persons = $results_row['person_requested'];

echo $persons;  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:56:32.773

在查询中使用`DISTINCT`以返回不同的记录：

```
$search = mysql_query("SELECT DISTINCT `person_requested`, `likes`
              FROM `requests` WHERE `person_requested` LIKE '%$search_term%'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T17:56:46.300

尝试调整您的 SQL 以仅返回您需要的结果。您可以尝试使用`DISTINCT`来消除重复的结果。

# modernizr - HTML5 样板为什么我会收到这么多的 CSS 错误

> ID：11957965
> 
> 赞同：2
> 
> 时间：2012-08-14T17:53:52.593
> 
> 标签：modernizr, html5boilerplate

我刚刚安装了 HTML5 样板并且没有向 index.html 文件添加任何标记，但我已经收到了所有的 css 错误，包括但不限于以下内容：

预期的媒体功能名称，但找到“transform-3d”。

预期的媒体功能名称，但找到“-webkit-transform-3d”

预期的媒体功能名称，但找到“-o-transform-3d”

预期的媒体功能名称，但找到“-ms-transform-3d”

预期的媒体功能名称，但找到了“modernizr”。

错误：WebGL：无法获得可用的 WebGL 上下文

未知属性 -moz-opacity' declaratoin 已删除，

这个名单还在继续......有几十个这样的区域。

我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T08:52:14.140

`transform-3d`在 HTML5 Boilerplate 中不使用。这一定是不同的东西。你还有其他款式在跑吗？

[无论如何：使用W3C Validator](http://jigsaw.w3.org/css-validator/validator)验证 HTML5BP 的 CSS 时有很多错误 (35) 。其中大部分是因为 Internet Explorer 6 和 7 存在一些 hack。

请不要太在意他们。它不会对您的页面做任何错误。如果您不需要 IE6 和 7 支持，请删除这些 hack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T03:29:09.387

我刚刚上传了一个默认的流体网格boilerplate.css 并尝试验证它。

33 个错误；我根本没有编辑它。

# java - Checkstyle 和 Findbugs 安装

> ID：11957966
> 
> 赞同：1
> 
> 时间：2012-08-14T06:16:22.687
> 
> 标签：java, windows

我已经在 Windows XP 上安装了 javac 版本 1.6.0_16，并且我正在使用 Dr.Java 和命令提示符来编译和运行 Java 程序。

我下载并解压了 Checkstyle 5.5 和 Findbugs 2.0.1。我正在尝试安装 Checkstyle，并且[说明](http://checkstyle.sourceforge.net/cmdline.html)指出我需要在类路径中包含 checkstyle-5.5-all.jar。

我的问题是，我是否应该将Checkstyle目录放在jdk1.6.0_16目录的lib文件夹中，并设置classpath如下：

*   C:>设置类路径=%C:\Program Files\Java\jdk1.6.0_16\lib\checkstyle-5.5\checkstyle-5.5-all.jar

这个对吗？我应该为 Findbugs 做同样的事情吗？提前致谢

编辑：当我使用环境变量添加上述路径并运行 checkstyle hello.java 时，我收到错误：'checkstyle' 不被识别为内部或外部命令、可运行程序或批处理文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:06:59.853

**[Maven](http://maven.apache.org/)会为你解决这个问题**

听起来您才刚刚开始涉足 Java 世界。为此，我建议您在构建过程中查看 Maven。此外，在撰写本文时，您应该至少使用[JDK1.6.0_33](http://jdk6.java.net/)。

本质上，Maven 将通过针对您的代码的标准插件来管理运行 Checkstyle、Findbugs（您还应该考虑 PMD）的过程。它还将管理 Javadocs 的创建、链接源代码并为您的项目生成网站。此外，Maven 促进了一个良好的发布过程，您可以根据快照工作，直到准备好将您的工作分享给更广阔的世界。

**如果我不使用 Maven？**

好吧，只需在您的项目中创建一个`/lib`文件夹并将您的依赖项填充到其中。随着时间的推移，你会创造越来越多的东西，而这些将会交织在一起。一段时间后，您将进入[JAR Hell](http://en.wikipedia.org/wiki/JAR_hell#JAR_hell)并求助于 Maven 来解决问题。

我们都去过那里。

# c++ - 类图显示文本在框外运行的类？

> ID：11957972
> 
> 赞同：1
> 
> 时间：2012-08-14T17:54:06.193
> 
> 标签：c++, uml, enterprise-architect

在Enterprise Architect（使用EA ver7.5）中，类图显示了文本在框外运行的类？

我怎样才能防止这种情况发生？其他需要注意的：这发生在文件->打印预览和打印时。否则解决就ok了。

![在此处输入图像描述](../Images/e7230b9b6e8ccad156b46abe316bc88b.png)

第二张图片：
来自 RA ......我做了（Cntrl A）然后`Elements->Appearance->Autosize`。

也做过多个`Diagram->Layout Diagram`。

![在此处输入图像描述](../Images/8a6b90d3ea478fc3e3f7073b24d13d95.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:08:46.180

如果要调整单个框的大小，请参阅以下内容： [http ://www.sparxsystems.com/enterprise_architect_user_guide/modeling_fundamentals/resizeelements.html](http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_fundamentals/resizeelements.html)

如果要自动调整图表中所有元素的大小，请使用以下说明： [http ://www.sparxsystems.com/enterprise_architect_user_guide/modeling_fundamentals/autosizeelements.html](http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_fundamentals/autosizeelements.html)

# haskell - Haskell：如何解决可能的版本冲突？

> ID：11957974
> 
> 赞同：2
> 
> 时间：2012-08-14T17:54:21.250
> 
> 标签：haskell

我可能在依赖问题上遇到了一些麻烦，但并不完全确定。这是我的问题。我正在使用 Data.Bson 库，并将一些 (Text, Text) 元组转换为 bson 字段，当我定义这个函数时：

```
typeMismatch :: (Text, Text) -> Field
typeMismatch tp = (fst tp) := (String (snd tp)) 
```

它抱怨：

```
Couldn't match expected type `Label' with actual type `Text'
Expected type: (Label, b0)
  Actual type: (Text, Text) 
```

`Field`基本上只是 Bson 中的一个键/值，键是 a `Label`，定义为 的同义词`Text`，值是`Value`，`String`是其众多构造函数之一（即，这不是`Prelude.String`）。现在我尝试将第一个文本更改为标签：

```
typeMismatch :: (Label, Text) -> Field
typeMismatch tp = (fst tp) := (String (snd tp)) 
```

所以标签匹配，虽然这不是我想要的，我只是为了调查，但它仍然抱怨：

```
Couldn't match expected type `text-0.11.2.0:Data.Text.Internal.Text'
            with actual type `Text'
Expected type: (Label, text-0.11.2.0:Data.Text.Internal.Text)
  Actual type: (Label, Text) 
```

看起来我有一些依赖问题或模块导入问题。但是我检查了我的库，似乎 bson 使用 text-0.11.2.0 而 data.text 也只是 text-0.11.2.0，所以一切都应该是一致的。

我该如何解决这个问题？提前致谢。

编辑：解决了。通过添加“-v”标志在编译时检查依赖关系。出于某种原因，还有 text-0.11.2.2 潜伏在那里。ghc-pkg 取消注册该包并编译。从现在开始，我需要开始学习如何避免“haskell 依赖地狱”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:02:11.110

在大多数情况下，您可以通过在文件`cabal-dev`中指定包版本来避免依赖地狱。`.cabal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:31:21.293

[https://github.com/Paczesiowa/hsenv](https://github.com/Paczesiowa/hsenv) is another option too. I find it to be a little more transparent than `cabal-dev`, and if you've used either rvm or virtualenv, you already know how to use make it work.

# javascript - 如何修复 JSlint 报告的“foo is not defined”错误？

> ID：11957977
> 
> 赞同：55
> 
> 时间：2012-08-14T17:54:27.047
> 
> 标签：javascript, jslint

> **可能重复：**
> [JSLint：在定义之前使用](https://stackoverflow.com/questions/9621162/jslint-was-used-before-it-was-defined)

我运行`JSlint`并看到这样的错误：

```
'foo' 未定义。
变量 x = foo();
```

`foo`是在另一个`JavaScript`文件中定义的函数`foo.js`。据我了解，没有“import / require”指令`JavaScript`来引用`foo`另一个源文件中定义的函数。

如何修复由 报告的此错误`JSlint`？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-14T17:56:03.640

使用 global 指令告诉 JSLint`foo`假设存在。

```
/*global foo */ 
```

[http://www.jslint.com/help.html#global](http://www.jslint.com/help.html#global)

# java - Java ByteArrayOutputStream 内存泄漏

> ID：11957981
> 
> 赞同：1
> 
> 时间：2012-08-14T17:54:42.193
> 
> 标签：java, memory, memory-leaks, javax.imageio, bytearrayoutputstream

我提出了一个新问题，因为这与我上一个帖子不同。我现在知道更确切的问题是什么。

我创建了一个新的 bytearrayoutputstream

```
ByteArrayOutputStream byteArray = new ByteArrayOutputStream(); 
```

没什么特别的。然后，当我向它写入图像时，这样

```
ImageIO.write(image, "gif", byteArray); 
```

内存首先增加了 100 mb，不是在日食中，而是在“现实”中。然后，每次我将新图像写入该流或另一个时，它都会慢慢增加！

一段时间后它停止工作并且有点崩溃。

我已经尝试关闭它以及所有这些，刷新，重置，一切，但它仍然泄漏内存。当我停止使用 byteArray 或将其设为空时，我希望它远离内存。

```
System.gc(); 
```

在这种情况下无济于事。

请帮助我以及您需要知道的任何其他内容，我会回答并请回复并回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:58:32.807

你的使用模式应该是这样的：

```
while( keepRunning) {
     ByteArrayOutputStream byteArray = new ByteArrayOutputStream();   
     ImageIO.write(image, "gif", byteArray);
} 
```

如果你这样做的速度快于 JVM 收集垃圾的速度，你最终会得到一个很长的 GC 暂停或 OutOfMemory 异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:09:12.213

你有没有试过这个：

```
 try{
  ByteArrayOutputStream baos = new ByteArrayOutputStream();
  ImageIO.write(image, "png", baos);
  baos.flush();
  byte[] imageBytes = baos.toByteArray();
  baos.close();
}catch(Exception ex){
  System.out.println(ex.getMessage());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:41:21.810

请参考[我发布到另一个 ByteArrayOutputStream question 的类似答案](https://stackoverflow.com/a/13607298/203860)。

ByteArrayOutputStream 中没有允许您缩小缓冲区的方法。重置更改*缓冲区中的位置*。

你的解决方案是

1.  使用前使用构造函数指定缓冲区的大小。当您将大对象写入流时，这将节省大量内存并防止 OOM 异常。
2.  如果您想重用您的 BAOS 对象，请调用 reset。这将使下一次写入从缓冲区的开头开始。
3.  释放内存的唯一方法是删除对它的所有引用。在上面的代码中，你会说 byteArray=null;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:43:37.940

你在做什么没有任何意义。您正在从内存中取出图像并再次将其放入内存，这次是作为字节数组。

您应该将该图像放入文件中或通过网络发送。或者，如果您只想保留一份副本，请复制图像（不是字节数组！），就像我在这里描述的那样：[使用 Object.clone() 中的错误](https://stackoverflow.com/questions/9737182/bug-in-using-object-clone/12988354)

# android - 任何不支持 C++ 异常的常见移动设备

> ID：11957985
> 
> 赞同：2
> 
> 时间：2012-08-14T17:54:50.790
> 
> 标签：android, c++, smartphone

以前 Android 的 NDK 不支持 C++ 中的异常，但现在看来。是否有其他不支持例外的常见/流行移动（智能手机/平板电脑）设备？我想构建一个跨平台的 C++ 框架并且需要知道这会起作用。

# asp.net - ASP.net 同源策略标头不起作用

> ID：11957989
> 
> 赞同：4
> 
> 时间：2012-08-14T17:55:16.363
> 
> 标签：asp.net, iis-7, cross-domain, iis-7.5, same-origin-policy

我收到错误：

```
XMLHttpRequest cannot load http://www.scirra.com/handlers/arcadeProcessScore.ashx. Origin http://static1.scirra.net is not allowed by Access-Control-Allow-Origin. 
```

在`arcadeProcessScore.ashx`我有以下几行：

```
public void ProcessRequest (HttpContext context) {

    context.Response.AppendHeader("Access-Control-Allow-Origin", "http://static1.scirra.net");
    context.Response.AppendHeader("Access-Control-Allow-Origin", "https://static1.scirra.net");
    context.Response.ContentType = "text/plain"; 
```

然而错误仍然存​​在。

我也简单地尝试过：

```
context.Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

这也不起作用。

如果我`<add name="Access-Control-Allow-Origin" value="*"/>`在`web.config`级别添加它可以工作，但显然不是解决方案。

我怎样才能让`arcadeProcessScore.ashx`接受来自的请求`static1.scirra.net`？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T10:24:39.607

我自己做了一些测试，直接使用 an`XmlHttpRequest`来访问我项目中的处理程序。我使用的设置是在我的本地 IIS（版本 6.1，因此与 7.5 的行为可能存在差异）上发布应用程序，并让`Default.aspx`页面调用我在 Visual Studio 的开发服务器中运行的处理程序。像这样：

```
http://mymachine/WebTest/Default.aspx

-> XmlHttpRequest get request to

http://localhost:58025/WebTest/TestHandler.ashx 
```

处理程序中的代码：

```
public void ProcessRequest (HttpContext context) {
    context.Response.AppendHeader("Access-Control-Allow-Origin", "http://mymachine");
    context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    context.Response.ContentType = "text/plain";
    context.Response.Write("Hello World " + DateTime.Now.ToString());
} 
```

使用 IE9，无论我是否`Access-Control-Allow-Origin`从处理程序发回标头，行为都是相同的。IE9 发出警告，要求用户确认是否应该加载内容。

Chrome（版本 21.0.1180.79 m）和 FF（版本 14.0.1）实际上都会向处理程序生成请求，并尊重处理程序发回的标头。

所以这适用于 Chrome 和 FF：

```
context.Response.AppendHeader("Access-Control-Allow-Origin", "http://mymachine"); 
```

这样做了：

```
context.Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

但是，如果我尝试在同一个响应中添加几个不同的允许来源，我无法让它们中的任何一个显示内容。对我来说，这些都不起作用：

1.  添加几个响应头

    ```
    context.Response.AppendHeader("Access-Control-Allow-Origin", "http://mymachine");
    context.Response.AppendHeader("Access-Control-Allow-Origin", "http://someothermachine"); 
    ```

2.  添加一个标题，两个来源逗号分隔

    ```
    context.Response.AppendHeader("Access-Control-Allow-Origin", "http://mymachine, http://someothermachine"); 
    ```

3.  添加一个标题，两个来源空间分隔

    ```
    context.Response.AppendHeader("Access-Control-Allow-Origin", "http://mymachine http://someothermachine"); 
    ```

4.  添加一个标题，两个来源空间分隔

    ```
    context.Response.AppendHeader("Access-Control-Allow-Origin", "http://mymachine; http://someothermachine"); 
    ```

为了让它发挥作用，我所做的是遵循[这个答案](https://stackoverflow.com/questions/1653308/access-control-allow-origin-multiple-origin-domains/1850482#1850482)中给出的建议。我的处理程序看起来像这样：

```
public void ProcessRequest(HttpContext context)
{
    string[] allowedOrigins = new string[] { "http://mymachine", "http://someothermachine" };
    string origin = context.Request.Headers.Get("Origin");
    if (allowedOrigins.Contains(origin))
        context.Response.AppendHeader("Access-Control-Allow-Origin", origin);
    context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    context.Response.ContentType = "text/plain";
    context.Response.Write("Hello World " + DateTime.Now.ToString());
} 
```

这样，Chrome 和 FF 都接受来自两个来源的处理程序的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T10:29:34.843

您的代码的问题是*跨源响应标头***与**实际请求一起发送到浏览器，而在发出实际请求**之前**它必须存在！

[W3 建议](http://www.w3.org/TR/cors/#resource-preflight-requests)**用户代理**在提交实际的跨域 HTTP 请求之前实现**预检请求，这意味着要么对包含实际请求的页面的响应，要么对称为****预检请求**的简单请求的响应（在实际请求）在发出实际请求时必须包含*跨域*响应标头。

*从*预检请求返回的**跨域*标头存储在*预检结果缓存*中。当发出跨域 HTTP 请求时，用户代理会检查*预检结果缓存*`Access-Control-Allow-Origin`中的标头，如果不存在则抛出异常说明：*

 **> 无法加载*地址*，Access-Control-Allow-Origin 不允许原始*地址。*

当你将`Access-Control-Allow-Origin`header 放入 中时`web.config`，服务器返回的任何响应都包含`Access-Control-Allow-Origin`header，浏览器**将**提交实际的跨域请求。

您最好的选择是在调用实际的跨域请求之前进行简单的 ajax 调用（预检请求），并发送该预检请求所需的任何响应标头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:17:41.273

您能否将您的 web.config 项目包装在一个位置标签中，以便它只在您的 ashx 位置运行，而不在其他任何地方运行 - 这会减轻“显然不是答案”的问题吗？

```
<location path="~/path/to/handler/arcadeProcessScore.ashx">
<httpProtocol>
   <customHeaders>
      <clear />
      <add name="Access-Control-Allow-Origin" value="http://static1.scirra.net" />
   </customHeaders>
</httpProtocol>
</location> 
```**

# driver - 如何安装和运行驱动程序

> ID：11957992
> 
> 赞同：3
> 
> 时间：2012-08-14T17:55:19.830
> 
> 标签：driver, wdk, inf, minifilter

我编写了一个简单的驱动程序，它只将“Hello World”打印到调试中。我使用带有 WDK 8 的 Visual Studio 2012 RC 来创建一个空的驱动程序项目并编写了以下代码：

```
#include <NTDDK.h>

extern "C" NTSTATUS DriverEntry(IN PDRIVER_OBJECT pDriverObject, IN PUNICODE_STRING pRegistryPath) 
{
    pRegistryPath = pRegistryPath; //unused
    DbgPrint("Hello World!");
    pDriverObject->DriverUnload = NULL;
    return STATUS_SUCCESS;
} 
```

我已经将它编译为win7 x64。我已经读过，为了安装和运行这个驱动程序，我需要编写一个 .inf 文件，但我似乎无法做到这一点。我从 WDK 8 中获取了一个示例 .inf 文件并将其更改为与我的 .sys 文件匹配，但它破坏了我的虚拟机 win7 x64 :-)。因此，我在 VS2012 中创建了一个过滤器驱动程序项目，获取了 .inf 文件并将其更改为匹配我的 .sys 文件，当我安装它时没有发生任何事情。我试图运行它创建的新服务

```
net start MyDriver 
```

但调试时没有打印任何内容，而且我在计算机->管理->服务中也看不到 MyDriver。我正在使用 DebugView 查看打印到调试的内容 (http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)。

当然，我想及时编写一个驱动程序来实际执行某些操作，但同时我只想知道如何运行它。

我从 VS2012 获取并更改的 .inf 文件是这样的：

```
;;;
;;; MyDriver2
;;;

[Version]
Signature   = "$Windows NT$"
; TODO - Change the Class and ClassGuid to match the Load Order Group value, see http://msdn.microsoft.com/en-us/windows/hardware/gg462963
; Class       = "ActivityMonitor"                         ;This is determined by the work this filter driver does
; ClassGuid   = {b86dff51-a31e-4bac-b3cf-e8cfe75c9fc2}    ;This value is determined by the Load Order Group value
Class = "ActivityMonitor" 
ClassGuid = {b86dff51-a31e-4bac-b3cf-e8cfe75c9fc2}
Provider    = %ManufacturerName%
DriverVer   = 08/13/2012,1.0.0.0
;CatalogFile = MyDriver2.cat

[DestinationDirs]
DefaultDestDir          = 12
MiniFilter.DriverFiles  = 12            ;%windir%\system32\drivers

;;
;; Default install sections
;;

[DefaultInstall]
OptionDesc          = %ServiceDescription%
CopyFiles           = MiniFilter.DriverFiles

[DefaultInstall.Services]
AddService          = %ServiceName%,,MiniFilter.Service

;;
;; Default uninstall sections
;;

[DefaultUninstall]
DelFiles   = MiniFilter.DriverFiles

[DefaultUninstall.Services]
DelService = %ServiceName%,0x200      ;Ensure service is stopped before deleting

;
; Services Section
;

[MiniFilter.Service]
DisplayName      = %ServiceName%
Description      = %ServiceDescription%
ServiceBinary    = %12%\%DriverName%.sys        ;%windir%\system32\drivers\
Dependencies     = "FltMgr"
ServiceType      = 2                            ;SERVICE_FILE_SYSTEM_DRIVER
StartType        = 3                            ;SERVICE_DEMAND_START
ErrorControl     = 1                            ;SERVICE_ERROR_NORMAL
; TODO - Change the Load Order Group value, see http://connect.microsoft.com/site221/content/content.aspx?ContentID=2512
; LoadOrderGroup = "FSFilter Activity Monitor"
LoadOrderGroup   = "filter"
AddReg           = MiniFilter.AddRegistry

;
; Registry Modifications
;

[MiniFilter.AddRegistry]
HKR,,"DebugFlags",0x00010001 ,0x0
HKR,,"SupportedFeatures",0x00010001,0x3
HKR,"Instances","DefaultInstance",0x00000000,%DefaultInstance%
HKR,"Instances\"%Instance1.Name%,"Altitude",0x00000000,%Instance1.Altitude%
HKR,"Instances\"%Instance1.Name%,"Flags",0x00010001,%Instance1.Flags%

;
; Copy Files
;

[MiniFilter.DriverFiles]
%DriverName%.sys

[SourceDisksFiles]
MyDriver2.sys = 1,,

[SourceDisksNames]
1 = %DiskId1%,,,

;;
;; String Section
;;

[Strings]
; TODO - Add your manufacturer
ManufacturerName        = "Template"
ServiceDescription      = "MyDriver2 Mini-Filter Driver"
ServiceName             = "MyDriver2"
DriverName              = "MyDriver2"
DiskId1                 = "MyDriver2 Device Installation Disk"

;Instances specific information.
DefaultInstance         = "MyDriver2 Instance"
Instance1.Name          = "MyDriver2 Instance"
; TODO - Change the altitude value, see http://connect.microsoft.com/site221/content/content.aspx?ContentID=2512
;Instance1.Altitude      = "370030"
Instance.Altitude       = "370030"
Instance1.Flags         = 0x0              ; Allow all attachments 
```

当我尝试使用 wdreg.exe 安装和运行我的驱动程序时，它显示“无法在 INF 文件中定位制造商部分”。（来自[http://www.jungo.com/st/support/documentation/windriver/10.3.0/wdpci_manual.mhtml/dyn_windows.html](http://www.jungo.com/st/support/documentation/windriver/10.3.0/wdpci_manual.mhtml/dyn_windows.html)）我读了很多关于 .inf 文件的内容（来自一些微软的书和很多谷歌) 我仍然不知道如何修复我的 .inf 文件。

如果有更简单的方法来运行我的驱动程序，我很想听听。一旦我知道如何运行它，调试真正的产品就很容易了。

谢谢！

编辑：我还在测试模式（http://www.ngohq.com/home.php?page=dseo）下使用驱动程序签名强制覆盖器来烧写 .sys 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T11:36:57.653

事实证明，罗汉是对的。我无法找到在win7中查看调试打印的方法（Rohan链接用于vista），所以我只是创建了一个文件。

```
#include <wdm.h>
#include <Ntstrsafe.h>

extern "C" NTSTATUS DriverEntry(IN PDRIVER_OBJECT pDriverObject, IN PUNICODE_STRING pRegistryPath) 
{
    UNICODE_STRING     uniName;
    OBJECT_ATTRIBUTES  objAttr;

    RtlInitUnicodeString(&uniName, L"\\SystemRoot\\example12345.txt");
    InitializeObjectAttributes(&objAttr, &uniName,
                               OBJ_CASE_INSENSITIVE | OBJ_KERNEL_HANDLE,
                               NULL, NULL);

    HANDLE   handle;
    NTSTATUS ntstatus;
    IO_STATUS_BLOCK    ioStatusBlock;

    // Do not try to perform any file operations at higher IRQL levels.
    // Instead, you may use a work item or a system worker thread to perform file operations.

    if(KeGetCurrentIrql() != PASSIVE_LEVEL){
        return STATUS_INVALID_DEVICE_STATE; 
    }

    ntstatus = ZwCreateFile(&handle,
                            GENERIC_WRITE,
                            &objAttr, &ioStatusBlock, NULL,
                            FILE_ATTRIBUTE_NORMAL,
                            0,
                            FILE_OVERWRITE_IF, 
                            FILE_SYNCHRONOUS_IO_NONALERT,
                            NULL, 0);

    CHAR     buffer[30];
    size_t  cb;

    if(NT_SUCCESS(ntstatus)) {
        ntstatus = RtlStringCbPrintfA(buffer, sizeof(buffer), "This is a test\r\n");
        if(NT_SUCCESS(ntstatus)) {
            ntstatus = RtlStringCbLengthA(buffer, sizeof(buffer), &cb);
            if(NT_SUCCESS(ntstatus)) {
                ntstatus = ZwWriteFile(handle, NULL, NULL, NULL, &ioStatusBlock, buffer, (ULONG)cb, NULL, NULL);
            }
        }
        ZwClose(handle);
    }

    pRegistryPath = pRegistryPath;
    pDriverObject = pDriverObject;

    return STATUS_SUCCESS;
} 
```

我使用了我在问题中写的相同的 .inf，然后输入了 cmd

```
net start MyDriver2 
```

并且文件 example12345.txt 是在 C:/Windows 中创建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T07:21:06.813

当您加载/启动驱动程序时，它已在内核中加载并运行，因此很可能您的驱动程序已加载。但是`DbgPrint`您可能看不到的消息是因为在 Vista 发布后，记录的调试消息`DbgPrint`被过滤并且未显示在输出中。

你可以参考这个来启用显示`DbgPrint`消息。[让 DbgPrint 输出出现在 Vista 及更高版本中](http://www.osronline.com/article.cfm?article=295)

另一种方法是使用`DbgPrintEx`适当的组件和级别。