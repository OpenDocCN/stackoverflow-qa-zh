# StackOverflow 问答 11204000-11204999

# python - OSX 上没有名为 _imagingcms 的模块

> ID：11204002
> 
> 赞同：1
> 
> 时间：2012-06-26T09:05:28.947
> 
> 标签：python, django, python-imaging-library, importerror

今天我尝试在我的 macbook 上测试一个 django 项目，但是每当我尝试启动它时，我都会收到相同的错误：“错误：没有名为 _imagingcms 的模块”。

似乎 PIL 缺少某些东西。我试图重新安装 PIL，但它没有帮助。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:35:54.573

哦，从 macports 安装 lcms 并重新安装 PIL 有帮助。

# c# - 使用 LdapConnection 连接到 OpenLDAP 时出错

> ID：11204003
> 
> 赞同：5
> 
> 时间：2012-06-26T09:05:33.010
> 
> 标签：c#, .net, active-directory, openldap, ldapconnection

```
 using (LdapConnection ldap = new LdapConnection("localhost:389"))
        {
            //ldap.AuthType = AuthType.Basic;
            ldap.Bind(new NetworkCredential("cn=manager,dc=wave,dc=com", "secret"));
        } 
```

我尝试使用身份验证类型以及身份验证类型作为基本类型。但它给出了一个错误，“可分辨名称包含无效的语法”

还有一件事，我不能使用 System.DirectoryServices，因为它只适用于 Active Directory，这就是我使用 System.DirectoryServices.Protocol 的原因。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T14:34:08.110

这篇[MSDN 博客文章](http://blogs.msdn.com/b/jimmiet/archive/2010/10/03/10070812.aspx)可能会对您的问题有所帮助。尝试这个：

```
 using (LdapConnection ldap = new LdapConnection("localhost:389"))
    {
        ldap.AuthType = AuthType.Basic;
        ldap.SessionOptions.ProtocolVersion = 3;
        ldap.Bind(new NetworkCredential("cn=manager,dc=wave,dc=com", "secret"));
    } 
```

# iphone - 在标签栏控制器之前显示视图控制器

> ID：11204004
> 
> 赞同：0
> 
> 时间：2012-06-26T09:05:34.993
> 
> 标签：iphone, ios5, xcode4, storyboard

我正在开始我的第一个 iphone 应用程序。我正在使用 xcode 4.3.3、IOS 5 和 storyboard 的原理。

应用程序的主屏幕是一个标签栏控制器，如果用户没有登录，我想在主屏幕之前显示一个登录信息。

我找不到解决方案：如果我必须使用带有函数 didFinishLaunchingWithOptions() 的文件 AppDelegate.m 或带有函数 viewDidAppear() 或其他东西的控制器文件。

如果有人会帮助我解决问题

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:52:06.687

您可以使用另一个带有登录屏幕的视图并在 nsuserdeafault 中保存 Bool 值，然后当应用程序启动时检查 nsuserdefault 并据此显示视图。

然后在你可以调用任何你想要在delegate.m 或viewwillappear 中的地方之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:45:43.823

尝试使用模态视图控制器，[文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentModalViewController%3aanimated%3a)

在`didFinishLaunchingWithOptions()`或`viewWillAppear()`尝试做这样的事情：

```
YourViewController *viewController = [[YourViewController alloc] initWithNibName:@"YourViewController" bundle:nil];

viewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
viewController.modalPresentationStyle = UIModalPresentationFormSheet;

//Present as Model view controller  
["presentedViewController" presentModalViewController:viewController animated:YES];

//release it After presenting to it
[viewController release]; 
```

然后删除它调用：（`dismissModalViewControllerAnimated:` [文档）](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/dismissModalViewControllerAnimated%3a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:24:09.897

只需在您的应用程序启动时创建登录屏幕，当您的登录成功时，从那里推送您的标签栏控制器......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:28:42.423

最好在 AppDelegate.m 中添加功能以删除未登录时出现的不需要的窗口（如果您在 ViewDidAppear 方法中编写代码，您的主页视图将在重定向到登录页面之前显示片刻）。

另一种方法是添加一个新的视图控制器，并根据视图控制器的 ViewDidAppear 方法的登录状态检查重定向的位置。

# eclipse - 在运行 JSP 页面时获取 HTTP 400 错误作为错误请求

> ID：11204007
> 
> 赞同：0
> 
> 时间：2012-06-26T09:05:50.927
> 
> 标签：eclipse, tomcat, configuration

我的环境变量：

```
CATALINA_HOME -> C:\Program Files\apache-tomcat-6.0.35
JAVA_HOME -> C:\Program Files\Java\jdk1.7.0_03\bin
CLASSPATH -> .;C:\Program Files\Java\jdk1.7.0_03\bin;C:\Program Files\CVSNT\; 
```

我能够从浏览器（firefox）运行 localhost:8080，无法从 eclipse 运行相同的。显示“找不到网页.... HTTP 400”

```
Moreover In my eclipse, catalina.home and catalina.base are use same i.e. "Servers/Tomcat v6.0 Server at localhost.server" and "Use Tomcat Installation". 
```

当我尝试在 Eclipse localhost(http://localhost:8080/MyProject/JSP/abc.jsp) 中运行我的项目时，它仍然显示错误 400，而在 Firefox 中它只显示一个空白页，但我的代码是正确的。

请告诉我哪里出错了......

# c++ - 类方法与构建器

> ID：11204009
> 
> 赞同：1
> 
> 时间：2012-06-26T09:05:56.613
> 
> 标签：c++

我有内部对象，客户端代码不应该使用它：

```
class InternalA {};
class InternalB {}; 
```

我有公共接口对象A，B，C。在内部，我需要从A构造objetcs InternalA，从B构造InternalB，但是A和B只能通过指向基类C的指针来访问。我可以使用协变虚方法但是做所以，我的 Internals 变得公开，InternalA 和 InternalB 并不是同一个基类的两个子类型。或者我可以做这样的事情：

```
class C {
    // some data
public:
    C() {};
    // some pure virtual methods and virtual methods
virtual C *getConcrete(void) const =0;

};

class B : C {
public:
    //methods
    virtual B *getConcrete(void) { return static_cast<B>(this); };
};

class A : C {
public:
    //methods
    virtual A *getConcrete(void) { return static_cast<A>(this); };
}; 
```

然后在 A 或 B 参数中使用具有多态方法的内部构建器。

编辑：要构建 InternalA 和 InternalB，我可以使用这样的函数/方法：

```
void somefunction(A *a) {
    InternalA x(<using a->smthg>);
    // do stuffs
};
void somefunction(B *b) {
    InternalB x(using b->smthg>);
   //do stuffs 
```

};

你怎么看这个黑客？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:34:59.250

我认为仅使用`class C`. 要构建`InternalA`或者`InternalB`您需要有关 A 或 B 的知识。在构建器定义中，必须定义 A 或 B。所以我认为你应该使用`dynamic_cast`. `dynamic_cast`或者如果被禁止，则由虚函数实现的某种类型 id 。

```
#include "A.h"

......

InternalA* buildInternalA(const C* c) {
    const A* a = dynamic_cast<const A*>(c);
    if (a)
        return new InternalA(a);
    return 0;
} 
```

但是在你使用builder的地方（在其他cpp文件中），你不需要定义A和B，只需要声明builder：

```
class InternalA;
class C;
InternalA* buildInternalA(const C* c); 
```

# macos - 如何在不关闭其窗口的情况下关闭文档？

> ID：11204018
> 
> 赞同：2
> 
> 时间：2012-06-26T09:07:06.233
> 
> 标签：macos, cocoa

我创建了一个基于 Mac 文档的项目。在窗口中加载文件后，我想通过单击“关闭”菜单项来清除内容，而不是关闭窗口。然后我可以在同一个窗口中加载其他文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T14:13:40.290

你不是很具体，所以很难给出具体的建议。

一般来说，如果我这样做，我会将`MainMenu.xib`文件中的“关闭”和“打开”菜单项重定向到我自己的自定义`IBAction`方法。然后，这些自定义方法将更改任何数据并在窗口及其视图上进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:40:01.870

对于期望*Close*关闭窗口的用户（可能询问他们是否要先保存内容），您尝试做的事情是违反直觉的。

我认为您只需要某种*清除*操作（菜单项、工具栏按钮和键绑定），这会使该功能更加明显，并使您的应用程序符合 Apple 的[人机界面指南](https://developer.apple.com/library/mac/#documentation/userexperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)。

# jquery - 通过 jquery 选择文本区域的内容是有效的，但是

> ID：11204021
> 
> 赞同：-2
> 
> 时间：2012-06-26T09:07:37.200
> 
> 标签：jquery, firefox, select

在一个对话框中，我希望一个文本区域在触发对话框时接受一些文本，并显示它被选中（突出显示），以便用户可以轻松地复制和粘贴它。为此，我输入内容，调用 select() 并绑定点击处理程序，如下所示：http: [//jsfiddle.net/4CK7Y/2/](http://jsfiddle.net/4CK7Y/2/)

现在这在所有浏览器中都可以正常工作，但有一个例外：在 Firefox 中，这仅适用于重新加载。在 Fiddler 中尝试“运行”时，文本不会在加载时突出显示，而只会在单击时突出显示。

Firefox 中这种行为的原因是什么？我能做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:20:20.897

当您单击`Run`焦点转到运行按钮时，从而取消您的选择。`Ctrl`尝试使用+`Return`快捷方式重新加载小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:12:00.230

要在 fiddler 中单击`Run`按钮时运行它，您需要将代码封装在`$(document).ready()`函数中。只需以这种方式更改代码：

```
$(document).ready(function(){
    $('#payload').val("some text");
    $('#payload').select();
    $('#payload').click(function(){this.select();});
}); 
```

在这里查看[更新的小提琴](http://jsfiddle.net/4CK7Y/4/)。

# instagram - 无需用户登录即可从 instagram 访问用户信息

> ID：11204023
> 
> 赞同：1
> 
> 时间：2012-06-26T09:07:38.373
> 
> 标签：instagram, user-data

我正在开发一个使用 instagram API 的 iphone 应用程序..我想知道以下事情..是否可以在没有用户登录的情况下从 instagram 获取数据？如果是这样，将从中检索什么类型的数据？是可以访问指定用户的数据吗？还是只能使用 facebook、tumblr 等社交网站？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:10:41.053

是的，使用有效的**客户端 ID**，您可以获取特定用户 ID 的用户信息。可用信息包括姓名、简历、网站和个人资料图片。您还可以使用搜索端点返回多个用户的数据。

查看此处记录的用户端点：http: [//instagr.am/developer/endpoints/users/](http://instagr.am/developer/endpoints/users/)

我还建议阅读**您需要进行身份验证吗？**这里的部分：http: [//instagr.am/developer/authentication/](http://instagr.am/developer/authentication/)

**注意**：通过提供客户端 ID 而不是有效的用户令牌，您将计入您自己的应用程序每小时 5000 次调用的限制。如果您计划拥有一个大型用户页面，则需要对每个用户进行身份验证以避免此限制。

# dll - 无法调试 dll

> ID：11204027
> 
> 赞同：0
> 
> 时间：2012-06-26T09:07:52.123
> 
> 标签：dll

我的主要项目是一个 MFC 应用程序和另一个输出 DLL 的项目。主项目正在使用这个 DLL。

代码运行得很好，但是，当我在 DLL 代码中设置一个断点时，当我运行代码时，代码不会在这个断点处停止。

我需要在项目中进行哪些更改？

非常感谢您的帮助。

此致

钦坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:35:26.120

这里的基本疑难解答是 Debug + Windows + Modules 窗口。首先确保您在模块列表中看到 DLL。如果你不这样做，那么主 EXE 不知何故没有加载 DLL，断点将永远无法工作。接下来，注意 DLL 的路径，并确保它是您刚刚构建的路径，而不是旧副本。接下来，右键单击 DLL，然后单击“符号加载信息”。它向您显示它在哪里寻找 PDB，调试器需要它来确定在代码中设置断点的确切位置。确保它与项目刚刚创建的 PDB 匹配。

# c# - 如果我设置了断点，我的 javascript 只会调用我的 web 服务。你知道为什么吗？

> ID：11204028
> 
> 赞同：1
> 
> 时间：2012-06-26T09:07:53.087
> 
> 标签：c#, javascript, json

你能解释一下为什么我的 javascript 代码只在我在 ].getJSON 线上设置一个喙点时才调用我的 web 服务，但如果我删除断点则不会？

```
$(function () {
            $("#" + @Model.BidObjectId).submit(function () {
                 alert("Test");
                 $.getJSON("http://localhost:11523/Service1.svc/GetBidObject?id=@Model.BidObjectId", function (data) {
                    alert(data)
                });
            });
        }); 
```

始终显示测试警报，但我的 svc 文件中的断点从未到达，除非我在 chrome 中的 ].getJSON 行上放置了一个 javascript 断点。

这是我的网络服务中的代码

```
public List<BidObject> GetBidObject(string id)
        {
            List<BidObject> list = new List<BidObject>();
            list.Add(new BidObject() { BidObjectId = 1, Title = "Name" + id, Date = DateTime.Now });
            return list;
        }

[OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetBidObject?id={id}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        List<BidObject> GetBidObject(string id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:20:04.063

也许这有助于 [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:23:22.517

我修好了它

我刚刚在 javascript 中添加了一个 return false 。但为什么我不知道。

```
$(function () {
            $("#" + @Model.BidObjectId).submit(function () {
                 alert("Test");
                 $.getJSON("http://localhost:11523/Service1.svc/GetBidObject?id=@Model.BidObjectId", function (data) {
                    alert(data)
                });
                return false; // Prevent browser to submit
            });

        }); 
```

# ms-word - 通过 OpenXML 在 Word 2007 中创建两个项目符号列表

> ID：11204030
> 
> 赞同：1
> 
> 时间：2012-06-26T09:08:00.567
> 
> 标签：ms-word, openxml, wordprocessingml

我想输出两个项目符号列表，如图所示：

![在此处输入图像描述](../Images/89f030de4bccb5d017483bd480540c31.png)

但我得到的是两个列表都有第二个（黑色圆圈）皮肤。

我的代码：

```
private static void AddNumberingDefinition(WordprocessingDocument docx)
        {
            NumberingDefinitionsPart numberingPart =
  docx.MainDocumentPart.AddNewPart<NumberingDefinitionsPart>();

            Numbering element =
              new Numbering(
                //     new Nsid(){ Val="FFFFFF80"},
                new AbstractNum(new Nsid() { Val = "FFFFFF80" },
                    new MultiLevelType() { Val = MultiLevelValues.HybridMultilevel },
                new TemplateCode() { Val = "4970B4E6" },
                  new Level(
                    new NumberingFormat() { Val = NumberFormatValues.Bullet },
                    new LevelText() { Val = "°" },//char.ConvertFromUtf32(61616) }
                    new LevelJustification() { Val = LevelJustificationValues.Left }//,
                //  new RunProperties() { RunFonts = new RunFonts() { Hint = FontTypeHintValues.Default, Ascii = "Symbol", 
//HighAnsi = "Symbol" } }
                  ) { LevelIndex = 0 }
                ) { AbstractNumberId = 0 },
                new NumberingInstance(
                  new AbstractNumId() { Val = 0 }
                ) { NumberID = 1 },

           // element.Save(numberingPart);

         //   element = new Numbering(
            new AbstractNum(new Nsid() { Val = "FFFFFF89" },
                new MultiLevelType() { Val = MultiLevelValues.HybridMultilevel },
                new TemplateCode() { Val = "4970B4E6" },
                  new Level(
                    new NumberingFormat() { Val = NumberFormatValues.Bullet },
                    new LevelText() { Val = "•" },//char.ConvertFromUtf32(61616) }
                    new LevelJustification() { Val = LevelJustificationValues.Left }//,
                //    new RunProperties() { RunFonts = new RunFonts() { Hint = FontTypeHintValues.Default, Ascii = "Symbol",
// HighAnsi = "Symbol" } }
                  ) { LevelIndex = 0 }
                ) { AbstractNumberId = 1 },
                new NumberingInstance(
                  new AbstractNumId() { Val = 1 }
                ) { NumberID = 2 });

            element.AddNamespaceDeclaration("ve", "http://schemas.openxmlformats.org/markup-compatibility/2006");
            element.AddNamespaceDeclaration("o", "urn:schemas-microsoft-com:office:office");
            element.AddNamespaceDeclaration("r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships");
            element.AddNamespaceDeclaration("m", "http://schemas.openxmlformats.org/officeDocument/2006/math");
            element.AddNamespaceDeclaration("v", "urn:schemas-microsoft-com:vml");
            element.AddNamespaceDeclaration("wp", "http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing");
            element.AddNamespaceDeclaration("w10", "urn:schemas-microsoft-com:office:word");
            element.AddNamespaceDeclaration("w", "http://schemas.openxmlformats.org/wordprocessingml/2006/main");
            element.AddNamespaceDeclaration("wne", "http://schemas.microsoft.com/office/word/2006/wordml");

            element.Save(numberingPart);
        }

        private static Paragraph GenerateParagraph()
        {
            return new Paragraph(
           new ParagraphProperties(
             new NumberingProperties(
               new NumberingLevelReference() { Val = 0 },
               new NumberingId() { Val = 1 })),
           new Run(
             new RunProperties(),
             new Text("Hello, Wordl!"))
             );
        }

        private static Paragraph GenerateParagraph2()
        {
            return new Paragraph(
           new ParagraphProperties(
             new NumberingProperties(
               new NumberingLevelReference() { Val = 0 },
               new NumberingId() { Val = 2 })),
           new Run(
             new RunProperties(),
             new Text("Hello, Wordl!"))
             );
        } 
```

我不知道，问题隐藏在哪里？我使用 Productivity Tool for Open XML 来比较我生成的文件和手动创建的文件，但我无法让它工作。提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:40:50.843

几个小时后，我发现插入 AbstractNum 和 NumberingInstance 对象的顺序很重要。

Open XML SDK 2.0 Productivity Tools 有一个 Validate 方法，它向我显示了验证错误。

工作代码：

```
 private static void AddNumberingDefinition(WordprocessingDocument docx)
        {
            NumberingDefinitionsPart numberingPart =
  docx.MainDocumentPart.AddNewPart<NumberingDefinitionsPart>();

            var a = new AbstractNum(new Nsid() { Val = "FFFFFF80" },
                  new MultiLevelType() { Val = MultiLevelValues.HybridMultilevel },
              new TemplateCode() { Val = "4970B4E6" },
                new Level(
                  new NumberingFormat() { Val = NumberFormatValues.Bullet },
                  new LevelText() { Val = "°" },
                  new LevelJustification() { Val = LevelJustificationValues.Left }
                ) { LevelIndex = 0 }
              ) { AbstractNumberId = 0 };

            var a1 = new NumberingInstance(
                 new AbstractNumId() { Val = 0 }
               ) { NumberID = 1 };

            var b = new AbstractNum(new Nsid() { Val = "FFFFFF89" },
                  new MultiLevelType() { Val = MultiLevelValues.HybridMultilevel },
                  new TemplateCode() { Val = "4970B4E6" },
                    new Level(
                      new NumberingFormat() { Val = NumberFormatValues.Bullet },
                      new LevelText() { Val = "•" },
                      new LevelJustification() { Val = LevelJustificationValues.Left }
                    ) { LevelIndex = 0 }
                  ) { AbstractNumberId = 1 };
            var b1 = new NumberingInstance(
                 new AbstractNumId() { Val = 1 }
               ) { NumberID = 2 };

            Numbering element = new Numbering();

            element.AddNamespaceDeclaration("ve", "http://schemas.openxmlformats.org/markup-compatibility/2006");
            element.AddNamespaceDeclaration("o", "urn:schemas-microsoft-com:office:office");
            element.AddNamespaceDeclaration("r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships");
            element.AddNamespaceDeclaration("m", "http://schemas.openxmlformats.org/officeDocument/2006/math");
            element.AddNamespaceDeclaration("v", "urn:schemas-microsoft-com:vml");
            element.AddNamespaceDeclaration("wp", "http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing");
            element.AddNamespaceDeclaration("w10", "urn:schemas-microsoft-com:office:word");
            element.AddNamespaceDeclaration("w", "http://schemas.openxmlformats.org/wordprocessingml/2006/main");
            element.AddNamespaceDeclaration("wne", "http://schemas.microsoft.com/office/word/2006/wordml");

            element.Append(a);
            element.Append(b);
            element.Append(a1);
            element.Append(b1);
            element.Save(numberingPart);
        } 
```

# mysql - 每当我尝试登录 mysql 时，访问被拒绝错误

> ID：11204033
> 
> 赞同：0
> 
> 时间：2012-06-26T09:08:12.123
> 
> 标签：mysql, phpmyadmin

我无法登录mysql。我尝试使用 phpmyadmin 和 cmd 行登录。但每次它给我以下错误。

**#1045 - 用户 'slaveuser'@'localhost' 的访问被拒绝（使用密码：是）**

请尽快为我提供任何解决方案/

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:42:50.800

您的问题与此问题相同**[Error#1045 Access Denied in PhpMyAdmin](https://stackoverflow.com/questions/5287147/error1045-access-denied-in-phpmyadmin)**
所以请检查它的答案..

# c# - 将字节数组转换为二维整数数组

> ID：11204038
> 
> 赞同：1
> 
> 时间：2012-06-26T09:08:21.583
> 
> 标签：c#

有人可以帮助编写一个将字节数组转换为二维 int 数组的方法吗？！

我写的是：

```
internal int[][] byteToInt(byte[] byteArray)
    {
        int width = (int)Math.Sqrt(byteArray.Length);
        int[][] tmp = new int[width][];
        for (int i = 0; i < width; i++)
        {
            tmp[i] = new int[width];
        }
        for (int i = 0; i < width; i++)
        {
            for (int j = 0; j < width; j++)
            {
                tmp[i][j]=(int)byteArray[(i*width+j)];
            }
        }
        return tmp;
    } 
```

但这不能正常工作....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:34:51.657

将 JPG 转换为字节数组的代码：

```
public byte[] FileToByteArray(string _FileName)
    {
        byte[] _Buffer = null;

        try
        {
            // Open file for reading
            System.IO.FileStream _FileStream = new System.IO.FileStream(_FileName, System.IO.FileMode.Open, System.IO.FileAccess.Read);

            // attach filestream to binary reader
            System.IO.BinaryReader _BinaryReader = new System.IO.BinaryReader(_FileStream);

            // get total byte length of the file
            long _TotalBytes = new System.IO.FileInfo(_FileName).Length;

            // read entire file into buffer
            _Buffer = _BinaryReader.ReadBytes((Int32)_TotalBytes);

            // close file reader
            _FileStream.Close();
            _FileStream.Dispose();
            _BinaryReader.Close();
        }
        catch (Exception _Exception)
        {
            // Error
            Console.WriteLine("Exception caught in process: {0}", _Exception.ToString());
        }

        return _Buffer;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:08:28.487

好的，我认为这会做你想要的。

如果我理解正确，您想拍摄图像并将其转换为 int RGB 值的二维数组。

```
internal int[,] JpgToInt(String fileName)
{
    Bitmap Bitmap = new Bitmap(fileName);

    int[,] ret = new int[Bitmap.Width,Bitmap.Height];

    for (int i = 0; i < Bitmap.Width; i++)
    {
        for (int j = 0; j < Bitmap.Height; j++)
        {
            ret[i, j] = Bitmap.GetPixel(i, j).ToArgb();
        }
    }
    return ret;
} 
```

虽然它没有回答主要问题，但它确实解决了问题，并且问题的解决方案没有。

在回答主要问题时，没有办法任意取一个字节数组并将其变成一个二维 int 数组，因为您不知道二维数组的维度是多少。

您用于从文件中获取图像的代码是获取 jpg 文件的原始二进制文件的正确方法，但它不会获取自身的图像。（请参阅维基百科[了解 jpeg 文件的格式](http://en.wikipedia.org/wiki/Jpeg)）

# java - 通过 javacode 编译 C 源代码

> ID：11204040
> 
> 赞同：3
> 
> 时间：2012-06-26T09:08:27.760
> 
> 标签：java, c, gcc, gnu

我正在尝试通过 javacode 编译 C 程序。我做了如下。

```
 Process process = Runtime.getRuntime().exec("C:/cygwin/bin/sh -c 'gcc HelloWorld.c -o HelloWorld.exe'");

    InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);
    String line, log;
    log ="\n..Input..\n";
    while ((line = br.readLine()) != null) {
      log+=line;
      log+="\n";
    }

    InputStream is2 = process.getErrorStream();
    InputStreamReader isr2 = new InputStreamReader(is2);
    BufferedReader br2 = new BufferedReader(isr2);
    String line2;
    log+="\n..Error..\n";
    while ((line2 = br2.readLine()) != null) {
      log+=line2;
      log+="\n";
    }
    System.out.println(log); 
```

未创建 HelloWorld.exe 并显示以下错误消息。/usr/bin/sh: gcc: 找不到命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:18:03.573

一个问题是`exec(String)`在空白字符处天真地将字符串拆分为参数。您需要为它进行拆分。写`exec`为：

```
Process process = Runtime.getRuntime().exec(new String[]{
     "C:/cygwin/bin/sh",
      "-c",
      "gcc HelloWorld.c -o HelloWorld.exe"}); 
```

该`exec(String)`方法不理解 shell 语法，例如引用和重定向。

可能还需要为`gcc`命令使用完整路径名，但我对此表示怀疑。shell 应该从 JVM 继承环境变量设置，这可能包括一个合适的`PATH`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:10:26.587

您可以获取当前运行时环境并调用 exec 方法。这是一个例子：

`String cmd="C:/cygwin/bin/sh -c '/usr/bin/gcc HelloWorld.c -o HelloWorld.exe'"; Process process = Runtime.getRuntime().exec(cmd);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:11:36.190

尝试

```
/usr/bin/gcc 
```

而不是

```
gcc 
```

比如说，在脚本中使用二进制调用的完整路径。

# c# - 检查 col [ 类型 datetime] 是否为 null 或小于另一个文字日期时间

> ID：11204042
> 
> 赞同：0
> 
> 时间：2012-06-26T09:08:41.937
> 
> 标签：c#, .net, entity-framework, .net-4.5, entity-framework-5

我有一个非常简单的查询：

变量“_dc”是实体框架代码优先数据上下文：

```
var maxLockTime = DateTime.UtcNow.AddMinutes(-1);
var record = _dc.DMPs
    .Where(x =>
        x.MappedId == null
        && x.Ignored == false
        && (x.ConcurrencyLockDate.Equals(null) || x.ConcurrencyLockDate < maxLockTime))
    .OrderBy(x => x.id).Skip(skip).Take(1).ToList()
    .Select(x => new
    {
        x.id,
        x.Ignored,
        x.MappedId,
        x.SourceData
    }).FirstOrDefault(); 
```

生成以下 SQL where 子句：-

```
WHERE ([Extent1].[MappedId] IS NULL) 
AND (0 = [Extent1].[Ignored]) 
AND ([Extent1].[ConcurrencyLockDate] < @p__linq__1) 
```

如您所见，对“ConcurrencyLockDate”的“null 或等于”检查不正确，因为它不包括为 NULL 的结果。我将 EF5 RC 与 .NET 4.5 RC 一起使用。

有谁知道我该怎么做？看起来很简单，所以我把头发扯掉了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:27:47.190

类型的列`DateTime`不能为空：`DateTime`是不可为空的类型。如果它可以为空，则类型应该是`DateTime?`.

# android - 仅在设备上的 Android 应用程序崩溃

> ID：11204043
> 
> 赞同：0
> 
> 时间：2012-06-26T09:08:44.697
> 
> 标签：android, crash

我的应用程序在 Android 模拟器上运行得非常好，但是当我在平板设备中安装 apk 文件并安装它然后运行它时，应用程序崩溃，并给出一条错误消息，指出**应用程序（process.my.package.name）已停止**.

LogCat 表示未定义 String 上的 isEmpty() （但在编译期间未显示错误）。

清单文件中的 minSdk 版本是 8，但我的应用程序是 4.0.3，我的应用程序在模拟器上运行得非常好。它仅在设备上崩溃。我完全不知道原因可能是什么，因为它在模拟器上运行良好。

任何建议/想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:22:28.990

使用 logcat 提取信息。

设备和模拟器之间的通常差异包括：

*   GPS定位
*   网络可用性和延迟
*   “扩展存储”的可用性（某些平板电脑只有内部存储器，没有扩展存储）

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:38:01.907

您应该尝试检查您在模拟器中所做的配置......特别是在清单文件中。HTH

# android - 未收到 C2DM 推送通知消息

> ID：11204044
> 
> 赞同：0
> 
> 时间：2012-06-26T09:08:51.360
> 
> 标签：android, android-c2dm, socketexception

我正在尝试实现 C2DM - vogellas 推送通知。尽管代码返回 200，但我没有收到任何消息设备/模拟器。Log cat 错误“请求时间失败：java.net.SocketException：协议不支持地址系列”。有什么要完成吗？

# asp.net - 如何在我的 Web 服务中为不同的会话设置不同的 HOST_ID()？

> ID：11204045
> 
> 赞同：0
> 
> 时间：2012-06-26T09:08:52.627
> 
> 标签：asp.net, sql-server, web-services, session

我有一个 Asp .Net Web 服务。在其方法中，我调用 SQL Server 的 HOST_ID() 函数来获取每个会话或连接的唯一 ID，但我为每个会话获取一个 ID。我怎样才能使它对每个 http 会话都是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:05:24.713

来自在线书籍：

> 返回工作站标识号。工作站标识号是连接到 SQL Server 的客户端计算机上的应用程序的进程 ID (PID)。

这不太可能是独一无二的。

# azure - 是否可以从已部署的 Web 角色中获取 web.config？

> ID：11204047
> 
> 赞同：2
> 
> 时间：2012-06-26T09:08:55.623
> 
> 标签：azure, web-config, azure-web-roles

我目前正在尝试确定为部署到 Azure 的 Web 角色加密 web.config 的优点。这个问题的答案似乎强调了知道谁可以访问实例的重要性：

[使用 Azure Cloud 时，Web.config 中的 DB ConnectionString 是否需要加密？](https://stackoverflow.com/questions/8376264/shall-the-db-connectionstring-within-web-config-be-encrypted-when-using-azure-cl)

但是，我的印象是没有人可以通过允许他们读取 web.config 的方式访问 Web 角色实例。

所以我的问题是：**是否可以从已部署的 Web 角色中获取 web.config？**

例如：Azure 门户中是否有我没见过的选项？是否可以通过另一个部署访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:11:22.397

首先，未加密的 web.config 内容意味着任何可以访问服务包的人都可以访问 web.config 内容 - 这可能比您想要的更多。例如，如果您有一个自动构建，那么您公司中看到构建结果的任何人都会看到该数据。你决定这是否可以接受。

接下来，不要忘记软件中存在漏洞。有时可能会在 IIS 中发现允许轻松下载 web.config 的漏洞。

接下来，如果您碰巧`customErrors`关闭并且您在 web.config 中配置错误，那么任何对您的 Web 角色发出 HTTP 请求的人都可能会看到来自 IIS 的错误消息，指出 web.config 中的这个和那个配置错误并显示发生错误配置的 web.config 的一部分。这可能会暴露你的秘密——[这里有一个类似暴露的例子](https://stackoverflow.com/q/6187989/57428)。不太可能，但在技术上是可能的。

最后，就所有云提供商而言，您并不能真正控制数据中心如何处理数据。他们可能会丢弃未损坏的磁盘，或者某些员工可能已损坏并且您的服务包可能会泄漏。不太可能，但在技术上是可能的。如果您提出这样的问题（这是一个非常好的问题），您也应该考虑到这种风险。

所以像往常一样没有绝对的安全。你所能做的就是提高标准。以加密形式正确存储连接字符串肯定会提高标准。

您可能还对[这个相关问题](https://stackoverflow.com/q/6621244/57428)的答案感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:38:17.073

除了@sharptooth 关于 Web 应用程序和云安全的一般要点之外，如果您之前已将其配置为直接连接到 Azure Web/Worker 角色，也可以这样做：

[MSDN：将远程桌面与 Windows Azure 角色一起使用](http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx)

可以从 Azure 管理控制台更改配置。因此，如果您在服务定义中导入了 RDC 引用（例如，如果您过去通过 RDC 进行连接），则始终可以重新配置该角色以允许 RDC 访问其实例（即使原始 RDC 帐户具有已到期）。

以下是我参考的服务定义和配置部分的参考： [MDSN：如何定义和配置远程桌面连接](http://msdn.microsoft.com/en-us/library/windowsazure/hh124130.aspx)

# liferay - 验证 Portlet 首选项后添加确认消息

> ID：11204048
> 
> 赞同：1
> 
> 时间：2012-06-26T09:09:17.363
> 
> 标签：liferay, portlet

我想在验证表单时添加确认消息和重定向到我的 jsp。

我在liferay的源代码中看到了这一点

```
SessionMessages.add(actionRequest, config.getPortletName() + ".doConfigure"); 
```

这将显示带有 的绿色样式消息`Param has been saved successfully`。但不起作用。它显然使用配置菜单（打开一个弹出窗口），并且我使用首选项菜单，我仍然可以为我的代码调整这一行吗？

当我更改首选项时，我希望在我的 portlet 中进行重定向，但现在，它仍在首选项页面上，我必须单击`Return to full page`.

另外，如果未验证首选项，我可以显示错误消息吗？

问候。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:17:02.373

对于每一个

```
 SessionMessages.add(actionRequest, "successfully-handled-some-action");
  SessionErrors.add(actionRequest, "problem-occurred"); 
```

您将需要在您的 jsp 中选择一个部分（否则没有人会知道您希望它出现在页面上的哪个位置）：

```
 <liferay-ui:success key="successfully-handled-some-action" message="localization-key-for-this-message"/>
  <liferay-ui:error key="problem-occurred" message="localization-key-for-this-message"/> 
```

# python - 如何执行部分继承

> ID：11204053
> 
> 赞同：4
> 
> 时间：2012-06-26T09:09:37.433
> 
> 标签：python, inheritance

例如，我有两个课程：

```
class Parent(object):

    def hello(self):
        print 'Hello world'

    def goodbye(self):
        print 'Goodbye world'

class Child(Parent):
    pass 
```

类 Child 必须仅从 Parent 继承 hello() 方法，并且不应提及 goodbye()。可能吗 ？

ps 是的，我读过[这个](https://stackoverflow.com/questions/5647118/is-it-possible-to-do-partial-inheritance-with-python)

重要说明：我只能修改子类（在所有可能的父类中都应该保持原样）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T09:50:59.353

解决方案取决于您为什么要这样做。如果您想避免将来错误使用该课程，我会这样做：

```
class Parent(object):
    def hello(self):
        print 'Hello world'
    def goodbye(self):
        print 'Goodbye world'

class Child(Parent):
    def goodbye(self):
        raise NotImplementedError 
```

这是明确的，您可以在异常消息中包含解释。

如果您不想使用父类中的大量方法，则更好的样式是使用组合而不是继承：

```
class Parent(object):
    def hello(self):
        print 'Hello world'
    def goodbye(self):
        print 'Goodbye world'

class Child:
    def __init__(self):
        self.buddy = Parent()
    def hello(self):
        return self.buddy.hello() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T09:49:32.013

```
class Child(Parent):
    def __getattribute__(self, attr):
        if attr == 'goodbye':
            raise AttributeError()
        return super(Child, self).__getattribute__(attr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:30:30.457

这个 Python 示例展示了如何设计类来实现子类继承：

```
class HelloParent(object):

    def hello(self):
        print 'Hello world'

class Parent(HelloParent):
    def goodbye(self):
        print 'Goodbye world'

class Child(HelloParent):
    pass 
```

# iphone - 在 iPhone 和服务器之间同步 Sqlite 数据库

> ID：11204061
> 
> 赞同：1
> 
> 时间：2012-06-26T09:10:22.943
> 
> 标签：iphone, ios, ios4

嗨，我正在使用本地 sqlite 数据库开发应用程序。例如，我想更改 iPhone 中的数据库（sample.sqlite），方法是将服务器中另一个同名的 sqlite 数据库文件替换为“www.mymail.com/Sample”之类的 URL .sqlite”。请有任何想法。

# linux - 如果脚本需要输入或输入密码则失败

> ID：11204070
> 
> 赞同：4
> 
> 时间：2012-06-26T09:10:47.423
> 
> 标签：linux, bash, sh

我正在开发一个不需要与用户交互的脚本，如果我的脚本中的程序需要用户输入某些内容，那么脚本应该会失败并立即退出。

我已经关闭了`STDIN`脚本顶部的 ，这适用于某些命令，但有些命令需要在另一个文件描述符中输入（通常是那些要求输入密码的命令，例如`git`or `sudo`）。

目前我的脚本是：

```
#!/bin/bash

# close STDIN
exec 0<&-

# test that $1 exists and it is a valid folder containing a git repository
# ...

cd "$1"

git fetch
# if git is not correctly configured, it asks for a password and
# my script waits for it :( 
```

那么，我该如何避免这种情况呢？

注意：我不是在问如何在`git`or `sudo`or中进行无密码配置`whatever`，而是要防止`bash`(or `sh`) 中的程序期望用户输入并在这种情况下立即失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:34:38.080

首先让我说，我认为这不是解决您的问题的正确方法。完全没有。必须有一个更好的特定于应用程序的解决方案，你真的应该找到它。

主要问题是，如果不知道要“强制关闭”哪些程序，您将不知道如何使它们“出错”。如果您*确实*了解这些程序，CodeGnome 的解决方案似乎很好。

另请注意，并非所有程序都直接从 STDIN 读取输入。例如，Python 的 getpass 模块直接打开一个附加文件描述符到`/dev/tty`，因此关闭或重定向 STDIN 无关紧要。这也是`sudo`接受密码的方式，我相信这也是 ncurses 的工作方式。以这种方式阅读可以让您在不显示在屏幕上的情况下获得密码。

对于不直接从`/dev/tty`（例如 bash's ）读取的提示，只需从（例如）`read`重定向 STDIN可能会让您到达某个地方。或者，您可以做您正在做的事情并关闭 STDIN，***但是当程序遇到关闭的 STDIN 或仅包含 EOF 的重定向的 STDIN 时，程序的行为方式是您无法控制的。*** 希望程序会如您所愿出错，但也许它会继续循环，期待有效的输入。谁知道？`/dev/null``./prompt.sh </dev/null`

 *此外，无论是关闭还是重定向都不会是全局的工作方式，如果有的话。某些程序可能会退出，因为您希望关闭 STDIN，其他程序可能需要来自的 EOF`/dev/null`

因此，执行此操作的方法不是通用的、包罗万象的解决方案，而是针对您放置在该位置的程序量身定制的解决方案。更好的是，不要使用**try**（运行程序），然后**catch （程序要求输入的情况）方法，只需以*****您知道***它们不会要求输入的方式调用程序。

无论如何，话虽如此，一种可能可行的方法是关闭 STDIN 并将进程置于后台。例如：

```
#!/bin/bash

exec 0<&-
./prompt.sh & 
```

或者，将 STDIN 重定向到 /dev/null 并将进程置于后台。例如：

```
#!/bin/bash

./prompt.sh </dev/null & 
```

然后，您需要检查程序的返回码（带有`$?`）以查看它们是否正确退出。（希望您正在使用的未知程序列表遵循标准返回值方案）

STDIN 的关闭/重定向将处理 STDIN 用于接受输入的情况，而后台进程将处理 is 的情况`/dev/tty`（因为后台进程没有 tty）。

如果程序提示您使用其他方法（直接打开一个 FD 到您的伪终端，弹出一个图形输入框，为您提供声音提示等），您就只能靠自己了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:57:32.153

与其尝试关闭标准输入或标准错误，不如使用一个简短的期望脚本，如果它看到密码提示就会退出。例如：

```
#!/bin/bash

cd "$1"

expect -c '
    log_user 0
    spawn git fetch
    expect -timeout 30 -re "ass(phrase|word)" { exit 1 }
    '

# Do something based on the exit status of the expect script.
[[ $? -eq 1 ]] && { echo 'Password prompt detected!' >&2; exit 1; } 
```

如果看到密码或密钥密码提示，expect 脚本将返回退出状态 1。然后 bash 脚本可以自由地做同样的事情，或者采取其他行动。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:11:05.360

大多数（全部？）*NIX 都有一个`tty`命令，该命令打印出 shell 的名称，如果 shell 连接了 tty，则`tty`退出`0`，否则退出`1`错误。

```
if ! tty>&/dev/null; then echo "Not a terminal; goodbye."; exit 1; fi 
```*

# mysql - 需要更改 wordpress 中的 wp_query 进行搜索

> ID：11204072
> 
> 赞同：-1
> 
> 时间：2012-06-26T09:10:53.190
> 
> 标签：mysql, wordpress

我需要在 wordpress 中自定义搜索，因此搜索也会在 postmeta 表中查找关键字。我为 wp_query 变量放置了 meta_query 变量。wp_query 对象的查询输出如下：

```
SELECT SQL_CALC_FOUND_ROWS  wp_posts.ID FROM wp_posts  INNER JOIN wp_postmeta ON        (wp_posts.ID = wp_postmeta.post_id) 
```

INNER JOIN wp_postmeta AS mt1 ON (wp_posts.ID = mt1.post_id) INNER JOIN wp_postmeta AS mt2 ON (wp_posts.ID = mt2.post_id) WHERE 1=1 AND wp_posts.post_parent = 0 AND (((wp_posts.post_title LIKE '% 4422%') OR (wp_posts.post_content LIKE '%4422%'))) AND wp_posts.post_type = 'wpsc-product' AND (wp_posts.post_status = 'publish' OR wp_posts.post_status = 'private') AND ((wp_postmeta .meta_key = 'CAS #' AND CAST(wp_postmeta.meta_value AS CHAR) LIKE '%4422%') OR (mt1.meta_key = 'style' AND CAST(mt1.meta_value AS CHAR) LIKE '%4422%') OR ( mt2.meta_key = 'Packaging' AND CAST(mt2.meta_value AS CHAR) LIKE '%4422%') ) GROUP BY wp_posts.ID ORDER BY wp_posts.post_title ASC LIMIT 0, 75

现在的问题是它同时在 post 和 postmeta 表中查找。因此，如果关键字不在 post_content 或 post_title 中并且不在元字段中，则什么都不会出现。

我需要它来查看 post_content、post_title 和元字段中的任何位置，以便在其中任何一个中找到值，它会显示结果。现在它正在显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:58:23.280

试试下面的代码：

```
wp_reset_query();
$args = array('ignore_sticky_posts' => 1,'meta_key'=> KEY_TO_SEARCH, 'meta_value'=>$search_value, 'post_type'=> 'post','orderby' => 'post_date','order' => 'DESC','post_status' => 'publish',  'posts_per_page' => $post_to_show);
 query_posts($args); 
```

# java - android - 引起：android.view.ViewRootImpl$CalledFromWrongThreadException

> ID：11204079
> 
> 赞同：8
> 
> 时间：2012-06-26T09:11:19.350
> 
> 标签：java, android, image, url

> **可能重复：**
> [Android - ViewRootImpl$CalledFromWrongThreadException](https://stackoverflow.com/questions/10118301/android-viewrootimplcalledfromwrongthreadexception)

我试图从我的 URL 获取图像并显示在应用程序中，但它抛出错误**Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views**。下面是我的代码

代码

```
package com.smartag.bird.dev;

public class MainActivity extends Activity {
    static String ndefMsg = null;
    static String ndefMsg1 = null;
    NfcAdapter mNfcAdapter;
    PendingIntent mNfcPendingIntent;
    IntentFilter[] mNdefExchangeFilters;
    static final String TAG = "Read Tag";
    TextView mTitle;
    private static ImageView imageView;
    static String url = "http://sposter.smartag.my/images/chicken_soup.jpg";
    private static Bitmap downloadBitmap;
    private static BitmapDrawable bitmapDrawable;
    private static boolean largerImg = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);            
        //setContentView(R.layout.main);
        mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
        mNfcPendingIntent = PendingIntent.getActivity(this, 0,
                new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
        IntentFilter ndefDetected = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
        try {
            ndefDetected.addDataType("text/plain");
        } catch (MalformedMimeTypeException e) { }
        mNdefExchangeFilters = new IntentFilter[] { ndefDetected };  
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
            NdefMessage[] messages = getNdefMessages(getIntent());
            byte[] payload = messages[0].getRecords()[0].getPayload();
            ndefMsg = new String(payload);           
            setIntent(new Intent()); // Consume this intent.
        }

        ConnectivityManager connManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

        if(ndefMsg == null || ndefMsg.length() == 0)
        {               
            startActivity(new Intent(MainActivity.this, MainMenu.class));               
        }            
        else
        {
            setContentView(R.layout.main);
            if (mWifi.isConnected()) {              
                ndefMsg1 = ndefMsg;
                 new DownloadFilesTask().execute(); 
                  ndefMsg = null;
            }
            else
            {                        
                AlertDialog.Builder dialog = new AlertDialog.Builder(this);
                dialog.setTitle("Attention");
                dialog.setMessage("No Internet Connection. Please enable the wifi.");
                dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) 
                    {
                    }
                });
                dialog.show();
            }
        }           
    }
    private class DownloadFilesTask extends AsyncTask<Void, Void, Void> {
        protected void onPostExecute(Void result) {             
        }           
        @Override
        protected Void doInBackground(Void... params) {             
            try {
                URL myFileUrl = new URL("http://sposter.smartag.my/images/chicken_soup.jpg");
                HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
                conn.setDoInput(true);
                conn.connect();
                InputStream is = conn.getInputStream();
                downloadBitmap = BitmapFactory.decodeStream(is);
                            } catch (FileNotFoundException e) {             
                e.printStackTrace();
            }
            catch (IOException e) {         
                e.printStackTrace();
            }               
            ImageView image = (ImageView) findViewById(R.id.imview);            
            image.setImageBitmap(downloadBitmap);
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-26T09:13:32.977

**使用AsyncTask**的不良做法，

您正在尝试更新您的主 UI 线程，`doInBackGround()`因为 AsyncTask 从未允许这样做。

`doInBackGround()`永远不要从AsyncTask 作为其唯一的工作线程更新您的 UI 。因此，在 AsyncTask 的方法中编写您的主 UI 更新代码`onPostExecute()`..

```
@Override
        protected Void doInBackground(Void... params) {             
            try {
                URL myFileUrl = new URL("http://sposter.smartag.my/images/chicken_soup.jpg");
                HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
                conn.setDoInput(true);
                conn.connect();
                InputStream is = conn.getInputStream();
                downloadBitmap = BitmapFactory.decodeStream(is);
                            } catch (FileNotFoundException e) {             
                e.printStackTrace();
            }
            catch (IOException e) {         
                e.printStackTrace();
            }               
            return null;
        }

@Override
onPostExecute()
{
 ImageView image = (ImageView) findViewById(R.id.imview);            
            image.setImageBitmap(downloadBitmap);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T09:17:31.037

**将为@user370305 所说的内容添加一些要点，**

您不能在非 ui 线程中触摸 UI 元素。

如果您使用`AsyncTask` `doInBackground`的是在非 ui 线程中执行，因此您无法访问 ImageView 。

您可以访问`onPreExecute`, `onProgressUpdate`&中的 UI 元素`onPostExcecute`。

# drupal-6 - 创建内容中的管理字段未出现drupal 6

> ID：11204082
> 
> 赞同：1
> 
> 时间：2012-06-26T09:11:34.543
> 
> 标签：drupal-6

我在drupal 6中创建了一个名为“test”的新内容类型。在“test”下，我在管理显示和保存配置中添加了一个新字段“home”。但是当去创建内容并单击“test”链接时，我添加的字段没有出现。有谁知道。？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T19:33:52.840

请检查您是否有适当的权限。适当的 url 应该是这样的`admin/content/node-type/CONTENT_TYPE_NAME/fields`

# javascript - 动态地将 CSS 样式应用于特定元素

> ID：11204084
> 
> 赞同：1
> 
> 时间：2012-06-26T09:11:40.910
> 
> 标签：javascript, jquery, css

我有一个 div 里面有段落：

```
<div>
  <p>...</p>
  <p>...</p>
</div> 
```

我想动态地将某种样式应用于此 div 内的段落。是否可以在不处理每个段落元素的情况下做到这一点，而只是以某种方式将样式附加到 div 元素并且所有内部段落都会受到影响？

也许用jquery。

对我来说，这听起来像是样式表的动态变化，可能吗？

* * *

答案评论中的正确建议。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T09:13:18.870

不使用类：

```
/* using CSS */
div p {
    color: #ff0000;
}

// using jQuery
$("div p").css({
    color : "#ff0000"
}); 
```

使用`<p>`元素类：

```
<!-- HTML -->
<div>
    <p class="mypar">...</p>
    <p class="mypar">...</p>
</div>

/* using CSS */
div p.mypar {
    color: #ff0000;
}

// using jQuery
$("div p.mypar").css({
    color : "#ff0000"
}); 
```

使用`<div>`元素类：

```
<!-- HTML -->
<div class="mydiv">
    <p>...</p>
    <p>...</p>
</div>

/* using CSS */
div.mydiv p {
    color: #ff0000;
}

// using jQuery
$("div.mydiv p").css({
    color : "#ff0000"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:15:22.973

使用 CSS，您可以定义[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)。

在此基础上，您可以动态添加/删除样式类，`div`并且该样式将应用于您在该选择器中指定的子项。

假设您想将此应用于特定的`div`，而不是任何/每个。所以给目标`div`一个标识符：

```
<div id='foo'>
  <p>...</p>
  <p>...</p>
</div> 
```

使用简单的 javascript 添加动态样式：

```
document.getElementById('foo').style.className='dynamic_style' 
```

CSS（在子选择器上使用[组合 id 和 class ）：](https://stackoverflow.com/a/1028260/127035)

```
div#foo.dynamic_style > p { /* your style definition*/ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:14:49.997

使用 CSS：

```
div p {your style goes here} 
```

jQuery：

```
$('div p').css('property', 'value'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:15:30.663

您可以通过以下方式为您的示例动态应用 CSS：

```
function applyCSS()
{
    $("div > p").css({
        "background": "#fff",
        "color": "#000"
    });
} 
```

或者，当您想在页面加载时应用它时：

```
$(document).ready(function(){
    applyCSS();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:19:16.023

例如，动态更改 css 就像更改顶级类名一样简单

```
<div id="toggleme" class="class1">
  <p>...</p>
  <p>...</p>
</div>
<a id="test">Test</a> 
```

​</p>

```
.class1 {
 background-color:#F00;
}

.class1 p {
    color:#00F;
}

.class2 {
    background-color:#00F;
}

.class2 p {
 color:#F00;
}​ 
```

那么jquery将是

```
$(document).ready(function() {
    $('#test').click(function() {
        $('#toggleme').toggleClass('class1');
        $('#toggleme').toggleClass('class2');
    });
});​ 
```

类下面的所有内容都将更改为新样式:)

[小提琴](http://jsfiddle.net/nS4VG/)

# javascript - JavaScript 自定义事件或普通函数调用哪个更好？

> ID：11204086
> 
> 赞同：10
> 
> 时间：2012-06-26T09:11:50.443
> 
> 标签：javascript, jquery, jquery-events

在 Js 代码中，如果有两个 js 对象（一个处理 UI（例如表单），另一个将请求发布到服务器。

使用自定义事件或普通函数调用在这些组件之间进行交互的更好方法是什么。

例如。

```
 clickForm = function(){
      validateForm();
      $(document).trigger("submitForm",{"userData":userData});//Event submitForm listened by formManager submitForm method.
  } 
```

或者

```
clickForm = function(){
     validateForm();
     formManager.submitForm(userData);
  } 
```

`clickForm`方法是 UI 组件的一部分，负责管理 HTML 代码的 UI 交互。该函数通常在单击提交按钮时调用。

`submitForm`方法是核心对象的一部分，其职责是向服务器发出请求，解析响应，然后将结果发送到 UI 组件。

这两种方法中的哪一种是更好的交互方式。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T09:14:57.943

“更好”是一个棘手的概念。:-)

使用事件可以更松散地耦合对象，这通常被认为是一件好事，并且允许不仅仅是两个对象协作（例如，多个订阅者的事件；相反，一个对象可以订阅两个来源的事件）。

事件机制将有更多的开销，这在大多数情况下并不重要（当然在提交表单时），但在一小部分情况下（每秒发生数千次的事情）可能。事件机制*也*可能有点难以阅读和调试。

# android - android - 将图像缓存存储在内部存储器中并重用它

> ID：11204087
> 
> 赞同：1
> 
> 时间：2012-06-26T09:11:55.293
> 
> 标签：android, storage, internal

在我的应用程序中，我试图将图像存储在内部存储器中，以便它只能在我的应用程序中使用，并且不能以其他方式看到。

通过以下方式，我将图像缓存存储在内部存储器中

```
File cacheDir = getApplicationContext().getDir("", Context.MODE_PRIVATE); 
File fileWithinMyDir = new File(cacheDir, "");

for(int i = 0; i < img.size(); i++)
{               
    String filename = String.valueOf(img.get(i).hashCode());
    String urlString = img.get(i);
    String PATH =  fileWithinMyDir + filename;
    DownloadFromUrl(PATH, urlString);
    img_path.add(PATH);
}

   private void DownloadFromUrl(String fileName, String urlStr) 
   {
      try 
      {
       URL url = new URL(urlStr);
       File file = new File(fileName);
       URLConnection ucon = url.openConnection();
       InputStream is = ucon.getInputStream();
       BufferedInputStream bis = new BufferedInputStream(is);
       ByteArrayBuffer baf = new ByteArrayBuffer(50);
       int current = 0;
       while ((current = bis.read()) != -1) 
       {
        baf.append((byte) current);
       }

       FileOutputStream fos = new FileOutputStream(file);
       fos.write(baf.toByteArray());
       fos.close();
    } 
    catch (IOException e) 
    {
        Log.e("download", e.getMessage());
    }
  } 
```

img 是一个数组列表，其中包含我尚未下载的图像 url。img_path 是一个数组列表，我在其中存储存储图像缓存的路径。

存储的路径似乎如下

```
/data/data/com.intr.store/app_1219784788 
```

那条带有我的包名的路径，这是正确的吗？我没有给`app_`任何地方，但它是怎么来的？

在我的其他一项活动中，我想将其加载到图像视图中。我已经通过以下方式尝试过

```
File filePath = getFileStreamPath(pth);
        i.setImageDrawable(Drawable.createFromPath(filePath.toString())); 
```

这里 pth 是路径，i 是图像视图。但是应用程序崩溃了

```
06-26 14:40:08.259: E/AndroidRuntime(6531): Caused by: java.lang.IllegalArgumentException: File /data/data/com.intr.store/app_1219784788 contains a path separator 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:33:30.813

你写错了代码。

代替

```
File cacheDir = getApplicationContext().getDir("", Context.MODE_PRIVATE); 
File fileWithinMyDir = new File(cacheDir, ""); 
```

到

```
File fileWithinMyDir = getApplicationContext().getFilesDir(); 
```

然后

代替

```
String PATH =  fileWithinMyDir + filename; 
```

到

```
String PATH =  fileWithinMyDir.getAbsolutePath() + "/" +filename+".file extension"; 
```

# cocos2d-iphone - 访问不同类的标签 - cocos2d

> ID：11204091
> 
> 赞同：0
> 
> 时间：2012-06-26T09:12:24.287
> 
> 标签：cocos2d-iphone, tags, box2d-iphone

这听起来可能很简单。如何在 cocos2d 中访问另一个类中的标签。我计划使用这些标签在绳索（由旋转关节制成的绳索类）和精灵（精灵类）之间创建一个接触侦听器。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:44:16.583

好吧，您总是可以检索从 CCNode 派生的对象，如下所示：

```
MyClass *anObject=(MyClass*) [theContainerObject getChildByTag:theObjectTagToRetrieve]; 
```

请注意，MyClass 还必须从 CCNode 派生（您不能首先将它添加为另一个 CCNode 派生的子级。幸运的是，它似乎有很多属性要在 HelloWorldLayer 中公开。也许另一种方法是添加您可以在其他地方使用的 HelloWorldLayer 中的对象 getter 方法，即隐藏您的实现细节但提供功能。

# macros - 带有参数 x 和输出 $x 和 @x 的宏

> ID：11204092
> 
> 赞同：2
> 
> 时间：2012-06-26T09:12:39.293
> 
> 标签：macros, c-preprocessor

我正在尝试编写一个宏：

```
#define FCT( x ) fct( ($ ## x), (@ ## x).first_line, (@ ## x).first_column ) 
```

宏的输出应如下例所示：

```
FCT(2) --> fct( $2, @2.first_line, @2.first_column ) 
```

不幸的是，这不起作用，`@`似乎会导致错误。这甚至可以用**C**预处理器实现吗？

目前我正在使用这个宏：

```
#define FCT(x,y) fct( x, y.first_line, y.first_column )
FCT($2,@2) --> fct( $2, @2.first_line, @2.first_column ) 
```

这行得通，对我来说足够短，但我问我第一个宏是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:18:59.040

事实上，MSVC 接受`$`作为标识符的有效符号。正如上面正确指出的那样，根据标准，这不应该是这样。这`@`是一个预处理器运算符，通常应该应用于宏的参数。您不能将其用作标识符的一部分。您的输出是 C 程序吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:24:35.730

尝试使用通用串联宏可能：

```
#define CONCAT(a,b) CONCAT_(a,b)
#define CONCAT_(a,b) a##b
#define FCT( x ) fct( CONCAT($,x), CONCAT(@,x).first_line, CONCAT(@,x).first_column ) 
```

# java - 如何在 Xtext DSL 中嵌入 XBase 表达式

> ID：11204094
> 
> 赞同：1
> 
> 时间：2012-06-26T09:12:48.943
> 
> 标签：java, xtext

我正在编写一个简单的小 DSL 来指定消息的约束，并且一段时间以来一直在尝试将 XBase 表达式嵌入到语言中，但没有成功。

语法看起来像这样：

```
grammar org.xtext.businessrules.BusinessRules with org.eclipse.xtext.xbase.Xbase
//import "http://www.eclipse.org/xtext/xbase/Xbase" as xbase
import "http://www.eclipse.org/xtext/common/JavaVMTypes" as jvmTypes
generate businessRules "http://www.xtext.org/businessrules/BusinessRules"

Start:
    rules+=Constraint*;

Constraint:
    {Constraint}
    'FOR' 'PAYLOAD' payload=PAYLOAD 'ELEMENT' element=ID 'CONSTRAINED BY' constraint=XExpression;

PAYLOAD:
    "SimulationSessionEvents"
    |"stacons"
    |"any"
;

Range:
    'above' min=INT ('below' max=INT)?
    |'below' max=INT ('above' min=INT)?
; 
```

尝试解析文件时，例如：

FOR PAYLOAD SimulationSessionEvents ELEMENT 矩阵受 ...

我无法让它适用于 ... = 任何类型的算术表达式，尽管它适用于 ...= 循环或 if 表达式，甚至只是一个数字。一旦我执行“-5”或“4-5”之类的操作，它就会显示`Couldn't resolve reference to JvmIdentifiableElement '-'`，即使 Xbase.xtext 语法看起来允许这些表达式。

我不认为我错过了任何罐子，因为当我运行 mwe 工作流程时它不会抱怨，但只有在尝试解析输入文件时才会抱怨。

任何帮助将非常感激。

编辑：项目的构建路径如下：

```
C:\Program Files\eclipse\plugins\org.eclipse.xtext_2.2.1.v201112130541.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.ecore.xmi_2.7.0.v20120127-1122.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.ecore_2.7.0.v20120127-1122.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.common_2.7.0.v20120127-1122.jar
C:\Program Files\eclipse\plugins\org.eclipse.xtext.util_2.2.1.v201112130541.jar
C:\Program Files\eclipse\plugins\com.google.guava_10.0.1.1.jar
C:\Program Files\eclipse\plugins\com.google.inject_3.0.0.no_aop.jar
C:\Program Files\eclipse\plugins\javax.inject_1.0.0.v20091030.jar
C:\Program Files\eclipse\plugins\org.antlr.runtime_3.2.0.v201101311130.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.mwe.core_1.2.1.v201112070431.jar
C:\Program Files\eclipse\plugins\org.apache.commons.cli_1.2.0.v201105210650.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.mwe2.runtime_2.2.0.v201112070431.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.mwe.utils_1.2.1.v201112070431.jar
C:\Program Files\eclipse\plugins\org.eclipse.xtext.xbase_2.2.1.v201112130541.jar
C:\Program Files\eclipse\plugins\org.eclipse.xtext.common.types_2.2.1.v201112130541.jar
C:\Program Files\eclipse\plugins\org.apache.log4j_1.2.15.v201012070815.jar
C:\Program Files\eclipse\plugins\org.apache.commons.logging_1.0.4.v201101211617.jar
C:\Program Files\eclipse\plugins\org.eclipse.xtext.generator_2.2.1.v201112130541.jar
C:\Program Files\eclipse\plugins\org.eclipse.xtend_1.1.0.v201108020519.jar
C:\Program Files\eclipse\plugins\com.ibm.icu_4.4.2.v20110823.jar
C:\Program Files\eclipse\plugins\org.eclipse.xpand_1.1.0.v201108020519.jar
C:\Program Files\eclipse\plugins\org.eclipse.xtend.typesystem.emf_1.0.1.v201108020519.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.codegen.ecore_2.7.0.v20120130-0943.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.codegen_2.6.0.v20120130-0943.jar
C:\Program Files\eclipse\plugins\de.itemis.xtext.antlr_2.0.0.v201108011202.jar
C:\Program Files\eclipse\plugins\org.antlr.generator_3.2.0.v201108011202.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.mwe2.lib_2.2.0.v201112070431.jar
C:\Program Files\eclipse\plugins\org.eclipse.xtext.xbase.lib_2.2.1.v201112130541.jar
C:\Program Files\eclipse\plugins\org.eclipse.xtend2.lib_2.2.1.v201112130541.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.mwe2.launch_2.2.0.v201112071250.jar
C:\Program Files\eclipse\plugins\org.eclipse.emf.mwe2.language_2.2.0.v201112071250.jar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:41:17.663

您必须将 Xtend 库放在包含 DSL 文件的项目的类路径中。

从上下文菜单中选择“构建路径”，然后选择“添加库”。选择 Xtend 库，它应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:53:30.097

问题已解决，事实证明您需要在实际声明 DSL 模型的项目的构建路径中包含 xbase.lib jar。

# ruby-on-rails - 在 Mac OSX Mountain Lion 上使用查询字符串创建操作的 Rails 3.1 API 问题

> ID：11204095
> 
> 赞同：0
> 
> 时间：2012-06-26T09:12:49.437
> 
> 标签：ruby-on-rails, api, params

嗨，我已经在这个问题上停留了一段时间，希望能得到您的帮助。我正在编写一个 API 以允许外部源（如浏览器查询字符串或智能手机）在表单中输入一些模型用户信息并点击用户创建操作以将数据写入数据库。请告诉我我在下面的代码中做错了什么。

我还观察到，如果我有像 @user = User.new(params[:user]) 这样的代码，那么这种方法只有在用户在表单中输入他们的数据时才有效。

如果我有诸如 @user = User.new(name: params[:name], location: params[:location], password = params[:password], email: params[:email]) 之类的代码，那么代码仅适用于查询字符串条目，但不适用于查询字符串和常规表单提交。

为什么会这样，我如何在用户控制器创建操作中编写上面的代码，以便它处理这两种情况？

使用的 URL：localhost:3000/users/create?name=John&&email=john@email.com&&password=secret&&location=SanFrancisco&date=06122012

日期是字符串类型，但它不显示在数据库中。为什么？其他一切都可以。

用户控制器.rb

定义创建

```
@user = User.new(params[:user])

if @user.save
session[:uid] = @user.id
redirect_to thanks_path, notice: "Welcome #{@user.name}!"
else
redirect_to root_path
end 
```

结尾

新用户表单：

```
 <%=u.text_field :name, placeholder: "Name"%><br>
                <%=u.text_field :email, placeholder: "Email"%><br>
        <%=u.password_field :password, placeholder: "Password"%><br>
        <%=u.text_field :location, placeholder: "City"%><br> 
                <%=u.text_field :date, placeholder: "Date"%><br>

        <%if params[:partner_id]%>

        <%=u.hidden_field :partner_id, value: params[:partner_id]%>

        <%end%>

               <button class="btn btn-large btn-primary">Enter</button> 
```

我还尝试创建一个名为 remotecreate 的单独方法，用于为常规 Web 表单以外的其他内容创建用户。我在查询字符串中输入了 remotecreate，但它不起作用。

def remotecreate @user = User.create(name: params[:name], email: params[:email], password: params[:password], location: params[:location], date: params[:date]) if @user.save session[:uid] = @user.id redirect_to Thanks_path，注意：“Welcome #{@user.name}” else redirect_to root_path end end

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:48:58.627

在你的控制器中..

```
def create
  @user = User.new

  if params[:user] && params[:user][:email]  # Form submission
     @user = User.new(params[:user])

  else      # Url-inlined submission
    @user = User.new
    @user.attributes = params
  end 
```

没有测试@user.attributes = params，但认为它应该可以工作。你总能做到

```
@user.email = params[:email]
@user.something = params[:somethings]
... 
```

# php - 将 JSON 字符串或数组转换为 Excel 文件？

> ID：11204096
> 
> 赞同：4
> 
> 时间：2012-06-26T09:12:53.290
> 
> 标签：php, arrays, json, excel, openxml

如何将数组/json 转换为 Excel 文件（Office Open XML）？

```
$result = mysql_query($query);
$rows = Array();
while($row = mysql_fetch_assoc($result)) {
    array_push($rows, $row);
}
echo json_encode(Array(
    "data" => $rows
)); 
```

# javascript - 用于接受简单数学作为值然后返回答案的提示的 Javascript

> ID：11204101
> 
> 赞同：0
> 
> 时间：2012-06-26T09:13:19.523
> 
> 标签：javascript

> **可能重复：**
> [将字符串评估为 javascript 中的数学表达式](https://stackoverflow.com/questions/2276021/evaluating-a-string-as-a-mathematical-expression-in-javascript)

我用javascript编写了一段代码，点击时会出现提示。我希望能够输入一个简单的数学问题（即 230/2）并让它输出答案，而不是我刚刚输入的数学问题。您的帮助将不胜感激。

```
<!DOCTYPE html>
<html>
<body>

<button onclick="myFunction()">Click me</button>

<p id="demo"></p>

<script type="text/javascript">
function myFunction()
{
var x;

var mathProblem=prompt("Enter your math problem","");

if (name!=null)
  {
  x = mathProblem;
  document.getElementById("demo").innerHTML = x;
  }
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:15:44.143

您可以使用它`eval()`来**计算**它：

```
document.getElementById("demo").innerHTML = eval(x); 
```

您的代码应该是这样的：

```
function myFunction()
{
  var mathProblem = prompt("Enter your math problem","");

  if (mathProblem)
  {
    document.getElementById("demo").innerHTML = eval(mathProblem);
  }
} 
```

或者如果您不想使用`eval()`（通常不推荐），您可以创建小函数来进行计算，例如加法、除法等

# c# - C# 列表、Foreach 和类型

> ID：11204104
> 
> 赞同：0
> 
> 时间：2012-06-26T09:13:27.500
> 
> 标签：c#

我想知道是否有一个 foreach 版本只检查特定类型并返回它。

例如考虑这个类树：

org.clixel.ClxBasic -> org.clixel.ClxObject -> org.clixel.ClxSprite -> WindowsGame1.test

然后考虑这段代码

```
public List<ClxBasic> objects = new List<ClxBasic>();

foreach(GroupTester tester in objects)
{
    tester.GroupTesterOnlyProperty = true;
} 
```

tester.GroupTesterOnlyProperty 是在 GroupTester 中创建的属性。有什么方法可以让这样的事情起作用，比如 foreach 的重载，或者另一个可能对我有帮助的片段？我想让程序员可以轻松地对列表进行排序，只获取他们需要的类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T09:14:59.433

您可以使用对象的[`OfType<T>`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)扩展方法`IEnumerable<T>`。

您的循环可能如下所示：

```
foreach(GroupTester tester in objects.OfType<GroupTester>())
{
    tester.GroupTesterOnlyProperty = true;
} 
```

**注意：**这假设`GroupTester`继承自`ClxBasic`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T09:16:51.487

```
foreach(GroupTester tester in objects.OfType<GroupTester>())
{
    tester.GroupTesterOnlyProperty = true;
} 
```

正如@ThePower（然后被删除）所建议的那样，您可以遍历所有对象并明确检查类型：

```
foreach(var tester in objects)
{
    if (tester is GroupTester)
    {
       (tester as GroupTester).GroupTesterOnlyProperty = true;
    }
} 
```

# java - 检查 XML(Spring) 中的布尔属性

> ID：11204110
> 
> 赞同：0
> 
> 时间：2012-06-26T09:13:45.923
> 
> 标签：java, xml, spring

我正在使用 Spring 框架。在编写自定义查询时，我无法检查布尔值的参数。例如，这不起作用：

```
<isEqual property="booleanVariable" compareValue="0">
do some SQl codes
</isEqual> 
```

上述检查不起作用，它在`booleanVariable`true 和 false 两种情况下都评估为相等。

我试图替换`compareValue="true"`和“假”。

是否可以像上面一样检查 XML 中的布尔属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:47:41.747

用于`<isEqual property="booleanVariable" compareValue="true/false">`比较布尔值。

在 java 中，布尔值与 1 或 0 没有关系。原始类型始终为真或假

# html - 覆盖最小高度属性

> ID：11204113
> 
> 赞同：14
> 
> 时间：2012-06-26T09:13:52.943
> 
> 标签：html, css

如果可能，如何覆盖`min-height`特定 div 的类的属性？

例子：

```
.someclass {
  min-height: 200px;
}
```

```
<div class="someclass">
  -- content --
</div>
```

我试过`style="min-height:100px!important;"`在 div 上使用类似的东西，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T09:20:59.740

`!important`在标准样式表中使用声明是非常不好的习惯。不惜一切代价避免它，因为它破坏了样式表的级联性质。

使用[更具体的选择器](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)来覆盖以前的样式。

要将样式重置为默认值，请`auto|inherit|0`根据属性使用。因为`min-height`它`0`。CSS3 引入了`inital`应该优先使用的特殊值 - 但不幸的是它对[IE 的支持](http://caniuse.com/#feat=css-initial-value)有限。

在您的情况下`min-height:100px;`，具有更高特异性（id 或内联样式 - 最好不是后者）的选择器应该可以解决问题。

```
let div = document.querySelector("#morespecific");

div.innerHTML = "This div has its min-height set to: "+window.getComputedStyle(div).minHeight;
```

```
.someclass{
    min-height:200px;
    border:1px solid red;
}
#morespecific{
     min-height:100px;
     border-color:blue;
}
```

```
<div id="morespecific" class="someclass">
-- content --
</div>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-18T20:32:59.070

我找不到比仅使用 0 覆盖最小内容并使用 1000% 之类的内容覆盖最大内容更好的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:15:05.887

标志需要`!important`放在分号内，如下所示：

```
.someclass {min-height: 200px !important;} 
```

此外，如果你能提供帮助，你不应该真的使用`!important`标志。覆盖规则需要比原始规则更具体。

我认为您需要阅读[特异性和继承性](http://coding.smashingmagazine.com/2010/04/07/css-specificity-and-inheritance/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:15:57.967

内联样式会覆盖 CSS 样式，因此

```
<div class="someclass" style="height: 50px;">...</div> 
```

覆盖样式表中的规则。但是，通常不是解决此问题的好方法。首选的解决方案是在您的外部 css 中使用具有更高特异性的选择器。

# django - 哨兵使用水平

> ID：11204117
> 
> 赞同：1
> 
> 时间：2012-06-26T09:14:02.703
> 
> 标签：django, sentry

我可以在 Sentry 中使用不同的级别吗？

我的配置：

```
'handlers': {
    'sentry': {
        'level': 'ERROR',
        'class': 'raven.contrib.django.handlers.SentryHandler',
    },
    'sentry.warning': {
        'level': 'WARNING',
        'class': 'raven.contrib.django.handlers.SentryHandler',
        },
'loggers': {
    'my.warning': {
        'level': 'WARNING',
        'handlers': ['sentry.warning'],
        'propagate': False,
        },
               } 
```

我的代码：

```
 import logging
    logger_router = logging.getLogger('my.warning')
    logger_router.setLevel(logging.WARNING)
    logger_router.warning('my message') 
```

为什么所有警告都放在“错误”级别？TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:51:36.307

我在***settings.py***`DEBUG=False`中从 更改为。一切正常！`DEBUG=True`

# android - 用于编辑文本的电子邮件键盘

> ID：11204120
> 
> 赞同：43
> 
> 时间：2012-06-26T09:14:07.357
> 
> 标签：android, android-edittext

以下代码似乎不起作用，我希望电子邮件键盘带有`@`并`.com`显示编辑文本。

`emailEditText.setInputType(InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);`

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-06-26T09:18:44.357

将此添加到您的布局中：

`android:inputType="textEmailAddress"`

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-06-26T09:28:07.803

好吧，我找到了要使用的解决方案

`emailEditText.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-30T14:45:02.113

以 Kotlin 的方式：

```
email_field.valueEditText.inputType = InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS 
```

# php - 用javascript更改php包含路径

> ID：11204122
> 
> 赞同：2
> 
> 时间：2012-06-26T09:14:18.717
> 
> 标签：php, javascript, path, include

如果用户更改网站的语言，我正在尝试使用 javascript 更改 php 文件的包含路径。

我正在使用此代码来检查网站的语言是否为英语。

```
<script type="text/javascript">
        $(function() {
            var pathname = window.location.pathname;
            if (pathname.search('/en/') != -1){
                //I wanna insert the new path here
            }
        });
    </script> 
```

然后我想改变包含功能

```
<?php include 'navigation.php'; ?> 
```

至

```
<?php include 'navigation_en.php'; ?> 
```

有谁知道如何使这项工作？还是我必须用 php 检查路径名才能更改 php 包含函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:21:27.747

您不能使用纯 javascript 执行此操作，因为 javascript 是在php 处理完成**后执行的。**你可以用纯 PHP 做同样的事情：

```
$uri = $_SERVER['REQUEST_URI'];
if(preg_match('/^\/en\//', $uri)) {
    include_once('include_en.php');
}
else {
    include_once('include.php');
} 
```

此代码假定您的 URL 将采用以下形式`http://www.mydomain.com/en/some/page.php`

**编辑：**

由于此代码在 wordpress 中运行，`$_SERVER['REQUEST_URI`] 不会返回语言部分。感谢 OP，在 wordpress 中执行此操作的方法是：

```
$lang = get_bloginfo('language');
if(preg_match('/^\/en-/', $lang)) {
    include_once('include_en.php');
}
else {
    include_once('include.php');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:20:45.793

您不能仅使用 JavaScript 来更改 PHP 中的变量。但你可以做一件事。`<select>`当标签的值发生变化时，您可以通过向服务器发出请求来使用 AJAX 查询。

```
$("select.language").change(function(){
    $.ajax({
        url: 'changeLang.php?lang=' + $(this).val(),
        success: function(data) {
            alert("Successfully set the language to " + data);
        }
    });
}); 
```

在后端 PHP 代码中，您可以这样做：

```
if(isset($_GET["lang"]))
    // Set the lang.
    die("English"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:20:07.167

我相当肯定这是不可能的，因为 PHP 在发送到客户端之前会生成标记。另一种解决方案是使用 JavaScript 重新加载页面，并在 URL 中包含某种参数，然后告诉 PHP 要使用哪个包含标签。

# ruby-on-rails - Rails 初始化过程

> ID：11204123
> 
> 赞同：0
> 
> 时间：2012-06-26T09:14:36.807
> 
> 标签：ruby-on-rails

```
ENV['RAILS_ENV'] ||= "development"
require File.dirname(__FILE__) + '/../../../config/boot'
require File.join(Rails.root, 'config/environment') 
```

这是我的 rails 应用程序的初始部分。谁能解释这三行的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:51:46.013

如果您想深入了解 rails 在启动时的作用，请转到 rails 指南并阅读初始化章节：

[http://guides.rubyonrails.org/initialization.html](http://guides.rubyonrails.org/initialization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:55:12.843

**#!/usr/local/ruby-current/bin/ruby - 一个 shebang 注释，它告诉类 Unix 系统如何执行这个文件。**

ENV['RAILS_ENV'] ||= "development" - 检查选定的工作环境是否为开发环境。如果不是，它将环境设置为开发。

Rails 初始化过程：在任何应用程序的/public 目录下，我们可以找到三个文件，分别是dispatch.cgi、dispatch.fcgi、dispatch.rb。我们配置服务器以启动 rails 进程（作为 CGI 进程、快速 CGI 进程或 Ruby 进程）的方式决定了将执行三个文件中的哪一个。执行的调度文件将加载 Rails 环境并通过调用调度程序响应来自 Web 服务器的请求。boot.rb 确保已设置 Rails_Root 环境变量。如果还没有完成，boot.rb 会将其定义为 /config 下一级的目录。一旦 Rails_Root 被设置，它会通过检查 vendor/rails 中是否存在冻结的 rails 环境来继续加载 rails 的过程。如果此文件夹存在，那么 boot.rb 将需要 Rails 初始化程序。如果我们没有 Rails 的本地（冻结）副本，boot.rb 将加载 ruby​​gems 库并扫描 environment.rb 以查看是否已定义 RAILS_GEM_VERSION 常量。如果它有 boot.rb 将为该定义的 Rails 版本加载初始化程序（如果系统上不存在该版本的 Rails，则会引发错误）。如果未定义 RAILS_GEM_VERSION，boot.rb 将尝试初始化系统上安装的最新版本的 Rails。

# templates - 有没有办法将逻辑和功能混合到 Underscore.js 模板中

> ID：11204128
> 
> 赞同：0
> 
> 时间：2012-06-26T09:14:58.090
> 
> 标签：templates, backbone.js, treeview, underscore.js

对于如下的 json 数据，是否有任何可能的方法来构建由 underscore.js 模板组成的树视图。我没有关于如何混合函数、递归到 underscore.js 模板功能的最简单的知识。我无权从服务器生成 json 层次结构（由上层管理决定）。

```
[{
    name: "Home",
    url: "index.html",
    id: 1,
    parentid: 0
}, {
    name: "Company",
    url: "company.html",
    id: 2,
    parentid: 0
}, {
    name: "AboutsUs",
    url: "aboutus.html",
    id: 3,
    parentid: 2
}] 
```

### 预期视图输出

```
<ul>
    <li>
        <a href="index.html">Home</a>
    </li>
    <li>
        <a href="company.html">Company</a>
        <ul>  
            <li>
                <a href="aboutus.html">AboutUs</a>
            </li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:24:40.123

是的，你可以，
你可以使用

```
<% %> 
```

编写javascript代码。

```
<ul>
    <% _(your_data).each(function(param) { %>

        <li><%= param.name%></li>
        <!-- more code -->
    <% }); %>
</ul> 
```

更多在这里[http://documentcloud.github.com/underscore/#template](http://documentcloud.github.com/underscore/#template)

希望对您有所帮助，祝您好运！

# c# - 创建具有冻结列的表/网格

> ID：11204132
> 
> 赞同：0
> 
> 时间：2012-06-26T09:15:09.457
> 
> 标签：c#, wpf, datagrid

我在 WPF 中有一个网格绑定到 ObservableCollection(MVVM)。我有一些每月信息，所以第一列指的是一项任务，然后我每天有一个列。由于这些原因，冻结第一列非常重要，然后用户可以水平滚动以查看所有日期信息。我也需要垂直滚动工作。

这个问题类似于[Creating a table/grid with a freeze column and freeze headers](https://stackoverflow.com/questions/7586753/creating-a-table-grid-with-a-frozen-column-and-frozen-headers)，但我不知道如何使用 C#/WPF 执行此操作。有任何想法吗？我只考虑过使用两个网格，但我不知道是否可以同步垂直滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:24:18.553

为了冻结列 DataGrid 具有称为 FrozenColumnCount 的属性

请参阅链接，例如[http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.frozencolumncount%28VS.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.frozencolumncount%28VS.95%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:13:28.587

我在 DevXpress GridControl 中解决了它，将所需 GridColumn 的 Fixed 属性设置为 true。

# php - 添加类别过滤器

> ID：11204134
> 
> 赞同：2
> 
> 时间：2012-06-26T09:15:15.330
> 
> 标签：php, magento, filter, categories

我想在 magento 的产品列表的**sales_order_create**网格中添加类别过滤器，我已成功在过滤器中添加类别下拉列表，但是当我点击搜索使用此类别过滤器时，我正在重定向到主仪表板页面，所以我不知道的问题是什么了解我的其他自定义过滤器在此页面上正常工作，但此类别过滤器不起作用。我已将 category_ids 作为名称和索引传递。我发现了这个错误 **Invalid attribute name: category_ids。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:05:02.747

此错误表示提取的表中没有“category_ids”列。您应该覆盖网格（如果您还没有完成）并为选择的每个类别 id 创建一个`join`, 或添加一个`->where()`-statement 到集合中。

# sql - 先进先出 (FIFO) 库存成本核算

> ID：11204136
> 
> 赞同：7
> 
> 时间：2012-06-26T09:15:26.307
> 
> 标签：sql, sql-server-2008

这是一篇有趣的文章，我发现它对我的项目很有用：

[基于集合的 Speed Phreakery：FIFO 库存 SQL 问题](http://www.simple-talk.com/sql/performance/set-based-speed-phreakery-the-fifo-stock-inventory-sql-problem/)：

> 库存表，我们使用它来跟踪库存进出我们想象的库存仓库的轨迹运动。我们的仓库最初是空的，然后由于库存购买 (tranCode = 'IN') 或由于后续退货 (tranCode = 'RET') 而库存移入仓库，当库存移出仓库时它已售出（tranCode = 'OUT'）。每种类型的库存项目都由一个 ArticleID 标识。由于给定项目的购买、销售或退货，库存进出仓库的每次移动都会导致将一行添加到 Stock 表中，由 StockID 标识列中的值唯一标识，并描述有多少添加或删除项目、购买价格、交易日期等。

虽然我在我正在进行的项目中使用它，但我坚持如何让每笔交易“OUT”的收费。我需要有这个值来确定我将向我的客户收取多少费用。

1.  首先在股票中添加 5 个苹果（每个 10.00 美元），总计 50.00 美元

2.  将 3 个苹果（每个 20.00 美元）添加到 8 个苹果的库存中，总价格为 110.00 美元

3.  然后取出 6 件商品（每件 10.00 美元 5 件，每件 20.00 美元 1 件）总计 70 美元

4.  交易完成后，它将留下 2 个苹果，每个 20 美元，总计 40 美元

* * *

```
 Here's my current table
 Item    transaction code    qty     price   
 apple   IN                    5     10.00    
 apple   IN                    3     20.00   
 apple   OUT                   6          

 Manual computation for the OUT transaction price (FIFO)
 QTY     price   total price 
 5       10.00   50.00 
 1       20.00   20.00 
 TOTAL:6         70.00 

 Output of the script:
 Item    CurrentItems   CurrentValue
 apple   2            40.00

 What I need:
 Item    transaction code    qty     price   CurrentItems    CurrentValue 
 apple   IN                    5     10.00   5               50.00 
 apple   IN                    3     20.00   8               110.00 
 apple   OUT                   6             2                   40.00 

 This too will be OK
 Item    transaction code    qty     price   CurrentItems    
 apple   IN                    5     10.00   0               
 apple   IN                    3     20.00   0                
 apple   OUT                   6         70 
```

赢得比赛的脚本非常有用，我希望有人可以帮助我了解如何获得每笔“OUT”交易的价格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:28:15.560

我建议您的表格设计如下：在表格中添加一个新字段，即 qty_out

售前表：

```
Item transaction code    qty     qty_out  price   
 apple   IN                    5    0        10.00    
 apple   IN                    3    0        20.00   
 apple   OUT                   6    null 
```

以及售出这6件物品后的表格：

```
Item    transaction code    qty     qty_out  price   
 apple   IN                    5    5        10.00    
 apple   IN                    3    1        20.00   
 apple   OUT                   6    null 
```

您可以将“qty”与“qty_out”（对于 IN 交易）进行比较以找出价格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:08:22.173

如何构建一个每个产品项目有一行的表，以便为每个苹果插入一行以及它的价格和可用性（未售出/已售出）。
然后，您只需选择与您想要的每种产品相关的价格的前 n 个项目。本质上，您只是创建一个项目队列并从队列的前面（具有最早的插入日期）删除“未售出”的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T05:22:16.863

根据文章，脚本得到的结果是库存的价值。您需要对此进行修改，以便仅使用前 N 项而不是计算所有库存。

我建议使用 CASE 语句来设置每个“IN”中的项目数，因为您知道库存项目和要取出的数量，因此您可以检查运行总数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-26T08:43:13.427

您无法跟踪每个 OUT 事务本身，但您可以通过取最后一个（您要计算的除外）IN 或 OUT 行及其当前值列减去您要计算的当前值来计算它。

在这个例子中

```
StockID  ArticleID  TranDate  TranCode  Items    Price    CurrentItems  CurrentValue
4567     10000      10:45:07  IN          738   245.94             738    181,503.72
21628    10000      12:05:25  OUT         600                      138     33,939.72
22571    10000      14:39:27  IN           62   199.95             200     46,336.62
30263    10000      16:14:13  OUT         165                       35      6,998.25
42090    10000      18:18:58  RET           5                       40      7,998.00
53143    10000      20:18:54  IN          500   135.91             540     75,953.00 
```

对于交易 30263，价格将为 46,336.62 - 6,998.25 = **39,338.37**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-27T16:03:48.013

请参阅 TSQL 中的以下代码。基本思想是

1.  对于每个销售行，假设数量为 Qty，计算当前行之前的运行总销售额，将其命名为 Previous_Sold。

2.  对于步骤 1 中的每个卖出行，找到所有 PREVIOUS 买入行并计算直到该买入的运行总库存，将其命名为 Previous_Running_Stock。

3.  对于步骤 2 中的购买行，计算

Open_Stock = Previous_Running_Stock - Previous_Sold

Close_stock = Previous_Running_Stock - Previous_Sold - 数量。

4.  过滤并仅在以下情况下保留购买行

open_stock >0，表示有足够的​​库存来填写卖单

并且 close_stock < 0，表示购买行的库存全部用完，或最早（第一行），其中 close_stock >= 0，表示从该行购买部分使用。

5.  在步骤 4 中汇总（总和）价格和数量以获得 LIFO 成本。

我相信它也可以很容易地修改为 LIFO 和平均成本。

```
--initial table of trades
item       item_trade_order     direction  unit_price    qty
Apple      1                    buy        10            100
Apple      2                    buy        9             150
Blueberry  1                    buy        5             300   
Apple      3                    sell       12            50
Apple      4                    buy        11            200
Apple      5                    sell       10            350
Blueberry  2                    sell       10            50

--code, using CTE

; with step1 as
(
    select *
        , coalesce(sum(case direction when 'sell' then 1 else 0 end * qty) over(partition by item order by item_order rows between unbounded preceding and 1 preceding), 0) Previous_Sold
    from trade 
)
, step2_3 as
(
    select *
        , Previous_running_stock - Previous_Sold Open_Stock
        , Previous_running_stock - Previous_Sold - qty Close_Stock
        , ROW_NUMBER() over(partition by item, item_order order by (case when Previous_running_stock - Previous_Sold - qty < 0  then null else 0 - item_order end) desc) rnk
    from step1 t1
    cross apply
    (
        select item_order batch_order, price batch_prc, qty batch_qty
            , sum(qty) over(order by item_order rows unbounded preceding) Previous_running_stock
        from trade
        where direction = 'buy'
        and item = t1.item
        and item_order < t1.item_order
    ) batch
    where t1.direction = 'sell'
)
, step4 as
(
    select *
    from step2_3
    where Open_Stock > 0
    and (Close_Stock < 0 or rnk = 1)
)
select item, item_order, direction, AVG(price) prc, AVG(qty) qty
    ,   sum(case when Close_Stock > 0 then batch_qty - close_stock else case when open_stock < batch_qty then open_stock else batch_qty end end * Batch_Prc) / nullif(avg(qty), 0) FifoUnitCost
from step4
group by item, item_order, direction
order by item, item_order 
```

# java - 如何转换 MultiMap 到地图 > 使用番石榴？

> ID：11204143
> 
> 赞同：12
> 
> 时间：2012-06-26T09:15:47.477
> 
> 标签：java, set, guava

我正在使用来自 Google Guava 12 的 MultiMap，如下所示：

```
Multimap<Integer, OccupancyType> pkgPOP = HashMultimap.create(); 
```

将值插入此多重映射后，我需要返回：

```
Map<Integer, Set<OccupancyType>> 
```

但是，当我这样做时：

```
return pkgPOP.asMap(); 
```

它还给我

```
Map<Integer, Collection<OccupancyType>> 
```

我怎样才能返回`Map<Integer, Set<OccupancyType>>`？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-26T10:17:25.367

看看[这个问题并评论 #2，Kevin Bourrillion](http://code.google.com/p/google-collections/issues/detail?id=118#c2)是 Guava 开发负责人：

> 您可以将第一个双重`Map<K, Collection<V>>`转换为原始地图，然后再转换为`Map<K, Set<V>>`您想要的。您将不得不取消未经检查的警告，并且您应该在此时发表评论，*“安全，因为 SetMultimap 保证了这一点。”* 我什至可以更新 SetMultimap javadoc 来提及这个技巧。

所以做未经检查的演员：

```
@SuppressWarnings("unchecked") // Safe because SetMultimap guarantees this.
final Map<Integer, Set<OccupancyType>> mapOfSets = 
    (Map<Integer, Set<OccupancyType>>) (Map<?, ?>) pkgPOP.asMap(); 
```

**编辑：**

从 Guava 15.0 开始，您可以使用[辅助方法](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Multimaps.html#asMap-com.google.common.collect.SetMultimap-)以更优雅的方式执行此操作：

```
Map<Integer, Set<OccupancyType>> mapOfSets = Multimaps.asMap(pkgPOP); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T10:04:38.923

番石榴贡献者在这里：

做不安全的演员。会很安全的。

`Map<K, Set<V>>`由于 Java 继承的工作方式，它不能返回 a 。本质上，`Multimap`超类型必须返回 a `Map<K, Collection<V>>`，并且因为`Map<K, Set<V>>`不是 的子类型`Map<K, Collection<V>>`，所以您不能覆盖`asMap()`以返回 a `Map<K, Set<V>>`。

# javascript - 从 javascript 代码中使用 jsonp

> ID：11204144
> 
> 赞同：2
> 
> 时间：2012-06-26T09:15:52.007
> 
> 标签：javascript, json, jsonp, same-origin-policy

我正在研究 javascript 和 json，我需要从另一台服务器获取我的 json 文件。我已经使用本地 json 文件进行了一些 javascript 测试，但现在我想将所有代码转换为 jsonp，因为我需要处理另一个域上的文件。我的代码是：

```
function jsonEntity()
{
 var richiestaEntity = new XMLHttpRequest();

richiestaEntity.onreadystatechange = function()
{
    if(richiestaEntity.readyState == 4) 
{
        var objectentityjson = {};
        window.arrayEntity= []; //creazione dell'array che conterrà le entity
        objectentityjson = JSON.parse(richiestaEntity.responseText);

        arrayEntita = objectentityjson.cards;

    return arrayEntita;
    }
}
richiestaEntity.open("GET", "myjson.json", true);
richiestaEntity.send(null);
} 
```

如何在不丢失代码结构的情况下使用 jsonp 而不是本地 json？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:24:09.810

JSONP 和 JSON 在幕后的工作方式根本不同。有关更多详细信息，请参阅[我的其他 Stack Overflow 答案](https://stackoverflow.com/questions/3839966/can-anyone-explain-what-jsonp-is-in-layman-terms/3840118#3840118)。

由于 JSONP 的工作方式，**需要**服务器的配合才能将 JSON 响应包装在函数调用中（函数调用的名称通常由`callback`GET 参数指定）；

```
/get_jsonp.php?callback=foo 
```

（应得：

```
foo({
    "foo": "bar"
}); 
```

...在回应中。

**假设**您已经合作，您可以按如下方式更改现有功能；

```
function jsonEntity()
{
   var callbackName = "ajaxCallback";
   var script = document.createElement("script");

   // This bit needs the cooperation of the server, 
   // otherwise `ajaxCallback` won't be called.
   script.src = "myjson.json?callback=" + callbackName;

   window[callbackName] = function (obj) {
       window.arrayEntity = obj.cards;
   }

   document.body.appendChild(script);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:24:16.637

JSONP 的工作方式与 JSON 不同。

使用 JSON，您基本上可以使用 XHR 从您的服务器请求一个文件，解析它并使用结果对象。

使用 JSONP，您可以插入一个`<script>`标签，就像从其他服务器加载库时一样。只是有一些区别：在 URL 中，您传输一个附加参数，即回调函数，并在您的页面上定义该函数。

这可能如下所示。首先我们定义我们的回调：

```
function myCallback( data ) {
  // do some stuff with data
} 
```

然后我们动态插入一个新`<script>`标签来检索数据。

```
<script src="path.to/remote/server.js?callback=myCallback" type="text/javascript"></script> 
```

我们完成了。

服务器现在发送表单的答案

```
myCallback( {"your": "answer", "is": "here" } ); 
```

它调用您的回调函数并启动您的处理。请参阅此处，服务器不是通常的 JSON 响应，而是使用代表 JSON 的对象作为参数对您的回调进行函数调用。

请注意，参数的名称（在我的示例中为“回调”）可能因服务提供商而异。因此，在使用之前查找正确的名称。

需要注意的另一件事是，这仅适用于`GET`请求。您*不能*将此技术用于`POST`请求。

# objective-c - 我们应该避免在两个视图之间推送 segue 循环吗？

> ID：11204149
> 
> 赞同：5
> 
> 时间：2012-06-26T09:16:01.910
> 
> 标签：objective-c, loops, segue

好吧，对你们中的一些人来说，这个问题可能听起来很荒谬，但我正在与我的队友讨论 ios 应用程序的设计，我需要你的意见。

我不同意的旧设计如下

*   我们有 ViewControllerA，其中包含按钮“Go To B”。该按钮有一个 PUSH segue 可以转到 B。
*   我们有 ViewControllerB，其中包含按钮“Go To A”。按钮有一个 PUSH segue 去 A。
*   我们必须在 2 个 ViewController 之间穿梭很多。

如您所见，ViewController A 和 B 之间存在一个 segue 循环，我认为我们不应该让它发生。我宁愿通过导航栏中的“返回”按钮从 B 转到 A。

设计中的 PUSH segue 循环有多严重？在某些情况下可以接受吗？我在哪里可以看到苹果推荐的好设计（如果有的话？）

**编辑：**我尝试了 nfarshchi 的“推前弹出”解决方案，但它不起作用。我就是这样做的：1）我不能同时创建从 VC A 到 VC B 的转场和从 VC B 到 VC A 的转场。故事板似乎阻止了它的发生 2）因此，我从 VC A 到 VC B 中的按钮“Go to B”创建了一个标识符为“gotoB”的 segue，并从按钮“Go to A”创建了一个标识符为“gotoA”的 segue在 VC B 到 VC A。

所以故事板看起来像这样：

VC X ---Push---> VC A <----Push----> VC B （我需要 ViewController X 的原因在后面解释） 3）在 VC AI 中有这个：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"Prepage for segue go to B") ;
    if ([[segue identifier] isEqualToString:@"gotoB"] ) {
        [self.navigationController popViewControllerAnimated:NO];

    }
} 
```

我需要 VC X，因为如果堆栈中只有一个 ViewController，我无法从 Stack 中弹出 ViewController。

现在看来是对的，但是当我单击“转到 B”时，它转到了 VC X。很明显，上面的 popViewControllerAnimated: 已经弹出 VC A，仅此而已，对 VC B 的 segue 不再被触发。结果是 VC B 没有按预期推入堆栈。

因此我认为实施 nfarshchi 的解决方案是不可行的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:05:48.830

你可以这样做，但考虑到当你推出 a`UIViewController`并再次推出它时，你会调用很多方法来重新设计它。如果你想在他们身上移动很多，最好使用`UINavigationController`. 在这种情况下，您只需制作一次，就可以轻松地在它们之间导航。这将使用更少的系统资源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:36:11.907

只有当转换创建的虚拟 2D 空间是真实的时，才应使用 push/pop 转换。如果用户连续看到 10 次推送转换，会感觉他们越来越深入到层次结构中，这可能会导致混乱和不良的心理模型，尤其是当您实际上只是在两个视图控制器之间移动时。

使用后退按钮将是一个更好的解决方案，或者您可以制作自己的自定义过渡，让用户更清楚正在发生的事情。也许反向过渡也是合适的。

# django - Django Social-auth 返回 URLError

> ID：11204154
> 
> 赞同：0
> 
> 时间：2012-06-26T09:16:22.317
> 
> 标签：django, facebook, twitter, django-socialauth

我正在为我的应用程序使用 django social-auth 身份验证。从我的应用程序登录到 facebook 或 twitter 后，它返回错误

`URLError at /complete/facebook/`

`Exception Value: <urlopen error Tunnel connection failed: 403 Forbidden>`

`Exception Location: /usr/lib/python2.6/urllib2.py in do_open, line 1145`

添加了后端、url、Appid 和秘密 ID。它连接正确，但返回错误

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:50:14.020

似乎您的问题已解决[https://www.pythonanywhere.com/forums/topic/148/](https://www.pythonanywhere.com/forums/topic/148/)？

# c++ - C++中的VS2010调试器，“unused=???”的意思 或“未使用=0”

> ID：11204157
> 
> 赞同：8
> 
> 时间：2012-06-26T09:16:33.907
> 
> 标签：c++, visual-studio-2010, debugging, remote-debugging

在 Visual Studio 2010（C++，非托管）中调试，信息是什么`unused ???`或`unused 0`应该是什么意思？我附上了两个屏幕截图，孩子是`HWND`现有窗口的一个。

我也很困惑，`HWND`有时显示为“未使用”，有时显示为“0”。当有一个指向未分配内存的指针时，我会理解这种情况，但在我的特殊情况下，窗口已经创建并且有效。

![VS2010未使用=？？？](../Images/4f890a142059f29866dc42ab18bea019.png)

![VS2010 未使用=0](../Images/262884a701a5025ee766af92401b9d29.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T09:56:29.087

这可以追溯到九十年代初，当时只有一个 HANDLE 作为类型来声明任何 Windows 对象的句柄。这是一个错误工厂，程序员可以摸索代码，例如，在需要窗口句柄的地方传递一个字体句柄。所以后来添加了 STRICT 宏，它重新声明了句柄类型，因此混合会产生编译器错误。在 winnt.h 中看起来像这样，针对内容进行了编辑：

```
#ifdef STRICT
   typedef void *HANDLE;
   #define DECLARE_HANDLE(name) struct name##__{int unused;}; typedef struct name##__ *name
#else
   typedef PVOID HANDLE;
   #define DECLARE_HANDLE(name) typedef HANDLE name
#endif 
```

示例用法：

```
DECLARE_HANDLE(HWND); 
```

struct 宏汤确保当 STRICT 打开时，HFONT 永远不能用于预期 HWND 的地方，它会在结构类型上产生类型不匹配。

您现在可以看到“未使用”的来源。它实际上是未使用的，只有 Windows 可以创建句柄值。它在调试器中很有帮助，因为它可以让您查看句柄值，0 或 -1 肯定是有问题的迹象。

[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383731%28v=vs.85%29.aspx)中有关 STRICT 的更多信息。

# javascript - jQuery与iframe和父级冲突

> ID：11204158
> 
> 赞同：0
> 
> 时间：2012-06-26T09:16:34.797
> 
> 标签：javascript, jquery, html, jquery-plugins

我正在使用 jQuery 加载函数将外部页面（在我的域中相同）加载到 div 中。两个页面也将具有单独的角色，即子页面有自己的功能（作为单独的页面工作），它也将加载到 div 中。页面结构为

第 1 页（父）

```
<html>
<head>
<script>JQUERY HERE</script>
</head>
<body>
<div id="to_load_second_page"></div>
</body>
</html> 
```

第二页

```
<html>
<head>
<script>JQUERY HERE</script>
</head>
<body>
<div id="contents"></div>
</body>
</html> 
```

单独两个页面都工作正常。但是一旦在第一页的 div 中加载第二页后，第一页的 jQuery 函数就不起作用了。

我认为当子页面再次加载到第二页时，jQuery.js 会被添加到父页面中。但是我们不能避免加载这个 jquery.js，因为子页面也需要单独运行，因为需要 jquery.js。

请帮助如何解决这个问题

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:58:36.137

当使用 jQuery`.load()`将内容附加到现有元素时，您不想获取整个 HTML 文档，而只想获取要注入现有页面的新标记。但是请注意，jQuery 将确保`<script>`获取的 HTML 片段*中的标签在全局上下文中*执行（“第 1 页”的上下文中，您已经有 jQuery 可用！）因此您可以像这样组织第 2 页的内容：

```
<div id="contents"><!-- Contents here --></div>
<script>
    /* JS you want to execute - but don't include jQuery.js here - 
       it's already available and including it again will overwrite the
       existing object, making any plugins originally included unavailable!
     */
</script> 
```

# excel - 在VB中使用时间的麻烦

> ID：11204160
> 
> 赞同：0
> 
> 时间：2012-06-15T05:00:01.927
> 
> 标签：excel

我正在尝试执行一个非常简单的任务。使用 VB 将小时添加到单元格值。

作为工作表中的公式，`="D3+TIME(1,0,0)"`，效果很好。我在 VB 中尝试了以下以及变体，但到目前为止没有任何效果：

```
Cells(x, y).Value = Cells(x, y).Value + Time(1, 0, 0) 
```

返回类型不匹配错误。

```
Cells(X, Y).Value = Hour(Cells(X, Y).Value) + 1 
```

无论单元格（x，y）中有什么，都会返回 12:00:00。任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:17:50.327

尝试这个：

```
Cells(x, y).Value = Cells(x, y).Value + TimeSerial(1, 0, 0) 
```

[时间序列（MSDN）](http://msdn.microsoft.com/en-us/library/ws25fd2z%28v=vs.80%29.aspx)

# c# - 哪一个更适合 NHibernate 集合映射？

> ID：11204164
> 
> 赞同：2
> 
> 时间：2012-06-26T09:16:57.060
> 
> 标签：c#, nhibernate, orm, collections, mapping

NHibernate 中有以下类型的集合映射：

```
Set
List
Bag
Idbag
Map
Array 
```

哪个更好用，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T09:23:13.063

没有好的或坏的集合。它们用于不同的目的。

例如，如果你有独特的元素，你应该使用 set。

你可以从[这里开始](http://sdesmedt.wordpress.com/2006/09/04/nhibernate-part-4-mapping-techniques-for-aggregation-one-to-many-mapping/)

# emacs - 通过登录服务器（多跳 ssh）在 emacs 中的流浪模式

> ID：11204165
> 
> 赞同：2
> 
> 时间：2012-06-26T09:16:58.050
> 
> 标签：emacs, ssh, tramp

如何在 emacs 中完成多跳 ssh 会话，如下例所示，

```
ssh -t username@login-server -t ssh username@my-institute-computer 
```

使用流浪者模式？Mx f RET 然后 "/ssh: -t ..." 似乎不正确

感谢您的帮助！

* * *

编辑：似乎添加

```
Host my-institute-computer
ProxyCommand ssh login-server nc my-institute-computer 22 
```

到 ~/.ssh/config 使得在 emacs 中的输入成为可能，我被要求输入两次密码。但是，现在我收到“权限被拒绝（公钥，键盘交互）”。你知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:17:23.970

对我来说最好的解决方案是使用 emacs

```
(add-to-list 'load-path "~/.emacs/tramp/lisp/")
  (require 'tramp)
(add-to-list 'tramp-default-proxies-alist
         '("destiny.server" nil "/ssh:username@login.server:")) 
```

在 .emacs 文件中添加（如[我如何使用 Emacs Tramp 来双跳 ssh 中所建议的那样？](https://stackoverflow.com/questions/715855/how-can-i-use-emacs-tramp-to-double-hop-ssh)）。

首先，我遇到的问题是我的 tramp-version 不支持 tramp-default-proxies-alist。更新后（[http://ftp.gnu.org/gnu/tramp/](http://ftp.gnu.org/gnu/tramp/)）一切正常。现在 Mx f RET 然后 "/ssh:username@destiny.server:" 进入登录服务器后面的远程服务器就足够了。

# web-config - 我可以在我的 NuGet 包中包含 web.release.config.transform 吗？

> ID：11204166
> 
> 赞同：7
> 
> 时间：2012-06-26T09:17:03.003
> 
> 标签：web-config, nuget, web-config-transform, slowcheetah

我们使用 SlowCheetah 配置转换来管理配置，所以在我的每个网络应用程序中我都有：

```
> Web.config
  >  Web.debug.config
  >  Web.release.config 
```

我想在 NuGet 包中包含一个 appSetting 转换元素，该元素将在安装包时添加到 Web.release.config 文件中（然后在项目实际以发布模式打包时*应用）*

按照使用文件转换实际`web.config`文件的方法`web.config.transform`，我尝试将`NuGet\Content\web.release.config.transform`文件添加到我的 NuGet 包中，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
 <appSettings>
  <add key="apiUsername" value="my_user" xdt:Transform="Replace" xdt:Locator="Match(key)" />
  <add key="apiPassword" value="my_pass" xdt:Transform="Replace" xdt:Locator="Match(key)" />
 </appSettings>
</configuration> 
```

不工作。web.config 文件被转换，但 web.*.config 文件没有被修改：

```
Attempting to resolve dependency 'NewtonSoft.Json (≥ 4.5.7)'.
Successfully installed 'Newtonsoft.Json 4.5.7'.
Successfully installed ''MyProject.Package 1.0.7409-unstable'.
Successfully added 'Newtonsoft.Json 4.5.7' to FortKnox.Web.
'web.debug.config' already exists. Skipping...
'web.release.config' already exists. Skipping...
Successfully added 'MyProject.Package 1.0.7409-unstable' to MyThing.Web 
```

有任何想法吗？

# web-services - 如何自定义 spring 3.0 json 响应？

> ID：11204167
> 
> 赞同：1
> 
> 时间：2012-06-26T09:17:13.547
> 
> 标签：web-services, spring-mvc

我正在使用 spring 3.0 网络服务。它产生一个 json 响应。

我想使用相同的 web 服务生成 jsonp 响应。

请建议如何自定义 spring 3.0 webservices json 响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:57:42.373

您可以尝试将 Jackson 集成到您的项目中，该项目有大量的 JSON 序列化选项。配置 Jackson 很简单：

```
<bean
    class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="order" value="0" />
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
        </map>
    </property>
    <property name="defaultViews">
        <list>
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
        </list>
    </property>
</bean> 
```

一旦你得到这个工作，你可以在你的模型对象上使用 Jackson 的优秀注释来配置它们如何在 JSON 中打印，或者它们是否被忽略 (@JSONIgnore)。

如果你想更进一步，你可以用你自己的扩展 org.springframework.web.servlet.view.json.MappingJacksonJsonView 类，然后发疯。

希望这可以帮助。

# ruby-on-rails - 如何以智能的方式从多维数组中“提取”值？

> ID：11204168
> 
> 赞同：13
> 
> 时间：2012-06-26T09:17:22.190
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, multidimensional-array

我正在使用 Ruby on Rails 3.2.2 和 Ruby 1.9.2。

给定以下多维`Array`：

```
[["value1", "value1_other"], ["value2", "value2_other"], ["value3", "value3_other"]] 
```

我想得到（*注意*：我只想“提取”所有“嵌套”`Array`的第一个值）：

```
["value1", "value2", "value3"] 
```

*我怎样才能以聪明的方式做到这一点？*

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-26T09:19:11.397

您可以使用[`Array#collect`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-collect)为外部数组的每个元素执行一个块。要获取第一个元素，请传递一个索引数组的块。

```
arr.collect {|ind| ind[0]} 
```

正在使用：

> ```
> arr = [["value1", "value1_other"], ["value2", "value2_other"], ["value3", "value3_other"]]
> => [["value1", "value1_other"], ["value2", "value2_other"], ["value3", "value3_other"]]
> arr.collect {|ind| 工业[0]}
> => ["value1", "value2", "value3"]
> 
> ```

而不是`{|ind| ind[0]}`，您可以使用[`Array#first`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-first)来获取每个内部数组的第一个元素：

```
arr.collect(&:first) 
```

有关`&:first`语法，请阅读“ [Ruby/Ruby on Rails & 和冒号快捷方式](https://stackoverflow.com/questions/1961030/ruby-ruby-on-rails-ampersand-colon-shortcut)”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:20:21.683

```
>> array = [["value1", "value1_other"], ["value2", "value2_other"], ["value3", "value3_other"]]
=> [["value1", "value1_other"], ["value2", "value2_other"], ["value3", "value3_other"]]
>> array.map { |v| v[0] }
=> ["value1", "value2", "value3"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-25T20:24:19.620

```
arr = [["value1", "value1_other"], ["value2", "value2_other"], ["value3", "value3_other"]]

Solution1 = arr.map {|elem| elem.first}

Solution2 = arr.transpose[0] 
```

# javascript - 关闭 colorBox 时重新加载父窗口

> ID：11204169
> 
> 赞同：1
> 
> 时间：2012-06-26T09:17:22.897
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, colorbox

抱歉，我对 java-script 知之甚少。我有一个应用程序，其中注册表单在一个颜色框中打开并成功注册，我们在另一个颜色框中显示欢迎消息。

当用户关闭任何颜色框但不确定如何执行此操作时，我需要重新加载父页面。js 和 HTML 由第三方提供，所以无法更改那里的文件，在查看那里的代码后，我发现了以下代码

```
function inlineLightbox(h) {
    jQuery.colorbox({
        opacity: 0.6,
        inline: true,
        href: h,
        onOpen: function() {
            jQuery('#colorbox').addClass('inline');
        },
        onComplete: function() {
            jQuery('#colorbox a.close, #colorbox a.btn-close').click(function() {
                jQuery.colorbox.close();

    jQuery('#product-popup-help').removeClass('active'); jQuery('#product-editors-notes').addClass('active');
                return false;
            });
        }
    });
} 
```

需要在覆盖层中显示其数据的`h`那个在哪里。有没有办法在我自己的 HTML 文件中编写代码，以便当用户关闭这些覆盖层时，我甚至可以捕获关闭并重新加载父窗口？`id``div`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:19:37.757

尝试这个：

```
$(document).bind('cbox_closed', function(){
    location.reload();
}); 
```

# php - 如果价格为 0.00 英镑，则 Magento 的默认措辞

> ID：11204174
> 
> 赞同：0
> 
> 时间：2012-06-26T09:17:33.500
> 
> 标签：php, magento

我的 wordpress 网站中有一系列产品。

它们是可配置产品，每种产品的价格不同，但持有它们的主要可配置产品价格为 0.00 英镑。

在产品页面上，它首先显示 0.00 英镑，直到从更改价格的下拉列表中选择一个选项。

我的问题是，如果价格为 0.00 英镑，可能会有一些默认措辞，但如果选择了一个选项，它将显示价格。

我正在考虑类似`if`声明，以查看价值是否为 0.00 英镑，显示“选择一个选项”，但如果从下拉列表中选择产品，它将将该措辞更改为所选产品的价格，这是目前的默认值。

我确实显示了不含增值税和含增值税，因此需要它们都具有相同的功能。

目前 Excl Vat 正在使用

`<?php if ($_finalPrice == $_price): ?> <?php echo $_coreHelper->currency($_price, true, false) ?> <?php else: ?> <?php echo $_coreHelper->currency($_finalPrice, true, false) ?> <?php endif; ?>`

含增值税是

`<?php echo $_coreHelper->currency($_finalPriceInclTax, true, false) ?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:15:28.847

我使用以下代码找到了解决此问题的方法：

`<?php if($_product->price==0): ?> <?php echo '<span class="price-excluding-tax-2588">Choose an option from below</span>'; ?> <?php else: ?> <?php echo $this->getPriceHtml($_product, true) ?> <?php endif; ?>`

# android - HelloJNI Android 'java.lang.UnsatisfiedLinkError: stringFromJNI'

> ID：11204175
> 
> 赞同：0
> 
> 时间：2012-06-26T09:17:36.937
> 
> 标签：android, java-native-interface

我在谷歌上搜索了很多问题的解决方案，但我发现了任何对我有帮助的东西。我是一名 Android 初学者，对 Android NDK 中的 HelloJNI 示例有疑问。

我使用 Eclipse 并将`hello-jni.c`文件以及我的 Android 项目`Android.mk`的文件夹中。`jni/`然后我将`Hellojni.java`文件放入`src/`包中的文件夹中。`ndk-build`我可以使用该工具构建代码。所以我得到了`hello-jni.so`放入`libs/armeabi`.

一切似乎都很好。在 Android 项目的主要活动中，我可以创建一个`Hellojni`like的对象`Hellojni x = new Hellojni();`。但是当我尝试打开函数时，会出现`stringFromJNI`我`x.stringFromJNI();`在本主题标题中写的错误。

有什么问题吗？不幸的是，该项目的源代码在另一台计算机上，因此很难将其放在这里。但我可以尝试这样做，以防你需要它给我一个提示。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:23:19.383

你有没有像这样调用原生库？

```
System.loadLibrary("hello-jni.so"); 
```

# c# - 如何在 MongoDB 中缓存一些临时数据？

> ID：11204176
> 
> 赞同：3
> 
> 时间：2012-06-26T09:17:41.097
> 
> 标签：c#, caching, mongodb, mongodb-.net-driver, 10gen-csharp-driver

我有一些客户端-服务器应用程序。作为其中的一部分，我需要在客户端实现一种分页方法。我在服务器端从 db *（我使用 MongoDB 和 10gen 的驱动程序）*制作数据足迹，然后根据客户端的请求提供部分足迹。

我在存储足迹时遇到问题。我不能将它作为局部变量存储在服务器上，因为它在完成方法后根本不保存任何数据。我发现足迹数据可以存储为 MongoDB 缓存。但我不知道它是如何工作的。

谷歌搜索对我没有任何进展。那么任何人都可以解释我如何在 C# 中实现这个 MongoDB 缓存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:59:01.123

根据塞尔吉奥和克雷格在对我的问题的评论中的回答，我认为在 MongoDB 中“缓存”某些数据的最简单方法是创建单独的集合来存储数据。或者（如果它不是一个选项，就像我的情况一样）使用内置的 ASP.NET 缓存。

# python - 如何使用 DELETE 方法和 python 在 pycurl 中添加参数

> ID：11204177
> 
> 赞同：2
> 
> 时间：2012-06-26T09:17:44.890
> 
> 标签：python, api, rest, restful-url, pycurl

我有下一个代码来执行 HTTP DELETE METHOD 以测试 RESTful API，它工作正常，但现在我可以添加一些参数。我已经阅读了如何做到这一点，但迄今为止我无法解决问题

任何建议。

这是执行此操作的代码的一部分

```
elif (method == 'DELETE'):
   curl.setopt(pycurl.CUSTOMREQUEST, 'delete')
   if(parameters != None):
      //Here I would like to do it. 
```

我读过一些说使用 CURLOPT_POSTFIELDS 的帖子，但我不确定如何使用它。谢谢

# javascript - 我将如何使用 darw2d 和 graphiti 绘制流程图？

> ID：11204178
> 
> 赞同：0
> 
> 时间：2012-06-26T09:17:46.647
> 
> 标签：javascript, raphael, draw2d

这是链接：[http ://www.draw2d.org/draw2d/](http://www.draw2d.org/draw2d/)

我想使用draw2d库在上面的链接中创建流程图，现在问题是它不是开源的并且是付费的，但是在购买这个产品之前我有一些疑问：

-想要确认许可。

-想知道他们提供的支持。

-在购买产品之前需要知道我是否可以先使用试用版。

如果有人知道如何联系他们，请告诉我，非常紧急。

提前致谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:58:54.877

许可证是双重的：GPL 和商业支持：是的 - 我们提供支持，但我们的人力有限。试用：没有。该软件的价格在 4 美元到 10 美元之间。

问候

# javascript - 我们可以将fadeOut方法存储在一个变量中吗

> ID：11204179
> 
> 赞同：0
> 
> 时间：2012-06-26T09:17:48.800
> 
> 标签：javascript, jquery

我有一个 jquery 滑块功能，我想自定义它。我的要求是我想在变量中存储淡出效果，但我不知道。我花了一些时间在互联网上寻找解决方案，但没有找到解决方案。所以有任何解决方案。如果是，请告诉我这对我很有帮助。

```
var mYname=fadeOut(500) 
```

或者

```
if (option[12]/*prevNext*/) eA[fadeOpacity ? 'fadeIn' : 'fadeOut' ](fadetime); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:50:45.033

如果您的要求仅针对该行，则不必将 fadeOut 函数保存在变量中，因此您可以将行更改为

```
if (option[12]/*prevNext*/) fadeOpacity ? fadeIn(fadetime) : fadeOut(fadetime); 
```

或者如果要将函数存储在变量中，则只需将函数名称分配给变量。您在问题中所做的方式将调用该函数并将返回值分配给变量，而不是您可以这样做

```
var mYname=fadeOut; 
```

然后你可以用它来打电话

```
mYname(500); 
```

# javascript - 我们可以在 java 脚本验证函数中包含 jquery 吗？

> ID：11204182
> 
> 赞同：0
> 
> 时间：2012-06-26T09:17:54.077
> 
> 标签：javascript, jquery

我有一个 JavaScript 验证函数和一个 jquery 进度条。onclick 一个按钮，它正在做一些验证，然后在后台进行一些长的数据库查询。我希望在这个查询进行时有一个进度条，以及在后台进程开始之前执行的 JavaScript 函数。这是它调用 JavaScript 函数的地方

```
<input name="btnPublish" class="button1" type="button" id="btnPublish" value="Publish" onClick="disableActiveButtons()"> 
```

我的jQuery就像::

```
$('#btnPublish').click(function() { 
                     var val = 0;
                     var interval = setInterval(function(){ 
                     val = val+1;    
                     $('#pb').progressbar({ value: val});   
                     $('#percent').text(val + '%'); 
                     if(val == 100){
                         clearInterval(interval);
                        }
                     }, 50);
                     }); 
```

我可以在 JavaScript 验证函数中包含这个 jquery 以便它们都可以工作吗？如果不是，我应该如何实现，以便我也有进度条和 JavaScript 验证？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:39:20.423

要从您的 JQuery onClick 中调用 javascript 函数，您可以：

从输入标签中删除 onclick 属性：

```
<input name="btnPublish" class="button1" type="button" id="btnPublish" value="Publish"> 
```

并将函数称为：

```
$('#btnPublish').click(function() { 

                 if(!disableActiveButtons()) 
                     return false; //cancel the event if validation failed , else continue 
                 var val = 0;
                 var interval = setInterval(function(){ 
                 val = val+1;    
                 $('#pb').progressbar({ value: val});   
                 $('#percent').text(val + '%'); 
                 if(val == 100){
                     clearInterval(interval);
                    }
                 }, 50);
                 }); 
```

希望这可以帮助。

# php - PHP 上传文件类型

> ID：11204187
> 
> 赞同：1
> 
> 时间：2012-06-26T09:18:10.593
> 
> 标签：php, file

我目前正在为正在构建的站点构建文件上传器，但文件类型有问题，我需要它能够上传 html、css、javascript、json 文件，但不能上传 PHP 等。我的问题是我似乎不能找出文件类型名称。有关更多详细信息，请参见下文。

```
<?php
 if (($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
{
if ($_FILES["file"]["error"] > 0)
  {
  echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
  }
 else
  {
  echo "Upload: " . $_FILES["file"]["name"] . "<br />";
  echo "Type: " . $_FILES["file"]["type"] . "<br />";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
 echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

  if (file_exists("upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $_FILES["file"]["name"]);
  echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
  }
   }
  }
  else
  {
  echo "Invalid file";
  }
?> 
```

它有图像/jpeg 的地方，我试过 .html 和 html 都无济于事，还有 .js 等，我就是想不通！帮助！！！:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:23:14.827

如果您指的是：

```
echo "Type: " . $_FILES["file"]["type"] . "<br />"; 
```

这是哑剧类型。如果要查看文件扩展名，则必须解析文件名本身。例如：

```
$ext = substr(strrchr($_FILES["file"]["name"], '.'), 1); 
```

要允许/禁止，最好使用 switch：

```
switch ($_FILES["file"]["type"]) {
    case 'image/jpeg':
    case 'image/gif':
        // Allowed
    break;
    default:
        // Not allowed
    break;
}

switch ($ext) {
    case 'jpeg':
    case 'gif':
    case 'jpg':
        // Allowed
    break;
    default:
        // Not allowed
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:27:56.843

我可以建议一种不同的方法吗？

不要依赖文件类型，而是检查扩展名。

这方面的小例子是：

```
$parts = array();
$parts = explode( ".", $_FILES['file']['name'] );

if ( !empty($parts) && is_array($parts) ) {
    $extension = end( $parts );
} else {
    echo "File name has no extension";
}

if ( $extension == "jpg" || $extension == "jpeg" ) {
    // Do something with the jpeg
} elseif ( $extension == "html" ) {
    // Do something with html
} elseif ( $extension == "js" ) {
    // Do something with js
} else if ( ... /* You can add any conditional based on extension here */ ) {
    // And do whatever you want here
} 
```

这是一个带有多个 if / elseif 语句的基本粗略示例，您可以创建一个 switch 条件，创建一个工厂类等......但想法保持不变。

干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-10T06:52:37.023

依赖客户端文件类型是不安全的`$_FILES`，最好从文件内容中获取。

```
function mime_type($file_path)
{
    if (function_exists('finfo_open')) {            
        $finfo = new finfo(FILEINFO_MIME_TYPE, null);
        $mime_type = $finfo->file($file_path);
    }
    if (!$mime_type && function_exists('passthru') && function_exists('escapeshellarg')) {
        ob_start();
        passthru(sprintf('file -b --mime %s 2>/dev/null', escapeshellarg($file_path)), $return);
        if ($return > 0) {
            ob_end_clean();
            $mime_type = null;
        }
        $type = trim(ob_get_clean());
        if (!preg_match('#^([a-z0-9\-]+/[a-z0-9\-\.]+)#i', $type, $match)) {
            $mime_type = null;
        }
        $mime_type = $match[1];
    }
    return $mime_type;
} 
```

# javascript - Javascript window.onload 在 IE 中不起作用

> ID：11204188
> 
> 赞同：0
> 
> 时间：2012-06-26T09:18:14.783
> 
> 标签：javascript

我编写的代码应该在用户打开页面时清除表单。它在 FF 中工作，但在 IE 中不工作，知道为什么吗？

```
window.onload = clearForm()

  function clearForm() 
 {  

("load event detected!");  

 }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:19:27.877

这一行：

```
window.onload = clearForm() 
```

***调用*** `clearForm`然后将其返回值分配给`window.onload`，就像`x = foo();`调用`foo`并将结果分配给`x`. 删除括号：

```
window.onload = clearForm 
```

* * *

另外，我强烈建议*不要*依赖[自动分号插入](http://ecma-international.org/ecma-262/5.1/#sec-7.9)的恐怖。始终提供所有必需的分号：

```
window.onload = clearForm; 
```

（有趣的是，你*不需要*在你的结尾的`function clearForm() { ... }`那个，因为那是一个函数声明，而不是一个声明。不过它是无害的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:21:50.803

更改`window.onload = clearForm()`为`window.onload = clearForm;`否则因为`()`您将函数的结果分配给`window.onload`

# xpath - Axis 2 Web 服务上的 AXIOMXPath 没有结果

> ID：11204190
> 
> 赞同：0
> 
> 时间：2012-06-26T09:18:23.080
> 
> 标签：xpath, axis2, axiom

我正在使用 ServiceClient 对象（不生成客户端代码）从 Java Axis 2 客户端调用 SharePoint 2010 Web 服务。

我需要用xPath查询结果，以便在以后的开发中得到结果代码和其他数据。

我无法使用 AXIOMXPath 获得结果...

这是 Web 服务调用的结果：

```
<CopyIntoItemsResponse xmlns="http://schemas.microsoft.com/sharepoint/soap/">
    <CopyIntoItemsResult>0</CopyIntoItemsResult>
    <Results>
        <CopyResult ErrorCode="Success" DestinationUrl="http://mss2010-vm1/siteBdL/GED/obligations/obli_interne.pdf">
        </CopyResult>
    </Results>
</CopyIntoItemsResponse> 
```

我的代码：

```
OMElement result = client.sendReceive(copyService);

if (result != null) {
    AXIOMXPath xpathExpression = new AXIOMXPath("/CopyIntoItemsResponse/Results/CopyResult/@ErrorCode"); 

    xpathExpression.addNamespace("", "http://schemas.microsoft.com/sharepoint/soap/");

    Object node = xpathExpression.selectNodes(result); 

    if (node != null) {
      OMAttribute attribute = (OMAttribute) node; 

      if (attribute.getAttributeValue().equals("Success")) {
        succeeded = true;
      }
    }
} 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:22:40.713

我在这里看到两件事可能会导致问题：

*   编译 XPath 表达式时，您将命名空间绑定到空前缀。Jaxen（这是 Axiom 使用的 XPath 实现）允许这样做，但这是不常见的，不推荐。XSLT 等 XML 规范不允许这样：在 XSLT 中，出现在 XPath 表达式中的非限定名称总是被解释为没有名称空间的名称，即使范围内有默认名称空间。`@ErrorCode`在您的情况下，XPath 表达式的一部分可能存在问题。预计会匹配`ErrorCode`没有命名空间的属性，但我认为这`@ErrorCode`实际上意味着具有本地名称`ErrorCode`和命名空间的属性`http://schemas.microsoft.com/sharepoint/soap/`（我在这里不是 100% 确定；我必须查阅 XPath 规范）。
*   XPath 表达式中的第一个`/`匹配包含上下文节点的树的根节点（即传递给的节点`selectNodes`）。这样做的结果`sendReceive`很可能是一个包含整个 SOAP 消息的文档节点。为避免该问题，请创建一个新文件`OMDocument`并将结果添加`sendReceive`到该文档或`self::CopyIntoItemsResponse/...`用作 XPath 表达式。

# c# - 通过jquery调用asmx文件时出错

> ID：11204191
> 
> 赞同：1
> 
> 时间：2012-06-26T09:18:25.143
> 
> 标签：c#, jquery, ajax, web-services, asmx

当我尝试在同一个解决方案中访问服务时，webservice 正在返回结果。但是当我上传这个网络服务并尝试访问时，就会出现错误。

```
 var _postData = '{lat:"42.28684519999999",lang:"-83.05254932"}';
        $.ajax({
            url: 'http://geo.xyz.com/Service.asmx/GetGeoLocationListByLatLang',
            data: _postData,
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                alert(data.d);
                //                    $.each(data, function (i, item) {

                //                        alert(i);
                //                    });
                //Result(data);
                //                    alert(data.d);
                //                    var obj = $.parseJSON(data.d);
                //                    alert(obj);
            },
            error: function (request, status, error) {
                alert(request.responseText);
                alert(error);
                alert(status);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:20:49.523

您违反了内置浏览器的[同源策略限制，这会阻止您发送跨域 AJAX 请求。](http://en.wikipedia.org/wiki/Same_origin_policy)这是一个[很好的指南](http://usejquery.com/posts/the-jquery-cross-domain-ajax-guide)，涵盖了不同的可能解决方法。但是由于您需要使用 POST，因此在此阶段您的选择非常有限。我想您域上的服务器端代理充当桥梁并将调用委托给远程域将是最好的解决方案。

# javascript - 遍历父 Div 并更改 Div 子类名称

> ID：11204196
> 
> 赞同：0
> 
> 时间：2012-06-26T09:18:47.340
> 
> 标签：javascript, jquery

我正在编写一些代码来计算 Div 子项的数量，然后根据循环迭代，我想要一个新的 div 类名，例如“.ClassName”+ i。我正在尝试使用 Jquery 执行此操作，但由于某种原因它无法正常工作。

```
<div class="Parent">

    <div class="Percentage">
    <pe:Percentage runat="server" />
    </div>

    <div class="Percentage">
    <pe:Percentage runat="server" />
    </div>

    <div class="Percentage">
    <pe:Percentage runat="server" />
    </div>

</div>

$(document).ready(function() {

    $(".Percentage").each(function(i, val) {
        alert(val.innerHTML);
        $("#Parent .Percentage").removeClass(".Percentage").addClass(".Percentage" + i); 
        alert(val.innerHTML);

    });

    //        var count = $('.Percentage').length;
    //        alert(count);
    //        percentageCount();

}); 
```

这样做的好方法是什么？

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:21:04.477

试试这个，**[现场演示](http://jsfiddle.net/rajaadil/h5mhj/1/)**

```
$(".Percentage").each(function(i, val) {

    $(this).removeClass("Percentage").addClass("Percentage" + i);

}); 
```

添加或删除类时不应该给出点

removeClass(".Percentage")**应该是 removeClass("Percentage")**

addClass(".Percentage" + i); **应该是 addClass("Percentage" + i)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:23:26.480

1.  删除点
2.  Parent 是类名而不是 id
3.  您不需要 foreach 来执行此操作

    $(".Parent .Percentage").removeClass("Percentage").addClass("Percentage" + i);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:26:18.663

尝试这个

```
 $(".Parent .Percentage").each(function(i,val)
            {
                $(this).removeClass('Percentage').addClass("Percentage"+i);
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:20:48.383

我认为应该是

```
$(".Percentage").each(function(i, val) {
        $(this).removeClass("Percentage").addClass("Percentage" + i); 
    }); 
```

（添加或删除类时没有“.”，只有类名）

更好的性能，使用经典`for`而不是`each`：

```
var $percentageElements = $(".Percentage");
for(var i = O; i< $percentageElements.length; i++){
 var $percentage = $percentageElements.eq(i);
 $percentage.removeClass("Percentage").addClass("Percentage" + i);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:23:17.603

我认为您应该首先添加新类，然后只删除旧类。演示在[http://jsfiddle.net/KV7BZ/](http://jsfiddle.net/KV7BZ/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T09:27:28.747

您可以使用`$(this)`代替`$("#Parent .Percentage")`和删除`.`（点），因为您已经在处理类。

所以

```
$("#Parent .Percentage").removeClass(".Percentage").addClass(".Percentage" + i); 
```

应该：

```
$(this).removeClass("Percentage").addClass("Percentage" + i); 
```

# citrix - 增加xen服务器的本地存储

> ID：11204197
> 
> 赞同：0
> 
> 时间：2012-06-26T09:18:50.623
> 
> 标签：citrix, xen

我已经配置了 xen 服务器和马拉松曾经运行过。我们购买的戴尔系统有 1200 GB 硬盘。xen server 安装后，xe server 1 上显示 270 GB 作为本地存储。如何在 xen server 1 上添加剩余的 900 GB 作为本地存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:17:09.313

If your xen server has linux installed on it , then can you check output of "cat /proc/partitions" ? This should give you the current disk partitions.

Example : In my case it is something like this :-

```
# cat /proc/partitions 
major minor  #blocks  name

   8        0  143339962 sda
   8        1     104391 sda1
   8        2   16386300 sda2
   8        3    1052257 sda3 
```

This gives you the disk name being recognized (/dev/sda) here. Further check the output of fdisk -l .

Example: In my case it is something like this :-

```
fdisk  -l /dev/sda

Disk /dev/sda: 146.7 GB, 146780121600 bytes
255 heads, 63 sectors/track, 17845 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1          13      104391   83  Linux
/dev/sda2              14        2053    16386300   83  Linux
/dev/sda3            2054        2184     1052257+  82  Linux swap / Solaris 
```

This indicates i have all the space after cylinder 2184 as empty/unused.

If similar is the case , you can use fdisk and partprobe to create extended partition on the remaining unused portion of your disk and mount it on your machine (after creating filesystem on it).

# php - 数据库未在“获取”PHP 上更新

> ID：11204199
> 
> 赞同：0
> 
> 时间：2012-06-26T09:19:05.813
> 
> 标签：php, mysql

我有一个查询页面，该查询会将表设置为 0 或 1。设置为 1 有效，但不会设置回 0。这是到目前为止的代码片段。任何人都可以看到有什么问题吗？

页：

```
<p><? if($_SESSION['user_level'] >= GUARDIAN_LEVEL) { if ($row_settings['profile_list'] == 0) {?> 
                    <a onclick='$.get("dos.php",{ cmd: "sprofile", setp:$("1").val(),id: "<?php echo $row_settings['id']; ?>" } ,function(data){ $("#msgp").html(data); });' href="javascript:void(0);">List</a>
                <?php } else if ($row_settings['profile_list'] == 1) {?>
                    <a onclick='$.get("dos.php",{ cmd: "sprofile", setp:$("0").val(),id: "<?php echo $row_settings['id']; ?>" } ,function(data){ $("#msgp").html(data); });' href="javascript:void(0);">Unlist</a>
                <?php } else {echo "N/A";}} else {echo "N/A";} ?></p> 
```

更新代码：

```
if($get['cmd'] == 'sprofile')
{
mysql_query("update users set profile_list='$get[setp]' where id='$get[id]'");
echo "Profile Listing Changed";
//header("Location: $ret");  
// exit();
} 
```

**编辑**

更新代码：

```
if($_GET['cmd'] == 'sprofile')
{
$set = mysql_real_escape_string($_GET['setp']);
$id = mysql_real_escape_string($_GET['id']);
mysql_query("update users set profile_list='" . $set . "' where id='" . $id . "'");
echo "Profile Listing Changed";
//header("Location: $ret");  
// exit();
} 
```

这会将其设置为 0 并显示正确的代码，但由于某种原因不会设置回 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:23:10.740

它是`$_GET`和不是`$get`。

请至少使用

```
$param = mysql_real_escape_string($_GET['your_param_which_goes_to_building_mysql_query']);
$param2 = //similar..
$query = "update users set profile_list='$param1' where id='$param2'" 
```

或者更好的是，使用[准备好的语句。](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:27:45.493

更新代码：

1.  使用`$_GET`代替`$get`（第 1 行和第 3 行）

2.  将此行用作第一行：

    ```
    if ($_GET['cmd'] == 'sprofile') 
    ```

3.  将此行用于第 3 行中的 mysql_query：

    ```
    mysql_query("update users set profile_list='" . mysql_real_escape_string($_GET['setp']) . "' where id='" . mysql_real_escape_string($_GET['id']) . "';"); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T02:06:30.137

`setp:$("1").val()`需要更改为，`setp: "1"`因为它不应该从任何地方提取值

也换`$get`工作`$_GET`

# android - Ubuntu命令行中adb logcat的颜色

> ID：11204202
> 
> 赞同：4
> 
> 时间：2012-06-26T09:19:09.593
> 
> 标签：android, bash, android-logcat

为了从 Android 设备获取 logcat，我使用`adb shell logcat`了（也混合了一些 grep 过滤）。

示例输出如下：

```
E/com.samsung.app( 3739): [MSC]>>>...
I/InputDispatcher( 2882): Delivering ...
D/ProgramMonitor( 3770): START ...
D/ProgramMonitor( 3770): LAUNCHER_RESUME...
I/Debug   ( 3815): onReceive...
E/Debug   ( 3815): receive ...
D/ClientReporter( 3036): ... 
```

我的问题是，如何根据日志的首字母更改输出的颜色。所以“E”被打印成红色，“D”被打印成绿色等等......就像在 Eclipse 中看到的日志一样。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T09:24:23.187

我使用在这里找到的 python 脚本：

[修改Android logcat流进行全彩调试](http://jsharkey.org/blog/2009/04/22/modifying-the-android-logcat-stream-for-full-color-debugging/)

如果您愿意，它真的很容易使用和修改。

完整的源代码：

```
#!/usr/bin/python

'''
    Copyright 2009, The Android Open Source Project

    Licensed under the Apache License, Version 2.0 (the "License"); 
    you may not use this file except in compliance with the License. 
    You may obtain a copy of the License at 

        http://www.apache.org/licenses/LICENSE-2.0 

    Unless required by applicable law or agreed to in writing, software 
    distributed under the License is distributed on an "AS IS" BASIS, 
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
    See the License for the specific language governing permissions and 
    limitations under the License.
'''

# script to highlight adb logcat output for console
# written by jeff sharkey, http://jsharkey.org/
# piping detection and popen() added by other android team members

import os, sys, re, StringIO
import fcntl, termios, struct

# unpack the current terminal width/height
data = fcntl.ioctl(sys.stdout.fileno(), termios.TIOCGWINSZ, '1234')
HEIGHT, WIDTH = struct.unpack('hh',data)

BLACK, RED, GREEN, YELLOW, BLUE, MAGENTA, CYAN, WHITE = range(8)

def format(fg=None, bg=None, bright=False, bold=False, dim=False, reset=False):
    # manually derived from http://en.wikipedia.org/wiki/ANSI_escape_code#Codes
    codes = []
    if reset: codes.append("0")
    else:
        if not fg is None: codes.append("3%d" % (fg))
        if not bg is None:
            if not bright: codes.append("4%d" % (bg))
            else: codes.append("10%d" % (bg))
        if bold: codes.append("1")
        elif dim: codes.append("2")
        else: codes.append("22")
    return "\033[%sm" % (";".join(codes))

def indent_wrap(message, indent=0, width=80):
    wrap_area = width - indent
    messagebuf = StringIO.StringIO()
    current = 0
    while current < len(message):
        next = min(current + wrap_area, len(message))
        messagebuf.write(message[current:next])
        if next < len(message):
            messagebuf.write("\n%s" % (" " * indent))
        current = next
    return messagebuf.getvalue()

LAST_USED = [RED,GREEN,YELLOW,BLUE,MAGENTA,CYAN,WHITE]
KNOWN_TAGS = {
    "dalvikvm": BLUE,
    "Process": BLUE,
    "ActivityManager": CYAN,
    "ActivityThread": CYAN,
}

def allocate_color(tag):
    # this will allocate a unique format for the given tag
    # since we dont have very many colors, we always keep track of the LRU
    if not tag in KNOWN_TAGS:
        KNOWN_TAGS[tag] = LAST_USED[0]
    color = KNOWN_TAGS[tag]
    LAST_USED.remove(color)
    LAST_USED.append(color)
    return color

RULES = {
    #re.compile(r"([\w\.@]+)=([\w\.@]+)"): r"%s\1%s=%s\2%s" % (format(fg=BLUE), format(fg=GREEN), format(fg=BLUE), format(reset=True)),
}

TAGTYPE_WIDTH = 3
TAG_WIDTH = 20
PROCESS_WIDTH = 8 # 8 or -1
HEADER_SIZE = TAGTYPE_WIDTH + 1 + TAG_WIDTH + 1 + PROCESS_WIDTH + 1

TAGTYPES = {
    "V": "%s%s%s " % (format(fg=WHITE, bg=BLACK), "V".center(TAGTYPE_WIDTH), format(reset=True)),
    "D": "%s%s%s " % (format(fg=BLACK, bg=BLUE), "D".center(TAGTYPE_WIDTH), format(reset=True)),
    "I": "%s%s%s " % (format(fg=BLACK, bg=GREEN), "I".center(TAGTYPE_WIDTH), format(reset=True)),
    "W": "%s%s%s " % (format(fg=BLACK, bg=YELLOW), "W".center(TAGTYPE_WIDTH), format(reset=True)),
    "E": "%s%s%s " % (format(fg=BLACK, bg=RED), "E".center(TAGTYPE_WIDTH), format(reset=True)),
}

retag = re.compile("^([A-Z])/([^\(]+)\(([^\)]+)\): (.*)$")

# to pick up -d or -e
adb_args = ' '.join(sys.argv[1:])

# if someone is piping in to us, use stdin as input.  if not, invoke adb logcat
if os.isatty(sys.stdin.fileno()):
    input = os.popen("adb %s logcat" % adb_args)
else:
    input = sys.stdin

while True:
    try:
        line = input.readline()
    except KeyboardInterrupt:
        break

    match = retag.match(line)
    if not match is None:
        tagtype, tag, owner, message = match.groups()
        linebuf = StringIO.StringIO()

        # center process info
        if PROCESS_WIDTH > 0:
            owner = owner.strip().center(PROCESS_WIDTH)
            linebuf.write("%s%s%s " % (format(fg=BLACK, bg=BLACK, bright=True), owner, format(reset=True)))

        # right-align tag title and allocate color if needed
        tag = tag.strip()
        color = allocate_color(tag)
        tag = tag[-TAG_WIDTH:].rjust(TAG_WIDTH)
        linebuf.write("%s%s %s" % (format(fg=color, dim=False), tag, format(reset=True)))

        # write out tagtype colored edge
        if not tagtype in TAGTYPES: break
        linebuf.write(TAGTYPES[tagtype])

        # insert line wrapping as needed
        message = indent_wrap(message, HEADER_SIZE, WIDTH)

        # format tag message using rules
        for matcher in RULES:
            replace = RULES[matcher]
            message = matcher.sub(replace, message)

        linebuf.write(message)
        line = linebuf.getvalue()

    print line
    if len(line) == 0: break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T23:25:07.827

如果你有 NPM，你可以安装模块：

```
$ npm install -g logcat 
```

这将使您开始在控制台和 //127.0.0.1/ 中监视彩色 logcat。

```
$ logcat 
```

[这](https://github.com/spirinvladimir/logcat)是描述

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-05T22:10:59.933

我想要一些非常简单的东西，并且不想导入一些解析和重新格式化输出的巨大脚本，所以我想出了这个。这实际上只是准确地打印输入行，并相应地添加颜色代码。

```
#!/usr/bin/env python

import sys
import subprocess
import csv

DEFAULT = "0;37;49"
ERROR = "0;91;49"
WARNING = "0;93;49"
INFO = "0;92;49"
DEBUG = "0;94;49"
VERBOSE = "0;97;49"

try:
    proc = subprocess.Popen(['adb','logcat', '-v', 'time'], stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
    for line in iter(proc.stdout.readline, ''):
        l = line.split(None, 3)
        try:
            level_and_tag = l[2]

            if level_and_tag.startswith('E/'): color = ERROR
            elif level_and_tag.startswith('W/'): color = WARNING
            elif level_and_tag.startswith('I/'): color = INFO
            elif level_and_tag.startswith('D/'): color = DEBUG
            elif level_and_tag.startswith('V/'): color = VERBOSE
            else: color = DEFAULT
        except IndexError as e:
            color = DEFAULT

        print '\x1b[%sm %s \x1b[0m' % (color, line.strip())
        #sys.stdout.write('\x1b[%sm %s \x1b[0m' % (color, line))
except KeyboardInterrupt:
    # Make sure color gets set back to terminal default
    print '\x1b[%sm %s \x1b[0m' % (DEFAULT, ">>> Exit") 
```

请注意，这适用于标准`-v time`格式，但当然可以修改以适合您喜欢的任何格式。

# ios - 加载我在测试人员 iPad 上制作的 iPad 应用程序时出现问题。目前不工作

> ID：11204203
> 
> 赞同：0
> 
> 时间：2012-06-26T09:19:10.070
> 
> 标签：ios, xcode, ipad, ios5

我做了一个简单的聊天应用程序，不比 telnet 多，而且我刚刚开始学习 IOS 和 Objective C。我过去用 Java、C 和 C++ 编程过。在我暂停一下并阅读更多关于我正在做的事情之前，我想要完成的最后一个步骤是在我的 iPad 和我的测试仪上加载应用程序。我已经让它在我的 iPad 上工作，但不是我的测试仪，而且他是远程的。

我在 Xtools 中编译了应用程序，进行存档，并通过进入 xtools 菜单中的 windows/ Organizer 导出 .ipa 文件，然后选择存档菜单以获取我存档的项目，然后共享并在文件中打开它，这样我就可以获取要分发的 IPA 文件。我之前在配置文件中添加了我的设备和我的测试设备。

当我几天前在我的 ipad 上安装它时，我最初使用的是 xcode。我已经在配置门户或其他东西中获得了证书，我想我将它拖到了一些键绑定或钥匙串的顶部。但我不记得这些步骤了，我只知道它在我的 ipad 中有效。

对于测试人员，我制作了一个临时配置文件，我将其连同 .ipa 文件一起邮寄给了测试人员。我认为他能够使用 iTunes 加载应用程序，但它说应用程序未安装。之后我们尝试了 testflight 服务。他能够达到它说安装这个应用程序但它不会安装的地步。我去了 testflight 下载链接，在我第一次从我的 ipad 中删除我的应用程序后，我能够从那里安装。在 ipad 设置中，我看到了我的临时提供证书。

我不确定我是否遗漏了与在测试人员 ipad 上安装不同的步骤，（我确实拥有他的设备，因为如果您不是列出的设备，试飞不会让您尝试从它的链接安装）。

我需要在这里做的 xcode 中有一些特殊的构建过程吗？我是否需要将 ad hoc 拖到 keybind 或 keychain 应用程序上？他用的是windows，我用的是mac。他说他认为他是开发者网络的成员，但我们不确定这是必需的。他确实可以使用mac。我想最终扩展到几个测试人员，但这个特定的测试人员过去曾与其他软件（非 ios）密切合作。他在 ipad 1 上，而我在 ipad 2 上，尽管我确实将最低 IOS 更改为仅 5.0，这是我认为我可以使用的最低版本，并且仍然保持自动引用计数。

提前感谢迈克的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T20:35:14.657

我正在回答我的问题，以解释我是如何让它工作的。

我创建了临时文件，但直到昨晚（2012 年 6 月 26 日）才通过组织者将其导入 xcode，然后将我的代码签名身份更改为分发。我进入了管理器，从那里导入了附加组件并更改了构建设置并通过 testflight 推送给他，他能够安装。我只是发送了我创建的附加组件以及不够的构建。

# c# - Winforms SQL 数据库应用程序 - 如何对数据库事务进行分组

> ID：11204209
> 
> 赞同：0
> 
> 时间：2012-06-26T09:19:18.493
> 
> 标签：c#, sql, winforms

我对编程比较陌生，正在构建我的第一个严肃的客户端应用程序。在一个表单上，我有一个按钮，它使用 SQL 数据库执行大量事务，如下所示：

```
private void btnALSave_Click(object sender, EventArgs e)
    {
        try
        {
            //...consider any Special Actions...//

            bool check = Automation_ALHistory_Saved(cboALHistoryType.Text);
            if (check == true)
            {
                //...create History item...//

                cHistory h = new cHistory();
                h.CaseNo = txtCaseNo.Text;
                h.HistoryType = cboALHistoryType.Text;
                h.HistoryDesc = txtALHistoryNote.Text;
                h.Save();

                //...actioned Diary marked complete...//

                cDiary.Completed(txtDiaryID.Text);                                        

                //...create new Diary (with exceptions)...//

                string strNextDiaryID = "";
                if (cboALHistoryType.Text != "Diary Cancelled" && cboALHistoryType.Text != "Case Closed")
                {
                    aMyDate cM = new aMyDate(txtALNextDueDate.Text);
                    DateTime pDate = cM.GetDate();
                    cDiary d = new cDiary();
                    d.CaseNo = txtCaseNo.Text;
                    d.DiaryType = cboALNextType.Text;
                    d.DiaryUserFor = cboALNextFor.Text;
                    d.DiaryNote = txtALNextNote.Text;
                    d.DiaryDueDate = pDate.ToString();
                    d.Save();
                    strNextDiaryID = d.DiaryID;
                }

                //...invoke KPI Manager...//

                int intActionedDiaryID = Int32.Parse(txtALDiaryID.Text);
                int intHistoryID = Int32.Parse(h.HistoryID);
                int intNextDiaryID = Int32.Parse(strNextDiaryID);
                cKPIManager kpi = new cKPIManager(intActionedDiaryID, intHistoryID, intNextDiaryID);

                //...reset forms...//

                ClearActionLinks();
                PopulateForm();
                tabCase.SelectTab("tabDiary");
            }
        }
        catch (Exception eX)
        {
            string eM = "Error attempting to save Diary / History Actions";
            aError err = new aError(eX, eM);
            MessageBox.Show(eM + Environment.NewLine + eX.Message);
        }
    } 
```

对于我的问题而言，所有这些都不重要。我真正需要知道的是，在运行此方法期间防止（或撤消）对数据库所做的所有更改的最佳方法是什么，如果它在任何时候都失败了。基本上我需要方法的成功（或其他）成为“全有或全无”的场景。如果该方法在最后一行失败，我需要撤消该方法之前所做的一切（就它对服务器上的数据所做的更改而言）。

对这个初学者的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:23:12.283

使用[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx#Y1955)类

```
try
{
    // Encapsulate your data access code in this using
    using (TransactionScope scope = new TransactionScope())
    {

        .....

        scope.Completed();
    }
} 
```

# javascript - 动画错误：两个 div 同时开始

> ID：11204212
> 
> 赞同：0
> 
> 时间：2012-06-26T09:19:24.437
> 
> 标签：javascript, css

我调整了我从 JqueryUi 使用的这个脚本，但我遇到了问题。两个 div 同时开始。我希望每个球只有在被拖过特殊区域后才开始动画。

问题：我怎样才能让他们同时制作一个动画并在他们制作动画后打开我感兴趣的页面？每个球都有她的属性。

我正在使用的 JavaScript 代码：

```
$(document).ready(function(){
    $(function() {
        $("#ball").draggable({ containment: "#cadru_principal", scroll: false, revert: "invalid" });
        $("#ball2").draggable({ containment: "#cadru_principal", scroll: false, revert: "invalid" });
        $( "#dropable" ).droppable({
            drop: function( event, ui ) {
                $("#ball").animate({left: '490px', top: '300px'}, 900);
                setTimeout(function() {window.location.href = "contact.html"}, 900);
                $("#ball2").animate({left: '490px', top: '300px'}, 900);
                setTimeout(function() {window.location.href = "pictori.html"}, 900);
            $( this )
                .find( "p" )
                    .html( "Ai nimerit" );
        }
    }); 
}); 
```

});

的HTML：

```
<div id="ball" class="ui-widget-content"></div>
<div id="ball2" class="ui-widget-content"></div>
<div id="dropable" class="ui-widget-header">
<p>Drop me here</p> 
```

CSS：

```
#ball {
position: absolute;
left: 183px;
top: 467px;
width: 42px;
height: 40px;
display: block;
background: url(../Images/ball.png) no-repeat;
background-position: top left;
z-index: 1002;
}
#ball2 {
    position: absolute;
    left: 225px;
    top: 460px;
    width: 42px;
    height: 40px;
    display: block;
    background: url(../../Web4/Images/ball2.png) no-repeat;
    background-position: top left;
    z-index: 1001;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:46:12.513

要获取被拖动的元素，您可以在 droppable-drop 参数中使用 ui.draggable。

JsFiddle 演示：http: [//jsfiddle.net/JCNAE/](http://jsfiddle.net/JCNAE/)

编码：

```
$(document).ready(function(){
    $(function() {
        $("#ball").draggable({ containment: "#cadru_principal", scroll: false, revert: "invalid" });
        $("#ball2").draggable({ containment: "#cadru_principal", scroll: false, revert: "invalid" });
        $( "#dropable" ).droppable({
            drop: function( event, ui ) {
     //           alert(ui);
                $(ui.draggable).animate({left: '490px', top: '300px'}, 900,
                                        function(){ //finish animation callback
                                            var url = $(this).attr("data-url");
                                            $("#url").text(url); //navigate here, used a div for testing purposes
                                                  }
                 );              
            $( this ).find( "p" ).html( "Ai nimerit" );
        }
    });
});
}); 
```

另外作为旁注，您可以在动画完成时使用回调，而不是使用单独的超时来导航到 url，这也在上面的演示中实现。为了能够为每个 div 分配一个 url，我分配了一个 data-url 属性，该属性可以在回调中获得。

# mysql - Ruby mysql2 单个查询中的多个语句

> ID：11204221
> 
> 赞同：5
> 
> 时间：2012-06-26T09:20:12.033
> 
> 标签：mysql, ruby, mysql2

我有一个问题，我正在更新我的数据库中的数百万行，所以我不想单独更新每一行，而是想将约 1000 条语句的组加入到一个查询中。

我已经启用了 MULTI_STATEMENTS 像这样

```
client = Mysql2::Client.new(:host => 'localhost', :database => 'mehdb', :username => "root", :password => "", :flags => Mysql2::Client::MULTI_STATEMENTS) 
```

这是我正在运行的代码示例

```
sql = "SELECT id, x FROM pew WHERE x IS NULL LIMIT 1000"

results = db_read.query(sql)

while results.count > 0

  updates = ''

  results.each do |r|
    updates += "UPDATE pew SET x = 10 WHERE id = #{r['id']};"
  end

  db_write.query(updates) unless updates.empty?

  results = db_read.query(sql)
end 
```

在第一次运行期间这项工作没问题，但是当它启动第二组更新时，我收到此错误消息

```
`query': Commands out of sync; you can't run this command now (Mysql2::Error) 
```

有没有人遇到过这个？或者对另一种方法有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T14:26:40.677

对这个问题的简短回答是启用 MULTI_STATEMENTS 时，mysql 期望您处理查询结果。

快速解决方法是在每组多个更新语句之后执行类似的操作

```
 while db_write.next_result
    db_write.store_result rescue ''
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:23:18.540

你为什么不只是::

无需多次运行它......

```
UPDATE pew SET x = 10 WHERE x IS NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T06:49:49.633

据我了解，这是 Mysql 内部保护的结果 - 您正在查询数据库并流式传输结果，如果在此期间您还将更新结果，则无法保证任何级别的一致性。

如果您知道作为流程的一部分进行更改是安全的，您可以通过简单地创建第二个连接来解决这个问题：

```
reading_client = Mysql2::Client.new(:host => 'localhost', :database => 'mehdb', :username => "root", :password => "", :flags => Mysql2::Client::MULTI_STATEMENTS)

updating_client = Mysql2::Client.new(:host => 'localhost', :database => 'mehdb', :username => "root", :password => "", :flags => Mysql2::Client::MULTI_STATEMENTS)

sql = "SELECT id, x FROM pew WHERE x IS NULL LIMIT 1000"

results = reading_client.query(sql)

while results.count > 0

  updates = ''

  results.each do |r|
    updates += "UPDATE pew SET x = 10 WHERE id = #{r['id']};"
  end

  updating_client.query(updates) unless updates.empty?

  results = reading_client.query(sql)
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-06T13:03:08.993

在下一条 SQL 语句之前编写以下命令。

```
ActiveRecord::Base.connection.raw_connection.abandon_results! 
```

它将启用新的 SQL 命令执行。

# jquery - 如何向所有匹配的元素添加 onclick 功能

> ID：11204222
> 
> 赞同：1
> 
> 时间：2012-06-26T09:20:14.953
> 
> 标签：jquery

此功能仅有效一次，当我再次单击锚元素时，不会发生任何事情。我认为选择器会将 .click 函数应用于所有匹配的元素？

```
 $('#welcome-nav li a').click(function (e) {
   // prevent anchor from firing
    e.preventDefault();

    var chosenElement = $(this).parent().attr('class');
    var index = articles.indexOf('.' + chosenElement) + 1;

   //remove all classes of active on articles
    $.each(articles, function (index, value) {

       $(value).removeClass('active');
   })

    $('.' + chosenElement).addClass('active');
    $('#sharpContainer').bgStretcher.sliderDestroy();
    startBgStretcher(returnImageArray(index));

 }) 
```

下面是我认为破坏 onclick 功能的插件

```
 $('#sharpContainer').bgStretcher({

        images: imageContainer,
        anchoring: 'left top', //Anchoring bgStrtcher area regarding window
        anchoringImg: 'left top',   //Anchoring images regarding window
        nextSlideDelay: 8000, //Numeric value in milliseconds. The parameter sets delay until next slide should start.
        slideShowSpeed: 2000, //Numeric value in milliseconds or(’fast’, ‘normal’, ’slow’). The parameter sets the speed of transition between images
        transitionEffect: 'superSlide',
        slideDirection: 'W',
        callbackfunction: homepageSlide
    });

function homepageSlide() {

    //homepage slide is called after a slide has loaded
    var index = $('li.bgs-current').index();

    //hide current article
    $.each(articles, function (index, value) {

        $(value).removeClass('active');
    })

    //show next article
    $(articles[index]).addClass('active');

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:24:01.660

我认为这可能是由于 JQuery 默认绑定的方式。如果您使用：

```
$(document).on('click', '#welcome-nav li a', function(e){
    e.preventDefault();
    alert('here');
}); 
```

发生什么了？

### 编辑

静态元素使用示例

```
$('#welcome-nav li').on('click', 'a', function(e){
    e.preventDefault();
    alert('here');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:36:34.887

你可以试试简单的“return false;” 在 .click 事件函数中完成所有您想做的事情之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:45:45.823

我会这样绑定它：

```
$('#welcome li').on('click', 'a', function(e) {
    e.preventDefault();
    whatever();
}); 
```

# visual-studio-2008 - Visual Studio 2008 - 构建事件：如何使用变量（设置 tmp="abc" 和 %abc%）？

> ID：11204239
> 
> 赞同：4
> 
> 时间：2012-06-26T09:20:58.307
> 
> 标签：visual-studio-2008, batch-file, set, environment-variables, post-build-event

在 VS2008 中创建构建后事件时，我想检查 xcopy 操作的目标是否不是只读的。我发现了一些使用临时变量的代码（[http://forums.techguy.org/dos-other/842311-solved-checking-if-file-folder.html](http://forums.techguy.org/dos-other/842311-solved-checking-if-file-folder.html)），然后检查某些属性。这没用。当我手动打印变量时，它似乎是空的。

```
if $(PlatformName)==x86 (
  echo x86
  For /F "Delims=" %%I In ('Attrib $(ProjectDir)..\..\somedir\$(ConfigurationName)    \somemoredir\$(TargetName).dll') Do Set _Attribs=%%I
  If NOT "%_Attribs:~5,1%"=="R" (
    set test="monkey"
    echo %test%
    echo $(test)
    echo nono
    echo %_Attribs%
    echo $(ProjectDir)..\..\somedir\$(ConfigurationName)\somemoredir\$(TargetName).dll
    attrib $(ProjectDir)..\..\somedir\$(ConfigurationName)\somemoredir\$(TargetName).dll
    xcopy /Y $(ProjectDir)..\..\..\Runtime\bin\$(TargetName).*     $(ProjectDir)..\..\somedir\$(ConfigurationName)\somemoredir\
  ) 
```

)

输出是：

> x86 ECHO 已打开。ECHO 开启。nono ECHO 已打开。

然后是属性消息等等。

echo %test%, echo $(test) 等似乎表明测试变量不包含任何内容。

**如何使用环境变量？**

（顺便说一句，我真正感兴趣的 _Attribs 也不包含任何内容。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T12:17:37.337

对于批处理新手，您有一个经典问题 - 您无法查看刚刚在循环（括号）中设置的值，因为整个循环是一次解析的。所以你在循环执行之前看到了你的变量的值——显然不会工作。解决方案是启用延迟扩展，`SETLOCAL EnableDelayedExpansion`然后使用延迟扩展 as 扩展您的变量`!var!`。

关于如何获取文件属性的另一个问题 - 您可以使用`~a`FOR 变量扩展修饰符来获取属性列表。在典型的 Microsoft 方式中，属性未按与 ATTRIBUTES 命令相同的顺序或大小写列出。只读标志`r`位于第二个字符（位置 1）。

文档中解释了延迟扩展和修饰符：只需键入`HELP FOR`或`FOR /?`从 Windows 命令行。只需`CMD`从“开始”菜单运行即可获得命令行。

```
setlocal enableDelayedExpansion
if $(PlatformName)==x86 (
  echo x86
  for %%F In ("Attrib $(ProjectDir)..\..\somedir\$(ConfigurationName)\somemoredir\$(TargetName).dll") do set _Attribs=%%~aF
  if not "!_Attribs:~1,1!"=="r" (
    set test="monkey"
    echo !test!
    echo $(test)
    echo nono
    echo !_Attribs!
    echo $(ProjectDir)..\..\somedir\$(ConfigurationName)\somemoredir\$(TargetName).dll
    attrib $(ProjectDir)..\..\somedir\$(ConfigurationName)\somemoredir\$(TargetName).dll
    xcopy /Y $(ProjectDir)..\..\..\Runtime\bin\$(TargetName).*  $(ProjectDir)..\..\somedir\$(ConfigurationName)\somemoredir\
  )
) 
```

您可以像在原始命令中一样使用 ATTRIB 命令 - 只需确保使用`!_Attribs:~5,1!`而不是`%_Attribs:~5,1%`. 但是`~a`我提供的修改器解决方案更有效，因为它使用简单的 FOR 循环，并且不必使用 FOR /F 执行命令。

# iphone - 无法使用 CGContextDrawImage 创建 Retina 图像

> ID：11204242
> 
> 赞同：0
> 
> 时间：2012-06-26T09:21:00.897
> 
> 标签：iphone, cgcontext, retina-display, cgimage

我正在通过使用 CGContext 组合另外两个图像来创建图像。即使我有@2x 图像，我也无法成功创建视网膜图像。

这是我的代码。能否请你帮忙 ？

```
-(UIImage*)makePinImageWithImage:(UIImage*)icon {
UIImage * pin = [UIImage imageNamed:@"defaultPin.png"]; // I have the @2x one.
int w = pin.size.width;
int h = pin.size.height;

CGRect iconRect = CGRectMake(16, 47, 24, 26); // the frame where mix icon in pin

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 8 * w, colorSpace, kCGImageAlphaPremultipliedFirst);

// Drawing pin in context
CGContextDrawImage(context, CGRectMake(0, 0, w, h), pin.CGImage);
CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);

// Drawing icon in context
CGContextDrawImage(context, iconRect, icon.CGImage);
CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);

// Getting back the final image
CGImageRef imageCG = CGBitmapContextCreateImage(context);

CGContextRelease(context);    
CGColorSpaceRelease(colorSpace);

UIImage * createdImage = [UIImage imageWithCGImage:imageCG];
CGImageRelease(imageCG);

return createdImage;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:55:58.540

这段代码是在文本窗口中完成的，应该或多或少做你想做的事。

```
(UIImage*)makePinImageWithImage:(UIImage*)icon // this code assumes this image is @2x if the device is
{
    UIImage *pin = [UIImage imageNamed:@"defaultPin.png"]; // I have the @2x one.
    CGFloat w = rintf(pin.size.width);
    CGFloat h = rintf(pin.size.height);

    UIGraphicsBeginImageContextWithOptions(CGSizeMake(w, h), YES, 0);   // 0 means let iOS deal with scale for you
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, h);
    CGContextConcatCTM(context, flipVertical);

    CGRect iconRect = CGRectMake(16, 47, 24, 26); // the frame where mix icon in pin

    // Drawing pin in context
    CGContextDrawImage(context, CGRectMake(0, 0, w, h), [pin CGImage]); // CGImage is a method, not a property
    //CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);  // this does not do anything does it? You never do a FillRect...

    // Drawing icon in context
    CGContextDrawImage(context, iconRect, [icon CGImage]);
    //CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1);  // this does not do anything does it? You never do a FillRect...

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;   // will be either normally sized or retina sized depending on environment
} 
```

# ios - 将时间转换为特定格式

> ID：11204243
> 
> 赞同：0
> 
> 时间：2012-06-26T09:21:01.863
> 
> 标签：ios, nsdateformatter

我有从 Web 服务返回的当前时间格式：

```
2012-06-25T23:45:52.664Z 
```

我想得到类似的东西：

```
 2012 june 25 23:45 
```

所以没有秒数和 Z 格式指示器。

我的相关代码是：

```
myConvertedTime = [[myActualTime dateFromString] stringFromDate]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:05:20.437

试试这些

NSDate *dateTemp = [[NSDate alloc] init]; NSDateFormatter *dateFormat1 = [[NSDateFormatter alloc] init];

[dateFormat1 setDateFormat:@"yyyy MMM dd hh:mm"];

dateTemp = [dateFormat1 dateFromString:newInvoice.date];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:25:19.463

试试下面的代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss"];
 NSString *dateString = @"2012-06-25T23:45:52.664Z";
dateString = [dateString substringToIndex:[dateString length]-5];
NSDate *date = [dateFormatter dateFromString:dateString];
[dateFormatter release];

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
[dateFormatter2 setDateFormat:@"yyyy MMMM dd HH:mm"]; 
NSString *dateText = [dateFormatter2 stringFromDate:date];
[dateFormatter2 release];
NSLog(@"the date is:%@",dateText); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:40:58.173

你应该使用一个`NSDateFormatter`对象。与其自己指定格式，不如让框架根据用户的国际化设置选择适合的格式。这是按如下方式完成的：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterLongStyle];
[formatter setTimeStyle:NSDateFormatterShortStyle];
myConvertedTime = [formatter stringForObjectValue:[myActualTime dateFromString]];
[formatter release]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T09:37:06.337

尝试这个：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy MMMM  dd HH:mm"];
NSString *myConvertedTime = [formatter stringFromDate:now]; 
```

# c - 事件驱动的linux进程监视器：怎么做？

> ID：11204244
> 
> 赞同：0
> 
> 时间：2012-06-26T09:21:03.797
> 
> 标签：c, linux

我有一个不稳定的程序，它一直随机崩溃，我可以使用 bash 脚本来保持它运行，但是有没有办法监控它的状态？不是通过轮询，而是事件驱动。

还有一个可选问题，如果监控进程不是它的父进程怎么办，这还有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:23:20.810

是的，它仍然是可能的。如果您想编写自己的应用程序来执行此操作，您必须使用`ptrace`. 它允许您作为调试器附加到进程并等待某些事件。`ptrace`我在我的博客上描述了使用。在这里，您可以通过一些示例了解更多信息：[http ://purecode.pl/blog/?tag=ptrace](http://purecode.pl/blog/?tag=ptrace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:57:40.823

您可以编写一个简单的包装器，它分叉并执行崩溃的进程，并在它获得 SIGCHLD 时唤醒并重新开始；*下面的概念*代码：

```
volatile sig_atomic_t gotchld = 0;

void
sigchld_handler(int sig)
{
    if (sig == SIGCHLD)
        gotchld = 1;
}

signal(SIGCHLD, sigchld_handler);

for (;;) {
    switch ((pid = fork()) {
    case -1:
        err(1, "fork");
    case 0:
        exec_my_crashy_program_here();
        errx(1, "came back from exec!");    /* paranoia */
    default:
        printf("sleeping for pid %u\n", pid);
        while (!gotchld)
            select(0, NULL, NULL, NULL, NULL);  /* sleep forever waiting for signal */
        /* possibly do fancy stuff with the wait() family of functions */
        gotchild = 0;
        continue;    
    }
} 
```

您不需要任何花哨的东西，只需了解子进程和父进程如何通过信号交互的基本知识。

还请考虑到我已经有一段时间没有直接处理信号了，所以请仔细检查那里的代码是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:23:53.797

从您的问题中不清楚您是否正在尝试确保程序继续运行，或者您是否正在尝试调试它。

如果您想保持它运行，请尝试 Monit： http: [//mmonit.com/monit/](http://mmonit.com/monit/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:25:06.560

您可以尝试 inotify 或类似的服务并观察 /proc/PID 是否被删除？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:29:58.617

如果您使用 bash 脚本启动进程，它*会*监视其状态：在进程退出后继续执行脚本，并获取退出代码。那是事件驱动的。

至于监控非子进程，Yob和user1442158已经给出了合理的建议。

# c# - PresentationSource.FromVisual(this) 在 WPF 中返回空值

> ID：11204251
> 
> 赞同：8
> 
> 时间：2012-06-26T09:21:29.303
> 
> 标签：c#, .net, wpf, interop, hwndsource

我正在使用以下代码：

```
protected override void OnSourceInitialized(EventArgs e)
{
...
....
HwndSource source = PresentationSource.FromVisual(this) as HwndSource;
...
...
} 
```

在某些系统中，“源”值是空的，我找不到原因......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-21T19:42:51.867

我认为您可能必须等到 UI 呈现，直到您尝试分配 Hwnd。尝试将其放入 Window.Loaded 的事件处理程序中。

这发生在我之前，在代码隐藏的构造函数中调用 InitializeComponent() 之后，我进行了 Hwnd 分配。它总是返回 null，这可能是当我通过并看到 UI 尚未出现时感觉到的。我将它弹出到 _Loaded 处理程序中，瞧，UI 在到达该行之前呈现，并且突然间“this”不再为空。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-06T12:54:00.637

从 .Net 4.0 开始，您`HwndSource`无需先显示窗口即可访问：

```
var helper = new WindowInteropHelper(this);
var hwndSource = HwndSource.FromHwnd(helper.EnsureHandle()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-23T20:47:30.413

WumpasTamer 的回答是正确的。我只想为其他寻找“交钥匙”解决方案的人添加一个快速代码示例。如果您已经在使用 WPF，则`window`没有必要，但如果您正在使用 Winforms 并想使用，则`PresentationSource`需要使用它。

```
void Main()
{
    var window = new Window
    {
        Width = 0,
        Height = 0,
        WindowStyle = WindowStyle.None,
        ShowInTaskbar = false,
        ShowActivated = false
    };
    window.Loaded += a_Loaded;
    window.Show();
}

void a_Loaded(object sender, EventArgs e)
{
    var s = (Window) sender;
    var source = PresentationSource.FromVisual(s);
    //...
    s.Close();
} 
```

# java - 可以从整数转换为十进制吗？

> ID：11204255
> 
> 赞同：0
> 
> 时间：2012-06-26T09:21:41.817
> 
> 标签：java, mysql

在尝试从查询中获取十进制结果时，我遇到了一些问题。最初，我有两个 int 列，我的目标是返回一个十进制值。但是，据我所知，只有当两列都是浮点数并且 Java 中的方法也是浮点数时才能返回小数，否则它将舍入结果或（如果 Java 返回浮点数）返回结果在小数点后为零。

简而言之，获得真正十进制值的唯一方法是使用两个浮点列而不是整数，这是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:24:12.017

这不是真的。如果您有两个 int 列，例如，您返回一个值除以另一个值的结果，如果适当注意不要四舍五入为 int，则结果可能是十进制值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:27:00.833

不，它根本不是真的，你可以检查：:

```
ResultSet rs =  // resultset after a query execution 
if(rs.next())
{

double v1 = (Double)rs.getDouble(1);
int v2  = (Integer)rs.getInt(2);
} 
```

这个片段运行良好..

# mediawiki - 如何在 mediawiki 中查找图像路径？

> ID：11204256
> 
> 赞同：3
> 
> 时间：2012-06-26T09:21:42.673
> 
> 标签：mediawiki

我想在 mediawiki 中找到图片的确切 URL，以发送我的 pinterest 代码。要查找页面 URL，我使用 urlencode($wgTitle->getFullURL()) 但我不知道要使用什么代码来描述图像和图像。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:29:38.947

要获取 wiki 页面中的文件路径，您可以使用[`[[Special:Filepath]]`](http://www.mediawiki.org/wiki/Extension:Filepath)解析器[`{{filepath:...}}`函数](http://www.mediawiki.org/wiki/Help:Magic_words#URL_data)或指向[`Media`命名空间](http://www.mediawiki.org/wiki/Help:Namespaces#Media)的链接。

要使用 PHP 以编程方式获取它，您可能想看看[MediaWiki 如何计算图像的文件路径？](https://stackoverflow.com/q/2813294/1048572)或[文件路径函数的代码](https://gerrit.wikimedia.org/r/gitweb?p=mediawiki/core.git;a=blob;f=includes/parser/CoreParserFunctions.php;hb=HEAD#l756)：

```
$file = wfFindFile( $filename );
$url = $file->getFullUrl(); 
```

（类中的[`getFullUrl()`方法](http://svn.wikimedia.org/doc/classFile.html#af8c5eb22ef823da22ef335f2fdb11e30)`File`）

对于您的用例，您还可以查看[Extension:AddThis](http://www.mediawiki.org/wiki/Extension:AddThis)，他们也计划支持 Pinterest。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:25:48.720

```
$f = wfFindFile( 'Foo.jpg' );
$imageUrl = $f->getCanonicalUrl(); // http://mywiki.com/images/0/06/Foo.jpg
$descriptionPage = $f->getTitle()->getFullUrl(); // http://mywiki.com/wiki/File.jpg 
```

有关详细信息，请参阅[File](http://svn.wikimedia.org/doc/classFile.html)类和[Title](http://svn.wikimedia.org/doc/classTitle.html)类文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T14:10:26.517

您可以链接到页面或，这会将请求重定向到完整图像位置，例如：[https://en.wikipedia.org/wiki/Special:Filepath/](https://en.wikipedia.org/wiki/Special:Filepath/Turtle.jpg) [**Turtle.jpg**](https://en.wikipedia.org/wiki/Special:Filepath/Turtle.jpg)重定向到完整图像路径[https:// /upload.wikimedia.org/wikipedia/commons/6/60/](https://upload.wikimedia.org/wikipedia/commons/6/60/Turtle.jpg) [**Turtle.jpg**](https://upload.wikimedia.org/wikipedia/commons/6/60/Turtle.jpg)`/wiki/Special:Filepath/**File_name**``/wiki/Special:Redirect/file/**File_name**`[](https://en.wikipedia.org/wiki/Special:Filepath/Turtle.jpg)**[](https://upload.wikimedia.org/wikipedia/commons/6/60/Turtle.jpg)**

# jsf - 访问传递给扩展 PrimeFaces 组件的属性

> ID：11204262
> 
> 赞同：3
> 
> 时间：2012-06-26T09:22:08.133
> 
> 标签：jsf, jsf-2, primefaces, custom-component

我正在尝试创建一个自定义组件来扩展 PrimeFaces。

我在 test 命名空间下有一个名为 textInput 的简单组件，它简单地调用 PrimeFaces textInput 组件并打印出传递给名为 fieldClass 的属性的值以及传递的任何属性的名称

如果我将 fieldClass 作为字符串传递：

```
<test:textInput id="foo" fieldClass="field-foo" /> 
```

这是结果

> fieldClass = field-foo
> 
> [com.sun.faces.facelets.MARK_ID, fieldClass]

如果我将 fieldClass 作为表达式传递

```
<ui:param name="bar" value="field-foo"/>
<test:textInput id="foo" fieldClass="#{bar}" /> 
```

fieldClass 消失

> fieldClass = NONE
> 
> [com.sun.faces.facelets.MARK_ID]

我如何真正掌握传递给组件的属性？

自定义组件使用的类如下：

## test.components.ExtendInputTextRenderer

```
package test.components;

import java.util.Map;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.context.ResponseWriter;
import javax.faces.render.FacesRenderer;
import org.primefaces.component.inputtext.*;

@FacesRenderer( 
     componentFamily=ExtendInputText.COMPONENT_FAMILY, 
     rendererType=ExtendInputTextRenderer.RENDERER_TYPE 
) 

public class ExtendInputTextRenderer extends InputTextRenderer {
     public static final String RENDERER_TYPE = "com.example.ExtendInputTextRenderer";

     @Override
     public void encodeEnd(FacesContext context, UIComponent component)
                throws java.io.IOException {
          ResponseWriter writer = context.getResponseWriter();
          Map attrs = component.getAttributes();
          String fieldClass = attrs.containsKey("fieldClass") ? (String) attrs.get("fieldClass").toString() : "NONE";
          writer.write("fieldClass = " + fieldClass + "<br/>");
          writer.write(attrs.keySet().toString() + "<br/>");
          super.encodeEnd(context, component);
     }
} 
```

## test.components.ExtendInputText

```
package test.components;

import javax.faces.component.FacesComponent;
import org.primefaces.component.inputtext.InputText;

@FacesComponent(ExtendInputText.COMPONENT_TYPE) 
public class ExtendInputText extends InputText { 

     public static final String COMPONENT_FAMILY = "com.example"; 
     public static final String COMPONENT_TYPE = "com.example.ExtendInputText"; 

     @Override 
     public String getFamily() { 
          return COMPONENT_FAMILY; 
     } 

     @Override 
     public String getRendererType() { 
          return ExtendInputTextRenderer.RENDERER_TYPE; 
     } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:00:13.987

```
String fieldClass = attrs.containsKey("fieldClass") ? (String) attrs.get("fieldClass").toString() : "NONE"; 
```

您的错误是您`containsKey()`用于检查是否已指定属性。

[`UIComponent#getAttributes()`这是javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getAttributes%28%29)的摘录：

> ### 获取属性
> 
> `public abstract java.util.Map<java.lang.String,java.lang.Object> getAttributes()`
> 
> 返回一个可变`Map`的表示与 this 关联的属性（和属性，见下文）`UIComponent`，以属性名称（必须是 a `String`）为键。返回的实现必须支持所有标准和可选`Map`方法，并支持以下附加要求：
> 
> *   `Map`实现必须实现`java.io.Serializable`接口。
> *   任何添加键或值的尝试都`null`必须抛出`NullPointerException`.
> *   任何添加不是`String`必须的键的尝试都会抛出`ClassCastException`.
> *   如果指定为键的属性名称与 this`UIComponent`的实现类的属性匹配，则以下方法将具有特殊行为：
>     *   **`containsKey()`- 返回`false`。**
>     *   `get()`- 如果属性可读，则调用getter方法并返回返回值（将原始值包装在其对应的包装类中）；否则抛出`IllegalArgumentException`。
>     *   `put()`- 如果属性是可写的，则调用 setter 方法来设置相应的值（在其相应的包装类中展开原始值）。如果该属性不可写，或者尝试将原始类型的属性设置为`null`，则抛出`IllegalArgumentException`。
>     *   `remove()`- 投掷`IllegalArgumentException`。

请注意，它因此总是返回`false`for`containsKey`组件的属性。这是因为动态属性不存储在属性映射中，而是存储在组件实例本身中。他们只在调用时解决`get()`。

您需要按如下方式更改错误的行：

```
String fieldClass = (String) attrs.get("fieldClass");
if (fieldClass == null) fieldClass = "NONE"; 
```

# c++ - 在 C++ 中将日期和时间字符串转换为无符号 __int64

> ID：11204265
> 
> 赞同：0
> 
> 时间：2012-06-26T09:22:20.847
> 
> 标签：我在c++, c++

[我在c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")中有一个要求，我必须读取一个包含日期和时间的文件并将其转换为`unsigned __int64`.

例如，我有一个包含以下数据的文件“mytime.txt”。

```
2012-06-25 05:32:06.963 
```

如何将其转换为`unsigned __int64`，以及如何从`unsigned __int64`上述字符串转换回以写入文件并验证它是否`unsigned __int64`正确转换。

我正在使用 VS.NET C++ 编译器处理 Windows。

我不应该使用`boost`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:55:36.840

您可以使用`strptime`将字符串转换为结构，然后使用它转换为 time_t 并使用反向操作 `gmtime`

```
struct tm tm;
time_t epoch;
if ( strptime(timestamp, "%Y-%m-%d %H:%M:%S", &tm) != NULL )
  epoch = mktime(&tm);

// Reverse 
  struct tm * ptm;

  time ( &epoch );

  ptm = gmtime ( &epoch ); 
```

# android - Google Play 无法正确显示 android apk 支持的屏幕尺寸

> ID：11204269
> 
> 赞同：2
> 
> 时间：2012-06-26T09:22:40.867
> 
> 标签：android

我为我的 android 应用程序创建了四个不同的 apk，以支持四种不同的屏幕尺寸（小、普通、大和 xlarge）设备。但是在google play上传这些apk后，它显示apk支持**small-xlarge**屏幕**，尽管apk是为小屏幕尺寸设备创建**的

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="false"
    android:normalScreens="false"
    android:resizeable="false"
    android:smallScreens="true" /> 
```

在 AndroidManifest.xml 文件中。我使用了 android API level 4 。 **其他上传的小尺寸和普通尺寸屏幕设备的 apk 也会出现同样的问题。**

任何人都可以提出解决这个问题的任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:34:48.007

[`<compatible-screens>`](http://developer.android.com/guide/topics/manifest/compatible-screens-element.html)是针对单个屏幕尺寸的方法（根据[Distributing to Specific Sc​​reens](http://developer.android.com/guide/practices/screens-distribution.html)）。

# javascript - 从 AJAX 在 javascript 中创建一个列表

> ID：11204272
> 
> 赞同：4
> 
> 时间：2012-06-26T09:23:01.207
> 
> 标签：javascript, html, ajax

嗨，我有一个从 xml 数据获取信息并在谷歌地图上打印标记的函数我的问题是我想在一个点到另一点之间创建一条路径这是检索数据的代码

```
 $.ajax({
                type:"POST",
                url:"PipeServlet?op=1",
                dataType:"xml",
                success: function(xml){
                    // Parses the data from xml
                    var newLat, newLon, newDesc,newName;
                    $(xml).find("deal").each(function(){
                        newName = $(this).find("name").text();
                        newLat = $(this).find("lat").text();
                        newLon = $(this).find("lon").text();
                        newDesc = $(this).find("desc").text();
                        // Displaying the Coupons on the map
                        marker = new google.maps.Marker({
                            position: new google.maps.LatLng(newLat,newLon),
                            map: map,
                            title: newName,
                            html: newDesc,
                            animation: google.maps.Animation.DROP
                        });` 
```

所以我想将我检索到的日期添加到列表中并在此代码中画一条线：

```
mapLine = new google.maps.Polyline({map : map,
                                        strokeColor   : '#ff0000',
                                        strokeOpacity : 0.6,
                                        strokeWeight  : 4,
                                        path:[new google.maps.LatLng(33.240547551860935,35.6153623373566),new google.maps.LatLng(33.240009149357576,35.61381738496402)]
                                       });` 
```

我希望 `path:[new google.maps.LatLng(33.240547551860935,35.6153623373566),new google.maps.LatLng(33.240009149357576,35.61381738496402)]`以动态方式创建线路感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:51:05.460

构建一个数组：`var path = new Array();`

并在其末尾添加您的对象：`path.push(position);`

```
$.ajax({
            type:"POST",
            url:"PipeServlet?op=1",
            dataType:"xml",
            success: function(xml){
                // Parses the data from xml
                var newLat, newLon, newDesc,newName;
                var path = new Array();
                $(xml).find("deal").each(function(){
                    newName = $(this).find("name").text();
                    newLat = $(this).find("lat").text();
                    newLon = $(this).find("lon").text();
                    newDesc = $(this).find("desc").text();
                    var position = new google.maps.LatLng(newLat,newLon);
                    path.push(position);
                    // Displaying the Coupons on the map
                    marker = new google.maps.Marker({
                        position: position,
                        map: map,
                        title: newName,
                        html: newDesc,
                        animation: google.maps.Animation.DROP
                    });
                ...
                });
                mapLine = new google.maps.Polyline({map : map,
                                strokeColor   : '#ff0000',
                                strokeOpacity : 0.6,
                                strokeWeight  : 4,
                                path:path
                });
                ... 
```

# url-rewriting - 我们如何更改 url 的重定向。详细阅读以下内容：

> ID：11204286
> 
> 赞同：0
> 
> 时间：2012-06-26T09:23:39.447
> 
> 标签：url-rewriting

我们如何更改 url 的重定向。意味着我有一个网站 abc.com.au。当我在浏览器 abc.com.au 或 www.abc.com.au 中打开它时，它会打开显示不同的 url (abc.com.au / www.abc.com.au)。现在我想做这样的设置，它在浏览器中只显示 abc.com.au，我们写 www.abc.com.au 或 abc.com.au。任何人都可以对url重定向有什么想法，然后请与我分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:29:19.037

我认为您必须更改域 DNS 中的某些内容或使用 PHP 进行检查？

```
if($_SERVER['HTTP_HOST'] == 'www.abc.com.au')
{
    header("Location: http://abc.com.au");
}
else
{
    //site
} 
```

# css - Twitter引导模式z-index不起作用

> ID：11204287
> 
> 赞同：1
> 
> 时间：2012-06-26T09:23:47.743
> 
> 标签：css, twitter-bootstrap

我遇到了一个我无法真正解决的问题。

我创建了一个注册和登录表单，我自己弹出了一个表单验证错误，但它并没有真正起作用。

我向它添加了比模态更高的 z-index，但我会从盒子里流出，它会向它添加一个 oveflor。![在此处输入图像描述](../Images/aac111f69ab945eecf188376d9cc6902.png)

html

```
 <div class="m-controls">
      <label class="pull-left" for="identity">Email *</label>
        <input type="text" name="identity" class="pull-right" id="identity" />
        <div class="login_email_error"></div>
    </div>
    <div class="clear"></div>
    <div class="m-controls">
      <label class="pull-left" for="password">Password *</label>
        <input type="password" name="password" class="pull-right" id="password" />
        <div class="login_password_error"></div>
    </div> 
```

css

```
.m-controls {
    position: relative;
}

.login_email_error p,
.login_password_error p {
    background: #fdfbe8;
    border: 1px solid #dfd8c4;
    color: #b74a46;
    text-align: center;
    padding: 5px 10px;
    font-size: 11px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    position: absolute;
    top: -2px;
    left: 330px;
    width: 290px;
    z-index: 1052;
} 
```

模态 z-index 为 z-index: 1050;

那么请有人给我一个提示我错过了什么？

谢谢

**编辑**

可能是js的问题？

```
// login
        $('.login-form').on('submit', function(){
            var loginData = $(this).serialize();
            $.ajax({
                url: "<?php echo base_url(); ?>user/login",
                type: "POST",
                data: loginData,
                dataType: "json",
                success: function(data)
                {
                    if(data.error == 0)
                    {
                        $('.login_email_error').append().html(data.identity);
                        $('.login_password_error').append().html(data.identity);

                    } else if(data.error == 1)
                    {
                        location.reload();
                    }
                }

            });

           return false;
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:29:04.853

嘿，现在像这样在你的**css**中删除你的**p** **标签** **`style sheet`**

 **```
 .login_email_error p,
.login_password_error p {
    background: #fdfbe8;
    border: 1px solid #dfd8c4;
    color: #b74a46;
    text-align: center;
    padding: 5px 10px;
    font-size: 11px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    position: absolute;
    top: -2px;
    left: 330px;
    width: 290px;
    z-index: 1052;
} 
```

**进入这个**

```
.login_email_error ,
.login_password_error  {
    background: #fdfbe8;
    border: 1px solid #dfd8c4;
    color: #b74a46;
    text-align: center;
    padding: 5px 10px;
    font-size: 11px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    position: absolute;
    top: -2px;
    left: 330px;
    width: 290px;
    z-index: 1052;
} 
```

现场演示[http://jsfiddle.net/MrzAS/2/](http://jsfiddle.net/MrzAS/2/)

* * *

**更新**了演示[http://jsfiddle.net/MrzAS/3/](http://jsfiddle.net/MrzAS/3/)**

# compiler-construction - 使用 CMake 将编译器命令行传递给预处理器

> ID：11204289
> 
> 赞同：0
> 
> 时间：2012-06-26T09:23:48.733
> 
> 标签：compiler-construction, cmake, c-preprocessor

我有一个 CMake 项目，我希望能够使用 g++、MinGW/g++（每个 4.x）、Clang（3.x）和 MSVC++（>= V8）进行编译。

我想要一个带有编译器参数或命令行的预编译器符号。

这对于查看是否启用了优化以及在命令行中启用了哪些开关很有用。

例如，用编译的程序`g++ -O3 -DNDEBUG -g0`应该知道标志是`"-O3 -DNDEBUG -g0"`. 在编写手动 Makefile 时，我可以简单地将标志收集到一个变量中，然后另外将其传递给编译器，生成一个命令行`g++ -O3 -DNDEBUG -g0 -DCOMPILER_ARGS="-O3 -DNDEBUG -g0"`。

如何使用 CMake 实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:46:45.617

对于除 MSVC 之外的所有选项，而不是创建预处理器定义，您可能应该只`make VERBOSE=1`在构建或添加时使用

```
set(CMAKE_VERBOSE_MAKEFILE ON) 
```

到您的 CMakeLists.txt。

对于 MSVC，您可以从 IDE 中检查每个项目的命令行参数：属性页 -> 配置属性 -> C/C++ -> 命令行和属性页 -> 配置属性 -> 链接器 -> 命令行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:21:12.667

`add_definitions("-DCOMPILER_ARGS=\"${CMAKE_CXX_FLAGS}\")`

但请注意，该`CMAKE_CXX_FLAGS`变量仅包含用户设置的标志。如果您希望使用整套编译标志，请使用 target property `COMPILE_FLAGS`。这个值可以通过`get_target_property()`函数获取。

# asp.net - ASP.net 中 Crystal Report 中的自定义页面打印

> ID：11204299
> 
> 赞同：0
> 
> 时间：2012-06-26T09:24:21.387
> 
> 标签：asp.net, crystal-reports-2008

我创建了一个水晶报告，其中我使用了在我的默认打印机中创建的自定义页面（例如宽度：8.50 英寸和高度：5.84 英寸的凭证）。

问题是，当我从代码运行应用程序时，它会设置我在 Crystal Report 的默认设置中给出的页面。但是在 IIS 上发布后，它会打印在 A4 页面上，而不是在定义的页面上。

寻找您有价值的解决方案

提前致谢，

苏普里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:57:46.880

打印机很可能正在采用打印机的默认设置。尝试从代码本身设置页边距。

```
 PageMargins pgMargins = this.CrystalReportDoc.PrintOptions.PageMargins;
            pgMargins.topMargin = <top margin here>;
            pgMargins.bottomMargin = <bottom margin here>;
            this.CrystalReportDoc.PrintOptions.ApplyPageMargins(pgMargins); 
```

此外，您必须给出的测量值应该以缇为单位，您可以使用这样的在线[测量](http://www.unitconversion.org/length/inchs-to-twips-conversion.html)值

# apache - 重写为 https 时无限循环

> ID：11204304
> 
> 赞同：0
> 
> 时间：2012-06-26T09:24:33.500
> 
> 标签：apache, mod-rewrite, ssl-certificate

我最近购买了通配符 ssl 证书以将我的网站移动到 https。由于 Apache 无法处理多个虚拟主机，在同一 IP 下，在不同的 s 中，我被迫使用 mod_vhost_alias 中的 VirtualDocumentRoot。这首先解决了我使用 Apache 和通配符证书的问题，但并没有持续多久。

出于必要，我决定将我网站的主页移动到域的根目录（即[http://domain.com](http://domain.com)，而不是[http://www.domain.com](http://www.domain.com)）。一旦我移动，我建立的移动到 https 的规则会导致服务器上的无限循环，从而导致错误 500。请注意，当应用于任何子域时，相同的规则仍然有效，将任何 http 重写为 https。

错误：

```
Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. 
```

我的虚拟主机配置：

```
<VirtualHost IP:443>
   ...
   VirtualDocumentRoot /.../public_html/%1/
   ...
   VirtualScriptAlias /.../public_html/%1/cgi-bin/
   ...
</VirtualHost> 
```

我的 .htaccess 配置：

```
SetEnv APPLICATION_ENV development
Options +FollowSymlinks -Indexes
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www.domain.com [NC,OR]
RewriteCond %{HTTP_HOST} ^domain.com [NC]
RewriteCond %{SERVER_PORT} !443
RewriteRule ^(.*)$ https://domain.com/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.*)$ - [NC,L]
RewriteRule ^(.*)$ index.php [NC,L]

<FilesMatch "\\.(js|css)$">
SetOutputFilter DEFLATE
</FilesMatch> 
```

我的应用程序是使用 Zend 框架构建的。

这里的主要谜团是为什么它适用于任何子域，但当我使用根子域时却不行。任何可能导致问题的提示？有什么办法可以让我看到 .htacess 所做的所有重写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:58:17.343

尝试这个：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$ [NC]
RewriteCond %{HTTPS} !on
RewriteRule (.*) https://%{HTTP_HOST}/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php [L] 
```

变化：

*   *www.domain.com*和*domain.com*可以在一行中匹配，也是如此
*   检查`HTTPS`而不是`SERVER_PORT`
*   根据请求重定向到同一域名上的 HTTPT（如果您希望所有人都指向一个名称，请更改）。
*   而不是制定一个会“杀死”重写的规则，在 OR 中有 3 个 RewriteCond，否定了 cond 应用于真正的规则
*   匹配时没有设置`NC`标志的点`.*`

其余部分`.htaccess`应保持不变（不包括那些部分）。

# jquery - bind() 不应该被使用，它的快捷方式呢？

> ID：11204306
> 
> 赞同：0
> 
> 时间：2012-06-26T09:24:34.980
> 
> 标签：jquery, jquery-1.7

从 bind() jQuery API：

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

并从 change() jQuery API：

> 此方法是 .bind('change', handler) 的快捷方式。

但是没有提到不要像在 bind() 中所说的那样使用 change() 。

从 jQuery 1.7 开始，使用 on() 而不是 bind() 有什么真正的好处吗？从 jQuery 1.7 开始，change() 和类似的快捷方式是否使用 bind() 或 on()？最终，我应该使用 change() 还是 on()？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:32:10.037

[快捷方法](https://github.com/jquery/jquery/blob/1.7/src/event.js#L1031)（例如`.change()`）只是在`bind`内部调用：

```
jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

    // Handle event binding
    jQuery.fn[ name ] = function( data, fn ) {
        if ( fn == null ) {
            fn = data;
            data = null;
        }

        return arguments.length > 0 ?
            this.bind( name, data, fn ) : //Just call `bind`
            this.trigger( name );
    };
    //... 
```

并[`bind`](https://github.com/jquery/jquery/blob/1.7/src/event.js#L965)简单地调用`on`：

```
//...
bind: function( types, data, fn ) {
    return this.on( types, null, data, fn ); //Just call `on`
},
//... 
```

So it's probably very marginally quicker to just call `on` yourself. In real terms, there will be no difference in speed, so just use the one you feel most comfortable with.

# c# - 来自服务器的数据拆分为列表框

> ID：11204309
> 
> 赞同：1
> 
> 时间：2012-06-26T09:24:40.880
> 
> 标签：c#, split

来自服务器的数据需要拆分为`ListBox`. 下面是我的代码。

```
private void button1_Click_2(object sender, EventArgs e)
        {
            //String[] arr = new String[1];
            listBox1.Items.Clear();

            listBox1.Items.Add("No Of Items=" + _server.Q.NoOfItem.ToString());
            for (int i=0; i <= _server.Q.NoOfItem - 1; i++)
            {
                listBox1.Items.Add( _server.Q.ElementAtBuffer(i).ToString());               
            }

            listBox2.Items.Add("No Of Items=" + _server.Q.NoOfItem.ToString());
            for (int i = 0; i <= _server.Q.NoOfItem - 1; i++)
            {
                String words = _server.Q.ElementAtBuffer(i).ToString();               
                listBox2.Items.Add(words.Split(new char[] { '[' , ']', ' '}));                
            } 
```

`listBox1`应该显示从服务器检索到的所有数据。 `listBox2`应该显示已拆分的数据。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:33:19.270

这应该有效：

```
 private void button1_Click_2(object sender, EventArgs e)
    {
        //String[] arr = new String[1];
        listBox1.Items.Clear();

        listBox1.Items.Add("No Of Items=" + _server.Q.NoOfItem.ToString());
        for (int i=0; i <= _server.Q.NoOfItem - 1; i++)
        {
            listBox1.Items.Add( _server.Q.ElementAtBuffer(i).ToString());               
        }

        String words = _server.Q.ElementAtBuffer(i).ToString();  
        listBox2.Items.Add("No Of Items=" + _server.Q.NoOfItem.ToString());
        listBox2.Items.AddRange(words.Split(new char[] { '[' , ']', ' '}));           
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:38:26.287

```
 listBox1.Items.Clear();

    listBox1.Items.Add("No Of Items=" + _server.Q.NoOfItem.ToString());
    listBox2.Items.Add("No Of Items=" + _server.Q.NoOfItem.ToString());

    for (int i = 0; i <= _server.Q.NoOfItem - 1; i++)
    {
        listBox1.Items.Add(_server.Q.ElementAtBuffer(i).ToString());

        String words = _server.Q.ElementAtBuffer(i).ToString();
        string[] arr = words.Split(new char[] { '[', ']', ' ' });
        foreach (string word in arr)
            listBox2.Items.Add(word);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:38:30.310

您是否尝试过使用正则表达式：

```
var pattern = @"\[(.*?)\]"; 
var matches = Regex.Matches(words, pattern);  
foreach (Match m in matches)
{  
   listBox2.Items.Add(/* Add matched item */);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T09:36:25.283

```
string[] strArray = words.Split(new char[] { '[' , ']', ' '})
for(int x = 0; x < strArray.Count; x++)
{listBox2.Items.Add(strArray[x]} 
```

我猜你想拆分单词并添加列表框 2

# html - max-width 在 Mozilla 和 IE 中不起作用

> ID：11204310
> 
> 赞同：2
> 
> 时间：2012-06-26T09:24:43.670
> 
> 标签：html, css, firefox, browser

该图像仅在 chrome 中基于浏览器宽度进行缩放，但在 IE 和 Mozilla Firefox 中不起作用。thumb img 在所有浏览器中都可以使用，但只有 .play img max-width 不起作用这是我的 HTML

```
<div class="contai">
        <div> <img src="1.png" style="max-width:100%" /></div>
       <div class="thumb">
         <img src="2.jpg" />
              <div class="play"> <img src="videoImagePlay.png" /></div>
       </div>
 </div> 
```

CSS

```
 .contai{
    width:100%;
}
.thumb{
    border: 1px solid rgb(226, 226, 226);
   position:relative; float:left; width:38%
}
.thumb img{
    max-width:100%
}
.play{
     position:absolute; top:30%; left:35%
}
.play img{
    max-width:50%
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:39:23.587

游戏**课** `right : 0`

像这样

```
.play{     
     position:absolute; top:30%; left:35%; right:0;
} 
```

现场演示[http://jsfiddle.net/puS7u/](http://jsfiddle.net/puS7u/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:44:55.663

看到这个[**小提琴**](http://jsfiddle.net/7BWQ2/1/)。它可能会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:52:37.200

这可能对将来的某人有所帮助：如果图像的父级是一个表（无论在节点树中有多高），那么 max-width 将在 FF 或 IE 中不起作用，除非您定义了特定的像素 max桌子上的宽度。然而，这在 Chrome 中运行良好。

逻辑似乎是 FF 和 IE 认为表格总是应该根据内容扩展，而不考虑 max-width: 100%。

哪个浏览器具有“正确”或最佳实现并不明显。

# c# - 在 Windows 窗体应用程序中保存自定义身份的位置在哪里？

> ID：11204314
> 
> 赞同：0
> 
> 时间：2012-06-26T09:24:56.667
> 
> 标签：c#, .net, authentication, authorization, identity

我有一个 Windows 窗体应用程序，它可以与多个 Web 服务和第三方组件通信，这些组件需要基于用户名和密码进行无数次登录。理想情况下，我想在我的“windows”表单应用程序中保留用户名和密码的缓存，并且我应该能够在需要时提取它。例如，当我调用sharpsvn 客户端时，它需要NetworkCredential。问题是，一旦我从用户那里收集了服务的用户名和密码，我应该将它们保存在 Windows 窗体应用程序的什么位置以及如何检索它们？我不想在我的方法边界周围传递用户名和密码或它的（任何对象）。这些方法应该知道如何从当前上下文中提取凭证。我想知道一种方法，我可以在需要时检索保存的 NetworkCredential 集合。我有哪些选择？是线程本地存储是存储此类信息的地方。我可以使用 CurrentPrinciple 来完成这项任务吗？我有深度嵌套的方法调用，并且拥有此类凭据的全局哈希表是不合适的。我想从当前上下文中提取 NetworkCrendential 的集合。请注意，这是一个 Windows 窗体应用程序，而不是 ASP.net 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:50:45.763

我假设您的要求是只要应用程序正在运行，就只记住这些凭据：

您是否为所有的sharpsvn 调用使用了一个通用类？然后你可以给类一个静态的 NetworkCredential 属性——然后对你正在使用的每个服务做同样的事情。如果它为空，您知道您需要询问用户，设置属性，然后从那时起使用它。显然，如果您拨打电话并且身份验证失败，您将不得不添加逻辑来再次询问用户。

# iphone - 如何在所有应用程序上接收显着的位置更改，而不仅仅是一个视图？

> ID：11204319
> 
> 赞同：0
> 
> 时间：2012-06-26T09:25:09.897
> 
> 标签：iphone, ios, uiview, cllocationmanager, uiapplication

我是 iOS 编程新手，我需要实现一个位置感知应用程序。我已经可以使用重要的位置更改服务，但是当我离开我的视图时，它会停止接收新的更新。

如果我在该视图上输入背景，我仍然会得到更新并且一切都很好，但是如果我将视图更改为其他视图，它就会停止......

我认为以这种方式发生是合乎逻辑的，但我也需要收到关于我其他观点的更新......

我应该为我拥有的每个视图复制代码，还是可以让我在任何视图中接收更新，比如让我的应用程序回答而不是每个视图。

谢谢， GustDD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:41:01.760

你可以 ：

1.  在应用程序委托中定义位置实例，以便您可以随时访问它。

2.  用于`NSNotificationCenter`在位置更改时发布通知。

3.  当位置发生变化时，使用代表传递信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:43:02.713

在 AppDelegate.m 中添加此代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
 {
    if(!locationManager) {
         locationManager = [[CLLocationManager alloc] init];
         locationManager.delegate = self; 
         locationManager.desiredAccuracy = kCLLocationAccuracyBest; 
         locationManager.distanceFilter = kCLDistanceFilterNone;
         [locationManager startUpdatingLocation];
       }
 }

 - (void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation  *)newLocation fromLocation:(CLLocation *)oldLocation {
//here you will get upadated location
    //here you can add delegate method call to where you want to use this location or you can create a shared variable

} 
```

# objective-c - 用 Common Crypto 替换 OpenSSL 依赖？（Mac App Store 收据验证）

> ID：11204321
> 
> 赞同：5
> 
> 时间：2012-06-26T09:25:10.363
> 
> 标签：objective-c, macos, openssl, osx-lion, commoncrypto

我的理解是[OpenSSL 在 OSX 10.7 中被弃用，取而代之的是 Common Crypto](https://stackoverflow.com/a/7406994/291280)，但我似乎无法很好地处理如何从 OpenSSL 代码转换为 Common Crypto 代码。特别是，我正在[使用 ValidateStoreReceipt 查看 App Store 收据验证](https://github.com/roddi/ValidateStoreReceipt/blob/master/validatereceipt.m)。我首先尝试找到一种方法来获取 PKCS#7 容器的内容，这似乎是 PKCS#7 容器的第一步`dictionaryWithAppStoreReceipt`，但我找不到任何有关如何执行此操作的文档。

是否可以重写此代码以免依赖于 OpenSSL？如果是这样，怎么做？是否有我错过的文档或教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:40:35.183

无需停止使用 OpenSSL。不推荐使用的是 OpenSSL 动态库，您仍然可以从 openssl.org 获取静态库/源并将其静态链接到您的代码。

Apple 给出的弃用原因是 OpenSSL 自己建议不要动态链接，因为库在版本之间变化太大。通过静态链接，您的代码将始终使用您构建的库的版本，而不是当前安装在系统上的较晚的可能不兼容的版本。

# sql - sql中的DELETE语句执行时间过长

> ID：11204322
> 
> 赞同：-1
> 
> 时间：2012-06-26T09:25:12.970
> 
> 标签：sql, postgresql, sql-delete

我有一个 sql 删除查询，它涉及删除 15k 条记录。以下是格式：

```
query += """ DELETE FROM table1
            WHERE attr1 IN (SELECT distinct attr2
                                         FROM table2
                                         WHERE condition1 = %d
                                         AND condition2 = %d);
        """ %(val1, val2) 
```

这个 IN 运算符需要很多时间。请建议我如何将其转换为 JOIN，这将花费更少的时间来执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:33:13.093

`JOIN`在运算符上使用`IN`，并在加入条件中使用的字段上创建索引。

```
DELETE FROM table1 using table2 Where attr1  = attr2 And condition1 = %d AND condition2 = %d; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:45:50.850

从子查询和 IN 子句中删除 Distinct。而是使用 Where EXISTS。您的 Distinct 将导致内部订单，这将消耗更多时间。

并且还索引 table1.attr1 和 table2.attr2。

```
query += """ DELETE FROM table1
        WHERE Exists (SELECT null 
                                     FROM table2
                                     WHERE condition1 = %d
                                     AND condition2 = %d
                                     and table2.attr2 = table1.attr1);
    """ %(val1, val2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:33:19.170

`attr1`尝试在,`condition1`和列中添加索引`condition2`以提高性能。

# c# - 如何使用 TimePicker 到 DatePicker MVC3 C#

> ID：11204323
> 
> 赞同：2
> 
> 时间：2012-06-26T09:25:18.227
> 
> 标签：c#, asp.net-mvc-3, razor, datepicker, timepicker

我正在努力了解如何将 TimePicker [http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)解决方案与我现有的使用 DatePicker 的 ASP.Net MVC3 C# 站点相结合。DatePicker 目前运行良好，但我需要添加时间和日期，TimePicker 看起来非常适合我的需要，只是我不确定如何实现它。

我看到这个例子给出了这个代码：

```
$('#example1').datetimepicker(); 
```

但我不确定如何将它应用到我现有的站点/ DatePicker 函数中。

我已确保将这些 JS 文件包含在 _Layout 页面的 HEAD 部分中，并将 CSS 添加到我现有的 DatePicker CSS 文件 (jquery-ui-1.7.3.custom.css) 中：

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.7.3.custom.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-timepicker-addon.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-sliderAccess.js")" type="text/javascript"></script> 
```

在我的查看页面上，我有这段代码显示输入并调用 DatePicker 函数（在当前形式下可以正常工作）：

```
@model test.Models.News
@{
    ViewBag.Title = "Create";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

        <div class="editor-label">
            @Html.LabelFor(model => model.News_Date)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.News_Date, "News_Date", new { @ID = "News_Date" })
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
}

<script type="text/javascript">
    $(document).ready(function () {
        $("#News_Date").datepicker({
            showOptions: { speed: 'fast' },
            changeMonth: false,
            changeYear: false,
            dateFormat: 'dd/mm/yy',
            gotoCurrent: true
        });
    });
</script> 
```

我不确定如何安装 TimePicker 函数，以便它在我的 MVC3 站点上与 DatePicker 一起使用。

如果有人不介意，我会很感激解释？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T09:33:21.013

您只需在视图中替换您的`datepicker`调用`datetimepicker`并为两者提供必要的参数：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#News_Date').datetimepicker({
            // Arguments for the date picker
            showOptions: { speed: 'fast' },
            changeMonth: false,
            changeYear: false,
            dateFormat: 'dd/mm/yy',
            gotoCurrent: true,

            // Arguments for the time picker    
            showSecond: true,
            timeFormat: 'hh:mm:ss',
            stepHour: 2,
            stepMinute: 10,
            stepSecond: 10
        });
    });
</script> 
```

# php - 修改权限后使用php的mysql插入操作失败

> ID：11204328
> 
> 赞同：0
> 
> 时间：2012-06-26T09:26:00.777
> 
> 标签：php, mysql, mysqli, localhost, privileges

这是权限设置部分

```
User        Host         Type                Privileges      Grant

username    %            database-specific   ALL PRIVILEGES  No 
root        localhost    global              ALL PRIVILEGES  Yes 
```

这是mysql的一部分

```
INSERT INTO `place` (`category`, `zone`, `budget`, `with`, `time`, `name`, `address`, `description`, `website`, `latitude`, `longitude`,`validation`) VALUES (1, 2, 3, 2, 3, 'placename', 'address', 'description', 'website', 100.0001, 33.0001, 0); 
```

这是php部分

```
$con = new mysqli('localhost','username');
$q = "INSERT INTO...";
$con->query($q); 
```

如果手动插入sql就可以了。但是如果我执行php，它就失败了。不幸的是没有错误信息出来。这在我重新设置用户用户名的权限后开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:48:39.000

我的猜测是这是一个语法类型错误。您可能正在使用反引号 (`) 而不是单引号 (')。但是，您确实需要弄清楚错误是什么。尝试这样的事情：

```
 $con = new mysqli('localhost','username');
    $q = "INSERT INTO...";
    if (!$con->query($q)) {
      printf("Errormessage: %s\n", $con->error);
    } 
```

# c# - 使用 GZipStream 解压只返回第一行

> ID：11204330
> 
> 赞同：3
> 
> 时间：2012-06-26T09:26:14.217
> 
> 标签：c#, gzip, gzipstream

我一直在研究解析第 3 方 fms 日志的函数。日志在 Gzip 中，因此我使用了适用于我们使用的任何其他 Gzip 文件的解压缩功能。

解压这些文件时，我只得到压缩文件的第一行，也不例外，它只是没有找到其余的字节，就好像第一行有一个 EOF。我尝试使用 Ionic.Zlib 而不是 System.IO.Compression 但结果是一样的。这些文件似乎没有以任何方式损坏，使用 Winrar 解压缩它们。

如果有人知道如何解决这个问题，我将不胜感激。谢谢

您可以在此处下载示例文件：http: [//www.adjustyourset.tv/fms_6F9E_20120621_0001.log.gz](http://www.adjustyourset.tv/fms_6F9E_20120621_0001.log.gz)

这是我的解压功能：

```
 public static bool DecompressGZip(String fileRoot, String destRoot)
    {
        try
        {
            using (FileStream fileStram = new FileStream(fileRoot, FileMode.Open, FileAccess.Read))
            {
                using (FileStream fOutStream = new FileStream(destRoot, FileMode.Create, FileAccess.Write))
                {
                    using (GZipStream zipStream = new GZipStream(fileStram, CompressionMode.Decompress, true))
                    {
                        byte[] buffer = new byte[4096];
                        int numRead;

                        while ((numRead = zipStream.Read(buffer, 0, buffer.Length)) != 0)
                        {
                            fOutStream.Write(buffer, 0, numRead);
                        }
                        return true;
                    }
                }

            }
        }
        catch (Exception ex)
        {
            LogUtils.SaveToLog(DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fff"), "Eror decompressing " + fileRoot + " : " + ex.Message, Constants.systemLog, 209715200, 6);
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:13:09.000

我已经在最后 45 分钟内解决了这个问题，但我无法解释为什么它不起作用。不知何故，DeflateStream 类没有正确解码您的数据。我编写了自己的 GZip 解析器（如果有人想检查它，我可以分享代码），它读取所有标题并检查它们的有效性（以确保那里没有有趣的东西），然后使用 DeflateStream 膨胀实际数据，但你的文件仍然只是让我第一行。

如果我使用 GZipStream 使用您的日志文件重新压缩（在首先使用 winrar 解压缩它之后），那么我自己的解析器和您自己的示例都会再次解压缩它。

网上似乎有一些关于微软实施 Deflate (http://www.virtualdub.org/blog/pivot/entry.php?id=335) 的批评，所以您可能发现了其中一个怪癖。

但是，解决您的问题的一个简单方法是切换到 SharZipLib (http://www.icsharpcode.net/opensource/sharpziplib/)，我试过了，它可以很好地解压您的文件。

```
 public static void DecompressGZip(String fileRoot, String destRoot)
    {
        using (FileStream fileStram = new FileStream(fileRoot, FileMode.Open, FileAccess.Read))
        using (GZipInputStream zipStream = new GZipInputStream(fileStram))
        using (StreamReader sr = new StreamReader(zipStream))
        {
            string data = sr.ReadToEnd();
            File.WriteAllText(destRoot, data);
        }
    } 
```

# wpf - 如何在wpf DataGrid中选择第一行/上一个/下一个/最后一行

> ID：11204331
> 
> 赞同：4
> 
> 时间：2012-06-26T09:26:17.070
> 
> 标签：wpf, datagrid

我有一个 WPF 应用程序，其中包含一个显示大量数据的标准 DataGrid。

现在我想添加按钮来选择下一个/第一/上/最后一行。

有没有办法告诉 DataGrid 为我更改选择？

我试着用

```
private void SelectNext_Click(object sender, RoutedEventArgs e)
{
  datagrid.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));
} 
```

但它对我不起作用（不会更改所选项目，而是将单元格焦点设置为第一个项目）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T10:28:05.693

```
private void SelectNext_Click(object sender, RoutedEventArgs e)
{
   if (dataGrid.Items.Count - 1 > datagrid.SelectedIndex)
   {
      datagrid.SelectedIndex++;
   }
}

private void SelectPrevious_Click(object sender, RoutedEventArgs e)
{
   if (dataGrid.SelectedIndex > 0)
   {
      datagrid.SelectedIndex--;
   }
}

private void SelectFirst_Click(object sender, RoutedEventArgs e)
{
   dataGrid.SelectedIndex = 0;
}

private void SelectLast_Click(object sender, RoutedEventArgs e)
{
   dataGrid.SelectedIndex = dataGrid.Items.Count - 1;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T10:33:45.520

如果您通过数据绑定使用数据源填充数据网格，则可以这样做

“下一步”按钮示例

```
private void btnNext_Click(object sender, RoutedEventArgs e)
{
        ICollectionView view = CollectionViewSource.GetDefaultView(yourDataSource);
        view.MoveCurrentToNext();
} 
```

该界面`ICollectionView`具有移动当前项目所需的所有方法

在 XAML 中还记得设置

```
<DataGrid .....     IsSynchronizedWithCurrentItem="True" > 
```

# android - 我有一个返回 XML 的 asp.net Webservice。我应该在 Android 中使用什么以及如何解析它以及如何将其添加到列表视图中？

> ID：11204334
> 
> 赞同：1
> 
> 时间：2012-06-26T09:26:23.937
> 
> 标签：android, .net

> **可能重复：**
> [如何从 android 调用 .NET Web 服务？](https://stackoverflow.com/questions/1048310/how-to-call-a-net-web-service-from-android)

我有一个返回 XML 的 asp.net Webservice。我应该在 Android 中使用什么以及如何解析它以及如何将其添加到列表视图中？任何人都可以通过示例应用程序帮助我。

谢谢，拉文德

# c# - 只是因为 Null 而改名？

> ID：11204335
> 
> 赞同：6
> 
> 时间：2012-06-26T09:26:25.653
> 
> 标签：c#, api

我致力于开发外部 API。我在公共接口中添加了一个方法：

```
public void AddMode(TypeA mode);
public void AddMode(TypeB mode); // the new method, TypeB and TypeA are not related at all 
```

看起来不错，直到有一个测试通过了`null`. 这使编译器与模棱两可的调用混淆。我通过强制转换为空来修复测试。

但是我的问题是：

*   我应该仅仅因为这个而改变名字吗？
*   还是应该让客户像我一样做演员？（如果他们因任何原因通过 null）

在设计 API 时，在这种情况下最好的是什么？

**编辑**：

调用就像这样**AddMode(null)**，而不是：

```
TypeA vl = null; 
AddMode(v1); // this doesn't cause a problem 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T09:43:02.430

一个 API 应该被设计成易于正确使用和难以错误使用。您的 API 易于正确使用：

```
AddMode(new TypeA()); 
```

编译。

使用不当更难：

```
AddMode(null); 
```

不编译。用户被迫做类似的事情

```
AddMode((TypeA)null); 
```

这应该让他思考，这是否是预期的用法。所以我认为你的 API 没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:29:32.013

我认为这取决于`null`各自论点的价值有多特殊。

例如，比较[这个`ArgumentNullException`构造函数](http://msdn.microsoft.com/en-us/library/ms130823.aspx)：当必须设置内部异常时最常调用它。否则，将传递除非法参数名称之外的[这个构造函数。](http://msdn.microsoft.com/en-us/library/wssa019h.aspx)在奇怪的情况下，必须调用前者，因为必须提供自定义消息，但不提供内部异常（我通常在为包含`null`但不是`null`自身的数组/集合参数抛出异常时这样做）。所以，在这种情况下，我需要明确的演员表，我会说这是可以接受的。

如果你的方法确实做同样的事情，但`null`仍然是一个通常的值，你可能想为`null`变体添加一个无参数重载（即显式转换仍然是可能的，但用户也可以调用无参数重载）。

如果您的方法做了一些不同的事情，`null`但`null`对`null`.

**更新：**如果`null`无论如何都是不可接受的（并且会导致异常），那么您应该保持该方法不变。除了出于测试目的之外，任何情况下都不应该将文字`null`传递给方法，因为这总是会产生异常。因此，在这种情况下不要更改您的重载名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:30:05.637

无论如何，此方法的 null 有效输入是否有效？

就我个人而言，只要 AddMode 的两个重载都相关，我就会保留它，因为您希望 AddMode(X) 和 AddMode(Y) 做一些彼此相关的事情。

如果它们没有任何关系，那么可能需要更改方法名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:31:23.117

好吧，这取决于任何一个值在您的 API 中`null`都是*可接受的值。*

如果不只是不接受它，不支持它。因此，即使消费者*尝试*将其与`null`编译器一起使用，也会因歧义问题而中断。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:42:55.977

如果您的 API 接受 null 作为可能的参数值，那么您必须在文档中指定它并提及有必要强制转换它，并编写一些代码示例来说明如何。

但是，如果您不希望用户使用 null 值，则可以将 TypeA 和 TypeB 更改为 a`struct`而不是 a `class`，如果您的类设计允许的话。

# android - 如何在Android的html页面上添加外部css文件

> ID：11204336
> 
> 赞同：2
> 
> 时间：2012-06-26T09:26:27.733
> 
> 标签：android, webview, android-webview

我正在开发一个包含许多 html 页面的应用程序。我在 Eclipse 的原始文件夹中创建了这些。

我将制作许多 html 文件，并且我只想为要在每个 html 文件中调用的 css 文件设置一个位置。此应用程序的工作方式是 loadData 方法显示 html 页面，如下所示：

```
webview.loadData(readTextFromResource(R.raw.gen1), "text/html", "utf-8"); 
```

我很感激任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T09:31:48.770

您可以在项目资产中复制 html 和 css 文件，并将 html 文件从资产加载到 webview，如下代码所示：

```
 WebView wv;  
    wv = (WebView) findViewById(R.id.webView1);  
    wv.setBackgroundColor(0);
    wv.setBackgroundResource(android.R.color.black);
    wv.setWebChromeClient(new WebChromeClient());
    wv.setWebViewClient(new WebViewClient());
    wv.getSettings().setJavaScriptEnabled(true);
    wv.getSettings().setPluginsEnabled(true);
    wv.loadUrl("file:///android_asset/Index_Animation/test.html"); 
```

像下面的屏幕截图：

![在此处输入图像描述](../Images/e1d56969d7bd2ea2f9c9e6330aee6fbe.png)

并在下面的html文件中引用css：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="./style.css" type="text/css" media="screen"><!--This line refer the css file-->

  </head>
    <body bgcolor="#000000">        

                <div class="col_left">
                    <div class="logo">
                        <div class="circles">
                            <div class="circle"></div>
                            <div class="circle1"></div>
                            <div class="circle2"></div>
                        </div>
                        <center>
                        <img src="./Untitled.png" />
                        </center>
                    </div>

                </div>

</body></html> 
```

# python - 安装 SimpleCV 时遇到问题

> ID：11204339
> 
> 赞同：1
> 
> 时间：2012-06-26T09:26:43.920
> 
> 标签：python, eclipse, windows-7, opencv, simplecv

我正在尝试使用 Eclipse Indigo 在 Windows 7 上安装 SimpleCV。我将 superpack-installer 与 Python、Numpy 等一起使用。除了 SimpleCV，一切正常，当我尝试导入 SimpleCV 时，我得到以下错误输出：

导入 SimpleCV

文件“build\bdist.win32\egg\SimpleCV_init.py”，第 3 行，在 # $Id$ 文件“build\bdist.win32\egg\SimpleCV\base.py”，第 31 行，在文件“C:\Python27”中\lib\site-packages\scipy\spatial_init.py"，第 25 行，从 kdtree 导入 * 文件 "C:\Python27\lib\site-packages\scipy\spatial\kdtree.py"，第 6 行，在 import scipy .sparse 文件“C:\Python27\lib\site-packages\scipy\sparse_init_.py”，第 182 行，从 csgraph 导入 * AttributeError：“模块”对象没有属性“csgraph_to_masked”

安装过程中是否出现问题？我在互联网上找不到关于“csgraph_to_masked”的任何帮助。（事实上​​，搜索“simplecv csgraph_to_masked”并没有返回一个搜索结果） SimpleCV 被称为非常容易安装，所以当我这么早就遇到问题时，我有点惊讶。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:18:44.573

该错误似乎来自 scipy。

您可以尝试重新安装 scipy 以查看是否可以解决任何问题，或者只是从头开始重新安装 simplecv。

你可以去这里：http: [//sourceforge.net/projects/scipy/files/scipy/0.10.1/](http://sourceforge.net/projects/scipy/files/scipy/0.10.1/)

只要确保抓住 python 2.7

# android - android禁用WiFi和蓝牙服务构建

> ID：11204342
> 
> 赞同：-1
> 
> 时间：2012-06-26T09:26:48.397
> 
> 标签：android

我正在尝试开发由启动接收器启动的服务，如果启用了 wifi 或蓝牙会自动禁用它。

请帮帮我

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:36:05.837

在清单中

```
<receiver android:name=".BootTimeServiceStarter" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

并在您的类文件中执行以下操作

```
 public class BootTimeServiceStarter extends BroadcastReceiver 
    {

        @Override
        public void onReceive(Context context, Intent intent)
        {

    BluetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter();
            if (bluetooth.getState() == BluetoothAdapter.STATE_ON
                    || bluetooth.getState() == BluetoothAdapter.STATE_TURNING_ON) {
                    bluetooth.disable();
            }
    WifiManager wifiManager = (WifiManager) context
                    .getSystemService(Context.WIFI_SERVICE);
            if (wifiManager.getWifiState() == WifiManager.WIFI_STATE_ENABLED
                    || wifiManager.getWifiState() == WifiManager.WIFI_STATE_ENABLING) {
                wifiManager.setWifiEnabled(false);
            }

            }
    } 
```

# ruby-on-rails - 工厂女孩不发起对象

> ID：11204346
> 
> 赞同：3
> 
> 时间：2012-06-26T09:27:03.640
> 
> 标签：ruby-on-rails, rspec, factory-bot

我想问题是我不知道如何正确使用带有 Rspec 的工厂女孩​​。或者就此正确地在rails中进行测试。不过还是觉得有点怪。。

我有一个类，用户，具有以下工厂：

```
FactoryGirl.define do
  factory :user do
    name     "admin"
    email    "admin@admin.com"
    adminstatus  "1"
    password "foobar"
    password_confirmation "foobar"
  end

  factory :user_no_admin, class: User do
    name     "user"
    email    "user@user.com"
    adminstatus  "2"
    password "foobar"
    password_confirmation "foobar"
  end
... 
```

我的测试如下所示：

```
...
describe "signin as admin user" do
  before { visit login_path }
  describe "with valid information" do
    let(:user_no_admin) { FactoryGirl.create(:user_no_admin) }
    let(:user) { FactoryGirl.create(:user) }
    before do
      fill_in "User",    with: user.name
      fill_in "Password", with: user.password
      click_button "Login"
    end

    it "should list users if user is admin" do 
      response.should have_selector('th', content: 'Name') 
      response.should have_selector('td', content: user_no_admin.name)
      response.should have_selector('td', content: user.name)
    end
  end      
end#signin as admin user
... 
```

基本上我正在尝试测试，如果您以管理员身份登录，您应该会看到所有用户的列表。我稍后会在文件中测试以非管理员身份登录。我已经在数据库中有几个用户。

在登录的用户“管理员”列表中，与数据库中已有的用户一起显示。但是，除非我以前做过这样的事情，否则不会显示“用户”：

```
fill_in "User",    with: user_no_admin.name
fill_in "Password", with: user_no_admin.password 
```

好像除非我使用它，否则它就不会存在。但是，如果我使用 puts 它会打印我输入的信息，即使我没有执行上面的“fill_in”。

我有一个类似的例子，其中 puts 可以帮助我。

```
describe "should have company name" do
  let(:company) { FactoryGirl.create(:company) }
  let(:category) { FactoryGirl.create(:category) }
  let(:company_category) { FactoryGirl.create(:company_category, company_id: company.id, category_id: category.id) }
  it "should contain companies name" do
    puts company_category.category_id
    get 'categories/' + company.categories[0].id.to_s
    response.should have_selector('h4', :content => company.name)
  end
end 
```

没有上面的puts，我得到一个

```
Called id for nil 
```

我必须先启动（？）一个由工厂女孩创建的对象，然后才能以某种方式使用它吗？

还需要其他代码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T11:15:13.683

```
let(:whatever) 
```

直到您第一次调用它们时才创建对象。如果您希望它在首次使用前可用，请使用

```
let!(:whatever) 
```

反而。

或使用前块：

```
before(:each) do
  @company = FactoryGirl.create(:company)
  ....
end 
```

这将在您需要使用它们之前创建对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:08:14.317

代替：

```
factory :user do
  name     "admin"
  email    "admin@admin.com"
  ... 
```

我会做：

```
factory :user do |f|
  f.name "admin"
  f.email "admin@admin.com"
  ... 
```

代替：

```
let(:user_no_admin) { FactoryGirl.create(:user_no_admin) }
let(:user) { FactoryGirl.create(:user) } 
```

我会做：

```
@user_no_admin = Factory(:user_no_admin)
@user = Factory(:user) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-30T22:24:15.310

我打破的现有测试也遇到了类似的问题，原因略有不同，这很有趣。

在这种情况下，被测控制器最初是 call `save`，但我将其更改为 call `save!`，并相应地更新了测试。

修改后的测试是：

*   将实例声明为`let`语句
*   设定对保存的期望！方法（例如`expect_any_instance_of(MyObject).to receive(:save!)`）
*   预期后第一次使用实例。

在内部，看起来 FactoryGirl 正在调用该`save!`方法，并且在将期望从 save 更改为 save! 之后，实际上没有完成任何工作（并且被测代码无法从数据库中找到实例）我需要更新和没有黑客很难真正通过）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-02T10:37:02.790

尝试在工厂女孩中使用特质，[此链接中提到了一个示例](https://semaphoreci.com/community/tutorials/working-effectively-with-data-factories-using-factorygirl)

# javascript - 添加 wp_deregister_script('jquery'); 在 WordPress 上停用“Quich Edit”

> ID：11204348
> 
> 赞同：0
> 
> 时间：2012-06-26T09:27:36.150
> 
> 标签：javascript, wordpress

我正在使用 WordPress。

我将此代码添加到functions.php：

```
function modify_jquery() {
        wp_deregister_script('jquery');
        wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js', false, '1.4.4');
        wp_enqueue_script('jquery');
}
add_action('init', 'modify_jquery'); 
```

后来我发现“快速编辑”坏了，当试图快速编辑一个帖子时它就消失了。

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:41:02.000

你为什么使用 jQuery 的 1.4.4 版本？你不能使用最新的：[http](http://code.jquery.com/jquery-latest.min.js) ://code.jquery.com/jquery-latest.min.js吗？

**我在操作wp_enqueue_scripts**上使用最后一个， 这对我来说很好。

```
add_action('wp_enqueue_scripts', 'actionRegisterAssets', 0);
function actionRegisterAssets()
{
// Unregister default scripts
wp_deregister_script('jquery');
wp_register_script('jquery', 'http://code.jquery.com/jquery-latest.min.js', array(), '1.7.2');
wp_enqueue_script('jquery');
} 
```

# ios - 如何在 ImagevView 的锚点上画一个点？

> ID：11204349
> 
> 赞同：1
> 
> 时间：2012-06-26T09:27:37.930
> 
> 标签：ios, views

我正在尝试使用 imageViews 来实现一些效果，我需要正确设置锚点。没有它是非常困难的。
您将如何在 imageview 上显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:32:11.283

锚点是层上指定的属性（您需要 QuartCore 才能访问它）。它是在设备的单位坐标空间中指定的（x 和 y 都在层的边界内从 0 到 1。您可以通过 x 值乘以宽度和 y 值乘以高度。要在该位置绘制一个点，您只需添加一个新的小层（边界 4x4 和角半径 4（得到一个圆））

请注意，更改锚点将更改图层（和视图）在屏幕上出现的位置，因为框架是相对于锚点计算的。要在设置锚点后让框架出现在同一位置，您可以重新设置框架（这将更新图层位置，使框架符合您的预期）

# file - 在 opennlp 中训练自己的模型

> ID：11204352
> 
> 赞同：23
> 
> 时间：2012-06-26T09:27:49.107
> 
> 标签：file, model, opennlp

我发现创建自己的模型 openNLP 很困难。谁能告诉我，如何拥有模型。培训应该如何进行。

输入应该是什么以及输出模型文件将存储在哪里。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-28T15:57:38.457

[https://opennlp.apache.org/docs/1.5.3/manual/opennlp.html](https://opennlp.apache.org/docs/1.5.3/manual/opennlp.html)

这个网站非常有用，既显示代码，又使用 OpenNLP 应用程序训练所有不同类型的模型，如实体提取和词性等。

我可以在这里给你一些代码示例，但是页面使用起来非常清晰。

理论上：

本质上，您创建一个文件，其中列出了您要训练的内容

例如。

> 运动 [空白] 这是一个关于足球、橄榄球和其他东西的页面
> 
> 政治 [空白] 这是关于托尼·布莱尔担任首相的页面。

格式在上面的页面中描述（每个模型都需要不同的格式）。创建此文件后，您可以通过 API 或 opennlp 应用程序（通过命令行）运行它，它会生成一个 .bin 文件。一旦你有了这个 .bin 文件，你就可以将它加载到模型中，并开始使用它（根据上述网站中的 api）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-08T07:27:13.600

首先，您需要使用所需的实体来训练数据。

句子应该用换行符 (\n) 分隔。值应与带有空格字符的标签分开。
假设您要创建医学实体模型，因此数据应该是这样的：

```
<START:medicine> Augmentin-Duo <END> is a penicillin antibiotic that contains two medicines - <START:medicine> amoxicillin trihydrate <END> and 
<START:medicine> potassium clavulanate <END>. They work together to kill certain types of bacteria and are used to treat certain types of bacterial infections. 
```

例如，您可以参考示例[数据集](https://github.com/mccraigmccraig/opennlp/blob/master/src/test/resources/opennlp/tools/namefind/AnnotatedSentencesWithTypes.txt)。训练数据至少要有 15000 句才能得到更好的结果。

此外，您可以使用 Opennlp TokenNameFinderTrainer。输出文件将采用 .bin 格式。

这是示例：[在 OpenNLP 中编写自定义 NameFinder 模型](http://nishutayaltech.blogspot.in/2015/07/writing-custom-namefinder-model-in.html)

有关更多详细信息，请参阅[Opennlp 文档](http://opennlp.apache.org/documentation/1.5.3/manual/opennlp.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T14:16:12.777

也许这篇文章会帮助你。它描述了如何从维基百科提取的数据中进行**TokenNameFinder训练......**

*   [nuxeo - 博客 - 使用 Hadoop 和 Pig 挖掘维基百科以进行自然语言处理](http://www.nuxeo.com/blog/mining-wikipedia-with-hadoop-and-pig-for-natural-language-processing/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-21T13:33:28.637

复制 data 中的数据并运行以下代码以获取您自己的 mymodel.bin 。

可以参考数据= [https://github.com/mccraigmccraig/opennlp/blob/master/src/test/resources/opennlp/tools/namefind/AnnotatedSentencesWithTypes.txt](https://github.com/mccraigmccraig/opennlp/blob/master/src/test/resources/opennlp/tools/namefind/AnnotatedSentencesWithTypes.txt)

```
public class Training {
       static String onlpModelPath = "mymodel.bin";
       // training data set
       static String trainingDataFilePath = "data.txt";

       public static void main(String[] args) throws IOException {
                       Charset charset = Charset.forName("UTF-8");
                       ObjectStream<String> lineStream = new PlainTextByLineStream(
                                                       new FileInputStream(trainingDataFilePath), charset);
                       ObjectStream<NameSample> sampleStream = new NameSampleDataStream(
                                                       lineStream);
                       TokenNameFinderModel model = null;
                       HashMap<String, Object> mp = new HashMap<String, Object>();
                       try {
                              //         model = NameFinderME.train("en","drugs", sampleStream, Collections.<String,Object>emptyMap(),100,4) ;
                                       model=  NameFinderME.train("en", "drugs", sampleStream, Collections. emptyMap());
                       } finally {
                                       sampleStream.close();
                       }
                       BufferedOutputStream modelOut = null;
                       try {
                                       modelOut = new BufferedOutputStream(new FileOutputStream(onlpModelPath));
                                       model.serialize(modelOut);
                       } finally {
                                       if (modelOut != null)
                                                       modelOut.close();
                       }
       }
} 
```

# java - HashMaps Java 列表

> ID：11204353
> 
> 赞同：0
> 
> 时间：2012-06-26T09:27:56.667
> 
> 标签：java, list, hashmap, stanford-nlp

```
Map<String, List<String>> words = new HashMap<String, List<String>>();
            List<Map> listOfHash = new ArrayList<Map>();

            for (int temp = 0; temp < nList.getLength(); temp++) {
                Node nNode = nList.item(temp);
                if (nNode.getNodeType() == Node.ELEMENT_NODE) {
                    Element eElement = (Element) nNode;
                    String word = getTagValue("word", eElement);
                    List<String> add_word = new ArrayList<String>();
                    String pos = getTagValue("POS", eElement);
                    if(words.get(pos)!=null){
                        add_word.addAll(words.get(pos));
                        add_word.add(word);
                    }
                    else{
                        add_word.add(word);
                    }
                    words.put(pos, add_word);
                }
            } 
```

这是我编写的一段代码（它使用斯坦福 CoreNLP）。我面临的问题是，目前此代码仅适用于一个地图，即“单词”。现在，我希望一旦解析器看到“000000000”这是我的分隔符，那么应该将一个新的 Map 添加到列表中，然后将键和值插入其中。如果它没有看到“000000000”，那么键和值将被添加到同一个映射中。请帮助我，因为即使经过很多努力我也无法做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:48:45.133

我猜 listOfHash 是包含你所有的地图......

所以重命名`words`为`currentMap`example 并添加到它。当您看到“000000000”实例化一个新地图时，将其分配给`currentMap`，将其添加到列表中并继续...

就像是：

```
if ("000000000".equals(word)){
    currentMap = new HashMap<String, List<String>>();
    listOfHash.add(currentMap);
    continue; // if we wan't to skip the insertion of "000000000"
} 
```

并且不要忘记将您的初始 Map 添加到 listOfHash。

我还看到您的代码还有其他问题，这是修改后的版本（我没有尝试编译它）：

```
Map<String, List<String>> currentMap = new HashMap<String, List<String>>();
List<Map> listOfHash = new ArrayList<Map>();
listOfHash.add(currentMap);

for (int temp = 0; temp < nList.getLength(); temp++) {
    Node nNode = nList.item(temp);
    if (nNode.getNodeType() == Node.ELEMENT_NODE) {
        Element eElement = (Element) nNode;
        String word = getTagValue("word", eElement);    

        if ("000000000".equals(word)){
            currentMap = new HashMap<String, List<String>>();
            listOfHash.add(currentMap);
            continue; // if we wan't to skip the insertion of "000000000"
        }

        String pos = getTagValue("POS", eElement);

        List<String> add_word = currentMap.get(pos);
        if(add_word==null){
            add_word = new ArrayList<String>();
            currentMap.put(pos, add_word);
        }
        add_word.add(word);
    }

} 
```

# ruby-on-rails - assigns() 方法与绑定 - Rails

> ID：11204355
> 
> 赞同：3
> 
> 时间：2012-06-26T09:27:58.587
> 
> 标签：ruby-on-rails, ruby, testing

我是 Ruby on Rails 世界的新手。

我注意到至少有一种方法可以从测试用例中访问控制器实例变量。

事实上，假设这个测试方法：

```
test "should get index" do
    get :index
    assert_response :success
    assert_not_nil assigns(:products)
end 
```

`products`是包含在相关控制器中的实例变量。当然，测试用例引用了这个控制器。因此`assigns()`方法使用它来检查控制器实例变量的哈希值，从而允许从之前调用此控制器的任何其他文件中访问任何精确对象。

所以我想知道两个问题：

**为什么不创建与控制器的“绑定”而不是使用`assigns()`方法？**

我想象一个可以做到的版本：

```
test "should get index" do
        get :index
        assert_response :success
        assert_not_nil @products
end 
```

它不会更短更干净吗？

绑定是允许 ERB 文件访问控制器实例变量的机制，如以下链接所示：

[http://rrn.dk/rubys-erb-template-system](http://rrn.dk/rubys-erb-templating-system)

这种机制不适用于测试用例吗？方法是`assigns()`必不可少的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T15:06:02.427

但是，如果您带来了绑定，这可能会通过并且不应该

```
test "should get index" do
    @fake_products = [1,2,3]
    get :index
    assert_response :success
    assert_not_nil @fake_products
end 
```

您不一定希望测试中的所有实例变量都与控制器中的实例变量相结合。分配允许您将断言“限定”到控制器实例变量。

# java - 日期对象问题

> ID：11204357
> 
> 赞同：0
> 
> 时间：2012-06-26T09:28:03.887
> 
> 标签：java, android, datetime

是否可以有一个只有时间值而没有日期值的日期对象？如果是，请提示如何？

我这样做了：

```
String time = "15:30:18";
DateFormat sdf = new SimpleDateFormat("hh:mm:ss");
Date date = null;
try {
    date = sdf.parse(time);
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

System.out.println("Time: " + sdf.format(date)); 
```

上面的 System.out.println 给出了正确的值。bt 我需要它作为日期对象而不是字符串

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:28:53.460

`Date`instance 拥有完整的表示形式，可以呈现任何时间点，最长可达毫秒，但如果您只想从中获取时间，您可以使用它`SimpleDateFormat`来打印时间部分

```
String timeRepresentation  = new SimpleDateFormat("HH:mm:SS").format(dateInstance); 
```

**看**

*   [演示](http://ideone.com/KTevq)
*   [`SimpleDateFormat`API文档](http://docs.oracle.com/javase/1.6/docs/api/java/text/SimpleDateFormat.html)

# android - 从日期时间选择器android中选择日期时设置星期几

> ID：11204359
> 
> 赞同：1
> 
> 时间：2012-06-26T09:28:05.947
> 
> 标签：android, datepicker, datetimepicker, android-datepicker

有谁知道从日期时间选择器中选择日期时如何设置星期几？

我目前有以下设置日期，但我也需要日期，例如*周一、周二*：

```
private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            // calendar.set(mYear, mMonth, mDay);

        }
    };

private void setDateInEditText() {

    StringBuilder dateTime = new StringBuilder (mDay)
            .append("-").append(mMonth + 1).append("-").append(mYear)
            .append(" ").append(pad(mHour)).append(":")
            .append(pad(mMinute));

    datatableEditText.setText("");
    datatableEditText.setText(dateTime);

} 
```

我不想设置当前日期 我想设置所选日期的日期。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:38:48.740

在 SO [https://stackoverflow.com/a/7651306/1321873上查看此答案](https://stackoverflow.com/a/7651306/1321873)

```
SimpleDateFormat sdf = new SimpleDateFormat("EEEE");
Date d = new Date(mYear, mMonth, mDay);
String dayOfTheWeek = sdf.format(d); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:41:23.257

这是一个简单的代码。您可以根据需要修改代码以获得正确的输出

```
 Calendar cal = new GregorianCalendar(2012, Calendar.JUNE, 26);
  int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK); 
```

星期几是一个整数值，其中 1 是星期日，2 是星期一，...，7 是星期六

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:44:37.507

您可以从 Calendar 对象中获取星期几。例如：

```
Calendar mycal = Calendar.getInstance();
mycal.set(mYear, mMonth, mDay);
int dayOfWeek = mycal.get(Calendar.DAY_OF_WEEK);
String dayString;
switch(dayOfWeek) {
case Calendar.SUNDAY:
    dayString = "Sunday";
    break;
...
}
datatableEditText.setText(dayString); 
```

# mysql - MySql 在特定周内返回日期范围

> ID：11204364
> 
> 赞同：0
> 
> 时间：2012-06-26T09:28:09.210
> 
> 标签：mysql

我可以使用下面的代码检索特定周内所有商品的总销售额/总销售额。

```
select week(real_pur_date) as week, itemcode, sum(quantity)
from sales
where week(real_pur_date) = week(20120620)
group by itemcode; 
```

输出是：

```
+------+----------+---------------+
| week | itemcode | sum(quantity) |
+------+----------+---------------+
|   25 | KB001    |            11 |
|   25 | KB002    |             2 |
|   25 | KB003    |             3 |
+------+----------+---------------+ 
```

这就是我想要的

问题是如何查询 MySql 以将第 25 周的日期范围返回到结果表中？
例如，
1\. 第 24 周的日期范围是 10-06-2012 到 16-06-2012。
2\. 第 25 周的日期范围是 17-06-2012 到 23-06-2012。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:36:04.393

我不是 MySQL 人，所以我不得不尝试从 SQL Server 函数转换。但是，基本的数学就在那里。我会让你决定如何传递或计算@YEARSTART 和@YEAREND。

```
DECLARE @YEARSTART datetime, @YEAREND datatime
SET @YEARSTART='1/1/2012'
SET @YEAREND = '12/31/2012'

SELECT A.week, CASE WHEN (@YEARSTART + INTERVAL (8-DAYOFWEEK(@STARTYEAR)+(week-2)*7) DAY) < @YEARSTART 
                 THEN @YEARSTART
                 ELSE (@YEARSTART + INTERVAL (8-DAYOFWEEK(@STARTYEAR)+(week-2)*7) DAY) 
               END AS WeekStart,
               CASE WHEN (@YEARSTART + INTERVAL (7-DAYOFWEEK(@STARTYEAR)+(week-1)*7) DAY) > @YEAREND
                 THEN @YEAREND
                 ELSE (@YEARSTART + INTERVAL (7-DAYOFWEEK(@STARTYEAR)+(week-1)*7) DAY)
               END AS WeekEnd,
      A.itemcode, A.SumQty 
FROM
(
select week(real_pur_date) as week, itemcode, sum(quantity) AS SumQty
from sales
where week(real_pur_date) = week(20120620)
group by itemcode
) AS A 
```

# zend-framework - 在 div 中封装两个元素

> ID：11204366
> 
> 赞同：0
> 
> 时间：2012-06-26T09:28:16.323
> 
> 标签：zend-framework, zend-form, zend-decorators

我想用div标签封装两个元素，我想要这样

```
 <div>
    <span id="mailRecepientName2-label">
      <label class="elementTitle required" for="mailRecepientName2">اسم المستفيد</label>
    </span>
    <span>
       <input id="mailRecepientName2" type="text" value="" name="mailRecepientName2">
    </span>
    <span id="mailRecepientNote2-label">
        <label class="required" for="mailRecepientNote2">البيـــــــان</label>
    </span>
    <span class="largeText">
      <input id="mailRecepientNote2" type="text" value="" name="mailRecepientNote2">
   </span>
    <a class="ico_lable_remove" data-recepeintcount="2" name="deleteNewRecepient" href="javascript:void(0)"></a>
 </div> 
```

我这样弄

```
 $mailRecepientName = new Zend_Form_Element_Text("mailRecepientName" . $id);
    $mailRecepientName->setRequired(true)->setLabel('اسم المستفيد')->setDecorators(array(
            'ViewHelper',
            'Errors',
            array(array('data' => 'HtmlTag'), array('tag' => 'span')),
            array('Label', array('tag' => 'span'))
        ););

    $mailRecepientNote = new Zend_Form_Element_Text("mailRecepientNote" . $id);
    $mailRecepientNote->setRequired(true)->setLabel('البيـــــــان')->setDecorators(array(
            'ViewHelper',
            'Errors',
            array(array('data' => 'HtmlTag'), array('tag' => 'span')),
            array('Label', array('tag' => 'span'))
        ););
      ); 
```

这两个元素都属于同一组字段集。如何使它们封装在 div 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:29:26.590

您可以尝试为 div open 和 div close 创建自己的表单元素：

MyApp/Form/Element/Divopen.php

```
require_once 'Zend/Form/Element/Xthml.php';
class MyApp_Form_Element_Divopen extends Zend_Form_Element_Xhtml {

public $helper = 'formDivopen';
} 
```

MyApp/Form/Element/Divclose.php

```
require_once 'Zend/Form/Element/Xthml.php';
class MyApp_Form_Element_Divopen extends Zend_Form_Element_Xhtml {

public $helper = 'formDivopen';
} 
```

MyApp/View/Helper/FormDivopen.php

```
require_once 'Zend/View/Helper/FormElement.php';
class MyApp_View_Helper_FormDivopen extends Zend_View_Helper_FormElement {
public function formDivopen($name, $value = null, $attribs) {
$info = $this->_getInfo($name, $value, $attribs);
extract($info);
$xhtml = '<div'
    . ' name="'. $this->view->escape($name) . '"'
    . ' id="'. $this->view->escape($id) . '"'
    . ' value="'. $this->view->escape($value) . '"'
    . $this->_htmlAttribs($attribs)
    . '>';
return $xhtml
}
} 
```

最后：MyApp/View/Helper/FormDivclose.php

```
require_once 'Zend/View/Helper/FormElement.php';
class MyApp_View_Helper_FormDivclose extends Zend_View_Helper_FormElement {
public function formDivclose($name, $value = null, $attribs) {

$xhtml = '</div>';
return $xhtml
}
} 
```

然后以您的形式：

```
$divOpen = $this->createElement('divopen', 'divname');
$this->addElement($divOpen);

$mailRecepientName = new Zend_Form_Element_Text("mailRecepientName" . $id);
$mailRecepientName->setRequired(true)->setLabel('اسم المستفيد')->setDecorators(array(
        'ViewHelper',
        'Errors',
        array(array('data' => 'HtmlTag'), array('tag' => 'span')),
        array('Label', array('tag' => 'span'))
    ););

$mailRecepientNote = new Zend_Form_Element_Text("mailRecepientNote" . $id);
$mailRecepientNote->setRequired(true)->setLabel('البيـــــــان')->setDecorators(array(
        'ViewHelper',
        'Errors',
        array(array('data' => 'HtmlTag'), array('tag' => 'span')),
        array('Label', array('tag' => 'span'))
    ););
  );

$divClose = $this->createElement('divclose', 'closingdiv');
$this->addElement($divClose); 
```

不确定这是否是最好的方法，但它可以解决问题......

# entity-framework - 如何连接多个表？

> ID：11204367
> 
> 赞同：10
> 
> 时间：2012-06-26T09:28:21.503
> 
> 标签：entity-framework, linq-to-sql, lambda, code-first

我有以下课程。我有一个`var`描述类的对象。我想`var`使用 Linq to Sql 或 Lambda 表达式选择与对象中提供的客户端相关的余额。如何加入这些表以从 Account 表中获取余额？

```
public class Description
    {
        public int DescriptionID { get; set; }

       // Attributes

        public int ClientID { get; set; }

        [ForeignKey("ClientID")]
        public virtual Client Client { get; set; }

    }

public class Client
    {
        public int ClientID { get; set; }

       // Attributes

        public int UserID { get; set; }

        [ForeignKey("UserID")]
        public virtual User User { get; set; }

    }

 public class User
    {
        public int UserID { get; set; }

       // Attributes

     }

 public class Account
    {

        public int AccountID { get; set; }

        [Required, Column("Balance"), Display(Name = "Account Balance")]
        public double Balance { get; set; }

        public int UserID { get; set; }

        [ForeignKey("UserID")]
        public virtual User User { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T11:54:35.537

你可以试试这个：

```
var balance = (from a in context.Accounts
               join c in context.Clients on a.UserID equals c.UserID
               where c.ClientID == yourDescriptionObject.ClientID
               select a.Balance)
              .SingleOrDefault(); 
```

或者 - 如果您只有`DescriptionID`：

```
var balance = (from a in context.Accounts
               join c in context.Clients on a.UserID equals c.UserID
               join d in context.Descriptions on c.ClientID equals d.ClientID
               where d.DescriptionID == yourDescriptionID
               select a.Balance)
              .SingleOrDefault(); 
```

（或`FirstOrDefault()`或`ToList()`或`Sum()`？因为您的模型将允许客户/描述与多个帐户相关......）

# c++ - 便携式字符换行符

> ID：11204369
> 
> 赞同：0
> 
> 时间：2012-06-26T09:28:22.757
> 
> 标签：c++, c, qt, stream, newline

有没有办法编写一个跨平台解析器来读取字符直到找到换行符？我在 Linux 中使用 '\0'，但我不确定这也可以在 Windows 上完成。

```
std::string line;
// fill the line
QTextStream ss(&line);

for(;;)
{
    ss >> c;
    if(c == '"' || c=='\0' ) // here I want to continue parsing until a new-line character or a ending double quote is found 
        break;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T09:40:02.057

如果您正在使用 C++ 文本流（`std::istream`和`std::ostream`，除非`ios_base::binary`在打开文件流时设置了标志），那么 C++`\n`以独立于平台的方式处理输入和输出。

这意味着`\r\n`在 Windows 上读取包含的文件会将其视为`\n`，同样输出`\n`将输出特定于平台的换行符。

如果您需要阅读连续的行，最简单的方法是使用[`getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

```
std::string line;
while (getline(std::cin, line)) {
    // process line
} 
```

`\0`永远**不会**被视为换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:32:05.557

C 中的换行符是 '\n' 而不是 '\0'。它将转换为当前平台使用的任何内容。

# asp.net - 如何通过 jquery 获取 wcf 数据服务？

> ID：11204370
> 
> 赞同：0
> 
> 时间：2012-06-26T09:28:24.140
> 
> 标签：asp.net, json, jquery, wcf-data-services

我正在尝试从 jquery 获取 wcf 服务。我写了下面的代码，但出现错误。

jQuery代码：

```
function LoadAutoComplete(method, param) {

    firstIncrement = pageSize + 1;
    $.ajax({
        type: "POST",
        url: "Services/Popup.svc/" + method,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        data: params,
        processdata: true,
        success: function (data) {

            if (data.PopupData != null) {
                alert(data);
            }
            else {
                //response = null;
                //return response;
            }
        },
        error: function (result) { alert("Error"); }
    });
}

function LoadTest(id) {
    var prm = "<%= this.Sequence %>";
    var params = '"sequence":' + prm;
    method = "GetNotes";

    LoadAutoComplete(method,params);
} 
```

.aspx 页面

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Test.aspx.cs" Inherits="Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <script src="JS/Popup.js" type="text/javascript"></script>
  <script type="text/javascript" language="javascript">
    LoadAutoComplete("GetNotes","<%= this.Sequence %>");
  </script>
  <title></title>
</head>
<body>
  <form id="form1" runat="server">
  <div>
  </div>
  </form>
</body>
</html> 
```

GetNotes 是我用业务逻辑编写的方法名称。

错误：Microsoft JScript 运行时错误：“$”未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:32:16.920

您需要包含 jQuery，在其他标签上方添加以下脚本标签：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

# jquery - 如何使用 csv 文件中的 highcharts 制作图表？

> ID：11204371
> 
> 赞同：2
> 
> 时间：2012-06-26T09:28:30.143
> 
> 标签：jquery, highcharts

我正在尝试使用 csv 文件中的 highcharts 制作图表。
以下是我的 csv 文件的数据：

```
0   1.03645399076138    18.680054645644 26.8678147836078
1   2.44625498591384    18.680054645644 26.8678147836078
2   5.45509322517529    18.680054645644 26.8678147836078
3   2.36362640018202    18.680054645644 26.8678147836078
4   2.28307829582599    18.680054645644 26.8678147836078
5   3.41138672777039    18.680054645644 26.8678147836078
... 
```

第一列是 x 轴的数据，另一列是 y 轴的数据。现在这是我找到的代码，我正在尝试适应。

```
<script type="text/javascript">
  jQuery(document).ready(function() {

    var options = {
      chart: {
        renderTo: 'container2',
        defaultSeriesType: 'column'
      },
      title: {
        text: 'Ewarespar Residuals'
      },
      xAxis: {
        categories: []
      },
      yAxis: {
        title: {
          text: 'Units'
        }
      },
      series: []
    };

    /*
         Load the data from the CSV file. This is the contents of the file:

                Apples,Pears,Oranges,Bananas,Plums
                John,8,4,6,5
                Jane,3,4,2,3
                Joe,86,76,79,77
                Janet,3,16,13,15

     */
    jQuery.get('/qark/1/graph2.csv', function(data) {
      // Split the lines
      var lines = data.split('\n');
      jQuery.each(lines, function(lineNo, line) {
        var items = line;

        // header line containes categories
        if (lineNo == 0) {
          jQuery.each(items, function(itemNo, item) {
            if (itemNo > 0) options.xAxis.categories.push(item);
          });
        }

        // the rest of the lines contain data with their name in the first position
        else {
          var series = {
            data: []
          };
          jQuery.each(items, function(itemNo, item) {
            if (itemNo == 0) {
              series.name = item;
            } else {
              series.data.push(parseFloat(item));
            }
          });

          options.series.push(series);

        }

      });

      var chart = new Highcharts.Chart(options);
    });

  });
</script> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:53:46.667

看这部分：

```
jQuery.each(lines, function(lineNo, line) {
    var items = line;

    // header line containes categories
    if (lineNo == 0) {
      jQuery.each(items, function(itemNo, item) { 
```

看到错误了吗？？您正在迭代一个字符串！您需要拆分每一行。如果行中的值由制表符分隔，那么您可以简单地执行以下操作：

```
var items = line.split('\t'); 
```

看到[这个 jsFiddle](http://jsfiddle.net/g7d4W/3/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:09:25.460

你应该：

1.  标准化您的 csv 结果
2.  将正确的选项放到您的高位图上

看[这个例子](http://jsfiddle.net/DUYjt/1/)

# php - 从 iphone 应用程序中的表单获取值到 get 方法中的 php Web 应用程序？

> ID：11204372
> 
> 赞同：0
> 
> 时间：2012-06-26T09:28:34.107
> 
> 标签：php, iphone, forms, zend-framework, get

我试图在 zend 框架中获取表单的请求值

之前我使用的是 post 方法

但是 iphone 应用程序以 get 方法向我发送数据。

我如何使用它，我使用的是 post 值，比如

$post = array('id'=>'2', 'email'=>'4', )

提交表单时，我也想在此表单值中获取值。

我用它来获取帖子值

```
 $post = $this->getRequest ()->getPost (); 
```

我试过这个来获取方法值

```
 $post = $this->getRequest(); 
```

但

我收到此错误 **无法使用 Zend_Controller_Request_Http 类型的对象作为数组**

这是完整的错误信息

> “Zend_Controller_Request_Http 对象（[_paramSources:protected] => 数组（[0] => _GET [1] => _POST）[_requestUri:protected] => /platinum-picks/p-picks/index/registration [_baseUrl:protected] => /platinum-picks/p-picks [_basePath:protected] => [_pathInfo:protected] => /index/registration [_params:protected] => Array ( [controller] => index [action] => registration [模块] => 默认) [_rawBody:protected] => [_aliases:protected] => 数组 () [_dispatched:protected] => 1 [_module:protected] => 默认 [_moduleKey:protected] => 模块 [_controller: protected] => index [_controllerKey:protected] => 控制器 [_action:protected] => 注册 [_actionKey:protected] => action) 致命错误：不能使用 Zend_Controller_Request_Http 类型的对象作为 D 中的数组：\Program Files\Zend\Apache2\htdocs\platinum-picks\application\models\User.php 在第 267 行"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:47:25.157

例如，您可以使用以下方法找到`GET`变量：

```
$this->getRequest()->getParams(); 
```

或者，对于特定变量：

```
$this->getRequest()->getParam('myVar'); 
```

这也将搜索`POST`值。要仅搜索`GET`var，请使用：

```
$this->getRequest()->getQuery('myVar'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:49:17.730

如果我理解正确，您想获取使用 GET 方法传递的值，并且您已经成功地使用 POST 值完成了相同的操作。在这种情况下，您需要进行的唯一更改是：

```
$post = $this->getRequest()->getPost (); 
```

变成

```
$get = $this->getRequest()->getParams(); 
```

这也将返回来自其他来源的参数：

> 检索合并的参数数组，优先于用户空间参数（参见 setParam()）、$_GET、$_POST（即，用户空间参数中的值将优先于所有其他参数）。

因此，如果这对您来说可能是个问题，请参阅手册。

# java - 类铸造不明确

> ID：11204373
> 
> 赞同：1
> 
> 时间：2012-06-26T09:28:36.680
> 
> 标签：java, oop, class, casting

我有以下抽象类：

```
public abstract class AbstractGroup {

private String name;
.
.
.
} 
```

我有两个扩展这个抽象类的空类：

```
public class GroupA extends AbstractGroup {
}

public class GroupB extends AbstractGroup {
} 
```

有没有办法在没有得到的情况下进行以下转换`ClassCastException`：（`group`是类型`GroupA`）

```
group = (GroupB)group; 
```

我需要这个对象实例成为`GroupB`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T09:30:51.320

这是不可能的。您不能水平投射课程，而只能垂直投射。`GroupA`不是的子类型，`GroupB`所以总是会引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:32:09.627

不，你不能。您可以向上或向下转换继承层次结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:36:59.110

不，你不能，因为 GroupA 不是 GroupB 的实例。怎么样：

```
public abstract class AbstractGroup {

  public Enum Group { GroupA, GroupB; }

  private String name;
  private Group membership;
.
.
.
} 
```

进而：

```
group.setMembership(GroupB); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T10:24:26.067

您要求的不是*转换*，而是*转换*。这两个术语都包含在总称*coercion*中。Java 不会自动为您转换对象，即使尝试过也无法转换，因为这通常是一个定义不明确的问题。您必须编写自己的代码来执行转换 - 以转换构造函数的形式，或者一些静态转换方法，或者可能是返回转换对象的源对象中的实例方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:34:16.423

不，这是不可能的。但是您可能想做的是向 Groups 添加一些构造函数，以允许从不同的实现进行构造。

```
public class GroupA extends AbstractGroup {
    public GroupA(AbstractGroup otherGroup) {
        this.name = otherGroup.name;
    }
} 
```

但是，如果您发现自己需要这样做，那么您的设计可能是错误的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-27T10:39:17.543

如果您执行以下操作，则可能：

```
 GroupA groupAobj = new GroupA();
    AbstractGroup abstractObj = (AbstractGroup) groupAobj;
    GroupB groupBobj = (GroupB) abstractObj; 
```

代码编译并运行。

# sockets - 使用 ServerSocket 绑定已使用的端口时，Java 7 不会抛出 BindException

> ID：11204377
> 
> 赞同：2
> 
> 时间：2012-06-26T09:28:51.347
> 
> 标签：sockets, jvm, java, serversocket

我正在 Windows 7 x64 上使用 Java 中的 ServerSocket 进行试验。我编写了一个小程序，它在端口 8080 上托管一个 HTTP 服务器，并且只返回一个包含类加载器的 toString() 的静态 HTML 响应。

我在程序中所做的主要是：

1.  创建一个服务器套接字
2.  在 serverSocket 上调用 setReuseAddress(false)
3.  将端口 8080 绑定到此套接字
4.  使用永远循环来接受套接字并给出响应

首先，我尝试使用 JRE 1.6.0_23，一切都很好：第一个实例启动并正常响应，第二个实例无法启动，因为抛出了异常：

```
Exception in thread "main" java.net.BindException: Address already in use: JVM_Bind 
```

当我尝试使用 JRE 1.7.0_5 时发生了意想不到的事情：两个实例都可以成功启动，但只有第一个实例给出响应。第一个实例被杀死后，第二个实例开始响应。

我做错了什么还是这是 JRE 7 的错误？

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.net.Socket;

public class TestServerSocket {
    private static final String HEADER = "HTTP/1.1 200 OK\r\n" + "Content-type: text/html\r\n"
            + "Connection: close\r\n" + "\r\n";

    private static final int PORT = 8080;

    private static void handle(Socket socket) {
        System.out.println(socket.getInetAddress() + ":" + socket.getPort());
        StringBuilder buffer = new StringBuilder();
        buffer.append(HEADER);
        buffer.append(TestServerSocket.class.getClassLoader());
        try {
            socket.getOutputStream().write(buffer.toString().getBytes());
        } catch (IOException e) {
        } finally {
            try {
                socket.close();
            } catch (IOException e) {
            }
        }

    }

    public static void main(String[] args) throws IOException {
        int port;

        try {
            port = Integer.parseInt(args[0]);
        } catch (Exception e) {
            port = PORT;
        }

        final ServerSocket server = new ServerSocket();
        server.setReuseAddress(false);
        server.bind(new InetSocketAddress(port));

        // Terminator thread, stop when Ctrl-D is entered
        new Thread() {
            public void run() {
                try {
                    while (System.in.read() != 4);
                } catch (IOException e) {
                    e.printStackTrace();
                }
                try {
                    server.close();
                } catch (IOException e) {
                }
                System.exit(0);
            }
        }.start();

        System.out.println("Listening on: " + port);
        Socket client = null;
        while (true) {
            try {
                client = server.accept();
                handle(client);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T03:42:20.733

为了隔离问题，我建议您运行以下测试代码。 [Apache HttpCore 基本服务器](http://hc.apache.org/httpcomponents-core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpServer.java)。它是标准 API，并在此特定示例中使用 ServerSocket，因此它在您的环境（java 7）上失败的可能性非常小。

如果它失败了，您肯定会知道问题不在于您的代码。同时，我将在我的工作机器上尝试您在 JDK 7 上的代码并进行更新。

# ios - 在 HTML5 / Phonegap 中保存网页的状态

> ID：11204385
> 
> 赞同：2
> 
> 时间：2012-06-26T09:29:14.197
> 
> 标签：ios, html, mobile, cordova

我刚刚开始使用 Phonegap 制作 iPad 应用程序。

在我的一个页面上，我访问相机，拍照，在页面上显示该图片，然后有许多可自定义的选项（调整大小，可以拖动到图像顶部的其他元素的位置等）

但是，一旦您单击不同的链接（标签栏项目），所有这些信息都会丢失，并且您必须在返回照片页面后重新开始。有没有一种方法可以捕获当前状态的网页，或者甚至单独获取每个元素信息（页面上的位置、最后拍摄的照片等），以便当用户返回下一个屏幕时，所有内容都按原样加载用户离开屏幕。

希望这是有道理的，有人可以提供帮助！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:09:04.730

我自己只是一个Phonegap的初学者，但我相信你可能想研究一下localStorage。[http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html#localStorage)

您将需要使用 JavaScript（可能还有像 jQuery 这样的库）来获取有关页面当前状态的各种数据。一旦你知道它们，你应该能够存储它们，以便以后通过 localStorage 在后续会话中检索。

我希望这有帮助。

# c++ - 包括 boost::property_tree 会引发编译器错误

> ID：11204386
> 
> 赞同：0
> 
> 时间：2012-06-26T09:29:18.003
> 
> 标签：c++, boost, boost-propertytree

我尝试在 SystemC 项目中使用 boost 属性树。项目用途：

```
gcc 4.6.3
systemc 2.2
boost 1.46 
```

标题：

```
#include <typeinfo>
#include <map>
#include <vector>
#include <string>
#include <exception>
#include <boost/property_tree/ptree.hpp> <-- line 17

class PersistenceProvider
{
static PersistenceProvider* m_instance;

//! private constructor to assure there is one instance
PersistenceProvider();

std::string GetTypePath(const std::string &name) const ;
std::string GetValuePath(const std::string &name)const ;

boost::property_tree::ptree m_ptree;
public:

 //! returns the current instance of the persistence provider
  static PersistenceProvider* getInstance();

  ~PersistenceProvider();

  template <class T>
  T get(std::string path);

  template <class T>
  void set(std::string path, T data);
}; 
```

代码：

```
template <class T>
T PersistenceProvider::get(const std::string path)
{
const std::string typePath = GetTypePath(path);
std::string type = m_ptree.get<std::string>(typePath);
if(typeid(T).name() != type)
{
    assert("wrong type");
}

const std::string dataPath = GetValuePath(path);
return m_ptree.get<T >(dataPath);
}

template <class T>
void PersistenceProvider::set(const std::string path, const T data) 
{
std::string type = typeid(T).name();
const std::string typePath = GetTypePath(path);
m_ptree.put<std::string >(typePath, type, true);
const std::string dataPath = GetValuePath(path);
m_ptree.put<T >(dataPath, data, true);
} 
```

但是当我将 property_tree.hpp 添加到我的头文件时，gcc 会抛出以下内容：

```
In file included from /usr/include/boost/type_traits/is_reference.hpp:17:0,
                 from /usr/include/boost/type_traits/intrinsics.hpp:132,
                 from /usr/include/boost/type_traits/alignment_of.hpp:15,
                 from /usr/include/boost/optional/optional.hpp:24,
                 from /usr/include/boost/optional.hpp:15,
                 from /usr/include/boost/property_tree/id_translator.hpp:16,
                 from /usr/include/boost/property_tree/string_path.hpp:15,
                 from /usr/include/boost/property_tree/ptree.hpp:16,
                 from ../src/tb_systemc/../behavior_systemc/PersistenceProvider.h:17,
                 ...
/usr/include/boost/type_traits/is_rvalue_reference.hpp:21:1: error: template argument 1 is invalid
In file included from /usr/include/boost/type_traits/intrinsics.hpp:133:0,
             from /usr/include/boost/type_traits/alignment_of.hpp:15,
             from /usr/include/boost/optional/optional.hpp:24,
             from /usr/include/boost/optional.hpp:15,
             from /usr/include/boost/property_tree/id_translator.hpp:16,
             from /usr/include/boost/property_tree/string_path.hpp:15,
             from /usr/include/boost/property_tree/ptree.hpp:16,
             from ../src/tb_systemc/../behavior_systemc/PersistenceProvider.h:17,
             ...
/usr/include/boost/type_traits/is_volatile.hpp:60:35: error: template argument 1 is invalid
In file included from /usr/include/boost/type_traits/is_member_function_pointer.hpp:25:0,
             from /usr/include/boost/type_traits/is_member_pointer.hpp:28,
             from /usr/include/boost/type_traits/is_pointer.hpp:24,
             from /usr/include/boost/type_traits/is_scalar.hpp:14,
             from /usr/include/boost/type_traits/is_pod.hpp:14,
             from /usr/include/boost/type_traits/has_trivial_constructor.hpp:14,
             from /usr/include/boost/type_traits/has_nothrow_constructor.hpp:12,
             from /usr/include/boost/optional/optional.hpp:25,
             from /usr/include/boost/optional.hpp:15,
             from /usr/include/boost/property_tree/id_translator.hpp:16,
             from /usr/include/boost/property_tree/string_path.hpp:15,
             from /usr/include/boost/property_tree/ptree.hpp:16,
             from ../src/tb_systemc/../behavior_systemc/PersistenceProvider.h:17,
             ...
/usr/include/boost/type_traits/remove_cv.hpp:44:36: error: template argument 1 is invalid
In file included from /usr/include/boost/optional/optional.hpp:26:0,
             from /usr/include/boost/optional.hpp:15,
             from /usr/include/boost/property_tree/id_translator.hpp:16,
             from /usr/include/boost/property_tree/string_path.hpp:15,
             from /usr/include/boost/property_tree/ptree.hpp:16,
             from ../src/tb_systemc/../behavior_systemc/PersistenceProvider.h:17,
             ...
/usr/include/boost/type_traits/type_with_alignment.hpp:206:5: error: ‘found’ is not a type
/usr/include/boost/type_traits/type_with_alignment.hpp:206:5: error: expected ‘,’ or ‘...’ before ‘&gt;=’ token
/usr/include/boost/type_traits/type_with_alignment.hpp:207:5: error: ‘found’ is not a type
/usr/include/boost/type_traits/type_with_alignment.hpp:207:5: error: expected ‘,’ or ‘...’ before ‘%’ token
/usr/include/boost/type_traits/type_with_alignment.hpp:207:5: error: ‘int boost::detail::type_with_alignment_imp<Align>::static_assert(int)’ cannot be overloaded
/usr/include/boost/type_traits/type_with_alignment.hpp:206:5: error: with ‘int boost::detail::type_with_alignment_imp<Align>::static_assert(int)’
... 
```

还有更多人说同样的话..

这发生在包含时间而不是使用时。这可能是由于缺少包含或命名空间引起的吗？

# java - 是否可以在 Spring AOP 建议中使用事务？

> ID：11204390
> 
> 赞同：2
> 
> 时间：2012-06-26T09:29:33.373
> 
> 标签：java, spring, transactions, spring-aop

我正在尝试使用 Spring AOP 在数据库表中实现日志记录。通过“登录表”，我的意思是在域对象的常用表中写入有关已创建/更新/删除的记录的特殊日志表信息。

我编写了部分代码，除了一件事外，一切都运行良好 - 当事务回滚时，日志表中的更改仍然成功提交。这对我来说很奇怪，因为在我的 AOP 建议中，我的业务和 DAO 层使用了相同的事务。（根据我的 AOP 建议，我使用事务传播 MANDATORY 调用了特殊管理器类的方法，并且我在业务层、dao 层和 AOP 建议中检查了事务名称*TransactionSynchronizationManager.getCurrentTransactionName() ，它是相同的）。*

有没有人试图在实践中实现类似的东西？如果业务层发生错误，是否可以在 AOP 建议中使用与业务层中相同的事务以及在 AOP 建议中进行的回滚更改？

预先感谢您的答复。

**编辑**

我想澄清回滚问题仅发生在从 AOP 建议进行的更改中。在 DAO 层中所做的所有更改都已成功回滚。我的意思是，例如，如果抛出一些异常，那么在 DAO 层所做的更改将被成功回滚，但在日志表中的信息将被保存（提交）。但我不明白为什么会这样，因为正如我在上面在 AOP 建议中所写的那样，正在使用同一个事务。

**编辑 2**

我用调试器检查了我在 AOP 建议中写入日志表的代码片段，在我看来，JdbcTemplate 的更新方法在事务外部执行，因为在执行语句之后和事务方法之前直接将更改提交到数据库完成了。

**编辑 3**

我解决了这个问题。其实那是我愚蠢的错。我正在使用 MySQL。创建日志表后，我没有更改数据库引擎，HeidySQL 默认设置了 MyIsam。但是 MyIsam 不支持事务，所以我将数据库引擎更改为 InnoDB（对于所有其他表），现在一切正常。

谢谢大家的帮助，很抱歉打扰了。

如果有人感兴趣，这里有一个简化的例子来说明我的方法。

考虑具有保存方法的 DAO 类：

```
@Repository(value="jdbcUserDAO")
@Transactional(propagation=Propagation.SUPPORTS, readOnly=true, rollbackFor=Exception.class)
public class JdbcUserDAO implements UserDAO {
@Autowired
    private JdbcTemplate jdbcTemplate;

    @LoggedOperation(affectedRows = AffectedRows.ONE, loggedEntityClass = User.class, operationName = OperationName.CREATE)
    @Transactional(propagation=Propagation.REQUIRED, readOnly=false, rollbackFor=Exception.class)
    @Override
    public User save(final User user) {
        if (user == null || user.getRole() == null) {
            throw new IllegalArgumentException("Input User object or nested Role object should not be null");
        }

        KeyHolder keyHolder = new GeneratedKeyHolder();
        jdbcTemplate.update(new PreparedStatementCreator() {

            @Override
            public PreparedStatement createPreparedStatement(Connection connection)
                    throws SQLException {

                PreparedStatement ps = connection.prepareStatement(SQL_INSERT_USER, new String[]{"ID"});

                ps.setString(1, user.getUsername());
                ps.setString(2, user.getPassword());
                ps.setString(3, user.getFullName());
                ps.setLong(4, user.getRole().getId());
                ps.setString(5, user.geteMail());

                return ps;
            }
        }, keyHolder);

        user.setId((Long) keyHolder.getKey());

        VacationDays vacationDays = user.getVacationDays();
        vacationDays.setId(user.getId());

        // Create related vacation days record.
        vacationDaysDAO.save(vacationDays);

        user.setVacationDays(vacationDays);

        return user;
    }
} 
```

这是方面的样子：

```
@Component
@Aspect
@Order(2)
public class DBLoggingAspect {

    @Autowired
    private DBLogManager dbLogManager;

    @Around(value = "execution(* com.crediteuropebank.vacationsmanager.server.dao..*.*(..)) " +
            "&& @annotation(loggedOperation)",  argNames="loggedOperation")
    public Object doOperation(final ProceedingJoinPoint joinPoint,
            final LoggedOperation loggedOperation) throws Throwable {

        Object[] arguments = joinPoint.getArgs();

        /*
         * This should be called before logging operation.
         */
        Object retVal = joinPoint.proceed();

        // Execute logging action
        dbLogManager.logOperation(arguments, 
                loggedOperation);

        return retVal;
    }

} 
```

这是我的数据库日志管理器类 LooksLike：

```
@Component("dbLogManager")
public class DBLogManager { 

    @Autowired
    private JdbcTemplate jdbcTemplate;

    @InjectLogger
    private Logger logger;

    @Transactional(rollbackFor={Exception.class}, propagation=Propagation.MANDATORY, readOnly=false)
    public void logOperation(final Object[] inputArguments, final LoggedOperation loggedOperation) {

        try {

             /*
              * Prepare query and array of the arguments
              */

            jdbcTemplate.update(insertQuery.toString(), 
                    insertedValues);

        } catch (Exception e) {

            StringBuilder sb = new StringBuilder();

            // Prepare log string

            logger.error(sb.toString(), e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:30:13.757

这可能与建议的顺序有关 - 您希望与 @Transaction 相关的建议在您的日志相关建议前后（或之前和之后）生效。如果您使用 Spring AOP，您可能可以使用通知的 order 属性来控制它 - 为您的事务相关通知提供最高优先级，以便它在退出时最后执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:38:00.923

与 AOP 无关，将 datasource 属性设置`autocommit`为 false，例如：

```
<bean id="datasource" ...>
    <property name="autoCommit" value="false/>
</bean> 
```

如果您使用的是 xml 配置

# ads - 需要有关 adServer 以及如何创建我的 owen adServer 的更多信息？

> ID：11204391
> 
> 赞同：0
> 
> 时间：2012-06-26T09:29:38.257
> 
> 标签：ads, advertisement-server

我需要查找书籍、网站或任何东西来了解 AdServer 和 AdServing，因为我需要开发自己的 AdServer。我已经做了很多搜索，但我没有找到有趣的东西。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:08:11.337

首先，今天的“移动广告服务器”没有明确的规格，而且大部分都是“重新校准”的经典广告服务器，我想不出一个值得谈论的开源移动广告服务器。

我认为您应该熟悉经典广告服务器的工作方式，然后您就可以超越。我做过一次自己的研究，到目前为止我发现的最好的资源是：

*   一些你可以学习的开源广告服务器（取决于你喜欢的编程平台，我能想到的最稳定的是[OpenX](http://www.openx.com)）

*   此链接：[互动广告局](http://www.iab.net/about_the_iab)，它是美国 86% 在线广告背后的有机体。它的使命是规范在线广告行业背后的业务规范，您可以从他们的网站上学到很多东西。

与此字段相关的信息很敏感，这说明您的问题缺乏真实答案。祝你好运 ：-）

# jasper-reports - 动态jasper addConcatenatedReport 在一个框架中

> ID：11204392
> 
> 赞同：2
> 
> 时间：2012-06-26T09:29:43.873
> 
> 标签：jasper-reports, subreport, dynamic-jasper

是否可以在放置在详细信息带中的框架中连接子报表？目标是在模板的详细信息部分中显示这些子报表和先前定义的元素。

如果我在从模板加载的详细报告中使用`dynamicReportBuilder.setTemplateFile(TEMPLATE);`和`dynamicReportBuilder.addConcatenatedReport(subreport);`插入子报告，则报告模板的详细信息集中先前定义的元素将消失。所以我正在寻找保存这些元素的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:24:24.977

根据您的评论，似乎正在发生两件事之一。

`Detail`1) 您在模板文件的区域中定义了子报告。

在这种情况下，它将不起作用。模板文件中的`Detail`带区应该是空的。如果是这种情况，则很可能只是忽略您在那里拥有的一切并做其他所有事情。查看[如何使用 custum jrxml 模板](http://dynamicjasper.com/2010/10/06/how-to-use-custom-jrxml-templates/)了解更多信息。

2）`dynamicReportBuilder.addConcatenatedReport(subreport);`不做你认为它做的事。

此方法将第二个报告附加到第一个报告的末尾。把它想象成一个批次。`JASPER_PRINT_LIST`这与直接使用 Jasper Reports API 时为导出参数设置值相同。查看[如何添加串联报告](http://dynamicjasper.com/2010/10/08/how-to-add-concatenated-subreports/)以获取更多信息。

* * *

Dynamic Jasper 是一个很棒的库，但实际上只设计用于标准表格报告。它支持一些高级功能，包括子报告，但它可能会受到限制。

从目前我能找到的情况来看，您似乎只能将子报告添加到组页眉和组页脚。因此，在您的情况下，您可能需要添加一个组以首先使用`GroupBuilder`. 然后您可以将子报表添加到组页脚。组的诀窍是通过选择适当的字段进行分组，以确保每一行最终成为自己的组。

[您可以查看如何在组页眉和页脚中添加标签中](http://dynamicjasper.com/2010/10/05/add-labels-in-group-header-and-footer/)的代码示例，以了解如何构建组。

要查看如何将子报表添加到报表中，您可以使用`DynamicReportBuilder.addSubreportInGroupFooter()`方法。有关这部分的更多详细信息和示例，请查看[如何添加子报表（快速方式）](http://dynamicjasper.com/2010/10/06/how-to-add-subreports-fast-way/)。

您可以选择的另一个选项是不对这个特定报告使用动态 Jasper，而只需使用 jrxml 文件和 Jasper 报告的 API 自己来完成。根据您的设置，它可能会也可能不会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T22:13:46.920

里卡多·马里亚卡。此代码是解决方案，感谢 Ricardo 和 Dynamic Report

```
 private void build() {
    try {
        JasperPdfExporterBuilder pdfExporterBuilder = export
                .pdfExporter(PDF_FILE);
        JasperReportBuilder jasperReportBuilderMain = report()
                .columns(
                        col.column("Item", "item", type.stringType()),
                        col.column("Quantity", "quantity",
                                type.integerType()),
                        col.column("Unit price", "unitprice",
                                type.bigDecimalType()))
                .setDataSource(createSubreportDataSource())
                // .detail(cmp.subreport(createSubreport()))
                .setWhenNoDataType(WhenNoDataType.ALL_SECTIONS_NO_DETAIL);

        JasperReportBuilder jasperReportBuilderDisclaimer = report()
                .setPageFormat(PageType.A4, PageOrientation.LANDSCAPE)
                .summary(cmp.subreport(jasperReportBuilderMain))
                .summaryWithPageHeaderAndFooter()
                .setWhenNoDataType(WhenNoDataType.ALL_SECTIONS_NO_DETAIL)
                .columnHeader(
                        cmp.text("first page header").setFixedHeight(50))
                .columnFooter(
                        cmp.text(DISCLAIMER).setStretchWithOverflow(true)
                                .setFixedHeight(250))
                .pageHeader(
                        Templates
                                .createTitleComponent("Ricardo Mariaca Approach"))
                .pageFooter(Templates.footerComponent).show()
                .toPdf(pdfExporterBuilder);

    } catch (DRException e) {
        e.printStackTrace();
    }
}

private JRDataSource createSubreportDataSource() {
    DRDataSource dataSource = new DRDataSource("item", "quantity",
            "unitprice");
    for (int i = 0; i < 180; i++) {
        dataSource.add("Book", (int) (Math.random() * 10) + 1,
                new BigDecimal(Math.random() * 100 + 1));
    }
    return dataSource;
} 
```

}

# perl - 为什么 RegEx 的输出错误？

> ID：11204396
> 
> 赞同：2
> 
> 时间：2012-06-26T09:30:12.203
> 
> 标签：perl

当我运行下面的脚本时，我得到

```
$VAR1 = [
          'ok0.ok]][[file:ok1.ok',
          undef,
          undef,
          'ok2.ok|dgdfg]][[file:ok3.ok',
          undef,
          undef,
          undef,
          undef,
          undef,
          undef,
          undef,
          undef,
          undef,
          undef,
          undef,
          undef,
          undef
        ]; 
```

我希望的地方`ok0.ok ok1.ok ok2.ok ok3.ok`，理想情况下也是`ok4.ok ok5.ok ok6.ok ok7.ok`

**问题**

谁能看到我做错了什么？

```
#!/usr/bin/perl

use strict;
use warnings;
use Data::Dumper;

my $html = "sdfgdfg[[file:ok0.ok]][[file:ok1.ok ]] [[file:ok2.ok|dgdfg]][[file:ok3.ok |dfgdfgg]] [[media:ok4.ok]] [[media:ok5.ok ]] [[media:ok6.ok|dgdfg]] [[media:ok7.ok |dfgdfgg]]ggg";

my @seen = ($html =~ /file:(.*?) |\||\]/g);

print Dumper \@seen; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:39:50.247

我认为，否定字符类可以简化一些事情。明确说明您的锚点（文件：或媒体：），并明确说明终止序列的内容（空格、管道或右括号）。然后捕获。

`my @seen = $html =~ m{(?:file|media):([^\|\s\]]+)}g;`

解释：

```
my @seen = $html =~ m{
    (?:file|media):        # Match either 'file' or 'media', don't capture, ':'
    ( [^\|\s\]]+ )         # Match and capture one or more, anything except |\s]
}gx; 
```

一旦遇到`]`、`|`或，捕获就会停止。`\s`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:41:16.783

尝试

```
my @seen = ($html =~ /\[\[\w+:(\w+\.\w+)\]\]/g); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T10:18:17.390

这就是您的正则表达式所做的：

```
 ...
 my $ss = qr {
              file: # start with file + column as anchor
              (         # start capture group
               .*?      # use any character in a non-greedy sweep
              )         # end capture group
              \s        # end non-greedy search on a **white space**

              |     # OR expression encountered up to here with:
              \|     # => | charachter  
              |      # OR expression encountered up to here with:
              \]       # => ] charachter  
              }x;

 my @seen = $html =~ /$ss/g;
 ... 
```

这就是你的正则表达式应该做的：

```
 ...
 my $rb = qr {
             \w :      # alphanumeric + column as front anchor
             (         # start capture group 
              [^]| ]+  # the terminating sequence
             )         # end capture group 
            }x;

 my @seen = $html =~ /$rb/g;
 ... 
```

如果你想要一个简短、简洁的正则表达式并且知道你在做什么，你可以完全放弃捕获组并在列表上下文中使用完整的捕获块以及积极的后视：

```
 ...
 my @seen = $html =~ /(?<=(?:.file|media):)[^] |]+/g; # no cature group ()
 ... 
```

或者，如果您的数据中没有其他结构需要处理，请使用`:`as only 锚：

```
 ...
 my @seen = $html =~ /(?<=:)[^] |]+/g;   # no capture group and short
 ... 
```

问候

rbo

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T09:37:51.423

看起来您正在尝试匹配`file:`以空格、管道或右方括号开头和结尾的所有内容。

不过，您在正则表达式末尾的 OR 语句需要位于（方）括号之间：

```
my @seen = ($html =~ /file:(.*?)[] |]/g); 
```

如果你想要 media: 块，或者文件部分。您可能需要一个非捕获组：

```
my @seen = ($html =~ /(?:file|media):(.*?)[] |]/g); 
```

### 这个怎么运作

第一条语句将捕获 'file:' 和 a 或 之间的`]`所有`|`内容`。`

 `第二条语句的作用相同，但同时使用了*file*和*media*。我们使用非捕获组`(?:group)`代替，`(group)`因此不会将单词放入您的`@seen`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T10:27:01.083

根据文件名中可能的字符，我想你可能想要

```
my @seen = $html =~ /(?:file|media):([\w.]+)/g; 
```

它捕获了所有`ok0.ok`到`ok7.ok`.

它依赖于包含字母数字字符加上下划线和点的文件名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T12:06:27.977

我希望这是你所需要的。

```
#!/usr/bin/perl

use strict;  

use warnings;

use Data::Dumper;

my $string = "sdfgdfg[[file:ok0.ok]][[file:ok1.ok ]] [[file:ok2.ok|dgdfg]][[file:ok3.ok |dfgdfgg]] [[media:ok4.ok]] [[media:ok5.ok ]] [[media:ok6.ok|dgdfg]] [[media:ok7.ok |dfgdfgg]]ggg";

my @matches;

@matches = $string =~ m/ok\d\.ok/g;

print Dumper @matches; 
```

输出：

```
$VAR1 = 'ok0.ok';

$VAR2 = 'ok1.ok';

$VAR3 = 'ok2.ok';

$VAR4 = 'ok3.ok';

$VAR5 = 'ok4.ok';

$VAR6 = 'ok5.ok';

$VAR7 = 'ok6.ok';

$VAR8 = 'ok7.ok'; 
```

问候，基兰。`

# c# - 调试混合的 Delphi (native) 和 C# 代码，得到“二进制文件是在没有调试信息的情况下构建的”

> ID：11204399
> 
> 赞同：3
> 
> 时间：2012-06-26T09:30:48.693
> 
> 标签：c#, visual-studio, delphi, debugging, debug-symbols

我有一个[带有 native exports](https://sites.google.com/site/robertgiesecke/Home/uploads/csharpprojecttemplateforunmanagedexports)的 C# DLL ，它是从一些 Delphi 2009 代码中调用的。Delphi 代码使用`LoadLibrary`和`GetProcAddress`访问导出的函数。我想在运行时调试代码的托管部分，但我遇到了麻烦。

当我启动应用程序时，断点正确显示，但未能命中。

我当前的设置如下：

*   Visual Studio 2010 中的 C# DLL 项目
*   项目的调试设置设置为“启动外部程序”，指向 Delphi 可执行文件。
*   启用的非托管代码调试已关闭。
*   调试选项中启用了仅我的代码（这似乎没有什么区别）

我尝试启用非托管代码调试，但这会导致错误提示“二进制文件是在没有调试信息的情况下构建的”。如果我继续，所有断点都被禁用。

当我检查模块列表时，可执行文件显示为没有调试符号。Delphi 不生成 PDB（它不能，因为它是封闭规范的专有格式），而是生成一个 MAP 文件。我环顾四周寻找 MAP-to-PDB 转换器工具，但似乎只有一个工具可以与我需要的相反。

我对从 Visual Studio 调试 Delphi 代码并不是很感兴趣，因为我已经可以在 CodeGear Delphi IDE 中做到这一点，但是在这种情况下有没有办法在运行时调试托管代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:37:51.597

好的，我找到了解决方案。问题不在于调试符号，而在于被调试的代码类型。如果您从项目启动设置中启动应用程序，调试器将以混合模式启动，这需要本机符号可用以捕获从本机代码调用的 C# 代码。

我无法让 Visual Studio 接受由[tds2dbg](http://code.google.com/p/map2dbg/)创建的 pdb 文件，因此我找到了一种解决方法。为了确保调试器在托管模式下启动，请附加到进程而不是启动它，如下所示：

1.  调试 -> 附加到进程...
2.  选择正在运行的进程。
3.  单击“附加到”右侧的“选择...”按钮。
4.  选择“调试这些代码类型”
5.  检查 .NET 3.5 或更低版本的托管（v2.0、v1.1、v1.0）或 .NET 4.0 或更高版本的托管（v4.0）。不知道为什么这里的命名不包括 v3.5。
6.  单击确定，单击附加。

在此之后，所有断点都应该可以正常工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:12:08.750

有一个“tds2pdb”，您可以尝试创建一个 .pdb 文件： [http ://code.google.com/p/map2dbg/downloads/detail?name=tds2pdb102.zip](http://code.google.com/p/map2dbg/downloads/detail?name=tds2pdb102.zip)

注意：它不是一个完整的 .pdb 文件（规格不可用），但至少它适用于堆栈跟踪。但是，并非所有符号（类、变量、参数）都被导出。但你总是可以尝试...

# java - 使用正则表达式删除引号

> ID：11204402
> 
> 赞同：0
> 
> 时间：2012-06-26T09:30:53.607
> 
> 标签：java, regex

我看到了一个[很好的示例](https://stackoverflow.com/questions/10980141/remove-quotes-from-quoted-string-using-regex)，但我无法根据我的问题调整它。

我想从 CSV 行中*仅删除封闭字段，例如：* `"`

```
" kkl ";"aa bb D";;12 "AA";;"SSS"-;" gg 12";" vv";"sdqs "; 
```

预期结果 ：

```
 kkl ;aa bb D;;12 "AA";;"SSS"-; gg 12; vv;sdqs ; 
```

我使用 Pattern 和 Matcher 工具

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T09:36:00.987

`\"`此解决方案假定带引号的字符串中没有转义引号

```
.replaceAll("(?<=^|;)\"([^\"]*?)\"(?=;|$)", "$1") 
```

我假设您还想`"`在这些情况下剥离`"sdfkjhksdf"`：`;;;"dffff"`

`"`另一种解决方案使用所有格量词，其效果依赖于没有出现在引用部分内的假设。

```
.replaceAll("(?<=^|;)(?:\"(.*?)\"){1}+(?=;|$)", "$1") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:50:31.297

对@nhahtdh 的正则表达式进行小修改，以防止它在 CSV 边界之外贪婪地匹配：

```
.replaceAll("(?<=^|;)\"([^;]*)\"(?=;|$)", "$1"); 
```

# javascript - 将现有 jQuery 从点击功能转换为延迟自动显示

> ID：11204403
> 
> 赞同：0
> 
> 时间：2012-06-26T09:30:54.713
> 
> 标签：javascript, jquery

目前，主页文本仅通过启动滑出的单击功能显示。

我想做的是改变它，这样它就不需要点击来显示。我希望在页面加载大约 3 秒后显示（淡入）文本。

这是我目前所拥有的：-

```
$('.introbox span').replaceWith(function(){

return '\
    <div class="slideOutTip '+$(this).attr('class')+'" style="'+$(this).attr('style')+'">\
        \
        <div class="tipVisible">\
            <div class="tipIcon"><div class="plusIcon"></div></div>\
            <span class="tipTitle">'+$(this).attr('title')+'</span>\
        </div>\
        \
        <div class="slideOutContent">\
            <p>'+$(this).html()+'</p>\
        </div>\
    </div>';
}); 
```

单击“plusIcon”时，文本会滑出并可见。

监听点击功能是......

```
$('.tipVisible').bind('click',function(){
    var tip = $(this).parent(); 
```

所以我假设这是我需要转换必要的使用自动加载的地方，也许是 setDelay 和 FadeIn，尽管我不是 100%。

请有人建议如何将其更改为不使用点击但延迟后自动显示？提前致谢。

如果更容易看到我正在尝试做的事情，尝试在[jsfiddle](http://jsfiddle.net/zigojacko/sXWag/2/)中添加代码- 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:38:39.723

很简单：用你所做的做一个函数，`.tipVisible.click`然后设置一个`window.setTimeout(yourFunction, 3000);`

@Comment：您的 JS 已经非常复杂，我可能会重新组织和重新编码所有内容，以便我可以给您一个提示如何实现它（当我将它添加到您的小提琴中时没有立即工作，但我是有点懒得在那里找到问题）。

```
 var animate = function(obj) {
        var tip = obj ? $(obj).parent() : $(".tipVisible").parent();

        /* If a open/close animation is in progress, exit the function */
        if (tip.is(':animated')) return false;

        if (tip.find('.slideOutContent').css('display') == 'none') {
            tip.trigger('slideOut');
        }
        else tip.trigger('slideIn');
    }

    window.setTimeout( animate, 3000);

    $('.tipVisible').bind('click', function() {
        animate(this);
    }); 
```

编辑：好吧，[这](http://jsfiddle.net/sXWag/6/)至少是在做一些事情，现在你必须弄清楚什么时候需要做什么以及如何做；）

PS：你使用了 jQuery 但加载了 Mootools 框架...... Mootools 不知道 $(document).ready()

# javascript - 屏蔽和取消屏蔽 html 中的输入文本

> ID：11204406
> 
> 赞同：5
> 
> 时间：2012-06-26T09:31:23.200
> 
> 标签：javascript, html

我的文本字段很少，例如 SSN 、电话号码和电子邮件 ID。我想做像 onfocus 这样的事情，它应该显示该输入框的全部内容，并且在模糊时它应该将内容掩盖回某些东西（比如 asterix）。提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T09:37:37.757

您可以在两个事件之间切换`<input>`元素的类型。请参阅此[示例小提琴](http://jsfiddle.net/VWAhC/)。`password``text`

HTML

```
<input type="password" id="target" /> 
```

JS

```
<script>
var inp = document.querySelector( '#target' );

inp.addEventListener( 'focus', function(){
    inp.type = 'text';
});
inp.addEventListener( 'blur', function(){
    inp.type = 'password';
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:44:05.307

试试这样：

```
<input type="text" id="emailId" name="emailId" /> 
```

然后，做一个：

```
var emailIdValue = "";

$( document ).ready( function() {

     emailIdValue = $( '#emailId' ).val();   

     $( '#emailId' ).val( "********" );

     $( '#emailId' ).focus( function() {

          $( this ).val( emailIdValue );

     } ).focusout( function() {

          emailIdValue = $( this ).val();
          $( this ).val( '********' );

     } );

} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:34:10.253

`<input type="password" />`如果你想简单的话，你可以简单地使用。

# r - R - 向量化哪个操作

> ID：11204409
> 
> 赞同：3
> 
> 时间：2012-06-26T09:31:39.573
> 
> 标签：r, loops, vectorization

嗨，我在 R 中有一个函数，我正在尝试优化性能。我需要矢量化一个 for 循环。我的问题是稍微复杂的数据结构以及我需要使用“which”命令执行查找的方式。

假设我们正在处理 5 个元素 (1,2,3,4,5)，10x2 矩阵对是 5 个元素的所有唯一对的组合（即 (1,2), (1,3),(1 ,4) ....(4,5))。all_prods 是一个 10x1 矩阵，我需要在遍历所有 5 个元素时使用这些对进行查找。

所以对于 1，我需要从 all_prods 中索引第 1、2、3、4 行（对 1,2 1,3 1,4 和 1,5），依此类推，对于 1、2、3、4、5。

我最近才从 matlab 切换到 R，所以非常感谢任何帮助。

```
foo <- function(AA , BB , CC ){
    pa <- AA*CC;
    pairs <-  t(combn(seq_len(length(AA)),2));

    all_prods <- pa[pairs[,1]] * pa[pairs[,2]];

    result <- matrix(0,1,length(AA));

    # WANT TO VECTORIZE THIS BLOCK
    for(st in seq(from=1,to=length(AA))){
       result[st] <- sum(all_prods[c(which(pairs[,1]==st), which(pairs[,2]==st))])*BB[st];
    }
   return(result);
}
AA <- seq(from=1,to=5); BB<-seq(from=11,to=15); CC<-seq(from=21,to=25);
results <- foo(AA,BB,CC);

#final results is [7715 164208 256542 348096 431250] 
```

我想将 for 循环转换为矢量化版本。我不想循环遍历每个元素 st，而是想在一个命令中执行它，该命令给我一个结果向量（而不是逐个元素地构建它）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T10:35:20.240

你可以这样写你的函数：

```
foo <- function(AA, BB, CC) {
  pa <- AA*CC
  x <- outer(pa, pa)
  diag(x) <- 0
  res <- colSums(x)*BB
  return(res)
} 
```

关键思想是*不*破坏对称性。您对 ordered 的使用`pairs`对应于我的矩阵的右上三角形`x`。尽管这看起来只是要计算的值的一半，但语法和计算开销变得相当大。您正在区分`st`对中的第一个元素与第二个元素的情况。稍后这会导致摆脱这种区别相当麻烦。拥有完整的对称矩阵，您不必担心顺序，并且事情会顺利矢量化。

# drupal - drupal中的会话表有什么用？

> ID：11204415
> 
> 赞同：1
> 
> 时间：2012-06-26T09:32:03.733
> 
> 标签：drupal

drupal中的会话表有什么用？有时这张桌子崩溃了，谁能告诉我它崩溃的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:30:14.320

会话表跟踪您网站上的用户会话。此表应该为登录到您站点的每个用户都有一个条目。如果某些用户从不同的设备甚至不同的浏览器登录，他们甚至可能拥有多个会话条目。

您可以选择表格并从您的 phpMyAdmin 界面“修复”它，或者作为最后的手段手动清空它，但这会从您的站点注销所有用户。我希望这有帮助...

很难知道它为什么会崩溃，但如果它经常发生，听起来你安装的模块可能会导致问题。我假设您没有修改 Drupal 核心中的任何代码。

# c++ - 使用继承扩展接口

> ID：11204423
> 
> 赞同：3
> 
> 时间：2012-06-26T09:32:20.410
> 
> 标签：c++

```
class IA
{
public:
    virtual void a() = 0;
};

class A: public IA
{
public:
    virtual void a()
    {
    }
};

class IB
{
public:
    virtual void b() = 0;
};

class B: public IB, public A
{
public:
    virtual void b()
    {
    }
};

void f(IA* p)
{

}

int main() 
{
    B b = B();
    IB* p = &b;
    f(p);
} 
```

这是在 C++ 中实现具有继承的接口的正确方法吗？如果是这样，我如何让`f(p);`我的代码中的行编译？基本上，我想如果`IB`可以继承自`IA`，但这会给 B 带来问题。

**更新**

我想要的是`IB`include`IA`的接口，如下。但是，此代码将无法编译，`IA::a()`并且`A::a()`彼此冲突。我应该怎么办？

```
class IA
{
public:
    virtual void a() = 0;
};

class A: public IA
{
public:
    virtual void a()
    {
    }
};

class IB : public IA
{
public:
    virtual void b() = 0;
};

class B: public IB, public A
{
public:
    virtual void b()
    {
    }
}; 
```

**更新 2**

这编译，它看起来正确吗？我需要所有这些虚拟

```
class IA
{
public:
    virtual void a() = 0;
};

class A: virtual public IA
{
public:
    virtual void a()
    {
    }
};

class IB: virtual public IA
{
public:
    virtual void b() = 0;
};

class B: virtual public IB, public A
{
public:
    virtual void b()
    {
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T09:36:27.270

好吧，这当然是正确的方法，但是该行`f(p)`不应该按原样编译，想象一下实现`IB`但不实现的类`IA`，这是可能的，所以你不能假设它们都实现了`IA`。如果你想假设，你可以继承`IB`自`IA`，但这是另一种设计。它可以这样实现：

```
class IA
{
public:
    virtual void a() = 0;
};

class A: virtual public IA
{
public:
    virtual void a()
    {
    }
};

class IB : virtual public IA
{
public:
    virtual void b() = 0;
};

class B: public IB, public A
{
public:
    virtual void b()
    {
    }
}; 
```

# sql - sql在几个数字/年中发现差距

> ID：11204427
> 
> 赞同：0
> 
> 时间：2012-06-26T09:32:33.017
> 
> 标签：sql, select, self-join

我有一张像这样的桌子：

```
id
number 
year 
```

我想找到“漏洞”或差距，不考虑 id 而只考虑几年/数字。

当同一年有两个不连续的数字时存在差距，结果是年份和这两个不连续数字之间的所有数字（不包括极端数字）。另请注意，**下端始终为 1**，因此如果缺少 1，则为间隙。

例如，拥有：

```
id  n   year
1   1   2012   
2   2   2012
3   5   2012
4   2   2010 
```

我想要的结果是：

```
3/2012
4/2012
1/2010 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:03:47.863

在序列中查找缺失条目的技巧是生成序列中所有可用组合的笛卡尔积，然后用于`NOT EXISTS`消除那些存在的组合。这很难以非 DBMS 特定的方式完成，因为它们都有不同的方式来优化动态创建序列。对于 Oracle，我使用：

```
SELECT  RowNum AS r
FROM    Dual
CONNECT BY Level <= MaxRequiredValue; 
```

因此，要生成所有可用 year/n 对的列表，我将使用：

```
SELECT  d.Year, n.r
FROM    (   SELECT  year, MAX(n) AS MaxN 
            FROM    T 
            GROUP BY Year
        ) d
        INNER JOIN
        (   SELECT  RowNum AS r
            FROM    Dual
            CONNECT BY Level <= (SELECT MAX(n) FROM T)
        ) n
            ON r < MaxN; 
```

我得到每年的最大值 n 并将其加入从 1 到最高 n 的整数列表中，其中该整数列出的最大值小于该年份的最大值。

最后用于`NOT EXISTS`消除已经存在的值：

```
SELECT  d.Year, n.r
FROM    (   SELECT  year, MAX(n) AS MaxN 
            FROM    T 
            GROUP BY Year
        ) d
        INNER JOIN
        (   SELECT  RowNum AS r
            FROM    Dual
            CONNECT BY Level < (SELECT MAX(n) FROM T)
        ) n
            ON r = MaxN
WHERE   NOT EXISTS
        (   SELECT  1
            FROM    T
            WHERE   d.Year = t.Year
            AND     n.r = t.n
        ); 
```

**[SQL Fiddle](http://sqlfiddle.com/#!4/b6e1d/24)**上的工作示例

* * *

**编辑**

由于我找不到非 DMBS 特定的解决方案，我想我最好做点正经的事，并为其他 DBMS 创建一些示例。

[SQL Server 示例](http://sqlfiddle.com/#!3/22eb0/2)

[PostgreSQL 示例](http://sqlfiddle.com/#!1/22eb0/4)

[我的 SQL 示例](http://sqlfiddle.com/#!2/22eb0/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:16:58.533

另一种选择是使用这样的临时表：

```
create table #tempTable ([year] int, n int)

insert 
into    #tempTable
select  t.year, 1
from    tableName t 
group by    t.year

while exists(
    select  *
    from    tableName t1
    where   t1.n > (select MAX(t2.n) from #tempTable t2 where t2.year = t1.year)
)
begin

    insert 
    into    #tempTable
    select  t1.year, 
        (select MAX(t2.n)+1 from #tempTable t2 where t2.year = t1.year)
    from    tableName t1
    where   t1.n > (select MAX(t2.n) from #tempTable t2 where t2.year = t1.year)

end

delete  t2
from    #tempTable t2
inner join  tableName t1
on  t1.year = t2.year
and t1.n = t2.n

select  [year], n
from    #tempTable

drop table  #tempTable 
```

# c++ - 如何抑制涉及限制指令的 g++ 错误？

> ID：11204431
> 
> 赞同：2
> 
> 时间：2012-06-26T09:32:47.723
> 
> 标签：c++

我的 C++ 编译器无法理解该`restrict`指令。

如何抑制这些错误？

```
/usr/include/inttypes.h:271: error: expected ',' or '...' before 'nptr' 
```

`usr/include/inttypes.h`包含

```
extern intmax_t strtoimax(const char * restrict nptr, char ** restrict endptr, int base); 
```

编译命令：

```
g++ -c -pipe -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -Wall
-W -D_ISOC99_SOURCE -D_POSIX_C_SOURCE=200112 -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE
-DPIC -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -o player.o ../dir/player.cpp 
```

编辑：

```
$ g++ --version
i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:15:28.913

G++ 不支持`restrict`关键字，该关键字在 C 中有效，但在 C++ 中无效。

它*确实*支持`__restrict__`作为扩展，因此您可以编译`-Drestrict=__restrict__`以使用预处理器将其转换为接受的关键字。

有关详细信息，请参阅[http://gcc.gnu.org/onlinedocs/gcc/Restricted-Pointers.html](http://gcc.gnu.org/onlinedocs/gcc/Restricted-Pointers.html)。

该问题似乎是由于您`-DISOC99_SOURCE`在操作系统上使用的似乎与 C++ 不兼容造成的，因为它启用了在 C++ 中无效的 C99 功能。在 GNU/Linux 上，我建议`-D_GNU_SOURCE`改用，但我怀疑它是否适用于 Mac OS X。

所以`-Drestrict=__restrict__`你可以停止使用`-D_ISOC99_SOURCE`——为什么你甚至需要 C++ 呢？

# c# - 如何显式加载所有集合项的导航属性？

> ID：11204432
> 
> 赞同：0
> 
> 时间：2012-06-26T09:33:00.767
> 
> 标签：c#, entity-framework-4, ef-code-first

这是示例模型类，与 Entity Framework Code First 一起使用：

```
public class Master
{
  public int Id { get; set; }
  public Collection<Detail> Details { get; set; }
}

public class Detail
{
  public int Id { get; set; }
  public Master Master { get; set; }
  public SubDetail SubDetail1 { get; set; }
  public SubDetail SubDetail2 { get; set; }
}

public class SubDetail
{
  public int Id { get; set; }
} 
```

我想`Master`明确加载它的所有细节和子细节。要加载我正在使用的详细信息`Include`：

```
context.Masters.Include("Details").Where(master => master.Id == 1); 
```

我应该使用什么来加载子详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:43:24.897

尝试

```
context.Masters.Include(m => m.Details.Select(d => d.SubDetail1))
   .Include(m => m.Details.Select(d => d.SubDetail2))
   .Where(master => master.Id == 1); 
```

非通用版本

```
context.Masters.Include("Details.SubDetail1")
   .Include("Details.SubDetail2")
   .Where(master => master.Id == 1); 
```

# date - ntp每日时间漂移

> ID：11204437
> 
> 赞同：2
> 
> 时间：2012-06-26T09:33:16.743
> 
> 标签：date, time, ntp, drift

从大约 2-3 周前开始，ntp 失去了同步，从那以后它每天失去 40 秒到 1 分钟，
然后每天晚上 9 点左右立即同步这个差异。

/var/log/ntp.log ：

```
 8 Jun 09:01:54 ntpd[7688]: kernel time sync status change 4001    
 8 Jun 09:18:57 ntpd[7688]: kernel time sync status change 0001    
 8 Jun 09:53:08 ntpd[7688]: kernel time sync status change 4001    
 8 Jun 10:10:14 ntpd[7688]: kernel time sync status change 0001    
 8 Jun 12:26:45 ntpd[7688]: kernel time sync status change 4001    
 8 Jun 12:43:51 ntpd[7688]: kernel time sync status change 0001    
 8 Jun 14:43:19 ntpd[7688]: kernel time sync status change 4001    
 8 Jun 15:00:23 ntpd[7688]: kernel time sync status change 0001    
 8 Jun 16:25:45 ntpd[7688]: kernel time sync status change 4001    
 8 Jun 16:42:49 ntpd[7688]: kernel time sync status change 0001    
 8 Jun 17:16:59 ntpd[7688]: kernel time sync status change 4001    
 8 Jun 17:34:05 ntpd[7688]: kernel time sync status change 0001    
 8 Jun 19:16:30 ntpd[7688]: kernel time sync status change 4001    
 8 Jun 19:33:33 ntpd[7688]: kernel time sync status change 0001    
 8 Jun 20:59:28 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
 8 Jun 21:17:43 ntpd[7688]: synchronized to 172.16.33.74, stratum 3    
 **8 Jun 21:33:19 ntpd[7688]: time reset -33.667071 s**    
 8 Jun 21:37:36 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
 8 Jun 21:38:40 ntpd[7688]: synchronized to 172.16.33.74, stratum 3    
 9 Jun 10:56:38 ntpd[7688]: kernel time sync status change 4001    
 9 Jun 11:13:41 ntpd[7688]: kernel time sync status change 0001    
 9 Jun 12:04:56 ntpd[7688]: kernel time sync status change 4001    
 9 Jun 13:47:20 ntpd[7688]: kernel time sync status change 0001    
 9 Jun 14:21:31 ntpd[7688]: kernel time sync status change 4001    
 9 Jun 14:38:37 ntpd[7688]: kernel time sync status change 0001    
 9 Jun 20:11:40 ntpd[7688]: kernel time sync status change 4001    
 9 Jun 20:45:48 ntpd[7688]: kernel time sync status change 0001    
 9 Jun 21:03:40 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
 9 Jun 21:21:35 ntpd[7688]: synchronized to 172.16.33.74, stratum 3    
 **9 Jun 21:54:16 ntpd[7688]: time reset -35.209243 s**    
 9 Jun 21:57:54 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
 9 Jun 21:59:00 ntpd[7688]: synchronized to 172.16.33.74, stratum 3    
10 Jun 20:57:04 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
10 Jun 21:03:59 ntpd[7688]: synchronized to 172.16.33.74, stratum 3    
**10 Jun 21:18:25 ntpd[7688]: time reset -36.757260 s**    
10 Jun 21:21:45 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
10 Jun 21:23:52 ntpd[7688]: synchronized to 172.16.33.74, stratum 3    
11 Jun 21:07:25 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
11 Jun 21:24:25 ntpd[7688]: synchronized to 172.16.33.74, stratum 3    
**11 Jun 21:40:52 ntpd[7688]: time reset -38.305589 s**    
11 Jun 21:44:29 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
11 Jun 21:45:33 ntpd[7688]: synchronized to 172.16.33.74, stratum 3    
12 Jun 08:37:43 ntpd[7688]: kernel time sync status change 4001    
12 Jun 08:50:34 ntpd[7688]: kernel time sync status change 0001    
12 Jun 21:01:10 ntpd[7688]: synchronized to LOCAL(0), stratum 10    
12 Jun 21:07:53 ntpd[7688]: synchronized to 172.16.33.74, stratum 3  
**12 Jun 21:22:13 ntpd[7688]: time reset -39.854883 s**  
12 Jun 21:26:19 ntpd[7688]: synchronized to LOCAL(0), stratum 10  
12 Jun 21:27:23 ntpd[7688]: synchronized to 172.16.33.74, stratum 3  
13 Jun 02:26:51 ntpd[7688]: kernel time sync status change 4001  
13 Jun 04:43:29 ntpd[7688]: kernel time sync status change 0001  
13 Jun 05:34:43 ntpd[7688]: kernel time sync status change 4001  
13 Jun 06:25:57 ntpd[7688]: kernel time sync status change 0001  
13 Jun 07:34:16 ntpd[7688]: kernel time sync status change 4001  
13 Jun 07:51:21 ntpd[7688]: kernel time sync status change 0001  
13 Jun 13:18:34 ntpd[7688]: ntpd exiting on signal 15  
13 Jun 13:21:51 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
13 Jun 13:21:51 ntpd[6771]: kernel time sync status change 0001  
13 Jun 13:23:57 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
13 Jun 21:10:58 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
13 Jun 21:27:09 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
**13 Jun 22:00:28 ntpd[6771]: time reset -41.396780 s**  
13 Jun 22:00:28 ntpd[6771]: kernel time sync status change 4001  
13 Jun 22:04:38 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
13 Jun 22:04:38 ntpd[6771]: kernel time sync status change 0001  
13 Jun 22:05:44 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
14 Jun 04:09:19 ntpd[6771]: kernel time sync status change 4001  
14 Jun 04:43:27 ntpd[6771]: kernel time sync status change 0001  
14 Jun 06:08:50 ntpd[6771]: kernel time sync status change 4001  
14 Jun 06:25:55 ntpd[6771]: kernel time sync status change 0001  
14 Jun 07:00:05 ntpd[6771]: kernel time sync status change 4001  
14 Jun 07:51:19 ntpd[6771]: kernel time sync status change 0001  
14 Jun 08:25:28 ntpd[6771]: kernel time sync status change 4001  
14 Jun 08:42:31 ntpd[6771]: kernel time sync status change 0001  
14 Jun 10:59:05 ntpd[6771]: kernel time sync status change 4001  
14 Jun 11:16:11 ntpd[6771]: kernel time sync status change 0001  
14 Jun 12:24:27 ntpd[6771]: kernel time sync status change 4001  
14 Jun 12:33:00 ntpd[6771]: kernel time sync status change 0001  
14 Jun 16:40:51 ntpd[6771]: kernel time sync status change 4001  
14 Jun 16:57:55 ntpd[6771]: kernel time sync status change 0001  
14 Jun 17:49:11 ntpd[6771]: kernel time sync status change 4001  
14 Jun 18:57:29 ntpd[6771]: kernel time sync status change 0001  
14 Jun 19:31:38 ntpd[6771]: kernel time sync status change 4001  
14 Jun 19:40:10 ntpd[6771]: kernel time sync status change 0001  
14 Jun 20:56:52 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
14 Jun 21:03:37 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
**14 Jun 21:16:53 ntpd[6771]: time reset -42.943002 s**  
14 Jun 21:20:34 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
14 Jun 21:21:39 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
15 Jun 04:57:42 ntpd[6771]: kernel time sync status change 4001  
15 Jun 05:14:47 ntpd[6771]: kernel time sync status change 0001  
15 Jun 06:23:10 ntpd[6771]: kernel time sync status change 4001  
15 Jun 06:57:17 ntpd[6771]: kernel time sync status change 0001  
15 Jun 09:13:47 ntpd[6771]: kernel time sync status change 4001  
15 Jun 11:13:19 ntpd[6771]: kernel time sync status change 0001  
15 Jun 12:04:32 ntpd[6771]: kernel time sync status change 4001  
15 Jun 12:21:38 ntpd[6771]: kernel time sync status change 0001  
15 Jun 13:12:54 ntpd[6771]: kernel time sync status change 4001  
15 Jun 13:55:37 ntpd[6771]: kernel time sync status change 0001  
15 Jun 15:55:11 ntpd[6771]: kernel time sync status change 4001  
15 Jun 16:12:14 ntpd[6771]: kernel time sync status change 0001  
15 Jun 20:59:18 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
15 Jun 21:21:16 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
15 Jun 21:54:18 ntpd[6771]: time reset -44.484272 s  
15 Jun 21:58:27 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
15 Jun 21:59:30 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
16 Jun 03:53:30 ntpd[6771]: kernel time sync status change 4001  
16 Jun 04:44:45 ntpd[6771]: kernel time sync status change 0001  
16 Jun 05:53:03 ntpd[6771]: kernel time sync status change 4001  
16 Jun 07:01:18 ntpd[6771]: kernel time sync status change 0001  
16 Jun 08:26:43 ntpd[6771]: kernel time sync status change 4001  
16 Jun 08:43:49 ntpd[6771]: kernel time sync status change 0001  
16 Jun 09:35:06 ntpd[6771]: kernel time sync status change 4001  
16 Jun 09:52:09 ntpd[6771]: kernel time sync status change 0001  
16 Jun 10:26:19 ntpd[6771]: kernel time sync status change 4001  
16 Jun 11:00:27 ntpd[6771]: kernel time sync status change 0001  
16 Jun 11:34:37 ntpd[6771]: kernel time sync status change 4001  
16 Jun 11:51:41 ntpd[6771]: kernel time sync status change 0001  
16 Jun 12:42:59 ntpd[6771]: kernel time sync status change 4001  
16 Jun 13:00:03 ntpd[6771]: kernel time sync status change 0001  
16 Jun 14:25:25 ntpd[6771]: kernel time sync status change 4001  
16 Jun 15:16:39 ntpd[6771]: kernel time sync status change 0001  
16 Jun 16:24:57 ntpd[6771]: kernel time sync status change 4001  
16 Jun 17:16:09 ntpd[6771]: kernel time sync status change 0001  
16 Jun 18:58:35 ntpd[6771]: kernel time sync status change 4001  
16 Jun 19:15:40 ntpd[6771]: kernel time sync status change 0001  
16 Jun 20:59:36 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
16 Jun 21:16:46 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
16 Jun 21:49:33 ntpd[6771]: time reset -46.023214 s  
16 Jun 21:52:53 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
16 Jun 21:53:57 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
17 Jun 03:12:33 ntpd[6771]: kernel time sync status change 4001  
17 Jun 03:29:36 ntpd[6771]: kernel time sync status change 0001  
17 Jun 04:20:49 ntpd[6771]: kernel time sync status change 4001  
17 Jun 05:12:01 ntpd[6771]: kernel time sync status change 0001  
17 Jun 07:28:37 ntpd[6771]: kernel time sync status change 4001  
17 Jun 08:02:43 ntpd[6771]: kernel time sync status change 0001  
17 Jun 09:28:07 ntpd[6771]: kernel time sync status change 4001  
17 Jun 10:02:13 ntpd[6771]: kernel time sync status change 0001  
17 Jun 11:10:31 ntpd[6771]: kernel time sync status change 4001  
17 Jun 11:27:36 ntpd[6771]: kernel time sync status change 0001  
17 Jun 17:01:37 ntpd[6771]: kernel time sync status change 4001  
17 Jun 17:18:42 ntpd[6771]: kernel time sync status change 0001  
17 Jun 20:09:32 ntpd[6771]: kernel time sync status change 4001  
17 Jun 21:01:48 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
17 Jun 21:01:48 ntpd[6771]: kernel time sync status change 0001  
17 Jun 21:19:34 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
17 Jun 21:52:12 ntpd[6771]: time reset -47.573538 s  
17 Jun 21:56:07 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
17 Jun 21:57:11 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
18 Jun 20:59:25 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
18 Jun 21:24:16 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
18 Jun 21:40:42 ntpd[6771]: time reset -49.122802 s  
18 Jun 21:44:59 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
18 Jun 21:46:03 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
19 Jun 09:30:18 ntpd[6771]: kernel time sync status change 4001  
19 Jun 11:12:46 ntpd[6771]: kernel time sync status change 0001  
19 Jun 11:46:55 ntpd[6771]: kernel time sync status change 4001  
19 Jun 12:38:10 ntpd[6771]: kernel time sync status change 0001  
19 Jun 14:03:33 ntpd[6771]: kernel time sync status change 4001  
19 Jun 14:20:36 ntpd[6771]: kernel time sync status change 0001  
19 Jun 15:11:48 ntpd[6771]: kernel time sync status change 4001  
19 Jun 15:45:55 ntpd[6771]: kernel time sync status change 0001  
19 Jun 16:20:04 ntpd[6771]: kernel time sync status change 4001  
19 Jun 16:37:08 ntpd[6771]: kernel time sync status change 0001  
19 Jun 17:11:19 ntpd[6771]: kernel time sync status change 4001  
19 Jun 17:28:24 ntpd[6771]: kernel time sync status change 0001  
19 Jun 19:36:29 ntpd[6771]: kernel time sync status change 4001  
19 Jun 19:53:33 ntpd[6771]: kernel time sync status change 0001  
19 Jun 21:02:58 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
19 Jun 21:20:53 ntpd[6771]: synchronized to 172.16.33.74, stratum 3  
19 Jun 21:37:16 ntpd[6771]: time reset -50.669270 s  
19 Jun 21:41:34 ntpd[6771]: synchronized to LOCAL(0), stratum 10  
19 Jun 21:42:07 ntpd[6771]: synchronized to 172.16.33.74, stratum 3 
```

此时我设置了一个 cron 作业以每小时运行一次 ntpdate：

```
20 Jun 17:57:39 ntpdate[22583]: adjust time server 172.16.33.74 offset -0.000421 sec  
20 Jun 18:01:01 ntpdate[22623]: adjust time server 172.16.33.74 offset 0.000238 sec  
20 Jun 19:01:01 ntpdate[23046]: adjust time server 172.16.33.74 offset 0.000753 sec  
20 Jun 20:01:02 ntpdate[23471]: adjust time server 172.16.33.74 offset 0.000574 sec  
20 Jun 21:00:09 ntpdate[23890]: step time server 172.16.33.74 offset -52.211231 sec  
20 Jun 21:01:01 ntpdate[23909]: adjust time server 172.16.33.74 offset 0.000033 sec  
20 Jun 22:01:01 ntpdate[24332]: adjust time server 172.16.33.74 offset 0.000870 sec  
20 Jun 23:01:02 ntpdate[24757]: adjust time server 172.16.33.74 offset 0.000499 sec  
21 Jun 00:01:01 ntpdate[25188]: adjust time server 172.16.33.74 offset 0.004997 sec  
21 Jun 01:01:01 ntpdate[25611]: adjust time server 172.16.33.74 offset -0.000058 sec  
21 Jun 02:01:01 ntpdate[26035]: adjust time server 172.16.33.74 offset 0.001489 sec  
21 Jun 03:01:01 ntpdate[26460]: adjust time server 172.16.33.74 offset 0.000491 sec  
21 Jun 04:01:01 ntpdate[27712]: adjust time server 172.16.33.74 offset 0.000730 sec  
21 Jun 05:01:01 ntpdate[28270]: adjust time server 172.16.33.74 offset 0.000841 sec  
21 Jun 06:01:01 ntpdate[28753]: adjust time server 172.16.33.74 offset 0.000405 sec  
21 Jun 07:01:01 ntpdate[29177]: adjust time server 172.16.33.74 offset 0.000474 sec  
21 Jun 08:01:01 ntpdate[29601]: adjust time server 172.16.33.74 offset 0.000583 sec  
21 Jun 09:01:01 ntpdate[30024]: adjust time server 172.16.33.74 offset 0.000660 sec  
21 Jun 10:01:01 ntpdate[30448]: adjust time server 172.16.33.74 offset 0.000469 sec  
21 Jun 11:01:01 ntpdate[30872]: adjust time server 172.16.33.74 offset 0.000605 sec  
21 Jun 12:01:01 ntpdate[31298]: adjust time server 172.16.33.74 offset 0.000159 sec  
21 Jun 13:01:01 ntpdate[31721]: adjust time server 172.16.33.74 offset 0.000539 sec  
21 Jun 14:01:01 ntpdate[32146]: adjust time server 172.16.33.74 offset 0.000530 sec  
21 Jun 15:01:01 ntpdate[32570]: adjust time server 172.16.33.74 offset 0.000560 sec  
21 Jun 16:01:01 ntpdate[583]: adjust time server 172.16.33.74 offset 0.000820 sec  
21 Jun 17:01:01 ntpdate[1020]: adjust time server 172.16.33.74 offset 0.000512 sec  
21 Jun 18:01:01 ntpdate[1445]: adjust time server 172.16.33.74 offset 0.000239 sec  
21 Jun 19:01:01 ntpdate[1870]: adjust time server 172.16.33.74 offset 0.000607 sec  
21 Jun 20:01:01 ntpdate[2294]: adjust time server 172.16.33.74 offset 0.000717 sec  
21 Jun 21:01:02 ntpdate[2743]: adjust time server 172.16.33.74 offset 0.000965 sec  
21 Jun 22:00:07 ntpdate[3174]: step time server 172.16.33.74 offset -53.812615 sec  
21 Jun 22:01:01 ntpdate[3196]: adjust time server 172.16.33.74 offset 0.000024 sec  
21 Jun 23:01:01 ntpdate[3641]: adjust time server 172.16.33.74 offset 0.000496 sec  
22 Jun 00:01:01 ntpdate[4133]: adjust time server 172.16.33.74 offset 0.000920 sec  
22 Jun 01:01:01 ntpdate[4557]: adjust time server 172.16.33.74 offset 0.000914 sec  
22 Jun 02:01:01 ntpdate[4980]: adjust time server 172.16.33.74 offset 0.000702 sec  
22 Jun 03:01:01 ntpdate[5404]: adjust time server 172.16.33.74 offset 0.000663 sec  
22 Jun 04:01:01 ntpdate[6631]: adjust time server 172.16.33.74 offset 0.000608 sec  
22 Jun 05:01:01 ntpdate[7189]: adjust time server 172.16.33.74 offset 0.000650 sec  
22 Jun 06:01:01 ntpdate[7613]: adjust time server 172.16.33.74 offset 0.000895 sec  
22 Jun 07:01:01 ntpdate[8037]: adjust time server 172.16.33.74 offset 0.000843 sec  
22 Jun 08:01:01 ntpdate[8462]: adjust time server 172.16.33.74 offset 0.000559 sec  
22 Jun 09:01:01 ntpdate[8885]: adjust time server 172.16.33.74 offset 0.000595 sec  
22 Jun 10:01:01 ntpdate[9309]: adjust time server 172.16.33.74 offset 0.000617 sec  
22 Jun 11:01:01 ntpdate[9734]: adjust time server 172.16.33.74 offset 0.000527 sec  
22 Jun 12:01:01 ntpdate[10158]: adjust time server 172.16.33.74 offset 0.000546 sec  
22 Jun 13:01:01 ntpdate[10582]: adjust time server 172.16.33.74 offset 0.000663 sec  
22 Jun 14:01:01 ntpdate[11006]: adjust time server 172.16.33.74 offset 0.000790 sec  
22 Jun 15:01:01 ntpdate[11429]: adjust time server 172.16.33.74 offset 0.000599 sec  
22 Jun 16:01:01 ntpdate[11854]: adjust time server 172.16.33.74 offset 0.001093 sec  
22 Jun 17:01:02 ntpdate[12277]: adjust time server 172.16.33.74 offset 0.000444 sec  
22 Jun 18:01:01 ntpdate[12702]: adjust time server 172.16.33.74 offset 0.001054 sec  
22 Jun 19:01:01 ntpdate[13126]: adjust time server 172.16.33.74 offset 0.000751 sec  
22 Jun 20:01:01 ntpdate[13550]: adjust time server 172.16.33.74 offset 0.000832 sec  
22 Jun 21:01:01 ntpdate[13973]: adjust time server 172.16.33.74 offset 0.001551 sec  
22 Jun 22:00:06 ntpdate[14398]: step time server 172.16.33.74 offset -55.338569 sec  
22 Jun 22:01:01 ntpdate[14418]: adjust time server 172.16.33.74 offset 0.000044 sec  
22 Jun 23:01:01 ntpdate[14845]: adjust time server 172.16.33.74 offset 0.000949 sec  
23 Jun 00:01:01 ntpdate[15276]: adjust time server 172.16.33.74 offset 0.000699 sec  
23 Jun 01:01:01 ntpdate[15700]: adjust time server 172.16.33.74 offset 0.001248 sec  
23 Jun 02:01:01 ntpdate[16123]: adjust time server 172.16.33.74 offset 0.001125 sec  
23 Jun 03:01:02 ntpdate[16547]: adjust time server 172.16.33.74 offset -0.000017 sec  
23 Jun 04:01:01 ntpdate[17812]: adjust time server 172.16.33.74 offset 0.000511 sec  
23 Jun 05:01:01 ntpdate[18371]: adjust time server 172.16.33.74 offset 0.000460 sec  
23 Jun 06:01:01 ntpdate[18795]: adjust time server 172.16.33.74 offset 0.000756 sec  
23 Jun 07:01:01 ntpdate[19219]: adjust time server 172.16.33.74 offset 0.000756 sec  
23 Jun 08:01:01 ntpdate[19643]: adjust time server 172.16.33.74 offset 0.000925 sec  
23 Jun 09:01:01 ntpdate[20066]: adjust time server 172.16.33.74 offset 0.000770 sec  
23 Jun 10:01:01 ntpdate[20491]: adjust time server 172.16.33.74 offset 0.000929 sec  
23 Jun 11:01:01 ntpdate[20915]: adjust time server 172.16.33.74 offset 0.001033 sec  
23 Jun 12:01:01 ntpdate[21339]: adjust time server 172.16.33.74 offset 0.000177 sec  
23 Jun 13:01:01 ntpdate[21763]: adjust time server 172.16.33.74 offset 0.000831 sec  
23 Jun 14:01:01 ntpdate[22187]: adjust time server 172.16.33.74 offset 0.000671 sec  
23 Jun 15:01:01 ntpdate[22611]: adjust time server 172.16.33.74 offset 0.000742 sec  
23 Jun 16:01:01 ntpdate[23034]: adjust time server 172.16.33.74 offset 0.000978 sec  
23 Jun 17:01:01 ntpdate[23459]: adjust time server 172.16.33.74 offset 0.000954 sec  
23 Jun 18:01:02 ntpdate[23882]: adjust time server 172.16.33.74 offset 0.000546 sec  
23 Jun 19:01:01 ntpdate[24307]: adjust time server 172.16.33.74 offset 0.001156 sec  
23 Jun 20:01:01 ntpdate[24731]: adjust time server 172.16.33.74 offset 0.000255 sec  
23 Jun 21:01:02 ntpdate[25155]: adjust time server 172.16.33.74 offset 0.001095 sec  
23 Jun 22:00:04 ntpdate[25579]: step time server 172.16.33.74 offset -56.876308 sec  
23 Jun 22:01:01 ntpdate[25600]: adjust time server 172.16.33.74 offset 0.000056 sec  
23 Jun 23:01:01 ntpdate[26019]: adjust time server 172.16.33.74 offset 0.001729 sec  
24 Jun 00:01:02 ntpdate[26450]: adjust time server 172.16.33.74 offset 0.000364 sec 
```

然后每5分钟添加一次cron：

```
24 Jun 22:00:01 ntpdate[5200]: adjust time server 172.16.33.74 offset 0.000874 sec  
24 Jun 22:01:01 ntpdate[5217]: adjust time server 172.16.33.74 offset -0.000417 sec  
24 Jun 22:05:01 ntpdate[5250]: adjust time server 172.16.33.74 offset 0.000289 sec  
24 Jun 22:10:01 ntpdate[5288]: adjust time server 172.16.33.74 offset -0.000060 sec  
**24 Jun 22:14:02 ntpdate[5326]: step time server 172.16.33.74 offset -58.428188 sec**  
24 Jun 22:15:01 ntpdate[5332]: adjust time server 172.16.33.74 offset 0.000055 sec  
**24 Jun 22:19:02 ntpdate[5372]: step time server 172.16.33.74 offset -58.458807 sec**  
24 Jun 22:20:02 ntpdate[5380]: adjust time server 172.16.33.74 offset 0.000030 sec  
24 Jun 22:25:01 ntpdate[5416]: adjust time server 172.16.33.74 offset 0.000078 sec  
24 Jun 22:30:01 ntpdate[5454]: adjust time server 172.16.33.74 offset 0.000039 sec  
24 Jun 22:35:01 ntpdate[5490]: adjust time server 172.16.33.74 offset 0.000058 sec  
24 Jun 22:40:01 ntpdate[5530]: adjust time server 172.16.33.74 offset 0.000038 sec  
24 Jun 22:45:01 ntpdate[5566]: adjust time server 172.16.33.74 offset 0.000055 sec  
24 Jun 22:50:01 ntpdate[5604]: adjust time server 172.16.33.74 offset 0.000039 sec  
24 Jun 22:55:01 ntpdate[5640]: adjust time server 172.16.33.74 offset 0.000060 sec  
24 Jun 23:01:01 ntpdate[5693]: adjust time server 172.16.33.74 offset 0.000043 sec 
```

有两次时钟几乎跳过了 1 分钟。
已经检查了服务器上的其他日志文件，并且此时除了 ntp.log 之外，实际上没有任何数据写入任何日志。
此时没有备份任务等正在运行。
服务器是 VMWARE 虚拟机，与主机的时间同步已被禁用。

服务器操作系统是 openfiler 2.3
uname -a
Linux xxxxxxxxxxxxxxxxxxx 2.6.29.6-0.23.smp.gcc3.4.x86.i686 #1 SMP Mon Feb 8 16:28:15 GMT 2010 i686 i686 i386 GNU/Linux

# python - 扩展 Dict 类的正确方法是什么？

> ID：11204443
> 
> 赞同：1
> 
> 时间：2012-06-26T09:33:24.167
> 
> 标签：python, dictionary, extend

我想用一组预定义的有效键实现两个不同的字典。此外，一本字典包含另一本。

```
class Otherdict (dict):

    _keys = ['A','B']

    def __init__(self):
        for key in self._keys:
            self[key] = None

    def populateDict(self):
        self['B'] = 10
        self['A'] = 12

class MyDict(dict):

    _keys = ['R','ED']

    def __init__(self):
        for key in self._keys:
            self[key] = None

    def __getitem__(self, key):
        if key not in self._keys:
            raise Exception("'" + key + "'" + " is not a valid key")
        dict.__getitem__(self,key)

    def __setitem__(self, key, value):
        if key not in self._keys:
            raise Exception("'" + key + "'" + " is not a valid key")
        dict.__setitem__(self,key,value)

    def populateDict(self):
        d = Otherdict()
        d.populateDict()
        self['R'] = 3
        self['ED'] = d

a = MyDict()
a.populateDict()
print a['ED'].__class__    #prints <type 'NoneType'> 
```

问题是由于某种原因我无法访问位于“ED”键下的字典。我在这里做错了什么？

我还注意到，如果我删除该`__getitem__()`方法，代码可以正常工作

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T09:38:00.097

`__getitem__`必须返回一个值：

```
def __getitem__(self, key):
    if key not in self._keys:
        raise Exception("'" + key + "'" + " is not a valid key")
    return dict.__getitem__(self,key) 
```

如果没有明确的 return 语句，Python 函数默认返回 None。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T09:42:02.377

用于 ： , `return`_`def __getitem__(self, key)``return dict.__getitem__(self,key)`

当您删除`__getitem__`它时，代码会正常运行，因为它会`__getitem__`从父类（`dict`在这种情况下）访问。

# java - jbehave配置通过注释屏幕截图失败

> ID：11204447
> 
> 赞同：0
> 
> 时间：2012-06-26T09:33:35.213
> 
> 标签：java, webdriver, jbehave

我的 JBehave 配置如下：

```
@RunWith(SpringAnnotatedPathRunner.class)
@UsingPaths(searchIn = "src/test/resources")
@Configure(storyReporterBuilder = MyReportBuilder.class, pendingStepStrategy =  FailingUponPendingStep.class)
@UsingEmbedder(embedder = SameThreadEmbedder.class, ignoreFailureInStories = false, ignoreFailureInView = false)
@UsingSpring(resources = "classpath:stepsConfiguration.xml")
@UsingSteps
public class SampleIT extends JUnitStory {

public static class SameThreadEmbedder extends Embedder {

    public SameThreadEmbedder() {
        useExecutorService(MoreExecutors.sameThreadExecutor());
    }
}

public static class MyReportBuilder extends StoryReporterBuilder {

    public MyReportBuilder() {
        withFailureTrace(true).withFormats(HTML, STATS);
    }
}
} 
```

现在我想要一些允许对失败的测试进行截图的东西。我在网上找到了一些示例，但我无法将它们安装到我的配置中。谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:20:25.413

我对这一切都很陌生，但你试过这样吗？

```
WebDriverScreenshotOnFailure screenshotOnFailure = new WebDriverScreenshotOnFailure(driverProvider); 
```

# android - 我安装了一个插件到 Eclipse 但没有进入菜单

> ID：11204449
> 
> 赞同：0
> 
> 时间：2012-06-26T09:33:45.523
> 
> 标签：android, eclipse, eclipse-plugin, uml, green-uml

我在 eclipse helios 中安装了一个插件，用于从[http://green.sourceforge.net/builds.html](http://green.sourceforge.net/builds.html)这个站点生成绿色 uml。安装成功完成。我重新启动了 eclipse。我按照[http://www.clear.rice.edu/comp310/Eclipse/GreenUML/](http://www.clear.rice.edu/comp310/Eclipse/GreenUML/) 站点中给出的步骤进行操作。但是我没有得到右键单击->新建->其他->绿色 uml 图
我没有得到任何绿色 uml 图。我安装了 soyatec euml 。同样的问题也在那里。任何人都可以建议我应该做什么。谢谢

# ruby-on-rails - 如何使用 Amazon SES 发送电子邮件而不验证“发件人”电子邮件地址

> ID：11204451
> 
> 赞同：8
> 
> 时间：2012-06-26T09:34:02.730
> 
> 标签：ruby-on-rails, amazon-ses

**我们能否使用未验证发件人电子邮件 ID 的**Amazon SES SMTP 服务从 Rails 应用程序发送电子邮件。?

我知道 Amazon SES 可以向未经验证的地址发送电子邮件。有没有办法从未经验证的任意电子邮件地址发送电子邮件。

我想知道，有什么办法可以摆脱它，因为我的应用程序正在使用用户的电子邮件地址作为发件人的电子邮件地址发送电子邮件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T04:51:41.270

我有一个解决这个问题的方法。我们可以在电子邮件的 From 标头中添加任意电子邮件地址以及经过验证的电子邮件地址，如下所示

```
"arbitrarymail@example.com <verifiedemail@example.com>" 
```

正因为如此，接收者可以获得关于电子邮件发件人的一些想法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T09:42:15.917

遗憾的是，未经验证，无法使用 Amazon SES 从任意电子邮件地址发送电子邮件。

但是，您可以验证整个域，以便代表来自已验证域的所有发件人发送电子邮件。如果您的所有发件人电子邮件地址都来自一个域，则此解决方案将起作用，否则您可能需要考虑使用 SES 的替代方案。

此处公告：http: [//aws.amazon.com/about-aws/whats-new/2012/05/15/amazon-simple-email-service-announces-domain-verification/](http://aws.amazon.com/about-aws/whats-new/2012/05/15/amazon-simple-email-service-announces-domain-verification/)

# php - 在进程运行 php 时显示一段代码

> ID：11204452
> 
> 赞同：0
> 
> 时间：2012-06-26T09:34:04.380
> 
> 标签：php, javascript, html

我有一个允许使用输入的页面，当用户输入他/她的规格并选择提交时，算法将运行。这可能需要几分钟，具体取决于输入。用户还将被引导到一个页面，该页面将显示他们的结果。我想展示一个 php 代码块，允许用户输入他们的电子邮件，当结果准备好时，包含结果 url 的电子邮件将自动发送给他们。但是，如果结果准备就绪，我希望代码块（就像加载页面一样）“消失”并且结果可视化代码运行。即显示结果。这可能吗？我对编程相当陌生，所以不确定如何去做。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:19:27.727

关于 PHP 脚本的事情是，它会一直运行到 -

1）服务器杀死脚本。

2）脚本杀死自己。

因此，无论您在做什么，它都会在 PHP 脚本中继续运行，直到完成，最后您可以将算法发送给用户。要在准备好后将结果放回原处，您可以使用 Ajax。您可以看到以下使用 jQuery 的 Ajax 教程：http: [//www.devirtuoso.com/2009/07/beginners-guide-to-using-ajax-with-jquery/](http://www.devirtuoso.com/2009/07/beginners-guide-to-using-ajax-with-jquery/)

# c++ - 使用 NiceMock 作为 GoogleMock 的实例变量

> ID：11204458
> 
> 赞同：6
> 
> 时间：2012-06-26T09:34:10.960
> 
> 标签：c++, unit-testing, googlemock

我想用方法的返回值分配一个 NiceMock。NiceMock 是一个实例变量。

```
class TestFileToOsg : public testing::Test 
{
public:
    NiceMock<MockFileToOsg>* _mockFileToOsg;
protected:
virtual void SetUp();
};

void TestFileToOsg::SetUp()
{
    _mockFileToOsg = FixtureFileToOsg::getMockFileToOsgWithValidConfig();
} 
```

固定方法是：

```
MockFileToOsg* FixtureFileToOsg::getMockFileToOsgWithValidConfig()
{
    MockFileToOsg* fileToOsg = new MockFileToOsg(...);
    return fileToOsg;
} 
```

编译器抛出以下错误：

```
error: invalid conversion from ‘MockFileToOsg*’ to ‘testing::NiceMock<MockFileToOsg>*’ 
```

如何用夹具方法的返回值分配实例变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T12:14:03.193

在您的测试类中，您应该只有一个指向您的模拟对象的指针：

```
class TestFileToOsg : public testing::Test 
{
public:
   MockFileToOsg* _mockFileToOsg;
protected:
... 
```

您的夹具应该实例化一个 NiceMock 并返回一个指向您的模拟对象的指针。

```
MockFileToOsg* FixtureFileToOsg::getMockFileToOsgWithValidConfig()
{
   MockFileToOsg* fileToOsg = new NiceMock<MockFileToOsg>(...);
   return fileToOsg;
} 
```

NiceMock<> 派生自 mockClass。所以 NiceMock<> 只能在实例化 MockObject 时使用。

# javascript - android系统上的“touchmove”事件：Transformer Prime

> ID：11204460
> 
> 赞同：13
> 
> 时间：2012-06-26T09:34:20.083
> 
> 标签：javascript, android, cordova, touch

我正在研究变压器垫并开发绘图板。我使用 PhoneGap(javascript) 而不是 JAVA 来编写代码。

但是 touchmove 事件很奇怪。

我想当我在垫子上移动手指时，它会不断收集我在画布上触摸的坐标。但事实并非如此！太荒谬了，它只收集“1”坐标：我手指移动到的画布上的第一个点。

这是我关于“触摸 && 移动事件”的代码：

```
function touchStart(event){
    if (event.targetTouches.length == 1) {
    var touch = event.targetTouches[0];     

        if (event.type == "touchstart") {
            line_start_x= touch.pageX-  canvas_org_x;
            line_start_y= touch.pageY-  canvas_org_y;
            context.beginPath();                        
            context.moveTo(line_start_x, line_start_y); 

        }//if           
    }//if 1
}//function.

function Touch_Move(event){
    line_end_x= event.touches[0].pageX-  canvas_org_x;
                line_end_y= event.touches[0].pageY-  canvas_org_y;
                context.lineTo(line_end_x, line_end_y);
                context.stroke();
                test++;                 
} 
```

我不知道为什么每次我在垫子上移动手指，试图画一条线、曲线或任何我想要的东西。当手指移动时，只会出现一个 VERY SHORT 段。所以我在这个js文件的开头声明了一个变量：“var test=0”。我发现虽然我在pad上移动手指没有离开或停止，但“test”的值仍然是1。这意味着我在它上面移动了手指。但它不会连续触发事件：“Touch_Move”。

我现在能做什么？我需要一个相应的事件来在触摸板上“mousemove”。至少，事件必须不断被触发。

```
 Thank you! 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-26T16:15:57.227

哦，耶稣。我终于找到了答案： [请参考本站。](http://uihacker.blogspot.tw/2011/01/android-touchmove-event-bug.html)

如果您在 Android 系统上工作，请记住“touchmove”仅在您的手指在键盘上移动时触发一次。所以如果你想画一条线什么的，你必须这样做：

```
function onStart ( touchEvent ) {
if( navigator.userAgent.match(/Android/i) ) {   // if you already work on Android system, you can        skip this step
touchEvent.preventDefault();     //THIS IS THE KEY. You can read the difficult doc released by W3C to learn more.
} 
```

如果你有更多的时间，你可以阅读 W3C 关于引入“movetouch”的文档，这真的很难理解。医生很烂。

# c# - 在 C# 中使用阅读器下载 zip 文件

> ID：11204461
> 
> 赞同：0
> 
> 时间：2012-06-26T09:34:33.503
> 
> 标签：c#, asp.net

我一直在开发这个应用程序，它使用户能够登录到另一个网站，然后从该服务器下载指定的文件。至此，我已经成功登录网站并下载了文件。但是当涉及到 zip 文件时，一切都毁了。

是否有任何代码块有助于逐字节或使用流阅读器读取 .zip 文件？

我正在使用`downloadfile()`，但它没有返回正确的 zip 文件。

我需要一种可以读取 zip 文件的方法。我可以通过使用来做到这一点`ByteReader()`

用于下载 zip 文件的代码是

```
string filename = "13572_BranchInformationReport_2012-05-22.zip";
            string filepath = "C:\\Documents and Settings\\user\\Desktop\\" + filename.ToString();
            WebClient client = new WebClient();
            string user = "abcd", pass = "password";
            client.Credentials = new NetworkCredential(user, pass);
            client.Encoding = System.Text.Encoding.UTF8;
            try
            {
                client.DownloadFile("https://web.site/archive/13572_BranchInformationReport_2012-05-22.zip", filepath);
                Response.Write("Success");
            }
            catch (Exception ue)
            {
                Response.Write(ue.Message);
            } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:40:10.410

> 是否有任何代码块有助于使用流阅读器逐字节读取 zip 文件。

绝对不。`StreamReader`- 实际上 any`TextReader`用于阅读*文本*内容，而不是*二进制*内容。zip 文件不是文本 - 它由字节组成，而不是字符。

如果您正在阅读诸如 zip 文件之类的二进制内容，则应该使用 a`Stream`而不是`TextReader`任何类型的 a。

请注意，[`WebClient.DownloadFile`](http://msdn.microsoft.com/en-us/library/ms144193)和[`WebClient.DownloadData`](http://msdn.microsoft.com/en-us/library/xz398a3f.aspx)通常可以使下载二进制内容更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:45:07.770

另一种下载 zip 文件的简单方法

```
 <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl="~/DOWNLOAD/Filename.zip">Click To Download</asp:HyperLink> 
```

另一种解决方案

```
 private void DownloadFile()
    {

        string getPath = "DOWNLOAD/FileName.zip";
        System.IO.Stream iStream = null;

        byte[] buffer = new Byte[1024];

        // Length of the file:
        int length;

        // Total bytes to read:
        long dataToRead;

        // Identify the file to download including its path.
        string filepath = Server.MapPath(getPath);

        // Identify the file name.
        string filename = System.IO.Path.GetFileName(filepath);
        try
        {
            // Open the file.
            iStream = new System.IO.FileStream(filepath, System.IO.FileMode.Open,
                        System.IO.FileAccess.Read, System.IO.FileShare.Read);

            // Total bytes to read:
            dataToRead = iStream.Length;
            // Page.Response.ContentType = "application/vnd.android.package-archive";
            //   Page.Response.ContentType = "application/octet-stream";
            Page.Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

            // Read the bytes.
            while (dataToRead > 0)
            {
                // Verify that the client is connected.
                if (Response.IsClientConnected)
                {
                    // Read the data in buffer.
                    length = iStream.Read(buffer, 0, 1024);

                    // Write the data to the current output stream.
                    Page.Response.OutputStream.Write(buffer, 0, length);

                    // Flush the data to the HTML output.
                    Page.Response.Flush();

                    //  buffer = new Byte[1024];
                    dataToRead = dataToRead - length;
                }
                else
                {
                    //prevent infinite loop if user disconnects
                    dataToRead = -1;
                }
            }
        }
        catch (Exception ex)
        {
            // Trap the error, if any.
            Page.Response.Write(ex.Message);
        }
        finally
        {
            if (iStream != null)
            {
                //Close the file.
                iStream.Close();
                Page.Response.Close();
            }

        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:29:27.303

您的答案

```
WebRequest objRequest = System.Net.HttpWebRequest.Create(url);
objResponse = objRequest.GetResponse();
byte[] buffer = new byte[32768];
using (Stream input = objResponse.GetResponseStream())
{
using (FileStream output = new FileStream ("test.doc",
FileMode.CreateNew))
{
int bytesRead;

while ( (bytesRead=input.Read (buffer, 0, buffer.Length)) > 0)
{
output.Write(buffer, 0, bytesRead);
}
}
} 
```

这就是我实现它的方式。谢谢大家的帮助

# mysql - 表选择查询在mysql中给出别名

> ID：11204462
> 
> 赞同：0
> 
> 时间：2012-06-26T09:34:36.213
> 
> 标签：mysql, alias

嗨，我在 mysql 中有如下查询`show tables like 'stud%'`，假设我想给它一个别名，该怎么做。

我尝试了以下

`show tables like 'stud%' as stud_tables`. 它不工作。

是否有可能..？我不确定..无论如何，当我执行第一个查询时，我只需要给出一个列名作为列表的一部分。`show tables like 'stud%'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:48:48.677

也许您可以尝试使用 [`INFORMATION_SCHEMA`数据库][1] 的更复杂的方法：

[http://sqlfiddle.com/#!2/0d110/6](http://sqlfiddle.com/#!2/0d110/6)

```
SELECT t.TABLE_NAME AS stud_tables
FROM   INFORMATION_SCHEMA.TABLES AS t
WHERE  t.TABLE_TYPE = 'BASE TABLE' -- exclude system tables
  AND  t.TABLE_SCHEMA = 'db_0d110' -- database name
  AND  t.TABLE_NAME LIKE 'stud%'   -- table name 
```

[http://dev.mysql.com/doc/refman/5.0/en/tables-table.html](http://dev.mysql.com/doc/refman/5.0/en/tables-table.html)

# jquery - jquery如何从多个选择器中获取（this）的值

> ID：11204463
> 
> 赞同：0
> 
> 时间：2012-06-26T09:34:36.773
> 
> 标签：jquery, this, attr

是否有可能在 jquery 中获取（this）对象的值 .attr()？

警报（此）返回`true[object HTMLInputElement]`，因此`==`无法正常工作

```
 $("#tag1, #tag2").keyup(function(event){
         if(this == "#tag1"){
            alert("This is tag1");
            };
         if(this == "#tag2"){
            alert("This is tag1");
                }; 
```

谢谢艺术

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:36:20.437

无法获取导致当前元素匹配的选择器 - 给定元素有许多可能的选择器。虽然理论上可以，如果由创建的 jQuery 对象`$("#tag1, #tag2")`仍然可用，那将是非常丑陋的。

但是，您可以简单地使用`this.id`来访问元素的 ID（`'tag1'`或`'tag2'`在您的情况下）并在您的代码中使用它：

```
$("#tag1, #tag2").keyup(function(event) {
    if(this.id == "tag1") {
        alert("This is tag1");
    }
    if(this.id == "tag2") {
        alert("This is tag1");
    }
}); 
```

如果这两个元素根本没有通用代码，最好使用两个选择器和函数，而不是将所有内容放在一个函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:36:25.983

`this.id`您可以使用（可能是首选）比较 id ，或使用[jQuery 的`is()`](http://api.jquery.com/is/)方法；

```
 $("#tag1, #tag2").keyup(function (event) {
      if (this.id == "tag1") {
          alert("This is tag1");
      };
      if (this.id == "tag2") {
          alert("This is tag2");
      }; 
```

或者...

```
 $("#tag1, #tag2").keyup(function (event) {
      if ($(this).is("#tag1")) {
          alert("This is tag1");
      };
      if ($(this).is("#tag2")) {
          alert("This is tag2");
      }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:38:36.223

你要这个？：

```
$("#tag1, #tag2").keyup(function(event){
     alert("This is" + $(this).attr('id'));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:56:00.053

你也可以使用开关

```
$("#tag1, #tag2").keyup(function(event){
  target = $(this).attr('id');
     switch(target) {
     case:"#tag1"
        alert("This is tag1");
        break;
     case:"#tag2"
        alert("This is tag2");
        break;
      }
 }); 
```

# asp.net-mvc - MVC 4，复选框列表和我

> ID：11204464
> 
> 赞同：12
> 
> 时间：2012-06-26T09:34:40.317
> 
> 标签：asp.net-mvc, razor, drop-down-menu, checkbox, asp.net-mvc-4

大家早。

我可以看到这已在其他地方讨论过，但想知道对于像我这样的傻瓜来说，MVC 4 中是否有任何变化或事情变得更简单？！

**设想**

我有以下经过编辑的**模型**：

```
public class CorporateDetails
{

    public Guid? Id { get; set; }

    [Key]
    public int CorporateDetailId { get; set; }

    public int? EmsId { get; set; }
    public string EmsName { get; set; }

    public virtual EmsType EmsType { get; set; }
}

public class EmsType
{
    [Key]
    public int? EmsId { get; set; }
    public string EmsName { get; set; }

    public virtual ICollection<EmsType> EmsTypes { get; set; }
} 
```

使用以下标准创建**视图**：

```
 <fieldset>
    <legend>CorporateDetails</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.EmsId, "EmsType")
    </div>
    <div class="editor-field">
        @Html.DropDownList("EmsId", String.Empty)
        @Html.ValidationMessageFor(model => model.EmsId)
    </div>
    <div class="editor-label">
        @Html.LabelFor(model => model.EmsName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.EmsName)
        @Html.ValidationMessageFor(model => model.EmsName)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

这给了我一个开箱即用的漂亮下拉列表，来自[Scott Gu 的博客](http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3-tools-update.aspx)

现在我真正的问题是 - 我如何有效地将这个下拉框转换为有效的多选复选框列表？

再次道歉，我只是在试水，看看是否发生了任何更新。

请注意，第一个 MVC 项目，所以慢慢来，我又觉得很厚：'(

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-27T10:03:45.127

Right ok, I have got it sorted - hurrah! As you can see from the comments, there were a few issues that came up but please find below the complete solution which DOES work :D

**Model**

```
 public class CorporateDetails
    {

        public Guid? Id { get; set; }

        [Key]
        public int CorporateDetailId { get; set; }

        public int[] EmsId { get; set; }

        }

    public class EmsType
    {
        [Key]
        public int EmsId { get; set; }
        public string EmsName { get; set; }

        public virtual ICollection<EmsType> EmsTypes { get; set; }
    } 
```

**Controller**

```
 public ActionResult Create()
    {
        CorporateDetails corporatedetails = new CorporateDetails();
        ViewBag.EmsId = new MultiSelectList(db.EmsTypes, "EmsId", "EmsName");
        return View(corporatedetails);
    } 
```

**Extension** (placed in a folder in the root of the project)

```
 public static MvcHtmlString CheckBoxListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty[]>> expression, MultiSelectList multiSelectList, object htmlAttributes = null)
    {
        //Derive property name for checkbox name
        MemberExpression body = expression.Body as MemberExpression;
        string propertyName = body.Member.Name;

        //Get currently select values from the ViewData model
        TProperty[] list = expression.Compile().Invoke(htmlHelper.ViewData.Model);

        //Convert selected value list to a List<string> for easy manipulation
        List<string> selectedValues = new List<string>();

        if (list != null)
        {
            selectedValues = new List<TProperty>(list).ConvertAll<string>(delegate(TProperty i) { return i.ToString(); });
        }

        //Create div
        TagBuilder divTag = new TagBuilder("div");
        divTag.MergeAttributes(new RouteValueDictionary(htmlAttributes), true);

        //Add checkboxes
        foreach (SelectListItem item in multiSelectList)
        {
            divTag.InnerHtml += String.Format("<div><input type=\"checkbox\" name=\"{0}\" id=\"{0}_{1}\" " +
                                                "value=\"{1}\" {2} /><label for=\"{0}_{1}\">{3}</label></div>",
                                                propertyName,
                                                item.Value,
                                                selectedValues.Contains(item.Value) ? "checked=\"checked\"" : "",
                                                item.Text);
        }

        return MvcHtmlString.Create(divTag.ToString());
    } 
```

**Extension registered in web config of the Views**

```
 <pages pageBaseType="System.Web.Mvc.WebViewPage">
  <namespaces>
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Optimization"/>
    <add namespace="System.Web.Routing" />
    <add namespace="MyProject.Extensions" />
  </namespaces>
</pages> 
```

**View**

```
@model Valpak.Websites.HealthChecker.Models.CorporateDetails
@{
    ViewBag.Title = "Create";
}
<h2>Create</h2>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>CorporateDetails</legend>

           <div class="editor-label">
           @Html.CheckBoxListFor(model => model.EmsId, (MultiSelectList) ViewBag.EmsId)
          </div>          
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

Which gives me a lovely list of check boxes. Hurrah!

Thanks Darin for your help, I've marked this as the answer but +50 for your time and effort.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T20:02:43.890

不错的解决方案 -

仅供其他人参考 - 我和你一样，需要一个复选框列表 - 我一直在这里使用它：

[http://www.codeproject.com/Articles/292050/CheckBoxList-For-a-missing-MVC-extension](http://www.codeproject.com/Articles/292050/CheckBoxList-For-a-missing-MVC-extension)

它工作得很好......写得很好 - 希望这可以帮助某人。

罗兰

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T09:38:15.817

ASP.NET MVC 4 RC 在这方面没有发生任何变化，并且在它达到 RTM 时不太可能发生。

但是你仍然可以[实现一个自定义助手](https://stackoverflow.com/a/6219146/29407)来实现这一点。你甚至可以改进这个帮助器，让它将 lambda 表达式作为第一个参数而不是字符串，以便获得强类型版本。

如果您不使用枚举，这里是[另一个示例](https://stackoverflow.com/a/4057281/29407)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-07T21:16:25.797

如果将选定的值传递给 MultiSelected（参数 #4）

```
ViewBag.VfonctionIds = new MultiSelectList(db.tbIntervenantFonctionTypes, "intervenantFonctionType_id", "Nom", fonctionSelected); 
```

将助手更改为

```
 public static MvcHtmlString CheckBoxListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty[]>> expression, MultiSelectList multiSelectList, object htmlAttributes = null)
    {
        //Derive property name for checkbox name
        MemberExpression body = expression.Body as MemberExpression;
        string propertyName = body.Member.Name;

        //Create div
        TagBuilder divTag = new TagBuilder("div");
        divTag.MergeAttributes(new RouteValueDictionary(htmlAttributes), true);

        //Add checkboxes
        foreach (SelectListItem item in multiSelectList)
        {
            divTag.InnerHtml += String.Format("<div><input type=\"checkbox\" name=\"{0}\" id=\"{0}_{1}\" " +
                                                "value=\"{1}\" {2} /><label for=\"{0}_{1}\">{3}</label></div>",
                                                propertyName,
                                                item.Value,
                                                (item.Selected) ? "checked=\"checked\"" : "",                                                    
                                                item.Text);
        }

        return MvcHtmlString.Create(divTag.ToString());
    } 
```

# php - 通过电子邮件将内容发送到 php 脚本

> ID：11204466
> 
> 赞同：0
> 
> 时间：2012-06-26T09:34:46.037
> 
> 标签：php, mysql, email, exim

我即将开始一个项目，该项目需要通过 PHP 脚本以某种方式运行电子邮件。我完全控制了电子邮件将被发送到的服务器，并且想知道人们是否可以给我一些想法或指示，以使用 PHP 解析它的最优雅的方式。我不是在编辑电子邮件然后转发它。

服务器是带有 Exim 电子邮件的 CentOS。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:39:17.570

最好的例子之一是 Wordpress ......有一个文件 wp-mail.php 被设置为一个 cron 任务来检索和解析电子邮件......我已经把它破解了好几次来做这样的事情！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:37:01.253

您为邮箱实现了一个客户端（php imap 模块可以与 pop3、imap4 和本地邮箱一起使用）。您轮询邮箱以获取新到达的消息，检索新消息并对其进行解析。全部使用 php imap 模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:59:47.257

为了让您的生活更轻松，而不是通过解析电子邮件给自己施加压力（如果您不介意成本），您可以决定使用[Postmark](http://www.postmarkapp.com)

我已经使用他们的服务很长一段时间了，我喜欢他们。他们现在有一个传入电子邮件 API 服务。说得够多了，只需检查一下，因为我相信它会对您尝试做的事情有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T14:50:00.203

对此有三种主要方法：

1.  运行 cron 任务以每 x 分钟轮询一次 IMAP/Pop3 服务器
2.  让 exim 在收到电子邮件时运行脚本
3.  使用第三方服务接收电子邮件并将其发送到您的站点。

我写了一篇[博客文章](http://steve.dynedge.co.uk/2010/09/07/incoming-email-in-rails-3-choosing-the-right-approach/)详细介绍了这些选项，尽管它是针对 Rails 的，主要概念适用于包括 PHP 在内的任何语言。

# c - 整数数组标记结束的建议

> ID：11204471
> 
> 赞同：0
> 
> 时间：2012-06-26T09:35:01.597
> 
> 标签：c, arrays, data-structures, int

我有一个固定大小的数组`C`。在那里我可能有任何数量（小于数组大小）的有用元素。现在我只需要我有用的元素。所以我正在考虑使用`end of array`整数数组的标记。首先

* * *

a) 这可能吗？

b) 如果可能，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:38:38.337

我会采取稍微不同的方法

```
struct IntArray
{
  int data[N];
  int size; // <-- use this to keep track of the size.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T09:39:57.650

从逻辑上讲，如果您可以找到可以充当 END_OF_ARRAY 的唯一整数，并且不会出现在您的有用数字集中...

您只需要在末尾显式添加它...并稍后检查将指示结束的数字

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T09:39:28.567

这取决于它是一个数组以及哪些值是有效的。

您说您有一个 int 数组，请使用对列表无效的任何值。如果所有条目都是正数，则使用负数作为结尾。如果这些值都低于 INT_MAX，则将其用作结束标记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T09:37:57.650

您始终可以将数组视为缓冲区并跟踪当前有用元素的数量。

```
struct buffer 
{ 
     int* array;
     size_t size;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T09:38:09.053

是的，创建一个名为`end_of_array_marker`.

它需要比这更复杂吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T15:55:58.380

有两种方法可以做到这一点（如果 int 值可以具有任何可能的 int 值）。

* * *

第一个选项：**存储数组中元素的数量，**如果添加/删除项目，则增加值。

```
int count;
int *array; 
```

* * *

第二种选择：**使用指向数组中下一个变量的指针创建一个结构。**如果它`NULL`你已经到达你的列表的末尾。

```
struct Item {
    int i;
    struct Item *next;
}
// pointing at the start adress:
struct Item *start = NULL;
// adding first item:
start = malloc(sizeof(struct Item));
start->i = 123;
start->next = NULL // mark the current end of list (not needed if you add a value right after the first)
// adding second item:
start->next = malloc(sizeof(struct Item));
start->next->i = 456;
start->next->next = NULL
// etc 
```

# java - 如何在 Richfaces 3 和 seam 2 中不使用 a4j:keepAlive 来维护请求范围 bean 的状态？

> ID：11204473
> 
> 赞同：2
> 
> 时间：2012-06-26T09:35:07.820
> 
> 标签：java, jsf, richfaces, seam, jsf-1.2

我有与特定 @Request 范围 bean 的维护状态有关的问题。我有一个接缝实体列表请求范围组件。在一个特定的请求之后，我希望它保持其状态而不是刷新，`a4j:keepAlive`执行解决方案，但不幸`a4j:keepAlive`的是在视图中使用破坏其他一些功能，所以我只是忽略了更改整个页面`a4j:keepAlive`。

我的问题是，如何在不使用`a4j:keepAlive`或不将组件放入`@SessionScope`or的情况下维护此特定场景`@ConversationScope`。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:44:33.753

如果您使用 JSF 2 进行网站开发，最好使用 RichFaces [4。RichFaces 3.3](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/TechnicalRequirements.html#SupportedJavaServerFacesImplementations)主要是为支持 JSF 1.2 而构建的，然后扩展为支持 JSF 2，但仍然没有发挥其优势来自 JSF 2。另一方面， [RichFaces 4.x](http://docs.jboss.org/richfaces/latest_4_2_X/Developer_Guide/en-US/html/chap-Developer_Guide-Getting_started_with_RichFaces.html#sect-Developer_Guide-Getting_started_with_RichFaces-Technical_Requirements)是在 JSF 2 中构建的。从 RF 3.3 迁移到 RF 4 是明智之举，但如果您仍想坚持 RF 3.3，则应该更改范围您的 bean 到 ViewScope 并停止使用`a4j:keepAlive`.

更多信息：

*   [托管 bean 范围](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)

编辑：

对于您给定的问题，您应该将数据保存在会话中并在创建请求托管 Bean 时将其恢复，这样您的数据将通过您的视图保留，但您必须手动完成这项工作（也很难维护） .

如果您的托管 bean 具有与您正在使用的 jsp/facelet 的绑定属性，则不要使用`a4j:keepAlive`标记组件，而是将`@KeepAlive(ajaxOnly=false)`注释添加到您的请求托管 bean 以保存 bean 的整个状态（甚至是绑定组件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:40:58.230

检查`@ViewScope`：[http ://balusc.blogspot.fr/2010/06/benefits-and-pitfalls-of-viewscoped.html](http://balusc.blogspot.fr/2010/06/benefits-and-pitfalls-of-viewscoped.html)

# objective-c - 如何在 Objective-C 中强制执行只读 ivars？

> ID：11204474
> 
> 赞同：0
> 
> 时间：2012-06-26T09:35:08.590
> 
> 标签：objective-c, state

在我看来，状态类似于“移动部件”。活动部件越多，出错的机会就越多。我对国家持敌对态度。按照优先顺序，我希望状态为：

1.  不存在
2.  私有只读
3.  私有和公共只读
4.  私有读/写和公共只读
5.  公共读/写

状态存储在 ivar 中（无论是显式声明还是通过 @synthsize 隐式声明）。为了允许公众访问状态，我们提供了访问器方法。在代码中表达上述意图：

1.  不要写任何代码
2.  使用 ivar 并依靠代码注释来防止（不是最佳的！）
3.  与 2 加一个公共吸气剂相同
4.  ivar 加上一个公共吸气剂
5.  4加公共二传手

如何更好地解决案例 2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:29:16.733

首先，

> 伊瓦尔/财产

ivars 和属性不可互换。它们不是同一件事。属性可以由实例变量“支持”，但这就是关系结束的地方。

首先，没有明确的实例变量。要实现第 2 点（或尽可能接近），请定义一个只读属性并像这样@synthesize

```
@synthesize myProperty = myProperty_; 
```

将实例变量 (myProperty_) 初始化为您想要的值`-init`，然后不要在 .m 文件中再次分配给它。如果您不相信自己不能避免在那个 .m 文件中分配它（尾随下划线可以帮助您），`-init`那么如果使用它可能`#define`会导致错误，例如

```
#define myProperty_ someDefinitelyNonExistingIdentifier 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T09:35:09.743

```
//this is the guts of the solution. It is basically uses pointers to cast away the const.
#define EMK_INIT_READONLY_IVAR(ivar, value) (*(typeof(value) *)(&ivar) = value)

@interface Foo : NSObject
@end

@implementation
{
    id const _bar;
    const NSInteger _baz;
}

-(id)init
{
    self = [super init];
    if (self != nil)
    {
        //we could use KVC to set object values, but it's preferable to have a mechanism 
        //which is identical for object and scalar values.
        EMK_INIT_READONLY_IVAR(_bar, @"I got a brand new combine harvester, oh-ah, oh-ah!");
        EMK_INIT_READONLY_IVAR(_baz, 0xDEADBEEF);
    }
    return self;
}

@end 
```

# objective-c - 这是添加视图的正确方法吗？

> ID：11204477
> 
> 赞同：0
> 
> 时间：2012-06-26T09:35:29.707
> 
> 标签：objective-c, xcode, ios5, xcode4.3

我制作了一个显示表格的程序。

如果人们点击搜索，我将添加另一个覆盖原始视图的视图。原来的视图是[BNUtilitiesQuick listnewcontroller]；

```
[[BNUtilitiesQuick window] addSubview:[BNUtilitiesQuick searchController].view]; 
```

`[[BNUtilitiesQuick searchController] viewWillAppear:YES]`确实被称为。所以似乎 UIView 有一个指向它的控制器的指针

然而，认为`[[BNUtilitiesQuick listnewcontroller] viewWillDisappear]`不被称为

此外，`[[BNUtilitiesQuick listnewcontroller] viewWillAppear]`即使用户使用此代码完成了对搜索词的修改，也不会调用：

```
[self.view removeFromSuperview]; 
```

我想我可能在这里遗漏了一些东西。我到底应该怎么做才能让 IO 知道 searchController.view 将覆盖 listNewController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:55:05.760

这不是正确的做法。如果 searchController 是一个全屏控制器，您应该使用 presentViewController 以模态方式呈现它，或者按照@StuR 的建议将其推送到导航堆栈上。

如果您的搜索视图仅涵盖 listnewcontroller 的一部分，您应该使用 iOS5 中的包含 API。

在 listnewcontroller（父视图控制器）中，您将编写：

```
[self addChildViewController:self.searchController];
[self.view addSubview:self.searchController.view];
[self.searchController didMoveToParentViewController:self]; 
```

如需更深入的信息，请查看 WWDC 2011 会议视频“实施 UIViewController 遏制”。还要观看 2012 年的“iOS 上的视图控制器的演变”，因为 iOS6 中有一些更改和弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:43:01.993

```
ViewController *viewController = [[ViewController alloc] init];    
[self.navigationController pushViewController:viewController animated:YES]; 
```

我会考虑使用 pushViewController 来添加全屏视图。addSubview 用于不覆盖整个屏幕的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:59:08.927

viewWillDisappear 和 viewWillAppear 只有在你弹出或推送给定的 viewController 时才会被调用。您很容易在当前视图控制器的内部（顶部）添加一个带有它自己的视图控制器的子视图。正如 StuR 所说，如果你想关闭当前的 ViewController，你应该使用：

BNUtilitiesQuick *searchController = [BNUtilitiesQuick alloc] init]; [self.navigationController pushViewController:searchController 动画：YES];

您可以在此处阅读有关 ViewController 的更多信息：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)

# jquery - 您知道电话前缀的任何开源 JQuery 下拉菜单吗？

> ID：11204479
> 
> 赞同：34
> 
> 时间：2012-06-26T09:35:35.733
> 
> 标签：jquery, html, drop-down-menu, prefix

我需要做一个下拉菜单来输入电话号码。我想做一些类似于谷歌在他的[注册表](https://accounts.google.com/SignUp?continue=http://www.google.co.uk/&hl=en)中所做的事情。像这样的东西：

![在此处输入图像描述](../Images/e8073770af1f5481335f358c343ad199.png)

**您知道电话前缀的任何开源下拉菜单吗？**

我在谷歌上找过，我发现最相似的是这个[菜单](http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx)。我可以修改它来做我想做的事，但这需要时间，我想也许有人已经做了类似的事情。

**注意**：我分享的链接只包含国家和标志。我正在寻找一个完整的下拉列表，其中包含标志、国家名称、原始语言的国家名称、添加国家首先忽略字母顺序和国际电话前缀的能力。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-06-04T16:39:37.450

我也需要这个，所以[我建造了它](https://github.com/jackocnr/intl-tel-input)。

这是[一个现场演示](http://intl-tel-input.com)。

它目前具有以下功能：

*   在国家/地区下拉列表中，您可以通过键入或使用向上/向下键进行导航
*   选择一个国家会更新输入号码的拨号代码
*   键入不同的拨号代码会自动更新显示的标志
*   指定“首选国家”的选项（显示在列表顶部）

我使用以下开源项目构建了它：

*   [从https://github.com/lafeber/world-flags-sprite](https://github.com/lafeber/world-flags-sprite)标记图像和 CSS
*   [来自https://github.com/mledoze/countries](https://github.com/mledoze/countries)的国家数据
*   来自精彩的[libphonenumber的格式化和验证](http://libphonenumber.googlecode.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:59:30.417

那么，您需要一个包含电话号码所有详细信息的数据库，然后您需要通过 Ajax 查询数据库，也通过 Ajax 返回结果并显示它。获得结果后，您可以创建自己的 div 或 p 元素，用传入的数据填充它们并显示它。如果您不想这样做，请使用 jQuery UI 自动完成功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-15T08:59:53.720

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/6.4.1/js/intlTelInput.min.js"></script>
<script type="text/javascript">
  $("#mobile-number").intlTelInput();
</script>
```

```
<head>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/6.4.1/css/intlTelInput.css">
  <title></title>
 </head>
<input type="tel" id="mobile-number" placeholder="e.g. +1 702 123 4567">
```

[它工作正常代码中没有问题可能会对您有所帮助，谢谢](https://i.stack.imgur.com/yZYH3.png)

**标头链接** [https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/6.4.1/css/intlTelInput.css](https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/6.4.1/css/intlTelInput.css) **脚本** [http://code.jquery.com/jquery-latest.min.js](http://code.jquery.com/jquery-latest.min.js) [https ://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/6.4.1/js/intlTelInput.min.js](https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/6.4.1/js/intlTelInput.min.js)

**java 代码** $("#mobile-number").intlTelInput(); **表格代码**

# android - 带有 POI 的自定义地图

> ID：11204480
> 
> 赞同：0
> 
> 时间：2012-06-26T09:35:37.800
> 
> 标签：android, drawing

我必须在我的应用程序上实现一个音乐厅的小地图。它上面会有 POI，我必须能够缩放、移动等等......

我做了一个使用转换为图片的 svg 文件的类，我扩展了 ImageView 并覆盖了 onDraw。

但现在我必须对 1.2Meg png 做同样的事情，我得到的只是内存错误..

我用`BitmapFactory.decodeResource, and then canvas.drawBitmap(bm, canvas.getMatrix(),null)`

有人在某个地方有教程可以这样做，或者只是告诉我我的方法有什么问题？

谢谢 ！

雷诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:50:41.220

虽然 PNG 文件在磁​​盘上占用 1.2MB，但它会在内存中被解码为 RGB 位图，这会大得多。例如，一个 800x600 像素的 24 位 RGB 位图占用不到 1.4MB 的内存，而压缩为 PNG 时可能只有 30kB。

解决方案是仅渲染您当前可以在屏幕上看到的地图子部分。

为了使这更容易，您可以将源图像分割成恰好是屏幕大小的 1/4 的块。这样可以确保在任何时候加载到内存中的这些较小图像中的数量都不超过 9 个：

```
+--+----------+--------+
|1 |    2     |   3    |
+--+----------+--------+
|  |          |        |
|4 |    5     |   6    |
|  |          |        |
|  |          |        |
+--+----------+--------+
|  |          |        |
|7 |    8     |   9    |
|  |          |        |
+--+----------+--------+ 
```

当图像完全对齐时，您只需要在内存中有 4 个图像。为了在滚动时进行优化，您可以在滚动方向上预取图像。

如果您的地图为 10000x10000 像素，而您的屏幕为 480x800，请将图像的边缘扩展为有一段时间或黑色（或您喜欢的任何背景颜色！）边缘，以便可以均匀分割。在这种情况下，您将使用 10080x10400。

# jquery - Colorbox-如何从弹出（Child.aspx）页面获取值到父（parent.aspx）页面

> ID：11204481
> 
> 赞同：0
> 
> 时间：2012-06-26T09:35:44.510
> 
> 标签：jquery, vb.net, colorbox

我有 2 页。父.aspx 和子.aspx。在 parent.aspx 中，我使用颜色框并为 child.aspx 发送一些值以弹出。

```
$(document).ready(function() {
          $(".iframe").colorbox({ iframe: true, innerWidth: 700, innerHeight: 400});
      });

<a class="iframe" href="popup/AgreementIDwithCond.aspx?where=ProductCategory like '%' &field=AgreementID|<%=txtAgreementID.clientid%>">Search</a> 
```

child.aspx 将弹出并根据从 parent.aspx 传递的值显示 ASPxGridView。用户将从 ASPxGridView 中选择数据。选择的数据需要发送回父页面。我在 child.aspx.vb 页面中对其进行编码。

我的问题是如何从 child.aspx.vb 获取值并将其传递给 parent.aspx ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:22:30.923

一种方法是在您的父文档中有一个全局变量。

```
var formData; 
```

然后您的子文档可以将值写入该变量：

```
parent.formData = "Hello"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:32:48.723

尝试使用

```
function update() {     $('#txtBox1', top.document).val('Test'); } 
```

# c# - 执行多个批处理文件c#

> ID：11204483
> 
> 赞同：0
> 
> 时间：2012-06-26T09:35:48.940
> 
> 标签：c#

我希望你能帮助我。当我想执行那些 .bat 文件时，我可以看到这些文件已执行但我只能获得第一个，第二个或其他我无法获得它们的文件，我的批处理文件没有问题，我'已经尝试一一执行它们并且它有效。

```
 string str_Path = Server.MapPath(".") + "\\execute.bat";
 string str_PathN= Server.MapPath(".") +"\\executeN.bat";
 string str_PathHD = Server.MapPath(".") + "\\executeHD.bat";
 string str_PathFHD = Server.MapPath(".") + "\\executeFHD.bat";

 ProcessStartInfo processInfo = new ProcessStartInfo(str_Path);
 processInfo.UseShellExecute = false;
 Process batchProcess = new Process();
 batchProcess.StartInfo = processInfo;
 batchProcess.Start();
 Thread.Sleep(3000);

 ProcessStartInfo hd = new ProcessStartInfo(str_PathHD);
 hd.UseShellExecute = false;
 Process batchProcessHD = new Process();
 batchProcessHD.StartInfo = processInfo;
 batchProcessHD.Start();
 Thread.Sleep(3000);
 ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:42:27.597

你为什么不

```
public static void runBatch( string path, int sleepTime = 3000 )
{
   ProcessStartInfo psi = new ProcessStartInfo( path );

   psi.UseShellExecute = false;

   Process proc = new Process();
   proc.StartInfo = psi;

   proc.Start();
   Thread.Sleep( sleepTime );
}

main()
{
    runBatch(Server.MapPath(".") + "\\execute.bat");
    runBatch(Server.MapPath(".") +"\\executeN.bat");
...
} 
```

或者更好的 runBatch 版本：

```
public static void runBatch( string path )
{
   ProcessStartInfo psi = new ProcessStartInfo( path );

   psi.UseShellExecute = false;

   Process proc = new Process();
   proc.StartInfo = psi;

   proc.Start();
   proc.WaitForExit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:45:00.347

您可以使用以下方法简化该代码：

```
 public void ExecuteBatFiles(List<string> path, int time)
    {
        foreach(string location in path)
        {
            ProcessStartInfo processInfo = new ProcessStartInfo(location);
            processInfo.UseShellExecute = false;
            Process batchProcess = new Process();
            batchProcess.StartInfo = processInfo;
            batchProcess.Start();
            Thread.Sleep(time);
        }
    } 
```

如果你只是想一个接一个地关闭。但它看起来`batchProcessHD.StartInfo = processInfo`应该被分配`hd`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:53:35.913

您显然对 C# 很陌生，但对您的困境了解有限，这是另一种方法。

请注意所有答案如何避免为该过程重复相同的设置代码块。

在您复制和粘贴的地方，您遇到了没有进行所有需要的编辑的问题，并且引入了一个需要敏锐的眼睛挑选出来的错误。

程序员努力只编写一次代码，以避免上述问题，因此如果发现该代码有错误并在以后修复，修复一次即可解决整个应用程序的问题。显然，不必一遍又一遍地写同样的东西也节省了时间。

该原理称为 DRY，您可以在此处阅读有关它的更多信息：

[http://en.wikipedia.org/wiki/Don%27t_repeat_yourself](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

```
 private static void Run()
    {
        var processes = CreateBatchOfProcesses("execute.bat", "executeN.bat", "executeHD.bat", "executeFHD.bat");
        foreach (Process p in processes)
        {
            p.Start();
            p.WaitForExit();

            // Do other stuff with the process.
        }
    }

    private static List<Process> CreateBatchOfProcesses(params string[] paths)
    {
        var batch = new List<Process>(paths.Length);

        foreach (string path in paths)
        {
            string mappedPath = Server.MapPath(String.Concat(".\\", path));
            ProcessStartInfo info = new ProcessStartInfo(mappedPath);
            info.UseShellExecute = false;
            Process process = new Process();
            process.StartInfo = info;

            batch.Add(process);
        }

        return batch;
    } 
```

# linq-to-sql - 我确定有人已经看到了：无法删除尚未附加的实体。使用 LINQ

> ID：11204491
> 
> 赞同：1
> 
> 时间：2012-06-26T09:36:07.450
> 
> 标签：linq-to-sql, entity

我使用 LINQ 的场景如下：我有一个方法，使用以下代码查询一个表并返回一条记录

```
private L2SQLData.PatientFile getpatfile(long id)
{
   var db = new HMSDataContext();
   var patfile = 
   (from f in db.PatientFiles.Where(f=> f.Id == id) select   f).FirstOrDefault() ;

   return patfile;
} 
```

然后另一个代码调用上面的方法并获取返回的对象/记录。然后从同一个表中删除它，如下所示：

```
L2SQLData.PatientFile patfile = getpatfile(long.Parse(id));

var db = new HMSDataContext();
db.PatientFiles.DeleteOnSubmit(patfile);
db.SubmitChanges(); 
```

运行时，VS2010 发出错误提示：无法删除尚未附加的实体。我究竟做错了什么？任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:33:27.807

尝试`db.PatientFiles.Attach(patfile)`或尝试仅使用一个***全局 HMSDataContext***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:06:04.923

我想出了一个解决方案！我查询数据上下文对象以检索与返回的对象具有相同 id 的对象，然后从相同的数据上下文中删除。

```
var delpatfile = db.PatientFiles.SingleOrDefault(p => p.Id == patfile.Id);
                 db.PatientFiles.DeleteOnSubmit(delpatfile);
                 db.SubmitChanges(); 
```

由于它来自相同的数据上下文，因此它已经附加。我想这可能不是解决这个问题的唯一方法，所以如果有人仍然有答案，请随时发布。

谢谢。

# python - 从 Django 呈现的下拉列表中排除非值

> ID：11204492
> 
> 赞同：0
> 
> 时间：2012-06-26T09:36:09.507
> 
> 标签：python, django, google-app-engine

我有一个从基础表填充的下拉列表，但是在渲染时，下拉列表中没有选择任何值，或者显示“-------”。不用说“------”不对应任何表行。

这是代码：

```
class CompanyCategory(db.Model):
    categoryname = db.StringProperty(required=False)

    def __unicode__(self):
            return u'%s' % (self.categoryname)

class SelectCategoryForm(djangoforms.ModelForm):
    class Meta:
            model = SelectCat 
```

代码在 html 中使用此代码呈现

```
{ form.companycategory }} 
```

这是错误：

```
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 703, in __call__
    handler.post(*groups)
  File "/base/data/home/apps/s~biomapit/1.359892355004556500/showcompanies.py", line 163, in post
    mycategoryid = [form_requirements.clean_data['companycategory'].key().id()]
AttributeError: 'NoneType' object has no attribute 'key' 
```

如何在呈现下拉菜单时更改默认值或删除“-----”。如果我将`categoryname = db.StringProperty(required=False)`行更改为`categoryname = db.StringProperty(required=True)`.

作为一个响应后的额外尝试，我尝试过：

```
class SelectCategoryForm(djangoforms.ModelForm):    
    class Meta:
            model = SelectCat
    def __init__(self, *args, **kwargs):
            super(SelectCategoryForm, self).__init__(*args, **kwargs)
            modelchoicefields = [field for field_name, field in self.fields.iteritems() if isinstance(field, forms.ModelChoiceField)]
            for field in modelchoicefields:
                field.empty_label = None 
```

无济于事-我仍然得到“-----”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:44:14.240

我认为您正在寻找[empty_label](https://docs.djangoproject.com/en/dev/ref/forms/fields/#django.forms.ModelChoiceField.empty_label)

```
# A custom empty label
field1 = forms.ModelChoiceField(queryset=..., empty_label="(Nothing)")

# No empty label
field2 = forms.ModelChoiceField(queryset=..., empty_label=None) 
```

[这](https://stackoverflow.com/questions/739260/customize-remove-django-select-box-blank-option)将帮助你更多。

# javascript - 用js发布到用户墙

> ID：11204493
> 
> 赞同：1
> 
> 时间：2012-06-26T09:36:09.547
> 
> 标签：javascript, facebook, facebook-oauth

我们有一个评论板，我们希望允许我们的用户将他们的帖子交叉发布到他们的 Facebook 墙上。我们已经将他们的用户帐户连接到他们的 Facebook 帐户，以便获取他们的 Facebook 个人资料图片，并且效果很好。

我尝试按照此处的指南（https://developers.facebook.com/docs/reference/dialogs/feed/）进行操作，第一个示例运行良好，但我们真的不希望出现对话框，所以我尝试了“Graph API Equivalent”，但不断收到 oauth 异常 #200（“此 API 调用需要有效的 app_id。”）。

我检查了 FB.getLoginStatus 并且我已连接并执行 FB.getAccessToken() 给了我一个访问令牌。

我没有得到什么？

***编辑***

是的，代码......现在我有这个：

```
<div id="fb-root"></div>
<script type="text/javascript">
window.fbAsyncInit = function() {
FB.init({
    appId : 'APP_ID',
    status : true,
    cookie : true,
    xfbml : true
});
FB.UIServer.setLoadedNode = function(a,b){FB.UIServer._loadedNodes[a.id]=b;};
};
(function(d){
    var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    d.getElementsByTagName('head')[0].appendChild(js);
}(document));

</script> 
```

我可以获得访问令牌并验证登录的 Facebook 用户（我）已与匹配 app_id 的应用程序连接。

我还可以使用带有 stream.publish 方法的 FB.ui 调用消息对话框。

我想不通的是，如何在不打开消息对话框的情况下透明地将我的本地评论发布到我的 Facebook 页面。

任何指针？

提前谢谢你:-)马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:38:47.230

马丁，

```
function shareWithFacebook() {
      var photoName;
      var photoUrl;
      photoName = document.getElementById("ImageName").value;
      photoUrl = document.getElementById("ImageUrl").value;
      debugger;
      var ui;
      var publish;
      FB.getLoginStatus(function (response) {
          FB.api('/me/feed', 'post', {
              message: 'I just added an image of ' + photoName + ' on http://www.yoursite.com/',
              name: photoName,
              link: 'http://www.yoursite.com/',
              picture: photoUrl,
              actions: [{ name: 'Photo', link: 'http://www.yoursite.com/'}]

          }, function (response) {
              if (!response || response.error) {
                  alert('Couldn\'t post to Facebook!');
              }
              else {
                     alert('الحمد لله');
              }
          }

                     );
      });
  } 
```

# jquery - 带有摘要和 Safari 的 PDF HTTP GET 请求

> ID：11204495
> 
> 赞同：1
> 
> 时间：2012-06-26T09:36:14.123
> 
> 标签：jquery, authentication, safari, get, digest

我在身份验证方面遇到了一些问题。我正在为三星 SmartTV（基于 Safari）开发应用程序，我想使用 iframe 标签打开 PDF 文件。要查看PDF，需要先登录服务器，服务器只支持Digest Authentication。问题是当我用 (iframe src="'+link+'" height="600" width="800") 请求它时，它会发送基本身份验证。有没有办法将身份验证设置为摘要？如果从 safari 网络浏览器访问，则会出现一个要求输入用户名和密码的弹出窗口。Firefox 和其他浏览器运行良好，因为它们会抢先发送摘要身份验证。

如果不可能，我可以使用 $.ajax 获取 pdf 文件，但不知道如何从 xmlhttprequest 显示 pdf。

欢迎任何帮助，在此先感谢！

# javascript - jstree委托中意外的多个实例创建

> ID：11204497
> 
> 赞同：1
> 
> 时间：2012-06-26T09:36:23.813
> 
> 标签：javascript, jquery, delegates, jstree

```
var json_string=$.parseJSON(document.getElementById("json_db").innerHTML);
$(function () 
{
    $("#folder_tree").jstree({ 
        contextmenu: {items: customMenu},
        "json_data" : {data:json_string},
        "plugins" : [ "themes", "json_data", "ui", "contextmenu" ],

    });
});
function customMenu(node)
{
    var items = { };
}

$('#folder_tree').delegate('a', 'contextmenu', function (e)
{

        idn = $(this).parent().attr("id");
        if(idn) pool_control(idn,e); //sendMsg(idn)

}); 
```

嗨，我在 jsTree 中得到了一些非常奇怪的东西。上面的代码显示了树的创建和委托右键单击事件。sendMsg(idn) 将 AJAX 请求发送到另一个页面。pool_control(idn,e) 使用该事件在单击的节点旁边显示一个表单。表单填写完毕后，它会调用 sendMsg。

当我直接在委托事件处理程序（而不是 pool_control）中调用 sendMsg 时，该脚本运行良好。但是，当我通过 pool_control 调用它时，会发生这种情况：每个 pool_control 都被调用，没有。发送的 Ajax 请求数加一。请求的内容似乎是相同的，但我不知道为什么没有。ajax 请求增加。当我直接调用 sendMsg 时，这不会发生。

发生了什么？我该如何解决？

pool_control 和 sendMsg：

```
function pool_control(id,ev)
{

    $("#pool_count").css("left",ev.pageX);
    $("#pool_count").css("top",ev.pageY);
    $("#pool_count").css("visibility","visible");
    $("#poolbutton").click(function()
    {
        $('#pool_count').css('visibility','hidden');    
        sendMsg(id);
    });
    $("#poolcancel").click(function()
    {
        $('#pool_count').css('visibility','hidden');
    }); 
}

function sendMsg(a,ev)
{

    $('#pool_count').css('visibility','hidden');    
    var factid = $("#factid").val();
    var floor = $("#floor").val();
    var ceiling = $("#ceiling").val();
    var pool_count = $('#poolsize').val();
    var userid = document.getElementById("userid").innerHTML;
    $.ajax(
    {
        type: "POST",
        url: "generator.php",
        data: {what:a,name:factid,author:userid,floor:floor,ceiling:ceiling,pool_count:pool_count},
        async: false,
        cache: false,
        timeout:50000,
    }); 
} 
```

这是一个长轮询网页。sendMsg 在树中发送用户所做的更改，而不关心响应。另一个函数 waitForMsg 是长轮询 ajax 请求。当它看到由于 sendMsg 导致 db 发生变化时，它会再次调用 jstree() 函数来重新制作树。当我在树中进行更改时，sendMsg 第一次发送 1 个请求，第二次发送 2 个请求，第三次发送 3 个请求，依此类推。我很确定该功能没有任何问题，但在这里，以防万一

```
function waitForMsg()
{
    var lastupdate = document.getElementById("lastupdate").innerHTML;
    var msg;
    $.ajax({
        type: "POST",
        url: "oracle.php",
        data: {lastupdate:lastupdate},
        async: true,
        cache: false,
        timeout:20000,

        success: function(data)
        { 
            msg = data.split("@");
            document.getElementById("lastupdate").innerHTML=msg[0];
            document.getElementById("json_db").innerHTML=msg[1];
            initPage(); //a <body onready> function which creates the tree again                
            setTimeout('waitForMsg()', 200 );
        },
        error: function(XMLHttpRequest, textStatus, errorThrown){
                            setTimeout('waitForMsg()', 1000);

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:28:43.357

由于事件在 jQuery 中的工作方式，每次使用 .click() 等函数附加事件时，事件都会“堆叠”到列表中，而不是替换。

通俗地说，以下代码：

```
 $("#poolbutton").click(function()
    {
        $('#pool_count').css('visibility','hidden');    
        sendMsg(id);
    }); 
```

*当点击发生时*不告诉 jQuery运行它，而是将它*添加到触发点击时应该运行的事物列表中*。

也就是说，如果你多次附加事件，例如以如下方式：

```
 $("#poolbutton").click(function()
    {
        $('#pool_count').css('visibility','hidden');    
        sendMsg(id);
    });

    $("#poolbutton").click(function()
    {
        $('#pool_count').css('visibility','hidden');    
        sendMsg(id);
    });

    $("#poolbutton").click(function()
    {
        $('#pool_count').css('visibility','hidden');    
        sendMsg(id);
    }); 
```

结果将是（您猜对了）每次单击都会调用 sendMsg() 3 次，因为附加的每个事件都是独立处理的。

由于每次调用 pool_control 时都会附加新的单击事件，因此结果是 sendMsg() 调用的数量，因此 ajax 请求每调用一次 pool_control() 就会增加一个。

修复？在 pool_control() 中再次绑定之前取消绑定单击事件：

```
function pool_control(id,ev)
{

    $("#pool_count").css("left",ev.pageX);
    $("#pool_count").css("top",ev.pageY);
    $("#pool_count").css("visibility","visible");
    $("#poolbutton").unbind('click').click(function()
    {
        $('#pool_count').css('visibility','hidden');    
        sendMsg(id);
    });
    $("#poolcancel").unbind('click').click(function()
    {
        $('#pool_count').css('visibility','hidden');
    }); 
} 
```

或者，我个人更愿意推荐这种方式，因为它的开销更小，在初始化代码中只附加一次事件。您可以随时附加事件，在您的示例中在 pool_control() 之外的 contextmenu 上调用委托之前附加它们是非常好的，例如：

```
var json_string=$.parseJSON(document.getElementById("json_db").innerHTML);
$(function () 
{
    $("#folder_tree").jstree({ 
        contextmenu: {items: customMenu},
        "json_data" : {data:json_string},
        "plugins" : [ "themes", "json_data", "ui", "contextmenu" ],

    });
});
function customMenu(node)
{
    var items = { };
}

$("#poolbutton").click(function()
{
    $('#pool_count').css('visibility','hidden');    
    sendMsg(id);
});
$("#poolcancel").click(function()
{
    $('#pool_count').css('visibility','hidden');
}); 

$('#folder_tree').delegate('a', 'contextmenu', function (e)
{

        idn = $(this).parent().attr("id");
        if(idn) pool_control(idn,e); //sendMsg(idn)

});

function pool_control(id,ev)
{
    $("#pool_count").css("left",ev.pageX);
    $("#pool_count").css("top",ev.pageY);
    $("#pool_count").css("visibility","visible");
} 
```

此方法确保事件仅附加一次，只要您不破坏#pool_count，您就可以离开，只要发生点击，事件就会被触发，而无需在 pool_control() 中关心它。

# scala - 为什么我不能索引到通过映射另一个 HList 获得的 HList？

> ID：11204501
> 
> 赞同：5
> 
> 时间：2012-06-26T09:36:31.487
> 
> 标签：scala, shapeless

甚至`.head`不起作用。

我需要做哪些改变才能完成这项工作？

```
import shapeless._
import HList._
import Nat._

scala> case class Foo[A](a: A)
defined class Foo

scala> case class Bar[A](f: Foo[A])
defined class Bar

scala> val xs = Foo(23) :: Foo("blah") :: HNil
xs: shapeless.::[Foo[Int],shapeless.::[Foo[java.lang.String],shapeless.HNil]] = Foo(23) :: Foo(blah) :: HNil

scala> object mapper extends (Foo ~> Bar) {
     |   def apply[A](f: Foo[A]) = Bar(f)
     | }
defined module mapper

scala> xs map mapper
res13: mapper.Out = Bar(Foo(23)) :: Bar(Foo(blah)) :: HNil

scala> res13.apply[_1]
<console>:38: error: could not find implicit value for parameter at: shapeless.At[mapper.Out,shapeless.Nat._1]
              res13.apply[_1]
                         ^

scala> res13.head
<console>:38: error: could not find implicit value for parameter c: shapeless.IsHCons[mapper.Out]
              res13.head
                    ^ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T10:38:25.353

至少在最新的 2.10.0-SNAPSHOT 中完全符合我的要求，

```
import shapeless._
import HList._
import Nat._

scala> case class Foo[A](a: A)
defined class Foo

scala> case class Bar[A](f: Foo[A])
defined class Bar

scala> val xs = Foo(23) :: Foo("blah") :: HNil
xs: shapeless.::[Foo[Int],shapeless.::[Foo[String],shapeless.HNil]] = Foo(23) :: Foo(blah) :: HNil                                                                                                     

scala> object mapper extends (Foo ~> Bar) {
     |   def apply[A](f: Foo[A]) = Bar(f)                                                                                                                                                              
     | }                                                                                                                                                                                               
defined module mapper                                                                                                                                                                                  

scala> xs map mapper                                                                                                                                                                                   
res0: shapeless.::[Bar[Int],shapeless.::[Bar[String],shapeless.HNil]] = Bar(Foo(23)) :: Bar(Foo(blah)) :: HNil                                                                                         

scala> res0[_1]
res1: Bar[String] = Bar(Foo(blah))                                                                                                                                                                     

scala> res0.head                                                                                                                                                                                       
res2: Bar[Int] = Bar(Foo(23)) 
```

`res0`请注意，上面推断的类型`Bar[Int] :: Bar[String] :: HNil`不是`mapper.Out`......我怀疑这是 2.9.x 和 2.10.0-SNAPSHOT 之间的行为差​​异。

如果您坚持使用 2.9.x，那么我认为您应该能够通过明确地归因`Bar[Int] :: Bar[String] :: HNil`于您来解决该问题`res13`......显然这更冗长，但 c'est la vie。

# objective-c - 定义的方法，未调用，仍然应用程序更改

> ID：11204511
> 
> 赞同：1
> 
> 时间：2012-06-26T09:37:20.170
> 
> 标签：objective-c, xcode, cocoa

我正在阅读 iOS 教程，我有一个 .h 和 .m 文件。在 .m 文件中，我编写了一些方法，例如 -

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
} 
```

或者，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ChecklistItem"];
    return cell;
} 
```

我不会在任何地方调用这些方法。尽管如此，输出在运行时会发生变化。如何？这些是压倒一切的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:45:14.300

这些函数在您设置时调用：

```
yourTableView.delegate = self;
yourTableView.dataSource = self; 
```

或连接`yourTableView`到您`File's owner`的`.xib`文件中。否则你的`UIView`节目默认`UITableView`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T09:54:16.683

如果我正确地回答了您的问题，“您没有调用某些方法，但它们会运行”，这是真的，`Xcode`因为您不调用某些方法，它们将自动运行。当您将一个对象放入您`.xib`的项目时，一些相关的方法将在您的项目中运行。如果你想摆脱它们，你可以简单地删除它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T09:42:45.497

不，它们不是压倒一切的方法。放一个断点，去调试，你会看到谁在调用上面的方法。

请记住，如果您返回，总是会`1`调用。`celForRowAtIndexPath`因为你刚才说只有一个元素。

顺便说一句，这些方法被“自动”调用，因为您已将控制器设置`datasource`为您的`UITableView`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T09:45:38.483

这些是表格视图委托方法，当你设置它们时它们会被自动调用

```
TableViewVar.delegate = self;
TableViewVar.dataSource = self; 
```

# .net - 以先进先出的方式管理多个队列的最佳方式

> ID：11204512
> 
> 赞同：0
> 
> 时间：2012-06-26T09:37:20.817
> 
> 标签：.net, queue, .net-4.5, job-scheduling

我有一个用户界面，可以将完全不同类型的作业排队。目前，它通过将作业存储在数据库中的相应表中来实现这一点（Table-per-JobType）

然后我的后端进程出现，拿起工作，并假设有一个可用的工作人员（线程），使用它来执行工作的适当方法。

在伪代码中：

```
While(Runnning) {
    While(Queue1.HasJobs && Workers.IdleCount > 0) {
        FirstIdleWorker.Execute(Queue1Method(Type1Job));
    }

    ...

    While(QueueN.HasJobs && Workers.IdleCount > 0) {
        FirstIdleWorker.Execute(QueueNMethod(TypeNJob));
    }
    //Wait for a job to complete or a polling timeout if queues are empty
} 
```

（实际上并没有那么幼稚，但它说明了处理工作的顺序）

如您所见，这可行，但没有考虑添加了哪些订单作业。这不是交易破坏者，因为作业是原子的，但从 UI 角度来看很烦人 - 例如，用户 1 排队 20 个作业类型 2，然后是用户 2 将类型 1 的 1,000 个作业排队。用户 1 现在必须等待用户 2 的所有作业完成，然后才能处理其（相对）快速作业。

作业确实有一个`CreatedOn`属性，因此确定顺序并不困难，但是如何最好地以不是意大利面条代码的强类型方式实现组合队列？

我试图避免带有`.CreatedOn`, `.Queue1Id`,的“GenericJob”对象`.Queue2Id`，`.Queue3Id`因为这感觉很草率。

虽然 FIFO 基本上是我所追求的，但这并不是一个严格的要求——我只是不希望物品永远被撞到。

这种事情有模式吗？如果没有，有人可以指点我一个好的教程吗？

（顺便说一句，这些可能是长期运行的作业。一旦从队列中取出作业，我实际上是在幕后使用 TPL 来管理工作人员，但我仍然需要自己管理队列，因为作业比我多得多可以一次性加载到内存中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T07:28:51.067

如果我错了，戳我，我希望这个伪代码可以解释接口抽象。

一个界面可能如下所示：

```
enum JobTypes
{
    JobType1 = 0x01,
    JobType2 = 0x02,
    JobType3 = 0x03
}
interface IJob
{
    int ID { get; set; }
    JobTypes JobType { get; set; }
    DateTime Date { get; set; }
    bool Complete { get; set; }
    void Process(List<object> parameters);
} 
```

每个作业类型处理器都实现此接口，更改和添加属性以满足您的需求：

```
class JobType1 : IJob
{
    public int ID { get; set; }
    public JobTypes JobType { get; set; }
    public DateTime Date { get; set; }
    public bool Complete { get; set; }
    public void Process(List<object> parameters)
    {
        throw new NotImplementedException();
    }
} 
```

然后，您可以将作业类型混合到一个列表中：

```
List<IJob> joblist = new List<IJob>(); 
```

并可能使用 lambda 按日期对它们进行排序：

```
joblist.Sort((a, b) => DateTime.Compare(a.Date, b.Date)); 
```

获取未处理作业的列表（不检查那些繁忙的处理*）

```
List<IJob> undone = joblist.Where(job => job.Complete == false) as List<IJob>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:05:16.177

完整的答案可能类似于作业车间调度，因为您有需要不同资源或资源级别的工作，并且您希望避免让短期工作挨饿。这有点复杂，需要阅读一些内容，但最终它比尝试从单个队列中进行复杂的临时调度要少得多。

听起来您在作业之间没有依赖关系，因此一种省力的方法是为每个用户每个作业类型设置队列，然后对队列进行加权循环。（即队列 Y 中的每个作业从队列 X 中获取 2 个作业。）

# .net - 命名查询失败时 NHibernate 不会抛出异常

> ID：11204516
> 
> 赞同：2
> 
> 时间：2012-06-26T09:37:45.103
> 
> 标签：.net, nhibernate, stored-procedures

我正在使用命名查询来执行存储过程（使用 IQuery、List）来执行一些插入逻辑。一切似乎都运行良好，除了数据实际上没有被插入。当我运行 SQL 跟踪并手动执行存储过程时，我发现存储过程由于外键违规而出错。

我希望 NHibernate 在这种情况下会抛出某种异常，但它似乎忽略了错误，只是从调用中返回一个空列表。这是一个错误，与配置或其他有关吗？我正在使用一个相当新的版本（3.2.0.4）

# mysql - 创建和使用临时表

> ID：11204517
> 
> 赞同：1
> 
> 时间：2012-06-26T09:37:49.180
> 
> 标签：mysql, temp-tables

我刚刚了解了临时表，并且使用它们在我的一些大查询中给了我一些非常好的速度提升。

我遇到的问题是，当我创建表时，它不会持续使用它的以下查询的完整长度，也不会持续到脚本结束。

我正在使用以下方法创建它：

```
$dbh->exec("CREATE TEMPORARY TABLE _temp_unique_invoice_ref ENGINE = MEMORY AS
        (SELECT jobRef, invoiceRef FROM invoices_out_reference GROUP BY invoiceRef)") ; 
```

之后的查询有几百行长，并尝试在子查询中多次使用临时表，但它仅适用于第一个子查询，其余查询失败，表示该表不存在。

由于此查询可能由许多用户每 10 秒运行一次，因此该场景也更加复杂，因此它可能会在 10 秒过去之前执行多次。

如何在不使用 TEMPORARY 关键字和 drop 等的情况下完成这项工作？

* * *

下面的查询只是一个大查询。准备在同一个对象上调用，这会导致新的连接吗？如果我将创建表语法放在较大查询的开头并用 ; 终止它会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:48:38.050

一个临时表不能在一个查询中多次使用。

但是，如果数据不是太大，您可以创建副本

```
CREATE TEMPORARY t2 SELECT * FROM t;
CREATE TEMPORARY t3 SELECT * FROM t;
CREATE TEMPORARY t4 SELECT * FROM t; 
```

并在大查询中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:43:21.283

关于您的设置的信息不足。所以我尝试了一个疯狂的猜测：是否您正在为每个查询建立一个新的连接并且临时表绑定到一个连接，因此在其他表中不存在？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:43:46.383

您可以使用 ：：

```
Insert into temp_table select from table 
```

它将自动创建一个描述与表相同的表，并在完成后将其删除。

# jquery - 如何获得对在链式函数 init 调用中选择的元素的引用？

> ID：11204524
> 
> 赞同：3
> 
> 时间：2012-06-26T09:38:04.647
> 
> 标签：jquery, jquery-selectors

可以说我有以下内容：

```
$('input[rel]').jOverlay({ overlayId: "#overlayID" }); 
```

如何从输入的 rel 值动态获取 overlayID？我试过使用：

```
$('input[rel]').jOverlay({ overlayId: this.attr('rel') }); 
```

我已经尝试将它包装在一个匿名函数中：

```
$('input[rel]').jOverlay({ (function() { overlayId: this.attr('rel'); }) }); 
```

无济于事，这样做的正确方法是什么？

非常感谢 - Jai

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:39:51.223

您必须使用 迭代它们[`each()`](http://api.jquery.com/each)，否则`this`（在您的第一个和第二个示例中）实际上是 the`window`而不是元素（另外，`this`如果您有多个匹配的元素也没有意义）。

```
$('input[rel]').each(function () {
     // In here, this is the specific element in the 
     // jQuery set we're iterating over.

     $(this).jOverlay({ overlayId: this.rel });
}); 
```

第三个不起作用的原因很可能是您使用的插件不支持该参数列表。

# android - 如何 1\. 下载图像 2\. 调整为头像 3\. 缓存它 4\. 添加到列表项 5\. 仅从缓存中获取图像

> ID：11204530
> 
> 赞同：0
> 
> 时间：2012-06-26T09:38:18.963
> 
> 标签：android, image, list, caching, resize

我有一个推送消息列表（txt）和一个固定图像（头像的大小）。现在我在服务器中添加了上传照片的选项。服务器将仅托管最新上传的照片。我喜欢： 1\. 在收到新推送通知时下载图像 2\. 将其调整为头像大小 3\. 更新列表项头像图像 4\. 缓存图像以供将来参考

注意，上传新图片后，我无法从服务器获取相应的头像，因为它不再提供，只有最后一个上传，所以需要缓存机制。

示例：1\. push(text) 从服务器拍摄 - android 请求图像（让我们说 no.1） 2\. new push msg(2) 被拍摄 - 从服务器提供新图像（覆盖 img1） 3\. android list 必须显示 image1 和 image2 的头像（来自缓存的 image1）等等

任何煽动都将被愉快地接受:)

谢谢！

# vb.net - VB.Net 2.0 Windows 窗体 - 如何获取执行用户

> ID：11204539
> 
> 赞同：1
> 
> 时间：2012-06-26T09:38:51.223
> 
> 标签：vb.net, winforms, .net-2.0

我有一个 .Net 2.0 Windows Forms 应用程序，需要以特定用户身份运行（右键单击，运行身份）。

我需要能够检查哪个用户启动了它，如果不是特定用户则停止。

我发现的所有示例都显示了登录用户。

如何访问执行用户名的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:48:21.553

也许这会对您有所帮助：[如何确定 C# 中进程的所有者？](https://stackoverflow.com/questions/777548/how-do-i-determine-the-owner-of-a-process-in-c)

它在 C# 中，但很容易转换为 VB.NET，只需在 Google 中搜索“C# to VB”即可：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:46:17.280

基于[此，在](http://msmvps.com/blogs/siva/archive/2006/10/02/Getting-Windows-Process-Owner-Name.aspx)[此](http://www.pinvoke.net/)的一些帮助下，我想出了这个：

```
Imports System.Runtime.InteropServices
Imports System.Security.Principal

Public Class GetProcessOwner

    <DllImport("advapi32.dll", SetLastError:=True)> _
    Public Shared Function OpenProcessToken(ByVal processHandle As IntPtr, ByVal desiredAccess As Integer, ByRef tokenHandle As IntPtr) As Boolean
    End Function

    <DllImport("kernel32.dll", SetLastError:=True)> _
    Public Shared Function CloseHandle(ByVal hObject As IntPtr) As <MarshalAs(UnmanagedType.Bool)> Boolean
    End Function

    Private Const TokenQuery As UInteger = &H8

    Public Shared Function GetProcessOwner(ByVal processName As String) As String

        Dim ownerName As String = String.Empty

        For Each p As Process In Process.GetProcesses()

            If p.ProcessName = processName Then

                Dim ph As IntPtr = IntPtr.Zero

                Try
                    OpenProcessToken(p.Handle, TokenQuery, ph)
                    Dim wi As WindowsIdentity = New WindowsIdentity(ph)
                    ownerName = wi.Name

                Catch ex As Exception

                    ownerName = String.Empty

                Finally

                    If ph <> IntPtr.Zero Then
                        CloseHandle(ph)
                    End If

                End Try

            End If

        Next

        Return ownerName

    End Function

End Class 
```

# microsoft-dynamics - Dynamics Nav 公司网络服务

> ID：11204541
> 
> 赞同：1
> 
> 时间：2012-06-26T09:38:59.500
> 
> 标签：microsoft-dynamics, navision, dynamics-nav

这是来自 msdn的[Microsoft Dynamics NAV Web 服务。](http://msdn.microsoft.com/en-us/library/dd355398)但我只能调用`http://<Server>:<WebServicePort>/<ServerInstance>`and`http://<Server>:<WebServicePort>/<ServerInstance>/ws/SystemService`和`http://<Server>:<WebServicePort>/<ServerInstance>/ws/services`。

但我不能调用以下内容： `http://<Server>:<WebServicePort>/<ServerInstance>/WS/<CompanyName>/services` `http://<Server>:<WebServicePort>/<ServerInstance>/WS/<CompanyName>/Page/<ServiceName>`

用于访问特定代码单元的 URL 具有以下元素：

`http://<Server>:<WebServicePort>/<ServerInstance>/WS/<CompanyName>/Codeunit/<ServiceName>`

如何从浏览器访问每个公司的 Microsoft Dynamics Nav Web 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-23T06:35:04.080

从浏览器你应该能够调用：

```
http://<Server>:<WebServicePort>/<ServerInstance>/WS/<CompanyName>/Page/<ServiceName> 
```

*   确保为 ServerInstance 启用了 SOAP 和 ODATA 服务。
*   确保 Codeunit 或 Page 已发布并且您获得了正确的发布名称。
*   另请注意，CompanyName、Page、Codeunit 和 ServiceName 都区分大小写。如[https://msdn.microsoft.com/en-us/library/dd355398中所述](https://msdn.microsoft.com/en-us/library/dd355398)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:13:25.753

在您链接到的[msdn 页面](http://msdn.microsoft.com/en-us/library/dd355398)中，它指出：

> 公司名称中的特殊字符必须经过 URL 编码。例如，公司名称中的空格必须替换为 %20，因此您可以将公司名称“Microsoft France SA”编码为：Microsoft%20France%20S.A。不属于已安装语言的字符也应替换。例如，在美国英语语言环境中，公司名称“CRONUS ÆØÅ Company”应编码为：CRONUS%20%C3%86%C3%98%C3%85%20Company

您是否确认您使用的公司名称已正确转义？

如果您在 .NET 代码中构建 URI，则可以使用[Uri.EscapeUriString方法来转义您的公司名称。](http://msdn.microsoft.com/en-us/library/system.uri.escapeuristring.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T15:15:14.013

在 SystemService 中，有一个函数“Companies”。您可以在此处获取 Dynamics NAV 系统中所有已定义的公司。

通过循环这些，您可以调用所有公司的所有 Web 服务。

但是，在服务中，您可以概览所有已发布的 Web 服务。其中大部分适用于所有公司（系统服务除外）

在这种情况下，您可以将转义的公司名称作为“文件夹”放置在 WS 和 Codeunit 或 Page 标签之间。

像这样：

```
http://<Server>:<WebServicePort>/<ServerInstance>/WS/<CompanyName>/Page/<PublishedName> 
```

或者

```
http://<Server>:<WebServicePort>/<ServerInstance>/WS/<CompanyName>/Codeunit/<PublishedName> 
```

# ios - iOS UIWebView 限制

> ID：11204544
> 
> 赞同：1
> 
> 时间：2012-06-26T09:39:13.763
> 
> 标签：ios, webview

我正在尝试做一个`UIWebView`，但不允许用户访问给定 URL 的其他部分。像他们只能去我允许他们去的特定页面，而不是其他页面。

我不太确定`- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType`方法，所以我可能在那里犯了错误。现在的问题是，如果我启用此方法，我会加载到`webpage`但无法浏览。甚至我允许的部分也不行。

我想知道 1）我是否遗漏了任何重要的代码？， 2）我是否遗漏了代码中的任何内容，或者为什么我的代码有误？

我是 Xcode 的新手，所以我需要你们可以给/教给我的所有指导。下面是我来自视图控制器的代码。

EDIT1：Xcode 是否有任何预构建的方法，或者我是否必须创建自己的方法，这样当他们浏览时`UIWebView`，当他们点击另一个链接时，如果它不是我指定的，请求被拒绝？是否可以创建一种方法，使其不断检查绝对 url，如果它更改为我指定的其他内容，它将返回到我指定的 url？

在我的.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UIWebViewDelegate>

{
    IBOutlet UIWebView *webView;
}

@property (nonatomic, retain)  UIWebView *webView;  

@end 
```

在我的.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize webView;

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *currentURL = [[request URL]absoluteString];
    NSRange range1 = [currentURL rangeOfString:@"news"];
    NSRange range2 = [currentURL rangeOfString:@"pdf"];

    if (range1.location ==NSNotFound){
        currentURL = @"http://www.imc.jhmi.edu/news.html";
        [webView reload];
        return YES;
    }else if (range2.location ==NSNotFound){
        currentURL = @"http://www.imc.jhmi.edu/news.html";
        [webView reload];
        return YES;
    }
    return NO;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    webView.scalesPageToFit=YES;
    webView.delegate = self;

    NSString *urlAddress = @"http://www.imc.jhmi.edu/news.html";
    NSURL *url =[NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:05:36.413

此委托方法**webView:shouldStartLoadWithRequest:navigationType** : 在 Web 视图开始加载框架之前发送。如果 web 视图应该开始加载内容，它返回值 YES；否则，否。

当找不到具有 range1 和 range2 的 currentURL 时，您的方法返回 NO。

# javascript - 为什么这个外部民意调查的问题都结束了？

> ID：11204553
> 
> 赞同：0
> 
> 时间：2012-06-26T09:39:31.817
> 
> 标签：javascript, jquery, css

我尝试过简短的文本答案，但它们仍然换行，而不是与每个单选按钮保持一致。这是小提琴：http: [//jsfiddle.net/Wx5mM/2/](http://jsfiddle.net/Wx5mM/2/)

完整代码：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $(".pds-pd-link").hide();
        $(".a2a_dd.pds-share").hide();
      });
    </script>
    <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>
<noscript><a href="http://polldaddy.com/poll/6343621/">New Poll</a></noscript> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:46:22.547

在使用 IE 中的开发人员工具检查后，我发现`label`for 答案是固定`width`的`250px`，因此内容溢出到新行。只需将以下 css 样式添加到您的样式表中，它应该可以解决您的问题。

```
.pds-input-label{
  width: auto!important
} 
```

工作[JSFiddle](http://jsfiddle.net/rutwik/uNbcr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:59:32.280

代替：

```
.pds-answer label{
    color: #333;
    font-size: 13px;
    line-height: 150%;
    position: relative;
} 
```

和：

```
.pds-answer label{
    color: #333;
    font-size: 13px;
    line-height: 150%;
    position: relative;
    width: auto; <-- add this
} 
```

`<style type="text/css" id="poll_style6343621">`标签内

# java - 爪哇河内塔时间分析

> ID：11204558
> 
> 赞同：3
> 
> 时间：2012-06-26T09:39:47.797
> 
> 标签：java, data-structures, recursion, towers-of-hanoi

我只是在**Java中测试****河内塔**问题，我运行了以下代码：（为方便起见，我已删除）**`sysouts`**

 **```
public class Util {

    public static void main(String[] args) {
        for (int i = 1; i <= 30; i++) {
            long startTime = System.currentTimeMillis();
            solveTowerOfHanoi(i, "A", "B", "C");
            System.out.println("Time taken for " + i + ": "
                    + (System.currentTimeMillis() - startTime));
        }
    }

    public static void solveTowerOfHanoi(int n, String src, String inter,
            String dest) {
        if (n == 0) {
            return;
        }
        solveTowerOfHanoi(n - 1, src, dest, inter);
        solveTowerOfHanoi(n - 1, inter, src, dest);
    }
} 
```

我做了一个实验，我尝试了从 1 到 35 的磁盘大小（索引），我观察到一个非常奇怪的时序模式，这是程序的输出：

```
Time taken for 1: 0
Time taken for 2: 0
Time taken for 3: 0
Time taken for 4: 0
Time taken for 5: 0
Time taken for 6: 0
Time taken for 7: 0
Time taken for 8: 1
Time taken for 9: 0
Time taken for 10: 0
Time taken for 11: 0
Time taken for 12: 0
Time taken for 13: 0
Time taken for 14: 0
Time taken for 15: 0
Time taken for 16: 0
Time taken for 17: 0
Time taken for 18: 3
Time taken for 19: 2
Time taken for 20: 11
Time taken for 21: 10
Time taken for 22: 39
Time taken for 23: 37
Time taken for 24: 158
Time taken for 25: 147
Time taken for 26: 603
Time taken for 27: 579
Time taken for 28: 2414
Time taken for 29: 2304
Time taken for 30: 9509
Time taken for 31: 9408
Time taken for 32: 38566
Time taken for 33: 37531
Time taken for 34: 152255
Time taken for 35: 148704 
```

**问题 1**：算法有指数增长*(2^n-1)*，那么为什么我看不到从 1-20 的时间逐渐增长？但是然后突然从20-35跳跃？

**问题2**：还有一件更让我吃惊的事情是成对的时间相等。从 19 日开始，(19,20)、(21,22)、(23,24)、(25,26) 等......有可比的时间。我无法理解这一点，如果算法的增长率确实是指数级的，为什么两个索引给出几乎可比的时间，然后在下一个索引处突然跳跃？

**注意**：我重复了这个程序 2-3 次，得到了几乎可比的时间，所以你可以把它当作一个平均运行。

**编辑**
尝试`System.nanoTime()`并得到以下结果：

```
Time taken for 1: 62644
Time taken for 2: 3500
Time taken for 3: 3500
Time taken for 4: 4200
Time taken for 5: 6300
Time taken for 6: 7350
Time taken for 7: 11549
Time taken for 8: 19948
Time taken for 9: 47245
Time taken for 10: 73142
Time taken for 11: 87491
Time taken for 12: 40246
Time taken for 13: 39196
Time taken for 14: 156784
Time taken for 15: 249875
Time taken for 16: 593541
Time taken for 17: 577092
Time taken for 18: 2318166
Time taken for 19: 2305217
Time taken for 20: 9468995
Time taken for 21: 9082284
Time taken for 22: 37747543
Time taken for 23: 37230646
Time taken for 24: 150416580
Time taken for 25: 145795297
Time taken for 26: 603730414
Time taken for 27: 578825875
Time taken for 28: 2409932558
Time taken for 29: 2399318129
Time taken for 30: 9777009489 
```

输出几乎与毫秒相似，但它确实使画面清晰......回答我的**问题 1**可能是，但**问题 2**仍然很有趣。并`System.nanoTime()`提出了另一个问题：

**问题 3**：为什么索引 1 比下一个索引 (2,3...) 等花费更多时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:53:30.360

答案 1：在您开始玩 18 张光盘之前，您的计时测量太粗略，无法显示任何有用的信息。不建议您就运行时间的变化与此值范围内的磁盘数量得出任何结论。

答案 2：由于已经对河内塔问题进行了大量研究，并且它的时间复杂度众所周知，因此您不太可能遇到具有更好时间复杂度的实现。因此，我们可能会得出结论，您的实现有一些特殊的东西会导致程序连续运行中的执行时间大致相等。

我不能立即看出你的 Java 有什么问题，所以我会直接得出结论，你的系统返回的时间有些奇怪。

*编辑*

纳米计时显示出与毫计时相似的结构。不过，我注意到，虽然 27 个磁盘和 28 个磁盘的毫秒计时相似，然后大幅跃升至 29 个磁盘，但纳米计时从 27 个磁盘大幅跃升至 28 个，然后类似于时间为 29 个磁盘。

至于新问题 3：我建议 OP 通过运行主循环两次来“启动”JIT 和 JVM，丢弃第一次运行的结果。我想我也会在调用之外获得结束时间`System.out.println`，例如：

```
long startTime = System.currentTimeMillis();
solveTowerOfHanoi(i, "A", "B", "C");
long endTime = System.currentTimeMillis();
System.out.println("Time taken for " + i + ": " + (endTime - startTime)); 
```

*编辑 2*

回应OP的评论......

对于 1 个磁盘比 2 个磁盘需要更长的时间来解决问题的一般解释之一是，您的时间包括幕后的“启动内容”——如果我正确地记得我的 Java 教育（我可能不记得）Java 编译器会创建字节码和运行时系统将字节码翻译成机器码。您可能（Java 专家在这里随意吐槽）正在安排第二次翻译的时间。至于 JIT，一般的方法是即时编译器只有在其对代码的动态分析表明它应该启动时才会启动。它可能只在第二轮优化您的代码。

*编辑 3*

好的，我接受了诱饵并定时了 2 个版本的代码，第一个（下面的第 2 列）与原始问题中的完全一样，第二个（下面的第 3 列）使用`nanoTime`而不是`currentTimeMillis`. 我的结论是

1.  正如我最初断言的那样，OP 的系统有些可疑。我在第 2 列中显示的时间非常符合预期，因此这不是一般的 Java 问题。
2.  我的机器上的实现存在严重错误`nanoTime`，或者我对它的理解存在严重问题。这增加了我最初断言背后的思考，很容易被计算机时钟误导，它们提供的结果不能总是以表面价值看待。

在开始计时之前，我还测试了启动 JIT/JVM，最后它几乎没有影响，所以我没有在这里包含这些数据。

```
| Discs | milliS | nanoS      |
|    1: |      0 |       7000 |
|    2: |      0 |       4000 |
|    3: |      0 |       6000 |
|    4: |      0 |      11000 |
|    5: |      0 |      22000 |
|    6: |      0 |      43000 |
|    7: |      0 |      84000 |
|    8: |      0 |     172000 |
|    9: |      1 |     331000 |
|   10: |      0 |     663000 |
|   11: |      2 |    1334000 |
|   12: |      2 |    2632000 |
|   13: |      6 |    5265000 |
|   14: |     11 |   10476000 |
|   15: |     21 |   22034000 |
|   16: |     42 |   43407000 |
|   17: |     85 |   89683000 |
|   18: |    169 |  171209000 |
|   19: |    337 | -655065000 |
|   20: |    673 |  688203000 |
|   21: |   1345 | -814465000 |
|   22: |   2708 |  707742000 |
|   23: |   5531 | -533716000 |
|   24: |  10918 | -140615000 |
|   25: |  21542 |  628928000 |
|   26: |  42889 |   97892000 |
|   27: |  85698 |  325197000 |
|   28: | 172370 |  -80280000 |
|   29: | 345650 |  110795000 |
|   30: | 685006 |  453388000 | 
```

笔记：

```
javac -v => Eclipse Java Compiler v_677_R32x, 3.2.1 release, Copyright IBM Corp 2000, 2006\. All rights reserved.

java --version => java version "1.4.2"
gij (GNU libgcj) version 4.1.2 20071124 (Red Hat 4.1.2-42) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:52:03.433

当我们谈论程序的复杂性分析时，它意味着渐近地研究复杂性。就您的计时数据而言，您从中得出了指数增长和其他有趣的特征（如平等），我可以简单地说，当您拥有一些数据并盯着它一段时间时，您会得到有趣的模式:)

因此，从您的时序数据中得出的关于问题理论复杂性的任何结论`Tower Of Hanoi`都是垃圾。

但是，如果您对为什么代码实际上显示出如此观察到的指数增长感兴趣，它可能归因于 java 使用的 RAM 量。**

# com - Office COM 加载项和 VSTO 加载项之间的冲突

> ID：11204568
> 
> 赞同：1
> 
> 时间：2012-06-26T09:40:20.950
> 
> 标签：com, vsto, ms-office, add-in

我创建了一个简单的 Office Com 加载项，它在我公司计算机上的其他 PowerPoint 加载项中使用。每次 PowerPoint 启动 AccessViolationException 时，只要我访问 AfterPresentationOpen 事件中的窗口计数属性（请参阅下面的代码），就会发生。

为了缩小问题范围，我创建了两个空白加载项解决方案（Office COM 和 VSTO 加载项）。我在 AfterPresentationOpen 方法中放置了一个断点，并且每次在名为 VSTA_Main 的线程上命中断点并引发此异常。此外，我的 try catch 块没有捕获此异常。一旦我禁用特定的第三方插件，一切都会像魅力一样工作，断点会在主线程上命中，我可以读取 count 属性。

我正在使用 Windows 7 和 Office 2010（都是 x64）。顺便说一句，在我的代码中的“VSTA_Main”线程上引发了所有其他 PowerPoint 事件。我相信实际上应该在我的 appdomain 线程上引发所有事件。

有谁知道我如何处理此错误并避免与此加载项发生任何冲突？

```
var windows = presentation.Windows; 
using (new ComObject(windows)) 
{ 
       try 
       {                 
        var count = windows.Count; 
        if (count == 0) 
            return; 
       } 
       catch (AccessViolationException) 
       {                 
       } 
} 
```

请在调用堆栈下方找到。

```
ntdll.dll!NtWaitForSingleObject()  + 0xa bytes  
    KernelBase.dll!WaitForSingleObjectEx()  + 0x9c bytes    
    ntdll.dll!RtlpExecuteHandlerForException()  + 0xd bytes 
    ntdll.dll!RtlDispatchException()  + 0x38c bytes 
    ntdll.dll!KiUserExceptionDispatcher()  + 0x2e bytes 
    PPCORE.DLL!000007fee75fa918()   
    [Frames below may be incorrect and/or missing, no symbols loaded for PPCORE.DLL]    
    PPCORE.DLL!000007fee75254ac()   
    PPCORE.DLL!000007fee7525475()   
    [Managed to Native Transition]  
TestAddin.DLL!TestAddin.AddinModule.adxPowerPointEvents_AfterPresentationOpen(object sender, object hostObj) Line 116 + 0x20 bytes  C#
    AddinExpress.MSO.2005.DLL!AddinExpress.MSO.ADXPowerPointAppEvents.DoAfterPresentationOpen(object presentation) + 0x6b bytes 
    AddinExpress.MSO.2005.DLL!AddinExpress.MSO.ADXAddinModule.PowerPointApplicationEvents_SinkHelper.AddinExpress.MSO.IPowerPointApplicationEvents.AfterPresentationOpen(object presentation) + 0x56 bytes  
    [Native to Managed Transition]  
    [Native to Managed Transition]  
    [Appdomain Transition]  
    PPCORE.DLL!000007fee7499b05()   
    PPCORE.DLL!000007fee74999c5()   
    PPCORE.DLL!000007fee74461ec()   
    PPCORE.DLL!000007fee74b0ca0()   
    PPCORE.DLL!000007fee744256c()   
    PPCORE.DLL!000007fee7442519()   
    PPCORE.DLL!000007fee74f9988()   
    [Managed to Native Transition]  
    AW PowerPoint 2010.DLL!AW_PowerPoint_2010.rbnAW.AddShapeToGallary(Microsoft.Office.Tools.Ribbon.RibbonGallery galrShapes) + 0xc6a bytes 
    AW PowerPoint 2010.DLL!AW_PowerPoint_2010.rbnAW.rbnOW_Load(object sender, Microsoft.Office.Tools.Ribbon.RibbonUIEventArgs e) + 0xd3 bytes   
    Microsoft.Office.Tools.Common.Implementation.dll!Microsoft.Office.Tools.Ribbon.RibbonManagerImpl.CreateRibbon(string ribbonId, object context) + 0x139 bytes    
    Microsoft.Office.Tools.Common.Implementation.dll!Microsoft.Office.Tools.Ribbon.RibbonManagerImpl.GetRibbon(Microsoft.Office.Core.IRibbonControl control) + 0x104 bytes  
    Microsoft.Office.Tools.Common.Implementation.dll!Microsoft.Office.Tools.Ribbon.RibbonManagerImpl.Invoke(Microsoft.Office.Tools.Ribbon.RibbonComponentCallback callback, object[] args) + 0x80 bytes 
    Microsoft.Office.Tools.Common.Implementation.dll!Microsoft.Office.Tools.Ribbon.RibbonManagerImpl.System.Reflection.IReflect.InvokeMember(string name, System.Reflection.BindingFlags invokeAttr, System.Reflection.Binder binder, object target, object[] args, System.Reflection.ParameterModifier[] modifiers, System.Globalization.CultureInfo culture, string[] namedParameters) + 0xf2 bytes   
    [Native to Managed Transition]  
    [Appdomain Transition]  
    MSO.DLL!000007fee40617ea()  
    MSO.DLL!000007fee406169b()  
    MSO.DLL!000007fee42f6fd2()  
    MSO.DLL!000007fee4423ae9()  
    MSO.DLL!000007fee3f85d24()  
    MSO.DLL!000007fee3f74b7c()  
    MSO.DLL!000007fee3f748e5()  
    MSO.DLL!000007fee4060d95()  
    MSO.DLL!000007fee4060c73()  
    MSO.DLL!000007fee405d57c()  
    MSO.DLL!000007fee3f8c7b8()  
    MSO.DLL!000007fee3f80671()  
    MSO.DLL!000007fee3f6d929()  
    MSO.DLL!000007fee3f80476()  
    MSO.DLL!000007fee3f80386()  
    MSO.DLL!000007fee3f8024e()  
    MSO.DLL!000007fee3f7f038()  
    MSO.DLL!000007fee3f7e7cc()  
    MSO.DLL!000007fee3f7d4aa()  
    MSO.DLL!000007fee3f7e56b()  
    MSO.DLL!000007fee3f8114c()  
    PPCORE.DLL!000007fee73ff6d5()   
    PPCORE.DLL!000007fee73f86ad()   
    PPCORE.DLL!000007fee73f6eac()   
    PPCORE.DLL!000007fee73f6c4d()   
    PPCORE.DLL!000007fee73f6120()   
    user32.dll!UserCallWinProcCheckWow()  + 0x11d bytes 
    user32.dll!CallWindowProcAorW()  + 0x78 bytes   
    user32.dll!CallWindowProcW()  + 0x18 bytes  
    comctl32.dll!CallOriginalWndProc()  + 0x1d bytes    
    comctl32.dll!CallNextSubclassProc()  + 0x8c bytes   
    comctl32.dll!DefSubclassProc()  + 0x7c bytes    
    MSO.DLL!000007fee3f2afba()  
    MSO.DLL!000007fee3f2a34a()  
    comctl32.dll!CallNextSubclassProc()  + 0x8c bytes   
    comctl32.dll!MasterSubclassProc()  + 0xe7 bytes 
    user32.dll!UserCallWinProcCheckWow()  + 0x11d bytes 
    user32.dll!DispatchClientMessage()  + 0x5f bytes    
    user32.dll!__fnDWORD()  + 0x2d bytes    
    ntdll.dll!KiUserCallbackDispatcherContinue()    
    user32.dll!ZwUserMessageCall()  + 0xa bytes 
    user32.dll!SendMessageWorker()  - 0x44b8 bytes  
    user32.dll!RealDefWindowProcWorker()  - 0x4efc bytes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:18:13.213

听起来您的加载项之一存在以下描述的线程问题：

[http://www.outlookcode.com/article.aspx?id=71](http://www.outlookcode.com/article.aspx?id=71)

# c - Fedora 中的 C 代码编译问题

> ID：11204570
> 
> 赞同：0
> 
> 时间：2012-06-26T09:40:24.990
> 
> 标签：c

大家好，我正在尝试建立一个 jni 库。该构建在 Windows 中正常工作，但在 linux fedora 中我面临一个问题，它会抛出这样的错误

```
/usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/4.1.2/crtbeginT.o: relocation R_X86_64_32 against `__DTOR_END__' can not be used when making a shared object; recompile with -fPIC 
```

我正在以这种方式编译代码

```
gcc -o libTest.so -shared -I/usr/java/jdk1.6.0_18/include -I/usr/java/jdk1.6.0_18/include/linux arrayUtil.c -static -lc 
```

谁能告诉我哪里出错了？

这是我从 JNI 调用时的错误：

```
Instructions: (pc=0x00002aaaab22627a)
0x00002aaaab22626a:   00 00 48 8b 44 24 18 4d 8b 7e 68 48 8b 5c 24 18
0x00002aaaab22627a:   0f b6 10 48 0f be c2 41 f6 44 47 01 20 74 1c 48

Stack: [0x000000004012b000,0x000000004022c000],  sp=0x000000004022a660,  free space=3fd0000000000000018k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [libc.so.6+0x3527a]

[error occurred during error reporting (printing native stack), id 0xb]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.utils.ArrayUtils.setup(Ljava/lang/String;)I+0
j  com.utils.ArrayUtils.init(Ljava/lang/String;)V+245
j  com.utils.ArrayUtils.main([Ljava/lang/String;)V+3
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x00002aaacff55000 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=5624, stack(0x0000000040832000,0x0000000040933000)]
  0x00002aaacff52800 JavaThread "CompilerThread1" daemon [_thread_blocked, id=5623, stack(0x0000000040731000,0x0000000040832000)]
  0x00002aaacff4d800 JavaThread "CompilerThread0" daemon [_thread_blocked, id=5622, stack(0x0000000040630000,0x0000000040731000)]
  0x00002aaacff4b800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=5621, stack(0x000000004052f000,0x0000000040630000)]
  0x00002aaacff28000 JavaThread "Finalizer" daemon [_thread_blocked, id=5620, stack(0x000000004042e000,0x000000004052f000)]
  0x00002aaacff26000 JavaThread "Reference Handler" daemon [_thread_blocked, id=5619, stack(0x000000004032d000,0x000000004042e000)]
=>0x0000000040111800 JavaThread "main" [_thread_in_native, id=5617, stack(0x000000004012b000,0x000000004022c000)]

Other Threads:
  0x00002aaacff21800 VMThread [stack: 0x000000004022c000,0x000000004032d000] [id=5618]
  0x00002aaacff58000 WatcherThread [stack: 0x0000000040933000,0x0000000040a34000] [id=5625] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:51:05.550

`-static`从编译命令中删除。`-static`不应该用于构建共享对象，它用于构建静态链接的可执行文件。

[在这里](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)查看有关`-static`链接器的更多信息。

# android - android原生代码调用java方法成功，但是ui方法失败

> ID：11204571
> 
> 赞同：3
> 
> 时间：2012-06-26T09:40:27.650
> 
> 标签：android, java-native-interface, listener

我成功走原生调用java方法的流程，但是当java方法包含ui方法时，ui方法总是失败，logcat会打印VM aborting错误：

```
E/ListenerTest( 1399): virtual void JNIListenerContext::postEv(int32_t)
W/dalvikvm( 1399): JNI WARNING: JNI method called with exception pending
W/dalvikvm( 1399):              in Ldalvik/system/NativeStart;.run:()V (CallStaticVoidMethodV)
W/dalvikvm( 1399): Pending exception is:
I/dalvikvm( 1399): "Binder Thread #2" prio=5 tid=10 NATIVE
I/dalvikvm( 1399):   | group="main" sCount=0 dsCount=0 obj=0x413f0b98 self=0x89b7e8
I/dalvikvm( 1399):   | sysTid=1411 nice=0 sched=0/0 cgrp=default handle=8998000
I/dalvikvm( 1399):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
I/dalvikvm( 1399):   at dalvik.system.NativeStart.run(Native Method)
I/dalvikvm( 1399):
E/dalvikvm( 1399): VM aborting 
```

在我的本机代码中：

```
JNIEnv *env = AndroidRuntime::getJNIEnv();
env->CallStaticVoidMethod( jclass, jmethod, arg);// call java method postEv(arg) 
```

在我的java代码中：

```
class ListenerClass {
    ... ...
    private static Listener mListener = null;
    public interface Listener {
        public void onMyListener( int arg );
    }

    public void registerListener (Listener listener) {
        Log.d( TAG,"registerListener");
        mListener = listener;
    }

    public static void postEv( int arg ) {
        Log.d( TAG,"postEv");
        if( mListener != null ) {
            mListener.onMyListener( arg );
        } else {
            Log.d( TAG,"no Listener");
        }
    }
}

public class ListenerDemo extends Activity implements ListenerClass.Listener
    ... ...
    private TextView info;
    private ListenerClass lisener = null;

    public void onCreate(Bundle savedInstanceState) {

        info = (TextView) findViewById(R.id.info);
        info.setTextColor(Color.WHITE);
        info.setTextSize(20);

        info.setText("haha");  // this works

        lisener = new ListenerClass();

        Log.d( TAG,"lisener.registerListener");
        lisener.registerListener(this);

    }

    public void onMyListener( int arg ) {
        Log.d(TAG,"arg is: " + arg );  // this works
        info.setText("haha");  // this not works
    }
    ... ...
} 
```

我真的不知道为什么会这样。当一个事件推送到 java 的 onMyListener 时，我希望 TextView 显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T06:12:03.127

终于找到了无法调用ui方法的原因。

我的 Native Call Java 使用 CallStaticVoidMethod(...)，表示类方法。

“私有 TextView 信息”不是静态的，这意味着对象变量。

虽然 onMyListener 不是静态的，但它可以使用非静态成员信息。

**本机静态方法 -> Java 非静态方法 -> Java 非静态变量似乎没问题。=> 本地静态方法 --> Java 非静态变量不行。**

您不能在类方法中使用对象变量。原因很清楚，但是jni进程隐藏了原因。

我的好工作！一开始我怀疑这种静态使用，今天我尝试了 CallVoidMethod 并且它成功了。

# asp.net - asp.net/Dropdownlist：选择 ListItem 后，我希望允许导航某些页面并限制其他页面

> ID：11204572
> 
> 赞同：-2
> 
> 时间：2012-06-26T09:40:33.763
> 
> 标签：asp.net, drop-down-menu

我想在我的第一页按钮单击事件中通过按钮单击来执行此操作：

If (ddlistX.SelectedItem = "1" And **Some Hober button is selected** )

导航到页面 p1、p3（限制 p2）

If (ddlistX.SelectedItem = "2" And **Some Hober button is selected** )

导航到页面 p1 和 p2

别的

消息“您的选择丢失”

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:42:55.863

```
if (ddlistX.SelectedItem = "1" And Some Hober button is selected)
{
Session["Restrictp2"]=="Yes";
Response.Redirect(p1);
//Navigate to page p1, p3 (restrict p2)
}
else if (ddlistX.SelectedItem = "2" And Some Hober button is selected)
{
Session["Restrictp2"]=="No";
Response.Redirect(p1);
Navigate to page p1 and p2
}
else
{
ErrorLabel.Text= "Your selection is missing ";
} 
```

在您的 p3 代码隐藏 Page_Load 中，执行此操作

```
if(Session["Restrictp2"].toString=="Yes")
{
Response.Redirect("home.aspx");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T08:30:39.117

（这是对 Ashwin 答案的修改）

> 嘿再次：我有主页，p2，p3 页面。条件 1 导航：主页>p3 条件 2 导航：主页>p2>p3

//条件1

```
if (ddlistX.SelectedItem == "1" And ddlistY.SelectedItem == "a")
      { Session["p2.aspx"]=="True"; 
      Response.Redirect("p3.aspx"); //Navigate to page p3 and restrict p2 } 
```

//条件2

```
 else if (ddlistX.SelectedItem = ="2" ddlistY.SelectedItem == "b")
        { 
           Session["p2.aspx"]=="False"; 
          Response.Redirect(p2.aspx); Navigate to page p1 and p2 } 
```

//我用postbackurl从p2导航到p3

```
else { ErrorLabel.Text= "Your selection is missing "; } 
```

在您的 p2 代码隐藏 Page_Load 中，执行此操作

```
if(Session["p2.aspx"]=="Yes") 
 { Response.Redirect("home.aspx"); } 
```

# javascript - 来自 MSBuild 的交互式命令行

> ID：11204573
> 
> 赞同：0
> 
> 时间：2012-06-26T09:40:34.663
> 
> 标签：javascript, msbuild, teamcity, watin

我正在使用 TeamCity 和 MSBuild 构建应用程序，并且为了能够在构建过程中运行我的 javascript 集成测试（使用 NUnit 和 Watin）并且仍然能够将 TeamCity Build 代理作为 Windows 服务运行，我需要要从交互式命令窗口运行的测试。至少根据这个线程：[Watin Tests failed on CC.Net](https://stackoverflow.com/questions/640273/watin-tests-fail-on-cc-net/1241329#1241329)

但是，我在获取 MSBuild“Exec”任务以使用 /interactive 标志启动 cmd.exe 时遇到问题。我试过这样做

```
<Exec ContinueOnError="false" Command="start $(COMSPEC) /interactive /c $(SolutionDir)/Tests/RunTests.bat"/> 
```

，这将产生一个带有适当标志的新 cmd 窗口，但问题似乎是 ContinueOnError 不再起作用，因为只要产生新的 cmd 窗口成功，它总是会成功。bat 文件可能会失败，但构建仍将继续。

有谁知道如何用 MsBuild 最好地解决这个任务？

如果您对如何在 TeamCity 服务器上使用 Watin 运行集成测试而不在服务器上保持登录用户有其他建议，请发言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:22:07.487

1 转到您的 teamcity 项目。1\. 添加一个构建步骤 2\. 制作 Runner 类型：命令行 3\. 通过自定义脚本在此处编写脚本或在此处调用脚本。

除非我弄错了并且有特定原因需要使用 MSBuild？TeamCity 支持除 MSBuild 之外的许多工具，因此除非有特定原因，否则我会在此步骤中避免使用它。

# php - PHP脚本显示错误的时间

> ID：11204576
> 
> 赞同：0
> 
> 时间：2012-06-26T09:40:40.090
> 
> 标签：php

我的 PHP 脚本显示错误的时间。例如。我系统上的时间是下午 3:10，而脚本显示的是上午 9:40。

我正在使用 Windows XP。服务器包是“yPortable WebServer”。检查此站点上的其他一些问题，我什至在 php.ini.dist 和 php.ini 文件中进行了以下更改 => date.timezone = "Asia/Calcutta"。但仍然没有任何变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:44:32.657

使用日期函数时，始终在脚本中[设置默认时区](http://php.net/manual/en/function.date-default-timezone-set.php)是个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:49:14.777

您是否尝试过回显 date('e') 或 date('r') 以查看您是否正确设置了时区设置？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:56:57.713

在代码中设置时区效果很好。谢谢你！

好的！这似乎很愚蠢。我刚刚重新启动了操作系统本身，它似乎可以在没有在代码中设置时区的情况下工作。某处出现了一些故障，可能是因为系统连续运行了太长时间（几天）。

# java - 如何在 Java Swing 中实现空闲任务

> ID：11204577
> 
> 赞同：3
> 
> 时间：2012-06-26T09:40:46.023
> 
> 标签：java, swing, awt, event-dispatch-thread, awt-eventqueue

我有一个非常慢的 GUI 应用程序。我想开始介绍各种 GUI 任务的计时 - 但是，我们的许多 GUI 操作会触发其他操作，然后“稍后调用”以触发其他操作。

最终，一切都安定下来，没有什么可做的了。此时，我想停止一个计时器并报告那个 GUI“动作”花了多长时间。

我想办法做到这一点是实现一个名为`invokeOnceIdle(Runnable task)`. 仅当 AWTEventQueue 为“空”时，该方法才会执行提供的任务。即提供的“任务”应该是队列中的最后一件事。

做到这一点的一种方法是，如果有一种方法可以指定“最低”优先级`SwingUtilities.invokeLater`- 但这是不可能的。

接下来我查看是否可以“invokeLater”一个 Runnable 来检查事件队列是否为“空” - 但是没有公共方法可以查看事件队列是否实际上是空的。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:08:03.713

使用您自己的事件队列，您可以轻松实现该目标。这是我做的一些东西，应该让你去：

```
private static class MyEventQueue extends EventQueue {

    private Deque<Runnable> onceIdle = new LinkedList<Runnable>();

    public MyEventQueue() {
        Toolkit.getDefaultToolkit().getSystemEventQueue().push(this);
    }

    public void runOnceIdle(Runnable toRun) {
        onceIdle.addLast(toRun);
    }

    @Override
    protected void dispatchEvent(AWTEvent event) {
        super.dispatchEvent(event);
        if (peekEvent() == null) {
            for (Runnable toRun : onceIdle) {
                toRun.run();
            }
            onceIdle.clear();
        }
    }
} 
```

您所要做的就是使用将您的“Once idle”可运行对象推送到 EventQueue 的实例`runOnceIdle()`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T09:44:53.570

`isEventDispatchThread`返回当前`AWTEventQueue`是否为空，

*   如果当前`AWTEventQueue`为空，您可以将新事件发布到 EventQueue 从

`invokeAndWait()`还有`invokeLater`_

*   如果当前`AWTEventQueue`不是空的，那么你不能`invokeAndWait()`只使用`invokeLater()`

例如

```
import java.awt.EventQueue;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.concurrent.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class IsThereEDT {

    private ScheduledExecutorService scheduler;
    private AccurateScheduledRunnable periodic;
    private ScheduledFuture<?> periodicMonitor;
    private int taskPeriod = 30;
    private SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
    private Date dateRun;
    private JFrame frame1 = new JFrame("Frame 1");

    public IsThereEDT() {
        scheduler = Executors.newSingleThreadScheduledExecutor();
        periodic = new AccurateScheduledRunnable() {

            private final int ALLOWED_TARDINESS = 200;
            private int countRun = 0;
            private int countCalled = 0;
            private int maxCalled = 10;

            @Override
            public void run() {
                countCalled++;
                if (countCalled < maxCalled) {
                    if (countCalled % 3 == 0) {
                        SwingUtilities.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                System.out.println("Push a new event to EDT");
                                frame1.repaint();
                                isThereReallyEDT();
                            }
                        });
                    } else {
                        if (this.getExecutionTime() < ALLOWED_TARDINESS) {
                            countRun++;
                            isThereReallyEDT(); // non on EDT
                        }
                    }
                } else {
                    System.out.println("Terminating this madness");
                    System.exit(0);
                }
            }
        };
        periodicMonitor = scheduler.scheduleAtFixedRate(periodic, 0, taskPeriod, TimeUnit.SECONDS);
        periodic.setThreadMonitor(periodicMonitor);
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                isThereReallyEDT();
                frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame1.getContentPane().add(new JLabel("Hello in frame 1"));
                frame1.pack();
                frame1.setLocation(100, 100);
                frame1.setVisible(true);
            }
        });
        try {
            Thread.sleep(500);
        } catch (InterruptedException ex) {
            Logger.getLogger(IsThereEDT.class.getName()).log(Level.SEVERE, null, ex);
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame2 = new JFrame("Frame 2");
                frame2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame2.getContentPane().add(new JLabel("Hello in frame 2"));
                frame2.pack();
                frame2.setLocation(200, 200);
                frame2.setVisible(true);
                isThereReallyEDT();
            }
        });
    }

    private void isThereReallyEDT() {
        dateRun = new java.util.Date();
        System.out.println("                         Time at : " + sdf.format(dateRun));
        if (EventQueue.isDispatchThread()) {
            System.out.println("EventQueue.isDispatchThread");
        } else {
            System.out.println("There isn't Live EventQueue.isDispatchThread, why any reason for that ");
        }
        if (SwingUtilities.isEventDispatchThread()) {
            System.out.println("SwingUtilities.isEventDispatchThread");
        } else {
            System.out.println("There isn't Live SwingUtilities.isEventDispatchThread, why any reason for that ");
        }
        System.out.println();
    }

    public static void main(String[] args) {
        IsThereEDT isdt = new IsThereEDT();
    }
}

abstract class AccurateScheduledRunnable implements Runnable {

    private ScheduledFuture<?> thisThreadsMonitor;

    public void setThreadMonitor(ScheduledFuture<?> monitor) {
        this.thisThreadsMonitor = monitor;
    }

    protected long getExecutionTime() {
        long delay = -1 * thisThreadsMonitor.getDelay(TimeUnit.MILLISECONDS);
        return delay;
    }
} 
```

# android - 应用程序未运行，显示 NullPointerException

> ID：11204582
> 
> 赞同：0
> 
> 时间：2012-06-26T09:41:15.387
> 
> 标签：android, logcat

我对此很陌生。现在这个简单的应用程序从网络下载图像作为可绘制图像，然后将其转换为位图（将其存储在缓存中）并在 UI 中显示。当我运行它时，它会给出**NullPointerException。**

**代码：-**

```
public class ImageActivity extends Activity {
    /** Called when the activity is first created. */
    private LruCache<String, Bitmap> mchache;
    ImageView imageview;
    Bitmap image;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

                imageview=(ImageView)findViewById(R.id.img);
        Log.i("shu","HERE @ calling loadimage");
       loadimage();

    }
    public void loadimage()

    {          Log.i("shu","HERE @ inside ");

        image = (Bitmap) mchache.get("img");
        Log.i("shu","HERE @line1passed");

        if (image==null)
        {        Log.i("shu","HERE @ imahe==null");

            downloadimage();
        }
        else if (image != null)
        {        Log.i("shu","HERE @ image!= null");

        imageview.setImageBitmap(image);
        }
    }
    // converts drawable to bitmap
    public static Bitmap drawableToBitmap (Drawable drawable) {
        Log.i("shu","HERE @ drawable to bitmap");

        if (drawable instanceof BitmapDrawable) {
            return ((BitmapDrawable)drawable).getBitmap();
        }

        Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap); 
        drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
        drawable.draw(canvas);

        return bitmap;
    }
    public void downloadimage()
    {        Log.i("shu","HERE @ download image");

        String address="http://abd.com/absde.jpg";
        try{ 
           URL url = new URL(address);
         InputStream content = (InputStream)url.getContent();
         Drawable d = Drawable.createFromStream(content , "src"); 
         imageview.setImageDrawable(d);
         Bitmap bmap = drawableToBitmap(d);
         mchache.put("img",bmap);
        }
        catch (IOException e)
        {        Log.i("shu","HERE @ exception");
}
    }

} 
```

现在根据logcat，问题出在这里

```
 image = (Bitmap) mchache.get("img"); 
```

代码黑白两个日志信息，所以任何人都可以指出是什么原因造成的。**我在支持库的帮助下使用 LRUCache，因为它在 api8 中不存在。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:43:50.713

你还没有初始化

```
private LruCache<String, Bitmap> mchache; 
```

做在**`onCreate()`**

```
mchache = LruCache<String, Bitmap>(); 
```

前

```
loadimage(); 
```

# javascript - 如何在 Spotify 中使用高级搜索查询？

> ID：11204585
> 
> 赞同：0
> 
> 时间：2012-06-26T09:41:17.787
> 
> 标签：javascript, spotify

我正在尝试使用搜索文档中链接的“高级查询语法”。

但是什么都没有回来！我的搜索代码在搜索词前面添加了“艺术家：”，最后添加了“”。

但是例如 The Offspring 不会返回单个结果。在 Spotify 实习生消息框中，它确实有效，即使您在 Spotify 应用程序左上角的搜索框中添加搜索词，它也会返回结果。

我的代码如下所示：

```
 var search = (new models.Search('artist:"' + searchWord + '"', {
           'localResults'    : models.LOCALSEARCHRESULTS.IGNORE,
            'searchArtists'   : false,
            'searchAlbums'    : false,
            'searchTracks'    : true,
            'searchPlaylists' : false,
            'pageSize'        : 10,
            'searchType'      : models.SEARCHTYPE.SUGGESTION                
        }));

  search.observe(models.EVENT.CHANGE, searchResultObserver); 
```

该代码返回 searchWord 的结果并将它们添加到我的 UI 中，但对于艺术家：“搜索词”它保持空白。

为什么？这是我不允许获得“好”搜索结果的许可证问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:27:40.507

`models.SEARCHTYPE.SUGGESTION`似乎不适用于高级查询。试试`models.SEARCHTYPE.NORMAL`吧。

# c# - 何时使用委托而不是接口

> ID：11204598
> 
> 赞同：6
> 
> 时间：2012-06-26T09:42:28.427
> 
> 标签：c#, interface, delegates

根据这篇[文章](http://msdn.microsoft.com/en-us/library/ms173173.aspx)，它说：

> 在以下情况下使用委托：
> 
> *   一个类可能需要多个方法的实现。
> 
> 在以下情况下使用接口：
> 
> *   一个类只需要方法的一个实现。

谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T09:46:07.983

那是……奇怪而令人困惑。如果您只需要一个方法的实现......*使用一个方法*（也许是一个虚拟方法）。与接口一样，委托的部分**意义**在于您可以替换多个不同的实现。

如果我不得不总结：

> 委托类型非常像只公开一个方法的接口，委托实例非常像*实现*该接口的类的实例 - 只是具有很多编译器的性感，使其非常容易写，即`x => 2 * x`，并且不需要（有时）需要实例。

代表还有一些其他有用的技巧`events`（多播等），但这听起来与文章的上下文无关。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T09:45:51.923

> 一个类可能需要多个方法的实现。

```
public delegate int PerformCalculation(int x, int y);

void SomeMethod()
{
    PerformCalculation PerformCalculation_1 = myDelegateFun_1;
    PerformCalculation PerformCalculation_2 = myDelegateFun_2;
    PerformCalculation_1(5, 3);
    PerformCalculation_2(5, 3);      
}

private int myDelegateFun_1(int x, int y)
{
    return x + y;
}
private int myDelegateFun_2(int x, int y)
{
    return x + y;
} 
```

**在上面的示例中，PerformCalculation_1、PerformCalculation_2 是 PerformCalculation 的多个实现**

```
A class only needs one implementation of the method 
```

```
interface IDimensions 
{
   float Length();
}

class Box : IDimensions 
{
   float Length() 
   {
       return lengthInches;
   }
} 
```

**在上面的示例中，只有接口公开的方法的单个实现。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:46:48.653

在我的简单头脑中，这与 ICompare/IComparable 非常相似。

接口的实现意味着行为是实现类所固有的。行为不会根据呼叫者或呼叫的情况而改变。

代表说该操作不是类固有的，而是基于上下文或调用者来定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T21:11:33.357

这个措辞似乎有点混乱，但可以用一个例子来说明。假设有人正在设计一个希望在单击时提供通知的按钮控件。通常的做法是让按钮维护要呼叫的代表列表。如果一个类希望按钮在其自身实例上调用其方法之一，它可以轻松构造一个委托，该委托将在该实例上调用该方法。请注意，为此目的使用委托意味着除了委托应该调用其方法的实例之外，还需要为委托构造一个堆对象。

另一种方法是定义一个接口`INotifyOfButtonClick`，一个方法`NotifyOfButtonClick()`，并让按钮控件保持一个列表`INotifyButtonClick`。单击按钮时，它将调用`NotifyOfButtonClick()`每个实例。如果表单只有一个使用该接口的按钮，或者如果所有此类按钮使用相同的方法，则表单可以实现`INotifyOfButtonClick()`自己，并将自己添加到按钮的订阅列表中，而不必创建单独的委托来调用它的方法。在这种方法有效的场景中，它可能比使用委托更有效。但是，如果一个表单有两个使用相同界面的按钮，但想要调用不同的方法，那么事情就会变得更加复杂。在这种情况下，表单有必要创建一个新对象，其目的是实现`INotifyOfButtonClick()`通过在它持有引用的表单上调用某个方法。使用这样的包装器对象可能会产生与委托相当的性能，但如果没有一些编译器帮助，委托就会有。

顺便说一句，如果微软可以为每个委托添加一个嵌套接口`IInvoke`（例如`Action<int>`定义一个 interface `Action<int>.IInvoke`），那么如果接受 an 的方法`Action<int>`被重写为接受 an `Action<int>.IInvoke`，那么只有一个方法的对象将被此类委托调用可以简单地将自己传递给这样的方法。这样的功能可以提高闭包的效率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T17:07:20.997

• 接口只定义了一个方法。• 需要多播能力。• 订阅者需要多次实现接口。

# mysql - MySQL 5.1 和部分查询结果

> ID：11204601
> 
> 赞同：0
> 
> 时间：2012-06-26T09:42:41.580
> 
> 标签：mysql

早上好，我正在执行查询以在我的程序中填充 MFC 记录集。自从我在该表中有很多行以来，我一次只会加载一定数量的记录。那可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:33:22.550

您需要`LIMIT`语句中的子句`select`来获取某个范围内的记录。

[*Select 语句语法*](http://dev.mysql.com/doc/refman/5.6/en/select.html)的注释：

LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量，但以下情况除外：

1.  在准备好的语句中，可以使用 LIMIT 指定参数？占位符标记。
2.  在存储的程序中，可以使用整数值的例程参数或局部变量来指定 LIMIT 参数。

有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为 0（不是 1）：

```
SELECT * FROM tbl LIMIT 5,10;  # Retrieve rows 6-15 
```

要检索从某个偏移量到结果集末尾的所有行，您可以为第二个参数使用一些较大的数字。此语句检索从第 96 行到最后一行的所有行：

```
SELECT * FROM tbl LIMIT 95,18446744073709551615; 
```

使用一个参数，该值指定从结果集开头返回的行数：

```
SELECT * FROM tbl LIMIT 5;     # Retrieve first 5 rows 
```

换句话说，`LIMIT row_count`等价于`LIMIT 0, row_count`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:45:22.797

尝试这个 ：：

```
Select * from table limit 100 
```

# solr - 如何修复 IndexNotFoundException：找不到段*文件？

> ID：11204602
> 
> 赞同：8
> 
> 时间：2012-06-26T09:42:43.217
> 
> 标签：solr

我自己编写代码来索引一些数据文件。一切正常。一旦我修改了`schema.xml`文件，现在我得到内部服务器错误，我不知道如何解释它。

```
Internal Server Error

request: http://127.0.0.1:8080/solr/update?wt=javabin&version=2
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:427)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:249)
    at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:69)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:54)
    at solr.client.SolrClient.index(SolrClient.java:109)
    at solr.client.SolrClient.main(SolrClient.java:26) 
```

然后我查看了 catalina 日志文件，它说没有创建核心......

```
 Jun 26, 2012 2:09:21 AM org.apache.solr.core.SolrCore close
INFO: []  CLOSING SolrCore org.apache.solr.core.SolrCore@5675b3ee
Jun 26, 2012 2:09:21 AM org.apache.solr.common.SolrException log
SEVERE: java.lang.NullPointerException
    at org.apache.solr.core.SolrCore.close(SolrCore.java:712)
    at org.apache.solr.core.SolrCore.<init>(SolrCore.java:599)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:483)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219)
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)

Jun 26, 2012 2:09:21 AM org.apache.solr.core.SolrCore closeSearcher
INFO: [] Closing main searcher on request.
Jun 26, 2012 2:09:21 AM org.apache.solr.common.SolrException log
SEVERE: org.apache.solr.common.SolrException
    at org.apache.solr.core.SolrCore.<init>(SolrCore.java:600)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:483)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335)
    at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219)
    at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161)
    at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.RuntimeException: org.apache.lucene.index.IndexNotFoundException: no segments* file found in org.apache.lucene.store.NIOFSDirectory@/Users/nan/solr-tomcat/solr/data/index lockFactory=org.apache.lucene.store.NativeFSLockFactory@11396ef7: files: []
    at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1104)
    at org.apache.solr.core.SolrCore.<init>(SolrCore.java:585)
    ... 23 more
Caused by: org.apache.lucene.index.IndexNotFoundException: no segments* file found in org.apache.lucene.store.NIOFSDirectory@/Users/nan/solr-tomcat/solr/data/index lockFactory=org.apache.lucene.store.NativeFSLockFactory@11396ef7: files: []
    at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:667)
    at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:72)
    at org.apache.lucene.index.IndexReader.open(IndexReader.java:375)
    at org.apache.solr.core.StandardIndexReaderFactory.newReader(StandardIndexReaderFactory.java:38)
    at org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1093)
    ... 24 more 
```

更新了上面的 catalina 日志文件...是的，我删除了索引数据，因为我认为我要创建新索引...我今天早些时候这样做了，但直到现在我才看到这种错误...我应该如何解决这个问题? :(

非常感谢！！！（^不定式）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-26T10:44:03.470

正如您从日志文件中看到的那样，Solr/Lucene 在数据目录中找不到段文件。

如果您删除数据目录，Solr 将在启动时自动重新创建一个全新的索引（当然是空的）。从错误看来，您的数据目录在那里，但缺少一些文件。由于我了解您愿意重新索引所有内容，因此您只需删除索引目录然后重新索引即可修复错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-08T14:01:24.857

异常[IndexNotFoundException](https://lucene.apache.org/core/4_10_0/core/org/apache/lucene/index/IndexNotFoundException.html)表示在目录中未找到索引。可能是因为目录是空的，但也可能表明索引损坏。

所以你应该：

1.  删除`index`目录或从备份中恢复数据。
2.  重新启动服务器（或至少重新加载配置）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-09T19:45:28.153

我遇到了这个错误，因为**还没有要搜索的文档**（这发生在我的工作站上）。

在这种情况下，触发创建文档将解决问题。

# javascript - Flex 获取 iframe 文本值

> ID：11204603
> 
> 赞同：0
> 
> 时间：2012-06-26T09:42:44.747
> 
> 标签：javascript, actionscript-3, apache-flex, iframe

我正在使用分层在我的 flex 应用程序上的 iframe。在我的 iframe 中，我有一个 id 为“days”的文本输入，它是只读的。

如何在我的 flex 应用程序中读取天数？

我想我可能需要做这样的事情？

```
var d = ExternalInterface.call("top.frames[0].document.getElementById('days').value"); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:40:50.310

它不起作用，因为`top.frames[0].document.getElementById('days').value`它不是函数，而是属性。您需要将函数传递给`ExternalInterface.call`（更准确地说是函数的名称）。例如，您可以在 JavaScript（主窗口）中定义

```
top.GetValue = function(id) {
    return frames[0].document.getElementById(id).value;
} 
```

然后使用

```
var d = ExternalInterface.call('top.GetValue', 'days'); 
```

在动作脚本中。

# javascript - 使 js 文件在浏览器调试窗口中不可见

> ID：11204604
> 
> 赞同：-1
> 
> 时间：2012-06-26T09:42:45.317
> 
> 标签：javascript, security, browser

有没有办法让我的 js 文件无法通过浏览器开发工具查看或调试？

问候安迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:46:21.360

不可以。浏览器需要能够读取和执行您的脚本，这意味着无论如何它都会在调试工具中向用户显示*一些内容。*你可能会尝试混淆你的脚本，但 Chrome 有一个“漂亮的打印”模式，它将 Javascript 重新格式化为可读的间距和缩进（混淆的函数和变量名称可能仍然使它更难阅读）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:46:56.977

没有。您必须将 js 传输到客户端才能使其正常工作。这样你就失去了对它的控制。如果您想保护您的知识产权，您可以尝试打乱脚本。但这被认为是不好的做法，并且肯定会使您的代码被视为可疑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:47:27.770

没有完全有效的方法。

源代码压缩器可以提供一点帮助，因为很难将断点放在只有一行代码的文件中；-)

不过，缩小后的代码可以~~相当~~简单地恢复为可读代码。正如@Ianzz 所指出的，Chrome 开发工具中内置了一个去缩小器！

# c - 是否可以在宏替换的替换序列中使用常量

> ID：11204608
> 
> 赞同：1
> 
> 时间：2012-06-26T09:42:50.870
> 
> 标签：c, string, macros, c-preprocessor

在对象类型宏中，可以在下面，

```
#define str "this is a string" 
```

我想知道是否可以在函数类型宏中使用这种类型的字符串文字，如下所示，

```
#define mkstr(a) #a
#define str(s1,s2) mkstr(s1 ## s2 ## "extra") 
```

我运行它并得到错误，现在我想知道有没有办法在函数类型宏的替换序列中使用常量？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:46:03.333

是的。只需将字符串放在一起：C 语言接受它作为字符串常量连接。

```
#define str(s1,s2)   s1 s2 "extra" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:21:59.480

我在您的示例中看到一个问题，因为您有两次 #defined str ：

```
#define str "this is a string"
#define mkstr(a) #a
#define str(s1,s2) mkstr(s1 ## s2 ## "extra") 
```

尝试将其更改为：

```
#define str_const "this is a string"
#define str(s1,s2) s1 s2 "extra") 
```

那我想你会更清楚。如果您想创建一个看起来像这样的字符串，`this is a string extra`那么这里是使用上述宏执行此操作的宏。

```
#define str(s1) str_const "extra" 
```

# java - 从 Java 访问 Salesforce Apex Soap Web 服务

> ID：11204614
> 
> 赞同：4
> 
> 时间：2012-06-26T09:43:07.327
> 
> 标签：java, web-services, soap, salesforce, apex-code

我正在尝试建立与我的 Apex-Webservice 的连接，但每次都失败。我的 Webserce 非常简单：

```
global class AtlassianService 
{
    webService static String hello(String Name) 
    {
        return 'Hello '+Name+' ! :D';
    }
} 
```

要生成客户端我就是这样，[这里](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_quickstart_steps.htm)描述：

```
java –classpath pathToJAR/wsc-22.jar com.sforce.ws.tools.wsdlc pathToWsdl/WsdlFilename​ pathToOutputJar/OutputJarFilename 
```

访问网络服务：

```
SoapConnection soap = Connector.newConnection("mail@XXXXXX.com", "XXXX");

System.out.println(soap.hello("WORLD")); // Invalid Session ( => SessionID is null) 
```

如果我使用 PartnerConnection 获取有效的 SessionID 一切正常：

```
ConnectorConfig config = new ConnectorConfig();
config.setUsername(username);
config.setPassword(password);
config.setAuthEndpoint("https://login.salesforce.com/services/Soap/u/24.0");

new PartnerConnection(config);

SoapConnection soap = Connector.newConnection(null, null);
soap.setSessionHeader(config.getSessionId());

System.out.println(soap.hello("WORLD")); 
```

任何人都知道为什么第一个示例失败？

问候塞巴斯蒂安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T20:40:56.663

我假设发生这种情况是因为您的 AtlassianService wsdl 不包含在 Salesforce 中进行身份验证的登录方法，然后 WSC 生成的代理类无法拥有实际执行登录的代码。

我试图做一些与您的问题非常相似的事情（但使用 Enterprise API）。我找到的解决方案是：

1.  使用 WSC for Enterprise.wsdl (enterprise.jar) 生成代理类
2.  使用 WSC 为 MyWebservice.wsdl (mywebservice.jar) 生成代理类
3.  创建与企业的连接，并获取SessionId
4.  将请求中的 SessionId 设置为 MyWebservice
5.  执行 MyWebservice 方法调用。

像这样：

```
import com.sforce.soap.MyWebservice.SoapConnection;
import com.sforce.soap.MyWebservice.Connector;

import com.sforce.ws.ConnectionException;
import com.sforce.ws.ConnectorConfig;
import com.sforce.soap.enterprise.*;

public class CallWS {

  static final String USERNAME = "username";
  static final String PASSWORD = "pass+securitytoken";

  static SoapConnection MyWebserviceWSconnection;
  static EnterpriseConnection enterpriseConnection;

  public static void main(String[] args) {

    ConnectorConfig config = new ConnectorConfig();
    config.setUsername(USERNAME);
    config.setPassword(PASSWORD);

    try {

      //create a connection to Enterprise API -- authentication occurs
      enterpriseConnection = com.sforce.soap.enterprise.Connector.newConnection(config);    
      // display some current settings
      System.out.println("Auth EndPoint: "+config.getAuthEndpoint());
      System.out.println("Service EndPoint: "+config.getServiceEndpoint());
      System.out.println("Username: "+config.getUsername());
      System.out.println("SessionId: "+config.getSessionId());

      //create new connection to exportData webservice -- no authentication information is included
      MyWebserviceWSconnection = Connector.newConnection("","");
      //include session Id (obtained from enterprise api) in exportData webservice
      MyWebserviceWSconnection.setSessionHeader(config.getSessionId());

      String result = MyWebserviceWSconnection.receiveData("test");
      System.out.println("Result: "+result);

    } catch (ConnectionException e1) {
        e1.printStackTrace();
    }  
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:10:31.790

如果发生错误，wsc 的每个操作调用都会引发 ConnectionException 或其具体子类型之一。所以你应该收到一条错误消息，可能有助于解决问题。为了调试wsc发送和接收的soap消息，在初始化ConnectorConfig之后添加以下行：

```
conf.setPrettyPrintXml(true);
conf.setTraceMessage(true); 
```

这将漂亮地打印在您的客户端和 Web 服务之间交换的整个 xml。响应也可能会帮助您找到问题的原因。

希望这可以帮助。h9nry

# redis - Redis在写入期间是否锁定？

> ID：11204618
> 
> 赞同：2
> 
> 时间：2012-06-26T09:43:24.120
> 
> 标签：redis

我试图找出答案，但我不确定那是 Redis MVCC？Redis 是否允许在写入期间读取？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T10:14:58.557

Redis 是单线程的。所有命令都是原子的。在命令运行时，不能执行其他命令。但是由于一切都在内存中，因此命令（通常）非常快。

所以不，redis 不允许在写入期间读取，但这不是问题。

# sql - SQL Server 中的基本模式识别

> ID：11204625
> 
> 赞同：-1
> 
> 时间：2012-06-26T09:43:48.210
> 
> 标签：sql, sql-server, regex, substring

我目前以这种格式存储我的数据：

```
Word1 - Word2 - Number.I.Need.To.Extract.Separated.By.Periods - Word3 - Word4 
```

我想做的是编写一个更新语句，它将我刚刚创建的列设置为`Number.I.Need.To.Extract.Separated.By.Periods`.

我最好的方法是什么，或者像这样工作？

我试图写如下：

```
UPDATE Table1
SET NewColumn = 
               (SELECT SUBSTRING(Column, 19, 14)
                FROM Table1) 
```

结果是：

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。该语句已终止。

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:47:38.377

您不需要子查询，因为更新发生在同一行的“内部”。

这不行吗？

```
UPDATE Table1 SET NewColumn = SUBSTRING(Column, 19, 14) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:52:01.250

在文本分析和字符串操作方面，[正则表达式](http://msdn.microsoft.com/en-us/library/c75he57e)提供了比 TSQL 字符串函数更高效、更优雅的解决方案。

您可以编写一个[CLR 用户定义函数](http://msdn.microsoft.com/en-us/library/ms131077.aspx)来提取模式匹配字符串。

```
UPDATE Table1 SET NewColumn = fn_ExtractPatternMatchingString(Column,pattern) 
```

# tridion - 无法从 Visio 连接 SDL Tridion 内容管理器

> ID：11204630
> 
> 赞同：3
> 
> 时间：2012-06-26T09:44:10.667
> 
> 标签：tridion, tridion-2011

我正在尝试使用 visio 连接 SDL Tridion 内容管理器以打开/保存工作流，收到以下错误消息，您能帮我解决这个问题吗？

*请求失败，HTTP 状态为 407：需要代理身份验证（ISA 服务器需要授权才能完成请求。对 Web 代理过滤器的访问被拒绝）。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:56:03.293

听起来您的网络上运行了某种形式的 HTTP 代理，这会阻止您使用 visio 客户端直接调用 CMS。会是这样吗？

要对此进行测试，您可能会考虑在 CMS 服务器本身上安装 Visio，并尝试使用 localhost 或 127.0.0.1 地址（这些应该绕过任何代理）而不是您现在使用的基于 DNS 条目的名称进行连接。

如果可行，我们或许能够找到远程连接的解决方案。

# jquery - Keypress、Key Down 和 Keyup 的顺序可以被操纵吗

> ID：11204632
> 
> 赞同：1
> 
> 时间：2012-06-26T09:44:20.520
> 
> 标签：jquery

我承认自己在阅读有关事件顺序和 jquery 绑定主题的各种帖子时完全搞糊涂了。

在测试时，我得到了一些意想不到的结果。

据我所知，事件和相应处理程序的执行顺序是 1\. KeyUp 2\. KeyPress 3\. keydown

这似乎违反直觉，我期待 keydown，keypress，keyup

我看到各种帖子报告如何订购绑定到同一事件的处理程序，但这些是不同的事件。

我希望我完全把这复杂化了。有人可以建议我如何确保 keydown 在 keyup 之前在 keypress 之前执行。

非常感谢

我根据这个片段到达了订单。我想我在某种程度上误解了。

```
$("#middle_Name").keydown(function(event){
    alert("third is keydown");
}); 
$("#middle_Name").keypress(function(event){
    alert("first is keypress");
});
$("#middle_Name").keyup(function(event){
    alert("first is keyup");
}); 
```

# google-app-engine - 我应该如何向持久实体添加属性？

> ID：11204634
> 
> 赞同：0
> 
> 时间：2012-06-26T09:44:24.770
> 
> 标签：google-app-engine, google-cloud-datastore, jdo

我在我的 appengine java 应用程序中使用 JDO 和谷歌数据存储，一切正常。

当我向 @PersistanceCapable 类添加新属性并部署它时，不再显示“旧”已经持久化的实体。我真的不明白发生了什么。有没有人分享这个主题的理论背景？如果您用相同的新版本替换一个类（serialUID 字段保持不变），编译和部署它，您还应该能够循环现有的“旧版本”实体并使用缺失的信息更新它们，所以他们将保持对应用程序可用！如何做到这一点？我不知道。

EG 我有大约 35 个“位置”实体（Location.class）。我更新 Location.class 以提供一个新的@Persistent 属性“Long LocationExternalID;” 连同它的 getter/setter(s)。我还更改了我的应用程序代码以使用此字段。如何循环所有旧实体来添加这个新属性并设置它的值？看起来像是在反序列化之前测试属性是否可用？

我无法删除并重新创建旧实体，因为它们的键在无主关系中被引用。这样做的工作量太大。

未显示意味着通过查询，它在应用程序加载时获取所有元素以显示在下拉列表中。然后，当我通过 tha 应用程序添加一个新应用程序时，它会出现在下拉列表中并按预期运行。包括旧元素在内的所有元素都在数据存储查看器中可见。

# html - 是否有一个 javascript 库可以处理整个页面幻灯片？

> ID：11204640
> 
> 赞同：2
> 
> 时间：2012-06-26T09:44:54.027
> 
> 标签：html, jquery-mobile, cordova

当我们在构建 html5 web 应用或 ios 混合应用时，我们需要在 ios 应用中制作类似于视图转换的效果。

如：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html)

过去我使用 jquery mobile 或 sencha touch 来处理它。

但是，您知道，jquery mobile 依赖于许多库或 css。（例如：jquery、jquerymobile.css 等）并且 sencha touch 太重了。

我只想找到一个简单的 javascript 库来帮助我处理这个问题。

我也希望这个库是纯粹且易于使用的。

有没有 javascript 库可以处理这个问题？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:04:24.387

也许这可以帮助你：[没有框架的 HTML 页面幻灯片](http://www.terrenceryan.com/blog/post.cfm/html-page-slide-without-a-framework)

该解决方案非常轻量级，由一点 AJAX、一些 CSS 转换和 CSS 转换事件提供支持。同样重要的是要注意这仅适用于 WebKit。（本案例是针对 Android 和 iOS 的 PhoneGap 的移动应用程序，因此它只需要 WebKit 兼容性。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:51:33.060

像这样的东西？

[http://buildinternet.com/project/supersized/slideshow/3.2/demo.html](http://buildinternet.com/project/supersized/slideshow/3.2/demo.html)

jQuery 通常应该是最佳选择，因为它将确保它可以跨浏览器和平台工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:53:35.977

您可能想看看[Swipe](https://github.com/bradbirdsall/Swipe)，特别是因为这也适用于 iOS，因为它检测到滑动并且[演示](http://swipejs.com/)显示了对幻灯片的支持。

这里还有一些其他好的解决方案，在 Stack Overflow 上，关于这个问题：[滑动整个网页](https://stackoverflow.com/questions/4403004/sliding-an-entire-web-page)你可能想看看那里的答案，接受的答案是滑动整个页面

[编辑]根据您的技能，您可以尝试为滑动制作自己的香草（纯）javascript 函数。这就是我最终做的，使用 html5 的 translate3d css 属性。

例如，这是我用来生成 css 代码的函数：

```
//generates transformation styles for Opera, Chrome, Firefox and IE
function genTransform (x, y, z, dur) {
    var genStyle = '-webkit-transform: translate3d(' + x + 'px, ' + y + 'px, ' + z + 'px); -webkit-transition: ' + dur + 'ms;' + 
                '-moz-transform: translate3d(' + x + 'px, ' + y + 'px, ' + z + 'px); -moz-transition: ' + dur + 'ms;' + 
                '-ms-transform: translate3d(' + x + 'px, ' + y + 'px, ' + z + 'px); -ms-transition: ' + dur + 'ms;' + 
                '-o-transform: translate(' + x + 'px, ' + y + 'px); -o-transition: ' + dur + 'ms;' +
                'transform: translate3d(' + x + 'px, ' + y + 'px, ' + z + 'px); transition: ' + dur + 'ms;';

    return genStyle;
} 
```

然后我将样式应用到我的 div 以让它们根据我的需要滑动。如果你只在设定数量的页面之间滑动，实际上非常简单

# c# - DataGridView + ComboBox + 来自 2 个表的数据

> ID：11204643
> 
> 赞同：0
> 
> 时间：2012-06-26T09:44:59.863
> 
> 标签：c#, datagridview, combobox, npgsql

我有 2 张桌子：

第一的：

```
id | 2ndTableId | Name 
```

第二：

```
id | name 
```

我希望它们在 dataGridView 上显示为列：1-> 带有来自第二个表的名称列表的组合框（带有一些 where 子句），选定的值 = 来自第一个表的 '2ndTableId' 2-> 来自第一个表的名称

此外，我想保留 ComboBox 2 值（id 和 name）。我用 Id 和 Name 属性创建了自己的 MyComboBox 类，但出现错误：

System.argumentException：DataGridViewComboBoxCell 值无效。

我不知道如何管理这个。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:27:37.877

我有同样的情况。我为两个表创建了两个 DTO 类并分配了它们。创建两个类

```
public class Table1
{
    public int Id { get; set; }
    public int Table2Id { get; set; }
    public string Name { get; set; }
}

public class Table2
{
    public int Table2Id { get; set; }
    public string Table2Name { get; set; }
} 
```

然后在您中创建一个具有四列的数据网格视图。

```
Column1=> Name:idDropDown Default Text Style:DataGridViewCellStyle { }
Column 2=> Name:Table1Id DataPropertyName:Table1Id 
Column 3=> Name:Table2Id DataPropertyName:Table2Id 
Column 4=> Name:Tbale1Name DataPropertyName:Tbale1Name 
```

然后生成两个列表，其中包含您需要的数据。

```
List<Table1> dropDownList;
List<Table2> gridData; 
```

在您的代码中使用如下

```
idDropDown.DisplayMember="Table2Name";
idDropDown.ValueMember="Table2Id";
idDropDown.DataSource=dropDownList;

gridview1.AutoGenerateColumns = false;
gridview1.DataSource=gridData; 
```

主要的是我们必须在这段代码中将 AutoGenerateColumns 设置为 False

# java - 如果使用 apache-poi 的行超过 64k，如何拆分 excel 文件？

> ID：11204645
> 
> 赞同：1
> 
> 时间：2012-06-26T09:45:00.517
> 
> 标签：java, excel, apache-poi

我正在使用以下代码创建 excel 文件

```
public class ResultSetToExcel {
        private HSSFWorkbook workbook;
        private HSSFSheet sheet;
        private HSSFFont boldFont;
        private HSSFDataFormat format;
        private ResultSet resultSet;
        private FormatType[] formatTypes;

        public ResultSetToExcel(ResultSet resultSet, FormatType[] formatTypes, String sheetName) {
            workbook = new HSSFWorkbook();
            this.resultSet = resultSet;
            sheet = workbook.createSheet(sheetName);
            boldFont = workbook.createFont();
            boldFont.setBoldweight(HSSFFont.BOLDWEIGHT_BOLD);
            format = workbook.createDataFormat();
            this.formatTypes = formatTypes;
        }

        public ResultSetToExcel(ResultSet resultSet, String sheetName) {
            this(resultSet, null, sheetName);
        }

        private FormatType getFormatType(Class _class) {
            if (_class == Integer.class || _class == Long.class) {
                return FormatType.INTEGER;
            } else if (_class == Float.class || _class == Double.class) {
                return FormatType.FLOAT;
            } else if (_class == Timestamp.class || _class == java.sql.Date.class) {
                return FormatType.DATE;
            } else {
                return FormatType.TEXT;
            }
        }

        public void generate(OutputStream outputStream) throws Exception {
            try {
                ResultSetMetaData resultSetMetaData = resultSet.getMetaData();
                if (formatTypes != null && formatTypes.length != resultSetMetaData.getColumnCount()) {
                    throw new IllegalStateException("Number of types is not identical to number of resultset columns. "
                            + "Number of types: " + formatTypes.length + ". Number of columns: "
                            + resultSetMetaData.getColumnCount());
                }
                int currentRow = 0;
                HSSFRow row = sheet.createRow(currentRow);
                int numCols = resultSetMetaData.getColumnCount();
                boolean isAutoDecideFormatTypes;
                if (isAutoDecideFormatTypes = (formatTypes == null)) {
                    formatTypes = new FormatType[numCols];
                }
                for (int i = 0; i < numCols; i++) {
                    String title = resultSetMetaData.getColumnName(i + 1);
                    writeCell(row, i, title, FormatType.TEXT, boldFont);
                    if (isAutoDecideFormatTypes) {
                        Class _class = Class.forName(resultSetMetaData.getColumnClassName(i + 1));
                        formatTypes[i] = getFormatType(_class);
                    }
                }

                currentRow++; // Write report rows
                while (resultSet.next()) {
                    row = sheet.createRow(currentRow++);
                    for (int i = 0; i < numCols; i++) {
                        Object value = resultSet.getObject(i + 1);
                        writeCell(row, i, value, formatTypes[i]);
                    }
                }
                // Autosize columns
                for (int i = 0; i < numCols; i++) {
                    sheet.autoSizeColumn((short) i);
                }
                workbook.write(outputStream);
            } finally {
                outputStream.close();
            }
        }

        public void generate(File file) throws Exception {
            generate(new FileOutputStream(file));
        }

        private void writeCell(HSSFRow row, int col, Object value, FormatType formatType) throws NestableException {
            writeCell(row, col, value, formatType, null, null);
        }

        private void writeCell(HSSFRow row, int col, Object value, FormatType formatType, HSSFFont font)
                throws NestableException {
            writeCell(row, col, value, formatType, null, font);
        }

        private void writeCell(HSSFRow row, int col, Object value, FormatType formatType, Short bgColor, HSSFFont font)
                throws NestableException {
            HSSFCell cell = HSSFCellUtil.createCell(row, col, null);
            if (value == null) {
                return;
            }
            if (font != null) {
                HSSFCellStyle style = workbook.createCellStyle();
                style.setFont(font);
                cell.setCellStyle(style);
            }
            switch (formatType) {
            case TEXT:
                cell.setCellValue(value.toString());
                break;
            case INTEGER:
                cell.setCellValue(((Number) value).intValue());
                HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, HSSFDataFormat
                        .getBuiltinFormat(("#,##0")));
                break;
            case FLOAT:
                cell.setCellValue(((Number) value).doubleValue());
                HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, HSSFDataFormat
                        .getBuiltinFormat(("#,##0.00")));

                break;
            case DATE:
                cell.setCellValue((Timestamp) value);
                HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, HSSFDataFormat
                        .getBuiltinFormat(("m/d/yy")));
                break;
            case MONEY:
                cell.setCellValue(((Number) value).intValue());
                HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, format
                        .getFormat("($#,##0.00);($#,##0.00)"));
                break;
            case PERCENTAGE:
                cell.setCellValue(((Number) value).doubleValue());
                HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.DATA_FORMAT, HSSFDataFormat
                        .getBuiltinFormat("0.00%"));
            }
            if (bgColor != null) {
                HSSFCellUtil.setCellStyleProperty(cell, workbook, HSSFCellUtil.FILL_FOREGROUND_COLOR, bgColor);
                HSSFCellUtil
                        .setCellStyleProperty(cell, workbook, HSSFCellUtil.FILL_PATTERN, HSSFCellStyle.SOLID_FOREGROUND);
            }
        }

        public enum FormatType {
            TEXT, INTEGER, FLOAT, DATE, MONEY, PERCENTAGE
        }
    } 
```

和实现上述代码的类

```
ResultSetToExcel resultSetToExcel = new ResultSetToExcel(rs,        new ResultSetToExcel.FormatType[] { ResultSetToExcel.FormatType.TEXT, ResultSetToExcel.FormatType.TEXT,            ResultSetToExcel.FormatType.INTEGER, ResultSetToExcel.FormatType.MONEY }, "Employee List");    resultSetToExcel.generate(new File("c:\\employees.xls")); 
```

如果记录超过 64000 行，如何拆分 Excel 文件？

编辑：

如何获取 POI 中 Excel 工作表的行数？如果是 64k 如何创建新的 excel？

如何获得行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:48:50.153

我建议你修改你的生成方法如下：

a) 确保它在一个电子表格中生成不超过 64000 行。

b) 让它返回一个布尔值——如果 ResultSet 中没有剩余的行，则返回 true，否则返回 false。

因此，您在 generate 方法中的主循环可能看起来像这样：

```
boolean allRowsDone = true;              
currentRow++; 
while (resultSet.next()) {
    row = sheet.createRow(currentRow++); 
    for (int i = 0; i < numCols; i++) { 
        Object value = resultSet.getObject(i + 1); 
        writeCell(row, i, value, formatTypes[i]); 
     }
     if (currentRow >= 64000) {
         allRowsDone = false;
         break; 
}
// put the rest of your code here
return allRowsDone; 
```

然后，在调用程序中，您可以执行以下操作：

```
String baseFile = "c:\\employees";
String fileName = baseFile + ".xls";
int fileCount = 1;
while (true) {
    boolean done = resultSetToExcel.generate(new File(fileName));
    if (done) break;
    fileName = baseFile + "_" + fileCount + ".xls";
    fileCount++;
} 
```

这将导致您根据需要创建尽可能多的 excel 文件，每个 excel 文件包含不超过 64000 行。第一个文件名为“employees.xls”，第二个文件名为“employees_1.xls”，以此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:05:33.450

如果 (valueOf(64000))column 不为空，则有一种方法可以从第 n 行给出值 创建另一个 Excel

# arrays - Powershell 多维数组排序

> ID：11204646
> 
> 赞同：1
> 
> 时间：2012-06-26T09:45:03.560
> 
> 标签：arrays, sorting, powershell, multidimensional-array

我有一个处理我们所有 SQL Server 的脚本。该脚本有几个函数，我有一个错误例程，它将服务器名称、函数名称和错误消息记录到一个 500 行 x 3 列的数组中。在脚本结束时，我想将此数组排序为服务器名称序列。有几篇文章建议我只需将数组通过管道传输到`sort-object`cmdlet，但是当我这样做时，数组的每个元素都将替换为`system.Object[]`. 注意。函数之前的数组填充只是我的数组的一个例子

```
$global:ErrorCount = 0
$global:ErrArray = new-object 'object[,]' 500,3

$global:ErrArray[1,00]= "SV000004"
$global:ErrArray[1,01]= "ProcessServers"
$global:ErrArray[1,02]= "The server was not found or was not accessible."

$global:ErrArray[2,00]= "BOSWEB02"
$global:ErrArray[2,01]= "GetDatabases"
$global:ErrArray[2,02]= "Database Status = Shutdown"

$global:ErrArray[3,00]= "SATURN"
$global:ErrArray[3,01]= "GetDatabases"
$global:ErrArray[3,02]= "Database Status = Shutdown"

$global:ErrArray[4,00]= "BOSWEB02"
$global:ErrArray[4,01]= "GetSystemInfo"
$global:ErrArray[4,02]= "Access is denied"

$global:ErrorCount = 4

Function DisplayErrors
{
    Write-Host "`nBefore:-`n"

    for ( $iLoop=1; $iLoop -le $global:ErrorCount; $iLoop++)
    {
        "{0,-14}  {1,-18}  {2,-80}" -f 
          $global:ErrArray[$iLoop,0], $global:ErrArray[$iLoop,1], 
          $global:ErrArray[$iLoop,2]
    }

    $Sorted = $global:ErrArray | Sort-Object @{Expression={$_[0]}}

    Write-Host "`nAfter:-`n"    

    for ( $iLoop=1; $iLoop -le $global:ErrorCount; $iLoop++)
    {
        "{0,-14}  {1,-18}  {2,-80}" -f 
          $Sorted[$iLoop,0], $Sorted[$iLoop,1], $Sorted[$iLoop,2]
    }
}  

DisplayErrors 
```

输出如下所示：-

前：-

```
SV000004        ProcessServers      The server was not found or was not accessible.                                 
BOSWEB02        GetDatabases        Database Status = Shutdown                                                      
SATURN          GetDatabases        Database Status = Shutdown                                                      
BOSWEB02        GetSystemInfo       Access is denied 
```

后：-

```
System.Object[]  System.Object[]     System.Object[]                                                                 
System.Object[]  System.Object[]     System.Object[]                                                                 
System.Object[]  System.Object[]     System.Object[]                                                                 
System.Object[]  System.Object[]     System.Object[] 
```

谁能告诉我我在这里做错了什么？

非常感谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:18:02.140

以这种方式创建数组（锯齿状数组：array[][]）你`sort-object`可以工作：

```
$global:ErrArray += ,@("SV000004","ProcessServers","The server was not found or was not accessible.")
$global:ErrArray += ,@("BOSWEB02","GetDatabases","Database Status = Shutdown")
$global:ErrArray += ,@("SATURN","GetDatabases","Database Status = Shutdown")
$global:ErrArray += ,@("BOSWEB02","GetSystemInfo","Access is denied" )

Function DisplayErrors
{
    Write-Host "`nBefore:-`n"

    foreach ( $server in $global:Errarray)
    {
    write-host $server 
    }

    $sorted = $global:ErrArray | Sort-Object @{Expression={$_[0]}}

    Write-Host "`nAfter:-`n"    

   foreach ( $server in $sorted)
    {
        write-host $server    
    }
}  

DisplayErrors 
```

或者更像你的代码：

```
$global:ErrArray += ,@("SV000004","ProcessServers","The server was not found or was not accessible.")
$global:ErrArray += ,@("BOSWEB02","GetDatabases","Database Status = Shutdown")
$global:ErrArray += ,@("SATURN","GetDatabases","Database Status = Shutdown")
$global:ErrArray += ,@("BOSWEB02","GetSystemInfo","Access is denied" )

Function DisplayErrors
{
    Write-Host "`nBefore:-`n"

for ( $iLoop=0; $iLoop -lt $global:errarray.count; $iLoop++)
{
    "{0,-14}  {1,-18}  {2,-80}" -f   $global:ErrArray[$iLoop][0], $global:ErrArray[$iLoop][1], $global:ErrArray[$iLoop][2]
}

$sorted = $global:ErrArray | Sort-Object @{Expression={$_[0]}}

Write-Host "`nAfter:-`n"    

for ( $iLoop=0; $iLoop -lt $sorted.count; $iLoop++)
    {
        "{0,-14}  {1,-18}  {2,-80}" -f   $Sorted[$iLoop][0], $Sorted[$iLoop][1], $Sorted[$iLoop][2]
    }
}  

DisplayErrors 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T17:16:26.603

## 只是代码，女士

警告：[快速排序确实存在](http://rosettacode.org/wiki/Sorting_algorithms/Quicksort#PowerShell)。

我在实现中将 ErrArray 更改为从 0 开始——

> $global:ErrArray[ **0** ,00]= "SV000004"

...但否则插入以下功能，交易线...

`$Sorted = $global:ErrArray | Sort-Object @{Expression={$_[0]}}`

... 为了...

`$Sorted = Order-2dArray $global:ErrArray;`

```
# Naming sorts stinks: http://stackoverflow.com/questions/27173621/
# NOTE: **EVERY** array entry in [0,x] must be non-null if -ColCount not set.
# NOTE: **EVERY** array entry in [y,0] must be non-null. Thanks.
Function Order-2dArray
{
    param
    (
        [Parameter(Position=0,Mandatory=$true,ValueFromPipeline=$true)]
        $ArrayToSort,
        [int]$ColCount = -1,  # I hate multi-dim PS arrays.
        [int]$SortColumn = 0, # Would be a touch faster if this were a constant.
        [switch][alias("desc")]$Descending # Ascend by default.
    )

    $fullCount = $ArrayToSort.Length;
    if ($ColCount -le 0) # if not given, guess by checking for $nulls.
    {
        $ColCount=0;while ($ArrayToSort[0,$ColCount] -ne $null) {
            $ColCount++;
        }
    }

    $RowCount = $fullCount / $ColCount;
    $nullRowCap = $RowCount-1;  # 1-based to 0-based
    while ($ArrayToSort[$nullRowCap,0] -eq $null) { $nullRowCap--; }

    $itemToPlace = $nullRowCap;
    for ($i=0;$i -lt $nullRowCap;$i++)
    {
        for ($j=0;$j -lt $itemToPlace;$j++)
        {
            # This dual-check method for optionally descending is not efficient.
            if (($ArrayToSort[$j,$SortColumn] -gt $ArrayToSort[($j+1),$SortColumn] -and !$Descending) -or
                ($ArrayToSort[$j,$SortColumn] -lt $ArrayToSort[($j+1),$SortColumn] -and $Descending))
            {
                for($k=0;$k -lt $ColCount;$k++) {
                    $hold = $ArrayToSort[$j,$k];
                    $ArrayToSort[$j,$k] = $ArrayToSort[($j+1),$k];
                    $ArrayToSort[($j+1),$k] = $hold;
                }
            }
        }
        $itemToPlace--;
    }
    Write-Host -BackgroundColor Magenta $ArrayToSort.GetType();
    , $ArrayToSort; # see http://stackoverflow.com/questions/7833317/ for comma use
} 
```

* * *

## 原作怎么没了？

[意识到这是一个僵尸问题——]这对于评论来说有点太大了，所以我将创建一个答案来解释为什么你需要使用 @CB 。或@vonPryz 建议。

首先，看最后的评论。OP 的方法在 PowerShell 1.0 中可以正常工作。显然不是现在。

简而言之，您不能再在 PowerShell 中访问“二维数组第一行中的值”。如果要将每个“行”条目分组到一个对象中并将该数组传递**给**`Sort-Object`. 因此，您可以选择**数组数组**，如 CB. 的答案，或**对象****数组`New-Object`**，如 vonPryz - 或任何感觉最好的东西。但它*必须是 X 的数组*，而不是二维数组。

要显示发生了什么，请尝试

`PS> $global:ErrArray[0]`

...在任何时候。你会得到...

```
You cannot index into a 2 dimensional array with index [0].
At line:1 char:1
+ $global:ErrArray[0]
+ ~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [], RuntimeException
    + FullyQualifiedErrorId : NeedMultidimensionalIndex 
```

也就是说，**没有返回三个值的 $global:ErrArray[0] ，**至少不是您想象的那样。数组的第一个维度不会对第二个维度中的三个对象进行分组。**它更像是 1500 个地址，而不是 500 个楼层，每个楼层有 3 个地址。**

* * *

## 好的，那为什么代码没有出错呢？

在您的代码中尝试此操作以确认它不会引发错误的原因：

```
$Sorted = $global:ErrArray | Sort-Object @{
    Expression={
        $_[0];
        Write-Host $_[0];
    }
} 
```

结果可能会让您大吃一惊——它是每个字符串的第一个字符。

```
S
P
T
B
G
D
S
G
D
B
G
A 
```

由于没有“多维数组的单行”的概念，PowerShell 正在将二维数组中的所有条目解包到*字符串的单维数组中*，并且使用`$_[0]`，您将获取字符串中的第一个字符-作为数组。！！（如果你在每个位置都有整数而不是字符串，我相信代码会在这里出错。）

这意味着您不只是对二维数组中任何位置的所有非空值进行排序，您只是按每个值的第一个字母排序！

`$Sorted[$iLoop,0]`之所以有效，是因为（我同意这非常违反直觉）PowerShell 为您提供了现在单维数组中的`$iLoop`-th 和-th 值。它认为您正在为新的扁平数组传递两个索引，并且返回的值是一个包含这两个值的数组。`0``$Sorted`

试试这两行来代替你的`-f`：

```
"{0} {1}" -f $Sorted[$iLoop,0]
"{0} {1}" -f $Sorted[$iLoop,0], $Sorted[$iLoop,1], $Sorted[$iLoop,2] 
```

第一个“有效”——它为您提供了for的`$iLoop`第 th 值和第 0 的 for，因为您实际上传入了两个字符串。它们可能已作为数组传入，但 PowerShell “有用地”将其解压缩为两个字符串。完美，有点。`$Sorted``{0}``{1}`

第二行回到`System.Object[]`您所看到的，因为它是...一个由三个数组组成的数组（因为它认为您正在使用数组逗号表示法：）`X,Y,Z`，每个数组的长度为 2（来自两个索引它认为它从`$iLoop, 0`等）。在这种情况下，数组中的前两个元素被推入`{0}`and `{1}`，`ToString()`隐式调用并成为`System.Object[]`。

当我们有类似的东西时，让我们确认它正在返回数组`$Sorted[$iLoop,0]`。在这里，我使用 PowerGUI 并在排序后放入断点以进行调试：

```
[DBG]: PS> $t2 = $Sorted[$iLoop,0], $Sorted[$iLoop,1], $Sorted[$iLoop,2]
[DBG]: PS> $t2.Length
3
[DBG]: PS> $t2[0]
BOSWEB02
BOSWEB02
[DBG]: PS> $t2[0][0]
BOSWEB02 
```

因此，您要`Object[]`在格式调用中发送三个带有两个字符串的数组。调用`ToString()`an`Object[]`会给你带来讨厌的 System.Object[]。

如果您想按每个第一维的第二维的第 0 个元素中的内容对二维数组进行排序 [原文如此，我认为]，您可能必须将其写出旧式、Bubble 或 Quicksort 或你有什么，就像我在这个答案的第一部分所做的那样。（如果可以的话，最好使用 CB. 的建议。）

所以这一切都说得通。对于 PowerShell，您有 1500 个地址，但没有按它们的 " `x`" 值对它们进行真正的分组。别担心，这对我来说也没有立即意义（因此我在这个问题上磕磕绊绊）。

**编辑：**只是为了让事情更有趣，看起来数组在 PowerShell v1.0 中确实像您期望的*那样工作：* [http](http://arstechnica.com/civis/viewtopic.php?t=52603) ://arstechnica.com/civis/viewtopic.php?t=52603但看看脚本专家是如何[做数组](http://blogs.technet.com/b/heyscriptingguy/archive/2011/12/09/easily-create-and-manipulate-an-array-of-arrays-in-powershell.aspx)的2011 年[的多维数组。](http://blogs.technet.com/b/heyscriptingguy/archive/2011/12/09/easily-create-and-manipulate-an-array-of-arrays-in-powershell.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:56:02.213

虽然我不知道为什么 Powershell 搞砸了阵列，但我可能有更多的 Powershellish 解决方法。让我们创建一个包含数据和这些数据的一维数组的自定义对象。排序很简单。

```
# Custom error object
function CreateErrorObject {
    param ([string]$server, [string]$proc, [string]$message)
    $objError = New-Object System.Object
    $objError | Add-Member -type NoteProperty -name Server -value $server
    $objError | Add-Member -type NoteProperty -name Proc -value $proc
    $objError | Add-Member -type NoteProperty -name Message -value $message
    $objError
}

$errors = @() # Empty array

# Populate error objects some way
$errors += CreateErrorObject "SV000004" "ProcessServers" "The server was not found or was not accessible"
$errors += CreateErrorObject "BOSWEB02" "GetDatabases" "Database Status = Shutdown"
$errors += CreateErrorObject "SATURN" "GetDatabases" "Database Status = Shutdown"
$errors += CreateErrorObject "BOSWEB02" "GetSystemInfo" "Access is denied"

$errors # Unsorted list
$errors | sort -Property server # sort by server property
$errors | sort -Property proc # sort by proc property
$errors | sort -Property message # sort by message property 
```

# printing - Ghostscript 打印 PDF dPDFFitPage 尺寸不正确

> ID：11204654
> 
> 赞同：1
> 
> 时间：2012-06-26T09:45:36.430
> 
> 标签：printing, ghostscript

使用 GhostScript (V9.05) 打印不同大小的 PDF 时遇到问题。

有问题的 PDF 是 A3 横向，但是当使用以下命令行参数使用 ghost 脚本打印时，结果会以 A4 纵向打印并截断一半的内容。

命令行参数：

"-sDEVICE=mswinpr2 -dPDFFitPage -dPrinted=false -dNoCancel -dBATCH -dNOPAUSE -sOutputFile="\spool\HP LaserJet P2050 系列 PCL6 (A4)" "C:\Users\dmeggs\AppData\Local\Temp\iPlan_Printing_k4gjaoip.pdf “”

我尝试了许多参数组合，大多数似乎都没有效果。理想情况下，我希望打印机根据 PDF 属性打印 PDF，因为这将用于打印 A4、A3、纵向和横向文档。

谢谢丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:51:08.540

我假设打印机是A4打印机？为了让 GS 正确缩放页面，您需要告诉它页面大小是多少。它无法从打印机名称中分辨出来。尝试设置 -sPAPERSIZE=a4 -dFIXEDMEDIA

这将媒体设置为 A4，并告诉 GS 它不能更改，然后 -dPDFFITPAGE 开关将通过缩放使 PDF 媒体请求适合声明的媒体。

如果这不起作用，那么我需要查看您的 PDF 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T07:13:30.570

添加为新答案，因为它太大而无法发表评论。

如果 pswrite 和 epswrite 的输出有效，则打印机是 PostScript 打印机。

Pdfwrite 生成 PDF 文件，所以假设您不想这样做，因为输入是 PDF 文件 :-) 有些 PostScript 打印机实际上也可以打印 PDF 文件，但这比较不寻常。

而不是使用 psweite（或 epswrite），我建议您使用 ps2write（它将生成 PostScript 语言级别 2 作为输出）并将生成的文件发送到打印机。

在理想情况下，您的打印机将根据 PostScript 程序中的介质请求进行介质选择），但并非所有打印机都管理此操作。部分原因是如果有多种介质可用，打印机并不总是知道哪个介质在哪个纸盘中。

但是，您可以编写相当简单的 PostScript 代码，您可以将其添加到文件中，这样您就可以确定请求的页面大小。假设您知道如何控制打印机中的纸盘/介质选择，您可以让 PostScritp 程序为您执行此操作。

不幸的是，我无法为您提供有关如何执行此操作的详细信息，因为这在很大程度上取决于特定的打印机。

# asp.net-mvc-3 - 如何使用 ToShortDateString 和 DatePicker 更改 DateTime 格式

> ID：11204657
> 
> 赞同：0
> 
> 时间：2012-06-26T09:45:41.487
> 
> 标签：asp.net-mvc-3, razor

我有以下领域：

```
@Html.TextBoxFor(model => model.Patient.dateOfBirth, new { id = "datepicker", @class = "double text white" }) 
```

它是具有以下元数据定义的 DateTime 字段：

```
 [Required(ErrorMessage = "Date Of Birth is required")]
 [DisplayFormat(DataFormatString = "{0:dd MMM yyyy}")]
 public DateTime dateOfBirth; 
```

问题是我需要它将 DOB 显示为 d/m/y，但作为日期时间原因，我使用的日期选择器需要保持 DateTime 的值。

日期选择器返回具有 dd/mm/yy 格式的值。（.ToShortDateString() 这次救不了我了）

我已经从[这里](https://stackoverflow.com/questions/3734829/datetime-field-and-html-textboxfor-helper-how-to-use-it-correctly)和[这里](https://stackoverflow.com/questions/4679352/converting-datetime-format-using-razor)尝试了 Darin Dimitrov 的答案，但除非我是一个彻头彻尾的白痴，否则这些对我来说并不适用。

* * *

**稍后编辑：**
我已经设法找到了解决方案，并希望从现在起与任何需要它的人分享。

```
 @Html.HiddenFor(model => model.DOBirth, new { id = "shortDate", @class = "double text white" })

 @Html.TextBox(" ", Model != null ? Model.dateOfBirth.Value.ToShortDateString() : string.Empty, new { id = "datepicker", @class = "double text white" }) 
```

并使用以下 Jquery ：

```
 $('#datepicker').datepicker({
            changeMonth: true,
            changeYear: true,
            inline: true,
            onSelect: function (dateText, inst) { CalculateAge(dateText); } //an extra method
        }); 
```

将您获得的值存储到隐藏字段中（通过 Jquery 通过隐藏字段“shortDate”的 id），因此您可以将值发送回控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:49:09.743

> 我已经从这里和这里尝试了 Darin Dimitrov 的答案，但除非我是一个彻头彻尾的白痴，否则这些对我来说并不适用。

那是因为您忘记添加`ApplyFormatInEditMode = true`属性`[DisplayFormat]`：

```
[Required(ErrorMessage = "Date Of Birth is required")]
[DisplayFormat(DataFormatString = "{0:dd MMM yyyy}", ApplyFormatInEditMode = true)]
public DateTime dateOfBirth; 
```

接着：

```
@Html.EditorFor(model => model.Patient.dateOfBirth) 
```

* * *

另一种可能性是为日期选择器编写自定义编辑器模板：

```
[Required(ErrorMessage = "Date Of Birth is required")]
[DisplayFormat(DataFormatString = "{0:dd MMM yyyy}", ApplyFormatInEditMode = true)]
[UIHint("DatePicker")]
public DateTime dateOfBirth; 
```

和里面`~/Views/Shared/EditorTemplates/DatePicker.cshtml`：

```
@Html.TextBox(
    "", 
    ViewData.TemplateInfo.FormattedModelValue, 
    new { @class = "double text white datepicker" }
) 
```

在你的视野内：

```
@Html.EditorFor(model => model.Patient.dateOfBirth) 
```

`datepicker`请注意，如果您有多个 DateTime 字段，我已经应用了该类而不是使用 id 来避免冲突。您将需要相应地调整您的选择器：`$('.datepicker').datepicker();`而不是`$('#datepicker').datepicker();`您当前使用的选择器。

# ruby-on-rails - 从 Rails 3 中的实例变量访问值

> ID：11204659
> 
> 赞同：0
> 
> 时间：2012-06-26T09:45:45.643
> 
> 标签：ruby-on-rails

我想从我的实例变量中访问标题......

看法

```
<table width="100%" >
    <tr>
        <td width="30%" align="center">
            <%= form_for :post ,:controller => "post", :action => "search" do |f| %>
            <%= f.label(:q, "Search for:") %>
            <%= f.text_field(:title) %>
            <%= f.submit("Search") %>
            <% end %>
        </td>
</tr>
</table> 
```

控制器

```
def create
  @ptitle=params[:post]
  title=@ptitle.title
  session[:aaa]=title
end 
```

当我试图访问会话的内容时，我得到了这样的结果：{“title”=>“how to install windows?”}

我的输入值是：如何安装 Windows？

如何从控制器访问我的输入值例如：如何安装 Windows？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:20:51.403

实际上，您在这里不需要实例变量。

尝试

```
def create
 title=params[:post][:title]
 session[:aaa]=title
end 
```

# c# - 将 C# 字节转换为 BitArray

> ID：11204666
> 
> 赞同：16
> 
> 时间：2012-06-26T09:46:11.460
> 
> 标签：c#, byte, bitarray

是否有任何预定义的函数可用于将 a 转换`byte`为`BitArray`？

一种方法是检查`byte`值的每一位，然后执行**按位**运算。我想知道是否有比这更直接的方法。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-26T09:48:58.793

[是的，使用此处](https://stackoverflow.com/questions/2548018/convert-byte-array-to-bit-array)描述的适当[`BitArray()`构造函数](http://msdn.microsoft.com/en-us/library/system.collections.bitarray(v=vs.100).aspx)：

```
var bits = new BitArray(arrayOfBytes); 
```

您可以调用它`new BitArray(new byte[] { yourBite })`来创建一个字节的数组。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T16:51:36.273

如果你有一个字节数甚至一个整数等。

```
BitArray myBA = new BitArray(BitConverter.GetBytes(myNumber).ToArray()); 
```

注意：您需要参考 System.Linq

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-13T13:16:47.143

解决方案很简单，只需两条指令（在以下代码中标记），只需使用 将字节转换为二进制`Convert.ToString(btindx,2)`，将结果字符串零填充为 8 位（或长度为 8），`strBin.PadLeft(8,'0');`然后连接所有二进制字符串以形成字节的位流数组，如果你喜欢，你也可以组成一个字符串数组来分隔每个字节的二进制表示。

```
 byte[] bt = new byte[2] {1,2};

    string strBin =string.Empty;
    byte btindx = 0;
    string strAllbin = string.Empty;

    for (int i = 0; i < bt.Length; i++)
    {
        btindx = bt[i];

        strBin = Convert.ToString(btindx,2); // Convert from Byte to Bin
        strBin = strBin.PadLeft(8,'0');  // Zero Pad

        strAllbin += strBin;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-21T20:08:15.663

如果有`BitArray`问题的长度不是字节中位数的倍数，`(8)`您可以执行以下操作以确保在从 转换为 时正确的`byte[]`位数`BitArray`：

```
public static byte[] ToByteArray (this BitArray bits) {
    byte[] ret = new byte[(bits.Length - 1) / 8 + 1];
    bits.CopyTo (ret, 0);
    return ret;
}

public static BitArray ToBitArray (this byte[] bytes, int bitCount) {
    BitArray ba = new BitArray (bitCount);
    for (int i = 0; i < bitCount; ++i) {
        ba.Set (i, ((bytes[i / 8] >> (i % 8)) & 0x01) > 0);
    }
    return ba;
} 
```

# c# - 当我启动项目时，我在 WCF 中遇到内部服务器错误

> ID：11204673
> 
> 赞同：1
> 
> 时间：2012-06-26T09:46:35.040
> 
> 标签：c#, asp.net-mvc-3, wcf, rest, web-config

当我启动 asp.net mvc 项目时出现错误。内部服务器错误。我在 IIS express 上托管 asp.net mvc 和 wcf 应用程序。

```
 <services>
      <service name="WCFSkyAuction.Service.UserRoleService">
        <endpoint address="" behaviorConfiguration="WCFSkyAuction.Service.UserRoleServiceAspNetAjaxBehavior"
          binding="webHttpBinding" name="UserService" contract="WCFSkyAuction.Service.UserRoleService" />
      </service>
      <service name="WCFSkyAuction.Service.AdminRoleService">
        <endpoint address="" behaviorConfiguration="WCFSkyAuction.Service.AdminRoleServiceAspNetAjaxBehavior"
          binding="webHttpBinding" name="AdminService" contract="WCFSkyAuction.Service.AdminRoleService" />
      </service>
      <service name="WCFSkyAuction.Service.VipRoleService">
        <endpoint address="" behaviorConfiguration="WCFSkyAuction.Service.VipRoleServiceAspNetAjaxBehavior"
          binding="webHttpBinding" contract="WCFSkyAuction.Service.VipRoleService"/>
      </service>
      <service name="WCFSkyAuction.Service.MailService">
        <endpoint address="" behaviorConfiguration="WCFSkyAuction.Service.MailServiceAspNetAjaxBehavior"
          binding="webHttpBinding" contract="WCFSkyAuction.Service.MailService" />
      </service>
    </services>

 <endpointBehaviors>
        <behavior name="WCFSkyAuction.Service.UserRoleServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
        <behavior name="WCFSkyAuction.Service.AdminRoleServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
        <behavior name="WCFSkyAuction.Service.VipRoleServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
        <behavior name="WCFSkyAuction.Service.MailServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
      </endpointBehaviors> 
```

这是我在 WCF 端的配置文件，每个端点都有 webHttp 绑定和 4 个 svc 文件上的合同。所有方法在 svc 文件中都有正确设置，带有 operationcontract，有一个参数。我已经检查了服务很酷。

```
<system.serviceModel>
    <client>
      <endpoint address="http://localhost:8080/WCFSkyAuction/Service/UserRoleService.svc"
        binding="webHttpBinding" bindingConfiguration="" behaviorConfiguration="webhttp" contract="UserService.UserRoleService"
        name="UserService" />
      <endpoint address="http://localhost:8080/WCFSkyAuction/Service/AdminRoleService.svc" 
                binding="webHttpBinding" behaviorConfiguration="webhttp" contract="AdminService.AdminRoleService"
        name="AdminService" />
    </client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="webhttp">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel> 
```

那是 asp.net mvc 端的 web.config。我已经通过编辑 WCF 文件编写了客户端端点和行为。添加服务参考效果很好，我添加了所有参考。当我使用第一个服务操作启动项目时，我得到了内部服务器错误。通信异常由用户代码处理。谢谢。我该如何决定呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:22:47.247

您必须将`<webHttp />`标签写入服务器配置中的行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:52:39.423

这表明您的 c# 代码引发了异常。尝试将您的代码放入 try catch 并记录异常。

# c# - 显示来自数据库的图像

> ID：11204678
> 
> 赞同：0
> 
> 时间：2012-06-26T09:46:57.513
> 
> 标签：c#, .net, asp.net-mvc-3, razor

对不起这个问题。有很多信息，但不幸的是我还没有找到答案。请你帮助我好吗？我有一个主视图

详情查看：

```
@model Shops.ShopModel
......
@Html.Partial("_PictureViewer", Model.Picures)
...... 
```

在主视图中包括 PartialView

_PictureViewer 视图：

```
@model List<Model.PictureOriginalModel>
.....
@foreach (var p in Model)
{ 
  <img src='@new File(@p.Trunk, "image/jpeg");' alt='' />
}
..... 
```

PictureOriginalModel.cs: 命名空间模型 {

```
 public class PictureOriginalModel
 {
    [DataType(DataType.Text)]
    [Display(Name = "File Name.")]
    public string FileName { get; set; }

    [Display(Name = "Trunk.")]
    public Image Trunk { get; set; }

    [DataType(DataType.Text)]
    [Display(Name = "Description.")]
    public string Description { get; set; }
  }
} 
```

结果我有一个错误：错误CS1031：预期类型您能否说明如何正确显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:54:01.420

您可以执行以下操作，

```
public FileContentResult GetImage(...) 
{
  //do somethings
   return File(image, mimeType);
}

<img src="<%= Url.Action("GetImage", "PictureOriginalModel", new { Id = someId}) %>" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:58:50.207

您需要为返回图像类型响应创建操作

控制器代码

```
public class HomeController
{
    public ActionResult Image( int id )
    {
        var imageData = getImagebyte(); // your function to return image byte

        return File(imageData, "image/jpg");
    }
} 
```

在你看来这个行动的呼吁

```
<img src='@Url.Action("Image","Home", new { id = 1 })' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:51:46.763

您需要创建返回图像的控制器操作，例如：

```
[HttpGet]
public ActionResult GetImage(long id, ...) 
{
  ...
   return File(fileBytes, "image/png");
} 
```

在客户端代码中，只需设置正确的链接到您的控制器 GetImage 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T09:56:33.073

```
[HttpGet]
public FileResult GetImage(int evaluatorId, int employeeId)
{
    byte[] imgByteArr = this._employeeManager.GetEmployeePhoto(employeeId);
    return imgByteArr != null ? File(imgByteArr, "image/png") : null;
} 
```

# extjs4.1 - Ext JS 将额外的参数传递给处理程序

> ID：11204680
> 
> 赞同：1
> 
> 时间：2012-06-26T09:47:02.537
> 
> 标签：extjs4.1

我想将额外的参数传递给消息框的处理函数。

我创建了一个这样的上下文菜单：

```
 onEventContextMenu: function (s, rec, e) {
    e.stopEvent();

    if (!s.ctx) {
        s.ctx = new Ext.menu.Menu({
            items: [{
                text: 'Delete event',
                iconCls: 'icon-delete',
                scope: this,
                handler : function() {
                Ext.MessageBox.show({
                                title : 'Reason',
                                msg : 'place reason:',
                                width : 300,
                                buttons : Ext.MessageBox.OKCANCEL,
                                multiline : true,
                                fn : this.showResultText(buttonId, text, rec)
                            });
                }
            }]
        });
    }
    s.ctx.rec = rec;
    s.ctx.showAt(e.getXY());
},

showResultText : function (btn, text, record){
alert(btn);
    if (btn == 'cancel') {
        alert(text + ' cancel');
    }
    if (btn == 'ok') {
        alert(record.get('Name'));
    }
}, 
```

因此，当用户单击删除事件时，他可以输入他这样做的原因。在他按下确定或取消后，我打电话给处理程序。我可以在那里访问按钮和文本，但我需要传递额外的参数。

阅读 Sencha 文档我发现了这个：

> fn : 函数
> 
> 一个回调函数，当通过单击配置的按钮或对话框关闭按钮或按返回按钮输入输入来关闭对话框时调用该回调函数。
> 
> 进度和等待对话框将忽略此选项，因为它们不响应用户操作并且只能以编程方式关闭，因此任何必需的函数都应在关闭对话框后由相同的代码调用。传递的参数：
> 
> 参数
> 
> -buttonId : String 按下按钮的ID，其中之一：ok yes no cancel
> 
> -text : 如果提示或多行为真，则输入字段的字符串值
> 
> -opt : Object 传递给 show 的配置对象。

但是我仍然无法正常工作:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T17:12:36.207

我通常采取的方法是通过`scope`参数传递额外的数据：

```
Ext.MessageBox.show({
   ...
   scope: {
      obj: this,
      record: rec
   },
   fn: function(buttonId, text, option) {
      // Access properties specified in the 'scope' parameter via 'this'
      var obj = this.obj,
          record = this.record;

      obj.showResultText(buttonId, text, record);
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T19:56:14.903

找到这个[Ext.Function](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Function)

```
Ext.MessageBox.show({
    title: 'Reason',
    msg: 'place reason:',
    width: 300,
    buttons: Ext.MessageBox.OKCANCEL,
    multiline: true,
    fn: Ext.Function.bind(this.showResultText, this, rec, true)
}); 
```

然后你的 showResultText 方法将如下所示：

```
showResultText : function (btn, text, eventOptions, record){
    alert(btn);
    if (btn == 'cancel') {
        alert(text + ' cancel');
    }
    if (btn == 'ok') {
        alert(record.get('Name'));
    }
}, 
```

# html - GWT HTMLPanel + 文本换行

> ID：11204683
> 
> 赞同：0
> 
> 时间：2012-06-26T09:47:05.383
> 
> 标签：html, gwt, css-float, word-wrap

我正在尝试创建一个包含文本的 HTMLPanel，它还有另一个浮动到右侧的 HTML 小部件。我想将主要文本内容环绕在浮动 HTML 周围。

问题是，我希望能够即时更改正文内容。目前我有这个：

```
<g:HTMLPanel>
    <g:InlineHTML ui:field="descriptionHTML"/>
    <g:HTML ui:field="overviewHTML" styleName='{style.overview}'/>
</g:HTMLPanel> 
```

但是，GWT 将 InlineHTML 内容放在 a`<span>`中，它不会环绕浮动 HTML。

因此，我希望能够根据需要更改`descriptionHTML`and的内容`overviewHTML`，其中一个环绕另一个。我假设我需要更改`descriptionHTML`为 InlineHTML 对象以外的其他对象，但我不确定还可以使用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:44:04.450

您应该使用标准的 HTML 小部件而不是 InlineHTML 小部件。

然后，使用 css 和 float 属性。

# extjs - TreePanel 单元格中的 ExtJS 多行数据

> ID：11204685
> 
> 赞同：2
> 
> 时间：2012-06-26T09:47:21.023
> 
> 标签：extjs, multiline, treepanel

有没有办法利用树形面板并在单元格中显示多行数据？我正在使用列的渲染器来格式化`<table>`元素（2-3 行）中的数据并将其显示在单元格中。

最好的问候 kkris1983

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:54:05.047

所以就这样做

```
.x-grid-cell-inner {
    height: auto !important;
    white-space: normal !important;
} 
```

它将在嵌入式表上完美运行。

# java - 是否可以在不将其部署在 Tomcat/JBoss 等服务器上的情况下托管 Java Web 服务？

> ID：11204688
> 
> 赞同：4
> 
> 时间：2012-06-26T09:47:26.243
> 
> 标签：java, web-services

据我所知，需要 Apache Tomcat 或 JBoss 之类的应用服务器来部署和运行用 java 实现的 Web 服务。

我的经理问我，在不配置或设置 Apache Tomcat/JBoss 的情况下部署 Web 服务是否有任何替代方案。

我基本上是一名 QA 工程师，并且有一些 Java 编程经验。

我们正在尝试开发/实现一个基于 Java 的 Web 服务，用于负载生成 SMTP 消息，可以由使用不同技术（QTP、Perl 等）开发的测试脚本调用。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:51:26.857

是的，您可以使用[`@WebService`](http://docs.oracle.com/javase/6/docs/api/javax/jws/WebService.html)注释在 JDK 之外运行 Web 服务。它甚至支持 SOAP。

简单的例子（取自[这里](http://www.theserverside.de/webservice-in-java/)，用德语）：

服务：

```
@WebService
@SOAPBinding(style=Style.RPC)
public class Calculator {
  public long addValues(int val1, int val2) {
    return val1 + val2;
  }
} 
```

初始化代码：

```
public class CalculatorServer {
  public static void main (String args[]) {
    Calculator server = new Calculator();
    Endpoint endpoint =
        Endpoint.publish("http://localhost:8080/calculator", server);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:59:52.513

用 java 构建的 Web 服务基本上是一个具有不同数据表示行为的 Java 应用程序。你可以，然后你必须让它们在消费者调用服务时运行。这就是我们以白盒方式测试它们的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T09:54:13.830

我希望我们可以，如果我们使用[BINDING](http://www.w3.org/TR/2002/WD-ws-gloss-20021114/#general)协议作为 SMTP 或 CORBA 而不是 HTTP。

Link ：Web 服务的协议[栈](http://en.wikipedia.org/wiki/Web_services_protocol_stack)。

# sql-server-2008-r2 - 用于 mdf 文件的 SQL Server 2008 R2 监视文件夹

> ID：11204693
> 
> 赞同：0
> 
> 时间：2012-06-26T09:47:45.907
> 
> 标签：sql-server-2008-r2

是否可以让 SQL Server 监视文件夹中的`.mdf`文件并自动附加新`.mdf`文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:57:06.353

不可以，但可以编写一个应用程序来做到这一点，请参阅[获取目录更改通知](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261%28v=vs.85%29.aspx)。请注意，您始终需要 MDF**和**LDF。此外，附加不受信任的数据库存在严重的安全考虑，以及数据库文件的就地更新问题（例如，SQL Server 2008 数据库的删除将自动*且不可逆地*升级到 SQL Server 2008 R2）。

# javascript - Javascript：获取最高可能的 UTF8 字符

> ID：11204694
> 
> 赞同：1
> 
> 时间：2012-06-26T09:47:47.693
> 
> 标签：javascript, utf-8

我需要为前缀搜索获取尽可能高的 UTF8 字符。

我有一个这样的数据集：

```
A
Ba
Bf
C 
```

现在我可以通过指定开始值和结束值来进行前缀搜索：

```
Start: B
End: B* where * should be the highest possible UTF8 character. 
```

如何使用 Javascript 以编程方式获取此信息？

编辑：这是一个更好的例子：

我需要将此前缀发送到 JSON RPC API。所以我无法在 JS 中进行实际比较。

但是，如果我想同时处理以 B 开头的两个字符串，我会发送

```
Start: B 
End: B? 
```

在哪里 ？是最大可能的 UTF8 字符。

如果是 ASCII，我可以这样做`"B" + String.fromCharCode(255)`，但这仅适用于 ASCII。我的字符串是 UTF8 格式，在这种情况下，它不会匹配以 B 开头的所有可能的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:56:14.650

根据您的代码，您可能不需要实际的最高 UTF8 代码点。

```
if ((input >= 'B') && (input < 'C')) { ... } 
```

可以为您解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-11T18:36:16.740

```
const maximumCodePoint = String.fromCodePoint(0x10ffff)

> String.fromCodePoint(0x10ffff + 1)
RangeError: Invalid code point 1114112 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:03:51.423

您可以使用[`>`比较运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)在 JavaScript 中对字符串开头进行 UTF 代码点比较。所以你可以使用

```
search >= "B" && search < "C" 
```

, 但一个简单的

```
search.test(/^B.*/) 
```

或者

```
search.charAt(0) == "B" 
```

也应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:17:25.077

在我看来你想要：

```
var datas = [
    'A',
    'Bf',
    'Ba',
    'C'
];

// Create an array with char codes prefixed with "B" but it returns
// for the second string. For example, for B*, it returns the char code of *.
var datasB = datas.map( function( data ) {
    if ( data.charAt( 0 ) === 'B' ) {
        return data.substr( 1 ).charCodeAt( 0 );
    }
} ).filter( Boolean );
// The `filter( Boolean )` removes the falsy values (undefined)

// This technique is very efficient to get the maximum value of an array
var max = Math.max.apply( Math, datasB ); 
```

[John Resig](http://ejohn.org/blog/fast-javascript-maxmin/)对获取数组最大值的技术的启发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T23:38:04.460

如果你想创建一个范围，你可以使用`\uffff`.

```
MyRange("foo", "foo\uffff") 
```

将找到以 . 开头的所有内容`foo`。

# iphone - 带有星号的滑块，用于在 ios 中提交反馈

> ID：11204699
> 
> 赞同：0
> 
> 时间：2012-06-26T09:48:20.563
> 
> 标签：iphone, objective-c, ios5, xcode4.3

我想创建一个带有星号的滑块来评估类似于 iTunes 的应用程序的整体体验。知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:51:12.150

不要重新发明轮毂。试试这个：[http ://cocoacontrols.com/platforms/ios/controls/ratestars](http://cocoacontrols.com/platforms/ios/controls/ratestars)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:54:10.423

创建一个从 0 星到最大星数的普通滑块。还创建一个图像视图。当滑块更改值时，加载该值并将与该评级对应的图像分配给图像视图。

只是一个想法..

# database - 在同一局域网中通过 JDBC 连接到 Postgres 服务器时出现 PSQLException（PGAdmin 工作）

> ID：11204702
> 
> 赞同：1
> 
> 时间：2012-06-26T09:48:27.430
> 
> 标签：database, postgresql, jdbc, dbvisualizer

从 DBVisualizer (8.0.9) 连接到在同一 LAN 中运行的 PostgreSQL 服务器时，我遇到了一些严重问题。DBVis 基于 Java，因此使用 JDBC 进行连接。从 PGAdmin 连接就像一个魅力 - 只有通过 JDBC 的 DBVis 连接不是。我需要解决这个问题！

```
Specs:
My PC: Ubuntu 12.04 LTS (64Bit), IP: 192.168.110.193
Server OS: Suse LINUX Enterprise Server 11, IP: 192.168.110.12
Postgresql server version: 9.1
Java VM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.6.0_33
Java Vendor: Sun Microsystems Inc.
OS Name: Linux
OS Arch: amd64
OS Version: 3.2.0-25-generic 
```

开始连接时，我收到“正在连接...”消息，等待约 5 分钟后，**连接窗口**中出现以下错误消息：

```
"An error occurred while establishing the connection:
Long Message:
The connection attempt failed.
Details:
Type: org.postgresql.util.PSQLException
SQL State: 08001" 
```

在**调试控制台**中，我得到：

```
12:04:57 [DEBUG pool-2-thread-8 D.ā] RootConnection: Driver.acceptsURL("jdbc:postgresql://192.168.110.12:5432/MYDATABASE")
12:04:57 [DEBUG pool-2-thread-8 D.ā] RootConnection: Driver.connect("jdbc:postgresql://192.168.110.12:5432/MYDATABASE", {user=******, password=******})
12:24:58 [DEBUG pool-2-thread-8 D.ā] RootConnection: EXCEPTION -> org.postgresql.util.PSQLException: The connection attempt failed. 
```

还提供了**JDBC驱动**的调试信息：

```
org.postgresql.util.PSQLException: The connection attempt failed.
at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:150)
at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:66)
at org.postgresql.jdbc2.AbstractJdbc2Connection.(AbstractJdbc2Connection.java:125)
at org.postgresql.jdbc3.AbstractJdbc3Connection.(AbstractJdbc3Connection.java:30)
at org.postgresql.jdbc3g.AbstractJdbc3gConnection.(AbstractJdbc3gConnection.java:22)
at org.postgresql.jdbc4.AbstractJdbc4Connection.(AbstractJdbc4Connection.java:30)
at org.postgresql.jdbc4.Jdbc4Connection.(Jdbc4Connection.java:24)
at org.postgresql.Driver.makeConnection(Driver.java:393)
at org.postgresql.Driver.connect(Driver.java:267)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.onseven.dbvis.d.B.D.ā(Z:1548)
at com.onseven.dbvis.d.B.F$A.call(Z:278)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:679) 
```

**为方便起见，服务器pg_hba.conf**的相关部分：

```
#"local" is for Unix domain socket connections only
local all all peer

#IPv4 local connections:
host all all 192.168.110.0/24 md5

#IPv6 local connections:
host all all ::1/128 md5 
```

**以及postgresql.conf**的相关部分：

```
# - Connection Settings -

listen_addresses = '*'                  # what IP address(es) to listen on;
                                        # comma-separated list of addresses;
                                        # defaults to 'localhost', '*' = all
                                        # (change requires restart)
#port = 5432                            # (change requires restart)
max_connections = 100                   # (change requires restart)
# Note:  Increasing max_connections costs ~400 bytes of shared memory per
# connection slot, plus lock space (see max_locks_per_transaction).
#superuser_reserved_connections = 3     # (change requires restart)
#unix_socket_directory = ''             # (change requires restart)
#unix_socket_group = ''                 # (change requires restart)
#unix_socket_permissions = 0777         # begin with 0 to use octal notation
                                        # (change requires restart)
#bonjour = off                          # advertise server via Bonjour
                                        # (change requires restart)
#bonjour_name = ''                      # defaults to the computer name
                                        # (change requires restart)

# - Security and Authentication -

#authentication_timeout = 1min          # 1s-600s
#ssl = off                              # (change requires restart)
#ssl_ciphers = 'ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH'      # allowed SSL ciphers
                                        # (change requires restart)
#ssl_renegotiation_limit = 512MB        # amount of data between renegotiations
#password_encryption = on
#db_user_namespace = off

# Kerberos and GSSAPI
#krb_server_keyfile = ''
#krb_srvname = 'postgres'               # (Kerberos only)
#krb_caseins_users = off

# - TCP Keepalives -
# see "man 7 tcp" for details

#tcp_keepalives_idle = 0                # TCP_KEEPIDLE, in seconds;
                                        # 0 selects the system default
#tcp_keepalives_interval = 0            # TCP_KEEPINTVL, in seconds;
                                        # 0 selects the system default
#tcp_keepalives_count = 0               # TCP_KEEPCNT;
                                        # 0 selects the system default 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:08:44.050

连接现在正在运行，但不幸的是我无法准确说出导致解决方案的步骤。无论如何，我将尝试绘制它们：

我安装了旧版本的 DBVisualizer (7.1.5) 并且能够成功地建立到数据库服务器的连接。然后我直接回到8.0.9版本的DBVis，再次测试连接。出乎意料的是，即使我没有更改配置，连接也可以在这里工作——无论是在我的 DBVis 8.0.9 安装中还是在数据库服务器上。就是这样。也许有人对这个问题有更多的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-21T19:39:12.313

错误代码 08001 是一个通用错误代码，表明 JDBC 驱动程序无法连接到数据库。造成这种情况的原因可能很多。

您应该输入作为数据库服务器运行数据库的服务器的 IP 地址或 DNS 名称，以及它侦听 TCP/IP 连接的数据库端口，默认为 5432。

输入后，请使用 Ping Server 按钮查看是否可以访问该服务器和端口。如果您收到错误消息，您输入了错误的数据库服务器或端口值，有防火墙阻止了连接，或者 PostgreSQL 服务器未配置为从您的 PC 访问连接。如果 Ping Server 显示一切正常，但您仍然无法连接，则问题很可能与您指定的用户帐户的登录凭据有关。

# extjs - 来自 json 的 ExtJS GridPanel colModel 渲染器

> ID：11204703
> 
> 赞同：1
> 
> 时间：2012-06-26T09:48:33.497
> 
> 标签：extjs, renderer, gridpanel

我的网格面板在第一次加载时从 json 中读取它的 colmodel。一切都很好，除了渲染器不工作。

从服务器返回的 Json：

```
,"colModel":[
{"header":"Reg. Id","dataIndex":"RegId","sortable":true},
{"header":"Reg. Date","dataIndex":"RegDT","sortable":true,"renderer":"Ext.util.Format.dateRenderer('d-m-Y H:i:s')"}
] 
```

Javascipt 处理 colModel 的加载：

```
 var tempConfig = Store.reader.jsonData.colModel;
    colModel.setConfig(tempConfig,true);
    registrationGrid.reconfigure( registrationStore, colModel ) ; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:46:41.760

Ext.util.Format.dateRenderer('dmY H:i:s') 返回一个函数，但如果你把它放在 "" 中，它将被视为一个字符串（所以没有渲染器）。只需删除“”

```
"renderer":Ext.util.Format.dateRenderer('d-m-Y H:i:s') 
```

# html - 删除按钮文本时未正确设置按钮对齐方式

> ID：11204704
> 
> 赞同：0
> 
> 时间：2012-06-26T09:48:34.303
> 
> 标签：html, css

我的 html 页面中有 8 个按钮。在删除按钮的文本时，对齐方式没有正确设置。

这是我的 html 页面...它有两行，每行 4 个按钮。在以编程方式清除按钮上的文本时，按钮正在移位。

请建议..

```
<div id="div1">
  <button class="buttonEvents" name="1" type="button" onmouseup="buttonInput(event,this)"
  oncontextmenu="event.preventDefault();"></button>
  <button class="buttonEvents" name="2" type="button" onmouseup="buttonInput(event,this)"
  oncontextmenu="event.preventDefault();"></button>
  <button class="buttonEvents" name="3" type="button" onmouseup="buttonInput(event,this)"
  oncontextmenu="event.preventDefault();"></button>
  <button class="buttonEvents" name="4" type="button" onmouseup="buttonInput(event,this)"
  oncontextmenu="event.preventDefault();"></button>
</div>
<div id="div2">
  <button class="buttonEvents" name="5" type="button" onmouseup="buttonInput(event,this)"
  oncontextmenu="event.preventDefault();"></button>
  <button class="buttonEvents" name="6" type="button" onmouseup="buttonInput(event,this)"
  oncontextmenu="event.preventDefault();"></button>
  <button class="buttonEvents" name="7" type="button" onmouseup="buttonInput(event,this)"
  oncontextmenu="event.preventDefault();"></button>
  <button class="buttonEvents" name="8" type="button" onmouseup="buttonInput(event,this)"
  oncontextmenu="event.preventDefault();"></button>
</div> 
```

相应的css在这里：

```
.buttonEvents {
    background-color: #1E5184;

    border-bottom: 0.1em solid # 555;
    border-left: 0.1em solid#CCC;
    border-radius: 10px;
    border-right: 0.1em solid #555; 

    border-top: 0.1em solid # CCC;
    color: #EEE;
    font-size: 1em;
    font-weight: bolder;
    height: 50px;
    margin: 0.2em; 
    -moz-border-radius: 10px; 
    -o-border-radius: 10px;
    padding: 0.2em;
    text-decoration: none;
    -webkit-border-radius: 10px;
    width: 185px;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:00:04.073

添加`vertical-align: top`到您`button`的 s。

`button`s 默认为内联（或`inline-block`）。默认`vertical-align`值为`baseline`。按钮中没有文本会调整基线的位置。

# sql - 用于调查应用工具的 SQL 或 NoSQL

> ID：11204709
> 
> 赞同：0
> 
> 时间：2012-06-26T09:49:06.937
> 
> 标签：sql, mongodb, web, relational-database, nosql

我正在设计一个调查工具，用户可以使用它来构建他们的调查或民意调查等。所以一个基本的调查工具需要允许用户设计问题、上传文件、登录、注册、共享调查、通知和设置调查约束的激活.

我做了一些研究来决定在后端使用哪种数据库，sql 或 nosql。我只有设计关系数据库的经验，所以我无法考虑如果 Mongo DB 或其他一些 Nosql 数据库将满足我的 Web 工具要求。

请给我建议以及如何为我的 Web 工具选择数据库类型的原因。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:10:15.643

如果你有时间学习新技术我建议你选择Nosql数据库。我更喜欢 MongoDB，但你可以选择任何其他的。在调查应用中，每个调查都有不同的字段，使用关系数据库很难处理。无模式数据库将帮助您轻松处理它。

# java - 当我在线程内创建对对象的引用时会发生什么？

> ID：11204710
> 
> 赞同：2
> 
> 时间：2012-06-26T09:49:09.220
> 
> 标签：java, memory-management

我最近开始学习 Java 编程，我们刚刚接触到 Java 线程主题。我想了解的是，假设我有一个`Thread`对象，它`Object cat`在其`run()`方法内部创建一个实例，据我所知（如果我错了，欢迎您纠正我）`cat`应该保留参考变量在堆中（使其对所有“活动”线程可见）。但是，我想了解的是线程的“私有”堆栈上存储了什么样的数据`Object cat`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:55:00.490

不，引用变量不会在堆上..它将在线程的私有堆栈上...

当 run 方法被执行时..创建的对象将是无引用的，从而使自己有资格进行 GC..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:01:23.433

您的 cat 变量将位于线程堆栈上，其可见性将是 run 方法。主线程和您生成的所有线程没有任何公共变量，除非您在线程和 SO var 之间明确共享这些变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:04:45.243

cat 引用（指针）将在线程堆栈中，cat 对象将在堆中。

如果您想了解更多信息，可以查看此链接：

[http://www.javaworld.com/javaworld/jw-06-2012/120618-jw-archive-under-the-hood-threads-and-shared-data.html](http://www.javaworld.com/javaworld/jw-06-2012/120618-jw-archive-under-the-hood-threads-and-shared-data.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:17:55.103

当`run`被执行时，对象将被创建，`heap`但引用变量将位于`Thread`.

# android - 在android中捕获图像时的选择区域

> ID：11204713
> 
> 赞同：1
> 
> 时间：2012-06-26T09:49:12.217
> 
> 标签：android

我想知道是否可以选择要预览的图像区域（高度和宽度）来保存图像。我想要这个用于光学字符识别。就像 Zxing 应用程序中用户可以选择要阅读的区域一样，Zxing 可以实际选择一个部分然后获取详细信息。用户可以通过放大或缩小矩形来选择一个区域并保存该图像。任何代码示例都会有所帮助。

期待你的答复。谢谢。

# java - 使用线程在 Java 中的 BufferedImage 上绘制线条

> ID：11204716
> 
> 赞同：1
> 
> 时间：2012-06-26T09:49:25.110
> 
> 标签：java, multithreading, swing, thread-safety, bufferedimage

我有一个 BufferedImage，它设置为 JLabel，而 JLabel 又是 JPanel 的一部分。单击按钮后，我在 BufferedImage 上绘制了一些线条，随后在面板上进行了更新。早些时候，我是一条一条地画出每条线，这没问题，但对于我的目的来说时间效率很低。为了提高效率，我将 BufferedImage 的坐标分为 4 个部分，并使用线程在每个部分上绘制线条。现在，执行完成后，图像的某些随机部分没有绘制线条。这是为什么？使用 Graphics2D 绘图不是线程安全的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:35:23.507

> 使用 Graphics2D 绘图不是线程安全的吗？

是的，Swing（并在其中绘图）绝对不是线程安全的，您遇到的渲染错误肯定是因为这个。

请参阅以下教程了解更多详细信息： http: [//docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

根据 mKorbel 的评论，请添加 SSCCE 以获得更具体的建议。

# perl - 防止字符删除后的列移位

> ID：11204719
> 
> 赞同：2
> 
> 时间：2012-06-26T09:49:39.797
> 
> 标签：perl, unix, sed, awk

目前我正在使用以下 oneliner 来删除特殊字符：

```
 sed 's/[-$*=+()]//g' 
```

但是有时会出现一列仅包含特殊字符的情况`*`。如果仅包含 ，如何防止列移动`*`？是否可以使用占位符，以便每当出现第二列和/或第四列中的唯一字符时，`*`它都会被替换为`N`for every `*`？

从：

```
6    cc-g*$    10 cc+c
6    c$c$*g$q    10 ***
6    *c*c$$qq    10 ccc
6    **    10 c$cc
6    **    10 * 
```

可能：

```
6    ccg    10 ccc
6    ccgq    10 NNN
6    ccqq    10 ccc
6    NN    10 ccc
6    NN    10 N 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:26:03.050

在 awk 中尝试，

```
awk '{ if($2 ~ /^[*]+$/) { gsub ( /[*]/,"N",$2); } if($4 ~ /^[*]+$/ ){ gsub ( /[*]/,"N",$4); } print  }' your_file.txt  | sed 's/[-$*=+()]//g' 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:44:00.487

一种使用方式`perl`。遍历每一行的所有字段并替换特殊字符，除非该字段只有`*`字符。之后打印它们以一个空格分隔。

```
perl -ane '
    for my $pos ( 0 .. $#F ) {
        $F[ $pos ] =~ s/[-\$*=+()]//g unless $F[ $pos ] =~ m/\A\*+\Z/;
    }
    printf qq|%s\n|, join qq| |, @F;
' infile 
```

假设`infile`有问题的内容，输出将是：

```
6 ccg 10 ccc
6 ccgq 10 ***
6 ccqq 10 ccc
6 ** 10 ccc
6 ** 10 * 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T11:14:45.977

这可能对您有用（GNU sed）：

```
sed 'h;s/\S*\s*\(\S*\).*/\1/;:a;/^\**$/y/*/N/;s/[*$+=-]//g;H;g;/\n.*\n/bb;s/\(\S*\s*\)\{3\}\(\S*\).*/\2/;ba;:b;s/^\(\S*\s*\)\(\S*\)\([^\n]*\)\n\(\S*\)/\1\4\3/;s/\(\S*\)\n\(.*\)/\2/' file 
```

# jquery - 当 fancybox 已经打开时更新内容

> ID：11204723
> 
> 赞同：1
> 
> 时间：2012-06-26T09:49:53.987
> 
> 标签：jquery, fancybox

每次在 $.post 方法之后，我都会在 afterLoad 事件上调用 fancybox 2

```
$.post ... function(html){
$.fancybox({afterLoad:function(){this.content = html;}});
} 
```

当 Fancybox 关闭时它工作正常，但是当我从已经打开的 Fancybox 再次发出此请求时，我收到错误“无法加载内容”！

我已经验证了 beforeLoad、beforeShow 和其他一些事件，但没有运气。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:04:06.597

要将新内容加载到**已打开**的fancybox 中，您可以执行以下操作。这样，fancybox 将**不会**在使用新内容更新 fancybox 窗口之间关闭：

```
// is fancybox already popped up?
fancyboxIsOpen: false,

openFancyBox: function (urlToBeLoaded) {
    if (urlToBeLoaded === null) {
        this.closeFancyBox();
    } else {
        if (this.fancyboxIsOpen) {
            this.openInAlreadyOpenedFancyBox(urlToBeLoaded);
        } else {
            this.openFirstFancyBox(urlToBeLoaded);                
        }
    } 
}, 

openFirstFancyBox: function (urlToBeLoaded) {
    var that = this;
    $.fancybox.open({
        type: 'ajax',
        href: urlToBeLoaded,
        afterClose: function() {
            this.openFancyBox(null);
            return true;
        },
        afterShow : function() {
            that.fancyboxIsOpen = true;
            var ahref = jQuery(".fancybox");
            ahref.on("click", function(event){
                //stop the click action, we do not want to load the href in the window
                event.preventDefault();         
                var currentTarget = $(event.currentTarget);
                var urlToBeLoaded = that.getFancyBoxId(currentTarget);
            });     
        }
    });         
}, // end openFirstFancyBox

openInAlreadyOpenedFancyBox: function (urlToBeLoaded) {
    var that = this;

    $.fancybox.showLoading(); // show loading icon
    $.ajax({
        type: "GET",
        url: urlToBeLoaded,
        success : function(content, textStatus, jqXHR) {
            $.fancybox.hideLoading();                        
            jQuery(".fancybox-inner").html(content);
            $.fancybox.update();
        },
        error : function(xhr, status) {
            $.fancybox.hideLoading();
            return false;
        }
    });
},

closeFancyBox: function () {
    this.fancyboxIsOpen = false;
    $.fancybox.close();
},

getFancyBoxId: function (currentTarget) {
    var id = currentTarget.attr("href");  
    return id;        
}, 
```

重要的是`jQuery(".fancybox-inner").html(content);`用新内容替换当前fancybox 的内容，并且可以选择`$.fancybox.update();`根据新内容调整窗口大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-27T14:58:40.830

如果您不使用 iframe。您可以尝试以下

```
jQuery.fancybox({'content' : html}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T09:58:46.897

你不想做这样的事情吗？

```
$.post ... function(html){
    $.fancybox( html );
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-26T10:03:18.737

对于fancybox 3，提出这个解决方案：

```
$(`.foo`).on('click', function(e) {
    e.preventDefault();
    const self = $(this);

    $.fancybox.open({
        type: 'ajax',
        src: self.attr('href'),
        opts: {
            afterShow: function(instance, current) {
                $('.bar').on('click', function(e) {
                    e.preventDefault();
                    instance.showLoading(current);

                    $.ajax({
                        type: 'GET',
                        url: $(this).attr('href'),
                        success: function(content) {
                            instance.hideLoading(current);
                            instance.setContent(current, content);
                            instance.update();
                        }
                    });

                });
            }
        }
    });
}); 
```

# android - 单击选项卡时显示上下文菜单，与选项卡在同一屏幕中

> ID：11204729
> 
> 赞同：0
> 
> 时间：2012-06-26T09:50:16.933
> 
> 标签：android, tabs, contextmenu

当按下某个选项卡时，我需要显示类似上下文菜单的内容，如下所示： ![在此处输入图像描述](../Images/f01ca37a6fc558923668dcb8d76fd3cf.png)

可能吗？我知道当声明一个选项卡时，它必须设置一个 Intent，并且我想在与选项卡（相同的活动）相同的屏幕中显示此上下文菜单。需要一些帮助。欢迎任何想法。提前致谢。

编辑：我想说最后一个标签是这样的：

![在此处输入图像描述](../Images/b9749dead28f4e6996ba3b7d8d9421d1.png)

在Facebook上。最后一个选项卡有一些选项但内容不被修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:34:54.110

根据您的要求，您只需要选项卡上的上下文菜单而不是该选项卡的其他数据而不是您不需要为该选项卡添加意图类型或评论该选项卡示例的意图，例如

```
// intent = new Intent().setClass(this, tabactivity3.class);
 spec = tabHost.newTabSpec("songs").setIndicator("Search",
                       res.getDrawable(R.drawable.act3))
                   .setContent(intent);

     tabHost.addTab(spec); 
```

**我已经评论了选项卡 3**的意图，它将在视图后面显示上下文菜单作为上一个选项卡数据，如下图所示，其中我的 ic_launcher 图像显示是**选项卡 1**![在此处输入图像描述](../Images/89292138f2ca0e873c706a3c152c8494.png)

# android - 不同 minsdkversion 的相同代码

> ID：11204730
> 
> 赞同：1
> 
> 时间：2012-06-26T09:50:27.133
> 
> 标签：android, sdk

我想使用不同的 android:minSdkVersion 构建我的应用程序的两个不同版本。在较低的 sdk 版本中，我会简单地省略需要较高 sdk 的功能。（禁用需要更高版本的用户界面项）

我知道我可以“使用不同的过滤器发布多个 APK”（针对不同的 sdk 版本）（[http://developer.android.com/guide/google/play/filters.html#MultiApks](http://developer.android.com/guide/google/play/filters.html#MultiApks)）。在我的代码和 AndroidManifest.xml 文件中，我需要类似“#ifdef”的东西，但这似乎不适用于 xml 文件。

为每次重建最小化（容易出错的）手动更改的最佳方法是什么？

或者有没有办法在清单中指定较低的 sdk 版本，但在可用时使用较高版本的方法，即根据当前的 android 版本动态启用对方法的调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:57:04.200

是的，您可以创建一个带有条件块的 APK，这些条件块根据设备的 API 版本执行不同的语句。例如，您可以检查 的值`android.os.Build.VERSION.SDK_INT`并采取适当的措施。

# qt - QMessageBox 警告黄色感叹号图标

> ID：11204733
> 
> 赞同：3
> 
> 时间：2012-06-26T09:50:36.100
> 
> 标签：qt, warnings, qmessagebox

如何显示`QMessageBox::warning`带有三角形感叹号符号的 a ，如下所示？

![黄色背景三角形感叹号](../Images/38467195d88a86df2f674f5921007634.png)

我在 中找不到任何选项`QMessageBox::warning`，我只得到红色圆形符号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:02:47.913

三角形图标应该是`QMessageBox::warning`对话框的默认值，而红色圆形图标是对话框的默认值`QMessageBox::critical`。

在我的 python 代码中，我使用

`QMessageBox.warning(None,QString("..."),QString("...."))`

或更复杂的

```
msg = "..."
q = QMessageBox(QMessageBox.Warning, "...",  QString(msg))
q.setStandardButtons(QMessageBox.Ok);
i = QIcon()
i.addPixmap(QPixmap("..."), QIcon.Normal)
q.setWindowIcon(i)
q.exec_() 
```

而且它们都运作良好。

最终你能显示你用来显示对话框的代码吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-09T21:01:46.190

您可以使用 QMessageBox.setIcon() 函数来配置显示对话框时看到的符号。

此处列出了预定义的图标属性类型： [https ://doc.qt.io/qt-5/qmessagebox.html#severity-levels-and-the-icon-and-pixmap-properties](https://doc.qt.io/qt-5/qmessagebox.html#severity-levels-and-the-icon-and-pixmap-properties)

这是带有黄色三角形图标的消息框的 C++ 示例：

```
 QMessageBox msgWarning;
    msgWarning.setText("WARNING!\nRunning low on coffee.");
    msgWarning.setIcon(QMessageBox::Warning);
    msgWarning.setWindowTitle("Caution");
    msgWarning.exec(); 
```

这是我的带有红色圆圈图标的消息框的 C++ 示例：

```
 QMessageBox msgError;
    msgError.setText("CRITICAL ERROR!\nThe McRib is no longer available!");
    msgError.setIcon(QMessageBox::Critical);
    msgError.setWindowTitle("Danger");
    msgError.exec(); 
```

# android - 将视图重新添加到 onResume 上的片段会返回 IllegalStateException

> ID：11204741
> 
> 赞同：0
> 
> 时间：2012-06-26T09:50:56.653
> 
> 标签：android, android-fragments

我正在开发一个带有片段的 Android 3.1 平板电脑应用程序。

我已经看到只有两个片段同时在内存中。当我显示第三个时，第一个调用`onDestroyView`.

我`EditText`以编程方式添加到片段的视图中。`EditText`在片段的视图重新创建`onResume`方法后，那些不再显示。

我使用它们`EditText`让用户将数据添加到表单中，并将引用存储在`firstTable` `HashMap`. 我将使用它`HashMap`来检索用户的值。

`EditText`在这里，我以编程方式创建这些：

```
private LinearLayout createNewFirstTableRow(long articleId)
{
    LinearLayout layout = new LinearLayout(mActivity);
    LayoutParams parentParams = new LayoutParams(LayoutParams.MATCH_PARENT, 40);
    parentParams.weight = 1;
    layout.setLayoutParams(parentParams);

    if (firstTable == null)
        firstTable = new HashMap<Long, ArrayList<EditText>>();

    ArrayList<EditText> fields = new ArrayList<EditText>(7);

    LayoutParams params = new LayoutParams(0, 40);
    params.weight = 0.125f;

    TextView textView = new TextView(mActivity);
    textView.setLayoutParams(params);
    textView.setText(new Long(articleId).toString());
    layout.addView(textView);

    for (int i = 0; i < 7; i++)
    {
        EditText edit = new EditText(mActivity);
        edit.setLayoutParams(params);
        edit.setInputType(InputType.TYPE_CLASS_NUMBER);
        fields.add(i, edit);
        layout.addView(edit);
    }

    firstTable.put(new Long(articleId), fields);

    return layout;
} 
```

`firstTable`变量是一个全局变量：`private HashMap<Long, ArrayList<EditText>> firstTable;`.

要添加我的`EditText`我，请执行以下操作`onResume`：

```
@Override
public void onResume()
{
    Log.v("QuantityFragment", "onResume: " + firstTableRowIndex);

    if ((firstTable != null) && (secondTable != null))
    {
        firstTableRowIndex = FIRST_TABLE_ROW_INDEX;
        secondTableRowIndex = SECOND_TABLE_ROW_INDEX;

        LinearLayout table = (LinearLayout)view.findViewById(R.id.quantityTable);

        for (int index = 0; index < firstTable.size(); index++)
        {
            Long articleId = articleIds.get(index);

            table.addView(resumeTable(articleId, secondTable.get(articleId)), secondTableRowIndex);
            table.addView(resumeTable(articleId, firstTable.get(articleId)), firstTableRowIndex);

            firstTableRowIndex++;
            secondTableRowIndex++;
        }
    }

    super.onResume();
}

private LinearLayout resumeTable(Long articleId, ArrayList<EditText> fields)
{
    LinearLayout layout = new LinearLayout(mActivity);
    LayoutParams parentParams = new LayoutParams(LayoutParams.MATCH_PARENT, 40);
    parentParams.weight = 1;
    layout.setLayoutParams(parentParams);

    LayoutParams params = new LayoutParams(0, 40);
    params.weight = 0.125f;

    TextView textView = new TextView(mActivity);
    textView.setLayoutParams(params);
    textView.setText(new Long(articleId).toString());
    layout.addView(textView);

    for (int index = 0; index < fields.size(); index++)
    {
        layout.addView(fields.get(index));
    }

    return layout;
} 
```

但是，在这里`layout.addView(textView);`我得到一个例外：

**IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。**

有没有另一种方法来重新添加这些`EditText`？

**更新：**

我已经解决了我的问题改变`resumeTable`：

```
private LinearLayout resumeTable(Long articleId, ArrayList<EditText> fields)
{
    LinearLayout layout = new LinearLayout(mActivity);
    LayoutParams parentParams = new LayoutParams(LayoutParams.MATCH_PARENT, 40);
    parentParams.weight = 1;
    layout.setLayoutParams(parentParams);

    LayoutParams params = new LayoutParams(0, 40);
    params.weight = 0.125f;

    TextView textView = new TextView(mActivity);
    textView.setLayoutParams(params);
    textView.setText(new Long(articleId).toString());
    layout.addView(textView);

    for (int index = 0; index < fields.size(); index++)
    {
        LinearLayout parent = (LinearLayout)fields.get(index).getParent();
        parent.removeView(fields.get(index));
        layout.addView(fields.get(index));
    }

    return layout;
} 
```

这是重要的部分：

```
 for (int index = 0; index < fields.size(); index++)
    {
        LinearLayout parent = (LinearLayout)fields.get(index).getParent();
        parent.removeView(fields.get(index));
        layout.addView(fields.get(index));
    } 
```

**这个问题是开放的，如果您有更好的解决方案，请告诉我。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:19:28.003

抛出该异常是因为您存储了对添加到布局中的`Views`(the `EditText`) 的引用，然后您再次将这些引用重新添加`Views`到新构造的父级中。

关于解决方案，我不知道您为什么决定存储对那些`EditTexts`. 我认为值得存储的唯一数据`EditTexts`是用户输入的文本，在这种情况下，您应该存储该文本而不是那个特定的`EditText`.Your 方法是：

```
//...
if (firstTable == null) {
    // your HashMap now stores text instead of an EditText
    firstTable = new HashMap<Long, ArrayList<String>>();// store only the text from the EditText
}

    ArrayList<String> fields = new ArrayList<String>(7);
    LayoutParams params = new LayoutParams(0, 40);
    params.weight = 0.125f;

    TextView textView = new TextView(mActivity);
    textView.setLayoutParams(params);
    textView.setText(new Long(articleId).toString());
    layout.addView(textView);

    for (int i = 0; i < 7; i++) {
        EditText edit = new EditText(mActivity);
        edit.setLayoutParams(params);
        edit.setInputType(InputType.TYPE_CLASS_NUMBER);
        fields.add(i, ""); // the EditText are empty at first
        layout.addView(edit);
    }
    firstTable.put(new Long(articleId), fields); 
```

那么什么时候可以恢复`EditTexts`：

```
private LinearLayout resumeTable(Long articleId, ArrayList<String> fields) {
    LinearLayout layout = new LinearLayout(mActivity);
    LayoutParams parentParams = new LayoutParams(LayoutParams.MATCH_PARENT, 40);
    parentParams.weight = 1;
    layout.setLayoutParams(parentParams);
    LayoutParams params = new LayoutParams(0, 40);
    params.weight = 0.125f;
    TextView textView = new TextView(mActivity);
    textView.setLayoutParams(params);
    textView.setText(new Long(articleId).toString());
    layout.addView(textView);
    for (int index = 0; index < fields.size(); index++) {
        // create new EditTexts
        EditText edit = new EditText(mActivity);
        edit.setLayoutParams(params);
        edit.setInputType(InputType.TYPE_CLASS_NUMBER);
        edit.setText(fields.get(index)); // get the text coresponding to this particular EditText
        layout.addView(edit);
    }
    return layout;
} 
```

当然，当用户在其中输入内容时，`EditTexts`您应该将其存储在`firstTable`变量中正确位置的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:01:30.860

我认为问题是由于两次添加字段元素

```
 ArrayList<EditText> fields = new ArrayList<EditText>(7); 
```

1 - 在 createNewFirstTableRow

```
for (int i = 0; i < 7; i++)
    {
        EditText edit = new EditText(mActivity);
        edit.setLayoutParams(params);
        edit.setInputType(InputType.TYPE_CLASS_NUMBER);
        fields.add(i, edit);//<-----------
        layout.addView(edit);//<----------- added in layout 
    } 
```

2- onResume()->resumeTable

```
for (int index = 0; index < fields.size(); index++)
    {
        layout.addView(fields.get(index));//<----------------
    } 
```

当字段元素已经添加到屏幕上时，您不能添加两次.......

# android - 为什么我切换活动时列表视图为空？

> ID：11204745
> 
> 赞同：1
> 
> 时间：2012-06-26T09:51:01.163
> 
> 标签：android, android-listview, android-activity

我创建了 2 个不同的活动来显示具有不同结果的 JSON 数组并将其显示到列表视图中。

首先，我创建了我的菜单活动来控制带有按钮（Button1 和 Button2）的开关活动。
然后，我创建 2 个活动类（Activity1 和 Activity2）以在列表视图中显示我的 JSON 数组。
当我单击 Button1 时，它会工作并在列表视图中的 Activity1 上显示我的 JSON 数组。
但是当我单击 Button2 时，它什么也没显示。
为什么我的 Activity2 的列表视图项目丢失了？

这是我的列表视图占位符（`listviewplaceholder`）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">    

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:drawSelectorOnTop="false" />

    <TextView
        android:id="@id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text=""/>

    <Button
        android:id="@+id/buttonClose"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Close" />

</LinearLayout> 
```

这是我获取值的布局（`wfid`）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="7dp"
    >
<TextView  
    android:id="@+id/item_title"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:padding="2dp"
    android:textSize="20dp" />
    <TextView  
    android:id="@+id/item_subtitle"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:padding="2dp"
    android:textSize="13dp" />

</LinearLayout> 
```

这是我的菜单活动（`MenuActivity`）：

```
public class MenuActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // TODO Auto-generated method stub
        Button btnIndonesia = (Button) findViewById(R.id.button1);
        Button btnMalaysia = (Button) findViewById(R.id.button2);
        Button btnSingapore = (Button) findViewById(R.id.button3);
        Button btnHongkong = (Button) findViewById(R.id.button4);

        //Listening to button event
        btnIndonesia.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent indonesiaScreen = new Intent(getApplicationContext(), WeeklyFlashActivity.class);

                startActivity(indonesiaScreen);

            }
        });

        btnMalaysia.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent malaysiaScreen = new Intent(getApplicationContext(), WeeklyFlashMyActivity.class);

                startActivity(malaysiaScreen);

            }
        });

        btnSingapore.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent singaporeScreen = new Intent(getApplicationContext(), WeeklyFlashSgActivity.class);

                startActivity(singaporeScreen);

            }
        });

        btnHongkong.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent hongkongScreen = new Intent(getApplicationContext(), WeeklyFlashHkActivity.class);

                startActivity(hongkongScreen);

            }
        });
    }

} 
```

这是我在 listview 上显示 JSON 数组的`WeeklyFlashActivity`活动（所有活动基本上彼此相似，只是获取 JSON 的 URL 不同）：

```
public class WeeklyFlashActivity extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listplaceholder);

        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        JSONObject json = JSONfunctions.getJSONfromURL("http://www.greenfields.co.id:502/Service1.svc/json/weeklyflash/id");

        try
        {
            JSONArray  weeklyflash = json.getJSONArray("GetReportResult");

            for(int i=0;i<weeklyflash.length();i++)
            {                       
                HashMap<String, String> map = new HashMap<String, String>();    
                JSONObject e = weeklyflash.getJSONObject(i);

                //map.put("type",  String.valueOf(i));
                map.put("type", e.getString("type"));
                map.put("total", e.getString("total"));

                mylist.add(map);            
            }       
        }
        catch(JSONException e)        
        {
             Log.e("log_tag", "Error parsing data "+e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.wfid, 
                        new String[] { "type", "total" }, 
                        new int[] { R.id.item_title, R.id.item_subtitle });

        setListAdapter(adapter);
        Button btnClose = (Button) findViewById(R.id.buttonClose);
        btnClose.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Closing SecondScreen Activity
                finish();
            }
        });

    }
} 
```

# ios - CoreImage/CoreVideo 中的内存泄漏

> ID：11204748
> 
> 赞同：2
> 
> 时间：2012-06-26T09:51:09.957
> 
> 标签：ios, memory-leaks, core-image, core-video

我正在构建一个执行一些基本检测的 iOS 应用程序。我从 AVCaptureVideoDataOutput 获取原始帧，将 CMSampleBufferRef 转换为 UIImage，调整 UIImage 的大小，然后将其转换为 CVPixelBufferRef。据我可以使用 Instruments 检测到，泄漏是我将 CGImage 转换为 CVPixelBufferRef 的最后一部分。

这是我使用的代码：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
{
    videof = [[ASMotionDetect alloc] initWithSampleImage:[self resizeSampleBuffer:sampleBuffer]];
    // ASMotionDetect is my class for detection and I use videof to calculate the movement
}

-(UIImage*)resizeSampleBuffer:(CMSampleBufferRef) sampleBuffer {
    UIImage *img;
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
    CVPixelBufferLockBaseAddress(imageBuffer,0);        // Lock the image buffer 

    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddressOfPlane(imageBuffer, 0);   // Get information of the image 
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
    size_t width = CVPixelBufferGetWidth(imageBuffer); 
    size_t height = CVPixelBufferGetHeight(imageBuffer); 
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 

    CGContextRef newContext = CGBitmapContextCreate(baseAddress, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst); 
    CGImageRef newImage = CGBitmapContextCreateImage(newContext); 
    CGContextRelease(newContext); 

    CGColorSpaceRelease(colorSpace); 
    CVPixelBufferUnlockBaseAddress(imageBuffer,0); 
    /* CVBufferRelease(imageBuffer); */  // do not call this!

    img = [UIImage imageWithCGImage:newImage];
    CGImageRelease(newImage);
    newContext = nil;
    img = [self resizeImageToSquare:img];
    return img;
}

-(UIImage*)resizeImageToSquare:(UIImage*)_temp {
    UIImage *img;
    int w = _temp.size.width;
    int h = _temp.size.height;
    CGRect rect;
    if (w>h) {
        rect = CGRectMake((w-h)/2,0,h,h);
    } else {
        rect = CGRectMake(0, (h-w)/2, w, w);
    }
    //
    img = [self crop:_temp inRect:rect];
    return img;
}

-(UIImage*) crop:(UIImage*)image inRect:(CGRect)rect{
    UIImage *sourceImage = image;
    CGRect selectionRect = rect;
    CGRect transformedRect = TransformCGRectForUIImageOrientation(selectionRect, sourceImage.imageOrientation, sourceImage.size);
    CGImageRef resultImageRef = CGImageCreateWithImageInRect(sourceImage.CGImage, transformedRect);
    UIImage *resultImage = [[UIImage alloc] initWithCGImage:resultImageRef scale:1.0 orientation:image.imageOrientation];
    CGImageRelease(resultImageRef);
    return resultImage;
} 
```

在我的检测类中，我有：

```
- (id)initWithSampleImage:(UIImage*)sampleImage {
  if ((self = [super init])) {
    _frame = new CVMatOpaque();
    _histograms = new CVMatNDOpaque[kGridSize *
                                    kGridSize];
    [self extractFrameFromImage:sampleImage];
  }
  return self;
}

- (void)extractFrameFromImage:(UIImage*)sampleImage {
    CGImageRef imageRef = [sampleImage CGImage];
    CVImageBufferRef imageBuffer = [self pixelBufferFromCGImage:imageRef];
    CVPixelBufferLockBaseAddress(imageBuffer, 0);
  // Collect some information required to extract the frame.
    void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);

  // Extract the frame, convert it to grayscale, and shove it in _frame.
    cv::Mat frame(height, width, CV_8UC4, baseAddress, bytesPerRow);
    cv::cvtColor(frame, frame, CV_BGR2GRAY);
    _frame->matrix = frame;
    CVPixelBufferUnlockBaseAddress(imageBuffer, 0);
    CGImageRelease(imageRef);
}

- (CVPixelBufferRef) pixelBufferFromCGImage: (CGImageRef) image
{
    CVPixelBufferRef pxbuffer = NULL;
    int width = CGImageGetWidth(image)*2;
    int height = CGImageGetHeight(image)*2;

    NSMutableDictionary *attributes = [NSMutableDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:kCVPixelFormatType_32ARGB], kCVPixelBufferPixelFormatTypeKey, [NSNumber numberWithInt:width], kCVPixelBufferWidthKey, [NSNumber numberWithInt:height], kCVPixelBufferHeightKey, nil];
    CVPixelBufferPoolRef pixelBufferPool; 
    CVReturn theError = CVPixelBufferPoolCreate(kCFAllocatorDefault, NULL, (__bridge CFDictionaryRef) attributes, &pixelBufferPool);
    NSParameterAssert(theError == kCVReturnSuccess);
    CVReturn status = CVPixelBufferPoolCreatePixelBuffer(NULL, pixelBufferPool, &pxbuffer);
    NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL);

    CVPixelBufferLockBaseAddress(pxbuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
    NSParameterAssert(pxdata != NULL);
    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, width,
                                                 height, 8, width*4, rgbColorSpace, 
                                                 kCGImageAlphaNoneSkipFirst);
    NSParameterAssert(context);
/* here is the problem: */
    CGContextDrawImage(context, CGRectMake(0, 0, width, height), image);
    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context);

    CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

    return pxbuffer;
} 
```

使用 Instrument 我发现问题出在 CVPixelBufferRef 分配上，但我不明白为什么 - 有人能看到问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:16:09.313

在`-pixelBufferFromCGImage:`中，两者`pxBuffer`和`pixelBufferPool`都没有被释放。这对于 来说是有意义的`pxBuffer`，因为它是一个返回值，但对于`pixelBufferPool`- 您每次调用该方法都会创建和泄漏一个值。

快速修复应该是

1.  发布`pixelBufferPool`于`-pixelBufferFromCGImage:`
2.  释放`pxBuffer`（的返回值 `-pixelBufferFromCGImage:`）在`-extractFrameFromImage:`

您还应该重命名`-pixelBufferFromCGImage:`以`-createPixelBufferFromCGImage:`明确它返回一个保留对象。

# c++ - win xp下用gcc编译boost

> ID：11204750
> 
> 赞同：0
> 
> 时间：2012-06-26T09:51:22.770
> 
> 标签：c++, gcc, boost, mingw, bjam

我正在尝试使用 bjam.exe 编译 boost 1.49。我找到了命令行：

```
bjam.exe toolset=gcc variant=release threading=multi link=static boost_thread 
```

但它会引发一些错误：

```
warning: mismatched versions of Boost.Build engine and core
warning: Boost.Build engine (bjam.exe) is 03.1.18
warning: Boost.Build core (at ./tools/build/vs) is 2011.04-svn
./tools/build/vs/tools/gcc.jam:129: in gcc.init from module gcc
error: toolset gcc initialization
error: no command provided, default command 'g++' not found
error: initialized from ./tools/build/v2/user-config.jam:42
./tools/build/v2/build/toolset.jam:38 in toolset.using from module toolset
./tools/build/v2/build/project.jam:888 in using from module project-rules
./tools/build/v2/user-config.jam:42 in modules.load from module user-config
./tools/build/v2/build-system.jam:257 in load-config from module build-system
./tools/build/v2/build-system.jam:399 in load-configuration-files from module build-system
./tools/build/v2/build-system.jam:555: in load from module build-system
./tools/build/v2/kernel/modules.jam:283: in import from module modules
./tools/build/v2/kernel/bootstrap.jam:142: in boost-build from module
./boost-build.jam:17: in module scope from module 
```

我怎样才能让 bjam 知道 gcc 在哪里（我用 MinGW 和 Codeblocks 安装了它）？我怎样才能拥有正确的版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:11:02.337

该站点并不是真正的最佳提问地点，因为它是与 Windows 相关的问题。最好的方法（因为它适用于其他应用程序）只是将您的 MinGW 添加到 PATH 变量。

去这里参考如何做到这一点：[http ://www.w3schools.com/tags/att_option_selected.asp](http://www.w3schools.com/tags/att_option_selected.asp)

# mysql - 如何从表中获取最后 3 条记录

> ID：11204751
> 
> 赞同：0
> 
> 时间：2012-06-26T09:51:25.470
> 
> 标签：mysql

我有一个包含以下字段和数据的表：

```
uid     message         created
======= =============== ==========
1       text1           1305244929
2       text2           1305244930
3       text3           1305244931
1       text4           1305244932
1       text5           1305244933
3       text6           1305244934
2       text7           1305244945
1       text8           1305244956
3       text9           1305244947
1       text10          1305244948
2       text11          1305244967
1       text12          1305244968
3       text13          1305244969
1       text14          1305244970
2       text15          1305244971
3       text16          1305244972
3       text17          1305244973 
```

如何获取**每个**uid 的最后 3 条记录，按创建的 DESC 排序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:29:36.013

这没有经过测试，但它应该可以解决问题：

```
SELECT uid, message, created FROM (
SELECT
IF(@prev != q.uid, @rownum:=1, @rownum:=@rownum+1) as rownumber, @prev:=q.uid, q.*
FROM (
    SELECT
    uid, message, created
    FROM yourTable yt
    , (SELECT @rownum:=0, @prev:='') r
    ORDER BY uid, created DESC
)q
)asdf
WHERE asdf.rownumber <= 3 
```

就像其他人说的那样，主键对您的表来说会很好。

# java - 从关键文本中获取 KeyChar

> ID：11204753
> 
> 赞同：2
> 
> 时间：2012-06-26T09:51:27.787
> 
> 标签：java, swing, awt, keystroke, key-events

我必须使用代表击键的字符串（例如“A”、“ENTER”、“F4”）。我需要从这个字符串中获取按键字符、按键代码和按键修饰符。

这是我所做的（例如 F4）：

```
AWTKeyStroke ks = AWTKeyStroke.getAWTKeyStroke("F4");
System.out.println(ks.getKeyCode());
System.out.println(ks.getKeyModifiers());
System.out.println(ks.getKeyChar()); 
```

我得到：

```
115
0
? 
```

键码和修饰符都可以，但无论我尝试什么击键，我总是得到？对于密钥字符...

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:09:25.390

2 条评论：

*   您没有指定您键入了密钥，在这种情况下[假定按下并且不打印任何字符](http://download.java.net/jdk7/archive/b123/docs/api/java/awt/AWTKeyStroke.html#getAWTKeyStroke%28java.lang.String%29)
*   “F4”没有有效的 Unicode 字符

如果您将语句更改为，`System.out.println((int)ks.getKeyChar());`您将看到`keyChar`65535，即 的值`KeyEvent.CHAR_UNDEFINED`。

您可以尝试`AWTKeyStroke ks = AWTKeyStroke.getAWTKeyStroke("typed A");`查看 keyChar 是否存在`A`，也可以尝试`AWTKeyStroke ks = AWTKeyStroke.getAWTKeyStroke("typed F4");`查看是否出现异常。

# internet-explorer - TinyMCE - 在 IE 中的光标位置插入内容不起作用

> ID：11204754
> 
> 赞同：3
> 
> 时间：2012-06-26T09:51:29.523
> 
> 标签：internet-explorer, tinymce

我正在尝试在当前光标位置插入一些内容或替换 TinyMCE 编辑器实例中的选定内容。我正在使用这个：

`tinyMCEPopup.editor.selection.setContent(content);`

`content`我要插入的 HTML 字符串在哪里。

它适用于 Firefox、Opera 和 Chrome，但不适用于 IE。相反，它在编辑器的开头插入内容，而不是选择。我也试过：

`tinyMCEPopup.execCommand('mceInsertContent', false, content);`

同样，IE 中的行为相同。用于插入特殊字符的 TinyMCE 代码使用了上面的函数并且有效！我已经尝试在我的插件中复制它，但仍然没有乐趣......

```
function insertChar(chr) {
    tinyMCEPopup.execCommand('mceInsertContent', false, '&#' + chr + ';');

    // Refocus in window
    if (tinyMCEPopup.isWindow)
        window.focus();

    tinyMCEPopup.editor.focus();
    tinyMCEPopup.close();
} 
```

**更新**：

仍然无法在 IE 中运行，Opera 甚至没有在工具栏中显示我的插件按钮（尽管这可能是一个单独的问题）！我现在也尝试了 jQuery 插件，让编辑器加载，但无法调用 mceInsertContent 方法，即使使用这个：

`$('#my-editor-id').tinymce().execCommand('mceInsertContent', false, content);`

出现错误：“对象没有方法：tinymce” - 也许我不能从弹出窗口中调用它？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T22:04:22.620

你试过打电话吗：

```
tinyMCEPopup.restoreSelection(); 
```

打电话之前

```
tinyMCEPopup.execCommand('mceInsertContent', false, '&#' + chr + ';'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T06:41:58.007

问题是当您单击编辑器外部的按钮或链接等其他内容时，TinyMCE 会丢失当前光标位置，从而导致其失去焦点。
要解决此问题，请使用按钮或链接的 mousedown 事件。这样，您可以在失去焦点之前执行插入操作。

```
$("#insert_link").mousedown(function (e) {
    var editor = tinyMCE.get("editor");
    editor.execCommand('mceInsertContent', false, "Insert Value");
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-02T19:55:59.593

在类似情况下对我有用的东西，以及这里可能的解决方案 - 使用

```
editor.selection.getBookmark(); 
```

在失去编辑的注意力之前

```
editor.selection.moveToBookmark(); 
```

在插入内容之前。

问题在于，在 FF 中，当您将光标放在包含文本的文本字段中的某个位置时，然后单击其他位置并返回（即通过按 Tab），插入符号将显示在失去焦点之前的位置。在 IE 中它会回到开头。我希望这有帮助。

# java - 如何防止 Hibernate 在单表策略中生成像实体一样糊状的表？

> ID：11204758
> 
> 赞同：2
> 
> 时间：2012-06-26T09:51:36.037
> 
> 标签：java, hibernate, single-table-inheritance

下面的代码是我的对象模型，我需要为这些实体创建两个表。一个用于`InheritanceType.JOINED`战略，另一个用于`InheritanceType.SINGLE_TABLE`战略。但不幸的是，Hibernate 创建的表和实体一样糊状。我应该怎么办？
提前致谢。

```
@MappedSuperClass 
public abstract class EntityObject implements Cloneable, Serializable {
private Long id;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
}
} 
```

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class SuperParent extends EntityObject{

private String lastName;

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}

} 
```

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "d_type", discriminatorType = DiscriminatorType.STRING)
public class Parent extends SuperParent {
private String firstName;

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}
} 
```

```
@Entity
@DiscriminatorValue("Child1")
public class Child1 extends Parent {
private String age;

public String getAge() {
    return age;
}

public void setAge(String age) {
    this.age = age;
}
} 
```

```
@Entity
@DiscriminatorValue("child2")
public class Child2 extends Parent {

private String hairColor;

public String getHairColor() {
    return hairColor;
}

public void setHairColor(String hairColor) {
    this.hairColor = hairColor;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:48:40.153

不支持将联合继承策略与其他继承策略混合使用。Hibernate 仅支持将 table-per-class 与 table-per-subclass 继承混合。

# esb - wso2 esb 中的故障转移配置

> ID：11204767
> 
> 赞同：1
> 
> 时间：2012-06-26T09:52:19.990
> 
> 标签：esb, wso2, endpoint, failover, wso2esb

我们有一个代理服务，它执行以下操作 1\. 调用后端服务以获取客户端 ID 2\. 使用为该客户端 ID 配置的端点（客户端端点）并将原始请求转发到该端点。3.返回对请求的响应

早些时候，我们在将请求转发到客户端端点时将 OUT_ONLY 属性设置为 true（步骤 2）。但是我们现在必须为客户端端点使用故障转移端点配置。所以我们删除了 OUT_ONLY 属性并使用了以下故障转移配置。客户端端点不会为转发的请求返回任何响应。因此，注册的回调没有得到任何响应，并且随后被 Timeouthandler 清除。最近，我们面临一些 CPU 峰值和 ESB 引发的 OutOfMemory 错误。我们怀疑突触回调处理程序正在使用大部分系统资源并且无法恢复。由于客户端端点没有返回响应，此配置是否会创建任何 OutOfMemory 错误（如果经过压力测试）？请建议。

```
<endpoint xmlns="http://ws.apache.org/ns/synapse" name="client_forward_endpoint_110">
<failover>
    <endpoint name="primary">
        <address uri="--primary endpoint--">
            <enableAddressing />
            <timeout>
                <duration>30</duration>
                <action>discard</action>
            </timeout>
            <markForSuspension>
                <errorCodes>101504, 101505, 101500</errorCodes>
                <retriesBeforeSuspension>3</retriesBeforeSuspension>
                <retryDelay>1</retryDelay>
            </markForSuspension>
            <suspendOnFailure>
                <initialDuration>1000</initialDuration>
                <progressionFactor>2</progressionFactor>
                <maximumDuration>64000</maximumDuration>
            </suspendOnFailure>
        </address>
    </endpoint>
    <endpoint name="secondary">
        <address uri="--secondary endpoint--">
            <enableAddressing />
            <timeout>
                <duration>30</duration>
                <action>discard</action>
            </timeout>
            <markForSuspension>
                <errorCodes>101504, 101505, 101500</errorCodes>
                <retriesBeforeSuspension>3</retriesBeforeSuspension>
                <retryDelay>1</retryDelay>
            </markForSuspension>
            <suspendOnFailure>
                <initialDuration>1000</initialDuration>
                <progressionFactor>2</progressionFactor>
                <maximumDuration>64000</maximumDuration>
            </suspendOnFailure>
        </address>
    </endpoint>
</failover> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T19:20:07.260

如果您的端点没有返回任何响应，您如何判断它是否处于活动状态？

如果端点对任何类型的请求有任何类型的响应，您可以先使用“调用”中介来检查端点可用性，然后使用具有 OUT_ONLY 属性的发送中介来进行更复杂的中介。您可以使用切换调解器来评估“调用”调解器的结果，并为该调解器设置一个非常短的超时时间，以使吞吐量可以接受，即使第一个端点不可访问。这不是一个理想的解决方案，但它应该可以工作。

# javascript - 选中单选按钮时如何动态添加下拉元素？

> ID：11204770
> 
> 赞同：0
> 
> 时间：2012-06-26T09:52:34.977
> 
> 标签：javascript, ajax, dynamic, drop-down-menu, radio

当我单击单选按钮时，我想以相同的形式动态显示一个下拉列表元素。没有按钮，只有一个单选按钮。我正在寻找使用 JavaScript 和 Ajax 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:03:42.577

这是类似的问题，您只需调整它而不是使用您的选择控件输入，并将您的数据放入 Javascript 数组中，然后添加它。 [使用jquery动态添加文件输入？](https://stackoverflow.com/questions/4843150/adding-file-inputs-dynamicly-with-jquery)

# c# - SQLDataReader 如何检查空列值？

> ID：11204771
> 
> 赞同：1
> 
> 时间：2012-06-26T09:52:37.480
> 
> 标签：c#, .net, ado.net, sqlclient

我正在使用 SQLDataReader 将列数据插入字符串 []。

但是，某些列值为空。我有点不确定如何检查这一点，因为当我执行 reader[column_pos] 时，它说该值为“n/a”。

我可以执行什么检查，以便可以执行以下操作：

```
for(int i=0; i<myarray.Length;i++){
    if(something){
        myarray[i] = reader[i];
    }
    else
    {
        myarray[i] = "";
    }
} 
```

并在列中有空值时插入一个空白字符串。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T09:54:22.457

您可以使用[IsDBNull](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx)

```
for(int i=0; i<myarray.Length;i++){
    if(reader.IsDBNull(i)){
        myarray[i] = "";
    }
    else
    {
        myarray[i] = reader[i];

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T09:58:11.547

您也可以使用`if (reader[0] == DBNull.Value)`. 如果您可以控制查询的运行，您也可以使用 SQL`ISNULL(field, default_value)`函数来确保列返回值。

对于 C#，您还可以使用 if/else 简写：

```
myArray[i] = (reader[i] == DBNull.Value) ? "" : reader[0]; 
```

转换为：如果 reader 值为`DBNULL`，则使用`""`，否则使用 reader 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:00:52.623

[SqlDataReader](http://msdn.microsoft.com/it-it/library/system.data.sqlclient.sqldatareader%28v=vs.80%29.aspx)类具有[IsDBNull](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx)属性。

您可以编写如下代码：

```
for(int i=0; i<myarray.Length;i++){
    if(myReader.IsDBNull(i)){
        myarray[i] = "";
    }
    else
    {
        myarray[i] = reader[i];

    } } 
```

或者更好：

```
for(int i=0; i<myarray.Length;i++){
      myarray[i] = reader.IsDBNull(i) ? "" : reader[i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:03:09.910

```
myarray[i] = reader.IsDBNull(i) || reader[i] == DBNull.Value ? string.Empty : reader[i]; 
```

# android - 在android中执行网络搜索

> ID：11204774
> 
> 赞同：0
> 
> 时间：2012-06-26T09:52:51.330
> 
> 标签：android

我有一个文本视图。我想要的是当我在 textView 中选择文本时，我为用户提供了一个选项来搜索该词或网络上的任何内容。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:56:33.857

试试这个：

```
Intent search = new Intent(Intent.ACTION_WEB_SEARCH);  
search.putExtra(SearchManager.QUERY, "android how to use websearch");  
startActivity(search); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T09:56:44.000

您可以使用`Intent.ACTION_WEB_SEARCH`和`SearchManager.QUERY,`

```
 Intent intent = new Intent(Intent.ACTION_WEB_SEARCH);
 String search = editTextInput.getText().toString();
 intent.putExtra(SearchManager.QUERY, search);
 startActivity(intent); 
```

# php - Javascript PHP 点击搜索时弹出图片，关闭图片后显示搜索结果

> ID：11204779
> 
> 赞同：1
> 
> 时间：2012-06-26T09:53:04.447
> 
> 标签：php, javascript

我想用javascript做一个“弹出图像”来显示一个简单的用户指南图像，用户点击搜索后会弹出图像，让他们更好地理解结果。因此，当用户关闭图像时，他们将链接到 results.php。抱歉，我无法提供任何有用的 javascript 代码，因为我从互联网上找到的那些代码太长了。而且我对javascript非常陌生。

**保存帖子->会话**

```
<?php 
$loan_amt = $_POST['loan_amt']; 
if($_POST['search']){
if($_POST['loan_amt']=="" || $_POST['loan_tenure']==""){
$error = "Please fill up the mandatory fields"; 
}else{
session_start();
$_SESSION['property_type'] = $_POST['property_type'];
$_SESSION['property_status'] = $_POST['property_status'];
$_SESSION['loan_amt'] = $_POST['loan_amt'];
$_SESSION['loan_tenure'] = $_POST['loan_tenure'];

header("location:rates_result.php");
}
}
?> 
```

**搜索表格（贷款金额字段）**

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"      onsubmit="this.loan_amt.value=this.loan_amt.value.replace(/\,/g,'')">
<table width="400px">
<tr>
<td class="color1" width="130">Loan Amt (SGD)*:</td>
<td width="258" align="left">
<input type="text" style="width:150px;font-size:16px" onkeyup="format(this)" onchange="format(this)"
onblur="if(this.value.indexOf('.')==-1)this.value=this.value" name="loan_amt">
</td>
<td width="258" align="left"><input type="submit" class="buttonStyle" name="search" value="search" /></td>
</tr>
</table>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:29:46.020

在弹出页面中，您可以放入以下部分：

```
<script type="text/javascript"> 
window.onclose=goToResults

 function goToResults(){
      //do the parent go to results.php
      parent.location="results.php";
} 
</script> 
```

如果它是要提交的表单，您可以在父级上指向一个函数，该函数可以提交表单：

在弹出窗口中：

```
function goToResults(){
//do the parent go to results.php
parent.submitForm();
} 
```

在页面中：

```
function sumbitForm(){
      form_to_submit=document.getElementById("FORM_ID");
      form_to_submit.submit();
} 
```

# html - 将所有 tabindex 属性删除到 html 元素的最佳方法是什么？

> ID：11204784
> 
> 赞同：2
> 
> 时间：2012-06-26T09:53:15.783
> 
> 标签：html, gwt, tabindex

从 html 元素中删除所有 tabindex 属性的最佳方法是什么？GWt 似乎放置了这个属性，即使它没有在代码中的任何地方设置。它将 tabindex 设置为 -1。

我有下面的代码，但它很乏味，因为我必须根据标签名称搜索每个元素，这会减慢页面加载速度。还有其他建议吗？我更喜欢该解决方案不使用 javascript，因为我是新手。

```
 NodeList<Element> input =  this.getElement().getElementsByTagName("input");

        if(input.getLength()>0)
        {
            for(int i=0; i<=input.getLength(); i++)
            {

                    input.getItem(i).removeAttribute("tabIndex");

            }

        }
        NodeList<Element> div =  this.getElement().getElementsByTagName("div");

        if(div.getLength()>0)
        {
            for(int i=0; i<=div.getLength(); i++)
            {

                    div.getItem(i).removeAttribute("tabIndex");

            }

        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T10:12:24.763

我不完全确定你在问什么。您要删除选项卡索引属性。你要么：

*   在 HTML 中手动将 tabindex 属性设置为 -1。
*   使用您已有的代码。
*   [或者在另一个线程](https://stackoverflow.com/questions/1987927/javascript-jquery-remove-from-tabindex)中使用简化的 JQuery 版本。

也许我误解了你想要达到的目标？

**编辑**

好吧，也许这个：

```
$(document).ready(function(){
    $('input').removeAttr("tabindex");
}); 
```

这应该删除它而不是将其设置为 -1 ......希望如此。对不起，如果我又误会了！

[jQuery removeAttr 链接](http://api.jquery.com/removeAttr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:13:18.170

我终于弄明白了。

我尝试了 Javascirpt/jquery，但他们无法删除 tabindexes，因为页面尚未完全呈现 - 我的面板以编程方式放置在`window.load`. 我所做的是利用[`RootPanel.class`](http://www.gwtapps.com/doc/html/com.google.gwt.user.client.ui.RootPanel.html)gwt [（](http://www.gwtproject.org/)已经在使用，但我不知道）。

任务：要摆脱所有带有 -1 值的 tabindex，为所有脚本标签添加 type="tex/javascript"，为样式标签添加 type="text/css"，并为所有 img 标签添加一个 alt。这些都是为了 html 验证。

我不确定这是不是最好的方法，它确实会增加加载速度，但客户坚持要我这样做。所以这里是：

```
 RootPanel mainPanel = RootPanel.get(Test_ROOT_PANEL_ID);
        Widget widget = (Widget) getEntryView();
        mainPanel.add((widget));

        // Enable the view disable the loading view. There should always be
        // the loading panel to disable.
        Element mainPanelelement = DOM.getElementById(Test_ROOT_PANEL_ID);
        Element loadingMessage = DOM.getElementById(LOADING_MESSAGE);

       Element parent = loadingMessage.getParentElement();

        if(parent!=null)
        {
//i had to use prev sibling because it is the only way that I know of to access the body //tag that contains the scripts that are being generated by GWT ex.bigdecimal.js

    Element body = parent.getPreviousSibling().getParentElement();
            if(body!=null)
            {
                 NodeList<Element> elms = body.getElementsByTagName("*");
                 if(elms.getLength()>0)
                         {
                            Element element=null;
                            for(int i=0; i<=elms.getLength(); i++)
                            {
                                if(elms.getItem(i)!=null)
                                {
                                    element = elms.getItem(i);
                                    if(element.getTagName().compareToIgnoreCase("script")==0)
                                        element.setAttribute("type", "text/javascript");
                                    else if(element.getTagName().compareToIgnoreCase("style")==0)
                                        element.setAttribute("type", "text/css");
                                    else if(element.getTagName().compareToIgnoreCase("img")==0)
                                    {
                                        if(element.getAttribute("alt")=="")
                                                element.setAttribute("alt", element.getAttribute("title")!=" " ? element.getTitle() : " " );
                                    }
                                    else 
                                    {
                                        if(element.getTabIndex()<=0)
                                            element.removeAttribute("tabindex");
                                    }

                                }
                            }
                         }
            }

        }
        DOM.setStyleAttribute((com.google.gwt.user.client.Element) loadingMessage, "display", "none");
        DOM.setStyleAttribute((com.google.gwt.user.client.Element) mainPanelelement, "display", "inline");

        // Change cursor back to default.
        RootPanel.getBodyElement().getStyle().setProperty("cursor", "default");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-27T10:01:29.787

*使用[querySelectorAll](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)函数返回文档中与指定选择器组匹配的元素列表（使用文档节点的深度优先前序遍历）。*

```
function removeTagAttibute( attributeName ){
    var allTags = '*';
    var specificTags = ['ARTICLE', 'INPUT']; 

    var allelems = document.querySelectorAll( specificTags );
    for(i = 0, j = 0; i < allelems.length; i++) { 
        allelems[i].removeAttribute( attributeName );
    }
}

removeTagAttibute( 'tabindex' ); 
```

# python - 如何正确使用 python 的 isinstance() 检查变量是否为数字？

> ID：11204789
> 
> 赞同：57
> 
> 时间：2012-06-26T09:53:33.017
> 
> 标签：python, python-2.5, pep8

我发现一些旧的 Python 代码正在执行以下操作：

```
if type(var) is type(1):
   ... 
```

正如预期的那样，`pep8`抱怨这种推荐使用`isinstance()`.

现在，问题是该`numbers`模块是在 Python 2.6 中添加的，我需要编写适用于 Python 2.5+ 的代码

所以`if isinstance(var, Numbers.number)`不是解决方案。

在这种情况下，哪个是正确的解决方案？

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-06-26T09:57:53.337

在 Python 2 中，您可以使用该[`types`模块](http://docs.python.org/library/types.html)：

```
>>> import types
>>> var = 1
>>> NumberTypes = (types.IntType, types.LongType, types.FloatType, types.ComplexType)
>>> isinstance(var, NumberTypes)
True 
```

请注意使用元组来测试多种类型。

在引擎盖下，`IntType`只是`int`等的别名：

```
>>> isinstance(var, (int, long, float, complex))
True 
```

该`complex`类型要求您的 python 在编译时支持复数；如果您想对此进行防范，请使用 try/except 块：

```
>>> try:
...     NumberTypes = (types.IntType, types.LongType, types.FloatType, types.ComplexType)
... except AttributeError:
...     # No support for complex numbers compiled
...     NumberTypes = (types.IntType, types.LongType, types.FloatType)
... 
```

或者如果您只是直接使用类型：

```
>>> try:
...     NumberTypes = (int, long, float, complex)
... except NameError:
...     # No support for complex numbers compiled
...     NumberTypes = (int, long, float)
... 
```

在 Python 3`types`中不再有任何标准类型别名，`complex`始终启用并且不再存在`long`vs`int`差异，因此在 Python 3 中始终使用：

```
NumberTypes = (int, float, complex) 
```

最后但同样重要的是，您可以使用[`numbers.Numbers`抽象基类型](https://docs.python.org/2/library/numbers.html)（Python 2.6 中的新类型）来支持不直接从上述类型派生的自定义数字类型：

```
>>> import numbers
>>> isinstance(var, numbers.Number)
True 
```

此检查还返回`True`for`decimal.Decimal()`和`fractions.Fraction()`对象。

该模块确实假设`complex`启用了该类型；如果不是，您将收到导入错误。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-26T09:57:21.190

Python 2 支持数字`int`、、和的四种类型`float`，并支持 3 :和`long``complex``python 3.x``int``float``complex`

```
>>> num = 10
>>> if isinstance(num, (int, float, long, complex)): #use tuple if checking against multiple types
      print('yes it is a number')

yes it is a number
>>> isinstance(num, float)   
False
>>> isinstance(num, int)
True
>>> a = complex(1, 2)
>>> isinstance(a, complex)
True 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-03T12:42:57.030

根据您在[鸭子打字](https://en.wikipedia.org/wiki/Duck_typing)中使用的内容，这可能是一种更好的方法（[当然](https://stackoverflow.com/questions/3501382/checking-whether-a-variable-is-an-integer-or-not?lq=1) [通常](https://stackoverflow.com/questions/17612690/how-to-check-for-a-function-type-in-python) [推荐](https://stackoverflow.com/questions/152580/whats-the-canonical-way-to-check-for-type-in-python)）。Martijn Pieters 方法的问题在于，您总是会错过列表中的某些类型的数字。在我的脑海中，您的代码将无法使用：sympy 有理数、任意精度整数和复数的任何实现。

一种替代方法是编写这样的函数：

```
def is_number(thing):
    try:
        thing + 1
        return True
    except TypeError:
        return False 
```

此代码应与数字的任何合理实现一起使用。当然有一个主要的缺点：它也适用于大量非数字的不合理实现（即，如果加号运算符被重载并接受整数）。

另一种选择（取决于您为什么需要知道某物是否是数字）是假设它是一个数字，如果不是，则任何需要数字的代码位都会抛出错误。

我并不是说这些方法总是更好（不像某些人......）只是它们值得考虑。

# objective-c - 类/对象逻辑

> ID：11204793
> 
> 赞同：0
> 
> 时间：2012-06-26T09:53:36.997
> 
> 标签：objective-c, class, object

你会如何解决这个问题？当应用程序启动时，会创建一个类的四个对象。这些对象具有您知道的名称，因为您自己命名了它们。您可以从 viewController 访问这些对象并调用创建 UILocalNotification 的方法（它们都得到了）。（所以最后你有四个通知正在运行。）

两个问题：

1.  你如何命名通知（不同）？据我所知，在创建通知时是否无法访问对象名称以使用字符串作为名称？（哪个是最好的解决方案？）

2.  当通知被触发时，当您不知道名称时如何从另一个 viewController 访问/取消它们？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:44:17.107

为所有对象设置标签，并为它们生成的通知设置相同的标签。

# visual-studio-2010 - Visual Studio 远程测试 - 无法连接到虚拟机上的测试控制器

> ID：11204798
> 
> 赞同：2
> 
> 时间：2012-06-26T09:53:57.117
> 
> 标签：visual-studio-2010, load-testing

我在虚拟机 VM1 上安装了测试控制器和测试代理。测试代理显示为在线。我正在尝试从我的机​​器远程运行 CodedUI 测试。但是每次我去测试 - >管理测试控制器......在VS2010中它都会挂起。当我尝试远程运行任何测试时，效果相同。

两台机器都在同一个域中，在我的机器上我使用域管理员用户，在 VM 本地管理员上。

我在事件查看器中有这两个错误：

1.  > 找不到来自源 VSTTExecution 的事件 ID 0 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。如果事件起源于另一台计算机，则显示信息必须与事件一起保存。活动中包含以下信息：
    > 
    > **(devenv.exe, PID 7732, Thread 1) IdleProcessorManager.DoWork - Job throw: 项目已经被添加。输入字典：'7c58e17b-57a5-e486-31cc-aca08ec38d23'** 正在添加的键：'7c58e17b-57a5-e486-31cc-aca08ec38d23' at Microsoft.VisualStudio.TestTools.Common.Xml.XmlPersistence.LoadHashtable[K,V](XmlElement element, String location, String keyLocation, String valueLocation, XmlTestStoreParameters parameters ) 在 Microsoft.VisualStudio.TestTools.Common.TestListCategory.Load(XmlElement element, XmlTestStoreParameters parameters) 在 Microsoft.VisualStudio.TestTools.Common.Xml.XmlFilePersistence.LoadTestList(String fileName) 在 Microsoft.VisualStudio.TestTools.TestManagement.Tmi.LoadCategories （字符串位置，TestListCategoryConflictHandler idVetoingHandler，TestListCategoryConflictHandler nameVetoingHandler）在 Microsoft.VisualStudio.TestTools.TestManagement.Tmi.LoadCategories（字符串位置）在 Microsoft.VisualStudio.TestTools.TestCaseManagement。SolutionIntegrationManager.LoadCategoriesIntoTmi(String filename) at Microsoft.VisualStudio.TestTools.TestCaseManagement.SolutionIntegrationManager.d__83.MoveNext() at Microsoft.VisualStudio.TestTools.TestCaseManagement.IdleProcessorManager.DoWork()

2.  > 找不到来自源 VSTTExecution 的事件 ID 0 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。如果事件起源于另一台计算机，则显示信息必须与事件一起保存。活动中包含以下信息：
    > 
    > (devenv.exe, PID 7732, Thread 65)**等待控制器连接超时**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:26:15.727

答案在这里给出了[http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/4e8445e6-5c35-4c33-820e-0c334046631b?prof=required](http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/4e8445e6-5c35-4c33-820e-0c334046631b?prof=required)

在安全模式下运行 Visual Studio 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T20:11:32.637

我通过安装[Visual Studio 的更新 2](http://social.msdn.microsoft.com/Forums/es-ES/msdnsandbox/thread/7195f6fc-58aa-454e-a96e-ea442f6590e6)解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-11T09:42:38.027

我有一个类似的例外（见下文）。

在我的项目解决方案中配置和使用了一个运行设置

“Visual Studio/测试/配置运行设置/”

所以我取消了检查，它又开始工作了......

在配置运行设置下，现在我有：“选中的自动检测运行设置文件”和“选择解决方案范围的运行设置文件条目”和未选中的“project.testsettings”文件。

```
The description for Event ID 0 from source VSTTExecution cannot be found. Either the component that raises this event is not installed on your local computer or the installation is corrupted. You can install or repair the component on the local computer.

If the event originated on another computer, the display information had to be saved with the event.

The following information was included with the event: 

(testhost.x86.exe, PID 10320, Thread 3) TestTypes\{7a24f8ff-85da-d664-ef44-83ff4743dae6} could not be loaded because the TIP could not be instantiated for the following reason(s): An item with the same key has already been added.

The message resource is present but the message was not found in the message table 
```

# html - 更改 IE7 HTML 标签宽度

> ID：11204801
> 
> 赞同：0
> 
> 时间：2012-06-26T09:54:05.267
> 
> 标签：html, internet-explorer-7

我似乎无法在 IE7 中更改宽度

[http://jsfiddle.net/Mkb9n/1/](http://jsfiddle.net/Mkb9n/1/)

您可以看到所有其他浏览器（包括 IE8+）都会将背景图片放在 200px 内，而 IE7 会简单地忽略 html 宽度规则。

有什么解决办法吗？

编辑：显然所有浏览器在 jsfiddle iframe 内的 html 标记上返回大致相同的宽度，问题是 IE7 中的背景位置是相对于 html 而不是 body。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:57:38.913

那是IE7。尝试将其设置为 DIV 背景 - [http://jsfiddle.net/Mkb9n/2/](http://jsfiddle.net/Mkb9n/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:23:04.243

我的朋友找到了解决方案：

诀窍是在您的 html 标签中添加背景颜色（任何颜色都可以），然后将背景图像添加到您的正文标签（最好使用适合您的背景图像的背景颜色）

[http://jsfiddle.net/Mkb9n/3/](http://jsfiddle.net/Mkb9n/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:00:21.737

您可以指定固定偏移量，假设您使用的是固定宽度：

```
background: url("http://mediacdn.disqus.com/uploads/users/967/956/avatar92.jpg?1340672375") 
no-repeat 50px bottom; 
```

# magento - 第二个 Magento 商店（多商店）可以只使用第一个商店 /app 和 /skin 下的目录进行设计吗？

> ID：11204808
> 
> 赞同：0
> 
> 时间：2012-06-26T09:54:20.880
> 
> 标签：magento

创建 Magento 多存储时，第二个存储是否可以不只使用以下位置下的目录，或者是否必须创建符号链接（第二个存储确实有它自己的根目录，因为它被创建为附加域）。

```
/app/design/frontend/default/nameofskin
/skin/frontend/default/nameofskin 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:09:59.300

这取决于您的主题`nameofskin`是否回归`default/default`主题。如果不是，那么只需创建自己的包。

```
/app/design/frontend/default/nameofskin --> /app/design/frontend/your-package/default
/skin/frontend/default/nameofskin --> /skin/frontend/your-package/default 
```

然后你可以在你的包中创建额外的主题，比如

```
/app/design/frontend/your-package/second-theme 
```

但跳过为它创建皮肤目录。在这种情况下，它将回退到`default`您的包的主题。

# java - 我如何在项目中使用 i-reports？

> ID：11204813
> 
> 赞同：-1
> 
> 时间：2012-06-26T09:54:30.817
> 
> 标签：java, spring, jasper-reports, struts

我想使用 i-report 获取报告。我是新来的。所以我真的不知道如何在项目中使用 i-report。谁能给我使用 i-report 的建议，或者是否有任何替代报告软件代替 i-report。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:45:58.673

从 iReport 工具设计和创建*.jasper*文件，并将它们保存在服务器计算机的特定位置。在运行时使用这些文件，传递一个数据源对象并使用 JasperExport 导出报告。您的报告将被导出。

为此，首先创建一个 JasperPrint 对象，然后创建一个 JRExporter 对象。这是 PDF 导出的示例代码。

> JasperPrint jasperPrint = JasperFillManager.fillReport(文件名, jasperParam, conn);

```
JRExporter response.setContentType("application/pdf");
            exporter = new JRPdfExporter();
            OutputStream ouputStream = response.getOutputStream();
            exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
            exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, ouputStream);
            exporter.exportReport(); 
```

# ios - startMonitoringSignificantLocationChanges 和 startUpdatingLocation 如何相互影响？

> ID：11204816
> 
> 赞同：17
> 
> 时间：2012-06-26T09:54:38.333
> 
> 标签：ios, ios5, core-location, cllocationmanager

如果我`startUpdatingLocation`在`startMonitoringSignificantLocationChanges`运行时调用会发生什么？是否会停止显着位置更改监视？如果我那么`stopUpdatingLocation`显着的LocationChange监控会继续还是重启？

我找不到涵盖这两种监控位置方式之间相互作用的文档。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-09-24T19:57:31.110

我认为接受的答案并不能真正回答所提出的问题。我做了一些测试，如果你愿意，你可以同时使用它们，它们不会相互抵消。

为什么有人要同时使用两者？因为`startMonitoringSignificantLocationChanges`无需任何后台模式即可将应用程序从暂停或终止中唤醒。因此，如果您同时运行两者，您可以获得准确的前台位置更新和显着的位置更改后台位置更新。

当然，您可以在进入后台时切换方法，但是 a）这不是问题 b）它添加了不需要的逻辑

当然，如果同时运行这两种方法会消耗更多电池，这是一个问题，但我敢打赌它不会。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T16:36:39.653

它们不能同时使用。它是或者因为它们都将标题和位置更改传递给相同的委托方法。

locationManager:didUpdateToLocation:fromLocation

它们在更改的频率和准确性（以及使用的扩展硬件和功耗）方面有所不同。作为开发人员，您需要根据您的用例决定哪个是最好的

我需要在不同时间使用这两种方法。当我从一个切换到另一个时，我设置了一个可以在我的委托中引用的标志，以便我知道更新的类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-03T06:54:35.190

标准位置服务和重大位置变更服务可以一起使用。引用[API 参考](https://developer.apple.com/reference/corelocation/cllocationmanager)：

> 如果两个位置服务同时启用，它们使用相同的委托方法集传递事件。

使用两者的一个很好的理由是标准服务提供了更好的准确性，而重要的位置更改服务即使在您的应用程序暂停时也能正常工作。

# c# - 在 LINQ 中使用字符串作为字段名

> ID：11204817
> 
> 赞同：9
> 
> 时间：2012-06-26T09:54:38.710
> 
> 标签：c#, linq, linq-to-sql, linq-to-objects

看下面的代码。我想用`USERNAME`参数中收到的字段名称替换`field`。此方法必须能够在多个字段上进行一些搜索。

谢谢，

```
public void Searching(string field, string stringToSearch)
{
    var res = 
        from user in _dataContext.USERs where 
        user.USERNAME.Contains(stringToSearch)
        select new 
        {
          Id = user.ID,
          Username = user.USERNAME
        };

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T10:06:40.500

您需要忘记匿名类型，也许`Tuple<int,string>`改用；但是：怎么样：

```
IQueryable<Foo> source = // YOUR SOURCE HERE
      // in-memory dummy example:
      // source = new[] {
      //    new Foo {Id = 1, Bar = "abc"},
      //    new Foo {Id = 2, Bar = "def"}
      // }.AsQueryable();

string field = "Bar";
string stringToSearch = "d";
var param = Expression.Parameter(typeof (Foo), "x");
var predicate = Expression.Lambda<Func<Foo, bool>>(
    Expression.Call(
        Expression.PropertyOrField(param, field),
        "Contains", null, Expression.Constant(stringToSearch)
    ), param);
var projection = Expression.Lambda<Func<Foo, Tuple<int, string>>>(
    Expression.Call(typeof(Tuple), "Create", new[] {typeof(int), typeof(string)},
        Expression.PropertyOrField(param, "Id"),
        Expression.PropertyOrField(param, field)), param);
Tuple<int,string>[] data = source.Where(predicate).Select(projection).ToArray(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T10:08:09.983

事实上，可以使用 Expression API：

```
public void Searching(Expression<Func<User,string>> field, string stringToSearch)
{

   var call = Expression.Call(field.Body, typeof (string).GetMethod("Contains"), new[] {Expression.Constant(value)});
   Expression<Func<User, bool>> exp = Expression.Lambda<Func<User, bool>>(Expression.Equal(call, Expression.Constant(true)), field.Parameters);

    var res =  _dataContext.USERs.Where(exp).Select(u=>new { id= u.ID, Username = u.USERNAME});

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T09:58:52.063

你正在尝试的是不可能的。但是，您可以使用[动态 linq 库](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)来实现您想要的

# php - PHP、XML如何获取属性？

> ID：11204818
> 
> 赞同：2
> 
> 时间：2012-06-26T09:54:42.140
> 
> 标签：php, xml, dom

我正在尝试从以下 xml 返回标签`SECTION`属性的值：`INTRO`

myxml.xml 示例：

```
<INTRO SECTION="ONE">
  <TEXT>Hello</TEXT>
</INTRO>
<INTRO SECTION="TWO">
  <TEXT>Goodbye</TEXT>
</INTRO> 
```

我的PHP：

```
$doc = new DOMDocument();
$doc->load('myxml.xml');
$intros = $doc->getElementsByTagName("INTRO");

foreach( $intros as $intro ) {
echo $intro ->get_attribute('SECTION');
} 
```

我收到以下错误：

> 调用未定义的方法 DOMElement::get_attribute()

有谁知道我做错了什么？向任何响应者致以亲切的问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T09:57:06.397

[`DOMElement::getAttribute()`](http://php.net/domelement.getattribute)

```
$intro ->getAttribute('SECTION'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:00:21.250

尝试这个：

```
 $xml = simplexml_load_file($file);
   ....
  $attr=$intro->attributes();
  echo $attr['SECTION']; 
```

# php - 检查是否使用 JQuery 选择了所有 HTML Select

> ID：11204819
> 
> 赞同：0
> 
> 时间：2012-06-26T09:54:49.627
> 
> 标签：php, jquery, html

我有一个带有多个输入的 HTML 表单，其中一些是“选择”...所有输入都是强制性的，因此我需要检查所有输入是否都有值...为此，所有“选择”元素都有默认选择 value=0 的“nd”选项......并且“保存”按钮被“禁用”..

我想使用 JQuery 来检查所有“选择”是否有一个选项“选择”，其值不同于 0，如果是，则“启用”“保存”按钮......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:03:23.560

```
var allSelect = $('select').filter(function() {
    return this.value != 0 ;
}).length === $('select').length;
$(':submit').prop('disabled', !allSelect); 
```

**[工作样本](http://jsfiddle.net/u8MPr/6/)**

# jquery - 提交和计算

> ID：11204823
> 
> 赞同：0
> 
> 时间：2012-06-26T09:55:00.977
> 
> 标签：jquery, forms, submit, field

html

`

```
 <fieldset id="persoon">
  <legend>mijn gegevens</legend>
 <table>

<tbody><tr>
 <td>
  <label for="bg">Auto gebruik   1 op</label>
  </td>
  <td>
   <input id="bg" name="bg" size="30" type="number" placeholder="Benzine gebruik?">
  </td>
 </tr>

<tr>
  <td>
   <label for="kilometer">kilometer per jaar</label>
   </td>
   <td>
     <input id="kilometer" z="" name="kilometer" size="30" type="number" placeholder="ex: 120000 km/pj">
    </td>
  </tr>
  <tr>
      <td>
    <label for="benzine">prijs benzine </label>
    </td>
    <td>
    <input id="benzine" name="benzine" size="30" type="number">
    </td>
  </tr>
  <tr>
  <td>
  <input id="submit" type="submit" value="bereken"> </td><td>
  </td></tr>
  <tr>
      <td>
    <label for="berekening">Besparing </label>
    </td>
    <td>
    <input id="berekening" name="berekening" size="30" type="number">
    </td>
  </tr> 
```

`

Javascript/Jquery

```
$('#submit').click(function(evt) {
evt.preventDefault(); // this will prevent the form from being submitted
var bg = parseFloat($('#bg').val());  // parseFloat for floating point
var bf = parseFloat($('#kilometer').val());
var bd = $('bf').val($('bf').val() + $('bf').val() / bg);
var bz = parseFloat($('#benzine').val());
var total = bz * bd ;
total = total.toFixed(2);

}); 
```

好的，所以我想要完成的是有人填写表格：

```
 1: howmany kilometers on 1 liter gas
  2: howmany kilometers you drive a year
  3: howmuch the gas costs
         submit
  4:calculation 
```

有人输入他们的东西后，您按“bereken”，它应该计算所有内容并将其放在“besparing”输入字段中，但它不起作用，我找不到任何人来帮助我。

我对此很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:02:48.757

你可以这样做：

```
$('#submit').click(function(evt) {
   evt.preventDefault(); // this will prevent the form from being submitted
   // your calculations here
}); 
```

无需更新，`.blur()`您可以在`click`函数中完成所有操作 - 这样您就不会不必要地使用变量填充全局命名空间

我不确定你的计算是否正确 - 你可能想检查它`.val()`是否返回一个数字......看看[`parseFloat`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)，[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)即

```
var bg = $('#bg').val(); 
```

应该

```
var bg = parseFloat($('#bg').val());  // parseFloat for floating point 
```

这个

```
var bd = $('#bf').val(+$('bf').val() / bg); 
```

不会工作 - 你需要做类似的事情

```
var bd = $('#bf').val($('#bf').val() + $('bf').val() / bg); 
```

我建议您首先获取所有值

```
var bd = parseFloat($('#bf').val());
var km = parseFloat($('#kilometer').val());
var bf = parseFloat($('#bf').val());
var bg = parseFloat($('#bg').val()); 
```

然后使用变量来计算（例如）

```
var total = bd + km; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:58:28.583

使用输入类型按钮而不是输入类型提交。提交用于提交表单。

而不是 .submit 在你的 jquery 中使用 .click

编辑：此外，从 html 输入中检索值的代码需要在函数中，否则 javascript 中的这些值将不会更新。

伪代码

```
1\. Create function which is call on click using javascript .click function
2\. Add in code that retreieves values from fields inside this click function
3\. Calculate
4\. Output result 
```

这一切都应该在一个函数内完成。

# mysql - MySQL 查询完整性检查，用于更新查询

> ID：11204825
> 
> 赞同：0
> 
> 时间：2012-06-26T09:55:07.180
> 
> 标签：mysql

我有这个查询

```
update user_remember_me set
when='2012-07-06 05:44:27',
hash='c8e9d2c0dd156b5c68d0b048e5daa948e6b8fac7'
where user = '21'; 
```

我收到了这个错误

> > 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'when='2012-07-06 05:44:27', hash='c8e9d2c0dd156b5c68d0b048e5daa948e6b8fac7' wher' 附近使用正确的语法

我没有错过这里的连接，我已经在任何地方都使用了这样的简单更新，直到这没有问题，也许我累了，但这会让我发疯，直到我有答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:56:12.950

when 是 mysql 中的关键字，更改列名或者可以将其用作

```
`when`='2012-07-06 05:44:27' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T09:56:47.277

`when`是[mysql中的保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

```
update user_remember_me set
`when`='2012-07-06 05:44:27',
`hash`='c8e9d2c0dd156b5c68d0b048e5daa948e6b8fac7'
where user = '21'; 
```

所以你必须反引号你的列

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:57:53.857

`when`是 MySQL 中的关键字。如果要将其用作列标识符，则必须对其进行转义（就像所有列标识符一样！）：

```
UPDATE user_remember_me 
SET
  `when`='2012-07-06 05:44:27',
  `hash`='c8e9d2c0dd156b5c68d0b048e5daa948e6b8fac7'
WHERE `user` = '21'; 
```

# bash - bash：如何展平文本文件中的列？

> ID：11204826
> 
> 赞同：1
> 
> 时间：2012-06-26T09:55:08.060
> 
> 标签：bash, text

我有一个这样的文件：

```
foo, bar, foo1
bar, foo
foo 
```

我想要这样：

```
foo
bar
foo1
bar
foo
foo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:01:31.003

```
cat file | tr ' ' '\n' | tr -d , 
```

如果要删除流中的空行，只需添加`| grep -xv ''`

如果你的意思是*列*用 分隔`,`，你可以使用类似的东西：

```
cat file.txt | sed 's/, /\n/g' 
```

我必须注意，这在 Mac OS X 中不起作用（感谢 Frost 的提示）。当您在 Mac OS X 中时，您必须使用另一种不太好的结构：

```
cat file.txt | sed -e 's/, /\'$'\n/g' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:02:16.943

这段代码

```
awk -F ', ' '{for(i=1;i<=NF;i++) print $i}' file.txt 
```

适用于您给出的示例（如果逗号不总是跟在空格后面，则可能会有些复杂）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T10:04:34.680

```
sed -e 's/, /\                                                                                                                                                                        
/g' file.txt 
```

# java - JMX 操作可以将接口作为参数吗？

> ID：11204830
> 
> 赞同：0
> 
> 时间：2012-06-26T09:55:34.417
> 
> 标签：java, jmx, mbeans

我遇到了`MBean`将 a`Map<String, Object>`作为参数的问题。如果我尝试使用代理对象通过 JMX 执行它，我会得到一个异常：

```
Caused by: javax.management.ReflectionException
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:231)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
Caused by: java.lang.IllegalArgumentException: Unable to find operation updateProperties(java.util.HashMap) 
```

它似乎试图使用实际的实现类而不是接口，并且不检查这是否是所需接口的子接口。扩展类也会发生同样的事情（例如 declare `HashMap`、 pass in `LinkedHashMap`）。这是否意味着不可能为这些方法使用接口？目前我正在通过将方法签名更改为接受 a 来解决它`HashMap`，但我无法在我的`MBeans`.

编辑：代理对象是由一个名为`JmxInvocationHandler`. 它的（希望）相关部分如下：

```
public class JmxInvocationHandler implements InvocationHandler
{
    ...
    public static <T> T createMBean(final Class<T> iface, SFSTestProperties properties, String mbean, int shHostID)
    {
        T newProxyInstance = (T) Proxy.newProxyInstance(iface.getClassLoader(), new Class[] { iface }, (InvocationHandler) new JmxInvocationHandler(properties, mbean, shHostID));
        return newProxyInstance;
    }
    ...
    private JmxInvocationHandler(SFSTestProperties properties, String mbean, int shHostID)
    {
        this.mbeanName = mbean + MBEAN_SUFFIX + shHostID;
        msConfig = new MsConfiguration(properties.getHost(0), properties.getMSAdminPort(), properties.getMSUser(), properties.getMSPassword());
    }
    ...
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable
    {
        if (management == null)
        {
            management = ManagementClientStore.getInstance().getManagementClient(msConfig.getHost(),
                    msConfig.getAdminPort(), msConfig.getUser(), msConfig.getPassword(), false);
        }

        final Object result =  management.methodCall(mbeanName, method.getName(), args ==  null?  new Object[] {} : args);
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:38:27.877

知道了。JMX 调用有时会成为最好的实用程序类的炮灰.... :)

我怀疑这个人是个问题：

```
public Object invoke(Object proxy, Method method, Object[] args) throws Throwable
    {
        if (management == null)
        {
            management = ManagementClientStore.getInstance().getManagementClient(msConfig.getHost(),
                    msConfig.getAdminPort(), msConfig.getUser(), msConfig.getPassword(), false);
        }

        final Object result =  management.methodCall(mbeanName, method.getName(), args ==  null?  new Object[] {} : args);
        return result;
    } 
```

因为 MBean 的操作签名（它不关心继承）是由传递参数的类确定的。由于您无法传递`getClass()`将返回的实际具体对象，因此`java.util.Map`您永远不会使用参数本身的直接类型进行匹配。（出于同样的原因，原语也会出现类似的问题）。

请参阅此[博客文章，以“](http://seeallhearall.blogspot.com/2012/01/groovymx-groovy-jmx-client.html)*制作 MetaMBean 的棘手部分之一*”开头的段落开头，因为它更详细地解释了这个问题（或我认为您遇到的问题），但是[MBeanServer的](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanServer.html)[调用](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanServer.html#invoke%28javax.management.ObjectName,%20java.lang.String,%20java.lang.Object%5B%5D,%20java.lang.String%5B%5D%29)方法[连接]是：

```
invoke(ObjectName name, String operationName, Object[] params, String[] signature) 
```

前 2 个和最后一个参数是导航性的，因为它们准确地指定了应该调用服务器中发布的所有操作中的哪个操作。回避这个问题的最好方法是避免不得不“猜测”签名并且只依赖 ObjectName 和操作名称，而这又可以通过询问（并且可能缓存）目标 MBean的[MBeanInfo](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanInfo.html)和[MBeanOperationInfo](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanOperationInfo.html)来完成. MBeanOperationInfos 将为您提供签名，因此您不必猜测。

如果这确实是您的问题，有几种方法可以解决它：

1.  如果 MBean 的操作名称是唯一的（即没有重载），那么您可以只使用操作名称来检索 MBeanInfo。
2.  如果 MBean 的操作被重载（即有多个具有相同名称但参数不同的操作）......但它们都有不同的参数计数，那么您可以通过迭代 MBeanOperationInfos 中所有匹配的操作名称来轻松确定正确的签名和按参数计数匹配。
3.  如果 #1 和 #2 不适用....那么这很棘手，我将重新评估您的 MBean 代码的方法签名。
4.  如果 #1 和 #2 不适用且 #3 不符合，请查看[Gmx](https://github.com/nickman/GroovyMX#readme)中名为[MetaMBean](https://github.com/nickman/GroovyMX/blob/master/gmx/src/main/java/org/helios/gmx/MetaMBean.java)的此类。在最新版本中，它使用 Groovy 创建编译运行时接口，使用 MBean 的 MBeanInfo 使继承（和自动装箱）在方法调用中起作用。相同的方法可以在 JavaScript（其优点是内置于 Java 6+）或其他几种 JVM 脚本语言中实现。或者，看看[以前的版本](https://github.com/nickman/GroovyMX/blob/6f6c1fe875216a85786e8d0b7d58a7f03522e70c/gmx/src/main/java/org/helios/gmx/Gmx.java)，它试图对已知的操作签名进行模式匹配（实际上工作得很好，但因为我一直在使用 Groovy ......）

我希望这是有帮助的。如果事实证明这不是根本原因，那么忘记我说了什么......

# iphone - 缩放背景图像而不缩放叠加层

> ID：11204837
> 
> 赞同：0
> 
> 时间：2012-06-26T09:56:01.677
> 
> 标签：iphone, ios, image, zooming

我是 iOS 开发的初学者，我正在尝试显示需要可缩放和可平移的图像（实际上是地图）。我的问题是我不知道如何添加将跟随平移以始终表示相同位置的叠加层，但不会被缩放缩放。会有多个叠加层，每个叠加层都必须是可点击的。

为了缩放和平移图像（地图），我`UIImageView`在 a 中添加了我的`UIScrollView`，效果很好，但我不知道如何添加此功能。

我找到了这个线程，但由于他的叠加层是静态的，所以这并不是同一个问题： [UIScrollview with two images - Keeping 1 image zoomable and 1 image static (fixed size)](https://stackoverflow.com/questions/2688789/uiscrollview-with-two-images-keeping-1-image-zoomable-and-1-image-static-fixe)

我在android中开发了相同的应用程序，为了完成这项工作，由于转换矩阵，我将地图的像素转换为屏幕坐标，并且我覆盖了onDraw方法来显示它，但我不知道如何在 iOS 上做同样的事情，我不知道这是否是更好的解决方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:58:02.763

好的，所以我找到了一种方法，如果它可以帮助任何人：

我在滚动视图中添加了我的叠加层，带有背景图像（地图）。

```
+CustomScrollView
----> UIImageView (map)
----> OverlayImageView (overlay) 
```

为了缩放，自定义滚动视图需要一个具有以下方法的委托：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    //The background image with the map
    return mapView;
}

//When a zoom occurs, move the overlay
- (void)scrollViewDidZoom:(UIScrollView *)scrollView {
    UIImageView* overlayView = [scroll.subviews objectAtIndex:1];
    float x;
    float y;
    float width;
    float height;

    //keep the width and height of the overlay
    width = overlayView.frame.size.width;
    height = overlayView.frame.size.height;
    //Move it to stay over the same pixel of the map, and centers it
    x = (self.overlay.point.x * scroll.zoomScale - width/2);
    y = (self.overlay.point.y * scroll.zoomScale - height/2);

    overlayView.frame = CGRectMake(x,y,width,height);
} 
```

有了这个，我们说缩放只发生在背景图像上，但由于覆盖在 中`UIScrollView`，它会随之平移。所以我们唯一需要关心的是在缩放变化时移动Overlay，我们通过`scrollViewDidZoom`方法知道它。

为了处理触摸事件，我们覆盖了`touchEnded:withEvent:`of `CustomScrollView`，如果只有一次点击，我们将其转发到覆盖层。我没有展示，`OverlayImageView`因为它只覆盖这个相同的方法 ( `toucheEnded:withEvent:`) 来处理它的触摸。

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch* touch = [touches anyObject];
    // Coordinates in map view
    CGPoint point = [touch locationInView:[self.subviews objectAtIndex:0]];

    //forward
    if(touch.tapCount == 1){
        OverlayImageView* overlayView = [self.subviews objectAtIndex:1];
        CGPoint newPoint = [touch locationInView:overlayView];

        BOOL isInside = [overlayView pointInside:newPoint withEvent:event];

        if(isInside){
            [overlayView touchesEnded:touches withEvent:event];
        }
    }
    // zoom
    else if(touch.tapCount == 2){

        if(self.zoomScale == self.maximumZoomScale){
            [self setZoomScale:[self minimumZoomScale] animated:YES];
        } else {
            CGRect zoomRect = [self zoomRectForScrollView:self withScale:self.maximumZoomScale withCenter:point];            

            [self zoomToRect:zoomRect animated:YES];
            //[self setZoomScale:[self maximumZoomScale] animated:YES];
        }

        [self setNeedsDisplay];

    }
} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:01:07.677

您可以将 imageView 作为叠加层放在顶部，并将其 userInteractionEnabled 属性设置为 NO。然后你必须以编程方式平移它。

# php - 用 "%s\t,\t 定义 fscanf 的格式

> ID：11204839
> 
> 赞同：0
> 
> 时间：2012-06-26T09:56:08.703
> 
> 标签：php

嘿伙计们希望你能帮助我

我对 php 比较陌生，并试图读取这样格式化的文件

```
asdf    ,   asdf    ,   asdf 
```

即一个字符串后跟一个制表符、逗号和另一个制表符，然后是另一个字符串，后跟一个制表符、一个逗号和另一个制表符，然后是另一个字符串，然后是行尾（如果还有另一行）。

我正在学习正则表达式（从这里[http://weblogtoolscollection.com/regex/regex.php](http://weblogtoolscollection.com/regex/regex.php)）但不认为他们在 fscanf 中应用正则表达式？

基本上我的代码是

```
$file=fopen("sites.txt","r");
while($line=fscanf($file,"...")){
    list($a,$b,$c)=$line;
echo "$a    $b    $c   <br>";

} 
```

所以基本上我想要关于应该用什么来代替“......”的帮助，以及关于它的工作原因的解释，我已经用谷歌搜索了很长一段时间，但似乎找不到我正在寻找的东西。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:04:58.520

[`fgets`](http://php.net/manual/en/function.fgets.php)在这种情况下使用。它对于逐行读取文件很有用。使用[`explode`](http://php.net/manual/en/function.explode.php)函数提取列值（`preg_split`如果分隔符太花哨则使用）：

```
$file = fopen("sites.txt", "r");
while(($line = fgets($file)) !== false) {
    list($a, $b, $c) = explode("\t,\t", $line, 3);
    echo "$a $b $c<br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:10:41.233

使用 fgetcsv() 拆分您在逗号上读取的每一行，然后遍历结果数组以修剪标签

```
$file = fopen("sites.txt", "r"); 

function myTrim(&$item) {
    $item = trim($item);
}

while(($line = fgetcsv($file)) !== false) { 
    array_walk($line,'myTrim');
    list($a, $b, $c) = $line; 
    echo "$a $b $c<br>"; 
} 
```

或者

```
$file = fopen("sites.txt", "r"); 
while(($line = fgetcsv($file)) !== false) { 
    array_walk($line,
        function (&$item) {
            $item = trim($item);
        }
    );
    list($a, $b, $c) = $line; 
    echo "$a $b $c<br>"; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:54:37.810

您可以使用正则表达式：

```
<?php
$matches = array();
preg_match_all("/(.+),(.+),(.+)/i",file_get_contents('sites.txt'),$matches);

foreach($matches[0] as $key=>$val){
  print "{$matches[1][$key]}  {$matches[2][$key]} {$matches[3][$key]}<br />";
} 
```

# plsql - 同一个 THEN 块的多个 WHEN 条件

> ID：11204848
> 
> 赞同：1
> 
> 时间：2012-06-26T09:56:43.133
> 
> 标签：plsql

我想在 java 或 c++ 中的语句时使用 pl/sql case。我应该组合多个 when 条件相同的 then 阻塞。

例子：

```
case
  when l_var = 1 then
  when l_var2 = 2 then
    DBMS_OUTPUT.PUT_LINE('true');
  else
    DBMS_OUTPUT.PUT_LINE('false');
end case; 
```

我知道我可以在 when 条件下使用 AND 或 OR，但这很难看。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:44:32.633

丑陋在旁观者的眼中。我只是看看那个语法，然后想，“缺少一些代码”。

我真的不知道你在期待什么。[PL/SQL CASE() 语法](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/case_statement.htm#i36967)不能按您希望的方式工作。因此，您的选择是使用显式 BOOLEAN 逻辑、部署嵌套条件或选择不同的编程语言。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-26T09:59:04.530

重用相同的代码或使用 goto 语句[http://php.net/manual/en/control-structures.goto.php](http://php.net/manual/en/control-structures.goto.php)

# c++ - 在 C++ 中将日期和时间字符串转换为整数

> ID：11204853
> 
> 赞同：0
> 
> 时间：2012-06-26T09:56:55.337
> 
> 标签：c++

如何转换

std::string strdate = "2012-06-25 05:32:06.963";

对于这样的事情

std::string strintdate = "20120625053206963" // 基本上我删除了 -、:、空格和 .

我想我应该使用 strtok 或字符串函数，但我做不到，任何人都可以在这里帮助我提供示例代码。

这样我就可以通过使用将其转换为无符号的 __int64

```
// crt_strtoui64.c
#include <stdio.h>

unsigned __int64 atoui64(const char *szUnsignedInt) {
   return _strtoui64(szUnsignedInt, NULL, 10);
}

int main() {
   unsigned __int64 u = atoui64("18446744073709551615");
   printf( "u = %I64u\n", u );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:05:15.970

```
bool nondigit(char c) {
    return c < '0' || c > '9';
}

std::string strdate = "2012-06-25 05:32:06.963";
strdate.erase(
    std::remove_if(strdate.begin(), strdate.end(), nondigit),
    strdate.end()
);

std::istringstream ss(strdate);
unsigned __int64 result;
if (ss >> result) {
    // success
} else {
    // handle failure
} 
```

顺便说一句，您作为 64 位 int 的表示可能有点脆弱。确保日期/时间`2012-06-25 05:32:06`输入为`2012-06-25 05:32:06.000`，否则最后得到的整数小于预期（因此可能会混淆公元 2 年的日期/时间）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:11:12.543

如果您的编译器支持 C++11 功能：

```
#include <iostream>
#include <algorithm>
#include <string>

int main()
{
    std::string s("2012-06-25 05:32:06.963");
    s.erase(std::remove_if(s.begin(),
                           s.end(),
                           [](const char a_c) { return !isdigit(a_c); }),
            s.end());
    std::cout << s << "\n";
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:02:47.287

使用字符串替换将不需要的字符替换为没有字符 [http://www.cplusplus.com/reference/string/string/replace/](http://www.cplusplus.com/reference/string/string/replace/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:28:01.883

```
std::string strdate = "2012-06-25 05:32:06.963";
std::string result ="";
for(std::string::iterator itr = strdate.begin(); itr != strdate.end(); itr++)
{
    if(itr[0] >= '0' &&  itr[0] <= '9')
    {
        result.push_back(itr[0]);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T10:06:18.597

干得好：

```
bool not_digit (int c) { return !std::isdigit(c); }

std::string date="2012-06-25 05:32:06.963";
// construct a new string
std::string intdate(date.begin(), std::remove_if(date.begin(), date.end(), not_digit)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T10:09:04.977

我不会使用strtok。这是一个相当简单的方法，它只使用`std::string`成员函数：

```
std::string strdate = "2012-06-25 05:32:06.963";
size_t pos = strdate.find_first_not_of("1234567890");
while (pos != std::string::npos)
{
    size_t endpos = strdate.find_first_of("1234567890", pos);
    strdate.erase(pos, endpos - pos);
    pos = strdate.find_first_not_of("1234567890");
} 
```

这不是一种超级有效的方法，但它会起作用。

一种可能更有效的方法可能是使用字符串流......

```
std::string strdate = "2012-06-25 05:32:06.963";

std::stringstream out;

for (auto i = strdate.begin(); i != strdate.end(); i++)
    if (std::isdigit(*i)) out << *i;

strdate = out.str(); 
```

我没有承诺时间或空间的复杂性，但我怀疑`string::erase`多次使用可能会涉及更多的内存洗牌。

# bash - 通过 shell 脚本控制串口

> ID：11204860
> 
> 赞同：2
> 
> 时间：2012-06-26T09:57:24.807
> 
> 标签：bash, serial-port

我正在开发一个方向控制器。我有一个通过 I2C 与传感器（指南针）通信的开发板。因为电路板非常有限（没有操作系统），我开发了一个简单的程序来接收以下内容：（1）“获取 0”来读取传感器的寄存器 0；(2) 'set 0 10' 将传感器的寄存器 0 设置为值 10。对于每种情况，板返回：(1) 'Done: 10'。（寄存器 0 的值为 10）；(2) “完成”；(3) 'error: ...' 如果出现错误。有了这个，我正在尝试开发一个 shell 脚本（bash）来发送命令和检索数据，以便了解传感器并开发控制器。

我的问题是以下代码：

```
# read device output in the background.
head -n 1 /dev/ttyUSB0 &
head=$!

# (#1): without the following stmt I get:
#   head: cannot open `/dev/ttyUSB0' for reading: : Protocol error
sleep 0.1

# send command to the device.
echo "get 0" > /dev/ttyUSB0

# (#2) wait for head.
while kill -0 $head 2>/dev/null ; do : ; done 
```

我猜（#1）是由“head”和“echo”之间的读/写冲突引起的，但我不知道为什么，也不知道如何解决它。

另一个问题是在 (#2) 中我想使用超时。我试过类似的东西：

```
timeout 1 bash -c "while kill -0 $head 2>/dev/null ; do : ; done" 
```

但我明白`Timeout: aborting command ``bash'' with signal 9`了：程序卡住了。

顺便说一句，在执行上面的代码之前，我确实初始化了串行端口：

```
stty -F /dev/ttyUSB0 9600 cs8 -cstopb 
```

编辑：我不想要交互式终端。我想根据需要使用这个例程。该例程是控制器（读/写传感器的寄存器）的必要基础，稍后将在板上实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:34:58.743

为了解决（＃1）我修改了例程以使用fd：

```
# $1: the device filename, eg. /dev/ttyS0
# $2: number of lines to read before exit.

exec 3<>$1

head -n "$2" 0<&3 &
wait_pid=$!

cat - 1>&3

wait $wait_pid

exec 3>&- 
```

**编辑**：为了解决（＃2），我没有为例程提供超时支持，而是将该责任委托给调用者。但是，在超时的情况下，我们需要清理。为此，我在之后添加了以下内容`wait_pid=$!`：

```
trap="if kill -0 $wait_pid ; then kill -TERM $wait_pid ; fi"
trap "$trap" SIGINT SIGKILL SIGTERM 
```

# json - Jersey - 用于 GET 和 PUT 的 Json 库

> ID：11204862
> 
> 赞同：0
> 
> 时间：2012-06-26T09:57:32.200
> 
> 标签：json, rest, jersey

为什么我需要客户端的 json jersey 依赖项

```
service.path("rest").path("object").path(id).accept(MediaType.APPLICATION_JSON).get(ObjectDTO.class); 
```

但不是为了

```
service.path("rest").path("object").path(id).accept(MediaType.APPLICATION_JSON).put(ClientResponse.class, object); 
```

服务器端如下所示：

```
@GET
@Path("/{objectId}")
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
...

@PUT
@Path("/{objectId}")
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})

... 
```

在第一种情况下，我得到一个 json 流，在第二种情况下，我发送一个流。那么为什么我只需要这些库来获取流呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T12:29:54.370

行。这是由接受标头引起的：对于我的 put 请求，没有必要设置它。

# sql - 在跨多个数据库的其他视图上使用 UNION ALL 的视图条件

> ID：11204869
> 
> 赞同：1
> 
> 时间：2012-06-26T09:57:51.353
> 
> 标签：sql, sql-server-2008-r2

我有九个代表公司的不同数据库，都在同一台 SQL Server 2008 机器上。

在每个公司数据库中，都有一个名为 gltrxdet_vw 的视图。这是跨多个表定义的，我可以做一个

```
SELECT x, y, z, SUM(amt) AS amt_ 
FROM gltrxdet_vw
WHERE trxdate BETWEEN '2012-04-01' AND '2012-04-30'
GROUP BY x, y, z 
```

由于基于 trxdate 的表上的索引，它非常快速地返回结果。

对于我们的合并账户，我们需要对九家公司进行分组，所以我的计划是创建一个有效的视图

```
CREATE VIEW mcomp_gltrxdet_vw AS
 SELECT x, y, z, trxdate, amt
 FROM companydb1..gltrxdet_vw
  UNION ALL
 SELECT x, y, z, trxdate, amt
 FROM companydb2..gltrxdet_vw
  UNION ALL
...
  UNION ALL
 SELECT x, y, z, trxdate, amt
 FROM companydb9..gltrxdet_vw 
```

所以理论上现在我可以写一个查询

```
SELECT x, y, z, SUM(amt) AS amt_
FROM mcomp_gltrxdet_vw
WHERE trxdate BETWEEN '2012-04-01' AND '2012-04-30'
GROUP BY x, y, z 
```

x、y 和 z 是具有事务信息的字段（实际上会有更多这些字段和更复杂的 WHERE 条件传递给查询，但出于说明的目的，我希望以上内容就足够了）

我的问题是：在合并结果之前，SQL Server 是否会一次将 WHERE 条件正确应用于基础视图？或者，在应用 trxdate 过滤器之前，它是否会花费很长时间来构建一个巨型表？我的表中的数据很少，我无法确定这个解决方案是否能正确扩展。我在不同的数据库中查询有什么不同吗？

在相关说明中，我确信其中一些响应将是检查查询计划 - 任何人都可以链接到一个体面的教程，说明在哪里可以找到这些工具/如何使用它们？被 SSMS 深陷其中（更习惯于 MySQL 命令行！）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:42:40.303

基本上，视图中的这种 union-all 模式就是所谓的（分布式）分区视图，SQL Server 对它有很好的支持。查询优化器会很好地处理这个问题。

无论如何，我建议您查看[执行计划](http://msdn.microsoft.com/en-us/library/ms178071%28v=sql.105%29.aspx)以确保。我在此答案的评论中添加了 Ed Harper 给出的链接，因为它很有帮助。

# git - 在 gitweb 安装中看不到分支

> ID：11204877
> 
> 赞同：1
> 
> 时间：2012-06-26T09:58:19.833
> 
> 标签：git, gitweb

我正在运行 gitweb，没有任何类似 gitolite 或 gitosis 之类的东西。

我的项目显示良好，但我的分支都没有。我只能看到“主人”。

是否有某种文件我需要编辑才能显示？

这是apache配置：

```
<VirtualHost *:80>
    SetEnv GITWEB_CONFIG /etc/gitweb.conf
    ServerName git.server.be
    DocumentRoot /usr/share/gitweb
    AliasMatch ^(/.*?)(\.git)(/.*)? /home/gitadmin$1$3
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T15:42:31.493

由于您的 apache 配置文件，Gitweb 设置没有向您显示分支。您只是没有看到项目摘要页面上有一个名为标签和标题的部分。

从那里，您应该能够选择要查看的标签或分支，并查看该分支中的那些提交。但是，我看不到某些人期望并从 gitk 中得到什么，您可以在统一视图中看到所有分支及其提交。在查看所述提交时，我也没有在提交本身的任何地方看到一个视觉指示器，它告诉您任何提交所在的分支。

希望这会有所帮助，我希望这对于您的 gitweb 安装是准确的。

# java - JOptionPane showConfirmDialog 只有一个按钮

> ID：11204878
> 
> 赞同：16
> 
> 时间：2012-06-26T09:58:21.753
> 
> 标签：java, swing, joptionpane

我只需要一个按钮`showConfirmDialog`。

我试过这个：

```
int response = JOptionPane.showConfirmDialog(null, "Time Entered Successfully",
                   "", JOptionPane.OK_OPTION, JOptionPane.PLAIN_MESSAGE);

if (response == JOptionPane.CLOSED_OPTION || response == JOptionPane.OK_OPTION)
{
   System.out.println("CLOSING>>>>>>");
} 
```

但这会显示带有 Yes_No_option 的对话框。

我只想在那里显示确定按钮。是否可以？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-14T15:47:25.987

尝试使用它，它只创建一个按钮

```
JOptionPane.showMessageDialog(null, "Loading Complete...!!!"); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-26T10:02:54.090

> 我只想在那里显示确定按钮。是否可以？

使用[showOptionDialog()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showOptionDialog%28java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int,%20int,%20javax.swing.Icon,%20java.lang.Object%5B%5D,%20java.lang.Object%29)方法。

```
 Object[] options = {"OK"};
    int n = JOptionPane.showOptionDialog(frame,
                   "Message here ","Title",
                   JOptionPane.PLAIN_MESSAGE,
                   JOptionPane.QUESTION_MESSAGE,
                   null,
                   options,
                   options[0]); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-12-12T21:10:36.957

这是`JOptionPane.DEFAULT_OPTION`

```
JOptionPane.showConfirmDialog(null,
                "MESSAGE",
                "TITLE",
                JOptionPane.DEFAULT_OPTION,
                JOptionPane.PLAIN_MESSAGE); 
```

# android - 打算创建或删除文件？

> ID：11204879
> 
> 赞同：2
> 
> 时间：2012-06-26T09:58:21.987
> 
> 标签：android, file, android-intent, delete-file, createfile

我想在我的 android 文件管理器中实现搜索功能。所以我想做的是将所有文件路径存储在我的应用程序数据库中，并从那里查询。

但问题是在使用文件路径初始化数据库后，如果文件路径中有修改，例如文件被删除，那么有没有办法知道？有没有被解雇的意图？

# yii - Yii CActiveDataProvider 加入并从加入的表中选择

> ID：11204887
> 
> 赞同：0
> 
> 时间：2012-06-26T09:58:47.820
> 
> 标签：yii

我有以下示例代码：

```
 $dataProvider = new CActiveDataProvider('firstTable', 
                    array('criteria' => array(
                        'select' => 't.firstfield,secondTable.secondfield',
                        'join' => 'join secondTable on secondTable.id=t.secondTable_id',
                    ),
                    'pagination' => array(
                        'pageSize' => 10,
                    ),
                ));
                $results=$dataProvider->getData(); 
```

运行上述代码后，对象中的 firstField（来自模型表 - firstTable）可用，但 secondField（来自连接表 - secondTable）不可用。

任何人都可以就代码有什么问题或为什么“选择”选项没有选择第二个字段提供帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T10:13:36.283

如果你使用 CDbCriteria 会更好，它有一个更好的解决方案，可以在关系的帮助下加入表。我可以用 CDbCriteria 来展示这个例子。

```
$criteria = new CDbCriteria;
$criteria->select = 'firstfield';
$criteria->with = array('secondTable_relation'=>array('select'=>'secondfield'));
$dataProvider = new CActiveDataProvider('firstTable', 
                    array('criteria' => $criteria,
                    'pagination' => array(
                        'pageSize' => 10,
                    ),
                ));
                $results=$dataProvider->getData(); 
```

secondTable_relation 是与 secondTable 的关系名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:24:44.517

> 任何人都可以就代码有什么问题或为什么“选择”选项没有选择第二个字段提供帮助吗？

### 回答：

发生这种情况是因为您没有选择与两个表相关的字段，即 firstTable 中的外键：`secondTable_id`。所以如果你这样做：

```
'select' => 't.firstfield,t.secondTable_id,secondTable.secondfield', 
```

您将能够访问 secondTable 的 secondField：

```
$singleresultrow->secondTableRelationName['secondField'];// a single result row can be obtained by foreach iteration over $results 
```

但是，当您访问 secondField 时，仍然会有另一个查询（**延迟加载）。**并且返回的初始（延迟之前）对象不会填充 secondTable 对象。

我认为的问题在于，**默认情况下**yii 通过延迟加载访问相关字段，为此，相关的*foreign_key*应该存在于您尝试创建数据提供者的模型中，这里是 firstTable，并且外键`secondTable_id`。

# windows - 如何打开 .msu 扩展名文件？

> ID：11204891
> 
> 赞同：8
> 
> 时间：2012-06-26T09:58:55.807
> 
> 标签：windows, windows-xp, windows-update

我已经下载了一个具有 .msu 扩展名的文件 WINDOWS POWERSHELL 我如何在我的 winxp 专业 sp3 操作系统中安装这个包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T21:24:10.370

微软支持网站上有这个链接，它解释了如何安装 .msu 文件：

*   [Windows 中的 Windows 更新独立安装程序的描述](https://support.microsoft.com/en-us/kb/934307)

# android - Android 应用中的自定义字体

> ID：11204894
> 
> 赞同：0
> 
> 时间：2012-06-26T09:59:04.697
> 
> 标签：android, android-fonts

我正在开发一个 android 项目，该应用程序已经构建，但只是为了改进用户界面。我正在重新设计应用程序。为此，我也尝试使用自定义字体，但这不起作用。我浏览了网上可用的示例代码，但没有一个不能解决我的问题。这是我的做法。

```
 package com.crittermap.backcountrynavigator.dialog;

import android.content.Context;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.widget.TextView;

public class MyTextView extends TextView {

    public MyTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public MyTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public MyTextView(Context context) {
        super(context);
        init();
    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/handsean.ttf");
            setTypeface(tf);
        }
    }

} 
```

这是XML部分

```
<com.crittermap.backcountrynavigator.dialog.MyTextView
            android:id="@+id/offlinesummary"
            android:layout_marginLeft="5dip"          
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_toLeftOf="@id/offlinecheckbox"
            android:text="@string/cp_preview_off_desc"
            style="@style/textN_l"> 
           </com.crittermap.backcountrynavigator.dialog.MyTextView> 
```

风格 ：

```
 <style name="textN_l" parent="w_h">
    <item name="android:textColor">@android:color/black</item>
    <item name="android:textSize">12sp</item>
</style>  
 <style name="w_h"> <!-- Width and Height -->
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_height">wrap_content</item>        
</style> 
```

我得到的错误是

```
 06-15 08:35:24.778: E/AndroidRuntime(2304): FATAL EXCEPTION: main
06-15 08:35:24.778: E/AndroidRuntime(2304): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.crittermap.backcountrynavigator.license/com.crittermap.backcountrynavigator.dialog.MapControlPanelDialog}: android.view.InflateException: Binary XML file line #24: Error inflating class com.crittermap.backcountrynavigator.dialog.MyTextView
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.os.Looper.loop(Looper.java:123)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at java.lang.reflect.Method.invokeNative(Native Method)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at java.lang.reflect.Method.invoke(Method.java:507)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at dalvik.system.NativeStart.main(Native Method)
06-15 08:35:24.778: E/AndroidRuntime(2304): Caused by: android.view.InflateException: Binary XML file line #24: Error inflating class com.crittermap.backcountrynavigator.dialog.MyTextView
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:626)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.app.Activity.setContentView(Activity.java:1657)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at com.crittermap.backcountrynavigator.dialog.MapControlPanelDialog.onCreate(MapControlPanelDialog.java:72)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-15 08:35:24.778: E/AndroidRuntime(2304):     ... 11 more
06-15 08:35:24.778: E/AndroidRuntime(2304): Caused by: java.lang.reflect.InvocationTargetException
06-15 08:35:24.778: E/AndroidRuntime(2304):     at java.lang.reflect.Constructor.constructNative(Native Method)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
06-15 08:35:24.778: E/AndroidRuntime(2304):     ... 22 more
06-15 08:35:24.778: E/AndroidRuntime(2304): Caused by: java.lang.RuntimeException: native typeface cannot be made
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.graphics.Typeface.<init>(Typeface.java:147)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at android.graphics.Typeface.createFromAsset(Typeface.java:121)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at com.crittermap.backcountrynavigator.dialog.MyTextView.init(MyTextView.java:27)
06-15 08:35:24.778: E/AndroidRuntime(2304):     at com.crittermap.backcountrynavigator.dialog.MyTextView.<init>(MyTextView.java:17)
06-15 08:35:24.778: E/AndroidRuntime(2304):     ... 25 more 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:01:52.763

你忘记命名空间了吗？

```
<com.crittermap.backcountrynavigator.dialog.MyTextView
        android:id="@+id/offlinesummary"
        android:layout_marginLeft="5dip"          
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@id/offlinecheckbox"
        android:text="@string/cp_preview_off_desc"
        android:style="@style/textN_l"> 
</com.crittermap.backcountrynavigator.dialog.MyTextView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:17:17.957

将您的代码更改为

```
public class MyTextView extends TextView {
 private Paint mPaint;  
float middleY=1;  
float mX=30;  
float DY=30; 
    public MyTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public MyTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public MyTextView(Context context) {
        super(context);
        init();
    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/handsean.ttf");
        mPaint = new Paint();  
        mPaint.setAntiAlias(true);  
        mPaint.setTextSize(16);  
        mPaint.setColor(Color.BLACK);  
        mPaint.setTypeface(tf); 
          //  setTypeface(tf);
        }
    }
    @Override  
    protected void onDraw(Canvas canvas) {  
        // TODO Auto-generated method stub  
        super.onDraw(canvas);  
        canvas.drawColor(0xEFeffff);  
        Paint p = mPaint;   
        p.setTextAlign(Paint.Align.CENTER);          
        canvas.drawText("TESTEST", mX, middleY, p);    

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:35:28.883

你必须在 xml 中使用，如下所示

```
 <com.crittermap.backcountrynavigator.dialog.MyTextView
        android:id="@+id/offlinesummary"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"   
        android:layout_marginLeft="5dip"          
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@id/offlinecheckbox"
        android:text="@string/cp_preview_off_desc"
        >
  </com.crittermap.backcountrynavigator.dialog.MyTextView> 
```

在您的任何活动中，您都必须使用这种方式

```
MyTextView textview=(MyTextView)findViewById(R.id.offlinesummary); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:17:06.493

尝试添加布局宽度和高度。然后，执行程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T10:26:18.777

尝试这个

```
<com.crittermap.backcountrynavigator.dialog.MyTextView
    android:id="@+id/offlinesummary"
    android:layout_marginLeft="5dip" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"         
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@id/offlinecheckbox"
    android:text="@string/cp_preview_off_desc"
    android:style="@style/textN_l"> 
```

**更新**

所以其他代码看起来很完美。唯一的问题是您的“.ttf”文件，可能是该文件已损坏。从 developer.android.com/design/downloads/index.html 下载字体并使用它们。希望它会奏效。

# database - 为 Couch Base Server 1.8 和 2.0 构建 Erlang 客户端

> ID：11204896
> 
> 赞同：4
> 
> 时间：2012-06-26T09:59:11.707
> 
> 标签：database, erlang, couchdb, couchbase

我们在我们的产品中使用了[Couchbase Server 。](http://www.couchbase.com/)它是一个前端是纯 JavaScript 的 Intranet 应用程序。然而，我们将[Erlang/OTP](http://erlang.org)用于业务逻辑、身份验证 ( `Mnesia`)、[yaws web 服务器](http://yaws.hyber.org)和一堆其他 erlang 库。

现在，我们仍在使用`Couch Base Single Server`其下载已从[Couch 基础站点](http://www.couchbase.com)中删除的。我们发现它非常稳定。在现在，5 个月的直播运行中，它从未下降过。我们在 Ubuntu 服务器上运行它。所以，我们对 NoSQL 的兴趣才刚刚开始。

然而，当我在这里问一个关于[对Couch 基本服务器的支持的](https://stackoverflow.com/q/9462995/431620)[问题](https://stackoverflow.com/q/10750986/431620)时，我发现他们说：`Erlang Client`

```
Couchbase 服务器与***memcached 兼容***。这意味着许多现有的 memcached
客户端库，在许多情况下，已经使用这些
库的应用程序可以直接与 Couchbase Server 一起使用

```

于是我开始四处寻找这些与***memcached 兼容***的库，并找到了一堆：在[Google code](http://code.google.com/p/memcached/wiki/Clients#Erlang)、[Erlang Mc](http://code.google.com/p/erlangmc/)、[erlmc](http://jkvor.com/erlang-binary-protocol-memcached-client)、[mcache](https://github.com/echou/memcached-client/)、[memcached-client](https://github.com/higepon/memcached-client)，最后[是 OneCached By Process One （Ejjabberd XMPP 服务器的制造商）](https://git.process-one.net/onecached)。带着我的伟大目标（如果可能的话），为 Couch Base 服务器 1.8 和 2.0 实现我自己的客户端，问题如下：

**1。以上哪个 memcached Erlang 客户端库适合与 Couchbase 1.8 和 2.0 一起使用？**

**2\. 如果兼容，我可以直接使用它，还是我必须先做一些改变？请解释一下变化？**

**3\. 有没有人像我们一样觉得需要 Erlang Client 支持 Couch Base 服务器 2.0 和 1.8？他们是如何解决这个问题的？**

我将不胜感激，如果 Couch Base`insider`在 stackoverflow 上拥有会员资格，请告诉我们 Couch base 团队是否计划在不久的将来为我们建立一个 Erlang 客户端，这样我们就不会浪费时间尝试这样做，因为他们在为他们自己的服务器构建一个更好、更高效的客户端，而不是我们所能做到的。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:26:07.580

Couchbase 近期没有任何发布 erlang 客户端的计划。我们在我们的产品中使用 Erlang，非常喜欢 Erlang，但目前没有时间组装一个 Erlang 客户端。如果您有兴趣开发 Erlang 客户端，我们当然很乐意提供帮助并回答您可能遇到的任何问题。如果您给我发送电子邮件（请参阅我的个人资料），我将帮助您与 Couchbase 的某个人联系，他们可以帮助回答问题并帮助您开始开发。

另外，我不是 Erlang 用户，所以我无法回答您有关 memcached Erlang 库的任何问题。希望有过的人可以帮到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T19:32:22.457

我试过erlmc。我大量使用它来存储 32K 二进制文件，到目前为止它运行良好。

# c# - 使用基于代码的迁移时，如何停止添加迁移检查我的数据库没有待处理的迁移？

> ID：11204900
> 
> 赞同：9
> 
> 时间：2012-06-26T09:59:46.697
> 
> 标签：c#, .net, entity-framework, entity-framework-migrations

我正在研究将基于代码的 EF 迁移用于*不*使用 EF 的产品。一切通常都运行良好，除了命令：

```
Add-Migration MyTestMigration 
```

输出以下消息：

> 无法生成显式迁移，因为以下显式迁移处于挂起状态：[201206260845338_DannyTest]。在尝试生成新的显式迁移之前应用挂起的显式迁移。

原因是在构建时连接字符串是未知的，并且 EF 在 .\SQLExpress 上随机创建了一个名为“MyContextName”的数据库。我无法应用挂起的迁移，因为它引用了该数据库中不存在的数据库表 - 我们只是尝试使用迁移作为执行脚本的一种方式；

所以问题是：

1.  如果我们不使用自动迁移（我们有 EnableAutomaticMigrations=false），为什么`Add-Migration`要求数据库是最新的，***即使它对生成的（空）迁移绝对没有影响***？我发现很难相信 MS 不打算使用这个用例，因为它的工作量很大。唯一“破碎”的事情是不影响*任何*行为的验证。

2.  除了创建我们自己的 Add-Migration 命令之外，还有什么办法可以解决这个问题，该命令只是复制 EF 的功能，但跳过（看似不必要的）数据库最新检查？我试过传递各种参数，但到目前为止还没有成功。

## 编辑：

我实际上找到了解决这个问题的更好方法，但这并不是这些问题的真正答案，所以在这里添加它。希望有时间把它变成一篇[博文](http://blog.dantup.com/)！

我想使用 Add-Migration 的唯一原因是因为 DbMigration 附带的所有内容。但我意识到，有了基类，我们基本上可以通过让基类从属性自动生成迁移 ID 来消除对所有这些的需求。我们所有迁移的目标都是相同的，因为模型状态不会改变。现在，我们只需像这样手动创建迁移（构建 ID 需要日期，以便 EF 以正确的顺序应用它们）：

```
[Migration(2012, 6, 27, 12, 00, "Add new xxx fields for yyy")]
internal class MyNewMigration : MyDbMigration
{
    public override Up()
    {
        // ...
    }
    public override Down()
    {
        // ...
    }
} 
```

该类`MyDbMigration`具有 Target/Source/Id 属性。Target 是硬编码的（与 Add-Migration 在第一次迁移中创建的值相同），Source 为 null，Id 是读取 MigrationAttribute 的一些反射。这意味着我们现在可以手动创建这些类；这不是很多努力，现在我们不必担心所有 IMigrationMetadata 的东西 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:17:42.523

尝试注释掉您现有的迁移（那些尚未应用于在 .\SQLExpress 上创建的数据库的迁移）并重新运行您的应用程序。这应该用它需要的初始表填充本地数据库。

一旦本地数据库具有正确的结构，您应该能够取消注释您的迁移，然后使用 update-database 使本地数据库保持最新。然后，您将能够添加新的迁移。

还要记住 update-database 命令上有一个 -connectionString 参数，因此您可以将迁移定位到特定的服务器/数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T16:31:10.977

在我从解决方案中删除包管理器最初创建的原始自动生成的迁移代码之前，我看到了这个错误。

在 Danny 的情况下，这将是 201206260845338_DannyTest.cs。

# ios - NSURLIsExcludedFromBackupKey - 应用程序必须遵循 iOS 数据存储指南，否则将被拒绝

> ID：11204903
> 
> 赞同：5
> 
> 时间：2012-06-26T09:59:49.770
> 
> 标签：ios, iphone, icloud, appstore-approval

我的应用程序被拒绝了，因为似乎 7 mb 存储在文档文件夹中，并且它们会自动发送到 icloud。所以我已经通过这种方法循环了所有将写入文档文件夹的文件：

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL {   

   const char* filePath = [[URL path] fileSystemRepresentation];
   const char* attrName = "com.apple.MobileBackup";
   if (&NSURLIsExcludedFromBackupKey == nil) {
   // iOS 5.0.1 and lower
   u_int8_t attrValue = 1;
   int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
   return result == 0;
 }
  else {
   // First try and remove the extended attribute if it is present
   int result = getxattr(filePath, attrName, NULL, sizeof(u_int8_t), 0, 0);
   if (result != -1) {
       // The attribute exists, we need to remove it
       int removeResult = removexattr(filePath, attrName, 0);
       if (removeResult == 0) {
           NSLog(@"Removed extended attribute on file %@", URL);
       }
   }

   // Set the new key
   NSError *error = nil;
   [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
   return error == nil;
  } 
```

我的应用程序的 1.1 版在此代码实施后获得批准。上周我尝试发送同一应用程序的 1.2 版（文件管理没有任何变化，存储在文档文件夹中的所有文件都通过 addSkipBackupAttributeToItemAtURL 方法循环）。出于同样的原因，我的应用再次被拒绝。我无法将我的文件移动到临时或缓存文件夹，因为我的应用程序无法完全恢复文件（此文件之一是 db，恢复 db 意味着丢失任何用户插入的数据），所以这不是解决方案. 无论如何，我在代码中发现了一个问题，这就是我调用该方法的方式：

[self addSkipBackupAttributeToItemAtURL:[NSURL fileURLWithPath:fullPath]];

在 ios 5.1 中使用 [NSURL fileURLWithPath:fullPath] 设备会返回错误，并且似乎无法创建该属性。如果我使用 [NSURL URLWithString:defaultStorePath] 更改 nsurl 的初始化，5.1 的设备似乎正确添加了该属性。

使用 ios 5.0.1 all is reversed ， [NSURL URLWithString:defaultStorePath] 返回错误，而 [NSURL fileURLWithPath:fullPath] 工作。

也许我可以检查 ios 版本并设置适当的 nsurl 初始化，但这仍然是一个问题。在拒绝解释中，我读到：

特别是，我们发现在启动和/或内容下载时，您的应用程序存储 7mb。要检查您的应用存储了多少数据：

*   安装并启动您的应用
*   转到设置 > iCloud > 存储和备份 > 管理存储
*   如有必要，点击“显示所有应用”
*   检查您应用的存储空间

如果我尝试检查此值，我还会看到 7 mb 以及正确的 nsurl 初始化（当所有属性都设置正确时）。什么是正确的行为？有这个问题的人吗？在苹果建议的应用程序存储检查之前，我是否必须做一些特定的事情才能让它变得重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-17T02:42:24.803

我认为诀窍是添加 NSURLIsExcludedFromBackupKey 并确保该目录位于文档目录之外。我通过将文档移动到 Library/Application Support 文件夹来做到这一点（因为它在 /tmp 或 /Caches 文件夹中没有意义）：

```
// store in /Library/Application Support/BUNDLE_IDENTIFIER/Reference
// make sure Application Support folder exists
NSURL *applicationSupportDirectory = [[NSFileManager defaultManager] URLForDirectory:NSApplicationSupportDirectory
                                                                            inDomain:NSUserDomainMask
                                                                   appropriateForURL:nil
                                                                              create:YES
                                                                               error:&error];
if (error) {
    NSLog(@"KCDM: Could not create application support directory. %@", error);
    return nil;
}

NSURL *referenceFolder = [applicationSupportDirectory URLByAppendingPathComponent:@"Reference" isDirectory:YES];
if (![[NSFileManager defaultManager] createDirectoryAtPath:[referenceFolder path]
                               withIntermediateDirectories:YES
                                                attributes:nil
                                                     error:&error]) {
    NSLog(@"KCDM: Error creating Reference folder to store model %@: %@", modelName, error);
    return nil;
}

BOOL success = [referenceFolder setResourceValue:@YES forKey: NSURLIsExcludedFromBackupKey error: &error];
if(!success){
    NSLog(@"KCDM: Error excluding %@ from backup %@", referenceFolder, error);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:20:28.620

I had the same problem as you until I deleted my app from my device, and re-installed. I also had to delete the existing cached data from the iCloud backup by going to Settings->Storage&Backup -> Manage Storage

That seemed to do the trick. Also, my code to add the skip attribute is a bit different: [Code lifted from this post](https://stackoverflow.com/questions/10836134/nsurlisexcludedfrombackupkey-can-not-be-set-correctly)

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
   assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

   if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
      const char* filePath = [[URL path] fileSystemRepresentation];

      const char* attrName = "com.apple.MobileBackup";
      u_int8_t attrValue = 1;

      int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
      return result == 0;
   } 
   else { // iOS >= 5.1
      NSError *error = nil;
      [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
      return error == nil;
   }

} 
```

# c# - 如何将图像文件转换为图像字节

> ID：11204905
> 
> 赞同：3
> 
> 时间：2012-06-26T09:59:55.587
> 
> 标签：c#

你们能帮忙将 JPG 文件转换为二维 int [] [] 数组吗？！有一种将它转换为字节数组的解决方案，但我需要它在一个 int 数组中......

```
byte[] imageBytes = File.ReadAllBytes("example.jpg"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:07:26.007

ReadAllBytes 不会为您提供 JPEG 的像素。JPEG 是一种压缩图像类型。您需要先将其加载到 Image 类中才能解压缩。然后你可以访问图像的像素加上确定它的宽度和高度。

```
Bitmap image = new Bitmap("example.jpg"); 

// Loop through the image
for(x=0; x<image.Width; x++)
{
    for(y=0; y<image.Height; y++)
    {
        Color pixelColor = image1.GetPixel(x, y);
        my_int_array[x][y] = pixelColor.ToArgb();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:05:37.210

如果您需要为某些图像处理 API（这很可能是您实际需要的）提供对底层图像的原始访问，而不是对*文件*的访问，请参阅[如何：使用 LockBits](http://msdn.microsoft.com/en-us/library/ms229672%28v=vs.80%29.aspx)。

本文还介绍了一些基础知识，例如扫描和跨步：[使用 LockBits 方法访问图像数据](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)。

# php - php 中的 httpd.exe 发生未处理的 win32 异常

> ID：11204906
> 
> 赞同：0
> 
> 时间：2012-06-26T10:00:03.140
> 
> 标签：php, windows, imagemagick

我很难为 PHP 安装 imagemagick。

我使用`ImageMagick-6.7.7-8-Q16-windows-dll.exe`并添加`php_imagick.dll`到我的 php`ext`文件夹中，并`phpinfo`显示 php_imagick 扩展。

我在 Windows XP 上使用 Wamp Server 2.1、PHP 5.3.5、Apache 2.2.17、Mysql 5.5.8

当我运行以下代码时，会导致未处理的 win32 异常发生在`httpd.exe`：

```
try
{
    $image = 'exists.jpg';

    /*** a new imagick object ***/
    $im = new Imagick($image);

    echo 'Imagick';
}
catch(Exception $e) 
{
    echo $e->getMessage();
} 
```

帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:08:10.097

似乎安装损坏，您的操作系统版本是什么，安装时是否遇到任何错误？

请参考此博客上传您的日志

[http://blogs.msdn.com/b/heaths/archive/2009/05/20/collect.aspx](http://blogs.msdn.com/b/heaths/archive/2009/05/20/collect.aspx)

并使用此工具收集日志[http://go.microsoft.com/?LinkId=8967043](http://go.microsoft.com/?LinkId=8967043)

运行此工具后，请将此日志上传到 skydrive 并与我分享故障排除链接。

此外，您是否尝试过使用此工具卸载 Visual Studio：

[http://archive.msdn.microsoft.com/vs2010uninstall](http://archive.msdn.microsoft.com/vs2010uninstall)

使用完整的命令

谢谢，

# asp.net-mvc-3 - 实体框架：ViewModel 到域模型

> ID：11204910
> 
> 赞同：4
> 
> 时间：2012-06-26T10:00:10.770
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, automapper

我正在建立一个 MVC 3 网站。我有一个看起来像这样的模型：

```
public class Survey
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid Id { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public DateTime DateStart { get; set; }

    public DateTime DateEnd { get; set; }

    // Not in view
    public DateTime DateCreated { get; set; }

    // Not in view
    public DateTime DateModified { get; set; }
} 
```

基于此，我还有一个视图模型来编辑调查信息：

```
public class SurveyEditViewModel
{
    public Guid Id { get; set; }

    public string Name { get; set; }

    public string Description { get; set; }

    public DateTime DateStart { get; set; }

    public DateTime DateEnd { get; set; }
} 
```

当用户完成编辑时，我想保留更改。这是我的控制器发布操作：

```
 [HttpPost]
    public ActionResult Edit(SurveyEditViewModel model)
    {
        // Map the view model to a domain model using AutoMapper
        Survey survey = Mapper.Map<SurveyEditViewModel, Survey>(model);

        // Update the changes
        _repository.Update(survey);

        // Return to the overview page
        return RedirectToAction("Index");
    } 
```

在我的存储库（现在是通用的）中，我有以下代码：

```
 public void Update(E entity)
    {
        using (ABCDataContext context = new ABCDataContext())
        {
            context.Entry(entity).State = System.Data.EntityState.Modified;
            context.SaveChanges();
        }
    } 
```

执行此操作时，我收到以下错误：*“存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体以来，实体可能已被修改或删除。刷新 ObjectStateManager 条目。”*

我想这是意料之中的。从视图模型映射到模型并没有给我一个完整的调查对象。

我可以修改我的控制器看起来像这样。然后它起作用了：

```
[HttpPost]
public ActionResult Edit(SurveyEditViewModel model)
{

    // Map the model to a real survey
    survey = _repository.Find(model.Id);
    survey.Name = model.Name;
    survey.Description = model.Description;
    survey.DateStart = model.DateStart;
    survey.DateEnd = model.DateEnd;

    // Update the changes
    _repository.Update(survey);

    // Return to the overview page
    return RedirectToAction("Index");
} 
```

但我想知道是否有更好的方法可用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T10:02:47.833

```
[HttpPost]
public ActionResult Edit(SurveyEditViewModel model)
{
    // Fetch the domain model to update
    var survey = _repository.Find(model.Id);

    // Map only the properties that are present in the view model
    // and keep the other domain properties intact
    Mapper.Map<SurveyEditViewModel, Survey>(model, survey);

    // Update the changes
    _repository.Update(survey);

    // Return to the overview page
    return RedirectToAction("Index");
} 
```

# javascript - 将表格重置为特定值

> ID：11204911
> 
> 赞同：1
> 
> 时间：2012-06-26T10:00:19.413
> 
> 标签：javascript, html

我正在尝试编写代码，在重置后将 rrpmax 设置为 3000。IE 可以，但不能在 Firefox 和 Chrome 中工作。

```
 <html>
<head>
<script type="text/javascript">
function formReset()
{
var fields = document.getElementsByTagName( "input" );
for ( i = 0; i < fields.length; i++ )
{
if ( fields[ i ].type == "checkbox" )
fields[ i ].checked = false;
}
document.getElementById( 'rrpmax' ).selectedIndex = 3;
}
</script>
</head>
<body>
<input type="button" value="reset" onclick="formReset()"/>
<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" />
<select id="rrpmax">
<option>1000</option>
<option>2000</option>
<option>3000</option>
</select>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:06:40.757

这是一个常见的错误

1）首先索引从零开始，你应该定位 `index 2`

2）其次是浏览器兼容性，以防忘记在 javascript 中的适当使用，用作设置选择的名称和值

```
<select name="rrpmax" id="rrpmax">
<option value="1000">1000</option>
<option value="2000">2000</option>
<option value="3000">3000</option>
</select> 
```

3）你可以使用

```
document.getElementById( 'rrpmax' ).value='3000'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:09:35.010

仅使用`reset`表单提供的功能怎么样？
（*不使用任何javascript*）

```
<form>
    <input type="reset" value="reset"/>
    <input type="checkbox" />
    <input type="checkbox" />
    <input type="checkbox" />
    <select id="rrpmax">
        <option>1000</option>
        <option>2000</option>
        <option selected>3000</option>
    </select>
</form> 
```

**演示在** [http://jsfiddle.net/P6RR6/](http://jsfiddle.net/P6RR6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:06:23.293

尝试为您的选择赋予价值

```
<select id="rrpmax">
    <option value="1000">1000</option>
    <option value="2000">2000</option>
    <option value="3000">3000</option>
</select> 
```

并编辑选择的 attr**值**

```
document.getElementById('rrpmax').value = 3000; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:07:19.703

您可以添加`selected`参数 [http://www.w3schools.com/tags/att_option_selected.asp](http://www.w3schools.com/tags/att_option_selected.asp)

# xcode - 在 OS X 上使用 CMake 构建 openCV 2.4.1 时，标题在哪里？

> ID：11204914
> 
> 赞同：0
> 
> 时间：2012-06-26T10:00:22.093
> 
> 标签：xcode, opencv, cmake

我来自机甲背景，所以我可能会遗漏一些完全微不足道的东西。[我](http://www.shiffman.net/2011/01/23/how-to-build-opencv-static-libraries-mac-os-x/)使用 Unix makefile在我的 mac (OS X 10.7 Lion) 上安装了 openCV2.4.1 。每个都与`make`and正确`sudo make install`匹配，所有 .dylib 文件都在*lib*文件夹中，但我在任何地方都找不到头文件（“cv.h”等）。*include*文件夹只有 cmake_install.cmake、Makefile 文件和CMakeFiles*文件*夹。

我之前通过自制软件安装了 openCV 2.3.1，并且标头都在包含中，所以我必须在**Library Search Paths**中将该路径添加到 XCode 。现在我不确定如何在没有它的情况下使用库......？

*编辑*

我正在使用 CMake 2.8.4 GUI。它在那里指定“源代码在哪里”和“在哪里构建二进制文件”。我正在查找为“构建二进制文件的位置”指定的文件夹。既然你提到了它，我检查了源代码文件夹并找到了标题，但是那里当然没有 .dylib 文件......

无论如何，我再次运行 CMake（到另一个二进制文件夹，但应该是相同的输出）以获取输出，这里是：

```
The CXX compiler identification is Clang
The C compiler identification is GNU
Check for working CXX compiler: /usr/bin/c++
Check for working CXX compiler: /usr/bin/c++ -- works
Detecting CXX compiler ABI info
Detecting CXX compiler ABI info - done
Checking whether C compiler has -isysroot
Checking whether C compiler has -isysroot - yes
Checking whether C compiler supports OSX deployment target flag
Checking whether C compiler supports OSX deployment target flag - yes
Check for working C compiler: /usr/bin/gcc
Check for working C compiler: /usr/bin/gcc -- works
Detecting C compiler ABI info
Detecting C compiler ABI info - done
Extracting svn version, please wait...
SVNVERSION: exported
Looking for sys/types.h
Looking for sys/types.h - found
Looking for stdint.h
Looking for stdint.h - found
Looking for stddef.h
Looking for stddef.h - found
Check size of off64_t
Check size of off64_t - failed
Looking for fseeko
Looking for fseeko - found
Looking for unistd.h
Looking for unistd.h - found
Looking for assert.h
Looking for assert.h - found
Looking for fcntl.h
Looking for fcntl.h - found
Looking for io.h
Looking for io.h - not found
Looking for jbg_newlen
Looking for jbg_newlen - not found
Looking for mmap
Looking for mmap - found
Looking for search.h
Looking for search.h - found
Looking for string.h
Looking for string.h - found
Looking for unistd.h
Looking for unistd.h - found
checking for module 'libdc1394-2'
  package 'libdc1394-2' not found
checking for module 'libdc1394'
  package 'libdc1394' not found
checking for module 'libavcodec'
  package 'libavcodec' not found
checking for module 'libavformat'
  package 'libavformat' not found
checking for module 'libavutil'
  package 'libavutil' not found
checking for module 'libswscale'
  package 'libswscale' not found
Looking for libavformat/avformat.h
Looking for libavformat/avformat.h - not found
Looking for ffmpeg/avformat.h
Looking for ffmpeg/avformat.h - not found
CUDA_TOOLKIT_ROOT_DIR not found or specified
Could NOT find CUDA (missing:  CUDA_TOOLKIT_ROOT_DIR CUDA_NVCC_EXECUTABLE CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) (Required is at least version "4.1")
Found PythonInterp: /usr/bin/python2.7 (Required is at least version "2.0")
Found PythonLibs: /usr/lib/libpython2.7.dylib (Required is at least version "2.7.1")

General configuration for OpenCV 2.4.1 =====================================

  Platform:
    Host:                        Darwin 11.4.0 i386
    CMake:                       2.8.4
    CMake generator:             Unix Makefiles
    CMake build tool:            /usr/bin/make
    Configuration:               Release

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                /usr/bin/c++
    C++ flags (Release):         -O3 -DNDEBUG  
    C++ flags (Debug):           -g 
    C Compiler:                  /usr/bin/gcc
    C flags (Release):           -O3 -DNDEBUG 
    C flags (Debug):             -g 
    Linker flags (Release):
    Linker flags (Debug):

  OpenCV modules:
    To be built:                 calib3d contrib core features2d flann gpu highgui imgproc legacy ml nonfree objdetect photo python stitching ts video videostab
    Disabled:                    -
    Disabled by dependency:      -
    Unavailable:                 androidcamera java

  GUI: 
    QT 4.x:                      NO
    Cocoa:                       YES
    OpenGL support:              NO

  Media I/O: 
    ZLib:                        build (ver 1.2.6)
    JPEG:                        build (ver 62)
    PNG:                         build (ver 1.5.9)
    TIFF:                        build (ver 42)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     NO

  Video I/O:
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      NO
      codec:                     NO
      format:                    NO
      util:                      NO
      swscale:                   NO
      gentoo-style:              NO
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    QuickTime:                   NO
    QTKit:                       YES

  Other third-party libraries:
    Use IPP:                     NO
    Use TBB:                     NO
    Use Cuda:                    NO
    Use Eigen:                   NO

  Python:
    Interpreter:                 /usr/bin/python2.7 (ver 2.7.1)
    Libraries:                   /usr/lib/libpython2.7.dylib
    numpy:                       /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include (ver 1.5.1)
    packages path:               lib/python2.7/site-packages

  Documentation:
    Build Documentation:         NO
    Sphinx:                      NO
    PdfLaTeX compiler:           NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    Examples:                    NO

  Install path:                  /usr/local

  cvconfig.h is in:              /Users/steveheim/Documents/opencvtest
-----------------------------------------------------------------

Configuring done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:05:31.737

从您的 CMake 输出中：

> 安装路径：/usr/local

这意味着在`make install`完成 OpenCV 标头后将被复制到`/usr/local/include/`

要更改此位置，您可以将`CMAKE_INSTALL_PREFIX`CMake 变量的值设置/修改为所需位置。

# asp.net - 页面的默认可缓存性是什么？网页浏览器

> ID：11204916
> 
> 赞同：3
> 
> 时间：2012-06-26T10:00:30.823
> 
> 标签：asp.net, vb.net, caching, browser-cache, httpbrowsercapabilities

在我们的网站上通过安全 SSL 连接使用设置下载 Office 文件后遇到[此问题。](http://support.microsoft.com/kb/316431)`Cacheability`我想知道要使用的正确设置是什么。

如果我完全删除以下代码行，`Cacheability`页面的默认设置是什么？我已经阅读了以下[页面](http://msdn.microsoft.com/en-us/library/w9s3a17d%28v=vs.100%29.aspx)，所以如果我什么都不设置，默认设置是什么？

```
Response.Cache.SetCacheability(HttpCacheability.Public) 
```

如果我不能使用`No-cache`，那么我应该安全地使用 private 还是 public 然后什么都不设置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:40:21.570

“私有”是缓存的默认值。

# android - 使用 RTSP 流式传输 mp4 文件？

> ID：11204922
> 
> 赞同：1
> 
> 时间：2012-06-26T10:01:11.530
> 
> 标签：android, video-streaming

我正在开发一个应用程序。这将从相机录制的视频流式传输并存储为 sdcard 中的 mp4 ......

我知道有一种叫做 RTSP 的东西就是用来做这个的……请告诉我从哪里开始。.有没有图书馆可以为我做这件事......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:40:57.627

我不明白您为什么要流式传输本地 mp4 文件，但也许我误解了您的问题。RTSP 用于直播，但您想播放本地 mp4 文件。

如果要捕获视频并将其作为 mp4 保存到 SD 卡上，则需要使用 Android MediaRecorder。[这里有一个简单示例的链接](http://android-er.blogspot.dk/2011/04/simple-exercise-of-video-capture-using.html)。

如果您只想播放本地 mp4 文件。查看 Android API 演示。这些是 Android SDK 安装的一部分，包含如何播放本地媒体文件的一个很好的示例。

# java - 日志线程内存泄漏

> ID：11204923
> 
> 赞同：1
> 
> 时间：2012-06-26T10:01:18.473
> 
> 标签：java, multithreading, memory-leaks, thread-safety

我为我的程序编写了一个后台日志记录线程，如果一个类需要一个记录器，它会从我的线程池中提取它，因此对于每个文件名，只有一个日志正在运行。该类添加了需要通过 log(String) 记录的任何内容。

无论如何，每当我设置登录并在一段时间后运行 writetolog() 时，我都会遇到 heapoutofmemory 异常。这是由日志线程引起的，但是我看不到内存泄漏在哪里，而且我不擅长线程。我唯一的想法是它在缓冲的作家中？

```
import java.io.File;
import java.io.IOException;

import java.io.FileWriter;
import java.util.Calendar;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;

public class Log extends Thread{
private String file;
private BlockingQueue<String> pq = new LinkedBlockingQueue<String>();
private BufferedWriter bw;
private boolean Writing;

@Depreciated
public Log(){
    super();
    file = "log.txt";

    start(); 
}

public Log(ThreadGroup tg, String fileName){
    super(tg,fileName);
    file = fileName;
    try {
        new File(file).createNewFile();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    start(); 
}

public Log(String fileName){
    file = fileName;
    try {
        new File(file).createNewFile();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    start(); 
}

@Override
public void run(){
    //System.out.println("Log Thread booted " +file);

    while(Run.running){
        if (!Writing){
            if(Run.logging)
            writeToLog();
        }
        try{
            Thread.sleep(500);
        }catch(InterruptedException e){
            Thread.currentThread().interrupt();
            break;
        }

    }
    //System.out.println("Log Thread shutting down " +file);
}

public synchronized void log(String s){
    if(Run.logging)
    pq.add(s);
}

private void writeToLog(){
    try{
        Writing = true;

        bw = new BufferedWriter(new FileWriter(file, true));
    while(!pq.isEmpty()){

            bw.write(Calendar.getInstance().getTime().toString() +" " +pq.poll());
            bw.newLine();

    }

    bw.flush();
    bw.close();
    Writing = false;
    }catch(Exception e){Writing = false; e.printStackTrace();}
}

} 
```

编辑 - 值得一提的是，在程序的上下文中，它记录了 100 到 1000 行

非常感谢山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:55:18.447

如果您的后台线程没有足够快地写入磁盘，[LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)（您未指定其容量）将增长直到它包含`Integer.MAX_VALUE`字符串。这对于您的 java 堆大小来说太大了。

指定容量，以便在队列满的情况下，调用 log 方法的线程将等待，同时将排队日志的某些部分转储到磁盘上：

```
private BlockingQueue<String> pq = new LinkedBlockingQueue<String>(1000); 
```

在 log 方法中使用[put](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#put%28E%29)而不是，`add`以便日志记录操作等待而不是抛出异常。

（你有没有注意到你写在磁盘上的时间而不是记录的时间？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:55:21.087

我相信拥有`private BufferedWriter bw;`作为成员变量会造成麻烦。由于您仅在`writeToLog()`函数中使用它，因此没有理由将其作为成员变量并每次都由多个线程实例化。在函数内创建`BufferedWriter`将在对象超出范围后立即对其进行 GC。

```
private void writeToLog(){ 
    try{ 
        Writing = true; 

        BufferedWriter bw = new BufferedWriter(new FileWriter(file, true)); 
    while(!pq.isEmpty()){ 

            bw.write(Calendar.getInstance().getTime().toString() +" " +pq.poll()); 
            bw.newLine(); 

    } 

    bw.flush(); 
    bw.close(); 
    Writing = false; 
    }catch(Exception e){Writing = false; e.printStackTrace();} 
} 
```

# jquery - If语句jQuery中的If语句

> ID：11204928
> 
> 赞同：0
> 
> 时间：2012-06-26T10:01:41.687
> 
> 标签：jquery, forms

大家好，我的 jQuery 有点问题我正在尝试验证几个表单并检查元素是否存在，然后检查是否选择了单选按钮。但它一直忽略我的代码并提交表单。

```
 else if ($('fieldset').is('.customer')) {
        if (!$('input:radio[name=i_am]').is(':checked')) {
            alert("Please tell us if your a new/exisiting customer");
            return false;
        }
    } 
```

我有几个表格使用相同的 ID 和类，但这是我遇到的问题吗？有人知道我哪里出错了吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:04:41.530

你可以这样改变你的代码：

```
else if ($('fieldset').is('.customer') && !$('input:radio[name=i_am]').is(':checked')) {
    alert("Please tell us if your a new/exisiting customer");
    return false;
} 
```

# objective-c - 将带有 NSTextAttachment 的 NSAttributedString 保存到文件中。如何？

> ID：11204929
> 
> 赞同：4
> 
> 时间：2012-06-26T10:01:42.983
> 
> 标签：objective-c, cocoa, nstextview, nsattributedstring, nstextattachment

我有一个`NSTextView`，它可能包含富文本或带有图像的富文本`NSTextAttachment`。我如何添加附件：

```
NSImage *image = [NSImage imageNamed:@"image"];

NSTextAttachmentCell *attachmentCell =[[NSTextAttachmentCell alloc] initImageCell:image];
NSTextAttachment *attachment =[[NSTextAttachment alloc] init];
[attachment setAttachmentCell: attachmentCell ];
NSAttributedString *attributedString =[NSAttributedString  attributedStringWithAttachment: attachment];
[[aTextView textStorage] beginEditing];
if ([aTextView shouldChangeTextInRange:NSMakeRange([aTextView selectedRange].location, 0) replacementString:@""]) {
    [[aTextView textStorage] insertAttributedString:attributedString atIndex:[aTextView selectedRange].location];
    [aTextView didChangeText];
}
[[aTextView textStorage] endEditing]; 
```

我的`-fileWrapperOfType:error:`方法：

```
- (NSFileWrapper *)fileWrapperOfType:(NSString *)typeName error:(NSError *__autoreleasing *)outError
{
    NSRange documentRange = NSMakeRange(0, [[[WindowController aTextView] textStorage] length]);
    NSTextStorage *text = [[WindowController aTextView] textStorage];

    NSFileWrapper *resultWrapper = nil;
    if ([typeName compare:@"public.rtf"] == NSOrderedSame) {
        resultWrapper = [[NSFileWrapper alloc] initRegularFileWithContents:[text RTFFromRange:documentRange documentAttributes:[NSDictionary dictionaryWithObjectsAndKeys:NSRTFTextDocumentType, NSDocumentTypeDocumentAttribute, nil]]];
    }
    else if ([typeName compare:@"com.apple.rtfd"] == NSOrderedSame) {
        resultWrapper = [text RTFDFileWrapperFromRange:documentRange documentAttributes:[NSDictionary dictionaryWithObjectsAndKeys:NSRTFDTextDocumentType, NSDocumentTypeDocumentAttribute, nil]];
    }
    return resultWrapper;
} 
```

但是当我保存 RTFD 时，所有附件都会丢失。请帮忙。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:52:20.027

我找到了一个可以接受的解决方案，这里有描述：[Cocoa: custom attachment in a text view](http://www.dejal.com/blog/2007/11/cocoa-custom-attachment-text-view)

# java - 用于 java 代码的免费地理定位 ip 服务

> ID：11204934
> 
> 赞同：1
> 
> 时间：2012-06-26T10:01:59.660
> 
> 标签：java, ip-geolocation

我有一个 java 应用程序，我需要位置信息。基于给定的IP。目前，我正在使用[http://freegeoip.net](http://freegeoip.net)。我正在使用 java，我所做的是以 csv 格式获取上述站点的地理位置信息，然后解析 csv 文件并找到国家详细信息并将其显示在我的 Java 应用程序中。

不幸的是，这个网站的主要问题是它限制了我限制查询的数量，而我需要无限的查询以用于教育目的。除了给我信息的可能性之外，任何机构都可以为我提供可靠、准确（尽可能）、免费、无限制的地理定位 ip 服务吗？以 csv 格式（或任何我可以提取信息的合适格式。从它到我的 Java 应用程序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:02:53.650

试试[http://www.maxmind.com/](http://www.maxmind.com/)，他们的 IP 信息数据库免费提供城市级别的地理位置（您可以为更详细的位置支付更多费用。有一个 java API，数据库存储在本地。

请注意，此（或任何 IP 查找）不适用于连接到公司 VPN 的人员 - 您将获得他们公司网络端点的位置。

# build - 为什么 Libtool 不想与静态库链接？

> ID：11204935
> 
> 赞同：6
> 
> 时间：2012-06-26T10:02:03.200
> 
> 标签：build, build-automation, autotools, automake, libtool

我想使用 GNU Autotools 构建一个使用 ZipArchive 的共享库，但我遇到了这个问题：

```
警告：链接器路径没有库 -lziparch 的真实文件。
我有能力使该库在何时自动链接
你链接到这个库。但我只能在你有一个
库的共享版本，您似乎没有
因为我确实检查了链接器路径以查找文件开始
使用 libziparch 并且没有候选人通过文件格式测试
使用文件魔术。最后检查的文件：/usr/local/ZipArchive/ZipArchive/libziparch.a
此处已删除的库间依赖项将是
每当程序与此库链接时自动添加
或被声明为 -dlopen 它。
```

如果我构建一个静态库或者如果我使用 ZipArchive 的共享库，它可以工作，但问题是 ZipArchive 源代码附带的 makefile 只构建一个静态库。

如何强制 Libtool 与静态库链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T16:39:29.477

Generally, static archives are created with non-pic object files and they cannot be put into shared libraries.

What this message is telling you though, is that when a program links to YOUR library using Libtool, that -lziparch will get added to the link. So you don't *need* to change anything unless you're building a module for an interpreted language. In that case, you will have to build ZipArchive as a shared library. In addition, this wouldn't work on a platform like MS Windows where shared libraries (DLLs) have to resolve all their symbols at link time.

All that said, if your ziparch static lib is PIC code, you can use the -whole-archive flag when linking it to your library. This would be the least portable solution though.

# grails - grails 中的休眠查询语言

> ID：11204937
> 
> 赞同：0
> 
> 时间：2012-06-26T10:02:09.487
> 
> 标签：grails, hql

我目前正在研究一个需要执行休眠查询的 grails 项目。每次我使用数据库上的现有数据运行代码时，一切正常。但是，如果我在数据库为空的情况下运行它，则会引发错误。

这是我的代码：

```
 def actActivation = AuditLog.executeQuery("select ll.username from AuditLog ll where ll.event = ? ",[AuditLogEvent.ACCOUNT_ACTIVATION])
    def actDeleted = AuditLog.executeQuery("select ll.username from AuditLog ll where ll.event = ? ",[AuditLogEvent.ACCOUNT_DELETION])
    def actPurged = AuditLog.executeQuery("select ll.username from AuditLog ll where ll.event = ? ",[AuditLogEvent.ACCOUNT_PURGING])
    def list = AuditLog.executeQuery("""select sum(case when l.details like '%Gender: Male.%' and l.event = :actActivationEvent then 1 else 0 end),
            sum(case when  l.details like '%Gender: Female.%' and l.event = :actActivationEvent then 1 else 0 end),
            sum(case when  l.event = :actActivationEvent then 1 else 0 end),
            sum(case when  l.details like '%Gender: Male.%' and l.event = :actFinishRegEvent and ((l.username not in(:actActivation)) or (l.username in(:actDeleted) or l.username in(:actPurged))) then 1 else 0 end),
            sum(case when  l.details like '%Gender: Female.%' and l.event = :actFinishRegEvent and ((l.username not in(:actActivation)) or (l.username in(:actDeleted) or l.username in(:actPurged))) then 1 else 0 end),
            sum(case when  l.event = :actFinishRegEvent and ((l.username not in(:actActivation)) or (l.username in(:actDeleted) or l.username in(:actPurged))) then 1 else 0 end),
            sum(case when  l.details like '%Gender: Male.%' and l.event = :actDeletionEvent then 1 else 0 end),
            sum(case when  l.details like '%Gender: Female.%' and l.event = :actDeletionEvent then 1 else 0 end),
            sum(case when  l.event = :actDeletionEvent then 1 else 0 end),
            sum(case when  l.details like '%Gender: Male.%' and l.event = :actPurgedEvent then 1 else 0 end),
            sum(case when  l.details like '%Gender: Female.%' and l.event = :actPurgedEvent then 1 else 0 end),
            sum(case when  l.event = :actPurgedEvent then 1 else 0 end)                
        from AuditLog l
        where l.dateCreated >= :startDate and l.dateCreated < :endDate""",
        [
            actActivationEvent:AuditLogEvent.ACCOUNT_ACTIVATION,
            actDeletionEvent:AuditLogEvent.ACCOUNT_DELETION,
            actPurgedEvent:AuditLogEvent.ACCOUNT_PURGING,
            actFinishRegEvent:AuditLogEvent.FINISH_REGISTRATION,
            actActivation:actActivation,
            actDeleted:actDeleted,
            actPurged:actPurged, 
            startDate: startDate,
            endDate:endDate
        ]) 
```

这是我在数据库为空的情况下执行代码时的错误消息。

> 类：org.hibernate.hql.ast.QuerySyntaxException
> 
> 信息：
> 
> 子树的意外结束[选择总和（当 l.details 像 '%Gender: Male.%' 和 l.event = :actActivationEvent 然后 1 else 0 结束时的情况），总和（当 l.details 像'%Gender: Female. %' and l.event = :actActivationEvent then 1 else 0 end), sum(case when l.event = :actActivationEvent then 1 else 0 end), sum(case when l.details like '%Gender: Male.%' and l.event = :actFinishRegEvent and ((l.username not in()) or (l.username in() or l.username in())) then 1 else 0 end), sum(case when l.details like ' %Gender: Female.%' and l.event = :actFinishRegEvent and ((l.username not in()) or (l.username in() or l.username in())) then 1 else 0 end), sum （当 l.event = :actFinishRegEvent and ((l.username not in()) or (l.username in() or l.username in())) then 1 else 0 end), sum(case when l. '%Gender: Male.%'之类的详细信息和 l.event = :actDeletionEvent then 1 else 0 end), sum(当 l.deletion 像 '%Gender: Female.%' 和 l.event = :actDeletionEvent then 1 else 0 end), sum(当 l.deletion. event = :actDeletionEvent then 1 else 0 end), sum(当 l.details like '%Gender: Male.%' and l.event = :actPurgedEvent then 1 else 0 end), sum(case when l.details like ' %Gender: Female.%' and l.event = :actPurgedEvent then 1 else 0 end), sum(case when l.event = :actPurgedEvent then 1 else 0 end) from ph.gov.csc.comex.log.AuditLog l其中 l.dateCreated >= :startDate 和 l.dateCreated < :endDate]%Gender: Male.%' and l.event = :actPurgedEvent then 1 else 0 end), sum(当 l.details 像 '%Gender: Female.%' and l.event = :actPurgedEvent then 1 else 0 end) , sum(case when l.event = :actPurgedEvent then 1 else 0 end) from ph.gov.csc.comex.log.AuditLog l where l.dateCreated >= :startDate and l.dateCreated < :endDate]%Gender: Male.%' and l.event = :actPurgedEvent then 1 else 0 end), sum(当 l.details 像 '%Gender: Female.%' and l.event = :actPurgedEvent then 1 else 0 end) , sum(case when l.event = :actPurgedEvent then 1 else 0 end) from ph.gov.csc.comex.log.AuditLog l where l.dateCreated >= :startDate and l.dateCreated < :endDate]

我将如何解决这个问题？请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:31:21.667

问题在于您盲目地将前三个查询的结果作为参数传递给最后一个查询。这导致 where 子句包含：

```
where ... l.username not in () ... 
```

这是无效的。一个`in ()`子句必须在括号内至少有一个元素。如果作为参数传递给`in`子句的列表之一为空，则应使用另一个查询。

# asp.net - 在asp.net页面生命周期中，会话何时设置？

> ID：11204940
> 
> 赞同：2
> 
> 时间：2012-06-26T10:02:44.060
> 
> 标签：asp.net, asp.net-session

是时候学习一些基础知识了。

看下面的代码：

```
 protected void Button1_Click(object sender, EventArgs e)
 {

    List<string> a;
    if(Session["data"] == null)
    {
        a = new List<string>();
        a.Add("abc");
        a.Add("def");
        a.Add("ghi");

        Session["data"] = a;
    }
    else
    {
        a = (Session["data"] as List<string>);
    }
    a.Add("jkl");
    foreach (string s in a)
    {
        lblTest.Text += s + "<br />";
    }
} 
```

代码隐藏中没有其他地方可以让我对会话进行任何操作。此代码的预期行为是在第一次运行（单击）会话中将持有对“a”的引用。但是“a”在上述函数中具有本地范围，因此必须将“a”的值复制到会话中。发生在哪里？它是否在函数执行之前发生，因为在任何其他发生的地方（即页面卸载、验证、渲染）列表“a”将不可用。那么，分配或引用的值何时何地存储在会话中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:06:40.843

> 那么，分配或引用的值何时何地存储在会话中？

这里：

```
Session["data"] = a; 
```

在第二次运行中，您将从会话中检索 a 并向其添加一个元素。但是由于`List<string>`是引用类型，两者`a`现在`Session["data"]`都指向内存中的相同位置，所以当你添加一个元素时，`a`你基本上是在修改`Session["data"]`，所以你不需要`Session["data"] = a`再次调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:06:57.817

`a`是对您的实例的引用`List<string>`。当您分配`Session["data"] = a`时，它现在还具有对同一实例的引用`List<string>`。因此，尽管`a`超出了范围，但该列表实例仍然存在，因为至少存在一个引用。访问`Session["data"]`将继续返回对同一实例的引用，直到它从会话中删除（或被其他东西替换）。

# c# - 将数据库中的 Xml 数据检索到我的页面中

> ID：11204950
> 
> 赞同：1
> 
> 时间：2012-06-26T10:03:03.770
> 
> 标签：c#, sql-server

我正在尝试使用存储过程将数据从数据库中检索到 xml 标记中。我想创建像标准 xml 响应一样的响应。但相反，我得到了一个名为：`<NewDataSet/>`

这是我检索数据的代码：

```
comm = new SqlCommand("[sp_get_business_locations]", conn);
    comm.CommandType = System.Data.CommandType.StoredProcedure;
    comm.Parameters.AddWithValue("@Latitude", Latitude);
    comm.Parameters.AddWithValue("@Longitude", Longitude);
comm.ExecuteNonQuery();    
cdoc.LoadXml(shop.GetXml()); 
```

可以做什么？谢谢。

```
DataSet shop = new DataSet();
XmlDocument cdoc = new XmlDocument(); 
```

这是我的存储过程：

```
SElECT  @TotalRows=COUNT(*) FROM HeritageList   
 INNER JOIN  Reviews loc  WITH (NOLOCK) ON HeritageList.HeritageId = loc.HeritageId    
 WHERE ([dbo].[DistanceBetween] (@Latitude,@Longitude,Latitude,Longitude)) * @meters <= @Radius      

    IF(@TotalRows>0)    
    BEGIN    
         DECLARE @Partialxml XML      
     DECLARE @Totalxml XML      
     declare @Appendxml VARCHAR(100)       
     SET @Appendxml = '<HeritageList></HeritageList>';      
     set @Totalxml=@Appendxml      

     SET @Partialxml = (SELECT  HeritageList.HeritageId,

        Latitude as "Location/Latitude",      
        Longitude as "Location/Longitude",      
        Country as "Location/Country",      
        [State] as "Location/State",      
        City as "Location/City",      
        Postcode as "Location/Postcode",      
        [Address] as "Location/Address",     
        (Cast(Round((( [dbo].[DistanceBetween]           
         (@Latitude,@Longitude,Latitude,Longitude)) * @meters),2,1) as decimal(18,2))) as Distance    
        FROM dbo.HeritageList  INNER JOIN  Reviews loc   WITH (NOLOCK) ON HeritageList.HeritageId = loc.HeritageId    
        WHERE ([dbo].[DistanceBetween] (@Latitude,@Longitude,Latitude,Longitude)) * @meters <= @Radius     
          FOR XML PATH('Business'), ELEMENTS XSINIL)      
     SET @Totalxml.modify('insert sql:variable("@Partialxml")  as last into (/HeritageList)[1] ' )      

     SELECT @Totalxml      
 END    

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:15:24.410

构造数据适配器，

```
SqlDataAdapter adpater=new SqlDataAdapter(comm);
DataSet shop=new DataSet();
adapter.Fill(shop);

XmlDocument cdoc = new XmlDocument();
cdoc.LoadXml(shop.GetXml()); 
```

# javascript - 画布上的行星、月亮和剪裁弧 - 粗糙的边缘

> ID：11204953
> 
> 赞同：1
> 
> 时间：2012-06-26T10:03:21.000
> 
> 标签：javascript, canvas

所以我有一个旋转`canvas`元素，里面有一个弧线（较小的行星）：http: [//jsfiddle.net/neuroflux/9L689/4/](http://jsfiddle.net/neuroflux/9L689/4/)（更新）

但我似乎无法让小行星边缘的抗锯齿更平滑——有什么想法吗？

干杯!

**编辑：**有没有办法增加一个内使用的迭代次数`arc`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T08:42:50.807

您的问题不在于弧线没有足够的点，而是在 Chrome 中该`.clip()`操作不使用抗锯齿来生成剪切路径。

请参阅铬问题[7508](http://code.google.com/p/chromium/issues/detail?id=7508)和[132442](http://code.google.com/p/chromium/issues/detail?id=132442)

要查看实际情况，请查看 Chrome 中的[http://jsfiddle.net/alnitak/YMtdZ/](http://jsfiddle.net/alnitak/YMtdZ/)。

标记：

```
<canvas id="c" width="600" height="300" /> 
```

​ 代码：

```
var canvas = document.getElementById('c');
var ctx = canvas.getContext('2d');

ctx.fillStyle = 'black';

ctx.save();
ctx.beginPath();
ctx.arc(150, 150, 140, 0, 2 * Math.PI);
ctx.clip();
ctx.fillRect(0, 0, 600, 300);
ctx.restore();

ctx.beginPath();
ctx.arc(450, 150, 140, 0, 2 * Math.PI);
ctx.closePath();
ctx.fill(); 
```

​左边的圆圈是用剪裁绘制的，并且是锯齿状的。右边的圆圈是“正常”绘制的，并且是抗锯齿的。

FWIW，在 Firefox 和 Safari 中，两个图像看起来都一样。我无法在 IE 上测试它。

我能想象的唯一解决方法（直到 Chrome 得到修复）是将屏幕外的图像渲染到大 3 或 4 倍的画布中，然后通过下采样将其复制到显示的画布中。

# iphone - 在 PopOverController 的帮助下填充表 - Objective C

> ID：11204957
> 
> 赞同：0
> 
> 时间：2012-06-26T10:03:35.300
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在使用`UIButton`，单击它时我想在我的帮助下显示我的内容，`NSMutableArray`即`UITableView`我`UIPopOverController`想`UITableView`弹出一个其单元格显示我的内容`NSMutableArray`。

我正在使用以下代码行：

```
UITableViewController *table= [[UITableViewController alloc]init];

table.delegate = self;

UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:table];
self.popoverController = popover;          
popoverController.delegate = self;

NSString *hDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *hFilePath = [hisDir stringByAppendingPathComponent:@"hhhh.txt"];

NSArray *array = [NSArray arrayWithContentsOfFile:hFilePath ];
NSMutableArray *kkkk = [[NSMutableArray alloc] init];
for (NSDictionary *dict in array) {
    [kkkk addObjectsFromArray:[dict allKeys]];    
}

table = [[UIImageView alloc] initWithFrame:[window bounds]];
// Set up the image view and add it to the view but make it hidden
[window addSubview:table];
table.hidden = YES;
[window makeKeyAndVisible]; 
```

我无法在`UITableView`我的`UIButton`. 谁能帮我整理一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:35:14.100

在 中显示的一种方法`UITableView`是`UIPopOverController`创建一个新`UIViewController`类。`initWithContentViewController`并在方法中调用它`UIPopOverController`。

**1.**创建一个新的`UIViewController`或`UITableViewController`类。创建它的一个实例。

**2.**`initWithContentViewController`在方法中使用实例`UIPopOverController`。

**3.**提及它应该从哪里“弹出”

例如在你的`Button`行动中：

```
-(IBAction)yourButtonAction:(id)sender

{
   YourNewViewController*newVC=[[YourNewViewController alloc]init];

   UIPopoverController*somePopOver=[[UIPopoverController alloc]initWithContentViewController:catergoryVC]; //Tell which view controller should be shown
   [somePopOver setPopoverContentSize:CGSizeMake(200, 200)]; // set content size of popover
   [somePopOver presentPopoverFromRect:yourButton.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; //From where it should "pop"

} 
```

看来你想从一个`UIBarButtonItem`所以而不是`presentPopoverFromRect`使用`presentPopoverFromBarButtonItem`

```
 [somePopOver presentPopoverFromBarButtonItem:yourBarButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:52:25.207

如果您想在按下按钮单击时显示弹出框，则首先在视图控制器中添加您的按钮，按如下方式显示该视图控制器：在应用程序委托中编写代码：

```
MyViewController *viewController = [[MyViewController alloc] init];
[self.window addSubView:viewController.view]; 
```

在 MyViewController 添加按钮并为该按钮 displayPopup 提供目标，如下所示：

```
-(void)displayPopup:(id)sender
{
    UITableViewController *tblViewPopover = [[UITableViewController alloc] init];
    tblViewPopover.tableView.delegate = self;
    tblViewPopover.tableView.dataSource = self;
    tblViewPopover.tableView.backgroundColor = [UIColor whiteColor];
    tblViewPopover.tableView.separatorStyle= UITableViewCellSeparatorStyleSingleLine;

    float theWidth = 280;
    tblViewPopover.contentSizeForViewInPopover = CGSizeMake(theWidth,200);

    if(m_popOvrController){
        [m_popOvrController dismissPopoverAnimated:NO];
        [m_popOvrController release];
        m_popOvrController=nil;
    }    
    m_popOvrController = [[UIPopoverController alloc] initWithContentViewController:tblViewPopover];
    [tblViewPopover release];

        [m_popOvrController presentPopoverFromRect:sender.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:NO];

} 
```

您可以使用 tableview 委托方法在 tableview 中显示数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:32:16.510

我认为，UIPopoverViewController 是使用 UIViewController 初始化的，而这里你使用的是 UIView(UITableView)。

您可以尝试改用 UITableViewController 吗？

此外，如果在您使用代码创建它时事情没有按计划工作，请尝试显式使用 XIB。

这应该会有所帮助。

# objective-c - “填充” json 文件的最佳方法，iOS？

> ID：11204961
> 
> 赞同：1
> 
> 时间：2012-06-26T10:03:51.297
> 
> 标签：objective-c, ios, json, file

我正在开发一个应用程序，我需要向我的服务器发送一些数据。数据为 json 格式，更具体的 json 文件如下所示：

```
{
    "eventData": {
        "eventDate": "Jun 13, 2012 12:00:00 AM",
        "eventLocation": {
            "latitude": 43.93838383,
            "longitude": -3.46
        },
        "text": "hjhj",
        "imageData": "raw data",
        "imageFormat": "JPEG",
        "expirationTime": 1339538400000
    },
    "type": "ELDIARIOMONTANES",
    "title": "accIDENTE"
} 
```

所以我试图对我的 json 文件中的数据进行硬编码，一切正常。现在我要做的是填充我的 json 文件，使用变量，以便在数据更改时一切都可以自动工作。有什么好的方法呢？一些示例代码将不胜感激，因为我对 obj-c 非常陌生。谢谢你的时间！:D

## 编辑

好的，所以 NSDictionary 似乎是一个不错的方法。但是我怎样才能创建一个看起来像 json 格式的字典呢？我只使用过这样的字典：

```
NSArray *keys = [NSArray arrayWithObjects:@"eventDate", @"eventLocation", @"latitude"  nil];
NSArray *objects = [NSArray arrayWithObjects:@"object1", @"object2", @"object3", nil]; 
dictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys]; 
```

例如，对于经度和经度，它是一对键和值，但对于其余部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:16:44.273

您所需要的只是`NSDictionary`包含您的键和值。从iOS5开始，你可以继续下面的代码

```
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:myDictionary 
                                                       options:NSJSONWritingPrettyPrinted
                                                         error:&error];        
if (!jsonData) {
    NSLog(@"Got an error: %@", error);
} else {
    NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:22:02.520

我用过这个[库](http://code.google.com/p/json-framework/downloads/list) 。这是非常简单和有用的。对于教程，请查看此[站点](http://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c)。

# android - Android - 将可绘制 ID 存储在自定义 XML 文件中

> ID：11204963
> 
> 赞同：0
> 
> 时间：2012-06-26T10:04:03.730
> 
> 标签：android, xml, parsing

在我的应用程序中，我使用 xml 文件来存储一些数据，并且图像存储在可绘制文件夹中。我想将这些“链接”到，这意味着 xml 文件中的每个对象都引用可绘制文件夹中的某个图像。我怎么能做到这一点？谢谢！

```
<contacts>
    <contact>
        <name>Joe</name>
        <picture>R.drawable.joe_pic</picture>
    </contact>
    <contact>
        <name>Dean</name>
        <picture>R.drawable.dean_pic</picture>
    </contact>
</contacts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:18:41.587

你可以尝试只保存像“joe_pic”这样的名字，这样就可以[了](https://stackoverflow.com/questions/2349652/android-open-resource-from-drawable-string)

```
private void showImage() {
    String uri = "drawable/icon";

    // int imageResource = R.drawable.icon;
    int imageResource = getResources().getIdentifier(uri, null, getPackageName());

    ImageView imageView = (ImageView) findViewById(R.id.myImageView);
    Drawable image = getResources().getDrawable(imageResource);
    imageView.setImageDrawable(image);
} 
```

但如果您已经添加了“R.drawable.joe_pic”，则可以使用 String.split 来获取第三个字符串部分

# linux - 安装时可以将用户定义的参数传递给 RPM 吗？

> ID：11204964
> 
> 赞同：8
> 
> 时间：2012-06-26T10:04:06.117
> 
> 标签：linux, rpm, rpmbuild

安装时是否可以将用户定义的参数传递给 RPM？

例如：

```
~>rpm -i sample.rpm -license_path=/path/ 
```

或者

```
~>rpm -i -license_path=/path/ sample.rpm 
```

或者

```
~>rpm -i -somearg sample.rpm 
```

-萨克蒂

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T21:38:24.150

RPM 并不意味着采用用户定义的参数。

请参阅[RPM - 安装时间参数](https://stackoverflow.com/questions/8258647/rpm-install-time-parameters)

另一个类似的问题是[https://superuser.com/questions/408852/is-it-possible-to-get-users-input-during-installation-of-rpm](https://superuser.com/questions/408852/is-it-possible-to-get-users-input-during-installation-of-rpm)

一种解决方法是让 rpm 的 postinstall 脚本从 stdin 请求输入，在这种情况下，您可以通过从文件或此处的文档重定向 stdio 来传递答案。

```
>rpm -i sample.rpm <<__NOT_RECOMMENDED__
somearg
__NOT_RECOMMENDED__ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:13:39.337

看起来您正在尝试创建一个[可重定位的 RPM](http://www.rpm.org/max-rpm/ch-rpm-reloc.html)。

在`.spec`文件的前导中，放置可以重定位的文件路径的前缀。例如，如果您的文件的完整路径是

```
/base/path/to/my/file 
```

然后`/base`可以在 RPM 安装期间更改，但`/path/to/my/file`将保持不变。

这是您放入`.spec`文件的内容：

```
#Preamble: Summary, Name, etc.
Prefix: /base 
```

确保在列出文件的`%install`和`%files`部分中的所有可重定位文件时提及此前缀`.spec`。在某些情况下，可重定位的 RPM 可能不起作用，因此请检查[这些要考虑](http://www.rpm.org/max-rpm/s1-rpm-reloc-wrinkles.html)的事项。

```
%files
%{prefix}/path/to/my/file 
```

现在，当您安装 RPM 时，您可以指定不同的前缀。

```
rpm -i sample.rpm  --prefix /tmp 
```

这会将文件安装在`/tmp/path/to/my/file`.

# android - 单个布局中带有自定义适配器的多个 ListView

> ID：11204971
> 
> 赞同：0
> 
> 时间：2012-06-26T10:04:58.940
> 
> 标签：android, listview, listactivity, tabnavigator

我创建了一个自定义选项卡导航器，现在我需要知道如何使用多个接收自定义适配器的 ListView。

当我需要使用自定义适配器时，我创建了一个`ListView`with`id=android:list`并将类设置为 Extends ListActivity。但是现在我觉得我做不到...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:10:04.383

要在单个活动上拥有多个 listView，不需要扩展 ListActivity。只需将普通 ListViews 添加到 xml lauyout 文件并在活动中引用它们并设置所需的适配器。

示例：xml 文件

```
<ListView android:id="@+id/list_view1" android:layout_width="fill_parent"
 android:layout_height="wrap_content">
 </ListView>

<ListView android:id="@+id/list_view2" android:layout_width="fill_parent"
 android:layout_height="wrap_content">
 </ListView> 
```

关于活动：

```
setContentView(R.layout.xmlfile)...

ListView lv1 = (ListView) findViewById(R.id.list_view1);
ListView lv2 = (ListView) findViewById(R.id.list_view2);

lv1.setAdaper(new CustomAdapter1());
lv2.setAdaper(new CustomAdapter2()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:19:06.677

@努诺·贡萨尔维斯

XML 文件中的一个小错误/优化：

在 ListViews 的情况下，最好将`layout_height`和`layout_width`属性定义为`fill_parent`并使用属性对其进行缩放`layout_gravity`。将`layout_height`ListView 设置`wrap_content`为不是最佳的，可能会导致错误或性能问题。

但是您的解决方案将在这种情况下起作用:)

例子：

```
<ListView android:id="@+id/list_view1" 
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:layout_gravity="1">
 </ListView>

<ListView android:id="@+id/list_view2" 
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" 
 android:layout_gravity="1">
 </ListView> 
```

# android - 以编程方式从自定义 android 键盘更改键盘

> ID：11204973
> 
> 赞同：3
> 
> 时间：2012-06-26T10:05:10.640
> 
> 标签：android, ime, android-input-method

我创建了一个 android 自定义键盘。按下一个按钮后，我希望它把键盘改回以前的键盘，大概是使用`InputMethodManager.setInputMethod(IBinder token, String id);`

但是，我不知道从哪里获取令牌 - using`getCurrentInputBinding().getConnectionToken()`不起作用。

有谁知道在哪里可以找到令牌？

谢谢，

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:48:32.470

您从视图中获取令牌 by `view.getWindowToken()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:14:56.700

事实证明，该`switchInputMethod(String id)`方法很有效——不需要那个令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-15T12:25:41.193

您可以使用此方法获取令牌并激活上次使用的键盘

```
 private fun switchToLastKeyboard() {
        try {
            val imm: InputMethodManager =
                this.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager
            val token = this.window.window!!.attributes.token
            //imm.setInputMethod(token, LATIN);
            imm.switchToLastInputMethod(token)
        } catch (t: Throwable) { // java.lang.NoSuchMethodError if API_level<11
            Log.i("TAG", "onCreateInputView: Throwable " + t.message)
        }

    } 
```

# iphone - 如何在 Appstore 上提交 iphone 应用程序以及什么是先决条件？

> ID：11204979
> 
> 赞同：0
> 
> 时间：2012-06-26T10:05:26.180
> 
> 标签：iphone, ios

我创建了我的第一个 iphone 应用程序，现在我想在 appstore 上提交它，所以请告诉我什么是先决条件和分步过程。并且还推荐链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:09:47.927

这是我可以向您推荐的最好的教程。按照本教程中的所有步骤进行操作。 [http://soulwithmobiletechnology.blogspot.in/2011/03/how-to-create-distribution-build-with.html](http://soulwithmobiletechnology.blogspot.in/2011/03/how-to-create-distribution-build-with.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:08:14.307

请参阅此[http://www.edumobile.org/iphone/iphone-programming-tutorials/submitting-iphone-apps-to-the-apple-app-store-a-step-by-step-guide/](http://www.edumobile.org/iphone/iphone-programming-tutorials/submitting-iphone-apps-to-the-apple-app-store-a-step-by-step-guide/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:10:27.647

只需观看 WWDC 2012 会议[构建、归档和提交您的应用程序](https://developer.apple.com/videos/wwdc/2012/?id=414)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:11:15.817

您需要的所有说明都在[iOS 配置门户](https://developer.apple.com/ios/manage/distribution/index.action)上。

# c++ - 结构中的类

> ID：11204991
> 
> 赞同：0
> 
> 时间：2012-06-26T10:06:07.660
> 
> 标签：c++, class, structure

我有两个问题。

1.  我知道可以在结构中声明类对象。但从设计的角度来看这样做是否合乎道德？

2.  在我的场景中，我有一个包含大量成员元素的结构，我也想包含一个类对象。这里我还有一个问题。如果我 memset() 整个结构类句柄也被重置。因此，我在调用 memset() 时检查了没有类对象的结构的其余部分的大小并减去它，以摆脱这个问题。（请注意，我在这里使用 STL 类 'queue'。我不能在对象上使用 sizeof() 运算符，因为它没有重载。）

但这完全是一种不可接受的方式吗？你能提出一些解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T10:12:12.010

*   `struct`= `class`（默认可见性除外）。

*   如果您有“大量成员”，您可能做错了什么，请更改您的设计，否则将变得难以处理。

*   在有意义的地方嵌套类和/或结构绝对没问题。例如，为实现细节定义嵌套类是很常见的（所以一个`linked_list`类可以有一个`node`成员类）。

*   没有“类对象”这样的东西，不清楚你的意思是什么。

*   不要使用`memset`——你可能不需要它，只需使用普通的构造函数和赋值。

*   > 而且我不能在对象上使用 sizeof() 运算符

    错了，可以用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:13:14.943

解决方案是避免使用类和结构的 memset，并使用构造函数。在 C++11 中，您也可以在各种条件下使用初始化列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:11:14.597

c++ 中的类和结构之间没有太大的功能差异。C++ 中存在结构只是为了与 C 向后兼容。所以在结构中有一个类对象是可以的。但是，我通常更喜欢只有带有 getter 和 setter 的成员变量的结构。我不使用结构内的任何函数来操纵数据。如果我需要，那么我将使用类。

# java - Hadoop HDFS java客户端使用

> ID：11204992
> 
> 赞同：0
> 
> 时间：2012-06-26T10:06:15.367
> 
> 标签：java, hadoop

我有一个 java 应用程序，它需要读取和写入文件到 HDFS。我确实使用 FileSystem fs = FileSystem.get(configuration);

而且效果很好。

现在的问题是：我应该保留这个引用并将其用作单例，还是应该只使用一次并每次都获得一个新的？

如果重要的话，我需要说该应用程序的目标是相当高的流量。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:36:34.947

我认为答案取决于两个数字的关系——网络带宽（HDFS 客户端和 HDFS 集群之间）和每秒可以提供给 HDFS 客户端的数据量。如果 first 更高 - 那么同时有几个连接是有意义的。
通常2-3个并发连接是最佳的

# android - 如果未安装应用程序，从 web 视图调用 facebook sdk 不起作用？

> ID：11204996
> 
> 赞同：2
> 
> 时间：2012-06-26T10:06:25.447
> 
> 标签：android, facebook, facebook-android-sdk

这是我在我的 android 应用程序中想要的。

我想要 webview 中的一个按钮调用我的 java 中的一个方法。此方法应调用 facebook sdk 的 authorize() 函数并进行 SSO/Dialog 方式的身份验证。当我在 webview 中调用 javascript 方法时，访问令牌和过期令牌将返回给 webview。

这是我已经创建的。

在我的 onCreate() 活动中，我正在初始化 webview。

```
mFB = new Facebook(APP_ID);
wv = (WebView) findViewById(R.id.web_view);
wv.getSettings().setJavaScriptEnabled(true);
wv.addJavascriptInterface(new JSInterface(this), "JAVA");
wv.loadUrl("file:///android_asset/test.html"); 
```

我的资产文件夹中的 test.html 是这样的 -

```
<script type="text/javascript">
        function authorizeFacebook() {
           JAVA.authorizeFacebook();    
        }

        function showData(token, expire) {
            document.getElementById('result').innerHTML = token + " >>>> " + expire;
        }
</script> 
```

JS 和 Java 之间的接口工作正常。我敢肯定。我的 JSInterface 是 -

```
public class JSInterface {
    public Context mContext;

    JSInterface(Context c) {
        mContext = c;
    }

    public void authorizeFacebook() {   
        Log.e("FB", "authorizeFacebook() interface called");
        authorizeFacebookSSO();
    }
} 
```

```
public void authorizeFacebookSSO() {
    mFB.authorize(FBCMTestActivity.this, new DialogListener() {

    @Override
    public void onFacebookError(FacebookError e) {
        Log.e("FBAUTH", "FB failed + " + e.getErrorCode());
        Toast.makeText(getApplicationContext(), "FBFAIL:" + e.getMessage(), Toast.LENGTH_LONG).show();
    }

    @Override
    public void onError(DialogError e) {
        Log.e("FBAUTH", "FB failed + " + e.getMessage());
        Toast.makeText(getApplicationContext(), "FBFAIL:" + e.getMessage(), Toast.LENGTH_LONG).show();
    }

    @Override
    public void onComplete(Bundle values) {
        Log.e("FBAUTH", "SUCCESS");
        Log.e("FBAUTH:", mFB.getAccessToken() + " " + mFB.getAccessExpires());
        wv.loadUrl("javascript:showData( '" + mFB.getAccessToken() + "' , '" + mFB.getAccessExpires()  + "');");
    }

    @Override
    public void onCancel() {
    }
});
} 
```

当我有 facebook 应用程序时，这很好用。

但是当没有 facebook 应用程序时，理想情况下它应该显示一个带有 webview 的对话框。但它失败并停在 - '正在加载...' 屏幕。

![在此处输入图像描述](../Images/428ba55459d748aa3a81ec314fca758e.png)

它只是停留在那里，甚至不会崩溃。没有日志。过了一会儿，我要么强制关闭它，要么等待它。有没有人遇到过这个问题？

**更新**

我的 onActivityResultCode() -

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        mFB.authorizeCallback(requestCode, resultCode, data);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:32:14.737

好吧，我自己想通了。

当我从 WebView 的 javascript 调用 Java 函数时，该函数在 webview 的线程中运行。所以让它在 UI 线程上运行为我修复了一切:)

希望对其他人有所帮助。

这是我在上述代码中所做的唯一更改。

```
public class JSInterface {
    public Context mContext;

    JSInterface(Context c) {
        mContext = c;
    }

    public void authorizeFacebook() {   

       runOnUiThread(new Runnable() {

           @Override
           public void run() {
                try {
                        authorizeFacebookSSO();
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });           
    }
} 
```