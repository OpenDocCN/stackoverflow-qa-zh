# StackOverflow 问答 12050000-12050999

# asp.net - 数据边界时标签文本是否更改？

> ID：12050002
> 
> 赞同：0
> 
> 时间：2012-08-21T07:18:44.637
> 
> 标签：asp.net

我已更改标签文本以显示按钮单击的过程，我们将数据绑定到该按钮单击事件中的三个下拉列表和两个网格。

我为 Grid On Item Databound 写过：

```
lblLoad.Text = "Jobs Grid :" + dgvJobs.Items.Count + " Out of "+ JobsCount +" are loaded"; 
```

对于下拉列表 OnDataBinding：

```
lblLoad.Text = "Job Numbers :" + ddlJobNumber.Items.Count + "  Out of " + JobsNumbersCount + " are loaded"; 
```

这个对吗 ？这个标签文本是否随着进度的变化而变化。? 目前这个标签在完成所有数据后显示是有界的。请告诉我实现这一目标的方法。

谢谢，拉克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:31:39.700

您的绑定过程正在服务器中进行，如果您在此过程中更新标签文本，则仅在服务器中更改文本。当该过程完成并将 html 发送到客户端时，才会显示标签文本。

您需要根据进度更改客户端的标签文本。如果您只想要“请稍候”消息，您可以使用 asp.net`UpdatePanel`和`UpdateProgress`，请看这里：[http ://weblogs.asp.net/stoianbucovich/archive/2008/01/30/asp-net-2-0- ajax-update-panel-and-update-progress.aspx](http://weblogs.asp.net/stoianbucovich/archive/2008/01/30/asp-net-2-0-ajax-update-panel-and-update-progress.aspx)。

如果您想更多地显示实际进度百分比，则需要在客户端中编写更复杂的代码，但我认为这不值得。绑定没有那么长的进步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:24:37.293

不，它不会随着进度而改变（阅读 MSDN 文章 - [ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)）。相反，您可以创建一个`StringBuilder`对象，附加文本并最终将其分配给`Label.Text`.

PS：如果您想查看/查看有关 ASP.NET 页面的单个请求的*诊断*信息，您可以启用[跟踪。](http://msdn.microsoft.com/en-us/library/bb386420.aspx)

# ios - 更新数据后，单元格的内容不会立即显示

> ID：12050004
> 
> 赞同：0
> 
> 时间：2012-08-21T07:18:54.003
> 
> 标签：ios, core-data, uitableview

我现在正在开发一个电子邮件应用程序。我使用 UITableView 来显示电子邮件列表。该列表是动态的。例如，用户可以拉动以刷新列表，也可以加载更多邮件。

我想存储邮件，所以我使用`CoreData`and `FetchedResultsController`。我已经实施了`NSFetchedResultsControllerDelegate`.

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller
  didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex
     forChangeType:(NSFetchedResultsChangeType)type
{
    switch(type) {
        case NSFetchedResultsChangeInsert:
           [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]     withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller
   didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath
     forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    UITableView *tableView = self.tableView;

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:(EmailsTableViewCell *)[self.tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]withRowAnimation:UITableViewRowAnimationFade];
        break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:   (NSInteger)sectionIndex
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:sectionIndex];
    return [sectionInfo numberOfObjects];
} 
```

现在的问题是在我从服务器下载邮件并将它们与 CoreData 对象一起存储之后。表格视图首先显示新的空白单元格，然后是真实内容（**大约 3~5 秒延迟**）。如何在模型更改后立即更新 tableview 并让单元格内容立即显示？

## 更新

我正在后台线程中更新托管上下文，这可能会导致此类问题。您应该**在主线程中调用 FRC 委托方法**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:39:11.127

你有没有尝试过：

```
[myTableView reloadData]; 
```

在您下载所有电子邮件而不是更新部分和部分中的行之后？

我假设你的

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(int)section; 
```

返回获取的数组中的元素数。

例如

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(int)section
{
    return myArrayOfEmails.count;
} 
```

# python - 参数数量变化的多项式函数

> ID：12050007
> 
> 赞同：2
> 
> 时间：2012-08-21T07:19:03.827
> 
> 标签：python, function, dynamic, parameters

是否可以（在 Python 中）定义具有不断变化的参数数量的多项式函数？参数数量应根据我输入文件中的数据系列数量而变化。

目前我有这样的事情：

```
def y(x, a0, x2, x3, x4):
    y = a0 + a1*x + a2*x**2 + a3*x**3
    return y 
```

我当然可以通过额外的参数将高阶参数设置为零，但会有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:26:17.067

[您可以使用Horners 方法遍历](http://en.wikipedia.org/wiki/Horner%27s_method)参数并评估多项式，这是非常有效的。

```
def y(x, *args):
  y = 0
  for a in reversed(args):
    y = y*x+a
  return y 
```

[您可以在此问题](https://stackoverflow.com/questions/919680/python-can-a-variable-number-of-arguments-be-passed-to-a-function)中找到有关可变数量参数的更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T07:54:21.757

使用生成器表达式的更简单的版本

```
def y(x, *args):
  return sum(a * x ** i for i, a in enumerate(args)) 
```

和使用 reduce 的 Horner 版本

```
def horn(x, *args):
    return reduce(lambda y, a: y * x + a, reversed(args)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:28:55.263

```
def y(x, *args):
  y = 0
  i = 0

  for a in args:
    y += a * x ** i
    i += 1

  return y

print y(2, 1, 2) # 2 * 2 ^ 0 + 2 * 2 ^ 1 = 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T12:10:41.693

如果您正在处理数据文件并评估多项式，您可能会受益于使用`numpy`，其中还包括[`numpy.polyval`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polyval.html)用于评估多项式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T08:17:09.153

在这种特殊情况下，将多项式作为单个参数提供会更简洁，即系数列表：

```
 def eval_poly(x, poly):
     ....

 eval_poly(10, [1, 2, 3]) # evaluate (1 + 2x + 3x^2)(10) 
```

这样您就可以像处理普通值一样处理多项式，例如：

```
 def add_poly(p1, p2):
     """Add two polynomials together"""
     ...

 p1 = [1,2,3]
 p2 = [4,5,6]

 print eval_poly(10, add_poly(p1, p2)) 
```

# java - PrimeFaces 3.4 图表数据提示格式

> ID：12050008
> 
> 赞同：9
> 
> 时间：2012-08-21T07:19:05.120
> 
> 标签：java, charts, primefaces

今天我想尝试新的 PrimeFaces 版本 3.4.RC1。对于图表，有一个名为 datatipFormat 的新属性。

我只想将折线图中的值（y 轴）显示为数据提示。像这样：

```
<p:lineChart value="#{...}" datatipFormat="y-value"/> 
```

我该怎么做才能只显示这个？我找不到带有模板字符串的示例。

最好的问候投票

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T09:05:41.463

Primefaces 为图表使用 jqPlot 库。在那里我找到了以下条目：

[我尝试过的Highlighter.formatString](http://www.jqplot.com/docs/files/plugins/jqplot-highlighter-js.html)

（来自 Primefaces Showcase 的示例）：

```
 <p:lineChart  id="basic" value="#{userBean.categoryModel}" legendPosition="ne" 
   datatipFormat="#{userBean.datatipFormat}"  title="Basic Bar Chart" min="0"
    max="200" style="height:300px"/> 
```

用户Bean

```
public String getDatatipFormat(){
   return "<span style=\"display:none;\">%s</span><span>%s</span>";
} 
```

而这个小技巧只是 y 轴显示。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-24T11:54:55.213

您可以使用`extender`所有 PrimeFaces 图表标签的属性来覆盖默认绘图选项。例子：

```
<script type="text/javascript">
  function customExtender() {
    this.cfg.highlighter = {
      useAxesFormatters: false,
      tooltipAxes: 'y'
    }
  }
</script>
...
<p:lineChart extender="customExtender" value="..." /> 
```

可以在此处找到其他可用的 jqplot 选项：[http](http://www.jqplot.com/docs/files/jqPlotOptions-txt.html) ://www.jqplot.com/docs/files/jqPlotOptions-txt.html但请注意该文档说它已过时。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-05T03:19:32.543

datatipFormat 使用 sprintf 格式化工具提示的字符串，因此您只能打印第二个参数（y 轴）：

```
<p:lineChart value="#{...}" datatipFormat="%2$d"/> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-09T15:05:18.913

BarChartModel() 的提示：

```
public String getDatatipFormatX() {
    return "<font size=4 color=blue><span style=\"display:none;\">%s</span><span>%s</span></font>";
} 
```

Horizo​​ntalBarChartModel() 的提示：

```
public String getDatatipFormatY() {
    return "<font size=4 color=blue><span>%s</span><span style=\"display:none;\">%s</span></font>";
} 
```

使用示例：

```
private void MyCharts(){

//get data (from database, for example) to be displayed

myBarChartModel = new BarChartModel();
myHorizontalBarChartModel = new HorizontalBarChartModel();

ChartSeries verticalSeries = new ChartSeries("verticalSeries");
ChartSeries horizontalSeries = new ChartSeries("horizontalSeries");

myBarChartModel.addSeries(verticalSeries);
myHorizontalBarChartModel.addSeries(horizontalSeries);

myBarChartModel.setDatatipFormat(getDatatipFormatX());
myHorizontalBarChartModel.setDatatipFormat(getDatatipFormatY());
//other chart settings...

} 
```

然后，在 JSF 页面中：

```
<p:chart type="bar" model="#{chartBean.myBarChartModel}" />
<p:chart type="bar" model="#{chartBean.myHorizontalBarChartModel}" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-07T12:38:58.067

只能显示 x 值的前 0 个字符（%.0s），隐藏它是什么意思。在它后面你可以用 sprintf 格式的 y 值做你想做的事。

```
yourBarChartModel.setDatatipFormat("%.0s%s"); 
```

# heroku - 在 Heroku 上部署 EJB 应用程序

> ID：12050009
> 
> 赞同：2
> 
> 时间：2012-08-21T07:19:10.297
> 
> 标签：heroku, ejb

我是 Heroku PaaS 的新手，最近我花了一些时间探索如何在 Heroku 上部署 Java 应用程序。我也能够部署简单的 Java 应用程序和 Spring 应用程序。但是，我有一个包含 EJB 组件的应用程序。我的问题是 - EJB 2/3 应用程序可以部署在 Heroku 上吗？如果可以，我在哪里可以找到有关它的更多信息。（我试图寻找它，但找不到任何有用的东西）。任何指针都会非常有帮助。

# ruby-on-rails - FnordMetric 的自定义应用程序指标替代方案

> ID：12050010
> 
> 赞同：1
> 
> 时间：2012-08-21T07:19:15.533
> 
> 标签：ruby-on-rails, ruby, metrics

我目前正在使用 FnordMetric (https://github.com/paulasmuth/fnordmetric) 显示我的应用程序的指标。

尽管它很漂亮，但缺乏文档，并且做诸如导入历史数据之类的事情很痛苦。

我很好奇是否有替代工具（商业也可以）可以完全按照 FnordMetric 的方式工作，但具有更大/活跃的社区和更好的文档。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-08-21T08:29:43.860

[Fnordmetric](https://www.ruby-toolbox.com/projects/fnordmetric)的Ruby 工具箱页面建议了几个选项，其中[New Relic RPM](https://www.ruby-toolbox.com/projects/rpm)评分最高。其中之一可能对您有用。

# ios - 静态库是如何工作的

> ID：12050015
> 
> 赞同：1
> 
> 时间：2012-08-21T07:19:32.460
> 
> 标签：ios, performance, static-libraries, quartz-graphics

我想知道创建静态库的好处——它会影响应用程序加载时间吗？..我需要知道它是如何工作的。如果我创建一个自定义控件库，它会在性能和加载时间方面使我受益吗？

因此，如果我正在创建自定义控件，例如通过图形上下文绘图而不是使用图像，它会有益吗？例如。如果我打算使用最少数量的图像并使用上下文绘图作为选项会更好吗？会对性能产生什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:45:50.540

静态库不会真正影响性能。这只是一种以不同方式组织代码的方法。您可以说，一旦您的代码编译（和链接），生成的应用程序几乎是相同的。编译狂热者，请原谅我在这里的简化:)

在 iOS 中使用静态库有一些好处：

1.  代码重用。您可以在多个项目之间共享同一个库。如果您在库中进行更改，则更改将在构建后轻松反映在所有项目中。

2.  您可以与他人共享您的图书馆，而无需向他们提供完整的源代码。如果您想将代码出售给其他开发人员，这可能会很有用。

但是，根据我的经验，静态库有一些缺点。主要的一点是 XCode 并没有非常直观地处理它们。我个人花了大约一天的时间才能让我的项目设置正常工作。这很麻烦。

关于您问题的图像部分..它与静态库的决定有些无关。

使用图像主要会消耗空间（您的应用程序需要下载更大）和内存消耗。在上下文中绘制自己会花费 CPU 周期（实际上每次刷新帧时都会进行绘制）。在我看来，主要区别实际上是易于开发。在某些情况下，手动绘制上下文需要更多的工作，但您可以更轻松地进行更改。关于性能，我认为图像可能有一点优势，但除非你打算画一些疯狂的东西，否则它几乎可以忽略不计。在这种情况下，我会根据开发的难易程度而不是根据性能来决定。

# asp.net-mvc - 在服务层使用 HttpContextBase

> ID：12050017
> 
> 赞同：2
> 
> 时间：2012-08-21T07:19:42.883
> 
> 标签：asp.net-mvc, unit-testing, dependency-injection, unity-container, service-layer

我最近开始使用 TDD 和依赖注入。这是一个很大的心态变化，我仍在努力将所有部分拼凑在一起。

我有一个用于所有业务逻辑的服务层，以使控制器尽可能薄。我的服务中的某些服务需要 HttpContext。什么是创建服务的最佳方式，以便也可以进行单元测试。

目前我有一个看起来像这样的 ServiceBase

```
public class HttpContextService 
{
    private HttpContextBase _ServiceContext;
    public HttpContextBase ServiceContext 
    { 
        get
        {
            if (_ServiceContext == null)
                _ServiceContext = new HttpContextWrapper(HttpContext.Current);
            return _ServiceContext;
        }  
        set { _ServiceContext = value; }  
    }
} 
```

所以这意味着我所有的服务都可以从这个服务继承。我为 HttpContextBase 创建属性的原因是我可以在对服务进行单元测试时设置它。1.有没有办法将HttpContext注入Unity Bootstrap文件中的服务。? 2.这是正确的方法还是我错过了什么？

提前致谢。就像我说的，我正在努力理解整个 TDD 依赖注入的编码方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:57:16.283

> 我的服务中的一些服务需要HttpContext

您的服务应该存在于业务层中，并且该层不应该有您使用的表示技术的概念。这允许您将此逻辑重用于不同的技术（例如 WCF Web 服务或 Windows 服务）。但是，即使您不打算重用此代码，将您的服务紧密耦合到`HttpContextBase`仍然会增加复杂性，并使单元测试变得更加困难，正如您已经经历的那样。

解决方案是从`HttpContextBase`后面的抽象中抽象出你想要的东西，而不是对完整的抽象`HttpContext`，而是对你想在特定情况下使用的单个功能的抽象。

例如，当您想访问该`HttpContextBase.User`属性时，最好使用以下抽象：

```
public interface IUserContext
{
    IIdentity Current { get; }
} 
```

这使测试更容易，您的服务更简单，并且为不同的应用程序创建不同的实现更简单。

# perl - Perl - 从目录中排序日志文件，选择最新生成的日志文件并仅打印特定数据

> ID：12050020
> 
> 赞同：0
> 
> 时间：2012-08-21T07:19:50.157
> 
> 标签：perl

我是 perl 新手，我需要开发一个脚本来对目录中的日志进行排序，获取最新文件并仅从日志文件中复制特定内容并将其打印到新文件中。我写了一个下面的 perl 脚本我需要你的宝贵意见。

```
my($dir) = "C:\Luntbuild_Logs\LACOPBOC LACOPBOC_LASQABOCFC_";
$file = #Here i want to pick up the last generated log file from the above dir
my($newLog) = "new.log";
while (<MYFILE>) {
    print "$line" if $line =~ /> @/;
    print "$line" if $line =~ /ORA-/;
 }
 close (MYFILE);

I want my code to pick up the last generated log file from the dir and print the specific lines and redirect the output to the new log file. 
```

您能否在下面的代码中更正我现在我的 srript 能够排序和打印最新文件（目录中的所有文件都是 txt 文件）但我无法执行该操作

```
use File::stat;
$dirname = 'C:/Luntbuild_Logs';
$timediff=0;
opendir DIR, "$dirname";
while (defined ($file = readdir(DIR)))
{
                if($file ne "." && $file ne "..")
                {
                                $diff = time()-stat("$dirname/$file")->mtime;
                                if($timediff == 0)
                       {
                                $timediff=$diff;
                                $newest=$file;
                       }
                if($diff<$timediff)
                                       {
                                $timediff=$diff;
                                $newest=$file;
                       }
        }
}
open(FILE,"<$newest");
my(@fprint) = <FILE>;
close FILE;
open(FOUT,">list1.txt") || die("Cannot Open File");
foreach $line (@fprint) {
    print "$line" if $line =~ /> @/;
    print "$line" if $line =~ /ORA-/;
    print FOUT $line;
}
close FOUT; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:59:29.540

这是获取目录中文件的简单方法（注意正斜杠在 Windows 中有效并且是首选）：

```
chdir "C:/Luntbuild_Logs/LACOPBOC LACOPBOC_LASQABOCFC_";
my @files = <*>; 
```

您可能应该验证您只获得了正确类型的文件。在 Windows 上，您通常可以通过扩展来执行此操作。假设所有文件都以 .log 结尾。将上面的最后一行替换为：

```
my @files = grep {/\.log$/} <*>; 
```

对于下一步，我建议您看一下[这个问题](https://stackoverflow.com/questions/1839877/how-can-i-get-files-modification-date-in-ddmmyy-format-in-perl)，它提供了许多用于查找文件修改时间的解决方案。

# selenium - 如何使 Xvfb 显示可见？

> ID：12050021
> 
> 赞同：41
> 
> 时间：2012-08-21T07:19:55.237
> 
> 标签：selenium, selenium-webdriver, xvfb

我正在通过 Xvfb 在显示号 :99 上运行 selenium，如下所示：

> /usr/bin/Xvfb :99 -ac -screen 0 1024x768x8 & export DISPLAY=":99" && java -jar /usr/lib/selenium/selenium-server-standalone-2.24.1.jar -port 4444

但是，默认情况下，显示 :0 以外的数字是不可见的。我如何使它可见以实际查看 selenium 在浏览器中所做的事情？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2016-11-18T13:42:12.260

## 使用[X11vnc](https://en.wikipedia.org/wiki/X11vnc)

您只需要`x11vnc`通过以下方式安装：

```
sudo apt-get install x11vnc xvfb fluxbox 
```

^(可选择安装fluxbox以拥有简单的窗口管理器。)

### `x11vnc`在外壳中运行

然后设置访问 Xvfb 进行远程控制，您可以使用 X11 over SSH 或 VNC over SSH，例如

```
export DISPLAY=:1
Xvfb $DISPLAY -screen 0 1024x768x16 &
fluxbox &
x11vnc -display $DISPLAY -bg -forever -nopw -quiet -listen localhost -xkb 
```

### `x11vnc`使用脚本运行

这是要运行的脚本友好版本`Xvfb`，`x11vnc`并且`fluxbox`：

```
export DISPLAY=${DISPLAY:-:0} # Select screen 0 by default.
xdpyinfo
if which x11vnc &>/dev/null; then
  ! pgrep -a x11vnc && x11vnc -bg -forever -nopw -quiet -display WAIT$DISPLAY &
fi
! pgrep -a Xvfb && Xvfb $DISPLAY -screen 0 1024x768x16 &
sleep 1
if which fluxbox &>/dev/null; then
  ! pgrep -a fluxbox && fluxbox 2>/dev/null &
fi
echo "IP: $(hostname -I) ($(hostname))" 
```

^(注意：我在以下[Docker 项目](https://github.com/EA31337/EA-Tester)中使用它（检查`.funcs.cmds.inc.sh`）。)

### `x11vnc`使用单线运行

或者您可以使用以下单线：

```
$ x11vnc -create -env FD_PROG=/usr/bin/fluxbox \
    -env X11VNC_FINDDISPLAY_ALWAYS_FAILS=1 \
        -env X11VNC_CREATE_GEOM=${1:-1024x768x16} \
        -gone 'killall Xvfb' \
        -bg -nopw 
```

* * *

*   `-create`让它启动 Xvfb
*   `X11VNC_FINDDISPLAY_ALWAYS_FAILS=1`使其进入创建的 Xvfb 会话（显示`:1`而不是`:0`普通桌面）
*   `FD_PROG=/usr/bin/fluxbox`让它启动 Fluxbox（Ubuntu 的一个，应该有背景 Ubuntu 标志）
*   `X11VNC_CREATE_GEOM=${1:-1024x768x16}`将屏幕设置为 16 位颜色 1024x768
*   `-gone`退出时清理，否则 Xvfb 被留下（杀死`xvfb`也杀死`fluxbox`）

### 连接到 VNC

如果您的 Xvfb 仅在 localhost 上侦听，您可以设置到 localhost 的隧道，因此 vncviewer 可以连接到 localhost 以远程控制服务器。例如

```
ssh -N -T -L 5900:localhost:5900 user@remotehost &
vncviewer -encodings 'copyrect tight zrle hextile' localhost:5900 
```

或者要使用密码监听所有地址，请使用：

```
x11vnc -display :0.0 -usepw 
```

^(要设置密码，请运行：`x11vnc -storepasswd`。)

请参阅：Xvfb 维基百科页面上的[远程控制 SSH](https://en.wikipedia.org/wiki/Xvfb#Remote_control_over_SSH)

* * *

还要检查：

*   [在 Docker 容器中使用 VNCserver + GUI 应用程序 + 虚拟显示](https://stackoverflow.com/q/36221215/55075)
*   [带有 x11vnc 和 Xvfb 的 Ubuntu Fluxbox GUI](http://www.richud.com/wiki/Ubuntu_Fluxbox_GUI_with_x11vnc_and_Xvfb)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-02-10T07:54:26.103

您可以通过在 Xvfb 显示器上运行 VNC 服务器来获得实时视图，如下所示：

```
x11vnc -display :99 -localhost &
vncviewer :0 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-08-21T07:23:56.283

是虚拟的。从手册页`Xvfb(1)`：

> Xvfb 是一个 X 服务器，可以在没有显示硬件和物理输入设备的机器上运行。它使用虚拟内存模拟哑帧缓冲区。

同样在手册页中：

> `Xvfb -pixdepths 3 27 -fbdir /var/tmp` 服务器将作为服务器编号 0 侦听连接，将具有默认屏幕配置（一个屏幕，1280x1024x8），还将支持 3 和 27 的像素图深度，并将使用 /var/tmp 中的内存映射文件作为帧缓冲区。
> 
> `xwud -in /var/tmp/Xvfb_screen0` 显示前面示例启动的服务器的屏幕 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-16T15:08:29.830

一个简单的解决方案也是不断地对程序进行截图，如下所示：

```
while /bin/true; do
    DISPLAY=:99 import -window root ~/Pictures/xvfb_screenshot.png
    sleep 0.1
done &
PID=$!
feh --reload 0.1 ~/Pictures/xvfb_screenshot.png 2>/dev/null
kill $PID 
```

注意：需要安装*imagemagick*和*feh*

# android - android 短信内容提供商第一次没有提供价值

> ID：12050022
> 
> 赞同：1
> 
> 时间：2012-08-21T07:20:03.460
> 
> 标签：android, android-contentprovider

我正在开发一个 Android 应用程序。在我的应用程序中，我必须收听短信并显示对话。所以我使用以下代码。

```
 public void onReceive(Context context, Intent intent) {
     Bundle bundle = intent.getExtras();
     Object[] pdus = (Object[]) bundle.get("pdus");
     SmsMessage[] msgs = new SmsMessage[pdus.length];
     for (int i = 0; i < msgs.length; i++) {
        msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
        sender = msgs[i].getOriginatingAddress();
        message = msgs[i].getMessageBody().toString();
        smsSummary.append(getContactDisplayNameByNumber(sender, context));
        smsSummary.append(": ").append(message).append("\n");
    } 
```

上面的代码工作正常，我正在获取短信详细信息和内容。所以我必须检查短信内容提供商的对话。我使用了以下代码。

```
getConversation(sender,context);

public void getConversation(Context context){
    Uri uri = Uri.parse("content://mms-sms/conversations/");
    Cursor c= context.getContentResolver().query(uri, null, null ,null,"DATE desc");
//        startManagingCursor(c);
    System.out.println("c.getCount()===="+c.getCount());
    if(c.moveToFirst()){

            for(int i=0;i<c.getCount();i++){
             if(sender.equals(c.getString(c.getColumnIndexOrThrow("address")).toString())) {

                        body_new=c.getString(c.getColumnIndexOrThrow("body")).toString();
                        date_new=convertToDate(c.getString(c.getColumnIndexOrThrow("date")));
                        num_new=c.getString(c.getColumnIndexOrThrow("address")).toString();
                        tid=c.getInt(c.getColumnIndex("thread_id"));

                    }

                     c.moveToNext();
             }
    }
    c.close();
} 
```

当我从一个号码收到第一条短信时。getConversation() 方法没有列出该号码。例如。如果我没有任何对话，我从 yyyy 收到第一条短信。打印语句。

```
System.out.println(c.getCount()); 
```

将返回零。

就像如果我从数字 xxxx 得到一个 convarsation，那么我会从 yyyy 收到第一条短信。c.getcount() 的打印语句返回一个。这意味着仅 xxxx 信息。

如果我从 yyyy 收到第二条短信。那么它工作正常。我将获得 xxxx 和 yyyy 的对话详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:11:43.260

当您调用 getConversation() 方法时，消息可能不会写入 db。content://mms-sms/ 不是官方 API，它的行为可能很奇怪。尝试在其他地方调用 getConversation

# perl - 我在哪里可以找到一个好的 perl 脚本，用于备份我网站空间上特定文件夹中的所有文件的 cronjob？

> ID：12050024
> 
> 赞同：-1
> 
> 时间：2012-08-21T07:20:29.310
> 
> 标签：perl, ftp, automation, cron

我想在我的网络空间上自动备份。我的提供程序允许每天执行一次 cronjobs。我已经使用 perl 脚本实现了一个使用 mySQLdumper 备份我的数据库的 cronjob。现在我想使用一个脚本来备份我在特定文件夹（例如 /folder/）中的所有文件，压缩它们并将它们移动到 /backups/

有没有办法这样做？如果是，您能否推荐一个好的 perl 脚本模板，让我可以轻松修改它，以便我可以按照我想要的方式使用它？理想情况下，它还具有排除某些文件类型的功能，例如 jpg、gif 和 png。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:45:11.023

使用焦油：

[http://perldoc.perl.org/Archive/Tar.html](http://perldoc.perl.org/Archive/Tar.html)

基本上创建一个新的存档，启用压缩（zlib 或 bzip2）。

存档::Tar->create_archive($file, $compressed, @filelist)

添加文件使用：

$tar->add_files( @filenamelist ) 或 $tar->add_data ( $filename, $data, [$opthashref] )

使用 /bin/tar 可能更容易和更快，因为 tar 具有 --exclude 选项。

[http://linux.die.net/man/1/tar](http://linux.die.net/man/1/tar)

# css - 在 IE 和 Firefox 中隐藏锚轮廓的可访问性友好方式

> ID：12050027
> 
> 赞同：2
> 
> 时间：2012-08-21T07:20:38.907
> 
> 标签：css, internet-explorer, firefox, focus, accessibility

首先，*我知道*删除[轮廓会妨碍键盘导航](http://outlinenone.com/)。

谷歌浏览器（例如）解决这个问题的方法是只*在用户使用键盘时*显示轮廓。然而，即使我用鼠标单击，Internet Explorer 和 Firefox 似乎也会显示它们——我不喜欢这样。

所以我想要的是一种让 IE（如果可能的话，降到版本 7）和/或 Firefox 在我单击（在锚点上、锚点内的图像等）时不显示这些轮廓的方法，但在我单击时仍然显示它们使用键盘，就像 Google Chrome 的行为方式一样。

如果此解决方案仅适用于 CSS（即使使用非标准修复），那将是非常理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:23:10.690

这很好地解决了 IE 8 和 Firefox 的问题。

```
a:hover, a:active { outline: none; } 
```

然而，有一些事情让我永远想通了：如果链接的目标没有指向任何地方，它就不会起作用。这意味着它不适用于类似`<a href="#">`.

[来源](http://people.opera.com/patrickl/experiments/keyboard/test#outline-suppressed-on-hover-and-active)。

# ruby-on-rails-3 - 如何找到相关文档数量最多的文档（帖子最多的用户）？

> ID：12050028
> 
> 赞同：0
> 
> 时间：2012-08-21T07:20:42.663
> 
> 标签：ruby-on-rails-3, mongoid

我要做的是找到帖子最多的用户。`User`并且`Post`是`Mongoid::Document`

ActiveRecord 等效项`User.group(posts)`不起作用。我可以访问用户拥有的帖子数量`@user.posts.count`

如何在不按帖子数对所有用户的数组进行排序的情况下找到帖子最多的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:24:05.273

当您使用 :all 时，Mongoid 集合会响应 Array 函数。

```
User.all.max_by {|user| user.posts.count} 
```

这会遍历所有用户并找到帖子最多的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:28:43.437

如果您想要一种类似于 SQL 的方式，由数据库完成所有工作，那么没有。MongoDB 没有连接，也没有 SQL。如果您保持数据模型不变，则只能迭代所有用户，为他们获取帖子计数，然后进行排序。

但是您可以`N+1`通过将帖子计数保存到用户文档中的字段并保持其实际（在添加新帖子时增加等）来消除这种查询模式。这称为“计数器缓存”，有[几个](https://www.google.ru/search?q=mongoid+counter+cache&aq=0&oq=mongoid+counter+cache&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)[mongoid](/questions/tagged/mongoid "显示标记为“mongoid”的问题")插件可以做到这一点。

拥有该缓存列后，您可以毫无问题地对其进行排序。

# wpf - WPF - 扩展器不隐藏

> ID：12050030
> 
> 赞同：-2
> 
> 时间：2012-08-21T07:20:55.380
> 
> 标签：wpf, expander

当用户点击标题时，是否有可能，不允许隐藏扩展器？我有扩展器的自定义样式。我尝试设置 ToggleButton IsEnabled=false，但如果单击时没有任何反应，那会更好。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:38:37.223

*根据定义*， Expander是可折叠的；与之相关的视觉效果是巧合。听起来您想要的不是扩展器，而是类似于扩展器的视觉效果，但没有行为。

所以，干脆不要使用扩展器。如果您想要没有行为的 Expander 的视觉外观，请抓取 Xaml（使用 Blend 之类的工具）并重用它，或者重新设置现有控件的样式。

# php - 使用 TCPDF 显示现有 PDF

> ID：12050031
> 
> 赞同：0
> 
> 时间：2012-08-21T07:21:04.167
> 
> 标签：php, tcpdf

我正在使用 TCPDF 生成 PDF 并将它们显示在我生成它的页面中。我已经让用户选择将 pdf 存档到文件中。在我的应用程序中有一个部分显示所有存档文件。所以我的问题是，我如何使用 TCPDF 来显示现有的 PDF 文件并将其显示在 iFrame 中。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:30:39.037

您可以使用`<embed>`iframe 页面的标签来阻止下载。

链接 tcpdf.php 的`src`属性`<embed>`

```
<html>
<body>
<embed
type="application/pdf"
src="http://yoursite.com/tcpdf/tcpdf.php″
width="100%"
height="100%">
</embed>
</body>
</html> 
```

# objective-c - iOS / Objective-C：NSNotification

> ID：12050039
> 
> 赞同：1
> 
> 时间：2012-08-21T07:22:16.907
> 
> 标签：objective-c, ios, nsnotification

我有一个基于 Objective-C 中的 NSNotification 的问题：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                      selector:@selector(method:)
                                      name:@"SOME_STRING"
                                      object:nil]; 
```

我真的不知道如何设置对象属性...

那么，如果我只想接收来自 a 类的通知，如何将其设置为 a 类？

```
[A class] 
```

和

```
[A alloc] 
```

不工作。

我对对象参数感到非常困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:31:06.770

如果`nil`，那么您会收到所有`@"SOME_STRING"`通知。

如果没有`nil`，您只会得到与传递给的实例有关的那些`object`。

所以......它不是真正的“来自a类”的关联，它是与特定实例的关联。当实例匹配（观察和发布）时，您会收到通知。

有了这些信息，您可以使用返回的 objc 实例`[A class]`作为`object`参数来接收您感兴趣的通知——它看起来像这样：

**观察：**

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                      selector:@selector(method:)
                                      name:@"SOME_STRING"
                                      object:[A class]];
                                              ^^^^^^^ 
```

**邮政：**

```
[[NSNotificationCenter defaultCenter]
  postNotificationName:@"SOME_STRING" object:[A class]];
                                              ^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:32:44.820

object参数是你要观察的对象，不能观察一个类。

但是在您的方法中，您可以检查对象类：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                      selector:@selector(method:)
                                      name:@"SOME_STRING"
                                      object:nil];

- (void)method:(NSNotification*)notif
{
    if ([[notif object] isKindOfClass:[A class]]) {
        //...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T12:56:27.630

对于发布通知，您可以使用以下方法：-

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"testNotification" object:[A class]]; 
```

要接收通知，首先在您的 viewDidLoad 方法中添加以下方法：-

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(notifyWhenCalled:) name:@"testNotification" object:[A class]]; 
```

在选择器下方声明。这将在您的通知被触发时调用：-

```
- (void) notifyWhenCalled:(NSNotification *)notification
{
  if ([[notification object] isKindOfClass:[A class]]) 
  {
    //..... Write your code to do anything.
  }
} 
```

# iphone - 为什么我可以在 ScrollView 中向左、右、上、下拖动一个视图？

> ID：12050042
> 
> 赞同：1
> 
> 时间：2012-08-21T07:22:43.920
> 
> 标签：iphone, ios

我在 ScrollView 中有 3 个视图。我不明白，因为我想从左到右或从右到左滚动，但它可以让我将这些视图拖动到顶部或向下或向右或向左。我也使用了一些如下代码，但它不起作用。

```
scrollView.pagingEnabled=YES;
scrollView.showsHorizontalScrollIndicator=NO;
scrollView.showsVerticalScrollIndicator=NO;
scrollView.scrollsToTop=NO; 
```

有什么代码可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:31:49.810

设置 ScrollView 的 contentSize 并根据滚动视图内的视图设置它的高度。

它会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:33:59.487

设置您的滚动视图内容大小，如：

```
scrollView.contentSize = CGSizeMake(allviewstotalwidth,requiredHeight);// For eg:CGSizeMake(320+320+320,460); 
```

# c - 如何在 fscanf 的帮助下找出矩阵中列的大小？

> ID：12050048
> 
> 赞同：0
> 
> 时间：2012-08-21T07:23:02.650
> 
> 标签：c

我正在借助`fscanf()`. 有了`fscanf()`我就可以从文件中提取矩阵。但我无法找出矩阵的列大小。

输入文件是：
12 3 -4
6 5 7

```
int main()
{
    char arr[10],len;
    int count=0;

    FILE *input= fopen("input.txt", "r"); 

    while(fscanf(input,"%s",arr) != EOF)
    {   
        //fill into the output matrix. 
    }   
} 
```

但是如何在 的帮助下找出列的大小`fscanf`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:42:55.220

根据您的要求[getline](http://linux.die.net/man/3/getline)应该做的。您可以从 strlen 获取您要查找的行的长度。如果每列元素由空格或任何分隔符分隔，您所要做的就是用分隔符分割行并获取单个元素。如有疑问请回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:43:52.630

第一次，即使函数 getColumn 尝试读取。

```
int getColumn(FILE* fp){
    char buff[BUFSIZ]={0};
    int count=0;
    char *p;
    if(NULL==fgets(buff, BUFSIZ, fp))
        return -1;
    rewind(fp);
    for(p=buff;NULL!=strtok(p, " \t\n");p=NULL)
        ++count;
    return count;
}

...
FILE *input= fopen("input.txt", "r");
int column = getColumn(input);//3 
```

# tfs - 基于云的 Team Foundation Service 是否提供实验室管理功能？

> ID：12050051
> 
> 赞同：2
> 
> 时间：2012-08-21T07:23:16.077
> 
> 标签：tfs

Microsoft Team Foundation Server 有一个基于云的版本，名为“Team Foundation Service”。此基于云的服务是否提供实验室管理功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:31:17.137

您可以使用 CloudShare，这是一种云服务，可让您使用 Team Foundation Service 在云中创建实验室管理环境。 [http://www.cloudshare.com/](http://www.cloudshare.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:58:59.760

你好现在不负责

1 你可以在这里测试：http: [//tfspreview.com/](http://tfspreview.com/)

这是未来的发展之一

# javascript - Javascript 重置 element.style

> ID：12050053
> 
> 赞同：1
> 
> 时间：2012-08-21T07:23:18.097
> 
> 标签：javascript, css, document

我有一个脚本，可以为每个页面添加用户反馈表单。它用于`document.createElement()`构造表单（带有输入/文本区域/等）。有没有办法将这些创建的元素上的所有样式重置为浏览器默认值（包括悬停/焦点状态），或者创建不使用任何已定义样式的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:06:30.170

如果我正确理解了这个问题，答案是“不”。没有办法告诉某些元素可以免除页面的 CSS 代码。如果您`input { background: red }`在样式表中设置（只是一个引人注目的示例），则无法告诉浏览器表现得好像该规则不适用于特定`input`元素。您当然可以通过多种方式覆盖该设置，例如`#myForm input { background: white }`，但这意味着设置为特定值，而不是浏览器默认值。

因此，请尝试修改您的 CSS 规则，使其仅涵盖您希望它们涵盖的内容，通常使用更具体的选择器。

或者，您可以考虑在嵌入的单独文档中创建表单`iframe`（因为单独的文档将“服从”它自己的样式表），但这会涉及复杂性。

# ios - tableFooterView 属性中的 UIView 不适合 UITabelView 的滚动视图

> ID：12050054
> 
> 赞同：1
> 
> 时间：2012-08-21T07:23:21.477
> 
> 标签：ios, uitableview

我像这样设置我的 tableView 的 tableFooterView：

```
UIView *footerView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setFrame:CGRectMake(10, 10, footerView.bounds.size.width - 20, 44)];
[button setBackgroundImage:[UIImage imageNamed:@"addItemButton.png"] forState:UIControlStateNormal];
[button addTarget:self action:@selector(add) forControlEvents:UIControlEventTouchUpInside];
[footerView addSubview:button];
self.tableView.tableFooterView = footerView; 
```

但是，当我滚动到表格视图的最底部时，我的按钮被切断了。

如何确保显示整个按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:28:23.623

问题没有说明按钮是否被滚动视图剪切得不够向下。但如果是这种情况，您必须更改 UITableViews (UIScrollView) contentsize。

```
CGSize wholesize =  self.tableView.contentSize;

wholesize.height = self.tableView.contentSize.height + self.tableView.tableFooterView.frame.size.height;

self.tableView.contentSize = wholesize; 
```

希望有帮助。

# flash - 可以使用 Selenium 测试第 3 方 Flash 网页吗？

> ID：12050055
> 
> 赞同：1
> 
> 时间：2012-08-21T07:23:25.717
> 
> 标签：flash, selenium, selenium-rc

我需要使用 Selenium 或 Selenium RC 测试用于我的网站的第 3 方 Flash 页面。我读过一个教程，它说“要测试 Flash 对象，必须了解 Flash 对象的“内部结构”，并且您必须能够向 Flash 对象添加一些代码。您无法测试您在网上找到的任何 Flash ，一定是你的！” 这是真的吗？我可以使用 Selenium RC 或 Selenium 测试 3rd 方 Flash 页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:36:55.993

这是一个常见问题，我会将您转介到 selenium 组页面，在那里他们会说您在问题中提到的相同内容；Selenium 不能用于测试闪光灯

[https://groups.google.com/forum/?fromgroups=#!searchin/selenium-users/flash/selenium-users/urx3CY3lPRY/WIA-sblzTu8J](https://groups.google.com/forum/?fromgroups=#!searchin/selenium-users/flash/selenium-users/urx3CY3lPRY/WIA-sblzTu8J)

# c# - 从没有库或 API 的图像创建视频

> ID：12050057
> 
> 赞同：1
> 
> 时间：2012-08-21T07:23:40.087
> 
> 标签：c#, image, screen, recorder

我想创建一个屏幕录像机。为此，我将每秒截取特定数量的屏幕截图并将它们保存到临时文件夹中。一旦“录制”停止，它会将这些图像转换为视频。

有谁知道这是怎么可能的——不使用外部库或 API？

提前致谢

# javascript - 窗口调整大小后捕获结束高度

> ID：12050058
> 
> 赞同：0
> 
> 时间：2012-08-21T07:23:47.620
> 
> 标签：javascript

调整大小后如何捕获窗口的结束高度？使用 onResize 会在事件开始时给我窗口的高度。但是，我需要最终尺寸。感谢您提前回复。我发现了这个：[链接](https://stackoverflow.com/questions/2854407/javascript-jquery-window-resize-how-to-fire-after-the-resize-is-completed) 但是我可以在没有计时器或 jQuery 的情况下实现一些东西吗？

# javascript - javascript中的用户会话跟踪？

> ID：12050059
> 
> 赞同：1
> 
> 时间：2012-08-21T07:23:53.833
> 
> 标签：javascript, jquery

我在 phonegap（纯 js、html、css）中有一个应用程序，用户在其中登录，然后它可以访问一些附加站点。我的问题是如何保存他的个人数据或他的会话。发送 cookie 或处理会话不涉及 php。一切都需要保存在 JS (jQuery) 中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:26:04.330

您可以使用`HTML5`功能本地存储

例如；

当用户登录时，将一个变量设置为`isAuthenticated`本地存储

默认为0，登录成功后设置为1。

```
localStorage.isAuthenticated = 0; // default
OR
localStorage.setItem('isAuthenticated',0); 
```

登录成功时

```
localStorage.isAuthenticated = 1; // default
OR
localStorage.setItem('isAuthenticated',1); 
```

每当您想检查用户的真实性时，只需比较`isAuthenticated`本地存储中的变量值即可。

var isLoggedIn = localStorage.getItem('isAuthenticated');

```
if(isLoggedIn){
    //your code
} else {
    // invalid user code
} 
```

更新如果您要存储 javascript 对象，那么

```
var myObject = { 'one': 1, 'two': 2, 'three': 3 };

// Put the object into storage
localStorage.setItem('myObject', JSON.stringify(myObject));

// Retrieve the object from storage
var retrievedObject = localStorage.getItem('myObject');
retrievedObject = JSON.parse(retrievedObject) 
```

将您的对象转换为`string`using `JSON.stringify`，然后将其存储到本地存储中。`cast`在将其检索`string`回`javascript object`使用中时`JSON.parse`

查看本地存储文档，该功能似乎仅限于处理字符串键/值对。

您可以在此处查看文档

[苹果](https://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html)

[Mozilla](https://developer.mozilla.org/en-US/docs/DOM/Storage)

PS：Phonegap 与本地存储或任何其他 HTML 功能的工作无关。Phonegap 只是一个中间件，可以促进设备硬件和 javascript/html 代码之间的通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:33:08.580

这是关于 LocalStorage 和 SQL 数据库的 PhoneGap 文档：

[http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#localStorage)

# mysql - 共同好友sql集成复杂查询

> ID：12050062
> 
> 赞同：1
> 
> 时间：2012-08-21T07:24:02.973
> 
> 标签：mysql

历史：

一个事件有很多参与者。参与者都在活动中相遇，并向他们真正喜欢的所有其他参与者发出“赞”。

在活动结束时，管理员为该活动的每个参与者插入所有喜欢，系统将找到相互喜欢（友谊）

问题：在插入喜欢（双关语）系统以检测天气时，已经建立了友谊（也来自其他事件），如果是这样，请避免在设置喜欢时显示该用户名。

这是我正在使用的表（mysql）

## wp_fd_users

```
id | user_name | user_gender | ... etc
1  | x         | 0           | ...
2  | y         | 0           | ...
3  | z         | 1           | ...
4  | q         | 1           | ... 
```

## wp_fd_subscriptions

```
id | event_id | event_user_id | ...etc
1  | 1        | 1             | ...etc
2  | 1        | 2             | ...etc
3  | 1        | 3             | ...etc
4  | 1        | 4             | ...etc 
```

## wp_fd_matches

```
id | event_id | event_user_id | event_user_match_id | ... etc
1  | 1        | 1             | 3                   | ... etc
2  | 1        | 3             | 1                   | ... etc
3  | 1        | 1             | 4                   | ... etc 
```

这是 Gordon Linoff 好心给我返回 NON MUTUAL Friends 的问题

```
select m1.*
from wp_fd_matches m1 left outer join
     wp_fd_matches m2
     on m1.event_id = m2.event_id and
        m1.event_user_id = m2.event_user_match_id
        m1.event_user_match_id = m2.event_user_id
where m2.id is null 
```

现在我需要将它集成到以下查询中（并对其进行一些优化，以便该子查询不会返回所有记录然后过滤它们） - 这里它已经插入：

```
SELECT *, wp_fd_users.id AS userid, wp_fd_users.user_gender AS usergender
FROM wp_fd_subscriptions JOIN wp_fd_events ON event_id = wp_fd_events.id
JOIN wp_fd_users ON event_user_id = wp_fd_users.id
WHERE (wp_fd_subscriptions.event_id = 1
  AND wp_fd_users.id != 2 AND wp_fd_users.user_gender != 0
  AND wp_fd_users.id IN (
    select m1.user_event_match_id
    from wp_fd_matches m1 left outer join
    wp_fd_matches m2 on m1.event_id = m2.event_id and
      m1.event_user_id = m2.event_user_match_id and
      m1.event_user_match_id = m2.event_user_id where m2.id is null
    )
)
ORDER BY wp_fd_users.user_name; 
```

这将返回订阅表中与用户表和事件表连接的所有记录。具体来说，我需要得到的**不是已经参加过给定活动的给定用户的共同朋友**

上面写的 sql 现在总是给我同一行。

似乎避免了与任何其他用户有关系的任何用户

此外，如果我在查询中更改用户性别，我总是得到零结果。

**编辑：很难准确定义需要什么，但希望我能到达那里：查询必须返回所有用户： 1\. 参与事件 1，即使他们在 wp_fd_matches 表中没有任何条目 2\. 不是重点用户 3\. 无论如何都与重点用户没有相互关系**

其他讨论的链接在这里：[mutual non-mutual friend query mysql](https://stackoverflow.com/questions/12038471/mutual-non-mutual-friend-query-mysql)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:05:06.627

event_id = 1 并且您的用户 id = 1

```
SELECT u.*
FROM wp_fd_subscriptions AS s
JOIN wp_fd_users AS u 
   ON s.event_user_id = u.id
LEFT JOIN wp_fd_matches m1 
   ON m1.event_id = s.event_id 
   AND m1.event_user_id = 1
   AND m1.event_user_match_id = s.event_user_id
LEFT JOIN wp_fd_matches m2
   ON m1.event_id = m2.event_id 
   AND m2.event_user_id = m1.event_user_match_id
   AND m2.event_user_match_id = 1
WHERE s.event_id=1 AND u.id != 1 AND m2.id IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:55:37.107

问题不清楚。正如你所说，userid4 应该出现在结果集中

```
SELECT *, wp_fd_users.id AS userid, wp_fd_users.user_gender AS usergender
    FROM wp_fd_subscriptions JOIN wp_fd_events ON event_id = wp_fd_events.id
    JOIN wp_fd_users ON event_user_id = wp_fd_users.id
    WHERE (wp_fd_subscriptions.event_id = 1
      AND wp_fd_users.id != 2 AND wp_fd_users.user_gender != 0
      AND wp_fd_users.id IN (
        select m1.event_user_match_id 
        from wp_fd_matches m1 left outer join
        wp_fd_matches m2 on m1.event_id = m2.event_id and
          m1.event_user_id = m2.event_user_match_id and
          m1.event_user_match_id = m2.event_user_id where m2.id is null
        )
    )
    ORDER BY wp_fd_users.user_name; 
```

编辑：：

```
SELECT *, wp_fd_users.id AS userid, wp_fd_users.user_gender AS usergender
FROM wp_fd_subscriptions JOIN wp_fd_events ON event_id = wp_fd_events.id
JOIN wp_fd_users ON event_user_id = wp_fd_users.id
WHERE (wp_fd_subscriptions.event_id = 1
  AND wp_fd_users.id != 2 AND wp_fd_users.user_gender != 0
  AND( wp_fd_users.id IN (
    select m1.user_event_match_id
    from wp_fd_matches m1 left outer join
    wp_fd_matches m2 on m1.event_id = m2.event_id and
      m1.event_user_id = m2.event_user_match_id and
      m1.event_user_match_id = m2.event_user_id where m2.id is null
    ) or NOT EXISTS (SELECT * FROM wp_fd_matches b 
                       where  wp_fd_users.id =b.user_event_match_id))
)
ORDER BY wp_fd_users.user_name; 
```

# c# - 如何创建具有特定命名空间的 XElement？

> ID：12050067
> 
> 赞同：10
> 
> 时间：2012-08-21T07:24:13.280
> 
> 标签：c#, .net, xml, linq-to-xml

我在 LinqToXml 中创建新元素时遇到问题。这是我的代码：

```
XNamespace xNam = "name"; 
XNamespace _schemaInstanceNamespace = @"http://www.w3.org/2001/XMLSchema-instance";

XElement orderElement = new XElement(xNam + "Example",
                  new XAttribute(XNamespace.Xmlns + "xsi", _schemaInstanceNamespace)); 
```

我想得到这个：

```
<name:Example xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

但在 XML 中，我总是得到这个：

```
<Example xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="name"> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T10:29:17.947

`<name:Example xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">`由于未声明前缀，因此命名空间格式`name`不正确。因此，无法使用 XML API 构建它。您可以做的是构造以下命名空间格式良好的 XML

```
<name:Example xmlns:name="http://example.com/name" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" /> 
```

用代码

```
//<name:Example xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:name="http://example.com/name"></name:Example>

XNamespace name = "http://example.com/name";
XNamespace xsi = "http://www.w3.org/2001/XMLSchema-instance";

XElement example = new XElement(name + "Example",
new XAttribute(XNamespace.Xmlns + "name", name),
new XAttribute(XNamespace.Xmlns + "xsi", xsi));

Console.WriteLine(example); 
```

# vhdl - 帧上的数据结束

> ID：12050070
> 
> 赞同：0
> 
> 时间：2012-08-21T07:24:41.497
> 
> 标签：vhdl

我正在尝试为 SDI-12 协议编写代码

SDI-12的字节帧格式是

*   1 个起始位
*   7 个数据位，首先传输最低有效位
*   1个奇偶校验位，偶校验
*   1 个停止位

我想传输 24 位数据，即`100001101011001010000100`

当排列在框架中时看起来像

开始,1000011,P,停止,开始,0101100,P,停止,开始,1010000,P,停止,开始,100_ _ _ _,P,停止

其中 P 是奇偶校验位

问题是：

*   我应该在最后四位传输什么数据，即_ _ _ _
*   我怎么知道要发送的数据已经完成？

代码：

```
 library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_arith.all;
entity serialtx is
    generic (data_width : integer);
    port (clk, reset : in  std_logic;
           tx_data   : in  std_logic_vector(data_width-1 downto 0);
           tx_out    : out std_logic
    );    
end serialtx;
architecture behavioral of serialtx is
    type ofstate is (IDLE, START_bit, STOP_bit);
    signal state, nextstate      : ofstate;
    signal parity_bit, tx_enable : std_logic;
begin
    process
        variable count, p_val : integer := 0;
    begin
        if(clk'event and clk = '1' and tx_enable = '1')then
            if(reset = '1')then
                tx_out <= '0';
            else
                case state is
                    when IDLE =>
                        tx_out    <= '0';
                        nextstate <= START_bit;
                    when START_bit =>
                        count := count+1;
                        if(count >= 0 and count < 7)then
                            for b in p_val to data_width-1 loop
                                tx_out <= tx_data(p_val);
                            end loop;
                        elsif(count = 7)then
                            tx_out <= parity_bit;
                            p_val  := p_val+1;
                        elsif(count = 8) then
                            tx_out    <= '1';
                            nextstate <= STOP_bit;
                            count     := 0;
                        end if;
                    when STOP_bit =>
          --if--data to be sent is completed then    
                        tx_out    <= '1';
                        tx_enable <= '0';
          --else    
                        nextstate <= IDLE;
          --end if;    
                end case;
            end if;
        end if;
    end process;
end behavioral; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:03:46.287

> 我应该在最后传输什么数据，即_ _ _ _

为什么不用 0 填充您的输入数据，直到长度为 7 个数据位的下一个倍数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T17:07:38.170

你的方法不正确。您确实了解 SDI-12 的字节帧格式，但您还应该了解要传输到 SDI-12 传感器的 SDI-12 命令。

所有 SDI-12 命令均由 ASCII 字符组成，使用 1 个起始位、7 个数据位、1 个奇偶校验位（偶数）和 1 个停止位的字节帧格式传输。

您似乎正在尝试将“C，P”加上 3 个额外位传输到 SDI-12 传感器。根据 SDI-12 规范，这是无效的。用另外 4 位填充 3 个额外位（它们是做什么用的？）只是为了达到 7 位是没有意义的，并且“C，P”不是有效的 SDI-12 命令（除非传感器地址是“C”并且",P" 是 SDI-12 扩展命令，这是另一个话题）。

您需要将有效的 SDI-12 命令传输到 SDI-12 传感器。

SDI-12 命令的第一个字符始终是传感器地址，它是单个可打印的 ASCII 字符。SDI-12 命令的最后一个字符是“！” （ASCII 33 十进制）。

来自传感器的响应以回车/换行对终止（ASCII 13 十进制 + ASCII 10 十进制）。

最简单的 SDI-12 命令是确认活动命令。此命令用于查看特定传感器是否连接到 SDI-12 总线。

例如，如果传感器的地址是“0”（ASCII 32 十进制），Acknowledge Active 命令是：

```
0! 
```

如果它以正确的字节帧格式传输到 SDI-12 传感器，以 1200 波特，符合 SDI-12 规范的电气要求，并且如果地址为“0”的传感器在另一端，您将从传感器获取此响应：

```
0<CR><LF> 
```

SDI-12 规范列出了所有有效的 SDI-12 命令。您可以在以下网址获得一份副本： [www.sdi-12.org](http://www.sdi-12.org)。

# wpf - 比较 wpf datagrid 中的两个数据绑定单元格

> ID：12050071
> 
> 赞同：0
> 
> 时间：2012-08-21T07:24:44.193
> 
> 标签：wpf, triggers, wpfdatagrid

我希望将同一行数据中的数据绑定单元格相互比较，如果它们与它们所在的单元格不同，则以红色突出显示。

如果我静态地为转换提供一个值，则单元格会正确突出显示，但我一生都无法弄清楚如何比较同一行中的两个数据单元格。以下内容不起作用，因为 Value 参数不接受数据绑定项。这是我第一次涉足 WPF，所以请善待；）

谁能建议我如何在同一行数据上比较两个项目？

```
<DataGridTextColumn x:Name="oldContainerNumberColumn" Binding="{Binding OldContainerNumber}" Header="Old Container Number" IsReadOnly="True" Width="SizeToHeader">
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding OldContainerNumber,Converter={StaticResource StringComparisonConverter},ConverterParameter={Binding NewContainerNumber}}" Value="True">
                                    <Setter Property="Background" Value="Red" />
                                    <Setter Property="Foreground" Value="White" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>

                </DataGridTextColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:55:20.507

您无法绑定到，`ConverterParameter`因为它不是`DependencyProperty`.

您可以使用 a`MultiBinding`内`DataTrigger`：

```
<DataTrigger Value="True">
    <DataTrigger.Binding>
        <MultiBinding Converter="{StaticResource StringComparisonConverter}">
            <Binding Path="OldContainerNumber" />
            <Binding Path="NewContainerNumber" />
        </MultiBinding>
    </DataTrigger.Binding>
    <Setter Property="Background" Value="Red" />
    <Setter Property="Foreground" Value="White" />
</DataTrigger> 
```

当然，您必须将 StringComparisonConverter 更改为[IMultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)。

* * *

我认为更简单的解决方案是添加一个新属性进行比较。此示例中的内容如下：

```
class YourClass
{
    public int OldContainerNumber { get; set; }
    public int NewContainerNumber { get; set; }

    public bool IsEqual
    {
        get { return OldContainerNumber == NewContainerNumber; }
    }
} 
```

无需转换器：

```
<Style TargetType="DataGridCell">
    <Style.Triggers>
        <DataTrigger Binding="{Binding IsEqual}" Value="True">
            <Setter Property="Background" Value="Red" />
            <Setter Property="Foreground" Value="White" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

# python - 如何从python套接字编程中的另一个线程中唤醒被select.poll.poll（）函数阻塞的线程？

> ID：12050072
> 
> 赞同：5
> 
> 时间：2012-08-21T07:24:52.310
> 
> 标签：python, sockets

我无法唤醒被 poll.poll() 函数阻塞的线程。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-27T01:59:39.570

处理这个问题的方法是在传递给 poll() 的描述符列表中包含一个额外的文件描述符。对于该描述符，等待读取准备就绪。让任何其他想要唤醒等待 poll() 的线程*写入*该额外描述符的线程。此时，调用 poll() 的线程恢复执行，看到额外的描述符是唤醒它的描述符，然后执行任何操作。

最初获取这个额外文件描述符的正常方法是使用 pipe() 打开一个未命名的管道。这样你就有了两个描述符：一个是你在 poll() 中传递读取等待，另一个是你写入以唤醒等待 poll() 的线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-07T01:10:32.923

有许多正当理由希望在阻塞 poll(2) 或 select(2) 超时之前唤醒它。任何时候你需要从被轮询的 fd 列表中添加或删除一个套接字，你需要打破等待。如果您依赖超时，则超时必须很短才能做出响应，但短超时会导致大量不必要的颠簸。

无论如何，对于 Linux，您可以使用[eventfd(2)](http://linux.die.net/man/2/eventfd)创建一个文件描述符以添加到您的 fd 列表中。当您需要打破等待时，请写入 eventfd。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T07:36:14.690

在轮询调用中使用超时，这样它就不会无限期地阻塞。注意：超时值以毫秒为单位。

# python - OSX + Eclipse + PyDev - PATH 不正确

> ID：12050073
> 
> 赞同：1
> 
> 时间：2012-08-21T07:24:56.910
> 
> 标签：python, eclipse, macos, pydev, apt-get

尝试使用 Eclipse 和 PyDev（调试）使以下脚本在 OSX 上运行：

```
#------------------------------------------------------
import os, subprocess
from os.path import join as join_path

def cmd(command):
    print('$ ' + command)

    process = subprocess.Popen(command, shell=True, executable="/bin/bash", stdin=None, stdout=subprocess.PIPE, stderr=subprocess.PIPE)

    return process.communicate() + (process.returncode,)

stdout, stderr, error_code = cmd('echo $PATH')  
print(stdout, stderr, error_code)

stdout, stderr, error_code = cmd('echo $PYTHONPATH')  
print(stdout, stderr, error_code)

stdout, stderr, error_code = cmd('which python')  
print(stdout, stderr, error_code)

stdout, stderr, error_code = cmd('which apt-get')  
print(stdout, stderr, error_code)
#------------------------------------------------------ 
```

但是 $PATH 不是我在 .bashrc 或 .profile 中设置的，我无法运行 apt-get，它位于 sw/bin 中。运行 subprocess.Popen 时，我的 $PATH 似乎被覆盖或设置不正确。

这是我上面脚本的输出：

```
$ echo $PATH 
('/usr/bin:/bin:/usr/sbin:/sbin\n', '', 0) 
$ echo $PYTHONPATH ('/Applications/eclipse/plugins/org.python.pydev_2.6.0.2012062515/pysrc/pydev_sitecustomize:/Users/bryancdickson/Development/Lootsie/_repos/ap/ap:/Users/bryancdickson/Development/Lootsie/_repos/ap/ap/ap:/sw/bin:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages:/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload:/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC:/Library/Python/2.7/site-packages\n', '', 0) 
$ which python 
('/usr/bin/python\n', '', 0) 
$ which apt-get
> ('', '', 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:39:28.563

PyDev 可能会独立于 bash 配置文件中的设置设置 $PATH。

我建议你：

从具有正确 PATH 设置的 bash shell 启动 PyDev（我假设 Eclipse 将从 shell 继承环境）。

或者

在 Eclipse 中显式配置 PATH（我不知道如何执行此操作的详细信息，请在文档中搜索“环境变量”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T18:00:23.833

好的，想出了一个简单的解决方案。在这里找到了一些很好的笔记：[Mac OS X 中的环境变量](https://stackoverflow.com/questions/603785/environment-variables-in-mac-os-x)

从终端启动 Eclipse - 虽然很烦人 - 工作正常。从我的终端类型 /Applications/eclipse/eclipse 中获取我的环境变量：

> $ echo $PATH ('/sw/bin:/sw/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local /mysql/bin:sw/bin:/usr/local/mysql/bin:sw/bin:/usr/X11R6/bin\n', '', 0) $ echo $PYTHONPATH ('/Applications/eclipse/plugins/ org.python.pydev_2.6.0.2012062515/pysrc/pydev_sitecustomize:/Users/bryancdickson/Development/Lootsie/_repos/ap/ap:/Users/bryancdickson/Development/Lootsie/_repos/ap/ap/ap:/sw/bin :/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7:/System/Library/Frameworks/ Python.framework/Versions/2.7/lib/python2.7/plat-darwin:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac:/System/Library/Frameworks/ Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages：/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk:/System/Library /Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old:/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload:/System/Library /Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC:/Library/Python/2.7/site-packages:/sw/bin\n', '', 0) $ which python ('/usr /bin/python\n', '', 0) $ which apt-get ('/sw/bin/apt-get\n', '', 0)7/lib/python2.7/lib-dynload:/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC:/Library/Python/2.7/site-packages:/sw/bin \n', '', 0) $ which python ('/usr/bin/python\n', '', 0) $ which apt-get ('/sw/bin/apt-get\n', '' , 0)7/lib/python2.7/lib-dynload:/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC:/Library/Python/2.7/site-packages:/sw/bin \n', '', 0) $ which python ('/usr/bin/python\n', '', 0) $ which apt-get ('/sw/bin/apt-get\n', '' , 0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:36:33.560

您可以在以下位置找到内部 PyDev 首选项：

窗口：首选项：PyDev：解释器 - Python

这包括系统 PYTHONPATH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T12:38:52.940

从终端启动 Eclipse 对我来说适用于 Eclipse 4.3，但它不再适用于 Eclise 4.5 (Mars)

问题是`PATH`调用 subprocess.Popen 时变量设置不正确

一种解决方法是使用将真实添加`PATH`到环境中`os.environ`

```
import os
os.environ['PATH'] = os.environ['PATH']+':'+os.getenv('PATH') 
```

这对我有用（我只需要`PATH`在 Python 解释器的环境中添加变量及其值，请参阅首选项（Preferences -> PyDev -> Interpreters -> Python Interpreter -> Environment）

# c# - 调整大小时将组框捕捉到包含的控件

> ID：12050075
> 
> 赞同：2
> 
> 时间：2012-08-21T07:25:08.033
> 
> 标签：c#, visual-studio-2010, groupbox

调整组框的大小时，有没有办法将其捕捉到它包含的控件的边界？

目前，调整它的大小仅相对于组框外的控件捕捉，或者如果按下 Alt，它不会捕捉到任何东西。我在调整大小时尝试使用 Shift 或 Control，但对齐指南无法识别包含的控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T20:07:34.543

只需将 AutoSize 属性设置为 True，这样它就是自动的。如有必要，调整 Padding 属性以调整控件和框边缘之间的间隙。

# .htaccess - Joomla 链接在实时站点上正常，但在本地服务器上不正确

> ID：12050078
> 
> 赞同：3
> 
> 时间：2012-08-21T07:25:21.793
> 
> 标签：.htaccess, joomla, localhost, joomla1.5, mamp

我的 Joomla 网站一直在运行，没有任何问题。我想对其进行一些更改，所以我将整个站点和数据库下载到我的本地主机。当我加载本地站点时，一切都显示正常，但是所有内部链接都已更改。例如，现在显示链接为：

```
http://localhost:8888/centrevision/http:/localhost/centrevision/dvr-systems/view-all-products.html 
```

它应该在哪里：

```
http://localhost:8888/centrevision/dvr-systems/view-all-products.html 
```

我确定这只是配置文件或 .htaccess 中设置的一种情况，但我不知道具体要更改什么。

Joomla 版本是 1.5.26，我使用 MAMP 作为本地服务器。

任何帮助表示赞赏。

... htaccess

```
##
# @version $Id: htaccess.txt 21064 2011-04-03 22:12:19Z dextercowley $
# @package Joomla
# @copyright Copyright (C) 2005 - 2010 Open Source Matters. All rights reserved.
# @license http://www.gnu.org/copyleft/gpl.html GNU/GPL
# Joomla! is Free Software
##

#####################################################
#  READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that dissallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
#
#####################################################

##  Can be commented out if causes errors, see notes above.
Options +FollowSymLinks
#
# mod_rewrite in use

RewriteEngine On

########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
## This attempts to block the most common type of exploit `attempts` to Joomla!
#
## Deny access to extension xml files (uncomment out to activate)
#<Files ~ "\.xml$">
#Order allow,deny
#Deny from all
#Satisfy all
#</Files>
## End of deny access to extension xml files
# Block out any script trying to set a mosConfig value through the URL
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode data within the URL
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
########## End - Rewrite rules to block out some common exploits

########## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.
#
########## End - Custom redirects

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

RewriteBase /

########## Begin - Joomla! core SEF Section
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} (/[^.]*|\.(php|html?|feed|pdf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
########## End - Joomla! core SEF Section 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:28:07.990

在实时服务器上遇到了类似的问题。在 configuration.php 文件中添加实时站点有帮助：

```
 var $live_site = 'http://localhost:8888/centrevision'; 
```

希望这对你也有效。

# deployment - 使用 PostDeploy 的 SSDT 复合数据库参考

> ID：12050080
> 
> 赞同：7
> 
> 时间：2012-08-21T07:25:26.340
> 
> 标签：deployment, sql-server-data-tools

我有两个 SSDT 项目。数据库 1 引用数据库 2。

![数据库项目](../Images/61b723448c9f806e3887612e51b2619b.png)

部署 Database1 时，Table2（来自 Database2）按预期部署。那是因为在我部署时，选中了“包括复合对象”复选框。

问题是只有 Database2 中的模式/对象与 Database1 一起部署。作为 Database1 部署的一部分，脚本中不会生成“Script.PostDeployment.sql”文件。但是，当我将 Database2 直接部署到目标数据库时，它包含在脚本中。

如何包含来自引用的 dacpac 文件或 SSDT 项目的部署前/部署后脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T14:54:14.073

我相信你将不得不让数据库 1 的部署后脚本调用数据库 2 的部署后脚本。就像

```
 Use SQLCMD syntax to include a file in the post-deployment script.         
 Example:      :r .\myfile.sql 
```

我看不到任何其他方式，因为在大多数情况下，部署时可能不应该运行另一个数据库的部署后脚本。您可能还需要考虑将需要在部署两个数据库时运行的脚本部分重构到其自己的文件中，并在两个部署后脚本中引用它。

# android - G+ 应用上的通话活动

> ID：12050082
> 
> 赞同：2
> 
> 时间：2012-08-21T07:25:39.873
> 
> 标签：android, android-activity, google-plus

我想直接从 Google Plus Android 应用调用活动。更具体地说，打开 Chat+ 对话的活动已经存在。最终目标是在特定对话上拥有一个带有直接快捷方式的小部件。我知道可以打开 Chat+ 应用程序，但对话呢？我不要求获取对话列表等，而是直接访问一个。Chat+ 应用程序是否提供这种可能性？

更一般地说，我们如何查看应用程序提供的活动？Google 的 Android 应用程序是否有文档？

# android - 这是什么意思：对象是跨进程引用计数的。

> ID：12050083
> 
> 赞同：1
> 
> 时间：2012-08-21T07:25:41.703
> 
> 标签：android

该声明的含义及其含义是什么：

> 对象是跨进程引用计数的。

它来自附加说明部分中的 android[进程间文档](http://developer.android.com/guide/components/bound-services.html#Messenger)。

它是否与垃圾收集有关（不是每个进程都收集自己的对象）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:02:33.313

我阅读了@mparaz 给我的链接，其中谷歌框架工程师 Diane Hackborn 讨论了 Android Binder。

这是我从链接中了解到的：

Android Binder 是另一种 In-Kernel IPC 方法，它非常紧密地集成到 Android 核心的各个方面（从 UI 到系统的基础级别）。它将进程管理的各个方面与进程间通信相结合。它被编写为绕过/重新实现一些 linux 进程控制机制的内核模块。

据我所知，如果您使用这种类型的进程间通信，即使您的应用程序关闭，您也永远无法确定您的对象是否会被垃圾收集，除非您正在与之通信的应用程序也关闭并且该应用程序没有以相同的方式与任何其他应用程序进行通信（除非它是你的，否则你永远无法确定）。

所以基本上，在我看来，如果你以这种方式传递它们，你不应该依赖于你的对象的垃圾收集。除此之外，可以正常进行。

编辑 1：在相关说明中，有时这种 IPC 方法似乎必须手动关闭（而不是放弃），否则它可能会使您的应用程序崩溃（请参阅[调用您的 LicenseChecker 的 onDestroy() 方法以关闭 IPC 连接](http://developer.android.com/guide/google/play/licensing/adding-licensing.html)）。

# jquery - 设计和客户端验证

> ID：12050089
> 
> 赞同：0
> 
> 时间：2012-08-21T07:26:04.233
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3.2

嗨，我使用 Devise gem 并想使用 Client_side_validation 我安装 gem 并放入

```
//= require rails.validations 
```

进入我的资产/javasctipt/application.js

并以我添加的形式

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :validate => true ) do |f| %> 
```

我以为这就是我需要做的一切......但是当我失去焦点时 - 什么也没有发生（我的火虫中有一个警告）->

```
TypeError: settings is undefined
 .live('focusout', function() { $(this).isValid(settings.validators); }) 
```

在我有错误的地方不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:02:25.180

同样的问题，正在调查。

在我这边，似乎客户端验证导出的js，在我的情况下 `window['user_new']` 与表单的id不匹配 `new_user`

因此，当 rails.validation.js 尝试获取数据 `var settings = window[form.attr('id')];` 时它会失败。

[编辑]

在设计视图中，替换

```
= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :validate => true) do |f| 
```

经过

```
= form_for(resource, :validate => true) do |f| 
```

为我修好了！

不太确定为什么要`:as => resource_name`反转资源的名称？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:49:05.220

你用的是什么版本？3.2.0.beta.4 为我解决了这个问题，相应的 github 问题[在这里](https://github.com/bcardarella/client_side_validations/pull/343)。

# wcf - 使用 autofac 和 WCF IParameterInspector 的 IoC

> ID：12050091
> 
> 赞同：2
> 
> 时间：2012-08-21T07:26:07.973
> 
> 标签：wcf, autofac

我正在尝试在以下场景中使用 autofac：
一个 WCF 服务，在每个方法调用中，它都会接收用于打开数据库连接的连接详细信息。
（即`public UserDTO GetUser(string dbUsername, string dbPassword, int userId)`。

由于打开数据库连接对所有方法都是通用的，因此我想使用 an`IParameterInspector`来拦截每个方法调用，提取连接详细信息并初始化连接。

我的问题是 -
1\. 我不知道是否（以及如何）我可以将必要的工厂注入到我的`IParameterInspector`
2\. 一旦我创建了我的连接，我不确定如何在我的容器中注册它所以它将可供该请求的所有组件使用。

我`IParameterInspector`到目前为止：

```
 public object BeforeCall(string operationName, object[] inputs)
        {

            var userName = inputs[0] as Guid?;
            var password = inputs[1] as string;

            // How do I inject the ConnectionsFactory?
            var connection = ConnectionsFactory.CreateConnection(userName, password); 
           // How can I register my connection in the container, so that it'll be available to all dependencies created in this call?
            return null;
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:43:38.073

好的，想通了-
我的问题是在我的服务类被实例化*之后*`IParameterInspector`被调用。所以显然那不是进行初始化的地方。

 *实现 a`IInstanceCreator`被证明是正确的做法，因为它是在创建服务类*之前*调用​​的，并且实际上用于告诉 WCF 如何创建服务类。

我刚刚创建了一个 autofac *Lifetime Scope*，并用它注册了我的数据库连接。*

# java - Java 对象转换为整数和字符串包装器

> ID：12050092
> 
> 赞同：0
> 
> 时间：2012-08-21T07:26:11.337
> 
> 标签：java, jakarta-ee

我有`java.lang.Object`一个函数的返回类型。我想验证`Object`返回的任何值是否为数字类型（`double`或`long`或`int`或`byte`或或`Double`或`Long`或`Byte`或`Float`或`Double`......），如果它是真的想要转换为整数包装器引用类型。此外，如果`Object`实例包含一个`String`值，我希望它存储在字符串引用中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T07:30:29.780

> *具有`Object`函数的返回类型。我想验证返回的任何 Object 值是否为数字类型（double 或 long 或 int 或 byte 或 Double 或 Long 或 Byte 或 Float 或 Double ....）*

```
if (obj instanceof Number)
    ... 
```

> *如果它是真的想要转换成一个整数包装器引用类型*

```
if ...
    val = (Integer) ((Number) obj).intValue(); 
```

> *此外，如果 Object 实例包含一个 String 值，我希望它存储在 String 引用中。*

```
...
else if (obj instanceof String)
    val = obj; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:31:51.483

您可以执行以下操作：

```
Object obj = getProcessedObject();
if(obj instanceof Number) {
    // convert into a Integer wrapper reference type
Integer ref1 = ((Number)obj).intValue();
}
if(obj instanceof String) {
// process object for String
String ref = (String)obj;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:32:00.203

返回 Object 的方法不能返回基本类型，如 double、long 或 int。

您可以使用 instanceof 检查实际返回的类型：

```
if (object instanceof Number){
    // want to convert into a Integer wrapper reference type
    object = ((Number)object).intValue();  // might lose precision
} 
```

您可以通过类型转换分配给 String 变量

```
if (object instanceof String){
   stringVariable = (String)object;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:32:39.863

尽管您可能有一个严重的设计问题，但为了实现您想要的，您可以使用 instanceof 运算符或 getClass() 方法：

```
Object o = myFunction();
if(o instanceof Integer) { //or if o.getClass() == Integer.class if you want 
                       only objects of that specific class, not the superclasses
   Integer integer = (Integer) o;
   int i = integer.intValue();
}
   //do your job with the integer
if(o instanceof String)
   //String job 
```

# apache - 用于 Apache 2.4.2 HTTP 服务器的 SVN 模块

> ID：12050094
> 
> 赞同：4
> 
> 时间：2012-08-21T07:26:18.860
> 
> 标签：apache

哪些 SVN 二进制文件支持 Apache 2.4.2 HTTP 服务器？

因为我在为 SVN 模块（例如 mod_dav_svn.so 和 mod_authz_svn.so）加载模块时出错。

目前我正在使用 Apache 2.4.2 和 SVN 1.7.6 模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T14:16:56.723

我设法使用 Apache Haus 的二进制文件让它在 Windows 上运行：

[https://www.apachehaus.com/cgi-bin/download.plx#MODULES24](https://www.apachehaus.com/cgi-bin/download.plx#MODULES24)

无论如何，错误可能是因为 Apache bin 文件夹中缺少库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-16T00:28:05.863

你可以试试：

```
yum install mod24_dav_svn 
```

请参阅 apache 2.4 的论坛帖子*[mod_dav_svn](https://forums.aws.amazon.com/message.jspa?messageID=688549)*。

# android - 如何从Android中的动态文本制作png图像？

> ID：12050097
> 
> 赞同：4
> 
> 时间：2012-08-21T07:26:23.650
> 
> 标签：android, png

```
byte[] GetImageFromText(string text, float fontSize)
{
   //do make png image
   //and returns byte array
} 
```

我想得到一种像上面那样的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:43:43.367

谢谢卢米斯~

这是我的最终解决方案

```
float textSize = 30;
String text = "testing";
TextPaint tp = new TextPaint(TextPaint.ANTI_ALIAS_FLAG);
tp.setColor(Color.WHITE);
tp.setTextSize(textSize);
Rect bounds = new Rect();
tp.getTextBounds(text , 0, text.length(), bounds);
StaticLayout sl = new StaticLayout(text , tp, bounds.width()+5,
Layout.Alignment.ALIGN_NORMAL, 1f, 0f, false);

Bitmap bmp = Bitmap.createBitmap(bounds.width()+5, bounds.height()+5,
                        Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bmp);
sl.draw(canvas);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(CompressFormat.PNG, 100, stream);
byte[] image = stream.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:23:54.110

您可以先将文本视图绘制到位图中，然后您必须将其保存为 PNG 到私有应用程序内存或 SD 卡中并发送。以下是如何将文本转换为位图的示例：[如何将 TextView 绘制为位图（无需在显示器上绘制）](https://stackoverflow.com/questions/7298385/how-to-draw-a-textview-into-a-bitmap-without-ever-beeing-drawn-on-the-display/7298528#7298528)

# javascript - 重新调整由 innerHTML 悬停捕获的 div 上的事件，用户无法抓取重新调整大小的三角形

> ID：12050102
> 
> 赞同：0
> 
> 时间：2012-08-21T07:26:49.690
> 
> 标签：javascript, html, css

请不要使用 jQuery - 只有 JavaScript 或更好但更简单的 CSS

您可以在这里看到问题：尝试调整 div 的大小。

我有一系列具有动态内容的 div 标签，需要用户重新调整大小。当内部内容有悬停事件时，它会抓取该事件并且用户无法重新调整大小。动态内容可以是任意大小——通常比外部 div 大。我很想用 css 解决这个问题，但是向外部 div 添加填充或边距似乎没有帮助。这只适用于最新的 Firefox 和 Chrome。这不是确切的代码，但它显示了问题 - 至少在 FireFox 中：

```
<head>
    <style>
        #inner:hover {
            display:block;
            color:#FF00FF;
            background-color:grey;
            width:500px;
            height:400px;
        } 
    </style>
</head>
<div id="outer" style="resize:both;width:20px;overflow:hidden;">
    <div id="inner" style="width:90px;height:90px;">
        foobar<br>
        foobar<br>
        foobar<br>
        foobar<br>
        foobar<br>
        foobar
    </div>
</div> 
```

# javascript - fancybox 将内容更改为模态窗口

> ID：12050106
> 
> 赞同：0
> 
> 时间：2012-08-21T07:27:19.080
> 
> 标签：javascript, fancybox

我想改变一个fancybox中一个div的内容，我在我的html页面中有这个：

fancybox 的内联 div：

```
<div id="user_should_subscribe" style="display:none;">
  <div id="test">hi</div>

</div> 
```

需要在页面加载时自动显示fancybox：

```
 <script type="text/javascript">
  <!--
  $("#user_should_subscribe").fancybox({
    content: $("#user_should_subscribe").html()
  }).trigger("click");
  // -->
  </script> 
```

到目前为止，一切都很好。显示了幻想框，但如果我尝试更改 div#text 的内容，则内容不会改变。在fancybox里面我有一个ajax表单，当请求完成时我触发

```
$("#test").html('new') 
```

但没有任何改变，但如果我尝试以这种方式检查内容

```
$("#test").html('new')
alert($("#test").html('new')) 
```

我得到：**新**所以我认为问题与fancybox有关，因为 div#test 内容未正确呈现，有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T14:16:49.073

您没有打开 ID 为“user_should_subscribe”的元素，但您正在创建并打开其克隆（使用 .html() 方法），因此您现在拥有两个具有相同 ID 的相同元素。这就是为什么您的代码稍后只会更改第一个。

因此，您需要将元素打开为“内联”。例如（这将打开一次） -

```
<script type="text/javascript">
    $(document).ready(function() {
        $.fancybox.open({
            href : "#user_should_subscribe",
            type : 'inline'
        });
    });
</script> 
```

# asp.net-mvc-3 - mvc3、编辑器模板、css 类、最大长度和大小

> ID：12050109
> 
> 赞同：1
> 
> 时间：2012-08-21T07:27:28.860
> 
> 标签：asp.net-mvc-3, html, editortemplates

我有一个如下的编辑器模板，但类、最大长度和大小属性没有到达源代码。

```
@using System.Globalization
@model DateTime?
@Html.TextBox("", (Model != null && Model.HasValue && !Model.Value.ToString(CultureInfo.InvariantCulture).Contains("1900") && !Model.Value.ToString(CultureInfo.InvariantCulture).Contains("0001") ? Model.Value.ToString("MM/dd/yyyy") : string.Empty), new { @class = "datePicker", maxlength = "12", size = "12" }) 
```

我已将其更改为关注，它仍然是一样的

```
@Html.EditorFor(x => x.Criteria.FromDate, new { @class = "datePicker", maxlength = "12", size = "12" }) 
```

资源

```
<input class="text-box single-line" id="Criteria_FromDate" name="Criteria.FromDate" type="text" value="" /> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:17:32.637

确保您的编辑器模板命名为**DateTime** - 放置在文件夹 Views/Shared/EditorTemplates 中，并且您的模型 (Criteria.FormDate)与EditorTemplate 模型 ( **DateTime? ) 的****类型相同**。

 **如果所有 DateTime 字段都具有相同的最大长度和大小，您可以将它们硬编码在 EditorTemplate 中。您的 html 示例：

```
@EditorFor(x => x.Criteria.FormDate) //no need to pass html attributes object if they are not used in the editor template 
```

- 值得尝试`@EditorFor(model, "EditorTemplateName")`明确地说您希望 TemplateEditor 用于传递的模型。当您有多个相同模型类型的编辑器时就是这种情况，因此您显式调用它们（就像调用局部视图并将模型传递给它一样）。

**编辑：** 查看您的模板后，在我看来您的 Criteria.FormDate 是不可为空的。您应该考虑改进/重构模板中的代码。**

# sql - 获取国家/地区的 SQL 查询

> ID：12050110
> 
> 赞同：-2
> 
> 时间：2012-08-21T07:27:42.003
> 
> 标签：sql

我有一张带文件的桌子

表名：
**CountriesInfo**

```
国家 | 大陆
------|----------
印度 | 亚洲
中国 | 亚洲
爱尔兰 | 欧洲
英格兰 | 欧洲

```

1.  用户将选择一个国家
2.  系统应显示与所选国家/地区同一大陆的所有其他国家/地区，我只想使用 JOINS（而不是子查询）。有没有办法得到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:31:30.127

尝试这个：

您可以加入同一张表并获得结果：

```
select C.country
from   CountriesInfo C 
join
    (select *
     from  CountriesInfo
     where country='India')a
on C.continent=a.continent 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/ff01c7/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:45:20.843

> 系统应显示与所选国家/地区同一大陆的所有其他国家/地区，我只想使用 JOINS（而不是子查询）。有没有办法得到？

是的，这是获得它的方法。这适用于 SQL Server 和 MySQL。

```
SELECT DISTINCT C2.country 
FROM CountriesInfo C1 
JOIN CountriesInfo C2 ON C1.continent=C2.continent 
WHERE C1.country='INDIA' 
```

[查看 MySQL](http://sqlfiddle.com/#!2/3aa9e/1)
[的演示 查看 SQL Server 的演示](http://www.sqlfiddle.com/#!3/f3075/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:31:43.290

使用此查询自加入表：

```
SELECT T2.Country
FROM CountriesInfo T1
JOIN CountriesInfo T2 ON T1.Continent = T2.Continent
WHERE T1.Country = 'Ireland' 
```

当然，您可以将参数传递给 where 子句（而不是“Ireland”）。此查询本身是自加入的，为您提供与所选国家位于同一大陆的国家/地区列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:33:04.817

```
Select s.country 
from countriesInfo R, countriesInfo S
where r.country = 'india'
and s.continent = r.continent 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T07:34:33.857

```
SELECT DISTINCT ci2.country FROM CountriesInfo ci1
JOIN CountriesInfo ci2 ON ci1.continent=ci2.continent
WHERE ci1.country=<SELECTED_COUNTRY> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T07:35:17.423

这对我来说有点像家庭作业！一种方法是这样的：

```
DECLARE @chosenCountry VARCHAR(MAX)
SET @chosenCountry = 'India' -- Set it however you want here...

SELECT ciSameContinent.country FROM CountriesInfo ci
INNER JOIN CountriesInfo ciSameContinent ON ci.continent = ciSameContinent.continent
WHERE ci.country = @chosenCountry
AND ciSameContinent.country <> @chosenCountry -- Forgot this bit which is needed to exclude the chosen country as per the question 
```

这满足了要求，因为它返回来自同一大陆的 OTHER 国家（并且不包括所选国家）并且不使用子选择。

# php - 在mysql中一次删除多个表

> ID：12050118
> 
> 赞同：0
> 
> 时间：2012-08-21T07:27:59.217
> 
> 标签：php, mysql

您好我正在尝试从单个查询中删除多个表行。

我正在尝试使用

```
 $query="Delete from itineraries where itineraries_id='".$_REQUEST['id']."'
         Delete from itineraries_destination where itineraries_id='".$_REQUEST['id']."'
         Delete from itineraries_photo where itineraries_id='".$_REQUEST['id']."'"; 
```

但它不起作用。请建议我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:30:16.723

尝试

```
Delete i, d, p
from itineraries i
inner join itineraries_destination d on d.itineraries_id = i.itineraries_id
inner join itineraries_photo p on p.itineraries_id = i.itineraries_id
where i.itineraries_id = $_REQUEST['id'] 
```

[SQLFiddle](http://sqlfiddle.com/#!2/6fe5c/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:33:08.207

全部在手册[DELETE](http://dev.mysql.com/doc/refman/5.0/en/delete.html)中：

多表语法：

```
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    tbl_name[.*] [, tbl_name[.*]] ...
    FROM table_references
    [WHERE where_condition] 
```

或者：

```
DELETE [LOW_PRIORITY] [QUICK] [IGNORE]
    FROM tbl_name[.*] [, tbl_name[.*]] ...
    USING table_references
    [WHERE where_condition] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:34:52.513

1）您只能使用单个删除语句从一个表中删除

2) 缺少关键字 FROM - 例如。

从 test12 中删除...

如果您需要从多个表中删除，那么是否可以在删除级联时使用外键约束？

如果做不到这一点，我猜你将不得不编写一个 PL/SQL 函数来完成这项工作。

# c# - datagridview 中的列表列表

> ID：12050122
> 
> 赞同：1
> 
> 时间：2012-08-21T07:28:10.527
> 
> 标签：c#, list, datagridview

我有一份员工名单：

> 列出<Person> 员工；

Person 类有两个属性：
一个名称和一个他们每小时制作的小部件数量的列表（限制为 24 小时）

现在我想在 datagridview 中显示这个数组：我猜显示应该是这样的：

```
employees, 1,2,3,4,....,24 

anna     , 0,10,5,15,..,5  
jeff     , 1,6,2,......,4 
```

等等。

现在我只是做了一个 datasource=employees 绑定，这成功地显示了名称，但它甚至没有触及 List 属性。将整数列表添加到属性中是否有一些技巧？或者也许我应该为每个小时创建一个单独的属性来与列表交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:39:07.583

一个简单的选项是在类中创建一个“get”属性`Person`，将整数列表作为单个字符串返回，就像您想要输出的那样。

```
public string NumbersList
{
    get
    {
        return string.Join(", ", this.List);
    }
} 
```

当你绑定时，使用这个属性而不是列表，这样它就会显示你想要的长字符串（“1,3,4”）

# tridion - 出站电子邮件配置文件 API：获取电子邮件地址列表

> ID：12050123
> 
> 赞同：6
> 
> 时间：2012-08-21T07:28:11.203
> 
> 标签：tridion, tridion-2011

我正在开发一个 Java 控制台应用程序，该应用程序需要遍历 Tridion Outbound E-mail 2011 中前端数据库中的所有电子邮件地址，并更改该联系人的某个扩展字段。

我已经浏览了订阅 API 文档以获取有关如何获取所有电子邮件地址列表的线索，但我被困在那里。是否有任何干净的方法可以通过 API 来做到这一点，而无需求助于数据库查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:23:26.173

无法使用订阅 API 获取联系人列表。它主要用于与单个联系人合作，他们会在您的网站上更新他们的个人资料。

对于联系人的批量管理，您应该在您的内容管理服务器上使用 Tridion.AudienceManagement.API。然后更改将同步到您的所有网站。

您不应该直接在数据库中更改*任何内容，因为您**会*遇到同步问题。

# algorithm - 蜂巢中top-k查询的近似算法？

> ID：12050125
> 
> 赞同：1
> 
> 时间：2012-08-21T07:28:28.970
> 
> 标签：algorithm, hive, approximate

每个人，在蜂巢中，我们使用

```
select word,count(*) as cnt from table group by word order by cnt limit N 
```

用于前 N 个查询。
由于我们知道速度并不快，所以我学习了一些用于top-k查询的近似算法，例如countsketch算法或其他算法。
我们可以在 hive 中添加近似算法以加快 top-k 查询吗？

# release - G-Wan Web 服务器已经死了吗？

> ID：12050130
> 
> 赞同：-1
> 
> 时间：2012-08-21T07:28:43.183
> 
> 标签：release, g-wan

我们使用这台服务器已经快一年了。

最后一个论坛帖子出现在 2011 年 11 月。最后一个服务器版本发布于 2012 年 3 月 28 日。

只是想知道是否有人知道公司内部发生了什么？我们应该期待什么，还是应该开始寻找替代品？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T20:33:56.640

我做了你没有做的事情：使用电子邮件向能够回答的人提问。

他们回答说：

*   该论坛已关闭，因为他们无法应付每天为发布垃圾而创建的帐户数量

*   下一个版本将是 G-Wan 有史以来最重要的版本，具有缓存反向代理和弹性负载均衡器等新功能，以及免等待内存分配器等系统替换。

对于这样的事态发展，3 个月不发布版本听起来是合理的。

比假设这样的“不活动期”意味着*“项目已死”*更合理。

对于发布周期更长的其他 Web 服务器，例如 Apache，您会这么说吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T02:13:07.293

您应该始终对 G-WAN 有所期待。这是一个很棒的软件。这也是另一件事：G-WAN 是经过专业设计的。这并不意味着它没有错误，或者无法实现功能，但 G-WAN 非常紧凑。

它有精简的代码，它可以很好地完成它应该做的事情，并且它是为开发人员构建的，可以添加尚未放入其中的功能。

这就是它的美，或者美的一方面。

# ruby-on-rails - Rails 3 ActiveRecord 查询语法

> ID：12050131
> 
> 赞同：0
> 
> 时间：2012-08-21T07:28:48.960
> 
> 标签：ruby-on-rails, activerecord

**编辑**

这是工作语法...

```
Model.where('name like ?', "%#{q}%").where('value > ?', c) 
```

或者

```
Model.where("name like (?)","%#{q}%").where("value > ?",c) 
```

感谢海报在这方面的帮助。

* * *

**原始问题**

我无法理解活动记录语法。

这就是我想要做的

```
q = "John"
c = 50

Model.where('name like ? AND value > ?', "%#{q}%", "%#{c}%") 
```

这是错误的语法。

我想要实现的是

```
name like John AND value greater than 50 
```

如何在 ActiveRecord 中将不同类型的查询链接在一起？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T07:30:20.797

不要引用 q 和 c：

```
Model.where('name like ? AND value > ?', q, c) 
```

Rails 会自动将变量转换为适合您的字符串。

链接是指 where()、select()、order() 函数的链接，例如，这相当于上面的：

```
Model.where('name like ?', q).where('value > ?', c) 
```

如果您只想为 like 位包含 % 通配符，您可以执行以下操作：

```
Model.where('name like ?', "%#{q}%").where('value > ?', c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:33:52.357

你可以试试`Model.where("name like (?)","%#{q}%").where("value > ?",c)`。或使用 **范围**来帮助进一步轻松链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:50:10.020

对于使用 AREL 的 Rails 3，

```
ut = User.arel_table
users = User.where(ut[:name].matches("%#{q}%").and(ut[:value].gt(c)))
# SELECT "users".* FROM "users" WHERE ("users"."name" LIKE '%John%' AND "users"."value" > 50) 
```

# java - 如何在字符串中插入一个字符（java/groovy）？

> ID：12050138
> 
> 赞同：4
> 
> 时间：2012-08-21T07:29:59.483
> 
> 标签：java, groovy

我有一个像这样的字符串：

```
string = abcdefghabcd 
```

现在假设我想替换第一次出现的`a`. 我试过这样的事情：

```
string[string.indexOf('a')] = '0' 
```

但这似乎不起作用。我还有其他方法可以做到这一点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T07:33:24.887

在 Java 中，您可以使用[String.replaceFirst()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)：

```
String s = "abcdefghabcd";
s = s.replaceFirst("a", "0");
System.out.println(s); 
```

输出将是：

```
0bcdefghabcd 
```

警告：该`replaceFirst()`方法需要一个正则表达式：所以如果你想替换一个特殊字符，`[`你需要通过`\`在它前面放一个来转义。`\`作为一个特殊字符本身，您需要将其加倍如下：

```
s = s.replaceFirst("\\[", "0"); 
```

[这](http://docs.oracle.com/javase/tutorial/essential/regex/)是有关 Java 正则表达式的文档。此外，[这里](http://docs.oracle.com/javase/tutorial/java/data/manipstrings.html)是 Oracle 的关于在字符串中操作字符的 Java 教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:46:57.023

您应该知道 Java 中的字符串是不可变的。它们不能改变。您用来“更改”字符串的任何方法都必须返回一个新字符串。如果要直接修改字符串，则需要使用可变字符串类型，例如 StringBuilder。

[String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html) API 文档中有许多方法可以帮助您获得字符串的修改版本，包括 s.replace()、s.replaceAll()、s.replaceFirst() ......或者您可以使用以下组合子字符串和“+”创建一个新字符串。

如果您真的想将字符串视为初始示例中的数组，则可以使用 String.getChars 获取字符数组，对其进行操作，然后使用 String 构造函数 String(char[]) 转换回字符串对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:41:16.453

在这个程序中，您将需要使用 Java 中 String 类的 replaceFirst() 方法。

```
 /*
Java String replace example.
This Java String Replace example describes how replace method of java String
class can be used to replace character or substring by new one.
*/

public class JavaStringReplaceExample{

    public static void main(String args[])
{

String str="abcdefghabcd";

 System.out.println(str.replaceFirst("a", "0"));
}
 } 
```

你可以参考[这里](http://www.javadeveloper.co.in/java-example/java-string-replace-example.html)了解详情

# javascript - .unbind().click(function() {...}) 是一个好习惯吗？

> ID：12050140
> 
> 赞同：4
> 
> 时间：2012-08-21T07:30:04.543
> 
> 标签：javascript, jquery, jquery-events

我说的是以下内容：

```
.unbind().click(function () {
    // Do something
} 
```

对我来说它看起来有点狡猾，但它是有道理的：开发人员希望首先删除绑定到元素的所有事件，然后绑定一个点击事件。

这个问题有更好的解决方案吗？或者纠正我的思维方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T07:49:34.153

这不是一个很好的做法，因为您无法控制哪些点击事件未绑定。有两种不同的方法可以改善这一点：

## 使用事件命名空间（更快）

您可以使用命名空间来控制您取消绑定您将再次绑定的单击事件：

```
$(selector).off('click.namespace').on('click.namespace', function(e) { //... 
```

## 使用类（最快）

使用添加到链接的类将其标记为已注册（这不会取消绑定以前绑定的事件，但它有助于防止多个事件绑定，这是在大多数情况下您会在(bind)`off`之前使用 (unbind)的问题：`on`

```
$(selector).not('.registered').addClass('registered').on('click', function(e) { //... 
```

你甚至可以把它变成一个小性感的插件，写：

```
$.fn.register = function(register_class) {
  register_class || (register_class = 'registered'); // lets you control the class
  return this.not('.' + register_class).addClass(register_class);
}; 
```

像这样，你可以调用`register`每个选择器：

```
$(selector).register().on('click', function(e) { //... 
```

或者对于特定的类，如果采用 «registered»：

```
$(selector).register('special_handler_registered').on('click', function(e) { //... 
```

## 表现？

如果您想知道不同处理程序的性能：

**[在此处查看此性能测试](http://jsperf.com/rebindvsregisterjquery2/2)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:33:43.820

每当我不得不“更新”某些按钮、链接等行为时，我都会采用这种方法，我认为它没有任何问题。但请注意，使用您的代码，您将删除附加到元素的每个处理程序。所以与其：

```
$(selector).unbind('click').click(function(){
    // do something
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:34:53.653

好吧，至少最好指定哪些事件处理程序应该解除绑定。因此，如果有一些点击事件处理程序并且我们只想取消绑定它，那么我们可以使用`unbind('click')`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T07:37:35.133

由于除了您的处理程序之外可能还有其他一些处理程序，因此使用命名空间是有意义的。

```
$(selector).off('click.myns').on('click.myns', function() {....})

or 

$(selector).unbind('click.myns').bind('click.myns',function() {...}) 
```

这样你只会接触到你自己的处理程序，而不是其他一些处理程序，例如由 jquery 插件添加的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T07:37:43.257

我通常会尽可能使用命名事件函数，以便能够显式地解除绑定：

```
$('a').unbind('click.myfunc').bind('click.myfunc', function(evt) { ... }); 
```

通过这种方式，您可以将此绑定添加到可以多次执行的 init 函数中（适用于因任何原因无法使用委托的情况）。

一般来说，如果我不需要，我不会尝试解除绑定每个事件甚至某个事件的每个处理程序。

我也试图保持最新状态并用开/关替换所有绑定/取消绑定调用;-)

# c# - 如何在 MVC 中获取 DropDownList 的选定值

> ID：12050143
> 
> 赞同：7
> 
> 时间：2012-08-21T07:30:19.983
> 
> 标签：c#, asp.net-mvc

如何从 MVC 中的 DropDown 中获取选定的值？我想将它分配给一个变量。

这是我的控制器动作：

```
public ActionResult Drop()
{
    List<SelectListItem> items = new List<SelectListItem>();
    items.Add(new SelectListItem { Text = "Action", Value = "0" });
    items.Add(new SelectListItem { Text = "Drama", Value = "1" });
    items.Add(new SelectListItem { Text = "Comedy", Value = "2" });
    items.Add(new SelectListItem { Text = "Science Fiction", Value = "3" });
    items.Add(new SelectListItem { Text = "Horror", Value = "4" });
    items.Add(new SelectListItem { Text = "Art", Value = "5"  });
    ViewData["Options"] = items;
} 
```

这是我的看法：

```
@Html.DropDownList("Options", ViewData["Options"] as SelectList, "--Select Item--") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T07:42:13.757

**看法**

```
@using (Html.BeginForm())
{ 
    <h2>Drop</h2>
    @Html.DropDownList("Options", ViewData["Options"] as SelectList, "--Select Item--")

    <input type="submit" name="submit" value="Submit" />
} 
```

**控制器** 添加新动作

```
[HttpPost]
public ActionResult Drop(FormCollection form)
{
    var optionsValue = form["Options"];
    //TODO:
    return RedirectToAction("Drop");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T18:37:47.310

另外，请考虑如果您没有在帖子中使用 FormCollection，您可以轻松使用以下内容，这非常有用，特别是如果您在主视图中使用部分视图。

```
[HttpPost]
public ActionResult Drop(SelectListItem item)
{

    var selectedValue = Request.Form["ID_OF_THE_DROPDOWNLIST"];
    //TODO......
    return RedirectToAction("Drop");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-01T15:57:29.193

看法 ：

```
@using (Html.BeginForm("Index", "Home", FormMethod.Get))
{
    <fieldset>
        Select filter
        @Html.DropDownList("SelectFilter", @Model.ddlList)
        <p>
            <input type="submit" value="Submit" />
        </p>
    </fieldset>
} 
```

控制器 ：

```
 public ActionResult Index(string SelectFilter)
        {
            var _model = new Models.MyModel();

            List<SelectListItem> listDDL = new List<SelectListItem>();
            listDDL.Add(new SelectListItem { Text = "11", Value = "11" });
            listDDL.Add(new SelectListItem { Text = "22", Value = "22" });
            listDDL.Add(new SelectListItem { Text = "33", Value = "33" });
            ViewData["ddlList"] = listDDL;

//We add our DDL items to our model, you can add it to viewbag also
//or you can declare DDL in view with its items too
            _model.ddlList = listDDL;
            return View();
        } 
```

模型 ：

```
Public class MyModel
{
     public List<SelectListItem> ddlList = new List<SelectListItem>();

} 
```

# html - Ctrl-Z 清除 IE 中的文本区域内容

> ID：12050150
> 
> 赞同：0
> 
> 时间：2012-08-21T07:30:36.677
> 
> 标签：html, internet-explorer, cross-browser, textarea

 `````
<textarea name="" cols="" rows="" id=updateGroupDescription></textarea> 
````  `上面的 textarea 在 div 弹出窗口中打开。单击文本区域。

执行 ctrl-z 清除 IE 中 textarea 的内容。

但这不会在其他浏览器中发生。尽管 ctrl-z 功能似乎在所有浏览器中都能正常工作，但 IE 甚至在编辑之前就会清除内容。

对此的任何建议都会非常有帮助..谢谢``

# php - cakephp 概念 acl

> ID：12050152
> 
> 赞同：0
> 
> 时间：2012-08-21T07:30:39.100
> 
> 标签：php, cakephp, acl

我正在研究 CakePHP 中 ACL 的使用，这令人困惑……我什么都不懂。

使用 ACL，我可以允许或拒绝对页面的访问（我得到的那部分）。但是，例如，我想确保该用户不能修改另一个用户。我可以使用 ACL 执行此操作还是仅用于在查询中创建/更新删除？

该项目仍处于规划阶段，因此我没有任何代码可显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:38:23.453

CakePHP acl 是动作基础，这意味着如果您有文章控制器的创建、删除、编辑、...动作，您可以允许或拒绝任何人，但您不能指定（允许/拒绝）中的任何事件行动。

如果您的操作中有很多事件，例如在文章控制器的编辑操作中您有发布、文件上传、图像上传等事件，因此您无法使用本机 acl 系统处理此事件，您必须通过你自己的代码。

# asp.net - 如何使用 Listbox 的 HTML Helper？

> ID：12050157
> 
> 赞同：2
> 
> 时间：2012-08-21T07:30:57.603
> 
> 标签：asp.net, asp.net-mvc, html-helper

我正在尝试使用 HTML Helpers 创建一个简单的列表框，但我找不到任何可以指导我完成此操作的资源。

```
<%= Html.ListBox("listbox_name") %> 
```

它要求`IEnumerable(SelectListItem)`我不知道如何创建并通过它。

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:56:29.830

取决于您希望如何为列表框提供数据。如果它是静态数据，您可以简单地`List<SelectListItem>`在视图中声明 a 并将其传入：

```
var mySelectItems = new List<SelectListItem> { 
    new SelectListItem { Text = "First item", Value = "1" },
    new SelectListItem { Text = "Second item", Value = "2" }
};
...
Html.ListBox("listbox_name", mySelectItems) 
```

否则，只需从您获取数据的任何地方获取数据，并将其与模型一起传递

# objective-c - 将当前日期与日期选择器目标-C 的后一天和前一天相加

> ID：12050159
> 
> 赞同：3
> 
> 时间：2012-08-21T07:31:07.720
> 
> 标签：objective-c, ios, datepicker, nsdate

我有一个日期选择器，我希望只有一行有 3 个选项：当前日期、后一天和前一天。

你会帮我这样做吗？

**我的问题是，如何在后一天和前一天添加“当前日期”？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:10:44.270

```
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:days];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *end = [gregorian dateByAddingComponents:components toDate:[NSDate date] options:0]; 
```

其中 days 是一个整数，表示您要从当天添加/减去的天数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T11:45:12.380

我就是这样做的——

```
 -(void)getDate{
    NSString *str_CurDate  =[self getCurrentDate];
    NSString *str_NextDay  =[self getFormattedDate:[self dateByAddingDays:1]];
    NSString *str_PrevDay  =[self getFormattedDate:[self dateByAddingDays:-1]];

} 
```

现在实现这些方法

```
-(NSString*)getCurrentDate{

NSDate *currDate = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"d/M/yyyy"];
NSString *dateString = [dateFormatter stringFromDate:currDate];
return dateString;

}

- (NSDate *) dateByAddingDays:(int)days {

NSDate *retVal;
NSDateComponents *components = [[NSDateComponents alloc] init];
[components setDay:days];

NSCalendar *gregorian = [[NSCalendar alloc]    initWithCalendarIdentifier:NSGregorianCalendar];
retVal= [gregorian dateByAddingComponents:components toDate:[NSDate date] options:0];

return retVal;

}

-(NSString*)getFormattedDate:(NSDate*)myDate{

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"d/M/yyyy"];
NSString *dateString = [dateFormatter stringFromDate:myDate];

return dateString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T22:38:10.237

封装在一个类别中`NSDate`

```
- (NSDate *) dateByAddingDays:(int)days {
    NSDate *retVal;
    NSDateComponents *components = [[NSDateComponents alloc] init];
    [components setDay:days];

    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    retVal = [gregorian dateByAddingComponents:components toDate:self options:0];
    return retVal;
} 
```

# javascript - Jquery：$.when 的行为取决于参数的数量

> ID：12050160
> 
> 赞同：6
> 
> 时间：2012-08-21T07:31:14.810
> 
> 标签：javascript, jquery, jquery-deferred

$.when 行为不同，具体取决于是否将一个或多个 Deferred 对象传递给它。这种行为记录在文档中 - 但问题是它迫使我编写两个不同的代码路径。

```
function foo (dfds) {
    $.when.apply(this, dfds).done(function() {
        console.log(arguments);
    });
} 
```

案例一：

```
foo([$.getJSON("http://freegeoip.net/json/8.8.8.8"),
     $.getJSON("http://freegeoip.net/json/8.8.8.9")]);
....
/* Output (what I'd come to expect) */
[Array[3], Array[3]] 
```

案例二：

```
foo([$.getJSON("http://freegeoip.net/json/8.8.8.8")]);
....
/* Output (the original unwrapped deferred's arguments) */
[Object, "success", Object] 
```

有什么方法可以优雅地处理这个问题而无需检查 的长度`dfd`或类型`arguments`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:39:37.087

我认为您无法避免显式测试延迟对象的数量。假设您要返回延迟对象：

```
function foo (dfds) {
    if(dfds.length > 1) {
        return $.when.apply(this, dfds);
    }
    else {
        return dfds[0].pipe(function() {
            return [Array.prototype.slice.call(arguments, 0)]
        });
    }
} 
```

您可以创建一个 jQuery 插件来包装此功能并使其可重用：

```
(function($) {
    $.when_ = function() {
        if(arguments.length > 1) {
            return $.when.apply(this, arguments);
        }
        else {
            return arguments[0].pipe(function() {
                return [Array.prototype.slice.call(arguments, 0)];
            });
        }
    };
}(jQuery)); 
```

您也可以覆盖`$.when`，但我不确定它是否在内部使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:01:22.660

jQuery 有一个搞乱参数逻辑的坏习惯。在您的情况下，如果您想要为每个延迟对象进行回调，一个简单的循环会对其进行规范化：

```
$.each(dfds, function() {
    $.when(this).done(function() {
        console.log(arguments);
    });
}); 
```

您还可以循环参数，这样您就不必发送数组：

```
function foo() {
    $.each(arguments, function() {
        $.when(this).done(function() {
            console.log(arguments);
        });
    });
} 
```

**更新**

如果您总是想返回一个延迟对象数组，您可能需要检查`foo`Felix 发布的参数长度，或者执行以下操作：

```
function foo() {
    $.when.apply(this, arguments).done(function() {
        var args = $.makeArray(arguments),
            result = args[0].constructor != Array ? [args] : args;
        console.log(result);
    });
} 
```

[http://jsfiddle.net/2ht8d/](http://jsfiddle.net/2ht8d/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T16:32:18.363

只需将虚拟对象推到 dfds 数组的末尾即可。假设您至少有一个延迟，这将确保它的长度始终为 2 或更大。

# file - Bash 按日期显示文件

> ID：12050161
> 
> 赞同：0
> 
> 时间：2012-08-21T07:31:18.440
> 
> 标签：file, bash, shell, unix

我只是创建 bash 脚本来： 打印特定月份登录目录中文件的长列表。系统会提示用户输入月份名称的前 3 个字母，以大写字母开头，程序将显示该月份最后修改的所有文件的长列表。

例如，如果用户输入“Jul”，则会列出所有在 7 月最后修改的文件。

是否可以按日期对文件进行排序然后限制它们？或者可以用不同的方式做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:33:11.763

看看这个答案：[https ://stackoverflow.com/a/5289636/851273](https://stackoverflow.com/a/5289636/851273)

它涵盖月份和年份，但您可以删除与年份的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:56:31.623

这是应该做的脚本

```
Month=Dec
ls -ltr |awk '$6 ~ /'$Month'/ {print $9}' 
```

这将使 awk 查看 ls 字段（$6）中的日期字段， ls -ltr 将按日期对其进行排序。这将展开变量 $Month 并使用它来搜索 $6 字段，并打印出文件名（第 9 个字段 $9）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:38:31.480

```
read mon

la -la | grep $mon 
```

您可以`grep -i`使用不区分大小写的 grep。因此用户输入可能变得不区分大小写。

注意：这是粗略的，因为它返回文本与月份名称匹配的结果。例如：它将返回按月命名的文件。要完善这一点，您只需查看日期列

# parsing - scalac缺少带有奇怪行号的右括号错误报告

> ID：12050166
> 
> 赞同：6
> 
> 时间：2012-08-21T07:31:38.223
> 
> 标签：parsing, scala, compiler-construction, scalac

当我一直在学习 Scala`g++`时，我经常在读取来自`scalac`. 然而，今天我遇到了一些我怀疑即使在`g++`宇宙中也会发生的事情。

一位朋友给我发了一个非常简单的代码片段，其中包含一个相当常见的错误：

```
case class Var(name: String) extends ArithExpr {
  override def eval(env: Env) =  env.lookup(name) match {
    case Some(d) => d
    case None => throw new IllegalArgumentException("Env " + env + " does not contain a binding for " + name)
  }
  override def exprString = name
// } // <-- MISSING THIS BRACE 
```

完整的源文件[发布在这里](https://www.refheap.com/paste/4518)。由于`case class Var`类声明缺少右大括号，您会认为编译器会告诉您该声明的左大括号（第 11 行）缺少右大括号。然而，报告它“假设”在前一个声明`scalac`的中间缺少一个右括号（在第 7 行）。`case class`（完整的错误输出包含在发布的代码的底部。）

如果您了解语言的内部结构，大多数`scalac`错误消息都是有意义的，但我在这里完全不知所措。后面的类声明中缺少的右大括号如何最终传播到文件前面已经成功解析的类定义？

您到底是如何向 Scala 初学者解释这一点的？省略右括号正是 Scala 新手通常会犯的错误，但这里的错误消息似乎会让用户误入歧途，因此报告类似的内容可能会更有帮助`error: you seem to be missing a '}' somewhere`。

*注意：我知道此类问题的通常答案只是“使用 IDE，增量编译会立即标记它”或“语法突出显示应该使这个错误显而易见”——但我的问题是专门询问`scalac`输出，所以请请记住，我知道这些是有效的点，但我真的只想了解编译器在这里发生了什么。*

## 更新：

让我尝试一种不同的方法来解释我的困惑。该错误源于缺少右大括号，因此显然是大括号嵌套的问题。将我发布的片段中的文本（代码）转换为一系列行号+大括号对，我们得到：

```
1{ 4}
6{ 9}
11{ 12{ 15}
    19{ 22}
    24{ 26}
    28{ 33} 
```

我们显然缺少一个右括号。我可以理解`scalac`猜测缺少的大括号可能会出现在以下任何一个地方（每个地方都由 表示`x`）：

```
1{ 4}
6{ 9}
11{ x 12{ x 15} x <-- HERE OR HERE OR HERE
      19{ x 22} x <-- OR HERE OR HERE
      24{ x 26} x <-- OR HERE OR HERE
      28{ x 33} x <-- OR HERE OR HERE 
```

但是，这就是输出的内容`scalac`：

```
 +----- I THINK YOU ARE MISSING A
   |      CLOSING BRACE RIGHT HERE!
1{ V 4}
6{ x 9} 
11{ 12{ 15}
    19{ 22}
    24{ 26}
    28{ 33} 
```

输入的那部分已经很好地嵌套了！在那里添加另一个右括号怎么可能有意义？

**编辑：**我觉得我应该再次重申我的主要问题：*您将如何向 Scala 的新手解释此错误消息（以及如何在源代码中找到错误的根源）？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:10:59.847

考虑以下示例（我故意删除了缩进）：

```
case class Foo( i: Int ) {
case class Bar( d: Double ) {
def get = d 
} 
```

它无法编译，但有几个可能的正确代码：

```
case class Foo( i: Int ) {
}
case class Bar( d: Double ) {
  def get = d 
}

//OR

case class Foo( i: Int ) {
  case class Bar( d: Double ) {
    def get = d 
  }
}

//OR even (still won't compile but the structure is correct so the compiler will proceed with
//another error)

case class Foo( i: Int ) {
  case class Bar( d: Double ) { }
  def get = d 
} 
```

那么编译器应该如何猜测哪个版本是正确的呢？在这种情况下，它会选择第一个有意义的位置：

```
hello.scala:3: error: Missing closing brace `}' assumed here
def get = d 
```

这对应于第三个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:29:36.107

根据 Jörg W Mittag 在他对我的问题的评论中提出的建议，我在 Scala 问题跟踪器中**重新打开**了一张旧票：[Confusing Unmatched closing括号 errors](https://issues.scala-lang.org/browse/SI-2968)。我已将来自这个问题的代码添加为此类令人困惑的错误消息的新的、简短的、可重现的示例。

# java - 无法在jsp页面中运行java代码

> ID：12050169
> 
> 赞同：-1
> 
> 时间：2012-08-21T07:31:48.313
> 
> 标签：java, jsp

在java中它的工作......但在jsp页面中......无法在JSP中创建文件......

**在纯 JAVA 中：A.java**

```
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.StringTokenizer;

public class A {

    public static void main(String[] args) throws IOException {
        String x = "name,age";
        Connection connection = null; 
        try { // Load the JDBC driver 
         String driverName = "oracle.jdbc.driver.OracleDriver"; Class.forName(driverName);

        // Create a connection to the database
        String serverName = "127.0.0.1";
        String portNumber = "1521";
        String sid = "XE";
        String url = "jdbc:oracle:thin:@" + serverName + ":" + portNumber + ":" + sid;
        String username = "system";
        String password = "system";
        connection = DriverManager.getConnection(url, username, password);
                FileWriter fw = new FileWriter("D:\\AACB.csv");
                PrintWriter pw = new PrintWriter(fw);
                pw.println(x);        

                Statement s = connection.createStatement();
                String query = "select "+x+" from dummytable";
                ResultSet rs = s.executeQuery(query);

                while(rs.next())
                {         
                    StringTokenizer stk = new StringTokenizer(x,",");

            while(stk.hasMoreTokens()){
                    System.out.println(rs.getString(stk.nextToken()));
                }
            }
            pw.flush();

            //Close the Print Writer
            pw.close();

            //Close the File Writer
            fw.close();
            s.close();
    connection.close();       
}
catch(Exception e){} 
```

} }

在这个我只是选择 chkbox 并将数据发送到 operation.jsp 页面.. 并尝试制作 csv 文件......在纯 java（A.java 代码以上）中它可以工作但在 jsp 中它不是..

在 jsp 中：index.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<HTML>
<body>
<FORM method="POST" ACTION="operation.jsp">
<center>
Select Fields: <br><br>
<table>
<tr>
    <td>
        <input TYPE=checkbox name=fields VALUE=name>
    </td>   
    <td>   
        name
    </td>
</tr>

<tr>
    <td>
        <input TYPE=checkbox name=fields VALUE=age>
    </td>   
    <td>   
        age
    </td>
</tr>

<tr>
    <td>
        <input TYPE=checkbox name=fields VALUE=address>
    </td>   

    <td>   
        address
    </td>
</tr>

</table>
<br> <INPUT TYPE=submit name=submit Value="Submit">
</center>
</FORM>
</BODY>
</HTML> 
```

操作.jsp

```
<%@page import="java.util.StringTokenizer"%>
<%@page import="java.io.PrintWriter"%>
<%@page import="java.io.FileWriter"%>
<%@page import="java.sql.Statement"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.SQLException"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.Connection"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<body>
<%! String[] fields; %>
<%! String x ; %>
<center>You have selected: 
<% 
   fields = request.getParameterValues("fields");
   x = fields[0];
   if (fields != null) 
   {
      for (int i = 1; i < fields.length; i++) 
      {
          x += ", " + fields[i];          
      }
   }
   else out.println ("<b>none<b>");

   out.println(x);
%>

<% 
Connection connection = null; 
try { // Load the JDBC driver 
 String driverName = "oracle.jdbc.driver.OracleDriver"; Class.forName(driverName);

// Create a connection to the database
String serverName = "127.0.0.1";
String portNumber = "1521";
String sid = "XE";
String url = "jdbc:oracle:thin:@" + serverName + ":" + portNumber + ":" + sid;
String username = "system";
String password = "system";
connection = DriverManager.getConnection(url, username, password);

        FileWriter fw = new FileWriter("D:\\abckjk.csv");
        PrintWriter pw = new PrintWriter(fw);
        pw.println(x);        

        Statement s = connection.createStatement();
        String query = "select "+ x +" from dummytable";
        ResultSet rs = s.executeQuery(query);

        while(rs.next())
        {   

            StringTokenizer stk = new StringTokenizer(x,",");
                    while(stk.hasMoreTokens()){
                        pw.print(rs.getString(stk.nextToken()));
                        pw.print(",");
                    }
            pw.println();
        }
        pw.flush();

        //Close the Print Writer
        pw.close();

        //Close the File Writer
        fw.close();
        s.close();
connection.close();
} 
catch (ClassNotFoundException e) { // Could not find the database driver 
} catch (SQLException e) 
{ // Could not connect to the database } 

}

%>

</center>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:48:39.863

试试这个方法；

```
 String nameOfFile = "D:\\abckjk.csv";
   try {   
      PrintWriter pw = new PrintWriter(new FileOutputStream(nameOfFile));
      pw.println(str);
      //clean up
      pw.close();
   } catch(IOException e) {
      out.println(e.getMessage());
   } 
```

但是不推荐在jsp页面中使用过多的java代码。

# java - 机器人 - java.lang.NullPointerException

> ID：12050173
> 
> 赞同：1
> 
> 时间：2012-08-21T07:32:00.890
> 
> 标签：java, nullpointerexception, awt, awtrobot

我正在尝试创建机器人类的对象。但是，当我尝试这样做时，我得到了“java.lang.NullPointerException”。

```
static Robot robot = null;

try {
            robot = new Robot();
            if(keyAction.equals("TABPRESS")){
                robot.keyPress(KeyEvent.VK_TAB);                
            }else if(keyAction.equals("TABRELEASE")){
                robot.keyRelease(KeyEvent.VK_TAB);                  
            }

}catch(AWTException e){
 e.printStackTrace();
} 
```

你能建议如何处理这个问题吗？此代码之前运行正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:39:39.050

尽管您尚未发送创建代码，`keyAction`但这是唯一可能导致此代码片段中出现 NPE 的内容。先检查一下。

此外，调用方法的更好做法`equals()`是在常量上调用它并将其他对象作为参数传递。这是空安全的：

```
 if("TABPRESS".equals(keyAction)){
            robot.keyPress(KeyEvent.VK_TAB);                
        }else if("TABRELEASE".equals(keyAction)){
            robot.keyRelease(KeyEvent.VK_TAB);                  
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:56:00.010

我已经想出了解决方案。这不是因为任何编程问题。实际上，我的系统上存在 Jre 版本冲突。我卸载/删除了所有 jdks 并安装了一个新的，一切都开始正常工作。

谢谢，Shreyas。

# html - css 根本不适用

> ID：12050176
> 
> 赞同：1
> 
> 时间：2012-08-21T07:32:19.233
> 
> 标签：html, css

很奇怪，当我运行我的页面 css 样式不适用于元素时。前任。顶部登录。当我尝试在 firebug 中调试时，它没有显示应用了任何 css 样式。这是小提琴提要[http://jsfiddle.net/rPyn8/7/](http://jsfiddle.net/rPyn8/7/)。它有效，所有样式都应用在那里。但是如果尝试链接 css 文件它不起作用。要复制此问题，需要创建本地文件并在浏览器中打开它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:36:16.587

您的路径不正确。如果样式表位于主目录的“css”文件夹中，则更改：

```
<link rel="stylesheet" type="text/css" href="/css/admin.css"/> 
```

到

```
<link rel="stylesheet" type="text/css" href="css/admin.css"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:40:48.937

你的CSS有一些错误。例如`cursor:hand`不是 css 属性，表单是标签，所以不要将名称标记为类名

[在这里检查](http://jsfiddle.net/rPyn8/10/)你的CSS工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T07:42:03.503

当我试图像这样将你的 CSS 包含在头部时，它的工作原理

```
<head>
 <style>
put your css here
 </style>
 </head> 
```

您只需检查您的 css 路径。我认为有问题。使您的 css 链接像这样

```
<link rel="stylesheet" type="text/css" href="css/admin.css"/> 
```

尝试验证您的 html 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T07:43:17.450

如果它在您的本地计算机上不起作用（来自文件系统文件夹，而不是 Web 服务器）是因为您的标签中的绝对路径。

你的文件结构应该是：

```
MyTestFolder
  |-- css
  |   |-- admin.css
  |-- test.html 
```

您`<link>`在 html 页面中的标记应为：

```
<link href="css/admin.css" rel="stylesheet" type="text/css"/> 
```

此外，在您`admin.css`使用资源`/images/admin/center_form.gif`等的根路径时，您应该将它们设为相对路径（默认情况下从 CSS 文件的位置开始）`images/admin/center_form.gif`：全部更改

因此，扩展您的目录结构，它应该类似于：

```
MyTestFolder
  |-- css
      |-- images
          |-- admin
              |--center_form.gif
  |   |-- admin.css
  |-- test.html 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T07:58:46.200

问题出在.htaccess 中。路径正确但有一些规则需要更改

# c# - 有什么方法可以加快这个excel导入速度？

> ID：12050177
> 
> 赞同：2
> 
> 时间：2012-08-21T07:32:19.390
> 
> 标签：c#, excel, import, parallel-processing

我有一个 Excel 文档，它有大约 250000 行需要永远导入。我对此导入做了很多变体，但是有一些要求： - 需要验证每个单元格中的数据 - 必须检查数据库中是否存在重复项 - 如果存在重复项，请更新条目 - 如果不存在条目，插入一个新的

我已经尽可能多地使用并行化，但是我确信必须有某种方法可以让这个导入运行得更快。任何帮助或想法将不胜感激。

*请注意，数据库位于 LAN 上，是的，我知道我还没有使用参数化的 sql 命令。*

```
 public string BulkUserInsertAndUpdate()
        {
            DateTime startTime = DateTime.Now;
            try
            {
                ProcessInParallel();
                Debug.WriteLine("Time taken: " + (DateTime.Now - startTime));
            }
            catch (Exception ex)
            {
                return ex.Message;
            }

            return "";
        }

       private IEnumerable<Row> ReadDocument()
        {
            using (SpreadsheetDocument spreadSheetDocument = SpreadsheetDocument.Open(_fileName, false))
            {
                WorkbookPart workbookPart = spreadSheetDocument.WorkbookPart;

                Sheet ss = workbookPart.Workbook.Descendants<Sheet>().SingleOrDefault(s => s.Name == "User");

                if (ss == null)
                    throw new Exception("There was a problem trying to import the file. Please insure that the Sheet's name is: User");

                WorksheetPart worksheetPart = (WorksheetPart)workbookPart.GetPartById(ss.Id);

                OpenXmlReader reader = OpenXmlReader.Create(worksheetPart);
                StringTablePart = workbookPart.SharedStringTablePart;

                while (reader.Read())
                {
                    if (reader.ElementType == typeof(Row))
                    {
                        do
                        {
                            if (reader.HasAttributes)
                            {
                                var rowNum = int.Parse(reader.Attributes.First(a => a.LocalName == "r").Value);

                                if (rowNum == 1)
                                    continue;

                                var row = (Row)reader.LoadCurrentElement();
                                yield return row;
                            }

                        } while (reader.ReadNextSibling()); // Skip to the next row
                        break; // We just looped through all the rows so no need to continue reading the worksheet
                    }
                }
            }
        }

 private void ProcessInParallel()
        {
            // Use ConcurrentQueue to enable safe enqueueing from multiple threads. 
            var exceptions = new ConcurrentQueue<Exception>();

            Parallel.ForEach(ReadDocument(), (row, loopState) =>
                {

                    List<Cell> cells = row.Descendants<Cell>().ToList();

                    if (string.IsNullOrEmpty(GetCellValue(cells[0], StringTablePart)))
                        return;

                    // validation code goes here....

                    try
                    {
                        using (SqlConnection connection = new SqlConnection("user id=sa;password=D3vAdm!n@;server=196.30.181.143;database=TheUnlimitedUSSD;MultipleActiveResultSets=True"))
                        {
                            connection.Open();
                            SqlCommand command = new SqlCommand("SELECT count(*) FROM dbo.[User] WHERE MobileNumber = '" + mobileNumber + "'", connection);
                            var userCount = (int) command.ExecuteScalar();
                            if (userCount > 0)
                            {
                                // update
                                command = new SqlCommand("UPDATE [user] SET NewMenu = " + (newMenuIndicator ? "1" : "0") + ", PolicyNumber = '" + policyNumber + "', Status = '" + status + "' WHERE MobileNumber = '" + mobileNumber + "'", connection);
                                command.ExecuteScalar();
                                Debug.WriteLine("Update cmd");
                            }
                            else
                            {
                                // insert
                                command = new SqlCommand("INSERT INTO dbo.[User] ( MobileNumber , Status , PolicyNumber ,  NewMenu ) VALUES  ( '" + mobileNumber + "' , '" + status + "' ,  '" + policyNumber + "' ,  " + (newMenuIndicator ? "1" : "0") + " )", connection);
                                command.ExecuteScalar();
                                Debug.WriteLine("Insert cmd");
                            }
                        }
                    }
                    catch (Exception ex)
                    {
                        exceptions.Enqueue(ex);
                        Debug.WriteLine(ex.Message);
                        loopState.Break();
                    }
                });

            // Throw the exceptions here after the loop completes. 
            if (exceptions.Count > 0)
                throw new AggregateException(exceptions);

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T07:56:04.340

我会建议您在不对中间表进行任何验证的情况下进行批量导入，然后才通过 SQL 进行所有验证。您的电子表格数据现在将采用与 SQL 表类似的结构。这就是我从 Excel 和 CSV 导入 300 万行的工业强度 + 并取得了巨大成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:52:28.087

大多数情况下，我建议您检查您的并行性是否最佳。由于您的瓶颈可能是 Excel 文件上的磁盘 IO 和 Sql 服务器的 IO，我建议它可能不是。您已经*在*这两个进程之间进行了并行化（因此它们中的每一个都被降低到最慢的速度）；您的并行线程将争夺数据库并可能减慢彼此的速度。如果你的硬盘跟不上一个线程，那么（比如说）八个线程是没有意义的——它只会产生开销。

我建议两件事。首先：去掉所有的并行性，看看它是否真的有帮助。如果您将整个文件单线程解析到内存中的单个队列中，然后将整个文件运行到数据库中，您可能会发现它更快。

然后，我会尝试将其拆分为两个线程：一个用于处理传入队列的文件，另一个用于从队列中获取项目并将它们推送到数据库中。这样，您处理的每个慢速资源都有一个线程 - 因此您可以最大限度地减少争用 - 每个线程仅被一个资源阻塞 - 因此您可以尽可能优化地处理该资源。

这是多线程编程的真正诀窍。在问题上抛出额外的线程并不一定会提高性能。您要做的是将程序空闲等待外部（例如磁盘或网络 IO）完成的时间最小化。如果一个线程*只*在 Excel 文件上等待，而一个线程*只*在 SQL 服务器上等待，并且它们之间所做的事情是最小的（在你的情况下，它是），你会发现你的代码运行速度与这些外部资源将允许它这样做。

此外，您自己也提到了，但使用参数化 Sql 不仅仅是一件很酷的事情要指出：它会提高您的性能。目前，您正在`SqlCommand`为每个插入创建一个新的，这有开销。如果您切换到参数化命令，您可以始终保持相同的命令，只需更改参数值，这将为您节省一些时间。我认为这在并行 ForEach 中是不可能的（我怀疑你是否可以重用`SqlCommand`跨线程）​​，但它适用于上述任何一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:08:30.540

增强处理的一些技巧（因为我相信这是您需要的，而不是真正的代码修复）。

*   让 Excel 事先检查重复的行。对于淘汰过时的工具，这是一个非常不错的工具。如果 A 和 B 重复，您将创建 A，然后使用 B 的数据进行更新。这样，您可以淘汰 A，只创建 B。
*   不要将其作为 .xls(x) 文件处理，将其转换为 CSV。（如果你还没有）。
*   在您的数据库上创建一些存储过程。在项目中用于简单数据检索时，我通常不喜欢存储过程，但对于需要高效运行的自动化脚本，它可以创造奇迹。只需添加一个 Create 函数（我假设在您清除重复项后不需要更新函数（在提示 1 中））。+

我不确定一些提示是否会对您的具体情况有所帮助：

*   使用 LINQ 而不是创建命令字符串。LINQ 会自动微调您的查询。但是，突然切换到 LINQ 并不是您可以在眨眼之间完成的事情，因此您需要付出的努力超过您对它的需要。
*   我知道你说数据库服务器上没有 Excel，但是你可以让数据库处理 .csv 文件，而不需要为 csv 文件安装软件。您可以查看以下内容： http: [//dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

# asp.net - 如何在 asp.net 的连接字符串中指定模式名称

> ID：12050179
> 
> 赞同：2
> 
> 时间：2012-08-21T07:32:35.943
> 
> 标签：asp.net, connection-string, database-schema

如何动态使用 ASP.net 在 SQL ConnectionString 中指定模式名称。我有一个具有多个模式的数据库。我需要从属于特定模式的表中获取数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T07:36:14.773

您只能在连接字符串中指定数据库和用户详细信息。

要从特定架构中检索数据，您需要在查询中引用该架构。例如;

```
SELECT field1, field2 FROM [Schema].[Table] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:12:39.667

我想在这里引用一个较旧的线程，这在这个问题中绝对有用：

[可以从连接字符串设置默认架构吗？](https://stackoverflow.com/questions/3282665/possible-to-set-default-schema-from-connection-string)

您只能将默认架构设置为用户本身。您可以尝试使用[ALTER USER](http://msdn.microsoft.com/en-us/library/ms176060.aspx)语句，您可以在其中为用户定义默认模式。这意味着您可以为每个模式创建一个用户，如果这是您需要的。

# javascript - Javascript arguments.callee 它有什么用

> ID：12050183
> 
> 赞同：28
> 
> 时间：2012-08-21T07:32:40.653
> 
> 标签：javascript, anonymous-function

我还没有找到这个变量的任何完整的跨浏览器文档。

是`arguments.callee`为了什么？它是如何工作的？

它有哪些论据？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-21T08:30:16.650

`arguments.callee`是对当前正在调用的函数的引用。首先要做的事情：不要使用它：如果您处于严格的上下文中，它只会喷出错误。

然而，就个人而言——[而且我并不孤单](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/)——我会想念这处房产。在我解释原因之前，我会给你一个伪示例，说明何时可以使用它：

```
var looper = (function(someClosureVar)
{
    setTimeout((function(resetTimeout)
    {
        return function()
        {
            //do stuff, stop OR:
            resetTimeout();
        };
    }(arguments.callee)),1000);
}(document.getElementById('foobar'))); 
```

我希望你喜欢闭包，因为我喜欢 - 这`arguments.callee`就是很可能发生的地方。倒数第二行是钱的位置：

```
(arguments.callee) 
```

是对在闭包范围内设置初始超时的匿名函数的引用（在这种情况下，它可以访问 1 个 DOM 元素）。匿名函数在返回后会被 GC，但在这种情况下，我已将其添加到超时回调的范围内（将其作为参数传递给另一个返回实际回调的匿名函数），因此它仍然在某处被引用。
现在，如果您是严格模式，则不必担心，因为这是严格模式下的代码：

```
var looper = (function tempName(someClosureVar)
{
    setTimeout((function(resetTimeout)
    {
        return function()
        {
            //do stuff, stop OR:
            resetTimeout();
        };
    }(tempName)),1000);
}(document.getElementById('foobar'))); 
```

命名函数，就是这样。为什么我不喜欢它？`arguments.callee`引发标志，就像一些闭包诡计正在发生的匿名函数一样。我想这只是一种习惯，但我觉得它可以帮助我更轻松地构建和调试我的代码。
再加上对 IE 的病态仇恨，这对于任何做一些客户端脚本的人来说都是很自然的。不支持严格模式的 IE 版本倾向于将函数名称*泄漏*到全局命名空间，因此永远不允许与函数（以及我们创建的闭包）关联的内存被 GC'ed。这可能会导致循环引用，更糟糕的是，循环 DOM 引用会导致内存泄漏。

实际上：这是另一个使用位置[的真实示例](https://stackoverflow.com/questions/11331203/javascript-how-to-simulate-change-event-in-internet-explorer-delegation)`arguments.callee`：事件委托和分离事件侦听器
[这里有更多](https://stackoverflow.com/questions/11345367/how-is-javascripts-strict-mode-implemented)关于 JS 严格模式和递归使用的信息`arguments.callee`。

最后一个问题是，IMO 是如何方便的最清晰的例子`arguments.callee`：递归替换函数：

```
function someF(foo)
{
    //'use strict'; <-- would throw errors here
    foo = foo.replace(/(a|b)+/gi, function (p1,p2)
    {
        if (p1.match(/(a|b){2,}/i))
        {
            return p1.replace(/(a|b)/gi,arguments.callee);//recursive
        }
        return (p2.match(/a/i) ? 'X':'Y');
    });
} 
```

正如 MDN 上要求的[arguments.callee](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)，在严格模式下使用警告（ECMA 5，这解释了为什么 DC 说 arguments.callee 已被弃用）
以及[更多关于严格的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode?redirectlocale=en-US&redirectslug=JavaScript%2FStrict_mode)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T07:41:22.870

它指定当前执行的函数，`arguments.callee`当前函数也是如此。如果您需要在匿名函数中递归，这可能会有所帮助。这里是来自 Mozilla 的示例：

```
function create() {
   return function(n) {
      if (n <= 1)
         return 1;
      return n * arguments.callee(n - 1);
   };
}

var result = create()(5); // returns 120 (5 * 4 * 3 * 2 * 1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T07:38:47.877

Calee 是 ECMAScript 3 标准的一部分，因此跨浏览器使用应该是安全的。被调用者持有当前正在执行的函数，调用它将调用当前函数。因此，被调用者采用与封闭函数完全相同的参数（或者更确切地说，它*是*当前函数）。此处提供了更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)

使用被调用者被认为是不好的风格。给你函数一个名字，然后使用这个名字......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T07:42:37.613

arguments.callee 是一种通过询问“谁在调用这个特定参数？”来了解当前执行函数的方法。. . . .

```
 function factorial(a){
    if(a>0)
      return a*arguments.callee(a-1);
 } 
```

在这里，如果你调用 factorial(5)，它将检查条件是否大于 0，如果为真，将对下一个较小的数字执行相同的逻辑。. . 在某些情况下，您不知道要调用的函数的名称。. . .所以你可以使用这个属性

这是一个很好的参考

[来自 MDN 的 arguments.callee](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)

**更新：** `arguments.callee()`在 ES5 中已弃用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-21T07:38:42.710

> callee 是 arguments 对象的属性。它可用于引用该函数的函数体内当前正在执行的函数。

[MDN 文档在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)

# c# - Socket.AcceptAsync() 函数能否重用其参数 SocketAsyncEventArgs？

> ID：12050184
> 
> 赞同：1
> 
> 时间：2012-08-21T07:32:42.590
> 
> 标签：c#, sockets

我刚刚开始我的新 C# 套接字编程。

我将 SocketAsyncEventArgs 传递给 Socket.ReceiveAsync() 并一次又一次地重用它。它工作正常。

但是，如果我对 Socket.AcceptAsync() 再次执行此操作，则会引发 InvalidOperationException。如果我为此创建 SocketAsyncEventArgs 的新实例，那就太好了。

我应该为每个 Socket.AcceptAsync() 调用创建 SocketAsyncEventArgs 吗？（如果是这样，那么 Socket.ReceiveAsync() 不是什么？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:55:05.513

是的。关于 SocketAsyncEventArgs 的要点是它是可重用的。但是，对于每种类型的 *Async 方法，您都需要 1 个 SocketAsyncEventArgs。

我见过为此制作的池类，例如：

```
class AsyncEventArgsPool {
    SocketAsyncEventArgs GetEventArgs(string method);
} 
```

然后你用“Send”、“Receive”、“Accept”等调用该方法......实现应该很简单。

# c++ - QGtk 样式在 QTreeView 中不显示进度条

> ID：12050186
> 
> 赞同：1
> 
> 时间：2012-08-21T07:32:48.503
> 
> 标签：c++, linux, qt, gtk

我将我的应用程序移植到了 Ubuntu 平台，使用 Cmake 构建系统构建了我的项目，并添加了对 GTK 库的依赖（没有链接）。在我运行我的程序但 Delegate for`QtreeView`不显示进度条后，当我的程序运行类似的消息出现在调试输出中时：

```
Gtk-CRITICAL **: IA__gtk_widget_style_get: assertion `GTK_IS_WIDGET (widget)' 
```

出了什么问题，为什么我会收到此消息？如果我更改`QGtkStyle`为另一种样式，该应用程序将正常运行。

# python - 没有会话，事务的 sqlalchemy orm

> ID：12050204
> 
> 赞同：6
> 
> 时间：2012-08-21T07:34:22.857
> 
> 标签：python, orm, sqlalchemy

是否可以仅使用 orm 模型类和引擎在没有 session.add、session.commit 的情况下执行插入、更新、删除查询。

就像是：

```
us = User(name='john')
engine.execute(us) 
```

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-08-21T07:42:57.060

清楚地记录在 Sqlalchemy 文档中：

[http://docs.sqlalchemy.org/en/latest/#binding-metadata-to-an-engine-or-connection](http://docs.sqlalchemy.org/en/latest/#binding-metadata-to-an-engine-or-connection)

另一个选项选项是使用上下文会话：

[http://docs.sqlalchemy.org/en/latest/#lifespan-of-a-contextual-session](http://docs.sqlalchemy.org/en/latest/#lifespan-of-a-contextual-session)

# twitter-bootstrap - Bootstrap：导航栏中的表单

> ID：12050206
> 
> 赞同：0
> 
> 时间：2012-08-21T07:34:25.707
> 
> 标签：twitter-bootstrap

我正在使用 bootstrap2.1，但遇到了一些问题：

1.  **标签的垂直对齐不正确**，请参阅[http://jsfiddle.net/atian25/UGjW6/1/embedded/result/](http://jsfiddle.net/atian25/UGjW6/1/embedded/result/)
2.  如何向左拉一些表单元素，向右拉一些？
3.  如何以导航形式添加垂直分隔符？

这些是我错过的任何步骤吗？你能告诉我正确的jsfiddle吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T21:28:46.513

我在您的代码中添加了一些标记，也许这就是您要查找的内容：http: [//jsfiddle.net/UGjW6/31/](http://jsfiddle.net/UGjW6/31/)

我正在使用 .pull-left 和 .pull-right 以及 .divider-vertical 类。

出于某种原因，.navbar-form 中的标签没有获得 5px 的边距顶部，因为它应用于以下内容：

```
.navbar-form input, .navbar-form select, .navbar-form .radio, .navbar-form .checkbox 
```

可能是一个错误，但我不确定。无论如何，将 .checkbox 类应用于您的标签就可以了。

您不妨将其添加到您的 css 中：

```
.navbar-form label { margin-top: 5px; } 
```

# php - PHP - 获取用户组

> ID：12050211
> 
> 赞同：0
> 
> 时间：2012-08-21T07:34:40.897
> 
> 标签：php, .htaccess

我是使用 htaccess 的初学者，我在谷歌上搜索了一个答案，但没有找到对我有好处的东西。

我想做一些容易理解的事情（所以我确信有一种正确的方法）但不知道该怎么做。

我有这 3 个文件：

.htaccess

```
AuthName "Restricted Area"
AuthType Basic 
AuthUserFile /path/.htpasswd
AuthGroupFile /path/.htgroups
require group intern
require group extern
require group test 
```

.htpasswd

```
user1:xxx
user2:yyy
user3:zzz 
```

.htgroups

```
group1:user1 user3
group2:user2 
```

在 php 中，我想对该组进行测试。我将在某些组中有很多用户，我将添加和删除一些，所以我不想这样做：

```
if($_SERVER['PHP_AUTH_USER'] == 'user1' || $_SERVER['PHP_AUTH_USER'] == 'user2') 
```

但

```
if($group == 'group1') 
```

你能帮忙找到一个简单的方法来获得这个变量 $group 吗？

非常感谢，

巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:19:57.600

在对 php.net 进行了一些研究之后，我找到了一种通过匹配文件中的模式（在 .htgoups 中）的方法，所以我做了这个函数来获取一组登录用户。

```
function getHtGroup(){
    $AuthGroupFile = file("/path/.htgroups");
    $user = $_SERVER['PHP_AUTH_USER'];
    foreach ($AuthGroupFile as $line_num => $line) {
        if(preg_match("/(.*):(.*)$user/", $line, $matches)){
            $group=$matches[1];
            break;
        }
    }
    return $group;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T21:58:12.460

基于 BastienSander 的回答。这两个函数会从 .htaccess 文件中获取 htgroup 文件路径，并获取用户组。

```
function gethtgroupfilepath() {
  preg_match('/AuthGroupFile .*/i', file_get_contents('.htaccess'), $match);
  $htgroupfilepath = array_pop(preg_split('/AuthGroupFile /i', $match[0]));
  return($htgroupfilepath);
}

function gethtgroup(){
  $AuthGroupFile = file(gethtgroupfilepath());
  $user = $_SERVER['PHP_AUTH_USER'];
  foreach ($AuthGroupFile as $line_num => $line) {
    if(preg_match("/(.*):(.*)$user/", $line, $matches)){
      $group=$matches[1];
      break;
    }
  }
  return $group;
} 
```

# .net - c:\windows\assembly\temp 吃掉我们所有的磁盘空间

> ID：12050212
> 
> 赞同：8
> 
> 时间：2012-08-21T07:34:43.417
> 
> 标签：.net, gac

我们有一个服务器，我们有许多开发环境。自今年春天（4 个月）以来，我们就遇到了 c:\windows\assembly\temp 文件夹从不自行清理的问题。

今天的大小是它自己的文件夹的〜28gb。（在我们的80gb C：磁盘中）

我读过的所有线程都回到临时文件夹应该是一个“自我清洁”目录

这是关于 GAC 的链接最多的博文及其临时文件夹：http: [//blogs.msdn.com/b/junfeng/archive/2006/11/17/gac-temp-and-tmp.aspx](http://blogs.msdn.com/b/junfeng/archive/2006/11/17/gac-temp-and-tmp.aspx) [http://social。 msdn.microsoft.com/forums/en-US/clr/thread/f728af5e-c13f-48bc-ab60-0e6f1886321c/http://blogs.msdn.com/b/junfeng/archive/2005/10/24/484063](http://social.msdn.microsoft.com/forums/en-US/clr/thread/f728af5e-c13f-48bc-ab60-0e6f1886321c/) [。 aspx](http://blogs.msdn.com/b/junfeng/archive/2005/10/24/484063.aspx)

使用 gacutil.exe /cdl 似乎只清理 c:\windows\assembly\tmp 文件夹。=(

现在我的问题是：我怎样才能清理这个目录？

**更新：**

我还没有找到永久的解决方案。到目前为止，当 c:\windows\assembly\temp 文件夹变得太大时，我已经手动删除了它。并非所有文件都可以删除，因为它们正在使用中。

我仍然很想听听为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-18T11:38:09.377

和你一样 - 我也不得不手动删除**C:\Windows\Assembly\Temp**目录中的所有文件夹。据我所知，没有任何东西损坏。

**我首先尝试使用GACutil.exe** （从 VS 安装中获得）以“Microsoft 方式”执行它，它表示它成功完成，但没有做任何事情。

在我的情况下，**TMP**目录不存在，只有**TEMP**目录存在。

这是在运行 Windows 10 LTSC 1809 b17763 x64 的计算机上，截至今天已更新到最新的子版本。猜猜我将使用脚本来处理它。太糟糕了，它不会像它应该的那样自动清洁。

**注意：**我应该提到我执行了 ResetBase、DiskCleanup 并切换到 CompactOS 模式。也许其中一个程序导致那些文件夹留在周围......

# javascript - 将选定的 DDL 值用作 actionlink 的参数

> ID：12050215
> 
> 赞同：0
> 
> 时间：2012-08-21T07:34:54.110
> 
> 标签：javascript, ajax, asp.net-mvc, asp.net-mvc-3

我有一个带有几个下拉列表的 MVC 视图。那里有一些自定义验证，在某些条件下会在下拉列表旁边显示一个操作链接。这些操作链接将弹出一个模式窗口，其中包含与下拉列表中所做选择相关的信息。

我的问题是我似乎可以看到如何从下拉列表中选择值并将其放入我的 ajax 请求中！

这是我的代码：（下拉）

```
 <div id="holderlist">
        @Html.DropDownListFor(i => i.holderid, (SelectList)ViewData["holdersList"], "", new { @class = "chosenlist" })   
    </div> 
```

（动作链接）

```
 <div id="add" style="display:none;">

    @Html.ActionLink("Actions", "existingOfficers", "Roles",
        new { id = ?????<how do I get DDL chosen ID here>  },
        new { @class = "openDialog", dialog_id = "productDetail", dialog_title = "Workflow Centre" })
    </div> 
```

（阿贾克斯请求）

```
<script type="text/javascript">
$.ajaxSetup({ cache: false });

$(document).ready(function () {
    $(".openDialog").live("click", function (e) {
        e.preventDefault();
        $("<div></div>")
  .addClass("dialog")
  .attr("id", $(this).attr("dialog-id"))
  .appendTo("body")
  .dialog({
      title: $(this).attr("dialog-title"),
      close: function () { $(this).remove() },
      modal: true,
       width: 706,                 
       height: 300
  })
  .load(this.href);
    });

    $(".close").live("click", function (e) {
        e.preventDefault();
        $(this).closest(".dialog").dialog("close");
    });
}); 
```

我不能做的是将 ID 设置为 DDL 中选择的值的 ID。DDL 值此时并未存储在数据库中，因为这本质上是一个新的输入表单。

任何帮助将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:17:12.437

```
jQuery(function($) {
$('.helpButton').each(function() {  
    $.data(this, 'dialog', 
      $(this).next('.helpDialog').dialog({
        autoOpen: false,  
        modal: true,  
        title: 'Info',  
        width: 600,  
        height: 400,  
        position: [200,0],  
        draggable: false  
      })
    );  
  }).click(function() {  
      $.data(this, 'dialog').dialog('open');  
      return false;  
  });  
});  ​ 
```

[你可以在这里测试](http://jsfiddle.net/ZwLcE/736/)

# window - 关闭 SDL 窗口而不退出 SDL

> ID：12050234
> 
> 赞同：2
> 
> 时间：2012-08-21T07:36:49.713
> 
> 标签：window, sdl

我正在使用 SDL1.2 在我的 openGL 框架中处理窗口管理。

程序运行时是否可以在不调用的情况下破坏窗口（表面）`SDL_Quit()`？

背景：我的框架实际上只是多媒体环境中的一个 gfx 组件（可能是许多此类 gfx 组件）。我无法对其他组件的用途做出任何假设（例如，它们是否使用 SDL）。我担心调用`SDL_Quit()`会对其他组件产生副作用。

目前我正在做类似的事情：

```
SDL_Surface m_surface=0;

bool create_window() {
   int videoFlags = SDL_OPENGL;
   if(m_surface) {
       pritnf("window already made\n");
       return false;
   }
   if(SDL_Init(SDL_INIT_VIDEO) < 0 ) {
       pritnf("unable to initialize SDLn");
       return false;
   }
   m_surface = SDL_SetVideoMode(WIDTH, HEIGHT, BPP, videoFlags);

   return(m_surface!=0);
}

bool destroy_window() {
   if(m_surface) {
      SDL_Quit();
   }
   m_surface=0;
} 
```

两者`create_window()`都`destroy_window()`应该在应用程序的生命周期中被多次调用。`SDL_Init()`但是，`SDL_Quit()`多次打电话感觉很奇怪。

顺便说一句，我现在正在使用 linux，但我的目标是跨平台（至少 linux、osx、w32）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:30:01.703

我认为这在 SDL 1.2 中是不可能的，屏幕表面有一个特殊的状态，只能`SDL_Quit()`删除它。您可以尝试使用`SDL_QuitSubSystem()`仅关闭视频部分然后`SDL_InitSubSystem()`恢复它，但我不确定它会起作用（我现在无法测试）。

另一方面，使用带有`SDL_CreateWindow()`和的 SDL 2.0 看起来很容易`SDL_DestroyWindow()`。

无论哪种方式，您都需要将初始化 ( `SDL_Init()`) 与窗口创建分开，将清理 ( `SDL_Quit()`) 与窗口销毁分开。

# zabbix - Zabbix 触发器表达式 - 检测下降并保持问题状态

> ID：12050235
> 
> 赞同：0
> 
> 时间：2012-08-21T07:36:51.160
> 
> 标签：zabbix

我有这个触发器在匹配以下规则时触发：

```
{monitoring:test.item.change(0)}<-100 
```

当我的图表下降超过 100 个单位时，就会创建一个事件。当图表恢复时，该事件应切换到 OK 状态。该图在一天中的不同时间有不同的平均值，此外，该项目是一个陷阱值，不支持灵活的间隔。我的问题是这个；当图表下降超过 100 个单位时，比如说从 300 到 10，就会产生问题情况。在下一个时间间隔，如果值仍然很低（例如 13），Zabbix 会创建一个 OK 事件，因为尽管值仍然很低，但表达式不会返回 true，因为图形还没有再下降 100 个单位。关于如何解决这个问题的任何想法？我一直在尝试使用

```
{{monitoring:test.item.avg(1800)}-{monitoring:test.item.last(0)}>100} 
```

但 Zabbix 不会采用这种表达方式。这应该将 test.item 的最后一个值与过去 30 分钟的平均值进行比较，并在差异超过 100 时发出警报。

我相信，当图表保持在低值时，这将解决我的错误 OK 状态的问题情况。

编辑：我想我已经破解了它。Zabbix 接受了以下表达式：

```
{monitoring:test.item.avg(1800)}-{monitoring:test.item.last(0)}>100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:51:15.730

我想你很快就会意识到表达不会解决你的目标行为，并且会继续在问题和确定之间摇摆不定。

您刚刚将“最后一个和上一个最后一个”值之间的“是否发生了 -100 更改”检查转移到了“最后
一个和过去半小时的平均值”。

检查是否有突然变化或
该值是否仍然太低可能会更好地模拟您的预期场景，

```
{monitoring:test.item.last(0)}>100 | {monitoring:test.item.max(#2)}<20 
```

max(#2)<20 检查最后 2 个值的最大值是否低于 20。

**编辑：**阅读您的评论后，这种方法（在对您的期望值进行一些调整之后）可能会更好地为您服务，

```
({monitoring:test.item.avg(1800)}<10 & {monitoring:test.item.avg(1800)}-{monitoring:test.item.last(0)}>20) | ({monitoring:test.item.avg(1800)}>100 & {monitoring:test.item.avg(1800)}-{monitoring:test.item.last(0)}>100) 
```

这样，您可以更好地适应一天中不同音量的触发器。

# java - 使用 ProGuard 混淆源代码

> ID：12050237
> 
> 赞同：2
> 
> 时间：2012-08-21T07:37:02.040
> 
> 标签：java, android, serialization, obfuscation, proguard

最近，我遇到了一些问题，人们使用一个名为 Gamecih 的 root 用户应用程序作弊。Gamecih 让用户在运行时暂停游戏并更改变量。

如果我混淆我的代码，虽然作弊者很难知道在运行时要更改哪些变量，但我也担心它可能会导致其他一些问题。

我使用 Java 的 Serializable 接口序列化游戏对象，然后将它们写入文件。现在假设我正在序列化“Player”类的一个对象。它被序列化并保存到文件中。然后用户使用 Proguard 实现下载更新。Proguard 将重命名类和类成员名称。尝试读取已保存的 Player 对象时，这不会导致重大错误吗？

如果我还没有启动我的游戏，这不会是一个问题。但是现在有些玩家在同一个保存的游戏（这是一个 RPG）上玩了几个月。如果他们下载了更新并不得不从头开始，他们会非常生气。

我知道我可以指示 Proguard 不要混淆某些类，但我真正需要混淆的是 Player 类。

澄清：假设我有以下简单的未*混淆*类：

```
public class Player {

    private int gold;
    private String name;
    //Lots more.

    public Player(String name)
    {
        this.name = name;
    }
    public int getGold() {
        return gold;
    }
    public void setGold(int gold) {
        this.gold = gold;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

播放器被创建、序列化并保存到文件中。在我实现混淆器之后，它可能看起来像这样：

```
public class Axynasf {

    private int akdmakn;
    private String anxcmjna;

    public Axynasf(String adna)
    {
        anxcmjna=adna;
    }
    public int getAkdmakn() {
        return akdmakn;
    }
    public void setAkdmakn(int akdmakn) {
        this.akdmakn = akdmakn;
    }
    public String getAnxcmjna() {
        return anxcmjna;
    }
    public void setAnxcmjna(String anxcmjna) {
        this.anxcmjna = anxcmjna;
    }
} 
```

想象一下，我现在发布了一个更新，而一个拥有未混淆版本 Player 的播放器下载了该更新。当尝试读取该对象时，会有不同的成员名称和不同的类名称。我很可能会得到 ClassCastException 或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:27:05.383

为了确保 ProGuard 中的兼容序列化：

*   ProGuard 手册 > 示例 >[处理可序列化类](http://proguard.sourceforge.net/manual/examples.html#serializable)

要将序列化的类升级到 Java 中的不同类：

*   JDK 文档 > 序列化 > 对象输入类 > readResolve

*   JDK 文档 > 序列化 > 对象序列化示例 > Evolution/Substitution

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:05:03.480

我知道 ppl 可以使用您命名的应用程序更新 vars @ runtime。

如果您更改成员名称，这些值仍会给出提示。如果你混淆了，类名会改变，但新的名字无论如何都会在论坛上结束。所以这还不够

您可以在更新中做的是，在启动时，在旧对象中加载序列化数据，转移到“新”混淆类，使用自定义序列化（使用 deviceID 值或 gmail 地址进行 XOR 以使其不那么明显） .

尝试将您的玩家数据也分成几个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:01:53.377

Proguard 没有专家，但我认为您认为它会破坏序列化是正确的。

解决此问题的一种可能方法是在当前保存结构上实现一个层 - 您可以告诉 Proguard 您不想混淆哪些类。现在让播放器（和类似的对象）保持不变，不要混淆。一旦对象被反序列化，将其传递给游戏其余部分处理的新层（被混淆） - 如果您不保留非混淆对象，那么它将导致作弊者问题调整在玩游戏期间（尽管不是在加载时）。同时，您可以考虑将玩家的游戏文件移动到另一个不依赖于序列化的保存选项，这可能会在将来使此类问题变得更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-24T11:58:05.067

在你的情况下我会怎么做：

1.  发布带有混淆和非混淆类的更新。当播放器被加载时，它将尝试使用这两个类。如果播放器加载了非obf。类然后将此类映射到您的混淆类。
2.  当玩家被保存时，它将使用混淆类保存。
3.  在适当的时间后发布仅包含混淆类的更新。

# c# - ASP 图表控件 - 图表标题 CSS 类名

> ID：12050243
> 
> 赞同：0
> 
> 时间：2012-08-21T07:37:40.573
> 
> 标签：c#, asp.net, css, charts

我已经在网上搜索并查看了`Chart Control for .Net Framework`示例项目，但找不到与添加`cssClass`到`Title`图表对象相关的任何内容，
有什么建议可以实现吗？
我希望能够`Chart's Title`从`css`

```
<aspChart:Chart ID="Chart1" runat="server" Width="153px" Height="170" EnableViewState="true">
      <BorderSkin SkinStyle="Emboss" />
        <Titles>
             <aspChart:Title ShadowColor="32, 0, 0, 0">
             </aspChart:Title>
        </Titles> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:20:46.907

aspChart 控件中的标题在生成的图像中，因此无法通过 CSS 更改。

如果你想要一个 CSS 可控的标题，用 HTML 添加标题并删除控件标题。

如果要设置控件的标题颜色，可以在使用以下构造函数创建标题时在服务器端进行：

```
Title(string text, System.Web.UI.DataVisualization.Charting.Docking docking, System.Drawing.Font font, System.Drawing.Color color) 
```

# hibernate - JPA在复合键中选择具有固定主键的记录

> ID：12050245
> 
> 赞同：0
> 
> 时间：2012-08-21T07:37:42.727
> 
> 标签：hibernate, jpa

我正在尝试将 jpa 中的两个类与 OneToOne 关系相关联。我有这个复合键的 A 类：

```
@Embeddable
public static class AId implements Serializable 
{
  private static final long serialVersionUID = -3668842379109008885L;
  private long idA;
  private String codType;
  private Date startDate;

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result
                + ((codType == null) ? 0 : codType.hashCode());
        result = prime * result + (int) (idA ^ (idA >>> 32));
        result = prime * result
                + ((startDate == null) ? 0 : startDate.hashCode());
        return result;
    }
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        AId other = (AId) obj;
        if (codType == null) {
            if (other.codType != null)
                return false;
        } else if (!codType.equals(other.codType))
            return false;
        if (idA != other.idA)
            return false;
        if (startDate == null) {
            if (other.startDate != null)
                return false;
        } else if (!startDate.equals(other.startDate))
            return false;
        return true;
    }
    public long getIdA() {
        return idA;
    }
    public void setIdA(Long idA) {
        this.idA = idA;
    }
    public String getCodType() {
        return codType;
    }
    public void setCodType(String codType) {
        this.codType = codType;
    }
    public Date getStartDate() {
        return startDate;
    }
    public void setStartDate(Date startDate) {
        this.startDate = startDate;
    }

}

@EmbeddedId
@AttributeOverrides({
    @AttributeOverride(name="idA", column=@Column(name="ID_A")),
    @AttributeOverride(name="codType", column=@Column(name="COD_TYPE")),
    @AttributeOverride(name="startDate", column=@Column(name="START_DATE"))
})
private AId idAId; 
```

和具有简单主键的 B 类

```
@Id
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="GEN_ID_STORE"  )
@Column(name="ID")
private Long id;
@OneToOne(fetch=FetchType.EAGER)
private A a; 
```

现在我的问题是，如何仅使用 idAId.idA 字段关联这两个类？因为我想在我的 B 表中只有 ID_A 列而不是其他列。我更好地解释自己，我的问题是我必须从表 A 中提取只有 codType = 'COD' 和 startDate = null 的那些记录，实际上其他两个键并不重要，因为它们是固定的。我能做些什么？

不允许使用桥接表：D

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:57:40.273

> 因为我想在我的 B 表中只有 ID_A 列而不是其他列

这是我使用复合键的[主要问题。](https://stackoverflow.com/questions/5260589/under-what-condition-we-need-to-use-composite-keys-in-database/5260776#5260776)如果您在一个表中有一个复合键，这意味着所有这些键一起定义了一条记录。因此，如果您需要在另一个表中引用这一记录，您需要拥有所有的键。

因此，简而言之：如果表 A 具有复合主键，则表 B 上不能只有一个字段包含对表 A 上记录的引用。

# c# - List<> 在不同的班级有不同的行为

> ID：12050248
> 
> 赞同：2
> 
> 时间：2012-08-21T07:37:57.937
> 
> 标签：c#, .net, list

我写了一个小代码，但发现了一些惊人的东西。我有一个班级名称学生，并且在那个班级里面声明了一个 List<> 像这样的变量名学生（与班级名称相同）

```
 Class Students
{
    private String Name;
    private int Age;   
    public Students(){}

    List<Students> Students = new List<Students>();

...
} 
```

这里编译时错误是

> 'Students'：成员名称不能与其封闭类型相同

但是如果我在其他类中声明相同的列表......就像

```
 Class Students
        {
           private String Name;
           private int Age;   
           public Students(){}    
           ...
        }

        Class Program
        {
         ....
            List<Students> Students = new List<Students>();
            Students.Add(new Students("Deb","B++"));
            Students.Add(new Students("DDD", "A++"));
          ............
        } 
```

这工作正常。我的问题是，为什么？我们如何在其他类中创建自定义变量作为类名但不在同一个类中？任何详尽的答案都会很好，因为我想获得这方面的知识。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T07:42:50.827

错误消息中提到了答案：

> 'Students'：成员名称不能**与其封闭类型相同**

如果您在与成员同名的类中，这只是一个错误。

无论如何，无论如何命名这样的变量都是一个坏主意。它们不应大写。

**编辑**：这是一个可能导致歧义的示例：

```
class A
{
    public void Foo() { }
}

class B
{
    private A B = new A();

    static void Foo() { }

    void Bar()
    {
        B.Foo(); // what am I calling here?
    }
} 
```

**编辑 2**：搜索了一下我发现了一个非常相似的问题：[为什么 C# 成员名称不能与封闭类型名称相同？](https://stackoverflow.com/questions/4074055/why-c-sharp-member-names-cant-be-the-same-as-the-enclosing-type-name)并且共识只是它是 C# 的一个限制（没有明确的解释为什么）。VB.NET 似乎允许这种情况发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T07:45:06.650

你的班级被命名为学生，所以显然唯一允许命名相同的成员是构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:44:14.863

无论您是针对班级还是成员，在同一个班级中都是模棱两可的，而在另一个班级中则不是。

此外，如果该类`Student`代表单个学生，则应为其命名，即使*List of Students*听起来可能比*List of Student*更直观。如果你持有一个单一的参考，它看起来是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T07:47:17.357

当您在类中使用相同的名称声明它时，编译器将如何确定它是一个类还是一个变量，但是当您在其他类点符号中声明它时，如下所示。

```
Program.Students 
```

现在编译器可以看到两者之间的区别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T07:47:27.180

[关于类成员](http://msdn.microsoft.com/en-us/library/aa645622(v=vs.71))的 C# 语言规范文档与您的案例特别相关，它说：

* * *

类声明创建一个新的声明空间（第 3.3 节），并且类声明立即包含的类成员声明将新成员引入该声明空间。以下规则适用于类成员声明：

**• 实例构造函数、析构函数和静态构造函数必须与直接封闭类同名。所有其他成员的名称必须与直接封闭类的名称不同。**

**• 常量、字段、属性、事件或类型的名称必须不同于在同一类中声明的所有其他成员的名称。**

• 方法的名称必须不同于在同一类中声明的所有其他非方法的名称。此外，方法的签名（第 3.6 节）必须不同于在同一类中声明的所有其他方法的签名。

• 实例构造函数的签名必须不同于在同一类中声明的所有其他实例构造函数的签名。

• 索引器的签名必须不同于在同一类中声明的所有其他索引器的签名。

• 运算符的签名必须不同于在同一类中声明的所有其他运算符的签名。

* * *

构造函数总是与类同名，即使你没有明确指定构造函数，默认构造函数也会存在。始终存在的构造函数基本上已经声明了对该类成员名称的权利，因此不允许任何其他类成员以同样的方式命名（当然除了析构函数和静态构造函数的特殊情况）。

PS：VB对构造函数有不同的规则和命名，这就是为什么上面不适用于那里。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T08:21:50.230

> 我们如何在其他类中创建自定义变量作为类名但不在同一个类中？

不是这种情况。您在代码示例中做了两件不同的事情。在您的第一个示例中，您使用封闭类型的名称命名类型的成员。在第二种情况下，您使用用作泛型类型参数的类型名称来命名变量。没有矛盾，它们是完全不同的东西。

实际上，您*可以*将变量命名为与其封闭类型相同的名称。您只是不能将**成员**命名为与其封闭类型相同的名称。

```
public class Students
{
     public Students()
     {
        Students Students = new Students(); //bad idea, but it compiles
    }
} 
```

如果你真的需要这种行为，你可以这样做：

```
 public class StudentsBase
    {
         public List<Students> Students;
    }

    public class Students : StudentsBase
    {
        public Students() 
        {
            Students = new List<Students>();
            Students.Add(new Students());
            Students.Add(new Students());              
        }
    } 
```

至于“为什么”，我无法回答。

# java - 为什么在jsp中打印不出来？

> ID：12050256
> 
> 赞同：2
> 
> 时间：2012-08-21T07:38:17.457
> 
> 标签：java, jsp, inputstream, bufferedreader

下面的代码不会在 jsp 中打印（while{} 中的 out.println），但它在 Java 程序中就像一个魅力。你能解释一下为什么不会在 jsp 中打印以及我应该在代码中更改什么？谢谢！

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>

<%@ page import="java.io.BufferedReader" %>
<%@ page import="java.io.IOException" %>
<%@ page import="java.io.InputStreamReader" %>
<%@ page import="java.io.PrintWriter" %>
<%@ page import="javax.servlet.ServletException" %>
<%@ page import="javax.servlet.http.HttpServlet" %>
<%@ page import="javax.servlet.http.HttpServletRequest" %>
<%@ page import="javax.servlet.http.HttpServletResponse" %>
<%@ page import="java.net.*" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
Test

<%try{
URL url = new URL("http://gesi-ro-test.banat.enelro:8010/dynamic/gesi/ri/elab/endcallrequest/wind.ser?id=008201dfa306f4a6&es=&is=2011/04/20%2013:09:46.593&rt=RE");
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));

String inputLine = "";
while ((inputLine = in.readLine()) != null)
    {
        out.println(inputLine);
    }
in.close();
}catch(Exception e){
    out.println(e);
    }%>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:51:22.460

此 URL`returns` `XML`标记并不会显示。您必须添加`<pre> </pre>`标签才能显示 XML 标记。

```
out.println("<pre>");
String inputLine = "";
while ((inputLine = in.readLine()) != null)
    {
        out.println(inputLine);
    }
out.println("</pre>");
in.close(); 
```

您`must`必须在 JSP 中使用 JSTL`<import/>`而不是 Java 代码。

```
<c:import var="xmlData" url="http://your.url" />

<c:out var="${xmlData}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:05:43.863

再次检查您的网址。我在另一个站点上尝试了您的代码，它可以工作：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<%@ page import="java.io.BufferedReader" %>
<%@ page import="java.io.IOException" %>
<%@ page import="java.io.InputStreamReader" %>
<%@ page import="java.io.PrintWriter" %>
<%@ page import="javax.servlet.ServletException" %>
<%@ page import="javax.servlet.http.HttpServlet" %>
<%@ page import="javax.servlet.http.HttpServletRequest" %>
<%@ page import="javax.servlet.http.HttpServletResponse" %>
<%@ page import="java.net.*" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Test</title>
</head>
<body>

<%
URL url;
try {
    url = new URL("http://www.w3schools.com/xml/note.xml");
    BufferedReader in = new BufferedReader(new InputStreamReader(
            url.openStream()));

    String inputLine = "";
    while ((inputLine = in.readLine()) != null) {
%>

<c:out value="<%=inputLine%>"/>

<%
    }
    in.close();
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

%>

</body>
</html> 
```

就个人而言，我不喜欢在jsp文件中放很多“if”、“while”命令（这会让你的系统以后变得一团糟），所以，试着在你的业务逻辑中处理一切，然后发送结果到jsp作为属性

# gdb - gdb 在山狮上失败

> ID：12050257
> 
> 赞同：2
> 
> 时间：2012-08-21T07:38:18.157
> 
> 标签：gdb, osx-mountain-lion, bfd

我试图编译一个 7.x 版本的 gdb 没有任何运气。我对可执行文件进行了代码签名（http://sourceware.org/gdb/wiki/BuildingOnDarwin）。

以下版本存在这些问题。

7.5、7.4、git clone：启动 gbd 时我的应用程序和不同系统库的未知加载命令 0x2a（和其他）。例如，当尝试打印矢量时，我总是得到：找不到“main（int，char**）”的框架基础

7.3（macports 和来自 gdb-website）：在启动应用程序时，它无法设置断点并继续运行。

```
(gdb) start
Temporary breakpoint 1 at 0x100000950: file ../src/main.cpp, line 15.
Starting program: [...]
BFD: unable to read unknown load command 0x24
BFD: unable to read unknown load command 0x2a
BFD: unable to read unknown load command 0x26
Error in re-setting breakpoint 1: Cannot access memory at address 0x100000950
[application continues] 
```

我使用系统llvm-gcc、gcc4.7和svn-gcc4.8编译。有人在 Mountain Lion 上成功安装了 gdb 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T14:28:43.307

我在山狮上安装了 gdb 7.5 没有问题...

1.  这些步骤可能会对您有所帮助：./configure --prefix=/usr/local --enable-targets=x86_64-apple-darwin10 --enable-64-bit-bfd --disable-werror --build=x86_64-apple- darwin10 --host=x86_64-apple-darwin10 --target=x86_64-apple-darwin10

2.  然后安装 gdb。

3.  创建您自己的证书，如此处所述并签署 gdb [http://sourceware.org/gdb/wiki/BuildingOnDarwin](http://sourceware.org/gdb/wiki/BuildingOnDarwin)

4.  在签署 gdb 之前，您必须明确声明： codesign -s gdb-cert /usr/local/gdb 确保您已将证书设置为受信任。在签署 gdb 之前还要关闭钥匙串。

希望这也适用于你

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T01:07:08.233

我按照此处尝试的步骤解决了这个问题：http: [//coding.derkeiler.com/Archive/Ada/comp.lang.ada/2012-09/msg00305.html](http://coding.derkeiler.com/Archive/Ada/comp.lang.ada/2012-09/msg00305.html)

脚步

1.  sudo chgrp procmod /usr/local/bin/gdb
2.  sudo chmod g+s /usr/local/bin/gdb
3.  编辑 /System/Library/LaunchDaemons/com.apple.taskgated.plist 并将 +p 参数添加到 taskgated 进程
4.  强制终止任务门控进程（它将重新启动）
5.  再试一次

其他链接：

1.  [https://blogs.oracle.com/dns/entry/understanding_the_authorization_framework_on](https://blogs.oracle.com/dns/entry/understanding_the_authorization_framework_on)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T17:45:10.507

OP的问题有两个问题。关于签署可执行文件或修改 taskgated 和使用 setgid procmod 的内容已涵盖。第二个问题是关于未知加载命令的警告。我也遇到了这个问题，经过大量搜索后发现了以下补丁，修复了它：

[https://gist.github.com/davidbalbert/4197567](https://gist.github.com/davidbalbert/4197567)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T18:05:13.397

它似乎对我不起作用......与默认自制设置相同的问题

```
v1:src zeph$ brew install gdb
==> Downloading http://ftpmirror.gnu.org/gdb/gdb-7.5.tar.bz2
Already downloaded: /Library/Caches/Homebrew/gdb-7.5.tar.bz2
==> ./configure --prefix=/usr/local/Cellar/gdb/7.5 --with-python=/usr --with-system-readline --enable-targets=x86_64-apple-darwin10 --enable-64-bit-bfd --disable-werror --build=x86_64-apple-darwin10 --hos
==> make
==> make install
==> Caveats
gdb requires special privileges to access Mach ports.
You will need to codesign the binary. For instructions, see:

  http://sourceware.org/gdb/wiki/BuildingOnDarwin
==> Summary
/usr/local/Cellar/gdb/7.5: 62 files, 9.3M, built in 119 seconds
v1:src zeph$ codesign -s gdb-cert /usr/local/Cellar/gdb/7.5/bin/gdb 
v1:src zeph$ /usr/local/Cellar/gdb/7.5/bin/gdb --args /Users/zeph/tmp/CouchBase/src/install/bin/memcached -d -u root -P /tmp/0libmemcached_memc.pid -t 1 -p 11221 -U 11221 -m 128
GNU gdb (GDB) 7.5
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin10".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
BFD: /Users/zeph/tmp/CouchBase/src/install/bin/memcached: unknown load command 0x29
BFD: /Users/zeph/tmp/CouchBase/src/install/bin/memcached: unknown load command 0x29
Reading symbols from /Users/zeph/tmp/CouchBase/src/install/bin/memcached...done.
(gdb) run
Starting program: /Users/zeph/tmp/CouchBase/src/install/bin/memcached -d -u root -P /tmp/0libmemcached_memc.pid -t 1 -p 11221 -U 11221 -m 128
Unable to find Mach task port for process-id 28755: (os/kern) failure (0x5).
 (please check gdb is codesigned - see taskgated(8))
(gdb) 
```

k，我必须在全面信任证书后重新签名

codesign -fs gdb-cert /usr/local/Cellar/gdb/7.5/bin/gdb

# c# - Kinect 应用程序的 3D 对象

> ID：12050261
> 
> 赞同：1
> 
> 时间：2012-08-21T07:38:36.610
> 
> 标签：c#, wpf, 3d, kinect

目前我正在开发 kinect 虚拟珠宝店应用程序。用户可以在其中选择珠宝并检查其外观。该应用程序从看起来不真实的 2d 图像开始。任何人都可以就以下查询提出您的想法。

如何在不发展 3D 的情况下使 2D 图像逼真？我选择 3d 来拟合带有脖子的珠宝，我们可以在 3D 中倾斜和旋转图像。2d是否可以完成同样的事情？如果是这样，我们该怎么做。

对于 3d 的发展，是否有任何工具可用于将 2D 图像转换为 3D？

我是 3D 对象的零和新手，请告诉我如何将 3D 对象放在骨架数据中。有 3D 格式吗？

当前的应用程序在 wpf 4.0 中，所以我们如何在 WPF 中使用 3D 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:47:51.663

我认为如果没有 3D，它看起来不会很逼真。但是您可以生成具有宝石形状的 3D 网格。（请参阅此以获得想法[http://fenicsproject.org/_images/hollow_cylinder.png](http://fenicsproject.org/_images/hollow_cylinder.png)）。

并将您的 2D 图像像纹理一样放在网格上。

检查 riemers 教程。 [http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2/Textures.php](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2/Textures.php)

# mysql - 如何在 jOOQ 代码生成中将 mysql varbinary 映射到 String

> ID：12050264
> 
> 赞同：1
> 
> 时间：2012-08-21T07:38:43.023
> 
> 标签：mysql, varchar, unique-constraint, jooq

如果列是具有唯一索引的 varchar 类型并且具有值 'Foo'，则 MySQL 不接受像 'foo' 这样的值。

所以我想把varchar改成varbinary，

但是[jOOQ](http://www.jooq.org)在 Java 中将 varbinary 映射到 byte[]，

如何配置 jOOQ 来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:58:47.047

如果 MySQL 约束的基础列的排序规则不区分大小写，则MySQL`UNIQUE`约束可以不区分大小写。因此，您应该真正修复列的排序规则，而不是更改列数据类型`VARCHAR`。这在这里解释：

[SQL唯一varchar区分大小写问题](https://stackoverflow.com/questions/6448825/sql-unique-varchar-case-sensitivity-question)

# codeigniter - 方法名称为 Route - codeigniter

> ID：12050265
> 
> 赞同：0
> 
> 时间：2012-08-21T07:38:46.987
> 
> 标签：codeigniter, codeigniter-routing

如何在路由中动态执行以下操作？

```
$route['notifications'] = 'admin/notifications';
$route['categories'] = 'admin/categories'; 
```

这意味着我的控制器下的任何方法名称都是登录页面。我不希望管理员控制器出现在 url 中。

我会简单地在路由中使用 $CI->router->method，因为我不能在路由配置中使用 get_instance。

我需要做什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:57:20.710

很难获得动态路由，因为此时没有加载太多 CodeIgniter。

我使用以下内容将控制器的所有方法移动到第一段：

```
$route['(?!(api|account|more))(\w+)/(.*?)'] = "admin/$2/$3";
$route['(?!(api|account|more))(\w+)'] = "admin/$2"; 
```

路由在哪里`api|account|more`被忽略。

# c++ - 带有 MSG_PEEK 的 C 'recv' 不返回 -1

> ID：12050267
> 
> 赞同：0
> 
> 时间：2012-08-21T07:38:58.403
> 
> 标签：c++, c, sockets, recv, peek

我正在编写一个 C 函数来检查来自客户端的套接字连接是否可用。我使用带有 MSG_PEEK 的“recv”函数来不改变输入缓冲区。

但是，当客户端关闭套接字连接时，'recv' 应该返回 -1，但事实并非如此。客户端关闭后，下面函数中的“recv”一直返回 0。

```
char is_avail(int connection) {
  char buffer;

  int result = recv(connection,&buffer,1,MSG_PEEK);
  if (result<0)
    return 0;
  else
    return 1;
} 
```

这件事有什么理由吗？我还想将 MSG_PEEK 与 MSG_WAITALL 结合起来。我试过：

```
recv(connection,&buffer,1,MSG_PEEK|MSG_WAITALL); 
```

但它没有生效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:44:16.560

当套接字正确关闭时，recv 不会返回 -1，而是返回“0”。

0 -> 优雅地关闭套接字

-1-> 发生了实际错误

> 0-> 数据已被读取。

# javascript - angularjs做一个简单的倒计时

> ID：12050268
> 
> 赞同：50
> 
> 时间：2012-08-21T07:39:02.840
> 
> 标签：javascript, html, templates, countdown, angularjs

我想用 Angular js 倒计时。这是我的代码：

html文件

```
<div ng-app ng-controller = "countController"> {{countDown}} <div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

.js 文件

```
function countController($scope){
    $scope.countDown = 10;    
    var timer = setInterval(function(){$scope.countDown--; console.log($scope.countDown)},1000);  
}​​ 
```

在 console.log 中它可以工作我有一个倒计时但在 {{countdown}} 刷新它不能请你帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-21T07:55:40.023

请在此处查看此示例。这是一个计数的简单示例！我认为您可以轻松修改以创建倒计时。

**[http://jsfiddle.net/ganarajpr/LQGE2/](http://jsfiddle.net/ganarajpr/LQGE2/)**

## JavaScript 代码：

```
function AlbumCtrl($scope,$timeout) {
    $scope.counter = 0;
    $scope.onTimeout = function(){
        $scope.counter++;
        mytimeout = $timeout($scope.onTimeout,1000);
    }
    var mytimeout = $timeout($scope.onTimeout,1000);

    $scope.stop = function(){
        $timeout.cancel(mytimeout);
    }
} 
```

## HTML 标记：

```
<!doctype html>
<html ng-app>
<head>
    <script src="http://code.angularjs.org/angular-1.0.0rc11.min.js"></script>
    <script src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
</head>
<body>
<div ng-controller="AlbumCtrl">
    {{counter}}
    <button ng-click="stop()">Stop</button>    
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-03-10T01:12:32.933

从 1.3 版开始，模块 ng 中有一项服务：`$interval`

```
function countController($scope, $interval){
    $scope.countDown = 10;    
    $interval(function(){console.log($scope.countDown--)},1000,0);
}​​ 
```

谨慎使用：

> 注意：此服务创建的间隔必须在您完成后显式销毁。特别是当控制器的作用域或指令的元素被销毁时，它们不会自动销毁。您应该考虑到这一点，并确保始终在适当的时候取消间隔。有关如何以及何时执行此操作的更多详细信息，请参见下面的示例。

来自：[Angular 的官方文档](http://docs.angularjs.org/api/ng/service/$interval)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-21T07:53:44.247

当您从角度框架之外执行角度表达式时，您应该使用[$scope.$apply() 。](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)

```
function countController($scope){
    $scope.countDown = 10;    
    var timer = setInterval(function(){
        $scope.countDown--;
        $scope.$apply();
        console.log($scope.countDown);
    }, 1000);  
} 
```

[http://jsfiddle.net/andreev_artem/48Fm2/](http://jsfiddle.net/andreev_artem/48Fm2/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-09T20:23:25.703

我更新了 ganaraj 先生的答案以显示停止和恢复功能，并添加了角度 js 过滤器来格式化倒数计时器

[它在 jsFiddle 上](http://jsfiddle.net/aboodysa/7am57/7/)

控制器代码

```
'use strict';
var myApp = angular.module('myApp', []);
myApp.controller('AlbumCtrl', function($scope,$timeout) {
    $scope.counter = 0;
    $scope.stopped = false;
    $scope.buttonText='Stop';
    $scope.onTimeout = function(){
        $scope.counter++;
        mytimeout = $timeout($scope.onTimeout,1000);
    }
    var mytimeout = $timeout($scope.onTimeout,1000);
    $scope.takeAction = function(){
        if(!$scope.stopped){
            $timeout.cancel(mytimeout);
            $scope.buttonText='Resume';
        }
        else
        {
            mytimeout = $timeout($scope.onTimeout,1000);
            $scope.buttonText='Stop';
        }
            $scope.stopped=!$scope.stopped;
    }   
}); 
```

过滤器代码改编自 Stackoverflow 的[RobG](https://stackoverflow.com/questions/13023756/create-a-timer-countdown-using-hours-minutes-seconds-from-a-future-date)

```
myApp.filter('formatTimer', function() {
  return function(input)
    {
        function z(n) {return (n<10? '0' : '') + n;}
        var seconds = input % 60;
        var minutes = Math.floor(input / 60);
        var hours = Math.floor(minutes / 60);
        return (z(hours) +':'+z(minutes)+':'+z(seconds));
    };
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-20T05:59:41.493

它可能有助于“如何在 AngularJS 中编写倒计时手表的代码”

*第 1 步：HTML 代码示例*

```
<div ng-app ng-controller="ExampleCtrl">
    <div ng-show="countDown_text > 0">Your password is expired in 180 Seconds.</div>
    <div ng-show="countDown_text > 0">Seconds left {{countDown_text}}</div>
    <div ng-show="countDown_text == 0">Your password is expired!.</div>
</div> 
```

*第 2 步：AngulaJs 代码示例*

```
function ExampleCtrl($scope, $timeout) {
  var countDowner, countDown = 10;
  countDowner = function() {
    if (countDown < 0) {
      $("#warning").fadeOut(2000);
      countDown = 0;
      return; // quit
    } else {
      $scope.countDown_text = countDown; // update scope
      countDown--; // -1
      $timeout(countDowner, 1000); // loop it again
    }
  };

  $scope.countDown_text = countDown;
  countDowner()
} 
```

*AngularJs 中倒计时手表的完整示例如下所示。*

```
<!DOCTYPE html>
<html>

<head>
  <title>AngularJS Example - Single Timer Example</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
  <script>
    function ExampleCtrl($scope, $timeout) {
      var countDowner, countDown = 10;
      countDowner = function() {
        if (countDown < 0) {
          $("#warning").fadeOut(2000);
          countDown = 0;
          return; // quit
        } else {
          $scope.countDown_text = countDown; // update scope
          countDown--; // -1
          $timeout(countDowner, 1000); // loop it again
        }
      };

      $scope.countDown_text = countDown;
      countDowner()
    }
  </script>
</head>

<body>
  <div ng-app ng-controller="ExampleCtrl">
    <div ng-show="countDown_text > 0">Your password is expired in 180 Seconds.</div>
    <div ng-show="countDown_text > 0">Seconds left {{countDown_text}}</div>
    <div ng-show="countDown_text == 0">Your password is expired!.</div>
  </div>
</body>

</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-14T16:54:43.537

您可能没有正确声明您的模块，或者您在声明模块之前放置了函数（安全规则是在加载所有页面后将角度模块放在正文之后）。由于您使用的是 angularjs，因此您应该使用**$interval**（angularjs 等效于 setInterval，它是一个 Windows 服务）。

这是一个有效的解决方案：

```
angular.module('count', [])
  .controller('countController', function($scope, $interval) {
    $scope.countDown = 10;
    $interval(function() {
      console.log($scope.countDown--);
    }, 1000, $scope.countDown);
  });
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.1/angular.min.js"></script>

<body>
  <div ng-app="count" ng-controller="countController"> {{countDown}} </div>
</body>
```

注意：它在 html 视图中停在 0 处，但在 console.log 中停在 1 处，你能找出原因吗？;)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-22T08:25:50.250

我做的方式，它的工作原理！

*   *角度版本 1.5.8 及更高版本。

角码

```
var app = angular.module('counter', []);

app.controller('MainCtrl', function($scope, $interval) {
  var decrementCountdown = function() {
    $scope.countdown -= 1;
    if ($scope.countdown < 1) {
      $scope.message = "timed out";
    }
  };
  var startCountDown = function() {
    $interval(decrementCountdown, 1000, $scope.countdown)
  };
  $scope.countdown = 100;
  startCountDown();
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.10/angular.min.js"></script>

<body ng-app="counter" ng-controller="MainCtrl">
  {{countdown}} {{message}}
</body>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-10T14:39:53.707

```
function timerCtrl ($scope,$interval) {
    $scope.seconds = 0;
    var timer = $interval(function(){
        $scope.seconds++;
        $scope.$apply();
        console.log($scope.countDown);
    }, 1000);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-19T22:25:02.360

```
$scope.countDown = 30;
var timer;
$scope.countTimer = function () {
    var time = $timeout(function () {
         timer = setInterval(function () {
             if ($scope.countDown > 0) {
                 $scope.countDown--;
            } else {
                clearInterval(timer);
                $window.location.href = '/Logoff';
            }
            $scope.$apply();
        }, 1000);
    }, 0);
}

$scope.stop= function () {
    clearInterval(timer);

} 
```

在 HTML 中：

```
<button type="submit" ng-click="countTimer()">Start</button>
<button type="submit" ng-click="stop()">Clear</button> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-17T07:15:44.817

```
var timer_seconds_counter = 120;
$scope.countDown = function() {
      timer_seconds_counter--;
      timer_object = $timeout($scope.countDown, 1000);
      $scope.timer = parseInt(timer_seconds_counter / 60) ? parseInt(timer_seconds_counter / 60) : '00';
      if ((timer_seconds_counter % 60) < 10) {
        $scope.timer += ':' + ((timer_seconds_counter % 60) ? '0' + (timer_seconds_counter % 60) : '00');
      } else {
        $scope.timer += ':' + ((timer_seconds_counter % 60) ? (timer_seconds_counter % 60) : '00');
      }
      $scope.timer += ' minutes'
      if (timer_seconds_counter === 0) {
        timer_seconds_counter = 30;
        $timeout.cancel(timer_object);
        $scope.timer = '2:00 minutes';
      }
    } 
```

# http - 通过 HTTP 优化文件同步

> ID：12050271
> 
> 赞同：1
> 
> 时间：2012-08-21T07:39:09.770
> 
> 标签：http, synchronization

我正在尝试通过 HTTP 同步一组文件。
目前，我正在使用 HTTP PUT，并发送已更改的文件。但是，在同步增量非常小的大文件时，这是非常低效的。

我想做一些更接近 rsync 传输增量的事情，但我想知道最好的方法是什么。

我知道我可以在两端使用 rsync 库，并通过 HTTP 包装它们的通信，但这听起来更像是一种反模式；通过 HTTP 隧道传输独立协议。我想做一些更符合 HTTP 工作方式的事情，而不是在 HTTP 请求/响应中包装二进制数据（除了我的文件，duh）。

我也没有找到任何已经在 WebDAV 中实现的相关/有用的功能。

我可以完全控制客户端和服务器的实现，因为这是一个桌面应用程序（意思是“我不需要担心浏览器兼容性”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:06:19.553

评论中推荐的 HTTP PATCH 要求客户端跟踪本地更改。由于文件的大小，您可能无法执行此操作。

或者，您可以将大文件的“块”视为资源：根据更改的性质和文件的内容，它可以是字节、章节等。

客户端可以查询所有块的哈希，为本地版本计算相同的值，并仅 PUT 更改的部分。

# php - 如何将 Codeigniter 的表单验证与 PHP 的 count(Array) 集成？

> ID：12050279
> 
> 赞同：0
> 
> 时间：2012-08-21T07:40:02.827
> 
> 标签：php, arrays, forms, validation, codeigniter

我有一个带有多选输入字段的表单，它根据用户的选择返回一个数组，用户有 12 个选项可供选择，这意味着可供选择的选项不超过 12 个。此外，用户可以自由选择多个选项。

因此，在最坏的情况下，用户将选择 12 个选项，并且将使用这些选项发布一个数组，我不应该接受超过 12 个选项或少于 1 个选项。

无论如何，通过查看 Codeigniter 的表单验证库，我没有找到任何处理数组长度的规则（也许`*_length`适用于数组？）

另外，我做了一些快速研究，但找不到任何有用的东西，甚至与我的问题有关。

**我想到的唯一解决方案**是创建一个自定义函数，通过传递具有最小和最大长度的函数作为规则来检查数组的长度
（使用`count(Array)`），这可能很好，但我正在寻找一种本机方法，我也害怕“重新发明轮子”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:45:18.357

我不会试图检查发布的数组数据的长度，因为您需要检查提交的所有内容是否实际存在作为选择的选项。

因此，当您检查选择的任何内容是您可以选择的内容时，您将自动验证输入（如果您只是首先唯一的数组值）。

不过，您仍然需要一个自定义函数，因为您需要将提交的值与应该可以选择的值进行比较。大概这些值存在于数据库中的某个地方，因此在您的自定义验证例程中，获取输入数组，如果他们出于某种原因尝试多次提交相同的东西，则将其唯一，然后遍历所有提交的项目以确保它们都存在作为可选的选项。

顺便说一句，“少于 1 个选项”将是缺少`name`您所指的多选的 POST 数据。

# html - html5输入类型日期

> ID：12050280
> 
> 赞同：1
> 
> 时间：2012-08-21T07:40:05.120
> 
> 标签：html, date, input

我正在尝试更改谷歌浏览器上的 dat 格式，因为我的 mysql 请求无法使用该格式 YYYY/MM//DD 有没有办法通过这个 '-' 更改这个 '/' ？

我在网上找了几个小时，但我没有找到任何方法。

有谁知道这怎么可能？

亲切的问候。

SP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:48:21.147

假设 HTML5 日期字段称为“日期”并通过 GET 传递，更改日期的 php 代码如下。

```
$dat = new DateTime($_GET['date']);
$new_format = $dat->format('Y-m-d H:i:s'); 
```

就是这样！相当简单，然后将 $new_format 变量作为日期时间传递给 SQL。

# java - 在 OpenGL ES 2.0 中使用多个纹理

> ID：12050283
> 
> 赞同：1
> 
> 时间：2012-08-21T07:40:23.947
> 
> 标签：java, android, opengl-es-2.0

我遇到了一个问题。

我有一个类 DrawableTexturedPlane。此类指定一个带有字节数组的简单平面作为纹理。数组数据可以通过一个简单的函数调用来改变。好吧，该类将特定的着色器程序作为参数。在我的 OpenGL 视图中，我需要 2 个这样的平面。好吧，第一个渲染正确，但第二个根本没有出现。我很确定我错过了一些东西，但我不确定我的代码的哪一部分不正确。我将不胜感激任何帮助 ;）

TexturedPlaneClass（相关部分）：

```
public DrawableTexturedPlane( float[] fVertices, int nProgrammHandle, int nGLTextureChannel, int nGLTextureID ) 
    {  
        super( nProgrammHandle );
        m_bHasBorder = bHasBorder;

        m_nGLTextureChannel = nGLTextureChannel;
        m_oVertexBuffer = _GetVertexBuffer( fVertices );
        m_oTextureBuffer = _GetTextureCoordinates();

        GLES20.glActiveTexture( m_nGLTextureChannel );  
        // Set filtering
        GLES20.glTexParameterf( GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST );
        GLES20.glTexParameterf( GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST );
        GLES20.glTexParameteri( GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_CLAMP_TO_EDGE );
        GLES20.glTexParameteri( GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_CLAMP_TO_EDGE );

        m_cTexture = new byte[ 640 * 480 ];

        Log.i( "Java/DrawableTexturedPlane", "Drawable Textured Plane created!" );
    } 
```

绘制方法：

```
 @Override
    public void Draw( float[] mvpMatrix )
    {

        GLES20.glActiveTexture( m_nGLTextureChannel );

        GLES20.glEnable(GLES20.GL_TEXTURE_2D);
        GLES20.glEnable(GLES20.GL_DEPTH_TEST);

        GLES20.glUseProgram( m_nProgramHandle );

        m_HTextureUniform = GLES20.glGetUniformLocation( m_nProgramHandle, "uTexture" );
        m_HTextureCoordinate = GLES20.glGetAttribLocation( m_nProgramHandle, "TexCoordinate" );

        // get handle to the vertex shader's vPosition member
        m_nPositionHandle = GLES20.glGetAttribLocation( m_nProgramHandle, "vPosition" );

        ByteBuffer oDataBuf = ByteBuffer.wrap( m_cTexture );
        // Prepare the triangle data
        GLES20.glTexImage2D( GLES20.GL_TEXTURE_2D, 0, GLES20.GL_LUMINANCE, 640, 480,
                             0, GLES20.GL_LUMINANCE, GLES20.GL_UNSIGNED_BYTE, oDataBuf );

        // Prepare the triangle data
        GLES20.glVertexAttribPointer( m_nPositionHandle, 3, GLES20.GL_FLOAT, false, 12, m_oVertexBuffer );
        GLES20.glEnableVertexAttribArray( m_nPositionHandle );

        GLES20.glVertexAttribPointer( m_HTextureCoordinate, 2, GLES20.GL_FLOAT, false, 12, m_oTextureBuffer); 
        GLES20.glEnableVertexAttribArray( m_HTextureCoordinate );

        m_nMVPMatrixHandle = GLES20.glGetUniformLocation( m_nProgramHandle, "uMVPMatrix");

        // Apply the projection and view transformation
        GLES20.glUniformMatrix4fv( m_nMVPMatrixHandle, 1, false, mvpMatrix, 0);

        GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 6);

    } 
```

以下是纹理和 2 个平面的创建方式：

```
 GLES20.glGenTextures( m_nTextureStorage.length, m_nTextureStorage, 0);

        for( int i : m_nTextureStorage )
        {
            GLES20.glBindTexture( GLES20.GL_TEXTURE_2D, i );
        }

        m_oInfoPlane = new DrawableTexturedPlane( oInfoRect.GetAsFloatArray(), true, m_nShaderPrograms[0], GLES20.GL_TEXTURE0, m_nTextureStorage[0] );   
        m_oMainPlane =  new DrawableTexturedPlane( oMainRect.GetAsFloatArray(), true, m_nShaderPrograms[0], GLES20.GL_TEXTURE1, m_nTextureStorage[1] ); 
```

关键是，如果我用 GL_TEXTURE0 初始化 BOTH，它工作正常。（虽然 10 - 20 秒后出现严重闪烁，但我不知道为什么）。

如果我按照上面的方式初始化它们，则只有带有 TEXTURE_0 的那个显示正确，另一个显示为黑色。

我知道我应该编写一个 TextureManager 类，但是对于 2 个纹理，这是一个简单的矫枉过正。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:35:37.117

您没有在正确的时间绑定纹理。另外，您不能将 2 个不同的纹理绑定到 GL_TEXTURE_2D。

它应该如下所示：

```
GLES20.glActiveTexture( m_nGLTextureChannel ); //Activate the texture channel

  GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, nGLTextureID); //Bind here!
//Bind before you draw 
```

> 我知道我应该编写一个 TextureManager 类，但是对于 2 个纹理，这是一个简单的矫枉过正。

至于这不是关于现在，而是关于整个项目的需求。以后需要经理吗？前期设计有回报，但不要过火。（有点矛盾！祝你好运！）

# android - 防止用户按下显示关闭/打开按钮时改变方向

> ID：12050286
> 
> 赞同：1
> 
> 时间：2012-08-21T07:40:47.780
> 
> 标签：android

我有一个处于横向模式的活动——它是一个玩家。每当我点击显示关闭按钮时，都会重新创建活动并且屏幕变黑。之后，我点击 display-on 以恢复界面并重新创建活动。

我想这是因为在我的三星 i9001 显示按钮上，不仅会关闭显示，而且还会将系统桌面带到前台 - 所以这是导致活动娱乐的第一个方向变化。此外，当显示再次激活并且活动开始时，它需要再次更改方向/创建活动（不确定）。

我的问题是，当我炫耀时，如何防止第一次重新进行活动。可能吗 ？

# android - 登录后重定向到另一个 URL

> ID：12050293
> 
> 赞同：1
> 
> 时间：2012-08-21T07:41:11.530
> 
> 标签：android, cookies

我的程序会询问学生的用户名和密码，成功登录后，它会从主页的 HTML 源代码中获取学生的图片和姓名，并将其显示在另一个意图或活动上。

它运行良好，但我想查看另一个页面的 HTML 源代码，但我不知道如何。每次我创建另一个 httpclient 或 httpost 来访问另一个页面时，即使我已经登录，它也会显示登录页面的源代码。

这是主要代码：

```
public class TestingActivity extends Activity implements OnClickListener {
  String uname, pass, pic;
  EditText txtUname, txtPass;
  Button login;
  TextView result, tview2, tview3;
  String nameStartLine = " <td style=\"font:10px verdana; color:#312e25; text-align:right;\">Name:</td>";
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    login=(Button)findViewById(R.id.button1);
    result=(TextView)findViewById(R.id.textView1);
    tview2=(TextView)findViewById(R.id.textView2);
    tview3=(TextView)findViewById(R.id.textView3);
    txtUname=(EditText)findViewById(R.id.editText1);
    txtPass=(EditText)findViewById(R.id.editText2);

    login.setOnClickListener(this);
  }
  public void postLoginData() {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://students.usls.edu.ph/login.cfm");
    try {
      String username = txtUname.getText().toString();
      String password = txtPass.getText().toString();
      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
      nameValuePairs.add(new BasicNameValuePair("username",username));
      nameValuePairs.add(new BasicNameValuePair("password",password));
      httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
      HttpResponse response = httpclient.execute(httppost);
      String str = inputStreamToString(response.getEntity().getContent()).toString();
      result.setText(str);
      Intent intent = new Intent(TestingActivity.this,panel_1.class);
      intent.putExtra("result",result.getText());
      pic = "http://teachers.usls.edu.ph/student_pics/" + txtUname.getText() + ".jpg";
      intent.putExtra("pic",pic);
      startActivity(intent);
    }
    catch (ClientProtocolException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
  private StringBuilder inputStreamToString(InputStream is) {
    String line = "";
    StringBuilder total = new StringBuilder();
    // Wrap a BufferedReader around the InputStream
    BufferedReader rd = new BufferedReader(new InputStreamReader(is));
    // Read response until the end
    try{
      while ((line = rd.readLine()) != null) {
        if (line.equals(nameStartLine)) {
          line = rd.readLine();
          StringTokenizer st = new StringTokenizer(line, ">< ");
          String marker = st.nextToken();
          while(st.hasMoreTokens()) {
            if(marker.equals("strong")) {
              marker = st.nextToken();
              while(!(marker.equals("/strong"))) {
                total.append(marker + " ");
                marker = st.nextToken();
              }
            }
            marker = st.nextToken();
          }
        }
      }
    }
    catch (IOException e) {
      e.printStackTrace();
    }
    // Return full string
    return total;
  }
  public void onClick(View view) {
    if(view == login){ postLoginData(); }
  }
} 
```

这是第二个活动：

```
public class panel_1 extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
    TextView result = (TextView)findViewById(R.id.txtresult);
    result.setText(""+getIntent().getExtras().getString("result"));
    //set position
    WebView myWebView = (WebView) findViewById(R.id.webView1);
    myWebView.loadUrl(getIntent().getExtras().getString("pic"));
  }
} 
```

如您所见，程序将参数传递给[`http://students.usls.edu.ph/login.cfm`](http://students.usls.edu.ph/login.cfm). 成功登录后，它将获得主页的 HTML 源代码，我在其中获得学生的姓名和照片。那么如何将程序重定向[到此链接](http://students.usls.edu.ph/modules/modules.class_schedule.cfm)并查看其 HTML 源代码，以便从中获取重要数据？我再次尝试使用`httpclient`，但它显示了登录页面的 HTML 源代码，或者[`http://students.usls.edu.ph/login.cfm`](http://students.usls.edu.ph/login.cfm)即使我已经登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:36:01.983

在第二个活动中，您正在向服务器发出所有新请求，该服务器对身份验证凭据一无所知，因此它返回登录页面。因此，您还需要为第二个请求传递`username`and 。`password`

您需要使用[postUrl](http://developer.android.com/reference/android/webkit/WebView.html#postUrl%28java.lang.String,%20byte%5B%5D%29)

例如。

```
String url = getIntent().getExtras().getString("pic");
String postData = username=my_username&password=my_password;
webview.postUrl(url,EncodingUtils.getBytes(postData, "BASE64")); 
```

我觉得你的代码在以下第一次活动的地方有问题

```
intent.putExtra("result",result.getText()); // result.getText().toString();
pic = "http://teachers.usls.edu.ph/student_pics/" + txtUname.getText() + ".jpg"; // txtUname.getText().toString(); 
```

而且，我建议您将[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)用于一些高级功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:00:25.390

我想我解决了。在[http://students.usls.edu.ph/login.cfm](http://students.usls.edu.ph/login.cfm)成功登录后，我抓取了这样的 cookie

```
 List<Cookie> cookies = ((AbstractHttpClient) httpclient).getCookieStore().getCookies();
             if (cookies.isEmpty()) {
                Log.d("ERROR","no cookies received");
             } 
             else {
                for (int i = 0; i < cookies.size(); i++) {
                    if(cookies.get(i).getName().contentEquals("CFID")) {
                         CFID = cookies.get(i).getValue();
                     }
                    else if(cookies.get(i).getName().contentEquals("CFTOKEN")) {
                         CFTOKEN = cookies.get(i).getValue();
                     }

                }
             } 
```

然后我使用这个链接[http://students.usls.edu.ph/modules/modules.class_schedule.cfm](http://students.usls.edu.ph/modules/modules.class_schedule.cfm)调用了另一个 httppost来查看它的源代码。

```
 HttpPost httppost2 = new HttpPost("http://students.usls.edu.ph/modules/modules.class_schedule.cfm");
             List<NameValuePair> nameValuePairs2 = new ArrayList<NameValuePair>(2);
             nameValuePairs2.add(new BasicNameValuePair("CFID",CFID));
             nameValuePairs2.add(new BasicNameValuePair("CFTOKEN",CFTOKEN));
             httppost2.setEntity(new UrlEncodedFormEntity(nameValuePairs2)); 
```

最后我设法查看了[http://students.usls.edu.ph/modules/modules.class_schedule.cfm](http://students.usls.edu.ph/modules/modules.class_schedule.cfm)的源代码。

# php - 用正则表达式检测非空字符串？

> ID：12050295
> 
> 赞同：2
> 
> 时间：2012-08-21T07:41:17.303
> 
> 标签：php, regex, pcre

如何编写检测字符串不为空的 PHP 正则表达式？

空意味着，在这种情况下 0 个字符。例如，一个空格或一个换行符算作非空。

（它必须是适合 preg_match() 的正则表达式，因为我有一个包含各种正则表达式的查找表，并且不想以任何特殊方式处理这种情况，如果此处不使用正则表达式会使代码复杂化。）

***更新：***

`//`出于悲伤的原因，我也不能在外面使用任何正则表达式修饰符，例如“s” 。

*^(对于downvoters：这个问题是不是太简单了？还是不够清楚？)*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T08:14:10.620

```
/[\s\S]/ 
```

匹配任何字符，即使您不能使用`/s`修饰符。

您不需要量词 ( `+`)，因为如果一个字符匹配，则条件已经满足。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-21T07:46:17.053

只是一个想法（至少匹配任何一个）：

```
/.{1,}/ 
```

*   或者，甚至更短的版本（如@tigrang 建议的那样）：`/.+/`
*   或者，更完整的版本（包括@BartKiers 的`newline`支持建议），其中`s`修饰符导致`.`元字符匹配`\r`，`\n`以及：

    ```
    /.+/s 
    ```

# extjs4.1 - 如何在extjs4.1.0中更改组合框下拉列表的字体大小

> ID：12050299
> 
> 赞同：0
> 
> 时间：2012-08-21T07:41:27.067
> 
> 标签：extjs4.1

我有一个带有一个组合框的表单面板，我想要的是更改组合框下拉列表的样式。我不想使用 listCls，所以我需要在我使用组合框的地方指定那个 cls。我想覆盖任何普通类，这样在不提及 listCls 的情况下我就可以做到这一点？例如，我在一个表单面板中有一些 3 到 4 个组合框。我想要的是更改下拉列表字体样式。是否有任何通用 cls（如 .x-form-combo-list）以便我可以使用它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:31:29.810

试试**x-boundlist-item**或**x-boundlist-list-ct**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:02:36.613

具体你想要什么的正确类是：**x-combo-list**。组合框下拉列表中的项目还有许多其他类，但这是定义字体系列的特定类，用于显示。

# html - 使用 GWT 在 html5 中播放视频

> ID：12050300
> 
> 赞同：1
> 
> 时间：2012-08-21T07:41:27.707
> 
> 标签：html, gwt

我有游戏（在 libgdx 中构建）我使用 GWT 将其转换为 html5

我需要在其中显示电影视频

有什么办法吗？我需要在跨平台上运行我的游戏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:19:33.207

使用小部件[Video](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/media/client/Video.html)。它代表 HTML5 标签`video`。但是这个小部件可能无法在所有浏览器上正常工作。

[您可以在文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideHtml5)中了解 GWT 支持的其他 HTML5 功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:29:20.267

如果您使用此标签，请将此标签添加到您的 UIBinder (*.ui.xml)，

```
<g:HTML ui:field="mediaContainer" styleName="mediaPlayer">
 <video autoplay="true" controls="controls" ui:field="mediaPlayer" height="100%" width="100%">
 </video>
</g:HTML> 
```

现在添加以下代码到您的 UiBinder Java 部件中，或者如果您愿意的话，添加到 Presenter 中。我将此添加到我的演示者部分。希望你的 UiField 对象用正确的 Getter 和 Setter 声明

```
private Element videoSource = null;
private Element videoPoster = null;

// FOR PLAYING A VIDEO URL THAT THE USER ENTERS
    public void loadTool(String videoUrl) {
        if (videoSource != null) {
            videoSource.removeFromParent();
            videoPoster.removeFromParent();
        }
        videoSource = DOM.createElement("source");
        videoPoster = DOM.createElement("img");
        videoSource.setAttribute("src", videoUrl);
        videoPoster.setAttribute("src",
                MyContants.VIDEO_TEST_IMAGE);
        videoPoster.setAttribute("alt",
                MyContants.VIDEO_TEST_IMAGE_ALT);
        videoSource.getStyle().setVisibility(Visibility.VISIBLE);
        videoPoster.getStyle().setVisibility(Visibility.VISIBLE);
        videoWidget.getMediaPlayer().appendChild(videoSource);
        videoWidget.getMediaPlayer().appendChild(videoPoster);
        videoWidget.getMediaContainer().setVisible(true);
    } 
```

**希望这在某种程度上有所帮助**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:18:24.950

我用[http://code.google.com/p/gwt-html5-video/downloads/list](http://code.google.com/p/gwt-html5-video/downloads/list)

显示视频

```
 VideoWidget videoPlayer = new VideoWidget(true, false, null);

    List<VideoSource> sources = new ArrayList<VideoSource>();
            sources.add(new VideoSource(video, VideoType.MP4));

        videoPlayer.setSources(sources);
        videoPlayer.setPixelSize(960, 640); 
```

# string - 如何在 Py3 中抓取大写字母？

> ID：12050301
> 
> 赞同：-1
> 
> 时间：2012-08-21T07:41:40.017
> 
> 标签：string, python-3.x

例如，我有这样的文字：

```
This is my String 
```

我想抢`TS`，我只想抢大写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T07:44:57.287

您可以`str.isupper`结合使用谓词方法`filter`来过滤掉大写字符。

如果您希望结果是字符串，而不是序列，请使用`''.join`.

```
>>> print(''.join(filter(str.isupper, "This is my String")))
TS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:07:03.147

不确定您是否想以允许将每个字母保留在列表、元组等中的方式来获取它。但这里有一种使用列表表达式的方法：

```
 import string
    >>> [c for c in "This is my String" if c in string.ascii_uppercase]
    ['T', 'S'] 
```

此外，也许您想以不同的方式存储大写字符，或者立即对它们进行处理。for 循环可以很好地解决这个问题，例如：

```
 for c in 'This is my String':
        if c in string.ascii_uppercase: print(c) # Or do something else. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T15:37:10.857

或者，以 KOS 的帖子为基础，如果您不介意列表，

```
>>> s = 'This is a test String'
>>> print(list(filter(str.isupper, s)))
['T', 'S'] 
```

# php - 从 mysql blob/POST 上传附加/合并 pdf

> ID：12050302
> 
> 赞同：0
> 
> 时间：2012-08-21T07:41:44.953
> 
> 标签：php, mysql, file-upload, merge, blob

> **可能重复：**
> [用 PHP 合并 PDF 文件](https://stackoverflow.com/questions/4794435/merge-pdf-files-with-php)

我需要帮助合并/附加 pdf 文件，这些文件由用户使用普通的 html 表单上传并通过 php 进行 POST 上传处理。

上传的文件应与（已经存在的）pdf在包含pdf作为blob的mysql行中附加/合并。

现在我正在使用它来上传文件。上传工作正常，但我无法将它们与现有的 pdf 合并。

代码来源：

```
http://www.johnboy.com/scripts/merge-pdf-files-with-php/merge.phps 
```

有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:24:24.703

以下是它对我的工作方式：

创建一个 get.php 以从数据库中获取文件并将其与标题一起回显：

```
header("Content-length: $size");
header("Content-type: $type");
header("Content-Disposition: inline; filename=$name");
echo $content; 
```

然后你可以像这样从另一个 php 中获取 pdf：

```
$tmp = file_get_contents("http://somehost/get.php?table=test&id=$id");
file_put_contents("tmp/$id.pdf", $tmp); 
```

最后，如果您从我的问题中的链接中获取代码，只需更改此行：

```
$command = "pdftk tmp/$id.pdf $command output $output"; 
```

# objective-c - mkannotation 字幕

> ID：12050308
> 
> 赞同：1
> 
> 时间：2012-08-21T07:42:18.213
> 
> 标签：objective-c, mkannotation, mkannotationview

我正在尝试将 mkannotation 添加到我的地图中，但未显示字幕（或者我不知道如何查看它，我有一个 android 设备，很难理解 iphone 是如何工作的）

这是我的 MapPoint.h：

```
@interface MapPoint : NSObject<MKAnnotation> {

NSString *title;
NSString *subTitle;
CLLocationCoordinate2D coordinate;

}

@property (nonatomic,readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic,copy) NSString *title;
@property (nonatomic,copy) NSString *subTitle;

-(id) initWithCoordinate:(CLLocationCoordinate2D) c title:(NSString *) t subTitle:(NSString *) st;

@end 
```

我的 MapPoint.m：

```
@implementation MapPoint

@synthesize title,coordinate,subTitle;

-(id) initWithCoordinate:(CLLocationCoordinate2D)c title:(NSString*)t subTitle:(NSString *) st
{
coordinate = c;
[self setTitle:t];
[self setSubTitle:st];
return self;

}

@end 
```

在 Map.m 中，我有：

```
MapPoint *mp = [[MapPoint alloc] initWithCoordinate:pointCoord title:@"This is the title" subTitle:@"This is the subtitle"];
[mv addAnnotation:mp]; 
```

当我触摸我的标记时，我只看到“这是标题：

![在此处输入图像描述](../Images/bccbeed871886249f81aa05f09e7ef26.png)

我想我必须看到这是标题，这是字体较小的副标题。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:55:50.617

您需要`[super init]`从您的自定义 init 方法调用

```
self = [super init];
if (self) {
  // your code
}
return self; 
```

除此之外，提供一个`subtitle`属性应该足以显示字幕（如您所料，第二行字体较小的文本）。确保设置了属性，并在 viewController 上检查 NSLog。

另外，考虑去掉两行 tabBar，因为它违反了 Apple HIG。如果您需要显示许多菜单声音，请考虑使用其他设计模式，例如滑出菜单。你可以使用[这个库](https://github.com/andreamazz/SlideOutNavigation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:07:23.647

我找到了，我错过了andramazz所说的，调用super并添加这个方法：

```
- (NSString *)subtitle {
    return subTitle;
 } 
```

有人能告诉我为什么这个方法是必要的，但它不在标题中吗？

谢谢！

# java - 从文件中读取 int[][]。爪哇

> ID：12050309
> 
> 赞同：0
> 
> 时间：2012-08-21T07:42:19.033
> 
> 标签：java, objective-c, arrays, file, binaryfiles

有一个文件是用 Objective C 创建的。在这个文件中有一个数组：`int[x][y]`. 在 C 中“按原样”读取此文件并仅将新的链接`int[][]`作为缓冲区传递是没有问题的。

但我想用 Java 读取这个文件，我试过读取它，`int[x*y]`但值不同，因为 C 存储一个双数组 ( `[][]`) 不像 simple `[]`。

我认为有两种方法：重新创建文件以在 Java 中使用或在 Java 中使用 C++，但也许有一些更简单的方法？

**更新**

创建文件（inf Objective C）（数组的大小每次都是固定的）

```
NSData *mydata = [NSData dataWithBytes:&areas length:sizeof(areas)];
[mydata writeToFile:filePathData options:NSDataWritingAtomic error:&error]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:47:15.030

我想问题是您正在将小端 C 数据读取为大端。如果您使用 DataInputStream 它假定大端，这只是大端机器（如 Sparc ;) 上 C 的默认值，并且许多机器现在几乎死了。

我假设你知道文件的格式，如果它不包含尺寸（宽度和高度），你知道它们是什么。

我建议您尝试使用`ByteBuffer`with`order(ByteOrder.LITTE_ENDIAN)`来读取数据。有很多方法可以做到这一点。如果您的文件小于 2 GB，我将使用内存映射文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:48:07.417

Java中也有多维数组的概念。

只需复制C 的编写器算法并以相反的顺序将其转换为java，即开始将其读入java 的二维数组。您将获得所需的输出。

# android - 发布脸书数据

> ID：12050316
> 
> 赞同：0
> 
> 时间：2012-08-21T07:42:43.573
> 
> 标签：android, facebook

我有一个 listView，当我单击列表视图时，列表视图的特定行中存在的整个数据应该以它在该行中存在的特定格式发布。（我正在使用一个自定义适配器，它有一个图像，2 个文本视图）任何人都可以建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:55:11.190

我认为这可以使用图像来完成。如果您（以任何方式）获得该行的图像，
那么它可以以与
该行中显示的相同格式发布在 facebook 上（以图像而不是文本的形式）。

# excel - 如何在 POI hssf 中格式化列而不是单元格

> ID：12050323
> 
> 赞同：1
> 
> 时间：2012-08-21T07:42:59.453
> 
> 标签：excel, apache-poi

我在打开包含数百/数千行数据的 excel 文件时遇到问题，“不同的单元格格式太多”

有关错误的更多信息
[http://excelzoom.com/2009/09/the-mystery-of-excels-too-many-different-cell-formats/](http://excelzoom.com/2009/09/the-mystery-of-excels-too-many-different-cell-formats/)

所以我试图格式化一列而不是单元格。我可以弄清楚如何格式化列的唯一方法是格式化每个单独的单元格；通过实现下面列出的代码。我想格式化一列而不是一行。我有成百上千行数据要格式化。任何建议将不胜感激。

谢谢，

```
HSSFCellStyle cellStyle = wb.createCellStyle();
HSSFDataFormat dataFormat = wb.createDataFormat();
cellStyle.setDataFormat(dataFormat.getFormat("0.00"));

HSSFRow row = sheet.createRow(iRow);
HSSFCell cell = row.createCell((short)1);
cell.setCellStyle(cellStyle); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-26T09:02:38.783

至少当您使用“新”Excel 格式时，有一个更好的方法。采用：

```
((XSSFSheet)sheet).getColumnHelper().setColDefaultStyle(col, myStyle); 
```

使用这将确保样式即使在您插入数据的行下方也能继续。并且生成的文件也会更小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T00:44:11.567

在这里找到了答案

[http://poi.apache.org/faq.html#faq-N1014B](http://poi.apache.org/faq.html#faq-N1014B)转到该部分

> 13.  我在 POI 中创建工作簿时使用了样式，但 Excel 拒绝打开文件，抱怨“样式太多”。

山姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T12:04:11.773

由于您尚未`CellStyle`在 Loop 之外定义对象，因此每次都会为 Workbook 创建新对象，因此每次创建多个对象都会引发错误。

所以`CellStyle`在类中创建更高级别的对象并在循环中引用相同的对象`wb.createCellStyle();`

# ios - 主线程上的“无法访问对象的持久存储...”

> ID：12050324
> 
> 赞同：12
> 
> 时间：2012-08-21T07:43:12.577
> 
> 标签：ios, xcode, object, core-data

我是众多收到以下核心数据错误 ( `133000`) 的人之一：

```
Object's persistent store is not reachable from this NSManagedObjectContext's coordinator 
```

正如我所见，这是因为 Core Data 的线程限制。
但是，我已经遵守了所有正确的线程限制，但这个错误仍然存​​在。

我使用以下代码创建了一个 NSManagedObject 以在主线程上执行该功能：

```
NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self
                                                                        selector:@selector(commitPlayer:)
                                                                          object:message];
[[NSOperationQueue mainQueue] addOperation:operation];
[operation release]; 
```

然后这个函数创建了对象，它非常高兴。
然后尝试获取`[objectContext existingObjectWithID:objectID error:&error]`具有上述错误的返回 nil 的对象。

为了以防万一，我还用@synchonized 互斥锁块包装了对象获取，但它仍然无法获取该对象。

**似乎事先保存上下文可以解决这个问题，但是我想获取对象，无论它是否已保存，因为此时不应保存数据库。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-22T06:19:20.897

找到了答案。
问题与线程***无关。***这仅仅是因为已经发生了写入（因此人们通过奥卡姆剃刀假设这是一个线程问题）。

显示此错误的真正原因与互联网所说的线程无关，而是因为在您尝试另一次读/写的同时读/写已经在进行中。

`[objectContext existingObjectWithID:objectID error:&error]`对数据库执行 I/O 以保证您返回的对象确实存在。***但是***，就我而言，我已经**在堆栈中执行了更高**的读取操作。

它试图阅读父母的孩子，然后尝试阅读每个孩子。事实上，我应该在哪里`[objectContext objectWithID:objectID]`获取*错误*对象，然后在需要时执行适当的 I/O。

这不仅是正确的做事方式，而且当您只需要它们的列表时，它通过不加载 500 亿个子实体来节省内存。

希望这有助于澄清某人的事情！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-22T12:57:13.277

我想分享我的案例，它与 NSManagedObjectContextDidSaveNotification 相关：

我只在我的 UnitTests 目标中遇到了这个问题，在涉及与 Core Data 堆栈交互的测试用例中。

在我的单元测试目标配置中，每个此类案例之前都有一个`beforeEach`具有宏的块，该`cleanUnitTestsDatabase()`宏执行删除 Core Data 的 .sqlite3 文件并将托管对象上下文和持久存储协调器重新实例化为新的新状态，所以我有一个完整的数据库每次我在新/下一个测试用例中运行时都处于干净状态。

这导致了问题，因为有时在当前数据库被砍掉后调用了以下方法，因为当前测试用例已经通过并且下一个测试用例已经进入：

```
- (void)managedObjectContextDidSaveNotification:(NSNotification *)notification {
    NSManagedObjectContext *savedContext = [notification object];

    if ([savedContext isEqual:self.mainQueueManagedObjectContext] == NO) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.mainQueueManagedObjectContext mergeChangesFromContextDidSaveNotification:notification];
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T21:52:29.520

我想展示一个示例，说明两次读取 NSManagedObject 会相互碰撞并在原始问题中产生错误消息的问题。但这只有在您设置了 NSManagedObjectContextDidSaveNotification 并且正在执行 mergeChangesFromContextDidSaveNotification 时才会发生……有趣的是，这个通知是在读取 valueForKey 时触发的……不确定那里是否有问题。

```
 NSArray *theEvents = nil;
NSError *error = nil;

if ([currentObject valueForKey:@"event58Identifier"]) theEvents = [eventStore calendarItemsWithExternalIdentifier:[currentObject valueForKey:@"event58Identifier"]]; 
```

以及我是如何解决的：0）

```
 NSArray *theEvents = nil;
NSError *error = nil;
NSString * identEvent = [currentObject valueForKey:@"event56Identifier"];

if (identEvent) theEvents = [eventStore calendarItemsWithExternalIdentifier:identEvent]; 
```

在任何情况下，放入一个 NSLog 并找到尽可能多的保存，因为很可能您不需要这么多保存或读取，并尝试将其全部用于一次读取或一次写入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T21:25:03.387

我遇到了同样的错误，尽管我的问题略有不同。我有多个`NSManagedObjectContext`s 不同`NSPersistentStoreCoordinator`的 s （第 3 方库）。`NSManagedObjectContextDidSaveNotification`当通知发生时，他们发生了冲突。也就是说，您正在通知其中一个`NSManagedObjectContext`它不知道的更改。这就是“从这个 NSManagedObjectContext 的协调器无法访问对象的持久存储”用不同的话说的:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-16T20:01:21.870

我遇到了同样的错误，事实证明这是因为我用来获取具有 ID 的对象的临时子 MOC 没有将其父 MOC 设置为我的主 MOC。

我最终需要做的就是这个。

```
let tmpContext = NSManagedObjectContext(concurrencyType: .privateQueueConcurrencyType)
tmpContext.parent = CoreDataStack.context 
```

如果这是您的目标，然后获取带有 ID 的对象。

祝你好运 ：）

# javascript - 我应该如何在 Ext4 中使用 MVC

> ID：12050333
> 
> 赞同：1
> 
> 时间：2012-08-21T07:43:59.607
> 
> 标签：javascript, extjs4

我想学习在 Ext4 中使用 MVC，但是文档中的细节对我来说太模糊了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T07:47:35.307

我通过文档中的 APP-Architecture Tutorial 在 ExtJS 中学习了 MVC

[http://docs.sencha.com/ext-js/4-0/#!/guide/mvc_pt1](http://docs.sencha.com/ext-js/4-0/#!/guide/mvc_pt1)

我花了一些时间，但后来我明白了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:59:37.007

我在 sencha 文档上使用了 MVC 应用程序架构教程，我发现它比应用程序架构系列对初学者来说更容易一些。

[http://docs.sencha.com/ext-js/4-0/#!/guide/application_architecture](http://docs.sencha.com/ext-js/4-0/#!/guide/application_architecture)

# session - cakephp重新加载页面并传递参数

> ID：12050337
> 
> 赞同：1
> 
> 时间：2012-08-21T07:44:18.177
> 
> 标签：session, cakephp, reload

我有一个页面，可以选择继续向模板添加字段或发布最终字段，然后转到索引页面。当用户创建模板时，他们会创建一个字段。被`template.id`放入`field.template_id`但当用户选择添加另一个字段时，我输了`field.template_id`。

这是我的函数的代码

```
function add($last=null){

    $this->set('title_for_layout', 'Create Fields');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='home_layout';

        //retrieve Account Id of current User       
        $accountid=$this->Auth->user('account_id');

        $this->set('accountid', $accountid); 

    if($this->request->is('post'))
    {

    $this->Field->create(); 

    if ($this->Field->save($this->request->data))
    {   
        if($this->request->data['submit'] == "type_1") 
            {

                $last=$this->Field->read('template_id');
                $this->Session->setFlash('The field has been saved');  
                $this->redirect( array('controller' => 'fields','action' => 'add', $last));
            } 
            if($this->request->data['submit'] == "type_2") 
            { 
                $this->Session->setFlash('The template has been saved'); 
                $this->redirect( array('controller' => 'templates','action' => 'index'));
            } 

    }
    else
    {
        $this->Session->setFlash('The field could not be saved. Please, try again.'); 
    } 
 }
     $this->set('accounts', $accounts); 
     $this->set('last', $last); 

  }

} 
```

我遇到的问题是当用户点击`type_1`并重新加载页面时，它没有抓取`template_id`并将其插入`field.template_id`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:01:15.450

根据您的代码，每当您的表单发布到 add() 方法时，您似乎都会找到 $last 。将此字段查找条件移到外部`if($this->request->is('post'))`即可。

由于 read 方法会覆盖模型的 data 和 id 属性中存储的任何信息，因此在一般情况下使用此函数时应非常小心，尤其是在模型回调函数（如 beforeValidate 和 beforeSave）中使用它。通常 find 函数提供了比 read 方法更健壮且易于使用的 API。

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-read](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-read)

# php - php xmlReader vs xmlparser

> ID：12050342
> 
> 赞同：5
> 
> 时间：2012-08-21T07:44:39.020
> 
> 标签：php, xml-parsing, simplexml, xmlreader

我知道 xmlreader 和其他基于树的解析器（如 simplexml 和 dom）之间的区别。但是 xmlreader 和 xmlparser 有什么区别呢？使用一个比另一个有什么好处吗？

我需要解析相对较大的 xml 文件，附属数据馈送大约 100M。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T00:44:53.207

他们使用两种不同的软件架构——推式和拉式。

XMLReader 是一个“拉式解析器”。您负责创建一个大循环并调用 read() 函数将光标向前移动。这种软件架构往往更容易直观地理解。

XMLParser 是一个基于事件的“推送解析器”。您负责注册由 start_element、end_element、character_data、start_namespace_decl 等事件触发的回调函数。当您调用 xml_parse() 时，Expat 库将使用您的回调函数处理整个 XML 文档。

如果您不了解推送与拉取架构之间的细微差别，那么我建议您从 XMLReader 开始，因为“拉取”更易于理解且更易于可视化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:48:50.290

不是这方面的专家，但根据 PHP 文档，XMLReader 似乎是要走的路，因为介绍中说“阅读器充当文档流上的光标，并在途中的每个节点处停止。”。从理论上讲，这应该可以防止内存问题/泄漏，尤其是在较大的文件上。

[http://www.php.net/manual/en/intro.xmlreader.php](http://www.php.net/manual/en/intro.xmlreader.php)

XMLParser 将返回一个数组，这可能会导致较大的 xml 文件出现内存问题。

# c++ - 您将如何使用二维来处理一维内存？

> ID：12050345
> 
> 赞同：0
> 
> 时间：2012-08-21T07:45:00.253
> 
> 标签：c++, memory, matrix

您将如何使用二维来处理一维内存？（例如获取将值`Matrix::ValueAt(row, col)`存储`Matrix`为一维数组的值（`float m[16]`对于 4x4 矩阵）。

```
class Matrix4x4
{
    private float m[16];

    float getValueAt(int row, int col)
    {
        // I want this function
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T07:46:25.057

与`m[row * 4 + col]`，或相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:55:37.820

让编译器弄清楚：

```
class Matrix4x4
{
private:
    union
    {
        float m[16];
        float m2[4][4];
    };
public:
    float getValueAt(int row, int col)    
    {
        return m2[row][col];
    }

    float getValueAtLinear(int i)    
    {
        return m[i];
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:10:08.017

一般来说：

矩阵(i,j) = m[i * 列 + j]

# iphone - 返回上一页顶部

> ID：12050348
> 
> 赞同：0
> 
> 时间：2012-08-21T07:45:07.070
> 
> 标签：iphone, objective-c

我有一个按钮可以让我回到（另一个视图控制器的）上一个视图，但是它会带我回到我在那个视图中的最后一个位置。我想总是回到那个视图的顶部，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:53:38.600

在之前的 ViewController 上，覆盖/实现 viewWillAppear 方法。

```
- (void)viewWillAppear:(BOOL)animated{
   // you may change the position of the scrollview or you may re initialize desired views
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:34:04.637

如果您以前的视图继承自`UIScrollView`您应该为您的特定视图添加该代码，我已经包含了所有主要类型的视图，我不确定您是否需要所有这些，但我不知道哪个是您以前的查看，因此您可以选择合适的。

```
- (void)viewWillAppear:(BOOL)animated {
    [scrollView setContentOffset:CGPointZero];
    [tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UITableViewScrollPositionTop animated:false];
    [textView scrollRangeToVisible:NSMakeRange(0, 1)];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:01:47.337

在前一个视图中，在 viewWillAppear 方法中编写一些代码，这将刷新您的视图。因为 viewWillAppear 方法总是在你访问 viewController 时被调用。

```
- (void)viewWillAppear:(BOOL)animated{

} 
```

# javascript - 使用 .each() 迭代具有相似类名的元素

> ID：12050352
> 
> 赞同：0
> 
> 时间：2012-08-21T07:45:24.830
> 
> 标签：javascript, jquery

我有一组 div 元素。我称它们为 di1、di2、di3，但可能还有更多。

实际上，我用这段代码向他们展示了：

```
$("#elenco_elimina_gruppo").find("div.di1").show();
$("#elenco_elimina_gruppo").find("div.di2").show();
$("#elenco_elimina_gruppo").find("div.di3").show(); 
```

我想使用每个jQuery的功能。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:47:55.207

你可以只使用`$("#elenco_elimina_gruppo div").show();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T07:47:53.983

如果只是三个 div，则可以使用[多重选择器](http://api.jquery.com/multiple-selector/)：

```
$("#elenco_elimina_gruppo").find(".di1, .di2, .di3").show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:15:18.153

假设您想要执行更多操作，而不仅仅是显示元素，这里是如何使用`.each()`：

```
$("#elenco_elimina_gruppo div").each(function(index) {
    var currentClassName = $(this).attr("class");
    if (currentClassName.length > 2 && currentClassName.substr(0, 2) == "di") {
        $(this).show();
        //you can do more actions here...
    }
}); 
```

[​现场测试用例](http://jsfiddle.net/Rp9jc/)。

如果您只想显示它们，则无需`.each()`使用以下`.filter()`方法：

```
$("#elenco_elimina_gruppo div").filter(function() {
    var currentClassName = $(this).attr("class");
    return (currentClassName.length > 2 && currentClassName.substr(0, 2) == "di");
}).show(); 
```

[现场测试用例](http://jsfiddle.net/Rp9jc/1/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:16:59.870

你可以使用类似的东西 -

```
$("#elenco_elimina_gruppo").children().each(function() {
    $(this).show();                    
}); 
```

在此处查看示例 - [http://jsfiddle.net/nonocut/pNyuT/2/](http://jsfiddle.net/nonocut/pNyuT/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T08:21:39.727

[这是一个 JSFiddle](http://jsfiddle.net/HELmC/)和我在下面显示的代码 每个函数都非常简单，例如

```
$.each( ["di1","di2","di3"], function(item, index) {
     $("#elenco_elimina_gruppo div." + item ).show();
}); 
```

你也可以像这样使用它

```
$.each( $("#elenco_elimina_gruppo").find("div.di1,div.di2,div.di3"), function(item, index) {
     $(item).show();
}); 
```

有很多方法可以做你所追求的，这只是一个品味问题。我更喜欢 Speransky Danil 的回答，并在所有 div 上添加一个通用类，但这确实是您的选择。为了您的方便，我添加了一个[JSFiddle](http://jsfiddle.net/HELmC/)

# gwt - GXT 3 网格滚动问题

> ID：12050354
> 
> 赞同：1
> 
> 时间：2012-08-21T07:45:46.177
> 
> 标签：gwt, gxt

我正在使用 GXT 3.0.0b。

我在 ContentPanel 上有一个网格。当我明确设置 ContentPanel 宽度时，滚动没有问题。但是，当我将网格放入 VerticalLayoutContainer 时，网格的垂直滚动条会消失，并且只能使用鼠标滚轮进行滚动。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:32:02.153

最后我设法解决了这个问题。答案相当优雅：当我将网格添加到 VerticalLayoutContainer 时，我应该指定 VerticalLayoutData 参数。

例子：

```
verticalLayoutContainer.add(grid, new VerticalLayoutData(1, 1)); 
```

您还可以传递分数，例如，0.6 会将宽度（或高度）设置为 60%。如果您通过 -1，则组件将拥有自己的默认像素大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T18:25:21.763

`Grid`我在 a中遇到了同样的问题`ContentPanel`，即网格没有显示垂直滚动条。我`ContentPanel#forceLayout`在将网格添加到面板后立即使用，它解决了问题。这是实际的代码：

```
Grid<Pet> grid = new Grid<>(listStore, columnModel);
grid.setBorders(true);
grid.setColumnReordering(true);
grid.setLoadMask(true);
grid.setSelectionModel(selectionModel);
grid.setView(createGridView());
ContentPanel contentPanel = new ContentPanel();
contentPanel.setHeaderVisible(false);
contentPanel.add(grid);
contentPanel.forceLayout(); // <---- this is the line that fixed the problem! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-09T07:50:01.543

我意识到这是旧的，但我想说 Artem 的解决方案帮助我解决了与 GXT 2.3 网格滚动类似的问题。在我们的例子中，我们使用的是 FitLayout，因此在 add() 调用中包含 FitData(0) 解决了我们的问题。

我们的问题是我们有一个 TreeGrid，当其中一个 Tree 项目展开时，网格会将展开的行跳出视图。将网格添加到根面板时添加 FitData() 对象解决了该问题。

# ios - 如何像Photoshop上的油漆桶工具一样将桶绘制成图像

> ID：12050358
> 
> 赞同：0
> 
> 时间：2012-08-21T07:46:07.337
> 
> 标签：ios, image-processing

> **可能重复：**
> [Flood Fill Algorithm - Objective C 版本](https://stackoverflow.com/questions/8121348/flood-fill-algorithm-objective-c-version)

我想将颜色绘制到图像中的区域（不是所有区域，假设我想将颜色绘制为图像中的圆圈）它似乎是 Photoshop 上的油漆桶工具。我应该怎么做？提前致谢

![在此处输入图像描述](../Images/1d3a3681cfe79cb0f413d006c52ddbc5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:06:23.197

您在推断要填充的形状或洪水填充算法时遇到问题吗？我从你的问题中推断出你的大部分问题都出在算法上。

直接来自维基百科，这里是洪水填充的伪算法。

```
Flood-fill (node, target-color, replacement-color):
 1\. If the color of node is not equal to target-color, return.
 2\. Set the color of node to replacement-color.
 3\. Perform Flood-fill (one step to the west of node, target-color, replacement-color).
    Perform Flood-fill (one step to the east of node, target-color, replacement-color).
    Perform Flood-fill (one step to the north of node, target-color, replacement-color).
    Perform Flood-fill (one step to the south of node, target-color, replacement-color).
 4\. Return. 
```

[^(^(^(^([资源]))))](http://en.wikipedia.org/wiki/Flood_fill)

![在此处输入图像描述](../Images/b96dd79bf40c5ca4831924e272da4ba4.png)

# logging - 记录 spring neo4j 的密码查询

> ID：12050366
> 
> 赞同：2
> 
> 时间：2012-08-21T07:46:29.783
> 
> 标签：logging, neo4j, cypher

我尝试使用以下 log4j 配置记录由 spring data neo4j 生成的密码查询：

```
log4j.rootLogger=DEBUG, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

log4j.category.org.springframework.data.neo4j=DEBUG 
```

但是，我看不到日志中显示了密码查询。有人对调查为 spring neo4j 数据映射生成的密码查询的方法有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-09-12T15:46:13.423

截至 2019 年 9 月，我发现[Log cypher 查询](https://stackoverflow.com/questions/56126471/log-cypher-queries)中的答案之一是所需的方法 ( `logging.level.org.neo4j.ogm.drivers.bolt.request.BoltRequest=DEBUG`)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T10:29:37.560

它们是使用 记录`DEBUG`的，您可以设置一个记录器`org.springframework.data.neo4j`来查看它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-29T22:19:23.867

尝试使用这个：

```
log4j.category.org.springframework.data.neo4j=DEBUG

log4j.category.org.springframework.data.neo4j.support.query=DEBUG` 
```

设置调试配置，然后尝试！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-08T22:19:00.697

使用 SDN 5.0.3.RELEASE 并使用 Bolt 驱动程序，在级别`org.neo4j.ogm.drivers.bolt.request.BoltRequest`记录查询。在级别上`INFO`使用嵌入式驱动程序。`org.neo4j.ogm.drivers.embedded.request.EmbeddedRequest``DEBUG`

# ios - IOS应用程序在Keynote中打开文件，产生欺骗

> ID：12050370
> 
> 赞同：3
> 
> 时间：2012-08-21T07:46:50.303
> 
> 标签：ios

所以我在我的应用程序中有以下工作，当它被调用时，它将资源文件复制到 Keynote 并打开它就好了：

```
documentController =  [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:filePath]];
documentController.delegate = self;
[documentController retain];
[documentController presentPreviewAnimated:YES];
[documentController presentOpenInMenuFromRect:CGRectMake(500,-200 , 200, 200) inView:self.view animated:YES]; 
```

问题是每次触发代码时，它都会再次将文件复制到 Keynote，实际上是创建一个副本。

有什么办法可以绕过创建骗局？

谢谢

# css - 之后使用 CSS 伪元素

> ID：12050374
> 
> 赞同：0
> 
> 时间：2012-08-21T07:47:20.020
> 
> 标签：css, wordpress, css-position, pseudo-element

我正在使用 WordPress 并向其添加一个菜单，并且我正在尝试在每个导航按钮之后添加一些内容。理想情况下，我想`<li>`在每个导航按钮之后添加一个额外的标签作为背景间隔，但似乎你不能用`:after`.

然后我尝试了另一种只使用类似这样的方法..

```
#header .nav li:after {
    content: " ";
    position: relative;
    display: block;
    width: 2px;
    min-width: 2px;
    height: 45px;
    min-height: 45px;
    background: url('images/nav-button-spacer-bg.png') left top no-repeat;    
} 
```

最终，垫片在水平方向上处于正确位置，但不是在垂直方向上，因为它直接放在菜单下方。

我通过更改`position`to`absolute`和添加来解决这个问题`top: 0px;`。

这似乎已经修复了它，但是我想知道这是否正确，因为`ul`标签和包含`div`元素都有一个`position`of`static`并且我想知道 now`absolute`项目是如何粘在它们上的。

我猜伪元素的工作方式不同，因此为什么它不需要父元素的位置为`fixed, relative or absolute`.

我的想法是否正确，这是做我需要做的最好的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:34:11.687

这是一个非常好的方法！我想你只是错过了一个实际上确实有的元素`position: relative;`。有关绝对定位伪元素的演示，请参见此示例：http: [//jsfiddle.net/mytJ3/](http://jsfiddle.net/mytJ3/)

但是您应该注意到，如果您有一个绝对定位的元素并省略了一些`top`, `bottom`, `left`,`right`属性，则位置计算将在某种程度上回退到一种方式，就好像该元素是静态定位的一样。看到这个答案：[https ://stackoverflow.com/a/10244977/723769](https://stackoverflow.com/a/10244977/723769)

# xamarin.android - MonoDroid：卫星程序集不是应用程序包的一部分

> ID：12050380
> 
> 赞同：1
> 
> 时间：2012-08-21T07:47:40.073
> 
> 标签：xamarin.android, resx, satellite-assembly

我正在使用 MonoDroid 基于 WPF/Silverlight/MonoTouch 之间共享的通用代码构建 Android 应用程序。该公共代码中的字符串通过 RESX -> 附属程序集“本地化”。RESX 设计器是通过 ResXFileCodeGeneratorEx 生成的，这是在 WPF/Silverlight XAML 中直接使用“本地化字符串”的最佳方式。

但来到 Android 时，本地化字符串始终是“默认”字符串，而不是本地化字符串。附属程序集不是应用程序包的一部分。关于如何添加/链接附属程序集的任何提示？

（当然卫星程序集是编译的！）

干杯，帕特里克

# android - 为 API android 下载 ImageView

> ID：12050383
> 
> 赞同：1
> 
> 时间：2012-08-21T07:47:48.070
> 
> 标签：android, api, imageview

我正在开发一个供其他开发人员使用的 API 类。在我的一个函数中，我下载了一个 ImageView 数组并将其分配给一个静态 ArrayList 供开发人员使用。

为了从互联网上获取 ImageViews，我使用了一个以异步方法下载它们的类。我的问题是，如果我不使用资源中的 ID 初始化 ImageView，而我只是使用 ImageView imgView = new ImageView(activity); //活动由调用类传递我无法使用/显示调用此函数的活动中的图像。

我的一些代码：

这是我的 api 类中的函数（不是活动）

```
JSONArray banners = new JSONArray(result);

if(banners != null)
{
    for(int i = 0; i <    banners.length(); i++)
{
//ImageView imgView =(ImageView)activity.findViewById(R.id.imageView3); 
ImageView imgView = new ImageView(activity);

JSONObject jsonObjRecv = banners.getJSONObject(i);

String ImageUrl = jsonObjRecv.getString("image"); 

ImageLoad downloader = new ImageLoad(imgView);                                  
downloader.execute(ImageUrl);

imageViewsArray.add(imgView); 
```

主要活动：

```
ImageView imView = (ImageView)findViewById(R.id.imageView3);
imView = AlbosBanners.imageViewsArray.get(0); 
```

当处理程序发送下载完成的消息时，我执行的这部分代码，但活动中的图像视图保持不显示任何内容，而不是下载的图像视图。imageView3 是 MainActivity 内容 xml 的 imageview 的 id

注意：如果我在我的函数中使用这一行：

```
ImageView imgView =(ImageView)activity.findViewById(R.id.imageView3); 
```

这是工作。

只是为了说明清楚-在api中，我将不知道将要使用它的应用程序的活动和xml。我希望我能清楚地解释它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:58:59.490

不，您不会知道活动，但您可以让用户将他们的`activity`实例和 ,`id`传递`ImageView`给您的方法。

在这种情况下，您下载图像的方法应该接受 2 个参数，一个`Activity`和一个`int`- 代表`ImageView`资源 ID。

例子：

```
public void downloadImage(Activity context, int resId){
   // ..........
   ImageView imgView =(ImageView)context.findViewById(resId); 
} 
```

然后开发人员将像这样调用您的方法：

```
downloadImage(MyActivity.this, R.id.my_image_view); 
```

# c++ - 这是组合 std::generate_n 和 std::back_inserter 的正确方法吗？

> ID：12050390
> 
> 赞同：10
> 
> 时间：2012-08-21T07:48:21.073
> 
> 标签：c++, stl, c++11

在我的任务中:) 尽可能多地使用 STL 我想知道是否可以结合使用 std::generate 和 std::back_inserter 以便我可以执行与以下代码相同的操作：

```
static const size_t nitems=1024*1024;
std::string mrbig;
for (size_t pos=0; pos<nitems; ++pos)
    mrbig.push_back('a'+ (rand()%26)); 
```

我试过

```
 std::generate_n(std::back_inserter(mrbig),nitems,[](){return 'a'+(rand()%26);}); 
```

它似乎工作正常，但我想确定我没有搞砸什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T13:27:16.087

[`generate_n`](http://en.cppreference.com/w/cpp/algorithm/generate_n)要求它的第一个参数满足[`OutputIterator`](http://en.cppreference.com/w/cpp/concept/OutputIterator)，它[`back_insert_iterator`](http://en.cppreference.com/w/cpp/iterator/back_insert_iterator)确实（它`iterator_category`是[`output_iterator_tag`](http://en.cppreference.com/w/cpp/iterator/iterator_tags)）。

您的代码的潜在问题：

```
std::generate_n(std::back_inserter(mrbig),nitems,[](){return 'a'+(rand()%26);}); 
```

*   打电话`mrbig.reserve(nitems)`会更有效率
*   您应该使用[c++03](/questions/tagged/c%2b%2b03 "显示标记为“c++03”的问题") `std::rand`或[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题") [`uniform_int_distribution<>`](http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution) from`<random>`而不是[c](/questions/tagged/c "显示标记为“c”的问题") `rand`。
*   `()`对于不带参数的 lambda，lambda 捕获和 lambda 主体之间的括号是不必要的，尽管有些人更喜欢它们
*   不能保证在实现字符集中字母`a-z`形成一个连续的块；例如，[在 EBCDIC 中，`i`并且`j`不相邻](http://en.wikipedia.org/wiki/EBCDIC#Criticism_and_humor)。我相信唯一可移植的形式是`"abcd...xyz"`在程序中存储一个字符串并对其进行索引：[如何在 C 中编写一个从 a 到 z 和 A 到 Z 运行的单个 for 循环？](https://stackoverflow.com/questions/6352870/how-can-i-write-a-single-for-loop-running-from-a-to-z-and-a-to-z-in-c)

# python - 如何强制 Y 轴在 Matplotlib 中只使用整数？

> ID：12050393
> 
> 赞同：112
> 
> 时间：2012-08-21T07:48:30.597
> 
> 标签：python, matplotlib, axis-labels

我正在使用 matplotlib.pyplot 模块绘制直方图，我想知道如何强制 y 轴标签只显示整数（例如 0、1、2、3 等）而不是小数（例如 0.、0.5 , 1., 1.5, 2\. 等）。

我正在查看指导说明，怀疑答案在[matplotlib.pyplot.ylim](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.ylim)附近，但到目前为止，我只能找到设置最小和最大 y 轴值的东西。

```
def doMakeChart(item, x):
    if len(x)==1:
        return
    filename = "C:\Users\me\maxbyte3\charts\\"
    bins=logspace(0.1, 10, 100)
    plt.hist(x, bins=bins, facecolor='green', alpha=0.75)
    plt.gca().set_xscale("log")
    plt.xlabel('Size (Bytes)')
    plt.ylabel('Count')
    plt.suptitle(r'Normal Distribution for Set of Files')
    plt.title('Reference PUID: %s' % item)
    plt.grid(True)
    plt.savefig(filename + item + '.png')
    plt.clf() 
```

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2016-06-29T10:01:16.170

这是另一种方式：

```
from matplotlib.ticker import MaxNLocator

ax = plt.figure().gca()
ax.yaxis.set_major_locator(MaxNLocator(integer=True)) 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-08-21T08:53:38.030

如果你有 y 数据

```
y = [0., 0.5, 1., 1.5, 2., 2.5] 
```

您可以使用此数据的最大值和最小值来创建此范围内的自然数列表。例如，

```
import math
print range(math.floor(min(y)), math.ceil(max(y))+1) 
```

产量

```
[0, 1, 2, 3] 
```

[然后，您可以使用matplotlib.pyplot.yticks](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.yticks)设置 y 刻度线位置（和标签）：

```
yint = range(min(y), math.ceil(max(y))+1)

matplotlib.pyplot.yticks(yint) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-14T10:56:33.083

这对我有用：

```
import matplotlib.pyplot as plt
plt.hist(...

# make the y ticks integers, not floats
yint = []
locs, labels = plt.yticks()
for each in locs:
    yint.append(int(each))
plt.yticks(yint) 
```

# python - 带有对象实例或无的 pyqt 信号发射

> ID：12050397
> 
> 赞同：4
> 
> 时间：2012-08-21T07:48:52.273
> 
> 标签：python, pyqt, pyside

我想要一个 pyqt 信号，它可以使用 python“object”子类参数或 None 发出。例如，我可以这样做：

```
valueChanged = pyqtSignal([MyClass], ['QString']) 
```

但不是这个：

```
valueChanged = pyqtSignal([MyClass], ['None'])
TypeError: C++ type 'None' is not supported as a pyqtSignal() type argument type 
```

或这个：

```
valueChanged = pyqtSignal([MyClass], [])
TypeError: signal valueChanged[MyObject] has 1 argument(s) but 0 provided 
```

我也试过 None 没有引号和 C++ 等效的“NULL”。但似乎两者都不起作用。我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-09-05T17:58:45.640

一个 hacky 解决方法是定义要发出的信号`object`。因为`None`和`MyClass`两者都继承自`object`它按预期工作。这不需要在插槽中进行铸造。

在 PyQt5 5.11.3 和 Python 3.5.6 中工作

信号

```
valueChanged = QtCore.pyqtSignal(object)

valueChanged.emit(MyClass())
valueChanged.emit(None) 
```

投币口

```
valueChanged.connect(slot)

def slot(my_class_instance):
    if my_class_instance:
        my_class_instance.some_method()
    else:
        # my_class_instance is None 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T16:53:18.903

您不需要指定第二个选项 - 它将接受您的类类型的指针，该指针可能已经是 None 值：

```
valueChanged = pyqtSignal(MyClass)

# both will work as is
inst.valueChanged.emit(MyClass())
inst.valueChanged.emit(None) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T17:49:19.267

您尝试的方法不起作用有几个原因。

首先，`type`参数`pyqtSignal`接受python`type`对象或给出C++ 对象名称的字符串（即Qt 类）。

因此，要`None`用作参数类型，您必须传递`type(None)`而不是字符串`"None"`。

其次，`None`是特殊情况下允许使用信号的默认重载而无需显式选择签名。

因此，如果您创建这样的信号：

```
valueChanged = QtCore.pyqtSignal([MyClass], [type(None)]) 
```

然后尝试像这样发出信号：

```
self.valueChanged[type(None)].emit(None) 
```

你会得到这样的错误：

```
TypeError: Window.valueChanged[MyClass].emit():
argument 1 has unexpected type 'NoneType' 
```

因此使用`valueChanged[type(None)]`实际上会导致选择*默认*签名 ( `[MyClass]`)，然后会收到不匹配的参数`None`。

# spring - Spring security http 和 authentication-provider 未声明

> ID：12050400
> 
> 赞同：1
> 
> 时间：2012-08-21T07:48:56.607
> 
> 标签：spring, spring-security

我试图将 Spring 安全性集成到我现有的项目中。我使用的工具是：

1.  春天 2.5.6.SEC03
2.  弹簧安全核心 3.1.1.RELEASE
3.  7.

在弹簧配置中，我有这个：

```
<beans:beans xmlns="http://springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config='true'>
  <intercept-url pattern="/messagePost.htm*" access="ROLE_USER"/>
</http>

<authentication-provider>
  <user-service>
    <user name="user1" password="1111" authorities="ROLE_USER"/>
  </user-service>
</authentication-provider>
</beans:beans> 
```

但是这个spring配置有一个错误：

1.  cvc-complex-type.2.4.c：匹配通配符是严格的，但找不到元素“authentication-provider”的声明。
2.  cvc-complex-type.2.4.c：匹配通配符是严格的，但找不到元素“http”的声明。

我可以知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T08:45:02.730

进行这些更改

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

  <http auto-config='true'>
    <intercept-url pattern="/messagePost.htm*" access="ROLE_USER"/>
  </http>

  <authentication-manager>
    <authentication-provider>
      <user-service>
        <user name="user1" password="1111" authorities="ROLE_USER"/>
      </user-service>
    </authentication-provider>
  </authentication-manager>

</beans:beans> 
```

我做了以下更改

1.  将您的 xmlns 架构从更改`"http://springframework.org/schema/security"`为`"http://www.springframework.org/schema/security"`（添加 www :D）
2.  我已将命名空间包含在`<authentication-provider>`命名`<authentication-manager>`空间中。

# javascript - 在粘贴事件Javascript中删除输入字段中的所有非数字字符

> ID：12050403
> 
> 赞同：6
> 
> 时间：2012-08-21T07:49:14.080
> 
> 标签：javascript, html

我有一个包含多个字段的 html。其中一个字段只允许数字输入。但是现在我希望当用户将所有字符粘贴到该字段中时，除了删除或删除的数字。

例如用户粘贴：

输入字段中的 $1 234 567 -> 1234567

1.234.567 -> 1234567

1,234,567 -> 1234567

等等

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T07:58:40.027

使用正则表达式。

```
<input id="inputBox" name="inputBox" />
<script type="text/javascript">
var inputBox = document.getElementById('inputBox');
inputBox.onchange = function(){
    inputBox.value = inputBox.value.replace(/[^0-9]/g, '');
}
</script>​ 
```

或者您可以使用计时器来不断检查该字段。

```
<input id="inputBox" name="inputBox" />
<input id="inputBox2" name="inputBox2" />
<script type="text/javascript">
var timer = new Array();
function checkFields(el){
    var inputBox = document.getElementById(el);
    inputBox.value = inputBox.value.replace(/[^0-9]/g, '');
    clearTimeout(timer[el]);
    timer[el] = setTimeout((function(){ checkFields(el); }), 50);
};
function timerFields(el){
    timer[el] = setTimeout((function(){ checkFields(el); }), 50);
};
timerFields('inputBox');
timerFields('inputBox2');
</script>​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:03:43.560

试试这个

```
var regexp=/\D/g;
alert(("$1 234 567").replace(regexp,"")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:58:45.670

```
var f = function (s) { 
  var r = ''; 

  for (var i in s) {
    if ('0' <= s[i] && s[i] <= '9') {
      r += s[i]; 
    }
  }

  return r;
}

alert(f('123.234-234?345')); // 23234234345 
```

但是使用另一个答案的正则表达式:)

# java - 在 Hibernate 中选择喜欢

> ID：12050404
> 
> 赞同：0
> 
> 时间：2012-08-21T07:49:16.260
> 
> 标签：java, sql, hibernate, hql

我想用 HQL 编写下面的 SQL 查询 -

```
select * from ITPMAST 
inner join STKMAST on ITPMAST.ITPITP=STKMAST.stkstk where STKMAST.STKSIT='S101' 
```

## 桅杆类

```
public class Itpmast implements java.io.Serializable {

    private String itpitp;
    private Sizmast sizmast;
    private User usdmastByItpaddusd;
    private User usdmastByItpamdusd;
    private Prmmast prmmast;
    private Sctmast sctmast;
    private String itpnam;
    private short itpfcn;
    private short itptcn;
    private BigDecimal itpcpr;
    private BigDecimal itpspr;
    private String itpactyn;
    private String itpbscode;
    private String itpcolor;
    private BigDecimal itpspr1;
    private BigDecimal itpspr2;
    private BigDecimal itpspr3;
    private Date itpsactddt1;
    private Date itpsactddt2;
    private Date itpsactddt3;
    private Date itpaddddt;
    private String itpaddtime;
    private Date itpamdddt;
    private String itpamdtime;
    private Short itpbscodeord;
    private String itptrnactno;
    private String itpactcode;
    private Date itpsactddt;
    private String itpprtflg;
    private Set<Skumast> skumasts = new HashSet<Skumast>(0);
    private Set<Igpmast> igpmasts = new HashSet<Igpmast>(0);
    private Set<Dismastb> dismastbs = new HashSet<Dismastb>(0);
    private Set<Dismastd> dismastds = new HashSet<Dismastd>(0);
    private Set<Rbttran> rbttrans = new HashSet<Rbttran>(0);
    private Set<Lytmast> lytmasts = new HashSet<Lytmast>(0);
    private Set<Stkmast> stkmasts = new HashSet<Stkmast>(0);
    private Set<Sslmast> sslmastsForSslitp = new HashSet<Sslmast>(0);
    private Set<Sslmast> sslmastsForSslssl = new HashSet<Sslmast>(0);
} 
```

## 桅杆级

```
public class Stkmast implements java.io.Serializable {

    private StkmastId id;
    private User usdmastByStkamdusd;
    private User usdmastByStkaddusd;
    private Sctmast sctmast;
    private Sitmast sitmast;
    private Itpmast itpmast;
    private BigDecimal stksohqty;
    private BigDecimal stksohqty01;
    private BigDecimal stksohqty02;
    private BigDecimal stksohqty03;
    private BigDecimal stksohqty04;
    private BigDecimal stksohqty05;
    private BigDecimal stksohqty06;
    private BigDecimal stksohqty07;
    private BigDecimal stksohqty08;
    private BigDecimal stksohqty09;
    private BigDecimal stksohqty10;
    private BigDecimal stksohqty11;
    private BigDecimal stksohqty12;
    private BigDecimal stksohqty13;
    private BigDecimal stksohqty14;
    private BigDecimal stksohqty15;
    private BigDecimal stksohqty16;
    private BigDecimal stksohqty17;
    private BigDecimal stksohqty18;
    private BigDecimal stksohqty19;
    private BigDecimal stksohqty20;
    private Date stkaddddt;
    private String stkaddtime;
    private Date stkamdddt;
    private String stkamdtime;
    private String stkcat;
    private Date stkltddt;
    private Date stklsalddt;
    private Date stklpurddt;
    private Date stklsalrtddt;
    private Date stklpurrtddt;
    private Date stklshortddt;
    private Date stklexcessddt;
    private Date stkltransferin;
    private Date stkltransferout;
    private BigDecimal stkmedsohqty;
    private BigDecimal stkmedsohqty01;
    private BigDecimal stkmedsohqty02;
    private BigDecimal stkmedsohqty03;
    private BigDecimal stkmedsohqty04;
    private BigDecimal stkmedsohqty05;
    private BigDecimal stkmedsohqty06;
    private BigDecimal stkmedsohqty07;
    private BigDecimal stkmedsohqty08;
    private BigDecimal stkmedsohqty09;
    private BigDecimal stkmedsohqty10;
    private BigDecimal stkmedsohqty11;
    private BigDecimal stkmedsohqty12;
    private BigDecimal stkmedsohqty13;
    private BigDecimal stkmedsohqty14;
    private BigDecimal stkmedsohqty15;
    private BigDecimal stkmedsohqty16;
    private BigDecimal stkmedsohqty17;
    private BigDecimal stkmedsohqty18;
    private BigDecimal stkmedsohqty19;
    private BigDecimal stkmedsohqty20;
} 
```

我最好的尝试是

```
from Stkmast s 
join fetch s.itpmast i where s.sitmast.sitsit=:siteCode and i.itpitp like :code 
```

但是这个 HQL 查询会产生很多 SQL 查询来获取数据。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:51:16.027

您需要将获取类型设置为而不是映射`join`中的默认值。`select`

[示例](http://www.mkyong.com/hibernate/hibernate-fetching-strategies-examples/)：

```
<hibernate-mapping>
    <class name="com.mkyong.common.Stock" table="stock">
        <set name="stockDailyRecords"  cascade="all" inverse="true" 
            table="stock_daily_record" batch-size="10" fetch="join">
            <key>
                <column name="STOCK_ID" not-null="true" />
            </key>
            <one-to-many class="com.mkyong.common.StockDailyRecord" />
        </set>
    </class>
</hibernate-mapping> 
```

# java - memcached (spymemcached) 计数器和到期时间

> ID：12050407
> 
> 赞同：2
> 
> 时间：2012-08-21T07:49:22.860
> 
> 标签：java, memcached, spymemcached

谁能告诉我（或指向一些文档）memcached 计数器是如何工作的？具体来说：它们如何过期？我正在使用 java spymemcached 客户端。

方法

```
net.spy.memcached.MemcachedClient.incr(String key, int by, long def, int exp) 
```

接受一个参数“exp”，描述为“这个对象的过期时间”

这是否意味着对柜台的每个单独呼叫都有自己的到期时间？还是调用 incr 会影响密钥的到期时间？

另外，不应该有一种方法来获取计数器值吗？或者我应该以 0 的增量调用 incr？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T14:16:25.420

这`int exp`将覆盖现有的到期时间，并“碰撞”您递增的密钥。查看[协议文档](https://github.com/memcached/memcached/blob/master/doc/protocol.txt#L79)以获取更多信息。

> 另外，不应该有一种方法来获取计数器值吗？或者我应该以 0 的增量调用 incr？

您可以使用`MemcachedClient.get`方法获取计数器单元格的值。需要先设置计数器单元格，`MemcachedClient.set`然后才能增加它。我不是 100% 确定[spymemcached](/questions/tagged/spymemcached "显示标记为“spymemcached”的问题")，但是一些[memcached](/questions/tagged/memcached "显示标记为“memcached”的问题")库会在递增之前自动将计数器单元设置为 0。

关于到期时间的说明。如果`int expr`是`-1`memcached 将使用之前的过期时间。如果`int expr`大于`2592000`（30 天），则将其视为 UNIX 时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T22:09:13.813

从[源代码中的注释](https://github.com/dustin/java-memcached-client/blob/953c322ad254bf6f544bac6738114176040a9c6f/src/main/java/net/spy/memcached/ops/MutatorOperation.java#L46)：

> 如果有新条目，请设置到期时间。

所以，我怀疑传入的标志`def`和`expr`时间都只在密钥丢失的情况下使用。

我发现代码很难理解，因为我不是 Java 程序员，但[这个 foo](https://github.com/dustin/java-memcached-client/blob/953c322ad254bf6f544bac6738114176040a9c6f/src/main/java/net/spy/memcached/MemcachedClient.java#L1949)似乎执行如下操作：如果 incr(key,value) 失败，尝试执行 add(key,value,def,expr) 如果这个也失败了，然后再次尝试 incr(key,value) 。

# python - Python - 打印到多个输出

> ID：12050408
> 
> 赞同：5
> 
> 时间：2012-08-21T07:49:31.817
> 
> 标签：python, io, python-2.7

> **可能重复：**
> [如何将 sys.stdout 复制到 python 中的日志文件？](https://stackoverflow.com/questions/616645/how-do-i-duplicate-sys-stdout-to-a-log-file-in-python)

Python`print`命令或其他 Python 命令是否可以将字符串打印到两个目的地？例如，我想在一个语句中同时打印到控制台和输出文件（这样我就不需要重复`print`语句）。

如果这可能很重要，我希望有一个 Python 2.x 的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T08:00:10.443

从理论上讲，您可以尝试以下方法：

```
class Out(object):
    def write(self, s):
        sys.__stdout__.write(s)
        open('/tmp/log', 'a').write(s)

sys.stdout = Out()

...

print something # prints to stdout and logs 
```

但更干净的方法是放弃`print`并只使用[logging](http://docs.python.org/library/logging.html)，因为这本质上就是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:50:13.773

对@carls 的评论的评论（我还没有评论的声誉）：

来自[Python 的文档](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)：

> 在处理文件对象时，最好使用[with关键字。](http://docs.python.org/reference/compound_stmts.html#with)这样做的好处是文件在其套件完成后正确关闭，即使在途中引发异常也是如此。它也比编写等效的 try-finally 块短得多：

```
>>> with open('/tmp/workfile', 'r') as f:
...     read_data = f.read()
>>> f.closed
True 
```

# android - 在 Eclipse 中运行 android 应用程序的问题

> ID：12050411
> 
> 赞同：0
> 
> 时间：2012-08-21T07:49:46.107
> 
> 标签：android, eclipse

尝试在 Eclipse 中运行 Android 应用程序时，我收到以下消息：Android 需要编译器合规级别 5.0 或 6.0。改为找到“1.7”

请帮我解决这个问题

我正在使用 jdk1.7 和 sdk r20.0.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T07:52:46.137

Android SDK 明确要求 JDK 6，您使用的版本错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:42:15.560

您需要安装旧版本的 Java SE 5/JDK 1.5 或 Java SE 1.6，下载 Java 5 或 Java 6。

Java 5 - Java 1.5[下载](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase5-419410.html)

Java 6 - Java 1.6[下载](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html) （根据您的操作系统选择，安装完 JDK 后，转到“您的项目”>“属性”>“Java 编译器”以“编译器合规性级别：”选择 1.5 应用更改并重新运行项目如果您正在使用 Eclipse，那么您可以按照 Window -> Preferences -> Java -> Compiler -> JDK compliance -> 将其更改为您安装的那个。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:22:15.127

You don't have to uninstall your java version.

Simply, go to "Your_project">Properties>Java Compiler and for "Compiler compliance level:" choose 1.5

Apply the changes and re-run the project

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-21T07:55:54.850

您可以在此处找到最新版本的 Java SE：

[http://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T08:05:35.537

```
Right click on project and
select Android Tools
select Fix Project Properties

and Clean Your Project... 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-21T08:13:13.987

如果您使用的是 SDK r20.0.3，那么您必须将 ADT 插件也更新到 Eclips 中。您可以通过以下方式轻松完成此操作

Eclips/帮助/市场

# css - 强制 TextBox 占据 div 中剩余的全部大小

> ID：12050412
> 
> 赞同：1
> 
> 时间：2012-08-21T07:49:49.677
> 
> 标签：css, button, html, textbox

我有一个 TextBox，旁边有一个带有 float:right 的 Button，两者都在一个具体宽度的 div 内。Button 具有由宽度和高度定义的具体尺寸。我希望 TextBox 占据 Button 左侧的整个剩余宽度（因为 Button 位于右边缘）。特别是，上面的 div 属于 SplitPanel 的左侧。当我拖动拆分时，我希望 TextBot 调整大小，而 Button 的大小应该保持稳定。我对 Css 不是很熟悉，因此我需要一个指示来克服这个（微不足道的？）问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:09:38.800

如果您真的不担心旧浏览器，您可以使用新`width: calc()`方法：

```
input[type=text]
{
    width: -webkit-calc(100% - 58px); /*add more with the other vendor prefixes*/
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/4Lmeg/](http://jsfiddle.net/Kyle_Sevenoaks/4Lmeg/)

# c# - 以编程方式设置默认代理，而不是使用 app.config

> ID：12050415
> 
> 赞同：15
> 
> 时间：2012-08-21T07:50:16.777
> 
> 标签：c#, .net, app-config

在代理之后，我的 .Net 4.0 C# 应用程序仅在 app.config 包含以下内容时才有效：

```
<system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true">
        <proxy />
        <bypasslist />
        <module />
    </defaultProxy>
</system.net> 
```

现在，由于我不想拥有 app.config 并且不建议嵌入 app.config，那么与 app.config 中的 xml 块具有相同效果的 C# 代码是什么，我应该将它放在哪里？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T09:57:53.873

您可以使用[WebRequest.DefaultWebProxy](http://msdn.microsoft.com/en-us/library/system.net.webrequest.defaultwebproxy.aspx)或[GlobalProxySelection.Select](http://msdn.microsoft.com/en-us/library/system.net.globalproxyselection.aspx)

```
System.Net.GlobalProxySelection.Select = new WebProxy(ip,port); 
```

或者

```
System.Net.WebRequest.DefaultWebProxy = new WebProxy(ip,port); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-17T11:19:44.563

以下代码对我有用：

```
System.Net.WebRequest.DefaultWebProxy.Credentials 
    = System.Net.CredentialCache.DefaultNetworkCredentials; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T07:55:52.453

你可以`WebProxy`使用`System.Net`

```
WebProxy proxyObject = new WebProxy("PROXYIP",PORTNO);
WebRequest req = WebRequest.Create("http://www.stackoverflow.com");
req.Proxy = proxyObject; 
```

[MSDN 上的更多详细信息](http://msdn.microsoft.com/en-us/library/system.net.webproxy.aspx)

# c# - 解析日志文件时性能下降

> ID：12050418
> 
> 赞同：1
> 
> 时间：2012-08-21T07:50:30.940
> 
> 标签：c#, .net, performance

我正在使用 C# 对日志进行处理，这部分代码的性能开销非常糟糕。我该怎么办？

虽然我什至过滤了日志。仍然需要2~3分钟来处理。我的操作系统日志设置为 16 MB 大小。但也许在一台服务器上它或多或少。

```
List<LogParserDataEntity> dataEntities = new List<LogParserDataEntity>();
.
.
.
for (; !rs.atEnd(); rs.moveNext())
{
    dataEntities.Add(new LogParserDataEntity(
        rs.getRecord().getValue("eventlog").ToString(),
        rs.getRecord().getValue("recordnumber").ToString(),
        rs.getRecord().getValue("timegenerated").ToString(),
        rs.getRecord().getValue("timewritten").ToString(),
        rs.getRecord().getValue("eventid").ToString(),
        rs.getRecord().getValue("eventtype").ToString(),
        rs.getRecord().getValue("eventtypename").ToString(),
        rs.getRecord().getValue("eventcategory").ToString(),
        rs.getRecord().getValue("eventcategoryname").ToString(),
        rs.getRecord().getValue("sourcename").ToString(),
        rs.getRecord().getValue("strings").ToString(),
        rs.getRecord().getValue("computername").ToString(),
        rs.getRecord().getValue("sid").ToString(),
        rs.getRecord().getValue("message").ToString(),
        rs.getRecord().getValue("data").ToString()
    ));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T07:54:54.000

首先，什么表明这部分代码存在性能问题？你用过分析器吗？如果没有，请尝试一个（dotTrace 可以免费使用 30 天，这应该足够了），看看问题出在哪里。

在我的脑海中，我建议缓存`rs.getRecord()`和替换`dataEntities`，它看起来像 a`List<T>`和类似 a 的东西`LinkedList<T>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T09:07:46.370

大部分时间将在检索记录本身，但有一个小的改进：getRecord 只需要调用一次，

```
var record = rs.getRecord();
dataEntities.add(New LogParserDataEntry(
              record.getValue("eventlog").ToString,
              record.getValue(...... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:54:00.180

缓存 rs.getRecord() 的结果：

```
for (; !rs.atEnd(); rs.moveNext())
            {
                var record = rs.getRecord();

                dataEntities.Add(new LogParserDataEntity(
                                     record.getValue("eventlog").ToString(),
                                     record.getValue("recordnumber").ToString(),
                                     ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:10:36.110

我同意其他人的观点，即缓存`getRecord()`可能会有所帮助，但是如果您发现该过程仍然太慢，您可能需要考虑使用免费的[Microsoft Log Parser](http://www.microsoft.com/en-us/download/details.aspx?id=24659)之类的工具- 我有一段时间没有使用它了，但请记住它非常快速地。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T16:23:34.653

通过编写/使用接收记录而不是所有字符串化字段值的 dataEntities 构造函数，并在该构造函数中处理值检索，可以获得（可能很小）进一步的性能改进。

它也更通用：如果将来使用的字段发生变化，您不需要重新编码。

# java - 我需要什么来签署 jar 文件？

> ID：12050421
> 
> 赞同：1
> 
> 时间：2012-08-21T07:50:54.373
> 
> 标签：java, security, jar, jnlp

我的同事给了我一个用于支持和增强的 Java 项目。我需要签署`.jar`文件。我只找到下一个文件：`genkey.bat`、、`project.cer`和项目内部`signjar.bat`，`keystore-jar.jar`没有更多信息。但是从教程中我了解到我需要别名、密码等......用这个现有文件签署 jar 可能是真实的（而不是创建新的密钥库等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:57:41.587

像这样做：

```
javac ClassName.java
jar cvf JarName.jar ClassName.class
keytool -genkey -validity 3650 -keystore myKeyStore -alias mykeyName
keytool -selfcert -keystore myKeyStore -alias mykeyName -validity 3650
jarsigner -keystore myKeyStore AppletClass.jar mykeyName 
```

# database - 管理工业公司的用户名和密码

> ID：12050432
> 
> 赞同：-2
> 
> 时间：2012-08-21T07:51:50.923
> 
> 标签：database, ms-access, database-design

> **可能重复：**
> [用户名和密码数据库设计](https://stackoverflow.com/questions/12026230/username-password-database-design)

我正在为工业公司设计一个管理信息系统，它有不同类型的用户（员工、客户、供应商）。当我使用 (MS-Access) 设计数据库时，它们中的每一种都是单个实体 (表)。而且我必须给每个人一个自己唯一的用户名，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:06:59.747

使用表继承 - 即有一个实体表来存储核心信息，如用户 ID、用户名、密码等，然后有实体类型表（供应商、客户等）将外键的其他信息存储到实体表中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T09:26:14.433

这是一种选择......我猜Access可以处理FK。

```
user
----
id
username
password
employeeid fk references employee.id
customerid fk references customer.id
supplierid fk references supplier.id

employee
--------
id
<other employee specific columns>

customer
--------
id
<other customer specific columns>

supplier
--------
id
<other supplier specific columns> 
```

# php - 无法打开 zip 文件，codeigniter

> ID：12050441
> 
> 赞同：0
> 
> 时间：2012-08-21T07:52:39.300
> 
> 标签：php, codeigniter

我尝试将用户上传的图片添加到 zip 文件中。因此，该用户可以下载此文件。问题是当我下载这个 zip 文件时，它包含很多文件名（如我所料）。但是当我打开这个 zip 时，它显示错误“C:....ata\Local\Temp\my_photo.zip: Unexpected end of archive”</p>

每张图片都有大小，但 CRC32 是 00000000 这是代码：

```
 $this->load->library('zip');
 $this->zip->clear_data();
 foreach ($row as $ar){
    $file_relative_path = $ar->filepath;               
     if(file_exists($file_relative_path)){
           $this->zip->add_data($this->_getFileName($file_relative_path),file_get_contents($file_relative_path));
     }
}
$this->zip->download('my_photo.zip'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:06:55.160

尝试在最后一行之前添加：

```
$this->zip->archive('my_photo.zip'); 
```

我在[文档](http://codeigniter.com/nightly_user_guide/libraries/zip.html)中找到了这个。

我猜这有时可能会起作用，但在您的情况下可能正在发送标头，因此您需要使用存档方法。

# c# - Windows 8 上的 Oauth 1.0

> ID：12050445
> 
> 赞同：0
> 
> 时间：2012-08-21T07:52:46.977
> 
> 标签：c#, oauth, .net-4.5, async-await

我正在尝试使用 OAuth 1.0 来验证我对某些 Web 服务的调用，这是我的 C# 代码：

```
OAuthBase oauth = new OAuthBase();
string normalizedUrl = String.Empty;
string normalizedqueryparameters = String.Empty;
string finalurl;
string sig;
var MerchantId = "xxxx-xxxx-xxxx-xxxx-xxxx";
var PublicKey = "xx";
var SecreteKey = "xxxxx";
var URL = new Uri("http://www.Server.com/DeveloperAPI/category/" + MerchantId + "/NA");
// token secret
sig = oauth.GenerateSignature(URL, PublicKey, SecreteKey, "", "", "POST", oauth.GenerateTimeStamp(), oauth.GenerateNonce(), out normalizedUrl, out normalizedqueryparameters);
finalurl = string.Format("{0}?{1}&oauth_signature={2}", normalizedUrl, normalizedqueryparameters, oauth.UrlEncode(sig));
string text = string.Empty;
using (var clinet = new HttpClient())
{
      clinet.DefaultRequestHeaders.Add("Accept", "application/Json");
      clinet.DefaultRequestHeaders.Add("Method", "POST");
      using (var response = await clinet.GetAsync(finalurl))
      {
           text = await response.Content.ReadAsStringAsync();
      }
} 
```

我从这里得到了 OAuthBase 类：

[http://code.google.com/p/oauth/issues/detail?id=223](http://code.google.com/p/oauth/issues/detail?id=223)

使用 Fiddler 的原始 http 请求是这样的：

```
GET http://www.server.com/DeveloperAPI/category/d8d63626-99d7-4aff-abe7-542ad705d083/CK00001277?oauth_consumer_key=Rxxxx7LO&oauth_nonce=65xxx982&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1345xxxx20&oauth_version=1.0&oauth_signature=PhUxxxxOh%2FzIxCo8A%2BQBNxxxxy7E%3D HTTP/1.1
Accept: application/Json
Method: POST
Host: www.xxxx.com
Proxy-Connection: Keep-Alive 
```

我创建 HTTP 调用对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:16:56.303

嗯..真的，我会先尝试使用 WireShark 查看 HTTP 请求。例如，有可能在测试服务器上获得一些重定向和额外的初步身份验证 cookie（httpclient 将存储），而在主服务器上 - 您没有，您必须在调用该 sig-generator 之前先获得它们. 查看流量非常容易，它会让您确定差异是在您这边还是在他们这边。有时，当您向 webdevs 提供包含原始数据包的日志文件时，他们会更加健谈 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:14:10.077

问题是，当我创建签名时，我传递了“POST”，但调用是“GET”，所以这解决了我的问题：

```
sig = oauth.GenerateSignature(URL, PublicKey, SecreteKey, "", "", "GET", oauth.GenerateTimeStamp(), oauth.GenerateNonce(), out normalizedUrl, out normalizedqueryparameters); 
```

# java - java - 如何将Graphics绘制的字符串放在java中的椭圆上

> ID：12050447
> 
> 赞同：2
> 
> 时间：2012-08-21T07:52:49.803
> 
> 标签：java, string, graphics

我需要`String`在椭圆上写一个，所以椭圆的中间会显示文本。文本由`g.drawString();`方法绘制，椭圆由`g.fillOval();`. 怎么可能`String`放在上面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:58:39.603

![在此处输入图像描述](../Images/d73f373ae6fe085c97db41b7f05ff793.png)

```
import java.awt.*;
import javax.swing.*;

public class FrameTest {
    public static void main(String args[]) {
        JFrame f = new JFrame();
        f.add(new JComponent() {
            public void paintComponent(Graphics g) {

                // Some parameters.
                String text = "Some Label";
                int centerX = 150, centerY = 100;
                int ovalWidth = 200, ovalHeight = 100;

                // Draw oval
                g.setColor(Color.BLUE);
                g.fillOval(centerX-ovalWidth/2, centerY-ovalHeight/2,
                           ovalWidth, ovalHeight);

                // Draw centered text
                FontMetrics fm = g.getFontMetrics();
                double textWidth = fm.getStringBounds(text, g).getWidth();
                g.setColor(Color.WHITE);
                g.drawString(text, (int) (centerX - textWidth/2),
                                   (int) (centerY + fm.getMaxAscent() / 2));

            }
        });

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(300, 300);
        f.setVisible(true);
    }
} 
```

# phonegap-plugins - 科尔多瓦 2.0 (android) 的 ChildBrowser 插件

> ID：12050448
> 
> 赞同：3
> 
> 时间：2012-08-21T07:52:52.957
> 
> 标签：phonegap-plugins, cordova-2.0.0

嗨，我的旧插件（Childbrowser）在cordova 2.0 中不起作用，请帮助我，我如何将旧版本升级到cordova 2.0（android），或者任何新版本的子浏览器插件可用？

**更新** [https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser/2.0.0](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser/2.0.0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:23:07.873

你试过了吗：

```
window.plugins.childBrowser.showWebPage(url,'http://google.com'); 
```

在我的项目中它可以工作，我没有更改我的 AndroidManifest。

# c# - 以编程方式清理 Windows 8 搜索魅力建议

> ID：12050451
> 
> 赞同：1
> 
> 时间：2012-08-21T07:53:14.540
> 
> 标签：c#, search, windows-8, microsoft-metro, windows-runtime

我正在创建一个地铁风格的应用程序，并且我已经实施了带有建议的搜索合同。选择建议后，即使它不再存在（如 Web 文本字段缓存），它仍会存储以供其他搜索使用。我怎样才能删除这些建议？

（**编辑：**如果无法以编程方式清理它，我该如何手动删除这些建议，因为它们填满了搜索框建议区域中的所有空间。）

![搜索建议](../Images/b4523d9ca3acf673f1641ee35a59e299.png)

正如您所看到的，即使我不搜索任何内容，建议也在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:03:29.823

你不能。Search Charm 的目的是保持打开状态，以便用户可以选择多个应用程序，直到他或她获得所需的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:13:48.697

我想通了：（`Settings Charm > Change PC Settings (Windows 8 metro style control panel)) > Search > Erase History`我不确定对于我有另一种语言的窗口的路径来说，这是否是正确的英文命名）。

# oracle - 在 Oracle Directory Server EE 中向模式添加约束

> ID：12050454
> 
> 赞同：0
> 
> 时间：2012-08-21T07:53:23.780
> 
> 标签：oracle, ldap, constraints

有没有办法在 Oracle Directory Server Enterprise Edition 中向 LDAP 模式添加一些约束？**当我使用Oracle Directory Server Control Server**添加我的自定义属性时，我可以从预定义列表（如`INTEGER`、`Boolean`或`URI`）中定义属性的语法。但我有一些额外的语义规则。例如，我想定义`gender`只能有`F`、`M`或`U`值的属性。如果我可以定义该`rating`属性具有 type ，那也很好`Integer`，但是`0<=rationg<=100`. 也许有一些方法可以定义我的自定义数据类型，这样`rating`可以满足我的语义需求并继承自`INTEGER`？

**PS**我没有在管理指南中找到这个特殊的能力，并决定发布这个问题。也许解决方案很明显-我不是经验丰富的`LDAP`管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:54:49.510

为了约束属性的值，管理员必须使用自定义语法定义属性。另请参阅：[语法和匹配规则](https://www.rfc-editor.org/rfc/rfc4517)。

# sql - sql select 2个字段几乎相等

> ID：12050458
> 
> 赞同：-1
> 
> 时间：2012-08-21T07:53:44.403
> 
> 标签：sql, sql-server, select

想象一张这样的桌子：

```
ID - NAME
1    BART
2    LISA
3    HOMER
4    MISA
5    HOMRE 
```

而且我只想选择 3 个或更多字符等于并跟随的行。所以在这个选择之后我应该得到：

```
ID - NAME
2    LISA
3    HOMER
4    MISA
5    HOMRE 
```

如何用 sql server 2008 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:11:01.827

我假设您的意思是相同位置的相同字符

这不会特别快，但是...

```
;with cteLetters AS 
(  
   SELECT  
        ID, 
        #t.name,
        Number as Position,
        SUBSTRING(#t.name,Number,1) AS [Char]      
   FROM #t
        INNER JOIN master.dbo.spt_values 
        ON Number BETWEEN 1 AND LEN(#t.name) 
        AND type='P'      
)   
    select a1.name, a2.name
    from cteLetters a1
        inner join cteLetters a2 
            on a1.id<>a2.id
            and a1.position = a2.position -- omit this line if order doesn't matter
            and a1.char = a2.char

    group by a1.name,a2.name
    having COUNT(*)>=3 
```

（我想象你的表叫做#t，有两个字段（id，name））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:33:52.580

要测试任意位置的常见字符，可以使用 SQL 函数：

```
create function dbo.CommonChars(@str1 varchar(255), @str2 varchar(255))
returns int
begin
    declare @count int
    declare @cur int
    set @cur = 1
    set @count = 0
    while @cur <= LEN(@str1)
    begin
        if charindex(substring(@str1, @cur, 1), @str2) > 0
        begin
            set @count = @count + 1
        end
        set @cur = @cur + 1
    end
    return @count
end 
```

测试数据：

```
create table #test (
  id int,
  name varchar(255)
);

insert into #test 
select 1, 'BART' union all
select 2, 'LISA' union all
select 3, 'HOMER' union all
select 4, 'MISA' union all
select 5, 'HOMRE' 
```

测试声明：

```
select * from #test t1 where exists
    (select 1 from #test t2
        where t1.id != t2.id and
        dbo.CommonChars(t1.name, t2.name) >= 3) 
```

回报：

```
id  name
2   LISA
3   HOMER
4   MISA
5   HOMRE 
```

**注意**：如果其中一个字符串多次出现一个字符，则该函数将无法按预期工作（例如，如果您有字符串“MUMMY”和“MA”，则上述查询将返回“MUMMY”；它有3 Ms与“MA”“共同”，因为该函数分别检查每个 M 是否包含在任何其他字符串中）。您必须例如从第二个字符串中删除匹配的字符以防止这种行为；我将把它作为练习留给感兴趣的读者。

# python - 使用 PyBrain 进行神经网络训练不会收敛

> ID：12050460
> 
> 赞同：32
> 
> 时间：2012-08-21T07:53:49.833
> 
> 标签：python, neural-network, pybrain

我有以下代码，来自 PyBrain 教程：

```
from pybrain.datasets import SupervisedDataSet
from pybrain.supervised.trainers import BackpropTrainer
from pybrain.tools.shortcuts import buildNetwork
from pybrain.structure.modules import TanhLayer

ds = SupervisedDataSet(2, 1)
ds.addSample((0,0), (0,))
ds.addSample((0,1), (1,))
ds.addSample((1,0), (1,))
ds.addSample((1,1), (0,))

net     = buildNetwork(2, 3, 1, bias=True, hiddenclass=TanhLayer)
trainer = BackpropTrainer(net, ds)

for inp, tar in ds:
     print [net.activate(inp), tar]

errors  = trainer.trainUntilConvergence()

for inp, tar in ds:
     print [net.activate(inp), tar] 
```

然而，结果是一个没有经过良好训练的神经网络。在查看错误输出时，网络得到了正确的训练，但是它使用 'continueEpochs' 参数来训练更多，并且网络再次表现更差。所以网络正在收敛，但没有办法得到最好的训练网络。PyBrain 的文档暗示返回的是经过最佳训练的网络，但是它返回了一个错误元组。

当将 continueEpochs 设置为 0 时出现错误（ValueError: max() arg 是一个空序列），因此 continueEpochs 必须大于 0。

PyBrain 是否真的被维护了，因为文档和代码似乎有很大的不同。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-21T08:23:06.910

经过一番挖掘后，我发现 PyBrain 教程中的示例完全不合适。

当我们查看源代码中的方法签名时，我们发现：

```
def trainUntilConvergence(self, dataset=None, maxEpochs=None, verbose=None, continueEpochs=10, validationProportion=0.25): 
```

这意味着 25% 的训练集用于验证。尽管在数据上训练网络时这是一种非常有效的方法，但当您拥有完整的可能性范围时，您不会这样做，即 4 行 XOR 2-in-1-out 解决方案集。当一个人想要训练一个 XOR 集并且你删除了其中一行进行验证时，这会立即导致你得到一个非常稀疏的训练集，其中一个可能的组合被省略，从而自动导致那些权重没有被训练。

通常，当您省略 25% 的数据进行验证时，您会假设这 25% 覆盖了网络或多或少已经遇到的“大部分”解决方案空间。在这种情况下，这是不正确的，它覆盖了网络完全未知的 25% 的解决方案空间，因为您将其删除以进行验证。

因此，训练器正确地训练了网络，但是通过省略 25% 的 XOR 问题，这会导致网络训练不佳。

PyBrain 网站上的另一个示例作为快速入门会非常方便，因为在这种特定的 XOR 情况下，这个示例完全是错误的。你可能想知道他们是否自己尝试过这个例子，因为它只是随机输出训练有素的网络。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-10T04:30:43.723

[我在 Coursera 上](https://www.coursera.org/course/ml)学习了由 Andrew Ng 教授的优秀机器学习课程，课程的一部分内容包括训练一个小型神经网络来识别异或。所以我对基于快速入门部分没有收敛的pybrain示例有点[困扰](http://pybrain.org/docs/#quickstart)。

我认为有很多原因，包括上面关于最小数据集被分成训练和验证的原因。在课程的某一时刻，Andrew 说“获胜的不是拥有最佳算法的人，而是拥有最多数据的人。他接着解释说，2000 年代数据可用性的爆炸式增长是导致人工智能的复兴，现在称为机器学习。

因此，考虑到所有这些，我发现

1.  验证集可以有 4 个样本，因为那是在训练阶段之后。
2.  正如我在课堂上学到的，网络只需要隐藏层中的 2 个节点，
3.  在这种情况下，学习率需要非常小，例如 0.005，否则训练有时会跳过答案（这是课堂上的一个重要点，我通过玩数字确认了这一点）。
4.  学习率越小，maxEpochs 可以越小。小的学习率意味着收敛沿着梯度向最小化采取更小的步骤。如果它更大，则需要更大的 maxEpochs 以便它在确定达到最小值之前等待更长时间。
5.  您需要在网络中设置一个bias=True（向输入层和隐藏层添加一个常量 1 节点）。阅读[这个](https://stackoverflow.com/questions/2480650/role-of-bias-in-neural-networks)关于偏见的问题的答案。
6.  最后，也是最重要的，你需要一个大的训练集。1000 人在大约 75% 的时间里都集中在正确的答案上。我怀疑这与最小化算法有关。较小的数字会经常失败。

所以这里有一些有效的代码：

```
from pybrain.datasets import SupervisedDataSet

dataModel = [
    [(0,0), (0,)],
    [(0,1), (1,)],
    [(1,0), (1,)],
    [(1,1), (0,)],
]

ds = SupervisedDataSet(2, 1)
for input, target in dataModel:
    ds.addSample(input, target)

# create a large random data set
import random
random.seed()
trainingSet = SupervisedDataSet(2, 1);
for ri in range(0,1000):
    input,target = dataModel[random.getrandbits(2)];
    trainingSet.addSample(input, target)

from pybrain.tools.shortcuts import buildNetwork
net = buildNetwork(2, 2, 1, bias=True)

from pybrain.supervised.trainers import BackpropTrainer
trainer = BackpropTrainer(net, ds, learningrate = 0.001, momentum = 0.99)
trainer.trainUntilConvergence(verbose=True,
                              trainingData=trainingSet,
                              validationData=ds,
                              maxEpochs=10)

print '0,0->', net.activate([0,0])
print '0,1->', net.activate([0,1])
print '1,0->', net.activate([1,0])
print '1,1->', net.activate([1,1]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-23T14:42:39.223

```
trainer = BackpropTrainer(net, ds, learningrate = 0.9, momentum=0.0, weightdecay=0.0, verbose=True) 
trainer.trainEpochs(epochs=1000) 
```

这种方式可以收敛。如果学习率太小（例如 0.01），它会丢失在局部最小值中。正如我所测试的，学习率在 0.3-30 之间，它可以收敛。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T19:16:33.750

以下似乎始终给出正确的结果：

```
from pybrain.tools.shortcuts import buildNetwork
from pybrain.structure import TanhLayer
from pybrain.datasets import SupervisedDataSet
from pybrain.supervised.trainers import BackpropTrainer

#net = buildNetwork(2, 3, 1, bias=True, hiddenclass=TanhLayer)
net = buildNetwork(2, 3, 1, bias=True)

ds = SupervisedDataSet(2, 1)
ds.addSample((0, 0), (0,))
ds.addSample((0, 1), (1,))
ds.addSample((1, 0), (1,))
ds.addSample((1, 1), (0,))
ds.addSample((0, 0), (0,))
ds.addSample((0, 1), (1,))
ds.addSample((1, 0), (1,))
ds.addSample((1, 1), (0,))
ds.addSample((0, 0), (0,))
ds.addSample((0, 1), (1,))
ds.addSample((1, 0), (1,))
ds.addSample((1, 1), (0,))
ds.addSample((0, 0), (0,))
ds.addSample((0, 1), (1,))
ds.addSample((1, 0), (1,))
ds.addSample((1, 1), (0,))
ds.addSample((0, 0), (0,))
ds.addSample((0, 1), (1,))
ds.addSample((1, 0), (1,))
ds.addSample((1, 1), (0,))
ds.addSample((0, 0), (0,))
ds.addSample((0, 1), (1,))
ds.addSample((1, 0), (1,))
ds.addSample((1, 1), (0,))

trainer = BackpropTrainer(net, ds, learningrate=0.001, momentum=0.99)

trainer.trainUntilConvergence(verbose=True)

print net.activate([0,0])
print net.activate([0,1])
print net.activate([1,0])
print net.activate([1,1]) 
```

# android - Android中的两个活动和null

> ID：12050461
> 
> 赞同：1
> 
> 时间：2012-08-21T07:53:50.503
> 
> 标签：android, android-layout

我有两个活动：一个是`actionbar`我有一些 ImageViews 的地方，另一个是从第一个类扩展的第二个类。在第二个活动中，我想从第一个活动中更改一些 Imagesviews 的图标。这个有可能。

当我尝试：

```
check_box_list_view = (ImageView) findViewById(R.id.email_list_item_checkbox_icon); 
```

我得到空值。如何在第二个活动中访问第一个活动的 ImageResoure 图像？

动作栏VCard：

```
public class ActionBarVCard extends Activity{
    private ImageView action_bar_home_icon, action_bar_title_icon, action_bar_vCard_icon;
    private TextView action_bar_title_text;
    private RelativeLayout relative;
    private ActionBar action;
    private RelativeLayout.LayoutParams params;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        params = new RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
        action = getActionBar();
        relative = new RelativeLayout(getApplicationContext());
        action_bar_home_icon = new ImageView(getApplicationContext());
        action_bar_vCard_icon = new ImageView(getApplicationContext());
        action_bar_title_icon = new ImageView(getApplicationContext());
        action_bar_title_text = new TextView(getApplicationContext());

        action_bar_home_icon.setImageResource(R.drawable.home_android);
        params.setMargins(20, 0, 20, 0);
        action_bar_home_icon.setLayoutParams(params);
        action_bar_home_icon.setId(1);
        action_bar_home_icon.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent intent = new Intent(ActionBarVCard.this, MainActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                intent.putExtra("ClassName", "action_bar_coverView_icon");
                startActivity(intent);              
            }
        });

        params = new RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.RIGHT_OF, action_bar_home_icon.getId());
        params.setMargins(0, 10, 5, 0);
        action_bar_title_icon.setImageResource(R.drawable.twoarrows_icon);
        action_bar_title_icon.setLayoutParams(params);
        action_bar_title_icon.setId(2);

        params = new RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.RIGHT_OF, action_bar_title_icon.getId());
        action_bar_title_text.setText("vCard");
        action_bar_title_text.setTextSize(24);
        action_bar_title_text.setLayoutParams(params);
        action_bar_title_text.setId(3);

        params = new RelativeLayout.LayoutParams(android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT,android.widget.RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        params.setMargins(0, 0, 20, 0);
        action_bar_vCard_icon.setImageResource(R.drawable.installvcard_selected_android);
        action_bar_vCard_icon.setLayoutParams(params);
        action_bar_vCard_icon.setId(4);

        action.setDisplayShowCustomEnabled(true);
        action.setDisplayShowHomeEnabled(false);
        action.setDisplayShowTitleEnabled(false);

        relative.addView(action_bar_home_icon);
        relative.addView(action_bar_title_icon);
        relative.addView(action_bar_title_text);
        relative.addView(action_bar_vCard_icon);
        relative.setGravity(Gravity.CENTER);
        action.setCustomView(relative);

        return true;
    }
} 
```

电子名片：

```
public class vCard_view extends ActionBarVCard{
    Button speichernButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         requestWindowFeature(Window.FEATURE_ACTION_BAR);
         setTheme(R.style.mytheme);
         setContentView(R.layout.vcard_view);
         speichernButton = (Button) findViewById(R.id.speichern_button);
         speichernButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                finish();
            }
        });
    }

} 
```

我想更改图标，例如 vCard 类中的 action_bar_home_icon 但我不知道如何

# poppler - 如何提取特定 PDF 的标题/章节/子章节

> ID：12050464
> 
> 赞同：1
> 
> 时间：2012-08-21T07:54:07.760
> 
> 标签：poppler

我正在使用带有 Qt 4.8 的 meego。

我已经安装了所有 poppler 库。

我的问题是，我的机器中的特定位置是否存在任何 PDF。如何使用 poppler 提取该 PDF 章节的标题/章节/子章节。

# html - 在网页上输出文本文件的内容

> ID：12050465
> 
> 赞同：3
> 
> 时间：2012-08-21T07:54:19.677
> 
> 标签：html, include

我有一个包含文档的**离线html 文件，我必须输出文本文件的内容（在我的情况下是源代码）。**有没有办法仅使用客户端功能（HTML 本身或 JS）将此文件的内容包含到 html 页面？

## 索引.html

```
<html>
    <head>
    <style>
    p.source_code
    {
        font-family:"Courier New"
    }
    </style>
    </head>
    <body>
        <p>
            Some content
        </p>
        <p class="source_code">
            <!-- place for output content of file main.cpp -->
        </p>
    </body>
</html> 
```

## 主文件

```
#include <stdio.h>
    int main()
    {
        printf("Hello World");
    } 
```

我希望我在浏览器中的页面看起来像

```
 Some content

    #include <stdio.h>
    int main()
    {
        printf("Hello World");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:02:51.863

`iframe`如果 HTML 文件和源文件都是本地文件，则可以简单地使用：

```
<html>
  <head>
    <title>Example</title>
  </head>
  <body>
    <iframe src="the-file.txt">
    </iframe>
  </body>
</html> 
```

# android - 组成 DatePicker 的组件

> ID：12050469
> 
> 赞同：0
> 
> 时间：2012-08-21T07:54:31.690
> 
> 标签：android, android-datepicker

组成 DatePicker 和 TimePicker 的组件的名称是什么？（带有改变其值的箭头的字段 - 请看下图）。这样的东西是否已经可以访问（我在 GUI 设计器的组件列表中找不到它），还是我必须创建自己的版本？

![在此处输入图像描述](../Images/426d2b8ba238650fb3f613c513ae06ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:00:37.433

不幸的是，您必须创建自己的版本。有[NumberPicker](http://developer.android.com/reference/android/widget/NumberPicker.html)，但仅适用于 API 版本 11，但我不知道您如何以 MMM 格式添加月份...

你可以简单地做一个由一个编辑文本和两个按钮组成的自定义组件，一个按钮在顶部，一个在编辑文本的底部。我认为你可以从你的android SDK安装中找到android资源下的+和-按钮.

我希望它有所帮助。

# c++ - 通过命令行获取 C++ 库的类名

> ID：12050476
> 
> 赞同：2
> 
> 时间：2012-08-21T07:55:11.017
> 
> 标签：c++, class, terminal, command, shared-libraries

有没有办法找到所有用于制作 C++ 库的 C++ 类名（或至少是文件名）？类似于“nm”命令来查找所有方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:55:07.840

你可以试试这个：

```
objdump <library> --dwarf=pubtypes 
```

在我的例子中，它给出了所有的类名。

您可以传递`--dwarf`参数还有其他选项，因此如果有帮助，您也可以查看它。

# android - Android Gallery 在 vi deoview 上重叠

> ID：12050480
> 
> 赞同：2
> 
> 时间：2012-08-21T07:55:38.553
> 
> 标签：android, android-layout, android-gallery

![在此处输入图像描述](../Images/64a15386d72cfd7073fd709deca3cd1e.png)

我在屏幕顶部添加了画廊。

但是，是否可以使视频全屏显示，这意味着画廊与视频视图重叠。另外，我可以双击屏幕来隐藏或显示这个画廊吗？我已经实现了手势检测器，但我可以为画廊做吗？如果是这样，请让我知道如何。

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >
<EditText android:id="@+id/path"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
        />
<Gallery  android:id="@+id/gallery"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
/>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent" >
<VideoView android:id="@+id/surface_view"
         android:layout_width="fill_parent"
         android:layout_alignParentRight="true"
         android:layout_alignParentLeft="true"
         android:layout_alignParentTop="true"
         android:layout_alignParentBottom="true"
         android:layout_height="fill_parent">
</VideoView>
</RelativeLayout>
</LinearLayout> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:26:35.733

我终于想出了怎么做。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >
<VideoView 
             android:id="@+id/surface_view"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent">
</VideoView>
<LinearLayout
   android:layout_width="fill_parent"
          android:layout_height="fill_parent" >

<Gallery android:id="@+id/gallery"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />
</LinearLayout>
</FrameLayout> 
```

此外，图库提供了允许您隐藏和显示的功能。我相信在官方网站上很清楚如何做到这一点。

# php - htaccess 重写以在每个文件夹中包含文件

> ID：12050485
> 
> 赞同：-1
> 
> 时间：2012-08-21T07:55:57.960
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, rewrite

有没有办法我可以使用 htaccess 的 url 重写功能看起来像有一个文件让我们说它`/public/some/folder`实际上是什么时候在`/public`.

例如，我在根文件夹中有 index.php，我希望它在我访问 index.php 时也能像它在所有文件夹和子文件夹中的行为一样

当我执行 index.php 时，它也会在所有文件夹和子文件夹中执行

**更新**

请通过以下示例了解我的问题

index.php 在根目录中，我在根目录中也有不同的文件夹，所以当我通过浏览器访问 index.php 时，它也会在其他文件夹中执行

`http://example.com/index.php`也会表现得好像它也在子文件夹中

`http://example.com/folder1/index.php`

`http://example.com/folder2/index.php`

`http://example.com/folder3/index.php`

`index.php`不在这些文件夹中，但它也必须同时在这些文件夹中执行

我认为通过这个例子不难理解。请相应地回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:41:59.800

我不确定我是否理解正确。但是任何方式你都可以在你的 .htaccess 中尝试类似的东西

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?page=$1 [L,QSA] 
```

所以在它之后，一切都将使用 $_GET[page] 参数进入 index.php。因此，例如 www.mydomen.com/try/to/get/this 将转到我们的 index.php，我们将在其中拥有我们的 $_GET[page]="try/to/get/this"。如果您将为此字符串使用explode，您可以为您的网址编写任何您想要的规则。类似于您自己的 URL 管理器 :)

例子：

将您的 index.php 放在根文件夹中，并将 .htaccess 放在您的 index.php 中：

```
$urlArray = explode("/",$_GET['page']);
switch($urlArray[0]){
  case "try":
     include($_SERVER[DOCUMENT_ROOT]."/path/to/folder/what/you/need/my.php");
     break;
  case "another_url":
     include($_SERVER[DOCUMENT_ROOT]."/another/path/to/folder/what/you/need/my_another.php");
     break;
} 
```

希望这是你需要的。

# email - Grails 邮件中的主题字段编码

> ID：12050491
> 
> 赞同：1
> 
> 时间：2012-08-21T07:56:19.073
> 
> 标签：email, grails, encoding

使用 Grails 邮件插件时，德语特殊字符（如 ü 或 ä）在主题字段中显示为不可读的字符。当我查看邮件原始数据时，它包含一个 utf-8 编码。我需要的是 iso-8859-1 编码。有没有办法使用邮件插件来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:59:25.527

简单的答案是：不，邮件插件不能帮助您，这不是它的责任。电子邮件主题中非 ASCII 字符的正确编码有点复杂。查看相关的 RFC：[https](https://www.rfc-editor.org/rfc/rfc2047) ://www.rfc-editor.org/rfc/rfc2047 ，其中描述了编码。

javax.mail 包中有一个现有的类，它可以为您工作：

[http://docs.oracle.com/javaee/1.3/api/javax/mail/internet/MimeUtility.html](http://docs.oracle.com/javaee/1.3/api/javax/mail/internet/MimeUtility.html)

# air - 将包含 AIR 类的 as3 程序转换为 IPA

> ID：12050498
> 
> 赞同：0
> 
> 时间：2012-08-21T07:57:09.820
> 
> 标签：air, ipa

如何在 FlashDevelop 中编译一个使用 AIR 类的 as3 创建的程序，以便我可以将其转换为 iPad/iPhone 的 IPA？我使用的 AIR 类（文件）没有添加到 swf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:48:40.310

我建议你谷歌更多关于你的问题。有很多教程和方法：

[http://www.codeandvisual.com/2011/exporting-for-iphone-using-air-27-and-flashdevelop-part-two-creating-an-iphone-project/](http://www.codeandvisual.com/2011/exporting-for-iphone-using-air-27-and-flashdevelop-part-two-creating-an-iphone-project/)

对于此类问题，stackoverflow 也是一个不错的搜索引擎。

[FlashDevelop 可以部署到 iOS 上吗？](https://stackoverflow.com/questions/7151334/can-flashdevelop-deploy-to-ios)

# php - 需要 get_object_vars 解释

> ID：12050507
> 
> 赞同：0
> 
> 时间：2012-08-21T07:57:47.463
> 
> 标签：php

我的 php 教程之一是显示波纹管功能。我知道它用于检查属性是否存在，但我无法理解它的真正含义，我的意思是它的注释行的含义是什么？谁能给我解释一下？

```
private function has_attribute($attribute) {
            //get_object_vars returns an associative array with all attributes
            //(incl.private ones!) as the keys and their current values as the value
            $object_vars = get_object_vars($this);
            //we don't care about the value, we just want to know if the key exists
            //will return true or false
            return array_key_exists($attribute, $object_vars);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:03:38.400

**看看这个例子：**

```
<?php

class someClass
{
    public $someVar1;
    public $someVar2;
}

$cl = new someClass();

$vars = get_object_vars($cl);

print_r($vars);

?> 
```

**输出 ：**

```
Array
(
    [someVar1] => 
    [someVar2] => 
) 
```

* * *

您**的**代码所做的是检查您的对象实例是否具有特定属性。

例如

```
$cl->has_attribute("someVar1"); 
```

会回来`true`的。

* * *

**参考 ：**

*   [获取对象变量](http://www.google.gr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CGIQFjAA&url=http://php.net/manual/en/function.get-object-vars.php&ei=7UAzUI7kKY610QX9r4HoBQ&usg=AFQjCNGud4wLtml0KtDozqCaFnv3f_my3Q&sig2=egUBW4Ogt-FluG5NUSVMbA)
*   [array_key_exists](http://www.google.gr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CGAQFjAA&url=http://php.net/manual/en/function.array-key-exists.php&ei=HUEzUICkLuPE0QW8nIDYBQ&usg=AFQjCNGUXldfHSfAV4PmuEO9_MTFm4fUYA&sig2=kpE3xuWt-7FK9POwqZ3YFA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:02:53.110

这是[get_object_vars()的定义](http://php.net/manual/en/function.get-object-vars.php)

> 数组 get_object_vars ( 对象 $object )
> 
> 根据范围获取给定对象的可访问非静态属性。

在这种情况下，这意味着该函数将检查 $attribute 是否已分配给您运行它的类，并返回 true 或 false。

IE

```
class Foo {
   public $bar = "e";

   private function has_attribute($attribute) {
            $object_vars = get_object_vars($this);
            return array_key_exists($attribute, $object_vars);
   }
}

$foo = new Foo;
$foo->has_attribute('bar'); //true
$foo->has_attribute('fooBar'); //false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:03:08.480

这个函数位于一个类中，返回一个包含所有属性（类中的变量）的数组，并返回一个数组，其中的键设置为属性名称。

它包括私有属性（这意味着通常除了对象本身之外，它们不能在任何地方访问。

它根本不检查属性值，最后返回一个数组，其中带有`$attribute`传递给它的 a`true`或`false`告诉它是否存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:04:12.660

好吧，注释的意思是解释代码行的作用，它们也很好地描述了它们的作用。

```
<?php

class Foo {
    protected $bar = 'qux';
    public function hasProperty( $name ) {
        return array_key_exists( $name, get_object_vars( $this ) );
    }
}

$foo = new Foo( );
var_dump( $foo->hasProperty( 'does-not-exist' ) ); // false
var_dump( $foo->hasProperty( 'bar' ) ); // true. 
```

请注意，做这样的事情不是“好习惯”；通常，由于某种原因，属性是私有的或受保护的，您不必确定某个属性是否存在。

# c# - CopyToDataTable：如果一个字段为NULL，为什么它会抛出错误，以及如何修复它？

> ID：12050513
> 
> 赞同：4
> 
> 时间：2012-08-21T07:58:41.083
> 
> 标签：c#, .net, linq

问题：

我正在使用 Linq.Dynamic 的修改版本根据 ajax 请求对数据表进行排序（参见下面的代码）。到目前为止，它**曾经**工作得很好。

但是，我有一个问题：

如果我有一个包含 NULL 值的数据表，即使只有一行中的一个字段为 NULL，我也会得到这两个异常：

```
Object must be of type "string" 
```

如果几个相邻的值为 NULL：

```
At least one object must implement IComparable 
```

这是我的代码

```
using System.Linq;
using System.Data;
using System.Linq.Dynamic;

   // Pre:
   // sidx: Sort Field
   // sord: Sort order ["ASC", "DESC"]
   // page: current page number
   // rows: pagesize in rows
   public static string TestPaging(string sidx, string sord, string page, string rows)
   {
        string strReturnValue = null;

        using (System.Data.DataTable dtAllData = GetDataTable())
        {

            IQueryable<System.Data.DataRow> iqOrderedPagedData = null;

            if (string.IsNullOrEmpty(sidx) || string.IsNullOrEmpty(sord))
                iqOrderedPagedData = dtAllData.AsEnumerable().AsQueryable();
            else
                iqOrderedPagedData = dtAllData.AsEnumerable().AsQueryable().OrderBy(sidx + " " + sord);

            Int32 iPageSize = string.IsNullOrEmpty(rows) ? 100 : System.Convert.ToInt32(rows);
            Int32 iPageIndex = System.Convert.ToInt32(page) - 1;

            iqOrderedPagedData = iqOrderedPagedData.Skip(iPageIndex * iPageSize).Take(iPageSize);

            //using (System.Data.DataTable dtOrderedPagedData = MyCopyToDataTable(iqOrderedPagedData))
            using (System.Data.DataTable dtOrderedPagedData = iqOrderedPagedData.CopyToDataTable())
            {
                cjqGrid jqGrid = new cjqGrid();
                //jqGrid.total = dtAllData.Rows.Count / iPageSize + 1;
                jqGrid.total = (int)Math.Ceiling((float)dtAllData.Rows.Count / (float)iPageSize);
                jqGrid.page = iPageIndex + 1;
                jqGrid.records = dtAllData.Rows.Count;
                jqGrid.data = dtOrderedPagedData;
                strReturnValue = null; // Serialize(jqGrid, true);
                jqGrid = null;
            } // End Using dtOrderedPagedData 

        } // End Using dtAllData

        //Response.ContentType = "application/json";
        return strReturnValue;
    }

TestPaging("USR_Domain", "desc", "1", "10"); 
```

问题似乎是扩展方法[CopyToDataTable](http://vega.frugalware.org/tmpgit/mono/mcs/class/System.Data.DataSetExtensions/System.Data/DataTableExtensions.cs)，在该行：

```
if (!e.MoveNext ()) 
```

这使它对表进行排序，这意味着它调用类 [System.Linq.SortSequenceContext中的函数 Compare](http://source.db4o.com/db4o/trunk/db4o.net/Libs/compact-3.5/System.Linq.Expressions/System.Linq/SortSequenceContext.cs)

在此行引发错误的位置

```
comparison = comparer.Compare(keys[first_index], keys[second_index]); 
```

这里是来自 mono 的版本以及我的修复，这些修复使该 mono 方法真正起作用。
但是，该错误也发生在普通的旧 MS .NET 4.0 中。
（我需要单声道将我的 Linq 使用方法反向移植到 .NET 2.0）

```
public static DataTable CopyToDataTable<T> (this IEnumerable<T> source)
            where T : DataRow
        {
            DataTable dt = new DataTable ();
            IEnumerator<T> e = source.GetEnumerator ();
            if (!e.MoveNext ())
                throw new InvalidOperationException ("The source contains no DataRows");
            foreach (DataColumn col in e.Current.Table.Columns)
                dt.Columns.Add (new DataColumn (col.ColumnName, col.DataType, col.Expression, col.ColumnMapping));
            CopyToDataTable<T> (source, dt, LoadOption.PreserveChanges);
            return dt;
        }

        public static void CopyToDataTable<T> (this IEnumerable<T> source, DataTable table, LoadOption options)
            where T : DataRow
        {

            if (object.ReferenceEquals(typeof(T), typeof(System.Data.DataRow)))
            {

                foreach (System.Data.DataRow drRowToCopy in source)
                {
                    System.Data.DataRow drNewRow = table.NewRow();

                    for (int i = 0; i < drRowToCopy.ItemArray.Length; ++i)
                    {
                        drNewRow[i] = drRowToCopy[i];
                    } // Next i

                    table.Rows.Add(drNewRow);
                } // Next dr

            }
            else
                CopyToDataTable<T>(source, table, options, null);
        } 
```

只要一行的一列中只有一个值为NULL，就会出现问题......

谁能建议我如何解决这个问题？
或者，当一个或两个字段为 NULL 时，我如何才能从 IEnumerable 生成 DataTable 而不会出现异常？

现在我通过在比较中捕获异常来“修复”它。
但这只是 .NET 2.0 的修复，我可以这样做，因为这个类不存在。
我需要一个真正适用于 .NET 4.0 的修复程序。

```
public override int Compare (int first_index, int second_index)
        {
            int comparison = 0;
            try
            {
                comparison = comparer.Compare(keys[first_index], keys[second_index]);
            }
            catch (Exception ex)
            {
                //Console.WriteLine(ex.Message);
            }

            if (comparison == 0) {
                if (child_context != null)
                    return child_context.Compare (first_index, second_index);

                comparison = direction == SortDirection.Descending
                    ? second_index - first_index
                    : first_index - second_index;
            }

            return direction == SortDirection.Descending ? -comparison : comparison;
        } 
```

PS：对于我的 Linq.Dynamic 的 DataTable-OrderBy-Enhanced 版本，请参见此处：
[http ://pastebin.com/PuqtQhfa](http://pastebin.com/PuqtQhfa)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:40:02.047

好的，我得到了解决方案：

很明显，它与 System.DbNull 类型有关

首先，因为我的 DataTable 中只有字符串，所以我收到了错误消息：

```
Object must be of type "string" 
```

但是字符串怎么可能不是字符串类型呢？当然只有当它是 DbNull 时。

如果你有两个相邻的 DbNull.Values，你当然会得到：

```
At least one object must implement IComparable 
```

因为 DbNull 没有实现 IComparable。

毕竟，有趣的是，它只在排序列是具有 NULL 值的列时才会失败，但如果它是没有 NULL 值的列，它确实可以完美地工作。

由于表本身包含所有空值而与排序无关，因此 CopyToDataTable 有时不起作用是不合逻辑的，因为它每次都复制所有值而与排序无关。

唯一合乎逻辑的结论是 OrderBy 在代码中调用时不会被执行，而只有在某些方法实际使用 OrderBy 生成的数据时才会执行。

一个快速的谷歌搜索把我带到了这个 [http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)

其中只有前几行需要阅读以了解问题所在：

> 这篇文章涵盖了最重要且经常被误解的 LINQ 特性之一。了解延迟执行是 LINQ 开发人员在希望充分利用该技术的全部力量之前必须经历的一项仪式。

所以我突然意识到我刚刚通过了通行权:)

显然，缺陷是`e.MoveNext()`在排序时触发了在 DbNull 上失败的比较，因为如上所述的 DbNull 没有实现 IComparable。

具有讽刺意味的是，数据表也可以使用我最初不知道的 select 语句进行排序（毕竟，我希望将“order”方法称为“order”，而不是“select”......）所以我刚刚将 Linq.Dynamic 中的 OrderBy 更改为

```
public static IQueryable OrderBy(this IQueryable source, string ordering, params object[] values)
{
    if (source == null) throw new ArgumentNullException("source");
    if (ordering == null) throw new ArgumentNullException("ordering");

    if (object.ReferenceEquals(source.ElementType, typeof(System.Data.DataRow)))
    {
        using (DataTable dt = source.Cast<System.Data.DataRow>().CopyToDataTable())
        {
            return dt.Select("", ordering).AsQueryable();
        } 
```

瞧，虫子不见了。
而且由于它可以单独使用 Select 过滤比使用 Linq.Dynamic 更有效（它会生成所有数据的大约 3 个副本），所以我决定完全放弃 Linq.Dynamic。
我还在用Linq take and skip，不过以后肯定会更不愿意用Linq。

延迟执行是完全危险的，因为它会导致非常难以追踪的错误。
“boooom”所需要的只是在错误位置的空值，或缺少接口（以及在这种情况下缺少检查或缺少泛型限制）......

# objective-c - NSBitmapImageRep 调整大小

> ID：12050517
> 
> 赞同：2
> 
> 时间：2012-08-21T07:58:55.217
> 
> 标签：objective-c, macos, image, bitmap, resize

有没有办法调整大小`NSBitmapImageRep`？

我找到了方法`setPixel:atX:y:`，但我不确定它在做什么。也许这是我需要的？

如果没有，那我该怎么做？

我需要在将图像写入文件之前调整图像大小，并且我的图像进入`NSBitmapImageRep`. 当然，我可以将其转换为`NSImage`或者`CIImage`是否更容易调整大小。如果是，那么请告诉我。

顺便说一句，我需要能够在不保持任何比例的情况下调整图像大小。例如，如果 image 是`3200x2000`，我需要能够将其调整为 size `100x100`。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:13:54.347

您应该使用正确插入源的实现。

您可以使用`CGBitmapContext`目标尺寸（例如 3200x3200）和规格来完成此操作，然后将源图像图像绘制到`CGBitmapContext`. 然后，您可以使用 CGBitmapContext 的图像创建函数，或使用上下文的位图缓冲区作为输出样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:28:52.840

**编辑**您可以使用以下功能调整图像大小而不保持任何比例：

```
- (NSImage *)imageResize:(NSImage*)anImage
         newSize:(NSSize)newSize 
{
 NSImage *sourceImage = anImage;
 [sourceImage setScalesWhenResized:YES];

 // Report an error if the source isn't a valid image
 if (![sourceImage isValid])
 {
    NSLog(@"Invalid Image");
 } else
 {
    NSImage *smallImage = [[[NSImage alloc] initWithSize: newSize] autorelease];
    [smallImage lockFocus];
    [sourceImage setSize: newSize];
    [[NSGraphicsContext currentContext] setImageInterpolation:NSImageInterpolationHigh];
    [sourceImage compositeToPoint:NSZeroPoint operation:NSCompositeCopy];
    [smallImage unlockFocus];
    return smallImage;
 }
 return nil;
} 
```

其次像这样保持比例：

```
NSData *imageData = [yourImg  TIFFRepresentation]; // converting img into data
NSBitmapImageRep *imageRep = [NSBitmapImageRep imageRepWithData:imageData]; // converting into BitmapImageRep 
NSDictionary *imageProps = [NSDictionary dictionaryWithObject:[NSNumber numberWithFloat:0.9] forKey:NSImageCompressionFactor]; // any number betwwen 0 to 1
imageData = [imageRep representationUsingType:NSJPEGFileType properties:imageProps]; // use NSPNGFileType if needed
NSImage *resizedImage = [[NSImage alloc] initWithData:imageData]; // image created from data 
```

# r - persp.default() 中的错误：无效的“z”参数

> ID：12050522
> 
> 赞同：1
> 
> 时间：2012-08-21T07:59:12.533
> 
> 标签：r

关于`persp`：

```
x <- seq(.0001, 10000, by = (10000 - .0001) / 1000)
y <- seq(.01, .5, by = (.5 - .01) / 100)

fun <- function(x, y) {
  x + y ^ 2 - 2 * y
}

persp(x = x, y = y, z = fun(x, y)) 
```

它返回

```
Error in persp.default(x = x, y = y, z = fun(x, y)) : 
  invalid 'z' argument
In addition: Warning messages:
1: In x + y^2 :
  longer object length is not a multiple of shorter object length
2: In x + y^2 - 2 * y :
  longer object length is not a multiple of shorter object length 
```

我该如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:05:28.980

你快到了。只需使用`outer`'fun' 获取矩阵：

```
persp(x = x, y = y, z = outer(x, y, fun)) 
```

# jquery - jQplot Animate 系列单独展出

> ID：12050523
> 
> 赞同：0
> 
> 时间：2012-08-21T07:59:13.160
> 
> 标签：jquery, jquery-animate, jqplot

这是我的场景：

我想要一个来自 barRendered 图形的系列在显示时从上到下进行动画处理。如果这是可能的，如果是的话如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:46:15.150

传递给 $.jqplot 方法的设置应包括：

动画：真，动画重绘：真

我不确定 jqplot 的哪个版本更新了动画，但我知道他们的最新版本（1.0.3）允许它。

[http://www.jqplot.com/deploy/dist/examples/barLineAnimated.html](http://www.jqplot.com/deploy/dist/examples/barLineAnimated.html)

# regex - 从分页 URL 中删除“页面”

> ID：12050524
> 
> 赞同：4
> 
> 时间：2012-08-21T07:59:16.490
> 
> 标签：regex, .htaccess, url-rewriting, wordpress

我在 Wordpress 中更改分页 URL 时遇到问题。我知道对此的通用解决方案是更改 Wordpress 核心文件，但我只需要一个类别的解决方案。也许只有一个类别可以通过 htaccess 来完成？

现在有这样的 URL：http: [//mysite.com/categoryname/](http://mysite.com/categoryname/) **page** /3

我想把它改成这样： http: [//mysite.com/categoryname/3](http://mysite.com/categoryname/3)

感谢您的任何回复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:35:32.220

您需要匹配`%{THE_REQUEST}`以确保您匹配的是实际请求，而不是内部重写的 URI：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /categoryname/page/([0-9]+)
RewriteRule ^ /categoryname/%1 [L,R=301]

RewriteRule ^/categoryname/([0-9]+)$ /categoryname/page/$1 [L] 
```

这些必须在 wordpress 规则之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:13:04.097

基本上，你应该使用这个 htaccess 规则：

```
RewriteRule ^categoryname/page/([0-9]+)$ /categoryname/$1 [L,R=301]
RewriteRule ^categoryname/([0-9]+)$ /categoryname/page/$1 [L] 
```

*   第一条规则将您的旧网址更改`categoryname/page/3`为`categoryname/3`.
*   第二条规则是从`categoryname/3`to的不可见重定向`categoryname/page/3`。

然后你可以在你的代码中使用两者`categoryname/page/3`，`categoryname/3`这将始终在 url 中显示简短版本。

请注意，其他类似网址可能存在一些问题（确保您永远不会在`categoryname/3`其他地方使用）

**编辑**

无限循环……我怎么能错过！

避免此循环的方法是找到`category/page/3`（例如：）的“最终 url” `index.php?category_name=categoryname&page=3`，并在您的第二条规则中使用它：

```
RewriteRule ^categoryname/page/([0-9]+)$ /categoryname/$1 [L,R=301]
RewriteRule ^categoryname/([0-9]+)$ /index.php?category_name=categoryname&page=$1 [L] 
```

# javascript - 在传递一些参数的面板中更新 HTML (Ext Js)

> ID：12050527
> 
> 赞同：1
> 
> 时间：2012-08-21T07:59:53.217
> 
> 标签：javascript, extjs

正如标题所说，我想将一个 HTML 更新到一个面板中，向它传递一些参数。我正在使用的代码示例是：

```
Ext.getCmp(panelId).load(
    {url:'htmlInThePanel.html',
     scripts:true,
     params:{
          par1 : x,
          par2 : y
         }
     }
); 
```

我在这个网站上了解到这一点：

[http://www.learnsomethings.com/2010/08/23/loading-an-external-page-into-an-extjs-panel-and-allowing-the-page-to-execute-script/](http://www.learnsomethings.com/2010/08/23/loading-an-external-page-into-an-extjs-panel-and-allowing-the-page-to-execute-script/)

我遇到的问题是我不知道如何访问 html 中的参数。任何想法？

先感谢您！

编辑：

感谢您的回答，但我仍然有问题，也许我没有理解您的意思，这是我尝试过的：

```
params:{
    par1 : "Test text"
} 
```

并进入html：

```
<span id="par1">
</span> 
```

我希望在放置跨度的地方有“测试文本”，但它不起作用，我也尝试了相同的结果：

```
<span id="params.par1">
</span> 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:23:07.900

I guess those parameters should be wrapped into span/paragraphs/divs with id's like:

```
<span id="par1">par1_value</span>
<span id="par2">par2_value</span> 
```

and your code could be

```
params:{
    par1 : Ext.get('par1'),
    par2 : Ext.get('par2')
} 
```

# sql - 在“选择然后更新”的情况下如何避免再次获取数据

> ID：12050528
> 
> 赞同：2
> 
> 时间：2012-08-21T07:59:54.640
> 
> 标签：sql, sql-server, performance, sql-server-2008

目前，我的表（表 A）有大约 10.000.000 条记录。每天都有100条记录来。它们是新的，没有经过处理。所以，进程列 = 0。我使用的是 SQL Server 2008。

在我的业务中，我需要执行 2 个步骤：

1.  获取数据是新的（Process = 0），做一些事情，然后插入到表 B 中。
2.  在表 A 中更新进程 = 1。

因此，在第 1 步中，我使用 WHERE 子句获取这 100 条记录。在第 2 步，我必须再次使用 WHERE 子句来获取和更新它们。

我认为，两次获取数据，性能不会很好，对吧？

有人可以告诉我在这种情况下我应该怎么做，以便我只需要查询一次吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:36:12.703

考虑 OUTPUT 子句：

```
UPDATE A
SET    Process = 1
OUTPUT INSERTED.*column1*,
       INSERTED.*column2*,
       …
INTO   B (*column1*, *column2*, …)
WHERE  Process = 0
; 
```

请注意，[根据手册](http://msdn.microsoft.com/en-us/library/ms177564.aspx "输出子句 (Transact-SQL)")，该`B`表不能：

> *   已启用在其上定义的触发器。
>     
>     
> *   参与 FOREIGN KEY 约束的任一侧。
>     
>     
> *   有 CHECK 约束或启用规则。

如果上述关于表的任何情况都是正确的`B`，那么您可以在最终将数据插入之前使用临时表或表变量作为中间存储`B`：

```
DECLARE @newdata TABLE (*columns*);
UPDATE A
SET    Process = 1
OUTPUT INSERTED.*column1*,
       INSERTED.*column2*,
       …
INTO   @newdata (*column1*, *column2*, …)
WHERE  Process = 0
;
INSERT INTO B (*columns*)
SELECT *columns* FROM @newdata
; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:36:04.870

SQL 服务器将先前查询的结果保存在缓存中。因此，如果您有有用的主键（例如：小的集群代理键），那么第二个查询应该不是问题。

如果您想创建更大的批次（例如一次 10000 个项目），您可以使用临时表来存储您在批次中处理的主键。这样，您不需要在查询中传递太多键。

避免过早优化。首先确定性能问题——如果有的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:22:53.223

您可以使用触发器来解决您的问题：

```
CREATE TRIGGER TR_A ON  A
   AFTER INSERT
AS BEGIN
    INSERT INTO B (Column1, Column2, ...)
    SELECT I.Column1, I.Column2, ...
    FROM INSERTED I
    WHERE I.Process = 1
END 
```

# c# - 来自 c# 设计器 GUI 的“查找所有引用”

> ID：12050531
> 
> 赞同：7
> 
> 时间：2012-08-21T08:00:16.367
> 
> 标签：c#, visual-studio-2010, refactoring, resharper

我想“查找所有引用”到我的 Windows 窗体上的控件（在设计器模式下）。这是我目前使用的痛苦程序：

1.  点击控件
2.  转到属性表中的“名称”
3.  复制剪贴板中的控件名称
4.  在所有文件中执行查找，粘贴要查找的控件名称。
5.  单击任意结果，然后右键单击，然后“查找所有引用”

我想知道我是否遗漏了什么，或者真的没有办法以更简单的方式执行这样的操作。我最近还安装了 Resharper（为了其他功能）。

请告诉我VS中是否有任何内置方式或Resharper或其插件提供的任何方法来简化此类操作，

我使用 VS 2010 SP1 C# 和 Resharper V7.0。

**编辑**：*非常感谢您在回答时提及您提出的整个解决方案或其部分是否基于 VS 或 Resharper。（因为我最近安装了 Resharper，还没有深入了解它的功能），非常感谢。*

**致谢和结论**：感谢*thersch*：他的回答就像一篇完整的文章，对社区来说非常有用。感谢*wal*：他指出了两个微妙的技巧（排序列表视图，跳过名称查找）。感谢你们俩：你们一起补充了缺失的部分。

**当前状态**：我向开发人员报告了该问题，并已要求将此作为一项功能在更高版本的 resharper 中实现，请访问以下链接以跟踪工具供应商的问题当前状态：

[https://youtrack.jetbrains.com/issue/RSRP-429747](https://youtrack.jetbrains.com/issue/RSRP-429747)

*免责声明：我与工具/供应商没有任何关系，只是一个用户。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:47:38.097

# *F7, (Ctrl+[)+, Shift+F12*

*   F7 查看代码
*   Ctrl+[ 导航到包含声明，直到到达类名
    （按几次或按住键直到到达类名）
*   Shift+F12 显示该 Control 类的所有引用

**再次详细步骤：**

假设您已打开表单控件 ( `MyControl.Designer.cs`) 的设计视图。

1.  ***F7***
    （您之前不需要选择控件。）
    => 代码文件`MyControl.cs`已打开。

2.  **通过以下方式将光标设置在控件的类名上：**

    *   用鼠标选择或
    *   *Ctrl+[*如果您在控件的类声明之下或
    *   *如果光标位于控件的类声明之上，则 *Alt+Down或**
    **   *Alt+\*并选择第一个类名。
        （控件的类名应该是所有表单控件代码文件中的第一个
        *。Alt+\*以真实的非字母顺序列出所有成员（至少在我的 ReSharper 5.1.3 中））
        。*
**   ***Shift+F12***
    => 列出所有用法

    *   ***Shift+F7***
    => 切换回设计视图* 

 ***或者**

# *F7 ，在**File Stucture*窗口中选择控件， *Shift+F12*

如果您已经打开了文件结构窗口（*Ctrl+Alt+F*）（我一直打开它。）通过*F7*切换到代码视图，单击控件的类名并按*Shift+F12*。

**再分步骤：**

假设您已经打开了表单控件的设计视图。

1.  ***F7***
    （之前不需要选择控件，只需要关注设计视图窗口即可。）
    => 代码文件`MyControl.cs`已打开。

2.  **打开*文件结构*窗口（*Alt+Ctrl+F*）**

3.  ***通过以下方式在文件结构*窗口中选择控件：**

    *   用鼠标选择或
    *   *Ctrl+Pos1*
        （控件的类名应该是所有Forms控件代码文件中的第一个。）
        。
4.  ***Shift+F12***
    => 列出所有用法

5.  ***Shift+F7***
    => 切换回设计视图

# 哪些快捷键是 VS 哪些是 ReSharper 相关的？

VS：*F7、Shift+F7*
ReSharper：*Ctrl+[、Shift+F12、Alt+Down、Alt+\、Alt+Ctrl+F*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:45:41.947

我认为你不需要第 2 步）`Goto the "Name" in the property sheet`

您只需单击该属性，其名称将显示在顶部组合框中。

假设您安装了 Resharper 并且您在设计器中选择了控件，您可以执行以下操作：

1）F7（转到代码）
2）Alt + \（按字母顺序列出成员，开始在此对话框中输入以过滤或滚动到您想要的那个，您不需要输入完整名称）
3）Shift-F12（一旦你已经从步骤 2 中选择）

![在此处输入图像描述](../Images/b52c7e0f294be0c52c48171471180986.png)*

# java - Java中设置的公共无效；究竟是什么？

> ID：12050534
> 
> 赞同：0
> 
> 时间：2012-08-21T08:00:25.360
> 
> 标签：java

`public void set`在 Java 中，做什么？我读过它'设置命名选项的值'，所以它只是像函数或其他形式的变量赋值吗？（对不起，不是真正的 Java 程序员。）

这是我正在分析的代码：

```
public void set(String s, int value) {
  set(s, new Integer(value));
} 
```

里面到底是什么？（`set(s,new Integer(value)`）我认为这两个“集合”是完全不同的东西。

请帮忙。对不起，如果这是一个简单的问题，但我只是想确认我对这个主题的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T08:02:20.053

`public void set(String s, int value)`是一个方法声明，后面是方法体`{`... `}`。

```
public void set(String s, int value)
\____/ \__/ \_/
   |     |   |
   |     |   '---- Method name
   |     |
   |     '-------- Method return type
   |
   '-------------- Access modifier 
```

后面的行`{`：

```
set(s,new Integer(value)) 
```

是一个方法调用，它`set`使用`s`和`new Integer(value)`作为参数调用 - 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T08:02:28.040

这是一种与其他方法一样的方法。方法 namet 没有特殊的语义`set`。该方法可能类似于`Map.put`并在提供的字符串键下注册值，但它也可以启动 10 个线程并计算我们所知道的生命的意义。

在声明中调用的“其他”设置方法可能是带有签名的方法

```
set(String key, Object value) 
```

或者，也

```
set(String key, Integer value) 
```

两者都可以在上下文中工作，但我投票支持前者，因为后者由于自动装箱而变得多余。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:06:45.927

这是一个功能。`public`是函数可访问的范围（在这种情况下，您可以从类外部调用它），`void`是返回类型，而 void 表示没有返回值。set 是函数的名称。

该方法似乎是一种从类外部将任何变量设置为给定值的接口（虽然它只使用字符串和包含该值的新整数对象调用另一个方法“设置”，可能会达到另一个重载看起来像的功能

```
private void set(String s, Integer value) 
```

你应该寻找类似的东西，也许你的代码会变得清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:30:31.050

在这里，公共意味着访问修饰符，如果您使用公共，您可以在类之外访问该方法。您也可以使用私有、默认和受保护的关键字来代替公共。这是了解[这里的好链接](http://tutorials.jenkov.com/java/access-modifiers.html)

void means the return type in here you not return anything that's why use **void** if you need to return integer value you have to use **int** instead of the void key word. eg - public int getData(){} but if you specify the return type you have to return value.

in here set means method name it is not a key word. but in the java to set some values we use set word as an example **public void setName(){}** like wise.

(String s, Integer value) these are the parameters if you need to call that method you have to pass to objects of the specified classes. in here you have to pass string value and integer value. eg - set("Secret",1);

# design-patterns - DAO 的职责应该走多远？

> ID：12050535
> 
> 赞同：0
> 
> 时间：2012-08-21T08:00:33.253
> 
> 标签：design-patterns, persistence, dao

DAO，也称为映射器（我认为），是一种[核心 Java EE 模式](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)。

我喜欢这种模式，因为（IMO）在代码和 SQL 之间创建一个抽象层可以大大提高代码的质量。

我通常遵循 Java EE 模式，但是当您需要从数据库中获取一些非常具体的数据时，我会感到有些失落。我不确定谁应该负责检索这些数据。

我的方法通常是创建一个`UserModel`类，在其中存储最常用的参数，并在 DAO 中创建一个方法`getUser(param: String): UserModel`。但是，如果数据库中有一个列当然是需要的，但不是那么频繁。最好的方法是什么？

你认为 DAO 应该提供类似 (eg)`getUserID(): String`或的方法`isUserVerfied(): Boolean`吗？还是您认为 DAO 的职责只是提供基础（更新/删除/插入/选择）方法？

基本上，问题是，当您需要一些在代码中没有大量使用的数据时，最好的方法是什么，`select()`在您的 DAO 中创建一个方法，将所有内容（用户表（例如））加载到您的模型中。或者有一些特定的方法，`isUserVerified(): Boolean`尽管这不是模式的一部分？还是有另一种适用于两种情况的方法（经常使用字段和不经常使用的字段）？

请注意，答案应尽可能与语言无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:18:03.923

DAO 的目的是水合完整的对象，在大多数情况下，始终加载对象的所有字段应该不是问题。在您没有遇到性能问题的情况下不加载“不经常使用”的列似乎是过早的优化。

但是，在处理非常大的列（图像、BLOB ......）时，您可以使用延迟加载，无论是通过 ORM 还是手动。加载列的方法可以在 DAO 中，也可以在特定服务中。

# linux - 如何用给定的数字填充二进制文件？

> ID：12050536
> 
> 赞同：1
> 
> 时间：2012-08-21T08:00:33.067
> 
> 标签：linux, file-io, mmap, memcpy

在我的系统中有很多用于存储矩阵的二进制文件。当创建这样的文件时，它必须填充一些值，即 NAN 表示带有`float`数字的矩阵。有什么好的解决方案可以加快这个过程吗？

目前的解决方案是这样的：这些文件是使用 进行内存映射的`mmap()`，所以文件填充`memcpy`如下：

```
float v = NAN;
for (i=0; i<n; ++i){
  memcpy(start+i, &v, sizeof(v));
} 
```

其中`n`是矩阵中元素的数量，`start`是内存映射地址。

我使用`memcpy`而不是`buff[i] = NAN`因为矩阵元素的类型可以不同。

在这种情况下批量复制有帮助吗？例如，我可以在内存中创建一个填充了 NAN 的缓冲区，然后将缓冲区复制到`start`. 对缓冲区的大小有什么建议吗？

# java - 带/不带扩展的 Spring MVC URL

> ID：12050540
> 
> 赞同：0
> 
> 时间：2012-08-21T08:00:47.473
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我有一个配置为 URL 的 RESTful 控制器`/dog/walk`。这将返回一个 json。
现在我做了一些改变，`/dog/walk.xml`让我可以输出 xml。
现在问题`/dog/walk`已停止工作。它只与它一起工作`/dog/walk.json`。我希望它可以与两个网址一起使用。
我`ContentNegotiatingViewResolver`在配置中使用。
有没有一种方法可以让网址在没有扩展名的情况下工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:47:50.213

也许这个网站可能会有所帮助。

[http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/](http://www.mkyong.com/spring-mvc/spring-3-mvc-contentnegotiatingviewresolver-example/)

这是一个可能有帮助的代码片段。此代码位于 ContentNegotiatingViewResolver bean 之后/之外。

```
<!-- If no extension matched, use JSON view -->
<bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
     <property name="order" value="2" />
</bean> 
```

# c# - C# Linq 大连接内存不足

> ID：12050544
> 
> 赞同：0
> 
> 时间：2012-08-21T08:01:10.147
> 
> 标签：c#, linq

我有以下加入声明：

```
 var query = from holding in dHoldList
              join client in clientList on
                new { holding.ClientNo }
                equals new { client.ClientNo } into clj
              from cl in clj.DefaultIfEmpty()
              join matter in matterList on 
                new { holding.ClientNo } 
                equals new { matter.ClientNo } into mlj
              from ml in mlj.DefaultIfEmpty()
              join stk in stockList on
                new { holding.Sedol }
                equals new { stk.Sedol } into slj
              from sl in slj.DefaultIfEmpty()
              select
                new GeneralHoldingsReport()
                {
                  ClientNo = holding.ClientNo,
                  Depot = holding.Depot,
                  HoldingSedol = holding.Sedol,
                  Value = holding.ValueOfStock,
                  NoOfUnits = holding.QuantityHeld,
                  ClientName = (cl == null ? null : cl.ClientName),
                  CountryOfResidence = (cl == null ? null : cl.CountryOfResidence),
                  BG = (cl == null ? null : cl.BusinessGetter),
                  ClientStockValue = (ml == null ? 0 : ml.FullValueOfPortfolio),
                  StockName = (sl == null ? null : sl.R1.Trim() + " " + sl.R2.Trim())
                };

  var reportList = query.ToList(); 
```

但是，当它运行时，我收到内存不足异常错误。

我要求 dHoldList 是主表，所有其他表都加入其中（即，如果与 dHoldList 中的每条记录相关的其他表中的数据匹配，则返回数据，如果不只是空白的话。）我相信我正在这样做正确，但显然不是。

这些列表中的每一个都包含大约 300k 行，除了客户端只有 30k，因此这可能会导致这里的一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:09:26.300

1.  您在联接中实例化了许多无用的匿名类型。您可以按如下方式编写它们：

    ```
    join client in clientList on holding.ClientNo equals client.ClientNo into clj 
    ```

    也许这已经解决了你的记忆问题？
    这仅适用于 LINQ to Objects。如果您的查询像 EF 或 LINQ to SQL 一样被转换为 SQL，则不会创建这些匿名类型。

2.  考虑重组查询以使其更具可读性：

    ```
    var query = 
        from holding in dHoldList 
        join client in clientList on holding.ClientNo equals client.ClientNo into clj 
        join matter in matterList on holding.ClientNo equals matter.ClientNo into mlj 
        join stk in stockList on holding.Sedol equals stk.Sedol into slj 

        from cl in clj.DefaultIfEmpty() 
        from ml in mlj.DefaultIfEmpty() 
        from sl in slj.DefaultIfEmpty() 
        select new GeneralHoldingsReport() 
        { 
            ClientNo = holding.ClientNo, 
            Depot = holding.Depot, 
            HoldingSedol = holding.Sedol, 
            Value = holding.ValueOfStock, 
            NoOfUnits = holding.QuantityHeld, 
            ClientName = (cl == null ? null : cl.ClientName), 
            CountryOfResidence = (cl == null ? null : cl.CountryOfResidence), 
            BG = (cl == null ? null : cl.BusinessGetter), 
            ClientStockValue = (ml == null ? 0 : ml.FullValueOfPortfolio), 
            StockName = (sl == null ? null : sl.R1.Trim() + " " + sl.R2.Trim()) 
        }; 
    ```

    这不会对内存占用产生任何影响，但会影响可读性和可维护性。

* * *

如果我要编写代码来实现您的目标，尤其是涉及这么多对象，我不会使用`join`. 我会使用哈希表。这将大大加快。

像这样的东西（未经测试）：

```
var clients = clientList.ToDictionary(x => x.ClientNo);
var matters = matterList.ToDictionary(x => x.ClientNo);
var stocks = stockList.ToDictionary(x => x.Sedol);

var reportList = new List<GeneralHoldingsReport>(dHoldList.Count);
Client client;
Matter matter;
Stock stock;    

foreach(var holding in dHoldList)
{
    if(!clients.TryGetValue(holding.ClientNo, out client))
        client = null;
    if(!matters.TryGetValue(holding.ClientNo, out matter))
        matter = null;
    if(!stocks.TryGetValue(holding.Sedol, out stock))
        stock = null;
    reportList.Add(new GeneralHoldingsReport()     
                   {     
                       ClientNo = holding.ClientNo,     
                       Depot = holding.Depot,     
                       HoldingSedol = holding.Sedol,     
                       Value = holding.ValueOfStock,     
                       NoOfUnits = holding.QuantityHeld,     
                       ClientName = (client == null ? null :
                                     client.ClientName),     
                       CountryOfResidence = (client == null ? null : 
                                             client.CountryOfResidence),     
                       BG = (client == null ? null : 
                             client.BusinessGetter),     
                       ClientStockValue = (matter == null ? 0 : 
                                           matter.FullValueOfPortfolio),     
                       StockName = (stock == null ? null : 
                                    stock.R1.Trim() + " " 
                                    + stock.R2.Trim())     
                   });
} 
```

`ToDictionary`如果每个客户编号有超过一个客户或事项，并且每个 sedol 超过一个股票，则使用将导致崩溃。

# f# - F# 和 xna 字体问题

> ID：12050553
> 
> 赞同：4
> 
> 时间：2012-08-21T08:01:51.097
> 
> 标签：f#, xna

不久前我决定学习 F#，为了让自己更有趣，我想使用 XNA。只有一个问题我似乎无法克服，它与内容管道有关。基本上，要绘制一个字符串，我需要一个字体。要获得字体，我需要内容管道。但由于我使用的是 F#，我似乎根本无法访问内容管道。那么如何绘制文字呢？

注意：为了让 F# 和 XNA 运行，我刚刚在 Visual Studio 中添加了对 XNA 程序集的引用。不知道有没有别的办法，一直没找到。

保重，克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:21:07.667

XNA“**游戏项目**”和“**游戏库项目**”模板的[特殊功能](https://stackoverflow.com/a/11755294/165500)之一是它们能够保存对 XNA“**内容项目**”的“内容引用”。（请注意，您需要安装 XNA Game Studio。）

 ******当您构建游戏 [库] 项目时，它将调用它引用的所有内容项目的构建。内容项目没有被独立编译的原因是它们可以为不同的平台（Xbox、Windows 等）和不同的配置文件（Reach、HiDef）构建——这些选项由引用项目指定（其中有可以很多）。

为非 XNA-Game 项目类型进行内容构建的简单方法是简单地创建一个空的“Windows 游戏库项目”（或您所针对的任何平台）。将您的内容引用添加到该库。然后从您的项目中引用该库。

Visual Studio 足够聪明，可以在复制空 DLL 时将内容复制到项目的输出目录中。

* * *

另一种选择可能是使用`MSBuild.exe`直接编译内容项目。您必须自己指定平台和配置文件，如下所示：

```
/property:XNAContentPipelineTargetPlatform=Windows;XNAContentPipelineTargetProfile=Reach 
```******

# css - 图像精灵实际上比单独的图像更有效吗？

> ID：12050557
> 
> 赞同：16
> 
> 时间：2012-08-21T08:02:06.140
> 
> 标签：css, image, memory, sprite, css-sprites

大约 2 年前，我开始使用图像精灵，因为我看到 Apple 和 Facebook 等网站在他们的网站上使用它们。

毫无疑问，**如果您下载一个 60kb 的图像，而不是三个 20kb 的图像，加载页面会更快**，但是，我最近被告知精灵，虽然加载速度更快，但实际上在客户端消耗更多内存.

在我眼里：

1.  精灵加载速度更快，使用更少的带宽
2.  从开发人员的角度来看，它们更易于维护，因为您的所有图形都在一个地方

然而，在我的同事眼中：

1.  每次在页面上引用精灵时，都会在内存中创建图像，这反过来会降低客户端浏览器的速度
2.  加载速度的差异不足以证明浏览器内存使用量的增加是合理的
3.  互联网旨在以小数据包传输，因此加载较小的图像比加载较大的图像更好

**这让我问一个问题，精灵真的值得使用还是我的同事在找错树？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T08:12:15.080

在一个页面中多次使用图像并不意味着每个使用位置都有一个图像副本。

如果是这样，像[这个演示小提琴](http://jsfiddle.net/6rfKu/)这样的页面将使用大约 7 GB 的内存。它没有。

* * *

加载一张图片总是比加载多张图片要快。在优化站点性能时，减少请求数量很重要。互联网旨在传输小包的事实只会使加载几个小图像的影响比它本来的要小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:33:03.700

它们的值取决于使用上下文。对于我不再费心的设备，为了节省客户端处理开销。

它还可能取决于您使用的图像类型以及是否需要透明度以及什么样的透明度。我阅读了一篇关于移动网络电池寿命如何受到不同类型图像影响的论文（链接到后面！） - 与 JPG 相比，PNG 具有显着的渲染开销。

另一个考虑因素是图像在页面上的用途，以及它们在页面外的用途。我曾经为一个大型网站开发了一个模板，该模板只为页面上的所有精灵使用了一张图片，加载开销也很小。站点徽标非常适合精灵，这很好，直到人们开始在 Facebook 上共享站点并且我们将每个小图标、按钮状态等都显示为链接缩略图选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T08:42:11.040

使用 sprite 会消耗更多内存。考虑您的精灵由 40 帧组成。即使一次只需要显示其中的几个，浏览器仍然需要解码整个精灵并将其保存在内存中。

话虽如此，这实际上取决于上下文。如果您将精灵用于始终可见的按钮图标，则内存使用与拥有多个图像没有什么不同。

# c++ - 如何使用 C++ 初始化 const char 数组数据成员？

> ID：12050559
> 
> 赞同：4
> 
> 时间：2012-08-21T08:02:09.690
> 
> 标签：c++

我有一个与 C++ 类成员初始化有关的问题。以下代码说明了我的问题：

```
class ABCD
{
public:
    ABCD():ObjNum(3){};
    ~ABCD() {};
     static const  unsigned char getByte[8];
     const int ObjNum;

};

const unsigned char ABCD::getByte[8] = {
    'a','b','c','d','e','f','g','h'
};

int main() 
{
     ABCD test;
     cout<<test.getByte[3]<<endl;

     return 0;
} 
```

上面的代码工作得很好，但是现在如果我不将 getByte[8] 设置为静态，我怎么能初始化这个类呢？我尝试过这种方式，但失败了：

```
class ABCD
{
public:
    ABCD():ObjNum(3),getByte('a','b','c','d','e','f','g','h')
    {

    };
    ~ABCD() {};
    const  unsigned char getByte[8];
     const int ObjNum;

};

int main() 
{
     ABCD test;
     cout<<test.getByte[3]<<endl;

     return 0;
} 
```

我得到的错误如下：

```
 error C2536: 'ABCD::ABCD::getByte' : cannot specify explicit initializer for arrays 
```

我了解我收到错误的原因，但我不知道如何解决它。任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:08:40.013

在 C++11 中，您可以像这样初始化它：

```
ABCD() : ObjNum(3), getByte{'a','b','c','d','e','f','g','h'} {} 
```

但是，如果您要使用 C++11，最好[`std::array`](http://en.cppreference.com/w/cpp/container/array)按照其他人在评论中的建议使用。然后，您可以像这样定义数组：

```
const std::array<unsigned char, 8> getByte; 
```

并以这种方式初始化它（注意双括号）：

```
ABCD() : ObjNum(3), getByte{{'a','b','c','d','e','f','g','h'}} {} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:08:42.713

在 C++11 中，您可以像这样初始化数组：

```
ABCD() : getByte { 'a','b','c','d','e','f','g','h' }
{ ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:08:19.700

如果你有一个 C++11 兼容的编译器，你应该可以这样使用：

```
ABCD():ObjNum(3),getByte{'a','b','c','d','e','f','g','h'} 
```

~~但是，如果您的编译器无法处理，您必须在构造函数中手动初始化数组，可以是逐个元​​素地初始化数组，也可以是拥有另一个数组，然后执行 eg `memcpy`。~~

**编辑：**如果您的编译器无法处理 C++11 语法，那么您很不走运。但是，至少从 4.4 版开始，GCC 以及 VC++2010 都可以处理它。因此，除非您有强制要求使用“古老”编译器的要求，否则这应该不是问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T08:15:14.503

最好放弃 C 数组。在 C++ 中，最好使用 std::string。在这种情况下：

```
class A
{
public:
   A() : s("abcdefgh") {}

private:
   std::string s;
} 
```

在 C++11 中，您可以使用 std::array 并使用 std::initializer_list

```
class A
public:
   A() : s{'a','b','c','d','e','f','g','h'} {}

private:
   std::array<8> s;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T08:16:06.003

在 C++03 中，您可以将成员更改为[boost::array](http://www.boost.org/doc/libs/1_51_0/doc/html/array.html)类型，并在构造函数中使用返回的函数对其进行初始化`boost::array<char,8>`。

# iphone - 这是否有效 - 向每个 UITableViewCell 添加手势识别器

> ID：12050564
> 
> 赞同：2
> 
> 时间：2012-08-21T08:02:21.280
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

应用程序向表格视图中的每个单元格添加手势识别器是否有效。细胞可以少至 10 或多至 1000。

我的意思是它会影响滚动行为、内存使用和总体稳定性吗？

并且这些单元格是具有 3 个不同颜色标签的自定义单元格。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:05:58.723

由于`UITableView`重用单元格的性能对于 10 个和 1000 个单元格来说几乎相同（取决于表格的单个页面上适合多少）。表格单元格已经有手势识别器（滑动删除手势），所以你也应该没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:06:27.320

这取决于你怎么做。表格单元的内存管理非常好，这`[tableView dequeueReusableCellWithIdentifier:CellIdentifier];`就是全部内容。因此，如果您确保没有数百个手势识别器，那么就不会有问题。尝试并做到这一点，以便您只有尽可能多的可重复单元格。

# excel - 匹配并将单元格值从一张表替换到另一张表

> ID：12050579
> 
> 赞同：0
> 
> 时间：2012-08-21T08:03:40.763
> 
> 标签：excel

我有两个 excel 表，即 sheet1 sheet2 并且都有超过 10000 行，sheet1 F 有数值。如果这些值的最后三位与 sheet2 A 匹配，则从 sheet2 D 数据中替换该单元格的完整值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:55:34.813

要实际替换单元格值需要 VBA 宏。或者，您可以创建一个新列并使用查找公式来比较最后三位数字并填充 F 列中的原始值或工作表 2 中的替换值。这将成为您的新列 F。您可以使用的三位数字

```
    =对（$F1, 3）
```

这将为您提供 F1 的最后三个字符。使用 IF 语句比较两个值

```
    =IF(右($F1, 3)=Sheet2!$A1, Sheet2!$D1, $F1)
```

这会将 F1 的最后三位数字与 Sheet2 A1 进行比较，如果匹配则返回 Sheet2 D1，否则返回原始 F1。

我假设您正在逐行匹配，因为三个数字会在 10000 行范围内重复。

# mobile - 使用 Windows 时使用 Parse.com 的 Trigger.io - 证书问题

> ID：12050583
> 
> 赞同：1
> 
> 时间：2012-08-21T08:03:53.737
> 
> 标签：mobile, trigger.io, parse-platform

我在使用 PC 生成在 trigger.io 和 parse.com 之间使用的所需证书时遇到了困难。

我可以创建与 trigger.io 一起使用的那个（带有密码），但是 Parse.com 网站要求我上传一个没有密码的证书（p12）。它是哪一个？

我的电脑上有openssl，因此我可以用它来帮助我:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:56:58.693

这两个证书实际上是完全不同的：

Trigger.io 的证书是您的开发人员证书，它可以识别您并允许您使用某些配置文件创建构建。

Parse 的一个是推送通知 SSL 证书，它使您或其他服务能够向您的应用程序发送推送通知。

很高兴听到 Trigger.io 证书对您有用：您看到 Parse 的相关文档了吗？[https://www.parse.com/tutorials/ios-push-notifications](https://www.parse.com/tutorials/ios-push-notifications)

您应该能够使用我们在[文档](http://docs.trigger.io/en/v1.4/tools/ios-windows.html)中描述的方法来创建您的签名请求；对于步骤 8-10，您可以使用 certmgr.msc 导出 .pfx，这实际上与 .p12 相同。

# silverlight - Silverlight Prism MEF 模块配置

> ID：12050584
> 
> 赞同：0
> 
> 时间：2012-08-21T08:03:57.707
> 
> 标签：silverlight, prism, mef

我刚刚开始了解 Prism、MEF 和模块化。

似乎您只能通过代码配置 Silverlight 模块，但是，使用 WPF，您可以通过配置文件或目录进行配置，即无需硬编码提供真正可插入性的值。

真的是这样吗？如果是，为什么？当然，重点是避免重新编译？不使用MEF或Prism也能轻松实现关注点分离？

还是我错过了一些明显的东西？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:28:54.327

您可以定义一个 xaml 文件，例如 modulecatalog.xaml，您可以在其中定义模块...

所以添加/删除模块意味着编辑 xaml 文件。

# c# - 无法在 ASP.Net MVC 3 项目中使用实体框架保存更改

> ID：12050585
> 
> 赞同：5
> 
> 时间：2012-08-21T08:04:09.057
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first, savechanges

学习 asp.net mvc 3 + EF 代码优先。我对两者都很陌生。我的例子是微不足道的，但我仍然无法让它工作。缺少一些简单而明显的东西......

我有一堂课：

```
 public class Product
 {
    [HiddenInput(DisplayValue = false)]
    public int ProductID { get; set; }

    [Required(ErrorMessage = "Please enter a product name")]
    public string Name { get; set; }

    [Required(ErrorMessage = "Please enter a description")]
    [DataType(DataType.MultilineText)]
    public string Description { get; set; }

    [Required]
    [Range(0.01, double.MaxValue, ErrorMessage = "Please enter a positive price")]
    public decimal Price { get; set; }

    [Required(ErrorMessage = "Please specify a category")]
    public string Category { get; set; }
} 
```

和一个`DbContext`：

```
public class EFDbContext : DbContext
{
    public DbSet<Product> Products { get; set; }
} 
```

和一个存储库：

```
public class EFProductRepository : IProductRepository
{
    private EFDbContext context = new EFDbContext();

    public IQueryable<Product> Products
    {
        get
        {
            return context.Products;
        }
    }

    public void SaveProduct(Product product)
    {
        if (product.ProductID == 0)
            context.Products.Add(product);

        context.SaveChanges();
    }
} 
```

mvc 控制器：

```
public class AdminController : Controller
{
    private IProductRepository repository;

    public AdminController(IProductRepository repo)
    {
        repository = repo;
    }

    public ViewResult Index()
    {
        return View(repository.Products);
    }

    public ViewResult Edit(int productId)
    {
        Product product = repository.Products.FirstOrDefault(p => p.ProductID == productId);
        return View(product);
    }

    [HttpPost]
    public ActionResult Edit(Product product)
    {
        if (ModelState.IsValid)
        {
            repository.SaveProduct(product);
            TempData["message"] = string.Format("{0} has been saved", product.Name);
            return RedirectToAction("Index");
        }
        else
        {
            // there is something wrong with the data values
            return View(product);
        }
    }
} 
```

它让我看到产品列表，打开编辑视图，根据属性集验证所有内容......

当我保存经过验证的更改时，它会转到 Http Post`Edit`方法并进行必要的`SaveChanges()`.

它不会抛出任何异常，它会继续并将我重定向到产品列表。

编辑的项目保持不变。

底层数据库（通过`connectionstrings`in连接`web.config`）也保持不变。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T08:13:26.817

您需要附加在 EF 外部创建的实体实例，并让 EF 知道它已被修改。

```
public void SaveProduct(Product product)
{
    if (product.ProductID == 0)
    {
        context.Products.Add(product);
    }
    else
    {
        context.Products.Attach(product);
        context.Entry(product).State = EntityState.Modified;
    }

    context.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:14:14.630

您应该先将实例添加到上下文`Attach`中`Product``SaveChanges`

```
public void SaveProduct(Product product)
{
    if (product.ProductID == 0)
        context.Products.Add(product);
    else
    {    
        context.Products.Attach(product);
        context.Entry(product).State = EntityState.Modified;
    }
    context.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:33:35.663

确实，你应该附上。

假设您调用 Edit(1)。您的控制器将从您的数据库中加载 ID = 1 的 Product 并根据其属性（无论如何您在视图中声明的属性）生成一个 HTML 视图。一旦你离开 Edit(int productId) 方法并且你看到你的视图出现在你的浏览器中，你的 DbContext 已经丢失了具有该 ID 的产品；它已经超出范围。如果您随后对产品进行更改并提交表单，ASP MVC 将根据您的表单字段（以及其他内容）拼凑一个新的产品对象，并将该对象传递给 Edit(Product product) 方法。由于这是一个全新的 Product 对象，并且旧的 Product 对象无论如何都超出了范围，因此您 DbContext 不知道新 Product 与您的 DB 的关系：它是一个新对象，它是一个现有对象吗？如果存在，它有什么变化吗？如果您附加 Product 对象并将其状态设置为已修改，则 DbContext 可以开始检查哪些属性已更改。

# javascript - 键入时调整文本区域的大小

> ID：12050587
> 
> 赞同：0
> 
> 时间：2012-08-21T08:04:18.047
> 
> 标签：javascript, resize, textarea

我正在尝试在键入时调整 textarea 的大小，以使用内部文本的高度来调整 textarea 的高度。我使用以下 javascript 代码执行此操作：

```
function textAreaAdjust(o) 
{
  o.style.height = "1px";
  o.style.height = (o.clientHeight)+"px";  
} 
```

并在我的 textarea 上尝试了 onkeydown 事件：

```
<form:form modelAttribute="article" action="articleeditsubmit">
    <input type="submit" value="Editer" />
    <form:input path="title" /> ¨<br/>
    <form:textarea path="content"  onkeydown = "textAreaAdjust(content)"  style="width:100%;overflow:hidden"  />
    <form:hidden path="id" /><br/>                  
</form:form> 
```

此代码在 Chrome 浏览器上运行良好，但在 Firefox 上，当输入超过屏幕高度的长文本时，浏览器的滚动条出现并强制焦点到页面顶部，然后快速返回到页面末尾。这对用户来说是一个非常糟糕的闪烁效果，我正在寻找修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:07:25.657

为什么要先将高度设置为 1px？Firefox 似乎会跳到屏幕顶部，因为文本框的高度会缩小，然后在您设置正确的高度时会跳回。

# .htaccess - 将非 www 重定向到 .htaccess 中的 www

> ID：12050590
> 
> 赞同：212
> 
> 时间：2012-08-21T08:04:38.873
> 
> 标签：.htaccess

我的 .htaccess 文件中有这个：

```
RewriteCond %{HTTP_HOST} ^example.com$
RewriteRule (.*) http://www.example.com$1 [R=301,L] 
```

但是每当我访问我的根目录上的文件时，`http://example.com/robots.txt`它都会重定向到`http://www.example.comrobots.txt/`.

我该如何纠正这个问题，以便它正确重定向到`http://www.example.com/robots.txt`？

* * *

## 回答 #1

> 赞同：424
> 
> 时间：2012-08-21T08:09:31.820

将您的配置更改为此（添加斜杠）：

```
RewriteCond %{HTTP_HOST} ^example.com$ [NC]
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

或者下面概述的解决方案（由[@absiddiqueLive](//stackoverflow.com/questions/12050590/redirect-non-www-to-www-in-htaccess/22299685#22299685)提出）适用于任何域：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

如果您需要支持 http 和 https 并保留协议选择，请尝试以下操作：

```
RewriteRule ^login\$ https://www.%{HTTP_HOST}/login [R=301,L] 
```

替换`login`为`checkout.php`支持 HTTPS 所需的 URL 或任何 URL。

我认为这是一个坏主意。有关推理，[请阅读此答案](https://stackoverflow.com/questions/9105510/force-https-for-specific-url/9105894#9105894)。

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2014-11-28T08:21:08.990

这是支持 https 和 http 的正确解决方案：

```
# Redirect to www
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

UPD.：对于类似的域`.co.uk`，替换

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$ 
```

和

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+\.[^.]+$ 
```

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2014-03-10T12:08:41.370

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !^www\.

RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

***对于 Https***

```
RewriteCond %{HTTPS}s ^on(s)|

RewriteRule ^(.*)$ http%1://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-04-23T07:26:35.653

以下示例适用于**ssl**和**非 ssl**，并且速度更快，因为您只使用一个规则来管理 http 和 https

```
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\.
RewriteCond %{HTTPS}s on(s)|offs()
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [NE,L,R] 
```

[测试]

这将重定向

**http**

*   [http://example.com](http://example.com)

到

*   [http://www.example.com](http://www.example.com)

**https**

*   [https://example.com](https://example.com)

到

*   [https://www.example.com](https://www.example.com)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-10-22T08:34:02.813

试试这个，我在很多网站上都用过，效果很好

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^bewebdeveloper.com$
RewriteRule ^(.*) http://www.bewebdeveloper.com/$1  [QSA,L,R=301] 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-05-11T12:57:55.143

我已经测试了上述所有解决方案，但对我不起作用，我试图删除 http:// 并且不会重定向也删除了它重定向好的 www，所以我很困惑，特别是我在 https 下运行我的所有网站://

因此，我将一些代码组合在一起，并为 http:// 和 https:// 以及 www 和非 www 提出了完美的解决方案。

```
# HTTPS forced
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]
# Redirect to www
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]
</IfModule> 
```

希望这可以帮助某人:)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-28T11:16:13.633

在 .htaccess 文件中添加以下代码。

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

URL 重定向教程可以从这里找到 - [Redirect non-www to www & HTTP to HTTPS using .htaccess file](http://www.codexworld.com/redirect-non-www-to-www-http-to-https-using-htaccess-file/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-02-23T00:19:05.573

此配置在配置 SSL 的 bitnami wordpress 中为我工作：

在文件 /opt/bitnami/apps/wordpress/conf/httpd-app.conf 的“RewriteEngine On”下添加以下内容

```
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ http%{ENV:protossl}://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
RewriteBase /
RewriteCond %{HTTPS} !on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-01-19T19:35:51.577

```
RewriteCond %{HTTP_HOST} !^www\.domain\.com [NC]
RewriteRule (.*) http://www.domain.com/$1 [L,R=301] 
```

这将重定向您未以 WWW 开头的域它不会重定向您的所有子域。

它是有益的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-02-10T09:03:20.143

我相信最佳答案成功地将非 www 重定向到 www （例如：**mysite.com -> www.mysite.com**），但没有考虑通配符子域，这会导致：

```
random.mysite.com -> www.random.mysite.com 
```

这是一个有/没有HTTPS的解决方案

**HTTP**

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !www.mysite.com$ [NC]
RewriteRule ^(.*)$ http%{ENV:protossl}://www.mysite.com/$1 [L,R=301] 
```

**HTTP/HTTPS**

```
RewriteEngine On

RewriteCond %{HTTPS} =on
RewriteRule ^(.*)$ - [env=protocol:https]

RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ - [env=protocol:http]

RewriteCond %{HTTP_HOST} !www.mysite.com$ [NC]
RewriteRule ^(.*)$ %{ENV:protocol}://www.mysite.com/$1 [L,R=301] 
```

*注意：我没有测试过 https，因为我目前没有要测试的证书，但是如果有人可以验证或优化我所拥有的，那就太棒了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-13T01:38:27.960

# 两个警告

避免使用 301，而更喜欢现代的 303 或 307 响应状态代码。

## 避免 301

如果您真的需要永久重定向，请仔细考虑，`[R=301]`因为如果您决定稍后更改它，那么页面的先前访问者将继续看到原始重定向的页面。

永久重定向信息经常存储在浏览器的缓存中，一般很难消除（重新加载页面并不能解决问题）。您的网站访问者将“永远”停留在先前的重定向中。

## 也避免 302

新版本的 HTTP 协议（​​v1.1）增加了两个新的响应状态码，可以代替 302 使用。

*   `303`URL 重定向但要求将请求类型更改为 GET。
*   `307`URL 重定向，但要求保持最初发送的请求类型。

您仍然可以使用代码`302`（非永久重定向），尽管它被认为是模棱两可的。无论如何，大多数浏览器`302`都以新`303`代码所指示的方式实现。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-20T23:05:49.203

如果可能，将其添加到主 Apache 配置文件中。它是一种重量更轻的解决方案，所需的处理更少。

```
<VirtualHost 64.65.66.67>
        ServerName example.com
        Redirect permanent / http://www.example.com/
</VirtualHost>
<VirtualHost 64.65.66.67>
   ServerAdmin me@example.com
   ServerName www.example.com
   DocumentRoot /var/www/example
   .
   .
   . etc 
```

因此，`VirtualHost`“example.com”的单独捕获这些请求，然后将它们永久重定向到您的 main `VirtualHost`。因此，每个请求都没有 REGEX 解析，并且您的客户端浏览器将缓存重定向，因此它们永远不会（或很少）再次请求“错误”的 url，从而为您节省服务器负载。

请注意，. 中的尾部斜杠`Redirect permanent / http://www.example.com/`。没有它，重定向 from`example.com/asdf`将重定向到`http://www.example.comasdf`而不是`http://www.example.com/asdf`.

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2014-07-03T01:55:37.977

写入 .htaccess :)

```
## Redirect from non-www to www (remove the two lines below to enable)
    RewriteCond %{HTTP_HOST} !^www\. [NC]
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# c# - 如何从 ascx 页面中提取 img 标签 src？

> ID：12050591
> 
> 赞同：-3
> 
> 时间：2012-08-21T08:04:41.760
> 
> 标签：c#, asp.net, dotnetnuke

我想要`img` `src`页面加载（ascx）页面上的值。如何在 ASP.NET C# 中执行此操作。考虑页面上有 5 个图像 (ascx)。我想通过在 btnclick 事件上接收将所有 5 个图像的 URL 保存到数据库中。我怎样才能做到这一点？

代码：

```
var web = new HtmlWeb(); 
var doc = web.Load("stackoverflow.com";); 
var nodes = doc.DocumentNode.SelectNodes("//img[@src]"); 

foreach (var node in nodes) { 
    Console.WriteLine(node.src); 
} 
```

上面的代码是获取img src。但是如何在 c# .net 中使用 htmlweb() 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:46:18.647

您可以使用以下代码获取所有可用的图片网址：

```
var imageList = new List<Image>();
foreach (var control in this.Controls)
{
   if (control is Image)
   {
     imageList.Add((Image)control);
   }
}
foreach (Image img in imageList)
  //Can store all available image url 
```

谢谢
Sibabrata
[Mindfire 解决方案](http://www.mindfiresolutions.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:14:43.687

您可以尝试使用此代码

```
void Btn_Click(Object sender, EventArgs e)
{
  //Get your path
  string  path = yourImageButtonId.ImageUrl;
  //Save on your database
  //Here you find article about insert : 
  //http://www.java2s.com/Code/VB/Database-ADO.net/InsertdatausingSqlCommand.htm
} 
```

# java - FileInputstream + NullPointerException，而 File 存在且可读

> ID：12050592
> 
> 赞同：0
> 
> 时间：2012-08-21T08:04:50.940
> 
> 标签：java, android, nullpointerexception, inputstream

可能是一个简单的问题，有一个单句解决方案^^：.load() 如何给我一个 NullPointerException？

```
 File ksFile=new File(kspath);
    Log.d("kspath", kspath);
    FileInputStream is=null;
    is = new FileInputStream(ksFile/*kspath*/);
    if(is==null)
        Log.d("debug", "Oh no!");

    if(ksFile.isFile())
        Log.d("debug", "ok");
    if(ksFile.canRead())
        Log.d("debug", "ok");

    if("".toCharArray()==null)
        Log.d("debug", "Oh no!");

    keyStore.load(is, kspw.toCharArray()); 
```

如您所见，添加了荒谬的检查，我得到 2 个“ok”和没有“oh no！”的问题是 Inputstream，但为什么^^？如果我尝试从 Stream 中 `while((is.read(byte[] somevar))!=-1)`读取它实际上会读取。

编辑：

我是个白痴，忘了加上keyStore.getinstance()，没关系，我累了，感谢gkuzmin^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T11:50:22.083

以这种方式尝试：

```
 keyStore = keyStore.getinstance();

    if((keyStore != null) && (kspath != null)) {
       File ksFile = new File(kspath);

       FileInputStream is = new FileInputStream(ksFile);

       keyStore.load(is, kspw.toCharArray());
    } 
```

但是如果没有变量的对象定义`keystore`，很难理解 keystore 是 null 还是其他变量。

随时通知我们。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-21T08:10:19.433

嘿，您必须将文件路径指定为 FileInputStream 的参数而不是文件名，所以它应该是这样的

```
 is = new FileInputStream(ksFile.getPath()); 
```

# android - Android 通过什么在 facebook 上分享？

> ID：12050593
> 
> 赞同：2
> 
> 时间：2012-08-21T08:05:02.397
> 
> 标签：android

我已经成功构建了我的 android 应用程序以支持在 facebook 上共享。问题是当有人分享某些东西时，Facebook 会自动为我添加一个链接，上面写着通过“我的应用名称”共享。如果我点击它，Facebook 上会出现错误 *注意此链接通常在 facebook 上，并显示通过手机共享或通过 android 共享

错误代码 - 未找到您请求的页面。您可能单击了过期的链接或输入了错误的地址。一些网址区分大小写。

如何修复此链接或在哪里设置？*我认为这可能是在 facebook 上的设置中设置的，但我不确定

我分享评论的代码

```
 facebook.dialog(this, "feed", new DialogListener() {

        @Override
        public void onFacebookError(FacebookError e) {
        }

        @Override
        public void onError(DialogError e) {
        }

        @Override
        public void onComplete(Bundle values) {
        }

        @Override
        public void onCancel() {
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:16:44.303

如果你使用的是 facebook android API，你应该这样做

```
 private Facebook mFacebook; 
       private String mMessageToPost; 
        ...  
       function postToWall(urMessageAndLink)
       {
          Bundle parameters = new Bundle();
          parameters.putString("message", urMessageAndLink);
          parameters.putString("description", theTopic);
          facebook.request("xx");
          String response = mFacebook.request("xx/feed", parameters, "POST");
       }

      facebook.dialog(this, "feed", new DialogListener() {
            public void onComplete(Bundle values) {
                if (mMessageToPost != null) {
                    postToWall(mMessageToPost);
                }
            }

            public void onFacebookError(FacebookError error) {
                showToast("Error!!");
                finish();
            }

            public void onError(DialogError error) {
                showToast("Error!!");
                finish();
            }

            public void onCancel() {
                showToast("Facebook sharing cancelled!");
                finish();
            }
} 
```

您还可以使用 android share API（但这需要用户拥有 facebook 应用程序，share API 会打开一个对话框来选择任何支持共享的现有应用程序）

```
 Intent i = new Intent(Intent.ACTION_SEND);
            i.setType("text/plain");
            String textMsg = "http://the.link.you.want.to.send";
            i.putExtra(Intent.EXTRA_TEXT, textMsg);
            startActivity(Intent.createChooser(i, aTitle)); 
```

# screen-scraping - Web数据抓取查询

> ID：12050596
> 
> 赞同：1
> 
> 时间：2012-08-21T08:05:23.540
> 
> 标签：screen-scraping, web-scraping

我正在尝试从[http://www.nationwide.com/locator/home/index.x?lineOfBusiness=insurance_agent&locatorhome=fromhome&language=](http://www.nationwide.com/locator/home/index.x?lineOfBusiness=insurance_agent&locatorhome=fromhome&language=)那里列出的每个州获取所有数据。基本上是姓名，地址，电子邮件等。

我的问题是：

1.  没有 URL 参数可供我从下拉列表中遍历状态。

我愿意手动遍历状态，但是有什么方法可以只在一个 div 上选择并从所有类似的 DIV 复制内容/文本。我的意思是你可以看到那里有一个标签，里面有完整的内容。如何从标签内所有出现的文本中提取文本？

我对任何脚本语言、Php、perl python 甚至一个简单的 firefox 插件都不特别...我只需要结果。请问有什么指导吗？

* * *

我尝试使用网络收获

```
<?xml version="1.0" encoding="UTF-8"?>

<config charset="ISO-8859-1">
     <!-- sends post request with state name -->
     <http>
        <http method="post" url="http://www.nationwide.com/locator/home/index.x?lineOfBusiness=insurance_agent&locatorhome=fromhome&language=">
        <http-param name="state">AL</http-param>
        <http-param name="searchType">proximity_search</http-param>
        <http-param name="requestSource">home_NI</http-param>
        <http-param name="businessType">NI</http-param>
        <http-param name="language">en</http-param>
        <http-param name="UserAddressCookieAction">createUserAddressCookie</http-param>
    </http>
      <!-- collects content inside address tag -->

</config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:14:02.930

我无法加载您的页面，但我仍然可以提供帮助。你可以使用一个很棒的软件：

[http://jsoup.org/](http://jsoup.org/)

用于自动抓取此数据。但是，您必须编写一个小型 Java 程序。要获得 css 选择器（这就是您可以抓取的基础），您可以在 firefox 中使用 Firebug 插件。

如果你不想写 Java 代码，你可以使用另一个很棒的工具：

[http://web-harvest.sourceforge.net/](http://web-harvest.sourceforge.net/)

在他们的页面上，您可以看到很多示例，甚至使用 post 方法。

如果您需要更多帮助，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:57:30.440

您可以使用 irobotsoft 刮刀。在此处查看演示：

[http://irobotsoft.com/help/](http://irobotsoft.com/help/)

要遍历下拉列表，您可以关注此线程：

[http://irobotsoft.org/bb/YaBB.pl?num=1248753202](http://irobotsoft.org/bb/YaBB.pl?num=1248753202)

# javascript - 在 JavaScript 上使用多维数组时出现 TypeError

> ID：12050597
> 
> 赞同：1
> 
> 时间：2012-08-21T08:05:27.933
> 
> 标签：javascript, jquery, firefox

我在 firefox 错误调试器上收到此错误：

> 错误：TypeError：slidesArray[index] 未定义源文件：[http ://mydomain.com/hatem/scripts/slider.js](http://mydomain.com/hatem/scripts/slider.js)

如您所见，代码是基于 jQuery 构建的：

```
 jQuery.each
    (
        slidesArray,function(index,value)
        {
            $("#slider").show();

            var linkHref = slidesArray[index][1];
            var imageSource = slidesArray[index][0];
            alert(imageSource)
            $("#slider").html
            (
                "<a href='" + linkHref + "'><img src='"+ imageSource + "'></a>"
            ).hide().fadeIn(5000);

            $("#slider").hide();
        }
    ); 
```

注意：我检查的数组 slidesArray 存在多个元素。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:09:56.983

检查阵列`slidesArray`。试试这个找出未定义的索引

```
jQuery(slidesArray).each(function(index, value) {
    if (value && value.length) {
        $("#slider").show();

        var linkHref = value[1];
        var imageSource = value[0];
        alert(imageSource)
        $("#slider").html("<a href='" + linkHref + "'><img src='" + imageSource + "'></a>").hide().fadeIn(5000);

        $("#slider").hide();
    } else {
        alert("slidesArray[" + index + "] is invalid");
    }
}); 
```

# mono - Mono 2.11.4 的 TypeLoadException（Mono 2.10.8.1 工作正常）

> ID：12050604
> 
> 赞同：0
> 
> 时间：2012-08-21T08:05:52.707
> 
> 标签：mono, ubuntu-12.04, typeloadexception

我编译[了一个 Mono 项目](https://github.com/hbons/SparkleShare)，它在最新版本的 Mono 上崩溃。

SparkleShare 在 Mono 2.10.8.1 上运行良好（最新 Ubuntu 上的默认设置）：

```
$ /usr/bin/mono --version | grep version
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2)
$ /usr/bin/mono bin/SparkleShare.exe
16:16:11 | Auth | Imported key [...] 
```

但不是在 Mono 2.11.4 上（从最新的 Git[构建）：](http://www.mono-project.com/Compiling_Mono_From_Git)

```
$ /usr/local/bin/mono --version | grep version
Mono JIT compiler version 2.11.4 (master/31e9b80 Tue Aug 21 15:21:41 JST 2012)
$ /usr/local/bin/mono bin/SparkleShare.exe
Unhandled Exception:
System.TypeLoadException: Could not load type 'SparkleShare.SparkleUI' from assembly 'SparkleShare, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null'.
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: Could not load type 'SparkleShare.SparkleUI' from assembly 'SparkleShare, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null'. 
```

这`TypeLoadException`对任何人来说都很熟悉吗？
关于如何解决它的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:13:55.053

如果它适用于 Mono 2.10.8.1 而不是 Mono 2.11.4，那么它显然是一个错误，实际上是一个回归。

您应该将其归档在[http://bugzilla.xamarin.com/](http://bugzilla.xamarin.com/)

Mono 2.11.x 系列仍然是预览（不稳定）版本，在下一个 2.12.x 稳定系列之前（惯例是对不稳定版本使用奇数）。

# c# - sharepoint webpart 属性在一天后消失（C#）

> ID：12050619
> 
> 赞同：3
> 
> 时间：2012-08-21T08:07:01.213
> 
> 标签：c#, sharepoint, properties, textbox, web-parts

我开发了一个带有一些文本框的 webpart 属性的自定义 webpart，它可以部分工作。

如果我部署项目，属性中的书面文本就没有了。还行吧。

但我的主要问题是，大约一天后，属性中的文本消失了。我使用 SharePoint 2010。

这是我的代码：

```
[WebBrowsable(true), Category("category"), Personalizable(PersonalizationScope.Shared), WebDisplayName("Hello"), WebDescription("Description1")]
    public string hello
    {
        get { return _hello; }
        set { _hello = value; }
    }
    public static string _hello; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T11:56:18.187

您不应该对 _hello 字符串使用静态声明符。此值与实例无关（因此是静态的），并且在应用程序池回收时（每天发生一次）将失去其值。删除静态并使用速记，你应该没问题：

```
[WebBrowsable(true),
 Category("category"),
 Personalizable(PersonalizationScope.Shared),
 WebDisplayName("Hello"),
 WebDescription("Description1"),
WebPartStorage(Storage.Shared)] 
public string Hello{ get; set;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:24:04.783

我解决了。

我在 VisualWebPart1.cs 中有 SharePoint-WebPart-Property 定义，并在 VisualWebPart1UserControl.ascx.cs 中构建了我的“主要”WebPart。

所以主要问题是 UserControl 和 VisualWebPart1.cs 之间的连接。这是 VisualWebPart1.cs 中“连接”的代码：

```
 protected override void CreateChildControls()
    {
        VisualWebPart1UserControl control = (VisualWebPart1UserControl)Page.LoadControl(_ascxPath);
        control.WebPart = this;
        Controls.Add(control);
    } 
```

然后是没有静态的属性：

```
public string _hello;
[WebBrowsable(true), Category("category"), Personalizable(PersonalizationScope.Shared), WebDisplayName("Hello"), WebDescription("Description1")]
public string hello
{
    get { return _hello; }
    set { _hello = value; }
} 
```

我所做的下一步是访问 UserControl.ascx.cs 并定义一个 getter 和 setter 以将 UserControl.ascx.cs 与 VisualWebPart1.cs 连接起来：

```
public VisualWebPart1 WebPart { get; set; } 
```

然后你可以初始化变量`WebPart.hello`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T10:17:51.227

在我开发的所有 webpart 中，我也使用了`WebPartStorage`属性。我的猜测是，如果您不使用它，则该属性仅存储在内存中。因此，在 IISRESET/应用程序池回收后，您的属性值将丢失。

因此，您可以将代码更改为：

```
 [WebBrowsable(true), 
  Category("category"), 
  Personalizable(PersonalizationScope.Shared), 
  WebDisplayName("Hello"), 
  WebDescription("Description1"),
  WebPartStorage(Storage.Shared)] 
  public string hello 
  { 
      get { return _hello; } 
      set { _hello = value; } 
  } 
  public static string _hello; 
```

# opengl - 如何计算法线矩阵？

> ID：12050620
> 
> 赞同：2
> 
> 时间：2012-08-21T08:07:18.690
> 
> 标签：opengl, matrix, webgl

我有经典的简单照明示例：

```
precision mediump float;
varying vec3 lighting;
attribute vec3 vertex;
attribute vec3 normal;
uniform mat4 mvMatrix, pMatrix, nMatrix;
void main() {
    gl_Position = pMatrix * mvMatrix * vec4(vertex,1.0);
    vec3 ambientLight = vec3(0.6,0.6,0.6);
    vec3 lightColour = vec3(0.5,0.5,0.75);
    vec3 lightDir = vec3(0.85,0.8,0.75);
    vec3 transformed = (nMatrix * vec4(normal,1.0)).xyz;
    float directional = max(dot(transformed,lightDir),0.0);
    lighting = ambientLight + (lightColour*directional);
}

precision mediump float;
varying vec3 lighting;
void main() {
    gl_FragColor = vec4(lighting,1.0);
} 
```

此代码来自[Mozilla webGL 示例](https://developer.mozilla.org/en-US/docs/WebGL/Lighting_in_WebGL)。

我的法线看起来是正确的（如果我画的是原始法线而不是计算出来的颜色，我会得到一个漂亮的彩虹）。但是，我计算的光对于所有点都是相同的颜色。

我认为这是我的法线矩阵是错误的。我是这样计算的：

```
pMatrix = createPerspective(60.0,canvas.offsetWidth/canvas.offsetHeight,0.1,4),
mvMatrix = createLookAt([2,2,2],[0,0,0],[0,1,0]),
nMatrix = mat4_inverse(mvMatrix); 
```

作为 webGL，我不得不制作自己的小矩阵助手（OpenGL 使用转置矩阵）：

```
function createPerspective(fovy,aspect,near,far) {
        var top = near*Math.tan(fovy*Math.PI/360.0);
        var right = top*aspect, left = -right, bottom = -top;
        var rl = (right-left);
        var tb = (top-bottom);
        var fn = (far-near);
        return [(near*2)/rl,    0,  0,  0,
            0,  (near*2)/tb,    0,  0,
            (right+left)/rl,    (top+bottom)/tb, -(far+near)/fn,    -1,
            0,  0,  -(far*near*2)/fn,   0];
}

function createLookAt(eye,centre,up) {
        if (eye[0] == centre[0] && eye[1] == centre[1] && eye[2] == centre[2])
                return [1, 0, 0, 0,
                    0, 1, 0, 0,
                    0, 0, 1, 0,
                    0, 0, 0, 1];
        var z0,z1,z2,x0,x1,x2,y0,y1,y2,len; 
        //vec3.direction(eye, center, z);
        z0 = eye[0] - centre[0];
        z1 = eye[1] - centre[1];
        z2 = eye[2] - centre[2];
        // normalize (no check needed for 0 because of early return)
        len = 1/Math.sqrt(z0*z0 + z1*z1 + z2*z2);
        z0 *= len;
        z1 *= len;
        z2 *= len;
        //vec3.normalize(vec3.cross(up, z, x));
        x0 = up[1]*z2 - up[2]*z1;
        x1 = up[2]*z0 - up[0]*z2;
        x2 = up[0]*z1 - up[1]*z0;
        len = Math.sqrt(x0*x0 + x1*x1 + x2*x2);
        if(len) len = 1/len; else len = 0;
    x0 *= len;
    x1 *= len;
    x2 *= len;
        //vec3.normalize(vec3.cross(z, x, y));
        y0 = z1*x2 - z2*x1;
        y1 = z2*x0 - z0*x2;
        y2 = z0*x1 - z1*x0;
        len = Math.sqrt(y0*y0 + y1*y1 + y2*y2);
        if(len) len = 1/len; else len = 0;
    y0 *= len;
    y1 *= len;
    y2 *= len;
        return [x0, y0, z0, 0,
            x1, y1, z1, 0,
            x2, y2, z2, 0,
            -(x0*eye[0] + x1*eye[1] + x2*eye[2]), -(y0*eye[0] + y1*eye[1] + y2*eye[2]), -(z0*eye[0] + z1*eye[1] + z2*eye[2]), 1];
}

function mat4_inverse(mat) {
        var a00 = mat[0], a01 = mat[1], a02 = mat[2], a03 = mat[3];
        var a10 = mat[4], a11 = mat[5], a12 = mat[6], a13 = mat[7];
        var a20 = mat[8], a21 = mat[9], a22 = mat[10], a23 = mat[11];
        var a30 = mat[12], a31 = mat[13], a32 = mat[14], a33 = mat[15];
        var b00 = a00*a11 - a01*a10;
        var b01 = a00*a12 - a02*a10;
        var b02 = a00*a13 - a03*a10;
        var b03 = a01*a12 - a02*a11;
        var b04 = a01*a13 - a03*a11;
        var b05 = a02*a13 - a03*a12;
        var b06 = a20*a31 - a21*a30;
        var b07 = a20*a32 - a22*a30;
        var b08 = a20*a33 - a23*a30;
        var b09 = a21*a32 - a22*a31;
        var b10 = a21*a33 - a23*a31;
        var b11 = a22*a33 - a23*a32;
        var invDet = 1/(b00*b11 - b01*b10 + b02*b09 + b03*b08 - b04*b07 + b05*b06);
        return [
        (a11*b11 - a12*b10 + a13*b09)*invDet,
        (-a01*b11 + a02*b10 - a03*b09)*invDet,
        (a31*b05 - a32*b04 + a33*b03)*invDet,
        (-a21*b05 + a22*b04 - a23*b03)*invDet,
        (-a10*b11 + a12*b08 - a13*b07)*invDet,
        (a00*b11 - a02*b08 + a03*b07)*invDet,
        (-a30*b05 + a32*b02 - a33*b01)*invDet,
        (a20*b05 - a22*b02 + a23*b01)*invDet,
        (a10*b10 - a11*b08 + a13*b06)*invDet,
        (-a00*b10 + a01*b08 - a03*b06)*invDet,
        (a30*b04 - a31*b02 + a33*b00)*invDet,
        (-a20*b04 + a21*b02 - a23*b00)*invDet,
        (-a10*b09 + a11*b07 - a12*b06)*invDet,
        (a00*b09 - a01*b07 + a02*b06)*invDet,
        (-a30*b03 + a31*b01 - a32*b00)*invDet,
        (a20*b03 - a21*b01 + a22*b00)*invDet];
} 
```

我相信这些矩阵函数是正确的——因为我以前没有遇到过它们的问题。

因此，我对`gluLookAt`矩阵不是正交的以及弄乱了法线矩阵有一个挥之不去的记忆，但我在谷歌上找不到任何关于这一点的东西，或者发现我犯了哪些基本错误或错误。

您如何计算和应用适当的法线矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:18:40.827

法线矩阵应该是模型视图矩阵的转置的逆矩阵，即

```
nMatrix = mat4_inverse(mat4_transpose(mvMatrix)); 
```

# javascript - 动画队列

> ID：12050623
> 
> 赞同：0
> 
> 时间：2012-08-21T08:07:29.597
> 
> 标签：javascript, jquery, html, animation

我希望这是我所缺少的简单而小的东西，但是目前，这段代码我已经将动画一次应用于所有三个 div，因为我需要一个动画，然后一旦完成应用第二个动画，然后在完成后应用第三个。

这是我所拥有的：

```
container.live('mouseenter',function(){ 
    $('.pop1').animate({ marginTop: '0px'}, 'slow').next().animate({marginTop: '0px'}, 'slow').animate({marginTop: '0px'}, 'slow');
}); 
```

有人请帮忙！:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:15:15.710

```
container.live('mouseenter',function() {
    var slideUp = function (el) {
      if (el.length) {
        el.animate({ marginTop: '0px' }, 'slow', function () { 
          slideUp(el.next()); 
        });
      }
    };

    slideUp($('.pop1'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:13:07.093

```
container.live('mouseenter',function(){ 
    $('.pop1').animate({ marginTop: '0px'}, 'slow', function() {
        $(this).next().animate({marginTop: '0px'}, 'slow', function() {
             $(this).next().animate({marginTop: '0px'}, 'slow')
        })
    });
}); 
```

# java - Java 泛型传递 .class 参考

> ID：12050626
> 
> 赞同：8
> 
> 时间：2012-08-21T08:07:36.160
> 
> 标签：java, generics

我需要调用一个超级构造函数，它需要我传递`.class`泛型类型的引用。我怎样才能用Java实现这一点？

构造函数想要..

```
Class<List<MyType>> 
```

由于泛型在运行时被删除，我不知道如何满足构造函数。

```
List<MyType>.class // does not work ;-) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T08:08:22.850

像这样（`Class`首先转换为原始类型）：

```
@SuppressWarnings({ "unchecked", "rawtypes" })
Class<List<MyType>> clazz = (Class) List.class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:13:39.137

你不能调用构造函数 for `List<MyType>`，事实上你不能调用构造函数 for`List`作为它的接口。您可以做的是调用构造函数`ArrayList.class`并传递您期望的元素的类型。

```
public C createCollection(Class<? extends Collection> collectionClass, Class elementClass, int number) {
    Collecton c = (Collection) collectionClass.newInstance();
    for(int i=0;i<number;i++)
       c.add(elementClass.newInstance());
    return (C) c;
}

List<MyType> list = createCollection(ArrayList.class, MyType.class, 100); 
```

# c# - 如何在 C# 中查看预览 zip 文件列表

> ID：12050627
> 
> 赞同：-1
> 
> 时间：2012-08-21T08:07:43.113
> 
> 标签：c#, asp.net, .net-4.0

所以.我做了一个系统来检查“PCB”文件，我在.zip文件中有六个文件，我想将.zip文件上传到我的服务，如何确保这六个文件是我想要的~？我想在上传 zip 文件之前获取文件列表...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:13:41.530

我建议使用[dotNetZip](http://dotnetzip.codeplex.com/)库，它是开源的并且非常易于使用，下面是使用 ASP.NET FileUpload 控件上传的 zip 文件中列出文件的示例：

```
 if (FileUpload1.HasFile)
  {
    using (ZipFile zip = ZipFile.Read(FileUpload1.FileContent))
    {
      foreach (ZipEntry entry in zip)
      {
        if (entry.IsDirectory)
          Response.Write("Directory: ");
        else
          Response.Write("File : ");
        Response.Write(entry.FileName + "<br /><br />");
      }
    }
  } 
```

# r - R plyr 应用于行

> ID：12050629
> 
> 赞同：2
> 
> 时间：2012-08-21T08:07:48.327
> 
> 标签：r, plyr, data.table

我有一个这样的数据框：

```
 mat.in=data.frame(site=c('A','A','A','B','B','B'),
    var=c('product.A','product.B','energy','product.A','product.B','energy'),
    year.2011=c(12,10,40,14,12,60),year.2012=c(13,11,45,25,13,65)) 
```

对于每个“站点”，我想除以“能量”[numcol wise]，所以我会得到：

```
 mat.out=data.frame(site=c('A','A','A','B','B','B'),
    var=c('product.A','product.B','energy','product.A','product.B','energy'),
    year.2011=c(12,10,40,14,12,60),year.2012=c(13,11,45,25,13,65),
    quot.2011=c(0.30,0.25,1.00,0.23,0.20,1.00),quot.2012=c(0.29,0.24,1.00,0.38,0.20,1.00)) 
```

这将非常适合来自包 plyr 的 ddply 以及该包的 numcolwise 。但不知何故，我做错了——问题是要挑出“能量”成分。

有谁知道如何解决这个问题？[提前致谢...]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:20:00.900

来自@seancarmody 的酷回答。

这是使用基本函数的另一种方法：

```
# Select and join frames
mat.out<-merge(mat.in[grep("product", mat.in$var),], mat2 <- mat.in[mat.in$var=="energy",], "site")
# Calculate the quot values
mat.out$quot.2011=mat.out$year.2011.x/mat.out$year.2011.y
mat.out$quot.2012=mat.out$year.2012.x/mat.out$year.2012.y

# And if needs be you can remove the energy columns
mat.out[,-c(5,6,7)] 
```

这是一种使用方法`sqldf`：

```
variable<-'p.site,p.var,p.year_2011,p.year_2012,
           p.year_2011/e.year_2011 AS quot_2011,
           p.year_2012/e.year_2012 AS quot_2012'
tables<- '(SELECT *
           FROM    `mat.in`
           WHERE   var LIKE \"product%\"
           )
           AS p,
           (SELECT *
           FROM    `mat.in`
           WHERE   var LIKE \"energy\"
           )
           AS e'

fn$sqldf("SELECT $variable FROM $tables WHERE  p.site=e.site") 
```

这是一种使用方法`data.table`：

```
dt <- data.table(mat.in, key="site")
# Join
mat.out <- dt[var %like% "product"][dt[var=="energy"]]
# Calculate
mat.out <- mat.out[,quot.2011:=year.2011/year.2011.1]
mat.out <- mat.out[,quot.2012:=year.2012/year.2012.1] 
```

* * *

从马修编辑：

`data.table`在此基础上，使用*加入继承范围*的稍微更高级（更快）的方式：

```
dt <- data.table(mat.in, key="site")
dt[dt[var=="energy"],quot.2011:=year.2011/i.year.2011]
dt[dt[var=="energy"],quot.2012:=year.2012/i.year.2012] 
```

请注意`i.`前缀告诉它从而`i`不是`x`. 类似于 SQL 表名前缀。这避免了`merge`大步；FAQ 1.12 中描述的技术。

当multiple `:=`in`j`被实现时，它会变成：

```
dt <- data.table(mat.in, key="site")
dt[dt[var=="energy"], { quot.2011:=year.2011/i.year.2011
                        quot.2012:=year.2012/i.year.2012 } ] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T08:57:50.010

这将在您的示例中完成工作：

```
library(plyr)
ddply(mat.in, .(site), transform, quote.2011 = year.2011/year.2011[var=="energy"],      
      quote.2012 = year.2012/year.2012[var=="energy"]) 
```

为了更普遍地做到这一点，我首先`melt`将数据转换为一个值而不是列名。

这是它如何与`melt`

```
library(reshape2)
mat.m <- melt(mat.in, id.vars=1:2, variable.name="year")
mat.m$year <- sub("year.", "", mat.m$year)
mat.out <- ddply(mat.m, .(site, year), transform, quote = value/value[var=="energy"]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:05:04.347

仅使用基本功能：

```
mat.r <- reshape(mat.in, direction="long", varying=3:4)
 # Could not figure out how to get the divisor "lined up" unless db-normalized
matd <- as.data.frame(lapply( split(mat.r, list(mat.r[,1], mat.r[,3]) ), 
                              FUN=function(x) x$year/x$year[x$var=="energy"]) )

#----------------
matd
  A.2011    B.2011    A.2012    B.2012
1   0.30 0.2333333 0.2888889 0.3846154
2   0.25 0.2000000 0.2444444 0.2000000
3   1.00 1.0000000 1.0000000 1.0000000

 reshape(matd, direction="long", varying=list(1:2, 3:4))[2:3]
       A.2011    A.2012
1.1 0.3000000 0.2888889
2.1 0.2500000 0.2444444
3.1 1.0000000 1.0000000
1.2 0.2333333 0.3846154
2.2 0.2000000 0.2000000
3.2 1.0000000 1.0000000

 mat.out <- cbind(mat.in, reshape(matd, direction="long", varying=list(1:2, 3:4))[2:3])
 mat.out
 #------------------    
    site       var year.2011 year.2012    A.2011    A.2012
1.1    A product.A        12        13 0.3000000 0.2888889
2.1    A product.B        10        11 0.2500000 0.2444444
3.1    A    energy        40        45 1.0000000 1.0000000
1.2    B product.A        14        25 0.2333333 0.3846154
2.2    B product.B        12        13 0.2000000 0.2000000
3.2    B    energy        60        65 1.0000000 1.0000000 
```

# seam - 在 JBoss AS 7 上注册 Infinispan AdvancedExternalizers

> ID：12050631
> 
> 赞同：1
> 
> 时间：2012-08-21T08:08:00.167
> 
> 标签：seam, jboss7.x, infinispan

我有一个 bean，它包含对 JSF 组件（确切地说是primefaces 组件）的引用。

根据规范，JSF 组件不可序列化。我的 Web 应用程序在 JBoss 集群中运行，并且需要分发 bean，这意味着它们需要可序列化。因此，

因此，每当我使用其支持 bean 是具有 JSF 组件引用的页面时，我都会遇到此异常：

```
Caused by: java.lang.RuntimeException: Failure to marshal argument(s)
   at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.marshallCall(CommandAwareRpcDispatcher.java:257)
   at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.processSingleCall(CommandAwareRpcDispatcher.java:274)
   at org.infinispan.remoting.transport.jgroups.CommandAwareRpcDispatcher.invokeRemoteCommand(CommandAwareRpcDispatcher.java:165)
   ... 74 more
Caused by: org.infinispan.marshall.NotSerializableException: org.primefaces.component.fileupload.FileUpload
Caused by: an exception which occurred:
   in field uploadComponent
   in field bean
   in object java.util.HashMap@0
   in object org.jboss.as.clustering.SimpleMarshalledValue@0
   in object org.infinispan.atomic.PutOperation@1fe7028
   in object java.util.LinkedList@90f00d5b
   in object org.infinispan.atomic.AtomicHashMapDelta@46933
   in object org.infinispan.commands.write.PutKeyValueCommand@515ccf63
   in object org.infinispan.commands.tx.PrepareCommand@1aaebdcd 
```

我检查了 infinispan 文档，发现实际上可以使用 AdvancedExternalizers 处理更细粒度的组件编组（包括那些不实现 Serializable 的组件）。

所以我为non-Serializable jsf组件写了一个，如下图：

```
public static class FileUploadExternalizer implements AdvancedExternalizer<FileUpload> {

        private static final long serialVersionUID = 1L;

        @Override
          public void writeObject(ObjectOutput output, FileUpload fileUpload)
                throws IOException {

          }

          @Override
          public FileUpload readObject(ObjectInput input)
                throws IOException, ClassNotFoundException {
             return new FileUpload();
          }

          @SuppressWarnings("unchecked")
         @Override
          public Set<Class<? extends FileUpload>> getTypeClasses() {
             return Util.<Class<? extends FileUpload>>asSet(FileUpload.class);
          }

          @Override
          public Integer getId() {
             return null;
          }
       } 
```

其中 FileUpload 是不可序列化的 jsf（primefaces）组件。

对于独立的 infinispan，可以使用 infinispan 配置元素中的 xml 配置向 infinispan 注册 Externalizer 类，如下所示：

```
<infinispan>
  <global>
    <serialization>
      <advancedExternalizers>
        <advancedExternalizer externalizerClass="..."/>
      </advancedExternalizers>
    </serialization>
  </global>
  ...
</infinispan> 
```

问题是当从 JBoss 7 容器中使用 infinispan 时，配置是不同的。配置在 jboss7 Standalone.xml（或任何其他配置 xml 文件）中完成。

不幸的是，在 Jboss7 中，无法配置元素。根据关于 infinispan 配置的 jboss7 文档，

```
Where is <global/>?
Much of the global configuration contains references to other JBoss AS services. In JBoss AS 7, these services are auto-injected behind the scenes. This includes things like thread pools (described below), the JGroups transport (also described below), and the mbean server. 
```

这让我可以选择通过代码进行注册。所以我创建了一个应用程序范围的接缝组件来在那里进行注册：

```
@Name("infinispanExternalizerRegistration")
@Scope(ScopeType.APPLICATION)
@Startup
public class InfinispanAdvancedExternalizerRegistration {

    @Create
    public void init(){

        GlobalConfigurationBuilder builder = new GlobalConfigurationBuilder();
        builder.serialization().addAdvancedExternalizer(2345, new PhotoUploader.FileUploadExternalizer());

    }
} 
```

但是，我仍然得到这个问题开头描述的 NotSerializableExceptions。这是正确的行为吗？还是我的 AdvancedExternalizer 真的因为一些错误的配置而无法工作？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:59:57.507

交叉发布到[https://community.jboss.org/message/754711#754711](https://community.jboss.org/message/754711#754711)，在那里查看我的答案。

# jvm - Eden 空间 100% 上的 JVM 崩溃

> ID：12050641
> 
> 赞同：1
> 
> 时间：2012-08-21T08:08:34.900
> 
> 标签：jvm, jvm-crash

我每 X 周发生一次 JVM 崩溃。JVM 正在运行 JBoss AS 5.1。我收集了很多崩溃日志，都显示 eden 空间 100% 和并发标记扫描生成总计 3145728K（它们的值都相同！）。我正在浏览类似的案例，但无法匹配任何案例。我正在使用 Java 7，昨天才更新到最新版本 - 问题再次出现在晚上。这是我的 JVM 设置：

```
set JAVA_OPTS=%JAVA_OPTS% -Xms4g -Xmx4g -XX:MaxPermSize=512m -XX:NewRatio=3
set "JAVA_OPTS=%JAVA_OPTS% -Djboss.bind.address=0.0.0.0 -Djboss.server.log.dir=f:\log\jboss\node1"
set JAVA_OPTS=%JAVA_OPTS% -XX:LargePageSizeInBytes=5m -XX:ParallelGCThreads=20 -XX:+UseParNewGC -XX:+UseConcMarkSweepGC 
set JAVA_OPTS=%JAVA_OPTS% -XX:+PrintGC -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -Xloggc:f:\log\jboss\node1\gc\gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=f:\dumps -XX:+PrintGCDateStamps -XX:+PrintGCApplicationStoppedTime -XX:+PrintGCApplicationConcurrentTime -verbose:gc 
```

以及其中一个崩溃日志：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000000712f335e, pid=14532, tid=25004
#
# JRE version: 7.0_06-b24
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.2-b09 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# V  [jvm.dll+0x32335e]
#
# Core dump written. Default location: D:\jboss_node1\bin\hs_err_pid14532.mdmp
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x0000000000ddf800):  GCTaskThread [stack: 0x0000000000000000,0x0000000000000000] [id=25004]

siginfo: ExceptionCode=0xc0000005, reading address 0xffffffffffffffff

Registers:
RAX=0x000000077f87313b, RBX=0x0000000000de1c60, RCX=0x0000000000e0a398, RDX=0x000000000000003a
RSP=0x0000000004edee68, RBP=0x0000000000000001, RSI=0x0000000000000004, RDI=0x0000000000e0a398
R8 =0x0000000004edeea0, R9 =0x873148000000077f, R10=0x0000000000e0a398, R11=0x0000000000000060
R12=0x0000000000ea2f00, R13=0x0000000000e09f00, R14=0x000000000000009a, R15=0x0000000000ea3208
RIP=0x00000000712f335e, EFLAGS=0x0000000000010216

Top of Stack: (sp=0x0000000004edee68)
0x0000000004edee68:   00000000712df7e1 0000000000de1c60
0x0000000004edee78:   00000000712dfde3 0000000000000cf0
0x0000000004edee88:   0000000000000228 0000000000000398
0x0000000004edee98:   0000000000c23a20 0000000000000000
0x0000000004edeea8:   00000000000003ff 0000000000000000
0x0000000004edeeb8:   00000007a7e304c8 0000000000000000
0x0000000004edeec8:   0000000000000004 0000000000000000
0x0000000004edeed8:   0000000000000000 0000000000000000
0x0000000004edeee8:   000000000000004b 0000000000000000
0x0000000004edeef8:   0000000100000000 0000000000000000
0x0000000004edef08:   0000000000000000 0000000000000000
0x0000000004edef18:   0000000000000000 0000000000000000
0x0000000004edef28:   0000000000000000 0000000000000000
0x0000000004edef38:   0000000000000000 0000000000000000
0x0000000004edef48:   0000000000000000 0000000000000000
0x0000000004edef58:   0000000000000000 0000000000000000 

Instructions: (pc=0x00000000712f335e)
0x00000000712f333e:   18 4c 8b 49 18 49 83 79 10 00 49 8d 41 10 74 1b
0x00000000712f334e:   66 90 48 85 d2 74 14 4c 8b 08 48 ff ca 41 ff c3
0x00000000712f335e:   49 83 79 10 00 49 8d 41 10 75 e7 49 8b 49 10 49
0x00000000712f336e:   63 d3 49 29 52 30 49 89 4a 18 48 85 c9 75 11 49 

Register to memory mapping:

RAX=0x000000077f87313b is an unknown value
RBX=0x0000000000de1c60 is an unknown value
RCX=0x0000000000e0a398 is an unknown value
RDX=0x000000000000003a is an unknown value
RSP=0x0000000004edee68 is an unknown value
RBP=0x0000000000000001 is an unknown value
RSI=0x0000000000000004 is an unknown value
RDI=0x0000000000e0a398 is an unknown value
R8 =0x0000000004edeea0 is an unknown value
R9 =0x873148000000077f is an unknown value
R10=0x0000000000e0a398 is an unknown value
R11=0x0000000000000060 is an unknown value
R12=0x0000000000ea2f00 is an unknown value
R13=0x0000000000e09f00 is an unknown value
R14=0x000000000000009a is an unknown value
R15=0x0000000000ea3208 is an unknown value

Stack: [0x0000000000000000,0x0000000000000000],  sp=0x0000000004edee68,  free space=80763k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0x32335e]

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x0000000000dc1800 JavaThread "DestroyJavaVM" [_thread_blocked, id=23048, stack(0x0000000000fa0000,0x00000000010a0000)]
  0x0000000010b93000 JavaThread "Service Thread" daemon [_thread_blocked, id=20900, stack(0x0000000011ae0000,0x0000000011be0000)]
  0x0000000010b91000 JavaThread "C2 CompilerThread1" daemon [_thread_blocked, id=20800, stack(0x0000000011940000,0x0000000011a40000)]
  0x0000000010b8d000 JavaThread "C2 CompilerThread0" daemon [_thread_blocked, id=26664, stack(0x0000000011080000,0x0000000011180000)]
  0x0000000010b88000 JavaThread "Attach Listener" daemon [_thread_blocked, id=33804, stack(0x00000000116b0000,0x00000000117b0000)]
  0x0000000010b87000 JavaThread "Surrogate Locker Thread (Concurrent GC)" daemon [_thread_blocked, id=21060, stack(0x0000000005460000,0x0000000005560000)]
  0x0000000010b06800 JavaThread "Finalizer" daemon [_thread_blocked, id=3844, stack(0x0000000011200000,0x0000000011300000)]
  0x0000000010b05800 JavaThread "Reference Handler" daemon [_thread_blocked, id=22540, stack(0x0000000010f50000,0x0000000011050000)]

Other Threads:
  0x0000000010afe800 VMThread [stack: 0x0000000010e40000,0x0000000010f40000] [id=28508]
  0x0000000010bae800 WatcherThread [stack: 0x0000000011c10000,0x0000000011d10000] [id=32268]

=>0x0000000000ddf800 (exited) GCTaskThread [stack: 0x0000000000000000,0x0000000000000000] [id=25004]

VM state:at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x0000000000c2dd10] Threads_lock - owner thread: 0x0000000010afe800
[0x0000000000c2e290] Heap_lock - owner thread: 0x0000000058ad3000

Heap
 par new generation   total 943744K, used 875683K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K, 100% used [0x00000006e0000000, 0x0000000713340000, 0x0000000713340000)
  from space 104832K,  35% used [0x0000000713340000, 0x0000000715728d08, 0x00000007199a0000)
  to   space 104832K,  31% used [0x00000007199a0000, 0x000000071b9de200, 0x0000000720000000)
 concurrent mark-sweep generation total 3145728K, used 817374K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176172K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)

Card table byte_map: [0x0000000005e40000,0x0000000006750000] byte_map_base: 0x0000000002740000

Polling page: 0x0000000000be0000

Code Cache  [0x00000000010a0000, 0x00000000038b0000, 0x00000000040a0000)
 total_blobs=9848 nmethods=9127 adapters=669 free_code_cache=8557Kb largest_free_block=8332352

Compilation events (10 events):
Event: 56874.605 Thread 0x0000000010b91000 10237             java.awt.image.BufferedImage::<init> (955 bytes)
Event: 56874.620 Thread 0x0000000010b91000 nmethod 10237 0x0000000003893350 code [0x0000000003893560, 0x0000000003893de0]
Event: 57086.614 Thread 0x0000000010b8d000 10238             org.jboss.seam.util.Strings::split (53 bytes)
Event: 57086.652 Thread 0x0000000010b8d000 nmethod 10238 0x00000000026fdf10 code [0x00000000026fe120, 0x00000000026fee40]
Event: 57280.014 Thread 0x0000000010b91000 10239             com.myapp.details.tables.TableBuilder::getTransactionsList (249 bytes)
Event: 57280.228 Thread 0x0000000010b91000 nmethod 10239 0x0000000001b81410 code [0x0000000001b81780, 0x0000000001b84100]
Event: 57322.941 Thread 0x0000000010b8d000 10240             org.jboss.seam.deployment.DeploymentStrategy::postScan (56 bytes)
Event: 57322.960 Thread 0x0000000010b8d000 nmethod 10240 0x000000000210f310 code [0x000000000210f4e0, 0x000000000210f9f0]
Event: 57647.777 Thread 0x0000000010b91000 10241             java.util.concurrent.ConcurrentLinkedQueue::poll (85 bytes)
Event: 57647.782 Thread 0x0000000010b91000 nmethod 10241 0x0000000002d6a4d0 code [0x0000000002d6a620, 0x0000000002d6a7b8]

GC Heap History (10 events):
Event: 58388.223 GC heap after
Heap after GC invocations=5605 (full 13):
 par new generation   total 943744K, used 44796K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K,   0% used [0x00000006e0000000, 0x00000006e0000000, 0x0000000713340000)
  from space 104832K,  42% used [0x0000000713340000, 0x0000000715eff150, 0x00000007199a0000)
  to   space 104832K,   0% used [0x00000007199a0000, 0x00000007199a0000, 0x0000000720000000)
 concurrent mark-sweep generation total 3145728K, used 807707K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176171K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
}
Event: 58437.185 GC heap before
{Heap before GC invocations=5605 (full 13):
 par new generation   total 943744K, used 883558K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K,  99% used [0x00000006e0000000, 0x000000071331aa68, 0x0000000713340000)
  from space 104832K,  42% used [0x0000000713340000, 0x0000000715eff150, 0x00000007199a0000)
  to   space 104832K,   0% used [0x00000007199a0000, 0x00000007199a0000, 0x0000000720000000)
 concurrent mark-sweep generation total 3145728K, used 807707K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176171K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
Event: 58437.234 GC heap after
Heap after GC invocations=5606 (full 13):
 par new generation   total 943744K, used 32647K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K,   0% used [0x00000006e0000000, 0x00000006e0000000, 0x0000000713340000)
  from space 104832K,  31% used [0x00000007199a0000, 0x000000071b981d98, 0x0000000720000000)
  to   space 104832K,   0% used [0x0000000713340000, 0x0000000713340000, 0x00000007199a0000)
 concurrent mark-sweep generation total 3145728K, used 809592K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176171K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
}
Event: 58491.537 GC heap before
{Heap before GC invocations=5606 (full 13):
 par new generation   total 943744K, used 871559K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K, 100% used [0x00000006e0000000, 0x0000000713340000, 0x0000000713340000)
  from space 104832K,  31% used [0x00000007199a0000, 0x000000071b981d98, 0x0000000720000000)
  to   space 104832K,   0% used [0x0000000713340000, 0x0000000713340000, 0x00000007199a0000)
 concurrent mark-sweep generation total 3145728K, used 809592K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176171K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
Event: 58491.588 GC heap after
Heap after GC invocations=5607 (full 13):
 par new generation   total 943744K, used 39281K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K,   0% used [0x00000006e0000000, 0x00000006e0000000, 0x0000000713340000)
  from space 104832K,  37% used [0x0000000713340000, 0x000000071599c7d8, 0x00000007199a0000)
  to   space 104832K,   0% used [0x00000007199a0000, 0x00000007199a0000, 0x0000000720000000)
 concurrent mark-sweep generation total 3145728K, used 811608K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176171K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
}
Event: 58522.240 GC heap before
{Heap before GC invocations=5607 (full 13):
 par new generation   total 943744K, used 878193K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K, 100% used [0x00000006e0000000, 0x0000000713340000, 0x0000000713340000)
  from space 104832K,  37% used [0x0000000713340000, 0x000000071599c7d8, 0x00000007199a0000)
  to   space 104832K,   0% used [0x00000007199a0000, 0x00000007199a0000, 0x0000000720000000)
 concurrent mark-sweep generation total 3145728K, used 811608K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176172K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
Event: 58522.288 GC heap after
Heap after GC invocations=5608 (full 13):
 par new generation   total 943744K, used 39161K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K,   0% used [0x00000006e0000000, 0x00000006e0000000, 0x0000000713340000)
  from space 104832K,  37% used [0x00000007199a0000, 0x000000071bfde670, 0x0000000720000000)
  to   space 104832K,   0% used [0x0000000713340000, 0x0000000713340000, 0x00000007199a0000)
 concurrent mark-sweep generation total 3145728K, used 813980K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176172K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
}
Event: 58563.832 GC heap before
{Heap before GC invocations=5608 (full 13):
 par new generation   total 943744K, used 878073K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K, 100% used [0x00000006e0000000, 0x0000000713340000, 0x0000000713340000)
  from space 104832K,  37% used [0x00000007199a0000, 0x000000071bfde670, 0x0000000720000000)
  to   space 104832K,   0% used [0x0000000713340000, 0x0000000713340000, 0x00000007199a0000)
 concurrent mark-sweep generation total 3145728K, used 813980K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176172K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
Event: 58563.898 GC heap after
Heap after GC invocations=5609 (full 13):
 par new generation   total 943744K, used 36771K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K,   0% used [0x00000006e0000000, 0x00000006e0000000, 0x0000000713340000)
  from space 104832K,  35% used [0x0000000713340000, 0x0000000715728d08, 0x00000007199a0000)
  to   space 104832K,   0% used [0x00000007199a0000, 0x00000007199a0000, 0x0000000720000000)
 concurrent mark-sweep generation total 3145728K, used 816244K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176172K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)
}
Event: 58604.657 GC heap before
{Heap before GC invocations=5609 (full 13):
 par new generation   total 943744K, used 875683K [0x00000006e0000000, 0x0000000720000000, 0x0000000720000000)
  eden space 838912K, 100% used [0x00000006e0000000, 0x0000000713340000, 0x0000000713340000)
  from space 104832K,  35% used [0x0000000713340000, 0x0000000715728d08, 0x00000007199a0000)
  to   space 104832K,   0% used [0x00000007199a0000, 0x00000007199a0000, 0x0000000720000000)
 concurrent mark-sweep generation total 3145728K, used 816244K [0x0000000720000000, 0x00000007e0000000, 0x00000007e0000000)
 concurrent-mark-sweep perm gen total 300520K, used 176172K [0x00000007e0000000, 0x00000007f257a000, 0x0000000800000000)

Deoptimization events (10 events):
Event: 43498.531 Thread 0x000000005287c800 Uncommon trap -83 fr.pc 0x000000000210f5f8
Event: 43498.534 Thread 0x000000005a47d800 Uncommon trap -83 fr.pc 0x000000000210c32c
Event: 45167.874 Thread 0x000000005a462800 Uncommon trap -10 fr.pc 0x00000000030a8960
Event: 45167.874 Thread 0x000000005a462800 Uncommon trap 23 fr.pc 0x0000000001b7d198
Event: 45203.070 Thread 0x0000000058287800 Uncommon trap -10 fr.pc 0x00000000030a8960
Event: 45203.070 Thread 0x0000000058287800 Uncommon trap 23 fr.pc 0x0000000001fdea7c
Event: 48744.132 Thread 0x000000005827d000 Uncommon trap -83 fr.pc 0x000000000282a3dc
Event: 50994.946 Thread 0x000000005a466000 Uncommon trap -12 fr.pc 0x0000000003878f08
Event: 52821.617 Thread 0x0000000057ff8800 Uncommon trap -83 fr.pc 0x0000000001221388
Event: 58031.170 Thread 0x0000000058278000 Uncommon trap -83 fr.pc 0x000000000362f5e8

Internal exceptions (10 events):
Event: 58461.635 Thread 0x0000000058ad3000 Threw 0x00000006f89fd940 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 58462.823 Thread 0x0000000058287000 Threw 0x00000006f8df97a0 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\prims\jni.cpp:742
Event: 58466.348 Thread 0x000000005882d000 Threw 0x00000006fcc6b340 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\prims\jni.cpp:742
Event: 58484.610 Thread 0x0000000058ad3000 Threw 0x0000000707ffc958 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\interpreter\linkResolver.cpp:805
Event: 58484.611 Thread 0x0000000058ad3000 Threw 0x000000070e95c960 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\interpreter\linkResolver.cpp:805
Event: 58484.612 Thread 0x0000000058ad3000 Threw 0x000000070e962400 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\interpreter\linkResolver.cpp:805
Event: 58495.612 Thread 0x0000000058278000 Threw 0x00000006e6195a58 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 58570.956 Thread 0x0000000058279800 Threw 0x00000006e5c9a408 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 58598.103 Thread 0x0000000058287000 Threw 0x00000007071a0b70 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\prims\jni.cpp:742
Event: 58598.290 Thread 0x000000005882d000 Threw 0x00000007071f4418 at C:\jdk7u2_64p\jdk7u6\hotspot\src\share\vm\prims\jni.cpp:742

Events (10 events):
Event: 58590.621 Executing VM operation: RevokeBias done
Event: 58591.334 Executing VM operation: RevokeBias
Event: 58591.339 Executing VM operation: RevokeBias done
Event: 58601.224 Executing VM operation: RevokeBias
Event: 58601.228 Executing VM operation: RevokeBias done
Event: 58601.230 Executing VM operation: RevokeBias
Event: 58601.232 Executing VM operation: RevokeBias done
Event: 58601.367 Executing VM operation: RevokeBias
Event: 58601.371 Executing VM operation: RevokeBias done
Event: 58604.652 Executing VM operation: GenCollectForAllocation

Dynamic libraries:
0x000000013f660000 - 0x000000013f693000     C:\Java\jdk1.7.0_06\bin\java.exe
0x0000000077380000 - 0x0000000077529000     C:\Windows\SYSTEM32\ntdll.dll
0x0000000076ca0000 - 0x0000000076dbf000     C:\Windows\system32\kernel32.dll
0x000007fefd8b0000 - 0x000007fefd91c000     C:\Windows\system32\KERNELBASE.dll
0x000007fefdc30000 - 0x000007fefdd0b000     C:\Windows\system32\ADVAPI32.dll
0x000007fefde40000 - 0x000007fefdedf000     C:\Windows\system32\msvcrt.dll
0x000007feff4d0000 - 0x000007feff4ef000     C:\Windows\SYSTEM32\sechost.dll
0x000007fefe0a0000 - 0x000007fefe1cd000     C:\Windows\system32\RPCRT4.dll
0x0000000076dc0000 - 0x0000000076eba000     C:\Windows\system32\USER32.dll
0x000007feff4f0000 - 0x000007feff557000     C:\Windows\system32\GDI32.dll
0x000007fefdee0000 - 0x000007fefdeee000     C:\Windows\system32\LPK.dll
0x000007feff560000 - 0x000007feff629000     C:\Windows\system32\USP10.dll
0x000007fefc270000 - 0x000007fefc464000     C:\Windows\WinSxS\amd64_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_fa396087175ac9ac\COMCTL32.dll
0x000007fefdbb0000 - 0x000007fefdc21000     C:\Windows\system32\SHLWAPI.dll
0x000007fefe070000 - 0x000007fefe09e000     C:\Windows\system32\IMM32.DLL
0x000007fefef60000 - 0x000007feff069000     C:\Windows\system32\MSCTF.dll
0x0000000073840000 - 0x0000000073911000     C:\Java\jdk1.7.0_06\jre\bin\msvcr100.dll
0x0000000070fd0000 - 0x00000000716ef000     C:\Java\jdk1.7.0_06\jre\bin\server\jvm.dll
0x000007fefa4e0000 - 0x000007fefa4e9000     C:\Windows\system32\WSOCK32.dll
0x000007feff2a0000 - 0x000007feff2ed000     C:\Windows\system32\WS2_32.dll
0x000007fefde30000 - 0x000007fefde38000     C:\Windows\system32\NSI.dll
0x000007fefa5c0000 - 0x000007fefa5fb000     C:\Windows\system32\WINMM.dll
0x0000000077540000 - 0x0000000077547000     C:\Windows\system32\PSAPI.DLL
0x00000000744b0000 - 0x00000000744bf000     C:\Java\jdk1.7.0_06\jre\bin\verify.dll
0x0000000074480000 - 0x00000000744a8000     C:\Java\jdk1.7.0_06\jre\bin\java.dll
0x0000000074420000 - 0x0000000074435000     C:\Java\jdk1.7.0_06\jre\bin\zip.dll
0x000007fefe1d0000 - 0x000007fefef58000     C:\Windows\system32\SHELL32.dll
0x000007feff070000 - 0x000007feff273000     C:\Windows\system32\ole32.dll
0x0000000074400000 - 0x0000000074419000     C:\Java\jdk1.7.0_06\jre\bin\net.dll
0x000007fefcfa0000 - 0x000007fefcff5000     C:\Windows\system32\mswsock.dll
0x000007fefd200000 - 0x000007fefd207000     C:\Windows\System32\wship6.dll
0x00000000743c0000 - 0x00000000743d1000     C:\Java\jdk1.7.0_06\jre\bin\nio.dll
0x000007fefc180000 - 0x000007fefc195000     C:\Windows\system32\NLAapi.dll
0x000007fef97d0000 - 0x000007fef97e5000     C:\Windows\system32\napinsp.dll
0x000007fefcf40000 - 0x000007fefcf9b000     C:\Windows\system32\DNSAPI.dll
0x000007fefa4f0000 - 0x000007fefa4fb000     C:\Windows\System32\winrnr.dll
0x000007fefcc20000 - 0x000007fefcc27000     C:\Windows\System32\wshtcpip.dll
0x000007fefb0a0000 - 0x000007fefb0c7000     C:\Windows\system32\IPHLPAPI.DLL
0x000007fefb080000 - 0x000007fefb08b000     C:\Windows\system32\WINNSI.DLL
0x000007fef9be0000 - 0x000007fef9be8000     C:\Windows\system32\rasadhlp.dll
0x000007fefafd0000 - 0x000007fefb023000     C:\Windows\System32\fwpuclnt.dll
0x0000000074470000 - 0x000000007447b000     C:\Java\jdk1.7.0_06\jre\bin\management.dll
0x000007fefd190000 - 0x000007fefd1a7000     C:\Windows\system32\CRYPTSP.dll
0x000007fefcd00000 - 0x000007fefcd47000     C:\Windows\system32\rsaenh.dll
0x000007fefd7e0000 - 0x000007fefd7ef000     C:\Windows\system32\profapi.dll
0x000007fefd710000 - 0x000007fefd71f000     C:\Windows\system32\CRYPTBASE.dll
0x0000000074330000 - 0x0000000074337000     C:\Java\jdk1.7.0_06\jre\bin\rmi.dll
0x0000000074340000 - 0x0000000074364000     C:\Java\jdk1.7.0_06\jre\bin\sunec.dll
0x00000000743b0000 - 0x00000000743bb000     C:\Java\jdk1.7.0_06\jre\bin\sunmscapi.dll
0x000007fefd960000 - 0x000007fefdac7000     C:\Windows\system32\CRYPT32.dll
0x000007fefd880000 - 0x000007fefd88f000     C:\Windows\system32\MSASN1.dll
0x0000000070d30000 - 0x0000000070ec3000     C:\Java\jdk1.7.0_06\jre\bin\awt.dll
0x000007fefdef0000 - 0x000007fefdfc7000     C:\Windows\system32\OLEAUT32.dll
0x000007fefb500000 - 0x000007fefb518000     C:\Windows\system32\DWMAPI.DLL
0x0000000074300000 - 0x000000007432a000     C:\Java\jdk1.7.0_06\jre\bin\dcpr.dll
0x0000000070f30000 - 0x0000000070f60000     C:\Java\jdk1.7.0_06\jre\bin\jpeg.dll
0x0000000074220000 - 0x0000000074259000     C:\Java\jdk1.7.0_06\jre\bin\kcms.dll
0x000007fef91e0000 - 0x000007fef9305000     C:\Windows\system32\DBGHELP.DLL

VM Arguments:
jvm_args: -Xrs -Dprogram.name=run.bat -Xms4g -Xmx4g -XX:MaxPermSize=512m -XX:NewRatio=3 -Djboss.bind.address=0.0.0.0 -Djboss.server.log.dir=f:\log\jboss\node1 -XX:LargePageSizeInBytes=5m -XX:ParallelGCThreads=20 -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+PrintGC -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -Xloggc:f:\log\jboss\node1\gc\gc.log -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=f:\dumps -XX:+PrintGCDateStamps -XX:+PrintGCApplicationStoppedTime -XX:+PrintGCApplicationConcurrentTime -verbose:gc -Dorg.jboss.resolver.warning=true -Dsun.rmi.dgc.client.gcInterval=691200000 -Dsun.rmi.dgc.server.gcInterval=691200000 -Djava.endorsed.dirs=d:/jboss_node1\lib\endorsed 
java_command: org.jboss.Main
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=C:\Java\jdk1.7.0_06\
PATH=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Dell\SysMgt\oma\bin;C:\Program Files (x86)\Dell\SysMgt\idrac;
USERNAME=123456$
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 47 Stepping 2, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows NT 6.1 , 64 bit Build 7601 Service Pack 1

CPU:total 64 (8 cores per cpu, 2 threads per core) family 6 model 47 stepping 2, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, ht, tsc, tscinvbit

Memory: 4k page, physical 16763732k(1165800k free), swap 33525612k(18037992k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (23.2-b09) for windows-amd64 JRE (1.7.0_06-b24), built on Aug  9 2012 20:44:07 by "java_re" with unknown MS VC++:1600

time: Tue Aug 21 02:20:38 2012
elapsed time: 58655 seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:12:15.750

我注意到您正在使用并行 GC，并且可能会关闭它以确定它是否会加剧您的问题。我会尝试：

1.  减少 GC 线程（也许关闭它 - 你需要它吗？）
2.  *降级*你的JVM

与此同时，我会遵循这个建议并让 Oracle 知道。

```
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp 
```

# android - 如何检测平板电脑的USB打印机端口并打印文档

> ID：12050645
> 
> 赞同：3
> 
> 时间：2012-08-21T08:08:56.937
> 
> 标签：android

我制作了一个读取 pdf 文件的应用程序，我想从平板电脑打印文档。所以当我将打印机的 USB 连接到端口时，它应该首先检测 USB 是否已连接，然后如果打印机已连接，则打印文档。如果有人对此概念有想法，请在此处分享。任何帮助，将不胜感激

# spring - 实体对象是由spring容器管理的吗？

> ID：12050646
> 
> 赞同：1
> 
> 时间：2012-08-21T08:09:02.023
> 
> 标签：spring, spring-roo

据我了解，spring web应用程序中的实体对象通常是从DAO生成的，因此不由spring容器管理。但是在 spring-roo 应用程序中，实体、DAO 和服务位于同一个地方。我想知道这些对象是如何由 Spring 容器管理的？从 DAO 生成的实体对象是否仍然存在于 spring 容器之外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T09:02:01.673

Spring roo 默认使用 ActiveRecord 模式，这意味着 Dao 方法位于 Entity 对象上。这并不意味着从方法加载的实际对象是由 spring 容器管理的。它只是一个模式，如果你愿意，你可以切换到 repository/dao 模式。

另外，我不确定您所说的由容器管理是什么意思。在任何 Spring 应用程序中，从 Dao 加载的对象都可以注入依赖项并设置属性值。Spring 使用 AOP 执行此操作。

只需将 @Configurable 注释添加到正在创建的对象即可。

# login - FOSUserBundle：记住登录前的最后一页

> ID：12050647
> 
> 赞同：3
> 
> 时间：2012-08-21T08:09:04.693
> 
> 标签：login, symfony-2.1, fosuserbundle

有没有一种简单的方法来配置 FOSUserBundle 以记住用户在登录之前来自的页面？我不希望用户在浏览到他们感兴趣的内容后最终出现在起始页上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:15:01.793

有很多方法可以配置用户在登录后如何重定向。有关详细信息，请参阅此文档：

[http://symfony.com/doc/current/cookbook/security/form_login.html](http://symfony.com/doc/current/cookbook/security/form_login.html)

这通常适用于 Symfony，但如果您使用 FOSUserBundle，它的工作方式相同

# iphone - 将 XML 转换为 NSString

> ID：12050649
> 
> 赞同：1
> 
> 时间：2012-08-21T08:09:13.467
> 
> 标签：iphone, ios, xml, encoding, nsmutabledata

以前，我能够使用以下编码获取 URL 的内容：

`<?xml version = "1.0" encoding = "UTF-8"?>`

并将其解析为 NSString ，代码如下所示：

```
NSMutableData *receivedData =  [[[NSMutableData alloc] initWithContentsOfURL:[NSURL URLWithString:authenticateURL]] autorelease];
    NSString *string = [[[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding] autorelease];if (string) {   // if connection established, string will look for <error> in XML
        NSRange range = [string rangeOfString:@"<error>"];
        if (range.location == NSNotFound) {
            result = TRUE;
            NSLog(@"Authenticated!");  // if <error> not found, record is present
        }                           //return TRUE to load data
        else {
            result = FALSE;         // <error> found in XML, record is not found
            NSLog(@"Not Authenticated!");
        }
    } 
```

但是，我现在需要获取的内容实际上是没有编码类型的，例如：

`<?xml version="1.0" ?><authenticate><auth>Y</auth></authenticate>`

因此，现在，当我 NSLog 字符串时，它是空的。已经尝试搜索其他方法，但我发现的所有示例，人们都可以使用 UTF8StringEncoding。很高兴有任何建议:)！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:25:34.347

您可以结合使用开源库 TBXML 和[https://gist.github.com/1922643](https://gist.github.com/1922643)将接收到的 XML 转换为 NSDictionary。它支持 NSData（使用 NSUTF8StringEncoding）和普通的 NSStrings。

此 NSDictionary 包含 XML 中可用的所有信息，您可以使用 objectForKey: 函数读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:28:21.947

您应该使用 NSXMLParser 或使用现成的解析器[http://www.developers-life.com/simple-xml-parser-based-on-nsxmlparser-converter.html](http://www.developers-life.com/simple-xml-parser-based-on-nsxmlparser-converter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:48:37.260

你可以使用[NSXMLParser 类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

这是一个很好的[教程](http://www.edumobile.org/iphone/iphone-programming-tutorials/parsing-an-xml-file/)，向您展示如何使用此类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T10:22:15.593

对不起，实际上我无法从 URL 中检索 XML 的原因是因为一些 SSL 问题。我使用的解决方案可以在这里找到：[How to use NSURLConnection to connect with SSL for an untrusted cert？](https://stackoverflow.com/questions/933331/how-to-use-nsurlconnection-to-connect-with-ssl-for-an-untrusted-cert)

也谢谢大家帮忙^^

# asp.net - 在 Visual Studio 2010 中使用 MySql 时遇到问题

> ID：12050655
> 
> 赞同：1
> 
> 时间：2012-08-21T08:09:40.790
> 
> 标签：asp.net, mysql, visual-studio-2010

我正在尝试在 Visual Studio 2010 中开发一个 ASP.NET 项目，该项目将可以访问位于本地服务器上的 MySQL 数据库。

我已经使用 Web 平台安装程序安装了 MySQL 5.1 和 NET Connector for MySQL。我正在使用安装了 .NET 4.5 的 Microsoft Visual Studio 2010 Ultimate（版本 10 - SP1）。我在我的项目中添加了对 MySQL.Data、MySQL.Web 和 MySQL.Data.Entity 的引用。

我面临以下问题。

尝试在我的 ASPX 页面中链接 MySQL 对象时，无法访问 MySQL 库。意思是当我尝试输入 .. MySQL .. 智能感知没有接收到它。似乎 MySQL 库根本没有添加到项目中，而我可以在我的参考资料中看到它。因此，我无法在 ASPX 页面中创建 MySQL 对象。

我想把我的一些通用代码放在一个类中（例如 ComCode.vb）。有人告诉我，我必须将该 ComCode.vb 文件放在 App_Code 文件夹中。默认情况下我没有看到 App_Code 文件夹，所以我手动创建了一个文件夹。（我也没有在 Add>Add ASP.NET Folder 菜单中看到 App_Code 文件夹）。该文件夹有一个特殊的图标，我猜是项目捡到了它。当我将 ComCode.vb 类文件放入其中时，智能感知不起作用。它将其视为未格式化的原始文本文件。我在网上搜索，发现我必须将类文件的Build Action从Content更改为Compile。这样可行。但是给我带来了新的问题。

我将我的 MySQL 代码从 ASPX 文件转移到 Class 文件。现在由于一些奇怪的原因，Visual Studio 可以识别 MySQL 对象。现在它记得我的项目引用了 MySQL 库。但是当它们在 ASPX 代码中时，它不能识别对象。我什至尝试导入命名空间，但由于它无法识别库，因此导入也无法正常工作。

无论如何，现在 MySQL 在类文件中工作。我可以在 ASPX 页面中创建一个新的类实例并调用我的函数来连接和打开 MySQL 数据库。但现在有一个新问题。当网页在 IIS Express 7.5 服务器上运行时，它给了我以下错误：

未定义类型“MySqlConnection”。

此行给出此错误：Public objConnection As MySqlConnection

我的 ComCode.vb 中的代码：

```
Imports MySql.Data.MySqlClient
Imports MySql.Data

Public Class farazdb
    Public objConnection As MySqlConnection

    Public Function Connect() As Boolean

        Dim conStr As String
        Dim config As NameValueCollection = ConfigurationManager.GetSection("appSettings")
        conStr = config("ODBCConnection")

        Try
            objConnection = New MySqlConnection(conStr)
            objConnection.Open()
        Catch ex As MySqlException
            Return ex.Message.ToString()
        End Try

        Return True

    End Function
End Class 
```

我在 Web.config 中添加了以下行：

```
<appSettings >
  <add key="ODBCConnection" value="Server=localhost; Database=mydb; uid=xxxx; password=xxxx;"/>
</appSettings> 
```

我真的不知道这里发生了什么。该怎么办？任何帮助表示赞赏。

问候

法拉兹

# windows - 已达到网络 BIOS 命令限制

> ID：12050656
> 
> 赞同：4
> 
> 时间：2012-08-21T08:09:44.597
> 
> 标签：windows, fileserver

我的 ASP.Net 应用程序从另一个 Windows 服务器上的共享文件夹中获取文件。当请求增加时，我收到以下错误：

`The network BIOS command limit has been reached`

我已按照[Microsoft KB810886 文章](http://support.microsoft.com/kb/810886)中的步骤操作，但它并没有解决我的问题。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T12:45:22.607

我今天在我的 Windows Server 2008 R2 Enterprise 机器上遇到了同样的问题。我所做的是启用文件服务角色，如下所示：

1.  打开`Server Manager`（位于控制面板\所有控制面板项\管理工具中）
2.  `Roles`从左侧窗格中选择节点
3.  `Add Roles`从主窗口中选择，这将为您提供一个向导
4.  在第二页上`File Services`，从可用角色列表中选择，然后单击下一步。
5.  我选择安装`File Server`, `Services for Network File System`,`Windows Server 2003 File Services`和`Indexing Service`
6.  继续安装角色，然后重新启动服务器（不确定是否需要重新启动）

# c - mktime 转换

> ID：12050658
> 
> 赞同：2
> 
> 时间：2012-08-21T08:09:49.280
> 
> 标签：c, mktime

我想计算 GMT 时间和当前时间的时差。为此，我使用 mktime 将 tm 时间（格林威治标准时间）转换为 time_t 格式。和使用 time() api 的当前时间。

```
struct tm = x;  time_t t1, t2; 
time(&t1);
/* here x  will get in GMT format */
t2 = mktime(&x);
sec = difftime(t2 , t1); 
```

在制作相同时区的过程中，mktime() 是否会负责转换为本地时间？还是我需要明确添加 `sec = difftime(t2 , gmtime(&t1);` 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:32:47.103

是`mktime`的转换为当地时间，请阅读man：

[http://www.mkssoftware.com/docs/man3/mktime.3.asp](http://www.mkssoftware.com/docs/man3/mktime.3.asp)

```
mktime() : convert local time to seconds since the Epoch 
```

**编辑**：要计算两个日期之间的时间差，您可以使用它

```
 time_t t1, t2;
    struct tm my_target_date;

    /* Construct your date */
    my_target_date.tm_sec = 0;
    my_target_date.tm_min = 0;
    my_target_date.tm_hour = 0;
    my_target_date.tm_mday = 20;
    my_target_date.tm_mon = 7;
    my_target_date.tm_year = 112; /* Date today */
    t1 = mktime (&my_target_date);
    t2 = time (NULL);
    printf ("Number of days since target date : %ld\n", (t2 - t1) / 86400); /* 1 day = 86400 sec, use 3600 if you want hours */ 
```

# c++ - Boost XML- 属性树 - xml 读取的详细错误信息

> ID：12050660
> 
> 赞同：1
> 
> 时间：2012-08-21T08:10:02.103
> 
> 标签：c++, xml, boost, xml-parsing, boost-propertytree

我正在使用带有属性树类的 boost 库。功能部分可以很好地读取和写入 xml 文件，但我正在尝试改进语法和其他错误的错误输出。此外，还计划了像“第 13 行错误”这样的输出以更快地发现错误。

现在我对这个要求很迷茫，因为我看不到如何找到特定错误和真实 xml 文件之间的任何关系。对未知 xml 对象和属性的检测也可以很好地找到拼写错误。

欢迎任何想法，样品，...。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:54:13.387

唯一的错误处理是通过异常[`read_xml`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost/property_tree/xml_parser/read_xml_id1073248.html)抛出。

您可能需要考虑在将 XML 传递给`boost::property_tree`.

目前没有 Boost XML 库，因此您可能希望使用[Xerces-C++ Schema Support](http://xerces.apache.org/xerces-c/schema-3.html)或其他等效库来查看验证。

# java - JFrame 调整大小（失真）

> ID：12050663
> 
> 赞同：0
> 
> 时间：2012-08-21T08:10:24.317
> 
> 标签：java, swing

我正在使用 Java Swing 来设计 GUI。

由于范围的变化，必须改变 GUI 的大小。GUI目前是在一个`JFrame`类下开发的。但是，我怀疑由于布局，`GroupLayout`当我最大化应用程序时，组件会失真。

截图使用`GroupLayout`：

[最大化] [http://s9.postimage.org/g8rmf03ql/Capture.png](http://s9.postimage.org/g8rmf03ql/Capture.png)

[正常最小化] [http://postimage.org/image/oapd9590l/](http://postimage.org/image/oapd9590l/)

撞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:57:20.730

尝试使用边框布局。这是 Java BorderLayout 的教程。 [http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

这是在 JFrame 中排列组件的简单方法。

# java - Lucene 可以用于每个要排名的实体是一组文档的情况吗？

> ID：12050665
> 
> 赞同：1
> 
> 时间：2012-08-21T08:10:30.970
> 
> 标签：java, search, solr, lucene, search-engine

我正在做一个项目，其中要排名的每个实体**不是单个文档**，而是实际上**是一组文档**。

因此排名不仅涉及标准搜索引擎评分参数，还涉及**实体/组内文档的关联**。更准确地说，组内文档的关联也**有助于排名得分**。

关联的计算是特定于问题的东西，我已经有一个工作代码。

我刚刚开始使用**Lucene**，因此我不知道是否可以使用 Lucene 实现此功能。

**可以使用 Lucene 完成吗？**

**索尔？**

如果没有，请给我一个同样的出路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T05:44:28.797

在 solr 中，如果您使用 dismax 或 edismax 查询解析器，则可以使用有效负载。我们在 solr 3.6 中取得了不错的效果。作为一个起点，我建议： [solr payload](http://searchhub.org/dev/2009/08/05/getting-started-with-payloads/)和：[solr paylaod 2](http://digitalpebble.blogspot.ro/2010/08/using-payloads-with-dismaxqparser-in.html) 希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T01:07:03.247

Yes you can do this in Lucene. For more information look at Function queries. You can find a good deal of information in [Lucene in Action Book](https://rads.stackoverflow.com/amzn/click/com/1933988177) (starting page 185).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T14:24:05.893

你可以组是 solr。group=on&group.field=字段。

默认情况下，它将返回一个单独的组列表。而不是将组作为主要结果返回。

您可以使用自己的系统进行评分和提升某些字段等。我不确定您将如何获得该组内文档的总分。或者如果需要，但 solr 4 有 group.func

[http://wiki.apache.org/solr/FieldCollapsing](http://wiki.apache.org/solr/FieldCollapsing)

如果不是抱歉，希望对您有所帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:19:43.120

You probably need to dig deeper into the Lucene scoring code. Maybe you can calculate you association score and combine it with the regular lucene scoring.

[http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/package-summary.html#scoring](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/search/package-summary.html#scoring)

# winapi - CoCreateInstance 在 Win 2003 中失败错误 80040154

> ID：12050668
> 
> 赞同：0
> 
> 时间：2012-08-21T08:10:54.393
> 
> 标签：winapi, visual-c++, scheduled-tasks, windows-server-2003

当我使用**CLSID_TaskSchedule**和**IID_ITaskService**调用函数**CoCreateInstance**时，出现错误“无法创建 ITaskService 的实例：**80040154** ” 。

 ******我正在使用 ITaskService 接口来创建计划任务。**同样的 appln 在 Win7 中工作正常，但在 Win2003 中失败**。

```
 ITaskService *pService = NULL;
hr = CoCreateInstance( CLSID_TaskScheduler,
                       NULL,
                       CLSCTX_INPROC_SERVER,
                       IID_ITaskService,
                       (void**)&pService ); 
```

这个 ITaskService 接口是只支持 Win7/Server 2k8 R2 还是支持所有 Windows 平台？

预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:17:29.573

MSDN 上的文档通常非常可靠。对于[`ITaskService`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381832%28v=vs.85%29.aspx)：

> **支持的最低客户端** Windows Vista
> 
> **支持的最低服务器** Windows Server 2008

错误 80040154 是“类未注册”******

# javascript - 如何让div元素随页面滚动

> ID：12050671
> 
> 赞同：0
> 
> 时间：2012-08-21T08:11:21.507
> 
> 标签：javascript, html

我有一个 div 元素，当您滚动它时，我想将它与页面一起移动，如下图所示。但现在它只是坐在一个固定的位置。我怎样才能做到这一点？我知道我需要使用 JS，有人能指出我正确的方向吗？

![滚动](../Images/d406131dd2b4cad9af2ad795cf79638a.png)

```
<div id='slider'>

</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:13:14.990

不需要 JS 你应该使用 position fixed

```
div#slider {    
  position: fixed;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T08:16:28.670

在没有 JavaScript 的情况下，您始终可以在 CSS 中使用固定定位。

```
#slider {
  position: fixed;
  top: 100px;
  left: 0px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T08:14:48.390

```
#slider {
    position : fixed;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T08:15:39.013

我认为您正在寻找[这种](http://www.jtricks.com/javascript/navigation/floating/jquery.html)功能。[在此处](http://www.jtricks.com/javascript/navigation/floating/jquery.html)阅读有关如何使用的完整文档

```
<script type="text/javascript">  
    jQuery(document).ready(function($) (  
    {  
        $('#floatdiv').addFloating(  
            {  
                targetRight: 10,  
                targetTop: 10,  
                snap: true  
            });  
    });  
</script> 
```

# tridion - Tridion UI 编辑空白/非模板字段

> ID：12050672
> 
> 赞同：6
> 
> 时间：2012-08-21T08:11:25.457
> 
> 标签：tridion, tridion-2011

我正在尝试设计一个组件模板，使作者能够对属于关联架构的所有字段执行内联编辑。如果相关模板显示关联模式中的所有字段，这将很简单。

最好我用一个例子来解释自己。该网站有一个新闻部分，为了这个例子，假设新闻文章模式有一个标题、摘要、正文和日期。我希望用户能够通过 Tridion UI 在一个地方编辑所有这些字段，而进行这种编辑的最明智的地方似乎是在新闻详细信息模板中。问题是，新闻详细信息模板需要显示标题、日期和正文，但不应该显示摘要。因此，我希望用户能够在编辑组件时查看/编辑摘要字段，但不能在其他任何时候在模板上显示摘要。

我从 Tridion UI 文档中看到，可以启用空白/非模板字段的内联编辑，如下所示：

```
<tcdl:ComponentField name="Summary"></tcdl:ComponentField> 
```

这可以正常工作，因为在用户开始编辑组件之前不会显示任何内容，此时会显示值“添加文本”来代替上面的代码。从功能上讲，这很好，因为它达到了我的要求。我遇到的问题是它不是那么用户友好，因为没有标签可以向用户描述他们实际编辑的内容。在上面的示例中，问题显然不是那么糟糕，但实际上有更多类似于摘要的非模板字段，我希望用户能够在新闻详细信息页面上进行编辑，例如

```
<tcdl:ComponentField name="Summary"></tcdl:ComponentField>
<tcdl:ComponentField name="AnotherField1"></tcdl:ComponentField>
<tcdl:ComponentField name="AnotherField2"></tcdl:ComponentField> 
```

当用户开始编辑组件时，这会导致以下情况：

```
<add text>
<add text>
<add text> 
```

我曾尝试在 tcdl:ComponentField 标记中插入特定的渲染代码，但此布局随后会永久显示在登台站点上，例如：

```
<tcdl:ComponentField name="Summary">Summary: @Fields.Summary</tcdl:ComponentField> 
```

我想知道是否可以覆盖“添加文本”占位符内容，以便在编辑组件时显示类似于以下内容：

```
<Enter Summary>
<Enter Additional Field 1>
<Enter Additional Field 2> 
```

或者有没有更好/更简单的方法来实现我想要实现的目标？

谢谢

菲尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:27:27.980

无法轻易覆盖“添加文本”标签。但是你可以在 tcdl:ComponentField 标签之前输出你想要的标签。

例如：

```
<div>Summary: <tcdl:ComponentField name="Summary"></tcdl:ComponentField></div> 
```

# php - php - 带有结束针的 strstr

> ID：12050673
> 
> 赞同：1
> 
> 时间：2012-08-21T08:11:30.977
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)
> [PHP - 通过搜索字符而不是计算字符来获取字符串的一部分？](https://stackoverflow.com/questions/3969907/php-get-part-of-string-by-searching-for-characters-instead-of-counting-them)

我有一个字符串：

```
$str = "hello world, this is mars" 
```

我想要一个改进的 strstr ，看起来像这样：

```
istrstr($str, 'world', 'is') 
```

返回值将是：

```
"world, this" 
```

换句话说，有一根针开始，一根针结束。

我只是想知道是否已经有解决方案，或者我应该自己写一个......

更新：

根据我做了这个功能的答案：

```
function istrstr($haystack, $needle_start, $needle_end, $include = false) {

    if (!$include) {
        $pos_start = strpos($haystack, $needle_start) + strlen($needle_start);
        $pos_end = strpos($haystack, $needle_end, $pos_start);
        return substr($haystack, $pos_start, $pos_end - $pos_start);
    }

} 
```

现在我只需要排除版本，所以我没有费心去做包括一个......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T08:15:05.923

```
function from_to($str, $from, $to) {
    return substr(
        $str,
        strpos($str, $from),
        strpos($str, $to) - strpos($str, $from) + strlen($to)
    );
} 
```

这是基本的字符串操作。请多阅读手册。

* * *

关闭所有边缘情况的更强大的解决方案（并包括文档）：

```
<?php

/**
 * @param string $string  The string to match against
 * @param string $from    Starting substring, from here
 * @param string $to      Ending substring, to here
 *
 * @return string         Substring containing all the letters from $from to $to inclusive.
 * @throws Exception      In case of $to being found before $from
 */
function from_to($string, $from, $to) {
    //Calculate where each substring is found inside of $string
    $pos_from = strpos($string, $from);
    $pos_to   = strpos($string, $to);

    //The function will break if $to appears before $from, throw an exception.
    if ($pos_from > $pos_to) {
        throw new Exception("'$from' ($pos_from) appears before '$to' ($pos_to)");
    }

    return substr(
        $string,
        $pos_from, //From where the $from starts (first character of $from)
        $pos_to - $pos_from + strlen($to) //To where the $to ends. (last character of $to)
    );
}

$str = "hello world, and this not foo is mars";
try {
    echo from_to($str, 'world', 'hell');
}
catch (Exception $e) {
    //In case 'hell' appeared before 'world'
    echo from_to($str, 'hell', 'world');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:26:20.103

```
function istrstr($haystack, $needle1, $needle2) {
    $pos1=strpos($haystack,$needle1);
    $pos2=strpos($haystack,$needle2);
    return substr($haystack, $pos1, $pos2-$pos1+strlen($needle2));
}
$str = "hello world, this is mars";
echo istrstr($str, 'world', 'is'); 
```

虽然这会返回，因为上面句子中`world, this`的第一个实例位于单词 的第 15 位。`is``this`

编辑：

我会推荐正则表达式，正如上面@Nanne 评论的那样，以使你有一个`$needle2`不在一个词中的词，如果那是你所追求的？

# html - 有什么工具可以检查 .mht 文件的格式吗？

> ID：12050674
> 
> 赞同：1
> 
> 时间：2012-08-21T08:11:32.287
> 
> 标签：html, internet-explorer, format, mhtml

我有一个将近 20M 的 .mht 文件，它是由 TestComplete 在自动化测试期间生成的。批处理方式生成的文件无法被IE打开。该节点似乎是正确的，但页面上没有显示任何内容。但是，如果我在 GUI 中从 TestComplete 生成一个 .mht 文件，我可以在 IE 中打开它。

由于 IE 在没有显示任何内容时没有告诉我更多详细信息，因此我试图找到一些工具包来帮助我识别 .mht 文件中的问题。

（我试图逐行比较 2 个 .mht 文件，但没什么特别的。）

PS：我尝试使用 Firefox UnMHT 插件打开损坏的 2 个文件，并使用 Firebug 查看源代码：

好的是正确解析主要内容：

```
<div src="unmht:///file.5/D:/workspace/test_result.mht/root.xml" id="logroot" style="width: 1430px; height: 472px;"> 
```

坏的没有正确解析：

```
<div src="http://localhost/root.xml" id="logroot"></div> 
```

# html - 一种在内联 css 中隐藏 HTML 电子邮件中的表格的方法 - 仅稍后通过媒体查询显示它们

> ID：12050675
> 
> 赞同：6
> 
> 时间：2012-08-21T08:11:40.680
> 
> 标签：html, css, email, media-queries, html-email

我正在开发我的第一个电子邮件移动模板，使用媒体查询。到目前为止一切顺利，媒体查询很酷，从现在开始我肯定会在我的网页设计项目中使用它。

但是，我遇到了一个困难；我有一个非常复杂的标题设计（背景图片带有 Facebook 和 youtube 徽标，链接到相应的页面），所以它以特定的方式切片。这使得制作移动版本不太容易，我想也许我可以用不同的方式修复它：使用两个不同的标题表，一个在大型设备上显示，一个在小型设备上显示。

移动部分没有问题，因为它们很好地解释了嵌入式 CSS。

但我似乎无法为其他邮件客户端隐藏完整的表格。我试过 display:none, position:absolute with top and left -9999px 等...

有人对此有解决方案吗？这会节省我很多时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T16:27:21.717

好的，我似乎自己找到了解决方案：

内联，在表格内要隐藏在普通非移动版本中的元素上，我放置了以下属性：

```
line-height:0px;
font-size:0px;
height:0px;
margin:0;
padding:0; 
```

我现在正在用一张在 td 内有一个 tr、一个 td 和一个 p 的表对其进行测试。

我将这些属性放在几乎每个元素上：

```
<table cellpadding="0" cellspacing="0" border="0" align="center" id="hidden">
  <tr class="showmobile" style="line-height:0px;font-size:0px;height:0px;margin:0;padding:0;">
    <td class="showmobile" style="line-height:0px;font-size:0px;height:0px;margin:0;padding:0;">
       <p class="showmobile" style="color:White; line-height:0px;font-size:0px;height:0px;margin:0;padding:0;">Testing this shiznit</p>
    </td>
  </tr>
</table> 
```

我还给这些元素一个类“showmobile”，我在头部的内部样式表中像这样操作它：

```
tr[class="showmobile"]
        {
         line-height:125% !important;
         font-size:16px !important;
         height:30px !important;   
        }

td[class="showmobile"]
        {
         line-height:125% !important;
         font-size:16px !important;
         height:30px !important;   
        }

p[class="showmobile"]
        {
         line-height:125% !important;
         font-size:16px !important;
         height:30px !important;   
        } 
```

这种选择课程的方式，我从很棒的 html 电子邮件样板 @ [http://htmlemailboilerplate.com/](http://htmlemailboilerplate.com/) -> 链接到这篇文章： http: [//www.campaignmonitor.com/blog/post/3457/media-query -issues-in-yahoo-mail-mobile-email/](http://www.campaignmonitor.com/blog/post/3457/media-query-issues-in-yahoo-mail-mobile-email/) -> 基本上，它使雅虎邮件运行良好，并且在不需要时不会在媒体查询中应用 CSS。

**结论：**我已经在四个平台上对其进行了测试：GMail、Outlook 2010、Lotus Notes（我知道！）和 iPhone 3G。它们都给出了预期的结果，除了 Outlook，它仍然显示 1 像素线。使用一些智能内容（将文本着色以在背景中上升），这是非常可隐藏的。

如果我遇到某些邮件客户端的任何问题，我会及时通知你们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T18:23:35.673

将表格放在 div html 标记中，并将其样式添加为**display:none !important**在媒体查询中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T04:37:48.147

经过一番战斗，我能够想出这个。

*   你不能使用高度。Gmail 将其替换为最小高度。
*   与背景颜色和文字不完全匹配
*   图像需要制作 1px 的高度和宽度，然后使用媒体查询放大
*   您仍然可能会在 gmail 的屏幕上显示一些元素 - 尝试使它们尽可能不引人注意

CSS：

```
@media all and (max-width: 480px) {
  .mobile-hide {
     width:1px !important; 
     display:none !important; 
     color:#fff;
  }
  .mobile-show {
     display:block !important;
     line-height:125% !important;
     font-size:14px !important;
     height:auto !important; 
     color:#666 !important;
  }
  .mobile-image {
     width:350px !important;
     height:446px !important;
  }
  .w800 {width:400px !important;}
} 
```

的HTML：

```
<table class="w800" width="800">
...
<tr><td>
<a href="http://mylink"><img src="image.jpg" width="300" height="300" border="0" alt="My Sweet Image" /></a>
</td>

<!-- a big fat image on the right for big screens only -->
<td class="mobile-hide">
<img class="mobile-hide" src="image2.jpg" width="450" height="500" border="0" alt="" />
<span class="mobile-hide">
My Text with a <a href="http://mylink" class="mobile-hide">link</a></span>
</td></tr>
...
</table>

<!-- a new table at the bottom for small screens only, "one column" -->
<table width="400" style="width:400px; margin:0 auto;">
<tr><td class="mobile-show" style="line-height:0px;font-size:0px;height:0px;margin:0;padding:0;">
<img class="mobile-image" src="image2.jpg" width="1" height="1" border="0" alt="" />
<span class="mobile-show" style="font-size:1px; color:#ffe;">
My Text with a <a href="http://mylink" style="text-decoration:none; color:#ffe;" class="mobile-show">link</a></span>
</td></tr>
</table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-05T14:19:06.080

你需要设置：

```
style="vertical-align:top;line-height:0px;font-size:0px;height:0px;margin:0;padding:0;mso-hide:all;" 
```

这将为您提供跨多个电子邮件应用程序的最大隐身性，然后您可以使用媒体查询来反转效果。

litmus.com 可以作为一个很好的工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T00:04:31.857

我提出了一个稍微优雅的解决方案，它似乎适用于所有流行的 webmail 和桌面电子邮件客户端，除了 Lotus Notes 6 和 7（可以预见）。开始了：

```
<style> 
   @media only screen and (max-width: 480px) { 
      .invisible { max-height: none !important; font-size: 12px !important; display: block !important; }
   }

   ...

   .invisible { max-height: 0px; font-size: 0; display: none; }
</style> 
```

[这是我的结果](http://conference.createsend.com/screens/r/FC7EAD3C7CCC34D2)——你认为这也是一个可行的解决方案吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-24T08:13:26.640

这是我用来隐藏和显示内容的 html 电子邮件。基本的、易于理解的“移动”和“桌面”类。'Mobile' 仅适用于移动设备。“桌面”仅用于桌面显示。

```
*[class=mobile]{display:none;}

@media only screen and (max-width:600px) { 
    *[class=desktop]{display:none !important;}
    *[class=mobile]{display:block !important;width:auto !important;max-height:inherit !important;overflow:visible !important;float:none !important;}
    *[class="block"]{display:block !important;padding:5px;}
} 
```

但是，如果您希望在 Outlook 和 Gmail 中让您的电子邮件能够像您希望的那样工作，那么您必须走得更远一些。无论如何，这些电子邮件客户端都将显示桌面版本。但是您不希望他们显示移动内容，因此将所有移动内容包装在下面示例中显示的条件注释中。这将为您介绍 Outlook。

要让 Gmail 正常运行，您需要将所有元素归零并在 CSS 中扩展它们，无论如何 Gmail 将完全忽略这些元素。您不希望 Gmail 显示的所有内联内容都应该是 width: 0;max-height: 0;overflow: hidden;

这就是 CSS（上面的示例）发挥作用的时候。媒体查询中的第二个类声明将您的块扩展为适合在移动设备上显示的大小，而 Gmail 将其隐藏。

```
<!--[if !mso]><!-->
<td class="mobile" style="width: 0;max-height: 0;overflow: hidden;">
    <img alt="" border="0" src="http://www.placehold.it/150x150" style="display:block;" width="100%">
</td>
<!--<![endif]--> 
```

最后但并非最不重要的一点是，这最后一部分尚未经过测试。我一直无法让 Windows Mobile 隐藏我希望它隐藏的内容。我认为详细说明我的条件注释包装将通过将其更改为这样来解决问题：

```
<!--[if !mso]><!--><![if !IEMobile]>
<td class="mobile" style="width: 0;max-height: 0;overflow: hidden;">
    <img alt="" border="0" src="http://www.placehold.it/150x150" style="display:block;" width="100%">
<![endif]><!--<![endif]--> 
```

但同样，这最后一部分我还没有测试过，实际上明天会测试，但如果有人想详细说明 Windows Mobile，请做。我已经彻底测试过的所有其他内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-07T00:50:22.787

`display:none`被gmail剥夺了！

要从 gmail 中隐藏表格，请将其显示为高度为零的**块**：将每个表格的内联样式设置为：`display:block; overflow:hidden; height: 0; max-height: 0;`

**请记住**将内联样式也应用于隐藏表的任何子表。覆盖类`phoneTableOnly`只需要在父表上。

下面的示例将仅显示支持最大宽度为 640 像素的媒体查询的设备上的表格。非常适合您不想在台式机和 gmail 上显示的仅限移动设备的菜单。

```
<style type="text/css">
    /*Note: This stylesheet is ignored by gmail.*/
    @media only screen and (max-width: 640px) {
        /*Restore tables:*/
        table[class="phoneTabletOnly"], table[class="phoneTabletOnly"] table {
            display: table !important;
            overflow: visible !important;
            height: auto !important;
            max-height: none !important;
        }
    }
</style>

<table width="100%" cellpadding="0" cellspacing="0" border="0" class="phoneTabletOnly" style="display:block; overflow:hidden; height: 0; max-height: 0;">
<tbody>
  <tr>
     <td>
        <table cellpadding="0" cellspacing="0" border="0" style="display:block; overflow:hidden; height: 0; max-height: 0;">
           <tbody>
              <tr>
                 <td>
                    This will be hidden in gmail.
                 </td>
              </tr>
           </tbody>
        </table>
        <table cellpadding="0" cellspacing="0" border="0" style="display:block; overflow:hidden; height: 0; max-height: 0;">
           <tbody>
              <tr>
                 <td>
                    This will also be hidden in gmail.
                 </td>
              </tr>
           </tbody>
        </table>
     </td>
  </tr>
</tbody>
</table> 
```

PS。在石蕊试纸中测试。

# opengl - OpenGL Shader 阻止优化器移除属性/制服

> ID：12050681
> 
> 赞同：6
> 
> 时间：2012-08-21T08:12:18.280
> 
> 标签：opengl

有什么方法可以防止着色器编译器删除它检测为未使用的统一/属性？我偶尔会注释掉我的着色器的一部分进行测试，但这会导致我程序的其余部分出现问题，因为突然某些名称不再存在（从而导致查找错误，并在尝试设置值时出错）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:32:02.443

不，但这不是绝对必要的，具体取决于您编写代码的方式。

这些`glUniform*`函数将很高兴地采用统一的 -1 位置。如果您使用的是 program_pack420 和 explicit_attrib_location，您可以将属性索引、片段着色器输出、UBO 绑定和纹理单元绑定都放在着色器中。因此，您不必查询活动属性、输出、统一块或采样器。

请注意，我们在 GL 4.3 中也有[ARB_explicit_uniform_location 。](https://www.opengl.org/wiki/Explicit_Uniform_Location)所以你可以在着色器中指定它们，它们不会被优化掉。

> 程序的其余部分需要该属性才能工作，否则它会被一堆 if 语句乱扔——我试图避免这种情况。

遇到这种情况的唯一原因是，如果您没有自己提供 OpenGL 属性索引，无论是使用 explicit_attrib_location 还是使用`glBindAttribLocation`预链接调用。那是*糟糕*的编码，你不应该那样做。

总是告诉 OpenGL 你的属性位置是什么。除非您正在编写着色器内省工具，否则您永远不应该查询它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-10T13:46:02.487

我通常使用返回的 -1`glGetUniformLocation`来检测错误。所以我认为吞下-1不是一个好主意。我找到了一个棘手的解决方案来解决这个问题。我将所有统一变量加到一个标识符中，并将这个统一总和分配给 a 之前的输出颜色`if(condition)`。例如：

```
if(condition)
{
    outputColor = uniformSum;
} 
```

而如果你让`conditioin`总是为假的，比如编码`if(val < 0)`而`val`总是为正的，那么你可以避免编译器优化掉统一变量。

# c++ - 稍后调用函数

> ID：12050684
> 
> 赞同：1
> 
> 时间：2012-08-21T08:12:26.920
> 
> 标签：c++

作为示例，我正在解析用户输入并执行以下操作：

**用户输入 1：**

```
Array<int> a;
Populate()(a);
int v = 10;
a.append(v); 
```

**用户输入 2：**

```
Array<bool> a;
Populate()(a);
int v = true;
a.remove(v); 
```

**用户输入 3：**

```
Array<bool> a;
Populate()(a);
a.removeAll(); 
```

现在假设我希望在稍后阶段执行这些函数，以便解析创建 Array 对象，建立为此 Array(removeAll 等) 以及参数执行的命令，但实际上并不调用命令- 这个调用发生在稍后的阶段。

是否有 std 或 boost 库可以帮助我实现这种行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T08:19:08.737

在 C++11 中，您可以记住以下操作`std::function`：

```
std::function<void()> action;
Array<int> a;

Populate()(a);
int v = 10;
action = [&a,v] () { a.append(v); }; 
```

请注意，当您调用该操作时，它将在您提供给它的确切数组上工作（它是通过引用捕获的），因此请确保该对象仍然存在！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:21:16.173

在 C++11 中，您可以使用[std::function](http://en.cppreference.com/w/cpp/utility/functional/function)和[std::bind](http://en.cppreference.com/w/cpp/utility/functional/bind)来存储以后可以调用的函数对象。在 C++03 中，您可以使用[boost::function](http://www.boost.org/doc/libs/1_51_0/doc/html/function.html)和[boost::bind](http://www.boost.org/doc/libs/1_51_0/libs/bind/bind.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:16:57.327

只需对您的 3 个函数进行编程，并根据用户对函数指针的输入分配其中一个函数。稍后您只需调用函数指针。

# ruby-on-rails - Ruby未定义的哈希方法

> ID：12050685
> 
> 赞同：1
> 
> 时间：2012-08-21T08:12:49.323
> 
> 标签：ruby-on-rails, hash

我正在尝试使用以下代码将一个条目（已从键盘读取）添加到 Ruby 哈希中：

```
if schemes.has_key?(schemeName)
   puts "This scheme has already been added "
 else
   schemes.add(schemeName)
 end 
```

'schemes' 是我的哈希的名称，'schemeName' 是我存储用户输入的数据的变量。但是，出于某种原因，我收到一条错误消息，说“添加”是一个未定义的方法……我认为这是哈希数据类型的内置方法？

我的课的完整代码是：

```
class CourseModules
# To change this template use File | Settings | File Templates.
@@moduleScheme = nil
@@moduleYear = nil
#@moduleTitle = ""
@noOfModulesInScheme = 0

def self.moduleYear
 @@moduleYear
end

def initialize(v)
 @val = v
end
# Set and get the @val object value
def set (v)
 @val = v
end
def get
 return @val
end

def addModule
 moduleName = Module.new(30)
 moduleRefNo = Random(100)
 #moduleTitle = @moduleTitle
 moduleYear(4)

 print "What is the name of the module you would like to add?"
 moduleName = gets
 moduleRefNo
 printf "Which year does the module belong to?"
 @@moduleYear = gets
 puts "#{moduleName}, belonging to #{@@moduleYear} has been added to the system, with reference number #{moduleRefNo}."
 navigateTo Application

end

def self.addModuleToScheme
=begin
Create an empty hash for the schemes
=end
 schemes = Hash.new()
=begin
Allow user to enter scheme names into a set of variables, and use each scheme name as a hash/ array of modules.
Then allow the user to enter the the modules for each scheme into each of the hashes

Create specific hash elements by using the following line:
schemes = {:scheme1 => scheme1variable, :scheme2 => scheme2variable}
=end

 puts "What is the name of the scheme that you would like to add a module to? "
 schemeName = gets
=begin
Need to use an if statement here to check whether or not the scheme already exists, if it doesn't, create it, if it does,
tell the user that it does.
=end
 if schemes.has_key?(schemeName)
   puts "This scheme has already been added "
 else
   schemes.add(schemeName)
 end

 noOfModulesInScheme + 1
 moduleName.moduleScheme = schemeName
end
def removeModuleFromScheme
 moduleName.moduleScheme = nil
end

def queryModule

end

end 
```

有人能指出为什么我得到一个未定义的方法错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:20:12.867

哈希没有`add`方法（[请参见此处](http://ruby-doc.org/core-1.9.3/Hash.html)）。它确实`store`需要一个键和值对，因此您的代码可能如下所示：

```
if schemes.has_key?(schemeName)
   puts "This scheme has already been added "
else
   schemes.store(schemeName, scheme)
end 
```

# c# - windows vista 及更高版本的任务栏右键单击应用程序上下文菜单

> ID：12050692
> 
> 赞同：2
> 
> 时间：2012-08-21T08:13:11.027
> 
> 标签：c#, taskbar, windows-messages

我需要知道 C# 中 windows vista 和更高版本的任务栏右键单击应用程序上下文菜单的代码。对于旧版本的 Windows，此代码为 0x313。在 vista 及更高版本中，此代码意味着 shift + 右键单击​​。我只能在任务栏的应用程序上下文菜单中找到右键单击的代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-21T08:17:59.493

您正在寻找的是 [关联上下文菜单与 Windows 窗体 NotifyIcon 组件](http://msdn.microsoft.com/en-us/library/aa984293%28v=vs.71%29.aspx)

> Windows 窗体 NotifyIcon 组件在任务栏的状态通知区域中显示一个图标。通常，应用程序允许您右键单击此图标以向它所代表的应用程序发送命令。通过将 ContextMenu 组件与 NotifyIcon 组件相关联，您可以将此功能添加到您的应用程序中。

```
public NotifyIcon notifyIcon1 = new NotifyIcon();
public ContextMenu contextMenu1 = new ContextMenu();

public void createIconMenuStructure()
{
   // Add menu items to context menu.
   contextMenu1.MenuItems.Add("&Open Application");
   contextMenu1.MenuItems.Add("S&uspend Application");
   contextMenu1.MenuItems.Add("E&xit");

   // Set properties of NotifyIcon component.
   notifyIcon1.Visible = true;
   notifyIcon1.Icon = new System.Drawing.Icon
      (System.Environment.GetFolderPath
      (System.Environment.SpecialFolder.Personal)
      + @"\Icon.ico");
   notifyIcon1.Text = "Right-click me!";
   notifyIcon1.ContextMenu = contextMenu1;
} 
```

# objective-c - 在自定义单元格中显示文本

> ID：12050696
> 
> 赞同：0
> 
> 时间：2012-08-21T08:13:23.417
> 
> 标签：objective-c, uitableview, custom-cell

我在 UITableView 中有一个自定义单元格。我已将其连接到身份检查器中的类（DocumentCell）。 DocumentCell.h 类如下所示：

```
@interface DocumentCell : UITableViewCell
   @property(nonatomic,retain) IBOutlet UILabel *lblDocName;
@end 
```

DocumentCell.m 文件如下所示：

```
@implementation DocumentCell

@synthesize lblDocName;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];
}
@end 
```

这是“cellForRowAtIndexPath”的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //static NSString *CellIdentifier = @"DocumentCell";
    DocumentCell *cell = [tableView dequeueReusableCellWithIdentifier:@"DocumentCell"];

    if (cell == nil)
    {
        cell = [[[DocumentCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"DocumentCell"] autorelease];

    }
    NSLog(@"cell text=%@",[self.myDocList objectAtIndex:indexPath.row]);
    cell.lblDocName.text = [self.myDocList objectAtIndex:indexPath.row];
    return cell;
} 
```

我正在使用情节提要。我已经用标签为单元格连接了 IBOutlet。NSLog 语句显示了应该显示的文本，但实际的表格没有显示单元格中的文本。有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:28:48.307

有几件事要检查：

*   进入自定义单元格 NIB (DocumentCell)，并检查您是否已将自定义单元格的“自定义类”设置为 DocumentCell，并且它不是默认的 UITableViewCell 类。您需要在 NIB 的 UITableViewCell 级别执行此操作，“文件所有者”类应该是 NSObject。（我想你说你已经做到了，但值得检查）

*   检查您是否已将 lblDocName 标签连接到相应的 IBOutlet。

# java - JPanel 和 java g.fillOval() 方法发生了一些奇怪的事情

> ID：12050698
> 
> 赞同：0
> 
> 时间：2012-08-21T08:13:29.263
> 
> 标签：java, graphics, colors, jpanel

我正在使用 Graphics 在 JPanel 上绘制椭圆。最低的椭圆形正在发生一些事情，它不是保持一种颜色，而是在椭圆形上呈条纹状的多种颜色。其他椭圆不会发生这种情况。

我的 JFrame 大小是 600 x 600。这是我的代码：

```
package virus;

import javax.swing.JPanel;
import java.awt.Graphics;
import java.awt.Color;
import java.awt.event.MouseListener;
import java.util.Random;

public class VirusGamePanel extends JPanel {
    private static final long serialVersionUID = 1L;
    Random colour = new Random();
    int score = 0;

    public void paint(Graphics g)
    {
        super.paint(g);
        g.setColor(Color.magenta);
        g.drawString("Score: "+ score,200,200);
        g.setColor(Color.orange);
        g.drawOval(200,150,200,200);
        Color rand = new Color(colour.nextInt(255),colour.nextInt(255),colour.nextInt(255));
        g.setColor(rand);
        g.fillOval(270,50,50,50);
        g.fillOval(100,100,50,50);
        g.fillOval(450,100,50,50);//this line is causing the problem
        g.fillOval(100,400,50,50);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:50:08.543

我写了一个小测试程序，在 JFrame 中绘制你的面板，对我来说一切都很好（我没有条纹）。我正在使用 Java 7。也许你的错误在你程序的其他部分:)。

你在这个程序中遇到同样的错误吗？

```
import javax.swing.*;    
import java.awt.*;
import java.util.Random;

public class VirusGamePanel extends JPanel {
    private static final long serialVersionUID = 1L;
    Random colour = new Random();
    int score = 0;

    public void paint(Graphics g)
    {
        super.paint(g);
        g.setColor(Color.magenta);
        g.drawString("Score: "+ score,200,200);
        g.setColor(Color.orange);
        g.drawOval(200,150,200,200);
        Color rand = new Color(colour.nextInt(255),colour.nextInt(255),colour.nextInt(255));
        g.setColor(rand);
        g.fillOval(270,50,50,50);
        g.fillOval(100,100,50,50);
        g.fillOval(450,100,50,50);//this line is causing the problem
        g.fillOval(100,400,50,50);
    }

    public static void main(String[] args) {
        JFrame f=new JFrame();
        f.setSize(600,600);
        f.add(new VirusGamePanel());
        f.setVisible(true);

    }
} 
```

# android - 如何在 Android 中计算带有密钥的字符串的 SHA-256 哈希？

> ID：12050700
> 
> 赞同：6
> 
> 时间：2012-08-21T08:13:40.010
> 
> 标签：android, hash, sha256

我需要使用密钥计算字符串的 SHA-256 哈希。我找到了这段代码：

```
public String computeHash(String input)
    throws NoSuchAlgorithmException, UnsupportedEncodingException
{
    MessageDigest digest = MessageDigest.getInstance("SHA-256");
    digest.reset();

    byte[] byteData = digest.digest(input.getBytes("UTF-8"));
    StringBuffer sb = new StringBuffer();

    for (int i = 0; i < byteData.length; i++) {
        sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
    }
    return sb.toString();
} 
```

用于在没有密钥的情况下计算哈希。如何使用密钥进行计算？我进行了搜索，但在 Android 中没有找到任何解决方案。任何想法 ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-21T08:23:19.717

看看这个例子。

```
/**
 * Encryption of a given text using the provided secretKey
 * 
 * @param text
 * @param secretKey
 * @return the encoded string
 * @throws SignatureException
 */
public static String hashMac(String text, String secretKey)
  throws SignatureException {

 try {
  Key sk = new SecretKeySpec(secretKey.getBytes(), HASH_ALGORITHM);
  Mac mac = Mac.getInstance(sk.getAlgorithm());
  mac.init(sk);
  final byte[] hmac = mac.doFinal(text.getBytes());
  return toHexString(hmac);
 } catch (NoSuchAlgorithmException e1) {
  // throw an exception or pick a different encryption method
  throw new SignatureException(
    "error building signature, no such algorithm in device "
      + HASH_ALGORITHM);
 } catch (InvalidKeyException e) {
  throw new SignatureException(
    "error building signature, invalid key " + HASH_ALGORITHM);
 }
} 
```

其中 HASH_ALGORITHM 定义为：

```
private static final String HASH_ALGORITHM = "HmacSHA256";

public static String toHexString(byte[] bytes) {  
    StringBuilder sb = new StringBuilder(bytes.length * 2);  

    Formatter formatter = new Formatter(sb);  
    for (byte b : bytes) {  
        formatter.format("%02x", b);  
    }  

    return sb.toString();  
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-06-21T08:46:04.530

使用下面的代码，

```
/**
 * Returns a hexadecimal encoded SHA-256 hash for the input String.
 * @param data
 * @return
 */
private static String getSHA256Hash(String data) {
    String result = null;
    try {
        MessageDigest digest = MessageDigest.getInstance("SHA-256");
        byte[] hash = digest.digest(data.getBytes("UTF-8"));
        return bytesToHex(hash); // make it printable
    }catch(Exception ex) {
        ex.printStackTrace();
    }
    return result;
}

/**
 * Use javax.xml.bind.DatatypeConverter class in JDK
 * to convert byte array to a hexadecimal string. Note that this generates hexadecimal in upper case.
 * @param hash
 * @return
 */
private static String  bytesToHex(byte[] hash) {
    return DatatypeConverter.printHexBinary(hash);
} 
```

要使用 DatatypeConverter，请从以下链接下载 jar 文件。

[http://www.java2s.com/Code/Jar/j/Downloadjavaxxmlbindjar.htm](http://www.java2s.com/Code/Jar/j/Downloadjavaxxmlbindjar.htm)

# node.js - Node.js 能否完全替代 Apache 或 NGINX 等解决方案？

> ID：12050704
> 
> 赞同：37
> 
> 时间：2012-08-21T08:13:53.547
> 
> 标签：node.js

关于部署 Node.js 应用程序，我已经看到很多教程显示它与 Nginx 并排部署，或多或少有一些漂亮的技巧可以让两者一起工作（还有烦人的东西，比如 Nginx 不支持 WebSockets） . 这对我来说似乎有点复杂......

为什么每个人都做这种设置？拥有 Node.js 时部署 Nginx 有什么优势吗？你不能用 Node.js 提供静态文件吗？

我在 Django 中编写了很多应用程序，文档说你不应该使用 Django 来提供静态文件，因为它没有针对这个等等进行优化......所以我想也许这就是原因。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-21T08:28:28.393

Apache 和 NGINX 都是完全开发的 Web 服务器，提供许多开箱即用的模块和服务。它们被认为是强大的，并且已经证明了几年的稳定性。

有了这种可用的解决方案，就没有必要重新发明轮子了。使用 NGINX 实现负载均衡器和路由而不将 NodeJS 暴露在外部并仅在 localhost 上运行它会更有益。

NodeJS 不能被视为服务器软件，而仅仅是 JavaScript 引擎加上库/模块。它大量用于服务器脚本这一事实并不能使它成为 Web 服务器。

如果您决定忽略上述内容并完全切换到 NodeJS，我建议您考虑维护这样的解决方案。日志记录、启动/关闭脚本和监控会使任务比看起来更复杂。

此外，许多为 NodeJS 编写的库往往会因交付的新版本而中断，因为 NodeJS 引入了重大更改。将其视为缺乏成熟的代价。如果您愿意承担风险并且不怕问题，请选择 NodeJS。

*最后一点：静态文件可以用 NodeJS 提供。您的脚本可能会读取它并将其推出。*

更新：如果您决定使用 Node.js，请考虑使用 Express.js 框架。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-21T08:18:07.203

好吧，有些人不介意使用 Node 代替 nginx。[dotCloud](http://dotcloud.com)或[Nodejistu](http://www.nodejit.su)等某些云使用完全用 Node.js 编写的网关。主要是为了能够处理 websockets。但也因为 Node.js 非常快。

这是最近开源的dotCloud的网关[https://github.com/dotcloud/hipache](https://github.com/dotcloud/hipache)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T08:34:22.900

我更喜欢只使用 node.js 来完成整个事情。这样做的原因是，许多节点应用程序都有内置的文件服务器或依赖于为其文件提供服务的服务器。因此，每个应用程序都可以使用最适合的文件服务器，并可以根据需要对其进行自定义。

此外，当您必须将来自 Apache/NGINX 的每个请求代理到 node.js 时，您会损失一些性能。让节点自己处理请求要简单得多。

# ios - 如何将用户的 facebook 帐户与我的应用程序中的帐户连接起来？

> ID：12050706
> 
> 赞同：1
> 
> 时间：2012-08-21T08:14:07.373
> 
> 标签：ios, facebook

我想增加通过 facebook 帐户使用我的应用程序的可能性。我应该提出什么要求才能使它成为可能？
例如，我在我的网站上创建了一个帐户，所以

1.  我应该将它与我的 Facebook 帐户关联，并且
2.  在我的应用程序的登录流程中了解，这个 facebook 的帐户基本上是我网站的帐户。

怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:18:22.863

这种机制称为 Facebook 连接（或单点登录 = SSO）。Facebook 提供 API 以将常规网站和 iOS 应用程序连接到 Facebook 帐户。Facebook 提供了一些优秀的文档，这里是他们的 iOS 文档，例如：http: [//developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)

Facebook Connect 为您提供两个主要功能：

1.  让用户使用他们的 Facebook 帐户登录您的网站/应用程序。这意味着如果他们已经在 Facebook 注册，他们不需要单独注册您的服务。

2.  一旦他们与 Facebook 建立联系，网站/应用程序所有者就会收到一个令牌，让您可以访问有关用户的一些信息。例如，查看用户的姓名、Facebook 照片、电子邮件地址，并且在某些情况下还授予在该用户的 Facebook 墙上发帖的权限。

让我们回顾一下网站的不同可能流程：

1.  用户已经在您的网站上注册了自己的帐户，您也让他将他们的帐户连接到他们的 Facebook 帐户。

2.  用户没有在您的网站上注册自己的帐户。相反，他使用他的 Facebook 帐户登录您的网站。一旦你注意到这个新用户登录，你会自动为他创建一个新帐户，并从他们的 Facebook 个人资料中获取信息（例如电子邮件地址）。

应用程序的流程几乎相同。应用程序的主要好处是人们不喜欢注册应用程序。用户不喜欢太多的用户名和密码。如果您允许他们使用现有的 Facebook 帐户而不是创建新帐户，您可能会有更多的登录用户。

# iphone - 使用类别扩展 searchResultsTableView

> ID：12050712
> 
> 赞同：0
> 
> 时间：2012-08-21T08:14:42.860
> 
> 标签：iphone, objective-c, objective-c-category

# 导入“UITableView+hideSeparators.h”

我为 UITableView 创建了一个类别。这使我可以隐藏其上的分隔符，但是我的理解是导入此类别会使文件中的所有 UITableView 具有导入的方法？

```
[self hideSeparators]; 
```

这有效，但

```
[[[self searchDisplayController] searchResultsTableView] hideSeparators]; 
```

生产

```
No visible @interface for 'UITableView' declares the selector 'hideSeparators' 
```

为什么类别适用于 TableView 而不适用于 searchResultsTableView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:23:14.193

你真的需要一个类别来隐藏分隔符吗？为什么你不能只是尝试一些东西

```
[[self searchDisplayController] searchResultsTableView].separatorColor = [UIColor clearColor] 
```

# c - 在 DOS 模式下实现消息信号中断

> ID：12050717
> 
> 赞同：3
> 
> 时间：2012-08-21T08:15:07.813
> 
> 标签：c, dos, interrupt, pci, apic

我有点卡在编程设备**MSI（消息信号中断）**上，欢迎任何指针...... *（我的环境是 Watcom C + DOS/32a - dos 扩展器，在**平面**模式下......）*

**@** PIC(8259) 模式对我来说没问题...

我在下面列出了我所做的事情，也许有人可以帮助澄清这些......谢谢！

**(1)**多消息启用 = 0（对于单个 MSI 设置此字段 = 0；MMC = 100b）

**(2)** MSI能力中的MSI消息地址寄存器

*   位[31:20] = 0xFEE
*   bit[19:12] = 0（目标 ID，并找到本地 APIC ID = 0...）
*   bit3 = 0（重定向提示 = 0）
*   bit2 = 0（目标模式，不关心，因为 RH = 0）

**(3)** MSI能力中的MSI消息数据寄存器

*   bit15 = 0（触发模式 = 边沿）
*   bit14 = 0（触发电平，如果触发模式 = 边沿则忽略）
*   位[10:8] = 000（传送模式 = 固定）
*   bit[7:0] = 0x20（向量，我选择使用0x20）

**(4)**最后通过设置 MSICAP.MC.MSIE = 1 来启用 MSI

1.  我已经大致阅读了文档（第 10 章）[http://download.intel.com/products/processor/manual/253668.pdf](http://download.intel.com/products/processor/manual/253668.pdf)
2.  我认为没有必要对 IO APIC 和本地 APIC 寄存器进行编程，因为 MSI 不会路由到 APIC 系统......！

***当前状态：***启用 MSIE = 1 后发现系统挂起，设备通过 MSI 产生中断！

*注意：*在上面的序列中，**没有安装服务例程，**因为我不知道该怎么做......（这是我的应用程序挂起的原因吗？）

谢谢 ！

**[20120822 更新]将*****Message Data***字段 中的向量设置为 0x20 时，app 挂起...但如果设置为 0x76，我发现 app 没有挂起，然后我可以检查设备是否产生中断，Local APIC 收到此中断消息如下：

1.  **对于 PCI 设备（AHCI 控制器）：**

    *   ID（中断禁用）= 0
    *   IS（中断状态）= 0
    *   MSI 上限 = 09,FEE00000,00000076
2.  **对于 AHCI HBA 寄存器：**

    *   PxIS = 00000023
    *   PxIE = 7DC0007F
    *   IS = 00000001
    *   IE 位 1 = 1

通过 1 和 2，我认为设备成功发送消息以请求服务，因为：

*   IS bit0 = 1（端口 0 有挂起的中断状态）
*   IE（中断启用）= 1
*   PCI 命令寄存器 bit10(ID) = 0
*   MSICAP.MC.MSIE = 1（至 MSI 引擎）

我还发现 LAPIC 收到了这个中断消息，因为：

*   本地 APIC IRR(中断请求寄存器) bit118(=0x76) = 1
*   本地 APIC ISR(In-Service register) bit118(=0x76) = 1

因此，设备似乎产生了中断，而本地 APIC 接收到了这个；即便如此，我的服务程序也没有被调用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:05:24.743

要在 DOS 模式下实现 MSI 功能，您可以参考以下序列：

## 检查是否启用了本地 APIC

1.  读取 CPU MSR 0x1B 并检查本地 APIC 全局启用/禁用位是否 = 1
2.  读取本地 APIC 寄存器 杂散中断向量寄存器 bit8(APIC SW enable/disable)=1

## 初始化 MSI 能力寄存器

1.  配置消息控制寄存器（例如 MME...）
2.  配置消息地址寄存器（例如目标 ID、DM 和 RH）
3.  配置消息数据寄存器（例如触发模式、断言、传递模式和向量）

## 安装您自己的服务程序

*   这取决于您使用的编译器/编程语言...
*   以 (Watcom C+Dos32a) 为例，您可以使用下面来声明和安装服务例程
*   使用 __interrupt __far 来声明和创建 YourISR
*   使用 DPMI 调用 0x204/0x205 来获取（旧）和设置（新）中断向量！

*笔记：*

1.  Message Data 寄存器中的中断向量可以是 Ex. 0x70,0x71,..., 或 0x76
2.  在 ISR 结束和返回之前，请“写入”本地 APIC 寄存器（EOI）“然后 LAPIC 将清除 In-Service Register 中的位，然后准备服务另一个中断！

## 使设备能够通过 MSI 请求服务

1.  PCI 命令寄存器 bit10(ID) = 0
2.  设备的中断允许位 = 1（设备特定）
3.  MSICAP.MC.MSIE = 1（中断路由到 MSI 引擎）

## 您可以检查设备是否生成请求并且 LAPIC 是否收到此请求

*   设备将发出 PCI DWORD 写入事务以将 32 位数据写入 32 位内存地址，因此您可以探测 LA 是否发生这种情况，或者您可以检查是否 (ID = 0 && 中断状态！= 0 && MSIE = 1)
*   检查 LAPIC 寄存器 IRR 和 ISR 以查看请求是否被 LAPIC 接收和服务！

**@ 参考：**

[Intel 64 和 IA-32 架构软件开发人员手册](http://download.intel.com/products/processor/manual/253668.pdf)

[APIC](http://wiki.osdev.org/APIC)

[PCI 本地总线规范 v2.2](http://www.ics.uci.edu/~harris/ics216/pci/PCI_22.pdf)

[访问 CPU MSR](http://wiki.osdev.org/Model_Specific_Registers)

[DOS/32 高级](http://dos32a.narechk.net/index_en.html)

# gmail - Gmail 处理哪些元数据？

> ID：12050722
> 
> 赞同：0
> 
> 时间：2012-08-21T08:15:23.460
> 
> 标签：gmail, metadata

Gmail 是否检测到任何类型的元数据（例如微格式、微数据、RDFa 等）？如果是这样，它是哪一个以及如何处理它？

# authorization - 关于权限的动态表创建：设计问题

> ID：12050723
> 
> 赞同：0
> 
> 时间：2012-08-21T08:15:23.617
> 
> 标签：authorization, user-roles

假设我有 2 个用户级别：user(u) 和 admin(a)。我想向两个用户显示一组数据，但不允许用户查看所有数据。

```
c1 | c2 | c3 | c4 |
-------------------
u/a| a  | u/a| a  | 
```

在 MVC 结构中，我必须在哪里确定需要显示哪些数据？我是否必须在控制器中检查我需要模型中的哪些数据？还是我必须获取所有 4 列并在我的视图中确定当前查看者是用户还是管理员？如果是用户，则只需显示第 1 列和第 3 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:21:32.707

It seems to me that "what to show" is more along the lines of the view responsibilities.

View requests the current users access level from model layer, and then , based on the acquired information, view requests either user or admin specific information and picks the appropriate templates for rendering the page.

# workflow - 工作流数据库架构

> ID：12050729
> 
> 赞同：2
> 
> 时间：2012-08-21T08:15:49.360
> 
> 标签：workflow

我是工作流程的初学者。

我正在尝试保存工作流的数据库设计？但在那些线上没有得到任何东西......

让我知道是否有人可以帮助我！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:21:14.250

You might want to look at implementing some kind of finite state machine

[http://en.wikipedia.org/wiki/Finite-state_machine](http://en.wikipedia.org/wiki/Finite-state_machine)

whereby you define a set of permissible stati, and assign a status to your entities in the database. So you would need something like:

1.  a table defining all stati
2.  workflows made up of (a subset) of stati
3.  a table mapping legitimate changes of state

The advantage with a FSM is that you only persist the discrete states and don't have the overhead of polling agents or processes that keep track of any "flow": the flow is derived from the states at any given point in time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-16T09:15:33.297

1.  [谷歌](https://www.google.com/search?hl=en&output=search&sclient=psy-ab&q=database%20schema%20for%20workflow&cad=h)问题
2.  至少查看[^第](https://www.exceptionnotfound.net/designing-a-workflow-engine-database-part-1-introduction-and-purpose/)[一个搜索结果](https://www.exceptionnotfound.net/designing-a-workflow-engine-database-part-1-introduction-and-purpose/)
3.  [在 github 上搜索 schema-SQL](https://github.com/search?utf8=%E2%9C%93&q=transitionid%20%20processid%20currentstateid%20nextstateid&type=Code)（因为我们很懒，理想情况下需要样本数据）

==> 动动脑筋——例如参见 [github 搜索第二页的第一个结果](https://github.com/Patilharshad09/javascriptPractice/blob/6953fdea583d30ec3f12b65dae155e8da0092feb/workFlowEngine.txt)

==> 将脚本从表变量重写为表。

下一篇：看table-data，试着了解一下系统，再看进一步的源码@github。

微软 SQL：

```
CREATE TABLE "user" 
( 
     UserId int IDENTITY(1,1) 
    ,UserName national character varying(50) 
);

INSERT INTO "user"(UserName) SELECT (N'RM Name'); 
INSERT INTO "user"(UserName) SELECT (N'Credit Name'); 
INSERT INTO "user"(UserName) SELECT (N'Legal Name'); 
INSERT INTO "user"(UserName) SELECT (N'HOD Name'); 
-- SELECT * FROM user

CREATE TABLE process 
( 
     processId int IDENTITY(1,1) 
    ,processName national character varying(50) 
)
INSERT INTO process(processName) 
SELECT (N'Loan Approval'); 

-- SELECT * FROM process;

CREATE TABLE Request 
( 
     requestId int IDENTITY(1,1)
    ,processId int
    ,title national character varying(300)
    ,Daterequested datetime default CURRENT_TIMESTAMP
    ,UserId int
    ,CurrentStateId int 
); 

-- Insert part of Process
INSERT INTO Request(processId, title, Daterequested, UserId, CurrentStateId) 
SELECT 1, N'Request for Credit Approval', CURRENT_TIMESTAMP, 1, 1;  

-- SELECT * FROM Request

CREATE TABLE RequestData 
( 
     requestdata int IDENTITY(1, 1) 
    ,requestid int 
    ,"name" national character varying(200) 
    ,"value" national character varying(200) 
); 

INSERT INTO RequestData(requestId, "name", "value") 
          SELECT 1, N'Commercials', N'Reference to Commericals Details' 
UNION ALL SELECT 1, N'CP', N'Reference to CP' 
UNION ALL SELECT 1, N'CS', N'Reference to CS' 
UNION ALL SELECT 1, N'Security Details', N'Reference to Security Details' 
;

-- SELECT * FROM RequestData;

-- Gives us the Rquestor and Request data type with reference to the data
-- SELECT 
--  p.processId,p.processName,u.UserName as 'Requested By'
-- ,r.requestId,r.title,rd.requestData,rd.name 'Request Data Type'
-- ,rd.value 'Request Data Value'
-- ,shu.UserName
-- FROM RequestData AS rd 
--  INNER JOIN @Request AS r ON r.requestId = rd.requestId
--  INNER JOIN @process AS p ON p.processId = r.processId
--  INNER JOIN @user AS u ON u.UserId = r.UserId; 

CREATE TABLE Stakeholders 
( 
     requestId int 
    ,userId int 
);

 INSERT INTO Stakeholders 
           SELECT 1, 1 
 UNION ALL SELECT 1, 2 
;

 -- Gives us Stakeholder assigned to Request
-- SELECT 
--  p.processId,p.processName,u.UserName as 'Requested By'
-- ,r.requestId,r.title,rd.requestData,rd.name 'Request Data Type' 
-- ,rd.value 'Request Data Value'
-- ,shu.UserName
-- FROM RequestData AS rd 
--  INNER JOIN @Request AS r ON r.requestId = rd.requestId 
--  INNER JOIN @process AS p ON p.processId = r.processId 
--  INNER JOIN @user AS u ON u.UserId = r.UserId 
--  INNER JOIN @Stakeholders AS sh ON r.requestId = sh.requestId 
--  INNER JOIN @user AS shu ON shu.UserId =sh.userId; 

CREATE TABLE requestNote 
( 
     requestNoteId int IDENTITY(1,1) 
    ,requestId int 
    ,userId int 
    ,note national character varying(200) 
); 

 INSERT INTO requestNote(requestId, userId, note) 
 SELECT 1, 1, N'Note 1' 
;

-- Gives us Request Notes to Request

-- SELECT 
--  p.processId,p.processName,u.UserName as 'Requested By' 
-- ,r.requestId,r.title,rd.requestData,rd.name 'Request Data Type' 
-- ,rd.value 'Request Data Value' 
-- ,rn.note 'Request Notes',un.UserName 'Notes Given by' 
-- FROM RequestData AS rd 
--  INNER JOIN @Request AS r ON r.requestId = rd.requestId 
--  INNER JOIN @process AS p ON p.processId = r.processId 
--  INNER JOIN @user AS u ON u.UserId = r.UserId 
--  INNER JOIN @requestNote AS rn ON rn.requestId = r.requestId 
--  INNER JOIN @user AS un ON un.UserId = rn.userId; 

CREATE TABLE stateType 
( 
     statetypeid int IDENTITY(1,1) 
    ,"name" national character varying(200) 
); 

INSERT INTO stateType("name") 
          SELECT N'Start' 
UNION ALL SELECT N'Normal' 
UNION ALL SELECT N'Complete' 
UNION ALL SELECT N'Denied' 
UNION ALL SELECT N'Cancelled' 
;

CREATE TABLE state 
( 
     "stateid" int IDENTITY(1,1) 
    ,statetypeid int 
    ,processid int 
    ,"name" national character varying(200) 
    ,"description" national character varying(200) 
); 

INSERT INTO state(statetypeid, processid, "name", "description") 
          SELECT 1, 1, N'Credit Approval Started', N'Credit Approval Started' 
UNION ALL SELECT 3, 1, N'Credit Approval Completed', N'Credit Approval Completed' 
UNION ALL SELECT 1, 1, N'Legal Approval Completed', N'Legal Approval Completed' 
UNION ALL SELECT 3, 1, N'Legal Approval Completed', N'Legal Approval Completed' 
;

-- SELECT * FROM state; 

CREATE TABLE transition 
( 
     transitionId int IDENTITY(1,1) 
    ,processId int 
    ,currentStateId int 
    ,nextStateId int 
); 

SET IDENTITY_INSERT transition ON
GO 

INSERT INTO transition(transitionId, processId, currentStateId, nextStateId)
SELECT 1, 1, 1, 3 
;
GO

SET IDENTITY_INSERT transition OFF 
GO 

SELECT * FROM transition; 

CREATE TABLE actionType 
( 
     actionTypeId int IDENTITY(1,1) 
    ,"name" national character varying(50) 
); 

INSERT INTO actionType("name") 
          SELECT N'Approve' 
UNION ALL SELECT N'Cancel' 
UNION ALL SELECT N'Deny' 
UNION ALL SELECT N'Restart' 
UNION ALL SELECT N'Resolve' 
; 

SELECT * FROM actionType; 

CREATE TABLE action 
( 
     actionid int IDENTITY(1,1) 
    ,actionTypeId int 
    ,processId int 
    ,"name" national character varying(200) 
    ,"description" national character varying(200) 
); 

SELECT * FROM action; 

CREATE TABLE transitionaction 
( 
     transitionid int 
    ,actionid int 
); 

SELECT * FROM transitionaction; 

CREATE TABLE activityType 
( 
     activityTypeId int IDENTITY(1,1)
    ,"name" national character varying(200) 
); 

INSERT INTO activityType 
          SELECT N'Add Note' 
UNION ALL SELECT N'Add Stackholder' 
UNION ALL SELECT N'Send Email' 
; 

SELECT * FROM activityType;  

CREATE TABLE activity 
( 
     activityId int IDENTITY(1,1) 
    ,activityTypeId int 
    ,ProcessId int 
    ,"name" national character varying(300) 
    ,"description" national character varying(300) 
); 

SELECT * FROM activity; 

--- Who can perform what actions and receive the activities
CREATE TABLE groups 
(  
     groupId int IDENTITY(1,1) 
    ,processId int 
    ,"name" national character varying(200) 
); 

SELECT * FROM groups; 

CREATE TABLE groupmembers 
( 
     groupid int 
    ,userid int 
); 

SELECT * FROM groupmembers; 
-- Set of standardized representations of a person who have specific roles relative to a Request or Process 

-- Request Creator (Requester)
-- Request Stakeholders
-- Group Members
-- Process Admins

CREATE TABLE Target 
( 
     targetId int IDENTITY(1,1) 
    ,"name" national character varying(200) 
    ,"description" national character varying(200) 
); 

INSERT INTO Target 
          SELECT N'Request Creator (Requester)', N'Request Creator (Requester)' 
UNION ALL SELECT N'Request Stakeholders', N'Request Stakeholders' 
UNION ALL SELECT N'Group Members', N'Group Members' 
UNION ALL SELECT N'Process Admins', N'Process Admins' 
; 

SELECT * FROM Target; 

-- As people who can perform Actions 
-- As people who can receive Activities 

CREATE TABLE actionTarget 
( 
     actionTargetId int IDENTITY(1,1) 
    ,actionId int 
    ,targetId int 
    ,groupId int 
); 

SELECT * FROM actionTarget; 

CREATE TABLE requestAction 
( 
     requestAction int IDENTITY(1,1) 
    ,requestId int 
    ,actionId int 
    ,transitionId int 
    ,isactive bit 
    ,iscomplete bit 
); 

SELECT * FROM requestAction; 
```

PostgreSQL：

```
CREATE TABLE "user" 
(
     "user_id" serial 
    ,"user_name" national character varying(50) 
); 

INSERT INTO "user"("user_name") SELECT (N'RM Name');
INSERT INTO "user"("user_name") SELECT (N'Credit Name');
INSERT INTO "user"("user_name") SELECT (N'Legal Name');
INSERT INTO "user"("user_name") SELECT (N'HOD Name');
-- SELECT * FROM user

CREATE TABLE process 
(
     process_id serial 
    ,process_name national character varying(50) 
);

INSERT INTO process(process_name) 
SELECT (N'Loan Approval');

-- SELECT * FROM process;

CREATE TABLE Request 
( 
     request_id serial 
    ,process_id int 
    ,title national character varying(300) 
    ,date_requested timestamp without time zone default CURRENT_TIMESTAMP 
    ,"user_id" int 
    ,current_state_id int 
);

-- Insert part of Process
INSERT INTO Request(process_id, title, date_requested, "user_id", current_state_id) 
SELECT 1, N'Request for Credit Approval', CURRENT_TIMESTAMP, 1, 1;

-- SELECT * FROM Request;

CREATE TABLE RequestData 
( 
     request_data serial 
    ,request_id int 
    ,"name" national character varying(200) 
    ,"value" national character varying(200) 
); 

INSERT INTO RequestData(request_id, "name", "value") 
          SELECT 1, N'Commercials', N'Reference to Commericals Details' 
UNION ALL SELECT 1, N'CP', N'Reference to CP' 
UNION ALL SELECT 1, N'CS', N'Reference to CS' 
UNION ALL SELECT 1, N'Security Details', N'Reference to Security Details' 
; 

-- SELECT * FROM RequestData; 

-- Gives us the Rquestor and Request data type with reference to the data
-- SELECT p.processId,p.processName,u.UserName as 'Requested By',r.requestId,r.title,rd.requestData,rd.name 'Request Data Type',rd.value 'Request Data Value'
--      --,shu.UserName
-- FROM RequestData rd 
--  INNER JOIN 
--  @Request r ON r.requestId = rd.requestId
--  INNER JOIN
--  @process p ON p.processId = r.processId
--  INNER JOIN 
--  @user u ON u.UserId = r.UserId; 

CREATE TABLE Stakeholders 
(
     request_id int 
    ,"user_id" int 
); 

 INSERT INTO Stakeholders
           SELECT 1, 1 
 UNION ALL SELECT 1, 2 
 ;

-- Gives us Stakeholder assigned to Request
-- SELECT 
     --  p.processId, p.processName 
     -- ,u.UserName AS 'Requested By' 
     -- ,r.requestId, r.title,rd.requestData 
     -- ,rd.name AS 'Request Data Type' 
     -- ,rd.value AS 'Request Data Value' 
     -- ,shu.UserName 
-- FROM RequestData AS rd 
--  INNER JOIN @Request AS r ON r.requestId = rd.requestId
--  INNER JOIN @process AS p ON p.processId = r.processId
--  INNER JOIN @user AS u ON u.UserId = r.UserId
--  INNER JOIN @Stakeholders AS sh ON r.requestId = sh.requestId 
--  INNER JOIN @user AS shu ON shu.UserId = sh.userId; 

CREATE TABLE requestNote 
(
     request_note_id serial 
    ,request_id int 
    ,"user_id" int 
    ,note national character varying(200) 
); 
 INSERT INTO requestNote(request_id, "user_id", note) 
 SELECT 1, 1, 'Note 1'; 

-- Gives us Request Notes to Request

-- SELECT 
--  p.processId,p.processName
-- ,u.UserName AS 'Requested By'
-- ,r.requestId,r.title,rd.requestData
-- ,rd.name AS 'Request Data Type'
-- ,rd.value AS 'Request Data Value'
-- ,rn.note AS 'Request Notes'
-- ,un.UserName AS 'Notes Given by'
-- FROM RequestData AS rd 
--  INNER JOIN @Request AS r ON r.requestId = rd.requestId
--  INNER JOIN @process AS p ON p.processId = r.processId
--  INNER JOIN @user AS u ON u.UserId = r.UserId
--  INNER JOIN @requestNote AS rn ON rn.requestId = r.requestId
--  INNER JOIN @user AS un ON un.UserId = rn.userId; 

CREATE TABLE stateType 
(
     statetypeid serial 
    ,"name" national character varying(200) 
);

INSERT INTO stateType("name") 
          SELECT N'Start' 
UNION ALL SELECT N'Normal' 
UNION ALL SELECT N'Complete' 
UNION ALL SELECT N'Denied' 
UNION ALL SELECT N'Cancelled' 
;

CREATE TABLE state 
(
     "state_id" serial 
    ,state_type_id int 
    ,process_id int 
    ,"name" national character varying(200) 
    ,"description" national character varying(200) 
); 

INSERT INTO state(state_type_id, process_id, "name", "description") 
          SELECT 1, 1, N'Credit Approval Started', N'Credit Approval Started' 
UNION ALL SELECT 3, 1, N'Credit Approval Completed', N'Credit Approval Completed' 
UNION ALL SELECT 1, 1, N'Legal Approval Completed', N'Legal Approval Completed' 
UNION ALL SELECT 3, 1, N'Legal Approval Completed', N'Legal Approval Completed' 
;
-- SELECT * FROM state; 

CREATE TABLE transition 
(
     transition_id serial 
    ,process_id int 
    ,current_state_id int 
    ,next_state_id int 
); 

SET IDENTITY_INSERT transition ON
GO 

INSERT INTO transition 
(
     transition_id
    ,process_id
    ,current_state_id
    ,next_state_id 
)
SELECT 1, 1, 1, 3 
;

SELECT * FROM transition; 
GO

SET IDENTITY_INSERT transition OFF 
GO

CREATE TABLE actionType 
( 
     action_type_id serial 
    ,"name" national character varying(50) 
);

INSERT INTO actionType("name") 
          SELECT N'Approve' 
UNION ALL SELECT N'Cancel' 
UNION ALL SELECT N'Deny' 
UNION ALL SELECT N'Restart' 
UNION ALL SELECT N'Resolve' 
;

SELECT * FROM actionType; 

CREATE TABLE action  
(
     action_id serial 
    ,action_type_id int 
    ,process_id int 
    ,"name" national character varying(200) 
    ,"description" national character varying(200) 
); 

SELECT * FROM action; 

CREATE TABLE transitionaction  
(
     transition_id int 
    ,action_id int 
); 

SELECT * FROM transitionaction; 

CREATE TABLE activityType 
(
     activity_type_id serial 
    ,"name" national character varying(200) 
); 

INSERT INTO activityType("name") 
          SELECT N'Add Note' 
UNION ALL SELECT N'Add Stackholder' 
UNION ALL SELECT N'Send Email' 
;

SELECT * FROM activityType;

CREATE TABLE activity 
( 
     activity_id serial 
    ,activity_type_id int 
    ,process_id int 
    ,"name" national character varying(300) 
    ,"description" national character varying(300) 
);

SELECT * FROM activity; 

--- Who can perform what actions and receive the activities 
CREATE TABLE groups 
( 
     group_id serial 
    ,process_id int 
    ,"name" national character varying(200) 
); 

SELECT * FROM groups; 

CREATE TABLE groupmembers 
(
     group_id int 
    ,"user_id" int 
); 

SELECT * FROM groupmembers; 

-- SET of standardized representations of a person who have specific roles relative to a Request or Process

-- Request Creator (Requester)
-- Request Stakeholders
-- Group Members
-- Process Admins

CREATE TABLE Target 
(
     targetId serial 
    ,"name" national character varying(200) 
    ,"description" national character varying(200) 
); 

INSERT INTO Target("name", "description") 
          SELECT N'Request Creator (Requester)', N'Request Creator (Requester)' 
UNION ALL SELECT N'Request Stakeholders', N'Request Stakeholders' 
UNION ALL SELECT N'Group Members', N'Group Members' 
UNION ALL SELECT N'Process Admins', N'Process Admins' 
; 

SELECT * FROM Target; 

-- As people who can perform Actions 
-- As people who can receive Activities 

CREATE TABLE actionTarget 
( 
     action_target_id serial 
    ,action_id int 
    ,target_id int 
    ,group_id int 
);

SELECT * FROM actionTarget; 

CREATE TABLE requestAction 
( 
     request_action serial 
    ,request_id int 
    ,action_id int 
    ,transition_id int 
    ,is_active bit 
    ,is_complete bit 
); 

SELECT * FROM requestAction; 
```

# c# - 事件处理程序不调用 cellclick 方法

> ID：12050736
> 
> 赞同：1
> 
> 时间：2012-08-21T08:16:42.927
> 
> 标签：c#, asp.net, onclick, event-handling

我已经使用扩展类实现了可点击的表格单元格。但是，当我在主类中调用事件处理程序/onclick 方法时，事件处理程序不起作用。

扩展的可点击表格单元类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Member
{
    public class TableCellClick: TableCell, IPostBackEventHandler, INamingContainer
    {
        private static readonly object click_event = new object();

        // public handles for adding and removing functions to be called on the click event
        public event EventHandler Click
        {
            add
            {
                Events.AddHandler(click_event, value);
            }
            remove
            {
                Events.RemoveHandler(click_event, value);
            }
        }

        // define parent function that will be called when the container is clicked
        protected void OnClick(EventArgs e)
        {
            EventHandler h = Events[click_event] as EventHandler;
            if (h != null)
            {
                h(this, e);
            }
        }

        // specify the "post back event reference" or id of the click event
        protected override void AddAttributesToRender(HtmlTextWriter writer)
        {
            base.AddAttributesToRender(writer);
            writer.AddAttribute(HtmlTextWriterAttribute.Onclick, 
                                Page.ClientScript.GetPostBackEventReference(this, "custom_click"));
        }

        // link the custom click id to the click function
        void System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(string eventArgument)
        {
            if(eventArgument == "custom_click")
            {
                OnClick(EventArgs.Empty);
            }
        }
    }
} 
```

我的 Main 类中的方法：

```
 memPanel.Visible = true;

        //Set a table width.
        memTable.Width = Unit.Percentage(40.00);
        //Create a new row for adding a table heading.
        TableRow tableHeading = new TableRow();

        //Create and add the cells that contain the msno column heading text.
        TableHeaderCell msnoHeading = new TableHeaderCell();
        msnoHeading.Text = "M'Ship No.";
        msnoHeading.HorizontalAlign = HorizontalAlign.Left;
        tableHeading.Cells.Add(msnoHeading);

        //Create and add the cells that contain the Name column heading text.
        TableHeaderCell nameHeading = new TableHeaderCell();
        nameHeading.Text = "Name";
        nameHeading.HorizontalAlign = HorizontalAlign.Left;
        tableHeading.Cells.Add(nameHeading);

        memTable.Rows.Add(tableHeading);

        while (reader.Read())
        {
            TableRow detailsRow = new TableRow();
            TableCellClick msnoCell = new TableCellClick();
            msnoCell.Text = reader["MSNo"].ToString();
            msnoCell.Click += cellClick;
            detailsRow.Cells.Add(msnoCell);

            TableCellClick nameCell = new TableCellClick();
            nameCell.Text = reader["fName"].ToString();
            nameCell.Click += cellClick;

            memTable.Rows.Add(detailsRow);

        } 
```

点击方法：

```
protected void cellClick(object sender, EventArgs e)
{
    System.Diagnostics.Debug.WriteLine("cell click");
    memPanel.Visible = false;
    basicInfo.Visible = true;
} 
```

有谁知道哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:52:18.443

请试试这个::

```
msnoCell.Click += new System.EventHandler(cellClick); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:31:38.200

之所以没有调用它是因为每次单击按钮时的回发方法。
我的单元格不是在 pageload 方法中创建的，这就是为什么单击单元格按钮时没有调用它的原因。

# javascript - 为什么不接受值为 0 的变量询问是否存在

> ID：12050739
> 
> 赞同：1
> 
> 时间：2012-08-21T08:16:52.770
> 
> 标签：javascript, jquery, web

我在 Scalable Javascript Aplication Architecture 上开发了一个非常大的应用程序，在核心我有一个简单的函数来将 css 属性分配给一个元素。

```
establishCSSvalue : function( element, property, value ) {
 if( element && property && value ) {
jQuery( element ).css( property, value );
 } else {
//log wrong arguments
 }
} 
```

如果变量值等于 0，则 if 转到 else，如果我删除值条件 o 修复 0：

```
if( element && property ) {
if( element && property && ( value || value == 0 ) ) { 
```

有用。

任何人都可以向我解释它发生了什么，或者为什么？我无法理解或者我的 javascript 知识还不够，在 php 中使用 isset 很容易。对我来说，存在 value = 0 的变量...

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:19:18.340

如果您只是想查看所有三个函数参数实际上都存在并且不是未定义的，那么您不能只检查它们的错误值。您必须专门检查它们是否未定义。

你可以这样做：

```
if (element !== undefined && property !== undefined && value !== undefined) 
```

你不能这样做的原因：

```
if (element && property && value) 
```

是因为任何虚假值都会导致该语句失败。错误值包括`null`、`false`、`0`、`""`和。因此，如果您只想检查以确保它不是未定义的，那么您需要专门检查它而不是任何虚假值。`undefined``NaN`

* * *

注意：如果你真正想知道的是调用者在调用函数时是否真的向函数传递了三个参数，你也可以`arguments.length`像这样检查：

```
if (arguments.length === 3) 
```

或者只是检查最后一个变量是否未定义：

```
if (value !== undefined) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:42:09.773

我在想，我做了以下。核心类的一个函数：

```
function isset( variable ) {
    if( variable !== null && variable !== false && variable !== undefined && variable !== NaN  && variable !== "") {
        return true;
    } else {
        return false;
    }
} 
```

我正在考虑是否包含“”，但我想我会在未来决定。

现在我简单地要求 isset(variable)，只有当我要进行 jquery 或我需要所有具有值的变量的操作时，以前我可以使用技巧在变量中传递不同的 Falsey 值，以有时从数据库中获取属性值。

谢谢。

# pdf - 如何查找PDF是横向还是纵向

> ID：12050743
> 
> 赞同：5
> 
> 时间：2012-08-21T08:17:04.147
> 
> 标签：pdf, pdf-generation, itext, pdfbox

是否有工具可以确定 PDF 是横向还是纵向？

我目前已经为此查看了**pdfbox**和**Itext**，但似乎找不到它。请告诉他们是否支持这一点。

**使用Origami**提取 PDF 页面信息提供了 pdf 页面具有某种程度的旋转的信息。以下是折纸的报道：

```
{:Parent=>#<PDF::Reader::Reference:0x872349c @id=8, @gen=0>, :Type=>:Page, 
 :Contents=>#<PDF::Reader::Reference:0x8722f24 @id=4, @gen=0>, :Resources=># <PDF::Reader::Reference:0x870dbd8 @id=2, @gen=0>, 
:MediaBox=>[0, 0, 612, 792], :Rotate=>270} 
```

**旋转：270**

“旋转”实际上是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T10:04:45.717

命令行`pdfinfo`实用程序有一种方法可以让您查看每个页面的页面大小信息和 MediaBox、CropBox、BleedBox、ArtBox 和 TrimBox 值。在这里，我询问特定文档第 2 到 4 页的值：

```
pdfinfo -box -f 2 -l 4 sample.pdf
  Creator:        FrameMaker 6.0
  Producer:       Acrobat Distiller 5.0.5 (Windows)
  CreationDate:   Thu Aug 17 16:43:06 2006
  ModDate:        Tue Aug 22 12:20:24 2006
  Tagged:         no
  Form:           AcroForm
  Pages:          146
  Encrypted:      no
  Page    2 size: 419.535 x 297.644 pts
  Page    2 rot:  90
  Page    3 size: 297.646 x 419.524 pts
  Page    3 rot:  0
  Page    4 size: 297.646 x 419.524 pts
  Page    4 rot:  0
  Page    2 MediaBox:     0.00     0.00   595.00   842.00
  Page    2 CropBox:     87.25   430.36   506.79   728.00
  Page    2 BleedBox:    87.25   430.36   506.79   728.00
  Page    2 TrimBox:     87.25   430.36   506.79   728.00
  Page    2 ArtBox:      87.25   430.36   506.79   728.00
  Page    3 MediaBox:     0.00     0.00   595.00   842.00
  Page    3 CropBox:    148.17   210.76   445.81   630.28
  Page    3 BleedBox:   148.17   210.76   445.81   630.28
  Page    3 TrimBox:    148.17   210.76   445.81   630.28
  Page    3 ArtBox:     148.17   210.76   445.81   630.28
  Page    4 MediaBox:     0.00     0.00   595.00   842.00
  Page    4 CropBox:    148.17   210.76   445.81   630.28
  Page    4 BleedBox:   148.17   210.76   445.81   630.28
  Page    4 TrimBox:    148.17   210.76   445.81   630.28
  Page    4 ArtBox:     148.17   210.76   445.81   630.28
  Page    4 MediaBox:     0.00     0.00   595.00   842.00
  File size:      6888764 bytes
  Optimized:      yes
  PDF version:    1.4 
```

请注意以下事项：

*   `*Box`values：这些是 4 个数字，其单位是 PostScript 点：第一对代表左下角的坐标，第二对代表右上角的坐标。

*   `MediaBox`：是 PDF 中每个页面的*必需*设置。

*   `TrimBox`: 是一个*可选*设置，如果没有明确定义，则默认与 MediaBox 相同。如果它偏离了 MediaBox，那么它会告诉 PDF 查看器（和打印机驱动程序）只呈现和显示整个页面的特定部分。

*   `Page size`：此信息是根据 TrimBox 值设置的距离派生 + 计算得出的。

*   `rot`：这给出了页面旋转的值。可能是`0`、`90`或`180`度`270`。

现在，页面的*横向*和*纵向*定义是这样的：

*   如果宽度大于高度，则将其视为“风景”。
*   如果高度大于宽度，则将其视为“纵向”。
*   不确定宽度和高度是否具有相同的值。

**但！**……

*   ...您可以将非零`/Rotation`值放入您的 PDF 源代码（`pdfinfo`将显示为`rot:`信息）并以这种方式将“纵向”PDF 页面显示为“横向”，反之亦然；

*   ...您可以在“人像”形状的 MediaBox 内定义一个“风景”形状的 TrimBox，反之亦然，并将其与非零旋转混合，并以这种方式使“风景”形状的内容出现在“肖像'​​（或倒置）看起来......

对此感到困惑？别担心，很多都是。事实是，“风景”和“肖像”并不是明确定义的技术术语。它们只是描述我们所见事物的惯例……

# c# - 访问二进制字段的长度

> ID：12050747
> 
> 赞同：0
> 
> 时间：2012-08-21T08:17:20.980
> 
> 标签：c#, datatable

我在 .Net 应用程序中使用 OleDB 来读取具有固定长度的二进制字段的 Access 数据库表。当我在它上使用该`MaxLength`属性时，`DataTable`它返回 -1，尽管在 Access DB 本身中我可以看到该字段的长度是 510 字节。我在任何地方都看不到字段长度-请您帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:29:26.857

您单元格中的数据将是一个字节数组。你可以把它的长度。

```
OleDbCommand cmd = new OleDbCommand("select data from db", mycon);
System.Data.OleDb.OleDbDataReader dr;
dr = cmd.ExecuteReader();
dr.Read();
temp = (byte[])dr["data"];
int len = temp.Length; 
```

# codeigniter - free_result 和 codeIgniter

> ID：12050750
> 
> 赞同：1
> 
> 时间：2012-08-21T08:17:37.407
> 
> 标签：codeigniter

我已经尝试将此作为 codeIgniter 功能代码，但我不知道为什么它不起作用。

```
 $o = $this->db->query("SELECT * FROM `w` WHERE id = '2'"); 

    foreach ($o->result() as $row)
    {
        echo $row->lasthit;
    }       
    $o->free_result(); 
```

因此，当我再次尝试“回显 $row->lasthit”时，我看到了相同的结果！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:17:39.157

首先检查自动加载，数据库是否自动加载？如果没有，您必须手动完成，最好的位置是在模型构造函数中。或者，如果您在每个页面上都需要数据库，则自动加载它。

# spring - Internet Explorer 8 重定向问题

> ID：12050751
> 
> 赞同：2
> 
> 时间：2012-08-21T08:17:48.010
> 
> 标签：spring, internet-explorer

我制作了一个 JSP 页面，它将向 @controller 发送请求到方法 UserList() 并使用 Jquery AJAX 显示数据。我已将分页概念应用于此，并在单击超链接“NEXT”和“PREVIOUS”时向控制器中的方法 next() 发送请求，该方法会增加或减少每个请求的页面大小并重定向回 userList() 以获取当前增加/减少页面值之后的数据。

```
@RequestMapping(method = RequestMethod.GET, value = "next")
public String next(HttpServletRequest request) throws Exception {
       ++userListPage;
       return "redirect:/admin/userList";
}

@RequestMapping(value = "userList")
public String userList(HttpServletRequest request, Model model) throws Exception {

    data is retrived over here and response is send back to JSP
} 
```

这在 chrome 和 firefox 中运行良好，但在 Internet Explorer 8 中无法运行。当我第一次在 JSP 上单击“NEXT”时，next() 重定向到 UserList() 但第二次之后我再次单击“NEXT”下一个（ ) 不会重定向到 UserList() 方法，而是考虑返回“redirect:/admin/userList”；由于视图名称和视图已解决。我已经尝试了很多，但没有任何效果。请帮助我。感谢进阶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T07:55:44.917

试试这个

```
return "forward:/admin/userList"; 
```

因为 IE8 向客户端发送请求，而这次客户端不向服务器发送请求。因此它对你不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:14:44.930

我有一个类似的问题，我通过 POST 请求从浏览器提交了一个表单。在配置为处理 POST 的控制器方法中，在执行必要的处理后，我试图重定向到另一个控制器方法（为 GET 配置）。它适用于 Firefox 和 Chrome，但不适用于 IE。即使将第一个控制器的返回视图从重定向更改为转发，它似乎在 IE 中也不起作用。问题是转发使用相同的请求方法范围，即本例中的 POST，因此我必须删除在第二个控制器方法上指定的请求方法 GET 才能使其正常工作。

# sql-server-2008 - SQL 从特定月份开始排序

> ID：12050753
> 
> 赞同：1
> 
> 时间：2012-08-21T08:18:00.383
> 
> 标签：sql-server-2008, sap

我有以下查询，它返回以下结果：

```
SELECT T0.Name AS Period, 
       SUM(T2.LineTotal) AS CurrentDebtors, 
       MAX(T1.DocRate) AS ExchangeRate,
       SUM(CASE WHEN DATEDIFF(day, T1.DocDate, T1.DocDueDate) > 30
                THEN T2.LineTotal 
           END) AS NonCurrentDebtors, 
       T3.TurnoverMonth
  FROM OFPR T0 
 INNER JOIN OINV T1
    ON T0.AbsEntry = T1.FinncPriod 
 INNER JOIN INV1 T2 
    ON T1.DocEntry = T2.DocEntry
 INNER JOIN 
 (
    SELECT ORCT.FinncPriod, 
           SUM(ORCT.DocTotal) AS TurnoverMonth
      FROM ORCT
     WHERE YEAR(ORCT.DocDate) = '2009'
     GROUP BY ORCT.FinncPriod
 )  T3 
    ON T0.AbsEntry = T3.FinncPriod
 WHERE YEAR(T1.DocDate) = '2009'
 GROUP BY T0.Name, T3.TurnoverMonth
 ORDER BY T0.Name 
```

结果：

```
Period  CurrentDebtors  ExchangeRate    NonCurrentDebtors   TurnoverMonth
01.2009 82221785.530000     68.420000   11365437.180000 105030603.650000
02.2009 103432923.420000    68.420000   14444391.890000 84554821.480000
03.2009 118881620.200000    68.420000   16292534.760000 105662045.900000
04.2009 115400360.770000    68.420000   28278615.950000 127528038.680000
05.2009 120497298.090000    68.420000   21524834.230000 94912946.080000
06.2009 124426393.780000    68.420000   31814427.220000 92526329.440000
07.2009 107881741.630000    68.420000   25339512.290000 125756922.560000
08.2009 147938452.250000    68.420000   35773934.510000 102350989.510000
09.2009 137295113.320000    126.500000  30572992.390000 141742820.230000
10.2009 134955455.780000    68.420000   34060549.000000 88356896.710000
11.2009 151664995.160000    68.420000   35388019.370000 112424543.000000
12.2009 169973243.880000    68.420000   47526181.370000 165130664.260000 
```

我将此查询用于一家公司，其财政年度从每年 8 月开始。如何订购上述查询，以便从 Period 订购`08.2009, 09.2009...until the last row 07.2009`任何年份（8 月至 7 月）？结果来自 SAP Business One 数据库，其中 Period 列是 nvarchar。（微软 SQL Server 2008）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:26:42.207

试试这个：

有趣的是你的 T0.Name 是一个字符字段

您的 Order By Clause 替换为以下代码

```
order by
 case when cast(left (T0.Name,2) as int)>=8 
      then cast(left (T0.Name,2) as int)-8
      else cast(left (T0.Name,2) as int)+4 
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:44:16.760

您可以通过 OFPR RefDate/DueDate/postingDate 字段对（抱歉，我不记得实际名称）来订购，因为这些是告诉您期间开始和结束的日期字段。

# database - 如何覆盖 django 应用程序的模型并使用相同的数据库表？

> ID：12050757
> 
> 赞同：1
> 
> 时间：2012-08-21T08:18:20.307
> 
> 标签：database, django, django-models

我想覆盖现有模型并使用不同的管理器，同时保留相同的数据库表，以便我可以在不同的地方使用不同的管理器查询相同的数据。

我的代码如下：

我的标签/models.py

```
from tagging.models import Tag as tagging_tag, TagManager as tagging_tagmanager
class TagManager(tagging_tagmanager):
    def get_query_set(self):
        return super(TagManager,self).get_query_set().filter(site=settings.SITE_ID)

class Tag(tagging_tag):
    #id = models.AutoField(primary_key=True)
    objects=TagManager()

    class Meta:
        db_table="tagging_tag" 
```

但是如果我 sql 它的代码将是这样的：

```
CREATE TABLE "Tagging_local_tag" (
    "tag_ptr_id" integer NOT NULL PRIMARY KEY REFERENCES "tagging_tag" ("id")
)
; 
```

该`tag_ptr_id`字段在这里引起问题，它正在尝试创建一个新表并引用原始表。

有没有办法处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T12:13:48.410

只需像这样创建一个[代理模型](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)：

```
class Tag(tagging_tag):
    #id = models.AutoField(primary_key=True)
    objects=TagManager()

    class Meta:
        proxy = True 
```

# php - 页面加载时间长

> ID：12050759
> 
> 赞同：-4
> 
> 时间：2012-08-21T08:18:33.667
> 
> 标签：php, codeigniter

我有一个需要 12 秒才能加载的页面！

该页面需要显示由 SQL 计数查询生成的 20 条不同的数据项。

由于 SQL 每次都不同，因此无法组合查询。

我已经尝试索引相关表，但无济于事......

我还考虑过实现 memcache 和使用页面缓存。

我正在使用流行的 codeigniter php 框架。

有没有人有什么建议 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:16:15.553

我想它可能可以忽略不计，但是您实际上在每个 COUNT() 查询中返回了多少字段？我过去听说过使用 COUNT()，实际上使用 COUNT(*) 之类的东西比使用 COUNT(columnname) 更好，因为这样数据库可以将它基于任何最快的列。

可能还值得看看 CodeIgniter 的数据库缓存类——这听起来正是那种有用的情况。

CodeIgniter 的 Profiler 类对于这样的事情真的很方便。如果您启用它并使用它生成的报告来了解每个查询需要多长时间，您可能至少可以优化其中的一些。

此外，您可能需要考虑使用字节码缓存 - APC 非常好，并且似乎与 CodeIgniter 配合得很好。据我所知，它不会加速实际的数据库事务，但它可能会通过加速 PHP 执行来使应用程序更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:23:42.163

创建一个在命令行中进行计数的 cron，同时更新一个单独的“计数”表。因此，您将在 counts 表中有 20 个条目，您都可以在一个查询中请求这些条目。在页面加载期间仅查询该表。

您可以自己决定 cron 应该多久运行一次，但要确保它不会花费太长时间，否则只需将不同的 count-update-process 分成不同的 cron 文件（或命令）。

# wpf - WPF MahApps.Metro Tabcontrol 数据绑定？

> ID：12050767
> 
> 赞同：3
> 
> 时间：2012-08-21T08:19:25.543
> 
> 标签：wpf, mahapps.metro

好吧，我尝试在使用 MahApps.Metro 样式时将 TabControl 绑定到数据源

窗口xml：

```
<Controls:MetroWindow x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.AnimatedSingleRowTabControl.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <TabControl ItemsSource="{Binding Collection}">
        <TabControl.ItemTemplate>
            <DataTemplate>
                <TabItem Header="{Binding Title}">
                    <ContentControl Content="{Binding Content}" />
                </TabItem>
            </DataTemplate>
        </TabControl.ItemTemplate>
    </TabControl>
</Controls:MetroWindow> 
```

代码隐藏：

```
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : MetroWindow
{
    public MainWindow()
    {
        InitializeComponent();
        Collection = new ObservableCollection<Item>() 
            {
                new Item("Test1", 1),
                new Item("Test2", 2),
                new Item("Test3", 3)
            };
        this.DataContext = this;
    }

    public ObservableCollection<Item> Collection
    { get; set; }
} 
```

这有点作用，但是 TabControl 失去了一些样式（活动选择样式）并且很难单击选项卡（您不能直接单击它，您必须在它前面单击），有没有人有解决方案对于这个问题？

![在此处输入图像描述](../Images/2e7c1e495ed17660cb2adf3ab97c5f52.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:23:11.230

TabControl.ItemTemplate 的 DataTemplate 已经是 TabItem，因此无需将其放入。

这应该有效：

```
<TabControl ItemsSource="{Binding Collection}">
    <TabControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Title}"/>
        </DataTemplate>
    </TabControl.ItemTemplate>
    <TabControl.ContentTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Content}" />
        </DataTemplate>
    </TabControl.ContentTemplate>
</TabControl> 
```

# realbasic - 如何判断我的代码是在控制台还是桌面应用程序中运行？

> ID：12050771
> 
> 赞同：1
> 
> 时间：2012-08-21T08:19:50.933
> 
> 标签：realbasic, xojo

如何判断我的 RealBasic 代码是在控制台还是桌面应用程序中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:19:50.933

你可以使用这个条件句：

```
#if TargetHasGUI then     
    ' It's running in a desktop app
#else
    ' It's running in a console app
#endif 
```

# asp.net - How to Logout of Facebook from Asp.net?

> ID：12050774
> 
> 赞同：-1
> 
> 时间：2012-08-21T08:20:08.307
> 
> 标签：asp.net, .net, facebook, facebook-c#-sdk

I am using the below code to Login to Facebook using my Asp.net application.

I am able to login perfectly...But how can i Logout from FB ?

```
<input type="button" id="fblogin" value="Login to Facebook" disabled="disabled" style="display: none" />
<fb:login-button v="2" autologoutlink='true' length="long" onlogin="$('#fblogin').click()">Login to Facebook</fb:login-button>  

<script>
    window.fbAsyncInit = function () 
    {
        FB.init({
            appId: '<%: Facebook.FacebookApplication.Current.AppId %>',
            cookie: true,
            xfbml: true,
            oauth: true
        });

        function facebooklogin() {
            FB.login(function (response) {
                if (response.authResponse) {
                    // user authorized
                    // make sure to set the top.location instead of using window.location.reload()
                    top.location = '<%= this.ResolveCanvasPageUrl("~/") %>';
                } else {
                    // user cancelled
                }
            }, { scope: '<%: string.Join(",", ExtendedPermissions) %>' });
        };

        $(function () {
            // make the button is only enabled after the facebook js sdk has been loaded.
            $('#fblogin').attr('disabled', false).click(facebooklogin); });
        });

    };
    (function () {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    } ());
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T05:33:25.233

这有效...

[https://www.facebook.com/logout.php](https://www.facebook.com/logout.php)？下一个=YOUR_REDIRECT_URL &access_token=USER_ACCESS_TOKEN

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:51:56.580

使用此代码

```
<div id="user-info"></div>
<p><button id="fb-auth">Login using facebook</button></p>

<script type="text/javascript">
    window.fbAsyncInit = function () {
        FB.init({ appId: 'appid',
            status: true,
            cookie: true,
            xfbml: true,
            oauth: true
        });

        function updateButton(response) {
            var button = document.getElementById('fb-auth');

            if (response.authResponse) {
                //user is already logged in and connected
                var userInfo = document.getElementById('user-info');
                FB.api('/me', function (response) {
                    userInfo.innerHTML = '<img src="https://graph.facebook.com/'
      + response.id + '/picture">' + response.name + response.email;
                    button.innerHTML = 'Logout';

                });
                button.onclick = function () {
                    FB.logout(function (response) {
                        var userInfo = document.getElementById('user-info');
                        userInfo.innerHTML = "";
                        //to textbox
                        document.getElementById('TxtFname').value = "";
                        document.getElementById('Txtemail').value = "";
                    });
                };
            } else {
                //user is not connected to your app or logged out
                button.innerHTML = 'Login using facebook';
                button.onclick = function () {
                    FB.login(function (response) {
                        if (response.authResponse) {
                            FB.api('/me', function (response) {
                                var userInfo = document.getElementById('user-info');
                                userInfo.innerHTML =
                '<img src="https://graph.facebook.com/'
            + response.id + '/picture" style="margin-right:5px"/>'
            + response.name + "emailid" + response.email;
                            });
                        } else {
                            //user cancelled login or did not grant authorization
                        }
                    }, { scope: 'email' });
                }
            }
        }

        // run once with current status and whenever the status changes
        FB.getLoginStatus(updateButton);
        FB.Event.subscribe('auth.statusChange', updateButton);
    };

    (function () {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol
    + '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    } ());

</script> 
```

# linux - How to return memory from process to the OS

> ID：12050777
> 
> 赞同：9
> 
> 时间：2012-08-21T08:20:15.817
> 
> 标签：linux, unix, memory, aix, sbrk

I have an issue with memory management in various operating systems.

My program is a server that does some processing that could take a few GB of memory. After that, it releases most of the memory while it waits for a few hours until another request arrives.

On AIX and Solaris, I observe the following behavior,

When I free memory, the memory is not returned back to the operating system. The amount of virtual memory used by a process always increases - never decreases. The same is true for the physical memory, up to its limit. Thus it appears that we use all this memory in sleep mode as well.

When this memory can be returned back to OS? How can I make it?

Linux is different: it appears that is does return memory sometimes, but I'm not able to understand when and how. I have for example a scenario in which the process before a request was 100MB, then 700MB at the peak, and after releasing all that it was down to 600MB. I don't understand it - if Linux gives back memory to the OS, why not all of it?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T08:56:57.527

glibc 库（通常用作 Linux 中的标准 C 库）可以通过两种方式分配内存 - 使用 sbrk() 或使用 mmap()。它将使用 mmap() 进行足够大的分配。

用 sbrk() 分配的内存不能轻易地再次放弃（仅在特殊情况下，据我所知 glibc 甚至没有尝试）。使用 mmap() 分配的内存可以使用 munmap() 返回。

如果您依赖能够将内存返回给操作系统，则可以直接使用 mmap() 而不是 malloc(); 但是如果你分配很多小块，这将变得低效。您可能需要在 mmap() 之上实现自己的池分配器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T08:57:11.473

大多数情况下，直到进程终止，内存才会返回给系统。根据操作系统和运行时库，内存可能会返回给系统，但我不知道任何可靠的方法来确保这会发生。

如果处理需要几 GB 内存，让您的服务器等待请求，然后生成一个新进程来处理数据 - 您可以使用管道与服务器通信。处理完成后，返回结果并终止生成的进程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T08:28:10.823

我假设内存的分配方式（可能还给操作系统）在 libc 中。您正在使用的编程语言/库堆栈可能是这个原因。

我假设 glibc 将在堆顶部返回非碎片内存。您的进程可能会分配 10MB 的数据，它将一直使用。之后，将分配 500MB 用于处理的数据。之后，即使在处理（可能是处理的结果）之后仍保留的一小部分数据被分配。之后再分配 500MB 内存布局为：

|10MB 已用|500 MB 处理|1MB 结果|500MB 处理| = 总计 1011 MB

当 1000MB 被释放时，内存布局为

|10MB 使用|500MB 释放|1MB 结果|500MB 释放| glibc 现在可能会在最后返回内存... |10MB 已使用|500MB 已释放|1MB 结果| = 511 MB“使用中”也只使用了 11MB。

我认为这就是发生的情况，您需要做进一步的研究（想到单独的内存池）以确保所有内存都将被释放

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:12:54.827

你应该看看分页是如何工作的。如果内存小于 getpagesize()，则无法返回内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T08:32:09.230

我认为唯一*可靠*且*可移植*的方法是生成一个新进程来处理您的请求。进程退出后，操作系统将获取所有相关的内存。

不幸的是，您在生成此进程和进程间通信方面效率低下（我注意到您正在进行大量处理 - 我不知道这是否意味着您的进程间通信具有相当大的数据需求）。但是，您将获得所需的内存行为。请注意，操作系统不应复制实际 JVM 消耗的内存，前提是您生成了*相同*的JVM 二进制映像。

# jquery-validate - 添加方法检查更改时所选单选按钮的值

> ID：12050781
> 
> 赞同：1
> 
> 时间：2012-08-21T08:20:40.480
> 
> 标签：jquery-validate, radio-button

## 已编辑，见下文

我现在有两个单选按钮，每个按钮都有一个代表帐户持有人数量的值。IE：

```
<INPUT id="ONE_HOLDER" name=NR_OF_HOLDERS value=1 type=radio />
<LABEL for=ONE_HOLDER>One holder</LABEL>
<br />
<INPUT id="TWO_HOLDERS" name=NR_OF_HOLDERS value=2 type=radio />
<LABEL for=TWO_HOLDERS>Two holders</LABEL> 
```

我想在每次选择一个单选按钮时进行验证，因此我使用 Jquery 验证器执行以下操作：

```
//Validations fix for radio and checkbox checks
$('input[type="radio"],input[type="checkbox"]').change(function(){
    $("#YOUR_ACC").validate().element(this);
}); 
```

这叫

```
$('#YOUR_ACC').validate({ ... }); 
```

这又通过我的自定义验证器方法运行，如下所示：

```
$.validator.addMethod("numberOfHolders", function(value, element) {
    try {
        nrOfHolders = value;
        alert("The value is " + nrOfHolders);
        if(nrOfHolders == 1)     { return true; }
        else if(nrOfHolders == 2){ return false; }          
    }
    catch(err) {
        return false;
    }
}); 
```

它贯穿了所有内容，但问题是当我选择第一个单选按钮时，这是需要选择的单选按钮，即使我选择了第二个单选按钮，它也会保留该值（1）。

为什么会这样，我该如何解决？

# 编辑解决方案

请参阅下面的回复中的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:29:52.170

# 我的解决方案

看起来很有*价值*

```
addMethod("numberOfHolders", function(value, element) { }); 
```

不采用单选按钮的值。我通过使用 element 参数获取正确的元素（确保更动态），然后像在*常规*jQuery 方法中一样获取选中的单选按钮的值，使其工作：

```
var element_name = $(element).attr('name');
value = $('input:radio[name="'+element_name +'"]:checked').val(); 
```

# javascript - Issue creating jQuery object

> ID：12050782
> 
> 赞同：0
> 
> 时间：2012-08-21T08:20:42.710
> 
> 标签：javascript, jquery, html, special-characters

When I do

```
var foo = $('n');
console.log(foo); 
```

I get jQuery object. However if I do:

```
var bar = $('&nbsp;');
console.log(bar); 
```

then I get "Syntax error, unrecognized expression:  " error message in Firefox.

Why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:35:52.293

如果 jQuery 对象的参数是字符串，则它必须是有效的 CSS 选择器或一些可检测的 HTML 标记。由于它不是可检测的 HTML 标记（字符串中没有被`<`and包围的 HTML 标记`>`），因此它会尝试将字符串作为 CSS 选择器处理。

但是 jQuery 内部的 Sizzle 选择器引擎发现它在无效的 CSS 选择器中并抛出异常。您可以在 jQuery 中看到被触发的这段代码：

```
Sizzle.error = function( msg ) {
    throw new Error( "Syntax error, unrecognized expression: " + msg );
}; 
```

* * *

虽然`'&nbsp;'`是一个有效的 HTML 片段，但 jQuery 必须能够判断您是在尝试传递 CSS 选择器还是一些 HTML 标记。为此，它会查找打开和关闭标记字符`<`，并`>`在典型位置查找 HTML 标记，以区分 HTML 和 CSS 选择器。在您的情况下，您未通过该测试，因此它尝试将您的字符串作为 CSS 选择器（它不是）处理，因此它失败了。

您需要将有效参数传递给 jQuery。如果你想传递一些 HTML 给它，你可以这样做：

```
var bar = $('<span>&nbsp;</span>'); 
```

* * *

这样做的原因：

```
var foo = $('n');
console.log(foo); 
```

这`'n'`是一个有效的 CSS 选择器。除非您的文档中有标签，否则它可能不会匹配您文档中的任何`<n>`内容，但它是一个有效的 CSS 选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:24:03.550

那是因为 jQuery 对象假设是 dom 元素的包装器。如果你通过`'&nbsp'`了，那么它就不能创建一些 dom 元素，所以它会抛出错误。但是没有标签`n`和`$('n').length`给`0`。所以我认为它是 jQuery 问题中的解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:25:50.790

简短的回答是 jQuery 使用[sizzle 选择器引擎](http://sizzlejs.com/)，而该引擎不知道如何处理`&nbsp;`.

# php - history states in ajax calls

> ID：12050785
> 
> 赞同：0
> 
> 时间：2012-08-21T08:20:55.283
> 
> 标签：php, jquery, ajax, history, pushstate

I am using jquery ajax calls to change content in a div by clicking links, but my url always the same i mean its not changing by clicking the links just content changes.

so i find history.pushStates which helped me to change the url by clicking link, but it does not create history states, i mean back button of my browser is not calling past ajaxcalls.

This is my javascript code.

```
function PostFunc(id,page,name)
{
$.ajax
({
type: "POST",
url: "doAjax.php",
data: "mode=viewtopic&threadid="+id+"&page="+page,
success: function(msg)
    {
    $("#entrylist").ajaxComplete(function(event, request, settings)
        {
        $("#entrylist").hide().html(msg).fadeIn();
        counter = 0;
        /* TODO : LEARN PUSHSTATES */
        var replaced = name.replace(/ /g,"+");
        history.pushState(null, null,"viewtopic.php?title="+replaced);
        });
    }
}); 
```

ye.. my problem is shortly i dont know how to handle pushstates in my jquery code, and all other codes are seem so strange like they are not for ajaxcalls :/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:34:20.753

您需要跟踪 hashchange 事件并将您的状态推送到 URL 的窗口哈希部分。[这](http://css-tricks.com/dynamic-page-replacing-content/)是关于在动态页面上保留历史的一个很好的讨论。

你也可以发现[这篇](http://www.asual.com/jquery/address/)文章很有帮助。我个人将 hashchange 插件（[详细在这里](http://benalman.com/projects/jquery-hashchange-plugin/)）用于动态页面，它可以很好地保持同步历史记录并支持动态内容的后退/前进按钮。

# c# - StreamWriter doesn't create a text file

> ID：12050787
> 
> 赞同：1
> 
> 时间：2012-08-21T08:20:56.520
> 
> 标签：c#, asp.net, c#-4.0

I have writtten a code to Create & write a file.But It doen't create a file.There's no any compilation error.My folder hierachy is DesktopModules -> SMSFunction->SMSText.I need to create a text file inside the SMSText folder,

```
public void WriteToFile(  string source, int dest, string messageIn, string operatorNew)
{
    try{

    string directory = ResolveUrl("~/DesktopModules/SMSFunction/SMSText");
    //string directory = Server.MapPath("~/DesktopModules/SMSFunction/SMSText");
    string filename = String.Format("{0:yyyy-MM-dd}__{1}.txt", DateTime.Now);
    string path = Path.Combine(directory, filename);

    if (!File.Exists(filename))
    {

        using (StreamWriter str = File.CreateText(path))
        {
            str.WriteLine("msisdn: " + source);
            str.WriteLine("shortcode : " + dest);
            str.WriteLine("Message : " + messageIn);
            str.WriteLine("Operator :" + operatorNew);
            str.Flush();

        }
    }
    else if (File.Exists(filename))
    {

        using (var str = new StreamWriter(filename))

        {
            str.WriteLine("msisdn: " + source);
            str.WriteLine("shortcode : " + dest);
            str.WriteLine("Message : " + messageIn);
            str.WriteLine("Operator :" + operatorNew);
            str.Flush();
        }

    }

}
catch(Exception ex)
{
    Response.Write(ex.Message);
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:15:30.470

这里有问题：

```
string filename = String.Format("{0:yyyy-MM-dd}__{1}.txt", DateTime.Now); . 
```

您调用 string.Format 传递一个格式字符串，该字符串需要两个参数`{0:yyyy-MM-dd}`和`{1}`，但您只给出一个`DateTime.Now`。当您的代码到达该行时，会引发 FormatException 并跳转到退出的 catch 块而不向磁盘写入任何内容。

编辑：如果您不想覆盖文件的内容，那么您应该使用允许附加到现有文件的 StreamWriter 的重载构造函数

```
.....
else if (File.Exists(filename))  
{  
    using (var str = new StreamWriter(filename, true))  
    {
         .... 
```

但我认为您不需要对 File.Exists 进行检查。如果您仔细查看 StreamWriter 文档，您会发现该文件是在文件不存在时创建的。所以上面的代码真的可以简化为

```
 using (var str = new StreamWriter(path, true))      
    {      
        str.WriteLine("msisdn: " + source);      
        str.WriteLine("shortcode : " + dest);      
        str.WriteLine("Message : " + messageIn);      
        str.WriteLine("Operator :" + operatorNew);      
        str.Flush();      
    } 
```

删除不必要的 if 块

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T04:06:11.783

```
 private void SetPartnerTemplate()
        {
            var sb = new StringBuilder();
            widget.RenderControl(new HtmlTextWriter(new StringWriter(sb)));

            string setting = sb.ToString();

            string fileLoc = @"D:\sample1.txt";
            FileStream fs = null;
            if (!File.Exists(fileLoc))
            {
                using (fs = File.Create(fileLoc))
                {
                }
            }

            if (File.Exists(fileLoc))
            {
                using (StreamWriter sw = new StreamWriter(fileLoc))
                {
                    sw.Write(setting);
                }
            }
            if (File.Exists(fileLoc))
            {
                setting = File.ReadAllText(fileLoc);
            }
            else
            {
                Response.Write("<script language='javascript'>window.alert('File not found');</script>");
            }
            //after writing storing dat file to db

            //VoCServiceObj.SpSetWidgetRatingPartnerTemplate(setting, partnerid, productid);
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T10:46:39.527

```
 protected void btnUpload_Click(object sender, EventArgs e)
           {
            var sb = new StringBuilder();
            widget.RenderControl(new HtmlTextWriter(new StringWriter(sb)));
            string setting = sb.ToString();
            string fileLoc = @"D:\Newsample.txt";
            FileStream fs = null;
            if (!File.Exists(fileLoc))
            {
                using (fs = File.Create(fileLoc))
                {
                }
            }
            if (File.Exists(fileLoc))
            {
                using (StreamWriter sw = new StreamWriter(fileLoc))
                {
                    sw.Write(setting);
                }
            }
            if (File.Exists(fileLoc))
            {
                setting = File.ReadAllText(fileLoc);
            }
            else
            {
                Response.Write("<script language='javascript'>window.alert('File not found');</script>");
            }

            FileStream st = new FileStream(fileLoc, FileMode.Open);
            byte[] buffer = new byte[st.Length];
            st.Read(buffer, 0, (int)st.Length);

            SqlConnection conn = new SqlConnection("Data Source=dsname;Initial Catalog=test;User ID=test;pwd=password");
            SqlCommand cmd1 = new SqlCommand();
            cmd1.Connection = conn;
            //OpenConnection(conn);
            conn.Open();
            SqlCommand cmd = new SqlCommand("INSERT INTO Files(Data) VALUES(@Data)", conn);

            //string commandText = "INSERT INTO Files VALUES(@Name, @ContentType, ";commandText = commandText + "@Size, @Data)";
            //cmd.CommandText = commandText;
            //cmd.CommandType = CommandType.Text;

            //cmd.Parameters.Add("@Name", SqlDbType.NVarChar, 100);
            //cmd.Parameters.Add("@ContentType", SqlDbType.VarChar, 50);
            //cmd.Parameters.Add("@size", SqlDbType.Int);
            cmd.Parameters.Add("@Data", SqlDbType.VarBinary);

            //cmd.Parameters["@Name"].Value = "name";
            //cmd.Parameters["@ContentType"].Value = "contentType";
            //cmd.Parameters["@size"].Value = 5;
            cmd.Parameters["@Data"].Value = buffer;
            cmd.ExecuteNonQuery();

            SqlCommand command = new SqlCommand("select Data from Files", conn);
            byte[] buffer3 = (byte[])command.ExecuteScalar();

            FileStream fs2 = new FileStream(@"D:\op.txt", FileMode.Create);
            fs2.Write(buffer, 0, buffer.Length);
            fs2.Close();
            st.Close();
            conn.Close();
        } 
```

# jquery - jQuery 处理/隐藏预期的 Ajax 404 错误

> ID：12050790
> 
> 赞同：7
> 
> 时间：2012-08-21T08:21:16.067
> 
> 标签：jquery

我使用 ajax 头请求来检查文件。在大多数情况下，该文件不存在，最好以某种方式阻止 404 出现在我的调试控制台中。有没有很好的方法来实现这一目标？

为了清楚起见：http: [//jsfiddle.net/kannix/FFLdP/](http://jsfiddle.net/kannix/FFLdP/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T08:27:39.113

不，不幸的是，你不能。

404 错误是在内部处理的，您无法抑制错误，即使在 javascript 中覆盖错误事件或尝试捕获它也是如此。

您可以编写一个服务器脚本来检查某个文件是否存在，并在调用可能不存在的文件之前调用该文件来检查该文件是否存在。

# jquery - 如何通过 1 次实时点击调用多个函数？

> ID：12050793
> 
> 赞同：0
> 
> 时间：2012-08-21T08:21:35.397
> 
> 标签：jquery

我有这样的代码：

```
$("button[value^='SAVEALL']").live("click",function(){
    rowCheck(1);
    rowCheck(2);
    columnCheck(A);
    columnCheck(B);
    alert("all function passed");
});

function rowCheck(x){
        if (x>10){
              return false;
        }
}

function columnCheck(a){
        if (a=="A"){
              return false;
        }
} 
```

上面的代码，它只运行第一个函数，然后直接提交表单。如何确保它运行所有功能并在它们全部返回后提交表单`true`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:27:14.767

首先，您需要您的函数返回真或假，例如

```
function rowCheck(x){
    if (x>10){
          return false;
    }
    return true;
}

function columnCheck(a){
    if (a=="A"){
          return false;
    }
    return true;
} 
```

然后更改您的点击代码

```
$("button[value^='SAVEALL']").live("click", function(){
    if(rowCheck(1) && rowCheck(2) && columnCheck(A) && columnCheck(B))
    {
        return true;
    }
    return false;
        //alert("all function pass");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:22:48.640

尝试...

```
$("button[value^='SAVEALL']").live("click",function(e){
    e.preventDefault();
    rowCheck(1);
    rowCheck(2);
    columnCheck(A);
    columnCheck(B);
    alert("all function pass");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:41:39.847

您没有正确使用该事件。这是我要做的：

```
$("button[value^='SAVEALL']").live("click",function(event){
    if( rowCheck(1) || rowCheck(2) || columnCheck(A) || columnCheck(B) ) {
        event.preventDefault();
    }
});

function rowCheck(x){
        return (x>10);
}

function columnCheck(a){
        return (a=="A");
} 
```

主要变化：

*   为了代码可读性，我切换了返回值的含义。您使用了如此多的布尔反转，代码变得不清楚。如果必须停止事件，函数将返回`true`，而不是相反。
*   而不是返回`false`，这是一段不可读的代码，只需使用`event.preventDefault();`. 更干净，更具可读性。请记住，我不得不将您更改`function() {`为`function(event) {`!! click 事件是由浏览器传递的，阻止它发生比依靠一些过时的返回技术要好得多`false`。
*   **永远不要**使用像`if(some_boolean) { return true; }`. 这是一个坏习惯，丝毫不会增加可读性。

这是因为：

```
if ( name=="John" && lastname =="Smith") {
    return true;
} else {
    return false;
} 
```

总是可以改写为：

```
return ( name=="John" && lastname =="Smith"); 
```

# sql - How to remove null values from a count function

> ID：12050795
> 
> 赞同：1
> 
> 时间：2012-08-21T08:21:39.937
> 
> 标签：sql, oracle, null, count

I'm having trouble with my results of my count function, i think its due to the count(a1_journal.publisher_id) >=3 however instead of removing the results that are <3 from display it just gives them a null value.

Is there a way to either remove the null values from display (i tried a where col IS NOT NULL but it didn't work properly) or stop them from being selected in the count?

```
SELECT publisher_name, (select count(a1_journal.publisher_id)
FROM a1_journal
WHERE a1_journal.publisher_id=a1_publisher.publisher_id 
HAVING count(a1_journal.publisher_id) >=3)
AS Number_of_Journals
FROM a1_publisher
ORDER by Number_of_Journals DESC; 
```

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:25:36.177

问题是您返回表 a1_publisher 中的所有行。试试这个。

```
select j.publisher_id, count(j.publisher_id)
FROM a1_journal j inner join a1_publisher p ON  j.publisher_id=p.publisher_id 
GROUP BY j.publisher_id
HAVING count(j.publisher_id) >=3
ORDER BY count(j.publisher_id) DESC 
```

**更新：**

要选择出版商的名称，有两种方法。

1.  如果发布者的名称是唯一的，您可以像这样将列添加到分组依据

    ```
    select j.publisher_id,p.publisher_name, count(j.publisher_id)
    FROM a1_journal j 
      inner join a1_publisher p ON  j.publisher_id=p.publisher_id 
    GROUP BY j.publisher_id, p.publisher_name
    HAVING count(j.publisher_id) >=3
    ORDER BY count(j.publisher_id) DESC 
    ```

2.  如果它不是唯一的，您应该像这样与 a1_publisher 进行另一个联接。

    ```
    SELECT aj.publisher_id, aj.numberOfJournals, ap.publisher_name
    FROM a1_publisher ap 
    INNER JOIN (
        SELECT j.publisher_id, count(j.publisher_id) numberOfJournals
        FROM a1_journal j 
           inner join a1_publisher p ON  j.publisher_id=p.publisher_id 
        GROUP BY j.publisher_id
        HAVING count(j.publisher_id) >=3  ) aj 
    ON ap.publisher_id = ap.publisher_id
    ORDER BY count(j.publisher_id) DESC 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:30:37.893

您的查询以您所做的方式并不关心子选择中的 COUNT 。无论如何，它将为每个 publisher_name 处理。就处理方式而言，它的效率也很低。如果数据集非常大，性能很可能会非常显着。

您有几种方法可以解决此问题。一种方法是重写连接并使用 COUNT() 函数来聚合日志的数量，如下所示：

```
SELECT
    a1_publisher.publisher_name,
    COUNT(a1_journal.publisher_id) AS Number_of_Journals
FROM
    a1_publisher
INNER JOIN a1_publisher
    ON a1_journal.publisher_id = a1_publisher.publisher_id
GROUP BY
    a1_publisher.publisher_name
HAVING
    COUNT(a1_journal.publisher_id) >= 3 -- Here is your filter.
ORDER BY
    COUNT(a1_journal.publisher_id) DESC, a1_publisher.publisher_name ; 
```

现在，如果你想找到没有任何期刊的出版商，你可以稍微改变一下：

```
SELECT
    a1_publisher.publisher_name
FROM
    a1_publisher
LEFT  JOIN a1_publisher
    ON a1_journal.publisher_id = a1_publisher.publisher_id
WHERE
    a1_journal.pubhslier_id IS NULL
ORDER BY
    a1_publisher.publisher_name 
```

出于性能原因，在 a1_journal.publisher_id 上有一个索引，在 a1_publisher.publisher_id 上有一个索引（尽管我怀疑这已经是主键）

# google-app-engine - GAE appspot.com is blocklist?

> ID：12050796
> 
> 赞同：0
> 
> 时间：2012-08-21T08:21:41.523
> 
> 标签：google-app-engine

Using GAE mail service to send mails.while sending mail to one of ours. I have issue like as below.

Technical details of permanent failure:Google tried to deliver your message, but it was rejected by the recipient domain. We recommend contacting the other email provider for further information about the cause of this error. The error that the other server returned was: 550 550 5.7.1 rejected content, black listed XXXXXX.appspot.com by dbl.dnsbl. #762 #895 (o7F1ZY023821731400) (state 17).

so we look out **spamhaus** URL : [http://www.spamhaus.org/dbl/removal/record/appspot.com](http://www.spamhaus.org/dbl/removal/record/appspot.com) In that url

DBL record for appspot.com The domain name appspot.com is listed on the Spamhaus DBL.

appspot.com has been listed in the DBL because it is a spammer abused URL shortener or redirector.

If you are an authoritative administrator of appspot.com and you have solved the abuse issues you can write to us at dbl-mmxi@spamhaus.org from either abuse@appspot.com or postmaster@appspot.com and inform us of the actions you have taken to clean up the current spammer URLs. Please also inform us of any steps you have taken to prevent future abuse of your shortener/redirector. We will review your request and, at our discretion, remove the listing or respond to your request.

Please help to resolve this issue.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:14:04.943

您的选择是将[问题报告给 Google](http://code.google.com/p/googleappengine/issues/list)，以便他们可以尝试从黑名单中删除，或者您可以切换到使用其他服务从 App Engine 发送电子邮件。

我不能保证最好的外部电子邮件发送服务，因为我没有使用它们的经验，但其他人在邮件列表中建议的一些是 Amazon Simple Email Service、Sendgid 和 Message Bus。[请参阅此处的讨论](https://groups.google.com/d/topic/google-appengine/6KzdGoCw7ZQ/discussion)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:56:42.227

您应该使用地址 name@appid 从 appengine 发送邮件。**appspotmail** .com 不是 @appspot.com。以下是发送邮件的详细信息。 [https://developers.google.com/appengine/docs/python/mail/sendingmail](https://developers.google.com/appengine/docs/python/mail/sendingmail)

**从自定义域发送邮件：** 如果您从自定义域发送邮件，请确保为该域设置 spf 记录和 dkim。

要了解如何设置 SPF 记录，请查看[http://support.google.com/a/bin/answer.py?hl=en&answer=178723](http://support.google.com/a/bin/answer.py?hl=en&answer=178723)

要了解如何设置 DKIM 记录，请查看[https://developers.google.com/appengine/docs/python/mail/overview#DKIM](https://developers.google.com/appengine/docs/python/mail/overview#DKIM)

此外，有关发送邮件问题的更多背景信息，请阅读 Jeff Attwood 的这篇精彩文章[http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-通过-code.html](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)

**回应评论**：关于 .appspot.com 域被 SpamHaus 列入黑名单，您能否为您的 appengine 应用程序设置一个域而不是使用 appid.appspot.com 网址，看看这是否解决了您的问题？

# magento - Magento: show new products in category

> ID：12050803
> 
> 赞同：1
> 
> 时间：2012-08-21T08:22:17.080
> 
> 标签：magento, categories, product

i can't find a solution for my problem: i have a category with a layout.phtml created by me. in this category i want to show only the new products (setted up by new from date and new to date fields) of this category. i don't understand how to do this (xml or php no matter). anyone can help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:43:21.977

请尝试此操作以按类别 ID 过滤所有新产品 -

```
public function getProductCollection($catIds) {
$productIds = $this->getProductIdsByCategories($catIds);
$todayDate  = Mage::app()->getLocale()->date()->toString(Varien_Date::DATETIME_INTERNAL_FORMAT);
    $storeId    = Mage::app()->getStore()->getId();
    $collection = Mage::getResourceModel('catalog/product_collection')
                        ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
                        ->setStoreId($storeId)
                        ->addStoreFilter($storeId)
                        ->addMinimalPrice()
                        ->addTaxPercents()
                        ;
    Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($collection);
    Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($collection);

    $collection
        ->addAttributeToFilter('news_from_date', array('date' => true, 'to' => $todayDate))
        ->addAttributeToFilter('news_to_date', array('or'=> array(
            0 => array('date' => true, 'from' => $todayDate),
            1 => array('is' => new Zend_Db_Expr('null')))
        ), 'left')
        // ->addAttributeToSort('news_from_date', 'desc')

        ;

    if(count($productIds)) {
        $collection->addFieldToFilter('entity_id', array('in'=>$productIds));
    }

    return $collection;
} 
```

希望它会有所帮助。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:27:05.537

不起作用，但我已经以这种方式解决了（希望它可以帮助某人）：

*   首先，进入 CMS -> WIDGETS，然后创建 Catalog New Products List 的小部件。在里面，进行新的布局更新：显示在锚类别、主要内容、产品网格上。

*   其次，转到 template/catalog/product/widget/new/content/new_grid.phtml，然后添加以下内容：

    ```
     $currentCategory = Mage::registry('current_category');
            $category_model = Mage::getModel('catalog/category');
            $all_child_categories = $category_model->getResource()->getAllChildren($currentCategory); 
    ```

*   第三，在 foreach ($_products->getItems() as $_product) 之后添加：

    ```
     $visualizzo="";

            $diff = array_diff($all_child_categories, $_product->getCategoryIds());
            if(count($diff)==count($all_child_categories)){
                $visualizzo="display:none;";
            } 
    ```

*   最后，在 li class="item" 有一个样式，把它放进去：

# php - Generate multiple PDF files in loop in php

> ID：12050818
> 
> 赞同：0
> 
> 时间：2012-08-21T08:23:10.327
> 
> 标签：php

I want to create multiple pdf files using loop . I am putting code as below but only one file is generated and all data are written in that file only.How to generate multiple files.

My code is ..

```
for($i=0;$i<4;$i++)
{

$pli_ids=explode(",",$string);
foreach($pli_ids as $id)
{

    $data[]=array('inv_no'=>$inv_obj->invoice_number,'Work_order'=>'gandalf','data_type'=>$pli_obj->data_type_c_pl_c,'subscription'=>'subs1','hs_code'=>'hs1');
}
require_once ('include/pdf/class.ezpdf.php');
$pdf =& new Cezpdf();   
$pdf->selectFont('include/fonts/Helvetica.afm');

$pdf->ezSetY(750);
$pdf->ezText(date('d:M:Y'),14); $pdf->ezSetY(720);
$pdf->ezText('To,',14); $pdf->ezSetY(690);
$pdf->ezText('Mr. Kumar {contact Name}',14); $pdf->ezText('Kunal And Company Ltd {Account Name}',14);
$pdf->ezText('No 6, IInd Floor Marine Drive {contact shipping address}',14);$pdf->ezSetY(610);
$pdf->ezText('Mumbai, Pin: 560079',14); $pdf->ezText('Maharashtra',14);$pdf->ezText('Mob.:9977200030',14);
$pdf->ezSetY(550);
$pdf->ezText(' <c:uline>Sub.: Your order of Export Import News </c:uline> ',15);
$pdf->ezSetY(520);  
$pdf->ezText('Dear Mr. Kumar, {Customer Name}',14);
$pdf->ezSetY(490);
$pdf->ezText('Greetings for the day!.',14); $pdf->ezSetY(460);
$pdf->ezText('Thanks for being a valuable customer of Infodrive India,we have enclosed the data as follows.');
$pdf->ezSetY(430);  
$pdf->ezTable($data,array('inv_no'=>'Inv No.','Work_order'=>'Work Order non','data_type'=>'Data Type','subscription'=>'subscription','hs_code'=>'HS Code'),
    '',
    array('showHeadings'=>2,'shaded'=>1,'xPos'=>'right','xOrientation'=>'left','width'=>400));
$filename = "pdf_".$i;
$pdf->ezStream(array("Content-Disposition"=>$filename));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:33:03.137

您正在使用`ezStream()`将 pdf 发送到浏览器。您只能以这种方式发送一个文件。

# sql - 如何在 Zend Framework 2 中的 sql 查询中转义

> ID：12050819
> 
> 赞同：0
> 
> 时间：2012-08-21T08:23:10.680
> 
> 标签：sql, frameworks, zend-framework2, escaping

我在 Zend Framework 2 中有一个 sql 查询。它工作得很好，但我忘了转义我的 $sessionId，只是为了保护我的变量，这样没有人可以注入我的 SQL 查询。这是我的 sql 查询：

```
 SELECT parent.category_name, parent.category_id ,COUNT(product.product_id) AS count, 
    (select count(*) from Categories parent2 
    where parent.category_left > parent2.category_left
    and parent.category_right < parent2.category_right) as level
    FROM Categories parent
    LEFT OUTER JOIN Categories node 
    ON node.category_left BETWEEN parent.category_left AND parent.category_right
    LEFT OUTER JOIN products product
    ON node.category_id = product.product_category_id
    WHERE product.product_shop_id = '.$sessionId.'
    GROUP BY parent.category_name
    ORDER by node.category_left; 
```

我可以在 Zend $select 对象中编写它，使用这个 Zend 会自己逃脱它。有没有办法通过使用这个 sql 查询来 escpae 这个变量？（我也试过mysql_real_escape_string（），但我读过这个函数太旧了，无法使用。

问候 =)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:32:49.207

有很多方法可以做到这一点。看看这个问题：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

它讨论了至少 4-5 种不同的方法以及它们在 PHP 中转义一般查询的好处。

为了清楚起见，这里的方法并不特定于 Zend Framework.. 但 mysql_real_escape_string 也不是特定的:)

此外，除非您想使用 PDO（这是大多数人推荐的），否则我看不出 mysql_real_escape_string 有任何问题。我不认为在危险中使用它太旧了——只有更现代的方法可以实现同样的目标。

# c++ - 链接错误：不知道如何将数组作为函数参数传递/接收

> ID：12050823
> 
> 赞同：0
> 
> 时间：2012-08-21T08:23:19.460
> 
> 标签：c++, linker

我正在开发一个小型 OpenGL 演示，它读取物理传感器的方向（以四元数格式）并因此旋转屏幕上的对象。现在我正在尝试将四元数形式的旋转转换为旋转 4x4 矩阵。我在网上找到了一个小算法可以做到这一点。但是，我很难将四元数处理成矩阵，因为我不明白如何在 C++ 函数周围传递数组。

所以我正在尝试这样做：

```
#include "MatrixMath.h"

// somewhere in my render loop
float aRotationMatrix[16];
readRotation(aRotationMatrix); 
```

`readRotation`函数定义为：

```
void readRotation(float *a4x4Flat16Matrix){
   sQuaternionReader.read();
   float aQuaternion[4];

   aQuaternion[0] = sQuaternionReader.getQuarternionX();
   aQuaternion[1] = sQuaternionReader.getQuarternionY();
   aQuaternion[2] = sQuaternionReader.getQuarternionZ();
   aQuaternion[3] = sQuaternionReader.getQuarternionW();

   float *aMatrix = a4x4Flat16Matrix;

   fromQuaternionToMatrix(aQuaternion, aMatrix);  // this is declared faulty by the linker

} 
```

当我尝试编译时，链接器给了我这个错误：

```
./src/main/CupNPlate.cpp:151: error: undefined reference to 'fromQuaternionToMatrix(float*, float*)'
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [CupNPlate] Error 1 
```

该`fromQuaternionToMatrix`函数在名为“MatrixMath.h”的文件中声明：

```
#ifndef MATRIXMATH_H_
#define MATRIXMATH_H_

void fromQuaternionToMatrix( float *aQuaternion,
         float *a4x4Flat16Matrix );

#endif 
```

并在名为“MatrixMath.cpp”的文件中实现：

```
#include "MatrixMath.h"

void fromQuaternionToMatrix( float *aQuaternion,
         float *a4x4Flat16Matrix ){
   // x := 0, y := 1, z := 2, w := 3
   float x2 = aQuaternion[0] * aQuaternion[0];
   float y2 = aQuaternion[1] * aQuaternion[1];
   float z2 = aQuaternion[2] * aQuaternion[2];
   float xy = aQuaternion[0] * aQuaternion[1];
   float xz = aQuaternion[0] * aQuaternion[2];
   float yz = aQuaternion[1] * aQuaternion[2];
   float wx = aQuaternion[3] * aQuaternion[0];
   float wy = aQuaternion[3] * aQuaternion[1];
   float wz = aQuaternion[3] * aQuaternion[2];

   a4x4Flat16Matrix[0] =  1.0f - 2.0f * (y2 + z2);
   a4x4Flat16Matrix[1] =  2.0f * (xy - wz);
   a4x4Flat16Matrix[2] =  2.0f * (xz + wy);
   a4x4Flat16Matrix[3] =  0.0f;

   a4x4Flat16Matrix[4] =  2.0f * (xy + wz);
   a4x4Flat16Matrix[5] =  1.0f - 2.0f *(x2 + z2);
   a4x4Flat16Matrix[6] =  2.0f * (yz - wx);
   a4x4Flat16Matrix[7] =  0.0f;

   a4x4Flat16Matrix[8] =  2.0f * (xz - wy);
   a4x4Flat16Matrix[9] =  2.0f * (yz + wx);
   a4x4Flat16Matrix[10] =  1.0f - 2.0f * (x2 + y2);
   a4x4Flat16Matrix[11] =  0.0f;

   a4x4Flat16Matrix[12] =  0.0f;
   a4x4Flat16Matrix[13] =  0.0f;
   a4x4Flat16Matrix[14] =  0.0f;
   a4x4Flat16Matrix[15] =  1.0f;
} 
```

链接器告诉我`undefined reference to 'fromQuaternionToMatrix(float*, float*)'`，但我的函数的签名完全是`fromQuaternionToMatrix( float *aQuaternion, float *a4x4Flat16Matrix )`，所以我不明白它在抱怨什么。编译器没有给我任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:28:22.413

问题不是函数的**签名，而是****无法链接到任何实现**。

如果你向函数传递了错误的参数，你会得到一个**编译时错误**。您在这里得到的是**链接时间错误**。链接器找不到声明为的函数的任何实现`fromQuaternionToMatrix(float*, float*)`

在 Visual Studio 中（我无法评论其他 ide），您需要确保将您的**`.cpp`**文件添加到您的项目中。否则，如果您使用的是库，则需要在项目设置或代码中**引用该库。**

```
#pragma comment(lib, "LibFileName"); 
```

# networking - 如何通过 REST API 添加/编辑虚拟网络

> ID：12050827
> 
> 赞同：2
> 
> 时间：2012-08-21T08:23:32.923
> 
> 标签：networking, azure, virtual

我可以在管理门户中添加一个新的虚拟网络。

但是我怎样才能以编程方式做到这一点？

[这里的api](http://msdn.microsoft.com/en-us/library/windowsazure/jj157182)让我很困惑，我只能设置所有VNet的配置？真奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T20:16:15.677

是的，目前通过虚拟网络的 REST API 支持的唯一操作是：

1.  获取网络配置
2.  列出虚拟网络站点
3.  设置网络配置

你可以试试 Azure Powershell，因为它有很多[控制虚拟网络的选项](http://msdn.microsoft.com/en-us/library/windowsazure/jj863582.aspx)

[设置 Azure Powershell](http://msdn.microsoft.com/en-us/library/windowsazure/jj554332.aspx)并[在您的 c# 项目中运行 Powershell](http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C)也相当简单。

希望这些命令将在[未来版本](http://msdn.microsoft.com/en-us/library/windowsazure/gg592580.aspx)中添加到 REST api 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T07:05:22.000

你可以

使用 powershell 并创建函数

SetAzureVNetConfig（字符串文件路径）

列表命令 = new List();

```
 commands.Add(string.Format("Set-AzureVNetConfig -ConfigurationPath \"{0}\"", FilePath));

            PowershellEventArgs e = ps_.RunComands(commands); 
```

# django - 模板中表单外键的访问字段

> ID：12050831
> 
> 赞同：5
> 
> 时间：2012-08-21T08:23:45.147
> 
> 标签：django

我无法在模板的表单中显示字段的值。该值应该对模板可用，但似乎不是。

情况如下：

模型.py：

```
class Member(models.Model):
    ...
    name = models.CharField(max_length=10, unique=True)
    description = models.CharField(max_length=50, blank=True)

class Pool(models.Model):
    ...
    members = models.ManyToManyField(Member, through='MemberPoolDates')

class MemberPoolDates(models.Model):
    member = models.ForeignKey(Member)
    pool = models.ForeignKey(Pool)
    date = models.DateField(null=True, blank=True) 
```

视图.py：

```
 pool = Pool.objects.get(id=pool_id)
    MemberFormSet = modelformset_factory(MemberPoolDates, form=MemberForm)
    memberformset = MemberFormSet(queryset=MemberPoolDates.objects.filter(
                                                                      pool=pool)) 
```

模板：

```
<form action="" method="post">
{% csrf_token %}
<table>
{{ poolform }}
</table>
<h2>Pool entries:</h2>
{{ memberformset.management_form }}
{% for memberform in memberformset %}
    {{ memberform.id }}
    {{ memberform.member }} 
    {{ memberform.member.name }}
    {{ memberform.member.description }}
{% endfor %}
<input type="submit" name="save" value="Save pool"/>
</form> 
```

在模板中`{{ memberform.member }}`正确显示了一个下拉列表，但`{{ memberform.member.description }}`什么也不显示并`{{ memberform.member.name }}`显示“成员”而不是 member.name 的值作为文本（我想要的）。

如何访问模板中的成员字段？更具体地说，如何通过 memberform 在我的模板中显示 member.name 和 member.description 的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T10:26:00.333

您可以在模板中尝试此操作（访问表单的模型实例）：

```
{{ memberformset.management_form }}
{% for form in memberformset %}
    {{ form.instance.member.name }}
    {{ form.instance.member.description }}
{% endfor %} 
```

这应该将所需的字段输出为纯文本。

# ruby-on-rails - 如何将当前记录 ID 作为隐藏字段传递给 rails？

> ID：12050832
> 
> 赞同：3
> 
> 时间：2012-08-21T08:23:46.130
> 
> 标签：ruby-on-rails, forms, hidden-field

我有一个用于查看每个客户的页面，然后在其底部有一个表格以输入新许可证，我希望该表格自动使用当前页面客户的 ID 填充隐藏字段。这是我的隐藏字段的代码：

```
<%= f.hidden_field :customer_id, :value => '1' %> 
```

我目前已将该值设置为 1，这可行，但我需要它来自动使用 ID。这是我的控制器中用于此视图的内容：

```
def show
    @customer = Customer.find(params[:id])
    @license = License.find_by_customer_id(@customer.id)
    @software = Software.all
    @licenses = License.new

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @customer }
end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T08:28:06.800

尝试 `<%= f.hidden_field :customer_id, :value => @customer.id %>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:37:53.543

尽管隐藏字段是跨查询传递值的好方法，但它们并不安全，尤其是当您使用从客户端收到的值修改数据库记录时。

想象一个场景，您的客户是技术人员，并使用 Firebug 或类似工具修改隐藏字段的值。每个人都知道数据库表 ID 是递增的。您最终会为错误的客户创建许可证。

在我看来，一个好方法是获取与您当前登录的用户（您可能正在会话中）相关的客户，然后为该客户创建许可证。或者您可以将客户 ID 存储在会话中，然后相应地创建许可证。

请阅读[Rails 安全指南](http://guides.rubyonrails.org/security.html#privilege-escalation)。

# javascript - 无法实现 JavaScript 翻转计数器

> ID：12050833
> 
> 赞同：1
> 
> 时间：2012-08-21T08:23:52.103
> 
> 标签：javascript, html, counter

我想实现javascript翻转计数器。我包含了所有需要的文件并添加了本文中的代码 - [http://cnanney.com/journal/code/apple-style-counter-revisited/#demo](http://cnanney.com/journal/code/apple-style-counter-revisited/#demo)。

我在我的页面中添加了 html：

```
<div id="counter" class="flip-counter"></div> 
```

并将 javscript 添加到我的 application.js 中：

```
 var myCounter = new flipCounter("counter", {inc: 23, pace: 500}); 
```

这是我包含的文件（js和css）：

```
 <link href="/assets/application.css?body=1" media="all" rel="stylesheet" type="text/css" />
      <link href="/assets/counter.css?body=1" media="all" rel="stylesheet" type="text/css" /> 
```

```
 <link href="/assets/jquery-ui-1.8.22.custom.css?body=1" media="all" rel="stylesheet" type="text/css" />
      <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
      <script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
      <script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
      <script src="/assets/jquery-flipcounter.js?body=1" type="text/javascript"></script>
      <script src="/assets/jquery-ui-1.8.22.custom.min.js?body=1" type="text/javascript"> </script>
      <script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

我还将在这里写下演示页面包含的文件：

```
 <!-- My flip counter script, REQUIRED -->
<script type="text/javascript" src="js/flipcounter.js"></script>
<!-- Style sheet for the counter, REQUIRED -->
<link rel="stylesheet" type="text/css" href="css/counter.css" />
<!-- NOT REQUIRED FOR COUNTER TO FUNCTION, JUST FOR DEMO PURPOSES -->
<!-- jQuery from Google CDN, NOT REQUIRED for the counter itself -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<!-- jQueryUI from Google CDN, used only for the fancy demo controls, NOT REQUIRED for the counter itself -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>
<!-- Style sheet for the jQueryUI controls, NOT REQUIRED for the counter itself -->
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/vader/jquery-ui.css" />
<!-- Style sheet for the demo page, NOT REQUIRED for the counter itself -->
<link rel="stylesheet" type="text/css" href="css/demo.css" /> 
```

这是带有工作计数器的 rar 存档：[https](https://dl.dropbox.com/u/86122402/cnanney-apple-style-flip-counter-13fd00129a41.rar) ://dl.dropbox.com/u/86122402/cnanney-apple-style-flip-counter-13fd00129a41.rar 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:55:55.603

将此添加到您的`application.js`

```
$(function(){
    var myCounter = new flipCounter("counter", {inc: 23, pace: 500});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:55:48.397

一切看起来都应该有效。

尝试在自匿名调用函数中添加 JavaScript。

```
$(function(){
    var myCounter = new flipCounter("counter", { inc:123, pace:600});
}); 
```

还要确保所有包含的文件都指向正确的位置。

将其替换为以下内容进行测试。

```
<script type="text/javascript" src="js/flipcounter.js"></script>
<link rel="stylesheet" type="text/css" href="css/counter.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/vader/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="css/demo.css" /> 
```

# css - 当被锚点包围时，div 标签周围有白色边框

> ID：12050835
> 
> 赞同：2
> 
> 时间：2012-08-20T23:07:38.060
> 
> 标签：css, joomla, google-chrome

我遇到了一个奇怪的问题。

我使用 div 标签制作了这些按钮，它们具有圆角边缘，并且它们的边框颜色在 CSS 中定义。为了让它们指向某个地方，我用`<a>`标签包围了它们。问题是，当链接指向以前访问过的东西时，div 边框变成白色。通常，我只是检查 Chrome 中的元素以查看哪个 CSS 规则执行此操作，但是一旦我导航到该元素，边框就会自行修复为它应该是的颜色。

这发生在 Chrome 中，但不在 IE 或 Firefox 中。

另外，我正在使用 Joomla 1.5 和 Artisteer 来制作模板（虽然我确实修改了很多）。

作为一个临时解决方案，我使用了 onclick JavaScript 链接来使按钮工作，但我认为这对于搜索引擎爬虫来说不太好。

你有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:31:20.283

在 chrome 开发人员工具中，您可以选择在悬停时查看元素等。如果您没有为 a:active、a:visited 等分配样式，您应该这样做。如果您需要更多帮助，请将您的代码发布到 jsfiddle

# java - 在 context.getBundle(0).adapt(FrameworkWiring.class).getDependencyClosure(bundles) 上使用 Maven 编译包时出错

> ID：12050837
> 
> 赞同：0
> 
> 时间：2012-08-21T08:24:00.990
> 
> 标签：java, maven-2, osgi, bundle, apache-felix

关于使用代码进行捆绑编译

```
 package ihtika2.mainform;

import com.google.code.ihtika.Vars.Ini;
import ihtika2.mainform.service.MainFormInterface;
import java.util.HashSet;
import java.util.Hashtable;
import org.osgi.framework.Bundle;
import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;
import org.osgi.framework.InvalidSyntaxException;
import org.osgi.framework.ServiceReference;
import org.osgi.framework.wiring.FrameworkWiring;

public class Activator implements BundleActivator {

    @Override
    public void start(BundleContext context) throws Exception {
        Hashtable<String, String> props = new Hashtable<String, String>();
        props.put("Funct", "MainForm");
        context.registerService(MainFormInterface.class.getName(), new MainForm(), props);

        ServiceReference[] refs = context.getServiceReferences(
                MainFormInterface.class.getName(), "(Funct=MainForm)");
        if (refs == null) {
            System.out.println("Not Found MainForm on start");
        } else {
            MainFormInterface MainForm = (MainFormInterface) context.getService(refs[0]);
            MainForm.sendContext(context);
            MainForm.showWindow();
        }

        int x = 0;
        for (Bundle qqq : context.getBundles()) {
            if (x < 1) {
                HashSet<Bundle> bundles;
                bundles = new HashSet<Bundle>();
                bundles.add(qqq);
                HashSet<Bundle> depends = (HashSet<Bundle>) context.getBundle(0).adapt(FrameworkWiring.class).getDependencyClosure(bundles);
                System.out.println("---");
                System.out.println(qqq.getSymbolicName());
                System.out.println("+++");
                for (Bundle depends1 : depends) {
                    System.out.println(depends1.getSymbolicName());
                }
            }
                x++;
        } 
```

我收到错误

```
cd C:\Art\Dropbox\OpenSource\MyGIT\ihtika\Sources\Bundles\I_MainForm; JAVA_HOME=C:\\Java\\jdk1.7.0_06 "\"C:\\Program Files\\NetBeans Dev 201208160001\\java\\maven\\bin\\mvn.bat\"" clean install
Scanning for projects...

------------------------------------------------------------------------
Building I_MainForm OSGi Bundle 1.0-SNAPSHOT
------------------------------------------------------------------------

[clean:clean]
Deleting C:\Art\Dropbox\OpenSource\MyGIT\ihtika\Sources\Bundles\I_MainForm\target

[resources:resources]
[debug] execute contextualize
Using 'UTF-8' encoding to copy filtered resources.
Copying 1 resource

[compiler:compile]
Compiling 5 source files to C:\Art\Dropbox\OpenSource\MyGIT\ihtika\Sources\Bundles\I_MainForm\target\classes
-------------------------------------------------------------
COMPILATION ERROR : 
-------------------------------------------------------------
ihtika2/mainform/Activator.java:[38,109] error: cannot find symbol
1 error
-------------------------------------------------------------
------------------------------------------------------------------------
BUILD FAILURE
------------------------------------------------------------------------
Total time: 1.886s
Finished at: Tue Aug 21 12:21:25 MSK 2012
Final Memory: 10M/25M
------------------------------------------------------------------------
Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project I_MainForm: Compilation failure
\Art\Dropbox\OpenSource\MyGIT\ihtika\Sources\Bundles\I_MainForm\src\main\java\ihtika2\mainform\Activator.java:[38,109] error: cannot find symbol
-> [Help 1]

To see the full stack trace of the errors, re-run Maven with the -e switch.
Re-run Maven using the -X switch to enable full debug logging.

For more information about the errors and possible solutions, please read the following articles:
[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

请告诉我，如何编译这段代码？我使用 apache-maven-2.2.1、jdk1.7.0_06 编译 1.6 代码（在 NetBeans 项目中设置）。有趣的是——NetBeans 没有在这个字符串上显示错误 (Activator.java:[38,109]) 并认为这个代码是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:58:55.790

您需要使用 osgi.core 4.3 或更高版本。FrameworkWiring 类型是在 osgi.core 4.3 中引入的。[http://mvnrepository.com/artifact/org.osgi/org.osgi.core/4.3.0](http://mvnrepository.com/artifact/org.osgi/org.osgi.core/4.3.0)

Apache Felix 4.0 添加了对 osgi.core 4.3 的支持。[http://www.infoq.com/news/2011/09/felix-400](http://www.infoq.com/news/2011/09/felix-400)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T17:45:10.477

问题出在来自 Central Maven 存储库的 Felix 4.0.3 和 org.osgi.core (4.3.0) jar 包中。

我猜他们已经过时了。

据我了解，除了 Osgi 版本（4.3）也有修订。

中央 Maven 存储库中的库可能已过时。

解决方案 - 下载并编译源代码

[https://svn.apache.org/repos/asf/felix/trunk/](https://svn.apache.org/repos/asf/felix/trunk/)框架。

即 - 源下载后，在包含源的文件夹中：

光盘框架

mvn 安装

它的命令将编译 Felix 并将其安装到您的本地 Maven 存储库。在此之后，您可以使用新的 Felix 捆绑包 (SNAPSHOT)，而不是来自 Central Maven 存储库的捆绑包。

对不起我的英语不好。

# selenium - 使用 CSS 选择器选择元素 A 或元素 B

> ID：12050840
> 
> 赞同：0
> 
> 时间：2012-08-21T08:24:07.563
> 
> 标签：selenium, css-selectors, sizzle

有没有办法选择 CSS 选择器表达式中指定的 2 个元素之一？如果未找到元素 A，则选择元素 B。

例子：

```
css=input[id$=sometext]@id OR textarea[id$=sometext]@id 
```

上面的表达式应该返回以“sometext”结尾`id`的`input`元素或`textarea`元素。`id`

作为旁注，我正在尝试在 selenium2library 中使用这个 CSS 选择器，它使用[嘶嘶声](https://github.com/jquery/sizzle/wiki/Sizzle-Documentation)来处理 css 选择器。

我尝试了以下方法，它们似乎都不起作用（语法错误）：

```
css=input[id$=sometext]@id / textarea[id$=sometext]@id
css=input[id$=sometext]@id/textarea[id$=sometext]@id
css=input[id$=sometext]@id/css=textarea[id$=sometext]@id
css=input[id$=sometext]@id OR css=textarea[id$=sometext]@id
css=input|textarea[id$=sometext]@id
css=input[id$=sometext]@id, textarea[id$=sometext]@id
css=input[id$=sometext]@id,textarea[id$=sometext]@id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:06:38.513

Sizzle 使用 CSS 选择器，例如，`@id`它不是 CSS 选择器。我个人不确定`@id`应该是什么意思，但是，如果没有那部分，请尝试：

```
input[id$=sometext],textarea[id$=sometext] 
```

# javascript - MVC：使用 Web 窗体视图引擎在 javascript 中迭代 Viewbag 数组

> ID：12050841
> 
> 赞同：1
> 
> 时间：2012-08-21T08:24:08.830
> 
> 标签：javascript, asp.net-mvc

我正在尝试迭代一个字符串数组的内容，该数组由控制器放入 ViewBag 中，在 javascript 中。

在控制器中：

```
ViewBag.Addresses = new string[] {"a", "b", "c"}; 
```

在视图中：

```
<script language="javascript" type="text/javascript">
    function ExecuteOnLoad() {

        var array = How do I get "a", "b" and "c" here?;
        for (var i = 0; i < array.length; i++) {
            doSomething(array[i]);
        }
    }

</script> 
```

我搜索了很多答案，但似乎只为剃刀视图引擎找到了解决方案。网络表单呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:52:21.380

在你看来

```
<script language="javascript" type="text/javascript">
    function ExecuteOnLoad() {

        var array = <%= Html.Raw(ViewBag.Addresses)%>;
            for (var i = 0; i < array.length; i++) {
                document.write(array[i]);
            }
        }
</script> 
```

然后从您的控制器中：

```
JavaScriptSerializer js = new JavaScriptSerializer();
//serializes array into json

ViewBag.Addresses = js.Serialize(new[] { "a", "b", "c" }); 
```

就我个人而言，我会考虑创建一个视图模型并将数组序列化为视图模型上的一个属性，然后在您的视图中执行此操作：

```
<script language="javascript" type="text/javascript">
    function ExecuteOnLoad() {

        var array = <%= Html.Raw(Model.Addresses)%>;
            for (var i = 0; i < array.length; i++) {
                document.write(array[i]);
            }
        }
</script> 
```

# java - 通过 Hibernate 检索 Oracle 序列

> ID：12050843
> 
> 赞同：0
> 
> 时间：2012-08-21T08:24:30.290
> 
> 标签：java, oracle, hibernate

我在 oracle 中定义了以下序列：

```
CREATE SEQUENCE MySequence
MINVALUE 65536 
MAXVALUE 4294967296 
START WITH 65536
INCREMENT BY 1
CYCLE
NOCACHE
ORDER; 
```

我想知道如何通过 Hibernate 访问它（每次我请求的下一个值）？（通过 JDBC 我使用了 getGEnerateKeys）

在需要持久化的另一个实体上使用它之前，我需要该 id。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:34:37.797

我认为只要序列是您的主键 - 例如

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO) 
private int id; 
```

然后当你运行：

```
 Integer id = (Integer)session.save(obj); 
```

它将返回 id。

请参阅 Javadoc：[http](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#save(java.lang.Object) ://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#save(java.lang.Object )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:35:52.127

没有 JPA 标准的方法可以做到这一点，但如果您确实需要，您当然可以访问底层 JDBC 连接。但请注意，一旦实体被持久化，实体的 ID 应该会自动填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:37:17.430

对于 Oracle，您应该使用***GenerationType.SEQUENCE***

```
 @Id
    @GeneratedValue(generator="MySequence", strategy=GenerationType.SEQUENCE)
    @SequenceGenerator(allocationSize=1, name="MySequence", sequenceName="MySequence") 
```

编辑：序列名称已更新

编辑：参考您的评论：您的要求听起来像使用序列的复合/嵌入 id（使用多列作为主键）。但不幸的是，这两种解决方案都不支持序列生成器。到目前为止，我可以说；

*您可以通过休眠创建本机查询并使用 ' 附加到索引号`select mySequence.nextval from dual`。

*或者您可以使用通过子查询显示序列+索引的新列创建一个 oracle 视图。

*这是一个非常实验性的，我没有尝试，但你可以使用 @formula 注释。[这里](https://stackoverflow.com/questions/3331529/native-sql-query-for-an-hibernate-entity-using-formula-results-in-nullpointerex)的例子。

# c# - 如何以编程方式获取我被 NAT 的 IP 地址？（即我的公共 IP）

> ID：12050844
> 
> 赞同：0
> 
> 时间：2012-08-21T08:24:29.960
> 
> 标签：c#, ip, nat

我想获得我正在被 NAT 的 IP 地址（例如，呈现给外界的 IP 地址，而不是我的本地 IP）。

类似于您从 www.ipchicken.com 获得的结果。

我怎样才能得到这个？本地 IP 信息很容易找到，但我不知道如何获取 ISP 分配的 IP。

我需要它的原因是我的网络基础设施使得我有两个网络外的网关。如果一个失败，它会透明地跳到另一个。一切都很好，但是没有警报机制告诉我我已经失败了。

我相信很难获得这些信息。我想我可以采取的另一种方法是将网络服务放在外部托管的网络服务器上——这个想法是它返回查询主机的 IP。（但是，我也不知道该怎么做！）我怀疑这可能是最简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:32:10.673

有很多的ip服务

比如这个。只需提出`GET`请求并分配一个简单的 html： [http ://checkip.dyndns.org/](http://checkip.dyndns.org/)

有关此服务的更多详细信息（政策和规则）： [http ://dyn.com/support/developers/checkip-tool/](http://dyn.com/support/developers/checkip-tool/)

**upd** 如果您需要经常检查您的 IP，您最好添加您自己的网络服务。.dyndns.org 允许在 10 分钟内检查一次 ip。

您可以在 Web 服务上运行一些 .net 代码：

```
((IPEndPoint)tcpClient.Client.RemoteEndPoint).Address.ToString(); 
```

但我认为脚本语言（python？）会更合适。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:27:12.963

您的计算机无法在本地访问此信息；您需要从执行此操作的众多网络服务之一中获取它。

# java - 如何运行独立的 Eclipse MAT？

> ID：12050846
> 
> 赞同：3
> 
> 时间：2012-08-21T08:24:35.687
> 
> 标签：java, eclipse, memory-profiling

我使用 jmap 生成了 hprof。

```
sudo ~/jdk/bin/jmap -F -dump:file=app.hprof 5003 
```

现在，在 Eclipse 中解析 *.hprof 时出现 OOM / 'Java Heap Space' 错误。我想我需要单独运行它。

我该如何运行它？任何参考？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:28:08.853

我假设，您已经[以 Standalone Eclipse RCP Application 的形式下载了 Eclipse MAT](http://www.eclipse.org/mat/downloads.php)。如果没有 - 现在就这样做，并将存档解压缩到适合您的文件夹。

你得到了 OOME，因为 MAT 的可用内存太少（你正在解析的堆转储太大）。

要使堆更大，请编辑您的`MemoryAnalyzer.ini`文件（它应该在您的 MAT 目录中），并在其中添加以下行：

```
-vmargs
-Xmx2048M 
```

这`2048M`意味着 JVM 可以使用 2 GB 的堆空间。也许 1 GB 对您来说就足够了。

**笔记！** 如果您将 MAT 用作 Eclipse 插件，则可以通过`eclipse.ini`在 Eclipse 目录中进行编辑来实现相同的技巧。

# java - 日期时间 Java 与 mysql

> ID：12050848
> 
> 赞同：0
> 
> 时间：2012-08-21T08:24:55.490
> 
> 标签：java, mysql, datetime, connector

我在 mysql 中有列

```
id, unique_guid, attribute1, ..., create_time, update_time 
```

一张桌子。

如果它从未使用 create_time 创建过，或者如果它已创建，我想创建一条记录，只需替换一些/所有属性和 update_time。我正在使用 Java，并使用 mysql 连接器。

有没有一种方法可以做到这一点，而无需查询记录的存在然后更新它，最终以两个查询结束？

PS：注意create_time、update_time不是mysql的“timestamps”，是“datetime”。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:28:51.497

使用`ON DUPLICATE KEY UPDATE`：[http ://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.6/en/insert-on-duplicate.html)

它是特定于 MySQL 的，但它会满足您的要求。

# ms-access - 连接超类型/子类型？

> ID：12050849
> 
> 赞同：1
> 
> 时间：2012-08-21T08:24:57.747
> 
> 标签：ms-access, database-design

我必须连接名为的超类型实体

*   用户（User_ID (PK)、User_Password、Registration_Date 等）。

以下实体之一：

*   员工（ Employee_ID (PK) 、 Fname 、 Lname 、 Birthdate .. 等）
*   客户（ Customers_ID (PK) 、 Fname 、 Lname 、 Birthdate .. 等）
*   供应商（Supplier_ID (PK)、Fname、Lname、Birthdate .. 等）..

如何使用 Ms-Access 进行操作（对于关系数据库）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:38:52.437

在关系数据库中表示继承一般有 3 种策略：

1.  一切都在一张桌子上。
2.  单独表格中的具体类型。
3.  单独表格中的所有类型。

(3) 可能是最常见和最“干净”的，即使它可能涉及相当多的 JOINing。在您的情况下，您将在子表（引用父表）中有 FK，并通过应用程序逻辑强制子表的存在¹和排他性²。可以通过支持循环和延迟 FK 的 DBMS 以声明方式强制执行这些操作，但在 MS Access 中则不行。

您可能想查看[这篇文章](https://stackoverflow.com/a/12037398/533120)以获取更多信息。

* * *

*¹所以用户不能只是用户——它必须是员工、客户或供应商。*

*²因此，用户不能（例如）同时是客户和供应商。*

# java - 生成 X.509 证书并使用此证书签署电子邮件

> ID：12050851
> 
> 赞同：0
> 
> 时间：2012-08-21T08:25:08.673
> 
> 标签：java, android

我已经通过windows下的这个命令行成功生成了一个根证书

```
openssl req -config openssl.conf -new -x509 -days 1001 -key keys/ca.key -out certs/ca.cer 
```

**我的问题如下：**

如何在 java 中从此根证书生成证书，并使用此证书签署邮件？我目前正在使用`JavaMail`图书馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:02:33.963

您需要 Java Crypto API 和加密提供程序。这是一个著名的 Java 加密提供者：http: [//www.bouncycastle.org/java.html](http://www.bouncycastle.org/java.html) 有用于生成和处理 X509 证书和签名内容的类。

下面是几个使用 BouncyCastle 创建签名电子邮件的示例。 [http://www.docjar.org/docs/api/org/bouncycastle/mail/smime/examples/package-index.html](http://www.docjar.org/docs/api/org/bouncycastle/mail/smime/examples/package-index.html)

此示例还生成密钥/证书： http: [//www.docjar.org/html/api/org/bouncycastle/mail/smime/examples/CreateSignedMultipartMail.java.html](http://www.docjar.org/html/api/org/bouncycastle/mail/smime/examples/CreateSignedMultipartMail.java.html)

祝你好运！

# git - 使用 2 个存储库进行贡献时使用 Git

> ID：12050855
> 
> 赞同：0
> 
> 时间：2012-08-21T08:25:27.270
> 
> 标签：git, github

我只是想知道当我们有 2 个存储库（一个主存储库和一个克隆存储库）时，最好的提交方式是什么

假设... User1 Github 帐户中有一个 Project1(Project 1 Repository)

我正在克隆并从 User1:Project1 制作 RajProject1

现在我如何使用我的存储库和 User1:project1 存储库我如何提交到这两个存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:36:05.760

有两种方法：提交并推送到您自己的存储库，然后发出拉取请求，以便您的更改可以包含在原始存储库中。这就是 GitHub 上的协作通常的工作方式。

否则，如果您对原始存储库具有推送访问权限，则可以将您的存储库和原始存储库作为远程 (git remote add) 添加到本地副本，然后您可以将更改推送到两个存储库。

# python - Python - 模糊测试

> ID：12050861
> 
> 赞同：0
> 
> 时间：2012-08-21T08:25:55.117
> 
> 标签：python, testing

我正在用 Python 进行这个模糊测试，但我有一些问题。当我编译这段代码时，我有下一个错误：

```
Traceback (most recent call last): 
  File "vm_main.py", line 33, in <module> 
    import main 
  File "/tmp/vmuser_tgqlkfrnov/main.py", line 44 
    return fuzzit 
SyntaxError: 'return' outside function 
```

我可以给点建议吗？

这是我的代码：

```
import array

import random

import math

content = """
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Phasellus sollicitudin condimentum libero,
sit amet ultrices lacus faucibus nec.
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Cum sociis natoque penatibus et magnis dis parturient montes,
nascetur ridiculus mus. Cras nulla nisi, accumsan gravida commodo et,
venenatis dignissim quam. Mauris rutrum ullamcorper consectetur.
Nunc luctus dui eu libero fringilla tempor. Integer vitae libero purus.
Fusce est dui, suscipit mollis pellentesque vel, cursus sed sapien.
Duis quam nibh, dictum ut dictum eget, ultrices in tortor.
In hac habitasse platea dictumst. Morbi et leo enim.
Aenean ipsum ipsum, laoreet vel cursus a, tincidunt ultrices augue.
Aliquam ac erat eget nunc lacinia imperdiet vel id nulla."""

def fuzzit(content):

    buf = bytearray(content)
    strlst = list()

    for j in range(numwrites):
        rbyte = random.randrange(256)
        rn = random.randrange(len(buf))
        buf[rn] = "%c" %(rbyte)
        strlst[i] = array.tostring(buf)
fuzzed = strlst[:]
return fuzzit 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:35:28.800

Python 使用缩进设置它的结构而不是花括号。您`return`需要缩进以与您的`for`陈述保持一致。

从外观上看，您似乎正试图`fuzzit`在 .py 中返回该方法？这在 python 中是不可能的，你想做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:17:00.847

我不确定你是否理解 Fredrik 关于缩进的理解。看起来你的 strlst 是你想要返回的。尝试这个

```
for j in range(numwrites):
    rbyte = random.randrange(256)
    rn = random.randrange(len(buf))
    buf[rn] = "%c" %(rbyte)
    strlst[i] = array.tostring(buf)
return strlst[:] 
```

# iphone - 显示 NSLocalnotification 时如何在后台创建或设置设备锁定

> ID：12050862
> 
> 赞同：0
> 
> 时间：2012-08-21T08:25:55.527
> 
> 标签：iphone, ios, xcode, ios4

我创建了一个警报应用程序。我用来`UILocalNotification`在后台显示通知。我的通知消息由通知显示`AlertBody`。

但是，我不知道如何`Slider`根据`AlertBody`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:18:27.247

您无法设置 iOS 处理通知的方式。用户可以在设置应用程序中设置通知的显示方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:09:32.400

您需要参考`UILocalNotification`以下文档的一些链接`UILocalNotification`...通常您不能设置消息`Slider Lock`的 instad `AlertBody` 。

下面描述一些链接。

[.pdf 文件用于 NSLocalNotification](http://developer.apple.com/library/ios/documentation/iPhone/Reference/UILocalNotification_Class/UILocalNotification_Class.pdf)

[链接1](http://www.picksourcecode.com/ps/ct/161237.php)

[链接2](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)

# azure - Azure .NET 4.5 支持

> ID：12050865
> 
> 赞同：10
> 
> 时间：2012-08-21T08:26:13.520
> 
> 标签：azure, .net-4.5

好的，我在网上找不到明确的答案，所以我想我会在这个问题上向社区提问。.NET 4.5 上周已采用 RTM，并正在考虑升级我们的产品以使用它。在我们实现这一飞跃之前，我首先需要检查这是否会影响我们产品的任何 Azure 部署（ASP.NET MVC 的东西） Azure 平台的最新生产版本是否在其 Web 和辅助角色中支持 .NET 4.5？我知道框架的 RC 可以在虚拟机/角色预热期间使用启动电源 shell 脚本安装，但我不希望我的应用程序有这个负担，我只是想知道它可以安全使用在 Azure 的当前状态下与 .NET 4.5 和 MVC 4 等一起生活？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-29T02:32:19.603

Azure SDK v1.8（2012 年 10 月）可供下载： [http ://www.microsoft.com/en-us/download/details.aspx?id=35448](http://www.microsoft.com/en-us/download/details.aspx?id=35448)

支持：.NET 4.5、Windows Server 2012 和 IIS 8.0：http: [//msdn.microsoft.com/en-us/library/windowsazure/ff683673.aspx#BK_October2012](http://msdn.microsoft.com/en-us/library/windowsazure/ff683673.aspx#BK_October2012)

要使用支持 .NET 4.5 的 Windows Server 2012，请将 Azure 角色 .cscfg 文件中的 osFamily="2" 更改为 osFamily="3"。

编辑：我昨晚将我的两个站点更新为 Windows Server 2012/.NET 4.5，它们的工作方式非常出色。所以，这就是等待公告的所有 RTM/stable 代码（也许是 BUILD 2012？）。如果您使用的是 Windows Server 2012，则需要启用 .NET 3.5 功能以向后兼容 .NET 2.0-.NET 3.5 应用程序/模块。

Edit2：昨天在 BUILD 2012 会议上宣布了 Azure 4.5 支持 :) [http://channel9.msdn.com](http://channel9.msdn.com)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T17:20:29.697

微软今天宣布 Azure 现在将支持 .NET 4.5。

[http://techcrunch.com/2012/10/31/azure-mobile-services-now-supports-windows-phone-8-announces-azure-store/](http://techcrunch.com/2012/10/31/azure-mobile-services-now-supports-windows-phone-8-announces-azure-store/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T01:09:12.710

即使在下载并安装上面列出的@Bart 的 2012 年 10 月更新（通过页面上的 WebPI 链接）之后，您可能仍然需要删除您的 Azure 项目并重新制作它——这是唯一删除*“Windows Azure 云服务项目目前支持在 .NET Framework 3.5 和 4 版上运行的角色。请在项目设置中*为我设置 Target Framework 属性“项目”错误。

即使我将 osFamily 更改为“3”，错误仍会继续，直到我将 Azure 项目吹走。

我没有尝试将此作为修复，但我想知道将 .cscfg 中的 schemaVersion 设置为 `schemaVersion="2012-10.1.8"`是否会否定我将其吹走的需要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T18:45:44.610

如果您需要在 Azure 上使用 .Net 4.5，请访问 Azure UserVoice 网站并为它投票：[http ://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2598170-iis8 -and-asp-net-4-5-support-in-azure-platform](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/2598170-iis8-and-asp-net-4-5-support-in-azure-platform)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T20:34:15.633

微软今天刚刚宣布，即将对 Azure 提供 .NET 4.5 支持，并发布了现有应用程序的升级指南。

似乎担心的是 .NET 4.5 中推出的一些 .NET 4.0 更改和错误修复可能会对现有的 Web 应用程序产生不利影响。该电子邮件暗示升级将于本周末推出，并要求人们在 Visual Studio 2012 中升级到 .NET 4.5。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T18:16:06.783

对于 Windows Azure 云服务 (PaaS)，Windows Azure SDK 仅支持 .net 4.0。由于 .net 4.5 只是 RTM，Windows Azure SDK 需要一些时间才能支持 .net 4.5，但是没有讨论任何时间线，如果有这方面的任何信息，它将与 Windows Azure 网站进行通信。

如果您的应用程序必须具有 .net 4.5，您可以使用带有 Windows 操作系统的 Windows Azure 虚拟机并安装 .net 4.5 并根据您的选择构建/部署/运行 MVC4 应用程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-11T14:23:12.603

Windows Azure 网站显然在预览版中添加了对 .Net 4.5 的支持。

[http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/3fab0f32-23c9-4122-9ece-8c3edbadde47](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/thread/3fab0f32-23c9-4122-9ece-8c3edbadde47)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-26T09:47:37.790

**据[Scott Guthrie](http://weblogs.asp.net/scottgu/archive/2012/10/25/net-4-5-now-supported-with-windows-azure-web-sites.aspx)称，截至 10 月 25 日，Windows Azure*网站支持 .NET 4.5***

Windows Azure 云服务（Web 和 Worker 角色）将在“未来几天”（大概在 2012 年 10 月末）得到支持。

# jboss - JBoss 7 SNMP 适配器

> ID：12050868
> 
> 赞同：3
> 
> 时间：2012-08-21T08:26:28.547
> 
> 标签：jboss, jboss7.x, snmp

我正在寻找 JBoss 7 的 SNMP 适配器。

到目前为止，我发现有[一个](https://community.jboss.org/wiki/JBossSNMPAdapter)为 JBoss 5 开发的，我还在[这里](https://community.jboss.org/thread/147085)找到了一个讨论，其中有人采用旧代码并开始[与 7 兼容，](http://code.google.com/p/commscale/source/list?repo=snmp-adaptor&name=master)但工作还远未完成。

任何人都有我在这个主题上缺乏的更多信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:12:25.160

过了一段时间，我会回答这个问题。

没有关于该主题的更多信息。工作仍有待完成。:)

# tabs - rubymine 自定义选项卡字符样式？

> ID：12050875
> 
> 赞同：1
> 
> 时间：2012-08-21T08:27:22.590
> 
> 标签：tabs, character, rubymine

我检查了一下`"use tab character"`，`"show whitespaces"`此时我的 ruby​​ 页面看起来像这样 [http://d.pr/i/aHSv](http://d.pr/i/aHSv)。[我如何像这样http://d.pr/i/tpGp](http://d.pr/i/tpGp)转换标签字符样式，如我的 vim 样式

rubymine 支持自定义选项卡字符样式？我如何设置它？

macox ruby​​mine 4.5.2 build #RM-119.46

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:25:15.647

RubyMine 没有设置来自定义编辑器中的选项卡符号外观。

# delphi - C++ Builder XE2 - 作为项目/项目组一部分的自定义组件

> ID：12050876
> 
> 赞同：1
> 
> 时间：2012-08-21T08:27:22.770
> 
> 标签：delphi, c++builder, custom-component, c++builder-xe2

是否可以使用从默认组件派生的自定义组件仅作为项目的一部分可见？这种解决方案的优点是我不需要将组件的源代码与应用程序的源代码分开分发。此外，其他开发人员无需始终检查他们是否安装了最新版本。我不需要管理各种版本并将它们复制到某个地方以与团队中的其他开发人员共享我的更改（无论是网盘还是 SVN 服务器）。他们从服务器获得每次 SVN 更新的新版本。如果我使用 delphi 会有解决方案 - interposer 类，但这不适用于我。MS Visual Studio 可以仅将组件用作解决方案的一部分（类似于 MS VS 解决方案是 C++ Builder 中的 ProjectGroup）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T18:21:24.213

仅当组件仅在运行时动态创建时，您所要求的才有可能。如果组件需要在设计时可访问，则必须先将其安装到 IDE 中，然后项目才能使用它。

# refresh - 多次设置 RaiseListChangedEvent 属性的性能问题

> ID：12050887
> 
> 赞同：2
> 
> 时间：2012-08-21T08:28:07.663
> 
> 标签：refresh, bindingsource, performance-testing, listchanged

在刷新控件之前，我将其 bindingsource 的 RaiseListChangedEvent 属性设置为 false，然后在刷新后将其再次设置为 true 并将 ResetBindings 设置为 false。

如果场景是这样的：

```
set RaiseListChangedEvent = false in 100 times 

then

set RaiseListChangedEvent = true in 100 times

set ResetBindings(false) 
```

它会导致任何性能问题吗？

# asp.net - 如何设置 ASP.NET DataPager 省略号的样式

> ID：12050889
> 
> 赞同：2
> 
> 时间：2012-08-21T08:28:09.400
> 
> 标签：asp.net, datapager, ellipsis

我正在使用 DataPager 对 ListView 进行分页，并将 NumericPagerField 的 ButtonCount 属性设置为 5，以将要显示的页码的最大计数限制为 5。但是通过这样做，当页面超过 5 个时，它显示 1或 2 个椭圆 (...)。有什么方法可以设置这些椭圆的样式或让它们消失吗？

编辑：我想澄清一下。我想要做的是在总页数超过 ButtonCount 属性时隐藏 DataPager 中的省略号（可能是通过设置 display:none 样式，但我找不到为其设置 css 样式的方法）。请看下面的图片

![在此处输入图像描述](../Images/52d4ed59964b20ae3f2722e1ebf07b05.png)

这是我的代码：

```
<asp:DataPager ID="datapager" PageSize="16" PagedControlID="someId" runat="server"
                QueryStringField="page">
                ...
                <Fields>
                    <asp:NumericPagerField RenderNonBreakingSpacesBetweenControls="false" NumericButtonCssClass="someClass other"
                        CurrentPageLabelCssClass="someClass current" ButtonCount="4" />
                </Fields>
                ...
            </asp:DataPager> 
```

如您所见，我为数字按钮和页面标签设置了 css 类，但它不适用于省略号。所以我不能在我的样式表中选择省略号。任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T08:34:34.663

您可以将 NumericPagerField 的 NextPreviousButtonCssClass 属性设置为 CSS 类以隐藏省略号，如下所示 -

CSS -

```
.nextPreviousButtonCSS
{
    display: none;
} 
```

ASP.NET -

```
<Fields>
    <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="false" ShowNextPageButton="false"
        ShowPreviousPageButton="true" ButtonCssClass="ButtonCSS" />
    <asp:NumericPagerField RenderNonBreakingSpacesBetweenControls="false" NumericButtonCssClass="someClass other"
        NextPreviousButtonCssClass="nextPreviousButtonCSS" CurrentPageLabelCssClass="someClass current"
        ButtonCount="4" />
    <asp:NextPreviousPagerField ButtonType="Button" ShowLastPageButton="false" ShowPreviousPageButton="false"
        ShowNextPageButton="true" ButtonCssClass="ButtonCSS" />
</Fields> 
```

**注意**：您需要像上面一样使用 NextPreviousPagerField 标签手动添加下一个和上一个按钮。

希望这可以帮助。

# php - PHP中带键的数组映射

> ID：12050892
> 
> 赞同：14
> 
> 时间：2012-08-21T08:28:21.490
> 
> 标签：php, arrays, map

只是出于好奇（我知道它可以是单行`foreach`语句），是否有一些 PHP 数组函数（或许多函数的组合）给出了如下数组：

```
Array (
    [0] => stdClass Object (
        [id] => 12
        [name] => Lorem
        [email] => lorem@example.org
    )
    [1] => stdClass Object (
        [id] => 34
        [name] => Ipsum
        [email] => ipsum@example.org
    )
) 
```

并且，给定`'id'`and `'name'`，产生类似：

```
Array (
    [12] => Lorem
    [34] => Ipsum
) 
```

我经常使用这种模式，我注意到`array_map`在这种情况下它非常没用，因为你不能为返回的数组指定键。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-08T13:52:50.780

只需使用[`array_reduce`](http://php.net/manual/en/function.array-reduce.php)：

```
$obj1 = new stdClass;
$obj1 -> id = 12;
$obj1 -> name = 'Lorem';
$obj1 -> email = 'lorem@example.org';

$obj2 = new stdClass;
$obj2 -> id = 34;
$obj2 -> name = 'Ipsum';
$obj2 -> email = 'ipsum@example.org';

$reduced = array_reduce(
    // input array
    array($obj1, $obj2),
    // fold function
    function(&$result, $item){ 
        // at each step, push name into $item->id position
        $result[$item->id] = $item->name;
        return $result;
    },
    // initial fold container [optional]
    array()
); 
```

这是一条没有评论的线^^

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T09:07:32.267

我发现我可以做到：

```
array_combine(array_map(function($o) { return $o->id; }, $objs), array_map(function($o) { return $o->name; }, $objs)); 
```

但这很丑陋，需要在同一个阵列上进行两个完整的循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T13:52:13.413

最简单的方法是使用 LINQ 端口，例如[YaLinqo](https://github.com/Athari/YaLinqo)库*。它允许对数组和对象执行类似 SQL 的查询。它的[`toDictionary`](http://athari.github.io/YaLinqo/docs/classes/YaLinqo.Enumerable.html#method_toDictionary)函数接受两个回调：一个返回结果数组的键，一个返回值。例如：

```
$userNamesByIds = from($users)->toDictionary(
    function ($u) { return $u->id; },
    function ($u) { return $u->name; }
); 
```

或者您可以使用字符串使用更短的语法，这相当于上面的版本：

```
$userNamesByIds = from($users)->toDictionary('$v->id', '$v->name'); 
```

如果省略第二个参数，则对象本身将用作结果数组中的值。

[* 由我开发]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-26T08:22:31.220

最简单的方法是使用 array_column()

```
$result_arr = array_column($arr, 'name', 'id');
print_r($result_arr ); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-08T13:14:22.213

因为你的数组是对象数组，所以你可以调用（它就像一个类的变量）尝试用这个调用：

```
 foreach ($arrays as $object) {
    Echo $object->id;
    Echo "<br>";
    Echo $object->name;
    Echo "<br>";
    Echo $object->email;
    Echo "<br>";
 } 
```

然后你可以做

```
 // your array of object example $arrays;
 $result = array();
 foreach ($arrays as $array) {
       $result[$array->id] = $array->name;
 }

   echo "<pre>";
   print_r($result);
   echo "</pre>"; 
```

对不起，我用手机接听。无法编辑代码

# javascript - Javascript：Schema Explorer Chrome Extension 循环需要忽略不相关的嵌套元素

> ID：12050906
> 
> 赞同：1
> 
> 时间：2012-08-21T08:29:05.697
> 
> 标签：javascript, google-chrome-extension, schema.org

**这对于 Javascript 专家来说**应该很容易。

对于那些不知道什么是架构 ( [http://schema.org](http://schema.org) ) 的人来说，这是搜索引擎读取网页内容的一种新方式。它通过使用特定标签标记相关数据来工作。

对于那些知道它是什么的人，这里有一个 chrome 扩展（[模式资源管理器](https://chrome.google.com/webstore/detail/docnladpefffgdocnidfngejcagdkedb)），它可以很容易地检查你的数据在页面上的样子。请参阅示例。

**现在：**扩展存在一个小问题，其中 by is 不会跳过/忽略空的嵌套元素。这里有两个例子：**第一个**完美运行，但**第二个炸弹**因为空`<div>`标签：

**第一个示例有效：**

```
<div itemscope="" itemtype="http://schema.org/Movie">
   <h1 itemprop="name">Avatar</h1>
   <div itemprop="director" itemscope="" itemtype="http://schema.org/Person">
      Director: <span itemprop="name">James Cameron</span> (born <span itemprop="birthDate">August 16, 1954</span>)
   </div>
   <span itemprop="genre">Science fiction</span>
   <a href="http://pierreloicdoulcet.fr/movies/avatar-theatrical-trailer.html" itemprop="trailer">Trailer</a>
</div> 
```

**秒示例给出了问题：**

```
<div itemscope="" itemtype="http://schema.org/Movie">
   <div>
     <h1 itemprop="name">Avatar</h1>
     <div itemprop="director" itemscope="" itemtype="http://schema.org/Person">
         Director: <span itemprop="name">James Cameron</span> (born <span itemprop="birthDate">August 16, 1954</span>)
     </div>
     <span itemprop="genre">Science fiction</span>
     <a href="http://pierreloicdoulcet.fr/movies/avatar-theatrical-trailer.html" itemprop="trailer">Trailer</a>
   </div>
</div> 
```

我查看了扩展程序，实际上它与一个完成大部分工作的 javascript 文件很好地组合在一起。这是执行循环的代码，**但是**它需要能够跳过空的嵌套元素，并且**通常可能更健壮一点**：

```
 var __explore = function(node, parentData)
    {
        if (parentData === null || parentData === undefined)
        {
            parentData = __dataTree;
        }
        if (node.getAttribute)
        {
            var isItemScope = node.getAttribute('itemscope');
            var hasItemProp = node.getAttribute('itemprop');
            var itemtype = node.getAttribute('itemtype');

            var childs = node.childNodes;

            var i = 0;

            var tmp = new Array();

            while (i < childs.length)
            {
                if (isItemScope !== null)
                    __explore(childs[i], tmp);
                else
                    __explore(childs[i], null);
                ++i;
            }

            if (isItemScope !== null)
            {
                parentData.push({name : 'scope', value : hasItemProp, type : itemtype, childs : [tmp], node : node});
            }
            else if (hasItemProp && parentData)
            {
                parentData.push({name : hasItemProp, value :  node.innerText});
            }
        }
    } 
```

这是`contentscript.js` [https://gist.github.com/3413475的完整版本](https://gist.github.com/3413475)

希望有人可以帮助我。作为记录，我已经联系了作者，但他一直忙于更紧急的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:58:35.180

我让它按预期工作：http: [//jsfiddle.net/vyrvp/1/](http://jsfiddle.net/vyrvp/1/)但我必须承认这有点骇人听闻。此代码可能需要更多重构以使其适用于所有情况并使其可读。

# android - Android：不包括源路径

> ID：12050907
> 
> 赞同：4
> 
> 时间：2012-08-21T08:29:10.663
> 
> 标签：android, build

在我的项目中，我添加了一些我希望包含在项目中的源文件文件夹。但无论我做什么，来源永远不会得到认可。我尝试刷新，清理，重新启动，但没有任何效果。这是项目的源文件夹：

![项目源文件夹](../Images/cb7ea4e8aa1df6d1a03b1c3dc50be98f.png)

我想要添加文件夹 integration/android。这是它在 Eclipse 中的显示方式：

![Eclipse 文件夹](../Images/3e946630000b398cf070b98ac8193548.png)

这是我的构建配置的样子：

![在此处输入图像描述](../Images/4549af0642cb3905f80846c3eef2793f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:38:30.067

我可能是错的，但看起来您已将它们添加为文件夹，但实际上并未将该文件夹添加到您的项目中。

该文件夹应显示在其他包下的解决方案资源管理器窗口中的 src 文件夹中。

尝试在您的项目中创建包名，然后将所有 src 文件移入其中。

当它在 src 文件夹中时，在其正确的包中，您不需要包含任何额外的构建路径。

（您可以在一个应用程序中拥有多个包）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:58:01.720

导入别人超过 2 年的项目几乎总是有问题的。我找到了最简单的解决方案，即创建一个新项目并从旧项目手动添加文件。

# wordpress - 从网站到 WordPress 还是从 WordPress 到网站？

> ID：12050908
> 
> 赞同：2
> 
> 时间：2012-08-21T08:29:14.447
> 
> 标签：wordpress

我希望这不是太基本以至于偏离主题，但我想知道在多大程度上可以自定义 WordPress 以适应现有设计。我有一个设计想法并在某处阅读（WordPress 手册？），可以只使用 WordPress 管理网站的一小部分，然后慢慢将整个网站迁移到 WordPress 管理。如果想保留某个设计，这是否比调整 WordPress 模板更可取？也就是说，我应该从一个网站开始慢慢进入WordPress，还是应该从WordPress模板开始，尝试调整它，直到我得到我想要的设计。是否有任何属于轻量级（但图像重）网站的 WordPress 网站示例，它们表现出不受 WordPress 模具的束缚？（这是不是太模糊了？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:34:27.630

您的方法取决于您设置两个相邻站点的技术能力。

通常，您必须修改 Wordpretss 主题以适合您的设计。我更喜欢骨架主题 - [http://themehybrid.com/themes](http://themehybrid.com/themes) Skeleton/Hybrid 之一。这种方法的问题是，您必须从头开始构建您的设计，并将其融入 Wordpress 的做事方式。Wordpress 喜欢输出带有额外 CSS 样式的 HTML，通常使用这些元素更容易，然后修改它们以适合您的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:44:43.970

一般来说，如果您打算在最后使用 WordPress，我认为从一开始就使用 WordPress 会更有意义。在 WordPress 中拥有一小部分后，将您的网站转变为完全由 WordPress 管理会容易得多。这是因为，虽然许多设计只需稍作调整即可轻松融入 HTML WordPress，但 WordPress 主题是其自身的一个特定子类别，如果您从 CSS 开始，移动的障碍将更少与 WordPress 兼容。

WordPress 还可以轻松覆盖单个页面节点，因此您网站的静态部分可以非常松散地成为 WordPress 的一部分，并且您可以完全控制标记。在开始编写您的标记时，要知道您已经必须做什么才能让您的设计与 WordPress 一起工作，而不是稍后过渡到 WordPress。

如果您是 WordPress 主题的新手，这里有一些链接可以帮助您入门：

[http://codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development)

[http://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/](http://themeshaper.com/2009/06/22/wordpress-themes-templates-tutorial/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T19:19:42.700

My personal choice, I'd start using WordPress right away, learn as much as I can about the CMS aspects, you have great tutorials at WP101 (dot) com then move to create or built your own templates. I'd suggest you first start with a simple template like Twenty Ten and modify it then perhaps you can use Responsive which is my favorite or many others. This 2 sites for example were built in WP

[http://www.philiphousenyc.com/](http://www.philiphousenyc.com/) and [http://www.danielhopwood.com/](http://www.danielhopwood.com/)

Good Luck, Mike

# c - Linux 上 `ru_maxrss` 的单位是什么？

> ID：12050913
> 
> 赞同：17
> 
> 时间：2012-08-21T08:29:40.737
> 
> 标签：c, linux, memory, memory-management, getrusage

这是从`man getrusage`

```
struct rusage {
    struct timeval ru_utime; /* user time used */
    struct timeval ru_stime; /* system time used */
    long   ru_maxrss;        /* maximum resident set size */
    long   ru_ixrss;         /* integral shared memory size */
    long   ru_idrss;         /* integral unshared data size */
    long   ru_isrss;         /* integral unshared stack size */
    long   ru_minflt;        /* page reclaims */
    long   ru_majflt;        /* page faults */
    long   ru_nswap;         /* swaps */
    long   ru_inblock;       /* block input operations */
    long   ru_oublock;       /* block output operations */
    long   ru_msgsnd;        /* messages sent */
    long   ru_msgrcv;        /* messages received */
    long   ru_nsignals;      /* signals received */
    long   ru_nvcsw;         /* voluntary context switches */
    long   ru_nivcsw;        /* involuntary context switches */
}; 
```

但是没有具体说明单位是什么。

我看到 FreeBSD 的文档说它以千字节为单位，但我不确定它在 Linux 上是什么单位。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-21T08:33:21.660

它不是结构的[标准](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/sys_resource.h.html)字段，`rusage`因此 POSIX 没有任何要求。但是在[Linux上](http://www.kernel.org/doc/man-pages/online/pages/man2/getrusage.2.html)

> `ru_maxrss`（自 Linux 2.6.32 起）
> 
> 这是使用的最大驻留集大小（**以千字节为单位**）。对于 RUSAGE_CHILDREN，这是最大子进程的驻留集大小，而不是进程树的最大驻留集大小。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T08:33:16.120

[手册页](http://linux.die.net/man/2/getrusage)说：

> `ru_maxrss`（自 Linux 2.6.32 起）
> 
> 这是使用的最大驻留集大小（以千字节为单位）。对于**RUSAGE_CHILDREN**，这是最大子进程的常驻集大小，而不是进程树的最大常驻集大小。

因此，它以千字节表示，就像在 BSD 中一样。

# java - Java - 用户输入字符串，使用本机方法打印 2d String [][]

> ID：12050915
> 
> 赞同：1
> 
> 时间：2012-08-21T08:29:48.720
> 
> 标签：java, regex, arrays, string, loops

我很有趣学习如何仅使用本机纯 java 实现 2d String [] [] 数组控制台打印输出。以下代码在我运行程序时打印出一个二维矩阵，但是在将我的字符串转换为二维数组时进行一些测试运行时，一个特定的行令人困惑：

```
rulesTable[i][j] = rulesMatrix[j]; 
```

有没有一种方法可以编码，其中 rulesMatrix 将 = 到 2d 字符串数组，而不是我目前拥有的 1d 字符串数组？任何提示都会很棒。谢谢你。以下代码段包含有问题的循环：

```
protected void forgeGrammar()
{

    //this verifies that all 5 rules displayed in the console are valid
    grammarRules = new String(startingRule + secondRule + thirdRule + fourthRule + fifthRule);

    rulesArray = new String[grammarRules.length()];

    //remove the commas from the grammar  
    rulesArray = grammarRules.split("[,]");

    //convert the grammar to a 2D String array
    rulesTable = new String[rulesArray.length][5];
    for (int i = 0; i < rulesTable.length; i++)
    {
        String[] rulesMatrix = rulesArray[i].split(blank);

        for(int j = 0; j < rulesMatrix.length; j++)
        {
            rulesTable[i][j] = rulesMatrix[j];
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:44:02.330

在你的代码`rulesTable`中永远不会被初始化，这就是为什么 NullPointer 异常在下面的行中被抛出

```
rulesTable[0][0].contains(rules_input.substring(0, 4)); 
```

# c# - 增加线程和进程优先级以减少处理器密集型并行化应用程序的执行时间

> ID：12050925
> 
> 赞同：5
> 
> 时间：2012-08-21T08:30:32.390
> 
> 标签：c#, .net, multithreading, performance, optimization

我知道设置线程优先级是堆栈溢出的一个禁忌话题，但我相信我的应用程序是提高优先级的良好候选者。为了证明这一点，我在下面解释了上下文。现在的问题是如何有效地做到这一点？

该应用程序是执行复杂算法的 .NET 4 (C#) 控制台应用程序，执行时间约为 5 小时。该算法根本不是内存密集型的，只是处理器密集型的。它进行数字运算，不执行任何磁盘 I/O、数据库连接、网络连接等。应用程序的输出只是一个数字，它在最后写入控制台。换句话说，该算法是完全自包含的，没有依赖关系。

该应用程序在其自己的专用 16 核 64 位计算机上运行，​​该计算机运行 Windows Server，其可用 RAM 远远超过其所需 (8GB)。专用我的意思是已经购买了服务器来专门运行这个应用程序。

我已经通过广泛的分析、花哨的数学快捷方式和一些小技巧，尽可能地优化了代码。

这是伪代码的整体结构：

```
public static void Main ()
{
    Process.GetCurrentProcess().PriorityBoostEnabled = true;
    Process.GetCurrentProcess().PriorityClass = ProcessPriorityClass.RealTime;

    // Of course this only affects the main thread rather than child threads.
    Thread.CurrentThread.Priority = ThreadPriority.Highest;

    BigInteger seed = SomeExtremelyLargeNumber; // Millions of digits.

    // The following loop takes [seed] and processes some numbers.
    result1 = Parallel.For(/* With thread-static variables. */);

    while (true) // Main loop that cannot be parallelized.
    {
        // Processes result1.
        result2 = Parallel.For(/* With thread-static variables. */);

        // Processes result2.
        result1 = Parallel.For(/* With thread-static variables. */);

        if (result1 == criteria)
            break;

        // Note: This loop does not need to sleep or care about system responsiveness.
    }
} 
```

现在基于 SO 上的线程优先级相关问题，我认为任何使用 ThreadPool 的东西都不应该在优先级方面被搞乱。所以如果我需要切换到手动线程，就这样吧。

**问题：**

*   我应该如何将上述代码更改为手动线程以受益于增加的线程优先级（不使用线程池等）？
*   将所有子线程的优先级设置为最高会有所帮助吗？我的意思是子线程会只是相互争斗，还是会让它们在外部操作系统任务中占据优势？
*   考虑到有 16 个内核，我应该运行 16 个还是 15 个线程？对此有一般指导方针吗？
*   将进程优先级设置为实时是否也有帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:20:02.050

使用这样的应用程序，我希望更改优先级会对整体运行时间产生 0% 的影响。如果您已经在所有 16 个内核以 100% 的速度完成实际工作的情况下最大限度地使用 CPU，那么您就无能为力了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:37:06.867

您无需为单个线程设置优先级而烦恼，只需为整个进程执行此操作，因为它的大多数线程显然都在做重要的工作。

**但是**，我不希望它对像您这样的 CPU 密集型应用程序有任何影响。唯一可以强行抢占您自己进程的进程是 I/O 密集型应用程序，这些应用程序传统上受到大多数操作系统的青睐，但由于您有一台专用机器，这不会成为问题（此外，根据我的经验，Windows Server 非常轻量级，因此如果您的应用程序是唯一运行的应用程序，它不会干扰）。

作为旁注：

> 该算法根本不是内存密集型的，只是处理器密集型的。它进行数字运算，不执行任何磁盘 I/O、数据库连接、网络连接等。

它不执行“明显”的 I/O 操作这一事实并不意味着它不能占用大量内存。如果您正在处理大型数组或其他数据结构，CPU 将不断地向主内存发出读/写操作，并且正在进行大量工作以在各个内存级别之间移动数据。如果操作不当，即使只使用数字也会对程序的性能产生负面影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-18T18:43:21.393

我的代码可以改变进程和线程的优先级。

```
public void SetPriorityProcessAndTheards(string nameProcess,ProcessPriorityClass processPriority, ThreadPriorityLevel threadPriorityLevel)
{
    foreach(Process a in Process.GetProcessesByName(nameProcess))
    {
        a.PriorityBoostEnabled = true;
        a.PriorityClass = processPriority;

        foreach(ProcessThread processThread in a.Threads)
        {
            processThread.PriorityLevel = threadPriorityLevel;
            processThread.PriorityBoostEnabled = true;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:02:49.973

我希望您将线程数限制为内核/线程数。有时并行任务库使用太多线程。对于您的 cpumaxed 进程，corecount 或 threadcount（添加了超线程 fakecores）是最好的，因此请提供并修复 threadcount；

```
 // Create a ParallelOptions object and supply this to the Parallel.For() 

 var po = new ParallelOptions {MaxDegreeOfParallelism = Environment.ProcessorCount}
 Parallel.For(,,po,);

 // Environment.ProcessorCount gives number of Cores (NOT processors)
 // Never found out how to detect fake cores or hyperthreads, check Task Monitor ;-) 
```

您可以将 po 对象重新用于所有 parallel.For() 语句。即使在 CPU 绑定的线程应用程序上，我也从未真正从优先级摆弄中受益。

# django - 在 django 中，什么会导致 object.get() 中出现无法捕获的异常？

> ID：12050926
> 
> 赞同：0
> 
> 时间：2012-08-21T08:30:35.587
> 
> 标签：django

如果找到主键，此代码将打印 'a' 'b' 'e'。如果不是，则仅打印“a”。什么会导致异常被吞下？

```
def foo(request, e_pk):
    try:
        pprint('a')
        facet = models.EntryFacet.objects.get(pk=e_pk)
        pprint('b')
    except models.EntryFacet.DoesNotExist:
        pprint('c ' + sys.exc_info()[0])
    except ObjectDoesNotExist:
        pprint('d ' + sys.exc_info()[0])
    pprint('e')
    return render_to_response(...) 
```

环境：django 1.3，Linux。settings.py 有 DEBUG = True TEMPLATE_DEBUG = DEBUG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:54:32.723

当你尝试

```
print('c ' + sys.exc_info()[0]) 
```

它引发 TypeError: cannot concatenate 'str' and 'type' objects 所以你应该使用：

```
print('c %s' % sys.exc_info()[0]) 
```

也看看[get_object_or_404](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#get-object-or-404)

# java - 这个接口声明在java中是什么意思？

> ID：12050927
> 
> 赞同：0
> 
> 时间：2012-08-21T08:30:36.903
> 
> 标签：java, generics, interface

这可能是一个菜鸟问题，但我正在学习 java，我遇到了一个接口，其定义如下：

`public interface MyClass <T extends Comparable<T>>`

有人可以解释一下这是什么意思吗？我的意思是创建了什么样的界面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:34:30.283

这意味着泛型类型参数必须实现`Comparable`接口。

指定时`<T extends Comparable<T>>`，您可以在 type 的此接口中使用例如 Collections.sort `T`。没有`extends`你不能保证`T`是可比的。

Numbers 和 String 例如可比较并实现`Comparable`接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:34:47.170

该接口采用`T`与`Comparable`other相同的类型`T`。

接口大致相同，只是它的泛型类型受到限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T18:51:03.997

这意味着 T 必须在同一个对象上实现 Comparable。

例如

```
public interface MyClass <T extends Comparable<T>> 
```

然后你可以使用如下

```
public class MyImpl implements MyClass<String> 
```

它是有效的，因为 String 实现了 Comparable。但是下面这句话是无效的，因为 MyNewImpl 没有实现 Comparable。

```
public class MyNewImpl {}    
public class MyImplTwo implements MyClass<MyNewImpl> 
```

问候伊格纳西奥

# sublimetext2 - Sublime text 2 - 更改标签颜色

> ID：12050929
> 
> 赞同：4
> 
> 时间：2012-08-21T08:30:39.587
> 
> 标签：sublimetext2

我正在使用 Sublime Text 2 - 我想让它成为我的默认工作程序。

我已经安装了 Dreamweaver 主题 - 但我有一些问题：

我不知道如何更改标签（a、img、form 等）的颜色。都有相同的颜色，不像 Dreamweaver CS4（见图）。

![在此处输入图像描述](../Images/ef646bff612e26e9dc958adef116b629.png)

我怎样才能改变每个颜色？

我的主题代码中有这个：

```
<dict>
      <key>name</key>
      <string>html img tag</string>
      <key>scope</key>
      <string>text.html meta.tag.img - string</string>
      <key>settings</key>
      <dict>
        <key>foreground</key>
        <string>#6d232eff</string>
      </dict>
    </dict>
    <dict>
      <key>name</key>
      <string>html form tag</string>
      <key>scope</key>
      <string>text.html meta.tag.form - string</string>
      <key>settings</key>
      <dict>
        <key>foreground</key>
        <string>#ff9700ff</string>
      </dict>
    </dict> 
```

但是当我更改字符串标签中的颜色时，无法正常工作 - 是否缺少某些东西？

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:54:21.313

尝试这个：

```
 <dict>
        <key>name</key>
        <string>Tag name</string>
        <key>scope</key>
        <string>entity.name.tag</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#EA0000</string>
        </dict>
    </dict>
    <dict>
        <key>name</key>
        <string>Tag start/end</string>
        <key>scope</key>
        <string>punctuation.definition.tag.html, punctuation.definition.tag.begin, punctuation.definition.tag.end</string>
        <key>settings</key>
        <dict>
            <key>foreground</key>
            <string>#EA0000</string>
        </dict>
    </dict> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T22:48:51.230

它归结为语言定义 ( `.tmLanguage`) 文件。默认情况下，HTML 语言定义在一般标记级别中断，不要问我为什么，但它遵循[TextMate 的 Scope Selector 模式](http://manual.macromates.com/en/scope_selectors)。据我所知，人们使用 JSON 编写语言文件，然后将其转换为`.plist`文件，并将扩展名更改为`tmLanguage`文件。

我发现最简单的方法是[安装 Siddley 的增强 HTML/ColdFusion 包](https://github.com/Siddley/Enhanced.HTML.CFML)，使用增强的 HTML 语言和其中一种 DW 配色方案。

> 经过一番查看，我发现 Siddley 将一些标签聚集在一起。我可能正在扩展语言定义文件。如果我愿意，我会在 github 上发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-10T04:30:52.963

按照此步骤在您的 sublime 中应用 Dreamweaver cs5 的配色方案。

[单击此处下载 Dreamweaver 主题 Zip 文件](https://www.dropbox.com/s/xj9tjueqan1gnxc/SublimeDreamweaver-master.rar?dl=0)

**如何应用 Dreamweaver CS5 等配色方案**

```
1\. Download zip file from Dreamweaver Theme File Link
2\. Extract folder
3\. Open sublime and goto "Preferences">"Browser Packages..">"Paste extract folder here"
4\. Restart Sublime
5\. Select color scheme from sublime, to select color scheme Goto "Preferences">"Color Scheme">"SublimeDreamweaver-master">"SublimeDreamweaver-master">"Dreamviwer"
6\. Restart Again your sublime
7\. Now open your file to see effect
8\. Thanks 
```

**在应用dreamviwer 的配色方案后更改字体，如dreamviwer。**

```
1\. Goto "Preferences">"Setting - User"
2\. Add this line is your setting json, "font_face":"courier new"
3\. Save enjoy 
```

[![在此处输入图像描述](../Images/8b87364688031db6b055e372ac4b7757.png)](https://i.stack.imgur.com/pn5in.jpg)

谢谢

# android - 可点击的文本视图链接

> ID：12050932
> 
> 赞同：0
> 
> 时间：2012-08-21T08:31:07.333
> 
> 标签：android, hyperlink, webview, textview, clickable

如何创建可点击的`textview`链接以在 webview 中打开？

我希望它可以点击的 textview 链接是[`http://d2d.tp.edu.sg/d2d/web/advstandingenq.aspx`](http://d2d.tp.edu.sg/d2d/web/advstandingenq.aspx). 我对其进行了编程，使其能够在启动应用程序时打开 webview。

```
public class Hellowebview extends Activity {

private WebView mWebView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.hellowebview);

    mWebView=(WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.setInitialScale(1);
    mWebView.getSettings().setLoadWithOverviewMode(true);
    mWebView.getSettings().setUseWideViewPort(true);
    mWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    mWebView.setScrollbarFadingEnabled(false);
    mWebView.loadUrl("http://www-eng.tp.edu.sg/eng_met_home");
    mWebView.setWebViewClient(new HelloWebViewclient());
    }

    private class HelloWebViewclient extends WebViewClient{
        @Override
        public boolean shouldOverrideUrlLoading(WebView webview,String url)
        {
            webview.loadUrl(url);
            return true;
        }
    }
    @Override
    public boolean onKeyDown(int keyCode,KeyEvent event)
    {
        if ((keyCode==KeyEvent.KEYCODE_BACK) && mWebView.canGoBack())
        {
            mWebView.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.hellowebview, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:36:59.567

```
TextView tv.setText(Html.fromHtml("<u>"+"open link"+"</u> "));
tv.setMovementMethod(LinkMovementMethod.getInstance()); 
```

并使用

```
tv.setOnClickListener(new OnClickListener() {
    public void onClick(View v) 
    {
        //ur code to open webview
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:40:17.367

为此使用下面的代码，它可能会对您有所帮助。

```
TextView mTxtViewPreview = (TextView) findViewById(R.id.mTxtViewPreview);
mTxtViewPreview.setText(Html.fromHtml("<a href=\"http://www-eng.tp.edu.sg/eng_met_home\">Click to View Invoice</a> "));
mTxtViewPreview.setMovementMethod(LinkMovementMethod.getInstance()); 
```

# web2py - web2py - 在控制器或视图中构建表单？

> ID：12050934
> 
> 赞同：0
> 
> 时间：2012-08-21T08:31:12.043
> 
> 标签：web2py

通过手册（第 4 版）工作，并且只想知道什么被认为是使用帮助程序进行编码的最佳方式，我应该让他们在控制器或视图中构建表单。

我的（非常）有限的经验我认为它会是后者...... pg83

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:01:25.510

> 我的（非常）有限的经验我认为它会是后者...... pg83

“后者”是指观点吗？因为 p 上的例子。83 本书在控制器中构建表单，而不是视图（当然，最终表单是在视图中序列化的）。

一般来说，您可能应该在控制器中处理表单（这是规范）。但是，为了处理表单，您必须首先创建它——因此它也应该在控制器中创建。

有关一般何时何地使用 HTML 助手的更多信息，请参见[此处](https://stackoverflow.com/questions/8091487/what-are-the-benefits-of-building-html-markup-with-html-helpers-in-web2py/8095585#8095585)。

# android - 滚动查看并刷新内容

> ID：12050935
> 
> 赞同：7
> 
> 时间：2012-08-21T08:31:16.380
> 
> 标签：android, android-layout, invalidation, android-scroll

我使用以下用户界面：

*   `parentLayout`尺寸为 800x600（宽 x 高）的父级相对布局

*   第二个相对布局`childLayout`，它是父布局的子布局。它的尺寸为 800x1000，即大于父布局。

    ```
    parentLayout.addView(childLayout); 
    ```

我的目标：`childLayout`使用`childLayout.scrollTo(x,y)`.

当我使用`childLayout.scrollTo(x,y)`时，Android 会滚动`childLayout`但不会刷新（重绘）它。效果是，它`childLayout`被切割成与 相同的尺寸`parentLayout`。

不幸的是，以下解决方案不能解决问题：

```
childLayout.scrollTo(x,y);
childLayout.invalidate();
childLayout.requestLayout(); 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-28T12:34:00.550

您可以使用`parentLayout`as`ScrollView`代替`RelativeLayout`并保持`childLayout`as `RelativeLayout`。

# c# - 在 64 位 Windows 7 上开发的软件可以在 32 位操作系统（Windows XP 或 Windows 7）上运行吗？

> ID：12050936
> 
> 赞同：2
> 
> 时间：2012-08-21T08:31:16.387
> 
> 标签：c#, .net

我想将我的工作计算机从 32 位 Windows XP 更新到 64 位 Windows 7，但我担心在 64 位 Windows 7 中开发的软件无法在 32 位操作系统上运行，就像 Windows XP 和 Windows 7 一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:33:09.740

它可以正常工作。您只需要确保使用平台目标“Any CPU”编译二进制文件。

但是，请注意以下事项：

1.  使用非托管 DLL 时，必须为 32 位系统提供 32 位版本，为 64 位系统提供 64 位版本。
    如果您只有 32 位版本的非托管 DLL，您还可以选择“x86”作为平台目标。即使在 64 位系统上，您的应用程序也将作为 32 位进程运行。
2.  当您在应用程序中使用 Windows 7 功能时，它很可能无法在 Windows XP 上正确运行。

# c# - 访问 ItemsControl 中的控件

> ID：12050939
> 
> 赞同：0
> 
> 时间：2012-08-21T08:31:24.033
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我正在创建一个 WPF 应用程序。我希望在每次单击按钮时显示一个页面。

```
 <ItemsControl ItemsSource="{Binding Path=DashBoardApps}" VerticalAlignment="Bottom" HorizontalAlignment="Center" Name="Abc">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Controls:FishEyeControl />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Button MouseDown="Button_MouseDown">
                            <Image  Source="{Binding Path=ApplicationImage}" Width="32" Height="32"/>
                        </Button>
                        <TextBlock x:Name="txtAppName" Text="{Binding Path=ApplicationName}" TextAlignment="Center" Visibility="Hidden" FontSize="7px" Foreground="#eff7ff" VerticalAlignment="Center"/>
                    </StackPanel>
                    <DataTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="txtAppName" Property="Visibility" Value="Visible" />
                        </Trigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

总共有6个按钮。在按钮上单击我想要显示一个页面。（不同的页面用于不同的按钮）。在后面的代码中，我做了这样的事情

```
private void Button_MouseDown(object sender, MouseButtonEventArgs e)
    {
        var s = sender as ItemsControl;
        if (s == Abc.Items.GetItemAt(1))//if it is the first button. Not sure if it is right
        {
           //Code to display page
        }

    } 
```

我想知道哪个按钮生成了事件。例如，如果单击第一个按钮，则必须显示 page1。所以我尝试使用`GetItemAt()`函数来查看是否单击了第一个按钮（显示第一页）。但是它不起作用，我不确定这种方法是否正确。

PS 简单地说我想知道是哪个按钮生成了事件——这可以使用 index.html 来完成吗？如果是这样，怎么做？请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:43:24.307

实际的 Button 在 sender 参数中传递给事件处理程序：

```
Button button = sender as Button; 
```

然而有一个问题。由于 Button 处理 MouseDown 事件，因此您不会得到它。您必须为[PreviewMouseDown](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmousedown)事件添加一个处理程序，或者为 Button 的[Click](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.buttonbase.click.aspx)事件添加更好的处理程序。

请注意：[ItemCollection.GetItemAt](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcollection.getitemat.aspx)方法使用从零开始的索引。

编辑：这是如何将 Button 的`Tag`属性绑定到 ItemsControl 的`AlternationIndex`属性以及如何在 Button 的 Click 处理程序中利用该索引：

```
<ItemsControl ... AlternationCount="2147483647">
...
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <Button Click="Button_Click"
                    Tag="{Binding RelativeSource={RelativeSource Mode=TemplatedParent},
                                  Path=(ItemsControl.AlternationIndex)}">
            ...
        </StackPanel>
        ...
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

使用 XAML 命名空间`xmlns:sys="clr-namespace:System;assembly=mscorlib"`，您也可以编写

```
<ItemsControl AlternationCount="{x:Static sys:Int32.MaxValue}"> 
```

点击处理程序：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    Button button = sender as Button;
    int index = (int)button.Tag;
    // get page by zero-based index
    ...
} 
```

# pointers - 指向结构的指针 - 几个问题

> ID：12050940
> 
> 赞同：0
> 
> 时间：2012-08-21T08:31:26.653
> 
> 标签：pointers, struct

```
#include<stdio.h>
#include<stdlib.h>

/* Link list node */
struct node
{
    int data;
    struct node *next;
};

/* Function to reverse the linked list */
static void reverse(struct node** head_ref)
{
    struct node *prev   = NULL;
    struct node *current = *head_ref;
    struct node *next;
    while (current != NULL)
    {
        next  = current->next; 
        current->next = prev;  
        prev = current;
        current = next;
    }
    *head_ref = prev;
} 
```

1.  反向函数中以 struct 开头的行是什么？他们是扩展原始结构还是创建原始结构指向的新结构？我真的不明白为什么原始结构没有名称
2.  `struct node *next;`和之间有区别 `struct node* next;` 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:11:25.970

@willys 是对的。众所周知，struts 是一组相似和不相似的数据类型。创建结构时，它会分配一块内存。并且该内存有一个地址。

```
struct node{
    int age;
    char name[20];
    struct node *next_address; //Address of its type (self referential structure)
} 
```

上面的这个结构分配了一块内存。在此块内存储了 3 个不同的数据（年龄、名称和结构地址`node`）

当你想存储更多块（用于存储更多数据）时，你需要分配更多的结构。但是，当所有结构都分配在内存中时，它们之间没有任何关系。这是一个原因内存泄漏。

因此，在分配的每个内存块上保留地址字段，以便任何内存块都可以存储其最近块的地址。

它是 Linked List 的真正风味值。因此，结构的名称不会混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:40:35.233

1.  行是“指向结构节点的指针”类型`struct node *prev`的变量的声明。`prev`这些行只是声明了一些局部变量。`prev`包含指向最后处理节点`current`的指针，包含指向当前处理节点`next`的指针，用于保存指向原始列表的下一个节点的指针。

2.  `struct node *next`和之间没有区别`struct node* next`。

# scala - scala中“迭代Seq或如果为空”的更好版本？

> ID：12050944
> 
> 赞同：13
> 
> 时间：2012-08-21T08:31:42.623
> 
> 标签：scala, playframework-2.0

是否有更短/更好的方法来执行以下操作：

```
mySeq.map { elmt => 
    // do stuff
}   

if (mySeq.isEmpty) {
    // some other stuff
} 
```

Ps：我正在使用 PlayFramework，这意味着在模板中使用，所以如果我错过了任何“帮助者”，我会很高兴发现那些 ;)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T08:56:56.700

这个怎么样？

```
mySeq.headOption.map { _ =>
  mySeq.map { elmt => 
    // do stuff
  }
}.getOrElse {
  // some other stuff
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T08:43:04.450

您可以使用`match`：

```
l match {
  case l if !l.isEmpty => l.map{ // do stuff }
  case _ => // some other stuff
} 
```

对于`List`：

```
l match {
  case h :: t => l.map{ // do stuff }
  case _ => // some other stuff
} 
```

或者，您可以定义自己的方法：

```
import scala.collection.generic.CanBuildFrom
import scala.collection.TraversableLike

class FoldEmpty[T, S[T] <: TraversableLike[T, S[T]]](l: S[T]){
  def foldEmpty[B, That](notEmpty: T => B, empty: => That)(implicit cbf: CanBuildFrom[S[T], B, That]): That = 
    l match {
      case t if !t.isEmpty => l map notEmpty
      case _ => empty
    }
}

implicit def seqToFoldEmpty[T, S[T] <: TraversableLike[T, S[T]]](l: S[T]) = new FoldEmpty(l) 
```

用法：

```
scala> IndexedSeq(1, 2, 3).foldEmpty( _ + 1 , IndexedSeq(-1))
res0: IndexedSeq[Int] = Vector(2, 3, 4)

scala> IndexedSeq[Int]().foldEmpty( _ + 1 , Seq(-1))
res1: Seq[Int] = List(-1) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-21T10:13:09.360

我最近[提供](https://gist.github.com/3285815)了一个助手，它仅在给定序列非空时生成一些 HTML。把这个微小的变化放在一个文件中，例如`Helpers.scala`：

```
package views.html.helper

import play.api.templates.Html

object nonEmptyOrElse {
  def apply[T <: Seq[_]](t: T)(nonEmptyBlock: (T) => Html)(emptyBlock: => Html) = {
    if (t.nonEmpty) nonEmptyBlock(t) else emptyBlock
  }
} 
```

并在您的模板中像这样使用它：

```
@nonEmptyOrElse(mySeq) { seq =>
  //doSomething with entire seq
} {
  // do something else
} 
```

编辑：这是映射每个元素的版本：

```
object mapOrElse {
  def apply[T](t: Seq[T])(nonEmptyBlock: (T) => Html)(emptyBlock: => Html) = {
    if (t.nonEmpty) t.map(nonEmptyBlock(_)) else emptyBlock
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T13:08:53.953

在范围内具有以下简单扩展：

*（对于 Scala 2.10）：*

```
implicit class AnyExtensions[A] ( val x : A ) extends AnyVal {
  def asSatisfying(p: A => Boolean): Option[A] =
    if (p(x)) Some(x) else None
} 
```

*（对于 Scala 2.9）：*

```
implicit def anyExtensions[A] (x : A) = new {
  def asSatisfying(p: A => Boolean): Option[A] =
    if (p(x)) Some(x) else None 
} 
```

您将能够按如下方式重写您的代码：

```
mySeq
  .asSatisfying{_.nonEmpty}
  .map{
    _.map{elmt => 
      // do stuff
    }
  }
  .getOrElse{
    // some other stuff
  } 
```

在我的实践中，这个扩展在很多情况下都适用并且非常有用。它在您意识到需要`if`在表达式中间使用语句的情况下表现出色，如果没有此扩展，则需要您引入临时变量。这是一个例子：

```
List(1, 2, 3).mkString(", ").asSatisfying{_.nonEmpty}.getOrElse("Empty list") 
```

如果列表为空，它将导致 a`String` `1, 2, 3`并且会导致 a 。`String` `Empty list`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-01T15:22:04.553

这是一个有用的值类，如果 Seq.isEmpty，则将 Seq[A] 转换为 None，否则将其包装在 Some[Seq[A]] 中。

对于 Scala 2.10：

```
 /**
   * A value type class to add some useful utility methods to Seq
   *
   * @param underlying The Seq to augment.
   */
 implicit class SeqExt[+A](private val underlying: Seq[A]) extends AnyVal {

   /** If this Seq is empty, returns None, otherwise builds a new collection by
     * applying a function to all elements of this immutable sequence, and wraps
     * the Seq in an Option.
     *
     * @tparam B   The element type of the returned collection.
     * @param f    The function to apply to each element.
     * @return     If this Seq is empty, returns None, otherwise builds a new collection by
     *             applying a function to all elements of this immutable sequence, and wraps 
     *             the Seq in an Option.
     */
   def mapOption[B](f: (A) ⇒ B): Option[Seq[B]] = {
     if(underlying.isEmpty) None else Some(underlying.map(f))
   }
 } 
```

用法（如您的示例）：

```
mySeq
  .mapOption { elmt => 
    // do stuff to each element if mySeq.nonEmpty
  } 
  .getOrElse {
      // some other stuff if mySeq.isEmpty
  } 
```

# java - 如何在 Java 中的 PostgreSQL 中插入 XML 文档？

> ID：12050945
> 
> 赞同：7
> 
> 时间：2012-08-21T08:31:41.797
> 
> 标签：java, xml, postgresql, jdbc

我在 Postgresql 中有一张表

```
DROP TABLE xml_docs;
CREATE TABLE xml_docs(
id serial PRIMARY KEY,
cad_number character(50),
gkuzu_name character(50),
gkuzu xml,
rreq_name character(50),
rreq xml
) 
```

我使用 JDBC 进行数据库连接。我想在表格中插入整个 xml 文档。
我怎么能做这个？

**更新**

好的。我试试

```
 String sql = "INSERT INTO xml_docs(cad_number,gkuzu_name,gkuzu,rreq_name,rreq) VALUES(?,?,?,?,?)";
  PreparedStatement stmt = ce.prepareStatement(sql);
  stmt.setString(1, "11:33:5464563");
  stmt.setString(2, xml_gkuzu.getName());
  stmt.setString(3, xml_gkuzu.toString());
  stmt.setString(4, xml_rreq.getName());
  stmt.setString(5, xml_rreq.toString());
  stmt.executeQuery();
ce.close();
  se.close(); 
```

并获得例外

```
Exception in thread "main" org.postgresql.util.PSQLException: ERROR: column "gkuzu" is of type xml but expression is of type character varying
Подсказка: You will need to rewrite or cast the expression. 
```

怎么了？

**更新 2**

当我尝试这样做时

```
 String sql1 = "INSERT INTO xml_docs(cad_number,gkuzu_name,gkuzu,rreq_name,rreq) VALUES(11335464563,"+xml_gkuzu.getName()+",XMLPARSE("+xml_gkuzu.toString()+"),"+xml_rreq.getName()+",XMLPARSE("+xml_rreq.toString()+"))"; 
```

我得到例外

```
Exception in thread "main" org.postgresql.util.PSQLException: ERROR: syntax error at or near "bf48e000b0" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T08:53:06.253

我不确定，但试试这个：

首先将您的 XML 转换为 Java 字符串。然后创建一个插入语句并使用 PostgreSQL 的 XMLPARSE 方法将您的值转换为 PostgreSQL 的 xml 类型：

```
INSERT INTO xml_docs(id, gkuzu) VALUES (1, XMLPARSE('<foo><bar>Hello</bar></foo>')); 
```

请参阅：[http ://wiki.postgresql.org/wiki/XML_Support](http://wiki.postgresql.org/wiki/XML_Support)

**更新：**

Java 代码示例：

```
String sql = "INSERT INTO xml_docs(id, gkuzu) VALUES (?, XMLPARSE(?))";
[...]
stmt.setString(2, "<foo>Hello World!</foo>"); 
```

这应该创建以下语句：

```
INSERT INTO xml_docs(id, gkuzu) VALUES (1, XMLPARSE('<foo>Hello World!</foo>')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-25T15:45:42.567

[您可以使用JDBC 4 SQLXML](https://docs.oracle.com/javase/7/docs/api/java/sql/SQLXML.html)代替使用 PostgreSQL 专有语法重写插入语句：

```
String xml = xml_gkuzu.toString();

SQLXML sqlxml = connection.createSQLXML();
sqlxml.setString(xml);
stmt.setSQLXML(3, sqlxml); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T13:14:22.840

如果您没有使用 libxml 支持构建的 Postgres，则更新已[接受的答案：](https://stackoverflow.com/a/12051311/318174)

Java 代码示例：

```
String sql = "INSERT INTO xml_docs(id, gkuzu) VALUES (?, XML(?))";
[...]
stmt.setString(2, "<foo>Hello World!</foo>"); 
```

这应该创建以下语句：

```
INSERT INTO xml_docs(id, gkuzu) VALUES (1, XML('<foo>Hello World!</foo>')); 
```

因此，对于 9.0 及更高版本，您可能需要切换`XMLPARSE`==> `XML`。否则，您将需要特殊支持`XMLPARSE`

[来自 Postgres 文档](http://www.postgresql.org/docs/9.2/static/functions-xml.html)：

> 此处不再重复用于与 xml 类型相互转换的类函数表达式 xmlparse 和 xmlserialize。使用这些功能中的大多数需要使用 configure --with-libxml 构建安装。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T08:41:12.233

虽然 postgres 有 native `XML Data type`，但从 java 端，你可以处理纯字符串。
您可以将您的 xml 文档转换为字符串并插入，它应该可以工作。

**更新：**

查看您的错误后，您需要通过驱动程序 URL 将一个附加变量传递给服务器。

```
jdbc:postgresql://localhost/test?stringtype=unspecified
or
jdbc:postgresql://localhost/test?user=user&password=pass&stringtype=unspecified 
```

额外的参数`stringtype=unspecified`将删除输入字符串的类型检查。

# php - 更改网站标题以匹配 Google 搜索

> ID：12050946
> 
> 赞同：-3
> 
> 时间：2012-08-21T08:31:47.753
> 
> 标签：php, html, seo

当我遇到 SEO 问题时，我正在为零件经销商开发一个网站。

基本上，该企业分销许多不同的品牌，所以我想让它在搜索某个品牌时，谷歌结果的标题会更改为该特定品牌。

例子：

如果在 google 上搜索 Brand-X，结果应显示为...

我的生意 - Brand-X 经销商

我希望它可以引导到同一页面。有什么有效的方法可以做到这一点，还是我必须为每个品牌设置关键字，以及包括它们的网站描述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:34:15.090

> 我希望它可以引导到同一页面。

那是不可能的。谷歌将在页面被索引时显示页面的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:38:50.657

谷歌首先索引你的页面，当有人搜索谷歌时，他们会查看他们的索引。他们显示的结果来自他们的缓存版本，而不是来自您网站的实时获取。希望这能说明问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:35:18.930

...实际上这是可能的，但需要一些工作。我刚刚完成了类似的事情。Google 访问您的页面内容的方式与任何其他访问者非常相似，因此您实际上需要营造一种错觉，即每个产品都有自己的页面（例如，即使所有产品都针对您的 product-id123.php）。因此，您需要从一个页面开始，该页面将包含您拥有的每个产品的列表，然后为每个产品动态生成一个唯一链接。

这可以通过一个简单的 PHP 循环访问所有产品的数组并为每个产品创建一个链接 + 标题来完成。

您最终会得到一个非常长的页面，最好（如果您有数千种产品）根据产品类别将其分成单独的页面。

然后，当您完成所有产品列表页面后，您可以在主登录页面的标题中使用以下脚本。

```
<?php

if($_SERVER['REQUEST_URI'] == '/product-id123.php') {
$title = '<title>Product ID 123</title>';
} elseif ($_SERVER['REQUEST_URI'] == '/product-id456.php') {
$title = '<title>Product ID 456</title>';   // etc...

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:35:42.673

不，没有这样的方式来玩搜索引擎的标题！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T08:35:53.047

只需在 HTML 中设置标题

```
<title>My Business - Brand-X distributor</title> 
```

Google 将在结果中显示每个网页的页面标题。

谷歌最终将重新索引页面并显示新标题。

# ruby - Ruby - 如何从字符串中删除一些字符？

> ID：12050952
> 
> 赞同：-1
> 
> 时间：2012-08-21T08:32:29.537
> 
> 标签：ruby, string, whitespace

我有以下字符串：

```
"  asfagds gfdhd"sss dg    "
"sdg "dsg          " 
```

所需的输出：

```
asfagds gfdhd"sss dg
sdg "dsg 
```

（从字符串的前面和结尾删除空格，以及前导和尾随双引号。）

我有一个包含这些行的大文件，我需要将它们格式化为我们的需要......我如何`"`从相应文件的开头和结尾删除并从文件的开头和结尾删除空格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:40:06.087

使用[`string.strip`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip)或[`string.strip!`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-strip)。

```
"  asfagds gfdhd\"sss dg    ".strip
"asfagds gfdhd\"sss dg" 
```

请注意，它`strip`会删除所有空格（例如制表符、换行符），而不仅仅是空格。如果您只想删除空格，请使用：

```
string.gsub /^ *| *$/, '' 
```

如果您也想删除`"`：

```
string.gsub /^" *| *"$/, '' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:44:31.200

如果文件中的数据干净且统一，那么应该这样做

'" asfagds gfdhd"sss dg"'[1..-2].strip

如果数据不干净，您可能也需要在之前进行剥离。（即，如果右引号后有尾随空格。

'" asfagds gfdhd"sss dg"'.strip[1..-2].strip

真的取决于文件中数据的干净程度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:39:54.777

使用`strip`：

```
 "     Hello World     ".strip #=> "Hello World" 
```

或仅从左/右使用`lstrip`和`rstrip`分别剥离。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T08:40:52.110

一个班轮：

```
irb> '"  asfagds gfdhd"sss dg    "'[1..-2].strip
 => "asfagds gfdhd"sss dg" 
```

取 [1,n-1] 子字符串，删除空格

# javascript - 检测 ASP.net 中的组合键

> ID：12050963
> 
> 赞同：1
> 
> 时间：2012-08-21T08:33:09.957
> 
> 标签：javascript, asp.net

我有asp.net 网站。这里我没有使用表单标签来设计页面，而是使用了 div 标签。

现在我想从用户那里读取组合键，例如：如果用户按下键“s+u+m”，那么我必须在我的 ASPX 页面上生成 Sum 按钮的 OnClick 事件。但这应该发生在页面级别而不是控件的按键

另外，如果有一个 JS，那么请告诉我在哪里写它，因为我是 ASP.Net 的新手任何想法？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:50:28.623

您可以通过控件的 AccessKey 属性来实现这一点。但它只允许“Alt + Key”组合，因为您希望在按键上**回发。**

```
<form id="form1" runat="server">
<div>
    <asp:Button ID="Button1" runat="server" Text="Button" AccessKey="P"
        onclick="Button1_Click" />
</div>
</form> 
```

页面上的“Alt + P”组合键将触发 Button1_Click 事件。

如果你想让任何键引用 - [js-hotkeys jquery 插件](http://code.google.com/p/js-hotkeys/)

示例：绑定“Ctrl+P”

```
$(document).bind('keydown', 'ctrl+c', fnKeyCaptured);

function fnKeyCaptured()
{
    __doPostBack(button.id,"OnClick");
} 
```

# grails - Spring安全核心和filterChain chainMap问题

> ID：12050965
> 
> 赞同：4
> 
> 时间：2012-08-21T08:33:15.913
> 
> 标签：grails, filter, spring-security

这是我的问题：当用户使用 API（基本上，所有 /myapi/** 请求）时，我不想使用任何 Spring Security 核心过滤器，以避免创建无用的会话。该 api 基于 oauth 令牌。

因此，我使用插件 spring-security-core 进行用户身份验证，并在我的 Config.groovy 文件中添加了，

```
grails.plugins.springsecurity.filterChain.chainMap = [
'/myapi/**': 'JOINED_FILTERS,-securityContextPersistenceFilter,-logoutFilter,-authenticationProcessingFilter,-securityContextHolderAwareRequestFilter,-rememberMeAuthenticationFilter,-anonymousAuthenticationFilter,-exceptionTranslationFilter',
'/**':'JOINED_FILTERS'
] 
```

基本上，据我了解，它不应该对所有 /myapi/something 进行任何弹簧安全过滤器，但实际上，它在创建会话时会通过所有过滤器（我在 / 中没有任何用于会话的东西） myapi/东西。

但是，根据[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/16%20Filters.html](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/16%20Filters.html)

> 因此，对于不匹配早期规则之一的 URL，您需要在末尾添加一个 /** 包罗万象的规则。

这就是为什么我不明白为什么请求仍然通过任何 /myapi/something 的所有过滤器。

我做了一些测试，这可能会有所帮助：

如果我只有在我的 Config.groovy 中，它不会创建会话：

```
grails.plugins.springsecurity.filterChain.chainMap = [
'/myapi/**': 'JOINED_FILTERS,-securityContextPersistenceFilter,-logoutFilter,-authenticationProcessingFilter,-securityContextHolderAwareRequestFilter,-rememberMeAuthenticationFilter,-anonymousAuthenticationFilter,-exceptionTranslationFilter'
] 
```

但它也没有为其他 url 创建会话，没有使用任何其他过滤器，这当然会导致应用程序无法工作。这个例子只是为了确保会话不是由 /myapi/something 请求创建的

如果我只有：

```
grails.plugins.springsecurity.filterChain.chainMap = [
'/myapi/**': 'JOINED_FILTERS'
] 
```

然后，它通过所有 /myapi/something 请求的所有过滤器并创建一个会话。它不对其他请求使用任何过滤器。这是例外行为。

非常感谢您的帮助，我已经为此奋斗了一段时间，任何想法都会受到欢迎！

非常感谢！祝你有美好的一天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:11:00.203

是的，我正在遭受完全相同的问题！虽然我不使用 JOINED_FILTER，但我像这样明确设置过滤器：

```
grails.plugins.springsecurity.filterChain.chainMap = [
    '/apitest/**': 'requestContextAttributesFilter,sessionPreventionFilter,objectRepositoryCreationFilter',
    '/api/**':     'requestContextAttributesFilter,sessionPreventionFilter,objectRepositoryCreationFilter,apiAuthenticationFilter',
    '/**':         'requestContextAttributesFilter,securityContextPersistenceFilter,aisAuthenticationProcessingFilter'
] 
```

当我访问 '/apitest/*' URL 时，会执行 catch-all 规则的最后一个过滤器。当我创建一个带有几个虚拟过滤器的简单 Grails 项目时，我无法重现此问题，该过滤器仅执行 println 和类似的链图。对于简单的测试项目，过滤器按预期运行。由于似乎没有适当的日志记录何时执行哪个过滤器以及执行原因，因此很难查明问题。很奇怪...

**更新：**

我能够使用 Spring Security Core 插件版本 1.2.7.2 重现此错误。但是，这个错误似乎已在 1.2.7.3 版本中修复！

请参阅：http: [//jira.grails.org/secure/ReleaseNote.jspa ?projectId=10229&version=13100](http://jira.grails.org/secure/ReleaseNote.jspa?projectId=10229&version=13100)

使用 1.2.7.3 版本似乎可以解决这个问题。

# mysql - MySQL中选择年龄时出错

> ID：12050968
> 
> 赞同：-1
> 
> 时间：2012-08-21T08:33:31.427
> 
> 标签：mysql, syntax-error

我正在尝试使用 MySQL 来获得不同年份的差异，但在选择相同时它会显示错误。

```
SELECT(
    DATE_FORMAT(NOW(), '%Y') - DATE_FORMAT('birthdate', '%Y') - (DATE_FORMAT(NOW(), '00-%m-%d') < DATE_FORMAT('birthdate', '00-%m-%d')) AS age
) FROM register where 'reg_id' = user254 
```

错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:37:08.490

试试这个：

```
SELECT (YEAR(NOW()) - YEAR(birthdate)) AS age) 
FROM register 
WHERE reg_id = 'user254' 
```

或（如建议[here](https://stackoverflow.com/questions/7749639/how-to-get-the-difference-in-years-from-two-different-dates)）

```
SELECT (YEAR(NOW()) - YEAR(birthdate) - 
        (DATE_FORMAT(NOW(), '%m%d') < DATE_FORMAT(birthdate, '%m%d'))) AS age 
FROM register
WHERE reg_id = 'user254' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:40:59.613

仅仅减去年份实际上并不能给出您的年龄——就好像每个人都出生在 1 月 1 日一样。尝试只做一个 datediff：

```
SELECT FLOOR((DATEDIFF(NOW(),birthdate))/365)
FROM register 
WHERE reg_id = 'user254' 
```

请记住：在文字值周围加上引号（如 'user254' 或 'John'），但不要在表名或列名周围加上常规引号！您将需要对这些使用 backtikcs (`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:41:08.613

试试这个：

```
SELECT ( YEAR(NOW()) - YEAR(birthdate) - 
(DATE_FORMAT(NOW(), '%m%d') < DATE_FORMAT(birthdate, '%m%d'))
AS age) FROM register WHERE 'reg_id' = user254 
```

# apache - 在 Apache 服务器上安装 cakephp 时找不到 cakephp/app/webroot/

> ID：12050971
> 
> 赞同：2
> 
> 时间：2012-08-21T08:33:45.430
> 
> 标签：apache, .htaccess, cakephp, mod-rewrite

**我正在尝试做的事情：**

我在 wamp 上使用 cakephp 2.2.1 开发了一个 Web 应用程序。现在我想将它安装在 Apache 服务器（版本 2.2.16）上。

**错误**：

> 在此服务器上找不到请求的 URL /inetpub/wwwroot/cakephp/app/webroot。

**我做了什么：**

在我看来，这似乎是一个 .htaccess 错误。

我检查过

> LoadModule rewrite_module libexec/apache2/mod_rewrite.so

未注释。

我确定

> 选项 FollowSymLinks AllowOverride All

为 wwwroot/cakephp 目录启用。然后我检查了所有 .htaccess 文件是否符合[文档](http://book.cakephp.org/2.0/en/installation/advanced-installation.html#apache-and-mod-rewrite-and-htaccess)。

仍然没有运气。

**问题：**

有谁知道发生了什么？

**编辑：**这里是 app/webroot/index.php：

```
<?php
/**
 * Index
 *
 * The Front Controller for handling every request
 *
 * PHP 5
 *
 * CakePHP(tm) : Rapid Development Framework (http://cakephp.org)
 * Copyright 2005-2012, Cake Software Foundation, Inc. (http://cakefoundation.org)
 *
 * Licensed under The MIT License
 * Redistributions of files must retain the above copyright notice.
 *
 * @copyright     Copyright 2005-2012, Cake Software Foundation, Inc. (http://cakefoundation.org)
 * @link          http://cakephp.org CakePHP(tm) Project
 * @package       app.webroot
 * @since         CakePHP(tm) v 0.2.9
 * @license       MIT License (http://www.opensource.org/licenses/mit-license.php)
 */
/**
 * Use the DS to separate the directories in other defines
 */
if (!defined('DS')) {
    define('DS', DIRECTORY_SEPARATOR);
}
/**
 * These defines should only be edited if you have cake installed in
 * a directory layout other than the way it is distributed.
 * When using custom settings be sure to use the DS and do not add a trailing DS.
 */

/**
 * The full path to the directory which holds "app", WITHOUT a trailing DS.
 *
 */
if (!defined('ROOT')) {
    define('ROOT', dirname(dirname(dirname(__FILE__))));
}
/**
 * The actual directory name for the "app".
 *
 */
if (!defined('APP_DIR')) {
    define('APP_DIR', basename(dirname(dirname(__FILE__))));
}

/**
 * The absolute path to the "cake" directory, WITHOUT a trailing DS.
 *
 * Un-comment this line to specify a fixed path to CakePHP.
 * This should point at the directory containing `Cake`.
 *
 * For ease of development CakePHP uses PHP's include_path.  If you
 * cannot modify your include_path set this value.
 *
 * Leaving this constant undefined will result in it being defined in Cake/bootstrap.php
 */
//define('CAKE_CORE_INCLUDE_PATH', ROOT . DS . 'lib');

/**
 * Editing below this line should NOT be necessary.
 * Change at your own risk.
 *
 */
if (!defined('WEBROOT_DIR')) {
    define('WEBROOT_DIR', basename(dirname(__FILE__)));
}
if (!defined('WWW_ROOT')) {
    define('WWW_ROOT', dirname(__FILE__) . DS);
}

if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    if (function_exists('ini_set')) {
        ini_set('include_path', ROOT . DS . 'lib' . PATH_SEPARATOR . ini_get('include_path'));
    }
    if (!include ('Cake' . DS . 'bootstrap.php')) {
        $failed = true;
    }
} else {
    if (!include (CAKE_CORE_INCLUDE_PATH . DS . 'Cake' . DS . 'bootstrap.php')) {
        $failed = true;
    }
}
if (!empty($failed)) {
    trigger_error("CakePHP core could not be found.  Check the value of CAKE_CORE_INCLUDE_PATH in APP/webroot/index.php.  It should point to the directory containing your " . DS . "cake core directory and your " . DS . "vendors root directory.", E_USER_ERROR);
}

App::uses('Dispatcher', 'Routing');

$Dispatcher = new Dispatcher();
$Dispatcher->dispatch(new CakeRequest(), new CakeResponse(array('charset' => Configure::read('App.encoding')))); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T08:58:03.440

问题解决了：

首先，如果您的网站是

> [http://www.example.info/tmp/](http://www.example.info/tmp/)

分别放在三个.htaccess中：

```
RewriteBase /tmp/ 
RewriteBase /tmp/app/ 
RewriteBase /tmp/app/webroot 
```

并更换

```
RewriteRule ^(.*)$ index.php [QSA,L] 
```

经过

```
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

# wpf - 棱镜命令绑定未执行

> ID：12050973
> 
> 赞同：1
> 
> 时间：2012-08-21T08:33:53.790
> 
> 标签：wpf, binding, prism

在我的项目中，我使用了 wpf + prism。在视图中，我必须在上下文菜单中调用命令，该命令被定义到 viewmodel 类中。这是视图：

```
<UserControl x:Class="GrigoLync.Modules.LyncClient.Contatti.ContattiView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:infr="clr-namespace:GrigoLync.infrastructure.Model.Lync;assembly=GrigoLync.infrastructure"
         xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
         xmlns:diag="clr-namespace:System.Diagnostics;assembly=WindowsBase"
         mc:Ignorable="d"
         d:DesignHeight="300" d:DesignWidth="300" 

         >

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
    </Grid.RowDefinitions>
    <Label Grid.Column="0" Grid.Row="0" FontSize="12" Margin="5">Contatti</Label>

    <TreeView x:Name="groupTreeView" Margin="10" ItemsSource="{Binding GruppiLync}" >
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Path=ContattiLync}">
                <TextBlock Text="{Binding Path=Nome}" />
                <HierarchicalDataTemplate.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=Uri}" Tag="{Binding}">
                        <TextBlock.ContextMenu>
                            <ContextMenu> 
                                <MenuItem Header ="Invia messaggio istantaneo" 
                                          Command="{Binding PlacementTarget.Tag.SendInstantMessageCommand,RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}, diag:PresentationTraceSources.TraceLevel=High}"/>                                         
                            </ContextMenu>
                        </TextBlock.ContextMenu>
                        </TextBlock>
                    </DataTemplate>
                </HierarchicalDataTemplate.ItemTemplate>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 

</Grid> 
```

以下是视图模型类：

```
 [Export(typeof(ContattiViewModel))]
[PartCreationPolicy(CreationPolicy.Shared)]
public class ContattiViewModel : NotificationObject
{

    private readonly ILyncClientService lyncClientService;
    private readonly IRegionManager regionManager;
    private readonly IEventAggregator eventAggregator;
    private List<GruppoLync> gruppiLync;
    private ICommand sendInstantMessageCommand;

     [ImportingConstructor]
    public ContattiViewModel(ILyncClientService lyncClientService, IRegionManager regionManager, IEventAggregator eventAggregator)
    {
        if (lyncClientService == null)
        {
            throw new ArgumentNullException("lyncClientService");
        }

        if (regionManager == null)
        {
            throw new ArgumentNullException("regionManager");
        }

        if (eventAggregator == null)
        {
            throw new ArgumentNullException("eventAggregator");
        }

        this.lyncClientService = lyncClientService;
        this.regionManager = regionManager;
        this.eventAggregator = eventAggregator;
        this.gruppiLync = lyncClientService.elencoGruppiLync();
        this.sendInstantMessageCommand = new DelegateCommand<object>(this.SendInstantMessage);

        //groupTreeView.DataItems = this.gruppiLync;

     }

     public ICommand SendInstantMessageCommand { get { return this.sendInstantMessageCommand; } }
     public List<GruppoLync> GruppiLync
     {
         get
         {
             return this.gruppiLync;
         }             
     }

     private void SendInstantMessage(object aContattoLync)
     {
         //This point is not executed!
     }

} 
```

}

当我从用户界面选择菜单项“Invia Messaggio istantaneo”时，该命令未调用，此点未执行可以帮助我吗？！！！！
这是 GruppoLync 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;
using System.Collections.ObjectModel;

namespace GrigoLync.infrastructure.Model.Lync
{
public class GruppoLync : INotifyPropertyChanged
{
    private string nome;
    public string Nome
    {
        get { return nome; }

        set { nome = value;
        OnPropertyChanged(new PropertyChangedEventArgs("Nome"));

        }
    }

    private ObservableCollection<ContattoLync> contattiLync;
    public ObservableCollection<ContattoLync> ContattiLync
    {
        get { return contattiLync; }
        set
        {
            contattiLync = value;
            OnPropertyChanged(new PropertyChangedEventArgs("ContattiLync"));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, e);
    }

    public GruppoLync(string nome, ObservableCollection<ContattoLync> contattiLync)
    {
        Nome = nome;
        ContattiLync = contattiLync;
    }
} 
```

}

这是 ContattoLync 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Input;
using Microsoft.Practices.Prism.Commands;

namespace GrigoLync.infrastructure.Model.Lync
{
public class ContattoLync
{

    public string Uri { get; set; }
    public string Stato { get; set; }

}
} 
```

我还报告了绑定的跟踪日志：

```
System.Windows.Data Warning: 54 : Created BindingExpression (hash=37997052) for Binding (hash=17879784)
System.Windows.Data Warning: 56 :   Path: 'PlacementTarget.Tag.SendInstantMessageCommand'
System.Windows.Data Warning: 58 : BindingExpression (hash=37997052): Default mode resolved to OneWay
System.Windows.Data Warning: 59 : BindingExpression (hash=37997052): Default update trigger resolved to PropertyChanged
System.Windows.Data Warning: 60 : BindingExpression (hash=37997052): Attach to System.Windows.Controls.MenuItem.Command (hash=47163810)
System.Windows.Data Warning: 64 : BindingExpression (hash=37997052): RelativeSource (FindAncestor) requires tree context
System.Windows.Data Warning: 63 : BindingExpression (hash=37997052): Resolve source deferred
System.Windows.Data Warning: 54 : Created BindingExpression (hash=18607377) for Binding (hash=17879784)
System.Windows.Data Warning: 56 :   Path: 'PlacementTarget.Tag.SendInstantMessageCommand'
System.Windows.Data Warning: 58 : BindingExpression (hash=18607377): Default mode resolved to OneWay
System.Windows.Data Warning: 59 : BindingExpression (hash=18607377): Default update trigger resolved to PropertyChanged
System.Windows.Data Warning: 60 : BindingExpression (hash=18607377): Attach to System.Windows.Controls.MenuItem.Command (hash=32025604)
System.Windows.Data Warning: 64 : BindingExpression (hash=18607377): RelativeSource (FindAncestor) requires tree context
System.Windows.Data Warning: 63 : BindingExpression (hash=18607377): Resolve source deferred
System.Windows.Data Warning: 65 : BindingExpression (hash=37997052): Resolving source 
System.Windows.Data Warning: 68 : BindingExpression (hash=37997052): Found data context element: <null> (OK)
System.Windows.Data Warning: 71 :     Lookup ancestor of type ContextMenu:  queried ContextMenu (hash=46231978)
System.Windows.Data Warning: 70 :   RelativeSource.FindAncestor found ContextMenu (hash=46231978)
System.Windows.Data Warning: 76 : BindingExpression (hash=37997052): Activate with root item ContextMenu (hash=46231978)
System.Windows.Data Warning: 106 : BindingExpression (hash=37997052):   At level 0 - for ContextMenu.PlacementTarget found accessor DependencyProperty(PlacementTarget)
System.Windows.Data Warning: 102 : BindingExpression (hash=37997052): Replace item at level 0 with ContextMenu (hash=46231978), using accessor DependencyProperty(PlacementTarget)
System.Windows.Data Warning: 99 : BindingExpression (hash=37997052): GetValue at level 0 from ContextMenu (hash=46231978) using DependencyProperty(PlacementTarget): <null>
System.Windows.Data Warning: 104 : BindingExpression (hash=37997052):   Item at level 1 is null - no accessor
System.Windows.Data Warning: 101 : BindingExpression (hash=37997052): Replace item at level 2 with {NullDataItem}
System.Windows.Data Warning: 78 : BindingExpression (hash=37997052): TransferValue - got raw value {DependencyProperty.UnsetValue}
System.Windows.Data Warning: 86 : BindingExpression (hash=37997052): TransferValue - using fallback/default value <null>
System.Windows.Data Warning: 87 : BindingExpression (hash=37997052): TransferValue - using final value <null>
System.Windows.Data Warning: 65 : BindingExpression (hash=18607377): Resolving source 
System.Windows.Data Warning: 68 : BindingExpression (hash=18607377): Found data context element: <null> (OK)
System.Windows.Data Warning: 71 :     Lookup ancestor of type ContextMenu:  queried ContextMenu (hash=64235)
System.Windows.Data Warning: 70 :   RelativeSource.FindAncestor found ContextMenu (hash=64235)
System.Windows.Data Warning: 76 : BindingExpression (hash=18607377): Activate with root item ContextMenu (hash=64235)
System.Windows.Data Warning: 105 : BindingExpression (hash=18607377):   At level 0 using cached accessor for ContextMenu.PlacementTarget: DependencyProperty(PlacementTarget)
System.Windows.Data Warning: 102 : BindingExpression (hash=18607377): Replace item at level 0 with ContextMenu (hash=64235), using accessor DependencyProperty(PlacementTarget)
System.Windows.Data Warning: 99 : BindingExpression (hash=18607377): GetValue at level 0 from ContextMenu (hash=64235) using DependencyProperty(PlacementTarget): <null>
System.Windows.Data Warning: 104 : BindingExpression (hash=18607377):   Item at level 1 is null - no accessor
System.Windows.Data Warning: 101 : BindingExpression (hash=18607377): Replace item at level 2 with {NullDataItem}
System.Windows.Data Warning: 78 : BindingExpression (hash=18607377): TransferValue - got raw value {DependencyProperty.UnsetValue}
System.Windows.Data Warning: 86 : BindingExpression (hash=18607377): TransferValue - using fallback/default value <null>
System.Windows.Data Warning: 87 : BindingExpression (hash=18607377): TransferValue - using final value <null> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:51:29.883

这是因为 ContextMenus 位于单独的逻辑树上。
这意味着它们不会“继承”它们所作用的元素的 DataContext。

一种解决方法是：

```
<TextBlock Tag="{Binding}"> <!-- You may have to use RelativeSource on this Binding, depending on which DataContext you're trying to reach -->
   <TextBlock.ContextMenu>
      <ContextMenu>
         <MenuItem Header="Name of the item" 
                  Command="{Binding PlacementTarget.Tag.MyCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ContextMenu}" />
      </ContextMenu>
   </TextBlock.ContextMenu>
</TextBlock> 
```

这将在此 MenuItem 的 ContextMenu 中获取 PlacementTarget 的标记上的 MyCommand。

PlacementTarget 指向 TextBlock，其 Tag 指向视图的 DataContext。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:30:14.347

我解决问题！！！！

```
 <TreeView x:Name="groupTreeView" Margin="10" ItemsSource="{Binding GruppiLync}">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Path=ContattiLync}">
                <TextBlock Text="{Binding Path=Nome}" />
                <HierarchicalDataTemplate.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Text="{Binding Path=Uri}" 
                                   Tag="{Binding DataContext, RelativeSource={RelativeSource AncestorType=TreeView}}">
                        <TextBlock.ContextMenu>
                            <ContextMenu DataContext="{Binding PlacementTarget.Tag, RelativeSource={RelativeSource Self}}"> 
                                <MenuItem Header ="Invia messaggio istantaneo" 
                                          Command="{Binding SendInstantMessageCommand, diag:PresentationTraceSources.TraceLevel=High}"
                                          CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"/>
                            </ContextMenu>
                        </TextBlock.ContextMenu>
                        </TextBlock>
                    </DataTemplate>
                </HierarchicalDataTemplate.ItemTemplate>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

谢谢大家！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:39:52.360

检查菜单项的数据上下文以查看其是否正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:39:55.197

我认为使用“RelativeSource = {RelativeSource FindAncestor ...”绑定有点奇怪，您宁愿直接绑定到项目集的属性作为分层数据模板的数据上下文。

# android - phonegap android edittext 隐藏在虚拟键盘后面

> ID：12050975
> 
> 赞同：0
> 
> 时间：2012-08-21T08:33:58.847
> 
> 标签：android, cordova, android-softkeyboard, android-virtual-keyboard

我正在开发一个 android phonegap 应用程序。我使用 HTML 创建了一个弹出窗口，其中包含“用户名”和“密码”两个编辑字段。当这些字段获得焦点时，软键盘会立即出现并隐藏。谁能说出它为什么会这样。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T13:01:43.857

尝试添加`android:windowSoftInputMode="adjustResize"`您的 Android 清单文件。这对我有用。

这是一个迟到的答案，但对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:07:27.160

由于我怀疑的其他原因，它也必须马上失去焦点。

# iphone - 当我们在 iOS 中使用委托和回调时？

> ID：12050981
> 
> 赞同：4
> 
> 时间：2012-08-21T08:34:11.180
> 
> 标签：iphone, ios

我对 iOS 应用程序开发非常陌生，所以请向我解释一下委托和回调。当我们使用回调和委托时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:38:18.880

回调用于允许 API 或服务在某些事件发生时（例如，当任务完成时）向您的代码提供信息。这在异步编程中很有用，例如，当您希望当前线程继续执行其他操作时，或者允许用户继续使用 UI 时。（即回调是您编写的函数或 lambda，它作为参数传递给另一个方法）

委托是方法（例如回调）必须提供的“签名”（方法的“类型定义”，包括参数），以便它可用作回调或事件处理程序。

**编辑**只是为了完整，`Delegation`也是一种[设计模式](http://en.wikipedia.org/wiki/Delegation_pattern)，控制或动作的责任从一个对象委托给另一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:37:56.493

关于开发中心代表的重要文章：http: [//developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)

有一个使用回调/委托的教程应用程序

[http://brandontreb.com/objective-c-programming-tutorial-creating-a-twitter-client-part-1/](http://brandontreb.com/objective-c-programming-tutorial-creating-a-twitter-client-part-1/)

# c# - 如何删除应用程序磁贴的文本？

> ID：12050994
> 
> 赞同：3
> 
> 时间：2012-08-21T08:34:45.167
> 
> 标签：c#, windows-phone-7, xaml

我为我的应用程序创建了一个图标，其中还包含应用程序的名称。因此，在磁贴本身中包含文本是多余的。

有没有办法可以删除它？我仍然想要主应用程序列表中的文本 - 只想要图标固定时的默认文本不存在：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:41:47.290

您应该打开`WMAppManifest.xml`文件并将其设置`<Title>`为下面的空格`<Tokens><PrimaryToken>`