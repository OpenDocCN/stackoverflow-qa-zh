# StackOverflow 问答 11742000-11742999

# asp.net-mvc - 简单的 MVC DropDownListFor

> ID：11742003
> 
> 赞同：0
> 
> 时间：2012-07-31T14:05:42.517
> 
> 标签：asp.net-mvc, html.dropdownlistfor

我需要一个下拉列表来填充一个简单的数字列表。我不确定是否可以在不必创建新的 SelectList 的情况下做到这一点，因为它只是数字。

```
 @Html.DropDownListFor(model => model.NumberPassengers, new SelectList(Model.NumberPassengers)) 
```

真的不知道在我的模型中做什么：

```
public int[] Passengers = { 1, 2, 3, 4, 5, 6 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:16:05.257

您需要创建一个新的列表`SelectListItem`。然后我通常将它放在 ViewBag 中，因为你不希望它回来。然后将其绑定到您的`DropDownListFor`控件，这是我做过多次的：

```
private IEnumerable<SelectListItem> PopulateTimes()
            {
                List<SelectListItem> timeList = new List<SelectListItem>();
                for (int count = 0; count < 24; count++)
                {
                    timeList.Add(new SelectListItem()
                    {
                        Value = count.ToString("00"),
                        Text = count.ToString("00") + ":00",
                        Selected = count == 9,
                    });
                }
                return timeList;
            } 
```

然后

```
ViewBag.DepartureTimes = PopulateTimes(); 
```

然后

```
@Html.DropDownListFor(model => model.DepartureTime, (IEnumerable<SelectListItem>)ViewBag.DepartureTimes) 
```

# jquery - Jquery选项卡检查没有选择选项卡

> ID：11742007
> 
> 赞同：0
> 
> 时间：2012-07-31T14:06:00.053
> 
> 标签：jquery, tabs, jquery-tabs

使用 jQuery 选项卡插件，我将如何编写检查以查看未选择任何选项卡。目前我知道 .ui-state-active 在选项卡处于活动状态时被设置。

我将如何检查页面加载以及每次选项卡单击后？理想情况下，我希望出现一个 div，说在未选择选项卡时选择一个选项

**HTML**

```
<div id="comments-tabs">
                <ul>
                    <li><a href="#Europe">Europe</a></li>
                    <li><a href="#NorthAmerica">North America</a></li>
                    <li><a href="#SouthAmerica">South America</a></li>
                    <li><a href="#Africa">Africa</a></li>
                    <li><a href="#Asia">Asia</a></li>
                    <li><a href="#Oceania">Oceania</a></li>
                    <li class="resetcontinent"><a href="#" class="resetcontinent">reset</a></li>
                </ul>
                <div id="Europe" class="country">
                   Europe
                </div>
                <div id="NorthAmerica" class="country" style="margin:0 0 0 122px;">
                   North America
                </div>
                <div id="SouthAmerica" class="country" style="margin:0 0 0 244px;">
                  South America
                </div>
                <div id="Africa" class="country" style="margin:0 0 0 368px;">
                   Africa
                </div>
                <div id="Asia" class="country" style="margin:0 0 0 490px;">
                   Asia
                </div>
                <div id="Oceania" class="country" style="margin:0 0 0 611px;">
                   Oceania
                </div>
            </div><!--comments-tabs--> 
```

**jQuery**

```
$("#comments-tabs").tabs({collapsible: true, selected: -1}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:13:54.063

您可以测试`selected`返回索引的选项，如果没有选择选项卡，则为 -1；

```
var nothingSelected = $("#comments-tabs").tabs("option", "selected") === -1; 
```

# http - 如何防止 Safari 在可缓存的 HTML 页面上创建新请求？

> ID：11742011
> 
> 赞同：2
> 
> 时间：2012-07-31T14:06:10.027
> 
> 标签：http, safari, cache-control

当收到来自 Safari 6.0 的 http GET 请求时，我用一些 html 内容和下面的 HTTP 响应标头进行响应。

在 Safari 浏览器的 URL 栏中再次按 Enter 时，会向我的服务器发送一个新的 http 请求。我预期的行为是让 Safari 从其缓存中获取资源，就像 Microsoft Internet Explorer 10 预览版一样。

```
Cache-Control: public,max-age=31536000
Connection: keep-alive
Content-Length: 574
Content-Type: text/html;charset=utf-8
Server: SC 
```

我是否可以阻止 Safari 发出新请求，或者在 URL 栏中按 Enter 是否被视为刷新 Safari 浏览器的请求？

# javascript - 关闭外部点击切换

> ID：11742013
> 
> 赞同：0
> 
> 时间：2012-07-31T14:06:24.653
> 
> 标签：javascript, jquery, onclick, toggle, forceclose

我对 javascript 和 JQuery 还是很陌生...如何通过单击切换区域外部来关闭此 div（我不希望用户必须使用关闭按钮）

代码如下所示：

```
 function toggleDiv(divId) {
 $("#"+divId).toggle();
 }

 function showonlyone(thechosenone) {
 $('.newnote').each(function(index) {
      if ($(this).attr("id") == thechosenone) {
           $(this).show(0);
      }
      else {
           $(this).hide(0);
      }
 });
 } 
```

html看起来像这样

```
<div class="note">

     <a id="myHeader1" href="javascript:showonlyone('newnote1');" >
          <img src="images/SN_NotesPage_14.png">
     </a>      

     <div class="newnote" id="newnote1">
          <a>
               <img src="images/SN_NotesPage_16.png">
          </a>
     </div>
</div> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:14:15.920

我通常做的是在关闭覆盖的文档正文中添加一个单击事件侦听器。为了防止通过单击关闭覆盖，我向包含 ev.stopPropagation(); 的覆盖添加了第二个单击事件侦听器；

所以使用 jQuery 它看起来像：

```
$(document.body).bind('click.closeNote', function() {
    $('.newnote').hide();
});
$('.newnote').bind('click.closeNote', function(ev) {
    ev.stopPropagation();
}); 
```

另一种方法是添加一个覆盖整个页面的透明 div（zIndex 低于注释）。然后，您可以向此 div 添加一个单击事件侦听器来关闭注释。

编辑：请注意，上面的示例性能不是很好，因为它在每次点击时都会执行一个选择器。只需在显示注释时绑定此事件，并在它们关闭时取消绑定。

# ruby - 在前台正常工作的进程在后台无法正常工作

> ID：11742015
> 
> 赞同：1
> 
> 时间：2012-07-31T14:06:25.217
> 
> 标签：ruby, linux

我有一份工作，我创建了一个 Ruby 脚本，但使用了很多库，因此很难追踪。当我在终端中运行它时

红宝石 ./my_process

它完美地工作。但是当我启动它时

红宝石 ./my_process &

它保持停止状态，并且无法按预期工作。

我曾尝试使用 daemonize_spawn gem、Process.daemon 甚至在 ruby​​ 代码中使用 fork，结果相似，但该过程无法正常工作。

知道会发生什么吗？

我正在使用 linux 和 ruby​​ 1.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:17:22.887

在对您的应用程序了解不多的情况下，我猜它在等待 STDIN 上的输入时被卡住了。验证这一点的一种快速方法是将某些文件重定向到进程的 STDIN，可能像这样：

```
ruby ./my_process < /dev/zero & 
```

# android - Gson 解析数据有时是字符串，有时是对象

> ID：11742018
> 
> 赞同：1
> 
> 时间：2012-07-31T14:06:33.840
> 
> 标签：android, deserialization, gson

我必须解析一个有时看起来像的 json

school_name：“马丁高中”，领导：{ first_name：“Austin”，last_name：“Marriot”，}

有时作为

school_name：“马丁高中”，领导者：“/leader/3434”。

我试图看看是否有一个示例反序列化器可以将“领导者”有时处理为字符串，有时也处理为对象。但是什么都找不到。

这对gson有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:15:21.647

您只需要`TypeAdapter`为您的`Leader`. `read(JsonReader in)`用于`JsonReader.peek()`找出即将发生的内容并阅读它并将其转换为`Leader`. 它应该是微不足道的。

我把它作为一个练习......

```
public class GsonStringOrObjectDemo {
    @EqualsAndHashCode
    private static class Leader {
        String firstName;
        String lastName;
    }
    private static class LeaderAdapter extends TypeAdapter<Leader> {
        @Override
        public void write(JsonWriter out, Leader value) throws IOException {
            if (useString) {
                out.value(value.firstName + ":" + value.lastName);
            } else {
                out.beginObject();
                out.name("firstName");
                out.value(value.firstName);
                out.name("lastName");
                out.value(value.lastName);
                out.endObject();
            }
            useString = !useString;
        }

        @Override
        public Leader read(JsonReader in) throws IOException {
            final Leader result = new Leader();
            final JsonToken type = in.peek();
            switch (type) {
            case BEGIN_OBJECT:
                in.beginObject();
                while (true) {
                    final String key = in.nextName();
                    final String value = in.nextString();
                    if (key.equals("firstName")) result.firstName = value;
                    else if (key.equals("lastName")) result.lastName = value;
                    else throw new JsonParseException("Unexpected key in Leader: " + key);
                    if (in.peek() == JsonToken.END_OBJECT) break;
                }
                in.endObject();
                return result;
            case STRING:
                final String string = in.nextString();
                final int pos = string.indexOf(':');
                result.firstName = string.substring(0, pos);
                result.lastName = string.substring(pos+1);
                return result;
            default:
                throw new JsonParseException("Expected string or object for Leader, got: " + type);
            }
        }

        private boolean useString;
    }

    public static void main(String[] args) throws Exception {
        final Gson gson = new GsonBuilder().registerTypeAdapter(Leader.class, new LeaderAdapter()).setPrettyPrinting().create();
        final Leader[] leaders = new Leader[10];
        for (int i=0; i<leaders.length; ++i) {
            leaders[i] = new Leader();
            leaders[i].firstName = "First" + i;
            leaders[i].lastName = "Last" + i;
        }
        final String json = gson.toJson(leaders);
        final Leader[] leaders2 = gson.fromJson(json, Leader[].class);
        Assert.assertTrue(Arrays.equals(leaders, leaders2));
    }
} 
```

# filter - SSAS如何消除过滤器层次结构中的空白选项

> ID：11742019
> 
> 赞同：0
> 
> 时间：2012-07-31T14:06:35.560
> 
> 标签：filter, ssas

如以下快照所示，如何消除或隐藏层次结构的空白选项？我知道这是由表中的空值引起的，但我不希望它出现在过滤器中。

![在此处输入图像描述](../Images/dde01ccb05cf0ef0888ddb275b5b8613.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:13:26.573

在数据源视图中，您需要将表替换为命名查询，然后在 SELECT 语句中添加 WHERE 子句，该语句将过滤掉这些具有空值的记录。但是，请注意，如果事实表引用了您过滤掉的任何记录，则在您尝试处理多维数据集时将会出错。

此链接适用于 SSAS 2012，但对于任何版本的 SSAS 2005 - SSAS 2008 R2 都是相同的过程：[http ://technet.microsoft.com/en-us/library/ms175683](http://technet.microsoft.com/en-us/library/ms175683)

# c# - 从 UI 对话框到 MVC 控制器的数据

> ID：11742020
> 
> 赞同：0
> 
> 时间：2012-07-31T14:06:38.227
> 
> 标签：c#, jquery, asp.net-mvc-3, jquery-ui

我的 Web 应用程序有问题。我正在使用 MVC3 并不太熟悉它。

我正在为用户提供选择要打印的应用文件的功能。我有返回pdf文件流的函数。但是从 UI 发送数据很麻烦。在页面上有按钮 [打印] 当我按下它时，会出现一个 UI 对话框，其中包含复选框供用户选择应用程序。确认按钮应该是打印确认。

我在将数据发送到我的控制器并返回带有 pdf 的新选项卡/窗口时遇到问题。我需要向控制器发送 3 个变量。保存有关打印内容、用户 ID 和另一个变量的信息的字符串。我试过 AJAX 但那不起作用。似乎使用 AJAX 我无法在另一个选项卡中返回 pdf（如果我错了，请更正）

有人可以告诉我如何解决这个问题吗？将数据从对话框窗口发送到控制器的好解决方案，以便我可以在新选项卡或窗口中返回 pdf 文件。

编辑：

```
public ActionResult GetApplication(ApplicationData appldata)
{
      var application = GetApplicationPapers(appldata.ShowApplOne, appldata.ShowApplTwo); // Applications comes from report server so true or false to determine whether the pdf contains the report or not.
Response.AddHeader("Content-Disposition", "inline; filename=application.pdf");
return new FileStreamResult(application, "application/pdf");
} 
```

这就是它的样子。需要从 UI 对话框的复选框中获取值以确定流中的论文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:23:44.723

我们可以看到您尝试发布到的控制器中的操作方法是什么样的吗？您基本上可以只使用普通的 ActionLink 方法，例如：

```
@Html.ActionLink("LinkText", "ActionMethodName", 
      new {var1 = val1, var2 = val2, var3 = val3}, new {target = "_blank"}) 
```

其中“varX”是您的操作方法中的参数名称。

# ruby - 从字符串中提取电子邮件的更红宝石的方式？

> ID：11742022
> 
> 赞同：0
> 
> 时间：2012-07-31T14:06:42.910
> 
> 标签：ruby

我有以下正则表达式和函数来将电子邮件提取到数组中，虽然它正在工作，但对我来说似乎不是最佳选择。对我如何批准这个有什么建议吗？

```
@emails = []
matches = @text_document.scan(/\+'(\S+@\S+|\{(?:\w+, *)+\w+\}@[\w.-]+)'/i)
matches.each {|m| m[0].split(',').each {|email| @emails << email  }  } 
```

**具体来说，我正在寻找比嵌套每个更好的东西。**

干杯

**编辑**为了完全公平，因为我喜欢这两个答案，所以我给了他们一个公平的运行，但由于 concat 更快更短，我将其标记为答案。

```
require 'benchmark'

CONSTANT = 1
BenchTimes = 1_000_000
EMAILS = "+'one.emaili@domain.com,another.email@domain.se'"

def email
end

def bm_concat
  emails = []
  EMAILS.scan(/\+'(\S+@\S+|\{(?:\w+, *)+\w+\}@[\w.-]+)'/i) do |matches|
    matches.each {|m| emails.concat(m.split(','))}
  end

end

def bm_inject
  emails = []
  EMAILS.scan(/\+'(\S+@\S+|\{(?:\w+, *)+\w+\}@[\w.-]+)'/i) do |matches|
    matches.inject([]) {|arr, mails| emails.concat(mails.split(',')) }
  end

end

Benchmark.bmbm do |bm|
  bm.report("inject:") { BenchTimes.times { bm_inject } }
  bm.report("concat:") { BenchTimes.times { bm_concat } }
end 
```

产生以下输出：

```
Rehearsal -------------------------------------------
inject:  11.030000   0.060000  11.090000 ( 11.145898)
concat:   9.660000   0.050000   9.710000 (  9.761068)
--------------------------------- total: 20.800000sec

              user     system      total        real
inject:  11.620000   0.060000  11.680000 ( 11.795601)
concat:  10.510000   0.050000  10.560000 ( 10.678999) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:26:59.433

您可以将其重构`matches.each`为：

```
matches.each {|m| @emails.concat(m[0].split(','))} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:22:57.173

使用注入 - [http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)

```
@emails = matches.inject([]) do |emails, input| 
  emails += input.first.split(',')
end 
```

仅供参考，传递给块的变量，电子邮件是指传入的空数组，输入是指迭代时匹配的每个元素。

**编辑**（如何使用注入）：

```
REGEX = /\+'(\S+@\S+|\{(?:\w+, *)+\w+\}@[\w.-]+)'/i
def bm_inject
  emails = EMAILS.scan(REGEX).inject([]) do |arr, mails| 
    arr.concat mails.first.split(',')
  end
end 
```

# java - splashscreen.java 上的 java.lang.UnsupportedOperationException 错误

> ID：11742025
> 
> 赞同：0
> 
> 时间：2012-07-31T14:06:59.677
> 
> 标签：java, android, eclipse, stack-trace

我不断收到与 splashscreen.java 中的 Thread.stop() 相关的错误。我对此很陌生，并且知道已弃用的 Thread.stop() 但有人可以解释一下我在这里做错了什么，谢谢..

```
 java.lang.UnsupportedOperationException
    at java.lang.Thread.stop(Thread.java:1076)
    at java.lang.Thread.stop(Thread.java:1063)
    at com.dapp.d.SplashScreen$4.run(SplashScreen.java:88) 
```

这是 splashscreen.java 的完整源代码

```
 import android.app.Activity;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.RelativeLayout;

    public class SplashScreen extends Activity {

private boolean active = true;
private int splashTime = 3000;
private boolean clickFlag = true;
private Thread splashTread = null;
private Button btnHelp;
private Button btnAboutUs;

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    RelativeLayout relativeLayout = (RelativeLayout)findViewById(R.id.splashRelativeLayout);
    relativeLayout.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Uri uri = Uri.parse("http://www.exmaple.com");
            Intent intent = new Intent(Intent.ACTION_VIEW, uri);
            startActivity(intent);
        }
    });

     btnAboutUs = (Button)findViewById(R.id.btnAboutus);
     btnHelp = (Button)findViewById(R.id.btnHelp);

    try{

        btnAboutUs.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                clickFlag = false;
                splashTread.stop();  <<<<<<<<<<<<<<<<<<< line 49
                Intent intent = new Intent();
                intent.setClass(getApplicationContext(), AboutUs.class);
                startActivity(intent);
                SplashScreen.this.finish();
            }
        });

        btnHelp.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                clickFlag = false;
                splashTread.stop();   <<<<<<<<<<<<<<<<<<< line 63
                Intent intent = new Intent();
                intent.setClass(getApplicationContext(), HelpActivity.class);
                startActivity(intent);
                SplashScreen.this.finish();
            }
        });

        splashTread = new Thread() {
            @Override
            public void run() {
                try{
                    int waited = 0;
                    while(active && (waited < splashTime)) {
                        sleep(100);
                        waited += 100;
                    }                       
                } catch(InterruptedException e) {
                    // do nothing
                }finally {
                    if(clickFlag){
                        Intent intent=new Intent();
                        intent.setClass(getApplicationContext(), SearchWord.class);
                        startActivity(intent);
                        finish();
                        stop(); <<<<<<<<<<<<<<< line 88
                    }else{
                        finish();
                        stop();
                    }
                }
            }
        };
        splashTread.start();

    }catch (Exception e) {
        // TODO: handle exception
    }
}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:10:35.793

我认为你根本不需要在那里停下来。您的线程不会循环，因此它将正常执行并结束。尝试删除 stop();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:10:57.480

我遇到了类似的问题，解决方案是将 stop 方法包装在 try/catch 语句中，并在 catch 中使用 Throwable t。它会起作用的。

# java - Seam App 通过 EJB 访问数据

> ID：11742026
> 
> 赞同：0
> 
> 时间：2012-07-31T14:07:00.057
> 
> 标签：java, jboss, ejb, seam

我必须研究使用 JBoss 和 Seam 为保存在由现成包控制的数据库中的数据构建用户界面的可能性。我一直在阅读一些 Seam 文档和其他各种来源，但我似乎无法清除我目前所遭受的困惑。

我的问题是，到目前为止，我所阅读的所有内容都在谈论使用 JPA/Hibernate 直接在数据库模式中访问和持久化数据，但我正在使用的包不允许（或积极阻止）直接更新任何模式它控制的。然而，它确实呈现了一个看起来像作为 EJB 交付的综合数据访问 API 的东西。有了完全可能的基本假设，我的问题是我将如何构建一个使用这个 EJB 进行所有数据访问的 Seam 应用程序？这是一件简单的事情还是我正在走向一大堆痛苦？谁能指出我阅读对我有帮助的材料的方向？

提前为这个问题的新手性质道歉，但我已经深入了解这个问题，我正在努力学习这么多新知识。任何帮助将不胜**感激**。

非常感谢

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:07:07.090

Seam 主要是一个控制反转 (IoC) 容器，它为 Web 开发提供了许多样板功能。使用 JPA/Hibernate 对您没有真正的硬性要求。只是 Java Web 开发最常见的场景是由 ORM 映射的数据库后端，其中 JPA/Hibernate 可能是事实上的标准。

如果您的数据访问层 (DAL) 不存在或只是对现有 API（Web 服务、REST 等）的包装，Seam 也将非常轻松地处理该场景并为您提供其所有剩余功能（会话管理、JSF集成、安全、导航流管理等等）。

本质上，一个暴露您提到的 API 并处理其状态的简单组件（或一组）就足够了。再说一次，我不知道你的要求，所以我不能肯定地说。

一个更复杂的例子是 Seam 3 中的 Seam Social 模块。它使用 Twitter、Facebook 或其他社交网络 API 连接到这些服务并将它们注入到 Seam 的上下文中，以便您的应用程序可以利用它们的功能。我不知道您的场景是否如此复杂以至于需要您从头开始构建整个 CDI 模块（就像 Seam Social 所做的那样），但请查看他们的[文档](http://docs.jboss.org/seam/3/latest/reference/en-US/html/social.gettingstarted.html)。它可能会给你一些关于进一步调查的想法。

# c# - 热键移动到跨越多个文档的下一个搜索结果

> ID：11742028
> 
> 赞同：0
> 
> 时间：2012-07-31T14:07:07.400
> 
> 标签：c#, visual-studio-2010, visual-studio, keyboard-shortcuts

我经常使用 Ctrl-Shift-F 进行搜索，以查看所有结果都出现在 Find Results 窗口中。（在这种情况下，查看将跨越整个解决方案）

有没有办法使用热键导航每个结果？

我知道，如果您在当前文档上按 F3，它将转到下一个条目，但仅在该文档中。它不会跳转到其他文档。（也不会突出显示它找到的搜索结果）

模仿我在“查找结果”窗格中单击搜索结果会很好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:09:54.610

您可以安装 Tool Productivity，它提供突出显示搜索

[http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)

为了导航，您有箭头可以在 Find Result 窗口中导航

您也可以继续阅读这篇文章，它非常有趣

[http://weblogs.asp.net/scottgu/archive/2010/08/24/search-and-navigation-tips-tricks-with-visual-studio.aspx](http://weblogs.asp.net/scottgu/archive/2010/08/24/search-and-navigation-tips-tricks-with-visual-studio.aspx)

# css - 仅对一个 CSS 属性禁用继承的转换（全部）

> ID：11742033
> 
> 赞同：1
> 
> 时间：2012-07-31T14:07:14.393
> 
> 标签：css, css-transitions

我的 CSS 文件中有以下代码，它为锚元素上的所有 CSS 属性全局打开所有链接的转换：

```
a{
    display:block;
    -webkit-transition: all 0.2s ease;
    -moz-transition: all 0.2s ease;
    -o-transition: all 0.2s ease;
    -ms-transition: all 0.2s ease;
    transition: all 0.2s ease;
} 
```

稍后在 CSS 文件中，我想关闭特定链接上的转换（比如说使用 class `notrans`），但仅限于`background-position`. 就像是：

```
a.notrans{
    -webkit-transition: background-position 0;
    -moz-transition: background-position 0;
    -o-transition: background-position 0;
    -ms-transition: background-position 0;
    transition: background-position 0;
} 
```

但是这段代码不起作用。

我必须转动`background-position`过渡并保持其他过渡，所以精灵 - 背景图像不会继续移动`a.notrans`......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:26:14.817

您只需要为转换声明新属性，旧的继承属性就消失了。

所以，我只是用这个>

```
a.notrans{
-webkit-transition:color .2s;
-moz-transition:color .2s;
-o-transition:color .2s;
-ms-transition:color .2s;
transition:color .2s;
} 
```

在此之后，只有颜色过渡有效！

也许有更好的解决方案？

# javascript - 将不同的对象存储在同一个变量中

> ID：11742034
> 
> 赞同：0
> 
> 时间：2012-07-31T14:07:22.703
> 
> 标签：javascript, titanium, appcelerator

我试图弄清楚如何将不同的对象存储在某个“命名空间”中。

我有这样的事情：

**应用程序.js**

```
// This is the startup script:
var MyApp = {}
MyApp.ui = {}
MyApp.ui = require('ui/MainWindow');
MyApp.ui = require('ui/SecondWindow');

// Doesn't exist anymore because the 2nd require overwrites the
// first include
MyApp.ui.MainWindow.test; 
```

然后我也有`MainWindow.js`and `SecondWindow.js`，它看起来像这样：

```
var MainWindow = {
    test: "Main"
}

exports.MainWindow = MainWindow; 
```

* * *

```
var SecondWindow = {
    test: "Second"
}

exports.SecondWindow = SecondWindow; 
```

`exports.XXXWindow = XXXWindow`基本上使该对象可用。

所以在我的`app.js`我尝试将`MainWindow`对象存储在`MyApp.ui`. 所以我可以这样称呼它：

`MyApp.ui.MainWindow.test`

然后我还想将`SecondWindow`对象添加到其中。所以我可以用同样的方式调用它：

`MyApp.ui.SecondWindow.test`

但是我现在拥有它的方式导致第二个需要覆盖第一个。所以它现在只指向`SecondWindow`。我该怎么做才能调用这两个对象`MyApp.ui`？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:58:58.317

我建议你这样做（如果代码在语法上不正确，我很抱歉，但我使用的是 coffeescript，我不再使用 Javascript）：

**`MainWindow.js`**

```
var MainWindow = function() {
    return {test: 'Main'};
};
module.exports = MainWindow; 
```

**`SecondWindow.js`**

```
var SecondWindow = function() {
    return {test: 'Second'};
};
module.exports = SecondWindow; 
```

**`app.js`**

```
var myApp = {
    ui: {
        MainWindow: require('MainWindow.js'),
        SecondWindow: require(SecondWindow.js)
    }
}; 
```

现在我的个人意见。我更喜欢这样做：

**`app.js`**

```
var MainWindow = require('MainWindow'),
    SecondWindow = require('SecondWindow'),
    myApp = {
        ui: {
            MainWindow: new MainWindow(),
            SecondWindow: new SecondWindow()
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:24:21.487

的第二个赋值`MyApp.ui`将覆盖它的旧值。但是，您可以执行以下操作：

```
function inject(obj_into,obj_from){
    for(var x in obj_from)
        obj_into[x] = obj_from[x];
}

MyApp.ui = {MainWindow:{},SecondWindow:{}};
inject(MyApp.ui.MainWindow,require('ui/MainWindow'));
inject(MyApp.ui.SecondWindow,require('ui/SecondWindow')); 
```

`MyApp.ui`您首先使用空属性对象进行初始化`MainWindow`，`SecondWindow`然后用`inject`.

# javascript - JQuery：提交事件未在 FireFox 上触发

> ID：11742041
> 
> 赞同：0
> 
> 时间：2012-07-31T14:07:37.480
> 
> 标签：javascript, jquery

我不明白为什么下面描述的提交事件没有在 FireFox 和 IE 上触发。好的 Chrome

> ```
> $("#frame-right").on("submit", "form", function(event){                  
>     alert('Submit done')
> }); 
> ```

你能帮助我吗？

**编辑**

通过按“提交”按钮提交表单，但表单包含在通过 .load() 函数加载的页面中，并且在定义上述函数时不存在。

仅供参考，在同一个地方，我定义了这个在所有浏览器上都可以正常工作的函数

```
$("#frame-right").on("click","a",function(event){
alert('link clicked');
} 
```

“提交”事件是否可以像“点击”事件一样动态绑定？

**编辑 2**

感谢您的回复。问题是在一个 load() 函数之后，加载的表单不能用 Firefox 提交

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:52:40.373

我的错...

经过长时间的测试，我发现表格必须在表格外的表格元素内声明......

这个例子不起作用：

```
<table>
  <form>
    <tr><td><button type="submit">Submit</button></td></tr>
  </form>
</table> 
```

这个例子有效：

```
<form>
  <table>    
    <tr><td><button type="submit">Submit</button></td></tr>
  </table>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:43:02.937

因此，您应该在加载函数的回调中附加该侦听器，以确保在加载表单后附加该侦听器。

例如：

```
$('#result').load('ajax/test.html', function() {

    $("#frame-right").on("submit", "form", function(event){                  
        alert('Submit done')
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:46:24.000

这应该适合你。确保在执行 ajax 时阻止默认提交行为。

```
$(function(){
  $(document).on("submit", "form", function(event){   
      event.preventDefault() ;  // prevent dfaul submit behaviour
      alert("submitting")
  });
}); 
```

# javascript - 没有全局变量的重用函数？

> ID：11742044
> 
> 赞同：2
> 
> 时间：2012-07-31T14:07:40.410
> 
> 标签：javascript, jquery

几天前，我通过自己的示例了解到全局变量和函数有多糟糕。所以显然最好的解决方案是不要使用它们，但是迟早我需要一遍又一遍地重用我的变量和函数。

所以我的问题是：我可以在不全局声明的情况下重用我的函数和变量吗？可以做到吗？

例如，我想多次重用我的`alertBox`函数和`containsP`变量：

演示：http: [//jsfiddle.net/ajmyZ/](http://jsfiddle.net/ajmyZ/)

```
//I am BAD GLOBAL FUNCTION inside var 
//But I am reusable!!! 

var alertBox = function () {
    alert("Hey I am BAD function!!")
}

$(document).ready(function () {
    //I am BAD GLOBAL var 
    //But I am reusable TOO!!! 
    var containsP = $("div p:first");
    containsP.click(function () {
        alert("Hi BAD var HERE!!");
    });

    $("p").eq(1).click(function () {
        alertBox();
    });

    //I am the NICEST function here
    //but I am NOT reusable :(

    $("p").eq(2).click(function () {
        alert("I am the NICEST function here!!");

    });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:10:58.260

我想避免破坏全局对象的最简单方法就是创建自己的“应用程序上下文”。您可以通过创建一个将整个 js 代码包装在每个文件中的自调用函数来做到这一点。

```
(function( win ) {
    "use strict";

    var still_global_but_only_in_this_anonymous_closure = true;

    $(document).ready(function() {
         // ...
         // accessing the global object:
         win.some_global_property = true;
    });
}( this )); 
```

实际上，您已经使用传入的匿名函数创建了这样一个本地上下文`.ready()`。这只是更明确的方式。该自调用方法只是使用全局对象作为参数调用自身（您仍然可以显式访问全局变量）。此外，通过调用，`"use strict";`您可以避免意外创建全局变量 alá`"Ops_I_Forgot_The_Var_Statment = true;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:12:28.820

The code you posted has no global variables. A variable declared inside of a function (in the case of your example, the anonymous `document.ready` handler) will never be global unless you make one of two mistakes:

1.  forget the `var` keyword, making an implicit global
2.  explicitly say `window.myVar = ...;`

# maps - 如何使 OpenLayers 地图缩小到比它所在的 div 更远的地方？

> ID：11742046
> 
> 赞同：1
> 
> 时间：2012-07-31T14:07:43.763
> 
> 标签：maps, openlayers, openstreetmap

我的 openlayers 地图所在的 div 大约是 300 像素宽，我想缩小到 0 级（一个 256x256 瓦片），但我不能在 OpenLayers 中。但我可以用谷歌地图。

我一直在寻找一个设置，但我找不到它。

我想做的就是同时看到整个世界。我可以在谷歌地图上。谷歌让你看到大约 150% 的世界，但在 openlayers 中似乎被限制为 100%，这意味着如果我想查看整个世界的地图（一个合理的要求），我必须将窗口大小调整到精确的像素。这有点可笑。这真的很难做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:07:16.380

Openlayers 2.12 有一个变化，如果基础层设置为 wrapDateLine，它会阻止地图缩小以查看两个世界

[https://github.com/openlayers/openlayers/blob/master/notes/2.12.md#changes-when-base-layer-configured-with-wrapdateline-true](https://github.com/openlayers/openlayers/blob/master/notes/2.12.md#changes-when-base-layer-configured-with-wrapdateline-true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:34:57.893

OpenStreetMap 提供的最小图块是 256x256 (http://c.tile.openstreetmap.org/0/0/0.png)，因此如果不调整大小，您将无法获得更小的世界视图。

# android - 如何让 GestureDetector 正常工作

> ID：11742051
> 
> 赞同：2
> 
> 时间：2012-07-31T14:07:57.950
> 
> 标签：android, gesturedetector

到目前为止，我的活动中有此代码：

```
private class SwipeGestureDetector extends SimpleOnGestureListener {
    // Swipe properties, you can change it to make the swipe 
    // longer or shorter and speed
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 200;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
      try {
        float diffAbs = Math.abs(e1.getY() - e2.getY());
        float diff = e1.getX() - e2.getX();
        Log.d("MainDisplayActivity", "Gesture class is running");
        if (diffAbs > SWIPE_MAX_OFF_PATH)
          return false;

        // Left swipe
        if (diff > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
           MainDisplayActivity.this.onLeftSwipe();

        // Right swipe
        } else if (-diff > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
          MainDisplayActivity.this.onRightSwipe();

        }

      } catch (Exception e) {
        Log.e("YourActivity", "Error on gestures");

      }
      return false;
    }

  }//end of SwipeGestureDetector class

  //methods called by SwipeGestureDetector when the approrpiate swipes occured
  private void onLeftSwipe() {
        Toast.makeText(this, "Successfully have the swipe working for left", Toast.LENGTH_SHORT).show();
  }

  private void onRightSwipe() {
      Toast.makeText(this, "Successfully have the swipe working for right", Toast.LENGTH_SHORT).show();
  } 
```

我有这个全球性的：`private GestureDetector gestureDetector;`

我有这个，`onCreate`因为我看到人们这样做：

```
gestureDetector = new GestureDetector(this, new SwipeGestureDetector());
    ((LinearLayout)findViewById(R.id.parent_main_display)).setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    }); 
```

不太确定我做错了什么，但是当我滑动时什么都没有发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:12:30.003

You should ovveride the next

```
@Override
 public boolean onDown(MotionEvent e) {
  return true;
 }

 @Override
 public boolean onSingleTapUp(MotionEvent e) {
  return true;
 } 
```

also onFling should return true

# javascript - 图例在 JS 中与我的图重叠

> ID：11742053
> 
> 赞同：1
> 
> 时间：2012-07-31T14:08:08.947
> 
> 标签：javascript, css, margin

我尝试通过使用带有 % 值的 marginBottom 来解决问题。我的图形容器大小也以 % 表示。

它不起作用，我的页面没有响应。帮我解决。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:25:35.133

您需要确保您的图形容器位于具有明确定义的高度值的父容器中。否则，使用 % 值的响应式设计将不起作用。

# google-apps-script - 仅针对新用户触发

> ID：11742054
> 
> 赞同：0
> 
> 时间：2012-07-31T14:08:11.677
> 
> 标签：google-apps-script, google-sheets

我有一个脚本，可以在填写电子表格表格的用户名下在谷歌电子表格中创建一个新工作表。

我希望每当新用户填写与此电子表格关联的表单时触发此脚本。当然，新用户意味着将新的电子邮件地址添加到电子表格中自动生成的“用户名”列中。

这是我目前的代码：

```
function MakeSheet() { 
var ss = SpreadsheetApp.getActiveSpreadsheet(); 
var sheet = ss.getSheetByName("default sheet"); 
var getEmail = Browser.inputBox("user Email: "); 
var s1 = ss.getSheetByName("list of users and emails"); 
var index = s1.getRange(1,1,s1.getLastRow(),1).getValues(); 
var values = s1.getRange(1,2,s1.getLastRow(),1).getValues(); 
nextIndex: for( var i in index) { if( index[i][0] == getEmail ) { var getName =   values[i][0];continue nextIndex;}}

ss.setActiveSheet(ss.getSheetByName("default sheet"));
SpreadsheetApp.getActiveSpreadsheet().duplicateActiveSheet();
ss.setActiveSheet(ss.getSheetByName("Copy of default sheet"));
SpreadsheetApp.getActiveSpreadsheet().renameActiveSheet(getName);
SpreadsheetApp.getActiveSheet().getRange('B3').setValue(getEmail);
SpreadsheetApp.getActiveSheet().getRange('C3').setValue(getName);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:51:51.083

解决方案是在表单提交时触发。在触发功能中，您可以检查用户是否为“新用户”。顺便说一句，我不确定您是如何获得电子邮件地址的 - 您必须是 Google Apps 用户，或者您应该明确询问电子邮件地址。

# mysql - Mysql 复制数据未更新但日志已更新

> ID：11742055
> 
> 赞同：1
> 
> 时间：2012-07-31T14:08:13.537
> 
> 标签：mysql, replication

这是我做的步骤。

我正在复制 mysql 5.0.95 作为主服务器和 5.5 作为从服务器。我正在使用Linux操作系统。我的数据库引擎是这里的 InnoDBenter 代码

### 我已经设置了主人

```
/etc/my.cnf
**#mysql Server setup**
server-id=1
bind-address = 192.168.1.41
innodb_flush_log_at_trx_commit=1
sync_binlog=1
log-bin = /var/log/mysql/mysql-bin.log
binlog-do-db=my_db 
```

### 我已经设置了奴隶

```
/etc/my.cnf
**#mysql replication client setup**
server-id=5
master-host=192.168.1.41
master-user=web_master
master-password=webmaster
master-connect-retry=60
replicate-do-db=dev_my_db
log-slave-updates 
```

### 我已授予 master 权限

```
GRANT SUPER,REPLICATION CLIENT,REPLICATION SLAVE,RELOAD ON *.* TO 'web_master'@'192.168.1.41' identified by 'webmaster'; 
```

我已经在从站上设置了更改主站和 bin 位置

```
CHANGE MASTER TO MASTER_HOST='192.168.1.41', MASTER_USER='web_master', MASTER_PASSWORD='webmaster', MASTER_LOG_FILE='mysql-bin.00002', MASTER_LOG_POS=107; 
```

### 我做了 2 次插入和更新并记录了我的查询

并将我的主人状态检查为

```
mysql> SHOW master STATUS\G

File: mysql-bin.000004
Position: 13790
Binlog_Do_DB: my_db
Binlog_Ignore_DB: 
1 row in set (0.00 sec) 
```

### 我将我的奴隶和奴隶状态检查为

```
mysql> SHOW SLAVE STATUS \G;
*************************** 1\. row ***************************
Slave_IO_State: Waiting for master to send event
Master_Host: 192.168.1.41
Master_User: web_master
Master_Port: 3306
Connect_Retry: 60
Master_Log_File: mysql-bin.000004
Read_Master_Log_Pos: 13790
Relay_Log_File: mysqld-relay-bin.000007
Relay_Log_Pos: 244
Relay_Master_Log_File: mysql-bin.000004
Slave_IO_Running: Yes
Slave_SQL_Running: Yes
Replicate_Do_DB: dev_CHGV2_dbo
Replicate_Ignore_DB: 
Replicate_Do_Table: 
Replicate_Ignore_Table: 
Replicate_Wild_Do_Table: 
Replicate_Wild_Ignore_Table: 
Last_Errno: 0
Last_Error: 
Skip_Counter: 0
Exec_Master_Log_Pos: 13790
Relay_Log_Space: 401
Until_Condition: None
Until_Log_File: 
Until_Log_Pos: 0
Master_SSL_Allowed: No
Master_SSL_CA_File: 
Master_SSL_CA_Path: 
Master_SSL_Cert: 
Master_SSL_Cipher: 
Master_SSL_Key: 
Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
Last_IO_Errno: 0
Last_IO_Error: 
Last_SQL_Errno: 0
Last_SQL_Error: 
Replicate_Ignore_Server_Ids: 
Master_Server_Id: 4
1 row in set (0.00 sec)
ERROR: 
No query specified 
```

我可以看到 bin 日志在 slave 上更新，我不知道是什么导致了这个问题。因为我在主服务器上的更新没有在从服务器上复制。有人可以建议我错过了什么吗？

# java - 图像加密，为什么不能解密？

> ID：11742058
> 
> 赞同：9
> 
> 时间：2012-07-31T14:08:28.150
> 
> 标签：java, image, encryption

我正在尝试使用 ACM 和 henon 加密图像，加密成功，但无法解密。问题是（问题解密是在对像素值进行异或运算后，无法将其恢复到初始位置）。

根据此加密方案：http: //ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=5054653&contentType=Conference+Publications&queryText%3Dimage+encryption [+henon](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?tp=&arnumber=5054653&contentType=Conference+Publications&queryText%3Dimage+encryption+henon)

加密步骤为：

1.  阅读图片
2.  像素提取
3.  使用 ACM 随机播放像素
4.  生成 henon 伪随机
5.  圆角 henon 伪随机
6.  XORing shuffle pixel vaue with henon pseudorandom
7.  写入图像
8.  加密图像完成

解密步骤为：

1.  读取密码图像
2.  像素提取
3.  生成 henon 伪随机
4.  圆角 henon 伪随机
5.  XORing shuffle pixel vaue with henon pseudorandom
6.  使用反向 ACM 恢复像素位置
7.  写入图像
8.  图像恢复

谢谢。

加密代码如下：

```
 img = ImageIO.read(new File("5x5grayscale.bmp"));    
  Raster pixel = img.getData();               
  pxl = new int[img.getWidth()][img.getHeight()];
  pxl2 = new int[img.getWidth()][img.getHeight()];           

  for(int j=0;j<img.getHeight();j++){ 
    for(int i=0;i<img.getWidth();i++){                 
      pxl[i][j]= pixel.getSample(i, j, 0);  
      pxl2[i][j]= pixel.getSample(i, j, 0);  
    }                                                                       
  }           

  // shuffe pixel ACM iterration 1
  System.out.println("shuffle iteration  1");
  for(int i=0;i<5;i++){
    for(int j=0;j<5;j++){                 
      x[xx]=(1*i + c*j)%5;            
      y[xx]=(d*i + e*j)%5; 
      //System.out.println("-new coordinate ="+i+" , "+j+"="+x[xx]+","+y[xx]);
      xx++; 
    }
  }

  //shuffle pixel ACM 2 sd 10
  for(int k=0;k<9;k++){
    System.out.println("shuffle iteration "+(k+2));
    xx=0; 
    for(int i=0;i<5;i++){
      for(int j=0;j<5;j++){                 
        xtemp = x[xx];
        ytemp = y[xx];
        x[xx] = (1*xtemp + c*ytemp) % 5;
        y[xx] = (d*xtemp + e*ytemp) % 5;   

        System.out.println("-new coordinate="+i+" , "+j+"="+x[xx]+","+y[xx]);
        xx++; 
      }
    }              
  } 

  xx=0; 
  for (int a =0;a<5;a++){
    for(int b=0;b<5;b++){
      pxl[a][b]= pxl2[x[xx]][y[xx]];
      xx++;
      //System.out.println(pxl[a][b]);
    }
  }

  System.out.println("===================================henon============================");
  double k[] = new  double[102]; 
  int inter[] = new int [102];

  k[0] = 0.01;
  k[1] = 0.02; 
  double a=1.4;
  double b=0.3;

  System.out.println("generate pseudo random");
  for(int i=0;i<100;i++){                       
    k[i+2] =1-a*(Math.pow(k[i+1], 2))+b*k[i];
    // System.out.println(k[i]);            
  }  

  System.out.println("after rounded");
  for(int i=0;i<100;i++){
    inter[i]= (int) Math.round((k[i]*65536)%256);
    if(inter[i]<0){
      inter[i]=inter[i]+256;
    }
    //    System.out.println(inter[i]);
  }

  System.out.println("setelah xor");
  System.out.println("setelah xor");
  cipher = new int[img.getWidth()][img.getHeight()];
  int z=0;  
  for(int ii=0;ii<img.getWidth();ii++){
    for(int jj=0;jj<img.getHeight();jj++){
      cipher[ii][jj]=inter[z]^pxl[ii][jj];
      // System.out.println(cipher[ii][jj]);
      z++;
    }
  }

  image = new BufferedImage(img.getWidth(),img.getHeight(),BufferedImage.TYPE_BYTE_GRAY);          
  WritableRaster write = image.getRaster();                 

  for(int ii=0;ii<img.getHeight();ii++){
    for(int jj=0;jj<img.getWidth();jj++){          
      write.setSample(jj, ii, 0,cipher[jj][ii] );   
    }  
  }  

  ImageIO.write(image, "bmp", new File("acmhenonenkrip5x5.bmp"));  
  System.out.println("cipher image done");           
} 
```

解密代码如下：

```
public static void main (String[] args) throws java.lang.Exception
{
  int c =2;
  int d = 2;
  int e = c*d+1;
  int x[]= new int[100];
  int y[]= new int[100];
  int xx=0;
  int xtemp;
  int ytemp;
  int sama=1;
  BufferedImage img ;
  BufferedImage image = null;
  int [][]pxl = null ;
  int [][]pxl2 = null ;
  int [][]cipher=null;

  img = ImageIO.read(new File("acmhenonenkrip5x5.bmp"));    
  Raster pixel = img.getData();     

  pxl = new int[img.getWidth()][img.getHeight()];
  pxl2 = new int[img.getWidth()][img.getHeight()];

  for(int j=0;j<img.getHeight();j++){ 
    for(int i=0;i<img.getWidth();i++){                 
      pxl[i][j]= pixel.getSample(i, j, 0);  
      pxl2[i][j]= pixel.getSample(i, j, 0);  
    }                                                                       
  }   

  System.out.println("===================================henon============================");
  double k[] = new  double[30];            int inter[] = new int [30];

  k[0] = 0.01;
  k[1] = 0.02; 
  double a=1.4;
  double b=0.3;

  System.out.println("generate pseudo random");
  for(int i=0;i<27;i++){                       
    k[i+2] =1-a*(Math.pow(k[i+1], 2))+b*k[i];
    // System.out.println(k[i]);            
  }  

  System.out.println("after rounded");
  for(int i=0;i<27;i++){
    inter[i]= (int) Math.round((k[i]*65536)%256);
    if(inter[i]<0){
      inter[i]=inter[i]+256;
    }
    // System.out.println(inter[i]);
  }

  System.out.println("after  xor");
  cipher = new int[img.getWidth()][img.getHeight()];
  int z=0;  
  for(int ii=0;ii<img.getWidth();ii++){
    for(int jj=0;jj<img.getHeight();jj++){
      cipher[ii][jj]=inter[z]^pxl[ii][jj];
      // System.out.println(cipher[ii][jj]);
      z++;
    }
  }

  System.out.println("===================================inverseacm============================");

  System.out.println("decrypt iteration1");

  for(int i=0;i<5;i++){
    for(int j=0;j<5;j++){      
      x[xx]=((e*i) + (-c*j))%5; 
      if(x[xx]<0){
        x[xx]=x[xx]+5;
      }
      y[xx]=((-d*i) + (1*j))%5;  
      if(y[xx]<0){
        y[xx]=y[xx]+5;
      }
      // System.out.println(xx+"-new coordinate ="+i+","+j+"="+x[xx]+","+y[xx]);
      xx++; 
    }    
  }

  for(int iter=0;iter<9;iter++){
    System.out.println("decrypt iteration "+(iter+2));
    xx=0;  
    for(int i=0;i<5;i++){
      for(int j=0;j<5;j++){     
        xtemp = x[xx];
        ytemp = y[xx];
        x[xx]=((e*xtemp) + (-c*ytemp))%5; 
        if(x[xx]<0){
            x[xx]=x[xx]+5;
        }
        y[xx]=((-d*xtemp) + (1*ytemp))%5;  
        if(y[xx]<0){
          y[xx]=y[xx]+5;
        }
        // System.out.println(xx+"-new coordinate ="+i+","+j+"="+x[xx]+","+y[xx]);
        xx++; 
      }          
    }
  }    

  xx=0; 
  for(int ii=0;ii<img.getWidth();ii++){
    for(int jj=0;jj<img.getHeight();jj++){
      System.out.println("cip"+cipher[x[xx]][y[xx]]); //tracing pixel value of cipher
      xx++;     
    }            
  } 

  xx=0; 
  for(int ii=0;ii<img.getWidth();ii++){
    for(int jj=0;jj<img.getHeight();jj++){
      System.out.println("pxl"+pxl[x[xx]][y[xx]]); //tracing pixel value of pxl
      xx++;     
    }
  }

  image = new BufferedImage(img.getWidth(),img.getHeight(),BufferedImage.TYPE_BYTE_GRAY);          
  WritableRaster write = image.getRaster();                 

  for(int ii=0;ii<img.getHeight();ii++){
    for(int jj=0;jj<img.getWidth();jj++){          
      write.setSample(jj, ii, 0,cipher[jj][ii] );                             
    }  
  }  

  ImageIO.write(image, "bmp", new File("acmhenondekrip5x5.bmp"));  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:11:28.183

您应该将每个阶段分为两种方法：一种用于执行，另一种用于撤消。然后你应该编写一组简短的测试，生成数千个随机输入，并在每个输入上进行检查`input.equals(undoIt(doIt(input)));`或类似的东西。

如果任何测试失败，您就会知道从哪里开始寻找。

# android - 在android中将webview缩放到整个屏幕

> ID：11742062
> 
> 赞同：0
> 
> 时间：2012-07-31T14:08:35.607
> 
> 标签：android, android-webview, scaling, viewport

我正在尝试将 webview 缩放到屏幕大小，但我失败了。我尝试了很多组合，但没有一个对我有用。我在该代码中缺少什么？任何帮助是极大的赞赏。

```
package com.example.images;

import android.app.Activity; 
import android.os.Bundle; 
import android.webkit.WebView; 

public class MainActivity extends Activity { 

private WebView webView; 
@Override 
public void onCreate(Bundle savedInstanceState) { 
   super.onCreate(savedInstanceState); 
   setContentView(R.layout.main); 
  webView  = (WebView) findViewById(R.id.webview_compontent); 

  String r="<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,target-densityDpi=device-dpi\">"; 

        String s="<html><head>"+"<style>body{margin:0; }</style>" +r+"</head>" +"<body>"+
           "<IMG src="+ "\"http://46.20.150.55/member/Resimler/kampanya/195/314/blackmakas1.jpg\">" +
           "<DIV style=\"Z-INDEX: 1; POSITION: absolute; TEXT-ALIGN: center; BACKGROUND-COLOR: white;" +
           "WIDTH: 80px; TOP: 137px; LEFT: 121px\">564524</DIV>"+"</body><html>"; 

   webView.setBackgroundColor(0); 
   webView.setBackgroundResource(R.drawable.android); 
   webView.loadData(s, "text/html","UTF-8");  

  //doesn't work
  /*webView.getSettings().setLoadWithOverviewMode(true); 
   webView.getSettings().setUseWideViewPort(true); 

   try { 
       // load the url 
       webView.loadData(s, "text/html","UTF-8");
   } catch (Exception e) { 
       e.printStackTrace(); 
   } */

   //doesn't work

 /* webView.setInitialScale(1); 
  webView.getSettings().setLoadWithOverviewMode(true); 
  webView.getSettings().setUseWideViewPort(true); 
  webView.getSettings().setJavaScriptEnabled(true); 
  */

  //doesn't work

  /* String p="<html><head>"+"<style>body{margin:0; }</style>" +r+"</head>" +"<body>"+
           "<IMG src="+ "\"http://46.20.150.55/member/Resimler/kampanya/195/314/blackmakas1.jpg\">" +
           "<DIV style=\"Z-INDEX: 1; POSITION: absolute; TEXT-ALIGN: center; BACKGROUND-COLOR: white;" +
           "WIDTH: 80px; TOP: 137px; LEFT: 121px\">564524</DIV>"+"</body><html>"; 

   webView.loadData(p, "text/html","UTF-8");

   webView.getSettings().setJavaScriptEnabled(true); 
   webView.getSettings().setLoadWithOverviewMode(true); 
   webView.getSettings().setUseWideViewPort(true); 
   webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY); 
   webView.setScrollbarFadingEnabled(false);   */   

  } } 
```

这是 main.xml

```
<?xml version="1.0" encoding="utf-8"?> 
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
 android:orientation="vertical" 
 android:layout_width="fill_parent" 
 android:layout_height="fill_parent" 

  >

 <WebView
     android:id="@+id/webview_compontent"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"

 />

 </LinearLayout> 
```

这是清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.images"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

（已编辑）

我得到的网页是：

这是我得到的页面.. 我想要的是使广告图像适合所有屏幕。

![在此处输入图像描述](../Images/7b7e4131c59843fcbee085e5ecbceb42.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:55:58.687

问题是您的 webwiew 是全屏的，但 blackmakas 不是。 `webView.setBackgroundResource(R.drawable.android);`这一行表明你有全屏。问题出在您的 html 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:38:23.637

我认为您需要使用 WEbViewClient 将 url 加载到全屏图像中，因为您面临的问题是您试图在实际设置视图之前加载具有宽度和高度的 webview。

尝试按照这里的教程：[http](http://www.technotalkative.com/android-webviewclient-example/) ://www.technotalkative.com/android-webviewclient-example/和这个： http: [//www.chrisdanielson.com/tag/webviewclient/](http://www.chrisdanielson.com/tag/webviewclient/)

# java - 每次访问数据库时都需要 createEntityManager() 吗？

> ID：11742065
> 
> 赞同：1
> 
> 时间：2012-07-31T14:08:48.240
> 
> 标签：java, entitymanager

如果您正在执行 CRUD 程序，您是否必须这样做（事务类型：RESOURCE_LOCAL 而不是 JTA）

```
@PersistenceUnit(unitName="mongo")
EntityManagerFactory emf;

EntityManager em;

@Inject
private SomeObj injectableObj;

public void create()
{
   em = emf.createEntityManager(); <---- here
   SomeObj obj = new SomeObj();
   em.persist(obj);
}

public void read()
{
   em = emf.createEntityManager();  <---- here
   Query query = em.createQuery("Select s from SomeObj s");

}

public void update()
{
   em = emf.createEntityManager();  <---- here
   SomeObj s = em.find(SomeObj.class, injectableObj.getId());
   s.setSomeObj(injectableObj.getSomeObj());

}

public void delete()
{

   em = emf.createEntityManager();  <---- here
   SomeObj s = em.find(SomeObj.class, injectableObj.getId());
   em.remove(s);
} 
```

问题：有没有注入EntityManager？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:12:19.437

Maybe try to look here for exemples :

[Injections EntityManager](http://openejb.apache.org/examples-trunk/injection-of-entitymanager/)

I prefer to use : Injection via `@PersistenceContext`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:13:38.907

You can use injection. I use it like this:

```
@PersistenceContext(unitName = "some_jndi_name")
private EntityManager em; 
```

# javascript - 在页面中包含两次的脚本中调用函数

> ID：11742066
> 
> 赞同：0
> 
> 时间：2012-07-31T14:08:48.057
> 
> 标签：javascript, javascript-events

今天，我读到一个关于**[两次包含同一个 JavaScript 库的危险](https://stackoverflow.com/questions/4891278/what-is-the-danger-in-including-the-same-javascript-library-twice)**的问题。我创建了一个小项目，通过单击链接调用的函数中的简单警报来测试它。我使用 jquery 来帮助我将事件处理程序绑定到单击，如下所示：

***情况1***

Javascript：

```
$(document).ready(function () {
    $("#TestLink").click(function() {
        alert("Message");
    });
}); 
```

html:

```
<p>
   <a id="TestLink">Click here</a>
</p> 
```

现在，当我单击链接时，消息会显示两次。我知道 jquery 绑定了一个事件处理程序两次，因为对脚本的引用已被添加了两次。

在另一种情况下，我将代码更改为如下所示：

***案例2***

Javascript：

```
function showMessage() {
    alert("Message");
} 
```

html:

```
<script type="text/javascript" src="@Url.Content("~/Scripts/Test.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/Test.js")"></script>

<p>
   <a onclick="showMessage();" id="TestLink">Click here</a>
</p> 
```

当我单击链接时，即使我包含了两次脚本，该消息也只会显示一次。

**我的问题：**

案例一，同一个脚本被多次添加时，两次绑定事件处理程序的过程是如何完成的？我只想要更多关于事件钩子的详细信息，当一个相同的脚本被添加不止一次时；文章、参考资料等...

在案例 2 中，浏览器如何解决必须选择使用哪个脚本来调用函数的冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:14:47.213

在第一种情况下，事件被绑定了两次。有时希望这样做。如果您想要一个 div 上的单击事件，以及同一个 div 上不相关的另一个单击事件，您可能希望这两个函数都执行。这就是为什么点击事件都会触发并调用函数的原因。在这种情况下，它是被调用两次的同一个函数！在事件上绑定两个函数的有用场景示例：

> 您可能想知道用户是否处于活动状态。身体上的点击事件会告诉你。但是，如果叠加层处于活动状态，您需要移除叠加层。这两个函数都是在 body 的 click 事件上执行的。

在第二种情况下，您在 javascript 的第一个包含中声明的函数被第二个 javascript 中的相同函数覆盖。第一个声明消失了。因此该函数只被调用一次：

```
var test = function() {
  alert('first one!');
}
var test = function() {
  alert('second one!');
}
test(); // second one! 
```

# javascript - 有没有办法为 Javascript 中的每个函数添加 try-catch？

> ID：11742067
> 
> 赞同：23
> 
> 时间：2012-07-31T14:08:50.890
> 
> 标签：javascript, error-handling, try-catch, prototype

对于错误报告，我想在我拥有的每个函数的代码周围插入一个 try-catch 包装器。

所以基本上我想更换

```
function foo(arg){
   bar();
} 
```

...和...

```
function foo(arg){
    try {
        bar() 
    }
    catch(e){
        customErrorHandler(e)
    }
} 
```

有没有办法将这种通用的 try-catch 应用到所有函数而无需手动编辑所有函数？例如通过修改 Function 对象的原型？

**编辑**

为什么我想尝试捕获我的所有功能：我正在构建一个 HTML5 应用程序，并在 iOS 和 Android 上发布。我可以从我当前的基本 javascript 错误报告中看出，即使该应用程序在我自己的设备上运行良好，但在其他一些设备上确实会发生错误。

我的目标是双重的：每当某人的设备上发生 javascript 错误时......

1.  我想通知用户该应用程序可能无法完美运行
2.  我想大致知道错误发生在哪里，所以我知道在哪里寻找问题

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T09:45:25.367

这并不简单，因为无法找到到处定义的所有 JavaScript 函数。例如，任何此类方法都可能会错过在运行时定义的回调函数。

您也可能不想包装所有函数，因为这将包括浏览器函数和您当然不想包装的 JavaScript 库中的函数。

更好的方法可能是定义一个包装另一个函数的函数：

```
var tcWrapper = function(f) {
    return function() {
        try {
            f.apply(this, arguments);
        } catch(e) {
            customErrorHandler(e)
        }
    }
} 
```

现在您可以使用此功能来装饰您想要的任何东西。如果使用名称空间，包装将变得更加简单：

```
var NS = { f: function() {  } } 
```

只需将所有函数包装在一个特殊的命名空间中，然后遍历命名空间：

```
$.each( NS, function(i,n) {
    var p = NS[i];
    if( typeof p === 'function' ) {
        NS[i] = tcWrapper(p);
    }
} ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-05-14T18:07:34.847

我没有足够的声誉来评论接受的答案。

我`return`在 the 之前添加了一个`f.apply`来传递返回值。

```
var tcWrapper = function(f) {
    return function() {
        try {
            return f.apply(this, arguments);
        } catch(e) {
            customErrorHandler(e)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:11:47.907

好的，我似乎在这里找到了它：[http ://www.nczonline.net/blog/2009/04/28/javascript-error-handling-anti-pattern/](http://www.nczonline.net/blog/2009/04/28/javascript-error-handling-anti-pattern/)

基本上，所有函数都被 try-catch 包装器替换，其中包含 try 部分中的原始函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-01T02:44:06.837

我需要加强一些代码，所以我编写了一个名为的函数`fortify`并将其放入 NPM 模块中。这是一项正在进行的工作，但它应该有所帮助。

[https://github.com/infinitered/over-armour](https://github.com/infinitered/over-armour)

**奖励**：它适用于异步函数。欢迎反馈

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-16T14:42:48.923

给定的答案已经很好用了，只是想用闭包分享一个新的答案。

#### 定义包装器

```
const tryCatchWrapper = (executable) => async (...args) => {
    try {
        const result = await executable(...args);
        return result;
    } catch (error) {
        // use any custom handler here
       error.message = `[${executable.name}] - ${error.message}`;
       error.data = {...error.data, input_args: args}
       throw error;
    }
} 
```

#### 没有 try-catch 包装器的函数

```
const myFunction = async (x, y) => {
    const sum = x + y;
    if (sum > 10) throw new Error(`sum > 10 custom error`)
    return sum;
} 
```

#### 如何使用它

```
try {
    const wrapperFunction = trycatchWrapper3(myFunction2);
    const output = await wrapperFunction(2, 93)
    console.log(output)
} catch (error) {
    console.error(error)
} 
```

## 结尾

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-07-31T14:13:10.800

我想知道（这纯粹是猜测，所以不确定这是否可行）你可以做这样的事情：

```
function callTryCatch(functionSignature) {
    try {
        eval(functionSignature);
    } catch (e) {
        customErrorHandler(e);
    }
}

function entryPoint() {
    callTryCatch(function() {
        // do function logic
    });
} 
```

同样，这纯粹是猜测，我还没有测试过，但如果可能的话，我认为关键在于**eval**语句。

# jquery - 制作可访问的大型菜单，焦点上的滑动问题

> ID：11742070
> 
> 赞同：0
> 
> 时间：2012-07-31T14:09:04.437
> 
> 标签：jquery, drop-down-menu, megamenu, accessible

您好，我正在尝试制作一个可访问的大型菜单。我可以让下拉菜单在悬停时正常​​显示，但是当用户没有鼠标时，即当链接获得焦点时，我还需要它来滑动。如果您单击小提琴结果框架，您可以尝试此操作：http: [//jsfiddle.net/Dcws6/1/](http://jsfiddle.net/Dcws6/1/)并按 alt+tab (safari) tab (windows)。我的 jquery 一定有问题，但我一生都无法弄清楚。

我正在尝试做的另一件事是确保一个动画在下一个动画触发之前完成，即当您将鼠标悬停在“关于我们”然后将鼠标悬停在画廊上时，它会等待“关于我们”下拉菜单在它向下滑动之前滑动“画廊的下拉菜单。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:09:44.550

重点是链接，而不是`div`包含它的链接。

```
$('.drop a').focus(
function() {
    $(this).closest("li").find('div.nav-container').stop(true, true).delay(500).slideDown('slow');
});
$('.drop a').blur(
function() {
    $(this).closest("li").find('div.nav-container').stop(true, true).delay(500).slideUp('slow');
});​ 
```

[**演示**](http://jsfiddle.net/zLDqT/)

# json - 使用 shell 命令在 mongodb 中导出集合

> ID：11742071
> 
> 赞同：2
> 
> 时间：2012-07-31T14:09:05.920
> 
> 标签：json, mongodb, export, export-to-csv

我想使用 shell 命令在 mongodb 中导出集合：我尝试使用以下命令，但未导出带有“：”（号码：电话，号码：传真）的字段。

```
mongoexport --csv -d schemaName -c collectionName -q "{typeName:'user'}" -f "name, surname, e-mail, number:phone, number:fax" -o export.csv 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:17:06.847

我认为您发现了一个合法的错误。该`mongoexport`工具很少使用，并且在解析 JSON 时，冒号表示非常具体的东西，因此该工具可能会被混淆。

您可以在此处提交错误：http: [//jira.mongodb.org/](http://jira.mongodb.org/)

# ios - facebook share no work on facebook ios app

> ID：11742072
> 
> 赞同：1
> 
> 时间：2012-07-31T14:09:07.993
> 
> 标签：ios, facebook, facebook-graph-api

我正在尝试制作一个类似 youtube 的分享按钮，您可以在其中选择是否要将内容分享到您拥有的页面中。

这是我打开共享窗口的 js 代码：

```
function share(url){
    myWindow = window.open('http://www.facebook.com/sharer.php?u='+url, '',     
    'width=700,height=350');
    myWindow.focus();
} 
```

然后我将 OG 元数据添加到共享内容中：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta property="og:url" content="https://my-url.com/content">
<meta property="og:title" content="content title">
<meta property="og:description" content="description title">
<meta property="og:type" content="video.other">
<meta property="og:image" content="http://my_url.com/image.jpg">
<meta property="og:video" content="http://my-url.com/content">
<meta property="og:video:secure_url" content="http://my-url.com/content">
<meta property="og:video:type" content="application/x-shockwave-flash">
<meta property="og:video:width" content="400">
<meta property="og:video:height" content="300">
<meta property="og:site_name" content="site name">
<meta property="fb:app_id" content="APPID">
<meta property="fb:admins" content="admin_id"> 
```

它可以正常工作，但是当我通过这种方式分享某些内容并尝试通过我的墙或朋友墙的 Facebook iPhone APP 打开它时，它不起作用。

提前致谢。

# python - python中是否有任何正则表达式来找出文件夹路径中的空间

> ID：11742073
> 
> 赞同：2
> 
> 时间：2012-07-31T14:09:10.837
> 
> 标签：python, regex

我有一个python字符串如下：

```
mystring1 = "command1 "  "D:\\The palace\\The King\\ " "D:\\The palace\\The Queen\\"

mystring2 = "command2 "  "D:\\Thepalace\\TheKing\\ " "D:\\Thepalace\\TheQueen\\" 
```

是否有任何正则表达式可以找出文件夹路径中是否存在空格

即我如何`mystring1`通过`mystring2`使用正则表达式来区分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:25:27.573

如果它`mystring1`是`mystring2`正确的 Python 字符串，我想你想看看[shlex](http://docs.python.org/py3k/library/shlex.html) Python 包。它是专门为解析此类字符串而创建的。然后你可以使用`shlex.get_token()`来检索命令，以及命令的参数，引号/空格解析等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:31:11.200

假设你的意思是

```
mystring1="command1 D:\\The place\\The King\\ D:\\The place\\The Queen\\" 
```

您可以在出现时拆分字符串，`D:\\`然后从子字符串中删除空格将为您提供无空间路径，例如

```
subs = mystring1.split('D:\\')
mystring2 = subs[0]
for s in subs[1:]: 
    mystring2 += ' D:\\' + s.replace(' ', '') 
```

例如我应用了这个并得到了

```
>> mystring2
    'command1  D:\\Theplace\\TheKing\\  D:\\Theplace\\TheQueen\\' 
```

如果您只需要区分它们，请使用

```
def has_spaces(str1):
    subs = str1.split('D:\\')
    for s in subs[1:]: 
        if s.strip().count(' ') > 0:
        return True

>> has_spaces(mystring1)
    True
>> has_spaces(mystring2)
    False 
```

检测是否有任何路径包含空格。感谢 Pengyu Chen 指出 OP 提出了一个更简单的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:27:05.223

您可能确实不需要正则表达式。一个简单的字符串方法`string.find(string)`就可以了。

```
s = "some string"
space = " "
s.find(space) # gives -1 when space is not in s, otherwise the offset of its 1st appearance 
```

**编辑：**

此答案根据问题的版本进行编辑。

由于您使用的是 Windows，因此我将向您介绍`":\\. .*\\"`具有绝对路径的命令。至于相对路径，恐怕不会有很好的解决方案来检测。

# mysql - 在另一个查询中使用一个查询的结果

> ID：11742075
> 
> 赞同：1
> 
> 时间：2012-07-31T14:09:15.000
> 
> 标签：mysql, join, subquery, nested-sets

我们正在使用嵌套集模型的混合体来允许一个孩子有多个父母。它是 Mike Hillyers 博客中描述的嵌套集模型的扩展：http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/ [-](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)这可能有助于解释一些列名。

我对 SQL 还很陌生，但我研究了连接、子查询等，但似乎没有什么能提供我需要的结果。我希望答案相当简单，而且几乎肯定会是一个`LEFT JOIN`，但我不能指望它。

我有一个名为“nested_pa​​rts”的简单表，有 5 列：“tree_id”、“part_id”、“lft”、“rgt”和“mapping”。

以下查询返回我要在第二个查询中比较的值。

```
SELECT * FROM nested_parts WHERE part_id = 125 
```

具体来说，我现在知道part#125 存在于哪个tree_id 中，以及每个tree_id 的lft 和rgt 值。

我现在需要知道我之前提取的 tree_id 结果数组中的所有 part_id。

我为此使用了一个子查询：

```
SELECT * FROM nested_parts
WHERE tree_id = ANY (SELECT tree_id AS tbl FROM nested_parts WHERE part_id = 125) 
```

现在我需要知道哪些part_id 的lft 和rgt 值不在每个tree_id 范围内part#125 的lft 和rgt 值之间。如果我仍然有两个表要比较，或者可以使用虚拟表，这将很容易，但如果没有循环，这似乎是不可能的。

任何帮助都非常感激，但请感谢我是愚蠢而不是懒惰，虽然我已经阅读了很多关于 UNIONS、JOINS、HAVING、WHERE、SELECT(SELECT) 的内容，但数据的复杂性是最重要的，但我发现这非常令人困惑。

亲切的问候，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:15:08.597

虽然我建议重新审视您的数据架构，但我会尽力帮助您解决这个特定问题。

首先，让我们重温一下`JOIN`s。您的查询

```
SELECT * FROM nested_parts WHERE tree_id = ANY (SELECT tree_id AS tbl FROM nested_parts WHERE part_id = 125) 
```

可以简化为`JOIN`

```
SELECT np.* FROM nested_parts AS np
INNER JOIN nested_parts AS np2
ON np.tree_id = np2.tree_id
AND np2.part_id = 125 
```

在我读完问题并完全理解之后，我会更完整地回答。我希望这对现在有所帮助。

**更新：**

为了仅获取 lft 和 rgt 值不在第 125 部分中的*lft*和*rgt**值*之间*的*记录，您必须使用条件。***`HAVING`***

 ***```
SELECT np.* FROM nested_parts AS np
INNER JOIN nested_parts AS np2
ON np.tree_id = np2.tree_id
AND np2.part_id = 125
HAVING np.lft > np2.rgt
    AND np.rgt < np2.lft 
```

如果我的逻辑在这里不好，请告诉我。不过，我*认为*这就是您要寻找的东西。

**编辑：**

您的查询还可以组合连接条件

```
SELECT np.* FROM nested_parts AS np
INNER JOIN nested_parts AS np2
ON np.tree_id = np2.tree_id
AND np2.part_id = 125
AND np.lft > np2.rgt
AND np.rgt < np2.lft 
```***

# javascript - Node.js 对象数组数据连接

> ID：11742080
> 
> 赞同：0
> 
> 时间：2012-07-31T14:09:29.680
> 
> 标签：javascript, arrays, node.js, multidimensional-array, set

是否有任何库或有效技术可以在节点 JS 中执行数组连接，这样，

```
A = [ { a: 1, b: 'a' }, { a: 2, b:'b' }, { a: 3, b: 'a' }, { a: 4, b: 'b' } ]
B = [ { a: 1, c: true }, { a: 2, c: true }, { a: 3, c: false } ] 
```

可以加入这样可以产生以下结果：

```
# Intersection on a
C = [ { a: 1, b: 'a', c: true }, { a: 2, b: 'b', c: true }, { a: 3, b: 'a', c: false } ]

# Union on a
D = [ { a: 1, b: 'a', c: true }, { a: 2, b: 'b', c: true }, { a: 3, b: 'a', c: false }, { a: 4, b: 'b' } ] 
```

array.map 是这个问题的最佳解决方案吗？

效率在这里是最重要的，因为它可以在生产中处理巨大的阵列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:25:31.080

您对如何识别和合并对象不是很具体。

使用下划线，可以得到如下结果：

```
_u=require("underscore")
A = [ { a: 1, b: 'a' }, { a: 2, b:'b' }, { a: 3, b: 'a' }, { a: 4, b: 'b' } ]
B = [ { a: 1, c: true }, { a: 2, c: true }, { a: 3, c: false } ]

D = _u.zip(A,B).map( 
      function(x){ 
        return _u.extend(x[0],x[1]);
      } 
    );

C = _u.zip(A,B).filter(
      function(x){ 
        return !!x[1];
      }
    ).map(
      function(x){ 
        return _u.extend(x[0],x[1]);
      }
    ); 
```

那是你要找的吗？

# javascript - 如何根据电子邮件地址域重定向到电子邮件登录页面

> ID：11742083
> 
> 赞同：2
> 
> 时间：2012-07-31T14:09:41.830
> 
> 标签：javascript, jquery, asp.net

我有一个注册页面，我正在捕获用户电子邮件地址，一旦注册完成，用户必须激活一个帐户..这个过程工作正常..现在我在这里寻找的是

我想在用户单击此按钮时提供“转到我的收件箱”按钮，它应该会自动重定向到电子邮件登录页面

例如：当用户在下一步注册时输入 yahoo 电子邮件 ID 时，它应该重定向到 yahoo 登录页面。

例如：当用户在下一步注册时输入 gmail 电子邮件 ID 时，它应该重定向到 gmail 登录页面..

例：hotmail 例：aol...ect

谁能给我一些建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:21:09.703

当您假设 @ 之后的部分始终是他的域时，用户可以在其中找到它的收件箱。（如 gmail.com、hotmail.com 等）你可以做这样的事情。

```
(function () {
    var mail = "your.aweseome-mail@gmail.com",
        atPos = mail.indexOf("@"),
        hoster = mail.substring(atPos + 1);
    alert('https://' + hoster);
}())​ 
```

更新：最好使用硬编码列表（正如 Uwe Keim 上面提出的那样），因为上面的代码可能只适用于大多数免费邮件服务，而不适用于“私人”域。

更新：http: [//jsfiddle.net/4GyTg/](http://jsfiddle.net/4GyTg/)

我更新了 jsfiddle 示例，因此它使用定义的服务列表来检查域（用于登录 Web 界面）是否可用。

```
(function () {
    var mail = "your.aweseome-mail@gmail.com",
        services = {
            "gmail.com": "https://gmail.com",
            "hotmail.com": "https://hotmail.com"           
        },
        atPos = mail.indexOf("@"),
        hoster = mail.substring(atPos + 1);

    if (services[hoster]) {
        alert('Go to: ' + services[hoster]);
    } else {
        alert('Nothing to do here');
    }
}())​ 
```

# c# - 如何检查是否从 C# 代码加载了 jQuery？

> ID：11742084
> 
> 赞同：0
> 
> 时间：2012-07-31T14:09:41.583
> 
> 标签：c#, jquery, jquery-ui, sharepoint, web-parts

我正在开发一个 WEB_PART，我想知道是否有某种方法可以找出要插入 Web 部件的母版页项目中是否存在任何 JQUERY LIB。

我想做这样的事情：

```
 if (jQuery) {  
 // jQuery is loaded  
Page.ClientScript.RegisterClientScriptInclude(typeof(WebpartSlideShow), "jQuery",                        "/_layouts/Jquery-Cycle/jquery-1.5.1.min.js");
Page.ClientScript.RegisterClientScriptInclude(typeof(WebpartSlideShow), "jQueryCycle", "/_layouts/Jquery-Cycle/jquery.cycle.all.min.js");
               // break;
   } else {
  // jQuery is not loaded
    Page.ClientScript.RegisterClientScriptInclude(typeof(WebpartSlideShow), "jQueryCycle", "/_layouts/Jquery-Cycle/jquery.cycle.all.min.js");

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:15:36.590

[http://msdn.microsoft.com/en-us/library/255xet9e.aspx](http://msdn.microsoft.com/en-us/library/255xet9e.aspx)

```
Page.ClientScript.IsClientScriptIncludeRegistered("jQuery"); 
```

不过，您可能应该定义一些常量。

# set - mediaelement.js 多视频库 Flash 后备

> ID：11742094
> 
> 赞同：1
> 
> 时间：2012-07-31T14:10:09.927
> 
> 标签：set, mediaelement.js, rc

有没有人有一个成功的使用 mediaelement.js 的多视频画廊的 URL，其中相同的 MediaElementPlayer 实例被重用，并让它与 IE8 和 7 的 Flash 后备一起工作？

在第一次创建新的 MediaElementPlayer 后，我将 setSrc 作为函数更改为部分成功。这对于 HTML5 组件是健壮的，但对于 Flash 回退却失败了。setSrc 正在安慰 IE8 和 7 中不可用。它无法识别对象。

将 setSrc 移动到新 MediaElementPlayer 的“成功”部分确实会按预期加载 Flash 后备和 HTML5 视频。在尝试更改播放器的来源时，我试图“销毁”并即时重新创建 MediaElementPlayer 对象，但没有成功。我没有声明播放器使用`var=player`如此合理地期望删除它但没有成功：

```
player = false;
delete player;

//make a new instance of the mediaelement video player
player = new MediaElementPlayer('#videoPlayer', {
   pluginPath: ''+basePath+'_Includes/JS/',
   success: function (player, node) {
   //set the size (for flash otherwise no video just sound!)
   if($("#rg-gallery.smallGallery").length > 0){
        player.setVideoSize(400, 225);
   } else{
        player.setVideoSize(640, 360);
   }
   player.setSrc([   
      { src: mp4, type: 'video/mp4' },
      { src: webm, type: 'video/webm' }
   ]);       
   player.load();
   player.pause();

   //if the video plays stop the slideshow
      player.addEventListener('play', function () {
      videoPlaying.push('playing');
      stopSlideshow();
      }, false);
   }
}); 
```

此处和网络上的研究表明，其他人正在尝试尝试这种类型的动态画廊，但我无法找到表明它在技术上可行的示例。

有人破解它的任何示例 URL 都会很可爱。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:52:12.940

解决了。

创建了一个视频代码的JS变量：

```
var playerView = '<video width="640" height="360" id="videoPlayer" class="video-js vjs-default-skin" poster="" controls preload="auto"><source id="mp4" type="video/mp4" src="" /><source id="webm" type="video/webm" src=""  /></video>'; 
```

在初始化时删除任何现有播放器的任何 DOM 渲染，将其设置为 false 并删除它：

```
//remove any existing video player
$(".mejs-container").remove();
player = false;
delete player; 
```

将新的视频视图附加到 DOM：

```
//add a new one
$(".rg-video").append(playerView); 
```

创建播放器的新实例并设置 src 并正常加载：

```
//make a new instance of the mediaelement video player
player = new MediaElementPlayer('#videoPlayer', { ... 
```

IE8 和 7 的 HTML5 视频和 Flash 视频回退现在作为动态混合媒体库的一部分。

去喝茶和奖牌。

:)

# jquery - Jquery查找单击了哪个按钮然后运行特定的If else语句？（新手）

> ID：11742097
> 
> 赞同：1
> 
> 时间：2012-07-31T14:10:20.083
> 
> 标签：jquery, function, if-statement

我真的是 Jquery 的新手，正在尝试弄清楚如何确定单击了哪个链接，然后运行 ​​if else 语句。这是一个视频游戏粉丝网站。

我为单位统计信息设置了一个表格，并将一堆 Div 设置为按钮（显示设置为阻止的链接），当单击一个按钮时，它会使用该单位数据和图像填充表格。我的工作正常。现在在某些情况下，一个单位拥有具有不同统计数据的备用武器。我有一个空白的 tr 标签，里面有一个链接，当单位有备用武器时，它只会在 td 标签中获取文本。

我要做的是在不离开或刷新页面的情况下让该链接替代（切换）武器统计信息。我让它与一个单元一起工作，但它以相同的方式交替表数据（html），每个单元都有该特定链接出现。我需要它知道单击了哪个按钮，然后当 alt 链接出现时，它会切换该单位的正确武器数据。

我真的希望这是有道理的，因为这只是我使用 jquery 的第二天。由于我是新手，请尽可能具体地提供帮助。非常感谢

我的html设置是。

```
<div id="unit1"><a href="#">Unit 1</a></div>

<div id="Unit2"><a href="#">Unit 2</a></div>

<div id="Unit3"><a href="#">Unit 3</a></div>

<table>

<tr>
<td><a id="altweapon" href="#"></a></td>
<td><span id="weapName"></span></td>
<td><span id="attack"></span></td>
<td><span id="range"></span></td>
</tr>

</table> 
```

我的 jquery 设置好了。

```
$("#Unit1").click(function(){
   $("#altweapon").html("");
   $("#weapName").html("weapon 1");
   $("#attack").html("10");            

 });
$("#Unit2").click(function(){
   $("#altweapon").html("Alternate");
   $("#weapName").html("weapon 1");
   $("#attack").html("5");            

 });
$("#Unit3").click(function(){
   $("#altweapon").html("Alternate");
   $("#weapName").html("weapon 1");
   $("#attack").html("15");            

 });

$("#altweapon").click(function() {
    $("#altweapon").toggleClass("Wp1").toggleClass("Wp2");

    if ($("#altweapon").hasClass("Wp1"))
  {
        $("#weapon").html("Weapon 1");

  } else
  {
        $("#weapon").html("Weapon2");
  }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:20:26.960

不确定这是否回答了您的问题，但似乎无论您在做什么都可以从您学习 jquery [data objects](http://api.jquery.com/data/)中受益。有了这个，您可以存储和检索设置。例如 ...

```
<a class="weapon" data-attack="10" data-range="1">Unit 1</a>
<a class="weapon" data-attack="12" data-range="2">Unit 1</a>
<a class="weapon" data-attack="15" data-range="3">Unit 1</a> 
```

然后 jQuery...

```
$('a.weapon').click(function({
    $('#weapName').html( $(this).html() );
    $('#attack').html( $(this).data('attack') );
    $('#range').html( $(this).data('range') );
}); 
```

您还可以设置`$('body').data('foo', 52);`将应用于整个文档，而不仅仅是特定元素...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:13:41.730

```
if(jQuery('#id').data('clicked')) {
    //Do whatever you want 
} else {
    // do whatever you want
} 
```

You can use multiple of these to accomplish which #id or .class was clicked.

An alternative method would be to use var boolean. This enables you to toggle too.

remember in all these examples `$=JQuery`

```
var isClicked = false;
$('#id').click(function () {
    isClicked = true;
});

if (isClicked) {
    // The link has been clicked.
} else {
    // The link has not been clicked.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:13:49.647

您应该`this`在事件处理程序中使用对象。该对象指的是在其中执行的任何对象上下文方法。它与我使用的其他语言的概念非常不同，因此您必须注意不要因此而踩到任何地雷。

看看这个小提琴的例子 [http://jsfiddle.net/qKB3p/5/](http://jsfiddle.net/qKB3p/5/)

# java - 日期值未正确显示

> ID：11742098
> 
> 赞同：0
> 
> 时间：2012-07-31T14:10:34.640
> 
> 标签：java, spring, jsp

**大家好，我遇到了自定义属性编辑器的问题。以下是我的代码****片段：* *

```
 import java.beans.PropertyEditorSupport;
  import java.text.DateFormat;
  import java.text.SimpleDateFormat;
  import java.util.Calendar;
  import java.util.Date;
  import org.joda.time.format.DateTimeFormatter;
  import org.joda.time.format.ISODateTimeFormat;
  public class CustomCalendarEditor extends PropertyEditorSupport {

         private  Date date;
         @Override
         public String getAsText() {
           Calendar value = (Calendar) getValue();
           Date dateTime = value.getTime();
           System.out.println("in editor--->"+dateTime);
           return dateTime.toString();
         }
         @Override
         public void setAsText(String text) throws IllegalArgumentException {
           try { 
               DateFormat formatter ; 
               Date date ; 
               formatter = new SimpleDateFormat("dd/MM/yyyy");
               date = (Date)formatter.parse(text); 
               Calendar cal=Calendar.getInstance();
               cal.setTime(date);
               System.out.println("Today is " +date );
               setValue(cal);
          }catch(Exception e){
               e.printStackTrace();
         }}
   } 
```

从上述`getAstext`方法中，我将`Calendar`对象转换为日期，以便以弹簧形式显示，如下所示：

```
form:input path="dateTime" value=" ${catalogingInfo.dateTime}" 
```

`getAstext`正在被调用，但日期未以正确的格式显示，它显示如下：

```
java.util.GregorianCalendar[time=?,areFieldsSet=false,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="Asia/Calcutta",offset=19800000,dstSavings=0,useDaylight=false,transitions=6,lastRule=null],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=2011,MONTH=5,WEEK_OF_YEAR=1,WEEK_OF_MONTH=1,DAY_OF_MONTH=6,DAY_OF_YEAR=1,DAY_OF_WEEK=5,DAY_OF_WEEK_IN_MONTH=1,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0,SECOND=0,MILLISECOND=0,ZONE_OFFSET=19800000,DST_OFFSET=0] 
```

我不确定我在哪里犯了错误。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:24:35.340

对，因为您不能使用 toString 来格式化日期或日历。使用 SimpleDateFormat 类和格式化操作

# ms-access - 关系数据库的用户界面：基本功能

> ID：11742101
> 
> 赞同：1
> 
> 时间：2012-07-31T14:10:43.767
> 
> 标签：ms-access, user-interface, rdbms, foreign-key-relationship

这有点尴尬，但已经有一段时间了。

当使用关系数据库并通过主键链接到单独的表时：外键，1-∞，这样，在一个特定的表中，表的外部关系返回一个整数 ID......你如何使这种关系易于理解用户？

例如：

你有一张**公司**表

*   客户识别码
*   公司名
*   公司位置
*   公司业务类型

等（不是实际的列名）

和一张**员工**表

*   开斋节
*   名
*   姓
*   出生日期
*   电子邮件
*   公司

员工*公司*与 CID 相关。但是由于关系的性质，一些输入员工信息的用户必须知道特定公司的 ID 代码。您可以运行查询以返回“CompanyName”及其关联的“CID”，然后可以对其进行搜索，但这种密码并不是一个理想的解决方案。我只是不记得一个人如何解决这个问题的理论，即使我确定我以前做过。我需要在 Microsoft Access 2010 和 Microsoft SSMS（单独的数据库 fwiw）中实现它；但是只要我记得它是如何完成的，执行就应该相对简单！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:47:01.457

创建一个包含 2 列的组合框。一列作为公司名称，另一列作为公司 ID。如果您不希望用户看到，可以将公司 ID 的宽度设置为 0。

这可以通过 MS-Access 表单上的属性表来完成

将组合框的 Row Source 设置为： `SELECT CompanyName, CompanyID FROM Company;`

将组合框的控制源设置为：`Employee.CompanyID`

还要确保将行源类型设置为`Table/Query`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:26:39.023

如果您需要多对多关系（许多员工属于许多公司），那么您将需要另一个表`CompanyEmployees`，如下所示：-

![多对多关系示例](../Images/7052db67bef8996c82ffe18eeea63069.png)

如果员工只属于一家公司，那么这种结构就可以了：-

![简单的关系](../Images/3507b10c0d659fb685ac60bbf7a5b487.png)

在任何一种情况下，您都需要在添加/编辑用户以将用户与一个或多个公司关联时，向用户显示某种形式的下拉列表。

# mapping - Sencha touch 2 代理编写器和模型映射

> ID：11742102
> 
> 赞同：0
> 
> 时间：2012-07-31T14:10:44.640
> 
> 标签：mapping, sencha-touch, extjs, sencha-touch-2

在我的模型中，这些字段使用映射从 json 中的 Get 请求中获取数据。

```
{name: 's35_193', type: 'int', mapping: 'oa$ext.od$document.od$fields.od$field[2].od$value[0].$t'} 
```

我在代理读取器和写入器中定义了一个根：'entry'

在发布请求中，为了保存我的模型实例，不保留此映射。我修改了 s35_193 字段的值，当我用帖子保存模型实例时，我在请求正文中得到了这个

```
{"entry":{"s35_193":1342735200005} .....  } 
```

如何更改模型代理编写器对字段进行编码以保留映射的方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:15:12.540

有关信息，我创建了一个新编写器并覆盖了 getRecordData() 方法。

在那里我可以写我想要的对象。

希望它会帮助某人:)

# ajax - 刷新Tomcat中重新启动的页面后，AJAX GET-request出现在URL栏中

> ID：11742104
> 
> 赞同：0
> 
> 时间：2012-07-31T14:10:45.920
> 
> 标签：ajax, http, tomcat, browser, get-request

我的 web 应用程序在 Tomcat 下运行，它非常密集地使用 AJAX 请求，在开发过程中我也必须密集地重新部署 web 应用程序。重新部署后，我通常只需刷新页面就知道用户会话已删除，但我总是会遇到下面描述的场景：

1.  转到某个页面，一个包含*许多 JS 脚本的非常**大的页面*，它实际上会发出那些密集的 AJAX 请求。
**   停止 Tomcat 或重新部署 Web 应用程序。*   刷新页面。*   在登录表单中输入凭据以进行身份​​验证。*   突然在浏览器窗口中得到**最后一个**AJAX请求响应和在URL栏中的AJAX请求URL。*

 *哇... 对我来说，*AJAX 请求 URL 与它们在网页显示区域中的响应一起出现在 URL 栏中*看起来很奇怪。这实际上发生在 Firefox 和 Chrome 上（尚未在其他浏览器中测试过）。不幸的是，我无法在从头开始编写的简单页面中重现相同的行为。坦率地说，我真的不明白这些请求会发生什么，以及如果用户在 URL 栏中输入 AJAX 请求/响应，为什么浏览器会“思考”......

非常非常感谢您对这种奇怪行为的可能解释或提示。谢谢！

*（也许它可以帮助：所有 AJAX 请求都使用 jQuery 1.4.2 执行）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:09:58.187

非常抱歉，后来才明白，问题不完整，因为还有一个坑我没说，所以原则上没人能回答。该错误的原因隐藏在...`<body onunload="...">`标签定义中。这完全出乎意料，但该代码包含一些 AJAX 请求，当用户离开页面时必须调用该请求。我只意识到身份验证模块 ( `FORM`, `j_security_check`) 返回了包含`Location`标头的响应 (HTTP 302) - 这就是浏览器进行重定向的*原因*。

确切的场景是这样的：

*   打开包含`<body onunload="some_ajax_here">`.
*   使用另一个选项卡注销应用程序，以便您可以留在同一页面。
*   刷新页面，以便 可以调用*一些 ajax - 现在***不允许**此 AJAX 请求，因为它是应用程序的安全部分（您将获得登录页面的转发内容）。
*   输入凭据，现在您可以直接在浏览器窗口中看到*一些 ajax的结果。*

作为快速修复，我希望是最后一个，我在该 AJAX 请求之后添加了另一个请求：

```
$.ajax({
    async: true,
    method: "GET",
    url: document.location.pathname + document.location.search
}); 
```

因此，HTML 页面脚本只是将自页面请求作为最后一个请求 -`j_security_check`返回`Location`最后使用的 HTML 页面的引用，并且重定向工作正常。也许我的解释不清楚，可能不完整，甚至充满错误，但大体上看起来是这样的。再次非常抱歉，谢谢@ChristopherSchultz！*

# c# - ColorConverter ConvertFromString 返回错误的名称

> ID：11742105
> 
> 赞同：2
> 
> 时间：2012-07-31T14:10:47.067
> 
> 标签：c#, asp.net-mvc-3

我正在尝试将十六进制值转换为其相应的颜色名称，但 ColorConverter 的 ConvertFromString 方法正在插入额外的字符：

```
string s1 = "#000000";
string s2 = "#ccff33";
string s3 = "#990000";
Color color;
ColorConverter converter = new ColorConverter();

color = (Color)converter.ConvertFromString(s1);
Console.Write(color.Name); // Outputs "Black"

color = (Color)converter.ConvertFromString(s2);
Console.Write(color.Name); // Outputs "ffccff33";

color = (Color)converter.ConvertFromString(s3);
Console.Write(color.Name); // Outputs "ff990000"; 
```

除了黑色和白色之外，每种颜色都会莫名其妙地出现额外的“ff”。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:17:42.897

我们在我们的一个项目中具有类似的功能，您可以使用以下

```
(color)ColorTranslator.FromHtml(s1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:15:26.663

您可以改用ColorTranslator.FromHtml[方法](http://msdn.microsoft.com/en-us/library/system.drawing.colortranslator.fromhtml.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:17:32.583

那是因为`System.Drawing.Color`以 ARGB 格式存储颜色，即 Alpha + RGB。

要仅打印 RGB 值：

```
Console.Write(color.Name.Substring(2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T13:38:47.510

额外的“ff”表示颜色的不透明度，在这种情况下为 100%（如 davenewza 所说）。

Hexa 中的颜色在 Alpha 或不透明度的开头有 2 个可选字符，红色有 2 个字符，绿色有 2 个字符，蓝色有 2 个字符 (# FF CC FF 33)

# php - 高级 PHP 上传表单

> ID：11742117
> 
> 赞同：0
> 
> 时间：2012-07-31T14:11:24.400
> 
> 标签：php, mysql, forms, upload, insert

MySQL 表如下所示： ![在此处输入图像描述](../Images/d0e8bc9fb26ef356a8235c7c1adcbc16.png)

这是输出的代码：

```
<li>
    <a class="thumb" href="library/<?php echo $row2['projectname']; ?>/<?php echo $row2['projectrecordnum']; ?>.<?php echo $row2['projectformat']; ?>" title="<?php echo $row2['projectrecordtitle']; ?>">
        <img src="library/<?php echo $row2['projectname']; ?>/thumbs/<?php echo $row2['projectrecordnum']; ?>.<?php echo $row2['projectformat']; ?>" alt="<?php echo $row2['projectrecordtitle']; ?>" />
    </a>
    <div class="caption">
        <div class="image-title"><?php echo $row2['projectrecordtitle']; ?></div>
        <div class="image-desc"><?php echo $row2['projectrecorddesc']; ?></div>
        <div class="download">
            <a href="library/<?php echo $row2['projectname']; ?>/<?php echo $row2['projectrecordnum']; ?>.<?php echo $row2['projectformat']; ?>" target="_blank">Download Original</a>
        </div>
    </div>
</li> 
```

下面是输出的样子：

```
<li>

    <a class="thumb" href="library/ultima/2.jpg" title="Timbo DISPLACED">

        <img src="library/ultima/thumbs/2.jpg" alt="Timbo DISPLACED" />

    </a>

    <div class="caption">

        <div class="image-title">Timbo DISPLACED</div>

        <div class="image-desc">Made in 3ds Max, background, color and lens flare from Photoshop</div>

        <div class="download">

            <a href="library/ultima/2.jpg" target="_blank">Download Original</a>

        </div>

    </div>

</li> 
```

我的问题是我找不到一种制作表单的方法，它会创建一些用户想要的字段；然后将每个文件信息上传并写入 mysql 数据库（请记住，文件的数量是不确定的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:49:13.553

这不是一个真正的具体问题，但我会尽力为您提供一个起点。

我假设你还没有表格...

**仅供参考**：不介意用`htmlentities()`或类似的东西逃避你的输出！

1）我使用了虚拟数据，但您可以将其替换为关联数据库结果集：

```
$rows = array(
    array(  'projectname' => 'ultima',
            'projectrecordnum' => '1',
            'projectrecordtitle' => 'The ball of destruction'),
    array(  'projectname' => 'ultima',
            'projectrecordnum' => '2',
            'projectrecordtitle' => 'Timbo DISPLACED'),
    array(  'projectname' => 'ultima',
            'projectrecordnum' => '3',
            'projectrecordtitle' => 'Exposure')
); 
```

2) 我创建了一个简单的 HTML 表单，通过 PHP 在结果上循环：

```
<form method="post" action="#">
<?php foreach( $rows as $row ) { ?>
    <div class="caption">
        <div class="">
            <input type="text" name="projectname[]" value="<?php echo $row['projectname']; ?>">
        </div>
        <div class="">
            <input type="text" name="projectrecordnum[]" value="<?php echo $row['projectrecordnum']; ?>">
        </div>
        <div class="">
            <input type="text" name="projectrecordtitle[]" value="<?php echo $row['projectrecordtitle']; ?>">
        </div>
        <?php /* and so more fields ... */ ?>
    </div>
    <hr />
<?php } ?>
    <input type="submit" name="send" value="send" />
</form> 
```

3）在`action`你可以重建你的`$rows`阵列：

```
if( isset($_REQUEST['send']) ) {
    $rows  = array();
    for( $i = 0; $i < count( $_POST['projectname'] ); $i++) {
        $row = array(
            'projectname' => $_POST['projectname'][$i],
            'projectrecordnum' => $_POST['projectrecordnum'][$i],
            'projectrecordtitle' => $_POST['projectrecordtitle'][$i],
        );
        if( ! empty( $_POST['projectname'][$i] ) ) { 
            array_push( $rows, $row );
        }
        unset($row);
    }

    // Your data array...
    print '<pre>'. print_r($rows, true) . '</pre>';
} 
```

# c# - 用于创建动画 png 的库

> ID：11742122
> 
> 赞同：0
> 
> 时间：2012-07-31T14:11:43.097
> 
> 标签：c#, png, apng

我正在寻找本机 c# 中的[APNG](http://en.wikipedia.org/wiki/APNG)编码器，它不依赖于 c/c++ 库。到目前为止，我只找到了几个读者，如果可能的话，我想避免自己编写那个库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:25:10.253

[这](http://www.codeproject.com/Articles/36179/APNG-Viewer)是 APNG 查看器/解析器文章，其中包含 CodeProject 上的源代码。它可能会给你你需要的东西。

在 Github 上有[这个](https://github.com/xupefei/APNG.NET)APNG 解析器。

否则，如果您放弃寻找原生 C# 库，[这里](http://code.google.com/p/sharpapng/)有一个完整的 C/C++ 工具包，包括 C# 包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:21:09.337

我编写了一个 C# PNG 编码器 ( [PngCs](https://code.google.com/archive/p/pngcs/) )，最近我正在评估向它添加 APNG 支持，但是，在阅读规范之后，我怀疑我会尝试它 - 我真的不喜欢 APNG 方法。但是源代码是可用的，它可以作为编写您自己的 APNG 编码器的起点。

# javascript - 在 for 循环中为对象添加新属性

> ID：11742127
> 
> 赞同：-5
> 
> 时间：2012-07-31T14:12:00.247
> 
> 标签：javascript, jquery

如何在 JavaScript 的 for 循环中动态地向对象添加更多对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:21:24.020

**下面的内容来自[下面的问题](https://stackoverflow.com/questions/4326834/can-i-add-a-property-dynamically-in-javascript)，当然也可以动态完成**

这称为对象增强。它是 JavaScript 中的一个关键特性。实际上，在 JavaScript 中有两种方法可以做到这一点：

1.  向实例添加方法或属性（仅限此车）

    var myCar = new Car(1,"Nissan");
    myCar.needsWork = true

2.  将方法或属性添加到汽车原型（所有汽车，甚至已经存在的汽车）

    var myCar = new Car(1, "Nissan");
    var largeCar = new Car(2, "悍马");
    Car.prototype.needsWork = true;

    alert( myCar.needsWork && largeCar.needsWork ? "我们需要工作" : "这里有问题");

**参考：** [Object.prototype](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/prototype)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:21:24.950

所以，对于任何新手来说，这就是答案：

```
var myOBJ = {};
for (i=0; i<5; i++)
{
    //add new object on each loop
    myOBJ[i+"A"] = i + "loopnumber";
} 
```

最终结果将是：

```
myOBJ 
{
    0A : "0loopnumber",
    1A : "1loopnumber",
    2A : "2loopnumber",
    3A : "3loopnumber",
    4A : "4loopnumber"
}; 
```

# php - How can i call an ajax function twice (onchange)

> ID：11742129
> 
> 赞同：0
> 
> 时间：2012-07-31T14:12:02.970
> 
> 标签：php, ajax, function

This is my ajax funcion

```
var XMLHttpRequestObject = false;
if(window.XMLHttpRequest){
    XMLHttpRequestObject= new XMLHttpRequest();
} 
else if (window.ActiveXObject){
    XMLHttpRequestObject= new ActiveXObject("Microsoft.XMLHTTP");
}

function getData(dataSource, divID)
{
    document.getElementById(divID).innerHTML = "Loading...";
    if(XMLHttpRequestObject)
    {
        var obj=document.getElementById(divID);
        //alert(dataSource);
        var dataSource = dataSource+'&done=ok';
        XMLHttpRequestObject.open("GET", dataSource);
        XMLHttpRequestObject.onreadystatechange =function ()
        {
            if(XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200){
                obj.innerHTML = XMLHttpRequestObject.responseText; 
                document.getElementById(divID).innerHTML=XMLHttpRequestObject.responseText;
            } //else {alert ('error'+dataSource)}
        }

        XMLHttpRequestObject.send(null);

    }
} 
```

and this is another function call above ajax function twice:

```
function getCityResult(value){
    getData('aids/getRoutAjax.php?city='+value , 'rout');
    getData('aids/getOriginDestAjax.php?city='+value , 'OriginDest');
} 
```

and i have select menu as following:

```
<select name="city_id" id="city_id" class="" style="width:300px;" onchange="return getCityResult(this.value);">
    <option value="">Select</option>
    <option value="13">ABQ</option>
    <option value="12">MUB</option>
    <option value="14">UDH</option>
</select>

<div id="rout"> 
    //Show some data
</div>
<div id="OriginDest">
    // Show some data
</div> 
```

my result is calling first one only to show data on div with id [rout] How can i call both on same time by this way??

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:17:47.227

这两个都应该被调用，如果你的代码在 getOriginDestAjax.php 中是正确的，它没有理由只适用于第一个。为了确定这一点，请尝试在同一页面上调用两者：

```
getData('aids/getRoutAjax.php?city='+value , 'rout');
getData('aids/getRoutAjax.php?city='+value , 'OriginDest'); 
```

# javascript - 如何隐藏和显示 twitter 引导选项卡？

> ID：11742130
> 
> 赞同：4
> 
> 时间：2012-07-31T14:12:02.780
> 
> 标签：javascript, jquery, twitter-bootstrap

我试图仅在需要时显示隐藏的选项卡。我当前的代码如下所示：

```
<ul id="myTab" class="nav nav-tabs">
    <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
    <li><a href="#data" data-toggle="tab" style="display:none;">New Tab</a></li>
</ul> 
```

jQuery：

```
$('#data').load('functions/test_function.php', { method: "example"}, function() {
    $('#data').tab('show'); 
   // $('#data').show();    
}) 
```

知道我做错了什么吗？代码完成后，该选项卡永远不会显示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T16:16:17.233

使用提供的代码，您正在尝试显示选项卡内容，即使这样也行不通。

如[文档中所述](http://twitter.github.com/bootstrap/javascript.html#tabs)

> 每个选项卡都需要单独激活

它需要在`data-toggle="tab"`元素上激活，而不是在内容上。

```
$('#data').load('functions/test_function.php', { method: "example"}, function() {

    var $tab = $('[data-toggle="tab"][href="#data"]');
    // OR var $tab = $('#tabID');

    $tab.click(function(e) {      // Binding for later use (for user interaction)
        e.preventDefault();
        $tab.tab('show');
    });
    $tab.show();                  // Display the tab
    $tab.tab('show');             // Display the content
}) 
```

您可以选择保留显式选择器`[data-toggle="tab"][href="#data"]`或`id="tabID"`在隐藏选项卡上设置一个。

# java - 测试发布请求

> ID：11742133
> 
> 赞同：0
> 
> 时间：2012-07-31T14:12:07.540
> 
> 标签：java, spring, spring-mvc, junit

在下面的问题中，我很困惑： `handle = adapter.handle(req, res, vc);`

[在 JUnit 测试中的 MockHttpServletRequest 中设置 @ModelAttribute](https://stackoverflow.com/questions/6339777/set-modelattribute-in-mockhttpservletrequest-in-junit-test)

对象是如何/在哪里`adapter`实例化的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:00:18.217

他所指的适配器对象是 SpringSource 文档中的[HandlerAdapter](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/HandlerAdapter.html)。更具体地说，它是子类[AnnotationMethodHandlerAdapter](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerAdapter.html)

我还想在 Spring MVC 中测试我的 RESTful 服务。以下是对我非常有帮助的两个链接：

[Spring MVC 中的单元测试控制器](https://stackoverflow.com/questions/1401128/how-to-unit-test-a-spring-mvc-controller-using-pathvariable)

[在集成测试中使用 HandlerAdapter](http://www.scarba05.co.uk/blog/2010/03/integration-testing-of-springs-mvc-annotation-mapppings-for-controllers/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:32:16.700

the`adapter`和 the`WebTestExecutionerListener`似乎都是 OP 自己的代码。没有办法不问他就知道了。

# php - PHP with DOM can not get the description correctly

> ID：11742139
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:12:26.103
> 
> 标签：php, dom

I am using the following code to get the *first* of a page. However I can not get it. What am I missing here ?

```
$doc = new DOMDocument();
$doc->loadhtmlfile("");
$xpath = new DOMXpath($doc);

$descr = $xpath->query('//div[@class="description"]');
    print_r($descr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:13:45.110

`query()`返回一个 DOMNodeList，要获取`<div>`DOMNode，需要从列表中获取：

```
$descr = $xpath->query('//div[@class="description"]')->item(0); 
```

现在，`$descr`包含第一个`<div>`带有 class的 DOMNode `description`。

# objective-c - 什么是 String.indexOf(String, startIndex) 的 Objective C 等效项

> ID：11742140
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:12:27.117
> 
> 标签：objective-c

我已经搜索过了，但在 Apple 文档中找不到

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T14:15:08.507

你可能想要`- (NSRange)rangeOfString:(NSString *)aString options:(NSStringCompareOptions)mask range:(NSRange)aRange`. range 参数是一个 NSRange，指示在大海捞针中的哪个位置寻找针。传球`NSMakeRange(startIndex, [haystack length]-startIndex)`应该做你想做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:20:52.663

```
NSRange range = [string rangeOfString:searchString
                              options:0
                                range:NSMakeRange(startIndex, [string length]-startIndex)];
if (range.length != 0) {
    NSString* resultString = [string substringWithRange:range];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:16:22.020

您的意思是您无法通过搜索并单击第一个链接找到[此文档页面？](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)`NSString`

```
NSString *substring = [string substringFromIndex:startIndex]; 
```

# python - 如何在python中转换路径？

> ID：11742147
> 
> 赞同：-2
> 
> 时间：2012-07-31T14:12:47.180
> 
> 标签：python

如何转换路径：

```
t = 'c:\temp\xx' 
```

我想得到“类似的东西”：

```
x = r't' 
```

我通常使用 x = r'c:\temp\xx' 并接收 x = r'c:\\temp\\xx'

我不知道如何将 'r' 分配给另一个对象..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:15:47.543

你不能。您可以将`r`字符串前缀应用于字符串文字。所以你需要：

```
x = r'c:\temp\xx' 
```

该`r't'`表达式将为您提供一个原始`'t'`字符串。就是这样。

如果您需要复制`\`目标字符串上的字符`x`，则可以使用替换：

```
x = t.encode('string_escape') 
```

# c# - Check if textbox is empty in a WPF form from another class C#

> ID：11742149
> 
> 赞同：0
> 
> 时间：2012-07-31T14:12:48.740
> 
> 标签：c#, class, textbox

I have an WPF form with 3 textbox named FirstName LastName and GPA, and i want to check their content before inserting into the database. But i am trying to do this in another class. How can i make to access the textbox control from my class? the WPF window is named AddStudent and the class i want to make the check is named Consiste. I made Consiste static so i can use it on my AddStudent without creating an instance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:17:27.920

在你的 Util 类中，你必须只有带有输入参数的方法

```
public static bool Validate(string firstName, string lastName,string gPA)
{
   if(firstName.Length < 1)  
   .....

   return true;
} 
```

并调用这个静态类 Util

```
Util.Validate(FirstName.Content, LastName.Content, GPA.Content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:24:58.217

一般来说，将 UI 元素传递到后端代码（甚至是 UI 项目中的助手）并不是一个好主意。

大概 AddStudent 表单正在调用 Consiste 类的方法。您的方法调用应该将值传递给 Consiste 类，而不是让 Consiste 类返回表单以获取文本框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:28:11.567

如果您遵循[模型-视图-视图模型](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)设计模式，这是推荐的，因为这是 WPF 设计的一个，那么一般方法是这样的：

首先，创建一个 ViewModel 类作为数据的实际存储。（ViewModel 可能应该实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged%28v=vs.110%29.aspx)，但为了简洁起见，我将在此处跳过它。）

```
public class MyFormViewModel
{
    public string FirstName {get; set;}
    public string LastName {get; set;}
    public float GPA {get; set}
} 
```

此类的属性是公开的，因此它们在任何地方都可见。

然后，创建一个表单并使用绑定将其字段连接到您的属性：

```
<Window x:Class="MyNamespace.MyForm">
    <StackPanel>
        <TextBox Text={Binding FirstName}/>
        <TextBox Text={Binding LastName}/>
        <TextBox Text={Binding Gpa}/>
    </StackPanel>
</Window> 
```

最后，当您实例化表单时，创建一个新的 ViewModel 用作表单的 DataContext：

```
var myFormContext = new MyFormViewModel();
var dialog = new MyForm { DataContext = myFormContext }; 
```

进行这种额外工作而不是直接针对 UI 进行编码的原因是，它有助于使您的代码更有条理。在接下来的道路上，使用多个视图重用相同的 ViewModel 类或重新排列用户界面更容易，而无需在所有代码中创建这样的级联更改。因此，从长远来看，遵循 MVVM 模式是一个非常好的习惯，可以立即养成。

作为一个具体示例，如果以这种方式构建代码会更容易，WPF 中已经有一个数据验证机制可以与 MVVM 代码一起使用：[IDataErrorInfo](http://codeblitz.wordpress.com/2009/05/08/wpf-validation-made-easy-with-idataerrorinfo/)接口。您可以在 ViewModel 中轻松实现它，然后在绑定中添加一些标记，告诉他们期待验证，您可以在那里完成 - 尽管如果您想自定义如何警告用户错误，控件有一个`ErrorTemplate`你可以设计适合的。

# c++ - Error on building a Wt project. Cannot open include file: 'boost/any.hpp'

> ID：11742150
> 
> 赞同：2
> 
> 时间：2012-07-31T14:12:49.787
> 
> 标签：c++, boost, cmake, wt

Wt v. 3.2.2 and boost libraries v. 1.47 had succesfully installed in my computer and no errors occured in the installation process. Some simple Wt and Boost examples were compiled and ran correctly in the testing process. I use CMake, configured for MSVC 2008, to create the build files for my own Wt projects.

However, when I try to build my own project, I get this error (Cannot open include file: 'boost/any.hpp'). As I saw, boost/any.hpp is included in Wt/WApplication header file.

For further help, my CMakeLists.txt files contents are: CMakeLists.txt placed on project directory:

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(WT_EXAMPLE)

SET (WT_CONNECTOR "wthttp" CACHE STRING "Connector used (wthttp or wtfcgi)")

ADD_SUBDIRECTORY(source) 
```

CMakeLists.txt placed on source directory:

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET(WT_INSTALL_DIR "C:/Program Files/WT/boost_1_47")
SET(BOOST_INSTALL_DIR "C:/Program Files/boost")

ADD_EXECUTABLE(
 GOP.wt
 Main.C
)

SET(WT_LIBS
 optimized wthttp debug wthttpd
 optimized wt debug wtd)

SET(BOOST_LIBS
 boost_signals boost_regex boost_thread boost_filesystem boost_system
 boost_random boost_date_time boost_program_options)

TARGET_LINK_LIBRARIES (
 GOP.wt
 ${WT_LIBS} ${BOOST_LIBS} ${SYSTEM_LIBS}
)

LINK_DIRECTORIES (
 ${WT_INSTALL_DIR}/lib/
 ${BOOST_INSTALL_DIR}/lib/
)

INCLUDE_DIRECTORIES(${WT_INSTALL_DIR}/include)
INCLUDE_DIRECTORIES(${BOOST_INSTALL_DIR}/include) 
```

As I saw in the CMakeCache.txt placed on Wt build directory, paths to boost libraries were found, but ...what about this line?

```
//The directory containing a CMake configuration file for Boost.
Boost_DIR:PATH=Boost_DIR-NOTFOUND 
```

I asked this question on Wt support forum but I didn't get an answer for about 24 hours...

**Update**: I found that any.hpp is placed on C:\Program Files\boost\boost_1_47\boost\spirit\home\support\algorithm\any.hpp. So, i suspect that there's a concept with the path that searches any.hpp (it's not directly included in boost directory).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:25:13.407

问题解决了。我做了一个新的 Wt 构建，我在一个新的路径中放置和重建了 boost，我*更加谨慎地*为这个项目编写了 CMakeLists 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-26T14:31:55.103

**包括 <boost/any.hpp>**

例如

```
#include <boost/any.hpp>
#include <iostream>
#include <vector>
#include <string>

int main() {
    std::vector<boost::any> some_values;

    some_values.push_back(10);
    const char* c_str = "Hello there!";
    some_values.push_back(c_str);
    some_values.push_back(std::string("Wow!"));

    std::string& s = boost::any_cast<std::string&>(some_values.back());
    s += " That is great!\n";
    std::cout << s;
} 
```

我们只需要一个简单的 cmake 文件，比如

```
# Defines AppBase library target.
project(recipe_01)
cmake_minimum_required(VERSION 3.5)

include(GNUInstallDirs)

set(CMAKE_EXPORT_COMPILE_COMMANDS "ON")
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_LIBDIR})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_LIBDIR})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/${CMAKE_INSTALL_BINDIR})

if(CMAKE_CXX_STANDARD EQUAL 98 OR CMAKE_CXX_STANDARD LESS 14)
   message(FATAL_ERROR "app requires c++14 or newer")
elseif(NOT CMAKE_CXX_STANDARD)
   set(CMAKE_CXX_STANDARD 14)
   set(CMAKE_CXX_STANDARD_REQUIRED ON)
endif()

find_package(Boost 1.60 REQUIRED)

add_executable(main main.cpp)

target_link_libraries(main) 
```

# regex - SpringMongo 不区分大小写的搜索正则表达式

> ID：11742170
> 
> 赞同：7
> 
> 时间：2012-07-31T14:13:47.147
> 
> 标签：regex, spring, mongodb, case-insensitive, string-matching

我正在尝试在 Mongo 中进行不区分大小写的搜索。基本上我想要不区分大小写的字符串匹配我正在使用正则表达式。这是我的代码

```
Query query = new Query( Criteria.where(propName).regex(value.toString(), "i")); 
```

但是上面的内容与我的整个字符串匹配（有时带有空格的字符串）。即使它是子字符串，它也会返回值。

例如：假设我的收藏有 2 个值“Bill”和“Bill status”，即使我的搜索是“bill status”，它也会返回“bill”。即使我正在搜索的字符串有子字符串，它也会返回结果为了

我试过`Query query = new Query( Criteria.where(propName).is(value.toString()));`

但以上是区分大小写的。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-15T04:40:14.963

使用正则表达式搜索的不敏感搜索。input_location 可能是德里，德里，德里，它适用于所有人。

```
Criteria.where("location").regex( Pattern.compile(input_location, Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T08:31:21.660

正则表达式 /^bill$/i 将以不区分大小写的方式匹配“Bill”。

这是一个显示这一点的示例（在 mongo shell 中）：

```
> db.foo.insert({name: "Bill"});
> db.foo.insert({name: "Bill status"});
> db.foo.insert({name: "another Bill"});
> db.foo.find()
{ "_id" : ObjectId("5018e182a499db774b92bf25"), "name" : "Bill" }
{ "_id" : ObjectId("5018e191a499db774b92bf26"), "name" : "Bill status" }
{ "_id" : ObjectId("5018e19ba499db774b92bf27"), "name" : "another Bill" }
> db.foo.find({name: /bill/i})
{ "_id" : ObjectId("5018e182a499db774b92bf25"), "name" : "Bill" }
{ "_id" : ObjectId("5018e191a499db774b92bf26"), "name" : "Bill status" }
{ "_id" : ObjectId("5018e19ba499db774b92bf27"), "name" : "another Bill" }
> db.foo.find({name: /^bill$/i})
{ "_id" : ObjectId("5018e182a499db774b92bf25"), "name" : "Bill" } 
```

但是，正则表达式查询不会使用索引，除非它是左根的（即形式 /^prefix/）并且如果不使用 i 不区分大小写标志。与使用使用索引的查询相比，您可能会付出巨大的性能损失。因此，根据您的用例，更好的选择可能是以某种方式使用应用程序逻辑，例如：

1.  当您将项目插入数据库时​​强制一个案例（例如将“bill”转换为“Bill”）。

2.  对您的已知案例进行搜索（例如，仅针对“Bill”进行搜索）。

# android - 更改 mp3 文件中的波头

> ID：11742171
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:13:49.270
> 
> 标签：android, audio, header, recording, wave

是否可以更改现有 mp3 文件中的波头？我需要它是每个样本 8 或 16 位。

关于如何进行的任何提示？我完全被困住了。

非常感谢你

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T15:00:04.087

你指的是哪个波头？你说的是[帧头](http://www.mp3-tech.org/programmer/frame_header.html)吗？在任何情况下，它都不包含每样本位字段，因为此类信息存储在压缩的 mp3 流中将毫无意义。
从 mp3 生成未压缩的 PCM 流时，由解码器/播放器决定每个样本使用多少位。

如果您的意思是您已将 RIFF 标头添加到 mp3 文件中以便能够将其导入各种旧程序，您可以在[此处](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)找到该标头的格式。

# unity3d - Unity3D与父级的局部位置关系

> ID：11742178
> 
> 赞同：1
> 
> 时间：2012-07-31T14:14:04.423
> 
> 标签：unity3d, position, positioning, parent-child, gameobject

我正在尝试相对于它的父对象定位一些游戏对象。我正在使用本地位置，但游戏对象放置得不好。如果我使用本地位置，父母的宽度被认为是1，对吧？因此，如果我有一个平面，unity3d 认为它是一个 1X1 正方形。
我尝试将一些模型放在本地位置 (1, 1)，但它们没有放在平面的右上角......
你们有没有一些想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:17:10.923

你错了：父母的宽度是父母的x/y/z比例；局部坐标仍以世界单位测量。如果您的平面水平为 100x100，并且以 0,0,0 为中心，那么您需要将模型放置到 (50,0,50) 以位于拐角处。

# java - 将PDF转换为Base64并将数据存储到数据库的BLOB中

> ID：11742179
> 
> 赞同：3
> 
> 时间：2012-07-31T14:14:06.860
> 
> 标签：java, database, pdf, base64, blob

我想将二进制数据（例如 PDF）转换为我的 Oracle 数据库的 BLOB。起初，我将 PDF 放入 FileInputStream 并创建了一个字节数组。这是代码：

```
public static byte[] createByteArray(File pCurrentFolder, String pNameOfBinaryFile)
    {

        String pathToBinaryData = pCurrentFolder.getAbsolutePath()+"/"+pNameOfBinaryFile;

        File file = new File(pathToBinaryData);
        if (!file.exists())
        {
            System.out.println(pNameOfBinaryFile+" could not be found in folder "+pCurrentFolder.getName());
            return null;
        }

        FileInputStream fin = null;
        try {
            fin = new FileInputStream(file);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        byte fileContent[] = new byte[(int) file.length()];

        try {
            fin.read(fileContent);
        } catch (IOException e) {
            e.printStackTrace();
        }

        return fileContent;
    } 
```

我通过 MyBatis 将这个（字节数组）发送到数据库并且它工作，所以我的 BLOB 中有 PDF，我也可以从我的数据库中读取 PDF。但是现在我面临以下问题：我的搜索引擎有一个 JDBC 连接器（FAST ESP ......但这并不重要），它连接到某个数据库并将所有内容存储到一个 xml 文件中。在这个 xml 文件中有一个名为“data”的元素，其中包含其 CDATA 字段中的二进制数据。

当我想解析这个 xml 时，Java 告诉我：

```
The content of elements must consist of well-formed character data or markup. 
```

对于一些 PDF，我可以工作，但有些不能。所以我认为问题在于，我以错误的方式将它们存储在数据库中。

有关更多信息，我将尊重我之前提出的另一个与此类似的问题。

[Java：解析时跳过xml文件中的二进制数据](https://stackoverflow.com/questions/11735416/java-skip-binary-data-in-xml-file-while-parsing)

那里有人告诉我，我应该用 base64 对我的 PDF（或任何二进制文件）进行编码。所以这意味着，我不只是将我的 PDF 放入 FileInputStream，存储 byte[] 并将这个 byte[] 放入我的数据库 BLOB。我必须做什么才能以正确的方式将 PDF 存储在我的数据库中，以便之后我可以正确解析 JDBC 连接器创建的 XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:58:42.547

您可以使用 JAXB DatatypeConverter 类轻松地将数据转换为 base64，而无需任何外部依赖：

```
byte[] arr = YOUR_BINARY_ARRAY;
String result = javax.xml.bind.DatatypeConverter.printBase64Binary(arr); 
```

您可以简单地将此代码添加到方法的末尾并将其返回类型更改为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:10:23.053

您可以尝试首先使用 Apache Commons 将字节转换为 basse64，例如：

```
import org.apache.commons.codec.binary.Base64;

import java.util.Arrays;

public class Base64Encode {
    public static void main(String[] args) {
        String hello = "Hello World";

        byte[] encoded = Base64.encodeBase64(hello.getBytes());

        System.out.println(Arrays.toString(encoded));

        String encodedString = new String(encoded);
        System.out.println(hello + " = " + encodedString);
    }
} 
```

# java - 使用java表示拓扑图

> ID：11742183
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:14:23.433
> 
> 标签：java, android

我正在为 android 开发一个室内导航程序，但我一开始就卡住了：
你如何在 java 中表示地图？
我更喜欢一种可以让我轻松应用 Dijkstra 算法的方法。

注意：我需要程序知道每个房间的大小以及入口和出口在哪里。

**编辑：**我正在寻找一个在 BL 而不是 UI 中使用的对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:26:18.107

Android 有一个称为 mapView 的内置 GUI 元素，您可以将其添加到应用程序的屏幕中。它是一个 Google 地图，需要您获取应用程序 API 密钥。您可以为其添加叠加层并根据纬度和经度在地图上定位点（我认为它也支持其他方法），这些点可用于 Dijkstra 算法。希望这有帮助，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:32:28.983

我认为，您所描述的是扩展拓扑图（您可以在其中估计节点的绝对位置）。因此，您基本上需要一个组件，该组件可以绘制带有附加到节点的位置的图形。此外，您可能希望绘制其他内容（例如 wifi 连接的热图、蓝牙设备或用于估计您的位置和收集有关环境的信息的任何东西）。你也在处理 SLAM 问题。

我不知道任何现有的组件可以为此执行视觉任务，但也许你可以通过 google 找到一些东西。但是我不会推荐它。我只会创建自己的组件（使用 a`TextView`并在其上绘制我的东西）。它更加灵活，不需要太多努力，您可以选择功能和数据格式，这在这种情况下非常有用......

一旦你运行了所有的其余部分（这是很多！），你仍然可以决定寻找一些可以集成甚至谷歌地图的奇特组件，能够缩放左右。

# sql - 在 ms-access 中获取表的外键约束列表？

> ID：11742184
> 
> 赞同：3
> 
> 时间：2012-07-31T14:14:33.393
> 
> 标签：sql, ms-access, foreign-keys, jet

我正在尝试使用关系窗口来查看 MS-Access 数据库中表之间的关系。我隐藏了所有其他表，并在其中一个表中找到了一个外键，看起来它应该链接到另一个表，主键是我需要追踪的信息。

有没有办法在 Access 中列出表的现有外键约束，就像[MySQL 中的 SHOW CREATE TABLE 语法](http://dev.mysql.com/doc/refman/5.0/en/show-create-table.html)一样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T14:16:48.127

DAO 和 ADOSchemas 中的 tabledef 集合将显示外键。

```
Dim tdf As TableDef
Dim db As Database
Dim ndx As Index

Set db = CurrentDb

For Each tdf In db.TableDefs
    For Each ndx In tdf.Indexes
        If ndx.Foreign = True Then
            Debug.Print tdf.Name, ndx.Name
            For Each fld In ndx.Fields
                Debug.Print fld.Name
            Next
        End If
    Next
Next 
```

关系

```
Dim rel As DAO.Relation
Dim db As Database
Set db = CurrentDb

For Each rel In db.Relations
    Debug.Print rel.Name, rel.ForeignTable
    For Each fld In rel.Fields
        Debug.Print fld.Name
    Next
Next 
```

ADOSchema

```
Dim cn As ADODB.Connection
Dim rs As ADODB.Recordset

Set cn = CurrentProject.Connection

Set rs = cn.OpenSchema(adSchemaForeignKeys)

Do While Not rs.EOF
    For i = 0 To rs.Fields.Count - 1
        Debug.Print rs.Fields(i).Name & ":- " & rs.Fields(i)
    Next
    rs.MoveNext
Loop 
```

最后，还有一个隐藏的系统表：

```
SELECT * FROM MSysRelationships 
```

# activex - installshield light ActiveX dll 未注册

> ID：11742185
> 
> 赞同：0
> 
> 时间：2012-07-31T14:14:41.973
> 
> 标签：activex, installshield, dllregistration

我正在使用带有免费版 Installshield 的 Visual Studio 2010。该应用程序包括一个从 Excel 调用的 ActiveX 组件。在项目构建属性页面上选中“注册 COM 互操作”选项。当我在 XP 机器上运行安装时，dll 没有被注册。如果我手动运行 regasm /tlb: 命令，则应用程序可以工作。

问题： 1\. 如何通过installshield 日志文件验证注册是否运行？2\. 如果注册失败，日志会显示什么样的错误信息？2\. installshield 要求 dll 是强命名的吗？（不是） 3\. 有没有其他的故障排除建议？

提前致谢，

居里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:01:57.130

以下是我处理这种情况的方法：

1）建立一个干净的操作系统。

2) 安装您的软件。

3) 使用诸如 InstallWatch Pro 之类的注册表比较实用程序对注册表进行快照。

4) 调用 Regasm。

5) 再次捕获注册表并创建一个增量。过滤掉不相关的更改。

6) 将这些更改编写回 InstallShield 项目。重建并重复该过程以验证成功。

那么为什么这个坏了？[我通常发现它是由于Regasm](http://msdn.microsoft.com/en-us/library/tzat5yw6%28v=vs.100%29.aspx)中的一个已知行为。

当您设置 COM Interop = true 时，您是在告诉 InstallShield 调用 regasm /regfile，然后在构建期间抓取该数据并将其创作到安装程序中。但这里有一个问题：

（重点补充）

> 您可以使用 /regfile 选项生成包含注册表项的 .reg 文件，而不是直接对注册表进行更改。您可以通过使用注册表编辑器工具 (Regedit.exe) 导入 .reg 文件来更新计算机上的注册表。***请注意，.reg 文件不包含任何可由用户定义的寄存器函数进行的注册表更新。请注意，/regfile 选项仅发出托管类的注册表项。此选项不会发出 TypeLibID 或 InterfaceID 的条目。***

# php - 如何将数组索引键更改为 MySQL 值

> ID：11742188
> 
> 赞同：0
> 
> 时间：2012-07-31T14:15:02.257
> 
> 标签：php, mysql

我需要帮助处理数组。我有一组来自 MySQL 查询的数据。在 for 循环中打印后，我得到以下 array_flip：

```
 Array ( 

   [Duru 60] => 0 
   [Maxwell 50] => 1 
   [Fashanu 70] => 2 
   [Nwankwo 80] => 3 
   [Obi 0] => 4 

   ) 
```

数组值是 2 个字段名称和总分的组合。我想要实现的是这样的数组：

```
 Array (

   [Duru 60] => 60 
   [Maxwell 50] => 50 
   [Fashanu 70] => 70 
   [Nwankwo 80] => 80 
   [Obi 0] => 0 

   ) 
```

我想要实现的是将默认数组数字键（0,1,2,3,4）更改为从查询中获得的总分。

这是给出第一个数组块的代码：

**PHP 代码开始**

```
 $dataA = array();

    foreach($data as $key => $val){

$dataC = $val['lastname']." ".$val['total'];
array_push($dataA,($dataC));

     }
     $dataD = (array_flip($dataA));

     print_r($dataD); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:35:19.330

```
$dataA = array();
foreach($data as $key => $val){
    $dataK = $val['lastname']." ".$val['total'];
    $dataV = $val['total'];
    $dataA[$dataK] = $dataV;
}
print_r($dataA); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:25:13.877

尝试这个：

```
 $dataA = array();

    foreach($data as $key => $val){

           $dataC = $val['lastname']." ".$val['total'];

           $dataA[$dataC] = $val['total'];

     }

     print_r($dataA); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:26:41.670

为什么你不能这样做：

```
$newData = array();
foreach($data as $key => $val) {
  $newData[$val['lastname'] . ' ' . $val['total']] = $val['total'];
}
print_r($newData); 
```

# php - 在 PHP 中完全从字面上获取字符串

> ID：11742191
> 
> 赞同：2
> 
> 时间：2012-07-31T14:15:11.610
> 
> 标签：php, string

[我使用Hive Logic Enkoder](http://hivelogic.com/enkoder/)生成了一封混淆的电子邮件。我想在 PHP 中回显结果。

问题在于它包含`'`、和`"`，所有这些都搞乱了 PHP 读取字符串的方式。我怎样才能让 PHP 从字面上理解这一点 - 转义需要转义的字符，并取消转义不需要的字符？`\\``\\\\`

所以我想：

```
echo '<script type="text/javascript">
    //<![CDATA[
    <!--
    var x="function f(x){var i,o=\"\",ol=x.length,l=ol;while(x.charCodeAt(l/13)!" +
    "=102){try{x+=x;l+=l;}catch(e){}}for(i=l-1;i>=0;i--){o+=x.charAt(i);}return " +
    "o.substr(0,ol);}f(\")12,\\\",&.=1,p?3k`,gcheB8'Xfo!l720\\\\430\\\\120\\\\>X" +
    "%E220\\\\230\\\\100\\\\530\\\\700\\\\RS,OT130\\\\630\\\\400\\\\230\\\\130\\" +
    "\\530\\\\4[120\\\\700\\\\600\\\\010\\\\300\\\\520\\\\,a038t=68&>&2?120\\\\(" +
    "*\\\"\\\\,v$>%!&+g030\\\\~$$2Wt\\\\I330\\\\400\\\\r\\\\JOGUImi3hu771\\\\tmt" +
    "yq\\\"(f};o nruter};))++y(^)i(tAedoCrahc.x(edoCrahCmorf.gnirtS=+o;721=%y;i=" +
    "+y)12==i(fi{)++i;l<i;0=i(rof;htgnel.x=l,\\\"\\\"=o,i rav{)y,x(f noitcnuf\")" ;
    while(x=eval(x));
    //-->
    //]]>
    </script>
'; 
```

编辑：这是我现在使用的功能：

```
function supportEmail() {
    $str = <<<'EOT'
    <script type="text/javascript">
        //<![CDATA[
        <!--
        var x="function f(x){var i,o=\"\",ol=x.length,l=ol;while(x.charCodeAt(l/13)!" +
        "=102){try{x+=x;l+=l;}catch(e){}}for(i=l-1;i>=0;i--){o+=x.charAt(i);}return " +
        "o.substr(0,ol);}f(\")12,\\\",&.=1,p?3k`,gcheB8'Xfo!l720\\\\430\\\\120\\\\>X" +
        "%E220\\\\230\\\\100\\\\530\\\\700\\\\RS,OT130\\\\630\\\\400\\\\230\\\\130\\" +
        "\\530\\\\4[120\\\\700\\\\600\\\\010\\\\300\\\\520\\\\,a038t=68&>&2?120\\\\(" +
        "*\\\"\\\\,v$>%!&+g030\\\\~$$2Wt\\\\I330\\\\400\\\\r\\\\JOGUImi3hu771\\\\tmt" +
        "yq\\\"(f};o nruter};))++y(^)i(tAedoCrahc.x(edoCrahCmorf.gnirtS=+o;721=%y;i=" +
        "+y)12==i(fi{)++i;l<i;0=i(rof;htgnel.x=l,\\\"\\\"=o,i rav{)y,x(f noitcnuf\")" ;
        while(x=eval(x));
        //-->
        //]]>
        </script>
    EOT;
    echo $str;
} 
```

但我得到这个错误返回：

解析错误：语法错误，意外 $end，需要 T_VARIABLE 或 T_END_HEREDOC 或 T_DOLLAR_OPEN_CURLY_BRACES 或 T_CURLY_OPEN

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:25:26.393

```
echo <<<'EOT'
<script type="text/javascript">
    //<![CDATA[
    <!--
    var x="function f(x){var i,o=\"\",ol=x.length,l=ol;while(x.charCodeAt(l/13)!" +
    "=102){try{x+=x;l+=l;}catch(e){}}for(i=l-1;i>=0;i--){o+=x.charAt(i);}return " +
    "o.substr(0,ol);}f(\")12,\\\",&.=1,p?3k`,gcheB8'Xfo!l720\\\\430\\\\120\\\\>X" +
    "%E220\\\\230\\\\100\\\\530\\\\700\\\\RS,OT130\\\\630\\\\400\\\\230\\\\130\\" +
    "\\530\\\\4[120\\\\700\\\\600\\\\010\\\\300\\\\520\\\\,a038t=68&>&2?120\\\\(" +
    "*\\\"\\\\,v$>%!&+g030\\\\~$$2Wt\\\\I330\\\\400\\\\r\\\\JOGUImi3hu771\\\\tmt" +
    "yq\\\"(f};o nruter};))++y(^)i(tAedoCrahc.x(edoCrahCmorf.gnirtS=+o;721=%y;i=" +
    "+y)12==i(fi{)++i;l<i;0=i(rof;htgnel.x=l,\\\"\\\"=o,i rav{)y,x(f noitcnuf\")" ;
    while(x=eval(x));
    //-->
    //]]>
    </script>
EOT; 
```

将您的字符串包裹在 <<<'EOT' EOT;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:26:47.453

尝试使用[Heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)：

```
$str = <<<EOD
    <script type="text/javascript">
    //<![CDATA[
    <!--
    var x="function f(x){var i,o=\"\",ol=x.length,l=ol;while(x.charCodeAt(l/13)!" +
    "=102){try{x+=x;l+=l;}catch(e){}}for(i=l-1;i>=0;i--){o+=x.charAt(i);}return " +
    "o.substr(0,ol);}f(\")12,\\\",&.=1,p?3k`,gcheB8'Xfo!l720\\\\430\\\\120\\\\>X" +
    "%E220\\\\230\\\\100\\\\530\\\\700\\\\RS,OT130\\\\630\\\\400\\\\230\\\\130\\" +
    "\\530\\\\4[120\\\\700\\\\600\\\\010\\\\300\\\\520\\\\,a038t=68&>&2?120\\\\(" +
    "*\\\"\\\\,v$>%!&+g030\\\\~$$2Wt\\\\I330\\\\400\\\\r\\\\JOGUImi3hu771\\\\tmt" +
    "yq\\\"(f};o nruter};))++y(^)i(tAedoCrahc.x(edoCrahCmorf.gnirtS=+o;721=%y;i=" +
    "+y)12==i(fi{)++i;l<i;0=i(rof;htgnel.x=l,\\\"\\\"=o,i rav{)y,x(f noitcnuf\")" ;
    while(x=eval(x));
    //-->
    //]]>
    </script>
EOD; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:29:49.390

您可以将字符串存储在文件/数据库中，然后从那里获取它。

使用其他答案中评论的 nowdocs/heredocs 的问题是 \\ 在这两个答案中都是一个转义的斜线。

您还可以使用 nowdoc 块并将所有出现的 \ 替换为 \\。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T18:20:43.733

它给出此错误的原因是因为在关闭 EOT 之前有空格。删除它前面或后面的所有制表符或空白。

# mysql - 联合 - 启用麻烦

> ID：11742193
> 
> 赞同：2
> 
> 时间：2012-07-31T14:15:19.727
> 
> 标签：mysql, federated

假设我们有 MySQL 服务器 A，我们需要在其中创建位于服务器 B 上的表的“副本”。

我们没有启用联合。重置服务器 A 会造成很多麻烦，我相信，如果不重置，我们将无法启用联合。我也认为在B服务器上启用它是不够的（如果我有任何错误，请纠正我）

我们还有哪些其他解决方案？mysql服务器中是否默认启用了某些功能？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:34:38.747

*   **您需要仅在服务器 B 上启用联合**
*   您可以通过在 B 上创建联合表来访问 A 上的视图
*   您可以在联合表上执行 INSERT UPDATE DELETE
*   如果您需要只读访问权限，您可以限制用户权限

**但！**你不能做任何聚合函数。在将被联合的视图上（例如 COUNT()、MAX()、UNION...）（您可以，但它会滞后）

*   请记住在您正在创建的联合表上设置 KEY。（否则它会滞后可怕。）
*   记得在视图上使用 ALGORITHM=MERGE
*   请记住授予对服务器 A 上 USERNAME（来自连接字符串）的访问权限

服务器 B 上的联合表示例：

```
delimiter $$
CREATE TABLE `schemaName`.`tableName`(
    `keyName` VARCHAR(10) NOT NULL,
    `key2Name` DATE DEFAULT '2012-01-01',
    KEY `keyName` (`keyName`) 
)
ENGINE=FEDERATED
DEFAULT CHARSET=utf8
CONNECTION='mysql://USERNAME:PASSWORD@IPADDRESS:PORTNUMBER/baseSchema/baseTable'
$$ 
```

服务器 A 上的视图：

```
CREATE
    ALGORITHM = MERGE
    DEFINER = `ANOTHERUSERNAME`@`%`
    SQL SECURITY DEFINER
VIEW `baseSchema`.`baseTable` AS
    SELECT
        ... AS `keyName`,
        ... AS `key2Name`
    FROM
        ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-03T10:18:01.210

在任何情况下，您都不能写入 FEDERATED 表期间！您必须与运行已创建 FEDERATED 表连接的数据库的服务器建立直接数据库连接。

如果你现在可以写信给 FEDERATED 表，我会很生气。多年来，它从未允许过它。如果这是真的，这也会使我编写的 10 年代码完全浪费我的时间。

在为 100 个网站制作集中式用户数据库的实例中使用起来非常方便！即我使用它的社交网络...

自从有人知道 ENGINE 存在之前，我就一直在使用它。当我开始使用它时，它没有文档，我不得不进行实验以找出它可以用来做什么。ENGINE 一直在那里，并且多年来几乎没有或根本没有文档。

我使用或拥有的唯一联合数据库表共享网络用户信息。当有人注册为新用户时，我所有的外部网站仍然必须与主服务器建立数据库连接。

您需要两个数据库连接器才能以正确的方式使用 FEDERATED！一个用于 UPDATE 和 INSERT 等，另一个 DB 用于所有本地查询和 JOINS 等。

我的网络为每个网站使用两个外部数据库和一个本地数据库。我使用三个数据库连接器。

本地连接到音乐集线器和网络集线器，所有 UPDATE 和 INSERT 和其他所有连接器都使用单独的连接器 JOIN 等只使用本地 DB 连接器！

我希望这可以帮助您更好地理解它:)

我正在使用 MySQL 5.6 和 PHP 5。

您必须问自己将近五年，为什么很少或没有关于它的用途的文档？大多数人甚至不知道它的存在...

主要用于将查询结果导入本地数据库！即使拥有完整的写入权限，您也永远无法写入 FEDERATED 表！出于安全原因，这是不允许的，正如您所说，它会非常非常慢。

如果我错了，您可以纠正我，但请知道，在他们告诉任何人它存在之前，我一直在使用 FEDERATED。

启用 FEDERATED 大约需要 30 秒，重新启动服务器大约需要 30 秒。在您使用 VPS 的情况下，可能不允许您启用 FEDERATED。

编辑您的 my.cnf 文件并重新启动服务器...

顺便说一句，FEDERATED 不再慢了...从来没有以我刚才解释的方式使用...

即使我可以写一个 FEDERATED 表我也不会这样做。您通过向本地网站添加联合表来联合两台服务器。

这将根据您距离远程 MySQL 服务器的 HOPS 数量而减慢。还要确保将您的 IP 添加到他们的 cPanel 下的远程服务器。

如果网站都驻留在同一台服务器上，并且只是单独的用户帐户和具有单独 IP 的网站，则应该是零延迟。

McLeod 和 Heimbigner 是 1980 年代中期最先定义联合数据库系统的人之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-17T23:12:30.597

更新：如果您升级到 mariaDB，您必须将 federatedX 作为插件加载。旧的联合项目将继续存在，但会有新的眼睛和新鲜的灵魂在它上面工作。Oracle 不再参与其中...现在称为 federatedX

# android - 用户切换到桌面版后，Chrome for Android 的用户代理是什么？

> ID：11742195
> 
> 赞同：5
> 
> 时间：2012-07-31T14:15:22.240
> 
> 标签：android, google-chrome, mobile, user-agent, chrome-for-android

我们知道 Chrome for Android 的用户代理是：

> Mozilla/5.0 (Linux; Android 4.0.4; Galaxy Nexus Build/IMM76B) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.133 Mobile Safari/535.19

我们还知道最新版本的 Android 版 Chrome 提供了一项新功能，允许用户通过图形用户界面手动将其 Android 版 Chrome 切换到桌面版本。

我想知道 Chrome for Android 在用户切换到桌面版本后的用户代理。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T18:33:55.477

在最新的 Android 版 Chrome 中切换“请求桌面站点”后，用户代理报告为：

> Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.45 Safari/535.19

作为参考，这是 Android 4.1 上的默认 Chrome 用户代理：

> Mozilla/5.0 (Linux; Android 4.1.1; Galaxy Nexus Build/JRO03C) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19

# jquery - 将 Ruby 融入 jqPlot

> ID：11742196
> 
> 赞同：2
> 
> 时间：2012-07-31T14:15:24.900
> 
> 标签：jquery, ruby-on-rails, ruby, jqplot

### 语境 ：

我正在尝试使用 jqPlot 创建一个饼图，从 Rails 数据库中收集数据。

出现我的问题是因为 jqplot 不理解从 event.name 生成的字符串。如果我手动插入几个字符串，而不通过 Rails，它工作正常。n我相信它与转义字符有关，它不应该是。

我从 Firebug 得到的错误显示`events = [[&quot;Title&quot;, 1234566]]`。因此 jqplot 尝试使用`&quot;Title&quot;`作为键创建此图表。它不喜欢那样。

我尝试过使用 html_safe，但无济于事。

* * *

### 代码 ：

```
<% things = [] %>
  <% @topEvents.each do |event| %>
<% things << [event.name, event.total] %>
<% end %>

$.jqplot('topEvents', [ <%= things %> ], {
    seriesDefaults : {
        renderer : jQuery.jqplot.PieRenderer,
        rendererOptions : {
            showDataLabels: true
        }
    }
}); 
```

* * *

### 环境 ：

*   红宝石 1.9.3
*   导轨 3.2.6
*   SQLite3 3.6.20
*   jquery-rails 2.0.2 (RubyGem)
*   jQuery 1.7.2
*   jqplot 1.0.0_r1012。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:38:27.610

对于未来的谷歌人...

虽然`"string"` 并且`'string'`一旦在 Ruby 中声明它们就可能是等价的，但对于 javascript，这个事实是无关紧要的。在 `<script>`标签内，ruby 字符串将显示为双引号。如果您想要单引号，则必须将字符串作为字符串以外的其他内容导入，然后稍后手动添加引号。

Javascript会`'<%= event.total %>'`很好理解。它将使用 Rails 打印出总数，然后脚本将在任一侧附加单引号。

希望这对任何人都有帮助！

# html - 我是否需要 WordPress 页面模板中的标签“html”和“正文”？

> ID：11742198
> 
> 赞同：1
> 
> 时间：2012-07-31T14:15:29.627
> 
> 标签：html, wordpress, wordpress-theming

我正在为**WordPress 网站**创建页面模板。

在文件 newpagetemplate.php 我目前有这个代码，只有这个代码：

```
<html>
<body>
<?php
/*
Template Name: Salespage
*/
?>
<div>
    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
        <?php the_title(); ?>
        <?php the_content(); ?> 
    <?php endwhile; endif; ?>
</div>
</body>
</html> 
```

我需要进行修改，设置边距、字体等的值。

在上面的代码中，我需要'html'和'body'标签吗？

（如果我去掉这些标签，应用此页面模板的页面仍然显示正常。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T14:47:21.090

我不知道你为什么会收到这么多理论答案。对我来说，这似乎是一种无趣的浪费时间。

简单的答案是否定的**。**

从您提供的代码来看，您似乎正在尝试构建自定义 Wordpress 主题。您需要将 doctype 和打开的 html/body 标记`header.php`放在`footer.php`. 然后，您从“销售页面”模板中提取页眉和页脚模板。它可能看起来有点像这样：

`// header.php`

```
<!DOCTYPE html>
<html>
    <head>
    <title>Your Title</title>

    <?php wp_head(); ?>
    </head>
<body> 
```

`// newpagetemplate.php`

```
<?php get_header(); ?>

<div class="yourContent">
    <?php if (have_posts()) : ?>
        <?php while (have_posts()) : the_post(); ?>
            <?php the_title(); ?>
            <?php the_content(); ?> 
        <?php endwhile; ?> 
    <?php endif; ?>
</div>

<?php get_footer(); ?> 
```

`// footer.php`

```
<?php wp_footer(); ?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:21:56.900

如果您谈论的是*页面*模板而不是*站点*模板，那么您不需要在页面模板本身中包含 html 或 body 标签，因为它将被包装在*站点*模板中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:33:46.977

试试这个

如果您使用过 wordpress 并创建新的模板页面

那么你的代码在下面

这是新的页面模板“销售页面”

```
 <div id="container" class="one-column">
            <div id="content">

            <?php

            /* Run the loop to output the page.
             * If you want to overload this in a child theme then include a file
             * called loop-page.php and that will be used instead.
             */

             get_template_part( 'loop', 'salespage' );
            ?>

            </div><!-- #content -->
        </div><!-- #container -->

<?php get_footer(); ?> 
```

// 而你的循环页面是 loop-salespage.php

你的代码是

```
<?php
/**
 * The loop that displays a page.
 *
 * The loop displays the posts and the post content.  See
 * http://codex.wordpress.org/The_Loop to understand it and
 * http://codex.wordpress.org/Template_Tags to understand
 * the tags used in it.
 *
 * This can be overridden in child themes with loop-page.php.
 *
 * @package WordPress
 * @subpackage Twenty_Ten
 * @since Twenty Ten 1.2
 */
?>

<?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>

                <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
                    <?php if ( is_front_page() ) { ?>
                        <h2 class="entry-title"><?php the_title(); ?></h2>
                    <?php } else { ?>
                        <h1 class="entry-title"><?php the_title(); ?></h1>
                    <?php } ?>

                    <div class="entry-content">
                        <?php the_content(); ?>
                        <?php wp_link_pages( array( 'before' => '<div class="page-link">' . __( 'Pages:', 'twentyten' ), 'after' => '</div>' ) ); ?>
                        <?php edit_post_link( __( 'Edit', 'twentyten' ), '<span class="edit-link">', '</span>' ); ?>
                    </div><!-- .entry-content -->
                </div><!-- #post-## -->

                <?php //comments_template( '', true ); ?>

<?php endwhile; // end of the loop. ?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T14:17:33.173

是的，您仍然需要`<html>`and`<body>`标记，因为您的页面呈现为 HTML。所有有效的 HTML 都包含这些标签。同样不要忘记`<!DOCTYPE html>`在页面顶部添加有效的 HTML，并避免在较新的浏览器上触发所谓的 quirksmode。由于 HTML 结构不佳，这通常是作为预防措施触发的，并且开发人员通常很容易纠正。;)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-31T14:20:21.487

`<html>`不可以。和`<body>`元素类型的开始和结束标签是可选的。如果浏览器看不到它们，则它们是隐含的。

[这是`<html>`元素类型](http://www.w3.org/TR/html401/struct/global.html#edef-HTML)的定义。请注意，开始和结束标签都是可选的。

[这是`<body>`元素类型](http://www.w3.org/TR/html401/struct/global.html#edef-BODY)的定义。请注意，开始和结束标签都是可选的。

# php - 如何在 php 中从我的 web 服务中检索 xml

> ID：11742200
> 
> 赞同：0
> 
> 时间：2012-07-31T14:15:31.267
> 
> 标签：php, xml, web-services, soap

我在这里使用 php 中的网络服务：

[http://cdt33.tourinsoft.com/soft/RechercheDynamique/Syndication/controle/syndication2.asmx](http://cdt33.tourinsoft.com/soft/RechercheDynamique/Syndication/controle/syndication2.asmx)

例如`getListing`，您可以使用 进行测试`idModule = dafda774-317d-4b5f-bb8b-33e5977dc13c`，然后单击`invoke`

我正在尝试在 php.ini 中检索此结果（XML）。但我不知道该怎么做。

如果我使用 getListing 如下：

```
$client = new SoapClient("http://cdt33.tourinsoft.com/soft/RechercheDynamique/Syndication/controle/syndication2.asmx?wsdl");

echo "GET LISTING";
$getListing = $client->getListing(
    array (
        'idModule' => "dafda774-317d-4b5f-bb8b-33e5977dc13c"));
echo("<pre>");
print_r($getListing);
echo("</pre>"); 
```

结果是这样的：

```
stdClass Object
(
    [getListingResult] => stdClass Object
        (
            [schema] => 
            [any] => 
HOTAQU03301V3EZB2005-06-29T00:00:00.0000000+02:002012-06-28T14:43:44.0000000+02:0074HOTHÃ´tellerie1e9eb500-e0c9-4a53-b6a5-0b36faa63ed4true 2 Ã©toiles FranÃ§ais www.hotel-lenovel.com +33 5 57 52 26 47 7 oui En centre ville$ Au bord de la mer Ascenseur$ Salon 22 -1.164866 Au coeur d'Arcachon, Ã  deux pas de la gare, du thÃ©Ã¢tre de l'Olympia et de l'Office du Tourisme, le Novel bÃ©nÃ©ficie d'une situation privilÃ©giÃ©e. Les chambres sont chaleureuses et douillettes pour un sÃ©jour....... ETC 
```

我怎样才能检索 XML ？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:47:03.043

这是一些尝试，运行它并检查页面的源代码，它应该包含 xml 文件。SOAP 只是发帖的一种奇特方式。

```
<?php
function smartpost($type,$host,$port='80',$path='/',$data='') {
    $d="";
    $str="";
    $_err = 'lib sockets::'.__FUNCTION__.'(): ';
    switch($type) { case 'http': $type = ''; case 'ssl': continue; default: die($_err.'bad $type'); } if(!ctype_digit($port)) die($_err.'bad port');
    if(!empty($data)) foreach($data AS $k => $v) $str .= urlencode($k).'='.urlencode($v).'&'; $str = substr($str,0,-1);

    $fp = fsockopen($host,$port,$errno,$errstr,$timeout=30);
    if(!$fp) die($_err.$errstr.$errno); else {
        fputs($fp, "POST $path HTTP/1.1\r\n");
        fputs($fp, "Host: $host\r\n");
        fputs($fp, "Content-type: application/x-www-form-urlencoded\r\n");
        fputs($fp, "Content-length: ".strlen($str)."\r\n");
        fputs($fp, "Connection: close\r\n\r\n");
        fputs($fp, $str."\r\n\r\n");

        while(!feof($fp)) $d .= fgets($fp,4096);
        fclose($fp);
        $result = explode("\r\n\r\n", $d, 2);

        $header = isset($result[0]) ? $result[0] : '';
        $content = isset($result[1]) ? $result[1] : '';

    } return array($header, $content);
}

list($header, $content) = smartpost('http','cdt33.tourinsoft.com','80','/soft/RechercheDynamique/Syndication/controle/syndication2.asmx/getListingByIDs',array('idModule'=>'dafda774-317d-4b5f-bb8b-33e5977dc13c','ObjetTourCode' => '','IDs' => ''));
print($content);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:29:32.503

类 ABRSoapClient 扩展 SoapClient {

```
$result = "";

function __doRequest($request, $location, $action, $version) 
{

    $result =  parent::__doRequest($request, $location, $action, $version); 
    return $result;

} 
```

}

不是创建 SoapClient 的对象，而是创建 ABRSoapClient 的对象，这里 $result 是来自 Web 服务的 XML 字符串。

您可以使用 $client->result; 访问该变量；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:05:33.630

假设您使用的是标准 PHP SoapClient，请尝试使用

```
$client->__getLastRequestHeaders() 
```

（http://www.php.net/manual/en/soapclient.getlastresponse.php）根据maual，您还应该在SoapClient上将trace选项设置为true：

```
$client = new SoapClient("http://cdt33.tourinsoft.com/soft/RechercheDynamique/Syndication/controle/syndication2.asmx?wsdl", array('trace' => true)); 
```

问候， 雅库布·德尔达

# php - Symfony2 - 未找到自定义存储库

> ID：11742201
> 
> 赞同：3
> 
> 时间：2012-07-31T14:15:34.603
> 
> 标签：php, symfony, doctrine-orm, repository

我有这个错误：

> 致命错误：第 578 行的 C:\wamp\www\Videotheque\vendor\doctrine\lib\Doctrine\ORM\EntityManager.php 中找不到类 'gsyle39\VideothequeBundle\Repository\GenreRepository'

不过，我将存储库类的名称添加到我的实体的映射定义中：

```
/**
* gsyle39\VideoThequeBundle\Entity\Genre
*
* @ORM\Table()
*
* @ORM\Entity(repositoryClass="gsyle39\VideothequeBundle\Repository\GenreRepository")
*/
class Genre
{
   ...
} 
```

这是我的 GenreRepository ：

```
<?php

namespace gstyle39\VideothequeBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * GenreRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class GenreRepository extends EntityRepository
{
    public function myfindAll()
    {
        $genres = $this->_em->createQueryBuilder('g')
            // leftJoin because I need all the genre
            ->leftJoin('g.films', 'f')
            ->addSelect('COUNT(f)')
            ->groupBy('g')
            ->getQuery()
            ->getArrayResult();

        // $genres contains all the genres and the associated movies
        return ($genres);
    }
} 
```

最后，这是我的控制器中我用来调用我的客户“findALL”的方法：

```
public function getListGenresAction(){

        $liste_genres = $this->getDoctrine()
                             ->getEntityManager()
                             ->getRepository('gstyle39VideothequeBundle:Genre')
                             ->myFindAll;

        return $this->render('gstyle39VideothequeBundle:Videotheque:test.html.twig', array(
            'genres' => $liste_genres
        ));
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:18:56.887

您的存储库具有 as 命名空间`namespace gstyle39\VideothequeBundle\Entity;`，注释说它应该是`namespace gstyle39\VideothequeBundle\Repository;`.

另外，请确保将其放在`src/gstyle39/VideothequeBundle/Repository`目录下。

# backbone.js - Backbone.js 如何与 CoffeeScript 一起工作？

> ID：11742210
> 
> 赞同：1
> 
> 时间：2012-07-31T14:16:11.343
> 
> 标签：backbone.js, coffeescript, integration

使用 CoffeeScript 编写backbone.js 应用程序是否存在任何固有问题？您是否遇到了一些无法解决的问题或不得不使用一些特别笨拙的解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T10:59:35.130

没有问题，真的。至少，没有一个是不容易解决的。

使用 CS 的问题与在任何地方使用 CS 时可能遇到的问题相同：

*   调试仍然在生成的 JS 中完成
*   CS 需要一个有时会很尴尬的预处理步骤
*   你团队的其他成员可能不知道 CS
*   CS有一些奇怪的事情（他们引入了“类”，但它们不是真正的类）

此外，由于使用 Coffeescript 的 Backbone 开发是基于“类”的，因此您会发现自己希望将您的类分成单独的文件，在单独的文件夹中。因此，您可能会遇到类定义无序的情况。例如，您的集合可能会在您的模型之前定义，这是不可能的。为此，我建议使用可以管理依赖项（导入）的东西。我使用[的是咖啡烤面包机](https://github.com/serpentem/coffee-toaster)，但还有其他几个选项（例如，Rails 在资产管道中内置了依赖项管理）

这是我编写 Backbone 代码的首选方式。在我看来，Backbone.js 开发实际上在 CoffeeScript 中比在 Javascript 中更好。对我来说，它们就像巧克力和花生酱一样。（不是每个人都喜欢巧克力/花生酱……不是每个人都喜欢 BB/CS）

**类语义** Backbone 开发严重依赖于扩展原型，这是 CoffeeScript 内置的东西。因此，您将在 JS 中扩展视图的位置：

```
App.Models.MyModel = Backbone.View.extend({
    render: function() {
        ...
    }
}); 
```

CS 替代方案是原生体验：

```
class App.Models.MyModel extends Backbone.Model
    render: ->
        ... 
```

**覆盖函数** 您在 Backbone 中经常做的一些事情，比如覆盖函数变得更加简单。在 Javascript 中：

```
constructor: function ( attributes, options ) {
    this.constructor.__super__.constructor.apply( this, arguments );
    ...
} 
```

变成：

```
constructor: (attributes, options) ->
    super 
```

**"this" 上下文绑定** CS 中的“胖箭头”在需要声明函数的上下文为“this”时非常有用

当函数被回调时，Javascript 会以不同的方式设置“this”。有几种方法可以解决它，但开箱即用，很尴尬：

```
initialize: function() {
    this.model.bind('reset', this.render);
},

render: function () {
    this.$el.html("<ul></ul>");
    this.model.each(this.renderItem); // <--- Fails on "reset" because 'this' is wrong
    return this;
} 
```

CoffeeScript 有一个`=>`标记，当它被任何人调用时，它会自动将“this”绑定到函数：

```
initialize: ->
    @model.bind 'reset', @render

render: =>
    @$el.html '<ul></ul>'
    @model.each @renderItem  # The fat arrow fixed it for you
    @ 
```

总而言之，Backbone.js 代码更容易编写，并且用 CS 编写时更容易阅读。至少，这是我的看法。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T15:47:04.140

CoffeeScript 和 Backbone.js 都是由同一作者（Jeremy Ashkenas）编写的。默认情况下，[backbone-on-rails](https://github.com/meleyal/backbone-on-rails) gem 会生成 CoffeeScript。尽管某些插件（例如您提到的 Backbone-relational）可能需要额外设置，但 Backbone 本身与 CoffeeScript 配合得非常好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T14:23:04.090

CoffeeScript 只是 JavaScript 之上的一个语法层。它本质上是 JavaScript。你可以在 JavaScript 中做的任何事情都可以在 CoffeeScript 中重现。

# mysql - MySQL的理论情况

> ID：11742211
> 
> 赞同：4
> 
> 时间：2012-07-31T14:16:15.023
> 
> 标签：mysql, sql, database

我在谷歌上搜索了一个从今天早上开始就问自己的问题，但找不到任何关于它的信息或文章。

我想知道，在以下情况下，提高性能（仍然有一点）：

**上下文：**我有两列：`ID`，`AddedAt`（`AddedAt`是创建行时的 Unix 时间戳）。

理论上，如果您插入一个新行，`ID`将是 +1 并且`AddedAt`将是当前时间。

现在，假设在当前情况下不可能同时插入两个，将其`AddedAt`用作 a`PK`并删除`ID`列会更好吗？`AddedAt`将只是一个唯一的列，`PK`并且`UNIX Timestamp`。所以在决赛中，我将只有一栏而不是两栏。

我看到的唯一不好的一面可能是将创建的密钥的大小，`AddedAt`因为现在的 unix 时间戳是 10 位数。

在这种情况下会更好吗？你怎么看 ？

**编辑**：使用时间戳+毫秒怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:22:49.833

时间戳以秒为单位。虽然您可能没有同时插入，但随着世界趋于加速，您可能会在一秒钟内获得多个插入。构建您的系统以使其正常运行——不要使用时间采样作为主键。

此外，由于语句复制有时时间戳在 dbs 之间不一致......基于行的复制缓解了这一点，但在使用它们时仍然是另一个值得关注的原因。

从一个好的约定的角度来看，如果主键不仅仅是我们一个普通的旧自动递增 id 字段，那么它应该对你以外的其他人有一些明确的意义。通常，人们期望键的数字或字符值，而不是诸如 blob、时间戳、日期时间等之类的东西……如果稍后将其用作另一个表中的外键，则尤其如此，使用时间戳作为外键可能会造成混淆给后来的开发者。当然，如果您有一个您知道是唯一的 varchar GUID 字段，请将其用作键。请记住，当用作外键时，如果您有一个巨大的字符串，您也会消耗相当多的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:21:43.367

假设您可以保证两个事件不会在相同的 1 秒间隔内发生，那么当然，您可以将时间戳字段用作 PK。

话虽如此，您为什么担心密钥大小？一个时间戳可能是 10 位，但它的内部存储要求只有[4 个字节](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)。相比之下，一个 int 也是 4 个字节，所以你不会丢失任何东西 - 除非你使用 bigints，在这种情况下它是 8 个字节。

另外，请注意时间戳字段会受到 y2038k 问题的影响。它们本质上是 unix 时间戳，可以为您自动格式化为人类可读的日期。如果您的应用程序将存在超过 26 年，那么您应该坚持使用 int/bigint，它具有“插入行的速度”的环绕范围，而不是固定的日期/时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:29:03.777

主键不仅是一种技术性的东西，它还是某种事物的业务表示，它使行所表示的每个对象都是唯一的。

时间戳是对象的唯一字段，因为您不能（在您的情况下）同时插入两个对象，但它不是业务对象的主要定义（如果您有一个名为“时间戳”的业务对象，那么是的，插入的时间应该是主键）

ID 代表“我的客户有一个代表他的物理 ID”：过去，我们会在文件、账单...

永远不要忘记，计算机科学本身不是目标，而是实现目标的手段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:21:51.507

我会将该`ID`列作为主键，因为在某些情况下，unix 时间戳会给您一个您不期望的值。一个可能是非常快速地连续插入返回相同的时间戳，另一个是如果服务器管理员决定对服务器时间设置进行监控。

进行连接可能会更加明显，因为人们通常期望主键是某种唯一的 id，而不是时间戳。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:22:04.577

当然可以，但是只有在添加新记录时，性能提升才会很小。此外，您将被迫在所有相关对象中为 foreign_keys 使用时间戳。

仅当您期望每秒有很多插入和大量记录（以节省 id 列及其索引的存储空间）时才值得考虑，但正如您所说的时间戳将是唯一的，因此每秒最多 1 条记录 :-)

# ruby-on-rails - Kerberos 和电子商务是否不一致？

> ID：11742215
> 
> 赞同：0
> 
> 时间：2012-07-31T14:16:31.560
> 
> 标签：ruby-on-rails, security, e-commerce, kerberos

我最近阅读了有关 Kerberos 及其用于安全验证用户的出色算法的信息。

但是 Kerberos 的“缺点”是它需要直接从身份验证服务器手动添加凭据（称为“主体”）（使用 Kerberos 实现）。

因此，除非我忽略它，否则不可能使用电子商务中的经典表单将新用户添加到 Kerberos。事实上，显然，这将浪费 Kerberos 原则，因为凭据将通过网络发送，即使它们是使用 SSL 加密的......

您能否确认一下，Kerberos 不能用于要求每个用户创建自己并添加自己的登录名/密码的经典网站？这意味着不需要 Kerberos 服务器的管理员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:33:07.453

就技术能力而言，您可以使用 Kerberos 作为身份验证信息的后备存储，并且仍然支持 SSL 上的用户名和密码。这不是理想的 Kerberos 模型，因为这意味着用户所在的本地系统以外的系统会获得密码的副本。但这只是意味着您没有使用 Kerberos 的全部安全功能；这并不意味着 Kerberos 不起作用。出于其他原因，使用 Kerberos 可能仍然很方便。

Kerberos 的一个肮脏的小秘密是，几乎每个大规模部署它的站点都通过 SSL 接受至少某些应用程序的用户名和密码，并在服务器上验证用户名和密码。在很多情况下，没有其他好的方法可以做到这一点。对于 Web 应用程序尤其如此。虽然许多 Web 浏览器确实通过 Negotiate-Auth 支持 SPNEGO 来进行真正的 Kerberos 身份验证，但这在很多情况下都不起作用（系统本地没有 Kerberos、kiosk 系统、没有本地 Kerberos 库的电话设备等。 ）。

（我是斯坦福大学的 Kerberos 管理员，也是我们 Web 身份验证系统的维护者，该系统基于 Kerberos，但对于大多数用户来说，仍然通过 SSL 获取用户名和密码，并在中央 Web 登录服务器上验证它们。）

# node.js - 任何用于在 Node.js 中可视化模块依赖关系的库？

> ID：11742216
> 
> 赞同：5
> 
> 时间：2012-07-31T14:16:35.220
> 
> 标签：node.js, dependencies, visualization, dependency-management

作为对我的 Node.js 应用程序（进行 DDD）的重大重构的一部分，我正在寻找一个库，该库通过检查代码能够可视化不同节点模块之间的模块依赖关系（通过“要求”它们）。

以表格格式可视化很好，我不需要花哨的图表。

那里有任何节点库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T12:29:30.287

如果您也可以接受一些*精美的图表*：[http ://hughsk.github.com/colony/](http://hughsk.github.com/colony/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:16:10.973

我不知道这是否存在，但我通过快速[搜索](http://toolbox.no.de/search?q=require)找到了以下内容：

*   [http://toolbox.no.de/packages/subdeps](http://toolbox.no.de/packages/subdeps)
*   [http://toolbox.no.de/packages/fast-detective](http://toolbox.no.de/packages/fast-detective)

也许 subdeps 并不是您现在想要的，但我认为您可以使用这些项目自己制作该项目？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-13T13:28:48.397

另请参阅[https://github.com/pahen/madge](https://github.com/pahen/madge)

> 从您的 CommonJS、AMD 或 ES6 模块依赖项创建图表。对于在代码中查找循环依赖项也很有用。在 Node.js 和 RequireJS 项目上测试。依赖关系是使用静态代码分析计算的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-08T13:48:59.510

我刚刚发布了我的[node-dependency-visualizer](https://www.npmjs.com/package/node-dependency-visualizer)，这是一个小模块，它从您的节点依赖项创建一个有向图。与 graphviz/dot 配对，您可以创建一个 svg（或其他图像格式）的依赖关系图，您可以将其包含在您的文档中，嵌入到您的 Readme.md 中，...

但是，它不会检查代码中是否确实需要依赖项 - 不确定 OP 是否意味着“需要”。当然这个问题很老，但这个工具可能对其他人也有帮助。

示例图像（角度 cli）：

[![样本](../Images/3c7ef0fbb249937a59ba9c342f7a83f4.png)](https://i.stack.imgur.com/4gk9r.png)

# css - 简单的 xxx yyy { } CSS 选择器不起作用 - 为什么？

> ID：11742219
> 
> 赞同：1
> 
> 时间：2012-07-31T14:16:42.393
> 
> 标签：css

我有一个看似简单的 html 构造：

```
<div class="featured-image img-wrapper full-width">
  <a href="http://localhost/wordpress/?p=26">
    <img ... />
  </a>
</div> 
```

现在我想定位 a （不幸的是它没有自己的类），所以我使用这个 CSS

```
.img-wrapper a {
  background-image:url(../images/bkgs/stripes_tiny_08.png);
  background-repeat:repeat;
} 
```

但是这个元素没有任何反应！肯定不是背景图本身，也试过简单的颜色。奇怪的是：页面上还有另一个类似的结构，选择器在那里工作！Firebug 显示以下 CSS 路径（目标 a 在末尾）

```
working: html.js body.single div#page.wrap div#main-container.container div#primary.site-content div#content article#post-26.post-26 div.featured-image a.img-link
not wrk: html.js body.single div#page.wrap div#main-container.container div#primary.site-content div#content aside#yarpp_widget-2.widget div.bloglist article.post div.three div.featured-image a 
```

我没主意了。没有找到任何覆盖的 CSS 声明。知道我该如何定位吗？

编辑：目标 a 包含一个具有 :hover 不透明度集的 img 。这样我可以看到背景颜色有效，而不是背景图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:25:37.687

删除 img （如果它不透明）

对于冲突：

*   将 !important 放在 css 指令的末尾。
*   或尝试内联样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:28:03.880

您是否正在尝试制作此效果？[http://jsfiddle.net/r48ST/1/](http://jsfiddle.net/r48ST/1/)

[编辑]：这就是[http://jsfiddle.net/r48ST/2/](http://jsfiddle.net/r48ST/2/)的效果，只是在图像上添加了一些不透明度。此外，在不透明度上添加一些过渡效果，您将获得完整效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:31:42.640

如果不为您的标签指定尺寸`<a>`，它将符合`<img>`它所包含的标签的尺寸。因此，您应用的任何背景图像都将被`<img>`. 设置重复只会重复背景图像的次数，只要它适合（裁剪或整个）元素。如果你给元素的宽度和高度大于它所包裹的图像的宽度和高度，你应该会看到背景。

我希望这是您面临的问题。否则，如果您可以发布更多代码或演示，我们将能够更好地帮助您。

编辑：我刚刚注意到您对 :hover 不透明度的编辑。我建议您将样式更改为更像这样：`a > img:hover { visibility: hidden; }`

# asp.net-mvc - 一个视图中的两个局部视图

> ID：11742220
> 
> 赞同：0
> 
> 时间：2012-07-31T14:16:43.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, telerik, telerik-grid

我是 MVC3 的新手。我的任务是在一个视图中渲染两个局部视图。Telerik Grid 中的每个部分视图中都将显示一个数据列表。而且我想在一个级别（即一行）中显示两个部分视图。我曾尝试使用 PanelBar()，但部分视图以逐行模式显示。我想要如下所示的结果：

![在此处输入图像描述](../Images/a502db00d26122897eac118f6bf7d862.png)

```
@using EY.Benchmarking.Entities.Administration;
@model IEnumerable<Measure>
@{
ViewBag.Title = "Roles";
int PageSize = 10; // This needs to be fetched from a global variable   
}
@(
Html.Telerik().Grid(Model)
    .Name("RoleList")
    .DataKeys(dataKeys => dataKeys.Add(o => o.MeasureID))
        .DataBinding(dataBinding => dataBinding
            .Ajax()
            .OperationMode(GridOperationMode.Client) // <-- set the operation mode
            .Select("RoleList", "RoleMapping")
            )
    .Columns(columns =>
    {
        columns.Bound(o => o.MeasureID).Visible(false);
        columns.Bound(o => o.MeasureName);
    })
    .Pageable(paging => // Set the pagingation and associated propeties
        {
            paging.PageSize(PageSize).Style(GridPagerStyles.NextPreviousAndInput).Position(GridPagerPosition.Bottom);
        })
    .Sortable()
    .Reorderable(reorderable => reorderable.Columns(true))
    .Resizable(resizable => resizable.Columns(true))
    .Filterable()
    .HtmlAttributes(new { style = "width: 500px;" })
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:37:47.583

我只需在 HTML 中创建一个单行表并将两个部分添加为单元格。第一部分在这里 第二部分在这里

或者你可以使用 Telerik 分离器。

```
<%= Html.Telerik().Splitter()
        .Name("LayoutSplitter")
        .Panes(panes =>
        {
            panes.Add()
            .Content("Left pane");

        panes.Add()
            .Content("Right pane");
    })
%> 
```

来源：[http ://www.telerik.com/help/aspnet-mvc/telerik-ui-components-splitter-introduction.html](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-splitter-introduction.html)

# gwt - 在服务器启动时强制重新加载客户端代码

> ID：11742228
> 
> 赞同：1
> 
> 时间：2012-07-31T14:17:01.887
> 
> 标签：gwt

我正在使用 GWT、gilead 和 Hibernate 以及 Tomcat 构建一个 Intranet 应用程序。

由于我正在根据用户的反馈积极校准应用程序，因此我必须经常进行更改并重新启动 tomcat。我想知道我如何才能无缝地将这些更改提供给客户端。（目前我总是要求他们在我重新启动tomcat后刷新）。

由于应用程序是基于客户端 (js) 的，因此客户端具有应用程序代码。想象一下他打开应用程序的场景，我上传一个新版本并重新启动。重新启动后，用户可以完美地继续使用应用程序，因为他已经打开了页面，但他正在执行旧代码。如何让客户了解新代码？我想只是使会话无效并将用户重定向到登录页面不会这样做，因为 js 代码不会被刷新。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:29:10.493

正如您提到的，该应用程序将在服务器端更新后继续工作。如果接口没有改变，即使调用服务器上的新版本也可能有效。

一种可能的解决方案是打开彗星连接，例如使用[Atmosphere for GWT](https://github.com/Atmosphere/atmosphere)。在您部署新版本的任何时候，您都会向活动客户端广播事件。客户端应用程序将收到此广播并对其采取行动，提示用户刷新。您还可以使用此机制将消息传递给活动客户端，例如即将到来的服务器维护时间。

# ms-access-2003 - 对多选列表框中的每个项目运行 SQL 查询并在另一个列表框中显示结果？

> ID：11742233
> 
> 赞同：0
> 
> 时间：2012-07-31T14:17:13.847
> 
> 标签：ms-access-2003

我正在对多选列表框中选择的字段运行“选择不同”查询（列表框填充有表中的字段）。代码在我进行多选之前运行良好，现在 SQL 查询不起作用。例如，当我从字段列表中选择字段“性别”和“界面”时，第二个列表框中的结果是：

选择不同的性别界面

理想情况下，我的结果将包括字段名称，然后是值，每个字段结果之间有一条线。

这是我的代码：

```
Dim strSQL As String
Dim strCriteria As String
Dim varItem As Variant

On Error GoTo Err_Command206_Click

For Each varItem In Me.ScrubbedList.ItemsSelected
strCriteria = strCriteria & ",[" & Me!ScrubbedList.ItemData(varItem) & "]"

Next varItem

strSQL = "SELECT DISTINCT " & Mid(strCriteria, 2) & " FROM Scrubbed"

'====== Testing
Debug.Print strSQL
'=====

Me.List316.RowSource = strSQL

Exit_Command206_Click:
    Exit Sub
Err_Command206_Click:
    MsgBox "Please select a field" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:35:00.483

您似乎在错误的地方放了一些东西：

```
Dim strSQL As String
Dim strCriteria As String
Dim varItem As Variant

On Error GoTo Err_Command206_Click

For Each varItem In Me.ScrubbedList.ItemsSelected
    strCriteria = strCriteria & ",[" & Me!ScrubbedList.ItemData(varItem) & "]"

Next varItem

strSQL = "SELECT DISTINCT " & Mid(strCriteria,2) & " FROM Scrubbed"

'====== Testing
Debug.Print strSQL
'======

Me.List316.RowSource = strSQL

Exit_Command206_Click:
    Exit Sub
Err_Command206_Click:
    MsgBox "Please select a field" 
```

# ipad - iPad添加带有详细视图的tabBar

> ID：11742235
> 
> 赞同：0
> 
> 时间：2012-07-31T14:17:16.640
> 
> 标签：ipad, tabbar

我想根据用户选择的选项显示 3 个不同的屏幕

![我有 3 个选项的屏幕](../Images/bee30a4365ddc6fddb9e89c7e5fb38f1.png)

它们是 1\. 类型处方 2.Scribble 处方 3\. 处方表

我如何切换这 3 个视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:05:47.890

像 SplitViewControllers 这样的 UITabBarControllers 仅作为根视图控制器，因此您不能将 TabBarController 嵌套在另一个视图中，但是您可以将 UITabBar 嵌套在视图中。

我将 Tabbar 添加到底部的详细信息视图中，在顶部添加了导航栏，然后在它们之间添加了占位符视图。全部在 Interface Builder 中！，您将希望使用占位符视图上的自动调整大小来打开所有内容。

接下来，实现 UITabBarDelegate，您将需要：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item { 
```

从那里你可以使用 item.tag 如果你在 Interface Builder 中给每个项目一个唯一的标签，你就会知道用户点击了哪个标签。我为我的设置定义值：

```
#define VIEW_TAB_A 0
#define VIEW_TAB_B 1
#define VIEW_TAB_C 2 
```

然后你会想要...

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
[self switchToView:item]; 
```

}

```
- (void) switchToView : (UITabBarItem*) item {

    if( currentViewController != nil ) {
        [currentViewController viewWillDisappear:NO];
        [currentViewController.view removeFromSuperview];               
    }

switch(item.tag) {
    case VIEW_TAB_A:
        currentViewController = self.viewA;
        break;
    case SCAN_VIEW_TAB_B:
        currentViewController = self.viewB;
        break;
    case PROMOTIONS_VIEW_TAB_C:
        currentViewController = self.viewC;
        break;
}

UIView *aView = currentViewController.view; 

aView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
aView.frame = placeholderView.frame;

[currentViewController viewWillAppear:NO];

[self.view insertSubview:aView aboveSubview:placeholderView];
if( currentViewController != nil ) {
    [currentViewController viewDidDisappear:NO];
}
[currentViewController viewDidAppear:NO]; 
```

这些是我从类似问题中学到的笔记，下次更努力搜索

# c# - 如何在 C# 中制作系统事件应用程序？

> ID：11742238
> 
> 赞同：0
> 
> 时间：2012-07-31T14:17:23.277
> 
> 标签：c#

我正在尝试做以下事情。我有一门课，它在半月从 SQL 表中发生的事情记录下来，并制作了一个 excel 文件。我的问题是有人告诉我，让这个应用程序运行一整天只是为了让它每天运行一次是不可原谅的，我应该使用系统事件来执行此操作，但我不知道如何执行此操作。请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:18:40.923

最简单的解决方案是使用 Windows 的内置计划任务支持来运行您的应用程序。或者，如果您使用的是 Microsoft Sql Server，则为计划的 Sql Agent 作业。

# android - 使用共享首选项检测 SIM 卡更改

> ID：11742250
> 
> 赞同：0
> 
> 时间：2012-07-31T14:17:52.263
> 
> 标签：android, sharedpreferences

我已经设法将我的 SIM 卡序列号保存到 packagename.preferences.xml 中的一个名为 serial 的字符串中，但现在我想比较我当前的序列号。

当我使用 android.intent.boot_completed 广播接收器启动手机时。String 里面的值 value = sp.getString("serial", ""); 我无法正确比较串行字符串的当前值。

```
 TelephonyManager tMgr=(TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
         String currentSerial = tMgr.getSimSerialNumber();

         Toast.makeText(context, "Current Serial Number: " + currentSerial, Toast.LENGTH_LONG).show();

 SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(context);
 String value = sp.getString("serial", "");

 if (value == currentSerial)
 {
     Toast.makeText(context, "SIM Change detected!", Toast.LENGTH_SHORT).show();
 }
 else {
     Toast.makeText(context, "No SIM Change detected!", Toast.LENGTH_SHORT).show();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:20:07.217

您可能没有获得相同的 SharedPreferences。尝试为两者指定 SharedPrefereneces 名称和/或为每个使用您的基本上下文。

# c# - 无法关闭 StreamReader（reader.Close(); 块代码）

> ID：11742252
> 
> 赞同：0
> 
> 时间：2012-07-31T14:18:01.870
> 
> 标签：c#, .net, webclient, streamreader

我从网址收到 **连续**的 [不间断] 消息：

```
 string webUrl = "xxxxx/status.cgi";
    WebClient client = new WebClient();
    client.Credentials = new NetworkCredential("UUU", "PPP");

    StreamReader reader = new StreamReader(client.OpenRead(webUrl), Encoding.UTF8,true);
    string line;
    int counter = 0;
    while ((line = reader.ReadLine()) != null)
    {
        if( line == "XXXXXX")
        {
           break;
        }
    }

    Console.WriteLine("Try to Close Stream Reader...");
    reader.Close();
    Console.WriteLine("Stream Reader is closed..."); 
```

**问题是当我从while循环中中断时，我想关闭流阅读器......但是流阅读器没有关闭......“reader.Close（）;” 挂起/阻止代码...**

为什么会这样？如何解决？

更新：“使用”在我的情况下不起作用：退出循环但流读取器未处理...挂起/阻止

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Net;
using System.Linq;
using System.Text;

namespace TestStreamReader
{
    class Program
    {
        static void Main(string[] args)
        {
            string  webUrl = "http://X.Y.Z:7000/status.cgi";
            int counter = 0;

            using (WebClient client = new WebClient())
            {
                client.Credentials = new NetworkCredential("admin", "000000");

                using (StreamReader reader = new StreamReader(client.OpenRead(webUrl), Encoding.UTF8, true))
                {
                    string line;
                    while ((line = reader.ReadLine()) != null)
                    {
                        counter++;

                        Console.WriteLine("Input"+ line);

                        if (counter == 10)
                        {
                            Console.WriteLine("I am exiting the loop");
                            break;
                        }

                    }

                    Console.WriteLine("Exit the while loop");

                }

                Console.WriteLine("Reader should be desposed");
            }

            Console.WriteLine("Web Client should be disposed!");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T15:42:45.227

我遇到了同样的问题，但是这个帖子中提出的建议都没有对我有帮助。但我能够以不同的方式修复它，所以我想我会分享......

我使用异步版本`client.OpenRead(uri)`打开流，然后`client.CancelAsync()`在需要关闭它时可以调用。那里的实现必须以`StreamReader`不同的方式处理，因为它是这样工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:23:26.073

我这边的一个快速想法，尝试将 StreamReader 放入 Using。

```
 string webUrl = "http://www.google.com";
        using (WebClient client = new WebClient())
        {
            client.Credentials = new NetworkCredential("UUU", "PPP");

            int counter = 0;

            using (StreamReader reader = new StreamReader(client.OpenRead(webUrl), Encoding.UTF8, true))
            {
                string line;
                while ((line = reader.ReadLine()) != null)
                {
                    if (line == "XXXXXX")
                    {
                        break;
                    }
                    counter++;
                }

            }
        }

        Console.WriteLine("Try to Close Stream Reader...");
        Console.WriteLine("Stream Reader İSclosed..."); 
```

这将使 Connection 保持打开状态，直到不再使用。之后将自动调用 Dispose()。无需手动分离或关闭。[更新] 我还将 WebClient 移动到使用 StreamReaders 之外的使用和计数器变量中。

[编辑]
由于评论，问题看起来像（未经测试的推测）WebClient 的副作用无法退出，因为它看不到流的结尾。因此，StreamReader 等待。我附上了另一种从网络请求中读取的方法。然而，这远非肯定会更好。

```
 string webUrl = "http://www.google.com";

    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(webUrl);
    req.Credentials = new NetworkCredential("UUU", "PPP");
    using (HttpWebResponse resp = (HttpWebResponse)req.GetResponse())
    {
        using (Stream stream = resp.GetResponseStream())
        {
            int read;
            string line;

            byte[] data = new byte[4096];
            while ((read = stream.Read(data, 0, data.Length)) > 0)
            {
                line = Encoding.GetEncoding("ASCII").GetString(data, 0, data.Length);

                if (line.Contains("(function(){try{var a=window.gbar;"))
                {
                    Console.WriteLine("End Bit founded..");
                    // Some more logic?
                    break;
                }
                data = new byte[4096];
                Console.WriteLine(line);
            }
        }
    }
    Console.WriteLine("End of Stream"); 
```

请注意，我在这里使用了 Stream 并手动拆分为 4096 个数据块，只是为了解决问题。通常是`using (StreamReader stream2 = new StreamReader(resp.GetResponseStream())) { string test = stream2.ReadToEnd(); }`.

希望它能更进一步。
另请注意，上面的编码设置为“ASCII”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:22:15.660

您是否考虑过使用 HttpWebRequest 并获取响应流，而不是使用 WebClient？

```
//using System.Net;

    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(ApiProcedure.FunctionUri);
    request.Credentials = (CredentialCache)Credentials;
    request.PreAuthenticate = true;

    //define the type of request
    request.Method = HttpMethod;
    request.ContentType = "application/json";

    //execute
    StreamReader sr = new StreamReader(response.GetResponseStream());
    return sr.ReadToEnd(); 
```

我知道你正在做一个连续的流，但你应该能够像在你的例子中那样正常对待流阅读器。我认为这种方法会给你更多的控制。

如果我需要执行一个简单的任务，我通常只使用 WebClient，其中所有的细节设置/流都为我完成。发现单独管理请求和响应时我会得到更好的结果。

祝你好运！

编辑：另外，这只是我的代码的一个片段。您可能想看看这里：[C# - 如何通过 HTTP 读取连续的 XML 流，](https://stackoverflow.com/questions/775574/c-sharp-how-to-read-a-continuous-stream-of-xml-over-http)这是读取连续数据块的一个很好的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T19:18:09.660

我见过类似的东西。问题是它正在等待 ReadTimeOut 发生。您可以尝试将 Stream.ReadTimeOut 属性设置为足够小的值。

# asp.net - 如何保持页面浏览量？

> ID：11742253
> 
> 赞同：0
> 
> 时间：2012-07-31T14:18:01.737
> 
> 标签：asp.net, session

当我刷新页面时，页数不会增加。它保持在会话中或任何方式。例如，在 SO 中，我点击了任何 qouestion，问题视图计数增加。我再看另一个问题后再次返回这个问题，它没有增加。

逻辑是什么？对不起，我糟糕的英语。我希望我能解释一下。我也不知道这个问题的正确标签。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:25:02.653

您可以检查来自的请求的 IPAddress 并检查它。如果已经从该 IP 发出了对该页面的请求（页面查看），则不要增加计数，否则增加。

如果您将其存储在会话中，则可能会被不同的浏览器入侵。例如：如果我在 3 个不同的浏览器中打开页面，计数将增加 3 个数字。所以不要为此使用 Session 。

你可以有一张桌子来做这件事。有一个 QuestionId、IPAddress、DateVisited 列。如果用户在不同的日期从同一 IP 访问同一问题，则由您决定是否应计算访问。由于您在表中有数据，因此您可以根据自己的意愿执行 IF 条件。

# objective-c - 我的第一个自定义视图没有滚动

> ID：11742254
> 
> 赞同：0
> 
> 时间：2012-07-31T14:18:03.430
> 
> 标签：objective-c, ios, ipad, ios5

我有一个文本视图，我正在接受来自互联网的聊天并正在打印它，但我想要比文本视图更多的颜色来格式化聊天。

我用滚动视图替换了文本视图，并在 viewdidload 中尝试（似乎有效）将我的视图类附加到它。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    _myconsoleview = [[ConsoleView alloc] initWithFrame:[self._scview bounds]];
    [_myconsoleview setBackgroundColor: [UIColor yellowColor]];
    [self._scview addSubview:_myconsoleview];
    [self._scview setNeedsDisplay];
} 
```

以及文本到达底部它没有滚动（我尝试用鼠标拖动文本并寻找滚动条）。

所以这个示例核心文本程序说哦，这很容易滚动。只需让我的自定义视图（ConsoleView）继承滚动视图本身。所以我试试这个并现在添加这个：

```
@interface ConsoleView :UIScrollView<UIScrollViewDelegate> 
```

仍然没有滚动。没有滚动条。没有任何迹象，到目前为止，我正在使用 ipad 模拟器，任何类型的滚动。在 ConsoleView 中，我最终想做一些非常精致的事情，但现在我只是打印一个字符串。但是，当我附加到更多文本时，字符串会变得更长。

我在我的 sendtext 方法中试过这个。当他们点击按钮以将他们在此文本字段中键入的文本发送到服务器时，这会发生：

```
 [myconsoleviewid addNewText:newText];
    [_scview scrollRectToVisible:[_scview bounds] animated: TRUE];
    [_scview setNeedsDisplay]; 
```

老实说，我不确定我是否可以声称上述方法会起作用，但我认为某些方法可能会起作用。有任何想法吗？我对 ios 编程还很陌生，大约 2 个月前就开始了，并且一直在不停地工作。在 java 或 android 中，似乎没有什么比将其添加到一些滚动控件中更能像控制台一样滚动了。但事实证明 IOS 更棘手。

麦克风

编辑。这是我的绘制矩形，它假设打印越来越长的字符串。它在控制台视图中：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);    CGMutablePathRef path = CGPathCreateMutable(); //1
    CGPathAddRect(path, NULL, self.bounds );

    CTFramesetterRef framesetter =
    CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)attString); //3
    CTFrameRef frame =
    CTFramesetterCreateFrame(framesetter,
                             CFRangeMake(0, [attString length]), path, NULL);

    CTFrameDraw(frame, context); //4

    CFRelease(frame); //5
    CFRelease(path);
    CFRelease(framesetter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:20:38.950

您需要设置`scrollView.contentSize`适当大小的可滚动区域。

`scrollView.contentSize = CGSizeMake(640, 320); // if you are in full screen and have two view one to other in horizontal`

// 对于垂直滚动，你需要做

`scrollView.contentSize = CGSizeMake(320, 640);`

如果您将 contentSize 设置为大于视图框架大小（如果可滚动），则此示例仅适用于水平或垂直滚动​​的一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:21:39.683

ScrollView 的 contentSize 必须大于 ScrollView 的 frame 才能允许滚动。正确设置此属性，您应该没问题。

# wix - 在相同环境组件的安装程序之间重用 WIX 中的 GUID

> ID：11742257
> 
> 赞同：1
> 
> 时间：2012-07-31T14:18:25.777
> 
> 标签：wix, windows-installer

我正在为我们的内部 PowerShell 模块构建几个安装程序。我们将所有模块安装到相同的文件夹结构中。我必须更新`PSModulePath`环境变量。我是否在安装程序之间为组件重复使用相同的 GUID，因为它是相同的组件，还是每个安装程序都需要是唯一的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:58:16.183

我将该组件创作​​为共享并将其放入片段文件中。然后在您的各种安装程序中使用 ComponentRef 将其拉入您的功能。

这样，最后卸载的安装程序将删除该组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:48:35.517

首先，我会接受@Christopher 的建议，但要回答您的具体问题，我会说 WIX 希望您继续使用以继续对每个特定文件使用相同的 GUID。

来自[http://wix.sourceforge.net/manual-wix3/generate_guids.htm](http://wix.sourceforge.net/manual-wix3/generate_guids.htm)（强调我的）：

> 对于 Component 元素，生成的 GUID 基于组件的 KeyPath 的安装目录和文件名。**如果 KeyPath 的目录和文件名不变，则此 GUID 将在构建之间保持一致。**

因此，如果一个文件具有相同的目录和文件名，那么 WIX 将继续为其分配相同的 GUID，如果他们希望同一文件具有每个安装程序具有不同的 GUID，他们不会这样做。

# java - libgdx 项目符号示例

> ID：11742258
> 
> 赞同：0
> 
> 时间：2012-07-31T14:18:27.327
> 
> 标签：java, libgdx

我尝试运行此代码 [http://tinfig.com/git/gdx-bullet-demos/](http://tinfig.com/git/gdx-bullet-demos/)

在 Windows 中它不起作用并因错误而崩溃

```
Caused by: java.lang.RuntimeException: Couldn't load shared library: 'gdx-bullet' for target Windows 7, 32-bit
at com.badlogic.gdx.utils.SharedLibraryLoader.load(SharedLibraryLoader.java:151)
at com.badlogic.gdx.physics.bullet.Bullet.init(Bullet.java:26)
at com.badlogic.gdx.physics.bullet.demo.screens.SimulationScreen.<clinit>(SimulationScreen.java:38) 
```

在 Android 上工作正常。

怎么修？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:11:08.490

看看能不能看到gdx-bullet.dll，放到当前目录下，用这个参数-Djava.library.path="."启动jvm

# javascript - angularjs for循环用于生日字段

> ID：11742259
> 
> 赞同：4
> 
> 时间：2012-07-31T14:18:32.240
> 
> 标签：javascript, for-loop, angularjs

我需要创建 3 个生日字段（天、月、年），当我使用 AngularJS 时，我想我可以将 ngRepeat 指令与 i < 31 左右的表达式一起使用。但它不起作用。

有人知道我可以做些什么来简单地用所有需要的值填充下拉框吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-13T05:04:28.913

ng-repeat 并不是真正的方法。而是使用 ng-options 指令传递一个表达式，该表达式从控制器模型中的数组中提取标签。

首先构建将保存年、月和日数组的控制器。在 $scope 对象上创建属性，以便您可以通过视图上的 ng-options 指令访问这些数组。

如果将 JQuery 作为依赖项包含在内，则可以通过以下方式构造数组：

```
var years = $.map($(Array(numberOfYears)), function (val, i) { return i + 1900; });
var months = $.map($(Array(12)), function (val, i) { return i + 1; });
var days = $.map($(Array(31)), function (val, i) { return i + 1; }); 
```

如果您不想拥有 JQuery 依赖项，只需对所有三个数组使用一个很好的旧 for 循环。以下代码将为您提供数组 $scope 上的访问器：

```
$scope.Years = years;
$scope.Months = months;
$scope.Days = days; 
```

回到您的 HTML 视图中，添加一个带有 ng-options 和 ng-model ng-options 指令的选择元素，例如：

```
<div class="ng-scope" ng-controller="BirthdayController">
<select ng-model="SelectedYear" ng-options="label for label in Years"></select> 
<select ng-model="SelectedMonth" ng-options="label for label in Months"></select> 
<select ng-model="SelectedDays" ng-options="label for label in Days"></select>
</div> 
```

我假设您熟悉创建 AngularJS 模块并向其添加控制器以及向容器添加必要的 ng-app 指令、ng-scope 类和 ng-controller 指令。至此，您将拥有三个下拉列表，分别包含年份列表、12 个月列表和 31 天列表。如果您想拥有受抚养日列表，请继续阅读！:)

有关基本版本，请参阅此 plnkr：[http ://plnkr.co/edit/VfEpwPv084H7XiifEsnm?p=preview](http://plnkr.co/edit/VfEpwPv084H7XiifEsnm?p=preview)

**奖金回合：**

您可以更进一步，使天数显示正确的天数，因为天数确实依赖于所选的月份和年份。非闰年二月有 28 天，闰年有 29 天。其他月份有 30 或 31 天，具体取决于月份。如果你想花很多时间，你需要控制器中的一个函数来确定闰年并确定返回多少天来计算一年是否是 javascript 中的闰年，以下函数非常有用：

```
var isLeapYear = function (selectedYear) {
var year = SelectedYear || 0;
return ((year % 400 == 0 || year % 100 != 0) && (year % 4 == 0)) ? 1 : 0;} 
```

尽管使用 Angular 看起来会略有不同，因为 $scope 已经包含 selectedYear 并且不必传入。 isLeapYear 辅助函数由另一个函数访问，该函数确定给定月份和年份组合显示多少天如下：

```
var getNumberOfDaysInMonth = function (selectedMonth) {
var selectedMonth = selectedMonth || 0;
return 31 - ((selectedMonth === 2) ? (3 - isLeapYear()) : ((selectedMonth - 1) % 7 % 2));} 
```

现在，在原来的 select 元素上需要做的就是在 ng-options 指令上添加一个 limitTo 过滤器，以更改实际渲染的元素数量。Months 和 Years 的 Select 元素需要一个 ng-Change 指令，因此我们可以更新 $scope 上的字段，该字段将保存限制天数的数字。

```
<select ng-model="SelectedYear" ng-options="label for label in Years" ng-change="UpdateNumberOfDays()"></select> 
<select ng-model="SelectedMonth" ng-options="label for label in Months" ng-change="UpdateNumberOfDays()"></select> 
<select ng-model="SelectedDays" ng-options="label for label in Days | limitTo:NumberOfDays"></select> 
```

NumberOfDays 填充在控制器 $scope.UpdateNumberOfDays() 上的函数中，这当然将使用上述帮助函数 GetNumberOfDaysInMonth。

作为额外的奖励，这里是智能版本的 plnkr：[http ://plnkr.co/edit/AENh6Ynj4kNKZfLsXx4N?p=preview](http://plnkr.co/edit/AENh6Ynj4kNKZfLsXx4N?p=preview)

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T04:16:41.243

我的方法涉及使用以下内容填充日期选择列表：

```
<select class="form-control" ng-model="birthdate.day"
        ng-options="day for day in birthDays()">
</select> 
```

在控制器上，birthDays() 函数是：

```
$scope.birthDays = function () {
  var year = parseInt($scope.birthdate.year, 10);
  var month = parseInt($scope.birthdate.month, 10);
  var num = new Date(year, month + 1, 0).getDate();
  var i;
  var days = [];
  for (i = 1; i <= num; i++) {days.push(String(i)); }
  return days;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:09:17.790

您可以将[select](http://docs.angularjs.org/api/ng.directive:select)指令与要绑定的数字数组结合使用。[这篇文章](https://stackoverflow.com/questions/11160513/angularjs-ng-options-create-range)显示了一个函数和一个过滤器，您可以使用它们来填充 1-31。

以下是选择绑定到数组的基本语法：

```
<select ng-model="selected" ng-options="n for n in [1, 2, 3, 4, 5, 6]"></select> 
```

请注意，如果您省略`ng-model`.

正如其他人提到的那样，使用日期选择器是一个不错的选择，您可以将 AngularUI 包装器指令用于此处的jQuery [UI](http://angular-ui.github.com/index.html#directives-date) [Datepicker](http://jqueryui.com/demos/datepicker/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:22:50.357

你可以只使用 DatePicker 吗？

[http://www.nsftools.com/tips/DatePickerTest.htm](http://www.nsftools.com/tips/DatePickerTest.htm)

# git - 如何使用 git 推送到我网站上的特定文件夹？

> ID：11742260
> 
> 赞同：2
> 
> 时间：2012-07-31T14:18:32.947
> 
> 标签：git

我想做以下事情：

*   创建一个本地 git repo，我们称之为`~/my-awesome-app`
*   在我的网站上创建一个文件夹，我们称之为`mysite.com/my-awesome-app`
*   能够将我所做的任何更改推`~/my-awesome-app`送到`mysite.com/my-awesome-app`

有人可以解释我将如何设置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:47:35.307

您可以创建`mysite.com/my-awesome-app`一个 git 存储库并将`receive.denyCurrentBranch`其设置为`ignore`允许推送到那里，但这是有风险的。

如果我想这样做，我会在我的服务器上创建一个裸存储库，我可以将我的代码推送到该存储库中，然后更改`update`挂钩以将最新的树导出到`mysite.com/my-awesome-app`（并可选择重新启动应用程序）。这样，存储库和部署的副本是两个不同的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:43:01.250

您的远程服务器上的**~/mysite.com**是否有 git存储库？如果是这样，就像[James](https://stackoverflow.com/users/346740/james)和[Noufal](https://stackoverflow.com/users/229602/noufal-ibrahim)指出的那样，*要小心，这种嵌套可能会有问题。*

考虑以下解决方案，无论它是否嵌套都应该有效：

1.  **在~/mysite.com**之外创建**my-awesome-app**存储库（例如在**~/my-awesome-app**）。
*****   然后**创建一个**从**~/my-awesome-app/**到**~/mysite.com/my-awesome-app**的符号链接。*   并且，为了安全起见，**将 ~/mysite.com/my-awesome-app/**添加到**~/mysite.com/.gitignore**文件中，以将其从**~/mysite.com/** repo 的操作中排除。****

 ****在远程服务器上，从 shell：

```
mkdir ~/my-awesome-app/
ln -s ~/my-awesome-app/ ~/mysite.com/my-awesome-app
echo /my-awesome-app >> ~/mysite.com/.gitignore 
```

当从本地**my-awesome-app**分支发布提交到远程服务器时，我会**使用路径 ~/my-awesome-app**作为上传/相对目录，而不是 ~/mysite.com/my-awesome-app。这应该使您免于尝试提升文件结构以寻找 git repos 的一些厚颜无耻的 IDE。

最后，我会**考虑在 ~/my-awesome-app 添加一个远程**仓库，而不仅仅是通过 sftp/ftp 或 ssh 发送文件而没有仓库。这使您可以保持高度稳定的生产环境，同时仍然能够使用可扩展的[gitflow](http://nvie.com/img/2009/12/Screen-shot-2009-12-24-at-11.32.03.png)方法将修补程序重新合并到本地开发副本中。

*[Vincent Driessen在这里](http://nvie.com/posts/a-successful-git-branching-model/)对 gitflow 进行了很好的讨论。*

* * *

**更新：符号链接的替代方法**

您可以更改站点配置，而不是符号链接（可能会被删除）：

```
# creates the alias
<IfModule mod_alias.c>
     Alias /my-awesome-app /path/to/my-awesome-app/
</IfModule>

# allows people to access the path
<Directory /path/to/my-awesome-app/>
        Order allow,deny
        Allow from all
</Directory> 
```

然后，当您进行推送时，您应该使用 /path/to/my-awesome-app/。为了安全起见，我仍然会在 ~/mysite.com/.gitignore 中保留**/my-awesome-app**行，但没有符号链接，git 绝不应该在操作 ~/mysite 时偶然发现 my-awesome-app 存储库.com/。****

# asp.net-mvc-3 - 调用局部视图 HttpPost 而不是 HttpGet

> ID：11742261
> 
> 赞同：1
> 
> 时间：2012-07-31T14:18:35.450
> 
> 标签：asp.net-mvc-3, razor

我正在研究 MVC webapp 的管理部分。我的想法是为单个管理面板使用“小部件”。我会先说明我的意图。

我有一个语言表，为此我想创建一个局部视图，其中包含这些语言的下拉列表和一个“编辑”按钮，它将用户带到非局部视图来编辑语言。单击保存后，用户将被重定向到索引视图，该视图将再次显示下拉列表。

所以我有一个“Index.cshmtl”和一个“EditLanguage.cshtml”作为非部分视图，还有一个“LanguageWidget.cshtml”作为部分视图。

首先，用户会看到 Index 视图。

```
 public ViewResult Index()
    {
        return View();
    } 
```

此视图中包含以下代码：

```
@using CodeBox.Domain.Concrete.ORM
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Administration</h2>
@Html.Action("LanguageWidget") 
```

部分视图“LanguageWidget”仅包含以下代码，当用户将其提交到我的控制器中的 HttpPost 注释方法时：

```
@using (Html.BeginForm("LanguageWidget", "Admin"))
{
    @Html.DropDownListFor(model => model.SelectedItem, Model.Languages)
    <input type="submit" value="Edit"/>
} 
```

这是小部件的 HttpPost 方法： [HttpPost] public ActionResult LanguageWidget(LanguageWidgetModel model) { var lang = langRepo.Languages.FirstOrDefault(l => l.LanguageId == model.SelectedItem); return View("EditLanguage", lang); }

这会将用户带到语言编辑页面，该页面运行良好。

但是之后！用户编辑语言，提交页面，调用“EditLanguage”HttpPost方法，语言保存正确。

```
 [HttpPost]
    public ViewResult EditLanguage(Language model)
    {
        if (ModelState.IsValid)
        {
            langRepo.SaveLanguage(model);
            TempData["message"] = string.Format("{0} has been saved!", model.Name);
            return View("Index");
        }
        else
        {
            return View(model);
        }
    } 
```

所以，当我返回“Index”视图时——我猜这似乎是合乎逻辑的——控制器仍然假设这是一个 HttpPost 请求，并且当它呈现 Index 视图时，它调用“LanguageWidget”方法，假设它必须呈现 HttpPost方法。

这导致了 LanguageWidget HttpPost 方法，该方法返回一个带有布局的完整视图，只返回那个，所以我有我的布局，带有视图，包含一个带有编辑视图的布局。

我真的不明白我该如何解决这个问题？

我很确定这是我的设计缺陷，但我无法弄清楚。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:25:27.397

考虑使用：

```
return RedirectToAction("Index") 
```

代替：

```
return View("Index"); 
```

如果用户实际上被重定向到`Index`而不是留在`EditLanguage`. 如果用户点击刷新按钮，则不会使用这种方法重新发送数据。

# jquery - Ruby on rails -- 在 .js.erb 文件中渲染部分文件

> ID：11742267
> 
> 赞同：1
> 
> 时间：2012-07-31T14:18:56.543
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, render

在 HTML 标头中，这个小 javascript 工作：

应用程序.html.erb

```
<script type="text/javascript">
               alert("<%= escape_javascript(render('resources/positions')) %>");
</script> 
```

但是当我尝试将相同的代码放在 js.erb 文件中时，它不起作用。

我试图包含该文件，但不能双向工作：

```
<script src="/assets/resources.js.erb" type="text/javascript"></script>
<%= javascript_include_tag 'resources' %> 
```

应用程序/资产/javascripts/resources.js.erb

```
alert("<%= escape_javascript(render('resources/positions')) %>"); 
```

有任何想法吗 ？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:16:45.730

听起来像是资产管道的问题。

尝试添加

```
config.serve_static_assets = true 
```

开发中.rb

# javascript - 如何从 QT 调用滑块移动事件

> ID：11742268
> 
> 赞同：0
> 
> 时间：2012-07-31T14:18:57.573
> 
> 标签：javascript, jquery, qt, slider, qtwebkit

我正在尝试使用水平滑块从 QT 通过 evaluateJavaScript 调用 Javascript/JQuery 滑块事件 - 在我用作 WebView 的 HTML 文件中，我有一个函数被称为 valueChanged 信号的 SLOT（诠释）。我努力了

```
this->ui->browser->page()->mainFrame()->evaluateJavaScript($("#radius-slider").slider({

  min: 0,
  max: 50,

  step: 0.1,

  value: layers[currentValue].defaultRadius,

  change: function(event, ui) {

changeRadius(ui.value);

  }

});); 
```

和

```
QString theJSCode = QString("changeRadius(%1)").arg(this->ui->horizontalSlider_6->value());
this->ui->browser->page()->mainFrame()->evaluateJavaScript(theJSCode); 
```

无济于事。我在这里出了什么问题，我应该在哪里解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:42:46.567

在寻找了一些例子之后，我做了以下事情并且它奏效了。

Javascript结束：

```
function setVals(newVal){
$("#radius-slider").slider('value', newVal);
} 
```

Qt结束：

```
QString theJSCode = QString("setVals(%1)").arg(this->ui->horizontalSlider_6->value());
this->ui->browser->page()->mainFrame()->evaluateJavaScript(theJSCode); 
```

# c# - 如何在两个现有区域之间添加新区域？

> ID：11742275
> 
> 赞同：0
> 
> 时间：2012-07-31T14:19:27.777
> 
> 标签：c#, wpf, prism, composite

我正在尝试使用 Prism 和 C# 4.0 在复合 UI 应用程序中的 2 个现有区域之间添加一个新区域。

我该如何做到这一点？

# android - 请检查我使用 PHP 服务器验证移动应用程序的方法

> ID：11742278
> 
> 赞同：1
> 
> 时间：2012-07-31T14:19:37.360
> 
> 标签：android, security, authentication, mobile

我正在构建一个需要使用 php 服务进行身份验证的 android 应用程序。我目前的方法是当用户最初登录时，使用 uniqid() 生成一个唯一的 id。然后这个 uid 连同他们的用户名一起存储在数据库的一个表中。然后用户被传回这个 uid。

随后对服务器的所有进一步请求将发送 uid 及其用户名，然后将在数据库中检查以验证用户。

这种方法可以吗？还是我错过了他们的巨大安全漏洞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:55:58.750

这里有几个问题。因为一个`uniqid()`几乎完全由时间戳组成，并且非常可预测。而不是只是重新发明轮子，您应该只使用 PHP 的`session_start()`. 如果由于某种原因您不能使用 PHP 的会话，则使用`session_id()`.

其他问题，如果您的应用程序遭受 sql 注入攻击，那么攻击者可以将会话 ID 从数据库中提取出来并登录。密码散列的原因是为了在数据库被破坏后减缓攻击者的速度，如果攻击者拥有会话 ID，那么他不必破解密码散列即可登录。（您正在对密码进行哈希处理...）一种选择是`aes_encrypt()`在存储的会话 ID 上使用 MySQL。

# c# - 是否可以在 XAML 中使用服务接口而不是代码隐藏？

> ID：11742280
> 
> 赞同：0
> 
> 时间：2012-07-31T14:19:50.040
> 
> 标签：c#, wpf, xaml, interface, code-behind

**背景：**

我的视图中有一个 LabelService 类的实例，用于从不同语言获取文本。

这要求我在后台有如下代码来填充 TextBlock 中的文本：

XAML：

```
<TextBlock Name="txtExample" Grid.Row="0" Margin="5,5,5,5"/> 
```

C＃：

```
// 'this' refers to the current class, the namespace of which is used to navigate
// through an XML labels file to find the correct label
string label = _labelService.GetSpecificLabel(this, txtExample.Name).Label
txtExample.Text = label; 
```

**问题：**

我是否有可能拥有此功能：

```
_labelService.GetSpecificLabel(this, txtExample.Name).Label 
```

在 XAML 中可用？

**补充资料：**

*只是为了解释我使用命名空间导航标签 XML 的意思：*

假设类在命名空间中定义如下

```
namespace My.App.Frontend
{
    public class MainWindow
    {
        string label = _labelService.GetSpecificLabel(this, txtExample.Name).Label
    }
} 
```

相应的 XML 将是

```
<My>
  <App>
    <Frontend>
      <MainWindow>
          <txtExample label="I am the example text" />
      </MainWindow>
    </Frontend>
  </App>
</My> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:25:49.587

在 WPF 中，通常使用 MVVM 模式来实现这一点。

在后面的代码中这样做甚至被认为是不好的做法，因为它不可测试且不易维护。尽可能将代码隐藏留空。

这样，您就有了一个可以连接到标签服务的 ViewModel 类。然后，您的视图将绑定到 ViewModel。

这是一个关于如何构建 WPF 应用程序的非常好的视频教程： [Jason Dollinger on MVVM](http://blog.lab49.com/archives/2650)

他在教程中开发的源代码也可以在这里找到： [Jason Dollinger 的源代码](http://blog.lab49.com/archives/2689)

这是一个非常简单的 ViewModel，只是为了让你有个起点：（注意 _labelService 和 txtExample 目前没有设置在那里）

```
public class TextBoxViewModel : INotifyPropertyChanged
{
    public TextBoxViewModel()
    {
        string label = _labelService.GetSpecificLabel(this, txtExample.Name).Label;
        this.text = label;
    }

    private string text;

    public string Text 
    { 
        get
        {
            return text;
        }

        set 
        {
            text = value;
            NotifyPropertyChanged("Text");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

在 XAML 中，Binding 部分很重要：

```
<TextBox Text="{Binding Text}" Height="26" HorizontalAlignment="Left" Margin="77,215,0,0" Name="textBox1" VerticalAlignment="Top" Width="306" /> 
```

在 Codebehind 中（或更好：你做脚手架的地方）

```
public MainWindow()
{
    InitializeComponent();

    this.DataContext = new TextBoxViewModel();
} 
```

# c# - 使用 Topshelf 进行集成测试以启动 C# Windows 服务

> ID：11742281
> 
> 赞同：6
> 
> 时间：2012-07-31T14:19:57.480
> 
> 标签：c#, unit-testing, windows-services, integration-testing, topshelf

我正在使用[Topshelf](http://topshelf-project.com/)托管用 C# 编写的 Windows 服务，现在我想编写一些集成测试。我的初始化代码保存在启动器类中，如下所示：

```
public class Launcher
{
    private Host host;

    /// <summary>
    /// Configure and launch the windows service
    /// </summary>
    public void Launch()
    {
        //Setup log4net from config file
        log4net.Config.XmlConfigurator.ConfigureAndWatch(new FileInfo(DEFAULT_CONFIG));

        //Setup Ninject dependency injection
        IKernel kernel = new StandardKernel(new MyModule());

        this.host = HostFactory.New(x =>
        {
            x.SetServiceName("MyService");
            x.SetDisplayName("MyService");
            x.SetDescription("MyService");

            x.RunAsLocalSystem();
            x.StartAutomatically();

            x.Service<MyWinService>(s =>
            {
                s.ConstructUsing(() => kernel.Get<MyWinService>());
                s.WhenStarted(w => w.Start());
                s.WhenStopped(w => w.Stop());
            });
        });

        this.host.Run(); //code blocks here
    }

    /// <summary>
    /// Dispose the service host
    /// </summary>
    public void Dispose()
    {
        if (this.host != null && this.host is IDisposable)
        {
            (this.host as IDisposable).Dispose();
            this.host = null;
        }
    }
} 
```

我想编写一些集成测试来确保 log4net 和 Ninject 设置正确并且 Topshelf 启动我的服务。问题是，一旦你调用`Run()`Topshelf 主机，代码就会阻塞，所以我的测试代码永远不会运行。

我想`Launch()`在我的测试部分调用一个单独的线程，`SetUp`但是我需要一些技巧来`Thread.Sleep(1000)`确保测试在`Launch()`完成之前不会运行。我无法在其上使用正确的同步（例如 a `ManualResetEvent`），因为它`Launch()`永远不会返回。当前代码是：

```
private Launcher launcher;
private Thread launchThread;

[TestFixtureSetUp]
public void SetUp()
{
    launcher = new Launcher();
    launchThread = new Thread(o => launcher.Launch());
    launchThread.Start();
    Thread.Sleep(2500); //yuck!!
}

[TestFixtureTearDown]
public void TearDown()
{
    if (launcher != null)
    {
        launcher.Dispose(); //ouch
    }
} 
```

理想情况下，我正在寻找的是一种启动服务的非阻塞方式和一种再次停止它以放入我的`TearDown`. 目前我`TearDown`刚刚处理了发射器（所以从`TearDown`字面上撕下来！）。

有没有人以这种方式测试 Topshelf 服务的经验？我可以使用标准相对轻松地完成上述操作，`ServiceHost`但我更喜欢 Topshelf 中的显式配置和易于安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T12:25:35.653

[https://github.com/Topshelf/Topshelf/blob/v2.3/src/Topshelf/Config/Builders/RunBuilder.cs#L113](https://github.com/Topshelf/Topshelf/blob/v2.3/src/Topshelf/Config/Builders/RunBuilder.cs#L113)我认为这就是你想要的。`AfterStartingService`可用于`ManualResetEvent`从不同的线程设置 a。

现在这可能对您有用，但这感觉过于复杂，只需部署到 dev/staging 并对您的系统进行冒烟测试即可验证。但是，如果不进一步了解您的环境，这可能是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T00:27:43.460

我今天遇到了同样的问题，我选择将服务实例化和交互与实际的 Topshelf 托管隔离开来（在您的案例中，它只包括使用 Ninject 解决您的服务）。

Adam Rodger 有一个公平的观点，在快速查看了 的 Run 方法后`ConsoleRunHost`，它实际上会挂起等待 a`ManualResetEvent`并且在服务终止之前不会给你控制权。

在您的位置，要对冒烟/回归测试进行编码，只需将内核和模块放入您的`SetUp`方法中，解析服务，进行测试并将其丢弃在`TearDown`

# spring - Spring 自定义 JSF 登录页面，总是“错误凭据”

> ID：11742283
> 
> 赞同：3
> 
> 时间：2012-07-31T14:20:08.373
> 
> 标签：spring, jsf, spring-security

我正在尝试让 JSF 登录页面与 Spring 安全性一起使用。我环顾四周寻找了很多例子，但没有一个有效。每次我尝试使用 JSF 页面登录时，我都会在服务器日志中收到“错误凭据”警告。

Spring-Security.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security.xsd">

    <http auto-config="true">
        <intercept-url pattern="/Login.xhtml*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <intercept-url pattern="/**/*.css*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <intercept-url pattern="/**/*.js*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <intercept-url pattern="/**" access="ROLE_USER,ROLE_ADMIN" />
        <form-login login-page="/Login.xhtml" default-target-url="/Secure.xhtml"
            authentication-failure-url="/Login.xhtml" />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="admin" authorities="ROLE_ADMIN" password="admin"/>
            </user-service>
        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <context:component-scan base-package="com.example" />
    <context:annotation-config />
    <tx:annotation-driven />
    <import resource="classpath:spring/security/Spring-Security.xml" />
</beans> 
```

登录.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head></h:head>
<body>
    <h:form>
        <h:outputLabel value="username" for="j_username"
            style="float:left" />
        <h:inputText id="j_username" style="float:left" />

        <h:outputLabel value="password" for="j_password"
            style="float:left; clear:both" />
        <h:inputSecret id="j_password" style="float:left" />

        <h:commandButton value="login"
            actionListener="#{loginBean.login}" style="float:left;clear:both" />
    </h:form>
    <h:messages style="float:left;clear:both" />
</body>
</html> 
```

登录豆

```
@Named
@Scope("request")
public class LoginBean
{
    public void login() throws ServletException, IOException
    {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();
        externalContext.dispatch("/j_spring_security_check");
        facesContext.responseComplete();
    }
} 
```

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <filter>
        <filter-name>OpenEntityManagerInViewFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
        <init-param>
            <param-name>singleSession</param-name>
            <param-value>true</param-value>
        </init-param>
        <init-param>
            <param-name>sessionFactoryBeanName</param-name>
            <param-value>sessionFactory</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>OpenEntityManagerInViewFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
</web-app> 
```

当我将非 JSF 页面用作 Login.xhtml 时，它可以完美运行。

有效的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head></h:head>
<body>
    <form action="j_spring_security_check" method="post">
        <table>
            <tr>
                <td>User:</td>
                <td><input type="text" name="j_username" /></td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type="password" name="j_password" /></td>
            </tr>
            <tr>
                <td colspan='2'><input name="submit" type="submit"
                    value="submit" /></td>
            </tr>
        </table>
    </form>
</body>
</html> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T18:23:39.003

这是一个老问题。默认情况下，FilterSecurityInterceptor 只会对每个请求执行一次，并且不会进行安全重新检查，除非 url 发生变化，但是使用 JSP/JSF 转发页面将呈现为对当前请求的响应，并且 url 在浏览器包含上一页的地址。

在 Spring Security 3.0 之前，这被绕过了执行 GET 请求，如下所示：

```
String encodedURL = externalcontext.encodeResourceURL(externalcontext.getRequestContextPath() + "/j_spring_security_check?j_username=" + username + "&j_password=" + password);

    externalcontext.redirect(encodedURL); 
```

但是从 Spring Security 3.0 开始，默认情况下它只支持 POST。

因此，一种可能最容易使用的方法是简单的 HTML 表单。否则，您需要通过获取 AuthenticationManager 手动验证请求。

我想整个故事起源于 Spring 论坛上的这篇[文章。](http://forum.springsource.org/showthread.php?84929-Can-t-get-IceFaces-login-form-to-work/page2)

最好的工作示例可以在 ICEFaces [wiki上找到](http://wiki.icesoft.org/display/ICE/Spring+Security)

这是来自 tutorial.zip 的相关 LoginController 类

```
/**
 * This class handles all login attempts except html forms that directly
 * post to the /j_spring_security_check method.
 *
 * @author Ben Simpson
 */
@ManagedBean(name = "loginController")
@RequestScoped
public class LoginController implements Serializable {
    private static final long serialVersionUID = 1L;

    /**
     * This action logs the user in and returns to the secure area.
     *
     * @return String path to secure area
     */
    public String loginUsingSpringAuthenticationManager() {
        //get backing bean for simple redirect form
        LoginFormBackingBean loginFormBean =
                (LoginFormBackingBean) FacesUtils.getBackingBean("loginFormBean");
        //authentication manager located in  Spring config: /WEB-INF/authenticationContext-security.xml
        AuthenticationManager authenticationManager =
                (AuthenticationManager) getSpringBean("authenticationManager");
        //simple token holder
        Authentication authenticationRequestToken = createAuthenticationToken(loginFormBean);
        //authentication action
        try {
            Authentication authenticationResponseToken =
                authenticationManager.authenticate(authenticationRequestToken);
            SecurityContextHolder.getContext().setAuthentication(authenticationResponseToken);
            //ok, test if authenticated, if yes reroute
            if (authenticationResponseToken.isAuthenticated()) {
                //lookup authentication success url, or find redirect parameter from login bean
                return "/secure/examples";
            }
        } catch (BadCredentialsException badCredentialsException) {
            FacesMessage facesMessage =
                new FacesMessage("Login Failed: please check your username/password and try again.");
            FacesContext.getCurrentInstance().addMessage(null,facesMessage);
        } catch (LockedException lockedException) {
            FacesMessage facesMessage =
                new FacesMessage("Account Locked: please contact your administrator.");
            FacesContext.getCurrentInstance().addMessage(null,facesMessage);
        } catch (DisabledException disabledException) {
            FacesMessage facesMessage =
                new FacesMessage("Account Disabled: please contact your administrator.");
            FacesContext.getCurrentInstance().addMessage(null,facesMessage);
        }

        return null;
    }

    private Authentication createAuthenticationToken(LoginFormBackingBean loginFormBean) {
        UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken =
                new UsernamePasswordAuthenticationToken(
                        loginFormBean.getUserName(),
                        loginFormBean.getPassword()
                );
        return usernamePasswordAuthenticationToken;
    }

    private Object getSpringBean(String name){
        WebApplicationContext ctx = WebApplicationContextUtils.getRequiredWebApplicationContext(
                (ServletContext) FacesContext.getCurrentInstance().getExternalContext().getContext());
        return ctx.getBean(name);
    }
} 
```

选项 3：我没有亲自尝试过，但即使这样也应该有效：

通过在 applicationContext 的 http 元素中将每次请求属性设置为 false ，从而强制重新检查安全性。但我不推荐它。

```
<http auto-config="true" use-expressions="true" once-per-request="false"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:24:30.800

这个问题的答案让我有点想要。

因此，为了在控制器中使用最少的代码（我想避免手动验证），我使用了 JSF（primefaces）表单和简单表单的组合。

我最终得到了这样的视图：

```
<h:form id="login-form" prependId="false">
    <p:focus for="userName" />
    <p:fieldset id="login-fs" legend="User Authentication">
        <h:panelGrid id="login-grid" columns="3">
            <p:outputLabel for="userName" value="User Name" />
            <p:inputText id="userName" value="#{loginView.userName}" required="true" />
            <p:message for="userName" />

            <p:outputLabel for="password" value="Password" />
            <p:inputText type="password" id="password" value="#{loginView.password}" required="true" />
            <p:message for="password" />
        </h:panelGrid>
        <br />
        <p:commandButton value="Submit" icon="ui-icon-check" process="@form" update="login-grid" actionListener="#{loginView.login}" />
    </p:fieldset>
</h:form>

<form id="hidden-form" action="#{request.contextPath}/j_spring_security_check" method="post">
    <h:inputHidden id="j_username" />
    <h:inputHidden id="j_password" />
</form>
<script type="text/javascript">
    function mysubmit() {
        $('#j_username').val($('#userName').val());
        $('#j_password').val($('#password').val());

        $('#hidden-form').submit();
    }
</script> 
```

支持 bean 可以执行典型的 jsf 生命周期，之后它将发送 javascript 以将值从成功验证的 JSF 表单传输到隐藏表单并提交隐藏表单：

```
@ManagedBean
public class LoginView {
    private String userName;
    private String password;

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public void login() {
        RequestContext.getCurrentInstance().execute("mysubmit()");
    }
} 
```

如果需要，您可以在提交实际发生之前在服务器端执行任何其他操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:01:13.813

如果我错了，有人纠正我，但我认为你指定的支持 bean 不正确。

指定支持 bean 范围的正确 JSF 方法如下：

```
@ManagedBean
@RequestScoped
public class LoginBean
{
    public void login() throws ServletException, IOException
    {
        FacesContext facesContext = FacesContext.getCurrentInstance();
        ExternalContext externalContext = facesContext.getExternalContext();
        externalContext.dispatch("/j_spring_security_check");
        facesContext.responseComplete();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:13:47.170

更改您`h:commandButton`以使用操作方法而不是 actionListener：

```
<h:commandButton value="login"
        action="#{loginBean.login}" style="float:left;clear:both" /> 
```

**参见：** [action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)

# javascript - Highcharts 列点击

> ID：11742284
> 
> 赞同：1
> 
> 时间：2012-07-31T14:20:10.190
> 
> 标签：javascript, charts, highcharts

您好，我已经问过一个关于 Highcharts Point Click 不起作用的问题。除此之外，我发现我的点击功能适用于谷歌浏览器，但不适用于 IE 8。你能帮我解决这个问题吗？我没有得到任何关于我之前的问题的回复，因此我再次发布 -

下面是我的代码 -

```
var columnoptions = {
                chart: {
                    renderTo: 'container',
                    type: 'column'
                },
                title: {
                    text: 'Exposure Details - Column Chart'
                },
                xAxis: {
                    categories: []
                },
                yAxis: {
                    title: {
                        text: 'Exposure'
                    }
                },              
                plotOptions: {  
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function() {
                            alert ('here');
                        }
                    }
                }
            } 
        },
                series: []
            }; 
```

下面是绘制柱形图的函数 -

函数显示列图（）{

```
 columnoptions.series = [];
     columnoptions.xAxis.categories = [];            
      var seriesOptions = {
                    name: 'chart',
                    data: [],                       

                };
     for(index = 0; index < categoryArray.length; index++){

         columnoptions.xAxis.categories.push(categoryArray[index]);

         seriesOptions.data.push(valueArray[index]);        

     }      

     columnoptions.series.push(seriesOptions); 
     chart = new Highcharts.Chart(columnoptions);
   } 
```

是因为我动态创建此图表的方式吗？请指导我。我收到错误 - 对象不支持此属性或方法。Highcharts.js 第 25 行。代码 0。字符 55。我希望实现图表向下钻取。因此需要让这个工作。IE是公司的标准浏览器。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:25:37.077

```
Object doesnt support this property or method 
```

这是主要在 IE 中生成的 Javascript 错误。

当您遇到此类 JS 错误时，请务必检查代码中是否有多余的逗号、单引号。

我可以在您的代码片段中看到这样一个。

```
var seriesOptions = {
                    name: 'chart',
                    data: [],                       

                }; 
```

这应该是

```
var seriesOptions = {
                        name: 'chart',
                        data: []                       

                    }; 
```

Firefox 会忽略此类错误，但 IE 不会让您离开。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T13:30:55.833

我刚刚使用了最新的 highcharts 文件 2.2.5 并解决了它。在 IE8 中工作。而且我觉得整体性能也有所提高..流畅。谢谢。:)

# python - Modelform ForeignKey - 如何避免 HTML 选择自动填充？

> ID：11742286
> 
> 赞同：2
> 
> 时间：2012-07-31T14:20:16.800
> 
> 标签：python, django, django-forms

我有一个`Person`与模型有关系的`City`模型：

```
class Person(models.Model):
    ...
    state = models.CharField(max_length=2, choices=STATES)
    city = models.ForeignKey('City')

class PersonForm(ModelForm):
    ...
    class Meta:
        model = Person

class City(models.Model):
    name = models.CharField(max_length=200)
    state = models.CharField(max_length=2) 
```

我正在使用 a`ModelForm`通过`as_p`属性在模板中呈现 Person 表单。

我有一组预加载的`City`数据库数据（它是数据库中的一大组数据），我不希望将这些数据加载到`select`创建为包含的表单中的列表中`Person`。

有没有办法避免在 html 中加载该组数据，使用`ModelForm`和`as_p`属性？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:52:21.913

当然，您可以覆盖任何字段或任何小部件，看看，django 文档对此非常清楚：

[模型形式](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)

# java - 带参数的 HttpURLConnection

> ID：11742288
> 
> 赞同：4
> 
> 时间：2012-07-31T14:20:23.297
> 
> 标签：java

我有一个我传入的 URL，看起来像这样

```
http://somecompany.com/restws/ebi/SVI/4048/?Name=Tra&Brand=Software: WebSphere - Open App Servers 
```

它不喜欢第二个参数（品牌）。在浏览器中，上面的这个查询字符串可以正常工作，但是一旦我在 Java 中执行，它就会失败。当我将 web 服务更改为接受单个参数时，此 URL 工作正常

```
http://somecompany.com/restws/ebi/SVI/4048/?Name=Tra 
```

似乎java的第二个参数有问题。我已经尝试过转义字符和我能想到的所有其他东西，但似乎没有任何效果。请帮忙！

```
String uri = "somecompany.com/restws/ebi/SVI/4048/?Name=" 
           + name+ "&Brand=Software: WebSphere - Open App Servers";

URL url;

try {
    url = new URL(uri);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setRequestMethod("GET");
    connection.setRequestProperty("Accept", "application/xml");
}
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T14:21:28.917

尝试对参数进行**url 编码。**

像这样的东西：

```
String uri = "somecompany.com/restws/ebi/SVI/4048/?Name=" +name+ "&Brand=";
uri = URLEncoder.encode("Software: WebSphere - Open App Servers", "utf-8"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:24:53.160

我可能会使用一个可以正确处理 HTTP 参数并提供合适的编码等的库。有关更多信息，请参阅[HttpComponents](http://hc.apache.org/)和[教程](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d5e43)。

# python - 在 EMR 上的 MRJob 中导入模块

> ID：11742289
> 
> 赞同：0
> 
> 时间：2012-07-31T14:20:23.850
> 
> 标签：python, hadoop, emr, mrjob

简单的问题：我有一个模块 headers.py，它定义了我在主 MRJob 脚本中需要的几个变量。我应该能够用

```
python MRMyJob -r emr --file=headers.py s3://input/data/path 
```

然后在我的 MRJob 脚本（MRMyJob）中，以下应该可以工作：

```
from headers import header1, header2, header3 
```

正确的？从 mrjob --help 页面：“--file=UPLOAD_FILES 将文件复制到此脚本的工作目录。您可以多次使用 --file。”

当我尝试导入它时，我仍然得到“没有名为标题的模块”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:59:53.343

`headers.py`显然没有放在你的遥控器里`PYTHONPATH`。请参阅有关如何将其他模块添加到集群[的文档；](http://packages.python.org/mrjob/writing-and-running.html#putting-your-source-tree-in-the-pythonpath)你必须先把它们放在一个压缩包中。

# c# - 优雅地解析 C# 枚举

> ID：11742291
> 
> 赞同：9
> 
> 时间：2012-07-31T14:20:27.747
> 
> 标签：c#, enums

有没有人有更优雅的解析枚举的解决方案？以下对我来说似乎是一团糟。

```
UserType userType = (UserType)Enum.Parse(typeof(UserType), iUserType.ToString()); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T14:22:53.847

我经常为它做一个通用的助手：

```
public static T ParseEnum<T>(string value) where T:struct
{
    return (T)Enum.Parse(typeof(T), value);
} 
```

您可以将其与[Jon Skeet 的](https://stackoverflow.com/users/22656/jon-skeet) [Unstrained Melody](http://code.google.com/p/unconstrained-melody/)（或任何其他 IL 后处理器）结合使用，以获得对枚举的正确类型约束，但这是可选的。

然后你可以像这样使用它：

```
var enumValue = ParseEnum<UserType>(iUserType.ToString()); 
```

* * *

.NET Framework 4.0 也[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/dd991317.aspx)提供了类似的语法，并提供了一种在解析失败时进行处理的方法。例如：

```
UserType userType;
if (Enum.TryParse<UserType>(iUserType.ToString(), out userType))
{
    //Yay! Parse succeeded. The userType variable has the value.
}
else
{
    //Oh noes! The parse failed!
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T14:35:43.580

您可以像这样创建扩展方法

```
public static class EnumExtensions
{
    public static T ToEnum<T>(this string s)
    {
        return (T)Enum.Parse(typeof(T), s);
    }
} 
```

然后在代码中你可以这样使用它（MyEnum 包含值 A 和 B）：

```
string s = "B";
MyEnum e = s.ToEnum<MyEnum>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-10T18:18:13.507

这是基于@vcsjones 版本和反馈以及来自@Mones 示例的扩展方法：

```
public enum TestEnum
{
    None,
    A,
    B,
};

void Main()
{
    var testValues = new List<object>();
    testValues.AddRange(Enumerable.Range(-2, 6).Select(i => (object)i));
    testValues.AddRange(new List<string>() { String.Empty, "A", "B", "C", null });

    foreach (var testValue in testValues)
    {
        Console.WriteLine($"Testing value {testValue ?? String.Empty}:");
        TestEnum output;
        var enumValues = Enum.GetNames(typeof(TestEnum)).ToList();
        try
        {
            if (TestEnum.TryParse(testValue.ToString(), out output))
            {
                Console.WriteLine($"Succeeded with TryParse on {testValue} to {output}");
            }
            else
            {
                Console.WriteLine($"Failed to TryParse on {testValue}");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Test harness caught an exception: {ex.ToString()}");
        }

        var toEnumOutput = (testValue ?? String.Empty).ToString().Parse<TestEnum>();
        Console.WriteLine($"Parse<TEnum> returned {toEnumOutput}");

        Console.WriteLine();
        Console.WriteLine();
    }

}

public static class EnumExtensions
{
    public static TEnum Parse<TEnum>(this string value) where TEnum : struct
    {
        TEnum output = default(TEnum);
        var enumValues = Enum.GetNames(typeof(TEnum)).ToList();

        if (Enum.TryParse<TEnum>(value, true, out output))
            if (Enum.IsDefined(typeof(TEnum), value) || value.ToString().Contains(",") || enumValues.Contains(output.ToString()))
            {
                Console.WriteLine($"Converted '{value}' to {output}.");
                return output;
            }
            else
            {
                Console.WriteLine($"{value} is not an underlying value of the enumeration.");
            }
        else
        {
            Console.WriteLine($"{value} is not a member of the enumeration.");
        }
        return default(TEnum);
    }
} 
```

测试工具给出以下输出：

```
Testing value -2:
Succeeded with TryParse on -2 to -2
-2 is not an underlying value of the enumeration.
Parse<TEnum> returned None

Testing value -1:
Succeeded with TryParse on -1 to -1
-1 is not an underlying value of the enumeration.
Parse<TEnum> returned None

Testing value 0:
Succeeded with TryParse on 0 to None
Converted '0' to None.
Parse<TEnum> returned None

Testing value 1:
Succeeded with TryParse on 1 to A
Converted '1' to A.
Parse<TEnum> returned A

Testing value 2:
Succeeded with TryParse on 2 to B
Converted '2' to B.
Parse<TEnum> returned B

Testing value 3:
Succeeded with TryParse on 3 to 3
3 is not an underlying value of the enumeration.
Parse<TEnum> returned None

Testing value :
Failed to TryParse on 
 is not a member of the enumeration.
Parse<TEnum> returned None

Testing value A:
Succeeded with TryParse on A to A
Converted 'A' to A.
Parse<TEnum> returned A

Testing value B:
Succeeded with TryParse on B to B
Converted 'B' to B.
Parse<TEnum> returned B

Testing value C:
Failed to TryParse on C
C is not a member of the enumeration.
Parse<TEnum> returned None

Testing value :
Test harness caught an exception: System.NullReferenceException: Object reference not set to an instance of an object.
   at UserQuery.Main() in C:\Users\Colin\AppData\Local\Temp\3\LINQPad5\_zhvrhwll\query_ludjga.cs:line 49
 is not a member of the enumeration.
Parse<TEnum> returned None 
```

参考：

*   [.NET 编程指南：类型参数的约束](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/constraints-on-type-parameters "Microsoft：类型参数的约束")
*   [Sriram Sakthivel 提到 where TEnum: struct](https://stackoverflow.com/a/20353807/645902)
*   [MSDN：Enum.TryParse 方法（字符串、布尔值、TEnum）](https://msdn.microsoft.com/en-us/library/dd991317(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-10T21:42:34.770

哦，我遇到了 Tyler Brinkley 的[Enums.NET](https://github.com/TylerBrinkley/Enums.NET "枚举.NET")库，它可以做到这一点，甚至更多！

另一个 StackOverflow 答案[C# 中 Enum.Parse 的通用版本](https://stackoverflow.com/questions/2247095/generic-version-of-enum-parse-in-c-sharp "C# 中枚举解析的通用版本")导致 Jon Skeet 的[Unconstrained Melody](https://github.com/jskeet/unconstrained-melody "无拘无束的旋律")库站点，该站点将我们引导到 Enums.NET。哇。

# html - tbody 和 td 的边界？

> ID：11742296
> 
> 赞同：3
> 
> 时间：2012-07-31T14:20:43.477
> 
> 标签：html, css

我有一个包含许多 tbody 的表格来对行进行分组。我希望每个 td 上的边框制作一个网格，但我也希望周围 tbody 上的边框显示它们是分组的。那可能吗？

[http://jsfiddle.net/jyRsy/](http://jsfiddle.net/jyRsy/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:35:02.143

```
td { 
    border: 1px solid blue;
}

tbody {
    border: 2px solid red; 
}​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T14:35:21.543

看起来s`border`上的属性`td`只是简单地应用在 's 之上`tbody`:)

如果您添加至少 2 个像素，而不是一个 - 它会起作用。（[http://jsfiddle.net/jyRsy/4/](http://jsfiddle.net/jyRsy/4/) - 在这个例子中 - 它是 3px。）我已经在所有现代浏览器中测试了这个小提琴。它适用于从 IE8 开始的任何地方。至于 IE7 - 我不会注意 ;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:26:51.790

JS小提琴。见[http://jsfiddle.net/Dv4T6/](http://jsfiddle.net/Dv4T6/)

```
<table width="300">
    <thead>
        <tr>
            <th width="60" align="center" valign="top" scope="col">Type</th>
            <th width="200" align="left" valign="top" scope="col">Address</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td align="center" valign="top">Shipping</td>
            <td align="left" valign="top">123 Main St</td>
        </tr>
    </tbody>
</table> 
```

不保证完全支持浏览器和设备。

# asp.net - 如何在asp.net中实现密码恢复控制中的多个挑战题？

> ID：11742298
> 
> 赞同：1
> 
> 时间：2012-07-31T14:20:48.110
> 
> 标签：asp.net, asp.net-membership, membership-provider, password-recovery, change-password

我希望在 asp .net 中的密码恢复控制中实施多个挑战问题。默认成员资格控件仅适用于一个挑战问题。

有人建议对控件实施多个问题的一种方法是创建我自己的成员资格提供程序。虽然，对我来说，如果我只处理密码恢复控制之外的挑战问题部分，这似乎是一种更简单的方法。然后，如果用户成功回答了挑战问题，则响应将与现有的更改密码方法绑定，以允许他/她输入新密码。

以下是我的问题：

*   这种方法有什么缺点？
*   为什么我需要创建一个新的会员资格提供者？
*   我什么时候需要创建一个单独的会员资格提供者？

# css - 有没有办法更改默认的网站光标集？

> ID：11742299
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:20:50.810
> 
> 标签：css, cursor

> **可能重复：**
> [自定义光标图像 CSS](https://stackoverflow.com/questions/336925/custom-cursor-image-css)

有没有办法在您使用时更改您网站的默认光标图像，例如..

```
body{
cursor:hand; /* Changing what 'hand' is equal to*/
} 
```

因此，我不必在所有内容上都使用 cursor:url() ，而只需更改名称等于的名称。

例如，我希望能够.. hand = URL; 进度= URL；等等等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:25:56.530

```
body{
cursor: url('mycursor.cur');
} 
```

但是，跨浏览器功能是有限的。你应该测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:33:31.947

您不能更改操作系统的游标集。（想象一下——作为这样一个网站的访问者，你会说什么改变你的系统设置）。您也无法重新定义关键字的外观。

如果你想这样做，你必须定义自定义图像。您可以做的最好的事情是对您希望拥有相同光标的元素进行分组。

```
input, select, [elements,]*{
   cursor: url('someInputCursor.cur');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:37:38.033

您无法更改`cursor: hand;`为使用不同的图像。您可以使用 CSS 预处理器（例如 LESS 或 SASS）来简化任务，例如

```
$hand: url('something.cur');
body {
    cursor: $hand;
} 
```

或者也许使用一个类（或涵盖所有必要元素的选择器）并相应地编辑 HTML？

```
.customcursor {
    cursor: url('something.cur');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:42:10.503

不，你不能，因为[`cursor`属性](http://www.w3.org/TR/CSS21/ui.html#propdef-cursor)值关键字在 CSS 规范的非正式散文中定义了它们的含义，没有工具可以提供任何关于如何实现它们的说明。明显的意图是让确切的形状依赖于实现。

使用[LESS](http://lesscss.org/)之类的工具，您可以编写使用已定义变量的样式表代码，但随后需要将此类代码翻译成 CSS。

注意`hand`关键字在不合格。对应的标准关键字是`pointer`. （`hand`因为 IE 5 不识别，所以有人用过`pointer`。）

# git - 是否可以让 git 自动解决某些类型的合并冲突

> ID：11742306
> 
> 赞同：3
> 
> 时间：2012-07-31T14:21:15.333
> 
> 标签：git, git-branch, git-merge

此时我们有两个分支 X 和 Y 已分支：

```
test.txt
dir/a.txt
dir/b.txt 
```

现在，分支 X 对 dir/a.txt 进行了一些更改，并创建了一个提交。分支 Y 在 dir/ 被删除的地方进行提交。

然后我们想将 X 合并到 Y 中。这会产生某种“删除-更改”冲突。是否可以指示 git 在检测到特定分支 (Y) 和特定文件集 (dir/*) 的特定冲突时始终“使用我们的”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:36:50.757

[阅读手册页](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)中有关合并策略的部分。您可以指定`-s ours`或`-s theirs`选择完全使用来自一个分支或另一个分支的版本。或者你可以让它更喜欢使用我们或他们的递归策略使用递归合并来解决冲突。请注意，这些不是相同的东西。

在上述情况下，如果你在 Y 上并且你将 X 与`git merge -s ours X`它合并将产生一个来自分支 Y 的更改的结果。

# cryptography - Progress 10.1C 4GL 编码功能

> ID：11742310
> 
> 赞同：2
> 
> 时间：2012-07-31T14:21:25.443
> 
> 标签：cryptography, progress-4gl, openedge, crc16

有谁知道**Progress *10.1C***在**编码**函数中使用了哪种算法？

我发现了这个： http: [//knowledgebase.progress.com/articles/Article/21685](http://knowledgebase.progress.com/articles/Article/21685)

> *Progress 4GL* **ENCODE**函数使用CRC ***-16***算法生成其编码输出。

进度 4GL：

```
ENCODE("Test"). 
```

给出输出“ *LkwidblanjsipkJC* ”

但是例如在[http://www.nitrxgen.net/hashgen/](http://www.nitrxgen.net/hashgen/)上使用密码“*测试*”，我**从来没有**从进度中得到结果。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-03T05:51:14.000

我已经在[https://github.com/pvginkel/ProgressEncode](https://github.com/pvginkel/ProgressEncode)上提供了该算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-17T14:09:36.133

我需要 Java 中的这个函数。所以我将 Pieter 的 C# 代码 ( [https://github.com/pvginkel/ProgressEncode](https://github.com/pvginkel/ProgressEncode) ) 移植到了 Java。至少所有测试用例都通过了。享受！:)

```
public class ProgressEncode {

    static int[] table = { 0x0000, 0xC0C1, 0xC181, 0x0140, 0xC301, 0x03C0,
            0x0280, 0xC241, 0xC601, 0x06C0, 0x0780, 0xC741, 0x0500, 0xC5C1,
            0xC481, 0x0440, 0xCC01, 0x0CC0, 0x0D80, 0xCD41, 0x0F00, 0xCFC1,
            0xCE81, 0x0E40, 0x0A00, 0xCAC1, 0xCB81, 0x0B40, 0xC901, 0x09C0,
            0x0880, 0xC841, 0xD801, 0x18C0, 0x1980, 0xD941, 0x1B00, 0xDBC1,
            0xDA81, 0x1A40, 0x1E00, 0xDEC1, 0xDF81, 0x1F40, 0xDD01, 0x1DC0,
            0x1C80, 0xDC41, 0x1400, 0xD4C1, 0xD581, 0x1540, 0xD701, 0x17C0,
            0x1680, 0xD641, 0xD201, 0x12C0, 0x1380, 0xD341, 0x1100, 0xD1C1,
            0xD081, 0x1040, 0xF001, 0x30C0, 0x3180, 0xF141, 0x3300, 0xF3C1,
            0xF281, 0x3240, 0x3600, 0xF6C1, 0xF781, 0x3740, 0xF501, 0x35C0,
            0x3480, 0xF441, 0x3C00, 0xFCC1, 0xFD81, 0x3D40, 0xFF01, 0x3FC0,
            0x3E80, 0xFE41, 0xFA01, 0x3AC0, 0x3B80, 0xFB41, 0x3900, 0xF9C1,
            0xF881, 0x3840, 0x2800, 0xE8C1, 0xE981, 0x2940, 0xEB01, 0x2BC0,
            0x2A80, 0xEA41, 0xEE01, 0x2EC0, 0x2F80, 0xEF41, 0x2D00, 0xEDC1,
            0xEC81, 0x2C40, 0xE401, 0x24C0, 0x2580, 0xE541, 0x2700, 0xE7C1,
            0xE681, 0x2640, 0x2200, 0xE2C1, 0xE381, 0x2340, 0xE101, 0x21C0,
            0x2080, 0xE041, 0xA001, 0x60C0, 0x6180, 0xA141, 0x6300, 0xA3C1,
            0xA281, 0x6240, 0x6600, 0xA6C1, 0xA781, 0x6740, 0xA501, 0x65C0,
            0x6480, 0xA441, 0x6C00, 0xACC1, 0xAD81, 0x6D40, 0xAF01, 0x6FC0,
            0x6E80, 0xAE41, 0xAA01, 0x6AC0, 0x6B80, 0xAB41, 0x6900, 0xA9C1,
            0xA881, 0x6840, 0x7800, 0xB8C1, 0xB981, 0x7940, 0xBB01, 0x7BC0,
            0x7A80, 0xBA41, 0xBE01, 0x7EC0, 0x7F80, 0xBF41, 0x7D00, 0xBDC1,
            0xBC81, 0x7C40, 0xB401, 0x74C0, 0x7580, 0xB541, 0x7700, 0xB7C1,
            0xB681, 0x7640, 0x7200, 0xB2C1, 0xB381, 0x7340, 0xB101, 0x71C0,
            0x7080, 0xB041, 0x5000, 0x90C1, 0x9181, 0x5140, 0x9301, 0x53C0,
            0x5280, 0x9241, 0x9601, 0x56C0, 0x5780, 0x9741, 0x5500, 0x95C1,
            0x9481, 0x5440, 0x9C01, 0x5CC0, 0x5D80, 0x9D41, 0x5F00, 0x9FC1,
            0x9E81, 0x5E40, 0x5A00, 0x9AC1, 0x9B81, 0x5B40, 0x9901, 0x59C0,
            0x5880, 0x9841, 0x8801, 0x48C0, 0x4980, 0x8941, 0x4B00, 0x8BC1,
            0x8A81, 0x4A40, 0x4E00, 0x8EC1, 0x8F81, 0x4F40, 0x8D01, 0x4DC0,
            0x4C80, 0x8C41, 0x4400, 0x84C1, 0x8581, 0x4540, 0x8701, 0x47C0,
            0x4680, 0x8641, 0x8201, 0x42C0, 0x4380, 0x8341, 0x4100, 0x81C1,
            0x8081, 0x4040 };

    public static byte[] Encode(byte[] input) {
        if (input == null)
            return null;
        byte[] scratch = new byte[16];
        int hash = 17;
        for (int i = 0; i < 5; i++) {
            for (int j = 0; j < input.length; j++)
                scratch[15 - (j % 16)] ^= input[j];
            for (int j = 0; j < 16; j += 2) {
                hash = Hash(scratch, hash);
                scratch[j] = (byte) (hash & 0xFF);
                scratch[j + 1] = (byte) ((hash >>> 8) & 0xFF);
            }
        }
        byte[] target = new byte[16];
        for (int i = 0; i < 16; i++) {
            byte lower = (byte) (scratch[i] & 0x7F);
            if ((lower >= 'A' && lower <= 'Z') || (lower >= 'a' && lower <= 'z'))
                target[i] = lower;
            else
                target[i] = (byte) (((scratch[i] >>> 4 & 0xF) + 0x61) & 0xFF);
        }
        return target;
    }

    private static int Hash(byte[] scratch, int hash) {
        for (int i = 15; i >= 0; i--)
            hash = ((hash >>> 8) & 0xFF ^ table[hash & 0xFF] ^ table[scratch[i] & 0xFF]) & 0xFFFF;
        return hash;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:02:03.543

CRC-16 有多种实现方式。Progress Software（故意）没有记录使用的变体。

你找这个的目的是什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T20:30:03.533

我建议不要尝试使用“编码”，而是研究 OE 的加密功能。我不确定 10.1C 支持什么，我说 OE 支持的 11.0 文档：

```
• DES — Data Encryption Standard
• DES3 — Triple DES
• AES — Advanced Encryption Standard
• RC4 — Also known as ARC4 
```

OE PDF 文档可在此处获得：http: [//communities.progress.com/pcom/docs/DOC-16074](http://communities.progress.com/pcom/docs/DOC-16074)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T11:14:46.977

ENCODE 函数的工作方式只有一种。Progress 从未披露其背后的算法。另外，他们从未内置过解码功能。

与 OE 10.0B 一样，Progress 已在 ABL 中实施了密码学。看看 ENCRYPT 和 DECRYPT 函数。

# python - Django：dictsort 不适用于整数字段

> ID：11742315
> 
> 赞同：1
> 
> 时间：2012-07-31T14:21:40.307
> 
> 标签：python, django, django-templates

我的一个模型中有这个字段

```
 sort_id = models.IntegerField(_('Sort Order'), default=1000) 
```

在我的模板中，我正在尝试使用此字段对列表进行排序

```
 {% for item in list|dictsort:"sort_id" %} 
```

但是，在这种情况下，for 循环不会输出任何内容（但也不会引发任何错误）。如果我使用另一个模型字段作为 dictsort 的参数，则输出不为空并且按预期排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:10:27.260

原来我没有重新定义“get_flatpages”标签来指向我自己的模型，所以我得到了库存的 Django 平面页面（没有我的自定义字段）。更改模板标签定义修复了它。

# design-patterns - 为数据转换、验证选择正确的设计模式

> ID：11742324
> 
> 赞同：0
> 
> 时间：2012-07-31T14:22:04.097
> 
> 标签：design-patterns, refactoring

我有以下架构。

1.  从用户那里获取数据
2.  验证数据
3.  将数据存储在数据库中

为简化起见，我们假设数据的类型为 Invoice。我已将 Invoice 定义为接口

```
发票 （） {
获取发票 ID ();
获取发票金额（）；
...
……
}

```

在我的一个实现中，来自用户的输入是 xml，另一个是 json。类似地，我有两个数据库，一个将发票存储为 xml，另一个存储为 json

所以我两次实现 Invoice 接口

```
发票Xml () {
xml _invoiceData;
getInvoiceId() {
返回_invoiceData.id；
}

发票Json () {
json _invoiceData;
getInvoiceId() {
返回_invoiceData.id；
}

```

现在我的主类接受 Invoice 接口的一个实例。

```
main（验证器验证器，DAO 数据库）
{
   发票发票 = inputs.getInvoice();
   if (invoice instanceOf InvoiceXml {
    验证器.validateXml（发票）；
    db.insertXml（发票）；
   }
   else //与 Json 类似
}

```

现在我担心的是验证器和 db 实际上都需要发票的 json/xml 表示，但由于我只依赖 Invoice 接口，我必须在将 Invoice 传递给 validate 和 db 之前对其进行向下转换。

我不确定如何以更好的方式设计它。我正在考虑将 Invoice 接口更改为 POJO，但 Invoice 上有很多字段（getInvoiceId 和 getInvoiceAmount 是常用的），因此我必须在内部仅将发票存储为 xml 或 json 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:32:15.910

一种方法可能是向接口添加`validate`方法`Invoice`并在实现`InvoiceXml`和`InvoiceJson`. 但这合并了两个概念：模型和验证。另一种与方法接口`Validator`的方法`validate`是与模型分离并实现两个特定于数据源的验证方法。

# java - 如何 - 在其中加载带有格式化 sql 的属性文件？

> ID：11742325
> 
> 赞同：3
> 
> 时间：2012-07-31T14:22:07.053
> 
> 标签：java, sql, properties-file

我的应用程序需要外部化查询，因此为了使用默认资源包，我决定使用属性文件中的查询。所以，这是一个属性文件现在的样子：

```
SELECT_USER_QUERY = Select username, userid from user where userid=?

INSERT_USER_QUERY = insert into user values (?,?) 
```

这里的问题显然不是一个阻碍 - 这个属性文件被拾取并得到很好的处理，但是对于在不久的将来进行编辑的人来说，它看起来很难看。我想要这样的东西：

```
SELECT_USER_QUERY = select username, userid
                    from user
                    where userid=? 
```

我想在我的属性文件中看到这种格式。我认为解决它的一种方法是在每行的末尾引入一个“\”（根据 SO 上的一些答案）。有没有其他方法可以在属性文件中保留格式并仍然成功加载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:27:40.843

只需在行尾添加 \ 即可，不能将其解释为换行符。没有其他方法可以在属性文件中保留格式（换行符）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:28:10.910

没有理由将自己限制在属性文件中。为什么不简单地将上述内容存储在一个文本文件中，并为每个查询/语句提供一个（比如说）一个文本文件？这样人们就可以编辑文本文件，而不必担心属性样式的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:24:41.297

好的。我认为一种解决方法（我很可能会这样做）是将所有查询写入属性文件，但每个查询值跨越多个格式化行。我将使用自定义 ResourceBundle 以自定义方式加载这些属性。这样，我可以确保属性文件中有格式，并且还可以使用 ResourceBundle 以代码方式加载属性。

# xml - 了解黑莓上的 XMLDemo 并在富豪榜上显示来自 XML 的数据

> ID：11742330
> 
> 赞同：1
> 
> 时间：2012-07-31T14:22:17.657
> 
> 标签：xml, blackberry

我看不到 XMLDemo 代码如何显示所有节点？

```
 // Constants -----------------------------------------------------------------------------------
    private static final int _tab = 4;

    /**
     * This constructor parses the XML file into a W3C DOM document, and displays it 
     * on the screen.
     * 
     * @see Document
     * @see DocumentBuilder
     * @see DocumentBuilderFactory
     */
    XMLDemoScreen() 
    {
        setTitle( new LabelField( "XML Demo" , LabelField.ELLIPSIS | LabelField.USE_ALL_WIDTH ) );

        try 
        {
            // Build a document based on the XML file.
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            InputStream inputStream = getClass().getResourceAsStream( _xmlFileName );
            Document document = builder.parse( inputStream );

            // Normalize the root element of the XML document.  This ensures that all Text 
            // nodes under the root node are put into a "normal" form, which means that 
            // there are neither adjacent Text nodes nor empty Text nodes in the document.
            // See Node.normalize().
            Element rootElement = document.getDocumentElement();
            rootElement.normalize();

            // Display the root node and all its descendant nodes, which covers the entire
            // document.
            displayNode( rootElement, 0 );
        } 
        catch ( Exception e ) 
        {
            System.out.println( e.toString() );
        }
    }

    /**
     * Displays a node at a specified depth, as well as all its descendants.
     * 
     * @param node The node to display.
     * @param depth The depth of this node in the document tree.
     */
    private void displayNode( Node node, int depth ) 
    {        
        // Because we can inspect the XML file, we know that it contains only XML elements
        // and text, so this algorithm is written specifically to handle these cases.  
        // A real-world application will be more robust, and will handle all node types. 
        // See the entire list in org.w3c.dom.Node.      
        // The XML file is laid out such that each Element node will either have one Text 
        // node child (e.g. <Element>Text</Element>), or >= 1 children consisting of at 
        // least one Element node, and possibly some Text nodes.  Start by figuring out
        // what kind of node we're dealing with.
        if ( node.getNodeType() == Node.ELEMENT_NODE ) 
        {
            StringBuffer buffer = new StringBuffer();
            indentStringBuffer( buffer, depth );
            NodeList childNodes = node.getChildNodes();
            int numChildren = childNodes.getLength();
            Node firstChild = childNodes.item( 0 );

            // If the node has only one child and that child is a Text node, then it's of 
            // the form  <Element>Text</Element>, so print 'Element = "Text"'.
            if ( numChildren == 1 && firstChild.getNodeType() == Node.TEXT_NODE ) 
            {
                buffer.append( node.getNodeName() ).append( " = \"" ).append( firstChild.getNodeValue() ).append( '"' );
                add( new RichTextField( buffer.toString() ) );
            } 
            else 
            {
                // The node either has > 1 children, or it has at least one Element node child. 
                // Either way, its children have to be visited.  Print the name of the element
                // and recurse.
                buffer.append( node.getNodeName() );
                add( new RichTextField( buffer.toString() ) );

                // Recursively visit all this node's children.
                for ( int i = 0; i < numChildren; ++i ) 
                {
                    displayNode( childNodes.item( i ), depth + 1 );
                }
            }
        } 
        else 
        {
            // Node is not an Element node, so we know it is a Text node.  Make sure it is 
            // not an "empty" Text node (normalize() doesn't consider a Text node consisting
            // of only newlines and spaces to be "empty").  If it is not empty, print it.
            String nodeValue = node.getNodeValue();
            if ( nodeValue.trim().length() != 0 ) 
            {
                StringBuffer buffer = new StringBuffer();
                indentStringBuffer( buffer, depth );
                buffer.append( '"' ).append( nodeValue ).append( '"' );
                add( new RichTextField( buffer.toString() ) );
            }
        }
    }

    /**
     * Adds leading spaces to the provided string buffer according to the depth of 
     * the node it represents.
     * 
     * @param buffer The string buffer to add leading spaces to.
     * @param depth The depth of the node the string buffer represents.
     */
    private static void indentStringBuffer( StringBuffer buffer, int depth ) 
    {
        int indent = depth * _tab;

        for ( int i = 0; i < indent; ++i ) 
        {
            buffer.append( ' ' );
        }
    }
} 
```

我试图理解它，但我认为 for 循环只能显示一个节点的子节点，而不是所有节点。例如在此代码上

```
<annuaire>
<personne >
      <image>p0.jpg</image> 
      <nom>test0</nom> 
      <tirtre>test0</tirtre>
      <Tel>5555550</Tel>
      <email>test0@xml.ma</email>
</personne>

<personne >
      <image>p1.jpg</image> 
      <nom>test</nom> 
      <tirtre>test</tirtre>
      <Tel>555555</Tel>
      <email>test@xml.ma</email>
</personne>
</annuaire> 
```

我认为代码只会显示儿童的第一个节点人员。

因为我需要在 RichList 上显示它们，所以我试图从黑莓上给出的这个示例中获得灵感。但我不知道如何，所以我试图理解代码。非常感谢您的帮助。

# svn - cvs2svn转换失败，状态=1

> ID：11742331
> 
> 赞同：1
> 
> 时间：2012-07-31T14:22:27.120
> 
> 标签：svn, cvs, cvs2svn

我正在使用 cvs2svn 将一堆 cvs 文件从我的存储库转换为 svn。现在在大多数情况下它只是非常缓慢，但它会去那里。我的主要问题是一些文件显示了这样的错误输出。

错误：命令 'cvs -q -R -f -d C:\CVSRepo co -r1.2 -p HEAD/xxx/xx/Afile.java' 失败，退出状态 =1

和以下输出：

cvs checkout：找不到模块'HEAD/xxx/xx/afile'-忽略

现在我可以看到文件显示得很好，但我无法超越那个颠覆。它在第 16 步总是在同一个号码上。我不知道该怎么做，任何建议或建议将不胜感激和欢迎:)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T19:18:17.260

我以前没见过这个问题。我有两个猜测和两个建议：

猜测 1：您有一个名为“HEAD”的目录这一​​事实使 CVS 感到困惑，其中“HEAD”表示主分支。作为测试，请尝试重命名该目录，然后进行转换。

猜测 2：您正在使用 CVS 模块，当 CVS 尝试从存储库中提取文件内容时，它们会混淆 CVS。作为测试，请尝试删除“模块”文件，然后进行转换。

建议 1：确保您使用的是最新版本的 cvs2svn 并尝试使用 --use-internal-co（完全绕过 CVS）。

建议 2：将您的问题提交给 cvs2svn 用户邮件列表，在那里进行对话更容易。

# coldfusion - CFWheels - 查询分页上的 DeObfuscate ID？

> ID：11742335
> 
> 赞同：2
> 
> 时间：2012-07-31T14:22:33.020
> 
> 标签：coldfusion, railo, deobfuscation, cfwheels

我在我的应用程序中混淆了 URL（这很棒），但我想为分页 URL 禁用此功能，因为我希望用户能够输入他们喜欢的任何数字。

设置.cfm：

```
<cfset set(obfuscateURLs = true) /> 
```

Home.cfc（控制器）：

```
<cffunction name="home">

        <cfparam name="params.page" default="1" />

        <cfset linkList = model("link").findAll(
            select="linkTitle,linkPoints,linkID,linkAuthority,linkCreated,linkUpVoteCount,linkDownVoteCount,linkCommentCount,userName,userID",
            include="user", 
            order="linkPoints DESC",
            handle="linkListPaging",
            page=params.page,
            perPage=5
        ) />

    </cffunction> 
```

Home.cfm（查看）

```
<ul class="pagination">
            <cfoutput>
                #paginationLinks( 
                    route="paginateLatest", 
                    handle="linkListPaging",
                    page=1,
                    name="page", 
                    windowSize=5, 
                    prependToPage="<li>", 
                    appendToPage="</li>", 
                    classForCurrent="current"
                )#
            </cfoutput>
        </ul> 
```

我可以根据需要进行 DeObfuscate 吗？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:27:39.720

混淆参数的设置是一个孤注一掷的交易。正如您不能为 覆盖此行为一样`linkTo()`，您也不能为任何一个覆盖它`paginationLinks()`。

我建议构建一个插件，因为我打赌将来会有其他开发人员想要这个。可能有一种方法可以告诉控制器不要混淆/反混淆名为`page`. 您需要更新`urlFor()`控制器在处理传入请求时的工作方式以及去混淆的方式。您还可以考虑提供一个配置选项，用于`set()`将一组`params`密钥“列入黑名单”，使其永远不会被混淆（`page`默认情况下）。

# extjs - ExtJS 3.4：网格不会自动保存和恢复状态。我究竟做错了什么？

> ID：11742338
> 
> 赞同：4
> 
> 时间：2012-07-31T14:22:42.577
> 
> 标签：extjs, extjs3

我有一个带有 stateful:true、stateId 的 Ext 3.4 网格，并且列模型中的每一列都有一个 id。

然而，当我调整列的大小时，我看不到任何保存的状态 cookie，并且在重新加载页面时不会恢复列宽。我确实有一个定义了 cookie 提供程序的状态管理器，我可以通过状态管理器设置/获取 cookie 值就好了。

我还为 beforestatesave 和 statesave 添加了处理程序，它们正在被调用，但仍然 - 没有保存 cookie，也没有恢复状态。这些处理程序也被传递了正确的参数 - 列参数在转储到控制台时显示正确的更新宽度。

我的问题是：我做错了什么吗？我不应该期望这是自动的吗？我真的必须使用这些状态事件来手动保存和恢复状态吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T01:10:35.583

我自己也遇到了这个问题，在拉了大约 2 个小时的头发后我才弄清楚了。

你碰巧有一个相当大的网格吗？如果 cookie 数据超过 4k，如果你有 20+ 列数据，它很容易做到，它不会保存。它也不会出错。

我想这里唯一的其他选择是去不同的州提供者。我将看看 Saki 慷慨提供的httpProvider[作为](http://www.extjs.eu)[替代](http://www.extjs.eu/docs/?class=Ext.ux.state.HttpProvider)方案。

编辑：

我试图覆盖提供程序并在保存 cookie 时删除字符串转义。这将尺寸减小了约 50%。不过，我在尝试恢复时似乎无法使用它。我确信 Ext 作者这样做是有原因的，否则它没有意义，因为它使 cookie 膨胀了很多。这么多的黑客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:56:09.037

为了使 GridPanel 有状态，我只是在配置中添加了 stateful: true 并在创建任何对象之前设置了我的提供程序

```
Ext.state.Manager.setProvider(new Ext.state.CookieProvider({
   expires: new Date(new Date().getTime()+(1000*60*60*24*30)) // 30 days
})); 
```

我没有测试它是否记住宽度，但尝试移动列和排序顺序，看看它们是否被记住。

# javascript - 将 / 添加到 URL 的末尾会将用户带到随机页面，而在其他页面上会剥离图像

> ID：11742346
> 
> 赞同：0
> 
> 时间：2012-07-31T14:23:07.050
> 
> 标签：javascript, html, .htaccess, tracking

我在这里的一个网站上工作：

现在，如果您在 URL 的末尾添加 /，图像就会消失，这意味着我不能将 Google Adwords 跟踪代码放在任何 URL 的末尾：

它会将您带到一个完全不同的页面，这是它应该显示的页面：

即使您只在末尾添加 / ，它也会将您带到另一个页面！

任何人都看到过这个，任何修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:35:58.037

因为您的网站 URL 以`.aspx`and not结尾，所以`.html`您不需要`/`之前的`?utm_source`代码和其余代码。

删除`/`所有跟踪代码将解决您的问题。

关于在`/`您的网站 URL 末尾（斜杠）导致您网站中的图像消失的事实，请阅读以下内容：

> 不应在带有文件扩展名的 URL 中添加尾部斜杠（即不应使用[http://example.com/post/Nikon-Lens-Rentals.aspx/](http://example.com/post/Nikon-Lens-Rentals.aspx/)）。
> 
> 除了根路径之外，是否应该在没有扩展名的 URL 中添加尾部斜杠是有争议的。如果站点添加了斜杠，则站点需要考虑用户或引用者未提供斜杠的场景，并且站点需要执行301重定向到相应的URL。

当您在任何 aspx 页面的末尾附加斜杠时，它不会生成 404，而是显示没有任何 CSS 或图像的同一页面，因为 IIS 将文件视为文件夹而不是页面。

# c++ - 编译 boost::math 的性能测试应用程序

> ID：11742347
> 
> 赞同：0
> 
> 时间：2012-07-31T14:23:09.850
> 
> 标签：c++, boost, build

有没有人成功编译了 boost::math 库的性能测试应用程序？链接： http: [//www.boost.org/doc/libs/1_50_0/libs/math/doc/sf_and_dist/html/math_toolkit/perf/perf_test_app.html](http://www.boost.org/doc/libs/1_50_0/libs/math/doc/sf_and_dist/html/math_toolkit/perf/perf_test_app.html)

我尝试通过在目录中运行 b2 进行编译，但出现了很多错误（超过 222000 行）。

前几行错误：

```
../test/erf_data.ipp:6:74: error: wrong number of template arguments (1, should be 2)
In file included from ../../../boost/math/tools/rational.hpp:13:0,
                 from ../../../boost/math/special_functions/log1p.hpp:18,
                 from ../../../boost/math/special_functions/gamma.hpp:35,
                 from test_erf.cpp:9:
../../../boost/array.hpp:60:11: error: provided for ‘template<class T, long unsigned int N> class boost::array’
In file included from test_erf.cpp:13:0:
../test/erf_data.ipp:6:80: error: template argument 1 is invalid
../test/erf_data.ipp:6:91: error: invalid type in declaration before ‘=’ token
../test/erf_data.ipp:7:38: error: ‘SC_’ was not declared in this scope
../test/erf_data.ipp:7:88: error: ‘SC_’ was not declared in this scope
In file included from test_erf.cpp:13:0:
../test/erf_data.ipp:7:136: error: ‘SC_’ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T23:03:38.080

好吧，我让它正确编译和链接，但它不是 b2。我知道 OP 要求 b2 但我不熟悉它，所以我提供了一个替代方案。此解决方案假定您已安装 Cmake。（很容易做到，只要问谷歌博士。）

如果你去数学测试地点：

```
~/pathToBoost/libs/math/performance 
```

然后添加一个名为：

```
CMakeLists.txt 
```

具有以下内容：

```
cmake_minimum_required(VERSION 2.8)
find_package(Boost COMPONENTS  REQUIRED)
include_directories(${DEPENDENCY_DIR}/libboost/lib)

add_executable(main main.cpp test_reference.cpp)
target_link_libraries (main ${Boost_LIBRARIES} boost_regex) 
```

然后创建一个名为 build 的文件夹：

```
mkdir build 
```

并建造它。

```
cd build
cmake ..
make 
```

这样做让我成功编译和构建。我从中得到一个名为 main 的程序。

希望这可以帮助。

# c# - 从隔离存储中提取 zip 文件

> ID：11742348
> 
> 赞同：1
> 
> 时间：2012-07-31T14:23:09.613
> 
> 标签：c#, silverlight, windows-phone-7, zip, isolatedstorage

我被这个问题困住了——显然，我做错了什么。

首先，我通过 WebClient 下载一个 zip 文件并将其存储到 IsolatedStorage：

```
using (var isf = IsolatedStorageFile.GetUserStoreForApplication()) 
{ 
    if (!isf.DirectoryExists("AppData")) isf.CreateDirectory("AppData"); 
    using (StreamWriter sw = new StreamWriter(new IsolatedStorageFileStream("AppData\\" + FileName, FileMode.OpenOrCreate, isf))) 
    { 
        sw.Write(new StreamReader(e.Result).ReadToEnd()); 
    } 
} 
```

接下来，我从 WebClient 响应中提取一个特定文件（zip 文件）：

```
Uri fileUri = new Uri("content.txt", UriKind.Relative); 
StreamResourceInfo info = new StreamResourceInfo(e.Result, null); 
StreamResourceInfo streamInfo = System.Windows.Application.GetResourceStream(info, fileUri); 
```

这按预期工作。稍后，我想使用以下方法从 IsolatedStorage 中的 zip 文件中提取“content.txt”：

```
using (IsolatedStorageFileStream isfs = isf.OpenFile("AppData\\" + FileName, FileMode.Open, FileAccess.Read)) 
{ 
    if (myIsolatedStorage.FileExists("AppData\\" + FileName)) 
    { 
        Uri fileUri = new Uri("content.txt", UriKind.Relative); 
        StreamResourceInfo info = new StreamResourceInfo(isfs, null); 
        StreamResourceInfo streamInfo = System.Windows.Application.GetResourceStream(info, fileUri); 
    } 
} 
```

尽管可以找到 zip 存档，但 streamInfo 始终为空。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:48:26.753

不幸的是，与桌面 .Net 框架不同，Windows Phone 7.x 框架不知道如何从压缩文件中流式传输。事实上，在 Windows Phone 上，您根本无法访问 System.IO.Compression 命名空间。

幸运的是，[DotNetZip](http://dotnetzip.codeplex.com/)库适用于 WP7 应用程序。您需要使用 Compact Framework 二进制 DLL，而不是 Silverlight 的。添加引用时，Visual Studio 会抱怨库可能不兼容，但它会正常工作。

# spine.js - SpineJS 可以在更新时阻止 UI 吗？

> ID：11742349
> 
> 赞同：0
> 
> 时间：2012-07-31T14:23:18.733
> 
> 标签：spine.js

声明的 SpineJS 目标之一是使整个 UI 不阻塞（即向用户显示更改，即使它可能尚未在服务器端成功更新）。

它可以以标准的“阻塞”方式使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:00:26.263

是的，它可以。在“回调”下查看：

[http://spinejs.com/docs/ajax](http://spinejs.com/docs/ajax)

您基本上可以在任何时候阻止 UI，而我这样做是为了处理那些不能推迟到服务器的事情。请注意，我什至不使用 ajaxSucess() 事件，而只是使用事件的自定义绑定。这是元编程中的一个示例用例：

```
Bind 'clickHandlerFinish' event to clickHandlerFinishWork()
Bind 'click' event on button a to clickHandler()
User clicks on button a
clickHandler() gets fired
clickHandler disables the button and blocks the UI
clickHandler makes an AJAX call to the server to do work
(Remember UI is still blocked)
AJAX call finally returns, and fires the clickHandlerFinish() callback
clickHandlerFinish() unblocks the UI, re-enables the button, and presents the new changes 
```

我已经在几个实例上成功地使用了它。对我有用！

# java - 泄露的 ServiceConnection Android 文本转语音

> ID：11742350
> 
> 赞同：4
> 
> 时间：2012-07-31T14:23:20.860
> 
> 标签：java, android, text-to-speech, serviceconnection

我有一个在启动时使用文本转语音的应用程序。一切似乎都运行良好，运行应用程序时我没有任何问题。但是，每次应用程序启动时，我都会收到一个 LogCat 错误，提示我的文本到语音转换中有泄漏的 ServiceConnection。尽管目前这不会导致功能出现问题，但如果我继续忽略该错误，我担心将来会发生什么。我怀疑这只是错误的编码，但我没有经验来识别错误的位置。我已经包含了 LogCat 和有问题的 java。

```
07-31 10:16:50.812: E/ActivityThread(27785): Activity com.example.com.proto1.menu has leaked ServiceConnection android.speech.tts.TextToSpeech$1@40d68398 that was originally bound here
07-31 10:16:50.812: E/ActivityThread(27785): android.app.ServiceConnectionLeaked: Activity com.example.com.proto1.menu has leaked ServiceConnection android.speech.tts.TextToSpeech$1@40d68398 that was originally bound here
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:932)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:827)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.ContextImpl.bindService(ContextImpl.java:1109)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.speech.tts.TextToSpeech.initTts(TextToSpeech.java:517)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:483)
07-31 10:16:50.812: E/ActivityThread(27785):    at com.example.com.proto1.menu.onActivityResult(menu.java:255)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.Activity.dispatchActivityResult(Activity.java:4581)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2817)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2864)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.ActivityThread.access$1000(ActivityThread.java:122)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1057)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.os.Looper.loop(Looper.java:132)
07-31 10:16:50.812: E/ActivityThread(27785):    at android.app.ActivityThread.main(ActivityThread.java:4126)
07-31 10:16:50.812: E/ActivityThread(27785):    at java.lang.reflect.Method.invokeNative(Native Method)
07-31 10:16:50.812: E/ActivityThread(27785):    at java.lang.reflect.Method.invoke(Method.java:491)
07-31 10:16:50.812: E/ActivityThread(27785):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
07-31 10:16:50.812: E/ActivityThread(27785):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
07-31 10:16:50.812: E/ActivityThread(27785):    at dalvik.system.NativeStart.main(Native Method)

import java.util.Locale;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Toast;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.support.v4.app.NavUtils;

@SuppressWarnings("unused")
public class mainj extends Activity implements OnInitListener {

    private TextToSpeech myTTS;
    // status check code
    private int MY_DATA_CHECK_CODE = 0;

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loadscreen);
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);
        Thread logoTimer = new Thread() {
            public void run() {
                try {
                    try {
                        sleep(3000);
                        speakWords("main menu loaded");
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    Intent menuIntent = new Intent("android.intent.action.MENU");
                    startActivity(menuIntent);

                }

                finally {
                    finish();
                }
            }

        };
        logoTimer.start();
    }

    // speak the user text
    private void speakWords(String speech) {

        // speak straight away
        if (myTTS != null) {
            myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
        }
    }

    // act on result of TTS data check
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }
    }

}

package com.example.com.proto1;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.speech.RecognizerIntent;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.Toast;
import android.speech.tts.TextToSpeech;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

@SuppressWarnings("unused")
public class menu extends Activity implements TextToSpeech.OnInitListener,
        OnClickListener {

    // defined
    TextToSpeech mTts;
    public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

    // remember to include a listview on the xml or the voice recognition code
    // will not work
    public ListView mList;
    // TTS object
    Button speakButton, infoButton, voiceButton, talkButton;

    // TTS object
    public TextToSpeech myTTS;
    // status check code
    public int MY_DATA_CHECK_CODE = 0;

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected void onCreate(Bundle aboutmenu) {
        super.onCreate(aboutmenu);
        setContentView(R.layout.mainx);

        SpeakingAndroid speak = new SpeakingAndroid();

        VoiceRecognition voiceinput = new VoiceRecognition();

        // get a reference to the button element listed in the XML layout
        speakButton = (Button) findViewById(R.id.btn_speak);
        infoButton = (Button) findViewById(R.id.aboutbutton);
        voiceButton = (Button) findViewById(R.id.voicebutton);
        talkButton = (Button) findViewById(R.id.talk);

        // listen for clicks
        infoButton.setOnClickListener(this);
        speakButton.setOnClickListener(this);
        talkButton.setOnClickListener(this);

        // check for TTS data
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

        // calling method
        voiceinputbuttons();

        // Check to see if a recognition activity is present
        // if running on AVD virtual device it will give this message. The mic
        // required only works on an actual android device//
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(
                RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
        if (activities.size() != 0) {
            voiceButton.setOnClickListener(this);
        } else {
            voiceButton.setEnabled(false);
            voiceButton.setText("Recognizer not present");
        }

    }

    public void quitApp() {
        speakWords("closing app");
        finish();
    }

    public void recogMenu() {
        speakWords("voice recognition menu");
        startActivity(new Intent("android.intent.action.RECOGNITIONMENU"));

    }

    public void informationMenu() {
        speakWords("information screen");
        startActivity(new Intent("android.intent.action.INFOSCREEN"));
    }

    public void mainMenu() {
        speakWords("main menu");
        startActivity(new Intent("android.intent.action.MENU"));
    }

    // creating method
    public void voiceinputbuttons() {
        speakButton = (Button) findViewById(R.id.btn_speak);
        mList = (ListView) findViewById(R.id.list);
    }

    // respond to button clicks
    public void onClick(View v) {
        switch (v.getId()) {

        // use switch case so each button does a different thing
        // accurately(similar to an if statement)
        case R.id.btn_speak:
            String words1 = speakButton.getText().toString();

            // speakwords(xxxx); is the piece of code that actually calls the
            // text to speech
            speakWords(words1);
            Intent voiceIntent = new Intent(
                    "android.intent.action.RECOGNITIONMENU");
            startActivity(voiceIntent);
            break;
        case R.id.aboutbutton:
            String words2 = infoButton.getText().toString();
            speakWords(words2);
            Intent infoIntent = new Intent("android.intent.action.INFOSCREEN");
            startActivity(infoIntent);
            break;
        case R.id.voicebutton:
            speakWords("Speak Now");
            startVoiceRecognitionActivity(); // call for voice recognition
                                                // activity
            break;
        case R.id.talk:
            speakWords("This is the main menu.");
            break;
        }
    }

    // speak the user text
    // setting up the speakWords code
    public void speakWords(String speech) {

        // speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    /**
     * Fire an intent to start the speech recognition activity.
     */
    public void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
                "Speech recognition demo");
        startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    }

    /**
     * Handle the results from the recognition activity.
     */
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == VOICE_RECOGNITION_REQUEST_CODE
                && resultCode == RESULT_OK) {
            // Fill the list view with the strings the recognizer thought it
            // could have heard
            ArrayList<String> matches = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, matches));
            // matches is the result of voice input. It is a list of what the
            // user possibly said.
            // Using an if statement for the keyword you want to use allows the
            // use of any activity if keywords match
            // it is possible to set up multiple keywords to use the same
            // activity so more than one word will allow the user
            // to use the activity (makes it so the user doesn't have to
            // memorize words from a list)
            // to use an activity from the voice input information simply use
            // the following format;
            // if (matches.contains("keyword here") { startActivity(new
            // Intent("name.of.manifest.ACTIVITY")

            if (matches.contains("information")) {
                informationMenu();
            }
            if (matches.contains("info screen")) {
                informationMenu();
            }
            if (matches.contains("info")) {
                informationMenu();
            }
            if (matches.contains("about")) {
                informationMenu();
            }

            if (matches.contains("home")) {
                mainMenu();
            }
            if (matches.contains("menu")) {
                mainMenu();
            }
            if (matches.contains("home screen")) {
                mainMenu();
            }
            if (matches.contains("speak")) {
                startActivity(new Intent("android.intent.action.SPEAK"));
            }
            if (matches.contains("close")) {
                quitApp();
            }
            if (matches.contains("stop")) {
                quitApp();
            }
            if (matches.contains("finish")) {
                quitApp();
            }
            if (matches.contains("voice")) {
                recogMenu();
            }
            if (matches.contains("recognition")) {
                recogMenu();
            }
            if (matches.contains("voice recognition")) {
                recogMenu();

            }

        }

        // still in the onActivityResult: This is for the text to speech part

        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }

        super.onActivityResult(requestCode, resultCode, data);

    }

}

    08-01 08:19:18.942: E/ActivityThread(7310): Activity com.example.com.proto1.menu has leaked ServiceConnection android.speech.tts.TextToSpeech$1@40d68418 that was originally bound here
08-01 08:19:18.942: E/ActivityThread(7310): android.app.ServiceConnectionLeaked: Activity com.example.com.proto1.menu has leaked ServiceConnection android.speech.tts.TextToSpeech$1@40d68418 that was originally bound here
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:932)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:827)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.ContextImpl.bindService(ContextImpl.java:1109)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.speech.tts.TextToSpeech.initTts(TextToSpeech.java:517)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:483)
08-01 08:19:18.942: E/ActivityThread(7310):     at com.example.com.proto1.menu.onActivityResult(menu.java:255)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.Activity.dispatchActivityResult(Activity.java:4581)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2817)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2864)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.ActivityThread.access$1000(ActivityThread.java:122)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1057)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.os.Looper.loop(Looper.java:132)
08-01 08:19:18.942: E/ActivityThread(7310):     at android.app.ActivityThread.main(ActivityThread.java:4126)
08-01 08:19:18.942: E/ActivityThread(7310):     at java.lang.reflect.Method.invokeNative(Native Method)
08-01 08:19:18.942: E/ActivityThread(7310):     at java.lang.reflect.Method.invoke(Method.java:491)
08-01 08:19:18.942: E/ActivityThread(7310):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
08-01 08:19:18.942: E/ActivityThread(7310):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
08-01 08:19:18.942: E/ActivityThread(7310):     at dalvik.system.NativeStart.main(Native Method)

import java.util.ArrayList;
import java.util.List;
import java.util.Locale;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class Infoactive extends Activity implements OnClickListener,
        OnInitListener {

    public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;
    public ListView mList;
    public Button speakButton, about, voicetest;
    // TTS object
    public TextToSpeech myTTS;
    // status check code
    public int MY_DATA_CHECK_CODE = 0;

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.infoscreen);

        // get a reference to the button element listed in the XML layout
        about = (Button) findViewById(R.id.button1);
        voicetest = (Button) findViewById(R.id.button2);
        // listen for clicks
        about.setOnClickListener(this);

        // check for TTS data
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

        voiceinputbuttons();

        // Check to see if a recognition activity is present
        PackageManager pm = getPackageManager();
        List<ResolveInfo> activities = pm.queryIntentActivities(new Intent(
                RecognizerIntent.ACTION_RECOGNIZE_SPEECH), 0);
        if (activities.size() != 0) {
            voicetest.setOnClickListener(this);
        } else {
            voicetest.setEnabled(false);
            voicetest.setText("Recognizer not present");
        }
    }

    // respond to button clicks
    @SuppressWarnings("unused")
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button1:
            // get the text entered
            Button buttonText = (Button) findViewById(R.id.button1);
            String words = buttonText.getText().toString();
            speakWords("EyePhone will help vizoolly impaired users to avoid obstacles, identify faces, and recognize objects.");
            break;
        case R.id.button2:
            speakWords("Speak Now");
            startVoiceRecognitionActivity();
            break;

        }
    }

    // speak the user text
    public void speakWords(String speech) {

        // speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    public void voiceinputbuttons() {
        speakButton = (Button) findViewById(R.id.btn_speak);
        mList = (ListView) findViewById(R.id.list);
    }

    /**
     * Fire an intent to start the speech recognition activity.
     */
    public void startVoiceRecognitionActivity() {
        Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        intent.putExtra(RecognizerIntent.EXTRA_PROMPT,
                "Speech recognition demo");
        startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    }

    /**
     * Handle the results from the recognition activity.
     */
    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (requestCode == VOICE_RECOGNITION_REQUEST_CODE
                && resultCode == RESULT_OK) {
            // Fill the list view with the strings the recognizer thought it
            // could have heard
            ArrayList<String> matches = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            mList.setAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, matches));
            // matches is the result of voice input. It is a list of what the
            // user possibly said.
            // Using an if statement for the keyword you want to use allows the
            // use of any activity if keywords match
            // it is possible to set up multiple keywords to use the same
            // activity so more than one word will allow the user
            // to use the activity (makes it so the user doesn't have to
            // memorize words from a list)
            // to use an activity from the voice input information simply use
            // the following format;
            // if (matches.contains("keyword here") { startActivity(new
            // Intent("name.of.manifest.ACTIVITY")

            if (matches.contains("information")) {
                startActivity(new Intent("android.intent.action.INFOSCREEN"));
            }
            if (matches.contains("info screen")) {
                startActivity(new Intent("android.intent.action.INFOSCREEN"));
            }
            if (matches.contains("info")) {
                startActivity(new Intent("android.intent.action.INFOSCREEN"));
            }
            if (matches.contains("about")) {
                startActivity(new Intent("android.intent.action.INFOSCREEN"));
            }

            if (matches.contains("home")) {
                startActivity(new Intent("android.intent.action.MENU"));
            }
            if (matches.contains("menu")) {
                startActivity(new Intent("android.intent.action.MENU"));
            }
            if (matches.contains("home screen")) {
                startActivity(new Intent("android.intent.action.MENU"));
            }
            if (matches.contains("speak")) {
                startActivity(new Intent("android.intent.action.SPEAK"));
            }
            if (matches.contains("close")) {
                finish();
            }
            if (matches.contains("stop")) {
                finish();
            }
            if (matches.contains("finish")) {
                finish();
            }
            if (matches.contains("voice")) {
                Intent voiceIntent = new Intent(
                        "android.intent.action.RECOGNITIONMENU");
                startActivity(voiceIntent);
            }
            if (matches.contains("recognition")) {
                Intent voiceIntent = new Intent(
                        "android.intent.action.RECOGNITIONMENU");
                startActivity(voiceIntent);
            }
            if (matches.contains("voice recognition")) {
                Intent voiceIntent = new Intent(
                        "android.intent.action.RECOGNITIONMENU");
                startActivity(voiceIntent);

            }

        }
        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }

        super.onActivityResult(requestCode, resultCode, data);

    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T14:34:16.050

你应该`myTTS.shutdown()`在完成后调用它，例如在你的`onDestroy`.

# iphone - 如何修复“发送到实例的无法识别的选择器”

> ID：11742354
> 
> 赞同：0
> 
> 时间：2012-07-31T14:23:34.970
> 
> 标签：iphone, objective-c, ios, xcode4

几天前，我根据在《开始 iOS 4 应用程序开发》一书中看到的滚动视图应用程序创建了一个应用程序。当我触摸文本字段时，滚动视图将巧妙地显示。但是当我触摸另一个文本字段时它总是崩溃。

调试器显示：

```
2012-07-31 21:32:35.721 View-based Application[1515:c07] -[ViewController keyboardDidShow:]: unrecognized selector sent to instance 0x6a3e400
2012-07-31 21:32:35.723 View-based Application[1515:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ViewController keyboardDidShow:]: unrecognized selector sent to instance 0x6a3e400'
*** First throw call stack:
(0x14b2022 0xeb2cd6 0x14b3cbd 0x1418ed0 0x1418cb2 0x9d7a29 0x147d855 0x147d778 0x91c19a 0x3ab845 0xbfe1bc4 0x3a6e01 0x4f757 0x45e49 0x45f34 0xbfe5aac 0x1d8ab54 0x3d93509 0x13e9803 0x13e8d84 0x13e8c9b 0x139b7d8 0x139b88a 0x15626 0x2182 0x20f5)
terminate called throwing an exception(lldb) 
```

我是iOS开发的新手。我真的不知道出了什么问题。这是 viewController.m 代码。也许它有点长。请帮我。如果有人需要完整的代码，我可以发给他。我的邮箱：kururuhuang@gmail.com

```
 #import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize scrollView;

-(void) viewWillAppear:(BOOL)animated{
    //---registers the notifications for keyboard---
    [[NSNotificationCenter defaultCenter]
     addObserver:self 
     selector:@selector(keyboardDidShow:) 
     name:UIKeyboardDidShowNotification 
     object:self.view.window];

    [[NSNotificationCenter defaultCenter]
     addObserver:self 
     selector:@selector(keyBoardDidHide) 
     name:UIKeyboardDidHideNotification 
     object:nil];
}

//---when a TextField view begins editing---
-(void) textFieldDidBeginEditing:(UITextField *)textFieldView{
    currentTextField = textFieldView;
}

//---when the user taps on the return key on the keyboard---
-(BOOL) textFieldShouldReturn:(UITextField *) textFieldView {
    [textFieldView resignFirstResponder];
    return NO;
}

//---when a TextField view is done editing---
-(void) textFieldDidEndEditing:(UITextField *) textFieldView {
    currentTextField = nil;
}

//---when the keyboard appears---
-(void) keyboardDidshow:(NSNotification *) notification {
    if (keyboardIsShown) return;

    NSDictionary* info = [notification userInfo];

    //---obtain the size of the keyboard---
    NSValue *aValue = 
    [info objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGRect keyboardRect = [self.view convertRect:[aValue CGRectValue] fromView:nil];

    NSLog(@"%f", [aValue CGRectValue].size.height);

    NSLog(@"%f",keyboardRect.size.height);

    //---resize the scroll view (with keyboard)---
    CGRect viewFrame = [scrollView frame];
    viewFrame.size.height -= keyboardRect.size.height;
    scrollView.frame = viewFrame;

    //---scroll to the current text field---
    CGRect textFieldRect = [currentTextField frame];
    [scrollView scrollRectToVisible:textFieldRect animated:YES];

    keyboardIsShown = YES;
}

//---when the keyboard disappears---
-(void) keyboardDidHide:(NSNotification *) notification {
    NSDictionary* info = [notification userInfo];

    //---obtain the size of the keyboard---
    NSValue* aValue = [info objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGRect keyboardRect = [self.view convertRect:[aValue CGRectValue] fromView:nil];

    //---resize the scroll view back to the orginal size (without keyboard)---
    CGRect viewFrame = [scrollView frame];
    viewFrame.size.height += keyboardRect.size.height;
    scrollView.frame = viewFrame;

    keyboardIsShown = NO;
}

//---before the View window disapppear--
-(void) viewWillDisappear:(BOOL)animated{
    //---removes the notifications for keyboard---
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                 name:UIKeyboardDidShowNotification
                                                  object:nil];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                     name:UIKeyboardWillHideNotification
                                                  object:nil];
}
- (void)viewDidLoad
{
    scrollView.frame = CGRectMake(0,0,320,460);
    [scrollView setContentSize:CGSizeMake(320, 701)];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:26:14.113

您的方法名称与您注册通知的方法不同。抛出此异常是因为您的类无法识别通知正在调用的方法。

通知：keyboardDid S how 方法声明：keyboardDid s how

请记住，Objective-C 区分大小写。

更改您的方法名称以匹配您作为选择器参数传递的方法，您应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:26:24.613

您似乎有一个错字：

```
-(void) keyboardDidshow:(NSNotification *) notification { 
```

应该

```
-(void) keyboardDidShow:(NSNotification *) notification {
                   ^ 
```

## 编辑

谢谢[@trojanfoe](https://stackoverflow.com/users/299924/trojanfoe) [（和[@jrturton](https://stackoverflow.com/users/852828/jrturton) 11 秒迟到：P）] 指出

```
-(void) keyboardDidhide:(NSNotification *) notification { 
```

应该

```
-(void) keyboardDidHide:(NSNotification *) notification {
                   ^ 
```

# ruby-on-rails - 帖子无法更新

> ID：11742358
> 
> 赞同：0
> 
> 时间：2012-07-31T14:23:45.113
> 
> 标签：ruby-on-rails, ruby, routing, rake

我试图更新一个帖子，它告诉我“目标语言已成功更新”，但实际上只要我点击更新按钮，帖子就会恢复到原来的状态。我在日志中找不到任何错误消息，有人可以帮助我吗？

我运行 rake 路线时的结果

```
 project_target_langs GET    /projects/:project_id/target_langs(.:format)          target_langs#index
                         POST   /projects/:project_id/target_langs(.:format)          target_langs#create
 new_project_target_lang GET    /projects/:project_id/target_langs/new(.:format)      target_langs#new
edit_project_target_lang GET    /projects/:project_id/target_langs/:id/edit(.:format) target_langs#edit
     project_target_lang GET    /projects/:project_id/target_langs/:id(.:format)      target_langs#show
                         PUT    /projects/:project_id/target_langs/:id(.:format)      target_langs#update
                         DELETE /projects/:project_id/target_langs/:id(.:format)      target_langs#destroy
                         POST   /projects/:project_id/target_langs/:id(.:format)      target_langs#update 
```

我的控制器代码

```
def update

    @project = Project.find(params[:project_id])
    @targetLang = @project.targetLangs.find(params[:id])

    respond_to do |format|
      if @targetLang.update_attributes(params[:targetLang])
        format.html { redirect_to project_path(@project), notice: 'Target language was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end 
```

显示.erb

```
<% @project.targetLangs.each do |targetLang| %>

    <%= form_for([targetLang.project, targetLang]) do |f| %>

            <%= f.text_field :language, :class => 'textbox1' %> 
            <%= f.text_field :status, :class => 'textbox1' %>
            <%= f.text_area :notes, :size => "30x2", :class => 'textbox1' %>
            <%= link_to 'Remove', [targetLang.project, targetLang],
                    :data => {:confirm => 'Confirm deletion!'},
                    :method => :delete %>
            <%= link_to 'Update', [targetLang.project, targetLang],
                    :method => :update %> 
```

路线.rb

```
Dashboard::Application.routes.draw do
    resources :projects do
    resources :target_langs
    match '/target_langs/:id' => 'target_langs#update', :via => :post   

 end 
```

我的日志

```
Started POST "/projects/5/target_langs/14" for 127.0.0.1 at 2012-07-31 10:14:58 -0400
Processing by TargetLangsController#update as HTML
  Parameters: {"authenticity_token"=>"kTkBzwah/MylU9N96i+s5lu99PskX28XF0eK1THsHLY=", "project_id"=>"5", "id"=>"14"}
  ←[1m←[35mProject Load (0.0ms)←[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "5"]]
  ←[1m←[36mTargetLang Load (0.0ms)←[0m  ←[1mSELECT "target_langs".* FROM "target_langs" WHERE "target_langs"."project_id" = 5 AND "target_langs"."id"
= ? LIMIT 1←[0m  [["id", "14"]]
  ←[1m←[35m (0.0ms)←[0m  begin transaction
  ←[1m←[36m (0.0ms)←[0m  ←[1mcommit transaction←[0m
Redirected to http://localhost:3000/projects/5
Completed 302 Found in 125ms (ActiveRecord: 0.0ms)
Started GET "/projects/5" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Processing by ProjectsController#show as HTML
  Parameters: {"id"=>"5"}
  ←[1m←[35mProject Load (0.0ms)←[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "5"]]
  ←[1m←[36mTargetLang Load (0.0ms)←[0m  ←[1mSELECT "target_langs".* FROM "target_langs" WHERE "target_langs"."project_id" = 5←[0m
  ←[1m←[35mProject Load (0.0ms)←[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 5 LIMIT 1
  ←[1m←[36mCACHE (0.0ms)←[0m  ←[1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 5 LIMIT 1←[0m
  ←[1m←[35mCACHE (0.0ms)←[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 5 LIMIT 1
  ←[1m←[36mCACHE (0.0ms)←[0m  ←[1mSELECT "projects".* FROM "projects" WHERE "projects"."id" = 5 LIMIT 1←[0m
  ←[1m←[35mCACHE (0.0ms)←[0m  SELECT "projects".* FROM "projects" WHERE "projects"."id" = 5 LIMIT 1
  Rendered projects/show.html.erb within layouts/application (46.9ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 94ms (Views: 93.8ms | ActiveRecord: 0.0ms)

Started GET "/assets/custom.css?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /custom.css - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/projects.css?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /projects.css - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /application.css - 304 Not Modified (31ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /scaffolds.css - 304 Not Modified (15ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/target_langs.css?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /target_langs.css - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /jquery.js - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /jquery_ujs.js - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/projects.js?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /projects.js - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/target_langs.js?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /target_langs.js - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /application.js - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/telelingua.gif" for 127.0.0.1 at 2012-07-31 10:14:59 -0400
Served asset /telelingua.gif - 304 Not Modified (0ms)
[2012-07-31 10:14:59] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:43:43.813

我认为这里有一个简单的问题。

您有两个链接，一个链接到 :delete （我猜它有效），另一个链接到 :update （无效）

简单地说，在 HTML 中，一个`<a>`标签（即`link_to`返回的）不会提交表单。

当您在示例中单击“更新”时，您发送的唯一参数是 id。

相反，你应该说`submit_tag("Update")`

这将提交表单，一切都应该很好。

# android - FQL Facebook API 返回空值

> ID：11742360
> 
> 赞同：0
> 
> 时间：2012-07-31T14:23:51.587
> 
> 标签：android, facebook, facebook-fql

我有代码来获取页面相册的所有照片。

```
String query = "SELECT pid FROM photo WHERE aid='100891649965116_15801'";
Bundle params = new Bundle();
params.putString("method", "fql.query");
params.putString("query", query);
Utility.mAsyncRunner.request(null, params, new FQLRequestListener()); 
```

但是结果总是为空..我认为我的问题是我的应用程序中没有access_token ..如何解决我的问题，你能给我一些示例代码吗，谢谢

活动代码

```
public class TestBActivity extends Activity {
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        facebook.authorizeCallback(requestCode, resultCode, data);
    }

    Facebook facebook = new Facebook("386199591435293");

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        facebook.authorize(this, new DialogListener(){
            @Override
            public void onComplete(Bundle values) { }

            @Override
            public void onFacebookError(FacebookError e) { }

            @Override
            public void onError(DialogError e) { }

            @Override
            public void onCancel() {  }
        });

        Button btt = (Button)findViewById(R.id.button);
        btt.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View arg0) {
                String query = "SELECT pid FROM photo WHERE aid='100891649965116_15801'";
                Bundle params = new Bundle();
                params.putString("method", "fql.query");
                params.putString("query", query);      
                Utility.mAsyncRunner.request(null, params, new FQLRequestListener());               
            }
        });
   }

    public class FQLRequestListener extends BaseRequestListener{
        @Override
        public void onComplete(final String response, final Object state) {
           try {
                JSONArray json = new JSONArray(response);
                Log.d("tag", json.toString());
           } catch (JSONException e) {
                try {
                   JSONObject json = new JSONObject(response);
                   Log.d("tag2", json.toString());
                } catch (JSONException e1) {

                }
            }
        }

        public void onFacebookError(FacebookError error) {

        }
    }
} 
```

# javascript - 在工具提示中使用 Jquery zClip

> ID：11742361
> 
> 赞同：1
> 
> 时间：2012-07-31T14:23:58.433
> 
> 标签：javascript, jquery, tooltip, zeroclipboard, zclip

我一直在寻找，但似乎找不到答案。我正在尝试使用 zClip 将复制按钮添加到工具提示中弹出的文本中。因此，当用户单击工具提示时，将有一个选项可以将显示的文本快速复制到他们的剪贴板。

但我似乎无法让 zClip flash 文件在工具提示中找到复制按钮。我已经尝试调整 css 位置和 z-index，但似乎没有任何效果。

以下是我发布给 qTip2 工具提示的开发者的内容：

[http://jsfiddle.net/fDavN/4211/](http://jsfiddle.net/fDavN/4211/)

他很友好地回应：

[http://jsfiddle.net/fDavN/4256/](http://jsfiddle.net/fDavN/4256/)

但我仍然无法让它工作。有任何想法吗？我也很乐意尝试模态窗口（我相信 Scribd 以这种方式使用 zClip）。我尝试了一个模态窗口，但遇到了同样的问题。

# php - 在 PHP 中使用 2 个条件拆分字符串

> ID：11742366
> 
> 赞同：1
> 
> 时间：2012-07-31T14:24:15.393
> 
> 标签：php, string, explode

我正在使用这个

```
$lines = explode(PHP_EOL, trim($text)); 
```

将 $text 拆分为行数组，以便我可以这样显示：

```
foreach ($lines as $line) {
 echo $line;
} 
```

但现在我想测试每条 $line 的长度，如果长度超过 50 个字符，我想将每行拆分为 50 个字符的倍数。

我怎样才能做到这一点并将所有行保留在 $lines 数组中？

我需要一种方法来测试每一行或使用explode( wordwrap($line), 50 ); 然后重新构建 $lines 数组，以便我可以再次循环所有行。

因为我不是编码员，所以如果必须将一行分成几块 50 个字符，我不知道如何在数组中插入新行。

希望你能理解我的问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:27:15.883

这正是[`chunk_split`](http://php.net/manual/en/function.chunk-split.php)为：

```
echo chunk_split( $line, 50 ); 
```

这会将您`$line`分成多行，每行 50 个字符。

* * *

**在 OP 指定他想要将行拆分为数组中的单个元素后**更新：****

 **```
$temp = explode( PHP_EOL, trim($text) );
$lines = array();

foreach ($temp as $line) {
   $lines = array_merge( $lines, str_split($line, 50) );
} 
```

在此处查看实际操作：http: [//viper-7.com/eRgm6p](http://viper-7.com/eRgm6p)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:32:43.283

您可以使用[`str_split`](http://php.net/manual/en/function.str-split.php)在您的 中进行拆分`foreach`，然后使用[`array_splice`](http://php.net/manual/en/function.array-splice.php)将新元素放入旧元素的位置。

在实践中，它看起来像这样：

```
$lines = explode(PHP_EOL, trim($text));
foreach ($lines as $i => $line) {
    if (strlen($line) > 50) {
        $split = str_split($line, 50);
        $lines = array_splice($lines, $i, 1, $split);
    }
}
reset($lines);
foreach ($lines as $line) {
    echo $line;
} 
```**

# forms - 以 pdf 格式打印表单的特定标签页

> ID：11742371
> 
> 赞同：0
> 
> 时间：2012-07-31T14:24:35.260
> 
> 标签：forms, delphi, pdf, printing

> **可能重复：**
> [打印为 pdf](https://stackoverflow.com/questions/925348/printing-to-pdf)

我需要将 delphi 10 表单的完整选项卡（及其所有组件）打印到 pdf 文件中。所有组件都必须是免费软件，而且用户应该能够在不安装任何 3rd 方应用程序的情况下做到这一点。有人可以帮助我了解基础知识吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:27:09.920

我将提出以下建议：1）CutePDF（第 3 方应用程序）-免费，但仍然是第 3 方 2）使用快速报告编写报告-相信它在 Delphi 中仍然免费/可用，然后将其输出为 PDF-我知道快速报告可以输出为PDF。-D

# java - 使 Android/Java 代码更高效 - 删除重复

> ID：11742373
> 
> 赞同：0
> 
> 时间：2012-07-31T14:24:38.857
> 
> 标签：java, android, json, code-duplication

我有一个像这样的标准 AsyncTask：

```
// starting AsyncTask in onCreate   
new TaskName().execute();

class TaskName extends AsyncTask<String, String, Void> {
    private ProgressDialog progressDialog = new ProgressDialog(Items.this);
    private InputStream is = null;
    private String result = "";

    protected void onPreExecute() {
        progressDialog.setMessage("Loading...");
        progressDialog.show();

        progressDialog.setOnCancelListener(new OnCancelListener() {

            public void onCancel(DialogInterface dialog) {
                TaskName.this.cancel(true);

            }
        });
    }

    @Override
    protected Void doInBackground(String... params) {
        String url_select = "my_link.php";

        param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("Category", Category));

        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url_select);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // read content
            is = httpEntity.getContent();

        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        try {
            BufferedReader br = new BufferedReader(
                    new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line = "";
            while ((line = br.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();

        } catch (Exception e) {
            // TODO: handle exception
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        return null;

    }

    protected void onPostExecute(Void v) {

        try {

            JSONArray jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                item = json_data.getString("item");

                items.add(item);

            }
        } catch (JSONException e1) {
            Toast.makeText(getBaseContext(), "No items!",
                    Toast.LENGTH_SHORT).show();
        } catch (ParseException e1) {
            e1.printStackTrace();
        }

        progressDialog.dismiss();

    }
} 
```

但是，我发现自己有三个几乎相同的 AsyncTasks 在做同样的事情。访问 PHP 文件，解析 JSON 并打印 JSON。

我搜索了一段时间，看看是否有可以使用的标准类，但我找不到。有没有办法让这更有效，所以我不会重复这么多次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:35:52.920

也许这会有所帮助，我不确定这是否是您要问的。

我不确定是否有类似的东西，但您当然可以开发一种基于模式的机制。例如，您可以创建一个名为 DoInAsyncTask 的接口，其中包含一个方法 doIt。然后让您的 AsyncTask 类在其构造函数中采用其中之一。

然后在 onExecute 方法中，它只是在传递给它的实例上调用 doIt。

然后，将用于解析每个 JSON 字符串的所有专用代码放入一组实现 DoInAsyncTask 接口的不同类中。

然后，您只有一个 AsyncTask 类，所有专门的代码都进入单独的解析类，当您实例化您拥有的一个 AsyncTask 类时，您只需传入正确的类。

很难写，希望这是有道理的，这就是你要问的。

# android - Android：将此对象设为 Parcelable

> ID：11742374
> 
> 赞同：2
> 
> 时间：2012-07-31T14:24:42.467
> 
> 标签：android, hashtable, android-activity, parcelable

我有一个需要在 2 之间传递的对象`Activity`。该对象具有 HashTable、String[] 等。无法弄清楚如何使其成为 Parcalebale，以便我可以填充对象的数组并将单个 obj 或数组传递给其他 Activity。我的课是：

```
 public class TrainRoute  { // implements Parcelable
private String RouteName;
private int RouteIndex;

private Context ctx;
private Hashtable<String, String> stationsList;
private String[] stationsNames;
private String[] trainTimings;

private boolean hasSpecialMessages;
private Hashtable<String, String> specialMessages; 

private String firstStation; 
private String CURRENT_ROUTE_PATH;

public TrainRoute(Context ctx, String routeName, int routeIndex, String routeUpOrDownPath, boolean hasSpecialMessages) {
    this.ctx = ctx;
    this.RouteName = routeName;
    this.RouteIndex = routeIndex;
    this.CURRENT_ROUTE_PATH = routeUpOrDownPath;
    this.hasSpecialMessages = hasSpecialMessages;       
}
public String getName() { return RouteName; }
public int getIndex() { return RouteIndex; }

public String[] getStationsNames()
{       
    if(this.stationsList == null)
    {
        String file = this.CURRENT_ROUTE_PATH + "/" + CONSTANTS.SUBPATH_STATIONS + "/" + this.RouteIndex + ".txt";
        String[][] tempList = ResourceReader.GetValues(ctx, file, 2);
        this.stationsList = new Hashtable<String, String>(tempList.length);
        this.stationsNames = new String[tempList.length];
        for(int i=0;i<tempList.length;i++)
        {
            this.stationsList.put(tempList[i][0], tempList[i][1] );
            this.stationsNames[i] = tempList[i][0];
        }
        this.firstStation = this.stationsNames[0];
    }

    return stationsNames;
}

public String[] getTimings(String stationName)
{
    if(this.trainTimings == null)
    {
        String file = this.CURRENT_ROUTE_PATH + "/" + CONSTANTS.SUBPATH_TIMINGS + "/" + this.RouteIndex + ".txt";
        this.trainTimings = ResourceReader.GetLines(ctx, file);

        for(int i=0;i<this.trainTimings.length;i++)
        {
            this.trainTimings[i] = this.trainTimings[i].substring(0, 2) + ":" + this.trainTimings[i].substring(2, 4);
        }
    }

    int minutesFromOrigin =  
        Integer.parseInt(this.stationsList.get(stationName).toString())
        - Integer.parseInt(this.stationsList.get(this.firstStation).toString());

    String[] trainTimingsForStation = new String[this.trainTimings.length];
    for (int i = 0; i < trainTimingsForStation.length; i++) {
        trainTimingsForStation[i] = AddMinutes(this.trainTimings[i], minutesFromOrigin);
    }

    return trainTimingsForStation;
}

public void loadSpecialMessages()
{
    if(this.hasSpecialMessages == true && this.specialMessages == null)
    {
        this.specialMessages = new Hashtable<String, String>();
        String specialMessagesFilePath = this.CURRENT_ROUTE_PATH + "/" + CONSTANTS.SPECIALMESSAGES_FOLDER_NAME + "/" + this.RouteIndex + ".txt";

        String[][] tempSpecialMessages = ResourceReader.GetValues(ctx, specialMessagesFilePath, 2);
        for (int i = 0; i < tempSpecialMessages.length; i++)
        {
            tempSpecialMessages[i][1] = tempSpecialMessages[i][1].replaceAll("\\n", "\n");  //  StringFunctions.replace(tempSpecialMessages[i][1], "\\n", "\n");

            tempSpecialMessages[i][0] = tempSpecialMessages[i][0].substring(0, 2) + ":" + tempSpecialMessages[i][0].substring(2, 4);;

            this.specialMessages.put(tempSpecialMessages[i][0], tempSpecialMessages[i][1]);
        }
    }
}   

public boolean hasSpecialMessage(int trainIndex)
{
    if(this.hasSpecialMessages == true)
    {
        return this.specialMessages.containsKey(this.trainTimings[trainIndex - 1]);
    }
    else
        return false;
}

public String getSpecialMessage(int trainIndex)
{
    return this.specialMessages.get((this.trainTimings[trainIndex - 1]).toString()).toString();
} 
```

在实现 Parcelable 时，我不知道如何在实现的函数中添加对象字段。

由于有这么多的 HashTable、String[]，在这种情况下实施 Serialiazable 是否比 Parcelable 更可取？如果添加 Serializable 那么如何实现相同的 ts 方法。

**编辑：** 在上面的 obj 中，我添加了一个方法：

```
 public Hashtable<String, String> getAllSpecialMessages() {
    return this.specialMessages;
} 
```

我试图将这个 HashTable 从我的 Activity 传递给另一个 Activity ：

```
intent.putExtra("specialMsgs", curTrainRoute.getAllSpecialMessages());

// OTHER ACTIVTY 
    Serializable data = sender.getSerializableExtra("specialMsgs");
    if (data != null) {
        spMsgs = new Hashtable<String, String>((HashMap<String, String>)data);
        Log.i(TAG, " GOT spMsgs : Len = " + spMsgs.size());
        if (spMsgs.size() > 0) {
            java.util.Enumeration<String> keys = spMsgs.keys(); 
            while(keys.hasMoreElements()) {
                Log.i(TAG, "SP= " + spMsgs.get(keys));
            }
        }
    } 
```

在这里，我得到“GOT spMsgs：Len = 4。但在 Log SP= 中，我得到无限空值。为什么找不到通过的 Hashtable 的输入？我还缺少什么？

自过去 2 天以来，我一直在寻找有关此问题的一些指导，但无法弄清楚如何处理此对象。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:54:04.643

终于可以将 Hasttable 传递给其他 Activity 并按原样获得。有了这个，我必须在其他活动中做一些工作，但这不是一个坏主意，也有很多代码需要处理。所以，明白了。

非常感谢提琴手和彼得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:27:49.300

我建议采用另一种方法并将对象编码为 JSON，因为它是从 API 级别 1 内置在 Android 中的，而不是像使用 Parcelable 那样重新发明对象交换格式。

Serializable 的问题在于你不能轻易地将它添加到 Intent 中。

# php - Prestashop：在默认模块中使用自定义钩子而不修改它们的 PHP 文件

> ID：11742383
> 
> 赞同：0
> 
> 时间：2012-07-31T14:25:21.750
> 
> 标签：php, module, overriding, hook, prestashop

我正在开发一个基于 Prestashop (1.5 RC) 最新测试版的项目，因为我需要这个版本中的一些新东西。

在投入生产之前，网站当然会在发布时更新到稳定的 1.5 版本，并计划与以下稳定版本保持同步。

由于设计有点具体，我必须创建自定义挂钩来放置模块。困扰我的是我的模块（尤其是 Prestashop 附带的“默认”模块）在逻辑上没有允许它们放置在我创建的钩子上的所需方法。

我将这些方法添加到他们的 PHP 文件中，但是当 Prestashop（或任何相关模块）更新时，我的更改将被丢弃，我将不得不重新编写它。

有没有办法让这些模块能够放置在我想要的任何钩子上，而无需直接修改它们自己的代码？AFAIK 你不能覆盖一个模块的 PHP 文件，你只能用 TPL、CSS 和 JS 来做。

非常感谢任何帮助。我在 Prestashop 自己的论坛上对相关主题的搜索让我认为你根本无法做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:22:47.037

我通过使用 smarty 插件在主题中的任意位置调用模块钩子函数来解决添加钩子的问题。我在我的博客中写了一篇文章，可能有助于将它们称为[Prestashop 插件](http://www.ecartservice.net/prestashop-articles/1-4-plugins-revisited-part-1/)。显然，代码可以扩展为包含传递附加参数等内容。一旦实现，您可以在 tpl 文件中执行以下操作：

显示（即调用）“Home Featured”模块的 hookHome 函数

```
{plugin module='homefeatured' hook='home'} 
```

显示设置变量的值（方便保存更改的硬编码值！）

```
{psconfig item='PS_SHOP_PHONE'} 
```

最后（就示例而言）显示 CMS 页面的内容：

```
{cmspage id='1'} 
```

创意商店开发者的可能性是无穷无尽的；）

# java - 使用 envers 列出每个实体的最新版本

> ID：11742384
> 
> 赞同：10
> 
> 时间：2012-07-31T14:25:24.083
> 
> 标签：java, sql, hibernate, hibernate-envers

我正在尝试检索尚未删除的**所有实体的最新版本。**使用子选择在 SQL 中执行此操作非常简单：

```
select * from article_aud aud1
where rev in
 (select max(rev) from article_aud aud2
  where aud1.id = aud2.id)
and revtype < 2 
```

但我不知道如何通过 envers API 实现这一点。我从 AuditReader 开始，但没有找到选择不同对象的方法

```
public List<Object[]> findLatestArticleRevisions(){
    List<Object[]> results = (List<Object[]>) getJpaTemplate().execute(new AuditReaderCallback() {
        @Override
        public Object doInAuditReader(AuditReader auditReader) {
            return auditReader.createQuery().forRevisionsOfEntity(Article.class, false, false)
                // TODO select distinct on entities
                .addOrder(new PropertyAuditOrder(new RevisionNumberPropertyName(), false))
                .getResultList();
        }
    });

    return results;
} 
```

**重要**：我想在一个或至少两个查询中执行此操作，因为我有很多文章（实体）有很多修订。

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-11T10:55:59.033

我们需要使用[https://hibernate.atlassian.net/browse/HHH-7827](https://hibernate.atlassian.net/browse/HHH-7827)的修复，即 AuditEntity.revisionNumber().maximize().computeAggregationInInstanceContext()。

```
 AuditQuery query = getAuditReader().createQuery().forRevisionsOfEntity(
            entityClass, false, false);
    query.add(AuditEntity.revisionNumber().le(revision));
    query.add(AuditEntity.revisionNumber().maximize()
            .computeAggregationInInstanceContext());
    query.addOrder(AuditEntity.revisionNumber().desc());
    return query.getResultList(); 
```

另请参阅：

[使用 envers 查找小于或等于给定修订的每个实体的最大修订](https://stackoverflow.com/questions/25723323/find-max-revision-of-each-entity-less-than-or-equal-to-given-revision-with-enver)

[hibernate envers 可以返回特定类型的所有实体的最新版本吗？](https://stackoverflow.com/questions/13532087/can-hibernate-envers-return-the-latest-revision-of-all-entities-of-a-specific-ty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:31:00.463

这将起作用：

```
 public <T extends AbstractPersistentEntity> Number latestRevision(final Class<T> entityClass,
        final long uniqueIdentifier) {
  return hibernateTemplate.execute(new HibernateCallback<Number>() {
     @Override
     public Number doInHibernate(Session session) throws HibernateException, SQLException {
        try {
           Number number = (Number) get(session).createQuery()
                    .forRevisionsOfEntity(entityClass, true, true)
                    .addProjection(AuditEntity.revisionNumber().max())
                    .add(AuditEntity.id().eq(uniqueIdentifier)).getSingleResult();
           if (number != null) {
              logger.debug("max_rev = %s for entity_class %s.%s", number,
                       entityClass.getSimpleName(), uniqueIdentifier);
           }
           return number;
        } catch (javax.persistence.NoResultException e) {
           logger.debug(
                    "unable to find revision number by[entity_class=%s,unique_identifier=%s]",
                    entityClass.getName(), uniqueIdentifier);
        }
        return null;
     }
  }); 
```

}

进而

```
 protected <T extends AbstractPersistentEntity> T loadForRevision(final Class<T> entityClass,
        final long uniqueIdentifier, final Number revisionNumber) {
  return (T) hibernateTemplate.execute(new HibernateCallback<Object>() {
     @Override
     public Object doInHibernate(Session session) throws HibernateException, SQLException {
        T result = get(session).find(entityClass, uniqueIdentifier, revisionNumber);
        return result;
     }
  }); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:05:59.120

尝试添加最大化属性：

```
[your query].add(AuditEntity.revisionNumber().maximize()) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-29T10:39:23.060

@charybr 的答案是有效的，如果你把 parathess 放在正确的地方。只需将要从中选择的子集直接添加到最大化查询部分所需的过滤器。这样，选择语句也将出现在子查询中。

```
 AuditQuery query = auditReader.createQuery()
            .forRevisionsOfEntity(Event.class, true, true);

    query.setFirstResult((pageable.getPageNumber()) * pageable.getPageSize());
    query.setMaxResults(pageable.getPageSize());
    query.add(
                AuditEntity.revisionNumber().maximize()
                .computeAggregationInInstanceContext()
                    .add(AuditEntity.property("critical").eq(true))
             );
    query.getResultList(); 
```

有点晚了，但可能会对某人有所帮助。

# silverlight - Silverlight - 以编程方式解析绑定表达式

> ID：11742388
> 
> 赞同：0
> 
> 时间：2012-07-31T14:25:28.900
> 
> 标签：silverlight, data-binding, controltemplate

有没有办法以编程方式解析绑定表达式？我有一个模板化控件，它有很多我不想公开的复杂内部工作原理。它需要一个列表，并公开一个完整项目视图的模板，以及修改单个项目模板的一些细节。我想在我的控件上有三个属性作为绑定路径，所以我可以公开一个模板，如下所示：

```
<src:MyControl x:Name="MyControl" 
               FullViewTemplate="{StaticResource FullViewTemplate}"
               TopValueBinding="Items[2]"
               BottomValueBinding="Items[6]"
               CategoryBinding="Items[5]"/> 
```

在内部，我想获取整个数据上下文并将其提供给值转换器，这将解决我的可配置绑定路径。像这样的东西：

```
PropertyPath path = new PropertyPath("Items[0]");
var value = Convert.ToDecimal(path.Resolve(dataSource)); 
```

我目前使用属性名称和反射来提取值，但这不具备处理复杂数据类型的灵活性，并且我不想编写大量的解析和反射逻辑来检索字段值。

编辑：或者，能够做这样的事情会很棒：

```
{Binding Path={TemplateBinding BottomValueMember}, Converter={StaticResource ScaleValueConverter}} 
```

但这似乎不起作用。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:52:31.923

所以 - 经过大量挖掘，我用以下代码解决了这个问题：

```
 public class BindingEvaluator : DependencyObject
{
    private static readonly DependencyProperty TargetProperty =
        DependencyProperty.Register(
            "Target",
            typeof(object),
            typeof(BindingEvaluator),
            new PropertyMetadata(null));

    private object Target
    {
        get { return GetValue(TargetProperty); }
        set { SetValue(TargetProperty, value); }
    }

    private static BindingEvaluator _instance = new BindingEvaluator();
    private static BindingEvaluator Instance
    {
        get { return _instance; }
    }

    public static object Eval(Object instance, string path)
    {
        Binding binding = new Binding(path) { Source = instance };

        BindingOperations.SetBinding(Instance, TargetProperty, binding);

        return Instance.Target;
    }
} 
```

归功于这篇文章的答案：[有没有办法使用 PropertyPath 类获取对象的属性值？](https://stackoverflow.com/questions/877171/is-there-a-way-to-get-a-property-value-of-an-object-using-propertypath-class)

现在我只需将整个数据项传入并让转换器处理它。

# c# - C#、Iframes、HTML 模板和合作

> ID：11742392
> 
> 赞同：1
> 
> 时间：2012-07-31T14:25:35.597
> 
> 标签：c#, html, iframe, widget

让我试着把这个问题简单明了。我目前正在开发一个在线播放器小部件。这个小部件将具有“共享”功能，人们可以在其中选择格式（大垂直、中等水平......）然后获取嵌入代码。他们将能够通过单击共享按钮打开的弹出窗口直接预览他们将导出的玩家的行为。

我面临两个问题：

*   首先：所有后面的代码和javascript都可以完美运行，但问题是我不知道如何着手改变外观。直接从后面的代码中编写代码，关于从 get 获得的模式或编写几个 HTML 文件或很多事情在我脑海中嗡嗡作响。你知道最好的解决方案吗？

*   Segundo：在弹出窗口中，我实际上正在调用一个 iframe，显示完全相同的代码，也就是来自小部件的相同小部件，但我面临一些双 ID 并发问题。我希望我的更改应用于 iframe 小部件而不是父小部件。你知道我可以通过哪个技巧避免这种情况吗？

提前致谢，

路易斯

# visual-studio - Visual Studio 2010 错误地使用 Windows SDK v8.0A 路径

> ID：11742394
> 
> 赞同：2
> 
> 时间：2012-07-31T14:25:40.353
> 
> 标签：visual-studio, build, winapi

我最近卸载了 Visual Studio 2013（我认为）开发人员预览版，现在 Visual Studio 2010 开始出现以下错误：

> 错误 1 ​​任务无法使用 SdkToolsPath“”或注册表项“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v8.0A”找到“sgen.exe”。确保设置了 SdkToolsPath，并且该工具存在于 SdkToolsPath 下的正确处理器特定位置，并且安装了 Microsoft Windows SDK C:\tfs_views\Platform\Main\AMC2000\DotNet\Configuration\ConfigModel\ConfigModel\ConfigModel\ConfigModel。 csproj 111 5 配置模型（配置模型\配置模型）

由于自定义构建步骤（[在此处](https://stackoverflow.com/questions/134224/generating-an-xml-serialization-assembly-as-part-of-my-build)描述）

我发现[这个问题](https://stackoverflow.com/questions/2731365/running-msbuild-fails-to-read-sdktoolspath)描述了一个类似的错误。在这种情况下，解决方案是在构建机器上安装 Windows SDK v7.1，但是我已经安装了正确版本的 SDK (v7.1)，Visual Studio 选择使用不正确的版本 (v8.0A) .

如何修复 Visual Studio 以再次使用正确的 SDK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:03:48.180

我设法通过重新安装 Visual Studio 2010 来解决这个问题（尽管这确实花了很长时间）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-07T10:36:03.023

使用的`Platform Toolset` *应该*会影响这一点：您可以在`General`项目属性部分找到它：

[![在此处输入图像描述](../Images/299def5d95895b8b17d91ffaf4967fa4.png)](https://i.stack.imgur.com/AFcc0.png)

# tsql - 连接到带有 freeTDS 错误的 SQL-Azure：从服务器读取失败

> ID：11742395
> 
> 赞同：6
> 
> 时间：2012-07-31T14:25:45.697
> 
> 标签：tsql, azure-sql-database, ubuntu-12.04, freetds

我正在尝试来自 ubuntu 12.04 的 SQl-Azure 数据库。

我已经下载了 freeTDS-0.91 并用 openssl 和 libiconf 编译它（用于 tiny_tds gem）。

当我尝试连接到 sql-azure db 时，出现以下错误：

```
martinr@martinr-DT:~/code/psg-web$ tsql -U Username -P Password -H servername.database.windows.net -p 1433
locale is "en_ZA.UTF-8"
locale charset is "UTF-8"
using default charset "UTF-8"
Error 20004 (severity 9):
    Read from the server failed
OS error 104, "Connection reset by peer"
Error 20002 (severity 9):
    Adaptive Server connection failed
There was a problem connecting to the server 
```

我似乎找不到任何关于导致此错误的原因以及如何解决它。

我可以毫无问题地连接到办公室的 windows 服务器机器上的 ms-sqlserver 实例。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-13T14:45:07.727

对于 azure sql，使用协议版本 8.0（或 7.x）。您可以通过以下方式强制它：

```
TDSVER=8.0 tsql -U Username@servername -P Password -H servername.database.windows.net -p 1433 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:09:49.147

我使用这篇[文章](http://metaskills.net/2009/09/05/the-ultimate-os-x-snow-leopard-stack-for-rails-development-x86_64-macports-ruby-1-8-1-9-sql-server-more/)让它工作。除非您一直在使用 ruby​​ 1.8 并且现在要使用 1.9，否则请务必按照说明进行操作，直到标题为*使用 Ruby 1.9.x 取得额外的里程为止。*在后来的一篇[文章](http://metaskills.net/2010/07/19/a-macport-rubyodbc-update/)中，作者说在运行*sudo port install rb-odbc +* *utf8*时不要使用+utf8，正如他在第一篇文章中所指示的那样。

 *您可以像这样使用*isql*测试连接：

```
isql server Username Password 
```

对于*服务器*，输入您在 odbc.ini 文件中的括号中的名称。*

# c# - 在字典中搜索匹配列表

> ID：11742399
> 
> 赞同：0
> 
> 时间：2012-07-31T14:26:02.540
> 
> 标签：c#, linq, dictionary, compare, predicates

```
public class Filter
{
    public List<int> A { get; set; }
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
}
var f1 = new Filter(){A = new List<int>() {1}}
var f2 = new Filter(){A = new List<int>() {1 , 4, 2}, Start = DateTime.Now, End = DateTime.AddHour(2)}

var dict = new Dictionary<Filter, string>()
dict.Add(new Filter(){A = new List<int>() {1}}, "asdf");
dict.Add(new Filter(){A = new List<int>() {4}}, "qwerty");
dict.Add(new Filter(){A = new List<int>() {3}}, "qwertyasd"); 
```

我需要得到：

先有`f1`项目

`f2`第一个和第二个项目。

如何构造 linq 查询？

什么时候，`A`很`int`简单

```
dict.Where(k =>
k.Key.A.Equals(filter.A)
&& k.Key.Start.CompareTo(filter.Start) > 0 
&& k.Key.End.CompareTo(filter.End) < 0
) 
```

但是当它不是时，`List<int>`它对我来说更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:29:10.770

只需使用[包含](http://msdn.microsoft.com/en-us/library/bb352880.aspx)并反转控件

```
dict.Where(k =>
    filter.A.Contains(k.Key.A[0]) //CONTAINS !
    && k.Key.Start.CompareTo(filter.Start) > 0 
    && k.Key.Start.CompareTo(filter.End) < 0
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:29:23.007

您可以使用[相交](http://msdn.microsoft.com/en-us/library/bb460136.aspx)方法

```
dict.Where(k =>
            k.Key.A.Intersect(filter.A).Any()
            && k.Key.Start.CompareTo(filter.Start) > 0
            && k.Key.End.CompareTo(filter.End) < 0
        ); 
```

编辑：添加`Intersect`，因为涉及两个列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:40:16.963

如果Filter.A的至少一个元素必须匹配dict.Key.A的一个元素，你也可以这样做。

因为我没有看到有一个 List 的兴趣......只有一个 int ！

```
var result = dict.Where(k =>
                           filter.A.Intersect(k.Key.A).Any()); 
```

# haskell - Haskell 多态树总和

> ID：11742405
> 
> 赞同：10
> 
> 时间：2012-07-31T14:26:30.920
> 
> 标签：haskell, tree, functional-programming, sum, polymorphism

我编写了以下代码，用于在 Haskell 中处理多态二叉树，为下周的函数式编程考试做准备：

```
data ITree t = Leaf | Node t (ITree t) (ITree t) 
             deriving (Eq, Ord, Show)

treeSum :: ITree t -> Int
treeSum Leaf = 0
treeSum (Node n t1 t2) = n + (treeSum t1) + (treeSum t2) 
```

现在我遇到了问题，代码无法编译：

```
...\tree.hs:8:26:
Couldn't match type `t' with `Int'
  `t' is a rigid type variable bound by
      the type signature for treeSum :: ITree t -> Int
      at ...\tree.hs:7:1
In the first argument of `(+)', namely `n'
In the first argument of `(+)', namely `n + (treeSum t1)'
In the expression: n + (treeSum t1) + (treeSum t2)
Failed, modules loaded: none.
Prelude> 
```

你知道treeSum有什么问题吗？我认为这与ITree的多态类型有关，但我不知道如何解决这个问题。我是否必须指定类型 t 必须是可以计数/枚举的类型？可能带有这种类型类的类实例？

在此先感谢您的帮助！

西蒙

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T14:30:38.327

编译器无法验证结果是否为`Int`. 就目前而言，您可以`treeSum`使用`ITree Integer`参数调用（并且操作不会产生`Int`）。

尝试将签名更改为`treeSum :: Integral t => ITree t -> t`.

# wpf - PivotItem Header 和 ListPicker 里面

> ID：11742412
> 
> 赞同：1
> 
> 时间：2012-07-31T14:26:50.737
> 
> 标签：wpf, windows-phone-7, listpicker, pivotitem

我面临`ListPicker`内部`PivotItem`标题的问题。如何解决？

我的代码：

```
<controls:PivotItem Name="PivotItemTop">
<controls:PivotItem.Header>    
    <StackPanel Background="#6DA3BD" 
                Margin="-24,-20,-1,0"
                Width="420"
                Name="StackPanelTop">  
        <TextBlock Text="TEST"
                    FontSize="48"
                    Foreground="White"
                    Padding="23,0"/>
        <toolkit:ListPicker Margin="24,0,24,10" 
                            Template="{StaticResource ListPickerTemplate}"
                            Name="ListPickerTop"
                            SelectionChanged="ListPickerTop_SelectionChanged">
        </toolkit:ListPicker>
    </StackPanel>
</controls:PivotItem.Header>

<ListBox Name="ListBoxTop"
                ItemsSource="{Binding TopItems}"
                ItemTemplate="{StaticResource ItemListBox}"/>

</controls:PivotItem> 
```

并填写：

```
ListPickerTop.ItemsSource = new List<string> { "1", "2", "3", "4", "5" }; 
```

请看图片上的结果：

[示例页面。](http://www35.zippyshare.com/v/52464056/file.html)

[问题图片 http://www35.zippyshare.com/i/52464056/9126813/qqqq.png](http://www35.zippyshare.com/i/52464056/9126813/qqqq.png)

# sql - SQL Pivot 具有不同的行数和复合键以形成列

> ID：11742415
> 
> 赞同：4
> 
> 时间：2012-07-31T14:26:51.843
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

SQL pivot 问题有一个转折，请看下表（注意年份和月份是分开的）：

```
CREATE TABLE [dbo].[tbl_BranchTargets]
    (
      [BranchID] [varchar](4) NOT NULL ,
      [Year] [smallint] NOT NULL ,
      [Month] [smallint] NOT NULL ,
      [Target] [int] NULL ,
      CONSTRAINT [PK_tbl_BranchTargets] PRIMARY KEY CLUSTERED ( [BranchID] ASC, [Year] ASC, [Month] ASC ) WITH ( PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON ) ON [PRIMARY]
    )
ON  [PRIMARY] 
```

以及以下虚拟数据：

```
INSERT [dbo].[tbl_BranchTargets] ([BranchID], [Year], [Month], [Target]) VALUES (N'001', 2012, 4, 1)
INSERT [dbo].[tbl_BranchTargets] ([BranchID], [Year], [Month], [Target]) VALUES (N'001', 2012, 5, 117)
INSERT [dbo].[tbl_BranchTargets] ([BranchID], [Year], [Month], [Target]) VALUES (N'001', 2012, 6, 233)
INSERT [dbo].[tbl_BranchTargets] ([BranchID], [Year], [Month], [Target]) VALUES (N'001', 2012, 7, 386)
INSERT [dbo].[tbl_BranchTargets] ([BranchID], [Year], [Month], [Target]) VALUES (N'003', 2012, 4, 2)
INSERT [dbo].[tbl_BranchTargets] ([BranchID], [Year], [Month], [Target]) VALUES (N'003', 2012, 6, 234)
INSERT [dbo].[tbl_BranchTargets] ([BranchID], [Year], [Month], [Target]) VALUES (N'003', 2012, 7, 387) 
```

我将如何像这样对给定的虚拟数据建模（注意年和月键列合并形成 YYYYMM）：

![原始数据](../Images/c5a0c9950a98f8230cd0b7fbb154b2f8.png)

进入这个：

![预期产出](../Images/b2405714a24571281ff0c932207b9f8a.png)

注意 5 月分支 3 的缺失条目，这需要作为 null 处理。例如，在我们的 12 个月中，一个分支可能只有其中 1 个的目标，因此所有其他月份都需要为空。

我已经研究过 PIVOT() 和笨重的光标选项，但我正在努力寻找一种快速的最佳实践方法，我假设我需要实现一些动态 SQL + PIVOT() - 但不能完全明白我的头圆它。

我知道对于动态枢轴，您首先要识别列名（我认为），我可以这样做：

```
DECLARE @Columns AS NVARCHAR(MAX);
DECLARE @StrSQL AS NVARCHAR(MAX); 

SET @Columns = STUFF((SELECT DISTINCT
                            ',' + QUOTENAME(CONVERT(VARCHAR, c.YEAR) + RIGHT('00' + CONVERT(VARCHAR, c.MONTH), 2))
                   FROM     tbl_BranchTargets c
    FOR           XML PATH('') ,
                      TYPE 
            ).value('.', 'NVARCHAR(MAX)'), 1, 1, '') 
```

但是您执行数据透视的方式有点超出我的范围（因为我本质上是合并到关键列以创建最终列） - 在尝试将 YYYY + MM 定义为 1 列中的值的数据透视之前，我是否需要合并数据?

（我使用的是 SQL Server 2008 R2）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:38:23.477

你很亲密。试试这个：

```
DECLARE @Columns AS NVARCHAR(MAX)
DECLARE @StrSQL AS NVARCHAR(MAX)

SET @Columns = STUFF((SELECT DISTINCT
                            ',' + QUOTENAME(CONVERT(VARCHAR(4), c.YEAR) + RIGHT('00' + CONVERT(VARCHAR(2), c.MONTH), 2))
                   FROM     tbl_BranchTargets c
    FOR           XML PATH('') ,
                      TYPE 
            ).value('.', 'NVARCHAR(MAX)'), 1, 1, '') 

SET @StrSQL = '
SELECT *
FROM (SELECT BranchId, 
             CONVERT(VARCHAR(4), [YEAR]) + RIGHT(''00'' + CONVERT(VARCHAR(2), [MONTH]), 2) YearMonth,
             Target
      FROM [dbo].[tbl_BranchTargets]) T
PIVOT(MIN(Target) FOR YearMonth IN ('+@Columns+')) AS PT'

EXEC(@StrSQL) 
```

[这](http://sqlfiddle.com/#!3/db7c7/8)是一个查看结果的sqlfiddle。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T14:38:26.573

你非常接近最终答案。您可以使用[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)类似于以下内容（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6104b/9)）：

```
DECLARE @Columns AS NVARCHAR(MAX)
DECLARE @StrSQL AS NVARCHAR(MAX) 

SET @Columns = STUFF((SELECT DISTINCT
                            ',' + QUOTENAME(CONVERT(VARCHAR(4), c.YEAR) + RIGHT('00' + CONVERT(VARCHAR(2), c.MONTH), 2))
                   FROM     tbl_BranchTargets c
    FOR           XML PATH('') ,
                      TYPE 
            ).value('.', 'NVARCHAR(MAX)'), 1, 1, '') 

set @StrSQL = 'SELECT branchid, ' + @Columns + ' from 
            (
                select branchid
                    , target
                    , CONVERT(VARCHAR(4), [YEAR]) + RIGHT(''00'' + CONVERT(VARCHAR(2), [MONTH]), 2) dt
                from tbl_BranchTargets
           ) x
            pivot 
            (
                sum(target)
                for dt in (' + @Columns + ')
            ) p '

execute(@StrSQL) 
```

这将在执行时创建您想要的列列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T14:36:37.090

您有两个问题 - 构建周期和旋转

这建立了周期...

```
declare @strPeriod nvarchar(1000)
select @strPeriod=N''
select @strPeriod = @strPeriod + ', ['+YearMonth +']'
from
(
     select distinct convert(varchar(4),tbl_BranchTargets.Year)
     + right('0'+convert(varchar(2),tbl_BranchTargets.Month),2) as YearMonth 
     from tbl_BranchTargets
) src

select @strPeriod = substring(@strPeriod, 3,LEN(@strPeriod)) 
```

这是关键

```
declare @sql nvarchar(4000)

select @sql = N'select * from 
     (select BranchID, convert(varchar(4),tbl_BranchTargets.Year)+right(''0''+
     convert(varchar(2),tbl_BranchTargets.Month),2) as YearMonth, Target from tbl_BranchTargets) 
     src 
     PIVOT 
     (sum(target) for YearMonth in ('+@strPeriod+'))p' 

exec (@sql) 
```

# hibernate - Hibernate：条件一对一映射

> ID：11742416
> 
> 赞同：1
> 
> 时间：2012-07-31T14:26:55.377
> 
> 标签：hibernate, eclipselink, moxy

我在 JAXB 和 Hibernate 的帮助下将 XML 保存到数据库。同一级别有两个元素

```
<ElementA id="111-aa>
 <childern/>
</ElementA>

<Relation refId=111-aa">
 <childern/>
</Relation> 
```

如果`ElementA/@id==Relation/@refId`只有这样我必须将 ElementA 的 PK 保存到关系表的 ElementA_FK 列。

> 注意：我正在使用 EclipseLink 的 MOXy 从元素中读取属性。

Hibernate 是否提供基于条件的一对一映射？

笔记

# r - 给ggplot2图加上标签

> ID：11742424
> 
> 赞同：2
> 
> 时间：2012-07-31T14:27:17.590
> 
> 标签：r, ggplot2

我正在尝试向**ggplot2**图形添加标签，这些图形使用`geom_line`. 由于该图有太多的数据点和线性线，它看起来非常混乱。

我想将标签添加到线性行，以便最终用户明确知道哪些行属于哪个服务器等。

我的数据框看起来像这样

```
> z
Hostname    Memory  Date
ServerA         50  2012-01-01 01:00:00
ServerB         30  2012-01-01 01:00:00
ServerC         30  2012-01-01 01:00:00
ServerD         20  2012-01-01 01:00:00
ServerE         80  2012-01-01 01:00:00

ServerA         20  2012-01-02 01:00:00
ServerB         10  2012-01-02 01:00:00
ServerC         5   2012-01-02 01:00:00
ServerD         39  2012-01-02 01:00:00
ServerE         50  2012-01-02 01:00:00

p <- ggplot(z, aes(x=Date, y=Memory, colour=Hostname, size=0.1)) + 
        geom_point(size=0.1) + theme_bw

() + geom_smooth(method = "lm", se=FALSE, size = 1) + 
         theme_bw() + geom_point(size=0.2) 
```

我尝试使用`direct.label(p, "last.points")`or `first.points`，但仍然不够清楚。当我做 last.points 时，标签被剪掉了。

是否可以在线路上放置标签`lm`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:38:58.807

我会更改您原始脚本中的一些设置：我添加了 group=Hostname，并从第一行删除了 size=0.1，在下一行您可以自定义 geom_point（我将其形状更改为 x），然后对于 geom_smooth 函数，您应该使用：aes(group = Hostname)，最后 direct.label() 工作正常。

```
library(ggplot2)  
library(directlabels)  
myplot<-ggplot(z, aes(x=Date, y=Memory, group=Hostname, colour=Hostname))+  
geom_point(size=3, shape=4) +  
geom_smooth(method = "lm", aes(group = Hostname), se=FALSE, size=1)  
myplot<- direct.label(myplot, "last.points") 
```

据我所知，没有预先写好的方法，你应该写自己的“定位方法”，你可以试试这样的东西，其中“斜率”是lm曲线的斜率。（如您所见，它还不是动态的）

```
slope<-c(-30,-20, 60, 50, -40)  
label.above <- list("first.points", rot = slope, hjust = -0.5, vjust = -0.5)  
direct.label(myplot, label.above) 
```

其中 z 是：

```
z<-structure(list(Hostname = structure(c(1L, 2L, 3L, 4L, 5L, 1L, 2L, 3L, 4L, 5L), .Label = c("ServerA", "ServerB", "ServerC", "ServerD", "ServerE"), class = "factor"), Memory = c(50L, 30L, 30L, 20L, 80L, 20L, 10L, 5L, 39L, 50L), Date = structure(c(2L, 2L, 2L, 2L, 2L, 3L, 3L, 1L, 3L, 3L), .Label = c("  2012-01-02 01:00:00", " 2012-01-01 01:00:00", " 2012-01-02 01:00:00"), class = "factor")), .Names = c("Hostname", "Memory", "Date"), class = "data.frame", row.names = c(NA, -10L)) 
```

# c++ - MFC组合框，搜索字体列表

> ID：11742425
> 
> 赞同：0
> 
> 时间：2012-07-31T14:27:20.703
> 
> 标签：c++, mfc, combobox

如何使用 Az keydown 事件在 Combobox 中实现搜索？更糟糕的是，这是工具栏中的 CMFCToolBarButton。

这是带有字体列表的组合B。只需要选择一个按键。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:32:26.213

这是解决方案。工作正常。

```
 void C_dropDlg::OnEditUpdate()
{
    if (!m_bAutoComplete) 
      return;

  // Get the text in the edit box
      CString str;
      MyDropDown.GetWindowText(str);
      int nLength = str.GetLength();

      // Currently selected range
      DWORD dwCurSel = MyDropDown.GetEditSel();
      WORD dStart = LOWORD(dwCurSel);
      WORD dEnd   = HIWORD(dwCurSel);

  // Search for, and select in, and string in the combo box that is prefixed
  // by the text in the edit box
      if (MyDropDown.SelectString(-1, str) == CB_ERR)
      {
          SetWindowText(str);       // No text selected, so restore what was there before
          if (dwCurSel != CB_ERR)
            MyDropDown.SetEditSel(dStart, dEnd);   //restore cursor postion
      }

  // Set the text selection as the additional text that we have added
          if (dEnd < nLength && dwCurSel != CB_ERR)
              MyDropDown.SetEditSel(dStart, dEnd);
          else
              MyDropDown.SetEditSel(nLength, -1);

}
    // TODO: Add your control notification handler code here

BOOL C_dropDlg::PreTranslateMessage(MSG* pMsg)
{
    // Need to check for backspace/delete. These will modify the text in
    // the edit box, causing the auto complete to just add back the text
    // the user has just tried to delete. 

    if (pMsg->message == WM_KEYDOWN)
    {
        m_bAutoComplete = TRUE;

        int nVirtKey = (int) pMsg->wParam;
        if (nVirtKey == VK_DELETE || nVirtKey == VK_BACK)
            m_bAutoComplete = FALSE;
        if(nVirtKey == VK_ESCAPE)
        {

        }
    }

    return CDialogEx::PreTranslateMessage(pMsg); 
```

}

我失去了与解决方案的链接，但感谢作者。

不要忘记在 Base 类中定义 m_AutoComplete！

# html - 用于 HTML5 浏览器的 SVG 或 Canvas？

> ID：11742426
> 
> 赞同：0
> 
> 时间：2012-07-31T14:27:30.260
> 
> 标签：html, canvas, graph, svg

如果最低浏览器支持是 IE9、Chrome 16、FF 13、Safari 5.1.& Opera 10，那么在 HTML/JavaScript 中创建图形的最佳方法是什么？SVG 还是画布？
[谷歌图表](https://developers.google.com/chart/)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:34:04.100

通过[https://stackoverflow.com/a/1651167/138772](https://stackoverflow.com/a/1651167/138772)和[http://dev.opera.com/articles/view/svg-or-canvas-choosing-between-the-two/](http://dev.opera.com/articles/view/svg-or-canvas-choosing-between-the-two/)：

> 您应该将 Canvas 用于：
> 
> *   交互式图像编辑：裁剪、调整大小、过滤器（想想去除红眼、棕褐色、着色等）
> *   生成栅格图形：数据可视化、数据图、渲染分形、函数图。
> *   图像分析：读取像素以收集直方图、颜色使用以及您可以想象的任何其他数据。
> *   渲染游戏图形，例如精灵和背景。
> 
> 您应该将 SVG 用于：
> 
> *   与分辨率无关的 Web 应用程序用户界面。
> *   高度互动的动画用户界面。
> *   数据图表和绘图。
> *   矢量图像编辑。

因此，基本上，如果您想拥有漂亮的矢量图并能够通过 DOM 操作它们，请使用 SVG，但如果您只想绘制它们并且不需要矢量，请使用 Canvas（您可以设置它以便它可以缩放到页面/窗口大小，无论如何）或 DOM 使用情况。不过，我个人推荐 SVG，因为我喜欢矢量图形。

# objective-c - 按钮拉伸错误

> ID：11742434
> 
> 赞同：1
> 
> 时间：2012-07-31T14:27:52.210
> 
> 标签：objective-c, ios

我有这些标签，用户可以点击并展开。由于我认为这是避免[此](https://stackoverflow.com/questions/11524440/how-to-prevent-a-uiview-from-consuming-user-input)问题的正确方法，因此我正在从包含视图中删除选项卡，并在它们展开时将它们添加到窗口中。这似乎导致了一个非常奇怪的错误：在打开选项卡后，按钮正常状态的纹理突然被拉伸。

**前**

![标签都显示正常](../Images/39f7dd013e89248c0c9071750542adb0.png)

**后**

![第一个选项卡已打开和关闭，显示拉伸纹理](../Images/f815ff8bdb8a90f8e2d6a2ec9724cc0b.png)

我做了一些比较广泛的日志记录，显示在打开和关闭动画之前和之后，整个选项卡的框架及其封闭的按钮完全相同：

```
2012-07-31 10:08:33.835 Project[1937:1c103] Button:{{0, 0}, {133, 25}}
2012-07-31 10:08:33.836 Project[1937:1c103] Tab:{{0, 177.333}, {133, 25}}
2012-07-31 10:08:34.340 Project[1937:1c103] Tab done:{{118, 777.5}, {133, 202.5}}
2012-07-31 10:08:34.341 Project[1937:1c103] Button done:{{0, 0}, {133, 25}} 
```

**仅**当我从其包含视图中删除选项卡并将其添加到窗口时才会出现此问题。如果我在其包含的视图中为选项卡设置动画，则纹理不会弄乱。

我在这里完全不知所措。

这是我创建标签纹理和按钮的代码：

```
tabImg = [[UIImage imageNamed:@"tab_stretchable"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 25, 15)];
CGRect tabFrame = frame;
tabFrame.origin.x = 0;
tabFrame.origin.y = 0;
tabButton = [[UIButton alloc] initWithFrame:tabFrame];
[tabButton setBackgroundImage:tabImg forState:UIControlStateNormal];
[tabButton addTarget:self action:@selector(tabPressed:) forControlEvents:UIControlEventTouchUpInside];
[self addSubview:tabButton]; 
```

`frame`此时是`{{0, 177.333}, {133, 25}}`

**编辑**

此外，按下按钮时的纹理保持正常，只有按钮的“正常”状态才会出现纹理混乱。

**编辑2**

这是一个基本示例的 git 存储库的所有墨水，它仍然重现了我的问题：

[https://github.com/starphoenix/TabBug2.git](https://github.com/starphoenix/TabBug2.git)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:01:09.853

所以让我试一试。用户点击选项卡，这是一个自定义按钮。然后该按钮突出显示。当按钮在此操作中途时，它会从一个视图中拉出并放入另一个视图中。

因此，乍一看，我建议您不要在有任何突出显示的机会时将一个按钮从视图中拉出并将其添加到窗口中，而是将旧按钮的不透明度设置为 0，并添加一个您希望它配置与旧按钮相同的新按钮。因此，您将不断创建新按钮并为旧按钮设置动画（然后丢弃）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:38:18.740

经过一些进一步的测试，问题似乎只出在我的模拟器上。该错误不会出现在实际设备上

# python - Python 提交表单

> ID：11742435
> 
> 赞同：1
> 
> 时间：2012-07-31T14:27:59.013
> 
> 标签：python, forms, submit

我想使用 python 在网页上填写并提交表单。

这种形式：

```
<form method="POST" id="login" action="site/enter.php" >
  <input type="text" placeholder="Login" name="login" class="login" tabindex="1">
  <input type="password" placeholder="Password" name="psw" class="password" tabindex="2">
  <input type="submit" class="btn_auth" value="" title="Enter" tabindex="3">
</form> 
```

但是做不到。我放置登录并通过，但无法模拟提交按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:44:43.190

使用 selenium 的 Webdriver 来驱动网页比使用 mechanize 之类的东西要容易得多。特别是如果页面是动态创建的。

您需要安装硒。`pip install selenium`应该管用。您还需要安装 Firefox 版本。

```
from selenium import webdriver

browser = webdriver.Firefox()
browser.implicitly_wait(5)
browser.get('http://some_url.com')
browser.find_element_by_id('login').send_keys('your_login') 
browser.find_element_by_name('pws').send_keys('your_password')
browser.find_element_by_class_name('btn_auth').click() 

print browser.page_source
browser.close() 
```

# tfs - 在 .NET 代码中设置 WorkItemTrackingCacheRoot 而不是 web.config

> ID：11742438
> 
> 赞同：1
> 
> 时间：2012-07-31T14:28:04.503
> 
> 标签：tfs, tfs-sdk

我在 Web 应用程序中使用 TFS WIT，我目前正在 web.config 中为工作项（由 TFS API 使用）设置缓存文件夹

我想在代码中设置它，因为我想使用来自 Path.GetTempFolderPath 的用户默认临时文件文件夹路径。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:44:54.847

这可能是您正在寻找的答案吗？

（从[这里](http://berg-henry.blogspot.com/2010/07/connecting-to-tfs2010-from-webpart.html)）

应用程序设置可以在`web.config`或以编程方式创建

`web.config`：

```
<appSettings> <!-- Add reference to TFS Client Cache -->
   <add key="WorkItemTrackingCacheRoot" value="C:\TFSClientCache" />
</appSettings> 
```

代码：

```
if (WebConfigurationManager.AppSettings["WorkItemTrackingCacheRoot"] == null || WebConfigurationManager.AppSettings["WorkItemTrackingCacheRoot"] == String.Empty)
{
   WebConfigurationManager.AppSettings["WorkItemTrackingCacheRoot"] = System.IO.Path.GetTempPath() + "TFSClientCache";
} 
```

# javascript - 如何禁用 jqgrid 中已发布行的内联和表单编辑

> ID：11742441
> 
> 赞同：0
> 
> 时间：2012-07-31T14:28:13.027
> 
> 标签：javascript, jqgrid

我正在寻找一种方法来禁用 jqGrid 行的编辑，其中 isPosted 列的值为 true。

使用操作格式化程序或双击行中的表单和内联编辑。需要禁用各种编辑。我在 jqGrid loadcomplete 中尝试了下面的代码。

这不会禁用表单编辑。还双击发布的行显示保存和取消按钮（所有列都处于只读模式）。

如何为发布的行禁用所有类型的行编辑？jqGrid 由远程 jqson 数据填充。

```
 loadCompete: function () {
    var
      postedCol = getColumnIndexByName($grid, 'isPosted'),
      cRows = $grid[0].rows.length,
      iRow,
      row,
      className,
      isPosted,
      cm = $grid.jqGrid('getGridParam', 'colModel'),
      l,
      iActionsCol = getColumnIndexByName($grid, '_actions');

    l = cm.length;
    for (iRow = 0; iRow < cRows; iRow = iRow + 1) {
            row = $grid[0].rows[iRow];
            className = row.className;
            isPosted = false;
            if ($.inArray('jqgrow', className.split(' ')) > 0) {
              isPosted = $(row.cells[postedCol]).find(">div>input:checked").length > 0;
              if (isPosted) {
                    if ($.inArray('jqgrid-postedrow', className.split(' ')) === -1) {
                        // todo: how to disable row editing and inline edit actions buttons.
                        // why those two lines do not disable
                        row.className = className + ' jqgrid-postedrow not-editable-row';
                        $(row.cells[iActionsCol]).attr('editable', '0'); 
                        $(row.cells[iActionsCol]).find(">div>div.ui-inline-del").hide();
                        $(row.cells[iActionsCol]).find(">div>div.ui-inline-edit").hide();
                    }
                }
            }
        }

css file:

.jqgrid-postedrow
{
    background-color: #FFFFD0;
    background-image: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:16:01.390

@Andrus，您可以在gridComplete 或LoadComplete 上检查isPosted 的值，如果它是真的，只需使用jquery 隐藏编辑按钮，您可以使用开发人员工具获取这些按钮的ID 对吗？

我有一个类似的要求，在某些行中我必须显示编辑按钮，而在某些行中我必须根据 jqgrid 中的数据隐藏它们。

所以我使用开发人员工具获得了这些按钮的 ID，并在 loadComlete 中检查了所有行的值并隐藏了按钮。我认为这也适合你。并谈论 onSelectRow 或 onDblClickRow 检查 isPosted 的值，如果它是真的，你应该从你的函数中返回 false 否则用这样的东西进行正常编辑

jQuery("#grid_id").editRow(id, properties);

# c# - 如何设置查询字符串中的变量

> ID：11742442
> 
> 赞同：2
> 
> 时间：2012-07-31T14:28:20.550
> 
> 标签：c#, javascript, jquery, xml

我想在查询字符串中设置变量，比如

```
new XAttribute("onclick", "javascript:document.location.href='/Controller/Action

?a=Va&b=Vb&c=Vc';"), 
```

这里 Va、Vb 和 Vc 是变量。但是，如果我这样写，然后单击按钮而不是传递 Va、Vb 和 Vc 值，它会将这些作为字符串传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:30:12.443

您必须退出引号才能引用该变量。

```
new XAttribute("onclick", "javascript:document.location.href='/Controller/Action

?a=" + Va + "&b=" + Vb + "&c=" + Vc+ "';"), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:31:59.157

我假设您想要来自 JavaScript 而不是服务器端的变量。

```
new XAttribute("onclick", "function(){window.location.href='/Controller/Action?a=' + Va + '&b=' + Vb + '&c=' + Vc;};"), 
```

如果你想要它在服务器端，它是简单的字符串 concat

```
new XAttribute("onclick", "window.location.href='/Controller/Action?a="+Va+"&b="+Vb+"&c="+Vc+"';"), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:31:59.930

```
new XAttribute("onclick", "javascript:document.location.href='/Controller/Action?a="+Va+"&b="+Vb+"&c="+Vc+"';"), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:39:38.150

```
new XAttribute("onclick", string.Format("javascript:document.location.href='/Controller/Action 

?a={0}&b={1}&c={2}';", Va, Vb, Vc)); 
```

# email - 如何区分outlook 2003（或更早版本）的user-agent和IE open的区别？

> ID：11742443
> 
> 赞同：3
> 
> 时间：2012-07-31T14:28:22.703
> 
> 标签：email, outlook, user-agent

当我使用 webbug 技术来跟踪电子邮件打开和检测电子邮件客户端时，我能够通过用户代理字符串来判断 Outlook 版本，但仅限于 Outlook 2007 及更高版本。（通过键码 MSOFFICE 12 和 MSOFFICE 14）当我查看 Outlook 2003 的字符串并与 IE 浏览器上的打开比较时，它看起来非常相似。是否有任何关键字可以区分这两个用户代理字符串？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-25T18:11:13.157

Unfortunately, you can't tell from the user-agent String. On an old Windows XP virtual machine with Outlook 2003 and IE 8 installed, I get those two string:

**Outlook 2003:**

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0) 
```

**Internet Explorer 8:**

```
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0) 
```

**What you might do:**

Add an image inside of a conditional comment, only targeting outlook 2003 and track this image additionally to your other tracking. Then you might combine the two of them to identify old Outlook versions.

Or you have to treat all IE7 user-agent strings as Outlook 2003 asuming, that it is much more likely, that a user is using an old Outlook 2003 version than using the IE7 to view your emails.

# php - PHP将unicode转换为十六进制

> ID：11742444
> 
> 赞同：4
> 
> 时间：2012-07-31T14:28:28.267
> 
> 标签：php, unicode, hex

一个应用程序希望我将字符串插入为`text encoded using hex values in proper coding.`，编码为`Unicode_No_Compression`

例如，对于`Sześć siedem`正确的 HEX 字符串是`0053007A0065015B0107002000730069006500640065006D`,
`Źdźbło`= `01790064017A00620142006F`
`String with no special chars` =`0053007400720069006E0067002000770069007400680020006E006F0020007300700065006300690061006C002000630068006100720073`

我尝试使用 MySQL `HEX()`/`UNHEX()`和`dechex()`PHP，但无法弄清楚如何进行这种转换。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T14:34:08.920

我猜，您实际上是在查看 UCS-2 编码的十六进制版本。所以：

```
php > echo strtoupper(bin2hex(iconv('UTF-8', 'UCS-2', 'Źdźbło')));
01790064017A00620142006F 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:32:19.890

试试这个：

```
$out = implode("",array_map(function($x) {return sprintf("%04X",ord($x));},str_split($in))); 
```

一个班轮；）

# c# - 将 dataGridView 行导出到 Excel 或 SQL Server 数据库的最快方法是什么

> ID：11742446
> 
> 赞同：7
> 
> 时间：2012-07-31T14:28:43.770
> 
> 标签：c#, datagridview, streamwriter

在不使用 Microsoft Office 互操作的情况下，将 460328 - 800328 范围内的 DataGridView 行导出到 Excel 或 SQL Server 数据库表的最快方法是什么，因为互操作非常慢且占用系统资源很重？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T14:53:50.800

对于导出到 Excel，如果您不使用基于 XML 的 2007 或 2010，Interop 几乎是唯一的方法。不过也没有名气那么差。我将列出一些解决方案。

# 1 到 Excel

首先向您的项目添加一个 Microsoft.Office.Interop.Excel 组件引用。这应该在 Project -> Add Reference 中的 .NET 选项卡下。将 using 语句添加到您的表单中：

> 使用 Excel = Microsoft.Office.Interop.Excel；

添加一个按钮控件，并将此代码添加到它的主体：

```
 private void btnExport_Click(object sender, EventArgs e)
    {

        Excel.Application app = new Excel.Application();
        app.Visible = true;
        Excel.Workbook wb = app.Workbooks.Add(1);
        Excel.Worksheet ws = (Excel.Worksheet)wb.Worksheets[1];
        // changing the name of active sheet
        ws.Name = "Exported from gridview";

        ws.Rows.HorizontalAlignment = HorizontalAlignment.Center;
        // storing header part in Excel
        for (int i = 1; i < dataGridView1.Columns.Count + 1; i++)
        {
            ws.Cells[1, i] = dataGridView1.Columns[i - 1].HeaderText;
        }

        // storing Each row and column value to excel sheet
        for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
        {
            for (int j = 0; j < dataGridView1.Columns.Count; j++)
            {
                ws.Cells[i + 2, j + 1] = dataGridView1.Rows[i].Cells[j].Value.ToString();
            }
        }

        // sizing the columns
        ws.Cells.EntireColumn.AutoFit();

        // save the application
        wb.SaveAs("c:\\output.xls",Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlExclusive , Type.Missing, Type.Missing, Type.Missing, Type.Missing);

        // Exit from the application
       app.Quit();
    }
} 
```

# 2 - 到 SQL Server

这不需要互操作。为了便于使用，请将您的 List 对象传递给执行插入的事件。如果您将表格设置为与您的网格视图列相对应，这很容易。在这里，我使用存储过程。

```
 private void btnToSQL_Click(object sender, EventArgs e)
    {
        string connStr = @"Data Source=(local)\sqlexpress;Initial Catalog=rTALIS;Integrated Security=True";
        var cn = new SqlConnection(connStr);
        var cm = new SqlCommand("exec usp_InsertRecord", cn);
        cm.CommandType = System.Data.CommandType.StoredProcedure;
        try
        {
            cn.Open();
            foreach (Row r in rows)
            {
                cm.Parameters.Clear();
                cm.Parameters.AddWithValue("@Number1", r.Number1);
                cm.Parameters.AddWithValue("@Number2", r.Number2);
                cm.Parameters.AddWithValue("@Number3", r.Number3);
                cm.Parameters.AddWithValue("@Number4", r.Number4);
                cm.Parameters.AddWithValue("@Number5", r.Number5);
                cm.Parameters.AddWithValue("@Number6", r.Number6);
                cm.Parameters.AddWithValue("@Number7", r.Number7);
                cm.Parameters.AddWithValue("@Date1", r.Date1);
                cm.ExecuteNonQuery();
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        finally
        {
            cn.Close();
        }
    } 
```

让我知道我是否需要为你调整这个。在原始示例中，我有 List rows = new List(); 在 form_Load 方法中声明。这适用于该解决方案，但现在它的范围太有限了。我已将它向上/移出到类中，以便可以在表单上的任何位置调用 in（特别是 btnToSQL_Click）。我在下面评论了它：

```
 List<Row> rows = new List<Row>();

    private void Form1_Load(object sender, EventArgs e)
    {
        //var rows = new List<Row>();  //limited scope
        var sr = new StreamReader(@"C:\so_test.txt");
        while (!sr.EndOfStream)
        {
            string s = sr.ReadLine();
            if (!String.IsNullOrEmpty(s.Trim()))
            {
                rows.Add(new Row(s));
            }
        }
        sr.Close();
        dataGridView1.DataSource = rows;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-20T13:40:58.100

对于转移到 Excel，这是我发现的最快的方法（尽管它确实使用 Office InterOp）。循环遍历 DataGridView 中的每个单元格并将其分配给对象数组。然后将整个数组分配给 Excel 范围。这比单独为每个 Excel 单元格赋值要快得多，因为它只调用一次 InterOp。请原谅VB：

```
Sub Export()
    Dim xlApp As New Excel.Application
    Dim wb As Excel.Workbook = xlApp.Workbooks.Add
    Dim ws As Excel.Worksheet = wb.Worksheets(1)
    Dim dgv as DataGridView = MyDataGridView

    Dim ExportArray(dgv.Rows.Count, dgv.Columns.Count - 1) As Object
    Dim j, i As Integer

    For j = 0 To dgv.Columns.Count - 1
        ExportArray(0, j) = dgv.Columns(j).Name
        For i = 1 To dgv.Rows.Count
            ExportArray(i, j) = dgv(j, i - 1).Value
        Next
    Next

    Dim col As String = ColNumtoLetter(j)
    ws.Range("A1:" & col & i).Value = ExportArray
End Sub

Private Function ColNumtoLetter(ByVal iCol As Integer) As String
    Dim Result As String = ""

    Dim iAlpha As Integer = Int(iCol / 26.001)
    Dim iRemainder As Integer = iCol - (iAlpha * 26)

    If iAlpha > 0 Then
        Result = Chr(iAlpha + 64)
    End If
    If iRemainder > 0 Then
        Result = Result & Chr(iRemainder + 64)
    End If

    Return Result
End Function 
```

第二种方法只是将最终的列号转换为相应的 Excel 列名。

有关详细信息，请参阅“[从数据集快速导出到 Excel](http://www.codeproject.com/Articles/21519/Fast-Exporting-from-DataSet-to-Excel) ”和“[更快地将数据导出到 Excel](http://www.codeproject.com/Articles/26303/Export-Data-to-Excel-Much-Faster) ”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-25T01:20:46.917

签出[在没有办公室的情况下从 C# 创建 Excel 文件，](https://stackoverflow.com/questions/2654932/create-excel-files-from-c-sharp-without-office)因为这指的是使用运行良好的[EPPlus](http://epplus.codeplex.com/) - 我能够从数据表创建我的 CSV 数据，并在内存中批量加载 Excel 文件以流出。只需几行代码。变量 csvData 是所有 csvData 的字符串值。

```
 using( ExcelPackage pck = new ExcelPackage( ) )
    {
      //Create the worksheet
      ExcelWorksheet ws = pck.Workbook.Worksheets.Add( "Sheet1" );

      // set the delimiter
      etf.Delimiter = ',';
      etf.EOL = "\n";
      etf.TextQualifier = "\"";

      //Load the datatable into the sheet, starting from cell A1\. Print the column names on row 1
      ws.Cells["A1"].LoadFromText( csvData, etf );
      return pck.GetAsByteArray( );
   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T14:36:05.833

一种选择是将数据写入 CSV 文件而不是 Excel 文件。之后，Excel 将毫无问题地阅读它。

如果您不熟悉，在 CSV（即逗号分隔）文件中，字段由逗号分隔，行由换行符（`\n`或`\r\n`）分隔。

像（可能无法编译！）：

```
private void WriteData() {
    using (var file = System.IO.StreamWriter(@"C:\Path\To\File.csv")) {
        foreach (var row in dataGrid.Rows) {
             foreach (var cell in row.Cells) {
                 // Note that if some cells contain commas, 
                 // you'd need to wrap them in quotes.
                 file.Write(cell.Value).Write(",");
             }
        }
        file.Write("\n");
    }
} 
```

为了获得更快的性能，最好将几百（或几千）行收集到一个字符串中，然后将其写入文件，而不是逐个单元格地写入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-17T06:22:43.650

这里我使用 DataTable 将数据写入 excel 文件。我认为数据网格视图也与数据表相同。

首先从数据库中获取数据：

```
db.GetData(sqlgetprint); 
```

调用方法是：

```
class DataBaseConnection
{
    private OdbcConnection conn1 = new OdbcConnection(@"FILEDSN=C:/OTPub/Ot.dsn;" + "Uid=sa;" + "Pwd=otdata@123;"); //"DSN=Ot_DataODBC;" + "Uid=sa;" +  "Pwd=otdata@123;"

    //select
    public System.Data.DataTable GetData(string sql)
    {
        try
        {

            conn1.Open();
            OdbcDataAdapter adpt = new OdbcDataAdapter(sql, conn1);
            DataTable dt = new DataTable();
            adpt.Fill(dt);
            conn1.Close();
            return dt;

        }
        catch (Exception ex)
        {
            conn1.Close();
            throw ex;
        }
    }    
} 
```

之后，在您的工作表单中为 DataBaseConncetion 类创建对象

```
 DataBaseConnection db = new DataBaseConnection(); 
```

在您的按钮单击事件中，您可以编写此代码以写入 Excel 文件

```
string sqlgetprint = "SELECT  Service_No,Full_name, Acc_No, OP_date, On_time, Off_time, OP_hours, Payment  FROM   Print_Op ORDER BY Service_No , OP_date";
            DataTable dtall = db.GetData(sqlgetprint);

            SaveFileDialog saveFileDialog1 = new SaveFileDialog();
            saveFileDialog1.Filter = "Excel Documents (*.xls)|*.xls";
            saveFileDialog1.FileName = "Employee Details.xls";

            if (saveFileDialog1.ShowDialog() == DialogResult.OK)
            {
                string fname = saveFileDialog1.FileName;

                StreamWriter wr = new StreamWriter(fname);
                for (int i = 0; i < dtall.Columns.Count; i++)
                {
                    wr.Write(dtall.Columns[i].ToString().ToUpper() + "\t");
                }

                wr.WriteLine();

                //write rows to excel file
                for (int i = 0; i < (dtall.Rows.Count); i++)
                {
                    for (int j = 0; j < dtall.Columns.Count; j++)
                    {
                        if (dtall.Rows[i][j] != null)
                        {
                            wr.Write(Convert.ToString(dtall.Rows[i][j]) + "\t");
                        }
                        else
                        {
                            wr.Write("\t");
                        }
                    }
                    //go to next line
                    wr.WriteLine();
                }
                //close file
                wr.Close();
                if (File.Exists(fname))
                {
                    System.Diagnostics.Process.Start(fname);
                }

            }
        }

        catch (Exception)
        {

            MessageBox.Show("Error Create Excel Sheet!");
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-04T05:16:24.093

这可能是更快的方式，

```
 using Excel = Microsoft.Office.Interop.Excel;

    public static void SaveGridToExcel(DataGridView DGV)
    {

        if (DGV.Rows.Count > 0)
        {
            string filename = "";
            SaveFileDialog SV = new SaveFileDialog();
            SV.Filter = "EXCEL FILES|*.xlsx;*.xls";
            DialogResult result = SV.ShowDialog();

            if (result == DialogResult.OK)
            {

                filename = SV.FileName;
                bool multiselect = DGV.MultiSelect;
                DGV.MultiSelect = true;
                DGV.SelectAll();
                DGV.ClipboardCopyMode = DataGridViewClipboardCopyMode.EnableAlwaysIncludeHeaderText;
                Clipboard.SetDataObject(DGV.GetClipboardContent());
                var results = System.Convert.ToString(Clipboard.GetData(DataFormats.Text));
                DGV.ClearSelection();
                DGV.MultiSelect = multiselect;
                Microsoft.Office.Interop.Excel.Application XCELAPP = null;
                Microsoft.Office.Interop.Excel.Workbook XWORKBOOK = null;
                Microsoft.Office.Interop.Excel.Worksheet XSHEET = null;
                object misValue = System.Reflection.Missing.Value;
                XCELAPP = new Excel.Application();
                XWORKBOOK = XCELAPP.Workbooks.Add(misValue);
                XCELAPP.DisplayAlerts = false;
                XCELAPP.Visible = false;
                XSHEET = XWORKBOOK.ActiveSheet;
                XSHEET.Paste();
                XWORKBOOK.SaveAs(filename, Excel.XlFileFormat.xlOpenXMLWorkbook);
                XWORKBOOK.Close(false);
                XCELAPP.Quit();
                try
                {                      
                    System.Runtime.InteropServices.Marshal.ReleaseComObject(XSHEET);
                    System.Runtime.InteropServices.Marshal.ReleaseComObject(XWORKBOOK);
                    System.Runtime.InteropServices.Marshal.ReleaseComObject(XCELAPP);
                }
                catch { }
            }
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-22T17:39:06.860

对我来说，提高速度的最佳改进就是使用这种方式。

```
private const string connectionString = "OLEDB;Provider=SQLOLEDB.1;Integrated Security=SSPI;Persist Security Info=True;Data Source=MYDBSERVER;Use Procedure for Prepare=1;Auto Translate=True;Packet Size=4096;Workstation ID=SERVERID;Use Encryption for Data=False;Tag with column collation when possible=False;Initial Catalog=DBName"; 

object misValue = System.Reflection.Missing.Value;
Excel.Application xlsApp = new Excel.Application();
Excel.Workbook xlsWorkbook = xlsApp.Workbooks.Add(misValue);
Excel.Worksheet myWS = xlsWorkbook.Sheets[1];

 Excel.ListObject lo = myWS.ListObjects.AddEx(Excel.XlListObjectSourceType.xlSrcQuery, connectionString, true, 
 Excel.XlYesNoGuess.xlGuess, myWS.Range["A5"]);

//A5 is the starting cell

lo.QueryTable.CommandText = "SELECT * FROM TABLE";
lo.Refresh(); 
```

我尝试使用“for”循环（写入每个单元格）的 DataReader/Datatable，但恢复 5800 行（和 40 列）的查询都太慢了。数字：

DataReader - 5:16 分钟
这种方式 - 13 秒

# mysql - 访问包含变量的子查询中的父查询值

> ID：11742448
> 
> 赞同：1
> 
> 时间：2012-07-31T14:28:56.333
> 
> 标签：mysql, subquery

在这方面我已经做了很多环顾四周，并想在我们采取不同的策略之前用尽所有可能性。

以下查询：

```
SELECT 
    node.nid AS nid
FROM
    node node
WHERE
    (node.type in ('new_catalog_master')) 
AND (SELECT 
        status
    FROM
        (SELECT 
            @COST := (SELECT 
                    pm.field_price_matrix_ppu_value
                FROM
                    node n
                INNER JOIN content_type_new_catalog_master ncm ON ncm.nid = n.nid
                INNER JOIN content_type_vendor_price_object vpo ON vpo.field_vpo_product_ref_nid = ncm.nid
                INNER JOIN content_type_price_matrix pm ON pm.nid = vpo.nid
                WHERE
                    ncm.nid = node.nid AND vpo.field_vpo_pref_vendor_value = 'yes' AND pm.field_price_matrix_quantity_value = (SELECT 
                        MAX(ctpm.field_price_matrix_quantity_value)
                    FROM
                        content_type_price_matrix ctpm
                    WHERE
                        ctpm.nid = vpo.nid)),
                @DATA_MARGIN := (SELECT 
                    cs.low
                FROM
                    competitor_stats cs
                WHERE
                    cs.nid = node.nid),
                @SUGGESTED_MARGIN := (1-(@COST/@DATA_MARGIN))*100,
                @MARGIN := (SELECT 
                    ctfmm.field_margin_matrix_gross_margin_value, ctfmm.field_margin_matrix_role_value 
                FROM
                    content_type_flexi_margin_matrix ctfmm
                WHERE
                    ctfmm.nid = node.nid AND ctfmm.field_margin_matrix_role_value = 1),
                @MARGIN_MAX := 5/100,
                (ABS(@SUGGESTED_MARGIN-@MARGIN) > @SUGGESTED_MARGIN*@MARGIN_MAX) AS status
        ) as result); 
```

回报：

```
Unknown column 'node.nid' in 'where clause' 
```

如果我们将 nid 值硬编码到子查询中，则查询会返回一个值。是否可以在子查询中访问 node.nid？

由于某些限制，我们有点需要将子查询保留在 WHERE 子句中。

# javascript - chrome 扩展的上下文菜单中的弹出窗口

> ID：11742449
> 
> 赞同：7
> 
> 时间：2012-07-31T14:28:59.277
> 
> 标签：javascript, google-chrome-extension, contextmenu, popupwindow

我正在开发 chrome 扩展程序并遇到问题。我在 chrome 的上下文菜单中添加了一个项目，如果单击该菜单项，我想打开一个弹出窗口。我的代码如下所示：

```
function popup(url) {
window.open(url, "window", "width=600,height=400,status=yes,scrollbars=yes,resizable=yes");
}

chrome.contextMenus.create({"title": "Tumblr", "contexts":["page","selection","link","editable","image","video","audio"], "onclick": popup('http://example.com')}); 
```

但是这段代码不能按我的意愿工作。单击上下文项后不会出现弹出窗口，而是在 chrome 扩展首选项中刷新扩展后出现。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T15:04:43.300

```
chrome.contextMenus.create({... "onclick": popup('http://example.com')}) 
```

立即调用该`popup`函数，从而打开一个弹出窗口。您必须传递对函数的引用。要使您的代码正常工作，请将函数调用包装在一个函数中：

```
chrome.contextMenus.create({
    "title": "Tumblr",
    "contexts": ["page", "selection", "link", "editable", "image", "video", "audio"],
    "onclick": function() {
        popup('http://example.com');
    }
}); 
```

`window.open()`可用于创建弹出窗口。另一种方法（只是让您知道它存在）是[`chrome.windows.create`](http://code.google.com/chrome/extensions/windows.html#method-create).

# scala - 连接两个不可变映射 - 首选哪些元素？

> ID：11742451
> 
> 赞同：38
> 
> 时间：2012-07-31T14:28:59.907
> 
> 标签：scala, map

当连接两个不可变映射时，似乎右侧操作数的元素将“覆盖”左侧的元素：

```
scala> List((1, 2), (5, 6)).toMap ++ List((5, 9)).toMap
res13: scala.collection.immutable.Map[Int,Int] = Map(1 -> 2, 5 -> 9)

scala> List((5, 9)).toMap ++ List((1, 2), (5, 6)).toMap
res14: scala.collection.immutable.Map[Int,Int] = Map(5 -> 6, 1 -> 2) 
```

我想知道，这是否是 Scala 的规则？

从 Scala API 我无法弄清楚这个问题。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-31T14:31:23.083

是的，这种行为是不变的

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-31T16:23:41.270

`Map.++` [定义为](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/immutable/MapLike.scala)：

```
override def ++[B1 >: B](xs: GenTraversableOnce[(A, B1)]): immutable.Map[A, B1] =
    ((repr: immutable.Map[A, B1]) /: xs.seq) (_ + _) 
```

`repr`您当前的地图在哪里，并`xs.seq`为您提供存储在您传递到的地图中的一系列对/映射`++`。

`Map./:` [被描述为](http://www.scala-lang.org/api/current/scala/collection/immutable/Map.html)：

```
def /:[B](z: B)(op: (B, (A, B)) ⇒ B): B

Applies a binary operator to a start value and all elements of this
immutable map, going left to right.

Note: /: is alternate syntax for foldLeft;
z /: xs is the same as xs foldLeft z. 
```

请注意，未指定“从左到右”对于无序映射的含义。

下面通过使用调试语句重新实现`++`和扩充它来 说明幕后发生的事情：`println`

```
val m1 = Map(1 -> "A", 2 -> "B", 3 -> "C")
val m2 = Map(2 -> "X", 3 -> "Y", 4 -> "Z")

println(m1.repr)
  /* Map(1 -> A, 2 -> B, 3 -> C) */
println(m1.repr.getClass.getName)
  /* scala.collection.immutable.Map$Map3 */

def ++[K, V](ts: Map[K, V], xs: Map[K, V]): Map[K, V] =
  (ts /: xs)  {case (acc, entry) =>
                println("acc = " + acc)
                println("entry = " + entry)
                acc + entry
              }

val m3 = ++(m1, m2)
  /*
    acc = Map(1 -> A, 2 -> B, 3 -> C)
    entry = (2,X)
    acc = Map(1 -> A, 2 -> X, 3 -> C)
    entry = (3,Y)
    acc = Map(1 -> A, 2 -> X, 3 -> Y)
    entry = (4,Z)
  */

println(m3)
  /* Map(1 -> A, 2 -> X, 3 -> Y, 4 -> Z) */ 
```

# java - 代码未在 File 中写入值

> ID：11742453
> 
> 赞同：0
> 
> 时间：2012-07-31T14:29:01.567
> 
> 标签：java, list, arraylist

我正在尝试导出文件。

我的代码如下：

```
import java.io.FileWriter;
import java.io.File;
import java.io.BufferedWriter;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.*;

String appname = "Abc";
String path = "//home/exportfile//";
String filename = path+"ApplicationExport-"+appname+".txt";
String ret = "false";

QueryOptions ops = new QueryOptions();
Filter [] filters = new Filter[1];
filters[0] = Filter.eq("application.name", appname);
ops.add(filters);

List props = new ArrayList();
props.add("identity.name");

//Do search
Iterator it = context.search(Link.class, ops, props);

//Build file and export header row
BufferedWriter out = new BufferedWriter(new FileWriter(filename));
out.write("IdentityName,UserName,WorkforceID,Organization");
out.newLine();          

//Iterate Search Results
if (it!=null)
{                               
        while ( it.hasNext() ) {
                //Get link and create object
                Object [] record = it.next();
                String identityName = (String) record[0];
                Identity user = (Identity) context.getObject(Identity.class, identityName);

                //Get Identity attributes for export
                String workforceid = (String) user.getAttribute("workforceID");                 

                //Get application attributes for export
                String userid="";
                  String org="";
                List links = user.getLinks();
                if (links!=null)
                {
                        Iterator lit = links.iterator();
                        while (lit.hasNext())
                        {
                                Link l = lit.next();
                                String lname = l.getApplicationName();
                                if (lname.equalsIgnoreCase(appname))
                                {
                                          userid = (String) l.getAttribute("User Name");
                                         sailpoint.tools.xml.PersistentArrayList orgList = (sailpoint.tools.xml.PersistentArrayList) l.getAttribute("Organization");

                                }
                        }
                }                               

                //Output file
                out.write(identityName+","+userid+","+workforceid+","+org);                             
                out.newLine();                                                                          
                out.flush();
        }                       
        ret="true";
}
//Close file and return
out.close();
return ret; 
```

代码正在写入除组织列之外的 3 列的值。不知道为什么？

你能帮我找出代码有什么问题吗？或者我错过了什么。

顺便说一句，组织列是多值的，即该列可能有多个值。

所以最终的输出应该是，

```
IdentityName,  UserName,  WorkforceID,  Organization 
1,             abc,       123,          internal
1,             abc,       123,          external 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:30:29.813

字符串 org=""; 是空的。您似乎没有为 org 分配值，因此正在将空值写入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:42:59.440

你定义`org=""`了它会写一个空字符串。

你会得到一个组织列表：

```
sailpoint.tools.xml.PersistentArrayList orgList = (sailpoint.tools.xml.PersistentArrayList) l.getAttribute("Organization"); 
```

该对象可能具有获取所需值的方法，因此您可以执行以下操作：

```
org = orgList.getOrganization(); 
```

当然这只是一个例子，因为我不知道对象的确切结构，使用 IDE 你可以探索这个对象的不同方法并找出你需要的东西。

# java - 为什么 javamail API 有一组消息发件人？

> ID：11742455
> 
> 赞同：0
> 
> 时间：2012-07-31T14:29:07.550
> 
> 标签：java, android, email, jakarta-mail

我需要使用某种端口到 javaMail（链接[在这里](http://code.google.com/p/javamail-android/)）从电子邮件服务器（在我的情况下为 gmail，但将来可能会更改）获取消息，并从中读取一些信息。

我在 API 中注意到的一件事是 getFrom 方法返回一个地址对象数组，如此处[所示](http://docs.oracle.com/javaee/6/api/javax/mail/Message.html#getFrom%28%29)。

我的问题是：在什么情况下这个方法会返回：

1.  无效的
2.  空数组
3.  超过 1 个发件人

?

我所有的电子邮件总是只有一个发件人，无论它发送得多么奇怪（CC，BCC，转发，...）。

他们在那里说“在某些实现中，这可能与实际发送消息的实体不同。” ，那么我怎么能确定谁发送了消息，以及当前的实现是否正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:37:51.233

前两个直接来自api：

（此属性 = 相关电子邮件的“发件人”属性）

1)`This method returns null if this attribute is not present in this message.`

2)`Returns an empty array if this attribute is present, but contains no addresses.`

3) 它检查电子邮件的“发件人”字段并返回地址对象数组，在该字段中找到每个实体一个地址。因此，当列出多个“发件人”时，它将返回一个大小 > 1 的数组

# ms-access - 用于根据字段在另一个表中查找记录的按钮

> ID：11742459
> 
> 赞同：0
> 
> 时间：2012-07-31T14:29:15.177
> 
> 标签：ms-access, vba, ms-access-2010

在我的表单上，我在链接到另一个表（应用程序）中的记录的字段（AppID）旁边有一个按钮。

有没有办法可以设置该按钮以打开应用程序表单并显示 AppID 字段中所述的记录？这会让我的生活更轻松

我正在使用 Access 2010

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:36:31.293

您可以使用 Openform 操作的 Where 参数。

```
 DoCmd.OpenForm "Applications", , , "AppID=" & Me.AppID 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/office/aa141520 (v=office.10).aspx](http://msdn.microsoft.com/en-us/library/office/aa141520(v=office.10).aspx)

# openssl - openssl sha256 差异

> ID：11742460
> 
> 赞同：2
> 
> 时间：2012-07-31T14:29:20.393
> 
> 标签：openssl, sha256

我正在使用 openssl 1.0.1c ， linux x86_64

我正在创建包含“hello”的文件（没有换行符）

*   openssl dgst -sha256 hello_file

> 我得到：*5891b5b522d5df086d0ff0b110fbd9d21bb4fc7163af34d08286a2e846f6be03*

* * *

如果我使用任何其他在线计算（[1](http://www.xorbin.com/tools/sha256-hash-calculator)、[2](http://hash.online-convert.com/sha256-generator)、 3 、 4 、 5 （因为缺乏声誉我不能做更多的超链接）

> 我得到：*2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824*

最令人困惑的部分是，如果我正在尝试使用**“hello（换行符）”**的在线计算器， 那么

> 1 返回：*5891b5b522d5df086d0ff0b110fbd9d21bb4fc7163af34d08286a2e846f6be03*

这正是我使用 openssl 得到的。当所有其他人返回时

> 2、3、4、5 ：*cd2eca3535741f27a8ae40c31b0c41d4057a7a7b912b33b9aed86485d1c84676*

我知道 echo 的新行问题，但我不知道每个文件都附加了新行。**那么如何在没有换行符的情况下获得文件的 sha256 呢？**所有其他计算器有什么问题？

提前致谢

基里尔

* * *

3 convertstring.com/Hash/SHA256

4 webutils.pl/index.php?idx=sha1

5 quickhash.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T18:25:55.847

你是对的，你`hello_file`有一个换行符：

```
$ echo 'hello' > hello_file; openssl sha256 hello_file; xxd hello_file
SHA256(hello_file)= 5891b5b522d5df086d0ff0b110fbd9d21bb4fc7163af34d08286a2e846f6be03
0000000: 6865 6c6c 6f0a                           hello. 
```

删除新行将取决于您的编辑器，如果您的情况与我发现这篇文章时的情况相似，弄乱密码的哈希值，您可以执行以下操作：

```
$ echo -n 'hello' > hello_file; openssl sha256 hello_file; xxd hello_file
SHA256(hello_file)= 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824
0000000: 6865 6c6c 6f                             hello 
```

您可以执行以下操作来删除最后一个字符（或两个）：

```
$ echo "hello" > hello_file; od -c hello_file; truncate hello_file --size=-1; od -c hello_file
0000000   h   e   l   l   o  \n
0000006
0000000   h   e   l   l   o
0000005 
```

看起来好像其他计算器正在附加一个 dos 样式回车 + 新行

```
$ echo -en 'hello\r\n' > hello_file; openssl sha256 hello_file; xxd hello_file
SHA256(hello_file)= cd2eca3535741f27a8ae40c31b0c41d4057a7a7b912b33b9aed86485d1c84676
0000000: 6865 6c6c 6f0d 0a                        hello.. 
```

# objective-c - 在多个类之间传递一个对象，尽可能减少耦合

> ID：11742461
> 
> 赞同：4
> 
> 时间：2012-07-31T14:29:22.043
> 
> 标签：objective-c, oop, design-patterns

在我的应用程序中，我使用一个名为 ClassA 的类（现在是一个单例）来管理内容。

因为它是一个单例，所以我使用这种行为在许多需要它的类中获取这个唯一实例。

但是现在，我不能再把这个类作为一个单例了，我需要一个 NSDocument 的实例。

所以我在我的 NSDocument 子类上创建了一个 ClassA 的实例，但问题是在需要它的类上传递这个对象。

我有这种结构：

Class1 <- Class2 <- Class3 <- 文档 -> ClassA

我需要访问 Class1 中 Document 的 ClassA 实例。

我可以使用依赖注入通过 init 或 setter 方法在 Class1 中传递 ClassA，但由于 Document 不能直接访问 Class1，我需要将其传递给 Class3，然后是 Class2，然后是 Class1。

这是唯一的方法吗？还是有其他更好的方法来处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:47:51.427

我想说回到你的单例原则，但使用`NSDocument`作为`ClassA`对象字典的键；就像是：

```
static NSMutableDictionary *_classCache = [[NSMutableDictionary alloc] init];

+ (ClassA *)classAForDocument:(NSDocument *)document
{
    ClassA *classA = [_classCache objectForKey:document];
    if (classA == nil)
    {
       // Initialise with something specific to the document I guess...
        classA = [[ClassA alloc] init];
        [_classCache setObject:classA forKey:document];
    }
    return classA;
} 
```

那么这只需要`Class{1,2,3}`知道他们所属的文件。

# jquery - 如何在rails控制器中格式化json？

> ID：11742463
> 
> 赞同：0
> 
> 时间：2012-07-31T14:29:27.323
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, json

如何在rails控制器中格式化json？通过link_to我发送并进入方法params [：cat]，然后我通过父（params [：cat]）获取所有孩子，但是如何为我的jqTree以json格式格式化这一切？所以它看起来像 {label : (here go params[:cat]), children: [{all @search_trees.id}]} ？

```
require 'json'
        @search_trees = SearchTree.find(:all, :include => [:designation], :conditions => { :STR_ID_PARENT => params[:cat]})
        #data = "{ label : '10001',  children : [{label : '10111'},{label : '10122'}]  }"
        respond_to do |format|
          format.html # index.html.erb
          format.xml  { render :xml => @search_trees }
          format.json { render :json => data }
        end 
```

我将从这里的长问题中提取一部分问题：

> [如何在 Rails 应用程序中正确执行 jquery 树？](https://stackoverflow.com/questions/11728782/how-to-correctly-do-jquery-tree-in-rails-app)

她是我的json：

> [{"search_tree":{"STR_DES_ID":42275,"STR_ID":10130,"STR_ID_PARENT":10726,"STR_LEVEL":4,"STR_NODE_NR":130,"STR_SORT":621,"STR_TYPE":1," designation_id":42275}},{"search_tree":{"STR_DES_ID":42277,"STR_ID":10132,"STR_ID_PARENT":10726,"STR_LEVEL":4,"STR_NODE_NR":132,"STR_SORT":620," STR_TYPE":1,"designation_id":42277}},{"search_tree":{"STR_DES_ID":43152,"STR_ID":10730,"STR_ID_PARENT":10726,"STR_LEVEL":4,"STR_NODE_NR":730," STR_SORT":622,"STR_TYPE":1,"designation_id":43152}},{"search_tree":{"STR_DES_ID":42209,"STR_ID":12344,"STR_ID_PARENT": 10726,"STR_LEVEL":4,"STR_NODE_NR":2344,"STR_SORT":623,"STR_TYPE":1,"designation_id":42209}}] 我需要像这样输出[jqTree - 从 json 创建树数据](https://stackoverflow.com/questions/10405222/jqtree-creating-tree-data-from-json)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:39:32.940

If you want to customize your json, you can use RABL or JBuilder. You will find screencasts here : [http://railscasts.com/episodes/320-jbuilder?autoplay=true](http://railscasts.com/episodes/320-jbuilder?autoplay=true) and here : [http://railscasts.com/episodes/322-rabl?autoplay=true](http://railscasts.com/episodes/322-rabl?autoplay=true).

# android - 连接池一直无法授予线程连接

> ID：11742464
> 
> 赞同：31
> 
> 时间：2012-07-31T14:29:32.187
> 
> 标签：android, sqlite, greendao

我在 Android 中使用 GreenDAO 进行数据库处理。执行许多数据库更改（> 15.000）时，我收到此错误消息：

> 数据库 '/data/data/...' 的连接池在 30.000002 秒内无法授予带有标志 0x1 的线程 312 (Thread-312) 的连接。

一切都卡住了。为什么会发生此错误？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-26T16:12:18.930

当我想在一个表上选择一个用于之前没有结束事务的事务的查询时，我收到了这条消息。`endTransaction()`在 finally 块事务上执行后问题解决。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-31T16:28:27.813

我不能肯定地说这个特定的实现，但是有一个通常支持 ORM 的连接池。连接池打开一定数量的数据库连接，并在您关闭它们并打开新连接时回收它们。该错误告诉您的是它可能达到了极限。发生这种情况的原因有很多，一个是数据库中可能存在一些死锁，因为您正在更新两个表，并且两个不同的事务持有不同的表，等待另一个表释放。或者只是因为打开的连接太多，数据库或连接池变得混乱。

抱歉，这不是一个真正的答案，但您需要查看 GreenDAO 的文档以了解这是如何发生的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-27T20:12:19.260

通过 DBFlow FlowQueryList 创建与 SQLite 的太多连接时，我收到此消息。我的解决方案是确保一旦你完成了要调用的查询列表`endTransactionAndNotify()`，然后`close()`在查询列表上。

单独打电话`endTransactionAndNotify()`并不能解决问题。我希望这会有所帮助，这个线程肯定对我有帮助。

# propel - 推动嵌套设置取消删除软删除

> ID：11742465
> 
> 赞同：1
> 
> 时间：2012-07-31T14:29:37.710
> 
> 标签：propel, nested-sets

我使用推进和软删除和推进嵌套集。

*   当我删除没有子节点的节点然后`$node->undelete()`一切正常时，节点正在从软删除中恢复。
*   但是，如果一个节点有子节点并删除它，那么如果我这样做`$node->undelete()`，它只会恢复没有任何子节点的节点......

有什么想法或解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:24:46.420

是的，该`undelete()`方法非常简单，它所做的就是使该`deleted_at`确切表上的列无效。但是，如果您在子表上也有软删除行为，那么您可以这样做：

```
SubTableQuery::create()
  ->includeDeleted()
  ->filterByParentId($parentRecord->getId())
  ->unDelete();
$parentRecord->unDelete(); 
```

# java - 显示编译时错误

> ID：11742466
> 
> 赞同：2
> 
> 时间：2012-07-31T14:29:39.463
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-webflow

```
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"

    xsi:schemaLocation="
                        http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans.xsd

    http://www.springframework.org/schema/mvc
                        http://www.springframework.org/schema/mvc/spring-mvc.xsd
                        http://www.springframework.org/schema/context 
                        http://www.springframework.org/schema/context/spring-context.xsd

http://www.springframework.org/schema/aop 
                        http://www.springframework.org/schema/aop/spring-aop.xsd"
                        > 
```

这是我的模式声明。但是 mvc:annotation-driven 它显示编译时错误。匹配的通配符是严格的，但找不到元素的声明。我无法正确找到问题。所以请帮助找到这个问题。

错误：cvc-complex-type.2.4.c：匹配的通配符是严格的，但找不到元素“mvc:annotation-driven”的声明。你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:33:25.017

您的类路径中可能缺少 spring-webmvc-*.jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:37:04.367

刚刚创建了这个：

```
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"

    xsi:schemaLocation="
                    http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans.xsd

http://www.springframework.org/schema/mvc
                    http://www.springframework.org/schema/mvc/spring-mvc.xsd
                    http://www.springframework.org/schema/context
                    http://www.springframework.org/schema/context/spring-context.xsd 
```

[http://www.springframework.org/schema/aop](http://www.springframework.org/schema/aop) [http://www.springframework.org/schema/aop/spring-aop.xsd](http://www.springframework.org/schema/aop/spring-aop.xsd) "

和琐碎的代码

```
 public static void main(String[] args) {
    System.out.println( new ClassPathXmlApplicationContext("1.xml").getBeanDefinitionCount() );
} 
```

这显示 0 没有错误，所以这实际上是因为根据 @Biju Kunjummen(+1) 缺少 spring-mvc jar

此外，您可能有 2 个不同版本的 spring-mvc ...

# jquery - 在显示和隐藏 div 标签内容的函数上切换样式（类）

> ID：11742483
> 
> 赞同：0
> 
> 时间：2012-07-31T14:30:58.610
> 
> 标签：jquery, css

我看到很多关于使用 JQuery 显示/隐藏内容的资源，但我不知道如何在此功能上切换样式。我可以切换显示的文本，但我在锚标记中使用按钮作为背景图像。

这是我需要做的。该按钮默认为“显示更多”，但当单击该按钮时，内容可见；我想切换类/样式，以便按钮指示 Show Less。

最后，如何将它添加到页面中的多个区域，是否需要为每个区域创建单独的功能？

这是JQuery：

```
<script type="text/javascript">
$(document).ready(function() { 
  $('#additionalContentBox').hide(); 
  $('.readmore').toggle(function(){ 
    $('#additionalContentBox').show(); 
  }, 
  function(){ 
    $('#additionalContentBox').hide();
    $('.readless').toggle(function(){ 
  }); 
});
</script> 
```

的HTML：

```
<a href="#/" class="readmore readless">Read Full Article</a>

<div id="additionalContentBox">
<p>pulvinar tellus. Maurtis commodo urna at dui bibendum quis euismod velit egestas. Vestibulum ante ipsum primis in faucibus orci luctus et. ante ipsum primis in faucibus</p>
</div> 
```

最后，CSS：

```
.readmore{
    display: block;
    background-image: url(img/readmore15.png);
    text-indent: -10000px;
    background-repeat: no-repeat;
    background-position: bottom left;
    display: block;
    height: 18px;
    line-height: 18px;
    width: 100px;
    margin-left: 4px;
    margin-top: 4px;
    margin-bottom: -14px;
}

.readless{
    background-image: url(img/readmore15.png);
    background-position: top left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:49:07.287

您可以尝试一些简单的方法，例如：

```
$('#your-link').click(function(){
    $(this).toggleClass('readless');
    $('#your-div').toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:49:27.787

给你的'a'标签一个ID并在你的jQuery中使用它来选择它。

为 ID 提供按钮的通用 CSS 属性。

还要在其上保留“readmore”类，并在 CSS 中为其提供“readmore”的背景属性。

第一次单击时，使用 jQuery 删除“readmore”类并添加“readless”类。

```
jQuery("#myID").removeClass("readmore").addClass("readless") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:57:02.353

我会稍微更改您的标记以使“additionalContentBox”成为一个类而不是一个ID，因为您可能会有多个。最好我也会给那个元素一个默认样式“显示：无”，这样它就不必等待 JS 隐藏。Alos，我可能会从还没有“无读”类的元素开始。所以标记看起来像这样：

```
 <a href="#/" class="readmore">Read Full Article</a>
<div class="additionalContentBox" style="display: none;">
<p>pulvinar tellus. Maurtis commodo urna at dui bibendum quis euismod velit egestas.    Vestibulum ante ipsum primis in faucibus orci luctus et. ante ipsum primis in faucibus</p>
</div> 
```

然后我会像这样设置jquery：

```
$(document).ready(function() {
  $('.readmore').click(function(){
    if ($(this).hasClass('readless')){
      $(this).removeClass('readless');
    }else{
      $(this).addClass('readless');
    };
   $(this).next('.additionalContentBox').toggle('fast');
  });
}); 
```

# c# - 如何找到在 .net 中引发异常的 sql server 参数？

> ID：11742485
> 
> 赞同：2
> 
> 时间：2012-07-31T14:31:08.100
> 
> 标签：c#, .net, sql-server

我正在尝试从 .net 执行 SQL Server 存储过程。我收到错误

> 将数据类型数字转换为十进制时出错

但我很难确定哪个 SQL 参数是罪魁祸首。

有 70 个，所以我确信有比手动搜索更简单的方法。

它是否在异常框中的某个地方，在“查看详细信息”中？提前致谢..

相关代码（希望这会有所帮助......我没有包含所有参数，但这是模式）：

```
public void WriteKeyStatToDB(KeyStatisticsDataCollection.KeyStatsDP dp)
{
    SqlParameter symbol = SqlParameterFactory("@symbol", SqlParamInOrOut.Input, SqlDbType.Char);
    SqlParameter dateAdded = SqlParameterFactory("@dateAdded", SqlParamInOrOut.Input, SqlDbType.Date);
    SqlParameter tradeDate = SqlParameterFactory("@tradeDate", SqlParamInOrOut.Input, SqlDbType.Date);
    SqlParameter marketCapIntra = SqlParameterFactory("@marketCapIntra", SqlParamInOrOut.Input, SqlDbType.Money);
    SqlParameter entVal = SqlParameterFactory("@entVal", SqlParamInOrOut.Input, SqlDbType.Money);
    SqlParameter trailingPE = SqlParameterFactory("@trailingPE", SqlParamInOrOut.Input, SqlDbType.Decimal);
    SqlParameter forwardPE = SqlParameterFactory("@forwardPE", SqlParamInOrOut.Input, SqlDbType.Decimal);

    symbol.Value = dp.Symbol;
    dateAdded.Value = dp.TradeDate;
    tradeDate.Value = dp.TradeDate;
    marketCapIntra.Value = dp.MarketCapIntraDay;
    entVal.Value = dp.EntValue;
    trailingPE.Value = dp.TrailingPE;
    forwardPE.Value = dp.ForwardPE;

    List<SqlParameter> sqlParams = new List<SqlParameter> {symbol, dateAdded, tradeDate, marketCapIntra, entVal, trailingPE, forwardPE};

    ExecuteSproc("spAddKeyStatDP", sqlParams, SqlConnection);
}

private static SqlParameter SqlParameterFactory (String ParamName, SqlParamInOrOut Direction, 
    SqlDbType SqlType)
{
    SqlParameter param = new SqlParameter
    {
        ParameterName = ParamName,
        SqlDbType = SqlType
    };

    if (Direction == SqlParamInOrOut.Input)
        param.Direction = ParameterDirection.Input;
    else
        param.Direction = ParameterDirection.Output;

    return param;
}

private static void ExecuteSproc(String CommandName, List<SqlParameter> ParamList, SqlConnection SqlConn, int Timeout = 0)
{
    using (SqlCommand cmd = new SqlCommand(CommandName, SqlConn))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        foreach (SqlParameter sp in ParamList)
        {
              if (sp.Value == null)
              sp.Value = DBNull.Value;
              cmd.Parameters.Add(sp);
         }

              cmd.CommandTimeout = Timeout;
              cmd.ExecuteNonQuery();
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:06:04.440

您可以从 Visual Studio 调试 Sql Server 存储过程。这是有关如何执行此操作的[知识库文章。](http://support.microsoft.com/kb/316549)也许那时您很容易找出哪个参数有问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:49:24.933

我在您的代码中没有看到 70 个参数，但假设您有 70 个，这里有一些调试指针。

1）由于是十进制转换错误，并且假设最常见的精度不足以支持您的值，您可以编写一个快速脚本并在 sql server 中运行它来查看哪个有问题。
**以下未经测试的**脚本：

```
StringBuilder sb = new StringBuilder();
            foreach (SqlParameter param in sqlParams)
            {
                sb.Append("declare " + param.ParameterName + " as " + param.SqlDbType + Environment.NewLine);
                sb.Append("set " + param.ParameterName + " = " + param.Value + Environment.NewLine);
            }
            string sqlTestString = sb.ToString(); 
```

2）您可以使用SQL Profiler查看执行期间已传递给SQL Server的参数。您还可以使用 SQL 探查器提供的其他调试信息。

3) 并非所有参数都是十进制的。假设您有一个 20 - 30% 十进制参数的经典案例，这将相当于 14 - 20 个参数。有时，值得手动检查它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:17:52.637

也许您可以设置参数的大小和比例并检查哪个值导致异常

# php - Symfony2 一页上有多个表单

> ID：11742487
> 
> 赞同：3
> 
> 时间：2012-07-31T14:31:16.253
> 
> 标签：php, symfony

所以我想用 Symfony2 制作一个带有登录（登录）表单和注册（注册）表单的页面。我想知道实现这一目标的最佳方法是什么？

我考虑过设置 form 属性`action="/pathToMyFormProcess"`，但是我遇到了一个问题：我想在该操作中显示相同的模板（HTML 页面）。但是“/pathToMyFormProcess”会在不同模板的许多不同操作中被调用。就像在每个页面上包含或呈现的登录表单一样。我可以为每个模板创建一个新的路径和操作。但正如这个例子所示，这将非常令人沮丧：

我的注册操作是：

```
public function signupAction() {

    $loginForm = $this->get('loginform'); // Get the login form
    $signUpForm = $this->get('signupform'); // Get the signup form

    $loadData = ... /* Loading data needed for this page (could be last visitors, 
   countries, some information from database that should be displayed on the page) */

    return // SIGNUPTEMPLATE - array ( forms and data )

} 
```

然后，如果有人使用登录表单，它会将它们发送到例如 /signup/login，例如 SignupController 中的操作 loginAction。

```
public function signupAction() {

    $loginForm = $this->get('loginform'); // Get the login form
    $handler = $this->get('loginhandler'); // Get the handler

    $process = $handler->process(); // Process the request, try to log in basicly.
    if($process) {
      return // redirect or something - no problem
    }

    // Loading again, writing exact same code as signupAction()
    $signUpForm = $this->get('signupform'); // Get the signup form

    $loadData = ...

    return // SIGNUPTEMPLATE - array ( forms and data )
} 
```

所以我想知道您是否对如何实现这一目标有更好的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T14:26:26.300

您可以做的另一件事是在页面中呈现表单，例如：

在你的 layout.html.twig

```
{{ render(controller('SiteBundle:Login:login')) }} 
```

然后在您的 loginAction 中呈现您的登录表单。

```
return $this->render('SiteBundle:Default:login-box.html.twig', array(
        'last_username' => $lastUsername,
        'error'         => $error,
        'csrf_token' => $csrfToken,
    )); 
```

最后你的 login-box.html.twig 有你的 html 表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T14:12:00.567

注意不同的分支。我发现在新版本的 SYMFONY 中无缘无故地出现了一些奇怪的变化。示例分支 2.6

```
public FormBuilderInterface createNamedBuilder(string|int $name, string|FormTypeInterface $type = 'form', mixed $data = null, array $options = array()) 
```

但在分支 2.0

```
public FormBuilder createNamedBuilder(string|FormTypeInterface $type, string $name, mixed $data = null, array $options = array()) 
```

是什么让我头疼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-03T19:38:13.347

Dennefyren 接受的答案是一个死链接。我找到了谷歌缓存页面：

“对于多个表单，解决的问题是提交多个表单，根据提交的表单保留不同的实体和属性集。

所以这里是为多种形式提供技巧的格式。我使用了 createNamedBuilder 方法，该方法获取 A 类实体的类型表单。它还接收我们想要标记的表单的名称作为参数。所以我们在下面的代码中定义了两种形式，每一种都包含不同实体的两个不同属性，尽管它们可能相同。然后我们确保接收到的 POSTed 信息写入一个条件，我们可以从该条件中单独处理每个表单，并根据提交的表单区分每个相应的实体。最后，我们看到我们将两个变量传递给树枝引擎，用于两种不同的形式。”

```
public function multiformAction()
{
    $form1 = $this->get('form.factory')->createNamedBuilder($formTypeA, 'form1name')
        ->add('foo', 'text')
        ->getForm();

    $form2 = $this->get('form.factory')->createNamedBuilder($formTypeB, 'form2name')
        ->add('bar', 'text')
        ->getForm();

    if('POST' === $request->getMethod()) {

        if ($request->request->has('form1name') {
            // handle the first form
        }

        if ($request->request->has('form2name') {
            // handle the second form
        }
    }

    return array(
        'form1' => $form1->createView(),
        'form2' => $form2->createView()
    );  
} 
```

“还请注意，$request 变量是 sf2 请求对象。该对象也有一个名为 request 的属性。该属性的类型是 ParameterBag ，它又具有一个名为 has 的方法，该方法检查对象中的给定键。

在树枝模板中，显然我们将分别调用每个表单的代码，例如：”

```
{{ form_row(form1.foo) }}
...
{{ form_row(form2.bar) }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T11:25:22.140

请参阅我在本主题中对该问题的回复，它描述了如何创建单个表单类型并使用它来生成具有不同 ID 的相同表单（但根据基础实体的 ID 保留该 ID）N 次：

[在同一页面上多次生成相同的表单类型 Symfony2](https://stackoverflow.com/questions/27690680/generate-same-form-type-on-same-page-multiple-times-symfony2/32138607#32138607)

# c++ - 如何克服 make_shared 常量

> ID：11742491
> 
> 赞同：5
> 
> 时间：2012-07-31T14:31:35.080
> 
> 标签：c++, boost, shared-ptr

我面临一个问题，无法确定正确的解决方案是什么。

这是用于说明的代码示例：

```
#include <boost/make_shared.hpp>
#include <boost/shared_ptr.hpp>

class TestClass{
    public:
        int a;
        TestClass(int& a,int b){};
    private:
        TestClass();
        TestClass(const TestClass& rhs);
};

int main(){
    int c=4;
    boost::shared_ptr<TestClass> ptr;

//NOTE:two step initialization of shared ptr    

//     ptr=boost::make_shared<TestClass>(c,c);// <--- Here is the problem
    ptr=boost::shared_ptr<TestClass>(new TestClass(c,c));

} 
```

问题是我无法创建 shared_ptr 实例，因为 make_shared 获取并将参数传递给 TestClass 构造函数，`const A1&, const A2&,...`如文档所述：

```
template<typename T, typename Arg1, typename Arg2 >
    shared_ptr<T> make_shared( Arg1 const & arg1, Arg2 const & arg2 ); 
```

我可以欺骗它`boost::shared(new ...)`或重写构造函数以获取`const`引用，但这似乎不是正确的解决方案。

先感谢您！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T14:35:55.210

您可以使用`boost::ref`来包装参数，即：

```
ptr = boost::make_shared< TestClass >( boost::ref( c ), c ); 
```

# javascript - 自动完成在 keydown 功能中不起作用

> ID：11742492
> 
> 赞同：0
> 
> 时间：2012-07-31T14:31:37.243
> 
> 标签：javascript, jquery, cordova

我在 jquery 中使用 keydown 函数在文本框中输入时从本地数据库中检索了数据。我想展示数据使用 jquery 自动完成。但自动完成在 onload 中工作正常，而不是在 keydown 函数中。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:45:28.457

您最好阅读 Autocomplete UI 文档。您不需要将自动完成事件附加到 keydown，插件会为您完成。您只需要使用所需参数在 texbox 上调用 Autocomplete。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:52:28.233

使用 jQuery UI 自动完成插件时，您不需要手动处理任何事件。这就是插件的重点。

```
$('#idOfYourTextbox').autocomplete({
    source: yourDataSource
}); 
```

如果您对插件有更具体的问题，请将该信息添加到您的问题中，以便我们进一步为您提供帮助。如果您需要有关插件的更多信息，请参阅[文档](http://jqueryui.com/demos/autocomplete/)。

# python - Python SOAP 客户端，带有 suds 的 WSDL 调用给出传输错误 401 未经授权用于 HTTP 基本身份验证

> ID：11742494
> 
> 赞同：10
> 
> 时间：2012-07-31T14:31:42.353
> 
> 标签：python, soap, wsdl, basic-authentication, suds

## 背景

我正在用 python 2.7.3 构建一个 SOAP 客户端，并使用 Canonical 提供的 suds 0.4.1 库。服务器正在通过 HTTPS 使用基本身份验证。

## 问题

无法通过服务器上的身份验证，甚至无法访问 WSDL。我收到以下错误：

> suds.transport.TransportError：HTTP 错误 401：未经授权

## 尝试解析和代码

我已经尝试了[suds 文档](https://fedorahosted.org/suds/wiki/Documentation#Basic)中描述的两种身份验证方法，但仍然出现上述错误`client = Client(url, ...)`。我已经确认了在网络浏览器中连接的凭据和能力，这工作正常。

在声明`wsdl_url`, `username`and之后`password`，我尝试了：

```
client = Client(url=wsdl_url, username=username, password=password)

# as well as:

t = HttpAuthenticated(username=username, password=password)
client = Client(url=wsdl_url, transport=t)

# and even:

t = HttpAuthenticated(username=username, password=password)
t.handler = urllib2.HTTPBasicAuthHandler(t.pm)
t.urlopener = urllib2.build_opener(t.handler)
client = Client(url=wsdl_url, transport=t) 
```

最后一个似乎至少从 WSDL URL 中得到了[另一个关于 HTTP authentication with suds](https://stackoverflow.com/questions/5201037/strange-behavior-from-http-authentication-with-suds-soap-library)的问题的响应。

## 其他注意事项

这个问题与这个[类似的问题](https://stackoverflow.com/questions/8697210/python-suds-soap-request-to-https-service-401)不同，因为我使用的是：

```
from suds.transport.https import HttpAuthenticated
# not:
# from suds.transport.http import HttpAuthenticated 
```

并且从 Traceback 中，`client = Client(url, ...)`电话明显命中 suds.transport.https.py：

```
File "/usr/lib/python2.7/dist-packages/suds/client.py", line 112, in __init__ self.wsdl = reader.open(url)
File "/usr/lib/python2.7/dist-packages/suds/reader.py", line 152, in open d = self.fn(url, self.options)
File "/usr/lib/python2.7/dist-packages/suds/wsdl.py", line 136, in __init__ d = reader.open(url)
File "/usr/lib/python2.7/dist-packages/suds/reader.py", line 79, in open d = self.download(url)
File "/usr/lib/python2.7/dist-packages/suds/reader.py", line 95, in download fp = self.options.transport.open(Request(url))
File "/usr/lib/python2.7/dist-packages/suds/transport/https.py", line 60, in open return  HttpTransport.open(self, request)
File "/usr/lib/python2.7/dist-packages/suds/transport/http.py", line 64, in open raise TransportError(str(e), e.code, e.fp) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T16:00:56.763

suds 没有将授权标头添加到请求中，因此我手动设置了它：

```
import base64

# code excluded for brevity

base64string = base64.encodestring('%s:%s' % (username, password)).replace('\n', '')
authenticationHeader = {
    "SOAPAction" : "ActionName",
    "Authorization" : "Basic %s" % base64string
}
client = Client(url=wsdl_url, headers=authenticationHeader) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T18:55:52.573

您可以使用 SOAPpy

```
import SOAPpy, base64

class myHTTPTransport(SOAPpy.HTTPTransport):
    username = None
    passwd = None

    @classmethod
    def setAuthentication(cls,u,p):
        cls.username = u
        cls.passwd = p

    def call(self, addr, data, namespace, soapaction=None, encoding=None, http_proxy=None, config=SOAPpy.Config, timeout=None):

        if not isinstance(addr, SOAPpy.SOAPAddress):
          addr = SOAPpy.SOAPAddress(addr, config)

        if self.username != None:
          addr.user = self.username+":"+self.passwd

        return SOAPpy.HTTPTransport.call(self, addr, data, namespace, soapaction, encoding, http_proxy, config)

if __name__ == '__main__':

  # code for authenticating the SOAP API calls
  myHTTPTransport.setAuthentication('admin', 'admin')

  # Getting the instance of Server
  Baton = SOAPpy.WSDL.Proxy(<WSDL PATH>, transport=myHTTPTransport)

  # your code goes here
  ... 
```

# sql-server - SSIS - 由于潜在的数据丢失，无法转换该值

> ID：11742496
> 
> 赞同：25
> 
> 时间：2012-07-31T14:31:52.547
> 
> 标签：sql-server, oracle, ssis, etl

我对 SSIS 比较陌生。我正在尝试使用 Microsoft OLEDB for Oracle 从 Oracle 数据库中提取信息，并且正在使用以下查询：

```
SELECT ID FROM Test 
```

我收到一条错误消息：`the value cannot be converted because of a potential loss of data`. 如果我将查询更改为以下内容，则它可以工作：

```
SELECT '1' FROM Test 
```

我认为它失败了，因为 ID 不是整数。但是，平面文件连接管理器显示 OutputColumnWidth 为 50。我做错了什么？

**格林威治标准时间 16:30 更新**
我对此进行了更多研究，似乎是具有“频率”或“无”直方图的列导致了问题。那些具有“高度平衡”直方图的人似乎没问题。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-31T19:23:07.807

这是很常见的事情。在很多情况下，从无法确定列元数据的另一种类型的系统导入 ssis 时，默认情况下默认为 str(50)。由于您试图将其推入一个字符列，因此假设您可能会丢失数据。只需右键单击并选择“显示高级编辑器...”即可进入源组件

然后导航到最后一个选项卡（输入和输出属性）

单击 OLE DB 源输出旁边的 +

单击输出列旁边的 +

突出显示 ID 列

滚动到对话框右侧的 Length Data Type Property 并将其从 50 更改为 1。

# java - 可以改变JButton的形状吗？

> ID：11742502
> 
> 赞同：5
> 
> 时间：2012-07-31T14:32:05.130
> 
> 标签：java, swing, jbutton

是否可以将 JButton 的形状从矩形更改为圆形？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T14:51:54.323

Sean Cogan 提供的链接就是您所需要的。如果您想要简而言之，请使用设置图像（圆形或任何您希望按钮看起来相似的形状）`setIcon`，然后在 JButton（button1）上设置这些值 -

```
button1.setContentAreaFilled(false);
button1.setFocusPainted(false);
button1.setBorderPainted(false); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T14:36:50.897

您还可以在按钮上使用图像。

# html - 在 pentaho 报表设计器中嵌入 html

> ID：11742503
> 
> 赞同：0
> 
> 时间：2012-07-31T14:32:06.237
> 
> 标签：html, embed, pentaho, pentaho-report-designer

我想从我的网络应用程序中的页面生成 pdf 报告。我正在考虑为我们的报告使用 pentaho 报告设计器。

是否可以将 html 代码直接“粘贴”/嵌入到报告中？

我无法做到这一点\查找此功能的文档\示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:07:23.073

是的，你绝对可以这样做，我已经渲染了存储在字段中的 html。呃，现在的问题是，此刻我不记得到底是怎么回事。仔细查看字段上的属性，其中之一是允许您将内容类型设置为“富文本”的属性。

IIRC 它支持一组基本的 html，不会处理任何太花哨的东西！

这对我们来说是一个很棒的功能，因为我们将 html 存储在 db 中，所以我们直接渲染了 html，非常好的功能！在我们拥有此功能之前，我们必须从 html 中剥离标签并将其显示为文本 - 讨厌！

# html - 如何在没有 HTML 标签的情况下显示文本

> ID：11742504
> 
> 赞同：1
> 
> 时间：2012-07-31T14:32:05.880
> 
> 标签：html, asp.net-mvc, ckeditor

我在 MVC 2 应用程序中使用 CKEditor，我想从编辑器中显示没有 HTML 标记的文本，如下所示

编辑器中的`<p>Some text</p>` 文本：要显示的文本：`Some text`

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:34:55.347

如何`HTML Agility Pack`在控制器方法中使用和剥离所有 HTML 标记`action`并将结果输出到他的视图中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:35:13.663

您需要以`Preview`模式打开文档。

**参考**：[http ://docs.cksource.com/CKEditor_3.x/Users_Guide/Document/Preview](http://docs.cksource.com/CKEditor_3.x/Users_Guide/Document/Preview)

# c++ - 在 C++ 中嵌入 lua 的问题

> ID：11742505
> 
> 赞同：2
> 
> 时间：2012-07-31T14:32:15.093
> 
> 标签：c++, c, lua

我正在尝试在 C++ 中嵌入 lua 代码，但遇到了一个奇怪的编译器错误。这是我的代码：

```
#include <stdio.h>
extern "C" {
#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>
}

int main() {
    lua_State *luaVM = luaL_newstate();
    if (luaVM == NULL) {
        printf("Error initializing lua!\n");
        return -1;
    }

    luaL_openlibs(luaVM);

    luaL_dofile(luaVM, "test.lua");

    lua_close(luaVM);

    return 0;
} 
```

编译：

```
g++ -Wall -o embed -llua embed.cpp 
```

错误是：

```
g++ -Wall -o embed -llua embed.cpp
/tmp/ccMGuzal.o: In function `main':
embed.cpp:(.text+0x47): undefined reference to `luaL_loadfilex'
embed.cpp:(.text+0x72): undefined reference to `lua_pcallk'
collect2: error: ld returned 1 exit status 
```

我不是从我的代码中调用`luaL_loadfilex`或调用`lua_pcallk`，这有助于假设问题不在我的代码中，而是在 lua 本身。有人在这里有什么想法吗？

**更新**

这是我的版本信息：

```
$ lua -v
Lua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:36:19.040

Pre 5.1 回答：根据[这个网站](http://csl.sublevel3.org/lua/)，如果包含and ，则需要在`-llualib`后面添加：`-llua``lauxlib.h``lualib.h`

```
g++ -Wall -o embed embed.cpp -llua -llualib 
```

### 更新

愚蠢的我，您应该始终按照它们使用另一个的顺序链接文件/库。如果`A`使用`B`，则应在 B 之前提及 A。

在你的情况下，因为`embed.cpp`uses `lua`，那么你应该写：

```
g++ -Wall -o embed embed.cpp -llua 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:40:37.110

在 lua 5.2.1 `luaL_dofile`中是这样声明的宏：

```
#define luaL_dofile(L, fn) \
    (luaL_loadfile(L, fn) || lua_pcall(L, 0, LUA_MULTRET, 0)) 
```

在您的 lua 版本中，它很可能使用 and 来实现`luaL_loadfilex`，`lua_pcallk`并且您会像@Shahbaz 所说的那样获得未定义的引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T12:58:19.050

最终的问题是这些库的名称因版本而异。从存储库安装时，库被称为`liblua5.x`and `liblualib5.x`，因此需要以下命令：

```
g++ -Wall -o embed embed.cpp -llua5.2 -llualib5.2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-17T19:11:11.047

您可以使用：

```
cc embed.cpp -o embed -llua -L../lua -I../lua -lm -ldl 
```

# eclipse - 绑定2个编辑器的滚动条

> ID：11742510
> 
> 赞同：2
> 
> 时间：2012-07-31T14:32:30.197
> 
> 标签：eclipse, ide

在 Eclipse 中编辑代码时，您可以打开多个编辑器，每个编辑器由一个选项卡表示。您还可以同时显示 2 个（或更多）编辑器。这可以像[这里](https://stackoverflow.com/q/9471578/544896)提到的那样完成。

然后，还有另一个方便的选项：*Show Source of Selected Element Only*。（我相信默认情况下它没有启用，因此您必须右键单击工具栏，选择*自定义透视...*并在*工具栏可见性*选项卡中，您必须启用*编辑器演示*及其子项）

这仅显示每个编辑器的光标所在的方法。我使用这个特性来比较函数，以了解我是否可以重构看起来太相似的代码。

但遗憾的是，我还没有找到像*Compare Editor*中那样绑定 2 个滚动条的选项。因此，当我在一个编辑器中滚动时，另一个会按比例滚动。

这是隐藏功能吗？有谁知道是否有办法实现这一目标？

谢谢 ！

# internet-explorer - Internet Explorer 上的异步消息

> ID：11742512
> 
> 赞同：0
> 
> 时间：2012-07-31T14:32:46.477
> 
> 标签：internet-explorer, asynchronous, message

我正在尝试解决一个问题。基本上我需要在长时间运行的 Javascript 代码上显示“加载消息”，并在此代码结束时将其隐藏，例如：

显示消息（）；

执行我的代码（）；

隐藏消息（）；

但是，我在 Internet Explorer 上运行时遇到了问题，现在看起来页面在所有脚本代码完成之前都被冻结了，这对用户来说可能很烦人。我尝试了一种使用 setTimeout() 的方法，但这不起作用，你们有没有解决这个问题？我会很感激你的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:55:04.213

你可以这样做：

```
function showMessage(){
    /* show message */;
    window.delay=setTimeout(executeMyCode,100); // Give some time to browser to render message
    return;
}

function executeMyCode(){
    clearTimeout(window.delay);
    /* execute long running code */
    /* hide message */
    return;
} 
```

虽然在执行长代码时浏览器仍然会被冻结，但用户现在可以看到该消息。

# ios - UINavigationController initWithRootViewController，视图没有出现

> ID：11742513
> 
> 赞同：0
> 
> 时间：2012-07-31T14:32:47.747
> 
> 标签：ios, ipad, uinavigationcontroller, uitableview

我正在尝试获得基于导航的功能来显示不同的表格视图，但没有运气。本质上，用于的视图`initWithRootViewController`没有正确显示，但导航栏是。这是with hierarchy -> ->`viewDidLoad`方法中的代码：`TimerViewController``AppDelegate``ViewController``TimerViewController`

```
incidentTableViewController = [[IncidentTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
    [incidentTableViewController.tableView.backgroundView setBackgroundColor:[UIColor colorWithRed:167.0/255.0 green:169.0/255.0 blue:172.0/255.0 alpha:1.0]];
    [incidentTableViewController.view setFrame:CGRectMake(0, 0, 268, 423)];
    [incidentTableViewController.tableView showsVerticalScrollIndicator];
    [incidentTableViewController setTitle:@"Incidents"];
    [incidentTableViewController.navigationController setNavigationBarHidden:NO];
    UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:incidentTableViewController];
    [controller.view setFrame:CGRectMake(268, 0, 268, 423)];
    [controller.view setBackgroundColor:[UIColor clearColor]];
    [controller.navigationController setNavigationBarHidden:YES];
    //[controller.view addSubview:incidentTableViewController.view];
    [self.view addSubview:controller.view]; 
```

这导致（我不确定为什么导航栏上方也有间隙）：

![在此处输入图像描述](../Images/c560241a638b9acfbfa676719971554b.png)

如果我取消注释倒数第二行`[controller.view addSubview:incidentTableViewController.view];`，我会得到这个结果，这是根据需要减去导航栏：

![在此处输入图像描述](../Images/4f2eb37b509295bc5b865796b50c5696.png)

我想要实现的是第二个带有导航栏的图像，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:44:19.987

你为什么做这个？

```
[controller.navigationController setNavigationBarHidden:YES]; 
```

顺便说一句，在你的 appdidfinishlaunching 你的 appDelegate 中这样做：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

incidentTableViewController = [[IncidentTableViewController alloc] initWithStyle:UITableViewStyleGrouped];

[incidentTableViewController.tableView.backgroundView setBackgroundColor:[UIColor colorWithRed:167.0/255.0 green:169.0/255.0 blue:172.0/255.0 alpha:1.0]];
[incidentTableViewController.view setFrame:CGRectMake(0, 0, 268, 423)];
[incidentTableViewController.tableView showsVerticalScrollIndicator];
[incidentTableViewController setTitle:@"Incidents"];
[incidentTableViewController.navigationController setNavigationBarHidden:NO];
UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:incidentTableViewController];
[controller.view setFrame:CGRectMake(268, 0, 268, 423)];
[controller.view setBackgroundColor:[UIColor clearColor]];
self.window.rootViewController = incidentTableViewController;

[self.window makeKeyAndVisible]; 
```

如果您的窗口有一个 rootViewcontroller，那么您应该将事件表视图控制器推送到导航堆栈或以模态方式显示事件表视图控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:48:04.807

您必须更改项目的逻辑。您可以开始一个新的选项卡项目并修改 didFinishLaunchingWithOptions 方法 这里我展示了带有 2 个选项卡的示例，一个带有示例视图的选项卡，另一个带有工具栏的选项卡：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    //view controller for 1st tab
    UIViewController * viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:nil];

    //your view controller with bar for the 2d tab
    IncidentTableViewController *incidentTableViewController = [[IncidentTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
    [incidentTableViewController.tableView.backgroundView setBackgroundColor:[UIColor colorWithRed:167.0/255.0 green:169.0/255.0 blue:172.0/255.0 alpha:1.0]];
    [incidentTableViewController.tableView showsVerticalScrollIndicator];
    [incidentTableViewController setTitle:@"Incidents"];
    UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:incidentTableViewController];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, controller, nil];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:50:02.607

UINavigationController 没有你自定义的视图。

```
 [self.view addSubview:controller.view]; 
```

--->

```
 [self presentModalViewController:controller animated:YES]; 
```

或者

```
[self presentViewController:controller animated:YES completion:^{}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:36:43.567

通过使用以导航控制器初始化的作为其视图控制器修复了该问题`UISplitViewController`，工作代码如下：

```
incidentTableViewController = [[IncidentTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
    UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:incidentTableViewController];
    incidentTableViewController.title = @"Incidents";
    splitViewController = [[UISplitViewController alloc] init];
    splitViewController.viewControllers = [NSArray arrayWithObjects:controller, nil];
    splitViewController.delegate = (id)incidentTableViewController;
    splitViewController.view.frame = CGRectMake(268, 0, 268, 423);
    [self.view addSubview:splitViewController.view]; 
```

![在此处输入图像描述](../Images/3cd26b6ad9bd9ce69f019b9ddfefa5e5.png)

# android - 如何彻底清理我的项目？

> ID：11742514
> 
> 赞同：0
> 
> 时间：2012-07-31T14:32:55.603
> 
> 标签：android, c, compilation

我已经修复了我的代码中的一个错误，但每次我调用`ndk-build`相同的错误仍然存​​在。我`ndk-build clean`至少打了十五次电话，但我没有运气。我已经进入我的项目并删除了我的`.o files`. 我该怎么办？

注意 的拼写`initilized/initialized`：

![在此处输入图像描述](../Images/77d27053bd354f1eaea006b4abe73d6a.png)

![在此处输入图像描述](../Images/e0d24f0fa83f882298c585fa3d59f17e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:34:22.310

在 Eclipse 中，菜单*Window* -> *project* -> *Clean*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:50:04.387

我总是手动清空 gen 和 bin 文件夹。

# android - 如何在Android中将listview和mapview与TabHost同步

> ID：11742516
> 
> 赞同：0
> 
> 时间：2012-07-31T14:33:16.717
> 
> 标签：android, listview, android-mapview, android-tabhost

我的场景如下：我正在实现一个通过**LocalActivityManager**显示两个选项卡的选项卡主机。第一个包含一个**ListView**，它显示有关地理定位位置的信息（例如距离、地址名称......），在第二个中，我有一个**MapView**实现[Google 的 Map API](https://developers.google.com/android/maps-api-signup)，它显示第一个活动中的各个项目。我不能在同一个视图中将这两个活动作为一个来实现，因为这两个活动从不同的类扩展（第一个有一个创建自定义菜单的父级，第二个来自 MapView），所以可以选择在一项活动不可用。

我的问题是：在第一个活动中具有延迟加载（按需加载内容，当用户滚动到列表末尾时）功能，如何使用 TabHost 方法在 MapView 活动中同步其项目？

我已经说明了一些复杂的解决方案，例如使用**BroadcastReceiver**或创建 AIDL，但我正在寻找最简单的解决方案。我不是在寻找代码本身，而是在寻找完成这项任务的计划。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T21:16:18.230

我认为在这种情况下，您需要实现侦听器模式，例如

```
 public interface MapDataLoadingListener{
    public void onMapDataLoaded(List<MapData> dataList);
}

public class YourListActivity extends Activity{

    ...

    // somewhere you push yoy lazy load task
    UpdateListTask task = new UpdateListTask();
    task.setMapDataListener(// your map activity)
    task.execute();
    ...
}

public class YourMapActivity extends MapActivity implements MapDataLoadingListener {

     ...

     public void onMapDataLoaded(List<MapData> dataList){
        updateMap(dataList); 
     }

    ...

    private void updateMap(List<MapData> dataList){
        ...
    }

}

public class UpdateListTask extends AsyncTask {

    private MapDataLoadingListener mapDataListener;

    public void setMapDataListener(MapDataLoadingListener mapDataListener){
        this.mapDataListener = mapDataListener;
    }

    ...

    @Override
    protected void onPostExecute(Object result) {
       mapDataListener.onMapDataLoaded((List<MapData>) result)
    }

} 
```

# list - 列表项样式

> ID：11742523
> 
> 赞同：0
> 
> 时间：2012-07-31T14:33:39.653
> 
> 标签：list, css

我在我的网站上遇到了一些 CSS 项目的问题。这一切都归结为列出项目！

我有一个菜单栏，可以使用`<ul> <li>`和`<ol>`标记他们自己的 css 文件，我有一个滑块，可以`<li>`从另一个 css 文件工作，然后是一些具有自己 css 文件的网站内容 - 但它们似乎都在相互覆盖并隐藏其他项目！

有没有人有任何关于如何将所有这些分开或如何阻止这种情况发生的提示？

这是似乎正在改变一切的菜单 css 示例：http: [//pastebin.com/8Jd2XUUT](http://pastebin.com/8Jd2XUUT) 和核心菜单 css： http: [//pastebin.com/eVsRvxs5](http://pastebin.com/eVsRvxs5) 菜单 html： http: [//pastebin.com/ P7Qh0M8a](http://pastebin.com/P7Qh0M8a)主要站点 css：[http ://pastebin.com/kKqP0N1C](http://pastebin.com/kKqP0N1C)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:39:02.450

提供您的列表 ID，然后专门针对这些 ID。由于 ID 必须是唯一的，因此您可以定位一个列表而不影响另一个列表。

例如，使用以下 HTML：

```
<ol id="list1">
    <li>a</li>
    <li>b</li>
    <li>c</li>
</ol>
<ul id="list2">
    <li>1</li>
    <li>2</li>
    <li>3</li>
</ul> 
```

您可以使用以下 CSS

```
#list1 li {
    color: red;
}
#list2 li {
    color: blue;
} 
```

它将不同的颜色应用于每个列表的列表项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:54:07.587

了解[CSS 的特殊性](http://www.htmldog.com/guides/cssadvanced/specificity/)，以及如何使用类和 ID。这些概念将帮助您管理 CSS。

因此，在您的 HTML 中，您可以拥有：

```
<ul></ul>
<ul class="foo"></ul>
<ul class="foo" id="bar"></ul> 
```

然后在你的 CSS 中：

```
/* This targets all ul elements */
ul {
    font-size: 2em;
}
/* This targets only ul elements with a class of foo. It's more specific (has a higher specificity) than the above */
ul.foo {
    font-size: 3em;
    color: aqua;
}
/* The ul with a class of foo and an id of bar gets both sets of styles, but as ID has a higher specificity than class, the font size will be bigger. */
ul#bar {
    font-size: 4em;
} 
```

* * *

**编辑：**啊哈，我看到了问题！您的 CSS 文件似乎分别针对`<ul class="menu">`和中的项目`<ul class="lblue">`。您有一个`<ul class="menu lblue slide">`，这意味着两个 CSS 文件将针对相同的 ul ，一个将覆盖另一个。结果将是一团糟。

您需要将 HTML 中的两个菜单分开并相应地定位它们，例如

```
<ul class="menu"><!-- Put the menu HTML code here --></ul>
<ul class="lblue"><!-- Put the lblue HTML code here --></ul> 
```

您似乎也误解了 id 属性。每页只能使用一次 id，并且不能包含空格。所以`id="lblue li"`根本行不通。我建议现在删除它们！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:41:58.210

学习特异性规则[http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)

这将教您有关 id 的权重以及其中的类和组合。

还有要考虑的订单样式（相同权重最后获胜）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:44:34.840

尝试提供唯一的 id

```
<ul id="id">
    <li>content</li>
    <li>content</li>
</ul>

#id li {
    color: xx;   also you can try color:xx!important;
} 
```

# php - 我应该如何将用户与 symfony2 类中的固定问题和答案联系起来

> ID：11742524
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:33:44.250
> 
> 标签：php, symfony, linker, doctrine-orm

我有这些课程

```
class Questioncategory {
    one to many
    private $questions
} 
```

```
class Questions{
   many to one
   private $category

   one to many
   private $answers
} 
```

```
class answers {
    many to one
    private questions
} 
```

场景是，当我注册用户时，会有一组预定义的问题，例如用户必须填写的网页上的反馈表。问题将有不同的类别`personal questions`，例如`technical questions`等

1.  现在这些问题是固定的，但这些问题对于不同的年龄组是不同的。

2.  尽管对于同一个年龄段的问题是相同的，但我认为我需要先根据用户年龄段从数据库中获取问题，然后将其链接到用户表，还是有其他方法？

现在我的问题：

**如何在用户表中显示链接？**我是说

```
class user{
    private questions or answers or category
} 
```

我首先感到困惑

**如何在页面上明智地显示问题类别，例如**

```
personal questions

1What is you age  <input text box>
2What is your eye color <input text box
and other catregories 
```

我的意思是我应该如何迭代学说`$user->question->getcategory->getQuestions`

然后如何将表单与答案表绑定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:51:21.707

*   创建 AgeGroup 实体
*   添加关系用户有一个年龄组
*   添加关系 Questioncategory 属于一个 AgeGroup
*   获取用户问题列表：user->AgeGroup->Category->Questions 以获得可能的答案
*   添加关系用户->答案以获取用户选择的答案

# java - Java中不可交换的内存分配

> ID：11742527
> 
> 赞同：1
> 
> 时间：2012-07-31T14:33:49.777
> 
> 标签：java

我知道这是一个长镜头，但我需要构造一个安全的临时对象，并且一个想法是在内存中构造一个不会被换出到驱动器的缓冲区。这在Java中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:43:36.023

NIO 支持一种通常称为直接缓冲区的 ByteBuffer。直接缓冲区本质上可以像任何其他 ByteBuffer 一样使用（并作为 ByteBuffer 子类实现），但具有其底层内存分配在 Java 堆之外的属性。

但是从知道开始，缓冲区就在操作系统的控制之下。据我所知，您无法指示操作系统不要交换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:37:51.763

简而言之：没有。

您可以尝试 JNI 直接与主机操作系统交互（当然这不会是平台独立的）。

# python - 可以生成动态变量吗？

> ID：11742529
> 
> 赞同：1
> 
> 时间：2012-07-31T14:33:56.297
> 
> 标签：python, function, variables, multiprocessing

我想调用一个启动子进程的函数，如下所示：

```
processrrd = Popen(args1, stdout=PIPE, stderr=PIPE, env={'LANG':'de_DE@euro','TZ':'Europe/Berlin'})
outputrrd = processrrd.communicate()
(output, error) = outputrrd 
```

现在我想使用 multiprocessing.pool 来使工作人员瘫痪。问题是变量 outputrrd 被最后一个 Popen 覆盖了。那么，是否可以创建一个特定的变量（processrrd），比如 name1_processrrd？

问候。斯特凡

UDPATE：试过这个，但进程的输出是一样的......：

```
processrrd = []
processrrd.append((hostgroup+'_processrrd'))
print processrrd
    for name in processrrd:
        print name
        name = Popen(args1, stdout=PIPE, stderr=PIPE, env={'LANG':'de_DE@euro','TZ':'Europe/Berlin'})
        outputrrd = name.communicate()
    (output, error) = outputrrd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:38:01.300

甚至不考虑是否`multiprocessing`为您提供任何更好的方法（我猜它确实，但根本不了解它），您最好将每个句柄存储在某种数据结构中，例如 a`dict`或 a `list`，例如，

```
# TODO Use name and key that works for you.
my_processes['de_DE@euro'] = Popen(args1, stdout=PIPE, stderr=PIPE, env={'LANG':'de_DE@euro','TZ':'Europe/Berlin'}) 
```

# python - 如何使用 TermQuery 跨多个术语进行 AND 查询？

> ID：11742530
> 
> 赞同：2
> 
> 时间：2012-07-31T14:33:56.953
> 
> 标签：python, elasticsearch, pyes

我正在使用 pyes Python 库使用 elasticsearch。

假设我想查找所有带有 title="Rainbow" AND artist="Kermit" 的文档。以下返回 title="Rainbow" 或 artist="Kermit" 的文档。如何将其更改为 AND？

```
query = pyes.TermQuery()
query.add("title", "rainbow")
query.add("artist","kermit")
search = pyes.Search(query)
results = conn.search(search, index_name, doc_type) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:18:08.910

答案是将两个 TermQuery 包装在一个 BooleanQuery 中

```
q1 = pyes.TermQuery("title", "rainbow")
q2 = pyes.TermQuery("artist", "kermit")
query = BooleanQuery(must=[q1, q2])
search = pyes.Search(query)
results = conn.search(search, index_name, doc_type) 
```

# ruby-on-rails - 在rails中将字符串转换为类型时间戳

> ID：11742537
> 
> 赞同：4
> 
> 时间：2012-07-31T14:34:20.793
> 
> 标签：ruby-on-rails, ruby, timestamp

我有以下字符串`2012-7-31 09:38:00.000000`，我想在*PGadmin 中将*其转换为类型时间戳（无时区） 。ruby 中的哪些方法可以完成工作？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T14:40:29.580

尝试

```
DateTime.parse("2012-7-31 09:38:00.000000")

#output
Tue, 31 Jul 2012 09:38:00 +0000

DateTime.parse("2012-7-31 09:38:00.000000").to_i
#output is timestamp
1343727480 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T14:45:58.183

```
Time.parse("2012-7-31 09:38:00.000000").to_i 
```

# jquery - 尝试将两个跨度与 jQuery 结合在一起，需要帮助循环/迭代

> ID：11742539
> 
> 赞同：1
> 
> 时间：2012-07-31T14:34:22.213
> 
> 标签：jquery, loops, merge, iteration, each

我认为这是一个非常菜鸟的问题，但我现在已经考虑了很多小时，我就是想不通。

我需要在下面获取这个 html 代码并获取 .project_name 跨度和 .location 跨度以合并到同一个跨度中。

```
<ol id="projects" class="wide">
<li class="dontsplit" id="1234">
    <a href="/projects/1234" class="thickbox dontsplit">
        <span class='project_name dontsplit'>First Project Name</span>
        <span class='location dontsplit'>Combined with First Location</span>
        <span class='extra-info-span1'></span>
    </a>
</li>
<li class="dontsplit" id="1233">
    <a href="/projects/1233" class="thickbox dontsplit">
        <span class='project_name dontsplit'>Second Project Name</span>
        <span class='location dontsplit'>Combined with Second Location</span>
        <span class='extra-info-span2'></span>
    </a>
</li>
<li class="dontsplit" id="1232">
    <a href="/projects/1232" class="thickbox dontsplit">
        <span class='project_name dontsplit'>Third Project Name</span>
        <span class='location dontsplit'>Combined with Third Location</span>
        <span class='extra-info-span3'></span>
    </a>
</li>
</ol>​ 
```

我有这个 jQuery 代码，可以正确处理第一组跨度，但会继续使用第一个跨度的内容来填充其余部分。

```
var s1 = $('.project_name').html();
$('.project_name').remove();
$('.location').prepend(s1 + ' '); 
```

我假设我需要使用 .each() 或类似的东西，但我无法弄清楚使其工作的正确语法。这是迄今为止我所拥有[的 jsFiddle 。](http://jsfiddle.net/Honsou/C3ehM/)

有任何想法吗？这可能很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:38:11.660

如果你想保留`<span>`标签......（[小提琴](http://jsfiddle.net/QMa9w/18/)）

```
$(".location").each(function() {
   $(this).prepend(" ").prepend($(this).prev());
}); 
```

在这里，如果你*不想*保留`<span>`标签......（[小提琴](http://jsfiddle.net/QMa9w/13/)）

```
$(".location").each(function() {
    $(this).prepend($(this).prev().text() + " ");
    $(this).prev().remove();
});​ 
```

这当然可以通过遍历`.project_name`跨度来完成，我只是更喜欢这样做，`.location`因为这是我们实际保留的内容。

当您这样做时，`$("selector").each(function() { });`您可以使用`$(this)`来获取当前正在迭代的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:43:10.067

尝试这个 ：

```
$('.project_name').each(function(el){
 var s1 = el.html();
 el.remove();
 $(el.parent(),'.location').prepend(s1 + ' ');
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:40:44.330

这应该工作

```
var spantext="";

spantext += $('.project_name').text() + ", " + $('.location').text();
$('.project_name').remove();
$('.location').text(spantext); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:38:22.160

如果你想使用你的代码和平：

```
$('.dontsplit').each (function () {
  var html = $('.project_name', this).html();
  $('.project_name', this).remove();
  $('.location', this).prepend(s1 + ' ');
}); 
```

如果不是，我更喜欢这段代码（更*清楚*发生了什么，我认为*可读性*很重要）：

```
$('.dontsplit').each (function () {
  var text_1 = $('.project_name', this).text();
  var text_2 = $('.locaton', this).text();

  $('.project_name', this).remove()
  $('.locaton', this).remove();

  var text = text_1 + text_2           
  $('<span></span>').text(text_1 + text_2).appendTo(this);
}); 
```

# sql-server-2008 - SQL Server：从具有最大列值的记录中选择值

> ID：11742540
> 
> 赞同：0
> 
> 时间：2012-07-31T14:34:25.910
> 
> 标签：sql-server-2008

我有一些包含 3 列的表格：`ObjectID, ChangedOn, NewValue`.

样本数据：

```
ObjectId                                NewValue            ChangedOn
50E37991-777C-4813-B436-C6082CCA6BE2    Closed              2012-07-13 15:14:35.000
50E37991-777C-4813-B436-C6082CCA6BE2    ActiveForSupport    2012-07-13 15:13:33.930
50E37991-777C-4813-B436-C6082CCA6BE2    Closed              2012-07-13 15:12:47.787
50E37991-777C-4813-B436-C6082CCA6BE2    ActiveForSupport    2012-07-13 15:11:28.540
50E37991-777C-4813-B436-C6082CCA6BE2    Closed              2012-07-13 14:52:10.797
D9001738-E089-43B3-8E80-6993601C4E70    Closed              2012-06-27 08:03:27.550 
```

需要分组数据`ObjectId`并显示 3 列：`ObjectId, NewValue`对于包含`ChangedOn`分组的最大值和`ChangedOn`当前组的最大值的行

对于测试数据，我必须得到以下结果：

```
ObjectId NewValue 已更改
     50E37991-777C-4813-B436-C6082CCA6BE2 2012-07-13 15:14:35.000 关闭
     D9001738-E089-43B3-8E80-6993601C4E70 关闭 2012-06-27 08:03:27.550

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:11:17.713

尝试这个

```
CREATE TABLE test3(ObjectId uniqueidentifier,NewValue varchar(100),ChangedOn datetime)
INSERT INTO test3
VALUES('50E37991-777C-4813-B436-C6082CCA6BE2','Closed','2012-07-13 15:14:35.000'),
('50E37991-777C-4813-B436-C6082CCA6BE2','ActiveForSupport','2012-07-13 15:13:33.930'),
('50E37991-777C-4813-B436-C6082CCA6BE2','Closed','2012-07-13 15:12:47.787'),
('50E37991-777C-4813-B436-C6082CCA6BE2','ActiveForSupport','2012-07-13 15:11:28.540'),
('50E37991-777C-4813-B436-C6082CCA6BE2','Closed','2012-07-13 14:52:10.797'),
('D9001738-E089-43B3-8E80-6993601C4E70','Closed','2012-06-27 08:03:27.550')

select t1.ObjectId,t1.NewValue,t2.maxChangedOn  from test3 t1 inner join 
(select ObjectId,MAX(ChangedOn) maxChangedOn from test3
group by ObjectId) t2
on t1.ObjectId =t2.ObjectId and t1.ChangedOn =t2.maxChangedOn 
```

# java - 使用 PropertyChangeListener 和 DocumentListener 绑定模型和 GUI 时如何避免竞争条件？

> ID：11742549
> 
> 赞同：2
> 
> 时间：2012-07-31T14:34:58.560
> 
> 标签：java, swing, user-interface, data-binding

我想将 Java Swing JTextField 绑定到我的数据模型的 String 属性。

因此，我想使用**PropertyChangeListener**来侦听模型中文本属性的变化，然后更新 GUI 中的文本字段（模型--> GUI）。

对于另一个方向（GUI--> 模型） ，当用户更改字段中的文本时，我想在 JTextField 的文档上使用**DocumentListener来更新模型。**

当我这样做时，只要我更改文本字段中的文本，就会得到**IllegalStateException 。**

```
java.lang.IllegalStateException: Attempt to mutate in notification
  at javax.swing.text.AbstractDocument.writeLock(AbstractDocument.java:1323)
  at javax.swing.text.AbstractDocument.replace(AbstractDocument.java:644)
  at javax.swing.text.JTextComponent.setText(JTextComponent.java:1693)
      ... 
```

我怎样才能避免这种情况？

顺便说一句：BeansBinding 对我来说并不是一个真正令人满意的解决方案，因为它被放弃了，此外，我必须在对象图中实例化一些对象，然后才能写入它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:29:29.073

这不是竞争条件，因为一切都发生在同一个线程上。问题就像异常所说的那样：“在通知听众文本已更改的同时尝试更改文本”。

由于在这种情况下您尝试用相同的文本替换文本，因此您可以跳过属性更改侦听器中的更新：

```
if(!modelText.equals(textField.getText())) {
  textField.setText(modelText);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:47:29.943

这个问题之前已经讨论过：[https](https://stackoverflow.com/a/2789307/474189) ://stackoverflow.com/a/2789307/474189 。

简而言之，文档侦听器不应该修改文档的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T14:47:57.367

好吧，一个丑陋的解决方法可能是使用 SwingUtilities.invokeLater() 将 GUI 更新推迟到通知之外。

但是，我认为立即将第二级模型对象与 GUI 同步的整个方法是有缺陷的。GUI 有*自己的*模型（TextField 使用的文档）。您的模型应该实现它，然后您不需要做任何特殊的事情（然后您的模型对象将替换普通的 Document 作为模型）。

或者您决定在哪里同步 GUI 和*您的数据模型*的适当点。通常好的一点是当窗口/对话框打开以及用户单击确定/保存时。如果您立即同步模型，您将如何实施“取消”？

# android - Android：tabhost 比 tabs 更有意图

> ID：11742554
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:35:15.397
> 
> 标签：android, android-intent, tabs

这是我的问题：我有一个正常的选项卡活动，我的三个选项卡定义如下：

```
 TabSpec listatabs= tabHost.newTabSpec("App");
    listatabs.setIndicator("Lista", getResources().getDrawable(R.drawable.mia_lista));
    Intent listaIntent = new Intent(this, MIALISTA.class);
    listaIntent .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    listatabs.setContent(listaIntent );
    // Aggiungo i tabs
    tabHost.addTab(listatabs); 
```

问题是：如果用户进入这个选项卡（有一个项目列表），然后点击一个项目，我必须调用一个新的意图来显示内容（当然还有一个新的.class）......但我必须保留在感兴趣的选项卡中。我怎样才能实现这个想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:46:15.757

使用自定义 ActivityGroup：

创建一个类 TabGroupActivity：

```
public class TabGroupActivity extends ActivityGroup {

private ArrayList<String> mIdList;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (mIdList == null) mIdList = new ArrayList<String>();
}

/**
* This is called when a child activity of this one calls its finish method.
* This implementation calls {@link LocalActivityManager#destroyActivity} on the child activity
* and starts the previous activity.
* If the last child activity just called finish(),this activity (the parent),
* calls finish to finish the entire group.
*/
@Override
public void finishFromChild(Activity child) {
    LocalActivityManager manager = getLocalActivityManager();
    int index = mIdList.size()-1;

    if (index < 1) {
        finish();
        return;
    }

    manager.destroyActivity(mIdList.get(index), true);
    mIdList.remove(index);
    index--;
    String lastId = mIdList.get(index);
    Intent lastIntent = manager.getActivity(lastId).getIntent();
    Window newWindow = manager.startActivity(lastId, lastIntent);
    setContentView(newWindow.getDecorView());
}

/**
* Starts an Activity as a child Activity to this.
* @param Id Unique identifier of the activity to be started.
* @param intent The Intent describing the activity to be started.
* @throws android.content.ActivityNotFoundException.
*/
public void startChildActivity(String Id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        mIdList.add(Id);
        setContentView(window.getDecorView());
    }
}

/**
* The primary purpose is to prevent systems before android.os.Build.VERSION_CODES.ECLAIR
* from calling their default KeyEvent.KEYCODE_BACK during onKeyDown.
*/
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
//preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
return true;
}
return super.onKeyDown(keyCode, event);
}

/**
* Overrides the default implementation for KeyEvent.KEYCODE_BACK
* so that all systems call onBackPressed().
*/
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        onBackPressed();
        return true;
    }
    return super.onKeyUp(keyCode, event);
}

/**
* If a Child Activity handles KeyEvent.KEYCODE_BACK.
* Simply override and add this method.
*/
@Override
public void onBackPressed() {
    int length = mIdList.size();
    if ( length > 1) {
        Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
        current.finish();
    }
} 
```

在您的自定义活动中，例如“HomeTabGroupActivity”：

```
public class HomeTabGroupActivity extends TabGroupActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    startChildActivity("HomeMainActivity", new Intent(this, HomeMainActivity.class));

}
} 
```

在活动 A 中，使用它转到活动 B：

```
Intent i = new Intent(getParent(),ActivityB.class);
        TabGroupActivity parentActivity = (TabGroupActivity)getParent();
        parentActivity.startChildActivity("ActivityB", i); 
```

让标签带你到“HomeTabGroupActivity”

如果您想在选项卡组中使用 startActivityForResult ，请告诉我，我会为此发布一些修复。

# r - seq 和 == 运算符的神秘行为。精度问题？

> ID：11742556
> 
> 赞同：4
> 
> 时间：2012-07-31T14:35:20.360
> 
> 标签：r, precision, seq

我遇到了函数的某种奇怪（或只是没想到？）的行为`seq`。创建简单序列时，某些值无法与 == 运算符正确匹配。看这个最小的例子：

```
my.seq <- seq(0, 0.4, len = 5)
table(my.seq)                  # ok! returns  0 0.1 0.2 0.3 0.4 
                               #              1   1   1   1   1 

which(my.seq == 0.2)           # ok! returns  3
which(my.seq == 0.3)           # !!! returns  integer(0) 
```

手动创建我的序列时，它似乎可以工作，但是：

```
my.seq2 <- c(0.00, 0.10, 0.20, 0.30, 0.40)

which(my.seq2 == 0.3)           # ok! returns  4 
```

你对此有什么解释吗？我通过使用解决了这个问题，`which(round(my.seq, 2) == 0.3)`但我会对导致问题的原因感兴趣。

提前感谢您的评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:05:04.040

计算机只是不能很好地表示浮点数。作为大多数人在计算机上处​​理数字的主要方式，电子表格隐藏这一点的一般趋势导致了许多问题。

永远不要匹配精确的浮点值。R 中有一些函数可以处理这个问题（例如`all.equal`），但我更喜欢以下函数。

假设您有一个未知的浮点变量 A，并且您想查看它是否等于 0.5。

```
abs(A - 0.5) < tol 
```

将公差设置为您需要的接近程度为 0.5。例如，`tol <- 0.0001`可能适合您。

如果您的值看起来应该是整数，则只是四舍五入。或者，如果您知道要测试的十进制级别，则可以四舍五入到该十进制级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T14:40:21.223

计算机很难存储准确的值。

```
> options(digits=22)
> seq(0, .4, len = 5)
[1] 0.0000000000000000000000 0.1000000000000000055511 0.2000000000000000111022
[4] 0.3000000000000000444089 0.4000000000000000222045
> .4
[1] 0.4000000000000000222045
> c(0, .1, .2, .3, .4)
[1] 0.0000000000000000000000 0.1000000000000000055511 0.2000000000000000111022
[4] 0.2999999999999999888978 0.4000000000000000222045 
```

由于我们使用二进制浮点表示，我们无法准确表示感兴趣的值。看起来，因为 .4 的值比 0.4 高一点，所以 .3 的值比你自己键入 .3 的值高一点。我相信其他人会为此提供更好的解释，但希望这能对这个问题有所了解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T15:28:31.123

这是[FAQ 7.31](https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f)，它也有一个链接到一个更长的一般问题讨论。

# java - Spring-WS、REST、SOAP、HTTP、JMS

> ID：11742558
> 
> 赞同：1
> 
> 时间：2012-07-31T14:35:22.237
> 
> 标签：java, spring, spring-ws

我刚刚开始我的网络服务之旅，现在我有很多问题。有很多事情我不清楚，所以一些澄清会非常有帮助。

1.  为什么`@Endpoint`在创建 Spring 3 REST 应用程序时不使用注解？
2.  Spring REST Web 服务是否也创建一个 .wsdl？
3.  SOAP 和 REST 有什么区别？
4.  如何使用 SOAP Web 服务发送请求和接收响应？
5.  如何使用 REST Web 服务发送请求并接收响应？
6.  是否可以将 JMS 与 Spring 一起使用来公开 REST 或 SOAP Web 服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:47:50.283

一个问题太多了......问题，但这里有一些概述：

> 为什么`@Endpoint`在创建 Spring 3 REST 应用程序时不使用注解？

对于 REST，您可以使用外部 JAX-RS 框架或 Spring MVC。Spring 中的 REST 端点基本上是控制器，这就是它们的注释方式。`@Endpoint`在模块中引入`spring-ws`，它们并不真正相关。

> Spring REST Web 服务是否也创建一个 .wsdl？

不，传统上 WSDL 仅用于描述 SOAP Web 服务。REST Web 服务有[wadl](/questions/tagged/wadl "显示标记为“wadl”的问题")，Spring 还没有（[还](https://jira.springsource.org/browse/SPR-8705)）自动生成它。

> SOAP 和 REST 有什么区别？

非常广泛的问题。原则上 SOAP 使用定义良好的 XML 消息，通常通过 HTTP POST。REST 与 GET、POST、PUT、内容协商、HATEOS 等 HTTP 动词有内在联系……它与 HTTP 协议的关系更密切，也更灵活。

> 如何使用 SOAP Web 服务发送请求和接收响应？

任何能够通过 HTTP POST 发送 XML 的客户端都可以与 SOAP 服务交互。通常，您将创建基于 WSDL 的 Java 客户端（使用 REST 并不那么简单）。

> 如何使用 REST Web 服务发送请求并接收响应？

与上述方式相同，但通常您可以使用不同的内容类型，例如 JSON。此外，您必须使用不同的 HTTP 方法来运行不同的功能。

> 是否可以将 JMS 与 Spring 一起使用来公开 REST 或 SOAP Web 服务？

不确定您想要实现什么...从技术上讲，您可以将 JMS 用作 SOAP（而不是 REST）的传输层，但这对于一开始来说太先进了。

# azure - 如何为 Azure 托管网站/Web 角色设置 A 记录？

> ID：11742559
> 
> 赞同：3
> 
> 时间：2012-07-31T14:35:24.913
> 
> 标签：azure, azure-web-roles, azure-web-app-service

我们想在 Windows Azure 上托管一个网站，从技术上讲，它可以是*网站*或*Web 角色*，我们并不特别在意。目前有没有办法为他们中的任何一个设置 A 记录？

似乎*共享*网站根本不支持 DNS 条目，而*保留*实例仅支持 CNAME。Web 角色是否支持 A 类 DNS 记录？

如果不是，Azure 上的实际部署如何处理这个问题？对于我们的网站，绝对有必要同时提供`www.example.com`和`example.com`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T16:33:38.467

**[更新]**自 9.17.2012 起，可以将 A 记录添加到[azure-web-sites](/questions/tagged/azure-web-sites "显示标记为“天蓝色网站”的问题")实例，请按照WindowsAzure.com 上[的为 Windows Azure 网站配置自定义域名](https://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)说明进行操作

* * *

~~不可能~~建议A 记录，但可以建议 CNAME。

Steve Marx 写了关于[在 windows azure 上设置自定义域的](http://blog.smarx.com/posts/custom-domain-names-in-windows-azure)博客，你会想看看那个。

> 还有[DNSAzure](http://dnsazure.com)，我从未尝试过该服务，只是说这是一个潜在的选择。我不保证它是受支持的替代方案，也不保证它是有效的服务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T15:16:42.537

目前您不能为网站使用 A 记录或裸域。对于 Web 角色，这是可能的，但有一点需要注意。

每次您第一次部署到空槽（生产/暂存）时，您都会获得一个保留的 IP 地址，并且您将保留该地址，直到您删除该部署。因此，您可以在该 IP 地址上使用 A 记录，但请注意永远不要删除它，否则您将丢失 IP 地址。

引用[Windows Azure 网站](https://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)：

> 但是请注意，由于 IP 地址的生命周期与部署相关联，因此如果您需要保留 IP 地址，请务必不要删除您的部署。方便的是，在 Windows Azure 中使用两种升级机制时，给定部署槽（生产或暂存）的 IP 地址会保持不变：VIP 交换和就地升级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T13:33:19.870

我一直在**努力解决这个问题**。我在 DNS（路由 53）中有一个通配符 CNAME 来映射所有内容

```
*.example.com to example.cloudapp.net 
```

一切都好。**除了**该死的**裸（根）域**。

我以前使用 301 重定向，因为我有一个具有静态 IP 的专用服务器。只是有一个

```
A record for example.com to server IP 
```

然后在 IIS 中使用简单的正确绑定的站点

```
HTTP redirect (permanent 301) 
```

一切都很好，生活也很好。然后我们摆脱了我们的专用服务器，突然间......没有明智的方法将裸流量带到 example.cloudapp.net 地址！痛苦，问题，数小时的谷歌搜索，如此简单且如此明显必要的事情怎么会如此痛苦（或花费如此之多）......

**然后......即将沮丧地认输并购买一些不必要的托管/服务**......我偶然发现了梦幻般的[wwwizer.com](http://wwwizer.com/naked-domain-redirect "wwwizer.com")

**欢乐一分钟**后又是**晴天**

# php - 带有空格的图像文件名

> ID：11742560
> 
> 赞同：4
> 
> 时间：2012-07-31T14:35:25.520
> 
> 标签：php

我通过 php 扫描图像文件夹得到一组图像 URL。一些图像文件名有空格。空白之后的部分丢失了。例如：这个文件很好：

```
http://domain.com/folder/blue-sky.png 
```

此文件将丢失部分 sky.png

```
http://domain.com/folder/blue sky.png 
```

我用于扫描文件夹的代码与检查或操作文件名无关。如何在 `blue sky.png`不将其重命名为的情况下获得全名`blue-sky.png`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T14:37:31.520

url 编码中的空格用字符串“%20”表示，因此您可能希望使用[str_replace](http://php.net/manual/en/function.str-replace.php)将“”字符的每个实例替换为字符“%20”

```
echo str_replace(' ', '%20', 'http://domain.com/folder/blue sky.png'); 
```

将输出

```
http://domain.com/folder/blue%20sky.png 
```

* * *

**补充资料**

另外，我自己从未使用过它，但如果我是你，我会看看 php 函数[urlencode](http://php.net/manual/en/function.urlencode.php)，它可能包含有用的信息

注意：Url 编码将转换不是字符串标准的每个字符（因此您可能只想在作为图像名称的字符串上使用 urlencode）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T15:29:36.287

我遇到了这个问题，但是在尝试了上面的答案之后，我意识到真正的问题是我编写的 html 链接没有使用引号 - 通常浏览器可以容忍这个问题，但如果存在空格则不能。即，我编写了类似于
href=../folder/blue sky.png
而不是
href="../folder/blue sky.png"
的代码地址中使用正确的语法空格不会导致问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:40:14.800

您可以使用正则表达式。

尝试;

```
$file_name = "http://domain.com/folder/blue sky.png";
$file_name2 = preg_replace("/ /", "-", $file_name);
echo $file_name2; //echos http://domain.com/folder/blue-sky.png 
```

希望这可以帮助...

# javascript - 当您在javascript中更改另一个输入时更改一个输入

> ID：11742563
> 
> 赞同：1
> 
> 时间：2012-07-31T13:10:48.863
> 
> 标签：javascript, html, mysql

很难定义标题^^

我想必须输入字段。例如：一个输入颜色（字符串），另一个输入颜色代码（varchar）。

像这样：|绿色| |#657EC9| （只是随机的颜色代码）

我不想学习如何找到颜色代码，而是如何将一个值或变量与另一个匹配。这只是一个例子。

我想知道的是，当我填写第二个字段时，我如何以最佳方式自动生成其中一个字段。当我在第一个字段中键入“绿色”时，我希望代码自动出现在第二个字段中，反之亦然。我只想为几种颜色做。

我对 PHP、HTML 和 Javascript 非常陌生，可能需要一些关于如何处理问题的好建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:19:37.390

我倾向于将值映射到对象文字，所以：

```
var colors = {
    Green:'#657EC9',
    Red:'#00ffff'
} 
```

现在您可以通过`colors[fieldInputVal]`fieldInputVal 可能为“绿色”或“红色”的位置获取您的值，尽管您当然必须测试那里是否真的有一个属​​性。对象字面量是我在 JS 中很少使用 switch 语句的主要原因。

至于事件 JS，我会偷懒并使用 JQuery，而不是解释 attachEvent 与 addEventListener，如果您支持 IE8 或更低版本，这将是必要的。如果您想自己规范化并跳过 JQuery，请在 quirksmode.org 上查找“addEvent 竞赛”

```
$('.input_one').change( function(){
    //note: only fires after the field loses focus - you tab out or focus another field
    var inputVal = $(this).val();
    if(colors[inputVal] !== undefined){
        $('.input_two').val(colors[inputVal]);
    }
} ); 
```

注意：我没有测试这段代码的语法错误。

如果您想更灵活并接受“绿色”或“绿色”，我会在您使用它进行查找之前将第一个字符大写。要查找每个添加的字符，您必须查找 keyup 或 keydown 事件（我更喜欢 keyup 以避免在有人按住键时破坏浏览器）。

# moodle - 在一个主题中处理两列

> ID：11742565
> 
> 赞同：0
> 
> 时间：2012-07-31T14:35:33.357
> 
> 标签：moodle

我想在 Moodle 中有类似的布局，就像这里的一样

[http://moodlecommons.org](http://moodlecommons.org/course/view.php?id=58)

基本上我想在一个主题的左侧有一个图像，在右侧有一个活动。

我尝试使用标签插入图像并且没问题，但我无法对齐图像右侧的活动。

有谁知道可以做到这一点的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:49:56.023

我没有对它进行深入测试，但它应该可以工作：

您可以做的是修改 /course/format/YOURFORMAT/format.php - 搜索打印活动的位置：

```
print_section($course, $thissection, $mods, $modnamesused); 
```

并将上面的这一行替换为：

```
$allsectionmods = explode(",", $thissection->sequence);
foreach ($allsectionmods as $modnumber) {
    if (empty($mods[$modnumber])) {
        continue;
    }
    $firstmod = array($modnumber => $mods[$modnumber]);
    unset($mods[$modnumber]);
    break;
}
echo '<div style="float:left">';
print_section($course, $thissection, $firstmod, $modnamesused);
echo '</div>';
echo '<div>';
print_section($course, $thissection, $mods, $modnamesused);
echo '</div>';
echo '<div style="clear:both">'; 
```

这将在其他部分的左侧打印每个部分的第一项（因为它们是浮动的）。现在您只需确保每个部分的第一项是包含图像的标签。

# python - 如何在 Python2.2 上检查 Windows 是 32 位还是 64 位

> ID：11742567
> 
> 赞同：2
> 
> 时间：2012-07-31T14:35:40.653
> 
> 标签：python, windows, operating-system, x86-64

在python2.7中很简单，只需要导入lib平台即可。但是我如何查看我的 Windows 是 32 位还是 64 位？我使用python2.2中的系统构建，但找不到这样做的方法:(

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T14:56:57.290

[`platform`模块](http://docs.python.org/library/platform.html) [源代码](http://hg.python.org/cpython/file/2.7/Lib/platform.py)信息丰富。

从那里向后移植以确定 Windows 平台上的机器架构，它将使用：

```
import os

def machine():
    try:
        return os.uname()[-1]
    except AttributeError:
        if "PROCESSOR_ARCHITEW6432" in os.environ:
            return os.environ.get("PROCESSOR_ARCHITEW6432", '')
        else:
            return os.environ.get('PROCESSOR_ARCHITECTURE', '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:58:52.570

在 Python 2.x 中，您可以这样做：

```
import sys
print sys.maxint 
```

并检测它是否为 32/64 位`sys.maxint`。

**注意：**如果您在 64 位机器上运行 32 位 Python，此方法可能会失败。

# php - PHP CSV循环通过相同的列名

> ID：11742573
> 
> 赞同：0
> 
> 时间：2012-07-31T14:35:57.873
> 
> 标签：php, csv

下面的代码完美无缺，除了它只会发布第一个包含`main_`. 我需要它来获取包含“main_”字样的任何列值，从而使我能够发布多个图像。因此，如果我有 3 个或更多`main_img_url`，循环应该知道这一点并相应地添加它们。我在下面注意到图像的位置处理程序开始和结束。

这是一个示例 CSV：

```
post_title, post_content, main_img_url, main_img_url 
```

这是我的代码：

```
function app_csv_to_array($file = '', $delimiter = ',') {
    if(!file_exists($file) || !is_readable($file))
        return false;
    $header = NULL;
    $data = array();
    if(false !== $handle = fopen($file, 'r')) {
        while(false !== $row = fgetcsv($handle, 1000, $delimiter)) {

            if($header)
                $data[] = array_combine($header, $row);
            else
                $header = $row;
        }
        fclose($handle);
    }
    return $data;
}

    function process($file) {
        $rows = $this->app_csv_to_array($file);
        foreach($rows as $row) {
            $post['post_title'] = sanitize_text_field($row['post_title']);
            $post['post_content'] = sanitize_text_field($row['post_content']);
            $post['post_status'] = 'publish';
            $post['post_author'] = 658;

        $post_id = wp_insert_post($post);
        //////////////// I want the loop to start here   //////////////////
            foreach($row as $key => $val) {
              if(strstr($key, 'main_')) {
                $tmp = download_url( $file );
                preg_match('/[^\?]+\.(jpg|JPG|jpe|JPE|jpeg|JPEG|gif|GIF|png|PNG)/', $file, $matches);
                $filename = strtolower(basename($matches[0]));
                  } 
            }
//////////////// ends here   //////////////////
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:20:14.217

您的问题在`app_csv_to_array`方法内部，特别是在`array_combine`.

根据[文档](http://php.net/manual/en/function.array-combine.php) `array_combine`，将从两个输入数组创建一个关联数组，其中第一个数组的值作为其键，第二个数组的值作为其值

由于您的密钥是`csv`文件的标题：

```
post_title, post_content, main_img_url, main_img_url 
```

最终将返回的结果数组将只有一个插槽 `main_img_url`作为其键。

规避此问题的方法是确保 csv 文件中的标题是唯一的，同时允许`strstr($key, 'main_')`匹配您的列内容。就像是：

```
post_title, post_content, main_img_url1, main_img_url2 
```

# objective-c - 使用单个对象/键替代 NSDictionary

> ID：11742576
> 
> 赞同：2
> 
> 时间：2012-07-31T14:36:04.070
> 
> 标签：objective-c, c, syntax, struct, nsdictionary

假设我想要一个包含字符串作为键值的项目，使用我会编写的字典：

```
[NSDictionary dictionaryWithObject:@"someString" forKey:@"stringKey"]; 
```

我在问如何在没有字典（模棱两可，程序员需要知道键）或对象（这个瘦对象的过度杀伤，不需要方法）的情况下做到这一点，在结构行中更多的东西，我之前尝试过结构，但我没有在 iOS 中看到任何`chars`用作结构项的结构，所以我不确定这是要走的路。结果应该与此类似：

```
replacement.key = value; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:54:51.063

除非您遇到非常专业的问题，否则小数据对象很少会过大。例如，如果你有成千上万个这样的对象，特别是如果你需要快速创建和销毁它们，并且你已经分析了你的应用程序并发现对象本身是一个真正的问题，那么你应该考虑不使用简单的数据对象. 但在一般情况下，您应该使用简单的数据对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:03:16.280

`@property`一个带有和的薄对象`@synthesize`将为您节省创建方法的任何痛苦。所有实例变量都将在没有您的任何代码的情况下创建和修改。

这样的对象定义几乎不会比结构大，并且作为 的子类`NSObject`，它可以放在任何数组或其他只接受`NSObject`子类的框架容器中。您将无法使用结构来做到这一点。

如果您使用 XCode 4.4（用于 Mac 开发）或 4.5（用于 iOS），您甚至可以放弃`@synthesize`并且只有`@property`.

只有当您对性能非常严格并且需要摆脱`NSObject`层次结构时，您才应该考虑放弃它并使用 C 结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:50:42.513

我不确定，如果它是你想要的，但你**可以**使用`struct`：

```
 typedef struct {
    __unsafe_unretained NSString* key;
   ...
 } foo;

 foo bar;
 NSString* foobar = @"Hello";
 bar.key = foobar; 
```

注意，ARC 没有理由不处理这个值。但是，如果您对该值有强引用，则可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:03:25.200

为什么不直接使用字典，而是创建一组 NSString 常量作为键？那么歧义就会减少。

例如，考虑 Apple 用于从 NSError 的 userInfo 字典中检索本地化字符串的键常量`NSLocalizedDescriptionKey`。[许多其他键也用于检索信息的特定部分，](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/uid/20001704-CJBIAHGF)因为这些键是常量，所以它们很容易在 Xcode 中使用（自动完成）。另一个使用字符串常量从 NSDictionary 中检索值的例子是[NSFileManager](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000305-SW2)。

此外，仅使用对象也应该没问题，在大多数情况下，“开销”应该可以忽略不计——当然用户不会注意到任何事情。至少，[请不要尝试过早地优化您的代码](https://softwareengineering.stackexchange.com/questions/80084/is-premature-optimization-really-the-root-of-all-evil)，以应对在很远的将来*可能发生的情况......*

# mysql - Magento 用 SQL 替换 ORM 调用

> ID：11742579
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:36:15.943
> 
> 标签：mysql, magento

我试图找出表结构以用 SQL 查询替换以下内容。我还不能完全解决这个问题。

`$product = Mage::getModel('catalog/product')->load($product_id);
return $product->getAttributeText('Color');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:57:20.013

您无需弄清楚表结构并再次在 SQL 中构建查询。

只需在文件中启用`$_debug`和，下次刷新任何特定页面时，您就可以在文件中看到在 Magento 中运行的每个查询。`$_logAllQueries``lib/Varien/Db/Adapter/Pdo/Mysql.php``var/debug/pdo_mysql.log`

# sql - Oracle SQL查询中的方括号是什么意思？

> ID：11742580
> 
> 赞同：6
> 
> 时间：2012-07-31T14:36:16.873
> 
> 标签：sql, oracle, oracle10g, oracle11g

我在其中找到带有方括号的 select 语句。谁能解释这个括号是什么意思？

例如

```
select a,b,[c] from table1; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-26T21:47:57.257

这不是有效的 Oracle SQL 也不是 PL/SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:42:11.867

根据oracle的文档：[http ://docs.oracle.com/cd/B10500_01/text.920/a96518/cqspcl.htm](http://docs.oracle.com/cd/B10500_01/text.920/a96518/cqspcl.htm)

> 括号字符用于对字符之间的术语和运算符进行分组；但是，它们会阻止扩展运算符（fuzzy、soundex、stem）的渗透。

它是查询中的分组字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-27T04:47:31.697

Oracle SQL 中的方括号仅用于[`MODEL`子句](http://docs.oracle.com/database/121/DWHSG/sqlmodel.htm#DWHSG022)中的单元格引用。例如：

```
select *
from dual
model
    dimension by (0 the_dimension)
    measures (0 the_measure)
    rules iterate(5)
    (
        the_measure[iteration_number] = iteration_number
    );

THE_DIMENSION   THE_MEASURE
-------------   -----------
0               0
1               1
2               2
3               3
4               4 
```

其他数据库可能会使用方括号，就像 Oracle 使用双引号一样 - 使标识符能够使用保留字或其他奇怪的名称。但是这样的查询在 Oracle 中是无效的：

```
select a,b,[c] from table1; 
```

在很多情况下，字符串中的方括号可能对某些 Oracle 特性具有特殊意义。但是字符串中的字符通常不算作语言语法的一部分，否则语法永远不会结束。JSON、文本、正则表达式和 XML 是一些流行的 Oracle 特性，它们在字符串中使用方括号，但任何人都可以创建自己的自定义子语言。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-31T14:42:42.157

当表名包含空格时，例如使用 select 语句中的方括号

```
select * from [Department Managers] 
```

另一个需要 [] 的情况是当列或表名是内置 SQL Server 函数或关键字的名称时，例如，如果从其中调用列，则必须像这样访问它

```
Select [From],[To] from tbl 
```

祝你好运

# android - 如何使用 Eclipse 生成 mapping.txt？

> ID：11742582
> 
> 赞同：6
> 
> 时间：2012-07-31T14:36:27.553
> 
> 标签：android, eclipse, proguard

我阅读了 Android 开发者[页面](http://developer.android.com/tools/help/proguard.html)和网络上的其他页面。但我找不到从 Eclipse 生成 mapping.txt 的方法。

如果 Eclipse 正在生成这个文件，它保存在哪里？

我有*project.properties*：

```
target=android-14
proguard.config=proguard.cfg 
```

和*proguard.cfg*：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

*.project*和*.classpath*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T19:08:22.667

当前版本的 Eclipse 插件 (20.0.0) 默认允许 ProGuard 将映射文件写为`proguard/mapping.txt`（导出 apk 时）。

默认情况下，Ant 构建过程允许 ProGuard 将映射文件写为`bin/proguard/mapping.txt`（在创建发布构建时）。

参照。Android SDK 文档 > 开发 > 工具 > ProGuard。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T10:16:44.337

是的，我解决了。只需在 Proguard.cfg 中添加这些行，您将在项目文件夹中获得**Proguard**命名文件夹：

```
-dump proguard/class_files.txt 
-printseeds proguard/seeds.txt 
-printusage proguard/unused.txt 
-printmapping proguard/mapping.txt 
```

希望这可以帮助某人。

# php - 这个查找条件有什么问题

> ID：11742585
> 
> 赞同：0
> 
> 时间：2012-07-31T14:36:42.263
> 
> 标签：php, cakephp

以下工作，它给了我所有删除为空的数据：

```
$conditions = array('OR' => array(

    'Task.deleted' => null,

    )

);

$this->set('tasks', $this->Task->find('all', array('recursive' => 2, 'conditions' => $conditions))); 
```

类似以下给我所有删除为 0 的数据

```
$conditions = array('OR' => array(

 'Task.deleted' => 0,

)

); //... 
```

但是如果我像下面这样组合它，它会给我删除为空的数据，而不是删除为 0 的数据。

```
$conditions = array('OR' => array(

        'Task.deleted' => 0,
        'Task.deleted' => null

        )

); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:39:59.387

您试图设置 PHP 数组键`'Task.deleted'`两次，覆盖它。执行以下任一操作：

```
'Task.deleted' => array(0, null) 
```

或者：

```
'OR' => array(
    array('Task.deleted' => 0),
    array('Task.deleted' => null)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:44:42.623

读这个

[http://book.cakephp.org/1.3/view/1030/Complex-Find-Conditions](http://book.cakephp.org/1.3/view/1030/Complex-Find-Conditions)

或者

```
$conditions = array(
    'OR' => array(
       array('Task.deleted' => 0),
      array('Task.deleted' => null)
    )
    );

$this->set('tasks', $this->Task->find('all', array('recursive' => 2, 'conditions' => $conditions))); 
```

# c# - 带有查询字符串的 Server.Transfer 调用调用当前页面而不是给定页面

> ID：11742587
> 
> 赞同：1
> 
> 时间：2012-07-31T14:36:45.880
> 
> 标签：c#, asp.net

我没有太多运气找到关于这个的很多信息……</p>

我有一个 ASP 页面，它是从其他地方的代码中调用的，带有一个查询字符串：

```
[domainpath]/FulfilmentReceipt.aspx?fulfilmentId=226F7486-3D30-439D-92BB-94972234A809 
```

在`Page_Load`有一个`Server.Transfer`调用应该将响应执行移动到具有不同查询字符串的另一个页面（`Format()`顺便说一句，下面似乎可以正常工作）：

```
Server.Transfer(String.Format("confirmationReceipt.aspx?bId={0}&f={1}&print=true", basketId, franchiseeId))) 
```

接下来是我不明白的一点。转接呼叫似乎被路由回*FulfilmentReceipt.aspx*，即第一页，但带有新的查询字符串。这会导致错误，因为`fulfilmentId`现在缺少查询字符串的一部分。为什么这没有`confirmationReceipt`按预期调用？

我可以通过调试进程来确认该`confirmationReceipt`页面永远不会被调用，并且`fulfilmentReceipt`加载了两次。*Global.asax*文件中根本没有代码，因此那里没有路由，`confirmationReceipt`页面本身没有`Redirect`或`Transfer`调用，非常简单。

此外，浏览器地址栏中呈现的错误页面显示了新的查询字符串，但作为原始 URL 的一部分。我曾认为看到的 URL 不应该因为`Server.Transfer`.

有任何想法吗？

非常感谢。

**更新**

我没有取得任何真正的进展，但听从里希霍芬的建议，我得到了一些结果。当调用来自浏览器时，使用`Response.Redirect`而不是`Server.Transfer`提供所需的结果。但是调用是由无法处理重定向响应的第三方库进行的。

尝试`Server.Transfer`使用该`preserveForm`选项没有任何区别。为了澄清，转移最终调用`FulfilmentReceipt.aspx?bId={0}&f={1}&print=true`. 错误的页面，正确的查询字符串。

**更多更新**

我已经通过重构`confirmationReceipt`页面以接受传递给的查询字符串`fulfilmentReceipt`并将`Server.Transfer`调用更改为简单地转移到`confirmationReceipt`而不指定查询字符串来解决我的问题。传输比使用原始查询字符串转到正确的位置。

尽管出于好奇，这个问题仍然存在。只是`Server.Transfer`不能正确处理包含查询字符串的网址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:35:55.083

正如最初作为上面的更新发布的那样，我通过重构confirmationReceipt 页面以接受传递给fulfilmentReceipt 的查询字符串并将Server.Transfer 调用更改为简单地传输到confirmationReceipt 而不指定查询字符串来解决我的问题。传输比使用原始查询字符串转到正确的位置。

这并不理想，因为一些处理现在完成了两次（将查询字符串转换为更有用的东西），但它可以工作，所以我很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:09:44.453

Server.Transfer 和 Response.Redirect 经常被混淆。如果你想传递新的查询字符串值，你应该使用 Response.Redirect。

Server.Transfer 更改 IIS/ASP.NET 正在处理的单个请求的行为。它在服务器上启动一个新请求，但对最终用户来说，请求仍然是同一个页面。您实际上是在将控制权移交给新页面。您可以传递一个参数，一个布尔值，以保留表单值。但通常大多数情况下，如果您更改查询字符串路径，您应该使用 Response.Redirect 以便 URL 出现在用户的浏览器中（用户代理将收到 302 重定向而不是 200 OK）。

“转接电话似乎被路由回 FulfilmentReceipt.aspx”

听起来像confirmationReceipt.aspx 可能有一个重定向回“FulfilmentReceipt.aspx”。但是因为您没有传递“True”，所以收据查询字符串 id 会丢失。如果您将“true”作为第二个参数传递给 Server.Transfer，您的示例可能会起作用。但是，如果是我的代码，最好的选择是使用 Response.Redirect 将其更改，并观察 Fiddler 或其他工具中的响应跟踪，以确切了解幕后情况。

# c++ - 为什么初始化地图时不能省略大括号？

> ID：11742592
> 
> 赞同：13
> 
> 时间：2012-07-31T14:36:53.653
> 
> 标签：c++, c++11, initializer-list

受此[答案](https://stackoverflow.com/a/11735045/476681)的启发，我尝试了下一个示例：

```
#include <map>
#include <string>
#include <iostream>

int main()
{
  const std::map< int, std::string > mapping = {
      1, "ONE",
      2, "TWO",
    };

  const auto it = mapping.find( 1 );
  if ( mapping.end() != it )
  {
    std::cout << it->second << std::endl;
  }
  else
  {
    std::cout << "not found!" << std::endl;
  }
} 
```

并且编译失败并出现下一条错误消息（g++ 4.6.1）：

```
gh.cpp:11:5: error: could not convert '{1, "ONE", 2, "TWO"}' from '<brace-enclosed initializer list>' to 'const std::map<int, std::basic_string<char> >' 
```

我知道如何解决它：

```
 const std::map< int, std::string > mapping = {
      {1, "ONE"},
      {2, "TWO"},
    }; 
```

但是为什么在上面的例子中编译失败了？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-31T14:41:23.203

因为地图是非聚合的，并且包含非聚合元素 ( `std::pair<key_type, mapped_type>`)，所以它需要一个包含初始化列表的初始化列表，每对一个。

```
std::pair<int,int> p0{ 1,2 }; // single pair
std::map<int, int> m { { 1,2 } }; // map with one element
std::map<int, int> m { { 1,2 }, { 3,4} }; // map with two elements 
```

请记住，括号省略的规则适用于聚合，因此它们不适用于此处。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-31T14:52:42.593

C++11 标准只允许在目标是聚合时省略大括号：

> 8.5.1 聚合 [dcl.init.aggr]
> 
> 聚合是一个数组或类（第 9 条），没有用户提供的构造函数（12.1），没有用于非静态数据成员的大括号或等号初始化程序（9.2），没有私有或受保护的非静态数据成员（第 11 条），没有基类（第 10 条），也没有虚函数（10.3）。
> 
> ...
> 
> *（第 11 段）*
> 
> 在表格声明中
> 
> ```
> T x = { a }; 
> ```
> 
> 可以在初始化列表中省略大括号，如下所示。如果初始化器列表以左大括号开头，则后续的初始化器子句的逗号分隔列表初始化子聚合的成员；初始化子句比成员多是错误的。但是，如果子聚合的初始化器列表不以左大括号开头，则仅从列表中获取足够的初始化器子句来初始化子聚合的成员；任何剩余的初始化子句都被留下来初始化当前子聚合是其成员的聚合的下一个成员。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T14:41:52.973

自从我完成 C++ 以来已经有很长时间了，但我的猜测是因为`std::map`期待一组单独的对象，每个对象都包含一个键和一个值对。

拥有单个项目的单个列表没有意义，而且也很难阅读（以确保您有许多项目可以完全被 2 整除）。

# java - 只有两个 int 属性的自定义类的 hashCode 是多少？

> ID：11742593
> 
> 赞同：39
> 
> 时间：2012-07-31T14:36:54.107
> 
> 标签：java, equals, hashcode

在 Java 中，我有一个类，它表示具有 int 坐标的点

```
public class Point {
    int x = -1;
    int y = -1;

    public Point (int xNew, int yNew) {
        x = xNew; y = yNew;
    }

    public boolean equals (Object o) {
        // no need for (o instanceof Point) by design
        return x == ((Point)o).x && y == ((Point)o).y;
    }
} 
```

我使用类的对象`Point`作为 a 中的键和 a`HashMap`中的元素`HashSet`。

该功能的最佳候选者是`hashCode`什么？我会把它加倍，这样左边的部分是 x，右边的部分是 y，例如： `x = 4, y = 12`，然后`hashCode`返回`4.12`。但是通过实现，它不能是double，只能是int。

这不是一个选项：

```
public int hashCode() {
    // no need to check for exception parseInt since x and y are valid by design
    return Integer.parseInt(Integer.toString(x) + Integer.toString(y));
} 
```

因为值`x`和`y`可以太长，这样它们就不会一起被转换。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-31T14:39:49.003

您不能更改 的类型`hashCode`，也不应该更改。

我会选择类似的东西：

```
public int hashCode() {
    return x * 31 + y;
} 
```

请注意，这意味着在大多数情况下，(a, b) 与 (b, a) 不同（与例如加法或异或运算不同）。*如果*您经常在现实生活中使用“切换”值的键，这将很有用。

它*不是*唯一的 - 但哈希码不必是唯一的。对于相等的值（为了正确性），它们*只*需要相同，并且（为了效率）“通常”对于不相等的值是不同的，并且分布合理。

一般来说，我通常遵循 Josh Bloch 在 Effective Java 中建议的相同模式：

```
public int hashCode() {
    int hash = 17;
    hash = hash * 31 + field1Hash;
    hash = hash * 31 + field2Hash;
    hash = hash * 31 + field3Hash;
    hash = hash * 31 + field4Hash;
    ...
    return hash;
} 
```

`field1Hash`引用类型字段的哈希码（或空引用的 0），`int`int 值的哈希码，从 64 位到 32 位的某种哈希码`long`等在哪里。

编辑：我不记得为什么 31 和 17 可以很好地协同工作的细节。它们都是素数这一事实*可能*很有用 - 但据我记得，为什么像这样的散列通常是*合理*的（尽管不如预先知道可能值分布的散列好）的数学要么困难要么不是很好理解。我知道乘以 31 很便宜（左移 5 并减去原始值）...

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-14T21:07:52.573

我知道不相等的对象具有相同的哈希码是可以的。但是，冲突越多，性能就越差（例如，在哈希表中）。

据我所知，**Z** ² → **Z**的最佳映射是“优雅的配对函数”（google it）。这是实现

```
// x,y must be non-negative
int elegant(int x, int y) {
    return x < y ? y * y + x : x * x + x + y;
}

// returns a unique number for every x,y pair
int elegantSigned(int x, int y) {
    if (x < 0) {
        if (y < 0)
            return 3 + 4 * elegant(-x - 1, -y - 1);
        return 2 + 4 * elegant(-x - 1, y);
    }
    if (y < 0)
        return 1 + 4 * elegant(x, -y - 1);
    return 4 * elegant(x, y);
} 
```

一旦乘法溢出，这将开始重叠。如果 x 和 y 的绝对值小于大约 46000，那么这将有*零散*列冲突。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-17T02:14:05.980

只需使用[java.util.Objects.hash(Object... values)](https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#hash(java.lang.Object...))。

```
public int hashCode() {
    return Objects.hash(field1,field2);
} 
```

Objects.hash 实际上调用[Arrays.hashCode(Object a[])](https://github.com/openjdk/jdk/blob/jdk9-b94/jdk/src/java.base/share/classes/java/util/Arrays.java#L4710)

```
public static int hashCode(Object a[]) {
    if (a == null)
        return 0;

    int result = 1;

    for (Object element : a)
        result = 31 * result + (element == null ? 0 : element.hashCode());

    return result;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-15T14:09:47.193

这个问题已经很老了，但我认为只要 java 存在，这个想法就会成为现实。让我们分析上面的方法：

1.  `Objects.hash(...)`流利**且清楚需要做什么**，但它**使用可变参数**（隐式创建数组），此外，它**隐式地装箱**每一个原语，被传递到方法中。
2.  `x * 31 + y`**高效**：没有装箱，没有使用显式或隐式数组创建操作。但是，目前**还不清楚**需要做什么。为什么是 31，而不是[42](https://youtu.be/aboZctrHfK8)？对于那些熟悉散列如何工作的人来说，理解这样的代码没有困难，但其他人呢？第二个陷阱是**难以扩展**：例如，如果你想去 3D 并添加**z**坐标，你很容易忘记在散列代码中添加新值，因为它迫使你复制粘贴几乎相同的代码很多次。

我可以介绍第三种方法，上面的答案中没有提到：

```
@Override
public final int hashCode()
{
    final int[] numbers = {x, y};
    return Arrays.hashCode(numbers);
} 
```

它使用一个临时数组来保存被散列的整数，并调用[Arrays.hashCode()](https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#hashCode(int[]))，它从 Java 1.5 开始可用，还有其他原始类型的版本。

**优点**：它是[干](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的，流利的，完全清楚需要做什么。它不受隐式装箱的影响，也不使用隐式可变参数。它相对快速且便宜。它可以通过在数组初始化器中添加额外的数字来轻松扩展。

**缺点**：它不如复制粘贴方法快。如果经常调用哈希码，请考虑它。

此致。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-31T14:42:17.217

通常值得考虑[Apache Commons HashCodeBuilder](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/builder/HashCodeBuilder.html)

> 此类可以为任何类构建良好的 hashCode 方法。它遵循 Joshua Bloch 的《Effective Java》一书中规定的规则。编写一个好的 hashCode 方法实际上是相当困难的。此类旨在简化流程

我肯定会推荐看参考书*Effective Java*。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-31T14:40:52.687

有一种生成哈希码操作的通用策略。在您的情况下，这将是：

```
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + x;
    result = prime * result + y;
    return result; 
```

}

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-31T14:47:12.813

您可能想看看[Google Guava 的](http://code.google.com/p/guava-libraries/) [Objects.hashCode(Object...)](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Objects.html#hashCode%28java.lang.Object...%29)方法。

```
public int hashCode() {
  return Objects.hashCode(x, y);
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-31T14:38:58.823

尝试添加他们的哈希码。?

return new Integer(x).hashCode()+new Integer(y).hashCode();

# actionscript-3 - 访问 TileList 组件 AS3 的自定义 Cell Renderer

> ID：11742594
> 
> 赞同：0
> 
> 时间：2012-07-31T14:36:54.453
> 
> 标签：actionscript-3, flash, label, renderer, tilelist

我通过像这样扩展 ImageCell 类为 TileList 组件实现了一个自定义单元格渲染器：

```
package 
{
   import fl.controls.listClasses.ICellRenderer;
   import fl.controls.listClasses.ImageCell;
   import fl.controls.Label;

   public class CustomImageCell extends ImageCell implements ICellRenderer
   {
      public var lblName:Label;

      public function CustomImageCell() 
      {
          lblname = new Label();
          addChild(lblName);
      }
   }
} 
```

我是这样分配的：

```
tilelist.setStyle("cellRenderer", CustomImageCell); 
```

现在，当我将项目添加到 tilelist 时，如何将一些文本传递给单元格渲染器中的该标签？

```
tilelist.addItem({label:"Let this text go to the lblName", source:new Bitmap(bData)}); 
```

编辑：

我这样做是因为我需要 TileList 的项目标签是多行的，并且有人告诉我这样做的唯一方法是实现自定义单元格渲染器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:13:20.133

找到了答案。您必须覆盖 set data 方法并从那里为您的变量分配一个值：

```
override public function set data(value:Object):void {
        _data = value;
        if(_data.label) lblName.text =_data.label;
} 
```

# java - 从 URL 读取图像

> ID：11742598
> 
> 赞同：0
> 
> 时间：2012-07-31T14:37:10.497
> 
> 标签：java, http, groovy

如果我执行以下 Groovy 代码

```
URL url = new URL('http://glowstick.blisstunes.com/wp-content/plugins/rss-poster/cache/e1ebf_josh-wink.jpg')
ImageIO.read(url) 
```

我得到一个例外：

```
javax.imageio.IIOException: Can't get input stream from URL!
    at javax.imageio.ImageIO.read(ImageIO.java:1369) 
```

但是如果我在浏览器中访问 URL，图像就会显示出来。是因为 HTTP 请求被阻止是因为它（从标头）看起来不像来自浏览器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:39:41.267

用这个：

```
 Image image = Toolkit.getDefaultToolkit().createImage(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:39:58.727

使用下面的代码作为参考。做类似的事情。

```
 URL urlTemp ;
                    urlTemp = new URL( ContentUrl);
                    HttpURLConnection ycGetContent = null;
                    ycGetContent = (HttpURLConnection) urlTemp.openConnection();
                    ycGetContent.setDoOutput(true);
                    ycGetContent.setRequestProperty("Cookie", cooStr);
                    ycGetContent.connect();

                    BufferedInputStream bins =
                            new BufferedInputStream(ycGetContent.getInputStream());

                    FileOutputStream fout =
                            new FileOutputStream(lastWord);
                    int m = 0;

                    byte[] bytesIn = new byte[1024];

                    while ((m = bins.read(bytesIn)) != -1) {
                        fout.write(bytesIn, 0, m);
                    }
                    fout.close();
                    bins.close();

                    //System.out.println("File " +lastWord +" downloaded successfully ...\n\n ");   
                    LOG.info("File " +lastWord +" downloaded successfully"); 
```

# python - Python 3.X：如何使用 Xlrd3 库在 excel 中插入新行

> ID：11742600
> 
> 赞同：2
> 
> 时间：2012-07-31T14:37:13.053
> 
> 标签：python, python-3.x, xlrd

所以我使用 Xlrd3 来读取和写入 Excel 表。我遇到的问题是我想找到一种简单的方法在两个非空白行之间插入一个空白行。有没有功能或简单的方法可以做到这一点？我浏览了文档并找不到任何东西，但希望我只是错过了它。

如果没有简单的方法可以做到这一点，那么也许有人可以指导我找到一种方法来做到这一点？这是一个非常长的文件（接近 500 行），每行可能有 10 列左右，我需要在某些时候将所有内容推到某个点并插入一个新的空白行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:17:11.763

`xlrd`仅供阅读。 `xlwt`将会写。 [`xlutils`](http://pypi.python.org/pypi/xlutils)将有助于根据您阅读的内容重写新文件。

# haskell - 实现 zipE :: Event ta -> Event tb -> Event t (a,b)

> ID：11742602
> 
> 赞同：7
> 
> 时间：2012-07-31T14:37:33.300
> 
> 标签：haskell, reactive-programming, frp, reactive-banana

一般来说，我对反应性香蕉和 FRP 很陌生，所以如果我遗漏了一些明显的东西，我深表歉意。

对于[我的项目](https://github.com/copton/ocram)（一个[GDB/MI](http://sourceware.org/gdb/onlinedocs/gdb/GDB_002fMI.html)前端），我对 GUI 和前端逻辑模块都使用了响应式香蕉（版本 0.6.0.0）。前者效果很好，但对于后者，我显然需要额外的组合器。

其中之一是`zipE :: Event t a -> Event t b -> Event t (a, b)`。不幸的是，我能想出的只是 NetworkDescription monad 中的一个解决方案，它`changes`在事件类型中使用并且不是通用的：

```
zipE :: Event t Int -> Event t String -> NetworkDescription t (Event t (Int, String))
zipE ea eb = changes $ (,) <$> stepper 0 ea <*> stepper "" eb 
```

当然，我对此并不满意。因此，我想问如何在不使用的情况下实现一个通用的 zipE 函数`changes`（不鼓励将其用于非 GUI 目的）。

其他尝试失败，例如

```
zipE :: Num a => Event t a -> Event t b -> Event t (a,b)
zipE ea eb = apply (stepper (0,) ((,) <$> ea)) eb 
```

导致元组的第一个元素被移动一个 - 我猜是由于`stepper`. 但是我看不到如何从没有`stepper`（或`accumB`就此而言）的事件中获取行为，也看不到如何将函数应用于没有行为的事件。总的来说，在泛型类型的情况下，我看不到如何为步进器提供初始值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T15:01:08.117

你很难定义`zipE`，因为它没有语义意义。如果您考虑语义定义

```
Event a == [(Time, a)]
Event b == [(Time, b)] 
```

没有一种自然的方式来压缩它们，因为通常每个事件都会在不同的时间进行。

可以使用总和而不是产品来压缩它们。

```
zipE :: Event a -> Event b -> Event (Either a b)
zipE aE bE = (Left <$> aE) `mappend` (Right <$> bE) 
```

如果您确实需要同时拥有两者`a`，`b`则适当的解决方案是创建一个`Behavior`累积在一个或另一个上的，或`Either`如上所述的合并流。

编辑：在合并流上累积的一种方法示例（未经测试）。其他实现也是可能的。这不会使这两个事件同时发生，而是让您将当前状态与过去状态结合起来，这样您就可以始终拥有 和 值中最近可用的`Left`值`Right`。

```
currentAandB :: a -> b -> Event a -> Event b -> Event (a,b)
currentAandB a0 b0 aE bE = accumE (a0,b0) (mergefn <$> zipE aE bE)
    where
        mergefn (Left a)  (_,b) = (a,b)
        mergefn (Right b) (a,_) = (a,b) 
```

仍然需要为两个`Event`流提供初始值。这样想：如果你只有来自 的事件`Event a`，那么元组的第二部分应该有什么值？

# http - 仅针对主页域从 HTTPS 重定向到 HTTP

> ID：11742603
> 
> 赞同：2
> 
> 时间：2012-07-31T14:37:36.910
> 
> 标签：http, .htaccess, firefox, https

由于我已将 Firefox 更新到 14.0.1，它会自动将 https 放入我们在线商店的域中。

我需要 .htaccess 文件的代码，以便当 Firefox 14.0.1 将其更改为[https://www.example.com时，只有起始页即 www.example.com 被重定向/强制进入 www.example.com](https://www.example.com)

所以只有[https://www.example.com](https://www.example.com)应该变成 www.example.com

有人知道这个代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T14:45:14.150

这应该可以解决问题。

```
RewriteCond %{HTTPS} on
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

这会将所有内容重写为不安全的。

如果您只想匹配特定页面，请减少重写规则的包容性，如下所示：

```
RewriteCond %{HTTPS} on
RewriteRule ^$ http://www.example.com/ [R=301,L] 
```

这也将起作用：

```
RewriteCond %{SERVER_PORT} 443
RewriteRule ^(|/)$ http://www.example.com/ [L,R=301] 
```

# mysql - 在子查询和 MAX 值上使用左连接加速 mysql 查询

> ID：11742609
> 
> 赞同：0
> 
> 时间：2012-07-31T14:37:55.310
> 
> 标签：mysql, subquery

情况是这样的：2 个表格，一个包含项目列表，另一个包含对这些项目的投标列表。现在我需要知道带有实际价格的物品的详细信息。换句话说，如果已经出价，我需要知道该项目的出价清单中的最高值才能获得当前价格。在某些情况下，还有其他规则适用于过滤项目数量，但基本上归结为：

```
SELECT i . * , IFNULL( GREATEST( b.`made_bid` , `start_bid` ) , `start_bid` ) AS current_price
FROM `items` i
LEFT JOIN (

SELECT `bid_list`.`item_id` , MAX( `made_bid` ) AS made_bid
FROM `bid_list`
WHERE (

bid_status =1
)
GROUP BY `item_id`
)b ON b.item_id = i.id 
```

这是我的问题：这是可行的，但是随着越来越多的项目进入数据库并且越来越多的出价和bid_list 增长，它的速度很慢并且变慢。

是否有更好的方法来编写此查询，或者最好的方法是将当前最高出价输入到 items 表的额外列中，并在每次出价时更新它？但不知何故，这感觉不对，因为我会存储两次相同的信息。

对此的任何帮助将不胜感激。

PS，EXPLAIN的结果：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   PRIMARY     i   ALL     NULL    NULL    NULL    NULL    839     
1   PRIMARY     <derived2>  ALL     NULL    NULL    NULL    NULL    507     
2   DERIVED     bid_list    index   status  item_id     4   NULL    5726    Using where 
```

PPS，bid_list 的索引：

```
PRIMARY BTREE   Yes No  id  5367    A       
item_id BTREE   No  No  item_id 1073    A       
user_id BTREE   No  No  user_id 894 A       
status  BTREE   No  No  bid_status  1   A   YES 
made_bid_per_item   BTREE   No  No  status  5   A   YES 
                                            item_id 1073    A   
                                            amount  5367    A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:44:48.393

为了让这个子查询快速运行：

```
SELECT item_id, MAX(made_bid) AS made_bid
FROM bid_list
WHERE bid_status = 1
GROUP BY item_id 
```

您应该在`(bid_status, item_id, made_bid)`.

# php - 抓取时隐藏的跨度值

> ID：11742610
> 
> 赞同：1
> 
> 时间：2012-07-31T14:37:59.023
> 
> 标签：php, xpath, screen-scraping

我正在尝试使用 xpath 在 pokerstars.co.uk 上获取在线玩家数量：

```
//*[@id="ncPlayers"] 
```

但是内容`span[id=ncPlayers]`是空白的，当我查看 pokerstars.co.uk 的源代码时，内容也被隐藏了，他们如何做到这一点以及我如何绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:42:05.157

他们可能用 javascript 填充跨度。

或者他们在 javascript 中静态声明它，或者他们正在使用 javascript 从服务器请求（使用 GET 或 POST 请求，通过使用 jQuery 或其他一些 javascript 库）它。在第一种情况下，您可以抓取 javascript 并提取数字。在第二种情况下，您可以自己执行请求并解析返回的 JSON 或任何数据。

无论哪种方式，您都必须深入研究网站上使用的 javascript 源代码。

感谢 Brendan，我确实访问了该站点并发现该站点从

```
http://www.psimg.com/datafeed/dyn_banners/summary.json.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:41:38.923

他们用javascript填充跨度。所以它不包含在页面的 HTML 源代码中，只包含在 javascript 的 DOM 中。您可以获取接收玩家数量的 ajax 请求。

# ruby-on-rails - Heroku——“我们很抱歉，但出了点问题”

> ID：11742617
> 
> 赞同：1
> 
> 时间：2012-07-31T14:38:23.297
> 
> 标签：ruby-on-rails, heroku, web-deployment-project

嗨，我对 Heroku 很陌生。我已经完成了我的应用程序的一部分。目前我在本地工作，但我想部署到 Heroku。当我输入时，`heroku logs`我得到了这个：

```
2012-07-30T16:36:27+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style  plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them  out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and  config/initializers/myplugin.rb. See the release notes for more on this:  http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top  (required)> at /app/config/environment.rb:5)
2012-07-30T16:36:27+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style  plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them  out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and  config/initializers/myplugin.rb. See the release notes for more on this:  http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top  (required)> at /app/config/environment.rb:5)
2012-07-30T16:36:30+00:00 app[web.1]: => Booting WEBrick
2012-07-30T16:36:30+00:00 app[web.1]: => Rails 3.2.6 application starting in production on http://0.0.0.0:17050
2012-07-30T16:36:30+00:00 app[web.1]: => Call with -d to detach
2012-07-30T16:36:30+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-07-30T16:36:30+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-07-30T16:36:33+00:00 app[web.1]: [2012-07-30 16:36:33] INFO  WEBrick 1.3.1
2012-07-30T16:36:33+00:00 app[web.1]: [2012-07-30 16:36:33] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-07-30T16:36:33+00:00 app[web.1]: [2012-07-30 16:36:33] INFO  WEBrick::HTTPServer#start: pid=2 port=17050
2012-07-30T16:36:34+00:00 heroku[web.1]: State changed from starting to up
2012-07-30T16:36:35+00:00 app[web.1]: 
2012-07-30T16:36:35+00:00 app[web.1]: Started GET "/" for 190.242.128.66 at 2012-07-30  16:36:35 +0000
2012-07-30T16:36:35+00:00 app[web.1]: 
2012-07-30T16:36:35+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2012-07-30T16:36:35+00:00 app[web.1]: Completed 500 Internal Server Error in 80ms
2012-07-30T16:36:35+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (1.5ms)
2012-07-30T16:36:35+00:00 app[web.1]: 
2012-07-30T16:36:35+00:00 app[web.1]: ActionView::Template::Error (defaults.js isn't precompiled):
2012-07-30T16:36:35+00:00 app[web.1]:     4:     <title>Home</title>
2012-07-30T16:36:35+00:00 app[web.1]:     5:     <%= csrf_meta_tag %>
2012-07-30T16:36:35+00:00 app[web.1]:     6:     
2012-07-30T16:36:35+00:00 app[web.1]:     7:     <%= javascript_include_tag :defaults %>
2012-07-30T16:36:35+00:00 app[web.1]:     8:     <style>
2012-07-30T16:36:35+00:00 app[web.1]:     9:       body {
2012-07-30T16:36:35+00:00 app[web.1]:     10:         padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
2012-07-30T16:36:35+00:00 app[web.1]:   app/views/static_pages/home.html.erb:7:in `_app_views_static_pages_home_html_erb___4087131318243872015_49358580'
2012-07-30T16:36:35+00:00 app[web.1]: 
2012-07-30T16:36:35+00:00 app[web.1]: 
2012-07-30T16:36:35+00:00 heroku[router]: GET newbies.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=254ms status=500 bytes=643
2012-07-30T16:36:35+00:00 heroku[router]: GET newbies.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=11ms status=304 bytes=0
2012-07-30T17:41:05+00:00 heroku[web.1]: Idling
2012-07-30T17:41:08+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-07-30T17:41:09+00:00 app[web.1]: [2012-07-30 17:41:09] ERROR SignalException: SIGTERM
2012-07-30T17:41:09+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
2012-07-30T17:41:19+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2012-07-30T17:41:19+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2012-07-30T17:41:20+00:00 heroku[web.1]: Process exited with status 137
2012-07-30T17:41:20+00:00 heroku[web.1]: State changed from up to down
2012-07-30T22:10:05+00:00 heroku[run.1]: Awaiting client
2012-07-30T22:10:05+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:create`
2012-07-30T22:10:05+00:00 heroku[run.1]: State changed from starting to up
2012-07-30T22:10:11+00:00 heroku[run.1]: Process exited with status 0
2012-07-30T22:10:11+00:00 heroku[run.1]: State changed from up to complete
2012-07-30T22:10:24+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
2012-07-30T22:10:24+00:00 heroku[run.1]: Awaiting client
2012-07-30T22:10:25+00:00 heroku[run.1]: State changed from starting to up
2012-07-30T22:10:41+00:00 heroku[run.1]: Process exited with status 0
2012-07-30T22:10:41+00:00 heroku[run.1]: State changed from up to complete
2012-07-30T22:10:54+00:00 heroku[web.1]: Unidling
2012-07-30T22:10:54+00:00 heroku[web.1]: State changed from down to starting
2012-07-30T22:10:57+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 47690`
2012-07-30T22:11:02+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-07-30T22:11:02+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-07-30T22:11:05+00:00 app[web.1]: => Booting WEBrick
2012-07-30T22:11:05+00:00 app[web.1]: => Rails 3.2.6 application starting in production on http://0.0.0.0:47690
2012-07-30T22:11:05+00:00 app[web.1]: => Call with -d to detach
2012-07-30T22:11:05+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-07-30T22:11:05+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-07-30T22:11:08+00:00 app[web.1]: [2012-07-30 22:11:08] INFO  WEBrick 1.3.1
2012-07-30T22:11:08+00:00 app[web.1]: [2012-07-30 22:11:08] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-07-30T22:11:08+00:00 app[web.1]: [2012-07-30 22:11:08] INFO  WEBrick::HTTPServer#start: pid=2 port=47690
2012-07-30T22:11:09+00:00 heroku[web.1]: State changed from starting to up
2012-07-30T22:11:10+00:00 app[web.1]: 
2012-07-30T22:11:10+00:00 app[web.1]: 
2012-07-30T22:11:10+00:00 app[web.1]: Started GET "/" for 190.242.128.66 at 2012-07-30 22:11:10 +0000
2012-07-30T22:11:10+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2012-07-30T22:11:10+00:00 app[web.1]: Completed 500 Internal Server Error in 83ms
2012-07-30T22:11:10+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (1.6ms)
2012-07-30T22:11:10+00:00 app[web.1]: 
2012-07-30T22:11:10+00:00 app[web.1]: ActionView::Template::Error (defaults.js isn't precompiled):
2012-07-30T22:11:10+00:00 app[web.1]:     4:     <title>Home</title>
2012-07-30T22:11:10+00:00 app[web.1]:     5:     <%= csrf_meta_tag %>
2012-07-30T22:11:10+00:00 app[web.1]:     6:     
2012-07-30T22:11:10+00:00 app[web.1]:     7:     <%= javascript_include_tag :defaults %>
2012-07-30T22:11:10+00:00 app[web.1]:     8:     <style>
2012-07-30T22:11:10+00:00 app[web.1]:     9:       body {
2012-07-30T22:11:10+00:00 app[web.1]:     10:         padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
2012-07-30T22:11:10+00:00 app[web.1]: 
2012-07-30T22:11:10+00:00 app[web.1]: 
2012-07-30T22:11:10+00:00 app[web.1]:   app/views/static_pages/home.html.erb:7:in `_app_views_static_pages_home_html_erb___517725991346781271_49385800'
2012-07-30T22:11:10+00:00 heroku[router]: GET newbies.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=264ms status=500 bytes=643
2012-07-30T22:12:25+00:00 app[web.1]: 
2012-07-30T22:12:25+00:00 app[web.1]: 
2012-07-30T22:12:25+00:00 app[web.1]: Started GET "/" for 190.242.128.66 at 2012-07-30 22:12:25 +0000
2012-07-30T22:12:25+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2012-07-30T22:12:25+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-07-30T22:12:25+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (0.9ms)
2012-07-30T22:12:25+00:00 app[web.1]: 
2012-07-30T22:12:25+00:00 app[web.1]: ActionView::Template::Error (defaults.js isn't precompiled):
2012-07-30T22:12:25+00:00 app[web.1]:     4:     <title>Home</title>
2012-07-30T22:12:25+00:00 app[web.1]:     5:     <%= csrf_meta_tag %>
2012-07-30T22:12:25+00:00 app[web.1]:     6:     
2012-07-30T22:12:25+00:00 app[web.1]:     7:     <%= javascript_include_tag :defaults %>
2012-07-30T22:12:25+00:00 app[web.1]:     8:     <style>
2012-07-30T22:12:25+00:00 app[web.1]:     10:         padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
2012-07-30T22:12:25+00:00 app[web.1]:     9:       body {
2012-07-30T22:12:25+00:00 app[web.1]:   app/views/static_pages/home.html.erb:7:in `_app_views_static_pages_home_html_erb___517725991346781271_49385800'
2012-07-30T22:12:25+00:00 app[web.1]: 
2012-07-30T22:12:25+00:00 app[web.1]: 
2012-07-30T22:12:25+00:00 heroku[router]: GET newbies.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=14ms status=500 bytes=643 
```

当我输入时`heroku open`，它会显示*“我们很抱歉，但出了点问题。”* 有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:41:38.440

资产应该被预编译添加到你的 config/application.rb

```
config.assets.initialize_on_precompile = false 
```

更多信息： [https ://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar/](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:41:28.887

您需要先在本地编译资产。

看看这里：[https ://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

在推送到 Heroku 之前尝试以下操作。

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:42:19.947

1.  迁移服务器上的数据库。

2.  尝试预编译您的资产管道

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T19:07:05.913

当您创建 heroku 堆栈时，请执行此操作，而不仅仅是 heroku create：

```
heroku create --stack cedar 
```

并确保在推送到 heroku 之前执行此操作：

```
heroku run rake db:migrate 
```

# wpf - 面板中随机放置的元素

> ID：11742621
> 
> 赞同：0
> 
> 时间：2012-07-31T14:38:44.250
> 
> 标签：wpf, silverlight, xaml, windows-runtime

我正在寻找面板，它可以将集合中的每个项目随机旋转放置在随机位置。如果它是开源的，那就太好了！

我正在用 WinRT、XAML 编写，但我可以从 SL/WPF 移植它。

有谁知道这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:34:51.440

我建议使用`ItemsControl`带有a 的正`Canvas`则，并将and`ItemsPanelTemplate`绑定到某处生成的随机值`Canvas.Left``Canvas.Top`

```
<ItemsControl ItemsSource="{Binding MyCollection}">
    <!-- ItemsPanelTemplate -->
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <!-- ItemContainerStyle -->
    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Canvas.Left" 
                    Value="{Binding SomeRandomValue}" />
            <Setter Property="Canvas.Top" 
                    Value="{Binding SomeRandomValue}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

如何获得随机值取决于您。您可以将其设置为数据项的属性，从 a 返回随机值`Converter`，创建为您提供随机值的静态资源等

# geometry - 将文本放在图像中心并朝某个方向移动一点 - ImageMagick

> ID：11742625
> 
> 赞同：0
> 
> 时间：2012-07-31T14:39:08.570
> 
> 标签：geometry, imagemagick, graphicsmagick

我再次挑战 ImageMagick。

我正在尝试使用以下命令将文本放在图像上（在中心位置），然后将其向左和向右移动。文档说，重力可以与几何一起使用——但它似乎没有像我预期的那样工作。我正在尝试这个命令：

```
convert render/pre.button.png -gravity south  -geometry +30+30   -annotate 0 'Faerie Dragon' render/button.png 
```

不幸的是，几何不适用于重力，对我来说:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:20:19.077

试试这两个命令，它们应该会给你两个不同的结果：

```
convert \
   in.png \
  -gravity south \
  -annotate 0x0+0+0 'Faerie Dragon' \
   out-1.png

convert \
   in.png \
  -gravity south \
  -annotate 0x0+30+30 'Faerie Dragon' \
   out-2.png 
```

第二个的输出可能与您想要的输出相似。

# asp.net - 如何在.net中实现下拉按钮菜单

> ID：11742626
> 
> 赞同：0
> 
> 时间：2012-07-31T14:39:15.087
> 
> 标签：asp.net, drop-down-menu

我想实现这个多级下拉按钮菜单列表，就像大多数网站用于他们的主菜单一样。任何人都可以提供我应该实施什么以及我应该从哪个方向开始的来源。我是初学者。谢谢你。![在此处输入图像描述](../Images/fed87dbd3a69c6289615ced7ecc5fabf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:59:57.523

[jQueryUI](http://jqueryui.com/demos/tabs/)选项卡是您正在寻找的最简单的实现。

# java - 从 Java 代码填充 Spring“属性”

> ID：11742627
> 
> 赞同：0
> 
> 时间：2012-07-31T14:39:16.303
> 
> 标签：java, spring

我有一个 Java 类`MySettings`，它从 JSON 文件/数据库/其他东西加载我的应用程序的属性。

我已配置`MySettings`为 Spring 上下文中的 bean。

```
<bean id="mySettings" class="com.myapp.MySettings" /> 
```

我现在想将`mySettings`spring 上下文文件中的值之一用于不支持 SpEL 的内容，例如 Spring Integration 日志通道适配器，例如

```
<int:logging-channel-adapter id="logMessageToRemote" 
     logger-name="toRemote" level="#{mySettings.getRemoteLogLevel}"
     expression="payload" /> 
```

有没有办法可以设置可以使用 SpEL 填充的“属性”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:48:38.473

来自弹簧文档[http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html#expressions-beandef](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/expressions.html#expressions-beandef)

例如，您还可以按名称引用其他 bean 属性。

```
<bean id="numberGuess" class="org.spring.samples.NumberGuess">
   <property name="randomNumber" value="#{ T(java.lang.Math).random() * 100.0 }"/>
   <!-- other properties -->
</bean>

<bean id="shapeGuess" class="org.spring.samples.ShapeGuess">
  <property name="initialShapeSeed" value="#{ numberGuess.randomNumber }"/>
   <!-- other properties -->
</bean> 
```

这是你要找的东西吗？

# python - python logging kwarg 在通过 args 部分时失败

> ID：11742638
> 
> 赞同：4
> 
> 时间：2012-07-31T14:40:04.160
> 
> 标签：python, logging

我有以下文件配置部分：

```
[handler_file]
class = handlers.TimedRotatingFileHandler
args = ( '../output/DataUpload.log', when='D', backupCount=3)
formatter = generic 
```

由 logging.config 指定

```
from logging import config, getLogger
config.fileConfig( "config/logging.cfg", disable_existing_loggers = True ) 
```

我收到以下错误：

```
 args = eval(args, vars(logging))
  File "<string>", line 1
    ( '../output/DataUpload.log', when='D', backupCount=3)
                                      ^
SyntaxError: invalid syntax 
```

这里不支持 kwargs 还是我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:43:34.430

首先，**不要使用 eval()，这是一个非常糟糕的主意！！**使用 ConfigParser 或 JSON 或其他东西来存储和加载配置。

至于错误：

```
args = (...,) 
```

这将创建一个*元组*。元组不能有命名元素。您想为位置参数使用元组或列表，为命名参数使用字典。如果你使用 JSON 作为配置文件，你会得到这个。

# ruby-on-rails - 部分视图 Ruby on Rails

> ID：11742639
> 
> 赞同：0
> 
> 时间：2012-07-31T14:40:13.470
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有 3 个模型：

*   顾客
*   book_manager
*   书

`customer`可以编辑自己的设置，例如个人资料帐户。但是，它会渲染不同的模型，例如`book`. 为此，我决定将文件呈现`book/form`如下`<% render book/form %>`。

当个人资料页面加载时，客户可以在书籍部分中查看任何内容（如果之前没有写过任何内容），或者如果他之前已经写过一些内容，则可以查看一些内容。在客户控制器页面中，我有以下代码来获取信息：

```
def edit
  @book = current_customer.books.order("created_at DESC").limit(1)
end 
```

在`books/_form.html.erb`我有以下内容：

```
<%= form_for(@book) do |f| %>
  <% if @book.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h2>

      <ul>
      <% @book.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_field :description %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

在`book`控制器`edit`中，我什么都没有，或者我应该在哪里放置命令`@book`以便他们说话？

我有以下错误：

```
NoMethodError in Customers#edit

Showing /home/jean/rail/map/app/views/books/_form.html.erb where line #1 raised:

undefined method `model_name' for ActiveRecord::Relation:Class
Extracted source (around line #1):

1: <%= form_for(@book) do |f| %>
2:   <% if @book.errors.any? %>
3:     <div id="error_explanation">
4:       <h2><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h2> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:45:41.953

```
<% render book/form.html.erb %> 
```

应该

```
<%= render '/books/form' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:46:24.203

您的代码中至少有一个简单错误

```
@book = current_user.books.order("created_at DESC").limit(1) 
```

这确实会返回最新的书，但它会以数组的形式返回。

而不是调用`limit(1)`你应该使用该方法`first`

```
@book = current_user.books.order("created_at DESC").first 
```

# forms - Zend Form 和 Subforms 导致提交按钮停止工作

> ID：11742642
> 
> 赞同：1
> 
> 时间：2012-07-31T14:40:18.197
> 
> 标签：forms, zend-framework, zend-form, form-submit, zend-form-sub-form

我有一个表格，其中插入了 3 个子表格。如果需要，我可以发布它如何构建这些子表单的代码，但由于它非常庞大，我将把最相关的部分放在这里。

首先表格的`init()`功能：

```
public function init() {

        $redirect = new Zend_Form_Element_Hidden('redirect');

        $categories = new HPU_Form_Element_TreeView('tree');
        $categories->setMultiOptions($this->categoryList);
        $categories->setLabel('Home')
                    ->setValue($this->selectedCategoryList)
                    ->setRequired(true);

        $id = new Zend_Form_Element_Hidden('id');
        $id->addFilter('Int');

        $title = new Zend_Form_Element_Text('title');
        $title->setLabel('Title')
                ->setRequired(true);

        $subtitle = new Zend_Form_Element_Text('subtitle');
        $subtitle->setLabel('Subtitle')
                    ->setRequired(true);

        $language_id = new Zend_Form_Element_Select("language_id");
        $language_id->setLabel('Language')
                    ->setRequired(true)
                    ->addMultiOption( "" , "Choose a language");

        $table = new Content_Model_DbTable_Language();
        foreach ($table->fetchAll() as $language) {
            $language_id->addMultiOption($language->id, $language->name);
        }

        $start_date = new ZendX_JQuery_Form_Element_DatePicker('start_date');
        $start_date->setLabel('Start date')
                    ->setValue(date('j-m-Y'))
                    ->setRequired(true)
                    ->setAttrib('jQueryParams', array('dateFormat' => 'dd-mm-yy'));

        $expiration_date = new ZendX_JQuery_Form_Element_DatePicker('expiration_date'); 
        $expiration_date->setLabel('Expiration date')
                        ->setAttrib('jQueryParams', array('dateFormat' => 'dd-mm-yy'));

        $status = new Zend_Form_Element_Select("status");
        $status->setLabel('Status')
                ->setRequired(true)
                ->addMultiOptions(array("1" => "Concept", "2" => "Ready to publish", "3" => "Published",
                "4" => "Offline"));

        $meta_description = new Zend_Form_Element_Textarea('meta_description'); 
        $meta_description->setLabel('Meta description')
                            ->setAttrib('rows', '4');

        $meta_keywords = new Zend_Form_Element_Textarea('meta_keywords'); 
        $meta_keywords->setLabel('Meta keywords')
                        ->setAttrib('rows', '4');

        $introductory_text = new HPU_Form_Element_Tinymce('introductory_text'); 
        $introductory_text->setLabel('Introductory text');

        $content_text = new HPU_Form_Element_Tinymce('content_text'); 
        $content_text->setLabel('Follow up text');

        $submit_button = new Zend_Form_Element_Submit('submit_button');

        $this->setDecorators(array('ViewHelper'));
        $this->setElementDecorators(array('ViewHelper'));
        $this->setDecorators(array('FormElements', 'Form'));

        $this->addElements(array($redirect, $categories, $id, $title, $subtitle, $language_id, $start_date, $expiration_date, $status));

        $this->addEnclosedItems();
        $this->addEyecatcher();
        $this->addYoutubeItems();

        $this->addElements(array($meta_description, $meta_keywords, $introductory_text, $content_text, $submit_button));

    } 
```

如您所见，我声明了许多元素，然后使用该`addElements()`函数将它们添加到表单中。但是，我将其分为两部分，因为我想要我的 3 个子表单（由它们各自的函数创建，`addEnclosedItems()`然后我添加元素的最后一部分。`addYoutubeItems()``addEyecatchers()`

结果，我得到以下 HTML：

```
<form id="content" enctype="multipart/form-data" action="" method="post">

<dt id="redirect-label">&#160;</dt>

<dd id="redirect-element">

<input type="hidden" name="redirect" value="" id="redirect" /></dd>

<dt id="tree-label"><label for="tree" class="required">Home</label></dt>

<dd id="tree-element">

<ul id="tree"><li><input  value="72" id="tree-72" name="tree[]" type="hidden" /><label for="tree-72" class="parent">Test Categorie 1</label><ul id="tree"><li><input checked="checked" value="75" id="tree-75" name="tree[]" type="checkbox" /><label for="tree-75" class="child">Test Categorie 1.1</label></li><li><input  value="76" id="tree-76" name="tree[]" type="checkbox" /><label for="tree-76" class="child">Test Categorie 1.2</label></li></ul></li><li><input  value="73" id="tree-73" name="tree[]" type="hidden" /><label for="tree-73" class="parent">Test Categorie 2</label><ul id="tree"><li><input  value="77" id="tree-77" name="tree[]" type="hidden" /><label for="tree-77" class="parent">Test Categorie 2.1</label><ul id="tree"><li><input  value="80" id="tree-80" name="tree[]" type="checkbox" /><label for="tree-80" class="child">Test category 2.1.1</label></li></ul></li><li><input checked="checked" value="78" id="tree-78" name="tree[]" type="checkbox" /><label for="tree-78" class="child">Test Categorie 2.2</label></li><li><input  value="79" id="tree-79" name="tree[]" type="checkbox" /><label for="tree-79" class="child">Test Categorie 2.3</label></li></ul></li><li><input  value="74" id="tree-74" name="tree[]" type="checkbox" /><label for="tree-74" class="child">Test Categorie 3</label></li><li><input  value="86" id="tree-86" name="tree[]" type="hidden" /><label for="tree-86" class="parent">Test Category 4</label><ul id="tree"><li><input  value="87" id="tree-87" name="tree[]" type="checkbox" /><label for="tree-87" class="child">Test Category 4.1</label></li></ul></li></ul></dd>

<dt id="id-label">&#160;</dt>

<dd id="id-element">

<input type="hidden" name="id" value="57" id="id" /></dd>

<dt id="title-label"><label for="title" class="required">Title</label></dt>

<dd id="title-element">

<input type="text" name="title" id="title" value="Test Content 2" /></dd>

<dt id="subtitle-label"><label for="subtitle" class="required">Subtitle</label></dt>

<dd id="subtitle-element">

<input type="text" name="subtitle" id="subtitle" value="Test Content 2" /></dd>

<dt id="language_id-label"><label for="language_id" class="required">Language</label></dt>

<dd id="language_id-element">

<select name="language_id" id="language_id">
    <option value="" label="Choose a language">Choose a language</option>
    <option value="1" label="Dutch" selected="selected">Dutch</option>
    <option value="2" label="Russian">Russian</option>
</select></dd>

<dt id="start_date-label"><label for="start_date" class="required">Start date</label></dt>

<dd>

<input type="text" name="start_date" id="start_date" value="0000-00-00 00:00:00" /></dd>

<dt id="expiration_date-label"><label for="expiration_date" class="optional">Expiration date</label></dt>

<dd>

<input type="text" name="expiration_date" id="expiration_date" value="0000-00-00 00:00:00" /></dd>

<dt id="status-label"><label for="status" class="required">Status</label></dt>

<dd id="status-element">

<select name="status" id="status">
    <option value="1" label="Concept" selected="selected">Concept</option>
    <option value="2" label="Ready to publish">Ready to publish</option>
    <option value="3" label="Published">Published</option>
    <option value="4" label="Offline">Offline</option>
</select></dd>

<dt id="enclosedItem-label">&#160;</dt><dd id="enclosedItem-element"><fieldset id="fieldset-enclosedItem"><dl>

<dt id="addEnclosedItem-label">&#160;</dt><dd id="addEnclosedItem-element">

<button name="enclosedItem[addEnclosedItem]" id="enclosedItem-addEnclosedItem" type="button">add enclosed item</button></dd></dl></fieldset></dd>

<div class="eyecatcher_item"><form id="eyecatcher" enctype="application/x-www-form-urlencoded" action="" method="post">

<dt id="eyecatcher-eyecatcher-label">&#160;</dt>

<dd id="eyecatcher-eyecatcher-element">

<img src='/fm/Tulips.jpg'/></dd>

<dt id="deleteEyecatcher59-label">&#160;</dt><dd id="deleteEyecatcher59-element">

<button name="eyecatcher[deleteEyecatcher59]" id="eyecatcher-deleteEyecatcher59" type="button" class="delete" itemid="59">delete</button></dd></form></div>

<dt id="youtube-label">&#160;</dt><dd id="youtube-element"><fieldset id="fieldset-youtube"><dl>

<dt id="addYoutube-label">&#160;</dt><dd id="addYoutube-element">

<button name="youtube[addYoutube]" id="youtube-addYoutube" type="button">add youtube item</button></dd></dl></fieldset></dd>

<dt id="meta_description-label"><label for="meta_description" class="optional">Meta description</label></dt>

<dd id="meta_description-element">

<textarea name="meta_description" id="meta_description" rows="4" cols="80"></textarea></dd>

<dt id="meta_keywords-label"><label for="meta_keywords" class="optional">Meta keywords</label></dt>

<dd id="meta_keywords-element">

<textarea name="meta_keywords" id="meta_keywords" rows="4" cols="80"></textarea></dd>

<dt id="introductory_text-label"><label for="introductory_text" class="optional">Introductory text</label></dt>

<dd id="introductory_text-element">

<textarea name="introductory_text" id="introductory_text" class="tinyMCE" rows="24" cols="80"></textarea></dd>

<dt id="content_text-label"><label for="content_text" class="optional">Follow up text</label></dt>

<dd id="content_text-element">

<textarea name="content_text" id="content_text" class="tinyMCE" rows="24" cols="80"></textarea></dd>

<dt id="submit_button-label">&#160;</dt><dd id="submit_button-element">

<input type="submit" name="submit_button" id="submit_button" value="Save" /></dd></form> 
```

到目前为止，它运行良好，但由于我添加了子表单，它将不再提交。

任何人碰巧知道/看到问题是什么？任何建议将被认真考虑 ：）

**更新：** 我在正确扩展 Zend_Form_Subform 后更新了返回的 HTML 代码。我还能够发现问题出在 addEyecatcher 函数的某个地方，因为只要不执行此函数，表单就可以工作。

这是创建子表单的 addEyecatcher 函数：

公共函数 addEyecatcher() { $eyecatcher_form = new Zend_Form_SubForm();

```
if(!$this->eyecatcher_image) {
    $eyecatcher = new Zend_Form_Element_File('eyecatcher');
    $eyecatcher->setLabel('Eyecatcher')
                    ->addValidator('Extension', false, 'jpg')
                    ->setDestination(Zend_Registry::get('config')->content->tempFysicalLocation);
    $eyecatcher_form->addElement($eyecatcher);
} else {
    $this->addPrefixPath('HPU_Form_Element', 'HPU/Form/Element/', 'Element');
    $eyecatcher = new HPU_Form_Element_Note('eyecatcher');
    $source = Zend_Registry::get('config')->content->imageRelativeLocation . $this->eyecatcher_image['image_url'];
    $eyecatcher->setValue("<img src='{$source}'/>");
    $eyecatcher_form->addElement($eyecatcher);
    $eyecatcher_form->addElement('button', "deleteEyecatcher{$this->eyecatcher_image['id']}", array('label' => 'delete', 'class' => 'delete', 'itemid' => $this->eyecatcher_image['id']));
}
$eyecatcher_form->setDecorators(array("ViewHelper"));
$eyecatcher_form->setDecorators(array("FormElements", "Form", array('HtmlTag', array('tag'=>'div' , 'class' => 'eyecatcher_item'))));

$this->addSubForm($eyecatcher_form, 'eyecatcher');

return $eyecatcher_form; 
```

}

感谢您到目前为止的帮助，我已经进一步解决了这个问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:30:56.967

子表单不应包含自己的`<form>`标签。这就是破坏您的提交按钮的原因。您可以仔细检查您的子表单是否扩展`Zend_Form_SubForm`？如果是这样，请发布您的子表单方法之一的代码（或相关部分）。

**编辑**：您的引人注目的表单仍然有第二个表单标签，因为您正在手动将表单装饰器添加到子表单（用`<form>`..包装它`</form>`）。尝试将您的 set decorators 行更改为：

```
$eyecatcher_form->setDecorators(array("FormElements", array('HtmlTag', array('tag'=>'div' , 'class' => 'eyecatcher_item')))); 
```

# liferay - 在我的门户中找不到日记，它是什么以及它的用途？

> ID：11742644
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:40:21.303
> 
> 标签：liferay, liferay-6

我正在使用 liferay 6.1 CE，我看到它`Journal`用于搜索目的。

所以我决定将它也包含在我的门户中。

`Journal`但是我在我的门户中找不到类似的东西？那么它是什么`Journal`以及它的用途是什么？

如果我遗漏了什么或者我的理解完全错误，请告诉我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:16:25.450

[从这个答案](https://stackoverflow.com/a/11746604/468763)中提到的这个[博客](http://www.liferay.com/web/bryan.cheung/blog/-/blogs/1940101)的评论之一，从 liferay 5.2 开始，从 Journal 到 Web-content 的变化：

```
Journal Content => Web Content Display
Journal Articles => Web Content List
Journal Content Search => Web Content Search
Journal => Web Content 
```

因此，您所说的搜索只不过`Web-content Search`是在 API 中仍称为`Journal Content Search`.

从 Liferay 5.2 开始，liferay 更改了 to 的显示名称，`Journal`并`Web-content`像以前一样保留了数据库表和 API 名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:24:38.533

请参阅此[博客](http://www.liferay.com/web/bryan.cheung/blog/-/blogs/1940101)以了解有关`Journal`Liferay 的更多信息。

如果您想`JournalArticle`从 Java API 使用 `com.liferay.portlet.journal.service.JournalArticleLocalServiceUtil`.

# sql - 如何更新表中的所有行并增加一列？

> ID：11742649
> 
> 赞同：3
> 
> 时间：2012-07-31T14:40:37.547
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-update

我在 SQL Server 2008 数据库中有一个表。我需要更新特定列的值，但同时增加它的值。解释：

如果表是：

```
CREATE TABLE [dbo].[Player]
(
    [PlayerID] [uniqueidentifier] NOT NULL,
    [UnitID] [uniqueidentifier] NULL,
    [ExerciseID] [uniqueidentifier] NOT NULL,
    [Designation] [nvarchar](256) NOT NULL
) 
```

我想遍历具有`ExerciseID`of 的每一行并将其`42C45D73-3FE6-4AFA-8E2F-09BDFC6CBDF7`更新为`Designation`，`Player - X`但 X 应该从 1 开始并且每次都将自身递增一。

所以第一个被更新的玩家将是`Player - 1`第二个被更新的玩家`Player - 2`，依此类推。

我不知道从哪里开始这样的事情！

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T14:48:03.403

```
; with numbering as (
  select PlayerID,
         UnitID,
         ExerciseID,
         Designation,
         row_number () over (order by PlayerID) - 1 rn
    from Player
   where ExerciseID = '42C45D73-3FE6-4AFA-8E2F-09BDFC6CBDF7'
)
update numbering
   set Designation = 'Player - ' + convert(varchar(10), rn) 
```

# sql - Rails - 不明确的列名：id

> ID：11742655
> 
> 赞同：2
> 
> 时间：2012-07-31T14:40:47.700
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord

我目前正在尝试使用以下代码播种一些测试数据：

```
 # add vehicle
  trim = Trim.where(:id => 1 + Random.rand(250)).first
  model_year_array = trim.model_years.all(:select => :id).collect(&:id)
  vehicle = Vehicle.create(trim_id: trim.id, model_year_id: model_year_array[Random.rand(model_year_array.length - 1)]) 
```

我认为这是相当不言自明的——本质上我想获得一个适用于所选装饰的模型年 ID 数组，选择一个随机的，并将其 ID 用作车辆的模型年 ID。

我遇到的问题是该`trim.model_years.all(:select => :id).collect(&:id)`部分正在生成 id 不明确的错误；错误如下：

```
SQLite3::SQLException: ambiguous column name: id: SELECT id FROM "model_years" INNER JOIN "model_year_trims" ON "model_years"."id" = "model_year_trims"."model_year_id" WHERE "model_year_trims"."trim_id" = 110 
```

我怎样才能重新格式化我的代码，以便选择 id 获得 model_year 的 id，从而不模棱两可？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T14:43:51.703

执行连接时，您必须为多个表中存在的列添加前缀，例如 id ：

```
model_year_array = trim.model_years.all(:select => "model_years.id").collect(&:id) 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:57:01.067

解析器不知道是使用一个表还是另一个表中的列 ID。你应该有类似的东西：

```
SELECT "model_years" ."id" 
  FROM "model_years" 
 INNER JOIN "model_year_trims" ON "model_years"."id" = "model_year_trims"."model_year_id"
 WHERE "model_year_trims"."trim_id" = 110 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T21:05:28.460

如果你想让它更健壮一点，你可以询问你的模型它的 table_name 而不是硬编码它。即使在 sql 中重命名表，此代码也不会中断。

```
model_year_array = trim.model_years.all(:select => "#{ModelYear.table_name}.id").collect(&:id) 
```

# python - Bazaar - 创建一个仅在指定文件夹已更改时才运行的后推挂钩

> ID：11742659
> 
> 赞同：1
> 
> 时间：2012-07-31T14:41:05.247
> 
> 标签：python, hook, bazaar

我最近开始了一份新工作，并承担了一个项目来实施一些适当的源代码控制和持续集成，作为自动化本地构建和测试过程的前几个步骤。

我们决定混合使用 Bazaar (SCM) / Jenkins (For CI) / Nant（繁重的工作）。

我遇到的麻烦是弄清楚如何创建一个钩子来检查存储库中特定文件夹（而不是分支）是否发生了更改。谁能指出我正确的方向？

把它放在上下文中：我们的存储库结构包括一个用于我们的源代码的文件夹和一个用于我们编号的数据库脚本的文件夹。在我们签入代码的那一刻，由于不受欢迎的钩子，我们还获得了数据库构建/更新。

# php - PHP简单的html dom，试图获取非对象的属性

> ID：11742660
> 
> 赞同：0
> 
> 时间：2012-07-31T14:41:07.710
> 
> 标签：php, simple-html-dom

触发特定功能时，我会收到下一条通知：

```
Trying to get property of non-object in... 
```

我的功能：

```
private function rate($form)
{
    $score = 0;

    $count = $form->find('input')->length;
    $score += ($count >= 2 && $count <= 5) ? INPUT_COUNT_RATE : 0;

    $count = $form->find('textarea')->length;
    $score += $count == 1 ? TEXTAREA_COUNT_RATE : 0;

    return $score;
} 
```

有问题的行是具有`find`功能的行。

回报`var_dump`率：`$form`

```
object(simple_html_dom_node)[1062]... 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T14:44:59.910

`->find()`返回匹配节点的数组或 null。您不能调用`->length`查找结果，因为结果不是对象。尝试

```
$nodes = $form->find(...);
$count = count($nodes); 
```

# sql - 如何将 SQL 子查询分配给变量并在同一上下文中使用它

> ID：11742661
> 
> 赞同：4
> 
> 时间：2012-07-31T14:41:07.640
> 
> 标签：sql, variables, variable-assignment

在此选择中，我想获取上个月和当前月份的值并显示 6 列：OLDVALUE 本身 ~ OLDVALUE X 28,8% ~ OLDVALUE X 8% ~ CURVALUE 本身 ~ CURVALUE X 28,8% ~ CURVALUE X 8%

但是我必须使用相同的子查询将上个月 3 次，如下所示。这样我的代码将非常大并且性能较低（我想要更多信息）。

有没有办法分配一个“临时”变量来保持这个子查询的结果在相同的上下文中再次使用，像循环结构中的变量一样逐行更改它的值？

问候。

```
/* == PARAMETERS == */
DECLARE @ANO INT = 2011
DECLARE @MES INT = 7

/* ===================================== SELECT ===================================== */
SELECT FUNC.CHAPA, FUNC.CODSECAO,
        (SELECT VALPROVFER FROM PFHSTPROV (NOLOCK)
          WHERE CHAPA = FUNC.CHAPA
            AND ANO = CASE WHEN (PROV.MES-1 = 0) THEN PROV.ANO-1 ELSE PROV.ANO END
            AND MES = CASE WHEN (PROV.MES-1 = 0) THEN 12 ELSE PROV.MES-1 END
        ) AS PROVFERMESANT,
        (SELECT VALPROVFER FROM PFHSTPROV (NOLOCK)
          WHERE CHAPA = FUNC.CHAPA
            AND ANO = CASE WHEN (PROV.MES-1 = 0) THEN PROV.ANO-1 ELSE PROV.ANO END
            AND MES = CASE WHEN (PROV.MES-1 = 0) THEN 12 ELSE PROV.MES-1 END
        )*0.288 AS PROVINSSMESANT,
        (SELECT VALPROVFER FROM PFHSTPROV (NOLOCK)
          WHERE CHAPA = FUNC.CHAPA
            AND ANO = CASE WHEN (PROV.MES-1 = 0) THEN PROV.ANO-1 ELSE PROV.ANO END
            AND MES = CASE WHEN (PROV.MES-1 = 0) THEN 12 ELSE PROV.MES-1 END
        ) * 0.08 AS PROVFGTSMESANT,
        PROV.VALPROVFER AS PROVFERMES, PROV.VALPROVFER*0.288 AS PROVINSSMES,
        PROV.VALPROVFER*0.08 AS PROVFGTSMES,
 FROM PFUNC FUNC (NOLOCK)
 JOIN PFHSTPROV PROV (NOLOCK) ON FUNC.CHAPA = PROV.CHAPA 
    AND FUNC.CODCOLIGADA = PROV.CODCOLIGADA
WHERE FUNC.CODSITUACAO = 'A'
    AND ANO = @ANO
    AND MES = @MES 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T09:21:50.473

```
 SELECT FUNC.CHAPA, FUNC.CODSECAO,
            isnull(PFH.VALPROVFER,0) AS PROVFERMESANT,
            isnull(PFH.VALPROVFER,0)*0.288 AS PROVINSSMESANT,
            isnull(PFH.VALPROVFER,0) * 0.08 AS PROVFGTSMESANT,

            PROV.VALPROVFER AS PROVFERMES, PROV.VALPROVFER*0.288 AS PROVINSSMES,
            PROV.VALPROVFER*0.08 AS PROVFGTSMES,
     FROM PFUNC FUNC (NOLOCK)
     JOIN PFHSTPROV PROV (NOLOCK) ON FUNC.CHAPA = PROV.CHAPA 
        AND FUNC.CODCOLIGADA = PROV.CODCOLIGADA

     LEFT JOIN PFHSTPROV PFH (NOLOCK) on 
                 ( (FUNC.CHAPA = PFH.CHAPA) 
                            AND  PFH.ANO = CASE WHEN (PROV.MES-1 = 0) THEN PROV.ANO-1 ELSE PROV.ANO END
                            AND PFH.MES = CASE WHEN (PROV.MES-1 = 0) THEN 12 ELSE PROV.MES-1 END        
                 ) 

    WHERE FUNC.CODSITUACAO = 'A'
        AND ANO = @ANO
        AND MES = @MES 
```

# java - 在 Android 中旋转文本（不是图像）

> ID：11742662
> 
> 赞同：1
> 
> 时间：2012-07-31T14:41:15.330
> 
> 标签：java, android, xml, eclipse, rotation

如何让文本（不是图像）在 Android 中绕其轴旋转？

例子：

![在此处输入图像描述](../Images/886df4170b925c5d158e870bcf0b8512.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:54:48.803

您需要创建一个扩展类，`TextView`然后覆盖该`onDraw`方法，如下所示：

```
public class MyRotatedTextView extends TextView {

    ...

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.save();

        float py = this.getHeight() / 2.0f;
        float px = this.getWidth() / 2.0f;
        canvas.rotate(180, px, py);

        super.onDraw(canvas);

        canvas.restore();
    }
} 
```

在这种情况下，旋转轴穿过`TextView`的中心。

# android - ArrayList NullPointerException 到 ORMLite 保存

> ID：11742669
> 
> 赞同：1
> 
> 时间：2012-07-31T14:41:35.820
> 
> 标签：android, nullpointerexception, ormlite

我有一个班级类别

```
 @DatabaseTable(tableName = "categories")
public class Category {
    public final static String CATEGORY_TITLE_FIELD_NAME  = "title";
    @SerializedName("id")
    @DatabaseField(id = true)
    int id;
    @SerializedName("title")
    @DatabaseField(dataType = DataType.STRING, columnName = CATEGORY_TITLE_FIELD_NAME)
    String title;
    // need for ORMlite
    public Category()
    {}
    public Category (int id, String title)
    {
        this.id = id;
        this.title = title;
    }
    public int getCategoryId() 
    {

         return this.id;
    }

    public String getCategoryTitle() 
    {
         return this.title;
    }

    public void setCategoryId(int id)
    {
         this.id = id;
    }

    public void setCategoryTitle(String title)
    {
         this.title = title;
    }

    @Override
    public String toString()
    {       
    return "{title="+title +" "+"id="+id+"}";   
    }

} 
```

我从 JSON 中将数据放入其中，并希望将其保存在 ORMLite 中。我就是这样做的：

```
DatabaseHandler db = new DatabaseHandler(getApplicationContext());
JSONObject data = json.getJSONObject(KEY_DATA);
// getting categories
JSONArray categories = new JSONArray();
categories = data.getJSONArray(KEY_CATEGORIES);
Gson gson = new Gson();
JsonParser parser = new JsonParser();
JsonArray array = parser.parse(categories.toString()).getAsJsonArray();
Type listType = new TypeToken<List<Category>>() {}.getType();
List<Category> tasks = new ArrayList<Category>();
tasks = gson.fromJson(array.toString(), listType);
RuntimeExceptionDao<Category, Integer> simpleDao = getHelper1().getSimpleCategoryDao();
Dao<Category, Integer> categoryDao = getHelper1().getCategoryDao();
saveContacts(tasks);
List<Category> list = categoryDao.queryForAll();
Log.i("categoryDAO",list.toString()); 
```

这是用于保存数据的 saveContacts() 方法：

```
 public void saveContacts(List<Category> contacts) throws SQLException
    {
        OrmLiteSqliteOpenHelper dbHelper= DatabaseHandler.getInstance(_context);
        Dao<Category, Integer> daoContact=dbHelper.getDao(Category.class);
        for (Category contact : contacts) {
            daoContact.create(contact);
        }
        dbHelper.close();
    } 
```

但我有这样的例外：

```
 FATAL EXCEPTION: main
java.lang.NullPointerException
at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:118)
at com.j256.ormlite.android.AndroidConnectionSource.getReadWriteConnection(AndroidConnectionSource.java:63)
    at com.j256.ormlite.dao.BaseDaoImpl.create(BaseDaoImpl.java:304)
    at com.assignmentexpert.LoginActivity.saveContacts(LoginActivity.java:192)
    at com.assignmentexpert.LoginActivity$1.onClick(LoginActivity.java:108)
    at android.view.View.performClick(View.java:2485)
    at android.view.View$PerformClick.run(View.java:9080)
    at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:59:29.690

问题解决了将上下文传递给我的从 OrmLiteSqliteOpenHelper 扩展的 DatabaseHandler。

# php - php 5.3 fwrite() 期望参数 1 是资源错误

> ID：11742682
> 
> 赞同：5
> 
> 时间：2012-07-31T14:42:08.677
> 
> 标签：php, wampserver

我正在使用 wamp 服务器。我尝试写入文件，但它给出了这样的错误：“警告：fwrite() 期望参数 1 是资源，给定的布尔值”。我该如何解决？

```
$file = 'file.txt';  
if (($fd = fopen($file, "a") !== false)) { 
  fwrite($fd, 'message to be written' . "\n");   
  fclose($fd); 
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T14:45:27.573

移动括号：

```
if (($fd = fopen($file, "a")) !== false) { 
  fwrite($fd, 'message to be written' . "\n");   
  fclose($fd); 
} 
```

您的代码将`(fopen($file, "a") !== false)`（即布尔值）的结果分配给`$fd`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T15:27:41.857

一次只做一件事，因为没有急于和足够的空间：

```
$file = 'file.txt';
$fd = fopen($file, "a");
if ($fd) { 
    fwrite($fd, 'message to be written' . "\n");   
    fclose($fd); 
} 
```

特别是让代码更容易，以防您遇到错误消息。

还要了解您的语言：PHP 中的资源始终评估为 true。

了解你的大脑：双重否定总是很复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:45:55.197

问题在于你的`if`情况。PHP 比较比赋值绑定得更紧密，所以`fopen !== false`is 首先对 求值`true`，然后将`true`is 写入`$fd`。您可以使用方括号将它们组合`$fd = fopen($file, 'a')`在一起，或者您可以将这部分从条件中取出并写下`if ($fd !== false)`您的条件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:46:37.567

把你`!== false`的“）”放在外面

像这样：

```
$file = 'file.txt';  
if (($fd = fopen($file, "a")) !== false) { 
  fwrite($fd, 'message to be written' . "\n");   
  fclose($fd); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:47:42.747

运算符优先级导致您的问题。`!==`绑定比 更紧密`=`，因此您的代码实际上是：

```
if ($fd = (fopen(...) !== false)) {
          ^--------------------^-- 
```

并且您将`!==`比较的布尔结果分配给 $fd。

要么更改括号，要么切换到`or`具有较低绑定优先级的运算符：

```
if (($fd = fopen(...)) !== false) {
    ^----------------^ 
```

或者

```
$fd = fopen(...) or die('unable to open file'); 
```

# c# - 会话超时后自动重定向到登录

> ID：11742699
> 
> 赞同：3
> 
> 时间：2012-07-31T14:42:45.157
> 
> 标签：c#, asp.net, redirect, login, session-timeout

我试图在会话超时后自动重定向到我的登录页面。我尝试在我的 Main.Master 页面中添加此代码（所有其他页面都连接到此母版页）：

```
protected void Page_Load(object sender, EventArgs e)
{
            //Redirects to Login Page 3 seconds before session timeout
            Response.AppendHeader("Redirect", Convert.ToString((Session.Timeout * 60) - 3) + "; URL=~/Login.aspx");
} 
```

我在我的网络配置中将会话超时配置为 1 分钟：

```
<sessionState mode="InProc" cookieless="false" timeout="1"/> 
```

但什么也没发生

谁能帮我找到这段代码的问题，或者有其他想法如何让它工作？

**编辑**：来自 web.config 的身份验证节点

```
<authentication mode="Forms">
    <forms name=".CAuthenticated" loginUrl="Login.aspx" protection="All" 
    timeout="20"/>
</authentication> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:44:03.630

```
protected void Page_Init(object sender, EventArgs e)
{
    if (Session["Username"] == null)
    {
        Response.Redirect(ResolveClientUrl("~/login.aspx") + "?returnURL=" + HttpContext.Current.Request.Url.AbsolutePath);
    }
    else
    {
        lblUsername.Text = Session["Username"].ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:46:46.287

我认为您需要`Refresh`在标题中使用而不是“重定向”：

```
Response.AppendHeader("Refresh",
    Convert.ToString((Session.Timeout * 60) - 3) +
    ";URL=~/Login.aspx"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:53:00.103

`AppendHeader`如果“在发送 HTTP 标头后附加标头”，则记录为导致异常您需要确保在发送 HTTP 标头之前调用 AppendHeader。根据您的母版页，该`Load`事件可能为时已晚。你可以试试这个`Init`活动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T14:58:55.323

这是一个对我有用的例子：

```
 <authentication mode="Forms">
      <forms loginUrl="~/Login/Index" defaultUrl="~/Admin" timeout="20">
      </forms>
    </authentication> 
```

如果你有这个，你就不需要自己检查超时 cookie。这是假设您正在使用表单身份验证。

# delphi - 以编程方式更改 TChart 大小

> ID：11742700
> 
> 赞同：1
> 
> 时间：2012-07-31T14:42:53.200
> 
> 标签：delphi, delphi-2007, teechart

我正在以编程方式创建一个 tChart（Delphi2007，TeeChar 7 免费版）。我想设置图表尺寸并可能更改纵横比，但是更改 Width 和 Height 属性没有得到有意义的结果。我也尝试更改轴 TickLength ，但没有运气。我从 dfm 文件中复制了 TChart 的相关属性，不要忘记任何有意义的东西。仅当我编辑 X 和 Y 最大值和最小值时，图表的方面才会发生变化，但这还不够。

这是我的原始图表和“重新格式化”的图表，您可以看到图表尺寸均为 400 x 250。是否有用于调整图表大小的特定属性？我希望轴相应地调整大小，有可能吗？感谢您的帮助

![第一张图表](../Images/1ca3aa0846765e11ba5c8d582a8d469b.png) ![相同的图表调整大小](../Images/2a4bb645e3ef850e40799014be3f2f03.png)

以下是与 TChart 相关的代码：

```
procedure CreateChart(parentform: TForm);
//actually formatChart is a CreateChart anf fChart a member of my class
begin
  fchart:= TChart.Create(parentform);
  fchart.Parent:= parentform;
  fchart.AxisVisible := true;
  fchart.AutoSize := false;
  fChart.color := clWhite;
  fchart.BottomAxis.Automatic := true;
  fchart.BottomAxis.AutomaticMaximum := true;
  fchart.BottomAxis.AutomaticMinimum := true;
  fchart.LeftAxis.Automatic := true;
  fchart.LeftAxis.AutomaticMaximum := true;
  fchart.LeftAxis.AutomaticMinimum := true;
  fchart.view3D  := false;
end

 procedure formatChart(width, height, xmin, xmax, ymin, ymax: double);
 //actually formatChart is a method anf fChart a member of my class
 begin
   with fChart do  
     begin
       Color := clWhite;
       fChart.Legend.Visible := false;
       AxisVisible := true;
       AllowPanning := pmNone;
       color := clWhite;
       Title.Visible := False;
       BottomAxis.Minimum := 0; //to avoid the error maximum must be > than min
       BottomAxis.Maximum := xmax;
       BottomAxis.Minimum := xmin;
       BottomAxis.ExactDateTime := False ;
       BottomAxis.Grid.Visible := False ;
       BottomAxis.Increment := 5 ;
       BottomAxis.MinorTickCount := 0;
       BottomAxis.MinorTickLength := 5;
       BottomAxis.Ticks.Color := clBlack ;
       BottomAxis.TickOnLabelsOnly := False;
       DepthAxis.Visible := False;
       LeftAxis.Automatic := false;
       LeftAxis.AutomaticMaximum := false;
       LeftAxis.AutomaticMinimum := false;
       LeftAxis.Minimum := ymin;
       LeftAxis.Maximum := ymax;
       LeftAxis.Minimum := ymin;
       LeftAxis.TickLength := 5;
       Width := round(width);
       Height := round(height);
       View3D := False ;
     end;
 end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:07:06.170

我认为这里存在名称冲突。您正在使用,`with fChart`和属性`Height`和`Width`。`fChart`虽然在您的过程调用中具有相同的名称，但使用的是`fChart`宽度和高度：

```
Width := Round(width); // The fChart property Width is used on both sides.
Height := Round(height); // The fChart property Height is used on both sides. 
```

重命名过程调用中的名称，它将按预期工作。

更好的是，避免使用`with`关键字。请参阅：[Delphi“with”关键字是一种不好的做法吗？](https://stackoverflow.com/q/514482/576719).

# pyqt - 删除应用程序底部的空白区域

> ID：11742703
> 
> 赞同：0
> 
> 时间：2012-07-31T14:43:06.993
> 
> 标签：pyqt, pyqt4

今天我试图解决我的 GUI 的一个问题，但我不明白如何解决它。页面底部有一个空白区域（约 30 px）。如果我试图在一条假想的线下移动东西，这些东西就会被剪掉。

如果有人能解释我如何删除这个空白空间，我将不胜感激。不幸的是，我无法发布图片（声誉只有 1 个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:59:34.193

如果您知道您想要的确切高度，那么您可以使用我认为的调整大小方法，例如：`self.resize(480, 340)`. 否则，您可以使用适当的布局来帮助您保持高度和宽度。但在此之前，正如安迪提到的，如果您可以发布更多详细信息，您究竟在寻找什么，那么很容易找到解决方案。

# c# - 如何检查 jQuery 是否是从 C# 代码加载的，如果 jQuery 是在纯 HTML 中添加的？

> ID：11742711
> 
> 赞同：1
> 
> 时间：2012-07-31T14:43:35.377
> 
> 标签：c#, jquery, sharepoint, user-interface

'正在开发 WEB_PART，我想知道是否有某种方法可以找出要插入 Web 部件的母版页项目中是否存在任何 JQUERY LIB。我想做这样的事情：

```
if (jQuery) {  
 // jQuery is loaded  
Page.ClientScript.RegisterClientScriptInclude(typeof(WebpartSlideShow), "jQuery",                        "/_layouts/Jquery-Cycle/jquery-1.5.1.min.js");
Page.ClientScript.RegisterClientScriptInclude(typeof(WebpartSlideShow), "jQueryCycle", "/_layouts/Jquery-Cycle/jquery.cycle.all.min.js");
               // break;
   } else {
  // jQuery is not loaded
    Page.ClientScript.RegisterClientScriptInclude(typeof(WebpartSlideShow), "jQueryCycle", "/_layouts/Jquery-Cycle/jquery.cycle.all.min.js");

  } 
```

但如果 jQuery 以纯 HTML 添加但仅当 jQuery 是通过 `Page.ClientScript`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:17:08.283

尝试注册你自己的 JavaScript 代码，它应该检查 jQuery 是否已经加载，如果没有加载它。跨浏览器示例如下。

```
function initScript(url, callback) {
    var script = document.createElement('script');
    script.src = url;
    var head = document.getElementsByTagName('head')[0],
    done = false;

    // Attach handlers for all browsers
    script.onload = script.onreadystatechange = function () {
        if (!done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) {
            done = true;
            callback();
        };
    };

    head.appendChild(script);
};

function initJQuery(callback) {
    //if the jQuery object isn't available
    if (typeof (jQuery) == 'undefined') {
        initScript("/_layouts/YourWebPart/jquery-1.7.1.min.js", function() { callback(); });
    } else {
        callback();
    }   
}

initJQuery(function () {
    alert('loaded');    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:11:35.233

我能想象到的唯一方法是用 jQuery 设置一个 cookie，然后以某种方式在服务器端检查这个 cookie 的存在。

我不是 C# 开发人员，因此无法提供确切的语法，但原理应该是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:54:01.127

您无法从 c# 中检查 jquery 是否包含在目标页面中。您只能在运行时使用 js 从组件中检查。

# tsql - SSRS 2005：在带有参数的报表中返回 NULL 值

> ID：11742721
> 
> 赞同：0
> 
> 时间：2012-07-31T14:43:59.660
> 
> 标签：tsql, reportingservices-2005

我有一个名为 @vConsultant 的参数，我在存储过程和 SSRS 报告中使用它。该参数是由该查询填充的下拉菜单：

```
select distinct c.nameConsultant
from dataTable d

left join consultants c on d.nameConsultant= d.recID 
```

“dataTable”是我的主要数据表，存储顾问的ID。Consultants 是存储名称的表。

问题：在dataTable中，顾问是一个可选字段。而且，在报告中，我的用户不仅希望看到他们在 SSRS 下拉列表中选择的顾问，还希望看到 NULL 值（用户没有指定顾问的地方）。但是，“NULL”不会作为值显示在 SSRS 的下拉菜单中。

在存储过程中，当我想返回 NULLS 时，我使用 where 子句。所以......我的过程是：

```
CREATE PROCEDURE [dbo].[spReportProc] 

@vConsultant varchar(max) 

AS

BEGIN
    --Get comma-delimited list of consultants to allow SSRS multi-value select.
    Select @vConsultant = ',' + @vConsultant + ','

    create table #Consultant
        (
            nameConsultant varchar(1000)
        )
    Insert Into #Consultant 
    Select  nameConsultant
    From consultants
    Where @vConsultant Like  '%,' + nameConsultant ',%'
    And classification = 'Implementation Consultant'
    Group By nameConsultant

    Select * From dataTable d

    left join consultants c on d.nameConsultant= d.recID

    Where 
    @vConsultant Is NULL Or @vConsultant Like '%,' + i.firstName + ' ' + i.lastName + ',%') 
END 
```

但是以这种方式指定 NULL 并不会在 SSRS 中引起注意。有没有办法在 SSRS 中允许 NULL 值而不实际指定 NULL 作为 SSRS 下拉列表的一部分？我尝试在 SSRS 中选择“允许 Null”和“允许空白”复选框，但这也不起作用。

让我知道是否需要更多说明。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:17:09.370

点击vConsultant参数的参数属性，勾选'Allow null value'属性，点击ok。会在report参数中显示一个复选框，选择该值是null还是选择值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:55:26.183

为了解决多值下拉列表中的空值问题，我包含了一个名为“-- 可选--”的选项，然后在 where 子句中使用它而不是检查空值。

因此，您的第一个查询变为（更改为内部联接以确保没有空值）：

```
select '-- Optional --'
union
select distinct c.nameConsultant
from dataTable d

inner join consultants c on d.nameConsultant= d.recID 
```

And replace the where clause in your procedure with:

```
Where 
    @vConsultant != '-- Optional --' Or @vConsultant Like '%,' + i.firstName + ' ' + i.lastName + ',%') 
```

# silverlight - Ironruby BitmapImage ImageOpened 事件

> ID：11742724
> 
> 赞同：1
> 
> 时间：2012-07-31T14:44:13.810
> 
> 标签：silverlight, event-handling, ironruby, bitmapimage

这段代码

```
uri=Uri.new(@header_image, UriKind.Relative)        
bi=BitmapImage.new(uri)
bi_opened=bi.GetType.get_event("ImageOpened")
on_bi_opened = System::EventHandler.new { |sender, e|
  HtmlPage.Window.Alert("Loaded")
}
bi_opened.add_event_handler(bi, on_bi_opened) 
```

得到一个错误

```
ArgumentException: Can't convert object of type "System.EventHandler" to type "System.EventHandler` 1 [System.Windows.RoutedEventArgs] ". 
```

如何在 IronRuby 中捕捉 ImageOpened 事件？

# vb.net - 移动到 StreamReader 中的下一行

> ID：11742727
> 
> 赞同：1
> 
> 时间：2012-07-31T14:44:25.527
> 
> 标签：vb.net, loops, streamreader, readline

是否可以在循环内移动到下一行或临时读取下一行？我没有太多运气找到任何关于如何做到这一点的有用数据，我的猜测是以某种方式找到您当前所在行的行号（索引），然后从您所在的位置读取 +1。

```
Using TestFile As New IO.StreamReader(My.Settings.cfgPath & "tempRPT.txt", System.Text.Encoding.Default, False, 4096)
        Do Until TestFile.EndOfStream
            ScriptLine = TestFile.ReadLine
            ScriptLine = LCase(ScriptLine)
            If InStr(ScriptLine, "update: [b") Then
                Dim m As Match = Regex.Match(ScriptLine, "\(([^)]*)\)")
                builder.AppendLine(m.Value)

                'This is where it would move to next line temporarily to read from it
                If InStr(ScriptLine, "hive: write:") > 0 Or InStr(ScriptLine, "update: [b") > 0 Then 'And InStr(ScriptLine, "setmarkerposlocal.sqf") < 1 Then
                   builder.AppendLine(ScriptLine)

                End If
            End If

        Loop
    End Using 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:02:40.007

试试这个。真实的所有线条并将它们放在一个`Queue(Of T)`对象中。

```
 Dim path As String = My.Settings.cfgPath & "tempRPT.txt"

    Dim lines As String() = IO.File.ReadAllLines(path, System.Text.Encoding.Default)
    Dim que = New Queue(Of String)(lines)

    Do While que.Count > 0
        ScriptLine = que.Dequeue()
        ScriptLine = LCase(ScriptLine)
        If InStr(ScriptLine, "update: [b") Then
            Dim m As Match = Regex.Match(ScriptLine, "\(([^)]*)\)")
            builder.AppendLine(m.Value)

            Dim next_line As String = que.Peek      'Read next line temporarily                'This is where it would move to next line temporarily to read from it
            If InStr(next_line, "hive: write:") > 0 Or InStr(next_line, "update: [b") > 0 Then 'And InStr(next_line, "setmarkerposlocal.sqf") < 1 Then
                builder.AppendLine(next_line)
            End If
        End If
    Loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:00:30.213

假设您没有使用旧版本的 .Net，您可能会发现只使用字符串列表更容易。

```
Dim lstLinesInTextFile As List(of String) = IO.File.ReadAllLines(My.Settings.cfgPath & "tempRPT.txt").ToList()

        Dim intCursor As Integer = 0
        For Each strLine As String In lstLinesInTextFile

            'Perform Logic Here

            'To View Next Line:
            If lstLinesInTextFile.Count > intCursor + 1 Then

                Dim strNextLine As String = lstLinesInTextFile(intCursor + 1)

                'Perform Logic Here.

            End If

            intCursor += 1

        Next 
```

# c# - 构建警告 - 隔离 COM 引用

> ID：11742729
> 
> 赞同：5
> 
> 时间：2012-07-31T14:44:31.607
> 
> 标签：c#, visual-studio, com, msbuild, regfreecom

我在我的 .NET 3.5 应用程序中引用了几个活动的 x 控件，我们将其与 reg free COM 一起使用。当我构建解决方案时，构建成功但有一堆警告说明“问题隔离 COM 引用'ActiveXControl'：注册表项：'路径'未导入”，因此生成的清单不完整。

确切的错误是：

```
C:\Windows\Microsoft.NET\Framework\v3.5\Microsoft.Common.targets (,): 
warning MSB3179: Problem isolating COM reference 'LegaceActiveXControl': 
Registry key 'HKEY_CLASSES_ROOT\CLSID\{GUID}\Implemented Categories\{AnotherGUID}' was not imported. 
```

奇怪的是，其中一个活动 x 控件已成功构建，但另一个未成功构建，即使看起来引用属性相同。

我目前唯一能想到的是我正在 x64 位机器上构建。警告中的注册表路径是注册表的 64 位部分中的路径，但活动的 x 控件已在 Wow6432Node 中注册。

所有项目都具有 x86 的目标平台和 .NET 3.5 的框架。有没有办法告诉 MSBuild 查看 32 位注册表，或者我还缺少什么？

提前致谢。

# tridion - 如何获取插入组件演示窗口弹出窗口？

> ID：11742731
> 
> 赞同：3
> 
> 时间：2012-07-31T14:44:35.657
> 
> 标签：tridion, tridion-2011

我想在我的自定义 aspx 页面中引入“插入组件演示”功能（单击“插入 CP”按钮会弹出）

1.  创建了一个自定义按钮“插入 CP”（完成）
2.  当用户从富文本框中选择任何文本并单击按钮时，我需要打开一个窗口，用户可以在其中选择组件和组件模板。

任何人都可以提供建议/想法如何使用户可以选择组件和组件模板的窗口（例如，当用户打开页面时，导航到组件演示选项卡，当他单击“插入”按钮时，相同的功能是我正在从组件富文本框中查找。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T15:06:19.060

看看 ComponentPresentations.js，它这样做是为了打开那个弹出窗口：

```
Tridion.Cme.ComponentPresentationsTab.prototype.onInsertClick = 
             function ComponentPresentationsTab$onInsertClick()
{
    var p = this.properties;
    if (p.insertDialog.isOpen())
    {
        p.insertDialog.focus();
    }
    else
    {
        p.insertDialog.open();
    }
}; 
```

在此之前，它当然需要确保`p.insertDialog`已正确初始化，它在其`_initializeInsertDialog`方法中执行此操作。我不会在这里复制代码，因为您可以查找它并且它***是***受版权保护的材料（我假设仅以某种方式复制上面的代码片段属于合理使用）。

* * *

***注意***：我得到了这个答案：

1.  右键单击页面弹出窗口的“组件演示”选项卡上的“插入”按钮
2.  选择“检查元素”
3.  记录元素的 id（`buttonComponentInsert`在这种情况下）
4.  `web\WebUI`在我的 Tridion 安装文件夹的子目录中搜索该值

这导致了一个名为 ComponentPresentations.js 的文件中的单个命中：

```
buttons.Insert = $controls.getControl($("#buttonComponentInsert"),
                                      "Tridion.Controls.Button"); 
```

鉴于这是将 HTML 中的按钮转换为功能控件的地方，剩下的只是关注 ComponentPresentation.js 中该按钮发生的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:58:09.090

为您提供有关问题根源的更多信息：根据您的需要，在大多数情况下，当您在内容交付部分呈现组件链接时，您实际上并不需要参考组件模板部分。

仅当您在网站上使用具有不同组件模板的相同组件时，才需要在内容交付期间呈现组件模板部分。是的，内容交付 API 中有一个组件模板参数/参数，但它仅用于这些情况。

即使您确实在不同页面上使用具有不同组件模板的相同组件，最好正确获取组件模板优先级，而不是直接引用组件模板。您可以在 Tridion 文档中阅读有关模板优先级的更多信息。

底线：在大多数情况下，您只需要使用组件 URI 创建组件链接。在 Tridion 文档中阅读有关链接优先级的更多信息。

# html - 浏览器 (html) 中的 Flash AS3 调试动画？

> ID：11742734
> 
> 赞同：1
> 
> 时间：2012-07-31T14:44:41.780
> 
> 标签：html, actionscript-3, flash, browser, actionscript

有没有办法在浏览器（html）中调试应用程序？

我有一个小应用程序，可以在 flash 和 swf 中完美运行，但只要我在 html 中获得它，无论是在线还是关闭，它都不起作用。我知道它已正确嵌入，因为我尝试更改背景颜色并且它在 html 中也发生了变化，但显然没有加载。

它与在线文本文件通信，但我放弃了任何跨域问题，因为它们位于同一台服务器上（并且它在闪存中工作，正如我之前提到的）。

所以，我真的很难过。主要问题是我什至不知道错误，所以我无法弄清楚出了什么问题。有没有办法“捕捉出现的任何错误并将其显示在文本框中”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:17:23.043

带有 flashfirebug 插件的 Firefox 将在控制台中显示 flash 错误。

也可以使用远程调试（调试>启动远程会话）在浏览器中使用[Flash Develop调试 swf。](http://flashdevelop.org)

# c++ - 具有 double、float 和 int 数据类型的英特尔 MKL 矩阵产品性能

> ID：11742737
> 
> 赞同：4
> 
> 时间：2012-07-31T14:44:43.090
> 
> 标签：c++, intel-mkl

我正在尝试使用英特尔 MKL 库使用它们提供的 Boost::uBLAS 接口（包括 mkl_boost_ublas_matrix_prod.hpp）执行矩阵乘法。我的数据只是整数，所以我尝试将我的矩阵模板类型更改为 int 并且性能下降了，这主要是由于代码只使用了一个 CPU 内核而不是我可用的 12 个内核。我在 MKL 文档中找不到任何东西来解释为什么整数没有使用 MKL 的 OpenMP 多线程功能（我猜他们根本没有使用 MKL？）。

此外，与浮点数相比，我看到双打的性能下降了 50%。

问题：

1.  为什么浮点数和双精度数之间存在差异？
2.  为什么我不能使用整数？

以下是我从以下代码得出的结果：

```
 matrix<float>(10000x10000):  13 seconds (12 threads used)
 matrix<double>(10000x10000):  26 seconds (12 threads used)
    matrix<int>(10000x10000):  >1000 seconds (1 thread used, stopped early)
  matrix<float>(25000x25000): 187 seconds (12 threads used)
 matrix<double>(25000x25000): 401 seconds (12 threads used) 
```

使用的代码（根据需要替换两个 matrix< type > 行）：

```
#include <boost/numeric/ublas/matrix.hpp>
#include <mkl_boost_ublas_matrix_prod.hpp>

using namespace boost::numeric::ublas;

void benchmark() {

    int size = 10000;
    matrix<float> m(size, size);
    for (int i = 0; i < size; ++i) {
        for (int j = 0; j < size; ++j) {
            m(i,j) = 2*i-j;
        }
    }
    matrix<float> r(size, size);
    r = prod(m,m);
}

int main(int argc, char *argv[]) {
    benchmark();
    return 0;
} 
```

编译：

```
 g++ Flags: -std=c++0x -O3 -DNDEBUG -DMKL_ILP64  -m64 -msse4.2 -march=native -mtune=native
 ld Flags:  -lmkl_intel_ilp64 -lmkl_gnu_thread -lmkl_core -fopenmp -lpthread -lm 
```

处理器：

```
 Intel Xeon E7530 with 6 Cores (x2) with HT. 
```

MKL 不使用超线程，因为他们说这对任何事情都没有帮助，所以我有 12 个线程可用，而不是 24 个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T10:11:30.343

> 为什么浮点数和双精度数之间存在差异？

现代 CPU 使用向量指令来执行浮点运算。这些指令具有固定的吞吐量和长度，例如英特尔至强 E7530 的每个内核能够在每个周期处理两个 128 位加法或乘法。这导致每个周期有 4 个双精度数或 8 个浮点数。

> 为什么我不能使用整数？

ublas 示例中的模板将浮点和双精度模板的矩阵乘法映射到 MKL SGEMM 和 DGEMM 函数。当您将矩阵模板从 float/double 更改为 int 时，BOOST 使用矩阵乘法的参考实现，因为 MKL 不支持整数矩阵乘法。

# android - Service Class 和 Class without Activity 有什么区别

> ID：11742738
> 
> 赞同：0
> 
> 时间：2012-07-31T14:44:47.167
> 
> 标签：android, service, android-activity, media-player

我想知道服务类和没有活动的类之间的区别。// 我的班级播放媒体

```
Class MyMediaPlayer{
private Context mContext;
//Contructor
public MyMediaPlayer(Context ct)
{
    mContext = ct;
}
public void onCreate() {....code...}
public void onStart() {....code...}
public void onDestroy() {....code....} 
```

}

使用方式与 Service Class for Media 非常相似。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:50:59.660

服务是一个类，旨在执行一些长时间运行的操作，或者在应用程序的活动暂停或停止时在后台运行。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

手机应用程序有一个活动，它有一个非常明确的生命周期。如果您需要在后台工作，或者在活动不再有手机的焦点时，您可以使用服务。既不是活动也不是服务的类可以用于多种用途。

看起来您定义的 MyMediaPlayer 类具有活动定义的方法，但没有实现活动。如果该类定义了一些需要在前台运行的操作，请让它扩展“Activity”，以便在需要时由 android 调用这些方法。

# html - SVG/VML vs Canvas vs HTML - 移动

> ID：11742741
> 
> 赞同：2
> 
> 时间：2012-07-31T14:45:03.597
> 
> 标签：html, mobile, canvas, svg

我正在考虑构建一个相当简单的地图（我会说可能有 100 个对象），显示/更改颜色并具有显示另一个对象的 onclick（移动）鼠标悬停（桌面）事件。我正在看以下内容。

1.  帆布
2.  SVG/VML
3.  JS/HTML

但我的问题是我需要以某种方式支持

1.  即（7-10）
2.  铬合金
3.  火狐
4.  黑莓 6-7
5.  视窗移动 7 (IE9)
6.  iOS
7.  Android 2.3+（无 svg）

而且我似乎找不到可以支持所有这些的单一系统，Android 不支持 SVG，移动浏览器使用画布似乎很慢，IE 7-8 不支持画布，HTML 不支持“形状”不使用图像，并且需要交换图像，这在视觉上不是很好...... yada yada yada ...

有什么想法我可以为所有这些构建一次吗？我在想画布（移动）和 SVG（桌面）可能会更好。但是在测试移动设备时，画布似乎非常慢。

是否有任何图书馆或系统可以提供帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:31:16.933

> 而且我似乎找不到可以支持所有这些的单一系统

嗯，没有。

你将不得不坚持使用可移动的 div 或者制作你的应用程序的两个版本。对不起。

画布并不慢，但有些手机很慢。Canvas 将（几乎）总是比 DOM 快，但保持这种方式取决于您。你到底在测试什么代码？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:32:46.853

1.  如果你需要 IE7-8 那么你必须使用 VML，那里只支持图形模式。
2.  如果您考虑 iOS，那么您必须使用 Canvas，它在 iPad 上的速度至少比 SVG 快 10 倍。
3.  Canvas 是默认 Android 2.x 浏览器上唯一可用的图形 mdoe。
4.  如果您需要浏览器支持的缩放并且地图的大小超过 3000 像素，则 Canvas 不起作用，您必须使用 SVG。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T19:05:14.507

您可以解决此问题的一种方法是创建一个您的应用程序用来绘制内容的界面，然后有两个不同的渲染器对象，一个用于 IE7~8 使用 SVG，一个使用 Canvas 用于其他所有内容。

# spring - 在tomcat7上部署应用程序时在spring中访问环境/系统变量

> ID：11742745
> 
> 赞同：0
> 
> 时间：2012-07-31T14:45:14.667
> 
> 标签：spring, deployment, tomcat7, environment

我的war 文件有3 个属性文件：test.properties、dev.properties 和prod.properties。

我的应用程序上下文具有以下内容

> ```
> <bean id="local" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
>       <property name="locations">
>         <list><value>classpath:${env}.properties</value></list>
>       </property>
>       <property name="ignoreResourceNotFound" value="false" />
>       <property name="ignoreUnresolvablePlaceholders" value="false" />
>       <property name="searchSystemEnvironment" value="true" />
>   </bean> 
> ```

我做了以下

1.  在 tomcat7/conf/web.xml 中设置以下内容

    > ```
    > <env-entry>
    > <env-entry-name>env</env-entry-name>
    > <env-entry-type>java.lang.String</env-entry-type>
    > <env-entry-value>dev</env-entry-value> 
    > ```

2.  在 tomcat7/conf/context.xml 中设置以下内容

    > ```
    > <Environment name="env" value="dev" type="java.lang.String" override="false"/> 
    > ```

3.  设置 CATALINA_OPTS 和 JAVA_OPTS

    > ```
    > echo $CATALINA_OPTS  =   -Denv=dev
    > echo $JAVA_OPTS  =       -Denv=dev 
    > ```

我使用命令启动tomcat，sudo /etc/init.d/tomcat7 start

这不会加载我的任何变量。我仍然得到

> ```
> Invalid bean definition with name 'local' defined in class path resource [applicationContext.xml]: Could not resolve placeholder 'env' 
> ```

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:11:01.140

我能够通过在 tomcat7/conf 中的 catalina.properties 中设置变量来解决这个问题

环境=开发

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:43:56.907

升级到 Spring 3.1 并使用 Bean Profiles。

# php - PHP MYSQL 水平循环

> ID：11742755
> 
> 赞同：1
> 
> 时间：2012-07-31T14:45:54.573
> 
> 标签：php, mysql, loops, foreach

我正在制作一个 php 页面来从 mysql 数据库中提取信息，在我陷入困境之前，我想我会看看是否有更简单的方法来做我正在做的事情。

我有一个返回多行的 MySql 查询，通过它我可以使用 while 循环轻松循环，它显然会循环通过存在相对“匹配”数据的位置。

拉出的每一行可以有 1 到 16 列数据，每行不同，我目前提取有效信息的方式是硬编码每列的“if”命令，以便只显示已输入的信息，例如：

```
if($column1 != ""){
    $output .= "<div style='float: left;'>Column 1 Stuff</div>";
    }
if($column2 != ""){
    $output .= "<div style='float: left;'>Column 2 Stuff</div>";
    } 
```

这工作正常，但它不是很动态，如果 Mysql 数据库表扩展，它需要更新代码，它就是。我真正希望能够使用一点代码来做到这一点，比如 while 循环，它对每个包含数据的列执行相同的过程，并忽略任何空白单元格。有没有人知道的有效实现这一目标的好方法？

另外，以防万一，我的“div”都左对齐，这样当它们到达封闭 div 的末尾时，它们会自动将自己整齐地包裹到下一行，所以如果有 9 个结果，就会有 3 行3 个“div”框。这是实现这种结果的有效方法吗？我正在研究在这篇文章中使用“break”命令并回答 -> [How to do a Horizo​​ntal looping in PHP](https://stackoverflow.com/questions/5002138/how-to-do-a-horizontal-looping-in-php)，但我遇到了很多与 pre IE9 标签的兼容性问题，因此我尽可能避免实施更多.

提前感谢您的帮助，如果确实可以的话！乔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T14:49:59.923

就像是：

```
$result = mysql_query(...);
while($row = mysql_fetch_assoc($result)) {
   foreach ($row as $key => $val) {
       if (!empty($val)) {
            echo ...
       }
   }
} 
```

将处理结果集中任意数量的列。

# php - Objective-C上传一个png文件到http

> ID：11742762
> 
> 赞同：0
> 
> 时间：2012-07-31T14:46:05.400
> 
> 标签：php, string, syntax-error

将文件上传到 http 服务器时出错。这是我正在使用的代码：

```
 UIImage * ourImage = [UIImage imageNamed:@"tux.png"];
    NSData * imageData = UIImageJPEGRepresentation(ourImage, 1.0);  

    NSString *urlString = @"http://www.site.com/imageupload.php";      
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSMutableData *body = [NSMutableData data];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: attachment; name=\"userfile\"; filename=\".png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // Text parameter1
    NSString *param1 = @"parameter text";
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"parameter1\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:param1] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // Another text parameter
    NSString *param2 = @"Parameter 2 text";
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"parameter2\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:param2] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // close form
    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // set request body
    [request setHTTPBody:body];

    //return and test
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"%@", returnString); 
```

这是我在服务器的 public_html/ 目录中的 PHP 文件。文件名为 imageupload.php。我正在尝试通过 HTTP 上传图像文件，而不使用任何登录名或密码。我不熟悉 PHP，真的需要一些帮助。谢谢。

```
 <?php
     $uploaddir = '/public_html/upload';
     $file = basename($_FILES['userfile']['name']);
     $uploadFile = $file;
     $randomNumber = rand(0, 99999);
     $newName = $uploadDir . $uploadFile;
    if (is_uploaded_file($_FILES['userfile']['tmp_name'])) {
    echo "Temp file uploaded. \r\n";
    } else {
    echo "Temp file not uploaded. \r\n";
   }

   if (move_uploaded_file($_FILES['userfile']['tmp_name'], $newName)) {
         $postsize = ini_get('post_max_size'); //Not necessary, I was using these
         $canupload = ini_get('file_uploads'); //server variables to see what was 
         $tempdir = ini_get('upload_tmp_dir'); //going wrong.
         $maxsize = ini_get('upload_max_filesize');
         echo "http://www.iroboticshowoff.com/dir/{$file}" . "\r\n" .  $_FILES['userfile']
         ['size'] . "\r\n" . $_FILES['userfile']['type'] ;
    }
    ?> 
```

这是我在执行代码时从服务器返回的错误：

2012-07-31 10:04:24.576 FTP6[3600:f803]
**PHP 错误消息**
**解析错误**：语法错误，/home/a5054180/public_html/imageupload.php 中的意外 T_STRING 在**第****2**行

免费虚拟主机

加上其他错误。任何人都可以尝试一下，让我知道我能做些什么来解决它。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:58:18.627

我没有测试你的脚本，但我认为你应该将你的 Content-Disposition 和 Content-Type 更改为：

内容处置：**表单数据**；名称="用户文件"; filename="front.png" 内容类型：**image/png**

你知道查尔斯计划吗？这非常有用。它是一个代理，可以帮助您分析您的请求以及服务器响应是什么。

[http://www.charlesproxy.com/](http://www.charlesproxy.com/)

# drupal - Drupal 7 在自定义模块中使用媒体模块中的媒体选择器

> ID：11742763
> 
> 赞同：2
> 
> 时间：2012-07-31T14:46:09.877
> 
> 标签：drupal, module, drupal-7, media

我正在创建自己的模块，它将向特定地址发送电子邮件。

但我需要知道如何合并来自名为“媒体”的模块中的媒体选择器，以便用户可以以与发送电子邮件相同的形式将文件上传到服务器。

我现在的表单是在我的新模块的 PHP 中创建的。

```
$form['email'] = array(
'#type' => 'textfield',
'#title' => t('Your e-mail address'),
'#required' => TRUE,
);
$form['title'] = array(
'#type' => 'textfield',
'#title' => t('Title of bug'),
'#required' => TRUE,
);
 $form['message'] = array(
'#type' => 'textarea',
'#title' => t('Bug description'),
'#required' => TRUE,
);
$form['submit'] = array(
'#type' => 'submit',
'#value' => t('Submit'),
);
  return $form; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T00:46:09.947

`media.module`定义了一个名为`media`. 因此，您可以执行以下操作：

```
$form['file'] = array(
  '#type' => 'media',
  ...
); 
```

查看更多选项`media_element_info()`。`media.module`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-27T05:09:37.850

您可以使用此代码。它甚至适用于一种形式的多个媒体元素。

```
$form['image'] = array(
    '#type' => 'media',     
    '#tree' => TRUE,
    '#title' => t('Image'),
    '#description' => t('Image'),
    '#input' => TRUE,
    '#media_options' => array(
      'global' => array(
        'types' => array('image'), // Example: array('image', 'audio');
        'schemes' => array('http'), // Example: array('http', 'ftp', 'flickr');
      ),
    ),
    '#default_value' => array('fid' => ''), // Change to your default value
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T03:28:51.940

如果你想设置整个媒体表单，你可以使用，

```
$form['pgh'] = array(
'#type' => 'media',
'#title' => t('Upload video'),
'#input' => TRUE,
'#media_options' => array(
  'global' => array(
    'types' => array('document'),
    'schemes' => array('http'),
  ),
),
'#description' => t('Pick a video file to upload.'),
'#attached' => array(),
'#extended' => TRUE,
// '#value' => array('fid' => 22),
); 
```

last '#value' 设置上次上传的默认文件。希望这可以帮助。

# c# - 如何在不调用 diskpart 脚本的情况下使用 C# 代码挂载 VHD？

> ID：11742766
> 
> 赞同：1
> 
> 时间：2012-07-31T14:46:20.583
> 
> 标签：c#, .net, azure, vhd

在我的 Azure 角色中，我想挂载一个 VHD - 大致相当于以下`diskpart`命令：

```
vdisk select VhdFilePath
vdisk attach 
```

[这个答案](https://stackoverflow.com/a/2567199/57428)解释了如何创建一个脚本，然后从 C# 以编程方式调用它。

有没有一种方法可以在没有脚本的情况下实现同样的效果——只需使用一些 .NET 类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:06:08.000

我不知道是否有托管 API 可以执行此操作，但有一些 C# 包装器的示例围绕一些本机方法：

[http://www.jmedved.com/2009/05/open-and-attach/](http://www.jmedved.com/2009/05/open-and-attach/)

由于这包含了[AttachVirtualDisk](http://msdn.microsoft.com/en-us/library/windows/desktop/dd323692%28v=vs.85%29.aspx)方法，我认为它也应该适用于 Windows Server 2008 R2（请注意，您需要将角色的**osFamily**设置为 2 才能获得**R2**）。

# ruby-on-rails - Rails 2.3.14 本地化是/否

> ID：11742770
> 
> 赞同：1
> 
> 时间：2012-07-31T14:46:28.147
> 
> 标签：ruby-on-rails

我有这样的 YAML，在 /config/locales/defaults/en.yml 中：

```
en:
  no_results_found: None Found
  yes: Yes
  no: No
  approve: Approve 
```

并在 Rails 控制台中获得这些结果：

```
>> helper.t(:no_results_found)
=> "None Found"
>> helper.t(:yes)
=> "<span class=\"translation_missing\">en, yes</span>"
>> helper.t(:no)
=> "<span class=\"translation_missing\">en, no</span>"
>> helper.t(:approve)
=> "Approve" 
```

我尝试将 yes/no 重命名为 yes_text 和 no_text，并得到更奇怪的结果：

```
>> helper.t(:yes_text)
=> true
>> helper.t(:no_text)
=> false 
```

如何输出（英文）是或否？请记住，我在 yaml 中定义，因此我可以提供其他语言的版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:08:49.180

采用：

```
en:
  'yes': Yes
  'no': No 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:49:55.560

```
en:
 no_results_found: "None Found"
 result_yes: "Yes"
 result_no: "No"
 approve: "Approve" 
```

添加一些带有 yes: 或 no: 翻译变量的前缀，因为它在 i18n 中是默认的。

# .net - .NET 4 内存映射文件

> ID：11742771
> 
> 赞同：0
> 
> 时间：2012-07-31T14:46:31.550
> 
> 标签：.net, c#-4.0, shared-memory

有谁知道当您从 MMF 中提取时，本地 App 进程是否为共享内存中的内容创建自己的内存存储？还是直接引用内存？

我问这个问题是因为我正在考虑在 MMF 中使用 4gb 文件，如果它为使用该资源的每个应用程序（进程）拉下本地内存，我将查看大量 RAM。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:50:15.683

映射的内存不会被复制进去。它是按需加载的，也是按需卸载的。

只是映射它什么都不做。您只加载您访问的内容，并且操作系统可以在它认为这是正确的事情时卸载内存。

同一映射文件的内存也在进程之间共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:08:25.370

基本上有两种内存映射。最常见的一种是您通过 获取的共享映射`MemoryMappedFile.CreateFromFile(string)`。共享映射通常使用 IO 缓存内存页面来保存文件内容，并将这些页面映射到访问映射文件相应部分的那些进程的虚拟地址空间中。它只消耗与文件常驻部分的总大小一样多的内存。并且由于存在此内容来自/去往的物理介质，因此操作系统可以在内存不足时释放此内存（通过在此之前将脏页写入磁盘）。

还有另一种映射类型，称为私有或 CoW（写时复制）映射。最初它的工作方式与共享映射非常相似，但是当任何进程写入其中的任何部分时，都会创建一个新的内存页面，该进程私有，并将原始页面的内容复制到其中（因此写入*时**复制*） . 这个新的内存页面是进程私有的，不是由原始文件备份，而是由系统页面文件备份。因此，私有映射会消耗额外的内存，并且一个进程所做的更改在其他进程中不可见。私有映射是使用with set to创建的。*`MemoryMappedFile.CreateFromFile(path, mode, map, capacity, access)``access``System.IO.MemoryMappedFiles.MemoryMappedFileAccess.CopyOnWrite`*

# jquery - 第二个完成后如何运行一个异步函数？

> ID：11742773
> 
> 赞同：0
> 
> 时间：2012-07-31T14:46:37.680
> 
> 标签：jquery, ajax, asynchronous, jsonp

我有两个功能的问题。我只想`chcekResults`在`callAPI`完成后运行。

我的点击事件：

```
$("a#showA").click(function (e) {
    e.preventDefault();
    chceckResults(callAPI(apiKey));
}); 
```

和功能：

```
var Count = 0;
var ContractsArray = new Array();

function callAPI(yourAPIKey){
var enquiry = URL + yourAPIKey;
//alert(enquiry);
$.ajax({
 url: enquiry,
 type: 'GET',
 dataType: "jsonp",
 jsonp: "callback",
 jsonpCallback: "jsonpCallback2",
 complete: function (response, responseCode) {
 },
 success: function (json) {
     $.each(json.Contracts, function (index, contract) {
        // alert("Count before increament : " + Count);
        // alert(contract.ContractCode);
         ContractsArray[Count] = contract.ContractCode;

        // alert("Count after increament : " + Count);
        // alert("ContractsArray[Count]: " + ContractsArray[Count]);
         Count++;

        });
    }
 });
}

function chceckResults(){
alert("Count value in chceckResults : " + Count);
  for(var i = 0; i <= Count; i++){
    alert("ContractsArray[" + i + "]: " + ContractsArray[i]);
  }
} 
```

我只想`chcekResults`在`callAPI`完成后运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:48:21.380

只需`chceckResults`从`callAPI`的成功处理程序中调用该函数：

```
success: function (json) {

    chceckResults();

    $.each(json.Contracts, function (index, contract) {
        ContractsArray[Count] = contract.ContractCode;
        Count++;
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:57:04.010

您希望 chcekResults 在 callAPI 完成后运行，有几种可能性，它在 callAPI 成功后运行（我想这是您真正想要的），或者 callAPI 失败，或两者兼而有之。

由于 callAPI 正在进行 ajax 调用，因此您可以将 chcekResults 放在 ajax 的成功回调中。

这样：

```
$.ajax({
  url: enquiry,
  type: 'GET',
  dataType: "jsonp",
  jsonp: "callback",
  jsonpCallback: "jsonpCallback2",
  complete: function (response, responseCode) {
  },
  success: function (json) {
  $.each(json.Contracts, function (index, contract) {
    // alert("Count before increament : " + Count);
    // alert(contract.ContractCode);
    ContractsArray[Count] = contract.ContractCode;

    // alert("Count after increament : " + Count);
    // alert("ContractsArray[Count]: " + ContractsArray[Count]);
    Count++;
   });
   // --------------------- Edit Begins -------------------------
   chcekResults(...);   // This is run after ajax response returns.
   // --------------------- Edit Ends -------------------------
  }
}); 
```

这是一个快速的方法，如果你想让它更通用，你可以将 chcekResults 作为回调传递给 ajax，这样如果定义了这个回调，就运行它，如果没有，忽略。这样，您可以在有或没有回调的情况下使用这个 ajax。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:48:56.637

打电话给`checkResult`你的`callAPI` `success`回调。 `Success`函数返回后调用。

# google-chrome - 创建所有 dom 后如何运行 google chrome 扩展的内容脚本

> ID：11742774
> 
> 赞同：1
> 
> 时间：2012-07-31T14:46:39.360
> 
> 标签：google-chrome, content-script

我有一个 google chrome 扩展程序，需要从 dom 获取视频 URL

```
var videolink = document.getElementsByTagName('video')[0].attributes.getNamedItem('src').nodeValue; 
```

我发现视频元素是在页面加载后由 javascript 创建的。所以我尝试在“document_idle”阶段运行上面的内容脚本。但似乎视频元素即使在那时也没有初始化。

有什么方法可以让我稍后运行内容脚本，然后初始化视频元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:44:57.307

处理由 javascript 创建/加载的元素的最简单、最可靠的方法是轮询它们：

```
var waitForVideo = setInterval (checkForElement, 150);

function checkForElement () {
    var videoElem       = document.getElementsByTagName ('video');
    if (videoElem.length) {
        clearInterval (waitForVideo);
        var videolink   = videoElem[0].getAttribute ('src');
        // DO WHATEVER, WITH videolink HERE.
    }
} 
```

* * *

或者，您可以尝试全新的[DOM Mutation Observers](https://developer.mozilla.org/en/DOM/DOM_Mutation_Observers)，但这些只是添加到 Firefox 和 Chrome 中，在这种情况下可能有点矫枉过正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T09:45:41.200

如果您可以在扩展程序中编辑页面，您应该能够向元素添加一个`onLoad=yourFunction()`属性，以便在元素准备好后它会调用您的函数。

# sql-server-2008 - 将具有多个表的 SQL Server 结果导出到 Excel

> ID：11742777
> 
> 赞同：0
> 
> 时间：2012-07-31T14:46:48.913
> 
> 标签：sql-server-2008, export-to-excel

我有一个包含 69 个表的数据库。

请帮我导出这个

```
exec sp_MSforeachtable 'select top 3 * from ?' 
```

该行获取每个表的前 3 条记录并将它们打印在“结果”选项卡中（根据[这个问题](https://stackoverflow.com/questions/11741212/select-the-first-3-rows-of-each-table-in-a-database)）。

我想将结果导出到 .xls 文件中。

我尝试[了这个](https://stackoverflow.com/questions/3306628/exporting-data-from-sql-server-to-excel)使用 sp_makewebtask 的解决方案，但我知道它现在已经被贬值了。

能否请你帮忙？

非常感谢，

菲尔

PS 数据库在 MSSQL 2008 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:08:47.483

首先，您可能需要在`ORDER BY`查询中添加一个：没有它，您将从每个表中获得三个随机行，这可能是您想要的，也可能不是。

接下来，这是一次性任务还是您会定期做的事情？如果它是一次性任务，则动态生成查询脚本，手动运行它并自己复制和粘贴结果。这可能会让您了解如何生成脚本：

```
select 'select top 3 * from ' + quotename(name) + ' order by SomeColumn union all '
from sys.tables
where... -- add something here if necessary 
```

如果您需要定期执行此操作，我会避免使用 TSQL，因为它对于处理数据库外的文件来说是一种非常糟糕的语言。相反，编写一个小脚本来连接数据库、获取数据并写入输出文件通常更容易。您可以使用对您最方便的任何脚本或编程语言，然后使用 SQL 代理（如果在您的 SQL Server 版本中可用）来安排它。

# asp.net-mvc - 具有按位参数的动作过滤器

> ID：11742778
> 
> 赞同：0
> 
> 时间：2012-07-31T14:46:56.230
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

在我的 asp.net mvc 4.0 应用程序中，我正在创建一个`AuthorizeAttribute`名为“<em>AllowAttribute”的自定义。简而言之，我希望将此属性应用于某些方法（而不是整个控制器）并允许该属性接收按位时尚参数。

我像这样使用属性（注意：`MemberType`是一个枚举）

```
[Allow(MyProperty = MemberType.User | MemberType.Administrator)] 
```

属性本身的定义如下：

```
public class AllowAttribute : AuthorizeAttribute
{
    public MemberType MyProperty { get; set; }

    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (MemberContext.Current.Member == null || MemberContext.Current.Member.MemberType != this.MyProperty)
            throw new HttpException(403, "Forbidden");

        base.OnAuthorization(filterContext);
    }
} 
```

我基本上是在尝试将当前登录用户的 MemberType 与 MyProperty 中传递的一个（或多个）进行比较。如果当前登录的用户与传入的参数值不匹配，我会抛出一个禁止的异常。

我需要一些有关按位比较的指导，因为如果将多个 Enum 值传递给属性，则简单（不等于）不起作用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:01:57.410

如果您的枚举是多个值的组合：

```
MemberType.User | MemberType.Administrator 
```

并且您想确定是否设置了 MemberType.Administrator：

```
var myValue = MemberType.User | MemberType.Administrator;

bool isAdministrator = (myValue & MemberType.Administrator) == MemberType.Administrator;
bool isUser = (myValue & MemberType.User) == MemberType.User; 
```

确保您的枚举标有 [Flags] 属性，并且您的值设置为 2 的幂：

```
[Flags]
public enum MemberType
{
    None = 0,
    User = 1,
    Administrator = 2,
    SuperAdmin = 4
} 
```

有时您还会看到使用十六进制表示法列出的这些枚举：

```
[Flags]
public enum MemberType
{
    None = 0x0,
    User = 0x1,
    Admin = 0x2,
    Super = 0x4,
    ...
    Overlord = 0x10,
    SupremeOverlord = 0x20
} 
```

这只是个人品味的问题。

# objective-c - 刻度间隔：从默认值更改

> ID：11742785
> 
> 赞同：1
> 
> 时间：2012-07-31T14:47:12.853
> 
> 标签：objective-c, xcode, core-plot

所以我试图改变 x 和 y 轴的刻度间隔。但默认值为 0.5。我想将其更改为以十为单位计数。请帮忙。我最近尝试过这样的事情，但没有运气。

```
xMajorInterval = 10;
yMajorInterval = 10;  
axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(xMajorInterval);
axisSet.xAxis.minorTicksPerInterval = 4;
axisSet.xAxis.minorTickLength = 4.0f;
axisSet.xAxis.majorTickLength = 8.0f;
axisSet.xAxis.labelOffset = 1.0f;

axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(yMajorInterval);
axisSet.yAxis.minorTicksPerInterval = 4;
axisSet.yAxis.minorTickLength = 4.0f;
axisSet.yAxis.majorTickLength = 8.0f;
axisSet.yAxis.labelOffset = 1.0f; 
```

# php - Preg_match 让我获得整个页面的内容而不是特定的 div

> ID：11742792
> 
> 赞同：0
> 
> 时间：2012-07-31T14:47:27.740
> 
> 标签：php, regex

即使我试图只获取

```
<div class="description">...</div> 
```

它会返回此特定 div 以下的所有内容。我怎样才能只得到它之间的内容？

```
$file_string = file_get_contents('');

preg_match('/<div class="description">(.*)<\/div>/si', $file_string, $description);
$description_out = $description[1];

echo $description_out; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:49:11.423

您应该使用[非贪婪](http://www.regular-expressions.info/repeat.html#lazy)匹配。将 更改`(.*)`为`(.*?)`。

此外，尽可能避免使用正则表达式来解析 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:04:47.827

这是另一种方法，当您想使用 PHP DOMDocument 类在 PHP 中获取/读取 HTML 元素时指示。

```
<?php
// string with HTML content
$strhtml = '<!doctype html>
<html>
<head>
 <meta charset="utf-8" />
 <title>Document Title</title>
</head>
<body>
 <div id="dv1">www.MarPlo.net</div>
 <div class="description">http://www.coursesweb.net</div>
</body></html>';

// create the DOMDocument object, and load HTML from a string
$dochtml = new DOMDocument();
$dochtml->loadHTML($strhtml);

// gets all DIVs
$divs = $dochtml->getElementsByTagName('div');

// traverse the object with all DIVs
foreach($divs as $div) {
  // if the current $div has class="description", gets and outputs content
  if($div->hasAttribute('class') && $div->getAttribute('class') == 'description') {
    $cnt = $div->nodeValue;
    echo $cnt. '<br/>';
  }
}
?> 
```

您可以在 php.net 上找到有关 DOMDocument 的文档。

# javascript - 禁用控件

> ID：11742794
> 
> 赞同：0
> 
> 时间：2012-07-31T14:47:31.690
> 
> 标签：javascript, jquery, asp.net

我正在尝试禁用我的 Aspx 页面上的一些控件，但无法使其正常工作。我已经尝试过 Javascript 和 JQuery，所以我知道我必须做一些简单的错误。

这就是我的自动取款机，我知道它肯定会在我想要的时候进入这两个功能，因为我一直在提醒我这样说。但是，控件始终保持启用状态！

```
<script language="javascript" type="text/javascript">

function fun1(){
var input = $('#txtDocs');
input.removeAttr('disabled');
}

function fun2() {
var input = $('#txtDocs');
input.attr('disabled', 'disabled');
} 
```

以及控制本身；

```
<p>
<asp:TextBox ID="txtDocs" runat="server"  Width="218px" 
      Height="75px" TextMode="MultiLine" MaxLength="40"/>
</p> 
```

我还尝试将两个函数中的代码换成以下各种版本；

```
document.getElementById("txtDocs").enabled = true;
document.getElementById("txtDocs").attributes.enabled = true;
document.getElementById("txtDocs").disabled = false; 
```

虽然不好。我究竟做错了什么？

**更新**

当前代码；

```
function fun1(){
alert("1 enable");
$('#txtDocs').removeAttr('disabled');
alert("2 enable");
}

function fun2() {
alert("1 disable");
$('#txtDocs').prop('disabled', true);
alert("2 disable");
}

<asp:TextBox ID="txtDocs" runat="server"  Width="218px" ClientIDMode="Static"
      Height="75px" TextMode="MultiLine" MaxLength="40"/> 
```

仍然不好：/我只是看到`alert("1 disable")`，`alert("1 enable")`所以`alert("2 enable")`没有通过fun2 ...

**笔记**

调试到我的代码并注意到在运行时我的文本框实际上是一个文本区域。有什么意义吗？它的 ID 也会在开头标记通常的“ctl00_MainContentPlaceHolder_”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:50:13.927

如果您使用的是 jQuery 1.6+，则应该使用 prop()

```
$('#txtDocs').prop('disabled',true);
$('#txtDocs').prop('disabled',false); 
```

根据 jQuery 文档[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

> 应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:51:28.957

`disabled`是二进制属性，而不是属性，因此您需要使用：

```
$('#txtDocs').prop('disabled','disabled');
$('#txtDocs').removeAttr('disabled'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:52:01.717

看起来你应该这样做：

```
input.attr('disabled', true); // to disable

input.removeAttr('disabled'); // to enable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:52:25.350

您的`TextBox`ID“txtDocs”不会像那样出现在客户端上，因此 javascript 无法找到一个元素，`id="txtDocs"`您需要将[`ClientIDMode`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)TextBox 控件上的属性设置为`Static`：

```
<asp:TextBox ID="txtDocs" runat="server" Width="218px" ClientIDMode="Static" 
   Height="75px" TextMode="MultiLine" MaxLength="40" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:52:48.130

## 标记

您缺少**[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)** ...

```
<asp:TextBox ID="txtDocs" runat="server" Width="218px" 
  ClientIDMode="Static" Height="75px" TextMode="MultiLine" MaxLength="40" /> 
```

## JavaScript

```
document.getElementById('IdOfTheTextbox').disabled = true/false; 
```

## 您改为 FireBug 仔细扫描问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T07:49:21.277

无法真正解释它，但是花了很长时间在这里尝试了所有东西以及我在网上可以找到的所有东西，像这样引用我的对象；

```
document.getElementById('ctl00_MainContentPlaceHolder_txtDocs').disabled = false; 
```

请注意 ID 前缺少 #。此外，我不需要 ClientIDMode，因为我将“ctl00_MainContentPlaceHolder_”放在我的 ID 之前。

# jquery - 根据日期修改元素背景颜色

> ID：11742799
> 
> 赞同：0
> 
> 时间：2012-07-31T14:47:49.597
> 
> 标签：jquery

我有一个这样的日子清单，

```
<ul>
    <li class="dark"><a rel="25" class="0725" style="color: rgb(255, 255, 255);">25</a></li>
    <li class="dark"><a rel="26" class="0726" style="color: rgb(255, 255, 255);">26</a></li>
    <li class="dark"><a rel="27" class="0727" style="color: rgb(255, 255, 255);">27</a></li>
    <li class="dark"><a rel="28" class="0728" style="color: rgb(255, 255, 255);">28</a></li>
    <li class="dark"><a rel="29" class="0729" style="color: rgb(255, 255, 255);">29</a></li>
    <li class="dark"><a rel="30" class="0730" style="color: rgb(255, 255, 255);">30</a></li>
    <li class="dark first"><a rel="31" class="0731" style="color: rgb(255, 255, 255);">31</a></li>
    <li class="dark"><a rel="1" class="0801" style="color: rgb(255, 255, 255);">1</a></li>
    <li class="dark"><a rel="2" class="0802" style="color: rgb(255, 255, 255);">2</a></li>
    <li class="dark"><a rel="3" class="0803" style="color: rgb(255, 255, 255);">3</a></li>
    <li class="dark"><a rel="4" class="0804" style="color: rgb(255, 255, 255);">4</a></li>
    <li class="dark"><a rel="5" class="0805" style="color: rgb(255, 255, 255);">5</a></li>
    <li class="dark"><a rel="6" class="0806" style="color: rgb(255, 255, 255);">6</a></li>
    <li class="dark"><a rel="7" class="0807" style="color: rgb(255, 255, 255);">7</a></li>
    <li class="dark"><a rel="8" class="0808" style="color: rgb(255, 255, 255);">8</a></li>
    <li class="dark"><a rel="9" class="0809" style="color: rgb(255, 255, 255);">9</a></li>
    <li class="dark"><a rel="10" class="0810" style="color: rgb(255, 255, 255);">10</a></li>
    <li class="dark"><a rel="11" class="0811" style="color: rgb(255, 255, 255);">11</a></li>
    <li class="dark"><a rel="12" class="0812" style="color: rgb(255, 255, 255);">12</a></li>
</ul> 
```

我想改变当天的颜色和前几天的另一种颜色。课程是月日格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:59:07.010

尝试这样的事情

```
// get current date
var today = new Date();
// get days using getDate() and pad to 2 digits
var tdd = zeroPad(today.getDate(),2);
// get months using getMonth() and pad to 2 digits
var tmm = zeroPad(today.getMonth()+1,2);

// get current date
var yesterday = new Date();
// set date to date -1 ie yesterday
yesterday.setDate(today.getDate() - 1);
// get days using getDate() and pad to 2 digits
var ydd = zeroPad(yesterday.getDate(),2);
// get months using getMonth() and pad to 2 digits
var ymm = zeroPad(yesterday.getMonth()+1,2);

// concatenate strings to form class and use css() to set appropriate color
$('.'+tmm + tdd).css('background-color','red');
$('.'+ymm + ydd).css('background-color','blue'); 
```

应该将今天的颜色设置为红色，将昨天的颜色设置为蓝色。使用从[SO answer here](https://stackoverflow.com/a/2998874/572939)获取的[`Date`对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/)和函数[`.css()`](http://api.jquery.com/css/)`zeroPad()`

[这里的工作示例](http://jsfiddle.net/PdYkf/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:59:47.953

使用 JS：

```
var d = new Date();
alert(d.getDate());
alert(d.getMonth()); 
```

d.getDate() 将显示一个介于 1 和 31 之间的数字。 g.getMonth() 返回月份（从 0 到 11）

而是使用 0731 作为您的类，将 0731 作为 ID，并使用 ByID getter 更新样式类。

[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

您现在可以利用这些信息帮助自己。

# jquery - 函数 animate() 中背景位置的扩展在 IE7 或 IE8 中不起作用

> ID：11742805
> 
> 赞同：0
> 
> 时间：2012-07-31T14:48:03.883
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, jquery-animate, background-position

此代码是由 Alexander Farkas [http://bit.ly/bZzOC8](http://bit.ly/bZzOC8)创建的扩展， 它对于可以在函数 animate() 上使用两个值很有用，如下例所示：

```
$('div').animate({
   backgroundPosition:'(0 -5500)'
},330); 
```

不幸的是，这个扩展在使用 IE7 或 IE8 时不起作用。下一个代码是 backgroundPosition 扩展：

```
/**
 * @author Alexander Farkas
 * v. 1.02
 */
(function($) {
    $.extend($.fx.step,{
        backgroundPosition: function(fx) {
            if (fx.state === 0 && typeof fx.end == 'string') {
                var start = $.curCSS(fx.elem,'backgroundPosition');
                start = toArray(start);
                fx.start = [start[0],start[2]];
                var end = toArray(fx.end);
                fx.end = [end[0],end[2]];
                fx.unit = [end[1],end[3]];
            }
            var nowPosX = [];
            nowPosX[0] = ((fx.end[0] - fx.start[0]) * fx.pos) + fx.start[0] + fx.unit[0];
            nowPosX[1] = ((fx.end[1] - fx.start[1]) * fx.pos) + fx.start[1] + fx.unit[1];           
            fx.elem.style.backgroundPosition = nowPosX[0]+' '+nowPosX[1];

           function toArray(strg){
               strg = strg.replace(/left|top/g,'0px');
               strg = strg.replace(/right|bottom/g,'100%');
               strg = strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");
               var res = strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);
               return [parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];
           }
        }
    });
})(jQuery); 
```

IE 调试器在这一行发现了错误。

```
strg = strg.replace(/left|top/g,'0px'); 
```

我想使用这个插件，因为 backgroundPositionY 或 X 在 firefox 和 Opera 上不兼容。如何修复 IE7 和 8 上的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:38:31.577

可以在此链接中找到解决方案，[IE8 和 jQuery 空指针](https://stackoverflow.com/questions/1780617/ie8-and-jquery-null-pointers/12080450)无论如何这是修复 ie 错误的代码

```
/**
 * @author Alexander Farkas
 * v. 1.02
 */
(function($){   
    $.extend($.fx.step,{       
        backgroundPosition: function(fx){            
            if (fx.state === 0 && typeof fx.end == 'string'){
                if(navigator.appName == 'Microsoft Internet Explorer'){ //bugfix to IE
                    var start = $.curCSS(fx.elem,'backgroundPositionX');
                    start +=  ' ';
                    start += $.curCSS(fx.elem,'backgroundPositionY');
                }
                else {
                    var start = $.curCSS(fx.elem,'backgroundPosition');
                }
                start = toArray(start);
                fx.start = [start[0],start[2]];
                var end = toArray(fx.end);
                fx.end = [end[0],end[2]];
                fx.unit = [end[1],end[3]];
            }

            var nowPosX = [];
            nowPosX[0] = ((fx.end[0] - fx.start[0]) * fx.pos) + fx.start[0] + fx.unit[0];
            nowPosX[1] = ((fx.end[1] - fx.start[1]) * fx.pos) + fx.start[1] + fx.unit[1];
            fx.elem.style.backgroundPosition = nowPosX[0]+' '+nowPosX[1];

            function toArray(strg){               
                strg = strg.replace(/left|top/g,'0px');
                strg = strg.replace(/right|bottom/g,'100%');
                strg = strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");
                var res = strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);
                return [parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];
            }        
        }   
    });
})(jQuery); 
```

# c# - 如何将 C# 数组转换为 unityscript

> ID：11742809
> 
> 赞同：-1
> 
> 时间：2012-07-31T14:48:16.753
> 
> 标签：c#, unity3d, unityscript

我正在尝试使用 Unity3D 制作智能手机应用程序，并且正在使用 unityscript。我从 Prime31 购买了一些插件，它们都可以正常工作，但是示例脚本是用 C# 编写的。

我想将下面的示例转换为 JS：

```
var buttons = new string[] { "Save", "Cancel" };
EtceteraBinding.showAlertWithTitleMessageAndButtons( "Alert!", "Do you want to save?", buttons ); 
```

我试过这样：

```
var buttons:String[];
buttons=["Save","Cancel"];
EtceteraBinding.showAlertWithTitleMessageAndButtons( "Alert!", "Do you want to save?", buttons ); 
```

这不好，当然`["Save","Cancel"]`是在第一个按钮中显示，而在另一个按钮中什么也没有？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:54:40.683

你有任何文件`showAlertWithTitleMessageAndButtons()`吗？

也许在 JavaScript 中参数是不同的。例如，按钮标题可能作为单独的参数而不是数组传递：

`showAlertWithTitleMessageAndButtons("Alert", "Something", "buttonTitle1", "buttontTitle2")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:35:29.797

离开您提供的文档：

```
 // Shows a standard Apple alert with the given title, message and an array of buttons. At least one button must be included. 
 public static void showAlertWithTitleMessageAndButtons( string title, string message, string[] buttons ) 
```

你应该能够使用：

```
EtceteraBinding.showAlertWithTitleMessageAndButtons( "Alert!", "Do you want to save?", ["Save", "Cancel"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T01:07:45.570

试试这个，我有 Prime31 插件，这对我来说编译得很好。

```
var test : String[] = ["One", "Two"];
EtceteraBinding.showAlertWithTitleMessageAndButtons("Name","Stuff", test); 
```

如果它不起作用，你在 Unity 中遇到了什么错误？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-31T14:56:20.020

尝试这个：

```
var buttons = new Array();
buttons.push("Save");
buttons.push("Cancel"); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-31T14:52:53.430

那这个呢：

```
var buttons = new Array("Save","Cancel"); 
```

# java - 用于 JSON REST API 的 Spring +（什么库）

> ID：11742810
> 
> 赞同：2
> 
> 时间：2012-07-31T14:48:18.830
> 
> 标签：java, json, rest

我希望在工作中制作一个 REST API，并且我想要与 Spring 很好地集成的东西。我看了几个，想看看我是否遗漏了什么，并得到更多知情人士的意见。

所以这是我的基本要求……</p>

*   集成（或至少不与 Spring 3.1+ 冲突）
*   超媒体链接（一种或另一种方式，即使它只是基于模板的字符串字段）
*   JSON（XML 也不错）支持

还有一个要求……</p>

映射到/从 JSON。这是迄今为止最大的绊脚石。我看到很多框架支持编组到/形成 JSON，但都是直接的 POJO 编组。例如，我可能想为不同的请求提供不同的对象表示。

假设我想要一份所有宠物主人的名单，我可能只想要一份人员名单和他们的名字，以及他们宠物的链接。但是，如果其他一些请求是专门针对所有者的，我想将他们的宠物（作为所有者对象的子对象）列为响应的一部分。

有没有一种好方法可以做到这一点并定义这种映射，或者您只需要创建具有不同注释的 POJO 并将数据从实体传输到它们？基本上是创建一组 DTO 来表示不同请求的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:51:34.523

Spring MVC 可能满足您的所有要求 - 这是一个很好的参考 - [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:11:34.407

1.  创建您的实体（例如 Person.java）
2.  使用 Spring Data JPA 并创建接口来为这些实体自动生成存储库/DAO（例如。PersonRepository.java）
3.  使用 Spring Data REST 将 Spring Data 存储库导出为 HATEOAS/RESTful servlet（浏览`/persons`url）

您不必为存储库/DAO 编写任何代码。Spring Data JPA 将为您编写 DAO。您所要做的就是创建一个非常基本的界面。

您不必编写任何控制器。Spring Data REST 将使用自己的 servlet 导出所有存储库。

当您使用它时，使用 Hibernate 的 hbm2java 从您的数据库模式创建您的实体，并创建您的 Spring Data JPA 存储库。

# wpf - 找不到样式

> ID：11742811
> 
> 赞同：2
> 
> 时间：2012-07-31T14:48:19.397
> 
> 标签：wpf, caliburn.micro

我有一个带有 Caliburn.Micro 的 WPF 应用程序。我在 ResourceDictionary/Styles.xaml 中定义了一个样式：

```
<Style x:Key="DisplayNameTextBlockStyle" TargetType="TextBlock">
    <Setter Property="Foreground" Value="#FF414462" />
    <Setter Property="Margin" Value="4,4,4,0" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="FontSize" Value="13.333" />
    <Setter Property="TextWrapping" Value="Wrap" />
    <Setter Property="VerticalAlignment" Value="Center" />
</Style> 
```

我正在尝试将其应用于我的控件，如下所示：

```
 <ScrollViewer HorizontalScrollBarVisibility="Auto">
    <telerik:RadBusyIndicator IsBusy="{Binding IsBusy}">
        <StackPanel x:Name="LayoutRoot">
            <StackPanel Margin="0 0 0 0" Orientation="Horizontal">
                <TextBlock VerticalAlignment="Center"
                           Style="{StaticResource DisplayNameTextBlockStyle}"
                           Text="Data Entry" /> 
```

但是由于某种原因，在加载此视图时，我遇到了一个异常：

找不到名为“DisplayNameTextBlockStyle”的资源。资源名称区分大小写。”

能否请你帮忙？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:57:52.240

通常发生这种情况是因为您的资源字典尚未加载。您可以通过多种方式进行管理；最简单的方法是在`app.xaml`文件中包含以下内容：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="ResourceDictionary/styles.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

# javascript - 无法在 d3 中选择 SVG foreignObject 元素

> ID：11742812
> 
> 赞同：13
> 
> 时间：2012-07-31T14:48:19.847
> 
> 标签：javascript, svg, d3.js, force-layout

我正在使用 d3 强制导向布局，其中包含使用 SVG`foreignObject`元素实现的 HTML 节点标签。我想在不同时间选择这些元素以更新它们的位置和其他属性（并在使用`enter()`and创建和销毁它们时跟踪它们`exit()`），但我似乎无法像其他 SVG 元素一样选择它们。

这是一个紧凑的例子：

HTML：

```
<html>
    <head>
        <title>Cannot Select SVG Foreign Object</title>
        <script src="http://d3js.org/d3.v2.js"></script>
        <script src = "fo_select.js"></script>
     </head>
     <body>
         <svg id="example_svg" width="600" height="600">
               <g>
                  <circle r="40" cx = "80" cy="80"></circle>
                  <foreignObject width = "100" height = "100" x = "200" y="200">
                         <body>Hello, world</body>
                  </foreignObject>
               </g>
         </svg>
         <script>run()</script>
     </body>
</html> 
```

Javascript：

```
function run() {
    svg = d3.select("#example_svg");
    console.log(svg.selectAll("circle"));
    console.log(svg.selectAll("foreignObject"));
} 
```

这也在[http://bl.ocks.org/3217448](http://bl.ocks.org/3217448)上。控制台输出为：

```
[Array[1]]
[Array[0]] 
```

其中第一个数组包含`circle`元素，而第二个数组为空。为什么`circle`对象是可选择的，但`foreignObject`不是？我认为这与`foreignObject`. 我将如何选择它来在我的代码中操作它？非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-31T15:32:54.493

严格来说，SVG 是区分大小写的，所以你应该`<foreignObject>`使用`<foreignobject>`.

更严重的是，[WebKit](https://bugs.webkit.org/show_bug.cgi?id=83438)中有一个开放的错误会阻止选择 camelCase 元素。

一种可能的解决方法是使用：

```
.selectAll(function() { return this.getElementsByTagName("foreignObject"); }) 
```

（不过，这可能不适用于较旧的 WebKit 版本；请参阅现已关闭的[WebKit 错误 46800。](https://bugs.webkit.org/show_bug.cgi?id=46800)）

或者，您可以使用 CSS 类或 ID 并以这种方式选择您的元素。考虑到上述各种错误，如果可能的话，我现在会推荐这种方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T15:27:19.003

您应该可以使用 d3.selectAll("foreignObject") 或 svg.selectAll("foreignObject")。可能是您的 foreignObject 属性中的额外逗号（在 x 和 y 之间）。我只使用 D3 插入了 foreignObject 元素，所以也许像这样嵌入它们是不同的。

# android - Android 最近应用检测

> ID：11742823
> 
> 赞同：1
> 
> 时间：2012-07-31T14:49:17.617
> 
> 标签：android, notifications

“最新应用程序”软件密钥存在一些问题。问题在于，Android 似乎以用于打开该应用程序的最新意图打开该应用程序。如果用户从通知（弹出）的 PendingIntent 打开应用程序并执行特定于该通知的操作，则会出现问题。然后，当从“最常用”再次打开应用程序时，它会执行与通知案例相同的操作（可能不是有意的）。

我能想到的解决方法是将通知与 ID（或其他信息）相关联并保持其持久性。从通知中打开应用程序时（我们针对这种情况使用特定的 Intent 操作），我们检查是否有该 ID，如果有，将其删除，我们就完成了。下次我们打开应用程序时，即使我们有通知操作，我们也不在乎，因为 ID 不再保留。

这种情况有更好的解决方案吗？我们如何知道用户是否从“最常用”打开了应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:25:29.613

似乎答案是`Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY`

# php - @mysql_connect 和 mysql_connect

> ID：11742824
> 
> 赞同：10
> 
> 时间：2012-07-31T14:49:26.880
> 
> 标签：php, database-connection

我使用 PHP 连接到数据库没有问题，但是在我测试过的一些脚本中，我发现连接命令有一点不同。

`@mysql_connect`和 和有什么不一样`mysql_connect`？

我在编写自己的脚本时从未使用过这个`@`符号，所以只是想知道它是否有目的。

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T14:51:09.083

`@`函数前面的符号使其静音。这意味着，即使执行失败，您也不会收到任何类型的错误消息。所以我建议：**不要使用它**

另外正如@AlexanderLarikov 所说，不要再使用`mysql_*`了，社区已经开始[贬低](http://uk.php.net/manual/en/function.mysql-connect.php)该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:51:54.973

它是/[错误控制运算符](http://php.net/manual/en/language.operators.errorcontrol.php)。它只是让您抑制错误。

我建议您在代码中省略它。

从文档：

> 目前，“@”错误控制运算符前缀甚至会禁用将终止脚本执行的严重错误的错误报告。除此之外，这意味着如果您使用“@”来抑制某个函数的错误，并且该函数不可用或输入错误，则脚本将在那里死掉，而不会说明原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T14:52:05.720

那是一种错误抑制机制。因此，假设您尝试连接时出现错误，PHP 会默默地忽略它，而不是显示/记录它（取决于您的设置）。

我个人认为使用它是不好的做法，因为在我看来，您应该编写代码来处理错误，而不仅仅是默默地丢弃它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T14:52:46.547

@ supresses 警告[http://php.net/manual/en/language.operators.errorcontrol.php](http://php.net/manual/en/language.operators.errorcontrol.php)明智地使用它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T13:28:53.183

如果不使用任何类似的选项；

```
if ("我只是在我的 srv 上做测试") {
   错误报告（E_ALL）；
} 别的 {
   错误报告（0）；
}

```

那么，可以针对这种情况推荐；

```
$conn = @mysql_connect(...);
如果（$conn === 假）{
   // 处理错误
}

或者;

@mysql_connect(...) or die("Could not connect to ...");

```

因此，`@`如果错误存在于“使用可抑制功能的位置”行，则抑制错误。

// 可抑制？是的，因为如果这些是结构函数，则不能应用于`@`...`die, exit, eval`函数。

# .net - .NET 中的自定义属性是什么

> ID：11742829
> 
> 赞同：3
> 
> 时间：2012-07-31T14:49:40.517
> 
> 标签：.net, attributes, custom-attributes

问题不是那么简单:)。

基本上，我需要知道的是什么将包含在从一系列方法中的任何方法返回的数组中`Attribute.GetCustomAttributes()`。

当然，我定义的所有属性都会在那里。然而，不仅仅是他们。例如，所有 Entity Framework 属性也`EdmScalarPropertyAttribute`都在那里。哪些属性不会被视为自定义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T15:11:46.220

几乎每个从语法派生`System.Attribute`和添加的属性`[AttributeName]`都将在那里。`OutAttribute`其中一些甚至是编译器自己添加的，例如`out`关键字。

“自定义”一词将它们与直接构建到运行时的属性区分开来，例如成员/类型的可见性、方法是`static`或`virtual`等`sealed`。

例如`Type.Attributes`是一个枚举类型[`TypeAttributes`](http://msdn.microsoft.com/en-us/library/system.reflection.typeattributes.aspx)，或者`MethodBase.Attributes`对应于[`MethodAttributes`](http://msdn.microsoft.com/en-us/library/system.reflection.methodattributes.aspx)枚举。那些不算作“习惯”。

* * *

有一些奇怪的极端情况，关于`[Serializable]`内存布局。

基本 C#[写道](http://books.google.de/books?id=qa8UUSxq8Q0C&pg=PT933&lpg=PT933&dq=SerializableAttribute+pseudoattribute&source=bl&ots=xl5b_sV85x&sig=UErQB1PwE3bC0wvlqVTNnUD5gx8&hl=en&sa=X&ei=C_oXUICmDMje4QS994DwAw&ved=0CGEQ6AEwAQ#v=onepage&q=SerializableAttribute%20pseudoattribute&f=false)：

> `System.SerializableAttribute`然而，不仅仅是自定义属性的特征之一是 CIL 具有用于可序列化类的特殊标头符号这一事实。
> 
> ...
> 
> `SerializableAttribute`转换为元数据表中的一个设置位。这产生`SerializableAttribute`了一个*伪*属性，一个在元数据表中设置位或字段的属性。

# html - 无法让 z-index 在我的表中工作

> ID：11742832
> 
> 赞同：0
> 
> 时间：2012-07-31T14:49:52.673
> 
> 标签：html, css

我有一个 HTML 表，其中包含一个对象元素和一个 td 父标记内的 span 标记，如下所示：

HTML：

```
<table class="tableClass">
<tr>
<td class="tdClass"><object data="http://mydata.com"></object><span>My Text</span></td>
</tr>
</table> 
```

现在表格的背景颜色为#999。基本上，使用 z-indexing，我希望元素隐藏在元素后面，但 span 元素应该位于 #999 表格背景的顶部。我如何实现这一目标？

我的 CSS：

```
.tableClass{
  background: #999;
}
.tdClass object{
  z-index:999;
}

.tdClass span{
  position: absolute;
  z-index: 1; (if I make it -1, it disappears behind the table background...)
} 
```

目前，带有文本的 span 元素位于对象元素的顶部...我希望它位于对象元素的后面和表格背景的前面。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:52:07.853

`.tdClass object`至少需要`position:relative`，因为`z-index`仅适用于不是`position:static`. 尝试以下操作：

```
.tableClass{
  background: #999;
}
.tdClass object{
  position:relative;
  z-index:999;
}

.tdClass span{
  position: absolute;
  z-index: 1;
} 
```

另请参阅[CSS2.1：9.9.1 指定堆栈级别：“z-index”属性](http://www.w3.org/TR/CSS2/visuren.html#z-index)：

> 对于**定位框**，“z-index”属性指定：
> 
> 1.  当前堆栈上下文中盒子的堆栈级别。
> 2.  盒子是否建立堆叠上下文。

# android - 为多个 API 版本处理多个 AVD 图像的正确方法是什么？

> ID：11742833
> 
> 赞同：0
> 
> 时间：2012-07-31T14:49:52.663
> 
> 标签：android, android-emulator, avd

最近我下载了 Android SDK，但我最终安装了 API 版本 10 (Android 2.3.3) 的 SDK-Platform，因为这是我最初想使用的版本。但是现在我还需要使用 Android 4.0.3，但 SDK 管理器不断无法安装 API 版本 15 的 SDK 平台，因此也没有安装相应的系统映像。

所以我想知道，在模拟器上使用 Android ICE、Jellybean（将来）和 Gingerbread 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:03:58.227

您应该启动 Android SDK Manager 并且应该会看到新的 OS 平台。您可以下载操作系统映像（es Gingerbread、ICS 等）。

否则，您可以从 www.android.com 下载新版本并重新安装所有内容。

在您的 PC 中下载操作系统映像后，您可以使用这些映像创建不同的模拟器。希望这个hep。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:13:07.070

就像 nkr 所说，您应该尝试以完全权限运行 sdk 管理器（UAC 在windwos7 上比在 windows vista 上工作得更好，但有时它需要帮助；））。

仅供参考：[上一个问题可能是关于同一问题](https://stackoverflow.com/questions/4771895/android-sdk-manager-not-installing-components)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:14:12.777

您的构建目标应该始终是最新的平台（即 Jelly Bean API 16）。属性->Android->构建目标

在您的清单中，您应该定义如下内容：

```
 <uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="16" /> 
```

如果您的代码使用了以前版本中没有的东西，Lint 会告诉您。您可以在任何模拟器上测试您的代码以确保正确的功能。

# java - 日期之间的天/月（仅年/月）

> ID：11742838
> 
> 赞同：1
> 
> 时间：2012-07-31T14:50:01.223
> 
> 标签：java, datetime, jodatime

我需要计算两个开始日期之间的天数和月份。

例如，我有两个日期 1.1.2012 和 30.4.2012，现在我想知道包含在此范围内的天数和月数。

结果应该是 121 天零 4 个月。我得到的是 120 天零 3 个月。

从 joda time 开始的最佳方法是什么？

我的代码（两个日期都是 java.util.Date）：

```
Months.monthsBetween(new DateMidnight(startDate), new DateMidnight(endDate)).getMonths(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:49:45.357

```
 DateTime dt1 = new DateTime(2012, 1, 1, 00, 00, 00, 00);
  DateTime dt2 = new DateTime(2012, 4, 30, 00, 00, 00, 00);
  System.out.println(Days.daysIn(new Interval(dt1, dt2)));     // 120D
  System.out.println(Months.monthsIn(new Interval(dt1, dt2))); // 3M 
```

dt1 和 dt2 在几个月内的差异是**3 个整月**- 这是真的。不应该有4个月

dt1 和 dt2 之间的天数差异为 (31 days + 29 days + 31 days + 29 days) = **120 days**。第 30 天 - 30.04.2012 还没有结束，所以还不是一整天。

所以*结果应该是 121 天零 4 个月*- 错误的假设。
**结果应该是120天3个月**

# google-maps - 在使用 Twitter Bootstrap 创建的模式中显示 Google 地图

> ID：11742839
> 
> 赞同：60
> 
> 时间：2012-07-31T14:50:01.493
> 
> 标签：google-maps, twitter-bootstrap, modal-dialog

我正在尝试使用 Twitter Bootstrap 将 Google 地图插入到模式中。模态显示地图的形状，但只显示地图的一部分，其余部分是灰色的。调整屏幕大小时，地图始终正确显示，尽管居中位置错误。

我已经搜索并找到了一些建议，例如调用地图的调整大小事件，或者将地图图像的最大宽度设置为无，但到目前为止，这些建议都没有帮助。只要地图位于隐藏的元素中，似乎就无法确定它的正确大小。

## JS

```
function initialize() {
  var mapOptions = {
    center: new google.maps.LatLng(51.219987, 4.396237),
    zoom: 12,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById("mapCanvas"),
    mapOptions);
  var marker = new google.maps.Marker({
    position: new google.maps.LatLng(51.219987, 4.396237)
  });
  marker.setMap(map);
} 
```

## HTML

```
<div class="modal hide fade" id="myModal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">×</button>
    <h3></h3>
  </div>
  <div class="modal-body">
    <div id="mapCanvas" style="width: 500px; height: 400px"></div>
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
  </div>
</div> 
```

我正在使用 Twitter Bootstrap v2.0.4。我需要一些帮助，因为我未能正确触发调整大小事件或编辑 css 以使 Google 地图不受影响。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-07-31T14:59:21.540

谷歌地图在放置在动态元素内时确实会显示“灰色”区域（例如：调整大小、淡入淡出等的元素）。`shown.bs.modal`你是正确的触发“调整大小”功能，一旦动画完成（ Bootstrap 3中的`shown` [事件](http://twitter.github.com/bootstrap/javascript.html#modals)或Bootstrap 2中的事件）应该调用它：

```
$("#myModal").on("shown.bs.modal", function () {
    google.maps.event.trigger(map, "resize");
}); 
```

在 Bootstrap 2 中，您将执行以下操作：

```
$('#myModal').on('shown', function () {
    google.maps.event.trigger(map, "resize");
}); 
```

（`map`您的地图的变量名称在哪里（有关详细信息，请参阅[Google 地图文档](https://developers.google.com/maps/documentation/javascript/reference#event)），以及`#myModal`您元素的 ID）。

**更新 2018-05-22**

随着 Maps JavaScript API 3.32 版中的新渲染器版本的发布，调整大小事件不再是`Map`类的一部分。

该文件指出

> 调整地图大小时，地图中心固定
> 
> *   全屏控制现在保留中心。
>     
>     
> *   **不再需要手动触发调整大小事件。**

来源：[https ://developers.google.com/maps/documentation/javascript/new-renderer](https://developers.google.com/maps/documentation/javascript/new-renderer)

`google.maps.event.trigger(map, "resize");`从版本 3.32 开始没有任何效果

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-09-27T10:19:56.560

对我来说，它是这样工作的（Boostrap 3）：

```
$("#contact-modal").on("shown.bs.modal", function () {
    google.maps.event.trigger(map, "resize");
}); 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2013-08-08T18:42:48.140

## 正确显示地图并*居中*

我想指出我根据原始答案所做的一些修改，以使其与 Bootstrap 3 一起使用（检查[模态用法](http://getbootstrap.com/javascript/#modals-usage)）。

```
// Resize map to show on a Bootstrap's modal
$('#map-modal').on('shown.bs.modal', function() {
  var currentCenter = map.getCenter();  // Get current center before resizing
  google.maps.event.trigger(map, "resize");
  map.setCenter(currentCenter); // Re-set previous center
}); 
```

在这种情况下，我还会根据Jan-Henk 对第一个答案的评论中提出的[这个问题](https://stackoverflow.com/questions/8558226/recenter-a-google-map-after-container-changed-width)来处理地图的中心化。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-11-05T15:11:57.937

使用 Bootstrap 3 时，您需要使用其文档中提供的内容，即使用 'shown.bs.modal' 而不是 'shown'

例子：

```
 $('#modal').on('shown.bs.modal', function () { 
     initialiseMap();
 }); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-27T01:06:40.907

以下代码适用于引导程序 3

```
$("#mapModal").on("shown.bs.modal", function () {initialize();}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-10-15T15:02:34.683

确实，在 div 的内容是本地内容的情况下，接受的答案确实有效。不幸的是，我在显示作为远程数据一部分包含的地图时遇到了同样的问题。获取地图的句柄并调用调整大小没有正确地居中我的地图。这是我在远程数据情况下解决问题的方法。

## 将脚本标签作为远程数据的一部分包含在初始化地图的函数中

```
<script type="text/javascript">
    function renderMap() {
        var point = new google.maps.LatLng(51.219987, 4.396237);
        var map = new google.maps.Map(document.getElementById('map'), {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            zoom: 13,
            center: point
        });
        var marker = new google.maps.Marker({ position: point, map: map, icon: 'http://www.google.com/intl/en_us/mapfiles/ms/icons/red-dot.png' });
    }
</script> 
```

## 在主页面对话框的显示事件中调用函数

```
<script type="text/javascript">

    $(document).ready(function () {
        $('#dlgReportInfo').on('shown', function () {
            renderMap();
        });
    })
</script> 
```

这样，地图在初始化之前就已经在对话框中调整了大小。希望这将帮助任何其他有类似情况的人。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-04-19T17:53:12.910

接受的答案摆脱了灰色框，但没有将地图居中在正确的坐标上。我的解决方案是等到模态显示完成后再渲染地图。

```
$('#modal').on('shown', function () {
    initialize();
}); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-05-26T00:29:12.503

```
 this works for me 
    **<!-- Modal -->**
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Google Maps</h4>
                </div>
                <div class="modal-body">

                    <div id="map_canvas" style="width:auto; height: 500px;"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

**Button**
 <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">View Map</button>

**javascript**
<script type="text/javascript">
    function initializeMap() {
        var mapOptions = {
            center: new google.maps.LatLng(51.219987, 4.396237),
            zoom: 12,
            mapTypeId: google.maps.MapTypeId.HYBRID
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
          mapOptions);
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(51.219987, 4.396237)
        });
        marker.setMap(map);
    }

    //show map on modal
    $('#myModal').on('shown.bs.modal', function () {
        initializeMap();
    });

</script> 
```

希望这会有所帮助

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-07-28T05:30:48.910

我已经修复了解决方案：

```
$('#myId').on('shown.bs.modal', function () { 
    initializeMap() // with initializeMap function get map.
}); 
```

// modal bootstrap 上的event **shown.bs.modal**将在modal show 后触发，不要使用**show.bs.modal**，因为它会在modal show 之前调用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-12-10T16:05:41.967

尝试这个 ！

```
<div class="modal fade" id="map_modal" tabindex="-1" role="dialog" aria-    labelledby="myModalLabel" aria-hidden="true">
<div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">Modal title</h4>
        </div>
        <div class="modal-body"><div id="map_canvas" style="width:530px; height:300px"></div></div>

    </div><!-- /.modal-content -->
</div><!-- /.modal-dialog --> 
```

```
var map = marker = new Array();
geocoder = NULL;

                    function addPoint(location, id, mapId) {
                        if (!marker[id]) {
                            marker[id] = new google.maps.Marker({
                                position: location,
                                map: map[mapId],
                                draggable: true
                            });
                        }

                    }

                    function placeMarker(location, editStr, id) {
                        if (!marker[id]) {
                            marker[id] = new google.maps.Marker({
                                position: location,
                                map: map[id],
                                draggable: false
                            });
                        }
                        marker[id].setPosition(location);
                        map[id].setCenter(location);
                        $("#longitud").val(location.lat());
                        $("#latitud").val(location.lng());

                    }

                    function  initializeMap(id, div_id, lat, lng, editStr) {
                        if (!geocoder)
                            geocoder = new google.maps.Geocoder();

                        if (!map[id]) {
                            var coordinates = new google.maps.LatLng(lat, lng);
                            var myOptions = {zoom: 8, center: coordinates, mapTypeId: google.maps.MapTypeId.ROADMAP}
                            map[id] = new google.maps.Map(document.getElementById(div_id), myOptions);
                            google.maps.event.addListener(map[id], 'click', function(event) {
                                placeMarker(event.latLng, editStr, id);
                            });

                            placeMarker(coordinates, editStr, id);

                        }
                    }

                    $('#map_modal').on('shown.bs.modal', function(e) {
                        initializeMap("#newMaps", "map_canvas", 10.444598, -66.9287, "");
                    }) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-03-22T10:00:56.320

我也面临同样的问题，但我通过等待地图的“空闲”状态（即完成时）然后调用调整大小来解决它：

```
 google.maps.event.addListenerOnce(map, 'idle', function () {
                 var currentCenter = map.getCenter();
                 google.maps.event.trigger(map, 'resize');
                 map.setCenter(currentCenter);

                 map.setZoom(15);
             }); 
```

后

```
 map = new google.maps.Map(document.getElementById('map-canvas2'),mapOptions); 
```

# iphone - Objective C 将数字四舍五入到一个数字

> ID：11742842
> 
> 赞同：1
> 
> 时间：2012-07-31T14:50:12.233
> 
> 标签：iphone, objective-c, ios

我正在尝试将一个数字四舍五入到另一个数字（在我的情况下为 x * 90），经过一番搜索后，由于这段代码，我得到了它的工作：

```
round(number / 90) * 90; 
```

问题是这是否是最好的方法？感觉就像一些试验/错误代码..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:04:58.563

假设数字是整数

```
((number + (90/2))/90) * 90; 
```

如果你想使用 round() 和朋友，你必须转换为浮点数。以上都是用整数完成的。无论如何，有很多方法可以做到这一点（在你的例子中，返回将是一个浮点数，但是一个整数大小的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:02:03.267

这是正确的做法。如果你是四舍五入双打，你应该使用`NSNumberFormatter`：

```
float roundedValue = round(number / 90) * 90;
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setMaximumFractionDigits:1];
[formatter setRoundingMode: NSNumberFormatterRoundDown];

NSString *numberString = [formatter stringFromNumber:[NSNumber numberWithFloat:roundedValue]]; 
```

# c# - Telerik WPF GridView 在 GridView 中获取 GridView 的 SelectedItems

> ID：11742845
> 
> 赞同：0
> 
> 时间：2012-07-31T14:50:13.437
> 
> 标签：c#, wpf, gridview, telerik, hierarchy

我有一个 Telerik WPF GridView，它有一个 Gridview 作为 HierarchyChildTemplate。

当我在上层结构中展开一行时，我可以选择下层结构中的行。现在我想单击一个按钮并在 button_click 事件上访问 SelectedItems。有谁知道怎么去那里？

感谢您的帮助。

**编辑**

我得到了解决我的问题的方法：

1.  订阅子 GridView 的 SelectionChanged 事件
2.  在事件处理程序中，发送者将是当前子 GridView
3.  将子 GridView 的实际 SelectedItems 存储在实例变量中
4.  需要时使用存储的 SelectedItems

    ```
    private void SubGrid_SelectionChanged(object sender, SelectionChangeEventArgs e)
    {
        var subGrid = (RadGridView) sender;
        _subGridSelectedItems = subGrid.SelectedItems;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:19:47.750

您可以在按钮的单击处理程序中读取子网格的 SelectedItems 属性。

如果您的子网格名为 childGrid，您可以像这样访问选定的行：

```
var selectedRows = childGrid.SelectedItems; 
```

# vbscript - 如何使用VBScript删除临时文件夹中以特定名称开头的所有文件

> ID：11742848
> 
> 赞同：3
> 
> 时间：2012-07-31T14:50:20.560
> 
> 标签：vbscript

我正在尝试使用以下 VB 脚本从 Windows Temp 文件夹中删除所有以字符串“MyApp”开头的日志文件。

```
Dim objFSO
Set objFSO = CreateObject("Scripting.FileSystemObject")

if objFSO.FolderExists("C:\Documents and Settings\guest\MyApp") Then
          set folder = objFSO.getFolder("C:\Documents and Settings\guest\MyApp") 

if folder.files.Count <> 0 then 
    objFSO.DeleteFile "C:\Documents and Settings\guest\MyApp\*.*", True
end if 
          objFSO.DeleteFolder "C:\Documents and Settings\guest\MyApp", True
end if

<!--  The below code is not deleting the files which starts with the name "Mpp.023648011.log"   -->

if(objFSO.FileExists("C:\Documents and Settings\guest\Local Settings\Temp\MyApp.*")) Then
    objFSO.DeleteFile "C:\Documents and Settings\guest\Local Settings\Temp\MyApp.*", True
end if 
```

似乎以下检查失败：

if(objFSO.FileExists("C:\Documents and Settings\guest\Local Settings\Temp\MyApp.*"))

提前致谢。

**我找到了一种抑制错误消息并执行 DeleteFile 的方法。它对我有用。**

```
 On error resume next

     objFSO.DeleteFile "C:\Documents and Settings\guest\Local Settings\Temp\MyApp.*", True 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:52:43.893

我认为 VBScript 不支持**FileExists**使用**通配符**。更好的选择只是抑制删除中的错误并运行 DeleteFile 命令。

```
 On error resume next

 objFSO.DeleteFile "C:\Documents and Settings\guest\Local Settings\Temp\MyApp.*", True 
```

# c# - 转义左括号 C# 正则表达式

> ID：11742854
> 
> 赞同：4
> 
> 时间：2012-07-31T14:50:47.593
> 
> 标签：c#, regex, visual-studio-2010, escaping

我有以下格式的字符串：

```
prm.Add( "blah", "blah" ); 
```

我正在寻找使用正则表达式来提取第一个“blah”。为此，我将前半部分切掉，然后将后半部分切掉。

我用来摆脱“prm.Add(”的正则表达式是：

```
"prm.Add\([ ]*" 
```

其他线程似乎表明括号前的转义字符是可以接受的。但是VS抱怨我有一个无效的转义字符序列“（”。如果我使用：

```
"prm.Add([ ]*" 
```

应用程序错误，因为没有右括号。

我意识到我可以通过在“prm.Add(”上使用 Regex.Escape 来解决这个问题。但这并不是很优雅。

我的正则表达式语法错误还是 VS2010 不接受括号转义？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T14:53:37.153

您只需要转义反斜杠，编译器就可以理解：`"prm.Add\\([ ]*"`或`@"prm.Add\([ ]*"`

否则编译器无法理解诸如`"\n"`——作者想要什么？换行符或字符串“\n”原样？

但我会尝试让它更具动态性，例如不假设存在空格字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T14:54:54.117

当您在模式（它们是字符串）中转义时，您必须使用两个转义序列：

```
"prm.Add\\([ ]*" 
```

这是因为如果您只使用一次转义，系统会尝试找到一个计算结果为 的字符，但该字符`\(`不存在 - 您肯定知道的其他字符是例如`\r`或`\n`。

因此，通过使用 two `\`，您实际上逃脱了`\`- 将其留在解释的模式中。然后在该模式中，您可以忽略正则表达式的含义`(`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T14:57:45.130

这里的问题是，在 IDE 中转义字符串时，您正在转义某些内容，以便*编译器*理解转义。您想要的是 REGEX 对象理解您的字符串。

您需要正则表达式对象来获取`prm.Add\([ ]*`.

但是，反冲（`\`）是一个转义字符，所以编译器会尝试转义“（”，他不知道如何转义。所以......你需要转义反冲本身：

```
prm.Add\\([ ]* 
```

编译器处理此字符串并转换`\\`为`\`. 这导致了你想要的，因为正则表达式现在将得到一个由`prm.Add\([ ]*`.

理解这一点的一种方法是，如果您从文件或用户输入中读取正则表达式，则只需要一个反冲，因为编译器不再处理它（字符串是在运行时获取的，而不是编译时硬编码它）。

# c# - 在设置事件处理程序时使用空方法是不好的做法

> ID：11742855
> 
> 赞同：1
> 
> 时间：2012-07-31T14:50:56.663
> 
> 标签：c#, events

我有一个包含许多类的类库，并且在每个类中我都会引发一些事件。

每个事件都有自己的一组事件参数，因此我将这些作为自动属性存储在继承自`EventArgs`. 然后，我可以通过简单地调用并传入我继承类`Invoke`的新实例来引发相关事件。`EventArgs`这就是我的意思：

```
using System;

//My Class Library
namespace MyClassLibrary
{
    //A class
    public class MyClass
    {
        //My event is a field
        public event EventHandler<MyEventHandler> myEvent;

        //I raise my event in this method
        public void InvokeMyEvent()
        {
            //Do some stuff

            //I raise my event here
            myEvent.Invoke(this, new MyEventHandler("The quick brown fox jumps over the lazy dog"));

            //Do some more stuff
        }
    }

    //An event handler, containing some interesting data about the event
    public class MyEventHandler : EventArgs
    {
        //Some interesting data as an automatic property
        public string MyInterestingData { get; private set; }

        //I assign the value of my intersting data in my constructor
        public MyEventHandler(string FooBar)
        {
            MyInterestingData = FooBar;
        }
    }
} 
```

所以这就是我想做的。现在，在我的应用程序中，我可以像这样添加对我的类库的引用、实例化`MyClass`和订阅我的事件。这样做的好处（使用通用事件处理程序）是 Intellisense 允许我在订阅我的事件时使用 Tab 键，并为我设置方法，默认传入 MyEventHandler。无需铸造。

```
using System;
using MyClassLibrary;

namespace ConsoleApplication33
{
    class Program
    {
        static void Main(string[] args)
        {
            MyClass x = new MyClass();
            x.myEvent += new EventHandler<MyEventHandler>(x_myEvent);
        }

        static void x_myEvent(object sender, MyEventHandler e)
        {
            //Doing lots of important stuff

            //Able to access my interesting data in my event handler without casting
            var y = e.MyInterestingData;
        }
    }
} 
```

这一切都编译得很好，但是类库的重点肯定是有一堆可重用的代码，这肯定是这里的意图。所以我想将我的类库添加到一些项目中。在其中一些项目中，我需要订阅`myEvent`，在其他项目中不需要，但我仍然想在这些项目中使用该类的其他功能，并且将来可以选择订阅`myEvent`。

但是，如果我在我不订阅的项目中使用我的类库，那么`myEvent`每当`myEvent`引发运行时错误时，我都会收到运行时错误。

`myEvent`我通过在构造函数中订阅`MyClass`一个空方法来解决这个问题，如下所示：

```
public MyClass()
{
    myEvent += new EventHandler<MyEventHandler>(MyClass_myEvent);
}

void MyClass_myEvent(object sender, MyEventHandler e)
{

} 
```

这意味着我可以将我的类库添加到任何项目中，实例化`MyClass`和使用它提供的其他功能，并在需要时订阅，`myEvent`如果不需要则忽略`myEvent`。

问题是我在 MyClass 中有一个空方法。想象一下这种情况，但有大约 30 个事件，因此有 30 个空方法。

几个问题

1.  我说得有道理吗？就像你至少理解我想要做什么一样，即使你认为我做这一切都错了？
2.  这里实际上是否存在问题，或者这是实现我想要实现的功能的相当标准的方式？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T14:55:42.087

一个事件 MyEvent 的典型实现如下：

```
protected virtual void OnMyEvent(MyEventArgs eventArgs) {
    var handler = MyEvent;
    if (handler != null) {
        handler(this, eventArgs);
    }
} 
```

然后，只要您想触发事件，就调用 OnMyEvent 而不是 MyEvent。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T14:54:01.030

这通常是您看到以下事件模式的原因：

```
private void OnMyEvent(object sender, MyEventArgs args)
{
    var ev = myEvent;

    if (ev != null)
        ev(sender, args);
}

OnMyEvent(this, new MyEventArgs("The quick brown fox jumps over the lazy dog")); 
```

如果没有订阅者，该事件将为空。此代码获取本地副本以确保检查点的事件不涉及竞争条件。然后调用该副本。尽管这以一种形式防止了竞争条件，但原始订阅者列表仍可能发生更改，这些更改在您的副本中不可见，因此它不是完全线程安全的。

老实说，我从来没有考虑过，甚至没有见过，以你的方式去做。我说最好坚持使用空检查而不是空方法订阅者，人们期望前者，而不是后者。

此外，空方法路由会消耗内存/对象，而空路由只需检查一次。

顺便说一句，`MyEventHandler`arguments 类通常被称为`MyEventArgs`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T16:35:33.057

值得注意的是，虽然多播委托可用于具有任意数量订阅者的事件，但`Delegate.Combine`在结果等于传入委托之一`Delegate.Remove`的情况下优化了 的性能，针对结果为be `null`，并且`Delegate.Invoke`针对它只调用一个委托的情况进行了优化（并且`OnMyEvent`在没有委托的情况下执行空检查会更快）。因此，添加一个空的事件处理程序会使代码的效率低于其他情况。

一种尚未提及的方法是创建一个静态的无操作委托，然后根据需要更改添加/删除处理程序：添加订阅时，如果旧订阅列表委托与静态无操作委托匹配，则`Interlocked.CompareExchange`使用存储新的代表；否则计算`Delegate.Combine`构建一个新的委托和`CompareExchange`那个（在任何一种情况下，如果`CompareExchange`失败，重试添加订阅方法）。删除订阅时，用于`Delegate.Remove`计算新列表；如果为 null，则替换静态无操作委托。然后用于`CompareExchange`更新订阅列表委托。

这种方法会稍微减慢`Add`and`Remove`方法，尽管不如简单地将无操作委托留在列表中；零订阅者情况下的委托调用会比空检查稍慢，但单订阅者情况下会稍微快一些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T14:55:02.623

处理此问题的规范方法是不引发没有订阅者的事件：

```
var handler = myEvent;
if (handler != null)
{
    handler(sender, new MyEventArgs());
} 
```

`handler`如果在多线程场景中单个订阅者在`null`检查和调用之间取消订阅，则分配给中间变量可以避免出现异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T14:57:03.533

使用空处理程序初始化事件没有任何问题。我一直都这样做。如果您调用该事件数千次，它可能会比您想要的慢（测试、测量、决定）......

设置空处理程序时不必那么罗嗦，您可以这样做：

```
myEvent = (sender, args) => { }; 
```

并避免创建方法...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T14:53:28.267

`null`通常的做法是在引发事件之前进行检查。在你的情况下：

```
if (myEvent != null)
  myEvent.Invoke(this, new MyEventHandler("The quick brown fox jumps over the lazy dog")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T14:57:11.620

我希望我能看到你在说什么。我认为，您可以为空方法省去自己的工作。只需通过以下方式调用您的事件：

```
 //I raise my event in this method
    public void InvokeMyEvent()
    {
        //Do some stuff

        //Check if there are subscribers!!
        if (myEvent != null)
          myEvent.Invoke(this, new MyEventHandler("The quick brown fox jumps over the lazy dog"));

        //Do some more stuff
    } 
```

# android - 如何在较新版本的android中更改进度条的高度？

> ID：11742860
> 
> 赞同：0
> 
> 时间：2012-07-31T14:51:08.473
> 
> 标签：android, progress-bar

如何更改 Android 中水平进度条的高度。我已经看到在一些早期版本（例如 Gingerbread）中，我可以将 minHeight 和 maxHeight 的属性设置为相同的值，该值是所需的高度。但由于某种原因，在 Jelly Bean 和可能的冰淇淋三明治中，此方法不适用于通过 XML 设置高度（这种情况下首选）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:00:08.677

您可以根据屏幕尺寸（hdpi、xhdpi...）或版本（11、12、...）等在 values 文件夹中创建尺寸文件，并在其中设置值

IE

1.在 values-hdpi 文件夹中创建：8dp

2.在 values-xhdpi 文件夹中创建：10dp

希望这对你有帮助

# deployment - Glassfish 3.1.2 在应用程序部署后重新加载所需的 jar

> ID：11742861
> 
> 赞同：2
> 
> 时间：2012-07-31T14:51:19.407
> 
> 标签：deployment, netbeans, jar, glassfish, ejb

我有一个使用一些外部库的 ebj（在这种情况下，这些库是我自己编写的）。我已将它们包含在我的 EJB 中。

问题是 glassfish 似乎只加载了一次所需的 jars（在第一次部署时），并认为他已经有了用于进一步部署的 jars。这只是一个假设，但如果我对 EJB 使用的一个库进行任何更改，重新部署 EJB，所做的更改将不会应用...... Glassfish 仍然使用他可能保留在缓存中的旧 jar 或类似的东西（我可以在 glassfish 存储库中找到罐子的任何标记）。

到目前为止我发现的唯一解决方案是重新启动服务器......不太适合开发/测试会话，您必须等待 glassfish 重新启动您所做的每一个小改动。

我的问题是：有没有办法避免这种行为并强制 glassfish 在每次部署时重新加载所需的罐子？

谢谢你读我。

注意：我正在使用 netbeans 进行本地部署，但直接从 glassfish 管理控制台进行部署会导致相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:17:28.077

好的，所以我终于得到了一些具体的结果。我不知道是否有很多人按照我的方式工作，但我会公开我找到的适合我需要的解决方案。

首先，如果您使用 netbeans 平台（因此使用 netbeans 插件）在独立的 Java 客户端上部署 EJB，您可能会感到担心。

问题是 glassfish（3.1.2，我不知道其他版本是否会发生同样的问题）在重新部署 EJB 时不会重新加载所需的 jar。因此，如果您的 EJB 有一些依赖项并且在其中进行了一些更改，则 glassfish 将看不到它们，并且即使在 EJB（重新）部署之后仍将继续使用旧 jar。它被 oracle 标记为错误，所以我认为它会很快（或不会）解决，但在 oracle 完成他的工作之前，这是一个解决方案。

注意：此错误仅在您的 EJB 具有 netbeans 插件依赖项时发生。如果不是您的情况，您只需将 EJB 添加到企业应用程序中并部署它，您的 jar 将自动重新加载。

假设你是我的情况。如果您编译包含依赖于 netbeans 插件的 EJB 的 EE 应用程序。您可能会收到此错误：

```
Target "dist-ear" does not exist in the project "the path your netbeans plugin" 
```

为了解决这个问题，我将目标添加到插件的*build-impl.xml*文件中。

```
<target name="dist-ear" /> 
```

然后添加 netbeans 插件作为企业应用程序的依赖项。

重新部署应用程序后，您的 EJB 的依赖项可能已加载，您无需重新启动 glassfish 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:58:09.267

我在 Windows 平台上使用 Glassfish 3.1.2 时遇到了同样的问题。当从我的 IDE 中删除或重新部署应用程序时，这些文件会打开，并且（显然）Windows 不会让部署操作删除它们。

我的解决方案是在每次发布时使用“Real Jar Archives for Deployment”将部署更改为“完全部署”，而不是更动态和更快的“目录部署”。

我不知道如何/如何对 Netbeans 进行此更改，因为我不再使用 Netbeans。

对于 Eclipse：在视图/选项卡上双击您的服务器`Servers`以打开服务器的`Overview`设置。页面最底部的设置是`User (sic) Real Jar Archives for Deployment ...`. 检查它（默认不检查），然后重试。

# jsf - JSF2 f:ajax 在面板上呈现 ui:repeat 双倍数据一次

> ID：11742867
> 
> 赞同：0
> 
> 时间：2012-07-31T14:51:42.343
> 
> 标签：jsf, jsf-2, el, mojarra

我在 ah:panelgroup 内有一个 ui:repeat，在面板外有一个 af:ajax。f:ajax 点击事件触发 h:panelgroup 上的渲染。当我加载页面时，转发器会在列表中显示我的 5 个项目。当我第一次单击该按钮时， h:panelgroup 加倍为 10 个项目，随后的每次单击都会刷新面板上的前 5 个项目（应该如此）。我究竟做错了什么？渲染事件不应该总是刷新带有中继器的面板吗？

豆：

```
 @ManagedBean(name = "TestBean")
    @RequestScoped
    public class TestBean {
    private List testStrings;
    public TestBean() {
    Random rn = new Random(System.currentTimeMillis());
    testStrings = Arrays.asList(rn.nextInt(),rn.nextInt(),rn.nextInt(),rn.nextInt(),rn.nextInt());
        }
    }
    public List getTestStrings() {
        return testStrings;
    }

    public void setTestStrings(List testStrings) {
        this.testStrings = testStrings;
    } 
```

JSF：

```
 <h:commandButton value="Refresh">
            <f:ajax event="click" render="testPanel"></f:ajax>
    </h:commandButton>
    <p>
    <h:panelGroup id="testPanel">
            <ui:repeat var="option" value="#{TestBean.testStrings}" varStatus="status">
                    <p>
                            <h:outputText value="#{option}"></h:outputText>
                    </p>
            </ui:repeat>
    </h:panelGroup>
    </p> 
```

我认为我正在使用 mojarra 2.1。

谢谢。

**回答**

`<p>...</p>`如果我删除并重新替换它，问题就不会发生`<h:outputText value="#{option}"></h:outputText><br/>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:36:54.913

`<p>...</p>`如果我删除并重新替换它，问题就不会发生`<h:outputText value="#{option}"></h:outputText><br/>`

# extjs4.1 - 使用 Ext.data.Model 时 url 未定义

> ID：11742872
> 
> 赞同：0
> 
> 时间：2012-07-31T14:51:57.923
> 
> 标签：extjs4.1

我在一个小项目中工作，我想使用 ext.data.model，问题是当我想加载一些数据时遇到了一些问题。

这是模型声明。

```
Ext.define('Model.Item',{
    extend: 'Ext.data.Model',
    fields: ['id', 'code', 'description'],

    proxy: {
        type: 'ajax',
        api: {
            read: 'Handlers/Item.ashx',
            create: 'Handlers/Item.ashx?action=create',
            destroy: 'Handlers/Item.ashx?action=delete',
            update: 'Handlers/Item.ashx?action=update'
        },
        reader: {
            type: 'json',
            root: 'items'
        },
        writer: {
            type: 'json',
            writeAllFields: true,
            root: 'data',
            allowSingle: false
        }
    }
}); 
```

我将它与这样的 jsonstore 一起使用。

```
new Ext.data.JsonStore({
                    storeId: 'mainStore',
                    autoLoad: true,
                    model: 'Model.Item'
                }) 
```

在我没有使用模型之前，用网格将它绑定，并且工作得很好。不，我不能让它工作。

我得到 url 是 ext-all.js 中未定义的异常

```
 urlAppend : function(url, string) {
        if (!Ext.isEmpty(string)) {
            return url + (url.indexOf('?') === -1 ? '?' : '&') + string;
        }

        return url;
    }, 
```

此函数是从 buildUrl 函数中的 Ext.data.proxy.Server 调用的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T14:36:28.933

通过使用`JsonStore`，您将覆盖模型的代理定义 -`JsonStore`添加自己的代理配置：

```
Ext.define('Ext.data.JsonStore',  {
    extend: 'Ext.data.Store',
    alias: 'store.json',

    …

    constructor: function(config) {
        config = Ext.apply({
            proxy: {
                type  : 'ajax',
                reader: 'json',
                writer: 'json'
            }
        }, config);
        this.callParent([config]);
    }
}); 
```

如果商店存在这种情况，它将不会在模型中寻找。

要解决此问题，请替换`Ext.data.JsonStore`为`Ext.data.Store`.

# r - 使用 Spatstat 生成六边形晶格

> ID：11742879
> 
> 赞同：3
> 
> 时间：2012-07-31T14:52:13.233
> 
> 标签：r, while-loop, ppp, hexagonal-tiles, spatstat

我正在分析某些粒子的生长模式，并希望将点模式与具有相同强度（每单位面积的点数相同）的完美六边形晶格的点模式进行比较。我编写了一个函数来执行此操作，但它有一个固有的错误，我不确定它的来源。本质上，在函数运行之后，它会产生一个完美的六边形点图案，它没有正确数量的粒子——它通常偏离大约 1-4%。如果您将以下代码复制并粘贴到 R 中，您会看到这一点 - 对于这个特定示例，错误为 11.25% - 原始点图案有 71 个粒子，而生成的完美六边形点图案有 80 个粒子。这看起来很奇怪，因为代码，正如您将看到的，

以下是我编写的用于生成六角点阵的函数的代码。

```
library(spatstat)

data(swedishpines)

swedishpines.df <- as.data.frame(swedishpines)

MaxXValue <- max(swedishpines.df[1])
MaxYValue <- max(swedishpines.df[2])
#The above two lines dictate the window size
NumberOfParticles <- nrow(swedishpines.df[1])
#Number of entries = number of particles

#calculate delta
intensity <- NumberOfParticles / (MaxXValue*MaxYValue)
#Intensity ---> particles / unit^2
    #Area = ( sqrt(3) / 2 ) * delta^2
    #Now - in substituting intensity in for area, it is key to recognize 
    #that there are 3 particles associated with each hexagonal tile.
    #This is because each particle on the border of the tile is really 1/3 of a 
    #a particle due to it being associated with 3 different hexagonal tiles.  
    #Since intensity = 3 Particles / Area, 
delta <- sqrt(2/(intensity*(sqrt(3))))
#This is derived from the equation for the area of a regular hexagon. 
```

![六边形晶格的晶胞图](../Images/174043707ef96d7d38ca59a2ed07075c.png)

```
#xcoords and ycoords represent the x and y coordintes of all of the generated points.  The 'x' and 'y' are temporary holders for the x and y coordinates of a single horizontal line of points (they are appended to xcoords and ycoords at the end of each while loop).  

xcoords <- c()
ycoords <- c()

#The following large while loop calculates the coordinates of the first set of points that are vertically aligned with one another. (alternating horizontal lines of particles)  This is shown in the image below. 
```

![第一组点](../Images/901e2b8da89764fd0a73ead677cbc312.png)

```
y_shift <- 0
while (y_shift < MaxYValue) {

    x <- c(0)
    x_shift <- 0 + delta
    count <- 0

    while (x_shift < MaxXValue) {
        x <- append(x, x_shift)
        x_shift <- x_shift + delta
        count <- count + 1
    }

    y <- c(y_shift)

    for (i in seq(0,(count-1))) {
        y <- append(y, y_shift)
    }

    y_shift <- y_shift + sqrt(3)*delta
    xcoords <- append(xcoords,x)
    ycoords <- append(ycoords,y)

}

#The following large while loop calculates the coordinates of the second set of points that are vertically aligned with one another. This is shown in the image below. 
```

![第二组点](../Images/db9c892fa5f5f9d98fe048c2de67375d.png)

```
y_shift <- 0 + (delta*(sqrt(3)))/2
while (y_shift < MaxYValue) {

    x <- c(0 + (1/2)*delta)
    x_shift <- 0 + (1/2)*delta + delta
    count <- 0

    while (x_shift < MaxXValue) {
        x <- append(x, x_shift)
        x_shift <- x_shift + delta
        count <- count + 1
    }

    y <- c(y_shift)

    for (i in seq(0,(count-1))) {
        y <- append(y, y_shift)
    }

    y_shift <- y_shift + sqrt(3)*delta
    xcoords <- append(xcoords,x)
    ycoords <- append(ycoords,y)

}

hexplot <- ppp(xcoords, ycoords, window=owin(c(0,MaxXValue),c(0,MaxYValue))) 
```

![两组合二为一](../Images/4b741f1bf3403f439275ade94becc5bf.png)

现在，我对 R 比较陌生，所以很可能是代码中某处的语法错误导致了这个错误。或者，可能是我在这个过程中的思路有问题。但是，我认为这不太可能，因为我的结果与我一直在尝试的结果非常接近（大多数时候只有 1-4% 的错误是相当好的）。

总之，我想要帮助的是如何获取一个点图案并创建另一个具有相同窗口大小和相同数量粒子的点图案，但完美的六边形点图案。

如果您觉得有什么不清楚的地方，请不要犹豫，请我解释一下。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T22:21:56.763

如果我错了，请原谅我，但鉴于您在示例中显示的限制，我相信您尝试做的事情是不可能的（在一般情况下）。简而言之，你能想出一种方法，在与你的窗口高度和宽度相同的页面上以六边形图案绘制 71 个点吗？我认为不存在这样的模式。

为了进一步解释，请考虑代码中的最后一行：

```
hexplot <- ppp(xcoords, ycoords, window=owin(c(0,MaxXValue),c(0,MaxYValue))) 
```

现在，由于您的窗口与原始数据大小相同，要获得相同的强度，您需要完全相同数量的点 (71)。在您的六边形点排列中，您有 x 行，每行包含 y 个点。但是没有整数 x 和 y 可以乘以 71。

话虽如此，如果您稍微“拉伸”窗口宽度，那么一半的行将包含一个点。这是一个稍微宽松的约束，但不能保证在一般情况下会有解决方案。

因此，要获得完全相同的点强度，您需要能够更改相对窗口大小。您需要将其拉伸以添加一些空白并获得较低的点强度。在一般情况下，这可能仍然行不通......但它可能，我还没有解决。从一个简单的网格开始可能是最简单的，然后将您的代码扩展为六边形。

* * *

查看您的代码，我注意到您正在使用`while`循环，而您本来可以使用该`seq`函数。例如，如果您想生成`x`从 0 到`MaxXValue`增加 的所有点`sqrt(3)*delta`，只需执行以下操作：

```
x<-seq(0,MaxXValue,by=delta) 
```

而不是那么大`while`。这里可能存在一些错误，但我认为您可以将整个代码简化为：

```
library(spatstat)
data(swedishpines)
swedishpines.df <- as.data.frame(swedishpines)
MaxXValue <- max(swedishpines.df[1])
MaxYValue <- max(swedishpines.df[2])
NumberOfParticles <- nrow(swedishpines.df)
intensity <- NumberOfParticles / (MaxXValue*MaxYValue)
delta <- sqrt(2/(intensity*(sqrt(3))))
x<-seq(0,MaxXValue,by=delta)
y<-seq(0,MaxYValue,by=sqrt(3)*delta)
first.coords=merge(x,y) # Find every combo of x and y
x=seq(delta/2,MaxXValue,by=delta)
y=delta*sqrt(3)/2 + (delta*sqrt(3)*seq(0,length(x)/2))
second.coords=merge(x,y)
coords=rbind(first.coords,second.coords)
ppp(coords$x, coords$y, window=owin(c(0,MaxXValue),c(0,MaxYValue))) 
```

最后，我注意到您在评论中提到六边形的面积是`( sqrt(3) / 2 ) * delta^2`，但不是`(3*sqrt(3)/2) * delta^2`吗？`

* * *

我对 Josh O'Brien 的评论很感兴趣，并决定实现一个旋转函数来获得所需的确切点数。这是代码：

```
# Include all above code
rotate=function(deg) {
    r=matrix(c(cos(deg),-sin(deg),sin(deg),cos(deg)),byrow=T,nrow=2)
    rotated.coords=data.frame(t(r %*% t(as.matrix(coords))))
    names(rotated.coords)=c('x','y')
    rotated.coords
}

rotate.optim=function(deg) {
    rotated.coords=rotate(deg)
    abs(NumberOfParticles-length(suppressWarnings(ppp(rotated.coords$x, rotated.coords$y, window=owin(c(0,MaxXValue),c(0,MaxYValue)))$x)))
}

o=optim(0,rotate.optim,lower=0,upper=2*pi,method='Brent')
rotated.coords=rotate(o$par)
rotated.coords.window=rotated.coords[rotated.coords$x >= 0 & rotated.coords$y >= 0 & rotated.coords$x <= MaxXValue & rotated.coords$y <= MaxYValue,]
final=ppp(rotated.coords.window$x,rotated.coords.window$y,window=owin(c(0,MaxXValue),c(0,MaxYValue)))
plot(final) 
```

![旋转十六进制图](../Images/c8b2aa7227bf54dc92ad1ec7cf6dd00e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T22:37:20.720

为了完整起见，我要补充一点，spatstat 现在具有`hexgrid`生成六边形网格的功能，`rotate.ppp`之后可以应用该功能来旋转图案。

# ruby - 合并两个 Ruby 模块但不包含

> ID：11742890
> 
> 赞同：4
> 
> 时间：2012-07-31T14:52:46.053
> 
> 标签：ruby, module, mixins, method-resolution-order

我想在不破坏查找链的情况下合并两个 Ruby 模块。基本上我希望的行为`BothAnB`就像我连接来自 A 和 B 的文本源代码并且新的 foo 替换旧的一样。当 MRO 线性化继承菱形时会出现问题。

```
module O
  def foo; puts "O" end
end

module A
  include O
  def foo; puts "A"; super end
  def aaa; puts "aaa" end
end

module B
  include O
  def foo; puts "B"; super end
  def bbb; puts "bbb" end
end

module BothAnB
  #insert magic here such that a class C that includes BothAnB:
  # C.new.foo => B O
  # C.new.aaa => aaa
  # C.new.bbb => bbb
end

module JustA
  #insert magic here such that a class C that includes JustA:
  # C.new.foo => A O
  # C.new.aaa => aaa
  # C.new.bbb => FAIL
end
#and similarly JustB 
```

A 和 B 是相当复杂的模块，可以具有深度继承链（这是针对允许程序员这样做的元编程框架）。

`Include B, A`不起作用，因为不是查找 BothAnB->B->A->O，而是我需要它是 BothAnB->B->O（和可选的 ->A）。我已经接近了：

*   深度克隆 A 的整个继承树（去除菱形）
*   `undef_method`在 A 的克隆上删除在 B 中找到的方法
*   制作一种新方法`Module`来反映这种行为

还有比这更好的解决方案吗？理想情况下，我希望在调用`BothAnB.ancestors`.

[注意：在根据 Phrogz 的反馈得到两个答案后，我完全改变了问题，所以如果它们看起来无关紧要，那就是]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:05:05.300

这会为你解决吗？

```
module M1
  def foo; 42; end
  def bar; 17; end
end

class Base
  def foo; 0; end
end

require 'remix' # gem install remix 
class X < Base
  include_after Base, M1
end

p X.new.foo, #=> 0
  X.new.bar  #=> 17 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T11:41:10.360

这是另一个可能的技巧：

```
module BothAnB
  include A
  include O.clone
  include B
end

class C
  include BothAnB
end

C.new.foo
C.new.aaa
C.new.bbb

# output:
B
O
aaa
bbb 
```

在这里，我们使用`super`指向`B#foo`而`O#foo`不是`A#foo`。

如果`O`很复杂并且包含其他东西，它可能需要更多这样的魔法：

```
module O
  # don't do this:
  # include Whatever

  # do this instead:
  def self.included(base)
    base.send(:include, Whatever.clone)
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:06:00.327

```
M1parent.send(:remove_method, :foo) 
```

您必须将其从那里远程，`M1parent`因为这是定义它的地方，`M1.send(:remove_method, :foo)`例如，因为方法 foo 是在 M1parent 上定义的，所以它不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T10:31:19.407

我的建议如下：登录[http://bugs.ruby-lang.org/](http://bugs.ruby-lang.org/)并提交功能请求，或者，如果您更有信心，可以提交错误请求。因为这基本上是Ruby的问题。当前的 Ruby 行为在没有先前经验的情况下是出乎意料的，因此应该更改为预期的行为：这样您就可以通过简单地调用来获得所需的内容

```
module BothAnB
  include A
  include B
end 
```

正如您自己指出的那样，解决方法肯定是可能的。但是这个恕我直言的Ruby行为是不正确的。

所以在那之前，你必须避免打电话给 super ，我建议你改用

```
O.instance_method( :foo ) 
```

并从 B 和 A 模块而不是便利关键字 super 调用它：

```
module A
  include O
  def foo
    puts "A"
    O.instance_method( :foo ).bind( self ).call
  end
end

# do same for B and it'll work 
```

# javascript - 使用参数重新加载父页面

> ID：11742892
> 
> 赞同：2
> 
> 时间：2012-07-31T14:52:48.507
> 
> 标签：javascript, jquery

我有以下 javascript 代码在页面关闭时运行。

```
$(window).unload(function () {
        window.opener.location.reload();        
}); 
```

有没有办法将参数传递给调用此关闭页面的页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T14:57:09.293

如果你想关闭弹出窗口并重新加载父页面，你应该使用它。

```
window.opener.location.href='/pageurl.html?id=1'
window.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T14:56:25.833

javascript 变量 window.parent 应该允许您访问弹出窗口父级的任何参数。

```
window.parent.reload(); 
```

从弹出窗口内部应该可以工作。

至于参数

```
window.parent.variableName = 'Hello World!'; 
```

将在您的父级中创建一个变量名 variableName。

所以在父母内部，你将能够做到

```
alert(variableName); 
```

并发出内容为“Hello World！”的警报；

# android - Android：仅通过 WIFI 发送数据

> ID：11742894
> 
> 赞同：0
> 
> 时间：2012-07-31T14:52:55.323
> 
> 标签：android, service, wifi

我有一个在后台运行并将数据发送到服务器的服务，我只想通过 wifi 发送这些数据，而不是其他方式（gprs 或其他）这可能吗？如果是，我怎样才能做到这一点？如果您有示例代码或链接，那就太好了。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T14:57:18.093

```
final ConnectivityManager connMgr = (ConnectivityManager)
 this.getSystemService(Context.CONNECTIVITY_SERVICE);

final android.net.NetworkInfo wifi =
 connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI); 
```

NetworkInfo 结构应具有 Wifi 子系统的连接状态。查看文档：

[http://developer.android.com/reference/android/net/NetworkInfo.html](http://developer.android.com/reference/android/net/NetworkInfo.html)

使用`isConnected`方法查看wifi是否连接。十分简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:01:57.337

试试看这个：http: [//developer.android.com/training/efficient-downloads/connectivity_patterns.html#WiFi](http://developer.android.com/training/efficient-downloads/connectivity_patterns.html#WiFi) 我想你会在那里找到你的答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:00:10.617

[在 Android 上检测网络连接类型](https://stackoverflow.com/questions/2802472/detect-network-connection-type-on-android)

这篇文章可能是您正在寻找的内容，您可以在发送任何数据之前检查您的应用是否已连接到 wifi。希望这可以帮助

# c# - 处理来自标准输出的 jpgs 流

> ID：11742896
> 
> 赞同：1
> 
> 时间：2012-07-31T14:53:03.937
> 
> 标签：c#, .net, ffmpeg, stdout

使用 FFmpeg，我将视频 (mpeg2) 转换为 jpg，将输出重定向到标准输出。

```
StringBuilder str = new StringBuilder();

    //Input file path
    str.Append(string.Format(" -i {0}", myinputFile));

    //Set the frame rate
    str.Append(string.Format(" -r {0}", myframeRate);

    //Indicate the output format
    str.Append(" -f image2pipe");

    //Connect the output to the standard output
    str.Append(" pipe:1");
    return str.ToString(); 
```

我能够从带有数据的过程中接收回调：

`_ffmpegProc.OutputDataReceived += new DataReceivedEventHandler(_ffmpegProc_OutputDataReceived);`

但是如何将其保存回 jpg 文件？，我需要知道每个 jpg 的大小，但我不知道如何。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:54:48.647

你不能不阅读并至少部分理解流结构，因为 JPEG 文件不包含例如文件开头某处的显式长度指示。

我看到了两种不涉及转码的可能性：

1.  将中间文件存储在磁盘上，但我想这正是您想要避免的。
2.  尝试最低限度地解析文件 - JPEG 文件以`SOI`标记（十六进制 FF D8）开头并以标记（十六`EOI`进制 FF D9）结尾。使用相对简单的状态机，您可以尝试以这种方式将 JPG 流拆分为单独的帧。现在，为了稳健起见，单独读取段可能更好（有关更多信息，请参阅[JPEG 文件格式](http://class.ee.iastate.edu/ee528/Reading%20material/JPEG_File_Format.pdf)）。您还可以研究[ffmpeg mjpeg 解码器](http://ffmpeg.org/doxygen/trunk/mjpeg__parser_8c-source.html)的源代码实现，它看起来相当健壮。

# c++ - Embarcadero C++ builder Excel Automation C++ 不退出

> ID：11742897
> 
> 赞同：0
> 
> 时间：2012-07-31T14:53:06.760
> 
> 标签：c++, excel, automation, c++builder

我正在尝试自动化 Excel，以便它在服务器上生成报告，然后在请求时通过电子邮件将其发送给用户。我遇到的问题是，一旦我创建了一个 excel 文档并将数据写入其中，即使发出 pXL->Quit(); 程序也不会退出；命令。这就是我“关闭”excel的说明：

```
pXL->Workbooks->Close(LCID(LOCALE_USER_DEFAULT));
pXLWSs.Reset(); //Releases Worksheets
pXLWS.Reset();//Releases Workbooks
pXL->Quit();// "Quits" Excel  ---> This does not quit excel
pXL.Reset();//Release Excel application?
CoUninitialize();//Uninitialise COMS 
```

我已经阅读了很多关于这个特定问题的文章和博客，这似乎是因为我没有释放与 Excel 相关的所有 COMS。所以我尝试了几次取消初始化 COMS。我发出了

```
CoUninitialize(); 
```

4次，这有效！但令我失望的是，它并不总是有效。

有谁知道如何优雅地关闭Excel？

我知道微软不支持服务器端 Excel 自动化，但我希望能找到解决办法。我也知道你可以简单地

```
WinExec("taskkill /F /IM \"excel.exe\"",0); 
```

这完全杀死了 Excel，但我担心该应用程序的未来会生成相当多的 Excel 应用程序，在这种情况下，我将不得不单独杀死 Excel，这一切都会从那里变得一团糟......

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:44:30.970

解决了！

所以我终于想出了一种方法来杀死后台运行的 Excel。

当我创建 Excel 时，我使用以下方法存储它的 PID（进程标识符）：

```
GetWindowThreadProcessId((HWND)pXL->Hwnd, &ExcelprocessID); 
```

然后在写入数据后终止应用程序：

```
pXL->Workbooks->Close(LCID(LOCALE_USER_DEFAULT));
pXLWSs.Reset();
// Better to use "Reset", which will clear all references to this pointer
// rather than "Release", which will only clear the last reference
pXLWS.Reset();
pXL->Quit();
pXL.Reset();
CoUninitialize();

if ( ExcelprocessID == 0 )
{
    ShowMessage("Could not find Excel ProcessID to close");
}

else
{
    HANDLE tmpHandle = OpenProcess(PROCESS_ALL_ACCESS, TRUE, ExcelprocessID);
    if (NULL != tmpHandle)
    {
        TerminateProcess(tmpHandle, 0);
    }
} 
```

希望这可以帮助其他一直在寻找解决方案的人....

# objective-c - SceneKit 中的自定义动画属性

> ID：11742902
> 
> 赞同：11
> 
> 时间：2012-07-31T14:53:31.187
> 
> 标签：objective-c, macos, core-animation, osx-mountain-lion, scenekit

我知道可以[在 Core Animation 中创建自定义动画属性](https://stackoverflow.com/questions/2395382/animating-a-custom-property-of-calayer-subclass)，但是在 OS X 10.8 的 SceneKit 框架中呢？ `SCNAnimatable`似乎没有公开`CALayer`用于使属性可动画化的相同 API。

在我的应用程序中，我有一个`SCNNode`名为 的子类`Starfield`，我使用`SCNNodeRendererDelegate`. Starfields 公开了一个`GLfloat`名为`warpFactor`:

```
@interface Starfield : SCNNode<SCNNodeRendererDelegate> {
    // other stuff that's not really important for this question
    GLfloat warpFactor;
}

@property(nonatomic) GLfloat warpFactor;
@end 
```

但是当我尝试向它添加动画时，如下所示：

```
CABasicAnimation *warp = [CABasicAnimation animationWithKeyPath:@"warpFactor"];
warp.toValue = @1.0;
warp.duration = 5.0;
[starfield addAnimation:warp forKey:@"warp"]; 
```

我在控制台中得到以下信息：

```
[SCNKit ERROR] warpFactor is not an animatable path (from <unnamed SCNNode 0x1016473c0, no children>) 
```

我知道 SceneKit 是全新的，但有没有人碰巧知道如何使它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-04T09:34:51.180

解决方法/黑客：

*   创建一个无几何节点并为该节点上的一些可动画属性设置动画，例如不透明度
*   使用[SCNSceneRendererDelegate](https://developer.apple.com/library/prerelease/ios/documentation/SceneKit/Reference/SCNSceneRendererDelegate_Protocol/index.html)挂钩到渲染过程的适当阶段，并使用无几何节点的动画属性的值手动更新您的自定义属性（确保从节点的 中读取动画属性`presentationNode`）

这个解决方案很丑，但它允许您通过[SCNTransaction](https://developer.apple.com/library/mac/documentation/SceneKit/Reference/SCNTransaction_Class/Introduction/SCNTransaction.html)或[CAAnimationGroup将自定义属性的动画与其他动画同步](https://developer.apple.com/library/ios/documentation/graphicsimaging/Reference/CAAnimationGroup_class/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T15:45:00.453

SceneKit 不支持自定义动画键路径

# php - PHP MVC，视图循环处理

> ID：11742905
> 
> 赞同：0
> 
> 时间：2012-07-31T14:53:37.607
> 
> 标签：php, templates

我的控制器返回一个多行多列的 PDO 数组。循环浏览我的视图文件中的数据的最佳方法是什么？（或者我应该在模型中做更多的逻辑？）

```
$user->getDetails();  //returns array in view

foreach($user->getDetails() as $row)  // Prehaps? But how to index without being explicit with column names? 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:55:59.940

视图的重点是运行与视图相关的逻辑和输出结果（即获取数据并根据需要对其进行格式化……如果是 JSON 视图，则输出 JSON。HTML 输出 HTML 等），因此您正在做对的。无论您认为合适，都可以循环遍历它，但是如果没有有关您的数据结构的更多详细信息，我们不能说比您已经想出的更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:58:23.553

```
 foreach( $user->getDetails() as $row ){
       echo $row->name;
       echo $row->id;
    } 
```

您不需要将 $user->getDetails() 放在顶部，它会调用 foreach 中的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:26:01.230

~~最好的方法或正在使用的方法`MVC`是将您的编程逻辑保留在控制器中~~，在模型中做数据库相关的东西并在视图中格式化布局。在您的情况下，您应该`$user->getDetails();`在控制器中调用，然后在视图中传递结果，然后循环它以输出数据，即

在控制器中，您可以使用`$user->getDetails()`

```
$user_details=$user->getDetails(); 
```

然后`$user_details`在加载它并在视图循环中传递给视图

```
foreach( $user_details as $row ){
   echo $row->id;
   echo $row->name;
} 
```

如果结果是一个`array of arrays`而不是`an array of objects`那么你可以使用如下

```
foreach( $user_details as $row ){
   echo $row['d'];
   echo $row['name'];
} 
```

**更新 ：**

1.  模型负责管理数据；它存储和检索应用程序使用的实体，通常来自数据库，并包含应用程序实现的逻辑。
2.  视图（表示）负责以特定格式显示模型提供的数据。它与一些流行的 Web 应用程序中的模板模块有类似的用法，例如 wordpress、joomla ......</li>
3.  控制器处理模型层和视图层以协同工作。控制器接收来自客户端的请求，调用模型执行请求的操作并将数据发送到视图。视图格式化要呈现给用户的数据，在 Web 应用程序中作为 html 输出。

**参考：** PHP和[This](http://www.tonymarston.net/php-mysql/model-view-controller.html#controller)[中的模型视图控制器（MVC）](http://php-html.net/tutorials/model-view-controller-in-php/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T16:50:06.083

模型层应该包含所有的业务逻辑。它不应该向控制器返回任何东西。相反，控制器应该只向模型层结构发送消息。

The data from model layer should be extracted by view instance. And depending on nature of data, it would decide which templates to apply.

Views in MVC are supposed to contain all the presentation logic and ( in case of web-related MVC-inspired design patterns) deal with multiple templates. You should also be aware that there exists a 1:1 relation between views and controllers.

If if part of information, that view receives from model layer, is some sort of array, you have two choices. Either you take a template, which can render a single item and repeatedly generate the HTML/JSON/text/XML fragment or you use a template , which expect to receive an array as variable and already contains a loop. The latter approach is usually the more pragmatic one, but each of them as a specific cons an pros.

# html - 为什么 HTML5 建议将 code 元素放在 pre 中？

> ID：11742907
> 
> 赞同：67
> 
> 时间：2012-07-31T14:53:49.417
> 
> 标签：html, css, code-formatting

[HTML5 文档建议](http://www.w3.org/TR/2011/WD-html5-author-20110809/the-code-element.html)将`code`元素放在元素内`pre`，但我不明白这比仅使用代码元素和 CSS 更好或更语义化。在他们自己的例子中：

```
<pre><code class="language-pascal">var i: Integer;
begin
   i := 1;
end.</code></pre> 
```

也可以写成（对浏览器的默认值做一些假设`pre`）：

```
<style>
code {
    display: block;
    white-space: pre;
}
</style>
…
<code class="language-pascal">var i: Integer;
begin
   i := 1;
end.</code> 
```

即使`pre`用于将代码*块*与内联代码字符串区分开来，我也不认为它比指定类中的块性更具语义*选择*`code`。

是否有特定原因`pre`推荐使用 CSS 解决方案？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-31T15:08:29.080

`<code>`仅代表*“计算机代码片段”*。它最初被认为用于简单的代码片段，例如`i++`or `<code>`。

`<pre>` *“表示一个预先格式化的文本块，其中结构由排版约定而不是元素表示”*。它的最初目的只不过是这样：以作者给出的相同方式提供文本，例如

```
+---------------------------------+
| |
| 警告！预先准备好的文本！| =o=
| __; ~^
+----------------TT------------°
                 || _____________ _____________________
                 || | 致奶奶 > | 完全不是陷阱 >
  哦哦|| |°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°°          
   | ö || | | 。毫米，                    
~"""~"""~"""~""""~"""~"""~~""""~"""~"""~"""~"""~"""~ """~"""~"""~""..MWMWc...~"""~""
```

你不需要互相使用。`<pre>`有自己的角色，就像`<code>`有自己的角色一样。然而，`<pre>`这是一种表示给定片段中的空白很重要的方式，这`<code>`是一种缺失的角色。

但是，回到您的问题：请注意*确切的*措辞：

> 下面的示例显示了如何**使用**and 元素标记`pre`代码`code`块。
> 
> ```
> <pre><code class="language-pascal">var i: Integer;
> begin
>    i := 1;
> end.</code></pre> 
> ```
> 
> 该示例中使用了一个类来指示所使用的语言。

它说*可以*，不*应该*。您可以按照自己的意愿自由地执行此操作。W3C 不建议以任何方式使用它，但是，我个人建议您使用`<pre><code>...`.

### 进一步说明

每当空格是代码和代码结构的一部分时，您应该声明应该保留此结构。由于代码中的结构是由排版约定（制表符、换行符、空格）给出的，我*个人*建议您使用`<pre><code>`，即使它可以说是更多代码和 DOM 中的另一个节点。但是，每当缺少空格会使您的代码不完美时，这是必要的。

除此之外，您可以在不检查的情况下轻松区分内联代码和代码块`element.className`，并且一些 JS 语法荧光笔可以很好地使用`<pre><code>...`并自动剥离`<code>`。

Also, if you use a general rule for `<code>` with `white-space:pre;`, you cannot use it for inline snippets without additional classes. If you were to create a class instead, you've won nothing compared to `<pre><code>`.

### References

*   W3C: [HTML5: 4.5.12 The code element](https://www.w3.org/TR/2014/REC-html5-20141028/text-level-semantics.html#the-code-element) (W3C Recommendation 28 October 2014)

    > The `code` element [represents](https://www.w3.org/TR/2014/REC-html5-20141028/dom.html#represents) a fragment of computer code. This could be an XML element name, a file name, a computer program, or any other string that a computer would recognize.

*   W3C: [HTML5: 4.4.3 The pre element](https://www.w3.org/TR/2014/REC-html5-20141028/grouping-content.html#the-pre-element) (W3C Recommendation 28 October 2014)

    > The `pre` element [represents](https://www.w3.org/TR/2014/REC-html5-20141028/dom.html#represents) a block of preformatted text, in which structure is represented by typographic conventions rather than by elements.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-31T14:58:00.730

CSS 用于演示。

在许多编程语言中，空白很重要（不是表示性的）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-31T15:03:53.067

为了表示一个计算机代码块，pre 元素可以与 code 元素一起使用；

为了表示计算机输出块，pre 元素可以与 samp 元素一起使用。

`<pre><code>`对于不能换行的块代码。用于`<code>`可以换行的内联代码。

当在浏览器上显示时，标签中包含的文本中的换行符和空格将`<pre>`保持与 html 文档中的状态相同。浏览器通常`<pre>`以固定间距的字体呈现文本，使用`whitespace`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:06:19.873

`<pre>`显示换行符！

这可以防止您使用诸如 nl2br() 之类的 php 函数或`<br />`在每一行末尾手动添加。

问候， 幽灵

# xml - 使用 XSLT 在 3 列中输出分组列表

> ID：11742910
> 
> 赞同：2
> 
> 时间：2012-07-31T14:53:57.283
> 
> 标签：xml, xslt, xslt-1.0, xslt-grouping

我想在 3 列中输出分组结果。我没有使用表格，所以我想我的意思是并排显示 3 个结果部分（参见 HTML）。

我根据其中一个节点的值对结果进行了分组，并在一个标题下分组，该标题是节点的值。例如：

```
<All_Results>
  <Result>
   <Dept>Finance</Dept>
   <Name>Bob</Name>
  </Result>
  <Result>
   <Dept>Finance</Dept>
   <Name>Susan</Name>
  </Result>
  <Result>
   <Dept>Sales</Dept>
   <Name>Igor</Name>
  </Result>
</All_Results> 
```

格式如下：

```
 <li>
    <h4>Finance</h4>
    <ul>
      <li>Bob</li>
    </ul>
    <ul>
      <li>Susan</li>
    </ul>

    <h4>Sales</h4>
    <ul>
      <li>Igor</li>
    </ul>
 </li> 
```

这很有效，我很满意。现在我要做的是并排创建 3 列 Depts 及其结果（即本例中的 Names）。我期待 9 个可能的部门，但这可能会在未来发生变化。

到目前为止，这是我的 XSLT（到目前为止，它所做的只是上面的格式，还没有在列上工作，我不知道如何解决这个问题）：

```
<xsl:output method="html" />
<xsl:key name="results-by-dept" match="Result" use="Dept" />
<xsl:template match="All_Results">
  <xsl:variable name="Rows" select="Result" />
  <xsl:variable name="RowCount" select="count($Rows)" />
  <ul class="deptList">
    <xsl:for-each select="Result[count(. | key('results-by-dept', Dept)[1]) = 1]">
      <xsl:sort select="Dept"  order ="ascending"/>
      <li>
        <h4>
          <xsl:value-of select="Dept" />
        </h4>
        <ul>
          <xsl:for-each select="key('results-by-dept', Dept)">
            <xsl:sort select="Name" />
            <li>
                <xsl:value-of select="Name"/>
            </li>
          </xsl:for-each>
        </ul>
      </li>
    </xsl:for-each>
  </ul>
</xsl:template>
</xsl:stylesheet> 
```

任何帮助将非常感激！

* * *

## 肖恩的编辑

在与 OP 讨论之后，我认为这个用例说明了他想要什么。以下示例输入文档显示了 5 个部门，有 1 名或 2 名员工。节点的顺序并不重要。

### 用例 1：输入文档

```
<All_Results>
    <Result>
        <Dept>Finance</Dept>
        <Name>Bob</Name>
    </Result>
    <Result>
        <Dept>Engineering</Dept>
        <Name>Inna</Name>
    </Result>
    <Result>
        <Dept>Finance</Dept>
        <Name>Susan</Name>
    </Result>
    <Result>
        <Dept>Sales</Dept>
        <Name>Igor</Name>
    </Result>
    <Result>
        <Dept>Human resources</Dept>
        <Name>Jane</Name>
    </Result>
    <Result>
        <Dept>Admin</Dept>
        <Name>Joe</Name>
    </Result>
    <Result>
        <Dept>Engineering</Dept>
        <Name>Dima</Name>
    </Result>
    <Result>
        <Dept>Human resources</Dept>
        <Name>Beth</Name>
    </Result>
</All_Results> 
```

输出将像这样进行转换（如下列表）。HTML 表格将由 3 列但只有 1 行构成。每个单元格都包含一个以部门名称为首的部门员工的 HTML 无序列表。每列包含大约三分之一的部门，最后一列在这方面参差不齐。从上到下然后从左到右阅读，部门应该按字母顺序排序。在每个部门内，员工应按字母顺序排列。

### 用例 1：输出文档

```
<table>
    <tr>
        <td>
            <ul class="deptList">
                <li>
                    <h4>Admin</h4>
                    <ul>
                        <li>Joe</li>
                    </ul>
                </li>
                <li>
                    <h4>Engineering</h4>
                    <ul>
                        <li>Dima</li>
                        <li>Inna</li>
                    </ul>
                </li>
            </ul>
        </td>
        <td>
            <ul class="deptList">
                <li>
                    <h4>Finance</h4>
                    <ul>
                        <li>Bob</li>
                        <li>Susan</li>
                    </ul>
                </li>
                <li>
                    <h4>Human resources</h4>
                    <ul>
                        <li>Beth</li>
                        <li>Jane</li>
                    </ul>
                </li>
            </ul>
        </td>
        <td>
            <ul class="deptList">
                <li>
                    <h4>Sales</h4>
                    <ul>
                        <li>Igor</li>
                    </ul>
                </li>
            </ul>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:05:17.233

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kDeptByVal" match="Dept" use="."/>
 <xsl:key name="kEmpByDept" match="Name" use="../Dept"/>

 <xsl:variable name="vDeptsUniq" select=
  "/*/*/Dept[generate-id() = generate-id(key('kDeptByVal',.)[1])]"/>

 <xsl:variable name="vDeptsPerCol" select="ceiling(count($vDeptsUniq) div 3)"/>

 <xsl:template match="/*">
  <table border="1">
    <tr>
      <xsl:for-each select="$vDeptsUniq[not(position() > 3)]">
        <xsl:variable name="vCol" select="position()"/>
        <td>
          <ul class="deptList">
           <xsl:for-each select="$vDeptsUniq">
            <xsl:sort/>
            <xsl:if test=
             "position() > ($vCol -1)*$vDeptsPerCol
             and
              not(position() > $vCol*$vDeptsPerCol)
             ">
                <li>
                      <h4><xsl:value-of select="."/></h4>
                    <ul>
                      <xsl:apply-templates select="key('kEmpByDept', .)">
                       <xsl:sort/>
                      </xsl:apply-templates>
                    </ul>
                </li>
            </xsl:if>
           </xsl:for-each>
          </ul>
        </td>
      </xsl:for-each>
    </tr>
  </table>
 </xsl:template>

 <xsl:template match="Name">
  <li><xsl:value-of select="."/></li>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<All_Results>
    <Result>
        <Dept>Finance</Dept>
        <Name>Bob</Name>
    </Result>
    <Result>
        <Dept>Engineering</Dept>
        <Name>Inna</Name>
    </Result>
    <Result>
        <Dept>Finance</Dept>
        <Name>Susan</Name>
    </Result>
    <Result>
        <Dept>Sales</Dept>
        <Name>Igor</Name>
    </Result>
    <Result>
        <Dept>Human resources</Dept>
        <Name>Jane</Name>
    </Result>
    <Result>
        <Dept>Admin</Dept>
        <Name>Joe</Name>
    </Result>
    <Result>
        <Dept>Engineering</Dept>
        <Name>Dima</Name>
    </Result>
    <Result>
        <Dept>Human resources</Dept>
        <Name>Beth</Name>
    </Result>
</All_Results> 
```

**产生想要的正确结果**：

```
<table border="1">
   <tr>
      <td>
         <ul class="deptList">
            <li>
               <h4>Admin</h4>
               <ul>
                  <li>Joe</li>
               </ul>
            </li>
            <li>
               <h4>Engineering</h4>
               <ul>
                  <li>Dima</li>
                  <li>Inna</li>
               </ul>
            </li>
         </ul>
      </td>
      <td>
         <ul class="deptList">
            <li>
               <h4>Finance</h4>
               <ul>
                  <li>Bob</li>
                  <li>Susan</li>
               </ul>
            </li>
            <li>
               <h4>Human resources</h4>
               <ul>
                  <li>Beth</li>
                  <li>Jane</li>
               </ul>
            </li>
         </ul>
      </td>
      <td>
         <ul class="deptList">
            <li>
               <h4>Sales</h4>
               <ul>
                  <li>Igor</li>
               </ul>
            </li>
         </ul>
      </td>
   </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:25:52.267

这是 XSLT 1.0 中的一种方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:key name="depts" match="Dept" use="." />
  <xsl:key name="results-by-dept" match="Result" use="Dept" />

  <xsl:template match="All_Results">
    <xsl:variable name="max-cols" select="3"/>
    <xsl:variable name="depts"
                  select="Result/Dept[count(.|key('depts', .)[1]) = 1]"/>
    <xsl:variable name="col-size"
                  select="ceiling(count($depts) div $max-cols)"/>
    <table>
      <tr>
        <xsl:for-each select="$depts[(position() - 1) mod $col-size = 0]">
          <xsl:variable name="col" select="position() - 1"/>
          <td>
            <ul class="deptList">
              <xsl:for-each select="$depts">
                <xsl:sort select="."/>
                <xsl:if test="floor((position() - 1) div $col-size) = $col">
                  <li>
                    <xsl:apply-templates select="."/>
                  </li>
                </xsl:if>
              </xsl:for-each>
            </ul>
          </td>
        </xsl:for-each>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="Dept">
    <h4>
      <xsl:value-of select="." />
    </h4>
    <ul>
      <xsl:for-each select="key('results-by-dept', .)">
        <xsl:sort select="Name" />
        <li>
          <xsl:value-of select="Name"/>
        </li>
      </xsl:for-each>
    </ul>
  </xsl:template>

</xsl:stylesheet> 
```

一些注意事项：

*   这里的主要技巧是使用`$depts[(position() - 1) mod $col-size = 0]`循环尽可能多的列。
*   循环遍历列的另一种方法是使用递归模板并增加计数器变量。
*   这在 XSLT 2.0 中会容易得多。
*   [Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)中的`count(.|key('depts', .)[1]) = 1`谓词可以等效地写为。我更喜欢后者，因为我认为它不那么晦涩难懂，但我在这里使用了前者，因为它是问题中使用的。`generate-id() = generate-id(key('depts', .)[1])`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T01:08:42.680

这个 XSLT 1.0 样式表将为您提供 3 列...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:key name="kDepartments" match="Result" use="Dept" />

<xsl:template match="/">
 <table>
  <tr>
   <xsl:variable name="dept-count" select="count( */Result[
           generate-id(.) = generate-id( key('kDepartments',Dept)[1])])" />
   <xsl:for-each select="(//*)[position() &lt;= 3]">
     <xsl:variable name="column" select="position()" />
     <td>
       <ul class="deptList">
         <xsl:for-each select="/*/Result[
           generate-id(.) = generate-id( key('kDepartments',Dept)[1])]" >
            <xsl:sort select="Dept" />
            <xsl:variable name="DeptIndex" select="position()" /> 
            <xsl:apply-templates select="self::Result[
              (floor((($DeptIndex - 1)*3 div $dept-count)) + 1) = $column]" /> 
         </xsl:for-each>    
       </ul>  
     </td>  
   </xsl:for-each>  
  </tr>
 </table>
</xsl:template>

<xsl:template match="Result">
 <h4>
  <xsl:value-of select="Dept" />
 </h4>
    <ul>
      <xsl:for-each select="key('kDepartments', Dept)">
        <xsl:sort select="Name" />
        <li>
          <xsl:value-of select="Name"/>
        </li>
      </xsl:for-each>
    </ul>
</xsl:template>

</xsl:stylesheet> 
```

# wordpress - 服务器磁盘空间已满的情况下如何维护网站的功能？

> ID：11742915
> 
> 赞同：0
> 
> 时间：2012-07-31T14:54:11.237
> 
> 标签：wordpress, webserver

当服务器的磁盘空间已满时，任何网站都会停止正常运行。为什么？我的理论：日志创建受到影响！另外，服务器可能需要创建一些临时文件，这会导致浏览体验缓慢。

如何维护网站的功能，我的意思是用户应该不会遇到任何问题，即使磁盘空间已满。

是否有任何可用的 wordpress 特定解决方案？

磁盘空间将保持满，我无法帮助它，有什么方法可以为托管网站保留一些空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:00:56.770

使用 memcached，可以在集群上添加更多的服务器。Memcached 可以加载到不同的服务器上。使用 W3Cache 性能插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:57:19.173

正确分区或强制执行配额。基本上没有现代操作系统可以在磁盘完全满的情况下正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:35:38.453

主要问题是如果服务器的磁盘空间已满，数据库查询会受到影响，因此数据库被迁移到另一台服务器。

还实施了缓存以提高性能。

此外，应用用户配额可能是一个不错的选择。

# php - ä ö 字符编码，在 PHP、Zend MySQL- 应用程序中

> ID：11742916
> 
> 赞同：0
> 
> 时间：2012-07-31T14:54:13.390
> 
> 标签：php, mysql, encoding, utf-8, character

问题：

当我从 MySQL 表中检索值到我的 PHP Zend 框架应用程序时，字符 ä 和 ö 会从数据库返回到我的浏览器，如下所示。

任何可能出现问题的想法？我已经尝试将一些属性设置为 UTF-8，但仍然会发生这种情况......我想我仍然错过了一些东西。

您能否提供一些解决方案，我如何才能确定地摆脱这种情况？我需要设置什么配置等。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:59:27.610

当浏览器读取错误编码的字符时，它们会显示为 � 或 ?。某处存在编码不匹配：

*   在您的浏览器中
*   在数据库表排序规则
*   在 HTML 字符集中

这些字符可以在 Unicode UTF-8 中使用，因此您应该验证您的数据库表排序规则是`utf8_bin`或类似的，因为如果您想以 UTF-8 瑞典语存储所有内容，您可以使用`utf8_swedish_ci`

在您的浏览器中，确保您的内容编码设置为自动检测。

在 MySQL 中创建一个 UTF-8 / utf8_bin 表，这里是一个例子：

```
CREATE TABLE `sample` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

要更改现有表以使用 UTF-8，请使用以下命令：

```
ALTER TABLE table_name CONVERT TO CHARACTER SET utf8 COLLATE utf8_bin; 
```

[这篇文章](https://stackoverflow.com/questions/4784168/how-to-change-collation-to-utf8-bin-in-one-go)很好地解释了是否使用`CONVERT TO CHRACTER SET utf8`

注意`CHARSET`和`COLLATE`都必须设置，否则会自动获取`COLLATE=utf8_general_ci`

对于 HTML，可以使用以下方式设置字符集：

```
<meta charset="UTF-8"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:00:45.860

我建议您查看浏览器中设置的“网站编码”。

如果网站不提供编码并且您的 mysql/php 正在“正确”处理它，这可能会发生（例如，它设置为“western 1252”但需要 utf8/unicode）

在 Firefox 中，您可以通过视图 -> 编码（或类似方法）查看编码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:00:52.027

您只需将编码正确设置为 UTF-8。以下是最小工作解决方案的基本步骤：

1.  确保您的[数据库连接使用 UTF-8](https://stackoverflow.com/questions/584676/how-to-make-pdo-run-set-names-utf8-each-time-i-connect-in-zendframework)
2.  确保您的 HTTP 内容类型设置为 UTF-8（例如：（另外，您可以[为文档](http://www.w3.org/International/questions/qa-html-encoding-declarations)`header('Content-type: text/html; charset=utf-8');`指定编码）
3.  将文件另存为 UTF-8。在 Windows 中，文件保存为 CP-1251，这意味着特殊重音字符不会被视为 UTF-8 编码字节（因此会丢弃输出到浏览器的内容。保存文件时必须明确设置编码。在 Linux/Mac 中，这不是问题，因为默认使用 UTF-8。
4.  确保您`php.ini`没有覆盖编码。如果您有外部`.htaccess`文件，请检查它们是否也没有。

如果您正确处理 UTF-8，则不需要`utf8_encode`/`utf8_decode`等`htmlentities`，并且无需特殊处理即可正确输出重音字符。

**注意**：某些语言环境不是由 UTF-8 处理的，尤其是[Thaï](https://stackoverflow.com/questions/4917714/file-get-contents-not-working-with-utf8/4917724#4917724)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T15:06:44.210

关于**Zend_Db_Adapter_Pdo_Mysql**确保您的构造函数使用**UTF-8**，如下所示：

```
$your_pdo = Zend_Db::factory('Pdo_Mysql', array(
                'host'     => DATABASE_HOST,
                'username' => DATABASE_USERNAME,
                'password' => DATABASE_PASSWORD,
                'dbname'   => DATABASE_DBNAME,
                'options'  => array( 'charset' => 'utf8' )
        ) ); 
```

在**HTML**中使用数据转义之前：

```
return htmlspecialchars( $string, ENT_QUOTES, 'UTF-8' ); 
```

查看有关内容类型、文件编码等的所有其他答案。

# delphi - RichView 中超链接不跳转

> ID：11742917
> 
> 赞同：1
> 
> 时间：2012-07-31T14:54:19.363
> 
> 标签：delphi, hyperlink

我正在开发一个 Delphi 聊天应用程序，它允许用户在常规文本之外发送超链接。我正在使用 RichViewEdit 来显示文本。当用户发送链接时，它应该显示为不同的颜色并且可以点击，以便在点击时打开默认的网络浏览器。

我已经阅读了 RichView 文档（这不是很好），但我似乎无法弄清楚如何让 OnMouseMove 和 OnJump 工作，有什么建议或帮助吗？

跳跃：

```
procedure TADComClient.RichViewJump(Sender: TObject; id: Integer);
var
  ItemNo: Integer;
  RVData: TCustomRVFormattedData;
  Link: PWideChar;
  URL: String;
begin
  RichView.GetJumpPointLocation(id, RVData, ItemNo);
  URL := RichView.GetItemText(ItemNo);
  ShellExecute(Application.Handle, 'open', PChar(URL), '', '', SW_SHOWNORMAL);
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:17:35.270

这应该可以让您到达您需要去的地方：{{文章：

```
Adding URL hyperlink functionality to RichEdit

http://delphi.about.com/library/weekly/aa111803a.htm

Here's how to add URL hyperlink functionality to a TRichEdit component -
whenever the text in a RichEdit matches the format of a URL, the control
will display it as a hyperlink. Even more: when you click the URL, your
Web browser will be launched and the link will be loaded into the browser;
or if the URL is a "mailto:" link, your default email client will be launched,
thus enabling you to send e-mail messages "from" RichEdit.
}

unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ComCtrls;

type
  TForm1 = class(TForm)
    RichEdit1: TRichEdit;
    RichEdit2: TRichEdit;
//    RichEdit1: TRichEdit;
//    RichEdit2: TRichEdit;
    procedure FormCreate(Sender: TObject);
  private
    procedure InitRichEditURLDetection(RE : TRichEdit);
  public
    { Public declarations }
  protected
    procedure WndProc(var Msg: TMessage); override;
  end;

var
  Form1: TForm1;

implementation
{$R *.dfm}

uses ShellApi, RichEdit;

procedure TForm1.InitRichEditURLDetection(RE: TRichEdit);
var
  mask: Word;
begin
  mask := SendMessage(RE.Handle, EM_GETEVENTMASK, 0, 0);
  SendMessage(RE.Handle, EM_SETEVENTMASK, 0, mask or ENM_LINK);
  SendMessage(RE.Handle, EM_AUTOURLDETECT, Integer(True), 0);
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  s: string;
begin
  InitRichEditURLDetection(RichEdit1);

  s:='Great Delphi tutorials and articles at ' +
     'http://www.delphi.about.com.' + #13#10 +
     'About Delphi Programming site!' + #13#10 +
     'Send an email to your Guide: mailto:delphi.guide@about.com';
  RichEdit1.Text := s;

  s:= 'http://www.delphi.about.com. ' +
      ' This Rich Edit does not recognize URLs!';
  RichEdit2.Text := s
end;

procedure TForm1.WndProc(var Msg: TMessage);
var
  p: TENLink;
  sURL: string;
  CE : TRichEdit;
begin
 if (Msg.Msg = WM_NOTIFY) then
 begin
  if (PNMHDR(Msg.lParam).code = EN_LINK) then
  begin
   p := TENLink(Pointer(TWMNotify(Msg).NMHdr)^);
   if (p.Msg = WM_LBUTTONDOWN) then
   begin
    try
     CE := TRichEdit(Form1.ActiveControl);
     SendMessage(CE.Handle, EM_EXSETSEL, 0, Longint(@(p.chrg)));
     sURL := CE.SelText;
     ShellExecute(Handle, 'open', PChar(sURL), 0, 0, SW_SHOWNORMAL);
    except
    end;
   end;
  end;
 end;

 inherited;
end; (* TForm1.WndProc *)

end. (* unit1.pas *)

{
********************************************
Zarko Gajic
About.com Guide to Delphi Programming
http://delphi.about.com
email: delphi.guide@about.com
free newsletter: http://delphi.about.com/library/blnewsletter.htm
forum: http://forums.about.com/ab-delphi/start/
********************************************
} 
```

# javascript - 可滚动表格中的键盘导航？

> ID：11742918
> 
> 赞同：0
> 
> 时间：2012-07-31T14:54:20.697
> 
> 标签：javascript, html-table

**介绍**
尝试从 xml 文件制作表格：作品 该表格当时只能显示有限数量的项目，因此我将其设置为可滚动：作品
我希望能够使用键盘在表格中导航：作品

**问题**
问题是您导航到可视表格的底部，表格不滚动，并且您导航到非可视部分。我该如何解决？

```
<html>
<head>
    <script language="javascript" type="text/javascript" src="js/keycode.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.js"></script>

<script>
var b4 = "";
var col = 1;
var row = 1;

function bg() {
    var rc = "r" + row + "c" + col;
    if (b4 == "") b4 = rc;
    $("#"+b4).css("backgroundColor","");
    $("#div2").text($("#"+rc).css("backgroundColor","yellow").data("param2"));
    b4 = rc;
}

function processKeyDown(e) {
    var keyCode;

    if(e.which) { 
        keyCode = e.which;
    } else {
        alert("Unknown event type.");
        return ;
    }

    processKeyHandle(keyCode);

}

function processKeyHandle(keyCode) {
    var nc = 0;
    switch(keyCode) {
        case VK_LEFT :
            if (col > 1) col--;
            bg();
            break;
        case VK_UP :
            if (row > 1) row--;
            bg();
            break;
        case VK_RIGHT :
            if (col < 3) col++;
            bg();
            break;
        case VK_DOWN :
            if (row < 10) row++;
            bg();
            break;      
        default :
            break;      
    }
}
</script>

</head>

<body onload="bg()" onkeydown="processKeyDown(event);" >
    <div style="width:325px; height:100px; overflow:auto;">

    <script>
        xmlhttp=new XMLHttpRequest();
        xmlhttp.open("GET","xml2.xml",false);
        xmlhttp.send();
        xmlDoc=xmlhttp.responseXML; 
        var item=xmlDoc.getElementsByTagName("item");

        var r = 1;
        var RowCol;

        document.write("<table id='tab' border='1' width='300px'>");
        for (index=0;index<item.length;index++) {
            document.write("<tr>");
                for (index,c=1; index<item.length && c<4; index++,c++) {
                    RowCol = "r" + r + "c" + c;
                    document.write("<td id='" + RowCol + "' data-param1='" + r + "' data-param2='" + RowCol + "'>");
                        var link = item[index].getElementsByTagName("link")[0].childNodes[0].nodeValue;
                        document.write(link);
                    document.write("</td>");
                }
            document.write("</tr>");
            r = r + 1;
        }
        document.write("</table>");

        </script>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:19:29.690

您将需要检查焦点元素的计算样式并滚动页面以使其进入可见区域。

有关计算样式的信息，请查看[quirksmode](http://www.quirksmode.org/dom/getstyles.html)，因为如何滚动[MDN](https://developer.mozilla.org/en/DOM/window.scrollTo)始终是一个不错的选择。

# jquery - 上滑，更改内容，然后使用 jQuery 向下滑动

> ID：11742920
> 
> 赞同：0
> 
> 时间：2012-07-31T14:54:34.090
> 
> 标签：jquery, slide, slidedown, slideup

我开发了以下代码来向上滑动**注册面板**，然后更改其内容，然后向下滑动**登录面板**。

```
function ValidLogin(data)
{
    var content = null;;
    content = '<a id="link-show" class="g-button g-button-red" href="<?php echo base_url(); ?>index.php/cv/show/';
    content += data.id;
    content += '">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;www.onlinecv.ir/index.php/cv/show/'
    content += data.id;
    content += '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
    content += 'رزومه ام را نشانم بده';

    content += '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="link-signout" class="g-button g-button-red" href="#';
    content += '">&nbsp;&nbsp;خروج&nbsp;&nbsp;'
    content += '</a>';
    content += '</span>'

    $("#signup-button").slideUp(1500).delay(1500);
    $("#signup-button").html(content).slideDown(1500);
} 
```

但它改变了内容，然后将其向上滑动并向下滑动。上滑后更改内容应该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:00:44.983

内容在 slideUp 之前进入。这样做：

```
$("#signup-button").slideUp(1500, function() {
    $("#signup-button").html(content);
}).slideDown(1500); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T14:59:56.670

使用 slideup 的回调函数等待幻灯片完成，然后执行您想要的，例如：

```
$("#signup-button").slideUp(1500, function(){
    // do what you want here
    // then slidedown again :)
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:00:13.070

你可以试试这个

```
var slider = $("#signup-button");
slider.slideUp(1500, function(){        
        slider.html(content).slideDown(1500);                        
}); 
```

在此处查看演示[http://jsfiddle.net/UdagC/](http://jsfiddle.net/UdagC/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T15:05:17.957

尝试这样的事情；

```
$("#signup-button").slideUp('slow',function(){
     $("#signup-button").html( content ).slideDown('slow')
}); 
```

“慢”是你真正想要的速度。

# liferay - 我可以为我的自定义代码关联 Liferay 侦听器吗？

> ID：11742930
> 
> 赞同：0
> 
> 时间：2012-07-31T14:55:00.457
> 
> 标签：liferay, liferay-6

我正在使用**Liferay 6.1 CE**进行门户应用程序开发。

我是 Liferay 的新手，所以如果我的问题是错误的，请原谅。

我的查询是关于 liferay 中的侦听器，我看到 Liferay 侦听器仅限于预定义的核心门户模型，如日志、用户等。（如果我错了，请纠正我）

我想调用一个监听器的`onAfterCreate`方法（即在创建`User`完成之后）

在我们用于创建用户的应用程序中，我们有一个单独的`createUser.jsp`，单击提交按钮时，它存储`Virte_Users`在数据库中称为表的表之一中。

请让我知道，在这种情况下是否可以关联 liferay 侦听器？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:24:31.503

您不能使用默认侦听器，但您可以为特定模型添加自己的侦听器。

例如，

你可以让你的听众`BaseModelListener<User>`像这样扩展，

```
MyUserListener extends BaseModelListener<User> 
```

请检查来源`UserListener`并将以下属性放入`portal-ext.properties`：

```
 # You can add a listener for a specific class by setting the property
 # "value.object.listener" with a list of comma delimited class names that
 # implement com.liferay.portal.model.ModelListener. These classes are pooled
 # and reused and must be thread safe.

    value.object.listener.com.liferay.portal.model.User=com.liferay.portal.model.UserListener,<b>com.my.user.MyUserListener</b> 
```

# flash - Win Azure：Flash Player 播放托管在 BLOB 存储中的视频

> ID：11742935
> 
> 赞同：0
> 
> 时间：2012-07-31T14:55:26.083
> 
> 标签：flash, azure, video-streaming, blob

我对视频流非常陌生。有谁知道一个页面，该页面提供了设置网页以从 blob 存储流式传输视频所涉及的所有步骤的示例？理想情况下使用 FLASH 播放器，而不是 silverlight。

我在 Azure 中有一个网站，其中有一个带有 Flash 播放器的页面。如果我在 VS 项目文件夹中包含 MP4 视频文件，它工作得很好，但是如果我将文件名更改为 BLOB 存储中相同视频文件的 URL，我会得到一个空白显示。视频是由我的客户制作和提供的，所以我不控制格式等。

在我的网页中，我有以下对象标签：

```
 <object id="csSWF" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="800" height="704" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0">
        <param name="movie" value="VideoFileName_controller.swf" />
        <param name="scale" value="showall" />
        <param name="bgcolor" value="#1a1a1a" />
        <param name="allowfullscreen" value="true" />
        <param name="allowscriptaccess" value="always" />
        <param name="flashvars" value="tocdoc=left&amp;showsearch=true&amp;autostart=false&amp;autohide=true&amp;xmp=VideoFileName_config.xml&amp;content=https://BLAHBLAHBLAH.blob.core.windows.net/media/VideoFileName.mp4&amp;thumb=FirstFrame.png&amp;containerwidth=800&amp;containerheight=704&amp;smoothing=true&amp;enablejsapi=true&amp;fullscreen=true&amp;windowbox=false&amp;showbranding=false&amp;showstartscreen=true&amp;showendscreen=true&amp;basecolor=272727&amp;loop=false" />
        <!--[if !IE]>-->
        <object type="application/x-shockwave-flash" data="VideoFileName_controller.swf" width="800" height="704">
            <param name="scale" value="showall" />
            <param name="bgcolor" value="#1a1a1a" />
            <param name="allowfullscreen" value="true" />
            <param name="allowscriptaccess" value="always" />
            <param name="flashvars" value="tocdoc=left&amp;showsearch=true&amp;autostart=false&amp;autohide=true&amp;xmp=VideoFileName_config.xml&amp;content=https://BLAHBLAHBLAH.blob.core.windows.net/media/VideoFileName.mp4&amp;thumb=FirstFrame.png&amp;containerwidth=800&amp;containerheight=704&amp;smoothing=true&amp;enablejsapi=true&amp;fullscreen=true&amp;windowbox=false&amp;showbranding=false&amp;showstartscreen=true&amp;showendscreen=true&amp;basecolor=272727&amp;loop=false" />
            <!--<![endif]-->
            <div id="noUpdate">
                <p>The video content presented here requires JavaScript to be enabled in your browser and the latest version of the Adobe Flash Player installed. If you are using a browser with JavaScript disabled please enable it now. Otherwise, please update your version of the free Adobe Flash Player by <a href="http://www.adobe.com/go/getflashplayer">downloading here</a>. </p>
            </div>
        <!--[if !IE]>-->                    
        </object> 
        <!--<![endif]-->
    </object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:09:00.450

这可能是由错误的内容类型引起的。您应该尝试将 MP4 文件的内容类型更改为**video/mp4**。

有关详细信息，请参阅以下博客文章：[为什么在 Azure 存储中为 blob 设置正确的内容类型 HTTP 标头很重要](http://blogs.msdn.com/b/avkashchauhan/archive/2012/04/04/why-it-is-important-to-set-proper-content-type-http-header-for-blobs-in-azure-storage.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-20T07:43:08.477

Flash 不支持从非 http url 下载数据。

[https://code.google.com/p/chromium/issues/detail?id=60132](https://code.google.com/p/chromium/issues/detail?id=60132)

# matlab - 如何在 MATLAB 中输出“for”循环的结果？

> ID：11742942
> 
> 赞同：0
> 
> 时间：2012-07-31T14:56:21.053
> 
> 标签：matlab, for-loop

我有这样的代码：

```
[X, Y, Z]= meshgrid(0:5:50, 0:5:50, 0:3:3);
[t1, t2, t3]= meshgrid(35, 25, 3);

A=sqrt((X - t1).^2 + (Y - t2).^2 + (Z - t3).^2);

[rows1,cols1,pages1] = ind2sub(size(A), find(A<=5));

for i=1:1:length(rows1);
    [R1, R2, R3]= meshgrid(cols1(i)*5-5, rows1(i)*5-5, pages1(i)*3-3);
    [reader]=[R1, R2, R3]

    B=sqrt((X1 - R1).^2 + (Y1 - R2).^2 + (Z1 - R3).^2);
    [rowsB,colsB,pagesB] = ind2sub(size(B), find(B<=5));

    for j=1:1:length(rowsB);
        [T1, T2, T3]= meshgrid(colsB(j)*0.2-0.2+0.15, rowsB(j)*0.2-0.2+0.15, pagesB(j)*3-3);
        [tag]=[T1, T2, T3];
    end
end 
```

我需要从“for”循环中获得所有结果，因为需要对这些结果应用“intersec”。但是我遇到了问题，因为“for”会覆盖结果，而我只取最后一个。如何使某事喜欢

```
[tag(i)]=[T1, T2, T3] where i is i=1:1:length(rows1). 
```

我已经通过预分配应用了 smth，但没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:04:25.570

一般来说，您可以使用单元格数组：

```
tag = cell(length(rows1),1);
for i=1:length(rows1)
    tag{i} = [T1, T2, T3];
end 
```

虽然看起来像一个简单的矩阵就可以了..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:15:13.913

为了将向量分配给矩阵的行，您需要使用冒号作为列索引对列进行切片。像这样的东西：

```
tag = zeros(length(rows1), 3);
for i = 1:length(rows1)
    ...
    tag(i, :) = [T1, T2, T3];
end 
```

编辑：修正了我的例子。我误读了你的代码。以上较为笼统。

# javascript - 获取 HTML 表格中的行数

> ID：11742946
> 
> 赞同：38
> 
> 时间：2012-07-31T14:56:32.993
> 
> 标签：javascript, jquery, html-table

我浏览了互联网寻找答案，但我找不到解决方案。我想计算按下链接按钮时我的 HTML 表格中的行数。有人可以帮帮我吗？

这是我到目前为止所拥有的：

```
 $('#HypSelectAll').click(function () {
     var count = $('#gvPerformanceResult').children().length;
     for (i = 0; i < count; i++) {
        alert(i);
     }
 }); 
```

但是，即使我的表中有大约 12 行，它也会返回 0？我检查了我的 ID 名称，它是正确的。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2014-03-13T13:42:40.550

```
var x = document.getElementById("myTable").rows.length; 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-07-31T14:57:41.130

尝试：

```
var count = $('#gvPerformanceResult tr').length; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-31T14:59:54.207

> 以下代码假定您的表的 ID 为“MyTable”
> 
> ```
> <script language="JavaScript">
> <!--
> var oRows = document.getElementById('MyTable').getElementsByTagName('tr');
> var iRowCount = oRows.length;
> 
> alert('Your table has ' + iRowCount + ' rows.');
> //-->
> </script> 
> ```

答案来自： http: [//www.delphifaq.com/faq/f771.shtml](http://www.delphifaq.com/faq/f771.shtml)，这是 google 查询的第一个结果：“获取 HTML 表中的行数”；）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-31T16:43:42.863

在 DOM 中，一个`tr`元素（隐式或显式）是 、 或 的子元素`tbody`，`thead`而`tfoot`不是`table`（因此得到 0 ）的子元素。所以一个普遍的答案是：

```
var count = $('#gvPerformanceResult > * > tr').length; 
```

这包括表的行，但不包括任何内部表的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:05:13.050

嗯，这取决于你的桌子上有什么。

它是以下之一如果您只有一张桌子

```
var count = $('#gvPerformanceResult tr').length; 
```

如果您担心子表，但这不适用于 tbody 和 thead（如果您使用它们）

```
var count = $('#gvPerformanceResult>tr').length; 
```

这将在哪里起作用（但坦率地说，这是矫枉过正的。）

```
var count = $('#gvPerformanceResult>tbody>tr').length; 
```

# c# - 将常量作为 C# 泛型类型参数传递

> ID：11742947
> 
> 赞同：1
> 
> 时间：2012-07-31T14:56:50.887
> 
> 标签：c#, nhibernate, generics

我有一个 NHibernate IUserType，我试图用它来将几个固定大小的 double[] 字段（不同大小）绑定到单个数据库列作为 BLOB。我有以下代码，但不知何故我需要将一个常量整数传递给它，以便它知道数组应该有多大。我认为没有办法在运行时以自定义方式实例化这种类型，因此大小确实需要成为类型本身的一部分。如果我可以避免的话，我宁愿没有这个丑陋课程的两个副本！

```
public class DoubleArrayUserType<Size> : NHibernate.UserTypes.IUserType
{
    private int _size = sizeof(Size);

    public object Assemble(object cached, object owner)
    {
        if (cached == null)
            return null;

        if (cached == DBNull.Value)
            return null;

        if (!(cached is byte[]))
            throw new ArgumentException();

        var arrayBytes = cached as byte[];
        var arrayStream = new BinaryReader(new MemoryStream(arrayBytes));

        var values = new double[_size];
        for (int i = 0; i < _size; ++i)
            values[i] = arrayStream.ReadDouble();

        return values;
    }

    public object Disassemble(object value)
    {
        if (value == null)
            return DBNull.Value;

        if (value == DBNull.Value)
            return DBNull.Value;

        if (!(value is double[]))
            throw new ArgumentException();

        var values = value as double[];
        var bytes = new List<byte>(sizeof(double) * _size);
        for (int i = 0; i < _size; ++i)
            bytes.AddRange(BitConverter.GetBytes(values[i]));
        return bytes.ToArray();
    }

    public NHibernate.SqlTypes.SqlType[] SqlTypes
    {
        get { return new NHibernate.SqlTypes.SqlType[] { NHibernate.SqlTypes.SqlTypeFactory.GetBinaryBlob(1) }; }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T15:12:12.100

这是一个有争议的解决方案（期待投票！），但它不会产生一个常数。我相信您也能够以不同的方式解决您的问题：

```
public interface IHasSize{
  int Size { get; }
}

public class MySize : IHasSize { 
  public int Size { get { return 4; } }
}

public class RequiresASize<TSize> where TSize : IHasSize, new()
{
  private int _size = new TSize().Size;
}

public class ProvidesASize : RequiresASize<MySize>{
  //_size in base class will be 4
} 
```

`RequiresASize<TSize>`您的问题中的大班也是如此。我通过最后的`ProvidesASize`类型使用继承来演示它是如何工作的。

# php - 如何将多个查询从 mssql_* 转换为 PDO mysql

> ID：11742956
> 
> 赞同：0
> 
> 时间：2012-07-31T14:57:08.337
> 
> 标签：php, mysql, pdo

我几乎没有用于日常审计事务的 php 代码。我很容易理解这一点。

```
$result = mssql_query("BEGIN TRAN");    
$result = mssql_query("insert into items_history (select * from items)");   //move transaction to history
$result = mssql_query("delete * from items)");                                  //clear transaction table for new month transaction
$result = mssql_query(                                                          //get the data for used in another script 
            "select items_history.item_id,
                items_history.item_name,
                group_items.group_name 
            from 
                items_history,group_items 
            where group_items.id=items_history.id and 
                day(items_history.date_trans)=day(items_history.date_trans)-1 "                     // whit where include 
            );
$result = mssql_query("update trans_control set current_day=current_day+1"  };  //update the system date to next day

if (!$result) {
     mssql_query("ROLLBACK TRAN");
    } else {
     mssql_query("COMMIT TRAN");
    }
mssql_close(); 
```

由于某种原因，该数据库需要与mysql数据库在线存储。在离线状态下，我不太担心这段代码的安全性。但在网上，它让我想到了安全。现在我想将此脚本转换为 PDO MySql。目标很简单，更安全：

```
$result = q("BEGIN");   
$result = q("qry1");
$result = q("qry2");
$result = q("qry3");// select with many join table and some parameter data in where like 'string','int', 'date', and maybe with "Union All" in select
$result = q("qry..."};

if (!$result) {
     q("ROLLBACK");
    } else {
     q("COMMIT");
    } 
```

如果另一个问题有同样的问题。我很高兴从这个开始，特别是简单的包装器，所以我可以了解它是如何工作的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:02:48.277

只要使用绑定参数，安全性应该没问题，见 www.php.net/manual/en/pdostatement.bindparam.php 和[http://www.php.net/manual/en/pdostatement.bindvalue.php](http://www.php.net/manual/en/pdostatement.bindvalue.php)

对于您的交易，您可以使用以下方法模拟同样的事情：

[http://www.php.net/manual/en/pdo.begintransaction.php](http://www.php.net/manual/en/pdo.begintransaction.php)而不是您的 BEGIN TRAN 查询， [http:](http://www.php.net/manual/en/pdo.commit.php) //www.php.net/manual/en/pdo.commit.php 而不是 COMMIT， [http ://www.php.net/manual/en/pdo.rollback.php](http://www.php.net/manual/en/pdo.rollback.php)而不是 ROLLBACK

但是，如果查询正是您的第一个代码示例中的查询，我看不到任何可能导致安全问题的外部参数

# c++ - 关于 C++ 二进制文件

> ID：11742959
> 
> 赞同：-6
> 
> 时间：2012-07-31T14:57:14.920
> 
> 标签：c++

```
#include <iostream>

using namespace std;

int main()
{
    for(int i=63;i>=0;--i)
    {
        cout<<(((1<<63)+1)&(/*(long long)*/1<<i)?"1":"0");
    }

    return 0;
} 
```

结果如下：00000000000000000000000000000000100000000000000000000000000000001

那么，谁能告诉我结果是怎么来的？

我问这个问题只是因为我正在阅读有关 XDR 错误的“CA-2002-25”。现在我想更多地了解 C Plus Plus 中的溢出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:07:45.287

好吧，很难说出你真正期待什么，但是通过编译器运行它会产生很多有用的警告。如果您在整个地方添加长长的整数文字符号，如下所示：

```
#include <iostream>

using namespace std;

int main()
{
    long long num = 0x7fffffff00000000ULL >> 32;
    for(int i=63;i>=0;--i)
    {
        cout<<(((1ULL<<63)+1ULL)&(1ULL<<i)?"1":"0");
    }

    return 0;
} 
```

你得到答案

```
1000000000000000000000000000000000000000000000000000000000000001 
```

这就是我希望你的循环做的事情。我不知道您期望`num`做什么，因为您没有使用该值，但是嘿！我也装饰了那个。

这是否回答你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:10:34.900

尝试这个：

```
#include <iostream>

int main()
{
    long long num=0x7fffffff00000000ll >> 32; 
                                //  ^^    
                                // Literals are by default int
                                // need to add ll to let the compiler
                                // know it is long long
    for(int i=63; i>=0 ;--i)
    {   
        long long mask = (1ll << i); 
                       //  ^^    Note here I want this to be a long long
                       //        before I start shifting it.
        std::cout << ((num & mask)?1:0);
    }   
    std::cout << "\n";

    return 0;
}

./a.out
0000000000000000000000000000000001111111111111111111111111111111 
```

查看您的代码：

```
cout<<(((1<<63)+1)&(/*(long long)*/1<<i)?"1":"0"); 
```

里面有一个常数：

```
int val = (1<<63)+1;
// since these are all integer literals (and I am guessing your platform is 32 bit)
0x00000001  or 000000000000000000000000000000001 
```

因此，当您使用该表达式的第二部分循环它时：

```
/*(long long)*/1<<i 
```

在 i > 32 之后，**结果是未定义**的，但看起来它正在环绕该位并重新开始。所以你正在设置

```
10000000000000000000000000000000100000000000000000000000000000001
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^    Mask bit wrapped around
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ The mask on 0x00000001 
```

# mysql - 如何为整个子网授予对 MySQL 的远程访问权限？

> ID：11742963
> 
> 赞同：105
> 
> 时间：2012-07-31T14:57:34.333
> 
> 标签：mysql, grant

我可以使用以下代码轻松授予对一个 IP 的访问权限：

```
$ mysql -u root -p
Enter password:    
mysql> use mysql    
mysql> GRANT ALL ON *.* to root@'192.168.1.4' IDENTIFIED BY 'your-root-password';     
mysql> FLUSH PRIVILEGES; 
```

但我需要允许整个子网 192.168.1.* 远程访问数据库。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2016-07-15T07:05:35.717

[看起来您也可以使用网络掩码](http://dev.mysql.com/doc/refman/5.7/en/account-names.html)，例如

```
GRANT ... TO 'user'@'192.168.0.0/255.255.255.0' IDENTIFIED BY ... 
```

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-07-31T15:01:20.187

编辑：考虑在此页面上查看并支持[Malvineous](https://stackoverflow.com/questions/11742963/how-to-grant-remote-access-to-mysql-for-a-whole-subnet/38389851#38389851)的答案。网络掩码是一个更优雅的解决方案。

* * *

只需在 IP 地址中使用百分号作为通配符。

来自[http://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

> 您可以在主机名中指定通配符。例如，`user_name@'%.example.com'`适用于域中`user_name`的任何主机，适用于C类子网中的任何主机。`example.com``user_name@'192.168.1.%'``user_name``192.168.1`

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-07-31T15:01:29.050

您只需使用 '%' 作为通配符，如下所示：

```
GRANT ALL ON *.* to root@'192.168.1.%' IDENTIFIED BY 'your-root-password'; 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-07-31T15:01:35.690

```
mysql> GRANT ALL ON *.* to root@'192.168.1.%' IDENTIFIED BY 'your-root-password'; 
```

通配符是“%”而不是“*”

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-06-02T12:55:15.687

只是我遇到的一个特殊性的注释：
考虑：

```
db server:  192.168.0.101
web server: 192.168.0.102 
```

如果您在 mysql.user 中定义了一个用户，`'user'@'192.168.0.102'`使用密码 1 和另一个`'user'@'192.168.0.%'`使用密码 2，

然后，

如果您尝试使用密码 2 以“用户”身份从 Web 服务器连接到数据库服务器，

它将导致“拒绝访问”错误，因为 `'user'@'192.168.0.102'`在通配符身份验证上使用了单一 IP 身份`'user'@'192.168.0.%'`验证。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-01-09T11:54:18.883

连接服务器并想在主机上连接后，您应该执行以下步骤：

1.  写**mysql**打开mysql
2.  写；**`GRANT ALL ON *.* to root@'write_your_ip_addres' IDENTIFIED BY 'write_password_to_connect'`**
3.  按 control 和 X 退出 mysql
4.  写**`nano /etc/mysql/my.cnf`**
5.  在 my.cnf 文件夹中**的 bind-address = 127.0.0.1**之前写 #
6.  **#绑定地址 = 127.0.0.1**
7.  使用 control + X 保存 my.cnf 文件夹
8.  写**`service mysql restart`**
9.  你可以通过主机上的 navicat 连接

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-15T10:31:58.347

受@Malvineaus 回答的启发，我自己尝试了一下，发现它对我不起作用。

您可以使用“192.168.1.%”或“192.168.1.0/255.255.255.0”指定子网掩码，但子网必须始终使用完整的八位字节。请参阅[https://mariadb.com/kb/en/create-user/#host-name-component](https://mariadb.com/kb/en/create-user/#host-name-component)。结果，一种规范方式和另一种规范方式之间的功能是相同的。

例如 '192.168.1.0/255.255.255.128' 将不起作用，因为它不在完整的八位字节边界上。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-18T07:22:51.727

[MySQL 8.0.23 及以后的版本](https://dev.mysql.com/doc/refman/8.0/en/account-names.html)现在也支持 CIDR 表示法。

所以，基本上：

```
-- CIDR Notation
GRANT ... TO 'user'@'192.168.1.0/24' IDENTIFIED BY ...

-- Netmask Notation
GRANT ... TO 'user'@'192.168.1.0/255.255.255.0' IDENTIFIED BY ... 
```

# python - 带有“if”语句的Python无效语法

> ID：11742965
> 
> 赞同：0
> 
> 时间：2012-07-31T14:57:38.523
> 
> 标签：python, if-statement

我试图通过这个简单的 if 语句，它不喜欢它，它不断给出 Invalid Syntax 错误，这是我试图输入的语句：

```
if measured_dec =< 0.523966303045:
    print "WARNING! Object may be below Horizon!" 
```

请有人告诉我我做错了什么

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:00:06.593

您的小于或等于运算符是错误的方法，将其更改为：

```
if measured_dec <= 0.523966303045:
    print "WARNING! Object may be below Horizon!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:00:27.267

小于或等于运算符则向另一个方向发展。应该`<=`不是`=<`

```
if measured_dec <= 0.523966303045:
    print "WARNING! Object may be below Horizon!" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:01:13.390

可能是因为“=<”

尝试使用：

```
if measured_dec <= 0.523966303045:
    print "WARNING! Object may be below Horizon!" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T10:26:43.407

小于或等于运算符就是这样的'<='。通过将语句更改为以下内容来尝试。

```
if measured_dec =< 0.523966303045:
   print "WARNING! Object may be below Horizon!" 
```

# jquery - 单击所有图像继续？jQuery？

> ID：11742976
> 
> 赞同：3
> 
> 时间：2012-07-31T14:58:01.830
> 
> 标签：jquery, click, image

我有五个图像，当单击加载包含时。一旦用户浏览完包含页面，他们就会被提示返回五个图像。所有这些都使用 .load() 函数。一旦用户单击所有五个图像，我希望弹出一个继续按钮，然后继续到下一页。我如何记录一次点击，当点击五个特定图像时会弹出一个继续按钮？

图像通常在 html 中设置，如下所示。

```
<img class="img1" src="img/img1.png" />
<img class="img2" src="img/img2.png" /> 
<img class="img3" src="img/img3.png" />
<img class="img4" src="img/img4.png" /> 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T15:02:09.267

您可以尝试以下方法：

**HTML**：

```
<img class="img1 notclicked" src="img/img1.png" />
<img class="img2 notclicked" src="img/img2.png" /> 
<img class="img3 notclicked" src="img/img3.png" />
<img class="img4 notclicked" src="img/img4.png" /> 
```

**Javascript**：

```
$('.notclicked').click(function() {
    $(this).removeClass('notclicked');

    if($('.notclicked').length == 0)
        // Show your button
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:04:25.350

单击图像时，我会向图像添加一个 CSS 类。然后我将检查具有该 purticulr 类的项目数量。如果这是你的限制（例如：5），这意味着所有 5 张图片都被点击，现在做任何你想做的事（显示按钮或..）

```
$(function(){

      $(".img1, .img2, .img3, .img4, .img5").click(function(){
        var item=$(this);
        //load image or whatever you want to do

         item.addClass("clicked");
         var totalClicked=$(".clicked").length;
         if(totalclicked==5)
         {
             alert("show /hide button");   
         }                
    });           
}); 
```

工作示例[http://jsfiddle.net/SySUS/19/](http://jsfiddle.net/SySUS/19/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:09:30.277

由于其他答案都涉及添加类，因此我将使用 jQuery 的延迟对象 API 将一些不同的东西加入其中：

**HTML**

```
<div id='imgs_container'>
    <img src="img/img1.png" />
    <img src="img/img2.png" /> 
    <img src="img/img3.png" />
    <img src="img/img4.png" />
</div> 
```

**JS**

```
var dfds = [];
$('#imgs_container img')
    .each(function() { dfds.push(new $.Deferred); })
    .on('click', function() { dfds[$(this).index()].resolve(); });
$.when.apply($, dfds).done(function() {
    //code to show button here
}); 
```

如果这看起来有点奇怪，我写了一篇关于非 AJAX 用于延迟的[详细博客文章，这可能会有所帮助。](http://www.mitya.co.uk/blog/2012/Apr/Non-AJAX-use-for-jQuerys-deferred-objects-207)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T15:19:40.127

哦，太慢了，这是另一种添加类和计数方法（使用 div 而不是图像）:)

[http://jsfiddle.net/9T6xe/2/](http://jsfiddle.net/9T6xe/2/)

HTML：

```
<div class="click-me">1</div>
<div class="click-me">2</div>
<div class="click-me">3</div>
<div class="click-me">4</div>​ 
```

JS：

```
$(function() {

    //elements to be clicked
    var $div = $('.click-me');

    //check if everyt div has been clicked, by checking if the num of elements with class done is equal to amount of elements
    function everyDivAlreadyclicked() {
        return $div.filter('.done').length === $div.length;
    }

    $div.bind('click', function() {

        //add done class
        $(this).addClass('done').text('clicked');

        if (everyDivAlreadyclicked()) {
            //if every div was clicked, profit!
            alert('yay done!');
        }           
    });
});​ 
```

# android - 在 android 中从我的应用程序打开其他应用程序

> ID：11742977
> 
> 赞同：0
> 
> 时间：2012-07-31T14:58:04.077
> 
> 标签：android, android-intent

我想知道如何将我的应用程序作为启动器来启动其他应用程序。（不是我写的）

例如我想打开游戏

1) 愤怒的小鸟 2) 篮球投篮

ETC

从我的应用程序中单击每个游戏的按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:02:34.203

找出那些游戏包，然后通过`Intent`. 像这样：

```
String packageName = "com.rovio.angrybirds";
Intent i = new Intent(Intent.ACTION_MAIN);
PackageManager manager = getPackageManager();
i = manager.getLaunchIntentForPackage(packageName);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T15:01:45.557

你应该使用意图。请查看以下链接。它详细地回答了你的问题。 [从您自己的（意图）打开另一个应用程序](https://stackoverflow.com/questions/2780102/open-another-application-from-your-own-intent)

# javascript - $http()。使用“？”传递额外的 GET 参数时获取 SyntaxError

> ID：11742978
> 
> 赞同：1
> 
> 时间：2012-07-31T14:58:10.517
> 
> 标签：javascript, http, angularjs

我按照文档示例实现了一个 fetch 方法。就我添加`?format=json`到`$scope.url`.

```
 $scope.method = 'GET';
    $scope.url = "/activite/273/usagers?format=json";

    $scope.fetch = function($event) {

        $scope.code = null;
        $scope.response = null;

        $http({method: $scope.method, url: $scope.url, cache: $templateCache}).
          success(function(data, status) {
            $scope.status = status;
            $scope.users = data;
            $scope.search.status = $scope.userStatus;
            $('#UserList').modal('show');
          }).
          error(function(data, status) {
            $scope.response = data || "Request failed";
            $scope.status = status;
            $scope.userStatus = '';
        });
        $event.preventDefault();
    }; 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:07:25.990

根据[API 文档](http://docs.angularjs.org/api/ng.%24http)，看起来您应该以`params`任何方式在单独的对象中传递参数。所以：

```
$scope.method = 'GET';
$scope.url = "/activite/273/usagers";
$scope.params = {
    format: 'json
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:38:37.630

这实际上是由于 json 格式本身的问题，所有的都`"`被替换为`&quote;`. 我解决了这个问题，它解决了这个问题。

# java - 使用 Scribe，OAuth Echo 似乎不适用于 Twitpic

> ID：11742980
> 
> 赞同：0
> 
> 时间：2012-07-31T14:58:18.727
> 
> 标签：java, oauth, scribe

我正在尝试使用 Scribe 上传照片，但似乎无法解决错误：

```
Authentication challenged received is null 
```

而且我不知道，由于缺乏有关如何解决此问题的文档。

相关代码为：

```
try{
        OAuthRequest r = new OAuthRequest(Verb.POST, url);
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        toSend.writeTo(out);
        r.addPayload(out.toByteArray());
        r.addHeader(toSend.getContentType().getName(), toSend.getContentType().getValue());

        OAuth10aServiceImpl oauth = (OAuth10aServiceImpl)oauthImpl;
        OAuthRequest sr = new OAuthRequest(Verb.GET, serviceProvider);
        sr.addOAuthParameter(OAuthConstants.TOKEN, oauthToken.getToken());
        sr.addOAuthParameter(OAuthConstants.REALM,"http://api.twitter.com/");
        oauth.addOAuthParams(sr, client._oauthToken);

        r.addHeader("X-Auth-Service-Provider",serviceProvider);
        String oauthHeader = oauth.api.getHeaderExtractor().extract(sr);
        r.addHeader("X-Verify-Credentials-Authorization", oauthHeader);

        System.out.println(r.getHeaders().get("X-Verify-Credentials-Authorization"));

        return r.send();
    }catch(Exception e){
        e.printStackTrace();
        return null;
    } 
```

我认为它与消费者密钥有关，因为它似乎没有添加到签名中，但我不太确定到底发生了什么：/

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:33:41.703

固定的。这是代码：

```
 OAuthRequest r = new OAuthRequest(Verb.POST, url);
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        toSend.writeTo(out);
        r.addPayload(out.toByteArray());
        r.addHeader(toSend.getContentType().getName(), toSend.getContentType().getValue());

        OAuth10aServiceImpl oauth = (OAuth10aServiceImpl)client._oauth;
        OAuthRequest sr = new OAuthRequest(Verb.GET, serviceProvider);
        oauth.signRequest(client._oauthToken, sr);

        r.addHeader("X-Auth-Service-Provider",serviceProvider);
        String oauthHeader = sr.getHeaders().get("Authorization");
        r.addHeader("X-Verify-Credentials-Authorization", oauthHeader); 
```

对于任何想知道它是如何工作的人来说，`toSend`它是一个`HttpEntity`包含文件和其他`StringBody`部分并且`client._oauthToken`是一个`Token`对象。`r`是我对 twitpic 的请求，并且`serviceProvider`是 Twitter API 验证凭据 url（在 yfrog 等某些服务上会发生变化）

# java - 数学.Sqrt(x); 不工作？

> ID：11742981
> 
> 赞同：2
> 
> 时间：2012-07-31T14:58:19.850
> 
> 标签：java, android, math, sqrt

我正在制作一个计算器，在尝试制作平方根函数时，它会输出您输入的数字，而不是平方根。这是适用于平方根函数的代码。

```
SquareRoot = (Button)findViewById(R.id.SquareRoot);
        SquareRoot.setOnClickListener(new OnClickListener() {
             public void onClick(View v) {
                x = TextBox.getText();
                xconv = Double.parseDouble(x.toString());
                Math.sqrt(xconv);
                answer = Double.toString(xconv);
                TextBox.setText(answer);

        }}); 
```

Just to give some information on this, x is a CharSequence, xconv is x converted to double, and answer is a string value. Thanks.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T14:59:48.977

那是因为 Math.sqrt*返回*的是 sqrt，它不会修改传入的值。

```
xconv = Math.sqrt(xconv); 
```

是你想要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T15:01:52.613

实际的问题是你只留下结果而不存储在任何变量中。

只需启动`square root`结果`xconv`，然后查看您是否可以获得结果。

用我的代码替换你的代码

```
 SquareRoot = (Button)findViewById(R.id.SquareRoot);
    SquareRoot.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {
            x = TextBox.getText();
            xconv = Double.parseDouble(x.toString());
            xconv = Math.sqrt(xconv);//======> you are not initalize the answer to a variable here
            answer = Double.toString(xconv);
            TextBox.setText(answer);

    }}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T15:00:45.563

```
double squareRoot = Math.sqrt(xconv); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T15:00:43.863

您没有存储 Math.sqrt 的值。变量不会更新，而是返回结果。执行以下操作：

```
xconv = Math.sqrt(xconv); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-03T01:06:40.330

```
x=Double.parseDouble(edtchar.getText().toString());
ans.setText(Double.toString(Math.sqrt(x))); 
```

将 x 视为 Double，将 ans 视为 textview。

# perl - Template-Toolkit and Juniper

> ID：11742982
> 
> 赞同：0
> 
> 时间：2012-07-31T14:58:21.133
> 
> 标签：perl, template-toolkit

I finally got Template-Toolkit installed and working, but I'm having some issues compiling with it.

I'm trying to make a custom sign-on page for a Juniper gateway. From their doc ( [http://www.juniper.net/techpubs/software/ive/admin/5.5-CSPSolutionGuide.pdf](http://www.juniper.net/techpubs/software/ive/admin/5.5-CSPSolutionGuide.pdf) ) on page 18 they say

```
You must begin each file with the directive
[% TAGS <% %> %] so that you can use angle brackets on any directives you add
to the templates. By default, the Template Toolkit recognizes square brackets ([
]) instead of angle brackets (<>) as delimiters for directives. The IVE recognizes
angle brackets only. Adding the TAGS directive tells the local Template Toolkit
utilities that you are using angle brackets. 
```

I add the line to the beginning of the file, but get this error when I run the tpage command:

```
undef error - verbatim: filter not found 
```

Another option would be to change the START_TAG and END_TAG in Template-Toolkit config, from this doc ( [http://template-toolkit.org/docs/manual/Config.html#section_START_TAG_END_TAG](http://template-toolkit.org/docs/manual/Config.html#section_START_TAG_END_TAG) )

But I'm not sure where I can perform this change, I don't know where to find the config file or the command to change the setting.

Any help is appreciated !!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:26:38.157

`[% TAGS %]`好吧，这个错误与指令无关。

您收到该错误是因为您使用了未安装的名为“逐字”的过滤器。它不是模板工具包附带的[标准过滤器](https://metacpan.org/module/Template%3a%3aManual%3a%3aFilters)之一，所以我不确定它应该来自哪里。可能是瞻博网络安装的东西吗？

# delphi - Delphi THTTPRio如何使用认证代理服务器

> ID：11742983
> 
> 赞同：7
> 
> 时间：2012-07-31T14:58:21.893
> 
> 标签：delphi, authentication, soap, proxy, delphi-xe2

我已经将 WSDL 导入器与 Delphi XE2 一起使用，它生成了一个如下所示的例程，不包括我尝试使用代理服务器的 3 条注释行。

```
function GetIXYZService(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): IXYZService;
const
  defWSDL = 'https://server/XYZService.svc?wsdl';
  defURL  = 'https://server/XYZService.svc';
  defSvc  = 'Company.XYZ.Services.XYZService';
  defPrt  = 'BasicHttpBinding_IXYZService';
var
  RIO: THTTPRIO;
begin
  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    // RIO.HTTPWebNode.Proxy := 'server_ip:port';
    // RIO.HTTPWebNode.Username := 'username';
    // RIO.HTTPWebNode.Password := 'password';

    Result := (RIO as ISSOService);
    if UseWSDL then
    begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end; 
```

我需要通过身份验证代理服务器访问该服务。我添加了上面显示的 3 行，当我取消注释它们时，我无法连接。THTTPRio 的帮助状态...

> 如果您需要使用代理服务器，或者如果服务器需要身份验证，请使用作为 HTTPWebNode 属性值的 THTTPReqResp 对象的属性来提供必要的信息。

我已经这样做了，但是当我尝试使用我的服务时，会引发 ESOAPHTTPException 并显示消息......

```
Unauthorized (407) - 'https://server/XYZService.svc' 
```

我偶然发现这篇文章说在设置 WSDLLocation、服务和端口后设置代理设置，我尝试过但没有成功。

[http://www.delphigroups.info/2/10/555621.html](http://www.delphigroups.info/2/10/555621.html)

我也没有在定义 USE_INDY 的情况下进行构建。我的服务使用 SSL，所以我使用的是 WinInet。

我不确定这种方法有什么问题，因此不胜感激。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:52:17.220

据此[，](http://support.microsoft.com/kb/195650)有两种方法可以为wininet设置代理授权。我没有在 Soap.SOAPHTTPTrans 的源代码中看到任何 HTTP_STATUS_PROXY_AUTH_REQ，因此您可能必须编写自己的此错误处理方式。为此，请设置 THTTPReqResp.OnWinInetError 处理程序并处理 HTTP_STATUS_PROXY_AUTH_REQ 错误代码。

或者您可以尝试捕获 THTTPReqResp 的 OnBeforePost 并使用 base64 编码的登录名和密码对调用 HttpAddRequestHeaders。希望能帮助到你。

# margins - 在 WordPress 的页面模板文件中设置边距——html 和 css？

> ID：11742985
> 
> 赞同：0
> 
> 时间：2012-07-31T14:58:24.787
> 
> 标签：margins

我正在为 WordPress 网站创建页面模板。

在文件 newpagetemplate.php 我目前有这个代码，只有这个代码：

```
 <!DOCTYPE html>
 <html>
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Copywriting for Serious Marketers</title>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta name="keywords" content="copywriting, sales writing, marketing" />
 <meta name="copyright" content="Copyright Richard Clunan. All rights reserved." />
 <meta name="description" content="Advice on copywriting and marketing." />
 <meta name="revisit-after" content="7 days" />
 <?php
 /*
 Template Name: Salespage
 */
 ?>
    <div>
        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
            <?php the_title(); ?>
            <?php the_content(); ?> 
        <?php endwhile; endif; ?>
    </div>
 </head>
 <body>
 <body topmargin="100">
 <body leftmargin="300">
 <body rightmargin="300">
 <body bottommargin="10">
 </body>
 </html> 
```

如果我的理解是正确的，我用来设置边距的值是 html 代码。

而且，如果我的理解是正确的，我可以使用 CSS 代码。这一点，我认为：

```
body {
        margin-top: 100px;
        margin-right: 300px;
        margin-bottom: 10px;
        margin-left: 300px;
    } 
```

如果我只是切换这些代码摘录，新版本不会应用边距。

我需要做什么才能使 CSS 代码正常工作？

一种或其他类型的代码是否可能在不同情况下导致更少的问题，例如在不同的浏览器上显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:06:46.730

您的标记有点超出有效性范围。:) 带有 PHP 循环的 div 应该在 vody 中，并且应该只有一个 body 标签。我建议给你的循环 div 一个 id，然后将其用作 CSS 选择器，如下所示：

```
 <?php
/*
 Template Name: Salespage
 */
?>
<!DOCTYPE html>
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Copywriting for Serious Marketers</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="copywriting, sales writing, marketing" />
<meta name="copyright" content="Copyright Richard Clunan. All rights reserved." />
<meta name="description" content="Advice on copywriting and marketing." />
<meta name="revisit-after" content="7 days" />
<style>
#content
 {
    margin: 100px 300px 10px;
 }
</style>

</head>
<body>
<div id="content">
    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
        <?php the_title(); ?>
        <?php the_content(); ?>
    <?php endwhile; endif; ?>
    </div>
</body>
</html> 
```

# php - PHP MongoDB map减少数据库断言失败

> ID：11742986
> 
> 赞同：2
> 
> 时间：2012-07-31T14:58:30.003
> 
> 标签：php, mongodb, mapreduce

我第一次使用 PHP/MongoDB 进行 Map/Reduce。运行 MapReduce 命令时遇到错误。

我的代码：

```
$map = "function () {".                                                                                                             
"emit(this.topic_id, {re_date:this.date_posted}); " .                                                                     
"}";

$reduce = "function (key, values) {" . 
"var result = {last_post: 0};" .                                                                                                 
"var max = ISODate('1970-01-01T00:00:00Z');" .                                                                             
"values.forEach(function (value) {" .
       "if (max == ISODate('1970-01-01T00:00:00Z')) {" .
           "max = value.re_date;}" .
      "if (max < value.re_date) {max = value.re_date;}});" .    
"result.last_post = max;" .                                                                                   
"return result;"  .                                                                                              
"}";

$mapFunc = new MongoCode($map);
$reduceFunc = new MongoCode($reduce);

$collection = new MongoCollection($db, 'posts');
$command = array(
'mapreduce' => $collection,
'map' => $mapFunc,
'reduce' => $reduceFunc,
"query" => array("topic_id" => "2116"),
"out" => array("merge" => "eventCounts"));

$threadInfo = $db->command($command);

$threadsCollection = $db->selectCollection($threadInfo['result']);

$stats = $statsCollection->find();

foreach ($stats as $stat) {
    echo $stats['_id'] .' Visited ';
    foreach ($stats['value']['types'] as $type => $times) {
        echo "Type $type $times Times, ";
    }
    foreach ($stats['value']['tags'] as $tag => $times) {
        echo "Tag $tag $times Times, ";
    }
    echo "\n";
} 
```

当我运行命令时，我得到了错误：

字段的断言类型错误（mapreduce）3！= 2 assertionCode 13111
errmsg db 断言失败
ok 0

我非常密切地关注了[这里](http://php.net/manual/en/mongodb.command.php)的示例，所以我不确定出了什么问题。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:05:39.090

重要的是要记住，在使用 mapReduce() 时，reduce() 函数的返回值必须与您期望在 reduce() 函数的“values”元素中获得的形状相同——而且，反过来，需要与 emit() 函数发出的形状相同。

给定一个包含以下形式文档的集合：

```
> db.posts.count();
1000
> db.posts.findOne();
{
    "_id" : 0,
    "date_posted" : ISODate("2012-04-04T05:54:44.535Z"),
    "topic_id" : "sierra"
} 
```

以下代码将产生您想要的输出：

```
<?php

$conn = new Mongo("localhost:$port");
$db = $conn->test;
$collection = $db->tst;

$map = new MongoCode(
    "function() { emit( this.topic_id, { last_post: this.date_posted } ); }"
);

$reduce = new MongoCode(
  "function(key, values) { ".
      "var max = ISODate('1970-01-01T00:00:00Z'); ".

      "values.forEach(function(val) { ".
          "if ( max < val.last_post ) max = val.last_post; ".
      "}); ".

      "return {last_post : max}; " .
  "}"
);

$result = $db->command( array(
    "mapreduce" => "posts",
    "map" => $map,
    "reduce" => $reduce,
    "query" => array( "topic_id" => "alpha"), 
    "out" => array( "merge" => "lastPosts")
    )
);
echo "result: "; print_r($result);

$collection = $db->lastPosts;
$cursor = $collection->find()->limit(6);

date_default_timezone_set("UTC");
foreach( $cursor as $doc ) {
    $date = date( "r", $doc['value']['last_post']->sec );
    echo $doc['_id'] . " last visited at " . $date ."\n" ;
}

?> 
```

# c - 通过 USB 端口写入 IMU 冻结

> ID：11742987
> 
> 赞同：1
> 
> 时间：2012-07-31T14:58:35.227
> 
> 标签：c, usb

我有一个 IMU 传感器，我正在尝试通过 USB 端口读取它的数据。我正在使用 ubuntu 11.10 和 Eclipse IDE。使用的语言是 C。为此，我必须向 IMU 发送特定的命令代码并读取结果。我已经这样做了，但我的问题是，当我想在无限循环中从 IMU 读取数据（读取数据任意多次）时，写入函数（我用来向 IMU 发送命令）冻结。即程序执行在写函数中停止。

这是代码：

```
int comport = -1; // Handle COM port
struct termios options;

comport = open("/dev/ttyACM0", O_RDWR | O_NOCTTY | O_NDELAY);

fcntl(comport, F_SETFL, 0);

//Get the current options for the port...
tcgetattr(comport, &options);

cfsetispeed(&options, B115200);
cfsetospeed(&options, B115200);

options.c_cflag |= CS8;
options.c_oflag &= ~OPOST; //raw output

//Enable the receiver and set local mode...
options.c_cflag |= (CLOCAL | CREAD);

//Set the new options for the port...
tcsetattr(comport, TCSANOW, &options);

//read compass 0x23
char command[] = {0xF7, 0x23, 0x23};

while(1)
{
bytes_written = write(comport, command, 3);

if(bytes_written == -1)
{
        printf("\nsending command to IMU failed!");
        //...
}
else if(bytes_written == 3)
{
  //sending command OK

  bytes_read = read(comport,  // Handle
                    INBUFFER, // Incoming data
                12        // Number of bytes to read
                );
}
} //end while(1) 
```

# javascript - javascript getElementsByName 不适用于 div

> ID：11742990
> 
> 赞同：0
> 
> 时间：2012-07-31T14:58:49.267
> 
> 标签：javascript

我不能使用身份证

```
 <javascript>
divs = document.getElementsByName("mydiv");
console.log('length: ' + divs.length);

<body>

<div name='mydiv'>foo</div>
<div name='mydiv'>bar</div>
</body> 

```

控制台：0

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T15:00:00.743

元素没有`name`属性。`div`

编写[有效](http://validator.w3.org/)的 HTML 并改用一个类（使用[`getElementsByClassName`](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)）。

# android - 如果服务绑定了另一个服务，则服务不会停止

> ID：11742992
> 
> 赞同：1
> 
> 时间：2012-07-31T14:58:53.567
> 
> 标签：android, android-service

我有一个`Activity`（假设是 A）和两个`Service`s（S1 和 S2）。这是怎么回事：

1.  A 以 S1 开头`startService()`
2.  S1 绑定到 S2（在`onCreate()`using 中`bindService()`）
3.  A 停止 S1（带`stopService()`）
4.  S1 和 S2 仍处于启动状态。为什么？

我读到在上述情况下，S1 将等待绑定到它的所有服务（如 S2）解除绑定。但我想在 S1 `onDestroy()`( `A.stopService(S1)`-> `S1.onDestroy(){ unbind(S2) }`) 中停止 S2。我怎么能那样做？

# vba - 如何使用 Excel VBA 四舍五入到一定数量的有效数字？

> ID：11742994
> 
> 赞同：0
> 
> 时间：2012-07-31T14:58:55.503
> 
> 标签：vba, excel, excel-2010

**编辑：这部分解决了！**

所以我在一个我正在做的程序中有一堆计算，而且数字变得太长了，以至于我得到了溢出错误。它是由一个 50 位数字除以另一个 50 位数字之类的结果产生的。我需要一种将特定数字四舍五入到一定数量的有效数字的方法。

这里有更多信息。首先，我将四舍五入的所有数字将始终小于 1。数字可以小到 1E-50。我只关心前 10 位左右的有效数字。在继续下一个计算之前，我只需要一种方法将其四舍五入到大约 10 sig figs，以防止溢出错误。那，并且有一个数字达到 50 个数字是非常没用的。

我在想也许可以逐个数字地循环遍历数字？当数字等于 0 时，该程序可以将 1 加到计数器上，然后在遇到除零以外的任何值时跳出循环。然后下一步可以将数字截断到该计数器加上我想要的许多有效数字。

例如，对于 .000001234567812345678。它将返回 5 个零。如果我想要十个有效数字，我会做五 + 十 = 15。然后程序将只保留小数点后的前 15 位数字，因此该数字将被截断为 0.000001234567812。

另一个想法可能是使用日志。那么新数字的幂将是有效数字前面的零的数量。

我不知道的是，首先，如何逐位遍历一个数字，并检查每个数字是否为零。我也不知道如何将数字截断为一定数量的数字。

任何帮助将不胜感激！

**编辑：这部分没有解决。**

这么快再发一个帖子我会感觉很糟糕，所以我要在这里问这个问题。如果20分钟左右没有回复，也许我会再发一个帖子。为什么这不起作用？

```
Sub Rounding()
    Tracker = 0
    For i = 1 To 10
        Tracker = Tracker + 1
        Cells(1, Tracker) = Rnd
        Cells(1, Tracker) = Application.Evaluate("=Round(Cells(1, Tracker), 4 - (Int(Log(Cells(1,Tracker))) + 1))")
    Next
    Columns("A:J").EntireColumn.AutoFit
End Sub 
```

我在每个单元格中不断收到错误 #NAME?。这应该将每个数字四舍五入到四位有效数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:03:49.070

假设您的值在 A2 中，请尝试以下任一方法：

```
=ROUND(A2, 3-(INT(LOG(A2))+1)) 
```

或者

```
=ROUND(A2,3-LEN(INT(A2))) 
```

取自[这里](http://uk.answers.yahoo.com/question/index?qid=20071208084527AApV4c4)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:06:22.807

当已经有一个功能可以满足您的需求时，为什么还要循环呢？

```
Sub Sample()
    Dim someNumber As Double

    '~~> .000001234567812345678
    someNumber = 1.23456781234568E-06

    '~~> This will give you .000001234567812
    Debug.Print Round(someNumber, 15)
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:14:20.123

我发现在 excel 工作表中，可以使用： =ROUND(A2, 3-(INT(LOG(A2))+1))

但在 VBA 中，代码变为： =Round(Range("A2"), 3-(Int(Log(Range("A2"))/log(10#))+1))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T14:06:08.993

如果 3-(Int(Log(Range("A2"))/log(10#))+1)) 为负数（即如果小数点前的有效数字比您希望四舍五入的多号）。另一种选择是

```
Public Function round_sigfig(ByVal myval As Double, ByVal fignum As Integer) As Double
factor = 10 ^ (fignum - (Int(Log(myval) / Log(10#))) - 1)
round_sigfig = Round(myval * factor, 0) / factor
End Function 
```

# groovy - 如何在 SoapUI 中将全局类定义为 groovy 脚本？

> ID：11742995
> 
> 赞同：6
> 
> 时间：2012-07-31T14:58:56.573
> 
> 标签：groovy, soapui

我想在一个 groovy 脚本中定义一个类，我可以通过 SoapUI 中的其他 groovy 脚本重用它。

我已经尝试在 TestSuite 属性中定义我的类，但它不起作用。**我想避免在 JAR 中定义类，**因为我们在团队中工作，每个人都必须在他们的 SoapUI 中导入 JAR 才能运行我的测试。我使用 SoapUI 3.6.1

这是我的 TestSuite 的制作方法：

```
TestSuite
  TestCase
    TestSteps
       Init         (Groovy Script)
       GetResponse1 (Test Request)
       Test1        (Groovy Script)
       GetResponse2 (Test Request)
       Test2        (Groovy Script) 
```

为了简化我的测试，我在“Test1”中定义了一个类，我想在“Test2”中重用这个类。所以理想情况下，我会在“Init”中定义该类，并且任何其他 groovy 脚本都可以访问它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-22T09:51:11.423

基于 [@Abhey Rathore](https://stackoverflow.com/users/3380694/abhey-rathore)的链接，这里是如何在 SoapUI 的 groovy 脚本中定义一个全局类：

### 第一步：声明全局类

*   创建一个名为`MyRepository`
*   在这个项目下创建一个***禁用***的TestSuite，称为`lib`
*   在这个测试套件下创建一个名为`MyClass`
*   在这个测试用例下创建一个名为`class`

您的项目树应如下图所示：
[![用于在 SoapUI 中声明全局类的项目树](../Images/715d5dfbfff6eb2fd7665e15c4554ee8.png)](https://i.stack.imgur.com/sfHOc.png)

### 第二步：编写全局类代码

在名为 的 groovy 脚本`class`中，复制并粘贴以下代码：

```
class MyClass {
     // The three following fields are MANDATORY
     def log
     def context
     def testRunner

     // The constructor below is MANDATORY
     def MyClass(logIn, contextIn, testRunnerIn) {
        this.log = logIn
        this.context = contextIn
        this.testRunner = testRunnerIn
     }

     def myMethod() {
        this.log.info 'Hello World!'
     }
}

// Other scripts elsewhere in SoapUI will access the reused class through their context
context.setProperty( "MyClass", new MyClass(log, context, testRunner) ) 
```

### 第三步：导入全局类

在任何项目中，您都可以使用以下代码片段导入全局类：

```
// Import the class
def currentProject = testRunner.testCase.testSuite.project
currentProject
    .testSuites["lib"]
       .testCases["MyClass"]
          .testSteps["class"]
             .run(testRunner, context)

// Now use it
context.MyClass.myMethod() 
```

**SoapUI 5.2.1**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-04T20:01:52.300

试试这个，我想会帮助你重用代码。

[http://forum.soapui.org/viewtopic.php?t=15744](http://forum.soapui.org/viewtopic.php?t=15744)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T16:42:17.823

我很确定您必须创建一个 JAR 文件并将其放在 \bin\ext 中。

SoapUI 将在重新启动时自动获取它（您应该在启动内容中看到它）。

您基本上只需创建一个 Java 或 Groovy 项目，将其导出（使用 Eclipse），它就可以工作了。SoapUI 可能会覆盖您的依赖项，但如果没有，您也可以添加这些 JAR（比创建可运行的 JAR 更安全，因为 SoapUI 可能使用您使用的不同版本）。

如果您需要帮助，请发布相关问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-11T02:52:42.723

将此写入您的项目的加载脚本，然后重新加载您的项目或运行它。

```
com.eviware.soapui.support.ClasspathHacker.addFile( project.context.expand('${projectDir}') ) 
```

运行后，您现在可以将 .groovy 文件放入与您的 soapui 项目 xml 相同的文件夹中。另外，不需要编译任何东西。

例如在 MyClass.groovy 中：

```
class MyClass {String name} 
```

您可以在所有其他脚本中照常导入这些类：

```
import MyClass
assert new MyClass(name:"me") instanceof MyClass 
```

唯一需要注意的是，您的加载脚本（设置类路径的那个）不能有这些导入，因为脚本将无法编译。如果您想在项目加载脚本期间导入某些内容，只需让您的加载脚本“评估”另一个 groovy 脚本（换句话说，运行它），您可以在其中使用导入：

```
evaluate (new File (project.context.expand('${projectDir}') + 'myProjectLoadScript.groovy'))

//in myProjectLoadScript.groovy:
import MyClass
/* Do things using MyClass... */ 
```

这对我来说似乎是最简单的方法，所以我不确定为什么在网上其他地方找不到这个答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-22T16:03:29.397

在 SoapUI 5.3.0 中，您可以使用可以设置和获取上下文变量的属性。该变量在脚本断言片段中可用。

例如： `context.setProperty("prop", "value");`

从不同的测试脚本中，您可以通过以下方式获取值： `context.getProperty("prop");`

当您将属性定义为测试套件的一个步骤或作为标题中字段的值时，您可以使用该属性。你可以这样做`${=context.getProperty("prop");}`

# bash - 是否可以将 getopts 与位置参数混合？

> ID：11742996
> 
> 赞同：82
> 
> 时间：2012-07-31T14:58:57.307
> 
> 标签：bash, shell, parameters

我想设计一个 shell 脚本作为几个脚本的包装器。我想指定要`myshell.sh`使用`getopts`的参数，并将其余参数以相同的顺序传递给指定的脚本。

如果`myshell.sh`执行如下：

```
myshell.sh -h hostname -s test.sh -d waittime param1 param2 param3

myshell.sh param1 param2 -h hostname param3 -d waittime -s test.sh

myshell.sh param1 -h hostname -d waittime -s test.sh param2 param3 
```

以上所有内容都应该可以称为

```
test.sh param1 param2 param3 
```

**是否可以使用中的选项参数** `myshell.sh` **并将剩余参数发布到底层脚本？**

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-11-15T15:04:13.007

我想做一些类似于OP的事情，我在[这里](https://web.archive.org/web/20130927000512/http://www.devhands.com/2010/01/handling-positional-and-non-positional-command-line-arguments-from-a-shell-script/)和[这里找到了我需要的相关信息](https://web.archive.org/web/20170203212120/http://www.ibm.com/developerworks/opensource/library/l-bash-parameters/index.html)

本质上，如果您想做类似的事情：

```
script.sh [options] ARG1 ARG2 
```

然后让你的选择是这样的：

```
while getopts "h:u:p:d:" flag; do
case "$flag" in
    h) HOSTNAME=$OPTARG;;
    u) USERNAME=$OPTARG;;
    p) PASSWORD=$OPTARG;;
    d) DATABASE=$OPTARG;;
esac
done 
```

然后你可以得到你的位置参数是这样的：

```
ARG1=${@:$OPTIND:1}
ARG2=${@:$OPTIND+1:1} 
```

更多信息和详细信息可通过上面的链接获得。

希望有帮助！！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-10-22T10:20:30.057

混合 opts 和 args ：

```
ARGS=""
echo "options :"
while [ $# -gt 0 ]
do
    unset OPTIND
    unset OPTARG
    while getopts as:c:  options
    do
    case $options in
            a)  echo "option a  no optarg"
                    ;;
            s)  serveur="$OPTARG"
                    echo "option s = $serveur"
                    ;;
            c)  cible="$OPTARG"
                    echo "option c = $cible"
                    ;;
        esac
   done
   shift $((OPTIND-1))
   ARGS="${ARGS} $1 "
   shift
done

echo "ARGS : $ARGS"
exit 1 
```

结果：

```
bash test.sh  -a  arg1 arg2 -s serveur -c cible  arg3
options :
option a  no optarg
option s = serveur
option c = cible
ARGS :  arg1  arg2  arg3 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2020-08-15T00:08:12.207

## myshell.sh：

```
#!/bin/bash

script_args=()
while [ $OPTIND -le "$#" ]
do
    if getopts h:d:s: option
    then
        case $option
        in
            h) host_name="$OPTARG";;
            d) wait_time="$OPTARG";;
            s) script="$OPTARG";;
        esac
    else
        script_args+=("${!OPTIND}")
        ((OPTIND++))
    fi
done

"$script" "${script_args[@]}" 
```

## 测试.sh：

```
#!/bin/bash
echo "$0 $@" 
```

## 测试 OP 的案例：

```
$ PATH+=:.  # Use the cases as written without prepending ./ to the scripts
$ myshell.sh -h hostname -s test.sh -d waittime param1 param2 param3
./test.sh param1 param2 param3
$ myshell.sh param1 param2 -h hostname param3 -d waittime -s test.sh
./test.sh param1 param2 param3
$ myshell.sh param1 -h hostname -d waittime -s test.sh param2 param3
./test.sh param1 param2 param3 
```

## 这是怎么回事：

`getopts`如果遇到位置参数将失败。如果将其用作循环条件，则只要位置参数出现在选项之前，循环就会提前中断，就像在两个测试用例中所做的那样。

因此，只有在处理完所有参数后，此循环才会中断。如果`getopts`无法识别某些东西，我们只是假设它是一个位置参数，并在手动递增`getopts`计数器的同时将其填充到一个数组中。

## 可能的改进：

如所写，子脚本不能接受选项（仅位置参数），因为`getopts`在包装脚本中会吃掉这些选项并打印错误消息，同时将任何参数视为位置参数：

```
$ myshell.sh param1 param2 -h hostname -d waittime -s test.sh -a opt1 param3
./myshell.sh: illegal option -- a
./test.sh param1 param2 opt1 param3 
```

如果我们知道子脚本只能接受位置参数，那么`myshell.sh`可能应该在无法识别的选项上停止。这可以像在`case`块末尾添加默认的最后一个案例一样简单：

```
 \?) exit 1;; 
```

```
$ myshell.sh param1 param2 -h hostname -d waittime -s test.sh -a opt1 param3
./myshell.sh: illegal option -- a 
```

如果子脚本需要接受选项（只要它们不与 中的选项冲突`myshell.sh`），我们可以`getopts`通过在选项字符串前面加上冒号来切换到静默错误报告：

```
 if getopts :h:d:s: option 
```

然后我们将使用默认的最后一种情况将任何无法识别的选项填充到`script_args`：

```
 \?) script_args+=("-$OPTARG");; 
```

```
$ myshell.sh param1 param2 -h hostname -d waittime -s test.sh -a opt1 param3
./test.sh param1 param2 -a opt1 param3 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-31T15:21:19.687

`getopts`不会解析`param1`和`-n`选项的组合。

像其他人一样将 param1-3 放入选项中会更好。

此外，您可以使用现有的库，例如[shflags](http://github.com/kward/shflags)。它非常智能并且易于使用。

最后一种方法是编写自己的函数来解析参数而不使用 getopts，只需通过`case`构造迭代所有参数。这是最困难的方法，但它是完全符合您的期望的唯一方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-31T20:48:48.753

我想出了一种`getopts`可以扩展到真正混合选项和位置参数的方法。`getopts`这个想法是在调用和分配找到的任何位置参数之间交替`n1`，`n2`等等`n3`：

```
parse_args() {
    _parse_args 1 "$@"
}

_parse_args() {
    local n="$1"
    shift

    local options_func="$1"
    shift

    local OPTIND
    "$options_func" "$@"
    shift $(( OPTIND - 1 ))

    if [ $# -gt 0 ]; then
        eval test -n \${n$n+x}
        if [ $? -eq 0 ]; then
            eval n$n="\$1"
        fi

        shift
        _parse_args $(( n + 1 )) "$options_func" "$@"
    fi
} 
```

然后在 OP 的情况下，您可以像这样使用它：

```
main() {
    local n1='' n2='' n3=''
    local duration hostname script

    parse_args parse_main_options "$@"

    echo "n1 = $n1"
    echo "n2 = $n2"
    echo "n3 = $n3"
    echo "duration = $duration"
    echo "hostname = $hostname"
    echo "script   = $script"
}

parse_main_options() {
    while getopts d:h:s: opt; do
        case "$opt" in
            d) duration="$OPTARG" ;;
            h) hostname="$OPTARG" ;;
            s) script="$OPTARG"   ;;
        esac
    done
}

main "$@" 
```

运行它显示输出：

```
$ myshell.sh param1 param2 -h hostname param3 -d waittime -s test.sh
n1 = param1
n2 = param2
n3 = param3
duration = waittime
hostname = hostname
script   = test.sh 
```

只是一个概念证明，但也许它对某人有用。

**注意：**如果一个使用的函数`parse_args`调用另一个使用的函数`parse_args` **并且**外部函数声明了 eg `local n4=''`，但内部函数没有声明**并且**4 个或更多位置参数被传递给内部函数，则存在一个问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-03T02:41:52.403

只是混搭了一个 quickie，它可以轻松处理选项和位置参数的混合（在 $@ 中只留下位置参数）：

```
#!/bin/bash
while [ ${#} -gt 0 ];do OPTERR=0;OPTIND=1;getopts "p:o:hvu" arg;case "$arg" in
        p) echo "Path:   [$OPTARG]" ;;
        o) echo "Output: [$OPTARG]" ;;
        h) echo "Help"              ;;
        v) echo "Version"           ;;
    \?) SET+=("$1")                                           ;;
    *) echo "Coding error: '-$arg' is not handled by case">&2 ;;
esac;shift;[ "" != "$OPTARG" ] && shift;done
[ ${#SET[@]} -gt 0 ] && set "" "${SET[@]}" && shift

echo -e "=========\nLeftover (positional) parameters (count=$#) are:"
for i in `seq $#`;do echo -e "\t$i> [${!i}]";done 
```

样本输出：

```
[root@hots:~]$ ./test.sh 'aa bb' -h -v -u -q 'cc dd' -p 'ee ff' 'gg hh' -o ooo
Help
Version
Coding error: '-u' is not handled by case
Path:   [ee ff]
Output: [ooo]
=========
Leftover (positional) parameters (count=4) are:
        1> [aa bb]
        2> [-q]
        3> [cc dd]
        4> [gg hh]
[root@hots:~]$ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-06T05:46:45.333

`getopts`您可以直接实现自己的 bash 参数解析器，而不是使用。以此为例。它可以同时处理名称和位置参数。

```
#!/bin/bash

function parse_command_line() {
    local named_options;
    local parsed_positional_arguments;

    yes_to_all_questions="";
    parsed_positional_arguments=0;

    named_options=(
            "-y" "--yes"
            "-n" "--no"
            "-h" "--help"
            "-s" "--skip"
            "-v" "--version"
        );

    function validateduplicateoptions() {
        local item;
        local variabletoset;
        local namedargument;
        local argumentvalue;

        variabletoset="${1}";
        namedargument="${2}";
        argumentvalue="${3}";

        if [[ -z "${namedargument}" ]]; then
            printf "Error: Missing command line option for named argument '%s', got '%s'...\\n" "${variabletoset}" "${argumentvalue}";
            exit 1;
        fi;

        for item in "${named_options[@]}";
        do
            if [[ "${item}" == "${argumentvalue}" ]]; then
                printf "Warning: Named argument '%s' got possible invalid option '%s'...\\n" "${namedargument}" "${argumentvalue}";
                exit 1;
            fi;
        done;

        if [[ -n "${!variabletoset}" ]]; then
            printf "Warning: Overriding the named argument '%s=%s' with '%s'...\\n" "${namedargument}" "${!variabletoset}" "${argumentvalue}";
        else
            printf "Setting '%s' named argument '%s=%s'...\\n" "${thing_name}" "${namedargument}" "${argumentvalue}";
        fi;
        eval "${variabletoset}='${argumentvalue}'";
    }

    # https://stackoverflow.com/questions/2210349/test-whether-string-is-a-valid-integer
    function validateintegeroption() {
        local namedargument;
        local argumentvalue;

        namedargument="${1}";
        argumentvalue="${2}";

        if [[ -z "${2}" ]];
        then
            argumentvalue="${1}";
        fi;

        if [[ -n "$(printf "%s" "${argumentvalue}" | sed s/[0-9]//g)" ]];
        then
            if [[ -z "${2}" ]];
            then
                printf "Error: The %s positional argument requires a integer, but it got '%s'...\\n" "${parsed_positional_arguments}" "${argumentvalue}";
            else
                printf "Error: The named argument '%s' requires a integer, but it got '%s'...\\n" "${namedargument}" "${argumentvalue}";
            fi;
            exit 1;
        fi;
    }

    function validateposisionaloption() {
        local variabletoset;
        local argumentvalue;

        variabletoset="${1}";
        argumentvalue="${2}";

        if [[ -n "${!variabletoset}" ]]; then
            printf "Warning: Overriding the %s positional argument '%s=%s' with '%s'...\\n" "${parsed_positional_arguments}" "${variabletoset}" "${!variabletoset}" "${argumentvalue}";
        else
            printf "Setting the %s positional argument '%s=%s'...\\n" "${parsed_positional_arguments}" "${variabletoset}" "${argumentvalue}";
        fi;
        eval "${variabletoset}='${argumentvalue}'";
    }

    while [[ "${#}" -gt 0 ]];
    do
        case ${1} in
            -y|--yes)
                yes_to_all_questions="${1}";
                printf "Named argument '%s' for yes to all questions was triggered.\\n" "${1}";
                ;;

            -n|--no)
                yes_to_all_questions="${1}";
                printf "Named argument '%s' for no to all questions was triggered.\\n" "${1}";
                ;;

            -h|--help)
                printf "Print help here\\n";
                exit 0;
                ;;

            -s|--skip)
                validateintegeroption "${1}" "${2}";
                validateduplicateoptions g_installation_model_skip_commands "${1}" "${2}";
                shift;
                ;;

            -v|--version)
                validateduplicateoptions branch_or_tag "${1}" "${2}";
                shift;
                ;;

            *)
                parsed_positional_arguments=$((parsed_positional_arguments+1));

                case ${parsed_positional_arguments} in
                    1)
                        validateposisionaloption branch_or_tag "${1}";
                        ;;

                    2)
                        validateintegeroption "${1}";
                        validateposisionaloption g_installation_model_skip_commands "${1}";
                        ;;

                    *)
                        printf "ERROR: Extra positional command line argument '%s' found.\\n" "${1}";
                        exit 1;
                        ;;
                esac;
                ;;
        esac;
        shift;
    done;

    if [[ -z "${g_installation_model_skip_commands}" ]];
    then
        g_installation_model_skip_commands="0";
    fi;
} 
```

您可以将此函数称为：

```
#!/bin/bash
source ./function_file.sh;
parse_command_line "${@}"; 
```

使用示例：

```
./test.sh as 22 -s 3
Setting the 1 positional argument 'branch_or_tag=as'...
Setting the 2 positional argument 'skip_commands=22'...
Warning: Overriding the named argument '-s=22' with '3'... 
```

参考：

1.  [example_installation_model.sh.md](https://gist.github.com/evandrocoan/c101d2a38af470578e2e7aab9323e7b6)
2.  [检查正确数量的参数](https://stackoverflow.com/questions/4341630/checking-for-the-correct-number-of-arguments)
3.  [https://unix.stackexchange.com/questions/129391/passing-named-arguments-to-shell-scripts](https://unix.stackexchange.com/questions/129391/passing-named-arguments-to-shell-scripts)
4.  [如何在 bash 中使用 getopts 的示例](https://stackoverflow.com/questions/16483119/an-example-of-how-to-use-getopts-in-bash)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-31T22:30:20.047

unix 选项处理有一些标准，在 shell 编程中，`getopts`这是执行它们的最佳方式。几乎所有现代语言（perl、python）都有`getopts`.

这只是一个简单的例子：

```
command [ options ] [--] [ words ] 
```

1.  每个选项必须以破折号开头`-`，并且必须由单个字符组成。

2.  GNU 项目引入了长选项，以两个破折号开头`--`，然后是一个完整的单词`--long_option`. AST KSH 项目有一个 getopts，它也支持长选项，*以及*以单个破折号开头的长选项`-`，如`find(1)`.

3.  选项可能会或可能不会期望参数。

4.  任何不以破折号 , 开头的单词`-`都将结束选项处理。

5.  `--`必须跳过该字符串并将结束选项处理。

6.  任何剩余的参数都保留为位置参数。

开放组有一个部分[`Utility Argument Syntax`](http://pubs.opengroup.org/onlinepubs/009604499/basedefs/xbd_chap12.html)

Eric Raymond 的 The Art of Unix Programming[有一章介绍](http://www.catb.org/esr/writings/taoup/html/ch10s05.html)了传统的 unix 选项字母的选择及其含义。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-02-14T10:38:30.457

您可以尝试这个技巧：在使用 optargs 进行 while 循环之后，只需使用此代码段

```
#shift away all the options so that only positional agruments
#remain in $@

for (( i=0; i<OPTIND-1; i++)); do
    shift
done

POSITIONAL="$@" 
```

但是，这种方法有一个错误：

也许它有更多的错误......

查看整个示例：

```
while getopts :abc opt; do
    case $opt in
        a)
        echo found: -a
        ;;
        b)
        echo found: -b
        ;;
        c)
        echo found: -c
        ;;
        \?) echo found bad option: -$OPTARG
        ;;
    esac
done

#OPTIND-1 now points to the first arguments not beginning with -

#shift away all the options so that only positional agruments
#remain in $@

for (( i=0; i<OPTIND-1; i++)); do
    shift
done

POSITIONAL="$@"

echo "positional: $POSITIONAL" 
```

输出：

```
[root@host ~]# ./abc.sh -abc -de -fgh -bca haha blabla -m -c
found: -a
found: -b
found: -c
found bad option: -d
found bad option: -e
found bad option: -f
found bad option: -g
found bad option: -h
found: -b
found: -c
found: -a
positional: haha blabla -m -c 
```

# ruby-on-rails - 使用 ActiveAdmin 自定义索引视图

> ID：11742999
> 
> 赞同：2
> 
> 时间：2012-07-31T14:59:04.520
> 
> 标签：ruby-on-rails, views, activeadmin

我正在开发一个带有 ActiveAdmin 后端的应用程序，并且花了很长时间让它呈现一个相当简单的自定义索引视图。

我有许多“请求”记录，其中包含一个电子邮件地址和一个 book_id，需要将它们分组。我做到了：

```
ActiveAdmin.register Request do
  controller do
    def index
      @requests = Requests.group(:book_id).page
    end
  end
end 
```

但这导致了一个错误：ActiveSupport::OrderedHash can't be coerced into Fixnum

我可以在 app/admin/requests/index.html.erb 中创建自己的自定义视图，但随后我失去了带有管理菜单等的标准 AA 布局，并且找不到包含它的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:12:31.463

我最终使用他们的 Google Group 中描述的技术来做到这一点，您只需将用户推到自定义操作：

[https://groups.google.com/d/msg/activeadmin/YgMzeYBXRno/GZ01Epyq5lcJ](https://groups.google.com/d/msg/activeadmin/YgMzeYBXRno/GZ01Epyq5lcJ)

哈基，是的。我认为这是一个非常需要的功能，因此希望有人可以分叉并添加对索引视图的支持，以获取包含自定义内容的块。