# StackOverflow 问答 12254000-12254999

# c++ - 具有三元的简单 C++11 constexpr 阶乘超过最大模板深度

> ID：12254003
> 
> 赞同：4
> 
> 时间：2012-09-03T21:06:24.357
> 
> 标签：c++, templates, recursion, c++11, constexpr

如果我使用专业化编写编译时阶乘函数，则以下代码就足够了，并且将正确提供 120 作为结果`fact1<5>()`：

```
template <size_t N>
constexpr size_t fact1() { return N*fact1<N-1>(); }

template <>
constexpr size_t fact1<0>() { return 1; } 
```

但是，对于单个函数体和三元运算符，如下面的代码所示，G++ 4.7 和 Clang++ 3.2 都超过了它们的最大模板实例化深度。似乎`1`永远不会从`fact2`. 为什么这个定义`fact2<5>()`不返回 120？

```
template <size_t N>
constexpr size_t fact2() { return N==0 ? 1 : N*fact2<N-1>(); } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T21:46:49.423

这里的问题是，无论如何，`fact2<N-1>`总是*会*被实例化（即使是非执行路径也需要编译，参见 Effective C++，我认为 Item 47 或 48）。如果您不在最后，您需要以某种方式使其仅实例化下一个函数。一种方法是只说“螺丝模板”并`constexpr`按照@NicolBolas 在他的评论中所说的通常方式进行。

另一个将使用在[这个类似问题](https://stackoverflow.com/q/12237126/500104)中使用的技术之一。

# android - 可以在移动浏览器谷歌地图 api 上获取用户位置吗？

> ID：12254006
> 
> 赞同：1
> 
> 时间：2012-09-03T21:06:32.890
> 
> 标签：android, iphone, google-maps

当用户（通过他们的移动浏览器，而不是应用程序或他们自己的谷歌地图）在手机上访问您的网站时，是否可以使用谷歌地图 api 获取用户位置？你的网站有谷歌地图和地理位置。如果它与其他操作系统不同，我现在只对 android、iphone 感兴趣。

# xml - 如何将 Blogger XML 文件转换为 WXR 文件？

> ID：12254015
> 
> 赞同：6
> 
> 时间：2012-09-03T21:07:40.410
> 
> 标签：xml, wordpress, blogger, file-conversion

我有一个 47.9MB 的 Blogger 导出文件，我需要将其导入 WordPress（自托管）。通常，我使用 Google App 工具来转换这些文件，然后将它们分成更小的部分以导入 WP。

但是，我不断收到此错误：

> 413 错误：请求实体太大 您的客户端发出的请求太大。

是否有其他应用程序可以用于如此大的文件或一些关于如何手动将 XML 文件转换为 WXR 文件的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:15:09.220

你真的需要这样做吗 - 根据[Wordpress Codex](http://codex.wordpress.org/Importing_Content#Blogger)，你可以直接从博主导入

上面链接中的相关位说：

> WordPress 2.2 及以上版本的用户可以从 Blogger 导入。早期版本无法从 Blogger 导入，因为 Google 发布了“新 Blogger”，使所有旧导入器无效。只有 WordPress 2.2 及更高版本支持“New Blogger”。
> 
> 如果您还没有，那么您必须在 Blogger 上使用新 Blogger 和 Google 帐户。如果您仍在使用旧 Blogger，则导入器将无法工作，但有一个有用的在线工具可以将旧版 Blogger Atom 导出转换为 Wordpress WXR 导出文件。
> 
> 要启动 Blogger 导入器，请转到工具 → 导入 → Blogger。对于 WordPress 2.0.2 到 2.6.5 版本，请转到管理 → 导入 → Blogger。

# mysql - solr 中的多值字段仅返回一项

> ID：12254025
> 
> 赞同：0
> 
> 时间：2012-09-03T21:09:05.903
> 
> 标签：mysql, solr, multivalue

我是 solr 的新手，
我有一张这样的桌子

```
id内场身体
---------------------------------------------
1 ValX 文章1-正文
1 ValY Article1-正文
1 ValZ 文章1-正文
2 ValW文章2-正文
……

```

我的mysql查询看起来像

```
select A.id,B.infield, A.body from A inner join B on A.id=B.id;

```

在 schema.xml 我有这个

```
<field indexed="true" multiValued="true" name="infield" stored="true" type="string"/>

```

现在，当我的查询是 * : * 时，我应该得到所有内场，如下所示

```
<str name="id">1</str>
<str name="body">Article1-正文</str>
<arr name="infield">    
   <str>ValX</str>
   <str>值</str>
   <str>ValZ</str>
</arr>

```

**但我得到了这个**

```
<str name="id">1</str>
<str name="body">Article1-正文</str>
<arr name="infield">    
   <str>ValX</str>
</arr>

```

**编辑**
我的 dataconfig.xml 包含：

```
<?xml 版本="1.0" 编码="UTF-8"?>
<数据配置>
  <dataSource autoCommit="true" batchSize="-1" convertType="true" driver="com.mysql.jdbc.Driver" password="pass" url="jdbc:mysql://127.0.0.1/test" 用户="根"/>
  <文档名称="项目">
    <entity name="root" pk="id" preImportDeleteQuery="data_source:10" query="select A.id,B.infield, A.body from A inner join B on A.id=B.id;" 变压器="模板变压器">
      <field column="data_source" 模板="10"/>
      <field column="data_source_type" template="Jdbc"/>
      <field column="data_source_name" template="Test"/>
    </实体>
  </文档>
</dataConfig>

```

知道可能出了什么问题吗？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T07:43:47.603

该查询可能会生成具有相同 ID 的多条记录，因此单独/单独的记录将被覆盖，因为它们具有相同的 ID。
所以你最终只有一个内场值。
对于多值字段，您应该将其作为[返回多个值的子实体](http://wiki.apache.org/solr/DataImportHandler#What_is_a_row.3F)包含在内。

# android - 位置服务在模拟器中有效，但在真正的安卓设备上无效？

> ID：12254029
> 
> 赞同：0
> 
> 时间：2012-09-03T21:09:25.820
> 
> 标签：android

我想获取用户的位置，所以我有这个代码：

```
LocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Register the listener with the Location Manager to receive location updates
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MINIMUM_TIME_BETWEEN_UPDATES,
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, this);

        Log.d("locationManager ", "locationManager ");

        /*
         * try to get last know location
         */
        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);

public void onLocationChanged(Location location) {
    this.location=location; 
```

然后我发送地理修复：

```
geo fix -122.41914 37.77919 
```

它在模拟器中运行良好，但是当我在真实设备上尝试时。它不起作用，我看到设备上的 GPS 图标闪烁。注意：设备上启用了 GPS。

我的问题是：

*   我需要先签署应用程序，还是将其放在 Google Play 上以便应用程序在设备上运行。因为我刚刚通过电子邮件将应用程序发送到设备。

*   你有位置服务工作示例的链接，以便我可以在设备上安装和测试，看看它的行为是否不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:14:26.300

我认为问题在于您的设备可能需要很长时间才能获得 GPS 定位。您可能需要等待几分钟（闪烁的 GPS 图标表示设备正在尝试获取 GPS 定位）。

# python - win32：在孩子的父母的孩子中找不到子窗口

> ID：12254032
> 
> 赞同：0
> 
> 时间：2012-09-03T21:09:55.543
> 
> 标签：python, winapi, pywin32

我有一个 Internet Explorer 页面，它生成了一个弹出窗口。我可以从弹出窗口的句柄中获取父级：

```
>>> child.handle
15208472
>>> win32gui.GetParent(child.handle)
33230502 
```

但我无法使用以下方法找到孩子的句柄`EnumChildWindows`：

```
>>> win32gui.EnumChildWindows(win32gui.GetParent(child.handle), lambda hwnd,p: child_handles.append(hwnd), None)
>>> len(child_handles)
39
>>> child.handle in child_handles
False 
```

我也以递归方式完成了此操作（获取所有孩子的孩子），但仍然没有找到孩子句柄。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:31:46.093

弹出窗口不是子窗口，因此不能用`EnumChildWindows`.

当你打电话时，`win32gui.GetParent`你实际上得到了弹出窗口的“所有者”窗口，但“所有者”和“父”是两个不同的东西。有关更多信息，请参阅[MSDN 条目](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632597%28v=vs.85%29.aspx#parent_owner_handle)。

# django - django get_or_create 返回错误：“元组”对象没有属性

> ID：12254033
> 
> 赞同：22
> 
> 时间：2012-09-03T21:09:58.813
> 
> 标签：django, django-models

我是 django 的新手，我正在尝试使用 get_or_create 模型函数，但即使我的模型中有该属性，我也会收到错误消息

```
AttributeError at /professor/adicionar-compromisso
'tuple' object has no attribute 'dias'
Request Method: POST
Request URL:    http://localhost:8000/professor/adicionar-compromisso
Django Version: 1.4.1
Exception Type: AttributeError
Exception Value:    
'tuple' object has no attribute 'dias'
Exception Location: c:\htdocs\rpv\GerenDisponibilidade\professor\models.py in inserirCompromisso, line 63
Python Executable:  C:\Python27\python.exe
Python Version: 2.7.3
Python Path:    
['c:\\htdocs\\rpv\\GerenDisponibilidade',
 'C:\\Python27\\lib\\site-packages\\distribute-0.6.27-py2.7.egg',
 'C:\\Python27\\lib\\site-packages\\pip-1.1-py2.7.egg',
 'C:\\Python27\\lib\\site-packages\\sphinx-1.1.3-py2.7.egg',
 'C:\\Python27\\lib\\site-packages\\docutils-0.9.1-py2.7.egg',
 'C:\\Python27\\lib\\site-packages\\jinja2-2.6-py2.7.egg',
 'C:\\Python27\\lib\\site-packages\\pygments-1.5-py2.7.egg',
 'C:\\Windows\\system32\\python27.zip',
 'C:\\Python27\\DLLs',
 'C:\\Python27\\lib',
 'C:\\Python27\\lib\\plat-win',
 'C:\\Python27\\lib\\lib-tk',
 'C:\\Python27',
 'C:\\Python27\\lib\\site-packages',
 'C:\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg-info']
Server time:    Seg, 3 Set 2012 17:57:17 -0300 
```

模型

```
class DiaSemana(models.Model):    
DIAS_CHOICES = (
                ("Seg", "Segunda-Feira"),
                ("Ter", "Terça-Feira"),
                ("Qua", "Quarta-Feira"),
                ("Qui", "Quinta-Feira"),
                ("Sex", "Sexta-Feira"),
                ("Sab", "Sábado"),
                ("Dom", "Domingo"),
                )           
dias = models.CharField(max_length=20, choices=DIAS_CHOICES) 
```

在这里我试图搜索以检查是否存在现有值，否则创建新值并保存

```
for diaSemana in diaSemanas:
        d = DiaSemana.objects.get_or_create(dias=diaSemana)
        d.dias = diaSemana;
        d.save() 
        c.save()
        c.diaSemana.add(d); 
```

怎么了？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-03T21:20:53.830

[`get_or_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)不只是返回对象：

> 返回 的元组`(object, created)`，其中 object 是检索或创建的对象， created 是指定是否创建新对象的布尔值。

在您的情况下`d`，已分配此元组而不是您期望的对象，因此您收到属性错误。您可以通过将其更改为来修复您的代码：

```
d, created = DiaSemana.objects.get_or_create(dias=diaSemana) 
```

以下两行对我来说似乎没有必要。上面的`get_or_create`调用确保了`d.dias=diaSemana`，因此无需再次分配它。应该也不需要打电话`save`了。

```
d.dias = diaSemana;
d.save() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-18T16:44:06.637

而不是这个：

```
dias = models.CharField(max_length=20, choices=DIAS_CHOICES) 
```

做：

```
dias = models.CharField(max_length=20, choices=DIAS_CHOICES)[0] 
```

正如@Alasdair 所说，元组中的第一个是对象

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T21:18:42.927

文档清楚地表明 get_or_create 返回 tuple (object, created) - 这正是您看到的错误。 [https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)

# magento - Magento - 结帐网址不刷新

> ID：12254035
> 
> 赞同：0
> 
> 时间：2012-09-03T21:10:26.587
> 
> 标签：magento, checkout

我面临一个非常奇怪的问题。

据我所知，Magento 在结帐时更改了 URL。
从第 1 步到第 5/6 步，当您前进或后退时，URL 会发生变化。或者，如果您使用继续或后退按钮，但是....

在我们的安装中，它始终保持在“checkout/onepage/”...它不会改变。
是否有人有同样的问题，或者有人可能得到提示如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:35:24.660

你的安装没问题！
Magento 结帐的不同步骤没有不同的 URL，因为整个结帐部分是一次加载的（当进入该部分时），并且步骤是用 Ajax 填充的。

如果您仍有任何疑问，请查看[Magento 的演示商店](http://demo.magentocommerce.com/)

# ios - 将消息从数据源对象发送到视图目标 c

> ID：12254036
> 
> 赞同：0
> 
> 时间：2012-09-03T21:10:28.273
> 
> 标签：ios, uiview, datasource, nsmanagedobject

我有一个自定义 uiview 子类，它从作为 nsmanagedobject 的子类的数据源获取它需要显示的数据。nsmanagedobject 子类有什么方法可以保存指向视图的指针？我想这样做，以便视图控制器可以通过询问数据源其视图占用多少空间来获取有关 uiview 帧大小的一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:31:58.900

您所描述的设计中的主要缺陷是您有一个 UIView**直接**与数据对象通信。这违背了[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的基础，很可能你可以通过在这两个元素之间引入一个控制器来实现你需要的任何东西。请详细说明您要计算的帧大小以获得更详细的答案。

# javascript - 为什么控制台不使用输入对象的 `toString` 方法？

> ID：12254038
> 
> 赞同：6
> 
> 时间：2012-09-03T21:10:34.983
> 
> 标签：javascript, console

如果我打开控制台并输入...

```
var f=function(a){
    this.toString=function(){
        return "-->"+a;
    }
},i=new f(5);
i; 
```

...它返回`({toString:(function () {return "-->" + a;})})`。

但如果我进入...

```
var f=function(a){
    this.toString=function(){
        return "-->"+a;
    }
},i=new f(5);
alert(i); 
```

...它发出警报`"-->5"`

这对我来说并不重要，但我更喜欢第一个代码 return `"-->5"`。有没有办法做到这一点，还是故意不使用控制台`toString`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T21:16:07.223

它旨在用于调试，因此告诉您有关对象的所有内容可能很有用。

毕竟，如果你想要调用的结果，`toString()`你会用`i.toString()`or来询问它`"" + i`，但如果这是默认行为，那么就没有办法获得你得到的更深层次的表示。

# image - 没有悬停的CSS3图像过渡

> ID：12254040
> 
> 赞同：1
> 
> 时间：2012-09-03T21:10:39.353
> 
> 标签：image, css, transition

我正在尝试找到一个过渡 CSS 代码来过渡两个图像。我希望第一张图像显示 4 秒钟，然后淡入第二张图像，该图像将在几秒钟内保持不变，然后淡入第一张。现在我没有使用 CSS，我发现大多数 CSS 教程都被格式化为 on :hoover。我希望我的图像不断变化而不需要 :hover 。

我现在使用的 flexi 广告编码是 ans 在 waterfox 和 explorer 中运行良好，但您可以看到在 chrome 中加载的图像闪烁不良。

这是我正在使用的示例。我现在使用的脚本实际上是在 30 幅图像中进行转换，我制作了一些从一张到另一张褪色的图像，这就是为什么它看起来会褪色的原因。我想要某种只需要 2 张图像并每 4 秒淡出一张到下一张的 CSS。

[http://www.vulgarmediaproductions.com/walt/walt.shtml](http://www.vulgarmediaproductions.com/walt/walt.shtml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:05:47.647

您需要为此使用[**关键帧动画**](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)- [**DEMO**](http://dabblet.com/gist/3613962)

HTML：

```
<img src='http://imgsrc.hubblesite.org/hu/db/images/hs-2012-10-a-web.jpg'>
<img src='http://imgsrc.hubblesite.org/hu/db/images/hs-2004-45-a-web.jpg'> 
```

CSS：

```
img {
    position: absolute;
    width : 320px;
    height: 180px;
}
img:last-child { animation: fader 4s infinite alternate; }
@keyframes fader { to { opacity: 0; } } 
```

* * *

**编辑**

如果您的图像具有透明度，那么您需要为它们两个的不透明度设置动画，而不仅仅是顶部的那个。像这样 -[**演示**](http://dabblet.com/gist/3618445)

```
img {
    opacity: 0;
    position: absolute;
    width : 256px;
    height: 256px;
}
img:first-child { animation: fadein 8s infinite alternate; }
img:last-child { opacity: 1; animation: fadeout 8s infinite alternate; }
@keyframes fadein { 50% { opacity: 1; } }
@keyframes fadeout { 50% { opacity: 0; } } 
```

另外，请记住，您必须使用前缀（我没有使用任何前缀，因为 dabblet 包含 -prefix-free 并且这样更容易突出这个想法）：

```
img:first-child {
    -webkit-animation: fadein 8s infinite alternate;  /* Chrome, Safari, Android, Blackberry */
    -moz-animation: fadein 8s infinite alternate; /* FF, FF for Android */
    -o-animation: fadein 8s infinite alternate; /* Opera 12 */
    animation: fadein 8s infinite alternate; /* IE 10, FF 16+, Opera 12.5 */
}
@-webkit-keyframes fadein { 50% { opacity: 1; } }
@-moz-keyframes fadein { 50% { opacity: 1; } }
@-o-keyframes fadein { 50% { opacity: 1; } }
@keyframes fadein { 50% { opacity: 1; } }
/* same for the other set (fadeout) */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:45:42.827

未经测试，只是即时编写，但应该可以工作。如果您在让它工作时遇到任何问题，请告诉我...您可能想使用 FireBug for Firefox 进行调试。它可以帮助您大量使用 CSS、HTML 和 JavaScript。

**CSS3：**

```
.slideShow
{
position: absolute;
left: 0;
top: 0;
-webkit-transition: all 200ms ease-in-out 0s;
-moz-transition: all 200ms ease-in-out 0s;
-ie-transition: all 200ms ease-in-out 0s;
-o-transition: all 200ms ease-in-out 0s;
transition: all 200ms ease-in-out 0s;
}
.slideShowWrapper { position:relative; } 
```

**HTML：**

```
<div class="slideShowWrapper" id="mySlideShow" style="width:400px;height:300px;">
   <div class="slideShow" style="opacity:1.0"> (image 1 goes here) </div>
   <div class="slideShow" style="opacity:0.0"> (image . goes here) </div>
   <div class="slideShow" style="opacity:0.0"> (image . goes here) </div>
   <div class="slideShow" style="opacity:0.0"> (image N goes here) </div>
</div> 
```

**JS：**

```
function ssCycle(_obj)
{
   var _oList=_obj.getElementsByTagName('div');
   for (var _trace=0;_trace<oList.length;_trace++)      
   {
      if(_oList[_trace].getAttribute('style').indexOf('opacity:1.0')>0)
      {
         _oList[_trace].style.opacity='0.0';
         try
         {
            _oList[(_trace+1)].style.opacity='1.0';
         }
         catch(_e)
         {
            _oList[0].style.opacity='1.0';
         }
      }
   }
};
(function(_src){ void(var tmrFunc = "void(ssCycle(document.getElementById("+_src+"));";setInterval(tmrFunc,4000);}).call('mySlideShow'); 
```

# jquery - 如何将“this”与另一个选择器结合起来？

> ID：12254042
> 
> 赞同：1
> 
> 时间：2012-09-03T21:10:39.563
> 
> 标签：jquery

我正在尝试编写一个选择器，它`this`仅在它是锚时才获取对象。我希望它什么也得不到，以防它只是`<a>`标签。

```
$('.link').mouseover(function(){

    $("a", this).css('color','#00F');

}) 
```

`$("a", this).css('color','#00F');`不起作用，但如果我只`this`在查询中留下，就会产生预期的效果。我在示例、博客和文档中可以找到的所有其他选择器都是用于获取子对象 ( `find()` `children()`)、组合两个选择器(with `add()`)，或者除了我正在寻找的东西之外的其他任何东西。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T21:12:30.767

您可以使用该`is()`方法检查是否`$(this).is('a')`，然后做出相应的反应；

```
if ($(this).is('a')) {
    $(this).css('color', '#00F');
} 
```

但也许在这种情况下更好的解决方案是使用该[`filter()`](http://api.jquery.com/filter)方法`$(this).filter('a').css('color','#00F');`

注意，`filter()`过滤*当前*的jQuery对象；所以`$('*').filter('a')`会`a`从所有元素中过滤掉 s 。`$('a', this)`另一方面（等效于`$(this).find('a')`）在 jQuery 对象中搜索与提供的选择器匹配的元素的后代。

# canvas - 我可以在 facebook 中显示我的网站的较小版本以避免滚动吗？

> ID：12254048
> 
> 赞同：-1
> 
> 时间：2012-09-03T21:10:48.177
> 
> 标签：canvas, tabs, facebook-canvas

我使用标签在 facebook 中显示我的网站版本。

我看过很多关于如何设置选项卡以及如何调整画布窗口大小的操作教程。但是..有没有办法缩小出现在画布中的我的网站。

例如。目前我的网站显示在画布页面上，我必须左右滚动以使其宽度达到最大 760px 画布尺寸。

我真的不想重新编写我的 html/css。太多固定宽度的元素等。

有什么方法可以让 facebook 显示我网站的缩小版本，以避免烦人的滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:25:33.963

> 我真的不想重新编写我的 html/css。

但是你应该——不是你的 HTML，而是你的 CSS。

否则，如果您只是在这里寻找“惰性解决方案”，您只能尝试通过在其上使用`zoom`或 CSS3 转换来使浏览器缩小 html 或 body 元素的整个内容——但结果很可能看起来相当可怕。

# php - CodeIgniter 添加页面不起作用

> ID：12254049
> 
> 赞同：0
> 
> 时间：2012-09-03T21:11:05.420
> 
> 标签：php, codeigniter

我接手了一个用 CodeIgniter 编写的项目，这是我以前从未使用过的。我已经在视图/页面中添加了一个名为 features.php 的新文件，并且在互联网上阅读到要使其可访问，我需要在控制器文件中创建一个函数来呈现页面。

我尝试了以下方法：

```
public function features()
{
    $this->render('template', 'pages/features');
} 
```

但是，当我尝试打开 features.php 时，它给了我 404。我该如何解决这个问题？

# 更新 1 - 类

这是控制器的类代码：

```
class Pages extends MY_Controller {

function __construct()
{
    parent::__construct();
    $this->load->model('setting_model', 'setting');
    $this->load->model('order_model', 'order');
    $this->load->model('page_model', 'page');
    $this->load->library('form_validation');
    $this->load->helper(array('inflector', 'string'));
}

public function index()
{
    $settings = $this->setting->get_settings();
    $data['document_price'] = $settings->document_price;
    $this->render('template', 'pages/index', $data); 
}

    //This works fine
public function about_us()
{
    $this->render('template', 'pages/about_us');
}

    //Here is the problem, although it follows the same pattern as about_us()
public function features()
{
    $this->render('template', 'pages/features');
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:16:10.963

当您使用 $this->render 时，我猜您正在使用模板库。我认为你应该使用：

```
public function features()
{
   $this->template->set_template('template');
   $this->template->write_view('pages/features');    
   $this->template->render();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T21:47:37.287

`/views`无法通过键入某些 URL 直接访问其中包含的 php 文件。CodeIgniter 是一个 MVC 框架。这意味着您的 URL 被映射到您的控制器并且控制器调用视图。

封装这个函数的类的名称是什么？请发布整个课程，而不仅仅是`features()`功能，我们可以为您提供帮助。如果您在本地工作，调用控制器的默认映射是：`http://localhost/appname/controller/function/param1/param2/etc`.

该`$this->render()`函数不是普通的 CodeIgniter 语法，您要么继承了使用模板库的项目，要么`render()`控制器类中有兄弟函数。

还要检查您的`config/routes.php`文件并考虑发布它。

如果您想诊断问题，请尝试通过删除对 CodeIgniter 的调用`$this->render()`并改用 CodeIgniter 的本机`$this->load->view('pages/features')`函数来进行精确定位。如果这可行，我们可以确定它是库或`render()`调用。

# javascript - 有什么方法可以停止 Jquery 中的动画（也停止完整的回调函数）

> ID：12254051
> 
> 赞同：2
> 
> 时间：2012-09-03T21:11:17.210
> 
> 标签：javascript, jquery

我认为这个问题与 Jquery 中的队列有关。我们可以使用 clearQueue() 清除队列以停止任何动画，但是清除队列不能停止回调函数考虑这一点

```
$("#sth").animate( { width:'100%' }, 2000, function() {
    $("#sth").css("width","0%");
}); 
```

和

```
$("#sth").clearQueue().css("width","0%"); 
```

能够停止动画并推回宽度。但是，在 2000 毫秒之后，它也会变成 100% 宽度，因为完整的回调函数。无论队列是否存在，该函数都会在 2000 毫秒后调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:25:42.180

来自 jQuery 文档：

> .clearQueue() 从队列中删除所有尚未运行的项目。

和

> .stop() 停止匹配元素上当前正在运行的动画。

尝试使用 .stop() 代替 .clearQueue()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-12T19:07:57.070

调用 stop 函数将停止附加在 sth obj 上的动画

```
function stopSthAnim(){
    $('#sth#).stop(); 
} 
```

你也可以使用完整的回调函数

```
$("#sth").animate( { width:'100%' }, {
        duration:2000,
        complete: function(){
           $('#sth#).stop(); 
        }
    }, function() {
    $("#sth").css("width","0%");
}); 
```

# c++ - 使用 Win32 子类化现有窗口

> ID：12254054
> 
> 赞同：1
> 
> 时间：2012-09-03T21:11:52.823
> 
> 标签：c++, winapi

我目前正在尝试获取 Windows 计算器应用程序的所有用户输入。似乎这样做的方法是使用 Win32 拦截所有用于计算器窗口的键盘和鼠标输入。我在下面的链接中阅读了关于子类化窗口的 MSDN 页面，并对子类化做了一些研究。

我有对窗口进行子类化的语法，但我不确定如何告诉程序我要对哪个窗口进行子类化。

我到目前为止的代码如下所示。我现在的问题是我不确定如何分配变量“hWndEdit”。我对 Win32 编程非常陌生，因此感谢您提供任何帮助。

（链接） [http://msdn.microsoft.com/en-us/library/windows/desktop/ms633570 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633570(v=vs.85).aspx)

```
WNDPROC wpOrigEditProc; 

wpOrigEditProc = (WNDPROC) SetWindowLong(hWndEdit,GWL_WNDPROC,(long) WndEditProc);

LRESULT CALLBACK WndEditProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message) 
        {
        case WM_CHAR:
        case WM_KEYUP:
        case WM_KEYDOWN:
            if (hWnd == hWndEdit)
                return 0;
        break;
        case WM_DESTROY: 
            // Remove the subclass from the edit control. 
            SetWindowLong(hWndEdit, GWL_WNDPROC, (LONG) wpOrigEditProc); 
        break;
        default:
            return CallWindowProc((WNDPROC ) wpOrigEditProc, hWnd, message, wParam, lParam);
        }
    return CallWindowProc((WNDPROC ) wpOrigEditProc, hWnd, message, wParam, lParam);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:15:45.083

要查找窗口，首先使用 Spy++（随 Visual Studio 安装的工具）查找计算器主窗口的类名称和窗口名称。然后，在您的应用程序中，使用[FindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499.aspx) API：

```
hWndEdit = FindWindow(className, windowName); 
```

虽然，我不确定子类化是否是正确的方法，因为计算器窗口不属于您的应用程序。你应该用[hooks](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632589.aspx)做到这一点。

# javascript - 谷歌地图信息窗口为每个标记显示相同的内容

> ID：12254057
> 
> 赞同：2
> 
> 时间：2012-09-03T21:12:04.190
> 
> 标签：javascript, google-maps

我正在处理一个涉及 Google Maps API 和 infowindows 的问题。当我单击一个标记时，会弹出一个信息窗口，我正在尝试制作它，以便在发生这种情况时，该标记的纬度/经度会显示在信息窗口中。在这种情况下，lat/lng 存储在 stop 数组中：

```
<script type="text/javascript"
  src="http://maps.googleapis.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
    var map;
    var marker;
    var infowindow;   //Global infowindow created
    function initialize() {
        var latlng = new google.maps.LatLng(37.784, -122.408);
        var stops = new Array();
        stops = [
     new google.maps.LatLng(37.7655, -122.4525899),
     new google.maps.LatLng(37.7649999, -122.45656),
     new google.maps.LatLng(37.7643, -122.4608199),

     ];
        var myOptions = {
             zoom: 10,
             mapTypeId: google.maps.MapTypeId.ROADMAP,
             center: new google.maps.LatLng(37.7655, -122.4525899)

        };
        map = new google.maps.Map(document.getElementById("content"),
    myOptions);
        infowindow = new google.maps.InfoWindow({   //infowindow options set
            maxWidth: 355
        });

        var i = 0;
        for (i < 0; i < stops.length; i++) {
            marker = new google.maps.Marker({
                position:stops[i],
                map: map,
                title: "Stop Coords: "+ stops[i]
            });
            var len=stops.length;
            popupDirections(marker, len, stops);
        }
    }

    function popupDirections(marker, len,stops) {
        //this function created listener listens for click on a marker
        google.maps.event.addListener(marker, 'click', function () {
            for (var i = 0; i < len; i++)
            { infowindow.setContent("Stop coords: " + stops[i]); } //sets the content of your global infowindow to string "Tests: "
            infowindow.open(map, marker); //then opens the infowindow at the marker
        });
    } 
```

现在，当我将鼠标悬停在每个标记上时，会显示正确的纬度/经度，但是当我单击标记并弹出信息窗口时，我会不断获得停靠点的纬度/经度 [2]。我不确定问题是什么，我对 JS 的了解非常有限，我很幸运在这里找到了一个有用的帖子，展示了如何创建 infowindows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:28:44.560

在我看来，解决您的问题的最佳方法是为每个标记提供自定义对象属性`stopCoords`：

```
for (i < 0; i < stops.length; i++) {
    marker = new google.maps.Marker({
        position: stops[i],
        map: map,
        title: "Stop Coords: " + stops[i],
        stopCoords: stops[i]
    });
    var len = stops.length;
    popupDirections(marker, len, stops);
} 
```

然后，在`popupDirections`函数中，重新引用它（**UPDATE**或`marker.position`改为使用。但重点是，您可以`stopCoords`设置任何您希望的值）。

```
 for (var i = 0; i < len; i++) {
        infowindow.setContent("Stop coords: " + marker.stopCoords);
    } 
```

**演示** [http://jsfiddle.net/yV6xv/580/](http://jsfiddle.net/yV6xv/580/)

我将抛出一些流行语来解释为什么您的原始代码不起作用：与变量范围和闭包有关。

# mysql - 如何编写 SQL 查询在结果表中有多个求和列？

> ID：12254064
> 
> 赞同：0
> 
> 时间：2012-09-03T21:12:42.497
> 
> 标签：mysql, sql, database

例如，有 2 个表：

系列：具有 3 个相关列（2 个团队在一个系列中）：series_id、team1_id 和 team2_id

结果：有 3 个相关列：series_id、team_id（和时间）

每当一支球队赢得一场 SERIES 比赛时，就会在 RESULTS 表中插入一行。

我必须知道每个系列的当前得分。所以我需要加入 series_id 和 team id 上的表格。但是我想要一个看起来像这样的结果：

```
series team1 team2
------------------
1        4     3
2        3     1
3        2     4 
```

我不明白如何在结果表中获取多个列，这两个列都存储输入表中条件行的 SUM。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:23:28.397

加入 上的表格`series_id`，然后按系列分组并计算获胜团队与系列中各个参与者匹配的次数（在 MySQL 中，可以使用来`SUM(boolean expression)`执行计数，因为`TRUE`等于`1`和）：`FALSE``0`

```
SELECT   series_id,
         SUM(RESULTS.team_id = SERIES.team1_id) AS team1,
         SUM(RESULTS.team_id = SERIES.team2_id) AS team2
FROM     SERIES LEFT JOIN RESULTS USING (series_id)
GROUP BY series_id 
```

# ios - Xcode 44 生成的 dsym 文件中没有 UUID

> ID：12254075
> 
> 赞同：1
> 
> 时间：2012-09-03T21:14:10.513
> 
> 标签：ios, xcode, crash-reports, symbolicatecrash

我遇到了 UUID 的问题，在生成 ipa 或 .app 文件后，dsym 文件也正在正确生成，但我面临的问题是 .app 和 .dsym 之间没有关联。

通常会生成一个 uuid dsym 文件，该文件用于映射崩溃日志以对其进行符号化。

我不确定问题是否与某些项目设置有关，但需要您的帮助来解决此问题。

当我右键单击 dsym 文件->获取信息->更多信息时，这个地方是空的，它没有任何 uuid。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T22:37:44.337

finder 信息屏幕并不总是显示 UUID，即使它在那里也很难。

只需通过以下方式在终端中检查它：`dwarfdump --uuid YourApp.app.dSYM`

通过以下方式与应用程序二进制文件相同：`dwarfdump --uuid YourApp.app/YourAppExecutable`

在构建应用程序的同一运行中生成的 dSYM 不太可能不会获得相同的 UUID。

# git - 如何显示我的全局 Git 配置？

> ID：12254076
> 
> 赞同：1386
> 
> 时间：2012-09-03T21:14:17.700
> 
> 标签：git

我想显示所有配置的 Git 部分。

我只找到了`git config --get core.editor`，我想输出全局配置的所有内容，而不仅仅是配置的默认编辑器。

* * *

## 回答 #1

> 赞同：2160
> 
> 时间：2012-09-03T21:16:39.633

您可以使用：

```
git config --list 
```

或查看您的`~/.gitconfig`文件。本地配置将在您的存储库的`.git/config`文件中。

采用：

```
git config --list --show-origin 
```

查看该设置的定义位置（全局、用户、存储库等...）

* * *

## 回答 #2

> 赞同：274
> 
> 时间：2012-09-04T04:10:20.290

最短的，

```
git config -l 
```

显示从以下位置继承的所有值：系统、全局和本地

* * *

## 回答 #3

> 赞同：198
> 
> 时间：2017-10-28T03:44:59.293

> 如何编辑我的**全局**Git 配置？

简短的回答：`git config --edit --global`

* * *

要了解 Git 配置，您应该知道：

> # Git 配置变量可以存储在三个不同的级别。每个级别都会覆盖上一个级别的值。

**1.系统级别（适用于系统上的每个用户及其所有存储库）**

*   查看，`git config --list --system`（可能需要`sudo`）
*   设置，`git config --system color.ui true`
*   编辑系统配置文件，`git config --edit --system`

**2\. 全局级别（特定于您个人的值，即用户）。**

*   查看，`git config --list --global`
*   设置，`git config --global user.name xyz`
*   编辑全局配置文件，`git config --edit --global`

**3\. 存储库级别（特定于该单个存储库）**

*   查看，`git config --list --local`
*   设置，`git config --local core.ignorecase true`（`--local`可选）
*   编辑存储库配置文件，`git config --edit --local`（`--local`可选）

> # 如何查看**所有**设置？

*   运行`git config --list`，显示**系统**、**全局**和（如果在存储库中）**本地**配置
*   运行`git config --list --show-origin`，也显示每个配置项的源文件

> # 如何读取一种特定配置？

*   例如，运行`git config user.name`以获得`user.name`。
*   您还可以指定 options `--system`, `--global`,`--local`以在特定级别读取该值。

* * *

参考：*[1.6 入门 - 首​​次 Git 设置](https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup)*

* * *

## 回答 #4

> 赞同：114
> 
> 时间：2012-09-03T21:16:42.957

```
git config --list 
```

是一种方法。不过我通常只是打开`.gitconfig`。

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2016-04-11T14:41:49.497

您也可以调用`git config -e`直接在编辑器中打开配置文件。Git 配置文件比输出更可读`-l`，所以我总是倾向于使用`-e`标志。

所以总结一下：

```
git config -l  # List Git configuration settings (same as --list)
git config -e  # Opens Git configuration in the default editor (same as --edit) 
```

*   没有参数它与本地交互`.git/config`。
*   与`--global`它交互`~/.gitconfig`。
*   并与之`--system`交互`$(prefix)/etc/gitconfig`。

（我真的找不到什么`$(prefix)`意思，但它似乎默认为`$HOME`。）

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2019-06-08T12:03:28.427

一件重要的事情`git config`：

`git config`有`--local`,`--global`和`--system`级别 和对应的文件。

所以你可以使用`git config --local`,`git config --global`和`git config --system`。

默认情况下，如果没有传递配置选项，`git config`将写入*本地级别。*本地配置值存储在可以在存储库的 .git 目录中找到的文件中：`.git/config`

全局级别配置是特定于用户的，这意味着它适用于操作系统用户。全局配置值存储在位于用户主目录中的文件中。`~/.gitconfig`在 Unix 系统和`C:\Users\<username>\.gitconfig`Windows 上。

系统级配置应用于整台机器。这涵盖了操作系统和所有存储库上的所有用户。系统级配置文件位于`gitconfig`系统根路径之外的文件中。$(prefix)/etc/gitconfig 在 Linux 系统上。在 Windows 上，此文件可以在`C:\ProgramData\Git\config`.

所以你的选择是找到那个全局`.gitconfig`文件并编辑它。

或者你可以使用`git config --global --list`.

这正是您所需要的。

[![在此处输入图像描述](../Images/f790ce74c901e4828dcb7fd6f6495d18.png)](https://i.stack.imgur.com/th5Dt.png)

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2020-05-15T10:10:59.323

从 Git [2.26.0 开始](https://github.com/git/git/blob/v2.26.0/Documentation/RelNotes/2.26.0.txt)，您可以使用[`--show-scope`](https://github.blog/2020-03-22-highlights-from-git-2-26/#some-new-config-tricks)以下选项：

```
git config --list --show-scope 
```

示例输出：

```
system  rebase.autosquash=true
system  credential.helper=helper-selector
global  core.editor='code.cmd' --wait -n
global  merge.tool=kdiff3
local   core.symlinks=false
local   core.ignorecase=true 
```

它可以与

*   `--local`对于项目配置， `--global`对于用户配置， `--system`对于所有用户的配置
*   `--show-origin`显示确切的配置文件位置

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2015-07-16T14:15:53.587

您也可以使用`cat ~/.gitconfig`.

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2015-09-01T06:46:15.953

Git 2.6（2015 年 9 月/10 月）将添加`--name-only`简化 a 输出的选项`git config -l`：

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 a92330d](https://github.com/git/git/commit/a92330d21c13cf244d8045f5c9d1df6e63893d58)、[提交 f225987](https://github.com/git/git/commit/f2259877531ed2a58ec04aeaeb6beb5183f81f92)、[提交 9f1429d](https://github.com/git/git/commit/9f1429df179adb7a315616d01c9b237b521a3733)（2015 年 8 月 20 日） 。 请参阅[SZEDER Gábor ( ) 的提交](https://github.com/szeder)[ebca2d4](https://github.com/git/git/commit/ebca2d49577665db0318a9c91c0bcca7e4eed963) （ 2015 年 8 月 20 日）和[提交 905f203](https://github.com/git/git/commit/905f2036d0975a828f764947384e732c2908d6eb)、[提交 578625f](https://github.com/git/git/commit/578625fa918922713a2ecce2b06611e4566778f5)（2015 年 8 月 10 日[）](https://github.com/szeder)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 fc9dfda](https://github.com/git/git/commit/fc9dfda1be25ab3bb311900c6cfbf59d6b6e224e))^(中，2015 年 8 月 31 日）)[`peff`](https://github.com/peff)
[`szeder`](https://github.com/szeder)
^([`gitster`](https://github.com/gitster))

> # `config`: 添加 ' `--name-only`' 选项以仅列出变量名称
> 
> ' `git config`' 只能显示值或名称-值对，因此如果 shell 脚本需要设置配置变量的名称，它必须运行 ' `git config --list`' 或 ' `--get-regexp`' 并解析输出以将配置变量名称与其值分开。
> 但是，这样的解析无法处理多行值。
> 
> 尽管 ' `git config`' 可以为换行安全解析生成以空字符结尾的输出，但在这种情况下没有用，因为 shell 无法处理空字符。
> 
> 甚至我们自己的 bash 完成脚本也会遇到这些问题。
> 
> `--name-only`通过引入 ' ' 选项来修改 ' `--list`' 和 ' ' 的输出以仅列出配置变量的名称，从而帮助完成脚本和一般的 shell 脚本`--get-regexp`，因此它们不必执行容易出错的后处理来不再将变量名与其值分开。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2016-07-21T16:38:53.603

如果您只想列出 Git 配置的一部分，例如*alias*、*core*、*remote*等，您可以通过 grep 管道输出结果。就像是：

```
git config --global -l | grep core 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-03-24T07:15:36.690

在基于 Linux 的系统上，您可以通过以下方式查看/编辑配置文件

```
vi/vim/nano .git/config 
```

确保您位于 Git init 文件夹中。

如果你想合作`--global config`，它是

```
vi/vim/nano .gitconfig 
```

在 /home/userName

这应该有助于编辑：[https ://help.github.com/categories/setup/](https://help.github.com/categories/setup/)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-05-17T18:05:05.057

要查找所有配置，只需编写以下命令：

```
git config --list 
```

在我的本地我运行这个命令。

```
Md Masud@DESKTOP-3HTSDV8 MINGW64 ~
$ git config --list
core.symlinks=false
core.autocrlf=true
core.fscache=true
color.diff=auto
color.status=auto
color.branch=auto
color.interactive=true
help.format=html
rebase.autosquash=true
http.sslcainfo=C:/Program Files/Git/mingw64/ssl/certs/ca-bundle.crt
http.sslbackend=openssl
diff.astextplain.textconv=astextplain
filter.lfs.clean=git-lfs clean -- %f
filter.lfs.smudge=git-lfs smudge -- %f
filter.lfs.process=git-lfs filter-process
filter.lfs.required=true
credential.helper=manager
user.email=infomasud@gmail.com
filter.lfs.smudge=git-lfs smudge -- %f
filter.lfs.process=git-lfs filter-process
filter.lfs.required=true
filter.lfs.clean=git-lfs clean -- %f 
```

# django - django 注册测试在 test_get_version 上失败

> ID：12254080
> 
> 赞同：2
> 
> 时间：2012-09-03T21:14:29.400
> 
> 标签：django, unit-testing, django-registration

另外，这个测试到底是为了什么？

```
======================================================================
FAIL: test_get_version (registration.tests.RegistrationVersionInfoTests)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/arnar/Documents/git/liveproject/env/local/lib/python2.7/site-packages/registration/tests/__init__.py", line 45, in test_get_version
    self.assertEqual(registration.get_version(), version_dict['expected'])
AssertionError: '1.0' != '1.0 pre-alpha'

----------------------------------------------------------------------
Ran 55 tests in 7.332s

FAILED (failures=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:52:16.973

测试的目的是检查模块中的[`get_version`](https://bitbucket.org/ubernostrum/django-registration/src/27bccd108cde/registration/__init__.py#cl-3)功能是否`registration/__init.py`有效。

我快速查看了源代码`get_version`和失败的测试（0.8 版），这对我来说似乎是一个错误。关于 bitbucket 上的问题有一个[拉取请求。](https://bitbucket.org/ubernostrum/django-registration/pull-request/25/updated-expected-versions-for-unit-tests)

# jquery - 跟随动画重置

> ID：12254090
> 
> 赞同：0
> 
> 时间：2012-09-03T21:15:25.333
> 
> 标签：jquery

我将[以下动画](http://jsfiddle.net/AndyMP/9TvRU/)配置为在“鼠标悬停”上淡入淡出并将块滑入视图，仅在“mouseout”上淡出并再次将其滑开。但是，如果我再次将鼠标移回容器 DIV 上，则相同的动画会继续进行，但从错误的位置开始。如何让它重新回到起始位置？如果可能的话，我想避免添加另一个动画来将其移回原始位置。

```
$(".box").css("opacity",0);
    $(".container").mouseover(function () {
        $(".box").stop(true, true).animate({top:99, opacity: 1},150);
    });
    $(".container").mouseout(function () {
        $(".box").stop(true, true).animate({top:59, opacity: 0},150);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:21:35.267

只需在开始第一个动画之前将其重置为隐藏时的最高值即可。我把值`("top", 50)`放在示例中，但你可以填写你想要的实际起始值：

```
$(".box").css("opacity",0);
$(".container").mouseover(function () {
    $(".box").stop(true, true).css("top", 50).animate({top:99, opacity: 1},150);
});
$(".container").mouseout(function () {
    $(".box").stop(true, true).animate({top:59, opacity: 0},150);
}); 
```

# facebook - 如何使用来自外部网站的用户名和密码验证 facebook 用户？

> ID：12254091
> 
> 赞同：-3
> 
> 时间：2012-09-03T21:15:26.330
> 
> 标签：facebook, facebook-c#-sdk, dotnetopenauth, facebook-oauth

我是网络开发的新手。我的目标是： - 我有 facebook (FB) 用户的用户名和密码。- 现在，我想将这些凭据（通过 POST、GET 或任何其他方式......无论如何）传递给 FB 以验证用户，如果验证，则保存用户会话。- 我阅读了关于 oAuth 的文章并理解了这个想法。但是，您需要先在 FB 上创建一个 APP，然后您才能使用 APP Id 并验证 FB 用户。我不想在FB上创建任何APP。我有一个用户名和密码，只是想将它传递给 FB 一些方法并验证用户。

让我知道这是否可能？我在 C#.net/VS2008 上工作。但是，如果在 .net 中无法使用，请告知是否可以使用任何其他语言/技术。

谢谢和问候， AG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:03:06.080

根据策略，不允许用户共享其用户名和密码，因此您所提议的内容也是不允许的，因此也无法实现。

# scala - Scala：使用变量从地图中获取值？

> ID：12254094
> 
> 赞同：0
> 
> 时间：2012-09-03T21:15:43.743
> 
> 标签：scala, map

我只是想获取与 String 键关联的 Int 值。我得到：

```
error: type mismatch;
found   : Char
required: String
    score += tiles(letter) 
```

从我这里的代码：

```
val tiles = Map[String, Int](
    "a" -> 1,
    "b" -> 3,
    "c" -> 3,
    "d" -> 2
    // etc.
)

def main(args: Array[String]) {
    println("\nScrabble Calculator 1.0")
    println("Enter words on the commandline.")
    println("Use a '_' character for blank tiles.\n")

    for (w <- args)  // loop through each word
        if (w.length < 2)
            println(w + ": one-letter words disallowed in Scrabble")
        else
            calculate(w)
}

def calculate(w: String) {
    var score = 0
    for (letter <- w)
        score += tiles(letter)
    println(w + ": " + score + " points")
} 
```

如果我使用 "a" 或 "b" 而不是`letter`，它可以正常工作（它返回 1 或 3 或其他）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:19:39.183

哦，天哪。这是一个简单的语法问题。如果使用 ' 而不是 "，则将其解释为 Char：

```
val tiles = Map[Char, Int](
    'a' -> 1,
    'b' -> 3,
    'c' -> 3,
    'd' -> 2, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:03:26.047

`tiles`是一个`Map[String, Int]`。

`calculate`接受一个`String`论点，`w`. 它将单个字符拉出`w`into `letter`，因此`letter`是 type `Char`。

然后，您尝试`letter`在`tiles`. `letter`是一个`Char`，什么时候`tiles`需要一个`String`。这**正是**编译器通过该错误消息告诉您的内容。

# javascript - PNG图像叠加，但有一个链接来改变每一个，一次一个 - Javascript/jQuery/CSS

> ID：12254097
> 
> 赞同：0
> 
> 时间：2012-09-03T21:16:04.787
> 
> 标签：javascript, jquery, css, html

我真的很挣扎。我对这样的编码有少量知识，但比实际编码更多修改。

我正在寻找一些代码来允许我覆盖 2 层不同的 PNG 图像（一扇门和一个门把手），然后当在页面上单击链接时，每个图层都会更改为不同的图像，例如不同的把手或不同的门样式或颜色。

```
#png1 {
position:absolute;
top:0;
left:0;
z-index:0;
}

#png2 {
position:absolute;
top:0;
left:0;
z-index:0;
} 
```

上面的 CSS 与下面的 HTML 相结合，给了我覆盖，将它放在一个框架中（可能是 DIV ？）然后为 HTML 链接更改图像会很好

```
<img id="png1" src="aub.png" />
<img id="png2" src="handle1.png" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:25:30.707

*position:absolute*和*z-index* css 属性是你的工具

门把手的 z-index 必须高于门

使用 jQuery 通过单击链接来更改行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:31:16.320

在图像周围添加一个包装器 div。将其设置为相对位置。为顶部的图像提供比底部图像更高的 z-index。

使用 jQuery click 函数来改变图像标签的 src 或显示/隐藏其他图像。

假设您使用 .my_link_1 和 .my_link_2 类创建两个链接，作为您要更改的图像的触发器：

```
$(".my_link_1").click(function() {
  $("#png1").attr('src', 'red.png');
});

$(".my_link_2").click(function() {
  $("#png1").attr('src', 'blue.png');
}); 
```

# machine-learning - 如何结合 AUC 和平均 11 点精度/召回率？

> ID：12254102
> 
> 赞同：1
> 
> 时间：2012-09-03T21:16:28.073
> 
> 标签：machine-learning, information-retrieval, evaluation, collective-intelligence

我正在评估推荐人，我有 ROC 曲线和 Precision-Recall 曲线。当我更改一些参数时，ROC 和 PR 曲线的变化会有所不同。有时 ROC 曲线看起来比 PR 曲线更好，反之亦然。因此我想要两条曲线。我可以将 ROC 曲线归结为 AUC，因为我有 11 点 PR 曲线，所以我可以取 11 点的平均值来得到一个数字。

我可以以某种方式将这些措施组合成一个数字吗？这是人们做的事情还是不必要的？

ROC 看起来比 PR 更好的事实只是一个主观的事情，因为我不擅长解释曲线，还是一个可以比另一个更好是有效的？（它们并不完全不同，但我认为仍然很明显）

编辑：基本上我不想显示大量的情节，我想要一张数字表。你会把这些数字放在一张桌子上吗？或者为每个度量制作一个表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:24:17.147

人们在常见系统中最常做的是使用 AUC（ROC 曲线下的面积）或 F-Measure 作为汇总指标。但是你是如何处理推荐系统的，直到我知道他们喜欢看到精确度和召回曲线（比如[这些](http://www.google.com.br/imgres?imgurl=http://nlp.stanford.edu/IR-book/prroc2.jpg&imgrefurl=http://nlp.stanford.edu/IR-book/roc.html&h=559&w=720&sz=53&tbnid=f8U246eE8LMfEM%3a&tbnh=90&tbnw=116&zoom=1&usg=__A4_JMVCetIHxTmSrmGYmfxBOZQY=&docid=Rn8b8fH9qyEGUM&hl=pt-BR&sa=X&ei=gKdQUKL7IYmo8QS53oHICw&ved=0CE4Q9QEwBQ&dur=4097)）。因为精度衰减和召回率随着 TOP-K 的增长而增长，对这些系统来说是重要的结果。

但是，如果您仍然想获得关于精确重新计算与 ROC 曲线的更好答案，请阅读[本文](http://www.google.com.br/url?sa=t&rct=j&q=&esrc=s&source=web&cd=7&ved=0CGcQFjAG&url=ftp%3A%2F%2Fftp.cs.wisc.edu%2Fmachine-learning%2Fshavlik-group%2Fdavis.icml06.pdf&ei=sKdQUKu9IYO09QTa7IHQDA&usg=AFQjCNHD-RluCCB0rAa2pu_ktnvd1W0vDA&sig2=iDXWTxyUFSwT3UZzDeXjsw)

# sql-server - 将未完成的数据加载到数据仓库

> ID：12254104
> 
> 赞同：0
> 
> 时间：2012-09-03T21:16:32.493
> 
> 标签：sql-server, data-warehouse, business-intelligence

标题可能令人困惑，所以我想介绍一下我目前的问题。

请想象以下情况：系统存储设备的问题，应由合格的工作人员修复。我有表“问题”：

*   标识为 PK
*   workerid FK
*   描述问题是否已解决或未解决的状态
*   预计完成时间
*   实际完成时间

和其他列。我还有一个数据仓库，它将存储“问题”并描述这些“工人”的表现（主要是工作时间）。

在 ETL 过程中，最大的问题是“未解决的问题”。我可能有两种可能：

a) 处理只解决了“问题”，直到它们完成才解决，然后等到它们完成并处理它们。但是，此任务不会包含在我的报告中，这可能需要很长时间才能完成，这在业务方面可能至关重要。

b) 处理已解决和未解决的问题，Fact 表中的 PK 可以是 issueId 和 status。但随后我将存储几乎相同的问题，这些问题可能很奇怪，并且难以分析。

这是常见的情况吗？这两种可能性中哪一种看起来更合理？或者可能还有其他更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:54:03.607

似乎应该有一个问题维度，并且该维度将包含状态列。改变事实有几个问题：

1.  您将不得不设置一个计划的进程，该进程每 x 分钟更新一次事实表的状态列。我总是尽量避免更新事实表，因为它会使多维数据集处理更加困难，它会引入阻塞，并且更改跟踪很困难（状态何时更改，谁更改了，为什么？）。此外，如果/当您升级到 SQL 2012 并希望使用列存储索引（它彻底改变了星型模式查询性能），您将无法直接更新列。
2.  尺寸有时会发生变化。事实并非如此。如果状态在维度中，也很容易设置更改跟踪。研究缓慢变化的维度。

# ruby-on-rails - 如何在 params[:comments] 记录中添加 params[:controller]？

> ID：12254110
> 
> 赞同：0
> 
> 时间：2012-09-03T21:17:11.727
> 
> 标签：ruby-on-rails, comments, polymorphic-associations, params, railscasts

再会。
如何在 params[:comments] 中添加 params[:controller] 值。（在视图中）
我希望评论模型将填充以下参数：

```
#comment.rb

id: 
text:
commentable_id:
user_id:
controller: #for example 'posts', or 'galleries' 
```

但是用户无权访问`controller:`价值。
控制器：应默认确定。（例如帖子）

类似的东西[http://railscasts.com/episodes/154-polymorphic-association](http://railscasts.com/episodes/154-polymorphic-association)
但`commentable_type:`被交换`controller:`

您如何看待多态性关联的评论是否很好？
如何更好地实施此解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:09:55.710

控制器名称不应指示模型中的操作。

因此，保留注释的多态关联，您可以将路由名称更改为适合您情况的任何名称。

在您的表单中，您将发布到一些创建操作，这将决定您可以选择“帖子”或“画廊”的模型。

# c# - 同步收集和中止任务

> ID：12254111
> 
> 赞同：1
> 
> 时间：2012-09-03T21:17:23.690
> 
> 标签：c#, .net, multithreading, thread-safety, synchronizing

我正在编写一个小型多线程网络服务器。所有经典的东西：它监听传入的连接，接受它们，然后在不同的线程中服务它们。此外，此服务器有时必须重新启动，为此它必须 a) 停止侦听，b) 踢出所有连接的客户端，c) 调整一些设置/等待，d) 恢复侦听。

好吧，我对开发多线程程序几乎一无所知，所以我正在寻求帮助。这就是我的想法（仅限核心内容）：

```
class Server
{
    class MyClient
    {
        Server server;
        TcpClient client;
        bool hasToFinish = false;

        public MyClient(Server server, TcpClient client)
        {
            this.server = server;
            this.client = client;
        }

        public void Go()
        {
            while (!hasToFinish)
            {
                // do all cool stuff
            }
            CleanUp();
        }

        private void CleanUp()
        {
            // finish all stuff

            client.Close();
            server.myClients.Remove(this);
        }

        public void Finish()
        {
            hasToFinish = true;
        }
    }

    bool running = false;
    TcpListener listener;
    HashSet<MyClient> myClients = new HashSet<MyClient>();

    public void Start()
    {
        if (running)
            return;

        myClients.Clear();
        listener = new TcpListener(IPAddress.Parse("127.0.0.1"), 1234);
        listener.Start();
        listener.BeginAcceptTcpClient(AcceptClient, this);
        running = true;
    }

    public void Stop()
    {
        if (!running)
            return;

        listener.Stop();
        foreach (MyClient client in myClients)
        {
            client.Finish();
        }
        myClients.Clear();
        running = false;
    }

    public void AcceptClient(IAsyncResult ar)
    {
        MyClient client = new MyClient(this, ((TcpListener)ar.AsyncState).EndAcceptTcpClient(ar));
        myClients.Add(client);
        client.Go();
    }
} 
```

这绝对不能令人满意。没有同步（我只是不知道把它放在哪里！），并且调用 Server.Stop() 不会使 MyClient-s 立即停止。我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:18:24.950

代码看起来很干净，我们可以通过简单的修改使其成为线程安全的。

问题分为三个部分，“客户端”、“服务器”和客户端-服务器交互。

首先是客户端，Go() 方法由一个线程（我们称之为 A）调用，而 Finish() 方法由另一个线程 (B) 调用。当线程 B 修改 hasToFinish 字段时，线程 A 可能不会立即看到修改，因为该变量可能缓存在 CPU 缓存中。我们可以通过将 hasToFinish 字段设置为“volatile”来修复它，这会强制线程 B 在更新时将变量更改发布到线程 A。

现在是服务器类。我建议您在“服务器”实例上同步三个方法，如下例所示。它确保 Start 和 Stop 被顺序调用，并且它们更改的变量跨线程发布。

客户端-服务器交互也需要解决。在您的代码中，客户端从服务器中删除其引用，但服务器在 Finish() 以任何方式清除所有客户端引用。这对我来说看起来是多余的。如果我们可以删除客户端中的部分代码，我们就不用担心了。如果出于某种原因选择将逻辑保留在客户端而不是服务器中，请在 Server 类中创建一个名为 RemoveClient(Client client) 的公共方法，并将其与 Server 实例同步。然后让客户端调用这个方法，而不是直接操作HashSet。

我希望这能解决你的问题。

```
public void Start()
{
  lock(this) 
  {
    if (running)
        return;

    myClients.Clear();
    listener = new TcpListener(IPAddress.Parse("127.0.0.1"), 1234);
    listener.Start();
    listener.BeginAcceptTcpClient(AcceptClient, this);
    running = true;
  }
}

public void Stop()
{
  lock(this)
  {
    if (!running)
        return;

    listener.Stop();
    foreach (MyClient client in myClients)
    {
        client.Finish();
    }
    myClients.Clear();
    running = false;
  }
}

public void AcceptClient(IAsyncResult ar)
{
  lock(this)
  {
    MyClient client = new MyClient(this, ((TcpListener)ar.AsyncState).EndAcceptTcpClient(ar));
    myClients.Add(client);
    client.Go();
  }
} 
```

# netbeans - Netbeans 代码补全 api

> ID：12254113
> 
> 赞同：1
> 
> 时间：2012-09-03T21:17:32.400
> 
> 标签：netbeans, code-completion, code-hinting

我正在尝试制作一个 Netbeans 7.2 代码完成模块。我试图让这个代码完成只显示 PHP。我也试图让代码完成只显示特定的方法/功能，即`x()`和`z()`.

我对此很陌生。我按照本教程[http://platform.netbeans.org/tutorials/nbm-code-completion.html](http://platform.netbeans.org/tutorials/nbm-code-completion.html)简要了解了 API。

如何确定代码完成正在呈现的方法/功能？

如果您需要更多信息，请告诉我。

**编辑**

我正在尝试使代码完成位于函数的第一个参数上，`x()`并且`z()`

**更新**

这是我迄今为止所拥有的：

```
return new AsyncCompletionTask(new AsyncCompletionQuery() {
    protected void query(CompletionResultSet completionResultSet, Document document, int caretOffset) {

        String filter = null;
        int startOffset = caretOffset - 1;

        try {
            final StyledDocument bDoc = (StyledDocument) document;
            final int lineStartOffset = getRowFirstNonWhite(bDoc, caretOffset);
            final char[] line = bDoc.getText(lineStartOffset, caretOffset - lineStartOffset).toCharArray();
            final int whiteOffset = indexOfWhite(line);
            filter = new String(line, whiteOffset + 1, line.length - whiteOffset - 1);
            if (whiteOffset > 0) {
                startOffset = lineStartOffset + whiteOffset + 1;
            } else {
                startOffset = lineStartOffset;
            }
        } catch (BadLocationException ex) {
            Exceptions.printStackTrace(ex);
        }

        if(filter.startsWith("x('") || filter.startsWith("z('"))
        {
            // This is what I would assume is the first param.
            String result = filter.replaceFirst("x('|z('", "");
        }
    }
}, jtc); 
```

# java - Java 向下转型的困境

> ID：12254115
> 
> 赞同：1
> 
> 时间：2012-09-03T21:17:39.827
> 
> 标签：java

请在此处查看此代码。

```
class Vehicle {
    public void printSound() {
        System.out.print("vehicle");
    }
}

class Car extends Vehicle {
    public void printSound() {
        System.out.print("car");
    }
}

class Bike extends Vehicle{ // also tried to extend Car
    public void printSound() {
        System.out.print("bike");
    }
}

public class Test {
    public static void main(String[] args) {
        Vehicle v = new Car();
        Bike b = (Bike)v;
        v.printSound();
        b.printSound();

        Object myObj = new String[]{"one", "two", "three"};
        for (String s : (String[])myObj) System.out.print(s + ".");

    }
} 
```

执行此代码将给出`ClassCastException`说`inheritance.Car cannot be cast to inheritance.Bike`。

现在看线`Object myObj = new String[]{"one", "two", "three"};`。这条线是一样的`Vehicle v = new Car();`吧？在这两行中，我们都将子类对象分配给超类引用变量。`String[]myObj`但是允许向下转换，但`(Bike)v`不允许。正如评论中提到的，我还尝试使用自行车来扩展 Car。根据这里的一些讨论，自行车不是汽车，因为它是扩展车辆。如果我通过 Bike 扩展 Car，则意味着 Bike 是 Car 的一种，但仍然存在例外。

请帮助我了解这里发生了什么。

Ps - 请不要把整辆汽车改装成自行车，把自行车改装成汽车；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:29:14.780

`Object myObj = new String[]{"one", "two", "three"};`两者的主要区别在于 example`myObj`将引用一个 String 数组，并且由于引用的值确实是一个 Strings 数组，因此您可以将其强制转换为一个。在另一个示例`Bike b = (Bike)v;`中， 的引用值`b`将是 a `Car`。而且既然`Car`不是完整的`Bike`。自行车可能比汽车执行更多，汽车不知道的事情。因此，您不能将 a`Car`转换为 a`Bike`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T21:36:06.110

两者不一样：`(String[])myObj`是允许的，因为`myObj`是`String[]`实例。但是`(Bike)v`不允许，因为`v`它不是 a`Bike`或其任何超类的实例（它是一个`Car`实例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T21:20:58.513

不，提供的代码与您的示例中的代码在一个基本句子中有所不同：

```
//you're declaring a Object class variable
Object myObj = new String[]{"one", "two", "three"};
//you're declaring a Car class instance, not a Vehicle
Vehicle v = new Car(); 
```

他们不一样。在第一个示例中，您使用父类来保存值，在第二个示例中，您使用子类并分配父值，但对象将是子类，而不是父类。

让我们看一下类组成以进行进一步解释：

```
Object
- String[]
- Vehicle
  - Car
  - Bike 
```

如您所见， each`String[]`将是 a `Object`，现在 each`Car`将是 a `Vehicle`，但 a`Car`不是 a `Bike`。用代码解释

```
Vehicle v = new Car();
//v contains an instance of Car
Car c = v;
//a Car is not a Bike, this line will throw an error
Bike b = c;
//v2 contains an instance of Vehicle
Vehicle v2 = new Vehicle();
//a Car is a Vehicle
Car c2 = v2;
//a Bike is a Vehicle
Bike b2 = v2; 
```

# php - 通过 XHR 请求将 MYSQL 数组从 PHP 返回到 Javascript

> ID：12254117
> 
> 赞同：0
> 
> 时间：2012-09-03T21:17:51.663
> 
> 标签：php, javascript, ajax, arrays, json

**PHP**

```
$table = $_REQUEST['table'];

$query  = "SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.Columns where TABLE_NAME = $table";
$result = mysql_query($query);
$i = 0;
$arr = array();
while($row = mysql_fetch_array($result, MYSQL_NUM)) {
    $arr[$i] = $row['COLUMN_NAME'];
    $i++;
}
echo json_encode($arr); 
```

**Javascript**

```
$("#verticalSelect").change(function() {
    var table = $("#verticalSelect option:selected").attr('value');

    $.post(PROCESSORFILE, {"task": "getTableDupeFields", "table": table}, function(data) {
        alert(data);
    }, "json");
}); 
```

我想`$arr`从 php 中获取数组并将其传递给 javascript，在那里我可以一一打印它的内容。到目前为止，我拥有的代码及其变体都返回了错误、资源 ID，而且通常什么都没有。

如何以最老套的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:26:00.737

1.  `SHOW COLUMNS FROM {$table}`
2.  `mysql_fetch_array($result)`
3.  `$arr[] = $row['Field'];`
4.  `$i`完全不需要使用
5.  `"json"`没有必要
6.  `mysql_*`函数已弃用，请改用 mysqli/PDO。
7.  您的脚本中存在安全问题。请转义`$table`以防止 SQL 注入攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T21:27:23.530

首先，有什么问题：

```
while($row = mysql_fetch_array($result, MYSQL_NUM)) {
    $arr[$i] = $row['COLUMN_NAME'];
    $i++;
} 
```

您正在指定`MYSQL_NUM`，它指示`mysql_fetch_array()`返回一个数值数组。设置该标志后，您可以将第一个值作为`$row[0]`. 要获取关联数组并按名称访问字段，您可以`mysql_fetch_assoc()`改用，不将任何标志传递给`mysql_fetch_array()`，或者传递它`MYSQL_ASSOC`。

此外，`$i`您使用的变量是不必要的 - 您可以在不指定索引的情况下将元素附加到数组，如下所示：

```
 $arr[] = $row['COLUMN_NAME']; 
```

最后，当您将`$_REQUEST`变量直接插入到您的 sql 中时，您的脚本对 SQL 注入是开放的。至少，您应该`mysql_real_escape_string()`在将其添加到 SQL 之前运行该值。

```
$table = mysql_real_escape_string($_REQUEST['table']); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T21:41:19.060

您`$table`需要在查询中作为字符串引用。

您的数据未经过清理，并且对 sql 注入开放

`mysql_fetch_array($result, MYSQL_NUM)`不返回关联数组，`MYSQL_ASSOC`而是指定或使用`mysql_fetch_assoc`。

不需要`$i`，您可以使用`$arr[] = $row['COLUMN_NAME'];`将项目添加到数组的末尾

> 不鼓励使用 mysql_* 扩展。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。

您可以使用`$("#verticalSelect").val()`获取选定值的选择元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T21:32:02.633

看起来您使用的是 jquery，所以也许可以使用 getjson 方法。此外，由于您只是请求数据，因此最好遵循 REST 原则并使用 GET 而不是 POST，除非您的数据当然非常大。如果您需要缓存并允许轻松访问资源，这将有所帮助。

```
$.getJSON("scripturl",function(data) {
$.each(data, function(i,item){
    console.log(item);
});
}); 
```

# computer-science - NP-hard 的非周期性定义是什么？

> ID：12254118
> 
> 赞同：-1
> 
> 时间：2012-09-03T21:18:27.767
> 
> 标签：computer-science, theory, computation-theory

根据维基百科，我正在尝试理解[NP](http://en.wikipedia.org/wiki/NP_%28complexity%29)、[NP complete](http://en.wikipedia.org/wiki/NP-complete)和[NP hard的概念。](http://en.wikipedia.org/wiki/NP-hard)

如果我正确理解给定的文本：

编辑：根据大卫更正

**NP** == 决策问题，其答案可以在多项式时间内得到验证（给定解决方案）

**NP 完成**== **NP**和**NP 困难**同时

**NP 难**== 存在一个**NP 完全**问题，它是多项式时间图灵可约简到它。

所以为了理解**NP完整性**的概念，我需要先了解**NP硬度**。所以我试着根据上面的说法来分析一下什么是**NP难。**所以我得到：

**NP hard** == 有一个问题是**NP hard** 和**NP**同时存在的，可以归结为它。但是定义中有一个循环。什么是非周期性定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:27:27.870

您还可以将 NP 完全定义为一个问题，这样任何 NP 问题都可以在多项式时间内简化为它。该定义应该删除您的周期。

您对 NP-hard 的定义似乎倒退了。如果某个 NP 完全问题（因此任何 NP 问题）可以在多项式时间内简化为该问题，则该问题应该是 NP 难题。

您可以在此处查看更多详细信息：[http ://en.wikipedia.org/wiki/P_versus_NP_problem](http://en.wikipedia.org/wiki/P_versus_NP_problem)

# java - 打开方式...一个java程序

> ID：12254123
> 
> 赞同：12
> 
> 时间：2012-09-03T21:18:53.300
> 
> 标签：java, windows, file

我想知道如何制作一个可以用来打开东西的java程序。例如：notepad++，win zip....我是否已将 jar 转换为`.exe`第一个？另外，选择的文件是否传递给`String[] args`？

顺便说一句，我知道它可以与 cmd 一起使用，但这不是我要问的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:24:59.800

取决于操作系统。在 windows 下，您需要将一些详细信息附加到注册表中。

[以在 Java 应用程序中使用文件关联](https://stackoverflow.com/questions/2043029/utilising-a-file-association-in-a-java-application)为例，看看第三个答案？

你也可以看看[http://www.rgagnon.com/javadetails/java-0592.html](http://www.rgagnon.com/javadetails/java-0592.html)

**更新**

`main`此外，当操作系统执行程序时，您应该通过该方法将文件作为命令行参数接收

我不知道这是否适合您的需求，但您也可以[查看 Mac 中的文件关联](https://stackoverflow.com/questions/9096991/file-association-in-mac)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T22:08:39.377

关于如何使 Java 程序可运行有很多选择。就像你提到的，最简单的选择是使用命令行。如果您想让它与大多数操作系统的 GUI 界面（以及“打开方式”对话框）一起使用，最简单的选择是制作一个[可执行的 jar](https://www.google.com/search?q=executable%20jar)。IDE 可以让您轻松完成这项工作，在 Eclipse 中，只需右键单击项目并选择 Export > Java > Runnable JAR file。

另一个很好的选择是将您的应用程序变成一个[Java Web Start](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/)应用程序，它让用户可以轻松地运行在线提供的 Java 程序。

或者，就像您提到的那样，您可以将其转换为 .exe 文件：

*   [将java程序编译成可执行文件](https://stackoverflow.com/questions/2011664/compiling-a-java-program-into-an-exe)
*   [如何为 Java 程序创建 .exe？](https://stackoverflow.com/questions/516399/how-do-i-create-an-exe-for-a-java-program)
*   [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T02:24:11.497

部署应用程序。使用[Java Web 开始](https://stackoverflow.com/tags/java-web-start/info)。

> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、**文件关联、**自动更新（包括延迟下载和更新的编程控制）、按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

这是一个[演示。应用程序所在的文件服务](http://pscode.org/jws/api.html#fs)。与文件类型相关联`.zzz`。

> ..它是否通过 Windows 文件选择器传递？

不，它被传递给`main`as`-open filename`或`-print filename`。什么应用程序。是否处理这些字符串取决于它。演示。上面链接会在沙盒版本中提示用户，只是因为它是沙盒版本。另一个应该在不显示提示或对话框的情况下工作。

# osx-mountain-lion - 验证项目设置不会在 XCode 4.4.1 中消失

> ID：12254127
> 
> 赞同：0
> 
> 时间：2012-09-03T21:19:12.583
> 
> 标签：osx-mountain-lion, xcode4.4

我正在尝试让 Second Life Open Source Viewer 使用 XCode 4.4.1 在 10.8.1 上成功编译。我已经设法让它运行了几次，但是在清理了我的构建文件夹之后，现在“验证项目设置”警告不断弹出，告诉我应该将编译器更改为推荐的编译器，Apple LLVM 4.0。但是，我的项目中有许多与 Clang 不兼容的编译器标志。我必须使用 GCC 4.2。所以我取消选中所有框并单击完成，但是当我再次尝试构建时，我不断收到相同的“验证项目设置”警告。

我认为我之前让它消失的唯一方法是接受它，让它进行所有更改，然后恢复到它在进行更改之前所做的快照。然而，这是一个非常耗时的解决方法，因为创建快照需要很长时间。

我试图找到“忽略编译器版本”或“不验证项目设置”的选项，但我找不到任何这样的选项。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:46:52.343

设置'LastUpgradeCheck = 0440;' 在 pbxproj 以及项目中每个 xcscheme 的“LastUpgradeVersion = "0440"'。准确地说： 1\. 用一些文本编辑器（例如 XCode）打开你的 project.pbxproj 并找到下一个块：

```
/* Begin PBXProject section */
        <somehash> /* Project object */ = {
            isa = PBXProject;
            attributes = {
                LastUpgradeCheck = 0440;
            };
            ...
        };
/* End PBXProject section */ 
```

确保 LastUpgradeCheck 设置为最新版本 (0440)。它应该看起来像：

```
<Scheme
   LastUpgradeVersion = "0440"
   version = "1.3"> 
```

2.用一些文本编辑器打开你的*.xcscheme，对于根元素Scheme，确保它的属性LastUpgradeVersion设置为“0440”值。

1.  对工作区中的所有项目重复此操作（查找和替换、正则表达式和其他批量编辑工具可能很有用）。

如果没有帮助，您可以尝试使用 Xcode 验证项目设置，检查原始项目和方案的差异，并手动恢复您关心的选项，将所有其他选项放在一边。为一个项目做它并检查它是否有帮助。成功时 - 对所有其他项目和方案进行相同的更改。这是我找出先前解决方案的方式，它对我来说很好。带有精细差异工具的 VCS 会有很大帮助。

# android - 如何使用 facebook android sdk 更改 facebook 个人资料图片？

> ID：12254130
> 
> 赞同：2
> 
> 时间：2012-09-03T21:19:29.117
> 
> 标签：android, facebook, sdk, image, user-profile

我的英语不是那么完美，但我想学习，所以我希望你能理解我。我想知道如何使用 facebook android sdk 更改 facebook 个人资料图片。我能够将图片从我的应用上传到任何相册，包括“个人资料图片”（我使用下一个代码：）

```
params=new Bundle();
params.putByteArray("photo", photo);
params.putString("caption", description);
mAsyncRunner.request(idAlbum+"/photos", params,"POST",new RequestListener() {

                    @Override
                    public void onMalformedURLException(MalformedURLException e, Object state) {}
                    @Override
                    public void onIOException(IOException e,Object state) {}
                    @Override
                    public void onFileNotFoundException(FileNotFoundException e, Object state){}
                    @Override
                    public void onFacebookError(FacebookError e,Object state) {}
                    @Override
                    public void onComplete(String response, Object state) {
                        mHandler.post(new Runnable() {
                            @Override
                            public void run() {
                                Toast.makeText(getApplicationContext(),"Success", Toast.LENGTH_LONG).show();
                            }
                        });
                    }
                }, null); 
```

但我不知道如何将上传的图片设置为个人资料图片。也许为此添加一些代码？我知道我问的是使用 facebook sdk for php 是可能的。另外，我也看到了一个 Apple 应用程序也可以做到这一点。然后，我想我可以在android中做到这一点。有人知道我在找什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T15:51:43.357

好的，我找到了这样做的方法。这是代码：

```
params=new Bundle();
    try {
        params.putByteArray("photo", photo);
    } catch (IOException e) {
        e.printStackTrace();
    }
    params.putString("caption", description);

mAsyncRunner.request(idAlbum+"/photos", params,"POST",
                        new RequestListener() {
                    @Override
                    public void onMalformedURLException(MalformedURLException
                            e, Object state) {}
                    @Override
                    public void onIOException(IOException e,Object state) {}
                    @Override
                    public void onFileNotFoundException(
                            FileNotFoundException e, Object state){}
                    @Override
                    public void onFacebookError(FacebookError e,Object state) {}

                    @Override
                    public void onComplete(final String response, Object state) {
                        mHandler.post(new Runnable() {
                            @Override
                            public void run() {
                                try {
                                    JSONObject json=new JSONObject(response);
                                    JSONObject obj=new JSONObject(
                                            facebook.request("me"));
                                    final String photoId=json.getString("id");
                                    String userId=obj.getString("id");

                                    String url="https://m.facebook.com/photo." +
                                            "php?fbid="+photoId+"&id="+userId+
                                            "&prof&__user="+userId;
                                    Intent mIntent=new Intent(Intent.ACTION_VIEW,
                                    Uri.parse(url));
                                    startActivity(mIntent);
                                } catch (JSONException e) {
                                    e.printStackTrace();
                                } catch (MalformedURLException e) {
                                    e.printStackTrace();
                                } catch (IOException e) {
                                    e.printStackTrace();
                                }

                            }
                        });
                    }
                }, null); 
```

将照片发布到特定相册，使用 JSONObject 获取 photoID，然后重定向到用户可以确认将照片设置为他/她的个人资料图片的网页。

# php - 订购印地语字符

> ID：12254132
> 
> 赞同：3
> 
> 时间：2012-09-03T21:19:55.373
> 
> 标签：php, arrays, special-characters, collation, hindi

我有一个按字母顺序呈现关键字目录（A、B、C、D....Z、0、1...9）的页面，其中一些关键字是印地语（天城文）。

我的 php 代码遍历字母数组，按第一个字母对关键字进行排序，并为每个字母呈现列，其中包含以相同字母/数字开头的所有相应关键字。

我的问题是对印地语字母数组进行排序。我的数组是：

```
$hindi=array('क','ख','ग','घ','ङ','च','छ','ज','झ','ञ','ट','ठ','ड','ढ','ण','त','थ','द','ध','न','प','फ','ब','भ','म','य','र','ल','व','श','ष','स','ह','ळ','क','ष','ज्','ञ'); 
```

例如，我希望对以下关键字进行排序：एशिया खाना पकाना फोटोग्राफी भारतवालि मसालि

我尝试了一些没有成功的方法，并且我在“印地语”列下呈现印地语关键字并且无序。

有没有办法使用 php 对印地语字符进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:52:28.973

我假设由于某种原因正常排序不起作用（印地语字符在几种语言之间共享，对吗？）以下是如何根据用户定义的字符顺序进行排序

如果第一个字母匹配，您需要使用 usort() 并递归调用来比较下一个字母 - 像这样

```
$words = explode(' ', "एशिया खाना पकाना फोटोग्राफी भारतीय मसाला विध");
usort($words, 'hindiCmp');

function hindiCmp($a, $b) {
    $hindi=array('क','ख','ग','घ','ङ','च','छ','ज','झ','ञ','ट','ठ','ड','ढ','ण','त','थ','द','ध','न','प','फ','ब','भ','म','य','र','ल','व','श','ष','स','ह','ळ','क','ष','ज्','ञ');
    $a1 = array_search(substr($a, 0, 1), $hindi); // first letter of a
    $b1 = array_search(substr($b, 0, 1), $hindi); // first letter of b
    if ($a1 < $b1) {
        return 1;
    } elseif ($a1 > $b1) {
        return -1;
    } else {
        if ((strlen($a) <= 1) && (strlen($b) <= 1)) { //end of both strings?
            return 0; // then it's an exact match
        } else { // otherwise compare the next characters
            return hindiCmp(substr($a, 1), substr($b, 1));
        }
    } 
} 
```

编辑 - 对于好奇 - [http://en.wikipedia.org/wiki/Nagari](http://en.wikipedia.org/wiki/Nagari)

> “[Nagari 被] 几种印度语言使用，包括梵语、印地语、马拉地语、帕哈里语（Garhwali 和 Kumaoni）、尼泊尔语、比利语、孔卡尼语、博杰普里语、马加希语、库鲁克语、尼泊尔语 Bhasa 和信德语。有时用于书写或音译夏尔巴语和克什米尔语。以前用来写古吉拉特语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:33:07.340

您可以使用[排序](http://php.net/sort)：

```
sort($keywords, SORT_NATURAL); 
```

# objective-c - 如何将双精度值转换为 hh:mm？

> ID：12254141
> 
> 赞同：0
> 
> 时间：2012-09-03T21:20:58.590
> 
> 标签：objective-c, cocoa-touch, time, double, percentage

正如上面所说......我不需要秒，因为它不会不断更新。我已经在这个网站和谷歌上搜索了几个小时，但找不到与我需要的完全一样的东西。这是我的代码：

```
//Sets the percentage calculation
double percent = level / 100;
//Calculates the time left while using the following
double a = 40 * percent;
double b = 400 * percent;
double c = 7 * percent;
double d = 6 * percent;

aTime.text = [NSString stringWithFormat:@"%f", a];
bTime.text = [NSString stringWithFormat:@"%f", b];
cTime.text = [NSString stringWithFormat:@"%f", c];
dTime.text = [NSString stringWithFormat:@"%f", d]; 
```

经过计算，比如说，7 小时的 50%，它目前给出了 3.5 小时。我想让它说 3:30。

如您所见，计算是静态的减去水平计算，我只需要知道如何将小数转换为 hh:mm（对于 400 小时来说，甚至可能是几天）。

注意：以上所有数字（40、400、7、6）均以小时为单位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:31:05.167

例子：

```
double hours = 7; 
double percent = 0.5; // 50 percent
int value = hours * percent * 60; // value in minutes
NSString *formatted = [NSString stringWithFormat:@"%02d:%02d",value/60,value%60];
NSLog(@"%@",formatted); 
```

输出：

```
03:30 
```

# java - 如何在java中将数组中的数字排序为两个不同的数组？

> ID：12254145
> 
> 赞同：0
> 
> 时间：2012-09-03T21:21:36.640
> 
> 标签：java, arrays, for-loop

我必须创建一个程序，该程序接受一个包含偶数和奇数的数组，并将所有偶数放入一个数组中，将所有奇数放入另一个数组中。我使用 for 循环遍历所有数字并确定它们是偶数还是奇数，但我遇到的问题是，由于原始数组中的数字是随机的，我不知道偶数的大小或奇数数组，因此无法弄清楚如何将原始数组中的数字分配给偶数/奇数数组，而不会留下一堆点，或者没有足够的点容纳所有数字。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T21:27:10.503

尝试使用 ArrayList。您可以使用

```
num % 2 == 0 
```

查看 num 是偶数还是奇数。如果它确实 == 0 那么它是偶数，否则它是奇数。

```
List<Integer> odds = new ArrayList(); 
List<Integer> evens = new ArrayList();

for (int i = 0; i< array.length; i++) {
   if (array[i] % 2 == 0) {
      evens.add(array[i]);
   }
   else {
       odds.add(array[i]);
   }
} 
```

将 ArrayLists 转换回您可以执行的数组

```
int[] evn = evens.toArray(new Integer[evens.size()]); 
```

（注：未经测试的代码，所以可能有一些错别字）

## 编辑：

如果您不允许使用 ArrayLists，请考虑以下仅使用 Arrays 的内容。它的效率不如原始数组的两次传递

```
int oddSize = 0; 
int evenSize = 0; 

for (int i = 0; i< array.length; i++) {
   if (array[i] % 2 == 0) {
      evenSize++;
   }
   else {
      oddSize++;
   }
}

Integer[] oddArray = new Integer[oddSize];
Integer[] evenArray = new Integer[evenSize];

int evenIdx = 0;
int oddIdx = 0;

for (int i = 0; i< array.length; i++) {
   if (array[i] % 2 == 0) {
      evenArray[evenIdx++] = array[i];
   }
   else {
      oddArray[oddIdx++] = array[i];
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-28T14:47:57.977

您可以在不使用数组或任何 '%' 的情况下做到这一点只是一个简单的想法

```
input = new Scanner(System.in);
    int x;
    int y = 0; // Setting Y for 0 so when you add 2 to it always gives even
                // numbers
    int i = 1; // Setting X for 1 so when you add 2 to it always gives odd
                // numbers
    // So for example 0+2=2 / 2+2=4 / 4+2=6 etc..
    System.out.print("Please input a number: ");
    x = input.nextInt();

    for (;;) { // infinite loop so it keeps on adding 2 until the number you
                // input is = to one of y or i
        if (x == y) {
            System.out.print("The number is even ");
            System.exit(0);
        }
        if (x == i) {
            System.out.print("The number is odd ");
            System.exit(0);
        }
        if (x < 0) {
            System.out.print("Invald value");
            System.exit(0);
        }
        y = y + 2;
        i = i + 2;

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T21:26:25.127

改用 a `List`。然后你不需要提前声明大小，它们可以动态增长。

如果你真的需要一个数组，你总是可以`toArray()`在之后使用该方法。`List`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T22:15:00.337

上述答案是正确的，并描述了人们通常如何实现这一点。但是你的问题的描述让我认为这是一个动态列表可能不受欢迎的类分配。

所以这里有一个替代方案。

将数组排序为奇数和偶数两部分。然后计算有多少奇数/偶数并将值复制到两个数组中。

像这样的东西：

```
static void insertionSort(final int[] arr) {
    int i, j, newValue;
    int oddity;
    for (i = 1; i < arr.length; i++) {
        newValue = arr[i];
        j = i;
        oddity = newValue % 2;
        while (j > 0 && arr[j - 1] % 2 > oddity) {
            arr[j] = arr[j - 1];
            j--;
        }
        arr[j] = newValue;
    }

}

public static void main(final String[] args) {
    final int[] numbers = { 1, 3, 5, 2, 2 };
    insertionSort(numbers);

    int i = 0;
    for (; i < numbers.length; i++) {
        if (numbers[i] % 2 != 0) {
            i--;
            break;
        }
    }

    final int[] evens = new int[i + 1];
    final int[] odds = new int[numbers.length - i - 1];
    if (evens.length != 0) {
        System.arraycopy(numbers, 0, evens, 0, evens.length);
    }
    if (odds.length != 0) {
        System.arraycopy(numbers, i + 1, odds, 0, odds.length);
    }

    for (int j = 0; j < evens.length; j++) {
        System.out.print(evens[j]);
        System.out.print(" ");
    }
    System.out.println();
    for (int j = 0; j < odds.length; j++) {
        System.out.print(odds[j]);
        System.out.print(" ");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T17:41:38.713

使用以下代码：

```
public class ArrayComparing {

    Scanner console= new Scanner(System.in);
    String[] names;
    String[] temp;
    int[] grade;

    public static void main(String[] args) {
        new ArrayComparing().getUserData();
    }

    private void getUserData() {
        names = new String[3];    
        for(int i = 0; i < names.length; i++) {
            System.out.print("Please Enter Student name: ");
            names[i] =console.nextLine();
            temp[i] = names[i];
        }

        grade = new int[3];    
        for(int i =0;i<grade.length;i++) {
            System.out.print("Please Enter Student marks: ");
            grade[i] =console.nextInt();
        }          

        sortArray(names);     
    }

    private void sortArray(String[] arrayToSort) {
        Arrays.sort(arrayToSort);

        getIndex(arrayToSort);
    }

    private void getIndex(String[] sortedArray) {
        for(int x = 0; x < sortedArray.length; x++) {
            for(int y = 0; y < names.length; y++) {
                if(sortedArray[x].equals(temp[y])) {
                    System.out.println(sortedArray[x] + " " + grade[y]);
                }
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T22:17:56.513

我想象有两种可能性，如果你不能使用列表，你可以迭代两次来计算偶数和奇数的数量，然后构建两个具有该大小的数组并再次迭代以在每个数组中分配数字，但是这个解决方案是缓慢而丑陋的.

我想象另一种解决方案，仅使用一个数组，即包含所有数字的同一个数组。您可以对数组进行排序，例如在左侧设置偶数，在右侧设置奇数。然后你有一个索引与数组中的位置与这两个部分的分离。在同一个数组中，您有两个带有数字的子数组。当然使用有效的排序算法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T22:52:05.247

遍历您的源数组两次。第一次通过，计算奇数和偶数的数量。由此，您将知道两个目标数组的大小。创建它们，然后再通过源数组，这次将每个值复制到相应的目标数组。

# redirect - 根据分辨率的设备重定向网站的几页

> ID：12254150
> 
> 赞同：0
> 
> 时间：2012-09-03T21:22:05.377
> 
> 标签：redirect, responsive-design

我需要根据分辨率对我网站的几页进行重定向。例如：如果我的网站上有 10 个页面，并且如果用户使用桌面访问它，我希望页面 3、4 和 5 被重定向，我必须做什么？我有一个特定结构的网站，目标是重定向通过桌面导航某些页面的用户，但允许使用移动设备导航的用户查看此页面（这些页面是专门为此制作的）。我知道有多种方法：脚本 js 或 php，.htaccess，但我对此知之甚少。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:44:07.597

首先，我认为您需要重新考虑您的用户界面。如果用户在移动设备上访问该网站并找到他们需要的内容并将其转发到他们的桌面，他们将无法访问该内容。

查看[Categorizr](http://www.brettjankord.com/2012/01/16/categorizr-a-modern-device-detection-script/)，它有助于将不同的支持 Web 的设备分为 4 类：台式机、电视、平板电脑或移动设备。

# android - 从微调器中的选择中查询 SQLite 数据到 TextView

> ID：12254153
> 
> 赞同：0
> 
> 时间：2012-09-03T21:22:21.080
> 
> 标签：android, sqlite, spinner

我正在查询我的数据库以填充我的微调器选择（这工作正常），但我还想从所选位置在 Activity 的其余部分填充一些 TextView。这是我处理活动的类：

```
public class Post_Player_Info extends Activity implements OnItemSelectedListener{

DBAdapter db = new DBAdapter(this);
Spinner spinner;
TextView SportType;
Button Left, Right, Front, Back;
DBAdapter Info = new DBAdapter(this);

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.postplayerinfo);

    spinner = (Spinner) findViewById(R.id.spinner1);
    SportType = (TextView) findViewById(R.id.tvSportType);

    db.open();

    Cursor c = db.getNames();

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item,
        c,  new String[] {DBAdapter.ROW_FIRSTNAME}, 
        new int[] {android.R.id.text1});

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);

    db.close();

}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub

    int position = spinner.getSelectedItemPosition();
    switch (position) {
    case 0: 
        Info.open();
        String data = Info.getData();
        SportType.setText(data);
        Info.close();
    break;

    }

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

}

这是我试图在我的 dbhelper 中获取数据的地方：

```
public String getData() {
    // TODO Auto-generated method stub
    String [] columns = new String [] {ROW_SPORT};
    Cursor c = db.query(DATABASE_TABLE1, columns, null, null, null, null, null);
    String results = "";

    int sport = c.getColumnIndex(ROW_SPORT);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        results = results + c.getString(sport) + " ";
    }
    return results;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:30:37.990

嗯，我不确定问题是什么......但这是我的猜测：

我在 onCreate() 中没有看到这一行：

```
spinner.setOnItemSelectedListener(this); 
```

* * *

另请阅读[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)，它建议变量 like`SportText`应以小写字母 like 开头`sportText`。

* * *

我注意到你同时拥有`db`and `Info`，但他们做同样的事情。您可以删除其中之一。

# android - 从服务更新 UI

> ID：12254154
> 
> 赞同：2
> 
> 时间：2012-09-03T21:22:42.040
> 
> 标签：android, service, google-cloud-messaging

我已遵循此代码：[如何在 android 中使用 GCM 获取 RegistrationID](https://stackoverflow.com/questions/11516782/how-to-get-registrationid-using-gcm-in-android)

但我想用收到的消息更新`TextView`。`MainActivity`请帮助我为什么我不知道如何从服务更新 UI

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T21:26:53.430

我建议在这里使用广播接收器。因此`IntentService`将广播该事件，并且所有活动或其他东西都可以注册它。

为了避免过度`BroadcastReceivers`杀伤（因为它们旨在用于进程间通信并且可能是过度杀伤和安全漏洞） - 我建议使用`LocalBroadcastManager`- [http://developer.android.com/reference/android/support/v4/内容/LocalBroadcastManager.html](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)。它是严格本地广播的助手，更容易处理它们并提供更高的性能和安全性。

**更新：**

要在 GCM IntentService 中使用 LocalBroadcastReceiver，您应该执行以下操作：

```
@Override
protected void onMessage(Context context, Intent intent) {
    Intent bIntent = new Intent("custom-event-name");
    // You can also include some extra data.
    bIntent .putExtra("message", intent); //or get some info from Gcm intent and put it into this one.
    LocalBroadcastManager.getInstance(context).sendBroadcast(bIntent);
} 
```

在这里你可以检查如何在你的活动中注册接收器，这很简单：[如何使用 LocalBroadcastManager？](https://stackoverflow.com/questions/8802157/how-to-use-localbroadcastmanager)

祝你好运

# sql - 合并\合并两个数据表

> ID：12254155
> 
> 赞同：1
> 
> 时间：2012-09-03T21:22:43.317
> 
> 标签：sql, vb.net, linq

我正在尝试合并\组合两个数据表。我查看了各种示例和答案，但它们似乎创建了重复的行或需要索引（合并数据表等）

我不能通过 SQL 执行此操作，因为一个源来自通过 MSSQL 访问的链接 Oracle 服务器，另一个来自没有链接访问的不同 MSSQL 服务器。

目前数据很简单：

```
Name, Email, Phone 
```

数据表1：

```
"John Clark", "", "01522 55231"
"Alex King", "alex.king@somecompany.com", "01522 55266"
"Marcus Jones", "marcus.jones@somecompany.com", "01522 55461" 
```

数据表2：

```
"John Clark", "john.clark@somecompany.com", "01522 55231"
"Alex King", "alex.king@somecompany.com", ""
"Marcus Jones", "marcus.jones@somecompany.com", "01522 55461"
"Warren bean", "warren.bean@somecompany.com", "01522 522311" 
```

提供具有以下内容的数据表：

```
"John Clark", "john.clark@somecompany.com", "01522 55231"
"Alex King", "alex.king@somecompany.com", "01522 55266"
"Marcus Jones", "marcus.jones@somecompany.com", "01522 55461"
"Warren bean", "warren.bean@somecompany.com", "01522 522311" 
```

名称是匹配记录的字段，第一个数据表优先。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:27:36.483

您应该能够使用 组合列表`Union`，然后制作列表`Distinct`。

为了使 Distinct 正常工作，您需要实现[IEqualityComparer](http://msdn.microsoft.com/en-us/library/ms132151.aspx)（您也可以将 an 传递`IEqalityComparer`给`Union`.

例如 - 假设您`Person`从每个来源获得相同类的列表：

```
Dim allList = dataTable1List.Union(dataTable2List).Distinct(New PersonComparer()) 
```

一个例子`PersonComparer`可能是：

```
Public Class PersonComparer
    Implements IEqualityComparer(Of Person)

    Public Overloads Function Equals(ByVal a As Person, ByVal b As Person) As Boolean Implements IEqualityComparer(Of Person).Equals
        Return a.Name = b.Name
    End Function
    Public Overloads Function GetHashCode(ByVal a As Person) As Integer Implements             IEqualityComparer(Of Person).GetHashCode
        Return a.GetHashCode()
    End Function
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:27:26.520

如果一切都失败了，您始终可以使用[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)将 2 个表合并为 1 个结果。

```
select name from datatable1 where ...
UNIION ALL
select name from datatable2 where ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T21:36:12.537

1.  您可以做一个小型应用程序（使用任何编程语言），它将连接到两个数据库并进行所有比较和合并的工作。
2.  您可以在第一个 mssql 服务器中从 oracle 克隆您的表，然后您可以从第一个 mssql 服务器导出/备份您的数据并导入/恢复到临时表中的第二个 mssql 服务器，之后您可以通过仅使用 sql 来合并数据
3.  您可以在 csv 文件中直接从 oracle 导出数据，之后您将导入到临时表中的第二个 msssql 服务器，然后您将能够仅使用 t-sql 进行所有合并

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T21:52:41.257

这是一种`Linq-To-DataSet`应该[非常有效](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)的方法，因为它使用`Except`and `Join`。

```
Dim t1Names = From t In table1 Select t.Field(Of String)("Name")
Dim t2Names = From t In table2 Select t.Field(Of String)("Name")
Dim newt2Names = t2Names.Except(t1Names)
Dim newT2Rows = From t2 In table2
               Join newName In newt2Names
               On t2.Field(Of String)("Name") Equals newName
               Select t2
Dim updates = From t1 In table1
             Join t2 In table2
             On t1.Field(Of String)("Name") Equals t2.Field(Of String)("Name")
             Where  t1.Field(Of String)("Email") <> t2.Field(Of String)("Email") _
             OrElse t1.Field(Of String)("Phone") <> t2.Field(Of String)("Phone")
For Each newt2 As DataRow In newT2Rows
    Dim newT1 = table1.Rows.Add()
    newT1.ItemArray = newt2.ItemArray
Next
For Each u In updates
    If String.IsNullOrEmpty(u.t1.Field(Of String)("Email")) Then
        u.t1.SetField("Email", u.t2.Field(Of String)("Email"))
    End If
    If String.IsNullOrEmpty(u.t1.Field(Of String)("Phone")) Then
        u.t1.SetField("Phone", u.t2.Field(Of String)("Phone"))
    End If
    If String.IsNullOrEmpty(u.t2.Field(Of String)("Email")) Then
        u.t2.SetField("Email", u.t1.Field(Of String)("Email"))
    End If
    If String.IsNullOrEmpty(u.t2.Field(Of String)("Phone")) Then
        u.t2.SetField("Phone", u.t1.Field(Of String)("Phone"))
    End If
Next 
```

请注意，如果您还想将新行从 table1 添加到 table2，它可能不完整，但我希望它能给您一个想法。

编辑：这是您的示例数据（如果有人想测试）：

```
Dim table1 = New DataTable
Dim table2 = New DataTable
table1.Columns.Add("Name")
table1.Columns.Add("Email")
table1.Columns.Add("Phone")
table2.Columns.Add("Name")
table2.Columns.Add("Email")
table2.Columns.Add("Phone")
table1.Rows.Add("John Clark", "", "01522 55231")
table1.Rows.Add("Alex King", "alex.king@somecompany.com", "01522 55266")
table1.Rows.Add("Marcus Jones", "marcus.jones@somecompany.com", "01522 55461")

table2.Rows.Add("John Clark", "john.clark@somecompany.com", "01522 55231")
table2.Rows.Add("Alex King", "alex.king@somecompany.com", "")
table2.Rows.Add("Marcus Jones", "marcus.jones@somecompany.com", "01522 55461")
table2.Rows.Add("Warren bean", "warren.bean@somecompany.com", "01522 522311") 
```

# design-patterns - 紧密耦合对象的症状是什么？

> ID：12254161
> 
> 赞同：0
> 
> 时间：2012-09-03T21:23:48.057
> 
> 标签：design-patterns, architecture, application-design, decoupling, tightly-coupled-code

在设计应用程序时，您何时知道您的对象是紧密耦合的？紧密耦合的对象/代码的症状是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T21:37:39.090

让我们取两个对象 A 和 B：

为简单起见，假设 A 具有以下性质

名称：字符串 年龄：整数 DateOfBirth：DateTime

B有以下方法：

CreateInstanceOfA(string Name, Integer Age, Datetime DateOfBirth) 并返回 A 的实例，其值已初始化为方法参数。

现在，假设您向 A 添加一个新属性：

状态码：字符串

现在你有问题了。您是否更新了 CreateInstanceOfA 以包含新属性？如果是这样，您必须在所有引用它的地方更改代码以包含新字段。如果您选择的语言支持运算符重载，您可以添加一个新方法。它可能不会破坏编译，但您仍然需要更新代码。更糟糕的是，您将使用旧方法，并且必须在创建后手动设置新属性。

儿子 A 和 B 确实是紧密耦合的。

这不是最好的例子，但它是一种快速查看设计更改可能产生的后果的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T21:26:59.840

*当您的设计中的一个小*改动影响*大量*（可能与您的更改无关）类 时，您知道您的设计是紧密耦合的。

`Class D`是一个为其他类提供一些功能的类。
`Class A`,`Class B`并**直接**`Class C`使用。中的*任何*变化都会影响和。 现在假设我们想要增强以验证来自 class 的任何操作。在不影响的情况下是不可能的，并且我们不关心身份验证。由于新的需求，必须重构整个事情。 ***`D``A``B``C`
`D``A``B``C`***

 ***其他例子：直接访问数据库。使用的数据库中的任何更改都可能影响整个代码（例如，如果您在**不**使用 的情况下`SQL`全部执行语句）。您的业务逻辑不会改变，但切换数据库的新要求会影响您的*所有*代码**`DAO`**

 **** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T21:53:43.503

经验法则是计算给定类引用了多少其他类。有几种方法可以查看：

*   导入数 (Java)、使用数 (C#)、包含数 (C++) 等。
*   类中的字段/成员变量数
*   方法的参数数量
*   间接类型引用的数量（例如`a.getB().getC().getD()`）

对任何这些类型的更改都可能导致紧密耦合的类也发生更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T15:56:13.640

如果您的对象是，您可能会遇到紧密耦合：

*   **很难改变**。*症状*：每次编写依赖项的新变体并希望与之通信时，都需要将 if 语句添加到类中。您的代码库有大量的 if 语句可能对全局变量进行操作，这使得调试和维护成为一场噩梦。

*   **脆弱**。*症状*：对象中的错误可能会波及整个系统中意外数量的其他对象。由于依赖项之间缺乏明确的约定，因此很难预测您想要对对象进行的更改的后果。

*   **难以重复使用**。*症状*：在不同的上下文中重用一个对象意味着拖拽它的所有依赖项及其细节，其中一些可能与新的上下文无关。

*   **很难测试**。*症状*：您的自动化测试需要在执行任何操作之前将大量对象粘合在一起，这使它们变得非常缓慢。您的测试很脆弱 - 一个对象的细节变化会影响其所有依赖项的测试设置，并且它们很容易变红。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T21:56:25.800

得[墨忒耳定律](http://en.wikipedia.org/wiki/Law_of_Demeter)解释了松散耦合的一些简单准则。

在实践方面，您还可以查看[Lattix](http://www.lattix.com/node/82)，这是一个 Eclipse 插件，可帮助您映射和重构依赖项******

# java - 春季安全定制

> ID：12254166
> 
> 赞同：2
> 
> 时间：2012-09-03T21:24:22.470
> 
> 标签：java, spring, spring-mvc, spring-security

我希望能够稍微更改弹簧安全性，以便可以通过 Principal 对象访问名称、电子邮件。

另外要登录，我想使用电子邮件而不是用户名。

我从哪里开始，或者这已经可能了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:32:12.557

根本不是不可能的。不过，您需要提供自己的 UserDetails 实现。它一点也不难。[本文](http://www.theserverside.com/tip/-Spring-Security-Customizing-Your-User-and-Authorization-in)展示了一种可行的方法。以下是我最近使用的一些代码：

我首先提供适合我目的的自己的 UserDetails 实现。实际上，我在 Staff 类中有所有额外的细节，并且只是从 MyUser 到 Staff 的多对一引用。但是，我为这个答案简化了它，只是将 fullName 和 email 属性直接包含在 MyUser 类中。

```
public class MyUser implements UserDetails {

  @NotNull
  @Size(min = 3, max = 50)
  private String username;

  @NotNull
  @Size(min = 3, max = 256)
  private String password;

  private Boolean enabled;

  private Boolean accountNonLocked;

  private Boolean accountNonExpired;

  private Boolean credentialsNonExpired;

  private String email;

  private String fullName;

  private GrantedAuthority authorities;

  @Override      
  public Collection<GrantedAuthority> getAuthorities() {
    return authorities;
  }

  @Override
  public String toString() {
    return username;
  }

  @Override
public boolean isAccountNonExpired() {
      return this.accountNonExpired;
  }

  @Override
public boolean isCredentialsNonExpired() {
      return this.credentialsNonExpired;
  }

  @Override
public boolean isAccountNonLocked() {
      return this.accountNonLocked;
    }

  @Override
public boolean isEnabled() {
      return this.enabled;
    }

    public String getEmail(){
        return email;
    }

    public String getFullName(){
        return fullName;
    }
} 
```

然后我提供了自己的用户详细信息服务实现，因为我使用 Hibernate 将所有内容保存在数据库中。您可能需要不同的实现：

```
public class MyUserDetailsService implements UserDetailsService {

  @Override
  public UserDetails loadUserByUsername(String username)
        throws UsernameNotFoundException, DataAccessException {
      UserDetails userDetails = null;

    TypedQuery<MyUser> q = MyUser
            .findMyUsersByUsernameEquals(username);
    userDetails = q.getSingleResult();
    if (userDetails == null)
       throw new UsernameNotFoundException("user not found");
    return userDetails;
  } 

} 
```

然后在 applicationContext-security.xml 文件中我添加了这个：

```
 <!-- Add a custom UserDetailsService -->
<beans:bean id="udservice" class="my.package.name.security.MyUserDetailsService"></beans:bean> 
```

和这个：

```
<!-- Configure Authentication mechanism -->
<authentication-manager alias="authenticationManager">      
    <authentication-provider user-service-ref="udservice">
        <password-encoder hash="sha-256" />     
    </authentication-provider>
</authentication-manager> 
```

现在，当您访问已登录的用户时，您将获得您的类的一个实例并访问其所有属性。

# php - 使用 PHP 更新外部 .js 中的 Javascript 变量？

> ID：12254168
> 
> 赞同：0
> 
> 时间：2012-09-03T21:24:37.167
> 
> 标签：php, javascript, variables

我正在尝试创建一个可以从其他域引用的 Javascript 文件，该文件将允许更改用户页面的外观。

例如，javascript 文件 (www.mywebsite.com/123.js) 将在 www.userwebsite.com 上引用，并且可能包含以下内容：

```
var thebody = document.getElementsByTagName('body')[0];
var newdiv = document.createElement('div');
var txtNode = document.createTextNode("Hello. This is a new node.");   
var divIdName = "mydiv";
var csslink = "http://www.anotherwebsite.com/style.css";
var newcss = document.createElement('link');
newcss.setAttribute('href',csslink);
newcss.setAttribute('rel','stylesheet');
newcss.setAttribute('type','text/css');
newdiv.setAttribute('id',divIdName);
newdiv.appendChild(txtNode);
thebody.appendChild(newdiv);
thebody.appendChild(newcss); 
```

这将插入对托管在用户网站上的 CSS 文件的引用，并使用文本节点“你好。这是一个新节点”向 DOM 添加一个新 div。

我希望用户能够登录到 CMS（我将构建），这样他们就可以更改打印到页面的文本，而无需更改我提供给他们的 Javascript 文件。CMS 将托管在我的网站上。

这样做的最佳做法是什么？

显然，我可以远程编辑 javascript 文件，而用户无需更改任何内容 - 但这是更新脚本的最佳方法吗？

我正在考虑在 javascript 中有一个 Ajax 请求，该请求从引用 mysql 数据库的 php 文件中检索输出，其中包含用户想要更改的文本 - 但是，相同的来源策略意味着这是不可能的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:28:39.393

您不需要使用 AJAX 来检索 PHP 输出；让客户将`<script />`标签添加到他们的页面，并将`src`属性设置为您的 PHP 输出；只需确保您的脚本发出有效的 JavaScript。

由于您的 Web 服务器现在认为它位于 PHP 领域而不是 JS 资产中，因此请确保发出正确的页眉；MIME 类型和过期时间浮现在脑海中。

```
header('Content-Type: application/x-javascript');
header('Last-Modified: Mon, 03 Sep 2012 22:33:44 GMT'); 
```

此外，请注意您的脚本将在其中执行的不可靠且“敌对”的环境。您应该尽量减少 JavaScript 脚本声明的全局变量的数量，以降低冲突的风险。最简单的方法是将代码包装在 IIFE 中；

```
// Look ma, no global variables!
(function () {

var thebody = document.getElementsByTagName('body')[0];
var newdiv = document.createElement('div');
var txtNode = document.createTextNode("Hello. This is a new node.");   
var divIdName = "mydiv";
var csslink = "http://www.anotherwebsite.com/style.css";
var newcss = document.createElement('link');
newcss.setAttribute('href',csslink);
newcss.setAttribute('rel','stylesheet');
newcss.setAttribute('type','text/css');
newdiv.setAttribute('id',divIdName);
newdiv.appendChild(txtNode);
thebody.appendChild(newdiv);
thebody.appendChild(newcss);

}()); 
```

您还应该考虑为您的 CSS 类、元素 ID 等添加前缀，以尽量减少与主机命名方案的冲突。

# java - 命令顺序？

> ID：12254169
> 
> 赞同：0
> 
> 时间：2012-09-03T21:24:47.880
> 
> 标签：java, android

我写了这段代码

```
 WindowManager.LayoutParams params = getWindow().getAttributes();
    params.flags |= LayoutParams.FLAG_KEEP_SCREEN_ON;
    params.screenBrightness = 0.1F;
    getWindow().setAttributes(params);

    SystemClock.sleep(5000);

    TextView Text01 = (TextView) findViewById(R.id.Text1);
    Text01.setText("Hello"); 
```

设置屏幕亮度，然后在 5 秒后显示文本。问题是它会等待 5 秒，然后 Android 会调暗屏幕并同时输出文本。为什么它不能按顺序工作？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:52:50.893

我的猜测是代码在 UI 线程中运行，这意味着在您的函数退出之前没有任何内容被绘制到 UI。您可能希望设置某种回调来触发将来更改文本。也许是一个[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，其中休眠发生在后台线程中，而 UI 更改代码发生在`onPostExecute`.

# apache - Apache 中的选项

> ID：12254173
> 
> 赞同：0
> 
> 时间：2012-09-03T21:25:28.587
> 
> 标签：apache, options, multiviews

我正在使用`Options +FollowSymLinks -MultiViews`，但这会导致在输出到页面时在这些目录中查看图像时出现问题。一旦我从 .htaccess 中删除它，所有图像都显示正常。

有没有更好的替代方法可以让我在服务器上的文件夹中正常查看图像？老实说，我想知道实际上是什么导致了这一切。

删除这条线会导致任何安全风险吗？

# c# - 创建站点范围的自定义列表视图解决方案

> ID：12254175
> 
> 赞同：0
> 
> 时间：2012-09-03T21:25:31.587
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010

为什么看起来如此简单，却如此难以弄清楚的事情？

我想创建一个可部署的解决方案 (.wsp)，它只是文档库的自定义列表视图。

它应该可供所有文档库使用，即列在库 | 下功能区的下拉列表中。图书馆工具 | 目前看来。它必须是完全定制的，包括在`<head`> 标记和`<script`正文中使用 jquery 和其他 javascript 库的 > 标记中对 javascript 库和 css 样式表的引用。它是一个农场解决方案，不是沙盒，也不是幽灵。

在 Sharepoint Designer 中创建新视图并在 XSLTListViewWebPart 中编辑 HTML 很容易。（选择 Web 部件，然后选择列表视图工具 | 设计 | 自定义 XSLT | 自定义整个视图）但此处创建的视图仅适用于一个列表，不能部署为 .wsp 解决方案。

在 Visual Studio 2010 中创建可视化 Web 部件很容易，但是从那里开始呢？

这似乎是人们想要做的一件非常基本的事情，但我找不到任何解释如何做的文章或教程。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:15:38.303

如果打算拥有新视图的所有列表都有共同的列，您可以做的是，编辑一个列表并在列表中添加新视图，一旦完成，您可以将此列表保存为模板（从设置页面) 用于新列表。模板保存为`.stp`您也可以下载的文件。但是仍然没有农场范围的方式（据我所知）来生成和部署这样的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T11:02:28.080

您将无法拥有“一刀切”的列表视图解决方案，但您可以以编程方式创建列表视图。您必须为每个列表创建列表视图（对于每个列表）。

[可以在此处找到](http://sarangasl.blogspot.de/2009/12/create-sharepoint-list-view.html)有关如何以编程方式创建列表视图的示例。您将能够定义 HTML（您可能已在 SP Designer 中设计）。列表视图的问题在于它特定于列表，并非所有列表都具有相同的列，因此很难创建通用的东西。

# r - R Zoo - 聚合许多具有相同时间条目的记录

> ID：12254182
> 
> 赞同：2
> 
> 时间：2012-09-03T21:26:06.407
> 
> 标签：r, zoo

我一直需要获取交易数据并按天、周、月、季度、年进行汇总——本质上，它是时间序列数据。我开始将`zoo`/`xts`应用于我的数据，希望可以更快地聚合数据，但我要么不完全理解包的用途，要么试图错误地应用它。

一般来说，我想按类别、时间段（天、周、月等）计算订单数量和订购产品数量。

```
#Create the data
clients <- 1:10
dates <- seq(as.Date("2012/1/1"), as.Date("2012/9/1"), "days")
categories <- LETTERS[1:5]
products <- data.frame(numProducts = 1:10, 
                       category = sample(categories, 1000, replace = TRUE),
                       clientID = sample(clients, 1000, replace = TRUE), 
                       OrderDate = sample(dates, 1000, replace = TRUE)) 
```

我可以用`plyr`and来做到这一点`reshape`，但我认为这是一种迂回的方式。

```
#Aggregate by date and category
products.day <- ddply(products, .(OrderDate, category), summarize, numOrders = length(numProducts), numProducts = sum(numProducts))

#Aggregate by Month and category
products.month <- ddply(products, .(Month = months(OrderDate), Category = category), summarize, numOrders = length(numProducts), numProducts = sum(numProducts))

#Make a wide-version of the data frame
products.month.wide <- cast(products.month, Month~Category, sum) 
```

我试图`zoo`像这样应用到数据：

```
products.TS <- aggregate(products$numProducts, yearmon, mean) 
```

它返回了这个错误：

```
Error in aggregate.data.frame(as.data.frame(x), ...) : 
  'by' must be a list 
```

我已阅读`zoo`小插图和文档，但我发现的每个示例仅显示每个时间条目 1 条记录/行/条目。

我是否必须预先汇总我想要时间序列的数据？我希望我可以简单地按我想要的字段进行分组，然后将月份或季度添加到数据框中以增量方式添加到 X 轴。

有没有更好的方法来聚合这个或更合适的包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T21:56:00.540

`products$numProducts`是一个向量，而不是一个动物园对象。您需要先创建一个 zoo 对象，然后才能使用方法调度调用`aggregate.zoo`.

```
pz <- with(products, zoo(numProducts, OrderDate))
products.TS <- aggregate(pz, as.yearmon, mean) 
```

# python - sympy lambdify RuntimeWarning：在 double_scalars 中遇到无效值

> ID：12254195
> 
> 赞同：6
> 
> 时间：2012-09-03T21:27:25.380
> 
> 标签：python, numpy, sympy

我正在使用 sympy 和 numpy 来解决以下问题：

给定一个点 (x0, y0) 和一条曲线 y=a*x**2+b*x+c，计算 (x0, y0) 到 (x,y) 的最小距离。

```
from sympy.core.symbol import symbols
from sympy.solvers.solvers import solve
from sympy.utilities.lambdify import lambdify

x, y = symbols('x y')    
a,b,c, x0, y0 = symbols('a b c x0 y0')
y = a*x**2 + b*x + c
dist2 = (x-x0)**2 + (y-y0)**2
sol = solve(dist2.diff(x), x)
dist2_diff_solve = lambdify( (x0,y0,a,b,c), solve(dist2.diff(x),x), modules='numpy') 
```

到现在为止，一切都很好。我什至可以得到一些结果：

```
dist2_diff_solve(1, 1, 1, 1, 1)

[0.31718264650678707, (-0.9085913232533936-0.8665105933073626j),    
(-0.9085913232533936+0.8665105933073626j)] 
```

但是，使用另一组参数时，我遇到了问题：

```
dist2_diff_solve(664515.9375, 3998106.0, 0.053674994761459802, -71340.561832823907,    23709057427.266102)

*** ValueError: negative number cannot be raised to a fractional power 
```

我认为这是lambdify的一个错误，因为我可以执行以下操作：

```
sol[0].evalf(subs={x0:664515.9375, y0:3998106.0, a:0.053674994761459802, b:-71340.561832823907, c:23709057427.266102})
664515.759983973 + .0e-19*I 
```

我需要lambdify，因为我需要一次计算大量（~100K）的计算（向量化）。任何人都可以确认这是来自lambdify的错误吗？欢迎任何意见/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:11:32.300

我发现了一个相关的问题：[python 中的负 pow](https://stackoverflow.com/questions/4114740/negative-pow-in-python)

并通过将+0j简单地添加到a来解决这个问题，即：

```
dist2_diff_solve(664515.9375+0j, 3998106.0, 0.053674994761459802, -71340.561832823907, 23709057427.266102)

[(664515.7418921513+3.552713678800501e-15j), (664600.9266076663+5.329070518200751e-15j), (664564.8069210749-1.4210854715202004e-14j)] 
```

# jquery - 未捕获的 SyntaxError：意外的令牌函数

> ID：12254197
> 
> 赞同：12
> 
> 时间：2012-09-03T21:27:26.113
> 
> 标签：jquery

尝试运行以下代码时，我不断收到“意外令牌函数”错误。错误出现在该`if(highPriority(priority)) {`行。我感谢任何帮助，谢谢。

```
$(function(){
  $("input[name=task]").focus();

  $("body").on("click","#add",function(){

    var task = $("input[name=task]").val();
    var priority = $(this).parent().children("input[name=priority]"); 
    var doneSpan = '<span class="done">Done</span>';  

    if(highPriorityChecked(priority)) {

    $("#todo").prepend("<p class='row high-priority'>" + task + doneSpan + "</p");

  } else {$("#todo").append("<p class='row normal-priority'>" + task + doneSpan + "</p");
    };

      resetForm();    

      doneList();  

});

}

function highPriorityChecked(priority){
  return $("input[name=priority]").is(":checked");
};

function doneList(){ 
    $("#todo").on("click",".done",function(){
    var row = $(this).parent().detach();
    $("#done").prepend(row).remove(doneSpan);
    });
}

function buildRow(task, priority) {
  var row = '<div class="row item ' + priority + '">' + task;
  var doneSpan = '<span class="done">Done</span>';
  return row + doneSpan + "</div>";
};

function resetForm() {
  $("input[name=task]").val("").focus();
  $("input[name=priority]").removeAttr("checked");
 }; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-30T22:56:48.427

[阿德诺在](https://stackoverflow.com/users/965051/adeneo)[他的评论](https://stackoverflow.com/questions/12254197/uncaught-syntaxerror-unexpected-token-function#comment-16427972)中给出了正确的答案

> 您没有`document.ready`正确关闭该功能，它只是被一个大括号关闭。

他建议如果您正确格式化了代码，您可能会注意到。但我们可以做得更好。

通常，当您在 JavaScript 中遇到语法错误时，请尝试通过[jslint运行](http://jslint.com/)*整个*脚本。这可能有助于指出错误的原因。

# c# - 如何查找dataTable是否包含名称以abc开头的列

> ID：12254200
> 
> 赞同：1
> 
> 时间：2012-09-03T21:27:39.487
> 
> 标签：c#, regex, datatable, dataset, columnname

在我的程序中，我有一个数据表，我想知道是否有一个名称以 abc 开头的列。例如，我有一个 DataTable，它的名字是`abcdef`. 我喜欢使用以下内容查找此列：

```
DataTable.Columns.Constains(ColumnName.StartWith(abc)) 
```

因为我只知道部分列名，所以我不能使用 Contains 方法。有什么简单的方法可以做到这一点吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T21:37:34.460

你可以使用这个：

```
 var datatable = new DataTable();
 var abccolumns = datatable.Columns.Cast<DataColumn>()
                                   .Where(c => c.ColumnName.StartsWith("abc")); 
```

# c# - 使用 DX11 渲染文本

> ID：12254201
> 
> 赞同：4
> 
> 时间：2012-09-03T21:28:03.760
> 
> 标签：c#, text, directx, slimdx, directx-11

我想弄清楚如何在 SlimDX 的屏幕上绘制文本。

初步研究并不令人鼓舞。我发现的唯一具体例子是：

[http://www.aaronblog.us/?p=36](http://www.aaronblog.us/?p=36)

我正在尝试将其移植到我的代码中，但事实证明这非常困难，4 小时后我开始怀疑这是否是正确的方法。

从本质上讲，做一些像在屏幕上写文本这样简单的事情似乎很困难。Aaron 的方法似乎是目前唯一可行的方法。没有其他比较点。

还有其他人可以提供任何建议吗？

PS 我怀疑我现在可以为字母创建单独的图像，并编写一个例程将字符串转换为一系列精灵。不过，这样做似乎有点疯狂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T09:03:14.280

渲染文本确实有点复杂。呈现一般文本的唯一方法是使用 Direct2D / DirectWrite。这仅在 DirectX10 中受支持。所以你必须创建一个 DirectX 10 设备、DirectWrite 和 Direct2D 工厂。然后，您可以创建可供 DirectX 10 和 11 设备使用的共享纹理。

此纹理将包含渲染后的文本。Aaron 使用此纹理将其与全屏融合。因此，您可以使用 DirectWrite 绘制完整的字符串。本质上，这就像绘制一个带纹理的四边形。

正如您已经提到的，另一种方法是绘制一个精灵表并将字符串分成几个精灵。我认为，后一种方式要快一些，但我还没有测试过。我在我的[Sprite & Text 引擎](http://sdxspritetext.codeplex.com/SourceControl/changeset/view/13993#328540)中使用了这种方法。见方法`AssertDevice`和`CreateCharTable`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:38:35.473

有一个不错的 DirectWrite 包装器，名为[http://fw1.codeplex.com/](http://fw1.codeplex.com/)

它在 c++ 中，但是为它制作一个混合模式包装器非常简单（这是我为我的 c# 项目所做的）。

这是一个简单的例子：

.h 文件

```
#pragma once
#include "Lib/FW1FontWrapper.h"
using namespace System::Runtime::InteropServices;

public ref class DX11FontWrapper
{
public:
    DX11FontWrapper(SlimDX::Direct3D11::Device^ device);
    void Draw(System::String^ str,float size,int x,int y,int color);
private:
    SlimDX::Direct3D11::Device^ device;
    IFW1FontWrapper* pFontWrapper;
}; 
```

.cpp 文件

```
#include "StdAfx.h"
#include "DX11FontWrapper.h"

DX11FontWrapper::DX11FontWrapper(SlimDX::Direct3D11::Device^ device)
{
    this->device = device;

    IFW1Factory *pFW1Factory;
    FW1CreateFactory(FW1_VERSION, &pFW1Factory);
    ID3D11Device* dev = (ID3D11Device*)device->ComPointer.ToPointer();

    IFW1FontWrapper* pw;

    pFW1Factory->CreateFontWrapper(dev, L"Arial", &pw); 
    pFW1Factory->Release();

    this->pFontWrapper = pw;
}

void DX11FontWrapper::Draw(System::String^ str,float size,int x,int y, int color)
{
    ID3D11DeviceContext* pImmediateContext = 
        (ID3D11DeviceContext*)this->device->ImmediateContext->ComPointer.ToPointer();

    void* txt = (void*)Marshal::StringToHGlobalUni(str);
    pFontWrapper->DrawString(pImmediateContext, (WCHAR*)txt, size, x, y, color, 0);
    Marshal::FreeHGlobal(System::IntPtr(txt));
} 
```

# ios - 设备上的 AudioUnitRender 调用上的 OSStatus 错误 -50 (paramErr)

> ID：12254202
> 
> 赞同：2
> 
> 时间：2012-09-03T21:28:09.463
> 
> 标签：ios, ios-simulator, signal-processing, core-audio, audiounit

我正在编写一个 iOS 应用程序，它从麦克风捕获音频，使用高通滤波器对其进行过滤，然后通过扬声器播放。

`AudioUnitRender`当我在 iPhone 4S 上运行渲染回调函数时调用渲染回调函数时出现 -50 OSStatus 错误，但它在模拟器上运行良好。

我正在使用一个`AUGraph`，它有一个`RemoteIO`单元、一个`HighPassFilter`效果单元和一个`AUConverter`单元来使 HPF 和输出之间的 ASBD 匹配。转换器`AudioUnit`实例称为`converterUnit`.

这是代码。

```
static OSStatus renderInput(void *inRefCon, AudioUnitRenderActionFlags *ioActionFlags, const AudioTimeStamp *inTimeStamp, UInt32 inBusNumber, UInt32 inNumberFrames, AudioBufferList *ioData)
{

    AudioController *THIS = (AudioController*)inRefCon;

    AudioBuffer buffer;

    AudioStreamBasicDescription converterOutputASBD;
    UInt32 converterOutputASBDSize = sizeof(converterOutputASBD);
    AudioUnitGetProperty([THIS converterUnit], kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &converterOutputASBD, &converterOutputASBDSize);

    buffer.mDataByteSize = inNumberFrames * converterOutputASBD.mBytesPerFrame;
    buffer.mNumberChannels = converterOutputASBD.mChannelsPerFrame;
    buffer.mData = malloc(buffer.mDataByteSize);

    AudioBufferList bufferList;
    bufferList.mNumberBuffers = 1;
    bufferList.mBuffers[0] = buffer;

    OSStatus result = AudioUnitRender([THIS converterUnit], ioActionFlags, inTimeStamp, inBusNumber, inNumberFrames, &bufferList);

    ...

} 
```

我认为 -50 错误意味着其中一个参数是错误的。唯一可能出错的参数是`[THIS converterUnit]`and `&bufferList`，因为所有其余参数都作为参数交给我。我检查了converterUnit 实例，它被正确分配和初始化（更重要的是，如果这是问题所在，它也不会在模拟器上运行）。唯一需要检查的参数是`bufferList`. 到目前为止，我从调试中可以看出 RemoteIO 的输出元素的输入 ASBD 以及`inNumberFrames`手机和模拟器中的不同。但是，我认为这对我来说并没有改变，因为我`AudioBuffer buffer`根据调用产生的 ASBD创建和分配内存`AudioUnitGetProperty([THIS ioUnit], kAudioUnitProperty_StreamFormat, ...)`。

任何帮助将不胜感激，我在这里有点绝望..

你们真棒。

干杯。

**更新：**

这是音频控制器类的定义：

```
@interface AudioController : NSObject
{
    AUGraph mGraph;
    AudioUnit mEffects;
    AudioUnit ioUnit;
    AudioUnit converterUnit;
}

@property (readonly, nonatomic) AudioUnit mEffects;
@property (readonly, nonatomic) AudioUnit ioUnit;
@property (readonly, nonatomic) AudioUnit converterUnit;

@property (nonatomic) float* volumenPromedio;

-(void)initializeAUGraph;
-(void)startAUGraph;
-(void)stopAUGraph;

@end 
```

，这是 AUGraph 的初始化代码（在 中定义`AudioController.mm`）：

```
- (void)initializeAUGraph
{
    NSError *audioSessionError = nil;
    AVAudioSession *mySession = [AVAudioSession sharedInstance];
    [mySession setPreferredHardwareSampleRate: kGraphSampleRate
                                        error: &audioSessionError];
    [mySession setCategory: AVAudioSessionCategoryPlayAndRecord
                     error: &audioSessionError];
    [mySession setActive: YES error: &audioSessionError];

    OSStatus result = noErr;

    // create a new AUGraph
    result = NewAUGraph(&mGraph);

    AUNode outputNode;
    AUNode effectsNode;
    AUNode converterNode;

    // effects component
    AudioComponentDescription effects_desc;
    effects_desc.componentType = kAudioUnitType_Effect;
    effects_desc.componentSubType = kAudioUnitSubType_HighPassFilter;
    effects_desc.componentFlags = 0;
    effects_desc.componentFlagsMask = 0;
    effects_desc.componentManufacturer = kAudioUnitManufacturer_Apple;

    //  output component
    AudioComponentDescription output_desc;
    output_desc.componentType = kAudioUnitType_Output;
    output_desc.componentSubType = kAudioUnitSubType_RemoteIO;
    output_desc.componentFlags = 0;
    output_desc.componentFlagsMask = 0;
    output_desc.componentManufacturer = kAudioUnitManufacturer_Apple;

    // stream format converter component
    AudioComponentDescription converter_desc;
    converter_desc.componentType = kAudioUnitType_FormatConverter;
    converter_desc.componentSubType = kAudioUnitSubType_AUConverter;
    converter_desc.componentFlags = 0;
    converter_desc.componentFlagsMask = 0;
    converter_desc.componentManufacturer = kAudioUnitManufacturer_Apple;

    // Add nodes to the graph
    result = AUGraphAddNode(mGraph, &output_desc, &outputNode);
    [self hasError:result:__FILE__:__LINE__];
    result = AUGraphAddNode(mGraph, &effects_desc, &effectsNode);
    [self hasError:result:__FILE__:__LINE__];
    result = AUGraphAddNode(mGraph, &converter_desc, &converterNode);

    // manage connections in the graph    

    // Connect the io unit node's input element's output to the effectsNode input
    result = AUGraphConnectNodeInput(mGraph, outputNode, 1, effectsNode, 0);

    // Connect the effects node's output to the converter node's input
    result = AUGraphConnectNodeInput(mGraph, effectsNode, 0, converterNode, 0);

    // open the graph
    result = AUGraphOpen(mGraph);

    // Get references to the audio units
    result = AUGraphNodeInfo(mGraph, effectsNode, NULL, &mEffects);
    result = AUGraphNodeInfo(mGraph, outputNode, NULL, &ioUnit);
    result = AUGraphNodeInfo(mGraph, converterNode, NULL, &converterUnit);

    // Enable input on remote io unit
    UInt32 flag = 1;
    result = AudioUnitSetProperty(ioUnit, kAudioOutputUnitProperty_EnableIO, kAudioUnitScope_Input, 1, &flag, sizeof(flag));

    // Setup render callback struct
    AURenderCallbackStruct renderCallbackStruct;
    renderCallbackStruct.inputProc = &renderInput;
    renderCallbackStruct.inputProcRefCon = self;

    result = AUGraphSetNodeInputCallback(mGraph, outputNode, 0, &renderCallbackStruct);

    // Get fx unit's input current stream format...
    AudioStreamBasicDescription fxInputASBD;
    UInt32 sizeOfASBD = sizeof(AudioStreamBasicDescription);

    result = AudioUnitGetProperty(mEffects, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &fxInputASBD, &sizeOfASBD);

    // ...and set it on the io unit's input scope's output 
    result = AudioUnitSetProperty(ioUnit,
                                  kAudioUnitProperty_StreamFormat,
                                  kAudioUnitScope_Output,
                                  1,
                                  &fxInputASBD,
                                  sizeof(fxInputASBD));

    // Set fx unit's output sample rate, just in case
    Float64 sampleRate = 44100.0;

    result = AudioUnitSetProperty(mEffects,
                                  kAudioUnitProperty_SampleRate,
                                  kAudioUnitScope_Output,
                                  0,
                                  &sampleRate,
                                  sizeof(sampleRate));

    AudioStreamBasicDescription fxOutputASBD;

    // get fx audio unit's output ASBD...
    result = AudioUnitGetProperty(mEffects, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &fxOutputASBD, &sizeOfASBD);

    // ...and set it to the converter audio unit's input
    result = AudioUnitSetProperty(converterUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &fxOutputASBD, sizeof(fxOutputASBD));

    AudioStreamBasicDescription ioUnitsOutputElementInputASBD;

    // now get io audio unit's output element's input ASBD...
    result = AudioUnitGetProperty(ioUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &ioUnitsOutputElementInputASBD, &sizeOfASBD);

    // ...set the sample rate...
    ioUnitsOutputElementInputASBD.mSampleRate = 44100.0;

    // ...and set it to the converter audio unit's output
    result = AudioUnitSetProperty(converterUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &ioUnitsOutputElementInputASBD, sizeof(ioUnitsOutputElementInputASBD));

    // initialize graph
    result = AUGraphInitialize(mGraph);

} 
```

我使用渲染回调函数（而不是使用`AUGraphConnectNodeInput`方法）在转换器的输出和远程 io 单元的输出元素的输入之间建立连接的原因是因为我需要在样本被处理后立即对样本进行一些计算高通滤波器。渲染回调让我有机会在`AudioUnitRender`调用后立即查看样本缓冲区，并在那里进行所述计算。

**更新 2：**

通过调试，我发现设备和模拟器上远程 IO 输出总线的输入 ASBD 存在差异。它不应该有什么不同（我根据来自先前`AudioUnitGetProperty([THIS ioUnit], kAudioUnitProperty_StreamFormat, ...)`调用的数据分配和初始化 AudioBufferList），但这是我在设备和模拟器中看到的唯一不同之处。

这是设备上远程 IO 输出总线的输入 ASBD：

```
Float64 mSampleRate        44100
UInt32  mFormatID          1819304813
UInt32  mFormatFlags       41
UInt32  mBytesPerPacket    4
UInt32  mFramesPerPacket   1
UInt32  mBytesPerFrame     4
UInt32  mChannelsPerFrame  2
UInt32  mBitsPerChannel    32
UInt32  mReserved          0 
```

，这是在模拟器上：

```
Float64 mSampleRate        44100
UInt32  mFormatID          1819304813
UInt32  mFormatFlags       12
UInt32  mBytesPerPacket    4
UInt32  mFramesPerPacket   1
UInt32  mBytesPerFrame     4
UInt32  mChannelsPerFrame  2
UInt32  mBitsPerChannel    16
UInt32  mReserved          0 
```

# jquery - 仅在 IE9 上挂起的基于 Jquery 的 webapp

> ID：12254203
> 
> 赞同：0
> 
> 时间：2012-09-03T08:56:25.420
> 
> 标签：jquery, internet-explorer-9

几天以来我一直在这个问题上......

[这](http://epos-couch.cloudant.com/epos-couch/_design/epos-couch/index.html)是我正在谈论的网站。它是一个大量使用主干、视觉搜索、jquery 插件的网络应用程序。该网站目前无法与 IE8 一起使用，但它可以与 IE9 一起使用……如果可以的话！

发生的情况是网站仅在加载 IE9 时挂起，并且（这很奇怪！）如果 IE9 开发人员工具的分析器工具打开，它不会！

它也发生在其他人身上（我收到了通知），所以我很确定这不是与我的浏览器设置相关的问题。

这让我想到了一个与延迟有关的错误，或者迭代函数，在分析器存在的情况下，这些函数被迫延迟 bte 周期，因此将空闲时隙留给渲染页面的其他函数。

如果需要，我可以更新更多细节。谢谢。

**更新 01**

为了简单起见，我报告了我使用的插件列表

```
 <script type="text/javascript" src="script/test/vendor/json2.js"></script>
    <script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>    
    <script type="text/javascript" src="script/jquery.couch.js"></script>
    <script type="text/javascript" src="script/jquery.couchLogin.js"></script> 
    <script type="text/javascript" src="script/underscore.1.3.3-min.js"></script>
    <script type="text/javascript" src="script/backbone.0.9.2.js"></script> 
    <script type="text/javascript" src="script/jquery.colorbox-min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>    
    <script type ="text/javascript" src="script/visualsearch/build/visualsearch.js"></script>
    <script type ="text/javascript" src="script/AjaxStack/src/jsonreport/jsonreport.js"></script>  
    <script type="text/javascript" src="script/highcharts/js/highcharts.js"></script>        
    <script type="text/javascript" src="script/highcharts/js/modules/exporting.js"></script>
    <script type="text/javascript" src="script/jquery.simpletip-1.3.1.pack.js"></script>
    <script type="text/javascript" src="script/mcdropdown/lib/jquery.mcdropdown.js"></script>
    <script type="text/javascript" src="script/mcdropdown/lib/jquery.bgiframe.js"></script>
    <script type="text/javascript" src="script/gMapProgressBar/progressbar.js"></script>
    <script src="script/backbone-render/src/backbone-forms.js"></script>
    <script src="script/backbone-render/src/jquery-ui-editors.js"></script>
    <script type="text/javascript" src="script/atooltip/js/jquery.atooltip.min.js"></script>  
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyBw0v9F-ur6pmeWrwCyFQ17qdZoikBon1Y&sensor=false"></script>
    <script type="text/javascript" src="script/textualizer/textualizer.js"></script>
    <script type="text/javascript" src="script/jquery-download/jquery-download.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:40:51.510

对我有帮助的是删除（注释掉）函数，直到我找到罪魁祸首，但后来我确实有一个错误，即该问题的堆栈空间不足

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:34:31.330

经过长时间的调试，我找到了解决方案：

**IE9 未报告为错误**的问题 是，`console.log()`当开发人员工具关闭时，这些命令会使 IE9 卡住。

此问题的更多信息可以在这篇文章中找到：[IE9是否支持console.log，它是一个真正的功能吗？](https://stackoverflow.com/questions/5472938/does-ie9-support-console-log-and-is-it-a-real-function)

# javascript - 在 Chrome 扩展程序中加载脚本错误

> ID：12254209
> 
> 赞同：1
> 
> 时间：2012-09-03T21:28:52.257
> 
> 标签：javascript, jquery, html, google-chrome-extension

我收到此错误，但我无法找出解决方法：

> 拒绝加载脚本“http://api.ustream.tv/json/channel/...”，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。

有什么办法可以消除这个错误？这是我的json代码。

```
{
    "manifest_version": 2,
    "name": "COD Television Live Checker",
    "version": "1.0",
    "description": "The Official Crome Extension of CodTelevision.com - Live Checker",
    "browser_action": 
    {
    "default_icon": "icon.png",
    "default_popup": "main.html"
    }
    "permissions": ["http://api.ustream.tv/json/channel/*"]
} 
```

和我的html代码：

```
<!DOCTYPE HTML>
<html> 

<head>
<script type="text/javascript" src="jquery-latest.js"></script>
<script type="text/javascript" src="popup.js"></script>
</head>

<body>

<center><span id="status1">No Data</span></center>

</body> 
</html> 
```

最后是我的javascript：

```
var query = 'http://api.ustream.tv/json/channel/...';
jQuery.getJSON(query, function(data) {
    if (data == 'live') {
        document.getElementById("status1").innerText = "LIVE";
    } else {
        document.getElementById("status1").innerText = "OFFLINE";
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T21:45:30.257

您必须在清单文件中设置正确的权限：

```
"permissions": [
  "http://api.ustream.tv/json/channel/*"
] 
```

可以在[文档](http://developer.chrome.com/extensions/manifest.html#permissions)中找到。

**更新**

我看到您正在使用[v2 manifest](http://developer.chrome.com/extensions/manifestVersion.html)。在这种情况下，您应该将以下内容添加到清单中：

```
"content_security_policy": "script-src 'self' http://api.ustream.tv; object-src 'self'", 
```

# android - 是否可以在 Android 应用程序中创建多个屏幕，而只有一个 Activity？

> ID：12254214
> 
> 赞同：0
> 
> 时间：2012-09-03T21:29:35.737
> 
> 标签：android, blackberry, dynamic, stack, screen

通常我会为每个我希望显示的“屏幕”使用不同的活动，使用不同的 XML 文件。

但是我正在使用将 jar 文件动态加载到 android 应用程序中，因此在运行时，我不知道会有多少活动，或者会有多少屏幕。

目前，使用 java 反射，我能够从动态加载的 java 文件中返回一个字符串列表，并将每个列表项作为一个单独的按钮绘制到屏幕上。如果单击这些按钮之一，我希望能够在堆栈上加载不同的“屏幕”。因此，当我从这个新屏幕按下返回时，它会转到调用它的上一个屏幕。

是否可以在不创建新活动并将新意图传递给它并且当然对android清单文件进行相关更改的情况下做到这一点？

以黑莓功能为例 - android 中是否有与黑莓的推送和弹出屏幕等效的功能？屏幕在哪里推动/弹出，只会扩展 MainScreen？

如果有人有问题，或者如果我含糊不清，请发表评论，我会尽力解释自己，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:41:24.327

相当于 BB 的推送/弹出屏幕的 Android 是`startActivity()`/ `finish()`。`ViewSwitcher`但是，您可以通过使用容器视图（如@hasanghaforian 建议的那样）或`setContentView()`在想要更改屏幕时简单地调用新的视图层次结构，在单个活动中管理自己的视图。请注意，当您调用 时`setContentView`，您通过调用获得的任何视图引用都`findViewById`将是陈旧的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:38:25.143

你可以使用`ViewSwitcher`. ViewSwitcher 是一个**在两个视图之间切换**的 ViewAnimator ，并且有一个创建这些视图的工厂。您可以使用工厂来创建视图，也可以自己添加它们。一个 ViewSwitcher 只能有两个子视图，其中一次只显示一个。或者您可以使用`fragments`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T22:40:15.337

如果你提到在同一个活动中是否可以有不同的布局，答案是肯定的。

活动独立于布局，您无需在清单中为活动分配布局，您可以定义活动中使用的布局，从 Activity 类调用 setContentView() 方法来设置布局。

因此，如果您想要一些布局（屏幕），您唯一需要做的就是定义各种布局并在您想要调用 setContentView(R.layout.the layout) 时使用它们，在此调用之后，将显示选择的布局。

如果您不能通过xml静态创建布局，您可以根据需要在每次需要时通过代码动态创建它。

另外你可以有一堆布局，每次你需要一个新的屏幕，构建它，将它压入堆栈并调用 setContentView() 方法，当你不再需要它时，弹出堆栈并调用 setContentView( ) 与堆栈顶部的新布局。

希望对你有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T23:03:41.730

在我看来，您应该使用 Fragment。我假设您有一些代码可以在其中迭代字符串：

```
for(String def : definitions) {
   Fragment f = new CustomFragment();
   Bundle b = new Bundle();
   b.putString("STRING_DEF",def);
   f.setArguments(b);
   fragments.add(f);
} 
```

在上面的代码中，`Framents`刚刚创建了一个集合。让我们看一下`CustomFragment`实现：

```
CustomFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        String def = getArguments.getString("STRING_DEF");
        //write code to create view
        return view;
    }
} 
```

现在在你的`ListActivity`你必须或多或少地像这样实现点击监听器

```
public void onListItemClick(ListView l, View v, int position, long id) {
    FragmentManager fragMgr = getFragmentManager();
    FragmentTransaction t = fragMgr.beginTransaction();
    t.replace(R.id.id_of_view_place_holder_for_fragment, 
        fragments.get(position),"FRAGMENT_TAG");
    t.commit();
} 
```

# javascript - Android浏览器设置元素尺寸太小

> ID：12254216
> 
> 赞同：5
> 
> 时间：2012-09-03T21:29:52.567
> 
> 标签：javascript, android, browser, viewport

我有一个使用元标记的网站`<meta name="viewport" content="width=device-width, target-densityDpi=device-dpi">`，将 CSS 格式化为`body`屏幕宽度和高度的 Javascript，以及内部具有基于百分比的宽度的元素。

在桌面上，这工作正常。但是，在我的 Android 手机和平板电脑的浏览器上，内容无法正确缩放 - 一切都太小了，双击放大到正确的大小（而不显示整个页面宽度）。这在纵向和横向模式下都会发生，并且缩放级别看起来是相同的，或者至少是相似的。

我有一个警报告诉我 javascript 将正文宽度和高度格式化为什么，它总是正确的，但浏览器觉得需要加载，好像窗口的大小实际上更大。

我知道浏览器会混淆 CSS 像素和真实像素之间存在一些胡说八道，但我认为元标记应该可以解决所有这些问题。

那么如何让浏览器将页面加载到真正的 100% 屏幕尺寸，而不是某种 ~125% 的尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:24:06.260

添加

```
user-scalable=no 
```

对于您的视口元标记，这（至少在我的测试中）强制浏览器以指定的宽度而不是用户/浏览器首选项显示。

# expressionengine - 表达式引擎：每个成员组允许的最大条目数

> ID：12254220
> 
> 赞同：0
> 
> 时间：2012-09-03T21:30:14.413
> 
> 标签：expressionengine

是否可以限制成员可以创建的频道条目数量？我想为每个成员组设置一个最大数量。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:42:54.843

是的，但它需要编写一个扩展。逻辑将是这样的（假设您正在谈论限制后端......从前端，例如，如果您使用的是 Safecracker 输入表单，您需要采取不同的方法):

1.  使用[session_end](http://expressionengine.com/user_guide/development/extension_hooks/global/session/index.html#sessions-end)钩子
2.  检查以确保您在控制面板中 ( `$this->EE->input->get('D') == 'cp'`)
3.  检查以确保您在发布屏幕上 ( `$this->EE->input->get('C') == 'content_publish'`)
4.  查询数据库以查看`exp_channel_titles`有多少条目`channel_id`属于`$this->EE->input->get('channel_id')``$this->EE->session->userdata('member_id')`
5.  如果结果大于您允许的最大值，则向他们显示错误

那应该让你开始。

# web - 寻找基于 Web 的 ftp 客户端

> ID：12254221
> 
> 赞同：0
> 
> 时间：2012-09-03T21:30:26.607
> 
> 标签：web, ftp, ftp-client

我正在寻找一个真正“基于网络”（网站）的 FTP 客户端，用于上传我的 html/web 内容。

到目前为止我发现的是[http://www.net2ftp.com/](http://www.net2ftp.com/)。该网站是我正在寻找的一个很好的例子，但并不像我想象的那么有用。

那么，有人知道更好的网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T20:19:31.780

在服务器端（服务器处理所有 FTP 流量并将其显示给 Web 浏览器和在客户端通过 Java Applet、ActiveX 或 Flash 组件）都有许多可用选项

根据您需要做什么，每个选项都有自己的优势。

例如，如果您需要处理文件夹结构或多个文件，那么客户端 Java Applet 或 ActiveX 将是最佳选择。

如果您只想处理单个文件，那么服务器端选项会更好。

首先搜索“ftp java applet”，它会为您指明正确的方向。

我还编译了一个博客，尝试比较所有基于 Web 的文件传输选项

链接在这里：

[http://www.filecatalyst.com/comparison-of-web-based-file-transfer-methodologies](http://www.filecatalyst.com/comparison-of-web-based-file-transfer-methodologies)

# html - 在 Excel 2007 中禁用自动 HTML 解析

> ID：12254222
> 
> 赞同：0
> 
> 时间：2012-09-03T21:30:31.057
> 
> 标签：html, excel

我正在尝试将一些 HTML 代码粘贴到 Excel 中。我有一个 SQL 查询，它生成 HTML 并在某些点插入图像和文本。然后我需要将其粘贴到 Excel 2007 中的单个字段中。

问题在于 Excel 会自动解析 HTML 并显示完整的网页，包括样式和图片。它还尝试将所有内容分布在几行和几列上。这不好，我想关闭该功能。我只需要纯文本，没有格式。我尝试过特殊粘贴，预先格式化单元格并搜索 Excel 选项，但什么也没找到。

我已经在网上搜索过，但发现关于这个问题的信息非常少。有任何想法吗？

谢谢

# python - 如何在 Blender Python 导出脚本中重新排序指向顶点的索引，以便正确连接我的模型？

> ID：12254228
> 
> 赞同：2
> 
> 时间：2012-09-03T21:31:25.017
> 
> 标签：python, 3d, export, blender

我编写了一个自定义导出器，将 Blender 网格转储为简单的二进制格式。我可以从脚本导出的文件中读取非常简单的模型，例如立方体，但更复杂的模型（例如 Blender 中包含的猴子）不起作用。相反，复杂模型的许多顶点连接错误。我相信当我在我的脚本中循环遍历顶点索引时，我没有按照正确的顺序这样做。如何在 Blender Python 导出脚本中重新排序指向顶点的索引，以便正确连接我的顶点？下面是导出器脚本（带有解释文件格式的注释。）

```
import struct
import bpy

def to_index(number):
    return struct.pack(">I", number)

def to_GLfloat(number):
    return struct.pack(">f", number)

# Output file structure
# A file is a single mesh
#
# A mesh is a list of vertices, normals, and indices
#
# index number_of_triangles
# triangle triangles[number_of_triangles]
# index number_of_vertices
# vertex vertices[number_of_vertices]
# normal vertices[number_of_vertices]
#
# A triangles is a 3-tuple of indices pointing to vertices in the corresponding vertex list
#
# index vertices[3]
#
# A vertex is a 3-tuple of GLfloats
#
# GLfloat coordinates[3]
#
# A normal is a 3-tuple of GLfloats
#
# GLfloat normal[3]
#
# A GLfloat is a big endian 4 byte floating point IEEE 754 binary number
# An index is a big endian unsigned 4 byte binary number

def write_kmb_file(context, filepath):

    meshes = bpy.data.meshes

    if 1 != len(meshes):
        raise Exception("Expected a single mesh")

    mesh = meshes[0]

    faces = mesh.polygons
    vertex_list = mesh.vertices

    output = to_index(len(faces))

    for face in faces:
        vertices = face.vertices
        if len(vertices) != 3:
            raise Exception("Only triangles were expected")

        output += to_index(vertices[0])
        output += to_index(vertices[1])
        output += to_index(vertices[2])

    output += to_index(len(vertex_list))

    for vertex in vertex_list:
        x, y, z = vertex.co.to_tuple()
        output += to_GLfloat(x)
        output += to_GLfloat(y)
        output += to_GLfloat(z)

    for vertex in vertex_list:
        x, y, z, = vertex.normal.to_tuple()
        output += to_GLfloat(x)
        output += to_GLfloat(y)
        output += to_GLfloat(z)

    out = open(filepath, 'wb')
    out.write(output)
    out.close()

    return {'FINISHED'}

from bpy_extras.io_utils import ExportHelper
from bpy.props import StringProperty
from bpy.types import Operator

class ExportKludgyMess(Operator, ExportHelper):
    bl_idname = "mesh.export_to_kmb"
    bl_label = "Export KMB"

    filename_ext = ".kmb"

    filter_glob = StringProperty(
            default="*.kmb",
            options={'HIDDEN'},
            )

    def execute(self, context):
        return write_kmb_file(context, self.filepath)

def register():
    bpy.utils.register_class(ExportKludgyMess)

if __name__ == "__main__":
    register() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-02T08:25:44.527

您很可能只是在倾倒顶点。由于每个顶点都用于多种面文件格式，例如 obj 用“v”表示顶点，用“vn”表示顶点法线，用“vt”表示 UV。然而，这不是抽签顺序。'f' 前缀表示每个面的顶点顺序。为了

示例 f 1/1/1 2/4/3 3/4/5 使用垂直 1,2,3 法线 1,4,4 UV 1,3,5

我知道它很旧，但是嘿。

# .net - 我是否需要 Visual Studio 2012 来编写 .NET 4.5 应用程序？

> ID：12254230
> 
> 赞同：3
> 
> 时间：2012-09-03T21:31:41.033
> 
> 标签：.net, visual-studio

我是否需要 Visual Studio 2012 来编写 .NET 4.5 应用程序？我看到了一些令人困惑的信息，所以我希望得到一个简单的答案。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T21:32:59.310

严格来讲？不可以。您始终可以使用命令行编译器，或者创建项目文件并直接运行 MSBuild。

现实吗？是的。

特别是，如果您的问题*真的*是“我可以从 Visual Studio 2010 使用 C# 5 并以 .NET 4.5 为目标吗？”，答案基本上是否定的。显然，C# 5 周围的 CTP 与 VS2010 集成，但它们肯定在异步中存在错误，你真的*不*应该使用它们。

# python - 尝试“python manage.py shell”时，Django 1.4.1 加载 MySQLdb 模块时出错

> ID：12254232
> 
> 赞同：2
> 
> 时间：2012-09-03T21:31:43.203
> 
> 标签：python, django, django-settings

我正在尝试设置 MySQL，但似乎无法进入 Django manage.py shell 解释器。我确实安装了 MySQL-python 但这并没有解决问题。

得到下面的输出：

* * *

```
rrdhcp-10-32-44-126:django pavelfage$ python manage.py shell
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/commands/shell.py", line 45, in handle_noargs
    from django.db.models.loading import get_models
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/utils.py", line 24, in load_backend
    return import_module('.base', backend_name)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 16, in <module>
    raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named _mysql 
```

* * *

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:57:22.847

您可能缺少该`MySQLdb`模块。你基本上只需要安装它。

从外观上看，您使用的是 Mac，因此您可能需要查看此答案以获取详细的安装说明：[How to install MySQLdb (Python data access library to MySQL) on Mac OS X？](https://stackoverflow.com/questions/1448429/how-to-install-mysqldb-python-data-access-library-to-mysql-on-mac-os-x)

在一个完全替代的解决方案上，正如您提到的您可能想要使用的 Django 开发`sqlite3`而不是`MySQL`，这可能更易于安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:50:38.597

您应该能够从 python shell 导入 MySQLdb。尝试从 python shell 而不是 django 导入 MySQLdb

如果无法从 python shell 导入 MySQLdb；这可能是由于 32-64 位不匹配造成的，

试试这个[链接](http://birdhouse.org/blog/2009/02/21/python-mysql-connections-on-mac-os/)

# ruby-on-rails - 简单的 Ruby on Rails 按钮操作

> ID：12254239
> 
> 赞同：1
> 
> 时间：2012-09-03T21:32:24.617
> 
> 标签：ruby-on-rails, ruby, button

我在帮助文件中有一个方法，我只想在按下按钮时激活它。

```
def add_f01
    @count = Count.find_by_user_id(@user)
    @car = Car.find_by_user_id(@user)

    @car.toggle!(:f01)
    @count.increment!(:v01)
end 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:38:43.017

我在这里创建了一个工作应用程序：[https ://github.com/noahc/stackoverflow](https://github.com/noahc/stackoverflow)

把它拉下来玩玩，这样你就可以了解它是如何工作的。

本质上，您需要以下内容：

```
#routes.rb

match 'f01', to: 'users#call_app_controller'

# Anywhere in your view. I have it in index.html.erb of users
<td><%= button_to 'change name', f01_path(user: user)%></td>

#Application controller
def add_f01(user)
  user.first = "changed in Application Controller"
  user.save
end

 #users_controller
 def call_app_controller
  @user = User.find(params[:user])
  add_f01(@user)
  redirect_to users_path
end 
```

# c# - 按下并释放按钮时如何调用不同的方法？

> ID：12254242
> 
> 赞同：1
> 
> 时间：2012-09-03T21:32:39.867
> 
> 标签：c#, winforms, button

如何在按下按钮时调用方法并在释放按钮时调用另一个方法？

我正在使用 C# WinForms 应用程序中的 PTT（按下通话）按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:35:57.980

使用[`MouseDown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousedown.aspx)和[`MouseUp`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseup.aspx) 事件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T21:38:28.847

```
private void button1_MouseDown(object sender, MouseEventArgs e)
{
   // button is being pressed
}

private void button1_MouseUp(object sender, MouseEventArgs e)
{
   // button was released
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T21:40:03.027

也许是这样的：

```
 private void btn1_MouseDown(object sender, MouseEventArgs e)
    {
        Console.WriteLine("Mouse Button was pressed down on the button");
    }

    private void btn1_MouseUp(object sender, MouseEventArgs e)
    {
        Console.WriteLine("Mouse button Button was released");
    } 
```

单击按钮后查看输出窗口。

## 更新

好的，试试这个，在表单中添加一个文本框并将其命名为 TextBox1，然后将此代码添加到后面的代码中：

```
 private void btn1_MouseDown(object sender, MouseEventArgs e)
    {
        this.TextBox1.Text = "Mouse Button was pressed down on the button";
    }

    private void btn1_MouseUp(object sender, MouseEventArgs e)
    {
        this.TextBox1.Text = "Mouse button Button was released";
    } 
```

# python - 如何优化 python 代码：Euler projec prob 4

> ID：12254251
> 
> 赞同：1
> 
> 时间：2012-09-03T21:33:24.937
> 
> 标签：python

我一直在研究 [Euler 项目问题 4](http://projecteuler.net/problem=4)，我的代码运行良好，但需要花费太多时间（0.41 秒）。如何优化它以减少时间。是否有我遗漏或特殊的技巧我不知道的功能？
这是代码：

```
#Note: tpal is a function to test if number is palindrome

pal =0

for i in range(999,100,-1):
    if pal >= i*999:    #A way to get out of loop and to not test on all numbers
        break 
    for j in range(999,100,-1):
        if pal >= i*999:
            break 
        if j > i:                         #numbers would already have been tested so I skip them 
            continue
        pot=i*j
        if ((tpal(pot)==1)and(pot> pal)):
            pal=pot
            i1=i
            j1=j

print(i1,j1,pal)

def tpal(num):
    num=list(str(num))
    Le=len(num)
    if Le == 1: # if number is of one digit than palindrome
        return 1

    le=len(num)

    if le%2 !=0: #4 example 10101even nbr
        le-=1
    le/2    

    for i in range(0,le):
       if num[i]!=num[Le-i-1]:
           return 0

    return 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:44:08.967

现在事实证明代码的运行时间 < 1 秒，它不再那么有趣了。您可以修改代码以测试更少的数字并尽早放弃。但是有一个明显的优化有点可爱。这一行：

```
 if ((tpal(pot)==1)and(pot> pal)): 
```

每次都检查某事物是否是回文，即使`pot <= pal`. 回文测试很昂贵。如果您只是交换订单：（请注意，您不需要`==1`）：

```
 if (pot > pal) and tpal(pot): 
```

那么你可以节省很多时间：

```
In [24]: timeit orig()
1 loops, best of 3: 201 ms per loop

In [25]: timeit orig_swapped()
10 loops, best of 3: 30.1 ms per loop 
```

因为`A and B`如果 B 已经为假，则不评估 B `A`，因此它知道`A and B`必须为假。（这称为“短路”；如果`A`为真，“A 或 B”也会发生同样的情况。）

顺便说一句，这里的最后一行：

```
if le%2 !=0: #4 example 10101even nbr
    le-=1
le/2    
^^^^ 
```

没有改变`le`。我认为这三行的意思是`le //= 2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T21:48:13.510

试试这个，它不应该花费将近 31 秒：

```
def isPalindrome(n):
    return str(n) == str(n)[::-1]

def listNums():
    a, b, pal = 0, 0, 0;
    for i in range(999, 99, -1):
        for j in range(999, 99, -1):
            n = i * j
            if isPalindrome(n) and n > pal:  # better to use "n > pal and isPalindrome(n)" instead, see other answer for details.
                a, b, pal = i, j, n
    return a, b, pal             

print listNums() 
```

运行此程序大约需要 1 秒。对于这样的事情，你当然不需要`if`循环中那些多余的语句——如果你循环，比如说，`range(9999, 999, -1)`你可能会考虑做一些这样的优化（当然，有很多潜在的优化可以对某些东西进行像这样，例如不循环遍历每个 i,j 对两次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T21:46:04.560

没有给你完整的答案。这里有一些指针。

*   重新考虑你的 for 循环，它们太复杂了。也许内循环应该从`i`?
*   删除所有那些愚蠢的 if 语句，如果你的 for 循环是正确的，你就不需要它们。
*   最后，`int(str(pot)[::-1])==pot`然后是回文

编辑：让男孩/女孩自己解​​决问题。无需在此处发布解决方案。

# javascript - ExtJS 4 Object.prototype 失败

> ID：12254252
> 
> 赞同：0
> 
> 时间：2012-09-03T21:33:34.890
> 
> 标签：javascript, object, extjs, extjs4, prototype

在使用时使用原型有点问题`framework ExtJS version 4.1.1.`

起初，我在加载 ExtJS 之前制作了原型。`"Array.prototype.xyz" and "String.prototype.xyz"`一切正常。Bot`"Object.prototype.xyz"`在 mixin 包含`ExtJS`. 示例我的测试代码：

```
Object.prototype.doSomething = function() {
  console.log('I do it!');
}
var a = {};
a.doSomething(); 
```

来自 ExtJS 的错误消息：

```
Uncaught TypeError: Cannot read property '$childEls' of undefined
And break. 
```

是的。没有“ `Uncaught TypeError`：无法读取未定义的属性'$childEls'”，它可以正常工作。- 不。我目前不使用其他 mixins。- 是的。我尝试只使用一个虚拟面板组件。

问题：在 Object 类对象上原型有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:50:07.567

问题源于 Ext JS 库的基本方法之一：`Ext.merge`

证明这一点非常简单：

```
Object.prototype.doSomething = function(){ console.log("Does something"); };

var emptyObj = {};
console.log(emptyObj.hasOwnProperty("doSomething"));  // Prints "false"

var mergeObj = Ext.merge({}, {a: "b"});
console.log(mergeObj.hasOwnProperty("doSomething"));  // Prints "true" 
```

基本上，每次`Ext.merge`(or `Ext.apply`) 使用对象文字调用时，您的原型方法都会在原型链上“提升”。当您创建面板（或任何组件，实际上）时，类`mixin`对象将与其原型`mixin`对象合并。由于 mixin 在类定义中被定义为对象字面量，因此您的“doSomething”方法会被提升。

然后在 中`Ext.util.ElementContainer#getClassChildEls`，`mixin`假设每个属性都是一个现有的类并尝试访问该对象`mixins[name].self.$childEls`（`mixins[name]`您的“doSomething”方法在哪里）。您的方法没有`self`属性，因此访问`$childEls`会引发错误。

如果您需要每个对象都可用的对象，请将其编写为静态方法，`Object.doSomething`例如`Ext.Object.doSomething`.

# spring - 当在 XML 配置中为同一个 bean 定义两者时，哪个优先，id 或 name？

> ID：12254254
> 
> 赞同：0
> 
> 时间：2012-09-03T21:33:56.813
> 
> 标签：spring

当相同的 bean 采用 id 和 name，同时具有不同的值时，Spring 是否提供了确定性的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:42:49.677

一个 bean 只能有一个名称，但可以有多个名称或别名。你说的优先级是什么意思？在哪种情况下可以应用任何类型的优先级？

# ios - 在 IOS 中一次加载本地化字符串列表

> ID：12254261
> 
> 赞同：0
> 
> 时间：2012-09-03T21:35:17.420
> 
> 标签：ios

我想显示一个带有本地化字符串列表的表格。

直接的方法是：

a) 将数据源指向我的 ViewController

b) 定义一个数组

c) 在我的 ViewController 中分配数组并使用本地化资源 (NSLocalizedString) 中的字符串对其进行初始化 (arrayWithObjects)

d) 在 UITableViewDataSource 委托方法中使用这个数组

我主要关心的是b）项。结构看起来很重，我想知道我是否可以一次指定和加载整个本地化字符串列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:03:18.237

你的意思是你想要一个包含文件中定义的**所有**键的数组吗？`Localizable.strings`

这实际上很容易，因为`.strings`文件的格式与包含字典的 plist 格式的旧 ASCII 样式相对应（通常需要在此旧 ASCII 样式 plist 格式中出现的封闭花括号以包含一个字典被默默地忽略）。

因此，您只需将`Localizable.strings`文件的内容加载到 a`NSDictionary`中即可！

```
NSString* stringsPath = [[NSBundle mainBundle] pathForResource:@"Localizable" ofType:@"strings"];
NSDictionary* locStringsDict = [NSDictionary dictionaryWithContentsOfFile:stringsPath];
NSLog(@"locStringsDict = %@", locStringsDict);
NSArray* localizedStrings = locStringsDict.allValues;
NSLog(@"All localized strings in current language = %@", localizedStrings); 
```

* * *

当然，如果您只想要一些本地化字符串，您可以：

*   将您想要的字符串放在单独的“.strings”文件中（又名不同的字符串表）
*   或者制作一个与您需要的字符串相对应的所有键的 NSArray，然后通过它们循环为这些键构建本地化字符串的 NSArray，调用`NSLocalizedString`每个键条目

* * *

*[编辑]*

请注意，文件似乎在嵌入最终应用程序之前被**`strings`编译成二进制 plist （刚刚在示例项目中对其进行了测试）。**因此，一旦您的应用程序运行，该`Localizable.strings`文件**就是一个二进制 plist**（即`[NSString stringWithContentsOfFile:stringsPath encoding:0 error:nil]`不会返回文件的原始内容，而是将**一些**`Localizable.strings`二进制数据解释为一些垃圾字符串，并且无法再访问原始文件）

因此，如果您想保持键的顺序，唯一的其他选择是`strings`在编译之前解析原始文件，而不是在运行时解析。最好的选择可能是恕我直言，将`strings`文件转换为 XML Plist 使用`plutil -convert xml1 Localizable.strings -o -`并从那里提取键，例如使用一些简单的 XSLT 样式表。样式表甚至可以直接将提取的键转换为一些新的 XML plist，以预期的顺序表示这些键的 NSArray，因此您可以通过代码将此 plist 加载到 NSArray 中并在运行时使用它们。

# jquery - 如果高度 > 某个数字，则添加 CSS 溢出

> ID：12254269
> 
> 赞同：0
> 
> 时间：2012-09-03T21:36:07.430
> 
> 标签：jquery, css

我有一个脚本，在单击搜索时，它会搜索用户并返回列表。该列表可以从 1 到任何数字。我希望列表最大高度为 400 像素并添加溢出-y：滚动到它。

这可能吗？我尝试将它添加到获取列表的函数中，但它只是忽略它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:41:32.203

答案是使用 css max-height 属性。

# javascript - 多个 jquery 画廊

> ID：12254272
> 
> 赞同：0
> 
> 时间：2012-09-03T21:36:13.103
> 
> 标签：javascript, jquery

我正在尝试分离两个 jQuery 画廊，因此它们不会在我的 html 页面上相互链接：

[http://mashanova.com/myFAQ/faqGallery.html#](http://mashanova.com/myFAQ/faqGallery.html#)

这是html：

这是javascript：

```
$(document).ready(function(){

    $('.gallery_thumbnails a').click(function(e){

        e.preventDefault();

        $('.gallery_thumbnails a').removeClass('selected');
        $('.gallery_thumbnails a').children().css('opacity','1');

        $(this).addClass('selected');
        $(this).children().css('opacity','.4');

        var photo_fullsize = $(this).attr('href');
        var photo_preveiw = photo_fullsize.replace('fullsize','preview');

        $('.gallery_preview').html('<a href="'+photo_fullsize+'" style="background-image:url('+photo_preveiw+');"></a>');

    });

}); 
```

# php - 在 html 中提交 sql 查询

> ID：12254273
> 
> 赞同：0
> 
> 时间：2012-09-03T21:36:17.573
> 
> 标签：php, javascript, html

我需要运行这个 sql 查询，它给了我一个 Id 和日期列表，我想单击每个结果并将 Id 值带到我在上面写的这个查询的下一个表单中，但我在 debager 中看到隐藏的 ID 得到他的价值但没有传递到下一个表格我认为我对`submit()`. 我应该把他放在哪里？

```
function ShowAllCarts($user_email) {

    $connB = new ProductDAO();
    $connB->Connect();
    $pro_query = "SELECT * FROM Cart WHERE `Email`='$user_email';";
    $db_result = $connB->ExecSQL($pro_query);

    $html_result = '<div data-role="content"> <ul data-role="listview" data-theme="b"> ';
    $html_result .= '<form action="PreviouscartProduct.php" method="POST"/>';

    while($row_array = $db_result->fetch_array(MYSQLI_ASSOC))
    {
        $Id= $row_array['Id'];
        $Date= $row_array['Date'];

        //$html_result //
        $html_result .="<li><a href='PreviouscartProduct.php'>Cart number: $Id from Date: $Date><input type='hidden' name='Id' value'<?=$Id?>'</input></a></li>'";
        $html_result .= '<a onclick="this.form.submit();" </a>;
    }

        $html_result .= '</form>';  
        $html_result .= ' </ul> </div>';

    $connB->Disconnect();
    return $html_result;
}

//display all carts
$func_result = ShowAllCarts($Email); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:45:06.153

您需要使用一个`checkbox`元素：

```
$html_result .="<li>"
              ."<checkbox name='cartItem[$Id]' value='$Date'>"
              . "Cart number: $Id from Date: $Date"
              . "</li>'"
              ; 
```

然后，在**PreviouscartProduct.php**中，您将遍历 cartItem：

```
$cartItems = $_POST[ 'cartItem' ];
foreach( $cartItems as $id => $date ) {
 ... do something ...
} 
```

如果您只想拿一件物品，为什么不使用这个：

```
$html_result .="<li>"
              . "<a href='PreviouscartProduct.php?cartID=$Id&date=$Date'>"
              . "Cart number: $Id from Date: $Date"
              . "</a>"
              . "</li>'"
              ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:44:31.300

这里有一堆 HTML 语法错误，检查[验证器中的输出](http://validator.w3.org/)

首先，在 this.form.submit(); 之后打开标签不会关闭，它应该是

```
$html_result .= '<a onclick="this.form.submit();">Anchor Text Here</a>'; 
```

编辑：锚元素需要引用表单。给表单元素一个名称属性并使用类似的东西

```
onclick="document.nameattributehere.submit();return false" 
```

在链接上。

结束编辑。

此外，在上面的行中，当您获得输入的 value 属性时，您已经在使用 PHP 解析器，因此不需要

```
<?= and ?> 
```

最后，在同一个标​​签中，您不需要关闭输入标签

```
</input> 
```

只需关闭开始标签

```
/> 
```

这只是一瞥，为其他错误运行验证器，我相信问题会更清楚。

# c++ - llvm/clang 自身重新编译

> ID：12254277
> 
> 赞同：4
> 
> 时间：2012-09-03T21:37:30.233
> 
> 标签：c++, clang

在这里阅读了很多问题后，我决定试一试，并在 Ubuntu 12.04（64 位）上安装了 svn 版本。我期待着问题，但一切顺利编译，没有任何警告。

我注意到，当重新运行配置脚本时，如果 clang/clang++ 在你的路径中，它会选择它而不是 gcc/g++ 来进行自己的编译。自己重新编译 llvm/clang 是个好主意吗？我知道这绝对是 gcc 的标准，但我读过 clang 的 C++ 实现还不够好（也许这是过时的信息......）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:04:26.997

Clang 已经自我托管了几年。失去这种能力将是一个严重的倒退。

Clang 当前的 C++ 支持非常好。甚至大部分 C++11 已经可供您使用。

如果您想安全，请留在稳定的分支上。

# utf-8 - 以 UTF-8 格式输出数据

> ID：12254282
> 
> 赞同：0
> 
> 时间：2012-09-03T21:38:13.720
> 
> 标签：utf-8

我很难以 UTF-8 格式输出数据。我设置了一个测试用例，其中我从输入文件中读取的数据包含英镑符号（Hex C2A3）。当我在 Linux 上写出来时，我得到了有效的 UTF-8 (C2A3)。在 Windows 上，我只得到 HEX A3。

我尝试使用 PrintStream 并将字符集指定为“UTF-8”。没运气。在我最终尝试了 DataOutputStream 之前，我尝试了许多其他流，但都没有运气。我使用了将字节数组作为参数的“write()”方法。我需要输出一个字符串，所以我调用了“myString.getBytes("UTF-8")”。

我最终得到如下代码：

dataOutputStream.write(myString.getBytes("UTF-8"));

这在两个系统上都能正常工作；Windows 7 和 Linux。

我试图理解为什么这会起作用并说服自己我的解决方案是正确的。它归结为系统区域设置吗？Linux 默认为 en_US.utf-8。虽然我在 Windows 中只能指定“en_US”。那么当输出流试图从字符串中获取数据时，字符串是根据语言环境发送数据的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:46:54.070

或者您是否使用 FileOutputStream 并且在其中编写二进制文件的字符编码或 DataOutputStream 很重要。你也应该做一个研究，但请看[这里](https://stackoverflow.com/questions/1001540/how-to-write-a-utf-8-file-with-java)

# math - 除数数

> ID：12254302
> 
> 赞同：-1
> 
> 时间：2012-09-03T21:40:27.617
> 
> 标签：math, division

如何在不遍历 n 的所有除数的情况下找到一个数字“n”的除数数，这些除数也可以被另一个数字“k”整除？我尝试了以下方法：

将 n 的所有素因数的幂存储在关联数组 A 中，并且对 k 进行类似操作，将所有素因数的幂存储在数组 B 中。

```
 ans = 1
    for a in A:    // Here a is the prime factor and A[a] gives its power
        ans *= if( a is present in B ) ? 1 : A[a] + 1
    print ans 
```

注意：这不是家庭作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:29:12.580

要找到`n`可被 整除的除数`k`：

*   如果`k`不是 的除数`n`，则数为 0，
*   否则，它是 的除数`n/k`。

如果`d`是 的一个除数`n`可以被 整除`k`，那么`d/k`是 的一个除数`n/k`。反之，如果`e`是 的除数`n/k`，则`e*k`是 的除数`n`可被 整除`k`。

你的代码

```
ans = 1
for a in A:    // Here a is the prime factor and A[a] gives its power
    ans *= if( a is present in B ) ? 1 : A[a] + 1
print ans 
```

计算与`n`互质的除数数`k`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T21:44:40.767

如果除数是素数，那么除了循环遍历所有除数之外别无他法。否则[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)将不是一种保存加密算法。

# xcode - 将 nginx 移植为山狮捆绑应用程序

> ID：12254303
> 
> 赞同：0
> 
> 时间：2012-09-03T21:40:30.967
> 
> 标签：xcode, nginx, porting, osx-mountain-lion, app-bundle

我想知道从 nginx 的源代码创建应用程序包会有多困难。自山狮以来，apache webshare 选项已被删除，我可以想象有些人想要一个可以启动/停止 nginx 的 gui 前端，甚至可能使用单选按钮等配置指令。

现在这可以是一个面板或一个独立的应用程序。我一直在寻找一种“最佳实践”的方式来做这种事情，但想出了各种各样的技巧。

我觉得在捆绑了所有库的 xcode 中构建整个东西会很酷。那么问题来了，如何承担这样的宠物项目？有什么建议么？;-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T23:39:57.137

你试过[MNPP](http://getmnpp.org/)吗？

这是它的源代码[https://github.com/jyr/MNPP](https://github.com/jyr/MNPP)

# php - 如何查看相对日期？

> ID：12254305
> 
> 赞同：0
> 
> 时间：2012-09-03T21:40:41.950
> 
> 标签：php, mysql

我正在编写密码恢复代码，它使用令牌和以`date("Y-m-d H:i:s")`格式存储的日期，例如`2012-09-06 18:59:53`。我使用下面的代码来检查用户 ID 的令牌密钥是否存在：

```
$sql = mysql_query("SELECT * FROM `recoveryemails` WHERE `UserID` = '$uid' and `Key` = '$key' and `expDate` >= '$curDate'"); 
```

我需要在检索 expDate 后添加另一个条件以检查它是否超过 3 天，使用 PHP。任何人都可以帮我解决那个 PHP 代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:49:25.350

在 MySQL 中要容易得多：`WHERE ... AND expdate >= DATE_SUB(NOW(),INTERVAL 3 DAY)`

但是如果你坚持用 PHP 做，你需要：

```
$threedaysago = strtotime("-3 days");
$expdate = strtotime($row['expDate']);
if( $expdate >= $threedaysago) { /* more recent than three days ago */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T21:45:59.453

在 MySQL 中

```
expDate > DATE_SUB(NOW(), INTERVAL 3 Days) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T21:48:22.900

只需将 MySQL 日期结果包装在 strtotime() 中并与 strtotime('- 3 days') 进行比较

# google-maps - 谷歌地图 v3 缩放动画未显示

> ID：12254307
> 
> 赞同：3
> 
> 时间：2012-09-03T21:40:47.633
> 
> 标签：google-maps, google-maps-api-3

不知道为什么这个问题被关闭 - 它似乎对我来说相当集中：“在我们的地图 v3 应用程序中放大和缩小鼠标滚轮在缩放操作期间不会像在我们的地图 v2 版本中那样显示红色动画角。是否有特定的在地图 v3 中启用此动画所需的选项？tia。”

我将添加以下内容以消除有关该问题的任何歧义：

通过浏览器使用 Google Maps v3 时，在使用鼠标滚轮进行缩放操作期间，会在屏幕上绘制一个仅由框架的角组成的红框。

我在 winforms 应用程序中通过 WebBrowser 控件使用 Maps V3。

在我的应用程序中进行鼠标滚轮缩放不会生成同样的红框。

我的地图 v3 选项如下：

```
var myOptions = {
    center: new google.maps.LatLng(lat, lon),
    zoom: zoomLevel,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false,
    minZoom: 3,
    maxZoom: 19,
    overviewMapControl: true,
    panControl: false,
    streetViewControl: false,
    zoomControl: false
};
 //create the map
_map = new google.maps.Map(mapDiv, myOptions); 
```

我想知道是否有我应该添加的特定选项（或者我可以做其他事情）以允许在缩放操作期间生成此帧。谷歌地图文档一无所获。

# jquery - 用于电子邮件验证的正则表达式只有“一半”工作

> ID：12254309
> 
> 赞同：0
> 
> 时间：2012-09-03T21:41:08.210
> 
> 标签：jquery, wordpress, validation, email

经过大量的试验和错误，我终于在 wordpress [http://info.cfgt.com.au/diploma-of-management/sq1](http://info.cfgt.com.au/diploma-of-management/sq1)上得到了这个电子邮件验证，但正则表达式似乎只有“一半”的工作。

基本上它会允许任何东西@anthing，并且最后不需要“.domain”。

我尝试过其他正则表达式字符串，但 Wordpress 似乎忽略了大约 30 个字符以上的任何正则表达式，并且较短的字符串没有提供商品。

```
<script>
jQuery(document).ready(function() {
jQuery('form').submit(function() {
email_address = jQuery('#inf_field_Email');           
email_regex = /^[a-z0-9\._]*[a-z0-9_]@[a-z0-9][a-z0-9\-\.]*[a-z0-9]\.[a-z]{2,6}$/i;
if(!email_regex.test(email_address.val())){
alert('Please enter a valid email');
return false;
}else{
alert('All Good!');
return true;
}
});
});
</script> 
```

有任何想法吗？

干杯，

约翰·德特莱夫斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:34:50.913

我认为最好在 javascript 中使用非常简单的正则表达式来处理这样的电子邮件：

```
/.*[a-90-1]+.*@.*[a-90-1]+.*\.[a-9]{2,6}/ 
```

并检查电子邮件在后端是否有效（php 或您使用的）

# xslt - 用于选择没有同名子子项的子项的 XPath

> ID：12254317
> 
> 赞同：2
> 
> 时间：2012-09-03T21:41:52.937
> 
> 标签：xslt, xpath

我有一个 XML 片段

```
<main>
    <sub1>
        <element>
            <sub2>
                <element>
                    <sub3/>
                </element>
            </sub2>
        </element>
    </sub1>
    <sub4>
        <sub5>
            <element>
                <sub6>
                    <element>
                        <sub7/>
                    </element>
                </sub6>
            </element>
        </sub5>
    </sub4>
    <sub8>
        <element/>
    </sub8>
</main> 
```

如果 main 是当前节点，我可以像这样选择所有元素节点：

```
select=".//element" 
```

在这个例子中，这给了我 5 个匹配项。但是如何只选择层次结构中的第一个元素节点，那么 sub1、sub5 和 sub8 之后的元素节点呢？我需要忽略在它们和原始主节点之间有另一个元素的所有元素。

其间的子节点的数量可以多于1个或2个，如上例中，示例中的主节点可以是上述另一个元素节点的一部分。

谢谢K

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:58:03.777

一个可能的表达是

```
.//element[not(ancestor::element)] 
```

即找到所有未被另一个“元素”元素包围（在任何级别）的“元素”元素。

**编辑**

如前所述，如果当前 ( `main`) 元素本身被“元素”包围，则此表达式不会按原样工作。如果您在 XSLT 中并因此可以访问该`current()`函数，那么您可以使用类似的技巧

```
.//element[count(ancestor::element) = count(current()/ancestor::element)] 
```

它选择那些与当前“主”元素具有相同数量的封闭“元素”元素（可能为零）的元素。根据您的处理器，使用变量可能更有效和/或更清晰

```
<xsl:variable name="depth" select="count(ancestor::element)" />
<xsl:apply-templates select=".//element[count(ancestor::element) = $depth]"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T21:56:48.727

**使用**：

```
.//element[(ancestor::main|ancestor::element)[last()][self::main]] 
```

**这是使用 XSLT 进行的简单验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <xsl:for-each select=
   ".//element
       [(ancestor::main|ancestor::element)
                          [last()][self::main]
       ]">
   <xsl:copy-of select="."/>
==================
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<main>
    <sub1>
        <element>
            <sub2>
                <element>
                    <sub3/>
                </element>
            </sub2>
        </element>
    </sub1>
    <sub4>
        <sub5>
            <element>
                <sub6>
                    <element>
                        <sub7/>
                    </element>
                </sub6>
            </element>
        </sub5>
    </sub4>
    <sub8>
        <element/>
    </sub8>
</main> 
```

Xpath 表达式在当前节点是文档中的顶部节点的情况下进行评估，然后使用方便注意的分隔符字符串将此评估的结果复制到输出：

```
<element>

   <sub2>

      <element>

         <sub3/>

      </element>

   </sub2>

</element>
==================
  <element>

   <sub6>

      <element>

         <sub7/>

      </element>

   </sub6>

</element>
==================
  <element/>
================== 
```

**说明**：

表达方式：

```
 .//element
       [(ancestor::main|ancestor::element)
                                     [last()]
                                        [self::main]
       ] 
```

`element`选择当前节点的所有后代元素，两个可能的祖先中的第一个（向上）`main`或者`element`是`main`。

也就是说，没有一个`element`是所选的祖先`element`并且在祖先之前发生（向上）`main`。

要理解为什么`last()`被用作谓词而不仅仅是`[1]`，我们需要记住两个祖先中最近的一个是它们中的最后一个。

**请注意**：

这个 XPath 表达式正确地选择了所有想要`element`的元素，即使在当前节点本身有一个`element`祖先的情况下也是如此。

**类似于 Ian Roberts 在回答中提出的表达式**：

```
.//element[not(ancestor::element)] 
```

**在这种情况下不选择任何内容**。

* * *

**更新**：

正如 Michael Kay 所指出的，如果我们进一步概括这个问题并允许其他`main`元素出现在文档中的任何位置，那么这个答案中提出的表达式可能会选择“误报”。

**这是一个更新的表达式（不再是纯/独立的 XPath 表达式，因为它使用 XSLT 函数`current()`）在这种情况下仍然产生正确的计数**：

```
.//element
   [(ancestor::main|ancestor::element)
                      [last()][self::main]
  and
    count(current()|ancestor::main[1]) = 1
   ]"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T07:46:44.327

我认为这个答案比 Dimitre 的答案更严格一些，因为它没有假设没有其他名为“main”的元素，而这些元素没有被指定为问题的一部分。

```
for $this in . return .//element[empty(ancestor::element[.>>$this])] 
```

如果您在 XSLT 中，您可以使用 current() 代替 $this。

# java - 有和没有线程的并发

> ID：12254318
> 
> 赞同：0
> 
> 时间：2012-09-03T21:42:00.570
> 
> 标签：java, concurrency, derby

我有一个需要让用户登录的应用程序。数据存储在 Derby DB 中。下面的表单根据用户名和密码字段对其进行查询，并设置一个用户会话，该会话应填充用户数据。

但是，即使数据库正在对用户进行身份验证，会话也会返回 null。我如何将 system.out.println 放在此类的 main 方法中，该方法将根据 db 查询返回会话数据，而不是立即执行代码并返回 null？

注意：数据库工作正常。我可以根据 sql 语句中的用户名和密码字段获得结果。

```
public class LoginForm{

    private static JTextField userName;
    private static JTextField password;
    private static JButton submit;
    private static int attempts;
    private static JFrame main;

    private Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();

    final int MAX_ATTEMPTS = 5;

    private UserSession session;

    public LoginForm(){

        Handler handle = new Handler();                             //inner class
        LoginFormFocusListener fl = new LoginFormFocusListener();   //inner class

        main = new JFrame();

        main.setUndecorated(true);
        main.setBounds((dim.width/2) - (500/2),(dim.height/2) - (150/2),500, 75);
        main.setVisible(true);
        main.setAlwaysOnTop(true);
        main.setResizable(false);
        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        userName = new JTextField(10);
        password = new JTextField(10);
        main.setLayout(new GridLayout(0,1));

        JPanel panel = new JPanel();
        main.add(panel);

        panel.add(new JLabel("Username: "));
        panel.add(userName);
        panel.add(new JLabel("Password: "));
        panel.add(password);
        panel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createBevelBorder(4), "Please Login"));

        submit = new JButton("Submit");
        panel.add(submit);

        if(attempts > 0){
            panel.add(new JLabel("" + (MAX_ATTEMPTS - attempts) + " attempts remaining..."));
        }

        main.addWindowFocusListener(fl);
        submit.addActionListener(handle);
    }

    public UserSession getSession(){
        return this.session;
    }

    /**
     * creates the session that's returned to main/POSsystem via getSession
     * @author Matt
     *
     */
    private class Handler implements ActionListener
    {
        @Override
        public void actionPerformed(ActionEvent e) {
            String user = userName.getText();
            String pass = password.getText();

            session = new UserSession();
            if(session.authenticate(user,  pass)){
                System.out.println("User has been authenticated");
                JOptionPane.showMessageDialog(null,"Login Successful! ","",JOptionPane.PLAIN_MESSAGE);
            }else{
                System.out.println("Login Failed!");
                JOptionPane.showMessageDialog(null,"Login Failed!","", JOptionPane.WARNING_MESSAGE);
                attempts++;
                if(attempts < MAX_ATTEMPTS){
                    new LoginForm();
                }else{
                    JOptionPane.showMessageDialog(null, "Max attempts reached.  " +
                                                        "Please Contact the administrator of this system. ",
                                                        "User Locked",
                                                        JOptionPane.ERROR_MESSAGE);
                }
            }
        }
    }

    /**
     * Inner Class
     * custom focus events for the login form
     * the user may click away from this pop-up to close it.
     * @author Matt
     *
     */
    public class LoginFormFocusListener implements WindowFocusListener{

        @Override
        public void windowGainedFocus(WindowEvent wEvt) {}

        @Override
        public void windowLostFocus(WindowEvent wEvt) {
            ((JFrame) wEvt.getSource()).dispose();
        } 
    }    

    //test
    public static void main(String args[]){

        SwingUtilities.invokeLater(new Runnable(){  
              public void run(){  
                LoginForm lf = new LoginForm();  
                System.out.println("Session: " + lf.getSession());    <---NULL!!!
              }  
            });  

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:41:28.740

如果您真正想要的是将输出输出到控制台，那么您应该将其放在 actionPerformed 方法的最后一行，而不是将 System.out.println 代码放在 main 方法中。

如果您真的，真的，真的想在 main 方法中包含该代码，那么您应该创建一个实现 Runnable 接口的类，该接口允许获取创建的 LoginForm

像这样：

```
final class InitThread implements Runnable {
LoginForm lf;

public LoginForm getLfForSystemOut() {
    while (lf == null) {
        try {
            Thread.sleep(500);
        } catch (final InterruptedException e) {
            return null;
        }
    }
    synchronized (lf) {
        try {
            lf.wait();
            return lf;
        } catch (final InterruptedException e) {
            e.printStackTrace();
        }
    }
    return null;
}

@Override
public void run() {
    lf = new LoginForm();
}
} 
```

然后将主要方法更改为：

```
public static void main(final String args[]) {

    final InitThread init = new InitThread();
    SwingUtilities.invokeLater(init);

    System.out.println("Session: " + init.getLfForSystemOut().getSession());

} 
```

最后在此块的 actionPerformed 方法的末尾：

```
synchronized (LoginForm.this) {
    LoginForm.this.notifyAll();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:29:04.883

您遇到的问题是因为您试图在用户有机会填写表单并按下提交按钮之前获取会话。

按下提交按钮时会异步调用handler，创建表单后会直接调用main中的println。您要么必须等到会话不再为空，要么在处理程序中使用经过身份验证的会话。

# php - 最佳实践：如何实现一款网页游戏“搭建系统”？

> ID：12254319
> 
> 赞同：0
> 
> 时间：2012-09-03T21:42:12.010
> 
> 标签：php, mysql

我正在开发一个浏览器游戏并停留在“理论问题”上。我想让用户“水平”特定建筑物以获得更好的统计数据。

例子：

*   煤矿：Lvl 1（如果用户点击“升级”，它将在 X 小时后升级到 lvl2 等等）

现在我的问题是，**在 mysql 数据库中处理它的最佳解决方案是什么**？你更喜欢什么样的桌子设置以及如何管理“lvling”的东西？

制作一个名为“buildings”的表格和另一个带有“user_buildings”的表格，其中“buildings”的链接与实际级别有关吗？还是有更好的解决方案？

请帮助我进行一次好的头脑风暴:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:56:58.227

在`buildings`表格中，我会保留建筑物的“定义”，例如从 lvl 1 升级到 2 所需的时间是 X，从 2 到 3 是 Y ...

我会保留用户当前的`user_buildings`建筑，例如：煤矿，位于地图 z 的分区，从 u 开始建造，当前级别 u...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T20:58:54.603

我正在制作一个浏览器游戏，刚刚完成了资源的构建系统，我制作了一些东西，将时间戳添加到数据库并在用户登录后使用实时处理处理/升级建筑物。

我正在使用一个简单的逻辑脚本，它根据服务器速度和 Bulding LVL 计算时间。

# c - SSL_CTX_use_certificate_file 因 EXC_BAD_ACCESS 而失败

> ID：12254320
> 
> 赞同：3
> 
> 时间：2012-09-03T21:42:35.663
> 
> 标签：c, xcode, ssl, openssl, exc-bad-access

我最近想通过使用 BSD 套接字来构建我自己的客户端-服务器系统。过了一段时间，我想包括 SSL 来加密数据传输。我按照[本](http://www.informit.com/articles/article.aspx?p=22078)教程进行了操作，并且代码可以使用 Xcode 很好地编译（添加的链接器标志：-lssl -lcrypto），但是`EXC_BAD_ACCESS`一旦程序到达`SSL_CTX_use_certificate_file()`调用，我就会一直得到。您可以在下面看到使用的代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#include <openssl/bio.h>
#include <openssl/ssl.h>
#include <openssl/err.h>

int main(int argc, const char * argv[])
{
    SSL_METHOD *method = NULL;
    SSL_CTX *ctx = NULL;
    OpenSSL_add_all_algorithms();
    SSL_load_error_strings();
    method = SSLv2_server_method();
    ctx = SSL_CTX_new(method);

    SSL_CTX_use_certificate_file(ctx, "/Users/steve/certificate.pem", SSL_FILETYPE_PEM);
    SSL_CTX_use_PrivateKey_file(ctx, "/Users/steve/key.pem", SSL_FILETYPE_PEM);

    printf("Hello, World!\n");
    return EXIT_SUCCESS;
} 
```

如果程序在指定路径找不到证书，它不会崩溃，但我当然不会有任何 SSL 加密。证书本身会不会有问题？我只是使用以下命令使用 openssl 生成了一个：

```
# generate the key
$ openssl genrsa -out key.pem 1024

# generate request
$ openssl req -new -key key.pem -out request.pem
# fill in all the stuff ...

# generate certificate
$ openssl x509 -req -days 30 -in request.pem -signkey key.pem -out certificate.pem 
```

任何的想法？

**更新**：在将 OS X 部署目标设置为 10.7 或更高版本进行编译时，实际上会出现一些警告，因为所有这些 SSL 内容都显示为已弃用。是否有任何推荐的替代做法来使用 SSL 保护套接字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T23:12:02.610

问题是您需要调用`SSL_library_init`，查看代码中的修改（始终处理我们调用的函数中的错误也是一个好习惯:-)：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <openssl/bio.h>
#include <openssl/ssl.h>
#include <openssl/err.h>

int main(int argc, const char * argv[])
{
    //SSL_METHOD *method = NULL;
    SSL_CTX *ctx = NULL;
    OpenSSL_add_all_algorithms();
    SSL_load_error_strings();
    //method = SSLv2_server_method();
    //ctx = SSL_CTX_new(method);

    /* Without this line you got an error when calling SSL_CTX_new */
    SSL_library_init();
    ctx = SSL_CTX_new(SSLv2_server_method());
    if(!ctx) 
    {
        fprintf (stderr, "SSL_CTX_new ERROR\n");
        ERR_print_errors_fp(stderr);
        return EXIT_FAILURE;
    }

    if (!SSL_CTX_use_certificate_file(ctx, "/Users/steve/certificate.pem", SSL_FILETYPE_PEM))
    {
        fprintf (stderr, "SSL_CTX_use_certificate_file ERROR\n");
        ERR_print_errors_fp(stderr);

        return EXIT_FAILURE;
    }
    SSL_CTX_use_PrivateKey_file(ctx, "/Users/steve/key.pem", SSL_FILETYPE_PEM);

    printf("Hello, World!\n");
    return EXIT_SUCCESS;
} 
```

# javascript - 从现有的 html 构建主干模型

> ID：12254321
> 
> 赞同：1
> 
> 时间：2012-09-03T21:42:47.447
> 
> 标签：javascript, backbone.js, underscore.js

我不是特别擅长 javascript 框架，我决定使用 Backbone 来帮助组织我的代码，因为我的项目变得更大了。

问题是，当我在我的项目中设计前 10k 行时，我没有想到 javascript 模板（或视图）。我已经在使用模板引擎（PHP smarty）。

前提：我已经有了一个好的 HTML 模板。例如，我有一个`<article>`包含博客文章内容的元素。没关系，因为我可以用这个元素构建一个模型。但是视图呢？我没有模板，也不想实际使用模板（因为我必须重新组织所有内容）。

问题是：如何将所有可能的变量`<article>`（例如`<timestamp>`元素的值、内容 div 的 outerHTML 等）绑定到对象视图？

我见过的所有示例教程都使用了一个用于生成 HTML 的模板。我不太习惯定义 underscore.js 模板。

文章、评论等的 CRUD 操作将使用 $.ajax() 完成。我不想仅仅为了获取页面的所有帖子而进行额外的 http 请求（因为后端已经这样做了）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:21:04.360

您可以使用 setElement 方法来做您想做的事（或者至少将您的视图附加到 dom 中的现有元素，然后您的视图将需要知道如何处理它）

[http://backbonejs.org/#View-setElement](http://backbonejs.org/#View-setElement)

# c++ - 在 C++ 中设置正在运行的应用程序的当前目录

> ID：12254323
> 
> 赞同：1
> 
> 时间：2012-09-03T21:42:49.207
> 
> 标签：c++, c, winapi, native

下面的[答案](https://stackoverflow.com/a/885081/655794)给出了一个使用 C# 的解决方案，我想知道如果一个人只使用 c++（不是 c++\cli），那么等价物是什么

```
System.IO.Directory.SetCurrentDirectory(System.AppDomain.CurrentDomain.BaseDirectory); 
```

有什么东西可以解决问题吗？

基于这个问题，我一直有：[正确创建和运行带有文件 I/O 的 win32 服务](https://stackoverflow.com/questions/12253921/correctly-creating-and-running-a-win32-service-with-file-i-o)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T21:43:58.113

`SetCurrentDirectory`（在 Win32 中）：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365530%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365530%28v=vs.85%29.aspx)

`current_path`在`boost::filesystem`：

[http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/reference.html#current_path](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/reference.html#current_path)

BaseDirectory 的等效项可能是`GetModuleFileName`（第一个参数的句柄为空），然后是`GetFullPathName`从可执行路径获取目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T21:58:01.720

在 Windows 中，完全等价于

```
System.IO.Directory.SetCurrentDirectory ( System.AppDomain.CurrentDomain.BaseDirectory )` 
```

将会：

```
// Get full executable path
char buffer[MAX_PATH];
GetModuleFileName(NULL, buffer, MAX_PATH);

// Get executable directory
boost::filesystem::path path(buffer);
path = path.parent_path();

// Set current path to that directory
boost::filesystem::current_path( path ); 
```

请注意，没有平台无关的方式来获取应用程序的目录，因为 C++ 不识别标准中的目录概念。Boost 似乎也没有等效的功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T21:47:22.760

使用[SetCurrentDirectory](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365530%28v=vs.85%29.aspx) WINAPI。

在 Windows 中的 _chdir 和 SetCurrentDirectory有[什么区别？](https://stackoverflow.com/questions/7544153/what-is-the-difference-between-chdir-and-setcurrentdirectory-in-windows)

也许也需要模块名称（似乎来自评论），这是我旧商店的一个：-

```
int main()
{
  char path[MAX_PATH]={0};
  GetModuleFileName(0,path,MAX_PATH);
} 
```

# mysql - 我应该使用 SQLite 而不是 MySQL 吗？

> ID：12254326
> 
> 赞同：3
> 
> 时间：2012-09-03T21:43:00.877
> 
> 标签：mysql, performance, sqlite

我需要改进一个 PHP-MySQL Web 应用程序，它只使用 MySQL 进行 REPL 操作（和一些搜索功能）。我使用过的 99% 的应用程序从未使用过高级 MySQL 功能，例如复制、跨表约束、锁定等。

据我了解，我应该改用 SQLite。

如果我这样做有什么实际好处吗？我会看到显着的（>100 毫秒）速度提升吗？我应该期待超过 1,000,000 行的表会出现问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T21:54:05.287

对此没有包罗万象的答案，但有一个要点需要考虑：一个非常好的经验法则是，您的并发程度越高，您从 MySQL 中获得的收益就越多，反之亦然。

这意味着在数据库请求永远不会并发的情况下，您可能会看到使用 SQlite 的加速，尽管我怀疑它会在 100 毫秒的数量级。

这背后的原因是（非常粗略）：

在 MySQL、PostgreSQL、MS SQL、Oracle 等数据库服务器环境中，一个专用进程（或一组进程）专门接触数据库文件——重要的部分是**专用**的。这意味着，并发问题可以在进程中解决。

在基于文件的数据库中，例如 SQlite、MS Access (Jet Engine) 和朋友，多个进程将在不知道彼此的情况下接触 DB 文件 - 这意味着必须通过将并发问题写入 DB 或帮助程序来解决它们文件。这通常要慢得多且不那么健壮。作为交换，数据库客户端（Web 应用程序）和数据库服务器（进程内）之间的通信开销是不存在的。

**编辑**

发表评论后，我想更清楚地说，我说的是并发写入，而不是并发读取。并发读取不变的数据集并不是一个难题——它根本不需要任何锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T22:33:15.397

SQLite 的主要优点是它是一个基于文件的关系数据库，使用 SQL 作为其查询语言。基于文件极大地简化了部署，非常适合应用程序需要少量数据库但必须在具有数据库服务器会出现问题的环境中运行的情况。（例如，许多浏览器使用 SQLite 来管理他们的 cookie 存储；使用数据库服务器来解决这个问题在很多方面都近乎疯狂。）

MySQL（具有健全的表类型）的主要优点是它是一个使用 SQL 作为其查询语言的数据库服务器。基于服务器的特性允许基于文件的系统无法简单处理的许多特性（例如复制），但确实使部署变得相当复杂。

数据库服务器（例如 MySQL）的额外复杂性的好处是否超过成本（相对于 SQLite 等基于文件的数据库引擎）取决于很多因素，特别是包括预期安装的数量以及预期谁来安装执行这些安装。

# python - 最好的风格、类方法或全局函数是什么？

> ID：12254329
> 
> 赞同：2
> 
> 时间：2012-09-03T21:43:18.577
> 
> 标签：python, class, coding-style, module

我经常编写一个类，以及与该类密切相关的辅助函数。对于我目前的情况，一个`Window`用于包装一些`win32api`调用的类，以及用于查找窗口的函数。这些辅助函数应该是给定模块中的全局函数，还是应该是类的类方法`Window`。也就是说，我应该在我的模块中有：

```
class Window(object):
    def __init__(self, handle): 
        self.handle = handle
        ...
    ...
    @classmethod
    def find_windows(cls, params):
        handles = ...
        return map(cls, handles) 
```

用法是：

```
from window import Window
windows = Window.find_windows("Specialty") 
```

或者我应该这样做：

```
class Window(object):
    def __init__(self, handle): 
        self.handle = handle
        ...
    ...

def find_windows(params):
    handles = ...
    return map(Window, handles) 
```

用法是：

```
from window import Window, find_windows
windows = find_windows("Speciality") 
```

更简洁地说：分组应该在类级别（例如，它们将是 Java 中的静态方法）还是在模块级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:01:10.957

第一种方法的优点是，如果您子类化`Window`您可以覆盖您的`find_windows`方法（与 java 中的静态方法不同）。但是，这只有在覆盖最终有意义时才有用，否则我认为将它作为一个函数看起来会更好。

**编辑**：如果您有多种查找 Window 对象的方法，那么有一个名为 WindowFinder 或 WindowManager 的附加类来封装查询/查找逻辑是有意义的。

这是 django 中使用的一种模式，如果您的 Window 类是一个 db 模型，那么您将拥有指向 WindowManager 的 Window.objects。窗口管理器具有构建 sql 查询的方法。

然后，您可以执行以下操作：

```
Window.objects.all() 
```

或者

```
Window.objects.filter(name="Speciality") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T23:10:26.153

如果`find_windows()`不需要访问或了解您的`Window`班级的内部运作，我只会将其设为全局函数。增加单独代码段之间的依赖关系几乎没有什么好处，尤其是当它基本上只是源代码所在位置的问题时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T21:52:14.320

如果我理解正确，您的`find_windows`函数会`Window`从句柄列表中创建一个实例列表。

它表现为一个构造函数，因此，我会将它设为一个函数而不是类`classmethod`的一个`Window`。正如我在评论中提到的那样，这种方式感觉更自然，但这只是一种预感。

**编辑**

@Ioan Alexandru Cucu 的回答让我思考了你将你的子类`Window`化为 a 的情况`SubWindow`。如果`find_windows`（或建议`create_windows`的）是 a `classmethod`，它将返回一个实例列表，而如果它是我建议的独立函数，`SubWindow`它只会返回实例。`Window`

这可以被认为是一个有趣的功能，然后将其保留`find_windows`为`classmethod`. 我仍然会在文档字符串或其他地方发表某种评论来解释理由。

`<tl;dr>`:*这取决于*。

# javascript - javascript 创建日期错误的月份

> ID：12254333
> 
> 赞同：58
> 
> 时间：2012-09-03T21:43:36.187
> 
> 标签：javascript

使用 Mozilla Firefox Firebug：

```
var myDate = new Date(2012, 9, 23, 0,0,0,0);
myDate; 
```

日期 {2012 年 10 月 23 日星期二 00:00:00 GMT-0400（东部夏令时间）}

为什么javascript会创建错误月份的日期？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-09-03T21:45:04.390

不，javascript 的`Date`月份以 开头`0`，第 10 个月也是如此`9`，现在是 10 月

[参考](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)：

> `new Date(year, month [, day, hour, minute, second, millisecond]);`
> 
> [...]
> 
> **month** 表示月份的整数值，从 0 开始表示 1 月到 11 表示 12 月。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-03T21:57:38.120

在 javascript 世界中，月份从零开始！对我来说有点奇怪。无论如何，9 不是九月，而是 9 是十月。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-11T12:26:31.017

使用字符串作为参数来避免 Date 构造函数的奇怪行为。

例子：

```
const myDate = new Date('2021-08-13'); // Result: Fri Aug 13 2021 02:00:00 GMT+0200...
```

# jquery - Kendo UI 动态更改数据源字符串 (XML)

> ID：12254334
> 
> 赞同：5
> 
> 时间：2012-09-03T21:43:55.010
> 
> 标签：jquery, xml, datasource, kendo-ui

我有一个绑定到 XML 数据源的剑道网格。如何根据下拉列表的选择来更改 DataSource。例子：

```
//Create DataSource
    var gridDataSource = new kendo.data.DataSource({            
        transport: {
             read: [DropDownListValue] + ".xml",
             dataType: "xml"
        }
         });

    gridDataSource.read();

    function createGrid(){                  
            var grid = $("#grid").kendoGrid({
                dataSource: gridDataSource
                }...
             }; 
```

其中 [DropDownListValue] 是我表单上的下拉列表。在此示例中，如果 [DropDownListValue] = 1，则数据源将为“1.xml”。如果 [DropDownListValue] = 2，则数据源将为“2.xml”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-04T14:41:15.857

我可以通过将以下内容添加到我的下拉列表的 On Change 事件中来实现这一点：

```
//Assign drop down value to variable
var dropDownListValue = $("#dropDown1").val();

//Concatenate drop down variable to file name
var dynamicUrl = dropDownListValue +".xml";

//Assign grid to variable
var grid = $("#grid").data("kendoGrid");

//Set url property of the grid data source
grid.dataSource.transport.options.read.url =dynamicUrl;

//Read data source to update
grid.dataSource.read(); 
```

# c# - 托管 C++ 程序集能否将对象返回给 C#？

> ID：12254337
> 
> 赞同：5
> 
> 时间：2012-09-03T21:44:02.693
> 
> 标签：c#, c++-cli, managed-c++

我正在编写一个必须读取视频文件的视频属性的 C# 应用程序。我发现这样做的唯一方法是使用需要 C++ 的 Microsoft Media Foundation。

到目前为止，我已经取得了一些进展：

*   我创建了一个托管 C++ 程序集，它编译为 DLL。
*   我可以从 C# 代码中使用参数调用它。
*   它执行并打印视频文件属性。

接下来我想做的是让 DLL 返回一个视频属性对象（宽度、高度、持续时间等）。鉴于我正在使用 C++ 托管代码，是否有一种简单的方法来定义对象类型并使用它在 C# 和 C++ 之间传递数据，还是必须使用 Marshal 类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:50:33.413

当然！如果在托管 C++（也称为 C++/CLI）中定义公共对象：

```
public ref class MyManagedClass{
. . .
} 
```

然后从您的 c# 项目中引用 dll，您将能够像在 c# 中定义它一样使用该对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T21:49:51.527

您可以通过[COM Interop](http://msdn.microsoft.com/en-us/library/aa645736%28v=vs.71%29.aspx)或`C++/CLI`. 使用`C++/CLI`您可以创建自己的包装对象/类，这些对象/类可直接在 C# 中使用。了解 C++ 和 C#，语法对您来说会有些熟悉（并且网上有很好的资源）。

C++/CLI 可能需要更多的工作，因为您需要编写 CLI 包装器，但会使 C# 代码中的内容更清晰（我的观点）。

下面这篇文章应该可以帮助您入门：[快速 C++/CLI - 在不到 10 分钟的时间内学习 C++/CLI](http://www.codeproject.com/Articles/19354/Quick-C-CLI-Learn-C-CLI-in-less-than-10-minutes)

更深入的文章：http: [//msdn.microsoft.com/en-us/magazine/cc163852.aspx](http://msdn.microsoft.com/en-us/magazine/cc163852.aspx)

从上面借来的一个代码示例（显示语法），使事情变得更令人兴奋。`Student`是您的 C++ 类，`StudentWrapper`是要在您的 C# 代码中使用的 CLI 包装器：

```
public ref class StudentWrapper
{
private:
  Student *_stu;
public:
  StudentWrapper(String ^fullname, double gpa)
  {
    _stu = new Student((char *) 
           System::Runtime::InteropServices::Marshal::StringToHGlobalAnsi(
           fullname).ToPointer(), 
      gpa);
  }
  ~StudentWrapper()
  {
    delete _stu;
    _stu = 0;
  }

  property String ^Name
  {
    String ^get()
    {
      return gcnew String(_stu->getName());
    }
  }
  property double Gpa
  {
    double get()
    {
      return _stu->getGpa();
    }
  }
}; 
```

# matlab - 是否有任何内置的 Matlab 函数来查找某个数字是否位于向量的两个成员之间？

> ID：12254340
> 
> 赞同：0
> 
> 时间：2012-09-03T21:44:39.423
> 
> 标签：matlab, time-complexity

如果数字 a 位于 x(i) 和 x(i+1) 之间，它应该返回最低索引 i。我知道编写一个可以做到这一点的函数并不难，但是有没有内置的 Matlab 函数呢？

假设向量元素已排序，我猜这将是一个微不足道的搜索 O(logn) 但如果元素没有经过排序就没有排序，有没有更好的方法呢？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:47:20.660

逻辑索引非常适合这种比较：

```
x = [6 2 6 7 3 5];
a = 4;
find(a > x(1:end-1) & a < x(2:end), 1)
ans =  2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T22:40:54.493

尝试

```
 a=rand(1);
  b=rand(1,10);
  c=a-b;
  find(c(2:end).*c(1:end-1)<0,1) 
```

# java - 如何使用 Drools 规划器？

> ID：12254350
> 
> 赞同：6
> 
> 时间：2012-09-03T21:45:28.877
> 
> 标签：java, optimization, artificial-intelligence, drools-planner, optaplanner

我有一个日程安排问题，每个学生都表达了他对讲座的偏好，并且同时为所有学生生成了课程时间表（如果可以的话，以批处理模式）。

根据我的阅读和理解，Drools Planner 非常适合解决这类问题。我将 Drools 和 GEF 安装到我的 Eclipse IDE 中。一切都很好。不幸的是，我不知道如何构建一个简单的项目。

我在网上查找了参考资料并找到了 Drools Planner 示例，它们看起来和工作都很棒。但是，除了一些代码片段之外，我没有找到任何好的教程来引导人们完成简单的案例。

我如何模拟匹配/调度问题，其中 3 名具有独特时间和课程偏好的学生希望注册 4 门课程？如何开始代码，在哪里放置约束，调用哪些类等？

任何帮助将不胜感激！！

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:21:54.293

1.  [下载 Drools 规划器 zip。](http://www.jboss.org/drools/downloads)下载任何其他 zip 文件（例如 Drools 本身或 Eclipse Drools 插件工具）是可选的。Drools Planner 拉链配备了大多数人需要的一切。
2.  从 zip[打开示例/runExamples.sh 或 .bat](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html#d0e251)，然后在 GUI 中解决云平衡和课程安排问题。
3.  阅读手册中的[快速入门教程](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html#quickStart)。
4.  查看examples/sources/下zip中的课程安排源代码，并[在您喜欢的IDE中运行它](http://docs.jboss.org/drools/release/5.4.0.Final/drools-planner-docs/html_single/index.html#d0e288)。

# osx-mountain-lion - 警告弃用函数的 XCode 4.4 选项恢复为“是”.. 为什么？漏洞？

> ID：12254355
> 
> 赞同：0
> 
> 时间：2012-09-03T21:45:47.537
> 
> 标签：osx-mountain-lion, xcode4.4

在 OS X 10.8.1 上的 XCode 4.4.1 中，当我在项目设置中选择“否”作为警告弃用功能的选项时，如果我立即构建它就可以工作......但是如果我去编辑一些代码然后回到它，然后该选项的构建设置将恢复为“是”。为什么它会不断恢复，而不是保存我的偏好？似乎是一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:47:01.333

删除 /Users/Library/Caches 和 /Library/Caches 中的 XCode 缓存并在运行 Onyx 并删除其他缓存后重新启动计算机可解决此问题。

# css - 如何向 CSS 中“添加细节”（例如 Box shadow）

> ID：12254363
> 
> 赞同：0
> 
> 时间：2012-09-03T21:46:30.173
> 
> 标签：css, attributes

我正在制作一个导航栏，基本上我在底部、左侧（第一个孩子）和右侧（最后一个孩子）都有盒子阴影。

我的结构是`<ul><li><a><span>`

我在底部有 box-shadows `ul li a { 0 1px 0 0 green }`，并且想在第一个和最后一个元素的侧面添加 box-shadow `ul li:first-child a { -1px 0 0 0 red }`。但是，box-shadow 属性正在被`:first-child`选择器覆盖......有没有办法可以说“将 -1px 0 0 0 red 添加到以前的 box-shadow 样式”。

希望我说得通。这是一个演示：http: [//jsfiddle.net/LJj2p/](http://jsfiddle.net/LJj2p/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:19:23.820

不可以。您不能将 a 添加`box-shadow`到有一个的东西上，因为它会覆盖它（或者，更具体地说，具有更高特异性的那个会获胜）。您需要同时为`:first-child`/`:last-child`案例定义两个阴影。

但是，使用伪元素[可以有效地“添加”一个阴影](https://stackoverflow.com/questions/11486071/add-additional-box-shadow-to-an-element-where-existing-shadow-is-unknown/11486224#11486224)，尽管它并没有真正添加它。

# java - 为tomcat配置apache网桥

> ID：12254366
> 
> 赞同：2
> 
> 时间：2012-09-03T21:46:43.197
> 
> 标签：java, apache, tomcat, playframework

我有两个java项目：

1.  是一个 Web 服务，在 Tomcat 6 上运行良好。
2.  另一种是使用Play 1.2.4框架开发的客户端，必须与web服务部署在同一个tomcat上。

我的问题是，当它们在 tomcat 上部署为 war 文件时，客户端请求 URL 不包含应用程序上下文，因此找不到路径。

我读到有可能使 Apache 成为 tomcat 的桥梁可以解决问题，但不知道如何配置它。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:01:34.123

我认为你的意思是你的 UI 是用 Play 开发的，部署在像 /myapp 这样的上下文中。

你有两个选择：

1.  将 WAR 文件重命名为 ROOT.war。Tomcat 会将其部署到 /
2.  使用 Apache 作为代理并实现重定向

Apache 配置看起来像：

```
RedirectMatch "^/$" /myapp
ProxyPass /myapp http://tomcatserver:8080/myapp 
```

# twitter-bootstrap - 旧版本 Bootstrap 的文档

> ID：12254374
> 
> 赞同：21
> 
> 时间：2012-09-03T21:46:54.747
> 
> 标签：twitter-bootstrap

如果我正在处理使用旧版本[Twitter Bootstrap](http://twitter.github.com/bootstrap/)的长期运行或旧项目，我在哪里可以找到文档？（升级并不总是最简单的选择）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-05T17:01:45.777

有一个网站发布了该文档的所有版本：

[http://bootstrapdocs.com/](http://bootstrapdocs.com/)

但是，如果这个网站出现故障，如前所述，您可以在 github 上下载与源代码捆绑在一起的文档：[https ://github.com/twitter/bootstrap/tags](https://github.com/twitter/bootstrap/tags)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-03T23:09:46.080

看起来 GitHub 存储库中的一些人在问[同样的](https://github.com/twbs/bootstrap/issues/1630) [问题](https://github.com/twbs/bootstrap/issues/1527)。[前往GIT 存储库中](https://github.com/twbs/bootstrap/tags)的 to标记并下载与您需要的版本相关联的包。下载包含源代码和文档。

*   [https://github.com/twbs/bootstrap/zipball/v2.1.0](https://github.com/twbs/bootstrap/zipball/v2.1.0)
*   [https://github.com/twbs/bootstrap/zipball/v2.0.4](https://github.com/twbs/bootstrap/zipball/v2.0.4)
*   [https://github.com/twbs/bootstrap/zipball/v2.0.3](https://github.com/twbs/bootstrap/zipball/v2.0.3)
*   [https://github.com/twbs/bootstrap/zipball/v2.0.2](https://github.com/twbs/bootstrap/zipball/v2.0.2)
*   [https://github.com/twbs/bootstrap/zipball/v2.0.1](https://github.com/twbs/bootstrap/zipball/v2.0.1)
*   [https://github.com/twbs/bootstrap/zipball/v2.0.0](https://github.com/twbs/bootstrap/zipball/v2.0.0)
*   [https://github.com/twbs/bootstrap/zipball/v1.4.0](https://github.com/twbs/bootstrap/zipball/v1.4.0)
*   [https://github.com/twbs/bootstrap/zipball/v1.3.0](https://github.com/twbs/bootstrap/zipball/v1.3.0)
*   [https://github.com/twbs/bootstrap/zipball/v1.2.0](https://github.com/twbs/bootstrap/zipball/v1.2.0)
*   [https://github.com/twbs/bootstrap/zipball/v1.1.1](https://github.com/twbs/bootstrap/zipball/v1.1.1)
*   [https://github.com/twbs/bootstrap/zipball/v1.1.0](https://github.com/twbs/bootstrap/zipball/v1.1.0)
*   [https://github.com/twbs/bootstrap/zipball/v1.0.0](https://github.com/twbs/bootstrap/zipball/v1.0.0)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-16T11:40:41.360

[Twitter 引导发布页面](https://github.com/twbs/bootstrap/releases/)包含指向特定版本档案和变更日志的链接。每个存档都包含 docs 文件夹。

自 v2.3.1 以来，已接受答案的站点未更新。

# macos - How to find the serial port number on Mac OS X?

> ID：12254378
> 
> 赞同：40
> 
> 时间：2012-09-03T21:47:16.370
> 
> 标签：macos, terminal, serial-port, arduino

I have just started experimenting with Serproxy and Arduino to get some serial data into Flash Builder/Flex. Serproxy seems to work fine and seems to connect to whatever port is specified. However, I am not able to see or read any data from the serial port using ActionScript. This is odd, because the Arduino should be printing data on a loop.

The only thing I can think of is that I am not setting the correct serial port number. I have been trying to figure out how to find out what number should be set, that is, 5331, 5332, 5333, etc.

How do I find out the port number? Is there a way to do this using Terminal on OS X maybe?

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-09-04T09:20:22.920

You can find your Arduino via Terminal with

```
 ls /dev/tty.* 
```

then you can read that serial port using the screen command, like this

```
screen /dev/tty.[yourSerialPortName] [yourBaudRate] 
```

for example:

```
screen /dev/tty.usbserial-A6004byf 9600 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-04-29T22:09:47.573

Try this: `ioreg -p IOUSB -l -b | grep -E "@|PortNum|USB Serial Number"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T09:42:50.603

I was able to screen using the device's name anyway so that wasn't the issue. I was actually just trying to find the port number, i.e. 5331, 5332 etc. I managed to find this by a trial and error process using an app called TCP2Serial from the app store on Mac OS X. It isn't free but that's fine as long as I know it works!

Worth the 99c :) [http://itunes.apple.com/us/app/tcp2serial/id506186902?mt=12](http://itunes.apple.com/us/app/tcp2serial/id506186902?mt=12)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-11T21:03:55.533

mac os x don't use com numbers. you have to use something like 'ser:devicename' , 9600

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-25T16:25:14.650

While entering the serial port name into the code in arduino IDE, enter the whole port address i.e:

```
/dev/cu.usbmodem* 
```

or

```
/dev/cu.UG-* 
```

where the `*` is the port number.

And for the port number in case of mac just open terminal and type

```
ls /dev/* 
```

and then search for the port that u have set in arduino IDE.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-13T19:00:20.263

Found the port esp32 was connected to by -

```
ls /dev/* 
```

You would get a long list and you can find the port you need

# android - android - 是否有任何强大的方法可以在锁定屏幕上使用播放/暂停控件？

> ID：12254379
> 
> 赞同：1
> 
> 时间：2012-09-03T21:47:16.870
> 
> 标签：android, audio, android-mediaplayer

默认的 Android 音乐播放器会在锁定屏幕上显示当前播放的专辑，以及播放/暂停和下一首/上一首曲目按钮。有没有什么好的方法来使用或复制这个功能，而不需要经历很多痛苦，或者让应用程序变慢或变脆（例如，不能在所有设备上运行）？

相关（从内置音乐播放器获取信息）：[MediaPlaybackservice 可以用来获取android中当前播放的音频文件的信息吗？](https://stackoverflow.com/questions/9310266/can-mediaplaybackservice-be-used-for-getting-information-of-currently-playing-au/10620084#10620084)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:50:12.417

尝试查看[RemoteControlClient](http://developer.android.com/reference/android/media/RemoteControlClient.html)文档。我认为您可以利用 android 操作系统中的现有控件。

# c# - XML 文件中的自动增量 ID

> ID：12254381
> 
> 赞同：0
> 
> 时间：2012-09-03T21:47:24.600
> 
> 标签：c#, asp.net

有人可以帮我这样做吗？我希望他自动增加，但他没有。你能帮我做这件事吗？

我的代码是：

```
 XmlDocument xmlDoc = new XmlDocument();
    xmlDoc.Load(Server.MapPath(@"Participantes.xml"));

    XmlElement newElement = xmlDoc.CreateElement("ID" **/* this is need auto-increment */**);
    XmlElement xmlNome = xmlDoc.CreateElement("Nome");
    XmlElement xmlClass = xmlDoc.CreateElement("Classe");
    XmlElement xmlFaccao = xmlDoc.CreateElement("Facção");
    XmlElement xmlLevel = xmlDoc.CreateElement("Level");

    xmlNome.InnerText = this.TextBox_I1.Text.Trim();
    xmlClass.InnerText = this.Class_I1.SelectedItem.Text.Trim();
    xmlFaccao.InnerText = this.Faccao.SelectedItem.Text.Trim();
    xmlLevel.InnerText = this.TextBox_lvl.Text.Trim();

    newElement.AppendChild(xmlNome);
    newElement.AppendChild(xmlClass);
    newElement.AppendChild(xmlFaccao);
    newElement.AppendChild(xmlLevel);

    xmlDoc.DocumentElement.AppendChild(newElement);
    xmlDoc.Save(Server.MapPath(@"Participantes.xml")); 
```

任何人都可以帮助我吗？有谁知道这是怎么回事？

****__ *_* __ *_* __ *_* _**编辑 09/05/2012 ***_* __ *_* __ *_* __ *_* __ *_*****

 **解决方案：

```
 XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(Server.MapPath(@"Participantes.xml"));

        var x = xmlDoc.GetElementsByTagName("ID");
        int Max = 0;
        foreach (XmlElement item in x)
        {
            int ultimoID = Convert.ToInt32(item.GetAttribute("value"));
            if (ultimoID > Max)
            {
                Max = ultimoID;
            }
        }
        Max++;

        XmlElement newElement = xmlDoc.CreateElement("ID");
        newElement.SetAttribute("value", Max.ToString());
        XmlElement xmlNome = xmlDoc.CreateElement("Nome");
        XmlElement xmlClass = xmlDoc.CreateElement("Classe");
        XmlElement xmlFaccao = xmlDoc.CreateElement("Facção");
        XmlElement xmlLevel = xmlDoc.CreateElement("Level");

        xmlNome.InnerText = this.TextBox_I1.Text.Trim();
        xmlClass.InnerText = this.Class_I1.SelectedItem.Text.Trim();
        xmlFaccao.InnerText = this.Faccao.SelectedItem.Text.Trim();
        xmlLevel.InnerText = this.TextBox_lvl.Text.Trim();

        newElement.AppendChild(xmlNome);
        newElement.AppendChild(xmlClass);
        newElement.AppendChild(xmlFaccao);
        newElement.AppendChild(xmlLevel);

        xmlDoc.DocumentElement.AppendChild(newElement);
        xmlDoc.Save(Server.MapPath(@"Participantes.xml")); 
```

使用属性...因为我们必须遵循标准的 XML。选择 ID 以使用 GetElementsByTagName 设置值！使用 foreach 验证属性“值”并使用 SetAttribute 插入 +1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:50:42.257

这是你需要的吗？

```
int iID = 0;

XmlElement newElement = xmlDoc.CreateElement("ID_" + iID++.ToString()) 
```

其余的都是一样的......

我添加了“ID_”，因为我不确定 XML 标记名称是否可以以数字开头**

# jquery - 如果将鼠标悬停在div 上，如何在 div 中显示图像？

> ID：12254383
> 
> 赞同：2
> 
> 时间：2012-09-03T21:47:51.017
> 
> 标签：jquery, css, html, hover

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:50:32.903

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T21:52:55.137

```
$('#my-ul a').on('mouseenter mouseleave', function(e) {
    $('#imgs img').eq($(this).parent('li').index()).toggle(e.type==='mouseenter');
}); 
```

[**小提琴**](http://jsfiddle.net/ScAVW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T22:11:33.427

你可以为你的href添加一个属性，比如

```
<a href="#" title="img1.jpg" onmouseover="void(hoverImg(this));">asdf</a> 
```

并添加一些简单的脚本，例如

```
function hoverImg(_src)
{
   // Set this to true in order to troubleshoot the script
   var _debugThis = false;

   try
   {
      var _iSrc = _src.getAttribute('title');
      var _iTrg = document.getElementById('imgs');
      var _img=document.createElement('img');
      _img.src=_iSrc;
      // other attributes for your image
      _iTrg.innerHTML=null;
      _iTrg.appendChild(_img);
      // inject unhover trigger
      _iSrc.onmouseout=function(){void(document.getElementById('imgs').innerHTML=null);}
   }
   catch (_e) { if (_debugThis) { alert(_e); } }
} 
```

# c - 如何使用 sprintf 在 C 中的特定位置写入 char 数组？

> ID：12254384
> 
> 赞同：1
> 
> 时间：2012-09-03T21:47:51.013
> 
> 标签：c, arrays, string, matlab, printf

我正在尝试将一些用 MATLAB 编写的代码移植到 C 中，这样我就可以编译该函数并更快地执行它（代码执行得非常频繁，它会带来显着的速度提升）。

所以基本上我的 MATLAB 代码所做的是它需要一个矩阵并将其转换为一个字符串，添加括号和逗号，所以我可以将它写入一个文本文件。这是一个关于向量 MyVec 如何工作的想法：

```
MyVec = rand(1,5);
NbVal = length(MyVec)
VarValueAsText = blanks(2 + NbVal*30 + (NbVal-1));
VarValueAsText([1 end]) = '[]';
VarValueAsText(1 + 31*(1:NbVal-1)) = ',';
for i = 1:NbVal
   VarValueAsText(1+(i-1)*31+(1:30)) = sprintf('%30.15f', MyVec(i));
end 
```

现在，我怎样才能在 C 中获得类似的结果？这似乎并不难，因为我可以提前计算我的字符串（char 数组）的大小，并且我知道我需要写入内存区域的每个元素的位置。该`sprintf`函数也存在于 C 中。但是，我无法理解如何设置它，还因为我没有可以通过反复试验轻松学习的环境（每次尝试我都必须重新编译，这通常会导致分段错误和 MATLAB 崩溃...）。

我希望有人可以提供帮助，即使问题可能看起来微不足道，但我对 C 的经验很少，而且我无法找到合适的例子来开始......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T22:38:12.550

给定一个字符串的偏移量（以字节为单位），检索指向该偏移量的指针只需通过以下方式完成：

```
char *ptr = &string[offset]; 
```

如果您正在遍历矩阵的行来打印它们，您的循环可能如下所示：

```
char *ptr = output_buffer;
for (i = 0; i < n_lines; i++) {
    sprintf (ptr, "...", ...);
    ptr = &ptr[line_length];
} 
```

不过，请确保您已为输出缓冲区分配了足够的内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T06:43:28.887

请记住，`sprintf`它将在它打印的字符串的末尾放置一个字符串终止符，因此如果您“打印”到的字符串应该比您打印的字符串长，那么这将不起作用。

因此，如果您只想覆盖部分字符串，您可能应该使用`sprintf`临时缓冲区，然后使用`memcpy`将该缓冲区复制到实际字符串中。像这样的东西：

```
char temp[32];
sprintf(temp, "...", ...);

memcpy(&destination[position], temp, strlen(temp)); 
```

# javascript - 解析调试器关键字

> ID：12254387
> 
> 赞同：0
> 
> 时间：2012-09-03T21:48:04.010
> 
> 标签：javascript, google-chrome, javascript-debugger

`debugger`关于关键字的解析规则是什么？

在 Chrome 上，以下工作正常：

```
debugger
console.log('Hello!') 
```

但

```
debugger console.log('Hello!') 
```

是一个`SyntaxError`。

为什么用另一种形式的空白（空格）替换一种形式的空白（新行）如此重要？解析规则是`debugger`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T21:49:56.227

这根本与`debugger`语句无关，它归结为[自动分号插入](http://en.wikipedia.org/wiki/JavaScript_syntax#Whitespace_and_semicolons)。

和尝试一样

```
alert('Hi');
console.log('Hello'); 
```

和

```
alert('Hi') console.log('Hello'); 
```

自动分号插入将您的输入变成；

```
debugger;
console.log('Hello!'); 
```

# php - 使用通配符删除文件 - exec vs unlink

> ID：12254391
> 
> 赞同：7
> 
> 时间：2012-09-03T21:48:25.567
> 
> 标签：php, exec, unlink

我正在处理一个 php 脚本，我想使用通配符 (*) 从给定文件夹中删除一些文件。
我找到了一些像[这样的](https://stackoverflow.com/questions/5535202/delete-images-from-a-folder-php#answer-5535221)工作示例，其中使用了 where`unlink()`和`glob()`function。

现在，我想知道，使用`exec`函数和命令删除文件也可以`rm -f /path/to/folder/_prefix_*`吗？
使用它是否有任何安全风险？
如果可以的话，在性能方面会更好吗？

编辑：
所以，从第一个答案我可以看到，确实，使用`exec`可能是一个可以接受的解决方案。
性能问题呢？该选项是否有`exec`可能比该技术更好（更快/要求更低）`glob/unlink`？

先感谢您

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T21:51:28.110

因为用户提供的数据没有机会被注入，所以使用`exec`over没有安全问题`glob/unlink`。但是， using`glob/unlink`允许您定义异常：

```
foreach(glob("delete/*") as $f) {
    if( $f == "delete/notme.txt") continue;
    unlink($f);
} 
```

并且`exec`通常在共享服务器上被禁用，因此`glob/unlink`更便携。如果您有专门的设置并且不打算放弃它，则无需担心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T21:52:51.857

两种选择都可以。但是，如果您不控制自己的服务器或在共享主机上，则 exec 命令将不可用。

为了节省开支，请使用 glob 并取消链接。

# magento - Magento 名称排序

> ID：12254392
> 
> 赞同：0
> 
> 时间：2012-09-03T21:48:50.467
> 
> 标签：magento, sorting

我在理解 magento 按名称排序时遇到了一些困难。
我有很多名称如下的产品，但我不明白它们为什么会这样：

```
Lorem ipsum #1 Alabama
Lorem ipsum #1 Cristiana
Lorem ipsum #10 Jack
Lorem ipsum #14 Connor
Lorem ipsum #2 Washington
Lorem ipsum #2 Kent
Lorem ipsum #1 Pall Mall
Lorem ipsum #1 Disease 
```

**不应该先显示所有以Lorem ipsum #1**开头的产品 吗？

好吧，名称排序似乎有缺陷，因为在我的网站上它们看起来与上面的示例完全相同，其中一些以**Lorem ipsum #2**开头的产品出现在其他以**Lorem ipsum #1**开头的产品之前。

有人可以解释一下为什么会发生这种情况以及如何纠正它吗？

非常赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:20:04.483

理想情况下，将使用自然案例排序从数据库中检索记录，但据我所知，这在 MySQL 中是不可能的，除了[这个 SO post 中描述的奇怪案例](https://stackoverflow.com/questions/153633/natural-sort-in-mysql)之外。要更正它，您需要更改 CatalogSearch 模块形成其查询的方式。

# javascript - 防止媒体重播

> ID：12254395
> 
> 赞同：0
> 
> 时间：2012-09-03T21:49:18.003
> 
> 标签：javascript, cordova

有`onClick`一个链接事件，我在那里使用这些行播放一些音频：

```
tts = new Media(url, onSuccessTTS, onErrorTTS);
tts.play(); 
```

但是，如果用户在播放完第一个媒体之前第二次点击链接，它会再次同时播放相同的文件。如果当前正在播放媒体，有什么方法可以阻止播放？

有一个回调事件`mediaStatus`，但没有记录。

[http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:03:30.737

使用 phonegap 媒体 API，您可以手动创建音频播放器。因此，您必须以编程方式管理播放器的状态。

由于您的媒体播放器应该有一个控件，因此我将保留具有播放按钮的 HTML DOM 元素的状态

```
//on click
var $el = $(this); //or $('someselector');

//check if you have already added the playing state to the element
if ($el.data('state') == 'playing') {
    //pause or ignore
} else {
    $el.data('state', 'playing');  //save state on element
    tts = new Media(url, onSuccessTTS, onErrorTTS);
    tts.play();
} // handle stopped if needed 
```

顺便说一句，phonegap 最高版本为 2.0，因此请考虑使用[2.0 媒体 api](http://docs.phonegap.com/en/2.0.0/cordova_media_media.md.html#Media)。

# c# - HtmltoPDF 64 位版本 dll

> ID：12254401
> 
> 赞同：3
> 
> 时间：2012-09-03T21:50:06.133
> 
> 标签：c#, asp.net, wkhtmltopdf

我发现这个[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)项目可以将 html 转换为 pdf。但我无法找到适用于 Windows 的 64 位 dll。有人能告诉我在哪里可以找到 wkhtmltopdf 的 64 位 dll

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T07:29:51.247

您可以使用[Tues Pechkin](https://github.com/tuespetre/TuesPechkin)将 html 转换为 pdf。它在 32 位和 64 位环境中运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T01:52:41.487

目前没有 64 位版本的 dll。

您可以在 32 位应用程序池中运行该项目（我假设您使用的是 iis）。

# facebook - 我在使用 joomla cms 发布 Facebook 文章时遇到问题

> ID：12254403
> 
> 赞同：-1
> 
> 时间：2012-09-03T21:50:16.083
> 
> 标签：facebook, plugins, joomla, share, linkedin

我正在尝试使用 joomla CMS 制作网页。

我已经尝试了所有可能的免费共享扩展，例如在 facebook、twitter 和linkedin 上...但是每当我安装另一个与社交插件无关的插件时，facebook 上的所有文章帖子都会更改图像、链接和标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:59:39.380

您可能对使用 K2 组件感兴趣。

简而言之，K2 in 是一个扩展的文章管理器，包括更多功能，例如投票、评论和共享系统。社交按钮包括 Facebook、Twitter 和 Google+。

我强烈建议：

[http://getk2.org/](http://getk2.org/)

# php - 使用 JOINING 表创建 mysql 查询语法

> ID：12254405
> 
> 赞同：0
> 
> 时间：2012-09-03T21:50:31.763
> 
> 标签：php, mysql, sql, join, syntax

我无法获取一些数据....我想知道是否有人可以帮助我，

我有 4 个表（喜欢、关注、评论、用户）

我希望能够在用户喜欢/评论/关注/等时填充我的页面......（如果用户正在关注特定用户）。

**喜欢**

```
idlikes   idusers    iditem
  1          1          5
  2          2          4
  3          2          22 
```

**跟随**

```
idfollow   idusers_follower   idusers    idbusiness
  1              1               2           
  2              1               3           
  3              1               4           
  4              4               2           
  5              4                           1 
```

**评论**

```
idcomments   idusers    text
   1            1       asfd
   2            2       safd 
```

**用户**

```
idusers
   1
   2
   3
   4 
```

例如，如果我是 id 用户 #1，我正在关注用户 #2、#3、#4

**我的页面将填充以显示：**

*   #2 喜欢项目 #4、#22。
*   #4 在 #2 之后（因为我在 #4 之后，这就是它显示的原因）
*   #2 评论“safd”

我不确定显示这个的最佳方式是什么？我目前有多个函数一次查询表，并且我正在将数组合并在一起？或者我应该使用连接表？我现在正在尝试...

获取我关注的用户。

```
$feeds = new feed();
$meID = 1;
$query = "SELECT idusers FROM follow WHERE iduserse_follower = ?";

$users = $dbh -> prepare($query);
$users -> execute(array($meID));

while($following = $users -> fetch(PDO::FETCH_ASSOC)){
      $follow = $following['idusers']; //This will get all of useres I'm following
      $populate = $feeds->feed_all($follow); // from function
} 
```

**询问**

```
class feed()
{
     public function feed_all($idusers)
     {
         // SYNTAX HELP //////////////////////
           $query = "SELECT 
           f.idusers_follower, 
           f.idusers, 
           l.iditem, 
           c.text 
           FROM follow f, users u 
           JOIN likes l 
           ON l.idusers = f.idusers 
           JOIN comment c
           ON c.idusers = f.idusers
           WHERE f.idusers_follower = ? AND f.idusers_follower = l.idusers AND f.idusers_follower = c.idusers AND f.idusers = u.idusers"

           $pop = $dbh->prepare($query);
           $pop ->execute($idusers);

           // while loop to return value
    while($row = $pop -> fetch(PDO::FETCH_ASSOC))
    {
        $feed_data[]=$row;
    }
    return $feed_data;
     }
} 
```

这就是我卡住的地方。:( 我什至不确定我的陈述是否正确？

**++++++++++ 编辑：++++++++++++**

我已编辑添加**idbusiness**

现在因为我关注#4，它也会显示#4 正在关注#1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T22:14:21.180

您当前执行三个单独查询的方法与任何方法一样好；您可以使用 将它们组合成一个结果集[`UNION`](http://dev.mysql.com/doc/en/union.html)，如果您想按某个字段（例如活动时间戳）对组合结果进行排序和/或限制组合结果，这将非常有用：

```
 SELECT idusers, 'likes' AS what, likes.iditem AS detail
  FROM   likes JOIN follow USING (idusers)
  WHERE  follow.idusers_follower = 1

UNION ALL

  SELECT f1.idusers, 'follows', f2.idusers
  FROM   follow f1 JOIN follow f2 ON f1.idusers = f2.idusers_follower
  WHERE  f1.idusers_follower = 1

UNION ALL

  SELECT idusers, 'commented', comment.text
  FROM   comment JOIN follow USING (idusers)
  WHERE  follow.idusers_follower = 1 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/31cdb/1/0)上查看。

# cappuccino - 卡布奇诺中的 CPComboBox

> ID：12254411
> 
> 赞同：0
> 
> 时间：2012-09-03T21:51:16.697
> 
> 标签：cappuccino

Cappuccino 框架中似乎没有 ComboBox 组件。

我看到 Cappuccino 中有许多不经常使用的小部件（如谓词编辑器），但缺少 ComboBox。是故意放弃的吗？是否可以以某种方式将 CPPopUpButton 转换为 Combobox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:53:45.870

CPComboBox*确实*存在。它还不是最新的稳定版本……这是该课程的链接：[https ://github.com/cappuccino/cappuccino/blob/master/AppKit/CPComboBox.j](https://github.com/cappuccino/cappuccino/blob/master/AppKit/CPComboBox.j)

我们正在努力推出下一个主要版本，请耐心等待，或者如果您想尝试最新的候选版本，您可以在这里： [https ://groups.google.com/d/topic/objectivej /svifpqxvjfA/讨论](https://groups.google.com/d/topic/objectivej/svifpqxvjfA/discussion)

# jquery - jqPlot - 在日期将填充值设置为零

> ID：12254414
> 
> 赞同：2
> 
> 时间：2012-09-03T21:51:41.750
> 
> 标签：jquery, jqplot

问题是它总是在我的图表开始前两天显示。我尝试设置`pad: 0`并且`min: 0`正在处理正常值，但在日期值上没有那么多。

示例：
我的数组从 开始，`2012.09.01`但图表从 开始`2012.8.30`。

## 描述问题的图像

![在此处输入图像描述](../Images/5ec3dcdbb1c973aac025350ed7f221f7.png)

## 代码

```
var plot1 = $.jqplot('chart-dashboard', [line1, line2, line3], {
        series: [{ color: '#333333', label: '1' }, { color: '#999999', label: '2' }, { color: 'green', label: '3'}],
        axes: {
            xaxis: {
                renderer: $.jqplot.DateAxisRenderer,
                tickOptions: {
                    formatString: '%b&nbsp;%#d'
                },
                // pad: 0 // does not work
                // min: 0 // does not work
            },
            yaxis: {
                min: 0 // works because it's not a date
            }
        },
        highlighter: {
            show: true,
            sizeAdjust: 7.5
        },
        cursor: {
            show: false
        },
        legend: {
            show: true
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:58:03.970

详细介绍解决问题的方法here

[jqplot中倒轴上的填充值](https://stackoverflow.com/questions/10430972/padding-values-on-inverted-axis-in-jqplot/10447196#10447196)

总之，你应该使用

任何一个

```
xaxis: {
     pad:0,
     ....
} 
```

任何一个

```
xaxis: {
     min:'2012.09.01',
     max: ....
} 
```

因为如果你设置**max** , **min** **pad**将不起作用

# performance - 画布弧（）与drawImage（）

> ID：12254415
> 
> 赞同：6
> 
> 时间：2012-09-03T21:52:09.920
> 
> 标签：performance, html5-canvas

这可能看起来无害，但是当以每秒 30 帧的速度执行 1000 多次时，它确实加起来了。我绘制了 3 种大小的圆圈，每个圆圈都有自己的填充颜色 (RGBA)。我将它们绘制为图像一次，并`drawImage()`与数据 URL 一起使用，还是为`arc()`它们中的每一个都做更快？

额外的信息：

*   为所有圈子使用单个画布
*   上下文和画布被缓存
*   目前完全呼吁弧看起来像

    this.scene.context.arc(newLocation, this.y+=this.speed/80, this.distance / 2, 0, Math.PI*2, false);

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T22:27:08.950

![在此处输入图像描述](../Images/ae3b86210e81c9cdaba98557e5b813b9.png)

根据[我的测试](http://jsperf.com/canvas-arc-vs-drawimage)，`drawImage()`在大多数情况下会比使用`arc()`.

该`drawImage()`函数可以使用一个`<img>`或`<canvas>`元素作为其参数，并且在 Firefox 中，使用`<img>`标签更快，尽管其他浏览器显示相反。

归结为：即使是简单的形状，使用`drawImage()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-07T19:26:57.300

`drawImage()`更快，但仅在 Firefox 中。

有一个技巧可以在 Chrome 中`drawImage()`提供与 Firefox 中相同的性能：

```
const drawCircle = function(ctx, x, y, radius) {
  ctx.lineWidth = radius * 2;
  ctx.lineCap = 'round';
  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.lineTo(x, y);
  ctx.stroke();
} 
```

在 Chrome 84 中，这种使用圆形线帽的方法比其他方法快 3 倍：

[![条形图显示 Chrome 和 Firefox 之间的性能比较](../Images/a1cd4b0e495261633565e3df3f6a71c8.png)](https://i.stack.imgur.com/zdatx.png)

有趣的是，Firefox 79 正好相反：这个技巧被证明是最慢的选项，而 arc 只快一点。

我使用的测试在[这里](https://jsperf.com/canvas-arc-vs-drawimage/24)。

# javascript - 避免因吊装造成的滞后

> ID：12254421
> 
> 赞同：0
> 
> 时间：2012-09-03T21:52:33.210
> 
> 标签：javascript, hoisting

我想记录“点击”并尽快执行 HUD，但 oauth_upload_photo 导致它滞后（显然是因为提升）。如何立即捕捉 HUD？

```
var submit_post = function submit_post(){

    console.log('tapped');

    // Show HUD
    plugins.navigationBar.hideRightButton();
    var hud = document.getElementById("hud");
    hud.style.display = 'block';    

    // Get the image
    var image = document.getElementById('myImage');
    var imageURI = image.src;

    // Get the caption from the textarea
    var cap = document.getElementById('tar');
    var caption = cap.value;

    // Call upload photo
    oauth_upload_photo(imageURI,caption);

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:58:40.210

您的问题（在我们理解您实际询问的内容之前需要更多解释）与 javascript 变量提升无关。所有提升所做的都是在函数的顶部定义变量，而不管它们的初始声明在函数中的位置。它不会改变任何语句的执行顺序。

此外，在某些浏览器`console.log()`中，不能保证完全同步，并且日志窗口中的数据显示也不一定是即时的。在实际记录之前有时会有延迟。我不知道这是否是由跨进程边界编组数据、一般重绘逻辑或其他一些内部实现问题引起的。

您可能还想更改此设置：

```
var submit_post = function submit_post(){ 
```

对此：

```
var submit_post = function (){ 
```

甚至这个：

```
function submit_post() { 
```

所以你不是双重定义相同的符号。

# android - PendingIntent 恢复活动

> ID：12254426
> 
> 赞同：1
> 
> 时间：2012-09-03T21:52:50.760
> 
> 标签：android

我有一个在状态栏中放置通知的 Android 活动。选择通知将启动我的主要活动。问题是这`PendingIntent`总是会启动我的活动“MyappMain”的新实例。因此，当我通过单击通知启动我的应用程序时，我得到了 MyappMain 的一个新实例，然后我必须一一退出/完成它们（如果我多次单击通知）。

```
 Intent notificationIntent = new Intent(this, MyappMain.class);
     PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

     notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
     mNotificationManager.notify(HELLO_ID, notification); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:00:15.860

您必须设置“FLAG_ACTIVITY_REORDER_TO_FRONT”标志。

```
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:02:27.863

请`finish();`在开始新的 Intent 之前添加，这样您当前的活动将完成并开始新的活动。

# python - 在 virtualenv 中的 os x lion 上安装 mysql-python 时出现编译器错误

> ID：12254429
> 
> 赞同：0
> 
> 时间：2012-09-03T21:53:14.327
> 
> 标签：python, django, macos, virtualenv, pip

我已经找到了 101 个线程，但我的实际问题没有解决方案。

这是情况。virtualenv，安装了 yolk，将我的代码签出到那个 env 中，代码包括 django，所以不必将它安装到 env 中。

我已将项目位置添加到激活脚本中。

下一步是安装 mysql-python 但这会失败。但是源代码已下载，因此我可以编辑 setup_posix.py 将 mysql_config 位置放入，然后重试。

所以命令是

```
pip install mysql-python -E focus02 
```

focus02 是环境名称。

错误信息是这样的

```
lipo: can't open input file: /var/folders/38/bjgqwdxn37lb1ytw3qtmrwxc0000gp/T//ccTgPn2I.out (No such file or directory)

error: command 'llvm-gcc-4.2' failed with exit status 1 
```

我在网上找到的大部分内容都集中在最后一行，说明编译器不存在。我可以通过在终端中运行 llvm-gcc-4.2 来证明情况并非如此。我得到回应

```
i686-apple-darwin11-llvm-gcc-4.2: no input files 
```

我认为错误在上面的行中。注意文件名前的双斜杠。我在 google 上找不到显示有人找到修复程序的文章。任何人都知道那条线是从哪里提取输入的，因为我不确定问题出在哪里。我假设我已经编辑了一个文件并留下了一个我不需要的斜杠，尽管有一些这个错误的例子让我相信也许不是。

我找到[了这篇文章](https://stackoverflow.com/questions/11833838/gcc-4-2-error-on-mac-osx-mountain-lion-unable-to-install-mysql-python)，但并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:00:53.653

以防谷歌将任何人带到此页面以寻找答案，我今天早上设法解决了这个问题。

解决方法是在尝试安装 mysql-python 时链接正确的 mysq_config

所以 setup_posix.py 的第 24 行是第一次安装 python-mysql 时安装过程失败的行。您需要修复该行，然后重新运行 pip install 命令。

第 24 行是 mysql_config 的链接。当您运行 MAMP 时，mysql_config 的二进制文件对此不起作用，因此请确保您已在其他地方下载了 mysql 源，将其存储在您的路径中或将文件夹添加到您的路径中，然后在 setup_posix 中正确链接安装 mysql-python 之前的 .py 文件。

希望这可以帮助某人。

# ruby-on-rails - rails不更新页面标题

> ID：12254432
> 
> 赞同：0
> 
> 时间：2012-09-03T21:53:37.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, title, railscasts

我正在关注[railscasts](http://railscasts.com/episodes/30-pretty-page-title?view=asciicast)来更新自定义页面标题，并意识到它不再起作用了。所以，我根据评论更新了代码如下。如果我没有设置标题，我会看到“我的服务 -”，而我希望它包含默认的标题值集。请问有什么见解吗？

在`application.html.erb`：

```
<!DOCTYPE html>
<html>
<%= render 'layouts/head' %>
<!-- <body> included in yield -->
  <%= yield %>
<!-- </body> -->
</html> 
```

在`_head.html.erb`

```
<head>
  <title>My services - <%= yield(:title) %> </title>
</head> 
```

在`home.html.erb`[故意不设置标题以查看默认值]

```
<body></body> 
```

在`application_helper.rb`

```
 def title(page_title, default="Testing")
    content_for(:title) { page_title || default }
  end 
```

在`application_helper.rb`中，我还尝试了以下解决方案：

```
 def title(page_title)
    content_for(:title) { page_title || default }
  end

  def yield_for(section, default = "Testing")
    content_for?(section) ? yield(section) : default
  end 
```

请问有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:28:28.297

我认为你应该简化：

```
<title>My services - <%= page_title %> </title> 
```

application_helper.rb

```
def page_title
  if content_for?(:title)
    content_for(:title)
  else
    "Testing"
  end
end 
```

现在，我不认为你真的想要“测试”......真的，我认为你只是不想在 html 页面标题的末尾看到“-”。那么为什么不呢：

```
<title><%= html_title %></title>

def html_title
  site_name = "My services"
  page_title = content_for(:title) if content_for?(:title)
  [site_name,page_title].join(" - ")
end 
```

你会看到：

```
<title>My services</title> 
```

或者如果你这样设置标题：

```
<%= content_for(:title) { "SuperHero" } %> 
```

你会看到的：

```
<title>My services - SuperHero</title> 
```

[#content_for?](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for-3F) 定义为：

```
#content_for? simply checks whether any content has been captured yet using #content_for Useful to render parts of your layout differently based on what is in your views. 
```

# php - PHP为现有数组抛出“未定义索引：”

> ID：12254437
> 
> 赞同：0
> 
> 时间：2012-09-03T21:54:13.170
> 
> 标签：php, arrays, indexing

我正在开发一个脚本来检查托管平台上不同服务的状态，它将状态发送到每个服务的数据库（0：在线/1：功能失调/2：离线/3：未知）。

我收到以下错误：注意：未定义索引：在第 164 行的 /home/cuonicco/public_html/olympe/inc/updatestatus.php

这是代码，我删掉了一些部分（其他 3 个不同的验证）：

```
<?php

ini_set('display_errors', 1);
error_reporting(E_ALL);

$info = array();
$data = array();

$mysqli = new mysqli("*********", "*********", "*********", "*********");

$query = $mysqli->prepare("SELECT name, status FROM olympe");
$query->bind_result($name, $status);
$query->execute();
$query->store_result();
$count = $query->num_rows;

if($count > 0)
{
    while($query->fetch())
    {
        $info[$name]['status'] = $status;
    }
}

$query->close();

// Verification Panel :

$panel = curl_init("https://hosting.olympe.in/login");
curl_setopt($panel, CURLOPT_TIMEOUT, 10);
curl_setopt($panel, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($panel, CURLOPT_HEADER, FALSE);
curl_setopt($panel, CURLOPT_RETURNTRANSFER, TRUE);

$result = curl_exec($panel);
$http_status = curl_getinfo($panel, CURLINFO_HTTP_CODE);
curl_close($panel);

if($http_status == 200)
{
    $data['panel']['status'] = 0;
}
elseif($http_status == 500)
{
    $data['panel']['status'] = 1;
}
else
{
    $data['panel']['status'] = 2;
}

// Verification HTTP :

$http = curl_init("http://cuonic.olympe.in/status/test-http.php");
curl_setopt($http, CURLOPT_TIMEOUT, 10);
curl_setopt($http, CURLOPT_HEADER, FALSE);
curl_setopt($http, CURLOPT_RETURNTRANSFER, TRUE);

$result = curl_exec($http);
$http_status = curl_getinfo($http, CURLINFO_HTTP_CODE);
curl_close($http);

if($http_status == 200)
{
    $data['http']['status'] = 0;
}
else
{
    $data['http']['status'] = 2;
}

// More verification functions...
// ....
// Database updating :

$array_count = count($data);
$i = 0;

while($i <= $array_count)
{
    $name = key($data);
    $array = current($data);

    if($info[$name]['status'] != $data[$name]['status']) // Error occurs here
    {
        $query = $mysqli->prepare("INSERT INTO log (name, previous, latest) VALUES (?, ?, ?)");
        $query->bind_param("sii", $name, $info[$name]['status'], $data[$name]['status']);
        $query->execute();
        $query->close();
    }

    $query = $mysqli->prepare("UPDATE olympe SET status = ? WHERE name = ?");
    $query->bind_param("is", $data[$name]['status'], $name);
    $query->execute();
    $query->close();

    next($data);
    $i++;
}

?> 
```

究竟是什么原因造成的，整天困扰着我。我已经在“错误行”之前回显了数组的值，它们都存在。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:04:17.783

在不知道哪一行引发错误的情况下，我仍然 95% 确定您的问题与`while($i <= $array_count)`. 遍历数组时，防止自己越界的经验法则是，`<`当索引从 0 开始时严格使用小于，当索引从 1 开始时使用小于或等于`<=`。尝试切换`<=`并`<`查看是否可以消除您的错误。

# c# - 不确定何时使用抽象属性，何时不使用

> ID：12254438
> 
> 赞同：59
> 
> 时间：2012-09-03T21:54:20.310
> 
> 标签：c#, .net, oop, properties, abstract

我不确定什么看起来更好，或者我什么时候真正在抽象类和属性中使用，或者什么时候使用非抽象属性。我会尝试做一个简单的例子。假设我有这个：

```
abstract class Human
{
  public GenderType Gender { get; set; }
  public string Name { get; set; }
  public Date Born { get; set; }
  public bool IsNerd { get; set; }

  abstract public void Speak();
  abstract public void Sleep();
  abstract public void AnoyingPeopleOnStackOverflow();
  //... so on
}

class Peter : Human
{
  //Peter is special, he got a second name
  //But thats all, everything else is the same as like on other humans
  public string SecondName { get; set; }

  //...override abstract stuff
} 
```

这可以吗？据我了解，如果我不想覆盖它，我不必使用抽象属性。在这种情况下没关系，只是方法`Speak`，`Sleep`等等应该是抽象的。

现在，如果可以，我什么时候应该或应该使用抽象属性？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-03T21:58:07.837

当您没有默认实现并且派生类必须实现它时，请使用抽象属性。

当您在基类中有实现但希望允许覆盖时，请使用虚拟属性。

使用`override`关键字覆盖成员。将成员标记为`sealed override`不应再次被覆盖。

不要将该属性标记为`abstract`或者`virtual`如果您不希望它被覆盖。

使用`new`关键字来隐藏一个非抽象的、非虚拟的成员（这很少是一个好主意）。

[如何：定义抽象属性](http://msdn.microsoft.com/en-us/library/yd3z1377.aspx)

我发现抽象属性经常出现在设计中，这意味着它们将具有特定于类型的逻辑和/或副作用。您基本上是在说，“这是所有子类都必须具有的数据点，但我不知道如何实现它”。**但是**，可能不希望包含大量逻辑和/或导致副作用的属性。这是一个重要的考虑因素，尽管没有固定的正确/错误方式来做到这一点。

看：

*   [属性是否应该有副作用](https://softwareengineering.stackexchange.com/questions/82377/should-properties-have-side-effects)
*   [CA1024：在适当的地方使用属性](http://msdn.microsoft.com/en-us/library/ms182181.aspx)

就个人而言，我发现我经常使用抽象方法，但很少使用抽象属性。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-09-03T22:10:24.680

我知道我想让他们做什么，我不在乎他们是怎么做的：界面。

我知道我想让他们做什么，我不在乎他们如何做一些事情，但我对他们（或至少他们中的大多数人）将如何做其他事情有坚定的想法：抽象类。

我知道我想让他们做什么，以及他们中的大多数人会怎么做：带有虚拟成员的具体类。

你可以有其他情况，例如没有抽象成员的抽象类（你不能有一个实例，但它提供什么功能，它提供了完全），但它们很少见，通常是因为特定的层次结构干净而公然地为给定的问题提供自己。

（顺便说一句，我不会将 Peter 视为人类的一种，而是将每个彼得视为碰巧被称为 Peter 的人类的一个实例。以这种方式选择示例代码并不公平，但是当你重新考虑这类问题，它比平时更相关）。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-03T22:00:02.890

抽象成员只是您必须覆盖的虚拟成员。您将它用于必须实现但不能在基类中实现的东西。

如果您想创建一个虚拟属性，并且希望它必须在继承您的类的类中被覆盖，那么您可以将其设为抽象属性。

例如，如果你有一个动物类，它的呼吸能力无法仅从它是动物的信息中确定，但这是非常关键的：

```
public abstract class Animal {

  public abstract bool CanBreathe { get; }

} 
```

对于一条鱼和一条狗来说，实现会有所不同：

```
public class Dog : Animal {

   public override bool CanBreathe { get { return !IsUnderWater; } }

}

public class Fish : Animal {

   public override bool CanBreathe { get { return IsUnderWater; } }

} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-03T21:58:10.363

当所有子类*都*必须实现方法/属性时使用抽象。如果不需要每个子类都实现它，那么就不要使用它。

至于您的示例，如果`SecondName`每个人都不需要，则无需在基类中创建抽象属性。另一方面，如果每个人都需要第二个名字，那么就让它成为一个抽象属性。

正确使用抽象属性的示例：

```
public class Car
{
    public abstract string Manufacturer { get; }
}

public class Odyssey : Car
{
    public override string Manufacturer
    {
         get 
         {
             return "Honda";
         }
    }
}

public class Camry : Car
{
    public override string Manufacturer
    {
         get 
         {
             return "Toyota";
         }
    }
} 
```

`Maker`抽象是正确的，因为*每辆*汽车都有制造商，并且需要能够告诉用户该制造商是谁。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T21:58:31.367

抽象属性将用于您希望类始终公开该属性，但您无法确定该属性的实现 - 将其留给/强制继承类这样做。

[这里](http://msdn.microsoft.com/en-us/library/yd3z1377.aspx)有一个示例，其中抽象类被命名`Shape`，并且它公开了一个抽象`Area`属性。您不能`Area`在基类中实现该属性，因为每种形状的面积公式都会改变。所有形状都有一个区域（某种），所以所有形状都应该暴露属性。

您的实现本身看起来还不错。试图为 a 想一个合理的抽象属性示例`Human`，但想不出任何合理的东西。

# java - GXT - 如何将网格过滤器参数添加到请求 URL（获取参数）？

> ID：12254440
> 
> 赞同：1
> 
> 时间：2012-09-03T21:55:16.697
> 
> 标签：java, gwt, gxt

GXT - 如何将网格过滤器参数添加到请求 URL（获取参数）？

```
final PagingLoader<PagingLoadResult<ModelData>> loader = new BasePagingLoader<PagingLoadResult<ModelData>>(proxy, reader) {  
  @Override  
  protected Object newLoadConfig() {  
    BasePagingLoadConfig config = new BaseFilterPagingLoadConfig();  
    return config;  
  }  
}; 
```

=

请求网址：http://localhost/index.php?action=getLines&limit=10&sortField=null&offset=0&sortDir=NONE&filters=[com.extjs.gxt.ui.client.data.BaseStringFilterConfig@3abbafc7]

过滤器=[com.extjs.gxt.ui.client.data.BaseStringFilterConfig@3abbafc7] ???

如何将此行转换为请求 url？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:10:03.303

听起来 BaseStringFilterConfig 中缺少 toString 方法，以便按照您的描述使用它。

确保使用定义 toString 方法的*BaseStringFilterConfig* - 为此，您必须手动覆盖它。

创建一个扩展*BaseStringFilterConfig*类并覆盖 toString() 方法的类。

例如，您可以使用私有静态最终类 BaseStringFilterConfigWithStringRepresentation extends BaseStringFilterConfig {

```
 @Override
    public String toString() {
        return "[field=" + getField() + "| comparison=" + 
                    getComparison() + " | type=" + getType() + " | value=" +
                    getValue() + "]";
    }

} 
```

注意不要使用逗号作为分隔符，因为*过滤器*字段已经以逗号分隔列表的形式出现。您必须以某种方式在服务器端解析它，然后返回正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T23:17:30.097

在 HttpProxy 中有这个方法

```
 protected String generateUrl(C loadConfig) {
    if (writer != null) {
      return writer.write(loadConfig);
    } else {
      if (loadConfig == null) {
        return "";
      }
      return loadConfig.toString();
    }
  } 
```

因此，如果您使用 setWriter 方法为您的 HttpProxy 定义了一个 DataWriter，它将被使用，如果没有，则使用 toString 方法。有一个 DataWriter - UrlEncodingWriter 我相信你在这里需要它

# php - 我想要日期的 php 模式为 DD/MM/YYYY

> ID：12254441
> 
> 赞同：-1
> 
> 时间：2012-09-03T21:55:30.650
> 
> 标签：php, regex

我想要一个正则表达式来`preg_match`检查日期是否在模式中`DD/MM/YYYY`。我尝试了下面的代码，但没有奏效：

```
preg_match("#^[1-31]*1[1-12]*1[1950-2013]?#", $date); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T22:02:24.953

您的正则表达式转换为：

> *   从字符串的开头，
> *   查找 1 到 3 范围内的任意数量的字符，或字符 1
> *   寻找文字 1
> *   查找 1 到 1 范围内的任意数量的字符，或字符 2
> *   寻找文字 1
> *   查找字符 1、9、5、0 到 2、0、1 或 3 中的一个或零

这很明显没有意义。

您无法在正则表达式中验证日期，因为日期不规则。每个月的天数、闰年和许多其他的东西你都有不同的天数。你最好将你的日期分成几部分（使用`explode`）并检查它[`checkdate()`](http://php.net/checkdate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:02:39.957

你的正则表达式太错误了，我什至不知道从哪里开始解释。

但最简单的答案是：不要为此使用正则表达式。PHP 已经有非常好的日期处理例程。例如，`DateTime::createFromFormat()`...

```
$date = DateTime::createFromFormat('Y/m/d', $dateString);
echo $date->format('j-M-Y');  //outputs something like '15-Feb-2009' 
```

见[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T22:04:45.373

您可以使用`preg_match("/^\d{1,2}\/\d{1,2}\/\d{4}/",$date);`正则表达式，但它不适合此任务，因为您仍然需要执行额外的验证（例如，“9999”是有效的年份）。我认为您可能想看一下`date_parse_from_format()`，例如：

```
date_parse_from_format('d/M/Y', $date); 
```

有关更多信息，请参阅[在 PHP 中将字符串转换为日期。](https://stackoverflow.com/questions/2222851/convert-string-to-date-in-php)

# php - 从远程服务器运行 PHP 代码？

> ID：12254443
> 
> 赞同：2
> 
> 时间：2012-09-03T21:55:58.263
> 
> 标签：php, wordpress, wordpress-theming, remote-access

我想阻止访问我的 Wordpress 主题中的函数文件。我想通过将functions.php放在我的服务器上并从客户端的服务器调用它来隐藏functions.php。这是一个可行的解决方案吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T00:01:03.617

为什么不更改权限？您还可以将其移动到目录树的非公共部分并放置 fwd 文件和代码。这就是我使用 wp-config 的方式。我不明白为什么你不能用functions.php做到这一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:09:01.997

如果您的客户端的服务器[设置了 allow_url_include，这在技术上是可行的。](http://php.net/manual/en/features.remote-files.php)但是，这仍然是一个坏主意，原因有四个：

*   **速度：**每次有人查看您客户的网站时，打开另一个 HTTP 请求并等待它完成会变得非常缓慢。它还会锤击您的网站。
*   **安全性：**远程服务器（本例中为您的服务器）上的 PHP 文件需要以纯文本形式打印。这可能是一件坏事，特别是如果您在其中编写了定制的、可能不安全的代码。巧合的是，这也意味着您的方法**实际上不会阻止您的客户找出脚本的作用。**也没有什么可以阻止客户端加载您未受保护脚本的 URL，将其粘贴到他的 WordPress 目录中，并更改`include`. 此外，如果您的服务器遭到入侵或有人抢夺了您的域，他们可以将代码注入您客户的服务器而不受惩罚。
*   **道德：**除非您的客户明确了解这种安排，否则这是不道德的，因为如果您的业务关系终止，他或她仍然容易受到代码注入的影响，即使在终止您的 FTP/SSH/WordPress 仪表板访问之后也是如此。
*   **可靠性：**如果你这样做，任何时候你的网站离线，你的客户的网站都会因为一个混乱的错误信息而死掉。

在您的服务器上重新定位可执行代码可能是一个非常糟糕的主意，虽然这在技术上是绝对可行的，但有许多令人信服的理由说明以这种方式做事是一个坏主意。

如果您试图保护客户的专有代码，您唯一的好选择是：

1.  **自己托管他的网站。**如果您的技术是可以建立专业托管公司的东西，那么这可能是有利可图的。
2.  **构建一个 API**，可以授予对您的专有数据或处理的计量访问权限，并编写一个 WordPress 插件来与 API 对话。通过鼓励开发人员为您的系统编写软件，这可能是有利可图的，而 WordPress 插件将降低与您开展业务的门槛。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T21:58:18.920

您可以只放置一个 .htaccess 规则，将 /functions.PHP 重定向到您的主页。这就是 Facebook 所做的。

编辑：见下面我的评论。

# bash - POST后wget下载，让它等待？

> ID：12254445
> 
> 赞同：0
> 
> 时间：2012-09-03T21:56:07.587
> 
> 标签：bash, wget

我正在处理 bash 脚本，在该脚本中我使用 Wget 提供 POST 数据，而 Wget 应该在特定页面上发出 POST 请求，并且该页面应该返回文件以供下载。问题是，在发出请求后，该页面几秒钟后返回文件，而不是立即返回，所以 Wget 只下载 html 页面，并且不要等待该文件被返回。是否有任何选项可以使这项工作 - 发出发布请求并等待几秒钟以返回文件从远程服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:10:54.767

如果您唯一的问题是需要更多时间，您可以使用 sleep 命令。

你可以在这里获得更多信息：[http ://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/timedate.html](http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/timedate.html)

希望有帮助！

# c# - 刷新表适配器影响单元格焦点

> ID：12254450
> 
> 赞同：2
> 
> 时间：2012-09-03T21:56:57.103
> 
> 标签：c#, datagridview, focus, tableadapter

我正在使用以下代码将单元格更改提交到数据库并计算数据库中另一个单元格的值。虽然我意识到存储计算值不是常态，但我无法找到在数据库级别计算单元格的方法。

```
 private void dgvPlayers_CellValidated(object sender, DataGridViewCellEventArgs e)
    {

            this.Validate();
    .
    .   
    .
            playerListBindingSource.EndEdit();
            playerListTableAdapter.UpdatePlayerAvg(Convert.ToDecimal(average), Convert.ToDecimal(dgvPlayers.Rows[e.RowIndex].Cells[0].Value));
            playerListTableAdapter.Update(dsPlayerTeam.PlayerList);
            this.playerListTableAdapter.Fill(this.dsPlayerTeam.PlayerList);
        }
    } 
```

我遇到的问题是**TableAdapter.Fill**方法会导致单元格焦点发生意外更改。如果我在字段中切换，一切都会按预期工作，但是如果我使用光标键更改行，那么焦点将转移到不同的列，通常（但不总是）第一列。

我想我可以将当​​前单元格的行和列索引存储在**keydown事件中，然后在****CellValidated**处理程序的末尾手动设置焦点。我发现我附加到**DataGridView的****keydown**事件从未被调用过，这可能是因为**DataGridView**实际上是控件的集合。这是我尝试过的：

 ****```
dgvPlayers.KeyDown += new KeyEventHandler(dgvPlayers_KeyDown);
.
.
.

private void dgvPlayers_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
{
    DataGridView theGrid = (DataGridView)sender;
    dgvPlayersKeyPress = e.KeyCode;
} 
```

由于我无法收集按键，因此我无法手动设置焦点。

这里还有其他选择吗？也许有一种方法可以刷新特定单元格的绑定数据而不是 .Fill 整个表格适配器？

我还没有找到适合这个问题的解决方案。有人有推荐吗？我开始理解的是，当它执行 .Fill 时，它会清除表格，然后重新生成解释奇怪焦点行为的行。我开始认为我应该取消绑定datagridview，并手动将数据读取和写入数据库。我真的希望避免这种情况。

比X！****

# python - 设置 matplotlib 滑块标签位置

> ID：12254452
> 
> 赞同：1
> 
> 时间：2012-09-03T21:57:05.750
> 
> 标签：python, matplotlib

很基本的问题。有没有办法将标签位置从默认（标签在左侧）切换到滑块的顶部？我在循环中分配滑块，如下所示：

```
for i in range(10):
    sld[i] = Slider(axes([0.7, .9-(i-1)*.1, .2, .05]), \
    description[i], minval[i], maxval[i], valinit = val[i]) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:03:27.490

是的，有办法。看起来您将数字传递给图例函数，因为[matplotlib 文档](http://matplotlib.sourceforge.net/users/legend_guide.html)定义的位置是`loc=<id>`where 。`<id>`

# asp.net-mvc - 从 SQL Server Express 切换到 SDF 数据库

> ID：12254453
> 
> 赞同：0
> 
> 时间：2012-09-03T21:57:08.717
> 
> 标签：asp.net-mvc, connection-string, sdf

我创建了一个带有以下连接字符串的 mvc 项目（这是默认值）：

```
<add name="TestDb" 
     connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" 
     providerName="System.Data.SqlClient" /> 
```

我想从 SQL Server Express 切换到其中一个文件数据库，这样我就可以将我的数据库存储在同一个存储库中。我该怎么做（步骤/连接字符串）？

我正在使用 MVC 代码优先方法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:54:55.723

1.  安装 EntityFramework.SQLServerCompact NuGet 包。
2.  将您的连接字符串更改为：

    <add name="TestDb" providerName="System.Data.SqlServerCe.4.0" connectionString= "数据源=|DataDirectory|\aspnetdb.sdf" />

使用 Code First，您通常使用上下文类名称作为连接字符串名称。

# php - 在 Dojo 按钮上执行 PHP 脚本单击

> ID：12254456
> 
> 赞同：0
> 
> 时间：2012-09-03T21:57:48.043
> 
> 标签：php, javascript, dojo

我很确定我想太多了，但我就是想不通。我有一个 dojo Button 对象，我想在单击它时执行一个 .php 文件。php 脚本运行一个查询并从中构造一个 .xls 文件，然后提示用户下载或打开该文件。

当我单击按钮时，我得到“加载的 xhrGet”日志，但提示从未出现，所以我不相信脚本实际上正在运行。

```
 <button  data-dojo-type="dijit.form.Button" id="export_xls_button">Export to .xls
                <script type="dojo/method" data-dojo-event="onClick" >
                    dojo.xhrGet({
                        url: 'subRoutines/exportXLS.php',
                        load: function(response){
                            console.debug("loaded xhrGet");
                        },
                        error: function(error){
                            console.debug("error loading xhrGet");
                        }
                    });
                </script>
            </button> 
```

感谢您提供任何帮助或建议。

编辑：当我在网络浏览器中直接访问它并且在服务器上打开了 php 时，该脚本运行得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T00:31:13.137

您不需要使用 XHR 来导出文件。您可以使用单击标准链接（或 dojo 按钮），单击该链接会执行`subRoutines/exportXLS.php`. 单击链接时，脚本会像正常一样构建文件，并将文件和相应的 http 标头发送回用户，而无需离开页面。没有新的位置标头被发送到浏览器，只是一个文件。

这是我用来在 PHP 中导出 CSV 文件的一种简单方法（您可能只需要标题）：

```
$fh = fopen("php://output", 'w');
fputcsv($fh, $csv_headers_array, ",", '"');
foreach ($csv_content_array as $line) {
    fputcsv($fh, $line, ",", '"');
}
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=filename.csv");
fclose($fh);
exit; 
```

你的道场按钮变成这样：

```
<button data-dojo-type="dijit.form.Button" id="export_xls_button">
    Export to .xls
    <script type="dojo/method" data-dojo-event="onClick" >
        window.location = 'subRoutines/exportXLS.php';
    </script>
</button> 
```

# ios - Xcode 4.4 将我的 iOS 项目变成了 Mac OS X 项目！我怎样才能解决这个问题？

> ID：12254457
> 
> 赞同：3
> 
> 时间：2012-09-03T21:58:00.383
> 
> 标签：ios, xcode, macos, xcode4.4, build-settings

我打开了一个 iOS 项目 - 使用 Xcode 4.4.1 - 我已经有 2 个月没有打开过（即使用 Xcode 4.3）。首先，在显示项目导航器后，Xcode 不断崩溃，说**“无法关联工作树”**。

我试图通过删除 xcuserdata 文件和 project.xcworkspace 目录来修复它。

现在，Xcode 打开时没有崩溃，但在方案视图中，它显示为 Mac OS X 项目，而项目和目标都正确设置为“最新 iOS”基础 SDK。

如何在不必重新创建项目并复制所有源文件的情况下解决这个问题？

编辑：我正在使用带有 GitHub 遥控器的 Git。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T00:05:10.590

通过单击当前方案然后“新方案”为 ios 创建一个新方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:40:19.210

我的所有 Xcode 项目都有类似的问题。每个 iOS 项目都变成了 OS X 项目，而无需我更改任何设置。重新安装 Xcode 为我修复了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T22:01:18.277

使用版本控制回滚。如果您发布您正在使用的版本控制系统，那么有人将能够为您提供要使用的特定命令。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-01T08:33:17.503

只需在目标的 Build Settings 中将 Root SDK 设置为 iOS

```
SDKROOT = iphoneos 
```

# java - Maven Google App Engine Guice Class Not Found Exception（尽管 WEB-INF 中存在 jar）

> ID：12254473
> 
> 赞同：0
> 
> 时间：2012-09-03T21:59:54.690
> 
> 标签：java, google-app-engine, maven, guice, classnotfoundexception

我有一个基本上由三个主要部分组成的 Java 项目：

1.  使用 Google App Engine -> war ( *fs_primerranks_server* )的 Web 服务器应用程序
2.  桌面客户端应用程序 -> JAR ( *fs_proxy* )
3.  连接到 Web 服务器的 Android 应用程序。( *fs_replay* )
4.  一个包含通用 jar 类库的奖励模块，该类库包含通用数据对象表示。( *fs_data* )

我开始在 InteliJ IDEA 中创建项目。我到了当前点，然后对 Maven 进行了更改。但是，进行更改时服务器组件不再运行。它可以编译，但会引发*Class Not Found*异常。与之前的 InteliJ IDEA 项目文件一样，一切运行良好，我很确定我的问题在于我的 Maven 文件的设置方式。尽管如此，经过数小时的研究和寻找，我仍然无法纠正它。那么有什么想法吗？

[托管在 github 上的项目文件。](https://github.com/gaborbernat/fs_viewer).

[Maven 构建过程的输出，加上 gae:run 命令（有例外）。](http://pastebin.com/WsNEJV3n)（警告开始于：

java.lang.ClassNotFoundException：net.primeranks.fs_server.GuiceConfigFsPrimeranksServer）

构建后文件结构的图像。Jar 文件和类文件似乎没问题。

![](../Images/9e4f00325c13fa8fc49c105adc7fd0e3.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:58:46.840

好的，糟糕的网络配置文件。启动类的路径错误，因此找不到类异常。:(

# bash - 如何修复我的 Dr Who 下载脚本？

> ID：12254476
> 
> 赞同：0
> 
> 时间：2012-09-03T22:00:13.723
> 
> 标签：bash, sed

这是此脚本的背景：

一两年前，我尝试通过混合 Bash 脚本和`get-iplayer`程序来自动下载 Dr Who。这既是一个脚本练习，又是想看神秘博士。我从来没有让 iPlayer 工作过，而且我`get-iplayer`每次都太健忘而无法运行。

这是代码：

```
#!/bin/bash
#Export programme names; make sure PROG is a search term that only brings up the shows you want
export PROG="Doctor Who"
export SHORT="Dr"

#Get the info you want into some text files, named after the SHORT keyword
(ls /home/$USER/Videos/iPlayer/"$PROG" | grep Doctor) >/home/$USER/Videos/iPlayer/.Code/"$SHORT"Hist.tmp
get_iplayer --listformat="<pid>: <name> - <episode>" --search="$PROG:" >/home/$USER/Videos/iPlayer/.Code/"$SHORT"Curr.tmp 

#Tidy the first file to get rid of underscores 
#then egrep to suck out the pid...schluuurp

sed -i 's/_/ /g' ./"$SHORT"Hist.tmp
#replace the underscores in the file name with spaces
egrep  -o '[bp]{1}[0-9]{2}[0-9a-z]{4}' ./"$SHORT"Hist.tmp >./"$SHORT"Hist.txt
rm ./"$SHORT"Hist.tmp
egrep  -o '[bp]{1}[0-9]{2}[0-9a-z]{4}' ./"$SHORT"Curr.tmp >./"$SHORT"Curr.txt
rm ./"$SHORT"Curr.tmp
#'b[0-9a-z]{7}' is the regex for the pid 
#--I've edited this as the pid regex no longer matches the above

sort ./"$SHORT"Curr.txt -o ./"$SHORT"Curr.txt
sort ./"$SHORT"Hist.txt -o ./"$SHORT"Hist.txt
#get things in order

diff ./"$SHORT"Curr.txt ./"$SHORT"Hist.txt > ./"$SHORT"Diff.txt
rm ./"$SHORT"Curr.txt ./"$SHORT"Hist.txt
sed -i 's/[^ ]* //1' ./"$SHORT"Diff.txt 
sed -i '1d' ./"$SHORT"Diff.txt
sed -i 's/---/\n/g'./"$SHORT"Diff.txt #<---this doesn't work?
sed '/^$/q' 

#get-iplayer --listformat="<index>" --field=pid $(cat "$SHORT"Diff.txt |  tr '\n' ' ') >./"$SHORT"Diff.txt
#sed -i '1,6d' ./"$SHORT"Diff.txt

#sed -i '/^$/,$ d' ./"$SHORT"Diff.txt

#get-iplayer --get $(cat "$SHORT"Diff.txt |  tr '\n' ' ') --output="/home/$LOGNAME/Videos/iPlayer/$PROG" --force 
```

现在，如果这行得通，我就不会在这里发帖了。有几个问题：

*   我指出的 sed 行`sed -i 's/---/\n/g'./"$SHORT"Diff.txt`给了我这个错误
    `sed: -e expression #1, char 11: unknown option to` s'`
*   该`diff`程序似乎没有挑选出当前的`pid`我不知道自从它以前工作以来发生了什么变化。

有人能帮我修复这个脚本吗？

### 编辑

按要求 `uname; sed --version` 生产 `Linux` `GNU sed version 4.2.1`

并`set -x`输入：

```
+ export 'PROG=Doctor Who'
+ PROG='Doctor Who'
+ export SHORT=Dr
+ SHORT=Dr
+ ls '/home/craig/Videos/iPlayer/Doctor Who'
+ grep Doctor
+ get_iplayer '--listformat=<pid>: <name> - <episode>' '--search=Doctor Who:'

+ sed -i 's/_/ /g' ./DrHist.tmp
+ egrep -o '[bp]{1}[0-9]{2}[0-9a-z]{4}' ./DrHist.tmp
+ rm ./DrHist.tmp
+ egrep -o '[bp]{1}[0-9]{2}[0-9a-z]{4}' ./DrCurr.tmp
+ rm ./DrCurr.tmp
+ sort ./DrCurr.txt -o ./DrCurr.txt
+ sort ./DrHist.txt -o ./DrHist.txt
+ diff ./DrCurr.txt ./DrHist.txt
+ rm ./DrCurr.txt ./DrHist.txt
+ sed -i 's/[^ ]* //1' ./DrDiff.txt
+ sed -i 1d ./DrDiff.txt
+ sed -i 's/---/\n/g./DrDiff.txt'
sed: -e expression #1, char 11: unknown option to `s'
+ sed '/^$/q' 
```

和输出：

```
p00wqr1 <--one file

b00sj9q <--the contents of the other file.
b00sj9s
b010tb7
b010y5l
b0110g4
b011884
b011fnd
b011lqw 
```

的输入`diff`是输出的第一行和开始的行`b0...`。为什么它以前工作时不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:32:33.527

回答我自己的问题：

你的差异是错误的方式。所以它没有找到正确的 PID 集。这是工作代码：

```
#!/bin/bash
#Export programme names; make sure PROG is a search term that only brings up the shows you want
#set -x

export PROG="Doctor Who"
export SHORT="Dr"

#Get the info you want into some text files, named after the SHORT keyword
(ls /home/$USER/Videos/iPlayer/"$PROG" | grep "$PROG") >/home/$USER/Videos/iPlayer/.Code/"$SHORT"Hist.tmp
get_iplayer --listformat="<pid>: <name> - <episode>" --search="$PROG:" >/home/$USER/Videos/iPlayer/.Code/"$SHORT"Curr.tmp 

#Tidy the first file to get rid of underscores 
#then egrep to suck out the pid...schluuurp

sed -i 's/_/ /g' ./"$SHORT"Hist.tmp
#replace the underscores in the file name with spaces
egrep  -o '[bp]{1}[0-9]{2}[0-9a-z]{4}' ./"$SHORT"Hist.tmp >./"$SHORT"Hist.txt
rm ./"$SHORT"Hist.tmp
egrep  -o '[bp]{1}[0-9]{2}[0-9a-z]{4}' ./"$SHORT"Curr.tmp >./"$SHORT"Curr.txt
rm ./"$SHORT"Curr.tmp
#'b[0-9a-z]{7}' is the regex for the pid 
#--I've edited this as the pid regex no longer matches the above

sort ./"$SHORT"Curr.txt -o ./"$SHORT"Curr.txt
sort ./"$SHORT"Hist.txt -o ./"$SHORT"Hist.txt
#get things in order

diff ./"$SHORT"Hist.txt ./"$SHORT"Curr.txt > ./"$SHORT"Diff.txt
rm ./"$SHORT"Curr.txt ./"$SHORT"Hist.txt
sed -i 's/[^ ]* //1' ./"$SHORT"Diff.txt 
sed -i '1d' ./"$SHORT"Diff.txt
sed -i 's/---/\n/g' ./"$SHORT"Diff.txt
sed '/^$/q' #<---magic?

#get the <index> from the PID
get-iplayer --listformat="<index>" --field=pid $(cat "$SHORT"Diff.txt |  tr '\n' ' ') >./"$SHORT"Diff.txt
#Sed is a magical beast
sed -i '1,6d' ./"$SHORT"Diff.txt
sed -i '/^$/,$ d' ./"$SHORT"Diff.txt
#Run get-iplayer over for each of the PIDs found, putting them in a video folder
get-iplayer --get $(cat "$SHORT"Diff.txt |  tr '\n' ' ') --output="/home/$LOGNAME/Videos/iPlayer/$PROG" --force 
```

# sql - SQLite 创建上传和管理在线数据库

> ID：12254479
> 
> 赞同：8
> 
> 时间：2012-09-03T22:00:29.893
> 
> 标签：sql, database

首先让我注意到我是该领域的新手。

我想要做的是为我的 android 应用程序创建一个在线数据库。

我一直在寻找教程的网络，但找不到任何教程。

我想学的是：

1.  有没有托管 sqlite 数据库的网站
2.  我如何创建一个 sqlite 数据库？
3.  我如何将数据库上传到网站
4.  在线后如何与数据库通信。

任何帮助都会对这里的人有所帮助，请。

感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T23:07:55.303

让我回答你所有的问题。

1) SQLite 不是传统的 SQL 数据库，不需要服务器，只有一个文件。

2) Lars Vogel 的一篇很棒的教程解释了 android 中几乎所有 sqlite 的概念。 [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

3）您可以将 sqlite 数据库作为常规文件上传到网络服务器，但只有备份意图，这是合理的。

4）再次没有服务器；只是存储单元上的文件，例如硬盘或内存。

我强烈建议阅读我上面链接的文章。

# ruby-on-rails - 在自定义视图中使用 rails_admin 表单？

> ID：12254480
> 
> 赞同：16
> 
> 时间：2012-09-03T22:00:46.587
> 
> 标签：ruby-on-rails, model-view-controller, rails-admin

我正在制作自己的自定义视图，我需要使创建关联模型的过程对我的用户来说不那么痛苦。我想在线显示所有与模型相关的部分，并带有用于编辑它们的控件。对于基本字段，我自己很容易滚动，但我宁愿`form_filtering_select`为内联模型的关联使用部分，但我找不到任何文档来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T07:23:47.477

您可以使用[嵌套表单](https://github.com/ryanb/nested_form)

考虑一个 User 类，它从项目 reader 方法返回一个 Project 实例数组并响应 projects_attributes= writer 方法：

```
class User
  def projects
    [@project1, @project2]
  end

  def projects_attributes=(attributes)
    # Process the attributes hash
  end
end 
```

请注意，fields_for 实际上需要 projects_attributes= writer 方法才能将 :projects 正确识别为集合，并在表单标记中设置正确的索引。

当 projects 已经是 User 的关联时，您可以使用 Accepts_nested_attributes_for 为您定义 writer 方法：

```
class User < ActiveRecord::Base
  has_many :projects
  accepts_nested_attributes_for :projects
end 
```

此模型现在可以与嵌套的 fields_for 一起使用。对于集合中的每个实例，将重复给嵌套 fields_for 调用的块：

```
<%= nested_form_for @user do |user_form| %>
  ...
  <%= user_form.fields_for :projects do |project_fields| %>
    <% if project_fields.object.active? %>
      Name: <%= project_fields.text_field :name %>
    <% end %>
  <% end %>
  ...
<% end %> 
```

详情请[参考参考](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T02:59:59.290

那里有一个很酷的宝石，几乎可以满足您的需求。它被称为[嵌套表单字段](https://github.com/ncri/nested_form_fields)。它允许您在单个页面上编辑记录（连同它们的 has_many 关联）。很酷的一点是，它甚至使用 jQuery 来动态添加/删除表单字段，而无需重新加载页面。查看 gems[文档](https://github.com/ncri/nested_form_fields)以正确使用。希望有帮助！

# html - 字符编码失败

> ID：12254481
> 
> 赞同：0
> 
> 时间：2012-09-03T22:00:52.267
> 
> 标签：html, encoding, iso-8859-1

我正在尝试将 PHP 中某些文件的编码设置为 ISO-8859-1。我尝试使用这个：

```
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=ISO-8859-1">` 
```

但它仍然无法正常工作。我能做些什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:07:28.227

您应该将其作为真正的 HTTP 标头输出。 `<meta>`元素不是很好的替代品。

```
header('Content-Type: text/html;charset=iso8859-1'); 
```

您应该确保文件的编码实际上是 ISO 8859-1 - 所有这些都是告诉浏览器资源处于该编码中，它实际上并没有转码或任何东西。

# ios - iOSOpenDev 命令行工具构建错误

> ID：12254482
> 
> 赞同：4
> 
> 时间：2012-09-03T22:00:58.087
> 
> 标签：ios, xcode, build-error, command-line-tool

好的，所以我整天都在网上搜索为什么会发生这种情况。我已经安装了 iOSOpenDev XCode 模板，并打开了一个新的命令行工具项目，它给了我这个错误：

目标指定产品类型“com.apple.product-type.tool”，但“iphoneos”平台没有这样的产品类型

有谁知道如何解决这一问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:38:19.353

这一定是安装问题。重新安装 iOSOpenDev 并检查其安装程序日志中是否有错误。我遇到了同样的问题，并通过以下两个步骤解决了它。

```
1) xcode-select 必须指向正确的 xcode 位置，例如在终端中运行以下行：
$ sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer

2) 您必须同意终端中的 xcode 许可证
$ sudo xcodebuild -license
$ xcodebuild-许可证

```

之后，重新安装该工具，它应该可以工作。

# android - FragmentPagerAdapter 不会在方向更改时重新创建片段？

> ID：12254494
> 
> 赞同：9
> 
> 时间：2012-09-03T22:02:33.347
> 
> 标签：android

我有一个`ViewPager`(extends `FragmentPagerAdapter`) 包含两个`Fragments`. 当我在它们之间滑动时，我需要的是`ListView`为每个刷新一个。`Fragment`为此，我实现了`ViewPager.OnPageChangeListener`接口（即`onPageScrollStateChanged`）。为了保存对`Fragment`s 的引用，我使用了`HashTable`. 我在方法中存储对`Fragments`in的引用：`HashTable``getItem()`

```
 @Override
        public Fragment getItem(int num) {
            if (num == 0) {
                Fragment itemsListFragment = new ItemsListFragment();
                mPageReferenceMap.put(num, itemsListFragment);
                return itemsListFragment;
            } else {
                Fragment favsListFragment = new ItemsFavsListFragment();
                mPageReferenceMap.put(num, favsListFragment);
                return favsListFragment;
            }
        } 
```

因此，当我从一个滑动`Fragment`到另一个`onPageScrollStateChanged`触发器时，我使用`HashTable`在两个触发器中调用所需的方法`Fragments`（刷新）：

```
 public void refreshList() {
        ((ItemsListFragment) mPageReferenceMap.get(0)).refresh();
        ((ItemsFavsListFragment) mPageReferenceMap.get(1)).refresh();
    } 
```

一切都很好，直到`orientation change`事件发生。之后是`refresh()`方法中的代码，即：

```
public void refresh() {
        mAdapter.changeCursor(mDbHelper.getAll());
        getListView().setItemChecked(-1, true); // The last row from a exception trace finishes here (my class).
    } 
```

结果`IllegalStateException`：

```
java.lang.IllegalStateException: Content view not yet created
        at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
        at android.support.v4.app.ListFragment.getListView(ListFragment.java:222)
        at ebeletskiy.gmail.com.passwords.ui.ItemsFavsListFragment.refresh(ItemsFavsListFragment.java:17) 
```

假设`Content`确实没有创建视图，我将方法中的`boolean`变量设置为并使用条件来调用或不调用，这表明活动和内容视图已成功创建。`onActivityCreated()``true``if/else``getListView()`

然后我正在调试以查看何时`FragmentPagerAdapter`调用`getItem()`并且发生`orientation change`事件后未调用该方法。所以看起来它`ViewPager`包含对 old 的引用`Fragments`。这只是我的假设。

那么，有没有办法强制再次`ViewPager`调用`getItem()`，所以我可以使用对 current 的正确引用`Fragments`？可能是其他一些解决方案？非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T22:11:53.097

> 然后我正在调试以查看 FragmentPagerAdapter 何时调用 getItem() 并且它发生在方向更改事件之后没有调用该方法。所以看起来 ViewPager 包含对旧片段的引用。

片段应该自动重新创建，就像任何片段都在配置更改中一样。例外情况是，如果您使用`setRetainInstance(true)`了 ，在这种情况下，它们应该是与以前相同的片段对象。

> 那么，有没有办法强制 ViewPager 再次调用 getItem() ，这样我就可以使用对当前片段的正确引用？

那里的碎片有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T03:57:03.910

我花了几天的时间寻找这个问题的解决方案，并且发现了很多要点：

*   使用`FragmentPagerAdapter`而不是`FragmentStatePagerAdapter`

*   使用`FragmentStatePagerAdapter`而不是`FragmentPagerAdapter`

*   返回FragmentPagerAdapter`POSITION_NONE`的`getItemPosition`覆盖

*   如果您需要动态更改 Fragment，请不要使用 FragmentPagerAdapter

*   还有很多很多很多其他...

在我的应用程序中，比如[Eugene](https://stackoverflow.com/users/397991/eugene)，我自己管理创建片段的实例。我将它保存在`HashMap<String,Fragment>`某个专门的类中，因此片段永远不会被释放，从而加快了我的应用程序（但消耗了更多资源）。

问题是当我旋转我的平板电脑（和手机）时。该`getItem(int)`片段不再被调用，我无法更改它。

**我真的花了很多时间才真正找到解决方案，所以我需要与 StackOverflow 社区分享，他们帮助了我很多次......**

这个问题的解决方案，虽然很难找到，但很简单：

只需在 FragmentPagerAdapter 的构造函数中保留对 FragmentManager 的引用即可：

```
public class Manager_Pager extends FragmentPagerAdapter {

    private final FragmentManager mFragmentManager;
    private final FragmentActivity mContext;

    public Manager_Pager(FragmentActivity context) {

        super( context.getSupportFragmentManager() );

        this.mContext = context;
        this.mFragmentManager = context.getSupportFragmentManager();
    }

    @Override
    public int getItemPosition( Object object ) {

// here, check if this fragment is an instance of the
//   ***FragmentClass_of_you_want_be_dynamic***

        if (object instanceof FragmentClass_of_you_want_be_dynamic) {

// if true, remove from ***FragmentManager*** and return ***POSITION_NONE***
//   to force a call to ***getItem***

            mFragmentManager.beginTransaction().remove((Fragment) object).commit();
            return POSITION_NONE;
        }

        //don't return POSITION_NONE, avoid fragment recreation.
        return super.getItemPosition(object);
    }

    @Override
    public Fragment getItem( int position ) {

        if ( position == MY_DYNAMIC_FRAGMENT_INDEX){

            Bundle args = new Bundle();
            args.putString( "anything", position );
            args.putString( "created_at", ALITEC.Utils.timeToStr() );

            return Fragment.instantiate( mContext, FragmentClass_of_you_want_be_dynamic.class.getName(), args );

        }else

        if ( position == OTHER ){

            //...

        }else

        return Fragment.instantiate( mContext, FragmentDefault.class.getName(), null );

    }
} 
```

就这样。它会像一个魅力......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-06T21:40:00.183

您可以清除保存的实例状态

```
 protected void onCreate(Bundle savedInstanceState) {
        clearBundle(savedInstanceState);
        super.onCreate(savedInstanceState, R.layout.activity_car);
    }

    private void clearBundle(Bundle savedInstanceState) {
        if (savedInstanceState != null) {
            savedInstanceState.remove("android:fragments");
            savedInstanceState.remove("android:support:fragments");
            savedInstanceState.remove("androidx.lifecycle.BundlableSavedStateRegistry.key");
            savedInstanceState.remove("android:lastAutofillId");
        }
    } 
```

# php - 没有 html 的页面的 curl 选项

> ID：12254496
> 
> 赞同：0
> 
> 时间：2012-09-03T22:02:59.477
> 
> 标签：php, curl

我正在创建一个 nagios，它将自动登录到我的网站并在 Nagios 中显示结果。Currenlty 我可以使用脚本登录，但我的 PHP Curl 脚本在通过 curl 登录后返回完整的 HTML 代码。

这是我的脚本。

```
<?php
$id = "username";
$pw = "password";
$postfields = "userName=farooq&password=hussaind";
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 1); // Get the header
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); // Allow redirection
curl_setopt($ch, CURLOPT_COOKIEJAR, "/tmp/cookie");
curl_setopt($ch, CURLOPT_URL,"http://abc.com/signin.htm");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2) ");
curl_setopt($ch, CURLOPT_POSTFIELDS, "$postfields");
curl_exec($ch);
$statusCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
# echo $statusCode;
if ($statusCode >= 200) {
echo 'OK - Status Code = '. $statusCode . '. Successfully Login' ;
exit (0);
}
else if ($statusCode >= 400){
echo 'CRITICAL - Status Code = '. $statusCode . '. Unable to loging. Please check ';
exit(2);
}
else {
echo 'UNKOWN - Status Code = '. $statusCode . '. Unable to loging. Please check ';
exit(1);
}
curl_close($ch);
?> 
```

我只想打印没有任何 HTML 废话的简单消息。喜欢

OK - 状态码 = 200 成功登录

请在这方面帮助我。

谢谢法鲁克侯赛因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:06:36.717

设置`CURLOPT_RETURNTRANSFER`为`true`。

[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

# ruby - 使用 Eclipse JUNO 调试 ruby 1.9.3 脚本

> ID：12254497
> 
> 赞同：2
> 
> 时间：2012-09-03T22:03:05.763
> 
> 标签：ruby, eclipse, debugging

我正在尝试使用 eclipse JUNO 版本和 DLTK 版本 4.0.0.201206120848 调试一个简单的 ruby​​ 脚本

我用以下 gem 安装了 ruby​​-1.9.3-p194

```
*** LOCAL GEMS ***

archive-tar-minitar (0.5.2)
bundler (1.2.0)
columnize (0.3.6)
debugger (1.2.0)
debugger-linecache (1.1.2)
debugger-ruby_core_source (1.1.3)
linecache19 (0.5.12)
rake (0.9.2.2)
rbx-require-relative (0.0.9)
ruby-debug-base19 (0.11.25)
ruby-debug-ide (0.4.17.beta14)
ruby-debug-ide19 (0.4.12)
ruby-debug19 (0.11.6)
ruby_core_source (0.1.5)
rubygems-bundler (1.0.7)
rvm (1.11.3.5) 
```

但 Eclipse 调试器会抛出以下错误：

ECLIPSE 控制台输出

```
/tmp/dltk6585.tmp/debugger/AbstractRunner.rb:97: warning: else without rescue is useless
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib64/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': /tmp/dltk6585.tmp/debugger/AbstractRunner.rb:94: syntax error, unexpected ':', expecting keyword_then or ',' or ';' or '\n' (SyntaxError)
                when nil: NullLogManager.new 
                         ^
/tmp/dltk6585.tmp/debugger/AbstractRunner.rb:95: syntax error, unexpected keyword_when, expecting keyword_end
                when 'stdout': StdoutLogManager.new 
                    ^
/tmp/dltk6585.tmp/debugger/AbstractRunner.rb:95: syntax error, unexpected ':', expecting keyword_end
                when 'stdout': StdoutLogManager.new 
                              ^
/tmp/dltk6585.tmp/debugger/AbstractRunner.rb:105: syntax error, unexpected keyword_end, expecting $end
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib64/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /tmp/dltk6585.tmp/debugger/FastRunner.rb:10:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib64/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib64/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require' 
```

最奇怪的是使用 ruby​​ 版本 1.8.7 的同样的事情工作正常。请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T21:31:31.837

发生这种情况是因为 DLTK 团队没有维护人员来更新 ruby​​ 1.9 的框架。

我认为这已经解决了，但到目前为止，我认为它还没有在构建中。请参阅 Eclipse 错误 345976： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=345976](https://bugs.eclipse.org/bugs/show_bug.cgi?id=345976)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T21:47:35.513

确认乍得的回应，这似乎已在 DLTK 版本 5 中得到修复。卸载版本 4 并从此处安装版本 5 后[http://download.eclipse.org/technology/dltk/updates-dev/5.0/](http://download.eclipse.org/technology/dltk/updates-dev/5.0/)（不要忘记取消选中 Eclipse“安装”对话框中的“按类别分组项目”以查看未分类的项目）我不再收到错误消息。

我在 Arch Linux 上运行 Kepler Eclipse 版本 4.3.1。

# c# - Mysql C# Connector/Net MembershipProvider 似乎是错误 - 是错误还是我做错了

> ID：12254499
> 
> 赞同：1
> 
> 时间：2012-09-03T22:03:14.853
> 
> 标签：c#, mysql, membership-provider

我正在学习使用 vs2010 和 .NET4 的 ASP.NET MVC —— 不用于生产用途，仅供我个人使用。

我创建了一个默认的 ASP.NET MVC，它带有预先存在的主页、关于页面以及登录和注册页面。在尝试使用现有的登录和注册页面时，我（没有 SQL 服务器）用 MySQL.Web.Security 的 Connector/NET 中的 MySQLMembershipProvider 替换了 SQLMembershipProvider。

然而，这并没有立即奏效，除了人们似乎在自动生成模式时遇到的常见问题（通过谷歌搜索解决）之外，我还注意到了另外两个问题。

第一个是如果未设置或仅作为空字符串，PasswordStrengthRegularExpression 将在 MySQLMembershipProvider 中导致 Null 异常。我通过修改提供程序代码来修复问题发生的“if”语句来解决这个问题。（如果我记得，它只是检查字符串是否为空，它没有检查字符串是否为空）

第二个是 MySQLMembershipProvider 有一个 Initialize 方法，从基类重写，必须在提供程序的每个实例化时调用。此方法仅在第一次实例化时被调用，但之后不会再次调用（通过单步执行代码和使用断点来确定）。提供程序似乎在每次页面加载时被实例化一次。

我的解决方案（不是最好的）是修改 MySQLMembershipProvider 以创建静态变量来存储对 Initialize 的调用的参数和一个变量来存储对象是否已初始化。然后，我在所有其他方法的开头调用 Initialize 方法。如果对象已经初始化，则 Initialize 方法已修改为立即返回。

我的查询是这样的： MySQLMembershipProvider 是否有缺陷，因此我所描述的问题是错误，还是我误解了某些东西并且没有正确使用 MySQLMembershipProvider？

NB 如果您想查看代码，请告诉我其中 90% 的代码是自动生成的或可从 mysql 开发站点作为源代码获得。有很多。

# rspec-rails - 为什么 RSpec 会报告多个相同类型的验证错误？

> ID：12254501
> 
> 赞同：0
> 
> 时间：2012-09-03T22:03:27.707
> 
> 标签：rspec-rails

以下代码：

```
describe Task do
  let(:task) { Task.new }
  subject { task }
  before(:each) do
    task.valid?
    p task.errors.full_messages
  end
  it { should have(1).error_on(:title) }
  it { should have(1).error_on(:description) }
end 
```

输出：`["Title can't be blank", "Title can't be blank", "Title can't be blank"]`我不知道发生这种情况的任何具体原因，但我体验事情的方式是 let 和 subject 不能很好地工作，哈哈

即使以下代码也会产生相同的错误：

```
 it "should have 1 error on title" do
    Task.new.should have(1).error_on(:title)
  end

  it "should have 1 error on description" do
    Task.new.should have(1).error_on(:description)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:23:22.347

这个问题的根源是其他一些规范失败了。当我得到这些规格时，这个也通过了。很有意思。

# java - 我如何在java中从逻辑坐标转换为设备

> ID：12254502
> 
> 赞同：0
> 
> 时间：2012-09-03T22:03:27.230
> 
> 标签：java

我阅读了与 jdk 示例捆绑在一起的线框小程序示例，但我不明白它是如何从逻辑坐标系转换为设备坐标系的。

例如，如果我想将坐标系设置为屏幕中心，我使用以下代码：

```
int iX(float x) {
  return Math.round(centerX + x/pixelSize);
}
int iY(float y) {
  return Math.round(centerY - y/pixelSize);
}
float fx(int x) {
  return (x - centerX) * pixelSize;
}
float fy(int y){
  return (centerY - y) * pixelSize;
} 
```

是否有可能在没有这种转换的情况下进行绘制？

# c++ - PCRE：如何使用 pcrecpp 获取名称捕获

> ID：12254504
> 
> 赞同：0
> 
> 时间：2012-09-03T22:03:34.233
> 
> 标签：c++, regex, pcre

我想知道如何使用`pcrecpp`for *PCRE*获得命名捕获。假设我有以下正则表达式：

```
\\*{5}\\s+Hand\\s+History\\s+for\\s+Game\\s+((?P<HANDNAME>)\\w+)\\s+\\*{5} 
```

如何获得`((?P<HANDNAME>)\\w+)`命名而不是编号捕获的结果？我只知道方法`FullMatch`。我怎么能说得到匹配`HANDNAME`？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:31:23.607

我不认为你可以。C 级 PCRE 会为您提供[pcre_get_named_substring](http://linux.die.net/man/3/pcre_get_named_substring)，但这不是 C++ 类公开的，并且原始文件`pcre*`是私有的。

# javascript - 错误 - 未定义easeInBounce

> ID：12254513
> 
> 赞同：1
> 
> 时间：2012-09-03T22:05:06.807
> 
> 标签：javascript, jquery, jquery-easing

我正在尝试使用 jQuery 缓动功能`easeInBounce`，我看到了这个错误：

```
ReferenceError: easeInBounce is not defined 
```

我正在使用 jQuery 1.8、Easing 1.3 和 jQuery UI 1.8.23。

这是我的代码

***HTML：***

```
 <div id="loading">
<h2 class="textcenter">Loading...</h2>
 <img id="loading-image" class="center" src="/images/ajax-loader.gif"  />
</div>
<div id="content-wrap" class="hide">
    <div class="img-center">
    <img style="z-index:10" src="/bird-bg.jpg" />
    </div>
    <img class="hide" id="bird" src="/bird.png" />
</div> 
```

***CSS：***

```
#bird{
position:absolute;
left:300px;
top: 0px;
z-index:999;
}

.hide {display: none;} 
```

***JS：***

```
var $j = jQuery.noConflict();
   $j(window).load(function() {
        $j('#loading').fadeOut('slow', function() {
  $j("#content-wrap").fadeIn("slow", function() {
      $j("#bird").slideDown({ duration: 1000, easing: easeInBounce});
       });
   });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T22:08:34.603

Javascript引擎的东西easeInBounce是一个变量名。因此，您要么必须定义它，要么将其作为字符串放在引号中。

```
 $j("#bird").slideDown({ duration: 1000, easing: 'easeInBounce'}); 
```

看看我添加的引号。它应该作为一个字符串工作。

如果没有引号，您将不得不将变量定义为下面的示例，这与添加上面的引号相同。

```
 var easeInBounce = 'easeInBounce'; //This would be anywhere before the line where you add the ease in animation 
```

希望这可以帮助。谢谢

# python - pygame.draw 和 pygame.gfxdraw 的区别

> ID：12254516
> 
> 赞同：5
> 
> 时间：2012-09-03T22:05:26.387
> 
> 标签：python, pygame

`pygame.draw`我的问题很简单：使用和有什么区别`pygame.gfxdraw`？我查看了 pygame 文档，但没有人知道它们之间的区别是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T01:27:31.657

该`draw`功能更稳定，也更快`gfxdraw`，虽然`gfxdraw`有更多的选择，不仅沿着抗锯齿线，而且还绘制形状。`pygame.draw`只有 9 个函数，而`pygame.gfxdraw`有 22 个选项，其中包括 . 提供的所有 9 个选项`draw`。我建议使用`gfxdraw`即使它是“实验性的”，因为它具有更多功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T00:52:08.930

`gfxdraw`允许对所有形状进行抗锯齿，其中`draw`仅向线条添加抗锯齿。我`gfxdraw`默认使用。很长一段时间以来，它都被标记为“实验性”，但我没有遇到任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T22:19:22.163

**免责声明：我不使用 pygame！**

根据[gfxdraw 文档页面](http://www.pygame.org/docs/ref/gfxdraw.html)，它“包装了*SDL_gfx 原语*”，因此将其作为 API 提供给那些已经熟悉它的人。它似乎也比更原始的正常提供了一点点`draw`。这里和那里似乎也存在一些语义差异，因此您需要将每个与最接近的对应物进行比较，而不是假设任何东西。

最后一点，gfxdraw 是*实验性*的，在使用它之前你应该始终考虑到这一点。

我希望这有帮助！:)

# python - PAMIE：获取 IE 窗口的 hwnd

> ID：12254525
> 
> 赞同：0
> 
> 时间：2012-09-03T22:06:37.627
> 
> 标签：python, internet-explorer, winapi, automation, pamie

我用的是PAMIE，需要PAMIE实例对应的IE窗口的窗口句柄。我将如何得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:08:28.200

简单的试验和错误：

```
self._ie.hwnd 
```

# javascript - 第一次让 jqGrid 工作

> ID：12254526
> 
> 赞同：0
> 
> 时间：2012-09-03T22:06:48.827
> 
> 标签：javascript, jquery, jqgrid

我第一次尝试让 jqGrid 工作。我几乎逐字复制了一个示例，这是我的代码：

```
<html>
<head>
<title>hi</title>

<script src="http://code.jquery.com/jquery-1.8.1.min.js" type="text/javascript"></script>

<link type="text/css" href="jquery-ui-bootstrap/css/custom-theme/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />

<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script type="text/javascript">

jQuery("#list2").jqGrid({
    datatype: "local",
    height: 250,
    colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
    colModel:[
        {name:'id',index:'id', width:60, sorttype:"int"},
        {name:'invdate',index:'invdate', width:90, sorttype:"date"},
        {name:'name',index:'name', width:100},
        {name:'amount',index:'amount', width:80, align:"right",sorttype:"float"},
        {name:'tax',index:'tax', width:80, align:"right",sorttype:"float"},     
        {name:'total',index:'total', width:80,align:"right",sorttype:"float"},      
        {name:'note',index:'note', width:150, sortable:false}       
    ],
    multiselect: true,
    caption: "Manipulating Array Data"
});
var mydata = [
        {id:"1",invdate:"2007-10-01",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"},
        {id:"2",invdate:"2007-10-02",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"},
        {id:"3",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"},
        {id:"4",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"},
        {id:"5",invdate:"2007-10-05",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"},
        {id:"6",invdate:"2007-09-06",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"},
        {id:"7",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00"},
        {id:"8",invdate:"2007-10-03",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00"},
        {id:"9",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00"}
        ];
for(var i=0;i<=mydata.length;i++)
    jQuery("#list2").jqGrid('addRowData',i+1,mydata[i]);

</script>

</head>
<body>

hi

<table id="list2"></table>
<div id="pager2"></div>

</body>
</html> 
```

我知道我的 .js 路径是正确的，因为 javascript 控制台没有抛出任何错误。此外，我的样式表（jquery-ui-bootstrap）确实存在于该目录中。（当我查看源代码然后单击该 CSS 文件的链接时，chrome 会正确地将我导航到它。）

但是，该页面仅显示“hi”。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:20:12.170

在定义表 ( ) 之前执行您的代码`#list2`。

有两种简单的方法可以解决这个问题，其中任何一种都可以：

*   将 JavaScript 代码移动到`</body>`标记之前。
*   [`document.ready`](http://api.jquery.com/ready/)当整个文档加载完毕后，使用 jQuery 的事件来执行你的代码。

# graphics - 物体深度和深度感知

> ID：12254528
> 
> 赞同：1
> 
> 时间：2012-09-03T22:06:57.683
> 
> 标签：graphics

您希望在其上绘制感知的目标 3D 对象的深度与可见的感知深度之间的关系是什么。

例如，如果我知道一个正方形是 x x y x z 并且我希望在距离 d 处透视绘制它我是否知道 z（深度）线应该相对于消失点绘制多长时间（我应该绘制它 2 /3 的方式或 1/5 的方式）。

两者之间是否存在关系，例如；将深度乘以`DepthObject / distanceToVanishingPoint`= perceptiveDepth。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:18:56.420

使用透视投影，您的视锥从顶部 (x, z) 视图看起来就像一个三角形。你有一个[很好的定理](http://en.wikipedia.org/wiki/Intercept_theorem)，它解释了三角形边和平行线之间的关系。

对于更实用的解决方案，您应该仔细查看[投影矩阵](http://www.songho.ca/opengl/gl_projectionmatrix.html)。

# jquery - FancyBox 正在关闭表单焦点并仅使用表单内容重新打开

> ID：12254531
> 
> 赞同：0
> 
> 时间：2012-09-03T22:07:23.570
> 
> 标签：jquery, fancybox, forms

我有一个带有 a `textarea`、几个`input`s 和 a的表格`submit`。花式框完美打开，但是当我单击任何一个字段以获得焦点时，框会立即关闭并重新打开，仅显示表单内容。使用仅包含表单的新框，如果我尝试获得焦点，同样的事情会再次发生，再次重新打开表单。

HTML 表单：

```
<form>
<fieldset class="profile">
<legend>Email John Doe:</legend>

<!-- PASS NAME (to query email) to the script -->
<input type="hidden" name="who" value="John Doe" />

<label for="from">Your Email:</label><br />
<input type="email" id="from" name="from" /><br />
<label for="message">Message:</label><br />
<textarea id="message" name="message" rows="4"></textarea>
<input type="submit" value="Send Email" />
</fieldset>
</form> 
```

jQuery：

```
$(document).ready(function() {
    $('.profile').fancybox({
        closeClick  : false
    });
}); 
```

我以前使用过fancybox，但这让我完全被难住了。我确定这是我想念的愚蠢的东西，但我不知道那个愚蠢的东西是什么。

PS：我不确定它是否相关，但内容是通过 ajax 加载的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:27:39.627

我认为罪魁祸首是`<fieldset class="profile">`绑定到fancybox，因此尝试获取`focus`（单击）也会影响`fieldset`标签，从而一遍又一遍地触发fancybox。

使用不同的类来触发 fancybox 或更改`fieldset`标签的类。

# php - 如何在 XAMPP 上安装 Imagick？[Ubuntu 12.04]

> ID：12254532
> 
> 赞同：1
> 
> 时间：2012-09-03T22:07:26.677
> 
> 标签：php, ubuntu, xampp, imagick

我正在尝试使用 XAMPP 在我的 Ubuntu 机器上安装 Image Magick，但到目前为止还没有运气。我试过安装包`php5-imagick`，但它指出不满足依赖关系：

```
The following packages have unmet dependencies:
 php5-imagick : Depends: phpapi-20090626 
```

我尝试编译 Image Magick 包，然后使用`pecl`它来安装它，但它停止了。

```
lampp/bin  » sudo ./pecl install imagick
WARNING: channel "pecl.php.net" has updated its protocols, use "pecl channel-update pecl.php.net" to update
downloading imagick-3.0.1.tgz ...
Starting to download imagick-3.0.1.tgz (93,920 bytes)
.....................done: 93,920 bytes
13 source files, building
running: phpize
grep: /opt/lampp/include/php/main/php.h: No such file or directory
grep: /opt/lampp/include/php/Zend/zend_modules.h: No such file or directory
grep: /opt/lampp/include/php/Zend/zend_extensions.h: No such file or directory
Configuring for:
PHP Api Version:
Zend Module Api No:
Zend Extension Api No:
configure.in:3: warning: prefer named diversions
configure.in:3: warning: prefer named diversions
Please provide the prefix of Imagemagick installation [autodetect] : 
building in /tmp/pear/temp/pear-build-root0hHzBG/imagick-3.0.1
running: /tmp/pear/temp/imagick/configure --with-imagick
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for PHP prefix... /opt/lampp
checking for PHP includes... -I/opt/lampp/include/php -I/opt/lampp/include/php/main -I/opt/lampp/include/php/TSRM -I/opt/lampp/include/php/Zend -I/opt/lampp/include/php/ext -I/opt/lampp/include/php/ext/date/lib
checking for PHP extension directory... /opt/lampp/lib/php/extensions/no-debug-non-zts-20090626
checking for PHP installed headers prefix... /opt/lampp/include/php
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... no
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking for gawk... no
checking for nawk... nawk
checking if nawk is broken... no
checking whether to enable the imagick extension... yes, shared
checking whether to enable the imagick GraphicsMagick backend... no
checking ImageMagick MagickWand API configuration program... found in /usr/local/bin/MagickWand-config
checking if ImageMagick version is at least 6.2.4... found version 6.7.9 Q16
checking for MagickWand.h header file... found in /usr/local/include/ImageMagick/wand/MagickWand.h
checking PHP version is at least 5.1.3... yes. found 5.3.8
checking for ld used by cc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for /usr/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/nm -B
checking whether ln -s works... yes
checking how to recognize dependent libraries... pass_all
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking the maximum length of command line arguments... 1572864
checking command to parse /usr/bin/nm -B output from cc object... ok
checking for objdir... .libs
checking for ar... ar
checking for ranlib... ranlib
checking for strip... strip
checking if cc supports -fno-rtti -fno-exceptions... no
checking for cc option to produce PIC... -fPIC
checking if cc PIC flag -fPIC works... yes
checking if cc static flag -static works... yes
checking if cc supports -c -o file.o... yes
checking whether the cc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no

creating libtool
appending configuration tag "CXX" to libtool
configure: creating ./config.status
config.status: creating config.h
running: make
/bin/bash /tmp/pear/temp/pear-build-root0hHzBG/imagick-3.0.1/libtool --mode=compile cc  -I. -I/tmp/pear/temp/imagick -DPHP_ATOM_INC -I/tmp/pear/temp/pear-build-root0hHzBG/imagick-3.0.1/include -I/tmp/pear/temp/pear-build-root0hHzBG/imagick-3.0.1/main -I/tmp/pear/temp/imagick -I/opt/lampp/include/php -I/opt/lampp/include/php/main -I/opt/lampp/include/php/TSRM -I/opt/lampp/include/php/Zend -I/opt/lampp/include/php/ext -I/opt/lampp/include/php/ext/date/lib -I/usr/local/include/ImageMagick  -DHAVE_CONFIG_H  -g -O2   -c /tmp/pear/temp/imagick/imagick_class.c -o imagick_class.lo
mkdir .libs
 cc -I. -I/tmp/pear/temp/imagick -DPHP_ATOM_INC -I/tmp/pear/temp/pear-build-root0hHzBG/imagick-3.0.1/include -I/tmp/pear/temp/pear-build-root0hHzBG/imagick-3.0.1/main -I/tmp/pear/temp/imagick -I/opt/lampp/include/php -I/opt/lampp/include/php/main -I/opt/lampp/include/php/TSRM -I/opt/lampp/include/php/Zend -I/opt/lampp/include/php/ext -I/opt/lampp/include/php/ext/date/lib -I/usr/local/include/ImageMagick -DHAVE_CONFIG_H -g -O2 -c /tmp/pear/temp/imagick/imagick_class.c  -fPIC -DPIC -o .libs/imagick_class.o
In file included from /tmp/pear/temp/imagick/imagick_class.c:21:0:
/tmp/pear/temp/imagick/php_imagick.h:40:17: fatal error: php.h: No such file or directory
compilation terminated.
make: *** [imagick_class.lo] Error 1
ERROR: `make' failed 
```

我不知道什么`php.h`文件丢失了，或者为什么它丢失了。

我也尝试[了两年前找到的一个主题](http://www.apachefriends.org/f/viewtopic.php?p=157915)，但是当我下载[源代码](https://github.com/php/php-src/zipball/php-5.3.8)时，没有任何`configure`文件，所以我无法继续。

我真的很绝望，因为没有任何效果，我确实安装了另一个 PHP 版本（5.4.6），但我认为这不是问题所在。

你们能对此提供一些启示吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:03:57.103

Ubuntu 基于 Debian，我不喜欢 Debian 的一件事是，有时官方（稳定）软件包远远落后于供应商提供的软件包。幸运的是，对于 Debian 和 Ubuntu，您都可以使用 dotdeb 存储库，它与所有最流行的软件包（如 mysql、php 等）保持同步。如果您不熟悉，只需查看[dotdeb 存储库](http://dotdeb.org/)（或直接[在他们的设置说明中](http://www.dotdeb.org/instructions/)）并从那里安装 PHP 和相关的东西。如果缺少任何包装，请在此处查看[有关如何自己制作的分步说明](http://www.dotdeb.org/2008/09/25/how-to-package-php-extensions-by-yourself/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T17:48:18.097

为什么不使用高级打包工具？

**Ubuntu 12.04**的安装设置：

1.  安装 imagemagick：

    `sudo apt-get install imagemagick`

2.  安装 imagemagick PECL 扩展：

    `sudo apt-get install php5-imagick`

# javascript - Javascript 中的正则表达式

> ID：12254534
> 
> 赞同：0
> 
> 时间：2012-09-03T22:07:34.760
> 
> 标签：javascript, regex

```
var str = "<example>{{var=b|arg=args|link=c|testing=test1}}</example>"; 
```

如何使用正则表达式进行匹配`args`？换句话说，我想匹配后面`arg=`但在 next 之前的东西`|`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:09:15.383

```
var match = str.match(/arg=([^|]+)/); 
```

然后检查是否`match[1]`存在。如果确实如此 - 那么它包含你想要的

**更新**：

正如@nnnnnn 指出的那样-而不是检查是否存在，检查是否不是`match[1]`这样会更正确：`match``null`

```
if (match) {
    // match[1] here contains required info
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:09:52.963

像这样的东西：

```
var args = str.match(/arg=([^|]*)/);
if (args != null) {
   // args[1] contains the match...
} 
```

也就是说，查找`arg=`并捕获后面的零个或多个非`|`.

# database - 我应该使用什么作为该表的主键？

> ID：12254538
> 
> 赞同：0
> 
> 时间：2012-09-03T22:07:56.723
> 
> 标签：database, database-design

我正在为一个网站构建一个小型论坛组件，其中子论坛有不同的管理员和模块负责，并且可以禁止用户访问各个子论坛。我的禁令表如下所示：

```
_Bantable_ 
user_id 
group_id
start_date 
end_date 
banned_by 
comment 
```

起初我打算使用前四列作为主键，但现在我想知道如果我使用一个是否重要，因为没有人会在同一时间从同一个论坛被禁止，并且不管我仍然需要检查他们是否已经被禁止以及在什么时间间隔内。我是否应该在这里不使用密钥，而只需在 user_id 和 group_id 上创建一个索引并在需要时搜索它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:22:09.193

这不是 100% 清楚的，但听起来您希望针对特定`groupId`. 如果是这种情况，您应该创建一个复合主键：

```
user_id,
group_id,
end_date 
```

这会让你做

```
SELECT * FROM bantable WHERE user_id=$currentUserToCheck AND group_id=$currentGroupToCheck AND end_date < $currentDate 
```

或类似的东西

**注意：**如果您希望您的主键在您遵循的任何数据库设计原则方面保持一致，那么您可以将主键设置为`user_id`（因为它确实是一个唯一标识符），然后在我在上面指定的三列。

绝对确保您对该表运行的任何需要单独索引的查询都正确生成了这些索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T22:13:30.603

你为什么不把`user_id`主键作为主键？我的意思是你甚至不必使用`auto_increment`（这显然在这里没有任何意义）。

猜测你会`user_id`在登录时请求无论如何，这可能会提供最好的性能来查看是否有禁止事项的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:00:56.547

您需要过去禁令的历史记录吗？

*   如果没有，只需在`{user_id, group_id}`. *当前*在其中的任何数据都`_Bantable_`决定了谁*当前*被禁止。`end_date`当禁令到期时，只需删除相应的行（并考虑是否需要¹）。

*   如果您确实需要历史记录，请像以前一样将有效禁令放入原始表中，但是当禁令到期时，不要只是将其删除 - 而是将其移动到单独的“历史”表中，该表将具有代理 PK ²独立于`{user_id, group_id}`（因此相同的用户/组对可以在多行中）和防止时间重叠的触发器（类似[这样](https://stackoverflow.com/a/12043793/533120)）。

* * *

*¹如果这是禁令即将结束的日期，那么您确实需要它。如果这是禁令结束的日期，那么您不会 - 届时该行将消失。*

*²或者，在 上进行 PK `{user_id, group_id, start_date}`。*

# actionscript-3 - 如何通过字符串寻址对象？

> ID：12254541
> 
> 赞同：3
> 
> 时间：2012-09-03T22:08:12.927
> 
> 标签：actionscript-3

背景：

在 AS3 的共享对象中，我保存了在我的游戏中出现在舞台时间的某些 MovieClip 的名称（作为字符串）。

问题：

我试图扭转这一点，到目前为止我发现的唯一方法是这样的方法：

```
function objectNameFromString(objectNameAsString): MovieClip {
    switch (objectNameAsString): {
    case "myobject":
        return myobject;
        break;
    }
} 
```

问题是我必须做出大约 20 个案例陈述才能完成这项工作，这似乎是不必要的 =( 无论如何你可以从字符串中引用一个 MovieClip 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:54:23.727

我认为您正在寻找的是：
[getChildByName()](http://livedocs.adobe.com/flash/9.0_es/ActionScriptLangRefV3/flash/display/DisplayObjectContainer.html#getChildByName%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:05:30.070

这不是一个很好的编码方式，因为它绕过了类型安全，但是任何对象的属性，包括你的时间线，无论如何都存储为一个数组，所以如果你的属性和你的函数都在同一个范围内（即两个变量都在主时间线，无论您的 MovieClip 在显示层次结构中的哪个位置），您都应该能够使用`this["myObject"];`：

```
import flash.display.MovieClip;

var myObject:MovieClip = addChild(new MovieClip()) as MovieClip;

trace(this["myObject"]);

// Output: [object MovieClip] 
```

但是，正如其他人所建议的那样，构建一个正式的集合可能是一种更好的方法，或者`getChildByName()`如果所有对象共享一个共同的父对象（例如，如果它们都直接放置在舞台上），则使用该方法。

# django - Django urls.py 在 WampServer 上捕获所有现有 HTML 项目的 url

> ID：12254542
> 
> 赞同：0
> 
> 时间：2012-09-03T22:08:14.207
> 
> 标签：django, apache, wamp, django-urls, httpd.conf

我让 WampServer 与 Aptana IDE 完美配合，为不同的 html 项目使用多个文件夹。然后我安装了 Django 并将其添加到 Apache 的 httpd.conf 中：

```
Alias /images/ "c:/wamp/www/daas/templates/images/"
<Directory "c:/wamp/www/daas/images>
Order allow,deny
Allow from all
</Directory>

WSGIScriptAlias / "c:/wamp/www/daas/apache/django.wsgi"

<Directory "c:/wamp/www/daas/apache">
Allow from all
</Directory>

<VirtualHost *:80>
    ServerName 127.0.0.1
    DocumentRoot c:/wamp/www/daas/
</VirtualHost> 
```

现在我拥有用于​​ html 项目的虚拟主机...

```
NameVirtualHost 127.0.0.1
<VirtualHost 127.0.0.1>
    ServerName localhost
    DocumentRoot 'C:\wamp\www'
</VirtualHost>
<VirtualHost 127.0.0.1>
    ServerName projectA.local
    DocumentRoot 'C:\wamp\www\projectA'
</VirtualHost> 
```

无法正确加载，因为 Django 的 urls.py 正在捕获所有 urls `The current URL, projectA, didn't match any of these regular expressions`，即使是那些不在 Django 项目中的。

我该如何解决这个问题？在 Djano 方面还是在 Apache 方面？在这里（[我如何在 ubuntu 上的 apache webserver 上运行 Django 和 phpmyadmin](https://stackoverflow.com/q/5264811/675577)）是一个类似的问题，但该解决方案对我不起作用。幸运的是，`localhost/phpmyadmin`工作正常，但`localhost/projectA`没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:37:33.443

看起来`WSGIScriptAlias / "c:/wamp/www/daas/apache/django.wsgi"`在您的 httpd.conf 中捕获了 apache 上的所有请求。

# google-app-engine - 对 Google App Engine Go 运行时的搜索支持

> ID：12254547
> 
> 赞同：0
> 
> 时间：2012-09-03T22:08:48.597
> 
> 标签：google-app-engine, go

有对 python 和 Java 的搜索支持（实验性），最终也可能支持 Go。到那时，我怎样才能对我的记录进行最少的搜索？

通过邮件列表，我想到了将搜索请求代理到 python 后端的想法。我仍在评估 GAE，还没有使用后端。要使用 python 支持设置搜索，我是否必须通过此后端将所有请求（来自 Go）发送到数据存储？它有多实用，有哪些缺点？任何关于此的教程。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T02:26:29.470

您可以制作一个带有一些处理程序的 RESTful Python 应用程序，而您的 Go 应用程序将获取 Python 应用程序的 urlfetches。然后，您可以将 Python 应用程序作为后端或前端（使用与 Go 应用程序不同的版本）运行。第一个处理程序将接收一个键作为输入，从数据存储中获取该实体，然后将相关信息存储在搜索索引中。第二个处理程序将接收查询，对索引进行搜索并返回结果。您需要一个处理程序来从搜索索引中删除文档以及您想要的任何其他操作。

除了第一个处理程序接收密钥并从数据存储中获取之外，您还可以只将获取中的实体数据发送给它。

你现在也可以使用像 IndexDen 这样的服务（特别是如果你没有很多实体要索引）：http: [//indexden.com/](http://indexden.com/)

在进行 urlfetches 时，请记住当前应用的配额，即使是从您自己的应用程序请求 URL 也是如此。在与您自己的应用程序通信时，请求删除/增加这些配额的跟踪器中有两个问题，但不能保证一定会发生。看这里：

*   [http://code.google.com/p/googleappengine/issues/detail?id=8051](http://code.google.com/p/googleappengine/issues/detail?id=8051)
*   [http://code.google.com/p/googleappengine/issues/detail?id=8052](http://code.google.com/p/googleappengine/issues/detail?id=8052)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T01:40:39.367

很快就会有针对 Go 运行时的全文搜索。

# android - 了解为什么在这种情况下会创建 android 活动

> ID：12254552
> 
> 赞同：0
> 
> 时间：2012-09-03T22:09:31.307
> 
> 标签：android, android-activity, activity-lifecycle

我有一个退出方法可以做到这一点：

```
public void quitFinalize(ServicedActivity actCtx)
{   
    for (ServicedActivity act : mRunningActivities)
        launchActivity(actCtx, new Intent(mAppCtx, act.getClass()).setAction("--"));
} 
```

检查 mRunningActivities 是否正常。它包含我的任务中已创建但未销毁的所有活动。所有活动都继承自：

```
public class ServicedActivity extends FragmentActivity implements OnClickListener
{
    ...

    @Override
    protected void onNewIntent(Intent intent) 
    {
        super.onNewIntent(intent);

        if (/*Intent.ACTION_SCREEN_OFF*/"--".equals(intent.getAction()))            // used for quitting the game
        {
            finish();
        }
    }

        ...
} 
```

我注意到对于 Set 中的 2 个活动，该机制运行良好。然而，对于 3 个 Activity，Android 4.0.3 决定它应该启动（创建）Set 中的一个 Activity 的另一个实例（它似乎特别喜欢启动一个特定的 Activity，而不仅仅是任何一个）。他们完成了所有活动（因此 4 个被破坏的活动而不是原来的 3 个）

我确定不是我无意中创建了该活动 - 我的所有 launchActivity 逻辑都通过将 FLAG_ACTIVITY_REORDER_TO_FRONT 标志附加到 Intent 的方法进行过滤，因此我不能以相同的 Activity 类的两个实例结束。必须是重新创建它的操作系统。

也尝试不使用 'android:launchMode="singleTop"' 清单文件属性 - 对于应用程序中的所有活动都是如此。一样。

这里发生了什么 ？上面的 onNewIntent() 方法按预期被命中了 3 次，但在中间，Android 创建了一个新的 Activity 然后也立即终止它。

谢谢

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:22:34.987

我设法错误地克服了这个问题，似乎：文档提到活动将在各种事件（例如配置更改）上被销毁/重新创建。所以我想从操作系统中窃取对所有可能的配置更改的控制；现在 AndroidManifest.xml 看起来像

```
<activity android:name=".ui.MainMenu" android:launchMode="singleTop" android:screenOrientation="reverseLandscape" android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
   android:configChanges="mcc|mnc|locale|touchscreen|keyboard|keyboardHidden|navigation|orientation|screenLayout|uiMode|fontScale"   />

... etc, same for all activities 
```

现在，[文档](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)还指出：

> public void onConfigurationChanged (Configuration newConfig) 自：API 级别 1
> 
> 当您的活动运行时设备配置发生更改时由系统调用。请注意，仅当您选择了要使用清单中的 configChanges 属性处理的配置时，才会调用此方法。如果发生任何未被该属性选择报告的配置更改，则系统不会报告它，而是停止并重新启动活动（以使用新配置启动它）。

我确实在我的活动中重写了这个方法，它很少被调用（比如，20 次中可能有 1 次）。但是问题消失了，这个方法并没有真正被调用。所以我有点困惑。也许这不是我问题的根源，而是……某种程度上相关。

# java - 为什么有些类在创建实例时不需要“New”这个词？

> ID：12254553
> 
> 赞同：7
> 
> 时间：2012-09-03T22:09:50.163
> 
> 标签：java, class, instance

我是 Java 新手。让我感到困惑的一件事是为什么有些类需要`new`实例化，而为什么有些类不需要实例`new`化。

例如，我正在查看 log4j，它不需要`new`.

```
// get a logger instance named "com.foo"
Logger  logger = Logger.getLogger("com.foo");
logger.setLevel(Level.INFO); 
```

为什么其他一些类需要新的？例如，一个 Employee 类：

```
Employee X = new Employee (John);
X.getwork(); 
```

等等等等

为什么我们没有说，`Logger logger = new Logger(...);`？`new`以及为什么即使没有, like`logger.setLevel()`等我们也能使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T22:14:41.770

在 Java 中创建新对象的唯一方法是使用`new`[1]。但是，在某些类中，您不允许`new`自己说，您必须调用工厂方法，该方法可能是静态的（如您的记录器示例）或不是。类的作者通过使构造函数具有除`public`.

另请注意，您的示例可能根本不涉及新对象。该`Logger`函数可能返回一个旧对象，而不是一个新对象。

奥格登·纳什（Ogden Nash）的以下诗似乎有点相关：

```
This morning I went to the zoo 
In order to look at the gnu. 
But the old gnu was dead,
and the new gnu, they said, 
Was too new a new gnu to view. 
```

[1] 除非你涉及到低级反射，否则使用`Object.clone()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T22:19:19.487

在这种情况下，我们正在处理*工厂方法*，正如我在[评论](https://stackoverflow.com/questions/12254553/when-does-a-class-need-new-to-instantiate-why-a-class-does-not-need-new#comment16428545_12254553)中所说的那样。

请参阅相关的 API 规范[`Logger`](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html#getLogger(java.lang.String))

> 检索根据 name 参数的值命名的记录器。如果命名记录器已经存在，那么将返回现有实例。否则，将创建一个新实例。
> 
> 默认情况下，记录器没有设置级别，而是从具有设置级别的最近祖先那里继承它。这是 log4j 的核心特性之一。

[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)是一种创建型设计模式，根据维基百科，在以下情况下通常很有用：

> 工厂模式可以在以下情况下使用：
> 
> *   对象的创建排除了它的重用，而没有大量的代码重复。
> *   对象的创建需要访问不应包含在组合类中的信息或资源。
> *   生成对象的生命周期管理必须集中，以确保应用程序内的行为一致。

所有这三个都适用于这里......谁知道找到正确的记录器需要什么样的工作？每次你想使用一个新的记录器时，你并不是真的对创建一个全新的记录器感兴趣……相反，你的重点主要是——*使用*一个。

Creative Commons Wiki 也有一篇[相关文章](http://c2.com/cgi/wiki?FactoryMethodPattern)，

> 出于以下几个原因，有时使用工厂方法代替构造函数：
> 
> *   某些语言（例如 Java）不允许构造函数具有有用的名称
> *   某些语言（例如 Java）不允许构造函数具有不同的名称（如果您想为两个构造函数使用相同的方法签名，这可能是必要的）
> *   允许重复使用相同的实例，而不是在每次需要时重新创建它（请参阅[FlyweightPattern](http://c2.com/cgi/wiki?FlyweightPattern)）

我认为第三种选择可能在这里最适用。使用手动创建新的`Logger`，您无法充分共享它们。使用`getLogger`外观可以透明地发生这种情况。

总而言之，使用工厂方法通常是为了使代码更简洁、更直接，而不会暴露你不一定关心的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T22:17:02.793

例如，某些类可能会阻止您在应用程序中创建多个对象。在这种情况下，您需要调用一些方法来实例化该类，例如 Logger.getLogger()。getLogger() 可能有这样的代码：

```
if(uniqueInstance == null) {
    uniqueInstance = new Logger();
}

return uniqueInstance; 
```

其中 uniqueInstance 是 Logger 的一个实例。这是一种称为 Singleton 的设计模式。在这种模式下，您不能实例化该类，因为它的构造函数是私有的。

您无法实例化类的其他一些方式是当类被定义为静态时。

具有公共构造函数且不是静态的类需要使用 new 关键字进行实例化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T22:14:36.260

因为`Logger.getLogger()`返回一个`Logger`对象。`new Logger()`调用也返回 a 的构造函数`Logger`。这也是一种用途`new`，因为`Logger`类内部可能是这样的：

```
public class Logger {
     public static Logger getLogger() {
        return new Logger("foo", "bar");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T22:41:42.923

那么你所问的与设计模式更相关。Logger 类遵循单例模式。

假设您希望在整个应用程序中只创建您的类的一个实例，那么您可以将构造函数设为私有并提供一个静态方法，该方法在第一次调用时创建并存储您的类的对象。

`public class SingletonPattern{`

```
 private static SingletonPattern instance;

    private SingletonPattern(){} 

    public static synchronized SingletonPattern getInstance(){
        if (instance == null){
            instance = new SingletonPattern();
        }
        return instance;
    }
} 
```

通过这种方式，您可以将您的类限制为仅实例化一次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T22:14:21.047

在您的示例中，您必须使用不同的用例：返回对象的静态方法和实际的构造函数调用。

静态方法是不需要在对象上调用的方法，这里它的内部机制可以实例化一个对象并将其返回以供将来使用，在此方法中，有一个对“new”的调用，但对象可能已配置，或在返回之前从缓存中检索。这是这样的电话

```
Logger  logger = Logger.getLogger("com.foo"); 
```

实际的构造函数调用（使用 new）是创建新对象的正常方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T22:14:36.593

~~从技术上讲，您并没有使用 Logger 类，而是使用了一种方法。~~从技术上讲，您没有实例化 Logger 类，也没有像使用`Logger logger = new Logger()`. 相反，您正在做的是访问一个方法来取回返回的实例。很高兴看到类定义。但是，您所拥有的很可能是类内部的静态方法。并且该类很可能是使用私有构造函数定义的。这允许在不实例化类的情况下访问方法。你可以在这里看到一个很好的解释，以及java中的静态：[https ://stackoverflow.com/a/1844388/1026459](https://stackoverflow.com/a/1844388/1026459)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-03T22:17:27.930

某些类不能在自身之外实例化（例如，`Math`类，这些类具有非公共构造函数）。在这些类中，有些提供了返回类（例如`InetAddress`类）实例的方法。这些被称为工厂方法。它们是`static`返回它们所在类的实例的方法，因此`new`不需要使用关键字（而是在工厂方法内部使用）。例如：

```
public class A {
   private A() {}
   public A createAnA() { return new A(); }
} 
```

这里，`createAnA()`是工厂方法。

# javascript - Basic D3.js：如何将具有其他属性的数据绑定到元素？

> ID：12254557
> 
> 赞同：1
> 
> 时间：2012-09-03T22:10:11.857
> 
> 标签：javascript, d3.js

我有一个看起来像这样的数组，其中每个项目都是一个机场，由其名称和航班频率定义：

```
var mydata = [
    {'name' : 'LHR', 'flights' : [ { x : 0, y : 1520 }, { x : 1, y : 1990 } ] },
    {'name' : 'SFO', 'flights' : [ { x : 0, y : 2090 }, { x : 1, y : 2170 } ] }
]; 
```

我想用 D3.js 为数组中的每个条目画一条线。我想将`flights`数据绑定到该行，并且我想给该行一个对应于 的类名`name`，以便最终得到如下所示的路径：

```
<path class="LHR" d="...flights data..."></path>
<path class="SFO" d="...flights data..."></path> 
```

如何绑定数据并同时为该行指定类名？我可以做这样的事情吗？

```
svg.selectall("path.line")
   .data(mydata, function(d) { return d.flights})
   .enter()
   .append("path")
   .attr("class", "line")
   .attr("class", function(d) { return d.name})
   .attr("d", line); 
```

我不确定这个调用是否`data()`会正常工作。或者也许会？如果需要，我可以重组我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:51:57.013

想通了 - 答案是在行中进行函数调用`attr`，而不是`data`在行中：

```
svg.selectAll("path.line")
  .data(mydata)
  .enter()
  .append("path")
  .attr("class", function(d) { return 'line ' + d.name; })
  .attr("d", function(d) { return line(d.flights); });​ 
```

# fortran - MPI_Allreduce 在 MPICH2 中失败

> ID：12254558
> 
> 赞同：3
> 
> 时间：2012-09-03T22:10:22.077
> 
> 标签：fortran, mingw, mpi, mpich

我最近与 MPI 合作。我对 MPI 还是很陌生。但是我最近在使用 MPICH2 时发现了一个问题。这是我从 Hello world 程序修改而来的 fortran 90 小程序。我还没有测试它的 c 版本，但我认为它们应该非常相似（由函数名称和错误参数不同）。

我正在使用 Windows 7 64 位、MinGW（gcc 版本 4.6.2，它是 32 位编译器）并使用 MPICH2 1.4.1-p1 32 位版本。这是我用来编译简单代码的命令：

```
gfortran hello1.f90 -g -o hello.exe -IC:\MPICH2_x86\include -LC:\MPICH2_x86\lib -lfmpich2g 
```

这是简单的代码：

```
 program main
  include 'mpif.h'
  character * (MPI_MAX_PROCESSOR_NAME) processor_name
  integer myid, numprocs, namelen, rc,ierr
  integer, allocatable :: mat1(:, :, :)

  call MPI_INIT( ierr )
  call MPI_COMM_RANK( MPI_COMM_WORLD, myid, ierr )
  call MPI_COMM_SIZE( MPI_COMM_WORLD, numprocs, ierr )
  call MPI_GET_PROCESSOR_NAME(processor_name, namelen, ierr)

  allocate(mat1(-36:36, -36:36, -36:36))
  mat1(:,:,:) = 0
  call MPI_Bcast( mat1(-36, -36, -36), 389017, MPI_INT, 0, MPI_COMM_WORLD, ierr )
  call MPI_Allreduce(MPI_IN_PLACE, mat1(-36, -36, -36), 389017, MPI_INTEGER, MPI_BOR, MPI_COMM_WORLD, ierr)
  print *,"MPI_Allreduce done!!!"
  print *,"Hello World! Process ", myid, " of ", numprocs, " on ", processor_name
  call MPI_FINALIZE(rc)
  end 
```

它可以编译，但是在运行时失败（可能是无效的内存访问？）。MPI_Allreduce 一定有一些问题，因为如果我删除该行它可以正常工作。如果我使矩阵更小，它也可以工作。我也在具有相同版本 MPI 的 ubuntu 机器上进行了尝试。在 Linux 中没有问题。

当我使用 gdb（MinGW 附带）进行检查时（gdb hello.exe 然后回溯）。我得到了一些毫无意义的东西（或者似乎是为了我自己）：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 16316.0x4fd0]
0x01c03100 in mpich2nemesis!PMPI_Wtime ()
   from C:\Windows\system32\mpich2nemesis.dll
(gdb) backtrace
#0  0x01c03100 in mpich2nemesis!PMPI_Wtime ()
   from C:\Windows\system32\mpich2nemesis.dll
#1  0x0017be00 in ?? ()
#2  0x00000000 in ?? () 
```

这实际上是否意味着 Windows 版本的 MPI 库有问题？使它发挥作用的解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T11:25:09.913

这可能无法解决您的问题，但`MPI_INT`不是 fortran-mpi 数据类型。 `MPI_INTEGER`是对应的数据类型。fortran 端可能会提供不同`MPI_INT`的实现，但我很确定这不是由标准定义的。尝试编译你的代码，`IMPLICIT NONE`看看它是否抱怨（也测试 if `MPI_INTEGER .ne. MPI_INT`）。如果它抱怨，正在发生的事情是`MPI_INT`编译器分配了一些值（或者您的 MPI 版本`MPI_INT`用于其他数据类型......）。这可能与 MPI 设置的预定义值之一冲突。因此，它将您的整数数组视为其他类型，这可能导致缓冲区溢出，并以各种有趣的方式表现出来。

# android - 如何在为其设置 AlarmManager 之前调用 pendingIntent

> ID：12254568
> 
> 赞同：0
> 
> 时间：2012-09-03T22:11:44.210
> 
> 标签：android, android-widget, alarmmanager, android-pendingintent

我有这个小部件，它以秒或分钟的间隔更新。

将小部件添加到屏幕 PreferencesActivity 启动后，当用户决定一切都已正确设置时，他退出设置并且我正在调用方法：

```
public class MyWidgetConfiguration extends PreferenceActivity {
    // [...] Some code...

    private void createWidget() {
        Context c = getApplicationContext() ;
        SharedPreferences sp = getSharedPreferences( PREF_NAME+widgetID, MODE_PRIVATE );

        // Set layout
        AppWidgetManager awm = AppWidgetManager.getInstance( c );
        RemoteViews rv = new RemoteViews( c.getPackageName(), LAYOUT_ID );

        awm.updateAppWidget( widgetID, rv );

        // start alarm manager running this particular widget
        Intent i = new Intent( c, MyWidgetReceiver.class );
        PendingIntent pi = PendingIntent.getBroadcast( c, 0, i, 0 );
        AlarmManager a = (AlarmManager) c.getSystemService( Context.ALARM_SERVICE );

        /** 
         * MY GUESS IS, THAT I'D HAVE TO ADD SOME KIND OF PendingIntent CALL HERE,
         * I TRIED COUPLE OF THINGS, BUT MOST OF THEM INTERFERED OR CANCELLED FOLLOWING 
         * AlarmManager REPEATING... 
         *
         * DELAY contains time left to closest full minute 
         */
        a.setRepeating( AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime() + DELAY, MINUTE, pi );     

        /// return widget ID
        Intent resultValue = new Intent();
        resultValue.putExtra( AppWidgetManager.EXTRA_APPWIDGET_ID, widgetID );
        setResult( RESULT_OK, resultValue );

        finish();
    }

    // [...] More of some code...
} 
```

所以，正如你在上面看到的，我从第一分钟开始每分钟调用一次 alarmManager，延迟过去后一切正常，但在此之前我的小部件有点冻结了一段时间。我想防止这种情况发生，但不向 Receiver 添加任何额外的逻辑，因为它甚至可以每秒调用一次。完整和原始代码在这里：http: [//goo.gl/uOP9P](http://goo.gl/uOP9P)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:13:44.277

PendingIntent 可能会调用一些在其他地方编写的代码。设置闹钟后为什么不直接调用相同的代码？

# html - 这两个类有什么区别

> ID：12254571
> 
> 赞同：4
> 
> 时间：2012-09-03T22:11:58.370
> 
> 标签：html, css, css-selectors

我不知道它们在 css 中有何不同

```
something
{
   //some properties
}

something >.somethingelse
{
   // something else's properties
} 
```

和

```
something
{
   //some properties
}

something .somethingelse
{
   // something else's properties
} 
```

我不知道为什么`>`在第二种情况下会有这样的情况。也应该有一个`<`for use 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T22:14:43.810

`>`表示在`somethingelse`下可以找到直接子代`something`。否则将在所有级别找到后代。

因此，使用以下示例：

```
<div class="something">
    <div class="somethingelse">
        <div class="somethingelse">
        </div>
    </div>
</div> 
```

例如，`>`只有外部`somethingelse`div 才会生效。对于没有`>`两个 div 的示例，将应用样式。

`<`可能意味着父选择器（即，将样式应用于匹配类的直接父级）。[我还不知道这个存在，但是这里](http://css-tricks.com/parent-selectors-in-css/)有一篇有趣的文章 csstricks 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T22:14:40.667

`>`选择具有 class的任何元素，该元素`.somethingelse`是具有 class 的元素的*子*元素`.something`。

第二个 CSS 选择器将选择具有 class 的元素的任何*后代*`.something`。即孩子，和孩子的孩子，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T22:15:37.420

`>``something`选择具有类的直接后代`.somethingelse`

目前`<`CSS 中没有父 ( ) 选择器

# mysql - 将转储文件添加到我的表中

> ID：12254572
> 
> 赞同：0
> 
> 时间：2012-09-03T22:12:09.190
> 
> 标签：mysql, mysqldump

我想恢复我的转储文件（使用 mysqldump 创建）如果我将转储文件恢复到我的表中，我表中的旧数据会删除吗？或转储文件添加到旧数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:26:32.027

**默认情况下`DROP TABLE IF EXISTS tablename`，会生成语句**并将其放置在每个`CREATE TABLE ...`语句之前。您可以简单地查看您的转储文件，它是纯文本（如果未压缩），并查看是否有类似的行。

如果这些语句在那里，您的数据将被删除，然后重新插入。

如果它们**不**存在，您很可能会通过恢复转储来生成错误，因为重复的主键会发生冲突。所以通常你会想去上面提到的陈述。

# jquery - jquery点击功能同时显示隐藏两个div中的图标

> ID：12254573
> 
> 赞同：1
> 
> 时间：2012-09-03T22:12:37.803
> 
> 标签：jquery, click, show-hide, closest, parents

我有一个单击功能，当通过单击图像下方的图标 (.fav) 将图像库中正在查看的图像选为收藏时，我可以使用它来显示或隐藏“图标（垂直标志）”。图标更改以指示它已被选中并显示收藏夹（垂直标志）。这很好用，但我也试图同时在单独的镜像库中的相应缩略图上设置相同的收藏设置，并在那里显示图标（垂直标志）。我的问题是弄清楚如何遍历第二个画廊并同时标记该缩略图。

显示隐藏点击功能：

```
$(".fav").live('click', function() {
    $(this).toggleClass('sticky')
           .removeClass('icon-heart-empty')
           .addClass('icon-check')
           .toggleClass('fav')
           .closest('.selectFav')
           .toggleClass('favorites');
    $(this).closest(".selectFav").children(".vert-flag").show();
});

$(".sticky").live('click', function() {
    $(this).toggleClass('fav')
           .removeClass('icon-check')
           .addClass('icon-heart-empty')
           .toggleClass('sticky')
           .closest('.selectFav')
           .toggleClass('favorites');
    $(this).closest(".selectFav").children(".vert-flag").hide();
});​ 
```

要选择为收藏夹的主图像的 html：

```
<div id="book">
    <div class="selectFav" >
        <span class="vert-flag icon-heart icon-large" style="display:none;"></span>
        <h1>Wall</h1>
        <a href="slides/Wall.jpg"  title="Wall"><img  src="thumbs/Wall.jpg" alt="Wall" title="Wall"/></a>
         <div class="titles">
             <i class="fav icon-heart-empty"></i>
        </div>
    </div>
</div> 
```

html 对应的缩略图：

```
<div id="slider">
    <div class="item">Wall<br>
        <a href="#" title="Wall">
            <img src="thumbs/Wall.jpg"  alt="Wall" data-page="38" />
        </a>
        <span class="vert-flag icon-heart icon-large" style="display:none;"></span>
    </div> 
```

我尝试了一些不同的事情，但我没有足够的经验来理解如何遍历 dom 来影响缩略图。我在点击功能中尝试过这样的事情，但没有运气。

```
$(this).parents('#slider').closest(".item").children(".vert-flag-mini").show(); 
```

# javascript - 如何在javascript中使用join（内置方法）？

> ID：12254578
> 
> 赞同：4
> 
> 时间：2012-09-03T22:13:53.973
> 
> 标签：javascript, html

在javascript循环中，我正在生成`xml`这样的：

```
for (m = 0; m < t.length; m++) {
     var arr1 = t[m].split("\t");
     s = "'<row dc= '" + arr1[0] + "' al='" + arr1[1] + "' msg='" + arr1[2] + "' />'";
     alert(s);
     //s = s.join(' '); 
    } 
```

忘记了`t`变量和所有。通过运行此代码，我得到以下格式的 s 值：

```
<row dc = "abc" al="56" msg="dkaj" /> 
```

在第二次迭代中，它显示如下：

```
<row dc = "abwwc" al="56w" msg="dkajad" /> 
```

依此类推，直到`m<t.length`满意为止。我想在每次迭代中加入列表。加入他们所有人之后，我应该以这种方式获得：

```
<row dc = "abc" al="56" msg="dkaj" /><row dc = "abwwc" al="56w" msg="dkajad" /> and so on.. 
```

我试图通过在评论部分写的加入来做到这一点，但对我没有用。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:17:01.770

最好的方法是在循环外定义一个字符串并附加到它；

```
var v = '';
for (m = 0; m < t.length; m++) {
     var arr1 = t[m].split("\t");
     s = "'<row dc= '" + arr1[0] + "' al='" + arr1[1] + "' msg='" + arr1[2] + "' />'";
     alert(s);
     v += s;
    }

alert(v); 
```

如果您仍想使用`join()`，请在其上创建`v`一个数组和`push()`元素（注意这`join()`是一个**数组**方法，不适用于字符串）

```
var y = [];
for (m = 0; m < t.length; m++) {
     var arr1 = t[m].split("\t");
     s = "'<row dc= '" + arr1[0] + "' al='" + arr1[1] + "' msg='" + arr1[2] + "' />'";
     alert(s);
     y.push(s);
    }

alert(y.join('')); 
```

您会很高兴看到我在示例中尝试遵守您的变量命名约定（即无意义的字符）。

# phalcon - Phalcon 模型中的 preSave 和 postSave 钩子

> ID：12254579
> 
> 赞同：2
> 
> 时间：2012-09-03T22:14:11.750
> 
> 标签：phalcon

`_preSave`我正在检查 API并注意到有一些`_postSave`受保护的方法可以用作钩子。更新/删除有类似的东西吗？

我在想以下

```
preSave -> fires before a Save (insert/update)
postSave -> fires after a Save (insert/update)
preInsert
postInsert
preUpdate
postUpdate
preDelete
postDelete 
```

我可以使用任何现有的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:04:21.853

**与0.4.5**版本兼容

 **在 PhalconPHP 中，这些钩子是有效的验证事件。

```
class Robots extends Phalcon_Model_Base
{
    function beforeSave()
    {
        if ($this->year < 0) {
            echo "Year cannot be negative";
            return false;
        }
    }
} 
```

有关验证器的更多信息

[http://docs.phalconphp.com/en/latest/reference/models.html#validation-messages](http://docs.phalconphp.com/en/latest/reference/models.html#validation-messages)**

# javascript - 集合内的主干视图

> ID：12254589
> 
> 赞同：0
> 
> 时间：2012-09-03T22:14:57.670
> 
> 标签：javascript, backbone.js

我对骨干很陌生，需要用它来创建一个列表项。每个列表项都有一个模型和一个视图。因为它是一个列表，所以它似乎是收藏的理想解决方案，但我很难使用它们。

这是当前版本，我想将其更改为使用集合：

```
// The Model & view
var IntroModel = Backbone.Model.extend({});
var Introview = Backbone.View.extend({
    template: _.template( $('#taglist-intro').text() ),
    render: function() {
        console.log( this.model.attributes );
        this.$el.append( this.template( this.model.attributes ) );
    }
});

// We will store views in here
// Ideally this would be a collection
views = [];

// Get the data for that collection
$.getJSON( url, function( json ) {

    _.each( json, function( item ) {

        // Create each model & view, store views in the views array
        var model = new IntroModel( item );
        var view = new Introview({
        model : model
        })  
        views.push( view );

    })

})

// I can render a view like this
// But I'd rather it rendered the view when I add items to the collection
views[0].render() 
```

所以我有什么作品，但它并没有真正做到“骨干方式”。这似乎有点毫无意义，因为：

1.  最好使用集合，而不是数组
2.  将项目添加到数组时呈现视图会更好
3.  它不是骨干真的是它..

感谢任何指针，如果您不能提供具体的代码示例，我仍然非常感谢涵盖此问题的链接和资源。

干杯，

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:52:55.043

您认为当前的实现不是 Backbone 方式的权利。您所做的大部分工作都是由骨干网中的集合对象直接处理的。在主干中，集合本质上只是一个带有附加方法的数组。这些方法赋予了集合它们的力量。Backbone 具有许多功能，包括：

*   'url' 属性：使用此属性，当您运行 fetch 方法时，集合将自动填充（例如 myCollection.fetch() ）。
*   您可以将函数绑定到集合的“重置”事件。当您填充集合时会触发此事件。通过包含对集合的呈现事件的调用，您的集合可以在集合更改时自动呈现相关视图。还有其他收集事件（例如“添加”新模型等），您也可以将函数附加到这些事件。
*   我发现 Backbone 文档是最好的起点。然而，一个简单的例子总是有用的。下面的代码展示了如何定义一个简单的集合，以及如何创建两个视图（一个视图创建列表，另一个视图呈现列表中的项目）。注意集合中 url 属性的使用。当您运行 fetch() 方法时，Backbone 使用它来检索集合的内容（请参阅 OrgListView 对象）。还要注意视图的渲染方法是如何绑定到集合的“重置”事件的，这样可以确保在填充集合后调用渲染事件（参见 OrgsListView 的初始化方法）。

    ```
     /**
         * Model
         */
        var Org = Backbone.Model.extend();

        /**
         * Collection
         */
        var Orgs = Backbone.Collection.extend({
            model: Org,
            url: '/orgs.json'
        });

        /**
         * View - Single Item in List
         */
        var OrgItemView = Backbone.View.extend({
            tagName: 'li',
            initialize: function() {
                _.bindAll(this, 'onClick', 'render');
                this.model = this.options.model;
                // Create base URI component for links on this page. (e.g. '/#orgs/ORG_NAME')
                this.baseUri = this.options.pageRootUri + '/' + encodeURIComponent(this.model.get('name'));
                // Create array for tracking subviews.
                /*var subViews = new Array();*/
            },
            events: {
                'click a.test': 'onClick'
            },
            onClick: function(event) {
                // Prevent default event from firing.
                event.preventDefault();
                if (typeof this.listContactsView === 'undefined') {
                    // Create collection of contacts.
                    var contacts = new ContactsByOrg({ url: '/orgs.json/' + encodeURIComponent(this.model.get('name')) });
                    this.listContactsView = new ListContactsView({ collection: contacts, baseUri: this.baseUri });
                    this.$el.append(this.listContactsView.render().el);
                }
                else {
                    // Close View.
                    this.listContactsView.close();
                    // Destroy property this.listContactsView.
                    delete this.listContactsView;
                }
            },
            onClose: function() {
    //      console.log('Closing OrgItemView');
            },
            render: function() {
                // TODO: set proper value for href. Currently using a dummy placeholder
                this.$el.html('<a class="test" href="' + this.baseUri + '">' + this.model.get('name') + '</a>');
                return this;
            }
        });

        /**
         * View - List of organizations
         */
        var OrgsListView = Backbone.View.extend({
            className: 'orgs-list',
            initialize: function() {
                console.log('OrgsListView');
                _.bindAll(this, 'render');
                this.pageRootUri = this.options.pageRootUri;
                this.collection = this.options.collection;
                // Bind render function to collection reset event.
                                    this.collection.on('reset', this.render);
                // Populate collection with values from server.
                this.collection.fetch();
            },
            onClose: function() {
                this.collection.off('reset', this.render);
    //      console.log('Closing OrgsListView');
            },
            render: function() {
                var self = this;
                this.$el.html('<ul></ul>');
                this.collection.each(function(org, index) {
                    var orgItemView = new OrgItemView({ model: org, pageRootUri: self.pageRootUri });
                    self.$('ul').append(orgItemView.render().el);
                });
                return this;
            }
        }); 
    ```

# .net - Visual Studio 2010：网络项目

> ID：12254592
> 
> 赞同：0
> 
> 时间：2012-09-03T22:15:32.783
> 
> 标签：.net, web

> **可能重复：**
> [ASP.NET MVC Web 应用程序与 ASP.NET Web 应用程序](https://stackoverflow.com/questions/276211/asp-net-mvc-web-application-vs-asp-net-web-application)

由于我是 ASP.net 的新手，所以我想问一个一般性问题。之间的主要区别是：

*   ASP.net 网络应用程序
*   ASP.net MVC 2 Web 应用程序

以及何时使用每一个。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:22:06.687

我推荐MVC。

您应该考虑从 Microsoft 提供的一些信息开始：[​​http://www.asp.net/get-started](http://www.asp.net/get-started)

> [WEB 表单（又名 Web 应用程序）](http://www.asp.net/web-forms)
> 
> 提供一个熟悉的模型，让您可以重复使用控件并将数据合并到您的网站中，从而使您的工作可重复使用并提高您的工作效率。
> 
> [MVC](http://www.asp.net/mvc)
> 
> 建立在一种模式之上，该模式可以在您的 Web 应用程序中实现关注点的清晰分离，并提供对 HTML 的完全控制，以实现愉快、敏捷的开发。
> 
> 我该如何选择？[观看 5 分钟介绍视频](http://www.asp.net/web-forms/videos/how-do-i/choosing-the-right-programming-model)
> 
> Visual Studio Express 或 WebMatrix ...我该如何选择？这是我们为您的需求选择合适技术的快速指南。您可以安装所有内容或获取您想要的内容。这段简短的视频将其分解，以便您可以选择正确的技术并正确构建出色的网站。

# php - 警告：无法修改标头信息 - 标头已由 ***** 行 ***** 中的（输出开始于 *****）发送 *****

> ID：12254596
> 
> 赞同：-5
> 
> 时间：2012-09-03T22:16:11.023
> 
> 标签：php, html

我目前遇到的问题一直给我问题标题的错误。这是我的代码，谁能帮我检查一下有什么问题以及如何解决？非常感谢。

以下部分是包含“Header”的php文件的底部：

```
echo'<table>';
            while ($result = mysql_fetch_array($sql, MYSQL_ASSOC)){
                echo '<tr>';
                echo '<td style="width:142px">';
                echo $result['instrument_id'];
                echo '</td>';
                echo '<td style="width:142px">';
                echo $result['instrument'];
                echo '</td>';
                echo '<td style="width:142px">';
                echo $result['type'];
                echo '<br>';
                echo $result['amount'].'&nbsp;shares';
                echo '</td>';
                echo '<td style="width:142px">';
                echo $result['opening_rate'];
                echo '<br>';
                $fp = fopen ("http://finance.yahoo.com/d/quotes.csv?s='".$result['instrument']."'&f=nsb2b3p2ophg.csv","r");
                    //this uses the fgetcsv function to store the quote info in the array $data
                    $data = fgetcsv ($fp, 1000, ",");
                    echo ($data[3]);//current rate
                echo '</td>';
                echo '<td style="width:142px">';
                echo $result['opening_value'];
                echo '<br>';
                $value = $data[3] * $result['amount'];
                $currentvalue = number_format($value, 2, '.', '');
                echo $currentvalue;//current value
                echo '</td>';
                echo '<td style="width:142px">';
                echo $result['open_time'];
                echo '</td>';
                echo '<td style="width:142px">';
                if($data[3] == 0){
                echo '<input type="submit" name="close'.$result['instrument_id'].'" value="Close" disabled="disabled"/>';}
                else{
                echo '<input type="submit" name="close'.$result['instrument_id'].'" value="Close"/>';}
                echo '</td>';
                echo '</tr>';

                fclose ($fp);

                $name = 'close'.$result['instrument_id'];
                $close = isset($_POST[$name]);
                if($close){

                    $instrumentid = $result['instrument_id'];
                    $_SESSION['instrumentid'] = $instrumentid;

                    $instrument = $result['instrument'];
                    $_SESSION['instrument'] = $instrument;

                    $amount = $result['amount'];
                    $_SESSION['amount'] = $amount;

                    header("Location:order_sell.php");
                }   
            }
            echo'</table>'; 
```

当我在顶部包含一个文件时，即背景文件，仅包含 html 元素，它会给我类似警告的错误消息：无法修改标题信息......这是包含文件的代码：

```
<?php 
session_start();

    // checks if $_SESSION['userid'] exists
    $areYouLoggedIn = isset($_SESSION['username']);
?>
<!DOCTYPE html>
<html>
<head>

<style type="text/css">

/* background*/
body { background: url(images/background2.png) center center fixed no-repeat; 
webkit-background-size:cover;
moz-bacground-size:cover;
-o-background-size:cover;
background-size:cover;}

/* top menu layout*/
.Topmenu{
width:1000px;
background: #00AEEF;
border-radius: 3px 3px 3px 3px;
}

/* top menu cell layout*/
.Tabcells{ width:200px; 
text-align:center;
}

/* top menu cell text layout*/

/* top menu cell text layout*/
.Tabtexteffect
{ text-decoration: none;
color:white;
font-family:Arial;
font-size:15px;
}

.Tabtexteffect:hover
{
text-decoration: none;
color:white;
font-family:Arial;
font-size:20px;
}

.Paragraph {text-align:justify; 
text-justify:distributed-all-lines;
text-align-last:justify; 
font-family:arial; 
font-size:12pt;
width:1000px;
}

.Box {
width:950px;
text-align:left;
background: -webkit-linear-gradient(90deg, #F0E68C, #FFFFE0) repeat scroll 0 0 transparent;
background: -moz-linear-gradient(90deg, #F0E68C, #FFFFE0) repeat scroll 0 0 transparent;
border: 1px solid #AAAAAA;
border-radius: 10px 10px 10px 10px;
box-shadow: 0 0 15px #AAAAAA;
}

.Box2 {
    width: 200px;
    text-align: left;
    background: -webkit-linear-gradient(90deg, #FFFA8C, #FFFFE0) repeat scroll 0 0 transparent;
    background: -moz-linear-gradient(90deg, #FFFA8C, #FFFFE0) repeat scroll 0 0 transparent;
    border: 1px solid #AAAAAA;
    border-radius: 10px 10px 10px 10px;
    box-shadow: 0 0 15px #AAAAAA;
}

.Button {
background: -moz-linear-gradient(90deg, #0459B7, #08ADFF) repeat scroll 0 0 transparent;
background: -webkit-linear-gradient(90deg, #0459B7, #08ADFF) repeat scroll 0 0 transparent;
border: 1px solid #093C75;
border-radius: 3px 3px 3px 3px;
box-shadow: 0 1px 0 #FFFFFF;
color: #FFFFFF;
cursor: pointer;
font-family: Arial,sans-serif;
font-size: 12px;
font-weight: bold;
margin-right: -16px;
margin-top: 16px;
padding: 5px 10px;
text-decoration: none;
text-shadow: 0 1px 1px #333333;
text-transform: uppercase;
}

</style>

</head>
<body>
<form action="HomePage.php" method="POST">
<div style="width:1000px; margin:0 auto; min-height:100%;">
<div>
<a href="HomePage.php"><img style="width:25%;" src="images/Mock Apprentice.png" alt="Mock Apprentice"></img></a>
<?php 
if($areYouLoggedIn==false){
    echo'<table cellpadding="0" align="right" style="position: absolute; left: 940px; top: 15px;">';
    echo'<tr>';
    echo'<td width="130" align="center"><font face="Arial" size="3"><a href="Login.php"><input type="button" class="Button" value="Sign In""/></a></font></td>';
    echo'<td width="1" bgcolor=black><BR></td>';
    echo'<td width="100" align="center"><font face="Arial" size="3"><a href="Registration.php"><input type="button" class="Button" value="Sign Up""/></a></font></td>';
    echo'</tr>';
    echo'</table>';
}
if($areYouLoggedIn == true){
    echo'<table cellpadding="0" align="right" style="position: absolute; left: 950px; top: 40px;">';
    echo'<tr>';
    echo'<td width="130" align="center"><font face="Arial" size="4" color="#00AEFF">Welcome';
    echo'&nbsp';
    echo'<font color="#FFD700">';
    echo($_SESSION['username']);
    echo'</font>';
    echo'</font></td>';
    echo'<td width="1" bgcolor=black><BR></td>';
    echo'<td width="100" align="center"><font face="Arial" size="4"><a style="text-decoration: none; color:#00AEFF;" href="Logout.php">Logout</a></font></td>';
    echo'</tr>';
    echo'<table>';
}
?>
<HR color="#00AEEF">
</div>
<div>
<table width="1020" height="30" class="Topmenu">
<tr>
<td width="200" height="30" class="Tabcells"><a href="Intro.php" class="Tabtexteffect">Intro</a></td>
<td width="200" class="Tabcells"><a href="HowToUse.php" class="Tabtexteffect">How to use</a></td>
<td width="200" class="Tabcells"><a href="Elearning.php" class="Tabtexteffect">Education Center</a></td>
<td width="200" class="Tabcells"><a href="ITQuotes.php" class="Tabtexteffect">Trading Platform</a></td>
<td width="196" class="Tabcells"><a href="ContactUs.php" class="Tabtexteffect">Contact Us</a></td>
</tr>
</table>
</div>
</div>
</form>
</body>
</html> 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T22:28:15.100

Try replacing `header("Location:order_sell.php");` with

```
echo '<META HTTP-EQUIV="Refresh" Content="0; URL=order_sell.php">';    
exit; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T22:21:52.360

Whatever you output - being HTML only or output from PHP: Unless you do some tricking with the `ob_*()` functions you lose the ability to send headers the moment you output anything.

This is why they are called `headers`: In the HTTP protocol they preceed every single piece of payload body - including whitespace such as empty lines before a `<?php` tag.

The typical way to tackle this would be to regroup your logic as to **first** calculate what headers you need, **then** create your output, via `echo()`, `printf()`, `include()` or whatever.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T22:19:15.077

In PHP `header` functions must be called before *any* output is sent from the server. This includes `echo` calls as well as HTML info before the `<?php ?>` block.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T22:19:25.920

You can't send a `header` after any text has been sent to the browser:

```
header("Location:order_sell.php"); 
```

Needs to be *before ANY* text/output/whitespace is sent/echo'ed to the browser.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T22:22:31.933

When using header("Location:someLocation") be sure that you don't have any character outputted to the browser, otherwise you'll get the error Cannot modify header information. More on this at: [http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

# asp.net-mvc - 在 asp.net mvc 4 中具有 ipad 桌面视图的移动显示模式

> ID：12254604
> 
> 赞同：4
> 
> 时间：2012-09-03T22:17:03.930
> 
> 标签：asp.net-mvc, mobile, outputcache, viewengine

您好我有一个 MVC 3 应用程序，最近转换为 mvc 4 并添加了移动视图。我想为移动设备添加显示模式，并为 iPad 的平板电脑添加桌面视图（主要来自这里的流量）。

我的代码中有这样的

```
DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode()
            {
                ContextCondition = (context => context.GetOverriddenUserAgent().IndexOf("iPad", StringComparison.OrdinalIgnoreCase) >= 0)
            });  
            DisplayModeProvider.Instance.Modes.Insert(1, new DefaultDisplayMode("Mobile")
            {
                ContextCondition = (context => context.GetOverriddenUserAgent().IndexOf("Mobile", StringComparison.OrdinalIgnoreCase) >= 0)
            }); 
```

并设置输出缓存varybycustom，如下所示

```
public override string GetVaryByCustomString(HttpContext context, string custom)
  {
            string strUserAgent = context.Request.UserAgent.ToLower();
            if (strUserAgent.Contains("ipad"))
            {
                return base.GetVaryByCustomString(context, custom);
            }

            if (Request.Browser.IsMobileDevice)
            {
                    return "mobile";               
            }
            return base.GetVaryByCustomString(context, custom);
} 
```

我对移动设备和台式机使用相同的网址。

**问题：** 问题是在将应用程序部署到 azure 之后。1 小时后，手机获得几个 url 的桌面视图。存在不一致。

任何人都可以在我错的地方帮助我。**我什至关闭了**outputcache 仍然是同样的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T22:14:52.977

这是一个已知问题，我们最近发布了 MVC 4 的解决方法 NuGet 包：http: [//nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes](http://nuget.org/packages/Microsoft.AspNet.Mvc.FixedDisplayModes)。

解决方法是简单地将这个 NuGet 包安装到您的项目中。但是，如果您的应用程序自定义已注册视图引擎的集合，则应确保引用

```
Microsoft.Web.Mvc.FixedRazorViewEngine 
```

或者

```
Microsoft.Web.Mvc.FixedWebFormViewEngine 
```

而不是默认的视图引擎实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:19:21.223

这就是我们将平板电脑定向到桌面视图的方式：

```
 DisplayModeProvider.Instance.Modes.Insert(0, new DefaultDisplayMode("")
    {
        ContextCondition = (context => DeviceConfig.GetDeviceType(context.GetOverriddenUserAgent()) == "tablet")
    }); 
```

我们不是为平板电脑创建唯一的布局和视图，而是检测平板电脑并设置 DisplayModeId = ""，这是默认（桌面）视图。

# html - jRecorder 未显示在页面上

> ID：12254605
> 
> 赞同：4
> 
> 时间：2012-09-03T22:17:13.437
> 
> 标签：html

我正在尝试在我的网页上嵌入一个 jRecorder。[我在此文档页面http://www.sajithmr.me/jrecorder/index.html](http://www.sajithmr.me/jrecorder/index.html)上添加了要添加的内容，当我打开页面时，它是空白的。

页面如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="jquery.min.js"> </script>
<script src="jRecorder.js"> </script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>
<body>
<div>
<script>
    $.jRecorder(
    {
       'rec_width': '300',
       'rec_height': '200',
       'rec_top': '0px',
       'rec_left': '0px',
       'recorderlayout_id' : 'flashrecarea',
       'recorder_id' : 'audiorecorder',
       'recorder_name': 'audiorecorder',
       'wmode' : 'transparent',
       'bgcolor': '#ff0000',
       'swf_path': 'jRecorder.swf',
       'host': 'acceptfile.php?filename=hello.wav',
       'callback_started_recording' : function(){},
       'callback_finished_recording' : function(){},
       'callback_stopped_recording': function(){},
       'callback_error_recording' : function(){},
       'callback_activityTime': function(time){},
       'callback_activityLevel' : function(level){}
        }
        );
</script>
</div>
</body>
</html> 
```

我是否错误地遵循了这个？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T00:08:37.663

嘿关于 jRecorder，正如 Miguel 所说，你需要检查浏览器的兼容性。所以如果你使用 chrome 或 opera 或 firefox，你不会有任何问题。但如果它是 IE8 或 9，它不会工作，但 IE10 会。所以如果你想让它在 IE9 上工作你需要做什么你需要修改你的 jRecorder.js 或者如果你想尝试从[https://github.com/capsula4/jRecorder](https://github.com/capsula4/jRecorder)下载它，我认为他解决了这个问题。

谢谢

# php - 完全坚持尝试使用 Abraham Williams Twitter API 库

> ID：12254608
> 
> 赞同：0
> 
> 时间：2012-09-03T22:17:40.773
> 
> 标签：php, api, twitter

我正在研究 Sam 的 Teach Yourself Twitter API。在第 8 小时，有设置消费者密钥、消费者秘密（我已经成功地使用了不同的 php 程序）和使用 Abraham Williams 库的简单说明。我将密钥插入 config.php，使用了 define('OAUTH_CALLBACK', 'http://localhost/callback.php'); 使用 localhost 并为其创建了一个 tinyurl（如果 localhost 不起作用，则解决方法。登录到 Twitter 屏幕，然后转到重定向页面，上面写着：

“无法连接到 Twitter。刷新页面或稍后再试。”</p>

我完全死在了这里的水里。一旦我得到这个工作，我就会开始跑步，但我完全被困住了。任何帮助，将不胜感激。

（针对您的问题：）

他们有一个 config.php 文件，他们说要在其中放入 KEY 和 SECRET，我已经这样做了：

```
define('CONSUMER_KEY', 'KEY');
define('CONSUMER_SECRET', 'SECRET');
define('OAUTH_CALLBACK', 'http://localhost:8888/abeoauth/connect.php'); 
```

他们的书说要运行 index.php。这是其中的代码：

```
/* Load required lib files. */
session_start();
require_once('twitteroauth/twitteroauth.php');
require_once('config.php');

/* If access tokens are not available redirect to connect page. */
if (empty($_SESSION['access_token']) || empty($_SESSION['access_token']['oauth_token']) ||     empty($_SESSION['access_token']['oauth_token_secret'])) {
    header('Location: ./clearsessions.php');
}
/* Get user access tokens out of the session. */
$access_token = $_SESSION['access_token'];

/* Create a TwitterOauth object with consumer/user tokens. */
$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET,     $access_token['oauth_token'], $access_token['oauth_token_secret']);

/* If method is set change API call made. Test is called by default. */
$content = $connection->get('account/verify_credentials'); 
```

从 index.php 开始，就像书上说的那样，它确实重定向到“connect.php”页面，所以就好像我根本没有为 KEY 变量添加任何内容..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:57:07.517

好了朋友们。看起来它不喜欢我为不同的脚本（顺便说一句）创建的“twitter 应用程序”（凭证）。我必须为这本书的例子创建一个新的。

# php - PHP 脚本返回 index.php 而不是文件名

> ID：12254611
> 
> 赞同：2
> 
> 时间：2012-09-03T22:17:57.553
> 
> 标签：php

我制作了一个小的 PHP 脚本，它应该允许访问者从我的服务器下载文件。它的工作方式是获取文件之一，获取基本名称并将标头以及文件发送到客户端。

但是，在下载文件时，我有时会得到 index.php，有时会得到 proper_file_name.zip。

我真的不知道为什么它有时会起作用，为什么有时会不起作用。任何建议将不胜感激。

这是我的源代码的相关部分：

```
// Client requested custom byte range
if(isset($_SERVER['HTTP_RANGE'])) 
{ 
  $range = explode('-', substr($_SERVER['HTTP_RANGE'], 6));
  $seekStart = intval($range[0]);

  if ($range[1] > 0)
    $seekEnd = intval($range[1]);

  header('HTTP/1.1 206 Partial Content');
  header(sprintf('Content-Range: bytes %d-%d/%d', $seekStart, $seekEnd, $size_vfile));
}
else // Set headers for full file
  header('HTTP/1.1 200 OK');

// Get basename of filename
$filename = basename($filename);

// Send headers to client
header('Cache-Control: private');
header('Content-Type: application/octet-stream'); 
header("Content-Disposition: attachment; filename=\"$filename\"");
header('Content-Transfer-Encoding: binary');
header('Content-Description: File Transfer');
header('Content-Length: '.$file_size);
header('Accept-Ranges: bytes'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:23:07.463

您正在使用基本名称，因此您依赖于您的工作目录。只需在下载文件之前更改到正确的目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:17:22.207

你清理文件名吗？

并非所有浏览器都接受所有字符。请注意，“将是 100% 保证中断，但其他字符会出现问题。您可能会通过注意未通过的文件名来找出哪些问题会给您带来问题。

您可能希望通过删除任何可能不喜欢的字符来清理 $filename。这里有一些关于它的阅读：http: [//greenbytes.de/tech/tc2231/](http://greenbytes.de/tech/tc2231/)

使用 str_replace() 更改它不喜欢的字符。

# php - .htaccess 和 .htpasswd 忽略子文件夹

> ID：12254612
> 
> 赞同：1
> 
> 时间：2012-09-03T22:18:10.593
> 
> 标签：php, .htaccess, .htpasswd

我想忽略我网站上的文件夹，但由于我经常在上面创建子文件夹，我也想忽略子文件夹。

这是我的 .htaccess ：

```
AuthType Basic
AuthName "Auth Required"
AuthUserFile ".htpasswd location"
Require valid-user
SetEnvIf Request_URI "(folder I want to ignore for everyone)$" allow
Order allow,deny
Allow from env=allow
# allow open access to entire site for those IPs:
allow from xx.xx.xxx.xx.xxx
Satisfy any 
```

当我转到一个子文件夹时，它一直要求输入登录名和密码，但是当我单击“取消”以取消该登录时，一切正常，并且没有显示其他框。我想要的只是不显示这个框。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:20:30.230

.htaccess 设置**总是**影响子文件夹，除非你用另一个 .htaccess 覆盖它，这会改变父文件夹的 .htaccess 中设置的行为

# java - GWT 布局：我将如何修复此布局（DockPanel）？

> ID：12254614
> 
> 赞同：1
> 
> 时间：2012-09-03T22:18:34.007
> 
> 标签：java, gwt, web, dockpanel

我试图在 Google 的 Web Toolkit 中找到自己的出路。所以我想制作一个 100% 高度和 100% 宽度布局的小页面。我想要没有边距、没有填充和没有滚动条。

我使用了 DockPanel 并将其添加到页面中，如下所示：

```
package de.kuntze.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.ui.DockPanel;
import com.google.gwt.user.client.ui.HasAlignment;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.Widget;

public class BeginningGWT_BookExample implements EntryPoint {
  public void onModuleLoad() {
    DockPanel mainPanel = new DockPanel();
    mainPanel.setBorderWidth(5);
    mainPanel.setSize("100%", "100%");
    mainPanel.setVerticalAlignment(HasAlignment.ALIGN_MIDDLE);
    mainPanel.setHorizontalAlignment(HasAlignment.ALIGN_CENTER);

    Widget header = new Label("Header");
    mainPanel.add(header, DockPanel.NORTH);
    mainPanel.setCellHeight(header, "30px");

    Widget footer = new Label("Footer");
    mainPanel.add(footer, DockPanel.SOUTH);
    mainPanel.setCellHeight(footer, "25px");

    Widget categories = new Label("Categories");
    mainPanel.add(categories, DockPanel.WEST);
    mainPanel.setCellWidth(categories, "150px");
    mainPanel.setCellHeight(categories, "500px");

    Widget tasks = new Label("Tasks");
    mainPanel.add(tasks, DockPanel.EAST);
    RootPanel.get().add(mainPanel);
  }

} 
```

我还添加了一些 CSS 代码来配置 html 和 body 标签：

```
* {
  margin: 0px;
  padding: 0px;
  border: 1px solid black;
}

html, body{
  height: 100%;
  width: 100%;
  min-height: 100%;
} 
```

我使用的 html 页面如下所示：

```
<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="BeginningGWT_BookExample.css">
    <title>Web Application Starter Project</title>
    <script type="text/javascript" language="javascript" src="beginninggwt_bookexample/beginninggwt_bookexample.nocache.js"></script>
  </head>

  <body>
  </body>
</html> 
```

所以我的问题来了：在编译的网页中，左边有一个 5-10 像素（估计）的边距，我无法解释或摆脱它。我通过chrome和firefox查看了它，结果是一样的。我怎样才能摆脱左边的额外间距？我想要一个 100% 的网站。

提前感谢您的任何答案

安德烈

PS：我故意不使用 UI Binder，因为我现在需要学习不用它。所以请不要就此展开讨论。谢谢 ;-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:21:04.603

10px 的边距来自 clean.css，它是应用的 Clean 主题的一部分。

您可以从模块配置文件中将此主题更改为标准主题。

只需删除或评论

```
 <inherits name='com.google.gwt.user.theme.clean.Clean'/> 
```

并添加

```
 <inherits name='com.google.gwt.user.theme.standard.Standard'/> 
```

这样做会删除边距。

否则你显然也可以覆盖你的css中的样式。所以在body style中还要加上“margin 0px !important;”

```
html, body{
   height: 100%;
   width: 100%;
   min-height: 100%;
   margin 0px !important
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:54:38.317

问题是：

> RootPanel.get().add(mainPanel)

使用 DockLayoutPanel 您需要使用

> RootLayoutPanel.get().add(mainPanel)

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)

> 根布局面板
> 
> 此面板是一个单例，用作所有其他布局面板应附加到的根容器（有关详细信息，请参阅下面的 RequiresResize 和 ProvidesResize）。它扩展了 LayoutPanel，因此您可以使用任意约束定位任意数量的子级。
> 
> 您最常使用 RootLayoutPanel 作为另一个面板的容器，如以下代码片段所示，这会导致 DockLayoutPanel 填充浏览器的客户区：
> 
> DockLayoutPanel appPanel = new DockLayoutPanel(Unit.EM); RootLayoutPanel.get().add(appPanel);

一旦你这样做了，你就可以摆脱css（DockLayoutPanel无论如何都会占用所有空间，它就是这样工作的）：

```
html, body{
  height: 100%;
  width: 100%;
  min-height: 100%;
} 
```

# javascript - 分数不计算正确基于是否正确答案

> ID：12254618
> 
> 赞同：-5
> 
> 时间：2012-09-03T22:19:15.660
> 
> 标签：javascript, jquery, html

我很确定我错过了一些简单的事情，但是根据是否选择了正确的答案，分数并没有正确计算。它是一个多项选择测验。该代码是由其他人编写的，因此请尝试单独解决此问题！有任何想法吗？

* * *

```
var Question = function(Text){
  this.Question = Text;
  this.Answers = [];
  this.addAnswer = function(Answer, Correct){
    if(typeof Correct == 'undefined') Correct = false;
    else Correct = Correct == true;
    this.Answers.push({"Answer":Answer, "Correct":Correct});
  };
  this.checkAnswer = function(Index){
    if(typeof this.Answers[Index] == 'undefined') return false;
    return this.Answers[Index].Correct;
  };
};

var Questions = [];
var q;
var Score = 0;
var CurrentQuestion = -1;

var nextQuestion = function()
{
  ++CurrentQuestion;

  if(typeof Questions[CurrentQuestion] == 'undefined') return false;
  var Question = Questions[CurrentQuestion];

  $('#QuestionIndex').html(Numbers[CurrentQuestion]);
  $('#QuestionsRemaining').html((Questions.length-CurrentQuestion-1));
  $('#Question').html(Question.Question);
  $('#Answers').html('');

  for(var t in Question.Answers)
  {
    i = t;
    t = Question.Answers[t];
    var Div = $('<div class="answer"></div>');
    $(Div).append('<span class="radioContainer"><input type="radio" name="Answer" id="answer_'+ i +'"></span> ');
    $(Div).append($('<label for="answer_' + i + '" />').html(t.Answer));
    $('#Answers').append(Div);
  }

  $("input[type='radio']").change(function(){
    $('.radioContainer').css('background-image', 'none');

    attr = $(this).attr('checked');
    if(typeof attr !== 'undefined' && attr !== false)
    {
   $(this).parent().css('background-image', 'url("http://dev.clickymedia.co.uk/fbart/wp-content/themes/artbook/img/tick.png")');
    }
  });

  return true;
}

//Returning false should stop the user from progressing to the next question.
var checkCurrentAnswer = function()
{
  if(typeof Questions[CurrentQuestion] == 'undefined') return false;
  var i = $('#Answers input:checked').parent().index();
  if(i < 0) return false;

  if(Questions[CurrentQuestion].checkAnswer(i) == true) Score++; 

  return true;
}

q = new Question("Which famous film star did Pop artist Andy Warhol make more portraits of than any other?");
q.addAnswer('Marilyn Monroe', true);
q.addAnswer('Sophia Loren');
q.addAnswer('Audrey Hepburn');
q.addAnswer('Doris Day');
Questions.push(q);

q = new Question("The Mona Lisa, Leonardo da Vinci's magnum opus, draws crowds into which famous European museum?");
q.addAnswer('The Mus&#233;e du Louvre, Paris', true);
q.addAnswer('The Tate Britain, London');
q.addAnswer('The National Gallery, Berlin');
q.addAnswer('The Uffizi Gallery, Florence');
Questions.push(q);

$(function(){
  nextQuestion();

  $('#nextQuestion').bind('click', function(){
    if(checkCurrentAnswer())
    {
      if(nextQuestion())
      {

      }else{ //End of examination! - Put your pens and pencils down.
        $('#QuestionBook .FinalLeft .Score').html(Score + '/' + Questions.length);

        $('#QuestionBook .FinalLeft .Message').html(Message);

        $('#QuestionBook .QuestionContainer, #QuestionBook .AnswersContainer').hide();
        $('#QuestionBook .FinalLeft, #QuestionBook .FinalRight').show();

      }
    }
  });
}); 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:38:51.377

您的`checkCurrentAnswer`函数正在计算*错误*的索引。具体来说，这一行：

`var i = $('#Answers input:checked').parent().index();`

您的 HTML 如下所示：

```
<div id="Answers">
  <div class="answer">
    <span class="radioContainer"><input type="radio" /></span>
    <label for="answer_0">The Musée du Louvre, Paris</label>
  </div>
  <div class="answer">
    <span class="radioContainer"><input type="radio" /></span>
    <label for="answer_1">The Tate Britain, London</label>
  </div>
  ...
</div> 
```

因此，`i`将***始终***是`0`，因为`radio`输入的父项始终是 a `span`，它始终是 的*第一*个子项（索引`0`）`answer`。你应该`index`用类来计算 div 的数量`answer`。

要修复，它很简单，而不是使用`parent()`，使用`closest(".answer")`：

```
var i = $('#Answers input:checked').closest(".answer").index(); 
```

# iphone - 有谁知道这段代码是做什么的？

> ID：12254625
> 
> 赞同：-5
> 
> 时间：2012-09-03T22:19:35.363
> 
> 标签：iphone, objective-c, ios, xcode, ipad

```
CLLocation *userLoc = mapView.userLocation.location;
    CLLocationCoordinate2D userCoordinate = userLoc.coordinate;

    NSLog(@"user latitude = %f",userCoordinate.latitude);
    NSLog(@"user longitude = %f",userCoordinate.longitude);

    mapView.delegate=self; 
```

上面的代码到底做了什么？无需逐行解释，因为我了解行话..只是不确定此代码的用途..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:28:50.267

首先，您应该学习如何挖掘苹果文档来回答这些类型的问题。我通常从搜索 XXX 类参考或 XXX 开发人员指南开始。

mapview 是一个 MKMapView 对象。见这里：http: [//developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)

userLocation 返回用户的当前位置。从那些文档中：

> ```
> userLocation
> The annotation object representing the user’s current location. (read-only)
> 
> @property(nonatomic, readonly) MKUserLocation *userLocation 
> ```

然后代码获取用户位置的坐标并注销纬度和经度。

最后，将委托设置为 self 意味着该类将实现 MKMapViewDelegate 协议的回调。从那些文档中：

```
delegate
The receiver’s delegate.

@property(nonatomic, assign) id<MKMapViewDelegate> delegate
Discussion
A map view sends messages to its delegate regarding the loading of map data and changes in     the portion of the map being displayed. The delegate also manages the annotation views used to highlight points of interest on the map.

The delegate should implement the methods of the MKMapViewDelegate protocol. 
```

请参阅此处了解委托是 [什么：委托在 xcode ios 项目中到底做了什么？](https://stackoverflow.com/questions/7215698/what-exactly-does-delegate-do-in-xcode-ios-project/7215969#7215969)

因此，回调允许您将代码插入到地图视图的管道执行中，并提供 viewForAnnotation 等数据。

这是 MKMapVeiwDelegate 上的文档（地图视图的回调）：

[http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intf/MKMapViewDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intf/MKMapViewDelegate)

# php - 通过 javascript 设置的背景图像没有被 Chrome 缓存

> ID：12254627
> 
> 赞同：0
> 
> 时间：2012-09-03T22:20:00.157
> 
> 标签：php, javascript, css, google-chrome, caching

在我的网站上，当页面加载时，一些 javascript 会检测屏幕分辨率，然后使用以下代码将正文的背景设置为 url：

```
var url = "http://site.com/get_background/" + width + "/" + height;

var body=document.getElementsByTagName('body')[0];            

body.style.background = "#000000 url(" + url + ") fixed top center"; 
```

在 url`get_background/`处，使用以下 PHP 代码提供图像：

```
 $etag = md5_file($image);
     $lastModified = gmdate('D, d M Y H:i:s', filemtime($image)) . ' GMT';

     header("Content-type: $mime");
     header("ETag: \"{$etag}\"");
     header("Last-Modified: $lastModified");
     header('Cache-Control: max-age=28800');

     $image = readfile($image);
     imagejpeg($image);

    imagejpeg($image); 
```

在 Firefox 中，这一切都按预期工作。但是在 Chrome 中，每次加载此站点上的页面时，图像似乎会再次加载，而不仅仅是被缓存和提供。

如果我将用于设置背景的代码移动到外部 css 文件，那么它在 chrome 中按预期工作，但是如果我把它放在 javascript 中，那么它似乎会让 Chrome 刷新图像。

我该怎么办？由于需要通过javascript检测屏幕分辨率，因此代码必须放在JS中。有没有办法强制 chrome 缓存图像，即使它是通过 javascript 加载的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:20:20.813

要成功缓存响应，您需要`Expires`在初始响应中设置标头，并且在下一个响应中，您需要检查`HTTP_IF_MODIFIED_SINCE`请求标头的存在。

如果它存在 - 你需要回复`304`

更多细节可以在[http://dtbaker.com.au/random-bits/how-to-cache-images-generated-by-php.html找到](http://dtbaker.com.au/random-bits/how-to-cache-images-generated-by-php.html)

# asp.net-mvc - 如何在 ASP.Net MVC 中将对象列表传递给 [HTTPPost] 控制器参数？

> ID：12254633
> 
> 赞同：0
> 
> 时间：2012-09-03T22:21:05.347
> 
> 标签：asp.net-mvc, list, submit, http-post, asp.net-mvc-controller

我有下一个观点：

```
@model IEnumerable<L5ERP.Model.BLL.BusinessObjects.MTR_MonthlyTransfer>
@using (Html.BeginForm("ExpenseMonthlyTransferProcessing", "BudgetTransfer", Model.ToList())){
<table class ="divTable">
<tr>
    <th>Transferir</th>

    <th>
       Clave
    </th>

    <th>
        Monto
    </th>

</tr> 
@foreach (var item in Model) {
<tr>
    <td>
        @Html.CheckBoxFor(x => item.MTR_Bool, new { @class = "checkMTR", @checked = "checked" })

    </td>
    <td>
         @Html.TextBoxFor(x => item.MTR_Key, new {@class = "longInput" })
    </td>
    <td>
        @String.Format("{0:F}", item.MTR_Amount)
    </td>
</tr>   
 } 
</table> 
} 
```

我的控制器是这样的

```
[HttpPost]
    public ActionResult ExpenseMonthlyTransferProcessing(List<MTR_MonthlyTransfer> lstMtr)
    { return View(lstMTR); } 
```

但是当我发布我的列表时，我的列表为空，我如何通过提交按钮发送我的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:17:10.560

您应该将 更改`@model`为数组（`L5ERP.Model.BLL.BusinessObjects.MTR_MonthlyTransfer[]`）或其他实现`IList<>`：

```
@model L5ERP.Model.BLL.BusinessObjects.MTR_MonthlyTransfer[]

@for (var i = 0; i < Model.Length; i ++) {
<tr>
    <td>
        @Html.CheckBoxFor(x => Model[i].MTR_Bool, new { @class = "checkMTR", @checked = "checked" })
    </td>
    <td>
        @Html.TextBoxFor(x => Model[i].MTR_Key, new {@class = "longInput" })
    </td>
    <td>
        @String.Format("{0:F}", item.MTR_Amount)
    </td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T22:30:14.070

接收 FormCollection 并手动解析其中的项目

使用 F12 检查导航器中的帖子，看看它是否发送了您期望的内容。

# perl - 编写固定宽度字段文件的好方法是什么？

> ID：12254634
> 
> 赞同：3
> 
> 时间：2012-09-03T22:21:06.707
> 
> 标签：perl

我需要编写一个文件，该文件可能正在由 AS/400 上的 RPG IV 之类的东西解释（但我不知道）。该文件将通过从我们的 MySQL 数据库中读取数据然后以指定格式写入来创建。它可能非常大（可能以 GB 为单位测量，但尚未确定）。现在我认为 Perl 的内置`format`实际上可能是我最好的选择，因为像 Xslate 和 Template Toolkit 这样的东西更适合非固定宽度 (HTML) 的东西。我唯一担心的是它`format`似乎没有条件，看起来我可能需要它们（如果设置了字段 A，我发现格式左对齐，如果没有，则右对齐并填充）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T23:53:09.457

想到的其他可能性是[pack](http://perldoc.perl.org/functions/pack.html)和[sprintf](http://perldoc.perl.org/functions/sprintf.html)系列函数。

我不认为`pack`支持右对齐文本，所以这不是一个选择。

留下（s）printf。您可以以编程方式构建格式说明符，以支持您的条件逻辑进行证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:47:43.097

Template Toolkit 可以在创建固定宽度格式的文件方面发挥作用。诀窍是使用模板来描述文件和记录结构，但使用 Perl 函数格式化每个字段的数据。

跳过模板并在 Perl 中进行所有格式化可能更容易。无论哪种方式，您都需要考虑如何格式化您的字段。以我的经验`sprintf`更好，并且可以处理更多固定宽度格式文件所需的格式情况。你可能仍然需要实现一些手怪的辅助函数（如果你不够幸运的话，比如用 ASCII 编码的 EBCDIC/COBOL 符号数字）。

在传统的固定宽度格式文件中有上千种特殊情况，这几乎足以让我喜欢 XML 数据文件，通常它最终决定了格式化文件的最佳方法是最奇怪的特殊情况。

# google-sheets - 谷歌表格公式匹配多个条件

> ID：12254637
> 
> 赞同：2
> 
> 时间：2012-09-03T22:21:24.463
> 
> 标签：google-sheets, google-sheets-formula, array-formulas

我有一个如图所示的电子表格。我想做的是生成一个公式，计算来自*纽约的**男性*选择*蓝色*的次数。在 D 列，用户可以输入 1-3 种不同的颜色。在这种情况下，B 列将被忽略。任何人都可以帮我计算公式吗？

 **![](../Images/f55d15fa2494607b69ff715e010939e6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T23:44:37.843

在 Google 文档中试试这个公式

`=ARRAYFORMULA(sum(if(A2:A4="Male",if(C2:C4="New York",If(isnumber(search("Blue",D2:D4)),1)))))`

您可以根据需要将其扩展到尽可能多的行**

# jquery - 带有大尺寸图像的 Chrome 中的延迟不透明度变化

> ID：12254638
> 
> 赞同：0
> 
> 时间：2012-09-03T22:21:47.710
> 
> 标签：jquery, google-chrome, opacity, lag, fadeto

我有一个简单的幻灯片放映，我在显示新照片之前淡出当前照片。它在 FF 和 IE 下效果很好，但在 Chrome 中效果非常滞后......

我发现 Chrome 中的延迟只出现在大尺寸图像上

这是重现的代码：

```
 this.oldimg  = this.img;
    this.img = new Image(); 
    $(this.img).css({width: '90%', height: '90%'});
    $(this.img).attr("src", "//file.jpg");
    $("body").prepend(this.img);
    if(this.oldimg) $(this.oldimg).fadeTo(600, 0, function() { $(this).remove();  }); 
```

在这里工作演示：http: [//jsfiddle.net/f3tta/18/embedded/result/](http://jsfiddle.net/f3tta/18/embedded/result/)

（注意：评论参考了之前的演示，避免浏览器缓存[在这里](http://jsfiddle.net/f3tta/10/)）

你能重现吗？我必须有什么解决方案来避免滞后而不必提供完美缩放的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T21:38:21.063

好的，所以如果有人遇到同样的问题，我找到了绕过问题的解决方案：

```
if(this.oldimg) $(this.oldimg).delay(50).fadeTo(600, 0, function() { $(this).remove(); 
```

我不知道为什么，当我们稍微延迟淡出时，chrome几乎可以正常播放效果。

# c++ - 切换标签之前写的一些代码，可以吗？

> ID：12254644
> 
> 赞同：4
> 
> 时间：2012-09-03T22:22:36.723
> 
> 标签：c++, switch-statement

我想知道是否所有编译器都会像 VS2005 那样在 switch 语句中默默地忽略标签之前的代码。

这就是我所追求的：

```
#define CASE break; case 
```

所以，

```
switch (i) {
  CASE 0:  print("0");
  CASE 1:  print("1");
} 
```

会变成

```
switch (i) {
  break;
  case 0:  print("0");  break;
  case 1:  print("1");
} 
```

从标准来看，第一个“中断”（以及那里的任何其他代码，如果存在的话）似乎很清楚不会被执行。该标准并不否认此类代码的存在，但我不能确定实际的编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T22:26:35.177

是的，这是 §6.4.2¶5 暗示的（特别是忽略的部分）：

> 当 switch 语句被执行时，它的条件被评估并与每个 case 常量进行比较。如果 case 常量之一等于条件的值，则将控制权传递给匹配的 case 标签后面的语句。如果没有大小写常量与条件匹配，并且如果存在默认标签，则控制传递到由默认标签标记的语句。如果没有大小写匹配并且没有默认值，则不会执行 switch 中的任何语句。

但是，我认为您的宏不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:28:38.687

就个人而言，我将“无法”编写这样的代码，因为所有警告都会变成错误，并且可能会出现无法访问的代码警告......事实上，对 clang++ 的快速测试会输出这样的警告。

# javascript - 如何在angularjs中创建一个项目具有不同控制器的列表

> ID：12254646
> 
> 赞同：2
> 
> 时间：2012-09-03T22:22:54.867
> 
> 标签：javascript, angularjs

我有一个列表，其中可以包含需要不同模板/控制器的不同类型的东西。什么是在 Angular js 中执行此操作的最佳方法。

到目前为止，我想出的最好的方法是将模板作为 ng-repeat 数据的一部分。

```
<ul>
  <li ng-repeat="foo in list">
    <div ng-include src="'partials/'+foo.template+'.template.html'">
    </div>
  </li>
</ul> 
```

列表类似于。

```
[{template:'foo',data:{...}},{template:'bar',data:{...}}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:37:45.953

对我来说看起来不错，您甚至不需要`<div>`标签，因为您可以将 ng-include 附加到`<li>`标签（我认为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T18:21:16.927

您可以使用这样的指令[http://onehungrymind.com/angularjs-dynamic-templates/](http://onehungrymind.com/angularjs-dynamic-templates/)

# javascript - JS错误导致滑块不起作用

> ID：12254648
> 
> 赞同：-4
> 
> 时间：2012-09-03T22:23:00.013
> 
> 标签：javascript, magento, slider

我正在建立一个 Magento 商店，我正在使用 HelloWired 主题。

主题中包含一个名为 HelloSlide 的滑块，它基本上可以在两个图像之间交叉淡入淡出。

出于某种原因，两个图像似乎同时过渡到彼此。这会导致没有图像显示。

模板中包含的标记如下所示：

```
<div id="slider">
  <div class="panel"><img src="http://50.63.156.40/media/helloslide/01.jpg" alt="Flowing Rock" />
  <div class="panel"><img src="http://50.63.156.40/media/helloslide/02.jpg" alt="Other" /> 
  <div id="controls"> </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:30:08.737

我会说它是因为面板 div 在图像之后没有关闭：

```
<div id="slider">
  <div class="panel"><img src="http://50.63.156.40/media/helloslide/01.jpg" alt="Flowing Rock" />
  <div class="panel"><img src="http://50.63.156.40/media/helloslide/02.jpg" alt="Other" /> 
  <div id="controls"> </div>
</div> 
```

应改为：

```
<div id="slider">
  <div class="panel"><img src="http://50.63.156.40/media/helloslide/01.jpg" alt="Flowing Rock" /></div>
  <div class="panel"><img src="http://50.63.156.40/media/helloslide/02.jpg" alt="Other" /> </div>
  <div id="controls"> </div>
</div> 
```

# javascript - [] 是 Array 的实例，但 "" 不是 String

> ID：12254658
> 
> 赞同：2
> 
> 时间：2012-09-03T22:25:07.503
> 
> 标签：javascript, arrays, string

> **可能重复：**
> [为什么 instanceof 对某些文字返回 false？](https://stackoverflow.com/questions/203739/why-does-instanceof-return-false-for-some-literals)

如果我做...

```
[] instanceof Array; 
```

`true`...尽管我没有使用它，但它会返回`new Array()`。

但如果我这样做...

```
"" instanceof String; 
```

...它返回`false`是因为我没有使用`new String()`.

为什么？我知道这`[]`是一种用于创建数组`""`的语言构造，也是一种用于创建字符串的语言构造。所以我不明白为什么一个返回`true`，另一个返回`false`。

此外，以下所有代码都返回`true`：

```
[] instanceof Array; /* true */
Array() instanceof Array; /* true */
new Array() instanceof Array; /* true */ 
```

但是用字符串：

```
"" instanceof String; /* false */
String() instanceof String; /* false */
new String() instanceof String; /* true */ 
```

也不应该`String() instanceof String`回来`true`吗？

**编辑：**

我提出了一个新问题（这个问题的衍生问题）：[检查变量是否为字符串的简单方法？](https://stackoverflow.com/questions/12254882/easy-way-to-check-if-a-variable-is-a-string)

# jsf-2 - Primefaces p：媒体没有显示 youtube 视频

> ID：12254661
> 
> 赞同：3
> 
> 时间：2012-09-03T22:26:10.737
> 
> 标签：jsf-2, primefaces

我有一个 primefaces p:media 组件

```
<p:media id="youTubeMedia"    value="#{graffiticontroller.selectedYouTubeURL}" width="405"   height="144" player="flash" /> 
```

生成的html是

```
<object height="144" width="405" data="http://www.youtube.com/watch?v=yY0PBoDlHMI" type="application/x-shockwave-flash"> 
```

问题是当 url 像[http://www.youtube.com/watch?v=yY0PBoDlHMI](http://www.youtube.com/watch?v=yY0PBoDlHMI)时，youtube 视频不显示。我只看到一个白色的盒子。但如果我将网址更改为[http://www.youtube.com/v/yY0PBoDlHMI](http://www.youtube.com/v/yY0PBoDlHMI) ，视频就会显示出来。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-18T07:33:29.397

我通过阅读这篇文章解决了它[http://forum.primefaces.org/viewtopic.php?f=3&t=346](http://forum.primefaces.org/viewtopic.php?f=3&t=346)

我复制了我的 youtube 视频的顶部链接并应用了一些格式。

例如，如果这是您视频的原始链接[https://www.youtube.com/watch?v=fJ9rUzIMcZQ](https://www.youtube.com/watch?v=fJ9rUzIMcZQ)。您需要做的第一件事是替换“手表？” 通过“/”，您还可以在最后将以下“=”替换为“/”，将此文本附加到您的链接：

```
&amp;hl=en&amp;fs=1&amp; 
```

最后你会得到一个这样的链接：

```
https://www.youtube.com/v/fJ9rUzIMcZQ&amp;hl=en&amp;fs=1&amp; 
```

现在你可以使用你的 p:media

```
<p:media value="https://www.youtube.com/v/fJ9rUzIMcZQ&amp;hl=en&amp;fs=1&amp;" width="600" height="" player="flash"/> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T18:19:06.547

以这种方式放置 url`http://www.youtube.com/watch/v/yY0PBoDlHMI`它会工作......

# spring - 在 openejb 中设置数据源时出现“java.lang.IllegalStateException：无法转换类型的值”异常

> ID：12254667
> 
> 赞同：0
> 
> 时间：2012-09-03T22:26:54.340
> 
> 标签：spring, junit, datasource, illegalstateexception, openejb

我正在使用 OpenEJB 4.0.0、Spring 3.1.0.RELEASE 和 JUnit 4.8.1。我正在尝试使用 OpenEJB 来设置数据源，我确实喜欢这样……</p>

```
 final Properties props = loadMyProjectProps();
    final String dsJndiName = props.getProperty("DATASOURCE_JNDI_PREFIX") + "MySqlDS";
    System.out.println("ds jndi name:" + dsJndiName);
    p.put(dsJndiName, "new://Resource?type=DataSource");
    p.put(dsJndiName + ".JdbcDriver", "com.mysql.jdbc.Driver");
    final String url = "jdbc:mysql://" + props.getProperty("DB_SERVER") + ":" + props.getProperty("DB_PORT") + "/" + props.getProperty("DB_NAME");
    p.put(dsJndiName + ".JdbcUrl", url);
    p.put(dsJndiName + ".Username", props.getProperty("DB_USER"));
    p.put(dsJndiName + ".Password", props.getProperty("DB_PASSWORD"));
    final InitialContext initialContext = new InitialContext(p); 
```

但是在初始化我的 Spring 文本应用程序时，它会像这样设置会话工厂和数据源……</p>

```
 <bean id="myprojSessionFactory" lazy-init="true" scope="singleton"
     class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
            <property name="mappingResources">
            <ref bean="_hibernate_config_list"/>
            </property>
            <property name="hibernateProperties">
                    <props>
                            <prop key="hibernate.connection.release_mode">auto</prop>
                            <prop key="hibernate.dialect">${HIBERNATE_DIALECT}</prop>
                            <prop key="hibernate.transaction.factory.class">${HIBERNATE_TRANSACTION_FACTORY}</prop>
                            <prop key="hibernate.current_session_context_class">jta</prop>
                            <prop key="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</prop>
                            <prop key="hibernate.show.sql">true</prop>
                            <prop key="hibernate.transaction.flush_before_completion">true</prop>
                            <prop key="hibernate.transaction.auto_close_session">true</prop>
                    </props>
            </property>
            <property name="dataSource">
                    <ref bean="myproj.ds.${DS_PREFIX}${DB_DATASOURCE}"/>
            </property>
    </bean>

    …

    <bean id="myproj.ds.jndi-MySqlDS" class="org.springframework.jndi.JndiObjectFactoryBean" lazy-init="true">
            <property name="jndiName"><value>${DATASOURCE_JNDI_PREFIX}MySqlDS</value></property>
    </bean> 
```

我得到了以下异常。知道如何解决这个烦人的“无法将类型 [org.apache.openejb.core.ivm.naming.IvmContext] 的值转换为属性'dataSource'所需的类型[javax.sql.DataSource]”异常吗？

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myprojSessionFactory' defined in class path resource [myproj/spring/config/db/hibernate/Hibernate-config.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'org.apache.openejb.core.ivm.naming.IvmContext' to required type 'javax.sql.DataSource' for property 'dataSource'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [org.apache.openejb.core.ivm.naming.IvmContext] to required type [javax.sql.DataSource] for property 'dataSource': no matching editors or conversion strategy found
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 113 more
Caused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'org.apache.openejb.core.ivm.naming.IvmContext' to required type 'javax.sql.DataSource' for property 'dataSource'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [org.apache.openejb.core.ivm.naming.IvmContext] to required type [javax.sql.DataSource] for property 'dataSource': no matching editors or conversion strategy found
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:485)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:510)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.convertForProperty(AbstractAutowireCapableBeanFactory.java:1406)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1365)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 119 more
Caused by: java.lang.IllegalStateException: Cannot convert value of type [org.apache.openejb.core.ivm.naming.IvmContext] to required type [javax.sql.DataSource] for property 'dataSource': no matching editors or conversion strategy found
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:241)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)
    ... 125 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-04T10:41:42.433

datasource 属性正在寻找一个数据源，并且您已将一个字符串传递给它（因为您使用了 value=）。您需要将引用传递给您的 bean：

# c# - 如何将枚举值传递给@Html.ActionLink

> ID：12254669
> 
> 赞同：5
> 
> 时间：2012-09-03T22:27:13.100
> 
> 标签：c#, .net, html, asp.net-mvc-3

我有一些方法

```
public ActionResult ExportToCSV(CellSeparators cellSeparator)
{
  //
}          

public enum CellSeparators
{
   Semicolon,
   Comma
} 
```

我们如何在 html 中正确引用该方法？

```
@Html.ActionLink("Exportar al CSV", "ExportToCSV", new { ?? }) 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-11T19:07:15.463

进入你的 View.cshtml：

```
@Html.ActionLink("Exportar al CSV", "ExportToCSV", new { cellSeparator=CellSeparators.Semicolon }) 
```

进入你的控制器：

```
public ActionResult ExportToCSV(CellSeparators? cellSeparator)
{
  if(cellSeparator.HasValue)
  {
    CellSeparator separator = cellSeparator.Value;
  }

  /* ... */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T22:33:42.833

@Html.ActionLink("Exportar al CSV", "ExportToCSV", new { **cellSeparator=(int)CellSeparators.Semicolon** })

和

```
public ActionResult ExportToCSV(int cellSeparator)
{
  CellSeparator separator = (CellSeparator)cellSeparator;
} 
```

不优雅，但很有用

# c# - WPF StackPanel 自动调整大小

> ID：12254670
> 
> 赞同：0
> 
> 时间：2012-09-03T22:27:16.367
> 
> 标签：c#, wpf

我有一个`Canvas`名为 mainCanvas 并且我以编程方式将 a`ScrollViewer`和 a添加`StackPanel`到它的顺序

...主画布

......滚动视图

.........pnl

...... （更多堆叠控件）

我试图让我的 StackPanel 自动调整为 mainCanvas 大小，并在它太大时允许滚动。到目前为止的代码如下

```
mainCanvas.Children.Clear();

// Create the container
ScrollViewer scrollView = new ScrollViewer();
scrollView.VerticalScrollBarVisibility = ScrollBarVisibility.Auto;
scrollView.CanContentScroll = true;
scrollView.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;
scrollView.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;

StackPanel pnl = new StackPanel();
//pnl.Height = 500; //Works and allows scrolling but doesn't resize
pnl.Height = Double.NaN; //(Double.NaN is Auto) Doesn't Work - StackPanel overflows parent window

pnl.VerticalAlignment = System.Windows.VerticalAlignment.Stretch;
pnl.HorizontalAlignment = System.Windows.HorizontalAlignment.Stretch;

scrollView.Content = pnl;

// Add the ScrollView and StackPanel to Parent Window
mainCanvas.Children.Add(scrollView); 
```

不幸的是，StackPanel 不适合父级并且不会自动调整大小。

`mainCanvas`XAML 中已存在设置：

宽度=“自动”

高度=“自动”

Horizo​​ntalAlignment = "拉伸"

VerticalAlignment = "拉伸"

`pnl.Height = 500;`如果 Stackpanel 高度受到限制，我可以通过使用它来显示滚动条确实可以工作。但这只是手动将高度调整为全屏大小，因此在调整应用程序大小时不会自动调整大小。

我希望设置`pnl.Height = Double.NaN;`为自动和 V/H 调整到 Stretch 会起作用，但 StackPanel 仍然会将所有控件重叠到它的最大尺寸。

当我通过滚动调整父级和/或主应用程序窗口的大小时，谁能指出我正确的方向以使我的 StackPanel 适合父级 mainCanvas 并自动调整大小？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:34:37.200

我相信 Canvas 仅用于绝对定位。使用 Grid 作为您的面板可能会给您想要的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T22:50:20.817

正如您所注意到的`StackPanel`，它不会拉伸以填充其容器。但是您可以将其`MinWidth`和`MinHeight`属性绑定到其容器的宽度/高度。

```
// give the canvas a name, so you can bind to it
mainCanvas.Name = "canvas";

// create the binding for the Canvas's "ActualHeight" property
var binding = new System.Windows.Data.Binding();
binding.ElementName = "canvas";
binding.Path = new PropertyPath("ActualHeight");

// assign the binding to the StackPanel's "MinHeight" dependency property
sp.SetBinding(StackPanel.MinHeightProperty, binding); 
```

# sql - 尝试使用分区而不是子查询

> ID：12254672
> 
> 赞同：0
> 
> 时间：2012-09-03T22:27:30.280
> 
> 标签：sql, data-partitioning

我有两张表，一张在我当前的系统中有当前的电子邮件，一张是我创建并从全球通讯簿中导出的所有电子邮件地址，以及一个 BIT 值，它是主电子邮件地址和用户 ID 值. 我使用子查询编写了一个查询来查找应该更改哪些电子邮件地址，但我虽然应该能够在不使用子查询的情况下做到这一点，但不知道怎么做？

有谁知道不使用子查询如何或是否可以做得更好？

我有什么工作，但我想学习如何更好地编写 SQL。

我虽然应该能够使用 OVER (Partition BY Member_ID) 和 MAX(CAST( [primary] AS int)) 来做到这一点，但花了几个小时试图弄清楚并没有成功。

```
User_Emails
{
email varchar(75)
}

eg:
User_Emails
bob@oldemail.com
sue@evenolderemail.com
jim@otheremail.com
bill@oldemail.com 
```

...

```
Global_Address_Book
{
Member_ID int
primary BIT
email_address varchar(75)
}

eg:
Member_ID        | primary | email_address
1                | 1       | bob@newemail.com
1                | 0       | bob@reallyoldemail.org
1                | 0       | bob@oldemail.com
2                | 1       | sue@newemail.com
2                | 0       | sue@oldemail.com
2                | 0       | sue@reallyoldemail.org
2                | 0       | sue@evenolderemail.com
3                | 1       | bill@newemail.com
3                | 0       | bill@oldemail.com
4                | 1       | jan@alternativeemail.com 
```

...

```
SELECT Changed_Email_list.email AS Old_Email, New_Email_List.email_address AS New_Email
FROM (SELECT Member_ID, email
      FROM [Database].[Global_Address_Book] INNER JOIN [Database].[User_Emails]
       ON [Global_Address_Book].[email_address] = [User_Emails].[email]) AS     
      Changed_Email_list LEFT JOIN 
      (SELECT Member_ID, email_address 
       FROM [Database].[Global_Address_Book]
       WHERE [primary] = 1) AS New_Email_List
       ON Changed_Email_list.Member_ID = New_Email_List.Member_ID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:19:57.393

我猜应该这样做

```
select UserEmails.Email as OldEmail,GAB.Email as NewEamil
from   UserEmailsfromAddressBook  
inner join UserEmails on UserEmails.Email=UserEmailsfromAddressBook.Email
      and isprimary =0
inner join UserEmailsfromAddressBook  GAB on GAB.memberId=UserEmailsfromAddressBook.memberID
     and GAB.isprimary=1 
```

[sqlfiddle](http://sqlfiddle.com/#!3/ae7a7/1/0)中的测试脚本

# android - 如何确定安卓设备是否有返回和菜单按钮作为屏幕的一部分

> ID：12254674
> 
> 赞同：2
> 
> 时间：2012-09-03T22:28:06.363
> 
> 标签：android, touchscreen

我现在在商店里看到设备（主要是平板电脑）有返回和菜单按钮作为实际屏幕的一部分。由于我买不起其他设备，而且我的后退和菜单按钮不属于屏幕的一部分，如果我的应用程序使用整个屏幕，它是否能够使用这些按钮。我在用

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

使其全屏显示。

如果这些按钮确实丢失了，有没有办法找出来，以便为这些设备提供屏幕替代品。另请注意，我正在使用`minSdkVersion="7"`，这意味着我希望它适用于任何`2.1 upwards.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:33:49.323

在 Honeycomb 中删除了菜单按钮。您可以检查 API 版本并盲目假设它是否是 Honeycomb，然后菜单按钮默认不存在（但在使用旧版应用程序时会添加）。您可以通过这种方式检查 API 版本：

```
if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
  // no menu button by default..
} 
```

这些控制按钮（主页、返回和最近使用的应用程序）始终是屏幕的一部分，即使是全屏（可以变暗，但不能移除）

**编辑：但是默认情况下**， Honecomb 中不存在屏幕上的“菜单”键，当您启动不是使用 targetSdk=11（或更高版本）构建的旧应用程序时，Android 将显示该按钮（否则用户将无法充分使用该应用程序）。一般来说 - 如果您的应用根本**不需要**菜单按钮，则将 targetSdk 设置为 Honeycomb 及以上。如果需要，请将 targetSdk 设置为较低的值，Android 会处理这种情况

# c# - 如何将 DotNetOpenAuth 与 Netflix API 一起使用？

> ID：12254682
> 
> 赞同：0
> 
> 时间：2012-09-03T22:29:08.107
> 
> 标签：c#, .net, dotnetopenauth, netflix

这是我到目前为止所拥有的，但它不起作用，因为我不明白 DotNetOpenAuth 应该如何工作。我只需要它用我的密钥签署结果，但我没有运气。一切似乎都指向我需要让客户授权我的访问权限，但我只需要对其进行签名，因为我不需要用户进行此请求。

请参阅[http://developer.netflix.com/docs/read/Security](http://developer.netflix.com/docs/read/Security)，标有“Netflix API 请求”的部分

```
public class class1
{
    private void Main()
    {
        string consumerKey = "<MyAPIKey>";
        string consumerSecret = "<MyAPISharedSecret>";
        var tokenManager = new InMemoryTokenManager(consumerKey, consumerSecret);

        MessageReceivingEndpoint oauthEndpoint =
            new MessageReceivingEndpoint(new Uri("http://api-public.netflix.com/catalog/titles/index"),
                                         HttpDeliveryMethods.PostRequest);
        WebConsumer consumer = new WebConsumer(
            new ServiceProviderDescription
                {
                    RequestTokenEndpoint = oauthEndpoint,
                    UserAuthorizationEndpoint = oauthEndpoint,
                    AccessTokenEndpoint = oauthEndpoint,
                    TamperProtectionElements =
                        new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement()},
                },
            tokenManager);

        var result = consumer.Channel.Request(new AccessProtectedResourceRequest());

    }

    internal class InMemoryTokenManager : IConsumerTokenManager
    {
        private Dictionary<string, string> tokensAndSecrets = new Dictionary<string, string>();

        public InMemoryTokenManager(string consumerKey, string consumerSecret)
        {
            if (string.IsNullOrEmpty(consumerKey))
            {
                throw new ArgumentNullException("consumerKey");
            }

            this.ConsumerKey = consumerKey;
            this.ConsumerSecret = consumerSecret;
        }

        public string ConsumerKey { get; private set; }

        public string ConsumerSecret { get; private set; }

        public string GetTokenSecret(string token)
        {
            return this.tokensAndSecrets[token];
        }

        public void StoreNewRequestToken(UnauthorizedTokenRequest request, ITokenSecretContainingMessage response)
        {
            this.tokensAndSecrets[response.Token] = response.TokenSecret;
        }

        public void ExpireRequestTokenAndStoreNewAccessToken(string consumerKey, string requestToken, string accessToken,
                                                             string accessTokenSecret)
        {
            this.tokensAndSecrets.Remove(requestToken);
            this.tokensAndSecrets[accessToken] = accessTokenSecret;
        }

        public TokenType GetTokenType(string token)
        {
            throw new NotImplementedException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:49:26.440

您的实际问题应该类似于“是否可以使用 DotNetOpenAuth 来签署带有或不带有访问令牌的请求？”，回答这个问题我应该说我不知道​​，甚至我无法通过阅读 DotNetOpenAuth 代码库找到它.

没有可用于 DotNetOpenAuth 的单页文档，而且代码库非常庞大，以至于您无法阅读它并了解它支持与否。

我想发出未经身份验证的请求不是问题，因为它只是添加到您的请求中的查询字符串参数。

但是要发出签名请求，您需要遵循一个简单的过程：

1.  收集请求参数
2.  计算签名
3.  提出请求（签名/保护）

# 收集请求参数

这些基本上是两类参数，oauth 特定参数和 Netflix API 特定参数。

在 OAuth 特定参数中`nonce`，这是可用于生成 nonce 值的代码：

```
public static string GenerateNonce()
{
    byte[] bytes = new byte[32];
    var first = Guid.NewGuid().ToByteArray();
    var second = Guid.NewGuid().ToByteArray();
    for (var i = 0; i < 16; i++)
        bytes[i] = first[i];
    for (var i = 16; i < 32; i++)
        bytes[i] = second[i - 16];
    var result = Convert.ToBase64String(bytes, Base64FormattingOptions.None);
    result = new string(result.ToCharArray().Where(char.IsLetter).ToArray());
    return result;
} 
```

另一个 OAuth 特定参数是`timestamp`，这是您可以用来计算时间戳的代码：

```
DateTime.UtcNow.Subtract(new DateTime(1970, 1, 1)).TotalSeconds 
```

其他 oauth 特定参数很容易提供，无需为它们编写特定代码。

API 特定参数是您添加到查询字符串或授权标头（除了 oauth_signature 本身）或正文请求（如果请求内容类型是 application/x-www-form-urlencoded）的任何值。

# 计算签名

要发出签名请求或受保护的签名，您需要计算签名，其过程几乎相同，除了创建签名密钥的方式：

1.  计算签名基串
2.  计算签名密钥
3.  通过使用签名密钥对签名基本字符串进行签名来创建签名

要计算签名基本字符串，您需要首先将所有参数连接成一个字符串，然后百分比对整个字符串进行编码。这是帮助您进行百分比编码的代码：

```
public static string Encode(string source)
{
    Func<char, string> encodeCharacter = c => {
        if ((c >= '0' && c <= '9') || (c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || (c == '.' || c == '-' || c == '_' || c == '~'))
            return new string(c, 1);
        return EncodeCharacter(c);
    };
    return string.Concat(source.ToCharArray().Select(encodeCharacter));
} 
```

您还需要按字母顺序对参数进行排序并使用“&”连接。这是您可能必须编写的代码：

```
public static string CalculateParameterString(KeyValuePair<string, string>[] parameters)
{
    var q = from entry in parameters
            let encodedkey = PercentEncode.Encode(entry.Key)
            let encodedValue = PercentEncode.Encode(entry.Value)
            let encodedEntry = encodedkey + "=" + encodedValue
            orderby encodedEntry
            select encodedEntry;
    var result = string.Join("&", q.ToArray());
    return result;
} 
```

让我们将上面的字符串称为“参数字符串”。然后要计算签名基本字符串，您只需使用“&”将请求的 http 动词、请求的 url 和参数字符串连接在一起。您还需要先对它们进行百分比编码。这是执行此操作的代码：

```
public static string CalcualteSignatureBaseString(string httpMethod, string baseUri, string parametersString)
{
    return httpMethod.ToUpper() + "&" + PercentEncode.Encode(baseUri) + "&" + PercentEncode.Encode(parametersString);
} 
```

创建签名基础字符串后，下一步就是计算签名密钥。

*   如果您只需要发出签名请求，那么您仅基于您的消费者密钥（共享密钥）创建签名密钥。这是用于发出签名请求的签名密钥。
*   在授权过程中，如果您刚刚发出请求令牌请求并收到临时 oauth 令牌，那么您的歌唱密钥基于您的消费者密钥和该 oauth 令牌。这是用于发出请求以获取访问令牌的签名密钥。
*   如果用户授权您的应用程序并且您拥有相关的访问令牌，那么您的签名密钥将是您的消费者密钥和访问令牌。这是发出受保护请求的签名密钥。

这是将生成签名密钥的代码：

```
public static string GetSigningKey(string ConsumerSecret, string OAuthTokenSecret = null)
{
    return ConsumerSecret + "&" + (OAuthTokenSecret != null ? OAuthTokenSecret : "");
} 
```

在您的情况下，要发出签名请求，您只需要传递`null`OAuthTokenSecret 参数的值。

好的，现在您有了一个签名基字符串，您现在需要做的就是使用 HMAC-SHA1 算法进行签名：

```
public static string Sign(string signatureBaseString, string signingKey)
{
    var keyBytes = System.Text.Encoding.ASCII.GetBytes(signingKey);
    using (var myhmacsha1 = new System.Security.Cryptography.HMACSHA1(keyBytes)) {
        byte[] byteArray = System.Text.Encoding.ASCII.GetBytes(signatureBaseString);
        var stream = new MemoryStream(byteArray);
        var signedValue = myhmacsha1.ComputeHash(stream);
        var result = Convert.ToBase64String(signedValue, Base64FormattingOptions.None);
        return result;
    }
} 
```

总结起来就是计算签名的全过程：

```
 public virtual string GetSignature(string consumerSecret, string tokenSecret, string uri, string method, params ParameterSet[] parameters)
    {
        var allParameters = parameters.SelectMany(p => p.ToList()).ToArray();
        var parametersString = CalculateSignatureBaseString(allParameters);
        var signatureBaseString = OAuth1aUtil.CalcualteSignatureBaseString(method, uri, parametersString);
        var sigingKey = GetSigningKey(consumerSecret, tokenSecret);
        var signature = Sign(signatureBaseString, sigingKey);
        return signature;
    } 
```

# 提出请求

现在您只需要发出一个有效的 http 请求并将 oauth 参数作为“授权”标头添加到请求中。

# android - 使用字符串 android 的性能

> ID：12254683
> 
> 赞同：3
> 
> 时间：2012-09-03T22:29:12.693
> 
> 标签：android, xml, string, performance

有人能告诉我在性能方面什么更好吗？

将**2 个字符串保存**在`string.xml`, 像`'abc'`和`'abc:'`

或者我应该**只保存第**一个并在 Java 编码需要时**连接？** `':'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:36:35.200

无论是从存储角度还是性能方面，您都应该只保存“abc”；

*   从磁盘获取额外数据所需的时间比一些快速的内存操作要长得多。
*   一般来说，将相同的数据存储两次是不好的做法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T23:01:45.327

很难回答，具体取决于您的字符串将代表什么以及您需要附加什么。本地化也是一个问题，例如...

```
Dog // English
Chien // French
Hund // German 
```

使用字符串资源允许您根据设备的语言环境创建不同的资源文件，Android 将自动使用正确的本地化字符串资源文件。如果您需要做的只是附加一个字符，`:`那么您将为每种语言的每个字符串加倍。

如果您选择仅保存基本字符串并使用代码附加字符，那么代码将是通用的，您只需将字符附加到任何本地化的单词 - 可能会更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T22:42:05.197

如果您必须连接多个字符串，您应该使用 StringBuilder - [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)

它比使用 '+' 或 '.concat()' 快得多

# c# - Intellisense -> 切换完成模式（灰色）

> ID：12254695
> 
> 赞同：3
> 
> 时间：2012-09-03T22:32:38.657
> 
> 标签：c#, autocomplete, intellisense, code-completion

我有哪些选择？在询问如何在 Visual C# 2010 Express 中启用 Intellisense 之前，我已经提出了一个主题

我现在两次重新安装了 Visual C# 2010 Express，但没有任何结果。我下载了 QuickSharp 全新安装相同的问题，没有智能感知。也许我的电脑有问题？视窗

我在这里创建了一个新的 Windows 窗体应用程序，称为 test.. 并单击 Form 以获取 Form_load 代码并键入 System. （点）（什么都没有弹出！）

我已经重置了设置，这完全没有任何作用。

![变灰](../Images/ccd5439595500bea1e7af86e639b475e.png)

# objective-c - 带有静态单元格的 UITableview - 在我点击单元格之前不会显示标签文本

> ID：12254698
> 
> 赞同：0
> 
> 时间：2012-09-03T22:32:56.183
> 
> 标签：objective-c, xcode, uitableview

我有一张带有静态单元格的表格。我还有一个为每个单元格设置 textLabel.text 属性的按钮。

当我按下那个按钮时，视觉上什么都没有发生，即使标签真的被改变了。

奇怪的是：如果我点击单元格，值会突然显示。所以我必须点击每个单元格来显示标签文本。现在我可以再次点击按钮（更改标签），它会正常工作 - 我只需要第一次点击单元格，然后它们保持“激活”状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:57:09.170

`[cell setNeedsLayout]`更改文本后尝试拨打电话。如果's为，则该单元格将其标签调整为`CGSizeZero`in 。`layoutSubviews``textLabel``text``nil`

# asp.net - SimpleMembershipProvider 不工作

> ID：12254701
> 
> 赞同：20
> 
> 时间：2012-09-03T22:33:38.970
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-mvc-4, simplemembership

我用 VS2012 开始了一个新的互联网项目，并试图稍微重组我的项目，但我似乎无法让 SimpleMemberhsipProvider 正常工作。基本上，我所做的只是将模型对象与其他几个项目一起移动到核心项目中。我已经实现了 Ninject 并试图通过使用存储库模式来抽象 Entity 来获取我的数据。我真的不觉得我对当前项目有太大的改变，但由于某种原因，当我现在启动应用程序时，我得到：

> {“角色管理器功能尚未启用。”}

框架提供的 ActionFilter 是在以下情况下引发错误的地方：

> WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "Id", "UserName", autoCreateTables: true);

叫做。

这是一些堆栈跟踪：

> [ProviderException：角色管理器功能尚未启用。]
> System.Web.Security.Roles.EnsureEnabled() +9561885
> System.Web.Security.Roles.get_Provider() +8
> WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect,字符串 userTableName，字符串 userIdColumn，字符串 userNameColumn，布尔 autoCreateTables）+104
> WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection（字符串 connectionStringName，字符串 userTableName，字符串 userIdColumn，字符串 userNameColumn，布尔 autoCreateTables）+100
> InoutBoard.Core.Infrastructure.Filters.SimpleMembershipInitializer.. c:\Users\Kyle\Documents\Visual Studio 2012\Projects\InoutBoard\InoutBoard.Core\Infrastructure\Filters\InitializeSimpleMembershipAttribute.cs:42 中的 ctor()
> 
> [InvalidOperationException：无法初始化 ASP.NET 简单成员资格数据库。有关详细信息，请参阅 [http://go.microsoft.com/fwlink/?LinkId=256588]](http://go.microsoft.com/fwlink/?LinkId=256588])
> c:\Users\Kyle\Documents\Visual Studio 2012 中的 InoutBoard.Core.Infrastructure.Filters.SimpleMembershipInitializer..ctor() \Projects\InoutBoard\InoutBoard.Core\Infrastructure\Filters\InitializeSimpleMembershipAttribute.cs:46

我在以下链接[https://github.com/keroger2k/InoutBoard在 github 上托管代码](https://github.com/keroger2k/InoutBoard)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-04T07:53:04.880

**第一种方式**

检查[sphair 的答案](https://stackoverflow.com/a/14148462/188268)（在当前线程中）。

**第二种方式**

将以下程序集添加到`web.config`：

```
<system.web>
  <compilation debug="true" targetFramework="4.5">
    <assemblies>
      <add assembly="WebMatrix.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add assembly="WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </assemblies>
  </compilation>
</system.web> 
```

**更新**

该`WebMatrix.WebData`程序集包含一个启动方法来初始化成员资格/角色提供程序并启用 RoleManager ( `PreApplicationStartCode.Start`)。但是 ASP.NET 找不到在你的情况下运行。通过添加这两行代码，我们强制 ASP.NET 在这些程序集中搜索`PreApplicationStartMethodAttribute(s)`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-19T19:16:26.147

如果其他人收到此错误并且上述解决方案不起作用，就像我的情况一样。当我尝试添加程序集标记时，它说无效的子对象。我必须指定 roleManager 和成员资格标签，如下所示。一旦我这样做了，更新数据库就起作用了。

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
      <providers>
        <clear/>
        <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
      </providers>
    </roleManager>
    <membership defaultProvider="SimpleMembershipProvider">
      <providers>
        <clear/>
        <add name="SimpleMembershipProvider" 
             type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData"/>
      </providers>
    </membership> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-30T16:26:28.833

我在我的托管公司（WinHost.com - 他们是优秀的顺便说一句）运行完全相同的错误。

我的解决方案是添加到 web.config：

```
<appSettings>
    <add key="enableSimpleMembership" value="true" />
</appSettings> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-03T22:43:30.657

与 Mehdi Golchin 建议的将程序集添加到 web.config 不同，另一种方法是将 WebMatrix.Data 和 WebMatrix.WebData 上的程序集引用更改为 CopyLocal=True。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-03T16:27:07.903

将密钥添加到 Web.Config 作为页面：

[http://devbla.wordpress.com/2013/07/03/corrigindo-o-erro-no-aspnet-the-role-manager-feature-has-not-been-enabled/](http://devbla.wordpress.com/2013/07/03/corrigindo-o-erro-no-aspnet-the-role-manager-feature-has-not-been-enabled/)

[]的

# java - join 和 CountDownLatch 有什么区别？

> ID：12254704
> 
> 赞同：37
> 
> 时间：2012-09-03T22:33:50.563
> 
> 标签：java, multithreading, countdownlatch

当等待其他线程完成时，我们可以使用`join`或`CountdownLatch`。使用这两种机制的优缺点是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-03T22:46:09.200

`Thread.join`只有在您自己处理线程时才能使用。大多数人选择不直接处理线程处理的细节，而是使用 an[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)来为他们处理。`ExecutorService`s 不会直接显示它们是如何执行任务的，因此您*必须*使用`CountDownLatch`: （假设您不想只`shutdown`使用整个服务。）

```
ExecutorService service = Executors.newFixedThreadPool(5);
final CountDownLatch latch = new CountDownLatch(5);

for(int x = 0; x < 5; x++) {
    service.submit(new Runnable() {
        public void run() {
            // do something
            latch.countDown();
        }
    });
}

latch.await(); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-11-02T18:58:55.720

另一个区别是 after `join()`，线程只有在加入的线程完成执行时才能解除阻塞，而在`CountDownLatch`线程中可以根据任何条件在线程完成时或两者之间随时减少计数。
这样我们可以更好地控制线程的解除阻塞，而不是仅仅依赖于连接线程的完成。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-02-09T16:57:01.183

join() 正在等待另一个线程完成，而 CountDownLatch 是为其他目的而设计的。如果使用 CountDownLatch，则不必像我们使用 join() 所做的那样引用正在等待的线程。假设您想在至少有 2 名玩家可用时开始游戏。在这种情况下，您可以使用 countdownlatch。但是您无法使用 join 轻松实现此目的，因为您没有可以编写 join() 的另一个线程（在本例中为播放器）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-03T23:43:11.023

CountdownLatch 是面向任务的——它与线程无关。可以将一大堆不相关的任务集提交给线程池，并且 CountdownLatch 将确保每个集都通知发起者完成。Join() 是一个令人讨厌的缩写，它将任务链接到线程，简单地说，一开始就不应该进入该语言。可悲的是，一大堆热气腾腾的线程教程在第一页上提到了 Join()，从而将线程作为死锁生成器引入新手并生成线程放克:(

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-03T22:51:10.863

`CountdownLatch`允许您将 Item 的实现更改为可能提交给 Executor 服务，而不是直接使用 Threads。

该类`CountDownLatch`允许我们协调线程的启动和停止。典型用途如下：

1.  我们可以让多个线程同时启动；
2.  我们可以等待多个线程完成（例如，该`Thread.join()` 方法只允许您等待单个线程）。

你可以看看这个-> [http://javahowto.blogspot.com/2011/08/when-to-join-threads-with.html](http://javahowto.blogspot.com/2011/08/when-to-join-threads-with.html)

而这 -> [A CountDownLatch 的 latch.await() 方法与 Thread.join()](https://stackoverflow.com/questions/3822608/a-countdownlatchs-latch-await-method-vs-thread-join)

# internet-explorer - 与 IE7 的兼容性问题（上边距完全搞砸了）

> ID：12254705
> 
> 赞同：1
> 
> 时间：2012-09-03T22:34:08.283
> 
> 标签：internet-explorer, compatibility, margin

我是 CSS 新手，确实需要一些帮助来解决我刚刚完成的这个网站的问题。除了 IE7（IE8 或 IE9 必须在兼容性视图中查看）外，在 FF、safari、chrome 中一切看起来都很好（opera 看起来不错）。

当我在 IE 浏览器中查看时，上边距完全丢失，这使得它不对齐。我曾尝试从不同的站点搜索一些解决方案，但没有运气...

我知道旧的 IE 也遇到了 PNG 文件的问题，这就是问题之一（当 PNG 文件用于掩盖图像的某些部分时）——它不会显示出来。

这些图像在 IE7 上搞砸了。我无法显示任何屏幕截图，因为我的 IE8 在 CV 模式下似乎工作正常 :(

很抱歉下面的一长串代码，但我不知道它的哪一部分出错了。现场网站位于 www.heightprotectionsolutions.com.sg（在这里可能更容易查看）。任何帮助是极大的赞赏！

```
<body>  
<div id="container"> 

    <!-- BEGIN OF HEADER -->
    <div id="header-container">
        <div id="header-box">

            <!-- begin of logo -->
            <div id="logo">
                <a href="#"><img src="images/logo_home.png" alt="main-logo" /></a>
            </div>
            <!-- end of logo -->

            <div id="righttop-header">
                <div id="top-information">
                    <p>For additonal information call : +65 9793 2263 | fax : +65 6748 2123</p>
                </div>

                <!-- begin of mainmenu -->
                <div id="mainmenu">
                    <ul id="menu">
                        <li><a href="index.html">home</a></li>
                        <li><a href="about.html">about</a></li>
                        <li><a href="services.html">services</a></li>
                        <li><a href="#">products</a>
                            <ul> 
                                <li><a href="GFP.html">GFP</a></li>
                                <li><a href="innotech.html">Innotech</a></li>
                            </ul>
                        </li>
                        <li class="current"><a href="partners.html">partners</a></li>
                        <li><a href="contact.html">contact</a></li>
                    </ul>                
              </div>
                <!-- end of mainmenu -->                    
            </div>

        </div>            
    </div>
    <!-- BEGIN OF HEADER -->

    <!-- BEGIN OF SLIDESHOW -->
    <div id="slideshow-container">
        <div id="slide-top"></div>            
        <ul id="slider">
            <!-- begin of slide 1 -->
            <li>
            <div class="slide-content-wrapper">                             
                <div class="slide-content">                        
                    <div class="slide-text">
                        <h1>Uncompromised Safety.</h1>
                        <p>The Trusted Safety Lifeline</p>
                        <a class="button small yellow" href="contact.html"><span>get a quote &nbsp;&raquo;</span></a>
                    </div>                                    
                </div>
                <div class="slide-dot"></div>
            </div>
            <img src="images/slideshow/slide1.jpg" alt="" />
            </li>
            <!-- end of slide 1 --> 
```

这是CSS代码。不确定我是否必须为 IE7 设置固定边距才能正常显示，就像其他浏览器一样？

```
#container{ 
margin:0px 0px 0px 0px; 
}
#header-container{
width:100%;
}
#header-box{
width:1090px;
margin:0px auto;
#header-box{
margin:50px auto 0px auto;
}   
}
#slideshow-container{
width:1090px;   
margin:30px auto 48px auto;
}
#headerimage-container{
width:1090px;   
margin:48px auto 0px auto;
}
#slide-top, #headerimage-top{
width:1090px;
height:99px;
background-image:url(../images/bg-top-slide2.png);
background-repeat:no-repeat;
position:absolute;
z-index:100;
float:left; 
```

# c++ - 跟踪变量访问（c/c++）？

> ID：12254706
> 
> 赞同：0
> 
> 时间：2012-09-03T22:34:12.100
> 
> 标签：c++, c

不确定是否可行...我正在阅读大型软件代码，有时在跟踪如何访问某些变量时会感到迷茫。

如果有工具/方法可以追踪它，那就太好了。

更具体地说，假设我有以下课程。

```
class A
{
  public:
    int _a;
};

... 
```

并且无论何时

```
... = ...->_a; 
```

在运行时，我想打印出 FILE 和 LINE。感谢您的建议。

PS，我可以 grep 所有“->_a”的出现，但这也很难理清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:47:21.283

代替：

```
class A
{
  public:
    int _a;
}; 
```

你可以这样做：

```
#include <iostream>

class Integer
{
public:
    Integer(int value) : value(value)
    {
    }

    operator int()
    {
        std::cout << "Integer called\n";
        return value;
    }
private:
    int value;
};

class A
{
public:
    A() : _a(5) {}
    Integer _a;
};

int main(int argc, char *argv[])
{
    A a;
    std::cout << a._a << std::endl;

    return 0;
} 
```

按照你的例子：

*   创建一个类并提供隐式转换的运算符；

*   用您的成员变量替换这个新类。

隐式转换运算符将完成这项工作。

它将打印：

> 整数调用
> 
> 5

提示：永远不要让成员变量公开。始终提供访问器方法。

**编辑**

抱歉，我忘记了**FILE**和**LINE**：

我没有找到注入**LINE**或**FILE**的方法，因为隐式转换将在运行时完成，而在预处理下进行宏替换。

您可以做的是在隐式转换函数处放置一个断点，正如@veer 所指出的那样，并手动跟踪每个调用。

**编辑 2**

至少可以在运行时看到调用堆栈。

在 Linux 上，这可以通过[execinfo](http://www.kernel.org/doc/man-pages/online/pages/man3/backtrace.3.html)完成，在 Windows 上可以通过[StackWalker](http://www.codeproject.com/Articles/11132/Walking-the-callstack)完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:05:13.963

您可以使用[OpenGrok](http://opengrok.github.io/OpenGrok/)或[Source Navigator](http://sourcenav.berlios.de/)之类的工具来查找所有事件。这是静态分析，不是运行时，但比 grep 更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T02:59:45.073

调试 C 代码的最强大工具之一是 GDB。对于您的特定需要，您可以使用 GDB 中的 watch/awatch/rwatch 命令来识别访问变量（读/写）时的点。一旦程序执行在这些点停止，您可以使用`print`检查或设置该变量的值。

有关进一步说明，请参阅[此链接](http://www.technochakra.com/debugging-types-of-data-breakpoints-in-gdb/)。

# c# - linq to sql 无法访问已处置的对象。返回一个新创建的对象

> ID：12254707
> 
> 赞同：0
> 
> 时间：2012-09-03T22:34:14.793
> 
> 标签：c#, linq-to-sql

我只是在创建一个具有一对关系的新对象。对用户关系的评论。当我尝试检索新对象时，我收到错误无法访问已处置的对象。我不确定发生了什么。感谢您的任何帮助或建议。

```
 using (var db = new LinqEntityDataContext())
            {

                var comment = new Comment();
                comment.CommentBy = GlobalVariables.User.ID;
                comment.OutPutMessage = commentText.Trim();
                comment.PhotoID = int.Parse(pictureID);
                comment.CommentDate = DateTime.Now;
                db.Comments.InsertOnSubmit(comment);
                db.SubmitChanges();
                return comment;
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:46:48.513

您需要`return comment;`在最后一个括号之后设置。

您正在 Dispose 之前完成该功能，这就是您获得异常的原因

像这样的东西。

```
 var comment = new Comment();
 using (var db = new LinqEntityDataContext())
            {               
                comment.CommentBy = GlobalVariables.User.ID;
                comment.OutPutMessage = commentText.Trim();
                comment.PhotoID = int.Parse(pictureID);
                comment.CommentDate = DateTime.Now;
                db.Comments.InsertOnSubmit(comment);
                db.SubmitChanges();              
            }
  return comment; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:29:07.880

因此，要理解我猜想使用 Linq to SQL，您必须进行两次调用，一次插入而不是另一次调用，以获取具有关联的数据。所以在我的代码中，我只有两个 using 语句，第二个只是调用来获取创建的 id 对象（对我来说似乎是多余的）。我希望有人可以发布或将此发布指向真正的解决方案。

# jquery - jQuery 提交不会使用 Wordpress 的 WP-user-frontend 插件提交

> ID：12254708
> 
> 赞同：1
> 
> 时间：2012-09-03T22:34:25.403
> 
> 标签：jquery, wordpress

我正在开发一个 WordPress 项目，我的客户允许来宾作者提交帖子，但无法弄清楚 Wordpress 管理部分，特别是如何在他们的帖子中嵌入 YouTube 视频。我添加了允许来自 Wordpress 前端的帖子的 wp-user-frontend 插件。我在表单中添加了一个自定义字段，我试图在表单提交之前拦截表单的提交以连接两个值。

我可以提醒文本框的值和文本区域的值，但是当我尝试连接时，什么也没有发生。

非常感谢以下 jQuery 代码的任何帮助：

```
<script type="text/javascript">
    (function($){
        $('#wpuf_new_post_form').submit( function(){
            var value = $('#new-post-desc_ifr').contents().find('#tinymce').html();
            var tube = $('#cf_YouTube').val();
            var new_val = '';

            if( $.trim(tube).length) {
                new_val += value;
                new_val += '<br><iframe width="560" height="315" src="http://www.youtube.com/embed/';
                new_val += tube;
                new_val += '" frameborder="0" allowfullscreen></iframe>';
                $('#new-post-desc').val( new_val );
            } // end if

            return true;
        });
    })(jQuery); // END self-invoking anonymous function
    /*************************************************/
</script> 
```

我编辑了代码以消除我的 STUPID 错误，现在表单发布，但它仍然发布 textarea 的内容并忽略视频代码。除了愚蠢的php错误之外还有什么问题的任何想法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:37:16.757

它是`+=`集中在 Javascript 中，而不是`.=`在 PHP 中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:37:35.843

什么都没有发生，因为`.=`不是用于字符串连接的有效 javascript 运算符。那是php。改为使用`+=`。

# c# - 客户端服务器身份验证

> ID：12254710
> 
> 赞同：4
> 
> 时间：2012-09-03T22:34:49.257
> 
> 标签：c#, sockets, authentication, client, communication

我正在创建一个基于异步套接字的客户端服务器通信，我的客户端会将用户名和密码发送到服务器，然后服务器将重播帐户是否有效，所以我想保护这个步骤，所以没有人可以记录对话并保留将其发送给我的客户以实现对秘密数据的非法访问

[问题{简化}] 如何安全地向服务器验证客户端...？

[注意] 我知道 SSL，但我买不起证书，所以我需要一个免费的替代方案来提供我的客户端和服务器之间的安全通信。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T22:51:28.717

与往常一样，最安全的密码是服务器不知道且永远不会传输的密码。所以你可以做的是：

*   在服务器上，存储用户名、随机加盐（“帐户加盐”）和加盐密码的安全散列（“服务器共享密钥”）。
*   登录时，第一步让客户端只传输用户名（不是秘密）
*   服务器应回复帐户 salt（非机密）和随机生成的会话 salt（非机密）。重要的是，**服务器**生成会话盐。
*   在客户端上，使用帐户 salt 对密码进行加盐并对其进行哈希处理（将此保留为“客户端共享机密”），然后使用会话 salt 对结果进行加盐并再次对其进行哈希处理。将此作为身份验证令牌（非机密）传输
*   在服务器上，从您的数据库中获取加盐散列，用会话盐加盐并散列它 - 如果这与身份验证令牌匹配，则连接已通过身份验证。（客户端通过服务器身份验证）

*   如果您想向客户端额外验证服务器，请重复该过程：客户端生成一个盐，服务器通过对存储的秘密进行加盐/散列处理从中创建令牌。

*   如果您想验证单个请求（不仅是连接），请使用共享密钥对其进行加盐并对其进行哈希处理，并将其作为每个请求的身份验证字段发送。由于在一个有效的登录服务器共享密钥和客户端共享密钥是相同的，双方应该得出相同的结果，从而验证身份验证字段。

![在此处输入图像描述](../Images/b78615883da32901907b2264c0a29464.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T22:54:28.383

我通常会告诉人们，如果他们发现自己在做加密，他们就是在制造安全问题。:) 你错过边缘情况的可能性很大。我建议依靠已经存在并得到严格保护的东西。

如果您使用托管套接字，则有一个流类版本可以为您执行加密 (NegotiateStream)。我建议从那里开始，看看它是否可以满足您的需求，而无需您自己发明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T23:32:07.813

您可以使用公钥和对称密钥的组合来保护身份验证。

首先发送一个公钥，让客户端发送加密后的身份验证数据。如果数据有效，您可以让客户端生成自己的公钥，并通过彼此的公钥相互发送对称密钥。

像这样的东西应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-30T01:08:30.823

我知道这是几年前发布的，但我想我现在会在这里添加我自己的两美分。在过去的几年里，情况发生了变化。这可能对其他人有所帮助。

我不想从 Eugen 那里拿走任何东西，出色的工作。

加密客户端和服务器之间的流量的最佳方式仍然是使用 SSL/TLS。您现在可以从[https://letsencrypt.org/](https://letsencrypt.org/)获得免费许可证。

听起来您已经弄清楚了 SSL，所以我将使用您从上述链接获得的免费证书插入

祝你好运 - 安德鲁

# perl - 如何在while循环（perl）中为另一段代码保留前一行文本中的变量？

> ID：12254713
> 
> 赞同：2
> 
> 时间：2012-09-03T22:34:52.737
> 
> 标签：perl, text

我是 Perl 的新手，无法找到这个特定问题的答案。我正在解析一些文本。我希望将一行中的一些条目用作其他行的输入。在下面，我希望将 $sec 用于以“M”开头的消息。我的代码如下：

```
#identify the type of message here:
my $message = substr $_, 0, 1;

if ($message eq "T") {

    my $sec = substr $_, 1, 5;

    #no ms entry here
    my $ms = 66666;

    push @add_orders, $_;
    print add_order_file "$sec, $ms\n";  
}

if ($message eq "M") {

    my $ms=substr $_, 1, 3;
    push @add_orders, $_;

    #I want $sec to be from the previous 
    print add_order_file "$sec, $ms \n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:40:26.950

在循环之前和之外声明`$sec`变量，这样值可以在迭代之间保持不变。

```
my $sec;

# The loop - I've guessed it's a while loop iterating over lines in a file.
while ( <> ) {

    my $message = substr $_,0,1;

    if ( $message eq "T" ) {
        # Assign to $sec here
    }
    if ( $message eq "M" ) {
        # Use $sec here
    }

} # End of the loop. 
```

这里有很多假设：如果 a 后面有多个`M`s，`T`它们都使用相同的`$sec`值，等等。

# tsql - SQL查询计算给定时间范围内的记录数，填补空白

> ID：12254715
> 
> 赞同：0
> 
> 时间：2012-09-03T22:35:15.453
> 
> 标签：tsql

我正在尝试计算在给定时间段（通常为 15 分钟）之间的记录数，但我希望将此间隔设为变量。我的表有一个日期时间列，我需要计算两个日期之间每 15 分钟间隔的记录数，当 15 分钟窗口没有任何记录时，我需要该时间段为零。我尝试过以不同的组合使用 CTE，但无法正常工作。我可以使用 CTE 生成日期系列，但无法获得结果中的实际数据。我有一个使用带有 WHILE 循环的存储过程的工作解决方案。我希望尽可能避免这种情况，以支持或更优雅的解决方案。

这是我使用临时表的工作循环：

```
declare @record_count int = 0
declare @end_date_per_query datetime
create table #output (
    SessionIdTime datetime,
    CallCount int)
while @date_from < @date_to
begin   
    set @end_date_per_query = DATEADD(minute, @interval, @date_from)
    select @record_count = COUNT(*) from tbl WHERE SessionIdTime between @date_from and @end_date_per_query
    insert into #output values (@date_from, @record_count)
    set @date_from = @end_date_per_query
end
select * from #output order by sessionIdTime
drop table #output 
```

希望有人可以提供更优雅的解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:04:06.767

CTE 工作得很好：

```
-- Parameters.
declare @Start as DateTime = '20120901'
declare @End as DateTime = '20120902'
declare @Interval as Time = '01:00:00.00' -- One hour.  Change to 15 minutes.
select @Start as [Start], @End as [End], @Interval as [Interval]

-- Sample data.
declare @Sessions as Table ( SessionId Int Identity, SessionStart DateTime )
insert into @Sessions ( SessionStart ) values
  ( '20120831 12:15:07' ), ( '20120831 21:51:18' ),
  ( '20120901 12:15:07' ), ( '20120901 21:51:18' ),  
  ( '20120902 12:15:07' ), ( '20120902 21:51:18' )  
select * from @Sessions

-- Summary.    
; with SampleWindows as (
  select @Start as WindowStart, @Start + @Interval as WindowEnd
  union all
  select SW.WindowStart + @Interval, SW.WindowEnd + @Interval
    from SampleWindows as SW
    where SW.WindowEnd < @End
  )
  select SW.WindowStart, Count( S.SessionStart ) as [Sessions]
    from SampleWindows as SW left outer join
      @Sessions as S on SW.WindowStart <= S.SessionStart and S.SessionStart < SW.WindowEnd
    group by SW.WindowStart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T22:49:40.657

这是你要找的吗？

```
-- setup
DECLARE @interval INT, @start DATETIME
SELECT @interval = 15, @start = '1/1/2000 0:00:00'
DECLARE @t TABLE (id INT NOT NULL IDENTITY(1,1) PRIMARY KEY, d DATETIME)
INSERT INTO @t (d) VALUES
 (DATEADD(mi, @interval * 0.00, @start)) -- in
,(DATEADD(mi, @interval * 0.75, @start)) -- in
,(DATEADD(mi, @interval * 1.50, @start)) -- out

-- query
DECLARE @result INT
SELECT @result = COUNT(*) FROM @t
WHERE d BETWEEN @start AND DATEADD(mi, @interval, @start)

-- result
PRINT @result 
```

# list - 如何防止在列表中选择项目

> ID：12254718
> 
> 赞同：0
> 
> 时间：2012-09-03T22:36:22.193
> 
> 标签：list, apache-flex, flex4, flex-spark

如何防止在列表中选择项目？假设您想将其用于显示或其他原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:42:38.337

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～～～～～～～～～～～～～～解决方法一
～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~
像这样在更改的处理程序中调用 preventDefault ：

```
<s:List id="list" dataProvider="{myCollection}" changing="list_changingHandler(event)"/> 
```

列表更改处理程序：

```
protected function list_changingHandler(event:IndexChangeEvent):void {
    var item:Object = list.dataProvider.getItemAt(event.newIndex);

    event.preventDefault();
} 
```

event.preventDefault(); 防止项目被选中。如果您正在使用 ArrayCollection，前面的代码允许您获取将要选择的项目。对于其他类型的数据列表或集合，它可能略有不同。

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～～～～～～～～～～～～～～解决方法二～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~ 你还可以通过在 mouseDown 事件上调用 stopPropagation 方法来防止在项目渲染器中选择项目，如下所示：

```
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" >

    <s:CheckBox id="enabledCheckbox" mouseDown="event.stopPropagation();"/>

</s:ItemRenderer> 
```

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~解决方案3
~~~~~~~~~~~~~~~~~~ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~~~~~~~~ @RIAstar 提到在ItemRenderer 中设置为false。

# c++ - Gram-Schmidt Orthogonalization 不正确的实现

> ID：12254720
> 
> 赞同：1
> 
> 时间：2012-09-03T22:36:51.303
> 
> 标签：c++, math, linear-algebra

我正在构建一个基于 OpenGL3 的免费开源 3D 游戏引擎（这不是学校作业，而是用于个人技能发展并回馈开源社区）。我已经到了需要学习大量相关数学的阶段，所以我正在阅读一本很棒的教科书，名为“Mathematics for 3D Game Programming and Computer Graphics, 3rd Edition”。

不过，我在尝试做本书的练习时遇到了障碍，因为我在 C++ 中实现“Gram-Schmidt Orthogonalization algorithm”的尝试输出了错误的答案。我不是数学专家（尽管我正在努力变得更好），而且我在查看数学算法并将其转换为代码方面的经验非常有限（仅限于我从 Udacity.com 学到的一些东西）。无论如何，如果有人可以查看我不正确的代码并给我提示或解决方案，那将真的很有帮助。

这里是：

```
/*
The Gram-Schmidt Orthogonalization algorithm is as follows:

    Given a set of n linearly independent vectors Beta = {e_1, e_2, ..., e_n},
    the algorithm produces a set Beta' = {e_1', e_2', ..., e_n'} such that
    dot(e_i', e_j') = 0 whenever i != j.

    A. Set e_1' = e_1
    B. Begin with the index i = 2 and k = 1
    C. Subtract the projection of e, onto the vectors e_1', e_2', ..., e_(i-1)'
       from e_i, and store the result in e_i', That is,

                             dot(e_i, e_k')
       e_i' = e_i - sum_over(-------------- e_k')
                                e_k'^2

    D. If i < n, increment i and loop back to step C.
*/

#include <iostream>
#include <glm/glm.hpp>

glm::vec3 sum_over_e(glm::vec3* e, glm::vec3* e_prime, int& i)
{
    int k = 0;
    glm::vec3 result;

    while (k < i-2)
    {
        glm::vec3 e_prime_k_squared(pow(e_prime[k].x, 2), pow(e_prime[k].y, 2), pow(e_prime[k].z, 2));
        result += (glm::dot(e[i], e_prime[k]) / e_prime_k_squared) * e_prime[k];
        k++;
    }

    return result;
}

int main(int argc, char** argv)
{
    int n = 2;  // number of vectors we're working with
    glm::vec3 e[] = {
        glm::vec3(sqrt(2)/2, sqrt(2)/2, 0),
        glm::vec3(-1, 1, -1),
        glm::vec3(0, -2, -2)
    };

    glm::vec3 e_prime[n];
    e_prime[0] = e[0];  // step A

    int i = 0;  // step B

    do  // step C
    {
        e_prime[i] = e[i] - sum_over_e(e, e_prime, i);

        i++;    // step D
    } while (i-1 < n);

    for (int loop_count = 0; loop_count <= n; loop_count++)
    {
        std::cout << "Vector e_prime_" << loop_count+1 << ": < " 
                  << e_prime[loop_count].x << ", " 
                  << e_prime[loop_count].y << ", " 
                  << e_prime[loop_count].z << " >" << std::endl;
    }

    return 0;
} 
```

此代码输出：

```
Vector e_prime_1: < 0.707107, 0.707107, 0 >
Vector e_prime_2: < -1, 1, -1 >
Vector e_prime_3: < 0, -2, -2 > 
```

但正确的答案应该是：

```
Vector e_prime_1: < 0.707107, 0.707107, 0 >
Vector e_prime_2: < -1, 1, -1 >
Vector e_prime_3: < 1, -1, -2 > 
```

**编辑：**这是产生正确答案的代码：

```
#include <iostream>
#include <glm/glm.hpp>

glm::vec3 sum_over_e(glm::vec3* e, glm::vec3* e_prime, int& i)
{
    int k = 0;
    glm::vec3 result;

    while (k < i-1)
    {
        float e_prime_k_squared = glm::dot(e_prime[k], e_prime[k]);
        result += ((glm::dot(e[i], e_prime[k]) / e_prime_k_squared) * e_prime[k]);
        k++;
    }

    return result;
}

int main(int argc, char** argv)
{
    int n = 3;  // number of vectors we're working with
    glm::vec3 e[] = {
        glm::vec3(sqrt(2)/2, sqrt(2)/2, 0),
        glm::vec3(-1, 1, -1),
        glm::vec3(0, -2, -2)
    };

    glm::vec3 e_prime[n];
    e_prime[0] = e[0];  // step A

    int i = 0;  // step B

    do  // step C
    {
        e_prime[i] = e[i] - sum_over_e(e, e_prime, i);

        i++;    // step D
    } while (i < n);

    for (int loop_count = 0; loop_count < n; loop_count++)
    {
        std::cout << "Vector e_prime_" << loop_count+1 << ": < " 
                  << e_prime[loop_count].x << ", " 
                  << e_prime[loop_count].y << ", " 
                  << e_prime[loop_count].z << " >" << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:46:43.257

问题可能出在您定义的方式上`e_k'^2`。就向量数学而言，向量的平方通常被视为其范数的平方。所以，

```
double e_prime_k_squared = glm::dot(e_prime_k, e_prime_k); 
```

此外，除以向量是未定义的（我想知道为什么 GLM 允许这样做？），所以如果`e_k'^2`是向量，则整个事情都是未定义的。

# .net - VS 2012 在启动时创建新文件夹

> ID：12254726
> 
> 赞同：3
> 
> 时间：2012-09-03T22:37:28.533
> 
> 标签：.net, visual-studio, visual-studio-2012

每次我运行 VS 2012 时，它都会在 My Documents Visual Studio 11 下创建新文件夹。它指向该文件夹下的起始页文件夹。很可能那里有一些配置指向此文件夹的起始页和代码片段（它也创建此文件夹）。你能告诉我如何以及在哪里可以更改此配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:41:42.173

尝试更改默认路径 - 查看`Options`对话框，然后转到`Projects And Solutions > General`.

（我在看一个不同的版本，但我认为它不会离这里太远）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:39:58.360

而且您还需要在导入和导出设置中更改路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T15:34:19.740

打开 Regedit，然后浏览到：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0 
```

在这里，您可以为许多不同的项目设置默认目录。

# video - 如何检测视频是否正在通过渐进式下载或流媒体处理

> ID：12254734
> 
> 赞同：0
> 
> 时间：2012-09-03T22:38:24.777
> 
> 标签：video, streaming, video-streaming, progressive-download, brightcove

我们正在从渐进式下载架构转向视频的流式/自适应架构。那么有没有一种简单的方法来检测视频是通过渐进式下载处理还是流式传输。我不喜欢闪存，所以这可能是一个新手问题，但有人可以给我他们的意见，我如何检测它是渐进式下载还是流式传输。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:18:44.757

如果您只需要检查所有视频，请使用[媒体 API](http://docs.brightcove.com/en/media/#Video_Read)并检查 videoFullLength 属性的前四个字符。如果视频仅是渐进式下载，则 url 将以“http”开头。如果是流式传输，它将以“rtmp”开头。

如果您想在播放期间检查视频的交付，您还可以使用 Player API 来获取信息，使用视频播放器模块的[getCurrentVideo()](http://docs.brightcove.com/en/smart-player-api/symbols/brightcove.api.modules.VideoPlayerModule.html#getCurrentVideo)方法，因为这会返回[视频 DTO](http://support.brightcove.com/en/docs/media-api-objects-reference#Video)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:00:09.693

我猜你问的是在你的帐户上设置 UDS 的情况吗？否则我认为交付方法是在帐户级别建立的。请参阅[内容交付选项文档](http://support.brightcove.com/en/docs/content-delivery-options#types) 您可以查看论坛以获取[一些答案](http://forum.brightcove.com/t5/Flash-Only-Player-APIs/Progressive-or-streaming-download/m-p/11884/highlight/true#M1886)

# ios - 如何追踪“释放对象的错误校验和”

> ID：12254739
> 
> 赞同：0
> 
> 时间：2012-09-03T22:39:42.297
> 
> 标签：ios, debugging, crash, malloc

我花了相当长的时间试图追踪这个问题，并从其他有相同问题的人那里阅读多个建议。我处理的是一个庞大的代码库，所以在没有任何提示的情况下找到问题就像在干草堆中寻找针一样。

我读到的建议是在 *malloc_error_break* 上添加一个断点 - 但我该怎么做。我知道我必须添加一个符号断点，但我不确定在符号和模块这两个文本字段中究竟输入什么？

我尝试启用 Malloc Scribble 和 Malloc Guard Edges - 但都不会导致任何断点或崩溃。

如果我启用 Zombie Objects，程序将停止崩溃，但输出日志中没有显示任何问题。

最后我尝试启用 Guard Malloc。我知道它只适用于模拟器，所以我尝试了 - 但问题是程序在我的程序中的任何行执行之前在启动阶段崩溃：

```
0x958e0cd4  <+0000>  mov    0x4(%esp),%eax
0x958e0cd8  <+0004>  mov    %gs:0x0(,%eax,4),%eax   < Crash
0x958e0ce0  <+0012>  ret 
```

调用堆栈如下所示：

```
pthread_getspecific
__dyld__dyld_start 
```

我不确定我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:03:14.613

要在 malloc_error_break 上添加断点，只需在调试器中停止并`b malloc_error_break`在“gdb”或“lldb”提示符处键入。

# scrapy - Scrapy HtmlXPathSelector

> ID：12254740
> 
> 赞同：5
> 
> 时间：2012-09-03T22:39:52.467
> 
> 标签：scrapy

只是尝试scrapy并试图让一个基本的蜘蛛工作。我知道这可能只是我想念的东西，但我已经尝试了我能想到的一切。

我得到的错误是：

```
line 11, in JustASpider
    sites = hxs.select('//title/text()')
NameError: name 'hxs' is not defined 
```

我的代码目前非常基本，但我似乎仍然找不到哪里出错了。谢谢你的帮助！

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

class JustASpider(BaseSpider):
    name = "google.com"
    start_urls = ["http://www.google.com/search?hl=en&q=search"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//title/text()')
        for site in sites:
            print site.extract()

SPIDER = JustASpider() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-04T06:28:46.960

代码看起来很旧的版本。我建议改用这些代码

```
from scrapy.spider import Spider
from scrapy.selector import Selector

class JustASpider(Spider):
    name = "googlespider"
    allowed_domains=["google.com"]
    start_urls = ["http://www.google.com/search?hl=en&q=search"]

    def parse(self, response):
        sel = Selector(response)
        sites = sel.xpath('//title/text()').extract()
        print sites
        #for site in sites: (I dont know why you want to loop for extracting the text in the title element)
            #print site.extract()
```

希望它有所帮助，[这](https://github.com/scrapy/dirbot/blob/master/dirbot/spiders/dmoz.py)是一个很好的例子。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T16:27:07.540

我在最后删除了 SPIDER 调用并删除了 for 循环。只有一个标题标签（正如人们所期望的那样），它似乎正在摆脱循环。我工作的代码如下：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

class JustASpider(BaseSpider):
    name = "google.com"
    start_urls = ["http://www.google.com/search?hl=en&q=search"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        titles = hxs.select('//title/text()')
        final = titles.extract() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T23:22:51.477

我有一个类似`NameError: name 'hxs' is not defined`的问题，以及与空格和制表符有关的问题：IDE 使用空格而不是制表符，您应该检查一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T05:14:58.653

代码看起来正确。

在最新版本的 Scrapy
HtmlXPathSelector 中已弃用。使用选择器：

```
hxs = Selector(response)
sites = hxs.xpath('//title/text()') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T04:47:16.153

确保您正在运行您向我们展示的代码。

尝试删除`*.pyc`项目中的文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-19T15:01:00.200

这对我有用：

1.  将文件另存为`test.py`
2.  使用命令`scrapy runspider <filename.py>`

例如：

```
scrapy runspider test.py 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-21T19:20:27.290

这只是一个演示，但它有效。需要定制offcourse。

```
#!/usr/bin/env python

from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector

class DmozSpider(BaseSpider):
    name = "dmoz"
    allowed_domains = ["dmoz.org"]
    start_urls = [
        "http://www.dmoz.org/Computers/Programming/Languages/Python/Books/",
        "http://www.dmoz.org/Computers/Programming/Languages/Python/Resources/"
    ]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select('//ul/li')
        for site in sites:
            title = site.select('a/text()').extract()
            link = site.select('a/@href').extract()
            desc = site.select('text()').extract()
            print title, link, desc 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-26T05:38:32.857

你应该改变

```
from scrapy.selector import HtmlXPathSelector 
```

进入

```
from scrapy.selector import Selector 
```

并`hxs=Selector(response)`改为使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-11T19:13:57.913

我将 Scrapy 与 BeautifulSoup4.0 一起使用。对我来说，汤很容易阅读和理解。如果您不必使用 HtmlXPathSelector，这是一个选项。希望这可以帮助！

```
import scrapy
from bs4 import BeautifulSoup
import Item

def parse(self, response):

    soup = BeautifulSoup(response.body,'html.parser')
    print 'Current url: %s' % response.url
    item = Item()
    for link in soup.find_all('a'):
        if link.get('href') is not None:
            url = response.urljoin(link.get('href'))
            item['url'] = url
            yield scrapy.Request(url,callback=self.parse)
            yield item 
```

# php - 将值从 JS 传递到 PHP 时出错

> ID：12254743
> 
> 赞同：-1
> 
> 时间：2012-09-03T22:40:19.563
> 
> 标签：php, javascript, html

我正在尝试使用 POST 方法将值从 javascript 传递给 php，但它不起作用。这是代码：

```
<head>
<script type="text/javascript">
function Email()
{

    var e=prompt("Your Email","");
    if(e==null||e=="")
    {
    alert("You need to enter an email..Try again");
    Email();
    }

    return e;
}
function Code()
{

    var f=prompt("Activation code","");
    if(f==null||f=="")
    {
    alert("You need to enter the code..Try again");
    Code();
    }

    return f;
}
</script>
</head>
<body>
<form method="post">
<input type="hidden" id="Email" name="Email" />
<input type="hidden" id="Code" name="Code" />
</form> 
<script>
var email=Email();
var code=Code();
document.getElementByID("Email").value=email;
document.getElementByID("Code").value=code;
</script>

<?php
$email=$_POST["Email"];
$code=$_POST["Code"];

echo $email.$code;
?>
</body> 
```

我收到这些错误：

*   注意：未定义索引：电子邮件
*   注意：未定义索引：代码

任何人都请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:57:10.480

好吧，如果你想打印这些值，你需要创建一个表单，一个合适的表单。如果你只是想提交不需要 JS 的表单，因为如果你只是想提交一些值不需要表单，那么你想使用[jQuery Post](http://api.jquery.com/jQuery.post/)。

```
<form method="post" action="">
    <label for="email">Email</label>
    <input type="text" name="email" />

    <label for="code">Code</label>
    <input type="text" name="code" />

    <input type="submit" value="Submit" />
</form>​ 
```

小提琴：[这里](http://jsfiddle.net/JWSN7/)

## 编辑

那么[这](http://jsfiddle.net/JuaFR/)就是你想要的。（请注意，此代码使用的是[jQuery](http://jquery.com/)库）

```
$(function(){
    // Create both variables
    var code, email;

    // Ask for code and check if it's not null or empty
    do{
        code = prompt('Activation code', null);
    }
    while(code == null || code == '');

    // Ask for email and check if it's not null or empty
    do{
        email = prompt('Your email', null);
    }
    while(email == null || email == '');

    // Make POST request via AJAX to your script
    $.post('yourscript.php', { code: code, email: email }, function(data) {
        // If success alert response (in your case should be "email.data" values)
        alert(data);
    });   
}); 
```

# javascript - javascript 变量中允许的最大整数是多少？

> ID：12254749
> 
> 赞同：0
> 
> 时间：2012-09-03T22:41:29.613
> 
> 标签：javascript

> **可能重复：**
> [什么是 JavaScript 的 Max Int？Number 可以达到的最高 Integer 值是多少而不会丢失精度？](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-t)

javascript中的最大整数是多少？我有一个从 0 开始的变量，每 0.1 秒增加 100。它可以达到的最大数量是多少？

顺便说一句，我以为这个问题以前已经回答过，但我找不到。如果有答案，请给我一个链接=）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:42:50.443

JavaScript 数字是 IEE 794 浮点双精度值。有一个 53 位尾数（来自记忆），所以这几乎是限制。

现在有时 JavaScript 语义要求将数字转换为 32 位整数值，例如数组索引和位运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T23:39:36.297

javascript 变量可以具有您喜欢的任何值。如果本机支持不够，有各种库支持无限精度算术（例如[BigInt.js](http://www.leemon.com/crypto/BigInt.html)）。

[ECMAScript 数字类型](http://ecma-international.org/ecma-262/5.1/#sec-4.3.19)的最大值是 +ve 无穷大（但无穷大不是一个数字，它是一个概念）。最大数值由 Number.MAX_VALUE 给出，它只是[IEEE 754 64 位双精度数](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)可表示的最大值。

一些怪癖：

```
var x = Number.MAX_VALUE;
var y = x - 1;
var z = x - 2;

x == y; // true
x == z; // false 
```

ECMAScript 中可表示的连续整数的范围是从 -2^53 到 +2^53。最大指数为 2^1023。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T22:44:30.873

这是`1.7976931348623157e+308`

自己尝试编码

代码

```
alert(Number.MAX_VALUE); 
```

[http://jsfiddle.net/XHcZx/](http://jsfiddle.net/XHcZx/)

# python - 将 Google Ajax 搜索转换为 python 字典

> ID：12254754
> 
> 赞同：0
> 
> 时间：2012-09-03T22:42:03.407
> 
> 标签：python, ajax, json, eval

我试图编写一个脚本来获取谷歌的 ajax 搜索结果（例如：[http](http://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=filetype:pdf) ://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=filetype:pdf ）并下载每个文件。现在我一直在尝试将响应转换为 python 字典，以便更容易通过。

```
import subprocess
import ast

subprocess.call("curl -G -d 'q=filetype:pdf&v=1.0' http://ajax.googleapis.com/ajax/services/search/web  > output",stderr=subprocess.STDOUT,shell=True)
file = open('output','r')
contents = file.read()
output_dict = ast.literal_eval(contents)
print output_dict 
```

当我运行它时，我得到：

```
$ python script.py 
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                               Dload  Upload   Total   Spent    Left  Speed
100  2643    0  2643    0     0  15926      0 --:--:-- --:--:-- --:--:-- 26696
Traceback (most recent call last):
  File "script.py", line 7, in <module>
    output_dict = ast.literal_eval(contents)
  File "/usr/lib/python2.7/ast.py", line 80, in literal_eval
    return _convert(node_or_string)
  File "/usr/lib/python2.7/ast.py", line 63, in _convert
    in zip(node.keys, node.values))
  File "/usr/lib/python2.7/ast.py", line 62, in <genexpr>
    return dict((_convert(k), _convert(v)) for k, v
  File "/usr/lib/python2.7/ast.py", line 79, in _convert
    raise ValueError('malformed string')
ValueError: malformed string 
```

该文件如下所示：

```
{"responseData": {"results":[{"GsearchResultClass":"GwebSearch",
                                    "unescapedUrl":"http://www.foundationdb.com/AlphaLicenseAgreement.pdf",
                                             "url":"http://www.foundationdb.com/AlphaLicenseAgreement.pdf",
                                      "visibleUrl":"www.foundationdb.com",
                                        "cacheUrl":"http://www.google.com/search?q\u003dcache:W7zhFlfbm6UJ:www.foundationdb.com",
                                           "title":"FoundationDB Alpha Software Evaluation License Agreement",
                               "titleNoFormatting":"FoundationDB Alpha Software Evaluation License Agreement",
                                         "content":"FOUNDATIONDB. ALPHA SOFTWARE EVALUATION LICENSE AGREEMENT.   PLEASE READ CAREFULLY THE TERMS OF THIS ALPHA SOFTWARE \u003cb\u003e...\u003c/b\u003e",
                                      "fileFormat":"PDF/Adobe Acrobat"
                             },
                             {"GsearchResultClass":"GwebSearch",
                                    "unescapedUrl":"https://subreg.cz/registration_agreement.pdf",
                                             "url":"https://subreg.cz/registration_agreement.pdf",
                                      "visibleUrl":"subreg.cz",
                                        "cacheUrl":"http://www.google.com/search?q\u003dcache:ODtRmQsiHD0J:subreg.cz",
                                           "title":"Registration Agreement",
                               "titleNoFormatting":"Registration Agreement",
                                         "content":"Registration Agreement. In order to complete the registration process you must   read and agree to be bound by all terms and conditions herein. TERMS AND \u003cb\u003e...\u003c/b\u003e",
                                      "fileFormat":"PDF/Adobe Acrobat"
                             },
                             {"GsearchResultClass":"GwebSearch",
                                    "unescapedUrl":"http://supportdetails.com/export.pdf",
                                             "url":"http://supportdetails.com/export.pdf",
                                      "visibleUrl":"supportdetails.com",
                                        "cacheUrl":"http://www.google.com/search?q\u003dcache:h0LvxrTTKzIJ:supportdetails.com",
                                           "title":"Export PDF - Support Details",
                               "titleNoFormatting":"Export PDF - Support Details",
                                         "content":"",
                                      "fileFormat":"PDF/Adobe Acrobat"
                             },
                             {"GsearchResultClass":"GwebSearch",
                                    "unescapedUrl":"http://www.fws.gov/le/pdf/travelpetbird.pdf",
                                             "url":"http://www.fws.gov/le/pdf/travelpetbird.pdf",
                                      "visibleUrl":"www.fws.gov",
                                        "cacheUrl":"",
                                           "title":"pet bird",
                               "titleNoFormatting":"pet bird",
                                         "content":"U.S. Fish \u0026amp; Wildlife Service. Traveling Abroad with. Your Pet Bird. The Wild Bird   Conservation Act (Act), a significant step in international conservation efforts to \u003cb\u003e...\u003c/b\u003e",
                                      "fileFormat":"PDF/Adobe Acrobat"
                             }],
                  "cursor":{"resultCount":"72,800,000",
                                  "pages":[{"start":"0","label":1},
                                           {"start":"4","label":2},
                                           {"start":"8","label":3},
                                           {"start":"12","label":4},
                                           {"start":"16","label":5},
                                           {"start":"20","label":6},
                                           {"start":"24","label":7},
                                           {"start":"28","label":8}],
                            "estimatedResultCount":"72800000",
                            "currentPageIndex":0,
                             "moreResultsUrl":"http://www.google.com/search?oe\u003dutf8\u0026ie\u003dutf8\u0026source\u003duds\u0026start\u003d0\u0026hl\u003den\u0026q\u003dfiletype:pdf","searchResultTime":"0.04"
                           }
                  },
  "responseDetails": null,
  "responseStatus": 200
 } 
```

花了很长时间才格式化的上帝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:43:59.940

Google 返回 JSON，因此请使用该[`json`模块](http://docs.python.org/library/json.html)而不是您现在使用的 ast 模块。

```
file = open('output','r')
output_dict = json.load(file) 
```

您可能还想研究[`urllib2`模块](http://docs.python.org/library/urllib2.html)以加载 URL 响应，而不是依赖 curl。

# android - 如何在 AS3 Air 中压缩/解压缩？

> ID：12254756
> 
> 赞同：0
> 
> 时间：2012-09-03T22:42:08.553
> 
> 标签：android, actionscript-3, air, zip, unzip

如何在 Air 中使用 as3 压缩和解压缩文件。我正在使用 Flash Professional 进行编码。

我已经尝试了几个教程，但无法获得它。我正在为使用 Adob​​e Air 的应用程序创建这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:01:15.067

在我的示例代码下方查看。我测试过。以及如何在 Flash 中链接 SWC 文件，我之前写的问题。

这是一个示例代码。[simple_unzip](http://www.datafilehost.com/download-ee5e9ef7.html)

```
import com.coltware.airxzip.ZipEntry;
import com.coltware.airxzip.ZipError;
import com.coltware.airxzip.ZipFileReader;
import com.coltware.airxzip.*;

import flash.filesystem.File;
import flash.utils.ByteArray;
import flash.net.FileReference;
import flash.net.FileFilter;

var file:File;
var fileReference:FileReference;
var fileFilter:FileFilter;

function unzip_init():void{

    fileFilter = new FileFilter("selected your zip file.", "*.zip; *.gz2; *.bz2;");
    file = new File();
    file.browseForOpen("\Users", [fileFilter]);
    file.addEventListener(Event.SELECT, onSelectedFile);
}

function onSelectedFile(e:Event):void
{
    var reader:ZipFileReader = new ZipFileReader();
    reader.open(file);

    var list:Array = reader.getEntries();

        for each(var entry:ZipEntry in list){

                if(entry.isDirectory()){
                        trace("DIR  --->" + entry.getFilename());
                }
                else{
                        trace("FILE --->" + entry.getFilename() + "(" + entry.getCompressRate() + ")");
                }
        }
}

unzip_init(); 
```

* * *

**`how to save File?`**

这是一个示例代码：[simple_unzip2](http://www.datafilehost.com/download-dbced220.html)

* * *

```
import com.coltware.airxzip.ZipEntry;
import com.coltware.airxzip.ZipError;
import com.coltware.airxzip.ZipFileReader;
import com.coltware.airxzip.*;

import flash.filesystem.File;
import flash.utils.ByteArray;
import flash.net.FileReference;
import flash.net.FileFilter;
import flash.filesystem.FileStream;
import flash.filesystem.FileMode;

var file:File;
var fileReference:FileReference;
var fileFilter:FileFilter;
var baseDir:File = File.documentsDirectory;

function unzip_init():void{

    fileFilter = new FileFilter("selected your zip file.", "*.zip; *.gz2; *.bz2;");
    file = new File();
    file.browseForOpen("\Users", [fileFilter]);
    file.addEventListener(Event.SELECT, onSelectedFile);
}

function onSelectedFile(e:Event):void
{
    var reader:ZipFileReader = new ZipFileReader();
    reader.open(file);

    var list:Array = reader.getEntries();
    var i:int = 0;

    for each(var entry:ZipEntry in list)
    {
        var filename:String = entry.getFilename();

        if(entry.isDirectory())
        {

            trace("DIR  --->" + entry.getFilename());
            //  If entry is directory
            var dir:File = baseDir.resolvePath(filename);
            dir.createDirectory();
        }
        else
        {
            trace("FILE --->" + entry.getFilename() + "(" + entry.getCompressRate() + ")");
            var unzippedBytes:ByteArray = reader.unzip(entry);
            //trace("btyes --->" + unzippedBytes);
            var file:File = baseDir.resolvePath(entry.getFilename());
            var fs:FileStream = new FileStream();
            fs.open(file,FileMode.WRITE);
            fs.writeBytes(unzippedBytes,0,unzippedBytes.length);
            fs.close();
        }
    }
    reader.close();
}

unzip_init(); 
```

# javascript - onChange 只工作一次，并使用 getElementsByName 设置值我在页面上有各种表单，在页面顶部有一个 PHP 生成的选择。我想要做的是：用户从表单中选择一个选项。该选项的值被放入具有特定名称的所有输入中。用户可以选择另一个选项，该选项的值将替换输入的旧值。我到目前为止的代码（不起作用）：它不起作用，因为 onChange 仅在您第一次选择选项时触发，并且输入的值不会更新为所选选项的值。选择：（它可以多于或少于三个选项，具体取决于用户。） <select name="</h1>
<blockquote>
        <p>ID：12254757</p>
        <p>赞同：2</p>
        <p>时间：2012-09-03T22:42:29.083</p>
        <p>标签：javascript, select, onchange, getelementbyid</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：1</p>
            <p>时间：2012-09-03T22:49:39.937</p>
            </blockquote>

<p>在您的代码中：</p>

<pre>回答 #3 赞同：0 时间：2012-09-03T22:47:39.047 该getElementsByName()方法返回一个元素列表，因此您不能直接设置value属于列表中各个元素的属性。您需要遍历列表（它是一个 HTMLCollection，但出于此目的，您可以将其视为一个数组）： var els = document.getElementsByName("exampleform"); for(var i = 0; i < els.length; i++) els[i].value = setexample; 其余的，请参阅 RobG 的答案。<code>> function setexample(){
>   setexample = document...
</code></pre>

<p>对 setexample 的赋值会覆盖现有值（即函数 setexample）。在函数内部声明变量：</p>

<pre><code>    var setexample = document...
</code></pre>

<p>其余的，请参阅 nnnnnn 的答案。</p>

            <hr/>
            <h2>回答 #2</h2>
            <blockquote>
            <p>赞同：0</p>
            <p>时间：2012-09-03T22:56:00.070</p>
            </blockquote>

<p>你有这些问题：</p>

<ol>
<li><p>您正在覆盖函数的名称，应该使用不同名称的局部变量。</p></li>
<li><p>当它返回一个数组时，您将引用单个元素表单 getElementsByName。</p></li>
</ol>

<p>尝试这个：</p>

<pre><code><script>
function setexample(){
    var item = document.getElementById(" exampleid");="" var="" val="item.options[item.selectedIndex].value;" list="document.getElementsByName(&quot;exampleform&quot;);" for="" (var="" i="0;" &lt;="" list.lenth;="" i++)="" {="" list[i].value="val;" }="" script&gt;="" <="" code=""></select>

# jquery - 如何获取图像的原始大小-Jquery

> ID：12254759
> 
> 赞同：7
> 
> 时间：2012-09-03T22:42:29.810
> 
> 标签：jquery, height, width

# **已解决**：语法错误

以下代码有效：

```
var image = {width:0,height:0};
var imageObject = new Image();
function getImageSize(id) {
    imageObject.src = id.attr("src");
    image.width = imageObject.width;
    image.height = imageObject.height;
} 
```

* * *

# **原始问题**

我想获得图像的原始宽度和高度，并尝试了不同的代码来实现它。我的函数在点击事件时触发，所有图像都调整为 400x300。

我尝试使用以下方法将图像调整为原始大小`auto`：

```
var image = {width:0,heigth:0};
function getImageSize(id) {
    id.css({
        'width': 'auto',
        'heigth': 'auto'
    });
    image.width = id.attr('width');
    image.heigth = id.attr('heigth');
} 
```

附加`auto`并没有改变图像的大小。

`alert(id.attr('width'));`总是返回“未定义”。所以它不起作用

```
var image = {width:0,heigth:0};
var imageObject = new Image();
function getImageSize(id) {
    imageObject.src = id.attr("src");
    image.width = imageObject.width;
    image.heigth = imageObject.heigth;
} 
```

`alert(image.width);`完美运行。

`alert(image.heigth);`返回未定义。

使用`imageObject.naturalWidth`如上所述 - 正确给出了宽度，但未定义高度。

我读到您必须附加新的图像对象，但是当我使用时，我`imageObject.appendTo('body');`什至无法单击图像。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:53:32.287

这是一个简单的包含示例，将图像替换为在更改后具有其原始大小的图像。

```
<img src="http://www.finesttreeserviceaz.com/wp-content/uploads/2012/02/tree2.gif" id="bar" />
<script type="text/javascript">
    var myImg = document.getElementById("bar");
    myImg.setAttribute("style", "width:400px;height:300px;");
    function resetBar() {
        var newImg = new Image();
        var oldImage = document.getElementById("bar");
        newImg.src = oldImage.src;
        oldImage.parentNode.replaceChild(newImg, oldImage);
    }
    setTimeout("resetBar();", 2000);
</script> 
```

另一种方法是删除应用的样式：

```
myImg.removeAttribute("style"); 
```

# jquery - 移动此 jquery 灯箱的按钮

> ID：12254761
> 
> 赞同：0
> 
> 时间：2012-09-03T22:42:36.677
> 
> 标签：jquery, lightbox

[http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)

好的，我认为这是相当先进的。我有这个灯箱，但如果你看演示，你会看到“上一个”和“下一个”按钮分别出现在左上角和右上角，只有当你悬停时才会出现。

我希望它们出现在底部的关闭按钮旁边，以便它们保持不变并且始终可见。

任何人都知道我需要对代码进行哪些更改才能将其落实到位。任何帮助将不胜感激。过去一个小时一直在玩代码，不知道我在做什么，到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:49:35.763

更改 CSS jquery.lightbox-0.5.css

```
#lightbox-nav {
position: absolute;
top: 0;  /* THIS SETTING SETS THE TOP POSITION */
left: 0;
height: 100%;
width: 100%;
z-index: 10;
 } 
```

和

```
 #lightbox-nav-btnPrev { 
left: 0; /* THIS SETTING SETS THE LEFT POSITION FOR PREV */
float: left;
 }
#lightbox-nav-btnNext { 
right: 0; /* THIS SETTING SETS THE RIGHT POSITION FOR NEXT */
float: right;
 } 
```

以满足您的需求...

# asp.net - localhost url中的奇怪文字

> ID：12254765
> 
> 赞同：4
> 
> 时间：2012-09-03T22:42:57.410
> 
> 标签：asp.net

我使用的是开发服务器，而不是 IIS（我认为），当我尝试浏览到我正在处理的页面时，我的 url 字符串的显示方式有所不同。

他们通常的样子；localhost:44044/Account/Register.aspx

现在它们看起来像这样；localhost:44044/(S(rzoxv2lrex3xsh1o1lsfdnpf))/Account/Register.aspx

有没有人知道 localhost 之后的那个部分来自哪里？而且我想知道这是否是我现在尝试运行页面时收到指定转换错误的原因（它之前工作过）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T22:45:33.070

看起来像ASP.Net 中的无[cookie 会话标识符](http://msdn.microsoft.com/en-us/library/aa479314.aspx)。这是由应用程序在 web.config 中的配置方式引起的。

检查：`<sessionState cookieless="true" />`在 web.config 或 machine.config 级别。

就您的投射错误而言，我们需要查看一些代码。如果您的配置已更改（正如无 cookie 会话所暗示的那样），那么您的应用程序可能由于另一个配置更改而失败。

另请参阅：[asp.net 中的无 Cookie 会话](https://stackoverflow.com/questions/9372965/cookieless-sessions-in-asp-net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:45:13.000

如果您不允许将会话标识符存储在 cookie 中，那就是会话标识符。

如果在您的 web.config 中，在`sessionstate`节点中，您有`cookieless="true"`，那么标识符将被放入 url，以便服务器仍然可以使用它来检索用户的会话。

[在此处](http://msdn.microsoft.com/en-us/library/ms178582%28v=vs.100%29)查看 MSDN

# spring - 使用 Java 将 Outlook 电子邮件以 .MSG 格式存储到磁盘

> ID：12254766
> 
> 赞同：2
> 
> 时间：2012-09-03T22:43:08.033
> 
> 标签：spring, jakarta-mail, java

我正在使用 Spring JavaMail API 为客户生成自动电子邮件。我正在使用 SMTP 服务器发送此电子邮件。一旦电子邮件发送给客户，外发电子邮件应以 .MSG 格式存储到某个物理位置。是否有任何Java API来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:17:25.773

我相信 .MSG 是 Outlook 使用的 Microsoft 专有文件格式。我不知道有任何 Java 软件会编写这种格式，但[Apache POI 项目](http://poi.apache.org/)可以读取这种格式。最好以 .EMI 格式存储消息，这只是 MIME 格式。或者，使用您自己的邮件服务器并将邮件存储在该邮件服务器支持的文件夹中。

# php - 在最后一次出现字符之间返回字符串

> ID：12254767
> 
> 赞同：1
> 
> 时间：2012-09-03T22:43:19.193
> 
> 标签：php, regex

我正在尝试提取逗号“，”和右括号“）”之间的字符串

这是下面的字符串...

`(Punta Gorda, FL, U.S.A.)`

我希望从中提取`U.S.A`

我当前使用的正则表达式返回`FL, U.S.A.`

这是通过以下正则表达式完成的`(?<=,).*(?=\))`

修改正则表达式以实现我的目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:53:22.583

如果您不想使用正则表达式，这也可以：

```
$string = "(Punta Gorda, FL, U.S.A.)";
$last_occurence = strrpos($string, ",");
$country = substr($string, $last_occurence + 1, strlen($string) - $last_occurence - 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:48:25.730

改用这个：

```
(?<=,\s)[^,]*(?=\)) 
```

请注意，您的正则表达式会在`FL, U.S.A`. 这个没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T22:49:06.503

我会用这个正则表达式：

```
([^,\s]+)(?=\)) 
```

**更新**：

```
$str = '(london, United kingdom)';

preg_match('~([^,]+)(?=\))~', $str, $matches);

var_dump($matches); 
```

# html - wellsfargo.com 如何阻止网络浏览器要求保存用户名/密码？

> ID：12254769
> 
> 赞同：0
> 
> 时间：2012-09-03T22:43:45.933
> 
> 标签：html, passwords

这让我困惑多年！（虽然我从来没有花时间去了解他们是如何做到这一点的）

基本上，您每次登录他们的网上银行时都必须输入您的用户名和密码。

没有浏览器会要求为您保存密码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:46:48.513

也许是因为`autocomplete="off"`他们的形式

# jquery - jQuery 对话框未在 Windows 7 IE9 中显示

> ID：12254775
> 
> 赞同：1
> 
> 时间：2012-09-03T22:44:23.353
> 
> 标签：jquery, internet-explorer-9

对于为什么 jQuery 对话框未显示在此页面上的一些帮助，将不胜感激。[Windows7、IE9 中的http://neenahgirlsbbc.com](http://neenahgirlsbbc.com)。它适用于 IE8、Firefox 和 Chrome。我尝试了不同的 Doctypes 和 metatags，但我无法让它工作。该图标是“为父母”，点击时应显示一个对话框。我查看了有关同一问题的其他问题并尝试了建议，但没有任何效果。有人可以看看我做错了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:58:41.293

看来您有很多不匹配的 HTML 标签，这可能是导致您出现问题的部分原因，我的建议是，查看浏览器的开发人员实用程序，对于 IE，按 F12，它们会出现。查看 Javascript 调试器，您将看到被标记为不匹配标记的确切行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:27:08.067

我找到了我的问题的答案。分页在 IE9 怪癖模式（兼容性视图）下工作，这表明问题出在 jQuery 脚本/插件上。显然，jQuery 插件因在浏览器黑客攻击方面已经过时而臭名昭著，而这些黑客攻击并未针对较新的浏览器进行过滤。所以，我不得不使用旧版本，然后它就可以工作了。

# inheritance - Haskell 中的可插拔 AI

> ID：12254776
> 
> 赞同：7
> 
> 时间：2012-09-03T22:44:29.553
> 
> 标签：inheritance, haskell

我正在用多个 AI 对手在 Haskell 中编写纸牌游戏的模拟。我想有一个类似的主要功能`GameParameters -> [AIPlayer] -> GameOutcome`。但我想将 main 函数视为“库函数”，这样我就可以编写一个新的 AIPlayer 来更改其他任何内容。

于是想到了创建一个typeclass AIPlayer，所以main函数变成了`AIPlayer a => GameParameters -> [a] -> GameOutcome`. 但这仅允许插入一种类型的 AI。所以要在一个游戏中插入多个 AIPlayers，我需要定义一个 wrappertype

```
AIWrapper = P1 AIPlayer1 | P2 AIPlayer2 | ...

instance AIWrapper AIPlayer where
     gameOperation (P1 x) = gameOperation x
     gameOperation (P2 x) = gameOperation x
     ... 
```

我对这种包装类型不满意，我觉得肯定有比这更好的东西，还是我错了？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-04T00:05:23.753

听起来您可能正在使用 Luke Palmer 所说的[存在类型类反模式](http://lukepalmer.wordpress.com/2010/01/24/haskell-antipattern-existential-typeclass/)。首先，假设您有几个 AI 播放数据类型：

```
data AIPlayerGreedy = AIPlayerGreedy { gName :: String, gFactor :: Double }
data AIPlayerRandom = AIPlayerRandom { rName :: String, rSeed   :: Int } 
```

现在，您希望通过使它们成为类型类的两个实例来使用它们：

```
class AIPlayer a where
  name     :: a -> String
  makeMove :: a -> GameState -> GameState
  learn    :: a -> GameState -> a

instance AIPlayer AIPlayerGreedy where
  name     ai    = gName ai
  makeMove ai gs = makeMoveGreedy (gFactor ai) gs
  learn    ai _  = ai

instance AIPlayer AIPlayerRandom where
  name     ai    = rName ai
  makeMove ai gs = makeMoveRandom (rSeed ai) gs
  learn    ai gs = ai{rSeed = updateSeed (rSeed ai) gs} 
```

如果您只有一个这样的值，这将起作用，但正如您所注意到的那样，可能会导致您遇到问题。但是，类型类给你带来了什么？在您的示例中，您希望`AIPlayer`统一处理不同实例的集合。由于您不知道集合中将包含哪些*特定*类型，因此您将永远无法调用类似`gFactor`or `rSeed`; 您将只能使用`AIPlayer`. 所以你所需要的只是这些函数的集合，我们可以将*它们*打包成一个普通的旧数据类型：

```
data AIPlayer = AIPlayer { name     :: String
                         , makeMove :: GameState -> GameState
                         , learn    :: GameState -> AIPlayer }

greedy :: String -> Double -> AIPlayer
greedy name factor = player
  where player = AIPlayer { name     = name
                          , makeMove = makeMoveGreedy factor
                          , learn    = const player }

random :: String -> Int -> AIPlayer
random name seed = player
  where player = AIPlayer { name     = name
                          , makeMove = makeMoveRandom seed
                          , learn    = random name . updateSeed seed } 
```

因此， An`AIPlayer`是技术诀窍的集合：它的名称、如何移动，以及如何学习和产生新的 AI 玩家。您的数据类型及其实例只是成为产生`AIPlayer`s 的函数；您可以轻松地将所有内容放在一个列表中，因为`[greedy "Alice" 0.5, random "Bob" 42]`它的类型是正确的：它的类型是`[AIPlayer]`.

* * *

确实，您*可以*使用存在类型打包您的第一个案例：

```
{-# LANGUAGE ExistentialQuantification #-}
data AIWrapper = forall a. AIPlayer a => AIWrapper a

instance AIWrapper a where
  makeMove (AIWrapper ai) gs = makeMove ai gs
  learn    (AIWrapper ai) gs = AIWrapper $ learn ai gs
  name     (AIWrapper ai)    = name ai 
```

现在，`[AIWrapper $ AIPlayerGreedy "Alice" 0.5, AIWrapper $ AIPlayerRandom "Bob" 42]`它的类型很好：它是`[AIWrapper]`. 但正如 Luke Palmer 上面的帖子所观察到的，这实际上并没有给你带来任何好处，实际上让你的生活变得更加复杂。因为它等价于更简单的无类型类案例，所以没有优势；仅当您要包装的结构更复杂时，才需要存在主义。

# java - Window JPanel 是透明的吗？

> ID：12254780
> 
> 赞同：1
> 
> 时间：2012-09-03T22:44:35.457
> 
> 标签：java, swing, user-interface

我有一个带有 4 个 JButton 和一个动作侦听器的主窗口，其中三个调用另一个窗口，第四个退出。我的两个窗口工作正常，但由于某种原因，我等待客户端连接的窗口打开，您可以看到窗口的边界，但窗口的内部是透明的。我试着`new HostWindow()`从我的主课上说，效果很好；只是当我从我的 StartWindow 类中调用它时它不起作用。代码：

开始窗口：

```
public class StartWindow extends JFrame{
private JPanel pane;
private JButton host;
private JButton join;
private JButton comp;
private JButton exit;

public StartWindow()
{
    this.setSize(220, 110);
    this.setTitle("Closed Arena");
    pane = new JPanel();
    this.add(pane);
    host = new JButton("Host Match");
    host.addActionListener(new myButtonListener());
    join = new JButton("Join Match");
    join.addActionListener(new myButtonListener());
    comp = new JButton("Play Computer");
    comp.addActionListener(new myButtonListener());
    exit = new JButton("Exit");
    exit.addActionListener(new myButtonListener());
    pane.add(host);
    pane.add(join);
    pane.add(comp);
    pane.add(exit);
    this.setResizable(false);
    pane.setVisible(true);
    this.setVisible(true);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);   

    //If I make a new Hostwindow here it displays properly
    //new HostWindow();
}

private class myButtonListener implements ActionListener
{

    @Override
    public void actionPerformed(ActionEvent e) 
    {
        Object source = e.getSource();
        if(source.equals(host))
        {
            close();
            //But here it displays improperly.
            new HostWindow();
        }
        if(source.equals(join))
        {
            close();
            new JoinWindow();
        }
        if(source.equals(comp))
        {
            close();
            new Arena();
        }
        if(source.equals(exit))
        {
            close();
        }
    }   
}
public void close()
{
    this.dispose();
}
} 
```

主机窗口：

```
private JPanel panel;
private JLabel text;
private JButton stop;
private LabelEditor edit;
private Thread editThread;
private ServerSocket server;
private Socket mySocket;

public HostWindow()
{
    panel = new JPanel();

    text = new JLabel("Waiting for client");
    stop = new JButton("Stop");
    stop.addActionListener(new buttonList());

    panel.add(text);
    panel.add(stop);
    this.add(panel);

    this.setResizable(false);   
    this.setSize(160, 90);
    this.setTitle("Server");

    this.setVisible(true);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);

    edit = new LabelEditor(text, "Waiting for client", 700);
    editThread = new Thread(edit);
    editThread.start();

    try 
    {
        server = new ServerSocket(4011);
        mySocket = server.accept();
        server.close();
        new Arena(mySocket, true);
    } 
    catch (IOException e) {
        System.out.print("Failed to set up server!");
    }
    editThread.interrupt();
    this.dispose();
} 
```

编辑：HostWindow 确实扩展了 JFrame，我只是没有复制粘贴标题，但它看起来像这样： public class HostWindow extends JFrame {

Edit2：谢谢回答者，当我制作它时已修复，以便 serer 在单独的线程中启动：

```
if(source.equals(host))
        {
            close();
            HostWindow hoster = new HostWindow();
            Thread hosterThread = new Thread(hoster);
            hosterThread.start();
        } 
```

在主机窗口中：我将服务器的东西移到运行中。

```
public void run() {
    try 
    {
        server = new ServerSocket(4011);
        mySocket = server.accept();
        server.close();
        new Arena(mySocket, true);
    } 
    catch (IOException e) {
        System.out.print("Failed to set up server!");
    }
    editThread.interrupt();
    this.dispose();     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:55:11.037

首先，我认为您的示例不正确`HostWindow`并没有延伸到任何东西，但是您似乎将其视为窗口...

第二

```
try 
{
    server = new ServerSocket(4011);
    mySocket = server.accept();
    server.close();
    new Arena(mySocket, true);
} 
catch (IOException e) {
    System.out.print("Failed to set up server!");
} 
```

将阻止窗口被绘制，直到建立连接，此时您以任何方式处理窗口。

你可能想通读一遍

*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

我建议将“连接”代码移动到 a[`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)并使用它的`done`方法来处理窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T22:55:39.617

这里的问题是你在 UIThread 中执行了一个持久的阻塞操作。

线程是在单个程序中同时运行的命令序列（我建议阅读[Java 并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)）。有一个线程通常称为 UIThread，它执行 UI 元素的绘制并使用它们的代码。

创建套接字 - 与远程主机的连接意味着您正在启动一个可能需要几秒钟才能执行的进程。这发生在 UI 类的构造函数内部，在 UIThread 内部。在建立连接之前，构造函数中的其余代码无法运行。这是因为连接过程是一个阻塞操作——套接字创建后的代码在套接字创建完成之前不会运行。

因此，您应该将套接字创建移动到不同的线程。

# php - Symfony2 - 有没有办法挂钩用户确认的事件？

> ID：12254792
> 
> 赞同：2
> 
> 时间：2012-09-03T22:46:31.070
> 
> 标签：php, events, symfony, fosuserbundle

我正在使用 symfony2 的 FOS 用户包，并希望在用户确认注册时运行一些自定义代码来记录事件`/register/confirm/{token}`

但是，当用户被确认时似乎没有事件，所以我想知道在用户帐户被确认时挂钩执行的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:32:44.940

您可以覆盖[RegistrationController](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Controller/RegistrationController.php#L86)（请参阅[doc](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_controllers.md)）以添加日志记录功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:52:41.833

如果您能够使用 dev-master (2.0.*@dev)，那么您可以使用 FOSUserBundle 中的新控制器事件。有关详细信息，请参阅 github 上的文档：[https ://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/controller_events.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/controller_events.md)

这是确认事件的一个小例子。不要忘记定义上面链接中提到的服务。

```
<?php

namespace Acme\UserBundle\Security\Listener;
use FOS\UserBundle\Event\GetResponseUserEvent;
use FOS\UserBundle\FOSUserEvents;
use Symfony\Component\EventDispatcher\EventSubscriberInterface;

class RegistrationListener implements EventSubscriberInterface
{
    public function __construct(/** inject services you need **/)
    {
        // assign services to private fields
    }

    public static function getSubscribedEvents()
    {
        return array(FOSUserEvents::REGISTRATION_CONFIRM => 'onRegistrationConfirm',);
    }

    /**
     * GetResponseUserEvent gives you access to the user object
     **/
    public function onRegistrationConfirm(GetResponseUserEvent $event)
    {
        // do your stuff
    }
} 
```

# c# - FileStream：如何检查文件是否准备好，未使用？

> ID：12254795
> 
> 赞同：0
> 
> 时间：2012-09-03T22:46:41.917
> 
> 标签：c#, .net, file, filestream

> **可能重复：**
> [有没有办法检查文件是否正在使用？](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)

我看到有一种非常简单的方法可以检查文件是否已解锁，其他进程没有使用：

```
public static bool Check(string filepath)
{
  try
  {
    using (File.Open(filepath, FileMode.Open, FileAccess.Read, FileShare.None)) {}
  }
  catch (Exception e)
  {
    log("file not ready" + e);
    return false;
  }
  return true;
} 
```

那太好了，但是如何检查方法是否会使用 FileStream 作为参数？

```
public static bool Check(FileStream f)
{ 
//... 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:51:16.687

我想这取决于您的目标，但是对于我能想象的大多数应用程序来说，检查这可能不是正确的路径。

我猜你想检查一下，这样你就可以检查，如果不使用，就去做一些事情（即检查，然后稍后再写一行代码）。这里的挑战是，在中间其他人可能会过来拿走文件，导致您尝试操作失败。

一般来说，我会说只是尝试做任何你想做的事情并在那里捕捉失败。您需要进行防御性编码并假设这一点。额外的检查很少能取得多大的成就。

# html - IE9 和旧版浏览器中的宽度问题

> ID：12254800
> 
> 赞同：-4
> 
> 时间：2012-09-03T22:47:24.893
> 
> 标签：html, css

我不知道人们如何测试他们的网站是否与旧浏览器兼容。我有一个顶部菜单，`width:100%`它在 Firefox 中正常工作，但在 IE9 中失败。

这是CSS：

```
.topslidemenu {
     font-size: 11px;  
     font-weight: bold;  
     height: 27px; 
     line-height: 9px; 
     width: 100%; //950px
} 
```

在 IE9 上运行时，菜单宽度会缩短。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T02:19:13.287

可能的原因：<br> 1\. `<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`
2.如果滚动条被放置在元素盒子的边缘，它应该插入到内边框边缘和外填充边缘之间。滚动条占用的任何空间都应该从带有滚动条的元素形成的包含块中取出（从尺寸中减去）。[http://www.w3.org/TR/CSS21/visufx.html#overflow](http://www.w3.org/TR/CSS21/visufx.html#overflow)

试试这个：

```
.topslidemenu {
     font-size: 11px;  
     font-weight: bold;  
     height: 27px; 
     line-height: 9px; 
     width: expression(this.parentNode.offsetHeight > this.parentNode.scrollHeight ? '100%' : parseInt(this.parentNode.clientWidth) + 'px');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T05:01:03.883

没有更多代码很难说。IE 总是给我带来麻烦。我喜欢使用附加组件，Web 开发。它让我可以在网络上为 IE 进行测试和实验。[http://www.microsoft.com/en-us/download/details.aspx?id=18359](http://www.microsoft.com/en-us/download/details.aspx?id=18359) 也尝试添加 float: left 或 margin: 0; 或填充：0；看看其中一个是否修复了错误。希望这有帮助。

# apache - 使用 SSL 配置保护 JBoss 7 免受 Beast 攻击

> ID：12254803
> 
> 赞同：0
> 
> 时间：2012-09-03T22:47:39.160
> 
> 标签：apache, jboss, jboss7.x

将 SSLv3.0/TLSv1.0 与某些加密技术（CBC 分组密码）结合使用，可以让攻击者预测后续 SSL 数据包的所谓初始化向量。使用此信息，攻击者可以访问另一个用户的安全会话。这种名为 BEAST（针对 SSL/TLS 的浏览器漏洞利用）的攻击针对的是用户的浏览器，而不是 Web 服务器。尽管如此，也可以在服务器端采取对策来防止成功的攻击。

此问题的完整解决方案是在使用 SSLv3.0/TLSv1.0 时禁用或取消对易受攻击的加密密码（CBC 块密码）的支持。通常，这可以通过在密码协商过程中优先考虑 RC4 密码来实现。

对于支持 SSLv3.0/TLSv1.0 的 Apache Web 服务器，可以通过添加以下配置进行配置：

```
SSLProtocol All –SSlv2
SSLHonorCipherOrder On
SSLCipherSuite RC4-SHA:HIGH:!ADH 
```

对于支持 SSLv3.1/TLSv1.1 及更高版本的 Apache Web 服务器，建议使用以下配置：

```
SSLProtocol All –SSlv2
SSLHonorCipherOrder On  
SSLCipherSuite ECDHE-RSA-AES256-SHA384:AES256-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH:!AESGCM 
```

据我所知，JBoss 7 是基于支持 SSLv3.1/TLSv1.1 的 Apache 版本（也许我错了），所以第二种替代方案可以应用于 JBoss 7。

我的问题是：**我应该在哪里/如何配置它？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:23:23.020

不要偏执于野兽攻击。根据[这个](http://www.pcworld.idg.com.au/article/404669/oracle_patches_java_flaw_exploited_ssl_beast_attack/)Oracle 修复问题，它与 JBoss 没有直接关系，它是一个 JVM 问题。如此处所述[，](https://security.stackexchange.com/questions/8174/why-was-the-beast-attack-previously-considered-implausible)在现实世界中很难应用野兽攻击。只需确保您的 JVM 和 JBoss 是最新的。如果您仍有疑问，最好在 apache 或 nginx 等反向代理后面运行 JBoss。

# sql - play20 ebean生成的sql在postgresql上抛出语法错误

> ID：12254804
> 
> 赞同：5
> 
> 时间：2012-09-03T22:47:43.987
> 
> 标签：sql, heroku, playframework-2.0

我正在尝试使用 postgresql 使用我的 play20 应用程序，以便我可以使用并稍后部署到 Heroku。我跟着这个[答案](https://stackoverflow.com/questions/12195568/errors-in-evolutions-on-heroku/12196800#12196800)。

基本上，我建立了与数据库的连接（因此从本地应用程序到 Heroku postgresql 数据库的连接有效），但我无法使用生成的 1.sql 演变来初始化数据库。但是生成的 sql 无法工作，因为 postgresql 正在使用[模式](http://www.postgresql.org/docs/9.1/static/sql-createtable.html)（无论如何它应该在没有模式的情况下工作，但显然我做错了什么或数据库做错了什么）。

```
create table user (
id                        bigint not null,
email                     varchar(255),
gender                    varchar(1),
constraint pk_user primary key (id)); 
```

*导致*

```
ERROR: syntax error at or near "user"
  Position: 14 [ERROR:0, SQLSTATE:42601] 
```

我通过将模式添加到表名来解决这个问题

```
create table public.user(
  ...
); 
```

好的，在我尝试读取或写入数据库之前，一切正常。我再次遇到 sql 语法异常，无法使用数据库。似乎 sql 查询在某种程度上是错误的。

有什么建议可能有问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T05:45:58.023

在使用其他数据库而不是在生产环境中开发应用程序时，这是非常常见的错误，但幸运的是也有常见的解决方案。您仍然可以使用`User`模型，但是您必须确保创建具有更改名称的数据库表：

```
@Entity
@Table(name = "users")
public class User extends Model {
    ...
} 
```

在大多数情况下，在您的控制器和模型中，名称切换对您来说是透明的。唯一需要记住开关的地方是[RawSql](http://www.avaje.org/ebean/introquery_rawsql.html)查询。

顺便说一句，在本地安装相同的数据库以进行开发是个好主意，因为大多数流行的数据库之间存在很多差异，例如其他保留关键字，其他允许的类型，甚至其他 id 的自动递增方法，因此查找和修复正确的值更容易在本地主机上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T23:15:59.330

好吧，由于我对postgresql知之甚少，我整天都在为此苦苦挣扎。这是简单的解决方案。不要在 postgreqsl 上使用名为“user”的表。该表已被使用。

但是为什么我的进化 sql 查询对数据库的初始化起作用？好吧，如果我明确指定要在哪个模式中创建表“用户”，那基本上可以工作。

但如果未指定架构，则使用当前架构。从[文档](http://www.postgresql.org/docs/9.1/static/ddl-schemas.html)：

> *如果给出了模式名称（例如，CREATE TABLE myschema.mytable ...），则在指定的模式中创建表。否则在当前模式中创建*

所以这就解释了。但是对于我的项目，使用“用户”模型是完全合理的，并且对于基于 H2 文件的数据库它正在工作，所以我认为问题出在其他地方......

# jquery - WYMeditor在为 空时插入一个

> ID：12254808
> 
> 赞同：1
> 
> 时间：2012-09-03T22:48:17.793
> 
> 标签：jquery, cakephp-2.0, wymeditor

我正在为这个项目使用 WYMeditor。但是，我有服务器端验证，在保存数据之前检查 textarea 框是否为非空。但是当使用 WYMeditor 时，它会插入一个`<br />`标签，即使我什至没有在编辑器中点击。

我搜索了这个问题，发现它被标记为错误，[here](https://github.com/wymeditor/wymeditor/issues/193%22here%22)。不过据说修好了。但是，即使我已经下载并使用了最新的稳定版本，它肯定仍然在影响我。

这是我插入文本区域的代码（我使用的是 CakePHP）：

```
echo $this->Form->create('News', array('type' => 'file'));
    echo $this->Form->input('News.title', array('label' => '*Title:'));
    echo $this->Form->input('News.body', array('label' => '*Body:', 'class' => 'wymeditor'));
    echo $this->Form->input('News.picture', array('label' => 'Picture:', 'type' => 'file'));
echo $this->Form->end(array('label' => 'Save News', 'class' => 'wymupdate')); 
```

我的文本区域的javascript：

```
jQuery('.wymeditor').wymeditor({
            skin: 'silver',
            toolsItems: [
                         {'name': 'Bold', 'title': 'Strong', 'css': 'wym_tools_strong'}, 
                         {'name': 'Italic', 'title': 'Emphasis', 'css': 'wym_tools_emphasis'},
                         {'name': 'CreateLink', 'title': 'Link', 'css': 'wym_tools_link'},
                         {'name': 'Unlink', 'title': 'Unlink', 'css': 'wym_tools_unlink'},
                         {'name': 'InsertOrderedList', 'title': 'Ordered_List', 'css': 'wym_tools_ordered_list'},
                         {'name': 'InsertUnorderedList', 'title': 'Unordered_List', 'css': 'wym_tools_unordered_list'},
                         {'name': 'InsertTable', 'title': 'Table', 'css': 'wym_tools_table'},
                         {'name': 'Undo', 'title': 'Undo', 'css': 'wym_tools_undo'},
                         {'name': 'Redo', 'title': 'Redo', 'css': 'wym_tools_redo'}
                        ]
        }); 
```

我没有使用 wymeditor javascript，而是使用我所有的其他 javascript 对此进行了测试，并且它按预期运行，所以我怀疑 wymeditor javascript 发生了一些事情，但我不确定是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:25:41.340

我可以想到这些症状的几个可能原因：

1.  您可能正在使用存在此错误的旧版本的 WYMeditor。您使用的是哪个版本？在撰写本文时，当前版本是[1.0.0b3](https://github.com/wymeditor/wymeditor/blob/master/version.txt)。[您可以在此处](http://wymeditor.no.de/wymeditor/examples/01-basic.html)针对 WYMeditor master 进行测试。

2.  如果您在不使用表单的提交处理程序的情况下提交表单，那么`wymupdate`该类将不起作用，并且您将不会获得隐式`wym.xhtml()`调用，这意味着可能不会发生一些必要的 HTML 清理。您可以尝试调用`xhtml()`您的 WYMeditor 实例（`jQuery.wymeditors(0)`如果您只有一个 wymeditor，您可以使用它来检索它）。

如果您可以提供示例页面或更多信息，我将相应地更新此答案。

# javascript - 如何捕捉网站的某个部分？

> ID：12254811
> 
> 赞同：0
> 
> 时间：2012-09-03T22:48:36.027
> 
> 标签：javascript

假设我们有一个网站。我们希望在另一个站点中显示该站点的指定部分，例如显示最新消息的数据表，并且我们希望使用 javascript 在我们的网站中显示该部分。

这可能吗？是否需要更多信息？

我们都知道，通过这段代码：

```
<iframe src="http://www.XYZ.com">
</iframe> 
```

我们可以加载所有网站，但是如何加载网站的特定部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T22:52:18.163

~~我认为你最好的选择是[`JQuery.load()`](http://api.jquery.com/load/)，但我不知道这种方法是否存在跨域问题。~~•*刚刚检查过，有。*

您可以使用 PHP 加载具有[`file_get_contents()`](http://au2.php.net/file_get_contents)或类似的页面的输出，然后为您自己的输出刮出您想要的内容。

例子：

```
$str = file_get_contents("http://ninemsn.com.au/");

// Reallly shouldn't use regex with HTML.
$region = '/(\<div id\=\"tabloid\_2\" class\=\"tabloids\">)(.*)(\<\/div\>)/';
preg_match($region, $str, $matches);

echo $matches[0]; 
```

最后，要记住的是，开发人员可能希望从中获取内容以用于他们自己的网站的许多大型网站都提供 API，以便轻松有效地从他们的网站获取信息。YouTube、Twitter 和一些照片分享网站就是很好的例子。JSON 和 XML 可能是您将从这些 API 收到的最常见的数据格式。

以下是一些生成可用 JSON 的 API 示例：

*   YouTube 视频供稿：[https ://gdata.youtube.com/feeds/api/users/Martyaced/uploads?alt=json](https://gdata.youtube.com/feeds/api/users/Martyaced/uploads?alt=json)
*   Twitter 提要：[http ://api.twitter.com/1/statuses/user_timeline.json?screen_name=Martyaced](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=Martyaced)

# c# - 从第一个字节中删除位，然后重新加入这些位

> ID：12254816
> 
> 赞同：1
> 
> 时间：2012-09-03T22:49:16.467
> 
> 标签：c#, bit-manipulation

我有一个狡猾的小问题，我认为我想出了一个比需要的解决方案要困难得多的解决方案。

问题是我有两个字节。第一个字节的前两位将被删除（由于值是小端序，这些位实际上位于 16 位值的中间）。然后将第二个字节的最低有效两位移动到第一个字节的最高有效位位置，以代替被移除的位。

我的解决方案如下：

```
byte firstByte = (byte)stream.ReadByte(); // 01000100
byte secondByte = (byte)stream.ReadByte(); // 00010010
// the first and second byte equal the decimal 4676 in this little endian example

byte remainderOfFirstByte = (byte)(firstByte & 63); // 01000100 & 00111111 = 00000100

byte transferredBits = (byte)(secondByte  << 6); // 00010010 << 6 = 10000000

byte remainderOfSecondByte = (byte)(secondByte >> 2); // 00010010 >> 2 = 00000100

byte newFirstByte = (byte)(transferredBits | remainderOfFirstByte); // 10000000 | 00000100 = 10000100
int result = BitConverter.ToInt32(new byte[]{newFirstByte, remainderOfSecondByte, 0, 0}, 0); //10000100 00010000 (the result is decimal 1156) 
```

有没有更简单的方法*来实现这一目标？*不那么冗长，也许是我缺少的内置函数或技巧？（除了在同一行同时执行 & 和 <<）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:18:08.203

您不必掩盖移位无论如何都会丢弃的位。而且您不必手动传输这些位。所以它变成了这样：（未测试）

```
int result = (secondByte << 6) | (firstByte & 0x3F); 
```

# javascript - 谷歌关闭高级 | 无法识别对象属性 | 动态属性？

> ID：12254820
> 
> 赞同：1
> 
> 时间：2012-09-03T22:49:50.987
> 
> 标签：javascript, google-closure

**实际错误代码**

> JSC_INEXISTENT_PROPERTY

**概括**

对于下面列出和评论的代码，我收到此错误。

我是这样打电话的。 `o_p.page`保存用户输入，其中一个属性确实是`tag`

```
Mo.AppBAdder.image_element = vDomBMAdd(o_p.page); 
```

o_p.page 通过调用保存用户输入的对象来填充，如下所示：

```
o_p.page = text_object.getArray(); 
```

有没有办法让 Google Closure 不觉得该属性不存在？

设置选项没问题 另外，如果需要，我不介意稍微修改代码。

文本的构造函数读取用户输入，如下所示：

```
Su.text = function (form_elements) {
    this.text_object = {};
    var key;
    for (key in form_elements) { //*u
        if (form_elements.hasOwnProperty(key)) {
            this.text_object[form_elements[key].name] = form_elements[key].value;
        }
    }
    return this;
}; 
```

**代码片段**

```
function vDomBMAdd(bookmark_object) {
    var link_element = document.createElement('a'),
        image_element = document.createElement('img'),
        page_element = $a('#' + bookmark_object.tag + '_page'), // error here - inexistent property 
```

**参考**

不存在与不存在的意思相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:47:45.430

您有两个选择：创建一个声明“标签”属性的外部文件，或者，考虑到该属性的定义方式，可能更合适的是，使用带引号的属性访问：

```
bookmark_object['tag'] 
```

这两种方法都允许您访问“外部”属性，并且都与 ADVANCED 优化兼容，但使用 extern 文件允许您声明属性所持有值的预期类型，从而提供更好的类型检查。

# php - 选定时间 + 1440 分钟

> ID：12254821
> 
> 赞同：0
> 
> 时间：2012-09-03T22:49:52.160
> 
> 标签：php, mysql

```
$buldurt=mysql_query("SELECT MIN(tarih) FROM kupon WHERE TIMESTAMPDIFF( MINUTE , tarih, now( ) )<1440 AND oynanma='1' AND uyeisim='$session'");
$buldurtx=mysql_fetch_array($buldurt); 
```

这给了我首先需要的 TIMESTAMP 值。我要打印；

$buldurtx[0] + 1440 分钟 = 我需要的时间戳。

我怎么能解决这个问题，我找不到:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T22:54:46.590

```
SELECT UNIX_TIMESTAMP(MIN(tarih) + INTERVAL 1440 MINUTE) FROM ... 
```

# backbone.js - 使用 Marionette 创建复杂视图（表单）

> ID：12254825
> 
> 赞同：1
> 
> 时间：2012-09-03T22:50:21.340
> 
> 标签：backbone.js, marionette

我想用 Backbone.Marionette 创建一个复杂的表单。我认为表格应该是这样的：

![形式](../Images/3cee68354de2071732ea77eacd82ac2e.png)

产品或付款的任何变化都应影响“销售”模式。模型结构为：

```
sale   :   {
    date        :             '10/01/2010',
    customer    :             'Jaime Rivera'
    products    :             [{product_name:'ZZZZZZ', price: 100, quantity: 2},
                               {product_name:'yyyyyy', price: 33, quantity: 1}],
    payments    :             [{type:'check', other_data: '', amount: 160},
                               {type:'credit-card', other_data: '', amount: 73}] 
} 
```

我想知道构建视图以创建表单的最佳方法。我不确定我是否应该使用布局、复合视图或集合视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T12:53:50.237

有多种方法可以让 Marionette 的观点发挥作用，而且它们都不一定是对或错。有些会更好地满足您的其他约束，例如需要使用哪些数据来呈现它，需要处理哪些事件等。

但是，鉴于您显示的数据，这看起来像一个具有两个 CompositeView 的布局。

布局将呈现日期选择器、输入框和两个用于产品和付款的空 div。这些空 div 中的每一个都将在布局中关联一个区域定义，因此您可以显示产品和付款。

然后，您可以拥有产品的 CompositeView - 一个呈现产品列表和“添加产品”按钮的模板。CompositeView 本身将处理 Add Product 按钮的单击。将指定一个 ItemView 来呈现列表中的每个产品。

付款方式与产品相同。

...再次，这只是使其工作的一种选择。您可以使用一个 Layout 和 2 个 Collection 视图来完成整个事情，或者将整个事情作为单个 ItemView 来完成（这将很难维护，但仍然可能）。

希望有帮助。

# php - JSON返回数组的奇怪结果

> ID：12254826
> 
> 赞同：0
> 
> 时间：2012-09-03T22:50:25.137
> 
> 标签：php, javascript, jquery, ajax, json

**PHP**

```
$table = mysql_real_escape_string($_REQUEST['table']);

$query  = "SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.Columns where TABLE_NAME = '$table'";
$result = mysql_query($query);
$arr1 = array();
while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $arr1[] = $row['COLUMN_NAME'];
}
echo json_encode($arr1); 
```

}

**Javascript/Jquery**

```
$("#verticalSelect").change(function() {
    var table = $("#verticalSelect option:selected").attr('value');

    $.post(PROCESSORFILE, {"task": "getTableDupeFields", "table": table}, function(data) {
        $.each(data, function(key, value){
            $("#test-area").append(key+' is: '+value+'<br/>');
        });
        alert(data);
    });
}); 
```

现在有了返回的 JSON 变量的警报，我得到了我期望的结果。

`["lead_id", "callcenter", "monkey" ...]`

但是有了这个`Jquery.each()`功能，我得到了这个：

0:is: [
1:is: "
2:is: l
3:is: e
4:is: a
5:is: d
6:is: _
7:is: i
8:is: d
9:is: "
10:is: ,
11:is: "
12:is: c
13:is: a
14:is: l
15:is: l
16:is: c
17:is: e
18:is: n
19:is: t
20：是：e
21：是：r

返回数组的每个字符都是循环的，而不是每个离散值。处理 JSON 返回数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T22:53:01.187

您需要将响应标头设置为`application/json`或将 dataType 指定`$.post`为“json”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:52:46.757

`$.post()`不会为您解析结果。

```
$.post(PROCESSORFILE, {"task": "getTableDupeFields", "table": table}, function(data) {
    data = $.parseJSON(data);
    $.each(data, function(key, value){
        $("#test-area").append(key+' is: '+value+'<br/>');
    });
    alert(data);
}); 
```

*编辑*——哦，你也可以传递第四个参数，`$.post()`但我个人不确定传递“json”会告诉它解析结果；它可能会。

# c# - 在哪里放置依赖属性？

> ID：12254827
> 
> 赞同：2
> 
> 时间：2012-09-03T22:50:51.520
> 
> 标签：c#, wpf, mvvm, dependency-properties

在使用 MVVM 模式构建 WPF 应用程序时，我对放置依赖属性的位置感到困惑。它进入模型还是视图模型？

## 编辑

在查看了早期答案（感谢那些）之后，我发现我仍然很困惑，所以我提供了更多细节来帮助有人向我解释这一点。

我有一堂课叫车站。测量员和土木工程师使用它来表示道路的长度。在大多数情况下，Station 只是一个替身，但它有一些装饰。首先，格式不同。当距离大于 100 英尺时，我们添加一个 + 符号作为另一种格式化方式。因此，在道路下方 1234.56 英尺处，我们可能会有 12+34.56 站。（我将跳过其他装饰，因为这对我的观点来说已经足够好了。）

因此，特殊格式的逻辑存在于模型中的一个类 Station 中。我希望视图中的 TextBox 接受用户输入 1234.56 并将其强制为“12+34.56”的文本值。所以我想要一个 TextBox 让用户访问模型中的一个值，所以它需要是一个依赖属性。（这是正确的，不是吗？）但是用于强制/解析/理解如何在 TextBox 和 Station 之间来回切换的业务逻辑应该存在于 Station 类中。（正确的？）

此外，我稍后希望让用户能够通过单击道路图形来设置站点值，包括在鼠标移动时动态更新值以及在发布数据点时锁定值。（现在你明白我为什么试图保持简短。）

那么这不是我想要创建一个依赖属性的东西，尤其是动态数据点可能稍后会涉及吗？如果没有，我如何使用 MVVM 将文本框项连接到工作站？（在问我的问题之前，我真的对此进行了很多研究，但没有成功。）

*   保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:05:47.793

通常，您不会在 ViewModel 或模型中使用依赖属性。

依赖属性实际上仅适用于与视图相关的功能。您将 View 的 DP 绑定到 ViewModel，而 ViewModel 将实现`INotifyPropertyChanged`.

将 DP 放入 ViewModel 或模型本身实际上会违反 MVVM 的主要目标之一，因为这会将用户界面技术 (WPF) 耦合到您的模型或特定于应用程序的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T00:06:33.550

使用 MVVM，您更喜欢`INotifyPropertyChanged`属性而不是 DependencyProperties。

你的`Station`类应该用`INotifyPropertyChanged`. 您的`TextBox`绑定应使用转换器以您希望的格式呈现和读取值。

```
public class Station : INotifyPropertyChanged
{
    private decimal _value;
    public decimal Value
    {
        get { return _value; }
        set
        {
            if (_value == value) return;

            _value = value;
            NotifyPropertyChanged("Value");
        }
    }
    /* INotifyPropertyChanged implementation */
}

public class StationConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string formattedValue = // Add the plus here
        return formattedValue;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        string numericValue = // Parse the optional '+' out of the value
        decimal stationValue = decimal.Parse(numericValue);
    }
} 
```

XAML：

```
<UserControl.Resources>
    <StationConverter Key="StationConverter" />
    <TheViewModel Key="TheVM" />
<UserControl.Resources>

<TextBox Text="{Binding Path=Station.Value, Source={StaticResource TheVM}, Converter={StaticResource StationConverter}, Mode=TwoWay}"/> 
```

# java - 可运行的未来接口定义（jdk）

> ID：12254831
> 
> 赞同：2
> 
> 时间：2012-09-03T22:51:34.260
> 
> 标签：java, interface, runnable, future

我对 RunnableFuture 接口定义的“正确性”有疑问。这可能是关于在 java 中定义接口注释的正确争用的问题。

RunnableFuture 的 run() 方法的定义：

> 将此 Future 设置为其计算结果...

然而，这显然不可能总是正确的，因为 run() 的返回类型是`void`，而 RunnableFuture 只是一个接口，看来如果我们要保证这一点，我们必须了解实现类的性质（ get() 实现，例如）。

现在，如果 RunnableFuture 实际上返回了一个值，该值是隐藏的，并且总是由阻​​塞的 get() 函数返回，这样的定义（由于其实现限制，它必须出现在类中，而不是接口中），显然是合适的。

因此，我想知道：此接口的 run() 方法是否正确定义？

作为一个反例：Runnable run() 接口定义总是正确的。

> 当使用实现接口 Runnable 的对象创建线程时，启动线程会导致在该单独执行的线程中调用对象的 run 方法。

因此，即使 Runnable 没有定义实现——该接口告诉我们 JVM 如何通过 Runnable 接口实现线程，而无需对实现类强加非保证契约。

所以我有3个问题：

1.  RunnableFuture 的文档在几种情况下是否可能不正确？

2.  如果 (1) 是这种情况，是否可以通过 java 约定接受？

3.  RunnableFuture run() 和 Runnable run() 之间的“真正”区别是什么？

请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:58:43.387

的合同由`RunnableFuture`执行[`FutureTask`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html)。创建 a`FutureTask`时，您提供 a`Callable`或 a`Runnable`和一个值。的`run`方法`FutureTask`看起来像：

```
public void run() {
    V result;
    try {
        if(callable) {
            result = callable.call();
        } else {
            runnable.run();
            result = value;
        }
    } catch (Throwable t) {
        setException(t);
        return;
    }
    set(result);
} 
```

除了实际实现将`Runnable`-value 对包装在 a`Callable`中并进行一些额外检查以确保在调用`FutureTask`之前处于正确状态。`run`

# c - 如何分析线程负载平衡？

> ID：12254843
> 
> 赞同：2
> 
> 时间：2012-09-03T22:53:19.267
> 
> 标签：c, linux, multithreading, profiling, multicore

我需要查看我的多线程程序的负载平衡特性。是否有任何工具可以为我提供信息，例如绘制这个？例如，我需要一些简单的东西，可以为我提供每个内核的信息，但不是英特尔 VTune 之类的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T00:08:27.833

看看[Linux Trace Toolkit - next generation](http://lttng.org)，你也可以使用`Gnu gprof`它，它并不性感，但它可以完成这项工作 :)

**编辑**：您可以`gprof`在线程环境中使用：[Using gprof with pthreads](https://stackoverflow.com/questions/922475/using-gprof-with-pthreads)

EDIT2：[Oprofile](http://oprofile.sourceforge.net/news/)也可能有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T07:02:20.017

我只触及了 AMD 的 CodeAnalyst 功能的皮毛，但到目前为止我发现的东西令人印象深刻，尤其是所有的性能计数器，并将它们纳入详细的图片中。至于每线程分析，我主要编写在专用内核上长时间运行的大规模并行应用程序，这可能不适用于您的东西。

就其自身的 CPU 需求而言，它显得相当吝啬。我不知道它是否会在英特尔 CPU 上进行配置。有一个Linux版本。

试一试！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T07:35:46.727

您还可以使用[`perf`](https://perf.wiki.kernel.org/index.php/Main_Page)Linux 内核中支持性能计数器的官方实现。除了读取性能计数器之外，它还允许访问其他一些指标，例如上下文切换、CPU 迁移、页面错误等。

不幸的是，官方 wiki 没有包含太多信息。但是您可以查看[此页面](http://code.google.com/p/kernel/wiki/PerfUserGuide)以获取有关如何使用 perf 中包含的不同工具的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T15:13:58.437

对于研究主题，我使用了以下命令：

> ps -AL -o lwp,fname,psr | grep 安培

正在研究的应用程序是*ammp*，它使用与内核相同数量的线程。该命令返回每个线程所在的核心。多次执行此命令，您将看到给定线程如何通过内核以及负载平衡算法如何工作。

我希望你觉得有用。

# ruby-on-rails - ROR - 无法创建新目录

> ID：12254847
> 
> 赞同：0
> 
> 时间：2012-09-03T22:53:41.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json, rubygems

（旁注：由于某些操作系统问题，我的 mac 几周前崩溃了；商店里的苹果人处理了它，它恢复了“正常”——只是说明这一点，以防它与当前问题有关）

今天，我决定练习一些 ruby​​，因为我有一段时间没有练习了（按照 hartl 的教程）

当尝试生成一个新的应用程序时，在暂停和看似正常的文件之后，它出现了这个：（作为记录-当我创建以前的目录时-直到今天我才遇到问题）

```
 Installing json (1.7.5) with native extensions 
 Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /Users/name_withheld/.rvm/rubies/ruby-1.9.3-p0/bin/ruby extconf.rb 
 creating Makefile

 make
 sh: make: command not found

 Gem files will remain installed in /Users/name_withheld/.rvm/gems/ruby-1.9.3-p0/gems/json-1.7.5     for   inspection.
  Results logged to /Users/name_withheld/.rvm/gems/ruby-1.9.3-p0/gems/json-1.7.5/ext/json/ext/generator    /gem_make.out
  An error occured while installing json (1.7.5), and Bundler cannot continue.
 Make sure that `gem install json -v '1.7.5'` succeeds before bundling. 
```

尝试安装json。这就是它的结果：

```
Building native extensions.  This could take a while...
ERROR:  Error installing json:
ERROR: Failed to build gem native extension.

    /Users/name_withheld/.rvm/rubies/ruby-1.9.3-p0/bin/ruby extconf.rb
creating Makefile

make
sh: make: command not found

Gem files will remain installed in /Users/name_withheld/.rvm/gems/ruby-1.9.3-p0/gems/json-1.7.5 for     inspection.
Results logged to /Users/name_withheld/.rvm/gems/ruby-1.9.3-p0/gems/json-1.7.5/ext/json/ext/generator    /gem_make.out 
```

无论如何，似乎问题可能与gcc有关？还是xcode？

我很困惑，直到今天我才遇到问题！因此，为什么我认为它可能与苹果商店的人可能已经完成的重置有关？

作为记录，当我尝试下载每个人都说它是免费的 xcode 命令行时，它不是。您必须注册并支付某种许可费。

帮助？谁能解决我对我应该在这里做什么的困惑？

**在 10.6.8 版本上编辑** 我（即雪豹？）

**编辑 2** 已将此添加到下面的评论中，但如果有帮助，也将其添加到此处以进行进一步的故障排除。

这就是我的路径显示的内容：“/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/name_withheld/.rvm/bin”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:54:58.700

您还应该确保您拥有 Rails 3.x（理想情况下至少为 3.2.y）...您可以通过以下方式检查您正在运行的 Rails：

```
$ rails -v 
```

利用：

```
$ gem install rails 
```

获取最新版本的 Rails。一旦您执行“rails -v”并知道您正在运行 Rails 3，那么“rails new foo”应该会创建一个名为 foo 的应用程序（和目录）。

另外，Mischa 有一个错字，命令是：

```
$ gem update rails  # *Not* gem rails update ... 
```

我还将运行以下命令以使用 rvm“重新开始”：

```
$ rvm implode 
```

[然后按照此处](https://rvm.io/rvm/install/)的说明重新安装 rvm 。

您可能还会发现这更容易：[http ://railsinstaller.org/#osx](http://railsinstaller.org/#osx)

顺便说一句，自制软件和 rvm 是两个完全不同的东西。brew 用于使用本地（在您的 Mac 上）编译器（gcc 或 CLI 工具，通过 Xcode 或 Kenneth Reitz gcc 安装程序放置在那里）下载、构建（编译）和安装包。rvm 是 Ruby 版本管理器，它仅用于管理您可能安装的不同 Ruby 版本。要使用它，您只需说“rvm 1.9.3”（假设您已经安装了 Ruby 1.9.3）以确保您使用的是该版本的 ruby​​。

与 Rails 类似，您可以通过以下方式检查您正在使用的 Ruby 版本：

```
$ ruby -v 
```

此外，rvm 会告诉您您正在使用哪一个（如果它显示“系统”，请尝试使用“rvm 1.9.3”或“rvm 1.9.2”命令来更改您正在使用的那个）：

```
$ rvm list 
```

正在使用的那个将在您正在使用的那个旁边有一个“=*”或“=>”（如果您安装了相当新版本的 rvm）。

祝你好运——让我知道这是否有帮助。

# erlang - erlang:disconnect_node/2 是否立即停止排队的消息？

> ID：12254851
> 
> 赞同：2
> 
> 时间：2012-09-03T22:54:29.130
> 
> 标签：erlang

如果我向远程节点发送了大量消息并立即调用`erlang:disconnect_node/2`断开连接，是否有可能某些消息无法通过线路？换句话说，无论等待消息如何，该方法是否都会执行残酷的断开连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:35:23.333

不，即使有两个本地节点！

**设置**：我有一个节点`a@super`，在女巫上运行一个虚拟的接收打印循环，注册为`a`. 在另一个节点上，我运行

```
(b@super)1> [{a, a@super} ! X || X <- lists:seq(0,10000)], erlang:disconnect_node(a@super). 
```

也就是说，许多消息，然后是残酷的断开连接。

**结果**：接收方仅在 10 次运行中打印了完整的 10001 条消息。

因此，您绝对不能保证接收者收到所有消息。您应该使用另一种技术（erlang 新手，抱歉），或者在断开连接之前使用确认消息。

# c# - ToList() 方法在哪里？（可查询）

> ID：12254855
> 
> 赞同：14
> 
> 时间：2012-09-03T22:55:15.240
> 
> 标签：c#, .net, linq, extension-methods

如果我尝试这个，它将起作用：

```
var query = myContextObject.Users.Where(u=>u.Name == "John");
query.ToList(); 
```

我可以打电话`ToList`和很多其他的扩展方法。

但如果我试试这个：

```
public List ConvertQueryToList(IQueryable query)
{
    return query.ToList();
} 
```

`ToList`将无法访问，我猜这是因为`ToList`它是一种扩展方法，但是`ToList`在第一个示例中是如何附加的？`ToList`在第二种情况下可以访问吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-03T22:58:42.633

你需要把它写成：

```
public List<T> ConvertQueryToList<T>(IQueryable<T> query)
{
    return query.ToList();
} 
```

这将导致`IQueryable<T>`返回适当的`List<T>`，因为该[`Enumerable.ToList()`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)方法需要一个`IEnumerable<T>`as 输入（它也适用于`IQueryable<T>`, as [`IQueryable<T>`inherits`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)）。

话虽如此，确实没有理由以这种方式使用它。`ToList()`如果您需要在第二层内部创建一个抽象，您总是可以直接调用`List<T>`，这只会进一步混淆 API。

如果您尝试转换非通用[IQueryable](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx)接口，则需要执行以下操作：

```
public List<T> ConvertQueryToList<T>(IQueryable query)
{
    return query.Cast<T>.ToList();
} 
```

这将需要像这样调用：

```
var results = ConvertQueryToList<SomeType>(queryable); 
```

或者，如果您想保留这个非泛型（我不推荐），那么您可以使用：

```
public ArrayList ConvertQueryToList(IQueryable query)
{
    ArrayList results = new ArrayList();
    results.AddRange(query.Cast<object>().ToList());
    return results;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-03T22:57:45.600

您的第一个示例返回一个`IQueryable<T>`，而在​​第二个示例中您正在使用`IQueryable`（没有通用类型参数）。

[您可以在此处](http://msdn.microsoft.com/en-us/library/bb351562.aspx)和[此处](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx)查看两个完全不同的界面。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-16T07:50:53.843

这是一个扩展方法：

```
public static class ListHelper
{
    public static IList ToList(this IQueryable query)
    {
        var genericToList = typeof(Enumerable).GetMethod("ToList")
            .MakeGenericMethod(new Type[] { query.ElementType });
        return (IList)genericToList.Invoke(null, new[] { query });
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-07-14T19:29:20.967

这是您使用 IQueryable<> 的情况的通用扩展方法。当然，这不是绝对安全的，因为类型可能是错误的，并且转换可能会失败。因此，如果您使用该方法，请小心。

```
using System.Collections.Generic;

namespace System.Linq
{
    public static class Extensions
    {
        public static List<T> ToList<T>(this IQueryable queriable)
        {
            return ((IQueryable<T>)queriable).ToList();
        }
    }
} 
```

# objective-c - strftime 在 %e 个个位数天之前没有空白？

> ID：12254862
> 
> 赞同：2
> 
> 时间：2012-09-03T22:56:42.977
> 
> 标签：objective-c, c, nsstring, char, strftime

我想[使用 strftime 将 NSDate 转换为字符串](https://stackoverflow.com/questions/5008876/convert-nsdate-to-string-with-strftime)，但`%e`在一位数日期之前有一个空格。我该如何防止这种情况？或者，如果我不能，如果它是一个空格，那么删除位置 4 的字符的最佳方法是什么？

```
// TODO: Don't precede %e with blank for single-digit days. @issue
char buffer[22]; // Sep 22, 2012 12:15 PM -- 21 chars + 1 for NUL terminator \0
time_t time = [message.sentDate timeIntervalSince1970] - [[NSTimeZone localTimeZone] secondsFromGMT];
strftime(buffer, 22, "%b %e, %Y %l:%M %p", localtime(&time));
messageSentDateLabel.text = [NSString stringWithCString:buffer encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T23:26:29.453

您可以尝试 GNU C 扩展，通过在以下格式中插入减号来跳过数字的空格填充：`%-e`. 这些在[Apple 的库](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/strftime.3.html)中得到支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:10:24.550

可能效率最低的解决方案是将最后一行替换为：

```
NSMutableString *sentDateLabelText = [NSMutableString stringWithCString:buffer encoding:NSUTF8StringEncoding];
if ([sentDateLabelText characterAtIndex:4] == ' ') {
    [sentDateLabelText deleteCharactersInRange:NSMakeRange(4, 1)];
}
messageSentDateLabel.text = sentDateLabelText; 
```

# php - 是否可以合并这两个 .htaccess 文件？

> ID：12254870
> 
> 赞同：1
> 
> 时间：2012-09-03T22:57:52.323
> 
> 标签：php, .htaccess, zend-framework, url-rewriting

我必须完全替换现有的网站。当前站点完全是意大利面条代码，带有一些重写规则以模仿友好的 url。

当前的架构和数据库结构无法解决一些关键任务问题，因此有一段时间两个代码库需要并存。

这是当前的 .htaccess

```
Options +FollowSymLinks
RewriteEngine On 

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html
RewriteRule ^([^/]+)/$ $1.php

RewriteRule ^([^/]+)/([^/]+)/$ $1.php?q=$2
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/$ $1.php?q=$2&r=$3
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/$ $1.php?q=$2&r=$3&s=$4 
```

我正在用一个 zend 框架站点替换它，但它通过 index.php 文件路由所有内容以进行路由

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -f [NC,OR]
RewriteCond %{REQUEST_FILENAME} -d [NC]
RewriteRule .* - [L]
RewriteRule .* index.php 
```

有谁知道如何将两者结合起来，直到可以完全替换原件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:11:59.837

如果您可以以某种方式将旧 URL 映射到 Zend Url，那么这将相当容易。假设你有

```
http://foo.bar.com/something.php?q=arg1&r=arg2 
```

那么如果你有这个功能在 Zend 代码中工作，那么你还必须在那里有有效的 URL，比如

```
http://foo.bar.com/something/q/arg1/r/arg2 
```

如果是这样，您所需要的就是将旧 URL 重写为 Zend URL，而不是进行内部重定向，而是进行 HTTP 重定向，即（在我的脑海中，未经测试）：

```
RewriteCond %{QUERY_STRING} ^q=(.*)&r=(.*)^  
RewriteRule ^something\.php$ /something/q/%1/r/%2? [R=301,L] 
```

注意尾随的“？” 它告诉 mod_rewrite 不要将原始查询字符串附加到重写的查询字符串（否则您将以 . 结尾`/something/q/%1/r/%2?q=X&r=y`。请注意，我们在这里进行常规 301 HTTP 重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:28:31.700

它们不会很容易合并，这是您希望哪个优先的问题。您可以添加更多条件以确保不会将所有内容作为`$1.php`文件路由，然后将 zend 规则添加到末尾。

```
Options +FollowSymLinks
RewriteEngine On 

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php

RewriteCond %{REQUEST_URI} ^([^/]+)/
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^([^/]+)/([^/]+)/$ $1.php?q=$2

RewriteCond %{REQUEST_URI} ^([^/]+)/
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/$ $1.php?q=$2&r=$3

RewriteCond %{REQUEST_URI} ^([^/]+)/
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/$ $1.php?q=$2&r=$3&s=$4

# other rules
RewriteCond %{REQUEST_FILENAME} -f [NC,OR]
RewriteCond %{REQUEST_FILENAME} -d [NC]
RewriteRule .* - [L]
RewriteRule .* index.php 
```

# shopify - 如何在启动后识别 Shopify 商店的初始起始库存

> ID：12254871
> 
> 赞同：0
> 
> 时间：2012-09-03T22:58:05.017
> 
> 标签：shopify, inventory

我们在一系列活动中开始了我们的商店，我们最初发布的一些库存没有记录。我们可以轻松找到这些信息吗？

谢谢！

# javascript - 检查变量是否为字符串的简单方法？

> ID：12254882
> 
> 赞同：6
> 
> 时间：2012-09-03T23:00:16.533
> 
> 标签：javascript, string

这个问题是[[] 的衍生，是 Array 的一个实例，但 "" 不是 String](https://stackoverflow.com/questions/12254658/is-an-instance-of-array-but-isnt-of-string)

鉴于

```
"" instanceof String; /* false */
String() instanceof String; /* false */
new String() instanceof String; /* true */ 
```

和

```
typeof "" === "string"; /* true */
typeof String() === "string"; /* true */
typeof new String() === "string"; /* false */ 
```

然后，如果我有一个变量`abc`并且我想知道它是否是一个字符串，我可以这样做

```
if(typeof abc === "string" || abc instanceof String){
    // do something
} 
```

有没有更简单、更短、更原生的方法，还是我必须创建自己的函数？

```
function isStr(s){
    return typeof s === "string" || s instanceof String;
}
if(isStr(abc)){
    // do something
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T23:08:10.107

我认为`Object.prototype.toString.call(a) === "[object String]"`是这样做的最短/最原始的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T02:09:44.253

您可能会感到困惑，因为它是定义为创建数组**对象**`[]`的[数组初始化程序](http://ecma-international.org/ecma-262/5.1/#sec-11.1.4)（通常称为数组文字），而定义为创建字符串**原语**的[字符串文字](http://ecma-international.org/ecma-262/5.1/#sec-7.8.4)。**`''`**

 ****原语不是任何类型对象的实例，尽管为了方便起见，它可能被强制转换为相关对象。

一个更重要的问题是，为什么一个`isString`函数应该对字符串原语和字符串对象都返回 true？字符串对象的使用（非常？）很少见，我原以为它们的使用会推断出特殊处理，并且您希望区分两者而不是相同对待它们。

忽略变量的类型更为常见，并且在它的类型可能不同的地方，无条件地将其转换为所需的类型，例如，如果你想要一个字符串原语：

```
function foo(s) {
  s = String(s); // s is guaranteed to be a string primitive
  ...
} 
```

例外情况是函数被重载并具有不同的行为，具体取决于特定参数是函数、对象还是其他。这种重载通常不被认为是一个好主意，但许多 javascript 库都依赖于它。在这些情况下，传递 String 对象而不是字符串原语可能会产生意想不到的后果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T23:25:18.720

你是对的：

```
typeof myVar == 'string' || myVar instanceof String; 
```

是检查变量是否为字符串的[最佳方法之一。](https://stackoverflow.com/a/9436948/908879)****

# c# - 在视图中间接（和同步）使用异步方法

> ID：12254883
> 
> 赞同：1
> 
> 时间：2012-09-03T23:00:20.943
> 
> 标签：c#, asp.net-mvc-4, scheduler, .net-4.5, async-await

> **可能重复：**
> [“在这种情况下不允许异步操作”](https://stackoverflow.com/questions/9175329/asynchronous-operations-are-not-allowed-in-this-context)

所以，我有一个调用以下方法的母版页：

```
public static bool GetAdsEnabled()
{
    return SomeAsyncMethodThatReturnsTaskOfBool().Result;
} 
```

如下：

```
<%if(AdsHelper.GetAdsEnabled())
  { //blah
  }%> 
```

但是，似乎调度程序已经被弄乱了，即使这段代码应该同步执行，它实际上也会抛出以下错误：

> InvalidOperationException：在此上下文中不允许异步操作。启动异步操作的页面必须将 Async 属性设置为 true，并且只能在 PreRenderComplete 事件之前的页面上启动异步操作。

这似乎是一个错误的身份案例。如何在 asp.net mvc 上下文中同步使用异步方法？

# google-maps - Google Directions API 并在 iOS 6 上使用 MapKit 显示结果？

> ID：12254884
> 
> 赞同：2
> 
> 时间：2012-09-03T23:00:45.827
> 
> 标签：google-maps

我想在 iOS 6 上使用 Google Directions API，但我担心 Maps API 服务条款中的第 10.1.1g 节规定内容必须仅显示在 Google 地图上。我是否可以在 iOS 6 上使用 Google Directions API 并使用 MapKit 显示结果？

# python - 使用 Python 列表理解来匹配二维数组和简单列表中存在的值

> ID：12254885
> 
> 赞同：1
> 
> 时间：2012-09-03T23:00:55.447
> 
> 标签：python, numpy

我正在尝试将 2d 数组的值与列表进行匹配，以便创建一个新的 2d 数组，其中包含列表及其来自 2d 数组的相应值。用代码可能比英语更容易理解......

```
import numpy as np

m_out = np.arange(50).reshape(25,2)
m_out_list = list(m_out[:,1])

eqn_out = range(7,17)

c_list = [(x,y) for x in eqn_out for y in m_out[:,0] if x in (m_out_list)]

print c_list 
```

这段代码产生了我期望的答案，

```
[(7, 0), (7, 2), (7, 4), (7, 6), ... 
```

然而，这不是我想要完成的。我希望列表理解的最后一部分（或任何其他有效的方法）是提供一个数组，该数组将 eqn_out 列表与其对应的唯一原始值相匹配；IE

```
[(7,6), (9,8), (11,10), (13,12), (15,14), (17,16)] 
```

我不确定如何准确地做到这一点，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:18:45.837

像这样的东西：

```
[(j, i) for (i,j) in m_out if j in eqn_out] 
```

似乎工作。然而，这可能有点浪费，因为我们迭代的是整体`m_out`而不是子集。

一种替代方法可能是：

```
test = reduce(np.logical_or,v(m_out[:,1]==i for i in eqn_out))
[(j,i) for (i,j) in m_out[test]] 
```

在这里，我们迭代`len(eqn_out)`布尔数组，我们将其与`reduce(np.logical_or, ...)`. 我们使用这个布尔数组来选择我们想要的项目`m_out`。因为您希望第二列的元素排在第一位，所以我们必须使用最后一个列表推导。

请注意，它需要创建至少 2 N 个布尔数组，这可能比第一个解决方案更浪费……不过，这两种解决方案都可以轻松应用于多于 2 的列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T23:23:17.000

[编辑将更简单的方法放在首位。]

在实践中，我可能会这样做：

```
In [166]: d = dict(m_out[:,::-1])
In [167]: [(k, d[k]) for k in eqn_out if k in d]
Out[167]: [(7, 6), (9, 8), (11, 10), (13, 12), (15, 14), (17, 16)] 
```

但是为了好玩，坚持使用 numpy，比如：

[更新：更好的 numpy 方法]：

```
In [15]: m_out[np.in1d(v, eqn_out)][:, ::-1]
Out[15]: 
array([[ 7,  6],
       [ 9,  8],
       [11, 10],
       [13, 12],
       [15, 14],
       [17, 16]]) 
```

或者我原来的 numpy 方法：

```
In [150]: import numpy as np
In [151]: m_out = np.arange(50).reshape(25,2)   
In [152]: v = m_out[:,1]    
In [153]: eqn_out = np.arange(7, 18)     
In [154]: eqn_out
Out[154]: array([ 7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17]) 
```

只保留我们知道的价值观：

```
In [155]: np.intersect1d(eqn_out, v)
Out[155]: array([ 7,  9, 11, 13, 15, 17]) 
```

查找它们所在的位置（假设数据已排序！！）：

```
In [156]: v.searchsorted(np.intersect1d(eqn_out, v))
Out[156]: array([3, 4, 5, 6, 7, 8]) 
```

使用这些索引进行选择：

```
In [157]: m_out[v.searchsorted(np.intersect1d(eqn_out, v))]
Out[157]: 
array([[ 6,  7],
       [ 8,  9],
       [10, 11],
       [12, 13],
       [14, 15],
       [16, 17]]) 
```

翻动：

```
In [158]: m_out[v.searchsorted(np.intersect1d(eqn_out, v))][:,::-1]
Out[158]: 
array([[ 7,  6],
       [ 9,  8],
       [11, 10],
       [13, 12],
       [15, 14],
       [17, 16]]) 
```

# grails - 在特定语言环境中呈现 SINGLE GSP

> ID：12254888
> 
> 赞同：1
> 
> 时间：2012-09-03T23:01:22.993
> 
> 标签：grails, internationalization, locale, gsp

我正在尝试在特定语言环境中呈现 GSP。

这两种解决方案都有效

使用参数

```
 /book/list?lang=es 
```

在控制器中使用代码

```
 def newLocale = new Locale(lang)
    RCU.getLocaleResolver(request).setLocale(request, response, newLocale)
    render(view: "mail", model: [invoiceInstance: invoiceInstance]) 
```

不幸的是，这两种解决方案都会永远改变会话对象，并在之后影响所有 GSP。

如果我在 Render 语句之后尝试更改 LocaleResolver 它将不起作用。

```
 // Switch to OWNER language for print preview
    def newLocale = new Locale(lang)
    RCU.getLocaleResolver(request).setLocale(request, response, newLocale)

    render(view: "mail", model: [invoiceInstance: invoiceInstance])

    // switch back to user language
    def newLocale2 = new Locale(user.language)
    RCU.getLocaleResolver(request).setLocale(request, response, newLocale2) 
```

那么如何在特定的语言环境中强制进行 SINGLE 渲染呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:23:27.503

[如果您在渲染器的位置使用新的页面渲染 API](http://grails.org/doc/latest/guide/single.html#webFeatures) ，我认为您的第二次尝试可以工作。

```
 // Switch to OWNER language for print preview
    def newLocale = new Locale(lang)
    RCU.getLocaleResolver(request).setLocale(request, response, newLocale)

    def contents = groovyPageRenderer.render(view:"/controller/mail", model: [invoiceInstance: invoiceInstance])

    // switch back to user language
    def newLocale2 = new Locale(user.language)
    RCU.getLocaleResolver(request).setLocale(request, response, newLocale2)

    render contents 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:14:02.963

经过大量搜索后，我不得不将语言环境对象传递给 GSP 中的每个标签。

对于 Grails 来说并不优雅，但它确实有效。

# php - 使用 select last_insert_id 生成唯一 ID

> ID：12254890
> 
> 赞同：0
> 
> 时间：2012-09-03T23:01:50.147
> 
> 标签：php, mysql, last-insert-id

在阅读了 Stackoverflow 上的可能选项后，我没有看到我正在考虑的确切情况的答案......

案例：我有一个自动生成与 mysql 连接的模板的 php 系统。

为了使系统正常工作，我需要每个生成的模板在创建时分配一个唯一的 6 位整数。而不是弄乱随机发生器等......

A）我可以简单地在数据库中创建一个名为'pageid'的表，int（11）/唯一/自动增量，起始值为100000，然后在模板创建过程中，只需在此表上执行插入，然后'选择 last_insert_id()' 来提取最后一个值，然后在创建模板时将其注入到模板中？（换句话说，该表的唯一功能是生成并返回最后一个唯一 ID）。

B）如果是这样，我应该担心使用这种方法有什么问题吗？（除了这意味着只能生成 899,999 个模板的限制——在这种情况下这不是问题）。

任何想法或更好的方法表示赞赏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:05:03.557

1.  > 我可以简单地在数据库中创建一个名为“pageid”的表，int(11) / unique / autoincrement 起始值为 100000，然后在模板创建过程中，只需在该表上执行插入，然后选择 last_insert_id ()' 提取最后一个值，然后在创建模板时将其注入到模板中？（换句话说，该表的唯一功能是生成并返回最后一个唯一 ID）。

    是的：

    ```
    CREATE TABLE pages (
      pageid MEDIUMINT(6) NOT NULL AUTO_INCREMENT PRIMARY KEY
    ) AUTO_INCREMENT = 100000; 
    ```

    请注意，我正在使用`MEDIUMINT(6)`它，因为它需要的存储空间比它少 1 个字节，`INT`并且具有更适合您需要的显示宽度。

2.  > 如果是这样，我应该担心使用这种方法有什么问题吗？（除了这意味着只能生成 899,999 个模板的限制——在这种情况下这不是问题）。

    相反，您可以只在`templates`表中拥有该列，并在`id`插入新记录时自动分配。

# android - 用户从预设图像中选择背景

> ID：12254891
> 
> 赞同：0
> 
> 时间：2012-09-03T23:02:08.717
> 
> 标签：android

我的应用程序中包含 5 个背景图像。如何使用户可以从 5 个选项中更改背景图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:16:24.043

您没有指定问题，但我仍会尽力提供帮助。我认为您的问题是无法设置背景。

Android 上的每个 View 都支持自定义背景。您可以通过在 XML 中静态设置它，如下所示：

```
<LinearLayout
  android:layout_width = "fill_parent"
  android:layout_height = "fill_parent"
  android:background = "@drawable/bck"
></LinearLayout> 
```

或以编程方式：

```
View v = findViewById(R.id.a_view);
v.setBackground(R.drawable.bck); 
```

# php - Var 转储不显示

> ID：12254893
> 
> 赞同：0
> 
> 时间：2012-09-03T23:02:36.117
> 
> 标签：php, mysql, var-dump

我试图让 Var Dump 显示，但我得到的只是一个白屏。有什么建议么？

```
<?php
require('includes/config.inc.php');
require(MYSQL);
$aid = FALSE;
if (isset($_GET['aid']) && filter_var($_GET['aid'], FILTER_VALIDATE_INT, array('min_range' => 0))){
  $aid = $_GET['aid'];

  $q = "SELECT aircraft_id, aircraft_name AS name, aircraft_type AS type, tail_number AS tn FROM aircraft WHERE aircraft_id=$aid";
var_dump($q); die();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:10:10.183

除非`MYSQL`是脚本中定义的常量，否则这行代码将失败并且脚本执行将立即停止：

```
require(MYSQL); 
```

如[文档](http://php.net/require)中所述：

> require 与 include 相同，但失败时也会产生致命的 E_COMPILE_ERROR 级别错误。换句话说，它将停止脚本，而 include 只发出一个警告（E_WARNING），允许脚本继续。

# multidimensional-array - 为多维数组寻找一些任务（学校）

> ID：12254896
> 
> 赞同：1
> 
> 时间：2012-09-03T23:03:16.743
> 
> 标签：multidimensional-array

你有任何多维数组任务。我需要一些练习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:36:26.893

我的老师在某些情况下在[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)中使用了多维数组。要存储临时结果，它需要一个数组。这是问题的一个特点：等级？这需要相同级别的多维数组。例如，如果等级为 3，则您需要绕过 int[][][] 到 resoveProblem() 函数。

如果我永远是老师……我会搜索一个动态编程所需的任务，我会用多数组提出解决方案。希望学生们能够意识到执行速度的差异，并解决、练习矩阵问题。

任务2：您可以发明一个文本为什么需要将数据存储在一维数组中，例如需要将数据保存到文件中，而不是想象一下为什么需要二维数组来使用虚拟棋盘中加载的数据。比他们必须做 1 维到 2 维的转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:19:40.403

乘法矩阵

哎呀！您的答案无法提交，因为：

正文必须至少为 30 个字符；你输入了 17

# java - Java类型系统中的错误？

> ID：12254897
> 
> 赞同：4
> 
> 时间：2012-09-03T23:03:25.347
> 
> 标签：java, generics, types, wildcard

想象一下有一个主类——**模拟器**——它使用另外两个类——**生产者**和**评估**者，它们分别实现接口 IProducer 和 IEvaluator。

IProducer 实现产生结果，而 IEvaluator 实现评估这些结果。模拟器通过查询 IProducer 实现然后将结果传送到 IEvaluator 实例来控制执行流程。

Producer 和 Evaluator 的实际实现在运行时是已知的，在编译时我只知道它们的接口。检查下面的示例。

```
package com.test;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

/**
 * Producers produce results. I do not care what their actual type is, but the
 * values in the map have to be comparable amongst themselves.
 */
interface IProducer<T extends Comparable<T>> {
    public Map<Integer, T> getResults();
}

/**
 * This example implementation ranks items in the map by using Strings.
 */
class ProducerA implements IProducer<String> {
    @Override
    public Map<Integer, String> getResults() {
        Map<Integer, String> result = new HashMap<Integer, String>();
        result.put(1, "A");
        result.put(2, "B");
        result.put(3, "B");

        return result;
    }
}

/**
 * This example implementation ranks items in the map by using integers.
 */
class ProducerB implements IProducer<Integer> {
    @Override
    public Map<Integer, Integer> getResults() {
        Map<Integer, Integer> result = new HashMap<Integer, Integer>();
        result.put(1, 10);
        result.put(2, 30);
        result.put(3, 30);

        return result;
    }
}

/**
 * Evaluator evaluates the results against the given groundTruth. All it needs
 * to know about results, is that they are comparable amongst themselves.
 */
interface IEvaluator {
    public <T extends Comparable<T>> double evaluate(Map<Integer, T> results,
            Map<Integer, Double> groundTruth);
}

/**
 * This is example of an evaluator, metric Kendall Tau-B. Don't bother with
 * semantics, all that matters is that I want to be able to call
 * r1.compareTo(r2) for every (r1, r2) that appear in Map<Integer, T> results.
 */
class KendallTauB implements IEvaluator {
    @Override
    public <T extends Comparable<T>> double evaluate(Map<Integer, T> results,
            Map<Integer, Double> groundTruth) {
        int concordant = 0, discordant = 0, tiedRanks = 0, tiedCapabilities = 0;

        for (Entry<Integer, T> rank1 : results.entrySet()) {
            for (Entry<Integer, T> rank2 : results.entrySet()) {
                if (rank1.getKey() < rank2.getKey()) {
                    final T r1 = rank1.getValue();
                    final T r2 = rank2.getValue();
                    final Double c1 = groundTruth.get(rank1.getKey());
                    final Double c2 = groundTruth.get(rank2.getKey());

                    final int ranksDiff = r1.compareTo(r2);
                    final int actualDiff = c1.compareTo(c2);

                    if (ranksDiff * actualDiff > 0) {
                        concordant++;
                    } else if (ranksDiff * actualDiff < 0) {
                        discordant++;
                    } else {
                        if (ranksDiff == 0)
                            tiedRanks++;

                        if (actualDiff == 0)
                            tiedCapabilities++;
                    }
                }
            }
        }

        final double n = results.size() * (results.size() - 1d) / 2d;

        return (concordant - discordant)
                / Math.sqrt((n - tiedRanks) * (n - tiedCapabilities));
    }
}

/**
 * The simulator class that queries the producer and them conveys results to the
 * evaluator.
 */
public class Simulator {
    public static void main(String[] args) {
        // example of a ground truth
        Map<Integer, Double> groundTruth = new HashMap<Integer, Double>();
        groundTruth.put(1, 1d);
        groundTruth.put(2, 2d);
        groundTruth.put(3, 3d);

        // dynamically load producers
        List<IProducer<?>> producerImplementations = lookUpProducers();

        // dynamically load evaluators
        List<IEvaluator> evaluatorImplementations = lookUpEvaluators();

        // pick a producer
        IProducer<?> producer = producerImplementations.get(0);

        // pick an evaluator
        IEvaluator evaluator = evaluatorImplementations.get(0);

        // evaluate the result against the ground truth
        double score = evaluator.evaluate(producer.getResults(), groundTruth);

        System.out.printf("Score is %.2f\n", score);
    }

    // Methods below are for demonstration purposes only. I'm actually using
    // ServiceLoader.load(Clazz) to dynamically discover and load classes that
    // implement interfaces IProducer and IEvaluator
    public static List<IProducer<?>> lookUpProducers() {
        List<IProducer<?>> producers = new ArrayList<IProducer<?>>();
        producers.add(new ProducerA());
        producers.add(new ProducerB());

        return producers;
    }

    public static List<IEvaluator> lookUpEvaluators() {
        List<IEvaluator> evaluators = new ArrayList<IEvaluator>();
        evaluators.add(new KendallTauB());

        return evaluators;
    }
} 
```

此代码在没有警告的情况下编译，并且也按应有的方式运行。这是[我之前提出的问题的解决方案](https://stackoverflow.com/questions/12188183/how-to-parametrize-comparable-interface)，所以这是一个后续问题。

使用上面的代码，假设您想将 producer.getResults() 调用的结果存储在一个变量中（稍后将在对 evaluator.evaluate(results, groundTruth) 调用的调用中使用该变量）。**该变量的类型是什么？**

地图<整数, ?>, 地图<整数, ? 扩展 Comparable<?>>? 使main方法泛型并使用泛型类型？到目前为止，我尝试过的任何方法都不起作用。编译器会抱怨我提出的每种类型。

```
public static void main(String[] args) {
    // example of a ground truth
    Map<Integer, Double> groundTruth = new HashMap<Integer, Double>();
    groundTruth.put(1, 1d);
    groundTruth.put(2, 2d);
    groundTruth.put(3, 3d);

    // dynamically load producers
    List<IProducer<?>> producerImplementations = lookUpProducers();

    // dynamically load evaluators
    List<IEvaluator> evaluatorImplementations = lookUpEvaluators();

    // pick a producer
    IProducer<?> producer = producerImplementations.get(0);

    // pick an evaluator
    IEvaluator evaluator = evaluatorImplementations.get(0);

    // evaluate the result against the ground truth
    Map<Integer, ?> data = producer.getResults(); // this type works
    double score = evaluator.evaluate(data, groundTruth); // but now this call does not

    System.out.printf("Score is %.2f\n", score);
} 
```

似乎 producer.getResults() 返回的东西不能用 Java 静态表达。这是一个错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:38:27.173

在我回答之前的一个注释：你的所有`T extends Comparable<T>`陈述都应该是`T extends Comparable<? super T>`，它允许更大的灵活性（你为什么要关心它是否比较`T`s 或`Object`s？），并且它是我的解决方案工作所必需的。

这并不是 Java 类型系统的真正“错误”，它只是给它带来了不便。Java 并不特别喜欢将交集类型作为类型声明的一部分。

我发现解决这个问题的一种方法是创建一个在正常情况下不应该使用的“不安全”方法：

```
@SuppressWarnings("unchecked")
private static <T extends Comparable<? super T>> Map<Integer, T> cast(Map<Integer, ?> map) {
    return (Map<Integer, T>) map;
} 
```

只需确保使用`Map`实际上是 a 的a 调用此方法`Map<Integer, T extends Comparable<? super T>>`（就像 one`IProducer`的返回值一样）。

使用此方法，您可以执行以下操作：

```
IProducer<?> producer = ...
IEvaluator evaluator = ...
Map<Integer, ?> product = producer.getResults();
evaluator.evaluate(cast(product), truth); 
```

然后 Java 会自动为您推断出正确的类型参数。

此外，该`I`前缀在 Java 社区中[通常不受欢迎。](https://stackoverflow.com/questions/541912/interface-naming-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:06:40.977

这不是一个错误，但确实是一个限制。在类型系统社区中众所周知，带有通配符的 Java 具有无法用 Java 语法表示的类型。您的示例展示了一种这样的情况，并证明通配符本质上与 F 有界多态性（即形式的类型参数`T extends Something<T>`）不兼容。

坦率地说，通配符是一种可怕的类型系统黑客攻击。它们不应该被放入 Java 中。一个人真正想要的以及使您的示例可表达的是适当的*存在类型*（其中通配符是一种有限的临时变体）。不幸的是，Java 没有它们（尽管 Scala 有）。

# python - Python fmin 太慢了

> ID：12254898
> 
> 赞同：3
> 
> 时间：2012-09-03T23:03:32.660
> 
> 标签：python, optimization, numpy, scipy

我在 x_data 中有一个 3x2000 numpy 数组，在 y_data 中有一个 1x2000 numpy 数组，我将其传递给这个函数 regress 给我一条回归线。它工作正常。问题是我正在尝试进行一些回溯测试并测试 1000 种情况，我必须回归 1000 次，运行它大约需要 5 分钟。

我尝试标准化变量，但它似乎并没有让它更快。

我还简单地尝试了 fmin_powell 和 fmin_bfgs，这似乎打破了它。

有任何想法吗？谢谢！

```
def regress(x_data, y_data, fg_spread, fg_line):

    theta = np.matrix(np.ones((1,x_data.shape[0]))*.11)
    hyp = lambda theta, x: 1 / (1 + np.exp(-(theta*x)))
    cost_hyp = lambda theta, x, y: ((np.multiply(-y,np.log10(hyp(theta,x)))) - \
                            (np.multiply((1-y),(np.log10(1-hyp(theta, x)))))).sum()

    theta = scipy.optimize.fmin(cost_hyp, theta, args=(x_data,y_data), xtol=.00001, disp=0)

    return hyp(np.matrix(theta),np.matrix([1,fg_spread, fg_line]).reshape(3,1)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:18:25.763

使用[numexpr](http://code.google.com/p/numexpr/)使您的 hyp 和 cost_hyp 计算更快地进行评估。fmin 函数族为不同的条目多次计算这些函数。因此，这些功能的任何收益都直接在最小化中报告。

因此，例如，您将替换：

```
hyp = lambda theta, x: 1 / (1 + np.exp(-(theta*x))) 
```

经过：

```
hyp = lambda theta, x: numexpr.evaluate("1 / (1 + exp(-(theta*x)))") 
```

Numexpr 旨在与 numpy 数组一起使用。

# amazon-s3 - 亚马逊 s3 视频流

> ID：12254900
> 
> 赞同：1
> 
> 时间：2012-09-03T23:03:55.877
> 
> 标签：amazon-s3, amazon, audio-streaming

我已将视频保存在 s3（亚马逊）中。我通过 api 在我的页面上获取视频。当我在 jwplayer 脚本中使用提供程序和流媒体值时，它不会播放。它只显示处理。在 chrome 中正在显示 Flash 文件。请让我知道如何解决此问题。我正在使用以下 jwplayerscript

```
<div id="mediaplayer"></div>    
<script type="text/javascript" src="https://www.markettrendsignal.com/js/jwplayer.js"></script>
 <script type="text/javascript">
 jwplayer("mediaplayer").setup({
 flashplayer: "http://s3.amazonaws.com/coaching_videos_out/player.swf",
 file:"http://s3.amazonaws.com/coaching_videos_out/20120607/2012-06-13%2018.02%20Course%201%20-%20Market%20Trend%20Signal%20-%20Lesson%201%281%29.flv",
    height: 410,
    provider: "rtmp",
    streamer: "rtmp://s2wk266t4t9j1u.cloudfront.net/cfx/st",
    width: 590,
    autostart:true
}); 
```

请让我知道如何尽快解决此问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T10:38:53.720

上传时尝试在 S3 对象上设置 Content-Type 标头，您可以通过使用 amazon S3 explorer 或 SDK 更新对象元数据来对已上传的对象执行此操作。

# c - 如何让 GCC 在没有“文件是为不受支持的文件格式构建的”的情况下正确编译目标文件？

> ID：12254907
> 
> 赞同：0
> 
> 时间：2012-09-03T23:05:15.533
> 
> 标签：c, macos, gcc, shared-libraries, llvm-gcc

编译时出现此错误：

```
ld: warning: ignoring file /Users/matt/Programming/BitEagle_Projects/cbitcoin/build/obj/CBNetworkFunctions.o, file was built for unsupported file format ( 0x7f 0x45 0x4c 0x46 0x 2 0x 1 0x 1 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 0x 0 ) which is not the architecture being linked (x86_64): /Users/matt/Programming/BitEagle_Projects/cbitcoin/build/obj/CBNetworkFunctions.o 
```

并且对于使用以下命令编译目标文件时的所有其他目标文件：

```
gcc -c -O2 -Wall -Wno-overflow -pedantic -std=c99 -I/Path/To/Headers -m64 -o objFile.o srcFile.c 
```

我尝试使用以下方法链接文件：

```
gcc -dynamiclib -Wl -flat_namespace -undefined dynamic_lookup -o libwhatever objFile1.o objFile2.o 
```

那么是什么导致了这个问题呢？

gcc 版本为：i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.11.00）

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:07:57.810

第一条错误消息中的标头信息表明这`CBNetworkFunctions.o`是一个 ELF（可能是 Linux）目标文件，而不是 OS X Mach-O 目标文件。

如果此目标文件不是由您的构建过程创建的，您将需要将其删除并替换为由 Mac OS X 工具链构建的目标文件。

如果它是由您的构建过程创建的，那么会发生一些非常奇怪的事情，您需要向我们提供有关您正在做什么的更多细节。

# checkbox - ASP.NET MVC 4 条件属性和 HTML 帮助器

> ID：12254908
> 
> 赞同：2
> 
> 时间：2012-09-03T23:05:16.940
> 
> 标签：checkbox, asp.net-mvc-4, html-helper

您可以像使用原始 html 元素一样在 html 助手中执行条件属性吗？

```
@Html.CheckBox("", new { @checked = (Model ? "checked" : null)); 
```

不适合我，仍然呈现空白的“已检查”属性。希望它像下面的代码一样工作。

```
<div class="@myClass">Content</div> 
```

渲染

```
<div>Content</div> 
```

如果@myClass 为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:46:55.160

您需要为复选框命名，否则它将引发错误，然后行中的下一个属性是 isChecked 属性，因此您只需要简单地检查模型是否为空。

```
@Html.CheckBox( "checkbox", Model == null ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:09:55.060

I think you can solve this with a simple `@helper` method; something like:

```
@helper AwesomeCheckBox() {
  if (Model == null) {
    @Html.CheckBox("", new { @checked = null);
  } else {
    @Html.CheckBox("", new { @checked = "checked");
  }
} 
```

# android - 从通知中的pendingIntent调用接收者

> ID：12254909
> 
> 赞同：2
> 
> 时间：2012-09-03T23:05:28.670
> 
> 标签：android

所以我改变了我的代码来调用广播接收器而不是调用主要活动

```
Intent notificationIntent = new Intent(context, com.plugin.statusNotificationForGCM.statusNotificationForGCMReceiver.class);

notificationIntent.putExtra(NOTIF_RESPOND, runThis);
notificationIntent.setAction(Intent.ACTION_VIEW);
notificationIntent = notificationIntent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);

//contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
contentIntent = PendingIntent.getBroadcast(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

问题是我在我的接收器中添加了这个，但不认为它正在运行。单击通知时看不到标签并登录控制台

```
public class statusNotificationForGCMReceiver extends BroadcastReceiver {
    private static final String TAG = "statusNOTIFICATIONReceiver";

    @Override
    public final void onReceive(Context context, Intent intent) {
        Log.v(TAG,"ASDFSJD FASDF ASDPFJA SDFPAUS DFPAS DFASDF");
    }
} 
```

有什么我想念的吗？我必须在清单文件中添加一些东西吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T23:12:25.857

您可能需要在清单中有这个：

合适的意图在其定义`<intent-filter>`

```
<activity android:name="BroadcastIntents" android:label="@string/app_name"/>
    <receiver android:name="statusNotificationForGCMReceiver" android:label="@string/app_name">
       <intent-filter>
          <action android:name="android.test.BROADCAST" />
       </intent-filter>
    </receiver> 
```

附加物：

一个[意图过滤器](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)让你告诉一个活动它可以/不能响应什么（当被意图调用时）。

```
public class InternalMessageReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context ctx, Intent intent) {
        String msg = intent.getStringExtra("message");
        Toast.makeText(ctx,msg,Toast.LENGTH_SHORT).show();
    }
} 
```

您可以在 Activity 中调用它，例如单击这样的按钮：

```
private static final String ACTION = "android.test.BROADCAST";

public void onClick(View v) {
        /* Broadcast intent */
        Intent intent = new Intent(ACTION);
        intent.putExtra("message", msg);
        main_activity.sendBroadcast(intent);
} 
```

# jquery - iScroll 未检测到 mouseup

> ID：12254911
> 
> 赞同：1
> 
> 时间：2012-09-03T23:06:26.017
> 
> 标签：jquery, events, iscroll, mouseup

[http://jsfiddle.net/zyVUU/](http://jsfiddle.net/zyVUU/)

在小提琴中，如果我开始拖动 div，然后保持 mousedown 转到 over CSS 框，离开鼠标（mouseup）然后回到橙色 div，滚动条跟随鼠标。

它没有检测到 mouseup 事件。我怎么能强迫它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:15:45.153

那是因为它`div`有一个`pointer-events: none;`属性。

> CSS 属性`pointer-events`允许作者控制特定图形元素在什么情况下（如果有）可以成为鼠标事件的目标。

# php - MySQL 数据库填充下拉框和 PHP 搜索

> ID：12254915
> 
> 赞同：0
> 
> 时间：2012-09-03T23:07:07.293
> 
> 标签：php, mysql, forms, search, dropdownbox

我对使用文本框和下拉框在网页上进行搜索有疑问。

我有字段表：

```
ID
名
姓
公司名称
职业
描述

```

现在我需要制作将从数据库（字段`Occupation`）和文本框中填充的搜索表单，我可以在其中放置我想要的任何内容，然后根据网页上的内容从数据库中获取结果。

我真的很抱歉，但我完全是初学者，只需要一些此类代码的示例和很多帮助:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:36:00.417

您将要使用 AJAX 从页面调用 php 脚本，然后使用 php 脚本查询数据库并将结果回显到页面。

我将在这个例子中使用 jQuery，因为它节省了很多行，如果你还没有，你应该检查一下。

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript">
        function searchOccupation () {
            $.ajax({
                url: "searchOccupation.php?search=" + $('#searchTxt').attr('value'),
                success: function (data) {
                    alert(data);
                }
            });
        }
</script>
</head>
<body>
    <input type="text" id="searchTxt">
    <input type="button" value="Search" id="searchBtn" onclick="searchOccupation()">
</body> 
```

然后您的 php 脚本（其名称应与 ajax 调用的“url”字段中的名称匹配（在本例中应命名为“searchOccupation.php”）将如下所示：

```
<?php
    $searchTxt = $_GET['search'];
    mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
    $con = new mysqli('server', 'user', 'password', 'database');
    $sql = "SELECT * FROM tableName WHERE occupation = ?";
    $stmt = $con->prepare($sql);
    $stmt->bind_param('s', $searchTxt);
    $stmt->execute();
    $result = $stmt->get_result();
    while($row = $result->fetch_assoc()) {
        echo $row['firstName'];  //This sends data back to the page 
    } 
?> 
```

php 脚本的 echo 部分是将数据发送回 javascript 的“成功：函数（数据）”，因此如上所示在页面上回显您想要的任何字段。

编辑：稍微误解了你的意思，上面的ajon可能是你需要的。

# c# - 在while循环中创建动态图像按钮并在不使用gridview的情况下触发它们的事件

> ID：12254916
> 
> 赞同：1
> 
> 时间：2012-09-03T23:07:18.407
> 
> 标签：c#, dynamic, while-loop, imagebutton

我正在尝试做这些：

1.  访问我网站的内容并从我的数据库中读取主题
2.  在不使用网格视图的情况下动态创建表格并在其中动态生成图像按钮以编辑和删除我的内容。

我成功地为我的一个图像按钮定义了一个回发 URL，并将其发布到具有我的内容 ID 的新页面以对其进行编辑，但我未能定义一个事件并触发它以删除我的内容而无需转到新页面。

这是我的代码：

```
var cn = new SqlConnection();
        var cmd = new SqlCommand();

        int i=0;

        try
        {
            using (cn = new SqlConnection(ConfigurationManager.ConnectionStrings["cnString"].ToString()))
            {
                cn.Open();
                using (cmd = new SqlCommand("ContentArchiveCategory", cn))
                {
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.AddWithValue("@CatID", txtCategories.SelectedValue);
                    var dr = cmd.ExecuteReader(CommandBehavior.CloseConnection);

                    while (dr.Read())
                    {
                        i++;

                        if (i % 2 != 0)
                        {
                            var tr = new TableRow();
                                tr.CssClass = "ADACLTOdd".ToString();

                                    var no = new TableCell();
                                        no.Text = i.ToString();
                                        no.CssClass = "ADACLTNoColumn".ToString();
                                    tr.Cells.Add(no);

                                    var date = new TableCell();
                                        date.Text = dr["DateCreated"].ToString();
                                        date.CssClass = "ADACLTDateColumn".ToString();
                                    tr.Cells.Add(date);

                                    var title = new TableCell();
                                        title.Text = dr["Title"].ToString();
                                        title.CssClass = "ADACLTTitleColumn".ToString();
                                    tr.Cells.Add(title);

                                    var edit = new TableCell();
                                        edit.CssClass = "ADACLTEditColumn".ToString();
                                            var ice = new ImageButton();
                                                ice.ImageUrl = "~/Images/ICSEdit.png".ToString();
                                                ice.PostBackUrl = "ContentEdit.aspx?id=" + dr["ContentID"].ToString();
                                                ice.ToolTip = "ویرایش".ToString();
                                        edit.Controls.Add(ice);
                                    tr.Cells.Add(edit);

                                    var delete = new TableCell();
                                        delete.CssClass = "ADACLTDeleteColumn".ToString();

                                            var icd = new ImageButton();
                                                icd.ImageUrl = "~/Images/ICSDelete.png".ToString();
                                                icd.ToolTip = "پاک".ToString();
                                                icd.ID = dr["ContentID"].ToString();
                                                icd.Click += new ImageClickEventHandler(icd_Click);
                                        delete.Controls.Add(icd);
                                    tr.Cells.Add(delete);

                            ContentListTable.Rows.Add(tr);
                        }

                        else
                        {
                            var tr = new TableRow();
                                tr.CssClass = "ADACLTEven".ToString();

                                    var no = new TableCell();
                                        no.Text = i.ToString();
                                        no.CssClass = "ADACLTNoColumn".ToString();
                                    tr.Cells.Add(no);

                                    var date = new TableCell();
                                        date.Text = dr["DateCreated"].ToString();
                                        date.CssClass = "ADACLTDateColumn".ToString();
                                    tr.Cells.Add(date);

                                    var title = new TableCell();
                                        title.Text = dr["Title"].ToString();
                                        title.CssClass = "ADACLTTitleColumn".ToString();
                                    tr.Cells.Add(title);

                                    var edit = new TableCell();
                                        edit.CssClass = "ADACLTEditColumn".ToString();
                                            var ice = new ImageButton();
                                                ice.ImageUrl = "~/Images/ICSEdit.png".ToString();
                                                ice.PostBackUrl = "ContentEdit.aspx?id=" + dr["ContentID"].ToString();
                                                ice.ToolTip = "ویرایش".ToString();
                                        edit.Controls.Add(ice);
                                    tr.Cells.Add(edit);

                                    var delete = new TableCell();
                                        delete.CssClass = "ADACLTDeleteColumn".ToString();

                                            var icd = new ImageButton();
                                                icd.ImageUrl = "~/Images/ICSDelete.png".ToString();
                                                icd.ToolTip = "پاک".ToString();
                                                icd.ID = dr["ContentID"].ToString();
                                                icd.Click += icd_Click;
                                        delete.Controls.Add(icd);
                                    tr.Cells.Add(delete);

                            ContentListTable.Rows.Add(tr);
                        }

                        ContentListTable.Visible = true;
                    }
                }
            }
        }

        catch
        {
            CatMessage.Visible = true;
            CatMessage.BorderColor = System.Drawing.ColorTranslator.FromHtml("#930000");
            CatMessage.BackColor = System.Drawing.ColorTranslator.FromHtml("#F4B7B7");

            CatMsg1.Text = string.Format("{0} عزیز! متاسفانه در برقراری ارتباط با سرور مشکلی پیش آمده، لطفاً این مورد را به مدیریت سایت گزارش کنید", Session["FirstName"]);
        }
    }
}

protected void icd_Click(object sender, EventArgs e)
{
    ImageButton icd = sender as ImageButton;
    CatMessage.Visible = true;
            CatMessage.BorderColor = System.Drawing.ColorTranslator.FromHtml("#930000");
            CatMessage.BackColor = System.Drawing.ColorTranslator.FromHtml("#F4B7B7");
            CatMsg1.Text = string.Format("{0}",icd.ID);
} 
```

我尝试了两种方法 `icd.Click += icd_Click;`并 `icd.Click += new ImageClickEventHandler(icd_Click);`触发了我的活动，但它根本不起作用。

# ruby-on-rails - 我可以在对范围查询设置限制后添加 where 子句吗？

> ID：12254920
> 
> 赞同：1
> 
> 时间：2012-09-03T23:08:10.557
> 
> 标签：ruby-on-rails, activerecord

我有一个名为 Game 的模型，我在其中构建了一个范围查询。

就像是：

```
games = Game.scoped
games = games.team(team_name) if team_name
games = game.opponent(opponent_name) if opponent_name

total_games = games 
```

然后我计算几个子集，如：

```
wins = games.where("team_score > opponent_score").count
losses = games.where("opponent_score > team_score").count 
```

一切都很好。然后我决定要限制原始范围以显示最后 X 场比赛。

```
total_games = games.limit(10) 
```

如果有 100 个游戏与我想要的 total_games 匹配，然后我添加 .limit(10) - 它会得到最后 10 个。太好了。但现在打电话

```
total_games.where("team_score > opponent_score").count 
```

将回到过去 10 次之后，并进入不属于 total_games 的结果。自从添加 .limit(10) 后，我将始终获得 10 场总比赛，但也是 10 胜和 10 负。

全部输入后，我意识到我想使用 limit 的情况是为了显示一组较小的结果 - 所以我可能最终只是循环遍历结果来计算诸如赢和输之类的东西（而不是像我上面的子集中那样做单独的查询）。

当 total_games 有数百或数千个结果时，我尝试了这一点，并且循环比仅对子集进行单独查询要慢得多。

所以，现在我必须知道 - 限制范围查询的最佳方法是什么，然后对那些限制自身结果的结果进行未来查询，这些结果由原始 .limit(x) 返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:32:40.580

`total_games`如果不将查询分为两个步骤，首先从 10 个游戏中获取并使用以下命令进行数据库查询，我认为您无法做您想做的事情`all`：

```
last_10_games = total_games.limit(10).all 
```

然后从结果数组中选择并获取结果的大小：

```
wins = last_10_games.select { |g| g.team_score > g.opponent_score }.count
losses = last_10_games.select { |g| g.opponent_score > g.team_score }.count 
```

我知道这不完全是您所要求的，但我认为这可能是解决问题的最直接的方法。

# javascript - 如何对齐 6 在一个 HTML 页面中水平放置，每个 宽度等于浏览器宽度？

> ID：12254921
> 
> 赞同：-6
> 
> 时间：2012-09-03T23:08:11.103
> 
> 标签：javascript, css, html

现在，我通过保持我的 body width=12000px; 来实现这一点。每个 div 宽度=2000px；

但我想用浏览器宽度动态更改 div 宽度，以便在任何屏幕尺寸上都有标准视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:10:37.983

CSS：

```
div.horisontal { height: 100px; float: left } 
```

JS（之前加载 jquery，无论如何你都需要它）：

```
$(function(){
    var bw = $(window).width();
    $('div.horisontal').width(bw);
})
$(window).resize(function(){
    var bw = $(window).width();
    $('div.horisontal').width(bw);
}) 
```

HTML：

```
<div class="horisontal">div1</div>
<div class="horisontal">div2</div>
<div class="horisontal">div3</div>
<div class="horisontal">div4</div>
<div class="horisontal">div5</div>
<div class="horisontal">div6</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T23:17:41.623

在这里回答您的问题是一个很好的指南。

[http://css-tricks.com/how-to-create-a-horizo​​ntally-scrolling-site/](http://css-tricks.com/how-to-create-a-horizontally-scrolling-site/)

# python - 基于文本的 Python RPG - 存储武器

> ID：12254923
> 
> 赞同：0
> 
> 时间：2012-09-03T23:08:27.997
> 
> 标签：python, coding-style, python-2.7

我是编程新手，我正在自学 Python，作为业余爱好，我正在制作基于文本的 RPG。

我的问题是这个；我想存储一个可以轻松编辑的武器、盔甲等列表，而不会搞砸我的整个程序。我的想法是我为它们制作一个单独的模块并将它们`equipment.py`存储在一个列表中，例如；

```
equipment = [ 
#Longsword
w1 = 15
#Axe
w2 = 17
] 
```

我只需导入它并使用分配给它们的值将用于我决定创建的任何战斗引擎。这甚至正确吗？可怕的编码约定？我有很多东西要学，非常感谢您分享的任何智慧。

编辑：从下面的优秀答案开始，我开始编写代码，我的代码看起来如何？

```
equipment = {

'Longsword':     {  'cost': 50,
                    'damage': 19,
                    'element': 'physical',
                    'description': 'Long steel blade used by the knights of Coamrin. The weight allows it to cleave foes with relative ease.'}

'Estoc':        {   'cost': 45,
                    'damage': 17,
                    'element': 'physical',
                    'description': 'Expertly crafted thin, steel blade designed for thrust and swiping motions.'}

} 
```

有小费吗？我已通读[PEP 8](http://www.python.org/dev/peps/pep-0008/)，但我的知识不够好，或者在这种特殊情况下没有足够具体的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T23:11:43.660

我建议使用 python 字典（而不是列表）会更好。

```
equipment = {
              'Longsword': 15,
              'Axe':       17
            } 
```

这样您就可以引用 longswords 的值，`equipment['Longsword']`而不是通过它在列表中的位置`equipment[0]`。

*将它放在一个单独的模块中可能是一个好主意，也许在一个包含攻击/防御功能和其他项目效果的模块中。*

.

您可能感兴趣的另一个建议（取决于 RPG 的功能）是为该属性和其他属性创建另一个字典，以便您将来可以添加其他属性。那是，

```
equipment = {
             'Longsword': {'attack_str': 15, 'defence_str': 15, 'color': 'grey',... etc.}
             } 
```

*这允许以后添加额外的功能（不破坏以前的机制）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:39:08.273

在我看来，将这些值存储在 python 之外的配置文件中会更好。

例如，[ConfigParser](http://docs.python.org/library/configparser "配置解析器")的语法即使对于不懂任何编程语言的用户也是可读的。

这也使您可以在游戏中制作武器编辑器，并进行永久性更改。实际上，通过使用字典方法，您需要更改程序正在运行的文件，这是我尽量避免的。

# asp.net - 指定的转换错误

> ID：12254925
> 
> 赞同：0
> 
> 时间：2012-09-03T23:08:42.943
> 
> 标签：asp.net, login, casting

我将 VS2012 与`ASP.NET 4.5`我`MySQL`的数据库提供程序一起使用。我现在在某个时间运行良好的代码上收到一个指定的转换错误。它来自我用于注册验证的 Register.aspx 页面，代码改编自 asp.net 网站教程。

这是代码，错误就`Dim newUser as Guid`行了

```
Protected Sub RegisterUser_CreatedUser(ByVal sender As Object, ByVal e As EventArgs) Handles RegisterUser.CreatedUser
    FormsAuthentication.SetAuthCookie(RegisterUser.UserName, False)

    Dim newUser As MembershipUser = Membership.GetUser(RegisterUser.UserName)
    Dim newUserID As Guid = DirectCast(newUser.ProviderUserKey, Guid)
    Dim urlBase As String = Request.Url.GetLeftPart(UriPartial.Authority) & Request.ApplicationPath
    Dim verifyUrl As String = "VerifyNewUser.aspx?ID=" & newUserID.ToString()
    Dim fullPath As String = urlBase & verifyUrl
    Dim appPath As String = Request.PhysicalApplicationPath

    Dim sr As New StreamReader(appPath & "EmailTemplates/VerifyUserAccount.txt")
    Dim mailMessage As New MailMessage()
    mailMessage.IsBodyHtml = True
    mailMessage.From = New MailAddress("myacct@gmail.com")
    mailMessage.To.Add(New MailAddress(RegisterUser.Email))
    mailMessage.CC.Add(New MailAddress("myacct@gmail.com"))
    mailMessage.Subject = "New User Registration"
    mailMessage.Body = sr.ReadToEnd
    sr.Close()

    mailMessage.Body = mailMessage.Body.Replace("<%UserName%>", RegisterUser.UserName)
    mailMessage.Body = mailMessage.Body.Replace("<%VerificationUrl%>", fullPath)

    //Set up the smtp for gmail to send the email
    Dim mailClient As New SmtpClient()
    With mailClient
        .Port = 587 'try 465 if this doesn't work
        .EnableSsl = True
        .DeliveryMethod = SmtpDeliveryMethod.Network
        .UseDefaultCredentials = False
        .Credentials = New NetworkCredential(mailMessage.From.ToString(), "password")
        .Host = "smtp.gmail.com"
    End With
    mailClient.Send(mailMessage)

    Dim continueUrl As String = RegisterUser.ContinueDestinationPageUrl
    If String.IsNullOrEmpty(continueUrl) Then
        continueUrl = "~/"
    End If

    Response.Redirect(continueUrl)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T02:23:18.683

当您或任何人创建 a 时，`MembershipProvider`您需要指定`ProviderUserKey`是整数还是 Guid。默认实现它是一个`SqlMembershipProvider`Guid，而默认`MySqlMembershipProvider`实现它是一个 int。

您始终可以通过从默认值之一继承并实现自己的版本来实现自己的提供程序`ProviderUserKey`

# mongodb - MongoDB复合索引查询

> ID：12254931
> 
> 赞同：0
> 
> 时间：2012-09-03T23:09:49.383
> 
> 标签：mongodb

是否可以为位置字段和数组字段的上限集合创建复合索引？这也可能用于无上限收集吗？

这是为 - db 版本 v2.0.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:33:45.680

是的，您可以，但是 2d（地理索引）必须是密钥的第一部分，因此存在限制。不管是上限还是正常，限制仍然适用，请参阅此处了解更多信息：

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-CompoundIndexes](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-CompoundIndexes)

[首先使用简单键进行地理空间索引](https://stackoverflow.com/questions/7986027/geospatial-indexing-with-a-simple-key-first)

# android - How do i get the selected live wallpaper on android?

> ID：12254936
> 
> 赞同：2
> 
> 时间：2012-09-03T23:09:57.733
> 
> 标签：android, live-wallpaper, wallpaper

I successfully retrieved the selected wallpaper from wallpaper manager and applied it to my app background with this code:

`

```
 LinearLayout parent = (LinearLayout) findViewById(R.id.linearLayoutParent);

    final WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
    final Drawable wallpaperDrawable = wallpaperManager.getDrawable();

    parent.setBackgroundDrawable(wallpaperDrawable); 
```

`

But this code doesn't work if the selected wallpaper is a live wallpaper, i just searched for a solution in google and didn't find any.

# php - xml数据解析

> ID：12254944
> 
> 赞同：0
> 
> 时间：2012-09-03T23:11:02.350
> 
> 标签：php, xml, arrays, foreach

示例 XML：

```
<liste>
<okul>kod="1" durumid="6" genelid="11702" adi="istanbul lisesi"/>
<puan>genelpuan"2" sosyalpuan="0" matpuan="3"/>
<okul>kod="6" durumid="8" genelid="11345" adi="ankara lisesi"/>
<puan>genelpuan"4" sosyalpuan="5" matpuan="2"/>
</liste> 
```

我想要结果：

```
genelid-adi-genelpuan-sosyalpuan
sample
11702 - istanbul lisesi - 2 - 0
11345 - ankara lisesi - 4 - 5 
```

我的代码：

```
function getirbilgileri{ 
  $ch = curl("http://www.sample.com");   
  $xml = simplexml_load_string($ch); 
  $tarih = (string)$xml->attributes()->saat; 
  $i = 0; 
  $ids = cols(get('biten'),'genelid'); 
  foreach($xml->Okul as $okul) { 
    $x = getarray($okul->attributes())+compact('tarih'); 
    $puanlar[$i++] = (string)$x['genelid'];  
    if (in_array($x['genelid'],$ids)) continue; 
    insert('biten',parsequery($));
  }

  $i = 0;  
  foreach($xml->puan as $puan) { 
    $x = parsequery($puan->attributes()); 
    $i++; 
    if (in_array($x['genelid'],$ids)) continue; 
    update('biten',$x,"genelid='{$puan[$i-1]}'",1); 
  } 
} 
```

问题在于：

```
if (in_array($x['genelid'],$ids)) continue; 
```

因为`genelid`不在数组中。有任何想法吗？

```
foreach($biten as $bitenler) 
{ 
  echo ' 
  <div class="okullar left">'.$bitenler->adi.'</div> // **this is  ok**
  <div class="puanlar fpuan">'.$bitenler->sosyalpuan.'</div>'; // **this is incorrect**
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:43:26.797

你的 xml 应该看起来像

```
<liste>
<okul kod="1" durumid="6" genelid="11702" adi="istanbul lisesi"/>
<puan genelpuan"2" sosyalpuan="0" matpuan="3"/>
<okul kod="6" durumid="8" genelid="11345" adi="ankara lisesi"/>
<puan genelpuan"4" sosyalpuan="5" matpuan="2"/>
</liste> 
```

或许。

如果您想访问 okul 和 puan 节点的内容，则处理您所拥有的 xml 比没有意义更糟糕。

# java - 显示带有 MANIFEST.MF 的 Java 应用程序启动画面；有没有办法设置最短屏幕时间？

> ID：12254947
> 
> 赞同：0
> 
> 时间：2012-09-03T23:11:55.843
> 
> 标签：java, splash-screen

我在可运行的 JAR 文件中有一个 Java 桌面应用程序。我正在使用 MANIFEST.MF 文件来显示启动画面，如下所示：

```
Manifest-Version: 1.0
Class-Path: .
Main-Class: MyApp
SplashScreen-Image: images/splash.gif 
```

它可以工作，但启动图像仅在屏幕上显示几分之一秒，时间太短了。

有没有办法设置启动画面的最短显示时间？我希望它在屏幕上至少显示 2 秒左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:37:01.917

我不相信您可以更改显示图像的时间量。

您可以做的只是创建自己的启动画面实现。基本上你所需要的只是一个`Window`显示一个图像并在后台加载应用程序的其余部分。当应用程序完成加载并且超过 2 秒后，您可以隐藏启动画面并显示您的主应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T20:28:32.623

使用线程暂停一段时间。在 run() 中使用以下代码：

```
try{
  Thread.sleep(4000) // where 4000 is milliseconds
} catch(Exception e) {} 
```

使用单独的 try catch 块在 run 方法中添加上述代码。

# javascript - 如何在不渲染页面的情况下点击链接？

> ID：12254948
> 
> 赞同：0
> 
> 时间：2012-09-03T23:11:57.873
> 
> 标签：javascript, jquery, html, ruby-on-rails, ruby

我想知道是否可以在不渲染该页面的情况下点击外部链接，而是留在页面上或重新渲染当前屏幕。本质上，我想点击的链接为我提供了一个操作，但我不希望用户查看该页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:15:36.313

使其成为 Ajax 调用（远程：true）并忽略结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T23:16:01.947

使用`:remote => true`应该可以工作，您可以使用 js 响应以显示一些消息，说明操作已成功完成。

[http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)

# python - 是否可以仅通过 dll 访问 .Net 运行时

> ID：12254952
> 
> 赞同：2
> 
> 时间：2012-09-03T23:12:36.653
> 
> 标签：python, .net

我正在使用没有任何 MS 开发工具的 PC (Win7)。但是，这台 PC 上安装了 python 2.7。ctype 模块在此安装中可用。（它不是 IronPython。它只是普通的 CPython）

现在，如果我们在 osx 上查看 Objective-C，C 程序可以通过调用`objc_msgSend` 和一些其他 API 来访问 Objective-C 运行时（https://developer.apple.com/library/mac/#documentation /Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html）。这很痛苦，根本不推荐，但至少它是可行的。

那么考虑到上面的限制（win7，没有VStudio，python+ctype），我是否可以以类似于objective-c的方式访问.Net运行时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:20:55.807

> 我是否可以以类似于objective-c 的方式访问.Net 运行时？

[.NET 运行时可以托管](http://msdn.microsoft.com/en-us/library/dd380850.aspx)，它允许您直接从本机 API 访问和使用类型。

话虽如此，通常有一种更简单的方法可以实现这一点。例如，如果您需要访问的 .NET 类型是 COM 可见的，您可以直接通过 COM 使用它们。

# c# - 如何使用控件的类名或其值而不是 ID 调用 HTML 按钮的单击函数？

> ID：12254956
> 
> 赞同：2
> 
> 时间：2012-09-03T23:13:32.203
> 
> 标签：c#, html, wpf, class, webbrowser-control

我正在创建一个 WPF 应用程序，它打开一个 WebBrowser 实例并获取 HTML 代码......我通过 ID 调用元素，例如：

如果 HTML 是：

```
<input type="text" name="company" id="company" value=""/> 
```

向该元素添加值的 C# 代码将是：

```
wb.Document.GetElementById("company").SetAttribute("value", String.Format("{0}", Company)); 
```

其中 wb 是 WebBrowser 类的一个实例

或者如果我有一个按钮并且需要单击 Click 事件：

```
<input type="submit" id="button1" /> 
```

C# 代码将是：

```
wb.Document.GetElementById("button1").InvokeMember("click"); 
```

现在我有一个问题是我需要调用一个没有 ID 但只有一个类名和值的按钮的单击函数，如下所示：

```
<input class="submit" type="submit" value="register"/> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T23:33:19.467

你必须使用`GetElementByTagName("INPUT")`然后`HtmlElement`通过它的`GetAttribute("class")`方法找到你的来调用`click`事件。

```
var elems = wb.Document.GetElementByTagName("INPUT");

foreach(HtmlElement elem in elems){
    if(elem.GetAttribute("class") == "submit"){
        elem.InvokeMember("click");
    }
} 
```

# ruby - Octopress Posix 错误

> ID：12254957
> 
> 赞同：0
> 
> 时间：2012-09-03T23:13:37.500
> 
> 标签：ruby, gem, rake, octopress

我正在尝试使用 octopress 生成博客。当我做 rake deploy 我得到这个错误：

```
Could not find posix-spawn-0.3.6 in any of the sources
Run `bundle install` to install missing gems.

bundle install:
Using rake (0.9.2.2) 
Using RedCloth (4.2.9) 
Using posix-spawn (0.3.6) 
Using albino (1.3.3) 
Using blankslate (2.1.2.4) 
Using chunky_png (1.2.6) 
Using fast-stemmer (1.0.1) 
Using classifier (1.3.3) 
Using fssm (0.2.9) 
Using sass (3.2.1) 
Using compass (0.12.2) 
Using directory_watcher (1.4.1) 
Using ffi (1.0.11) 
Using haml (3.1.7) 
Using kramdown (0.13.8) 
Using liquid (2.3.0) 
Using syntax (1.0.0) 
Using maruku (0.6.0) 
Using jekyll (0.11.2) 
Using rubypython (0.5.3) 
Using pygments.rb (0.2.13) 
Using rack (1.4.1) 
Using rack-protection (1.2.0) 
Using rb-fsevent (0.9.1) 
Using rdiscount (1.6.8) 
Using rubypants (0.2.0) 
Using tilt (1.3.3) 
Using sinatra (1.3.3) 
Using stringex (1.4.0) 
Using bundler (1.1.5) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is     
installed. 
```

我安装了正确版本的 posix-spawn，所以我不确定如何解决这个错误。我什至用我的包管理器重新编译它，仍然得到同样的错误。

-- 宝石文件

```
source "http://rubygems.org"

group :development do
  gem 'rake', '~> 0.9.2'                                                                                                                                                                                                                                                             
  gem 'rack', '~> 1.4.1'
  gem 'jekyll', '~> 0.11.2'                                                                                                                                                                                                                                                          
  gem 'rdiscount', '~> 1.6.8'
  gem 'pygments.rb', '~> 0.2.12'                                                                                                                                                                                                                                                     
  gem 'RedCloth', '~> 4.2.9'
  gem 'haml', '~> 3.1.6'                                                                                                                                                                                                                                                             
  gem 'compass', '~> 0.12.1'
  gem 'rubypants', '~> 0.2.0'                                                                                                                                                                                                                                                        
  gem 'rb-fsevent', '~> 0.9'
  gem 'stringex', '~> 1.4.0'                                                                                                                                                                                                                                                         
  gem 'liquid', '~> 2.3.0'
end                                                                                                                                                                                                                                                                                  

gem 'sinatra', '~> 1.3.2' 
```

# html - 背景图像不适用于包装器，但适用于其他 HTML 元素

> ID：12254958
> 
> 赞同：1
> 
> 时间：2012-09-03T23:13:50.370
> 
> 标签：html, css

我试图给包装器一个背景，这样我就可以拥有一个无限的侧边栏。当我将相同的 CSS 规则应用到任何其他 HTML 元素时，背景会正确应用。由于某种原因，它无法在 .wrapper 上运行。这是HTML：

```
<html>
<head>
<title> Packard Carburetors </title>
<link rel="stylesheet" type="text/css" href="css/reset.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>

<div class="wrapper">

<div id="header">
    <h1 id="banner">Packard Carburetors</h1>
</div><!--Header-->

<div id="navbar" class="green">
    <ul id="navigation">
        <li>HOME</li>
        <li>PACKARD
            <ul class="sub-nav">
                <li>-1930 Speedster</li>
                <li>-1929-31 Super 8</li>
                <li>-Late 1931-32 Super 8</li>
                <li>-1929-31 Standard 8</li>
                <li>-Late 1931-32 Standard 8</li>
                <li>-Rare Parts</li>
                <li class="last">-745 Parts</li>
            </ul>
        </li>
        <li>CADILLAC
            <ul class="sub-nav">
                <li>-1932-33 V12 & V16</li>
                <li class="last">-1934-1937 V12 & V16</li>
            </ul>
        </li>
        <li>SHOPPING CART</li>
        <li>CHECK OUT</li>
        <li>CONTACT US</li>
    </ul><!--Navigation-->

    <img id="#navbar-logo" src="img/logo.png">
    <p id="nav-phone" class="black center bold">775.842.4282</p>
    <p class="black center nav-small bold">packardcarbs@gmail.com</p>
    <p class="black center nav-small bold">Sparks, NV USA</p>
</div><!--Navbar-->

<div id="content">

    <h1 class="green center bold">All Packard Carburetors 1929-'32</h1>
    <h2 class="green center bold">1930 Speedster | 1929-32 Super 8 | 1929-32 Standard 8</h2>
    <hr>
    <h1 class="green center bold">Cadillac Carburetors</h1>
    <h2 class="green center bold">1932 - 1937 V-12 & V-16</h2>
    <img src="img./detroit-lubricator.png">

    <div id="middle-column">
        <ul id="feature-list-home">
            <li>Silicone Bronze Investment Casting</li>
            <li>Precision CNC Brass Machine Parts</li>
            <li>Viton-Tipped Needles</li>
            <li>Current Design
                <ul id="sub-feature-list-home">
                    <li>-Needle Seats</li>
                    <li>-Pressure Valves</li>
                </ul>
            </li>
            <li>Authentic Polished Brass Components</li>
            <li>Gasoline and Ethanol Proof Exterior Coating</li>
            <li>Exact Size as Original</li>
        </ul>

        <img id="middle-bar-spacer" src="img/divider-bar.png">

        <div id="box-and-copy">
            <img id="boxes" src="img/packard-boxes.png">

            <p class="bold">All Components In-Stock!</p>
            <p>Your Carburetor will be professionally assembled, engine tested and shipped quickly worldwide.</p>
        </div><!-- Box and copy -->

    </div><!--Middle Column -->
</div><!--Content-->

</div><!--Wrapper-->

</body>
</html> 
```

和CSS：

```
/*General styles*/

.wrapper {
    width: 940px;
    margin: 0 auto;
    text-align: left;
    background-image: url('../img/body-bg.png');
    background-repeat: repeat-y;
}

body {
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    font-size: 12px;
}

h1 {
    font-size: 3em;
}

h2 {
    font-size: 2em;
}

#content {
    float: left;
    width: 700px;
    padding-left: 20px;

}

#banner {
    display: inline-block;
    text-indent: -9999px;
    width: 940px;
    height: 201;
    background-image: url('../img/banner.png');
}

/* Nav Stuff */

#navbar {
    width: 190px;
    font-weight: bold;
    font-size: 1.33em;
    padding: 20px 20px 0px 10px;
    float: left;
}

#navigation li {
    padding-bottom: 20px;
}

.sub-nav{
    font-size: .87em;
    padding-top: 20px;
    padding-left: 2.5em;
}

#navigation li ul.sub-nav li.last {
    padding-bottom: 0px;
}

#nav-phone {
    font-size: 1.19em;
    padding-top: 15px;
}

.nav-small {
    font-size: .75em;
    padding-top: 5px;
}

/* Middle Column */
#middle-column{
    width: 220px;
    padding-right: 20px;
    margin-top: 40px;
    border-right: 2px solid #000000;
}

#feature-list-home {
    list-style-image: url('../img/bullet.png');
    font-size: 1.17em;
    padding-left: 20px;
    font-weight: bold;
    padding-bottom: 40px;
}

#feature-list-home li {
    padding-bottom: 20px;
}

#sub-feature-list-home {
    padding-left: 10px;
}

#sub-feature-list-home li {
    padding-bottom: 0px;
}

#middle-bar-spacer {
    padding-bottom: 20px;
}

#boxes {
    padding-bottom: 10px;
}

#box-and-copy {
    font-size: 1.33em;
    line-height: 1.5em;
    text-align: center;
}

/* OOCSS properties */

.green{
    color: #117041;
}

.black{
    color: #000000;
}

.center {
    text-align: center;
}

.bold {
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:38:56.810

尝试添加：

```
overflow: auto; 
```

到你的包装类

# xcode - Xcode SVN提交错误

> ID：12254960
> 
> 赞同：0
> 
> 时间：2012-09-03T23:14:10.277
> 
> 标签：xcode, svn, repository, commit, google-code

这让我发疯。我的 SVN 存储库运行良好，我能够检查所有内容并在 Xcode 的组织者中查看修订。

只有当我提交更改时，我才会遇到这个荒谬的问题：

![在此处输入图像描述](../Images/9121cfd9ebf58eb5061c91b882800189.png)

经过大量研究，我发现唯一遇到这个问题的人是那些没有意识到谷歌代码有一个单独的密码而不是你的谷歌帐户密码的人。我的密码是正确的。

有没有人有任何想法？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:54:25.393

事实证明，这是由于我认为 Xcode 中的一些错误。要绕过它，您必须做的是：

*   首先在 Organizer 中设置您的存储库
*   在 Xcode 中打开项目并进行更改
*   尝试在 Xcode 中提交此更改。你会得到上面的错误
*   `svn`现在使用终端中的命令将更改提交到您的存储库
*   现在进行另一个更改并使用 Xcode 提交它。它会工作

# actionscript-3 - 在同一个类中使用两个函数

> ID：12254961
> 
> 赞同：0
> 
> 时间：2012-09-03T23:14:11.883
> 
> 标签：actionscript-3, actionscript

startFunction 有一个任务调用 doFunction 3 秒，然后停止。不幸的是，如果没有任何编译器错误，这是行不通的。只是空白输出。可能是一些简单的错误，但我是初学者，几个小时后找不到解决方案。我已经剪切了代码以使其更清晰，但如果需要可以粘贴。

```
 package  {
        //all imports

        public class MemoryPuzzles extends MovieClip{
            //all variables

            public function MemoryPuzzles():void {//first function

 //function memory puzzles
                }//first function end end

    public function startFunction():void//beginning of second function in the single class
    {
                    trace("start function works");

    startTime = getTimer();
    if( (getTimer() - startTime)<3000 ){
    addEventListener(Event.ENTER_FRAME, doFunction);
    } else {
    removeEventListener(Event.ENTER_FRAME, doFunction);
    }

    function doFunction(e:Event):void
    {
        trace("do function works");
    }//end of dofunction
    }//end of startfunction
    }//class end
}//import end 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:57:18.263

参考以下代码。我测试过。

```
package
{
    import flash.display.MovieClip;
    import flash.utils.getTimer;

        public class MemoryPuzzles extends MovieClip
        {

            public function MemoryPuzzles():void 
            {
                startFunction();
            }

            public function startFunction():void
            {
                trace("start function works");

                var startTime = getTimer();
                addEventListener(Event.ENTER_FRAME, doFunction);
                function doFunction(e:Event):void
                {
                    trace("time: " + (int)(getTimer()-startTime));
                    if((int)(getTimer()-startTime)>=3000)
                    {
                        removeEventListener(Event.ENTER_FRAME, doFunction);
                        trace("ended");
                    } 
                }
            }
       }
} 
```

# regex - 使用 path_reg 匹配 haproxy 路径

> ID：12254963
> 
> 赞同：5
> 
> 时间：2012-09-03T23:14:37.370
> 
> 标签：regex, haproxy

我正在尝试将以下网址匹配：/rivers/1、/rivers/2adsfs、/rivers/sdfd2d：

```
 acl rivers_show   path_reg ^/rivers/\w+/? 
```

但这似乎确实有效。有谁知道为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T10:45:40.350

HAproxy 的正则表达式不包含 \w 作为字符类。请记住，正则表达式是性能最差的 ACL 匹配之一。您可能想考虑使用类似的东西，尽管它并不完全相同。

acl path_beg /rivers/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T00:15:52.243

您可以使用下面的正则表达式来匹配给

```
acl rivers_show   path_reg -i ^\/rivers\/[^\.]* 
```

# rspec - JRuby：nil！= nil：即使数组相同，RSpec 测试也会失败

> ID：12254965
> 
> 赞同：2
> 
> 时间：2012-09-03T23:14:42.547
> 
> 标签：rspec, jruby

我在 JRuby 中看到一个问题，即使预期输出和实际输出相同，我的 rspec 规范也会失败。这是失败消息：

```
Failures:

  1) PgArrayParser#parse_pg_array one dimensional arrays NULL values returns an array of strings, with nils replacing NULL characters
     Failure/Error: parser.parse_pg_array(%[{1,NULL,NULL}]).should eq ['1',nil,nil]

       expected: ["1", nil, nil]
            got: ["1", nil, nil]

       (compared using ==)

       Diff:["1", nil, nil].==(["1", nil, nil]) returned false even though the diff between ["1", nil, nil] and ["1", nil, nil] is empty. Check the implementation of ["1", nil, nil].==.
     # ./spec/parser_spec.rb:26:in `(root)'

  2) PgArrayParser#parse_pg_array two dimensional arrays strings returns an array of strings with a sub array and a quoted }
     Failure/Error: parser.parse_pg_array(%[{1,{"2,}3",NULL},4}]).should eq ['1',['2,}3',nil],'4']

       expected: ["1", ["2,}3", nil], "4"]
            got: ["1", ["2,}3", nil], "4"]

       (compared using ==)

       Diff:["1", ["2,}3", nil], "4"].==(["1", ["2,}3", nil], "4"]) returned false even though the diff between ["1", ["2,}3", nil], "4"] and ["1", ["2,}3", nil], "4"] is empty. Check the implementation of ["1", ["2,}3", nil], "4"].==.
     # ./spec/parser_spec.rb:69:in `(root)'

  3) PgArrayParser#parse_pg_array three dimensional arrays returns an array of strings with sub arrays
     Failure/Error: parser.parse_pg_array(%[{1,{2,{3,4}},{NULL,6},7}]).should eq ['1',['2',['3','4']],[nil,'6'],'7']

       expected: ["1", ["2", ["3", "4"]], [nil, "6"], "7"]
            got: ["1", ["2", ["3", "4"]], [nil, "6"], "7"]

       (compared using ==)

       Diff:["1", ["2", ["3", "4"]], [nil, "6"], "7"].==(["1", ["2", ["3", "4"]], [nil, "6"], "7"]) returned false even though the diff between ["1", ["2", ["3", "4"]], [nil, "6"], "7"] and ["1", ["2", ["3", "4"]], [nil, "6"], "7"] is empty. Check the implementation of ["
1", ["2", ["3", "4"]], [nil, "6"], "7"].==.
     # ./spec/parser_spec.rb:87:in `(root)'

Finished in 0.2 seconds
15 examples, 3 failures 
```

使用`=~`代替`eq`或`==`产生以下输出：

```
..F.......F..F.

Failures:

  1) PgArrayParser#parse_pg_array one dimensional arrays NULL values returns an array of strings, with nils replacing NULL characters
     Failure/Error: parser.parse_pg_array(%[{1,NULL,NULL}]).should =~ ['1',nil,nil]
       expected collection contained:  ["1", nil, nil]
       actual collection contained:    ["1", nil, nil]
       the missing elements were:      [nil, nil]
       the extra elements were:        [nil, nil]
     # ./spec/parser_spec.rb:26:in `(root)'

  2) PgArrayParser#parse_pg_array two dimensional arrays strings returns an array of strings with a sub array and a quoted }
     Failure/Error: parser.parse_pg_array(%[{1,{"2,}3",NULL},4}]).should =~ ['1',['2,}3',nil],'4']
       expected collection contained:  ["1", ["2,}3", nil], "4"]
       actual collection contained:    ["1", ["2,}3", nil], "4"]
       the missing elements were:      [["2,}3", nil]]
       the extra elements were:        [["2,}3", nil]]
     # ./spec/parser_spec.rb:69:in `(root)'

  3) PgArrayParser#parse_pg_array three dimensional arrays returns an array of strings with sub arrays
     Failure/Error: parser.parse_pg_array(%[{1,{2,{3,4}},{NULL,6},7}]).should =~ ['1',['2',['3','4']],[nil,'6'],'7']
       expected collection contained:  ["1", ["2", ["3", "4"]], [nil, "6"], "7"]
       actual collection contained:    ["1", ["2", ["3", "4"]], [nil, "6"], "7"]
       the missing elements were:      [[nil, "6"]]
       the extra elements were:        [[nil, "6"]]
     # ./spec/parser_spec.rb:87:in `(root)'

Finished in 0.17 seconds
15 examples, 3 failures 
```

规格在[这里](https://github.com/dockyard/pg_array_parser/blob/jruby-compatibility/spec/parser_spec.rb)。需要注意的是，这些比较是唯一包含`nil`s 的比较。似乎`nil`Java 中的实例化与`nil`JRuby 中的 a 不同 有人知道解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T08:46:59.890

使用`runtime.getNil()`而不是在`new RubyNil(runtime)` [这里](https://github.com/dockyard/pg_array_parser/blob/77c3f727bc8eafcbf636d7a06c16623ba893ed54/ext/pg_array_parser/PgArrayParserEngine.java#L62)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T00:15:47.103

您是否尝试使用 =~ 匹配数组？例如：

```
[1,2,3].should =~ [1,2,3] 
```

几天前我遇到了匹配数组的问题，这对我来说很好。

# javascript - toggleClass/addClass 不适用于输入

> ID：12254966
> 
> 赞同：2
> 
> 时间：2012-09-03T23:15:13.053
> 
> 标签：javascript, jquery, css

我有一个输入元素：

```
<input id="box" type="text" /> 
```

以及以下 CSS 类：

```
.box-change
{
    border-color:#ffffff;
} 
```

以及以下 jQuery 代码：

```
$('#box').toggleClass('box-change'); 
```

但是，它不会像我期望的那样改变边框颜色。有谁知道为什么？

编辑：

输入已经具有样式，因此是：

```
#box
{
border-color:#ff0000;
border-style:solid;
border-bottom-width:1px;
border-left-width:1px;
border-top-width:1px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:17:04.010

如果您最初删除了边框，那么您必须设置

```
border-width 
```

和

```
border-style 
```

所以简而言之，您的 CSS 应该如下所示：

```
.box-change
{
    border: 1px solid #fff;
} 
```

但这一切都取决于您的初始样式是什么，输入的包含元素的背景颜色是什么……

## 在您提供更多详细信息后进行编辑

你的类没有被应用，因为通过 ID 设置样式的类在级联中比 CSS 类具有更高的优先级。这就是您没有看到它应用的主要原因。

如果你希望你的 CSS 类*接管*你有两个选择：

1.  将其设置为重要：

    ```
    .box-change
    {
        border: 1px solid #fff !important;
    } 
    ```

2.  提供具有更高特异性并将接管的 CSS 规则

    ```
    #box.box-change
    {
        border: 1px solid #fff;
    } 
    ```

第二种方式是首选方式，因为使用`!important`会使您的 CSS 更难维护，因为您的类不会按照 CSS 级联，而是按照您的重要性。你可以很容易地放松对它的控制。**除非在极少数情况下，否则避免重要。**

## 如何解决这个问题？

为了将来为您提供帮助，您应该在浏览器中使用开发人员工具（Chrome DevTools 或 Firebug for Firefox），这些工具会立即向您显示问题。当然，还要了解[CSS 特殊性规则](http://www.w3.org/TR/CSS2/cascade.html)以及它们是如何级联的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T23:38:09.790

由于您的原始样式是用它定义的，`#box`因此它比 更具体`.box-change`，并且默认情况下会覆盖您的新添加。也可能`.box-change`是比级联更高`#box`。

您可以通过以下两种方式之一解决它：

```
#box.box-change{
  border-color: #fff;
} 
```

或者

```
.box-change{
  border-color: #fff !important;
} 
```

# objective-c - 如何检索在引导驱动器上读取和写入的总字节数

> ID：12254968
> 
> 赞同：0
> 
> 时间：2012-09-03T23:15:28.693
> 
> 标签：objective-c, c, macos, unix, system

```
io_iterator_t drives = IO_OBJECT_NULL;
mach_port_t masterPort = IO_OBJECT_NULL;

IOMasterPort(bootstrap_port, &masterPort);
IOServiceGetMatchingServices(masterPort, IOServiceMatching(kIOBlockStorageDriverClass), &drives);

io_registry_entry_t drive = 0;
uint64_t totalBytesRead = 0;
uint64_t totalBytesWritten = 0;

while ((drive = IOIteratorNext(drives)))
{
    io_name_t drivePath;
    IORegistryEntryGetPath(drive, kIOServicePlane, drivePath);
    NSLog(@"Path:%s", drivePath);

    NSNumber* statVal = 0;
    NSDictionary* statistics;

    statistics = (NSDictionary*)IORegistryEntryCreateCFProperty(drive, CFSTR(kIOBlockStorageDriverStatisticsKey), kCFAllocatorDefault, kNilOptions);

    if (statistics)
    {
        statVal = (NSNumber*)[statistics objectForKey:(NSString*)CFSTR(kIOBlockStorageDriverStatisticsBytesReadKey)];
        totalBytesRead += [statVal intValue];

        statVal = (NSNumber*)[statistics objectForKey:(NSString*)CFSTR(kIOBlockStorageDriverStatisticsBytesWrittenKey)];
        totalBytesWritten += [statVal intValue];
    }

    [statistics release];
    IOObjectRelease(drive);
}
IOIteratorReset(drives);

readRate = (double)(totalBytesRead - prevReadVal)/1024;
writeRate = (double)(totalBytesWritten - prevWriteVal)/1024;

prevReadVal = totalBytesRead;
prevWriteVal = totalBytesWritten; 
```

我正在尝试检索自启动以来在引导驱动器上读取和写入的总字节数。但是，上面的代码似乎不起作用。我做了一些调查，发现这条线：`statistics = (NSDictionary*)IORegistryEntryCreateCFProperty(drive, CFSTR(kIOBlockStorageDriverStatisticsKey), kCFAllocatorDefault, kNilOptions);`行不通。该函数似乎返回 null，而不是返回有效对象。有谁知道为什么？全面的谷歌搜索没有产生任何结果。

注意我在 Mountain Lion OS X 上使用 Objective C 并为 OSX 构建应用程序。

# php - HTMLPurifier：允许嵌入

> ID：12254971
> 
> 赞同：2
> 
> 时间：2012-09-03T23:15:48.023
> 
> 标签：php, html, filtering, htmlpurifier

那是我允许的标签：

```
public function filter($str) {

$config = HTMLPurifier_Config::createDefault();
    $config->set('Core.Encoding', 'UTF-8');
    $config->set('HTML.SafeEmbed', true);
    $config->set('HTML.SafeObject', true);
    $config->set('Output.FlashCompat', true);
    $config->set('HTML.FlashAllowFullScreen', true);
    $config->set('HTML.Allowed', 'object[classid|width|height|data],param[name|value],embed[src|type|allowscriptaccess|allowfullscreen|width|height|wmode]');

    $PHTML = new HTMLPurifier($config);

    return $PHTML->purify($str);
 } 
```

那是嵌入代码：

```
<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width='450' height='24'><param name='movie' value='http://rockdizfile.com.com/player/player.swf'><param name='allowfullscreen' value='true'><param name='allowscriptaccess' value='always'><param name='wmode' value='transparent'><param name='flashvars' value='file=http://www4a.rockdizfile.com:80/d/wolc22zkfp4r2ge4elcuugteixfmw7h2yrxy2bvxyc73psaqhhbd2hix/8noptiencs83.mp3&duration=193.4'><embed src='http://rockdizfile.com/player/player.swf' width='420' height='24' allowscriptaccess='always' allowfullscreen='true' flashvars='file=http://www4a.rockdizfile.com:80/d/wolc22zkfp4r2ge4elcuugteixfmw7h2yrxy2bvxyc73psaqhhbd2hix/8noptiencs83.mp3&duration=193.4' /></object> 
```

但是为什么过滤函数会返回这个呢？

```
<object width="450" height="24" data="http://rockdizfile.com.com/player/player.swf" type="application/x-shockwave-flash"><param name="allowScriptAccess" value="never" /><param name="allowNetworking" value="internal" /><param name="movie" value="http://rockdizfile.com.com/player/player.swf" /><param name="wmode" value="transparent" /><param name="flashvars" value="file=http://www4a.rockdizfile.com:80/d/wolc22zkfp4r2ge4elcuugteixfmw7h2yrxy2bvxyc73psaqhhbd2hix/8noptiencs83.mp3&amp;duration=193.4" / 
```

有两个警告：

> 警告：不支持元素“object”中的属性“classid”
> 
> 警告：不支持元素“嵌入”中的属性“允许全屏”

# c# - 如何使 x 轴忽略 x 值的顺序？

> ID：12254972
> 
> 赞同：4
> 
> 时间：2012-09-03T23:15:50.277
> 
> 标签：c#, .net, charts

首先，如果我的英语不是那么好，我很抱歉...

我有 4 个数组（前 2 个用于系列 #1），我想将它们绑定到我的图表：

```
double[] yValues1 = { 65.62, 75.54, 60.45, 55.73, 70.42, 200 };
string[] xValues1 = { "France", "Canada", "UK", "USA", "Italy", "India" };
chart.Series["Series1"].Points.DataBindXY(xValues1, yValues1);

double[] yValues2 = { 65.62, 75.54, 60.45, 55.73, 200, 70.42 };
string[] xValues2 = { "France", "Canada", "UK", "USA", "India", "Italy"};
chart.Series["Series2"].Points.DataBindXY(xValues2, yValues2); 
```

结果是（观察：意大利和印度的值和顺序）：

![](../Images/a32e1f537470eaf66a9067e2a06bedcf.png)

如您所见，印度应该在两个系列中都有 200，但第二系列的 200 指的是意大利（即第一系列中的第五），就好像它与第一系列一样。简而言之，我希望无论 xValues 的顺序如何，而是根据它们的字符串值显示这两个系列。

顺便说一句，即使我将图表与长度大于限制的数组绑定，我该如何限制列数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:53:09.637

要完成此操作，请添加对 AlignDataPointsByAxisLabel 的调用：

```
Chart.AlignDataPointsByAxisLabel(); 
```

这将使所有数据点与相同的轴标签对齐，无论它们绑定的顺序如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T21:59:56.040

xValue 和 yValue 可以添加到 SortedDictionary。这将使值和键保持配对。

```
chart1.Series.Add("Series1");
chart1.Series.Add("Series2");

SortedDictionary<string, double> sd1 = new SortedDictionary<string, double>();
SortedDictionary<string, double> sd2 = new SortedDictionary<string, double>();
sd1.Add("france", 65.52);
sd2.Add("france", 65.52);
sd1.Add("india", 200);
sd2.Add("italy", 40);
sd1.Add("italy", 50);
sd2.Add("india", 200);

chart1.Series["Series1"].Points.DataBindXY(sd1.Keys, sd1.Values);
chart1.Series["Series2"].Points.DataBindXY(sd2.Keys, sd2.Values); 
```

# css - 一项与 CSS 定位不对齐（但所有其他项都是）

> ID：12254977
> 
> 赞同：0
> 
> 时间：2012-09-03T23:16:09.803
> 
> 标签：css

我所有的 html 元素都被定位在我想要的位置，除了一个，我不明白为什么它应该是例外。剪断以排除不相关部分的css是：

```
body {
position:relative;
}

ul {
position:absolute;
list-style:none;
margin:0px;
padding:0px;
}

li: {
position: relative;
top: 90px;
display: block;
height: 80px;
}

#track_title {
    position:absolute;
    top: 1px;   
    left: 80px;
    font-size: 15px;
    font-weight: bold;
}

<ul>
<li>
<img src="image.png">
<h2 id = "track_title">Title</h2>
<h3 id = "artist_name">Name</h3> 
```

但是，正如您从屏幕截图中看到的那样，标题出现在距离其父 li 顶部超过 1px 的位置。我做错了什么？

![在此处输入图像描述](../Images/ecd386c0c9596b592edb223b076dbc17.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:19:00.137

h2 & h3 元素有默认的边距和内边距。你应该用你的固定值来设置它。

# c++ - 如何在 C++ 中获取当前运行的可执行文件的文件名

> ID：12254980
> 
> 赞同：19
> 
> 时间：2012-09-03T23:16:23.297
> 
> 标签：c++, filenames

我想获得当前进程的完整路径。

我`_getcwd`用来获取当前工作目录。但它不包括文件名。

我怎样才能得到像这样的文件名：`filename.exe`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-03T23:18:01.997

`argv[0]`你的主要功能是你的文件名。

一个简单的代码片段：

```
#include<stdio.h>
int main(int argc, char** argv)
{
    //access argv[0] here
} 
```

如果您无法访问/更改 main() 中的代码，您可以执行以下操作：

```
std::string executable_name()
{
#if defined(PLATFORM_POSIX) || defined(__linux__) //check defines for your setup

    std::string sp;
    std::ifstream("/proc/self/comm") >> sp;
    return sp;

#elif defined(_WIN32)

    char buf[MAX_PATH];
    GetModuleFileNameA(nullptr, buf, MAX_PATH);
    return buf;

#else

    static_assert(false, "unrecognized platform");

#endif
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-04T00:17:54.833

在 Windows 上，您可以使用：

```
TCHAR szExeFileName[MAX_PATH]; 
GetModuleFileName(NULL, szExeFileName, MAX_PATH); 
```

szExeFileName 将包含完整路径 + 可执行文件名

[编辑]

对于更便携的解决方案使用`argv[0]`或其他一些平台特定的代码。你可以在这里找到这样的方法：[https](https://github.com/mirror/boost/blob/master/libs/log/src/process_name.cpp) ://github.com/mirror/boost/blob/master/libs/log/src/process_name.cpp 。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-03T23:40:49.073

在 Linux 上，二进制文件的文件名是符号链接的目标`/proc/self/exe`。您可以使用`readlink`系统调用来查找符号链接的目标。

请注意，这告诉您二进制文件在磁盘上存储的实际位置，而不仅仅是用户用来启动程序的命令。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-09-25T09:55:36.307

[这是使用 boost ( https://www.boost.org/](https://www.boost.org/) )的跨平台方式

```
#include <iostream>
#include <boost/dll.hpp>

int main( int argc, char **argv ) {

    std::cout << "hello world, this is [" << boost::dll::program_location().filename().string() << "]" << std::endl;

    std::cout << "or [" << boost::dll::program_location().string() << "] if you're not into the whole brevity thing." << std::endl;

    return 0;
} 
```

通过编译

```
g++ -o hello_world hello_world.cpp -lboost_filesystem -lboost_system -ldl 
```

结果在输出

```
hello world, this is [hello_world]
or [/home/gjvc/tmp/hello_world] if you're not into the whole brevity thing. 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-02T04:51:00.763

正如其他人所提到的，您的*可执行文件*的名称包含在 argv[0] 中。如果你需要，你可以：

```
cout << argv[0] << endl; 
```

如果您需要可执行文件的*源文件*的名称，C++ 有一个预定义的宏，您可以使用：

```
cout << __FILE__ << endl; 
```

[转到此处](http://www.cplusplus.com/doc/tutorial/preprocessor/)并滚动到“预定义的宏名称”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-28T11:27:17.450

您可以使用 errno.h 中的 program_invocation_name

[https://linux.die.net/man/3/program_invocation_short_name](https://linux.die.net/man/3/program_invocation_short_name)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-03T23:19:18.237

您通常可以从以下位置获取可执行文件名`argv[0]`：

```
#include <stdio.h>
int main(int argc, char* argv[])
{
 printf("Running: %s\n", argv[0]);
 return 0;
} 
```

实际上，有一些方法可以将应用程序转移到`execl()`另一个应用程序（或另一个类似的功能）并覆盖此参数。系统为这种应用程序更改它仍然是非常规的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-29T21:51:44.323

在 Linux（POSIX？）中，有一个名为的环境变量`_`包含当前进程。

```
$ echo $_
echo 
```

在 C++ 中

```
#include <stdlib.h>     /* getenv */
#include<iostream>
int main(){
    std::cout << getenv("_") << '\n';
    return 0;
} 
```

编译

```
$ c++ a.cpp -o a.out
$ ./a.out 
```

打印`./a.out`（或任何已执行的行，包括路径）。

这与其他方法相比具有一定的优势，它可以全局读取（不传递`argv[0]`）并且不需要文件处理。

# php - Emacs PHP 缩进

> ID：12254982
> 
> 赞同：1
> 
> 时间：2012-09-03T23:16:47.570
> 
> 标签：php, emacs, coding-style, indentation, code-formatting

我正在使用带有 php-mode.el 的 Emacs：http: [//php-mode.sourceforge.net/php-mode.el.html](http://php-mode.sourceforge.net/php-mode.el.html)

我的 .emacs 文件中有以下几行：

```
(load-file "~/.emacs.d/php-mode.el")
(require 'php-mode)
(setq c-default-style "linux" c-basic-offset 4) 
```

它在大多数情况下工作得非常好。问题在于，对于某些代码，Emacs 显示的代码与其他编辑器不同。例如，我在 Emacs 中有以下代码：

```
public function showStuff($items, $Stuff) {
    $restrict = true;
    $stuff  = false;
    $moreStuff = true;

    if (($restrict && $stuff >= $moreStuff) 
        || ( $moreStuff > 10)) {
        return true;
    }           
    return false;
} 
```

但是在 Eclipse/Sublime Text/Text Wrangler 中查看相同的文件看起来像：

```
public function showStuff($items, $Stuff) {
    $restrict = true;
    $stuff  = false;
    $moreStuff = true;

    if (($restrict && $stuff >= $moreStuff) 
    || ( $moreStuff > 10)) {
    return true;
    }           
    return false;
} 
```

谁能评论我为什么看到这些结果和可能的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T00:11:58.377

由于您似乎想使用空格而不是制表符，我认为这基本上是以下内容的副本：

[我找不到这个：如何在 EMACS 中使用 4 SPACES 而不是 TAB？](https://stackoverflow.com/questions/2388367/i-cant-find-this-how-do-i-use-4-spaces-instead-of-a-tab-in-emacs)

或者，如果您只想对 PHP 文件使用此功能，那么您可以使用：

```
(add-hook 'php-mode-hook 'my-php-mode-hook)
(defun my-php-mode-hook ()
  "My PHP mode configuration."
  (setq indent-tabs-mode nil
        tab-width 4
        c-basic-offset 4)) 
```

在此之前，代码在 Emacs 中*看起来*正确，将制表符转换为空格：

*   `C-x``h`
*   `M-x` `untabify` `RET`

我还要看看：
[http ://www.emacswiki.org/emacs/CategoryIndentation](http://www.emacswiki.org/emacs/CategoryIndentation)

（或者至少要注意它——在 Emacs 中缩进可能比预期的要复杂，而且那里有很多很好的信息。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:15:35.023

我认为问题只是您的 Eclipse/Foo/Bar 编辑器没有以标准方式显示文件中的 TAB（TAB 通常被定义为跨越 8 列）。混合使用空格和制表符不是问题（如果您只使用制表符进行缩进，则会出现类似的问题），文件中似乎没有任何真正需要修复的内容。解决这个问题的最好方法可能是：

1.  向这些编辑器报告问题（这可能是一个较小的配置问题）。
2.  在您的 .emacs 中添加 (setq indent-tabs-mode nil) 以便 Emacs 更喜欢在任何地方使用空格来避免这些问题（但它不会阻止您插入自己的 TAB 并且它不会神奇地更改 TAB已经在那里）。

# javascript - jqgrid发布多级json

> ID：12254983
> 
> 赞同：0
> 
> 时间：2012-09-03T23:17:01.090
> 
> 标签：javascript, json, jqgrid

我有一个网格，其中 colmodel 看起来像：;

```
colModel:[ 
    {name:'id',index:'id', width:30, sorttype:'int'}, 
    {name:'name',index:'name', editable:true, width:200},
    {name:'group.id',index:'group.id', editable:true, width:200, formatter:'select', edittype: 'select'},
    {name:'sql',index:'sql', editable:true, width:100}
], 
```

当我现在编辑数据并将其发布到服务器时，json 看起来像：

```
{"name":"Name 1","group.id":"1","sql":"sql","oper":"edit","id":"1"} 
```

但是我的服务器需要一个多级 json，例如：

```
{"name":"Name 1","group":{"id":1},"sql":"sql","oper":"edit","id":"1"} 
```

我的 serializeEditData 看起来像：

```
serializeEditData:function(data) {
    if (data.id === '_empty')
        data.id = null;
    return JSON.stringify(data)
} 
```

有没有一种优雅的方式将 javascript 对象格式化为多级 json？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:21:51.293

如果你开始说

```
var jsobj =  {"name":"Name 1","group":"","sql":"sql","oper":"edit","id":"1"}; 
```

我认为做简单

```
jsobj["group"] = {"id" : 1}; 
console.log(jsobj); 
```

应该工作并导致：

```
{"name":"Name 1","group":{"id":1},"sql":"sql","oper":"edit","id":"1"} 
```

希望这可以帮助

# javascript - . notaion 与 [] 符号 | 插入文本对象

> ID：12254986
> 
> 赞同：2
> 
> 时间：2012-09-03T23:17:19.200
> 
> 标签：javascript

在下面提到的代码行上，我有点在点符号和括号符号之间移动。 `JavaScript - The Good Parts`建议默认使用点符号。

如何更新此代码以使用点表示法。请注意，form_elements 包含表单输入名称作为键，它们是有效的 JavaScript 标识符（它们仅使用字母数字字符）。

根据`JavaScript - The Good Parts`这种方式，它们可以与点符号一起使用。

```
Su.text = function (form_elements) {
    this.text_object = {};
    var key;
    for (key in form_elements) { //*u
        if (form_elements.hasOwnProperty(key)) {
            this.text_object[form_elements[key].name] = form_elements[key].value; // this line
        }
    }
    return this;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:20:51.357

括号表示法用于在编译时未知的键名，例如在您的情况下。所以你必须在这里使用它。

```
 aaa.foo  // dot notation, name of the field is "foo"

 aaa[foo] // bracket notation, name of the field is stored in variable foo 
```

你要避免的是

```
aaa["foo"]  // just ugly, necessary only if the field name is complicated

aaa["space and 123 in there"]   // like here 
```

# javascript - 除非将鼠标悬停在链接上，否则如何每秒更改 div 内的图像？

> ID：12254987
> 
> 赞同：-2
> 
> 时间：2012-09-03T23:17:24.620
> 
> 标签：javascript, jquery, html, css, hover

我问了一个问题[，如果悬停在 div 上，我如何在 div 中显示图像，](https://stackoverflow.com/questions/12254383/how-can-i-display-an-image-in-a-div-if-a-is-hovered-over)感谢 adeneo，这是一个解决方案（[jsFiddle](http://jsfiddle.net/ScAVW/)）：

**标记**：

```
<div id="imgs">
    <img src="http://www.flash-slideshow-maker.com/images/help_clip_image020.jpg" alt="image 1">
    <img src="http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg" alt="image 2">
    <img src="http://www.dreamincode.net/forums/uploads/monthly_05_2010/post-380028-12747928967239.jpg" alt="image 3">
</div>

<ul id="my-ul">
    <li><a href="#" class="img1">hover to see image1</a></li>
    <li><a href="#" class="img2">hover to see image2</a></li>
    <li><a href="#" class="img3">hover to see image3</a></li>
</ul>​ 
```

**JavaScript**：

```
$('#my-ul a').on('mouseenter mouseleave', function(e) {
    $('#imgs img').eq($(this).parent('li').index()).toggle(e.type==='mouseenter');
}); 
```

如何修改[http://jsfiddle.net/ScAVW/1/](http://jsfiddle.net/ScAVW/1/)以便每秒图像更改为 1->2->3->1->2->3->1... 在 div 中，除非链接是徘徊。如果悬停三个链接之一，则显示相应的图像。它在悬停时停止。一旦你的鼠标离开，图像又开始在 div 中改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T23:22:56.203

这是一个简单的图像旋转器。它将停在`mouseenter`一个链接上，切换到悬停的图像；它将`mouseleave`从当前可见的图像中恢复。

```
var intervalId = setInterval(rotate, 1000); // rotate every 1s

function rotate() {
  var $imgs = $("#imgs img"),
      $visible = $imgs.filter(":visible").hide().index();
  $imgs.eq(($visible + 1) % $imgs.length).show();  
}

$('#my-ul a').on('mouseenter mouseleave', function(e) {
  var $imgs = $('#imgs img');
  if (e.type === 'mouseenter') {
    clearInterval(intervalId); // stop, hammer time
    $imgs.filter(":visible").hide();
    $imgs.eq($(this).parent('li').index()).show();
  } else {
    intervalId = setInterval(rotate, 1000);
  }
}); 
```

**[演示](http://jsfiddle.net/kZ8E9/)**。

# ios - iOS：UITableView 在滚动太快时混淆数据

> ID：12254988
> 
> 赞同：4
> 
> 时间：2012-09-03T23:17:38.147
> 
> 标签：ios, uitableview, reuseidentifier

我对 UITableViewCell 进行了子类化以向其添加自定义外观。在 MYTableViewCell 的初始级别，我添加了 4 个子视图：UIImageView 和三个 UILabel(s)。所有 4 个子视图都分配有不同的标签。

在 cellForRowAtIndexPath 方法中，如果一开始不可用，我要么创建一个新单元格，要么重用可用的单元格并将正确的文本分配给 ui 标签。

我遇到的问题是，如果我尝试超快滚动，那么数据就会变得混乱，但是如果我上下滚动得更慢，那么一切正常。

有什么想法吗？？

下面是代码：

```
- (MyTableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"itemListTableViewCell";
MyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

DisplayableEntity *displayableEntity = [self.fetchedResultsController objectAtIndexPath:indexPath];

if( ! cell ) {
    cell = [[MyTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    [self tableView:tableView appearanceForCell:cell withEntity:displayableEntity];
} else {

    UIImageView *imageView = (UIImageView *) [cell viewWithTag:IMAGEVIEW_TAG];
    imageView.image = [UIImage imageNamed:displayableEntity.displayImageName];

    UILabel *titleLabel = (UILabel *) [cell viewWithTag:TITLEVIEW_TAG];
    titleLabel.text = displayableEntity.entityName;

    UILabel *itemDescription = (UILabel *) [cell viewWithTag:DESCRIPTION_TAG];
    itemDescription.text = displayableEntity.entityDesctiption;
  }
}

// some code removed to make it brief
- (void)tableView:(UITableView *)tableView appearanceForCell:(MyTableViewCell *)cell withEntity:(DisplayableEntity *)entity {

    // cell image view
    UIImageView *cellImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[entity displayImageName]]];
    [cellImageView setTag:IMAGEVIEW_TAG];
    [cell addSubview:cellImageView];

    // adding entity name label    
    UILabel *itemTitleName = [self itemTitleNameLabelWithFrame:itemNameLabelRect itemName:[entity entityName]];
    [itemTitleName setTag:TITLEVIEW_TAG];
    [cell addSubview:itemTitleName];

    // adding 'assigned to' label right under the item name label
    UILabel *itemDescriptionLabel = [self itemDescriptionLabelWithFrame:descriptionLabelFrame itemDescription:[entity entityDesctiption]];
    [itemDescriptionLabel setTag:DESCRIPTION_TAG];
    [cell addSubview:itemDescriptionLabel];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T23:40:52.820

我在逻辑上看到了一些麻烦`tableView:cellForRowAtIndexPath:`应该是：

1.  出列单元格
2.  如果单元格不能出队 - 创建新的
3.  设置所有单元格属性

我的意思是这样的：

```
- (MyTableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"itemListTableViewCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    } // <-- Note there is no else, we should reset properties in both cases

    NSManagedObject *managedObject = [_fetchedResultsController objectAtIndexPath:indexPath];

    cell.textLabel.text = [managedObject valueForKey:@"text"];
    cell.imageView.image = [managedObject valueForKey:@"image"];

    return cell;
} 
```

# java - Java类与数组内存大小？

> ID：12254993
> 
> 赞同：10
> 
> 时间：2012-09-03T23:18:04.587
> 
> 标签：java, arrays, class, memory

我必须在我的 Java 程序中存储数百万个 X/Y 双对以供参考。我想保持尽可能低的内存消耗以及对象引用的数量。因此，经过一番思考后，我决定将这两个点保存在一个很小的双数组中可能是个好主意，它的设置如下所示：

```
double[] node = new double[2];
node[0] = x;
node[1] = y; 
```

我认为使用数组会阻止类与类中使用的 X 和 Y 变量之间的链接，如下所示：

```
class Node {
     public double x, y;
} 
```

然而，在阅读了类中公共字段的存储方式之后，我突然意识到，字段实际上可能不是像指针一样的结构，也许 JVM 只是将这些值存储在连续的内存中，并且知道如何在没有地址的情况下找到它们使我的观点的类表示小于数组。

所以问题是，哪个内存占用更小？为什么？

我对类字段是否使用指针特别感兴趣，因此是否有 32 位开销。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T23:23:19.607

后者的占地面积更小。

原始类型内联存储在包含类中。因此，您`Node`需要一个对象标头和两个 64 位插槽。您指定的数组使用一个数组头（>= 一个对象头）加上两个 64 位插槽。

如果您要以这种方式分配 100 个变量，那么这并不重要，因为只是标题大小不同。

警告：所有这些都是推测性的，因为您没有指定 JVM - 其中一些细节可能因 JVM 而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T23:39:34.413

我认为您最大的问题不是存储数据，而是检索、索引和操作数据。

但是，从根本上说，数组是要走的路。如果要保存指针，请使用一维数组。（有人已经说过了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:46:28.117

首先，必须说明实际空间使用量取决于您使用的 JVM。它是严格执行特定的。以下是典型的主流JVM。

> 所以问题是，哪个内存占用更小？为什么？

第二个版本更小。数组具有对象头中保存数组长度的 32 位字段的开销。在非数组对象的情况下，大小在类中是隐含的，不需要单独表示。

但请注意，这是*每个数组对象*的固定开销。数组越大，实际开销就越不重要。使用类而不是数组的另一面是索引不起作用，因此您的代码可能会更复杂（并且更慢）。

Java 2D 数组实际上是 1D 数组（等等）的数组，因此您可以将相同的分析应用于具有更高维度的数组。数组在任何维度上的大小越大，开销的影响就越小。数组中的开销`2x10`将小于数组中的开销`10x2`。（考虑一下......长度为 2 的 1 个数组 + 长度为 10 的 2 个数组*与*1 个长度为 10 的数组 + 长度为 2 的 10 个数组。开销与数组的数量成正比。）

> 我对类字段是否使用指针特别感兴趣，因此是否有 32 位开销。

（您实际上是在谈论实例字段，而不是类字段。这些字段不是`static`......）

类型为原始类型的字段直接存储在对象的堆节点中，无需任何引用。在这种情况下没有指针开销。

但是，如果字段类型是包装器类型（例如`Double`，而不是`double`），则可能存在引用的开销和对象的对象头的开销`Double`。

# android - 如何更改（删除然后添加）Android 中按钮的背景？

> ID：12254994
> 
> 赞同：1
> 
> 时间：2012-09-03T23:18:10.847
> 
> 标签：android, layout, dynamic, background

我正在尝试`background`动态更改按钮的。该按钮已经在`main.xml`. 我努力了：

```
featuredimage.setBackgroundDrawable(res.getDrawable(R.drawable.black_gradient)); 
```

但得到以下错误：

```
09-03 23:16:12.279: E/AndroidRuntime(562): FATAL EXCEPTION: main
09-03 23:16:12.279: E/AndroidRuntime(562): java.lang.NullPointerException
09-03 23:16:12.279: E/AndroidRuntime(562):  at My.Taste.App.MyTasteActivity.changeCatagory(MyTasteActivity.java:188)
09-03 23:16:12.279: E/AndroidRuntime(562):  at My.Taste.App.MyTasteActivity.access$0(MyTasteActivity.java:160)
09-03 23:16:12.279: E/AndroidRuntime(562):  at My.Taste.App.MyTasteActivity$8.onClick(MyTasteActivity.java:155)
09-03 23:16:12.279: E/AndroidRuntime(562):  at android.view.View.performClick(View.java:3511)
09-03 23:16:12.279: E/AndroidRuntime(562):  at android.view.View$PerformClick.run(View.java:14105)
09-03 23:16:12.279: E/AndroidRuntime(562):  at android.os.Handler.handleCallback(Handler.java:605)
09-03 23:16:12.279: E/AndroidRuntime(562):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-03 23:16:12.279: E/AndroidRuntime(562):  at android.os.Looper.loop(Looper.java:137)
09-03 23:16:12.279: E/AndroidRuntime(562):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-03 23:16:12.279: E/AndroidRuntime(562):  at java.lang.reflect.Method.invokeNative(Native Method)
09-03 23:16:12.279: E/AndroidRuntime(562):  at java.lang.reflect.Method.invoke(Method.java:511)
09-03 23:16:12.279: E/AndroidRuntime(562):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-03 23:16:12.279: E/AndroidRuntime(562):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-03 23:16:12.279: E/AndroidRuntime(562):  at dalvik.system.NativeStart.main(Native Method) 
```

是的，black_gradient 文件存在。

附加代码：

```
featuredimage = (ImageView) findViewById(R.id.featuredimage);
featuredinfo = (TextView) findViewById(R.id.featuredinfo);
featuredinfo.setText(Html.fromHtml("<center><big><b>FEATURED " + catagory + "</b></big></center><br>" + getFeatured().getMediumString())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:26:31.340

应该是你的有问题`res`。尝试这个 ：

```
featuredimage.setBackgroundDrawable(getResources().getDrawable(R.drawable.black_gradient)); 
```

您还可以使用[android.view.View.setBackgroundResource](http://developer.android.com/reference/android/view/View.html#setBackgroundResource%28int%29)

> featuresimage.setBackgroundResource(R.drawable.black_gradient);

# python - Tkinter 可调整大小的对象 Python 画布

> ID：12254995
> 
> 赞同：2
> 
> 时间：2012-09-03T23:18:12.000
> 
> 标签：python, class, canvas, tkinter

我正在尝试使用它，以便可以使用旋转框调整 Tkinter 画布上的多个对象的大小/重新定位，旋转框中的值用作原始坐标的乘数。为了使事情稍微复杂一点，旋转框默认情况下是不可见的，它位于顶层窗口中，按下按钮时可以打开。

**总结一下：**
我需要使用旋转框值作为乘数（或其他方式）来更改画布上对象的坐标，该乘数本身位于顶层窗口中，并将这些更改“实时”显示在画布上。

对于上下文，我已经包含了负责设置对象等的关键外围代码。

UI模块的基本部分：

* * *

```
import Canvas_1 (module for drawing shapes)

root=Tk()

#root geometry, title set up
#UI then commands set up
canvasBlank=Canvas(root, width... etc) #Blank canvas that is drawn at start
canvasBlank.grid(row... etc)
canvasBlank.bind('Button-3', rightclickcanvas) #Right click function that opens a popup for canvas options
#Other misc commands, I'm using a menubar with drop down options over actual Tk.Buttons
#'New' option in menubar has Command to create objects in UI like:

def createObject():
     Objects=MyObjects(root, width... etc)
     Objects.grid(row... etc) #Same as layout for canvasBlank
     Objects.bind('<Button-3>', rightclickcanvas)
     Objectslist.append(Objects) #Stop garbage disposal and makes sure the canvas displays 
```

-MyObjects 类（在单独的模块中）的形式类似于：

```
from Coordinate_Generator import * #imports coordinate arrays

class MyObjects(tk.Canvas)
    def __init__(self, master, **kw)
        tk.Canvas.__init__(self, master, **kw)
        self.create_oval(coordinates[0], dimensions[0], fill... etc)
        self.create_oval(coordinates[1], dimensions[1], fill... etc)
#A series of bindings relating to moving objects under mouse clicks 
```

使用任意值“a”确定坐标。我尝试相乘：scaler=[] a=70*scaler[-1]

这种方法似乎也不起作用，如果它起作用了，它也意味着可能会在彼此之间绘制大量的画布，这是我想避免的。我希望这能证明我需要更清楚地尝试和使用的方法。我已经使用给出的建议编写了一些代码，虽然它可能对我正在计划的程序的另一部分有用，但它并没有完全实现我所追求的。所以我拼凑了这个“演示”来说明我正在尝试做的事情。

**工作代码（解决方案）**

```
from Tkinter import *
from numpy import *
import Tkinter as tk

scale=1

class Demonstrator:

   def __init__(self, master=None): 
      global full_coordinates, dimensions, scale
      self.master=master
      self.master.title( "Demonstrator 2")
      self.master.grid()
      self.master.rowconfigure(0, weight=1)
      self.master.columnconfigure(0, weight=1)

      self.canvas = Canvas(self.master, width=300, height=300, bg='grey')
      self.canvas.grid(row=0, rowspan=3, column=0)
      self.canvas.create_rectangle(full_coordinates[0],dimensions[0], activefill='blue', fill='red')
      self.canvas.create_rectangle(full_coordinates[1],dimensions[1], activefill='blue', fill='red')
      self.canvas.create_line(full_coordinates[0],full_coordinates[1], fill='red')

      a=9*scale
      Originx=10
      Originy=35
      coordinates1=[]
      coordinates2=[]

      x,y,i=Originx,Originy,1
      x1,y1,i=Originx,Originy,1

      while len(coordinates1)<=25:
       coordinates1.append((x,y))
       coordinates2.append((x1,y1))

       i+=1
       if i % 2 == 0:
            x,y=x+a,y
            x1,y1=x1,y1+a
       else:
            x,y=x,y+a
            x1,y1=x1+a,y1

       full_coordinates=list(set(coordinates1+coordinates2))
       b=array(full_coordinates)
       k=b+10
       dimensions=k.tolist()

class Settings:
    def __init__(self, parent):

        top = self.top = tk.Toplevel(parent)
        self.top.title('Settings')

        self.spinbox_Label= tk.Label(top, text='Change Scale Factor?')
        self.spinbox_Label.grid(row=0, column=0, columnspan=2)

        self.spinbox_Label= tk.Label(top, width=30, text='Scale factor:')
        self.spinbox_Label.grid(row=1, column=0)

        self.spinbox= tk.Spinbox(top, from_=1, to=10, increment=0.1, command=self.change)
        self.spinbox.grid(row=1, column=1)

    def change(self):
        global scale
        scale=float(self.spinbox.get())
        MG=Demonstrator(root) #This just generates a new Demonstrator with original coordinates

def onClick():
    inputDialog = Settings(root)
    root.wait_window(inputDialog.top)

def onClick2():
    print scale

class coords:
    global full_coordinates, dimensions, scale
    print scale
    a=9*scale
    Originx=10
    Originy=35
    coordinates1=[]
    coordinates2=[]

    x,y,i=Originx,Originy,1
    x1,y1,i=Originx,Originy,1

    while len(coordinates1)<=25:
       coordinates1.append((x,y))
       coordinates2.append((x1,y1))

       i+=1
       if i % 2 == 0:
            x,y=x+a,y
            x1,y1=x1,y1+a
       else:
            x,y=x,y+a
            x1,y1=x1+a,y1

       full_coordinates=list(set(coordinates1+coordinates2))
       b=array(full_coordinates)
       k=b+10
       dimensions=k.tolist()    

root=Tk()
root.minsize=(700,700)
root.geometry=('600x600')
MG=Demonstrator(root)
mainButton2 = tk.Button(root, width=20, text='Print "scale"', command=onClick2)
mainButton2.grid(row=1, column=1)
mainButton = tk.Button(root, width=20, text='Settings', command=onClick)
mainButton.grid(row=2, column=1)
root.mainloop()
mainButton2.grid(row=1, column=1)
mainButton = tk.Button(root, width=20, text='Settings', command=onClick)
mainButton.grid(row=2, column=1)
root.mainloop() 
```

**问题**：
使用旋转框更改画布上对象的大小（通过更改坐标）的最佳方法是什么？
我希望这足以提供信息，当然如果需要我可以提供更多信息。我也提前为这个问题的格式道歉，我是新手 :)
（添加的解决方案）任何帮助都会很棒。干杯。
标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T14:32:45.420

解决方案没有什么特别之处。您只需为调整画布项目坐标的微调框定义一个回调（可以通过`coords`画布的方法完成）。

首先，您可能想要创建一个 dict 来包含每个项目的基本宽度和高度。这个字典的键也可以是与画布项目相关联的标签。例如：

```
self.base_dimensions = {
    "obj1": (10,10),
    "obj2": (20,20),
    ...
} 
```

接下来，使用这些键作为标签在画布上创建项目。例如：

```
...
self.canvas.create_rectangle(..., tags=("obj1",))
self.canvas.create_rectangle(..., tags=("obj2",))
... 
```

最后，您可以使用相同的键将微调框小部件保存在字典中（这样您就可以将微调框与画布对象关联起来），并为微调框分配一个回调来调整大小。例如：

```
self.spinbox = {
    "obj1": tk.Spinbox(..., command=lambda self.do_resize("obj1")),
    "obj2": tk.Spinbox(..., command=lambda self.do_resize("obj2")),
    ...
} 
```

给定一个标签，您的回调可以使用它来获取对 spinbox 小部件的引用并获取它的值，然后使用该标签告诉画布对象要调整哪些项目的大小。例如：

```
def do_scale(self, tag):
    factor = int(self.spinbox[tag].get())
    (width, height) = self.default[tag]
    (x0,y0,x1,y1) = self.canvas.coords(tag)
    width = factor * width
    height = factor * height
    x1 = x0 + width
    y1 = y0 + height
    self.canvas.coords(tag, x0,y0,x1,y1) 
```

当然，组织数据的方法有很多。我所展示的不是最好的方法，也不是唯一的方法。它甚至可能不适用于您组织代码的方式。无论您选择什么，归结为能够从旋转框中获取值并使用它来调整画布项目的坐标。