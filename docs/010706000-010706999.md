# StackOverflow 问答 10706000-10706999

# javascript - JavaScript 对象中的范围问题

> ID：10706000
> 
> 赞同：2
> 
> 时间：2012-05-22T16:17:53.580
> 
> 标签：javascript, jquery, json, oop

我正在尝试在我的 JavaScript 对象中创建一个数组，其中包含使用 jQuery 中的 $.getJSON() 函数从 JSON 文件中提取的对象。我遇到了范围问题，似乎在 $.getJSON() 函数中设置了数组元素，但在它之外，数组是空的。这是代码：

```
function player(playlist){
...
var tracks = [];

this.start = function() {
...
    $.getJSON(playlist, function(data){
        $.each(data.tracks, function(key,value){
            var track_info = function(info){return info}(value);
            tracks.push(track_info);
        });
        console.log("from .getJSON function");
        console.log(tracks);
    });
    console.log("outside .getJSON function");
    console.log(tracks);
    ...
};
...
$(document).ready(function(){
    var the_player = new player(playlist);
    the_player.start();
)}; 
```

输出是：

```
outside .getJSON function
[]
from .getJSON function
[Object, Object, Object] 
```

所有对象都包含来自 JSON 文件的正确数据。

我对这个问题感到困惑，有人可以帮助我理解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:19:56.233

提示是顺序：

```
outside .getJSON function
[] 
```

其次是

```
from .getJSON function
[Object, Object, Object] 
```

在收到 JSON 响应之前，您的外部代码正在执行，因此毫不奇怪，`tracks`它是空的。这可能看起来违反直觉 -`from .getJSON function`首先出现在源代码中，但执行第二！这是因为`.getJSON`不是同步的。在继续下一条语句之前，它不会执行其回调参数。它立即继续下一条语句，稍后执行回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:19:37.240

$.getJSON 是一个 AJAX 调用，并且是异步的。这意味着您`console.log("outside .getJSON function");`在 AJAX 调用返回（并填充数组）之前被调用。这就是正在发生的事情的提示是，您在“内部”之前看到“外部”的输出

# java - Java：检测颜色（例如我的颜色是蓝色吗？）

> ID：10706006
> 
> 赞同：2
> 
> 时间：2012-05-22T16:18:27.680
> 
> 标签：java, hsv, threshold

我用 Java 处理一个项目，它加载图像并查找每个像素的颜色信息。我需要在颜色定义上检测天空，这可能看起来像天空 - 使用蓝色范围。最初似乎最好使用 RGB，但这需要定义所有蓝色阴影（不可数）。我找到了分析方法，每种颜色使用 HSV 的阈值，但不知道如何分别使用颜色范围加载一些库，如何解决。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T16:48:57.167

您可以`java.awt.Color`使用静态方法将 a 转换为它的 HSV 值`RGBtoHSB(...)`。然后，您可以获取色调，并将其与范围的边界进行比较 - 出于您的目的 - 构成“蓝色” - 例如

```
private static final float MIN_BLUE_HUE = 0.5f; // CYAN
private static final float MAX_BLUE_HUE = 0.8333333f; // MAGENTA

public static boolean isBlue(Color c) {
  float[] hsv = Color.RGBtoHSB(c.getRed(), c.getGreen(), c.getBlue(), null);
  float hue = hsv[0];
  if (hue >= MIN_BLUE_HUE && hue <= MAX_BLUE_HUE){
    return true;
  } 
  return false;
} 
```

`MIN_BLUE_HUE`我已经为and提供了一些起始值`MAX_BLUE_HUE`，但是您设置`MIN_BLUE_HUE`和`MAX_BLUE_HUE`to 将取决于您是否愿意接受“蓝色” - 即可以有多少绿色或紫色，并且仍然可以作为天空接受？

# sql-server - 如何计算过去 n 小时的移动平均值

> ID：10706012
> 
> 赞同：1
> 
> 时间：2012-05-22T16:18:53.457
> 
> 标签：sql-server, sql-server-2008, tsql

我正在尝试有效地计算（使用 SQL Server 2008）ProductCount 在 24 小时内的[移动平均值](http://en.wikipedia.org/wiki/Moving_average)。对于 Product 表中的每一行，我想知道过去 24 小时内 ProductCount 的平均值（对于给定的产品）是多少。我们数据的一个问题是并非所有日期/时间都存在（参见下面的示例）。如果缺少 TimeStamp，则意味着 ProductCount 为 0。

我有一个包含数百万行的表，其中包含日期、产品和计数。下面是我必须处理的数据的简化示例。

关于如何实现的任何想法？

**编辑**：我需要的另一条数据是该期间（即 24 小时）的 MIN 和 MAX ProductCount。由于缺少值，计算 MIN/MAX 有点棘手......

```
+---------------------+-------------+--------------+
|         Date        | ProductName | ProductCount |
+---------------------+-------------+--------------+
| 2012-01-01 00:00:00 |    Banana   |    15000     |
| 2012-01-01 01:00:00 |    Banana   |    16000     |
| 2012-01-01 02:00:00 |    Banana   |    17000     |
| 2012-01-01 05:00:00 |    Banana   |    12000     |
| 2012-01-01 00:00:00 |    Apple    |     5000     |
| 2012-01-01 05:00:00 |    Apple    |     6000     |
+---------------------+-------------+--------------+ 
```

SQL

```
CREATE TABLE ProductInventory (
    [Date]  DATETIME,
    [ProductName] NVARCHAR(50),
    [ProductCount] INT
)

INSERT INTO ProductInventory VALUES ('2012-01-01 00:00:00', 'Banana', 15000)
INSERT INTO ProductInventory VALUES ('2012-01-01 01:00:00', 'Banana', 16000)
INSERT INTO ProductInventory VALUES ('2012-01-01 02:00:00', 'Banana', 17000)
INSERT INTO ProductInventory VALUES ('2012-01-01 05:00:00', 'Banana', 12000)
INSERT INTO ProductInventory VALUES ('2012-01-01 00:00:00', 'Apple', 5000)
INSERT INTO ProductInventory VALUES ('2012-01-01 05:00:00', 'Apple', 6000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:41:55.067

好吧，您需要计算每小时的平均值这一事实**实际上**使这变得更简单，因为您只需要`SUM`产品计数并将其除以一个固定数字 (24)。所以我认为这会得到你想要的结果（尽管在这种特殊情况下，游标实际上更快）：

```
SELECT A.*, B.ProductCount/24 DailyMovingAverage
FROM ProductInventory A
OUTER APPLY (   SELECT SUM(ProductCount) ProductCount
                FROM ProductInventory
                WHERE ProductName = A.ProductName 
                AND [Date] BETWEEN DATEADD(HOUR,-23,A.[Date]) AND A.[Date]) B 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T02:32:06.567

我在 Lamak 的回答中添加了最小值/最大值：

```
SELECT *
FROM ProductInventory A
OUTER APPLY (   
    SELECT 
        SUM(ProductCount) / 24 AS DailyMovingAverage, 
        MAX(ProductCount) AS MaxProductCount,
        CASE COUNT(*) WHEN 24 THEN MIN(ProductCount) ELSE 0 END AS MinProductCount
    FROM ProductInventory
    WHERE ProductName = A.ProductName 
    AND [Date] BETWEEN DATEADD(HOUR, -23, A.[Date]) AND A.[Date]) B 
```

要考虑丢失的记录，请检查在使用前的最后 24 小时内确实有 24 条记录，`MIN(ProductCount)`否则返回 0。

工作[SQL Fiddle](http://sqlfiddle.com/#!3/9103b/2)，添加了一堆（蒲式耳？）橘子以显示 MinProductCount 工作

# android - Android radiogroup，单选按钮之间的分隔符

> ID：10706013
> 
> 赞同：27
> 
> 时间：2012-05-22T16:18:59.820
> 
> 标签：android, radio-button, radio-group, divider

`RadioButtons`有没有一种简单的方法可以在a之间添加分隔符`RadioGroup`？我试过使用`divider`xml 属性，但它似乎不起作用。如果它是相关的`RadioGroup`，我的布局中不包含任何子视图；我正在以`RadioButtons`编程方式添加。

**编辑**：问题解决了。`RadioButton`您可以在`RadioGroup`xml之外添加视图。在我的情况下，您也可以通过编程方式执行此操作，但请注意您的布局参数。Akki 有正确的想法，这对我有用：

```
for (int i = 0; i < items.size(); i++) {
    if (i > 0) {
        // add a divider with height of 1 pixel
        View v = new View(this);
        v.setLayoutParams(new RadioGroup.LayoutParams(LayoutParams.MATCH_PARENT, 1));
        v.setBackgroundColor(android.R.color.darker_gray);
        mRadioGroup.addView(v);
    }
    RadioButton rb = new RadioButton(this);
    /* set other properties ... */

    mRadioGroup.addView(rb);
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-02-04T16:51:45.230

```
<RadioGroup
    android:id="@+id/location_radio_group"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:divider="?android:attr/dividerHorizontal"
    android:showDividers="middle">
</RadioGroup> 
```

这对你有用。我真的很好奇您如何将视图添加到组视图中？那应该导致classcastexception，不是吗？

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-17T07:04:58.993

这是一个解决方法：

首先创建一个**Shape Drawable**作为你的分隔线。这是一个例子：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
<solid 
    android:color="@color/white" />
<stroke 
    android:width="0.3dp" 
    android:color="@color/black" />
</shape> 
```

这只是一个简单的黑色边框。将它放在您的 drawable/ 文件夹中，并将其命名为**custom_divider.xml**。

然后，转到使用**RadioGroup**的布局。使用 ShapeDrawable 作为每个**RadioButton** (s) 的背景。这是一个例子：

```
<RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:divider="@color/black" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/custom_radiogroup_divider"
            android:checked="true"
            android:text="RadioButton" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/custom_radiogroup_divider"
            android:text="RadioButton" />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/custom_radiogroup_divider"
            android:text="RadioButton" />

    </RadioGroup> 
```

您还可以将 ShapeDrawable 添加到 RadioGroup。这取决于你，如果你需要定制它。:)

这是我的带有自定义边框（带角半径）和自定义分隔线 ShapeDrawable(s) 的 RadioGroup 示例。 ![RadioGroup 分隔符](../Images/ab19c9f1e2a5b978c88a3f75b09a4f05.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-24T13:47:30.233

创建表示分隔符的可绘制形状（称为“radio_group_divider”）：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <size android:width="12dp" />
    <solid android:color="@color/transparent" />
</shape> 
```

将此可绘制对象用作 RadioGroup 中的“分隔符”：

```
<RadioGroup
        ...
        android:divider="@drawable/radio_group_divider"
        android:showDividers="middle"
        ...>
</RadioGroup> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-26T07:01:30.647

如果您以编程方式创建 RadioGroup，那么您也必须以编程方式设置分隔线。你可以这样做：

```
RadioGroup radioGroup = new RadioGroup(getActivity()); //We create a new radio group
radioGroup.setShowDividers(LinearLayout.SHOW_DIVIDER_MIDDLE);
radioGroup.setDividerDrawable(getResources().getDrawable(android.R.drawable.divider_horizontal_textfield, getActivity().getTheme())); 
```

...

**注意：**此代码部分在片段中工作。因此，如果要将其放入活动中，则必须通过将“getActivity()”更改为“YourActivityName.this”来进行修改

# java - 如何从大字符串中逐行读取？

> ID：10706015
> 
> 赞同：0
> 
> 时间：2012-05-22T16:19:01.123
> 
> 标签：java, string, substring, indexof

考虑我在以下结构中有一些大字符串：

```
parameter1|parameter2|parameter3|parameter4+"\0" 
```

*其中参数是通常未知长度的一些字符的序列。

现在考虑我的大字符串包含 4 行数据，例如：

```
parameter1|parameter2|parameter3|parameter4+"\0"
parameter1|parameter2|parameter3|parameter4+"\0"
parameter1|parameter2|parameter3|parameter4+"\0"
parameter1|parameter2|parameter3|parameter4+"\0" 
```

我如何阅读第一行然后阅读第二行等等？
我知道我`Substring`每次都可以使用方法轻松获取第一行，但是
如何使用`Substring`（或其他方法）获取大字符串的下 3 行，以便再次提取第一行（代表第二行在实践中原来的大弦线）。
我知道我需要的只是最后一个“\0”（第 4 行）的索引，并且我已经有了当前行“\0”的索引。

我应该使用`lastIndexOf("\0")`吗？
如果您对这种工作方式有任何其他想法甚至批评，我将非常高兴听到。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:23:59.977

您可以使用包装在 BufferedReader 中的 StringReader，例如：

```
BufferedReader r = new BufferedReader(new StringReader("my multiline text..."));
String l = null;
while ((l=r.readLine)!=null) {
 ....
 // each line in "l"
} 
```

[http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine()](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine()) [http://docs.oracle.com/javase/6/docs/api/java/io /StringReader.html](http://docs.oracle.com/javase/6/docs/api/java/io/StringReader.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T16:23:37.107

您可以使用带参数的[String.split方法。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)`"\0"`然后你会得到一个字符串数组（`String[]`），然后你可以做任何你想做的事情:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T16:23:26.330

也许，

```
inputString.split("\0"); 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:24:56.500

我会使用正则表达式来分隔字符串。如果您想要一个字符串数组中的所有单词，您可以使用 /s（空格）作为分隔符模式。

你可以在这里找到信息[http://www.regular-expressions.info/java.html](http://www.regular-expressions.info/java.html)

# sql - 连接两个表的复杂sql查询

> ID：10706018
> 
> 赞同：0
> 
> 时间：2012-05-22T16:19:16.607
> 
> 标签：sql, sql-server-2005

我有以下两个表，并希望结果日期和银行明智。示例如下。

```
Table1: Name:- AccountMast                      
companyID   A/CID   Name          BalDR BalCR   
102         14      SHOBHA        NULL  NULL    
102         15      SONKI         NULL  NULL    
102         16      BANK OF INDIA null  12000       

Table2 Name :- DeBank                       
companyID   transID  date        name          particulars  deposit withdrawal
102         2        12/04/2012  BANK OF INDIA MAHENDRA     1000    NULL
102         4        15/04/2012  CENTRAL BANK  MAHENDRA     1000    NULL
102         3        20/05/2012  BANK OF INDIA MAHENDRA     2000    NULL

Result                      
BANK WISE RESULT BANK OF INDIA              
date        transID particulars deposit withdrawal  BALANCE 
01/04/2012          BAL B/F                         12000   
12/04/2012    2     MAHENDRA    1000    NULL        13000 
20/05/2012    3     MAHENDRA    2000    NULL        15000

BANK WISE RESULT CENTRAL BANK OF INDIA              
date        transID particulars deposit withdrawal  BALANCE**   
01/04/2012          BAL B/F             
15/04/2012   4      MAHENDRA    2000    NULL        2000 
```

那么它的sql语句是什么？

# jquery - nivo 滑块错误 pauseTime 低于 2000

> ID：10706022
> 
> 赞同：1
> 
> 时间：2012-05-22T16:19:36.700
> 
> 标签：jquery, nivo-slider

我正在尝试在模板中使用 nivo 滑块，但偶然发现了这一点：

如果 pauseTime 值小于 3000（如演示代码中所示），则计时完全关闭。它只是从一个幻灯片跳到另一个幻灯片。有没有人偶然发现这个还是只有我一个人？

[所有这些都使用默认参数和代码（从http://nivo.dev7studios.com/support/jquery-plugin-usage/](http://nivo.dev7studios.com/support/jquery-plugin-usage/)复制粘贴）

# initialization - Common Lisp：初始化具有许多条目的哈希表的简写

> ID：10706024
> 
> 赞同：9
> 
> 时间：2012-05-22T16:19:37.913
> 
> 标签：initialization, constants, hashtable, common-lisp

我正在寻找一种可能不冗长的可移植方式来初始化 Common Lisp 中的哈希表。例如，适用于常量哈希表的东西，也适用于预加载变量哈希。在 CLISP 中，我正在使用：

```
(defconstant +my-map+ #S(HASH-TABLE :TEST FASTHASH-EQ
  (key1 . "value1")
  ...
  (keyN . "valueN")
)) 
```

但不幸的是，这种格式只适用于 CLISP。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T20:24:27.277

可以在读取时以编程方式构造哈希表：

```
(defvar *ht* #.(let ((ht (make-hash-table)))
                 (loop for (key . value) in
                       '((a . 1) (b . 2) (c . 3))
                       do (setf (gethash key ht) value))
                 ht))

(describe *ht*) 
```

`#.`用于读取时间评估。然后编译器会将哈希表转储到 FASL 文件中。

然后可以编译：

使用 SBCL：

```
* (compile-file "/tmp/test.lisp")

; compiling file "/private/tmp/test.lisp" (written 24 MAY 2012 10:08:49 PM):
; compiling (DEFVAR *HT* ...)
; compiling (DESCRIBE *HT*)

; /tmp/test.fasl written
; compilation finished in 0:00:00.360
#P"/private/tmp/test.fasl"
NIL
NIL
* (load *)

#<HASH-TABLE :TEST EQL :COUNT 3 {100299EA43}>
  [hash-table]

Occupancy: 0.2
Rehash-threshold: 1.0
Rehash-size: 1.5
Size: 16
Synchronized: no
T
* *ht*

#<HASH-TABLE :TEST EQL :COUNT 3 {100299EA43}> 
```

将哈希表创建为函数：

```
(defun create-hashtable (alist
                         &key (test 'eql)
                         &aux (ht (make-hash-table :test test)))
  (loop for (key . value) in alist
        do (setf (gethash key ht) value))
  ht) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T05:41:55.793

[Alexandria](http://common-lisp.net/project/alexandria/)具有该[`alist-hash-table`](http://common-lisp.net/project/alexandria/draft/alexandria.html#Hash-Tables)功能，您可能会发现它很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-02T09:49:23.197

[Serapeum](https://github.com/ruricolist/serapeum/blob/master/REFERENCE.md#hash-tables)图书馆有`dict`：

```
(dict :a 1 :b 2 :c 3)
#<HASH-TABLE :TEST EQUAL :COUNT 3 {1008906D13}> 
```

您可以漂亮地打印哈希表：

```
CL-USER> (toggle-pretty-print-hash-table)
T
CL-USER> (dict :a 1 :b 2 :c 3)
(dict
  :A 1
  :B 2
  :C 3
 ) 
```

这是可以读回的表示。

我们也可以`pretty-print-hash-table`直接使用。

Serapeum 是一个高质量的图书馆。

ps：我的[CIEL](https://github.com/ciel-lang/CIEL/)元包`dict`默认是可用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-03T13:15:30.143

哇，9年前的一个问题得到了另一个答案。巧合的是，在提出这个问题 2 个月后， [make-hash](https://github.com/genovese/make-hash)出现了，并且通常对这类事情有用。

# c# - LINQ、Lambda、C#、扩展方法

> ID：10706027
> 
> 赞同：2
> 
> 时间：2012-05-22T16:19:43.767
> 
> 标签：c#, linq, lambda, extension-methods

几天来，我只是第一次使用 linq to sql 和 lambda 表达式，我想做以下事情。

我有一个返回双精度的字符串扩展方法。扩展方法测试两个字符串并返回相似度分数。我有一个使用 linq to sql 的表中的列中的字符串值列表，我想使用扩展方法作为过滤出唯一那些相似度分数等于或大于输入字符串的字符串的方法。

到目前为止，我已经得到了以下内容。我似乎无法测试返回的双精度值。

```
List<int> ids = dc.ErrorIndexTolerances
                  .Where(n => n.Token.Distance(s) => .85)
                  .Select(n => n.ID)
                  .ToList(); 
```

距离方法是返回双精度的扩展方法。Token 和 s 都是字符串。ID 是表中的整数 ID 字段。

有没有人有任何提示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T16:22:33.157

*大于或等于*运算符 is ，`>=`not `=>`。

```
List<int> ids =
  dc.ErrorIndexTolerances.Where(n => n.Token.Distance(s) >= .85)
  .Select(n => n.ID).ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T16:22:53.123

也许这应该是

```
n.Token.Distance(s) >= .85) 
```

只是一个错字:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T17:06:17.720

> 有没有人有任何提示？

我有一个提示...永远不要使用“大于”，只使用“小于”。

```
.Where(n => .85 <= n.Token.Distance(s)) 
```

* * *

我遵循这条规则主要是因为日期逻辑。在比较 5 组日期时，最好不要误读标志。小的在左边，大的在右边，100% 的时间。

```
.Where(acct => acct.CreateTime <= now
  && acct.StartTime <= order.OrderDate
  && order.FulfilledDate <= acct.EndTime) 
```

# php - '/var/spool/cron' 不是一个目录，可以解决。尝试通过 PHP 的 shell_exec 使用 crontab 时

> ID：10706031
> 
> 赞同：1
> 
> 时间：2012-05-22T16:20:02.817
> 
> 标签：php, linux, apache, shell-exec, selinux

我正在创建一个 Web 应用程序。部分功能取决于用户可以启动/停止导入电子邮件的 cronjob。

它不起作用。

只是为了确保我走在正确的轨道上，作为初学者，我只想让 'crontab -l' 从 php 工作并将其打印到 Web 浏览器。

这就是我的做法（handle_email_cronjob.php）：

```
$output = shell_exec('crontab -l');
echo $output; 
```

但我得到的只是一无所有。（做 shell_exec('ls -l'); 给我目录中的文件/目录列表）

猫错误日志：

```
'/var/spool/cron' is not a directory, bailing out. 
```

好吧，无论错误日志说什么，它都是一个目录。ls -Z /var/spool：

```
drwxr-xr-x. apache apache system_u:object_r:httpd_sys_rw_content_t:s0 cron 
```

SELinux 已开启，我不想改变它。

ls -Z /var/spool/cron：

```
-rwxrwxrwx. apache apache unconfined_u:object_r:httpd_sys_rw_content_t:s0 apache
-rw-------. root   root   unconfined_u:object_r:cron_spool_t:s0 root 
```

应该使用的是apache。（我确实尝试将 cron_spool_t 设置为 apache，但仍然没有工作。）

ls -Z handle_email_cronjob.php：

```
-rwxr-xr-x. apache apache unconfined_u:object_r:httpd_sys_script_exec_t:s0 handle_email_cronjob.php 
```

我只是有一种直觉，它与 SELinux 有关，但我不知道如何修复它。

有什么问题，我该如何解决？（或者有比我更好的方法吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:11:51.723

在学习了如何对 SELinux 进行故障排除后，我意识到我必须标记 /var/spool/cron 以便 httpd 可以读取/写入该目录：

```
chcon -R -t httpd_sys_script_rw_t /var/spool/cron 
```

参考：

[了解 audit.log](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/SELinux_Guide/rhlcommon-section-0055.html#RHLCOMMON-SECTION-0078)

[SELinux 疑难解答](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/4/html/SELinux_Guide/rhlcommon-section-0068.html#RHLCOMMON-SECTION-0083)

# r - 修复 R 中 geom_smooth 方法中的错误

> ID：10706037
> 
> 赞同：2
> 
> 时间：2012-05-22T16:20:27.457
> 
> 标签：r, ggplot2

我想为我拥有的数据创建一个平滑的曲线图。我在一个文本文件中有数据，比如 file.txt 这是一个制表符分隔的文件，并且标题是`A`这样`B`的

```
A    B
0.1  0.2
  .....
  ..... 
```

两者下大约有 30000 个这样的数据`A`点`B`

我为此使用以下代码：

```
dstr_data <- read.table("file.txt", header=T, sep="\t")

ggplot(dstr_data,aes(xaxis))+geom_smooth(method="auto",aes(y=dstr_data$A)
,colour="red",size=0.75)+geom_smooth(method="auto",aes(y=dstr_data$B),
colour="darkgreen",alpha=0.5,size=0.75)+opts(title=expression("Test Plot"),
panel.background = theme_rect(fill='blanchedalmond', colour='black'))+
xlab("Data")+ylab("Values")

geom_smooth: method="auto" and size of largest group is >=1000, 
so using gam with formula: y ~ s(x, bs = "cs"). Use 'method = x' to change the smoothing method. 
```

`xaxis`在我的代码中包含从 1 到 30000 的数字。所以我的 X 轴将是从 1 到 30000 的数字。Y 轴将是来自 file.txt 的值。所以，我现在正试图在一张图上绘制两条曲线。

我想知道为什么会显示此错误以及如何修复它。我想使用一种方法，它给我一个平滑的数据曲线而不是一条直线，因此我不想使用 lm,glm 方法。

此外，我仅获得数据子集而不是整个数据的图表。为什么会这样？

有人可以帮助我吗？先感谢您。

# asp.net-mvc-3 - Automapper 的忽略选项将目标属性设置为 NULL

> ID：10706038
> 
> 赞同：1
> 
> 时间：2012-05-22T16:20:28.350
> 
> 标签：asp.net-mvc-3, automapper

在我的 Global.asax 中：

```
 AutoMapper.Mapper.CreateMap<ViewModel, DataType>()
            .ForMember(dest => dest.User, opt => opt.Ignore()); 
```

在我的 MVC 操作中：

```
 AutoMapper.Mapper.Map(viewmodel, data); 
```

在调用 Map() 函数之前，data.User 不为空。在调用 Map() 之后，data.User 现在立即为空，但是，如果我理解正确，Ignore() 应该完全忽略该属性并保持不变。关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:51:32.550

我显然没有为任何人提供足够的信息来解决这个问题。

我的问题发生了，因为我的数据模型是一个 EF4 实体，而我的视图模型有一个映射到一个外键，该外键映射到上面提到的用户对象。一旦我们调用 Map()，它会将 User 实体重置为 null。从 ViewModel 中删除此属性后，一切都开始按预期工作。

# php - 在不更改数千行代码的情况下创建静态数组

> ID：10706040
> 
> 赞同：3
> 
> 时间：2012-05-22T16:20:35.893
> 
> 标签：php, arrays, static

我们有一个类，它包含一个名为的公共数组`$saved`，其中包含在方法之间共享所需的大量数据（下面的示例）......

```
class Common {
    public $saved = array();

    public function setUser($data) {
        $this->saved['user_data'] = $data;
    }

    public function getUserID() {
        return $this->saved['user_data']['id'];
    }
} 
```

从字面上看，有数千行代码是这样工作的。

`Common`问题是在某些方法中创建了扩展类的新实例，因此当它们访问`$saved`它时，它们不会保存相同的数据。

解决方案是创建`$saved`一个静态变量，但是我无法更改所有引用，`$this->saved`因此我想尝试保持代码相同但使其行为静态。

这是我尝试将`$this->saved`通话设为静态...

```
class PropertyTest {
    private $data = array();

    public function __set($name, $value) {
        $this->data[$name] = $value;
    }

    public function __get($name) {
        if (array_key_exists($name, $this->data)) {
            return $this->data[$name];
        }

        return null;
    }

    public function __isset($name) {
        return isset($this->data[$name]);
    }

    public function __unset($name) {
        unset($this->data[$name]);
    }
}

class Common {
    public $saved;
    private static $_instance;

    public function __construct() {
        $this->saved = self::getInstance();
    }

    public static function getInstance() {
        if (self::$_instance === null) {
            self::$_instance = new PropertyTest();
            self::$_instance->foo = array();
        }
        return self::$_instance->foo;
    }
} 
```

当设置一个变量时，它似乎不会保持静态（下面的测试用例），这并不完全有效......

```
class Template extends Common {

    public function __construct() {
        parent::__construct();
        $this->saved['user_data'] = array('name' => 'bob');
        $user = new User();
    }
}

class User extends Common {

    public function __construct() {
        parent::__construct();
        $this->saved['user_data']['name'] .= " rocks!";
        $this->saved['user_data']['id'] = array(400, 10, 20);
    }
}

$tpl = new Template();
print_r($tpl->saved['user_data']); 
```

`$this->saved`初始化时为空`User`并且似乎不是同一个变量，最终`print_r`仅显示名称 => bob 的数组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:16:36.177

首先，我不得不说，IMO，将实例的属性用作类的属性并不是**很好**`$saved`（没有声明为，`static`但它的值与所有实例共享）。

这是一个工作版本[http://codepad.org/8hj1MOCT](http://codepad.org/8hj1MOCT)，这里是注释代码。基本上，诀窍在于同时使用[ArrayAccess 接口](http://www.php.net/manual/en/class.arrayaccess.php)和[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)。

```
class Accumulator implements ArrayAccess {

    private $container = array();
    private static $instance = null;

    private function __construct() {
    }

    public function getInstance() {
        if( self::$instance === null ) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    public function offsetSet($offset, $value) {
        if (is_null($offset)) {
            $this->container[] = $value;
        } else {
            $this->container[$offset] = $value;
        }
    }

    public function offsetExists($offset) {
        return isset($this->container[$offset]);
    }

    public function offsetUnset($offset) {
        unset($this->container[$offset]);
    }

    public function offsetGet($offset) {
        return isset($this->container[$offset]) ? $this->container[$offset] : null;
    }

}

class Common {
    public $saved = null;

    public function __construct() {
        // initialize the "saved" object's property with the singleton
        // that variable can be used with the array syntax thanks to the ArrayAccess interface
        // so you won't have to modify your actual code
        // but also, since it's an object, this local "$this->saved" is a reference to the singleton object
        // so any change made to "$this->saved" is in reality made into the Accumulator::$instance variable
        $this->saved = Accumulator::getInstance();
    }

    public function setUser($data) {
        $this->saved['user_data'] = $data;
    }

    public function getUser() {
        return $this->saved['user_data'];
    }

}

class Template extends Common {

    // you can redeclare the variable or not. Since the property is inherited, IMO you should not redeclare it, but it works in both cases
    // public $saved = null;

    public function __construct() {
        // maybe we can move this initialization in a method in the parent class and call that method here
        $this->saved = Accumulator::getInstance();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:10:30.090

我认为这个实现有很多问题很可能会反过来咬你。但是，在您当前的实现中，您每次都在构建一个新实例（尽管是通过静态调用）。

而是使用 getInstance() 作为您的单例钩子，并使您的 __construct 私有，因为您只能从 Common 类的上下文中访问它。

像这样：

```
class Common {
    public $saved;

    private static $_instance;

    private function __construct() {
    }

    public static function getInstance() {
        if (self::$_instance === null) {
            self::$_instance = new self();
            ... any other modifications you want to make ....
        }
        return self::$_instance;
    }
} 
```

并且永远不要运行 parent::_construct()，而是始终使用 getInstance() 方法。

您可能还想放弃扩展这个单例类的想法。这确实是一个糟糕的反模式，从长远来看可能会给您带来许多问题。相反，只需维护一个`Common`其他类可以读取/写入的类。作为一个单例，您无需担心注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:35:35.693

我似乎已经解决了这个问题，通过`$this->saved`引用它工作的静态变量......

```
class Common {
    private static $savedData = array();
    public $saved;

    public function __construct() {
        $this->saved =& self::$savedData;
    }
} 
```

# c# - ControlTemplate 导致以下错误“属性‘内容’设置不止一次”

> ID：10706043
> 
> 赞同：1
> 
> 时间：2012-05-22T16:20:37.487
> 
> 标签：c#, wpf, controltemplate

我只是第一次尝试将 ControlTemplate 用于我想要创建的按钮。

但是，一旦我将标签`<ControlTemplate>`放在任何地方，它就会出现错误。

```
<Window x:Class="MAQButtonTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="695" Width="996">        
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0" Background="#FFE9F1F6"></Grid>
        <Grid Grid.Column="1" Background="#FFD2E3ED">

        </Grid>
    </Grid>
    <ControlTemplate></ControlTemplate>
</Window> 
```

我应该把标签放在哪里，这样这个错误就不会出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:32:27.093

模板，如样式、画笔、数据模板是资源，通常放置在资源字典或控件中的资源部分中。

```
<Window>
    <Window.Resources>
        <ControlTemplate TargetType="{x:Type Button}"/>
        <ControlTemplate x:Key="myTemplate" TargetType="{x:Type Button}"/>
    <Window.Resources>

    <!-- this will use your implicit defined template -->
    <Button />
    <!-- this will use your explicit defined template called  myTemplate-->
    <Button Template="{StaticResource myTemplate}"/>
</Window> 
```

# android - Android abortBroadcast() 工作奇怪

> ID：10706044
> 
> 赞同：0
> 
> 时间：2012-05-22T16:20:39.433
> 
> 标签：android, android-emulator, sms

我制作了一些程序，它从手机中删除不需要的短信（通过特殊过滤器）。

它使用 aborBroadcast() 来停止 SMS。

在模拟器中，它也可以在某些手机上运行（我用 Android 2.2 测试过）。

但在某些手机（三星，2.3.3）中，它不会停止 SMS。删除我的程序后，手机再次收到所有短信，但已中止。

我的 android.manifest 代码：

```
<receiver android:name=".SmsHandler" >
    <intent-filter android:priority="2147483647" >
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

我的处理程序代码：

```
if msgText.contains(GlobalVars.getInstance().getFilterText())) {
    abortBroadcast();
} 
```

也许，有人可以建议我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:25:47.897

有两种类型的广播，有序和无序。据我所知，SMS 是一种无序广播，这就是为什么你不能真正中止它的原因。

[http://developer.android.com/reference/android/content/BroadcastReceiver.html#Security](http://developer.android.com/reference/android/content/BroadcastReceiver.html#Security)

我不确定您何时说它适用于某些设备。理想情况下，它不应该用于接收到的 SMS 广播。

# ios - 无需使用 Xcode 或通过 App Store 即可创建供个人使用的 iPhone 应用程序

> ID：10706045
> 
> 赞同：1
> 
> 时间：2012-05-22T16:20:43.877
> 
> 标签：ios

我想为我制作一个小应用程序。我不想分发它，也不想从中赚钱，我只需要随身携带这个应用程序。

我没有能够运行 Xcode 的 Mac，也不想在开发者许可证上浪费任何钱。

有没有一种方法可以让我只为我的个人 iPhone 4s 制作应用程序，而无需通过 App Store 或使用 Xcode？我的 iPhone 已经越狱了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:23:06.953

Web 应用程序可能是更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:24:11.620

最简洁的答案是不。您需要 Mac/Xcode 来为您编译/构建应用程序。正如@Thalecress 建议的那样，您最好构建一个网络应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:36:45.463

还要检查[PhoneGap](http://www.phonegap.com "电话间隙")，使用它您可以在多个平台（包括 iOS、Android 和 WP7）上部署您的 Web 应用程序。Phonegap 还提供构建服务，您可以使用该服务将最终的 Web 应用程序包装为本机应用程序以在设备上运行它 ( [PhoneGap:Buld](https://build.phonegap.com/ "电话间隙：Buld") )。

# php - 将json与jquery一起用于jtables？

> ID：10706048
> 
> 赞同：2
> 
> 时间：2012-05-22T16:20:55.493
> 
> 标签：php, jquery, json

我正在使用 jtables（http://www.jtable.org），但创建组合框（下拉菜单）的选项之一是：

```
Branch: {
    title: 'Branch',
    type: 'list',
    options: {
        '1': 'Auckland',
        '2': 'Queensland'
    }
} 
```

我希望能够为我的“选项”使用 mysql 查询（JSON'ed？），而不是对其进行硬编码。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-29T10:18:00.540

```
Branch:{
  title: 'Page Name',
  width: '30%',
  options:  'FieldNameLoader.php?action=Branch',
  list :true
}

if($_GET["action"] == "Branch") {

$result = mysql_query("SELECT * from tblPagelist ORDER BY PageName ASC;");
$rows = array();
while ($row = mysql_fetch_array($result)) {
    $eil = array();
    $eil["DisplayText"] = $row[1];
    $eil["Value"] = $row[0];
    $rows[] = $eil;
    }
$jTableResult = array();
$jTableResult['Result'] = "OK";
$jTableResult['Options'] = $rows;  
print json_encode($jTableResult);    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:25:07.027

使用 PHP 的 json_encode 和 mysql_fetch_array

PHP

```
while($row = mysql_fetch_array($query)) {
  $options[$row['id']] = $row['name'];
}

$options = json_encode($options); 
```

JSON

```
Branch: {
  title: 'Branch',
  type: 'list',
  options: <?=$options?>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:23:14.373

我所做的是在 php 端查询所有内容并将其放入数组中，然后将其回显到 javascript 页面：

```
 Branch: {
                title: 'Branch',
                type: 'list',
                options: <?php echo json_encode($branchArray)?>
            } 
```

# objective-c - 核心数据版本控制和 SVN

> ID：10706049
> 
> 赞同：1
> 
> 时间：2012-05-22T16:20:57.067
> 
> 标签：objective-c, xcode, svn, core-data, version-control

我使用 Xcode 存储库来处理 svn，今天我向我的核心数据模型添加了一个新版本并尝试提交它。但是 Xcode 通过一个错误：

```
svn: Commit failed (details follow):
svn: Entry for '/Users/user/Desktop/project/Core Data/Translator.xcdatamodeld/Translator 2.0.xcdatamodel/contents' is marked as 'copied' but is not itself scheduled
for addition.  Perhaps you're committing a target that is
inside an unversioned (or not-yet-versioned) directory? 
```

我认为问题在于 svn 将 xcdatamodel 视为 dolder，并且由于它已更改，因此不再受版本控制。但那我该怎么办？不要提交新模型并手动传输？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:29:31.187

我建议编写一个 subversion checkout/commit 挂钩，该挂钩将创建 Translator.xcdatamodeld 目录的 zip 或 tar 存档，然后将其签入。实际的 xcdatamodeld 目录将被忽略。（最好*不要*压缩存档，因为压缩只会使 svn 更难计算差异并使您的存储库更大。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T11:50:50.207

问题是当你从第一个数据模型开始时，Xcode 会创建一个文件，比如说：myProject.xcdatamodeld

假设您通过菜单*Editor > Add Model Version*创建了名为 _myProject_v2_ 的模型的第二个版本。Xcode 实际做的是：它创建一个文件夹，命名为您的原始模型，并将原始模型复制到一个子文件夹中，然后创建第二个子文件夹，其中包含一个包含新版本的文件：

```
myProject.xcdatamodeld
    |
    +- myProject.xcdatamodel
    |           |
    |           +- contents (a file containing the actual model)
    |
    +- myProject_v2.xcdatamodel
                |
                +- contents (a file containing the 2nd version of the model) 
```

所以 SVN 感到困惑，因为他认为是一个文件（原始 myProject.xcdatamodeld）并且存储在 SVN 中，现在是一个文件夹，带有子文件夹。而且，这些由 XCode 创建的子文件夹最终会获得它们隐藏的*.svn*文件夹。所以我的解决方案是：

1.  从 SVN 中删除文件夹*myProject.xcdatamodeld*
2.  做其余的提交
3.  关闭 Xcode 并重命名您的文件夹项目：eh: _projectFolder_old_
4.  对项目进行检查，希望不会有*myProject.xcdatamodeld*
5.  在 xcode 中，创建一个名为*myProject*的虚假数据模型。不要在模型中创建任何东西，它是无用的
6.  版本它，*编辑器>添加模型版本*
7.  关闭 XCode
8.  在 Finder 中打开*myProject.xcdatamodeld*中的旧数据模型（鼠标右键，*显示包内容*）
9.  在 Finder 中打开您的原始模型并将*内容*文件从 *projectFolder_old/myProject.xcdatamodeld/myProject.xcdatamodel* 复制到新项目：*projectFolder/myProject.xcdatamodeld/myProject.xcdatamodel* （您将需要执行几个*Show Package Contents*
10.  重复第二个版本，将*内容*文件从 *projectFolder_old/myProject.xcdatamodeld/myProject_v2.xcdatamodel* 复制到新项目：*projectFolder/myProject.xcdatamodeld/myProject_v2.xcdatamodel*
11.  重新打开 Xcode 并检查一切是否正确
12.  添加到 svn 文件，如果尚未添加，并执行提交

# c++ - 处理没有标记任何函数 const 的库的最佳方法是什么？

> ID：10706051
> 
> 赞同：7
> 
> 时间：2012-05-22T16:21:05.593
> 
> 标签：c++, constants

我正在尝试在我的项目中实现一个 C++ 库的使用，该库没有在其访问函数上使用 const 修饰符。到目前为止，我一直在我的所有代码中使用 const，但是这个新库导致了两个主要问题：

1.  如果这些参数是库定义的类型，则参数作为 const 引用传递的函数不能使用参数的访问函数。

2.  具有由库定义的类型的成员对象的类不能在 const 函数中使用这些对象的访问函数。

克服这个问题的最佳方法是什么？最简单的解决方案是简单地从我的代码中删除所有对 const 的使用，但这会非常令人沮丧。

**附加信息：**在这种情况下，我确实可以访问源代码，并且可以看到访问函数不会修改任何内容。我省略了这些信息，因为我也对更一般的情况感兴趣。对于我的情况，`const_cast`似乎是要走的路

PS图书馆作家不是邪恶的！他友好地开源了更多的粗略和现成的代码。正如其他人所指出的那样，我可以放弃图书馆并使用更专业的东西。但是，对于这个时间有限的小型项目，该库的接口简单性使其成为最佳选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:30:31.590

判断库中的函数是否实际修改任何内容有多容易？

如果很容易分辨，而他们没有，那么您可以`const_cast`将 const 指针/引用指向非 const 并调用库函数。您可能希望在库类周围放置一个包装器来为您执行此操作，这既乏味又冗长，但会从您的类中获取该代码。这个包装器可能是一个添加一些 const 访问器的子类，这取决于您使用库类的方式是否允许它工作。

If it's hard to tell, or they do modify things, then you need to use non-const instances and references to the library classes in your code. `mutable` can help with those of type (2), but for those of type (1) you just need to pass non-const arguments around.

For an example of why it might be hard, consider that the library author might have written something like this:

```
struct Foo {
    size_t times_accessed;
    int value;
    int get() {
        ++times_accessed;
        return value;
    }
}; 
```

Now, if you `const_cast` a `const` instance of `Foo` and call `get()`, you have undefined behavior[*]. So you *have* to be sure that `get` really doesn't modify the object it's called on. You could mitigate this a bit, by making sure that you never create any const instances of `Foo`, even though you do take const references to non-const instances. That way, when you `const_cast` and call `get` you at least don't cause UB. It might make your code confusing, that fields keep changing on objects that your functions claim not to modify.

[*] Why is it undefined behavior? It has to be, in order that the language can guarantee that the value of a `const` object never changes in a valid program. This guarantee allows the compiler to do useful things. For example it can put `static const` objects in read-only data sections, and it can optimize code using known values. It also means that a `const` integer object with a visible initializer is a compile-time constant, which the standard makes use of to let you use it as the size of an array, or a template argument. If it wasn't UB to modify a const object, then const objects wouldn't be constant, and these things wouldn't be possible:

```
#include <iostream>

struct Foo {
    int a;
    Foo(int a) : a(a) {}
};

void nobody_knows_what_this_does1(const int *p); // defined in another TU
void nobody_knows_what_this_does2(const int *p); // defined in another TU

int main() {
    const Foo f(1);
    Foo g(1);
    nobody_knows_what_this_does1(&f.a);
    nobody_knows_what_this_does2(&g.a);
    int x;
    if (std::cin >> x) {
        std::cout << (x / f.a); // Optimization opportunity!
        std::cout << (x / g.a); // Cannot optimize!
    }
} 
```

Because `f` is a const object, and hence `f.a` is a const object, the optimizer knows that `f.a` has value 1 when it's used at the end of the function. It could, if it chose, optimize away the division. It *doesn't* know the same thing about `g.a`: `g` is not a const object, a pointer to it has been passed into unknown code, so its value might have changed. So if you're the author of `nobody_knows_what_this_does1` or `nobody_knows_what_this_does2`, and you're thinking of `const_cast`ing `p` and using it to modify its referand, then you can only do it if you somehow know that the referand is non-const. Which normally you don't, so normally you don't use `const_cast`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T16:29:29.587

我认为您有以下选择：

1.  如果您确定库在使用说明符时可以正常工作，则可以在处理库时`const`使用来删除对象的 const-ness`const_cast<>`

    或者，您可以制作 const 对象的非常量副本并将其传递给库，然后更新对原始对象上非常量部分的更改

2.  搜索另一个 const 正确的库

3.  从您的代码中删除所有 const（不推荐）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T16:33:28.203

Another option is to copy your object into a modifiable temp and pitch it. This is probably the safest thing to do if you're in the circumstance where your class offers a copy constructor and it's not too expensive. This has been my preferred method when it's available, as I know it's 100% safe. Silly example:

```
int getInfoFromString(String& str); //what??  why isn't str const :( 
```

So I do

```
 String temp(str);
 int stuffINeed = getInfoFromString(temp);
 //happy 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T17:04:31.187

Another suggestion: Are you familiar with the `mutable` keyword? If you use it correctly, it might actually accomplish exactly what you're trying to do, with exactly one word added to your code. This keyword can evoke religious opinion at the level of `goto` because it's probably used as a kludge for every hundred times that it's used because it really is the best design option. In your case, it's debatable which it is but I think it fits the spirit: your annoying library object is something that can be fake-modified without breaking the semantic const-ness of *your* methods, so go ahead.

```
class Outer {
    mutable Inner inner;
    public void foo() const { 
        inner.nonConstMethod(); //compiles because inner is mutable
    }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T19:16:56.880

If the library's interface is not big, you can create a wrapper, where you would adjust your code to expected types, by either casting or making a copy of parameters, which are passed to library's functions.

But do not degrade your code in order to use the library.

# c# - 绑定的javascript函数

> ID：10706053
> 
> 赞同：2
> 
> 时间：2012-05-22T16:21:23.453
> 
> 标签：c#, javascript, asp.net

好吧，我的基本问题是如何在 javascript 中模拟按钮单击。

我知道我必须使用 document.getElementById("btnSubmit").click(); 但这似乎也没有调用 onClientClick javascript函数。

环境：

我正在使用带有 C# 和 javascript 的 ASP.NET。

发生了什么：我有一个输入文本区域，我想确保用户必须在启用提交按钮之前输入一个字符。我可以用 onkeypress="validateTxt();" 做到这一点 然后调用这个函数

```
 function validateTxt() {
    var input = document.getElementById("<%=txtUserName.ClientID %>").value;
    //Need a min of 3 characters
    if(input.length > 1)
    {
        document.getElementById("btnSubmit").disabled = false;
    }
    else
    {
        document.getElementById("btnSubmit").disabled = true;
    }
} 
```

唯一的问题是没有注册退格键。

为了解决这个问题，我在网上找到了这个

```
<script type="text/javascript">
       document.getElementsByName('txtUserName')[0].onkeydown = function (event) {
        if (event === undefined) event = window.event; // fix IE 
        if (event.keyCode === 8)
         validateTxt();
        if (event.keyCode === 13) {
            document.getElementById("btnSubmit").click();
        }
        }; 
```

现在，每当用户按下退格键时，都会调用我的 javascript 函数。这一直很好，直到我发现当我从文本区域按 Enter 时它不会调用我的 javascript 函数。

这是所有相关的代码...

```
 <script type="text/javascript">
function InformUser()
{
    window.document.getElementById("loadingMessageDIV").style.display = "block";
   <%=Page.GetPostBackEventReference(btnSubmit as Control)%>
    document.getElementById("btnSubmit").disabled = true;
}

function validateTxt() {
    var input = document.getElementById("<%=txtUserName.ClientID %>").value;
    //Need a min of 3 characters
    if(input.length > 1)
    {
        document.getElementById("btnSubmit").disabled = false;
    }
    else
    {
        document.getElementById("btnSubmit").disabled = true;
    }
}

</script> 
```

这里是文本区域 + javascript 边界功能

```
<asp:TextBox ID="txtUserName" runat="server" Font-Size="11pt" onkeypress="validateTxt();"></asp:TextBox>
            <script type="text/javascript">
                //We bind the textbox to this function and whenever the backspace key is pressed it will validateTxt
                document.getElementsByName('txtUserName')[0].onkeydown = function (event) {
                    if (event === undefined) event = window.event; // fix IE 
                    if (event.keyCode === 8)
                        validateTxt();
                    if (event.keyCode === 13) {
                        document.getElementById("btnSubmit").click();
                    }
                }; 
            </script> 
```

这是提交按钮

```
<asp:Button ID="btnSubmit" runat="server" OnClientClick="InformUser();" OnClick="btnSubmit_Click"
                            Text="Login" Font-Bold="True" Enabled="True" />
                        <script type="text/javascript">
//Disable the button until we have some actual input
                            document.getElementById("btnSubmit").disabled = true;
                        </script> 
```

因此，回顾一下它确实按下了按钮，但它也无法禁用它。我什至尝试在用户按下回车键然后按下按钮时直接调用 InformUser，但这也不起作用。

我知道这与我如何将 javascript 函数绑定到文本区域有关，因为当我将其取出时它可以工作。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:01:22.327

如果您真正想做的是根据文本区域中的文本量启用/禁用提交按钮，那么每次更改时检查长度是最简单的。

你能使用[jQuery](http://jquery.com/)吗？如果可以，这是一个微不足道的问题，因为 jQuery 将键盘事件标准化，因此您不必担心不同的浏览器会引发不同的事件。

作为一个简单的实验，我用这个 HTML创建了一个[jsFiddle ：](http://jsfiddle.net/EkRCU/)

```
<textarea id="txt"></textarea>
<label id="count" /> 
```

和这个JavaScript：

```
$('#txt').keyup(function () {
    $('#count').text($('#txt').val().length);
}); 
```

在每个[keyup](http://api.jquery.com/keyup/)上（我使用 keyup 而不是 keydown 或 keypress，因为 keyup 在修改文本后触发）长度都会更新。这注册了普通键、退格、删除、回车等，适用于 FF 和 IE8。

在您的情况下，您显然会更改功能以启用/禁用提交按钮。

# php - Zend 框架中的自定义单选元素视图

> ID：10706056
> 
> 赞同：0
> 
> 时间：2012-05-22T16:21:29.460
> 
> 标签：php, zend-framework, zend-form, zend-form-element

目前有一个自定义表单元素视图：

`class Apply_View_Helper_JQueryUiFormRadio extends Zend_View_Helper_FormElement`

我的表格如下

```
$form->addElement('radio', 'name', array(
 'label' => 'etc...", 
```

我将如何实例化这个替换`addElement`方法中的'radio'字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:09:08.970

每个扩展 Zend_Form_Element 的类都有公共属性“helper”，所以你可以这样做：

```
$element = new Zend_Form_Element_Radio('item');
$element->helper = 'jQueryUiFormRadio';
$this->addElement($element); 
```

在您的情况下，必须将 Apply_View_Helper_ 添加到 zend_view 帮助程序脚本路径。

# asp.net - 整整到一刻钟；aspx.vb

> ID：10706058
> 
> 赞同：1
> 
> 时间：2012-05-22T16:21:30.867
> 
> 标签：asp.net, jquery-mobile

在一个结合了 Jquery Mobile 和 ASP 4 的网站上工作。目前我被困在一个我试图做 SQL 插入的表单上。我正在尝试使用 VB 中的代码来处理我的插入...

所有这一切：我需要我的页面将分钟值转换为小时和刻钟格式，四舍五入到最接近的刻钟。

目前，我在文本框中输入了两次（例如上午 8:00:00 和上午 9:12:00）。如果我使用 TimeSpan，我可以计算两个值之间的差异并将该差异转储到一个变量中，例如 tElapsed = tSpan.TotalMinutes.ToString 将在上述时间设置 tElapsed = 72。我需要将其转换为 1.0 小时、1.25 小时、1.5 小时等格式，并在 3 分钟以上到下半小时……我一直卡住。

概要：

有：

```
Text Box: Time1 = 8:00:00 AM
Text Box: Time2 = 9:12:00 AM
Dim tDiff As String = DateTime.Parse.(Time2.Text) - DateTime.Parse(Time1.Text)
Dim tElapse As String = tDiff.TotalMinutes.ToString 
```

对于上述情况，tElapse 将返回 72，现在我需要将 72（分钟）转换为 1.25（小时）。

1.25 小时可以是任何一个：64 分钟 - 78 分钟

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:35:17.267

您可以使用 Math.DivRem

```
int remainder;
int whole = Math.DivRem(tDiff.TotalMinutes, 60, out remainder); 
```

在这一点上，剩余部分现在将是几个小时之间剩下的部分。0 到 59 分钟。我不清楚你想如何精确地四舍五入，但是 (double)remainder / 60.00 会给你小数位，然后你可以把它加到整体上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:53:37.333

这是我使用的解决方案，将其作为答案发布，以便显示代码结构：

```
 Dim tDiff As TimeSpan = DateTime.Parse(textboxEnd.Text) - DateTime.Parse(textboxStart.Text)
    Dim mins As Integer = tDiff.TotalMinutes.ToString
    Dim remainder As Integer
    Dim hrs As String = Math.DivRem(mins, 60, remainder)
    Dim qtyorder As String
    Select Case remainder
        Case 1 To 2
            qtyorder = hrs
        Case 3 To 18
            qtyorder = hrs & ".25"
        Case 19 To 28
            qtyorder = hrs & ".50"
        Case 29 To 48
            qtyorder = hrs & ".75"
        Case Else
            qtyorder = (hrs + 1) & ".00"
    End Select

    lblResult.Text = qtyorder 
```

# java - JUnit + DbUnit：在开发和测试环境之间切换数据库连接

> ID：10706061
> 
> 赞同：6
> 
> 时间：2012-05-22T16:21:52.567
> 
> 标签：java, testing, junit, development-environment, dbunit

我正在围绕现有项目建立一些测试脚手架。这包括一些使用 JUnit 和 DbUnit 的集成测试。我还为持续集成设置了 Jenkins 安装。

我的问题涉及更改开发和测试环境之间的数据库连接。我在本地安装了自己的产品堆栈，以进行快速的临时测试和调查。在开发过程中，我会针对我的私有数据库运行测试，因为它更快，而且我不会用有缺陷的工作中的代码破坏其他人的一天。

签入代码后，Jenkins 将运行我的测试。现在它仍然指向我的本地数据库。我宁愿让 Jenkins 针对不同的数据库运行测试，该数据库位于测试环境中。

是否有最佳实践/策略/技术/等来更改数据库连接以进行测试而无需更改代码？如果解决方案允许 Jenkins 对多个 DB 运行相同的测试（应该是可能的，因为 DbUnit 是不可知的），则奖励积分。

* * *

编辑以获取更多信息：

该产品很大，有几十个不同的交互组件（通常在单独的虚拟机/进程中）。在实时系统中，不同的进程通常**通过数据库**进行通信。IE，UI 进程将更改写入表，后端进程轮询该表以进行更改。是的，这很糟糕。对于集成测试，我使用 UI 配置系统并使用 DbUnit 捕获该状态。然后我可以针对那个“输入”运行测试。

我的组件和所有新组件都由 maven 管理。数据库连接当前在测试设置中是硬编码的。DbUnit 系统有效；我只是希望能够切换我的测试引用的数据库，具体取决于它们是由我在我的开发环境中运行，还是由 Jenkins 在测试环境中运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T19:07:35.137

假设您可以将测试的数据库连接参数外部化到一个`.properties`或`.xml`文件中，并且您正在使用 Maven，那么一种方法是使用 Maven 属性（以及可选的配置文件）来定义每个环境，并使用资源过滤来配置这些属性进入你的配置文件。

例如，假设在测试期间，您设法将数据库连接参数外部化到一个名为`datasource.properties`in的文件中`src/test/resources`，如下所示：

```
datasource.driverClassName = ${test.datasource.driverClassName}
datasource.url = ${test.datasource.url}
datasource.username = ${test.datasource.username}
datasource.password = ${test.datasource.password} 
```

你的 POM 中有这个：

```
<build>
  <testResources>
    <testResource>
      <directory>src/test/resources</directory>
      <filtering>true</filtering>
    </testResource>
  </testResources>
</build> 
```

然后你可以`test.datasource.driverClassName`用各种方式定义等属性来告诉 Maven 使用不同的数据库：

*   `<properties>`您可以在POM 部分定义默认值；
*   `<properties>`您可以在每个开发人员（和 Jenkins）的部分中定义用户特定的数据库`settings.xml`；
*   您可以在 POM 中为不同的环境（例如`development`、`jenkins`、`anotherDB`）定义一些配置文件，并使用不同的配置文件运行您的构建。

如果您选择最后一个选项，那么您可以通过从一个 Jenkins 项目执行多个 Maven 构建来让 Jenkins 针对多个数据库运行，仅在配置文件上有所不同。也就是说，最好为每个环境使用不同的 Jenkins 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:38:26.753

很大程度上取决于您的部署环境。如果您要部署到容器（tomcat、jboss 等），那么使用 JNDI 连接会将您与数据库环境隔离开来。如果您正在构建一个独立的 java 程序，那么您必须自己确定环境，并选择要使用的数据库连接配置文件。

一种方法是为每个环境单独配置数据库，并将其包含在您的部署中。这样您就不必担心您所处的环境而使您的代码复杂化。

另一种方法是将环境传递给您的程序并让您的代码确定要使用的配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T16:34:52.803

需要更多地了解您的构建工具。你在使用 Maven 吗？您的数据库连接信息存储在哪里？你用的是弹簧吗？

我目前这样做，我将 Maven 与我的主数据库连接的属性和一组单独的属性用于我的测试数据库连接。

由于我使用 Spring，在 maven 测试资源中，我有一个 applicationContext 文件，其中包含我的数据源 bean 并引用测试属性。

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-    method="close">
    <property name="driverClassName" value="${test.jdbc.driverClassName}"/>
    <property name="url" value="${test.jdbc.url}"/>
    <property name="username" value="${test.jdbc.username}"/>
    <property name="password" value="${test.jdbc.password}"/>
    <property name="maxActive" value="100"/>
    <property name="maxWait" value="1000"/>
    <property name="poolPreparedStatements" value="true"/>
    <property name="defaultAutoCommit" value="true"/>
</bean> 
```

# javascript - 如何检测页面何时退出全屏？

> ID：10706070
> 
> 赞同：66
> 
> 时间：2012-05-22T16:22:30.423
> 
> 标签：javascript, html, browser, fullscreen

我正在使用 Three.js 创建一个 3D 多人游戏，玩家可以在其中加入各种现有游戏。单击“播放”后，渲染器将附加到页面并全屏显示。这很好用，但问题是，当我退出全屏时，它仍然保持附加状态。我想删除它，但我不知道什么时候！

所以，基本上，我正在寻找一个显示“这个元素退出全屏”的事件。

这就是我将渲染器附加到页面的方式：

```
container = document.getElementById('container');
document.body.appendChild(container);

var renderer = new THREE.WebGLRenderer({antialias: true});
renderer.setSize( WIDTH, HEIGHT);
container.appendChild( renderer.domElement ); 
```

如果我如何全屏显示它：

```
THREEx.FullScreen.request(container); 
renderer.setSize(screen.width, screen.height); 
```

另外，当有人将鼠标指向页面顶部时，有没有办法阻止那个烦人的标题出现？而且，我想我可以用`preventDefault`?

**编辑：**

"fullscreenchange" 事件确实被触发了，但是在不同的浏览器下它有不同的名字。例如，在 Chrome 上它被称为“webkitfullscreenchange”，而在 Firefox 上它是“mozfullscreenchange”。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2014-09-16T19:03:12.240

我是这样做的：

```
if (document.addEventListener)
{
 document.addEventListener('fullscreenchange', exitHandler, false);
 document.addEventListener('mozfullscreenchange', exitHandler, false);
 document.addEventListener('MSFullscreenChange', exitHandler, false);
 document.addEventListener('webkitfullscreenchange', exitHandler, false);
}

function exitHandler()
{
 if (!document.webkitIsFullScreen && !document.mozFullScreen && !document.msFullscreenElement)
 {
  // Run code on exit
 }
} 
```

支持 Opera, Safari, Chrome with `webkit`, Firefox/Gecko with `moz`, IE 11 with ,一旦在所有浏览器中成功实现`MSFullScreenChange`后将支持实际规范。`fullscreenchange`显然，全屏 API 仅在现代浏览器中受支持，因此我没有`attachEvent`为旧版本的 IE 提供回退。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-05-22T17:34:24.247

全屏规范指定`"fullscreenchange"`在页面的全屏状态发生变化时（包括进入和退出全屏）在文档上触发（带有适当前缀）事件。在该事件中，您可以检查`document.fullScreenElement`页面是否全屏。如果它是全屏的，则该属性将是非空的。

[查看 MDN](https://developer.mozilla.org/en/DOM/Using_full-screen_mode)了解更多详情。

至于你的其他问题：不，没有办法阻止`Esc`退出全屏。这是为了确保用户始终可以控制他们的浏览器正在做什么而做出的妥协。浏览器*永远不会*为您提供阻止用户退出全屏的方法。时期。

至于 Firefox 的渲染速度比 Chrome 慢，我可以向您保证，对于大多数实际目的而言，它不是。如果您发现两个浏览器之间的性能差异很大，这可能意味着您的 javascript 代码是瓶颈，而不是 GPU。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-04-22T13:54:30.637

浏览器的 API 已更改。

例如：`document.webkitIsFullScreen`Chrome 中没有。这对我有用：

```
document.addEventListener('fullscreenchange', onFullScreenChange, false);
document.addEventListener('webkitfullscreenchange', onFullScreenChange, false);
document.addEventListener('mozfullscreenchange', onFullScreenChange, false);

function onFullScreenChange() {
  var fullscreenElement =
    document.fullscreenElement ||
    document.mozFullScreenElement ||
    document.webkitFullscreenElement;

  // if in fullscreen mode fullscreenElement won't be null
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-04-27T23:08:26.277

我正在使用[John Dyer 的代码](http://johndyer.name/lab/fullscreenapi/)，与 Toni 和 Yannbane 的评论集成来创建一个中央处理程序，并添加多个侦听器来调用它：

```
 var changeHandler = function(){                                           
      //NB the following line requrires the libary from John Dyer                         
      var fs = window.fullScreenApi.isFullScreen();
      console.log("f" + (fs ? 'yes' : 'no' ));                               
      if (fs) {                                                              
        alert("In fullscreen, I should do something here");                  
      }                                                                      
      else {                                                                 
        alert("NOT In fullscreen, I should do something here");              
      }                                                                      
   }                                                                         
   document.addEventListener("fullscreenchange", changeHandler, false);      
   document.addEventListener("webkitfullscreenchange", changeHandler, false);
   document.addEventListener("mozfullscreenchange", changeHandler, false); 
```

这仅在 Moz 12 中进行了测试。

请放心 展开

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-05-01T09:45:28.547

我稍微更改了 Alex W 的代码，使事件仅在全屏**退出**时触发。在 Firefox 53.0、Chrome 48.0 和 Chromium 53.0 中测试：

```
if (document.addEventListener)
{
 document.addEventListener('fullscreenchange', exitHandler, false);
 document.addEventListener('mozfullscreenchange', exitHandler, false);
 document.addEventListener('MSFullscreenChange', exitHandler, false);
 document.addEventListener('webkitfullscreenchange', exitHandler, false);
}

function exitHandler()
{
 if (document.webkitIsFullScreen === false)
 {
  ///fire your event
 }
 else if (document.mozFullScreen === false)
 {
  ///fire your event
 }
 else if (document.msFullscreenElement === false)
 {
  ///fire your event
 }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-06T20:41:33.040

Mozilla 的[MDN 页面](https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API)提示我使用与`fscreen`供应商无关的方法来处理全屏 API。遗憾的是，即使在这个日期（2018-02-06），这些 API 也没有完全标准化；默认情况下，Firefox 没有启用无前缀 API。

无论如何，这里是 URL `fscreen`：[https](https://github.com/rafrex/fscreen) ://github.com/rafrex/fscreen （它可以作为一个`npm`包在基于 Node.js 的构建管道中使用。）

目前，这对我来说似乎是一种优越的方法，直到无前缀的 API 登陆并在所有主要浏览器中都可用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-12T02:54:23.293

除 safari 外，所有浏览器都为我工作

这就是我最终用来解决问题的方法。

```
if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1)  { 

  document.addEventListener('webkitfullscreenchange', exitHandler);

  function exitHandler() {
    if (!document.fullscreenElement && !document.webkitIsFullScreen && !document.mozFullScreen && !document.msFullscreenElement) {
           /*CODE HERE*/      
        }
      }
    } 
```

看看[代码笔。](https://codepen.io/Digggid/pen/MZzoYy) 我必须非常感谢 Chris Ferdinandi 在[这里的帖子](https://gomakethings.com/how-to-play-a-video-in-full-screen-mode-when-its-thumbnail-is-clicked-with-vanilla-js/)

# sql - 内部记录优于外部记录

> ID：10706073
> 
> 赞同：0
> 
> 时间：2012-05-22T16:22:39.103
> 
> 标签：sql, duplicates

我被这个问题困住了。我的查询中有重复项，因为某些记录同时在内部和外部。我更喜欢在内部而不是外部，但是当内部没有入口时，一些外部更可取。

从产品中选择 ID、日期、位置

```
id date        location
----------
2  01/01/2012  in-house
2  05/01/2012  outside <- in this situation i want to keep just in-house

id date        location
----------
4  01/01/2012  in-house
5  03/01/2012  outside <- in this situation i want to keep both since there is no db entry for id=5 therefor i have just info from outside 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:30:26.883

一种方法是执行从表到自身的完全外部联接，然后使用合并。

```
 Select 
    COALESCE(Inside.Id, outside.id) Id,
    COALESCE(Inside.date, outside.date) Date,
    COALESCE(Inside.location, outside.location) Location
From 
    prod Inside
    FULL OUTER JOIN prod Outside
    ON Inside.id = Outside.iD
    and Inside.location <> Outside.Location
Where
    (Inside.Location = 'in-house'
    or 
    Inside.Location is null)
    and 
    (outside.Location = 'outside'
     or
     outside.Location is null) 
```

[演示](http://sqlfiddle.com/#!3/c743d/11)

笔记：

如果您的字段可以为空，您可能希望使用 Case 语句而不是 coalesce 并使用 ID 字段来确定要使用的表。以日期为例

```
CASE WHEN Inside.Id is not null THEN Inside.date ELSE outside.date END date 
```

正如 Dems 所指出的，这也假设这`{id, location}`是独一无二的。

**更新**

由于您使用的是 SQL Server 并且 {ID, Location} 不是唯一的，并且您想要最大日期值并且始终选择内部而不是外部，因此您可以`ROW_NUMBER/WHERE RowNumber = 1`在这里有效地使用，首先在位置订购，然后按日期订购。

```
WITH cte 
     AS (SELECT Row_number() OVER ( partition BY ID 
               ORDER BY CASE LOCATION WHEN  'in-house' THEN 0  
                                      WHEN  'outside' THEN 1 END, 
                        DATE DESC) rn, 
                ID, 
                Date, 
                Location 
         FROM   prod) 
SELECT ID, 
       Date, 
       Location 
FROM   cte 
WHERE  rn = 1 
```

[演示](http://sqlfiddle.com/#!3/c743d/16)

注意我们不必使用 case 语句，但我希望映射是明确的。

# c# - 背景图片未保存

> ID：10706078
> 
> 赞同：0
> 
> 时间：2012-05-22T16:22:48.770
> 
> 标签：c#, windows-phone-7

在我的 windows phone 7 应用程序中，我使用了默认应用程序背景。我还向用户使用了照片选择器任务来保留他们自己的自定义皮肤。它工作得很好，但是当用户退出应用程序并再次重新启动应用程序时，应用程序仍然具有默认背景。但我需要应用程序记住用户设置的最后一个背景，并且在用户更改背景之前不应更改。我研究了很多地方，但我找不到合适的答案。有人可以帮我吗？提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:29:45.117

听起来你想使用独立存储设置。它基本上是您的应用可以轻松访问的存储空间。只需找到一种方法来存储确定背景所需的信息。

这是我最喜欢的关于这个主题的方法：http: [//www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/](http://www.jeffblankenburg.com/2010/10/15/31-days-of-windows-phone-day-15-isolated-storage/)

编辑：对不起，我放错了链接！它导致了一些很棒的示例代码。

# wordpress - WordPress RSS 提要返回 404

> ID：10706087
> 
> 赞同：2
> 
> 时间：2012-05-22T16:23:19.557
> 
> 标签：wordpress, rss, http-status-code-404

我们通过 wordpress 有一个 RSS 提要（或者我们应该有），但它只是使用加载时未找到的 404 页面提供 - [http://www.warrenaccess.co.uk/feed/rss2](http://www.warrenaccess.co.uk/feed/rss2)

我们已尝试更改回默认主题并停用所有插件以查看是否可以找到问题，但仍然无法正常工作。

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:14:26.273

我的预感是您实际上没有任何博客文章，但是您将 WP 用作伪 CMS。通过查看提要和网络状况（CDN/云托管有时会忽略提要内容），一切正常。

您的 404 确实提供了有关提要的一些有用信息：

`<lastBuildDate>Fri, 11 May 2012 10:14:42 +0000</lastBuildDate>`

这是前一段时间，相对而言。我猜您的网站内容都是基于页面的，这些页面实际上不会也不应该出现在 RSS 提要中。

要解决此问题，您必须发表一些博客文章或尝试使用此插件或其变体：

[http://wordpress.org/extend/plugins/rss-includes-pages/](http://wordpress.org/extend/plugins/rss-includes-pages/)

**编辑**：原来 WP 联合设置被设置为显示 -1 个帖子。通过将其设置为 > 0 来修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T08:32:52.440

我正在为我的主要网站内容使用自定义帖子类型，因此要包含更多帖子类型，请在您的函数文件中使用它：

```
function customfeed_request( $request ) {
    if ( isset($request['feed']) && !isset($request['post_type']) ) {
        $request['post_type'] = array('post', 'my_custom_post_type');
    }
    return $request;
}
add_filter('request', 'customfeed_request'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-18T21:44:35.850

我花了很多时间来解决这个问题；我希望这可以帮助别人。

场景：当 Permalinks 关闭时，我可以访问 RSS Feed url "/?feed=rss2" 而不会出错，但是启用上面的 Permalinks 会返回 feed 内容，然后是 404 错误代码。在网络浏览器检查工具下可以看到错误代码响应，例如 Chrome 的“Web Developer”插件。

嗯，feed客户端不理解这个错误码，抛出异常，破坏消费页面。

我将问题追溯到 WP Super Cache。我认为缓存不会生成提要响应内容，但它会尝试获取缓存文件并且它不存在，导致错误 404。

简单的解决方案，在“WP超级缓存设置”的“高级”主题中禁用提要缓存，检查“提要（is_feed）”选项并保存。

也许您的问题出在 WP Super Cache 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:13:15.070

你有没有检查过你的 .htaccess
把它重命名为一些乱七八糟的东西来关闭它

如果这没有帮助，请检查您的 wp-config.php

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-24T03:02:20.857

如果产品 URL 返回 404 即**www .abc .com/product /name/feed/**我们应该怎么做 其余一切在网络上都很好，但只有产品提要 URL 是 404。它还会导致任何性能问题并排名我网站挂了？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-23T05:49:50.210

我刚刚遇到了类似的问题，但原因可能会有所不同。我制作了一个自定义的 RSS 提要。我收到页面 404 错误。

原因是我没有进行刷新重写（[https://codex.wordpress.org/Function_Reference/flush_rewrite_rules](https://codex.wordpress.org/Function_Reference/flush_rewrite_rules)）。可以通过转到设置>永久链接然后更新它来做到这一点。然后饲料可用。

无论如何都是我的解决方案。

# javascript - 如何使用按钮单击关闭模式窗口

> ID：10706100
> 
> 赞同：0
> 
> 时间：2012-05-22T16:24:01.023
> 
> 标签：javascript, jquery, html

我有一个模态窗口，但我想设置一个关闭功能，以便当用户单击“按钮”时，它将关闭模态窗口。有谁知道如何做到这一点？

我有一个应用程序的链接，所以你可以[在这里查看](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable2.php)

下面是 javascript 代码，其中显示了打开模式窗口的功能和我想要放置代码以关闭模式窗口的设置功能：

```
function plusbutton() {
    $(".previouslink").modal(); 
    return false;
}
function closewindow() {    
    return false;
} 
```

下面是用户单击加号按钮并显示“previouslink”div 标签内的内容的表单代码：

```
<form id="QandA" action="imageupload.php" method="post">
    <h1>CREATING QUESTIONS AND ANSWERS</h1>
    <table id="plus" align="center">
        <tr>
            <th><a onclick="return plusbutton();">
<image src="Images/plussign.jpg" width="30" height="30" alt="Look Up Previous Question" class="plusimage"/>
            </a><span id="plussignmsg">(Click Plus Sign to look <br />
            up Previous Questions)</span> </th>
        </tr>
    </table>
    <div class="previouslink">
        <h1>PREVIOUS QUESTIONS</h1>
        <button type="button" id="close" onclick="return closewindow();">Close
        </button></div>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:29:25.997

您的 Live-Example 向我展示了您似乎正在使用[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)

从文档中：

> **关闭对话框**
> 
> SimpleModal 将自动将关闭函数（使用 onclick 事件）绑定到具有`simplemodal-close`类的对话框内的任何元素。此外，您可以通过调用以编程方式关闭当前打开的对话框 `$.modal.close();`

意味着：在您的`closeWindow()`-Function 中，您可以简单地输入以下行：

```
$.modal.close(); 
```

并完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:30:46.480

我已经在几个网站上使用了这个[jQuery 显示模式插件，它对我来说非常有用。](http://www.zurb.com/playground/reveal-modal-plugin)

或者，您应该查看[jQuery Impromptu](http://trentrichardson.com/Impromptu/)。我自己喜欢游览功能，但模态更有可能是您想要完成的。

这两个示例中的代码可能会引导您找到您正在寻找的内容:)

# wordpress - 调用向 mySQL 添加内容的函数

> ID：10706105
> 
> 赞同：0
> 
> 时间：2012-05-22T16:24:14.670
> 
> 标签：wordpress, buddypress

我正在尝试从 csv 文件在 BuddyPress（一个 wordpress 插件）中创建一些组。我几乎成功地做到了这一点，但还有一小部分。

这是我正在使用的代码：

```
 <?php

include "../../../wp-load.php";

$groups = array();

if (($handle = fopen("testcsv.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $group = array( 
                'name'        => $data[0],
                'creator_id'  => 1, 
                'description' => $data[1], 
                'slug' => groups_check_slug(sanitize_title(esc_attr($data[2]))), 
                'date_created' => gmdate( "Y-m-d H:i:s" ), 
                'status' => 'public' 

 );
        $groups[] = $group;

    }   
    fclose($handle);
}

foreach ($groups as $group) {
    printf("%s<br>\n", $group);
    groups_create_group($group);
} 

?> 
```

数据库中的一切似乎都很好，但与手动添加组不同，wp_bp_groupmeta 没有更新为 total_member_count 1。我在 wp_groups_functions.php 中找到了更新它的函数。

```
// Modify group member count    groups_update_groupmeta( $group_id, 'total_member_count', (int) groups_get_groupmeta( $group_id, 'total_member_count') - 1 ); 
```

我的问题是，如何在所描述的代码中将此函数运行到相关组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:18:16.030

您的呼叫从组计数中减去。你需要group_id。

试试这个：

```
foreach ($groups as $group) {
    printf("%s<br>\n", $group);
    groups_create_group($group);    
    $group_id = $wpdb->insert_id;
    groups_update_groupmeta( $group_id, 'total_member_count', (int) 1 );
} 
```

# ios - 检查xcode中c代码的内存泄漏

> ID：10706108
> 
> 赞同：1
> 
> 时间：2012-05-22T16:24:25.370
> 
> 标签：ios, xcode, memory-leaks

我正在编写一个包含部分 C、C++ 代码的 iPhone 应用程序。我使用 malloc() 和 calloc() 分配内存。

如何使用 Xcode 配置文件检查这部分代码中的内存泄漏。

任何人都可以请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:34:12.810

您可以使用`Leaks`and`Static memory analyser`来检测 Xcode 代码中的泄漏/静态内存漏洞。

泄漏 - [http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)

静态内存分析器 - [http://developer.apple.com/library/mac/#featuredarticles/StaticAnalysis/index.html](http://developer.apple.com/library/mac/#featuredarticles/StaticAnalysis/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:31:36.173

请确保使用 free() 方法释放分配的内存。

使用“malloc 和 calloc”分配内存后，对于释放分配的内存很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:33:11.987

您可以使用[Instruments](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)使用*Leaks*配置文件查找泄漏。

这是 Ray Wenderlich 的[教程](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)。

# asp.net-mvc-3 - 即使缓存了动作，也运行动作过滤器

> ID：10706116
> 
> 赞同：2
> 
> 时间：2012-05-22T16:25:04.603
> 
> 标签：asp.net-mvc-3, caching

我有一个注册为全局的动作过滤器

```
GlobalFilters.Filters.Add( new SaveAdSourceFilter() ); 
```

过滤器只是将一些Referer信息保存到Cookies中以供以后使用。现在我通过 OutputCache 属性启用缓存机制，并且过滤器停止被调用。

有没有办法绕过我的过滤器的缓存？我知道一些其他的解决方案，比如实现 IHttpModule 但 ActionFilter 更简单一些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:01:31.147

您可以使用 OutputCache 的自定义实现，例如 Donut 输出缓存。

您可以在此处阅读更多内容：[使用输出缓存和其他操作过滤器](https://stackoverflow.com/questions/10990337/working-with-the-output-cache-and-other-action-filters)

# silverlight - Silverlight 5 - PivotViewer 详细信息窗格在触摸屏上消失

> ID：10706121
> 
> 赞同：0
> 
> 时间：2012-05-22T16:25:10.203
> 
> 标签：silverlight, pivotviewer

我们已经在 HP 触摸屏 PC 上安装了 PivotViewer 的一个相当基本的实现。一切都按预期工作 - 在左侧窗格中，您可以选择选项、清除选项等。

问题是当您选择一张卡片时，右侧窗格会按预期显示，但如果您从该右侧窗格中选择一个项目（尽管此操作有效并且屏幕会动画显示新结果），那么下次您选择一个项目右侧窗格为空白。

即使您在触摸屏上使用鼠标，也会出现这种情况。

请问有人有什么想法吗？

同样的实现在其他所有 PC 上都可以正常工作——只是在要部署它的触摸屏上不行！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:30:58.743

尽管我下载的其他示例在触摸屏上给出了相同的行为，但我发现显示自定义详细信息窗格的示例可以解决问题。

我从这里下载了示例：

[http://tonychampion.net/blog/index.php/2011/10/sl5-pivotviewer-custom-detailpanestyle/](http://tonychampion.net/blog/index.php/2011/10/sl5-pivotviewer-custom-detailpanestyle/)

无论如何，它在触摸屏上的效果要好得多，因为我在自定义窗格上制作了大按钮，而不是之前的超链接。

# silverlight - Silverlight 4 不可移动或不可移动的离屏子窗口

> ID：10706123
> 
> 赞同：0
> 
> 时间：2012-05-22T16:25:16.443
> 
> 标签：silverlight, silverlight-4.0

我读过文章说 SL3 中的子窗口不能设置为不可移动，而无需创建自己的自定义窗口。这是在 SL4 中修复的吗？这是一个问题，因为用户可以将窗口拖出 silverlight 舞台，这看起来像是一种尴尬的 UI 设计。在我第一次尝试时，我将其移出屏幕，无法将其移回或关闭。我不明白省略使窗口不可移动的选项背后的逻辑。

有没有其他方法可以防止用户将子窗口拖出屏幕？或者是创建我自己的自定义窗口的唯一方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:50:57.800

我创建了自己的自定义样式，它摆脱了标题中的关闭按钮并停止移动。在您的控制集中：`<controls:ChildWindow ... Style="{StaticResource themeChildWindowStyle}"`

您可以使用 Blend 轻松创建样式。

[这是关于这个主题的讨论，](http://forums.silverlight.net/p/154478/345466.aspx)它有来自“friendy1108”的另一个解决方案〜“我现在的解决方案是隐藏标题栏并制作一个关闭子窗口的按钮。从您发送的链接中，我可以这样做：title.Visibility = 可见性。折叠；" 这样做可以，但我更喜欢样式覆盖。

# android - Android：为内部记录使用自定义封面

> ID：10706132
> 
> 赞同：1
> 
> 时间：2012-05-22T16:25:49.807
> 
> 标签：android

我的应用程序录制了一些声音并使用标准播放器进行播放。我想知道如何将自定义封面艺术添加到音频文件并通过意图显示它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T16:34:55.253

似乎有两种方法可以将专辑封面添加到 MP3。最简单的方法是将图像放在与音频文件相同的目录中，大多数媒体播放器会认为它是封面艺术。有人建议将此文件称为“AlbumArt.jpg”。

另一种方法是将艺术嵌入 MP3 本身。我自己不知道如何做到这一点，但您可能会发现[这篇](http://www.richardfarrar.com/embedding-album-art-in-mp3-files/)文章很有用。

# java - 使用 Java 读写 PNG 会增加文件大小

> ID：10706133
> 
> 赞同：5
> 
> 时间：2012-05-22T16:25:52.373
> 
> 标签：java, image-processing

读取和写入 png 文件时出现问题。我使用 ImageIO 将其读取到一个字节数组，然后使用 ImageIO 再次写入该字节数组。但文件大小显着增加。这怎么可能发生？

```
public BufferedImage toBufferedImage(InputStream inputstream) {
    try {
        return ImageIO.read(inputstream);
    } catch (Exception e) {
        throw new IllegalStateException("Can't convert to buffered image", e);
    }
}

public byte[] toByteArray(BufferedImage bufferedImage, String filetype) {
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    try {
        ImageIO.write(bufferedImage, filetype, output);
        return output.toByteArray();
    } catch (Exception e) {
        throw new IllegalStateException(e);
    }
} 
```

**跟进**：是否有任何库支持用 Java 编写且不需要任何本机代码的压缩 PNG？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:30:33.913

这很可能是因为 Java 和创建原始 PNG 的压缩算法不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:33:08.200

[文档](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28java.io.File%29)说它正在解码输入文件，因此它没有作为 PNG 保存在内存中：

> 返回一个 BufferedImage 作为使用从当前注册的那些中自动选择的 ImageReader 解码提供的文件的结果。该文件被包装在一个 ImageInputStream 中。如果没有注册的 ImageReader 声称能够读取结果流，则返回 null。

当它写回它时，它必须重新编码 PNG 文件，而 Java 的 PNG 编码似乎不如创建原始文件的效率高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T16:52:09.210

随 JDK 提供的 PNG 编写器不支持压缩。您可以通过以下方式快速检查：

```
w = ImageIO.getImageWritersByFormatName("png").next();
p = w.getDefaultWriteParam();
print("Can compress? "+p.canWriteCompressed());
// Can compress? false 
```

imageio-ext 或 jai-imageio 可能包含具有压缩支持的 png 编写器：http: [//java.net/projects/imageio/](http://java.net/projects/imageio/)

# c# - 错误转换数据类型

> ID：10706141
> 
> 赞同：0
> 
> 时间：2012-05-22T16:26:27.060
> 
> 标签：c#, asp.net, vb.net

我从 url 获取 id 并将其传递给 sqldatasource - selectcommand 我收到以下错误：

```
Conversion failed when converting the varchar value '<%=MyIdVal%>'
 to data type int. 
```

后面的代码：

```
Public Partial Class Edit
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles    Me.Load
    MyIdVal = Request.QueryString("id")
End Sub

Private _myIdVal As Integer

Public Property MyIdVal() As Integer
    Get
        Return _myIdVal
    End Get
    Set(ByVal value As Integer)
        _myIdVal = value
    End Set
End Property 
```

结束类

客户 ：

```
 < head runat="server">
<title></title>
  </head>
  <body>
<form id="form1" runat="server">
<div>
<%=MyIdVal%>
</div>
<asp:GridView ID="GridView1" runat="server" DataSourceID="myIdDataSource">
</asp:GridView>
<asp:SqlDataSource runat="server" ID="myIdDataSource" 
    ConnectionString="<%$  ConnectionStrings:myCipConnection  %>" 
    ProviderName="<%$ ConnectionStrings:myCipConnection.ProviderName %>"
    SelectCommand="SELECT * FROM books WHERE id = '<%=MyIdVal%>'" >  

    </asp:SqlDataSource>

</form>
  </body>
  </html> 
```

当我对其进行硬编码时，代码运行良好，知道如何解决此错误，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:32:58.617

您不能`<%= %>`在 select 命令中使用语法。您必须在查询中使用参数，并将参数添加到数据源的 SelectParameters 集合中，例如：

```
<asp:SqlDataSource runat="server" ID="myIdDataSource" 
  ConnectionString="<%$  ConnectionStrings:myCipConnection  %>" 
  ProviderName="<%$ ConnectionStrings:myCipConnection.ProviderName %>"
  SelectCommand="SELECT * FROM books WHERE id = @id">
     <SelectParameters>
         <asp:QueryStringParameter Name="id" Type="Int32" DefaultValue="1" />
     </SelectParameter>
</asp:SqlDataSource> 
```

# asp.net-mvc - ASP.NET 通过 Razor 显示相关的详细记录

> ID：10706142
> 
> 赞同：0
> 
> 时间：2012-05-22T16:26:27.947
> 
> 标签：asp.net-mvc, razor

我是 asp.net 和 c# 的新手，我一直在尝试使用 MVC3 在 php 中复制和应用程序，从同一个数据库生成代码。我有一个关于在“详细信息”视图中显示详细记录的问题。

```
namespace MvcApplication5.Models
{
[DataContract(IsReference = true)]
[KnownType(typeof(masterDomain))]
[KnownType(typeof(masterFIP))]
[KnownType(typeof(masterSFPF))]
[KnownType(typeof(rgCountiesServed))]
[KnownType(typeof(rgKeyword))]
[KnownType(typeof(rgServicesProvided))]
public partial class rgOrganization
{
    public rgOrganization()
    {
        this.rgCountiesServeds = new HashSet<rgCountiesServed>();
        this.rgKeywords = new HashSet<rgKeyword>();
        this.rgServicesProvideds = new HashSet<rgServicesProvided>();
    }

    [DataMember]
    public int orgID { get; set; }
    [DataMember]
    public string ORGANIZATION { get; set; }
    [DataMember]
    public string CONTACT_PERSON { get; set; }
    [DataMember]
    public string PHONE_NUMBER { get; set; }
    [DataMember]
    public string FAX_NUMBER { get; set; }
    [DataMember]
    public string EMAIL_ADDRESS { get; set; }
    [DataMember]
    public string WEBSITE { get; set; }
    [DataMember]
    public string STREET_1 { get; set; }
    [DataMember]
    public string STREET_2 { get; set; }
    [DataMember]
    public string CITY { get; set; }
    [DataMember]
    public string ZIP_CODE { get; set; }
    [DataMember]
    public string COUNTY { get; set; }
    [DataMember]
    public string FIPS { get; set; }
    [DataMember]
    public string MAILING_ADDRESS { get; set; }
    [DataMember]
    public Nullable<int> SFPF { get; set; }
    [DataMember]
    public Nullable<int> DOMAIN { get; set; }

    [DataMember]
    public virtual masterDomain masterDomain { get; set; }
    [DataMember]
    public virtual masterFIP masterFIP { get; set; }
    [DataMember]
    public virtual masterSFPF masterSFPF { get; set; }
    [DataMember]
    public virtual ICollection<rgCountiesServed> rgCountiesServeds { get; set; }
    [DataMember]
    public virtual ICollection<rgKeyword> rgKeywords { get; set; }
    [DataMember]
    public virtual ICollection<rgServicesProvided> rgServicesProvideds { get; set; }
} 
```

查看代码

```
@model MvcApplication5.Models.rgOrganization

@{
  ViewBag.Title =  @Html.DisplayFor(model => model.ORGANIZATION);
}
@section Scripts { 
<script type="text/javascript" 
src="http://maps.google.com/maps/api/js?sensor=false"></script> 
}
<h2>@Html.DisplayFor(model => model.ORGANIZATION)</h2>
<h3><span id="mailing_address">
    @Html.DisplayFor(model => model.MAILING_ADDRESS)
</span></h3>
<fieldset>
    <legend> @Html.DisplayFor(model => model.COUNTY)  COUNTY</legend>

    <div class="display-field">
        <strong>@Html.DisplayFor(model => model.ORGANIZATION)</strong>
    </div>

    <div class="display-field">
        @Html.DisplayFor(model => model.CONTACT_PERSON)
    </div>
    <!-- would like to display services provided here -->
</fieldset> 
```

我的问题是如何通过 Razor 访问“rgCountiesServeds”和“rgServicesProvideds”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:53:01.267

他们似乎是您的模型的成员。

所以你可以访问集合

```
model.rgServicesProvided 
```

要遍历集合，请执行以下操作：

```
@foreach (var serv in model.ServicesProvided) {
  Service is @serv.ToString()<br/>
} 
```

将 serv.ToString() 替换为您要显示的任何属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:57:45.413

如果我理解您的要求，您可以像访问 rgOrganization 的其他属性一样访问 rgCountiedServeds 和 rgServicesProvideds。它们是模型的集合和属性，因此您可以在视图中循环它们或为每个属性创建一个下拉列表。IE，

```
@Html.DropDownList("DropDownCounties", Model.rgCountiesServeds) 
```

# tomcat - 使用 Tomcat Client Deployer 有哪些优势？

> ID：10706144
> 
> 赞同：1
> 
> 时间：2012-05-22T16:26:41.097
> 
> 标签：tomcat, deployment

我想知道使用 Tomcat Client Deployer 有什么好处？它与不使用它来部署应用程序有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:55:00.287

由于您只想重新加载您的 web 应用程序而不弹跳 Tomcat（请参阅上面的评论），那么您应该查看 Tomcat 管理器：http: [//tomcat.apache.org/tomcat-7.0-doc/manager-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html)

那应该能够完全按照您的意愿行事。

# matlab - `tf()` 有逆吗？

> ID：10706146
> 
> 赞同：1
> 
> 时间：2012-05-22T16:26:53.670
> 
> 标签：matlab, inverse, transfer-function

我有连续时间传递函数的分子和分母。我想分别获得等效离散时间传递函数的分子和分母。

我的代码如下：

```
SAMPLING_PERIOD = 0.01;
% Hc(s) = Bc(s)/Ac(s) = 25 / (s^2 + 3s + 25);
Bc = [25];
Ac = [1, 3, 25];
Hc = tf(Bc, Ac);
Hd = c2d(Hc, SAMPLING_PERIOD);
[Bd, Ad] = inverse_tf(Hd);  % I need a function like this
% My aim is to obtain Ad and Bd; where,
%    Bd: Numerator of the corresponding discrete time system
%    Ad: Denominator of the corresponding discrete time system 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:30:13.927

您可以使用[`tfdata`](http://www.mathworks.com/help/toolbox/control/ref/tfdata.html)获取分子和分母系数，如下所示：

```
[Bd, Ad] = tfdata(Hd); 
```

注意返回值`Bd`和的顺序`Ad`。

# javascript - 使用 DOM 动态生成按钮并编辑 onclick 事件

> ID：10706150
> 
> 赞同：0
> 
> 时间：2012-05-22T16:27:20.803
> 
> 标签：javascript, html, dom, input, appendchild

我试图生成一个输入（type="button"）并将 onclick-Event 设置为一个函数，该函数应该交出一个参数。整个对象应该附加到一个 div 上，就是这样。基本上[这](http://jsfiddle.net/vogti/yzeVm/)是我的尝试，但我不明白为什么它不起作用。

我将代码粘贴到 jsfiddle，因此更容易重现。点击[这里](http://jsfiddle.net/vogti/yzeVm/)。

我在做什么错？我正在通过反复试验来学习它，所以请解释什么是错的。非常感谢！

[编辑] 对于 jsfiddle 有一天会失败的情况，这是我尝试运行的代码... :)

```
<!doctype html>
<html>
<head>
<title>onclick event example</title>
<script type="text/javascript" language="javascript">
var i = 0;
var h = new Array();

function addButton() {
    i++;
    var container = document.getElementById("check0");

    var h[i] = document.createElement("input");
    h[i].type = 'button';
    h[i].name = 'number' + i;
    h[i].value = "number" + i;
    h[i].id = 'number' + i;

    h[i].onclick = function() {
        showAlert(i)
    };

    container.appendChild(h[i]);
}

function showAlert(number) {
    alert("You clicked Button " + number);
}​
</script>
</head>
<body>
<div id="check0">
        <input type="button" value="klick mich" id="number0" onclick="addButton()"/>
</div>​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T16:30:38.260

[这](http://jsfiddle.net/yzeVm/2/)是给你的固定小提琴。

*   `var h[i] = ...`是无效的 JavaScript。
*   您在 jsfiddle 上的“JavaScript”框架中编写的内容已执行`onload`，因此当您提供的 HTML 被执行时，此代码尚不存在（`addButton()`函数也不存在）。

    ```
    <script>
    var i = 0;
    var h = new Array();

    function addButton() {
        i++;
        var container = document.getElementById("check0");

        h[i] = document.createElement("input");
        h[i].type = 'button';
        h[i].name = 'number' + i;
        h[i].value = "number" + i;
        h[i].id = 'number' + i;

        h[i].onclick = function() {
            showAlert(i)
        };

        container.appendChild(h[i]);
    }

    function showAlert(number) {
        alert("You clicked Button " + number);
    }
    </script>

    <div id="check0">
        <input type="button" value="klick mich" id="number0" onclick="addButton()"/>
    </div>​ 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:31:42.043

尝试使用`h.push(...)`而不是尝试发送到数组中的未创建元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T18:31:19.170

```
 var x = document.getElementById('pagination');//pagination is an empty div in html
    var y ='';
    for(var i = 0; i <= (pageMax); i++){
        y = y+"<a id ='pageNumber"+i+"' onclick='changePage("+(i+1)+");'>"+(i+1)+"</a>\n ";
        } x.innerHTML=y } 
```

我用它来为表格进行分页。该函数将创建一行数字，直到按钮最大。'changePage("+(i+1)+"); ...将调用一个函数并发送页码的 i 索引（页面所在的编号）。我也动态地为每个号码创建一个唯一的 id。

# css - 可重用代码的最大宽度解决方案

> ID：10706154
> 
> 赞同：-1
> 
> 时间：2012-05-22T16:27:51.517
> 
> 标签：css

我得到了以下代码。这段代码将被重用。它工作正常，但现在我遇到了一个小问题，我不知道如何解决它。

当段落内的文本很宽并且包含简短块的任何内容都不是那么宽时，第二个 div 会中断并落在下一行，并且我不想要下一行的文本，我想要文本图像 div 的右侧。

解决这个问题的方法是在孩子的 div 中放置一个 max-width，但就像我说的那样，代码被到处重用，而且我有非常宽的容器。

```
 div.brief > div {
            float: left;
        }

        div.image {
            -moz-box-shadow: 0 0 5px #939393;
            -ms-box-shadow: 0 0 5px #939393;
            -o-box-shadow: 0 0 5px #939393;
            -webkit-box-shadow: 0 0 5px #939393;
            box-shadow: 0 0 5px #939393;
            padding: 2px;
            display: inline-block;
            margin-right: 10px;
        }

                        <div class="brief">
                            <div>
                                <div class="image"><a href="#"><img width="33" height="33" src="aaa.jpg" title="aaa" alt="aaa" /></a></div>
                            </div>
                            <div>
                                <p>Boudin drumstick pancetta, beef ribs filet mignon pork belly short ribs bacon...</p>
                                <label>By:</label>&nbsp;<a href="#" class="smallhighlight">Somebody</a>
                            </div>
                        </div> 
```

任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:32:27.523

不要将您的 img/text 包装在 div 中？

这里的例子：http: [//jsfiddle.net/ANNLP/2/](http://jsfiddle.net/ANNLP/2/)

# javascript - Google Translator API v2 大文本 'POST' 方法

> ID：10706158
> 
> 赞同：1
> 
> 时间：2012-05-22T16:28:18.337
> 
> 标签：javascript, google-translator-toolkit

我有以下代码：

```
$.ajax({
          url: "https://www.googleapis.com/language/translate/v2",
          type: "POST",
          data: { key: "<key>", source: FromLang, target: DestLang, q: Text },
          headers: { "X-HTTP-Method-Override": "GET" },
          dataType: 'jsonp',
          success: function (data) {
                var ReturnedTextalert = data.data.translations[0].translatedText;
                setEditor(ReturnedTextalert, LongLang, DestField);
            },
          error: function (data) {
                   alert('fail');
            }
          });   
    } 
```

此代码适用于小文本，但我无法将其用作“POST”。它不断给出“414 Request-URI Too long”。我要翻译的文本只有 2120 个字符。它应该能够翻译 <5K 个字符。

谁能告诉我为什么“POST”方法与“GET”覆盖（由谷歌解释）组合不起作用？

# c# - 获取唯一日期 win windows phone 开发

> ID：10706160
> 
> 赞同：0
> 
> 时间：2012-05-22T16:28:29.407
> 
> 标签：c#

如何在 Visual Studio for windows phone 的 windows phone 开发环境中仅获取日期，例如：2011-03-04？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:31:14.123

您应该能够使用 DateTime 类型的 Date 属性：-

[http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)

# asp.net - 遍历结果集.Net

> ID：10706166
> 
> 赞同：3
> 
> 时间：2012-05-22T16:28:46.880
> 
> 标签：asp.net, .net

我有如下代码，这个存储过程'get2Rows'返回2行，我想获取第一行并获取列值，然后是第二行并获取列值。我需要如何迭代？

```
using (System.Data.Common.DbCommand dbCommand = DataAccess.Instance().Database.GetStoredProcCommand("get2Rows"))
{       
    using (IDataReader reader = DataAccess.Instance().Database.ExecuteReader(dbCommand))
    {
         while (reader.Read())//here i want to get the 1st row
         {
             //here i want to get the columns of the 1st row....
         }                            
    };                        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:31:27.353

```
while (reader.Read())//here i want to get the 1st row
{
    //here i want to get the columns of the 1st row....
    int firstColumn = Convert.ToInt32(dr[0]["intColumn"].ToString());
    string secondColumn = dr[0]["stringColumn"].ToString();
    // etc.
} 
```

你得到了这两行，因为你正在循环它们。由您决定如何存储它们，也许在一个集合中？

更多信息：[http ://www.csharp-station.com/Tutorial/AdoDotNet/lesson04](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson04)

如果您使用 DataReader，我的建议是一次使用一行，因为它就是这样操作的。如果你想要内存中的所有行，你应该使用 DataSet 来代替。

# blackberry - BBM Connected 应用程序未连接

> ID：10706170
> 
> 赞同：0
> 
> 时间：2012-05-22T16:29:23.807
> 
> 标签：blackberry, bb-messenger

我正在尝试使用 BBM 1.3 SDK 制作 BBM Connected App。出于某种原因，该应用程序无法在我拥有的两台设备（9900 和 9780 @ OS 7.0 和 BBM 6.1）上运行，即使它应该，至少在预生产中。下面是我的注册码：

```
 Screen screen;
    BBMApp = new BBMPlatformApplication(Global.UUID);
    context = BBMPlatformManager.register(BBMApp);
    allowed = context.isAccessAllowed();
    listener = new BBMPlatformContextListener() {

        public void accessChanged(boolean arg0, int arg1) {
            allowed = context.isAccessAllowed();

            if(!allowed)
            {
                //Do nothing
            }
            else if(allowed)
            {

            }
        }
    };
    context.setListener(listener);
    screen = new MyScreen(context);
    // Push a screen onto the UI stack for rendering.
    pushScreen(screen); 
```

这是来自在线文档的代码，所以我不知道为什么它不起作用。context.isAccessAllowed() 在两个设备上都返回 false，访问错误代码为 0 (APP_ENVIRONMENT_TEST)。

两台设备都有正常工作的 BBM 和 WiFi 连接。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:03:05.157

回答

我已经设法解决了这个问题。我使用的代码来自 BBM Hackathon，由于某种原因，它不起作用。通过使用在线文档中给出的基本代码，应用程序可以正常工作，前提是在完成 BBM 注册之前有一个活动屏幕。

# css - 引导 btn 组未对齐

> ID：10706177
> 
> 赞同：2
> 
> 时间：2012-05-22T16:29:39.150
> 
> 标签：css, button, twitter-bootstrap

我对以下代码有疑问；

```
 <li class="span4">
        <div class="thumbnail">
            <img src="" alt="" />
            <div class="caption">
                <h3>Title</h3>
                <div class="clearfix">
                    <div class="pull-right">
                        <div class="btn-group">
                            <button class="btn btn-success"><i class="icon-thumbs-up"></i></button>
                            <button class="btn btn-danger"><i class="icon-thumbs-down"></i></button>
                            <button class="btn btn-warning"><i class="icon-star-empty"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </li> 
```

缩略图描述中的按钮如下所示；

![按钮问题](../Images/56fca14e598235bb52e06a9654eea5c5.png)

我遇到的主要问题是这些*有时*只会出现损坏。不总是。

它在 JSFiddle 中运行良好，但无论如何它都在这里；[http://jsfiddle.net/NsKYH/1/](http://jsfiddle.net/NsKYH/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T04:31:23.353

如果将**white-space:nowrap**定义为`.btn-group`DIV 可能会更好。像这样写：

```
.btn-group{
  white-space:nowrap;
 }    
button{
 white-space:normal;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T11:08:10.600

`button`我发现一些浏览器和自定义 CSS 存在标签之间的空白问题。尝试：

```
<div class="btn-group"><button
    class="btn btn-success"><i class="icon-thumbs-up"></i></button><button
    class="btn btn-danger"><i class="icon-thumbs-down"></i></button><button
    class="btn btn-warning"><i class="icon-star-empty"></i></button></div> 
```

~~或在 CSS （更好的主意）或内联*（不是一个好主意）*中强制样式：~~

 ~~```
<div class="btn-group" style="white-space:nowrap;"> ... 
```~~  ~~您还会发现`input-append`（等）分组存在此问题。删除 html 标签之间的空格似乎可以解决这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-17T16:34:45.773

防止按钮组包装的最简单修复来自[briamhunt](https://github.com/twbs/bootstrap/issues/9939#issuecomment-37682952)：

```
.btn-group {
    display: flex;
} 
```

如今，Flexbox 得到[了很好的支持](http://caniuse.com/#search=flexbox)。~~

# c - 用C语言输出随机数的程序

> ID：10706179
> 
> 赞同：-1
> 
> 时间：2012-05-22T16:29:46.753
> 
> 标签：c, arrays, random, numbers

我正在做一个程序，询问用户姓名和 ID 号......然后我添加了一个搜索功能，例如搜索名称“bob”它说“Bob 在数组位置 x 中找到，ID:xxxxx”

我的问题是代码的“ID：xxxx”部分给了我随机数......它应该是例如1234，但它给了我像4210832这样的东西

这是代码

```
void search_surname()
{
    int index, found=0;
    char surname_to_find[10];

    printf("Please enter the student surname to search for\n\n");
    gets(surname_to_find);
    fflush(stdin);
    system("cls");
    for(index=0;index<height_of_array;index++)
    {

        if(strcmpi(surname_to_find, surname[index]) == 0)
        {
            found=1;

            system("cls");                                                      
            printf("%s found in array position %i, with the ID: %i \n\n", surname_to_find,     
            index+1, id[array_index] );
            getch(); 
```

我不是 100% 确定为什么它给我随机数

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:47:18.543

您发布的代码如此不完整，以至于无法指出确切的答案。因此，一种解决问题的方法：

*   首先，您使用`id[array_index]`而不是`id[index]`，这很奇怪，因为`index`您的 for 循环中的变量也是如此。（`array_index`未在您的函数中定义；它是全局变量吗？请避免使用全局变量！）。
*   您的示例代码中没有任何`id`地方被填充，甚至没有被声明。确认已正确填写。在不填写值的情况下使用`id`会打印出奇怪的东西（未初始化）。调试器应该使确认其正确填充变得容易。否则，只需循环并打印出来。
*   使用调试器来观察你的程序运行。

最后一件事：C 有结构。没有理由使用这样的多个数组。

```
struct surname_info {
    unsigned int id;
    const char *surname;
};
⋮
struct surname_info surnames[10];
surnames[0].id = 1234;
surnames[0].surname = "Bob";
/* etc */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:34:25.340

更改`id[array_index]`为`id[index]`

# c# - 登录 Winform 应用程序

> ID：10706187
> 
> 赞同：4
> 
> 时间：2012-05-22T16:30:26.697
> 
> 标签：c#, winforms, logging, auditing

初始情况：有一个很大的 Winform 应用程序，有很多对话框，后台有一个 Oracle 数据库。现在需要实现**审计日志功能**，在某些对话框中记录用户的数据更改（**之前/之后**）（供公司审计部门以后审计）。您将如何集成这样的日志记录功能？顺便说一句，日志信息应该保存在数据库（历史表）中，Winform 解决方案的管理应用程序应该为日志数据提供一个浏览器对话框。

是否有现有的解决方案或框架，可以使用。在这种情况下使用像**NLOG**这样的日志框架是有意义的，还是从头开始实现这样一个特定的日志记录更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T16:50:37.003

我创建了一个非常简单的名为 Logger 的静态类，它只有一个方法，它接受一个字符串并使用[StreamWriter记录当前的](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)[DateTime](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)。我喜欢编写自己的日志，因为它允许我按照自己的方式格式化输出。这是我的样子的一个简短示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace LoggerSpace
{
    public static class Logger
    {
        private static StreamWriter swLog;
        private const string sLOG_FILE_PATH = "log.txt";    

        static Logger()
        {
            Logger.OpenLogger();
        }

        public static void OpenLogger()
        {
            Logger.swLog = new StreamWriter(sLOG_FILE_PATH, false);
            Logger.swLog.AutoFlush = true;
        }

        public static void LogThisLine(string sLogLine)
        {
            Logger.swLog.WriteLine(DateTime.Now.ToShortDateString() + " " + DateTime.Now.ToLongTimeString() + "\t:" + "\t" + sLogLine);
            Logger.swLog.Flush();
        }

        public static void CloseLogger()
        {
            Logger.swLog.Flush();
            Logger.swLog.Close();
        }
    }
} 
```

您必须确保捕获适当的异常，并在表单关闭时调用 close 方法。再说一次，我喜欢它，因为它很简单，我可以按照自己喜欢的方式格式化它。我还看到人们在他们记录的行中从某些关键字生成空格的地方编写它。只是一个建议，有很多选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T16:42:32.930

你有几个选项，没有一个包括一些人建议的系统级日志记录。

选项：

*   如果您在数据库中有存储过程作为 CRUD 操作的接口，那么您很幸运，因为您可以在其中添加日志记录
*   如果您没有存储过程作为数据库的接口，您仍然可以避免重新编写应用程序并在您感兴趣的表上使用触发器
*   最后一个选项是修改应用程序代码并将日志记录插入应用程序代码本身。

每个选项都有其优点和缺点，因此在向任何方向跳跃之前，请尝试尽可能多地学习。

编辑：

**为什么你不需要 Nlog 或 log4net**

您不需要它们，因为从问题中很明显，您需要有关数据库中已执行事务的数据。当然，这两个日志框架都可以将数据放入数据库，但是将涉及许多额外的步骤，首先为数据库格式化数据，然后从格式化的数据中提取有关事务中涉及的实体的有用信息，并很快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T16:37:45.800

[许多人忽略了一个事实，即 .NET 使用Trace 类](http://msdn.microsoft.com/en-us/library/36hhw2t6)内置了一个非常强大的日志记录系统。好的部分是您无需任何设置即可立即使用它，在调试窗口中获取消息，当您真正需要日志文件时，您可以设置[Trace Listeners](http://msdn.microsoft.com/en-us/library/4y5y10s7.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-26T16:21:18.123

当您想要记录数据更改（在数据库上）时，您应该使用数据库提供的日志功能（使用存储过程、触发器并取决于数据库产品内置功能，如[SQL Server Change Data Capture](https://msdn.microsoft.com/en-us/library/cc645937.aspx)），因为大多数时候您想要无论触发它的应用程序/进程（Winforms 应用程序、网站、数据库管理软件）如何，都记录该事件。

您不希望（或将原谅）在下一个新客户端应用程序上重新创建日志功能。

当您想跟踪有关应用程序使用的事件（崩溃、单击按钮、开始时间......）时，使用应用程序日志系统

授予对日志的访问权限并使其易于阅读是另一回事。

# sql - Crystal Reports 查询 - 没有得到正确的结果

> ID：10706197
> 
> 赞同：0
> 
> 时间：2012-05-22T16:30:57.887
> 
> 标签：sql, crystal-reports, report

我正在创建水晶报表，但被卡住了。我有一张表（数字），里面有 20 个项目，3 列（项目#，每个订单的价格（PPO），每个订单的案例（CPO）。该报告应该查看我们每个商店的所有销售订单和按项目打印出损失或增加了多少收入，如果他们订购低于或高于 CPO。我遇到的问题是有些商店没有订购 20 件商品中的一些，但我仍然需要这些在报告中显示为收入损失。我知道这主要是通过 Numbers 表中的左连接来完成的。我现在的查询是：

```
 SELECT x.*, z.*
FROM NUMBERS x 
LEFT OUTER JOIN (
SELECT  
        BPCUSTOMER.BPCPYR_0 AS PayingBp,
        BPCUSTOMER.BPCNUM_0 AS BpNumber,
        ITMMASTER.ITMREF_0 AS ITMREF,
        SUM(SINVOICED.NETPRI_0) AS NETPRI,
        SUM(SINVOICED.QTY_0) AS Quantity,
        MAX(SINVOICED.ITMDES1_0) AS DES,
        MAX(BPADDRESS.CTY_0) AS BpCity,
        MAX(BPADDRESS.SAT_0) AS BpState

      FROM SINVOICED SINVOICED
        INNER JOIN BPCUSTOMER ON SINVOICED.BPCINV_0 = BPCUSTOMER.BPCNUM_0
        INNER JOIN ITMMASTER ON SINVOICED.ITMREF_0 = ITMMASTER.ITMREF_0
        INNER JOIN BPADDRESS ON SINVOICED.BPCINV_0 = BPADDRESS.BPANUM_0
        INNER JOIN BPCUSTOMER_PAY ON BPCUSTOMER.BPCINV_0 = BPCUSTOMER_PAY.BPCNUM_0

      WHERE (ITMMASTER.TSICOD_2 = N'YE1') 
        AND (BPCUSTOMER.BPCPYR_0 > N'10110')
      GROUP BY BPCUSTOMER.BPCPYR_0, BPCUSTOMER.BPCNUM_0, ITMMASTER.ITMREF_0

) z ON x.[Item #] = z.ITMREF 
```

使用此查询，我没有得到任何 NULL 信息。如果我将特定商店添加到 WHERE 部分，它会为我提供正确的结果，但仅适用于该特定商店。我们有 300 多家商店，所以对我来说一次经营一家商店是没有意义的。我猜问题是在为所有商店运行它时，每件商品都至少订购了一次，所以它不显示空字段。

希望这不会太令人困惑。有什么建议么？

* * *

他们希望报告显示按支付 bp 然后按商店编号分组的每个项目。这是一个 SQL 数据库，但我从 Crystal Reports 中获取了查询，并试图对其进行操作以获得正确的结果。

但我有一个请求更改。他们现在只想查看根本没有购买的物品。我仍在尝试使用 NUMBERS 表的左外连接来执行此操作，但仍然遇到同样的问题。我现在的查询是：

```
 SELECT "ZP_ITMMASTER"."ITMREF_0", "ZP_ITMMASTER"."ITMDES1_0", "ZP_NUMBERS"."Avg # Cases per order", "ZP_NUMBERS"."Price per order", "ZP_SDELIVERY"."BPCPYR_0", "ZP_SDELIVERY"."BPCORD_0", "ZP_NUMBERS"."Item #", "ZP_ITMMASTER"."TSICOD_2"
 FROM   (("master"."dbo"."ZP_NUMBERS" "ZP_NUMBERS" LEFT OUTER JOIN "master"."dbo"."ZP_SDELIVERYD" "ZP_SDELIVERYD" ON "ZP_NUMBERS"."Item #"="ZP_SDELIVERYD"."ITMREF_0") INNER JOIN "master"."dbo"."ZP_SDELIVERY" "ZP_SDELIVERY" ON (("ZP_SDELIVERYD"."SDHNUM_0"="ZP_SDELIVERY"."SDHNUM_0") AND ("ZP_SDELIVERYD"."SOHNUM_0"="ZP_SDELIVERY"."SOHNUM_0")) AND ("ZP_SDELIVERYD"."STOFCY_0"="ZP_SDELIVERY"."STOFCY_0")) INNER JOIN "master"."dbo"."ZP_ITMMASTER" "ZP_ITMMASTER" ON "ZP_SDELIVERYD"."ITMREF_0"="ZP_ITMMASTER"."ITMREF_0"
 WHERE  "ZP_ITMMASTER"."TSICOD_2"=N'YE1'
 ORDER BY "ZP_SDELIVERY"."BPCPYR_0", "ZP_SDELIVERY"."BPCORD_0", "ZP_ITMMASTER"."ITMREF_0" 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:20:18.903

我同意@noa，我认为这不是 Crystal 问题，更可能是 SQL 查询问题。也就是说，如果 300 家商店中的一家至少购买了每种产品一次，我怀疑您可能会在声明中同时为所有商店运行它。

如果您在 numbers 表和“stores”表之间使用[交叉连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)来创建 numbers 和 store 之间的笛卡尔积会怎样。即，300 家商店中每个商店的每个项目编号的记录。通常我不会推荐这种方法，但由于我们谈论的实体数量相对较少，这可能会奏效。

获取交叉连接的结果并对问题中包含的子查询执行连接，只是这次不仅连接项目#，还连接商店 ID。通过加入商店 ID，您可以隔离每个商店销售的产品。

# ios - 通过 AudioConverterFillComplexBuffer 将 AAC 转换为 LPCM

> ID：10706201
> 
> 赞同：0
> 
> 时间：2012-05-22T16:31:10.960
> 
> 标签：ios, rtp, aac

我正在尝试使用“音频转换器服务”-AudioConverterFillComplexBuffer

我遇到了很多问题。首先，我不知道如何填充`ioOutputDataPacketSize`. 我已经解析了我的 SDP 描述符，我得到了 8000Hz、1 通道 AAC-LC。

```
a=fmtp:98 profile-level-id=1;mode=AAC-hbr;sizelength=13;indexlength=3;indexdeltalength=3;config=1588 
```

我收到一些准备通过 RTP 转换的数据（各种大小），删除如下所示的标头，然后我期望的是一个 16 位 AU-headers-length 字段，之后我将拥有应该允许的 AU 标头我来确定帧/数据包大小等。我看到的只是标题长度的零......

我正在通过 RTP 接收 AAC-LC / AAC-hbr，收到的数据包如下所示：

```
0x24 0x00  - unknown framing

0x05 0x84 - rfc4571 - 2bytes packet length

0x80 0x61 0x00 0x00 - 12bytes rtp header - rfc3016
0x00 0x00 0x05 0xA0 
0x05 0x5F 0xEB 0x2E 

0x00 0x00 0x01 0xB0 - rtp payload ie. start of AAC header??
0x03 0x00 0x00 0x01 
0xB5 0x09 0x00 0x00 
0x01 0x00 0x00 0x00 
0x01 0x20 0x00 0x84 
0x40 0x06 0x68 0xA0 
0x21 0xE0 0xA3 0x1F 
0x00 0x00 0x01 0xB6 ... 
```

我每隔几秒钟就会得到上面的“标题”，并且在几个数据包之间，以：

```
0x00 0x00 0x01 0xB6 
```

所以它看起来像一个一致的标题，但也许我误解了 rfc3640。

所以真的有两个问题：

1.  如何确定`ioOutputDataPacketSize`.

2.  AAC 标头是否高于我可以直接传递给转换函数的实际 AAC 数据？还是我需要剥离标题（一旦我可以实际解码并计算它的大小）

我还没有真正找到从一个 NSData 输入到另一个 NSData 输出进行这种转换的任何示例。一些使用基于磁盘的转换的示例，但它们对内存转换没有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T20:52:09.550

我的错误，这不是我正在查看的音频数据，而是视频数据！现在我实际上可以提取正确大小的数据包了。

# python - Beaker 1.5.1 未创建缓存文件

> ID：10706214
> 
> 赞同：0
> 
> 时间：2012-05-22T16:32:17.360
> 
> 标签：python, caching, pylons, beaker

最近我们的一个应用服务器出现故障，当它重新启动时，Python Beaker 模块停止生成缓存文件。

我得到的错误是：

```
Error - <type 'exceptions.KeyError'>: 'ver'
URL: http://127.0.0.1:3002/menuadmin/
File '/opt/csw/lib/python2.6/site-packages/WebError-0.10.1-py2.6.egg/weberror/errormiddleware.py', line 162 in __call__
  app_iter = self.application(environ, sr_checker)
File '/opt/csw/lib/python2.6/site-packages/Beaker-1.5.1-py2.6.egg/beaker/middleware.py', line 73 in __call__
  return self.app(environ, start_response)
File '/opt/csw/lib/python2.6/site-packages/Beaker-1.5.1-py2.6.egg/beaker/middleware.py', line 152 in __call__
  return self.wrap_app(environ, session_start_response)
File '/opt/csw/lib/python2.6/site-packages/repoze.who-1.0.18-py2.6.egg/repoze/who/middleware.py', line 107 in __call__
  app_iter = app(environ, wrapper.wrap_start_response)
File '/opt/csw/lib/python2.6/site-packages/inm-1.0.0dev_r2361-py2.6.egg/inm/middleware/middlewarecomponents.py', line 40 in _GroupsMiddleware
  return app(environ, start_response)
File '/opt/csw/lib/python2.6/site-packages/inm-1.0.0dev_r2361-py2.6.egg/inm/middleware/middlewarecomponents.py', line 121 in _AIMSStackedUserMiddleware
  return app(environ, start_response)
File '/opt/csw/lib/python2.6/site-packages/pulse-0.1.2-py2.6.egg/pulse/middleware.py', line 183 in __call__
  return self.app(environ, start_response)
File '/opt/csw/lib/python2.6/site-packages/Routes-1.12-py2.6.egg/routes/middleware.py', line 131 in __call__
  response = self.app(environ, start_response)
File '/opt/csw/lib/python2.6/site-packages/Pylons-0.9.7-py2.6.egg/pylons/wsgiapp.py', line 125 in __call__
  response = self.dispatch(controller, environ, start_response)
File '/opt/csw/lib/python2.6/site-packages/Pylons-0.9.7-py2.6.egg/pylons/wsgiapp.py', line 324 in dispatch
  return controller(environ, start_response)
File '/opt/csw/lib/python2.6/site-packages/menuadmin-0.9.7dev_r0-py2.6.egg/menuadmin/lib/base.py', line 18 in __call__
  return WSGIController.__call__(self, environ, start_response)
File '/opt/csw/lib/python2.6/site-packages/Pylons-0.9.7-py2.6.egg/pylons/controllers/core.py', line 217 in __call__
  response = self._inspect_call(self.__before__)
File '/opt/csw/lib/python2.6/site-packages/Pylons-0.9.7-py2.6.egg/pylons/controllers/core.py', line 107 in _inspect_call
  result = self._perform_call(func, args)
File '/opt/csw/lib/python2.6/site-packages/Pylons-0.9.7-py2.6.egg/pylons/controllers/core.py', line 60 in _perform_call
  return func(**args)
File '/opt/csw/lib/python2.6/site-packages/menuadmin-0.9.7dev_r0-py2.6.egg/menuadmin/controllers/admin.py', line 27 in __before__
  mcm.checkout()
File '/opt/csw/lib/python2.6/site-packages/menuadmin-0.9.7dev_r0-py2.6.egg/menuadmin/controllers/pagecache.py', line 35 in checkout
  ver = cm.get('ver')
File '/opt/csw/lib/python2.6/site-packages/Beaker-1.5.1-py2.6.egg/beaker/cache.py', line 222 in get
  return self._get_value(key, **kw).get_value()
File '/opt/csw/lib/python2.6/site-packages/Beaker-1.5.1-py2.6.egg/beaker/container.py', line 257 in get_value
  raise KeyError(self.key)
KeyError: 'ver' 
```

我已经浏览了模块，发现缓存目录是：

```
cache_dir = /opt/pyapps/menuadmin/data 
```

创建缓存的代码（主应用程序中名为 pagecache.py 的控制器模块）：

```
cm = Cache('page_cache',type='ext:memcached',url=config['beaker.session.url'],data_dir=config['pylons.cache_dir']) 
```

但是当我访问这个目录时，那里没有缓存文件。

谁能想到为什么烧杯会突然抛出这个错误？可能是某种权限错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:56:51.240

我不知道究竟是什么原因造成的，我猜是某种服务器重置，但我设法破解了程序并强制它在烧杯目录中创建一个新的保存文件。

# escaping - 使用“我很高兴”进行字符串转义 - 技术术语？

> ID：10706217
> 
> 赞同：0
> 
> 时间：2012-05-22T16:32:28.527
> 
> 标签：escaping, terminology

如果我有一个字符串`I'm happy`并且我喜欢在使用单引号 (') 的字符串中使用它，那么我需要对字符串中的引号进行转义。

在大多数情况下，这是通过做一些我称之为“反斜杠转义”的事情来完成的：只需在引号前加上反斜杠：`'I\'m happy'`。其他人似乎也这样做：如果我在谷歌上输入“反斜杠转义”，就会出现很多解释该技术的页面。形容词，完美。

但例如在 SQL 中你会写`'I''m happy'`. 有没有一个术语？那怎么称呼？从谷歌搜索结果来看，“repeat-the-quotation-mark-escape”非常不受欢迎：它只是给出了一堆不相关的东西。

编辑：从评论中阅读我相信我需要更多地解释我为什么要问：

我当前的 Java 代码有一个使用上述原理转义字符串的方法。我需要给该方法一个描述性的名称。当然我可以称它为“sqlEscape”，但这并不是 SQL 的真正发明......只是简单地调用方法“escape”并没有给出任何关于该方法如何转义字符串的提示......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:16:35.640

您需要完成的转义是为了将数据与 SQL 一起使用。在没有“什么”一词的好词的情况下，我的观点（有点异端）是您的方法名称可以传达“为什么”。所以我可以接受一个名为 escapeForSQL() 的方法。

当然，我们真正要做的只是将单引号加倍；我们没有做任何其他的逃避。所以 doubleUpTicks() 或 doubleUpSingleQuotes() 也适用于我。

# java - 如何让 geolocator-java 进入 Eclipse？

> ID：10706218
> 
> 赞同：0
> 
> 时间：2012-05-22T16:32:30.707
> 
> 标签：java, eclipse, svn, geocoding

我试图得到这个： [http://code.google.com/p/geocoder-java/](http://code.google.com/p/geocoder-java/) 进入 Eclipse 以使用地理编码器 API。我已经安装了 SVN 插件，现在我想知道我必须做些什么才能将它放入我的一个项目中，以便我可以将它用作库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:47:55.327

从项目的[源](http://code.google.com/p/geocoder-java/source/checkout)页面：

> 非成员可以通过 HTTP 匿名签出只读工作副本。
> 
> svn checkout [http://geocoder-java.googlecode.com/svn/trunk/geocoder-java-read-only](http://geocoder-java.googlecode.com/svn/trunk/)

将地理编码器目录添加到您的 SVN 目录列表中，并使用提供的用户 ID 和空密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:49:32.270

如果您已经下载并构建了 .jar 文件，则只需将其添加为外部库。

类似于[这里](https://stackoverflow.com/questions/179024/adding-a-jar-to-an-eclipse-java-library)

# java - JSON解析日期和时间？

> ID：10706219
> 
> 赞同：0
> 
> 时间：2012-05-22T16:32:34.987
> 
> 标签：java, android, json, parsing

我在解析 json 日期时遇到了一点问题。

这是我要解析的内容：

```
 {"driver": "247","firstName": "XXXXX","lastName": "XXXXX","lastLatitudeUpdate": "5/21/2012     4:49:17 PM","suspended": "false","checkedin": "0"} 
```

我在解析“lastLatitudeUpdate”时遇到问题，是因为两者之间有空格吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:44:30.430

简短回答：不，JSON 引擎无法将字符串识别为 Date 对象。

长答案：JSON 中没有“日期”类型。但是，这个 JSON 很好，问题是 lastLatitudeUpdate 将被解析为字符串。为了将其转换为日期，您应该尝试类似

```
var my_object= JSON.parse({"driver": "247","firstName": "XXXXX","lastName": "XXXXX","lastLatitudeUpdate": "5/21/2012     4:49:17 PM","suspended": "false","checkedin": "0"});
my_object.lastLatitudeUpdate= Date.parse(my_object.lastLatitudeUpdate) 
```

这个函数会给出一个时间戳。但是，您必须确保正确识别字符串，您可能需要做一些额外的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:44:58.183

假设您使用的是 Android 并因此使用 java （是的，您没有提到这一点，只有您问题中的标签暗示了它......）

就像[这里](https://stackoverflow.com/questions/999172/how-to-parse-date-in-java)提到的（和其他地方）你可以使用[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)类在java中解析一个日期：

```
SimpleDateFormat parserSDF=new SimpleDateFormat("M/d/yyyy h:m:s a");
Date d = parserSDF.parse(dateField,0); 
```

当然，您必须首先使用一些库（例如来自[json.org](http://www.json.org/java/)或[Google gson](http://code.google.com/p/google-gson/)的标准库）解析您的 json 输入，然后将您将获得的字段解析为日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:44:24.563

一些提示链接

[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

[http://www.java-samples.com/showtutorial.php?tutorialid=406](http://www.java-samples.com/showtutorial.php?tutorialid=406)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-22T16:37:15.690

你是如何解析日期的？在 Chrome 中，这似乎工作正常：

```
new Date("5/21/2012     4:49:17 PM");
Mon May 21 2012 16:49:17 GMT-0400 (US Eastern Daylight Time) 
```

# javascript - Lucene 搜索以在文件夹中查找 2 种特定内容模型类型中的任何一种

> ID：10706220
> 
> 赞同：2
> 
> 时间：2012-05-22T16:32:53.593
> 
> 标签：javascript, lucene, alfresco, web-scripting

我正在尝试在 Alfresco webscript (javascript) 中编写一个 lucene 搜索，以在自定义类型 cm:folder 中查找 2 个自定义类型中的 1 个

所以文件夹可能有以下内容 1\. 一些文本 (cm:content) 2\. 更多文本 (custom:content) 3\. 更多文本 (custom:content) 4\. 另一个文件夹 (cm:folder) 5\. 疯狂，更多文本 (custom:content2) 6\. 最后文本 (custom:content2)

lucene 搜索的预期结果应该返回以下 2\. 更多文本 (custom:content) 3\. 更多文本 (custom:content) 5\. 疯狂，更多文本 (custom:content2) 6\. 最后文本 (custom:content2)

lucene 搜索哪里出错了？我写了一些类似的东西

```
+PATH:"/app:company_home/PATH_TO_A_CUSTOM_TYPE_FOLDER/*" TYPE:"custom:content1"  TYPE:"custom:content2" 
```

问题是它返回所有内容，我认为目的是写类似

```
+PATH:"/app:company_home/PATH_TO_A_CUSTOM_TYPE_FOLDER/*" +TYPE:"custom:content1" OR +PATH:"/app:company_home/PATH_TO_A_CUSTOM_TYPE_FOLDER/*"+TYPE:"custom:content2" 
```

更糟糕的情况是我可以运行 2 次 lucene 搜索，但最好知道查询是如何编写的 :-)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:03:09.730

你不能只做以下事情：

```
+PATH:"/app:company_home/PATH_TO_A_CUSTOM_TYPE_FOLDER/*" AND (TYPE:"custom:content1" TYPE:"custom:content2") 
```

因为如果你写 +PATH TYPE: TYPE:，它实际上是 PATH:(Must have) OR TYPE: OR TYPE:，因此看起来如果 PATH: 匹配，它将返回下面的所有内容。

# javascript - Javascript告诉滚动div是否被光标“持有”？

> ID：10706227
> 
> 赞同：1
> 
> 时间：2012-05-22T16:33:23.117
> 
> 标签：javascript, html, scroll

我有一个带有溢出的滚动div：auto 我想通过更改scrollTop来滚动它，但在更改它之前我想知道用户是否用他的光标“按住”滚动条，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:54:32.393

您可以将 div 绑定到事件处理程序，然后使用全局变量。

```
var IsPressingDiv = false;

$('#DivID').on({

    mousedown: function () { IsPressingDiv = true; },
    mouseup: function () { IsPressingDiv = false; }
}); 
```

这样你就可以测试鼠标是否被按下在 div 上。我不确定有没有办法在通用滚动条上处理 mousedown，但是如果您需要将事件绑定到滚动条，我会使用 jquery 滚动条插件或自己制作。

# python - 我应该使用 __new__ 来防止实例化吗？

> ID：10706231
> 
> 赞同：2
> 
> 时间：2012-05-22T16:33:32.713
> 
> 标签：python, python-2.7

我正在构建自己的轻量级表单。我想将实例化的对象保存在类变量（可能是字典）中。当我请求像 get(id) 这样的对象（通过类方法）时，我想从实例化列表中返回该对象，或者如果它不存在则创建一个。

有没有办法防止对象的实例化（如果它的 id 已经存在于 cls 列表中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:37:56.487

只需执行显式检查，这是最干净的方法，我相信：

```
class OrmContainer(object):
    objects = {}

    @classmethod
    def get(cls, id):
        if id not in cls.objects:
            cls.objects[id] = SomeOtherClass(id)
        return cls.objects[id] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:40:45.147

有两种直接的方法 - 以及许多其他方法。正如您所建议的，其中之一是`__new__`为您的对象编写方法，该方法可以返回一个已经存在的对象或创建一个新实例。

另一种方法是为您的对象使用工厂函数 - 并调用这个工厂函数而不是类 - 或多或少像这样：

```
class _MyClass(object):
    pass

def MyClass(*args, **kw):
    if not "my_class_object" in all_objects:
         all_objects["my_class_object"] = _MyClass(*args, **kw)
    return all_objects["my_class_object"] 
```

# java - Java 泛型转换错误

> ID：10706234
> 
> 赞同：2
> 
> 时间：2012-05-22T16:33:45.020
> 
> 标签：java, generics, classcastexception

对应标题，我的问题是获取一个泛型数组的数组长度，它在一个类的实例内部，该类的实例已经用这个泛型类型初始化。当我想获取我的数组的长度（ak.array.length）时，java会抛出这个错误：

线程“main”中的异常 java.lang.ClassCastException: [Ljava.lang.Object; 不能转换为 [Ljava.lang.String; 在 Testclass.main(Testclass.java:15)

那么我在这段代码中的错在哪里？提前致谢

```
public class Testclass {

    static class ArrayKeeper<T> {
        protected T[] array;

        public ArrayKeeper() {
            array = (T[])new Object[5];
        }
    }

    public static void main(String[] args) {
        //create a new instance of inner class ArrayKepper (type String)
        Testclass.ArrayKeeper<String> ak = new Testclass.ArrayKeeper<String>();
        System.out.println(ak.array.length); //cast error here.
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:37:59.903

问题出在这一行：

```
array = (T[]) new Object[5]; 
```

这不是创建通用数组的方法，您创建的是`Object[]`a 而不是 a `String[]`。您不能创建一个`Object[]`然后将其转换为您想要的任何类型，您必须创建一个正确类的数组。试试这个：

```
public ArrayKeeper(Class<T> clazz, int size) {
    array = (T[]) Array.newInstance(clazz, size);
} 
```

然后，当您需要实例化时，`ArrayKeeper`请执行以下操作：

```
Testclass.ArrayKeeper<String> ak =
    new Testclass.ArrayKeeper<String>(String.class, 5); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T16:35:04.480

我认为您需要实现`length`getter in `ArrayKeeper`，只是因为您不能将 an`Object[]`转换为 a `String[]`，并且调用`ak.array`确实会尝试进行该转换。

# jquery - 如何使用 jQuery 从 iframe 读取 s3 xml 响应？

> ID：10706235
> 
> 赞同：1
> 
> 时间：2012-05-22T16:33:51.183
> 
> 标签：jquery, forms, iframe, amazon-s3, response

我创建了一个 HTML 表单，通过 iframe 发布到我的 amazon s3 存储桶。它可以工作并且功能齐全。但是，我尝试使用 jquery 阅读响应并不断收到此错误

> 访问属性“ownerDocument”的权限被拒绝

我猜这与跨域策略有关？

这是我的jQuery代码：

```
$(document).ready(function() {
    $("#FileBrowser").change(function(){
        document.getElementById('MyForm').submit();
        $('iframe#targetFrame').load(function(){
            var Location = $(this).contents().find("Location").text();
            var ETag = $(this).contents().find("ETag").text();
            alert(LocationAdd+' '+ETag);//
        });
    });
}); 
```

我在 iframe 中得到的响应：

```
<PostResponse>
<Location>http://MyBucket.s3.amazonaws.com/ThisIsMyFileLocation</Location>
<Bucket>MyBucket</Bucket>
<Key>ThisIsMyFileLocation</Key>
<ETag>"123456789123456789"</ETag>
</PostResponse> 
```

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T10:07:35.703

是的，这是限制您的跨域策略，用于防止 XSS 攻击。在不知道设置的详细信息的情况下...

是否可以将数据从远程保存到中间占位符？某种形式的对象甚至文件？

# java - 应用程序设计文档数据库

> ID：10706237
> 
> 赞同：0
> 
> 时间：2012-05-22T16:34:04.213
> 
> 标签：java, database, hibernate, jcr

我必须开发一个使用 un DB 的应用程序，并且以这种模式构建：

1.  有元数据表（文档类型，文档属性...）
2.  从元数据表开始创建/修改（也在运行时的正常应用程序生命周期中）元数据表。

IE：如果我创建一个新的文档类型，在名为“文档类型”（合同、发票、注释..）的 METADATA 表中插入一条新记录，则新的相关 DATA 表将创建到数据库中。该表具有我在另一个 METADATA 表（文档属性）中定义的属性作为列。

我想使用 ORM 来映射元数据表，因为它们不会在运行时改变结构。是否可以映射数据表？我也想为数据表使用 POJO。

我认为在运行时创建类是不可能的（反射是可能的，但这是最好的选择吗？）并修改它们的结构。

这可能是 CMS 和 CRM 使用的逻辑/问题。

你有什么建议你对如何构建我的应用程序有什么建议吗，特别是对于 ORM / DB？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:56:04.763

用这么少的信息很难提供好的建议。但是，您包含“JCR”标签，听起来您的用例类似于内容或文档管理系统，因此您绝对应该考虑 JCR。请参阅[“何时使用 JCR 而不是其他选项？”](https://stackoverflow.com/questions/3908584/when-to-use-jcr-content-repository-over-other-options) 以获得更一般的响应，但我将尝试描述它对您的特定用例的好处。（不过，始终选择最适合工作的工具。）

也许 JCR 对您来说最好的特性是能够拥有一个灵活的模式，它允许您随着时间的推移为不同的文档添加（或更改）元数据。您可以限制属性以确保您的应用程序仅添加可接受的信息，或者您可以选择稍微宽松一些并保持选项开放以根据需要添加其他元数据。您甚至可以将元数据分解为“特征”，这些“特征”可以通过 mixins 添加到各个节点。简而言之，JCR 在设计数据结构时为您提供了极大的灵活性，同时为您提供了几个旋钮来控制您使用多少强制/灵活性。

使用 JCR 存储库还可以让您将元数据与文档一起保存（如果需要；您可以随时将它们分开）。而且，如果您的应用程序使用读取文档然后获取元数据的访问模式，这可能会给您的应用程序带来出色的性能。导航通常比查询快得多。

第三，许多 JCR 存储库甚至支持查询存储库内容（通过将节点类型映射到类似关系表的结构中）。JCR 2.0 有多种语言，包括 XPath 和一种称为“JCR-SQL2”的类似 SQL 的语言。

JCR 有一些对象映射库，但它们很可能会阻碍真正利用 JCR 的数据结构灵活性。JCR 本身是一个 Java API，它内置了对事件、安全、查询、锁定、版本控制等的支持。

如果您确实查看了 JCR，请务必查看不同的实现，包括[Jackrabbit](http://jackrabbit.apache.org/)和[ModeShape](http://modeshape.org)。它们各自提供不同的东西（例如，Jackrabbit 是参考实现，而 ModeShape 提供了一些扩展和附加功能，例如扩展查询语言和排序；请参阅[这个相关问题](https://stackoverflow.com/questions/6392815/what-does-modeshape-offer-that-jackrabbit-doesnt)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:04:40.610

JPA 和 eclipseLink 可能是我的选择。

您有点处于以下位置：使用可由组织 (CMS) 在线编辑的业务逻辑开发的 Web 应用程序，例如使用规则引擎。非常通用，听起来不错，降低了开发成本。**但是：**更改现在无法测试，无法放入版本控制，立即生效。没有调试，没有编译器智能和错误消息，没有清理（如代码清理）。事实上，这样的系统存在相当大的质量风险和维护成本。

在您的情况下，您需要非常强大的工具：版本控制、单独的登台服务器、可控逻辑、报告（模型和交互的自动文档）。

JPA 原则上可以从实体（或相反）创建数据库表本身。所以这是一层。它维护一个元模型。

源自您的元模型，您确实需要做一些聪明的事情。

最简单、最容易实现的方法是只保留您的元模型并定义版本控制等。手动代码将使用 Map 之类的通用数据。您也可以将代码存储在数据库中，对其进行版本控制，并使用 Java Scripting API。*但是您需要通知管理层，并确信可行性 - 创建一个原型。*

**我绝对希望有人知道更好的解决方案。**

附言

也许 NoSQL 数据库会是什么东西，它看起来有点像文档数据库。

# c# - .Net System.Runtime.Caching.MemoryCache - 存储单个集合或单个自定义对象？

> ID：10706240
> 
> 赞同：3
> 
> 时间：2012-05-22T16:34:16.633
> 
> 标签：c#, asp.net, caching, .net-4.0, memorycache

我正在使用 MemoryCache (.net 4.0) 实现缓存，以缓存将由我网站的所有用户使用的全局数据。

**我最初的方法：** 存储一个 KeyedCollection，它将保存一个带有键的 Customer 对象的集合以获取单个对象。此集合最多可包含 250 个此类对象。每当缓存过期时，我都会重建 KeyedCollection 并将其添加到缓存中。

**新方法** 现在，我在想为什么不将每个 Customer 对象直接存储到缓存中，并将 customerid 作为查找键。因此，与单个 KeyedCollection 相比，MemoryCache.Default 最多有 250 个此类 Customer 对象。好处：

1.  效率更高，因为我将直接从缓存中获取 Customer 对象，而无需对 Keyed Collection 执行另一次查找。
2.  我只会在第一次请求时将新的 Customer 对象添加到缓存中。相对于预先构建整个缓存而言，这是一种惰性添加。

关于在性能和其他因素方面使用一种与另一种的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:02:12.347

解决方案将取决于您需要多久将对象作为一个集合进行处理。

收藏为收藏的原因：

*   单独存储每个对象，如果始终填充所有 250 个对象，则会占用更多空间，因为缓存中的每个项目都会有一个关联的`CacheItemPolicy`. 但是，这种情况可能不太可能。
*   Linq不会在集合上提供*强类型*扩展方法。（扩展方法可用，但 MemoryCache 项公开为`KeyValuePair<string, object>`）。

单独存放的原因：

*   您一次只或大部分将要处理一个对象。
*   您希望每个对象根据其自身的使用频率而不是整个集合的使用频率来创建和从缓存中删除。

因此，比较您可能的使用场景，并做出相应的选择。除非您正在编写大量`.Where`,`.Select`等调用或有理由传递整个集合，否则很有可能，单独存储将是更好的选择。

# c# - 如何复制正在用 C# 编写的文件

> ID：10706241
> 
> 赞同：2
> 
> 时间：2012-05-22T16:34:19.997
> 
> 标签：c#, windows-7, file-io, google-drive-api

我目前正在使用 Windows 服务从我们的安全摄像头复制数据，因为它正在写入计算机上的 Google Drive 目录以进行即时上传。这些文件在提供的播放软件创建后可以立即访问，因此我们希望尽可能立即复制数据流，这样即使录制中断（文件是 10 分钟的时间块）我们也有一些视频。

我目前创建了一个可以观看目录的服务，但是我在确定观看这些文件的最佳方式时遇到了一些困难。由于它们连续修改了 10 分钟，所以我会收到大量更改的事件。我希望有一种方法可以捕获初始创建并开始将数据流式传输到第二个文件。我在这里担心的是我需要确保我不会超出录制流。

如果这不可能或相对简单，那么我只需要通过使用最后写入时间的一些逻辑来检测文件何时不再被写入，但我正在寻找有关最佳方法的建议可能。我知道[这里](https://stackoverflow.com/questions/1764809/filesystemwatcher-changed-event-is-raised-twice)提出的解决方案，但我不确定它们是否适用于我正在处理的情况。子目录中有大量文件，因此试图跟踪我拥有的哪些文件不再触发事件可能会变得非常混乱。有没有人对如何执行这两种方法有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:08:00.737

嗯...您可以尝试使用计时器...这样，您可以限制它何时触发

```
private Boolean TimeToCheck=false;
public static void Run()
{   Timer timer=new Timer(2000); //2 seconds
    FileSystemWatcher fileWatch=new FileSystemWatcher();
    fileWatch.Path="DirToWatch";
    fileWatch.Filter="fileToWatch";
    fileWatch.Changed += new FileSystemEventHandler(OnChanged);
    fileWatch.Created += new FileSystemEventHandler(OnChanged);
    fileWatch.Deleted += new FileSystemEventHandler(OnChanged);
    //If you want rename, you could use the rename event as well  fileWatch.Renamed += new RenamedEventHandler(OnRenamed);
    timer.Elapsed += new ElapsedEventHandler(timer_done);
    watcher.EnableRaisingEvents = true;
    timer.Enabled = true; // Enable it
}

private static void OnChanged(object source, FileSystemEventArgs e)
{
    if(TimeToCheck)
    {
        TimeToCheck=false;
        timer.Enabled = false; // Enable it
        //move the files
        timer.Enabled = true; // Enable it
    }

}
private static void OnRenamed(object source, RenamedEventArgs e)
{
    if(TimeToCheck)
    {
        TimeToCheck=false;
        timer.Enabled = false; // Enable it
        //move the files
        timer.Enabled = true; // Enable it
    }
}
private static void timer_done(object sender, ElapsedEventArgs e)
{
    TimeToCheck=true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:43:03.383

你看过[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)对象吗？如果我正确理解了这个问题，它可能是您可能想要使用的东西......如果您将此安全文件放在某个目录中，那么您可以使用 file.copy 将更新的安全日志移动到谷歌驱动文件夹...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:46:40.027

您可以尝试执行此操作，但老实说，这似乎是一种 hack，我怀疑 Windows 是否有任何支持的方法来执行您正在尝试执行的操作。本质上，您是在尝试监听写入流。

听起来您现在使用的任何解决方案都是一个黑匣子，因此直接访问流可能不是一种选择。但是，还有另一种方法。我会研究如何在 Windows 中使用您的应用程序创建虚拟驱动器。这样，您可以让录制应用程序写入您的虚拟驱动器路径，这将允许您随意处理流。这可以包括同时将它们写入两个不同的位置。例如，谷歌驱动器和某种本地存储。

这是关于如何创建虚拟驱动器的 StackOverflow 问题，可以帮助您入门：[C#: Create a virtual drive in Computer](https://stackoverflow.com/questions/56908/c-create-a-virtual-drive-in-computer)

# javascript - 为什么这个脚本永远不会运行？

> ID：10706243
> 
> 赞同：2
> 
> 时间：2012-05-22T16:34:34.773
> 
> 标签：javascript, if-statement, conditional

我有以下 JavaScript 语句，在页面加载时执行：

该变量`u1`使用以下值之一填充：

`BBSLoan|Accept|PPI+No|60Months`
`BBSLoan|Refer|PPI+No|60Months`
`HSBSLoan|Accept|PPI+No|48Months`
`HSBSLoan|Refer|PPI+No|48Months`

我被告知，条件语句中的条件永远不会得到满足——这是真的吗？据我所知，在每个变量上，将返回的索引`indexOf`是`0`？除非我弄错了？

编辑：澄清一下，变量 'u1' 将使用上面列出的 4 个字符串中的任何一个动态填充。这`%pu1=!;`实际上是一个将填充此值的宏。

```
<script language="JavaScript" type="text/javascript">
    var u1 = '%pu1=!;';

    if (u1.indexOf('BBSLoan|Accept') > -1) {
        var pvnPixel = '<img src="http://www.url1.com"/>';
        document.writeln(pvnPixel);
    }
    if (u1.indexOf('BBSLoan|Refer') > -1) {
        var pvnPixel2 = '<img src="https://www.url2.com;"/>';
        document.writeln(pvnPixel2);
    }
    if (u1.indexOf('HSBSLoan|Accept') > -1) {
        var pvnPixel3 = '<img src="https://www.url3.com;"/>';
        document.writeln(pvnPixel3);
    }
</script> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:37:11.353

编辑：澄清一下，变量 'u1' 将使用上面列出的 4 个字符串中的任何一个动态填充。%pu1=!; 实际上是一个将填充此值的宏。

**这个答案是不正确的。稍后将删除它，但将其保留以防止此答案再次弹出。**

```
var u1 = '%pu1=!;'; 
```

u1 的值始终为`'%pu1=!;'`，因为您将其声明为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T12:00:54.667

好的，我终于可以使用`search`而不是`indexOf`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:39:55.457

使用带有默认情况的 switch 语句会更有意义，还是至少提供带有默认值的“else”？

您是否尝试在设置 var u1 后放入调试器语句，并逐步使用客户端（firefox、chrome、IE、safari 都内置了具有单步执行 js 代码的能力的“开发人员工具”）调试器来查看什么u1的值是？

# c++ - 将 Boost 智能指针传递给线程函数

> ID：10706246
> 
> 赞同：1
> 
> 时间：2012-05-22T16:34:49.417
> 
> 标签：c++, multithreading, boost, smart-pointers

我有一种情况，必须将某些对象作为线程回调函数的参数传递。对象是动态创建的，并且在将其传递给线程之后，在该上下文中（在启动线程的方法中）不再需要/使用对象。线程函数现在是唯一应该拥有该对象的上下文。

**假设我想使用一些 Boost 智能指针（而不是向线程传递原始指针），这里哪一个最合适？在这种情况下，最佳做法是什么？**

我真正需要的是`std::auto_ptr`通过复制构造函数的移动语义。我相信这个智能指针非常适合这里，但由于众所周知的原因它已被弃用（我不能依赖`tr1`和`C++11`指针；必须（并且想要）仅使用*Boost ，因为此代码在必须在**Visual*中编译的项目之间共享*工作室 2008 年*和*2010 年*）。

`boost::shared_ptr`是一种选择-我可以按价值传递它，但认为它会矫枉过正。**有没有机会用 来模拟移动语义（以安全的方式）`boost::scoped_ptr`？**我在这里不需要引用计数，因为我没有在两个上下文之间共享对象，我只想将对象的所有权从一个上下文转移到另一个上下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:44:56.983

您可以使用[boost::interprocess::unique_ptr](http://www.boost.org/doc/libs/release/doc/html/interprocess/interprocess_smart_ptr.html#interprocess.interprocess_smart_ptr.unique_ptr)`unique_ptr` ，或者使用[Boost.Move](http://www.boost.org/doc/libs/release/doc/html/move.html)编写自己的。

`boost::interprocess::unique_ptr`在其实现中使用 Boost.Move，Boost.Move 模拟 C++11 移动语义 C++03。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:03:15.007

`shared_ptr`适用于大多数情况（包括您的情况）。您可以使用此模式：

```
shared_ptr<MyT> param = .....;
thread = boost::thread(thread_routine, param);
param.reset(); 
```

...现在只有 thread_routine 持有该对象。

# c++ - 计数器路径错误，pdhAddCounter；windows下的性能监视器

> ID：10706248
> 
> 赞同：2
> 
> 时间：2012-05-22T16:34:53.670
> 
> 标签：c++, windows, performancecounter

我正在尝试使用 pdh.h 计算 windows 2008 服务器上的进程数。

```
 CONST PWSTR COUNTER_PATH = L"\\System\\Processes";
    HQUERY hQuery = NULL;
    HCOUNTER hCounter;
    PDH_STATUS pdhStatus = ERROR_SUCCESS;

    pdhStatus = PdhOpenQuery(NULL, 0, &hQuery);
    pdhStatus = PdhAddCounter(hQuery, (LPCSTR)COUNTER_PATH, 0, &hCounter); 
```

我从[这里](http://technet.microsoft.com/en-us/library/cc737309%28v=ws.10%29)获得了 COUNTER_PATH 名称，示例可以在[这里](http://technet.microsoft.com/en-us/library/aa373228%28v=vs.85%29.aspx)找到。但不知何故，我在 PdhAddCounter 收到[0xC0000BC0 (PDH_CSTATUS_BAD_COUNTERNAME)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373046%28v=vs.85%29.aspx)错误消息。任何人都可以接受我犯的任何错误吗？我不确定我在这里缺少什么。COUNTER_PATH 有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:45:49.977

你正在铸造一个`COUNTER_PATH`你不应该做的事情。`LPCSTR``PdhAddCounter`

`PdhAddCounter`的第二个参数是 a `LPCTSTR`，与 相同`CONST PWSTR`。

# c# - 该应用程序要求首先在 GAC 中安装 Assembly Office 版本 14.0.0.0

> ID：10706249
> 
> 赞同：1
> 
> 时间：2012-05-22T16:34:54.713
> 
> 标签：c#, .net, interop

我有一个使用 Word 和 Excel 互操作引用的应用程序。我有一份 MS Office 2003 并且客户端机器使用 Office 2007，当客户端尝试安装/运行应用程序时，我会收到此提示。

有几篇关于此的文章，但是解决方案似乎特定于特定问题，或者只是未解决。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:43:53.197

*必须安装*引用的 Office PIA ，因此需要此特定程序。

如果未安装正确版本的 PIA，则在运行*任何版本的 Office（例如 2007）时都会发生这种情况。*在任何情况下，如果开发计算机具有 Office 2003*和*Office 14 PIA，则不会发生此错误，因为可以在开发环境中找到“版本 14”PIA——即使没有安装 Office 2010 本身。

请参阅[Office 2010 PIA 可再发行组件](http://www.microsoft.com/en-us/download/details.aspx?id=3508)。我认为“版本 14”PIA 可能会随 Office 2010 自动安装，但我不确定。

请记住，使用特定 Office 版本的包装 COM*不*支持的 PIA 方法/属性将`COMException`在运行时引发。也就是说，即使 Office 2003 环境安装了 2010 PIA，使用 2007+ 功能也可能会导致其他运行时问题。

快乐编码。

# c# - 棱镜 CRM 技术

> ID：10706250
> 
> 赞同：0
> 
> 时间：2012-05-22T16:34:54.507
> 
> 标签：c#, wpf, prism, unity-container, composite

我们计划使用 Prism.v4 在 WPF 中开发轻量级 CRM（客户、订单、资源等）应用程序。我们已经构建了一个类似于outlookbar 的用户控件并使用了微软的功能区。存在其他区域，但这些是此方案的基本区域。

此外，还存在一个包含所有模型、存储库、接口等的基础设施 dll。

经过一番头脑风暴，我们得出以下事实：

客户模块不需要知道订单模块（订单模块知道客户模型）。但我们希望 usercomfort 加载属于特定客户的所有订单。因此，在客户详细信息模式（客户功能区选项卡和客户前景栏项目被注入）中，我们想要一个功能区按钮从“客户详细信息”导航到“此客户订单”。

问题是：如何在不破坏松耦合的情况下实现这一目标？

我们的方法：给customer-ribbontab 一个区域，供其他模块与客户交互。因为 ordermodule 明确地了解客户（基于我们数据模型中的 1:n 关系）。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:26:03.337

我认为通常情况下，打开客户的订单按钮应该来自客户模块，而不是订单模块。单击此按钮可以...

*   使用类似 /ShowCustomerOrders?CustID=1234 的 URI 发出导航请求，订单模块会理解并获取该请求
*   打开一个包含名称如“CustomerOrders”的区域的视图，然后将客户 ID 插入到区域上下文中。Orders 模块将使用视图发现注册其客户订单视图。

这些选项都不需要添加对 OrderModule.dll 的引用，因此这不会增加耦合。但是，如果缺少 Orders 模块，则导航将不执行任何操作，或者视图将变为空白。

如果您想在订单模块不存在时避免按钮出现，那么您可以改为让订单模块通过视图发现将按钮添加到客户功能区。然后，它必须从区域上下文中获取当前客户的客户 ID，这将为其提供足够的信息，以便在单击时能够打开正确的客户订单视图。

# c# - Quartz.NET ADO.net 数据库配置

> ID：10706254
> 
> 赞同：4
> 
> 时间：2012-05-22T16:35:10.327
> 
> 标签：c#, .net, ado.net, config, quartz.net

这应该是一个非常简单的问题。我为 Quartz.NET 创建了数据库并填充了所有表和内容，现在我只是尝试配置我的项目以与数据库交互。我可以处理它的编码部分，我只是不知道要使用什么配置文件..

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T18:32:55.063

你有应用程序配置文件吗？如果您的应用程序是 windows 窗体或 windows 服务应用程序，您可以手动添加应用程序配置文件（在解决方案资源管理器中右键单击项目 -> 添加新项目并选择“应用程序配置文件”）。它最终会在您的项目中显示为 App.Config 文件，当您构建项目时，该文件将被复制到输出文件夹，并将重命名为“yourappname.exe.config”。

添加配置文件后，您需要将石英配置放入该文件。例如：

```
 <?xml version="1.0"?>
    <configuration>
        <configSections>
            <section name="quartz" type="System.Configuration.NameValueSectionHandler, System, Version=1.0.5000.0,Culture=neutral, PublicKeyToken=b77a5c561934e089" />
            ...
            other lines here
            ...
        </configSections>
          ...
          ...
          ...
        <quartz>

            <add key="quartz.scheduler.instanceName" value="TestQuartzServer" />
            <add key="quartz.scheduler.instanceId" value="instance_one" />
            <add key="quartz.threadPool.threadCount" value="10" />
            <add key="quartz.threadPool.threadPriority" value="Normal" />
            <add key="quartz.jobStore.misfireThreshold" value="60000" />
            <add key="quartz.jobStore.type" value="Quartz.Impl.AdoJobStore.JobStoreTX, Quartz" />
            <add key="quartz.jobStore.useProperties" value="false" />
            <add key="quartz.jobStore.dataSource" value="default" />
            <add key="quartz.jobStore.tablePrefix" value="QRTZ_" />
            <add key="quartz.jobStore.clustered" value="true" />
            <add key="quartz.jobStore.lockHandler.type" value="Quartz.Impl.AdoJobStore.SimpleSemaphore, Quartz" />
            <!-- point this at your database -->
            <add key="quartz.dataSource.default.connectionStringName" value="ConnectionStringName" />
            <add key="quartz.dataSource.default.provider" value="SqlServer-20" />
        </quartz>
    ...
    <connectionStrings>
        <add name="ConnectionStringName" connectionString="Data Source=...; etc." providerName="System.Data.SqlClient" />
    </connectionStrings>
</configuration> 
```

# java - 超类的Java同步私有方法

> ID：10706256
> 
> 赞同：3
> 
> 时间：2012-05-22T16:35:24.153
> 
> 标签：java, methods, synchronization, subclass

我有从 Base 继承的 A 类和 B 类。

Base 有一个私有方法。A 和 B 可能同时执行此方法。

所以我想同步那个方法。如果我只是在签名中添加“同步”关键字，那会使 A 和 B 的执行同步（共享同一个锁）吗？还是我需要生成一个静态锁对象...？

抱歉，有点糊涂……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T16:43:50.803

如果您的代码看起来有点像下面的示例，那么它不是线程安全的，您需要包含某种形式的同步以确保对私有方法的调用`increment`是原子的并确保可见性。在那个简单的例子中，`getNewCounter`同步就足够了。使用锁定对象也可以。

```
public class Base {
    private int counter;

    private void increment() {
        counter++;
    }
    protected int getNewCounter() {
        increment();
        return counter;
    }
}

public class A extends Base {
    public int aMethod() {
        return getNewCounter();
    }
}

public class B extends Base {
    public int anotherMethod() {
        return getNewCounter();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T16:37:23.590

> Base 有一个私有方法。A 和 B 可能同时执行此方法。

派生类不继承私有方法或字段，因此您的问题的答案是否定的。

编辑根据评论：

如果您有两个对象 A 和 B，并且他们正试图操作 Singleton 对象 C，那么在这种情况下，应该有同步的是 C，而不是 A 和 B。

多线程应用程序遵循的一般规则是，每个需要防止并发访问以保持稳定状态的类都有责任正确使用同步，您不应该也不能期望方法的调用者访问对象状态同步方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T16:49:55.590

我从您的帖子中可以理解的是，您有一个带有私有方法的基类。您正在创建此基类的不同对象或从基类派生的类。

现在，如果您使私有方法同步它不会使该方法的执行同步，因为您有多个对象。实例级锁仅针对每个对象。

例如，您有 Test 类的 ObjectA 和 ObjectB，这两个对象都可以同时执行类 Test 中定义的私有方法，比如 myMethod()，即使它是同步的，因为锁定在对象上。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:13:11.707

我所知道的是，私人成员不会被继承。所以A类和B类不能通过继承或者创建基类的对象来调用这个私有方法，直到基类中有一个公共方法可以访问这个私有方法。

# asp.net - 仅使 web 服务异常显示消息

> ID：10706258
> 
> 赞同：0
> 
> 时间：2012-05-22T16:35:35.097
> 
> 标签：asp.net

我有一个 web 服务，由一些 asp.net 应用程序使用。当 web 服务中发生异常时，我想通过执行 someLabel.text = ex.Message 来显示异常消息。出于某种原因，当我这样做时，我得到的整个描述如下，而不仅仅是消息。任何人都知道如何做到这一点而不必在应用程序中拆分它？

`System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.Exception: This username is already taken. at WSRegistration.Service1.RegisterUser(String username, String psswd) in C:\Users\Korax\documents\visual studio 2010\Projects\Excercise2\WSRegistration\UserRegistration.asmx.cs:line 41 --- End of inner exception stack trace ---`

# sql-server-2008-r2 - 视图名称如何与视图定义不同步？

> ID：10706260
> 
> 赞同：0
> 
> 时间：2012-05-22T16:35:43.140
> 
> 标签：sql-server-2008-r2, system-tables

![在此处输入图像描述](../Images/eb5fe9d53baa0562732c8453329208f3.png)

我在我的系统中追踪到这个异常的一个错误——至少它是我系统中的一个异常，它有 15 个目录，具有相似但不相等的模式。

是什么导致 [INFORMATION_SCHEMA].[VIEWS] 中的 [TABLE_NAME] 与 [VIEW_DEFINITION] 中的值不同？

这让我觉得我对 SQL Server 中的视图或系统表一无所知......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T16:38:42.977

如果您已重命名视图，则名称会更改，但定义不会更改。

您应该将其作为`DROP`/`CREATE`或`ALTER`脚本来执行，而不是通过右键单击或使用`sp_rename`.

这实际上是所有模块的预期行为。这是一个使用简单存储过程的快速测试：

```
CREATE PROCEDURE dbo.proc_foo
AS
    SELECT 1;
GO

-- rename it to proc_bar

EXEC sys.sp_rename N'dbo.proc_foo', N'proc_bar', N'OBJECT';
GO

-- check the definition from various sources

SELECT od = OBJECT_DEFINITION(OBJECT_ID(N'dbo.proc_bar')),
    info_s = (SELECT ROUTINE_DEFINITION FROM INFORMATION_SCHEMA.ROUTINES 
              WHERE ROUTINE_NAME = N'proc_bar' AND SCHEMA_NAME = N'dbo'),
    sql_m = (SELECT definition FROM sys.sql_modules 
             WHERE [object_id] = OBJECT_ID(N'dbo.proc_bar')); 
```

结果：

```
od                             info_s                         sql_m
-----------------------------  -----------------------------  -----------------------------
CREATE PROCEDURE dbo.proc_foo  CREATE PROCEDURE dbo.proc_foo  CREATE PROCEDURE dbo.proc_foo
AS                             AS                             AS
    SELECT 1;                      SELECT 1;                      SELECT 1; 
```

无论如何，你不应该使用`INFORMATION_SCHEMA`...

*   [针对 INFORMATION_SCHEMA 视图的案例](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)

# ios - 应用程序未通过协同设计验证。签名无效，包含不允许的权利

> ID：10706263
> 
> 赞同：7
> 
> 时间：2012-05-22T16:36:06.880
> 
> 标签：ios, xcode4.3

当我尝试为我的应用程序创建存档时，我成功了，但有一个奇怪的警告：

```
warning: Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011)
Executable=/Users/Malek/Library/Developer/Xcode/DerivedData/Fontenay-sous-Bois-elmujlurzvtkqdctznqivfpchsfq/Build/Intermediates/ArchiveIntermediates/Fontenay-sous-Bois/InstallationBuildProductsLocation/Applications/Fontenay-sous-Bois.app/Fontenay-sous-Bois
AssertMacros: message,  file: /SourceCache/codesign_wrapper_Sim/Security-1245/codesign_wrapper/codesign_wrapper.c, line: 495
AssertMacros: profile,  file: /SourceCache/codesign_wrapper_Sim/Security-1245/codesign_wrapper/codesign_wrapper.c, line: 904
codesign_wrapper-0.7.10: Failed to load provision profile from: /Users/Malek/Library/Developer/Xcode/DerivedData/Fontenay-sous-Bois-elmujlurzvtkqdctznqivfpchsfq/Build/Intermediates/ArchiveIntermediates/Fontenay-sous-Bois/InstallationBuildProductsLocation/Applications/Fontenay-sous-Bois.app/embedded.mobileprovisi
 - (null) 
```

当我使用 Xcode 4.2 时，一切都很顺利，但是自从我升级到 Xcode 4.3 后，我一直看到这个警告，请帮助 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T14:24:14.960

看来您可能需要从 sim/device 中删除，从 Xcode 中清理并重建。你试过这个吗？

如果是这样，请转到管理器，点击项目按钮，找到您的项目并点击按钮以删除派生数据。

从那里，确保您在 App Build Settings 和 Target Build Settings 中选择了正确的分发配置文件。有时这些会由于某种原因不同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T17:21:32.020

检查目标（而不仅仅是项目）是否设置了正确的代码签名身份以进行发布

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-21T05:42:57.777

还请确保您的代码没有在未经授权的目录中。例如（在 usb.etc 中）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-18T23:43:31.800

确保在左上角选择“iOS设备”而不是“模拟器”

# jquery - jquery在另一个激活时切换一个div

> ID：10706264
> 
> 赞同：2
> 
> 时间：2012-05-22T16:36:14.550
> 
> 标签：jquery

我真的坚持我的代码，它工作正常，除了一件事，我需要关闭所有打开的 div，当我单击其他 div 打开时，这是我的代码：

```
function readFaq() {

$('.find-faq-inner h3').prepend('<span id="spanfaq" class="faq-open"></span>');

$('.find-faq-inner h3').each(function () {
    var tis = $(this), state = false;
    var answer = tis.next('div').hide().css('height', 'auto').slideUp();

    tis.click(function () {
        state = !state;
        answer.slideToggle(state);
        tis.toggleClass('active', state);

        if (state == true) {
            tis.find('#spanfaq').removeClass('faq-open');
            tis.find('#spanfaq').addClass('faq-close');
        }
        else {
            tis.find('#spanfaq').removeClass('faq-close');
            tis.find('#spanfaq').addClass('faq-open');
        }

    });
    });
}

<div class="find-faq-inner">
    <div class="text">
    <h3>FAQ1</h3>
    <div>
    text of faq
    </div>
    </div>
</div> 
```

任何想法都会有所帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:46:25.920

```
function readFaq() {

$('.find-faq-inner h3').prepend('<span id="spanfaq" class="faq-open"></span>');

$('.find-faq-inner h3').each(function () {
    var tis = $(this), state = false, answer = tis.next('div').hide().css('height', 'auto').slideUp();
    tis.click(function () {
        state = !state;

       $('.find-faq-inner .text div').hide();// This will hide all the divs

        answer.slideToggle(state);
        tis.toggleClass('active', state);

        if (state == true) {
            tis.find('#spanfaq').removeClass('faq-open');
            tis.find('#spanfaq').addClass('faq-close');
        }
        else {
            tis.find('#spanfaq').removeClass('faq-close');
            tis.find('#spanfaq').addClass('faq-open');
        }

    });
    });
} 
```

在上面的函数中我添加了 `$('.find-faq-inner .text div').hide();`

这将隐藏 div 中的所有`find-faq-inner`div，在您的代码中相应地使用它。

为了更安全，您还可以使用

`$('.find-faq-inner .text > div').hide();`

它只会隐藏那些是类 div 的直接子级的 div`text`

# ios - 基于位置追踪的iOS全时后台服务

> ID：10706265
> 
> 赞同：4
> 
> 时间：2012-05-22T16:36:16.010
> 
> 标签：ios, cocoa-touch, networking, background

我目前正在编写一个应用程序，它依赖于位置跟踪并将有关位置的数据发送到服务器。然而，问题是它必须 24/7 运行，目前我遇到了每 2-3 天发生一次的随机崩溃。为了使应用程序在后台持续运行，我所做的是将 NSTimer 放在 applicationDidEnterBackground 方法旁边的 beginBackgroundTaskWithExpirationHandler 方法中。计时器每分钟执行一次并停止/启动定位服务。

[这是一个示例崩溃日志](http://pastebin.com/u7WJbgkg)

代码基本上是这样的：

```
UIApplication *app = [UIApplication sharedApplication];
__block UIBackgroundTaskIdentifier bgTaskId = 0;

bgTaskId = [app beginBackgroundTaskWithExpirationHandler:^{
    NSTimer *t = [NSTimer scheduledTimerWithTimeInterval: 1 * 60.0 target: self selector: @selector(onTick) userInfo: nil repeats: YES];
    [t fire];

    if (bgTaskId != UIBackgroundTaskInvalid){
        [app endBackgroundTask: bgTaskId];

        bgTaskId = UIBackgroundTaskInvalid;
    }
}]; 
```

我使用*GCDAsyncSockets*进行连接，每次调用的超时时间约为 30 秒。

我真的没有想法，崩溃发生的原因可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T19:39:09.103

您的计时器可能在任务无效后启动（在`[UIApplication sharedApplication].backgroundTimeRemaining`达到 0.

问题是你**不能**让应用程序*在后台持续*运行。如果你想每隔一段时间执行一次代码，你唯一的选择就是使用后台位置 API，设置你的应用在其 plist中使用*位置后台模式。*您将获得`CLLocationManagerDelegate`回调，并且在调用这些方法时您有*时间*做一些工作。

请参阅有关背景模式的 Apple 文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

和位置意识手册：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/LocationAwarenessPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009497)

# algorithm - 重量和数值为正时的背包？

> ID：10706269
> 
> 赞同：1
> 
> 时间：2012-05-22T16:36:24.317
> 
> 标签：algorithm

当重量和值为正时，背包最准确的算法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:40:30.687

不确定您使用的是什么语言，但维基百科有一个很好的信息和算法页面来解决它。如果您想要更多示例代码来了解如何执行此操作，请查看此站点：[http](http://rosettacode.org/wiki/Knapsack_problem/Unbounded/Python_dynamic_programming) ://rosettacode.org/wiki/Knapsack_problem/Unbounded/Python_dynamic_programming （这都是在 python 中，但还有更多语言）。

基本上这取决于你在做什么，但最常见的解决方法是动态编程。

# html - 如果检测到移动设备，则 Html 加载 css

> ID：10706270
> 
> 赞同：2
> 
> 时间：2012-05-22T16:36:46.193
> 
> 标签：html, css, mobile

```
<link media="only screen and (min-device-width : 320px) and (max-device-width : 480px)" href="smartphone.css" type= "text/css" rel="stylesheet" />
<link media="only screen and (-webkit-min-device-pixel-ratio : 1.5), only screen and (min-device-pixel-ratio : 1.5)" href="iphone.css" type= "text/css" rel="stylesheet" /> 
```

我做对了吗？或者有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:00:03.230

就像 Cole 提到的，您可以检查 userAgent。这是一些可用于检测 userAgent 是否为 iphone 的 javascript。（[来源](http://css-tricks.com/snippets/javascript/redirect-mobile-devices/)）

```
<script language=javascript>
<!--
if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i))) {
//Change the css
}
-->
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:44:26.747

您可以查看 te 用户代理并使用 php.ini 加载适当的用户代理。但是，使用它会将您限制为 320-480。我认为黑莓就像 240x320（至少是 9xxx 系列）

# javascript - 意外的 javascript 日期行为

> ID：10706272
> 
> 赞同：3
> 
> 时间：2012-05-22T16:36:52.170
> 
> 标签：javascript

我有以下代码：

```
var newDate=new Date('05/22/2012');
var month=newDate.getMonth();
var day=newDate.getDate()+(-2);
var year=newDate.getYear();
document.write(month+'/'+day+'/'+year); 
```

我预计它会返回 '05/20/2012' 但它会返回 '04/20/2012'

这对我来说毫无意义 - 有人可以帮助我了解发生了什么以及如何获得正确的响应吗？

感谢您的关注！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T16:38:31.907

`.getMonth()`是从零开始的。如`0=January`和`11=December`

尝试

```
var month=newDate.getMonth() + 1; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T16:38:23.353

[`.getMonth()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getMonth)是从零开始的。一月对应0，二月对应1，以此类推。

截至本问题提出时，月份是 May，因此`.getMonth()`返回`4`。

你想要`.getMonth() + 1`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-22T16:40:23.303

```
getMonth() + 1 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getMonth](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getMonth)

# c# - 谜团：4 个字节应该代表一个日期，但如何？

> ID：10706275
> 
> 赞同：2
> 
> 时间：2012-05-22T16:37:02.917
> 
> 标签：c#, smartcard, winscard

所以我已经能够从德国官方智能卡中读取一些不安全的值。它适用于数字和字符串，但我无法理解如何解释日期。

我想阅读的日期被指定为 4 字节日期，如规范中所示：http: [//imgur.com/3jU8k](http://imgur.com/3jU8k)

我读到的四个字节是：

```
0x4f 0x41 0x8d 0x00 (hex)
0100 1111 0100 0001 1000 1101 0000 0000 (binary) 
```

并且应该代表这个日期：20.02.2012 二进制：

```
20 - 0001 0100
02 - 0000 0010
2012 - 0111 1101 1100 
```

另一个：

```
0x58 0xAA 0x31 0x7f (hex)
0101 1000 1010 1010 0011 0001 0111 1111 (binary) 
```

应该代表：19.02.2017

```
19 - 0001 0011
02 - 0010
2017 - 0111 1110 0001 
```

请帮我解决这个编码谜题

* * *

卡上的数据可以通过商业软件读取，所以我想我得到的原始数据可以以任何方式使用。

对于感兴趣的人：供应商有一个非常庞大的规范，我已经搜索了很多次（http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:32002R1360:DE:NOT语言）卡片的结构在第 119 页首次提到

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T16:40:16.570

链接的规范说这`cardIssueDate` 是类型`TimeReal`（第 2.20 节）。相同的规范定义为自 1970-01-01 00:00:00 GMT（即[UNIX 时间](http://en.wikipedia.org/wiki/Unix_time)`TimeReal`）以来的秒数，编码为[ASN.1](http://en.wikipedia.org/wiki/ASN.1) INTEGER（第 2.110 节）。

# javascript - 阅读顺序不正确

> ID：10706280
> 
> 赞同：0
> 
> 时间：2012-05-22T16:37:14.557
> 
> 标签：javascript, accessibility

我正在评估一些发送给我的代码，但我不明白为什么会这样。

**[编辑]：**代码是由电子学习软件 Lectora 生成的，所以没有任何事情是手工完成的。丑陋的内联代码不能被塞进样式表中。

**[编辑 2]** *buttonxxx*是 lectora 中的一些功能，可让您制作不可见的热点，有点像图像地图。我没有这个软件，而且制作它的人也不太懂技术。

HTML

```
<p  style="margin-left:0px;text-indent:0px;line-height:1.160;margin-top:0px;margin-bottom:0px;text-align:left;" >
<a href="##Action 7515"  ><span class="text3708Font1"  >Table of 
Contents</span ></a ><a href="##Action 7515"  ><span class="text3708Font2" style="background-color:transparent" >
</span ></a ></p >
<p  style="margin-left:0px;text-indent:0px;line-height:1.160;margin-top:0px;margin-bottom:0px;text-align:left;" >
<span class="text3708Font3" style="background-color:transparent" >
&nbsp;</span ></p >
<p  style="margin-left:0px;text-indent:0px;line-height:1.160;margin-top:0px;margin-bottom:0px;text-align:left;" >
<a href="##Action 3710"  ><span class="text3708Font4"  >Edgar's 
Dilemma</span></a ><span class="text3708Font5" style="background-color:transparent" >
</span ></p > 
```

* * *

我认为适用的 JavaScript。页面大约有530行JS。

```
button6458 = new ObjButton('button6458','table of contents',1,69,70,37,1,8,'div')
button6458.setImages('transbtn.gif',null,null,'images/')
button6458.onUp = button6458onUp
button6458.hasOnUp = true
button6458.capture=4
button6458.build()

button6459 = new ObjButton('button6459','course beginning story',2,112,67,36,1,9,'div')
button6459.setImages('transbtn.gif',null,null,'images/')
button6459.onUp = button6459onUp
button6459.hasOnUp = true
button6459.capture=4
button6459.build() 
```

但是，如果我使用屏幕阅读器浏览它，它会被宣布为：

> 目录 [link]、[link]（内容中 s 后面的空格）、Edgar's Dilemma [link]、[link]（edgar 与什么是 508 之间的空格中的空格字符）、目录（现已公布作为“转到目录 [链接]”），埃德加的困境（现在宣布为“转到课程开始故事 [链接]”）

关于为什么要读取锚点的任何想法，那么 javascript 会很棒。

* * *

## **解决方案：**

大约到源代码的一半，写了一些JS。这使得第二组链接通过上面的 JS 代码块。如果我们去掉垃圾，源代码基本上变成：

```
<a href="#">Table of contents</a>
<a href="#">&nbsp;</a>
<a href="#">Edgar's Delimma</a>
<a href="#">go to Table of contents</a>
<a href="#">go toEdgar's Delimma</a> 
```

我还没有弄清楚它是如何`&nbsp;`创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:24:39.280

第一个块中的源代码可以简化为

```
<p><a href="##Action 7515">Table of Contents</a><a href="##Action 7515"></a></p>
<p>&nbsp;</p>
<p><a href="##Action 3710">Edgar's Dilemma</a></p > 
```

并且您的输出似乎正在剥离`<p>&nbsp;</p>`元素，因为没有要读取的内容，但它假设“目录”链接之后的链接很重要并保留了它。因为没有文本来形成链接，所以它正在尽力而为。

我怀疑在“埃德加的困境”之后宣布的链接也有类似的编码。

代码中应该有一个空链接的*原因*可能是Lectora或将电子学习包放在一起的人。鉴于源代码中文本样式的更改，可能是因为“目录”链接末尾的字体更改 - Microsoft Word 可以做到这一点，当段落标记保留已被覆盖的字体设置时文本本身。

# ruby-on-rails - 在 ruby on rails 3.2 上使用条件过滤数组结果

> ID：10706290
> 
> 赞同：2
> 
> 时间：2012-05-22T16:37:57.910
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, sunspot

我的**posts_controller.rb**中有这个动作：

```
def index
   @search = Post.solr_search do |s|
     s.fulltext params[:search]
     s.keywords params[:search]
     s.order_by :created_at, :desc
     s.paginate :page => params[:page], :per_page => 1

   end
   @posts = @search.results
   ).page(params[:page]).per(20)
    respond_to do |format|
    format.html # index.html.erb
    format.xml  { render :xml => @posts }
    format.json { render :json => @posts }
  end 
 end 
```

实例变量`@posts`是一个数组。

后模型有一个属性`language`。

我只想在数组中`@posts`发布帖​​子`@post.language == "en"`

**我正在使用 mongoid odm。**

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T17:05:59.173

可数是你的答案！

```
@en_posts = @posts.find_all { |post| post.language == 'en' } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:08:04.087

问题已解决。我已将此条件添加到太阳黑子：

```
 if params[:locale].present?
        s.with(:language, params[:locale])
       else
        params[:locale] = I18n.locale
        s.with(:language, params[:locale])
       end 
```

所以方法是：

```
def index
   @search = Post.solr_search do |s|
     s.fulltext params[:search]
     s.keywords params[:search]
     s.order_by :created_at, :desc
     s.paginate :page => params[:page], :per_page => 1

         if params[:locale].present?
           s.with(:language, params[:locale])
          else
           params[:locale] = I18n.locale
           s.with(:language, params[:locale])
         end

   end
   @posts = @search.results
   ).page(params[:page]).per(20)
    respond_to do |format|
    format.html # index.html.erb
    format.xml  { render :xml => @posts }
    format.json { render :json => @posts }
  end 

 end 
```

非常感谢你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:46:20.960

如果您想将其范围限定在`@posts`您可以执行以下操作：

```
@posts.where(language: 'en') 
```

或者以一般的方式

```
Post.where(language: 'en') 
```

# wordpress - 我可以在一个网站上有 2 个购物车，分别接受 2 种不同的货币吗？

> ID：10706291
> 
> 赞同：0
> 
> 时间：2012-05-22T16:37:58.563
> 
> 标签：wordpress

我们正在改造我们的网站。我们在美国和欧洲销售产品。起初，我们希望美元和英镑的两个价格并排显示，但整数的硬编码是不允许的。开发人员建议使用嗅探器识别适当 IP 的重复 .com 和 .uk 站点。我的合作伙伴不想重复 2 个站点的成本。那么是否有可能将两个单独的购物车连接到一个站点，这些购物车采用不同的货币？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:01:09.693

您是使用电子商务插件还是构建自己的插件？如果您使用第三方解决方案，例如 WooCommerce，它们通常会提供支持多种货币的功能。例如[http://www.woothemes.com/extension/currency-converter-widget/](http://www.woothemes.com/extension/currency-converter-widget/)并且那个可以进行实时货币查找，因此您不必对价格进行硬编码。

# django - 如何将 HTML 输入到 Django 表单字段的帮助文本中？

> ID：10706296
> 
> 赞同：31
> 
> 时间：2012-05-22T16:38:21.930
> 
> 标签：django, django-forms

我试图在我的 Django 表单中为选择字段生成帮助文本

```
i_agree = forms.CharField(label="", help_text="Initial to affirm that you agree to the <a href='/contract.pdf'>contract</a>.", required=True, max_length="4") 
```

但是，原始 HTML 在帮助文本中呈现为输出。如何将 HTML 输入到 Django 表单字段的帮助文本中？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-22T16:45:55.957

您可以[`mark_safe`](https://docs.djangoproject.com/en/2.0/ref/utils/#django.utils.safestring.mark_safe)在模型中使用来指示 html 是安全的，它应该被解释为：

```
from django.utils.safestring import mark_safe

i_agree = forms.CharField(label="", help_text=mark_safe("Initial to affirm that you agree to the <a href='/contract.pdf'>contract</a>."), required=True, max_length="4") 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-22T17:31:04.720

如果您自己遍历表单，您也可以在模板中将其标记为安全：

```
{% for f in form %}
    {{f.label}}{{f}}{{f.help_text|safe}}    
{%endfor%} 
```

这是在模板中这样做的一个非常简单的示例。你需要做更多的事情才能让它看起来不错。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-16T15:56:27.610

您可以使用外部文件来提高可维护性和关注点分离：

1.  修改表单的`__init__()`方法；
2.  之后`super(MyForm, self).__init__(*args, **kwargs)`;
3.  将结果分配`render_to_string()`给`self.fields['my_field'].help_text`。

## *表格.py*

从 django.template.loader 导入 render_to_string

```
class MyForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        # Only in case we build the form from an instance,
        if 'instance' in kwargs and kwargs['instance'].nature == consts.RiskNature.RPS:
            self.fields['my_field'].help_text = render_to_string('components/my-template.html')
            #                      ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ 
```

## *我的模板.html*

```
{% load i18n %}
<table class="table table-bordered">
    <tr>
        <th>{% trans 'Externe' %}</th>
    </tr>
    <tbody class="text-muted">
        <tr>
              <td>{% trans "En lien avec les relations de travail" %}</td>
          </tr>
          <tr>
              <td>{% trans "-" %}</td>
          </tr>
    </tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-11-07T10:37:09.200

使用带有只读的 textarea 标签

```
<textarea readonly> <p>stuff</p> </textarea> 
```

# c# - Javascript window.location 在 MVC3 中不起作用

> ID：10706301
> 
> 赞同：1
> 
> 时间：2012-05-22T16:38:38.080
> 
> 标签：c#, javascript, jquery, asp.net-mvc, asp.net-mvc-3

我有一个通过`ActionResult`调用呈现的页面，该调用`EntityIndex`将`int id`其作为参数并加载该实体。

在此视图中，用户可以从下拉列表中选择其他相关实体，并且应通过将下拉列表中的选定 ID 发送到`EntityIndex`带有新`ID`.

我在下拉列表中使用 jQuery 更改事件来导航和重新加载页面：

```
$("#RelatedEntity").change(function () {
    window.location = '@Url.Action("EntityIndex", new {id = ""})' + '/' + $(this).val();
}); 
```

这是行动

```
public ActionResult EntityIndex(int id) {
    ... gets entity by id here ...
    return View(model);
} 
```

击中时该操作工作正常，但上面的 jQuery 行失败并出现错误：

```
http://localhost:1798/Entity/EntityIndex/@Url.Action("EntityIndex", new {id = ""})/539 
```

出于某种原因，`window.location`触发将`@Url.Action`操作视为字符串而不是导航到的操作......有什么问题`Url.Action`导致它无法正常运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:41:39.043

你的 JQuery 有点*偏离*。使用默认路由并不指定 ID 将生成：

> /控制器/动作/

所以你需要做的就是把你的价值放在最后。试试这个：

```
$("#RelatedEntity").change(function () {
    window.location = '@Url.Action("EntityIndex")' + $(this).val();
}); 
```

应该给你（假设值为23）：

> /控制器/动作/23

# java - 禁用类名匹配模式的 Checkstyle 规则

> ID：10706304
> 
> 赞同：0
> 
> 时间：2012-05-22T16:39:08.060
> 
> 标签：java, checkstyle

对于以“**Setup”结尾的类，ClassName 的默认格式规则应替换为允许内部类名称以小写字母开头的规则 - 如果它扩展了另一个类。我怎样才能做到这一点？

一个具体的例子：

```
class MyExampleSetup {

  // valid, turn off ClassName check
  static class myInnerClass extends MyInnerClass() {....}
  // valid, normal class name Check
  static class MyOtherInnerClass () {....}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:28:59.683

不幸的是，这是不可能的。您真正要求的是修改一次检查的行为（`TypeName`）。实现这种事情的唯一方法是实现您自己的[自定义检查](http://checkstyle.sourceforge.net/writingchecks.html)。

[（就像之前的海报一样，我必须敦促您考虑为背景魔法使用注释，而不是依赖命名约定。但这当然不是您的问题。）]

# sql - 永远运行的交叉应用功能

> ID：10706310
> 
> 赞同：1
> 
> 时间：2012-05-22T16:39:19.907
> 
> 标签：sql, sql-server, tsql

我在存储过程中使用交叉应用将日期范围扩展到单个日期。

```
select *
from #tbl_tempOutPut as st
cross apply dbo.explodeDates(st.startdate,st.enddate) as dt 
```

表 #tbl_tempOutPut 如下所示：

```
ID  Des startdate   enddate     kindex      
A   att 2003-12-04  2004-01-03  1
A   att 2004-01-04  2004-02-03  1 
```

函数[dbo.explodeDates](https://stackoverflow.com/questions/1378593/get-a-list-of-dates-between-two-dates-using-a-function/1378712#1378712)是以前接受的答案。

我的问题是查询永远运行并且不返回。

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:36:23.860

重写`explodeDates`为内联表值函数。这几乎肯定会产生巨大的影响。

```
CREATE FUNCTION dbo.explodeDates (
  @StartDate    char(10),
  @EndDate      char(10)
) RETURNS TABLE AS RETURN SELECT
  CONVERT(datetime,@StartDate)+n-1 AS [Date]
  FROM Numbers
  WHERE Number <= DATEDIFF(day,@StartDate,CONVERT(datetime,@EndDate)+1) 
```

# merge - 我想将两个表合并为一个 phpmyadmin

> ID：10706311
> 
> 赞同：1
> 
> 时间：2012-05-22T16:39:25.533
> 
> 标签：merge, phpmyadmin

我想将两张表合并为一张表。

第一个表是图像，列是；id、item、name、path、category、sub_category、designer

第二个表是items，列是：item，description material，size，color，description

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:46:03.410

查看以下内容： http: [//dev.mysql.com/doc/refman/5.0/en/insert-select.html](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

从网站：

```
INSERT INTO tbl_temp2 (fld_id)
  SELECT tbl_temp1.fld_order_id
  FROM tbl_temp1 WHERE tbl_temp1.fld_order_id > 100; 
```

# sencha-touch - stopEvent() 不适用于拖动事件

> ID：10706312
> 
> 赞同：1
> 
> 时间：2012-05-22T16:39:38.140
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个容器，我在它的配置中用它制作了可拖动的容器：

```
draggable: {
  direction: 'horizontal',
  constraint: {
      min: { x: 0, y: 0 },
      max: { x: parseInt(screen.width-57), y: 0 }
  },
  listeners: {
    dragstart: function(panel, e, offset){

    },
    drag: function(panel, e, offset){

    },
    dragend: function(panel, e, offset){

    },
    scope: this
  },
} 
```

它工作正常。现在我想阻止用户在触发拖动事件时拖动面板。这听起来可能很愚蠢，但这是为了防止用户直接拖动面板，他必须将手指放在工具栏上才能拖动面板。

我已经尝试过一些事情，比如

```
return false;
e.stopEvent();
e.stopPropagation();
e.preventDefault(); 
```

但他们都没有工作。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:11:36.110

我终于将 dragstart 事件更改为

```
dragstart: {
  fn: function(){

  },
  order: 'before'
}, 
```

并且`return false;`工作得很好......

# c# - C# 验证 XML 文档大小写不敏感

> ID：10706313
> 
> 赞同：0
> 
> 时间：2012-05-22T16:39:40.017
> 
> 标签：c#, xml

使用 xmlreader 验证 xml 始终区分大小写，是否可以进行不区分大小写的验证？即，如果架构中的元素名称是“FirstName”，则应验证名称为“Firstname”的 xml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:44:32.590

XML 是区分大小写的语言，所以它不会是真正的 XML 验证......

最简单的方法是将所有文本读取为文本，转换为大写，然后将结果字符串作为 XML 加载。

另一种选择是实现您自己的基于[TextReader](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)的类（包装基本 TextReader）并将所有字母大写。对于大型 XML 文档会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:49:10.537

您可能已经注意到，XML 区分大小写。因此，使验证不区分大小写的一种方法是使模式不区分大小写。在架构中，尝试使用具有以下内容的模式，而不是 FirstName：[Ff][Ii][Rr][Ss][Tt][Nn][Aa][Mm][Ee]。

# sql - 连接中的计算不起作用？

> ID：10706317
> 
> 赞同：0
> 
> 时间：2012-05-22T16:40:03.323
> 
> 标签：sql, sql-server

我有这个加入：

```
UPDATE Table_Name
SET Change = isnull(tab2.Value,0) - tab1.Value 
FROM 
    (SELECT Date,ID,ID,FileName,Value FROM Table_Name WHERE FileName = 'x' AND Date = '2012-05-17') tab1
LEFT OUTER JOIN 
    (SELECT Date,ID,TradeID,FileName,Value FROM Table_Name WHERE FileName = 'x' AND Date = '2012-05-18')  tab2 
ON tab1.FileName = tab2.FileName AND 
tab1.ID = tab2.ID  AND 
tab1.ID = tab2.ID 
```

如您所见，它是一个左外连接。但是，当我有 5 月 17 日的数据而 5 月 18 日没有数据时，插入的值应该是 -17th.Value（因为一般计算是 18th.Value - 17th.Value 和 18th.Value 为零）。

如果我在插入部分（用于调试）下方放置一个选择语句，则显示正确，但是，当我删除 SELECT 语句并在 SET 部分中进行计算时，它不起作用。我最终得到了 Change of null 的值，其中找不到 5 月 18 日的匹配项。

编辑：我应该补充一点，我不确定我是否需要 LEFT JOIN 或 LEFT OUTER JOIN。我希望从 tab1 返回所有行，如果它在 tab2 中不存在，则更改值应该是 -tab1.Value，而不是 tab2.Value - tab1.Value。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:41:04.947

DB2 不允许`UPDATE`s（或`DELETE`s）在主表引用子句中包含任何连接，我认为这可以防止某些类型的问题。是的，我知道您使用的是 SQL Server，这就是您尝试这样做的原因——我只是倾向于在编写时考虑到 DB2 约束，仅此而已。

假设您想更新 17 日的行，我相信以下应该有效。否则，请指定您实际要更新的行。

```
UPDATE Table_Name 
SET change = -value + COALESCE((SELECT nxt.value
                                FROM Table_Name nxt
                                WHERE nxt.fileName = table_name.fileName
                                AND nxt.id = table_name.id
                                AND nxt.scenarioId = table_name.scenarioId
                                AND nxt.cobDate = '2012-05-18'), 0)
WHERE fileName = 'GBP.csv'
AND cobDate = '2012-05-17' 
```

* * *

**编辑：** 更正了上述错误。

但是...从事物的声音来看，您可能正在尝试更新*不存在*的行；具体来说，“结果需要输入18号”。如果您正在尝试更新那些确实存在的第 18 行，或者如果它们不存在则插入它们，那么您将需要两个语句（或者可能是一个`MERGE`？除非我的版本中没有它们，所以我不能帮你）：

```
UPDATE Table_Name
SET change = value - COALESCE((SELECT prev.value
                               FROM Table_Name prev
                               WHERE prev.fileName = table_name.fileName
                               AND prev.id = table_name.id
                               AND prev.scenarioId = table_name.scenarioId
                               AND prev.cobDate = '2012-05-17'), 0)
WHERE fileName = 'GBP.csv'
AND cobDate = '2012-05-18';

INSERT INTO Table_Name (id, scenarioId, fileName, cobDate, value, change) 
                        SELECT id, scenarioId, fileName, '2012-05-18', 0, -value
                        FROM Table_Name
                        WHERE fileName = 'GBP.csv'
                        AND cobDate = '2012-05-17'
                        AND NOT EXISTS (SELECT '1'
                                        FROM Table_Name nxt
                                        WHERE nxt.fileName = table_name.filename
                                        AND nxt.id = table_name.id
                                        AND nxt.scenarioId = table_name.scenarioId
                                        AND nxt.cobDate = '2012-05-18'); 
```

您**必须***按该顺序*运行它们。
您还**必须为** *两个*语句的组合运行*锁定表*，使用其他方法确保不修改包含相关数据的行（ed、d、d），或者能够判断哪些行*没有*被触及。*`INSERT``UPDATE``DELETE`*

 **如果这不是您想要的行为，请修改您的问题以更清楚地了解您要完成的工作。**

# c# - XmlDocument - 我想要 并不是

> ID：10706319
> 
> 赞同：1
> 
> 时间：2012-05-22T16:40:10.203
> 
> 标签：c#, visual-studio-2008, soap, .net-3.5, sap

我必须将 XML 作为 SOAP 响应发送到 SAP WAS。

SAP 对您发送的内容（特殊字符和东西）非常挑剔，现在我想用尽所有可能性。

有没有一种方法`myXMLDoc.LoadXml` 可以指定诸如*“空时不要缩短标签”之*类的内容？

通常当你这样做时：

```
<item>
<Trkorr>TDEK978887</Trkorr>
<Sequence>0</Sequence>
<Solicit>cggaste</Solicit>
<Type></Type><Id></Id><Number></Number><Message></Message>
</item> 
```

它将其转换为：

```
<item>
<Trkorr>TDEK978887</Trkorr>
<Sequence>0</Sequence>
<Solicit>cggaste</Solicit>
<Type/><Id/><Number/><Message/>
</item> 
```

我缺少任何财产吗？

* * *

顺便说一句*（我认为这不值得再问一个问题，所以......）*

```
<soap-env:Envelope xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
    <soap-env:Body>
        <soap-env:Fault>
            <faultcode>soap-env:Server</faultcode>
            <faultstring xml:lang="en">SOAP processing failure, error id = 112</faultstring>
        </soap-env:Fault>
    </soap-env:Body>
</soap-env:Envelope> 
```

这是错误 sap 的返回。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:33:44.810

不，如果不自己编写所有内容，就没有其他方法了。

即使这样做了，这也不是问题。问题出在 SAP 服务器和/或您在显示的参数旁边发送的 SAP 参数上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:29:10.117

我不确定结束标签是真正的问题。查看[SAP note 1318784](https://service.sap.com/sap/support/notes/1318784)，了解如何启用跟踪并使用它来找出错误消息 112 背后的原因。

# delphi - Delphi & PHP 中的安全密钥对加密解决方案？

> ID：10706320
> 
> 赞同：5
> 
> 时间：2012-05-22T16:40:15.117
> 
> 标签：delphi, security, encryption, rsa, lockbox-3

我的应用程序通过 Internet 发送加密文件，我需要能够执行以下操作：

1.  （**客户端 Delphi 2010） ：使用****我的应用程序附带的公钥**加密文件并将其上传到服务器
2.  （**服务器端 PHP） ：使用我****存储在服务器上的私钥**解密上传的文件
***   （处理上传的文件...）**

 **听起来很简单，但我找不到任何可靠的代码/组件，我找到了这些组件：

1.  [数字加密货币](http://www.cityinthesky.co.uk/opensource/dcpcrypt)。这是我现在在开发中使用的，但似乎不支持基于密钥对的加密（RSA？）

2.  [GnuPgp](http://www.gnupg.org/) (GPL) 所以我不能在我的商业应用程序上使用它。

3.  [TurboPower LockBox 3](http://lockbox.seanbdurkin.id.au/HomePage)：确实支持密钥对加密，但非常神秘（没有文档 AFAIK）并且似乎不支持文件加密。

**我的问题是：**是否有一个**安全/可靠**的加密组件：

1.  实现我上面描述的（即密钥对加密）
2.  可以使用PHP解密
3.  适用于**大文件/流**
4.  （**在这里做梦！**）有一个简单的 delphi/php 演示来展示如何做到这一点？:)
5.  请仅使用 FOSS 解决方案，我已经超出预算了 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:50:32.807

我会选择 OpenSSL。
PHP 似乎对它有很多支持，虽然我还没有真正尝试过：例如[手册](http://php.net/manual/en/book.openssl.php)和[这里的示例](http://andytson.com/blog/2009/07/php-public-key-cryptography-using-openssl/)。

使用我在这里多次提到的东西：[http](http://www.disi.unige.it/person/FerranteM/delphiopenssl/) ://www.disi.unige.it/person/FerranteM/delphiopenssl/ 可以通过一些工作使 Delphi 与 OpenSSL 一起工作。该页面上也有一些很好的例子。并查看 Indy OpenSSL 导入。

不是特定的组件，但绝对是免费的、灵活的，并且有充分的可能性在安全方面拍摄自己的脚 :-)

编辑：

[对于 Delphi，我会考虑使用 EVP_Seal* 函数，您可以在此 SO answer](https://stackoverflow.com/a/9733823/197962)中找到我的精简版 libeay32.pas 文件。您需要这样做，因为 Indy 没有显示或实现很多/任何实际的 EVP_ 函数，因此您需要导入函数声明和一些其他例程。

对于 PHP [，这个链接](http://php.net/manual/en/function.openssl-open.php)似乎是正确的对应物。

作为奖励，这应该让您了解如何使用 EVP_Seal* 东西（未经测试）：

```
function EVPSeal(ASource: TBytes; const APublicKey: PEVP_PKEY; out Key: TBytes; out IV: TBytes): TBytes; 
var
  cipher: PEVP_CIPHER;
  ctx: EVP_CIPHER_CTX;
  buf: TBytes;
  block_size, buf_start, out_len, keysize: integer;
  ek: array[0..0] of PByte;
  ekl: array[0..0] of integer;
  pubk: array[0..0] of PEVP_PKEY;
begin
  keysize := EVP_PKEY_size(APublicKey);
  cipher := EVP_aes_256_cbc;
  SetLength(IV, EVP_MAX_IV_LENGTH);
  SetLength(Key, keysize);
  ek[0] := @Key[0];
  pubk[0] := APublicKey;
  buf_start := 0;
  EVP_CIPHER_CTX_init(@ctx);
  try
    EVP_SealInit(@ctx, cipher, @ek[0], @ekl, @IV[0], @pubk[0], 1);
    block_size := EVP_CIPHER_CTX_block_size(@ctx);
    SetLength(buf, Length(ASource) + block_size);
    SetLength(Key, ekl[0]);
    EVP_SealUpdate(@ctx, @buf[buf_start], out_len, @ASource[0], Length(ASource));
    Inc(buf_start, out_len);
    EVP_SealFinal(@ctx, @buf[buf_start], out_len);
    Inc(buf_start, out_len);
    SetLength(buf, buf_start);
    result := buf;
  finally
    EVP_CIPHER_CTX_cleanup(@ctx);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T18:46:06.207

啊，加密货币。有一种说法是，一个对加密知之甚少的程序员比一个对加密一无所知的程序员危险得多。

与此类似，我花了相当长的时间试图找到一种使用开源进行数字 XML 签名的方法。我只[设法做到了这么远](https://stackoverflow.com/questions/4929650/sha1-hashing-in-delphi-xe)，然后才得到一个[坚如磐石的第三方库](http://www.eldos.com/)。从纯粹的货币意义上来说，它并不便宜，但它是我迄今为止最好的投资之一。

*（真实故事：我实际上与这个图书馆的作者发生了一场小冲突，甚至被从评论中删除。唉，我最终从他那里买了东西。去想。）***

# xml - iOS 修改本地 XML 文件

> ID：10706325
> 
> 赞同：0
> 
> 时间：2012-05-22T16:40:34.117
> 
> 标签：xml, cocoa, file, nsxmlparser, local

我正在使用 NSXMLParser 解析 iPad 上的本地 XML 文件。现在我想修改文件。我想在它的最后加上几行。

这是我的文件的样子：

```
<dict>
    <element att1="atribute" att2="atribute" att3="atribute" att4="atribute" />
    <element att1="atribute" att2="atribute" att3="atribute" att4="atribute" />
    <element att1="atribute" att2="atribute" att3="atribute" att4="atribute" />
    <element att1="atribute" att2="atribute" att3="atribute" att4="atribute" />
</dict> 
```

我怎么能解决这个问题？我试图加载字典或数组“包含文件内容......”但它总是在日志中返回（null）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:06:34.800

用于`GDataXML`将数据添加到 XML 文件。[您可以在此处](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml)找到写入 xml 的教程

# sql - 在两个连接表上使用 GROUP-BY-HAVING

> ID：10706326
> 
> 赞同：0
> 
> 时间：2012-05-22T16:40:35.020
> 
> 标签：sql

我正在尝试连接两个表，并根据 where 约束以及 group-by-having 条件从这两个表中选择列。我遇到了一些我不理解的问题和行为。我正在使用sybase。下面是一个简单的例子

```
CREATE TABLE #test(
name varchar(4),
num  int,
cat  varchar(3)
)

CREATE TABLE #other(
name varchar(4),
label varchar(20)
)

Insert #test VALUES('a',2,'aa') 
Insert  #test VALUES  ('b',2,'aa') 
Insert  #test VALUES  ('c',3,'bb')
Insert  #test VALUES ( 'a',3,'aa')
Insert  #test VALUES ( 'd',4,'aa')

Insert #other VALUES('a','this label is a') 
Insert  #other VALUES  ('b','this label is b') 
Insert  #other VALUES  ('c','this label is c')
Insert  #other VALUES ( 'd','this label is d')

SELECT t.name,t.num,o.label  
FROM #other o inner JOIN #test t ON o.name=t.name 
WHERE t.name='a' 
GROUP BY t.name 
HAVING t.num=MAX(t.num) 
```

当我有`GROUP BY`（标签列显然与不同的 t.name 相关）时，我会变得毫无意义。如果我删除`GROUP BY`语句，查询的行为与我预期的一样，但是我被迫将其用作子查询然后应用

```
SELECT * FROM (subquery here) s GROUP BY s.name having s.num=MAX(s.num) 
```

必须有更好的方法来做到这一点。对此行为的任何帮助和解释将不胜感激。

**我应该澄清一下。在我的实际查询中，我有类似 SELECT .... FROM (joined tables) WHERE name IN (long list of names), GROUP BY .....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:07:26.790

如果我正确理解您的要求，请运行此...

```
SELECT t.name, num=MAX(t.num), o.label
FROM #other o
INNER JOIN #test t ON o.name=t.name
WHERE t.name='a'
GROUP BY t.name, o.label; 
```

...给了我这个结果：

```
name num         label
---- ----------- --------------------
a    3           this label is a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:49:44.113

如果我能很好地理解您的查询，您可以尝试以下操作。

```
SELECT t.name,t.num,o.label  
FROM #other o inner JOIN #test t ON o.name=t.name 
WHERE t.name='a' AND t.num=MAX(t.num) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:50:22.023

您的 GROUP BY 必须包括 t.name、t.num 和 o.label。如果你这样做

```
GROUP BY t.name, t.num, o.label 
```

然后查询执行没有错误。

但是，您没有计算 group by 中的任何聚合值。
你想做什么？

# groovy - 如何将 Groovy 类构造函数转换为闭包？

> ID：10706331
> 
> 赞同：5
> 
> 时间：2012-05-22T16:41:14.600
> 
> 标签：groovy, closures

所以 Groovy 有这种相对方便的语法来将方法转换为闭包，例如

```
[1,2,3].each { println it }

// is equivalent to

[1,2,3].each this.&println 
```

但是我如何转换一个类构造函数，例如

```
[1,2,3].collect { new Thing( it ) }

// is equivalent to

[1,2,3].collect ???? 
```

Groovy 的反射有`Thing.constructors`List 需要检查，但我不知道在哪里放置 & 符号`Thing.constructors[0]`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T22:52:31.693

您可以使用为给定参数调用构造函数的[`invokeConstructor`metaClass 方法。](http://groovy.codehaus.org/api/groovy/lang/MetaObjectProtocol.html#invokeConstructor%28java.lang.Object%5B%5D%29)

```
class Thing {
    Thing(Integer num) { this.num = num }
    Integer num
}

[1,2,3].collect Thing.metaClass.&invokeConstructor 
```

# wcf - 从 .NET 2.0 CF 调用 .NET 3.5+ ASMX Web 服务或 WCF 服务

> ID：10706332
> 
> 赞同：1
> 
> 时间：2012-05-22T16:41:14.880
> 
> 标签：wcf, compact-framework, asmx

我正在为在 .NET 2.0 CF（紧凑框架）上运行的旧 PDA 开发项目。现在我们正在使用 .NET 2.0 ASMX Web 服务，但我发现这严重受限。它缺少各种东西，如扩展方法、函数、动作、LINQ、HashSet(of T) 等通用数据结构等，这对于*完成任务*很有用。

最终，我们可能会摆脱 PDA 并用其他技术取而代之。出于这个原因，我想尽我所能编写一个可重用/RESTful-ish 后端（因此是 WCF）。

我在网上查过，但没有太多运气找到信息。至少我希望将后端升级到 .NET 3.5 以改进功能。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:53:47.997

如果您只想要新的框架库和 c# 语法，那么您的 asmx 服务在 3.5 上就可以正常工作，无需迁移到 wcf。如果你想休息，你应该看看[asp.net web api](http://weblogs.asp.net/scottgu/archive/2012/02/23/asp-net-web-api-part-1.aspx)，虽然它只是 .net 4。

# c# - 使用对象类型作为参数

> ID：10706335
> 
> 赞同：1
> 
> 时间：2012-05-22T16:41:31.510
> 
> 标签：c#, object, methods, parameters

我一直在想：您是否支持在您的方法中仅使用一个**对象**作为参数？我这样做的原因是超载。目前，我正在尝试创建一种适合许多不同数据类型的方法：`string`, `decimal`, `DateTime`... 不胜枚举。

虽然它变得有点混乱，所以我正在考虑执行以下操作

```
public void GenericMethod(object val)
{
    if (val is string)
        // process as string
    else if (val is decimal)
        // process as decimal
    else if (val is DateTime)
        // do something for dt
    else
        // ...
} 
```

你觉得这样的方法怎么样？会不会产生不必要的开销？（在类型检查期间）你实现了吗？告诉我...

**编辑：**是的，只是一个旁注，我有点熟悉重载。但是当有超过 10 个重载时，它会变得有点烦人......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T16:42:55.600

是的，那会奏效。但是，有更好的方法可以做到这一点。

你最好的选择是使用重载：

```
public void GenericMethod(string val)
{
        // process as string
}
public void GenericMethod(decimal val)
{
    // process as decimal
} 
```

等等

每当您在代码中使用`is`关键字时，这都是一个巨大的暗示，您可能忘记使用一些重要的 OO 原则：重载、子类等。

重载实际上并没有那么烦人，只是为了编写。 **请记住，您今天不是为自己编写代码，而是在三个月后为自己编写**代码，那时您必须阅读代码并弄清楚您为什么要这样做，或者这个错误来自世界的哪个地方从。

避免“切换类型”技术的另一个原因是为了与 .NET 框架（以及人们的期望）保持一致。Follow`Console.Write`以及在给定类内部和之下覆盖的其他多种方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T16:44:26.097

> 我一直在想：您是否支持在您的方法中仅使用一个对象作为参数？

非常稀有。如果有一组正确支持的固定类型——否则你会抛出异常——那么我会使用重载。

如果您实际上可以接受*任何*类型，并且您将以某种众所周知的方式处理非特别支持的类型，那么可以接受`object`. 这就是 LINQ to XML 所做的一切，结果是一个非常干净的 API。不过，我会非常小心地做这件事——这*很少*是个好主意。

是的，会有开销。不过，我通常不会将其作为决定的基础——在大多数情况下，开销将小到可以忽略不计。尽可能简洁地设计您的 API，然后确定它是否会导致瓶颈。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T16:42:55.437

是的，它会产生类型检查和装箱/拆箱值类型的开销。我会推荐重载。

另一种可能性是，只要您不对数字进行大量数学运算，就可以将其设为通用方法。但是，使用泛型进行算术运算相当困难，因为值类型没有限制可以使用运算符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-22T16:46:46.300

不需要那些！

只需声明尽可能多的具有相同名称的方法，并将每种类型作为每个方法的参数。[这称为重载。例如，您可能已经看到，`+1 Overloads`在方法旁边，这意味着还有 1 个具有相同名称但具有不同参数类型的方法]

像这样说：

```
void Method(decimal d)
{
    //Process Decimal
}
void Method(string s)
{
    //Process String
} 
```

默认情况下，它会根据类型找到自己的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T16:44:36.300

在某些情况下，您的方法是有意义的。我以前用过它，主要是当我有一堆对不同数据类型相同的处理时。

但这并不是超载。重载将是为相同的方法名称定义不同的签名，如下所示：

```
public void GenericMethod(string val)
{
    // process as string
}

public void GenericMethod(decimal val)
{
    // process as decimal
}

public void GenericMethod(DateTime val)
{
    // do something for dt
}

// Etc. 
```

在某些情况下，这种方法更有意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T16:45:10.573

实现其中之一的许多重载`object`是没有问题的。以`Console.WriteLine`重载为例。[http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)但是，请注意 int 例如可能与 double 冲突：

```
int sum(int i, int j)
{
 return i + j;
}

double sum(double i, double j)
{
 return i + j;
}

object sum(object i, object j)
{
  return i.ToString() + j.ToString();
}

==============================

static void Main()
{
   sum(1, 2); // Error: ambigous call between `int` and `double` versions
   sum(1.0, 2.0); // calls double version, although 1.0 and 2.0 are objects too
   sum("Hello", "World"); // object
} 
```

# iis-7 - 在浏览器中获取 .asmx 文件很好，获取 .asmx?WSDL 返回一个空页面

> ID：10706339
> 
> 赞同：0
> 
> 时间：2012-05-22T16:41:55.537
> 
> 标签：iis-7, sharepoint-2010, wsdl, asmx

我在 .dll 中创建了一个 web 服务，并将其放在 windows\assembly 目录中。我遵循以下 URL 中显示的所有步骤，并在“创建 Windows 应用程序以使用 Web 服务”段落处停止，因为我的使用者是 Lotus Domino 代理：

[http://msdn.microsoft.com/en-us/library/ms464040.aspx](http://msdn.microsoft.com/en-us/library/ms464040.aspx)

有两个安装，它工作得很好，现在我在第三台计算机上做了这个，当我在浏览器（IE9、Firefox 12 和 Chrome 19）中浏览到 asmx 文件的 URL 时，我从 IIS 7 中得到了正常的答案. 但是当我点击服务描述的链接（.../DominoImporter.asmx?WSDL）时，我得到的只是一个空白页面！IE9 显示默认的 404 页面，在 Chrome 中我有一个没有源的白页。Firefox 显示一条错误消息，该消息描述了带有 XML 类型标头的空页面。

这不起作用：
主机名/_vti_bin/DominoImporter.asmx?WSDL

这有效：
主机名/_vti_bin/DominoImporterwsdl.aspx

我搜索了半天的三个安装/计算机之间的差异，但一无所获！谷歌找到的所有论坛帮助还讨论了除我之外的其他问题。

我认为必须有人已经遇到过同样的问题并且可以给我建议！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:17:40.423

好的，现在我找到了解决方案，我卸载了 Visual Studio 2010，然后我卸载了 Sharepoint Foundation 2010。然后我重新安装了 Sharepoint Foundation 2010 并安装了 Visual Studio 2012。

然后当我再次加载 WSDL 时，浏览器中生成的网页不再为空！

写了这个，也许其他人将来可能需要这个解决方案。

原来，我的 Sharepoint 安装已损坏。在时间压力较高的优先级项目之前无法澄清这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T13:01:11.930

1.  在 webservices 项目的 web.config 中注释以下行。

    ```
    <add name="ContentTypeHttpModule" type="Porthos.Signup.Extras.ContentTypeHttpModule, ContentTypeHttpModule"/> 
    ```

2.  右键单击您的服务并在浏览器中查看。

3.  单击服务描述，它将显示 wsdl。

此外，它还将解决更新 Web 参考错误。

# python - 从 xmpp 服务器设置/获取用户信息：python

> ID：10706340
> 
> 赞同：1
> 
> 时间：2012-05-22T16:41:56.800
> 
> 标签：python, xmpp

我是 python 新手，我正在尝试创建一个测试 python 脚本来测试我的 XMPP 服务器上的不同操作。我已经能够测试我的用户的登录，现在我想获取服务器正在发送的信息（节）并设置新信息。

我已经阅读了几个网站，但我对所有这些信息都不是很清楚。主要来源是 slimxmpp.com。

我有我的节：

```
<iq type='get' to= 'chat.net'  id='id1'>
  <aa xmlns='http://myweb.com' />
</iq>

<iq type='result' to= 'chat.net'  id='id1'>
  <aa xmlns='http://myweb.com' >
    <name>My name as included in sent mails<name>
  <lang>en</lang>
    <mail>My mail as included in sent mails</mail>
  </aa>
</iq> 
```

我想获取信息并设置参数之一（让我们说名称），但我不知道如何。

```
class user_info(sleekxmpp.stanza.Iq):

    self.get_query() 
```

我必须用python来做。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:54:49.363

您要做的是为您的节创建一个自定义节类。这是一个适用于您的示例的示例：

```
from sleekxmpp import Iq
from sleekxmpp.xmlstream import ElementBase, register_stanza_plugin

class AA(ElementBase):
    name = 'aa'
    namespace = 'http://myweb.com'
    plugin_attrib = 'aa'
    interfaces = set(['name', 'lang', 'mail'])
    sub_interfaces = interfaces

register_stanza_plugin(Iq, AA) 
```

好的，那么所有这些有什么作用呢？该`name`字段指定 XML 对象的根标记为 'aa'，并`namespace`指定根标记的命名空间；到目前为止，我希望很明显。

该`plugin_attrib`字段是可用于从父节访问此节的名称。例如，您应该已经熟悉如何使用`iq['type']`或`iq['from']`从 Iq 节中提取数据。`plugin_attrib`设置为`"aa"`，则可以`iq['aa']`用来获取对 AA 内容的引用。

set 是本节提供的用于提取信息的`interfaces`一组键名，就像使用字典一样。例如，Iq 节在其接口集中具有“to”、“from”、“type”等。默认情况下，访问和修改这些键将创建或修改节的主要元素的属性。所以，在这一点上，你的节的行为是这样的：

```
aa = AA()
aa['name'] = 'foo'
print aa
"<aa xmlns='http://myweb.com' name='foo' />" 
```

现在，要将接口键映射到子元素而不是属性，它们需要在`sub_interfaces`集合中。所以通过设置`sub_interfaces = interfaces`上面的例子现在可以像这样工作：

```
aa = AA()
aa['name'] = 'foo'
print aa
"<aa xmlns='http://myweb.com'><name>foo</name></aa>" 
```

如果您需要更高级的东西，您还可以定义 get_* / set_* / del_* 形式的方法，其中 * 是接口名称，然后将用于提取或修改数据。

因此，总的来说，您将能够：

```
iq = Iq()
# ... set iq parameters
iq.enable('aa')  # Add an initial, empty aa element.
try:
    resp = iq.send()
    print(resp['aa']['name'])
    # ..., etc
except XMPPError:
    print('There was an error') 
```

此外，如果您需要，请不要忘记我们有 SleekXMPP 帮助的 slim@conference.jabber.org 聊天室。

# c# - 当我用任务管理器杀死我的程序时收到什么消息

> ID：10706344
> 
> 赞同：5
> 
> 时间：2012-05-22T16:42:50.010
> 
> 标签：c#, winapi, dll, windows-messages

所以我有一个 C++ dll，我在我的 c# 应用程序中使用它来监视 Windows 消息。我想知道是否发送了 WM_CLOSE 和 WM_QUERYENDSESSION，因为我无法从 C# 应用程序中看到它。如果我收到其中一条消息，我想对我的文件进行一些清理，但问题是当我用 TM 杀死它时，这些功能不起作用。似乎我没有收到消息。我认为问题在于任务管理器向 C# 应用程序而不是 C++ dll 发送消息。

一些代码：

C++：

```
typedef void (*CLOSING_FUNCTION)();
CLOSING_FUNCTION myClosingFunction;

typedef void (*SHUTDOWN_FUNCTION)();
SHUTDOWN_FUNCTION myShutdownFunction;

LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {

    case WM_CREATE:
        return 0;

    case WM_CLOSE:
        myClosingFunction();
        return 0;

    case WM_QUERYENDSESSION:
        myShutdownFunction();
        return 1;

    case WM_DESTROY:
        myClosingFunction();
        PostQuitMessage(0);
        return 0;
    }

    return DefWindowProc(hwnd, message, wParam, lParam);
} 
```

C＃：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate void Close_Function();
private static Close_Function myCloseDelegate;

[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
private delegate void Shutdown_Function();
private static Shutdown_Function myShutdownDelegate;
static void StartMonotoring()
{
       myCloseDelegate = Close;
       myShutdownDelegate = Shutdown;

       InterceptMessages(myCloseDelegate, myShutdownDelegate);
}

static void Close();
static void Shutdown(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T16:51:32.053

如果它被杀死，您的进程将不会收到任何消息。[从TerminateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)开始- 看我的亮点：

> TerminateProcess 函数用于无条件地导致进程退出。如果使用 TerminateProcess 而不是 ExitProcess，则动态链接库 (DLL) 维护的全局数据的状态可能会受到影响。
> 
> 该函数**停止进程内所有线程的执行，**并请求取消所有挂起的 I/O...

编辑：Hans Passant 关于任务终止方式的评论 - 在任务管理器中使用“应用程序”选项卡时，您只会获得 WM_CLOSE。从 Processes 选项卡中杀死它是一种粗鲁的终止 (TerminateProcess)。

# windows-phone-7 - 如何根据查询字符串中的值设置全景控件的标题？

> ID：10706345
> 
> 赞同：0
> 
> 时间：2012-05-22T16:42:50.373
> 
> 标签：windows-phone-7

当我导航到带有全景控件的视图时，我想设置全景控件的标题，标题值与来自前一个视图的查询字符串一起出现。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:06:30.923

如果您从其他页面导航：
page.xaml,cs:

```
 private void Navigate()
    {
        string name = "Test";
        // Navigate to Panorama page
        NavigationService.Navigate(new Uri("/Pages/PanoramaPage.xaml?name=" + name, UriKind.Relative));
    } 
```

PanoramaPage.xaml.cs：

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        string name = "";
        if (NavigationContext.QueryString.TryGetValue("name", out name))
        {
            PageTitle.Text = name;
        }
    } 
```

# cocoa - 带有加号和减号按钮的 NSTableView

> ID：10706357
> 
> 赞同：22
> 
> 时间：2012-05-22T16:43:27.987
> 
> 标签：cocoa, interface-builder

我怎么能做这样的事情？

![截屏](../Images/670317a75c50d007c3fb905d189010e0.png)

我在 Interface Builder 库中没有找到任何合适的对象。

有什么想法吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-24T11:01:11.477

我发现最好的方法是使用 NSSegmentedControl。

将其拖到画布上后，您应该配置其样式：

```
Style: Small Square
Mode:  Select Momentary 
```

看起来更好。现在使用“图像”字段来设置**NSAddTemplate**和**NSRemoveTemplate**。确保标签字段为空。

好的，我们有“ *+* ”、“ *-* ”和一个空段。要防止用户选择最新的，请从**Segment:**弹出并关闭**Enabled**复选框（位于**State:** label 旁边）中选择它。

最后，我们要做的是设置前两个段的**宽度以使它们成为正方形。**

1.  转到*尺寸检查器*
2.  选择**段 0**
3.  关闭“**固定**”复选框（段应立即自动调整大小以适合图像）
4.  选择**第 1 段**并重复第 3段
5.  现在，当您调整控件大小时，只有最后一段会改变宽度
6.  将它放在表格视图的底部并调整大小。

享受 ;）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-23T11:11:06.220

**OSX Yosemite 更新**

我试图在帐户视图中实现与 Mail.app 相同的外观（我的屏幕截图上的右侧窗口）。

我确实通过以下步骤达到了预期的结果：

1.  添加一个`NSSegmentedControl`
2.  添加两个段并将图像设置为每个段：
    *   `NSAddTemplate`对于`+`按钮
    *   `NSRemoveTemplate`对于`-`按钮
3.  将分段的大小`fixed`设置为并将值设置为`32`像素
4.  按钮旁边的矩形是`NSButton`带有样式的`Gradient`。
5.  按钮已启用，但**拒绝第一响应者**设置`true`为不可点击。

![截屏](../Images/98b096d70ec86852729cbb02c61019a6.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-19T05:59:46.327

使用具有渐变样式的 NSButton，并为图像使用系统提供的 NSAddTemplate 和 NSRemoveTemplate。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-23T15:00:36.233

这里的一个答案建议使用渐变按钮，但是不能禁用这些按钮，因为这会导致背景发生变化，从而破坏外观。另一个建议使用分段控件，这几乎是完美的，但分段控件不支持自动调整大小，例如，如果表格宽度是动态的。我的建议是两者结合。对实际按钮使用分段控件，使用渐变按钮填充表格宽度的其余部分，如果按钮宽度也是动态的，那么现在也可以是动态的。

请参阅我对类似问题的回答（带有屏幕截图）： [https ://stackoverflow.com/a/22586314/15809](https://stackoverflow.com/a/22586314/15809)

# sql - SQL 更新表字段 x 其中字段 y 是 z

> ID：10706365
> 
> 赞同：1
> 
> 时间：2012-05-22T16:44:19.233
> 
> 标签：sql, sql-server, sql-server-2008, insert

如何将值插入 SQL Server 表中的 X 列，其中 Y 列是 Z？

```
INSERT INTO dbo.Cities (County_Id) 
WHERE Code >= 10000 AND Code < 20000
VALUE 20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:01:19.977

首先，听起来您正在尝试执行`UPDATE`，因为`INSERT`它用于在表中添加一条全新的记录，而不是更新一个或多个现有记录。

如果我正确理解您的要求，您真的应该使用`UPDATE-JOIN`而不是。[这个](https://stackoverflow.com/questions/982919/sql-update-query-using-joins)StackOverflow 线程提供了一个很好的示例/解释。`INSERT-SELECT`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:03:54.730

```
UPDATE Cities SET County_Id = 20 WHERE Cities.Code >= 10000 AND Cities.Code < 20000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T16:50:06.950

```
Insert dbo.Cities( County_Id )
Select Name
From dbo.Counties
Where Counties.Id = 20
    And Exists  (
                Select 1
                From dbo.Cities As C1
                Where C1.County_Id = Counties.Name
                    And C1.Code >= 10000
                    And C1.Code < 20000
                ) 
```

# javascript - 关于闭包之间垃圾收集的混淆

> ID：10706366
> 
> 赞同：2
> 
> 时间：2012-05-22T16:44:20.023
> 
> 标签：javascript, jquery, closures

一段时间以来，我一直不确定围绕闭包的 JS 垃圾收集规则，所以我想我不妨问一下……这是一个很好的例子，我对涉及 jQuery 的`$.each`方法感到好奇：

```
storeSelection: function() {
    var enabledIds = {};

    $.each(this.nodes, function(index, node) {
        if (node.enabled) {
            enabledIds[ node.id ] = true;
        }
    });

    this.selection = enabledIds;
} 
```

当然，上面的代码片段是对象字面量的一部分。因此，我在外部函数的顶部创建了一个新对象，它将在数组中存储启用项的 ID。使用 jQuery 的`.each()`方法，我循环遍历项目数组并记录启用的 ID。最后，我将选择存储为父对象的成员。

`enabledIds`我的问题涉及从外部范围引用对象的内部函数。既然`enabledIds`会一直留着，那会不会妨碍内部功能被收集呢？我假设不会，因为它只是一个在内部函数末尾被清除的变量，对吧？要成为泄漏，我假设内部函数需要对外部对象进行硬引用，如下所示：

```
$.each(this.nodes, function(index, node) {
    this.badIdea = enabledIds;
    if (node.enabled) {
        enabledIds[ node.id ] = true;
    }
}); 
```

但是......我总是对这条规则感到困惑。任何帮助消除这种混乱将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:07:11.280

不，即使您的第二个示例也不足以导致泄漏。`badIdea`附加到各个节点，`$.each`块将退出并被垃圾收集。所有现代浏览器都使用“标记和清除”算法进行 javascript 垃圾收集，该算法遵循父子关联并收集任何“无法访问”，即这些树之一无法访问的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:20:05.800

没错，内部函数 ( `index`, `node`) 中的变量将被垃圾收集，因为它们无法再被访问。

在此示例中，您可以访问`bigstr`吗？

```
a = function() {
        var bigstr = new Array(1000000).join('x');
        return function() { return bigstr; };
    }(); 
```

是的，你可以：`a()`，所以它没有被收集。这个例子怎么样：

```
a = function() {
        var bigstr = new Array(1000000).join('x');
        return function(n) { return eval(n); };
    }(); 
```

同样，您可以：`a('bigstr')`.

但是这个呢：

```
a = function() {
        var smallstr = 'x';
        var bigstr = new Array(1000000).join('x');
        return function(n) { return smallstr; };
    }(); 
```

你不能再访问它，它是垃圾收集的候选者。

# highcharts - HighCharts 多个 Y 轴

> ID：10706371
> 
> 赞同：2
> 
> 时间：2012-05-22T16:44:27.560
> 
> 标签：highcharts

我对 HighCharts 比较陌生，我希望有两个 Y 轴，其中数据始终以左侧（主）Y 轴表示，但是有一个常量函数可以转换数据进入右侧（辅助）Y 轴上的项。

举个例子，[http://jsfiddle.net/M2EVb/](http://jsfiddle.net/M2EVb/)

从华氏温度转换为摄氏温度是一个众所周知的功能。即使我将主 Y 轴指定为从 32 到 212 的范围内，刻度间隔为 18，辅助 Y 轴的范围从 0 到 100，刻度间隔为 10，但两个轴不对齐适当地; 可能是由于“cels”数据。但关键是我希望“cels”数据只是另一组华氏温度，并且右侧 Y 轴值是它们各自华氏值的正确摄氏“转换”，并且始终显示.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:50:05.483

在 yAxis 配置中使用标签的格式化函数将 yAxis 刻度从 F 转换为 C，如下所示：

```
yAxis: [{
        title: {
            text: 'Temperature (C)'
        },
        labels: {
              formatter: function() {
                    return YourConversionFunction(this.value) +' C';
              }
        }
}] 
```

确保您使用相同的数据集（F 数据）定义您的系列：

```
series: [{
        type: 'area',
        name: 'Temp (F)',
        data: Far_TempData,
        yAxis: 0,
        xAxis: 0
    }, {
        type: 'area',
        name: 'Temp (C)',
        data: Far_TempData,
        yAxis: 1,
        xAxis: 0,
        lineWidth:0,
        fillOpacity: 0.01,
        visible:true
    }] 
```

# javascript - 用于处理事件的 Jquery UI 滑块

> ID：10706377
> 
> 赞同：0
> 
> 时间：2012-05-22T16:42:54.970
> 
> 标签：javascript, jquery, jquery-ui

我是 jquery 和 javascript 的新手，但我想做我认为应该是相对简单的任务。我想使用 UI Slider 小部件来控制某些操作。获得值 100，显示图像。获取值 200，销毁之前的图像，播放新动画（或显示图像）。这是我到目前为止所写的：http: [//jsfiddle.net/LGMHP/14/](http://jsfiddle.net/LGMHP/14/)

我会以完全错误的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:48:27.620

看起来您在 jQuery 变量前面缺少一些美元符号。尝试：

```
$("#slider").slider({
    animate: true,
    min: 0,
    max: 500,
    step: 100,
    slide: function(event, ui) {
        if (ui.value == 100) {
            $('#green').hide();
        };
        if (ui.value == 200) {
            $('#green').hide();
            $('#red').show();
        };

        $("#hour").text(ui.value);
    }
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/LGMHP/16/)**。

# java - 如何找出 javadoc 错误是什么？（[javadoc] 1 个错误，构建成功）

> ID：10706378
> 
> 赞同：1
> 
> 时间：2012-05-22T16:44:43.493
> 
> 标签：java, ant, javadoc

当我用 ant 运行我的 javadoc 命令时，或者如果我尝试从 eclipse 生成他的文档（使用相同的构建脚本），这就是我得到的，我不知道如何找到错误。有什么地方可以让我获得有关该错误的更多信息？
![当我用 ant 运行 javadoc 时会发生什么](../Images/510a979f27940349fbf7d4d7d1c5fa43.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:53:20.003

该错误在 javadoc 输出的第三行中说明：

```
javadoc: error - The -classpath option may be specified no more than once. 
```

您的 build.xml 文件多次指定 -classpath。要从多个类路径构建，请在一个 -classpath 属性中用分号分隔路径，而不是多次指定该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:49:17.283

在我看来，您尝试运行的 javadoc Ant 任务指定了两个 -classpath 选项。它在 [javadoc] 输出的第 3 行显示。

# javascript - jquery 和 javascript 过滤问题

> ID：10706379
> 
> 赞同：1
> 
> 时间：2012-05-22T16:44:56.280
> 
> 标签：javascript, jquery, filtering

我的 JS 代码[在这里](http://jsfiddle.net/qNFWM/5)有两个问题，非常感谢任何帮助......

1.  我需要添加一个逻辑，以便当产品价格为 499 美元时，过滤列表中会显示“超过 50 个”选项。就我目前的实现而言，这是行不通的。

    ```
    <li>
        <!-- over 50 product is not showing when filtering -->
        <a href="/product-three">Product Four</a><br>
        <span id="lowestPriceRange">400</span>
        <span id="highestPriceRange">400</span>
    </li>

    // Because I need to handle it here somehow but I'm stuck
    var hidePrices = {};
    hidePrices[0] = true;
    hidePrices[10] = true;
    hidePrices[20] = true;
    hidePrices[30] = true;
    hidePrices[40] = true;
    hidePrices[50] = true;

    $('#products').find('span').each(function(i, el){
        var key = parseInt(Math.floor($(this).html() / 10) * 10, 10);
        hidePrices[key] = false;
    });

    $('#filterByPrice').find('li').each(function(i, el){
        if (hidePrices[Number($(this).find('a').attr('name'))]) {
            $(this).hide();
        }
    }); 
    ```

2.  它隐藏了一些我想展示的产品。For example, I want to show a product priced between $40 - $60 when the $40 - $50 filtering option is selected.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:06:30.080

在这里我解决了你的问题：http: [//jsfiddle.net/qNFWM/7/](http://jsfiddle.net/qNFWM/7/)

为了解决第一个问题，我添加了这个，因为您的密钥是 400：

```
if (key > 50) key = 50; 
```

为了解决第二个问题，我改变了这个：

```
return (minProductPrice >= minSelectedPrice && maxProductPrice <= maxSelectedPrice); 
```

对此：

```
return ((minProductPrice >= minSelectedPrice &&  minProductPrice <= maxSelectedPrice) || (maxProductPrice >= minSelectedPrice &&  maxProductPrice <= maxSelectedPrice)); 
```

所以只有最小值或最大值必须在范围内。

# algorithm - OpenCV：如何检测视频中是否有快速移动的物体？

> ID：10706387
> 
> 赞同：2
> 
> 时间：2012-05-22T16:45:35.707
> 
> 标签：algorithm, opencv, computer-vision, motion-detection

使用 OpenCV 检测快速移动物体的最佳方法是什么？

说，我有 5 个随机视频文件：

1) 人群视频，人们走路，静态摄像机。2) 一只猫玩球的视频，摇晃的 iPhone 相机。3) 被采访者的视频。静态相机。4) 快速行驶的汽车的动画 (3D)、背景模糊等。 5) 用 iPhone 相机拍摄的模糊视频（只是相机晃动，什么都看不到）。

所以我想隔离video5并检测video4和video2中有很多运动。

最好的方法是什么？我想使用 OpenCV2，但如果有更好的解决方案，我很乐意了解这一点。

非常感谢任何输入。伪代码或只是特定算法的建议。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T16:56:32.420

[光流](http://www.google.com.pk/url?sa=t&rct=j&q=optical%20flow%20opencv&source=web&cd=2&ved=0CFcQFjAB&url=http://dasl.mem.drexel.edu/~noahKuntz/openCVTut9.html&ei=GcW7T6HYPNKg8gPIzNjFCg&usg=AFQjCNFqgGmDHAWX3zzbIHVrI-RU9yNuPw)这将是检测运动的众多方法之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-08T03:21:07.547

我不知道你是否还在，但我发现回答很有趣。

方法 1- 正如用户 349026 所建议的，最直观的方法之一是使用光流，它会给你带来主导运动，但光流总是伴随着噪音。在使用光流之前，您必须使用一些过滤器。

方法- 2 这个方法很困难，但效果很好。这是来自 CVPR-2013 论文链接 - [http://www.irisa.fr/texmex/people/jain/w-Flow/motion_cvpr13.pdf](http://www.irisa.fr/texmex/people/jain/w-Flow/motion_cvpr13.pdf) 我认为本文的刚刚介绍将解决您的问题。

# .net - 要打开多少个 MQ 通道/队列

> ID：10706398
> 
> 赞同：0
> 
> 时间：2012-05-22T16:46:06.097
> 
> 标签：.net, c#-4.0, mq, beanstalkd

为了简单起见，假设我有一个类似聊天的系统——它是一对一的通信（可以在 1 个发送者和 1 个接收者之间）。发送者和接收者。我想使用 MQ 风格（可能是 beanstalk）将消息从一个用户发送到另一个用户。消息非常少，但考虑到 twitter 的用户数量，其中有很多，并且可能经常产生消息。我在 C# 中使用它。

**要创建多少个通道/队列？**

我的第一个想法是每次通信使用 1 个频道（b/w 2 个用户），但这意味着数百万个频道打开和关闭许多频道。也许有一种方法可以重新使用空闲通道而不是关闭它们。那会是更好的做法吗？

**有没有更好的方法来进行这种沟通？**

谢谢 ：）

* * *

**编辑：**

由于我没有收到任何回复，我决定在这里发布我**未经测试**的设计，也许我们可以将其用作首发：

每个接收器客户端都有一个唯一的 ID，因此他们每个人都可以使用他们的 ID 名称打开一个试管。发送者，只要有东西要发送给客户端，它就会打开一个以目标 ID 作为管道名称的管道/队列。发送消息。然后丢弃管。

虽然理论上这似乎可行，但整个关闭和重新打开都很麻烦。

# jquery - jquery - 使用链接更改单独 div 的 bg 图像

> ID：10706399
> 
> 赞同：1
> 
> 时间：2012-05-22T16:46:09.687
> 
> 标签：jquery, background-image, swap

我希望在单击链接时更改 div 的背景图像，但以下内容不起作用。如果可能的话，也希望它褪色......

```
<style type="text/css>
    #banner { background: url(img/img.jpg); }
</style>

<script type="text/javascript">
    $('#change').click(function () {
        $('#banner').css("background-image", "url(img/otherImage.jpg)");
    });
</script>

<div id="banner">
    stuff
</div>

<div id="container">
    <div id="leftCol">
        <a href="#" id="change">Change</a>
    </div>
    <div id="rightCol">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:49:03.927

你绑定得太早了。在尝试附加任何处理程序之前，您需要指示 jQuery 等到文档准备好：

```
$(function(){
    $("#change").on("click", function (e) {
        e.preventDefault();
        $("#banner").css("background-image", "url('img/otherImage.jpg')");
    });
}); 
```

演示：http: [//jsfiddle.net/ATrF6/1/](http://jsfiddle.net/ATrF6/1/)

# scripting - 带有 WMI 和 VBScript 的 Netstat

> ID：10706401
> 
> 赞同：1
> 
> 时间：2012-05-22T16:46:16.137
> 
> 标签：scripting, vbscript, wmi, wmi-query, netstat

我正在开发一个需要修改用于网络文档的脚本的项目。我们使用的当前脚本是 SYDI 的修改版本，[可在此处找到](http://sydiproject.com/products/sydi-server/)。我想做的是在这个脚本中添加执行*netstat -an*的能力，并让它与报告的其余部分一起返回。我很好奇是否有人使用 WMI 和 VBScript 来返回 netstat 信息，以及如何将它合并到这个脚本中。

注意：我不是想推销产品，我也不隶属于 SYDI 项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:06:15.417

您可以运行 netstat 并像下面的脚本一样捕获结果，但也可以从 activeX 获得很多信息，但我需要知道您确切需要哪些信息。

```
set sh = CreateObject("Wscript.Shell") 
set Connections = CreateObject("Scripting.Dictionary") 

call Main() 

Function Main() 
    call GetConnections() 
    call ProcessConnections() 
End Function 

Function GetConnections() 
    i = 0 
    set shExec = sh.Exec("netstat -f") 

    Do While Not shExec.StdOut.AtEndOfStream 
        Line = shExec.StdOut.ReadLine() 
        If Instr(Line, "TCP") <> 0 Then 
            Set Connection = New NetworkConnection 
            Connection.ParseText(Line) 
            call Connections.Add(i, Connection) 
            i = i + 1 
        End If 
    Loop 
End Function 

Function ProcessConnections() 
    For Each ConnectionID in Connections.Keys 
        wscript.echo ConnectionID & Connections(ConnectionID).RemoteIP 
    Next 
End Function 

Class NetworkConnection 
    Public Protocol 
    Public LocalIP 
    Public LocalPort 
    Public RemoteIP 
    Public RemotePort 

    Public Sub ParseText(Line) 
        dim i 

        For i = 5 to 2 Step -1 
            Line = Replace(Line, String(i, " "), " ") 
        Next 

        Line = Replace(Line, ":", " ") 
        Line = Right(Line, Len(Line) - 1) 
        Line = Split(Line, " ") 

        Protocol = Line(0) 
        LocalIP = Line(1) 
        LocalPort = Line(2) 
        RemoteIP = Line(3) 
        RemotePort = Line(4) 

    End Sub 

    Private Sub Class_Initialize 
        'MsgBox "Initialized NetworkConnection object" 
    End Sub 

End Class 
```

编辑：根据 OP 的评论，这里有一个简化版本

```
set sh = CreateObject("Wscript.Shell")  
call GetConnections()  

Function GetConnections()  
  i = 0  
  set shExec = sh.Exec("netstat -an")  
   Do While Not shExec.StdOut.AtEndOfStream  
      Wscript.Echo shExec.StdOut.ReadLine()  
  Loop  
End Function 
```

# php - 如何将 zend 框架 2 与 mongo db 集成

> ID：10706404
> 
> 赞同：1
> 
> 时间：2012-05-22T16:46:34.163
> 
> 标签：php, mongodb, doctrine-orm, zend-framework2, zend-form2

我正在尝试将 zend framework 2 与 Mongo DB 集成，有人可以提供这样做的步骤或任何链接。

查询：可以不使用 Doctrine 2 进行集成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:21:36.873

先决条件是您需要安装 PECL MongoDB 驱动程序：

```
% sudo `which pecl` install mongo
% sudo sh -c 'echo "extension=mongo.so" > /usr/local/zend/etc/ext.d/mongo.ini'
% sudo ln -nfs /usr/local/zend/etc/ext.d/mongo.ini /usr/local/zend/etc/conf.d/
% sudo `which service` apache2 restart
% if [ `php -m|grep -i mongo` ]; then echo mongodb is installed; else echo mongodb has not been installed; fi 
```

**注意**：这里假设您使用的是 Zend Server CE。如果没有，`mongo.ini`则需要在您的发行版指定为扩展目录的目录中创建该文件：

```
%   php-config --extension-dir 
```

完成所有设置后，您可以按照[PHP 手册](http://php.net/manual/mongo.tutorial)中的教程进行操作。

# python - 如何使用python获取选择区域坐标？

> ID：10706406
> 
> 赞同：1
> 
> 时间：2012-05-22T16:46:35.223
> 
> 标签：python, screen, area

我想知道是否有一种简单的方法来获取屏幕上用鼠标选择的区域的坐标？

想象一下，我有一个小 gui，单击“选择”按钮，然后我在屏幕上绘制一个选择区域，它返回我选择区域的左上角/右下角坐标。

还有我应该使用哪种 gui 来兼容多平台？wxPython / wkTinker，还有其他吗？

感谢您指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:50:22.783

第一个问题取决于第二个问题，但通常您有类似 mousePressed 和 mouseRelease 事件，它们都提供坐标（请参阅[此处](http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm)的 Tkinter）。选定的矩形由这两个事件的坐标定义。

第二个问题相当主观，也取决于你到底想做什么。但另一个选择是[PyQt](http://www.riverbankcomputing.co.uk/software/pyqt/intro)。

# java - 褪色样品

> ID：10706409
> 
> 赞同：1
> 
> 时间：2012-05-22T16:46:48.877
> 
> 标签：java, swing, graphics, colors, swt

我需要一个用 Java 编写的褪色示例。我的要求是我有两个矩形。一个用红色填充，另一个用白色填充。当我单击任何按钮时，我希望红色开始褪色并移动绿色。一旦到达绿色位置，另一个矩形应该自动从黄蓝色开始。有人可以帮我吗？如果有任何用 Javaswing 或 SWT 编写的示例将会很好。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:12:30.813

签[出三叉戟](http://kenai.com/projects/trident/pages/Home)动画库。它使您可以轻松地在类中插入属性。还可以查看Kirill Grouchnikov（Trident 的作者）的[这些](http://www.pushing-pixels.org/2009/06/21/trident-part-1-hello-world.html)原始教程。

*编辑：不带三叉戟的动画示例*

以下示例基于[Filthy Rich Clients](http://filthyrichclients.org/)中的 AnimatedGraphics 示例：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class AnimatedGraphics extends JComponent implements ActionListener {

    Color startColor = Color.RED;   // where we start
    Color endColor = Color.GREEN;         // where we end
    Color currentColor = startColor;
    int animationDuration = 2000;   // each animation will take 2 seconds
    long animStartTime;         // start time for each animation

    public AnimatedGraphics() {
        Timer timer = new Timer(30, this);
        // initial delay while window gets set up
        timer.setInitialDelay(1000);
        animStartTime = 1000 + System.nanoTime() / 1000000;
        timer.start();
    }

    public void paintComponent(Graphics g) {
        g.setColor(getBackground());
        g.fillRect(0, 0, getWidth(), getHeight());
        g.setColor(currentColor);
        g.fillOval(0, 0, getWidth(), getHeight());
    }

    public void actionPerformed(ActionEvent ae) {
        // calculate elapsed fraction of animation
        long currentTime = System.nanoTime() / 1000000;
        long totalTime = currentTime - animStartTime;
        if (totalTime > animationDuration) {
            animStartTime = currentTime;
        }
        float fraction = (float)totalTime / animationDuration;
        fraction = Math.min(1.0f, fraction);
        // interpolate between start and end colors with current fraction
        int red = (int)(fraction * endColor.getRed() + 
                (1 - fraction) * startColor.getRed());
        int green = (int)(fraction * endColor.getGreen() + 
                (1 - fraction) * startColor.getGreen());
        int blue = (int)(fraction * endColor.getBlue() + 
                (1 - fraction) * startColor.getBlue());
        // set our new color appropriately
        currentColor = new Color(red, green, blue);
        // force a repaint to display our oval with its new color
        repaint();
    }

    private static void createAndShowGUI() {    
        JFrame f = new JFrame("Animated Graphics");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setSize(200, 200);
        f.add(new AnimatedGraphics());
        f.setVisible(true);
    }

    public static void main(String args[]) {
        Runnable doCreateAndShowGUI = new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        };
        SwingUtilities.invokeLater(doCreateAndShowGUI);
    }
} 
```

# error-reporting - 如何关闭 PHP + MySQL 错误格式化

> ID：10706418
> 
> 赞同：6
> 
> 时间：2012-05-22T16:47:31.943
> 
> 标签：error-reporting, php

如何关闭 PHP 错误格式以仅获取纯文本？这也应该影响 MySQL 相关的功能。

我想获得纯文本，而不是结构化的 HTML 错误消息。

更新

AS **Artefact2**建议我需要修改 php.ini 文件，所以

```
ini_set('html_errors', false); 
```

如果我实时需要它就可以了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T16:48:38.830

[http://www.php.net/manual/en/errorfunc.configuration.php#ini.html-errors](http://www.php.net/manual/en/errorfunc.configuration.php#ini.html-errors)

只需在 php.ini 中将 html_errors 设置为“关闭”。

# asp.net - Tweet 按钮不捕获 ASP.NET 上的 URL

> ID：10706419
> 
> 赞同：0
> 
> 时间：2012-05-22T16:47:36.280
> 
> 标签：asp.net, twitter, master-pages, ascx

我正在尝试使用[此处](https://twitter.com/about/resources/buttons)的文档将 Tweet 按钮添加到一些 ASP.NET 网站。我的代码很简单；我只是将其添加到我的网页中：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="ConML">Tweet</a>
<script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } } (document, "script", "twitter-wjs");</script> 
```

当我运行它时，Twitter 弹出窗口工作正常，但我的页面的 URL（应该被捕获以便共享）没有出现。换句话说，我只得到类似的东西：

> 欢迎来到 ConML！#ConML

我必须说我将 Twitter 代码放在 ASCX 用户控件和母版页中，而不是常规的 ASPX 页面中。我不确定这是否会有所作为。Twitter 的开发者网站似乎没有提及这一点，谷歌也没有提供太多帮助。

**编辑**. 我刚刚发现只有在我的开发机器上使用 Visual Studio 工作时才会出现这个问题。一旦我部署了网站并使用常规浏览器导航到它，Tweet 按钮就可以正常工作。不过，为什么它在开发模式下会失败？

欢迎提出建议。谢谢。

# c# - 如何在异步多线程爬虫中锁定回调类？

> ID：10706420
> 
> 赞同：1
> 
> 时间：2012-05-22T16:47:36.537
> 
> 标签：c#, .net, http, asynchronous

我编写了一个爬虫，它使用用户加载的单词列表在站点上执行多个搜索并解析每个结果页面。

为此，我编写了一个循环遍历单词列表的 main 方法，异步发送多个 http get 请求（使用 ThreadPool.QueueUserWorkItem）以获取当前单词的所有结果页面，直到找不到更多结果，然后继续到下一个词。

回调函数使用静态方法访问公共静态类，该静态方法解析返回的 html 并采取相应措施。现在，每次访问该方法时，我都会将其锁定在类类型上：

```
 static class Parser
{
    public static string ResponseAsString(HttpWebResponse response)
    {
        lock (typeof(Parser))
        {
            try
            {
                Stream stream;
                if (response == null || (stream = response.GetResponseStream()) == null) return string.Empty;
                using (var sr = new StreamReader(stream))
                    return sr.ReadToEnd();
            }
            catch { return string.Empty; }
        }
    }

    public static void CallbackMethod_ParseData(string html)
    {
        lock (typeof(Parser))
        {
            //Do some work here
        }
    }
} 
```

所以归结为我的问题：如何更有效地锁定类并在释放锁定时通知等待线程，或者我不应该将 Parser 设为静态类，而是让每个 ThreadPool 线程实例化它自己的此类实例？

非常感谢你的帮助，

-仍然在学习

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:51:32.777

锁不是必需的。静态方法是线程安全的，只要它们不共享静态数据，根据您的示例，它们不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:52:11.240

查看您的代码，我认为根本没有任何理由拥有锁。

# iphone - 我可以改变 mkpolylineview 的线条形状吗？

> ID：10706422
> 
> 赞同：1
> 
> 时间：2012-05-22T16:47:49.297
> 
> 标签：iphone, ipad, mapkit, polyline, mkoverlay

我想知道我是否可以在 mkpolyline 视图中使用定向箭头线而不是直线。

我将这些线用作叠加层。谁能告诉我如何将箭头线作为叠加层？

我需要为此子类 mkpolyline 或 mkoverlay 吗？我不知道该怎么办...谢谢您的帮助

# jasper-reports - Japerreport/ireport 如何将参数从主报表传递到数据集

> ID：10706427
> 
> 赞同：1
> 
> 时间：2012-05-22T16:48:10.110
> 
> 标签：jasper-reports

我在将参数传递给数据集时遇到问题。我的报告如下：

主要报告查询：

```
select distinct id_satellite from report.t_tmp_report_param where id_session = $P{id_session} order by id_satellite 
```

（id_satellite 是整数）

此查询至少提取两个值：（即）3 和 4。我需要这些值来构建详细信息带（在本例中为 2 个带）。

数据集查询：

```
select cn0 as x, elevation as y from mytable where id_satellite = ???? 
```

我应该用从 MAIN REPORT 查询中提取的值替换问号，因此在 3 之前和 4 之后。

我该如何解决这个问题？

* * *

谢谢您的回复。我的问题出在 XY 折线图上，因为 jasper 构建了两个细节带，但在这两个图中，只有一颗卫星（最后一颗卫星，在我的示例中 = 4）。我也有详细的表带。表中的值是正确的。这很奇怪……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:51:34.687

我只用子报告尝试过。但是[本文](http://alexandru-ersenie.com/2009/12/10/ireport-using-main-dataset-parameters-in-subdatasets-in-jasper-reports/)描述了您问题的解决方案。

# java - Eclipse Content Assist Error

> ID：10706430
> 
> 赞同：7
> 
> 时间：2012-05-22T16:48:20.793
> 
> 标签：java, android, eclipse, actionbarsherlock

Lately I have been having more and more issues with the content assist in Eclipse. In some of my projects, I get no proposals from the content assist, and in other projects I get some or all of the expected proposals. Typically there is no "error" in Eclipse, but here is an example of one when I do get an error:

> "Content Assist" did not complete normally. Please see the log for more information. Pb(324) The type android.support.v4.app.LoaderManager$LoaderCallbacks cannot be resolved. It is indirectly referenced from required .class files

I have tried the various suggestions (including but not limited to the two below) from similar questions with no luck. I have even gone as far as removing and re-installing eclipse and re-creating the projects without any of the Eclipse metadata or settings.

*   [Eclipse Content Assist not working with Android](https://stackoverflow.com/questions/4107515/eclipse-content-assist-not-working-with-android)
*   [Eclipse/Java code completion not working](https://stackoverflow.com/questions/908489/eclipse-java-code-completion-not-working)

Any help is greatly appreciated.

Eclipse SDK Version: 3.7.2 Build id: M20120208-0800

Android Development Toolkit Version: 18.0.0.v201203301601-306762

Error Log:

```
!ENTRY org.eclipse.ui 4 0 2012-05-22 09:25:34.061
!MESSAGE Pb(324) The type android.support.v4.app.LoaderManager$LoaderCallbacks cannot be resolved. It is indirectly referenced from required .class files
!STACK 0
org.eclipse.jdt.internal.compiler.problem.AbortCompilation: Pb(324) The type android.support.v4.app.LoaderManager$LoaderCallbacks cannot be resolved. It is indirectly referenced from required .class files
    at org.eclipse.jdt.internal.compiler.problem.ProblemHandler.handle(ProblemHandler.java:121)
    at org.eclipse.jdt.internal.compiler.problem.ProblemHandler.handle(ProblemHandler.java:179)
    at org.eclipse.jdt.internal.compiler.problem.ProblemReporter.handle(ProblemReporter.java:2062)
    at org.eclipse.jdt.internal.compiler.problem.ProblemReporter.isClassPathCorrect(ProblemReporter.java:4039)
    at org.eclipse.jdt.internal.compiler.lookup.UnresolvedReferenceBinding.resolve(UnresolvedReferenceBinding.java:54)
    at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.resolveType(BinaryTypeBinding.java:122)
    at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.getTypeFromTypeSignature(LookupEnvironment.java:1335)
    at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createMethod(BinaryTypeBinding.java:536)
    at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.createMethods(BinaryTypeBinding.java:638)
    at org.eclipse.jdt.internal.compiler.lookup.BinaryTypeBinding.cachePartsFrom(BinaryTypeBinding.java:365)
    at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:688)
    at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.createBinaryTypeFrom(LookupEnvironment.java:667)
    at org.eclipse.jdt.internal.codeassist.impl.Engine.accept(Engine.java:60)
    at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:142)
    at org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage(PackageBinding.java:183)
    at org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage(Scope.java:2688)
    at org.eclipse.jdt.internal.compiler.lookup.Scope.getType(Scope.java:2405)
    at org.eclipse.jdt.internal.compiler.ast.SingleTypeReference.getTypeBinding(SingleTypeReference.java:44)
    at org.eclipse.jdt.internal.compiler.ast.TypeReference.internalResolveType(TypeReference.java:132)
    at org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveType(TypeReference.java:204)
    at org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.resolveTypeFor(SourceTypeBinding.java:1374)
    at org.eclipse.jdt.internal.compiler.lookup.SourceTypeBinding.fields(SourceTypeBinding.java:699)
    at org.eclipse.jdt.internal.compiler.lookup.ReferenceBinding.availableFields(ReferenceBinding.java:166)
    at org.eclipse.jdt.internal.codeassist.InternalExtendedCompletionContext.searchVisibleFields(InternalExtendedCompletionContext.java:518)
    at org.eclipse.jdt.internal.codeassist.InternalExtendedCompletionContext.searchVisibleVariablesAndMethods(InternalExtendedCompletionContext.java:807)
    at org.eclipse.jdt.internal.codeassist.InternalExtendedCompletionContext.computeVisibleElementBindings(InternalExtendedCompletionContext.java:179)
    at org.eclipse.jdt.internal.codeassist.InternalExtendedCompletionContext.getVisibleElements(InternalExtendedCompletionContext.java:365)
    at org.eclipse.jdt.internal.codeassist.InternalCompletionContext.getVisibleElements(InternalCompletionContext.java:318)
    at org.eclipse.jdt.internal.ui.text.java.ParameterGuessingProposal.getAssignableElements(ParameterGuessingProposal.java:110)
    at org.eclipse.jdt.internal.ui.text.java.ParameterGuessingProposal.guessParameters(ParameterGuessingProposal.java:293)
    at org.eclipse.jdt.internal.ui.text.java.ParameterGuessingProposal.computeGuessingCompletion(ParameterGuessingProposal.java:228)
    at org.eclipse.jdt.internal.ui.text.java.ParameterGuessingProposal.computeReplacementString(ParameterGuessingProposal.java:194)
    at org.eclipse.jdt.internal.ui.text.java.LazyJavaCompletionProposal.getReplacementString(LazyJavaCompletionProposal.java:330)
    at org.eclipse.jdt.internal.ui.text.java.AbstractJavaCompletionProposal.apply(AbstractJavaCompletionProposal.java:364)
    at org.eclipse.jdt.internal.ui.text.java.JavaMethodCompletionProposal.apply(JavaMethodCompletionProposal.java:57)
    at org.eclipse.jdt.internal.ui.text.java.ParameterGuessingProposal.apply(ParameterGuessingProposal.java:121)
    at org.eclipse.jdt.internal.ui.text.java.AbstractJavaCompletionProposal.apply(AbstractJavaCompletionProposal.java:477)
    at org.eclipse.jdt.internal.ui.text.java.LazyJavaCompletionProposal.apply(LazyJavaCompletionProposal.java:488)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup.insertProposal(CompletionProposalPopup.java:930)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup.access$21(CompletionProposalPopup.java:894)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup$2.run(CompletionProposalPopup.java:495)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.jface.text.contentassist.CompletionProposalPopup.showProposals(CompletionProposalPopup.java:482)
    at org.eclipse.jface.text.contentassist.ContentAssistant.showPossibleCompletions(ContentAssistant.java:1656)
    at org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor$AdaptedSourceViewer.doOperation(CompilationUnitEditor.java:183)
    at org.eclipse.ui.texteditor.ContentAssistAction$1.run(ContentAssistAction.java:82)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.texteditor.ContentAssistAction.run(ContentAssistAction.java:80)
    at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
    at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:185)
    at org.eclipse.ui.internal.handlers.LegacyHandlerWrapper.execute(LegacyHandlerWrapper.java:109)
    at org.eclipse.core.commands.Command.executeWithChecks(Command.java:476)
    at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
    at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:169)
    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(WorkbenchKeyboard.java:468)
    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboard.java:786)
    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(WorkbenchKeyboard.java:885)
    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindings(WorkbenchKeyboard.java:567)
    at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$3(WorkbenchKeyboard.java:508)
    at org.eclipse.ui.internal.keys.WorkbenchKeyboard$KeyDownFilter.handleEvent(WorkbenchKeyboard.java:123)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1262)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1052)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1104)
    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1100)
    at org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1509)
    at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:4640)
    at org.eclipse.swt.widgets.Canvas.WM_CHAR(Canvas.java:345)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4528)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:341)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4972)
    at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2531)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3752)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:54:04.017

Try this

Window >> Preferences >> Java >> Editor >> Content Assist >> Restore defaults

Window >> Preferences >> Java >> Editor >> Content Assist >> Advanced >> Restore defaults

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T23:15:27.593

I ended up upgrading the ActionBarSherlock library to the latest 4.1 (http://actionbarsherlock.com/) and it has fixed my eclipse troubles.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:53:46.883

I had a similar problem with projects that used the V4 compatibility library when it was updated. Try removing the project dependency on the library, restarting Eclipse, and then adding the dependency back in. (I *think* this is what I did to resolve the issue, but if that doesn't work, I'll try to think of what else I might have done.)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-23T14:44:38.750

I had this problem too, with Pb(324) message. It turned out, that reading the message with understanding was enough to fix it. However what I did first was going to stackoverflow. No good :)

In my groovy project the dependent libraries were not automatically visible by autocompletion. Not sure why, I'm new to this stuff. So I was adding them manually. But I did not add manually the indirect dependencies. The error message specifies the class causing the problem. **I added a reference to the jar containing the problematic class** and bingo - no more code assist errors.

To be specific: *Project, Properties, Java Build Path, Libraries, Add External JARs*. Then I pointed to the directory, where gradle downloaded the lib.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-30T15:27:38.520

For me updating Eclipse worked.

# node.js - 即时从 node.js 数据流中抓取 URL

> ID：10706435
> 
> 赞同：0
> 
> 时间：2012-05-22T16:48:29.703
> 
> 标签：node.js, stream, scraper

我正在使用一个 node.js 项目（使用[Wikistream](https://github.com/edsu/wikistream)作为基础，所以不完全是我自己的代码），它流式传输实时维基百科编辑。该代码将每个编辑分解为其组成部分并将其存储为一个对象（请参阅[https://gist.github.com/2770152](https://gist.github.com/2770152)上的要点）。其中一个部分是 URL。我想知道在解析每个编辑时是否有可能为每个编辑抓取显示预编辑和后编辑维基百科页面之间差异的 URL，获取差异（在名为“diffchange diffchange-inline”的跨度类中，例如）并将其添加为对象的另一个属性。不对，它可能只是一个字符串，不必完全结构化。

我试过使用[nodeio](http://node.io/)并有一些这样的代码（我特别想只刮掉评论中标记的编辑（m [6]）作为可能的破坏行为）：

```
 if (m[6].match(/vandal/) && namespace === "article"){
    nodeio.scrape(function(){
        this.getHtml(m[3], function(err, $){
            //console.log('getting HTML, boss.');
            console.log(err);
            var output = [];
            $('span.diffchange.diffchange-inline').each(function(scraped){
                output.push(scraped.text);
            });
            vandalContent = output.toString();

          });

        });
    } else {
        vandalContent = "no content";
    } 
```

当它遇到条件语句时，它会刮一次，然后程序关闭。它不会将所需内容存储为对象的属性。如果不满足条件，它会存储一个设置为“无内容”的 vandalContent 属性。

我想知道的是：甚至有可能像这样在飞行中刮擦吗？抓取是否使程序陷入困境？是否有其他建议的方法来获得类似的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:57:38.697

我还没有使用nodeio，但签名看起来是一个异步回调，所以从程序流的角度来看，这发生在后台，因此不会阻止下一个语句的发生（下一个语句是你的 if 块之外的任何内容）。

看起来您正在尝试按顺序执行此操作，这意味着您需要重新考虑您希望回调执行的操作，或者通过将整个事情放在一个只有当您有破坏内容时才退出的 while 循环中来强制它按顺序执行（我不推荐）。

对于测试，请尝试在回调中对您的 vandalContent 执行 console.log 并查看它吐出的内容。

# c++ - c++中指针的奇怪行为

> ID：10706440
> 
> 赞同：2
> 
> 时间：2012-05-22T16:48:49.257
> 
> 标签：c++, pointers, memory-leaks, pass-by-reference

以下结果非常有趣，我很难理解它们。基本上我有一个具有int的类：

```
class TestClass{
public:
    int test;
    TestClass() { test = 0; };
    TestClass(int _test) { test = _test; };
    ~TestClass() { /*do nothing*/ };
}; 
```

一个接受 TestClass 指针的测试函数

```
void testFunction1(TestClass *ref){
    delete ref;
    TestClass *locTest = new TestClass();
    ref = locTest;
    ref->test = 2;
    cout << "test in testFunction1: " << ref->test << endl;
} 
```

这就是我在主要做的事情：

```
int main(int argc, _TCHAR* argv[])
{
    TestClass *testObj = new TestClass(1);
    cout << "test before: " << testObj->test << endl;
    testFunction1(testObj);
    cout << "test after: " << testObj->test << endl;
    return 0;
} 
```

我期望输出是：

```
test before: 1
test in testFunction1: 2
test after: 1 
```

但我得到以下输出：

```
test before: 1
test in testFunction1: 2
test after: 2 
```

有人可以解释一下吗。有趣的是，将 testFunction1 更改为：

```
void testFunction1(TestClass *ref){
    //delete ref;
    TestClass *locTest = new TestClass();
    ref = locTest;
    ref->test = 2;
    cout << "test in testFunction1: " << ref->test << endl;
} 
```

即在将 ref 指向新位置之前我不删除它，我得到以下输出：

```
test before: 1
test in testFunction1: 2
test after: 1 
```

如果有人能向我解释这种奇怪的行为，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:50:58.627

您获得了指向 in 对象的指针的副本`testFunction1()`，因此当您分配给它时，指针 in 的原始值`main()`不会改变

此外，您正在删除原始指针 (in ) 指向的对象 (通过调用`delete`in )，但由于 in 的值未更新，您正在访问一个无效的对象 - 事实上您可以读取您的值入, 纯属巧合, 不可信赖`testFunction1()``main()``main()``testFunction1()`

您在第二种情况下正确读取原始值（当您不调用时`delete`）的事实是因为原始对象没有被更改（您更改了一个新对象`testFinction1`并且指向它的指针`main`是相同的（如上所述） ) 并且对象还活着

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T16:54:36.663

当您在删除对象后访问它时，行为是未定义的。

您看到的行为来自系统中的内存分配算法。

那是在删除第一个 testclass 对象之后，为新对象分配内存。运行时只是重用内存。

要检查发生了什么，请打印指针的值：

```
void testFunction1(TestClass *ref){
    cout << ref << endl;
    delete ref;
    TestClass *locTest = new TestClass();
    cout << locTest << endl;
    ref = locTest;
    ref->test = 2;
    cout << "test in testFunction1: " << ref->test << endl;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T17:54:35.747

在这种情况下，您刚刚获得的新对象与您删除的旧对象位于同一地址。

实际上 testObj 在你调用 testFunction1 之后变成了一个悬空指针。

```
void testFunction1(TestClass *ref){
    delete ref;
    TestClass *locTest = new TestClass();
    cout << "locTest = " << locTest << endl;
    ref = locTest;
    ref->test = 2;
    cout << "test in testFunction1: " << ref->test << endl;
}

int main(int argc, char * argv[])
{
    TestClass *testObj = new TestClass(1);
    cout << "test before: " << testObj->test << endl;
    cout << "testObg = " << testObj << endl;
    testFunction1(testObj);
    cout << "test after: " << testObj->test << endl;
    cout << "testObg = " << testObj << endl;
    return 0;
} 
```

输出是：

```
test before: 1
testObg = 0x511818
locTest = 0x511818
test in testFunction1: 2
test after: 2
testObg = 0x511818 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T17:28:48.510

在此指令之后：

```
TestClass *testObj = new TestClass(1); 
```

您已经分配了一个包含`TestClass`对象的新内存区域，该对象的地址（我们称之为`maddr`）存储在`testObj`.

现在，这个指令：

```
cout << "test before: " << testObj->test << endl; 
```

输出`1`，如预期的那样。

里面`testFunction1()`有一个名为 的局部变量`ref`，它是一个包含值的指针`maddr`。

当你`delete ref`，你释放包含一个`TestClass`对象的内存区域，其地址是`maddr`。

然后分配一个新的内存区域：

```
TestClass *locTest = new TestClass(); 
```

并`locTest`包含它的地址，我们称之为`m1addr`。

然后您使用`ref`访问内存区域`m1addr`并将`int test`值更改为`2`。

该指令：

```
cout << "test in testFunction1: " << ref->test << endl; 
```

`2`按预期输出。

现在，回到`main`，您已经丢失了包含`TestClass`地址为的对象的区域的任何处理程序（即，您正在泄漏内存）并且不再分配`m1addr`指向的区域。`testObj`

当您`testObj`再次使用时，您将访问从 开始的内存区域，`maddr`该区域已被清除。访问的效果`testObj->test`是未定义的行为。

你所经历的可能是当你运行你的代码时`maddr == m1addr`，但这只能偶然发生，你不能依赖它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T17:00:24.170

奇怪的是，新对象（带有 2）正在创建的旧对象（带有 1）曾经是。您的原始指针仍指向该位置，因此当您访问它时，您会意外访问新对象（带有 2）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T17:35:36.177

testFunction1 参数中的 TestClass *ref 和 main 中的 TestClass *testObj 是指向同一事物的 2 个不同指针，但它们不是同一个指针。如果要在函数/方法中删除和重新分配对象，可以使用指向指针的指针作为参数。

正如其他人所提到的，在 testfunction1 之后，您正在访问一个在 testfunction1 中被删除的对象，这也提到了未定义的行为。悬空指针指向的内存在删除期间被释放，但内容可能仍然存在，直到在另一个调用 new 期间重新分配内存位置。因此，您正在使用随时可以很容易地覆盖的未分配空间。

希望这可以帮助

# javascript - 如何使用 Ajax 将 Javascript 变量传递给 Coldfusion？

> ID：10706441
> 
> 赞同：0
> 
> 时间：2012-05-22T16:48:57.057
> 
> 标签：javascript, ajax, coldfusion

我需要使用 Javascript 来检测本地用户的 UTC 偏移量，然后在我的 cfquery 中为我的大型网站的其余部分使用该 UTC 偏移量。

这是我想运行的自上而下的逻辑。我只需要帮助将 Javascript 数据（UTC 偏移量）从 Javascript 设置到 Coldfusion 变量中，以便它可以在我的 cfquery 的 SQL 中使用。

1.) 页面加载 2.) Ajax 调用简单的 Javascript 来获取用户的 UTC 偏移量 3.) 在 Coldfusion 变量中返回 UTC 偏移量 4.) Coldfusion 变量在 SQL cfquery 中用于调整 UTC 日期以适应用户时区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:51:42.737

1.  首先获取偏移量并发送到coldfusion cfc（假设您使用jquery js库）

    var offsetmin = new Date().getTimezoneOffset(); //以分钟为单位 var offsethr = offsetmin/60; //小时

    ```
    $.ajax({
     type: "POST",
     url: WebRoot + "/pathtocfc.cfc?method=createClientOffset",
     data: "offset="+offsethr,
     dataType: "json"
    }).done(function(result){
        //make sure you saved it successfully with your client ip address 
    ```

    });

2.  接下来在coldfusion中保存偏移量和ip

    ```
    <cffunction name="createClientOffset" access="remote" returnformat="JSON">
    <cfargument name="offset" >

    <!---get ip address from cgi scope--->

    <cftry>
      <!---try to save client ip and offset together using cfquery--->
    </cftry>

    </cffunction> 
    ```

3.在随后的页面请求中，调用 UDF 以尝试获取客户端偏移量或在运行查询以返回日期并从 gmt 日期中减去 utc 偏移量之前进行调用。

```
 <cffunction name="readoffset" access="public">
    <cfargument name="ipaddress" >

    <!---use cfquery to match ipaddress with offset if it doesn't exist then use a default offset or add logic to create one if it doesn't exist--->

      <cfreturn offset />
    </cffunction> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:36:49.817

一种可能的方法是使用 JavaScript 在他们点击的第一页上设置时间戳 cookie。然后在后续页面中使用 cfcookie 引用该 cookie。

```
var curDateTime = new Date();
var tzoffset = "-" + (curDateTime.getTimezoneOffset()/60);
var expiredate = new Date();
expiredate.setTime(expiredate.getTime()+(120*24*60*60*1000)); // set expire date to 120 from now
document.cookie = "local_tz="+tzoffset+";expires="+expiredate.toGMTString(); 
```

# objective-c - 如何在目标 C 中实现原子属性（有或没有 ARC）？

> ID：10706442
> 
> 赞同：0
> 
> 时间：2012-05-22T16:48:57.063
> 
> 标签：objective-c, multithreading, xcode4.3, synchronized

这就是我实现我的方式。Sometihng 只是不正确

```
-(void)setCurrentAnchor:(CLLocation *)currentAnchor 
{
    //CM(@"set current anchor");
    /*@synchronized (self)
     {

     }*/

    if (_currentAnchor==currentAnchor)
    {
        return;
    }
    //[Tools DoSomethingWithSynchronize:^{
    @synchronized(self){
        _currentAnchor=currentAnchor;
        [Timer searchCriteriaChanged];
        [cachedProperties setDistanceForAllBiz];
    }

    //}];

}

-(CLLocation *)currentAnchor
{
    //[Tools DoSomethingWithSynchronize:^{
    //}];
    @synchronized(self){

    } //Empty @synchronized section just to block every other thread
    [self setCurrentLocationasAnchorifNil];
    return _currentAnchor;
} 
```

目标当然是确保 currentAnchor 在更改时永远不会被访问。我这样做对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:58:09.477

最好使用简单的 getter/setter 实现——`@synthesize`理想情况下——并将所有更改响应逻辑移到 getter/setter 之外。如果您需要单个 getter/setter 响应逻辑，KVO 可以正常工作。如果您想批量响应多个属性更改，则必须有一个外部事务机制。

# flash - Flash 视频在 11.2 中损坏，永远寻找相同的位置

> ID：10706444
> 
> 赞同：1
> 
> 时间：2012-05-22T16:49:00.447
> 
> 标签：flash, video, adobe, mp4

我正在尝试为我的用户播放一些 Flash 视频，但从 11.2 开始，它不再有效。当我执行 tcpdump 时，它似乎一遍又一遍地寻找同一个位置：

```
0x00a0: 001e 5365 656b 696e 6720 3234 3930 3030 ..Seeking.249000
0x00b0: 2028 7374 7265 616d 2049 443a 2031 292e .(stream.ID:.1).
–
0x00a0: 001e 5365 656b 696e 6720 3234 3930 3030 ..Seeking.249000
0x00b0: 2028 7374 7265 616d 2049 443a 2031 292e .(stream.ID:.1).
–
0x00a0: 001e 5365 656b 696e 6720 3234 3930 3030 ..Seeking.249000
0x00b0: 2028 7374 7265 616d 2049 443a 2031 292e .(stream.ID:.1). 
```

这些视频是 mp4 格式，是从流媒体视频中录制的，在 11.1 及以下版本中运行良好。有谁知道 Flash Player 11.2 中的任何视频播放相关问题？

# javascript - 从 JavaScript 中的 XAML 元素中删除属性

> ID：10706446
> 
> 赞同：2
> 
> 时间：2012-05-22T16:49:07.160
> 
> 标签：javascript, xaml

我正在使用 Silverlight Web 应用程序中的 XAML 文件。我正在使用 JavaScript 来操作 xaml 文件并响应事件。我在图表上有一个椭圆元素列表，当我单击其中一个时，椭圆的填充设置为另一种颜色，覆盖样式中的填充设置。

因此，在单击椭圆后，我实际上得到了这样的结果：

```
<Ellipse x:Name="g46" Style="{StaticResource GainValue}" Canvas.Top="136" Canvas.Left="766" MouseLeftButtonUp="onDotClicked" Fill="Red" /> 
```

现在，当我单击第二个椭圆时，我想重置单击的第一个椭圆的颜色。不幸的是，我不知道如何使用 Javascript 删除属于 Ellipse（或任何其他）元素的属性。将属性设置为 null 会为 Ellipse 分配一个空字符串，我已经经历了六种变体`dot.removeAttribute('Fill')`，但都`dot['Fill'].remove`没有成功。

我基本上对在 JavaScript 中用于操作 xaml 对象的语法一无所知。我找到了一些描述 DOM 语法等的参考页面，但没有任何内容与我可以在此处实际使用的语法相对应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:57:05.717

您最好的选择可能是使用 jQuery 将 XAML 加载为 XML。

你可以做

```
var xamlDocument = getYourXaml(); // Implement this or replace with however you're getting the XAML
var xml = $(xamlDocument);
xml.removeAttr('Fill');

//If you need to save your XAML do it here, if it's part of the page it should just work. 
```

更多信息：[http ://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# javascript - 如何在固定时间间隔内实现 chrome 扩展弹出桌面通知

> ID：10706448
> 
> 赞同：0
> 
> 时间：2012-05-22T16:49:08.793
> 
> 标签：javascript, google-chrome-extension

我希望 chrome 以固定的时间间隔通知我。我尝试编写这段代码，但只显示一次。

```
var notification = webkitNotifications.createNotification(
  'icon.png',
  'Free your eyes',
  'Please take a break'
);

function showNotify()
{
  notification.show();
  setTimeout("showNotify()", 2000);
}

showNotify(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:54:43.933

用于[`setInterval()`](https://developer.mozilla.org/en/DOM/window.setInterval)定期运行代码。

尝试这样的事情：

```
function show() {
  var notification = /* ... */
}
setInterval(show, 2000); 
```

# wiki - Mediawiki 大众用户删除/合并/阻止

> ID：10706451
> 
> 赞同：6
> 
> 时间：2012-05-22T16:49:22.537
> 
> 标签：wiki, mediawiki, spam, spam-prevention

我的 wiki 上有大约 500 个垃圾邮件机器人和大约 5 个实际注册用户。我用 nuke 删除了他们的页面，但他们只是继续转发。我使用 reCaptcha 控制了垃圾邮件注册。现在，我只需要一种方法来一次删除/阻止/合并大约 500 个用户。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T18:30:02.003

您可以`user`手动从表中删除帐户，或者至少使用以下查询禁用其身份验证信息：

```
UPDATE /*_*/user SET
  user_password    = '',
  user_newpassword = '',
  user_email       = '',
  user_token       = ''
WHERE
  /* condition to select the users you want to nuke */ 
```

`/*_*/`（如果有的话，用你的替换[`$wgDBprefix`](https://www.mediawiki.org/wiki/Manual:$wgDBprefix)。哦，先做一个备份。）

清除`user_password`和`user_newpassword`字段会阻止用户登录。清除也会`user_email`阻止他们通过电子邮件请求新密码，并清除掉`user_token`他们可能拥有的任何活动会话。

* * *

**更新：**自从我第一次发布这篇文章以来，我在从 MediaWiki 安装中清理大量垃圾邮件用户和内容方面有了进一步的经验。[我已经在 Webmasters Stack Exchange 上的这个答案中](https://webmasters.stackexchange.com/questions/9194/mass-deletion-of-spam-revisions-in-mediawiki/45486#45486)记录了我使用的方法（基本上包括首先从数据库中删除用户，然后清除所有现在孤立的修订，最后运行 rebuildall.php 来修复链接表）.

* * *

或者，您可能还会发现[Extension:RegexBlock](http://www.mediawiki.org/wiki/Extension:RegexBlock)有用：

> “RegexBlock 是一个扩展，它添加了特殊页面，其中包含使用正则表达式来阻止、查看和取消阻止用户名和 IP 地址的界面。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-13T09:38:08.027

在接受的答案中应用解决方案存在风险。该方法可能会损坏您的数据库！它不完全删除用户，没有做任何事情来保持参照完整性，并且几乎肯定会导致显示错误。

[这里](http://www.mediawiki.org/wiki/Extension_talk:UserMerge#Mass_merging.3F_16932)提出了一个更好的解决方案（前提是您已经安装了[用户合并扩展](http://www.mediawiki.org/wiki/Extension:UserMerge)）：

> 我有一个有点尴尬的方法来通过变通方法完成批量合并。希望有人会觉得它有用！（必须在电子表格中有一点字符串连接技巧；或者可以使用 python 或类似脚本；或者使用具有批量替换功能的文本编辑器）
> 
> 1.  准备所有 SPAMuserID 的列表，将它们存储在电子表格或文本文件中。该列表可以从用户创建日志中准备。如果您确实具有 dB 访问权限，则可以将 Wiki_user 表导入本地列表。
>     
>     
> 2.  用于提交 Merge & Delete User 表单（通过单击按钮）的 post 方法应转换为 get 方法。这将为我们提供一个长 URL。[有关该方法，请参见http://www.mathworks.com/matlabcentral/newsreader/view_thread/242300](http://www.mathworks.com/matlabcentral/newsreader/view_thread/242300)上的第二条评论（由 Matthew Simoneau 于 2009 年 1 月 13 日发表） 。生成的 URL 字符串应如下所示：
>     
>     
>     
>     > http://(你的 Wiki 域)/Special:UserMerge?olduser=(OldUserNameHere)&newuser=(NewUserNameHere)&deleteuser=1&token=0d30d8b4033a9a523b9574ccf73abad8%2B\
>     
>     
> 3.  现在，将此 URL 分为四个部分：

```
 A: http: //(Your Wiki domain)/Special:UserMerge?olduser= 

 B: (OldUserNameHere) 

 C: &newuser=(NewUserNameHere)&deleteuser=1 

 D: &token=0d30d8b4033a9a523b9574ccf73abad8%2B\ 
```

> 4.  现在使用文本编辑器或电子表格，在每个垃圾邮件用户 ID 前面加上 A 部分，并在每个后缀加上 C 和 D 部分。C 部分将包括 NewUser（这是一个专门创建的单个虚拟用户 ID）。D部分，令牌字符串是一个会话相关令牌，每个用户每个会话都会更改。因此，每次需要新的会话/批次工作时，您都需要获得一个新的令牌。
>     
>     
> 5.  通过上述步骤，您应该得到一长串 URL，每个 URL 都可以为一个用户执行合并和删除操作。我们现在可以创建一个简单的 HTML 文件，查看它并在 Firefox 中使用像 DownThemAll 这样的批处理下载器。在每一行的开头和结尾添加两段“Linktext”。还要在顶部和底部添加并将文件另存为（例如：）userlist.html
>     
>     
> 6.  在 Firefox 中打开文件，使用 DownThemAll 插件并下载所有文件！实际上，您正在访问每个用户的合并和删除页面并单击按钮！
>     
>     
> 
> 尽管乍一看这可能是一项冗长而棘手的工作，但是一旦您遵循此方法，您就可以删除数以万计的用户，而无需太多手动操作。
> 
> 您可以通过打开一些下载的 html 文件（或通过在另一个窗口中查看最近的更改）来验证操作是否顺利。
> 
> 一个优点是它不直接编辑 MySQL 页面。它也不需要直接访问数据库。

我对引用的文本做了一些重写，因为原始文本包含一些缺陷。

# tfs - 如何允许供应商从企业网络外部管理 TFS 工作项

> ID：10706452
> 
> 赞同：0
> 
> 时间：2012-05-22T16:49:24.610
> 
> 标签：tfs, ldap

我们在内部为我们的 TFS 使用 LDAP 安全性，但我们希望为一些供应商提供 Web 访问权限以查看、创建或更新工作项。

任何人都可以推荐一种无需将 TFS 主机移动到外部位置即可完成此任务的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:27:51.657

您必须在外部打开您的 TFS 并为供应商创建用户帐户。

将您的 TFS 公开到 Internet 的几个参考：

*   [http://msdn.microsoft.com/en-us/library/bb668967.aspx](http://msdn.microsoft.com/en-us/library/bb668967.aspx)
*   [http://www.christiano.ch/wordpress/2010/05/01/microsoft-team-foundation-server-2010-and-external-access-fqdn/](http://www.christiano.ch/wordpress/2010/05/01/microsoft-team-foundation-server-2010-and-external-access-fqdn/)

# javascript - 如何使 dijit.form.Select 与具有相同值的多个项目一起使用？

> ID：10706454
> 
> 赞同：2
> 
> 时间：2012-05-22T16:49:28.680
> 
> 标签：javascript, widget, dojo

我有一个`dijit.form.Select`用于将标签映射到值的小部件。一些标签需要具有相同的值，但我需要能够在进行选择时区分标签。现在小部件的选项看起来像这样：

```
[
    {
        label: "A",
        value: "1",
    },
    {
        label: "B",
        value: "2"
    },
    {
        label: "C",
        value: "2"
    }
], 
```

That is done because the form's processing needs to know that 'B' and 'C' both actually mean 2, but I need to perform some different logic on another control when 'B' vs 'C' is selected. 我发现我可以`get("displayedValue")`在`onChange`事件处理程序中获取“显示”标签，但它总是会返回与当前值 (2) 匹配的**第一个**选项 (B)，这**不一定是用户选择的**。

那么，当多个标签需要评估为相同的值同时仍然能够区分标签时，我该如何处理呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T21:50:09.760

只需使用 dijit/form/Select 小部件`focusNode.textcontent`属性：

```
function disaplySelected() {
  document.getElementById("labelContainer").innerHTML = window.sel.focusNode.textContent;
  document.getElementById("valueContainer").innerHTML = window.sel.value;
}

require(["dijit/form/Select", "dojo/_base/window", "dojo/domReady!"], function(Select, win) {
  window.sel = new Select({
    name: "select2",
    options: [
      {label: "A",value: "1"},
      {label: "B",value: "2"},
      {label: "C",value: "2"}
    ],
  });
  window.sel.placeAt(win.body(), "first").startup();
});
```

```
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.10.1/dojo/dojo.js" data-dojo-config="async: true"></script>
  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.10.1/dijit/themes/claro/claro.css">
</head>

<body class="claro">
  <p>
    <button onclick="disaplySelected()">Display selected label</button>
    <br/>Selected item label: <span id="labelContainer"></span>
    <br/>Selected item value: <span id="valueContainer"></span>
  </p>
</body>
</html>
```

# json - 泽西杰克逊重复 JSON 容器属性

> ID：10706457
> 
> 赞同：1
> 
> 时间：2012-05-22T16:49:40.280
> 
> 标签：json, jersey, jackson

我有一些 jaxb 对象使用具有值的容器对象建模元数据结构，这可能是另一个容器对象或只是一个简单的对象（例如字符串）。

```
@XmlRootElement(name = "value")
public class Value 
{

    protected SimpleType type;
    protected Container container;

    @XmlElement
    public SimpleType getType()
    {
        return type;
    }

    public void setType(SimpleType type)
    {
        this.type = type;
    }

    @XmlInverseReference(mappedBy="value")
    @XmlElement
    public Container getContainer()
    {
        return container;
    }

    public void setContainer(Container container)
    {
        this.container = container;
    }
}

@XmlRootElement(name = "container")
public class Container 
{
    protected Value value;

    @XmlElement
    public Value getValue()
    {
        return value;
    }

    public void setValue(Value value)
    {
        this.value = value;
    }
}

@XmlRootElement(name = "type")
@XmlEnum
public enum SimpleType
{
        @XmlEnumValue("String")STRING,
        @XmlEnumValue("Boolean")BOOLEAN,
....etc.
} 
```

XML 看起来不错，但 JSON 最终具有重复的“容器”属性。

```
 <container>
          <value>
            <container>
              <value>
                <type>String</type>
              </value>
            </container>
          </value>
        </container>

            "container": {
              "value": {
                "container": {
                  "container": {
                    "value": {
                      "type": "STRING"
                    }
                  }
                }
              }
            } 
```

知道为什么会有这种差异吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:56:40.163

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

由于您的模型中有 MOXy 的`@XmlInverseReference`注释，您可能会对它如何应用于 JSON 案例感兴趣。

**输入.xml**

从您的问题中我可以看出，如果您在 and 之间具有双向关系，则 XML 表示应如下`Container`所示`Value`：

```
<?xml version="1.0" encoding="UTF-8"?>
<container>
    <value>
       <type>String</type>
    </value>
</container> 
```

**领域模型**

下面是如何映射您的域模型。我已经指定`@XmlAccessorType(XmlAccessType.FIELD)`并删除了访问器方法以使示例更短。

***容器***

```
package forum10706457;

import javax.xml.bind.annotation.*;

@XmlRootElement(name = "container")
@XmlAccessorType(XmlAccessType.FIELD)
public class Container 
{
    protected Value value;

} 
```

***价值***

```
package forum10706457;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlInverseReference;

@XmlAccessorType(XmlAccessType.FIELD)
public class Value 
{

    protected SimpleType type;

    @XmlInverseReference(mappedBy="value")
    protected Container container;

} 
```

**简单类型**

```
package forum10706457;

import javax.xml.bind.annotation.*;

@XmlEnum
public enum SimpleType
{
        @XmlEnumValue("String")STRING,
        @XmlEnumValue("Boolean")BOOLEAN,
} 
```

**jaxb.properties**

注解是 MOXy 扩展，因此`@XmlInverseReference`您需要在与域模型相同的包中添加一个名为 jaxb.properties 的文件，并使用以下条目将 MOXy 指定为 JAXB 提供程序。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的代码演示了如何加载 XML 文档，然后将生成的对象编组为 JSON。检查是否填充了双向关系。

```
package forum10706457;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Container.class);

        File xml = new File("src/forum10706457/input.xml");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Container container = (Container) unmarshaller.unmarshal(xml);

        System.out.println(container == container.value.container);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty("eclipselink.media-type", "application/json");
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(container, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。请注意`@XmlEnumValue("String")STRING`在 JSON 表示中是如何利用的。

```
true
{
   "container" : {
      "value" : {
         "type" : "String"
      }
   }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)
*   [http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html](http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:24:21.283

这是因为 和 之间的循环`Value`依赖`Container`

UPD。请参阅[JAXB 将循环引用映射到 XML](https://stackoverflow.com/questions/3073364/jaxb-mapping-cyclic-references-to-xml)

UPD2。请参阅[JsonBackReference](http://jackson.codehaus.org/1.9.3/javadoc/org/codehaus/jackson/annotate/JsonBackReference.html)和[JsonManagedReference](http://jackson.codehaus.org/1.9.3/javadoc/org/codehaus/jackson/annotate/JsonManagedReference.html)

# objective-c - iphone uipickerview：图像和文本

> ID：10706459
> 
> 赞同：3
> 
> 时间：2012-05-22T16:49:44.157
> 
> 标签：objective-c, ios, uipickerview, xcode4.3

是否可以在文本旁边放置图像（如图标）`UIPickerView` ？

我看到`UIPickerViews`了两列的例子：一个有图像，另一个有文本。这不是我需要的，我需要一个包含文本和图像的列

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:36:09.443

您需要为选择器的每一行创建自己的视图。如果它只是一个 UIImageView 和一个 UILabel，这很容易。然后，您可以使用此 UIPickerViewDelegate 方法将视图传递给您的选择器。

`- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view`

# c# - SQL Server CE WP7 中不出现行

> ID：10706461
> 
> 赞同：0
> 
> 时间：2012-05-22T16:49:51.513
> 
> 标签：c#, windows-phone-7, sql-server-ce

`ToDoDataContext`

在这里，我为数据库创建了一个上下文。

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Data.Linq;

namespace My_CookBook
{
    public class ToDoDataContext : DataContext
    {
        public static string DBConnectionString = "Data Source=isostore:/kupa.sdf";

        public ToDoDataContext(string connectionString)
            : base(connectionString)
        { }

        public Table<ToDoItem> ToDoItems;
    }
} 
```

`ToDoItem`

这是项目的模型。

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.ComponentModel;
using System.Data.Linq.Mapping;

namespace My_CookBook
{
    [Table]
    public class ToDoItem : INotifyPropertyChanged, INotifyPropertyChanging
    {
        // Define ID: private field, public property and database column.
        private int _toDoItemId;

        [Column(IsPrimaryKey=true, IsDbGenerated=true,DbType = "INT NOT NULL Identity", CanBeNull=false, AutoSync= AutoSync.OnInsert)]
        public int ToDoItemId
        {
            get
            {
                return _toDoItemId;
            }
            set
            {
                if (_toDoItemId != value)
                {
                    NotifyPropertyChanging("ToDoItemId");
                    _toDoItemId = value;
                    NotifyPropertyChanged("ToDoItemId");
                }
            }
        }

        /////////////////////////////////////// Nazwa //////////////////////////////////////////

        private string _Name;

        [Column]
        public string Name
        {
            get
            {
                return _Name;
            }
            set
            {
                if (_Name != value)
                {
                    NotifyPropertyChanging("Name");
                    _Name = value;
                    NotifyPropertyChanged("Name");
                }
            }
        }

        /////////////////////////////////////// Autor //////////////////////////////////////////

        private string _Autor;

        [Column]
        public string Autor
        {
            get
            {
                return _Autor;
            }
            set
            {
                if (_Autor != value)
                {
                    NotifyPropertyChanging("Autor");
                    _Autor = value;
                    NotifyPropertyChanged("Autor");
                }
            }
        }

        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;

        // Used to notify the page that a data context property changed
        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        #endregion

        #region INotifyPropertyChanging Members

        public event PropertyChangingEventHandler PropertyChanging;

        // Used to notify the data context that a data context property is about to change
        private void NotifyPropertyChanging(string propertyName)
        {
            if (PropertyChanging != null)
            {
                PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
            }
        }

        #endregion
    }
} 
```

**显示所有**

在此页面上应显示行。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Windows.Data;
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Windows.Media.Imaging;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Tasks;
using System.Collections.ObjectModel;
using System.ComponentModel;

namespace My_CookBook
{
    public partial class show_all : PhoneApplicationPage
    {

        // Data context for the local database
        private ToDoDataContext toDoDB;

        // Define an observable collection property that controls can bind to.
        private ObservableCollection<ToDoItem> _toDoItems;
        public ObservableCollection<ToDoItem> ToDoItems
        {
            get
            {
                return _toDoItems;
            }
            set
            {
                if (_toDoItems != value)
                {
                    _toDoItems = value;
                    NotifyPropertyChanged("ToDoItems");
                }
            }
        }

        // Constructor
        public show_all()
        {
            InitializeComponent();
            // Connect to the database and instantiate data context.
            toDoDB = new ToDoDataContext(ToDoDataContext.DBConnectionString);

            // Define the query to gather all of the to-do items.
            var toDoItemsInDB = from ToDoItem todo in toDoDB.ToDoItems
                                select todo;

            // Execute the query and place the results into a collection.
            ToDoItems = new ObservableCollection<ToDoItem>(toDoItemsInDB);

            toDoDB.SubmitChanges();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            this.NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        }

        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;

        // Used to notify the page that a data context property changed
        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        #endregion

    }
} 
```

**显示全部**

我使用绑定来检索行。

```
<Grid x:Name="ContentPanel1" Grid.Row="1" Margin="12,0,12,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <ListBox x:Name="toDoItemsListBox" ItemsSource="{Binding ToDoItems}" 
                     Grid.Row="0" Margin="12, 0, 12, 0" Width="440">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid HorizontalAlignment="Stretch" Width="440">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="100" />
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                Text="{Binding Path=Name}"
                                FontSize="{StaticResource PhoneFontSizeLarge}"
                                Grid.Column="1"
                                VerticalAlignment="Center"/>
                            <Button
                                Grid.Column="2"
                                x:Name="deleteTaskButton"
                                BorderThickness="0"                                
                                Margin="0">
                                <Image Source="Images/appbar.delete.rest.png"/>
                            </Button>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid> 
```

**添新**

在这里，我向数据库添加新行：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Windows.Data;
using System.Windows.Media.Imaging;
using Microsoft.Phone.Controls;
using Microsoft.Phone.Tasks;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Data.Linq;
using System.Data.Linq.Mapping;

namespace My_CookBook
{
    public partial class add_new : PhoneApplicationPage
    {
        // Constructor
        public add_new()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            this.NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        }

        private void slider1_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
            if (slider1 != null)
            {
                slider1.Value = Math.Round(e.NewValue);
                qwe((int)slider1.Value);
            }
        }

        private void qwe(int a)
        {
          stackPanel1.Height = 1250 + a * 159;
          stackPanel2.Height = a * 159;
        }

        private void button3_Click(object sender, RoutedEventArgs e)
        {
            CameraCaptureTask camera = new CameraCaptureTask();
            camera.Show();
            ManipulationCompletedEventArgs photo = new ManipulationCompletedEventArgs();
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            ToDoDataContext toDoDB = new ToDoDataContext(ToDoDataContext.DBConnectionString);
            ToDoItem newToDo = new ToDoItem();
            newToDo.Name = textBox1.Text;
            newToDo.Autor = textBox2.Text;

            toDoDB.ToDoItems.InsertOnSubmit(newToDo);
            toDoDB.SubmitChanges();
            MessageBox.Show("Pomyślnie dodano przepis.");

            this.NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        }

        #region INotifyPropertyChanged Members

        public event PropertyChangedEventHandler PropertyChanged;

        // Used to notify the page that a data context property changed
        private void NotifyPropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        #endregion
    }
} 
```

我的问题是，程序不显示`Show all`数据库中的任何行（在页面中）。为什么？

在调试器中是好的。我真的不知道出了什么问题。

# sql-server - 行句柄引用已删除的行或标记为删除的行

> ID：10706463
> 
> 赞同：1
> 
> 时间：2012-05-22T16:49:57.453
> 
> 标签：sql-server, sql-server-2005, vbscript, oledb

我们有一个旧网站给我们一个错误。它使用 VBScript，数据库是 SQL Server 2005。

这是代码：

```
set oNotes = server.CreateObject("SCRIPTING.DICTIONARY")

openSQL "SELECT * FROM v_client_notes WHERE contact_id = " &_
    my_contactID & " ORDER BY client_notes_duedate ASC"

do while rs.eof = false
    set temp = server.CreateObject("SCRIPTING.DICTIONARY")
    load_rs temp, rs
    set oNotes(trim(rs("client_notes_id"))) = temp
    rs.movenext'error on this line
loop 
```

错误：

> 用于 SQL Server 错误“80040e23”的 Microsoft OLE DB 提供程序
> 
> 行句柄指的是已删除的行或标记为删除的行。

此错误并非一直发生，仅针对带有某些contact_id 返回的记录集。无法确定有效和无效的区别。

如您所见，错误发生在 rs.movenext 上。

我已确保该表具有主键 (client_notes_id)。

感谢您的帮助！

**编辑**

这是 load_rs 的代码：

```
function load_rs(dict,Byref record)
    for each thing_record in record.fields
        dict(thing_record.name) = trim(thing_record.value)
    next
end function 
```

这是更新脚本。这是在我发布到的单独页面上（有点 AJAX 风格）：

```
If request("client_notes") <> "" then
        client_notes_subject = request("client_notes_subject")
        client_notes_postedby = session("user") 
        client_notes_duedate = request("client_notes_duedate")
        if client_notes_duedate = "" then
            client_notes_duedate = NULL
        end if
        client_notes_date_entered = request("client_notes_date_entered")
        client_notes =  request("client_notes")
        if isnumeric(request("contactID")) then contact_id = request("contactID")
        if clientnotes_id="" then clientnotes_id="0"
        openSQL("SELECT * FROM client_notes WHERE client_notes_id=" & clientnotes_id)
        if rs.EOF then
            openSQL("SELECT newid()")
            client_notes_guid = rs(0)
            openSQL("select * from client_notes")
            rs.addnew
        else
            client_notes_guid = rs("guid")
            rs.update
        end if 

        rs("contact_id") = contact_id   
        rs("client_notes_subject") = client_notes_subject
        rs("client_notes_postedby") = session("user")
        'if client_notes_duedate <> Null then
        rs("client_notes_duedate") = client_notes_duedate 
        'end if
        rs("client_notes_date_entered") = client_notes_date_entered
        rs("client_notes") = client_notes
        rs("guid")=client_notes_guid
        rs.update

        'if client_notes_duedate = Null then 
        '   sqlSetNullnotes = "UPDATE client_notes SET client_notes_duedate = NULL WHERE client_notes_id=" & clientnotes_id
        '   opensql sqlSetNullnotes
        'end if

        next_due_date = request("next_due_date")
        if next_due_date = "" then
            next_due_date = NULL
        end if

        openSQL("SELECT * FROM " & MainContactsDB & " WHERE Contact_ID=" & contactID)
        rs("Last_Contact_Date") = client_notes_date_entered
        rs("Next_Contact_Date") = next_due_date
        rs.update
    end if 
```

开放SQL方法：

```
Set rs = Server.CreateObject("ADODB.Recordset")
function openSQL(SQLrs)
    if rs.state = 1 then rs.close
    'response.write sqlRS
    rs.Open SQLrs, conn, 3, 3
end function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:41:06.227

你目前有这个：

```
openSQL("SELECT * FROM " & MainContactsDB & " WHERE Contact_ID=" & contactID)
rs("Last_Contact_Date") = client_notes_date_entered
rs("Next_Contact_Date") = next_due_date
rs.update 
```

为什么没有处理`rs.EOF`？也许这就是代码死亡的地方？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:24:27.310

好的，我能够解决这个问题。

我正在针对连接 2 个表的视图运行查询。

问题是有时提交的注释没有用户 ID，因此从一个表到另一个表的连接不起作用，因为用户 ID 为空。我将查询修改为以下内容：

```
"SELECT * FROM v_client_notes WHERE contact_id = " & my_contactID & " AND user_id IS NOT NULL ORDER BY client_notes_duedate ASC" 
```

现在错误不再出现，它只是排除了未分配给某人的笔记。所以现在开始解决为什么没有将笔记分配给某人。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-08T05:35:53.070

应该在您要对其执行操作的表中具有主键，之后更新该表没有任何问题

# c - malloc 如何在多线程环境中工作？

> ID：10706466
> 
> 赞同：55
> 
> 时间：2012-05-22T16:50:08.190
> 
> 标签：c, linux, gcc, malloc, x86-64

典型的`malloc`（对于 x86-64 平台和 Linux 操作系统）是在开始时天真地锁定互斥锁并在完成后释放它，还是以更聪明的方式在更精细的级别上锁定互斥锁，从而减少锁争用？如果它确实是第二种方式，它是如何做到的？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-22T17:07:01.060

`glibc 2.15`经营多个分配*领域*。每个竞技场都有自己的锁。当一个线程需要分配内存时，`malloc()`选择一个arena，锁定它，并从中分配内存。

选择竞技场的机制有些复杂，旨在减少锁争用：

```
/* arena_get() acquires an arena and locks the corresponding mutex.
   First, try the one last locked successfully by this thread.  (This
   is the common case and handled with a macro for speed.)  Then, loop
   once over the circularly linked list of arenas.  If no arena is
   readily available, create a new one.  In this latter case, `size'
   is just a hint as to how much memory will be required immediately
   in the new arena. */ 
```

考虑到这一点，`malloc()`基本上看起来像这样（为简洁而编辑）：

```
 mstate ar_ptr;
  void *victim;

  arena_lookup(ar_ptr);
  arena_lock(ar_ptr, bytes);
  if(!ar_ptr)
    return 0;
  victim = _int_malloc(ar_ptr, bytes);
  if(!victim) {
    /* Maybe the failure is due to running out of mmapped areas. */
    if(ar_ptr != &main_arena) {
      (void)mutex_unlock(&ar_ptr->mutex);
      ar_ptr = &main_arena;
      (void)mutex_lock(&ar_ptr->mutex);
      victim = _int_malloc(ar_ptr, bytes);
      (void)mutex_unlock(&ar_ptr->mutex);
    } else {
      /* ... or sbrk() has failed and there is still a chance to mmap() */
      ar_ptr = arena_get2(ar_ptr->next ? ar_ptr : 0, bytes);
      (void)mutex_unlock(&main_arena.mutex);
      if(ar_ptr) {
        victim = _int_malloc(ar_ptr, bytes);
        (void)mutex_unlock(&ar_ptr->mutex);
      }
    }
  } else
    (void)mutex_unlock(&ar_ptr->mutex);

  return victim; 
```

这个分配器被称为[`ptmalloc`](http://www.malloc.de/en/). 它基于Doug Lea 的[早期工作](http://g.oswego.edu/dl/html/malloc.html)，由 Wolfram Gloger 维护。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-22T17:16:55.647

[Doug Lea`malloc`](http://g.oswego.edu/dl/html/malloc.html)使用了粗略锁定（或无锁定，取决于配置设置），其中对 // 的每个调用都`malloc`受到全局互斥锁的保护。这是安全的，但在高度多线程的环境中可能效率低下。`realloc``free`

[`ptmalloc3`](http://www.malloc.de/en/index.html)，这是当今大多数 Linux 系统上使用的 GNU C 库 (libc) 中的默认`malloc`实现，具有更细粒度的策略，如[aix 的答案](https://stackoverflow.com/a/10706725/9530)中所述，它允许多个线程同时安全地分配内存。

[`nedmalloc`](http://www.nedprod.com/programs/portable/nedmalloc/)是另一个独立的实现，它声称比`ptmalloc3`其他各种分配器具有更好的多线程性能。我不知道它是如何工作的，而且似乎没有任何明显的文档，所以你必须检查源代码才能了解它是如何工作的。

# prestashop - 获取用户 ID Prestashop

> ID：10706469
> 
> 赞同：2
> 
> 时间：2012-05-22T16:50:28.110
> 
> 标签：prestashop

```
function get_user_id() 
{
    global $cookie;
    $userid = NULL;

    if (isset($cookie->id_customer))
    {
        $userid = $cookie->id_customer;
    }

    return $userid;
} 
```

为什么即使登录，用户 ID 仍然返回 null？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-29T19:22:54.190

如果使用 Prestashop 1.5 使用`Context`object 代替：

```
$this->context->customer->id; 
```

或者

```
Context::getContext()->customer->id 
```

如果没有从父类继承的上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:40:39.690

$params['cookie']->id_customer

你不应该使用全局变量。

# groovy - Groovy 闭包——这段代码发生了什么？

> ID：10706471
> 
> 赞同：0
> 
> 时间：2012-05-22T16:50:34.467
> 
> 标签：groovy, closures

作为初学者 groovy 开发人员，我试图理解我继承的以下 groovy 代码行：

```
maxCount = skillsDist.findAll {it.mValue.value >= 0 }.max { it.mValue.value }.mValue.value
minCount = skillsDist.findAll { it.mValue.value >= 0  }.min { it.mValue.value }.mValue.value 
```

该`skillsDist`对象是对 Java 类型的对象的引用`Set<CalculationResult>`。每个`CalculationResult`都有一个`int`字段`mValue`。

我正在努力解决的部分是最大值和最小值之后的关闭。显然，我猜它会从集合中找到最小值和最大值，但我需要修改它并且不理解这一点感到不舒服。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:02:28.990

上的`findAll`迭代器`set`。它创建一个新`set`元素并添加所有值大于或等于 0 的元素。max 操作遍历子集并搜索最大值。

第二行相同（期望它查找最小值）。

# python - 使用 Paste 部署 Flask 应用程序

> ID：10706475
> 
> 赞同：0
> 
> 时间：2012-05-22T16:50:39.060
> 
> 标签：python, flask, paster

我正在使用 Flask 构建 Web 服务，并且正在尝试使用 Paster 部署一个简单的“Hello, World”应用程序。不过，我无法将所有内容配置为一起工作。我已经看到谷歌关于使用 virtualenv 和 zcbuildout 运行 Flask 的热门文章，但这对于一个非常基本的应用程序来说似乎有点过分了。现在，当我尝试使用我的应用加载 URL 时，我收到此错误：

```
Traceback (most recent call last):
File "/usr/lib/python2.7/dist-packages/paste/httpserver.py", line 1068, in process_request_in_thread
  self.finish_request(request, client_address)
File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
  self.RequestHandlerClass(request, client_address, self)
File "/usr/lib/python2.7/SocketServer.py", line 639, in __init__
  self.handle()
File "/usr/lib/python2.7/dist-packages/paste/httpserver.py", line 442, in handle
  BaseHTTPRequestHandler.handle(self)
File "/usr/lib/python2.7/BaseHTTPServer.py", line 343, in handle
  self.handle_one_request()
File "/usr/lib/python2.7/dist-packages/paste/httpserver.py", line 437, in handle_one_request
  self.wsgi_execute()
File "/usr/lib/python2.7/dist-packages/paste/httpserver.py", line 287, in wsgi_execute
  self.wsgi_start_response)
AttributeError: GraffitiApp instance has no __call__ method 
```

我的应用程序配置如下所示：

```
[DEFAULT]
loglevel = WARN
browser_cache_ttl = 30

[app:main]
use = egg:GraffitiService

[server:main]
use = egg:Paste#http
host = 0.0.0.0
port = %(graffiti_port)s 
```

我的应用程序代码如下所示：

```
from flask import Flask

app = Flask(__name__)
app.debug = True

class GraffitiApp:

    @app.route('/')
    def hello_world():
        return "Hello World!"

    @app.route('/other')
    def other_page():
        return "Other page!"

    def main():
        app.run(debug = True)

if __name__ == "__main__":
    app.run(debug = True) 
```

我是否需要创建一个`__call__()`方法并将任何 URL 映射到适当的函数，或者我需要对我的配置进行更改？

**编辑**

由于找不到名为“main”的入口点出现错误，我正在使用名为 main.py 的工厂：

```
import logging

from graffiti import GraffitiApp

def make_app(globalArgs, **localArgs):
    loglevelname = globalArgs.get("loglevel", "INFO").lower()

    if loglevelname == 'critical':
        loglevel = logging.CRITICAL
    elif loglevelname == 'debug':
        loglevel = logging.DEBUG
    elif loglevelname == 'error':
        loglevel = logging.ERROR
    elif loglevelname == 'fatal':
        loglevel = logging.FATAL
    elif loglevelname == 'info':
        loglevel = logging.INFO
    elif loglevelname == 'warn' or loglevelname == 'warning':
        loglevel = logging.WARN
    else:
        loglevel = logging.NOTSET
        loglevelname = 'notset'

    FORMAT = "%(asctime)s %(name)s %(levelname)s %(message)s"
    logging.basicConfig(format = FORMAT, level = loglevel)
    logging.info("Log level set to %s" % (loglevelname.upper()))

    return GraffitiApp() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:26:20.883

看起来服务器`GraffitiApp()`在应该运行`Flask()`实例时正在尝试运行您的类`app`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T07:45:02.090

OFFTOP（对不起，但你的代码让我眼前一亮）：

```
import logging

from graffiti import GraffitiApp

def make_app(globalArgs, **localArgs):
    loglevelname = globalArgs.get("loglevel", "INFO")
    loglevel = getattr(logging, loglevelname.upper(), logging.NOTSET)

    FORMAT = "%(asctime)s %(name)s %(levelname)s %(message)s"
    logging.basicConfig(format = FORMAT, level = loglevel)
    logging.info("Log level set to %s" % (loglevelname))

    return GraffitiApp() 
```

# android - Android/Monodroid 中的旋转数据重置

> ID：10706476
> 
> 赞同：0
> 
> 时间：2012-05-22T16:50:54.867
> 
> 标签：android, xamarin.android

我有一个文本字段，指示用户选择的日期。我还为用户提供了一个按钮来更改当前日期。我面临的问题如下。

1\. 在 Oncreate 方法中，我将文本字段设置为当前日期。创建活动时，它会显示当前日期。

1.  我使用按钮并将日期更改为其他日期。

这一切都很好..

但是当我旋转设备时，再次调用 oncreate 并将文本字段更改为当前字段。我希望文本字段保留用户选择的一个。

请在这个问题上帮助我。有什么办法可以防止这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:09:40.250

屏幕旋转会杀死您的活动并导致整个生命周期重新启动。发生这种情况时，onCreate 仍然可以访问启动 Activity 的原始意图，并且某些小部件可能会保留它们的某些状态（例如 EditTexts），但您的大部分动态 Activity 数据将丢失。为防止这种情况，请考虑使用该`onSaveInstanceState`方法。这将允许您在旋转杀死屏幕之前将任何重要的数据成员放入一个 Bundle 中。然后将此 Bundle 作为参数传递给您的 onCreate`savedInstanceState.` 以下是有关此的开发文档：

[http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)

在您的情况下，您需要通过将其作为额外的 Bundle 放入来保存您的日期值。然后，在 onCreate 中，检查 savedInstanceState 是否不为 null，表示它包含您的日期并进行相应处理。此外，请确保如果您稍后在活动生命周期中为此文本设置默认值，它不会破坏您的检索日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:00:52.813

您需要在旋转之前保存变量。我认为最好的选择是使用 Application 类作为保存变量并在 onPause() 函数中执行此操作的地方。

# c# - 使用 WebApi ( $inlinecount ) 进行 OData 分页

> ID：10706479
> 
> 赞同：10
> 
> 时间：2012-05-22T16:51:06.557
> 
> 标签：c#, asp.net, pagination, odata, asp.net-web-api

我正在使用 OData 对从 Web api 调用返回的一长串项目进行分页。我可以通过带有开始和结束索引的 url 过滤数据。

我的问题是，我怎么知道项目的总数？所以我可以在调用 web api 的移动设备上显示第 1 页，共 3 页（20 项）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:10:33.470

您可以`$inlinecount=allpages`在查询中使用以获取结果中所有实体的计数，而无需顶部和跳过。例如：

[http://services.odata.org/OData/OData.svc/Products?$top=1&skip=1&$inlinecount=allpages](http://services.odata.org/OData/OData.svc/Products?$top=1&skip=1&$inlinecount=allpages)

返回单个产品，但内联计数为 9（因为实体集中有 9 个产品）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:29:52.587

试试这种方法： http: [//www.strathweb.com/2012/08/supporting-odata-inlinecount-with-the-new-web-api-odata-preview-package/](http://www.strathweb.com/2012/08/supporting-odata-inlinecount-with-the-new-web-api-odata-preview-package/)

它使用最新的 Web API OData 包。

在最终确定的 Web API OData 包发布之前（今年秋天的某个时候，应该在 11 月左右），当 $inlinecount 支持开箱即用时，这个解决方案可能是最好的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T17:11:15.283

I had the exact issue last week. [Check out Extending your ASP.NET Web API responses with useful metadata](http://www.strathweb.com/2012/06/extending-your-asp-net-web-api-responses-with-useful-metadata/)

I used this post and sample code to get a paging grid up and running using OData. As detailed in the sample I created a delegating handler to capture the HttpResponseMessage and wrap it in custom metadata that includes an item count. A custom attribute, CustomQueryableAttribute, is also created that inherits the default QueryableAttribute.

It may sound a little complex here but is actually pretty simple to implement. I had something up and running in about 30 minutes.

Hopefully future versions of the Web API have more complete OData support.

EDIT: Odata support will NOT be shipping with the Web API. The queryable attribute is being removed for the RTM release. More complete OData support will be available sometime after the initial relase via a separate Nuget package.

# html - 动态 HTML 页面到 pdf

> ID：10706480
> 
> 赞同：1
> 
> 时间：2012-05-22T16:51:11.150
> 
> 标签：html, pdf, converter

我知道有一个类似问题的列表，但所有处理页面都没有用户交互（静态，即使可能存在一些 js）。

假设我们有一个用户可以交互的页面（例如 svg 比更改，或带有向下钻取的 html 表 - 内容更改）。这些交互将改变页面。输入问题时在stackoverflow中也会发生同样的情况......

这个想法是添加一个按钮，“转换为 pdf”获取 html 的状态并向用户发送回 pdf 版本（我们有一个 Java 服务器）。

使用浏览器的打印不是我正在寻找的答案:-)。

这是月球上的一根棍子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:59:44.760

iTextPDF和**Aspose.PDF都允许您****这样**做（我已经看到它们在两个不同的项目中使用），但是***没有魔法，您必须做一些工作***。

 ***步骤大致是：

1.  获取（作为字符串）要使用 jQuery 或 innerHTML 打印的文档部分
2.  调用服务器端的服务将其转换为 PDF
3.  [服务器端] 使用基于白名单的工具来清理 hmtl（除非你想被黑客入侵）。**JSoup**非常适合。
4.  [服务器端] 使用 IText 或 Aspose API 从 HTML 创建 PDF（这并不简单，您必须阅读文档）
5.  下载文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:57:41.567

您必须存储生成 HTML 视图的参数（即用户单击的内容、他们所做的选择等）。如果你有一个生成 HTML 视图的参数列表，你可以有一个方法来接受参数列表（JSON 帖子？），生成 HTML 视图并将其传递给你的 PDF 生成例程。为此，我对 Java 库不太熟悉，但 PHP 有 TCPDF 可以采用 html 输出基本上为您生成 PDF。当然，有 Java 库可以让您做同样的事情，或者您可以使用参数来获取行/数组的列表，这些行/数组可以使用您选择的 PDF 库进行迭代和输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:16:14.390

我还推荐 DocRaptor，这是我公司构建的 HTML 到 PDF API，Expected Behavior。

DocRaptor 使用 Prince XML 生成 PDF，因此比同类产品产生更高质量的结果。

使用我们的服务将 PDF 生成添加到您自己的 Web 应用程序就像向我们的服务器发出 HTTP POST 请求一样简单。

这是 DocRaptor 主页的链接：

[猛禽博士](http://docraptor.com/)

以及指向我们 API 文档的链接：

[DocRaptor API 文档](http://docraptor.com/documentation/)***

# ruby-on-rails - 在 osx 上为 ruby on rails 项目安装 qrencoder gem

> ID：10706481
> 
> 赞同：2
> 
> 时间：2012-05-22T16:51:13.593
> 
> 标签：ruby-on-rails, macos, gem, installation

我正在尝试在我的 mac osx 10.7.4 上安装 qrencoder gem，以便在 ruby​​ on rails 项目中使用。

当我尝试 gem install qrencoder 这是我得到的：

`ERROR: Error installing qrencoder: ERROR: Failed to build gem native extension. /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb checking for qrencode.h... yes checking for QRinput_new() in -lqrencode... no *** extconf.rb failed *** Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers. Check the mkmf.log file for more details. You may need configuration options.`

mkmf.log 文件除了上面没有说任何东西。我已经用 brew 安装了 qrencode-3.3.0，但是 gem 安装失败：知道吗？

当我输入 qrencode 时，这是我得到的：

“dyld：库未加载：/usr/local/lib/libqrencode.3.dylib 引用自：/usr/local/bin/qrencode 原因：库版本不兼容：qrencode 需要 7.0.0 或更高版本，但 libqrencode.3。 dylib 提供版本 5.0.0 Trace/BPT 陷阱：5"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:17:34.903

首先通过自制软件安装 libqrencode：

```
 brew install qrencode 
```

然后尝试再次安装 gem：

```
 gem install qrencoder 
```

如果您没有自制软件和/或希望从源代码编译，则在[https://github.com/harrisj/qrencoder](https://github.com/harrisj/qrencoder)有更详细的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T12:22:46.713

要在 ubuntu 12.04 上安装 qrencode，请运行以下命令：--

```
sudo apt-get install qrencode libqrencode-dev 
```

# html - VB6，如何限制用户访问文件夹内的 html 文件

> ID：10706482
> 
> 赞同：0
> 
> 时间：2012-05-22T16:51:24.287
> 
> 标签：html, vb6

**大家好你们好**

我想在 Visual Basic 6 应用程序中显示一些 HTML 文件，我使用浏览器对象。有没有办法阻止其他浏览器查看这些文件？换句话说，我希望只有我的应用程序可以访问 HTML 文件的内容。如果你有一个例子，你能给我举一个关于你的解决方案的例子吗？

**注意：** html 文件在用户计算机内（离线）。而且我不想使用.net

感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T20:52:29.417

WebBrowser 控件（IE 的一部分，不是 VB6）将接受使用该`res:`协议的导航。这意味着您可以在程序中嵌入 HTML 资源或创建单独的 HTML 资源 DLL。

使用“HTML”作为资源*类型*，使用每个项目的“文件名”作为资源*id*。

然后访问相当简单：

```
WebBrowser1.Navigate "res://" & App.Path _
                   & "\" & App.EXEName _
                   & ".exe/HTML/sample.htm" 
```

图片和其他链接项目可以使用相对 URL：

```
<body background="image.jpg"> 
```

...`image.jpg`另一个包含 JPEG 图像的 HTML 资源在哪里。

这不提供任何类似加密的功能，但它确实降低了随意探索和查看 HTML 的可能性。

# pdf - 有没有办法使用 Joomla 中的 {loadposition} 生成 PDF 和 PRINT 文章？

> ID：10706483
> 
> 赞同：0
> 
> 时间：2012-05-22T16:51:24.760
> 
> 标签：pdf, printing, joomla, module

我想创建包含模块的 PDF 和打印文章（我正在使用 loadposition）。有没有办法做到这一点？我应该如何创建 PDF 并在模块中使用打印选项？

* * *

**解决了**

我已经在我的模块 jspdf 中实现了（更多信息：http://code.google.com/p/jspdf/）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:28:08.707

你的问题我不是很清楚...

*   你想要Joomla 的打印/PDF 功能吗？1.5 在已插入的文章中包含模块内容`{loadposition modulename}`？

如果是这样，那么你就不走运了，打印/PDF 函数只传递了文章内容和定义`print.css`来生成视图。PDF 按钮的另一个问题是它没有使用任何可能在文章中使用的内容插件，因此您会`{loadmodule modulename}`在 PDF 中看到标签而不是模块内容。唯一相对简单的解决方法是有一个自定义按钮来告诉浏览器执行打印页面调用带有打印模板的整个视图。

*   或者您想包含一个带有 PDF + 打印按钮的模块？

任何可以提供打印/PDF 按钮的模块都必须做很多工作来确定实际打印的是哪篇文章——我不知道有任何像 Joomla 那样做的！在每个文章视图中都有这些服务的内置按钮。

在 Joomla！1.5 有一组内置的文章按钮（即 com_content），它们包括打印、PDF 和电子邮件服务。在 Joomla！2.5 行（即 1.6+）[PDF 生成已被删除](http://docs.joomla.org/What%27s_new_in_Joomla_1.6#Removed_features)。

[但是，您可以使用Joomla 扩展目录上的“](http://extensions.joomla.org/)[打印和 PDF](http://extensions.joomla.org/extensions/style-a-design/print-a-pdf) ”扩展之一将 PDF 工具添加回 Joomla 2.5 。我们为客户使用过的最全面的一种是[Phoca PDF](http://extensions.joomla.org/extensions/style-a-design/print-a-pdf/7492)，我们个人在我们的网站上不提供打印到 PDF 的功能。

# java - Java字符串字符集解析

> ID：10706488
> 
> 赞同：0
> 
> 时间：2012-05-22T16:51:36.863
> 
> 标签：java, character-encoding

我正在使用 Jsoup API 解析一些网页。但是我得到了 1 个字符集中的页面，并且必须将它们解析为其他

问题：如何将第 1 行解析为第 2 行？

```
String str1 = "Um grupo ligado &agrave; al-Qaeda assumiu o "
    + "ataque e amea&ccedil;ou fazer outros.";

String str2 = "Um grupo ligado &#224; al-Qaeda assumiu o "
    + "ataque e amea&#231;ou fazer outros.";

//(The text above translate to some news about WTC) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:15:36.657

我还没有真正测试过[Jsoup](http://jsoup.org/)，但是当我需要使用该类将 HTML 转换为 XML 时， [JTidy](http://jtidy.sourceforge.net/)对我非常有帮助`org.w3c.tidy.Tidy`。这会自动转换实体。

```
static String str1 = "Um grupo ligado &agrave; al-Qaeda assumiu o "
        + "ataque e amea&ccedil;ou fazer outros.";

public static void main(String[] args) throws Exception {
    System.out.println(cleanData(str1));
}

private static String cleanData(String data) throws UnsupportedEncodingException {
    Tidy tidy = new Tidy();
    tidy.setNumEntities(true); // to num entities
    tidy.setPrintBodyOnly(true); // only print the content
    tidy.setWraplen(Integer.MAX_VALUE); // wrap
    ByteArrayInputStream inputStream = new ByteArrayInputStream(data.getBytes("UTF-8"));
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    tidy.parseDOM(inputStream, outputStream);
    return outputStream.toString("UTF-8");
} 
```

`Document`如果你愿意，你也可以得到一个实例。

```
public org.w3c.dom.Document parseDOM(Reader in, Writer out)
public org.w3c.dom.Document parseDOM(InputStream in, OutputStream out) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T16:56:02.193

我不是该主题的专家，但我相信您正在寻找的答案在[http://www.davidcraddock.net/tag/beautifulsoup/](http://www.davidcraddock.net/tag/beautifulsoup/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:23:20.650

有点像 JTidy 解决方案：命名实体，like`&agrave;`是在维护 HTML 的 w3c.org 的 .dtd 文件中定义`<!DOCTYPE ...`的。将它们复制到本地并解析它们（简单）。然后，您可以立即用 unicode 字符串替换实体，或者制作数字实体。

# .net - .NET 中的 TransactionScope

> ID：10706498
> 
> 赞同：1
> 
> 时间：2012-05-22T16:52:44.387
> 
> 标签：.net, transactionscope

是否`TransactionScope`只能用于数据库/ADO.NET 相关方法？

比如说，我有一个执行少量活动的数据访问层方法：

*   一项活动包括数据库更新，
*   另一个正在写入文件，
*   第三个是创建一个注册表项。

该方法只有在三个活动都成功的情况下才能认为是成功的，否则是失败的，应该将前面的所有活动都还原回来。

`TransactionScope`支持这个吗？如果不是，那么处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:56:30.807

我不相信文件操作参与交易。这取决于操作系统，我认为 Vista 和 Win7 会，但旧版本不会。快速搜索会显示一些您可以下载的程序集来执行此操作。在 codeplex 上搜索 .NET Transactional File Manager。

这是另一个可能对您有用的好链接：http: [//petermeinl.wordpress.com/2011/03/13/using-the-net-transactionscope/](http://petermeinl.wordpress.com/2011/03/13/using-the-net-transactionscope/)

# html - 为什么这段代码的标记无效？

> ID：10706499
> 
> 赞同：0
> 
> 时间：2012-05-22T16:52:48.040
> 
> 标签：html

我正在编写`html`代码，我想将所有代码**关闭到一个****div**中。当我将它放入单个`div`时，它给了我一个错误，即我的标记**无效**（表明结束`div`标记**无效**。）现在我很惊讶它怎么会无效。请帮帮我。谢谢

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
</head>

<body>
<div>
            <iframe width="350" height="350" src="http://www.youtube.com/embed/P3weDRMemD8" frameborder="0" allowfullscreen></iframe>
            <form style="border:3px;text align.center;" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit=                "window.open('http://feedburner.google.com/fb/a/mailverify?uri=financeyoga/UPqT', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">

            <input type="text" style="width:140px;padding:10px;" name="email"/>
            <input type="hidden" value="financeyoga/UPqT" name="uri"/>
            <input type="hidden" name="loc" value="en_US"/><br>
            <input style="padding:10px;" type="submit" value="Submit Email Address" />
            <img style="position:relative;top:325px; left:10px;" src="http://financeyoga.com/wp-content/uploads/2012/05/follow.png" width="143" height="64" border="0" usemap="#Map">
            <map name="Map">
            <area shape="rect" coords="5,18,33,44" href="www.twitter.com" target="_blank" alt="twitter">
            <area shape="rect" coords="57,16,87,46" href="www.facebook.com" target="_blank" alt="facebook">
            <area shape="rect" coords="107,16,137,46" href="plus.google.com" target="_blank" alt="google plus">
            </map>        
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:55:37.553

你还没有关闭你的`form`标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T16:56:32.763

好像缺少`</form>`标签。

# wpf - 项目未显示在 WPF ListBox 中，即使它们显示在设计模式中

> ID：10706501
> 
> 赞同：1
> 
> 时间：2012-05-22T16:52:53.077
> 
> 标签：wpf, xaml, data-binding, listbox, xmldataprovider

我在 XAML 和 WPF 中的数据绑定方面遇到了一些问题。具体来说，我正在尝试将数据从 XmlDataProvider 绑定到 ListBox。

问题是，当我在 Visual Studio 2010 中处于设计模式时，xml 项目正确显示，但是当我运行应用程序时，列表框只是空的。

这是我的 xaml 的样子。我没有使用任何代码，所以这就是全部：

```
<Window x:Class="WpfTest9_Binding.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="309" Width="622">
    <Window.DataContext>
        <XmlDataProvider XPath="Servers">
            <x:XData>
                <Servers>
                    <Server name="Server01" active="true" />
                    <Server name="Server02" active="false" />
                    <Server name="Testserver01" active="true" />
                    <Server name="Testserver02" active="true" />
                </Servers>
            </x:XData>
        </XmlDataProvider>
    </Window.DataContext>
    <Grid>
        <ListBox ItemsSource="{Binding XPath=*}" Margin="12">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border CornerRadius="5" Margin="5" BorderThickness="2" BorderBrush="#FFC14343">
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <CheckBox IsChecked="{Binding XPath=@active}" />
                            <Label Content="{Binding XPath=@name}" />
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

就像我上面说的，奇怪的是它看起来像是在设计模式下工作，但是当我运行应用程序时它无法填充列表框。我也没有收到任何错误消息或警告。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:11:53.353

好的，解决方案非常简单。正如这篇文章中所指出的，[当使用 XmlDataProvider 时，列表框内容没有被来自 xml 的内容填充](https://stackoverflow.com/questions/5355162/listbox-content-not-being-populated-with-content-from-xml-when-using-xmldataprov)，我所要做的就是向 xml 元素添加一个空的命名空间属性。像这样：

```
<Servers xmlns="">
    <Server name="Server01" active="true" />
    <!-- ... -->
</Servers> 
```

# objective-c - 是否有 @synchronized 会死锁的示例代码？

> ID：10706502
> 
> 赞同：2
> 
> 时间：2012-05-22T16:52:59.497
> 
> 标签：objective-c, multithreading, xcode4.3, grand-central-dispatch, synchronized

我真的想不出任何

我能想到的一件事是

```
@synchronized (self)
{
@synchronized (self){}
} 
```

但这不会死锁，因为锁是递归的，只会允许同一个线程通过。因此，如果整个程序只使用一个变量，基本上你就不会死锁

另一个我能想到的是

```
@synchronized (A)
{
@synchronized (B){}
} 
```

在一个线程中和

```
@synchronized (B)
{
@synchronized (A){}
} 
```

在另一个。我在这里正确吗？

那么如何避免死锁呢？有什么简单的规则吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T16:53:54.277

我的第一条规则是永远不要锁定任何公开可见的东西。
我的#2 规则是永远不要在持有锁时调用外部代码。

我发现，如果你能处理好这两点，任何可能出现的死锁都更容易被发现和修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T16:56:25.720

在有共享资源的情况下使用并发时，没有什么是简单的；总是存在死锁的风险，总是存在由于非原子性而导致数据损坏的风险，并且总是存在由于所有锁定而导致完全并发的代码比单线程代码慢的风险。

“最好”的模式是隔离；使跨线程/队列层尽可能小，并将其后面的所有内容隔离到单个线程。

Core Data 就是这种模式的一个很好的例子。托管对象上下文是每个线程的，CD 通过经过非常良好的单元测试的基础设施位完全在幕后管理并发数据存储。

# php - 检测 CodeIgniter 何时无法连接到 Db

> ID：10706504
> 
> 赞同：5
> 
> 时间：2012-05-22T16:53:08.380
> 
> 标签：php, codeigniter, pdo

我有一个 CI 实例，它连接到 Db 并在提供页面之前检查权限。如果当前用户无法访问该页面，它将重定向到登录页面。

显然，登录页面设置了权限，以便所有用户都可以访问它。

在最近的一次故障之后，数据库服务器恢复了一个不同的 IP 地址（感谢 Amazon，EC2）。这导致 CI​​ 无法检查任何页面的权限 - 包括登录。由于代码假定除 Yes 之外的任何内容都是 No，因此它重定向到 Login。结果是无限重定向循环。

虽然这个确切的问题不应该再次发生（静态弹性 IP），但我想检测 Db 连接何时关闭并适当处理。

我已经看到了[这个 SO Question](https://stackoverflow.com/a/3785984/156755)，这是我想要实现的，但我没有在任何控制器中明确加载数据库，它在自动加载配置文件中。

所以，

如何从 CI 内部查询 Db 连接的状态？我是否必须运行一个无用的查询并检查我是否得到结果，或者是否有更优雅的解决方案？

编辑：检查当前正在钩子中执行：

```
$hook['post_controller_constructor'] = array(
                                'class'    => 'AuthHook',
                                'function' => 'ValidateCredentials',
                                'filename' => 'auth.php',
                                'filepath' => 'hooks'
                                ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T16:59:24.700

您可以扩展控制器并在其构造函数中加载数据库：

```
 class My_Controller extends CI_Controller {
        public function __construct(){
            parent::__construct();
             if ( $this->load->database() === FALSE )
             {
                //do something
             }
         }
     } 
```

您的所有控制器都将继承新控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:08:14.197

*“由于代码假定除了 Yes 之外的任何内容都是 No，因此它重定向到 Login。”*

因此，您只需要更改登录逻辑功能以专门检查数据库连接（因此仍会自动加载数据库）。

使用类似的东西

```
 $result = $this->db->conn_id; 
```

# c# - 用于检测网络更改事件的 Windows 服务

> ID：10706510
> 
> 赞同：1
> 
> 时间：2012-05-22T16:53:29.943
> 
> 标签：c#, .net, windows, service

我需要在 C# 中创建一个事件侦听器，让用户知道何时有网络更改（例如新的 IP 地址）。我已经尝试进行研究以找到不同的方法来做到这一点，但我没有看到如何在 C# 中专门完成它并完成我需要完成的所有任务。我正在使用此处提供的信息构建一个侦听器[http://msdn.microsoft.com/en-us/library/zt39148a.aspx#Y570](http://msdn.microsoft.com/en-us/library/zt39148a.aspx#Y570)但这对我也不起作用。投票对我来说可能是最好的选择，但如果有人可以帮助解决这个问题，将不胜感激。我在 XP 和 .NET 4.0 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:17:08.483

你可以在你的服务中监听 NetworkChange 事件：

```
public partial class Service1 : ServiceBase
{
    public Service1()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        NetworkChange.NetworkAddressChanged += new NetworkAddressChangedEventHandler(NetworkAddressChanged);
    }

    protected override void OnStop()
    {
    }

    private void NetworkAddressChanged(object sender, EventArgs e)
    {
        NetworkInterface[] adapters = NetworkInterface.GetAllNetworkInterfaces();
        foreach (NetworkInterface n in adapters)
        {
            EventLog.WriteEntry("NetworkMonitor",String.Format("{0} is {1}", n.Name, n.OperationalStatus),EventLogEntryType.Warning);
        }
    }

} 
```

可以在 NetworkInterface 中找到有关 IP 地址的信息。

要在上述服务中获取 IP 地址信息，应该这样做：

```
IPInterfaceProperties adapterProperties = n.GetIPProperties();
IPAddressCollection addresses = adapterProperties.DhcpServerAddresses;
foreach (IPAddress address in addresses)
{
    //do something with address.ToString();
} 
```

# c++ - 在迭代时插入 std::map ？

> ID：10706511
> 
> 赞同：10
> 
> 时间：2012-05-22T16:53:31.280
> 
> 标签：c++, stdmap

我有一个 Map ，我像这样迭代它：

```
std::map<unsigned int, GameObject *>::iterator itr = _gameObjects.begin();
    while (itr != _gameObjects.end())
    {
        itr->second->Update();
        itr++;
    } 
```

Update() 可能会在地图中插入一个元素，甚至从中删除一个元素，但它不一定会执行这两者中的任何一个。它显然不是那样工作的。有没有办法可以做到？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T17:00:49.473

来自[`std::map::erase()`](http://en.cppreference.com/w/cpp/container/map/erase)：

> 对已擦除元素的引用和迭代器无效。其他引用和迭代器不受影响。

来自[`std::map::insert()`](http://en.cppreference.com/w/cpp/container/map/insert)：

> 没有迭代器或引用无效。

来自[`std::map::operator[]`](http://en.cppreference.com/w/cpp/container/map/operator_at)：

> 没有迭代器或引用无效。

如果`Update()`不删除自身，则代码是合法的。如果`Update()`是，那么它不是。`Update()`如果调用代码自行删除，则需要通知调用代码，设置标志或返回下一个迭代器（如[Attila](https://stackoverflow.com/users/20322/attila)建议的那样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:01:31.750

STL 中的`erase`函数通常返回一个指向下一个有效元素的迭代器（或者`end()`如果没有这样的元素可用）。您可以从返回此迭代器`Update`并将其重新分配给`itr`

# jquery - Omniauth facebook ajax

> ID：10706512
> 
> 赞同：3
> 
> 时间：2012-05-22T16:53:34.907
> 
> 标签：jquery, ruby-on-rails, facebook, omniauth, facebook-login

目前，当浏览器点击时，我的“使用 facebook 登录”按钮可以正常工作`/auth/facebook`。但是，我希望能够在不刷新页面的情况下让用户登录。我正在尝试这样的事情：

```
$(document).ready(function() {
  var $login;
  $login = $('#login');
  return $login.click(function(event) {
    event.preventDefault();
    console.log("Trying to log in");
    return $.ajax({
      url: $login.attr('href'),
      data: {},
      complete: function(response) {
        return console.log(response);
      }
    });
  });
}); 
```

但我似乎没有从响应中获得有用的数据，并且浏览器似乎取消了重定向（根据 chrome 中的 Web 开发人员面板）。有没有办法让这个与omniauth一起工作？

我也不想使用 iframe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:30:47.987

在尝试这样做之前，您需要了解omniauth 的工作原理。然后您将能够选择最合适的解决方案。

# bash - BASH 脚本 - 命令输出中字符串的安全限制

> ID：10706513
> 
> 赞同：1
> 
> 时间：2012-05-22T16:53:37.550
> 
> 标签：bash, svn, xargs

再会，

我正在编写一个相对简单的 BASH 脚本，它执行 SVN UP 命令，捕获控制台输出，然后对文本进行一些后期处理。

例如：

```
#!/bin/bash
# A script to alter SVN logs a bit

# Update and get output
echo "Waiting for update command to complete..."
TEST_TEXT=$(svn up --set-depth infinity)
echo "Done"

# Count number of lines in output and report it
NUM_LINES=$(echo $TEST_TEXT | grep -c '.*')
echo "Number of lines in output log: $NUM_LINES"

# Print out only lines containing Makefile
echo $TEST_TEXT | grep Makefile 
```

这可以按预期工作（即：如上面代码中所述），但我担心如果我在一个非常大的存储库上运行它会发生什么。BASH 可以用来保存控制台命令输出的最大缓冲区大小是否有限制？

我一直在寻找类似的问题，但与我正在寻找的东西完全不同。我已经阅读了某些脚本`xargs`在大型中间缓冲区的情况下如何使用，我想知道在捕获控制台输出方面是否有类似的情况。

例如：

```
# Might fail if we have a LOT of results
find -iname *.cpp | rm

# Shouldn't fail, regardless of number of results
find -iname *.cpp | xargs rm 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:43:38.790

使用

```
var=$(hexdump /dev/urandom | tee out) 
```

bash 没有抱怨；我在超过 1G 和 23.5M 的线路上杀死了它。只要您的输出适合系统的内存，您就不必担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:45:03.383

我认为没有理由不在这里使用临时文件。

```
tmp_file=$(mktemp XXXXX)

svn up --set-depth=infinity > $tmp_file
echo "Done"

# Count number of lines in output and report it
NUM_LINES=$(wc -l $tmp_file)
echo "Number of lines in output log: $NUM_LINES"

# Print out only lines containing Makefile
grep Makefile $tmp_file

rm $tmp_file 
```

# facebook - XFBML 跨脚本和 PCI 验证

> ID：10706518
> 
> 赞同：0
> 
> 时间：2012-05-22T16:54:09.533
> 
> 标签：facebook, user-interface, xss, xfbml

您是否知道在我的网站上使用 XFBML facebook 按钮可能会出现任何跨脚本问题？想确保我不会违反 PCI 验证。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:58:50.123

为了绝对确定，您应该联系您的 PCI 评估员并向他提问。

但是，应该注意的是，来自社交网络（如 Facebook、Twitter、Google+）的小部件是使用使用 HTTPS 的 iFrame 提供的。因此，您的后端永远不会暴露给脚本，除非您决定在这些小部件的 URL 中插入信用卡信息，否则您应该非常安全。

# javascript - ipad上的jquery滚动问题

> ID：10706522
> 
> 赞同：2
> 
> 时间：2012-05-22T16:54:26.400
> 
> 标签：javascript, jquery, html, ipad, scrollto

[http://jqueryfordesigners.com/demo/scroll-link-nav.html](http://jqueryfordesigners.com/demo/scroll-link-nav.html)

上面的链接或多或少是我正在寻找的响应滚动位置的活动状态。

但是，如果有人在 ipad 上尝试此操作，则活动状态会停留在某些位置并尝试纯粹通过点击按钮进行导航，它会在第一次点击后停止滚动。

有人知道针对 ipad 问题的任何解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:18:27.260

我有一种解决方案可以在所有浏览器上滚动

## [http://jsfiddle.net/t9mna/1/](http://jsfiddle.net/t9mna/1/) 所有浏览器

```
$("nav ul li a").click(function(){
   $(".selected").removeClass("selected");
    $(this).addClass("selected");
    var $scrollTo = $($(this).attr("href"));
    $('html, body').animate({
    scrollTop: $scrollTo.offset().top
    }, 500);
}); 
```

另一个只适用于 iPad，我没有 iPad，所以我个人无法测试它，所以让我知道它是如何进行的

## [http://jsfiddle.net/t9mna/3/](http://jsfiddle.net/t9mna/3/)仅适用于 iPad //未经我测试

```
function isiPad() {
    return navigator.userAgent.match(/iPad/i); 
}

    $("nav ul li a").click(function(){
       $(".selected").removeClass("selected");
        $(this).addClass("selected");
        var $scrollTo = $($(this).attr("href"));
        $(function() {
        if ($(isiPad).length != 1) {
        $('html, body').animate({
        scrollTop: $scrollTo.offset().top
        }, 500);
    }
    });
    });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:59:36.597

```
 $("nav ul li a").click(function(){
    $(".selected").removeClass("selected");
    $(this).addClass("selected");
    var $scrollTo = $($(this).attr("href"));
    $(function() {
        if ($(isiPad).length != 1) {
            $('html, body').animate({
                scrollTop: $.scrollTo.offset().top //point 
            }, 500);
        }
    });
});​ 
```

# ruby-on-rails - Rails 中的布尔字段

> ID：10706523
> 
> 赞同：0
> 
> 时间：2012-05-22T16:54:28.207
> 
> 标签：ruby-on-rails, database

在我的 Rails 应用程序中，我需要将布尔字段存储在模型中。现在，这导致了一个问题，因为 Sqlite3（我用于开发）使用字符常量`'t'`和`'f'`真值。然而，我的应用程序将部署到的 MySQL 使用文字`true`和`false`（分别对应于 tinyints 1 和 0）。这使得 SQL 条件的使用有问题，因为类型的表达式

```
select * from articles where published = true 
```

在 Rails 中表示为

```
Article.where 'published = true' 
```

将在 Sqlite3 中失败并显示消息`no such column: true`。

在 Rails 中可移植地处理布尔值的首选方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:59:32.723

使用活动记录，你会做

```
Article.where(:published => true) 
```

您可能希望更进一步，并使其成为范围

```
class Article < ActiveRecord::Base
  scope :published, where(:published => true)
end 
```

所以在你的控制器中你可以去

```
@published_articles = Article.published 
```

关于 active_record 的查询接口的更多信息在这里：[http ://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

您还使用赋值操作`=`而不是相等比较`==`

# c# - 将 foreach 循环更改为 LINQ 查询

> ID：10706524
> 
> 赞同：2
> 
> 时间：2012-05-22T16:54:31.500
> 
> 标签：c#, linq

我陷入了一个简单的场景。我有一个`List<string>`对象，它的所有项目都具有以下内容：

```
item_1_2_generatedGUID //generatedGUID is Guid.NewGuid() 
```

但可能会有更多的数字 `item_1_2_3_4_5_generatedGUID`等

现在，我想知道如何将该循环更改为 LINQ 的查询。有任何想法吗 ？

```
 string one = "1"; //an exaplme
  string two = "2"; //an exaplme

  foreach (var item in myStringsList)
  {
      string[] splitted = item.Split(new char[] { '_' },
                                     StringSplitOptions.RemoveEmptyEntries);

      if(splitted.Length >= 3)
      {
          if(splitted[1] == one && splitted[2] == two)
          {
              resultList.Add(item);
          }
      }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:00:44.750

```
var result = from s in lst 
             let spl = s.Split('_')
             where spl.Length >= 3 && spl[1] = one  && spl[2] == two
             select s; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:07:13.543

这是一种不同的方法：

```
var items = myStringsList.
            Where(x => x.Substring(x.IndexOf("_")).StartsWith(one+"_"+two+"_")); 
```

您可能需要在 IndexOf 中添加 +1，但我不确定。

它的作用是：

*   删除第一项（即子字符串）。在您的示例中，它应该是“1_2_3_4_5_generatedGUID”
*   检查字符串是否以您期望的开头。在你的例子中：1_2_

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T16:56:53.083

尝试这个：

```
var query = from item in myStringsList
            let splitted = item.Split(new[] { '_' }, SSO.RemoveEmptyEntries)
            where splitted.Length >= 3
            where splitted[1] == one && splitted[2] == two
            select item;

var resultList = query.ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:09:02.890

**编辑：在第一个“位置”添加了任何东西的模式**

```
var result = items.Where(i => Regex.IsMatch(i, "^[^_]_1_2_")); 
```

# ruby-on-rails - 使用devise时如何做一些操作后登录？

> ID：10706529
> 
> 赞同：0
> 
> 时间：2012-05-22T16:54:45.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

在使用设计时，无论它重定向到哪个控制器，我都需要执行一些操作（日志记录、更新数据库等）登录后。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:29:59.817

您可以使用 Warden 的[`after_authentication`回调](https://github.com/hassox/warden/wiki/callbacks)。

来自 Devise 的 README：*Devise 基于 Warden，这是一个通用的 Rack 身份验证框架*。

# c - 为什么在 C 中重定向标准输入不起作用？

> ID：10706530
> 
> 赞同：2
> 
> 时间：2012-05-22T16:54:46.140
> 
> 标签：c, exec, fork, pipe, stdin

我试图通过管道“my_pipe”将标准输入从父级重定向到子级，但是当我运行我的程序时，我没有看到预期的结果。

当我执行程序时，它需要来自标准输入的输入，那么为什么它不在 dup2 中重定向标准输入呢？

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>

int main(int argc, char* argv[])
{
    char* arguments[] = {"sort", NULL};

    int my_pipe[2];
    if(pipe(my_pipe) == -1)
    {
        fprintf(stderr, "Error creating pipe\n");
    }

    pid_t child_id;
    child_id = fork();
    if(child_id == -1)
    {
        fprintf(stderr, "Fork error\n");
    }
    if(child_id == 0) // child process
    {
        close(my_pipe[1]); // child doesn't write
        dup2(0, my_pipe[0]); // redirect stdin

        execvp(argv[0], arguments);

        fprintf(stderr, "Exec failed\n");
    }
    else
    {
        close(my_pipe[0]); // parent doesn't read

        char reading_buf[1];
        write(my_pipe[1], "hello", strlen("hello"));
        write(my_pipe[1], "friend", strlen("friend"));
        close(my_pipe[1]);
        wait();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:08:30.893

您对 dup2 的论点是倒退的。尝试`dup2(my_pipe[0], STDIN_FILENO)`

# .net - PLINQ ForAll 在 .NET 4.0 和 4.5 中损坏

> ID：10706531
> 
> 赞同：1
> 
> 时间：2012-05-22T16:54:48.410
> 
> 标签：.net, multithreading, linq, task, plinq

我试图想出一种方法来以最快的方式加速组合列表中包含的大量对象。希望利用 PLINQ 我尝试过，但这不是线程安全的解决方案。我在 4.0 和 4.5 的 VS2010 和 VS11Beta 中进行了测试。这是我的示例应用程序。如果您在 1-500 之间更改 BlowUp()，它通常会起作用。500 年后车轮脱离轨道。它会在多个地方失败。有谁知道解决这个问题的最快方法？（多维数组 + PLINQ？）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace PLinqBlowsUp
{
class Program
{
    static void Main(string[] args)
    {
        BlowUp(5000);
    }

    private static void BlowUp(int blowupNum)
    {
        try
        {
            var theExistingMasterListOfAllRowsOfData = new List<List<KeyValuePair<string, dynamic>>>();

            //Add some test data
            Enumerable.Range(0, blowupNum).AsParallel().ForAll(row => theExistingMasterListOfAllRowsOfData.Add(AddRowToMasterList(row)));

            var aNewRowOfData = new List<KeyValuePair<string, dynamic>>();
            //Add some test data
            var column = new KeyValuePair<string, dynamic>("Title", "MyTitle");
            aNewRowOfData.Add(column);

            var anotherNewRowOfData = new List<KeyValuePair<string, dynamic>>();
            //Add some test data
            var columnA = new KeyValuePair<string, dynamic>("Date", DateTime.Now);
            var columnB = new KeyValuePair<string, dynamic>("ImportantColumn", "ImportantData");
            var columnC = new KeyValuePair<string, dynamic>("VeryImportantColumn", "VeryImportantData");
            anotherNewRowOfData.Add(columnA);
            anotherNewRowOfData.Add(columnB);
            anotherNewRowOfData.Add(columnC);

            //Now the Problem
            aNewRowOfData.AsParallel().ForAll(anrod => theExistingMasterListOfAllRowsOfData.ForEach(temloarod => temloarod.Add(anrod)));
            anotherNewRowOfData.AsParallel().ForAll(anrod => theExistingMasterListOfAllRowsOfData.ForEach(temloarod => temloarod.Add(anrod)));

            //Test for number
            foreach (var masterRow in theExistingMasterListOfAllRowsOfData)
            {
                if (masterRow.Count != 7)
                    throw new Exception("BLOW UP!!!");
            }
        }
        catch (AggregateException ex)
        {
            Console.WriteLine(ex.Message);
        }
    }

    private static List<KeyValuePair<string, dynamic>> AddRowToMasterList(int row)
    {
        var columnA = new KeyValuePair<string, dynamic>("FirstName", "John" + row.ToString());
        var columnB = new KeyValuePair<string, dynamic>("LastName", "Smith" + row.ToString());
        var columnC = new KeyValuePair<string, dynamic>("Ssn", 123456789 + (row*10));

        var list = new List<KeyValuePair<string, dynamic>>();
        list.Add(columnA);
        list.Add(columnB);
        list.Add(columnC);
        return list;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:11:57.177

这与 PLinq 无关——将项目添加到 a`List<T>`根本不是线程安全的。一个会降低性能的可行解决方案是引入锁定。相反，您通常想要做的是投影到一个**新**集合作为您的 PLinq 语句的结果 - 像您所做的那样引入副作用通常不符合 Linq / 函数式编程的精神，您可能会遇到麻烦（如你做了）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T18:24:06.530

我看到两个问题。

*   您正在从多个线程调用`Add`该实例，而没有任何尝试同步对它的访问。`theExistingMasterListOfAllRowsOfData`
*   您正在从多个线程调用`Add`单个项目，而没有任何尝试同步它们。`List<KeyValuePair<string, dynamic>>`

您可以使用`lock`来保护`Add`方法或使用 a`ConcurrentBag`代替。但是，这些选项都不是那么好。这里的问题是这种操作不能很好地并行化，因为所有线程最终都会竞争同一个锁。我高度怀疑，即使是低锁`ConcurrentBag`最终也会比您刚刚在 PLINQ 上踢并在主线程上完成所有操作时要慢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T17:11:33.303

PLinq 不能替代编写线程安全代码。您的访问`theExistingMasterListOfAllRowsOfData`不是线程安全的，因为线程池中的所有线程都在访问它。您可以尝试锁定它，这为我解决了问题：

```
Enumerable.Range(0, blowupNum).AsParallel().ForAll(row => {
    lock (theExistingMasterListOfAllRowsOfData) {                 
        theExistingMasterListOfAllRowsOfData.Add(AddRowToMasterList(row));
    }
}); 
```

但是，锁定可能不是您所追求的，因为这会引入瓶颈。

# javascript - 在页面之间显示“页面加载”消息

> ID：10706532
> 
> 赞同：0
> 
> 时间：2012-05-22T16:54:49.563
> 
> 标签：javascript, jquery, html, lightbox, modal-dialog

我的网站上有一个`form`在提交时将用户`Page1.html`从`Page2.html`.

我想在提交的表单和**"Page2 loading"**之间显示一条消息。

有人可以给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:59:06.057

如果您的表单通过 ajax 提交数据，那么您可以尝试以下操作：

```
$('form#myform').submit(function(e) {
   e.preventDefault();
   $('#message').html('Sending....');  // #message may be a div that contains msg
   $ajax({
     url: 'url_to_script',
     data: 'your_data',
     success: function(res) {
       // when submit data successfully then page reload
       window.location = 'page2.html'
     }
   });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:00:05.217

您要执行的操作无法通过标准表单提交来完成。

您需要使用 ajax 提交表单，并在等待响应时显示“请稍候”消息。一旦收到响应并验证为 OK，您就可以将用户重定向到您现在调用 page2 的页面。

通过 ajax 提交表单的最简单方法是将其[序列化为](https://stackoverflow.com/questions/6720459/how-to-serialize-a-form-into-an-object-with-tree-structure)字符串并传递。然后，您需要一个页面来处理接收到的数据，并返回 OK 或 ERR。

然后 JS 将需要破译下一个动作。

这未经测试，而是从各种工作项目中复制和粘贴。您需要[下载并包含该`json2.js`项目。](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

**第 1 页**

```
<div id='pleaseWait'>Please Wait...</div>
<form id="theForm" onsubmit="doAjaxSubmit();">
    <input type='text' name='age' id='age' />
    <input type='submit' value='submit'>
</form>

<script type="text/javascript">
    function doAjaxSubmit(){
        var j = JSON.stringify($('#theForm').serializeObject());

        $('#pleaseWait').slideDown('fast');
        $.post('processor.php?j=' + encodeURIComponent(j), function(obj){
            if(obj.status=='OK'){
                window.location='page2.php';
            }else{
                $('#pleaseWait').slideUp('fast');
                alert('Error: ' + obj.msg);
            }
        }, 'json');
        return(false);
    }    

    $.fn.serializeObject = function(){
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };
</script> 
```

**处理器.php**

```
<?php

    $j=json_decode($_POST['j'], true);

    if ((int)$j['age']<=0 || (int)$j['age']>120){
       $result = array('status'=>'ERR', 'msg'=>'Please Enter Age');
    }else{
        //Do stuff with the data. Calculate, write to database, etc.
        $result = array('status'=>'OK');
    }
    die(json_encode($result));
?> 
```

这本质上与下面的答案（by `@thecodeparadox`）非常相似，但我的示例展示了如何传递整个 for 而无需手动构建数据对象，展示了如何在 PHP 端进行验证以及将适当的 JSON 数据返回到重定向用户，或显示错误，并使用动画显示消息。

# python - 使用 pip、Windows 7 64 位 Python 3.2 安装 Pandas 时出错

> ID：10706533
> 
> 赞同：0
> 
> 时间：2012-05-22T16:54:49.817
> 
> 标签：python, pandas

我正在尝试在 Windows 7 64 位的 Python 3.2 上安装 pandas 库。

pip 日志在这里。 [http://pastebin.com/Vuitwaz9](http://pastebin.com/Vuitwaz9)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:22:44.157

我不建议您尝试在 64 位 Windows 上构建 pandas（或任何包含 C 扩展的 Python 库），*除非*您使用的是[Enthought Python Distribution](http://enthought.com)（它与可行的构建环境捆绑在一起）或者您有心情[刮牦牛expedition](http://en.wiktionary.org/wiki/yak_shaving)（您需要安装 VS2008 SDK 并对 Python 的 distutils 配置进行一些修改）。[您可以在Python Package Index](http://pypi.python.org/pypi/pandas)上找到适用于 pandas 64 位 Python 3.2 的一键式二进制安装程序。

# apache-flex - 使用框架标签嵌入 swf 并在 Flex 中控制它

> ID：10706535
> 
> 赞同：0
> 
> 时间：2012-05-22T16:54:59.440
> 
> 标签：apache-flex, flash, embed

我正在尝试将带有在时间轴中定义的一些帧标签的 swf 文件嵌入到我的 Flex 应用程序中：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" width="1000" height="563" creationComplete="doSomething()">

    <mx:Script>
        <![CDATA[

            private var movieClip:MovieClip;

            private function doSomething():void {
                movieClip = swfFile.content as MovieClip;
                movieClip.gotoAndPlay('playIntro');
                movieClip.addEventListener("swfFinished", doSomethingElse);
            }

            private function doSomethingElse():void {
                //
            }

        ]]>
    </mx:Script>

    <mx:SWFLoader id="swfFile" width="1000" height="563" source="@Embed(source='test.swf')" /> 

</mx:Application> 
```

但是，我无法以这种方式控制 swf 时间线......是否可以嵌入 swf 文件并以我想要的方式控制它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:34:54.340

对此的一些搜索似乎表明这是在嵌入 swf 时发生的。如果您可以摆脱不嵌入 swf 的情况，请执行此操作。

这是我发现的允许嵌入工作的解决方案：http: [//iamjosh.wordpress.com/2008/04/09/embedding-flash-in-flex/](http://iamjosh.wordpress.com/2008/04/09/embedding-flash-in-flex/)

我*认为*问题可能出在 Flash Player 的安全模型上，只是一种预感。它可能不允许与嵌入式 swf 进行这种类型的通信……但您可能可以执行类似`Security.allowDomain("*")`（危险的捷径）之类的操作。

但首先，请查看[allowDomain](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Security.html#allowDomain%28%29)的文档，因为文档建议您可以这样做：

```
Security.allowDomain(loader.contentLoaderInfo.url); // 'loader' is a SwfLoader 
```

但我猜这`url`在嵌入案例中可能为空:)

# mysql - 这是更新多行的可行方法吗？

> ID：10706538
> 
> 赞同：2
> 
> 时间：2012-05-22T16:55:10.957
> 
> 标签：mysql

可以像这样插入多行：

```
INSERT INTO table VALUES (...), (...), (...)... 
```

但是对于通过 ID 更新行，UPDATE 语法中没有这样的快捷方式。

但是这个呢：

```
INSERT INTO table (id, columns-to-update) VALUES (1, values), (2, values)
    ON DUPLICATE KEY UPDATE column=VALUES(column)... 
```

这是在单个查询中更新多行的有效方法吗？还是发出多个（多达数百个）个人查询总体上更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:06:58.390

是的，这是进行多次更新的完全有效的方式

# winapi - 指示百分比的条，但不是进度条

> ID：10706542
> 
> 赞同：0
> 
> 时间：2012-05-22T16:55:39.427
> 
> 标签：winapi, size, percentage, indicator

我需要一个指示某物百分比的条形图，例如电池电量或硬盘的已用空间大小。喜欢![在此处输入图像描述](../Images/1e934e882e208413054d9b62a0a2ec67.png)

这不是进度条。当我使用进度条时，每次发送消息`PBM_SETPOS`时，它都会从 0 增加到 pos。

条必须有能力让我手动设置一个值，然后它会直接将颜色区域更改为指定的长度，而不是以增加的方式。

WinAPI 是否有为此目的的内置函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:19:11.593

使用面板，然后在其中设置标签...然后根据百分比设置带有背景颜色的标签宽度...

代码如下：

```
string s27 = "select percentage from CandidateReg3 where candidateid='" + candidateid + "'";
DataTable d17 = cn.viewdatatable(s27);
if (d17.Rows.Count > 0) {
   for (int m = 0; m < d17.Rows.Count; m++) {
        percreg3 = int.Parse(d17.Rows[m]["percentage"].ToString());
        percregtotal = percreg3 + percreg;
   }
} else {
   percregtotal = percreg;
}

decimal percregtotals = (decimal)percregtotal / 100;
double percent = Convert.ToDouble(percregtotals);

// double percent = 1;
IndicatorLabel.Width = new Unit(percent * IndicatorPanel.Width.Value, UnitType.Pixel);

IndicatorLabel.ToolTip = percent.ToString("p0");
IndicatorLabel.Text = percent.ToString("p0"); 
IndicatorLabel.ForeColor=Color.White;

// IndicatorLabel.Text = "";
IndicatorLabel.BackColor = Color.Green; 
```

# c# - 创建按钮模板

> ID：10706543
> 
> 赞同：1
> 
> 时间：2012-05-22T16:55:43.540
> 
> 标签：c#, wpf, templates, button, text

我正在尝试为我可以在表单上反复使用的按钮创建一个模板。

，`Button`我希望它`Grid`在底行中包含两行和一段自定义文本。

这是我到目前为止所得到的，但我认为它不正确，因为我想从按钮元素中设置文本。

```
<ControlTemplate TargetType="Control">
    <Grid Width="444">
        <Grid.RowDefinitions>
            <RowDefinition Height="51" />
            <RowDefinition Height="36" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0" Background="#286c97"></Grid>
        <Grid Grid.Row="1" Background="#5898c0">
            <TextBlock Grid.Row="1" FontFamily="Segoe UI" FontSize="12" Text="{TemplateBinding Content}" />
        </Grid>
    </Grid>
</ControlTemplate> 
```

然后调用我希望我可以去的模板：

```
<Button Content="This is the text" /> 
```

但遗憾的是，这不起作用。我应该使用其他模板将文本值传递给它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:05:02.657

为了使其工作，有一个名为`ContentPresenter`. 将它放在模板中您想要的任何位置。但请记住，它可以是任何东西，文本、图像或一堆其他控件，您`Button`或您的 ControlTemplate 都不应该关心它是什么。

```
ControlTemplate TargetType="Control">
    <Grid Width="444">
        <Grid.RowDefinitions>
            <RowDefinition Height="51" />
            <RowDefinition Height="36" />
        </Grid.RowDefinitions>
        <Grid Grid.Row="0" Background="#286c97"></Grid>
        <Grid Grid.Row="1" Background="#5898c0">
            <ContentPresenter/>
        </Grid>
    </Grid>
</ControlTemplate> 
```

,`ContentPresenter`当在 a 中使用时`ContentControl`，就像按钮一样，会自动附加到模板化父级的`Content`,`ContentTemplate`和`ContentTemplateSelector`属性。

现在，如果您想要显示的不仅仅是文本，或者想要更多地自定义文本，只需将 a`DataTemplate`作为您的`ContentTemplate`直接传递给特定按钮。

```
<DataTemplate x:Key="myButtonContentTemplate">
    <TextBlock FontSize="18" Text="{Binding}"/>
</DataTemplate>

<Button ContentTemplate="{StaticResource myButtonContentTemplate}"/> 
```

# git - 如何在 VMWare 上运行的 Mac 和 Windows 之间共享 git repo？

> ID：10706544
> 
> 赞同：2
> 
> 时间：2012-05-22T16:55:44.807
> 
> 标签：git

我在我们的 Enterprise GitHub 上有一个仓库。我将 Mac 上的 repo 克隆到 /users/rams/MyProject

在同一台机器上，我在 VMWare 下运行 Win7。我在机器之间共享了 /users/rams/MyProject，它在我的 Win7 机器上显示为驱动器 Z。我已经提交并推送了我从 Mac 所做的所有更改。但是，当我在 Win7 上打开存储库位置时，状态显示我有未暂存的更改。

这怎么可能？

在 VMWare 上托管的 Mac 和 Win7 之间共享 repo 文件夹的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:37:16.503

确保忽略 chmod 更改

git config core.filemode false

[如何让 Git 忽略文件模式 (chmod) 更改？](https://stackoverflow.com/questions/1580596/how-do-i-make-git-ignore-mode-changes-chmod)

# php - 忽略 HTML 标记定义中的匹配项

> ID：10706545
> 
> 赞同：1
> 
> 时间：2012-05-22T16:55:47.587
> 
> 标签：php, regex, string

我正在使用在[这里](https://stackoverflow.com/questions/8829848/emoticon-replacement-php)找到的正则表达式替换一些文本。

```
$items = array(
  ':)'   => 'smile',
  ':('   => 'sad',
  '=))'  => 'laugh',
  ':p'   => 'tongue',      
); 

foreach($items as $key => $class)
  $regex[] = preg_quote($key, '#');

$regex = '#(?!<\w)('.implode('|', $regex).')(?!\w)#';

$string = preg_replace_callback($regex, function($matches) use($items){

  if(isset($items[$matches[0]])) 
    return '<span class="'.$items[$matches[0]].'">'.$matches[0].'</span>';

  return $matches[0];

}, $string); 
```

它有效，但如何忽略 HTML 标记定义中的匹配项（如标记属性中）？

例如：

`$string = 'Hello :) <a title="Hello :)"> Bye :( </a>';`

=> 第二个`:)`应该被忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:28:02.957

首先预过滤您的输入字符串。清理 HTML 标记中的所有笑脸：

```
$regex = '#<[^>]+('.implode('|', $regex).')[^>]+>#'; 
```

并在上面运行您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:10:28.370

这是一个`DOMDocument`基于 - 的实现，它为您的 HTML 进行按书上的字符串替换：

```
$string = 'Hello :) <a title="Hello :)"> Bye :( </a>';

$items = array(
  ':)'   => 'smile',
  ':('   => 'sad',
  '=))'  => 'laugh',
  ':p'   => 'tongue',      
); 

foreach($items as $key => $class) $regex[] = preg_quote($key);

$regex = '#(?!<\w)('.implode('|', $regex).')(?!\w)#';

$doc = new DOMDocument();
$doc->loadHTML($string);

$xp = new DOMXPath($doc);

$text_nodes = $xp->query('//text()');

foreach ($text_nodes as $text_node)
{
  $parent  = $text_node->parentNode;
  $context = $text_node->nextSibling;
  $text    = $text_node->nodeValue;
  $matches = array();
  $offset  = 0;

  $parent->removeChild($text_node);

  while ( preg_match($regex, $text, $matches, PREG_OFFSET_CAPTURE, $offset) > 0 )
  {
    $match  = $matches[0];
    $smiley = $match[0];
    $pos    = $match[1];
    $prefix = substr($text, $offset, $pos - $offset);
    $offset = $pos + strlen($smiley);

    $span = $doc->createElement('span', $smiley);
    $span->setAttribute('class', $items[$smiley]);

    $parent->insertBefore( $doc->createTextNode($prefix), $context );
    $parent->insertBefore( $span, $context );
  }

  $suffix = substr($text, $offset);
  $parent->insertBefore( $doc->createTextNode($suffix), $context );
}

$body = $doc->getElementsByTagName('body');
$html = $doc->saveHTML( $body[0] ); 
```

将它包装在一个函数中，你就可以开始了。它可能比正则表达式更多的代码行，但它不是一个丑陋的、充满错误的维护噩梦（就像任何基于正则表达式的解决方案一样）。

# python - 在 logging.basicConfig 中添加编码参数

> ID：10706547
> 
> 赞同：17
> 
> 时间：2012-05-22T16:56:00.813
> 
> 标签：python, logging

如何添加`encoding`参数[`logging.basicConfig`](https://docs.python.org/library/logging.html#logging.basicConfig)？

我发现[这个错误报告](http://bugs.python.org/issue11593)指出 Python 3.3 现在可以做到这一点。我在 Python 2.7 中需要这个，并且错误报告说要使用自定义[`logging.FileHandler`](https://docs.python.org/library/logging.handlers.html#logging.FileHandler)对象，但我无法让它工作。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-22T23:22:04.620

在您的情况下避免使用会更容易`basicConfig()`- 只需创建处理程序并以编程方式添加它（确保代码只运行一次），例如：

```
root_logger= logging.getLogger()
root_logger.setLevel(logging.DEBUG) # or whatever
handler = logging.FileHandler('test.log', 'w', 'utf-8') # or whatever
handler.setFormatter(logging.Formatter('%(name)s %(message)s')) # or whatever
root_logger.addHandler(handler) 
```

这或多或少是什么`basicConfig()`。

**更新：**在 Python 3.9 及更高版本中，`basicConfig()`具有可用`encoding`的`errors`关键字参数。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2020-02-27T04:04:15.590

您可以传递特定文件处理程序的列表：

```
import logging

logging.basicConfig(handlers=[logging.FileHandler(filename="./log_records.txt", 
                                                 encoding='utf-8', mode='a+')],
                    format="%(asctime)s %(name)s:%(levelname)s:%(message)s", 
                    datefmt="%F %A %T", 
                    level=logging.INFO) 
```

它运行良好（python 版本 == Python 3.6.8 :: Anaconda, Inc.）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-16T12:34:22.497

Vinay 的回复非常有帮助，但为了让它发挥作用，我不得不调整语法：

```
root_logger= logging.getLogger()
root_logger.setLevel(logging.DEBUG) # or whatever
handler = logging.FileHandler('test.log', 'w', 'utf-8') # or whatever
formatter = logging.Formatter('%(name)s %(message)s') # or whatever
handler.setFormatter(formatter) # Pass handler as a parameter, not assign
root_logger.addHandler(handler) 
```

# pdf-generation - 使用 wkhtmltopdf 为 100 多个潜在客户生成商业信函

> ID：10706549
> 
> 赞同：5
> 
> 时间：2012-05-22T16:56:11.980
> 
> 标签：pdf-generation, wkhtmltopdf

我们需要使用邮件合并工具为给定列表打印商务信函。

我的客户不愿意在付费的 ASP.NET 控件上花费 $$ 来制作 PDF。所以我选择了 WKHTMLtoPDF，它对我们来说很好，直到有一天客户试图获得 100 多个潜在客户的 PDF，导致 PDF 生成完全失败。它适用于 10-20 页的 PDF，但不适用于 100 页。

是否有任何提高性能的提示和技巧？如果这很重要，我们将使用云托管的 IIS 7 和 ASP.NET 4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-26T12:53:35.997

**PDFSharp**库真的是一个不错的库！

我已经使用了很长一段时间了，我发现它足够灵活，可以满足您的需求。

然而，使用它作为“独立库”有[一些方面](http://kolezhuk.wordpress.com/2016/02/17/pdf-report-generation-in-asp-net/#more-209)- 例如，创建表格是一件令人头疼的事情，并且没有太多的文本格式选项。将它与[MigraDoc](http://www.pdfsharp.net/)（PDFSharp 的扩展库）混合使用会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:22:10.293

如果您正在寻找一个真正免费的（如“无忧无虑”）库，请选择 4.1.7 之前的 iTextPDF 版本，正如[ByteScout 博客中所述](http://blog.bytescout.com/2011/04/net-bear-do-you-know-any-free-pdf.html)。

来自 ByteScout 博客：

> 仅 iTextSharp 4.1.6 DLL：[itextsharp-4.1.6-dll.zip](http://sourceforge.net/projects/itextsharp/files/itextsharp/itextsharp-4.1.6/itextsharp-4.1.6.zip/download)
> iTextSharp 4.1.6 源代码 (C#)：[itextsharp-4.1.6.zip](http://bytescout.com/files/other/itextsharp-4.1.6.zip)

我不确定我是否理解您的问题，但您不能[生成 docx 文档](https://stackoverflow.com/questions/1475471/how-to-generate-word-documentdoc-docx-in-asp-net)并获得相同的结果吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T17:56:46.640

总之，我使用[http://wkhtmltopdf.org/](http://wkhtmltopdf.org/)创建 HTML 到 PDF，我的 ASP.NET 代码生成 HtML 文件然后我创建 HTML 到 PDF 并完成，比使用 itextpdf 的 Table 和 td 结构更容易获得更好的空间里的东西。**一旦你把你的东西正确对齐**，我发现它既简单又快速。

自从提出原始问题以来，图书馆已经有所改进，现在表现更好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T17:08:30.573

这是很好的教程[http://www.codeproject.com/Articles/20640/Creating-PDF-Documents-in-ASP-NET](http://www.codeproject.com/Articles/20640/Creating-PDF-Documents-in-ASP-NET)

# highcharts - Highcharts 阴影/填充图

> ID：10706550
> 
> 赞同：1
> 
> 时间：2012-05-22T16:56:15.447
> 
> 标签：highcharts, d3.js

我正在使用 D3 图形库，但由于它缺乏原生 IE8 支持，我想切换到 HighCharts。

使用 D3，我能够使用带有“填充”属性的 CSS 类创建下图。

![D3 图形截图](../Images/bfa28cfb47e1067d63b31708b3f92c87.png)

有 5 个系列的值产生了该图；第一个定义浅灰色区域的顶部，第二个定义深灰色区域的顶部，第三个定义蓝线，依此类推。

是否可以使用 HighCharts 创建类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:56:27.773

[可能你可以在http://www.highcharts.com/demo/area-negative](http://www.highcharts.com/demo/area-negative)看到

**html:**

```
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 310px; 
    height: 400px; margin: 0 auto"></div> 
```

**Javascript/jQuery：**

```
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'area'
        },
        title: {
            text: 'Area chart with negative values'
        },
        xAxis: {
            categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
        },
        credits: {
            enabled: false
        },
        series: [{
            name: 'John',
            data: [5, 3, 4, 7, 2]
        }, {
            name: 'Jane',
            data: [2, -2, -3, 2, 1]
        }, {
            name: 'Joe',
            data: [3, 4, 4, -2, 5]
        }]
    });
}); 
```

链接到 jsfiddle：http: [//jsfiddle.net/gh/get/jquery/1.9.1/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/area-negative/](http://jsfiddle.net/gh/get/jquery/1.9.1/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/area-negative/)

# iphone - iPhone iOS Dropbox 如何预先验证（链接）应用程序的帐户？

> ID：10706556
> 
> 赞同：1
> 
> 时间：2012-05-22T16:56:43.560
> 
> 标签：iphone, objective-c, ios, authentication, dropbox

我想尝试使用 1 个集中式保管箱帐户来存储我的一个应用程序的数据。这将是一种“公共”协作存储空间。

为此，我需要预先验证用户以使用特定的保管箱帐户。有没有办法让我将特定应用程序链接到 Dropbox 帐户，然后在应用程序中包含某种“预认证/授权”令牌，以**允许用户无需登录即可与我的 Dropbox 帐户进行交互？**

谢谢！

# c# - AutoMapper 2 路映射

> ID：10706558
> 
> 赞同：1
> 
> 时间：2012-05-22T16:56:53.263
> 
> 标签：c#, asp.net-mvc, automapper

我正在使用 AutoMapper.org 将我的 DTO 对象映射到 MVC4 中的模型对象。DTO 对象是从 SOAP Web 服务中检索的。对服务的操作主要是 CRUD。

这很好用。

我有 2 个问题。首先，双向映射（2路映射）是不好的做法。那么当我在屏幕上更新模型到 DTO 时，以及 DTO 到模型的原始映射？

第二个问题，AutoMapper 是否可以映射枚举？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:09:10.940

我映射两种方式都没有问题 - 我从 DTO 映射到业务对象以获取数据，并映射回另一种方式以保存数据。这是为了让我的 WCF 服务中使用的 DTO 可以重用（我正在使用 CSLA 框架，并且 CSLA 中的数据门户模型并没有真正让第 3 方在没有访问我的 bizobj 库的情况下使用该服务）。

这确实意味着一些业务逻辑在 web 层中重复，但由于规则稀疏，这不是一个大问题

就我而言，我认为这不是一件坏事。我有一个非常简单的数据模型，主要是读取，只有偶尔数据会返回进行修改。

据我所知，它本机映射枚举（假设它是直接枚举到枚举 - 因为枚举只是下面的原语），但您始终可以提供自己的自定义类型转换器来解决任何枚举问题，或者如果您需要进行字符串解析对于枚举。

# iphone - 我在哪里可以从 Apple 下载“媒体流分段器”

> ID：10706559
> 
> 赞同：5
> 
> 时间：2012-05-22T16:57:00.440
> 
> 标签：iphone, ios, video-streaming

我正在创建一个 AV 应用程序，该应用程序最终将上传到远程服务器，并且需要此分段器将实时 AV 提要转换为文件以进行缓冲和上传。

另外：欢迎任何关于更好方法的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-18T00:12:03.587

这是 Apple 官方下载的 HTTP Live Streaming Tools 的链接。 [https://developer.apple.com/download/more/?=http%20live%20streaming%20tools](https://developer.apple.com/download/more/?=http%20live%20streaming%20tools)

本次下载包括：

*   媒体文件分割器
*   媒体流分割器
*   媒体流验证器
*   媒体字幕分割器

它可以在[此页面](https://developer.apple.com/streaming/)右侧的下载下找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-06T19:53:35.300

苹果的文档说：“导航到这些工具的一种方法是登录 developer.apple.com，然后使用搜索功能。”

幸运的是，我找到了一种更简单的方法。剧透，你需要是注册的苹果开发者：

1) 访问[https://developer.apple.com/](https://developer.apple.com/)

2) 前往会员中心并登录

3) 点击“SDK”

4) 在“媒体”下寻找“HTTP Live Streaming”链接

该页面上会有一个链接，可将您带到下载页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T20:42:59.053

看起来您可以从 10.6.8 更新中提取它的旧版本：

[http://www.ivanexpert.com/blog/2011/12/airplay-on-a-mac-play-any-video-through-your-apple-tv/](http://www.ivanexpert.com/blog/2011/12/airplay-on-a-mac-play-any-video-through-your-apple-tv/)

# plone - Plone4 - 安装插件

> ID：10706560
> 
> 赞同：4
> 
> 时间：2012-05-22T16:57:00.783
> 
> 标签：plone

我是 Plone 的新手，我无法理解如何安装插件。我已经阅读了他们网站上提供的文档，但我仍然有点困惑。

我要安装的插件是[http://plone.org/products/uwosh.timeslot](http://plone.org/products/uwosh.timeslot)。

在文档中，我看到他们使用 cmd.exe 之类的东西，但我不确定它是什么。它是位于 python 文件夹中的 python.exe 吗？

另外，我不清楚我想安装的插件是否是“鸡蛋”形式。

有人可以给我详细的安装过程吗？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T18:04:40.860

[http://plone.org/documentation/kb/installing-add-ons-quick-how-to](http://plone.org/documentation/kb/installing-add-ons-quick-how-to)

1.  查找，然后按照上面的说明编辑您的 buildout.cfg 文件以添加 uwosh.timeslot egg。
2.  从命令行的主 plone 目录重新运行 bin/buildout（或 windows 上的 bin\buildout）（不要从 bin 目录作为当前工作目录运行）。

回答您的其他问题：

*   是的，PyPI.python.org 上列出的软件包是“鸡蛋”，因为您将它们安装为构建中的鸡蛋，而不是经典的“产品”。
*   cmd.exe 是 MS Windows 命令行，假设您使用的是 Windows，而不是 Unix。
    *   这仅在您知道 Plone 安装在磁盘上的位置时才有用——您应该知道。

# c# - 我不明白纯委托和事件字段之间的区别

> ID：10706562
> 
> 赞同：5
> 
> 时间：2012-05-22T16:57:05.490
> 
> 标签：c#, events, delegates

代表：我明白。但是当我转向事件时，很多事情我不太了解。我在 Network 上阅读了书籍、MSDN 和一些简单的示例，它们都有相同的结构。例如，这里是链接：[事件示例](http://www.codeproject.com/Articles/11541/The-Simplest-C-Events-Example-Imaginable)

我举第一个例子，作者说这是关于 C# Event 最简单的例子。

这是他的代码：

```
public class Metronome
{
    public event TickHandler Tick;
    public EventArgs e = null;
    public delegate void TickHandler(Metronome m, EventArgs e);
    public void Start()
    {
        while (true)
        {
            System.Threading.Thread.Sleep(3000);
            if (Tick != null)
            {
                Tick(this, e);
            }
        }
    }
}

public class Listener
{
    public void Subscribe(Metronome m)
    {
        m.Tick += new Metronome.TickHandler(HeardIt);
    }
    private void HeardIt(Metronome m, EventArgs e)
    {
        System.Console.WriteLine("HEARD IT");
    }
}

class Test
{
    static void Main()
    {
        Metronome m = new Metronome();
        Listener l = new Listener();
        l.Subscribe(m);
        m.Start();
    }
} 
```

您可以注意到行：`public event TickHandler Tick`. 当我更改为 时`public TickHandler Tick`，程序仍然运行相同。但是我理解新行，因为它只是一个纯粹的代表。

所以，我的问题是：`event`关键字 in line 的真正目的是什么：`public event TickHandler Tick`。这很重要，因为所有的例子总是这样使用，但我无法解释为什么。

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T17:35:13.423

代表和事件是*相关*的概念，但它们*不是*一回事。“代表”一词往往有两种含义（经常被掩盖）：

*   类似于单个方法接口的委托*类型。*（存在显着差异，但这是一个合理的起点。）
*   该类型的*实例*，通常通过方法组创建，这样当“调用”委托时，就会调用该方法。

事件不是那些。它是类型中的一种成员 - 一对添加/删除方法，接受委托来订阅或取消订阅事件。add 和 remove 方法在您使用`foo.SomeEvent += handler;`or时使用`foo.SomeEvent -= handler;`。

这与属性实际上是一对 get/set 方法（或者可能只是两者中的一个）非常相似。

当您像这样声明类似*字段的事件*时：

```
public event TickHandler Tick; 
```

编译器将成员添加到您的类中，这*有点*像这样：

```
private TickHandler tick;

public event TickHandler
{
    add { tick += value; }
    remove { tick -= value; }
} 
```

它比这要复杂一些，但这是基本思想 - 它是事件的简单实现，就像自动实现的属性一样。从类内部，您可以访问支持字段，而在类外部，您将始终只使用事件。

个人认为很遗憾，类字段事件的声明看起来*很像*委托类型的字段——它导致在一些答案中发现一些误导性（IMO）语句，好像`event`关键字“修改” " 一个字段声明——实际上它意味着你声明的是完全不同的东西。我认为如果类似字段的事件看起来更像自动实现的属性会更清楚，例如

```
// Not real C#, but I wish it were...
public event TickHandler Tick { add; remove; } 
```

我有一[整篇文章](http://csharpindepth.com/Articles/Chapter2/Events.aspx)进行了更详细的介绍，您可能会发现它很有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T17:01:18.847

该`event`关键字基本上限制了您对`delegate`. 您不能再使用`=`运算符手动分配它。

您只能从您的活动中一一*添加*（使用`+=`）或*删除*（使用）代表。`-=`这样做是为了防止某些订阅者“覆盖”其他订阅。

因此，您不能这样做：`m.Tick = new Metronome.TickHandler(HeardIt)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T17:08:29.890

“ `event`”是修饰语。有什么好处？

1.  您可以在接口中使用事件
2.  只有声明它的类才能调用事件
3.  事件公开一个`add`和`remove`访问器，您可以覆盖并执行自定义操作
4.  事件将您限制为指定方法的特定签名，该方法`SomeMethod(object source, EventArgs args)`为您提供有关事件的附加信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T17:07:17.930

当您向程序添加侦听器时，您添加的是事件，而不是委托

查看您的代码 m.Tick +=

你看到那部分你正在请求属性（类型事件），并且你正在向它添加一个带有 += 的侦听器。现在您只能向该 Tick 属性添加一个 TickHandler 类型，如果您覆盖它，您必须自己创建与 TickHandler 相同的格式。

很像添加到字符串或 int 时。

```
string stringTest = string.Empty;
stringTest += "this works";
stringTest += 4; //this doesn't though
int intTest = 0;
intTest += 1; //works because the type is the same
intTest += "This doesn't work";
Metronome m = new Metronome();
Metronome.TickHandler myTicker = new Metronome.TickHandler(function);
m.Tick += myTicker; //works because it is the right type
m.Tick += 4; //doesn't work... wrong type
m.Tick += "This doesnt work either"; //string type is not TickHandler type 
```

这可以清除一些吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T17:02:54.110

你是对的 - 添加`event`关键字似乎几乎是多余的。但是，作为事件的字段与键入到纯委托的字段之间存在一个关键区别。使用 event 关键字意味着包含对象外部的对象可以订阅委托，但不能调用它。当您删除 event 关键字时，外部对象可以订阅并调用委托（可见性允许。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-22T17:08:04.243

据我所知，一个事件基本上是一个多播委托，但对基本操作有不同的访问规则，可以在定义它们的类内部或外部对委托和事件执行。

操作是：

使用 = 运算符赋值

使用 += 和 -= 运算符添加/删除

使用 () 运算符调用

```
 Operation         | delegate   | event
              ------------------+------------+--------
Inside class  += / -=           | valid      | valid
              ------------------+------------+--------
Inside class  =                 | valid      | valid
              ------------------+------------+--------
Inside class  ()                | valid      | valid
              ------------------+------------+--------
Outside class  += / -=          | valid      | valid
              ------------------+------------+--------
Outside class  =                | valid      | not valid
              ------------------+------------+--------
Outside class  ()               | valid      | not valid 
```

这为您提供了始终良好的 OOP 风格的封装。:-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T17:03:26.253

我认为使用委托和事件的主要区别在于事件只能由服务器引发（指类的作者）

如果您`event`现在删除关键字，您可以`m.Tick(sender,e)`在`Listener`其他情况下提出。

```
public class Listener
{
  public void Subscribe(Metronome m)
  {
    m.Tick += new Metronome.TickHandler(HeardIt);
  }

  private void RaisTick(object sender, EventArgs e)
  {
      m.Tick(sender,e);
  }
  private void HeardIt(Metronome m, EventArgs e)
  {
     System.Console.WriteLine("HEARD IT");
  } 
```

}

# android - 使用 ShareActionProvider 时如何关闭共享历史记录？

> ID：10706564
> 
> 赞同：27
> 
> 时间：2012-05-22T16:57:18.683
> 
> 标签：android, android-actionbar, actionbarsherlock, shareactionprovider

Android 4.0 中提供的新 ShareActionProvider（如果您使用的是 ActionBarSherlock，则在早期版本中）具有一项功能，即最后使用的项目显示在操作栏中。有没有办法关掉这个？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-03-09T23:08:08.310

对我来说，避免历史图标的最佳解决方案是不要使用 ShareActionProvider，而是将其创建为任何其他操作：

```
 <item 
    android:id="@+id/menu_action_share"
    android:showAsAction="ifRoom" 
    android:icon="@drawable/ic_action_share"
    android:title="@string/share"/> 
```

在 menu/activity_actions.xml 放置一个带有 ic_action_share 图标的项目...

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_actions, menu);
    return super.onCreateOptionsMenu(menu);
 } 
```

正常膨胀菜单...

```
private void actionShare(){
     Intent i = new Intent(Intent.ACTION_SEND);
     i.setType("text/plain");
     i.putExtra(Intent.EXTRA_SUBJECT, "my string");
     i.putExtra(Intent.EXTRA_TEXT, "another string");
     startActivity(i); 
     //Or like above will always display the chooser
     //startActivity(Intent.createChooser(i, getResources().getText(R.string.share))); 
 } 
```

创建一个带有 ACTION_SEND 意图的方法

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_item_share:
            actionShare();
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    } 
```

最后从 onOptionsItemSelected 调用这个方法

更多信息 ->[将简单数据发送到其他应用程序](http://developer.android.com/training/sharing/send.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-01T15:41:12.753

自己发起分享活动：

```
shareActionProvider.setShareIntent(intent);
shareActionProvider.setOnShareTargetSelectedListener(this);

@Override
public boolean onShareTargetSelected(ShareActionProvider source, Intent intent) {
    // start activity ourself to prevent search history
    context.startActivity(intent);
    return true;
} 
```

然后 ShareActionProvider 不会将所选活动添加到共享历史记录中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-12T21:47:55.510

我创建了自己的 ShareActionProvider 版本（和支持类），您可以将它们复制到您的项目中（[https://gist.github.com/saulpower/10557956](https://gist.github.com/saulpower/10557956)）。这不仅增加了关闭历史记录的功能，还可以过滤您想要共享的应用程序（如果您知道包名称）。

```
private final String[] INTENT_FILTER = new String[] {
        "com.twitter.android",
        "com.facebook.katana"
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.journal_entry_menu, menu);

    // Set up ShareActionProvider's default share intent
    MenuItem shareItem = menu.findItem(R.id.action_share);

    if (shareItem instanceof SupportMenuItem) {
        mShareActionProvider = new ShareActionProvider(this);
        mShareActionProvider.setShareIntent(ShareUtils.share(mJournalEntry));
        mShareActionProvider.setIntentFilter(Arrays.asList(INTENT_FILTER));
        mShareActionProvider.setShowHistory(false);
        ((SupportMenuItem) shareItem).setSupportActionProvider(mShareActionProvider);
    }

    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-22T18:18:57.340

没有 API 可以做到这一点。然而，这个类真的很简单，你可以很容易地创建你自己的`ShareActionProvider`不保留历史的版本。您只需要使用其他排序方式（例如，按字母顺序）来确定可能目标的排序顺序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T18:25:28.937

澄清点：它不是“最后使用的”，而是“最常用的”，跨越一个滑动窗口时间段。

如果您不想使用历史记录，那么在创建视图之前，请调用

```
yourShareActionProvider.setShareHistoryFileName(null); 
```

此方法的描述，来自[官方文档](http://developer.android.com/reference/android/widget/ShareActionProvider.html#setShareHistoryFileName%28java.lang.String%29)（强调我的）：

> 设置用于保存共享历史的文件的文件名，该历史将用于排序共享目标。该文件将用于由 onCreateActionView() 创建的所有视图。默认为 DEFAULT_SHARE_HISTORY_FILE_NAME。**如果不应在会话之间保留共享历史记录，则设置为 null**。

编辑：我应该澄清一下——如果没有历史记录，“最常用”的项目将不会出现，所以这是目前删除该按钮的唯一方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-20T15:16:50.923

虽然今天已经是 2 年前了，但我想分享我的经验，因为我制作了一个自定义 ShareActionProvider 类，并`chooserView.getDataModel().setHistoryMaxSize(0);`在 onCreateActionView() 中添加了这一行，它为我做了所有的魔法！.. 我在 Lollipop 设备和 API 16 模拟器设备上对其进行了测试，它运行良好。这是我的自定义类：

```
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.os.Build;
import android.support.v7.internal.widget.ActivityChooserView;
import android.support.v7.widget.ShareActionProvider;
import android.view.View;

public class MyShareActionProvider extends ShareActionProvider {
    /**
     * Creates a new instance.
     *
     * @param context Context for accessing resources.
     */
    public MyShareActionProvider(Context context) {
        super(context);
    }

    @Override
    public View onCreateActionView() {
        ActivityChooserView chooserView = (ActivityChooserView) super.onCreateActionView();
        Drawable icon;
        if (Build.VERSION.SDK_INT >= 21) {
            icon = getContext().getDrawable(R.drawable.share_icon);
        }else{
            icon = getContext().getResources().getDrawable(R.drawable.share_icon);
        }
        chooserView.setExpandActivityOverflowButtonDrawable(icon);
        chooserView.getDataModel().setHistoryMaxSize(0);
        return chooserView;
    }

} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-22T15:49:00.793

```
 getSupportMenuInflater().inflate(R.menu.share_action_provider, menu);

    // Set file with share history to the provider and set the share intent.
    MenuItem actionItem = menu.findItem(R.id.menu_item_share_action_provider_action_bar);
    ShareActionProvider actionProvider = (ShareActionProvider) actionItem.getActionProvider();
    ***actionProvider.setShareHistoryFileName(null);
    OnShareTargetSelectedListener listener = new OnShareTargetSelectedListener() {
        public boolean onShareTargetSelected(ShareActionProvider source, Intent intent) {
            startActivity(intent);
            return true;
        }
    };
    actionProvider.setOnShareTargetSelectedListener(listener);*** 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-26T06:45:02.160

添加这样的代码：

```
 private void addShareSelectedListener() {
    if (null == mShareActionProvider) return;
    OnShareTargetSelectedListener listener = new OnShareTargetSelectedListener() {
        public boolean onShareTargetSelected(ShareActionProvider source, Intent intent) {
            mContex.startActivity(intent);
            return true;
        }
    };

//Set to null if share history should not be persisted between sessions.
    mShareActionProvider.setShareHistoryFileName(null);
    mShareActionProvider.setOnShareTargetSelectedListener(listener);

} 
```

# python - Python中的浏览文件或目录对话框

> ID：10706571
> 
> 赞同：6
> 
> 时间：2012-05-22T16:57:43.270
> 
> 标签：python, file, browser, directory, tkinter

我正在用 Python 做一个小项目，我想浏览一个文件或目录来获取它们的路径。

我正在使用 Tkinter，我只能找到一个文件浏览器：

```
filename = tkFileDialog.askopenfilename(parent=root,title='Open file to encrypt') 
```

或仅目录浏览器：

```
dir =  tkFileDialog.askdirectory(parent=root, title='Open file to encrypt') 
```

有没有可能将这两者结合起来？谢谢你的所有答案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:19:20.183

不，不可能将它们结合起来。文件浏览器和目录浏览器具有不同的 UI，因为它们完成不同的任务。

大多数程序通过在其文件菜单中区分任务来处理此问题。您可能有“选择文件”或“选择文件夹”选项。这将引导您进入文件浏览器或目录浏览器。

# objective-c - 将 NSMutablearray 添加到其他 NSMutablearray 的问题？

> ID：10706577
> 
> 赞同：0
> 
> 时间：2012-05-22T16:58:10.647
> 
> 标签：objective-c, ios5

我正在尝试将 NSMutableArray 添加到其他 NSMutableArray，这是一个设置为实例 ivar 的可变数组，但我总是让数组 arrayPlayoff 为空。我检测到的另一件事是，在附加方法中进行调试时，局部变量不会显示在调试器变量部分中，即使选择“本地”选项也是如此。

```
-(void)loadGamesPlayoffs{

    NSMutableArray *eli1 = [[NSMutableArray alloc] init];

    NSMutableArray *eli2 =[[NSMutableArray alloc] init];

    NSMutableArray *eli3 = [[NSMutableArray alloc] init];

    NSMutableArray *eli4 = [[NSMutableArray alloc] init];

    for (NSDictionary *eliminatoria in copaReyArray){

        int eli = [[eliminatoria valueForKey:@"eliminatoria"]integerValue];

        NSLog(@"eli %d", eli);

        if (eli==1){

            [eli1 addObject:eliminatoria];

        } else if (eli==2){

            [eli2 addObject:eliminatoria];

        }else if (eli==3){

            [eli3 addObject:eliminatoria];

        } else if (eli==4){

            [eli4 addObject:eliminatoria];

        }

    }

    [arrayPlayOff addObject:eli1];

    [arrayPlayOff addObject:eli2];

    [arrayPlayOff addObject:eli3];

    [arrayPlayOff addObject:eli4];

   }

 many thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:58:23.747

如果**arrayPlayOff**是一个实例变量，你可以使用属性，你的 .h 应该是这样的：

```
#import <UIKit/UIKit.h>
@interface YourClassViewController : UIViewController{
   NSMutableArray *arrayPlayOff;
   //Some other variables
}

@property (nonatomic, retain) NSMutableArray *arrayPlayOff;

//Some other methods

@end 
```

然后在您的 .m 文件中，您可以使用：

```
@implementation YourClassViewController

@synthesize arrayPlayOff;

- (NSMutableArray *)arrayPlayOff{
  if(!arrayPlayOff){
    arrayPlayOff = [[NSMutableArray alloc] init];
  }
  return arrayPlayOff;
}

//Your other methods

//Overwrite the dealloc function so you don't have any memory leaks
- (void)dealloc{
  [arrayPlayOff release];
  [super dealloc];
}

@end 
```

现在你可以访问你的变量

> self.arrayPlayOff

这样你就可以 100% 确定你的变量总是被初始化的。

你的方法可能看起来像这样（你也应该释放你的其他 NSMutableArrays，因为在将它们添加到 arrayPlayOff 数组后你没有使用它们）：

```
-(void)loadGamesPlayoffs{

    NSMutableArray *eli1 = [[NSMutableArray alloc] init];

    NSMutableArray *eli2 =[[NSMutableArray alloc] init];

    NSMutableArray *eli3 = [[NSMutableArray alloc] init];

    NSMutableArray *eli4 = [[NSMutableArray alloc] init];

    for (NSDictionary *eliminatoria in copaReyArray){

        int eli = [[eliminatoria valueForKey:@"eliminatoria"]integerValue];

        NSLog(@"eli %d", eli);

        if (eli==1){

            [eli1 addObject:eliminatoria];

        } else if (eli==2){

            [eli2 addObject:eliminatoria];

        }else if (eli==3){

            [eli3 addObject:eliminatoria];

        } else if (eli==4){

            [eli4 addObject:eliminatoria];

        }

    }

    [self.arrayPlayOff addObject:eli1];

    [self.arrayPlayOff addObject:eli2];

    [self.arrayPlayOff addObject:eli3];

    [self.arrayPlayOff addObject:eli4];

    //Releasing the NSMutableArrays
    [eli1 release]; 
    [eli2 release]; 
    [eli3 release]; 
    [eli4 release];

} 
```

# colors - 确定 CIE L*a*b* 颜色色调的正确公式

> ID：10706578
> 
> 赞同：2
> 
> 时间：2012-05-22T16:58:11.343
> 
> 标签：colors, standards, color-space

[EasyRGB](http://www.easyrgb.com/index.php?X=MATH&H=09#text9)给出了用于确定 CIE L*a*b* 颜色的色调（和色度）的以下公式：

```
var_H = arc_tangent( CIE-b*, CIE-a* )  //Quadrant by signs

if ( var_H > 0 ) var_H = ( var_H / PI ) * 180
else             var_H = 360 - ( abs( var_H ) / PI ) * 180

CIE-L* = CIE-L*
CIE-C* = sqrt( CIE-a* ^ 2 + CIE-b* ^ 2 )
CIE-H° = var_H 
```

但是，它在[此页面](http://www.easyrgb.com/index.php?X=DELT&H=06#text6)上给出了以下公式（由 Delta CMC 算法使用）：

```
CieLab2Hue( var_a, var_b )          //Function returns CIE-H° value
{
   var_bias = 0
   if ( var_a >= 0 && var_b == 0 ) return 0
   if ( var_a <  0 && var_b == 0 ) return 180
   if ( var_a == 0 && var_b >  0 ) return 90
   if ( var_a == 0 && var_b <  0 ) return 270
   if ( var_a >  0 && var_b >  0 ) var_bias = 0
   if ( var_a <  0               ) var_bias = 180
   if ( var_a >  0 && var_b <  0 ) var_bias = 360
   return ( rad2deg( atan( var_b / var_a ) ) + var_bias )
} 
```

更糟糕的是，[这个维基百科页面](http://en.wikipedia.org/wiki/Lab_color_space)声明如下：

> CIELUV 也可以用圆柱形式 (CIELCH) 表示，其中色度分量被色度和色调的相关性所取代。

可以得出结论，这意味着在可以确定色调之前，应首先将 CIE L*a*b* 转换为 CIE L*u*v*。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T00:18:41.700

将直角坐标 a, b 转换为极坐标 C, h

```
 C = sqrt (a * a + b * b)
 h = arctan (b/a) 
```

C是色度，h是色相角。

# php - 自定义类不显示回声

> ID：10706579
> 
> 赞同：1
> 
> 时间：2012-05-22T16:58:16.987
> 
> 标签：php

我一直在尝试编写一个用于显示错误和错误日志的类。

```
class CError {

//Error Logging

var $Log;

public function Log($Comment, $Detail = ""){

    $Log .= $Comment . "\n";

    if ($Detail !== ""){
        $Log .= "--" . $Detail . "--\n";
    }
}

public function Clear_Log(){
    $Log = "";
}

public function Display_Log(){
    echo $this->Log;
}

//Error Display

var $ErrorCode = array(
    0 => "0: No Error Code found, so either you got here by some rogue code or ...",
    1 => "1: General Error, if you are here something went wrong",
    2 => "2: Invalid information provided",
    3 => "3: Alternate path taken, check message for details",
    42 => "42: Here is your answer, but do you know the question?",
    50 => "50: You messed with the Creepers without your Diamond Sword, didn't you",
    9001 => "9001: Its over 9000... or more likely a value used was to large",
    418 => "418: I'm a Teapot, found the error that drove you crazy"
);

public function Error($Error = 0, $ShowLog = false){        

    if ($Error === ""){
        $Error = 0;
    }

    foreach ($ErrorCode as $key => $value){
        if($key == $Error){
            echo "<h3 style='color:red'>" . $value . "</h3><br />";
        }
    }

    if($ShowLog == true){
        echo $this->Log;
    }
} 
```

}

这就是我使用错误类的方式

```
include 'CError.php';
$Error = new CError;

$Error->Log("Email is Required");
$Error->Display_Log();
$Error->Error(2,true); 
```

问题是，使用时什么都没有显示。我想它被跳过了，但不确定。我无权访问服务器的错误日志，所以我不知道是否正在产生错误，但代码将运行到我的主代码中的退出点（与类无关）

- 编辑 -

告诉用 $this->Log 更改 $Log 的答案已经解决了 $Log 变量的问题。它仍然没有解决在 foreach 循环中显示错误代码数组的问题。

- 编辑 -

我通过在 foreach 循环中添加 $this->ErrorCode 解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:00:29.383

您需要访问类变量，例如`$this->Log()`in`Log`和`Clear_Log()`函数。

尝试：

```
public function Log($Comment, $Detail = ""){

    $this->Log .= $Comment . "\n";

    if ($Detail !== ""){
        $this->Log .= "--" . $Detail . "--\n";
    }
}

public function Clear_Log(){
    $this->Log = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:02:27.253

您应该修改`$this->Log`in 方法`Log`和`Clear_Log`，就像您在`Display_Log`. 你只需访问一个局部变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:05:04.227

您对函数和变量都使用名称 Log。尝试更改任何人的名称。

# syntax - 使用 SPSS 语法“如果有”语句

> ID：10706580
> 
> 赞同：2
> 
> 时间：2012-05-22T16:58:19.913
> 
> 标签：syntax, spss

是否可以使用“如果有”语句或它的某些变体来指定变量列表中的多个变量满足指定的条件？例如，如果使用正常的“如果有”语句，我指定变量列表中的一个符合条件（即，如果有 (1, varx, varxx, varxxx) newvar=1.），我希望能够指定我列出的 6 个变量中至少有 5 个符合条件。是否可以使用“如果有”语句或者我只需要为每个可能的排列编写一系列“如果”语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:06:25.043

如果一个或多个变量满足条件，则 any 函数将为真。看一下 COUNT 命令。它计算满足指定条件的变量的数量。Nmiss 和 Nvalid 函数也可能会有所帮助，并且某些函数具有计数形式，仅当至少有那么多变量满足指定条件时才返回非缺失值。例如，mean.3(x1 到 x10) 只有在至少三个变量没有丢失时才会返回平均值。

HTH，乔恩·派克

# java - 非常基本的 Java 游戏网络？

> ID：10706581
> 
> 赞同：3
> 
> 时间：2012-05-22T16:58:21.470
> 
> 标签：java, networking, multiplayer

我们学校的项目是建立一个多人游戏。我们已经完成了游戏，一场已经有两名玩家的轻型自行车（Tron）的盗版。我将如何修改它以便它可以在两台计算机之间工作？我对`UDPClient`和做了一些研究`UDPServer`。我需要 3 台电脑才能让它工作吗？1个服务器和2个客户端？

# php - 当图像大于 3000 像素时调整图像大小而不损失质量

> ID：10706583
> 
> 赞同：0
> 
> 时间：2012-05-22T16:58:27.567
> 
> 标签：php

我有脚本来调整我上传图像的大小而不会降低质量，但是当它的宽度/高度超过 3000 像素时，它不会调整大小。我尝试在 httaccess 中设置值，但没有任何变化。

**这是脚本：**

```
$filename = "image.jpg";
    // Set a maximum height and width
    $width = 490;
    $height = 800;

    header('Content-Type: image/jpeg');

    list($width_orig, $height_orig) = getimagesize($filename);

    $ratio_orig = $width_orig / $height_orig;

    if ($width / $height > $ratio_orig) {
        $width = $height * $ratio_orig;
    } else {
        $height = $width / $ratio_orig;
    }

    // Resample
    $image_p = imagecreatetruecolor($width, $height);
    $image = imagecreatefromjpeg($filename);
    imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig);

    // Output
    imagejpeg($image_p, "image_resized.jpg", 100); 
```

**和 .htacces 我试过了：**

```
php_value memory_limit 24M
php_value upload_max_filesize 10M  
php_value post_max_size 10M  
php_value max_input_time 300  
php_value max_execution_time 300 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T14:14:58.333

在重新采样图像中使用@

IE

```
// Resample
$image_p = imagecreatetruecolor($width, $height);
$image = @imagecreatefromjpeg($filename);
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig); 
```

经过测试的解决方案。

# genetic-algorithm - 我可以在 JGAP 中拥有可变长度的染色体吗？

> ID：10706586
> 
> 赞同：2
> 
> 时间：2012-05-22T16:58:46.430
> 
> 标签：genetic-algorithm, genetic-programming, genetic, jgap

我使用 JGAP 为原理图生成测试向量。通过将染色体的基因设置为 bits ，我获得了单个测试向量的最大覆盖率。现在我需要用最少的测试向量获得 100% 的覆盖率。

如果我将每个基因设计为测试向量，则 id 需要根据基因数量和总覆盖率计算适应度函数，并且 id 还需要进化染色体长度和每个测试向量（基因）位。

甚至有可能拥有可变长度的染色体吗？

此类任务是否有任何标准设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:43:00.677

听起来有点类似于车辆路径问题 (VRP)。那里的解决方案通常被编码为列表列表。每个列表代表车辆的游览，它们共同代表问题的解决方案。

我假设您可以以类似的方式对其进行编码。考虑您想要作为您想要访问的客户的每个点，并将每辆车视为“测试向量”。您希望覆盖所有点（通常在您希望访问所有客户的 VRP 解决方案中），但您希望用最少数量的车辆（=testvectors）覆盖它们。

您的问题的具体限制是什么？我假设您对可以在某个测试向量中涵盖的点有某种限制。

# validation - 如何在使用 express-form 验证错误后重新填充表单字段？

> ID：10706588
> 
> 赞同：6
> 
> 时间：2012-05-22T16:58:59.610
> 
> 标签：validation, node.js, express

使用 node.js 和 express (2.5.9) 和 express-form。

我应该如何使用提交的值重新填充表单字段？

我有`get`一条`post`路线。如果在发布表单时出现验证错误，我会将用户重定向回 get，问题是重新填充的本地变量没有显示（我确实有 autoLocals：true，所以我认为这是因为我正在重定向并且`res`是重启。）

那么你们如何重新填充以及您的应用程序流程是什么，`res.send`而不是`res.redirect`重新设置整个事情吗？这似乎是重复的。

这是我的发布路线的示例：

```
app.post(

  '/projects/:id'

  , form(field("title").required("title", "Title is required)
  , function (req, res){

  if (!req.form.isValid){
    res.redirect('/project/'+req.params.id+'/edit');
  }
  else{
    // save to db
  }

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-16T16:35:45.100

我正在使用 expressjs4.0 在验证后重新填充表单字段：

```
router.route('/posts/new')
 .get(function(req, res) {
 res.render('posts/new', new Post({}));
}); 
```

下面 res.render 中的第二个参数将在视图中设置一些变量。

```
res.render('posts/new', new Post({})); 
```

在我看来，我将表单字段设置如下：

```
...
<input type="text" name="title" value="<%- post.title %>">
<textarea name="article"><%- post.article %></textarea>
... 
```

当您提交此表单时，它应该被您的路由器捕获，如下所示：

```
router.route('/posts')
  .post(function(req, res) {
    var post = new Post(req.body)
      post.save(function(err) {
       if (err) {
         res.locals.errors = err.errors;
         res.locals.post = post;
         return res.render('posts/new');
       }
      return res.redirect('/posts');
  });
  ...
}) 
```

这行代码重置了您视图中的表单域

```
res.locals.post = post; 
```

我希望有人觉得这很有用；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:05:53.777

不确定这是否是最佳实践，但是当我验证失败时，我不会重定向我只是重新渲染视图（通常通过将控制权传递给“get”回调）。像这样的东西：

```
function loadProject(req,res, id){ /* fetch or create logic, storing as req.model or req.project */} 

function editProject(req,res){ /* render logic */ }

function saveProject(req,res){ 
    if(!req.form.isValid){ 
        editProject(req,res);
    }else{
        saveToDb(req.project);
        res.redirect('/project'+req.project.id+'/edit');
    }
}

app.param('id', loadProject);
app.get('/projects/:id/edit', editProject);
app.post('/projects/:id', saveProject); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:50:28.940

我最近不得不处理类似的问题，并使用了两个节点模块：验证器和 flashify。

在表单视图中，我将表单字段配置如下：

```
div.control-group
        label.control-label Description
        div.controls
          textarea(name='eventForm[desc]', id='desc', rows='3').input-xxlarge= eventForm.desc

      div.control-group
        label.control-label Tag
        div.controls
          select(id='tag', name='eventForm[tag]')
            tags = ['Medjugorje', 'Kibeho', 'Lourdes', 'Fatima']
            for tag in tags
              option(selected=eventForm.tag == tag)= tag 
```

注意表单域的命名约定。然后在我的配置文件中设置一个全局变量，它实际上只是表单首次加载时的占位符：

```
//locals
app.locals.eventForm = []; // placeholder for event form repopulation 
```

验证逻辑在我的路由器文件中，如下所示：

```
 app.post('/posts', function(req, res){
    var formData = req.body.eventForm;
    var Post = models.events;
    var post = new Post();

    post.text          = formData.desc;
    post.tag           = formData.tag;

    // run validations before saving
    var v = new Validator();
    var isPostValid = true;

    // custom error catcher for validator, which uses flashify
    v.error = function(msg) {
     res.flash('error', msg);
     isPostValid = false;
    }

    v.check(post.text, "Description field cannot be empty").notEmpty();
    v.check(post.tag, "Tag field cannot be empty").notEmpty(); 
```

然后我检查是否有错误，如果有，将表单数据传回视图：

```
 // reject it
  res.render('Event.jade', {page: req.session.page, eventForm: formData}); 
```

请注意，此 evenForm 数据被传递回视图，该视图重新填充了默认值。

最后一步是在表单视图中包含 flashify 组件。

```
div(style='margin-top: 60px').container-fluid
      include flashify 
```

flashify 视图的代码如下所示：

```
if (flash.error != undefined)
div.container
    div.alert.alert-error
        b Oops!
        button(type='button', data-dismiss='alert').close &times;
        ul
            each error in flash.error
                li= error
if (flash.success != undefined)
div.container
    div.alert.alert-success
        b Success!
        button(type='button', data-dismiss='alert').close &times;
        ul
            each success in flash.success
                li= success 
```

# java - java.util.TreeSet的tailSet操作的时间复杂度是多少？

> ID：10706589
> 
> 赞同：3
> 
> 时间：2012-05-22T16:59:04.843
> 
> 标签：java, algorithm, treeset

我正在使用扫描线实现 2D 最接近对算法，它说您需要找到某个 y 坐标上方的六个点。我所做的是将点放入按 y 坐标排序的 TreeSet 中，并使用 tailSet 方法获取某个点以上的所有点，并迭代最多 6 次。

我想知道tailSet操作的复杂度是否为O（log n），如果是，是否最多迭代tailSet六次也是O（log n）？

参考： http: [//people.scs.carleton.ca/~michiel/lecturenotes/ALGGEOM/sweepclosestpair.pdf](http://people.scs.carleton.ca/~michiel/lecturenotes/ALGGEOM/sweepclosestpair.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:00:49.313

AFAIK采用tailSet是O（log n），但迭代最后一个`m`元素是`O(m * log n)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T08:39:53.677

嗯...这对我来说很奇怪。我认为就大 O 而言，在 java.util.TreeSet 中创建 tailSet 的过程是 O(1)。

> 小说明：tailSet()、headSet() 和 subSet() 返回非常小的对象，它们将所有艰苦的工作委托给底层集合的方法。没有构建新的集合。因此 O(1) 并且非常微不足道。

[讨论链接](http://www.coderanch.com/t/368485/java/java/Getting-closest-element-TreeSet)

# c++ - 如何确保在不同线程读取变量之前将变量存储到内存中

> ID：10706591
> 
> 赞同：4
> 
> 时间：2012-05-22T16:59:12.330
> 
> 标签：c++, multithreading, visual-c++

**更新**：我以另一种形式提出了这个问题（见下文），但由于不具建设性而被关闭。有点遗憾，因为答案完全符合我的要求（并解决了我的问题），但我是新来的，所以我一定会再次尝试使其更具建设性。

我在 Windows 7 下使用 VC++。我的多线程程序将值分配给一个线程中的变量，然后通过事件对象将信号发送到另一个被阻塞的线程，等待该信号。由于编译器提供的优化之类的东西，不能保证一个线程分配给变量的数据实际上对另一个线程可用，即使一个线程确定（通过阻塞机制）另一个线程不会尝试访问直到数据被分配给变量之后的一段时间。例如，该值可能在 CPU 寄存器中，一直保留在那里，直到需要该寄存器用于其他用途。如果在将值放入该寄存器后不久再次需要该值，这可以避免从内存中进行不必要的加载。很遗憾，这意味着内存中的相应位置继续保存它在​​分配新值之前保存的最后一个值。因此，当其他线程解除阻塞并访问保存变量值的内存时，它将获得*旧*值，而不是最近分配的值。

那么问题是：一个 Windows 线程如何强制将其分配给变量的值存储到内存中，以便另一个线程在以后确定可以访问它们？可能有几个答案，但在这个问题结束之前提供的一个似乎最适合我需要的答案是使用“内存栅栏”，这是我以前从未听说过的编程结构。遇到栅栏后，保证已完成对内存的挂起写入。（如果栅栏是“写”栅栏；可以使用“读取”栅栏强制从内存中读取，并且可以使用“读/写”栅栏同时执行这两种操作。Windows 在 VC++ 中很容易实现这三个程序。）

一个小问题原来是 Windows 栅栏（又名“内存屏障”）仅将其保证应用于全局而非本地存储（原因在适用的 MSDN 页面上进行了解释）。

如果我在这里对记忆栅栏如何工作的解释不正确（并且版主曾经重新打开这个问题），我很高兴在评论中看到这一点。毕竟，我不会问我是否谦虚到承认我不知道。（如果版主没有重新打开它，但你可以看到我有问题，请给我发电子邮件并让我知道；我很乐意帮助在我的博客上保持这个讨论的活力，如果你这样做。）

*原始版本*
**在线程之间共享数据的好方法是什么？**

我之前问[了一个](https://stackoverflow.com/questions/10705267/why-cant-volatile-file-be-assigned-to-file)关于`volatile`变量的问题，这些变量为我带来了巨大的学习经验。除其他外，我意识到我没有问对正确的问题。希望这不是坏的stackoverflow礼仪，但我认为我应该在这里创建一个新问题来解决我的潜在问题：

我的 Visual C++ 程序中有两个线程 A 和 B。B 被阻塞，等待来自 A 的信号。A 设置了许多变量。A 然后向 B 发出信号，B 将读取 A 设置的变量。我担心 A 设置的某些变量实际上可能不会写回内存，因为它们可能只驻留在 CPU 寄存器中。

什么是确保线程 B 在读取线程 A 先前设置的变量时读取线程 A 设置的值的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:20:31.600

在 x86 架构下，使用好的库无需担心太多。

使用互斥锁（例如 boost::mutex）保护对共享数据的访问，如果互斥锁的实现者做对了，那么他/她将使用内存屏障（[Memory Barriers @ MSDN](http://msdn.microsoft.com/en-us/library/ms684208%28VS.85%29.aspx)）来确保缓存已经冲入记忆。

如果您必须编写自己的同步代码，请为其添加内存屏障。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:19:38.697

您在评论中提到，*我的特殊问题是能够保证，一旦解除阻塞，一个线程实际上将有权访问另一个线程写入共享位置的值*。

我相信您的问题的答案很简单：您可以使用`_ReadWriteBarrier()`（或者，在您的特定情况下，可能只是`_WriteBarrier`在读取线程内部）来确保您读取最新的内存值。

请注意，据我所知，在 C/C++ 中，`volatile`不能*保证*具有任何内存屏障语义——因此您不能简单地`volatile`在这些语言中使用。内存屏障是简单地读取最新值的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:13:13.583

这就像在问“编写面向对象程序的好方法是什么”。除了那个问题，我会说“去读一本好书”，但对于这个问题，真的没有一本关于坏范式的好书。许多多线程编程都是基于*尽量减少*共享数据的使用，而不是很好地使用它。

所以，我的建议是：

1）设计成没有两个线程需要以这种方式相互通信。听起来更像是一个程序线程，而不是两个真正独立的线程。

2) 在您的流程内或流程之间实施面向服务的架构。使所有共享数据发生在短暂的请求/响应模式上，而不是依赖于使用轮询的全局变量。A 设置并告诉 B 读取的所有这些变量听起来很像“客户端”A 发送给“服务器”B 的“请求”。

3）如果您可以安装并努力学习库，我推荐 ZMQ。我在这方面有很好的经验，他们宣传（并根据我的经验提供）他们的工具，该工具在服务上看起来像一个用于实现客户端和服务器的库，作为摆脱线程之间所有共享数据的一种方式。如果不出意外，文档可能会为您提供很好的方法来考虑在线程之间兑现您的共享数据以获取不涉及它们的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T18:15:34.550

> 如果您的意思是“我如何同步访问以防止出现竞争条件？” 我想我已经通过让每个线程阻塞同时等待来自另一个的信号来管理它。我的特殊问题是能够保证，一旦解除阻塞，一个线程实际上可以访问另一个线程写入共享位置的值。

对，就是这样。问题是等待某个线程设置的信号不足以确保从当前线程可以看到该线程的任何其他活动。一个线程可以设置一个变量，触发信号，然后等待信号的线程可以访问该变量，但得到一个完全不同的值。

我目前正在阅读[Anthony Williams](https://stackoverflow.com/users/5597/anthony-williams)关于这个主题的书，*[C++ Concurrency in Action 。](http://www.stdthread.co.uk/book)*答案似乎在于正确使用 std::atomic 内存顺序。这是一个例子：

```
std::atomic<bool> signal(false);
std::atomic<int> i(0);

-- thread 1 --
i.store(100,std::memory_order_relaxed);
signal.store(true,std::memory_order_release);

-- thread 2 --
while(!signal.load(std::memory_order_acquire));
assert(i.load(std::memory_order_relaxed) == 100); 
```

当第二个线程看到信号时，在使用 memory_order_release 执行的存储和使用 memory_order_acquire 执行的加载之间建立关系，这保证了对 i 的存储将在第二个线程中可见。因此，断言保证成立。

另一方面，如果您使用不太严格的内存顺序，那么您将得不到任何保证。

```
-- thread 1 --
i.store(100,std::memory_order_relaxed);
signal.store(true,std::memory_order_relaxed);

-- thread 2 --
while(!signal.load(std::memory_order_relaxed));
int i2 = i.load(memory_order_relaxed);
// No guarantees about the value loaded from i! 
```

或者，您可以只使用默认的内存顺序，只要您没有任何数据竞争，就可以保证顺序一致性。

```
std::atomic<bool> signal(false);
int i = 0;

-- thread 1 --
i = 100;
signal = true;

-- thread 2 --
while(!signal);
assert(i == 100); 
```

# java - Python 等效于 java ObjectOutputStream 和 ObjectInputStream？

> ID：10706592
> 
> 赞同：3
> 
> 时间：2012-05-22T16:59:22.203
> 
> 标签：java, python, equivalent

在 java 中，我可以使用[Object Output Stream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)和[Object Input Stream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)在服务器和客户端之间传输对象。python中有什么等价的吗？

**有关的：**

*   [python相当于java OutputStream？](https://stackoverflow.com/questions/4512733/python-equivalent-of-java-outputstream)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T17:03:34.460

Python 中的 pickle 模块提供对象序列化和反序列化功能。 [http://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)

它不是特别安全，因此您应该始终验证传入的数据，但它应该支持您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T22:37:44.907

多处理模块具有处理序列化和在进程之间传递对象的 Pipe() 函数。 [http://docs.python.org/library/multiprocessing.html#multiprocessing.Pipe](http://docs.python.org/library/multiprocessing.html#multiprocessing.Pipe)

示例（管道也在同一进程中工作）

```
import multiprocessing

class ObjectToSend:
    def __init__(self,data):
        self.data = data

obj = ObjectToSend(['some data'])

#create 2 read/write ends to a pipe
a, b = multiprocessing.Pipe()
#serialize and send obj across the pipe using send method
a.send(obj) 
#deserialize object at other end of the pipe using recv method
print(b.recv().data) 
```

# c++ - 如何在结构中声明填充？

> ID：10706602
> 
> 赞同：2
> 
> 时间：2012-05-22T16:59:50.487
> 
> 标签：c++, struct, padding, anonymous

我在内存中有一个结构，但并非所有成员都是已知的（这个结构是逆向工程的）。我想要做的是在内存中有这样的表示：

```
struct Name {
    long Id;
    byte unknown[32];
    float X;
}; 
```

但我希望它`byte unknown[32]`是不可见的，所以当我使用某种类型的东西时，`Name`我只能看到 2 个变量 Id 和 X。我认为它类似于：

```
struct Name {
    long Id;
    byte : 32*8; // So this doesn't appear
    float X;
}; 
```

但这不起作用 1\. 因为我被限制为每行 8 个字节，所以它必须看起来像：

```
struct Name {
    long Id;
    long long : 64;
    long long : 64;
    long long : 64;
    long long : 64;
    float X;
}; 
```

其次，当我实际尝试这样做时，它并没有按预期工作（访问 X 并不是指结构的偏移量 0x24）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:44:46.993

你走在正确的轨道上，但你只是把细节弄错了。编译器将对齐填充插入到您的`Name`. 该程序可能会执行您想要的操作：

```
#include <cstddef>
#include <iostream>
#include <cassert>

struct Name {
    long Id;  // offset 0x00
    int : 32; // offset 0x04
    long long : 64;  // 0x08
    long long : 64;  // 0x10
    long long : 64;  // 0x18
    int : 32; // offset 0x20
    float X;  // offset 0x24
};

int main () {
  assert(sizeof(int) == 4);
  assert(sizeof(long) == 4);
  assert(sizeof(float) == 4);
  assert(sizeof(long long) == 8);
  assert(offsetof(Name, Id) == 0);
  assert(offsetof(Name, X) == 0x24);
} 
```

或者，您可以调查`#pragma pack`.

*注意*：您的问题没有可移植的、标准认可的解决方案。编译器可以自由地（几乎）插入填充字节，无论它们选择如何。但是可能有非可移植的、编译器认可的解决方案，例如上面的两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:24:25.093

如果您正在寻找任何未知结构的通用解决方案，请查看此代码

```
template <size_t SIZE> class UnknownStruct
{
public:
    enum {size = SIZE};
    explicit UnknownStruct(unsigned char* data)
    {
        memcpy(m_data, data, SIZE);
    }
    template <size_t OFFSET, typename TYPE> TYPE* read()
    {
        if(OFFSET + sizeof(TYPE) <= SIZE)
            return reinterpret_cast<TYPE*>(m_data + OFFSET);
        return NULL;
    }
private:
    unsigned char m_data[SIZE];
}; 
```

UnknownStructure 是您可以使用该`read`函数访问的一团原始字节（计数大小）。这是如何将其用于您的问题的示例

```
class Name : public UnknownStruct<sizeof(long) + 32 + sizeof(float)>
{
public:
    explicit Name(unsigned char* data) : UnknownStruct<size>(data){}
    long& ID()
    {
        return *read<0, long>();
    }
    float& X()
    {
        return *read<sizeof(long) + 32, float>();
    }
}; 
```

调用代码看起来像这样

```
unsigned char foodata[100] = {0};
Name fooreader(foodata);
fooreader.ID() = 57;
long id = fooreader.ID(); 
```

当您发现更多关于结构的信息时，您可以向 Name 类添加更多函数，这些函数将从适当的偏移量读取类型

此代码的优点是它可以用于任何未知结构。可能有其他库可以提供此解决方案，但这很短且易于使用

# java - 使用 JavaMail 访问 Mailinator POP3

> ID：10706604
> 
> 赞同：3
> 
> 时间：2012-05-22T16:59:57.663
> 
> 标签：java, jakarta-mail, pop3

我正在尝试使用 JavaMail API 访问 mailinators 消息。

我可以正确连接到服务器等，但是在阅读消息时，我一直收到“文件夹未打开”异常，并且当我检查文件夹是否打开以及是否未打开文件夹时，这也无济于事。我猜由于某种原因 mailinator 结束了连接。

如果我尝试获取消息的输入流而不是使用 getContent 我可以很好地从输入流中读取，并且它包含消息的样式等，但由于某种原因，我从输入流中读取的数据似乎不包含消息正文。

如果这是关于 mailinator 或者您可以为我提供任何其他支持 pop3 或其他易于阅读的随机电子邮件阅读服务，那么我是否在此项目中使用 mailinator 并不重要。

我当前的邮件阅读代码。

```
private void checkMail(String user) {
    Properties props = new Properties();
    Session session = Session.getDefaultInstance(props, null);
    try {
        Store store = session.getStore("pop3");
        store.connect("pop.mailinator.com", 110, user, "12345678");
        Folder inbox = store.getFolder("inbox");
        if(inbox == null) {
            System.out.println("no inbox");
        } else {
            inbox.open(Folder.READ_ONLY);
            for(Message message: inbox.getMessages()) {

                byte[] buffer = new byte[10000];

                int read = 0;

                try {

                    while((read = message.getInputStream().read(buffer, 0, 1024)) > 0) {
                        for(int i = 0; i < buffer.length; i++) {
                            System.out.print((char)buffer[i]);
                        }
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                /*try {
                    System.out.println(message.getContent().toString());
                } catch (IOException e) {
                    e.printStackTrace();
                }*/
            }
        }
        inbox.close(false);
        store.close();
    } catch (NoSuchProviderException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (MessagingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

同样从输入流读取时，输入流似乎永无止境，只是重新开始。我的目的是获取邮件正文和主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-06T16:41:46.517

过去一段时间，Mailinator 改变了行为，禁止 POP3 访问，（或只为付费客户保留）。也许那是您的问题（如果代码与其他邮件提供商一起使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:35:53.233

如果您正在从消息中读取 InputStream，那么显然该文件夹已打开。您何时收到“文件夹未打开”异常？[协议跟踪](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)显示什么？如果您认为您的服务器是问题所在，您可以尝试使用[Gmail 。](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)此外，您还需要[修复对 getDefaultInstance 的使用](http://www.oracle.com/technetwork/java/javamail/faq/index.html#getdefaultinstance)。

# java - LWJGL - 如何创建一个按钮来关闭应用程序

> ID：10706605
> 
> 赞同：1
> 
> 时间：2012-05-22T16:59:58.037
> 
> 标签：java, opengl, lwjgl

我已经让它打开了一个全屏窗口，但现在我如何创建一个按钮让它退出应用程序？

另外，你知道有什么好的教程可以学习吗？好像很多都找不到？

最后，我可以使用我在 c++ 中学习使用 java 的 opengl 代码，还是 opengl 完全不同？

这是我的代码：

```
package game;

import static org.lwjgl.opengl.GL11.*;
import org.lwjgl.opengl.*;
import org.lwjgl.*;

public class Main {

    public Main() {
        try {
            Display.setDisplayMode(Display.getDesktopDisplayMode());
            Display.setFullscreen(true);
            Display.create();
        } catch(LWJGLException e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:02:09.780

lwjgl 不提供任何高级小部件，例如按钮。您需要使用 gl 调用来绘制按钮（使用按钮图像作为四边形的纹理。在尝试纹理之前从彩色矩形开始）。然后您需要检查按钮区域中的鼠标单击事件。您可能需要考虑在 lwjgl 之上使用更高级别的库来简化此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:31:39.943

这是我编写的一些用于绘制和处理按钮的代码。

您可以指定每个按钮的 X、Y 和纹理，当单击按钮时，变量`isClicked`变为真。至于关闭应用程序，请使用

```
if(EXITBUTTON.isClicked)
{
System.exit(0);
} 
```

按钮类：您需要 LWJGL 和 Slick Util。

```
import java.awt.Rectangle;
import java.io.IOException;

import org.lwjgl.input.Mouse;
import org.lwjgl.opengl.GL11;
import org.newdawn.slick.Color;
import org.newdawn.slick.opengl.Texture;
import org.newdawn.slick.opengl.TextureLoader;
import org.newdawn.slick.util.ResourceLoader;

public class Button {

    public int X;
    public int Y;
    public Texture buttonTexture;
    public boolean isClicked=false;
    Rectangle bounds = new Rectangle();

    public void addButton(int x, int y , String TEXPATH){
        X=x;
        Y=y;
        try {
            buttonTexture = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream(TEXPATH));
            System.out.println(buttonTexture.getTextureID());
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        bounds.x=X;
        bounds.y=Y;
        bounds.height=buttonTexture.getImageHeight();
        bounds.width=buttonTexture.getImageWidth();
        System.out.println(""+bounds.x+" "+bounds.y+" "+bounds.width+" "+bounds.height);
    }

    public void Draw(){
        if(bounds.contains(Mouse.getX(),(600 - Mouse.getY()))&&Mouse.isButtonDown(0)){
            isClicked=true;
        }else{
            isClicked=false;
        }
        Color.white.bind();
        buttonTexture.bind(); // or GL11.glBind(texture.getTextureID());

        GL11.glBegin(GL11.GL_QUADS);
            GL11.glTexCoord2f(0,0);
            GL11.glVertex2f(X,Y);
            GL11.glTexCoord2f(1,0);
            GL11.glVertex2f(X+buttonTexture.getTextureWidth(),Y);
            GL11.glTexCoord2f(1,1);
            GL11.glVertex2f(X+buttonTexture.getTextureWidth(),Y+buttonTexture.getTextureHeight());
            GL11.glTexCoord2f(0,1);
            GL11.glVertex2f(X,Y+buttonTexture.getTextureHeight());
        GL11.glEnd();
        }

    } 
```

# python - 如何跨多个文件正确地将键输入添加到精灵图像？

> ID：10706606
> 
> 赞同：0
> 
> 时间：2012-05-22T17:00:01.297
> 
> 标签：python, pygame

我创建了这个来移动精灵。我在不同的文件中将精灵图像坐标设置为（精灵，300）。运行程序并按左右箭头，没有任何动作。spritex 的值在打印函数中发生变化

我通过添加打印功能检查了程序是否正在读取按键。我是否设置了错误的程序？

* * *

------运动功能文件

```
import pygame
import os, sys
from itertools import *
from oryxsprites import *
from oryxdisplay import *
spritex = 300
screen = pygame.display.set_mode((640, 640))

def movementsprite():   

    global spritex

    keys = pygame.key.get_pressed()

    for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False

    if keys[pygame.K_RIGHT]:
              spritex += 10
              print spritex

    elif keys[pygame.K_LEFT]:              
              spritex -= 10
              print spritex 
```

* * *

------显示函数文件---------------

```
import pygame
import itertools
from oryxsprites import *
from McharMovement import *
screen = pygame.display.set_mode((640, 640))
spritex = 300
def backgroundmain():
    movementsprite()

    backdrop = pygame.Rect(0, 0, 640, 640) 
    screen.fill((50,50,50))
    playingfeildwidth = (32, 608)
    playingfeildheight = (32, 608)

screen.blit(warrior1, (spritex, 320))

pygame.display.flip() 
```

-----主文件------

```
import pygame
import os, sys
from itertools import *
from oryxsprites import *
from oryxdisplay import *
from McharMovement import *
running = True

while running:

    backgroundmain()
    pygame.display.set_caption('OryxGame')
    pygame.display.set_icon(grasstile)

    for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False
             pygame.quit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:14:49.197

从外观上看，您的`spritex`变量超出了范围。您需要使其可用于该`movementsprite()`功能。

把`global`你的变量声明放在前面可能会解决这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:40:54.417

将您的代码更改为：

```
spritex = 100

def movementsprite():
    global spritex  #I added this line
    keys = pygame.key.get_pressed()
    for event in pygame.event.get():
         if event.type == pygame.QUIT:
             running = False

    if keys[pygame.K_RIGHT]:
              spritex += 10
              print spritex

    elif keys[pygame.K_LEFT]:              
              spritex -= 10 
```

那应该可以正常工作

如果精灵仍然没有移动，那么问题就出在你调用你的函数来移动它的时候。你是如何移动它的？您需要从内部调用该运动功能`def movementsprite():`

如果你想从另一个文件调用移动函数，使用

`from other_file import movement_func`

甚至

`from other_file import *`

更新：只需在您的移动函数中添加一个返回语句，`return spritex`

然后在 Display 函数中，当您调用移动函数时，将行更改为 `spritex=movementfunction()`

这将改变文件之间 spritex 的值。而且您不必在运动功能的顶部使 spritex 全局化。

希望我能帮上忙！:)

# c++ - C++笛卡尔积迭代器在第一次迭代时调用基类函数

> ID：10706611
> 
> 赞同：3
> 
> 时间：2012-05-22T17:00:12.047
> 
> 标签：c++, templates, derived-class, cartesian-product

我正在研究一组 n 维笛卡尔产品类，松散地基于这个[解决方案](https://stackoverflow.com/questions/5279051/how-can-i-create-cartesian-product-of-vector-of-vectors/5279601#5279601)。

对于相同的基本算法集，我有许多不同的数据类型，我想“啊哈！我将使用模板来减少我的整体工作！” 而且，直到现在，它的工作都很棒。我正在使用 Boost 的 iterator_facade。

我的问题是我使用的派生类`map<char, boost::integer_range<int> >`。每次迭代都会产生 a `map<char,int>`，但我排除了第二个值为 0 的对，因为就我的算法而言，它们只是浪费空间。

派生类重载了生成迭代器返回值的函数并且它可以工作。然而，在第一次迭代期间，基类的生成器被调用。我很困惑。有没有人有任何想法？

以下是相关的代码片段：

* * *

```
#include <boost/container/flat_map.hpp>
#include <boost/tuple/tuple.hpp>
#include <boost/iterator/iterator_facade.hpp>
#include <boost/range/irange.hpp>
#include <utility>
#include <iostream>

using namespace boost;
using namespace boost::tuples;
using namespace std;

template <class Container2DMap,
    class return_type = boost::container::flat_map<typename Container2DMap::value_type::first_type,
    typename Container2DMap::value_type::second_type::value_type> >
class CartProductIterator2DMap : public boost::iterator_facade<
CartProductIterator2DMap<Container2DMap, return_type>,
const return_type,
boost::forward_traversal_tag> {
public:
    typedef typename Container2DMap::value_type::first_type first_type;
    typedef typename Container2DMap::const_iterator first_iterator;
    typedef typename Container2DMap::value_type::second_type::value_type second_type;
    typedef typename Container2DMap::value_type::second_type::const_iterator second_iterator;

    CartProductIterator2DMap(const Container2DMap &container) {
        rangeIterSetup(container);
    }

    CartProductIterator2DMap() : _finished(true) {}
    virtual ~CartProductIterator2DMap() {}
private:
    virtual bool equal(const CartProductIterator2DMap &other) const {
        if (_finished || other._finished) {
            if (_finished && other._finished) {
                return true;
            } else {
                return false;
            }
        } else if (_currentIter == other._currentIter) {
            return true;
        } else {
            return false;
        }
    }
    virtual void increment() { advance(); }
    virtual void advance() {
        advanceIter();
    }

    virtual const return_type& dereference() const { return _currentIter; }

protected:
    struct mode {
        const static bool stopIter = false;
        const static bool continueIter = true;
    };
    typedef boost::tuple<second_iterator,
            second_iterator,
            second_iterator> SecondIterDescription;
    typedef boost::container::flat_map<first_type, SecondIterDescription> RangeIterMap;
    friend class boost::iterator_core_access;
    return_type _currentIter;
    RangeIterMap _rangeIter;
    bool _finished;
    bool _iterMode;

    virtual void advanceIter() {
        if (_iterMode == mode::continueIter) {
            _currentIter = genReturnValue(_rangeIter);
            _iterMode = advanceRangeIter(_rangeIter);
        } else {
            _finished = true;
        }
    }
    virtual void rangeIterSetup(const Container2DMap &container) {
        _finished = false;
        if (container.empty()) {
            _iterMode = mode::stopIter;
        } else {
            _iterMode = mode::continueIter;
            for (typename Container2DMap::const_iterator it =  container.begin();
                    it != container.end(); ++it) {
                _rangeIter.insert(
                        make_pair(it->first,
                                SecondIterDescription(it->second.begin(), it->second.end(), it->second.begin())
                                )
                                );
            }
            advance();
        }
    }

    virtual return_type genReturnValue(const RangeIterMap &rangeIter) {
        std::cout << "Calling base class." << std::endl;
        return_type returnValue;
            for( typename RangeIterMap::const_iterator it = rangeIter.begin();
                    it != rangeIter.end(); ++it) {
                returnValue.insert(
                        make_pair(it->first, *get<2>(it->second))
                        );
            }
        return returnValue;
    }

    virtual bool advanceRangeIter(RangeIterMap &rangeIter) {
        for (typename RangeIterMap::iterator it = rangeIter.begin(); ; ) {
            ++(get<2>(it->second));
            if (get<2>(it->second) == get<1>(it->second)) {
                if (it + 1 == rangeIter.end()) {
                    return mode::stopIter;
                } else {
                    // cascade
                    get<2>(it->second) = get<0>(it->second);
                    ++it;
                }

            } else {
                // normal break point
                return mode::continueIter;
            }
        }
        return mode::continueIter;
    }
};

typedef boost::integer_range<int> _intRange;
typedef boost::container::flat_map<char, _intRange> CharRange;
typedef boost::container::flat_map<char, int> ResidueCount;

template <class Container2D,
    class return_type = boost::container::flat_map<typename Container2D::value_type::first_type,
    typename Container2D::value_type::second_type::value_type> >
struct BaseIterContainer {
    typedef CartProductIterator2DMap<Container2D, return_type> const_iterator;
    const Container2D &_container;
    BaseIterContainer( const Container2D &container) : _container(container) {}
    const_iterator begin() const { return const_iterator(_container); }
    const_iterator end() const { return const_iterator(); }
};

typedef BaseIterContainer<CharRange, ResidueCount> BaseCharRangeIter;

typedef CartProductIterator2DMap<CharRange, ResidueCount> BaseCPIterator;
class DerivedCPIterator : public BaseCPIterator {
public:
    DerivedCPIterator() : BaseCPIterator() {}
    DerivedCPIterator(const CharRange & charRange) : BaseCPIterator(charRange) {}
protected:
    ResidueCount genReturnValue(const RangeIterMap &rangeIter) {
        std::cout << "Calling derived class." << std::endl;
        ResidueCount returnValue;
            for( RangeIterMap::const_iterator it = rangeIter.begin();
                    it != rangeIter.end(); ++it) {
                    const char aa = it->first;
                    const int aaCount = *get<2>(it->second);
                    if (aaCount > 0) {
                        returnValue.insert(
                                make_pair(aa, aaCount)
                        );
                    }
            }
        return returnValue;
    }
};

struct DerivedCharRangeIter {
    typedef DerivedCPIterator const_iterator;
    const CharRange &_container;
    DerivedCharRangeIter( const CharRange &container) : _container(container) {}
    const_iterator begin() const { return const_iterator(_container); }
    const_iterator end() const { return const_iterator(); }
};

std::ostream& operator<<(std::ostream& out, const ResidueCount &rCount) {
    foreach(const ResidueCount::value_type& aaCount, rCount) {
        char aa = aaCount.first;
        int totalAACount = aaCount.second;
        out << "(" << aa << "," << totalAACount << ")";
    }
    return out;
}

int main(int argc, char **argv) {
    cout << "Base Container" << endl;
    CharRange test;
    test.insert(make_pair('a', _intRange(0, 3)));
    test.insert(make_pair('b', _intRange(0, 3)));
    BaseCharRangeIter t(test);
    BaseCharRangeIter::const_iterator it = t.begin();
    for( ;it != t.end(); ++it) {
        cout << *it << endl;
    }
    cout << endl;
    cout << "Derived Container: " << endl;
    DerivedCharRangeIter r(test);
    DerivedCharRangeIter::const_iterator rt = r.begin();
    for( ; rt != r.end(); ++rt) {
        cout << *rt << endl;
    }
    return 0;
} 
```

* * *

我得到的结果：

* * *

```
Base Container
Calling base class.
(a,0)(b,0)
Calling base class.
(a,1)(b,0)
Calling base class.
(a,2)(b,0)
Calling base class.
(a,0)(b,1)
Calling base class.
(a,1)(b,1)
Calling base class.
(a,2)(b,1)
Calling base class.
(a,0)(b,2)
Calling base class.
(a,1)(b,2)
Calling base class.
(a,2)(b,2)

Derived Container: 
Calling base class.
(a,0)(b,0)
Calling derived class.
(a,1)
Calling derived class.
(a,2)
Calling derived class.
(b,1)
Calling derived class.
(a,1)(b,1)
Calling derived class.
(a,2)(b,1)
Calling derived class.
(b,2)
Calling derived class.
(a,1)(b,2)
Calling derived class.
(a,2)(b,2) 
```

* * *

每个 genReturnValue 每次调用都会打印其类（基类或派生类）。基类发挥应有的作用。但是，派生类没有。第一次迭代调用基类 genReturnValue 并且没有过滤掉 0。然而，进一步的迭代确实如此。

由于这是我第一次涉足模板和派生类，我确信我遗漏了一些明显的东西，但对于我的生活，我无法弄清楚。GCC 4.6.3 和 Clang 3.0-6 提供相同的输出。

哈！

编辑：另外，我在 C++ 编程方面相对较新。我愿意接受批评，风格或其他，如果你有的话。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:23:22.727

实际上，它与指针无关。但是，相反，是`virtual`功能的限制。

在构造和销毁过程中，由于基类相对于派生对象的构造和销毁顺序，虚拟调用不能是纯虚拟的，因此它们是静态解析的。

也就是说，`virtualfunc`在构造函数或析构函数中的调用`Base`被（以某种方式）解析为`Base::virtualfunc`. 如果这是一个纯虚函数，则会出现未定义行为。

因此，一般准则是：

*   **永远不要**从构造函数或析构函数调用虚函数。

例子：

```
struct Base {
    Base() { call(); }

    virtual call() { std::cout << "Base\n"; }
};

struct Derived: Base {
    Derived(int i): _i(i);

    virtual call() { std::cout << "Derived" << _i << "\n"; }

    int _i;
};

int main() {
    Derived d(1);
}; 
```

这将打印`Base`，而不是`Derived1`您所期望的；这有一个很好的理由：记住事物的构造顺序：

*   `Derived()`叫做
*   它会自动调用`Base()`
*   它调用`_i(i)`
*   它进入 的 体内`Derived()`，它什么也不做

因此，当`Base()`被调用时，`_i`尚未初始化，因此调用`call`将是愚蠢的。值得庆幸的是，该标准在这里提供了一个很好的解决方法，即使它在大多数情况下并不是您最初期望的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T17:25:07.047

你的基类`CartProductIterator2DMap`有一个调用虚函数的构造函数：

```
CartProductIterator2DMap(const Container2DMap &container) {
    rangeIterSetup(container);
} 
```

这个虚函数最终会调用另一个虚函数：`genReturnValue`.

现在，当基类构造函数执行时，派生类还没有被构造。所以`genReturnValue`从基类构造函数调用调用`CartProductIterator2DMap::genReturnValue`. 但是后续调用（在对象完全构造之后）调用：`DerivedCPIterator::genReturnValue`。

您需要确保您的基类构造函数不调用任何虚函数。

# java - 原始片段不会回到堆栈的后面，它保持可见

> ID：10706615
> 
> 赞同：0
> 
> 时间：2012-05-22T17:00:27.010
> 
> 标签：java, android, xml, android-fragments

我遇到了 FragmentTransactions 的一些问题。我已经成功地从 onClick 方法调用了一个片段，但原始片段`mainFragment`不会“消失”或回到堆栈的后面。我遵循了关于 Fragment Transcation 的 Android 开发教程。我认为问题出在我的`Survey.java`班级或`Details.java`班级。任何帮助表示赞赏。

**更新：（在下面添加照片）** 之前： http: [//imm.io/q9vt](http://imm.io/q9vt)
点击“调查按钮”之后：http: [//imm.io/q9wf](http://imm.io/q9wf)

请参阅以下所有代码：

来自**Main.java的代码**

```
package mycompany.nst;

import mycompany.nst.R;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentManager;
import android.app.FragmentTransaction;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Display;
import android.view.View;
import android.view.WindowManager;

public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }

    Fragment _surveyFrag = new Survey();

    public void focusFragment(Fragment mainFragment) {
        FragmentManager FragMgr = getFragmentManager();
        FragmentTransaction transaction = FragMgr.beginTransaction();
        try {
            transaction.replace(R.id.mainFragment, _surveyFrag);
            transaction.addToBackStack(null);
            transaction.commit();

        } catch(Exception e){};
            transaction = null;
            FragMgr = null;     
    }

    public void survey_onClick(View view) {
        Log.i("onClick", "SURVEY BEGIN");
        focusFragment(_surveyFrag);
    }
} 
```

* * *

来自**main.xml的代码**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainlayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/hsdarker"
    android:baselineAligned="false"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/listFragment"
        android:name="mycompany.nst.ListFragment"
        android:layout_width="300dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        class="mycompany.nst.ListFragment" >
        <!-- Preview: layout=@layout/list -->

    </fragment>

    <fragment
        android:id="@+id/mainFragment"
        android:name="mycompany.nst.Details"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/listFragment"
        class="mycompany.nst.Details" >
        <!-- Preview: layout=@layout/details -->

    </fragment>

</RelativeLayout> 
```

* * *

来自**Details.java的代码** *<-- 原始片段*

```
package mycompany.nst;

import mycompany.nst.R;
import android.app.Fragment;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

    public class Details extends Fragment {
        /** Called when the activity is first created. */
        @Override
        public View onCreateView(LayoutInflater LIdetails, ViewGroup VGdetails, Bundle SaveInstancedState) {
            Log.i("DetailsFragment", "onCreateView");
            // Inflate the layout for this fragment
            return LIdetails.inflate(R.layout.details, VGdetails, false);
        }  
    } 
```

* * *

来自**Details.java的代码** *<-- 新片段*

```
package mycompany.nst;

import mycompany.nst.R;
import android.app.Fragment;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

    public class Survey extends Fragment {
        /** Called when the activity is first created. */ 
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            Log.i("SurveyFragment", "onCreateView");
            // Inflate the layout for this fragment
            return inflater.inflate(R.layout.survey, container, false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:59:13.093

您不能替换或删除 XML 中定义的片段 - 它成为布局的不可删除部分。但是，如果您在代码中定义片段，则可以随意替换和删除它们。

# sql - 如何在不使用 JOIN 的情况下将 2 个表中的列合并为 1 个

> ID：10706617
> 
> 赞同：5
> 
> 时间：2012-05-22T17:00:31.937
> 
> 标签：sql, sql-server, tsql

我正在使用 SQL Server 2008。我有 2 个表变量，例如

```
FirstName
==========
Little
John  
Baby  

LastName
==========
Timmy
Doe  
Jessica 
```

我希望结果表是：

```
 First      Last   
=====================
 Little     Timmy    
 John       Doe      
 Baby       Jessica 
```

注意没有PK可以加入2个表。我正在尝试使用光标，但不知道如何开始。

- - 更新 - - -

我知道这是一种罕见的情况，但我正在编写一个脚本来清理遗留数据。我们知道“Little”与“Timmy”搭配的唯一方式是它们都是表格的第一条记录。如果我们对表格进行 PK 但没有关系会有所帮助吗？

```
ID FirstName
==========
1  Little
2  John  
3  Baby  
----------

ID LastName
==========
4  Timmy
5  Doe  
6  Jessica
---------- 
```

我不熟悉 TSQL，所以我想我可以遍历 2 个表，就像遍历内存中的数组一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T17:07:27.160

你可以尝试这样的事情，根据行号进行匹配：

```
SELECT FirstName AS First, LastName AS Last
FROM
(
  SELECT ROW_NUMBER() OVER (ORDER BY ID) AS RowNum, FirstName
  FROM FirstName
) t1
INNER JOIN
(
  SELECT ROW_NUMBER() OVER (ORDER BY ID) AS RowNum, LastName
  FROM LastName
) t2
ON t1.RowNum = t2.RowNum 
```

但不要将此视为*您不需要 keys*的信号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:23:36.063

如果没有身份，您将无法可靠地连接这两个表变量。假设首先以序数方式填充它们，则可以使用如下标识创建每个表：

```
DECLARE @first TABLE(ID INT IDENTITY(1,1), NameFirst VARCHAR(30));
DECLARE @last TABLE(ID INT IDENTITY(1,1), NameLast VARCHAR(30));

-- Note that we don't need to list column names here
INSERT INTO @first VALUES('Little');
INSERT INTO @first VALUES('John');
INSERT INTO @first VALUES('Baby');

INSERT INTO @last VALUES('Timmy');
INSERT INTO @last VALUES('Doe');
INSERT INTO @last VALUES('Jessica');

SELECT n1.NameFirst
, n2.NameLast
FROM @first n1
INNER JOIN @last n2 ON n1.ID=n2.ID; 
```

结果：

```
NameFirst                      NameLast
------------------------------ ------------------------------
Little                         Timmy
John                           Doe
Baby                           Jessica 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:19:08.313

没有“第一张唱片”这样的东西。阅读顺序完全未定义。这在实践中也适用！您*将*在实践中看到随机行顺序。

您*需要*定义排序顺序。之后，您可以像这样查询：

```
SELECT FirstName AS First, LastName AS Last
FROM
(
  SELECT ROW_NUMBER() OVER (ORDER BY ID) AS r, FirstName
  FROM FirstName
) t1
INNER JOIN
(
  SELECT ROW_NUMBER() OVER (ORDER BY ID) AS r, LastName
  FROM LastName
) t2
ON t1.r = t2.r 
```

注意占位符“ `SORT ORDER HERE`”。需要填写。例如：“ID”或“FirstName”。

编辑：看到您的编辑后，我在 ID 上添加了排序顺序。现在可以使用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:23:20.553

这是一个黑客，可能适用于您的情况：

```
select t1.id, t1.name, t2.name
from (select name, row_number() over (partition by null order by (select NULL)) as id
      from t1
     ) t1 join
     (select name, row_number() over (partition by null order by (select NULL)) as id
      from t2
     ) t2
     on t1.id = t2.id 
```

以我的经验，带有订单子查询的 row_number() 意味着实际上没有进行任何排序，但行是按顺序引入的。如果您使用的是单线程实例，这更有可能起作用。

而且，我不保证它会起作用！一定要检查结果！如果这不起作用，您也许可以通过使用临时表来获得相同的效果。

这些数据是否来自数据库世界之外？如果您必须多次执行此过程，那么您应该在外部或在输入数据库时​​处理该问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T18:18:06.127

在@JohnDewey 提出的解决方案的基础上，您可以将记录分类到表变量中。在实践中，它将根据记录的顺序创建值之间的关系：

```
DECLARE @first TABLE(sequence INT IDENTITY(1,1), FirstName VARCHAR(30));
DECLARE @last TABLE(sequence INT IDENTITY(1,1), LastName VARCHAR(30));

INSERT INTO @first(FirstName)
SELECT FirstName FROM TableFisrt ORDER BY id;
-- sequence FirstName
-- ======== =========
--        1  Little
--        2  John  
--        3  Baby 

INSERT INTO @last(LastName)
SELECT FirstName FROM TableLast ORDER BY id;
-- sequence LastName
-- ======== =========
--        1  Timmy
--        2  Doe
--        3  Jessica 

SELECT frs.FirstName, lst.LastName
FROM @first frs
INNER JOIN @last lst ON frs.sequence = lst.sequence;
-- sequence FirstName
-- ======== =========
-- Little   Timmy
-- John     Doe
-- Baby     Jessica 
```

# php - 使用 preg_match 拆分邮件标头

> ID：10706622
> 
> 赞同：2
> 
> 时间：2012-05-22T17:00:42.903
> 
> 标签：php, pcre

我必须通过电子邮件发送标题，并且我想提取不同的数据：发件人、主题、日期等。

```
$mail1 = 'From: <encuestas@despegar.com>
To: 4fb661d55e409@ventas.ciudades.com
Subject: Califique nuestro servicio
Date: Sat, 19 May 2012 10:39:04 -0400
Message-ID: <3b6401cd35cd$23d08b90$0c01010a@despexds.net>
MIME-Version: 1.0';

$mail2 = 'Date: Fri, 21 Oct 2011 13:42:46 +0000 (GMT)
From: "Decolar.com" <non-reply@despegar.com>
To: 4ea15be894aca@ventas.ciudades.com
Message-ID: <2009175400.15674.1319204566275.JavaMail.root@uns02>
Subject: =?UTF-8?Q?Decolar.com_-_Solicita=C3=A7=C3=A3o_?=
 =?UTF-8?Q?de_compra_-_N=C3=BAmero:10603789?=
MIME-Version: 1.0';

preg_match("/Subject: (.)*(Date|Message-ID|From|To|MIME-Version):/s",$mail1,$m);        
print_r($m); 
```

我正在使用上面的代码来获取主题，但结果不是预期的。

对于mail1，我得到：

```
Array
(
    [0] => Subject: Califique nuestro servicio
Date: Sat, 19 May 2012 10:39:04 -0400
Message-ID: <3b6401cd35cd$23d08b90$0c01010a@despexds.net>
MIME-Version:
    [1] => 

    [2] => MIME-Version
) 
```

对于mail2，我得到：

```
Array
(
    [0] => Subject: =?UTF-8?Q?Decolar.com_-_Solicita=C3=A7=C3=A3o_?=
 =?UTF-8?Q?de_compra_-_N=C3=BAmero:10603789?=
MIME-Version:
    [1] => 

    [2] => MIME-Version
) 
```

我这两种情况，主题都是空的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:55:30.523

我可能会做类似的事情：

```
function normalize_array($arr) {
    for ($res = array(), $i = 0; $i < count($arr); $i+=2) {
        $key = strtr($arr[$i],array(': '=>'','-'=>'_'));
        $res[$key] = $arr[$i+1];
    }
    return $res;
}

$mailData = normalize_array(preg_split('~([\w-]+: )~',$mail1,-1,PREG_SPLIT_DELIM_CAPTURE|PREG_SPLIT_NO_EMPTY));
print_r($mailData); 
```

这将返回：

```
大批
(
    [来自] => <encuestas@despegar.com>

    [致] => 4fb661d55e409@ventas.ciudades.com

    [主题] => Califique nuestro servicio

    [日期] => 2012 年 5 月 19 日星期六 10:39:04 -0400

    [Message_ID] => <3b6401cd35cd$23d08b90$0c01010a@despexds.net>

    [MIME_Version] => 1.0
)

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:13:30.470

正则表达式模式应该是：

```
/Subject: (.*)\b/ 
```

# ios - 在 iPad 上调试 HTML5 视频的方法

> ID：10706623
> 
> 赞同：3
> 
> 时间：2012-05-22T17:00:43.897
> 
> 标签：ios, ipad, debugging, html5-video

我正在编写一个视频编码器/服务器来为打算在 iPad 上运行的 Web 应用程序提供视频。iPad 使用 HTML5 视频标签来检索和解码视频，我遇到了编码视频未正确解码的问题。

是否有类似 iPad 上的系统日志之类的东西，我可以在其中找到有关视频解码器在我的比特流中发现令人反感的内容的任何信息，或者任何其他可以了解解码过程的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T12:20:53.997

旧版本的 IOS 允许您打开 Safari 调试控制台（设置 -> Safari-> 高级 -> 调试控制台）。这对于记录错误等很方便。如果您是 mac 用户，显然有一个很好的界面可以这样做。

如果您有桌面 Safari，您还可以伪造用户代理，请参见：[http](http://www.dummies.com/how-to/content/how-to-activate-user-agent-switcher-in-safari.html) ://www.dummies.com/how-to/content/how-to-activate-user-agent-switcher-in-safari.html这将允许您可以使用 Web 调试工具来查看发生了什么。

或者，您可以在您的 web 应用程序中创建一个“调试”面板并劫持 console.log 函数，以便您可以查看错误等。

例子：

```
<div id="debug-info"></div>

<script>

(function(){
    var oldLog = console.log;
    console.log = function (message) {
        // DO MESSAGE HERE.
        oldLog.apply(console, arguments);
        $('#debug-info').prepend('<p>'+message+'</p>')
    };
})();

</script> 
```

# button - Arduino一键开/关控制

> ID：10706624
> 
> 赞同：0
> 
> 时间：2012-05-22T17:00:44.520
> 
> 标签：button, arduino

我正在尝试找到一种方法来使用一个按钮来启用/禁用命令。（实际上，这是一个多色 LED，我正在尝试开始/停止更改颜色）

我的代码在这里，但它不起作用，如果有人能告诉我出了什么问题，我看不到它......

```
int red = 0;
int redPin = 9;
int blue = 0;
int bluePin = 11;
int green = 0;
int greenPin = 10;
int state = 0;
int stateModulo = 0;
void setup() {
  pinMode(10, OUTPUT);
  pinMode(11, OUTPUT);
  pinMode(9, OUTPUT);
  pinMode(2, INPUT);
}

void checkButton(int var, int result) {
  if (digitalRead(2) == HIGH) {
      var++;
      result = var%2;
    }
}

void changecolor(int startColor,int endColor,int startPin,int endPin,int delayTime)
{
  for (endColor = 0; endColor <= 255; endColor++)
  {
     checkButton(state,stateModulo);
     if (stateModulo == 0) {
       startColor = 255 - endColor;
       analogWrite(endPin, endColor);
       analogWrite(startPin, startColor);
       delay(delayTime);
     }
  }
}

void loop() {
   changecolor(red,green,redPin,greenPin,10);
   changecolor(green,blue,greenPin,bluePin,10);
   changecolor(blue,red,bluePin,redPin,10);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:34:54.857

在下面的代码中，`result`不通过引用传递，也不返回。这同样适用于`var`，在您修改它之后，您会丢弃您所做的任何编辑。

```
void checkButton(int var, int result) {
  if (digitalRead(2) == HIGH) {
      var++;
      result = var%2;
    }
} 
```

我可以向您推荐一本很好的 C++ 书籍，可以在其中学习一些语言基础知识。我的建议：Thinking in C++，作者 Bruce Eckel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T02:33:06.307

考虑一下：

```
//Buttons

int button1 = 7;
int button2 = 6;
int button3 = 4;
int button4 = 2;

//Relays
int rl1 = 13;
int rl2 = 12;
int rl3 = 11;
int rl4 = 8;

//States for Relay and Button (1)

int state1 = HIGH;      // the current state of the output pin
int reading1;           // the current reading from the input pin
int previous1 = LOW;    // the previous reading from the input pin

//States for Relay and Button (2)

int state2 = HIGH;      // the current state of the output pin
int reading2;           // the current reading from the input pin
int previous2 = LOW;    // the previous reading from the input pin

//States for Relay and Button (3)

int state3 = HIGH;      // the current state of the output pin
int reading3;           // the current reading from the input pin
int previous3 = LOW;    // the previous reading from the input pin

//States for Relay and Button (4)

int state4 = HIGH;      // the current state of the output pin
int reading4;           // the current reading from the input pin
int previous4 = LOW;    // the previous reading from the input pin

// the follow variables are long's because the time, measured in miliseconds,
// will quickly become a bigger number than can be stored in an int.
long time1 = 0;          // the last time the output pin was toggled
long time2 = 0;
long time3 = 0;
long time4 = 0;

long debounce1 = 200;   // the debounce time, increase if the output flickers
long debounce2 = 200;
long debounce3 = 200;
long debounce4 = 200;

void setup()
{
  pinMode(button1, INPUT);
  pinMode(button2, INPUT);
  pinMode(button3, INPUT);
  pinMode(button4, INPUT);

  pinMode(rl1, OUTPUT);
  pinMode(rl2, OUTPUT);
  pinMode(rl3, OUTPUT);
  pinMode(rl4, OUTPUT);

}

void loop() {

  reading1 = digitalRead(button1);
  reading2 = digitalRead(button2);
  reading3 = digitalRead(button3);
  reading4 = digitalRead(button4);

  // if the input just went from LOW and HIGH and we've waited long enough
  // to ignore any noise on the circuit, toggle the output pin and remember
  // the time
  //Condition Relay 1
  if (reading1 == HIGH && previous1 == LOW && millis() - time1 > debounce1) {
    if (state1 == HIGH)
      state1 = LOW;
    else
      state1 = HIGH;

    time1 = millis();    
  }

  //Condition Relay 2
    if (reading2 == HIGH && previous2 == LOW && millis() - time2 > debounce2) {
    if (state2 == HIGH)
      state2 = LOW;
    else
      state2 = HIGH;

    time2 = millis();    
  }

  //Condition Relay 3
    if (reading3 == HIGH && previous3 == LOW && millis() - time3 > debounce3) {
    if (state3 == HIGH)
      state3 = LOW;
    else
      state3 = HIGH;

    time3 = millis();    
  }

  //Condition Relay 4
    if (reading4 == HIGH && previous4 == LOW && millis() - time4 > debounce4) {
    if (state4 == HIGH)
      state4 = LOW;
    else
      state4 = HIGH;

    time4 = millis();    
  }

  digitalWrite(rl1, state1);
  digitalWrite(rl2, state2);
  digitalWrite(rl3, state3);
  digitalWrite(rl4, state4);

  previous1 = reading1;
  previous2 = reading2;
  previous3 = reading3;
  previous4 = reading4;
} 
```

# linux - sed: sed: -e expression #1, char 63: unterminated `s' command

> ID：10706630
> 
> 赞同：1
> 
> 时间：2012-05-22T17:01:06.400
> 
> 标签：linux, bash, unix, ubuntu, sed

我正在尝试使用 sed 替换文本，但遇到以下错误：

```
[root@server3 ~]# echo "{"playlist":[" | sed 's#{"playlist":[#{"playlist":[{"comment":" text 1","playlist":[#'
sed: -e expression #1, char 63: unterminated `s' command 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:04:11.490

您需要`[`在模式中转义，因此 sed 不会认为您正在尝试启动字符列表。

```
echo "test" | sed 's#{"playlist":\[#{"playlist":[{"comment":" text 1","playlist":[#' 
```

# opencv - 从一组坐标计算变换矩阵（使用 OpenCV）

> ID：10706631
> 
> 赞同：0
> 
> 时间：2012-05-22T17:01:07.633
> 
> 标签：opencv, coordinate-systems

我有一个小立方体，它的表面上有 n（你可以假设 n = 4）区分点。这些点被编号 (1-n) 并形成一个坐标空间，其中点 #1 是原点。

现在我使用跟踪相机来获取这些点的坐标，相对于相机的坐标空间。这意味着我现在有 n 个向量`p_i`从相机的原点指向立方体的表面。

有了这些信息，我正在尝试计算代表这两个坐标空间之间的变换的仿射变换矩阵（旋转+平移）。翻译部分相当简单，但我正在努力计算旋转矩阵。

OpenCV 中是否有任何内置功能可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:06:21.283

听起来[`cvGetPerspectiveTransform`](http://opencv.willowgarage.com/documentation/geometric_image_transformations.html)就是你要找的东西；`cvFindHomograpy`也可能有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:21:14.470

[solvePnP](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#solvepnp)应该给你旋转矩阵和平移向量。尝试使用`CV_EPNP`or `CV_ITERATIVE`。

**编辑：**或者您正在寻找[RQ 分解](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#rqdecomp3x3)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T21:38:49.333

查看 OpenCV 的立体相机教程。OpenCV 使用平面棋盘进行所有计算，并将其 Z 维度设置为 0 以构建其 3D 点列表。您已经拥有 3D 点，因此请更改教程中的代码以反映您的 3D 点列表。然后您可以计算转换。

# r - 使用 ggplot2 网格显示不佳

> ID：10706632
> 
> 赞同：8
> 
> 时间：2012-05-22T17:01:08.270
> 
> 标签：r, map-projections, ggplot2

我正在尝试在天空上绘制天体（基本上坐标相当于纬度/经度）。我使用函数的`"aitoff"`投影成功地绘制了我的所有点`coord_map`，但在这种情况下，网格的显示效果很差，即对于不等于零的纬度，剩余的水平线仍然显示，以及它们的正确投影。

[![在此处输入图像描述](../Images/765e3100e8c3d4f64af0b37a373616e9.png)](https://i.stack.imgur.com/yttzb.png)

我怎样才能删除这些行？

这是重现该行为的代码：

```
library(ggplot2)
library(mapproj)
sky2 = data.frame(RA=0, Dec=0)
skyplot2 <- qplot(RA,Dec,data=sky2,xlim=c(0,360),ylim=c(-89.999,89.999),
xlab="R.A.(°)", ylab="Decl. (°)",main="Source repartition on the sky")
skyplot2 + coord_map(projection="aitoff",orientation=c(89.999,180,0)) + 
scale_y_continuous(breaks=(-2:2)*30,limits=c(-89.999,89.999)) + 
scale_x_continuous(breaks=(0:8)*45,limits=c(0,360),
                   labels=c("","","","","","","","","")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T02:01:37.773

~~绝对这是 ggplot2 中的一个错误，所以你能提交这个错误吗？ [https://github.com/hadley/ggplot2/issues?state=open](https://github.com/hadley/ggplot2/issues?state=open)~~ [归档为错误](https://github.com/hadley/ggplot2/issues/562)。

这是一个快速而肮脏的hack。

```
f <- function(x, y, ...) {
    if (any(is.na(x))) {
    id <- rle(!is.na(x))$length
    id <- rep(seq_along(id), id)
    df <- data.frame(x, y, id)
    df <- df[order(df$id, df$x), ]
  } else if (any(is.na(y))) {
    id <- rle(!is.na(y))$length
    id <- rep(seq_along(id), id)
    df <- data.frame(x, y, id)
  }
  polylineGrob(df$x, df$y, id = df$id, gp = gpar(col = "white"))
}

skyplot2 <- qplot(RA,Dec,data=sky2,xlim=c(0,360),ylim=c(-89.999,89.999),
                  xlab="R.A.(°)", ylab="Decl. (°)",main="Source repartition on the sky")
skyplot2 + coord_map(projection="aitoff",orientation=c(89.999,180,0)) + 
  scale_y_continuous(breaks=(-2:2)*30,limits=c(-89.999,89.999)) + 
  scale_x_continuous(breaks=(0:8)*45,limits=c(0,360),
                     labels=c("","","","","","","","","")) +
                    opts(panel.grid.major = f) 
```

![在此处输入图像描述](../Images/eb9a581b804f9bf85ac165d599a342a4.png)

请注意，这可能仅适用于 aitoff 投影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T22:08:35.313

您只需要添加：

```
+ opts(axis.ticks = theme_blank()) 
```

# php - 来自类的php oop调用变量

> ID：10706633
> 
> 赞同：-6
> 
> 时间：2012-05-22T17:01:10.330
> 
> 标签：php, oop, class, getter-setter

我如何将类中的变量调用到另一个文件示例：

**控制器.php**

```
<?php 
    class hello {
        public $var = 1;

        public function a(){
            ......
        }

        public function b(){
            .....
        }
    }
?> 
```

**索引.php**

```
<?php
    $hello = new hello;
    //how to call the $var ? HERE
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:02:44.150

像这样：

```
$hello->var = 2 
```

或检索值：

```
$val = $hello->var; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T17:27:44.217

如果`var`是公开的，您可以这样做：

```
$hello->var = $value;
$value = $hello->var; 
```

通常，您不想直接访问类成员。您可以制作 getter 和 setter：

```
class hello{
    private $var;

    ...

    function getVar(){
        return $var;
    }

    function setVar($value){
        $var = $value;
    }
} 
```

然后你可以这样做：

```
$hello->getVar();
$hello->setVar($newVarValue); 
```

PHP 也有魔术函数[__get() 和 __set()](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)允许访问不可访问的成员。这与 getter 和 setter 基本相同，但是您可以使用一个函数而不是每个成员的多个函数（如果维护不当，它可能会变得混乱）。

所以在你的课堂上你可以这样做：

```
class hello{
    private $var;

    ...

    function __get($name){
        if($name == 'var')
            return $var;
    }

    function __set($name, $value){
        if($name == 'var')
            $var = $value;
    }
} 
```

但您仍然可以像这样访问成员：

```
$hello->var = $value;
$value = $hello->var; 
```

即使`$var`是私人的。

# ios - 以编程方式更改 UITableViewStyle 和单元格 - 故事板制作，代码中的 Mod

> ID：10706640
> 
> 赞同：0
> 
> 时间：2012-05-22T17:01:22.963
> 
> 标签：ios, uitableview

此实用程序应用程序中的视图控制器类（UITableViewController 的子类）用于显示 4 个表视图，其中 3 个通过导航控制器输入。在情节提要中，样式已设置为`UITableViewStyleGrouped`.

问题：是否可以通过编程方式更改为`Style Plain`使用索引并释放一些屏幕空间来显示索引？我已经尝试过其他 SO 问题的建议来修改它，`init`但`viewDidLoad`没有成功。

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   self.navigationItem.title = self.title;

   if ([[self parentViewController] isKindOfClass:[UITabBarController class]]) {
      [self getNewDataForDate:nil];
      self.tableView = [[UITableView alloc] initWithFrame:CGRectZero style:UITableViewStylePlain];
   }
} 
```

编辑1：真正的问题超出了上述代码。更改带有原型单元格（在此处显示为分组）的故事板生成的表格视图的“样式”必须需要一些其他模块来编码。在这里吗？

```
static NSString *CellIdentifier = @"ListCell";
DetailTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

结果是这个错误：

```
Assertion failure in -[UITableView _createPreparedCellForGlobalRow:withIndexPath:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:30:10.193

在初始化表格视图时设置表格样式（请参阅 initWithFrame:style:）。此后您无法修改样式。（这是来自[Apple 的文档](https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html)）。

# java - Eclipse 看不到任何错误... Android 强制关闭

> ID：10706644
> 
> 赞同：0
> 
> 时间：2012-05-22T17:01:55.513
> 
> 标签：java, eclipse

我尝试创建一个 HelloWorld 应用程序，当单击按钮时，它将使用当前时间更新文本字段。似乎很好（eclipse没有发现错误），但是每次我运行它时，我的手机都会崩溃......为什么？！？！？！

反正...

这是 .Java 文件

```
package com.HelloWorld.test;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import java.util.Date;

public class HelloWorldActivity extends Activity implements View.OnClickListener{

Button btn;
EditText ET;

@Override
public void onCreate(Bundle icicle){
    super.onCreate(icicle);

    btn = (Button) findViewById(R.id.btn);
    btn.setOnClickListener(this);
    ET = (EditText) findViewById(R.id.ET);
    updateTime();
    setContentView(R.layout.main);

}

public void onClick(View view){
    updateTime();
}

public void updateTime(){
    ET.setText(new Date().toString());
}

} 
```

这是 .xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Button
    android:id= "@+id/btn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="100dp"
    android:text="@string/UpdateTime" />

<EditText
   android:id="@+id/ET"
   android:inputType = "text"
   android:layout_width = "fill_parent"
   android:layout_height="wrap_content"/> 

</LinearLayout> 
```

LogCat 报告...

```
05-23 02:53:00.661: D/AndroidRuntime(17859): Shutting down VM
05-23 02:53:00.671: W/dalvikvm(17859): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
05-23 02:53:00.681: E/AndroidRuntime(17859): FATAL EXCEPTION: main
05-23 02:53:00.681: E/AndroidRuntime(17859): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.HelloWorld.test/com.HelloWorld.test.HelloWorldActivity}: java.lang.NullPointerException
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.os.Looper.loop(Looper.java:150)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.app.ActivityThread.main(ActivityThread.java:4385)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at java.lang.reflect.Method.invokeNative(Native Method)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at java.lang.reflect.Method.invoke(Method.java:507)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at dalvik.system.NativeStart.main(Native Method)
05-23 02:53:00.681: E/AndroidRuntime(17859): Caused by: java.lang.NullPointerException
05-23 02:53:00.681: E/AndroidRuntime(17859):    at com.HelloWorld.test.HelloWorldActivity.onCreate(HelloWorldActivity.java:20)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
05-23 02:53:00.681: E/AndroidRuntime(17859):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
05-23 02:53:00.681: E/AndroidRuntime(17859):    ... 11 more
05-23 02:53:02.883: D/Process(17859): killProcess, pid=17859 
```

任何和所有的帮助都非常感谢。

-阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:17:31.520

试试这个，

在 super.onCreate(icicle) 之后使用 setContentView(R.layout.main)，然后是其他东西。您应该始终首先设置布局，然后使用其中的视图执行工作。

例如：

```
 public void onCreate(Bundle icicle){

       super.onCreate(icicle);
       setContentView(R.layout.main);

       ET = (EditText) findViewById(R.id.ET);
       btn = (Button) findViewById(R.id.btn);

       btn.setOnClickListener(this);
       updateTime();

} 
```

# java - Netbeans：在 JEditorPane 中为 Java 语法添加颜色

> ID：10706645
> 
> 赞同：0
> 
> 时间：2012-05-22T17:02:10.327
> 
> 标签：java, netbeans, netbeans-7, jeditorpane

我有一个`JEditorPane`在 netbeans 中的项目，目前我有一个选择的 .java 文件填充它。我想要做的是，当加载 java 文件时，语法会被适当地着色，以便除了现在的当前纯文本之外更容易阅读。

有没有人对如何做到这一点有任何想法，因为我无法在网上找到任何好的例子？

**编辑：**答案

我终于让它工作了，我将`JSyntaxPane jar`文件添加到我的类路径（`jsyntaxpane-0.9.5-b29.jar`确切地说）然后我添加了以下两行代码以使其适用于我的 JEditorPane。

```
jsyntaxpane.DefaultSyntaxKit.initKit();
JEditorPane.setContentType("text/java"); 
```

这也可以用于以下语言：`JavaScript, Properties, Groovy, C, C++, XML, SQL, Ruby and Python`...只需在上面的代码中更改`text/java`为`text/LANGUAGE_YOU_WANT`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:33:51.670

我建议使用 RSyntaxTextArea（请参阅[http://fifesoft.com/rsyntaxtextarea/](http://fifesoft.com/rsyntaxtextarea/)）。

它很容易集成并且效果很好。该文档包含一个示例，该示例显示了如何为 Java-Syntax-Hightlighting 集成 RSyntaxtTextArea：

[http://fifesoft.com/rsyntaxtextarea/examples/example1.php](http://fifesoft.com/rsyntaxtextarea/examples/example1.php)

# ios - 自定义表格单元格：“类不符合键值编码”

> ID：10706646
> 
> 赞同：2
> 
> 时间：2012-05-22T17:02:24.090
> 
> 标签：ios, xcode, uitableview, interface-builder

**更新：我决定重新开始，因为我还处于这个应用程序的早期阶段。我重复了所有内容，无论出于何种原因，自定义单元格都进行了第二次。我将保留旧文件以确认另一个答案，因为我想我不是唯一会遇到此问题的人。**

我正在构建一个需要在其表格视图中自定义单元格的选项卡式应用程序。我已经这样做了几次，在连接这些自定义单元时，我似乎总是遇到减速带。该应用程序启动良好，直到我开始在我的表格视图控制器中使用名为 SongsTVC 的自定义单元格。我收到终止合同的原因是：

```
[<SongsTVC 0x6831330> setValue:forUndefinedKey:]: 
this class is not key value coding-compliant for the key albumLabel. 
```

我正在使用[本教程](http://ijoshsmith.com/2011/07/16/creating-a-custom-uitableviewcell-in-ios-4/)，并且之前已经成功使用过它（为 ARC 和 iOS 5 更改了一些内容）。事实上，我使用的代码和 IB 布局是基于我已经在工作的项目。我知道当您将插座连接到文件所有者而不是单元格本身时，通常会出现此错误。我没有犯这个错误，但它仍然给我这个错误。到目前为止，我已经删除了它有问题的标签，甚至完全删除了单元格的文件以便重新开始。任何帮助，将不胜感激。

**宋细胞.h**

```
#import <UIKit/UIKit.h>

@interface SongCell : UITableViewCell{

}

@property(nonatomic, assign) IBOutlet UILabel *titleLabel;
@property(nonatomic, assign) IBOutlet UILabel *artistLabel;
@property(nonatomic, assign) IBOutlet UILabel *albumLabel;

@end 
```

**SongCell.m**

```
#import "SongCell.h"

@interface SongCell ()

@end

@implementation SongCell

@synthesize titleLabel, artistLabel, albumLabel;

@end 
```

**SongsTVC.h - TableViewController 的标头**

```
#import <UIKit/UIKit.h>

@interface SongsTVC : UITableViewController{
    UINib *cellLoader;
}

@end 
```

**SongsTVC.m - 相关的 TableViewController 方法**

```
#import "SongsTVC.h"
#import "SongCell.h"

@interface SongsTVC ()

@end

static NSString *CellClassName = @"SongCell";

@implementation SongsTVC

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
        cellLoader = [UINib nibWithNibName:CellClassName bundle:[NSBundle mainBundle]];
    }
    return self;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    SongCell *cell = (SongCell *)[tableView dequeueReusableCellWithIdentifier:CellClassName];

    if (!cell)
    {
        //CRASH ERROR POINTS HERE
        NSArray *topLevelItems = [cellLoader instantiateWithOwner:self options:nil];
        cell = [topLevelItems objectAtIndex:0];
    }

    // Configure the cell...
    cell.titleLabel.text = @"SONG";
    cell.artistLabel.text = @"Artist";
    cell.albumLabel.text = @"Album";

    return cell;
} 
```

**界面生成器** ![细胞、它的出口和它的类](../Images/13564315206cc5dac922d35426ea6b9f.png)

* * *

![文件所有者](../Images/62f2f59c806c5152bf42b4450e1d4644.png)

![报告](../Images/6fc95dd9b207504388c327aea983346b.png)

注意：单元格标识符已在 IB 中设置为“SongCell”，文件所有者为 UITableViewController，因为多个表将使用此单元格。只要视图是一个表格，它就应该可以工作（过去有）。

* * *

更新： XML 格式的 xib 文件已[粘贴到此处。](http://pastebin.com/9YKd6qBA)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:41:36.317

I had this exact problem today, while making a sample project for another SO answer! It looks like your xib is trying to connect an outlet to your view controller instead of your cell. In your screenshot, the outlets look correctly defined, but occasionally an old outlet definition can get left in the underlying XML and cause this type of crash.

If you've changed the files owner class after connecting some outlets, for example, this could confuse it.

You may be able to find it by opening the xib as "source code", look for the element and check there are only the entries you expect. Perhaps search the XML file for `albumLabel` as well.

If that doesn't work, you may have to scrap the xib and start again.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:33:12.147

不幸的是，我找到的唯一解决方案是重新开始。我做的一切都和以前完全一样，第二次就成功了。不得不放弃整个事情并重新开始是一件很麻烦的事，但这是我让它工作的唯一方法。除非有人能弄清楚发生了什么，否则我将把它作为答案。（见原帖及其更新）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-27T19:06:22.350

我有一个类似的问题，并且能够通过重建 Storyboard/NIB 来解决它。

# .net - 使用默认通道时注册两个远程 http 对象会引发异常

> ID：10706652
> 
> 赞同：1
> 
> 时间：2012-05-22T17:02:42.267
> 
> 标签：.net, remoting

我有一个服务器\客户端应用程序，它需要通过激活器请求两个不同的远程代理。

我遇到了一种情况，如果您在`Activator.GetObject`不创建通道的情况下请求远程对象，然后再创建一个通道并尝试获取一个单独的对象，那么第二个对象将失败。让我展示一个示例应用程序来演示该问题：

这是两个远程对象：

```
namespace HelloRemoteObject
{
    public class FirstObject : MarshalByRefObject
    {
        public String FirstObjectMethod()
        {
            return "FirstObjectMethod";
        }
    }

    public class SecondaryObject : MarshalByRefObject
    {
        public String SecondObjectMethod()
        {
            return "Secondary object method return string";
        }
    }
} 
```

这是服务器，它只是在特定端口上注册一个 http 服务器通道，然后等待：

```
public static int Main(string[] args)
{
    // register the channel
    IDictionary properties = new Hashtable
                                    {
                                        {"timeout", 1000},
                                        {"port", 9099}
                                    };

    var serverChannel = new HttpServerChannel(properties, new BinaryServerFormatterSinkProvider());
    ChannelServices.RegisterChannel(serverChannel, false);

    // register two known types
    RemotingConfiguration.RegisterWellKnownServiceType(typeof(FirstObject), "FirstObjectUri", WellKnownObjectMode.Singleton);
    RemotingConfiguration.RegisterWellKnownServiceType(typeof(SecondaryObject), "SecondaryObjectUri", WellKnownObjectMode.Singleton);

    Console.WriteLine("Hit <enter> to exit...");
    Console.ReadLine();
    return 0;
} 
```

这是客户。如果您传入任何参数，那么它将首先注册一个命名通道。然后它将获取两个远程代理并在它们上调用一个方法。如果您不给它任何参数，它将首先获取第一个对象的代理，然后为第二个代理创建一个通道，然后尝试对这两个对象采取行动。

```
static void Main(string[] args)
{
    var registerChannelFirst = args.Length > 0;
    if(registerChannelFirst)
    {
        Console.WriteLine("Registering channel first");

        RegisterHttpChannel();
    }
    else
    {
        Console.WriteLine("Letting Activator.GetObject register an http client channel by default");
    }

    var firstRemoteObject = (FirstObject)Activator.GetObject(typeof(FirstObject), "http://127.0.0.1:9099/FirstObjectUri");

    if(!registerChannelFirst)
    {
        RegisterHttpChannel();
    }

    var secondRemoteObject = (SecondaryObject)Activator.GetObject(typeof(SecondaryObject), "http://127.0.0.1:9099/SecondaryObjectUri", );

    Console.WriteLine(firstRemoteObject.FirstObjectMethod());
    Console.WriteLine(secondRemoteObject.SecondObjectMethod());
}

private static void RegisterHttpChannel()
{
    // register the channel
    IDictionary properties = new Hashtable
                                    {
                                        {"name" , "ChannelName"}
                                    };
    var clientChannel = new HttpClientChannel(properties, new BinaryClientFormatterSinkProvider());

    ChannelServices.RegisterChannel(clientChannel, false);
} 
```

如果您先注册一个频道，然后再激活，那么一切正常。

让激活器先运行，然后获取第二个对象，然后您会遇到异常。

如果您不尝试激活两个对象，而只是让激活器获取一个对象，那么这也可以。我很想知道这是为什么？

我很好奇，因为假设我不关心通道属性，那么我可以轻松地创建一个通道并完成它，但是，如果一个对象需要在通道上使用超时，但另一个对象确实如此不是，那么我需要创建两个单独的频道。那么有没有办法将对象绑定到通道？

我也知道远程处理已经走上了 wcf 的道路，但这不是我现在的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:46:04.860

所以我认为这里的解决方案就是总是注册一个频道名称。当我注册频道名称时，输出如下所示（`ChannelName`是名称的输出`ChannelServices.RegisteredChannels`）

```
Registering channel first
ChannelName
FirstObjectMethod
Secondary object method return string 
```

如果我在激活器运行后注册通道，它看起来已经创建了自己的内部默认通道

```
Letting Activator.GetObject register an http client channel by default
http client, ChannelName

Unhandled Exception: System.Runtime.Remoting.RemotingException: System.ArgumentNullException: No message was deserialized prior to calling the DispatchChannelSink.
Parameter name: requestMsg
at System.Runtime.Remoting.Channels.DispatchChannelSink.ProcessMessage(IServerChannelSinkStack sinkStack, IMessage requestMsg, ITransportHeaders requestHeaders, Stream requestStream, IMessage& responseMsg, ITransportHeaders& responseHeaders, Stream& responseStream)
at System.Runtime.Remoting.Channels.BinaryServerFormatterSink.ProcessMessage(IServerChannelSinkStack sinkStack, IMessage requestMsg, ITransportHeaders requestHeaders, Stream requestStream, IMessage& responseMsg, ITransportHeaders& responseHeaders, Stream& responseStream)
at System.Runtime.Remoting.Channels.Http.HttpServerTransportSink.ServiceRequest(Object state)
at System.Runtime.Remoting.Channels.SocketHandler.ProcessRequestNow()

Server stack trace:

Exception rethrown at [0]:
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at HelloRemoteObject.FirstObject.FirstObjectMethod()
   at HelloClient.HelloClient.Main(String[] args) in 
```

所以有些东西对拥有两个注册的 http 频道感到困惑。我会逐步浏览 .net 源代码，但我[遇到了问题](http://social.msdn.microsoft.com/Forums/en-US/refsourceserver/thread/7e8d73c8-30a2-4f8c-8a36-5dd8c6526f9f?prof=required)。

# php - 避免将预设变量传递给 PHP 中的函数

> ID：10706656
> 
> 赞同：1
> 
> 时间：2012-05-22T17:02:52.457
> 
> 标签：php, function, variables

我想让我的生活更轻松，避免将一些预设变量传递给 PHP 中的函数。

例如，这有效：

```
function test1($var2,$var3,$var1=1){
    return '$var1='.$var1.'+$var2='.$var2.'+$var3'.$var3;
}
echo test1($var2=2,$var3=3);
#$var1=1+$var2=2+$var33 
```

但这没有（没有警告）：

```
function test($var1=1,$var2,$var3){
    return '$var1='.$var1.'+$var2='.$var2.'+$var3'.$var3;
}
echo test($var2=2,$var3=3);
#Warning: Missing argument 3 for test(), called in /var/www/atpc.info/f/f/m/t.php on line 6 and defined in /var/www/atpc.info/f/f/m/t.php on line 3
#Notice: Undefined variable: var3 in /var/www/atpc.info/f/f/m/t.php on line 4 
#$var1=2+$var2=3+$var3 
```

也许实现这一点的唯一方法是始终将预设变量放在行尾。是吗？

谢谢你的光。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:04:48.283

哦...这**不是**您在 PHP 中传递变量的方式...。

发送变量：

```
function test($var1=1,$var2=1,$var3=1){ //default 1, 1, 1
    return '$var1='.$var1.'+$var2='.$var2.'+$var3'.$var3;
}
echo test(2,3); //only sent for var1 and 2
echo test(null, 2, 3); //only sent for var2 and 3    
echo test(); //default for all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:05:46.150

默认值需要位于任何非默认值之后，如[PHP.net 函数参数页面上的](http://php.net/manual/en/functions.arguments.php)示例 5 所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:05:17.877

尝试检查`variable function arguments in PHP`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:07:02.377

你可能会让你的生活更轻松，但它可能会导致草率的代码，在某些时候你应该传递一个参数并且你忘记了，但代码没有抛出任何错误。这是我的看法。

# c++ - 如何从 Boost Spirit 中的函数中抛出一个expectation_failure？

> ID：10706657
> 
> 赞同：6
> 
> 时间：2012-05-22T17:02:52.577
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

在 Boost::Spirit 中，如何`expectation_failure`从绑定的函数中触发`Boost::Bind`？

背景：我解析了一个包含复杂条目的大文件。当一个条目与以前的条目不一致时，我想失败并抛出一个`expectation_failure`（包含正确的解析位置信息）。当我解析一个条目时，我绑定了一个函数，该函数决定该条目是否与之前看到的内容不一致。

我编了一个小玩具例子来说明这一点。在这里，我只想在不能被 10 整除`expectation_failure`时抛出一个：`int`

```
#include <iostream>
#include <iomanip>
#include <boost/spirit/include/qi.hpp>
#include <boost/bind.hpp>
#include <boost/spirit/include/classic_position_iterator.hpp>
namespace qi = boost::spirit::qi;
namespace classic = boost::spirit::classic;

void checkNum(int const& i) {
  if (i % 10 != 0) // >> How to throw proper expectation_failure? <<
    std::cerr << "ERROR: Number check failed" << std::endl;
}

template <typename Iterator, typename Skipper>
struct MyGrammar : qi::grammar<Iterator, int(), Skipper> {
  MyGrammar() : MyGrammar::base_type(start) {
    start %= qi::eps > qi::int_[boost::bind(&checkNum, _1)];
  }
  qi::rule<Iterator, int(), Skipper> start;
};

template<class PosIter>
std::string errorMsg(PosIter const& iter) {
  const classic::file_position_base<std::string>& pos = iter.get_position();
  std::stringstream msg;
  msg << "parse error at file " << pos.file
      << " line " << pos.line << " column " << pos.column << std::endl
      << "'" << iter.get_currentline() << "'" << std::endl
      << std::setw(pos.column) << " " << "^- here";
  return msg.str();
}

int main() {
  std::string in = "11";
  typedef std::string::const_iterator Iter;
  typedef classic::position_iterator2<Iter> PosIter;
  MyGrammar<PosIter, qi::space_type> grm;
  int i;
  PosIter it(in.begin(), in.end(), "<string>");
  PosIter end;
  try {
    qi::phrase_parse(it, end, grm, qi::space, i);
    if (it != end)
      throw std::runtime_error(errorMsg(it));
  } catch(const qi::expectation_failure<PosIter>& e) {
    throw std::runtime_error(errorMsg(e.first));
  }
  return 0;
} 
```

抛出 an`expectation_failure`意味着我在不能被 10 整除的 int 上收到这样的错误消息：

```
parse error at file <string> line 1 column 2
'11'
  ^- here 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T17:56:58.397

您可以在 phoenix 中使用[_pass](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/quick_reference/phoenix.html)占位符来强制解析失败。像这样的东西*应该*工作。

```
bool myfunc(int i) {return i%10 == 0;}

...
_int [ _pass = phoenix::bind(myfunc,_1)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-04T04:30:20.923

晚了几年，但无论如何：

如果您绝对想抛出异常并希望`on_error`捕获它，则必须`expectation_exception`从`qi`命名空间中抛出异常，因为错误处理程序`on_error`不会捕获任何其他内容。

这可能适用于语义操作或自定义解析器实现。

看起来像：

```
boost::throw_exception(Exception(first, last, component.what(context))); 
```

`Exception`a在哪里`qi::expactation_exception`，没有别的。

如果您手头没有语义操作中的组件，则必须提供自己的`qi::info`对象而不是`component.what(..)`.

您可以在由`on_error`.

# regex - 如何从电子表格中添加列，然后在 Perl 中生成百分比？

> ID：10706659
> 
> 赞同：0
> 
> 时间：2012-05-22T17:02:56.353
> 
> 标签：regex, perl, sum

我有很多这样格式的数据

```
Amistad Academy District Amistad Academy    596 812 73.4
Andover School District  Andover            39  334 11.7
Ansonia School District  Ansonia High School    427 732 58.3
Ansonia School District  Ansonia Middle School  219 458 47.8
Ansonia School District  Mead School            431 642 67.1
Ansonia School District  Prendergast School 504 787 64 
```

我需要做的是 grep 一堆学区，然后取最后一列，总结所有匹配的学区（例如所有 Ansonia），然后将该数字除以倒数第二列的总和。我可以毫不费力地将学区放入单独的文件中。那只是一个grep。然而，现在，我被困住了，认为在 excel 中做这件事可能更容易。我一直在玩 perl 中的解决方案，比如

```
 1 #!/opt/local/bin/perl
  2 use strict;
  3 use warnings;
  4 use ARGV::readonly;
  5 
  6 my @data;
  7 my @headers - split ',', <>;
  8 
  9 while (<>) {
 10   my @row = split;
 11   $data[$_] += $row[$_] for (0 .. $#row);
 12 }
 13 
 14 $" = "\t";
 15 print "@headers", "\n";
 16 print "@data"; 
```

但无法弄清楚进行加法和除法的语法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:19:13.897

您正在对每一列求和。您只想将其中两个相加。否则，您实际上就在那里。

```
my $sum_last = 0;  # Use better name.
my $sum_penu = 0;  # Use better name.
while (<>) {
   chomp;
   my @row = split /\t/;
   next if $row[0] ne 'Ansonia School District';
   $sum_last += $row[-1];
   $sum_penu += $row[-2];
}

say $sum_last / $sum_penu; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:54:03.893

下面的程序将从文件中挑选出值，并将每个学区的运行总数保存在一个散列中。读取所有数据后，将打印散列的内容。它适用于未过滤的文件 - 您不必将其 grep 到单独的源中。

我注意到您的数据似乎是制表符分隔的，并且使用它很重要，`split /\t/`这样包含空格字符的字段也不会被拆分。

您没有说明数据的含义，因此我无法使代码更具可读性。

如果您还有其他问题，请再次询问。

```
use strict;
use warnings;

open my $fh, '<', 'myfile' or die $!;

scalar <$fh>; # lose header record

my %data;

while (<$fh>) {
  my @fields = split /\t/;
  my $district = shift @fields;
  $data{$district}[0] += $fields[-2];
  $data{$district}[1] += $fields[-1];
}

for my $district (sort keys %data) {
  printf "%s - %f\n", $district, $data{$district}[1] / $data{$district}[0];
} 
```

**输出**

```
Andover School District - 0.035030
Ansonia School District - 0.090569 
```

# android - 添加/更新资源时如何防止R.java中的某些值发生变化

> ID：10706662
> 
> 赞同：0
> 
> 时间：2012-05-22T17:03:22.143
> 
> 标签：android, android-resources, r.java-file

我需要存储用户选择的图像的链接。图像的来源是文件、联系人图标和资源的可绘制对象（我需要可绘制对象，因为我为不同的分辨率/密度提供了不同的图像）。出于统一的目的，我将它存储在 URI 中，因此该 URI 可能指向**文件**( `file://`)、**内容提供者**或**资源**( `android.resource://...`)。以下是指向 id=2130837534 的可绘制对象的 URI 的样子：

```
android.resource://my.packagename/2130837534 
```

除非重新生成其中的 ID，否则它工作正常`R.java`。那么，有什么办法可以防止 SDK 改变一些`R.java`ids 值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:07:59.700

不，你不能，也不应该。如果您能清楚地描述您的问题，则可能还有其他解决方案。

以这种方式将资源名称保存在文件中。

icon_profile_1 icon_profile_2

然后当您需要资源 ID 时，执行此操作。

```
int resID = getResources().getIdentifier("icon_profile_1", "drawable","your_package_name");

```

[在这里检查](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier)（java.lang.String、java.lang.String、java.lang.String）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:11:56.797

由于 R.java 是自动生成的，因此无法对其操作进行限制，因为当您的项目被清理或编译时，它将再次自动生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:14:24.117

这在 android 中是不可能的，因为 R.java 是自动生成的，你不能为此做任何事情。

# visual-studio-2010 - 在服务器上发布项目后调试代码

> ID：10706666
> 
> 赞同：0
> 
> 时间：2012-05-22T17:03:39.437
> 
> 标签：visual-studio-2010

我已经在我的 VPS 服务器上发布了我的项目（MVC 3 项目）。现在，是否可以在服务器上运行项目期间以某种方式调试代码？当它在本地主机上运行时也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:08:13.450

可能有，但我相信你试图这样做是一个不好的迹象。在您部署应用程序时，您应该有适当的日志记录和错误处理，这应该允许您跟踪发生的任何错误并在您的开发环境中重现它们。

# javascript - 悬停时的Jquery addClass和Remove Class

> ID：10706667
> 
> 赞同：7
> 
> 时间：2012-05-22T17:03:44.420
> 
> 标签：javascript, jquery, file

好的，我想在鼠标悬停在元素上时`cfse_a`向元素添加一个类`#searchput`，然后当鼠标没有悬停在元素上时删除类`cfse_a`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T17:04:55.333

使用[`hover`](http://api.jquery.com/hover/)事件[`addClass`](http://api.jquery.com/addClass/)和[`removeClass`](http://api.jquery.com/removeClass/)方法：

```
$("#searchput").hover(function() {
    $(this).addClass("cfse_a");
}, function() {
    $(this).removeClass("cfse_a");
}); 
```

**演示：http:** [//jsfiddle.net/G23EA/](http://jsfiddle.net/G23EA/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-22T17:05:04.560

```
$('#searchput').hover(function() {
  $(this).addClass('cfse_a'); // add class when mouseover happen
}, function() {
  $(this).removeClass('cfse_a'); // remove class when mouseout happen
}); 
```

您还可以使用：

```
$('#searchput').hover(function() {
  $(this).toggleClass('cfse_a');
}); 
```

请参阅[**切换类（）**](http://api.jquery.com/toggleClass)

**[演示](http://jsfiddle.net/thecodeparadox/BAN7V/1/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T18:03:33.530

```
 $("#searchput").hover(function() {
     $(this).addClass("cfse_a");
     }, function() {
   $(this).removeClass("cfse_a");
   }); 
```

使用它。希望它有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:07:35.957

希望这可以帮助。

```
$('#searchput').mouseover(function() {
    $(this).addClass('cfse_a');
}).mouseout(function(){
    $(this).removeClass('cfse_a');
}); 
```

# php - php我的管理员：没有选择数据库

> ID：10706668
> 
> 赞同：2
> 
> 时间：2012-05-22T17:03:50.987
> 
> 标签：php, mysql, phpmyadmin

我正在尝试学习 php 和 mysql。所以我尝试使用 phpmyadmin 创建一个数据库并将其与我的 php 连接。这是一个简单的示例，我尝试查看数据库是否正常工作

```
<?php
$connection = mysql_connect("localhost","root");
if(!$connection) {
    die("Database connection failed: " . mysql_error());
    $db_select = mysql_select_db("nameofdatabase",$connection);
    if (!$db_select) {
        die("Database selection failed:: " . mysql_error());
        }
    }
?>
<html>
<head>
<title>Databases</title>
</head>
<body>
<?php
$result = mysql_query("SELECT * FROM nameofdatabasetable", $connection);
if (!$result) {
    die("Database query failed::: " . mysql_error());
}
while ($row = mysql_fetch_array($result)) {
echo $row[1];
}

?>

</body>
  </html>
<?php
mysql_close($connection);
?> 
```

我明白了

```
 Database query failed::: No database selected 
```

这意味着比这部分代码

```
<?php
$result = mysql_query("SELECT * FROM users", $connection);
if (!$result) {
    die("Database query failed::: " . mysql_error());
}
while ($row = mysql_fetch_array($result)) {
echo $row[1];
}

?> 
```

不起作用（我在每个 if 中放置了不同数量的“：”。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:09:34.807

您的代码的逻辑没有意义，因为如果连接没有发生，那么您将无法选择数据库，并且您的数据库选择语句在您无法连接到数据库的逻辑范围内。试试这个：

```
$connection = mysql_connect("localhost","root"); 
if(!$connection) { 
   die("Database connection failed: " . mysql_error()); 
}else{
   $db_select = mysql_select_db("nameofdatabase",$connection); 
   if (!$db_select) { 
       die("Database selection failed:: " . mysql_error()); 
   } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:16:03.650

我必须在 mysql_connect 调用中传递用户名和密码。这是我的数据库 open() 函数。

```
 $this->con_error = "";

    $db_con= mysql_connect($this->server, $this->username, $this->password);

    if (!$db_con) 
    {
        $this->con_error = mysql_error();
        return false;
    }       
    if(!mysql_select_db($this->database))
    {
        $this->con_error = mysql_error();
        return false;
    }

    return $db_con; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:07:16.847

```
die("Database connection failed: " . mysql_error());
$db_select = mysql_select_db("nameofdatabase",$connection); 
```

`mysql_select_db`不可能跑到这里来。它只在死后调用。

```
$connection = mysql_connect("localhost","root");
if(!$connection) {
  die("Database connection failed: " . mysql_error());
}
$db_select = mysql_select_db("nameofdatabase",$connection);
if (!$db_select) {
  die("Database selection failed:: " . mysql_error());
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T17:27:42.577

此外，检查您是否输入了服务器密码也是值得的。$connection = mysql_connect("localhost","root"); （缺少密码）

以下代码将捕获可能发生的任何其他错误，并且像下面的答案一样，这将提供 mysql 连接错误，以防万一。

```
 try 
   {
        $connection = mysql_connect("localhost","root", "password");
        if(!$connection) {   
          die("Database connection failed: " . mysql_error());   
        }   
        $db_select = mysql_select_db("nameofdatabase",$connection);   
        if (!$db_select) {   
          die("Database selection failed:: " . mysql_error());   
         }   

   }catch (Exception $e){
       error_log(" DB Error: ".$e->getMessage());
   } 
```

# c# - log4net 不记录调试语句

> ID：10706670
> 
> 赞同：10
> 
> 时间：2012-05-22T17:03:56.543
> 
> 标签：c#, log4net

我第一次使用 log4net 并使用提供的配置示例遵循文档，但是调试语句不记录。

信息、错误、警告和致命级别都正确记录。谁能告诉我我错过了什么？

应用程序配置：

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />

<log4net>
    <appender name="Console" type="log4net.Appender.ColoredConsoleAppender">

        <mapping>
            <level value="INFO" />
            <foreColor value="Green"/>
        </mapping>

        <mapping>
            <level value="DEBUG" />
            <foreColor value="Cyan,HighIntensity"/>
        </mapping>

        <mapping>
            <level value="WARN" />
            <foreColor value="Purple,HighIntensity"/>
        </mapping>

        <mapping>
            <level value="ERROR" />
            <foreColor value="Red,HighIntensity"/>
        </mapping>

        <mapping>
            <level value="FATAL" />
            <foreColor value="Yellow,HighIntensity"/>
        </mapping>

        <layout type="log4net.Layout.PatternLayout">
            <!-- Pattern to output the caller's file name and line number -->
            <conversionPattern value="%5level [%thread] (%file:%line) - %message%newline" />
        </layout>            
    </appender>

    <appender name="RollingFile" type="log4net.Appender.RollingFileAppender">
        <file value="example.log" />
        <appendToFile value="true" />
        <maximumFileSize value="100KB" />
        <maxSizeRollBackups value="2" />

        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%level %thread %logger - %message%newline" />
        </layout>
    </appender>

    <root>
        <level value="INFO" />
        <appender-ref ref="Console" />
        <appender-ref ref="RollingFile" />
    </root>
</log4net> 
```

有些人提到检查 [assembly: log4net.Config.XmlConfigurator()] 的 AssemblyInfo，但是有或没有这一行没有区别。

记录器声明如下：

```
private static readonly ILog log = LogManager.GetLogger( typeof( CWD_Netsuite ) ); 
```

访问方式如下：

```
XmlConfigurator.Configure();
log.Debug("Debugging");             //does not get logged
log.Info( "Entering Application" ); //logged to console and log file
log.Debug( "Debug Statement" );     //does not get logged 

log.Error( "Error statement" );     //logged to console and log file
log.Warn( "Warning statement" );    //logged to console and log file
log.Fatal( "Fatal Statement" );     //logged to console and log file 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-22T17:06:32.743

您在根类别中设置了一个过滤器`INFO`级别（从而过滤掉任何`DEBUG`级别的消息）：

```
<root>
    <level value="INFO" />
    <appender-ref ref="Console" />
    <appender-ref ref="RollingFile" />
</root> 
```

将其更改为

```
 <level value="DEBUG" /> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-22T17:08:39.937

log4net 级别按以下顺序定义：

全部、调试、信息、警告、错误、致命、关闭

根据您当前的设置，您正在使用 INFO 及以下内容编写所有内容。

将根节点设置为以下内容：

```
<root>
    <level value="DEBUG" />
    <appender-ref ref="Console" />
    <appender-ref ref="RollingFile" />
</root> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-22T17:06:37.103

在您的节点中将级别值更改为“DEBUG”...

```
<root>
    <level value="DEBUG" />
    <appender-ref ref="Console" />
    <appender-ref ref="RollingFile" />
</root> 
```

# android - 插入和更新 sqlite 命令的持续时间

> ID：10706676
> 
> 赞同：0
> 
> 时间：2012-05-22T17:04:31.597
> 
> 标签：android, sqlite, time, duration

一个
`db.update("table", values, "_id" + "=" + arg3, null);`命令180ms正常吗？
一个
`db.insert("table", null, values);`命令需要 70 毫秒？
Nexus S , 安卓 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:21:26.017

是的，假设您的数据库操作涉及写入闪存。如果下一个问题是如何让 100 个数据库操作的执行速度超过 100 * 180 毫秒，请使用事务：[Android SQLite 数据库：慢插入](https://stackoverflow.com/questions/3501516/android-sqlite-database-slow-insertion)

# java - Java servlet - 从子页面转发/重定向

> ID：10706677
> 
> 赞同：0
> 
> 时间：2012-05-22T17:04:35.337
> 
> 标签：java, servlets, httpresponse

我正在开发一个项目，我在其中运行打包在战争中的 servlet，这些 servlet 侦听请求并在单独的页面上填充外部 div。向 servlet (a) 发出初始请求，如果有数据要显示，它会呈现该 HTML。如果没有数据，它会将查询字符串传递给另一个 servlet 来处理请求，然后呈现一个带有可供选择的选项的页面。

我正在使用 Windows Server 2008 运行 Tomcat 6。

但是我遇到了两个问题：

1.  当我使用重定向时，我没有收到被重定向到的 servlet 的响应。我有一些从未被 (b)
    servlet 调用的 javascript 警报。我正在使用相对路径并确认日志中的链接正确。
2.  当我在新窗口中的步骤 1 中复制该链接时，我会看到结果。只是当它嵌入到发出请求的另一个页面中时不是。为什么会这样？是否可能是主机页面的限制并且无法呈现响应？
3.  当我使用转发时，我会看到 servlet 响应，但随后会打开一个新窗口。从而使人远离原始页面。如果结果呈现在同一页面中，那就太好了。

确保我可以使用来自第一个 servlet 的响应对象从初始 servlet 调用“重定向”到另一个 servlet 的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:10:19.190

重定向返回 HTTP 302 响应，`Location`其中包含客户端需要处理的标头中的新 URL。基本上，您的 JS 代码必须检查响应状态代码是否为 302，然后提取`Location`标头，然后在其上重新发送新请求。重复此操作，直到响应状态代码为 200。

在浏览器的地址栏中粘贴 URL 时它起作用是因为浏览器已经知道如何正确处理 3nn 响应。如果您在浏览器的 webdeveloper 工具集中打开网络流量跟踪器，您会看到在新 URL 上触发了第二个 GET 请求。

另一种方法，如果 servlet 在同一个容器中运行，则只使用`RequestDispatcher#forward()`而不是`HttpServletResponse#sendRedirect()`.

# objective-c - 在动态创建的类上执行协议类方法

> ID：10706682
> 
> 赞同：0
> 
> 时间：2012-05-22T17:04:52.577
> 
> 标签：objective-c, ios

这是我的情况：

我有一个带有类方法的协议，它解析一个 NSDictionary 并返回一个执行我的协议的对象：

```
@protocol RCParsableObject <NSObject>
/** 
  Parses an object from an NSDictionary representation
  Return: A object created from the NSDictionary representation
 */
+(id<RCParsableObject>)parseObjectFromDictonary:(NSDictionary*)object;
@end 
```

在我的代码的一部分，我有一个在 NSString 中执行该协议的类的名称：

```
//dict is the dictionary I want to parse
Class class= NSClassFromString(type);
if ([class conformsToProtocol:@protocol(RCParsableObject)]) {
   //NSObject* object = [class parseObjectFromDictionary:dict];//Obviously that don't works but shows what I want     
} 
```

如果我想执行协议的 Class 方法，我知道它可以执行，因为 if。我怎么能这样做？它相当于：

```
NSObject * object = [class performSelector:_selector]; 
```

对于一个类对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:32:39.200

这就是你要做的事情，除了你想输入保存返回值的变量为`id`or `id<RCParsableObject>`。不需要`performSelector:`或类似的东西 - 这对于动态选择选择器时很有用，这里不是这种情况。

# iphone - NSUserDefaults 默认值返回（空）？

> ID：10706685
> 
> 赞同：1
> 
> 时间：2012-05-22T17:04:58.613
> 
> 标签：iphone, objective-c, cocoa-touch

这可能是我错过的非常简单的事情，为什么在使用下面的代码访问设置时默认值返回为`(null)`

```
- (void)updateUIForDistanceUnits {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSString *test = [userDefaults stringForKey:@"IDDistance"];
    NSLog(@"DISTANCE: %@", test);
} 
```

根目录

![在此处输入图像描述](../Images/8ec32b0bde61cb44b4a95da6041bc2c3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:16:44.313

如果没有设置值，默认值`Root.plist`就是 UI 显示的值，您必须在代码中执行相同操作或`[NSUserDefaults -registerDefaults]`在应用程序中正确设置。

您应该会发现，一旦您在 Settings.app 中设置了值，`NSUserDefaults`就会返回正确的值。

# .net - TFS秒表任务跟踪系统

> ID：10706689
> 
> 赞同：0
> 
> 时间：2012-05-22T17:05:03.047
> 
> 标签：.net, tfs, desktop-application, ontime

我的公司开始使用 TFS Team Foundation Server，对于错误和任务跟踪系统，我之前使用过 OnTime。在 OnTime 他们有一个名为 OnTime StopWatch 的工具，您可以下载该工具并使用桌面应用程序，您可以启动和暂停特定的任务进度，完成后您只需单击更新任务，它就会从您的桌面到您的任务服务器。

在 TFS 中没有开箱即用的应用程序，正如您在此线程中看到的那样。 [http://social.msdn.microsoft.com/Forums/nl-BE/tfsgeneral/thread/80cd2fb9-1d70-49a0-8197-1cce137de3b3](http://social.msdn.microsoft.com/Forums/nl-BE/tfsgeneral/thread/80cd2fb9-1d70-49a0-8197-1cce137de3b3)

是否有任何插件或桌面应用程序可以与像 OnTime StopWatch 一样工作的 TFS 一起使用？有些人正在考虑在这里使用 .Net 为桌面应用程序构建一个，但我认为开发人员需要花费太多时间来完成它，因为目前市场上还没有任何东西。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:07:29.833

Visual Studio 11 中有一个名为“我的工作”的新功能，看起来就像您所描述的那样。

检查[这篇文章](http://blogs.msdn.com/b/bharry/archive/2011/09/19/the-new-team-explorer-in-tfs-11.aspx)，同时我不确定你会找到你需要的东西。

顺便说一句，使用 TFS API 开发这样的应用程序并不难......

# c# - 带有样本采集选项的免费多平台示波器软件？

> ID：10706693
> 
> 赞同：0
> 
> 时间：2012-05-22T17:05:07.103
> 
> 标签：c#, java, oscilloscope

我有一个 USB 示波器（与命令行一起工作），我想要一个示波器 GUI 来查看样本，并优先拥有大多数示波器所具有的选项（例如触发器、频率计算器）。

您知道我可以创建自定义示波器以便拥有自己的任何软件（通过创建适配器）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:41:46.077

您可以使用用于实时绘图的通用实时软件示波器 GUI DLL 库。[http://www.oscilloscope-lib.com/](http://www.oscilloscope-lib.com/)

# c# - 禁用除 C hrome 之外的其他软件

> ID：10706698
> 
> 赞同：-1
> 
> 时间：2012-05-22T17:05:32.750
> 
> 标签：c#, windows

我需要编写一个程序，强制谷歌浏览器在前面并禁用所有其他操作，比如打开另一个程序等......我只需要在屏幕前面有谷歌浏览器，仅此而已。我不能让其他程序弹出。

有什么想法可以做到吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:07:27.067

我很确定你可以得到一个没有滚动条或顶部栏的弹出窗口，并且不能调整大小，但是 JS 不会让你在当前窗口之外操作东西，就像你不能自动点击里面的链接一样框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:12:01.507

绝对不道德，但 Fortress 101 等应用程序可以做到这一点。我过去使用 C 和 Win32 API 做过类似的事情。我不会为您编写代码，但我基本上做了以下操作：

1.  找到桌面并将其隐藏
2.  查找和隐藏任务栏
3.  找到并销毁开始按钮
4.  捕获特殊按键并阻止它们按预期工作

您还需要轮询进程列表，因为即使执行所有这些操作也不会阻止用户下载文件并执行它。因此，如果您在进程列表中发现了一个新应用程序，您可以将其销毁。

您可以使用带有 C# 的 user32.dll 来做到这一点，但这样的应用程序最好留给商业软件包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:07:35.583

我非常怀疑这在 Windows 中是否可行，如果在家用 PC 上使用它是不道德的。这将是一个信息亭风格的应用程序吗？

您*可以*在某种程度上控制浏览器中显示的内容，例如无滚动条的窗口，但远不止这些是不可能的。

# facebook - 如何获取 Facebook 使用的所有地点和家乡的列表？

> ID：10706701
> 
> 赞同：0
> 
> 时间：2012-05-22T17:05:47.893
> 
> 标签：facebook, facebook-graph-api

当我访问 Facebook Graph API 并找到一个位置时，我得到如下信息：

```
"location": {
    "id": 108131085886116,
    "name": "Saint Petersburg, Russia"
}, 
```

每个位置都有自己的 ID。有没有办法获得 Facebook 知道的所有位置的列表？我在哪里可以下载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:49:58.763

不，您无法获得完整的列表 - 但根据您的用例，您可以在应用用户配置文件中遇到新值时慢慢构建一个列表。

作为 API 的核心部分，您还可以按名称和位置[搜索地点](https://developers.facebook.com/docs/reference/api/#searching)

# java - 捕获bat文件中的java异常

> ID：10706702
> 
> 赞同：0
> 
> 时间：2012-05-22T17:05:49.210
> 
> 标签：java, exception, batch-file

在我的项目中，我从命令窗口调用 java 程序。我有一个类似下面的 bat 文件。我在测试类中抛出了一个 RuntimeException。使用 "|| exit /b 1"，将跳过 ""%JAVA_HOME%\bin\java" -cp "bin/" Test %RUN_ARGS% || exit /b 1" 之后的所有命令。

谁能告诉我“|| exit /b 1”是做什么的？“||”是什么意思 在命令行中？

* * *

```
@echo off
setlocal

set RUN_ARGS=%*

"%JAVA_HOME%\bin\java" -cp "bin/" Test %RUN_ARGS% || exit /b 1

echo %RUN_ARGS%

dir

endlocal
exit /b 0 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:14:29.617

双管道 ( `||`) 用于有条件地执行命令。仅当左侧命令返回大于零的错误级别时，才执行右侧命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:12:18.333

exit /B 退出批处理文件而不退出命令窗口。换句话说，它会在您的 java 进程退出后打开命令窗口，以便您查看任何输出。的| 是一个管道运算符，它将 java 命令的输出作为输入传递给 exit 命令。

# jquery - 一起使用jquery、lightbox和prototype到底要做什么

> ID：10706703
> 
> 赞同：0
> 
> 时间：2012-05-22T17:05:52.247
> 
> 标签：jquery

当我将以下链接放在我的页面下方时，我的页面消失了，只剩下 bgcolor 我包括 JQuery.noConflict 因为我的滑块和灯箱没有一起工作，我被告知我将在脚本灯箱、原型或 jquery 上用 jQuery 替换 $我确实知道并且我是否也将“someid”替换为我是新手的确切内容

```
<script type="text/javascript" src="js/lightbox.js/"></script>
<script type="text/javascript" src="js/scriptaculous.js?load=effects,builder"></script>
 <script type="text/javascript" src="js/lightbox.js"></script>
<script type="text/javascript" src="js/jquery.js/"></script>

<script type="text/javascript">
JQuery.noConflict();
JQuery(document).ready(function(){
JQuery("div").hide();
});

$('someid').style.display = 'none'
</script>
<script type="text/javascript" src="js/easySlider1.5.js/"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:06:44.483

js包含顺序应该

```
// jquery shold include first
<script type="text/javascript" src="js/jquery.js/"></script>

<script type="text/javascript" src="js/lightbox.js/"></script>
<script type="text/javascript" src="js/scriptaculous.js?load=effects,builder"></script>
<script type="text/javascript" src="js/lightbox.js"></script> 
```

# c# - 查找两个法线向量之间的 x,y,z 旋转

> ID：10706708
> 
> 赞同：4
> 
> 时间：2012-05-22T17:06:10.037
> 
> 标签：c#, math, xna, euler-angles

我在 3D 空间中有两个正方形。我想找到它们之间的 x,y,z 角度。我首先找到两个正方形的法线向量，然后我试图弄清楚如何获得它们之间的角度。

我正在使用 XNA (C#) Vector3 对象。

我计算的法线向量如下：

```
 Vector3 normal1 = (Vector3.Cross(sq1.corners[0] - sq1.corners[1], sq1.corners[0] - sq1.corners[2]));
        Vector3 normal2 = (Vector3.Cross(sq2.corners[0] - sq2.corners[1], sq2.corners[0] - sq2.corners[2])); 
```

我想找到使 normal1 与 normal2 面对相同方式的欧拉旋转

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T17:25:57.977

首先，您可以计算轴和旋转量（假设是任意轴）：

```
Vector3 axis = Vector3.Cross(normal1, normal2);
axis.Normalize();
double angle = Math.Acos(Vector3.Dot(normal1, normal2) / normal1.Length() / normal2.Length()); 
```

如果法线被归一化，那么角度的计算减少到

```
double angle = Math.Acos(Vector3.Dot(normal1, normal2)); 
```

[然后您可以使用此处](http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToEuler/index.htm)的函数将其转换为欧拉角

# asp.net - Asp.net 复选框和 html 数据属性

> ID：10706714
> 
> 赞同：20
> 
> 时间：2012-05-22T17:06:29.223
> 
> 标签：asp.net, asp.net-3.5, asp.net-4.0

在 asp.net 中，如果您使用自定义属性，通常它会按原样呈现。

考虑到这个标记（**注意：**所有示例中都删除了和等属性，`id`因为它们生成的 id/name 很冗长）：`name``for`

```
<asp:TextBox runat="server" data-foo="bar" /> 
```

在 asp.net 中呈现为：

```
<input type="text" data-foo="bar" /> 
```

也就是说，asp.net 保持`data-foo`不变。

复选框通常呈现如下：

```
<asp:CheckBox runat="server" Text="Normal" /> 
```

呈现为：

```
<input type="checkbox" />
<label>Normal</label> 
```

但是，如果您在复选框上添加自定义属性：

```
<asp:CheckBox runat="server" Text="Custom attribute" data-foo="bar"  /> 
```

它呈现为：

```
<span data-foo="bar">
    <input type="checkbox" />
    <label>Custom attribute</label>
</span> 
```

如您所见，呈现了一个跨度以保存该属性。如果您在后面的代码中添加属性，也会发生这种情况。任何其他 HtmlControl、AFAIK 都不会发生这种情况。

有谁知道为什么渲染这个跨度来保存属性？

无论如何要在输入标签中呈现属性？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-22T17:18:24.860

我不确定为什么它用跨度呈现，但我想你可以像这样直接将属性添加到**代码隐藏**`input`的元素中：`CheckBox`

 **```
myCheckBox.InputAttributes.Add(...) 
```

参考链接：

*   [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.inputattributes.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.inputattributes.aspx)
*   [http://forums.asp.net/p/541142/541562.aspx](http://forums.asp.net/p/541142/541562.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.web.ui.attributecollection.add.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.attributecollection.add.aspx)

**更新**

使用了一个额外的父元素，以便应用到 a 的属性`CheckBox`可以同时影响 the`input`和文本。我想它是 a `span`（而不是 a `div`），因为它是一个**内联元素**，使得在不同场景中使用起来更方便。

参考链接：

*   [http://en.wikipedia.org/wiki/Span_and_div#Differences_and_default_behavior](http://en.wikipedia.org/wiki/Span_and_div#Differences_and_default_behavior)
*   [http://learnwebdesignonline.com/span-div](http://learnwebdesignonline.com/span-div)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T17:14:50.560

这是渲染引擎构建`CheckBox`控件的方式，没有太多可做的。

您可以做的就是创建一个`runat="server"`输入。

```
<input id="myInput" runat="server" type="checkbox" data-foo="bar"/>
<label>Custom attribute</label> 
```

另一种选择是`data-foo`在文档加载时使用 jquery 添加属性

```
$(function(){
    $('span[data-foo]').each(function(){
        var $span = $(this);
        var value = $span.data('foo');
        $span.find('input').data('foo',value);        
    });
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T15:50:06.433

Just to add another method that I use when all else fails, you can always use a literal control and make it render whatever you want. You need to do a bit more work when handling the postback, but sometimes this is the only way to get the html you need.

Markup:

```
<asp:Literal ID="myLiteral" runat="server"/> 
```

Codebeside:

```
myLiteral.Text = string.Format("<input type=\"checkbox\" data-foo=\"{0}\" /><label>Normal</label>", value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-21T18:53:27.460

如果您尝试在单击事件上访问该属性，则可以通过强制转换控件来实现。例如，我有一个复选框，我像你一样为它分配了一个自定义属性

```
<asp:CheckBox runat="server" data-foo="bar" /> 
```

现在`OnCheckedChanged`我需要得到那个值，在我的方法中我得到了一个`sender`对象。

```
protected void chk1_CheckedChanged(object sender, EventArgs e)
{
    CheckBox myControl = (CheckBox)sender;
    string value = myControl.Attributes["data-foo"].ToString();

} 
```

我希望这对某人有帮助**

# java - 转换列表 列出 直接地

> ID：10706721
> 
> 赞同：74
> 
> 时间：2012-05-22T17:06:45.497
> 
> 标签：java, list, collections, arraylist

解析我的文件“s”后包含`AttributeGet:1,16,10106,10111`

所以我需要获取attributeIDGet List中冒号后的所有数字。我知道有几种方法可以做到这一点。但是有什么方法可以**直接转换`List<String>`为`List<Integer>`.** 由于下面的代码抱怨类型不匹配，所以我尝试执行 Integer.parseInt，但我想这不适用于 List。这里 s 是字符串。

```
private static List<Integer> attributeIDGet = new ArrayList<Integer>();

if(s.contains("AttributeGet:")) {
    attributeIDGet = Arrays.asList(s.split(":")[1].split(","));
} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2016-05-06T13:17:06.773

使用 Java8：

```
stringList.stream().map(Integer::parseInt).collect(Collectors.toList()); 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-05-22T17:12:01.467

不，您需要遍历数组

```
for(String s : strList) intList.add(Integer.valueOf(s)); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-10-19T14:53:35.263

使用 lambda：

`strList.stream().map(org.apache.commons.lang3.math.NumberUtils::toInt).collect(Collectors.toList());`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-03-12T14:20:13.097

[番石榴转换器](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/Converter.html)可以解决问题。

```
import com.google.common.base.Splitter;
import com.google.common.primitives.Longs;

final Iterable<Long> longIds = 
    Longs.stringConverter().convertAll(
        Splitter.on(',').trimResults().omitEmptyStrings()
            .splitToList("1,2,3")); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-05-22T17:10:07.377

不，您必须遍历每个元素：

```
for(String number : numbers) {
   numberList.add(Integer.parseInt(number)); 
} 
```

发生这种情况的原因是没有直接的方法可以将一种类型的列表转换为*任何其他*类型。有些转换是不可能的，或者需要以特定的方式完成。本质上，转换取决于所涉及的对象和转换的上下文，因此没有“一刀切”的解决方案。例如，如果你有一个`Car`对象和一个`Person`对象怎么办。您不能将`List<Car>`a 直接转换为 a `List<Person>`，因为它没有任何意义。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-05-22T17:17:55.490

如果您使用[Google Guava 库](http://code.google.com/p/guava-libraries/)，您可以这样做，请参阅[Lists#transform](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Lists.html#transform%28java.util.List,%20com.google.common.base.Function%29)

```
 String s = "AttributeGet:1,16,10106,10111";

    List<Integer> attributeIDGet = new ArrayList<Integer>();

    if(s.contains("AttributeGet:")) {
        List<String> attributeIDGetS = Arrays.asList(s.split(":")[1].split(","));
        attributeIDGet =
        Lists.transform(attributeIDGetS, new Function<String, Integer>() {
            public Integer apply(String e) {
                return Integer.parseInt(e);
            };
        });
    } 
```

是的，同意上面的答案，它很臃肿，但很时尚。但这只是另一种方式。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-11-18T02:18:32.697

您可以使用 Java 8 的 Lambda 函数来实现这一点，而无需循环

```
 String string = "1, 2, 3, 4";
    List<Integer> list = Arrays.asList(string.split(",")).stream().map(s -> Integer.parseInt(s.trim())).collect(Collectors.toList()); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-11-20T19:02:45.113

为什么不使用流将字符串列表转换为整数列表？像下面

```
List<String> stringList = new ArrayList<String>(Arrays.asList("10", "30", "40",
            "50", "60", "70"));
List<Integer> integerList = stringList.stream()
            .map(Integer::valueOf).collect(Collectors.toList()); 
```

完整的操作可能是这样的

```
String s = "AttributeGet:1,16,10106,10111";
List<Integer> integerList = (s.startsWith("AttributeGet:")) ?
    Arrays.asList(s.replace("AttributeGet:", "").split(","))
    .stream().map(Integer::valueOf).collect(Collectors.toList())
    : new ArrayList<Integer>(); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-05-05T14:43:05.537

如果允许您使用 Java 8 中的 lambda，则可以使用以下代码示例。

```
final String text = "1:2:3:4:5";
final List<Integer> list = Arrays.asList(text.split(":")).stream()
  .map(s -> Integer.parseInt(s))
  .collect(Collectors.toList());
System.out.println(list); 
```

不使用外部库。普通~~的旧~~新Java！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-03-01T19:46:29.303

使用 Streams 和 Lambda：

```
newIntegerlist = listName.stream().map(x-> 
    Integer.valueOf(x)).collect(Collectors.toList()); 
```

上面这行代码会将 List 类型转换`List<String>`为`List<Integer>`.

我希望它是有帮助的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-05-22T17:12:17.853

不，没有办法（据我所知）在 Java 中这样做。

基本上，您必须将每个条目从字符串转换为整数。

您正在寻找的内容可以用更实用的语言来实现，您可以在其中传递一个转换函数并将其应用于列表的每个元素......但这是不可能的（它仍然适用于列表中的每个元素）。

**矫枉过正：**

但是，您可以使用来自 Google Guava (http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Function.html) 的函数来模拟更实用的方法，如果那样的话就是你要找的。

如果您担心对列表进行两次迭代，那么不要使用拆分器，而是在添加到列表之前将每个整数标记转换为整数。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-05-23T23:49:38.710

这是另一个展示番石榴力量的例子。虽然，这不是我编写代码的方式，但我想将它们打包在一起，以展示 Guava 为 Java 提供了什么样的函数式编程。

```
Function<String, Integer> strToInt=new Function<String, Integer>() {
    public Integer apply(String e) {
         return Integer.parseInt(e);
    }
};
String s = "AttributeGet:1,16,10106,10111";

List<Integer> attributeIDGet =(s.contains("AttributeGet:"))?
  FluentIterable
   .from(Iterables.skip(Splitter.on(CharMatcher.anyOf(";,")).split(s)), 1))
   .transform(strToInt)
   .toImmutableList():
   new ArrayList<Integer>(); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-26T18:15:47.440

使用 Guava 变换方法如下，

列表 intList = Lists.transform(stringList, Integer::parseInt);

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-07-20T23:10:25.473

导入 java.util.Arrays；导入 java.util.Scanner；

公共类reto1 {

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
        double suma = 0, promedio = 0;
        String IRCA = "";
        int long_vector = Integer.parseInt(input.nextLine());    
        int[] Lista_Entero = new int[long_vector];       // INSTANCE INTEGER LIST
        String[] lista_string = new String[long_vector]; // INSTANCE STRING LIST
        Double[] lista_double = new Double[long_vector];
        lista_string = input.nextLine().split(" ");     //  INPUT STRING LIST
    input.close();

    for (int i = 0; i < long_vector; i++) {
        Lista_Entero[i] = Integer.parseInt(lista_string[i]); // CONVERT INDEX TO INDEX FROM STRING UNTIL INTEGER AND ASSIGNED TO NEW INTEGER LIST
        suma = suma + Lista_Entero[i];
    } 
```

# objective-c - Objective-C 中本地和推送通知的设计模式

> ID：10706724
> 
> 赞同：0
> 
> 时间：2012-05-22T17:06:59.047
> 
> 标签：objective-c, ios, xcode, design-patterns, notifications

我需要在 Objective-C 中实现一个灵活的模块来处理本地和推送通知，这个模块需要是灵活的，以便它可以重复使用并通过最小的调整导入到其他应用程序中。

我有一些想法，但我想知道是否有一种设计模式可以简化这种实现。

提前感谢=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:15:49.890

似乎最好的模式是使用[NSInvocation的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsinvocation_Class/Reference/Reference.html)**命令模式**，因此通知可以调用一个方法，而调用者在运行时调用它。还有什么建议吗？？

# php - 从 PHP 到 Kiwi Syslog 服务器的 Syslog 问题

> ID：10706728
> 
> 赞同：0
> 
> 时间：2012-05-22T17:07:03.603
> 
> 标签：php, windows, syslog

我正在尝试通过使用 PHP 中的 syslog 函数登录到它来测试 Windows Kiwi Syslog Server 的安装，如下所示：

```
syslog(LOG_WARNING, "test123"); 
```

该函数返回*true*，但日志未显示在本地主机上运行的 Kiwi 中。是否需要任何配置才能使 syslog 在 Windows 中使用 PHP 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:55:31.877

This syslog() function call is a unix thing. According to the [php syslog manual](http://php.net/manual/en/function.syslog.php):

```
Notes
On Windows NT, the syslog service is emulated using the Event Log. 
```

So it is unlikely that your messages will end up in kiwi syslog server unless it reads the EventLog.

# ios - 自定义 UIView 用点而不是条显示进度

> ID：10706732
> 
> 赞同：0
> 
> 时间：2012-05-22T17:07:15.730
> 
> 标签：ios, xcode, uiview, uiprogressview

![进度条](../Images/b199a7b191c3cc1e94825d564734ba2e.png)

我正在尝试设置一个视图，该视图将显示这些点而不是实心条的进度。理想情况下，我想让点垂直填充（从下到上）。

我在 UIView 中有两个 UIImageView，一个用于灰色背景，一个用于遮蔽前景。

```
 UIImage * bgImg = [UIImage imageNamed:@"prog_bg.png"];
    UIImageView * bgView = [[UIImageView alloc] initWithImage:bgImg];
    progImage = [UIImage imageNamed:@"prog.png"];
    maskRef = [UIImage imageNamed:@"prog_mask.png"].CGImage;
    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                        CGImageGetHeight(maskRef),
                                        CGImageGetBitsPerComponent(maskRef),
                                        CGImageGetBitsPerPixel(maskRef),
                                        CGImageGetBytesPerRow(maskRef),
                                        CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef maskedImage = CGImageCreateWithMask([progImage CGImage], mask);
    UIImage * img = [UIImage imageWithCGImage:maskedImage];
    imageView = [[UIImageView alloc] initWithImage:img];
    [progView addSubview:bgView];
    [progView addSubview:imageView]; 
```

我在这个[SO question](https://stackoverflow.com/questions/9140030/custom-shaped-progress-view)中找到了代码。我似乎无法从我的代表中定义更新进度的蒙版宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:01:49.590

你能试试`CGImageGetWidth(maskRef) * percentage`吗`CGImageMaskCreate`

# python - python strptime 格式错误，12 小时制

> ID：10706735
> 
> 赞同：3
> 
> 时间：2012-05-22T17:07:16.860
> 
> 标签：python, strptime

我的字符串格式目前是`datetime.strptime(date_as_string, '%d/%m/%y %I:%M %p')`

不幸的是，这不适用于输入，例如**1/12/07 00:07 AM**

我怎样才能让 strptime 识别这种格式？

编辑：

> ValueError：时间数据 '1/12/07 00:07 AM' 与格式 '%d/%m/%y %I:%M %p' 不匹配

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:12:00.603

'00' 不是一个有效的 12 小时小时，但如果您输入的日期字符串格式不一致，您可能会摆脱这样的情况：

```
>>> from datetime import datetime as dt
>>> date_as_string = '1/12/07 00:07 AM'
>>> format_12 = '%d/%m/%y %I:%M %p'
>>> format_24 = '%d/%m/%y %H:%M %p'
>>> date_string, time_string = date_as_string.split(' ', 1)
>>> try:
...     dt.strptime(date_string + ' ' + time_string, format_12)
... except ValueError:
...     dt.strptime(date_string + ' ' + time_string, format_24)
... 
datetime.datetime(2007, 12, 1, 0, 7) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:17:44.977

`'1/12/07 00:07 AM'`格式不正确，因为在 12 小时格式中，小时可以在 1-12 范围内，而不是 0。

# .htaccess - 使用 htaccess 文件删除文件扩展名 .php

> ID：10706737
> 
> 赞同：0
> 
> 时间：2012-05-22T17:07:21.853
> 
> 标签：.htaccess

我想通过 htaccess 文件从 url 中删除 .php 。例如 home.php 到 home 我在 htaccess 文件中使用以下重写规则。

```
 RewriteRule ^(([^/]+/)*[^.]+)$ /$1.php [L] 
```

我还想将登录名指定为索引。我怎样才能改变它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:39:11.657

这是您可以用来隐藏 .php 扩展名的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## hide .php extension
# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R,L,NC]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:37:45.120

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html
# Replace html with your file extension, eg: php, htm, asp 
```

在 URL 的末尾添加斜杠（例如：[http://www.example.com/about-us/](http://www.example.com/about-us/)转至[http://www.example.com/about-us.html](http://www.example.com/about-us.html)）

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html 

# Forces a trailing slash to be added
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L] 
```

# c++ - 在 mex 文件中读取结构数据时发生奇怪的事情

> ID：10706739
> 
> 赞同：4
> 
> 时间：2012-05-22T17:07:26.690
> 
> 标签：c++, c, matlab, structure, mex

我刚才被一个非常奇怪的 mex 错误弄糊涂了。. .

将我的问题归结为核心，我们最终得到以下简单的 mex 代码。它只显示给定的结构字段是否为空...

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{    
    int numElements  = mxGetNumberOfElements(prhs[0]);
    int numFields = mxGetNumberOfFields(prhs[0]);

    mxArray* tmpData;
    const char* tmpName;

    for (int structIdx=0; structIdx<numElements; ++structIdx)
    {
        for (int fieldIdx=0; fieldIdx<numFields; ++fieldIdx)
        {
            tmpData = mxGetFieldByNumber(prhs[0], structIdx, fieldIdx);
            tmpName = mxGetFieldNameByNumber(prhs[0], fieldIdx);

            if (mxIsEmpty(tmpData))
                mexPrintf("struct(%i).%s is empty\n", structIdx+1, tmpName );
            else
                mexPrintf("struct(%i).%s contains data\n", structIdx+1, tmpName );
        }
    }    
} 
```

如果我们编译这段代码并调用它，`structcrash`那么下面的 matlab 代码。.

```
clc
x.a=1;
x.b=2;
x(2).a=3;
x(2).b=4;

structcrash(x); 
```

...给出我们可能期望的输出...

*   struct(1).a 包含数据
*   struct(1).b 包含数据
*   struct(2).a 包含数据
*   struct(2).b 包含数据

如果我们给 mex 函数一个包含这样一个空字段的结构......

```
clc
y.a = [];
structcrash(y); 
```

...然后我们也得到了预期的输出...

*   struct(1).a 为空

现在，如果你使用这样的代码，事情会变得很奇怪......

```
clc
y(2).b = 4;
structcrash(y); 
```

如果我们检查`y`结构，现在是一个 2 元素结构，每个元素中有 2 个字段。`y(1).a`正如我们上面指定的那样，它是空的，并且在我们添加字段`y(1).b`时已自动创建并赋予空值。`b`同样，`y(2).a`当我们通过添加增加结构大小时自动创建`y(2).b`. 该结构看起来非常合乎逻辑，但是将其用作 mex 文件的输入会导致段错误。

通过有选择地注释掉多行代码，我可以确认导致段错误的命令是`mxIsEmpty(tmpData)`.

其他任何人都可以复制这个错误吗？我在这里做错了什么吗？对我来说，这看起来像是 mex API 代码中的一个错误，但我想先在这里检查一下。谢谢

**编辑：**根据@David Heffernan 的建议，我将代码修改如下

```
 if(tmpData!=NULL) {
            if (mxIsEmpty(tmpData))
                mexPrintf("struct(%i).%s is empty\n", structIdx+1, tmpName );
            else
                mexPrintf("struct(%i).%s contains data\n", structIdx+1, tmpName );
        } 
```

...并且段错误不再发生。但是，这仍然是非常不祥的。如果您像以下示例一样创建两个结构并使用工作区视图检查它们，`f`并且`g`在各个方面看起来都完全相同。使用标准 matlab 编程命令，我找不到任何不同之处。

```
>> f(2).a=123;
>> g(1).a=[];
>> g(2).a=123 
```

...但该`whos`命令揭示了一个区别...

```
 Name      Size            Bytes  Class     Attributes

  f         1x2               192  struct              
  g         1x2               296  struct 
```

...而且我更新的 mex 函数显然也是如此...

```
>>structcrash(f)
struct(2).a contains data
>> structcrash(g)
struct(1).a is empty
struct(2).a contains data 
```

所以这个故事的寓意是，当您将新字段插入特定的结构元素时，Matlab IDE 通过在所有结构中插入字段来使结构看起来漂亮和方形。然而，实际上，在底层内存中，情况并非如此。

## 谨防！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:52:09.947

正在发生的事情`mxGetFieldByNumber`是返回`NULL`，然后您将其传递给它`mxIsEmpty`，从而产生段错误。文档指出，如果没有为指定字段分配值，则`mxGetFieldByNumber`返回。`NULL`

要解决这个问题，您需要防止传递`NULL`给`mxIsEmpty`：

```
if (tmpData == NULL || mxIsEmpty(tmpData))
    mexPrintf("struct(%i).%s is empty\n", structIdx+1, tmpName);
else
    mexPrintf("struct(%i).%s contains data\n", structIdx+1, tmpName); 
```

# c# - 通过智能卡验证 Windows 登录

> ID：10706746
> 
> 赞同：2
> 
> 时间：2012-05-22T17:07:37.750
> 
> 标签：c#, .net, windows, smartcard

嗨，如果用户通过密码或智能卡登录到他的计算机，我需要在我的 WPF 应用程序中进行验证。这两种登录选项在我的公司客户端中都可用，但我的应用程序只需要在智能卡登录中打开。所有客户端都是windows 7操作系统。

我看一些网站： [http ://technet.microsoft.com/en-us/library/ff404285(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ff404285%28v=ws.10%29.aspx) [http://www.codeproject.com/Articles/240655/Using-a-带有 NET-Security-i 的智能卡证书](http://www.codeproject.com/Articles/240655/Using-a-Smart-Card-Certificate-with-NET-Security-i)

我想我需要获得增强的密钥使用（EKU）属性字段。如果 EKU 为空 => 则用户是通过密码而不是通过智能卡登录的。

我只需要这个简单的检查，我不关心在证书 atc 上创建/验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T10:27:11.187

Windows 不记录用于登录的证书，因此您无法检查 EKU，Windows 也不记录使用的凭据类型，因此没有简单的解决方案。我有几个建议：

选项 1：当用户使用智能卡登录时，使用[身份验证机制保证](http://technet.microsoft.com/en-us/library/dd378897%28v=ws.10%29)向用户的访问令牌添加额外的组成员身份，并将您的应用设置为需要该组成员身份。这需要 Windows Server 2008 R2 功能级别的域。

选项 2：[实现凭证管理器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375498%28v=vs.85%29.aspx)并使用[NPLogonNotify](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378804%28v=vs.85%29.aspx)回调来检查[KERB_INTERACTIVE_LOGON](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378079%28v=vs.85%29.aspx)与[KerbSmartCardLogon](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378093%28v=vs.85%29.aspx)的 KERB_LOGON_SUBMIT_TYPE，然后将其记录在某处以供您的应用程序检查。

# php - 根据 php 解析器，我得到一个语法错误

> ID：10706748
> 
> 赞同：0
> 
> 时间：2012-05-22T17:07:51.307
> 
> 标签：php

我只是缩小了仅在某些环境中发生的这些奇怪错误之一。

下面的代码在我的 linux php 5.3.6 默认安装和 windows php 5.4.3 默认安装上解析正常，但在我们使用 Windows php 5.3.6 的某些 windows 机器上失败。

我们得到的信息是：

解析错误：语法错误，第 7 行 C:\bogus.php 中出现意外的“}”

第 7 行是“}”。

我只能认为这个错误是由 php.ini 设置引起的。有谁知道问题是什么？

```
<?php
if(!empty($data['foo'])) {
    ?>
    <div>
        <?=$data['bar'];if(!empty($data['foo'])) {?> (Foo: <?=$data['foo'];?>) <?php }?></div>
    <?php
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:10:48.920

这看起来很奇怪：

```
<?=$data['bar'];if(!empty($data['foo'])) {?> 
```

您正在混合`<?=`多个语句。如果我是你，我会尽量避免这里的短标签。

但无论如何，我认为这意味着 Windows 机器没有`short_open_tags`在 php.ini 中启用。启用它，您的问题可能会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:11:11.650

我会更改所有这些`{...}`以使您的生活更轻松：

```
<?php if(!empty($data['foo'])):?>
    <div>
        <?php echo $data['bar'];
         if(!empty($data['foo'])):?> 
              (Foo: <?php echo $data['foo']?>) 
        <?php endif?>
    </div>
<?php endif?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:12:51.403

```
<?php
if(!empty($data['foo'])) {
    echo '<div>'.$data['bar'];if(!empty($data['foo']))echo 'Foo:'.$data['foo']; 
echo '</div>';
}
?> 
```

使用回声功能

# r - 如何使用 grid.arrange 排列变量列表？

> ID：10706753
> 
> 赞同：106
> 
> 时间：2012-05-22T17:08:08.227
> 
> 标签：r, ggplot2

```
library(ggplot2)
df <- data.frame(x=1:10, y=rnorm(10))
p1 <- ggplot(df, aes(x,y)) + geom_point()
plist <- list(p1,p1,p1,p1,p1)
# In my real example,a plot function will fit a ggplot to a list of datasets 
#and return a list of ggplots like the example above. 
```

我想使用`grid.arrange()`in来安排情节`gridExtra`。

`plist`如果图中的地块数量是可变的，我该怎么做？

这有效： `grid.arrange(plist[[1]],plist[[2]],plist[[3]],plist[[4]],plist[[5]])`

但我需要一个更通用的解决方案。想法？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-05-22T17:14:04.967

这个怎么样：

```
library(gridExtra)
n <- length(plist)
nCol <- floor(sqrt(n))
do.call("grid.arrange", c(plist, ncol=nCol)) 
```

![在此处输入图像描述](../Images/0c3f7896be10d71241bb9c0e1f2a1fae.png)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-03-15T19:17:28.273

只要您使用每个函数中的参数指定列表，您就可以使用`grid.arrange()`和与列表。例如，在您给出的示例中：`arrangeGrob()``grobs =`

```
library(ggplot2)
library(gridExtra)
df <- data.frame(x=1:10, y=rnorm(10))
p1 <- ggplot(df, aes(x,y)) + geom_point()
plist <- list(p1,p1,p1,p1,p1)

grid.arrange(grobs = plist, ncol = 2) ## display plot
ggsave(file = OutFileName, arrangeGrob(grobs = plist, ncol = 2))  ## save plot 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-03-16T05:54:30.680

为了完整起见（并且这个旧的，已经回答的问题[最近已经恢复](https://stackoverflow.com/a/42818808/3817004)）我想使用该`cowplot`包添加一个解决方案：

```
cowplot::plot_grid(plotlist = plist, ncol = 2) 
```

[![在此处输入图像描述](../Images/45416fc087115b70ef8d0c65b6c8a0f4.png)](https://i.stack.imgur.com/SpFzc.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-07-15T23:22:28.870

我知道这个问题特别说明了使用**gridExtra** 包，但是**patchwork**`wrap_plots`包中的函数是处理可变长度列表的好方法：

 **```
library(ggplot2)
# devtools::install_github("thomasp85/patchwork")
library(patchwork)

df <- data.frame(x=1:10, y=rnorm(10))
p1 <- ggplot(df, aes(x,y)) + geom_point()
plist <- list(p1,p1,p1,p1,p1)

wrap_plots(plist) 
```

[![在此处输入图像描述](../Images/7aceac3307e90dcd56c926d8a05f71c5.png)](https://i.stack.imgur.com/B06c8.png)

一个有用的事情是您不需要指定需要多少列，并且旨在保持列数和行数相等。例如：

```
plist <- list(p1,p1,p1,p1,p1,p1,p1,p1,p1,p1,p1,p1,p1)
wrap_plots(plist) # produces a 4 col x 4 row plot 
```

> [在此处](https://github.com/thomasp85/patchwork)了解有关**拼凑**包的更多信息

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-27T07:56:30.690

为了适合一页上的所有图，您可以计算列数和行数，如下所示：

```
x = length(plots)

cols = round(sqrt(x),0)
rows = ceiling(x/cols) 
```

由于大多数多个绘图函数都有 ncol 和 nrow 作为参数，你可以把它们放在那里。我喜欢来自 ggpubr 的 ggarrange。

```
ggarrange(plotlist = plots, ncol=cols, nrow = rows) 
```

这有利于比列更多的行，如果你想要相反的情况，请反转。即对于 6 个图，它将给出 3 行和 2 列，而不是相反。**

# iphone - 在 UITextField 释放后设置 UITextFieldDelegate 和释放，自包含

> ID：10706760
> 
> 赞同：1
> 
> 时间：2012-05-22T17:08:31.690
> 
> 标签：iphone, objective-c, ios, ipad, delegates

我创建了一个实现的类，`UITextFieldDelegate`所以我只需要`[MyDelegateClass setDelegate:textField someConfigparams:...]`使用它就可以使用它。在里面它将创建一个对象并分配给`textFieldDelegate`.

释放时出现问题：`setDelegate`方法中`UITextField`没有保留对象，所以我不能只是自动释放它。我可以在外面保留一个引用来发布它，但它很难看并且容易出错，因为我需要在委托类之外做额外的工作。子类化`UITextField`是一个糟糕的选择，因为我需要始终使用这个可能与其他子类发生冲突的子类。

有什么方法可以在`UITextField`对象被销毁时释放委托对象而不依赖于 MyDelegateClass 之外的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:13:21.463

我假设 [MyDelegateClass setDelegate:textField someConfigparams:...] 创建 MyDelegateClass 的实例并将该实例分配为提供的 textField 上的委托。我要做的是使 MyDelegateClass 的实例成为单例，这意味着只有 1 个实例。

基本上在这种情况下会发生什么，MyDelegateClass 将保留对自身单个静态实例的强引用，并且只要您的应用程序保持活动状态或直到您有意释放它，该实例就会保持活动状态。让一个对象的一个​​实例成为许多文本字段的委托是完全可以的。让这个类的单个实例处于活动状态对内存的影响始终是恒定的，即不会增长，而且非常小。

# database - 如何在 PostgreSQL 中有条件地提取特定字段

> ID：10706761
> 
> 赞同：0
> 
> 时间：2012-05-22T17:08:34.793
> 
> 标签：database, postgresql, select, conditional

不完全确定如何表达这一点，但希望有人能提供帮助。这是我的问题。

我有一个表 T 有以下字段

```
ID CF值
----------------------
976 13 严重性 1
978 36支一  
978 13 严重性 1

```

我想提取具有属性分支 a 和严重性 1 的项目。

问题是，value 字段同时用于分支和严重性，仅通过不同的 CF 值 13 或 36 进行区分。如果项目同时具有这两个属性，则会给出重复条目（例如上面的 ID 978）

所以我不能从 D 中选择，其中 value = branch a AND value = severity1。

我想要做的是一个 Select - As - From 与以下字段

```
ID 分支严重性

```

如果 cf = 36，则将 value 字段拉入 Branch，如果 cf = 13，则将 value 拉入 Severity。

但我不确定我会如何在语法上做到这一点。我尝试了一些 Cases 和 If 语句，但不断出现错误。

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:47:32.810

当必须处理这样的模型时，进行支点的标准方法是：

```
select id, 
       max(branch) as branch,
       max(severity) as severity
from (
    select id, 
           case 
             when cf = 36 then value
             else null
           end as branch,
           case 
             when cf = 13 then value
             else null
           end as severity
    from t
) p
group by id 
```

这种类型的“设计”被称为“实体-属性-值”模式，并且——正如 Catcall 已经说过的——被认为是一种反模式。正是为了检索东西的复杂方式。

如果您在互联网上搜索该术语，您将获得大量点击。

在 PostgreSQL 中，您还可以使用 tablefunc 模块中的交叉表函数，它本质上是在函数内部动态创建上述语句。

[http://www.postgresql.org/docs/current/static/tablefunc.html](http://www.postgresql.org/docs/current/static/tablefunc.html)

使用 crosstab 函数，查询将如下所示：

```
SELECT *
FROM crosstab(
  'select id, cf, value
   from t
   where cf in (13,36)
   order by 1,2'::text)
AS ct(id integer, severity text, branch text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:20:25.287

您可以通过这种方式获得身份证号码。

```
select id
from your_table
where value = 'branch a'
   or value = 'Severity 1'
group by id
having count(id) = 2 
```

但总的来说，你会发现任何更复杂的事情都会让你陷入困境。这种结构是众所周知的反模式，这不是偶然的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:35:51.950

您可以使用这种模式进行简单的操作：

```
select id from t where cf = 36 and value = 'branch a'
intersect
select id from t where cf = 13 and value = 'severity1' 
```

正如 Catcall 已经指出的那样，这个系统在一段时间后会变得非常笨拙。如果 T 中的 id 值引用了某个实体表 E，那么您可以像这样创建一个视图：

```
create view e_attrs as
select e.id, t_36.value as branch, t_13.value as severity
from e
     left join t t_36 on t_36.id = e.id and t_36.cf = 36
     left join t t_13 on t_13.id = e.id and t_13.cf = 36 
```

然后希望连接消除（我认为来自 postgresql 9.1）如果您在视图上查询，将删除针对 T 的无关连接。

# android - 在 Android 的路由器上输入 WPS Pin

> ID：10706767
> 
> 赞同：0
> 
> 时间：2012-05-22T17:09:06.383
> 
> 标签：android, sdk, router

如何使用 Android SDK 以编程方式在路由器上输入 WPS（Wifi 保护设置）引脚？另外我可以得到路由器发送的响应吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:25:23.280

三星已将此作为一项功能添加到他们的某些手机中，但这不是 Android 的默认功能。话虽如此，我怀疑是否会有一种简单的方法来实现这一点。您可能必须了解 WPS 协议的工作原理并自己从头开始实施。这将涉及通过 WIFI 广播正确的信号，并与路由器执行安全握手。我不太了解这是如何工作的，您必须查找 WPS 协议。

您的应用很有可能需要 root 访问权限，因为您需要更改手机上的 WIFI 网络条目，甚至可能添加对存储此信息的支持。

# php - 试图在 apache 日志中追踪一个模糊的错误

> ID：10706770
> 
> 赞同：6
> 
> 时间：2012-05-22T17:09:17.430
> 
> 标签：php, apache2

我正在尝试消除新 Ubuntu 服务器安装上的错误，并且在日志中出现错误，我不知道如何追踪。

日志一遍又一遍地显示这条线

```
sh: 1: cd: can't cd to ~
sh: 1: cd: can't cd to ~
sh: 1: cd: can't cd to ~
sh: 1: cd: can't cd to ~ 
```

如何从如此模糊的错误中找到根源？它甚至没有日志中大多数错误的发生时间。

提前致谢。这将是漫长的一天！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T17:22:30.957

`cd ~`意思是“将我所在的目录更改为我的主目录”。您或脚本正在尝试不成功地运行此命令。就像 Chris 说的，grep 会拯救你的一天：

```
cd /
grep -r 'cd ~' * -n 
```

^这将切换到你的根目录`cd /`，递归`-r`搜索`'cd ~'`所有文件中的字符串`*`，并给出行号`-n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:12:07.863

也许 grep 用于包含字符串`cd`whos last access time is recent

# python - python - 使用多个进程/并行处理

> ID：10706773
> 
> 赞同：3
> 
> 时间：2012-05-22T17:09:39.207
> 
> 标签：python, fork, multiprocessing

所以我写了一个小的python脚本，它允许我指定一些包含视频文件的文件夹和一些输出目录，程序循环遍历所有的视频文件，并使用手刹将它们转换为：

```
proc = subprocess.Popen('HandBrakeCLI -i ... -o ...')
proc.wait() 
```

所以它会一个接一个地执行目录中的每个文件。我有一台四核机器，想通过并行进行视频转换来加快速度，但我不完全了解如何处理。

我需要像 os.fork() 这样的东西吗？更像多处理模块的东西？我来自单线程 javascript 领域，所以这对我来说相对较新。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:18:40.723

与此类似的东西应该可以解决问题：

```
import multiprocessing
...
def wrapper(currentfile):
    #create your commandline -- for the sake of simplicity, I assume that
    #the only thing that changes is the filename you are passing to
    #HandBrakeCLI (and that the filename is the last argument to pass)
    cmd='HandBrakeCLI -i ... -o ... '+currentfile 
    proc = subprocess.Popen(cmd)
    proc.wait()
    return 'foo'

files=os.listdir(path)  #Any way that you build up your list of files is fine
output = multiprocessing.Pool(4).map(wrapper,files) #output is ['foo', 'foo', ..., 'foo'] 
```

当然，这使用了一个类似`map`的函数，因为它的副作用是许多 python 人不喜欢的......但我发现它足够直观——尤其是如果你发表评论。我还让函数 return 'foo' 来证明你可以很容易地访问函数的返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:48:00.913

我建议使用[特使](https://github.com/kennethreitz/envoy)库。在底层它使用线程库来生成新的命令行程序，所以如果你使用这样的`connect`函数：

```
import envoy
proc = envoy.connect('HandBrakeCLI -i ... -o ...')
while proc.status_code = None:
    sleep(5) 
```

您可以一次生成任意多个，并等到一个退出再生成另一个。请注意，如果您有问题，我有一个带有我的修复程序的[分支](https://github.com/srathbun/envoy)，您可能想要检查。

我在 shlex 库如何处理引号以及您的 cmd 行程序期望什么方面遇到了一个引用问题。而且，由于我在 Windows 上使用它，因此存在 posix/non-posix 模式问题。

# twitter - 在 Twitter 中重置我的应用程序的密钥会使我的用户的访问令牌无效吗？

> ID：10706776
> 
> 赞同：1
> 
> 时间：2012-05-22T17:09:46.570
> 
> 标签：twitter, oauth, twitter-oauth

我已经将我的消费者密钥和秘密硬编码到我正在开发的应用程序中。

现在我想锁定密钥，以便只有管理员可以访问消费者密钥/秘密。

我想重置我的应用程序密钥，但保留用户的访问密钥和机密，这样他们就不会被迫重新授权。

从我运行的测试来看，这看起来很好（旧的 access_keys 继续使用新的应用程序密钥进行哈希处理）。

那是对的吗？即，这可能吗？如果是，它是某些 OAuth 标准或 Twitter 特定的一部分吗？

编辑：根据经验，我现在看到用户的访问令牌没有失效。这不是关于 OAuth 的一般情况，只是 Twitter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:15:54.400

实际上，您是对的，它会起作用，因为您重置了现有应用程序的消费者凭据。使用现有应用程序的新消费者密钥/秘密对，我看不出这不起作用的原因。

访问令牌连接到应用程序，而不是应用程序凭据。然而，这意味着现有的访问令牌将不适用于您创建的任何新应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:40:18.207

理论上它不应该起作用，因为 oAuth 访问令牌与 Twitter 提供的消费者密钥和消费者秘密相关联。

# python - pyPdf错误无效参数

> ID：10706778
> 
> 赞同：6
> 
> 时间：2012-05-22T17:09:53.390
> 
> 标签：python, file, pdf, pypdf, invalid-argument

我实际上是在使用 pyPdf 来打开、读取和写入 PDF 文件的内容。

为此，我使用这些代码行：

```
from pyPdf import PdfFileWriter, PdfFileReader

pdf = PdfFileReader(file("/myPdfFile.pdf", "w+b"))
content = pdf.getPage(1).extractText()
print content 
```

但它返回给我这个错误，我不明白为什么

```
File "/usr/local/lib/python2.6/dist-packages/pyPdf/pdf.py", line 374, in __init__
    self.read(stream)
File "/usr/local/lib/python2.6/dist-packages/pyPdf/pdf.py", line 702, in read
    stream.seek(-1, 2)
IOError: [Errno 22] Invalid argument 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:24:39.147

正如 Python 文档中所说，该模式`'w+b'`打开并将文件截断为 0 字节，同时`'r+b'`打开文件而不截断。

# internet-explorer - 允许浏览器使用外部应用程序来处理某些协议

> ID：10706779
> 
> 赞同：1
> 
> 时间：2012-05-22T17:10:00.417
> 
> 标签：internet-explorer, google-chrome, protocols, handler

在 Mozilla 中允许外部程序（安装在客户端机器上）处理特殊协议（即 sip 协议）相当容易我试图让 Chrome 和 IE 至少打开一个程序，该程序将自动拨打显示的号码。我试图按照 Chrome 的“指示”来允许这样的处理程序，但我无法物理添加协议，Chrome 允许我的唯一链接是 mailto:。现在，如果我点击链接（大概是让浏览器询问我想用它做什么，没有任何反应）。有没有人成功实现过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T14:33:52.240

查看有关禁用外部协议警告的[Google Groups](http://productforums.google.com/forum/#!topic/chrome/ZeNuBIXvKCg)讨论。

# apache - Apache2 的 Mod_Rewrite 不适用于 curl 等机器请求。我可以做些什么来转发这些请求？

> ID：10706781
> 
> 赞同：1
> 
> 时间：2012-05-22T17:10:09.363
> 
> 标签：apache, mod-rewrite, https, apache2, passenger

我刚刚在我的服务器上设置了 SSL。我希望对 http 站点的旧请求转发到 https。在具有重写条件和 Apache2 中的重写规则的浏览器中效果很好。但是，我们的一个合作伙伴有一台向某个 URL 发出请求的服务器，而该站点似乎没有正确地重写这些 URL。

我尝试使用 curl 重新创建此行为。当我使用 https（即 curl https://......）发出 url 请求时，它可以正常工作并按预期完成请求。当我使用 http（即 curl http://.......）发出 url 请求时，它返回 html 文本，说明此页面已被重定向到 https://.....。当我在浏览器中执行 http 或 https 请求时，它会正确重写。

更新：我应该在这里说这仅仅是对观察到的行为的诊断。根据下面的评论，您可以将 curl 设置为跟随重定向，但我不认为向服务器发出请求（我试图适应）的机器能够以这种方式跟随重定向。

进一步更新：如果有人知道发送“重定向通知”的位置（在 apache 日志中），请告诉我。然后我将能够判断哪些请求没有被重定向，并且能够判断上面的“卷曲诊断”是否非法。谢谢！

任何建议表示赞赏，并感谢您的所有帮助。如果您需要任何说明，或者是否有任何 Apache 配置或我应该提供的进一步诊断，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:10:43.833

您必须告诉 cURL 遵循 (HTTP) 重定向（默认情况下禁用）。`-L`如果您通过命令行调用 cURL，则可以通过将选项传递给它来执行此操作。例如，如果您从 PHP 调用它，您可以`CURLOPT_FOLLOWLOCATION`通过[`curl_setopt`](http://php.net/manual/en/function.curl-setopt.php)函数设置标头。

# java - 从网站提取财务数据的工具？

> ID：10706785
> 
> 赞同：-2
> 
> 时间：2012-05-22T17:10:27.083
> 
> 标签：java, .net, screen-scraping, web-crawler

我需要创建一个可以登录网站、读取 HTML、可能导航到另一个页面并最终从页面下拉数据（并将其导出到文件，或将其保存在“内存中”以进行更多处理的工具， ETC）。我将在 Mac OS 上执行此操作。这些天有没有关于如何最好地做到这一点的建议？过去，我使用 Web 库在 .NET 或 Java 中完成了这项工作。我需要能够登录到使用 HTTPS 的站点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:38:50.800

看看[HTTPUnit](http://httpunit.sourceforge.net/)。[这是一个使用 Java 代码模拟 Web 浏览器的简单解决方案，如果您已经熟悉 Java 并且它确实支持 HTTPS](http://httpunit.sourceforge.net/doc/sslfaq.html)，那么您将很快启动并运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:42:01.580

我用 .NET/Mono 和[Html Agility Pack](http://htmlagilitypack.codeplex.com/)做了一些相当繁重的 OSX 屏幕抓取。两者都运作良好国际海事组织。

# html - YouTube 播放列表作为图库视图

> ID：10706788
> 
> 赞同：0
> 
> 时间：2012-05-22T17:10:46.367
> 
> 标签：html, joomla, youtube-api

我想嵌入一个 YouTube 播放列表，将列表中的视频显示为缩略图和当前视频的大框架。我正在与 Joomla 合作！2.5，我想将它作为 HTML 嵌入到文章中，或者如果有人可以推荐扩展或其他方式来做到这一点。

非常感谢，我是一种新兴的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:38:51.310

这可能是您正在寻找的。

[http://extensions.joomla.org/extensions/social-web/social-media/video-channels/13075](http://extensions.joomla.org/extensions/social-web/social-media/video-channels/13075)

如果没有，可以在[这里找到更多扩展](http://extensions.joomla.org/extensions/social-web/social-media/video-channels)

# java - 用于进行基本转换的 Java 内置库（或 3rd 方代码）

> ID：10706791
> 
> 赞同：4
> 
> 时间：2012-05-22T17:11:09.097
> 
> 标签：java, libraries, base-conversion

是否有任何内置库（或任何好的第 3 方代码）支持将数字从任意基数 A 转换为另一个基数 B？

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T17:11:31.250

嗯，[`Integer.toString(int, base)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#toString%28int,%20int%29)还有[`Integer.parseInt(String, base)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)……？

# powershell - 将csv中的数据从“”替换为“null”powershell

> ID：10706793
> 
> 赞同：0
> 
> 时间：2012-05-22T17:11:16.733
> 
> 标签：powershell, csv, null

我正在阅读 powershell 脚本中的 CSV。该脚本提取特定数据，然后将其写入不同的 CSV。有没有办法可以用“null”这个词替换任何“”值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:16:08.027

我认为这应该给你一些开始......：

```
@'
Foo,Bar
"",""
Alfa,Beta
Gamma,""
"",Delta
'@ | ConvertFrom-csv | Foreach-Object { 
    foreach ($Property in $_.PSObject.Properties) {
        if ([string]::IsNullOrEmpty($Property.Value)) {
            $_.($Property.Name) = 'NULL'
        }
    }
    $_
} | ConvertTo-Csv -NoTypeInformation 
```

您*可以*尝试将：“”替换为“NULL”，但如果您有更复杂的数据，它可能会给您一些意想不到的结果，处理 PSObject.Properties 集合没有这个缺陷/风险。

# css - 代码不显示相对于父 div

> ID：10706803
> 
> 赞同：0
> 
> 时间：2012-05-22T17:11:59.527
> 
> 标签：css

`img`代码中的标签具有样式`relative`，根据它应该放置在顶部`relative`的父级`div`，但我不明白为什么它没有显示在提到的**位置。这是**[小提琴](http://jsfiddle.net/ZByDf/)。请帮忙。谢谢

```
<div>
    <iframe width="350" height="350" src="http://www.youtube.com/embed/P3weDRMemD8" frameborder="0" allowfullscreen></iframe>
    <form style="border:3px;text align.center;" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit=                  "window.open('http://feedburner.google.com/fb/a/mailverify?uri=financeyoga/UPqT', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
        <input type="text" style="width:140px;padding:10px;" name="email"/>
        <input type="hidden" value="financeyoga/UPqT" name="uri"/>
        <input type="hidden" name="loc" value="en_US"/><br>
        <input style="padding:10px;" type="submit" value="Submit Email Address" />
    </form>
    <img style="position:relative;top:325px; left:10px;" src="http://financeyoga.com/wp-content/uploads/2012/05/follow.png" width="143" height="64" border="0" usemap="#Map">
    <map name="Map">
        <area shape="rect" coords="5,18,33,44" href="www.twitter.com" target="_blank" alt="twitter">
        <area shape="rect" coords="57,16,87,46" href="www.facebook.com" target="_blank" alt="facebook">
        <area shape="rect" coords="107,16,137,46" href="plus.google.com" target="_blank" alt="google plus">
    </map>        
</div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:17:18.353

这不是什么`position:relative`意思。

`position:relative``position:absolute`如果所有孩子在他们的 CSS 中都有，则更改他们定位自己的上下文。

例如：

```
<body>
    <div id="a">
        <div id="b">
            Hello
        </div>
    </div>
</body> 
```

如果`div#b`有一个 css`position:absolute`的位置是相对于`body`. 但是如果`div#a`也有一个 css ，`position:relative`那么 的位置`div#b`是相对于`div#a`而不是`body`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:19:22.383

`postion:relative`设置使用的子项的原点`positon:absolute`。

所以设置`position:relative`在包装元素和`position:absolute`子元素上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:24:03.600

我不确定你在问什么，但是如果你想相对于它的 div 设置图像的样式，有一个技巧可以让父元素相对而内部元素绝对。这是编辑后的代码，以防您不明白我在说什么。

[http://jsfiddle.net/ZByDf/9/](http://jsfiddle.net/ZByDf/9/)

# javascript - 如何使用 vkTemplate 用 JSON 对象填充 html

> ID：10706810
> 
> 赞同：0
> 
> 时间：2012-05-22T17:12:13.730
> 
> 标签：javascript, jquery, json, jquery-templates

我希望能够获取一个 php 提供的 json 对象并将其放入 html 中。我的旧方法只是制作一个非常长、难以理解的 html 字符串，然后在`$.append(hmltStr)`我最后一次在 SO 上发布它时并没有那么顺利。我想知道是否有人可以向我解释如何使用[这个模板](http://www.eslinstructor.net/vktemplate/)将 json 对象放入 html 中，这显然是对[John Resign 微模板](http://ejohn.org/blog/javascript-micro-templating/)的改进。

给定对象：

```
{
"order": {
    "name": "TRADEMARK WHEEL COMPANY",
    "sales_order_id": "18278",
    "order_date": "05 \u2044 15 \u2044 2012",
    "due_date": "05 \u2044 21 \u2044 2012",
    "order_number": "1213140",
    "reference": "21192D\/35546",
    "order_description": "BICICLETTE",
    "ship_name": "ADAMS",
    "ship_address1": "1919 W RANDOLPH ST.",
    "ship_address2": "",
    "ship_city": "CHICAGO",
    "ship_state": "IL",
    "ship_postal_code": "60606",
    "ship_country": null,
    "ship_via": "FEDEX GROUND",
    "tracking_number": null,
    "package_contents": null,
    "freight": "0.00",
    "taxable": "0.00",
    "nontaxable": "748.88",
    "sales_tax": "0.00"
},
"line_item": [{
    "description": "RED ONE",
    "quantity": "2.00",
    "sell_price": "349.44"
},
{
    "description": "FRONT GEAR",
    "quantity": "2.00",
    "sell_price": "15.00"
},
{
    "description": "5th GEAR",
    "quantity": "2.00",
    "sell_price": "10.00"
}] 
```

}

是`data`由这个 ajax 请求收集的，我如何在这个 ajax 函数的成功部分用它填充一个 html 表

```
$.ajax({
    type: "POST",
    url: "getJSON.php",
    data: submitStr,
    success: function (data) {

    //populate order details

    //loop through variable number of line items

}

<html>

<table id="contentTable">
</table>

</html> 
```

还有，`<script type="html/javascript></script>`标签是什么。这可能相关也可能不相关，但我在模板中看到了它；我需要使用它吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:41:07.330

**HTML**

一种。包括 jQuery 脚本，如下所示：

```
<script src=".../libs/jquery/1.6.1/jquery.min.js" type="text/javascript"></script> 
```

湾。包括 vkTemplate 插件，如下所示：

```
<script src="vktemplate.js" type="text/javascript"></script> 
```

C。在您的 html 页面中添加要注入此表的元素，例如：

```
 <div id="container"></div> 
```

**模板**

（注意，那 line_item 是数组，所以你订购和 line_item 不同）

```
<table id="contentTable">
    <tr>
        <td>
            label-one:
        </td>
        <td>
            <%= o.order.name %> 
        </td>
    </tr>
    <tr>
        <td>
            label-two:
        </td>
        <td>
            <%= o.line_item[0].description %> 
        </td>
    </tr>
</table> 
```

将此模板（例如**order.tmpl**）保存在您的 Web 服务器上

**JAVASCRIPT**

初始化vkTemplate插件并提供模板URL作为第一个参数，json_data URL作为第二个参数

```
$('#container').vkTemplate( 'order.tmpl', 'getJSON.php' ); 
```

* * *

至此，您就完成了。

希望有帮助

-瓦迪姆

# unix - 限制特定文件夹中的文件数

> ID：10706816
> 
> 赞同：1
> 
> 时间：2012-05-22T17:12:37.717
> 
> 标签：unix

我有一个每天凌晨 3.30 点创建数据库备份的 cronjob。

文件名的命名法是 live_YYYY_MM_DD.sql.gz，其中 YYYY、MM 和 DD 是进行备份的日期。

通常，我会进去并删除较旧的备份，但我想将备份数量限制为 3 个最近的备份。有没有办法通过某种过程或脚本来做到这一点？

谢谢

编辑：

我根据[http://www.thegeekstuff.com/2010/07/logrotate-examples/编辑了 logrotate.conf](http://www.thegeekstuff.com/2010/07/logrotate-examples/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:42:06.603

一个简单的 shell 脚本可以完成这项工作，但您最好学习执行此操作的标准工具：[logrotate](http://linuxcommand.org/man_pages/logrotate8.html)。当您对旧备份文件管理的需求发生变化时，无需修改自制脚本，只需更改 logrotate 配置条目即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T22:05:42.927

```
ls -t live_*.sql.gz|awk 'NR>3'|xargs echo 
```

如果这回显了正确的文件，请使用`rm`而不是`echo`. 将它放在备份脚本中的适当位置，您不需要安装 logrotate。

# java - Jboss JBAS014750 - 部署耳朵时出错

> ID：10706817
> 
> 赞同：0
> 
> 时间：2012-05-22T17:12:42.807
> 
> 标签：java, deployment, jboss, jboss7.x

我在为 jboss 部署耳朵时遇到问题。我搜索了互联网，唯一的参考是关于套接字绑定的东西，但我使用的是默认的**独立完整**cfg。

**关于JBAS014750**的任何想法？

```
18:06:16,975 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-2) JBAS010403: Deploying JDBC-compliant driver cl
ass org.apache.derby.jdbc.AutoloadedDriver (version 10.5)
18:06:17,116 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-6) Initializing Mojarra 2.1.7-jbossor
g-1 (20120227-1401) for context '/fce'
18:06:19,147 INFO  [org.hibernate.validator.util.Version] (MSC service thread 1-6) Hibernate Validator 4.2.0.Final
18:06:21,085 INFO  [org.jboss.web] (MSC service thread 1-6) JBAS018210: Registering web context: /fce
18:06:21,303 INFO  [org.jboss.as.server] (HttpManagementService-threads - 2) JBAS015870: Deploy of deployment "fce-application.ear
" was rolled back with failure message JBAS014750: Operation handler failed to complete
18:06:21,397 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015877: Stopped deployment fce-module-ejb.jar in
99ms
18:06:21,397 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-15) JBAS015877: Stopped deployment fce-module-core-servi
ces.jar in 99ms
18:06:21,944 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) JBAS015877: Stopped deployment fce-module-presentatio
n.war in 645ms
18:06:24,116 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment fce-application.ear in
 2817ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:12:22.553

我的问题是我的数据源配置不正确。我的错。

# java - 如何编写命令行并选择合适的命令来运行？

> ID：10706824
> 
> 赞同：0
> 
> 时间：2012-05-22T17:13:23.933
> 
> 标签：java, command, interpreter

我的任务是用 Java 编写一种命令行。

它旨在测试编译器的某些部分。您会看到一个提示，可以键入“read_source”、“parse”、“build_ast”、“ast2cfg”、“print_cfg”等命令。

Java中是否有任何库可以帮助我构建解释器（或repl？）。**我知道一个 python 模块可以做我想要的**：[cmd](http://docs.python.org/library/cmd.html?highlight=cmd#cmd)

我自己写了类似的东西：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.HashMap;

interface Command {
    public abstract void action(String[] parameters);
}

public class Repl {
    private String prompt = "\n$ ";

    private HashMap<String, Command> commands;

    private Command nullCommand = null;

    private Command defaultCommand = null;

    public Repl() {
        commands = new HashMap<String, Command>();
    }

    public void setPrompt(String prompt) {
        this.prompt = prompt;
    }

    public void setDefaultCommand(Command defaultCommand) {
        this.defaultCommand = defaultCommand;
    }

    public void setNullCommand(Command nullCommand) {
        this.nullCommand = nullCommand;
    }

    public void addCommand(String name, Command command) {
        commands.put(name, command);
    }

    public void runRepl() {

        if (nullCommand == null) {
            System.err.println("There is no 'nullCommand' specified");
            return;
        }
        if (defaultCommand == null) {
            System.err.println("There is no 'defaultCommand' specified");
            return;
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    System.in));

            String commandName;
            String[] parameters;

            while (true) {
                System.out.print(prompt);

                commandName = reader.readLine();

                if (commandName == null) {
                    nullCommand.action(null);
                } else {
                    parameters = commandName.trim().split("\\s+");

                    Command com = commands.get(parameters[0]);
                    if (com != null) {
                        com.action(parameters);
                    } else {
                        defaultCommand.action(parameters);
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
            System.err.println("Internal error within compiler: stopping compilation");
            System.exit(1);
        }
    }

    /**
     * Exapmpe:
     */
    public static void main(String[] args) {
        Repl repl = new Repl();

        repl.addCommand("printparams", new Command() {
            @Override
            public void action(String[] parameters) {
                System.out.println(Arrays.toString(parameters));
            }
        });

        repl.addCommand("add", new Command() {
            @Override
            public void action(String[] parameters) {
                if (parameters.length == 3) { // {"add", "2", "3"}
                    try {
                        int x = Integer.parseInt(parameters[1]);
                        int y = Integer.parseInt(parameters[2]);
                        System.out.println("Ergebnis: " + (x + y));
                    } catch (NumberFormatException e) {
                        System.out.println("Arguments have to be integers");
                    }
                } else {
                    System.out.println("There have to be two arguments");
                }
            }
        });

        Command helpcommand = new Command() {
            @Override
            public void action(String[] parameters) {
                System.out.println("There is: 'help', 'printparams [PARAMS...]', 'exit' and 'add INTEGER INTEGER'");
            }
        };
        repl.addCommand("help", helpcommand);
        repl.setDefaultCommand(helpcommand);

        Command exitcommand = new Command() {
            @Override
            public void action(String[] parameters) {
                System.out.println("Bye!");
                System.exit(0);
            }
        };
        repl.addCommand("exit", exitcommand);
        repl.setNullCommand(exitcommand);

        repl.runRepl();
    }
} 
```

它可以工作，但它会很好，例如，如果根据参数解析的方式生成用于添加两个更多数字的“用法：添加整数整数 [整数...]”等使用模式，那么添加新命令并确保它们始终一致的工作更少。

我也在问自己这是否过度设计。你会建议只写一个这样的循环吗？：

```
while(true) {
    String command = getUserInput();
    if (command.equals("dothis")) {
        dothis1();
        someMember = dothis2();
    } else if (command.equals("dothat"))
        dothat();
    } else {
        printHelp();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:30:06.767

使用 switch case 而不是 if else 阶梯，以创建更优雅的代码，并避免拼写错误。

例如：

```
while(true){

  Scanner scan = new Scanner(System.in);
  String s = scan.nextLine()

    switch(s){

         case "Dothis" :
                           break;

         case "Dothat" :
                           break;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T23:38:02.100

您的第一个答案*似乎*过于复杂。我像你一样使用了很多注册代码，但通常这是当一个类向另一个类注册自己时。*如果您有大量*命令并且您担心`if {} else if {}`链需要很长时间，我只会出于性能原因使用该类将注册自己的想法。

我认为简单的解决方案（虽然不性感）是最好的。

```
while(true) {
    String command = getUserInput();
    if (command.equals("dothis")) {
        dothis1();
    } else if (command.equals("dothat"))
        dothat();
    }
    ...
} 
```

我*总是*在这里选择 KISS 方法，同时着眼于性能影响。复杂的代码不仅会绊倒试图维护您的代码的其他人，而且当您在 3 个月后再次使用它时，您也会摸不着头脑。:-)

# c# - 在 Visual Studio 中自动完成时自动添加“this”标识符

> ID：10706826
> 
> 赞同：3
> 
> 时间：2012-05-22T17:13:58.737
> 
> 标签：c#, visual-studio-2010, resharper

[我在StyleCop](http://stylecop.codeplex.com/)中使用了一组自定义规则以及它的 ReSharper 插件，以便在我键入时自动检查我的代码。

StyleCop 中的规则[SA1101](http://stylecop.soyuz5.com/SA1101.html)规定，对当前类成员的调用需要以`this.`表明它实际上是在当前类中定义的开头。

有没有办法设置它，所以当我去自动完成班级成员时，它会自动添加`this.`前缀，所以我不必记住如何输入或添加它？

让我们用`public bool Running { get; set; }`一个例子：

我输入“ `Run`”+ `Tab`，现在它出现了`Running`，但我希望它出现`this.Running`。

这将节省大量时间和打字。

**编辑**

请注意，`ReSharper => Options => Code Editing => C# => Formatting Style => Other => "Force 'this.' qualifier for instance member"`resharper 中的选项（如 Jon 所述）不能按预期工作。`;`在语句末尾添加 a时（这是可以接受的），或者在将选项卡`this.`添加到类成员之后都不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:20:34.843

如果你去

```
ReSharper => Options => Code Editing => C# => Formatting Style => Other 
```

有一个选项叫做*“强制‘这个’。实例成员的限定符”*。

启用它应该可以按您的意愿工作。

# java - 测试一个 Java Bean 是否有 PropertyChangeSupport

> ID：10706833
> 
> 赞同：0
> 
> 时间：2012-05-22T17:14:34.180
> 
> 标签：java, events, javabeans

是否有标准或最佳实践方法来了解 POJO（普通旧 Java 对象）是否具有 PropertyChangeSupport？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T19:36:15.697

> 是否有标准或最佳实践方法来了解 POJO（普通旧 Java 对象）是否具有 PropertyChangeSupport？

该类`PropertyChangeSupport`通常用于在 bean 类中*实现*属性更改支持，因此我怀疑您真正想知道的是是否有办法查看 bean 类是否支持注册`PropertyChangeListeners`。

以下面的示例 bean 类为例：

```
class Bean {

    private String name;
    private final PropertyChangeSupport pcs = new PropertyChangeSupport(this);

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        String oldName = this.getName();
        this.name = name;
        this.pcs.firePropertyChange("name", oldName, name);
    }

    public void addPropertyChangeListener(PropertyChangeListener listener) {
        this.pcs.addPropertyChangeListener(listener);
    }

    public void removePropertyChangeListener(PropertyChangeListener listener) {
        this.pcs.removePropertyChangeListener(listener);
    }
} 
```

您可以使用[Introspector](http://docs.oracle.com/javase/7/docs/api/java/beans/Introspector.html)类来查询 bean 并确定它是否提供属性更改侦听器的注册，例如：

```
boolean supportsPropertyChangeListener = false;

BeanInfo info = Introspector.getBeanInfo(Bean.class);
EventSetDescriptor[] descriptors = info.getEventSetDescriptors();

for (EventSetDescriptor descriptor : descriptors) {
    if (descriptor.getListenerType().equals(PropertyChangeListener.class)) {
        supportsPropertyChangeListener = true;
    }
}

System.out.println(supportsPropertyChangeListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:21:07.013

我想不出一种标准的方法，但一种方法是使用反射并迭代你的类的属性以查看是否有 type `PropertyChangeSupport`。

例如：

```
Field[] fields = clazz.getDeclaredFields();

for(Field field : fields) {
   if(field. getType().equals(PropertyChangeSupport.class)) {
      //do whatever you have to do
   }
} 
```

# c# - 表格自行提交

> ID：10706834
> 
> 赞同：1
> 
> 时间：2012-05-22T17:14:36.693
> 
> 标签：c#, asp.net, html, post, pageload

所以我试图让一个页面提交给自己，然后在出错时重定向回自己，或者在成功时重定向到其他地方。

我有在 VB.NET 中工作的示例代码，但我试图让相同的代码在 C# 中工作。我觉得错误在于使用 Page_Load - 我觉得我应该使用另一个调用。

由于现在的代码，我得到一个无限重定向循环，这是不可接受的。

这是代码：

```
<% @Page Language="C#" Debug="true" %>
<% @Import Namespace="System.Web" %>
<script language="C#" runat="server">
    void Page_Load(object sender,EventArgs e) {
        if( Request.Form["username"] == "admin" && Request.Form["password"] ==  "password") {
            HttpContext.Current.Session["username"] = Request.Form["username"];
            HttpContext.Current.Session["password"] = Request.Form["password"];
            Response.Redirect("elsewhere.html");
        }
        else {
            Response.Redirect("login.aspx?errors=1");
        }
    }
</script>

<!-- #include file="header.html" -->

<form action="" method="post">
    <div id="errors">Incorrect Username or Password</div>
    <div><span>Username:</span><input name="username" /></div>
    <div><span>Password:</span><input name="password" type="password" /></div>
    <div><input type="button" value="Login" id="loginbutton" /></div>
</form>

<!-- #include file="footer.html" --> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:17:52.820

我想你不见了

```
if (IsPostBack) {
   //Your code here
} 
```

这将允许您的代码仅在表单刚刚提交时触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:19:08.903

无限重定向的原因是

```
 Response.Redirect("login.aspx?errors=1"); 
```

与第一次加载页面时一样， Request.Form["username"] == "admin" 并且任何这些条件都会导致 else 部分执行。它一次又一次地无限加载 login.aspx。

当页面回发时，我们将这些语句执行。你的代码是。

```
if(Page.IsPostBack)
{
    if( Request.Form["username"] == "admin" && Request.Form["password"] ==  "password") {
                HttpContext.Current.Session["username"] = Request.Form["username"];
                HttpContext.Current.Session["password"] = Request.Form["password"];
                Response.Redirect("elsewhere.html");
            }
            else {

                    Response.Redirect("login.aspx?errors=1");
            }
} 
```

# php - PHPStorm：对象集合的正确 PHPDoc？

> ID：10706835
> 
> 赞同：33
> 
> 时间：2012-05-22T17:14:40.920
> 
> 标签：php, phpstorm, phpdoc

我正在使用[PHPStorm](http://www.jetbrains.com/phpstorm/) IDE，在运行代码检查时遇到了麻烦。

我有一个返回对象集合的方法。它`Collection`本身是一个对象，它有自己的方法，并实现了[Traversable](http://php.net/manual/en/class.traversable.php)接口：

```
class Repository
{
    public function findByCustomer(Customer $user)
    {
        // ...
        return new Collection($orders);
    }
} 
```

如果我记录`findByUser()`返回 a `Collection`，则代码检查了解此对象的方法，但不了解集合包含哪些对象：

```
/**
 * @return Collection
 */
public function findByCustomer() { ... } 
```

![在类 Collection 中找不到方法 getTotal()](../Images/39b711472f3263c6b2ce26454c460802.png)

如果我记录`findByUser()`返回`Order`对象集合，代码检查现在了解集合内部的内容，但不了解其`Collection`本身的方法：

```
/**
 * @return Order[]
 */
public function findByCustomer() { ... } 
```

![在类 Order[] 中找不到方法 slice()](../Images/19ff17de1de370734c6e62413e634004.png)

有没有办法同时指定两者，比如 Java 的语法？

```
/**
 * @return Collection<Order>
 */
public function findByCustomer() { ... } 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-23T09:58:15.323

您可以将它们（两种类型）组合在一起。在某些情况下可能并不理想，但可以工作，您可能会认为它比通过`@var`PHPDoc 注释手动指定类型更好。

```
/** @return Collection|Order[] */ 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2021-10-15T12:17:38.027

从 2021.2 开始的 Phpstorm 允许使用以下语法：

```
/**
 * @return Collection<Order>
 */ 
```

PhpStorm 2021.2 新增功能截图：
[![来自 PhpStorm 的屏幕截图 What's New 2021.2](../Images/c25bf1864e06ee3bd55fb4d4df2d93fc.png)](https://i.stack.imgur.com/X0iNr.png)

# sql - 另一个查询的查询结果

> ID：10706839
> 
> 赞同：1
> 
> 时间：2012-05-22T17:14:56.777
> 
> 标签：sql, group-by

这是我的第一个可以正常工作的查询。

```
SELECT count(event_log_id) as icount, cast(youth_name as varchar(max)) as yname
FROM CIRComplete
WHERE  actual_date between '2012-01-01' and '2012-04-30'
  AND is_deleted = '0' AND Closed = '1' 
GROUP BY cast(youth_name as varchar(max)) 
```

这将给我两列，icount 和 yname

我想执行第二个查询，它将给我 yname 和 icount 其中 icount > 1

我已经在这几个小时了，终于决定寻求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:17:13.397

为什么要进行第二次查询？这应该这样做：

```
SELECT
   count(event_log_id) as icount ,
   cast(youth_name as varchar(max)) as yname 
   FROM CIRComplete 
   WHERE (actual_date between '2012-01-01' and '2012-04-30') and 
         is_deleted = '0' and Closed = '1' 
   GROUP BY cast(youth_name as varchar(max))
   HAVING count(event_log_id) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:17:54.037

```
SELECT  cast(youth_name as varchar(max)) as yname,
        count(event_log_id) as icount
FROM    CIRComplete
WHERE   (actual_date between '2012-01-01' AND '2012-04-30') AND 
        is_deleted = '0' AND 
        Closed = '1' 
GROUP BY cast(youth_name as varchar(max))
HAVING  count(event_log_id) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:17:59.383

```
SELECT  
   count(event_log_id) as icount
  ,cast(youth_name as varchar(max)) as yname
FROM
  CIRComplete
WHERE 
   (actual_date between '2012-01-01' and '2012-04-30') and is_deleted = '0' and Closed = '1' 
GROUP BY
   cast(youth_name as varchar(max))
having icount > 1 
```

# jquery - Jquery .html 更新值

> ID：10706840
> 
> 赞同：2
> 
> 时间：2012-05-22T17:15:01.293
> 
> 标签：jquery

我的 html 文件中有以下 div 标签：

```
<div id='attendeelist'></div> 
```

我正在使用以下 Jquery 来评估它的值，但似乎没有发生任何事情。任何的想法。我认为 .html 可以解决问题

```
tble = '<h1>test</h1>';
$('#attendeelist').html(tble); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:16:58.017

`#attendeelist`代码运行时是否可用？如果没有，则将代码包装到加载 DOM 时执行的函数中：

```
$(function(){
   var tble = '<h1>test</h1>';
   $('#attendeelist').html(tble);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:17:01.193

您是否确保包含就绪功能？

```
$(function(){
       var tble = '<h1>test</h1>';
       $('#attendeelist').html(tble);
}); 
```

# objective-c - NSArray componentsJoinedByString 内存泄漏

> ID：10706847
> 
> 赞同：1
> 
> 时间：2012-05-22T17:15:52.557
> 
> 标签：objective-c, ios, memory-management, memory-leaks, automatic-ref-counting

我写了一个方法（如下所示）。该项目是使用 ARC 编译的，但由于第三方库依赖关系，该方法所在的文件必须使用 -fno-objc-arc 开关进行编译。

泄漏检查员告诉我有泄漏

```
return [fragments componentsJoinedByString:@" "]; 
```

我看不到——我可以要求另一双眼睛指出我的方式错误吗？

非常感谢

```
-(NSString *)trimAndTidy:(NSString *)aString
{
    NSCharacterSet *nsc = [NSCharacterSet characterSetWithCharactersInString:@"\r\n \t"];
    NSString *fragment;
    NSMutableArray *fragments = [NSMutableArray array];
    NSScanner *scanner = [NSScanner scannerWithString:aString];
    do
    {
        if ([scanner scanUpToCharactersFromSet:nsc intoString:&fragment])
            [fragments addObject:fragment];
    }
    while (![scanner isAtEnd]);
    return [fragments componentsJoinedByString:@" "];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:46:09.627

泄漏检查员会告诉您*分配泄漏的*位置，而不是*造成泄漏的位置*。

要找到原因，您必须找到额外`retain`或缺失的`release`呼叫。

# php - 即使我已登录，URL 也会重定向 - PHP / Session

> ID：10706848
> 
> 赞同：1
> 
> 时间：2012-05-22T17:15:58.323
> 
> 标签：php, session, redirect, cookies

我有一个管理页面 (../index2.php) 我想在第一次打开浏览器时以我的主页 URL 登录。您必须使用用户名和密码登录才能查看此页面。显然，如果我注销并关闭浏览器，然后重新打开，它应该重定向到登录页面。这是 index2.php 页面首次打开时的顶部代码：

```
<?php
      require_once ("../includes_kl/initialize.php"); // simply sets up database and other classes including session class
?>
<?php
    if(!$session->is_logged_in()) {
    redirect_to("/cms/login.php");
    }
?> 
```

它将重定向到 login.php 页面，但该页面执行以下操作：

```
require_once ("../../includes_kl/initialize.php");
if ($session->is_logged_in()) {// Skip login page if already logged in.
    redirect_to("index.php");
} 
```

而且因为我现在显然已登录（不确定何时发生），所以它转到 index.php。

当我打开浏览器时，我确认我的 cookie 已设置。cookie 会这样做：

```
 private function check_login() {

    if (isset($_COOKIE['user_id']) && (isset($_COOKIE['username']))) {
        $_SESSION['user_id']= $_COOKIE['user_id'];
        $_SESSION['username'] = $_COOKIE['username'];

    }

    if (isset($_SESSION['user_id'])) {
        $this->user_id = $_SESSION['user_id'];
        $this->username = $_SESSION['username'];
        $this->logged_in = true;
    } else {
        unset($this->user_id);
        $this->logged_in = false;
    }
}

My session Constructor:

function __construct() {
      session_start();
      $this->check_login();
} 
```

更新：我将此代码添加到回显变量：

```
function __construct() {
      session_start();
      $this->check_login();
       if ($this->logged_in) {
        echo "Session User Success: " . $this->username;
        } else {
        echo "Session User Fail";
        }
} 
```

当我第一次打开浏览器时，它返回“会话用户失败”（我在 index2.php 中出于测试目的取消了重定向，所以我可以看到结果）。

更新2：

我已经找到了未设置 Cookie 的问题。

这是我设置它们的地方：

```
public function login($user) {
    global $database;
    if ($user) {
        $this->user_id = $_SESSION['user_id'] = $user->id;
        $this->username = $_SESSION['username'] = $user->username;
        setcookie('user_id', $this->user_id, time() + (60 * 60 * 24 * 14));
        setcookie('username', $this->username, time() + (60 * 60 * 24 * 14));
        $this->logged_in = true;
      }
} 
```

这样做是否正确？这是用户登录时的一部分。我已经在 Chrome 中验证了 cookie 已设置。然而，在 check_login() 方法中，它在第一个“if”语句中找不到它们。“isset”测试失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:02:59.370

你需要检查几件事。

您应该检查服务器响应 HTTP 标头并在那里查找 Set-Cookie 标头。如果它在那里，那么*setcookie*函数就没有问题。您将需要检查客户端请求 HTTP 标头并在那里查找 Cookie 标头。

但是，更有可能您的服务器响应中没有 Cookie 标头。它可能由于不同的原因而发生，但最有可能是因为“标头已发送”警告。如果您的配置中有 display_errors = off，那么您只能在日志文件中看到此警告。这意味着，您的服务器在调用登录函数之前已经开始数据（即 HTTP 响应正文）传输，并且无法设置任何其他标头。您可以使用*标题*功能检查它。为此，您需要将此代码放在 index2.php 的开头：

```
header('Start: OK'); 
```

以及 check_login 函数中的这段代码：

```
header('Check-Login: OK'); 
```

之后，您需要检查您的响应中有哪些标题。

还有一件事情。你应该避免这样的结构：

```
$_SESSION['user_id']= $_COOKIE['user_id'];
$_SESSION['username'] = $_COOKIE['username']; 
```

这是一个真正的安全漏洞。至于我可以在客户端更改 cookie，我可以使用任何用户的凭据登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:13:11.363

我在另一个问题的帮助下弄清楚了。它确实与Cookies有关。我只需要在 setcookie() 方法中设置路径和域。

setcookie('username', $this->username, time() + (60 * 60 * 24 * 14), **'/', 'domain.com'** );

我的 login.php（首先设置 cookie）与浏览器打开的 index2.php位于*不同的文件夹级别。*所以cookie*只*为'domain.com/folder/HERE'级别的文件夹设置（这是我的login.php所在的位置：domain.com/CMS/login.php）。

另一方面，我将浏览器打开到未设置 cookie 的 domain/index2.php。因此，它会将您发送到看到 cookie 的 login.php 页面，因此它将通过与它相同的测试，并将您重定向到我未登录的 index.php。这就是我的浏览器打开我的原因在 index.php 中并登录。

# jquery - 如何创建一个 JQuery 导航栏？

> ID：10706849
> 
> 赞同：4
> 
> 时间：2012-05-22T17:16:02.680
> 
> 标签：jquery, hide, show, show-hide

我有一个侧面有 6 个导航按钮的网站。对于它们中的每一个，我想显示相应的 DIV 隐藏其他 5。页面加载时 DIV #1 可见，其他显示：无。

我知道如何使用 hide()、show()、fade 等隐藏和显示元素，但我正在尝试想出最好的方法来无缝显示被点击的元素，同时隐藏当前可见的元素，而无需求助于拼写他们都像：

```
$('#btn1').click(function(){
$('#div2').hide();
$('#div3').hide();
$('#div1').show();
 )} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:19:20.680

```
$('.commonBtn').click(function(){ // commonBtn is common class to all buttons
   var index = this.id.replace('btn','');
   $('div[id^=div]:visible').hide();
   $('#div'+ index).show();
)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:24:23.437

使用按钮的 id`btn_1`代替`btn1`

```
$('div[id^="btn"]').click(function(){
    var id = $(this).attr("id").split("_")[1]; // fetch the id's number part

    $('div[id^="div"]').hide(); // hide all divs with id starting with div

    $("#div"+id).show(); // show corresponding div     

 )} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:34:57.210

这是jquery代码：

```
 $(document).ready(function() {
          $('#btn-next').click(function () {
          $('#recent_post').hide();
           $('#top_post').fadeIn(3000).show();
           return false;        
            }); 
        $('#btn-prev').click(function () {
        $('#top_post').hide();
        $('#recent_post').fadeIn(3000).show();
            return false;   
        }); 
        }); 
```

这是html：

```
 <div id="top_post" class="post" style="z-index:1;">
       <!---Content goes here--->
     </div>
    <div class="post" id="recent_post" style="display:none;z-index:0;">
       <!---Content goes here--->
     </div> 
```

我已经在我的网站中实现了它。访问[http://kaidul.web44.net/](http://kaidul.web44.net/)中的“文章”部分 我刚刚为两个 div 构建了它。为 6 个 div 做同样的工作。希望它有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T18:02:57.167

这就是我最终要做的事情。如果导航按钮被命名为“dc”，那么隐藏和显示的 div 被命名为“dcdiv”

```
 var which_id;

    $(document).ready(function() {
        $("#rightcontent>div:not(.default)").hide();  // hide all client divs but default one
        $("#clientnav li").click(onClick); // event handler for nav bar

        function doTransition(){
            var which_name = which_id.split("#")[1];
            $('#clientnav li[id="'+which_name+'"]').addClass("active");
            $("#rightcontent>div:visible").slideUp("fast", function(){
                var which_div = which_id+'div';
                $(which_div).slideDown("fast");
            });
        }

        function onClick(event){
            $('#clientnav li').removeClass("active"); // remove active class for all nav buttons
            which_id = "#" + $(this).attr("id"); // get the id of the nav button clicked on
            doTransition();
            event.preventDefault();
        }; 
```

# ios - ios - UIButton 突出显示设置行为怪异

> ID：10706851
> 
> 赞同：2
> 
> 时间：2012-05-22T17:16:11.043
> 
> 标签：ios, uibutton, highlight

我突出显示的图像显示不同。这是我的情况。

```
[button setImage:"normal image" forState:UIControlStateNormal];
[button setImage:"hover image" forState:UIControlStateHighlighted];
[button setImage:"hover image" forState:UIControlStateSelected];

- (IBAction)buttonTouched:(id)sender {
    UIButton *selectButton = sender;

    if (_currentSelectedTabButton.tag == selectButton.tag) {
        //TODO refresh view controller
        return ;
    }

    _currentSelectedTabButton.selected = NO;
    selectButton.selected = YES;

    _currentSelectedTabButton = selectButton;
} 
```

1.  触摸按钮。
2.  按钮显示突出显示的图像。（正确的图像）
3.  按钮的状态设置为“选中”
4.  触摸按钮。
5.  按钮显示不同的突出显示图像。

当按钮处于选中状态时，突出显示的图像显示不正确。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:25:16.267

这是因为您同时设置了 setImage:forControllState:UIControlStatesSelected 和 setHighlighted 图像，并且当您第一次按下按钮时，它的状态未被选中时，突出显示的图像会显示出来，再次按下按钮时，它会显示选定的图像，因为现在按钮处于选定的状态。（简而言之，突出显示的图像仅在按钮的非选定状态下工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T05:53:35.660

UIControlStateSelected | UIControlStateHighlighted 是一个独立于 UIControlStateHighLighed 的状态

# unit-testing - 测试 cakephp 2.1 控制器操作，例如添加和编辑

> ID：10706852
> 
> 赞同：0
> 
> 时间：2012-05-22T17:16:13.137
> 
> 标签：unit-testing, cakephp, cakephp-2.1

我正在尝试为文章控制器测试非常简单的添加操作。下面是我的代码。我不明白为什么这不起作用。

```
$this->Articles->Article->hasAny 
```

应该为我刚刚调用的 admin_add 操作和我刚刚添加的测试记录返回 true。但是它返回错误；

```
 class ArticlesControllerTestCase extends ControllerTestCase {

    /**
         * Test Admin Add
         *
         * @return void
         */
        public function testAdminAdd() {   

            #define sample passing data  
            $sampleDataPass = array(
                'Article'=>array(
                    'title'=>'---Test Article Add---',
                    'body'=>'---Test Article Add Body---',
                    'status_id'=>1,
                    'category_id'=>1,
                )
            );

            #test passing data
            $this->Articles->request->data = $sampleDataPass;
            $this->testAction('admin/articles/add', array('data'=>$sampleDataPass));
            $this->assertEquals($this->Articles->Article->hasAny(array('Article.title'=>'---Test Article Add---')), true); #fails here
            }
    }

class MastersController extends AppController {
/**
     * Admin Add
     * Default admin add method for all controllers
     * Adds a record to the models database table
     * Not calling add action becase of __setRootUserId action
     * @return void
     */
    protected function _admin_add() {
        if (!empty($this->request->data)) { 
            #save data
            $this->{$this->modelClass}->create();
            if ($this->{$this->modelClass}->save($this->request->data)) {
                return $this->Redirect->flashSuccess($this->modelClass.' saved.', isset($this->redirectSuccessUrl) ? $this->redirectSuccessUrl : array('action' => 'view', $this->{$this->modelClass}->id));
            } else {
                return $this->Redirect->flashWarning($this->modelClass.' could not be saved.', isset($this->redirectWarningUrl) ? $this->redirectWarningUrl : null);
            }
        }
        $this->_lists();
    }
}

class ArticlesController extends MastersController {
    /**
     * Admin Add
     * @see controllers/MastersController::_admin_add()
     * @return void
     */
    public function admin_add(){
        parent::_admin_add();       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:56:44.017

缓存`$this->Article`（`$this->controller`仅在调用 testAction 后有效）。如果您之前需要调用它，则需要`$this->generate()`在执行任何操作之前调用以获取控制器实例

# android - 安卓怎么改 宽度和高度

> ID：10706853
> 
> 赞同：36
> 
> 时间：2012-05-22T17:16:33.130
> 
> 标签：android, xml

我正在制作一个`<layer-list>`可绘制的。

我有我的背景图像，我希望第二层更小，但似乎我在我的`android:layer_width`and中写什么并不重要`android:layer_height`。

第二层大小还是一样的。

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <item
        android:drawable="@drawable/picuser" 
        android:layout_width="50dp"
        android:layout_height="50dp" />

    <item
        android:drawable="@drawable/ic_launcher" 
        android:layout_width="10dp"
        android:layout_height="10dp" />
</layer-list> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-12-19T13:00:01.343

这是一种解决方法，但它对我有用。
您可以使用填充以使第二个可绘制对象更小。

```
<item android:drawable="@drawable/circyle" />

<item
    android:drawable="@drawable/plus" 
    android:top="10dp"
    android:bottom="10dp"
    android:right="10dp"
    android:left="10dp" /> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-09-08T11:41:08.323

#### [TL;DR](https://stackoverflow.com/a/68564673/8154765)：请参阅[我更新、更简洁的答案](https://stackoverflow.com/a/68564673/8154765)。

* * *

实际上，与之前所说的不同，还有宽度和高度属性`<item>`。感谢@Entreco 发布了一个演示。
`android:width`and `android:height`for s 与and for `Drawable`s 类似，不同之处在于它们可以设置为 none或，但是您可以通过将属性设置为or （以匹配父级的宽度）或（以匹配父级的高度）来实现相同的行为.`android:layout_width``android:layout_height``View``match_parent``wrap_content``match_parent``android:gravity``left|right``start|end``top|bottom`

不幸的是，这些属性仅从 API 级别 23 开始可用。

但是，考虑到我建议的上述方法`match_parent`和属性可用于元素（必须放在 a 中）而不需要更新的 API 级别，您可以使用一个简单的解决方法：`android:width``android:height``<size>``<shape>`

```
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android">

    <item>
        <shape
            android:shape="rectangle">

            <size
                android:width="152dp"
                android:height="152dp"/>

            <solid
                android:color="#00FFFFFF"/>
        </shape>
    </item>

    <item>
        <bitmap
            android:gravity="left|right|top|bottom"
            android:src="@mipmap/ic_launcher"/>
    </item>
</layer-list> 
```

上述解决方案利用了已设置为匹配两个父级尺寸的已调整大小的`<item>`（带有透明的`<shape>`）和未调整大小的（带有 a 的）。因此，实际大小将由同一父级中唯一大小的大小决定。`<bitmap>``android:gravity``left|top|right|bottom``<bitmap>``<item>`

**编辑：**

感谢@Emil S 注意到上述解决方案在用作窗口背景时不起作用。我可以猜测，当系统创建一个由`android:windowBackground`属性指定的背景的窗口时，没有执行任何布局，因为还没有启动任何进程。因此，我认为，Android 最终会在屏幕尺寸上对可绘制对象进行光栅化，并将其拉伸以填充整个窗口。这将解释这是如何发生的。实际上，我想到的一个可能的解决方案是使用自定义可绘制对象作为窗口背景，但我还没有测试过，不幸的是，仅从 API 级别 24 开始才支持该解决方案。可以通过引用使用自定义可绘制对象的 XML 资源来实现，如下[所示](https://stackoverflow.com/a/44996958). 这样，问题应该得到解决，因为Android在显示窗口之前被迫启动应用程序进程，因此drawable应该正确布局，因为它知道窗口尺寸。然而，这将导致启动时几乎不明显但存在的延迟。

**编辑：**

@João Carlos 指出我的解决方案在使用自适应图标（由背景和前景组成的支持矢量可绘制对象的那些图标）时不起作用（因为它会导致循环继承）。但是，他的观点没有意义，因为自适应图标需要*API 26*：`android:width`并且`android:height`属性可以在启动屏幕或其他东西上使用，因为它们需要*API 23*。
因此，为了让任何东西在任何版本的 Android 中工作，您需要区分两个可绘制对象，前者用于*API < 23*，使用我发布的解决方案，后者用于*API >= 23*，使用两个属性正如我在这篇文章开头所说的那样。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-22T17:58:47.807

我希望这能让你朝着正确的方向前进：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/picuser"/>

    <item>

        <bitmap
            android:src="@drawable/ic_launcher"
            android:gravity="center" />
    </item>
</layer-list> 
```

正如您[在此处](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)看到的，`<item>`没有`layout_width`/`layout_height`属性。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-01-05T08:15:21.343

从 API 级别 23 及更高版本开始，您实际上可以设置项目的宽度和高度

```
<item
    android:drawable="@drawable/splash_logo"
    android:height="100dp"
    android:width="100dp"/> 
```

**注意：**使用`android:width`and`android:height`代替`android:layout_width`and`android:layout_height`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-10T15:57:11.953

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- The android:opacity=”opaque” line is critical in preventing a flash 
of black as your theme transitions. -->
<layer-list
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:opacity="opaque">

    <!-- The background color, preferably the same as your normal theme -->
    <item android:drawable="@android:color/white" />

    <item
        android:height="100dp"
        android:width="100dp"
        android:gravity="center">

        <bitmap
            android:src="@drawable/ic_launcher_bc_512"/>
    </item>
</layer-list> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-16T06:55:07.153

我已经尝试了很多，但我找不到一种可靠的方法来使徽标在 XML 布局中居中。最后，我找到了以下解决方法：

```
mToolbar.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            ImageView imageView = (ImageView)mToolbar.findViewById(R.id.logo);
            if (mToolbar == null)
                return;
            int toolbarWidth = mToolbar.getWidth();
            int imageWidth = imageView.getWidth();
            imageView.setX((toolbarWidth - imageWidth) / 2);
        }
    }); 
```

布局工具栏.xml：

```
<android.support.v7.widget.Toolbar 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/toolbar"
    style="@style/Toolbar"
    android:layout_width="match_parent"
    android:layout_height="@dimen/toolbar_height"                                                                   
    android:background="@drawable/toolbar_background"
    android:focusable="false"                                
    app:titleTextAppearance="@style/AppTheme.Toolbar.Title">

    <ImageView
        android:id="@+id/logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/toolbar_logo" />
</android.support.v7.widget.Toolbar> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-28T17:09:49.330

# 向后兼容的解决方案：

```
<item>
    <shape
        android:shape="rectangle">

        <size
            android:width="152dp"
            android:height="152dp"/>

        <solid
            android:color="#00FFFFFF"/>
    </shape>
</item>

<item>
    <bitmap
        android:gravity="left|right|top|bottom"
        android:src="@mipmap/ic_launcher"/>
</item> 
```

## 注意事项和解决方案：

1.  #### 作为窗口背景，这永远行不通

    *   ##### API等级≥24

        对于在窗口背景中使用，可能值得尝试自定义可绘制对象。可以以这样的样式引用[它们](https://stackoverflow.com/a/44996958)。
    *   ##### API 级别 < 24

        我还没有找到任何解决方案。
2.  #### 这也不适用于自适应图标

    *   ##### 参考[Entreco 的回答](https://stackoverflow.com/a/41480117/8154765)

        由于自适应图标需要 API 级别 26，因此可以使用`android:width`和`android:height`属性，从 API 级别 23 开始可用。

* * *

##### 了解更多信息，

*   参考[我之前的回答](https://stackoverflow.com/a/46115699/8154765)。

# linux - 为什么我的自定义 Perl 不能安装到预期的目录中？

> ID：10706855
> 
> 赞同：1
> 
> 时间：2012-05-22T17:16:40.927
> 
> 标签：linux, perl, installation, centos

我按照[本](http://www.popmartian.com/tipsntricks/2011/04/11/build-a-custom-perl-installation)教程中的说明构建了一个自定义版本的 Perl。

我最初按如下方式执行第 8 步：

```
./Configure -d -Dprefix=/custom/perl 
```

在我这样做之后，我做了`make`、`make test`和`make install`。

然后我决定我想要 /opt/perl 中的 Perl，所以我这样做`make clean`并重复了该过程，并使用适当的目录执行了第 8 步。仍然安装到 /custom 中。`./Configure`然后我完全删除了自定义并在步骤中使用适当的目录重新安装。仍然安装到 /custom 中。

我错过了什么？我希望 Perl 在 /opt 而不是 /custom。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:26:53.443

根据其`INSTALL`文件，您可以正确使用 5.16：“您还可以通过将“ `-Dprefix='/some/dir'`”添加到`Configure`args 来指定任何前缀位置。”

所以我怀疑`make clean`不会删除由`Configure`. 从新目录而不是“清理”目录尝试。或者至少尝试删除`config.sh`and `Policy.sh`。

[更新：有人指出`make distclean`可以用来做这个。当然，`git clean -dfx`如果您从 repo 而不是从 tarball 安装，也可以。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:19:51.527

使构建过程获取现有文件的`-d`选项。该选项将覆盖您现有的.`./Configure``config.sh``-Dprefix=...``prefix``config.sh``config.sh``prefix`

除此之外`make clean`，您还需要`rm config.sh`为了安全地重用 perl 构建目录。

如果您打算将构建过程中的设置复制到另一台机器，您还需要清除`Policy.sh`.

# c# - 在 CodeBehind 的嵌套 RadGrid 中绑定内部网格

> ID：10706856
> 
> 赞同：0
> 
> 时间：2012-05-22T17:16:42.207
> 
> 标签：c#, asp.net, telerik

嗨，我在玩 radgrid 上的嵌套功能。如何在 OnItemDataBound 事件中引用和绑定嵌套在父 Radgrid 中的 rad 网格。

我试过了

```
 var doc_grid = (RadGrid) item["doc_grid"].Controls[0];
   var doc_grid = (RadGrid)RadGrid1.FindControl("doc_grid"); 
```

我是否必须参考 NestView ...

这是代码的一般要点...

```
 <telerik:RadGrid ID="outerGrid" DataSourceID="SQL_Outer" runat="server" AutoGenerateColumns="True" OnItemDataBound="RowBound" DataKeyNames="MatNo"
        ShowGroupPanel="True">
        <MasterTableView DataSourceID="SQL_Outer" AllowMultiColumnSorting="True" DataKeyNames="MatNo" GroupLoadMode="Server">
            <Columns>
               <%--Stuff--%>
            </Columns>
            <NestedViewSettings DataSourceID="SqlDataSource2">
                <ParentTableRelation>
                    <telerik:GridRelationFields DetailKeyField="sysid" MasterKeyField="MatNo" />
                </ParentTableRelation>
            </NestedViewSettings>
            <NestedViewTemplate>

            <asp:Panel ID="NestedViewPanel" runat="server" CssClass="viewWrap">
               <div class="contactWrap">
                <telerik:RadGrid ID="doc_grid" runat="server">
                    <MasterTableView AutoGenerateColumns="False" DataKeyNames="sysid">
                      <%--Stuff--%>
                    </MasterTableView>
                </telerik:RadGrid>
                </div>
            </asp:Panel>

            </NestedViewTemplate>
        </MasterTableView>
    </telerik:RadGrid> 
```

代码隐藏：

```
protected void RowBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        var item = (GridDataItem)e.Item;
        var mat_no = item.GetDataKeyValue("MatNo");

        //!!!!I Can't figure out how to Reference the Inner RadGrid!!!!
        //var doc_grid = (RadGrid) item["doc_grid"].Controls[0];
        var doc_grid = (RadGrid)RadGrid1.FindControl("doc_grid");

        using (var con = new SqlConnection())
        {
            con.ConnectionString = ConfigurationManager.ConnectionStrings["TimeMatters11ConnectionString"].ConnectionString;
            var cmd = new SqlCommand("SELECT sysid, ccode, [desc], [View] = '<a href=\"'+ filename + '\">View Doc</a>' " +
                                     "FROM lntmu11.document " +
                                     "WHERE mat_no = @matno", con);
            cmd.Parameters.AddWithValue("@matno", mat_no); 
            con.Open();
            var reader = cmd.ExecuteReader();
            doc_grid.DataSource = reader;
            doc_grid.DataBind();
            con.Close();
        }
    } 
```

提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:35:07.090

您需要转换为 GridNestedViewItem 而不是 GridDataItem。

```
protected void RowBound(object sender, GridItemEventArgs e)
{
   if (e.Item is GridNestedViewItem)
   {
      GridNestedViewItem item = e.Item as GridNestedViewItem;
   }
} 
```

# mysql - 更改或重置 mysql 用户的密码

> ID：10706858
> 
> 赞同：2
> 
> 时间：2012-05-22T17:16:44.797
> 
> 标签：mysql, sql

用于重置密码的 Mysql 数据库的简单查询如何

我有我的示例代码，但它不起作用，我不知道如何使它工作

```
SELECT `User`, `Host`, Length(`Password`) FROM mysql.user
UPDATE mysql.user SET Password = PASSWORD('password') WHERE user = 'username'; 
```

它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T16:35:49.790

尝试这个：

```
SET PASSWORD FOR 'USER'@'HOST' = PASSWORD('PASSWORD'); 
```

或者，如果您想直接更新表，请不要忘记刷新权限。

```
UPDATE mysql.user SET Password = PASSWORD('PASSWORD') 
 WHERE user = 'USERNAME' AND Host='HOST';
FLUSH PRIVILEGES; 
```

最后，还有第三种使用 GRANT 的方法：

```
GRANT USAGE ON *.* TO 'USER'@'HOST' IDENTIFIED BY 'PASSWORD'; 
```

* * *

参考：[MySQL 5.7 手册](http://dev.mysql.com/doc/refman/5.7/en/set-password.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T17:18:58.573

您无需选择；只更新。

```
update mysql.user set password=PASSWORD("NEW-PASSWORD-HERE") where User='USER'; 
```

您的问题可能源于您的 select 语句后缺少分号。

# tfs - Team Foundation Server 基于还原的移动

> ID：10706862
> 
> 赞同：0
> 
> 时间：2012-05-22T17:17:04.863
> 
> 标签：tfs, database-migration, database-restore, tfs-to-tfs-migration-tool

我正在尝试将我的 Team Foundation Server 从虚拟机移动到新服务器，并且我找到了一篇关于这样做的好[文章](http://msdn.microsoft.com/en-us/library/ms404869.aspx)，但它需要很多步骤才能完成。

我发现[Team Foundation Power Tools](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f) 的*Team Foundation Server Backups*可以帮助自动化我们的 TFS 数据库备份，我想知道是否有工具可以帮助进行基于还原的移动。我找到了一个名为[Team Foundation Server 集成工具](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)的工具，我想知道是否有人可以给我一些反馈，说明这是否能满足我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:01:03.817

TFS 集成工具不是为您想要的，而是为了迁移来自其他 SCM/ALM 产品的数据。

不幸的是，您提到的程序是要遵循的程序，没有捷径可走。TFS Power Tools 的数据库备份功能将为您节省几分钟，但与等待您完成该过程的 2-4 小时相比，这并不算多。

祝你好运，慢慢来！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:41:54.823

您是否尝试过以下步骤：

备份： http: [//msdn.microsoft.com/en-us/library/ms253070 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms253070(v=vs.80).aspx)

恢复： http: [//msdn.microsoft.com/en-us/library/ms252458 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms252458(v=vs.80).aspx)

# android - 避免 Android 应用进入 onPause() 状态

> ID：10706866
> 
> 赞同：0
> 
> 时间：2012-05-22T17:17:26.317
> 
> 标签：android, augmented-reality, lifecycle, onpause

我正在编写一个使用 arToolkit 进行 AR 标签分析的 Android 应用程序（使用 AR 标签获取设备位置）。主要活动延伸到`andARActivity`谁延伸到`Activity`，所以我不能使它成为`Service`.

我正在尝试让 AR 应用程序在其他应用程序运行时在后台运行（使用来自第一个应用程序的数据）。问题是，如果我按下 HOME 按钮、BACK 按钮或者我从 eclipse 中强制执行第二次，它 `onPause()`会从 Activity 类启动方法。该方法使执行暂停，应用程序停止所有进程。

我试图实现一种`onPause()`避免执行 Activity 的方法`onPause()`。通常，如果在`the mainActivity` `onPause()`方法中我不调用`super.onPause()`，并且该方法不执行任何操作，它会在运行应用程序时退出到主屏幕，但它会停止并退出。

任何人都知道如何让应用程序在不暂停或使用服务类的情况下运行？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:21:29.480

最好的方法是 C 中的本机模块。线程、套接字等 - 一直在运行。

# objective-c - NSTableView 的简单尝试，它没有显示任何内容

> ID：10706867
> 
> 赞同：1
> 
> 时间：2012-05-22T17:17:29.183
> 
> 标签：objective-c, xcode, macos, cocoa, nstableview

我正在尝试使用 NSTableView （这是我第一次尝试），但它什么也没显示。
我创建了一个项目（ARC），我的 xib 中有一个表格视图，我将“数据源”和“委托”拖到我的 AppDelegate 对象中。
我在 AppDelegate.h 上有以下代码：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate, NSTableViewDelegate, NSTableViewDataSource>{
    NSMutableArray* array;
}

@property (assign) IBOutlet NSWindow *window;
@property (assign) IBOutlet NSTableView *tableView;

@end 
```

和 .m ：

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize tableView = _tableView;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [array addObject:@"1"];
    [array addObject:@"2"];
    [array addObject:@"3"];
    [array addObject:@"4"];
    [_tableView reloadData];
}

- (id)tableView:(NSTableView *) aTableView objectValueForTableColumn:(NSTableColumn *) aTableColumn row:(NSInteger) rowIndex{  
    return [array objectAtIndex:rowIndex];  
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)aTableView{
    return [array count];  
}

@end 
```

可能是什么错误？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:19:20.443

假设您发布的代码是完整的，问题似乎是您从未初始化`array`实例变量。将以下行添加到顶部`-applicationDidFinishLaunching:`：

```
array = [NSMutableArray array]; 
```

# php - 即使用户有效，页面也不接受用户登录

> ID：10706869
> 
> 赞同：0
> 
> 时间：2012-05-22T17:17:41.193
> 
> 标签：php, authentication, login, dreamweaver

我目前正在制作的网站上的用户登录功能一直存在一些问题。我在 index.php 页面上创建了一个登录表单表，并告诉它如果登录有效则转到 userindex.php，如果无效则转到 loginfail.html。然后使用dreamweavers页面授权工具我保护了页面userindex.php并告诉它将未经授权的用户重定向回index.php

我遇到的问题是，一旦有人输入正确的用户名和密码详细信息并按下提交，他们就会被发送到 index.php 。就好像它们被发送到 userindex.php 然后未经授权。但是，登录后键入 userindex.php 的地址会显示包含用户信息的完整页面，就好像他们已被批准一样。

这是有关此用户登录问题的两个页面的代码

索引.php

```
 <?php
        // *** Validate request to login to this site.
        if (!isset($_SESSION)) {
          session_start();
        }

        $loginFormAction = $_SERVER['PHP_SELF'];
        if (isset($_GET['accesscheck'])) {
          $_SESSION['PrevUrl'] = $_GET['accesscheck'];
        }

        if (isset($_POST['UsernmaeBox'])) {
          $loginUsername=$_POST['UsernmaeBox'];
          $password=$_POST['PasswordBox'];
          $MM_fldUserAuthorization = "";
          $MM_redirectLoginSuccess = "Userindex.php";
          $MM_redirectLoginFailed = "loginfail.html";
          $MM_redirecttoReferrer = false;
          mysql_select_db($database_dbname, $dbname);

          $LoginRS__query=sprintf("SELECT Username, Password FROM SGUsers WHERE Username=%s AND Password=%s",
            GetSQLValueString($loginUsername, "text"), GetSQLValueString($password, "text")); 

          $LoginRS = mysql_query($LoginRS__query, $Newsograph) or die(mysql_error());
          $loginFoundUser = mysql_num_rows($LoginRS);
          if ($loginFoundUser) {
             $loginStrGroup = "";

            if (PHP_VERSION >= 5.1) {session_regenerate_id(true);} else {session_regenerate_id();}
            //declare two session variables and assign them
            $_SESSION['MM_Username'] = $loginUsername;
            $_SESSION['MM_UserGroup'] = $loginStrGroup;       

            if (isset($_SESSION['PrevUrl']) && false) {
              $MM_redirectLoginSuccess = $_SESSION['PrevUrl'];  
            }
            header("Location: " . $MM_redirectLoginSucenter code here      if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
  if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
  $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
  $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
  header("Location: ". $MM_restrictGoTo); 
  exit;
}
?> 
```

用户索引.php

```
<?php
if (!isset($_SESSION)) {
  session_start();
}
$MM_authorizedUsers = "";
$MM_donotCheckaccess = "true";

// *** Restrict Access To Page: Grant or deny access to this page
function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
  // For security, start by assuming the visitor is NOT authorized. 
  $isValid = False; 

  // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
  // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
  if (!empty($UserName)) { 
    // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
    // Parse the strings into arrays. 
    $arrUsers = Explode(",", $strUsers); 
    $arrGroups = Explode(",", $strGroups); 
    if (in_array($UserName, $arrUsers)) { 
      $isValid = true; 
    } 
    // Or, you may restrict access to only certain users based on their username. 
    if (in_array($UserGroup, $arrGroups)) { 
      $isValid = true; 
    } 
    if (($strUsers == "") && true) { 
      $isValid = true; 
    } 
  } 
  return $isValid; 
}

$MM_restrictGoTo = "index.php";
if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
  $MM_qsChar = "?";
  $MM_referrer = $_SERVER['PHP_SELF'];
  if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
  if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
  $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
  $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
  header("Location: ". $MM_restrictGoTo); 
  exit;
}
?> 
```

非常感谢您的阅读。我花了很长时间试图弄明白，没想到 Dreamweaver 会让它变得如此混乱！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T18:01:58.467

这里有两个可能的错别字。你有 UsernmaeBox 而不是 UsernameBox。当然，除非你打算这样做。

```
if (isset($_POST['UsernmaeBox'])) {
      $loginUsername=$_POST['UsernmaeBox']; 
```

# wpf - WPF 中的正确数据建模和可视化

> ID：10706870
> 
> 赞同：0
> 
> 时间：2012-05-22T17:17:41.523
> 
> 标签：wpf, data-binding, data-modeling, data-visualization

这个主题可能看起来很广泛，但我正在寻找数据驱动应用程序的适当架构和 WPF 技术的概述。

我正在构建一个连接到 Access 数据库的数据密集型应用程序。在任何给定时间，屏幕上都有多个数据视图，并且它们都会随着用户选择与任何视图交互而动态更新。其中一个视图是 3D 地图。其他视图包括几个图形 (D3)、一个数据网格和一个画布，我使用矩形和圆形在其上以编程方式绘制数据（在我的画布中覆盖 OnRender）。

我目前的数据模型只是我的第一次尝试，而且看起来很慢。基本上，当用户与画布交互时，会向 Access 数据库发送一个新查询，该数据库返回一组新数据以在所有视图中绘制（使用 OleDBDataAdapter）。这很慢。特别是在放大和缩小画布时。

我希望能够与数据库实时交互，并在所有视图中绘制数据而没有任何延迟。如果 WPF 无法实现这种应用程序，最好早点知道这一点。但我认为我只是做错了事。

所以我希望有人以前解决过这种问题，并且可以帮助我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T17:23:03.023

我开始这个项目已经快两年了。我们聘请了一位新的 WPF 开发人员来帮助我以正确的方式启动它，从那时起，它已成为我公司最成功的软件项目之一。在了解了我所学的内容之后，我现在知道如何正确回答我自己的问题。所以这个答案适用于两年前的我，其他人刚开始 WPF 项目，不知道他们在做什么。

**我对MVVM**一无所知**在开始这个项目之前，事实上，当我第一次提出这个问题时，甚至没有人向我提及这一点。这对于任何 WPF 项目都是必须的。如果您虔诚地遵循它，它将使您的代码库井井有条且可测试。**

 **对于我的项目，**模型**是与数据库对话的层。最初的计划是让数据库始终保持打开状态，并在需要数据时不断查询。最后，数据量太小了，我们只是将其加载到内存中并关闭数据库。无论您如何与数据交互，程序的其余部分都不关心数据的来源。它只是向模型询问数据，然后提供服务。

**ViewModel**是每个 UI 部分的后端。例如，如果我正在显示一个图表，则 ViewModel 是包含需要在该图表上显示的数据的对象。ViewModel 与 Model 对话以获取它需要的信息。这是用 C# 编写的。

**观点**_**是包含图形的 UI 组件这是用 XAML 编写的，并使用数据绑定与 ViewModel 保持同步/通信。数据绑定是整个 MVVM 模式的关键。**

 **一个简单的数据可视化程序可能有 10 个不同的视图，每个视图都有自己的视图模型。（我建议将每个视图和视图模型放在各自单独的文件中。事实上，我建议将您的整个项目分成几个较小的项目：一个用于 UI（所有 XAML 文件），一个用于 ViewModel（C# 后端代码)，一个用于模型（数据层，可能是 C#），另一个用于通用实用程序等）

就数据可视化而言，我们最终使用了 Visiblox，因为它的速度和易用性。Visiblox 图包含在它们各自的视图中，数据绑定到视图模型。除了 Visiblox 的东西，我们还使用了 DataGrids 和标准输入/输出控件。它们都只是用于显示数据的 UI 组件。

这种架构的好处是 ViewModel 简单地表示数据，而 View 表示该数据的可视化。它们彼此完全分离，这使得单元测试变得轻而易举。

我建议使用现有的 MVVM 框架之一，或者像我们一样编写自己的框架。

显然，有一本教科书的信息可以添加到这个答案中。这是对 MVVM 工作原理的简化解释，以及两年前我将如何回答自己的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:03:09.723

我怀疑您当前正在做的是运行一个新查询，然后根据数据创建新的“视图模型”对象，这随后会导致使用数据模板创建新的视觉元素。随着您增加数据集的大小并增加可视化的复杂性，这可能会变得相当缓慢。

假设您的查询返回具有一致结构的数据（在每次查询之后以几乎相同的方式建模），您可能能够保留对象结构，因此仅更改视图模型的属性，而不是构造一个全新的对象每次的层次结构。这要快得多，但需要您做一些中间工作来根据查询结果更新您的视图模型，而不是简单地为查询结果创建一个全新的视图模型。

详细信息将非常针对您的特定问题。也有可能我完全误解了你在做什么。****

# apache - .htaccess 存在时出现“禁止”错误？

> ID：10706872
> 
> 赞同：0
> 
> 时间：2012-05-22T17:17:52.507
> 
> 标签：apache, nginx, apache2

我正在使用 nginx 代理运行 Apache2 网络服务器，只要在我的文件夹中放置一个 .htaccess，我就会得到

```
Forbidden

You don't have permission to access blabla on this server. 
```

在我的 httpd.conf 我已经 `AllowOverride All`设置。

.htaccess 的内容无关紧要，只要文件存在，我就会收到 Forbidden 错误。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:21:17.800

它绝对取决于您的 .htaccess 包含的内容.. HTTP/1.0 Forbidden 但是让我认为您要么有

1.  没有`DirectoryIndex`礼物，或者你覆盖它 - 并且还有`Options -Indexes`
2.  您有一些符号链接，并且`Options +FollowSymlinks`在您的本地 htaccess 中搞砸了

为了使正确的符号链接与 apache 一起工作，包含目录必须具有 apache 用户的执行权限。

我的 drupal /sites/ 文件夹的示例输出`ls -la`：

drwxr-xr- **x** 4 mschr root 4096 5 月 9 日 15:41。

drwxr-xr-x 9 mschr apache 4096 5 月 22 日 21:18 ..

lrwxrwxrwx 1 root root 16 5 月 4 日 08:16 all -> /etc/drupal/all/

# windows-phone-7 - 仅从日期选择器获取日期

> ID：10706876
> 
> 赞同：0
> 
> 时间：2012-05-22T17:17:54.313
> 
> 标签：windows-phone-7, windows-phone-7.1

如何仅获取日期，例如：2011-03-04 FROM A DATEPICKER 在 Visual Studio for windows phone 的 windows phone 开发环境中？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T17:24:40.493

假设您的 DatePicker 控件名为 MyDatePicker，只需使用以下命令：

```
var dateOnly = MyDatePicker.Value.Value.Date; 
```

或者你的意思是每个说控件中日期的外观？

如果是这种情况，您有 DatePicker 控件的 ValusStringFormat 属性，只需将其设置为`{0:d}`或类似的东西（您可以[在此处查看](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)标准日期时间格式字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T07:24:30.087

var date = DatePicker1.Value.Value.Date;

```
 MessageBox.Show(date.ToShortDateString()); 
```

如果你想独处

```
 var date = DatePicker1.Value.Value.Date;
        MessageBox.Show(date.ToShortTimeString()); 
```

# android - Android：同时滚动/翻动 3 个列表视图

> ID：10706885
> 
> 赞同：0
> 
> 时间：2012-05-22T17:18:40.620
> 
> 标签：android

如何同时滚动具有不同行布局的三个列表视图？覆盖 onScroll() 不会给出确切的行为，因为 onScroll 被多次调用以进行单个滚动并且不可靠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:03:08.207

我终于找到了答案：覆盖 listview 类的 onTouchEvent() 并且不要调用 super.onTouchEvent()。而是计算 MotionEvent.ACTION_MOVE 的 y 位置之间的差异，并通过为每个列表调用 smoothScrollBy(distance,time) 将三个列表一起滚动。您可以根据 MotionEvent.ACTION_UP 的要求对三个列表进行微调。

# visual-studio - 在 Visual Studio 安装项目中不使用自定义操作的原因

> ID：10706888
> 
> 赞同：2
> 
> 时间：2012-05-22T17:18:45.437
> 
> 标签：visual-studio, wix, setup-project, custom-action

今天早些时候，我与某人讨论，我发现您可以在 Visual Studio 安装项目中使用自定义操作来执行您通常使用 InstallUtil 运行的您自己的安装程序类（这对于我正在处理的新项目非常有用）。

该人建议我不惜一切代价避免自定义操作，并指出当您需要使用自定义操作时，您需要提出自己的解决方案，并说这是很多人都认可的事情，并且已经存在很长时间了时间。

我进行了搜索，但找不到任何人对此表示担忧的单个论坛，我只想知道是否有人知道不应使用自定义操作的任何原因？

我想确保在我的新项目中使用最可靠的解决方案，这让我对我目前的方法有些担忧，但是与我讨论它的人无法给我一个例子来说明它为什么不好想法，所以我只想确认他们所说的是否成立。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:35:05.820

我有很多原因，但这是一个漫长而主观的对话。这里有几个链接可以帮助您入门。总而言之，要记住的是维护 MSI 的声明性本机（作者表数据驱动，事务性自定义操作），并且真的很难不将脆弱性引入您的安装程序。由于 InstallUtil / Installer 类自定义操作的设计，它们只是一个非启动器。改用 WiX 的 DTF（部署工具基金会）托管的自定义操作项目类型（C#/VB.NET）。

[托管代码 CustomActions，途中没有支持，这就是原因](http://robmensching.com/blog/posts/2007/4/19/Managed-Code-CustomActions-no-support-on-the-way-and-heres)

[自定义操作（通常）是承认失败](http://robmensching.com/blog/posts/2007/8/17/Zataoca-Custom-actions-are-generally-an-admission-of-failure)

请注意，对于第一个链接，由于 DTF 的发布，“技术”部分是 OBE。IMO 的战略部分有些乐观，并在第二个链接中进行了更多讨论。这也是我自己博客的一些背景：

[微星与.NET](http://blog.deploymentengineering.com/2006/07/msi-vs-net.html)

[意识形态的代价和伟大的新希望](http://blog.deploymentengineering.com/2008/05/price-of-ideology-and-great-new-hope.html)

[部署工具基础 (DTF) 托管的自定义操作](http://blog.deploymentengineering.com/2008/05/deployment-tools-foundation-dtf-custom.html)

# ruby-on-rails - 文件列到载波转换

> ID：10706890
> 
> 赞同：0
> 
> 时间：2012-05-22T17:19:00.460
> 
> 标签：ruby-on-rails, ruby, carrierwave

我正在重建一个 2005 年在 rails 2.0.1 上创建的站点。它使用 file_column 进行图像管理。我想将carrierwave与AWS3一起使用。有没有人进行过这种转换？

有超过 50k 图像需要传输和加载。

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:19:44.583

我正在研究与此类似的解决方案。我有一个使用 File_column 的 Rails 1.1.6 项目。

我不明白的部分是file_column存储背后的逻辑。它在目录中存储文件的方式似乎完全随机。

我正在编写一个脚本，将所有文件移动到根文件夹中，清除所有琐碎的子目录。然后它将获取文件名并执行查找以找出资产属于哪个记录。然后我将重新上传每个文件。

# c# - 在从 ListView 继承的类上使用 DoubleClick 事件

> ID：10706891
> 
> 赞同：1
> 
> 时间：2012-05-22T17:19:03.397
> 
> 标签：c#, winforms

我有一个名为 MyClass 的类，它继承自 ListView...所以基本上它是一个列表视图，我可以在表单等上使用它。我已经覆盖了这个类的拖放事件，所以现在如果我放两个表单上的这些控件并将项目从一个拖动到另一个，它会做得很好。我的问题是 DoubleClick，如何在此类上实现 DoubleClick()？因此，当后来我将其中两个控件放在一个表单上并双击其中一个上的一个项目时，它会将其移动到另一个控件...甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:32:35.347

我很好奇这是如何实现的，所以我尝试了一下。我创建了一个新的 Windows 窗体项目并创建了一个 myClass:ListView（请参见下面的代码）然后我将两个 if 控件添加到窗体，并使用姊妹属性将它们绑定在一起（我并没有真正将其写为属性）

我在 myClass1 中添加了 1 个项目，在 myClass2 中添加了 2 个项目。当我双击它们中的任何一个时，它们会移动到另一个列表视图。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        myClass1.sister = myClass2;
        myClass2.sister = myClass1;
    }
}

public class myClass : ListView
{
    //This is where we will store the information about the sister Control
    private myClass _sister;
    //**EDIT**  I changed sister into a property and now it is selectable
    //from the designer.
    public myClass sister { get { return _sister; } set { _sister = value; } }

    public myClass()
    {
    }
    //here is where we override the OnDoubleCLick Event
    protected override void OnDoubleClick(EventArgs e)
    {
        //Make sure this control has a sister 
        if (sister != null)
        {
            //add a temporary storage location for the selected Item
            ListViewItem item = this.SelectedItems[0];
            //Remove the Item from the clicked List
            this.Items.Remove(item);
            //Add the Item to the sister List
            ((myClass)sister).Items.Add(item);
        }
        base.OnDoubleClick(e);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:27:05.543

你试过这个吗？：

```
private void listView1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        ListView source = sender as ListView;
        ListViewItem item =  source.HitTest(e.Location).Item;
        if (item != null)
        {
            MessageBox.Show("Item " + item.Text + " was double clicked on " + source.Name );
        }
    } 
```

发件人会告诉您双击了哪个列表视图，并且由于您已经实现了拖放，我想您应该能够以相同的方式实现传输。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:27:21.600

这可以通过访问`Parent`控件并通过它来实现`Controls`：

```
var allMyClasses = this.Parent.Controls.OfType<MyClass>().ToList();

int index = allMyClasses.IndexOf(this);

MyClass target = null;
if (index == allMyClasses.Count - 1)
{
    target = allMyClasses[0];
}
else if (allMyClasses.Count != 0)
{
    target = allMyClasses[index + 1];
} 
```

我不是 100% 确定确切的代码（未经测试），但一般技术应该工作得很好。当然，您需要对 进行空检查`Parent`，并且您需要将这些详细信息粘贴到 MouseDoubleClick 中，但它应该没有问题。

# java - Android/Java：onProgressUpdate() 没有被调用？

> ID：10706897
> 
> 赞同：8
> 
> 时间：2012-05-22T17:19:14.203
> 
> 标签：java, android, breakpoints

我在这里读过类似的帖子，甚至用谷歌搜索但没有解决方案。

onProgressUpdate() 只是没有被调用。

这是代码：

```
public class DoHardWork extends AsyncTask {

    @Override
    protected Object doInBackground(Object... params) {

        publishProgress("Requesting XML data");
        this.requestData();

        publishProgress("Returning results");
        this.returnResults();

        return null;
    }

    protected void onProgressUpdate(String text) {
        super.onProgressUpdate(text);
        MainActivity.setLog(text);
    }
} 
```

我尝试在 onProgressUpdate() 中设置断点，但它从未被调用过。就像代码被忽略了一样。

有人遇到了类似的问题，结果只是日食在惹他生气，但我尝试重新启动它但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T17:33:24.340

我认为您错过了代码中的某些内容。试试这个：

```
private class DoHardWork extends AsyncTask<Void, String, Long> {
    protected Long doInBackground(Void... urls) {
         publishProgress("Requesting XML data");
         this.requestData();

         publishProgress("Returning results");
         this.returnResults();

         return null;
    }

    protected void onProgressUpdate(String... progress) {
        super.onProgressUpdate(progress);
        MainActivity.setLog(progress[0]);
    }

} 
```

# ruby-on-rails - 在 Rails 中，如何使 :mobile 视图在找不到时回退默认视图？

> ID：10706901
> 
> 赞同：4
> 
> 时间：2012-05-22T17:19:21.463
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这个问题是我之前未回答的问题的后续：[ActionView::MissingTemplate: Missing template (Trying to render nonexistent :mobile format)](https://stackoverflow.com/questions/10526214/actionviewmissingtemplate-missing-template-trying-to-render-nonexistent-mob/10526344#comment13870709_10526344)

由于这似乎不是 Rails 方法的共识，有什么方法可以在格式不可用`:html`时从移动设备访问以呈现默认值？`:mobile`（如果存在`:mobile`视图，则应优先于非移动格式的视图）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:16:42.443

假设您有一个`mobile_request?`控制器实例方法来检测移动请求，那么您应该能够设置格式回退链：

```
# application_controller.rb
before_filter :set_request_format, :set_format_fallbacks

respond_to :html, :mobile # etc

def set_request_format
  request.format = :mobile if mobile_request?
end

def set_format_fallbacks
  if request.format == :mobile
    self.formats = [:mobile, :html]
  end
end 
```

这应该可行，但显然并不完全。 [https://github.com/rails/rails/issues/3855](https://github.com/rails/rails/issues/3855) 如果你有一个移动模板，格式似乎被锁定，它不会找到只有 html 的部分。

希望它会以某种方式修复。同时，您可以将此 <% controller.set_format_fallbacks %> 放入每个模板（哎哟）或编写自己的解析器。 [http://jkfill.com/2011/03/11/implementing-a-rails-3-view-resolver/](http://jkfill.com/2011/03/11/implementing-a-rails-3-view-resolver/)

还请看：

[移动 mime 类型可以在 Rails 中回退到“html”吗？](https://stackoverflow.com/questions/4062518/can-a-mobile-mime-type-fall-back-to-html-in-rails)

[在 rails 3.1 中更改视图格式（提供移动 html 格式，回退到普通 html）](https://stackoverflow.com/questions/8863257/changing-view-formats-in-rails-3-1-delivering-mobile-html-formats-fallback-on/9493617#9493617)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T17:57:56.997

我需要同样的东西。我对此进行了研究，包括这个堆栈溢出问题（以及另一个类似的问题），并遵循了[https://github.com/rails/rails/issues/3855](https://github.com/rails/rails/issues/3855)上的 rails 线程（如本问题中所述）并遵循了它的线程/要点/宝石。

这就是我最终使用 Rails 3.1 和引擎所做的工作。此解决方案允许您将 *.mobile.haml（或 *.mobile.erb 等）放置在与其他视图文件相同的位置，而无需 2 个层次结构（一个用于常规，一个用于移动）。

# 引擎和准备代码

在我的“基础”引擎中，我添加了这个`config/initializers/resolvers.rb`：

```
 module Resolvers
      # this resolver graciously shared by jdelStrother at
      # https://github.com/rails/rails/issues/3855#issuecomment-5028260
      class MobileFallbackResolver < ::ActionView::FileSystemResolver
        def find_templates(name, prefix, partial, details)
          if details[:formats] == [:mobile]
            # Add a fallback for html, for the case where, eg, 'index.html.haml' exists, but not 'index.mobile.haml'
            details = details.dup
            details[:formats] = [:mobile, :html]
          end
          super
        end
      end
    end

    ActiveSupport.on_load(:action_controller) do
      tmp_view_paths = view_paths.dup # avoid endless loop as append_view_path modifies view_paths
      tmp_view_paths.each do |path|
        append_view_path(Resolvers::MobileFallbackResolver.new(path.to_s))
      end
    end 
```

然后，在我的“基础”引擎的应用程序控制器中，我添加了一个移动设备？方法：

```
 def mobile?
        request.user_agent && request.user_agent.downcase =~ /mobile|iphone|webos|android|blackberry|midp|cldc/ && request.user_agent.downcase !~ /ipad/
    end 
```

还有这个`before_filter`：

```
 before_filter :set_layout

    def set_layout
      request.format = :mobile if mobile?
    end 
```

最后，我将其添加到`config/initializers/mime_types.rb`：

```
 Mime::Type.register_alias "text/html", :mobile 
```

# 用法

现在我可以拥有（在我的应用程序级别，或在引擎中）：

*   `app/views/layouts/application.mobile.haml`
*   并且在任何视图中都是 a`.mobile.haml`而不是`.html.haml`文件。

如果我在任何控制器中设置它，我什至可以使用特定的移动布局： layout 'mobile'

这将使用`app/views/layouts/mobile.html.haml`（甚至`mobile.mobile.haml`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:31:33.423

尝试这个：

```
if File.exists?('app/views/object/mobile.file.erb')
  render :mobile
else
  render :html
end 
```

# javascript - 用 jQuery 检查哪个元素被点击了

> ID：10706903
> 
> 赞同：36
> 
> 时间：2012-05-22T17:19:23.240
> 
> 标签：javascript, jquery

我正在尝试使用“if”语句来确定单击了哪个元素。

基本上我正在尝试编写以下代码：

```
if (the element clicked is '#news_gallery li .over') {
    var article = $('#news-article .news-article');
} else if (the element clicked is '#work_gallery li .over') {
    var article = $('#work-article .work-article');
} else if (the element clicked is '#search-item li') {
    var article = $('#search-item .search-article');
}; 
```

什么是正确的 jQuery 语法？提前谢谢了。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-05-22T18:05:24.777

用这个，我想我能明白你的想法。

**现场演示：http:** [//jsfiddle.net/oscarj24/h722g/1/](http://jsfiddle.net/oscarj24/h722g/1/)

```
$('body').click(function(e) {

    var target = $(e.target), article;

    if (target.is('#news_gallery li .over')) {
       article = $('#news-article .news-article');
    } else if (target.is('#work_gallery li .over')) {
       article = $('#work-article .work-article');
    } else if (target.is('#search-item li')) {
       article = $('#search-item .search-article');
    }

    if (article) {
       // Do Something
    }
});​ 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-22T17:49:07.720

所以你这样做有点倒退。通常你会做这样的事情：

```
​&lt;div class='article'>
  Article 1
</div>
<div class='article'>
  Article 2
</div>
<div class='article'>
  Article 3
</div>​ 
```

然后在你的 jQuery 中：

```
$('.article').click(function(){
    article = $(this).text(); //$(this) is what you clicked!
    });​ 
```

当我看到诸如 , 之类的东西`#search-item .search-article`时`#search-item .search-article`，`#search-item .search-article`我感觉你过度指定了你的 CSS，这使得编写简洁的 jQuery 变得非常困难。如果可能的话，应该避免这种情况。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-05T17:08:03.173

[vpiTriumph 的回答](https://stackoverflow.com/a/10707283/2162226)很好地列出了细节。
当您要访问的数据集有唯一的元素 ID 时，这是一个方便的小变体：

```
$('.news-article').click(function(event){    
    var id = event.target.id;
    console.log('id = ' + id); 
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-20T20:02:42.103

另一种选择是`tagName`利用`e.target`. 它在这里并不完全适用，但假设我有一个应用于 a`DIV`或`A`标签的类，我想查看该类是否被点击，并确定它是被点击的`DIV`还是`A`被点击的。我可以做类似的事情：

```
$('.example-class').click(function(e){
  if ((e.target.tagName.toLowerCase()) == 'a') {
    console.log('You clicked an A element.');
  } else { // DIV, we assume in this example
    console.log('You clicked a DIV element.');
  }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-22T17:27:41.423

jQuery 的基础是能够通过选择器在 DOM 中查找项目，然后检查这些选择器上的属性。在此处阅读选择器：

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

但是，根据单击的内容为应该发生的不同功能的单击事件创建事件处理程序会更有意义。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-30T01:27:34.837

希望这对你有用。

```
$(document).click(function(e){
    if ($('#news_gallery').on('clicked')) {
        var article = $('#news-article .news-article');
    }  
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-22T17:22:31.613

```
$("#news_gallery li .over").click(function() {
    article = $("#news-article .news-article");
}); 
```

# graph-algorithm - 图算法

> ID：10706904
> 
> 赞同：1
> 
> 时间：2012-05-22T17:19:27.060
> 
> 标签：graph-algorithm

设 G 是一个有 n 个顶点的图，其中没有一个是孤立的，并且有 n-1 条边，其中 n ≥ 2。证明 G 至少包含两个 1 次顶点。

我已经通过使用属性**总和度数 = 2|E|尝试了这个问题** . 这个问题可以用鸽子洞原理解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:43:45.063

我想不出用鸽子洞原理解决这个问题的明智方法，我会这样做：

度数之和 = 2n - 2 = 2|E|

由于没有顶点可以被隔离，所有顶点的度数必须至少为 1，因此有 n - 2 个“备用”边端要附加。n-2 个东西可以放入 n 个位置意味着至少 2 个必须留空（这类似于鸽洞原理，但有点相反），因此至少 2 个顶点的度数必须为 1。

我认为你最好在这里问这种问题：[https ://math.stackexchange.com/](https://math.stackexchange.com/)

# python - ActivePython 2.7.2 - 如何将时间安装为内置包？

> ID：10706905
> 
> 赞同：1
> 
> 时间：2012-05-22T17:19:28.997
> 
> 标签：python, activepython, built-in

我已经在我的 linux 机器上安装了[ActivePython 2.7.2 。](http://downloads.activestate.com/ActivePython/releases/2.7.2.5/ActivePython-2.7.2.5-linux-x86_64.tar.gz)我需要`time`内置模块而不是从`lib-dynload/time.so`

在搜索 Stackoverflow 档案时，我[发现](https://stackoverflow.com/questions/314749/python-2-5-2-and-solaris-8-gcc-3-4-2-build-issues)您可以通过取消注释来做到这一点

```
time timemodule.c 
```

在`Modules/Setup.dist`python[源代码](http://www.python.org/ftp/python/2.7.2/Python-2.7.2.tgz)树中

有人能指出如何在 ActivePython 中做到这一点吗？

# apache - .htaccess 中的 Require 指令可防止显示目录

> ID：10706911
> 
> 赞同：4
> 
> 时间：2012-05-22T17:20:33.710
> 
> 标签：apache, .htaccess, apache2, webserver, authorization

我有以下目录层次结构

```
-root_folder
   .htaccess
   -sub_folder
       .htaccess 
```

sub_folder 中 .htaccess 文件的内容：

```
AuthType Basic
AuthName "webdav"
AuthUserFile /var/www/test/passwd.dav
Require user test 
```

`root_folder`包含以下内容`.htaccess`

```
Satisfy any
Order deny,allow
Deny from all
Allow from env=ALLOWED
SetEnvIfNoCase Request_URI "^/+webdav/root_folder/?$" ALLOWED 
```

请注意，我正在使用`WebDav`.

它设置在`/etc/apache2/conf.d/webdav`. 该文件包含以下内容：

```
Alias /webdav /home/user/projects/test/public
<Location /webdav/>
    Order Allow,Deny
    Allow from #list of ips here
    DAV On
    PassengerEnabled off
    LimitXMLRequestBody 0
    Options Indexes FollowSymLinks
</Location> 
```

问题是当我尝试`localhost/webdav/root_folder/`使用浏览器访问文件夹时，`sub_folder`没有显示。但是当我删除`Require user some_user`指令时，`sub_folder`它会显示在列表中。`localhost/webdav/root_folder/sub_folder/`如果我在启用指令时尝试输入，`Require user`我会被要求输入登录名和密码，如果我输入正确的凭据，一切正常。

是否可以列出目录中的所有内容，同时`require user` 在 sub_folders 内的 .htaccess 文件中使用指令来控制对它们的访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T22:01:41.913

在您的 root_folder （我相信那是您的`$DOCUMENT_ROOT`）中，创建具有以下内容的 .htaccess 文件：

```
SetEnvIfNoCase Request_URI "^/*$" ALLOWED

Satisfy        any
Order          deny,allow
Deny from      all
Allow from     env=ALLOWED 
```

如果`root_folder`不是 $DOCUMENT_ROOT 则使用：

```
SetEnvIfNoCase Request_URI "^/+root_folder/?$" ALLOWED 
```

作为第一行。

# php - YII 框架，格式/缩进输出

> ID：10706915
> 
> 赞同：0
> 
> 时间：2012-05-22T17:20:57.123
> 
> 标签：php, html, yii, indentation

我刚开始使用 Yii 框架，但遇到了一些麻烦。我已经设置好布局和视图，当我在控制器中渲染视图时它工作正常，输出出现在布局等内部，但是当我查看源代码时，没有任何缩进。有什么办法可以缩进我的 HTML 的最终输出，以便更容易阅读和查找错误...

**控制器/SchedulingController.php**

```
<?PHP
class SchedulingController extends CController
{   
    public function actionStaffCalendar($calendarID)
    {
        $this->render('staff_calendar');
    }
} 
```

**视图/布局/main.php**

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Website - <?PHP echo $this->pageTitle; ?></title>

    <script type="text/javascript" src="<?PHP echo Yii::app()->params['webRoot'] . '/assets/js/jQuery.js'; ?>"></script>
</head>
<body>

<?PHP echo $content; // views/scheduling/staff_calendar.php ?>

</body>
</html> 
```

**视图/调度/staff_calendar.php**

```
staff calendar test.... 
```

**编辑** 由于某种原因，当我在谷歌浏览器中查看源代码时，我所有的 HTML 似乎都在一行上，但是一旦我将它复制到文本编辑器中，它就会正确缩进。源在 Mozilla Firefox 中看起来很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:43:17.447

不，不可能（甚至出于性能原因也不合理）格式化您的输出 HTML 源，因为

*   Yii 生成的 html 控件不知道它们在你的 html 树中的深度
*   您可以格式化自己的视图文件，以便它们与您的布局正确嵌套，但我宁愿让它在源代码级别可读，因为
*   您可以使用 ie Google Chromes Developer Tools (Ctrl-Shift-I) 来查看格式化的源代码

或者，如果您真的想要这样的东西：

```
$html = $this->render('index',array('model'=>$model,), true);
echo formatHtml($html); 
```

# javascript - TinyMCE 呈现标题标签

> ID：10706916
> 
> 赞同：0
> 
> 时间：2012-05-22T17:21:04.333
> 
> 标签：javascript, html, tinymce

我目前正在将 TinyMCE 的旧版本更新到新版本，因为它修复了一些令人讨厌的错误。不幸的是，TinyMCE 显然现在呈现已编辑文档的标题标签并将它们作为新元素添加到页面中。因此，原始文件会变得混乱，没有经验的用户会感到困惑。如何关闭此行为？

配置 TinyMCE 的脚本：

```
<script language="javascript" type="text/javascript" src="public/script/tiny_mce/tiny_mce.js"></script>
<script language="javascript" type="text/javascript">
    tinyMCE.init({
        language : "de",
        mode : "textareas",
        theme : "advanced",
        plugins : "table,save,advhr,advimage,advlink,emotions,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen",
        theme_advanced_buttons1_add_before : "save,newdocument,code,separator",
        theme_advanced_buttons1_add : "fontselect,fontsizeselect",
        theme_advanced_buttons2_add : "separator,insertdate,inserttime,preview,zoom,separator,forecolor,backcolor",
        theme_advanced_buttons2_add_before: "cut,copy,paste,pastetext,pasteword,separator,search,replace,separator",
        theme_advanced_buttons3_add_before : "tablecontrols,separator",
        theme_advanced_buttons3_add : "emotions,advhr,separator,print,separator,ltr,rtl,separator",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_disable : "help,cleanup,image",
        content_css : 'public/style.css',
        plugi2n_insertdate_dateFormat : "%Y-%m-%d",
        plugi2n_insertdate_timeFormat : "%H:%M:%S",
    });
</script> 
```

# xslt - 为什么我的 XSL 在此 XML 中找不到任何要处理的内容？

> ID：10706919
> 
> 赞同：0
> 
> 时间：2012-05-22T17:21:12.180
> 
> 标签：xslt, cognos

为什么我的 XSL 在此 XML 中找不到任何要处理的内容？我正在尝试将 cognos xml 报告输出转换为另一种形式（是的，我知道 cognos 生成 html，但我需要其他东西）。它只会产生单词“Caption：”并停止。

这是我的 XSL：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://developer.cognos.com/schemas/xmldata/1/" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">

    <xsl:template match="/">

    <xsl:template match="rows">
        <xsl:apply-templates select="rowEdge"/>
    </xsl:template>

    <xsl:template match="rowEdge">
        <b>Caption:</b> <xsl:value-of select="caption"/><br/>
        <xsl:if test="@id">
            <b>id:</b> <xsl:value-of select="@id"/><br/>
        </xsl:if>
        <xsl:if test="rowEdge">
            <xsl:apply-templates select="rowEdge"/>
        </xsl:if>
    </xsl:template>

    <html>
        <head><title>%s</title></head>
        <body>
            <xsl:apply-templates select="dataset/crosstab/rows"/>
        </body>
    </html>

    </xsl:template>
</xsl:stylesheet> 
```

这是 XML（我不得不删除一些，但应该给出一个想法）：

```
<?xml version="1.0" encoding="utf-8" ?> 
 <dataset xmlns="http://developer.cognos.com/schemas/xmldata/1/" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
 <crosstab>
 <values>
  <value row="R1" col="C1" xs:nil="true" /> 
  <value row="R1" col="C2" xs:nil="true" /> 
  <value row="R1" col="C3" xs:nil="true" /> 
  <value row="R1" col="C4" xs:nil="true" /> 
  <value row="R1" col="C5" xs:nil="true" /> 
  <value row="R1" col="C6" xs:nil="true" /> 
  <value row="R1" col="C7" xs:nil="true" /> 
  <value row="R1" col="C8" xs:nil="true" /> 
  <value row="R1" col="C9" xs:nil="true" /> 
  <value row="R2" col="C1">0</value> 
  <value row="R2" col="C2">12.61728395</value> 
  <value row="R2" col="C3">1320.40677966</value> 
  <value row="R2" col="C4">7</value> 
  <value row="R2" col="C5">1.90318499</value> 
  <value row="R2" col="C6">108.66456135</value> 
  <value row="R2" col="C7">776.61407946</value> 
  <value row="R2" col="C8">-0.86007907</value> 
  <value row="R2" col="C9">46.53571429</value> 
</values>
 <corner>
  <caption>Time Period: DCG Incurred Paid Year</caption> 
  </corner>
 <columns>
 <colEdge>
  <caption>Jan 02 to Dec 02 {All Data} CRxIp</caption> 
 <colEdge>
  <caption>2002</caption> 
 <colEdge id="C1">
  <caption>Member Age Avg</caption> 
  </colEdge>
 <colEdge id="C2">
  <caption>Days Supply Per Script Rx</caption> 
  </colEdge>
 <colEdge id="C3">
  <caption>Net Pay Per Pat Med</caption> 
  </colEdge>
 <colEdge id="C4">
  <caption>Days LOS Admit Acute</caption> 
  </colEdge>
 <colEdge id="C5">
  <caption>Days LOS Admit Acute</caption> 
  </colEdge>
 <colEdge id="C6">
  <caption>Allow Amt PMPM Med and Rx {Cmpl}</caption> 
  </colEdge>
 <colEdge id="C7">
  <caption>Allow Amt PMPM Med and Rx {Cmpl}</caption> 
  </colEdge>
 <colEdge id="C8">
  <caption>% Diff Allow Amt PMPM Med and Rx {Cmpl}</caption> 
  </colEdge>
 <colEdge id="C9">
  <caption>Relative Risk Score Prosp Explan NonRescaled</caption> 
  </colEdge>
  </colEdge>
  </colEdge>
  </columns>
 <rows>
 <rowEdge>
  <caption>Subsets</caption> 
 <rowEdge>
  <caption>Plan Type Medstat</caption> 
 <rowEdge id="R1">
  <caption>Cohort Medstat</caption> 
  </rowEdge>
  </rowEdge>
  </rowEdge>
 <rowEdge>
  <caption>Chronic Episodes</caption> 
 <rowEdge>
  <caption>HMO (Managed Care)</caption> 
 <rowEdge id="R2">
  <caption>Females, Ages &lt; 1</caption> 
  </rowEdge>
</rowEdge>
 </rowEdge>
 </rows>
  </crosstab>
  </dataset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:30:01.983

在 XSLT 1.0（您正在使用）中，XPath 表达式中不考虑默认名称空间。

你需要做的是：

1) 在 XSLT 转换中为实例文档的默认命名空间分配一个前缀，例如：

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="cog:http://developer.cognos.com/schemas/xmldata/1/" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance"> 
```

2) 在 XPath 表达式中的每个元素名称之前（但不在属性名称之前）使用此前缀：

```
<xsl:template match="cog:rowEdge">
    <b>Caption:</b> <xsl:value-of select="cog:caption"/><br/>
    <xsl:if test="@id">
       <b>id:</b> <xsl:value-of select="@id"/><br/>
    </xsl:if>
    <xsl:if test="cog:rowEdge">
        <xsl:apply-templates select="cog:rowEdge"/>
    </xsl:if>
</xsl:template> 
```

注意：您不需要`cog:rowEdge`在应用模板之前测试是否有 a：如果其 select 属性中没有节点，则 apply-templates 将不会做任何事情;) ...

样式表中还有几个其他错误：

1.  无法嵌入模板
2.  `xsl:stylesheet`元素中必须有版本属性。

正确的样式表是：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:cog="http://developer.cognos.com/schemas/xmldata/1/" version="1.0">

    <xsl:template match="/">

        <html>
            <head>
                <title>%s</title>
            </head>
            <body>
                <xsl:apply-templates select="cog:dataset/cog:crosstab/cog:rows"/>
            </body>
        </html>

    </xsl:template>

    <xsl:template match="cog:rows">
        <xsl:apply-templates select="cog:rowEdge"/>
    </xsl:template>

    <xsl:template match="cog:rowEdge">
        <b>Caption:</b>
        <xsl:value-of select="cog:caption"/>
        <br/>
        <xsl:if test="@id">
            <b>id:</b>
            <xsl:value-of select="@id"/>
            <br/>
        </xsl:if>
        <xsl:apply-templates select="cog:rowEdge"/>
    </xsl:template>

</xsl:stylesheet> 
```

# php - 如何为与 MySql 中的受保护关键字同名的表编写 SQL？

> ID：10706920
> 
> 赞同：-3
> 
> 时间：2012-05-22T17:21:12.430
> 
> 标签：php, mysql

以下查询将不会执行

```
mysql_query("SELECT * FROM order WHERE orderID = 102;"); 
```

它产生以下错误消息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“order WHERE orderID = 102”附近使用正确的语法

如何编写能够成功查询该表的 SQL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T17:24:29.213

订单是一个保留字。不要使用保留字作为表名或字段名；或将其包装在转义字符中，例如 ` for mysql。就我个人而言，我只是避免使用它们，因为从长远来看，它们通常会导致比它们更值得的头痛。

例子：

```
mysql_query("SELECT * FROM `order` WHERE orderID = 102;"); 
```

**更多信息**- 您可以在此处获取有关保留字的更多信息[https://dev.mysql.com/doc/refman/5.5/en/keywords.html](https://dev.mysql.com/doc/refman/5.5/en/keywords.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:23:51.180

让我发疯的是人们假设查询会起作用，然后甚至不打扰要求数据库解释为什么事情会爆炸。尝试这个：

```
$result = mysql_query("SELECT * FROM order WHERE orderID = 102;") or die(mysql_error()); 
```

同样，除非有比您上面显示的更多的代码，否则您**必须**捕获查询调用的返回值，因为该返回值是您的结果句柄，您可以从中获取结果。如果没有该语句句柄，您基本上是在浪费数据库服务器（和您自己的）时间。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T17:24:00.833

尝试
`mysql_query("SELECT * FROM order WHERE orderID = 102;") or die("MySQL ERROR: ".mysql_error());`

# verilog - Verilog：模块参数，代码模拟但不综合

> ID：10706923
> 
> 赞同：1
> 
> 时间：2012-05-22T17:21:24.130
> 
> 标签：verilog

我在合成一些 Verilog 代码时遇到了一些问题——尽管模拟似乎很好。

具体来说，一个模块定义如下..

```
module nexys2_sevensegment(
  input clk,
  input [NUM_CHARS*4-1: 0] disp_chars,
  output [NUM_CHARS-1: 0] anodes,   // The common cathodes for each display.
  output [6: 0] cathodes // The seven segments in the form {G,F,E,D,C,B,A}
  );

  parameter NUM_CHARS = 4; // The number of characters that need to be
                           // displayed. Should be in [1, 4]. 
```

并实例化如下，

```
 nexys2_sevensegment #(4) seven_seg_disp(clk, disp_bus, an, seg); 
```

模拟似乎工作正常，但是当我合成它时，我收到以下错误：

```
=========================================================================
*                          HDL Compilation                              *
=========================================================================
Compiling verilog file "nexys2_sevensegment.v" in library work
ERROR:HDLCompilers:28 - "nexys2_sevensegment.v" line 8 'NUM_CHARS' has not been declared
ERROR:HDLCompilers:28 - "nexys2_sevensegment.v" line 9 'NUM_CHARS' has not been declared
Compiling verilog file "tb_nexys2_seven_segment.v" in library work
Module <nexys2_sevensegment> compiled
Module <tb_nexys2_seven_segment> compiled
Analysis of file <"tb_nexys2_seven_segment.prj"> failed. 
```

我正在使用[Spartan3e-1200-Digilent Nexys2](http://www.digilentinc.com/Products/Detail.cfm?Prod=NEXYS2)在 Xilinx 上工作。

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T17:36:27.400

如果您使用参数，则必须在使用前声明。尝试：

```
module nexys2_sevensegment
  #( parameter NUM_CHARS=4 )
  (
  input clk,
  input [NUM_CHARS*4-1: 0] disp_chars,
  output [NUM_CHARS-1: 0] anodes,   // The common cathodes for each display.
  output [6: 0] cathodes // The seven segments in the form {G,F,E,D,C,B,A}
  );

  // ( remove parameter statement here ) 
```

`NUM_CHARS`现在编译器在它在端口定义中看到它之前遇到了一个定义。

您可能需要在编译器上设置 Verilog-2001 开关才能使其正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T01:26:59.707

您还可以在端口列表之后使用端口声明：

```
//non-ANSI style header
module nexys2_sevensegment(
  clk,
  disp_chars,
  anodes,   // The common cathodes for each display.
  cathodes // The seven segments in the form {G,F,E,D,C,B,A}
  );

  parameter NUM_CHARS = 4; // The number of characters that need to be
                           // displayed. Should be in [1, 4]

  input                     clk;
  input  [NUM_CHARS*4-1: 0] disp_chars;
  output [NUM_CHARS-1: 0]   anodes;   // The common cathodes for each display.
  output [6: 0]             cathodes; // The seven segments in the form {G,F,E,D,C,B,A}

endmodule 
```

# jquery - jQuery - 确保检查所有无线电组

> ID：10706925
> 
> 赞同：6
> 
> 时间：2012-05-22T17:21:27.870
> 
> 标签：jquery, radio

我想使用 jQuery 遍历多个（动态）单选按钮组，如果没有选择，它会引发错误并停止表单提交。

到目前为止，这是我的努力：

```
$("form").submit(function() {
    $(":radio").each(function(){
        if($(this).val().length == 0) {
            alert('Not selected all radios');
            return false;
        }
    }); 
}); 
```

但它*总是*忽略将停止提交的 if 语句，好像 $(this) 实际上不是单选按钮的值？

这是一个 jsFiddle：http: [//jsfiddle.net/aVVW9/](http://jsfiddle.net/aVVW9/)

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T17:48:42.340

试试这个。方法是遍历所有单选按钮，然后提取单选按钮组的名称，`:checked`用于查看该组的任何成员是否被选中。在找到第一个缺失的检查后，一个简单的布尔值会停止错误。

```
$("form").submit(function() {
    var submitme = true;
    $(':radio').each(function() { // loop through each radio button
        nam = $(this).attr('name'); // get the name of its set
        if (submitme && !$(':radio[name="'+nam+'"]:checked').length) { 
        // see if any button in the set is checked
            alert(nam+' group not checked');
            submitme = false;
        }
    });
    return submitme; // cancel the form submit
});        ​ 
```

[http://jsfiddle.net/mblase75/aVVW9/5/](http://jsfiddle.net/mblase75/aVVW9/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:21:59.743

```
$("form").submit(function() {
    $(":radio", this).each(function(){
        if(!this.checked) {
            alert('Not selected all radios');
            return false;
        }
    }); 
}); 
```

或者

```
$("form").submit(function() {
    if($(':radio:not(:checked)', this).length) {
       alert('Not selected all radios');
       return false;
    }
}); 
```

检查这个**[演示](http://jsfiddle.net/thecodeparadox/aVVW9/3/)**。在这里为简单起见，我将每个无线电组包装在一个具有类的 div 中`radio_group`并循环它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T09:24:50.020

我偶然发现了更优雅的解决方案！仅当您知道单选按钮的确切数量时才有用。

```
var x = 0;

$(":radio").change(function() {
x = x + 1;

if (x == count) {

//do smth

}

}); 
```

# matlab - 如何在matlab的同一窗口中以不同的图形和颜色绘制两个矩阵？

> ID：10706931
> 
> 赞同：0
> 
> 时间：2012-05-22T17:22:05.047
> 
> 标签：matlab, matlab-figure

```
figure;
plot(trainingSet(:, 1), trainingSet(:, 2), '*');
figure;
plot(reprVectors(:, 1), reprVectors(:, 2), '*'); 
```

如何在同一图中而不是 2 个不同的图中绘制来自 trainingSet 和 reprVectors 的点？

另外我怎样才能使 trainingSet pts 蓝色和 reprVectors 点红色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:27:28.980

我会用 MATLAB [Hold 函数来做](http://www.weizmann.ac.il/matlab/techdoc/ref/hold.html)

语法是：

```
figurel
plot(trainingSet(:, 1), trainingSet(:, 2), '*');
hold on
plot(reprVectors(:, 1), reprVectors(:, 2), '*');
hold off 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:26:09.193

如果将第二个替换为`figure`，`hold on`它们将被绘制在一起。您可以为标记添加颜色标识符，例如`plot(....,...,'r*')`绘制红色星星和`'bo'`绘制蓝色圆圈。[此处](http://www.mathworks.nl/help/techdoc/ref/linespec.html)描述了可用的形状和颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T18:18:36.997

你描述的是[subplot](http://www.mathworks.nl/help/techdoc/ref/subplot.html)函数：相同的图形，不同的绘图轴

例如：

```
c=-2:0.1:2;
figure
subplot(121)
plot(x,x);
subplot(122)
plot(x,x.^2) 
```

这将函数 y=x 和 y=x^2 绘制在一个图中，但彼此相邻。

红色/蓝色和标记选项已经在其他答案中解释过:)

# ruby-on-rails - 使用 accept_nested_attributes_for

> ID：10706932
> 
> 赞同：0
> 
> 时间：2012-05-22T17:22:05.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试按照[http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes中所述使用 Accepts_nested_attributes_for](http://archives.ryandaigle.com/articles/2009/2/1/what-s-new-in-edge-rails-nested-attributes)

我假设教程中的第二个代码块应该在模型中，因为他后来说对控制器什么都不做。不过，示波器似乎向控制器代码发出信号。我已将以下代码添加到“扫描”模型中，该代码应该在创建扫描之前生成子“hostScan”对象

```
class Scan < ActiveRecord::Base
  attr_accessible :description, :endTime, :startTime, :raw
  has_many :hostScans, dependent: :destroy
  accepts_nested_attributes_for :hostScans, :allow_destroy => true

  before_create :interpret

  def interpret

    #parse the start and end times of the scan
self.startTime = raw.split(/(?<=timestamps\|\|\|scan_start\|)(.*?)(?=\|)/)[1]
self.endTime = raw.split(/(?<=timestamps\|\|\|scan_end\|)(.*?)(?=\|)/)[1]

#host scan bodies
    #host name
        #hostScans = raw.scan(/(?<=timestamps\|\|)(.*?)(?=\|host_start)/)
        #self.HostScans_attributes = [{}]
    #raw host text
        hostScanBodies = raw.split(/(?<=host_start\|)(.*?)(?=host_end)/)

        hostScanBodies.each do |body|
            self.HostScans_attributes += [{:raw => body}]
        end
  end
end 
```

但是，当我尝试创建扫描时，出现以下错误：

```
NoMethodError in ScansController#create

undefined method `HostScans_attributes' for #<Scan:0x2441e68> 
```

它似乎不知道 HostScans_attributes。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:27:46.267

首先，尝试使用`under_score`符号而不是`camelCase`- rails 期望按照惯例。使用嵌套属性时，您需要声明一个属性助手以使用 - 在这种情况下 :host_scans_attributes （或 :hostScans_attributes 如果声明为 camelcase），如下所示：

```
class Scan < ActiveRecord::Base
  attr_accessible :description, :end_time, :start_time, :raw, :host_scans_attributes
  has_many :host_scans, dependent: :destroy
  accepts_nested_attributes_for :host_scans, :allow_destroy => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:28:37.917

你`attr_accessible`在你的模型中使用，它基本上是所有可以被大量分配的属性的白名单。所以你还需要在`attributes`那里添加......

# java - 如果用户没有价值，则在 JSP 中显示 Spring Dropdown

> ID：10706934
> 
> 赞同：0
> 
> 时间：2012-05-22T17:22:20.977
> 
> 标签：java, spring, jsp, spring-mvc

如果用户在 JSP 中没有值，则在 JSP 中显示 Spring 下拉列表。我试图找出如何编写一些 Spring 代码，如果用户在从服务器返回的 borough 字段中有值，则不会显示以下下拉列表？

```
<form:select path="borough">
 <form:option value="Staten Island">Staten Island</form:option>
 <form:option value="Queens">Queens</form:option>
 <form:option value="Brooklyn">Brooklyn</form:option>
 <form:option value="Bronx">Bronx</form:option>
 <form:option value="Manhattan">Manhattan</form:option>
</form:select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:31:31.817

您可以使用 jstl 条件标记来完成此操作

```
<c:if test="${empty borough}">
    <form:select path="borough">
    <form:option value="Staten Island">Staten Island</form:option>
    <form:option value="Queens">Queens</form:option>
    <form:option value="Brooklyn">Brooklyn</form:option>
    <form:option value="Bronx">Bronx</form:option>
    <form:option value="Manhattan">Manhattan</form:option>
    </form:select>  
</c:if> 
```

根据评论：

您可以使用 if else 来实现`c:choose`

```
<c:choose>
    <c:when test="${empty borough}">
        <form:select path="borough">
        <form:option value="Staten Island">Staten Island</form:option>
        <form:option value="Queens">Queens</form:option>
        <form:option value="Brooklyn">Brooklyn</form:option>
        <form:option value="Bronx">Bronx</form:option>
        <form:option value="Manhattan">Manhattan</form:option>
        </form:select>
    </c:when>
    <c:otherwise>
        This is the else block, you can have multiple when clause so it will become if else if else code
    </c:otherwise>
</c:choose> 
```

一些[文档](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSTL4.html)

# javascript - 缩略图更改时jCarousel主图像更改

> ID：10706935
> 
> 赞同：0
> 
> 时间：2012-05-22T17:22:21.680
> 
> 标签：javascript, jquery, gallery, jcarousel

我已经在谷歌上搜索了我的问题的解决方案但找不到，请看一下我使用 jCarousel 的代码，我正在尝试用小拇指的变化使主图片自动变化，你可以看到一个 live演示在[http://www.misslebanon2010.com/urbana/index.php](http://www.misslebanon2010.com/urbana/index.php)

滚动条可以工作，但我需要橙色边框才能进入下一个缩略图，并根据当前缩略图更改相应的主照片

编码 ：

```
<script type="text/javascript">
$(document).ready(function () {
        //jCarousel Plugin
    $('#carousel').jcarousel({
        vertical: true,
        scroll: 1,
        auto: 2,
        wrap: 'last',
        initCallback: mycarousel_initCallback
    });

//Combine jCarousel with Image Display
$('#slideshow-carousel li a').hover(
    function () {

        if (!$(this).has('span').length) {
            $('#slideshow-carousel li a img').stop(true, true).css({'border': '2px #ccc solid'});
            $(this).stop(true, true).children('img').css({'border':'2px orange solid'});
        }       
    },
    function () {

        $('#slideshow-carousel li a img').stop(true, true).css({'border': '2px #ccc solid'});
        $('#slideshow-carousel li a').each(function () {

            if ($(this).has('span').length) $(this).children('img').css({'border':'2px orange solid'});

        });

    }
).click(function () {

    $('span.arrow').remove();  
    $('#frtitle').html($(this).find("img").attr('title'));
    $('#desc').html($(this).find("img").attr('alt'));         
    $(this).append('<span class="arrow"></span>');
    $('#slideshow-main li').removeClass('active');        
    $('#slideshow-main li.' + $(this).attr('rel')).addClass('active');  

    return false;
    });

});

function mycarousel_initCallback(carousel) {

// Pause autoscrolling if the user moves with the cursor over the clip.
carousel.clip.hover(function() {
    carousel.stopAuto();
}, function() {
    carousel.startAuto();
});
}

</script> 
```

我需要修改这段代码，以便让照片自动变化，拇指和相应的大照片。

编辑：

完整的 HTML 代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Urbana Acceuil</title>
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="js/jquery.jcarousel.pack.js"></script>
    <link rel="stylesheet" type="text/css" href="css/jquery.jcarousel.css" />
    <link rel="stylesheet" type="text/css" href="css/skin.css" />
<script type="text/javascript">
    $(document).ready(function () {
            //jCarousel Plugin
        $('#carousel').jcarousel({
            vertical: true,
            scroll: 1,
            auto: 2,
            wrap: 'last',
            initCallback: mycarousel_initCallback
        });

    //Combine jCarousel with Image Display
    $('#slideshow-carousel li a').hover(
        function () {

            if (!$(this).has('span').length) {
                $('#slideshow-carousel li a img').stop(true, true).css({'border': '2px #ccc solid'});
                $(this).stop(true, true).children('img').css({'border':'2px orange solid'});
            }       
        },
        function () {

            $('#slideshow-carousel li a img').stop(true, true).css({'border': '2px #ccc solid'});
            $('#slideshow-carousel li a').each(function () {

                if ($(this).has('span').length) $(this).children('img').css({'border':'2px orange solid'});

            });

        }
    ).click(function () {

        $('span.arrow').remove();  
        $('#frtitle').html($(this).find("img").attr('title'));
        $('#desc').html($(this).find("img").attr('alt'));         
        $(this).append('<span class="arrow"></span>');
        $('#slideshow-main li').removeClass('active');        
        $('#slideshow-main li.' + $(this).attr('rel')).addClass('active');  

        return false;
        });

    });
function mycarousel_initCallback(carousel) {

    // Pause autoscrolling if the user moves with the cursor over the clip.
    carousel.clip.hover(function() {
        carousel.stopAuto();
    }, function() {
        carousel.startAuto();
    });
}

</script>
<style type="text/css">
<!--
body,td,th {
    font-family: Verdana;
    font-size: 11px;
    color: #EFF1F5;
}
body {
    margin-top: 0px;
    margin-left: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    background-image: url(images/rightlightgrey.jpg);
}
.leftgrey {
    color: #8E98A8
}
.styleleftbarorange {
    color: #C85E08;
    font-size: 14px;
}
.arroworange {font-size: 24px}
.style5 {
    font-size: 24px;
    color: #C85E08;
    font-weight: bold;
}
.facebook {
    color: #CFD4DD;
    text-decoration: none;
}
.menu {
    font-size: 12px;
    text-decoration: none;
    color: #EFF1F5;
}
.style9 {color: #FF0000}
a:link {
    text-decoration: none;
}
a:visited {
    text-decoration: none;
}
a:hover {
    text-decoration: none;
}
a:active {
    text-decoration: none;
}
.menu11 {
    font-size: 11px;
    text-decoration: none;
    color: #EFF1F5;
}
/* Slide Show */
img {
    border:0;
}

#slideshow-main {
    width:950px;
    top:0px;
    padding:0px;
    height: 511px;
}

#slideshow-main ul {
    margin:0; 
    padding:0; 
    width:952px;
}

#slideshow-main li {
    width:952px;
    height:511px;
    display:none;
    position:relative;
}

#slideshow-main li.active {
    display:block !important;
}

#slideshow-main li span.opacity {
    position:absolute;
    bottom:28px;
    left:5px;
    display:block;
    width:944px;
    height:60px;
    background:#000;
    filter:alpha(opacity=50);
    -moz-opacity:0.5;
    -khtml-opacity: 0.5;
    opacity: 0.5;
    z-index:500;
}

#slideshow-main li span.content {
    position:absolute;
    bottom:26px;
    left:-4px;
    display:block;
    width:100%;
    height:60px;
    z-index:1000;
}

#slideshow-main li span.content h1 {
    font-size:14px;
    margin:5px 0;
    padding:0 10px;;
    color:#42e2e8;
}

#slideshow-main li span.content p {
    font-size:11px;
    margin:5px 0;
    padding:0 10px;;
    color:#42e2e8;
}

#slideshow-carousel {
    float:left;
    width:86px;
    position:relative;
    overflow:hidden;

}

#slideshow-carousel ul {
    margin:0; 
    padding:0;
    list-style:none;
}

#slideshow-carousel li {
    background:#fff;
    height:70px;
    position:relative;
    width: 89px;
}
#slideshow-carousel li img {
    margin-bottom:2px;

}
#slideshow-carousel li a img {border:2px #ccc solid;}
#slideshow-carousel li a {
    display:block; 
    width:86px; 
    height:69px;

}

#slideshow-carousel .active {
    filter:alpha(opacity=100); 
    -moz-opacity:1.0; 
    -khtml-opacity: 1.0; 
    opacity: 1.0;

}

#slideshow-carousel .faded {
    filter:alpha(opacity=50); 
    -moz-opacity:0.5; 
    -khtml-opacity: 0.5; 
    opacity: 0.5;
}
#thumbs-carousel {
    overflow:hidden;
    position:relative;
    height:464px;
    padding-left:1px;
    list-style:none;
}

-->
</style>
<script  type="text/javascript">
/*<![CDATA[*/
function Scroll(id,ud,spd){
 var obj=document.getElementById(id);
 clearTimeout(obj.to);
 if (ud){
  obj.scrollTop=obj.scrollTop+ud;
  obj.to=setTimeout(function(){ Scroll(id,ud,spd); },spd||10)
 }
}
/*]]>*/
</script>
</head>

<body>
<table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">

  <tr>
    <td align="center" valign="top"><table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">

      <tr>
        <td align="center" background="images/topgrey.jpg"></td>
        <td align="center" valign="bottom" background="images/topgrey.jpg"><table width="1250" border="0" align="center" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="images/spacer.gif" alt="a" width="1" height="25" /></td>
            <td><img src="images/spacer.gif" alt="a" width="160" height="1" /></td>
            <td></td>
            <td></td>
            <td><img src="images/spacer.gif" alt="a" width="60" height="1" /></td>
            <td></td>
            <td></td>
            <td></td>
            <td><img src="images/spacer.gif" alt="a" width="94" height="1" /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td><img src="images/spacer.gif" alt="a" width="185" height="1" /></td>
            <td>suivez-nous sur&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.facebook.com/urbanacanada" class="facebook">facebook</a></td>
            <td><img src="images/spacer.gif" alt="a" width="4" height="1" /></td>
            <td><span class="facebook"><a href="http://www.facebook.com/urbanacanada" target="_blank"><img src="images/facebook.png" alt="fb" width="20" height="19" border="0" /></a></span></td>
            <td><span class="facebook"> &nbsp;&nbsp;/&nbsp;&nbsp;</span><a href="https://twitter.com/#!/urbana" class="facebook">twitter</a> </td>
            <td><img src="images/spacer.gif" alt="a" width="4" height="1" /></td>
            <td><span class="facebook"><a href="https://twitter.com/#!/urbana" target="_blank"><img src="images/twitter.png" alt="tw" width="19" height="19" border="0" /></a></span></td>
            <td><img src="images/spacer.gif" alt="a" width="44" height="1" /></td>
            <td><a href="liste.html" class="menu11">liste de souhaits</a></td>
            <td><img src="images/spacer.gif" alt="a" width="6" height="1" /></td>
            <td><img src="images/souhaiticon.png" alt="a" width="17" height="19" /></td>
            <td><img src="images/spacer.gif" alt="a" width="309" height="1" /></td>
            <td><a href="english/index.html" class="menu11">english</a> / <strong>français</strong></td>
            <td><img src="images/spacer.gif" alt="a" width="60" height="1" /></td>
            <td><img src="images/soundon.png" alt="a" width="15" height="19" /></td>
            <td><img src="images/spacer.gif" alt="a" width="124" height="1" /></td>
          </tr>
          <tr>
            <td colspan="16"><img src="images/spacer.gif" alt="a" width="1" height="7" /></td>
          </tr>
        </table></td>
        <td align="center" background="images/topgrey.jpg"></td>
      </tr>

      <tr>
        <td align="center" valign="top" background="images/rightlightgrey.jpg"><table width="100%" border="0" align="center" cellpadding="0" cellspacing="0">
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td>&nbsp;</td>
          </tr>
        </table></td>
        <td width="1250" valign="top"><table width="1250" border="0" align="center" cellpadding="0" cellspacing="0" bordercolor="#FF0000">
          <tr>
            <td rowspan="2" valign="top" background="images/rightlightgrey.jpg"><table width="174" border="0" align="center" cellpadding="0" cellspacing="0">
                <tr>
                  <td><img src="images/spacer.gif" alt="a" width="1" height="160" /></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td><img src="images/spacer.gif" alt="a" width="1" height="26" /></td>
                  <td align="right" class="styleleftbarorange"><table width="138" border="0" cellspacing="0" cellpadding="0">
                      <tr>
                        <td align="right" class="styleleftbarorange">Modèle <strong><span id="frtitle">Astor</span></strong></td>
                        <td align="right"><span class="style5">&lt;</span></td>
                      </tr>
                  </table></td>
                  <td></td>
                </tr>
                <tr>
                  <td><img src="images/spacer.gif" alt="a" width="1" height="60" /></td>
                  <td align="center"><img src="images/spacer.gif" alt="a" width="166" height="1" /></td>
                  <td></td>
                </tr>
                <tr>
                  <td><img src="images/spacer.gif" alt="a" width="1" height="86" /></td>
                  <td align="right"><span class="leftgrey" id="desc">Importé d'Espagne,<br />
                    ce modèle vous est<br />
                    offert en plusieurs couleurs,<br />
                    plusieurs tissus et<br />
                    plusieurs dimensions.</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td><img src="images/spacer.gif" alt="a" width="4" height="126" /></td>
                  <td align="center"></td>
                  <td><img src="images/spacer.gif" alt="a" width="4" height="126" /></td>
                </tr>
            </table></td>
            <td rowspan="2">
            <div id="slideshow-main">
                     <ul>
                                                           <li class="p1 active">

                                        <a href="#">
                                        <img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/image-G3ZI4ECXLHZSGWA.jpg" width="952" height="511" alt=""/></a>
                        </li> <li class="p2">                                   
                                        <a href="#">
                                        <img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/image-SJCX0K9DMLR0OLJ.jpg" width="952" height="511" alt=""/></a>
                        </li> <li class="p3">                                   
                                        <a href="#">
                                        <img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/image-76YRTEM4KJLL0D2.jpg" width="952" height="511" alt=""/></a>
                        </li> <li class="p4">                                   
                                        <a href="#">
                                        <img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/image-LR3OS96YMVGPN0D.jpg" width="952" height="511" alt=""/></a>
                        </li> <li class="p5">                                   
                                        <a href="#">
                                        <img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/image-AN8AHB2KOG0YHMZ.jpg" width="952" height="511" alt=""/></a>
                        </li> <li class="p6">                                   
                                        <a href="#">
                                        <img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/image-COVLIU0U7P06WND.jpg" width="952" height="511" alt=""/></a>
                        </li>                                </ul></div>                        
            </td>
            <td><table width="123" border="0" cellspacing="0" cellpadding="0">
                <tr>
                  <td><table width="86" border="0" cellspacing="0" cellpadding="0">
                      <!--<tr>
                        <td><a href="#" onmousedown="Scroll('thumbs-carousel',-1);"  onmouseup="Scroll('thumbs-carousel');"  onmouseout="Scroll('thumbs-carousel');" ><img src="images/toparrow.jpg" alt="a" width="86" height="62" /></a></td>
                      </tr>-->
                      <!--Load Here-->
                      <tr>
                      <td>
                      <div id="slideshow-carousel">
                      <div id="thumbs-carousel">
                          <ul id="carousel" class="jcarousel jcarousel-skin-tango">

                                <li><a href="#" rel="p1"><img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/thumbs/image-G3ZI4ECXLHZSGWA.jpg" alt="Le Test" width="80" height="65" title="Canapé" id="thumb" /></a></li>                       
                                <li><a href="#" rel="p2"><img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/thumbs/image-SJCX0K9DMLR0OLJ.jpg" alt="test" width="80" height="65" title="canapes" id="thumb" /></a></li>                       
                                <li><a href="#" rel="p3"><img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/thumbs/image-76YRTEM4KJLL0D2.jpg" alt="Importé d'Espagne,
ce modèle vous est
offert en plusieurs couleurs,
plusieurs tissus et
plusieurs dimensions" width="80" height="65" title="Danzka" id="thumb" /></a></li>                       
                                <li><a href="#" rel="p4"><img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/thumbs/image-LR3OS96YMVGPN0D.jpg" alt="Alfredo Testing" width="80" height="65" title="Alfredo" id="thumb" /></a></li>                       
                                <li><a href="#" rel="p5"><img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/thumbs/image-AN8AHB2KOG0YHMZ.jpg" alt="Raviolla Modele" width="80" height="65" title="Raviolla" id="thumb" /></a></li>                       
                                <li><a href="#" rel="p6"><img src="http://misslebanon2010.com/urbana/new/admin/images/homepage/thumbs/image-COVLIU0U7P06WND.jpg" alt="" width="80" height="65" title="Munich" id="thumb" /></a></li>                          </ul>
                      </div>
                      </div>
                     <!-- End Here -->
                     </td>
                     </tr>
                    <!-- <tr>
                        <td><a href="#" onmousedown="Scroll('thumbs-carousel',1);"  onmouseup="Scroll('thumbs-carousel');"  onmouseout="Scroll('thumbs-carousel');"><img src="images/bottomarrow.jpg" alt="a" width="86" height="61" /></a></td>
                      </tr>-->
                  </table></td>
                  <td><img src="images/spacer.gif" alt="a" width="38" height="1" /></td>
                </tr>
            </table></td>
          </tr>
          <tr>
            <td background="images/bottomgreyright.jpg"><img src="images/spacer.gif" width="1" height="43" /></td>
          </tr>
        </table></td>
        <td align="center" valign="top" background="images/mix.jpg"><table width="98%" border="0" align="center" cellpadding="0" cellspacing="0">
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td>&nbsp;</td>
          </tr>
        </table>          </td>
      </tr>

      <tr>
        <td align="center" valign="top"></td>
        <td align="center" valign="top"><table width="1250" border="0" align="center" cellpadding="0" cellspacing="0">
          <tr>
            <td background="images/rightlightgrey.jpg"><img src="images/spacer.gif" width="174" height="1" /></td>
            <td background="images/bottomgrey.jpg"><img src="images/spacer.gif" alt="" width="952" height="1" /></td>
            <td background="images/bottomgrey.jpg"><img src="images/spacer.gif" alt="" width="124" height="1" /></td>
          </tr>
          <tr>
            <td align="center" background="images/rightlightgrey.jpg"><table width="174" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td><img src="images/spacer.gif" alt="a" width="1" height="110" /></td>
                <td align="center"><a href="index.html"><img src="images/logo1.jpg" alt="logo urbana" width="124" height="99" border="0" /></a></td>
                <td><img src="images/spacer.gif" alt="a" width="1" height="110" /></td>
              </tr>
            </table></td>
            <td background="images/bottomgrey.jpg"><table width="952" border="0" align="center" cellpadding="0" cellspacing="0">
              <tr>
                <td><img src="images/spacer.gif" alt="a" width="1" height="7" /></td>
              </tr>
              <tr>
                <td><img src="images/spacer.gif" alt="a" width="1" height="20" /></td>
              </tr>
              <tr>
                <td align="right"><img src="images/spacer.gif" alt="a" width="1" height="5" /></td>
              </tr>
              <tr>
                <td align="right"><table width="550" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                      <td align="center"><a href="index.html" class="menu">acceuil</a></td>
                      <td align="center"></td>
                      <td align="center"><span class="menu">/</span></td>
                      <td align="center"></td>
                      <td align="center"><a href="produits.php?catid=1" class="menu">produits</a></td>
                      <td align="center"></td>
                      <td align="center"><span class="menu">/</span></td>
                      <td align="center"></td>
                      <td align="center"><a href="promo.html" class="menu">promo</a></td>
                      <td align="center"></td>
                      <td align="center"><span class="menu">/</span></td>
                      <td align="center"></td>
                      <td align="center"><a href="companie.html" class="menu">companie</a></td>
                      <td align="center"></td>
                      <td align="center"><span class="menu">/</span></td>
                      <td align="center"></td>
                      <td align="center"><a href="contacts.html" class="menu">contacts</a></td>
                      <td></td>
                    </tr>
                    <tr>
                      <td colspan="18"><img src="images/spacer.gif" alt="a" width="1" height="5" /></td>
                    </tr>
                    <tr>
                      <td align="center"><img src="images/line.png" alt="a" width="44" height="3" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="25" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="5" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="25" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="54" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="25" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="5" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="25" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="45" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="25" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="5" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="25" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="58" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="25" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="5" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="25" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="54" height="1" /></td>
                      <td align="center"><img src="images/spacer.gif" alt="a" width="80" height="1" /></td>
                    </tr>
                </table></td>
              </tr>
              <tr>
                <td align="right"><img src="images/spacer.gif" alt="a" width="1" height="20" /></td>
              </tr>
              <tr>
                <td></td>
              </tr>
              <tr>
                <td><table width="952" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                      <td><img src="images/spacer.gif" alt="a" width="26" height="1" /></td>
                      <td><img src="images/spacer.gif" alt="a" width="284" height="1" /></td>
                      <td><img src="images/spacer.gif" alt="a" width="310" height="1" /></td>
                      <td><img src="images/spacer.gif" alt="a" width="190" height="1" /></td>
                      <td><img src="images/spacer.gif" alt="a" width="72" height="1" /></td>
                      <td><img src="images/spacer.gif" alt="a" width="70" height="1" /></td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>© urbana mobilier inc 2012\. tous droits réservés</td>
                      <td></td>
                      <td><a href="contacts.html" class="menu11">inscrivez-vous à notre newsletter</a></td>
                      <td></td>
                      <td><a href="plan.html" class="menu11">plan du site</a></td>
                    </tr>
                </table></td>
              </tr>
            </table></td>
            <td background="images/bottomgrey.jpg"></td>
          </tr>
        </table></td>
        <td align="center" valign="top" background="images/bottomgrey.jpg"></td>
      </tr>

    </table>
    </td>
  </tr>
</table>
</body>
</html> 
```

# c# - 如何完成“打开项目”对话框？

> ID：10706937
> 
> 赞同：1
> 
> 时间：2012-05-22T17:22:28.403
> 
> 标签：c#, .net, wpf

我想显示“*打开目录*”对话框，但我想对其进行自定义，以便其中包含`.project`文件夹的文件夹标有不同的文件夹图标，并且只能选择这些文件夹。

现在我想知道是否已经有用户控件或明智的方法来完成，而无需使用文件构建自己的树视图并自己编写所有导航逻辑。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:57:52.503

无论您使用哪种开发语言，（非 .Net）[OpenfileDialog](http://msdn.microsoft.com/en-us/library/microsoft.win32.openfiledialog.aspx)都是内置的 Windows 功能，而且定制起来并不简单。充其量，我已经看到了一些示例，这些示例将窗口挂钩并将其包装在一些额外的自定义控件中（[此处](http://mariusbancila.ro/blog/2009/08/11/file-dialog-with-custom-constrol/)）。

查看[.Net 4 OpenfileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx)类，它是密封的，无法扩展。

完成此任务的最佳选择是构建自定义对话，可能通过扩展 .Net 4 OpenfileDialog, [FileDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.aspx)使用的相同基类。

# java - XML (XSL) 错误 - 将 HTML 转换为 PDF (Java)

> ID：10706943
> 
> 赞同：0
> 
> 时间：2012-05-22T17:22:57.683
> 
> 标签：java, xml, xslt, pdf, xsl-fo

我几乎完成了将 HTML 转换为 PDF 格式的程序。我的问题比这个程序更具体。我有一个 XSL 文件，当我尝试将它与我的程序一起使用时，它让我感到有些难过。

使用 javax.xml.transform.Transformer.transform(source, result) 时，由于我的 XSL 样式表，我收到以下警告和错误消息：

编译器警告：元素外部的属性“leader-length”。
错误：“错误（未知位置）：fo:list-item 不是 fo:block 的有效子元素。”

有问题的 XSL 文件可以在这里找到：[http ://webcoder.info/downloads/xhtml2fo.html](http://webcoder.info/downloads/xhtml2fo.html)

本教程推荐：[https ://blogs.oracle.com/chrisf/entry/converting_html_to_pdf_using](https://blogs.oracle.com/chrisf/entry/converting_html_to_pdf_using)

任何有关这些错误消息来自什么/来自何处的帮助都会有很大帮助！我对 XSL 文件完全不熟悉。

太感谢了。

编辑：我想有可能是其他东西有问题。使用其他 XSL 文件，我得到：“文档是空的（您的 XSLT 样式表可能有问题）” 但是，我几乎完全按照 Oracle 教程进行操作。他的代码中有错误吗？（在上面的链接中。）

EDIT2：我应该首先发布这个：[http ://webcoder.info/downloads/xhtml2fo.xsl](http://webcoder.info/downloads/xhtml2fo.xsl)

如果该链接不起作用，我将在此处粘贴确切的代码。谢谢！

EDIT3：这是我试图用作示例的一些 HTML：http: [//docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/classpath.html](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/classpath.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:28:20.647

就行前`<fo:leader ... />`不应该有那个斜杠/。

# java - 企业 Java 应用程序架构。动态域模型

> ID：10706949
> 
> 赞同：0
> 
> 时间：2012-05-22T17:23:18.153
> 
> 标签：java, architecture, enterprise, domain-model

我想知道在 SQL 数据库中实现动态域模型的最佳方法是什么？说动态域模型，我的意思是当用户可以通过添加或删除属性来更改对象的“类”时的模型。

例如：小型网上商店，经理可以在其中添加带有网络界面的新型产品。我应该到处使用 Map 之类的东西吗？也许在地图中只保留对象的动态部分会更好？或者也许运行时类生成会有所帮助？或者我应该参观一下像 Groovy 这样的动态语言？我已经测试了第一种和第二种方法，以这种方式开发真是令人头疼。

常见的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T17:35:38.873

您有一个从产品到产品类型的 1 对 1。所以产品有一个名为productType 的成员变量。您还将拥有从产品到功能的一对多。所以产品类将有一个特性列表。

我无法想象比使用 cglib 动态创建类更错误的方法。

# java - Netbeans JTable 分页

> ID：10706962
> 
> 赞同：2
> 
> 时间：2012-05-22T17:24:07.040
> 
> 标签：java, swing, netbeans, pagination

我从来不知道`JTable`没有分页。因此，我现在坚持使用`JTable`，我需要实现分页。我发现了很多 Java Swing 分页的例子，但它们没有在 netbeans 中实现。我将如何在我的项目中实现分页（下面的相关代码）？

```
import java.sql.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Joseph
 */
public class SupplierForm extends javax.swing.JFrame {

    /**
     * Creates new form SupplierForm
     */
    public SupplierForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        supplierCombo = new javax.swing.JComboBox();
        jScrollPane1 = new javax.swing.JScrollPane();
        dataTable = new javax.swing.JTable();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));

        supplierCombo.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "USER", "Item 3", "Item 4" }));
        supplierCombo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                supplierComboActionPerformed(evt);
            }
        });

        dataTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID", "Title 2", "Title 3", "Title 4"
            }
        ));
        jScrollPane1.setViewportView(dataTable);

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(173, 173, 173)
                        .addComponent(supplierCombo, javax.swing.GroupLayout.PREFERRED_SIZE, 141, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(20, 20, 20)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 660, Short.MAX_VALUE)))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(supplierCombo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(31, Short.MAX_VALUE)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(34, 34, 34))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(26, 26, 26)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void supplierComboActionPerformed(java.awt.event.ActionEvent evt) {                                              
        // TODO add your handling code here:

        String tableName = (String) supplierCombo.getModel().getSelectedItem();
         DefaultTableModel model = (DefaultTableModel) dataTable.getModel();
         int c = model.getRowCount();
         for (int i=c-1; i>=0; i--){
            model.removeRow(i);
            dataTable.revalidate();
            }
        String sql = "select * from "+ tableName+"  ";
        try {
            try {
                Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(SupplierForm.class.getName()).log(Level.SEVERE, null, ex);
            }
            Connection connect = (Connection) DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=C:\\Merlin1.accdb");
            Statement statmnt = connect.createStatement();
            ResultSet rslt = statmnt.executeQuery(sql);
            while(rslt.next()){
                String id = rslt.getString("ID");
                String name = rslt.getString("USER_NAME");
                String surname = rslt.getString("PASSWORD");
                //String age = rslt.getString("Age");
                model.addRow(new Object[]{id,name,surname});
            }
        } catch(SQLException e){
             JOptionPane.showMessageDialog(this,"No Supplier exists with this name");

            }
    // dataTable.revalidate();

    }                                             

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SupplierForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SupplierForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SupplierForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SupplierForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new SupplierForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JTable dataTable;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JComboBox supplierCombo;
    // End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:46:30.080

您可以通过两种方式创建分页

1.  一边`Database`，在`SQL statement`

2.  `JScrollPane`在删除垂直和水平的情况下显示减少的行数`ScrollBar`，方法`JScrollBar.setValue(int)`可以在`JTable`里面移动`JScrollPane`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T08:55:06.150

```
int crt = 1;

private void PREVMouseClicked(java.awt.event.MouseEvent evt) {    

    DefaultTableModel tm = (DefaultTableModel)jTable.getModel();
    tm.setRowCount(0);       

        try{                        

            ctr --;
            int page_num = (ctr-1)*5;  
            connect = DriverManager.getConnection("jdbc:mysql://localhost/database","root","");
            state = connect.createStatement();

                if(page_num <=0 ){
                    PREV.setSize(0,0);
                    next.setSize(89,15);
                    res = state.executeQuery("SELECT * FROM `item` ORDER BY `id` ASC LIMIT 0,5");
                        while(res.next()){               
                            int item = res.getInt("id");
                            String item1 = res.getString("item1");
                            String item2 = res.getString("item2");
                            Object record [] = {item,item1,item2};
                            tm.addRow(record); 
                        } 
                        ctr = 1;
                }else{
                    next.setSize(89,15);
                    res = state.executeQuery("SELECT * FROM `item` ORDER BY `id` ASC LIMIT "+page_num+",5");
                        while(res.next()){               
                            int item = res.getInt("id");
                            String item1 = res.getString("item1");
                            String item2 = res.getString("item2");
                            Object record [] = {item,item1,item2};
                            tm.addRow(record); 
                        } 
                }

        }catch(SQLException e){
            System.out.print(e.getMessage());
        }
} 
private void nextMouseClicked(java.awt.event.MouseEvent evt) {                                  

    ctr++;
    int page_num = (ctr-1)*5;

    DefaultTableModel tm = (DefaultTableModel)jTable.getModel();
    tm.setRowCount(0);    

    int id = 0;  
    try{
        connect = DriverManager.getConnection("jdbc:mysql://localhost/database","root","");
        state = connect.createStatement();
        res = state.executeQuery("SELECT * FROM `item` ORDER BY `id` ASC");

            while(res.next()){
                id++;
            }          

    }catch(SQLException e){
        System.out.print(e.getMessage());
    }

    if(id%5 == 0){
        int ans = id - 5;
        int ans1 = id / 5;
        int last = (ans1 * 5) - 5;

            try{

                if(page_num == ans && page_num == 5){

                    next.setSize(0,0);
                    PREV.setSize(89,15);

                    res = state.executeQuery("SELECT * FROM `item` ORDER BY `id` ASC LIMIT "+ans+",5");
                    while(res.next()){               
                        int item = res.getInt("id");
                        String item1 = res.getString("item1");
                         String item2 = res.getString("item2");
                         Object record [] = {item,item1,item2};
                        tm.addRow(record); 
                    } 

                }else{

                    if(ctr >= ans1){

                        next.setSize(0,0);
                        PREV.setSize(89,15);
                        res = state.executeQuery("SELECT * FROM `item` ORDER BY `id` ASC LIMIT "+last+",5");
                        while(res.next()){               
                            int item = res.getInt("id");
                            String item1 = res.getString("item1");
                            String item2 = res.getString("item2");
                            Object record [] = {item,item1,item2};
                            tm.addRow(record); 
                        } 

                    }else{
                        PREV.setSize(89,15);
                        res = state.executeQuery("SELECT * FROM `item` ORDER BY `id` ASC LIMIT "+page_num+",5");
                            while(res.next()){               
                            int item = res.getInt("id");
                            String item1 = res.getString("item1");
                            String item2 = res.getString("item2");
                            Object record [] = {item,item1,item2};
                            tm.addRow(record); 
                        } 
                    }
                }

            }catch(SQLException e){
                System.out.print(e.getMessage());
            }

    }else{

        int ans = (id/5) + 1;
        int last = (ans * 5)-5;

        try{

            if(ctr == ans || ctr > ans){   

                next.setSize(0,0);    
                PREV.setSize(89,15);

                res = state.executeQuery("SELECT * FROM `item` ORDER BY `id` ASC LIMIT "+last+",5");
                    while(res.next()){
                        int item1 = res.getInt("id");
                        String size_Code = res.getString("size_code");
                        String size_Name = res.getString("size_name");
                        Object record [] = { item1, size_Code, size_Name};
                        tm.addRow(record);                    
                    }   

            }else{

                PREV.setSize(89,15);

                res = state.executeQuery("SELECT * FROM `item` ORDER BY `id` ASC LIMIT "+page_num+",5");
                    while(res.next()){               
                            int item = res.getInt("id");
                            String item1 = res.getString("item1");
                            String item2 = res.getString("item2");
                            Object record [] = {item,item1,item2};
                            tm.addRow(record); 
                        } 
            }

        }catch(SQLException e){
            System.out.print(e.getMessage());
        }        
    }

    } 
```

# c# - 从父级调用特定 MDI 子级的方法

> ID：10706963
> 
> 赞同：3
> 
> 时间：2012-05-22T17:24:16.343
> 
> 标签：c#, winforms

我有一个 MDI 父窗口，它可以包含来自特定子级的多个实例，称为**frmChild**。现在，当从父级单击特定控件时，我需要获取活动的 frmChild 并**从 frmChild 调用特定方法**

下面是我正在尝试实现的图像（获取活动的 MDI 子并从该类调用特定方法）：

[![一只忙碌的猫](../Images/2a560eb3ee059722301b4c3ee05700ff.png)](https://i.stack.imgur.com/bh3Ag.jpg)

现在每个 frmChild 都通过以下方式实例化：

```
private void newFileToolStripMenuItem1_Click(object sender, EventArgs e)
    {
        frmNewDocument = new frmNewDocument();
        frmNewDocument.MdiParent = this;
        frmNewDocument.Show();
    } 
```

当我想从**活动的 frmChild**调用方法时，我正在尝试以下操作并被卡住：

```
private void saveFileToolStripMenuItem1_Click(object sender, EventArgs e)
    {
        /* get active MDI child*/
        Form frmActiveNewDocument = this.ActiveMdiChild;           

        /* make sure MDI child is a "New Document" type form */
        if (frmActiveNewDocument.GetType() == frmNewDocument.GetType())
        {
            /* invoke a method from active frmChild here */
        }
    } 
```

我仍在学习 OOP，并且确信这是一些原则。如果能在文章中提到，那也太好了。

**注意：我读到对 frmChild 的干扰是解决此问题的最佳方法，因此主窗体不需要在每个 frmChild 中进行挖掘，因此我创建了一个 frmChild 使用的接口，即：**

```
 public interface NewFileFormInterface
{
    void saveFile();
} 
```

现在，**saveFile()**是我想从 Main 调用的方法，它在 frmChild 中实现。

关于这个问题的任何帮助以及我可以研究的一些关键字都会很棒。

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:52:49.280

```
frmNewDocument child = ActiveMdiChild as frmNewDocument;
if (child != null)
{
    child->saveFile();
} 
```

as 关键字执行运行时强制转换。如果对象（本例中为 ActiveMdiChild）为 null 或不是 as 类型，则结果将为 null。

[http://msdn.microsoft.com/en-us/library/cscsdfbt.aspx](http://msdn.microsoft.com/en-us/library/cscsdfbt.aspx)

您可能也有兴趣阅读： [.Net 命名约定指南](http://msdn.microsoft.com/en-us/library/ms229002)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:57:54.840

尝试这个：

```
if (ActiveMdiChild is frmNewDocument)
{
    (ActiveMdiChild as frmNewDocument).saveFile();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-10T19:07:13.743

我知道这很旧，但这一直对我有用。

在子代码中：

```
public void SaveFile()
{
  // Some code goes here.
} 
```

在父代码中：

```
frmNewDocument child = this.ActiveMdiChild as frmNewDocument;
if(child != null)
{
  child.SaveFile();
} 
```

希望这可以帮助其他正在寻找更简洁有效答案的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-30T18:32:16.977

我是这样做的。“AuditAddMod”是一种形式。我有平行的孩子。该表单中有一个公共的“PassData（）”方法，该方法被调用并在同级表单中执行我需要的操作。

```
private void LoadRelatedFollowUpAuditTable()
{
   foreach (Form form in this.MdiParent.MdiChildren)
   {
      if (form.Name == "AuditAddMod" && form.Text != this.Text)
      {
         ((AuditAddMod)form).PassData(form.Name, 1);
      }
   }
} 
```

# tfs - TFS 2010 Iteration backlock Excel 文件未在设置选项卡上列出区域和迭代

> ID：10706964
> 
> 赞同：0
> 
> 时间：2012-05-22T17:24:18.810
> 
> 标签：tfs

我们正在使用 TFS 2010 的敏捷模板，我正在尝试设置不同于默认的迭代层次结构（使用“迭代 1”、“迭代 2”和“迭代 3”）。

我有两个关于迭代积压的 Excel 文件的问题。大多数人遇到的问题是，默认生成的 Excel 工作表不起作用，甚至在引用不再存在的查询/迭代时也无法更改。[我按照这个 stackoverflow 问题](https://stackoverflow.com/questions/6452747/tfs2010-opening-certain-excel-reports-gives-error-tf80076)（也在[这里](http://blogs.msdn.com/b/aaronbjork/archive/2010/03/16/unbound-agile-workbooks.aspx)描述）中给出的建议解决了这个问题，方法是从模板下载原始文件，将其链接到我们的服务器，然后将其上传到共享文档文件夹。

一切正常（Excel 文件正确列出了查询的工作项等），除了文件的第二张表，称为“设置”。此工作表有两个单元格用于输入区域和要过滤的迭代。

第一个问题（出于好​​奇）：考虑到区域和迭代已经在文件所基于的查询中过滤，这个过滤器的目的是什么。

第二个问题（这是真正的问题）：我在这些字段中输入的任何值都被 Excel 拒绝，告诉我“您输入的值无效”。每个单元格都有一个下拉列表，这些列表似乎包含单元格唯一可能的值。区域单元的下拉列表为空，迭代单元的下拉列表列出了一个迭代，称为“迭代 1”。这很令人困惑，因为我的项目中没有这样的迭代。听起来好像这是默认设置的残余。那么我该如何纠正呢？

我在网上没有找到太多关于这个主题的内容（除了[这篇文章](http://blogs.msdn.com/b/aaronbjork/archive/2009/05/18/enabling-the-iteration-backlog-workbook-on-an-upgraded-team-project.aspx)评论中的一个人，他准确地描述了我遇到的问题但没有解决方案）。我希望这里有人有想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:03:24.480

回答我的第一个问题：设置选项卡上的过滤器允许过滤迭代中的区域/子迭代。这是有道理的，因为列表所基于的查询通常包括某个区域/迭代*下的所有区域/迭代。*

我确实找到了第二个问题中描述的问题的解决方法，但没有真正的解决方案。问题是：不要按照[上述问题](https://stackoverflow.com/questions/6452747/tfs2010-opening-certain-excel-reports-gives-error-tf80076)（和[相关帖子](http://blogs.msdn.com/b/aaronbjork/archive/2010/03/16/unbound-agile-workbooks.aspx)）的解决方案中给出的说明进行操作。相反，请遵循以“当时团队项目..”开头的替代答案，其中包括在删除默认创建的迭代和查询之前更改与项目一起创建的文件。这有点棘手，因为在删除默认迭代之前，您必须绝对确定所有内容都已更改并正常工作。

# amazon-ebs - 将 Amazon EBS 与微实例结合使用时的 I/O 请求问题

> ID：10706966
> 
> 赞同：0
> 
> 时间：2012-05-22T17:24:20.740
> 
> 标签：amazon-ebs

我正在使用带有 EBS 的微实例，但是由于大量的 I/O 请求，使用 ebs 的成本对我们来说是个大问题。

你能建议我用更少的 I/O 请求来使用 ebs 卷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T10:29:04.287

当我们使用 ebs 支持的实例时，我们会为每个硬盘读取/写入付费。我们可以使用缓存来避免 I/O 请求并节省 80% 的资金。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:48:27.673

与本地磁盘阵列或良好的 SAN 相比，EBS 的速度并不快。

通过将多个 EBS 卷条带化到软件 RAID 配置中，可以实现近乎线性的性能提升。上次我测量您开始在 4 个 EBS 卷的小实例或 8 个大实例的 EBS 卷中开始获得递减收益。从未测量过微观实例。

添加 EBS 卷不是免费的，但至少这为您提供了一个选择。

# ios - 这在 Objective-C 中意味着什么

> ID：10706974
> 
> 赞同：2
> 
> 时间：2012-05-22T17:24:43.797
> 
> 标签：ios, objective-c, implementation, objective-c-category

我有一个名为 ManageAddressBook.m 的文件，该文件里面有两个 @implementation

第二个是什么意思？

```
@implementation ManageAddressBook

@end

@implementation NSString (Additions)

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T17:27:09.370

第一个实现只是一个新类。第二种实现基本上是现有类的扩展方法，称为类别。有关更多信息，请参阅文章：[类别和扩展](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)。

正如链接顶部的总结：

> 类别允许您将方法添加到现有类——甚至是您没有源代码的类。类别是一个强大的功能，它允许您扩展现有类的功能而无需子类化。使用类别，您还可以在多个文件中分发您自己的类的实现。类扩展类似，但允许在主类@interface 块内以外的位置为类声明额外的必需 API。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T17:26:58.510

第二个在 上实现了一个 Objective-C[*类别*](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)`NSString`，即在 上操作但`NSString`不是由`NSString`类的编写者提供的方法。

添加类别可以让您以某种类似于 C# 的扩展方法的方式扩展类的功能：对象开始响应类别中定义的消息，从而方便您以灵活和模块化的方式编写功能。

# android - 填充操作栏“向上”指示器图像

> ID：10706975
> 
> 赞同：16
> 
> 时间：2012-05-22T17:24:44.920
> 
> 标签：android, actionbarsherlock

我正在寻找一种方法来设置 ActionBar 的“向上”图标的样式，当您将其配置为从 Activity 显示时显示该图标：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

我一直在环顾四周，找到了一种在主页图标和标题之间添加填充的方法（[ActionBar 的主页图标和标题之间的填充](https://stackoverflow.com/questions/9737101/padding-between-actionbars-home-icon-and-title)），但不是在主页图标和向上指示器图标之间添加填充的方法。

我深入`ActionBarView.HomeView`研究了 android 源代码，它似乎通过这个调用夸大了向上指标：

```
mUpView = findViewById(com.android.internal.R.id.up); 
```

问题是`com.android.internal.R.id.up`内部的，所以我无法访问它，所以上面用于填充主页图标的链接解决方案将不起作用。理想情况下，我想覆盖`ActionBarView.HomeView`，但它在`ActionBarView`.

有谁知道 ActionBarSherlock 是否提供了覆盖此行为的好方法？我已经考虑过提供一个自定义的主页布局，但我发现的线程表明，偏离标准的 android 类并不是一个好主意。

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-25T21:54:11.493

该解决方案将起作用

```
ImageView view = (ImageView)findViewById(android.R.id.home);
view.setPadding(10, 0, 0, 0); 
```

但是，您将被迫将此代码放在父 Activity 中，或者在您想要将填充添加到主页按钮的每个 Activity 中。

我建议这种方法：

1.  使用以下代码创建一个可绘制图层列表：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
        <item>
            <bitmap
                android:antialias="true"
                android:gravity="center"
                android:src="@drawable/btn_back_actionbar_normal" />
        </item>
        <item>
            <shape android:shape="rectangle" >
                <size android:width="24dp" />
                <solid android:color="@android:color/transparent" />
            </shape>
        </item>
    </layer-list> 
    ```

2.  在您的样式中添加：

对于值 11：

```
<item name="android:homeAsUpIndicator">@drawable/actionbar_back_selector</item> 
```

对于值：

```
<item name="homeAsUpIndicator">@drawable/actionbar_back_selector</item> 
```

这样，您将在返回按钮和兼容操作栏中的主页按钮之间添加填充，并且您只需添加一次此代码，并且将在整个应用程序中可用！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-10T20:18:23.573

从 API 15 开始，这些元素的位置被硬编码到布局资源中。您唯一的选择是使用自定义导航布局来创建您自己的并隐藏内置的主页导航。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-04T20:23:02.050

其实[这个答案](https://stackoverflow.com/a/10120562/1169961)是正确的。只需设置主页按钮的左侧填充，它将在主页按钮和向上箭头之间添加填充

```
 ImageView view = (ImageView)findViewById(android.R.id.home);
    view.setPadding(10, 0, 0, 0); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T20:23:31.080

如果您将填充添加到图形（例如在 Photoshop 中）并将此图形设置在具有属性的主题上，也许它会起作用

```
<item name="android:homeAsUpIndicator">@drawable/up_with_padding</item> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-12T04:51:22.037

在我的手机里，它的工作。解决方案如下：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
    <bitmap
        android:src="@drawable/frame_menu"
        android:antialias="true"
        android:gravity="center" 
        />
</item>
<item >
    <shape android:shape="rectangle">
        <size android:width="24dp"/>
        <solid android:color="@android:color/transparent"></solid>
        <padding
            android:right="10dp" 
            />
    </shape>

</item> 
```

最重要的一句话是“android:right=10dp”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-14T10:35:59.967

我只想添加到@blacksh33p 回答如何在使用 ActionBarSherlock 支持旧手机时获取徽标 ImageView。

```
ImageView view = (ImageView)findViewById(android.R.id.home);
if (view == null)
    view = (ImageView)findViewById(R.id.abs__home); // not sure that the name is exactly this - I tested it while developing an app on monodroid 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-28T04:49:55.160

只需添加可绘制布局调用“actionbar_back_selector”并将此代码

并在Java文件中（你需要相应的java文件的主页按钮）把这段代码ActionBar actionBar = getActionBar(); actionBar.setDisplayHomeAsUpEnabled(true); actionBar.setHomeButtonEnabled(true); actionBar.setHomeAsUpIndicator(R.drawable.actionbar_back_selector);

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-11T02:11:45.177

您可以在您的主题中为“HomeAsUpIndicator”定义一个样式，如下所示：

`<item name="toolbarNavigationButtonStyle">@style/MyToolbarNavigationButtonStyle</item>`

其中，`toobarNavigationButtonStyle`用于定义该指标的所有样式，您可以更改它的宽度和 paddingEnd 以扩大它与标题文本之间的差距。

# ruby - 如何使用 Ruby (Watir/WebDriver) 捕获 GET 调用？

> ID：10706976
> 
> 赞同：1
> 
> 时间：2012-05-22T17:24:56.043
> 
> 标签：ruby, rest, watir, watir-webdriver

在我正在测试的网页上，当用户单击选择列表中的选项时会进行 GET 调用。GET 看起来像这样：

```
GET /mediaportal/captions/SCH/Follow%20Up%20with%20the%20Robles%20Family_SCH.xml 
```

如何告诉 Ruby 侦听 GET 请求并捕获它，或者更具体地说，捕获并将上面 GET 中请求的 url 放入变量中。

（*我正在使用 watir-webdriver gem，我希望里面有一些东西可以让我这样做。*）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T22:48:03.717

尝试 net/http 宝石：

```
require 'net/http'
uri = URI('http://yoursite.com/mediaportal/captions/SCH/Follow%20Up%20with%20the%20Robles%20Family_SCH.xml ')
Net::HTTP.get(uri) # => String 
```

有关更多信息，请在此处尝试： [http ://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T05:21:03.810

好的 - 我做了一些更多的研究，结果发现 webrick Web 服务器捆绑了一个 HTTP 代理。（使用 Ruby 的常见经验 - 解决方案通常比预期的更接近。）[这个问题](https://stackoverflow.com/questions/902427/ruby-how-to-catch-all-http-traffic-local-proxy)的答案很好地总结了它，并指向[一篇博客文章](http://altentee.com/blogs/2008/httpwatch-a-free-alternative-using-ruby/)，其中给出了如何做到这一点的代码示例。

您使用 WEBrick::HTTPProxyServer 启动服务器，然后您应该能够拦截所有流量。一个挑战可能是通过您的测试代码与该服务器进行交互。如果不设置某种服务器，可能很难做到这一点。但是，如果您只想监听特定呼叫，那么您可以将服务器作为测试套件的一部分启动，然后在呼叫出现时将其关闭。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-23T07:35:15.213

我认为让 http 流量通过代理可能是您处理此问题的最简单方法。或者忽略功能级别测试幕后的 api，并专注于 UI 在从该请求获得响应时发生的任何事情。如果您需要测试 REST api itef，请编写在 API 级别工作的单独 API 测试自动化。

[http 代理服务器的](https://gist.github.com/74107)这个要点可能是您可以使用的东西

如果你想直接测试 REST API，我推荐使用[REST-Client](https://www.ruby-toolbox.com/projects/rest-client) gem。如果流量是 JSON 格式，那么[JSON-spec gem](https://github.com/collectiveidea/json_spec)也是一个救星，特别是如果您需要一个用于 rspec/cucumber 验证步骤（.should 匹配器和 cucumber 'then' 步骤）的优秀库。 [我做了一个](https://github.com/watir/watir-bazaar/wiki/Presentations)关于使用 cucumber 和这两个用于在测试自动化集市上进行 API 测试的宝石……我第一次展示这些东西，（我应该有时间制作幻灯片，但希望那里的内容至少能让您大致了解如何开始。）

# c# - 读取 SOAP 消息响应 ASP.NET MVC4 C#

> ID：10706979
> 
> 赞同：2
> 
> 时间：2012-05-22T17:25:10.370
> 
> 标签：c#, xml, asp.net-mvc, soap, asp.net-mvc-4

我有一个远程托管的 XML SOAP 消息，我需要在我的 ASP.NET MVC C# Web 应用程序中读取它。我对上述所有技术都是新手，所以请放轻松。

1.  如何连接到数据源
2.  如何创建模型来对 SOAP 消息进行建模
3.  我需要什么 LinQ 查询才能将“GetMetalQuoteResult”的内容转换为 C# 对象？例如，访问soap 消息响应的各个元素。

下图。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <soap:Body>
        <GetMetalQuoteResponse xmlns="http://.../...">
            <GetMetalQuoteResult>
                <Type>string</Type>
                <Currency>string</Currency>
                <Date>Date</Date>
                <Time>Time</Time>
                <Rate>decimal</Rate>
                <Bid>decimal</Bid>
                <BidTime>Time</BidTime>
                <ExpTime>DateTime</ExpTime>
                <DisplayTime>Time</DisplayTime>
                <DisplayDate>Date</DisplayDate>
                <Ask>Decimal</Ask>
                <AskTime>Time</AskTime>
            </GetMetalQuoteResult>
        </GetMetalQuoteResponse>
    </soap:Body>
</soap:Envelope> 
```

目前，我的控制器中有以下代码。

```
var xml = XElement.Load(url);
System.Diagnostics.Debug.WriteLine("");
foreach (XElement x in xml.Nodes())
{
    System.Diagnostics.Debug.WriteLine(x.Name + ":\n"+ x.Value);
}
System.Diagnostics.Debug.WriteLine(""); 
```

但这只是返回以下内容：

```
{http://schemas.xmlsoap.org/soap/envelope/}
Body:XAUGBP5/22/201212:21:04 PM1000.86251000.862512:21:04 PM2012 May 22 12:21 PM BST1:21:04 PM EDT05/22/121001.249412:21:04 PM 
```

我需要它在单独的行上返回：

```
Type: XAU
Currency: GBP
Date: 5/22/201212:21:04
....
.... 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:29:58.593

一个不错的选择可能是生成客户端代理类。您可以通过在 Visual Studio 中添加服务引用或使用[wsdl.exe](http://msdn.microsoft.com/en-us/library/7h3ystb6.aspx)命令行工具来执行此操作。这样，您可以调用该方法并以常规 C# 对象的形式接收结果，而不必过多担心 SOAP 基础结构。

拥有客户端代理后，您可以编写如下所示的代码：

```
var client = new ServiceReference.ServiceClient();
var result = client.GetMetalQuote();
System.Diagnostics.Debug.WriteLine(result.GetMetalQuoteResult.Currency);
// etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:26:13.143

```
 string url = "http://www..../...";
        var xml = XElement.Load(url);
        XNamespace ns = "http://.../...";
        var results =
            from result in xml.Descendants(ns + "GetMetalQuoteResult")
            select new SpotPriceModel
            {
                Type = result.Element(ns + "Type").Value,
                Currency = result.Element(ns + "Currency").Value,
                ...
                ...
                Ask = (decimal)result.Element(ns + "Ask"),
                AskTime = result.Element(ns + "AskTime").Value
            };

        var spot = results.First();

        System.Diagnostics.Debug.WriteLine("\n\nASK:\t" + spot.Ask + "\n\n");

        return View(spot);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T18:44:18.813

您可以使用它来获得结果：

```
var result = root1.Descendants()
     .First(x => x.Name.LocalName == "GetMetalQuoteResult")
     .Elements()
     .Select(x => new { Name = x.Name.LocalName, Value = x.Value })
     .ToArray(); 
```

要获取结果值：

```
foreach(var x in result)
    System.Diagnostics.Debug.WriteLine(x.Name + ": "+ x.Value); 
```

# php - 从 PHP 中的 foreach 语句迭代单个字段

> ID：10706980
> 
> 赞同：1
> 
> 时间：2012-05-22T17:25:19.350
> 
> 标签：php, joomla

让我们看看......从哪里开始？好的，是的，我正在使用 Joomla 并尝试修改名为 JomSocial 的 Joomla 组件中的一些代码。我未能做到这一点并不是基于了解组件或 Joomla 系统中发生了什么，只是因为我无法很好地阅读 PHP 代码来修改正在发生的事情。

本质上，此脚本会输出来自选定用户的所有配置文件信息位的定义列表。这很好，但我需要在站点的不同部分重复使用此代码，我只想使用一个或两个字段，而不是整个用户配置文件字段数组。

我在这里包含了脚本中的大部分代码，但我真的觉得我寻求的答案要简单得多，而且只是一般的 PHP 知识。具体来说，我将如何回显 foreach 语句所显示的字段数组。

如果这是你们中的任何人都愿意提供帮助的事情，那太棒了。如果在一般 PHP 问题部分解决了这个问题，那么链接也很棒。我尝试在 PHP 答案中搜索类似的内容，但似乎没有人在做我在这里要求的事情。

同样，我真正需要的是能够完成这段代码正在做的事情，只需通过迭代单个字段来完成它，而不是通过转储每个字段。

非常感谢，Thomas Harrison， *我敬畏地看着你。*

```
<?php foreach( $profile['fields'] as $groupName => $items ): 

        // Gather display data for the group. If there is no data, we can 
        // later completely hide the whole segment
        $hasData = false;
        ob_start();

        ?>
        <div class="cProfile-About">
        <?php if( $groupName != 'ungrouped' ): ?>
        <h4><?php echo JText::_( $groupName ); ?></h4>
        <?php endif; ?>

        <dl class="profile-right-info">
            <?php foreach( $items as $item ): ?>
                <?php
                if( CPrivacy::isAccessAllowed( $my->id , $profile['id'] , 'custom' , $item['access'] ) )
                {
                    // There is some displayable data here
                    $hasData = true;
                ?>
                    <dt><?php echo JText::_( $item['name'] ); ?></dt>
                    <?php if( !empty($item['searchLink']) && is_array($item['searchLink']) ): ?>
                        <dd>
                            <?php foreach($item['searchLink'] as $linkKey=>$linkValue): ?>
                            <?php $item['value'] = $linkKey; ?>
                                <a href="<?php echo $linkValue; ?>"><?php echo CProfileLibrary::getFieldData( $item ) ?></a><br />
                            <?php endforeach; ?>

                        </dd>
                    <?php else: ?>
                        <dd>
                            <?php if(!empty($item['searchLink'])) :?>
                                <a href="<?php echo $item['searchLink']; ?>"> 
                            <?php endif; ?>

                            <?php echo CProfileLibrary::getFieldData( $item ); ?>

                            <?php if(!empty($item['searchLink'])) :?>
                                </a> 
                            <?php endif; ?>
                        </dd>
                    <?php endif; ?>
                <?php
                }
                ?>
            <?php endforeach; ?>
        </dl>
    </div>
    <?php 
    $html = ob_get_contents();
    ob_end_clean();

    // We would only display the profile data in the group if there is actually some
    // data to be displayed
    if( $hasData ):
        echo $html;
        $noData = false;
    endif;
    endforeach; 

if ($noData)
    echo ($isMine) ? JText::_('COM_COMMUNITY_PROFILES_SHARE_ABOUT_YOURSELF') : JText::_('COM_COMMUNITY_PROFILES_NO_INFORMATION_SHARE'); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T17:31:12.083

我认为（如果我理解正确的话）您应该只需要执行以下操作：

```
$profile['fields']['name'] //Replace 'name' with whatever field name you are after 
```

如果您愿意，您可以`echo`将其存储在另一个变量中以供以后使用。

`'name'`只要您知道字段名称是什么，您也可以通过更改代码部分来访问任何其他字段。

要找出存储在其中的所有数据，`$profile['fields']`您可以执行以下操作`print_r($profile['fields']);`，以这种格式打印所有字段：

```
Array
(
    [name] => Fred Bloggs
    [Age] => 23
) 
```

然后，您可以使用方括号中的任何内容代替`'name'`来获取该字段的值。

***编辑***

使用您的 pastebin 示例 (http://pastebin.com/UbiHbDsL) 说您想访问第 21 行的值：

```
[0] => Male 
```

你会用这个：

```
$profile['fields']['Basic Information'][0]['options'][0] 
```

这基本上是深入到每个方括号集的数组结构中。`Echo`上面会输出：

> 男性

# button - 选择按钮时如何删除多余的边框？

> ID：10706981
> 
> 赞同：1
> 
> 时间：2012-05-22T17:25:22.237
> 
> 标签：button, border, selected

我在堆栈面板中有几个按钮，当我单击按钮时，我会得到一个额外的白色边框，只有当我单击任何其他按钮时它才会消失。我托盘设置 focusable="false" 但是当按钮处于单击状态时边框仍然存在。我什至尝试将borderthickness设置为透明，但它没有用。我正在使用 xaml。

谢谢

# core-audio - iPhone 的耳机插孔可以用作设备的输入吗？

> ID：10706983
> 
> 赞同：1
> 
> 时间：2012-05-22T17:25:25.700
> 
> 标签：core-audio, audiounit

我正在通过 iPhone 的耳机插孔开发遥控器。这个需要：

*   在 Sending 模式下，Send signal (19kHz) 和 signal (10kHz) 分别为 1 和 0
*   在学习模式下，接收其他遥控器的相应信号

我读了一个网站，它介绍了 AudioUnit (http://cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html) 来生成用于发送的音调

但是学习模式呢？我的应用程序如何将 19kHz 和 10kHz 检测为 1 和 0 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:14:10.107

是的，这个想法应该可行，但 19kHz 可能正在突破 iPhone 录音能力的极限。您可以在此处找到 iPhone 设备频率响应的完整[比较](http://blog.faberacoustical.com/2010/ios/iphone/iphone-4-audio-and-frequency-response-limitations/)。请注意，19kHz 落在奈奎斯特频率的边缘，因此会有更多的滚降。因此，学习模式可能是必要的功能，具体取决于设备系列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:01:33.823

一个简单的 DSP Goertzel 滤波器将能够以低数据速率检测这些音调。要获得更高的数据速率，请在业余无线电杂志或网站中查找 FSK 解调代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:21:27.693

您有 2 个问题需要解决：

1.  如何获取音频
2.  如何检测音调。

第一：音调生成示例代码将audiounit设置为输出，non用于输入。获取输入的一种方法是使用 aurioTouch，但根据我的经验，通过 SpeakHere 示例代码要简单得多。您可以在这里找到一个好主意[http://www.youtube.com/watch?v=bINtRRyblZA](http://www.youtube.com/watch?v=bINtRRyblZA) 第二：要检测音调，您可以使用由 FFT 和 vDsp 制作的音高检测器（或 Goertzel 滤波器，但我不知道您是否可以在 ObjC 中找到已经制作的代码）

最后，您可以使用 SpeakHere 简单地通过谷歌搜索找到用于输入和音高检测的示例代码。希望这有帮助

# database - 数据库：主键、集群或非集群

> ID：10706992
> 
> 赞同：36
> 
> 时间：2012-05-22T17:26:16.563
> 
> 标签：database, sql-server-2008, primary-key, clustered-index

我正在 SQL Server 2008 中创建一个数据库，

```
CREATE TABLE Users
(
    U_Id INT NOT NULL
    FirstName VARCHAR(50) NOT NULL,
    LastName VARCHAR(50) NOT NULL,
    Email VARCHAR(200)
    Password VARCHAR(50)
) 
```

我想让 U_Id 成为主键。我想问一下有什么区别

```
 CONSTRAINT pk_UserID PRIMARY KEY (U_Id) 
```

这

```
 CONSTRAINT pk_UserID PRIMARY KEY CLUSTERED (U_Id) 
```

还有这个

```
CONSTRAINT pk_UserID PRIMARY KEY NONCLUSTERED (U_Id) 
```

什么时候使用每个？

我读了一些文章，但我仍然不清楚。有人可以给我一个快速的解释吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-22T17:50:05.873

以下声明：

```
CONSTRAINT pk_UserID PRIMARY KEY (U_Id) 
```

和这个一样：

```
CONSTRAINT pk_UserID PRIMARY KEY CLUSTERED (U_Id) 
```

您只能使表数据物理性按**其中一个**索引排序，并且默认情况下，该索引是用于主键的索引（索引始终支持主键唯一约束）。

如果您想根据其他索引保留要存储的表数据的顺序，那么您应该使用以下命令创建主键：

```
CONSTRAINT pk_UserID PRIMARY KEY NONCLUSTERED (U_Id) 
```

然后使用以下命令创建聚集索引：

```
CREATE CLUSTERED INDEX ix_Email ON Users (Email); 
```

# javascript - 用于提取文本 Javascript 的 HTML 解析器

> ID：10706996
> 
> 赞同：0
> 
> 时间：2012-05-22T17:26:30.223
> 
> 标签：javascript, html

嗨，有人知道 Javascript 中的 HTML 解析器吗？我需要它基本上将所有可读文本从我的标签云文件中提取出来......不仅仅是元标签，而是其中的所有内容：

标签：

```
<meta><p><h1-3><textbox><textarea> 
```

基本上你明白了。

我看到了 John Resig 的，但这将一切都更改为 XML。在我尝试使用它然后只解析 XML 之前，我不知道这可能更容易，我想看看那里是否已经存在某些东西。

任何帮助将不胜感激，在此之前我会继续环顾四周，或者我可能会自己做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:27:38.553

使用 jQuery，您可以执行以下操作：

```
$(myfileContents).text(); 
```

`myFileContents`文件中包含 HTML 的字符串在哪里。

# jquery - 使用链接更改单独 div 的类

> ID：10706997
> 
> 赞同：2
> 
> 时间：2012-05-22T17:26:30.290
> 
> 标签：jquery, css, jquery-animate

我需要先将`.light`类添加到`#banner`页面加载时，然后`#change`单击时，我想将类淡化`.light`为`.dark`

```
<style type="text/css>
  #banner { width: 1000px; height: 500px; }
  .light { background: url(light.jpg) #ffffff; }
  .dark { background: url(dark.jpg) #000000; }
</style>

<script type="text/javascript">
  // no idea what to do
</script>

<div id="banner">
  stuff
</div>

<div id="container">
  <div id="leftCol">
    <a href="#" id="change">Change</a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T17:32:05.257

解决了。

**现场演示：http:** [//jsfiddle.net/oscarj24/Yh7pE/9/](http://jsfiddle.net/oscarj24/Yh7pE/9/)

```
$(function(){
  $("#banner").addClass("light");
  $("#change").on("click", function(e){
    $("#banner").toggleClass("light").hide().toggleClass("dark").fadeIn();
    e.preventDefault();
  });
});​ 
```

**CSS：**

```
 .light { 
        background: url(http://oursaviorschurch.com/img/bg_banner.jpg) #ffffff; 
        opacity: 0.30; /* FX, Safari, GC, Opera, decent browsers */
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=30)"; /* IE8 */
        filter: alpha(opacity=30); /* IE */
        /* in Safari, FX and Chrome add a fade transition */
        -webkit-transition: opacity .25s linear .1s;
        transition: opacity .25s linear .1s;  
    }

    .dark { 
        background: url(http://oursaviorschurch.com/img/bg_banner_dark.jpg) #000000;  
        opacity: 1; /* FX, Safari, GC, Opera, decent browsers */
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)"; /* IE8 */
        filter: alpha(opacity=100); /* IE */
    }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:28:42.880

```
$(function() {
  $('#banner').addClass('light');
  $('a#change').on('click', function(e) {
    e.preventDefault();
    $('#banner').removeClass('light').addClass('dark');
  });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T17:28:40.150

对于褪色，您需要[在](http://jqueryui.com)您的`<head>`：

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.20/jquery-ui.min.js">
</script> 
```

然后剩下的：

```
// Wait until the document is ready before proceeding
$(function(){

  // Cache a reference to the banner to jQuery doesn't have to find it again
  var $banner = $("#banner");    

  // Immediately add the 'light' class
  $banner.addClass("light");

  // When #change is clicked, swap the classes on #banner
  $("#change").on("click", function(e){

    // Prevent the link from changing the page
    e.preventDefault();

    // Remove 'light', and add 'dark'
    $banner.addClass("dark", 1000).removeClass("light");

  });

});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:44:05.580

你想要动画类。对？这是一个带有现场演示的简单代码

```
$(document).ready(function(){
  $("#banner").addClass("light");
  $("#change").click(function(){
    $("#banner").stop(0,0).addClass("dark",800).removeClass("light",800);   
  });
}); 
```

**一个工作示例在这里** [http://jsfiddle.net/8nrzh/](http://jsfiddle.net/8nrzh/)