# StackOverflow 问答 12222000-12222999

# logging - slf4j 日志记录语法

> ID：12222001
> 
> 赞同：7
> 
> 时间：2012-08-31T20:21:17.503
> 
> 标签：logging, slf4j

我在一个项目中有 3 个开发人员，他们在写入日志时具有不同的风格。这些变体中哪个最好？

```
LOG.info("error = {}", errmsg);
LOG.info("error = ", errmsg);
LOG.info("error = " + errmsg); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T20:25:35.433

```
LOG.info("error = {}", errmsg); 
```

正确和最好的。

```
LOG.info("error = ", errmsg); 
```

这很可能是错误的。除非`errmsg`是异常，否则永远不会被记录。

```
LOG.info("error = " + errmsg); 
```

这个表现不如第一个。每次点击此行时都会运行`String`连接，而在第一种情况下，只有在实际记录语句时才会发生变量替换。

^(前段时间[我在博客上写了](http://nurkiewicz.blogspot.no/2010/05/clean-code-clean-logs-log-exceptions.html)[slf4j](/questions/tagged/slf4j "显示标记为“slf4j”的问题")中不同的日志记录语法。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T06:09:32.123

这是最好的（在 SLF4J 之上的[jcabi-log ）：](http://www.jcabi.com/jcabi-log/)

```
Logger.info(this, "error=%s", errmsg); 
```

这是一个简短的替代方案：

```
private static Logger LOG = Logger.getLogger(Foo.class);
LOG.info(String.format("error=%s", errmsg)); 
```

首先，让一个实用程序类来处理记录器实例化很方便。其次，它用于文本格式非常方便`String.format()`，因为您始终可以看到整个字符串并且可以轻松翻译它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-25T17:08:03.197

第一种形式的改变是最好的

```
log.info("error={}", errmsg); 
```

正如其他人所说，第二个示例必须是一个错误，因为没有要插入的格式标记`errmsg`，`"error = "`除非启用`errmsg`了`Throwable`和`info`级别的日志记录。然后记录器将打印一个 stracktrace。

多年来，我更喜欢第三种形式的字符串连接。几个月或几年后，当我回去阅读代码时，我发现阅读起来更容易。

然而，正如[Tomasz Nurkiewicz](https://stackoverflow.com/users/605744/tomasz-nurkiewicz)回答的那样，第一种形式`LOG.info("error={}", errmsg);`是最好的。但是，原因不在于`String.format()`它比字符串连接更快。它不是。请参阅[在 Java 中使用 String.format 而非字符串连接是否更好？](https://stackoverflow.com/questions/925423/is-it-better-practice-to-use-string-format-over-string-concatenation-in-java).

第一种形式表现更好的原因是，如果`info`禁用级别日志记录，那么日志记录框架就不必调用 `errmsg.toString()` ，也不必执行`String.format()`。唯一`errmsg.toString()`没有性能成本的情况是 if`errmsg`是 a `String`。

我还建议`=`像 Splunk 这样的日志聚合器周围没有空格会自动索引`error=errmsg`到字段和值对。另外，如果这确实是一个错误，那么我会将其写入`error()`级别，而不是`info()`. 并且很可能`Throwable`在此代码之前的某个地方存在应该进入`Throwable`参数的异常。

而且，`logger`虽然它可能被声明为`final`，但它是一个可变对象，所以它应该是小写的。请参阅[是否应以大写形式声明“静态最终记录器”？](https://stackoverflow.com/questions/1417190/should-a-static-final-logger-be-declared-in-upper-case).

这意味着答案真的应该是

```
log.info("error={}", errMsg, exception); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T22:51:34.110

下面是实际 slf4j javadoc 的准确复制粘贴。它值得在这里访问：[http ://www.slf4j.org/api/org/slf4j/Logger.html](http://www.slf4j.org/api/org/slf4j/Logger.html)

```
import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;

 public class Wombat {

   final static Logger logger = LoggerFactory.getLogger(Wombat.class);
   Integer t;
   Integer oldT;

   public void setTemperature(Integer temperature) {
     oldT = t;
     t = temperature;
     logger.debug("Temperature set to {}. Old temperature was {}.", t, oldT);
     if(temperature.intValue() > 50) {
       logger.info("Temperature has risen above 50 degrees.");
     }
   }
 } 
```

# php - CURL 创建的 .zip 无法打开

> ID：12222002
> 
> 赞同：0
> 
> 时间：2012-08-31T20:21:23.313
> 
> 标签：php, curl

我正在尝试从另一台服务器的资产创建一个 .zip 文件，如下所示：

```
$url  = 'http://thindery.com/jsfiddle/butterfly.jpg';
$path = 'butterfly.zip'; 
$fp = fopen($path, 'w'); 
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_FILE, $fp); 
$data = curl_exec($ch); 
curl_close($ch);
fclose($fp); 
```

运行脚本后，我在服务器上看到了 .zip。当我下载 .zip 并尝试在我的 Windows 计算机上打开它时，我收到此错误：

**Windows 无法打开文件夹** 压缩（压缩）文件夹“butterfly.zip”无效。

有人知道为什么打不开吗？

**更新**

我在这里理解我的错误。我可以看到我的原始代码只是将 .jpg 保存为 .zip，而不是将 .jpg 放在存档（压缩）文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:25:47.063

您正在下载 JPEG 文件 (.jpg) 并将其保存为 .zip 文件。自然，如果您尝试将此 ZIP 文件作为存档打开，它将失败，因为文件的内容是图像，而不是存档。如果您想实际创建一个包含此 jpg 图像的 zip 存档，则需要下载该图像，然后使用[ZIP 系列函数](http://php.net/manual/en/book.zip.php)对其进行压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:32:09.743

你真的想这样做：

```
// if you have fopen wrappers forget about curl. way to complex for something simple
$jpg = file_get_contents('http://thindery.com/jsfiddle/butterfly.jpg');
$jpgName ='butterfly.jpg';

//use the built in zip functionality in php
$zip = new ZipArchive();
if ($zip->open("c:\temp\$jpgName.zip" , ZIPARCHIVE::CREATE)!==TRUE) {
    exit("cannot open c:\temp\$jpgName.zip\n");
}
$zip->addFromString($jpgName, $jpg);
$zip->close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:23:28.897

如果我的理解正确，您正在尝试将 .jpeg 文件打开为 .zip。尝试使用图像查看器打开此 zip 文件。

# django - 将 Django 字段描述从现有模型复制到新模型

> ID：12222003
> 
> 赞同：5
> 
> 时间：2012-08-31T20:21:23.767
> 
> 标签：django, django-models

我正在尝试根据现有模型中的字段动态生成新模型。两者都定义在`/apps/main/models.py`. 现有模型如下所示：

```
from django.db import models

class People(models.Model):
    name = models.CharField(max_length=32)
    age = models.IntegerField()
    height = models.IntegerField() 
```

我有一个包含要复制的字段名称的列表：

```
target_fields = ["name", "age"] 
```

我想生成一个新模型，其中包含所有在 中命名的字段`target_fields`，但在这种情况下，它们应该被索引（`db_index = True`）。

我最初希望我能够遍历其类属性`People`并用于`copy.copy`复制其上定义的字段描述。像这样：

```
from copy import copy

d = {}
for field_name in target_fields:
    old_field = getattr(People, field_name) # alas, AttributeError
    new_field = copy(old_field)
    new_field.db_index = True
    d[field_name] = new_field

IndexedPeople = type("IndexedPeople", (models.Model,), d) 
```

我不确定`copy.copy()`ing Fields 是否会起作用，但我没有深入了解：类定义中列出的字段实际上并未作为类对象的属性包含在内。我假设它们被用于一些元类恶作剧。

在调试器中四处寻找之后，我发现了某些类型的 Field 对象列在`People._meta.local_fields`. 但是，这些不仅仅是可以`copy.copy()`编辑和用于描述另一个模型的简单描述。例如，它们包含`.model`引用的属性`People`。

如何根据现有模型的字段为新模型创建字段描述？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T17:03:31.423

从调试器和源代码中探查：所有 Django 模型都`ModelBase`使用[`/db/models/base.py`](https://github.com/django/django/blob/1.4.1/django/db/models/base.py). 对于模型类定义中的每个字段，`ModelBase`'`.add_to_class`方法将调用该字段的`.contribute_to_class`方法。

`Field.contribute_to_class`在中定义，[`/db/models/fields/__init__.py`](https://github.com/django/django/blob/1.4.1/django/db/models/fields/__init__.py)它负责将字段定义与特定模型相关联。通过添加属性并使用模型类定义中使用的名称`.model`调用方法来修改字段。`.set_attributes_from_name`这反过来又添加了`.attname`和`.column`属性和集合`.name`，`.verbose_name`如果需要的话。

当我检查`__dict__`新定义的属性`CharField`并将其与`CharField`已与模型关联的属性进行比较时，我还发现这些是唯一的区别：

*   该`.creation_counter`属性对于每个实例都是唯一的。
*   新实例`.attrname`上不存在`.column`和属性。`.model`
*   和属性在新实例上`.name`。`.verbose_name``None`

似乎无法区分手动指定给构造函数的`.name`/`.verbose_name`属性和自动生成的属性。您需要选择始终重置它们，忽略任何手动指定的值，或者从不清除它们，这将导致它们始终忽略在新模型中给出的任何新名称。我想使用与原始字段相同的名称，所以我不打算碰它们。

知道存在哪些差异后，我使用`copy.copy()`它来克隆现有实例，然后应用这些更改以使其表现得像一个新实例。

```
import copy
from django.db import models

def copy_field(f):
    fp = copy.copy(f)

    fp.creation_counter = models.Field.creation_counter
    models.Field.creation_counter += 1

    if hasattr(f, "model"):
        del fp.attname
        del fp.column
        del fp.model

        # you may set .name and .verbose_name to None here

    return fp 
```

鉴于此功能，我使用以下内容创建新模型：

```
target_field_name = "name"

target_field = People._meta.get_field_by_name(target_field_name)[0]
model_fields = {}

model_fields["value"] = copy_field(target_field)
model_fields["value"].db_index = True
model_fields["__module__"] = People.__module__

NewModel = type("People_index_" + field_name, (models.Model,), model_fields) 
```

有用！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-27T09:44:51.733

## 解决方案

有用于字段复制的构建方式`Field.clone()`- 解构字段删除任何模型相关引用的方法：

```
 def clone(self):
        """
        Uses deconstruct() to clone a new copy of this Field.
        Will not preserve any class attachments/attribute names.
        """
        name, path, args, kwargs = self.deconstruct()
        return self.__class__(*args, **kwargs) 
```

因此，您可以使用以下实用程序来复制字段，以确保您不会意外影响要复制的模型的源字段：

```
def get_field(model, name, **kwargs):
    field = model._meta.get_field(name)
    field_copy = field.clone()
    field_copy.__dict__.update(kwargs)
    return field_copy 
```

也可以传递一些常规的 kwargs，如 verbose_name 等：

```
def get_field_as_nullable(*args, **kwargs):
    return get_field(*args, null=True, blank=True, **kwargs) 
```

**不适用于模型定义内的 m2m 字段。**（模型定义上的 m2m.clone() raises `AppRegistryNotReady: Models aren't loaded yet`）

## 为什么用这个而不是抽象模型？

嗯，视情况而定。有时您不需要继承，但实际需要**复制字段**。什么时候？例如：

我有一个用户模型和模型，它代表一个用于用户数据更新的应用程序（用户数据更新请求的文档）：

```
class User(models.Model):
    first_name = ...
    last_name = ...
    email = ...
    phone_number = ...
    birth_address = ...
    sex = ...
    age = ...
    representative = ...
    identity_document = ...

class UserDataUpdateApplication(models.Model):
    # This application must ONLY update these fields.
    # These fiends must be absolute copies from User model fields.
    user_first_name = ...
    user_last_name = ...
    user_email = ...
    user_phone_number = ... 
```

因此，由于某些**其他非用户逻辑扩展模型**希望具有**完全相同的字段，因此我****不应该**将重复字段从我的 User 模型执行到抽象类。为什么？因为它与 User 模型没有**直接**关系 - User 模型**不应该**关心依赖于它的东西（不包括您想要**扩展 User 模型**的情况），所以它不应该被分开，因为**它自己的一些其他模型是非 User相关逻辑**希望具有完全相同的字段。

 ******相反，您可以这样做：

```
class UserDataUpdateApplication(models.Model):
    # This application must ONLY update these fields.
    user_first_name = get_field(User, 'first_name')
    user_last_name =  get_field(User, 'last_name')
    user_email =  get_field(User, 'user_email')
    user_phone_number =  get_field(User, 'phone_number') 
```

您还可以制作 som util 来“即时”生成一些 abc 类以避免代码重复：

```
class UserDataUpdateApplication(
    generate_abc_for_model(
        User,
        fields=['first_name', 'last_name', 'email', 'phone_number'],
        prefix_fields_with='user_'),
    models.Model,
):
    pass 
```******

# c# - 带有 Func 的 IQueryable OrderBy ： 发生了什么

> ID：12222006
> 
> 赞同：7
> 
> 时间：2012-08-31T20:21:36.667
> 
> 标签：c#, linq-to-entities

使用这个问题给出的代码， [OrderBy 在传递选择器函数时不会翻译成 SQL](https://stackoverflow.com/questions/12210799/orderby-is-not-translated-into-sql-when-passing-a-selector-function/12214145#12214145)

```
Func<Table1, string> f = x => x.Name;
var t = db.Table1.OrderBy(f).ToList(); 
```

翻译后的 SQL 为：

```
SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[Name] AS [Name]
FROM [dbo].[Table1] AS [Extent1] 
```

好的。

我可以理解代码编译：`IQueryable`继承自`IEnumerable`，它有一个 OrderBy 方法，`Func<TModel, TValue>`作为参数。

我可以理解 ORDER BY 子句不是在 SQL 中生成的，因为我们没有传递一个`Expression<Func<TModel, TValue>>`作为 OrderBy 参数（用于 IQueryable 的那个）

但幕后发生了什么？“错误的” OrderBy 方法会发生什么？没有 ？我不知道如何以及为什么......我的夜晚有光吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:25:15.973

因为`f`是委托而不是表达式，所以编译器选择`IEnumerable` `OrderBy`扩展方法而不是扩展方法`IQueryable`。

这意味着所有的结果都是从数据库中获取的，因为排序是在内存中完成的，就好像它是 Linq to Objects。也就是说，在内存中，排序只能通过获取所有记录来完成。

当然，实际上这仍然不会真正发生，直到您开始枚举结果 - 在您的情况下，您会立即这样做，因为您通过调用`ToList()`.

***更新以回应您的评论***

从引入歧义的角度来看，您的问题似乎同样是关于`IQueryable`/对偶是“危险的”。`IEnumerable`真的不是：

```
t.OrderBy(r => r.Field) 
```

C# 将 lambda 视为`Expression<>`最重要的，因此如果`t`是，`IQueryable`则`IQueryable`选择扩展方法。它与通过 a和重载`string`传递给重载方法的变量相同-将使用版本，因为它是*最好的表示*。`string``object``string`

 ****正如 Jeppe 指出的那样，实际上是因为在继承接口之前使用了立即接口***

```
t.AsEnumerable().OrderBy(r => r.Field) 
```

C# 看不到 a`IQueryable`了，因此将 lambda 视为 a `Func<A, B>`，因为那是它的次佳表示。（相当于我之前的/类比中只有一种`object`方法可用。`string``object`

最后是你的例子：

```
Func<t, string> f = r => r.Field;
t.OrderBy(f); 
```

编写此代码的开发人员*不可能*期望将其视为较低级别组件的表达式以转换为 SQL，除非开发人员*从根本上不理解委托和表达式之间的区别*。如果是这样，那么一点点阅读就可以解决问题。

我不认为要求开发人员在开始使用新技术之前做一点阅读是不合理的。尤其是在 MSDN 的辩护中，这个特定的主题被很好地涵盖了。

我现在意识到，通过添加此编辑，我现在已经取消了下面@IanNewson 的评论 - 但我希望它提供了一个有意义的令人信服的论点:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T20:24:55.267

> 但幕后发生了什么？

假设`db.Table1`返回一个`Table<Table1>`，编译器将：

*   检查是否`Table<T>`有`OrderBy`方法 -没有
*   检查它实现的任何基类或接口是否有`OrderBy`方法 - 不
*   开始研究扩展方法

它将找到`Queryable.OrderBy`与`Enumerable.OrderBy`目标类型匹配的扩展方法，但该`Queryable.OrderBy`方法不适用，因此它使用`Enumerable.OrderBy`。

所以你可以把它想象成编译器已经将你的代码重写为：

```
List<Table1> t = Enumerable.ToList(Enumerable.OrderBy(db.Table1, f)); 
```

现在在执行时，`Enumerable.OrderBy`将遍历其源 ( `db.Table1`) 并根据密钥提取函数执行适当的排序。（严格来说，当它被要求提供第一个结果时，它将*立即*返回一个`IEnumerable<T>`which 将遍历源。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T20:24:12.213

可查询对象返回所有记录（因此 SQL 语句中没有 WHERE 子句），然后将 Func 应用于客户端内存中的对象，通过`Enumerable.OrderBy`. 更具体地说，OrderBy 调用解析为 Enumerable.OrderBy，因为参数是 Func。因此，您可以使用静态方法调用语法重写语句，以使其更清楚发生了什么：

```
Func<Table1, string> f = x => x.Name; 
var t = Enumerable.OrderBy(db.Table1, f).ToList(); 
```

最终结果是 OrderBy 指定的排序由客户端进程完成，而不是由数据库服务器完成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T15:09:17.007

这个答案是对 Andras Zoltan 答案的一种评论（但这太长了，不适合评论格式）。

Zoltan 的回答很有趣，而且大部分都是正确的，除了***C# 将 lambda 视为`Expression<>`首要的 [...]***。

`Expression<>`C# 将 lambda（和任何匿名函数）视为与委托和同一委托的（表达式树）同样“接近” 。根据 C# 规范，两者都不是*“更好的转换目标”*。

所以考虑这段代码：

```
class C
{
    public void Overloaded(Expression<Func<int, int>> e)
    {
        Console.WriteLine("expression tree");
    }
    public void Overloaded(Func<int, int> d)
    {
        Console.WriteLine("delegate");
    }
} 
```

然后：

```
var c = new C();
c.Overloaded(i => i + 1);   // will not compile! "The call is ambiguous ..." 
```

所以它起作用的原因`IQueryable<>`是另外一回事。直接接口类型定义的方法优于基接口中定义的方法。

为了说明，将上面的代码更改为：

```
interface IBase
{
    void Overloaded(Expression<Func<int, int>> e);
}
interface IDerived : IBase
{
    void Overloaded(Func<int, int> d);
}
class C : IDerived
{
    public void Overloaded(Expression<Func<int, int>> e)
    {
        Console.WriteLine("expression tree");
    }
    public void Overloaded(Func<int, int> d)
    {
        Console.WriteLine("delegate");
    }
} 
```

然后：

```
IDerived x = new C();
x.Overloaded(i => i + 1);  // compiles! At runtime, writes "delegate" to the console 
```

如您所见，`IDerived`选择的是 中定义的成员，而不是 中定义的成员`IBase`。请注意，我颠倒了这种情况（与 相比`IQueryable<>`），因此在我的示例中，委托重载是在最派生的接口中定义的，因此优于表达式树重载。

注意：在这种`IQueryable<>`情况下，所`OrderBy`讨论的方法不是普通的实例方法。相反，一种是派生接口的扩展方法，另一种是基接口的扩展方法。但解释是相似的。*

# ffmpeg - 应该生成哪些电影格式和分辨率以确保跨浏览器/平台兼容性？

> ID：12222007
> 
> 赞同：0
> 
> 时间：2012-08-31T20:21:36.963
> 
> 标签：ffmpeg, video-streaming, html5-video, movies

我希望从用我的数码相机拍摄的电影中生成网络视频。我应该生成什么格式，以什么分辨率和比特率来确保在移动和桌面设备上播放？

这就是我的想法：

输入格式：AVI、MOV

输出格式：webm、ogv、mp4 输出分辨率：1080p、720p、320p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:48:07.787

不是一个真正的编程问题，但无论如何我都会回答：

WebM 可以完全抛弃。很少有设备支持它。mp4 是所有设备支持的最常见格式。低端手机支持 3gpp 格式而不是 [mp4 的表亲]。如果你有它，你应该可以使用 90% 的设备。

带有 h.264/aac 的 mp4 是最常见的，对于不支持带有 mp3 的那些 mpeg4 的设备就足够了。

你有多少设备是 1080p 分辨率。最好放弃 1080p 并在其中获得一个 SD 分辨率 480p。

比特率取决于编码配置文件和内容。只需确保使用 ffmpeg 和 libx264 进行两遍编码以获得最佳质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:50:42.440

如今，大多数移动设备都可以很好地显示“高清”内容。但是，如果您希望节省人们数据计划的带宽，一个好的分辨率可能是 852x480。

现在，取决于您是否需要接近无损的质量，或者您是否可以接受视频中的小瑕疵，这将决定您的比特率。对于 1080p 和 x264，您可以在大约 15mbps 的情况下接近无损，但您可以拥有 10-11mbps 的可观看视频。我不确定其他编解码器的对比情况如何，因此您可能需要通过短视频尝试几次测试运行。

如果你做 720p，你肯定可以摆脱 4-6mbps。

使用 852x480，您可能会以低至 1.5-2mbps 的速度获得成功。

480x320，或者甚至 320x240 可能是一个不错的选择，如果您怀疑人们会在低端设备或非常慢的连接或非常有限的带宽上观看此视频。320x240 分辨率为 500kbps，480x320 分辨率为 1mbps。

这些都是起点，因为每个编解码器和选定的编码选项都会提高/降低质量。但我相信这些是很好的起点。

# wcf - 为什么 JAXB 为我的 WCF 服务生成错误的 XML？

> ID：12222009
> 
> 赞同：2
> 
> 时间：2012-08-31T20:22:01.147
> 
> 标签：wcf, xsd, jaxb, xml-serialization

我有一个 WCF 服务，它需要一个我称之为 StuffContainer 的对象。我们的客户正在尝试使用 JAXB 生成一个 XML 序列化的 StuffContainer，但结果是错误的。它们以类型名称结束，它们应该具有属性名称，因此我们无法反序列化它。

我对 JAXB 一无所知，但我认为它会根据我们的 XSD 创建一些自动生成的类，这些类可用于构建 XML 序列化对象。

这是我们自动生成的 XSD 的相关片段：

```
<xs:complexType name="StuffContainer">
    <xs:sequence>
        <xs:element minOccurs="0" name="myStuff" nillable="true" type="tns:ArrayOfStuff"/>
    </xs:sequence>
</xs:complexType>
...
<xs:complexType name="ArrayOfStuff">
    <xs:sequence>
        <xs:element minOccurs="0" maxOccurs="unbounded" name="Stuff" nillable="true" type="tns:Stuff"/>
    </xs:sequence>
</xs:complexType> 
```

我们客户的代码如下所示：

```
ObjectFactory objectFactory = new ObjectFactory();

ArrayOfStuff arrayOfStuff = objectFactory.createArrayOfStuff();
JAXBElement<ArrayOfStuff> arrayOfStuffJAXBElement = objectFactory.createArrayOfStuff(arrayOfStuff);

StuffContainer stuffContainer = objectFactory.createStuffContainer();
stuffContainer.setStuff(arrayOfStuffJAXBElement); 
```

这是他们得到的 XML：

```
<StuffContainer xmlns="..."><ArrayOfStuff>...</ArrayOfStuff></StuffContainer> 
```

但我需要它是：

```
<StuffContainer xmlns="..."><myStuff>...</myStuff></StuffContainer> 
```

我认为这是因为`JAXBElement<ArrayOfStuff>`他们从 获得`objectFactory`的`QName`设置为`"ArrayOfStuff"`，最终被使用而不是属性名称`myStuff`。但是就像我说的那样，我对 JAXB 一无所知，所以我不确定他们应该做些什么不同的事情。

我可以在 XSD 中更改什么，或者我可以要求我们的客户更改他们的代码，以便生成正确的 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:26:21.240

`ObjectFactory`生成的类上可能有多个方法。与嵌套元素对应的元素在方法名称中内置了完整路径。

# asp.net-mvc-3 - MVC3 ValidationSummary(No) 不抑制细节错误

> ID：12222011
> 
> 赞同：2
> 
> 时间：2012-08-31T20:22:07.193
> 
> 标签：asp.net-mvc-3

我有一个 MVC3 剃须刀表单，我在其中使用 @Html.ValidationSummary(false)

它显示所有错误，包括顶部的字段错误，但它也显示字段级别的字段错误。有没有办法只显示在顶部

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:32:27.003

您需要删除 Html.ValidationMessageFor(...) 行。这些是内联验证消息，与 ValidationSummary 无关。

**编辑：**使其可选：

```
@{var bool bInline = true;}
@Html.ValidationSummary(bInline)

@Html.LabelFor(m => m.MyField)
@Html.EditorFor(m => m.MyField)
@if (bInline)
{
    @Html.ValidationMessageFor(m => m.MyField)
} 
```

# python - 迭代列表中的（项目，其他）

> ID：12222013
> 
> 赞同：10
> 
> 时间：2012-08-31T20:22:21.587
> 
> 标签：python, sequence, itertools, complement

假设我有一个列表：

```
l = [0, 1, 2, 3] 
```

如何遍历列表，从列表中获取每个项目及其补充项？那是，

```
for item, others in ...
    print(item, others) 
```

会打印

```
0 [1, 2, 3]
1 [0, 2, 3]
2 [0, 1, 3]
3 [0, 1, 2] 
```

理想情况下，我正在寻找可以在理解中使用的简洁表达式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T20:23:51.607

这很容易理解：

```
for index, item in enumerate(l):
    others = l[:index] + l[index+1:] 
```

如果你坚持，你*可以*用它做一个迭代器：

```
def iter_with_others(l):
    for index, item in enumerate(l):
        yield item, l[:index] + l[index+1:] 
```

给出它的用法：

```
for item, others in iter_with_others(l):
    print(item, others) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T20:36:54.850

回答我自己的问题，可以`itertools.combinations`利用结果按字典顺序发出的事实：

```
from itertools import combinations
zip(l, combinations(reversed(l), len(l) - 1)) 
```

但是，这相当模糊。nightcracker 的解决方案对于读者来说*更*容易理解！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T11:25:32.557

关于什么

```
>>> [(i, [j for j in L if j != i]) for i in L]
[(0, [1, 2, 3]), (1, [0, 2, 3]), (2, [0, 1, 3]), (3, [0, 1, 2])] 
```

好的，这是大量的测试，@nightcracker 的解决方案可能更有效，但是呃......

# mysql - 如何在不了解列的情况下做数据透视表

> ID：12222016
> 
> 赞同：6
> 
> 时间：2012-08-31T20:22:37.343
> 
> 标签：mysql, sql, postgresql, pivot

我已经阅读了关于如何制作数据透视表的大多数关于 stackoverflow 的帖子，但所有帖子都显示了具有列先验知识的示例。如果您不知道列将是什么，您将如何构建查询。这是一些示例数据：

```
id       column       value       Row
1        age          13          1
2        height       55          1
3        fav number   NULL        1
4        siblings     4           1
5        age          55          2
6        height       54          2
7        fav number   12          2 
```

我正在寻找这个输出：

```
row        age       height        fav number       siblings
1          13        55            NULL             4
2          55        54            12               NULL 
```

如您所见，没有第 2 行缺少兄弟姐妹的条目。查询时列名未知。您将如何进行此查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:41:07.670

我看不出有任何方法可以编写一些花哨的 SELECT 查询来获得你想要的。你将不得不做一些预处理。

* * *

您必须从某种程序、应用程序、脚本等执行此 MySQL 查询。不确定该语言是什么，但这是我将在 PHP 中执行的操作：

```
/* $data is where our data is going to be stored in our desired format */
$data = array();
/* $columns is a list of all column names */
$columns = array();
/* $rows is a list of all row names (probably '1', '2', etc) */
$rows = array();

$result = mysql_query('SELECT column, value, row FROM TableName');
while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
  /* if this row isn't in $data yet, add it */
  if (!array_key_exists($row['row'], $data) {
    $data[$row['row']] = array();
  }

  /* if this column isn't in $columns yet, add it */
  if (!in_array($row['column'], $columns)) {
    array_push($columns, $row['column']);
  }

  /* if this row isn't in $rows yet, add it */
  if (!in_array($row['row'], $rows)) {
    array_push($rows, $row['row']);
  }

  /* set the actual value in our multi-dimensional array $data */
  $data[$row['row']][$row['column']] = $row['value'];
}
/* free the result (php specific thing) */
mysql_free_result($result);

/* if we didn't set anything (row, column) pairs, set it to null in $data */
foreach ($rows as $r) {
  foreach ($columns as $c) {
    if (!array_key_exists($c, $data[$r])) {
      $data[$r][$c] = null;
    }
  }
} 
```

这会将所有数据以您想要的格式放入 PHP 的数组中。

* * *

例如，在您上面提供的示例数据上运行此算法后，您将能够：

```
echo $data['2']['age']; // $data['row']['column'] 
```

这将输出 55​​。

* * *

或者，如果您的数据库没有实时更新（您有一堆数据想要重新格式化一次，而不是连续地），您可以扩展上面的脚本，使其也有一些“CREATE TABLE”、“INSERT INTO”查询基本上以您正在寻找的格式重新创建表。

此外，如果您正在实时接收数据，您仍然可以编写上述脚本，但您只想在处理它们时从原始表中删除行，然后在数据被放入时运行脚本原来的表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T01:31:55.920

我怀疑您是否可以按照您的期望在 MySQL 或 PostgreSQL 中执行此操作，但是在数据非常自由的情况下，我使用了另一种方法。我们的用例是“菜单项传递回应用程序的属性”，当然我们在查询中不知道这些。但是你不能创建一个简单的数据透视表。

不能这样做的原因是 PostgreSQL 要求返回的元组结构必须提前定义。并非所有数据库都这样做（例如，Informix 允许不同的行具有不同的结构！）但大多数都这样做。

我们的方法是 PostgreSQL-only。然而，也许通过一些调整你可以在某处找到一个 MySQL 等价物。我们所做的基本上会在您的版本中：

```
select row, array_agg("column" || '=' || "value") from sample_data group by row; 
```

这会产生如下输出：

```
1 {"age=3","height=55",null,"siblings=4"}
2 {"age=55","height=54","favorite_number=12"} 
```

您甚至可以通过以下方式摆脱 NULLS：

```
select row, array_agg("column" || '=' || "value")
 WHERE value is not null
 GROUP BY row; 
```

然后你会得到类似的东西：

```
1 {"age=3","height=55","siblings=4"}
2 {"age=55","height=54","favorite_number=12"} 
```

我不知道如何在 MySQL 中做同样的事情。

# java - 如何在java中模拟键盘按下

> ID：12222018
> 
> 赞同：5
> 
> 时间：2012-08-31T20:22:40.697
> 
> 标签：java, swing, jtextfield, awtrobot

我想模拟在 JTextField 中输入一个字符串（可以包含任何字符）。我正在为此使用 new KeyEventData() 。但我无法确定如何处理 {、}、) 等字符，以及如何将新字符附加到已输入的字符上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:50:54.873

您可以[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)为此使用，如本[示例](https://stackoverflow.com/a/2596700/230513)所示。例如，要获取`{`，您需要执行以下操作：

```
keyPress(KeyEvent.VK_SHIFT);
keyPress(KeyEvent.VK_OPEN_BRACKET);
keyRelease(KeyEvent.VK_OPEN_BRACKET);
keyRelease(KeyEvent.VK_SHIFT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:29:33.817

这可能有助于模拟键事件：[如何在 java 中模拟键盘按下？](https://stackoverflow.com/questions/7745959/how-to-simulate-keyboard-presses-in-java)

对于左右大括号，KeyEvent.VK_BRACELEFT 和 KeyEvent.VK_BRACERIGHT [http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#VK_BRACELEFT](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html#VK_BRACELEFT)

希望这会有所帮助=]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T20:33:41.760

检查 VK_BRACELEFT、VK_BRACERIGHT、VK_RIGHT_PARENTHESIS 和 VK_LEFT_PARENTHESIS 以处理这些字符。

对于附加字符，您可能会假设构建字符列表或构建字符串。

编辑：为了从 keyevent 中获取字符值，请尝试 KeyEvent.getKeyChar()

# java - 使用电子邮件编码器是否安全？或者如何显示电子邮件地址最安全？

> ID：12222019
> 
> 赞同：5
> 
> 时间：2012-08-31T20:22:51.913
> 
> 标签：java, php, html, email

像这样的服务：[http](http://www.wbwip.com/wbw/emailencoder.html) : //www.wbwip.com/wbw/emailencoder.html 将电子邮件编码为 ASCII。它完全安全吗？垃圾邮件发送者可以复制此代码并对其进行解码吗？

**他们可以对其进行解码，那么如何在网站上显示您的电子邮件最安全？可能是把它放在图像中？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:25:51.743

不，这根本不安全。您仍在页面上公开您的电子邮件地址。一些愚蠢的蜘蛛最终会感到困惑，但那些最新的肯定能够快速“解码”这些实体。唯一的解决方案是……根本不公开电子邮件地址。如果您使用联系人表单和用户选择的收件人，请使用 ID 并在您的代码中取消引用它。如果您需要显示电子邮件 - 显示图像，但如果有人想在他们的垃圾邮件数据库中包含您的地址，那么他总是可以手动将其放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:36:00.477

这种方法对一些蜘蛛是安全的——但不是所有的蜘蛛。即使有一封通过，您也可能会向用户介绍数千封垃圾邮件。我想这取决于你是否值得冒险，但我绝对不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T20:28:45.360

最好的解决方案是根本不显示电子邮件地址。如果您希望您的用户能够相互发送电子邮件，请编写一个专门的 UI，他们可以在其中键入消息并直接从您的服务器发送电子邮件。但请确保 UI 本身也通过登录/密码得到保护，否则您将回到原点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T20:25:34.597

简短的回答 - 不，它并不完全安全，因为它可以很容易地被任何人解码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T20:25:48.857

任何人都可以使用 ASCII 表轻松解码，如下所示：[http ://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-31T20:26:17.280

一个聪明的垃圾邮件机器人可以轻松读取“隐藏”地址。

相反，您应该做的是（对于 john.doe@gmail.com）：

```
john (dot) doe (at) gmail (dot) com 
```

人们仍然可以构建一个机器人来解决这个问题，但这不切实际，因为这种技术不是很常见。

说实话，没有 100% 隐藏您的电子邮件的方法。即使图像也有 OCR，在最坏的情况下，持久的人总是可以手动输入您的地址并将其添加到他的垃圾邮件列表中。

如果您希望您的用户与您联系，最好的方法是制作一个表格，让**服务器**处理请求并向您发送电子邮件。这样，您的地址就不会暴露给任何人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T20:26:22.453

当然，这种形式的电子邮件编码在安全性方面非常薄弱，事实上，它根本不是出于安全目的而设计的。是编码，不是加密。

# android - 裁剪图像而不创建新文件

> ID：12222020
> 
> 赞同：1
> 
> 时间：2012-08-31T20:22:51.820
> 
> 标签：android, android-intent, bitmap, crop

我有这段代码从图库中获取图像，然后将其传递给意图进行裁剪。一切正常，但这要么在图库中创建新的裁剪图像，要么用裁剪的图像替换旧图像，但我想要做的是将新的裁剪图像保留在我的程序临时内存中，直到用户再次更改它。

这是我的代码：

```
Uri selectedImage = imageReturnedIntent.getData();

final Intent intent = new Intent("com.android.camera.action.CROP");
                intent.setData(selectedImage);
                intent.putExtra("outputX", width);
                intent.putExtra("outputY", height);
                intent.putExtra("aspectX", width);
                intent.putExtra("aspectY", height);
                intent.putExtra("scale", true);
                intent.putExtra("noFaceDetection", true);
                intent.putExtra("output", selectedImage); // with this enabled it replaces the original image and without it creates new one in gallery.
                startActivityForResult(intent, 23); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:29:21.977

您应该创建一个临时文件，然后将其删除：

```
 (...)
    File tempFile = File.createTempFile("crop", "png", Environment
                                            .getExternalStorageDirectory());
    Uri tempUri = Uri.fromFile(tempFile);
    intent.putExtra("output", tempUri);
    intent.putExtra("outputFormat", "PNG");
    (...)

    // then, when the intent returns

    // read cropped image from tempUri
    (...)
    // finally delete the temp file
    tempFile.delete(); 
```

# python - 如何使用 django-allauth 获取用户的 facebook id？

> ID：12222021
> 
> 赞同：12
> 
> 时间：2012-08-31T20:23:08.010
> 
> 标签：python, django, django-allauth

我想在我的模板中显示 current_user 的图片。使用 django-allauth 时如何访问用户的 facebook id？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-01T09:38:13.570

对于通过社交帐户注册的每个用户，都有一个`SocialAccount`实例可用。这个模型有一个外键`User`。请注意，用户可以将多个社交网络帐户连接到他的本地帐户，因此实际上可能有多个`SocialAccount`实例可用。

你想如何处理这个取决于项目。我可以想象有人想在本地复制个人资料图片，或者您可能想优先考虑 Facebook 上面的 Google+ 个人资料图片，依此类推。

该`SocialAccount`模型具有一些帮助方法，可让您访问帐户基础知识，例如个人资料图片。总而言之，这是访问第一个可用个人资料图片的快速而肮脏的方式：

```
{{user.socialaccount_set.all.0.get_avatar_url}} 
```

该 ID 也可用：

```
{{user.socialaccount_set.all.0.uid}} 
```

另见：[https ://github.com/pennersr/django-allauth/blob/master/allauth/socialaccount/models.py#L72](https://github.com/pennersr/django-allauth/blob/master/allauth/socialaccount/models.py#L72)

# jquery - 使用jquery css3淡出文本的最后一个字符

> ID：12222028
> 
> 赞同：0
> 
> 时间：2012-08-31T20:23:48.720
> 
> 标签：jquery, css

我有这个想法来淡出任何文本字符串的最后一个限制字符。

例子 ：

![在此处输入图像描述](../Images/d20a7f8eaecdbacb79b05d677a77e920.png)

可能吗？有谁知道，如何使用`jquery`/创建这个`CSS3`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:54:07.047

我强烈建议为此使用 CSS——`text-overflow:ellipsis`这是做这种事情的标准方式。

回到 Firefox 还在 3.6 版的那一天，它不支持`ellipsis`.，我不得不想出一个替代解决方案。我当时的解决方案正是你在这里所建议的，在行尾淡出。

我通过在相关元素的顶部放置一个附加元素来实现它，该元素具有从透明渐变为纯色的渐变背景，以匹配文本的背景。这个渐变可以使用 CSS 来实现，但是由于我需要支持旧版本的 IE（而且当时还没有 CSS3Pie），所以我实际上使用了 PNG 图像来代替渐变效果。不过，无论哪种方式都有相同的区别。

这样做的好处是它可以工作，并为我们提供了一个好看的文本淡出效果。

缺点是（1）它给用户选择文本带来了问题，（2）如果你的背景不是简单的纯色，它看起来很糟糕，以及（3）它增加了额外的工作，当`ellipsis`解决方案非常简单时.

恐怕我无法向您展示任何代码，因为一旦大多数 Firefox 用户升级到支持`ellipsis`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:46:50.243

您可以通过 jQuery 添加`text-overflow: ellipsis`到您的元素并附加一个`<span>`透明渐变背景 - [**DEMO**](http://jsfiddle.net/rLB4A/3/)

```
p {
    text-overflow: ellipsis;
    width: 140px;
    overflow: hidden;
    white-space: nowrap;
    margin: 25px 0;
} 

span {
    display: inline-block;
    height: 20px; 
    width: 50px;
    background: red;
    position: absolute;
    left: 85px;

    background: -moz-linear-gradient(right,  rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, right top, left top, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,0))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left, rgba(255,255,255,0),rgba(255,255,255,1)); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  rgba(255,255,255,1) 100%,rgba(255,255,255,0) 0%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  rgba(255,255,255,1) 100%,rgba(255,255,255,0) 0%); /* IE10+ */
    background: linear-gradient(to right,  rgba(255,255,255,1) 100%,rgba(255,255,255,0) 0%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#ffffff',GradientType=1 ); /* IE6-9 */
}
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T20:36:07.877

我想不出更好的方法：

```
<span>test test test test</span><span style="opacity: 0.50; "> fading.</span><span style="opacity: 0.40; ">.</span><span style="opacity: 0.20; ">.</span><span style="opacity: 0.10; ">.</span>​​​​​​​​​​ 
```

jsfiddle：http: [//jsfiddle.net/DLbBZ/](http://jsfiddle.net/DLbBZ/)

这是一个 jQuery 解决方法，尽管您已经有了答案：P

[http://jsfiddle.net/sXNQF/](http://jsfiddle.net/sXNQF/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T20:26:14.940

您可以尝试 CSS3`text-overflow`属性：

```
.test {
    text-overflow: ellipsis;
} 
```

# sql - SQL - CASE WHEN 错误？

> ID：12222030
> 
> 赞同：0
> 
> 时间：2012-08-31T20:23:50.933
> 
> 标签：sql, intersystems-cache

有人可以帮帮我吗？我不确定为什么这段代码一直不执行：

```
'0' || CASE
WHEN (EAmain.ActivityStopMin - EAmain.ActivityStartMin) < 0 THEN         (DATEDIFF(hh,EAmain.ActivityStartTimeHours || ':' ||     EAmain.ActivityStartTimeMin,EAmain.ActivityStopTimeHours || ':' ||     EAmain.ActivityStopTimeMin)-1)
WHEN (EAmain.ActivityStopMin - EAmain.ActivityStartMin) >= 0 THEN
(DATEDIFF(hh,EAmain.ActivityStartTimeHours || ':' ||     EAmain.ActivityStartTimeMin,EAmain.ActivityStopTimeHours || ':' ||     EAmain.ActivityStopTimeMin))
END || ':' || (DATEDIFF(n,EAmain.ActivityStartTimeHours || ':' ||     EAmain.ActivityStartTimeMin,EAmain.ActivityStopTimeHours || ':' ||     EAmain.ActivityStopTimeMin)#60) || '0' AS ActivityTotalTime, 
```

编辑：我找到了错误代码，这里是：

错误 #5540：SQLCODE：-29 消息：在适用的表中找不到字段 'EAMAIN.ACTIVITYSTOPMIN' THEN SUBSTR (ActivityTotalTime, ?, ?) WHEN LEN (ActivityTotalTime) = ? THEN ActivityTotalTime END AS ActivityTotalTime , Discipline FROM (SELECT Demographics . Name , Visits . Start_Time , Visits . Stop_Time , Visits . Visit_Date , Visits . Total_Time , EAmain . ActivityStartTime , EAmain . ActivityStopTime , ? || CASE WHEN (EAmain . ActivityStopMin -

再次编辑！：此代码是在 CASE 语句之前实现的，并且有效：

```
'0' || DATEDIFF(hh,EAmain.ActivityStartTimeHours || ':' ||    
EAmain.ActivityStartTimeMin,EAmain.ActivityStopTimeHours || ':' ||     
EAmain.ActivityStopTimeMin) || ':' || (DATEDIFF(n,EAmain.ActivityStartTimeHours || ':' || 
EAmain.ActivityStartTimeMin,EAmain.ActivityStopTimeHours || ':' ||    
EAmain.ActivityStopTimeMin)#60) || '0' AS ActivityTotalTime, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:27:47.803

~~在你得到的最后一行`EAmain.ActivityStartTimeMin,EAmain.ActivityStopTimeHours`。那个逗号好像放错了地方。`)#60)`最后一行的几个字符也是如此。~~

EAmain.ACTIVITYSTOPMIN 不存在。:) 我在您的错误消息中看到 EMain 不是表而是查询。确保在查询中也选择了该字段。

# php - 将循环数组字符串值传递给 PHP range() 函数

> ID：12222033
> 
> 赞同：0
> 
> 时间：2012-08-31T20:24:35.913
> 
> 标签：php, arrays, foreach, range

以下返回**警告：** range() 需要至少 2 个参数，1 个给定。

想不通。**欢迎**提出建议。

```
**<?php
echo acct_type(110);
function acct_type($acct_no)
{   $sections = array(
        'Current Asset' => '100,149',
        'Fixed Asset' => '150,159',
        'Accumulated Depreciation' => '160,169',
        'Current Liability' => '200,249',
        'Long Term Liability' => '250,299',
        'Equity' => '300,399',
        'Revenue' => '400,499',
        'Cost of Goods Sold' => '500,599',
        'Expense' => '600,699'
    );
    foreach($sections as $section => $range)
    {   if(in_array($acct_no, range($range))) return $section;
    }
}
?>** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:31:00.093

`range()`需要两个参数[http://php.net/manual/en/function.range.php](http://php.net/manual/en/function.range.php) 在您的程序中，您需要一个字符串，其中包含一个带有逗号的文本。您需要拆分字符串并在`range()`函数中使用结果

```
foreach($sections as $section => $range)   
{
   list($min,$max)=explode(","$range);
   if(in_array($acct_no, range($min,$max)))
      return $section;   
} 
```

# jquery - Rails - 未加载函数的 jQuery 插件问题

> ID：12222039
> 
> 赞同：1
> 
> 时间：2012-08-31T20:25:11.230
> 
> 标签：jquery, ruby-on-rails, jquery-plugins

我正在尝试使用 jQuery 插件，但似乎 Rails 的工作方式或“jquery-rails”gem 没有评估 $.fn。

例如，如果这是插件：

```
(function ($) {

    $.fn.jqzoom = function (options) {
    return this.each(function () {
        var node = this.nodeName.toLowerCase();
        if (node == 'a') {
            new jqzoom(this, options);
        }
    });
};

jqzoom = function (el, options) {
.....
}

})(jQuery); 
```

在挖掘之后，我发现即使我可以在 Safai 调试器中调用并获取 jqzoom，但 $.fn.jqzoom 只是未定义。如果我在调试器中粘贴 $.fn.jqzoom = function {...} 插件可以工作！

里面有些东西不喜欢 $.fn....

请帮忙...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:04:32.413

jQuery.fn.jqzoom 是未定义的吗？如果不是（即实际上已定义），则可能您没有映射 $ -> jQuery。如果是这样，请确保在调用 $.fn.anything 之前加载 jQuery 缩小源代码，并且您应该已准备就绪。

# ios - 解锁 iPad 时推送通知警报会打开应用程序

> ID：12222043
> 
> 赞同：2
> 
> 时间：2012-08-31T20:25:34.537
> 
> 标签：ios, ipad, apple-push-notifications, push-notification

我开发了使用苹果推送通知的 iPad 应用程序。推送通知传递在所有情况下都可以正常工作，除非 iPad 设备被锁定并传递通知。在这种情况下，它的行为很奇怪，当您滑动解锁设备而不触摸警报/横幅时会打开应用程序。它发生在 iOS 4.3、5.1 和 6.0 版本中

在苹果文档中，他们提到如下：

[http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)

```
iOS 注意：如果用户在显示远程通知警报后不久解锁设备，操作系统会自动触发与警报相关的操作。（此行为与 SMS 和日历警报一致。）这使得与远程通知相关的操作不会产生破坏性后果变得更加重要。用户应始终做出导致在存储数据的应用程序上下文中破坏数据的决策。

```

与警报相关的操作是什么？
***操作系统自动触发与警报相关的操作***

而且我还想了解这种情况下的默认行为是什么？

任何帮助表示赞赏并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:30:19.557

它的行为并不奇怪，因为这是默认行为。当您的通知点亮屏幕时，“滑动解锁”变为“滑动查看”，这将打开您的应用并执行与您的通知相关的操作。

默认操作是，如果您不指定要发生的任何事情，则不会发生任何事情。

要处理通知（这是与警报相关的操作），请参阅文档：[链接](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW4)，处理本地和远程通知部分

# php - PDO：获取结果时使用斜杠

> ID：12222048
> 
> 赞同：3
> 
> 时间：2012-08-31T20:25:49.193
> 
> 标签：php, pdo, stripslashes

我正在使用 PDO 准备好的语句，因此它在插入数据库之前需要时添加斜杠。

我想知道获得结果并将其显示在网站上而不显示斜线的正确方法。

是否像使用一样简单`echo stripslashes($result->message);`？

这是我的查询的样子：

```
$database->query('INSERT INTO table_name (field1, field2, field3) VALUES (?, ?, ?)', array($value1, $value2, $value3)); 
```

这是我的`query`方法：

```
public function query($query, $bind=null)
{
    global $pdo;

    # Prepare Statment
    $this->statement = $this->pdo->prepare($query);

    # Execute Query
    $this->statement->execute($bind);
} 
```

**编辑：`get_magic_quotes_gpc`即使WHM（cPanel）说它已关闭，它确实已打开**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:33:47.190

准备好的语句不会在查询数据中添加斜杠。他们以占位符的形式将参数注入到查询中，这样占位符不被视为查询的一部分，而只是数据的一部分。

因此，没有添加斜线，也不需要`stripslashes()`.

如果为您添加了斜杠，请确保为您的 PDO 实例禁用准备好的语句模拟：

```
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T07:38:32.053

`get_magic_quotes_gpc`即使WHM（cPanel）表示它已关闭，也确实已打开

# java - 重绘时复制了JButton？

> ID：12222053
> 
> 赞同：5
> 
> 时间：2012-08-31T20:26:11.253
> 
> 标签：java, swing, jpanel, jbutton, repaint

我有一个`JFrame`带有 2`JPanel`的：a `PaintPanel`（带有`paint()`方法）和 a `ButtonPanel`（带有按钮）。当我调用`repaint()`（`PaintPanel`但单击按钮）时，按钮`ButtonPanel`被绘制在`PaintPanel`！它不可点击或任何东西，它就在那里。

我试图用这段代码重新创建问题：

```
public class Main {

    public static void main(String[] args) {
        JFrame frame = new JFrame("frame");
        frame.setSize(400,400);
        frame.setLayout(new GridLayout(2,1));
        PaintPanel paint = new PaintPanel();
        ButtonPanel buttons = new ButtonPanel(paint);
        frame.add(paint);
        frame.add(buttons);
        frame.setVisible(true);
    }
}

public class PaintPanel extends JPanel{
    public void paint(Graphics g){
        g.drawRect(10, 10, 10, 10);
    }
}

public class ButtonPanel extends JPanel implements ActionListener{

    private PaintPanel paintPanel;

    public ButtonPanel(PaintPanel paintPanel){
        this.paintPanel=paintPanel;
        JButton button = new JButton("button");
        button.addActionListener(this);
        add(button);
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        paintPanel.repaint();           
    }
} 
```

这会重现我遇到的问题（对不起，奇怪的代码标记，似乎无法正确处理）。

我真的希望你们中的一个人知道这里发生了什么，因为我不...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T20:46:16.187

首先，您应该覆盖`paintComponent()`而不是`paint()`. 在进行某些面板自定义时，它是 Swing 中最佳实践的一部分。

其次，这是对我有用的代码（我不知道为什么你的代码不适用：S）：

```
public class Main {

    public static void main(String[] args) {

        JFrame frame = new JFrame("frame");
        frame.setSize(400, 400);
        // frame.setLayout(new GridLayout(2, 1));
        PaintPanel paint = new PaintPanel();
        ButtonPanel buttons = new ButtonPanel(paint);
        // frame.add(paint);
        // frame.add(buttons);
        frame.setVisible(true);

        JPanel pan = new JPanel(new BorderLayout());
        pan.add(paint);
        pan.add(buttons, BorderLayout.SOUTH);
        frame.add(pan);

    }
}

class PaintPanel extends JPanel {

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(new Color(new Random().nextInt()));
        g.drawRect(10, 10, 10, 10);
    }
}

class ButtonPanel extends JPanel implements ActionListener {

    private final PaintPanel paintPanel;

    public ButtonPanel(PaintPanel paintPanel) {

        this.paintPanel = paintPanel;
        JButton button = new JButton("button");
        button.addActionListener(this);
        add(button);
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        if (getParent() != null) {
            getParent().repaint();
        }
    }
} 
```

# matlab - 我需要一种算法来反转三角矩阵

> ID：12222060
> 
> 赞同：0
> 
> 时间：2012-08-31T20:26:38.403
> 
> 标签：matlab

我需要一种算法来反转三角矩阵：例如

| 1 2 4 |

| 1 3 9 |

| 1 4 16 | 谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:30:19.733

那不是三角矩阵，但这会起作用

```
Y = inv(X) 
```

其中 X 是您的原始矩阵。如果您需要一个特定的算法，您可以尝试以高斯消除作为起点[http://en.wikipedia.org/wiki/Gaussian_elimination](http://en.wikipedia.org/wiki/Gaussian_elimination)。您可以实现该算法并使用该`inv`函数来检查您的结果。

您也可以尝试 Gauss-Jordan 消除[http://en.wikipedia.org/wiki/Gauss%E2%80%93Jordan_elimination](http://en.wikipedia.org/wiki/Gauss%E2%80%93Jordan_elimination)

其他更高级的选项是这些[http://en.wikipedia.org/wiki/Matrix_inversion#Methods_of_matrix_inversion](http://en.wikipedia.org/wiki/Matrix_inversion#Methods_of_matrix_inversion)

这应该澄清什么是三角矩阵[http://en.wikipedia.org/wiki/Triangular_matrix](http://en.wikipedia.org/wiki/Triangular_matrix)

# c# - IS 运算符是否取消装箱值类型？

> ID：12222062
> 
> 赞同：15
> 
> 时间：2012-08-31T20:26:46.377
> 
> 标签：c#, .net

我找不到以下问题的答案：

```
object o = 10; // Box
int i = (int)o; // Unbox 
```

很清楚，但以下不清楚

```
bool isInt = o is int; // Is the unbox here or not? 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-31T20:28:06.860

不，这不是拆箱——它只是检查类型是否正确。不要忘记确实有一个对象，有一个类型。无论该值是否为装箱值类型值，检查该类型基本上是相同的操作。（对于值类型或任何密封类型，可能有一些可行的优化，因为没有要考虑的继承，但从根本上说，它仍在检查对象头的“类型”部分。）

一种检查方法是编译代码并使用 ILASM 查看 IL：

```
// object o = 10
IL_0000:  ldc.i4.s   10
IL_0002:  box        [mscorlib]System.Int32
IL_0007:  stloc.0

// int i = (int) o;
IL_0008:  ldloc.0
IL_0009:  unbox.any  [mscorlib]System.Int32
IL_000e:  stloc.1

 // bool isInt = o is int
IL_000f:  ldloc.0
IL_0010:  isinst     [mscorlib]System.Int32 
```

所以它使用`isinst`- 不需要拆箱。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T23:18:04.683

它不仅不需要拆箱，从逻辑上讲，它也不需要。

拆箱可以成功也可以失败，这取决于对象是否真的包含我们要尝试拆箱的类型的值。

因此，拆箱需要检查对象是否属于该特定类型。

因此，如果测试类型需要拆箱，那么由于拆箱需要测试类型，我们将无法拆箱，直到我们第一次拆箱......

因此测试一个类型不需要拆箱。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-03T16:29:07.807

从 C# 7 开始，`is`关键字获得了一个新的用例，在模式匹配中作为类型模式。在这种情况下，确实会发生拆箱，例如：

```
object o = 10;
if (o is int i) {
   // i is the unboxed value.
} 
```

显然，这与原始帖子的情况不同，原始帖子中的值纯粹是被测试的，因为当`is`用作模式时，您实际上是在分配值。因此在这种情况下需要拆箱。

需要明确的是 - 原始`o is int`案例没有任何改变 - 根据旧答案，那里不会发生拆箱。`is`关键字刚刚获得了新的作用。

# android - Eclipse 无法检测到我的虚拟机在 Android x86 上的状态和目标

> ID：12222068
> 
> 赞同：0
> 
> 时间：2012-08-31T20:27:13.857
> 
> 标签：android, eclipse, debugging, x86, adb

我已经按照网上的许多说明开始使用 Android 虚拟机。一切都适用于 VM，但是在 Eclipse 上我遇到了一个问题，我通过 VirtualBox 进行了连接和端口转发，但是每当我在 Eclipse 上单击运行或调试时，它都会显示`Android Device Chooser`，但它显示的 VM 加载如下：

![](../Images/a9953730086f73358eae1b63aa489235.png)

信息：

*   虚拟机：
*   适配器：
    *   连接到的适配器：NAT
    *   适配器类型：PCnet-FAST III (Am79c973)
    *   端口转发：TCP & UDP：5555
*   ISO：android-x86-4.0-RC2-eeepc.iso

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:29:44.493

关闭虚拟机。在 Eclipse 中转到窗口-> avd 管理器-> 在您的 vm 上选择编辑-> 选择目标-> 保存。

然后运行您的项目，如果您的项目 minsdk 符合该 VM 目标级别，它将启动。

# php - 为什么我的查询对 3 列有效，但在 4 列或更多列时失败？

> ID：12222072
> 
> 赞同：0
> 
> 时间：2012-08-31T20:27:38.723
> 
> 标签：php, sql

此查询有效：

```
$con = mysql_connect("localhost","root","pw");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("db", $con);

$sql="INSERT INTO l1_clubmsg (msg, subject, status)
VALUES
(1,1,1)";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con); 
```

但是当我改变时：

```
$sql="INSERT INTO l1_clubmsg (msg, subject, status)
VALUES
(1,1,1)"; 
```

到：

```
$sql="INSERT INTO l1_clubmsg (msg, subject, status, to)
VALUES
(1,1,1,1)"; 
```

我收到此错误：

```
Error: You have an error in your SQL syntax; check the manual that corresponds to your 

MySQL server version for the right syntax to use near 'to) VALUES (1,1,1,1)' at line 1 
```

l1_clubmsg 中确实存在“to”列

任何想法为什么会出错？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:32:02.653

[`TO`](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)是mysql中的保留字，所以如果想作为列名使用，需要像这样转义；

```
INSERT INTO l1_clubmsg (msg, subject, status, `to`) VALUES (1,1,1,1) 
```

转义所有列名和表名通常是个好主意，因为较新版本的数据库可能有新的保留字，但在这种情况下只需要一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T20:32:40.973

产生错误不是因为 4 列或更多列。

产生错误是因为`to`是关键字，不能这样使用。

您可以将查询编写为：

```
$sql="INSERT INTO l1_clubmsg (msg, subject, status, `to`)
VALUES
(1,1,1,1)"; 
```

对于关键字列表，您可以[在这里查看](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)

**注意：**通常尽量避免在查询中使用关键字。如果您使用，请确保使用反引号（`）将其转义

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T20:32:19.023

`TO`是 MySQL 中的保留字。您将不得不在查询中对其进行转义。尝试

```
$sql="INSERT INTO l1_clubmsg (msg, subject, status, `to`)
VALUES
(1,1,1,1)"; 
```

我添加的标点符号称为反引号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T20:31:37.980

我怀疑这`to`是 MySQL 中的一项保留工作——您需要确保 MySQL 正确解释为列名。代替：

```
INSERT INTO l1_clubmsg (msg, subject, status, to)
VALUES
(1,1,1,1) 
```

尝试：

```
INSERT INTO l1_clubmsg (`msg`, `subject`, `status`, `to`)
VALUES
(1,1,1,1) 
```

反引号确保它被适当地解析。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T20:33:50.207

您必须在 . 周围加上引号`TO`。

# c++ - 〜0做什么？

> ID：12222077
> 
> 赞同：4
> 
> 时间：2012-08-31T20:28:01.157
> 
> 标签：c++, c, bitwise-operators, bit

* * *

~0 是否意味着将 000000000 翻转为 1111111111？

```
printf("Check: %i", ~0); 
```

printf 结果为-1，这就是我感到困惑的原因。
-1 本质上与 11111111111111111 位的含义相同吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T20:29:20.743

> ~0 是否意味着将 000000000 翻转为 1111111111？

是的，它确实。

> -1 本质上与 11111111111111111 位的含义相同吗？

在[2s 补码](http://en.wikipedia.org/wiki/Two%27s_complement)表示中，确实如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T20:33:08.593

```
Does ~0 mean its flipping 000000000 to 1111111111? 
```

是的，就是这个意思。

```
printf("Check: %i", ~0);

The printf results to -1, which is why I am confused. 
```

这是因为 2 的补码算法，我们通常接受零作为

```
000000000000 
```

并且从中减去一个需要一个需要借位的“借位”，依此类推，直到您“滚动”整个寄存器

```
111111111111 
```

从逻辑上讲，如果你在那个数字上加“1”，它就会进位，然后进位，依此类推，直到它朝相反的方向“滚动”，`000000000`再次让步。

```
Does -1 essentially mean the same thing as 11111111111111111 bits? 
```

是的，只要您使用 2 的补码有符号整数。

----已编辑，包括cincutar现已删除的帖子中的详细信息（我希望他没有删除它）---

要查看格式化为（无符号）十六进制数的相同内存，请使用命令

```
printf("Check: %x", ~0); 
```

这将打印输出

```
Check ffffffff 
```

这是（对于那些不阅读十六进制的人）

```
11111111111111111111111111111111 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T20:30:38.660

`~0 == 0xFFFFFFFF`

其中 `0xFFFFFFFF`= 32 乘以 1 ，即[2 的补充](http://en.wikipedia.org/wiki/Two%27s_complement)表示中的 -1

因为`~`是按位运算，并且在每个位中将零变为一：

```
~0b1010 == 0b0101 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T20:31:28.387

这是由于数学运算“二进制补码”。可以在 youtube 上找到一个不错的补码视频教程。这是其中之一:)

[优酷链接](http://www.google.co.nz/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&cad=rja&ved=0CDsQtwIwAw&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D9W67I2zzAfo&ei=1x5BUNaXGuqRiQeK_4CQDg&usg=AFQjCNHf2V56pIyKyMJmorD_esT4iFpDBQ)

# android - Android 选项卡和全局变量

> ID：12222080
> 
> 赞同：2
> 
> 时间：2012-08-31T20:28:15.867
> 
> 标签：android, global-variables, android-tabs

我正在使用 android TabWidget，并且我有一个主要活动来管理所有选项卡。每个选项卡都有自己的活动：

```
private void setTabs()
{
    addTab("News", NewsActivity.class);
    addTab("Project", ProjectActivity.class);
    addTab("About", AboutActivity.class);
    addTab("Contact", ContactActivity.class);
} 
```

每个选项卡的数据以 JSON 格式从服务器下载。我的目标是下载应用程序打开时的所有数据，然后将其用于每个选项卡（活动）。

是否有可能将这些变量从主要活动共享给我管理选项卡的其他活动？我知道使用 Intent 类，但可能有另一个更简单的选项卡解决方案。

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:37:12.230

在您的主要活动中声明静态变量并将数据存储在其中。

例如，`public static integer myInt;`

```
myInt = ...; 
```

现在，当您转到其他活动时，只需使用**`MainActivity.myInt`**它来访问其值，甚至可以根据需要对其进行更新。无需使用意图传递变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T20:44:38.363

您可以创建一个类来保存您可能希望在整个应用程序中使用的任何变量或对象。

```
public class myClass {
    private static int myInt;
    public static void setMyInt(int i)
    {
        myInt = i;
    }

    public static int getMyInt()
    {
        return myInt;
    }

} 
```

然后，您可以从任何地方设置任何变量并在任何地方使用它。

```
myClass.setMyInt(10);
int i = myClass.getMyInt(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T20:31:57.847

您可能想要创建您的`class MyAppication extends Application`（您还必须将其添加到清单中）。此类`MyApplication`将在您的应用程序运行时一直存在，因此您可以在其中存储内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T20:36:18.320

我认为为您的目的使用片段会更好..

你有一个主要的活动，它有 tabhost/tabwidget 和一个布局来显示每个..

根据当前选择的选项卡，您在布局中显示相应的片段。

这样，您的主要活动可以拥有片段需要使用的任何变量数据。

所有片段都能够访问它们显示的活动中的数据，只需确保创建 getter 和 setter

# selenium - geb StaleElementReferenceException

> ID：12222081
> 
> 赞同：2
> 
> 时间：2012-08-31T20:28:33.107
> 
> 标签：selenium, automated-tests, geb

我刚刚开始使用带有 webdriver 的 geb 进行自动化测试。 [据我了解](http://www.gebish.org/manual/0.7.0/pages.html#cache)，当我在页面上定义内容时，每次调用内容定义时都应该查找页面元素。

```
//In the content block of SomeModule, which is part of a moduleList on the page:
itemLoaded {
    waitFor{ !loading.displayed }
}
loading { $('.loading') }

//in the page definition
moduleItems {index -> moduleList SomeModule, $("#module-list > .item"), index}

//in a test on this page
def item = moduleItems(someIndex)
assert item.itemLoaded 
```

所以在这段代码中，我认为`$('.loading')`应该重复调用，以在模块的基本元素的上下文中通过其选择器在页面上查找元素。然而，此时我有时会遇到 StaleElementReference 异常。据我所知，该元素不会从页面中删除，但即使这样做，除非`$`在幕后进行一些缓存，否则不应产生此异常，但如果是这种情况，它会导致各种其他问题。

有人可以帮我理解这里发生了什么吗？为什么在查找元素时可能会得到 StaleElementReferenceException？指向相关文档或geb源代码的指针也很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T03:34:06.497

事实证明，问题在于对由模块本身表示的元素的引用已通过修改变得陈旧，而不是`.loading`元素。我怀疑异常源于该行，因为它试图在模块的基本元素中搜索以找到 .loading 元素。解决方案是在检查模块内部元素的同时加载模块。在这种情况下，它看起来像这样：

```
//In the content block of SomeModule, which is part of a moduleList on the page:
itemLoaded { !loading.displayed }
loading { $('.loading') }

//in the page definition
moduleItems {index -> moduleList SomeModule, $("#module-list > .item"), index}

//in a test on this page
waitFor { moduleItems(someIndex).itemLoaded } 
```

感谢 geb 用户邮件列表上的 Marcin 为我指明了正确的方向。

# qt - QLCDNumber 没有命名类型

> ID：12222095
> 
> 赞同：0
> 
> 时间：2012-08-31T20:29:25.180
> 
> 标签：qt, embedded-linux, qwidget

我正在尝试为 ARM 嵌入式设备编译测试应用程序。如果我使用我的桌面 Qt SDK 版本的 Qt，这个头文件编译得很好。如果我在 Qt Creator 中将 Linaro GCC 用于嵌入式目标，则会在 lcdNumber 的私有声明行中收到错误“'QLCDNumber' does not name a type”。我已经四处搜索，但没有看到任何适用于此的解决方案。

问题是我的嵌入式 qt 版本缺少对 QLCDNumber 的支持吗？如果是这样，为什么它不抱怨 #include ？另外，如果是这种情况，是否有人碰巧知道我需要在 ./configure 中启用什么才能启用对 QLCDNumber 的支持？

```
#ifndef BATTERYMONITOR_H
#define BATTERYMONITOR_H

#include <QtGui>
#include <QWidget>
#include <QLabel>
#include <QRadioButton>
#include <QLCDNumber>

class BatteryMonitor : public QWidget
{
    Q_OBJECT

public:
    BatteryMonitor(QWidget *parent = 0);

public slots:
    void clickedBatteryStatus();

private:
    QRadioButton *temperature;
    QRadioButton *voltage;
    QRadioButton *current;
    QRadioButton *relativeStateOfCharge;
    QRadioButton *batteryStatus;
    QRadioButton *runTimeToEmpty;
    QLCDNumber *lcdNumber;
};

#endif // BATTERYMONITOR_H 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:04:26.277

它是否`QT_NO_LCDNUMBER`在您的嵌入式 Qt SDK 中定义？您可以在文件中检查它`$QTDIR/include/QtCore/qconfig.h`。

`QLCDNumber`并且`qlcdnumber.h`无论是否`QT_NO_LCDNUMBER`定义了宏，都在 Qt SDK 的正确包含路径中。所以没有什么不对`#include <QLCDNumber>`。

# c# - 复制asp控件

> ID：12222100
> 
> 赞同：1
> 
> 时间：2012-08-31T20:29:44.347
> 
> 标签：c#, asp.net, listview

我正在尝试复制显示在 asp 列表视图中的数据。（我想通过电子邮件发送它）

我可以使用 javascript 获取信息以获取 html，但它没有样式。

我不想在每次输出之前都进入每个控件来保存数据。他们是更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:37:34.367

Html 是 html，如果您将格式保存在 css 中，您还需要在电子邮件中附加相关的 css 类和标签，这应该很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:22:55.293

我知道这已得到解答，但我想我也会添加它以防万一。我使用以下内容返回给定控件的 HTML。如前所述，您只需要在电子邮件的 HTML 中包含任何 CSS。

```
using System.Text;
using System.IO;
using System.Web.UI;

public string RenderControl(Control ctrl)
{
    StringBuilder sb = new StringBuilder();
    StringWriter tw = new StringWriter(sb);
    HtmlTextWriter hw = new HtmlTextWriter(tw);

    ctrl.RenderControl(hw);
    return sb.ToString();
} 
```

从几个[像这样](http://atominnovation.blogspot.com/2010/06/aspnet-render-control-into-html-string.html)的博客网站偷来的。

# mysql - phpmysqladmin 程序注释

> ID：12222104
> 
> 赞同：0
> 
> 时间：2012-08-31T20:29:53.993
> 
> 标签：mysql

我正在使用 phpMySQLAdmin 创建带有注释的过程。

但是 phpmysqladmin 在将 sql 发送到服务器之前删除了注释，我不知道如何使用 phpmysqladmin 将注释添加到我的存储过程中。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:02:58.890

您使用的是什么版本的 phpMyAdmin？看来这可能是某些版本中的错误[。](http://freecode.com/projects/phpmyadmin/releases/307498)我建议你尝试不同的客户端。也许是 MySQL 工作台？

# iphone - SIGKILL 信号在 iPhone sim 上的应用程序启动，但不是 Xcode

> ID：12222109
> 
> 赞同：4
> 
> 时间：2012-08-31T20:30:30.977
> 
> 标签：iphone, objective-c, xcode, crash, sigkill

好的，所以从全新（以前未在 iPhone 模拟器上安装的应用程序）开始，该应用程序可以正常启动。然后我按下主页按钮并单击图标，它也很好。然后，如果我按主页按钮，然后从多任务栏关闭应用程序，然后按图标，我会收到 SIGKILL 错误。

但是，当我在 Xcode 中按下运行时，它总是完美无缺地工作（即使在我从多任务栏关闭它之后，按下图标失败）。这只是模拟器的一个怪癖吗？这种行为只有在我实现了一些 NSUserDefault 的东西之后才开始，以记住它的状态等。它确实记住了所有的默认值，但当它工作时。

任何帮助表示赞赏。

编辑：

```
- (void)viewDidLoad
{

NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
NSDictionary *appDefaults = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithInt:1], @"firstRun",
                        nil];
[defaults registerDefaults:appDefaults];
if ([[defaults objectForKey:@"firstRun"] intValue] == 1) {
//do the stuff required at first launch
table = [NSMutableArray array];
Stocks =[NSMutableArray array];
Money =1234.56;
mem=@"GOOG";
[defaults setDouble:Money forKey:@"money"];
[defaults setObject:mem forKey:@"ticker"];
[defaults synchronize];
self.Input.text=mem;

- (void)viewWillAppear:(BOOL)animated
{

NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
if ([[defaults objectForKey:@"firstRun"] intValue] == 0) {
    [self entered:nil];

} else if ([[defaults objectForKey:@"firstRun"] intValue]== 1){
    [defaults setObject:[NSNumber numberWithInt:0] forKey:@"firstRun"];
    [defaults synchronize];
}
[super viewWillAppear:animated];
} 
```

这是我认为可能与我的 MainViewController 中的 NSUserDefaults 相关的内容（我不在任何其他 viewController 中使用 UserDefaults）。

我还在其他一些方法中执行了一些 setObjects/同步，但它们仅在单击按钮时执行（当它崩溃时不会发生）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:05:43.597

当您从多任务栏中删除应用程序时，您实际上是在永久关闭它。因此，您销毁与您的应用程序关联的 XCode 实例（所有进程都被杀死）。这就是您收到 SIGKILL 错误的原因。

有关 iPhone 模拟器的更多信息：http: [//developer.apple.com/library/ios/#DOCUMENTATION/Xcode/Conceptual/ios_development_workflow/25-Using_iOS_Simulator/ios_simulator_application.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Xcode/Conceptual/ios_development_workflow/25-Using_iOS_Simulator/ios_simulator_application.html)

事实上，如果您在实际设备上运行应用程序并在应用程序连接到 XCode 时将其从多任务栏中删除，甚至会发生这种情况。但是，如果您的应用程序安装在设备上并且未连接到 Xcode 以进行运行/测试/分析，则不会发生此问题。

# c# - C# Google Api 上传流

> ID：12222113
> 
> 赞同：2
> 
> 时间：2012-08-31T20:31:07.187
> 
> 标签：c#, google-drive-api, google-docs-api

我已经阅读了一些问题，我尝试了这些示例，它们对我有用，这里是链接： -[链接 1](https://stackoverflow.com/questions/10095163/uploading-any-file-to-google-docs-using-gdata) -[链接 2](https://stackoverflow.com/questions/10157816/updating-a-document-in-google-docs-using-the-api) -[链接 3](https://stackoverflow.com/questions/10962335/how-to-upload-update-file-by-filestream-and-resumableuploader-in-c-sharp)

但是，我试图完成的有点不同，我试图修改/上传一个包含纯文本的 .DAT 文件。我能够毫无问题地读取文件内容，但我总是收到 400 错误请求（协议错误）。这是我的代码。

```
 DocumentsService service = new DocumentsService("Man");
   service.setUserCredentials(UserName, Passwod);

   DocumentsListQuery fileQuery = new DocumentsListQuery();
   fileQuery.Query = User.FileName;
   fileQuery.TitleExact = true;
   DocumentsFeed feed = service.Query(fileQuery);

   //Here I get my file to update
   DocumentEntry entry = (DocumentEntry)feed.Entries[0];

    // Set the media source
  //Here I have tried application/octet-stream also
  entry.MediaSource = new MediaFileSource(DataStream, User.FileName, text/plain");

  // Instantiate the ResumableUploader component.
     ResumableUploader uploader = new ResumableUploader();

  // Set the handlers for the completion and progress events
  uploader.AsyncOperationCompleted += new AsyncOperationCompletedEventHandler(OnDone);
  uploader.AsyncOperationProgress += new syncOperationProgressEventHandler(OnProgress);

 ClientLoginAuthenticator authenticator = new ClientLoginAuthenticator("Man", ServiceNames.Documents,Credentials);
 Uri updateUploadUrl = new Uri(UploadUrl);
 AtomLink aLink = new AtomLink(updateUploadUrl.AbsoluteUri);
 aLink.Rel = ResumableUploader.CreateMediaRelation;
 entry.Links.Add(aLink);

// Start the update process.
uploader.UpdateAsync(authenticator,entry,new object()); 
```

谢谢。

**编辑**：这就是我解决它的方法。感谢克劳迪奥指导我正确的方向

* * *

1.  下载示例应用程序：[下载示例 (.zip)](http://code.google.com/p/google-api-dotnet-client/wiki/Downloads)
2.  从 SampleHelper Project 将这些实施到您的项目中：**AuthorizationMgr、INativeAuthorizationFlow、LoopbackServerAuthorizationFlow、WindowTitleNativeAuthorizationFlow**
3.  将其与以下代码一起使用：

    ```
    //Call Authorization method... (omitted)

    File body = new File();
    body.Title = title;
    body.Description = description;
    body.MimeType = mimeType;
    byte[] byteArray = System.IO.File.ReadAllBytes(filename);
    MemoryStream stream = new MemoryStream(byteArray);

    try {
      FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, mimeType);
      request.Upload();

      File file = request.ResponseBody;

      // Uncomment the following line to print the File ID.
      // Console.WriteLine("File ID: " + file.Id);

      return file;
    } catch (Exception e) {
      Console.WriteLine("An error occurred: " + e.Message);
      return null;
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:19:36.037

每当服务器返回 400 Bad Request 时，它还包含一条描述性错误消息，告诉您请求中的无效内容。如果你不能从调试器中得到它，你应该安装 Fiddler 并捕获 HTTP 请求和响应。

我给你的另一个建议是开始使用更新的 Drive API 而不是 Documents List API。这是一个 5 分钟的 C# 快速入门示例，展示了如何将文件上传到 Google Drive：

[https://developers.google.com/drive/quickstart](https://developers.google.com/drive/quickstart)

# vb6 - VB6 元组等效？

> ID：12222114
> 
> 赞同：10
> 
> 时间：2012-08-31T20:31:12.710
> 
> 标签：vb6, tuples, built-in

由于遗留应用程序，我将一些 C# 代码移植到 VB6。我需要存储对列表。我不需要进行关联查找，我只需要能够存储成对的项目。

我要移植的片段如下所示：

```
List<KeyValuePair<string, string>> listOfPairs; 
```

如果我要将它移植到 C++，我会使用这样的东西：

```
std::list<std::pair<string, string> > someList; 
```

如果这是python，我只会使用一个元组列表。

```
someList.append( ("herp", "derp") ) 
```

我正在寻找一种图书馆类型，但如有必要，我会选择其他东西。我试图变得懒惰，不必编写 cYetAnotherTinyUtilityClass.cls 来获得此功能，或者退回到经常被滥用的字符串操作**。**

我试过用谷歌搜索，但 VB6 并没有真正在网上很好地记录下来，而且有很多东西，都受到了很大的挑战。如果您曾经看过[BigResource](http://www.bigresource.com/VB-VB6-VB-NET-difference-AE6m02CtW6.html#xRPjwHRXcK)，您就会明白我的意思。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T01:07:43.997

变体的集合可以非常灵活，除非你真的击败它们，否则性能不是问题：

```
Private Sub SomeCode()
    Dim Pair As Variant
    Dim ListOfPairs As Collection

    Set ListOfPairs = New Collection

    With ListOfPairs
        Pair = Array("this", "that")
        .Add Pair

        .Add Array("herp", "derp")

        .Add Array("weet", "tweet")

        MsgBox .Item(1)(0) 'Item index is base-1, array index base-0.

        Pair = .Item(2)
        MsgBox Pair(1)

        ReDim Pair(1)
        Pair(0) = "another"
        Pair(1) = "way"
        .Add Pair
        MsgBox .Item(4)(1)
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T20:36:37.177

如果它实际上只是用于存储，您可以使用`Type`：

```
Public Type Tuple
    Item1 As String
    Item2 As String
End Type 
```

它比需要一个类来进行存储更简洁。

`Types`（更广泛地称为 UDT）的问题在于您可以使用它们做什么受到限制。您可以制作一个 UDT 数组。您**不能收集**UDT。

就 .Net 而言，它们与 .Net 最相似`Struct`。

[这里](http://www.vb6.us/tutorials/user-defined-types-udt-vb)或[这里](http://www.techrepublic.com/article/vb6-tip-making-the-most-of-user-defined-types-udt/5493772)有基本的演练。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:38:24.850

列出类？（见 VB 部分）：http: [//msdn.microsoft.com/en-us/library/6sh2ey19#Y0](http://msdn.microsoft.com/en-us/library/6sh2ey19#Y0)

字典类？ [http://msdn.microsoft.com/en-us/library/xfhwa508](http://msdn.microsoft.com/en-us/library/xfhwa508)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:38:27.423

你可以使用一个集合

```
dim c as new collection
c.add "a", "b" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-15T09:21:26.240

我有一个类似的场景，并通过在我的 VB6 项目中包含对*Microsoft Scripting Runtime*库的引用来使用 Dictionary 。这是我的一位同事提出的，效果很好。

```
Dim dictionary As New Dictionary
Dim index As Integer

dictionary.Add "Index1", "value for first index"
dictionary.Add "Index2", "value for second index"

'To get the value for a key
Debug.Print dictionary("Key1")

'To get the value for all keys
For index = 0 To UBound(dictionary.Keys)
    Debug.Print dictionary.Keys(index) & "=" & dictionary(dictionary.Keys(index))
Next index 
```

# timestamp - 它是什么时间戳格式？

> ID：12222118
> 
> 赞同：0
> 
> 时间：2012-08-31T20:31:47.487
> 
> 标签：timestamp, unix-timestamp

我有一个 DateTime = DateTime:"2012-08-31T13:27:14.568-07:00" 的服务器事件，它的时间戳 = Timestamp:"129909184345680927"。这两者如何相关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:51:11.380

它是自 1601-01-01T00:00:00Z 以来的“滴答声”数（100ns 单位 [h/t 到 GolezTrol 进行校正]，被多个系统用于合理的低分辨率时间记录）

从一个世纪初开始很方便，如果您可能正在处理历史数据，最好回到很长一段时间。

但是，有了这样的历史数据，你将不得不为 1582 年之前的日期提出某种特定领域的系统，当时公历取代了儒略历（尽管它的使用直到不同时间在不同地方才出现, 一些国家直到 20 世纪才从儒略到格里高利）。有些人使用公历*（就像公历总是日历一样），有些人在它被发明的地方或者正在研究的特定国家的地方改用儒略，而那些使用公历的人不同意是否有1BCE 和 1CE 之间的第 0 年。

真的，因为我们不能为早于 1582 年的日期提供一刀切的方法，所以不要尝试是有道理的。最好将 17 世纪初作为您的“T=0”。因此 1601-01-01T00:00:00Z

呵呵。忘了说无聊的部分。它被 LDAP、一些数据库和其他人使用。

*有趣的注解：很多人将 prolaptic Gregorian 称为“prolaptic Gregorian”，这很奇怪。“Proleptic”是一个相对晦涩的词，指的是实际时间之前的事物（“前殖民美国”，“盎格鲁撒克逊人之前的英格兰”），这是有道理的。“脱垂”是一个更不常用的词，它是“脱垂”的形容词形式——当器官从它应该在的位置向前或向下移动时，这是没有意义的。有一天，我决定弄清楚为什么会发生这种情况。据我所知，这是 ISO 8601 版本中的一个拼写错误，因为这是许多人第一次听说它，所以它被抓住了。

# django - django 中的默认评论表单不起作用

> ID：12222125
> 
> 赞同：0
> 
> 时间：2012-08-31T20:32:12.937
> 
> 标签：django, forms, comments

`<form action={% commment_form_target %}`使用默认评论框架时（中的部分）如何`{% .. %}`在 django 中工作？发布后该操作将导向哪个视图？文档说“/comments/post”。那么，我是否必须创建一个带有查看帖子的评论应用程序才能使默认评论框架正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:07:03.273

该模板标签只是为 post_comment 视图返回反向解析的 url。

默认视图与评论应用程序捆绑在一起：django.contrib.comments.view.post_comment。如果你想定制，你只需要自己制作。您将在您的应用程序中覆盖 get_form_target 以返回 reverse("customapp.post_comment") 以使用您自己的。

# jquery - div外的绝对元素滑动时隐藏

> ID：12222133
> 
> 赞同：3
> 
> 时间：2012-08-31T20:33:03.537
> 
> 标签：jquery, css, slidetoggle

晚上好，

我有一段代码可以切换下拉菜单。在菜单中，有一些 DIV 位于其包含 DIV 的“外部”。一个 jsFiddle 可以在这里找到：http: [//jsfiddle.net/nGSPg/3/](http://jsfiddle.net/nGSPg/3/)

问题是，当播放“滑动”动画时，三角形被隐藏了。我的问题是：

*   为什么是这样？
*   我该如何解决这个问题？我希望三角形像它们包含的 div 一样向下和向上滑动。

提前致谢，
silox

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:00:52.860

**更新**：真正的问题实际上是 slide()在元素上将**溢出**设置为**隐藏**，所以它会隐藏它之外的任何东西。完成后，它将删除它，使它们再次出现。

* * *

因为三角形有*position:absolute*，所以它们只会在幻灯片完成后出现。为了解决这个问题，我会给他们一个**位置：relative**并将它们移到那个盒子外面，然后**把它全部放在一个容器 div 中，这个容器 div 本身就会将幻灯片应用到它上面**。

更新后的 HTML：

```
<span class="toggle">Admin</span> |

<div class="slidetoggle">
  <div class="triangle-big"></div>
  <div class="triangle-small"></div>

  <div class="slideHolder"> <a href="" title="" target="_blank">Forum</a>
    <br /> <a href="" title="" target="_blank">Website</a>
  </div>
</div> <span class="toggle">My account</span>

<div class="slidetoggle">
  <div class="triangle-big"></div>
  <div class="triangle-small"></div>

  <div class="slideHolder"> <a href="" title="">My profile</a>
    <br /> <a href="" title="">User panel</a>
    <br /> <a href="" title="">Log out</a>
    <br />
  </div>
</div>​ 
```

和CSS：

```
.toggle {
    cursor: pointer;
    padding: 2px 2px 0px 3px;
}

.slidetoggle {
    position: absolute;
    display: none;
}

.slideHolder{
    position: relative;
    background-color: white;
    padding:10px;
    top:0px;
    left: 0px;
    border: 1px solid #ccc;
    -moz-box-shadow: 0 0 5px #c8c8c8;
    -webkit-box-shadow: 0 0 5px #c8c8c8;
    box-shadow: 0 0 5px #c8c8c8;
    text-align: left;
}

#login-links {
    padding: 2px 10px 0px 3px;
}

.triangle-big {
    width: 0;
    height: 0;
    border-left: 7px solid transparent;
    border-right: 7px solid transparent;
    border-bottom: 7px solid #C8C8C8;
    position: relative;
    top: 6px;
    left: 8px;
    z-index: 99;
}

.triangle-small {
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 5px solid white;
    position: relative;
    top:1px;
    left: 10px;
    z-index: 100;
}​ 
```

[这是一个分叉的例子，它显示了它的工作原理。](http://jsfiddle.net/digthedoug/tSXgG/)

# jquery - 添加jquery ui datepicker动态样式中断？

> ID：12222137
> 
> 赞同：0
> 
> 时间：2012-08-31T20:33:10.550
> 
> 标签：jquery, jquery-ui

[在动态添加时间 jquery ui datepicker](https://stackoverflow.com/questions/12219897/adding-time-jquery-ui-datepicker-dynamically/12220029#12220029)之前阅读此内容？ 我有问题 JQ datepicker UI 添加新行后样式会中断！以前有没有人遇到过这个问题。有关数字来自 datepicker UI 的错误的更多详细信息，请参阅照片

![在此处输入图像描述](../Images/7d32312c4cc155a4b72f560a7579210d.png)

```
 <form>
  <table>
    <thead>
      <tr>
        <th scope="col">Date</th>
        <th scope="col">Start Time</th>
        <th scope="col">End Time</th>
        <th scope="col">Hour Type</th>

      </tr>
    </thead>

    <tbody>
      <tr>
        <td><input name="date1" id="date1" class="date"></td>
        <td><input name="startTime1" id="startTime1"></td>
         <td><input name="endTime1" id="EndTime1"></td>
        <td>
          <select name="hourType1" id="hourType1">
            <option value="">Please select</option>
            <option value="1">Regular</option>
            <option value="2">Overtime</option>
          </select>
        </td>
      </tr>
    </tbody>
  </table>
  <button>Add Row</button>
    </asp:Content>
</form>

        <script>
        $(document).ready(function($)
        {
        $(".date").datepicker();
            // trigger event when button is clicked
            $("button").click(function()
            {
                // add new row to table using addTableRow function
                addTableRow($("table"));

                // prevent button redirecting to new page
                return false;
            });

            // function to add a new row to a table by cloning the last row and 
            // incrementing the name and id values by 1 to make them unique
            function addTableRow(table)
            {
                // clone the last row in the table
                var $tr = $(table).find("tbody tr:last").clone();
                // get the name attribute for the input and select fields
                $tr.find("input,select").attr("name", function()
                {
                    // break the field name and it's number into two parts
                    var parts = this.id.match(/(\D+)(\d+)$/);
                    // create a unique name for the new field by incrementing
                    // the number for the previous field by 1
                    return parts[1] + ++parts[2];
                // repeat for id attributes
                }).attr("id", function(){
                    var parts = this.id.match(/(\D+)(\d+)$/);
                    return parts[1] + ++parts[2];
                });
                // append the new row to the table
                $(table).find("tbody tr:last").after($tr);
            };
        });
        </script>       
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:51:10.220

这个问题是由于以下原因造成的：当您克隆您的 tr 时，jquery 添加到您的输入的另一个 css 类：hasdatepicker，您可以在页面的源代码上验证这一点，您会发现：

```
<input name="date1" id="date1" class="date hasDatepicker"> 
```

这在这里得到了很好的解释：

[jQuery DatePicker 不适用于新添加的行](https://stackoverflow.com/questions/1667419/jquery-datepicker-not-working-on-newly-added-row)

我建议你不要克隆你的 tr 而是用 jquery 添加 html 代码我认为你的代码可以更简化，告诉我你想要什么我可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:28:49.520

当输入元素的 ID 相同时，这是 Datepicker 脚本的标准行为。因此，我建议您分配唯一的 ID（例如带有随机数的 ID），因此不会发生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T13:09:40.993

我向您提出一个简单的解决方案：单击按钮时，您将执行以下操作，您将删除 jquery 添加的第二个类：hasDatepicker，然后再次调用 datepicker：

```
$(".date").removeClass("hasDatepicker");
                    $(".date").datepicker(); 
```

试试这个[演示](http://jsfiddle.net/HN3Ba/18/)

# c# - 在 WPF 项目中实现命令行运行

> ID：12222138
> 
> 赞同：4
> 
> 时间：2012-08-31T20:33:26.720
> 
> 标签：c#, wpf

我想在 WPF 项目中实现命令行运行。App.cs 中的入口点已更改。但是控制台只会闪烁然后消失。如何解决？谢谢

```
public class App : System.Windows.Application
{
    [STAThread]
    static void Main(string[] args)
    {
        if (args.Length > 0)
        {// Commandline run mode
            // Command line given, console from console
            Console.WriteLine("In cmd line mode");
            AllocConsole();
            CmdLineRun.ParseArgs(args);
            CmdLineRun.CmdRun();
        }
        else
        {// GUI mode
            GUIMain();
        }
    }

    static void GUIMain()
    {
        App app = new App();
        app.StartupUri = new System.Uri("MainWindow.xaml", System.UriKind.Relative);
        app.Run();
    }

    [System.Runtime.InteropServices.DllImport("kernel32.dll")]
    private static extern bool AllocConsole();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:45:09.137

当您创建一个新的控制台窗口时，`AllocConsole`它只会在您的进程仍处于活动状态时保留。为了防止这种情况，您有几个选择：

1.  在用户提供一些输入之前，不要真正终止您的进程。这是您的陈词滥调“按任意键继续”选项，您将在`CmdRun`方法返回后执行此操作。控制台窗口仍然会消失，但只有在您告诉它时才会消失。

2.  使用预先存在的控制台。如果您*总是*从命令行运行应用程序，则不需要创建新的控制台窗口。相反，使用该`AttachConsole`方法将您的标准输入/标准输出附加到已经存在的标准输入/标准输出。

最好的选择通常是先尝试`AttachConsole(-1)`（-1 表示`ATTACH_PARENT_PROCESS`）。如果返回 0，那么您的父进程没有控制台，否则您无法附加到它。然后你可以依靠`AllocConsole`，并在关闭后处理它。

这不是 WPF 特有的，每当您尝试在同一个应用程序中混合控制台和 GUI 代码时都会出现问题。如果您的应用程序是为 CUI 子系统编译的，通过指定“控制台应用程序”，Windows 会为您处理此问题，但默认情况下您不会获得消息队列，并且窗口化 UI 会失败。如果您的应用程序是为 GUI 子系统编译的，通过指定“windows 应用程序”，您将获得消息队列，但不会获得控制台处理。让 Windows 处理 GUI 部分并手动管理控制台是这两个选项中最容易的一个。

# android - 未能读取第 0 行第 -1 列

> ID：12222141
> 
> 赞同：21
> 
> 时间：2012-08-31T20:33:42.950
> 
> 标签：android, sqlite

我正在尝试复制使用 SQLite 管理器创建的数据库，其中我做了：

```
CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 'en_US') 
```

和

```
INSERT INTO "android_metadata" VALUES ('en_US') 
```

我命名了我所有的主键`_id`。我的数据库被复制（在第一次运行时，logcat 中有各种红色消息）；此后，它仅在我查询时给出错误。

**主要活动**

```
public class MainActivity extends Activity {
String CNAME=" ques",TABLE_NAME=" JAVAQ";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Setupdb dbobj=new Setupdb(this); 

    try {    

        //dbobj.close();
        dbobj.createDataBase();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

    dbobj.openDataBase();
    dbobj.close();

   try{
         SQLiteDatabase sqdb=dbobj.getReadableDatabase();

         Cursor c = sqdb.query(TABLE_NAME,
                 new String[] { CNAME },
                 null, null, null, null, null); 
         while (c.moveToNext()) {

            String name =
            c.getString(c.getColumnIndex(CNAME));
            Log.i("LOG_TAG", " HAS NAME " + name);
         }}

            catch(Exception e){

                Log.e("err", e.toString());
            } 

}} 
```

**安装数据库**

```
public class Setupdb extends SQLiteOpenHelper {

  private static String DB_PATH = "";
    private static final String DB_NAME = "camprep.sqlite";
    private SQLiteDatabase myDataBase;
    private final Context myContext;

    private static Setupdb mDBConnection;

public Setupdb(Context context) {
    super(context, DB_NAME, null, 3);
    this.myContext=context;
    DB_PATH="/data/data/"
            + context.getApplicationContext().getPackageName()
            + "/databases/";
    Log.e(DB_NAME, DB_PATH);
}
public static synchronized Setupdb getDBAdapterInstance(Context context) {
    if (mDBConnection == null) {
        mDBConnection = new Setupdb(context);
    }
    return mDBConnection;
} 

    public void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();
        if (dbExist) {
            Log.e("db","exist");
            // do nothing - database already exist
        } else {
            // By calling following method
            // 1) an empty database will be created into the default system path of your application
            // 2) than we overwrite that database with our database.
            this.getReadableDatabase();
            try {
                Log.e("calling", "copy");
                copyDataBase(); 
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }

}
    private boolean checkDataBase() {
        SQLiteDatabase checkDB = null;
        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {
            // database does't exist yet.
        }
        if (checkDB != null) {
            checkDB.close();
        }
        return checkDB != null ? true : false; 
    }

    private void copyDataBase() throws IOException {
        // Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);
        // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME; 
        // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
        // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }
        // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

    public void openDataBase() throws SQLException {
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
    }
    public synchronized void close() {
        if (myDataBase != null)
            myDataBase.close();
        super.close();
    } 

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

} 
```

**堆栈跟踪**

```
 08-31 20:17:05.320: I/dalvikvm(9457): threadid=3: reacting to signal 3
08-31 20:17:05.370: I/dalvikvm(9457): Wrote stack traces to '/data/anr/traces.txt'
08-31 20:17:05.451: E/camprep.sqlite(9457): /data/data/com.example.mydataexplosion/databases/
08-31 20:17:05.490: E/db(9457): exist
08-31 20:17:05.521: E/CursorWindow(9457): Failed to read row 0, column -1 from a CursorWindow which has 11 rows, 1 columns.
08-31 20:17:05.521: E/err(9457): java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
08-31 20:17:05.650: D/gralloc_goldfish(9457): Emulator without GPU emulation detected.
08-31 20:17:05.650: I/dalvikvm(9457): threadid=3: reacting to signal 3
08-31 20:17:05.670: I/dalvikvm(9457): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-31T20:39:18.017

如果你看到

```
failed to read row 0,column -1 
```

这意味着您正在尝试从不存在的列中读取。

如果它找不到您指定的列名，则`Cursor.getColumnIndex()`返回`-1`，因此无效。

有两个原因：

1.  **该列不存在。**
2.  **列的名称不正确。**（所以不存在）。

注意：使用时列名**区分大小写**`getColumnIndex()`

* * *

在您的场景中：

```
 c.getString(c.getColumnIndex(CNAME)); 
```

检查 CNAME 变量的拼写是否正确，以及该名称的列是否存在。

```
String CNAME=" ques" 
```

例如，是否应该存在额外的前导空白..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:51:40.403

在使用 开始读取连续值之前 `c.moveToNext()`，请将光标设置到初始位置，即数据库的开头。

**`c.moveToFirst()`**

然后开始阅读表格。

或许能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T05:03:54.637

错误是在数据库列名中使用变音符号 ü,ö,ä。

虽然你可以通过`cursor.movetonext()`频繁切换方法来获取内容，直到你移动到正确的数字，但这很烦人，需要一堆代码。

我想这应该可以解决你们大多数人的问题。我猜除了 ASCII 是错误的——空格、点、减号等，也不能使用。

您可以成功创建数据库，并且可以使用外部 sqlite 工具查看，但 android 总是会唠叨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-15T12:37:09.250

可能发生这种情况的另一种情况：
**您正在从游标中删除行，而游标仍在使用中。**

例如可能发生的伪代码：

```
while(cursor.moveToNext()){

  readCursor(cursor);

  deleteRowFromCursor(cursor);

} 
```

**解决方案：**

保留要删除的行列表；建立批量删除sql语句；在 while 循环之外执行语句（当您不再使用游标或关闭它之后）。

```
while(cursor.moveToNext()){

  readCursor(cursor);

  queueRowForDelete(cursor);

} 

deleteQueuedRows(queuedRowsList); 
```

# excel - Excel函数在指定字符第二次出现之前返回字符

> ID：12222148
> 
> 赞同：5
> 
> 时间：2012-08-31T20:34:24.847
> 
> 标签：excel

例如，我想要一个函数来返回单元格中的前两个名称

“琼斯，安娜玛丽”将回归“琼斯安娜”

我试过 =LEFT(A1, FIND(" ",A1)-1) 但它只返回琼斯。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T20:39:56.583

您可以使用此版本获得第二个空格之前的所有内容

`=LEFT(A1,FIND(" ",A1,FIND(" ",A1)+1)-1)`

那仍然包括逗号，所以如果你不希望你可以添加一个 SUBSTITUTE 函数来删除逗号，即

`=SUBSTITUTE(LEFT(A1,FIND(" ",A1,FIND(" ",A1)+1)-1),",","")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:46:13.833

```
=LEFT(SUBSTITUTE(A1," ","-",2),FIND("-",SUBSTITUTE(A1," ","-",2),1)-1) 
```

我使用 SUBSTITUTE() 函数将第二个空格替换为连字符。然后我在 SUBSTITUTE 字符串上使用了 FIND() 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-24T14:49:50.157

我只是想添加另一个答案，即使某些单元格没有两个或更多空格也可以：

=TRIM（左（替换（A1，“”，REPT（“”，255），2），255））

[（来自http://www.mrexcel.com/forum/excel-questions/703900-delete-everything-after-second-space-each-cell.html](http://www.mrexcel.com/forum/excel-questions/703900-delete-everything-after-second-space-each-cell.html)的 mikerickson ）

（当然，如果你使用的是非英语系统——比如我在瑞典——你可能必须用分号替换所有逗号。）

# sql - Select 中的 case 语句

> ID：12222150
> 
> 赞同：0
> 
> 时间：2012-08-31T20:34:37.853
> 
> 标签：sql, sql-server, duplicates, case

我正在尝试运行以下查询，但是`Case`当我只希望提取一条记录时，即使他们同时具备这两个条件，我的语句中同时存在两个要求的人也会遇到问题。

```
SELECT DISTINCT
    SyCampus.Descrip AS 'Campus',
    dbo.rpt_adAttendanceDetail_vw.instructorname AS 'Instructor Name',
    dbo.rpt_adAttendanceDetail_vw.classcode AS 'Class Code',
    dbo.rpt_adAttendanceDetail_vw.section AS 'Section',
    dbo.rpt_adAttendanceDetail_vw.classdescrip AS 'Class',
    RTRIM(SyStudent.FirstName) + ' ' + ' '  + RTRIM(SyStudent.LastName) AS 'Student Name',
    dbo.rpt_adAttendanceDetail_vw.stunum AS 'Student Number',
    CASE WHEN  CmEvent.CmtemplateID IN (714, 716, 732,734)THEN 'YES' ELSE 'NO' END  AS 'Instructor Contact'

FROM 
    dbo.rpt_adAttendanceDetail_vw
 JOIN
    SyStudent
        ON SyStudent.SyStudentID = dbo.rpt_adAttendanceDetail_vw.SyStudentID
 JOIN
    SyCampus
        ON Sycampus.SycampusID = SyStudent.SyCampusID
 JOIN
    CmEvent
        ON CmEvent.SyStudentID = SyStudent.SyStudentID

WHERE   dbo.rpt_adAttendanceDetail_vw.AttMin = '0'
    AND dbo.rpt_adAttendanceDetail_vw.date = DATEADD(d, DATEDIFF(d, 0, GETDATE()), 0) -1
    AND SyStudent.SySchoolStatusID IN (13, 129, 130, 132, 72, 59, 122, 14)
    AND dbo.rpt_adAttendanceDetail_vw.attendtype <> 'E'
    AND CmEvent.CmEventStatusid = '2' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:32:13.733

我假设您在 SyStudent 和 CmEvent 之间存在一对多的关系。鉴于每个 SyStudent 可能在列表内外（714、716、732,734）都有相应的 CmEvent，这将解释为什么您的查询可能会为每个 SyStudent 返回多个记录。如果您想知道 SyStudent 在给定列表中是否有 CmEvent.CmtemplateID，您可以在联接中处理它。

考虑对您的查询进行以下更改：

```
 SELECT DISTINCT
    SyCampus.Descrip AS 'Campus',
    dbo.rpt_adAttendanceDetail_vw.instructorname AS 'Instructor Name',
    dbo.rpt_adAttendanceDetail_vw.classcode AS 'Class Code',
    dbo.rpt_adAttendanceDetail_vw.section AS 'Section',
    dbo.rpt_adAttendanceDetail_vw.classdescrip AS 'Class',
    RTRIM(SyStudent.FirstName) + ' ' + ' '  + RTRIM(SyStudent.LastName) AS 'Student Name',
    dbo.rpt_adAttendanceDetail_vw.stunum AS 'Student Number',
    CASE WHEN CmEvent.SyStudentID THEN 'YES' ELSE 'NO' END  AS 'Instructor Contact'
    FROM 
    dbo.rpt_adAttendanceDetail_vw 
JOIN
    SyStudent
        ON SyStudent.SyStudentID = dbo.rpt_adAttendanceDetail_vw.SyStudentID
 JOIN
    SyCampus
        ON Sycampus.SycampusID = SyStudent.SyCampusID
 LEFT JOIN
    CmEvent
        ON CmEvent.SyStudentID = SyStudent.SyStudentID 
        AND CmEvent.CmEventStatusid = '2'
        AND CmEvent.CmtemplateID IN (714, 716, 732,734)
WHERE   dbo.rpt_adAttendanceDetail_vw.AttMin = '0'
    AND dbo.rpt_adAttendanceDetail_vw.date = DATEADD(d, DATEDIFF(d, 0, GETDATE()), 0) -1
    AND SyStudent.SySchoolStatusID IN (13, 129, 130, 132, 72, 59, 122, 14)
    AND dbo.rpt_adAttendanceDetail_vw.attendtype <> 'E' 
```

这里的两个显着变化是左连接和 case 语句。首先，我们将 CmEvent 标准移动到左连接中。通过这样做，我们将只加入 CmEvent 中符合我们标准的记录。这将忽略模板 ID 在我们列表之外的所有 CmEvent 记录。其次，改变了case语句。现在我们使用 CmEvent.SyStudentID 的存在来确定 SyStudent 在给定列表中是否有 CmEvent.CmtemplateID。如果左连接没有产生匹配，那么就知道它们没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:02:07.697

我的猜测是你想要一个返回 max('Instructor Contact') 的外部聚合查询。

此外，考虑使用 1 代替“是”和 0 代替“否”

另外，考虑使用表别名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T22:29:33.643

`case`有效地将这些数字 714、716、732,734 中的一个替换为是或否，因此它看起来*像*重复，但它正在按照您的要求进行操作。我认为，如果您在`GROUP BY`所有`SELECT`领域都应该有不同的结果。

看看这里的[**SQL FIDDLE**](http://sqlfiddle.com/#!3/360c0/5)

所以你可以这样做：

```
 SELECT 
        SyCampus.Descrip AS 'Campus',
        dbo.rpt_adAttendanceDetail_vw.instructorname AS 'Instructor Name',
        dbo.rpt_adAttendanceDetail_vw.classcode AS 'Class Code',
        dbo.rpt_adAttendanceDetail_vw.section AS 'Section',
        dbo.rpt_adAttendanceDetail_vw.classdescrip AS 'Class',
        RTRIM(SyStudent.FirstName) + ' ' + ' '  + RTRIM(SyStudent.LastName) AS 'Student Name',
        dbo.rpt_adAttendanceDetail_vw.stunum AS 'Student Number',
        CASE WHEN  CmEvent.CmtemplateID IN (714, 716, 732,734)THEN 'YES' ELSE 'NO' END  AS 'Instructor Contact'

    FROM 
        dbo.rpt_adAttendanceDetail_vw
     JOIN
        SyStudent
            ON SyStudent.SyStudentID = dbo.rpt_adAttendanceDetail_vw.SyStudentID
     JOIN
        SyCampus
            ON Sycampus.SycampusID = SyStudent.SyCampusID
     JOIN
        CmEvent
            ON CmEvent.SyStudentID = SyStudent.SyStudentID

    WHERE   dbo.rpt_adAttendanceDetail_vw.AttMin = '0'
        AND dbo.rpt_adAttendanceDetail_vw.date = DATEADD(d, DATEDIFF(d, 0, GETDATE()), 0) -1
        AND SyStudent.SySchoolStatusID IN (13, 129, 130, 132, 72, 59, 122, 14)
        AND dbo.rpt_adAttendanceDetail_vw.attendtype <> 'E'
        AND CmEvent.CmEventStatusid = '2'
   GROUP BY
        SyCampus.Descrip,
        dbo.rpt_adAttendanceDetail_vw.instructorname,
        dbo.rpt_adAttendanceDetail_vw.classcode,
        dbo.rpt_adAttendanceDetail_vw.section,
        dbo.rpt_adAttendanceDetail_vw.classdescrip,
        RTRIM(SyStudent.FirstName) + ' ' + ' '  + RTRIM(SyStudent.LastName),
        dbo.rpt_adAttendanceDetail_vw.stunum,
        CASE WHEN  CmEvent.CmtemplateID IN (714, 716, 732,734)THEN 'YES' ELSE 'NO' END 
```

在一个小查询中，可能没有太多收获，但我认为在性能方面`GROUP BY`更可取`DISTINCT`：[参考这里](http://forums.teradata.com/forum/enterprise/distinct-vs-group-by-insert-vs-create-as)

# java - Eclipse：我们如何在运行时为 main 取参数

> ID：12222153
> 
> 赞同：17
> 
> 时间：2012-08-31T20:35:04.393
> 
> 标签：java, eclipse

在 Java 中，对于普通的 main 方法：

```
public static void main(String[] args){
    // code here
} 
```

`String[] args`用于从命令行获取一些参数。我可以通过以下命令从命令提示符运行此文件：

```
javac filename.java
java filename -30 
```

但是，它需要更多的步骤，我必须 cd 到这个文件夹。（每次都渴望）。所以，无论如何要在 Eclipse 中使用一些参数来运行这个文件。

谢谢 ：）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-31T20:36:29.953

[在 Eclipse 中，您可以为 Java 应用程序](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-java-local-configuration.htm)设置运行配置。单击启动工具栏中的绿色“播放”按钮（在开始调试的错误图标旁边）。

在该配置中，您可以设置工作目录和命令行参数 - 甚至在运行时提示用户输入命令行参数，使用`${string_prompt:Foo}`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-31T20:38:38.160

右键单击类。然后转到运行方式 > 运行配置。选择左侧的程序。然后在参数选项卡上，您将看到程序参数。如果您想传递多个参数，请在此文本区域中输入您的程序参数，以空格分隔参数。

![在此处输入图像描述](../Images/cea8777303ba37f4b884e39e97323640.png)

该站点提供了一个很好的带图像的分步教程：[http ://www.javaprogrammingforums.com/java-jdk-ide-tutorials/362-how-send-command-line-arguments-eclipse.html](http://www.javaprogrammingforums.com/java-jdk-ide-tutorials/362-how-send-command-line-arguments-eclipse.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T20:36:08.487

使用 main 方法右键单击程序---> 选择运行时配置--> 您将在右侧看到一个[参数框。](http://www.cs.colostate.edu/helpdocs/eclipseCommLineArgs.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-06T03:16:33.510

很奇怪，我必须在新行中传递每个参数，但是在阅读了一点之后，这对我来说是有意义的（忽略了他们（参数）是字符串的实例这一事实）。 ![PSVM 的多个参数](../Images/3732607a1fc98ffd4e50f60dbea8c351.png)

# primefaces - pe:layout: 右对齐标签

> ID：12222158
> 
> 赞同：0
> 
> 时间：2012-08-31T20:35:54.270
> 
> 标签：primefaces, primefaces-extensions

在[http://fractalsoft.net/primeext-showcase-mojarra/sections/layout/tabbedLayout.jsf的展示示例中](http://fractalsoft.net/primeext-showcase-mojarra/sections/layout/tabbedLayout.jsf)

标签居中，我不知道该怎么做。

我尝试搜索和应用 ui-tabs 样式，我可以轻松更改大小，但不能更改标签对齐方式。

例如这不起作用：[jQuery UI tabs aligned and sharing bar with a title](https://stackoverflow.com/questions/8323579/jquery-ui-tabs-aligned-and-sharing-bar-with-a-title)

这似乎是相关的css [http://code.google.com/p/primefaces-extensions/source/browse/primefaces-extensions/trunk/src/main/resources/META-INF/resources/primefaces-extensions/layout /layout.css?r=1201](http://code.google.com/p/primefaces-extensions/source/browse/primefaces-extensions/trunk/src/main/resources/META-INF/resources/primefaces-extensions/layout/layout.css?r=1201)

当我触发代码时，确实存在 pe-layout-tabbuttons 但我不知道要更改什么。

我基本上想要这个：

_________________|tab1|tab2|tab3|

而不是：|tab1|tab2|tab3|_________________

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:52:36.573

似乎这个 CSS 有魔力：

```
.pe-layout-tabbuttons {
    left: auto !important;
} 
```

要了解如何在 JSF 中使用 CSS，请参见[此处](http://www.mkyong.com/jsf2/how-to-include-cascading-style-sheets-css-in-jsf/)。

# asp.net - 站点链接和重定向中的 SSL 和相对 URL

> ID：12222168
> 
> 赞同：0
> 
> 时间：2012-08-31T20:36:44.600
> 
> 标签：asp.net, redirect, ssl, hyperlink, relative-path

我已经在一个处于测试阶段的网站上工作了一段时间，终于要推出它了。整个网站有几个链接、锚标记和相对 URL，它们链接到网站的管理和购物车部分，现在它们必须受到 SSL 保护。

此外，对于相对 URL 的相同问题`Response.Redirect("~/../..");`

当用户浏览时`http`，是否有将他们重定向到`https`使用相对 URL 连接的页面？出于 SSL 的目的，为链接和重定向编写绝对 URL 似乎是一种不好的做法。如果域名更改，我必须全部重写。另外，如果我想让它们在我的本地主机上工作，我每次上传到服务器时都必须更改它们。一定有什么解决办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:39:57.963

[在 HTTP 和 HTTPS 之间自动切换](http://www.codeproject.com/Articles/5523/Switching-Between-HTTP-and-HTTPS-Automatically)是一个非常好的代码，可用于快速轻松地实现切换逻辑 - 并且不会更改现有代码。

类似：[准备我的 ASP.NET / MVC 站点以使用 SSL？](https://stackoverflow.com/questions/9581582/preparing-my-asp-net-mvc-site-to-use-ssl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:41:06.603

Rick Strahl 的这些辅助方法将为您提供帮助

[http://www.west-wind.com/weblog/posts/2007/Sep/18/ResolveUrl-without-Page](http://www.west-wind.com/weblog/posts/2007/Sep/18/ResolveUrl-without-Page)

特别注意 ResolveServerUrl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:41:36.903

根据您运行的 IIS 版本，您始终可以将此功能卸载到网络服务器。在此处查看 URL 重写模块[。](http://www.iis-aid.com/articles/how_to_guides/redirect_http_to_https_iis_7)

# qt - 如何使一个目标依赖于另一个目标的 QMAKE_EXTRA_COMPILERS

> ID：12222171
> 
> 赞同：2
> 
> 时间：2012-08-31T20:36:56.893
> 
> 标签：qt, qmake

`proj`我的项目具有带有子目录的顶级目录`runtime`和`test`. 基本上，`test`取决于`runtime`，但它有点复杂。

**预期的行为**：如果你修改了一个文件`runtime`，然后make `runtime`，然后make `test`，这应该重建`test`。

**实际行为**：对于`test`，你会得到“make:Nothing to be done for `first'”。

以下是项目文件的相关摘录。

proj.pro：

```
test.depends = runtime 
```

运行时.pro：

```
TEMPLATE = lib
CONFIG = no_link target_predeps staticlib
TARGET =

# Avoid building libruntime.a
QMAKE_AR_CMD = @true
QMAKE_RANLIB = @true

include(../proj.pri)

RUNTIME_SOURCES += \
    foo.c
    bar.c 
```

proj.pri:

```
CLANG_RUNTIME_FLAGS = -emit-llvm
runtime.input = RUNTIME_SOURCES
runtime.output = lib${QMAKE_FILE_IN_BASE}.bc
runtime.commands = $$CLANG $$CLANG_RUNTIME_FLAGS -c ${QMAKE_FILE_IN} -o ${QMAKE_FILE_OUT}
QMAKE_EXTRA_COMPILERS += runtime 
```

在`runtime`的 Makefile 中，有一条目标规则`compiler_runtime_make_all`似乎对应于`QMAKE_EXTRA_COMPILERS`. 由这个规则构建的文件（foo.bc 和 bar.bc）在`OBJECTS`列表中，所以当你制作这个 Makefile 时它们会被构建。

在`test`的 Makefile 中，还有一个 target 的规则`compiler_runtime_make_all`，但它没有配方，也没有在任何地方引用。

那么我怎么知道`test`它应该取决于`QMAKE_EXTRA_COMPILERS`for `runtime`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:57:23.007

在顶层`proj.pro`（我假设是[`TEMPLATE = subdirs`](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#template)）中，指定`test`取决于`runtime` *仅*影响顶层`make`在指定的 上运行的顺序`SUBDIRS`。它不会*在*任何子目录中引入任何额外的依赖项——这些都是完全独立的`qmake`和调用`make`。

因此，要解决此问题，您需要`test.pro`指明`runtime`它所依赖的特定文件。见[`POST_TARGETDEPS`](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#post-targetdeps)变量。

或者，如果您[`QMAKE_EXTRA_COMPILERS`](https://wiki.qt.io/Undocumented_QMake#Custom_tools)用于在 中构建源代码`test.pro`，则可以添加如下内容：

```
test.depends = $${ROOT}/runtime/lib*.bc 
```

# android - 在 TabHost 中重新加载选项卡内容

> ID：12222173
> 
> 赞同：4
> 
> 时间：2012-08-31T20:37:13.923
> 
> 标签：android, android-tabhost, reload

我有一个带有 2 个选项卡的 Tabview，在我的 TabActivity 中，有一个按钮。单击按钮时，我想将数据发送到当前选项卡并将数据显示到当前选项卡。当我烤这个数据时，数据是可用的，但是当我把这个数据设置为 textview 时，我的 textview 没有改变。如何从 tabhost 活动刷新我的标签内容？（对不起我的英语不好：P）这是我的代码：

```
public class MainActivity extends TabActivity {

TabHost tabHost;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tabHost = getTabHost();
    Bundle b = new Bundle();
    b.putInt("category_id", 10);

    Intent tab1Intent = new Intent(this, Tab1Activity.class).putExtras(b);
    TabSpec tab1Spec = tabHost
            .newTabSpec("Tab1")
            .setIndicator("Tab1",
                    getResources().getDrawable(R.drawable.credit_tab_icon))
            .setContent(tab1Intent);
    tabHost.addTab(tab1Spec);

    Intent tab2Intent = new Intent(this, Tab2Activity.class);
    TabSpec tab2Spec = tabHost
            .newTabSpec("Tab2")
            .setIndicator("Tab2",
                    getResources().getDrawable(R.drawable.credit_tab_icon))
            .setContent(tab2Intent);
    tabHost.addTab(tab2Spec);

    for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)
    {
        tabHost.getTabWidget().getChildAt(i).getLayoutParams().height = 80;
    }
    tabHost.getTabWidget().setCurrentTab(0);

    Button ok   =   (Button) findViewById(R.id.ok);
    ok.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            Bundle bundle = new Bundle();
            bundle.putInt("category_id",103);
            LocalActivityManager manager            =   getLocalActivityManager();
            String currentTag                       =   tabHost.getCurrentTabTag();
            Class<? extends Activity> currentClass  =   manager.getCurrentActivity().getClass();
            manager.destroyActivity(currentTag, true);
            manager.startActivity(currentTag, new Intent(MainActivity.this, currentClass).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP).putExtras(bundle));
        }
    });
}

@Override
public void onResume() {
    super.onResume();
} 
```

}

这是我的 Tab1Activity：

```
public class Tab1Activity extends Activity {
public static Tab1Activity s_childActivity;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab1);
}

public void onResume() {
    super.onResume();
    Bundle extras = this.getIntent().getExtras();
    int get_category_id = extras.getInt("category_id");
    Toast.makeText(this, "category_id = " + get_category_id,
            Toast.LENGTH_SHORT).show();

    TextView textView1  =   (TextView)this.findViewById(R.id.textView1);
    textView1.setText("Berubah"+get_category_id);//==> Textview not change with category_id
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:42:12.020

试试这个代码。

```
getTabHost().invalidate() 
```

它应该再次重绘选项卡，因此它们的内容会得到更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T06:41:04.963

You can get the current tab and refresh TextView in your button onClick like this:

```
if (getCurrentActivity() instanceof Tab1Activity ) {
                                    ((TextView)((ProductListTab) getCurrentActivity())
                                                     .findViewById(R.id.textView1)).setText("103");
                                } 
```

# ruby - 如何使用 RSpec 测试 STDIN

> ID：12222175
> 
> 赞同：3
> 
> 时间：2012-08-31T20:37:22.020
> 
> 标签：ruby, rspec

好的，需要帮助进行测试。我想测试这个类是否接收到一个字母“O”，并且当调用“move_computer”方法时返回该人在 cli 上输入的内容。我的心理子处理器告诉我，这是一个简单的分配变量给某个东西，以在 STDIN 中保存随机的人工输入。只是现在没有得到它......有人指出我正确的方向吗？

这是我的课...

```
class Player
  def move_computer(leter)
    puts "computer move"
    @move = gets.chomp
    return @move
  end
end 
```

我的测试看起来像......

```
describe "tic tac toe game" do
  context "the player class" do
    it "must have a computer player O" do

      player = Player.new()
      player.stub!(:gets) {"\n"} #FIXME - what should this be?
      STDOUT.should_receive(:puts).with("computer move")
      STDOUT.should_receive(:puts).with("\n") #FIXME - what should this be?
      player.move_computer("O")
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T02:13:57.803

因为`move_computer` *返回*输入，我认为您的意思是：

```
player.move_computer("O").should == "\n" 
```

我会像这样编写完整的规范：

```
describe Player do
  describe "#move_computer" do
    it "returns a line from stdin" do
      subject.stub!(:gets) {"penguin banana limousine"}
      STDOUT.should_receive(:puts).with("computer move")
      subject.move_computer("O").should == "penguin banana limousine"
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T03:52:22.590

这是我想出的答案...

```
require_relative '../spec_helper'

# the universe is vast and infinite...it contains a game.... but no players
describe "tic tac toe game" do
  context "the player class" do
    it "must have a human player X"do
      player = Player.new()
      STDOUT.should_receive(:puts).with("human move")
      player.stub(:gets).and_return("")
      player.move_human("X")
    end
    it "must have a computer player O" do
      player = Player.new()
      STDOUT.should_receive(:puts).with("computer move")
      player.stub(:gets).and_return("")
      player.move_computer("O")
    end
  end
end 
```

[管理员注意...如果我可以一键选择所有代码文本并右缩进，那将是很酷的。（嗯……我以为这是过去的一个功能……？）]

# javascript - 图像动画不流畅

> ID：12222178
> 
> 赞同：0
> 
> 时间：2012-08-31T20:37:33.077
> 
> 标签：javascript, jquery, image, animation

我有 2 张图像在彼此之上。当顶部的移动到不同的位置时，它们都变得有点扭曲/模糊。一秒钟后，图像恢复正常。

我该如何阻止这种情况发生？

[http://jsfiddle.net/jenga/W59c4/](http://jsfiddle.net/jenga/W59c4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:40:51.647

图像的实际尺寸为 140 x 198。您正在将其缩小并扩大到不同的尺寸。由于光栅图像的工作方式，这会导致模糊和/或失真。使用更大的源图像、更高的 DPI，或者不要将其扩展超出源图像的基本尺寸。

否则，任何 javascript 动画的感知“流畅度”都非常依赖于客户端计算机的资源。如果您的浏览器线程在内存上运行过高（Firefox+Firebug 可以在工作几个小时后膨胀高达 1gb 的常驻 RAM 消耗！），或者如果您的系统没有很多可用资源可供启动，动画可以生涩，屏幕渲染可能很慢或有故障。

除了缩放引起的失真之外，您的动画在我自己的计算机上运行流畅（我有很多资源可以使用：P）

**文档**

*   *维基百科上的光栅图形*- [http://en.wikipedia.org/wiki/Raster_graphics](http://en.wikipedia.org/wiki/Raster_graphics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:41:01.930

将黑卡的大小调整到所需的尺寸。您正在使用 600 像素宽的原件并将其缩小到 75 像素宽；这就是失真的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:48:00.440

我的猜测是浏览器不会对黑卡进行反锯齿处理，因为它不在视图中。在动画期间，浏览器正在快速更新蓝卡的位置和比例。作为一种性能指标，抗锯齿可能会被推迟，直到浏览器有足够的空间来超越紧密的 setTimeout 循环所提供的空间。

# android - 如何从 ArrayList 中检索数据 不是来自 ArrayList ?

> ID：12222181
> 
> 赞同：0
> 
> 时间：2012-08-31T20:38:06.190
> 
> 标签：android, arraylist

嗨，我还是 java 数据管理的新手。

我有一个名为 Computer 的模型对象类，它有 3 个字段：处理器、内存、hddSize。

我创建了一个 ArrayList

```
ArrayList<Computer> myCompList = new ArrayList<Computer>();

        Computer comp1 = new Computer();
        comp1.setProcessor("1.5 GHZ");
                    comp1.setRam("512 MB");
                    comp1.setHddSize("100 GB");

        Computer comp2 = new Computer();
        comp2.setProcessor("2.5 GHZ");
                    comp2.setRam("512 MB");
                    comp2.setHddSize("50 GB");

                    myCompList.add(comp1);
                    myCompList.add(comp2); 
```

现在如何在上面的 ArrayList 的 index1 处检索数据？

PS：如果它是 ArrayList<String>，我知道该怎么做，方法是将其转换为 String[]，然后转换为 String[index]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:41:18.883

假设您在 Computer 类中创建了 getter 和 setter：

```
String processor = myCompList.get(1).getProcessor();
String ram = myCompList.get(1).getRam();
String hddSize = myCompList.get(1).getHddSize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:41:39.037

查看[ArrayList的 Javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)

这是您应该检查此类简单问题的地方。答案可以在“方法总结”部分找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:41:49.177

你不能走`myCompList.get(0);`吗？

对象数组列表本质上与字符串数组列表相同。该`.get()`方法返回给定索引处的特定对象。 [这](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)是 ArrayList 的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T18:59:45.230

`myCompList.get(index)`将返回给定索引上的数据，确保索引号不会大于数组大小，它会给你索引越界异常。

# git - 当我“git push”时，git hooks 是否被推送到远程？

> ID：12222186
> 
> 赞同：105
> 
> 时间：2012-08-31T20:38:36.663
> 
> 标签：git, githooks

如果我在 repo/.git/hooks/post-commit 的本地存储库中创建一个新的钩子脚本，然后我运行“git push”，钩子会推送到远程吗？然后，当其他开发人员从同一来源运行“git pull”时，他们会得到我的新钩子吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-31T20:42:13.977

不，钩子是每个存储库的，永远不会被推送。同样，repo 配置也没有被推送，也没有任何东西`.git/info`，或者其他一些东西。

推送和拉取只交换分支/标签和提交对象（以及从提交中可以访问的任何内容，例如树、blob）。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-08-31T20:41:48.407

不，git 钩子不会被推送或拉出，因为它们不是存储库代码的一部分。

请参阅[文档](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)以获取简单的客户端和服务器端挂钩列表。

如果要为从给定存储库中克隆或拉取的所有客户端启用一些钩子，则必须将钩子添加到代码库中，然后创建自己的脚本以将它们复制到或从`repo/.git/hooks/`.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-09-27T00:34:38.763

遗憾的是没有，但从 git 2.9 开始，您可以将它们放入 .githooks 文件夹（正如其他人提到的那样）并运行：

```
git config --local core.hooksPath .githooks/ 
```

所以不需要符号链接或复制文件。

# ruby-on-rails - 在 Sublime 中查看时 test.log 中的“ESC”字符

> ID：12222189
> 
> 赞同：20
> 
> 时间：2012-08-31T20:38:57.777
> 
> 标签：ruby-on-rails, sublimetext2, sublimetext

每当我从任何 Rails 应用程序打开 test.log 时，我都会在 Sublime 中获得以下屏幕截图。我试过搞乱编码，但找不到任何修复它的东西。

![在此处输入图像描述](../Images/c3137a28d212cb6c8780b07ea93c52b9.png)

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-31T20:51:29.030

这些是用于为日志文件添加颜色的控制字符。崇高的文字显然不支持这一点。

如果您主要使用不理解这些颜色代码的编辑器查看日志文件，您可以使用 rails`config.colorize_logging`设置将其关闭

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-29T19:10:23.540

有一个 Sublime 包可以将这些 ANSI/vt100 转义序列转换为彩色文本 - [SublimeANSI](https://github.com/aziz/SublimeANSI) （使用[包控制并查找 ANSIescape](https://packagecontrol.io/packages/ANSIescape)） - 这添加了一个“ANSI”文件类型，它将以绚丽的颜色显示您的日志文件。（该文件以只读方式显示，但如果您想对其进行编辑，可以将类型更改回“纯文本”。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T15:03:46.623

支持 Tom Hundt 的回答...... SublimeANSI 是要走的路。比较这些拍摄前后的照片：

**Sublime 对彩色 Rails 日志输出的默认渲染：**

[![Sublime 默认渲染彩色 Rails 日志输出](../Images/20a0ea8e6fdb3e715d20560402604387.png)](https://i.stack.imgur.com/WaqT7.png)

**现在将语法突出显示更改为`ANSI`：**

[![现在将语法高亮更改为 ANSI](../Images/e23baed314d3cdf6520fcc278e9ff304.png)](https://i.stack.imgur.com/wZyxE.png)

**现在，惊叹于 SumblimeANSI 渲染的威严：**

[![在此处输入图像描述](../Images/9f53ada085ccea863eee415ec6d7c764.png)](https://i.stack.imgur.com/Jx2mR.png)

了解更多关于 SublimeANSI 包的信息：[https ://github.com/aziz/SublimeANSI](https://github.com/aziz/SublimeANSI)

注意：要在包管理器中安装它，请搜索“ANSIescape”...而不是“SublimeANSI”。这让我很困惑。

# ios - 按钮卡在突出显示

> ID：12222191
> 
> 赞同：1
> 
> 时间：2012-08-31T20:39:19.187
> 
> 标签：ios, cocoa-touch, ios5, uiscrollview, touchesbegan

我刚刚开始从事一个项目，我已经遇到了一些问题和错误。我想知道你们是否可以帮助我找出错误在哪里。

**快速概览：**我有两个文件：（ViewController.m 和 Scroller.m）。在 ViewController 中，我在 ViewDidLoad 下有一些代码（我将在稍后显示），我还有一个函数 (addImagesToView) 可以执行它所说的操作，并且一些 touchesBegan、moved 和 end 难以处理。

在 Scroller 中，我决定重写一些“-(void)touches”函数实现。

**我遇到的问题** 是：按钮（来自 addImagesToView 函数）卡在突出显示的位置。我使用 NSLog 进行了一些测试，以查看哪些“触摸”有效，哪些无效。“touchesMoved”不能正常工作。如果用户向下拖动，日志会在大约 3 或 4 行文本后停止。我认为它以某种方式干扰了滚动。

这是 ViewController.m 的内容：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    UIImageView *imageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"bgPNG.png"]];

    imageView.frame = CGRectMake(0, 0, 320, 480);
    [self.view addSubview:imageView];

    //UIColor *background = [[UIColor alloc]initWithPatternImage:imageView.image];
    //self.view.backgroundColor = background;

    CGRect fullScreen = [[UIScreen mainScreen] applicationFrame];

    scroll = [[Scroller alloc] initWithFrame:fullScreen];
    scroll.contentSize = CGSizeMake(320, 2730);

    scroll.delaysContentTouches = NO;
    //scroll.canCancelContentTouches = NO;
    scroll.scrollEnabled  = YES;

    [self.view addSubview:scroll];

    buttons = [[NSMutableArray alloc]init];

    [self addImagesToView];

}

-(void) addImagesToView{

    CGFloat yCoordinate = 35;

    for (int i=1; i<=18; i++) {

        UIImageView *image = [[UIImageView alloc]initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"picture%d.png",i]]highlightedImage:[UIImage imageNamed:[NSString stringWithFormat:@"picture%dHG.png",i]]];

        CGRect position = CGRectMake(105, yCoordinate, IMAGE_SIZE, IMAGE_SIZE);
        image.frame = position;

        [scroll addSubview:image];

        image.userInteractionEnabled = YES;
        image.tag = i;

        [buttons addObject:image];
        yCoordinate += 150;

    }
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // Get any touch
    UITouch *t = [touches anyObject];

    if ([t.view class] == [UIImageView class])
    {

        // Get the tappedImageView
        UIImageView *tappedImageView = (UIImageView*) t.view;
        tappedImageView.highlighted = YES;
    }
}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *t = [touches anyObject];
    if ([t.view class] == [UIImageView class])
    {

        // Get the tappedImageView
        UIImageView *tappedImageView = (UIImageView*) t.view;
        tappedImageView.highlighted = NO;
    }

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources th at can be recreated.
}

@end 
```

这是 Scroller.m

```
#import "Scroller.h"

@implementation Scroller

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (!self.dragging)
        [self.nextResponder touchesBegan: touches withEvent:event];
    else
        [super touchesBegan: touches withEvent: event];
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *t = [touches anyObject];
    if ([t.view class] == [UIImageView class])
    {

        // Get the tappedImageView
        UIImageView *tappedImageView = (UIImageView*) t.view;
        tappedImageView.highlighted = NO;
    }

}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if (!self.dragging)
        [self.nextResponder touchesEnded: touches withEvent:event];
    else
        [super touchesEnded: touches withEvent: event];        // Get the tappedImageView

}

/*
 // Only override drawRect: if you perform custom drawing.
 // An empty implementation adversely affects performance during animation.
 - (void)drawRect:(CGRect)rect
 {
 // Drawing code
 }
 */

@end 
```

我也尝试在 ViewController 中实现所有的触摸，但我不知道如何让它从滚动中读取（请注意 SCROLL 和 SCROLLER 之间的差异）。

正如你所知道的，我尝试像这样对它们进行排序：view -> backGroundImage ->scroller ->addImagesToView(function)，以便从 [I]addImagesToView[/I] 出来的图像位于滚动条的顶部. 这就是我想要的层次结构。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:49:33.080

您不必为按钮按下编写自己的触摸处理例程。而不是使用`UIImageView`s，只需创建`UIButton`s 并挂钩到他们的`UIControlEventTouchUpInside`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:58:42.753

我认为您最好告诉我们您要完成的工作，因为您可能在这里找错了树。正如 Jim 所说，有更好的选择图像的方法，即使您想自己处理触摸，UIGestureRecognizers 也可能是更好的选择。如果您允许用户选择图像，我建议您查看 github 上的 iCarousel。这是一个开源轮播，非常适合图像选择。此外，如果您可以针对 iOS 6，则有一个新的集合视图可能就在您的小巷里。

# python - Django：[电子邮件保护]在管理员

> ID：12222196
> 
> 赞同：16
> 
> 时间：2012-08-31T20:40:01.270
> 
> 标签：python, django

我有一个看似简单的问题，但我还没有找到调试它的方法。

在我们生产网站的管理员中，当编辑具有用户外键的对象时，所有用户都显示为**[email protected]**。这使得管理员在这些区域无法使用！

我尝试用谷歌搜索这个问题，但由于“电子邮件保护”一词出现在许多邮件列表中的不相关上下文中，我找不到解决方案。另外，我在 Django 代码库中搜索了“电子邮件保护”，但没有找到。

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-31T21:04:31.937

我真的不知道答案，但是每当我看到**[电子邮件保护]**出现在 Google 上时，如果我导航到链接，那么电子邮件就会出现，如果我检查它附近的元素，这段 javascript：

```
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l=document.getElementById("__cf_email__");a=l.className;if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */ 
```

这可能会进一步帮助您。（检查您的元素，看看这是否也适用于您。）

如果您也在代码中看到它，那么[这](http://wordpress.org/support/topic/sql-ijection-or-something-have-i-been-hacked)和[这](http://just-ask-kim.com/autoresponse-plus-arp3-email-protected-error/#.UEEo0PEiGRA)可能会对您有所帮助。

**编辑：**这似乎是由[Cloudflare 的电子邮件混淆](https://support.cloudflare.com/hc/en-us/articles/200170016-What-is-Email-Address-Obfuscation-)引起的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-25T07:27:33.490

电子邮件混淆对公共站点来说是件好事，我想为管理员禁用它。所以我编写了这个中间件来禁用管理员中的电子邮件混淆。

```
def _insert_email_off(html):
    origin = html
    try:
        pos1 = html.index('>', html.index('<body')) + 1
        html = html[:pos1] + '<!--email_off-->' + html[pos1:]
        pos2 = html.index('</body>')
        html = html[:pos2] +'<!--/email_off-->' + html[pos2:]
    except ValueError:
        return origin
    return html

class CloudflareEmailProtect(MiddlewareMixin):

    def process_response(self, request, response):
        if request.path.startswith('/admin/'):
            response.content = smart_bytes(_insert_email_off(smart_text(response.content)))
        return response

class TestCloudflareEmailProtect:

    def test_admin(self, rf):
        request = rf.get('/admin/aaa')
        html = '<html><body>content</body>'
        response = CloudflareEmailProtect().process_response(request, HttpResponse(html))
        assert b'<!--email_off--' in response.content

    def test_not_admin(self, rf):
        request = rf.get('/public')
        html = '<html><body>content</body>'
        response = CloudflareEmailProtect().process_response(request, HttpResponse(html))
        assert b'<!--email_off--' not in response.content

def test_insert_email_off():
    html = 'aa <body zzz>bb cc</body>dd'
    result = _insert_email_off(html)
    assert result == 'aa <body zzz><!--email_off-->bb cc<!--/email_off--></body>dd'

    assert _insert_email_off('aaa') == 'aaa' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-24T12:40:47.477

我也遇到了这个问题，浪费了很多次来解决。最后，我通过简单的添加解决了这个问题。

# 选项1：

在 HTML 页面中添加

```
<!--email_off-->YOUR_EMAIL_ADDRESS<!--/email_off--> 
```

该问题主要针对“Cloudflare 混淆电子邮件”。

# 选项 2：

从仪表板停用。

1.  登录到 Cloudflare 仪表板。

2.  确保选择了您要验证的网站。

3.  单击刮盾应用程序。

4.  在电子邮件地址混淆下，检查开关是否设置为开。

# android - 从后台弹出片段并再次添加

> ID：12222197
> 
> 赞同：0
> 
> 时间：2012-08-31T20:40:07.503
> 
> 标签：android, android-fragments

我有两个片段**friendListFragment**和**logListFragment**。

```
 FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();

    FriendListFragment friendListFragment = (FriendListFragment)fm.findFragmentById(R.id.friend_list_fragment_container);
    LogListFragment logListFragment = (LogListFragment)fm.findFragmentById(R.id.log_list_fragment_container); 
```

后者是在前者的**onListItemClick**事件的上下文中创建的。

```
 fm.popBackStack(null, FragmentManager.POP_BACK_STACK_INCLUSIVE);
    logListFragment = LogListFragment.newInstance(name);
    ft.add(R.id.log_list_fragment_container, logListFragment);
    if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
        ft.hide(friendListFragment);
    }
    ft.addToBackStack(null);
    ft.commit(); 
```

每次调用**onListItemClick 时**，我都会先清除后台堆栈，因为我只想在后台堆栈上拥有最新的**logListFragment**。

在我的活动的**onCreate**功能中，我会注意手机的方向。在纵向模式下，我清除 backstack 并以下列方式再次添加**logListFragment ：**

```
 if ((logListFragment != null) && (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)) {
        fm.popBackStack(null, FragmentManager.POP_BACK_STACK_INCLUSIVE);
        ft.add(R.id.log_list_fragment_container, logListFragment);
        ft.hide(friendListFragment);
        ft.addToBackStack(null);
        ft.commit();
    } 
```

之后，**friendListFragment**按预期隐藏，但**logListFragment**也不可见。当我按以下方式更改代码时，它按预期工作：

```
 if ((logListFragment != null) && (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT)) {
        LogListFragment copy = new LogListFragment();
        copy.setArguments(logListFragment.getArguments());
        fm.popBackStack(null, FragmentManager.POP_BACK_STACK_INCLUSIVE);
        ft.add(R.id.log_list_fragment_container, copy); // <- use copy
        ft.hide(friendListFragment);
        ft.addToBackStack(null);
        ft.commit();
    } 
```

当我添加一个新的**LogListFragment**实例时，它可以工作。

**问题**：

1.  为什么我需要创建一个新实例？
2.  有人知道更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:12:08.380

也许替换片段是更好的选择？

英尺[替换（int containerViewId，Fragment 片段）](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)

# android - Android 音频管理器和音量屏幕

> ID：12222200
> 
> 赞同：1
> 
> 时间：2012-08-31T20:40:25.703
> 
> 标签：android, audio

当您按下手机侧面的音量增大或减小键时，屏幕上会弹出音量通知，通知您音量变化。想知道的是，你能做一个应用程序来代替那个通知屏幕吗？不让你的应用出现在它上面？

# asp.net - Visual Studio 2012 网站 - 制作项目文件夹镜像资源管理器

> ID：12222202
> 
> 赞同：2
> 
> 时间：2012-08-31T20:40:40.500
> 
> 标签：asp.net, visual-studio, web-services, visual-studio-2012

我猜有一种我从未学过的标准方法来做到这一点......我有一个 VS 解决方案，其中包含一些文件夹，你知道的，模型、视图、控制器等。我添加了一些自定义的，如样式、脚本和图像。自然地，我开始在 VS 创建的资源管理器中的 Images 文件夹中保存站点的图像。然而，我很难过地得知这些文件不仅仅出现在我的解决方案中，因此它们也没有被 Web Deployed。真可惜。在这里做什么是正确的？

PS 当我说我创建了一个 Scripts 文件夹时，你们中的一些人可能会跳起来。我知道内置的缩小的东西，我现在不想使用它。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T05:54:52.297

如果您不介意弄脏 .csproj 文件，请首先从项目的 Images 文件夹中删除任何现有的文件引用，然后将其插入到`<Import>`标签之前。

```
 <ItemGroup>
    <Content Include="Images\**\*.*" />
  </ItemGroup> 
```

这将在加载项目时自动包含 Images 文件夹及其子文件夹中包含的所有文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:45:14.917

单击`Show All Files`解决方案资源管理器顶部工具栏中的 。
然后，您可以右键单击文件或文件夹并单击`Include in Project`。

您还需要确保 files'`Build Action`设置为`Content`，但这应该会自动发生。

# spring - Java - jar 文件的 Spring 属性文件配置

> ID：12222203
> 
> 赞同：6
> 
> 时间：2012-08-31T20:40:41.753
> 
> 标签：spring, properties, placeholder

Java-Spring 我有基于模块的项目，我有 DAO 层模块和业务层模块，它依赖于 DAO 层和 Web 层依赖于 DAO 层和业务层。

我正在使用 maven 进行项目编译。每个组件的 jar 和 jar 都在 web 项目 lib 文件夹下。

问题是我在 DAO jar 中有 spring 上下文文件和 .property 文件，以下是我的配置，但我 spring 无法加载属性我也尝试了前缀`value="classpath:abc.properties`，但它没有工作。

当我打开 DAO jar 时，spring 上下文和 .properties 文件都在根目录下。

```
<bean id="applicationProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="abc.properties" />
  </bean>

<bean id="cmfModelDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
      <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
      <property name="url" value="${jdbc.ConnectionUrl}"/>
      <property name="username" value="${jdbc.Username}"/>
      <property name="password" value="${jdbc.Password}"/>
  </bean> 
```

知道如何快速解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T18:06:54.450

我有一个使用以下代码的 Spring 多模块 Web 项目：

```
<context:property-placeholder location="classpath:env/env.properties" />

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${env.datasource.driver}" />
    <property name="url" value="${env.datasource.url}" />
    <property name="username" value="${env.datasource.username}" />
    <property name="password" value="${env.datasource.password}" />
</bean> 
```

不要忘记验证 xml 文件中的命名空间 url：

```
xmlns:context="http://www.springframework.org/schema/context"; 
```

文件夹 env 必须在类路径中，以便 Spring 可以找到它。我的属性文件也在一个罐子里，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:24:53.733

我遇到了这个错误，int 可能与您初始化上下文的方式有关，例如在我的 Web 应用程序中，问题与我在 web.xml 文件中设置的过滤器有关。此外，我最终使用的不是 xml 文件，而是一个带注释的配置类，并将其放在 web.xml 中：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextClass</param-name>
    <param-value>
      org.springframework.web.context.support.AnnotationConfigWebApplicationContext
  </param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>com.myapp.configuration.SpringConfig</param-value>
</context-param> 
```

如果您真的想使用 xml 文件，则必须将 AnnotationConfigWebApplicationContext 更改为 XmlWebApplicationContext。你应该告诉我们你是如何初始化你的上下文的（比如代码或 web.xml，如果这不能解决你的问题）

# javascript - jquery event.target is_a_child_of(element)

> ID：12222208
> 
> 赞同：13
> 
> 时间：2012-08-31T20:41:03.660
> 
> 标签：javascript, jquery, javascript-events

给定`element`一个包含 javascript 对象/DOM 元素的变量，我如何确定 event.target 是否是内部元素`element`？

```
function(event){
   // assume that var element exists in this scope
   if(event.target == a_child_of(element))
      // do something
}

<div id="myDiv">
   <div class="innerDiv">
      <input type="text"/>
   </div>
</div> 
```

如果`element`是`myDiv`，内部 div 或输入上发生的事件，或可能存在于内部的任何其他元素`myDiv`应导致语句评估为真。

我想我可以使用递归函数来构建一个子元素数组，然后检查 event.target 是否在数组中，但我想先看看是否有更简单的答案。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-31T20:46:12.390

你也可以使用[`.has()`](http://api.jquery.com/has/)

```
if ($(element).has(e.target).length > 0){
//
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-31T20:42:36.053

[jQuery来救援](http://api.jquery.com/jQuery.contains/)：

```
if (jQuery.contains(element, e.target)) 
```

# javascript - 无法通过 $getJSON 上传参数使用 js.coffee

> ID：12222222
> 
> 赞同：1
> 
> 时间：2012-08-31T20:41:54.140
> 
> 标签：javascript, ruby-on-rails-3, jquery, getjson

我需要使用`JS`将参数传递给 rails 控制器：

```
def page
  @select = Firstpage.where( :pid=>params[:par_id])
  respond_to do |format|
   format.html # page.html.erb
   format.json { render json: @select }
  end
end 
```

`js.coffee`代码：

```
fetchselect=(val) ->
  $.getJSON('firstpages_controller.rb', par_id:val )

$('.homeNav').find('.unactive').click ->
  id = $(this).attr('id')
  fetchselect(id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:02:17.837

咖啡脚本是服务器端的吗？如果它被提供给客户端，那么您不应该直接向控制器发出请求 - 相反，您应该发出一个资源请求，rails 服务器应该将其解析给正确的控制器。

详细说明：当您在服务器上为客户端生成 rails 链接时，您可能会产生 pages_path 的效果，它会生成一个“http://base_path/pages”效果的 url。这对 rails 来说是非常基础的——用户可以访问的每个对象都有 RESTful 表示，或者更简单地说，有一个 url 来识别它。资源的 JSON 表示没有什么不同 - 要获取 JSON，您传递给 getJSON 的 url 必须以相同的方式格式化。就客户而言，“pages_controller”不存在——这是他们无法直接访问的背景细节。

# svn - Subversion 或 svn 在存储库中获取状态

> ID：12222227
> 
> 赞同：0
> 
> 时间：2012-08-31T20:42:20.307
> 
> 标签：svn, repository, status

我想知道是否有任何文件未从客户端签入到 svn 存储库中。

即存储库中的SVN 状态。

我可以运行脚本、命令……我所拥有的只是存储库位置，我必须从客户端机器（不在存储库中）运行它。

用户 1：签出文件 X、文件 Y

用户 2：签出文件 Z。

目前共检出 3 个文件。

**更新：** 我想，我问错了问题。是否有在修改文件之前签出文件的概念，例如 clearcase 工具。

那么我们可以获取存储库中锁的状态吗？例如：

用户 A 锁定了 1、2、3 个文件，用户 C 锁定了 5。

共有 4 个文件被锁定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:39:12.910

在 Subversion 中，存储库不跟踪单个工作副本。签出操作不是独占的，因此甚至可以由无法修改存储库的用户执行。

从 Subversion 1.1 开始，Subversion 通过使用`svn lock PATH -m "Why"`. 这些锁通常存储在一个工作副本和存储库中。

在这种情况下，如果不先获得此锁，您将无法提交到锁定位置。

有关这些锁的更多信息，请参阅[http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html](http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html)。

# mysql - '执行失败：（1062）键'Y'的重复条目'X''是什么意思？

> ID：12222228
> 
> 赞同：0
> 
> 时间：2012-08-31T20:42:32.220
> 
> 标签：mysql, mysqli

我正在尝试添加`X`到我的数据库中的某个表，但我收到了这个错误。即使`X`表中不存在，它也会说它在那里。虽然`X`被添加到数据库中，但我想摆脱这个错误。我根本不知道它是否相关，但我正在使用 Mysqli 的准备好的语句，并且使用`$statement->errno." ".$statement->error`. 有人可以向我解释一下吗？谢谢。

更新：这是代码： `X = USER_USERNAME`

```
$stmt = $mysqli->prepare("INSERT INTO USERS (USER_USERNAME, USER_EMAIL, USER_BIRTHDAY, USER_PASSWORD, USER_SALT, USER_IP, USER_ACTIVATION_CODE) VALUES (?,?,?,?,?,INET_ATON(?),?)");
            $stmt->bind_param('sssssss',$username,$email,$date,$hashed_password,$salt,$IP,$activation_code);
            $stmt->execute();
            if (!$stmt->execute()) {
                echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
            }
            else {
                echo "ok";
            } 
```

显示创建表用户：

```
 CREATE TABLE `USERS` (
 `USER_ID` int(11) NOT NULL AUTO_INCREMENT,
 `USER_FIRSTNAME` varchar(100) CHARACTER SET utf8 DEFAULT NULL,
 `USER_LASTNAME` varchar(100) CHARACTER SET utf8 DEFAULT NULL,
 `USER_USERNAME` varchar(30) CHARACTER SET utf8 DEFAULT NULL,
 `USER_PASSWORD` varchar(128) CHARACTER SET utf8 DEFAULT NULL,
 `LEVEL_ID` int(11) NOT NULL,
 `USER_BIRTHDAY` date DEFAULT NULL,
 `USER_EMAIL` varchar(100) CHARACTER SET utf8 DEFAULT NULL,
 `USER_GENDER` enum('M','W','U') CHARACTER SET utf8 DEFAULT NULL,
 `USER_COUNTRY` varchar(30) CHARACTER SET utf8 DEFAULT NULL,
 `USER_LOCATION` varchar(30) CHARACTER SET utf8 DEFAULT NULL,
 `USER_ADDRESS` varchar(50) CHARACTER SET utf8 DEFAULT NULL,
 `USER_HOUSENUMBER` varchar(8) CHARACTER SET utf8 DEFAULT NULL,
 `USER_AVATAR` varchar(50) CHARACTER SET utf8 DEFAULT NULL,
 `USER_REGISTRATION_DATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 `USER_ACTIVATION_DATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
 `USER_STATUS` enum('REGISTERED','ACTIVE','BANNED','NONACTIVE') CHARACTER SET utf8 DEFAULT NULL,
 `USER_BANNED_DATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
 `USER_LATEST_LOGIN` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
 `USER_EXP` bigint(20) DEFAULT NULL,
 `USER_DESCRIPTION` text CHARACTER SET utf8,
 `USER_ACTIVATION_CODE` varchar(32) CHARACTER SET utf8 NOT NULL DEFAULT '0',
 `USER_SALT` varchar(15) CHARACTER SET utf8 NOT NULL,
 `USER_IP` int(10) NOT NULL,
 `USER_REMEMBER_KEY` varchar(32) CHARACTER SET utf8 NOT NULL,
 PRIMARY KEY (`USER_ID`),
 UNIQUE KEY `USER_USERNAME` (`USER_USERNAME`),
 UNIQUE KEY `USER_EMAIL` (`USER_EMAIL`),
 KEY `LEVEL_ID` (`LEVEL_ID`)
) ENGINE=MyISAM AUTO_INCREMENT=30 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:46:58.123

您可能正在尝试插入一条 ID（或其他字段）为 1 集的记录，而该记录已存在于表中。作为主键的字段对于每条记录必须具有唯一值。

您可以尝试一个简单的错误检查来避免此错误：

```
$rows = mysql_query("SELECT X from tablenme WHERE X = Y;");

if(mysql_num_rows($rows) > 0){
    echo 'Error Messege';
}else{
    insert...
} 
```

其中 X 是主键或外键列，Y 是要插入该列的值。

**编辑：**可能导致问题的一些问题可能是您没有在插入语句中指定某些不能为空的列。喜欢`LEVEL_ID`和`USER_REMEMBER_KEY`。它们设置为`NOT NULL`但未使用插入语句插入值。

我也不明白你为什么`'sssssss'`在第一列是`USER_USERNAME`并且它的对应值是时插入`$username`。也检查一下。

[SQL小提琴](http://sqlfiddle.com/#!2/b93c5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:43:49.690

这是因为您试图插入或更新违反约束（如 PK 或 UK）的值，例如

如果您的表有 ID 并且它是 PK 或唯一键，则您只能有一个唯一值......不可能不重复......

使用唯一键，您可以拥有 Null ...但永远不要在同一列中重复值，因为您将打破约束...有关更多信息，请查看[http://dev.mysql.com/doc/refman /5.0/es/constraints.html](http://dev.mysql.com/doc/refman/5.0/es/constraints.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:44:42.503

如果您收到该错误，则表*中确实*存在X。显然你没有注意到它，但它就在那里。（检查修剪空格和区分大小写等内容。）

如果您在 phpMyAdmin 中没有收到错误，那么您认为您发送的查询实际上并不是您发送的查询。很可能您正在为该字段发送空白，并且在您执行一次之后，所有进一步的查询都使用相同的空白值。

最简单的检查方法是从表中删除所有内容（如果需要，请先将其复制到其他地方）。然后运行查询并查看实际插入的内容与预期插入的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:45:44.750

您已经定义了**Primary**或**Unique Key**，但您再次尝试插入相同的值。那时由于已经存在相同的值，因此主键或唯一键不可能有冗余值。

是这样的。假设您有一个带有`id`and`name`和`id`as的表`primary key`。您将第一行插入为：

```
INSERT INTO `users` (`id`, `name`) VALUES (1, 'Praveen');
INSERT INTO `users` (`id`, `name`) VALUES (1, 'Kumar'); 
```

第二个查询违反了`id`唯一性。

### 解决方案：如果可能，请尝试截断表，然后再次运行查询。

### 一些尝试的步骤

1.  检查是否也违反了具有唯一约束的其他字段。
2.  查看正在生成什么查询。
3.  将相同的查询放入**phpMyAdmin**并检查。

# python - 带有 WXPython 的 GUI 中的瞬态文本

> ID：12222231
> 
> 赞同：0
> 
> 时间：2012-08-31T20:42:56.007
> 
> 标签：python, wxpython

我正在开发一个简单的 GUI，它输出一个自动复制到剪贴板的数值。一旦发生这种情况，我试图让文本“已复制”闪烁，立即出现，然后在一两秒后消失。

发生的情况是文本按照我的意愿闪烁，但显示的输出字段直到文本消失后才会更新，这不是我编写脚本的顺序。目标是让输出字段在文本出现的同时更新。

我让文本出现的方式相当粗糙，所以我非常愿意接受建议。想法和评论将不胜感激。

```
import sys
from win32gui import GetWindowText, EnumWindows, ShowWindow, SetForegroundWindow
import win32clipboard
import win32con
import time
import wx
from wxPython.wx import *
import itertools
from time import sleep

class MainFrame(wx.Frame):
    def __init__(self,title):

        wx.Frame.__init__(self, None, title="RRESI Rounder", pos=(0,0), size=(210,160))
        panel=Panel(self)

class Panel(wx.Panel):

    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

        x1=10; x2=110
        y1=10; dy=30; ddy=-3
        boxlength=80

        self.label1 = wx.StaticText(self, label="Input Number:", pos=(x1,y1+dy*1))
        self.Input = wx.TextCtrl(self, value="100.00001", pos=(x2,ddy+y1+dy*1), size=(boxlength,-1))

        self.button =wx.Button(self, label="GO", pos=(9999,y1+dy*3))
        self.Bind(wx.EVT_BUTTON, self.OnClick,self.button)
        self.button.SetDefault()

        self.label0 = wx.StaticText(self, label="Round to closest:  1/", pos=(x1,y1+dy*0))
        self.Denominator = wx.TextCtrl(self, value="64", pos=(x2,ddy+y1+dy*0), size=(boxlength,-1))

        self.label2 = wx.StaticText(self, label="Output Number:", pos=(x1,y1+dy*2))
        self.display = wx.TextCtrl(self, value="100.00000", pos=(x2,ddy+y1+dy*2), size=(boxlength,-1))
        self.display.SetBackgroundColour(wx.Colour(232, 232, 232))

        self.label3 = wx.StaticText(self, label="          ", pos=(x2+7,y1+dy*2+20)) #Copied

        self.label4 = wx.StaticText(self, label="", pos=(x2+7,y1+dy*2))
        self.label4.SetBackgroundColour(wx.Colour(232, 232, 232))

    def OnClick(self,event):      

        def openClipboard():
            try:
                win32clipboard.OpenClipboard()
            except Exception, e:
                print e
                pass

        def closeClipboard():
            try:
                win32clipboard.CloseClipboard()
            except Exception, e:
                print e
                pass

        def clearClipboard():
            try:
                openClipboard()
                win32clipboard.EmptyClipboard()
                closeClipboard()
            except TypeError:
                pass

        def setText(txt): 
            openClipboard()
            win32clipboard.EmptyClipboard()
            win32clipboard.SetClipboardText(txt) 
            closeClipboard()

        Denominator = float(self.Denominator.GetValue())
        Input=float(self.Input.GetValue())
        Output=round(Input*Denominator,0)/Denominator
        self.display.SetValue(str(Output))
        setText(str(Output))
        self.label4.SetLabel(str(Output)+"")
        self.label3.SetLabel("Copied")
        sleep(.5)
        self.label3.SetLabel("                    ")

if __name__=="__main__":
    app = wx.App(redirect=False)   # Error messages don't go to popup window
    frame = MainFrame("RRESI Rounder")
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:46:12.490

你只需要强制重绘，否则它不会重绘，直到调用下一个 EVT_PAINT （在函数退出之后......）睡眠阻塞......这意味着它睡眠时根本没有执行任何代码

```
...
self.label3.SetLabel("Copied")
self.Update()#force redraw
.... 
```

# php - 通过 preg_match 从链接获取站点名称

> ID：12222235
> 
> 赞同：-1
> 
> 时间：2012-08-31T20:43:41.790
> 
> 标签：php

我正在尝试从链接中获取站点名称

例如

我有这个链接

```
http://stackoverflow.com
http://www.google.com 
```

我想得到这个结果

```
stackoverflow
google 
```

我正在尝试 preg_match，但表达式有问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:45:11.913

你不需要怀孕：

```
$parsed = parse_url($url);
$host = $parsed['host']; 
```

e：这也将包含 .com，但与匹配整个域相比，您可以更轻松地修剪 TLD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:17:56.277

这并不像你想象的那么简单。你的例子只有`.com`TLD，所以如果你限制它，你可以这样做：

```
$result = preg_replace('(^(.+\.)?([^.]+)\.com$)', '$2', parse_url($subject, PHP_URL_HOST)); 
```

哪个会返回

```
stackoverflow 
```

例如。但是，如果您想涵盖常见的域后缀，这就不那么简单了。你会在 Mozilla 找到一个已知后缀列表，它是[PSL - Public Suffix List](http://publicsuffix.org/list/)。它有一些特殊的语法，并且存在[一个 PHP 库](http://www.dkim-reputation.org/regdom-libs/)。

# android - Android中的自定义日历视图

> ID：12222236
> 
> 赞同：5
> 
> 时间：2012-08-31T20:43:47.963
> 
> 标签：android, android-layout, android-viewpager

我正在为我的 android 应用程序构建一个自定义日历视图，允许您在几个月之间滑动。我创建了自定义日历方形视图，并将其嵌入到自定义日历*月*视图中，并且在 1 个月的范围内一切正常。

不幸的是，现在我被困住了。我现在想将我的自定义日历月视图嵌入到无限视图寻呼机中，这样我就可以无限期地向前和向后滚动日历。

我已经尝试使用一个简单的技巧来调整[这个水平寻呼机以进行无限滚动。](https://github.com/ysamlan/horizontalpager)我持有一组 3 个日历月视图，并根据用户滚动到的位置更新列表。例子...

1.  【七月、**八月**、九月】（重点是八月，然后用户滑动到九月）
2.  [七月、八月、**九月**]（现在重点在九月）
3.  [ *August* , August, **September** ]（八月左移一位，覆盖七月）
4.  [August, *September* , **September** ]（将九月左移一位，覆盖八月）
5.  [August, **September** , September]（将视图设置为九月中旬，所以我们再次居中）
6.  [8 月、**9 月**、*10 月*]（用实际的下个月覆盖 9 月 2 日）

但是，当我这样做时，当滑动到下个月时，屏幕上会出现明显的闪光。

这是向前滚动的代码（注意：向后滚动有同样的问题）

```
private void updateViewsForForwardScroll() {
    // Note: INDEX_PREV = 0; INDEX_CURR = 1; INDEX_NEXT = 2
    ((CalendarMonthView) getChildAt(INDEX_PREV)).showMonth(oneMonthPriorTo(currentMonth));
    ((CalendarMonthView) getChildAt(INDEX_CURR)).showMonth(currentMonth);
    setCurrentScreen(INDEX_CURR, false);
    ((CalendarMonthView) getChildAt(INDEX_NEXT)).showMonth(oneMonthAfter(currentMonth));
} 
```

我认为问题在于 setCurrentScreen() 在 showMonth(currentMonth) 之前完成，因此设置屏幕时 INDEX_CURR 的视图仍在更新。我尝试通过使用以下策略来解决这个问题......

1.  【七月、**八月**、九月】（重点是八月，然后用户滑动到九月）
2.  [七月、八月、**九月**]（现在重点在九月）
3.  [8 月、**9 月**]（除去 7 月，但将其存放起来以供回收利用）
4.  [August, **September** , October]（循环使用七月改为显示十月，并添加视图）

我根本没有触及当前聚焦的视图，但仍然有一个闪光！这一次，屏幕从九月闪烁到八月，然后又回到九月。

那么**我做错了什么？**有没有办法在用户不知道的情况下做我想做的事情？如果没有，我可以利用现有的课程吗？

（作为一个附带问题，有什么方法可以直观地自定义 Android CalendarView？那真的可以解决我所有的问题......）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:24:19.340

我最终通过扩展`FragmentStatePagerAdapter`和整合 user113215 的建议让它工作。我并没有追求真正的无限滚动，而是几乎无限（即10,000 个月，或833 年）。这是我的大部分代码：

```
public static class CalendarAdapter extends FragmentStatePagerAdapter {
    private static final int NUM_MONTHS = 10000;
    private static final int INDEX_EPOCH = NUM_MONTHS/2;
    private static final int MONTHS_PER_YEAR = 12;
    private static final Calendar calendarMonthEpoch = new GregorianCalendar(2012, Calendar.AUGUST, 1);

    // ...

    @Override
    public int getCount() {
        return NUM_MONTHS;
    }

    @Override
    public Fragment getItem(int position) {
        return CalendarMonthFragment.newInstance(calendarMonthAtPosition(position));
    }

    private static Calendar calendarMonthAtPosition(int position) {
        int offset = position - INDEX_EPOCH;
        Calendar calMonthAtPosition = (Calendar) calendarMonthEpoch.clone(); 
        calMonthAtPosition.add(Calendar.MONTH, offset % MONTHS_PER_YEAR);
        calMonthAtPosition.add(Calendar.YEAR, offset / MONTHS_PER_YEAR);

        return calMonthAtPosition;
    }

    // ...

} 
```

# mysql - 在mysql中查找重复项

> ID：12222239
> 
> 赞同：0
> 
> 时间：2012-08-31T20:43:58.997
> 
> 标签：mysql, duplicates

```
SELECT COUNT(organization.ID)
FROM organization
WHERE organization.NAME IN (
    SELECT organization.NAME
    FROM organization
    WHERE organization.NAME <> ''
        AND organization.APPROVED = 0 
        AND organization.CREATED_AT > '2012-07-31 04:31:08'
    GROUP BY organization.NAME
    HAVING COUNT(organization.ID) > 1
) 
```

此查询查找重复项，问题是页面加载需要 6 秒，因为内部语句。有没有办法让它跑得更快？MySQL 数据库版本 5.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:53:38.167

是的。这很慢，因为 MySQL 在处理“in”查询方面很慢。您可以改用它来修复它：

```
SELECT COUNT(organization.ID)
FROM organization o
WHERE exists (
    SELECT organization.NAME
    FROM organization o2
    WHERE organization.NAME <> ''
        AND organization.APPROVED = 0 
        AND organization.CREATED_AT > '2012-07-31 04:31:08' and
        organization.name = o.organization.name
    GROUP BY organization.NAME
    HAVING COUNT(organization.ID) > 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:23:58.507

如果您要返回的是所有重复项的总“计数”，但仅适用于在 APPROVED 和 CREATED_AT 上具有指定谓词的两行或多行的组织名称，那么您可以使用备用语句返回等价的结果：

```
SELECT SUM(c.cnt) 
  FROM ( SELECT COUNT(organization.ID) AS cnt
           FROM organization o
          WHERE o.NAME <> ''
          GROUP
             BY o.NAME
         HAVING SUM(o.APPROVED = 0 AND o.CREATED_AT > '2012-07-31 04:31:08') > 1
       ) c 
```

MySQL 可以利用一个合适的覆盖索引来满足这个查询，否则，这很可能是对组织表的全扫描。但它避免了两次引用组织表，并避免了 JOIN 操作。

此查询的一个合适的覆盖索引是：

```
ON organization (NAME, CREATED_AT, APPROVED, ID) 
```

请注意，如果该`ID`列保证为非 NULL（NOT NULL 约束或其表的 PRIMARY KEY，则可以避免引用该列，并且可以将该列排除在索引定义之外。）

```
SELECT SUM(c.cnt) 
  FROM ( SELECT SUM(1) AS cnt
           FROM organization o
          WHERE o.NAME <> ''
          GROUP
             BY o.NAME
         HAVING SUM(o.APPROVED = 0 AND o.CREATED_AT > '2012-07-31 04:31:08') > 1
       ) c 
```

* * *

EXPLAIN 输出显示此查询使用索引来满足查询，而不引用表中的任何数据块：

```
id  select_type  table       type    possible_keys    key              key_len  ref       rows  Extra                     
--  -----------  ----------  ------  ---------------  ---------------  -------  ------  ------  --------------------------
 1  PRIMARY      <derived2>  ALL     (NULL)           (NULL)           (NULL)   (NULL)       2                            
 2  DERIVED      o           index   organization_ix  organization_ix  44       (NULL)      29  Using where; Using index 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T20:58:01.143

我还发现为包含的 db 字段创建索引极大地提高了复杂查询的速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:52:29.213

尽量避免`IN`。

```
SELECT COUNT(organization.ID)
FROM 
    organization
    INNER JOIN 
    (
        SELECT organization.NAME
        FROM organization
        WHERE organization.NAME <> ''
            AND organization.APPROVED = 0 
            AND organization.CREATED_AT > '2012-07-31 04:31:08'
        GROUP BY organization.NAME
        HAVING COUNT(organization.ID) > 1
    ) AS t ON organization.NAME = t.Name 
```

# ios - 在 MusicSequence 中更改拍号

> ID：12222241
> 
> 赞同：9
> 
> 时间：2012-08-31T20:44:01.123
> 
> 标签：ios, iphone, ios5, midi, musicsequence

我正在尝试更改[MusicSequence](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicSequence_Reference/Reference/reference.html)中的拍号（默认为 4/4），但我似乎不明白如何做到这一点。我在序列中有 2 个[MusicTracks](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicSequence_Reference/Reference/reference.html)和一个 MusicPlayer 也可以重现音乐。如何更改此值？

**编辑：**

我现在知道我需要将 Time Sig 事件添加到 MusicSequence Tempo Track。我知道我可以使用[MusicSequenceGetTempoTrack](http://developer.apple.com/library/mac/documentation/AudioToolbox/Reference/MusicSequence_Reference/Reference/reference.html#//apple_ref/c/func/MusicSequenceGetTempoTrack)获得这首曲目，但是如何向其中添加时间信号事件？

**编辑2：**

研究我意识到我需要为Music Tempo Track创建一个[MusicTrackExtendedMetaEvent 。](https://developer.apple.com/library/mac/documentation/AudioToolbox/Reference/MusicTrack_Reference/Reference/reference.html#//apple_ref/c/func/MusicTrackNewMetaEvent)现在我需要知道如何正确格式化[MIDIMetaEvent](https://developer.apple.com/library/mac/documentation/AudioToolbox/Reference/MusicTrack_Reference/Reference/reference.html#//apple_ref/doc/c_ref/MIDIMetaEvent)（我知道 88 是 metaEventType 但不知道如何添加其余信息）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T06:06:05.647

在这浪费了 4 个小时之后，我想出了如何去做。这里的代码：

```
//Getting the tempo track
MusicTrack tempoTrack;
MusicSequenceGetTempoTrack (musicSequence, &tempoTrack);

//Set time signature to 7/16
MIDIMetaEvent timeSignatureMetaEvent;
timeSignatureMetaEvent.metaEventType = 0x58;
timeSignatureMetaEvent.dataLength = 4;
timeSignatureMetaEvent.data[0] = 0x07;
timeSignatureMetaEvent.data[1] = 0x04;
timeSignatureMetaEvent.data[2] = 0x18;
timeSignatureMetaEvent.data[3] = 0x08;
MusicTrackNewMetaEvent(tempoTrack, 0, &timeSignatureMetaEvent); 
```

[这是对 MIDI 文件规范的参考，用于在http://www.somascape.org/midi/tech/mfile.html](http://www.somascape.org/midi/tech/mfile.html)中查找拍号代码

# c - size_t 用作公式中的值

> ID：12222249
> 
> 赞同：0
> 
> 时间：2012-08-31T20:44:56.377
> 
> 标签：c, size-t

这是读取行的函数的简短片段。这怎么可能与它`bufsize`相比`((size_t)-1)/2`？

我想象将变量与例如进行比较。`int`- 那是不可能的；我认为相反，INT_MAX 是正确的。那么该代码如何才能真正工作并且不出错呢？

```
int c;
size_t bufsize = 0;
size_t size = 0;

while((c=fgetc(infile)) != EOF) {
    if (size >= bufsize) {
        if (bufsize == 0)
                bufsize = 2;
        else if (bufsize <= ((size_t)-1)/2)
                bufsize = 2*size;
        else {
                free(line);
                exit(3);
        }
        newbuf = realloc(line,bufsize);
        if (!newbuf) {
                free(line);
                abort();
        }
        line = newbuf;
    }
    /* some other operations */
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T20:46:12.677

```
(size_t)-1 
```

这是将值*转换*`-1`为 a `size_t`。`(type)value`是 C 中的一个演员表。

由于`size_t`是无符号类型，这实际上是可以容纳的最大值`size_t`，因此它用于确保缓冲区大小实际上可以安全地加倍（因此随后除以二）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:50:46.437

`(size_t)-1`强制转换`-1`为 type `size_t`，这导致（在*stdint.h*`SIZE_MAX`中定义的宏），该类型可以容纳的最大值。*`size_t`*

 *所以比较是检查是否`bufsize`小于或等于可以包含在一个中的最大值的一半`size_t`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T20:55:58.837

该代码依赖于一些关于位的假设，然后进行了一个众所周知的破解来找到最大 size_t 值（假设 size_t 不容纳比寄存器更多的位，这是许多机器上的安全赌注）。

首先它用位填充寄存器`1`，然后将其*转换*为`size_t`数据类型，因此比较将起作用。只要该寄存器的位数大于`size_t`数据类型，那么（如果有）未使用的`1`位将被截断，并且您将获得可以容纳位的最大无符号数`size_t`。

之后，它除以 2 得到该数字的一半，并进行比较以查看在不超过 " *maximum* " 的情况下增加大小是否安全`size_t`。但到那时，它正在划分`size_t`数据类型，并比较两种`size_t`数据类型（类型安全操作）。

如果您真的想删除这个位巫术（好吧，这不是我见过的最糟糕的位巫术示例）。考虑以下代码段

```
 else if (bufsize <= ((size_t)-1)/2)
            bufsize = 2*size; 
```

可以替换为

```
 else if (bufsize <= (MAX_SIZE/2)
            bufsize = 2*size; 
```

*并且在没有强制转换*的情况下是类型安全的，并且更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:46:26.470

`size_t`in`((size_t)-1)/2)`只是用作演员表：转换`-1`为`size_t`.

这里的*诀窍*是它`size_t`是无符号的，所以强制转换将转换为, 或`(size_t) -1`的最大值。这在循环的上下文中很有用。但是，我更愿意看到*直接*使用而不是这个技巧。`size_t``SIZE_MAX``SIZE_MAX`

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:47:00.540

size_t 没有被解释为一个值，它被用来将负一的值转换为 size_t 类型。

```
((size_t)-1)/2 
```

将 -1 转换为 size_t 然后除以 2。**

# javascript - 以树的形式查看动态 XML

> ID：12222257
> 
> 赞同：0
> 
> 时间：2012-08-31T20:45:50.243
> 
> 标签：javascript, jquery, xml

我有复杂的 xml，我希望它们被视为一棵树。我喜欢[http://xmlgrid.net](http://xmlgrid.net)将我的任何非常复杂的 xml 转换为树视图的方式。我需要构建一种类似的方式来查看我的 xml，以便可以在公司内部通过 web 使用它。

我尝试使用 jsTree 但它确实限制了 xml 格式的方式。有没有其他方法可以轻松地将 xml 查看到 jquery 树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:54:09.650

我会将该 XML 转换为 xml2json 之类的东西[，](http://www.fyneworks.com/jquery/xml-to-json/)然后将其提供给[jqTree](http://mbraak.github.com/jqTree/)。我想不出更简单的方法来做到这一点，并且使用 JSON 优于 XML 有相当大的[优势](https://stackoverflow.com/questions/5615352/xml-and-json-advantages-and-disadvantages)。我不能保证它的速度虽然......

解析和使用。考虑从一开始就使用 JSON。

# objective-c - 使用子类 NSView 关闭时采取行动

> ID：12222259
> 
> 赞同：1
> 
> 时间：2012-08-31T20:45:59.833
> 
> 标签：objective-c, cocoa

我有一个`NSView`做一些绘图的自定义，我使用一个结构来保留我的动画球的属性，在那个结构中我得到了一个`CGColorRef`，因为 ARC 禁止我在结构中拥有 obj-c 对象。

`CGColorCreateGenericWithRed`现在的问题是当我关闭我的应用程序时我将如何释放我的函数，而棘手的部分是，我希望`NSView`子类是“自包含的”，我的意思是我不想从我的类中引用子`AppDelegate`类。

我已经查看了 Apple Developer Docs，但似乎`NSView`对它的发布和/或它的父窗口的处置没有反应，考虑到这一点，我假设我会有泄漏`CGColorRef`，当然我会再次假设它将在应用程序关闭时收集，并且在一天结束时不会造成任何伤害。

**所以重复我自己，我想知道如何`CGColorRef`从子类中释放我的，`NSView`而不必将结构暴露在`NSView`子类之外。**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:00:40.493

在您的 Subclassed NSView 中，您必须添加以下两种方法之一：

弧：

```
- (void)dealloc
{
   //Release CGColorRef
} 
```

非 ARC：

```
- (void)dealloc
{
   //Release CGColorRef
   [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:34:27.083

您可以像在 ARC 之前的日子一样发布它 - 添加一个`dealloc`方法。在 ARC 下，您不包括在内`[super dealloc]`，但除此之外它是相同的。

从[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

> 如果您需要管理资源而不是释放实例变量，您可以实现一个 dealloc 方法。您不必（实际上您不能）释放实例变量，但您可能需要在系统类和其他未使用 ARC 编译的代码上调用 [systemClassInstance setDelegate:nil]。
> 
> ARC 中的自定义 dealloc 方法不需要调用 [super dealloc]（它实际上会导致编译器错误）。到 super 的链接是由编译器自动执行的。
> 
> 您仍然可以将 CFRetain、CFRelease 和其他相关函数与 Core Foundation 样式的对象一起使用（请参阅“管理免费桥接”）。

# r - 检查一个向量并输出一个奇异的 TRUE 或 FALSE 值

> ID：12222262
> 
> 赞同：1
> 
> 时间：2012-08-31T20:46:09.550
> 
> 标签：r, boolean, duplicates

我正在使用以下命令检查数据集中的重复日期：

```
duplicateTest <- duplicated(index(closePricesClean)) 
```

对于每个不重复的日期，此输出都是“FALSE”。因此，如果 closePricesClean 有 500 个观察值，则 duplicateTest 将返回一个包含 500 个“TRUE”或“FALSE”值的列表。相反，如果整个向量是“FALSE”，我想要返回一个“FALSE”值，或者如果列表包含一个“TRUE”值，则返回一个“FALSE”值。

我需要构造一个 if 语句吗？还是有我不知道的功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T20:49:33.080

使用`anyDuplicated`并检查其结果是否为零。这将比`any`在结果上使用更快，`duplicated`因为它会在`TRUE`遇到第一个时立即停止。

```
duplicateTest <- anyDuplicated(index(closePricesClean)) != 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T20:49:17.543

`any`就是你要找的。来自帮助：给定一组逻辑向量，至少有一个值是真的吗？

```
any(duplicateTest) 
```

# django - 我可以将我的自定义模板标签文件夹移到我的应用程序之外吗？

> ID：12222268
> 
> 赞同：3
> 
> 时间：2012-08-31T20:46:20.137
> 
> 标签：django, django-template-filters

Django的新手。在 Django[文档](https://docs.djangoproject.com/en/2.1/howto/custom-template-tags/)中，我知道它说“自定义模板标签和过滤器必须存在于 Django 应用程序中。”。我将有 4 或 5 个应用程序，每个应用程序都有自定义模板标签（其中一些将与其他应用程序中的标签相同）。即使它这么说，是否可以在我的项目的根目录下为我的所有模板标签创建一个主文件夹？似乎每个应用程序都有单独的文件夹违反了 DRY ......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T23:55:17.197

好吧，没有理由有重复的标签；任何应用程序中的模板标签库都可以从任何模板加载。您应该只拥有任何标签的一份副本。

也就是说，通常做的是创建一个模板标签APP来容纳所有模板标签。

只需构建一个名为标签、实用程序等的空白应用程序，然后将所有模板标签放入该应用程序中。

```
root/utils/templatetags 
```

它甚至不需要 model.py/urls.py 就可以在 installed_apps 中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:19:05.837

您可以制作一个应用程序，其唯一目的是处理一些通用的事情，如模板标签或实用程序。有时我这样做并称之为“应用程序”。

但即使你保持原样，也没有理由复制模板标签，因为它们在所有模板中都可用。除非您打算将应用程序分解并在不同的项目中使用它们，否则只需将模板标签放在适当的应用程序中，然后从模板中加载它。

# keyboard - 如何编写一个简单的程序以在按下 CAPS LOCK 时显示通知？

> ID：12222272
> 
> 赞同：0
> 
> 时间：2012-08-31T20:46:47.030
> 
> 标签：keyboard, notifications, popup, keystroke, keylogger

如果这是一个愚蠢的问题，请原谅我，但我是一个新手程序员，我希望有一个新手解决方案。

是否有任何编程语言可以让我快速编写一个简单的程序来在按下 CAPS LOCK 时在 Windows 7 上显示通知？

我的笔记本电脑没有指示灯，我的电脑上也没有程序可以这样做，尽管我愿意接受建议。我发现的唯一部分解决方案是通过 Windows 中的辅助功能设置，每次按键时都会发出可怕的哔哔声。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:53:31.117

尝试[自动热键](http://www.autohotkey.com/)。这是一个很棒的程序。它在后台运行脚本，可以直接操作您的键盘输入。

我更改了 capslock 以要求 ctrl+capslock 工作，否则按 capslock 本身没有任何作用:)

你也可以做很多其他的事情。您可以在按下大写锁定时设置自定义音调（但是简单的弹出窗口或键重新映射可能是最好的）。

这是该站点的一个示例：“Capslock::Ctrl 使 Capslock 成为 Control 键。要保留打开和关闭 Capslock 的能力，还要添加重新映射 +Capslock::Capslock （当您按住时，这会打开和关闭 Capslock Shift 键并按 Capslock）。”

# google-app-engine - 重复属性索引如何在使用 ndb 的数据存储中工作

> ID：12222278
> 
> 赞同：3
> 
> 时间：2012-08-31T20:47:04.627
> 
> 标签：google-app-engine, google-cloud-datastore

重复/列表属性的索引如何工作，我在某处读到添加到列表只会添加一个索引，不会算作修改索引。这仍然正确吗？

从列表中删除是否相同，删除列表中的值是否会删除该单个索引并计为 2 次写入？

如果我的理解是正确的，那么这个

```
class MyModel(ndb.Model):
    my_list = ndb.IntegerProperty(repeated=True)

e = ndb.Key(MyModel, 100).get()
e.my_list.append(50)
e.put()
e.my_list.append(25)
e.put()
e.my_list.remove(50)
e.put() 
```

更新是，1 次写入 + 2 次索引写入，然后是另一个，1 次写入 + 2 次索引写入，然后是 1 次写入 + 2 次索引写入以进行删除。

那是对的吗？

我的最后一个问题是每个实体的 5000 个索引限制仍然存在吗？因为我尝试运行 10k localhost 它似乎工作。

额外的：

```
e.my_list.insert(10)
e.put() 
```

这只是添加另一个索引吗？还是索引在其中保存列表索引，从而调整整个列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:00:39.393

我想出了这个

```
appstats_CALC_RPC_COSTS = True 
```

在 appstat 中启用计费计算器，从来不知道这一点。答案与添加相同，它只执行 1 写入 + 2 索引写入添加或从列表中删除，无论它在哪里。

在列表中也有重复值并删除一个只会导致 1 次写入，这意味着它只存储单个索引以进行重复。它也不关心列表中的顺序，重新排序只会导致实体放置。

# php - 上传图片到数据库的方法

> ID：12222283
> 
> 赞同：0
> 
> 时间：2012-08-31T20:47:43.923
> 
> 标签：php, mysql

我正在创建一个数据库，它基本上可以处理音乐专辑插图及其不同大小。专辑插图由缩略图、主封面图像、缩放图像和其他类型的图像组成。大小比例方面因专辑格式而异。因此，CD 专辑的缩略图可能是 50 像素 x 50 像素，但对于 CASSETTE，它可能是 35 像素 x 50 像素...

IE：

*   CD 将包含 3 种或更多尺寸（拇指、主要、缩放等）的封面插图（类型）

*   CD 还将包含 3 种或更多尺寸（拇指、主要、缩放等）的镶嵌 cd 图稿（类型）

在网上搜索，似乎有不同的方法可以实现这一点。

方法一：

*   有一个带有输入字段的表单来输入数据
*   有一个上传输入字段来上传图像（高质量的图像......我们称之为 imageX），它将用于创建不同的尺寸。
*   验证 imageX 是否可接受（大小、类型等...）
*   现场创建不同的尺寸，并在数据库中为创建的每个尺寸添加一条记录。每条记录都包含大小（宽度和高度）和文件名

数据库模型：

```
artworktype 
========== 
artworktype_id, artworktype

artworksize 
========== 
artworksize_id, artworksize 

artwork 
========== 
artwork_id, album_id, artworktype_id, artworksize_id, filename, filenamewidth, filenameheight 
```

优点：

包括宽度和高度（无需启动 PHP 的 imagegetsize 来获取大小）

缺点：

冗余数据？

方法二：

*   有一个带有输入字段的表单来输入数据
*   有一个上传输入字段来上传图像（高质量的图像......我们称之为 imageX），它将用于创建不同的尺寸。
*   验证 imageX 是否可接受（大小、类型等...）
*   在现场创建不同的大小并相应地将它们移动到文件系统（命名约定待定）
*   仅为上传的文件在数据库中创建一条记录。
*   让 PHP 确定大小并使用命名约定来获取其他大小

数据库模型：

```
artworktype 
========== 
artworktype_id, artworktype

artwork 
========== 
artwork_id, album_id, artworktype_id, filename 
```

优点：

无冗余

缺点：

需要 PHP 的 getimagesize 函数来获取大小。对于图像，这是可以接受的。但是，对于许多图像（如一批缩略图），这可能会给服务器带来压力。

有没有标准可以实现这一目标？其他人是如何做到的？有什么意见吗？

**编辑**：我不喜欢数据库中的二进制数据......所以这个选项是不可能的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:53:26.030

`blob`为此使用 a 。我在类似的应用程序中做过。查看我的代码：

### PHP代码：

```
$fp = fopen($_FILES['image']['tmp_name'], 'r');
$data = fread($fp, filesize($_FILES['image']['tmp_name']));
$data = addslashes($data);
$type = $_FILES['image']['type'];
fclose($fp);
if(mysql_query("UPDATE `entries` SET `phblob` = '$data', `phtype` = '$type' WHERE `id` = '" . $_GET['id'] . "'"))
    $uploaded = true; 
```

### 数据库转储将是：

```
+--------+---------------+------+-----+---------+----------------+
| Field  | Type          | Null | Key | Default | Extra          |
+--------+---------------+------+-----+---------+----------------+
| id     | int(11)       | NO   | PRI | NULL    | auto_increment |
| name   | varchar(255)  | NO   |     | NULL    |                |
| phblob | longblob      | YES  |     | NULL    |                |
| phtype | varchar(64)   | YES  |     | NULL    |                |
+--------+---------------+------+-----+---------+----------------+ 
```

### HTML 代码：

```
<form method="post" enctype="multipart/form-data">
    <input name="image" accept="image/jpeg, image/png, image/gif" type="file">
    <input value="Submit" type="submit">
</form> 
```

# c++ - std::map 的结尾被移动

> ID：12222288
> 
> 赞同：-1
> 
> 时间：2012-08-31T20:48:24.533
> 
> 标签：c++, visual-studio-2010, map, iterator

> **可能重复：**
> [发现元素何时插入到 std::map](https://stackoverflow.com/questions/12221648/discover-when-the-element-is-inserted-to-the-stdmap)

我跟踪在地图中插入 137 个元素当我使用 VS2010 调试器检查地图的大小时，我确实得到了 137。使用 printf 我打印地图的所有元素

```
(it = map.begin();it !=map.end();++it) {
   printf ("%x",it->second);
} 
```

结果打印了 137 个值。之后我的程序继续执行。在执行结束时，我需要处理地图的值。

我再次使用调试器检查它有 137 个元素，但是当我像以前一样打印所有元素时，我打印了 138 个值，而最后一个是无效值。

我需要了解它是如何/何时发生的，以及是什么导致`map.end()`了转移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:03:52.840

没有代码很难说。我们可以猜测。我建议您重写添加到地图的运算符，并在每次添加后检查地图的大小。当大小大于 137 时，会导致您的程序使用 GPF（或调用将导致调试器中断的函数。）在调试器中运行您的程序，然后宾果游戏，堆栈跟踪会告诉您问题出在哪里。

# python - 在朴素贝叶斯（Python、scikit）中使用稀疏矩阵/在线学习

> ID：12222290
> 
> 赞同：8
> 
> 时间：2012-08-31T20:49:08.597
> 
> 标签：python, scipy, scikit-learn, sparse-matrix

我正在尝试对具有超过 6,000,000 个条目且每个条目具有 150k 个特征的数据集进行朴素贝叶斯。我尝试从以下链接实现代码： [在 NLTK 中实现词袋朴素贝叶斯分类器](https://stackoverflow.com/questions/10098533/implementing-bag-of-words-naive-bayes-classifier-in-nltk)

问题是（据我了解），当我尝试使用 dok_matrix 作为参数运行训练方法时，它找不到 iterkeys（我已将行与 OrderedDict 作为标签配对）：

```
Traceback (most recent call last):
  File "skitest.py", line 96, in <module>
    classif.train(add_label(matr, labels))
  File "/usr/lib/pymodules/python2.6/nltk/classify/scikitlearn.py", line 92, in train
    for f in fs.iterkeys():
  File "/usr/lib/python2.6/dist-packages/scipy/sparse/csr.py", line 88, in __getattr__
    return _cs_matrix.__getattr__(self, attr)
  File "/usr/lib/python2.6/dist-packages/scipy/sparse/base.py", line 429, in __getattr__
    raise AttributeError, attr + " not found"
AttributeError: iterkeys not found 
```

我的问题是，有没有办法通过逐项（在线）教授分类器条目来避免使用稀疏矩阵，或者在这种情况下我可以有效地使用稀疏矩阵格式而不是 dok_matrix？还是我错过了一些明显的东西？

感谢任何人的时间。:)

编辑，9 月 6 日：

找到了iterkeys，所以至少代码运行。它仍然太慢，因为它花了几个小时处理一个 32k 大小的数据集，但仍未完成。这是我目前得到的：

```
matr = dok_matrix((6000000, 150000), dtype=float32)
labels = OrderedDict()

#collect the data into the matrix

pipeline = Pipeline([('nb', MultinomialNB())])
classif = SklearnClassifier(pipeline)

add_label = lambda lst, lab: [(lst.getrow(x).todok(), lab[x])
                              for x in xrange(lentweets-foldsize)] 

classif.train(add_label(matr[:(lentweets-foldsize),0], labels))
readrow = [matr.getrow(x + foldsize).todok() for x in xrange(lentweets-foldsize)]
data = np.array(classif.batch_classify(readrow)) 
```

问题可能是所采用的每一行都没有利用向量的稀疏性，而是遍历了 150k 条目中的每一个。作为该问题的延续，有谁知道如何将这个朴素贝叶斯与稀疏矩阵一起使用，或者有没有其他方法可以优化上述代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-09T17:30:20.967

查看 scikit-learn 中的[文档分类示例](https://scikit-learn.org/stable/auto_examples/text/plot_document_classification_20newsgroups.html#sphx-glr-auto-examples-text-plot-document-classification-20newsgroups-py)。诀窍是让库为您处理特征提取。跳过 NLTK 包装器，因为它不适用于如此大的数据集。(*)

如果您有文本文件中的文档，那么您只需将这些文本文件交给`TfidfVectorizer`，它会从中创建一个稀疏矩阵：

```
from sklearn.feature_extraction.text import TfidfVectorizer
vect = TfidfVectorizer(input='filename')
X = vect.fit_transform(list_of_filenames) 
```

您现在有一个`X`CSR 稀疏矩阵格式的训练集，如果您还有一个标签列表`y`（如果您在其中对类进行编码，可能从文件名派生），您可以将其提供给朴素贝叶斯分类器：

```
from sklearn.naive_bayes import MultinomialNB
nb = MultinomialNB()
nb.fit(X, y) 
```

如果事实证明这不起作用，因为文档集太大（不太可能因为`TfidfVectorizer`仅针对这个数量的文档进行了优化），请查看[核心文档分类](http://scikit-learn.org/stable/auto_examples/applications/plot_out_of_core_classification.html)示例，该示例`HashingVectorizer`演示`partial_fit`了小批量学习。您需要 scikit-learn 0.14 才能正常工作。

(*) 我知道，因为我写了那个包装器。与 NLTK 的其余部分一样，它用于教育目的。我还致力于 scikit-learn 的性能改进，我宣传的一些代码是我自己的。

# java - 休眠删除关系manyToMany

> ID：12222291
> 
> 赞同：0
> 
> 时间：2012-08-31T20:49:11.677
> 
> 标签：java, spring, hibernate, jakarta-ee

我有 3 个表角色、用户和用户角色。表 UserRole 包含用户和角色之间的映射以及两个对应的索引列。我正在使用带有注释的休眠，并且希望能够“撤销”用户的角色，但这变得有些困难。

在我的用户类中，我有

```
@ManyToMany(fetch=FetchType.LAZY, cascade = {CascadeType.MERGE, CascadeType.PERSIST}, targetEntity = Role.class)
    @IndexColumn(name = "role_index", base = 0)
    @NotFound(action=NotFoundAction.IGNORE)
    @JoinTable(name = "tblUser_Role", joinColumns={
    @JoinColumn(name = "UID")}, inverseJoinColumns={
    @JoinColumn(name = "roleid", nullable = false)})
    private List<Role> roles = new ArrayList<Role>(0); 
```

在我的角色课上，我有

```
@ManyToMany(fetch=FetchType.LAZY, cascade = {CascadeType.MERGE, CascadeType.PERSIST}, mappedBy="roles")
    private List<User> users = new ArrayList<User>(0); 
```

和我调用“撤销”角色的 DAO 方法是

```
@Override
    public boolean revokeRolesFromUserAccount(User user, List<Role> userRoles) {
        if (log.isInfoEnabled()) {
            log.info("Roles revoked from the User " + user.getUsername());
        }
        if (user == null) {
            return false;
        }
        if (userRoles == null) {
            return false;
        }

        Iterator<Role> iter = userRoles.iterator();
        List<Role> newroles = new ArrayList<Role>(0);
        Role role = null;
        while (iter.hasNext()) {
            role = (Role) this.sessionFactory.getCurrentSession().load(
                    Role.class, iter.next().getRoleid());
            newroles.add(role);
        }

        User newUser = null;
        newUser = (User) this.sessionFactory.getCurrentSession().load(User.class, user.getUid());
        newUser.getRoles().removeAll(newroles);
        this.sessionFactory.getCurrentSession().saveOrUpdate(newUser);
        return true;

    } 
```

出于某种原因，这不能按预期工作，当突破时我注意到角色没有被初始化我猜是由于 LazyLoading，我尝试做类似的事情，`Hibernate.initialize(newUser.getRoles())`但这并没有改变任何东西。我仍在学习休眠的绳索，不确定我错过了什么，也许是非常明显的东西？非常感谢您提前抽出时间和想法！

更新：在尝试了 Paujo 和 Matin Kh 建议的修复程序并进行进一步调试后，我仍然没有看到在后行加载的角色有任何差异`newUser = (User) this.sessionFactory.getCurrentSession().load(User.class, user.getUid());`

这是我的 tblUser_Role 的副本，不确定这是否有帮助。再次感谢！

**（添加角色就可以了）**

![在此处输入图像描述](../Images/e4bb8e9f40546efb5bef5f40d2bfc9cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:59:46.183

我这里有确切的情况。您的问题有一个非常简单的解决方案。

对于您的一个类使用`EAGER`，而对于另一个类使用`LAZY`。试试这个：

角色：

```
@ManyToMany(fetch=FetchType.EAGER, cascade = {CascadeType.MERGE, CascadeType.PERSIST}, mappedBy="roles")
private List<User> users = new ArrayList<User>(0); 
```

用户：

```
@ManyToMany(fetch=FetchType.LAZY, cascade = {CascadeType.MERGE, CascadeType.PERSIST}, targetEntity = Role.class)
@IndexColumn(name = "role_index", base = 0)
@NotFound(action=NotFoundAction.IGNORE)
@JoinTable(name = "tblUser_Role", joinColumns={
@JoinColumn(name = "UID")}, inverseJoinColumns={
@JoinColumn(name = "roleid", nullable = false)})
private List<Role> roles = new ArrayList<Role>(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:35:00.130

我认为你的方法应该不同。

UserRole 应该有一个角色名称。

您的用户应该有一个 UserRole 项目列表或只有一个 UserRole 但具有 UserRole 层次结构。但是因为你有一个可以的列表。

所以基本上你在 User 中有对 UserRole 的引用，所以不需要在 UserRole 中有对 User 的引用。

这样，您的表格就变得非常简单，您不需要任何连接即可，然后您只需按名称选择 UserRole。

之后，您应该能够从 User 中的 UserRole 列表中删除引用并合并用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:46:15.623

最终得到了这个工作，主要是靠运气，这就是我在 RoleDaoImpl 课程中得到的结果。

```
@Override
    @Transactional
    public boolean revokeRolesFromUserAccount(User user, List<Role> userRoles) {        
        if (user == null) {
            return false;
        }
        if (userRoles == null) {
            return false;
        }   

        User newUser = null;
        newUser = (User) this.sessionFactory.getCurrentSession().load(User.class, user.getUid());   

        List<Role> newRoleList = newUser.getRoles();

        newRoleList.removeAll(userRoles);

        if(newUser.getRoles().retainAll(newRoleList)){
            if (log.isInfoEnabled()) {
                log.info("Roles revoked from the User " + user.getUsername());
            }
            this.sessionFactory.getCurrentSession().saveOrUpdate(newUser);          
            return true;
        }else{
            return false;
    } 
```

希望这对将来的其他人有用！

再次感谢大家的帮助！

# iphone - 禁用 ARC...（AdMob SDK）

> ID：12222298
> 
> 赞同：2
> 
> 时间：2012-08-31T20:49:43.393
> 
> 标签：iphone, objective-c, xcode, automatic-ref-counting, admob

我已经添加了运行 Admob SDK 所需的所有文件和框架，但问题是 ARC...

我的项目使用 ARC，但 AdMob 文件不使用 ARC。我知道您可以通过项目菜单下的*“编译源”*部分禁用特定文件的 ARC -> 目标（应用程序名称）-> 构建阶段

问题是 AdMob 文件没有显示在 Compile Sources 部分或任何其他部分中。您可以在 Project Navigator 中看到我的 AdMob 文件夹...

**为什么这些文件不显示以便我可以禁用它们的 ARC？**

![Xcode AdMob](../Images/6c8fed2ffc41d1d85af8daef30b6d5aa.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:53:58.090

看起来您不是在编译 Admob .m 文件，而是您在项目中包含的一个库，而您只是将 .h 文件用于接口。因此，您可能根本不需要担心 ARC v 非 ARC 问题。您可以经常在 ARC 项目中使用非 ARC 库。主要问题是库是否符合[过渡到 ARC](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)中概述的规则，例如标准命名约定，其中返回带有 +1 的对象的唯一方法以、、和`retainCount`开头。`alloc``new``copy``mutableCopy`

`-fno-objc-arc`仅当您在项目中编译库的源代码时才需要该选项。

# android - android模拟器SD卡“你的SD卡已满”

> ID：12222299
> 
> 赞同：4
> 
> 时间：2012-08-31T20:49:49.187
> 
> 标签：android, emulation, android-sdcard

我编辑了一个现有的模拟器来拥有一个 9mb 大小的 sd 卡，并在硬件部分添加了一个布尔值来支持 sd 卡。当我启动应用程序时，它说“你的 SD 卡已满”，怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T20:52:51.150

首先，尝试使 SD 卡更大——比如 100 MB——然后重新启动模拟器。硬件部分中的布尔值 IIRC 触发应用程序 APK 的首选位置 - 内部存储器或 SD 卡。9MB 的 APK 并不少见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T21:11:06.760

问题是您的 SD 卡**尺寸**被声明为**太小**。当全世界都在用 GB 说话时，请考虑拥有 9MB SD 卡的用户的实用性。

编辑模拟器并增加大小，至少一百个，具体取决于您的应用程序，您可能需要大量空间。

但是，请参阅这篇关于SD 卡大小的[已知问题的帖子。](http://code.google.com/p/android/issues/detail?id=7038)

# java - 如何在 Java 中模拟可以在运行时扩展的枚举？

> ID：12222303
> 
> 赞同：2
> 
> 时间：2012-08-31T20:50:39.290
> 
> 标签：java, class, enums

我正在编写一个程序来模拟一个名为《文明 4》的游戏中的城市。为了做到这一点，我有几个枚举来表示所述城市拥有的每个地块的地形、资源、改进等类型。

问题是我想编程以与粉丝制作的模组兼容，这可能会向游戏中添加需要被我的独立实用程序接受的东西。所以我想创建一个 Enum*样式*类来保存由加载的 mods 定义的新类型（因为 Enums 不能在运行时更改），这是在运行时创建的，当用户输入要加载的 mod（这是一个 txt 文件）被解析以读取新添加的内容）

那么有没有办法模拟**在运行时**创建和添加的枚举？我认为静态成员变量不能使用，因为它们是在运行时之前完成的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:57:18.257

您可以`enum`实现一个接口。

这样你就可以在枚举中定义你的值，但新值可以是任何实现接口的类。

* * *

另一种方法是`enum`在运行时使用字节码生成器或编译器 API 生成或加载。我编写了一个库，以便更轻松地获取字符串并编译和加载它。

[http://vanillajava.blogspot.co.uk/2010_11_01_archive.html](http://vanillajava.blogspot.co.uk/2010_11_01_archive.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:54:19.083

嗯，Java 中的枚举只是简单的类，语言保证已知对象的集合在编译时是已知的并受到限制。如果你想在运行时添加新的枚举文字，你最终会得到常规类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T21:18:42.137

枚举的美妙之处在于，您可以在代码中编写人类可读的名称，这些名称在后台编译为数字，因为计算机更喜欢数字。以这个枚举为例：

```
enum Season { WINTER, SPRING, SUMMER, AUTUMN } 
```

在幕后 WINTER 可能是 0（零），SPRING 是 1 等等。要在运行时代码中复制此行为，您可以创建一个字符串列表，如下所示：

```
List<String> seasons;
seasons = new ArrayList<String>();
seasons.add("Winter");
seasons.add("Spring");
... 
```

这样，您可以将项目引用为数字，例如 seasons[1] 将等于“Spring”。这个答案只是解决这个问题的众多方法之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T21:24:53.807

默认情况下，`enum`类型只有一组值。类型中的值`enum`实际上声明为`static final`，并且无法在运行时添加更多值。

话虽如此，您还可以使用其他模式来实现您想要的。让我们看一下使用接口和注册系统。我们将从`Terrain`界面开始：

```
public interface Terrain {
    int getId();
    String getName();
    int getSightBonus();
} 
```

现在一个`enum`, `DefaultTerrain`:

```
public enum DefaultTerrain implements Terrain {
    PLAINS(0, "Plains", 1),
    HILLS(1, "Hills", -1),
    MOUNTAINS(2, "Mountains", -2);

    private int id;
    private String name;
    private int sightBonus;

    private DefaultTerrain(int id, String name, int sightBonus) {
        this.id = id;
        this.name = name;
        this.sightBonus = sightBonus;
    }

    public int getId() {return id;}

    public String getName() {return name;}

    public int getSightBonus() {return sightBonus;}
} 
```

还有一个注册类，可以是静态实用程序类或单例。

```
public class TerrainManager {
    private static Map<Integer, Terrain> terrainsById = new HashMap<>();

    static {
        for (DefaultTerrain terrain : DefaultTerrain.values())
            register(terrain);
    }

    public static void register(Terrain terrain) {
        Integer id = terrain.getId();
        if (terrainsById.contains(terrain.getId()))
            throw new IllegalArgumentException("Terrain with id already exists: " + id);
        terrainsById.put(id, terrain);
    }

    public static Terrain getTerrainById(int id) {
        return terrainsById.get(id);
    }

    public static Set<Terrain> getAllTerrains() {
        return new HashSet<Terrain>(terrainsById.values());
    }
} 
```

最后一堂课是魔法发生的地方。大概模组制作者会在游戏的世界定义中使用某种标识符来表示“使用此图块”，对吧？在这种情况下，我称它为整数，`id`但实际上它可以是任何类型，只需相应地修改`Map`。在地图加载代码中，只需使用世界定义中的 ID 即可查找`Terrain`. 当修改者添加一个新的`Terrain`时，他们只需要实现`Terrain`并注册它`TerrainManager`。

`static`初始化程序确保在添加任何其他内容之前添加您的对象`DefaultTerrain`。如果您使用单例，则可以将其放入类构造函数中。

将此模式用于您`enum`希望用户添加的不同类型。您也可以将它用于几乎任何其他类型，除了`enum`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:53:19.273

您将需要 CGLIB，[http://cglib.sourceforge.net/](http://cglib.sourceforge.net/)

# php - 致命错误：无法在第 194 行的 /var/www/phpseclib/Net/SSH2.php 中重新声明类 Net_SSH2

> ID：12222305
> 
> 赞同：1
> 
> 时间：2012-08-31T20:50:43.097
> 
> 标签：php, codeigniter, phpseclib

我创建了一个 CI 模型，它根据传入的参数动态加载某些类。这些类只是 phpseclib 周围的包装类，用于与不同设备建立 ssh 连接。我注意到的是，当我尝试执行一种特定方法时，我收到了上述错误消息。

这是一些示例代码，可帮助您了解我在做什么。这是我的模型的样子：

```
 public function get_portstatusall($ip, $switchname)
    {           
        $classname = $this->switchToClassName($switchname);
        try{
        include_once(APPPATH.'libraries/'.$classname.'.php');                 
        $switch_obj = new $classname($ip, 'password', '');
        $switch_obj->connect();
        $data = $switch_obj->dosomething(); 
        $switch_obj->disconnect();  
        return $data;
        }
         catch (Exception $e) {
            echo 'this really should be logged...';
            return false;
         }
    }   

            public function get_portstatusindividual($ip, $switchname)
            {           
                 $classname = $this->switchToClassName($switchname);
                 try{

                     include_once(APPPATH.'libraries/'.$classname.'.php'); 
         $switch_obj = new $classname($ip, 'password', '');
         $switch_obj->connect();
         $data = $switch_obj->dosomethingelse();    
         $switch_obj->disconnect();  
         return $data;
         }
         catch (Exception $e) {
            echo 'this really should be logged...';
            return false;
         }
               } 
```

如您所见，我正在根据传入的开关名称动态确定要加载的类。这段代码成功地加载了一个名为“device123.php”的类，假设。依次类 device123 实例化 phpseclib 附带的 SSH2 对象，并使用它向设备发送 ssh 命令。

这是来自设备 123 的一段代码：

```
class device123
{
// sample code to demo how to use phpseclib to create an interactive ssh session.
//this library relies on phpseclib.  you must include this class and SSH2.php from Net/phpseclib.

private $_hostname;
private $_password;
private $_username;
private $_connection;
private $_data;
private $_timeout;
private $_prompt;

public function __construct($hostname, $password, $username = "", $timeout = 10) 
//public function __construct($params) 
{
    echo 'in the switch constructor<br>';
    set_include_path(get_include_path() . PATH_SEPARATOR . '/var/www/phpseclib');
    include('Net/SSH2.php');

   $this->_hostname = $hostname;
    $this->_password = $password;
    $this->_username = $username;

} // __construct

public function connect() 
{
    $ssh = new Net_SSH2($this->_hostname); 
    if (!$ssh->login($this->_username, $this->_password)) { //if you can't log on...
    die("Error: Authentication Failed for $this->_hostname\n");
    }
    else  {

    $output= $ssh->write("\n"); //press any key to continue prompt;
    $prompt=$ssh->read('/([0-9A-Z\-])*(#)(\s*)/i', NET_SSH2_READ_REGEX); 
    if (!$prompt) {
        die("Error: Problem connecting for $this->_hostname\n");
    }  
    else {

        $this->_connection = $ssh;
    }

    }
} // connect

public function close() 
{
    $this->_send('exit');
} // close

public function disconnect()
{
  $this->_connection->disconnect();
  $ssh=NULL;
} 
```

我认为我不太了解如何重新声明 SSH2 类......但我想看看我是否没有正确地破坏/清理自己。为了帮助排除故障，我尝试在 SSH2 类以及名为 device123 的包装类的构造函数和析构函数中添加调试回显语句。一切看起来都很合适...

我不认为我在正确的轨道上......你能告诉我你认为我应该从哪里开始寻找吗？是不是因为有可能这两种方法都被调用......一个接一个......并且两者都可能加载同一个类？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:33:14.013

所有 php 类都必须具有唯一的名称。您应该将`include`所有文件放在一个地方，如果您想要延迟加载，请跟踪所有加载的类，或者只使用[http://cz.php.net/include_once](http://cz.php.net/include_once)。函数也是如此`require`。

后缀完全符合您的`_once`需要：如果文件已经加载，它会阻止文件加载，从而防止类重新声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:37:24.267

当您尝试多次加载类时，Php 会出现此类错误，就像其他源文件中存在同名类一样。

# jquery - 通过 Jquery 将 AJAX 消息返回到模式窗口

> ID：12222306
> 
> 赞同：0
> 
> 时间：2012-08-31T20:50:44.610
> 
> 标签：jquery, forms, modal-dialog

这是一个不错的小 ajax 上传片段，它将在成功上传或文件太大时通过 ajax 返回消息……诸如此类。在 upload.php Iis 中，我有包含返回到表单页面的消息的 div。我想知道如何修改它，以便将 div/消息返回到模式窗口，而不是仅仅返回到页面本身......希望有人可以帮助我。我需要在某处使用 jquery ui 吗？多谢你们！

```
 $j(document).ready(function(){
var upload = new AjaxUpload('#userfile', {
        //upload script 
        action: '/modules/mod_artuploader/upload.php',
        onSubmit : function(file, extension){
        //show loading animation
        //$j("#loading").show();
        //check file extension
        if (! (extension && /^(jpg|png|jpeg|gif)$/.test(extension))){
       // extension is not allowed
             $j("#loading").hide();
             $j("<span class='error'>Error: Not a valid file extension</span>").appendTo("#file_holder #errormes");
            // cancel upload
       return false;
            } else {
              // get rid of error
            $j('.error').hide();
            }   
            //send the data
            upload.setData({'file': file, 'userid': <?php echo $user->id?> });
        },
        onComplete : function(file, response){
        //hide the loading animation
        $j("#loading").hide();
        $j("#userfile").hide();
        $j('label[for="userfile"]').hide();
        //add display:block to success message holder
        $j(".success").css("display", "block");
        $j(".picture").css("display", "block");
        //This lower portion gets the error message from upload.php file and appends it to our specifed error message block
        //find the div in the iFrame and append to error message    
        var oBody = $j(".iframe").contents().find("div");
        //add the iFrame to the errormes td
        $j(oBody).appendTo("#file_holder #errormes");

}
    });
}); 
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:48:00.397

这实际上取决于您用于模态的内容。如果您正在谈论一个单独的浏览器窗口，浮动未停靠或在新选项卡中，这是一个非常复杂的问题要解决。既然你提出来了，jQuery UI 对话框就是一个很好的选择。看一下[模态表单](http://jqueryui.com/demos/dialog/#modal-form)示例。用户可以单击“上传”按钮，使用文件选择器激活模式弹出窗口。`$(foo).dialog('open')`您可以使用和切换对话框的显示`$(foo).dialog('close')`。然后上传脚本可以只存在于对话框中并与其中的元素进行交互。至少，我认为您的回调将能够使用 appendTo 调用对话框。您最终可能要做的是打开一个对话框进行上传，等待响应，然后关闭它并打开另一个显示结果的对话框。

# javascript - 无容器控制流语法 - 模板无法使用 IE8 正确呈现

> ID：12222311
> 
> 赞同：2
> 
> 时间：2012-08-31T20:51:21.730
> 
> 标签：javascript, knockout.js, internet-explorer-8

使用无容器语法并调用 Knockoutjs 模板时，IE8 无法在 foreach 控制流中正确呈现模板。初始化工作正常，但如果`items`更改，则渲染错误。这只发生在 IE8 上，9 可以，甚至 7 也可以。

**模型**

```
function BrowseModel() {
    var self = this;
    self.items = ko.observableArray();
    self.itemsStep = ko.observable(1);
    self.repopulate = function() {
        self.itemsStep(self.itemsStep() + 3);
        return false;
    };
    ko.computed(function() {
        var arr = [];
        for (var i = self.itemsStep(); i <= self.itemsStep() + 5; i++) {
            arr.push(i);
        }
        self.items(arr);
    }, self);
}

ko.applyBindings(new BrowseModel()); 
```

**看法**

```
<a href="javascript:;" data-bind="click: repopulate">Change items</a>
<ul>
    <!-- ko foreach: items -->                                                 
        <!-- ko template: { name: 'product_template'} -->
        <!-- /ko -->  
   <!-- /ko -->
</ul>

<ul>
    <li data-bind="template: { foreach: items, name: 'product_template' }"></li>
</ul>

<br />
<div data-bind="text: ko.toJSON($data)"></div>

<script type="text/html" id="product_template">
    <li data-bind="text: $data"></li>
</script> 
```

我没有发现 IE 8 的行为模式。渲染是随机的。

除了不使用无容器控制流语法之外，我该如何解决这个问题？

[小提琴](http://jsfiddle.net/E7CK9/36/)

*LE：如果这很重要，我正在使用 F12 开发人员工具*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T21:12:41.660

[修复了 jsFiddle](http://jsfiddle.net/E7CK9/37/)

我已经`&nbsp;`在内部绑定中添加了一个，它似乎已经解决了这个问题。似乎 IE8 中的淘汰赛不喜欢没有内容的嵌套无容器控件绑定。

请注意，根据我的经验，**无容器控件绑定往往会在 IE6-IE8 中表现出不稳定的行为**。如果您打算支持这些浏览器，我建议您避免使用无容器控件绑定。几乎所有涉及无容器控件绑定的场景都可以重写为带有数据绑定表达式的 HTML 元素的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T18:48:39.997

我对 IE8 中的这种结构很幸运。当我试图像您在原始帖子中显示的那样将无容器的东西分开时，IE8 抱怨道。通过使用下面显示的语法，它可以正常工作。

```
<table id="mam-listing-table" border="0" width="100%" cellpadding="2" cellspacing="0">
    <thead>
        <tr valign="top">
            <th class="ms-vh" nowrap="">Team</th>
            <th class="ms-vh" nowrap="" colspan="99">Note Count</th>
        </tr>
        <tr valign="top">
            <th class="ms-vh" nowrap=""></th>

            <!-- ko foreach: Months -->
                <th class="ms-vh" nowrap="" data-bind="text: $data "></th>
            <!-- /ko -->

            <th class="ms-vh" nowrap="" data-bind="text: 'TOTAL as of ' + moment().format('MM/DD/YY')"></th>
        </tr>
    </thead>

    <tbody>

        <!-- ko template: { name: 'Site', foreach: Sites} -->
        <!-- /ko -->  
        <!-- ko template: { name: 'Total'} -->
        <!-- /ko -->  

    </tbody>

</table> 
```

# java - 在linux中运行时出现NoClassDefFoundError

> ID：12222315
> 
> 赞同：1
> 
> 时间：2012-08-31T20:51:39.803
> 
> 标签：java, classpath

我正在尝试在 linux 中运行一个简单的 java 程序，但得到一个`NoClassDeffoundError`.

基本上，我有以下文件夹结构：

```
lib/myRef.jar
src/MyTest.java //there are classes that being referenced in myRef.jar 
```

我这样编译：

```
javac -cp ../lib/myRef.jar MyTest.java //The class file is being gerenated in the same directory 
```

然后当我尝试运行时：

```
java -classpath . myRef 
```

我得到了`NoClassDefFoundError`我在 jar 文件中引用的类。

我是否需要同时引用*lib*和我正在运行的当前类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:52:45.013

是的，使用 java 运行代码时，您还需要在类路径中包含*myRef.jar*。此外，您似乎将错误的类名传递给 java，如果您想将您的类`MyTest`作为主类运行，请使用：

```
java -classpath ../lib/myRef.jar:. MyTest 
```

仅针对您使用的支持类进行*编译是不够的，当您**运行*程序时，它们还需要位于类路径中。

# java - 无法从 Transaction 类迭代 ItemList

> ID：12222318
> 
> 赞同：0
> 
> 时间：2012-08-31T20:51:47.093
> 
> 标签：java

这是我的`Item`课：

```
public class Item {

 private String id;
 private int count;
 private String  name;

public int getcount() {
   return this.count;
}

public Item(String name) {
     this.name=name;
     this.id = "";

 }

public Item(String id, String name) {
   this.name=name;
   this.id=id;
 }

public Item(int count) {
    this.count=count;
}

public String getItemName() {
    return this.name;
}

public String getItemId() {
    return this.id;
}

public Item returnItems(ItemList itemset) {
    Item item=null;
    return item;
  }
} 
```

这是我的`ItemList`课程，其中将包含以下`List`内容`items`：

```
public  class ItemList implements Iterable<Item>  {

  private List<Item> hold=new ArrayList<Item>();

  ItemList(Item item) {
    this.hold.add(item);
  }

  ItemList() {
    //throw new UnsupportedOperationException("Not yet implemented");
  }

  public List<Item> getItemSet() {
    return this.hold;
  }

  public void addItems(Item item) {
    this.hold.add(item);
  }

  @Override
  public Iterator<Item> iterator() {
    Iterator<Item> item = hold.iterator();
    return item;
  }
} 
```

这是`Transaction`课程：

```
public class Transaction implements Iterable {

 private List<ItemList> trans=new ArrayList<ItemList>();

 public List<Item> getUniqueItems() {

    Database d = new Database();
    List<Item> unique = new ArrayList<Item>();

    String query="Select id,name from item";
    ResultSet rs = d.sendQuery(query);
    try {
        while(rs.next()) {
           // System.out.println(rs.getString(1)+"\t"+rs.getString(2));
            unique.add(new Item(rs.getString(1),rs.getString(2)));
        }
    }
    catch(Exception e){
        System.out.print(e.getMessage());
    }
    return unique;
}

public ItemList getUniqueItem() {
     ResultSet rs;
     Database d=new Database();
     ItemList unique=new ItemList();
      String query="Select id,name from item";
      rs=d.sendQuery(query);
        try{
        while(rs.next())
         {
           //System.out.println(rs.getString(1)+"\t"+rs.getString(2));
           Item item=new Item(rs.getString(1),rs.getString(2));
           unique.addItems(item);
    }

    } catch(Exception e) {
       System.out.print(e.getMessage());
    }

    return unique;
}

public void addTransaction(ItemList itemList) {
     this.trans.add(itemList);
}

public List<ItemList> getTransaction() {
     return this.trans;
}

@Override
public Iterator<ItemList> iterator() {
    Iterator<ItemList> itemList = trans.iterator();
    return itemList;
}

public int countItems(ItemList itemList) {
      ResultSet rs;
      Database d=new Database();
      String query="";
      int count=0;
      for(Item i:itemList)
     {
       System.out.println(i);
       String id=i.getItemId();
        System.out.print(id+"\t");
        query="SELECT count(*) FROM `item_transaction` where item_id="+id;
          rs=d.sendQuery(query);
          try{
           while(rs.next())
          {
              System.out.print(rs.getString(1));
              count=Integer.parseInt(rs.getString(1));
              System.out.print(count+"\t");
          }

          }catch(Exception e){}
   }

      return count;
 }

 } 
```

这是我的`main`课：

```
public class Ap {

public static void main(String args[])
{
   Transaction t=new Transaction();
    Transaction Ci=new Transaction();
   Transaction Li=new Transaction();

    List<Item> list = t.getUniqueItems();
    for(Item i:list)
    {
        ItemList itemList=new ItemList(i);
        Ci.addTransaction(itemList);
    }

} 
```

添加`itemList`到之后`Transaction`，我想迭代`Ci`并传递`itemList`给类中的`countItems`方法`Transaction`。

我试过：

```
for(ItemList list:Ci) {
    int x=t.countItems(list);
} 
```

但我得到：

```
found  java.lang.Object
      Required ItemList 
```

还是我必须`List<ItemList>`从`Transaction`课堂上获取然后迭代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:54:32.427

你需要做

```
 class Transaction implements Iterable<ItemList> 
```

正如您所说，它是普通对象的可迭代对象。

# objective-c - Objective-C中的指针指针

> ID：12222321
> 
> 赞同：0
> 
> 时间：2012-08-31T20:52:25.987
> 
> 标签：objective-c, pointers

在 c++ 中，我会执行以下操作，

```
Object* obj1;
Object* obj2;
Object** targetObj;

void SetTargetToObj1()
{
    targetObj = &obj1;
}
void SetTargetToObj2()
{
    targetObj = &obj2;
}
void ValueChanged()
{
    //So if SetTargetToObj2() was called before ValueChanged() we 
    // would be changing some data on obj2
    (*targetObj)->ChangeSomeData();

    //or, we obj2 is null we could assign a new object to it via targetObj
    (*targetObject) = new Object();
    //now obj2 is pointing to our new object
} 
```

我想知道 obj-c 中是否有办法用 NSObjects 做同样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T22:31:01.903

在 ARC 下，指向指针的指针并不是那么简单。

例如，当您声明一个实例变量时：

```
NSObject *someObject; 
```

你隐含地声明：

```
NSObject * __strong someObject; 
```

即*强指针*。Strong 只是所有权限定符之一，您还可以有*弱*和*自动释放*限定符。

现在以您的评论为例：

```
NSDate **targetDate; 
```

你得到错误“指向非常量类型'NSDate *'的指针，没有明确的所有权”。这是因为 ARC 需要知道您的指针所指的指针的所有权资格（慢慢阅读！;-)）。即 ARC 要求您将变量键入为：

```
NSData * 'some ownership qualifer' * targetDate; 
```

一旦你解码了 C 的类型优先级规则，它就是一个“指向 NSDate 的‘某些所有权限定符’的指针”。

错误消息包括“非常量”，因为这完全是关于通过指向指针的指针进行*写入*- ARC 仍然需要知道如何处理存储，这取决于指向的引用是强还是弱等。

在您的简单情况下，应该执行以下操作：

```
NSObject *obj1;
NSObject *obj2;
NSObject * __strong * targetObj; 
```

然后在执行`(*targetObj) = ...`等操作时，ARC 知道如何进行内存管理——在这种情况下，就是释放所引用变量中的旧值，`targetObj`并将新引用分配给该变量。

基本阅读是[自动引用计数](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.restrictions.conversion.indirect)和[转换到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)- 特别是在后者中查找，`NSError`因为它解释了`NSError **`在 ARC 下如何处理声明错误参数的常见模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:56:59.720

你那里的代码已经很好了。如果`Object`实际上是一个 obj-c 对象，那么这个确切的代码就是你想要的。唯一的怪癖是潜在的内存管理问题（例如，是否`targetObj`需要保留它所指向的东西？）

# android - 如果 Android 版本低于 3.0，如何隐藏操作栏（Theme.Holo）

> ID：12222323
> 
> 赞同：5
> 
> 时间：2012-08-31T20:52:39.087
> 
> 标签：android

我注意到操作栏 (Theme.Holo) 仅在 android 3.0 或更高版本中看起来很酷，但在例如 Android 2.3 上它不喜欢。

是否可以显示基于 Android 版本的操作栏（Theme.Holo）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T21:15:19.023

操作栏至少需要 API 11。如果您想以编程方式删除它，尽管您可以在该活动的代码中使用 hide()。

```
ActionBar actionBar = getActionBar();
actionBar.hide(); 
```

不太确定对于低于 3.0 的任何东西它会显示什么，但它似乎是最好的起点。

编辑：

您可以在运行时使用构建常量检查 SDK 版本

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) { //checks if its lower than Honeycomb
    ActionBar actionBar = getActionBar();
    actionBar.hide();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T21:21:23.817

这是因为直到 Android 3.0（API 级别 11）才添加 ActionBar，因此任何低于该版本的 Android 版本都将具有标题栏，而不是操作栏。

ActionBar 还不是官方兼容性库的一部分，所以与此同时，[ActionBarSherlock](http://actionbarsherlock.com/)库将允许您拥有一个在所有 API 版本中看起来都相同的 ActionBar。

如果您想完全隐藏 ActionBar，只需将 android:style/Theme.Holo.NoActionBar 添加到清单中的活动即可。

# php - 使用 MSSQL 将 PHP 中的 Blob 写入 SQL Server

> ID：12222324
> 
> 赞同：0
> 
> 时间：2012-08-31T20:52:42.920
> 
> 标签：php, sql-server, apache-flex, blob

我有一组 AMFPHP 服务，它们从 Flex 应用程序接收包含图像的字节数组。到目前为止，一切都很好。现在我需要将字节数组写入 SQL Server 数据库中的 blob 字段。我正在使用 MSSQL 库，我无法更改它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:48:23.113

解决方案下方：

```
// Stores bytearray received from a Flex app through AMPPHP

$arrData = unpack("H*hex", $image->data);
$content = "0x".$arrData['hex'];

$sql = "insert into Images (Id, ImageData) values ($id, $content)";
mssql_query($sql); 
```

# matlab - 计算图像和多边形之间重叠的简单方法是什么？

> ID：12222328
> 
> 赞同：7
> 
> 时间：2012-08-31T20:53:07.460
> 
> 标签：matlab

我有一个封闭的非自相交多边形。它的顶点保存在两个向量 X 和 Y 中。最后 X 和 Y 的值被限制在 0 和 22 之间。

我想构造一个大小为 22x22 的矩阵，如果多边形的一部分与该 bin 重叠，则将每个 bin 的值设置为 true，否则为 false。

我最初的想法是生成一个由定义的点组成的网格`[a, b] = meshgrid(1:22)`，然后用来`inpolygon`确定网格的哪些点在多边形中。

```
[a b] = meshgrid(1:22);
inPoly1 = inpolygon(a,b,X,Y); 
```

然而，只有当 bin 的中心包含在多边形中时，才会返回 true，即它返回下图中的红色形状。然而，更需要沿着绿色形状的线条（尽管它仍然是一个不完整的解决方案）。

为了获得绿色斑点，我对`inpolygon`. 对于每次比较，我将 NE、NW、SE 或 SW 点的网格移动了 1/2。这相当于测试 bin 的角是否在多边形中。

```
inPoly2 = inpolygon(a-.5,b-.5,X,Y) | inpolygon(a+.5,b-.5,X,Y) | inpolygon(a-.5,b+5,X,Y) | inpolygon(a+.5,b+.5,X,Y); 
```

虽然这确实为我提供了部分解决方案，但在顶点包含在 bin 中但没有 bin 角的情况下它会失败。

有没有更直接的方法来解决这个问题，最好是产生更具可读性的代码的解决方案？

![在此处输入图像描述](../Images/92106c64b13ae7ed85aeeaecf4ec4b5a.png)

这个情节是用：

```
imagesc(inPoly1 + inPoly2); hold on;
line(a, b, 'w.');
line(X, Y, 'y); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T19:07:29.463

一种建议是使用 polybool 函数（在 2008b 或更早版本中不可用）。它找到两个多边形的交点并返回结果顶点（如果不存在顶点，则返回一个空向量）。为了在这里使用它，我们迭代（使用arrayfun）检查网格中的所有正方形，以查看polybool 的输出参数是否为空（例如，没有重叠）。

```
N=22;
sqX = repmat([1:N]',1,N);
sqX = sqX(:);
sqY = repmat(1:N,N,1);
sqY = sqY(:);

intersects = arrayfun((@(xs,ys) ...
      (~isempty(polybool('intersection',X,Y,[xs-1 xs-1 xs xs],[ys-1 ys ys ys-1])))),...
      sqX,sqY);

intersects = reshape(intersects,22,22); 
```

这是生成的图像：

![在此处输入图像描述](../Images/0dcffcb153dea10415b3a1ca13b4bafa.png)

绘图代码：

```
imagesc(.5:1:N-.5,.5:1:N-.5,intersects');
hold on;
plot(X,Y,'w');
for x = 1:N
    plot([0 N],[x x],'-k');
    plot([x x],[0 N],'-k');
end
hold off; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:32:49.593

**略有改善**

首先，为了简化你的“部分解决方案”——你所做的只是看着角落。如果不考虑 22x22 的点网格，您可以考虑 23x23 的角网格（它将与较小的网格偏移 (-0.5, -0.5)。一旦有了，您就可以在 22x22 网格上标记点在多边形中至少有一个角。

**完整解决方案**：

但是，您真正要查找的是多边形是否与每个像素周围的 1x1 框相交。这不一定包括任何角，但它*确实*要求多边形与盒子的四个边之一相交。

您可以使用以下算法找到多边形与包含框相交的像素的一种方法：

```
For each pair of adjacent points in the polygon, calling them pA and pB:
    Calculate rounded Y-values: Round(pA.y) and Round(pB.y)
    For each horizontal pixel edge between these two values:
        * Solve the simple linear equation to find out at what X-coordinate
          the line between pA and pB crosses this edge
        * Round the X-coordinate
        * Use the rounded X-coordinate to mark the pixels above and below
          where it crosses the edge
    Do a similar thing for the other axis 
```

因此，例如，假设我们正在查看`pA = (1, 1)`and `pB = (2, 3)`。

*   首先，我们计算了四舍五入的 Y 值：1 和 3。
*   然后，我们查看这些值之间的像素边缘：`y = 1.5`和`y = 2.5`（像素边缘从像素偏移一半
*   对于其中的每一个，我们求解线性方程以找到`pA`->`pB`与我们的边缘相交的位置。这给了我们：`x = 1.25, y = 1.5`和`x = 1.75, y = 2.5`。
*   对于这些交点中的每一个，我们取舍入的 X 值，并用它来标记边缘任一侧的像素。
    *   `x = 1.25`舍入为 1（对于 edge `y = 1.5`）。因此，我们可以将像素标记为我们集合`(1, 1)`的`(1, 2)`一部分。
    *   `x = 1.75`舍入为 2（对于 edge `y = 2.5`）。因此，我们可以标记 和 处的`(2, 2)`像素`(2, 3)`。

这就是水平边缘的处理。接下来，让我们看看垂直的：

*   首先我们计算四舍五入的 X 值：1 和 2
*   然后，我们查看像素边缘。在这里，只有一个：`x = 1.5`。
*   对于这条边，我们找到它与线`pA`->相交的地方`pB`。这给了我们`x = 1.5, y = 2`.
*   对于这个交叉点，我们取舍入的 Y 值，并用它来标记边缘任一侧的像素：
    *   `y = 2`舍入为 2。因此我们可以标记 和 处的`(1, 2)`像素`(2, 2)`。

完毕！

嗯，有点。这将为您提供边缘，但不会填充多边形的主体。但是，您可以将这些与您之前的（红色）结果结合起来以获得完整的集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T23:36:39.910

这个伪代码算法怎么样：

```
For each pair of points p1=p(i), p2=p(i+1), i = 1..n-1
    Find the line passing through p1 and p2
    Find every tile this line intersects // See note
    Add intersecting tiles to the list of contained tiles

Find the red area using the centers of each tile, and add these to the list of contained tiles 
```

注意：这条线需要一点点努力才能实现，但我认为有一个相当简单、众所周知的算法。

另外，如果我使用的是 .NET，我只需定义一个与每个网格图块对应的矩形，然后查看哪些与多边形相交。但是，我不知道在 Matlab 中检查交叉点是否容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T12:52:31.253

我建议[`poly2mask`](http://www.mathworks.se/help/releases/R2011b/toolbox/images/ref/poly2mask.html)在图像处理工具箱中使用，我认为它或多或少可以满足您的需求，并且或多或少可以满足您和 Salain 的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T22:12:42.673

好吧，我想我迟到了，虽然严格来说赏金时间是到明天；）。但这是我的尝试。首先，一个标记包含/触摸一个点的单元格的函数。给定一个间距为 lx, ly 的结构化网格和一组坐标为 (Xp, Yp) 的点，集合包含单元格：

```
function cells = mark_cells(lx, ly, Xp, Yp, cells)

% Find cell numbers to which points belong.
% Search by subtracting point coordinates from
% grid coordinates and observing the sign of the result.
% Points lying on edges/grid points are assumed
% to belong to all surrounding cells.

sx=sign(bsxfun(@minus, lx, Xp'));
sy=sign(bsxfun(@minus, ly, Yp'));
cx=diff(sx, 1, 2);
cy=diff(sy, 1, 2);

% for every point, mark the surrounding cells
for i=1:size(cy, 1)
    cells(find(cx(i,:)), find(cy(i,:)))=1;
end
end 
```

现在，剩下的代码。对于多边形中的每个线段（您必须一个接一个地穿过这些线段），将该线段与网格线相交。使用给定的网格点坐标，分别针对水平线和垂直线小心地进行交叉，以避免数值不准确。对于找到的交点，我调用 mark_cells 将周围的单元格标记为 1：

```
% example grid
nx=21;
ny=51;
lx = linspace(0, 1, nx);
ly = linspace(0, 1, ny);
dx=1/(nx-1);
dy=1/(ny-1);
cells = zeros(nx-1, ny-1);

% for every line in the polygon...
% Xp and Yp contain start-end points of a single segment
Xp = [0.15 0.61];
Yp = [0.1 0.78];

% line equation
slope = diff(Yp)/diff(Xp);
inter = Yp(1) - (slope*Xp(1));

if isinf(slope)
    % SPECIAL CASE: vertical polygon segments
    % intersect horizontal grid lines
    ymax = 1+floor(max(Yp)/dy);
    ymin = 1+ceil(min(Yp)/dy);
    x=repmat(Xp(1), 1, ymax-ymin+1);
    y=ly(ymin:ymax);
    cells = mark_cells(lx, ly, x, y, cells);
else
    % SPECIAL CASE: not horizontal polygon segments
    if slope ~= 0
        % intersect horizontal grid lines
        ymax = 1+floor(max(Yp)/dy);
        ymin = 1+ceil(min(Yp)/dy);
        xmax = (ly(ymax)-inter)/slope;
        xmin = (ly(ymin)-inter)/slope;
        % interpolate in x...
        x=linspace(xmin, xmax, ymax-ymin+1);
        % use exact grid point y-coordinates!
        y=ly(ymin:ymax); 
        cells = mark_cells(lx, ly, x, y, cells);
    end

    % intersect vertical grid lines
    xmax = 1+floor(max(Xp)/dx);
    xmin = 1+ceil(min(Xp)/dx);
    % interpolate in y...
    ymax = inter+slope*lx(xmax);
    ymin = inter+slope*lx(xmin);
    % use exact grid point x-coordinates!
    x=lx(xmin:xmax); 
    y=linspace(ymin, ymax, xmax-xmin+1);
    cells = mark_cells(lx, ly, x, y, cells);
end 
```

示例网格/段的输出： ![输出](../Images/9577e28e4cf7383a5c65b6d94ad90c34.png)

遍历所有多边形段会为您提供多边形“光环”。最后，使用标准的 inpolygon 函数获得多边形的内部。如果您需要有关代码的更多详细信息，请告诉我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T15:12:51.837

首先，我为此示例定义了一个低分辨率圆

```
X=11+cos(linspace(0,2*pi,10))*5;
Y=11+sin(linspace(0,2.01*pi,10))*5; 
```

就像您的示例一样，它适合约 22 个单位的网格。然后，按照您的指示，我们声明一个网格网格并检查点是否在多边形中。

```
stepSize=0.1;
[a b] = meshgrid(1:stepSize:22);
inPoly1 = inpolygon(a,b,X,Y); 
```

唯一不同的是，在您的原始解决方案采取一步的地方，这个网格可以采取更小的步骤。最后，在正方形的“边缘”内包含任何内容

```
inPolyFull=unique( round([a(inPoly1) b(inPoly1)]) ,'rows'); 
```

简单地采用我们的`round`高分辨率网格并将点适当地四舍五入到最接近的低分辨率等效值。`unique`然后，我们通过使用`'rows'`限定符调用以向量样式或成对方式删除所有重复项。就是这样

要查看结果，

```
[aOrig bOrig] = meshgrid(1:22);
imagesc(1:stepSize:22,1:stepSize:22,inPoly1); hold on;
plot(X,Y,'y');
plot(aOrig,bOrig,'k.');
plot(inPolyFull(:,1),inPolyFull(:,2),'w.'); hold off; 
```

![示例多边形](../Images/9696570b109f9faf4b01b7af7ddbaab8.png)

更改`stepSize`具有以速度和内存为代价改善结果的预期效果。

如果您需要结果与示例中的 inPoly2 格式相同，则可以使用

```
inPoly2=zeros(22);
inPoly2(inPolyFull(:,1),inPolyFull(:,2))=1 
```

希望有帮助。我可以想到一些其他的方法来解决它，但这似乎是最简单的。

# html - 悬停在 SVG 多边形上时不显示工具提示

> ID：12222345
> 
> 赞同：20
> 
> 时间：2012-08-31T20:54:18.850
> 
> 标签：html, svg, tooltip

我有一张科罗拉多州的 SVG 地图，每个县都有多边形。我希望在鼠标悬停时弹出县名，但这没有发生。我也将县设置为在悬停时更改填充，这**正在**发生。我不确定有什么区别。

这些只是标准的浏览器工具提示，在每个多边形的`title`属性中设置了预期的文本。

在这里小提琴：http: [//jsfiddle.net/mmparker/sVbxT/4/](http://jsfiddle.net/mmparker/sVbxT/4/)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-31T21:09:23.207

对于 SVG，您需要使用嵌套`<title>`元素而不是标题属性。例如`<polygon points="..."><title>your title</title></polygon>`

# java - 代码更改后如何在没有 mvn clean install 的情况下构建项目？

> ID：12222348
> 
> 赞同：7
> 
> 时间：2012-08-31T20:54:33.130
> 
> 标签：java, google-app-engine, maven

我在 Eclipse 中有一个项目，一个以 appengine sdk 和 maven 作为我的构建器的 java 应用程序。

.class 文件在我启动全新安装之前不会刷新，因此我对代码所做的每一次更改都必须运行：

*   mvn 干净安装
*   mvn 日食：清洁
*   mvn 日食：日食

然后尝试启动我的应用程序。

请帮帮我，这真的很烦人。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:33:32.137

您可能正在寻找热部署功能。当使用 webapp 工作时，在大多数情况下，仅仅编译一个 java 类是不够的——通常你必须创建一个 war 包，而且几乎总是你必须将新代码重新部署到应用服务器。

*mvn 包*应该足以创建战争。只要不删除或重命名任何文件，就不需要运行*mvn clean 。*那会让事情变得更快。

但是，要实现热部署（即在 Web 引擎开发服务器上即时获取新代码），您需要做一些额外的工作。确保您使用[Google Plugin for Eclipse](https://developers.google.com/appengine/docs/java/tools/eclipse) - 您可以将它与 maven 一起使用。该插件至少应该处理静态文件热部署。使用 Eclipse 在调试模式下运行应用程序会有所帮助，并且它能够动态替换方法的主体。

[查找此问题](https://stackoverflow.com/questions/1242712/does-google-app-engine-java-support-hot-deployment-in-eclipse)的更多信息答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T17:40:45.340

我知道这是一篇非常古老的帖子，但我最近在使用 STS 和 Websphere 应用程序服务器时遇到了这个问题。希望这可以帮助任何人遇到这个古老的帖子遗物。

查看 Eclipse 市场中的“FileSync”插件。它允许将您的工作区文件与外部目录同步（想想您的应用程序服务器）。安装“FileSync”后，您可以将其配置为将您的工作区文件直接“复制/粘贴”到应用程序服务器的展开的 .war 目录中。将您的文件复制为符合 j2ee 的格式可能需要一些时间，但它对我来说就像一个魅力。配置完成后，您基本上只需更新文件，保存它们，您的应用程序就可以使用了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-13T23:54:57.800

实际上，仅使用 Eclipse m2e 插件即可轻松实现 App Engine 应用程序的热重载，并且不需要 GPE 插件或任何其他特殊连接器：

1) 使用提供的 Google 原型或其他自定义原型之一，像往常一样在 Eclipse 中将您的 App Engine 应用程序创建为 Maven 项目。

`mvn clean install`2) 配置您的项目，并在项目的根目录中进行初始构建以创建初始`target/<artifact>-<version>`WAR 目录。

3) 在项目根目录中启动开发服务器，`mvn appengine:devserver`并确保您可以在浏览器中查看本地提供的应用程序。让开发服务器保持运行。

4) 在 Eclipse 中，确保`Project -> Build automatically`已选中。

现在，每当您保存`.java`文件时，Eclipse 都会自动`.class`在`target/<artifact>-<version>/WEB-INF/classes`. 在 Maven 项目中，此目录设置为`.classpath`. 开发服务器将检测文件更改并热重新加载您的应用程序，以便在您在浏览器中刷新应用程序时立即显示更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-01T22:51:32.947

从这个问题中不清楚到底发生了什么以及为什么。为了弄清楚这一点，我们需要查看 pom.xml 和显示相关文件夹和文件的“tree”命令输出。然后我们可以将其与相关的 maven 插件应该做什么进行比较，并从那里开始工作。

就目前而言，这是一个相当古老的问题，目前还不清楚到底发生了什么，而且 OP 很久以前就消失了。如果今天发生此问题，最好的办法是发布到[App Engine Public Issue Tracker](https://code.google.com/p/googleappengine/issues/list)，尽管如果问题不在 App Engine SDK（或相关的 maven 插件）中而是来自第三方，这可能是不合适的-party maven 插件行为不正常（例如[maven-compiler-plugin](http://maven.apache.org/plugins/maven-compiler-plugin/)）。然而，在进行更深入的分析之前，很难提前知道。

# python - 是否有终止python中线程的规范方法？

> ID：12222349
> 
> 赞同：3
> 
> 时间：2012-08-31T20:54:44.060
> 
> 标签：python, multithreading

我想在 python 中强制线程终止：我不想设置一个事件并等到线程检查它并退出。我正在寻找一个简单的解决方案，例如`kill -9`. 如果没有像使用私有方法等操作这样的肮脏黑客，这是否可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T14:38:53.597

如果你不介意你的代码运行慢十倍，你可以使用`Thread2`下面实现的类。下面的示例显示了调用新`stop`方法应如何在下一条字节码指令中终止线程。

```
import threading
import sys

class StopThread(StopIteration): pass

threading.SystemExit = SystemExit, StopThread

class Thread2(threading.Thread):

    def stop(self):
        self.__stop = True

    def _bootstrap(self):
        if threading._trace_hook is not None:
            raise ValueError('Cannot run thread with tracing!')
        self.__stop = False
        sys.settrace(self.__trace)
        super()._bootstrap()

    def __trace(self, frame, event, arg):
        if self.__stop:
            raise StopThread()
        return self.__trace

class Thread3(threading.Thread):

    def _bootstrap(self, stop_thread=False):
        def stop():
            nonlocal stop_thread
            stop_thread = True
        self.stop = stop

        def tracer(*_):
            if stop_thread:
                raise StopThread()
            return tracer
        sys.settrace(tracer)
        super()._bootstrap()

################################################################################

import time

def main():
    test = Thread2(target=printer)
    test.start()
    time.sleep(1)
    test.stop()
    test.join()

def printer():
    while True:
        print(time.time() % 1)
        time.sleep(0.1)

if __name__ == '__main__':
    main() 
```

该类`Thread3`的代码运行速度似乎比`Thread2`该类快大约 33%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:47:47.247

如果您想要的是能够让程序在其结束时终止而不关心某些线程会发生什么，那么您想要的是`daemon`线程。

从[文档](http://docs.python.org/library/threading.html#threading.Thread.daemon)：

> 当没有活着的非守护线程时，整个 Python 程序退出。

示例使用程序：

```
import threading
import time

def test():
  while True:
    print "hey"
    time.sleep(1)

t = threading.Thread(target=test)
t.daemon = True # <-- set to False and the program will not terminate
t.start()
time.sleep(10) 
```

* * *

琐事：线程在 .Net`daemon`中被称为线程。`background`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T23:37:46.243

线程在执行时结束。

您可以向线程*发出信号*，希望它尽快终止，但这假定线程中运行的代码协作，并且它不提供何时发生这种情况的上限保证。

一种经典的方法是使用变量 like`exit_immediately = False`并让线程的主例程定期检查它，如果值为 . 则终止`True`。要让线程退出，您需要设置`exit_immediately = True`并调用`.join()`所有线程。显然，这仅在线程能够定期签入时才有效。

# python - 使用 optparse 接受参数的大多数 Pythonic 方式

> ID：12222355
> 
> 赞同：5
> 
> 时间：2012-08-31T20:55:06.103
> 
> 标签：python, arguments, command-line-arguments, argparse, optparse

我目前有一个 python 文件，它利用 sys.argv[1] 在命令行接受一个字符串。然后它对该字符串执行操作，然后将修改后的字符串返回到命令行。

我想实现一个批处理模式选项，在该选项中我可以提供一个字符串文件（每行一个，fwiw）并让它返回到命令行，以便我可以重定向输出做类似的事情

```
$ python script.py -someflag file.txt > modified.txt 
```

同时仍保留当前功能。

我只运行 2.6，所以 argparse 不是一个选项。我看到的教程要么使用 argparse、getopt，要么深入研究太复杂/不适用的示例。

检查输入并采取适当行动的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T21:00:47.273

[argparse](http://pypi.python.org/pypi/argparse)仍然是一个选项，它只是没有内置到 2.6 中。您仍然可以像任何第 3 方软件包一样安装它（例如，使用`easy_install argparse`）。

这方面的代码示例是：

```
import sys
import argparse

p = argparse.ArgumentParser(description="script.py")
p.add_argument("-s", dest="string")
p.add_argument("-f", dest="infile")

args = p.parse_args()

if args.infile == None and args.string == None:
    print "Must be given either a string or a file"
    sys.exit(1)
if args.infile != None and args.string != None:
    print "Must be given either a string or a file, not both"
    sys.exit(1)
if args.infile:
    # process the input file one string at a time
if args.string:
    # process the single string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T21:19:06.737

在这里查看我的答案：[获取/解析传递给 Python 脚本的命令行参数的最佳方法是什么？](https://stackoverflow.com/questions/20063/whats-the-best-way-to-grab-parse-command-line-arguments-passed-to-a-python-scri/26910#26910)

作为快捷方式，这里有一些示例代码：

```
import optparse

parser = optparse.OptionParser()

parser.add_option('-q', '--query',
    action="store", dest="query",
    help="query string", default="spam")

options, args = parser.parse_args()

print 'Query string:', options.query 
```

# php - 如何将日期字符串（2012 年 8 月 8 日）转换为数字格式（2012 年 8 月 8 日）？

> ID：12222358
> 
> 赞同：1
> 
> 时间：2012-08-31T20:55:30.303
> 
> 标签：php

您好如何将字符串格式日期转换为数字格式？

```
$bd=$row[dateofb];
o/p:08 august 2012 
```

但是如何将上述刺痛转换为 08/08/1212

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:57:44.603

尝试这个。该`date`功能与`strtotime`:)

```
echo date('d/m/Y', strtotime($bd)); 
```

# objective-c - AudioPlayer not playing on a second view controller

> ID：12222360
> 
> 赞同：0
> 
> 时间：2012-08-31T20:55:41.147
> 
> 标签：objective-c, ios, cocoa-touch, avaudioplayer

I have a sound playing on buttons pushed from the main view controller which works fine. On the next view controller I also want a sound to play on buttons pushed but I'm not getting any sound. I set the two .h and .m files the same. What could my problem be? Thank you for any help.

my .m file:

```
#import "AboutView.h"
#import <AVFoundation/AVFoundation.h>
#import <CoreAudio/CoreAudioTypes.h>

@interface AboutView ()

@end

@implementation AboutView
@synthesize support;
@synthesize facebook;
@synthesize kmbdev;
@synthesize back;
@synthesize player2;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNi{
if (self) {
    // Custom initialization

}
return self;
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
NSString *soundFilePath = [[NSBundle mainBundle] pathForResource: @"sound1" ofType: @"wav"];
NSURL *fileURL = [[NSURL alloc] initFileURLWithPath: soundFilePath];

self.player2 = [[AVAudioPlayer alloc] initWithContentsOfURL: fileURL error: NULL];
player2.volume = .5;

[player2 prepareToPlay];
} 
```

My .h file:

```
#import "ViewController.h"
#import <MessageUI/MessageUI.h>
#import <AVFoundation/AVFoundation.h>
#import <CoreAudio/CoreAudioTypes.h>

@class ViewController;

@interface AboutView : UIViewController <MFMailComposeViewControllerDelegate,        AVAudioPlayerDelegate>{
AVAudioPlayer *player2;
}

@property (strong, nonatomic) IBOutlet UIButton *back;
- (IBAction)back:(id)sender;
@property (strong, nonatomic) IBOutlet UIButton *support;
@property (strong, nonatomic) IBOutlet UIButton *facebook;
@property (strong, nonatomic) IBOutlet UIButton *kmbdev;
- (IBAction)email:(id)sender;
@property (strong, nonatomic) AVAudioPlayer *player2;

@end 
```

I have [player2 play]; at my prepare for segue and IBaction as I do on the main view controller.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:35:26.007

Add this code in ViewDidLoad method of 2nd controller:

```
NSString *soundFilePath = [[NSBundle mainBundle] pathForResource: @"sound1" ofType: @"wav"];
if([[NSFileManager defaultManager] fileExistsAtPath:soundFilePath)
{
  NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:soundFilePath];
  if(fileURL)
  {
   self.player2 = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];
   self.player2.delegate = self;
   self.player2.volume = 0.5f;
   [self.player2\. play];
  }
}
else {
  NSLog(@"File DoesNot Exists");
} 
```

# webdeploy - Web Deploy \ TFS - 无论传递的参数如何，都忽略设置并部署到同一台服务器

> ID：12222361
> 
> 赞同：2
> 
> 时间：2012-08-31T20:55:43.037
> 
> 标签：webdeploy

我有一个应用程序需要部署到两个不同的服务器（环境）。

我在两个单独的服务器 server1 和 server2 上有两个环境。

两台服务器都配置了不同的 IIS 管理器用户帐户和密码。

然而，构建都发生在服务器 1 上，似乎无论我通过构建定义传递什么设置，一切都被部署到服务器 1。

我可以从 VS2010 中的 Publish 命令手动发布到 server2，但这需要在 TFS 中自动化。

这曾经工作得很好，但几周前就开始发生了。

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:58:38.520

最后，虽然我遵循了 IIS 生成的设置文件，但我不得不将 MSDeployPublishMethod 设置为 WMSVC（它被设置为 MSDeploy）。我不能告诉你为什么这个有效而另一个无效，但这就是我解决它的方法。如果有人对在哪里可以找到有关各种 Web 部署设置的更多信息有任何详细信息，请告知！

# php - 使用 PHP 检查文件扩展名

> ID：12222369
> 
> 赞同：0
> 
> 时间：2012-08-31T20:56:34.563
> 
> 标签：php

我想知道如何让 PHP 检查它有什么扩展，然后执行代码。例如，让我们看看它是一个 .mp3 文件，然后它会执行： echo 'This is a mp3 file.'; 当然不是用那个代码——而是更高级。无论如何，有什么想法等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:57:57.137

使用[pathinfo() 函数](http://php.net/manual/en/function.pathinfo.php)来隔离文件的扩展名，然后在 if 语句中使用该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:57:54.093

有多种方法可以做到这一点。如果您所做的只是检查 mp3，只需在句点上爆炸，弹出最后一个，然后查看字符串是否相等。

例如：

```
$name = "song.mp3";
$parts = explode('.', $name);
$extension = array_pop($parts);
if( $extension == 'mp3'){
    echo 'This is a mp3 file.';
} 
```

如果您正在检查各种扩展并且它们已上传使用

```
$_FILES['file']['type']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T21:01:01.127

检查这两个选项来做到这一点：

```
$filename = 'music.mp3'
$ext = substr(strrchr($filename, '.'), 1); 
```

或者

```
$filename = 'music.mp3';
$ext = pathinfo($filename, PATHINFO_EXTENSION); 
```

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T21:11:41.713

如果要正确检测文件的类型，请使用[Fileinfo](http://us2.php.net/manual/en/ref.fileinfo.php)。

为 PHP 的注释撕掉的示例：

```
<?php
$fi = new finfo(FILEINFO_MIME,'/usr/share/file/magic');
$mime_type = $fi->buffer(file_get_contents($file)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:59:33.133

您可以使用`filetype()`或`$_FILES[$file][type]`来获取文件类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T21:01:12.317

尝试这个

```
 $file_name = "test.txt";
    $extension = pathinfo($file_name);
    echo "Your file extension is ".$extension ['extension']; 
```

# image - 试图弄清楚为什么在时间轴上共享时图像缩略图没有显示

> ID：12222374
> 
> 赞同：0
> 
> 时间：2012-08-31T20:57:08.417
> 
> 标签：image, facebook-opengraph, facebook-timeline

为什么我在 Facebook 时间轴上分享帖子时不会显示图像缩略图？它曾经完美地工作，现在我没有得到图像。这是一个示例链接。(http://noahsdad.com/chris-burke-corky-life-goes-on/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:14:24.043

我没有在您的页面上看到任何打开的图形标签。为了使图像正确显示，并能够管理在 Facebook 上发布的图像，应该在文档的头部使用 og:image 标签。在您这样做之前，您需要在 html 声明中包含 Open Graph 名称空间。

一个例子是：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml">
 <head>
  ....
  <meta property="og:image" content="http://www.example.com/img/example.jpg" />
  ....
 </head> 
```

示例 url 指向您想要显示的实际图像。

完成后，您可以在此处测试链接：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

如果操作正确，您应该会在调试验证结果中看到预期的图像。

# visual-studio-2010 - 找不到程序集 - System.Reactive.Debugger

> ID：12222385
> 
> 赞同：10
> 
> 时间：2012-08-31T20:58:41.100
> 
> 标签：visual-studio-2010, reactive-extensions-js

我已经安装了 Visual Studio 2010 Express，然后是 Reactive Extensions 2.0。当我在调试模式下启动我的应用程序时，会抛出以下异常后使用响应式扩展的部分代码：

```
 The assembly with display name 'System.Reactive.Debugger' failed to load in the 'Load' binding context of the AppDomain with ID 1\. The cause of the failure was: 

System.IO.FileNotFoundException: Could not load file or assembly 

'System.Reactive.Debugger, Version=2.0.20823.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies 
```

问题是我找不到这个 dll - System.Reactive.Debugger。

# java - 如何从 Javadoc 文档中隐藏 main()？

> ID：12222387
> 
> 赞同：1
> 
> 时间：2012-08-31T20:58:42.890
> 
> 标签：java, javadoc

我编写的每个 Java 类都有一个 main() 方法供我运行命令行测试。但是，我不希望 main() 出现在生成的 Javadoc 文档中（我通过在命令行运行 javadoc 生成）。有谁知道我怎样才能从 Javadocs 中省略 main() 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:05:00.640

[官方 javadoc 常见问题解答](http://www.oracle.com/technetwork/java/javase/documentation/index-137483.html#exclude)说：

> 当前没有 Javadoc 选项可以从 javadoc 生成的文档中隐藏、排除或禁止公共成员。

但是给出了几个间接的选择......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:57:30.907

```
public class Foo
{
    static class Main
    {
        public static void main(String[] args)
        {
            System.out.println("main");
        }
    }
} 
```

奇怪的是，虽然`Foo&Main`不公开，但 cmd 行`java`似乎并不介意

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T21:01:59.840

我相信仍然没有办法阻止解析/包含特定的公共成员（如`main`）。

请参阅[此常见问题解答](http://www.oracle.com/technetwork/java/javase/documentation/index-137483.html#exclude)：有`@exclude`一次正在考虑使用指令。

# html - 在 CSS 中，我应该对顶级元素还是最底层元素应用字体大小更改？

> ID：12222388
> 
> 赞同：0
> 
> 时间：2012-08-31T20:59:05.857
> 
> 标签：html, css

哪个更合适/更快？

例如，假设我里面有一个`DIV`with `UL`，里面有五个`LI`。我是否将字体大小样式和字体系列样式应用于`DIV`,`UL`或`LI`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:00:14.043

在适用的地方应用字体大小。

如果您希望 a 中的所有文本`<div>`大小相同，请在此处应用字体大小。

我还建议使用相对字体大小 ( `ems`)。这通常会为您节省一些时间。

# javascript - 如何在 JavaScript 中获取 HTML 元素的水平滚动百分比？

> ID：12222389
> 
> 赞同：10
> 
> 时间：2012-08-31T20:59:15.103
> 
> 标签：javascript, jquery, html, scroll

我们如何计算滚动条在开始和结束之间的元素覆盖的“距离”百分比？

```
<div id="container" style="overflow-x:scroll; max-width:1000px;">
  <div id="contained" style="width:3000px;"></div>
</div>

<script>
  $('#container').scroll(function(){
    var scrollPercentage; //How to get scroll percentage?
  });
</script> 
```

所以，如果滚动条完全在左边，我们想要得到`0`，如果它完全在右边，我们想要得到`100`。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-31T21:11:50.860

```
var scrollPercentage = 100 * this.scrollLeft / (this.scrollWidth-this.clientWidth); 
```

[http://jsfiddle.net/vWDfb/3/](http://jsfiddle.net/vWDfb/3/)

或者，如果你真的必须使用 jQuery：

```
scrollPercentage = 100 * $(this).scrollLeft() / ($('#contained').width() - $(this).width()); 
```

[http://jsfiddle.net/vWDfb/5/](http://jsfiddle.net/vWDfb/5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T20:59:15.103

在这里看到它：http: [//jsfiddle.net/vWDfb/1/](http://jsfiddle.net/vWDfb/1/)

```
$('#container').scroll(function(){
    var scrollPercentage = 100*this.scrollLeft/this.scrollWidth/(1-this.clientWidth/this.scrollWidth);
}); 
```

例如，将该数字四舍五入到两位小数会很有用。然后，使用

```
scrollPercentage.toFixed(2); 
```

* * *

**编辑**：更好地使用

```
var scrollPercentage = 100 * this.scrollLeft / (this.scrollWidth-this.clientWidth); 
```

正如@Blazemonger 指出的那样。

# c++ - C/C++ 快速 3d 模型解析

> ID：12222396
> 
> 赞同：1
> 
> 时间：2012-08-31T20:59:58.587
> 
> 标签：c++, performance, parsing, model, scanf

我一直在尝试解析directx .x 文件，而不使用directX API 仅加载模型的几何图形。我第一次尝试使用 C++ 流，但解析一个 800Kb 的文件需要将近 3 秒。所以我尝试对 CI/O 函数做同样的事情，现在大约需要 120 毫秒。问题是使用 DX API 加载相同的文件需要相同或几乎相同的时间，但它还会加载所有内容，而不仅仅是几何。所以我认为我的解析器效率低下，只是加载几何。使用分析器，我注意到大部分时间都花在 fscanf() 上，我用它来解析顶点和索引。我还尝试将每一行放在缓冲区中，然后使用 sscanf，但时间是一样的。我没有使用 STL。关于如何进行更快的解析避免使用 fscanf 的任何建议？请不要' 不要说“使用像 Assimp 这样的另一个库”，因为我想自己这样做。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:20:04.760

将读取与扫描分开，例如首先将整个文件读入内存（或使用内存映射），然后使用 sscanf 或其他方式进行扫描（boost::spirit，为什么不呢？）

# python - Python并从图中删除注释

> ID：12222397
> 
> 赞同：4
> 
> 时间：2012-08-31T21:00:05.030
> 
> 标签：python, annotations, matplotlib

我在 wxpython GUI 中使用 matplotlib。简而言之，我绘制了一堆数据。然后我单击一个数据点（使用位于以下位置的 DataCursor：

[是否有相当于 MATLAB 的 datacursormode 的 matplotlib？](https://stackoverflow.com/questions/4652439/is-there-a-matplotlib-equivalent-of-matlabs-datacursormode)

或者

[在 wxPython 中的 matplotlib 上弹出注释](https://stackoverflow.com/questions/11162401/pop-up-annotations-on-matplotlib-within-wxpython)

第二个链接是我的实际实现。我从其他类中重新定义了 datacursor 类。我想知道，如何通过单击事件按钮来删除注释？例如，我有一个更新我的散点图的事件按钮（通过使用 plot_handle.set_data 而不是通过清除图形）。但是，无论该点是否存在，注释都会准确地保留在原来的位置。我该如何删除它？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T21:19:32.287

大多数 matplotlib 对象都有一个`remove()`函数（我认为它是从 继承的`Artist`）。只需在要删除的对象上调用它即可。

编辑：

如果你有

```
dc = DataCursor(...) # what ever aruguements you give it
# bunch of code
dc.annotation.remove()
del dc
plt.draw() # need to redraw to make remove visible 
```

Python 没有“私有”属性的概念，因此您只需进入对象内部并在注释上调用 remove。有关更多详细信息，请参阅有关[课程的教程](http://docs.python.org/tutorial/classes.html)。

不利的一面是，现在您拥有的对象是一种奇怪的状态。如果您对它有任何其他引用，它们可能表现不佳。如果您想保留`DataCursor`对象，您可以`annotation`使用它的`set_*`功能修改对象或更改它的可见性以暂时隐藏它（[doc](http://matplotlib.sourceforge.net/api/artist_api.html#matplotlib.text.Text)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T21:52:44.627

您需要像艺术家一样添加它才能像艺术家一样删除它

```
arrow2 = matplotlib.text.Annotation("I love it",xy=(0.5,0.5),xycoords='data',arrowprops=dict(arrowstyle="-")) 
ax2.add_artist(arrow2) 
arrow2.remove() 
```

# c# - 在 IE 中查找活动选项卡或 URL 或 IntPtr windowHandle

> ID：12222401
> 
> 赞同：0
> 
> 时间：2012-08-31T21:00:35.323
> 
> 标签：c#, internet-explorer

我有一个 IEView，它有许多 IEWindows，每个 IEWindow 都有一个 IETab，每个 IETab 都有选项卡的窗口句柄和该选项卡的 url。

我目前使用

```
 WindowStateChanged(uint dwWindowStateFlags, uint dwValidFlagsMask) 
```

知道标签何时更改。我无法弄清楚的是在启动时已经存在 IE，当前活动选项卡是什么？如果我可以获取活动 url，我可以找到活动选项卡，或者如果我可以获取活动选项卡窗口句柄，我可以获取活动选项卡。也许我应该爬树并尝试 getSelectedTabIndex 以确定活动选项卡，因为我知道我的 IETabs 是按照它们在 IE 中的确切顺序添加的，我认为这很有趣，可能不是巧合。

有谁知道怎么做

1.  获取活动标签句柄或
2.  获取活动标签的网址，以便我可以查找标签或
3.  我将如何获取选项卡控件并获取所选选项卡的索引
4.  或者也许找到焦点 IntPtr 句柄，因为此时窗口正在成为焦点，并希望选项卡被认为是焦点？

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:33:39.583

嗯，我不确定这是否正确，但使用 Winspy++ 选择的选项卡始终是组件列表中的最后一个 Classname=FrameTab。当我切换选项卡时，列表的顺序会发生变化，并且所选的总是最后一个。这适用于 IE 9...不确定其他版本。

所以，我认为使用选项卡中的 IntPtr 句柄，我可以上树到 Classname=IEFrame 并获取它的子类 Classname=FrameTab 类型，最后一个是选定的选项卡。

# objective-c - 管理视网膜 UIButton 图像大小

> ID：12222403
> 
> 赞同：0
> 
> 时间：2012-08-31T21:00:42.800
> 
> 标签：objective-c, ios, cocoa-touch

我对使用视网膜和非视网膜显示器管理不同尺寸的图像有点困惑。

1.  我在 Storyboard 中添加了一个自定义按钮并添加了一些文本，然后添加了 backgroundimage，这是在 Illustrator 中完成的矢量（宽度：630 / 高度：130）：

    ```
    UIImage *img = [UIImage imageNamed:@"iPad1_orange_button.png"];
    [myButton setBackgroundImage:img forState:UIControlStateNormal]; 
    ```

按钮显示：

![在此处输入图像描述](../Images/1593109be3c01f7939c046be2d6d587c.png)

...按钮出来非常小。

我有另一张带有@2x 的视网膜图像，但尺寸相同。

我的问题是如何根据图像大小管理按钮的大小。我需要手动设置按钮的大小吗？

此外，当我在 Illustrator 中创建一个与我在 XCODE 中使用的按钮具有相同像素大小的按钮并将其导出为 .png 时，将其添加到 XCODE 并将其拖到 Storyboard 中，它会变得非常大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:14:26.377

快速澄清一下：

*故事板尺寸**不是**像素。*

iPhone 4S 的分辨率为 640x960(x,y) @ 326ppi。xCode 尺寸为 320×460(x,y)。只需取数字并转换 em 以获得适当的像素大小。

IE：如果您想要一个 100 宽和 100 高的故事板按钮，您需要创建一个 100*(640/320) 像素宽和 100*(960/460) 像素高的图像（我相信我的数学是正确的...）。

根据您正在构建的内容，您需要不同的图像来满足不同的设备。

另一方面，视网膜显示一词并没有指定一个逐像素的明确标准。如果我没记错的话，这是苹果创造的一个术语，基本上意味着屏幕有足够的像素，人眼（因此视网膜）将无法看到锯齿。

类似于英特尔创造的“超极本”一词；没有**真正**的规格地板/天花板只是一种营销策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:06:34.913

考虑尺寸以及您将像素视为“密度无关像素”的内容。当涉及到位置和大小时，您始终以原始大小工作，但由操作系统为您处理不同的分辨率。现在我们有原始尺寸和密度为 X2 的 Retina，但这可能会改变。您永远不需要手动更改给定设备的分辨率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T18:22:27.183

这很简单：

*   使按钮框架为正常 res 图像的大小
*   当您使用 UIImage imageNamed 加载图像时：这样做

UIImage *img = [UIImage imageNamed:@"iPad1_orange_button"];

*注意我删除了文件扩展名 (.png) - 这指示 UIImage 选择合适的分辨率版本，常规或@2x。iOS 将以与普通 res 图像相同的帧大小显示图像的 2x 版本。很简单。

# ruby-on-rails - 如何在 Rails 验证错误中突出显示字段

> ID：12222408
> 
> 赞同：9
> 
> 时间：2012-08-31T21:00:53.407
> 
> 标签：ruby-on-rails, ruby, validation, validationerror

在 Rails 3.1 中，如何为未通过验证错误的字段显示表单字段突出显示？我知道脚手架会自动生成 css 和控制器代码来处理这个问题，但我想知道是否有办法手动生成它。我已经通过@user.errors.full_messages.each ...等实现了错误消息的字符串显示，但我无法让这些字段以红色突出显示。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-31T21:22:13.287

假设您的 CSS 文件中的字段有一个*错误*类：

```
<% if @user.errors[:name] %>
  <%= f.label :name, :class => "error" %>
<% else %>
  <%= f.label :name %>
<% end %> 
```

这是你想要的吗？

**额外**：[这是关于自定义默认 ActiveRecord 验证 CSS 的部分。](http://guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html#customizing-error-messages-css)

**编辑：（** *关于额外的ifs）*

```
# app/helpers/application_helper.rb

def field_class(resource, field_name)
  if resource.errors[field_name]
    return "error".html_safe
  else
    return "".html_safe
  end
end 
```

接着：

```
# in your view

<%= f.label :name, :class => field_class(@user, :name) %>
<%= f.label :password, :class => field_class(@user, :password) %>
[...] 
```

*（我可能在那里犯了一个错误 - 我正在用电话写 - 但你明白了。你可以用多种方式编码这个 = 无穷大，所以按照你喜欢的方式去做......）*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-25T12:31:23.747

Rails 现在有一个很好的技巧。当发生错误时，rails 会在错误字段周围`error`放置`div`一个类。`.field_with_errors`所以现在你可以定位那个类并添加样式。

要专注于输入，您可以做

```
.field_with_errors input{
  border: 1px solid red !important;
} 
```

`input`这个 CSS 将在元素周围放置一条漂亮的红线，同时`important!`会覆盖任何现有样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T04:53:35.533

我必须这样做 (resource.errors[field_name].length > 0) 才能让它工作：

def field_class(resource, field_name) if resource.errors[field_name].length > 0 return " custom_error1 ".html_safe else return "".html_safe end end

# java - 数组和 for 循环

> ID：12222410
> 
> 赞同：0
> 
> 时间：2012-08-31T21:00:57.090
> 
> 标签：java, arrays, loops, for-loop

我写了这段代码。我是 Java 新手，愿意发展我的技能，所以我写了这段代码，为了学习数组，一位开发人员建议使用 HashSet，我期待新的建议。

```
import java.io.*;
public class dictionary 
{    
    public static void main(String args[])
    {
        String[] MyArrayE=new String[5];
        String[] MyArrayS=new String[5];

        MyArrayE[0]="Language";
        MyArrayE[1]="Computer";
        MyArrayE[2]="Engineer";
        MyArrayE[3]="Home";
        MyArrayE[4]="Table";

        MyArrayS[0]="Lingua";
        MyArrayS[1]="Computador";
        MyArrayS[2]="Ing.";
        MyArrayS[3]="Casa";
        MyArrayS[4]="Mesa";

            System.out.println("Please enter a word");
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); 
          String word= null;
           try {
             word= br.readLine();
           } catch (IOException e) {
             System.out.println("Error!");
             System.exit(1);
           }
           System.out.println("Your word is " + word);

        for(int i=0; i<MyArrayE.length; i++)  
        {
            if(word.equals(MyArrayS[i]))
            {
                System.out.println(MyArrayE[i]);

            }
        }   

    }
} 
```

我的问题：如果用户输入了不在 MyArrayS 中的单词怎么办，我想检查它并打印一条语句，如“Word 不存在”。

我认为它可能看起来像：

```
if(word!=MyArrayS)
{
System.out.println("Word does not exist");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:15:41.503

您可以简单地使用 .Contains(String) 方法来确定单词是否包含在数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:03:41.547

您必须检查数组的每个元素以查看它不存在。所以你的代码实际上看起来像：

```
int c;
boolean found = false;

for(c = 0;c < MyArrayS.length;c++) {
  if(MyArrayS.compareTo(word) == 0) {
   found = true;
  }
}

if(!found) {
  System.out.println("Word does not exist");
} 
```

# objective-c - 目标 C：全局可用的方法

> ID：12222411
> 
> 赞同：0
> 
> 时间：2012-08-31T21:00:57.567
> 
> 标签：objective-c, ios, cocoa-touch

我正在使用以下实现来检查是否有可用的互联网连接，并且它工作正常，但是因为我要经常检查互联网连接，我认为最好让 (BOOL)reachable 方法在任何地方都可用而无需重写它每次。因为我是 iOS 开发的新手，所以我不知道该怎么做。最好的方法是什么？

```
//
// SigninViewController.m
//

#import "Reachability.h"
#import "SigninViewController.h"

@implementation SigninViewController

...

- (IBAction)SigninTouchUpInside:(id)sender
{

    if ([self reachable])
    {
        NSLog(@"Reachable");
    }
    else
    {
        NSLog(@"Not Reachable");
    }

}

- (BOOL)reachable {
    Reachability *reachability = [Reachability reachabilityWithHostName:@"enbr.co.cc"];
    NetworkStatus internetStatus = [reachability currentReachabilityStatus];
    if(internetStatus == NotReachable) {
        return NO;
    }
    return YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:13:46.630

使它成为一个普通的 C 函数：

```
BOOL reachable()
{
    // implementation here
} 
```

在单独的头文件中声明它并独立于任何其他类实现它，因此可以在任何地方使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:13:05.313

您可以将其作为您的应用程序委托类的方法。由于该方法不需要访问任何类属性，因此它可以是类方法（用“+”声明）而不是实例方法（用“-”声明）。

在 yourAppDelegate.h 中：

```
+ (BOOL)reachable; 
```

在 yourAppDelegate.m 中：

```
+ (BOOL)reachable {
    Reachability *reachability = [Reachability reachabilityWithHostName:@"enbr.co.cc"];
    NetworkStatus internetStatus = [reachability currentReachabilityStatus];
    return (internetStatus == NotReachable);
} 
```

调用方法：

```
#import "yourAppDelegate.h"
...
BOOL reachable = [YourAppDelegate reachable]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T21:13:22.147

单[例设计模式](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Singleton.html)正是针对这种用途

实现单例的最佳方法是创建一个继承 NSObject 的类并声明一个`sharedInstance`类方法，该方法将通过 GCD`dispatch_once`函数返回该类的唯一实例*（这样调用`sharedInstance`只会在第一次分配对象，总是返回进一步调用相同的对象/实例）*

```
@interface ReachabilityService : NSObject
+ (id)sharedInstance;
@property(nonatomic, readonly) BOOL networkIsReachable;
@end

@implementation ReachabilityService
+ (id)sharedInstance
{
    static dispatch_once_t pred;
    static ReachabilityService *sharedInstance = nil;

    dispatch_once(&pred, ^{ sharedInstance = [[self alloc] init]; });
    return sharedInstance;
}
- (BOOL)networkIsReachable
{
    Reachability *reachability = [Reachability reachabilityWithHostName:@"enbr.co.cc"];
    NetworkStatus internetStatus = [reachability currentReachabilityStatus];
    return (internetStatus != NotReachable);
}
@end 
```

* * *

另一种方法是直接将您的方法声明为类方法，因为它不会使用任何实例变量或属性。那就是直接声明`+ (BOOL)networkIsReachable`而不是声明`- (BOOL)networkIsReachable`，并避免使用单例模式和`sharedInstance`方法本身。

```
@interface ReachabilityService : NSObject
+ (BOOL)networkIsReachable;
@end

@implementation ReachabilityService
+ (BOOL)networkIsReachable
{
    Reachability *reachability = [Reachability reachabilityWithHostName:@"enbr.co.cc"];
    NetworkStatus internetStatus = [reachability currentReachabilityStatus];
    return (internetStatus != NotReachable);
}
@end 
```

# symfony - 树枝扩展未注册功能

> ID：12222412
> 
> 赞同：0
> 
> 时间：2012-08-31T21:00:59.473
> 
> 标签：symfony, twig, symfony-2.1

我正在尝试为 Twig 创建一个新函数，并在 Symfony2 中创建一个 Twig 扩展。该服务已注册并正确注入容器（因此我可以引用该`response`对象），但它没有找到该功能。

这是扩展名：

```
namespace MyProject\Bundle\MyBundle\Twig\Extensions;

use Twig_Extension,
    Twig_Function_Method;

use Symfony\Component\DependencyInjection\ContainerAwareInterface,
    Symfony\Component\DependencyInjection\ContainerInterface;

class TwigUiExtensions extends Twig_Extension implements ContainerAwareInterface
{
    protected $container;

    public function setContainer(ContainerInterface $container = NULL)
    {
        $this->container = $container;
        return $this;
    }

    public function getContainer()
    {
        return $this->container;
    }

    public function getFunctions()
    {
        return array(
            'defaultBodyClasses'    =>  new Twig_Function_Method($this, 'defaultBodyClassesFunction')
        );
    }

    private function _getControllerName()
    {
        $pattern = "#Controller\\\([a-zA-Z]*)Controller#";
        $matches = array();
        preg_match($pattern, $this->getContainer()->request->get('_controller'), $matches);
        return strtolower($matches[1]);
    }

    private function _getActionName()
    {
        $pattern = "#::([a-zA-Z]*)Action#";
        $matches = array();
        preg_match($pattern, $this->getContainer()->request->get('_controller'), $matches);
        return $matches[1];
    }

    public function defaultBodyClassesFunction($userClasses = NULL)
    {
        $classes = array();
        $classes[] = $this->_getControllerName();
        $classes[] = $this->_getActionName();
        if ($userClasses) {
            $classes[] = $userClasses;
        }
        return join(' ', $classes);
    }

    public function getName()
    {
        return 'ui_extensions';
    }
} 
```

在我的 Twig 文件中，当我调用 时`defaultBodyClasses()`，Symfony 给了我一个错误：`The function "defaultBodyClasses" does not exist`并引用了我正在调用该函数的 Twig 文件。

任何想法可能会发生什么？

谢谢，内特

* * *

编辑：

这是服务定义：

```
<parameters>
    <parameter key="myproject.twig.extensions.ui_extensions.class">MyProject\Bundle\MyBundle\Twig\Extensions\TwigUiExtensions</parameter>
</parameters>

<services>
    <service id="myproject.twig.extensions.ui_extensions" class="%myproject.twig.extensions.ui_extensions.class%">
        <call method="setContainer">
            <argument type="service" id="service_container" />
        </call>
    </service>
</services> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:40:06.133

您忘记指定此服务是 Twig 扩展：

```
<parameters>
    <parameter key="myproject.twig.extensions.ui_extensions.class">MyProject\Bundle\MyBundle\Twig\Extensions\TwigUiExtensions</parameter>
</parameters>

<services>
    <service id="myproject.twig.extensions.ui_extensions" class="%myproject.twig.extensions.ui_extensions.class%">
        <tag name="twig.extension" />
        <call method="setContainer">
            <argument type="service" id="service_container" />
        </call>
    </service>
</services> 
```

# c# - 你可以，如果可以的话，你如何为 WPF TextBlock 的部分设置样式？

> ID：12222416
> 
> 赞同：2
> 
> 时间：2012-08-31T21:01:18.697
> 
> 标签：c#, wpf

> **可能重复：**
> [我可以在 WPF 中的单个 TextBlock 中有多种颜色吗？](https://stackoverflow.com/questions/2705444/can-i-have-multiple-colors-in-a-single-textblock-in-wpf)

是否可以为 WPF TextBlock 的部分设置样式，例如将某个单词设置为粗体、斜体或下划线？你能改变所有的字体属性吗？如果是这样，什么解决方案是最漂亮和最有效的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:07:29.133

您可以在 XAML 中的 TextBlock 中单独设置运行样式，也可以使用[`Inlines`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.inlines.aspx "MSDN 上的内联").cs 代码隐藏文件中的属性。[这篇博文](http://asimsajjad.blogspot.com/2010/08/wpf-textblock-inline-property.html "WPF TextBlock 内联属性")表明您至少可以设置字体样式、字体粗细、前景色和字体大小。

XAML：

```
<TextBlock>
     <Run Text="SomeText" FontWeight="Bold" FontStyle="Italic"/>
     <Run Text=" some more text" FontSize="12"/>
     <Run Text=" and more" Foreground="Blue"/>
</TextBlock > 
```

下面是一个示例，展示了从[C# Corner](http://www.c-sharpcorner.com/uploadfile/raj1979/textblock-in-wpf/)向运行添加画笔：

```
<Run.Foreground>
   <LinearGradientBrush>
      <GradientStop Color="Green" Offset="0.0" />
      <GradientStop Color="Purple" Offset="0.25" />
      <GradientStop Color="Orange" Offset="0.5" />
      <GradientStop Color="Blue" Offset="0.75" />
   </LinearGradientBrush>
</Run.Foreground> 
```

您可以以编程方式访问的`Inlines`集合是[`System.Windows.Documents.Run`](http://msdn.microsoft.com/en-us/library/system.windows.documents.run.aspx)对象的集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:08:18.760

尝试使用**Runs**，您可以根据需要将任意数量的它们放在**TextBlock**或**Paragraph**中，它们在性能方面非常有效。

您还可以为 Run 的*Text*属性使用绑定，非常酷！

```
<TextBlock>
    <Run Text="I want to show you some" />
    <Run Text="bold"
         FontWeight="Bold" />
    <Run Text="text!" />
</TextBlock> 
```

# c++ - 为什么要按照声明的顺序初始化成员变量？

> ID：12222417
> 
> 赞同：80
> 
> 时间：2012-08-31T21:01:19.837
> 
> 标签：c++, g++, compiler-warnings

我今天写了一些代码，得到了一个奇怪的编译错误，这似乎是由于初始化成员变量的顺序与声明的顺序不同造成的。

例子：

```
class Test {
    int a;
    int b;

public:
    Test() : b(1), a(2) {
    }
};

int main() {
    Test test;
    return 0;
} 
```

然后，如果我编译它`-Werror -Wall`：

```
$ g++ -Werror -Wall test.cpp
test.cpp: In constructor ‘Test::Test()’:
test.cpp:3:9: error: ‘Test::b’ will be initialized after [-Werror=reorder]
test.cpp:2:9: error:   ‘int Test::a’ [-Werror=reorder]
test.cpp:6:5: error:   when initialized here [-Werror=reorder]
cc1plus: all warnings being treated as errors 
```

我意识到这`-Wall`是明确要求 GCC 过分警告，但我认为所有这些都是有原因的。那么，初始化成员变量的顺序有什么关系呢？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-31T21:09:46.363

原因是因为它们是按照它们在类中声明的顺序进行初始化的，而不是您在构造函数中初始化它们的顺序，并且它警告您不会使用构造函数的顺序。

这是为了帮助防止初始化`b`依赖的错误，`a`反之亦然。

这种排序的原因是因为只有一个析构函数，它必须选择一个“相反的顺序”来销毁类成员。在这种情况下，最简单的解决方案是使用类中的声明顺序来确保始终以正确的相反顺序销毁属性。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-08-31T21:14:52.037

> 为什么要按照声明的顺序初始化成员变量？

无论您是否愿意，成员**都将按照声明它们的顺序进行初始化。**警告告诉您，您要求的顺序与初始化的实际执行顺序不同。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-08-31T21:04:39.230

您不应该这样做，因为它会降低可读性并且可能具有误导性。

如果你这样做了：

```
Test() : b(1), a(b) {} 
```

看起来`b`then`a`都设置为`1`，而实际上未初始化的值`b`用于初始化`a`之前`b`被初始化为`1`。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-08-31T21:08:53.800

实际上编译器*总是*按照声明的顺序初始化变量，即使你以不同的顺序编写初始化程序。因此，如果您不按声明顺序编写初始化，则初始化程序的顺序不符合初始化顺序，如果初始化相互依赖，可能会导致细微的错误。

例如，考虑代码

```
Test(): b(42), a(b) {} 
```

这是一个错误，因为`a`之前已初始化`b`，但*看起来*没问题。如果按照声明的顺序（也就是初始化的顺序）来写，bug就很明显了：

```
Test(): a(b), b(42) {} 
```

请注意，该错误也可能比这更微妙；例如想象`a`和`b`是在其构造函数中输出某些内容的类类型；然后使用“不正确”的顺序，您会认为`b`'s 的输出应该出现在`a`'s 之前，而实际上会发生相反的情况。if`a`的输出首先出现会导致文件无效，这也是一个错误，但如果构造函数在另一个翻译单元中，编译器就无法注意到问题（除了编译器无法知道重新排序是或不是错误）。因此，编译器只警告每个不匹配顺序的实例是合理的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-31T21:37:37.397

> 我意识到 -Wall 明确要求 GCC 过分警告，但我认为所有这些都是有原因的。

- 墙只是一个开始。与名称所暗示的相反，-Wall 不会启用所有警告。有一些警告可以说是“过度”，但这些正是 -Wall 不启用的警告。我总是使用 -Wall 和其他人。

至于您的投诉，正如其他人已经指出的那样，这个警告是有充分理由的。仅仅因为您指定了一个顺序并不意味着编译器将使用该顺序。编译器必须按照标准使用的顺序基于类定义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-06T11:50:04.053

初始化列表提供了以任何顺序初始化变量的灵活性。但是，实际的初始化是根据您声明类成员的顺序发生的。为避免此警告，您必须重新排序初始化/声明。

# xcode - Xcode：用于在 Visual Assist for Visual Studio 中查找符号引用的工具？

> ID：12222418
> 
> 赞同：1
> 
> 时间：2012-08-31T21:01:24.760
> 
> 标签：xcode, debugging

我非常习惯 Visual Assist for Visual Studio 中的 Find References 功能，它可以查找对变量、函数或宏的所有引用。它比用于调试或代码阅读的文本关键字搜索要好得多。

我在 Mac 上找不到类似的工具。

Xcode 似乎没有这样的功能。我想知道 Mac 上是否有用于此目的的等效 3rd-party 工具？

我认为理论上，可以使用 ctags 和 cscope 编写跨平台的。但我现在不想在上面投入时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:39:40.707

使用 X-Code 3.2.5

*   右键单击代码中的项目
*   “在项目中查找”
*   “查找符号”

# php - 西班牙口音的 Kohana ORM 字符集

> ID：12222419
> 
> 赞同：0
> 
> 时间：2012-08-31T21:01:25.777
> 
> 标签：php, orm, character-encoding, model, kohana

我在 Kohana 中使用 ORM 时遇到了一些问题，特别是当我尝试在我的数据库中插入/更新具有特殊字符（西班牙口音）的数据时。

> **注意：我的数据库设置为 UTF-8 字符集，这不是问题，请继续阅读：**

**这是我用来在模型中保存数据的函数：**

```
class Model_Colaborador extends ORM {

    protected $_table_name = 'colaboradores';

    public function save_data($data, $id = 0)
    {
        if (empty($data))
            exit();

        $date = Date::formatted_time();

        $data['fecha_actualizacion'] = $date;

        if (empty($id))
            $data['fecha_creacion'] = $date;

        $data['estatus'] = 'active';

        if ( ! empty($id))
        {
            $this->where($this->_primary_key, '=', $id)->find();
            if ( ! $this->loaded())
                exit();
        }

        return $this->values($data)->save();

    }

} 
```

**要在我的控制器中保存/更新数据，我使用这个：**

```
public function action_save()
{
     $id = $this->request->param('id');
     $data = $this->request->post();     // From the form

     Model::factory('colaborador')->save_data($data, $id);
} 
```

一切都很好，但是，最大的问题是当某些字段带有重音符号时，例如：**妈妈** （**只保存妈妈？？在我的桌子上，包括单词末尾的两个问号**）。

现在，如果我使用的是 DB 类，那就完美了。例如：

```
class Model_Colaborador extends ORM {

    protected $_table_name = 'colaboradores';

    public function save_data($data, $id = 0)
    {
        if (empty($data))
            exit();

        $date = Date::formatted_time();

        $data['fecha_actualizacion'] = $date;

        if (empty($id))
            $data['fecha_creacion'] = $date;

        $data['estatus'] = 'active';

        // Only an Insert for the example
        DB::insert($this->_table_name, array_keys($data))->values($data)->execute();

    }

} 
```

现在，数据以正确的格式保存，例如：**Mamá**（**包括西班牙口音**）。

* * *

现在，我为此做了一个“解决方案”，但是，我相信有办法解决我的问题（这就是我在这里的原因）。我在模型中添加了一个过滤器以在将所有数据保存到数据库之前对其进行修复，例如：

```
public function filters()
{
        return array(
            TRUE => array(
                array('trim'),
                array(array($this, 'encoding'))
            ),
        );
} 
```

自定义过滤器的回调是：

```
public function encoding($value)
{
        return mb_convert_encoding($value, 'HTML-ENTITIES', 'UTF-8');  // Using mbstring
} 
```

并将数据保存到我的数据库中：**Mam & eacute ;** （没有空格，stackoverflow 转换它）。

希望你明白我想要做什么。我疯狂地搜索，这个案子很奇怪......

非常感谢您阅读本文。

祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:32:14.320

检查通过以下方式插入的 ORM 对象`values`：

```
$this->values($data);

var_dump($this); 
```

它在你的`save_data`方法的最后。`$_object`您应该在ORM 对象的私有属性中看到您分配的（尚未保存的数据） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T17:39:30.783

您是否验证了用户输入是 UTF-8 格式的？有时浏览器会发送以您尚未准备好接收的格式编码的数据。

# javascript - JavaScript 继承和构造函数

> ID：12222420
> 
> 赞同：1
> 
> 时间：2012-08-31T21:01:32.500
> 
> 标签：javascript, oop, inheritance

我试图理解 JavaScript 中的继承。我正在使用原型将子类链接到它的父类。但是一旦我定义了父类的构造函数就开始运行。

```
 <script type="text/javascript">
        function Person ()
        {
            window.alert('We\'ve got a new person!');
        }

        function King ()
        {
            window.alert('We\'ve got a new king!');
        }

        King.prototype = new Person();

        //King.prototype.constructor = King;
        //var erik = new King();
    </script> 
```

在 JavaScript 中使用继承的正确方法是什么？

引发混乱的教程：[https ://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:07:34.680

那是因为 Javascript 是一种原型语言，并不真正支持这种方式的继承。它的对象是松散类型，可以通过额外的功能和属性即时扩展。

因此，您实际上要做的是创建一个`instance`Person，然后可以使用额外的方法对其进行扩展。

该教程指出：

> 在 JavaScript 中，您通过将父类的实例分配给子类，然后对其进行专门化来做到这一点。

如果您习惯于真正的（好吧，基于类的）OO，那会相当混乱。

# java - Logger.getLogger(class_name.class.getName()) 导致 NullPointerException

> ID：12222424
> 
> 赞同：0
> 
> 时间：2012-08-31T21:02:01.577
> 
> 标签：java, logging, static

问题是 Logger 没有使用 `Logger.getLogger(class_name.class.getName())`方法初始化。你可以看到下面的代码。我标记了导致异常的行。我必须注意，我也尝试过不使用静态`setLevel`块。

```
// File that contains logger
public class Experience {

private final static Experience INSTANCE = new Experience(); 
private final static Logger LOGGER = Logger.getLogger(Experience.class.getName());

private MainFrame main_frame;

static {
    LOGGER.setLevel(Level.SEVERE);
    }

public static Experience getInstance()
    {
    return INSTANCE;
    }

private Experience()
    {
    try
        {
        FileHandler fh = new FileHandler(System.getProperty("user.dir") + "/log.txt");
        fh.setFormatter(new XPLogFormatter());
        LOGGER.addHandler(fh); // NULLPOINTEREXCEPION HERE
        }
    catch (Exception e)
        {
        e.printStackTrace();
        }
    }
}

// Just a loader
public class Loader
{
public static void main(String args[])
    {
    JFrame.setDefaultLookAndFeelDecorated(true);

    SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
                {
                MainFrame main_frame = new MainFrame();
                }
        });
    }
}

// Stripped down version of main frame
public class MainFrame extends JFrame
{
private Experience XP;

public MainFrame()
    {
    super();
    XP = Experience.getInstance(this);
    }
}

// Modified formatter
public class XPLogFormatter extends Formatter
{
@Override
public String format(LogRecord record)
    {
    StringBuffer buf = new StringBuffer(1000);
    buf.append(formatMessage(record));
    return buf.toString();
    }
} 
```

你能告诉我究竟是什么导致了这个错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T21:05:04.873

问题是这两个静态变量初始化器是按文本顺序执行的：

```
private final static Experience INSTANCE = new Experience(); 
public final static Logger LOGGER = Logger.getLogger(Experience.class.getName()); 
```

因此，当第一行调用构造函数时，其中包括：

```
LOGGER.addHandler(fh); 
```

...`LOGGER`仍然为空。

最*简单*的解决方法是颠倒声明的顺序......但另一个更清晰的选择是在静态初始化程序中完成所有操作：

```
private final static Experience INSTANCE;
public final static Logger LOGGER;

static {
    LOGGER = Logger.getLogger(Experience.class.getName());
    LOGGER.setLevel(Level.SEVERE);
    INSTANCE = new Experience();
} 
```

（出于兴趣，您*真的*希望记录器公开吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:05:13.843

因为您从未定义过名为“Experience”的 Logger。当您调用 getLogger(String) 时，它会查找具有该名称的已定义记录器。尝试只做 Logger.getLogger(Experience.class)，这应该会让你成为 Experience 的记录器

# javascript - 使用 Ajax 和 JSON 时设置 cookie

> ID：12222426
> 
> 赞同：1
> 
> 时间：2012-08-31T21:02:07.780
> 
> 标签：javascript, ajax, json, cookies

寻找在基于 JSON 和 Ajax 的 Web 应用程序中设置浏览器 cookie 的公认做法。

浏览器似乎不接受来自服务器的用于 JSON 请求的 cookie。这给我留下了两个我可以看到的选择：

1.  在进行需要涉及 cookie 的操作时，不要使用 JSON 请求，而是在文本到达客户端后使用`JSON.parse()`
2.  将 cookie 信息从服务器通过 JSON 发送到客户端，然后使用浏览器设置 cookie，而不是通过服务器头。这是否也意味着必须在客户端读取 cookie 信息并通过 JSON 将其发送回服务器，因为浏览器也不会通过 AJAX JSON 请求发送 cookie 信息？

我倾向于选择选项#1，但这两个选项看起来都很糟糕。我在这里错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:41:01.493

仅当域属性与您所在的域匹配时才会发送 Cookie。

因此，例如，您使用域“.domain.com”设置了一个 coockie。对 domain.com 或任何子域的任何请求都将包含 cookie，但仅此而已。

对于对其他域的请求，您需要在服务器端设置 cookie，或者如果用户与为该域设置 cookie 的页面交互。

想到的 2 种设置 cookie 的简单方法是：

1.  显然，对脚本进行 ajax 调用来设置 cookie
2.  做这样的事情：

HTML：

```
<script type="text/javascript" src="http://domain2.com/cookie_login_page.php?username=johnsmith&hash=1614aasdfgh213g"></script> 
```

PHP：

```
<?php
    // ... setCookie stuff
    echo 'var cookie_set = true;';
?> 
```

# python - python多线程环境下如何限制函数执行时间？

> ID：12222430
> 
> 赞同：1
> 
> 时间：2012-08-31T21:02:32.103
> 
> 标签：python, multithreading

我有一个脚本，它运行相当多的并发线程（至少 200 个）。每个线程都会进行一些非常复杂的评估，这可能会花费大量时间。评估方法是用 C 实现的，我无法更改。我想限制每个线程的方法执行时间。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:24:58.750

根据我对您的问题的理解，使用多处理而不是多线程可能是一个很好的案例。多处理将允许您利用系统上的所有可用资源 - 如果您不小心，还可以使用一些资源。

线程实际上并不并行运行，因此除非您正在等待大量 I/O 或类似的事情，否则从单独的进程中调用它会更有意义。您可以使用[Python 多处理库](http://docs.python.org/library/multiprocessing.html)从 Python 脚本调用它，或者您可以使用用 C 编写的包装器并使用某种形式的[进程间通信](http://docs.python.org/library/ipc.html)。第二个选项将避免为了运行一些 C 代码而启动另一个 Python 实例的开销。

您可以调用 time.sleep （或执行其他任务并检查系统时钟的经过时间），然后在所需的时间间隔后检查结果，允许任何尚未完成的进程在您使用结果时继续运行。或者，如果您此时不关心，您可以发送一个信号来终止该进程。

# javascript - jsf onbeforeunload 总是以提交运行

> ID：12222434
> 
> 赞同：0
> 
> 时间：2012-08-31T21:03:06.153
> 
> 标签：javascript, jquery, jsf

我按照这个很好的例子[警告用户在 JSF 中未保存的数据](https://stackoverflow.com/q/5709356/1596104)

结果几乎是完美的。

我总是在提交期间收到提示。此示例如何关闭消息？我以为 $form.submit 做到了，但它对我不起作用。我错过了什么？

我的页面提交如下：

```
<h:commandLink value="Save" action="#{report.saveReport}" >
    <f:param name="id" value="#{report.id}"/>
    <f:param name="name" value="#{report.name}"/>
</h:commandLink> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:23:21.250

commandLink 是一个链接，可能不会执行“标准”提交。*可能*有javascript 生成提交。这*可能是*在绕过提交代码的逻辑。将表单提交事件绑定到链接的 onclick，一切*正常*。

# android - ffmpeg android构建中的libx264编码器错误

> ID：12222435
> 
> 赞同：0
> 
> 时间：2012-08-31T21:03:05.930
> 
> 标签：android, ffmpeg, h.264, armv7, libx264

现在，我有一个 ffmeg 构建脚本，它可以识别 libx264 并成功编译。我还编译了 x264 并获得了 libx264.a 库。ffmpeg 和 libx264 都是从源代码构建的。我也可以在没有 libx264 的情况下成功构建 ffmpeg。您可能会在下面找到我的脚本，它尝试使用 libx264 构建 ffmpeg。

```
#!/bin/bash
NDK=~/Android_NDK_r7b
PLATFORM=$NDK/platforms/android-8/arch-arm/
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86
alitan=~/x264/ndk7_build
function build_one
{
./configure --target-os=linux \
--prefix=$PREFIX \
--enable-cross-compile \
--extra-libs="-lgcc " \
--arch=arm \
--cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
--cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
--nm=$PREBUILT/bin/arm-linux-androideabi-nm \
--sysroot=$PLATFORM \
--extra-cflags=" -I$alitan/include" \
--disable-shared \
--enable-static \
--extra-ldflags=" -L$alitan/lib " \
--enable-version3 \
--enable-gpl \
--disable-doc \
--disable-everything \
--enable-libx264 \
--enable-encoder=libx264 \
$ADDITIONAL_CONFIGURE_FLAG

make clean
make -j4 install
$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -soname libffmpeg.so -shared -nostdlib -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog --warn-once --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a
}

#arm v7vfpv3
CPU=armv7-a
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU "
PREFIX=./DONE/$CPU
ADDITIONAL_CONFIGURE_FLAG=
build_one 
```

上面的脚本在 ffmpeg 输出构建中没有给我 libx264.a。其他几个场景如下。如果我启用 x264 编码器，我会在 x264.c（在 libavcodec 中）中的某些变量出现未定义的引用错误。如果我在 ffmpeg 配置中启用共享，我会收到一个错误，说它不能 cd 到我的前缀目录（顺便说一下，没有权限问题）。

我正在使用最新版本的 ffmpeg 和 x264（今天克隆了 git）和 ndk 7。Ubuntu 在 VM 上运行，安装在 Windows 7 上。有关我将 ffmpeg/x264 移植到 Android 的冒险的更多详细信息，您可以参考[此处](https://stackoverflow.com/questions/12200172/yet-another-ffmpeg-libx264-issue)。

我应该怎么做才能将 libx264 与 ffmpeg 一起使用？我继续尝试使用不同配置的脚本，删除所有 ffmpeg x264 文件夹并重新安装它们，但无济于事。

提前非常感谢。

***编辑*** 下面是我的 x264 构建脚本。它构建得很好，给了我静态库和标题。

```
export ARM_ROOT=/home/mehmet/Android_NDK_r7b
export ARM_INC=$ARM_ROOT/platforms/android-8/arch-arm/usr/include/
export ARM_LIB=$ARM_ROOT/platforms/android-8/arch-arm/usr/lib/
export ARM_TOOL=$ARM_ROOT/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86
export ARM_LIBO=$ARM_TOOL/lib/gcc/arm-linux-androideabi/4.4.3
export PATH=$ARM_TOOL/bin:$PATH
export PATH=$ARM_TOOL/arm-linux-androideabi/bin:$PATH
export ARM_PRE=arm-linux-androideabi
#tries to build for 4.4.3 toolchain

./configure --prefix=./ndk7_build \
--disable-gpac \
--extra-cflags=" -I$ARM_INC -fPIC -DANDROID -fpic -mthumb-interwork -ffunction-sections -funwind-tables -fstack-protector -fno-short-enums -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__ -Wno-psabi -march=armv5te -mtune=xscale -msoft-float -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -DANDROID -Wa,--noexecstack -MMD -MP " \
--extra-ldflags=" -nostdlib -Bdynamic -Wl,--no-undefined -Wl,-z,noexecstack -Wl,-z,nocopyreloc -Wl,-soname,/system/lib/libz.so -Wl,-rpath-link=$ARM_LIB,-dynamic-linker=/system/bin/linker -L$ARM_LIB -nostdlib $ARM_LIB/crtbegin_dynamic.o $ARM_LIB/crtend_android.o -lc -lm -ldl -lgcc " \
--cross-prefix=${ARM_PRE}- \
--disable-asm \
--enable-static \
--host=arm-linux \ 
```

这是我启用 libx264 编码器时终端上发生的情况。

```
STRIP   ffmpeg
INSTALL install-progs-yes
INSTALL ffmpeg
INSTALL ffprobe
libavcodec/libavcodec.a(libx264.o): In function `X264_frame':
/home/mehmet/ffmpeg/libavcodec/libx264.c:158: undefined reference to `x264_picture_init'
/home/mehmet/ffmpeg/libavcodec/libx264.c:178: undefined reference to `x264_encoder_reconfig'
/home/mehmet/ffmpeg/libavcodec/libx264.c:189: undefined reference to `x264_encoder_encode'
/home/mehmet/ffmpeg/libavcodec/libx264.c:195: undefined reference to `x264_encoder_delayed_frames'
libavcodec/libavcodec.a(libx264.o): In function `encode_nals':
/home/mehmet/ffmpeg/libavcodec/libx264.c:100: undefined reference to `x264_bit_depth'
libavcodec/libavcodec.a(libx264.o): In function `X264_close':
/home/mehmet/ffmpeg/libavcodec/libx264.c:230: undefined reference to `x264_encoder_close'
libavcodec/libavcodec.a(libx264.o): In function `X264_init':
/home/mehmet/ffmpeg/libavcodec/libx264.c:283: undefined reference to `x264_param_default'
/home/mehmet/ffmpeg/libavcodec/libx264.c:291: undefined reference to `x264_param_default_preset'
/home/mehmet/ffmpeg/libavcodec/libx264.c:313: undefined reference to `x264_param_parse'
/home/mehmet/ffmpeg/libavcodec/libx264.c:448: undefined reference to `x264_param_apply_fastfirstpass'
/home/mehmet/ffmpeg/libavcodec/libx264.c:451: undefined reference to `x264_param_apply_profile'
/home/mehmet/ffmpeg/libavcodec/libx264.c:494: undefined reference to `x264_encoder_open_125'
/home/mehmet/ffmpeg/libavcodec/libx264.c:505: undefined reference to `x264_encoder_headers' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:01:26.613

好吧，多亏了罗伯特的 git，我已经检查过了，它工作得很好。我不知道为什么，但使用 SYSROOT 样式构建和添加 armv7 优化标志是有效的。我已经为 ffmpeg 生成了一个二进制文件，该二进制文件链接到 x264 并支持编码器 x264。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T16:00:02.177

[https://github.com/guardianproject/android-ffmpeg/blob/master/configure_ffmpeg.sh](https://github.com/guardianproject/android-ffmpeg/blob/master/configure_ffmpeg.sh)

看看上面的链接，以及第八个如何在他的 ./ffmpeg/configure 中包含 L..X264...

如果您将正确的库放入 ffmpeg 上的配置步骤的搜索链中，那么所有那些未定义的引用都会消失...

# backgroundworker - WPF 中的 BackgroundWorker.RunWorkerCompleted 事件

> ID：12222436
> 
> 赞同：0
> 
> 时间：2012-08-31T21:03:06.433
> 
> 标签：backgroundworker

有一种情况是用户终止了应用程序，而它仍在通过 BackgroundWorker 处理数据。我想向此方法发送取消或终止命令。我尝试调用 CancelAsync() 方法，但它显然没有按我预期的方式工作，并且工作人员仍在继续处理。什么是向 BackgroundWorker 发出信号的好方法，尤其是它的 RunWorkerCompleted 方法来停止处理？我必须使用状态变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:16:28.767

这是在 BackgroundWorker 上调用 CancelAsync() 时执行的代码

```
public void CancelAsync()
{
    if (!this.WorkerSupportsCancellation)
    {
        throw new InvalidOperationException(SR.GetString
                 ("BackgroundWorker_WorkerDoesntSupportCancellation"));
    }
    this.cancellationPending = true;
} 
```

如您所见，他们`cancellationPending`在检查`WorkerSupportsCancellation`.

`WorkerSupportsCancellation = true;`因此，当您退出应用程序调用`backGroundWorkerInstance.CancelAsync()`并在 DoWork 或 RunWorkerCompleted 中测试 CancellationPending时，您需要设置。如果它是真的停止你的过程。

# excel - 根据两列其他列的值获取一列的值，然后更改另一工作表上的列

> ID：12222438
> 
> 赞同：0
> 
> 时间：2012-08-31T21:03:17.837
> 
> 标签：excel, excel-2007, vba

我有一个包含三个工作表的工作簿。我需要根据工作簿 A 上的列 A 和 C 以及工作表上的列 B 和 D 的条件（索引？），将工作簿 B 上的列 K（行）中的值更改为工作簿 A 中的列 CF（行）的值B. 也就是说，这些工作表具有不同顺序的数据，不能简单地循环和复制。我需要在工作表 A 中找到 CF(row) 的行号，其中工作表 A 和 C 列与工作表 AB 和 D 列相同。

伪SQL

```
UPDATE 
    Worksheet B
SET
    Worksheet B.K = Worksheet A.CF
FROM
    Worksheet A
WHERE
    Worksheet A.B = Worksheet B.B 
```

从工作表 A 中选择，列 CF WHERE AA AND AC 等于工作表 BB 和 BD AND SET Worksheet BK(Row) to Value worksheetA.CF(row)

我的代码是查找在工作表 A 列 A 上找到具有匹配文本的 LAST 列，没有任何索引或映射。

```
Public Function FindPnum(keyword As Variant) As Variant
    Dim ws As Worksheet
    Dim rng1 As Range
    Dim rng2 As Range
    Dim tRow As Long
    Dim tCol As Integer

    Set ws = Sheets("Data")
    Set rng1 = ws.Cells.Find(keyword, ws.[b2], xlValues, , xlByRows, xlPrevious)
    Set rng2 = ws.Cells.Find(keyword, ws.[b2], xlValues, , xlByColumns, xlPrevious)

    If Not rng1 Is Nothing Then
        FindPnum = Cells(rng1.Row, rng2.Column).Address(0, 0)
    End If

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:43:29.467

这里试试这个

```
Sub pair()
Dim r, r2, found
r = 8
r2 = 2
found = False
Application.ScreenUpdating = False
Sheets(2).Activate
Do Until Len(Cells(r, 2).Value) = 0
Do Until Len(Sheets(1).Cells(r2 + 1, 2).Value) = 0 Or found = True
    If Sheets(2).Cells(r, 2).Text = Sheets(1).Cells(r2, 2).Text Then
        If Sheets(2).Cells(r, 11).Value <> 0 Then
            Sheets(2).Cells(r, 11).Value = Sheets(1).Cells(r2, 84)
        End If
        found = True
    Else
        r2 = r2 + 1
    End If
Loop
r2 = 2
r = r + 1
found = False
Loop
Application.ScreenUpdating = True
End Sub 
```

我认为应该这样做。

# c# - 不同类的picturebox上的绘制方式

> ID：12222440
> 
> 赞同：0
> 
> 时间：2012-08-31T21:03:41.123
> 
> 标签：c#, .net, winforms, mvp

我目前正在开发 WinForms 中的一个程序，该程序需要大量特殊逻辑来渲染和在 PictureBox 上单击鼠标。我宁愿不将所有这些逻辑存储在自定义控件中，或者更糟糕的是，不将所有这些逻辑存储在承载图片框的主窗体中。一个增加的复杂性是需要了解某些对象才能正确绘制它们或处理单击它们。

目前，我唯一的想法是制作单独的“Renderer”和“MouseHandler”类，它们具有图片框的句柄，我可以处理其中的任何事件。问题是在保持 MVP 结构的同时做到这一点。

所以，这里有一个小示例代码，可以更好地解释发生了什么。

**主表格**

```
public partial class Form1 : Form, IView
{
    private Renderer _render;
    private MouseHandler _mouseHandler;

    public Form1() { InitializeComponent(); }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        _render = new Renderer(Picbox);
        _mouseHandler = new MouseHandler(Picbox);
    }

    #region Implementation of IView

    public string FirstName { get; set; }
    public string LastName { get; set; }

    #endregion
} 
```

**主窗体演示者**

```
public class Presenter
{
    private readonly IView _view;
    private readonly Model _model;

    public Presenter(IView view)
    {
        _view = view;
        _model = new Model("John", "Doe");
    }
} 
```

**渲染器**

```
public class Renderer
    {
        private readonly PictureBox _pictureBox;

        public Renderer(PictureBox pictureBox)
        {
            _pictureBox = pictureBox;
            _pictureBox.Paint += PictureBoxOnPaint;
        }

        private static void PictureBoxOnPaint(object sender, PaintEventArgs e)
        {
            // TODO: Draw stuff like First and Last Name
        }

        public void Refresh() { _pictureBox.Invalidate(); }
    } 
```

**模型**

```
public class Model
{
    private string FirstName { get; set; }
    private string LastName { get; set; }

    public Model(string firstName, string lastName)
    {
        FirstName = firstName;
        LastName = lastName;
    }
} 
```

我想不出一种方法让渲染器从主视图的模型中绘制名字和姓氏：

A. 通过将模型信息从演示者推送到视图，然后让视图将其推送到渲染器，让托管 PictureBox 的父级将信息推送到辅助类。

或 B. 在演示者中添加对表单库的引用以将所有内容联系在一起。这将允许我从辅助类中创建视图并添加 PictureBox 属性，但我想避免这种情况，以防视图变成 MVC 应用程序或 WPF 应用程序并且视图不使用 Windows 窗体。

有什么办法可以让这些辅助类工作吗？或者有更好的方法吗？我不想认为我注定要将所有这些都塞进自定义控件中。在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:44:06.830

在实例化的地方`renderer`，为什么不给它一个包含数据的模型对象的引用呢？当然，这是“A”方式，但是由于您是“手动”将其硬绑定到 PictureBox，因此我认为将模型实例与 picbox 一起传递给它并没有任何问题。对我来说，当我创建一个对象并对其进行配置时，我似乎很自然地对其进行了完全配置。否则，您必须添加一些渲染器构建层，因为自然地，渲染器必须以某种方式获取数据..

实际上，将模型提供给渲染器（至少对我而言）不是架构中的任何破坏，并且不会给“主机”带来任何额外的负担/逻辑，前提是您将传递“整个模型”并且渲染器将负责读取它需要的实际数据。恕我直言，以这种方式，一切都将完全正确。

# c - 关于 printf("%s", ...) 的法律论点的几个问题

> ID：12222447
> 
> 赞同：6
> 
> 时间：2012-08-31T21:04:23.500
> 
> 标签：c, printf, variadic-functions, abi

我正在创建一个修改后的 printf 实现，但我不确定这些问题的答案。

1.  零作为空字符串工作吗？（`printf("%s", 0)`允许吗？）

    我猜不是，因为 0 是一个`int`. 但是这会提示这个问题：

2.  `NULL`可以作为空字符串工作吗？（`printf("%s", NULL)`允许吗？）

    从逻辑上讲，我认为应该是的，因为`NULL`暗示了一个指针；但是很多实现似乎都有`#define NULL 0`，所以我觉得在实践中可能没有。哪个是对的？

3.  指针类型*是否必须*指向`char`？（`printf("%s", (void const *)"")`允许吗？）

    我的猜测是类型无关紧要，但我不确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T21:18:25.907

情况 1 是未定义的行为，因为参数 ( `int`) 的类型与格式说明符 ( ) 所需的类型不匹配`char *`。

出于同样的原因，案例 2 是未定义的行为。`NULL`允许将其定义为任何值为 0 的整数常量表达式，或者这样的表达式转换为`(void *)`. 这些类型都不是`char *`，因此行为未定义。

出于同样的原因，案例 3 是未定义的行为。`""`产生一个指向以 null 结尾的字符数组（字符串）的有效指针，但是当您将其强制转换为 时`const void *`，它不再具有与格式字符串匹配的正确类型。因此行为是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:53:10.217

来自在线[C11 草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)：

> ### 7.21.6.1 fprintf 函数
> 
> ...
> `s`如果不存在`l`长度修饰符，则参数应为指向字符类型数组的初始元素的指针。^(280)) 数组中的字符被写入（但不包括）终止空字符。如果指定了精度，则写入的字节数不会超过这个数。如果未指定精度或大于数组的大小，则数组应包含空字符。
> 
> * * *
> 
> ^(280) 对多字节字符没有特殊规定。)

`char`除了指向包含至少 1 个字符（0 终止符） 的数组的第一个元素的指针之外的任何内容都会调用未定义的行为。

如果您正在构建自己的实现，您当然可以为 0 或 NULL 定义自己的行为。

哦，就 NULL 的定义而言：

> ### 6.3.2.3 指针
> 
> ...
> 3 值为 0 的整数常量表达式，或转换为 void * 类型的此类表达式称为空指针常量。^(66)) 如果将空指针常量转换为指针类型，则生成的指针（称为空指针）保证与指向任何对象或函数的指针不相等。
> 
> * * *
> 
> ^(66) 宏 NULL 在 <stddef.h>（和其他头文件）中定义为空指针常量；见 7.19)

基本上，指针上下文中的任何 0 值整数表达式都被视为 NULL 指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T21:21:07.043

我相信它会编译得很好，但行为是不确定的。

关于如何`printf`工作以及为什么它被认为不安全的一些信息。 `printf`接受尽可能多的参数，因为您只需要一个（第一个）。然后将所有参数（第一个参数 - 模式除外）视为字节数组。它不检查类型或任何东西。它只是打印。

打印字符串更复杂，因为它会一直持续到找到`0 byte`('\0')。为了澄清，您可以尝试使用整数对其进行测试。如您所知，`short`长度为 2 个字节，`long`为 4 和`long long`8。如果您告诉 printf 打印`long`并传递 2 `short`s - 它会将它们视为 one `long`。或者，如果您通过`long long`并告诉它 print `long`，它将占用 4 个第一个字节并将它们用于打印。

在我的这些特定情况下，可能（没有测试）什么都不打印，但它被认为是未定义的行为。`'\0'`如果这些值不是 0，如果您传递了一些在开头有几个非 s 的特定值，它可能会打印一些字符。

不太确定它是否有帮助，但希望如此。

# javascript - 视频 JS 全屏在 Safari 中不起作用

> ID：12222448
> 
> 赞同：0
> 
> 时间：2012-08-31T21:04:25.460
> 
> 标签：javascript, safari, fullscreen, video.js

硬件：Dell Optiplex 760（库存） 操作系统：Windows 7 Pro（Service Pack 1） 浏览器：Safari 5.1.4

我的问题：当我单击全屏按钮时，全屏模式正在卸载我的视频，但没有进入全屏模式，也没有重新加载视频。

```
Console Error Messages: 
TypeError: 'undefined' is not a function (evaluating 'this.tech.ready(function(){
        this[method](arg);
})') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:06:20.470

执行以下更改为我解决了错误。我不知道这是否适用于所有人，但它非常适合我的情况。我只需要支持Safari。

File: video.js Lines: 2706 and 2757 "// Check for browser element fullscreen support" From: if (requestFullScreen) { To: if (navigator.userAgent.match("Chrome") && requestFullScreen || requestFullScreen && this.tech .supportsFullScreen()) {

如果没有 Chrome 检查这个东西全屏将无法在 chrome 中工作。

你必须对上面提到的两条线进行更改。如果您不将其添加到取消功能，那么您将无法取消。

# android - Android Edittext 光标不可见

> ID：12222453
> 
> 赞同：7
> 
> 时间：2012-08-31T21:04:37.380
> 
> 标签：android, android-edittext

我的应用程序中有一个edittext，它将在 Froyo 或 Gingerbread 中正确显示光标，但是在以后的 sdks 中，光标是不可见的。我在网上找到的解决方案是设置 android:textCursorDrawable="@null" 以便edittext 将使用光标的字体颜色。但是，由于我的 minsdkversion 是 8，我无权访问该属性。

它们是否是一种根据您所在的 sdk 有选择地添加属性的方法？或者可能是一种解决此问题的方法，以便我可以在较旧和较新的 sdk 版本上都有可见的光标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T19:26:53.757

我不知道您当前的设置，但使用该属性的一种方法是使用基于各种 android 版本的不同布局文件夹。`android:textCursorDrawable`是 API 12 中引入的一个属性，因此您可以拥有一个布局文件夹，如`layout-v12`API 为 12 或更高版本时使用的布局文件夹。在此文件夹的布局中，该属性的使用是有效的。对于较低版本`Froyo`和`Gingerbread`，您没有任何问题，因此您将使用默认文件夹`layout`. 最后，您将拥有两个布局文件夹（包含相同的布局文件）：

```
layout // don't need the property
layout-v12 // use the property 
```

这遗漏了 API 11，我不知道这对您来说是否会破坏交易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:16:26.990

尝试将您的 targetSdkVersion 设置为 API 级别 13 或更高，以访问 android:textCursorDrawable 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T19:04:55.603

如果您没有光标，我猜输入很简单，并说您只能在文本末尾输入新字符？

我认为您可以使用 TextView 并为此添加您自己的[KeyListener](http://developer.android.com/reference/android/widget/TextView.html#setKeyListener%28android.text.method.KeyListener%29)？但在这种情况下，您将无法显示虚拟键盘，请参阅以下链接：

[强制打开软键盘](https://stackoverflow.com/questions/2479504/forcing-the-soft-keyboard-open)

[android强制键盘可见](https://stackoverflow.com/questions/3517704/android-force-keyboard-visible)

或者如果有效键的范围非常有限，只能创建数字，则创建您自己的键盘。

# asp.net-mvc - 在视图中设置的控制器中访问 ViewBag

> ID：12222455
> 
> 赞同：1
> 
> 时间：2012-08-31T21:04:43.417
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我知道我可以使用 ModelBinding 来做到这一点，但我想知道我是否可以使用`ViewBag`

我`ViewBag`在视图中设置属性

```
@{
ViewBag.WasPriorityCustomer = Model.PriorityCustomer == true;
} 
```

不是优先客户的用户可以更改为一个，但我需要知道他们是否是优先客户。

在控制器中

```
[HttpPost]
public ActionResult Save(MyModel model)
{
  if (ViewBag.WasPriorityCustomer == false && model.PriorityCustomer == true)
  {
    //Thank you for becoming a priority customer
  }
} 
```

不幸`ViewBag.WasPriorityCustomer`的是始终为空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:12:52.130

您只是尝试以错误的方式做事：

您可以`ViewBag`在操作中设置 a 的值，并在生成的视图中使用它的值。

但是要从`POST`操作中的视图中获取值，您应该使用隐藏输入。

视图中的类似内容（未经测试）：

```
@ {bool wasPriorityCustomer = Model.PriorityCustomer;}

@Html.Hidden("wasPriorityCustomer", wasPriorityCustomer) 
```

和行动变成

```
[HttpPost]
public ActionResult Save(MyModel model, bool wasPriorityCustomer) 
```

或者您可以更改您的 ViewModel 以包含“隐藏”值。

并使用`@Html.HiddenFor(m => m.WasPriorityCustomer)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T09:48:21.587

如果您想在 viewBag 中存储一些值并想在 View 中的这个 ViewBag 值中使用，请尝试此代码。

在模型动作中

```
ViewBag.Test = ("NewTest"); 
```

在视图中你可以写

```
@ViewBag.ProcedureTypeId 
```

这样你就可以拥有`ViewBag`价值`Viewpage`

# opengl - glBufferData 中的提示标志实际上有什么作用吗？

> ID：12222458
> 
> 赞同：2
> 
> 时间：2012-08-31T21:05:02.090
> 
> 标签：opengl, graphics, opengl-es

我所说的标志是 GL_STREAM_DRAW、GL_STATIC_DRAW 和 GL_DYNAMIC_DRAW。 [手册页清楚地说明了何时应该使用它们，但对于如果使用它们会发生什么则模棱两可](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glBufferData.xml)。

现在在你们都回答得太快之前，让我声明我理解他们应该做什么，并且可以想象一些可能很重要的假设场景。但我怀疑它在实践中是否有很大的不同。最近我一直在想，将标志设置为 GL_DYNAMIC_DRAW 并忘记它会很好，但我心中有一个挥之不去的疑问，如果我这样做，我可能会在脚下开枪。

有没有人更**具体地**知道这些东西是做什么的？特别是我对 STATIC_DRAW 和 DYNAMIC_DRAW 之间的区别非常好奇。选错一个是帧率死亡陷阱还是只是安慰剂？我想任何真正的答案都将取决于实际的驱动程序实现。或者，如果你能想出一个真实世界的例子，这些标志做某事（真的），那么我有兴趣看到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:39:23.480

使用提示永远不会有任何行为变化。他们所做的最多就是改变各种操作的性能。甚至那时也可能不是。

例如，[使用提示被滥用，以至于 AMD 有效地*忽略了*它们](http://devgurus.amd.com/message/1174329#1174329)。他们将根据您*使用*缓冲区的方式移动内存，而不是根据使用提示。NVIDIA 的驱动程序不太愿意妥协。

通常，要知道使用哪种用法提示来获得最佳性能的唯一方法是对其进行*分析*。您选择哪个提示可以为您提供最佳性能。

# ravendb - RavenDB 放置触发器

> ID：12222462
> 
> 赞同：1
> 
> 时间：2012-08-31T21:05:15.143
> 
> 标签：ravendb

我在 RavenDB Put Trigger 上搜索了高低。但是，我找不到可以完成任务的来源。这是我存储在 Ravendb 的插件文件夹中的小 dll 代码 - 我使用的是 build 960。我的问题是，我该如何从这里开始。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Raven.Database.Plugins;
using System.Collections.Concurrent;
using Raven.Json.Linq;
using Raven.Abstractions.Data;
using System.Diagnostics;

namespace Raven.Tryouts
{
public class MyPutTrigger : AbstractPutTrigger
{
public override void OnPut(string key, Json.Linq.RavenJObject document,       Json.Linq.RavenJObject metadata, Abstractions.Data.TransactionInformation transactionInformation)
    {
        base.OnPut(key, document, metadata, transactionInformation);
        Debug.WriteLine("OnPut: " + key);
    }
    public override void AfterPut(string key, Json.Linq.RavenJObject document, Json.Linq.RavenJObject metadata, Guid etag, Abstractions.Data.TransactionInformation transactionInformation)
    {
        base.AfterPut(key, document, metadata, etag, transactionInformation);
        Debug.WriteLine("AfterPut:" + key);
    }
    public override void AfterCommit(string key, Json.Linq.RavenJObject document, Json.Linq.RavenJObject metadata, Guid etag)
    {
        base.AfterCommit(key, document, metadata, etag);
        Debug.WriteLine("AfterCommit:" + key);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:43:14.457

Debug.WriteLine 不会写入 RavenDB 调试日志。在运行 Raven 的服务器上启动 Sysinternals DebugView 以查看系统调试输出 - 您将看到示例触发器的诊断输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:31:05.807

*   编译这段代码。
*   获取生成的 dll 并将其放置在 Plugins 目录中（在 .config 文件旁边）。如有必要，创建插件目录。
*   重启乌鸦

# c# - 查询参数化无法使用 c# 和 SQL Server 插入值

> ID：12222464
> 
> 赞同：0
> 
> 时间：2012-08-31T21:05:19.887
> 
> 标签：c#, sql-server, sql-server-2008

我有一个参数化查询，它工作正常，但是当我删除 de DB 并再次创建它时，使用相同的值和所有内容，它会抛出一个异常，说它不能插入值为 sexo 的值 NULL，但所有值都是分配，这里是代码：

```
 try{
      var cmdPersona_Log = new SqlCommand();
      cmdPersona_Log.Parameters.Clear();
      cmdPersona_Log.Connection = mySqlConnection;
      cmdPersona_Log.CommandType = CommandType.Text;
      cmdPersona_Log.CommandText = @"INSERT INTO [Tomin].[TominRH].[Persona_Log] "
       + "([Id_Action],[Id_User],[Id_Date],[Id_Entidad],[Nombre],[Paterno],[Materno],[Sexo],[Id_Nacionalidad])"
       + " Values (1, 'Admin', @fecha, @id_entidad, @nombre, @paterno, @materno, @sexo, 52)";
      cmdPersona_Log.Parameters.AddWithValue("@fecha", DateTime.Now);
      cmdPersona_Log.Parameters.AddWithValue("@id_entidad", dbRow["CUENTA"].ToString().Trim());
      cmdPersona_Log.Parameters.AddWithValue("@nombre", nombre ?? string.Empty);
      cmdPersona_Log.Parameters.AddWithValue("@paterno", paterno ?? string.Empty);
      cmdPersona_Log.Parameters.AddWithValue("@materno", materno ?? string.Empty);
      cmdPersona_Log.Parameters.AddWithValue("@sexo", 1);
      cmdPersona_Log.ExecuteNonQuery();
   }
   catch(Exception e) 
   {
      MessageBox.Show(dbRow["CUENTA"] + " Persona_log  " + e.ToString());
   } 
```

我检查了数据库，它似乎不是问题，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:05:39.390

您可能会遇到`AddWithValue`无法正确推断参数类型的情况`bit`。使用`true`/`false`代替`1`/ `0`：

```
cmdPersona_Log.Parameters.AddWithValue("@sexo", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:13:46.257

确保表中所有不应该为空的字段都列在 INSERT 子句中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:13:25.300

您是否尝试过使用这种 `cmd.Parameters.Add("@SomeID", SqlDbType.Int, 4).Value =` 可以明确说明 SqlDbType 的表单？

# autocomplete - Knockout.js 文本框值绑定自动完成

> ID：12222465
> 
> 赞同：2
> 
> 时间：2012-08-31T21:05:34.343
> 
> 标签：autocomplete, knockout.js, internet-explorer-9

我有一个使用 Knockout.js 值绑定绑定到视图模型的文本输入字段。在 IE9 中，如果我输入用户名的前几个字母，我会得到标准的自动完成下拉菜单。从自动完成中选择我的用户名不会更新我的视图模型。有没有办法从自动完成选择中触发对我的 observable 的更新？

```
<input type="text" data-bind="value: userName" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T15:08:32.093

按照理查德的回答建议升级到 2.1.0 解决了我的问题，所以我将其标记为答案。

对于需要在 Knockout 2.0.0 中工作的任何人，将 valueUpdate 设置为 'blur' 似乎也可以。

```
<input type="text" data-bind="value: userName, valueUpdate: 'blur'" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T05:54:35.310

这个问题在 1 年前作为 bug 提交：

[https://github.com/SteveSanderson/knockout/pull/122](https://github.com/SteveSanderson/knockout/pull/122)

似乎在 2.1.0 版本的 knockout.js 中包含了一个修复程序 - 所以如果你更新它应该会为你解决这个问题。

`<input>`如果这是不可能的，另一种建议是使用属性关闭您的用户名的自动完成功能`autocomplete="off"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-17T07:36:52.667

它对我有用 valueUpdate: 'blur' with ko_autocomplete in knockout

# php - Zend 干扰我的函数定义。如何从 wamp 卸载？

> ID：12222468
> 
> 赞同：0
> 
> 时间：2012-08-31T21:05:46.480
> 
> 标签：php, function

我已经在我的计算机上安装了 WAMP 服务器，以便我可以开发我的网站，但是我已经开始运行在我的暂存主机上运行的现有代码，没有任何错误。

我收到以下错误：

> 致命错误：无法在第 277 行 >C:\wamp\www\uquiz\trunk\sessions\session.php 中重新声明 session_status()

我已取消注释 PHP 配置中的行：

> ;zend_extension = "c:/wamp/bin/php/php5.4.3/zend_ext/php_xdebug-2.2.0-5.4-vc9-x86_64.dll"

但这并没有抑制错误。

我假设它是 ZEND 框架可能已经声明了函数`session_status()`？

如果我更改函数的名称，错误就会消失，但我不想被限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:08:25.273

它是 5.4 的内置 PHP 函数。

重命名您的函数或降级到 PHP 5.3

[http://us.php.net/session-status](http://us.php.net/session-status)

# hbase - 为什么 OpenTSDB 选择 HBase 进行时序数据存储？

> ID：12222469
> 
> 赞同：16
> 
> 时间：2012-08-31T21:05:50.937
> 
> 标签：hbase, time-series, opentsdb

如果有人对选择 HBase 作为 OpenTSDB 的数据存储引擎有所了解，我将不胜感激？

还考虑了哪些其他选择，例如 Whisper（Graphite 前端 + Carbon 持久性）？

面向列的数据库（例如 HBase）如何成为时间序列数据的更好选择？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-09-01T07:02:18.373

我选择 HBase 是因为它可以**扩展**。Whisper 很像 RRD，它是一个固定大小的数据库，它必须销毁数据才能在其空间限制内工作。HBase 提供以下特性，使其非常适合大型时间序列数据库：

1.  **线性缩放。** 想要存储数据？添加更多节点。在我编写 OpenTSDB 的 StumbleUpon，我们的时间序列数据位于一个 20 节点的集群上，该集群主要用于分析和批处理。集群很快增长到 120 个节点，与此同时，仅占集群工作负载一*小*部分的 OpenTSDB 增长到了半*万亿*个数据点。
2.  **自动复制。** 您的数据存储在 HDFS 中，默认情况下意味着 3 个不同机器上的 3 个副本。如果机器或驱动器死了，没什么大不了的。当您构建商品服务器时，驱动器和机器总是会死机。但问题是：你真的不在乎。
3.  **高效扫描。** 大多数时间序列数据用于回答诸如“时间 X 和 Y 之间的数据点是什么”之类的问题。如果你正确地构造你的键，你可以通过简单的扫描操作使用 HBase 非常有效地实现这一点。
4.  **高写入吞吐量。** HBase 遵循的[Bigtable 设计](http://research.google.com/archive/bigtable.html)使用[LSM 树](https://en.wikipedia.org/wiki/Log-structured_merge-tree)而不是 B 树，以降低写入成本（以可能更昂贵的读取为代价）。

HBase 是面向列的这一事实并不像它是一个真正可扩展的大型*排序*键值系统这一事实那样重要。

所有基于 RRD 和 RRD 派生的工具都无法满足能够以非常便宜的方式*永久**准确*存储数十亿个数据点的规模要求（每个数据点只需几个字节的实际磁盘空间）。

# python - 在 GAE/Python 中放置一次性和每次代码的最佳位置在哪里？

> ID：12222471
> 
> 赞同：3
> 
> 时间：2012-08-31T21:05:55.343
> 
> 标签：python, google-app-engine, webapp2

我是 Google App Engine 和 Python 的新手。我无法理解有关在 Google App Engine 上运行的 Python 应用程序的一些基本问题。

如果我想执行代码：

1.  对于每个传入的请求，我应该把它放在哪里？我们正在捕获有关谁在何时查看哪些页面以及他们做了什么等的会话信息。
2.  应用程序启动时只有一次，我应该把它放在哪里？我需要初始化一些在应用程序的许多地方使用的应用程序/系统变量。放置代码以执行此操作的最佳位置在哪里？

如果有人可以向我指出任何文档或教程来解释 GAE/Python 应用程序的最佳架构实践是什么，而无需编程基础知识，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:11:08.680

# 问题 1：

一些 Web 框架（Django、KAY 等）有中间件的概念。您可以创建自己的中间件，该中间件将在每个请求上执行并处理此类信息（请参阅：[https](https://docs.djangoproject.com/en/dev/topics/http/middleware/) ://docs.djangoproject.com/en/dev/topics/http/middleware/ ）

# 问题 2：

预热请求（请参阅：[https](https://developers.google.com/appengine/docs/python/config/appconfig#Warmup_Requests) ://developers.google.com/appengine/docs/python/config/appconfig#Warmup_Requests ）

虽然由于预热请求不能保证运行，但您可以放置​​一个全局变量来让实例知道它是否已“初始化”并在每次页面加载时检查该变量（这将很便宜，因为该变量将存在于内存中并存在于要求）。如果未设置，则根据需要运行“热身”。

# svn - SVN 高级概述

> ID：12222472
> 
> 赞同：-1
> 
> 时间：2012-08-31T21:05:57.890
> 
> 标签：svn, version-control, tortoisesvn

什么是日常 TortoiseSVN 使用的高级概述。例如，我创建了一个在线存储库。据我了解，我想要的功能是针对我在本地机器上所做的每一次更改，更改也应该在线发生。是什么让这个过程在 TortoiseSVN 函数方面发生？例如，我以什么顺序结帐/更新/提交等...

**有人可以给我一个关于他们如何在存储库中工作的逐步过程吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:19:08.997

有两个不同的事物存储库（您称其为“在线存储库”）和您的工作副本。工作副本是存储库（或它的一部分）的视图。

每个人都对自己的工作副本进行更改（仅通过处理文件）。当您确定您的更改是正确的（并经过测试）时，您可以通过将其发送到存储库来与其他人共享（这是提交操作）。但在提交之前，您必须拥有最新的工作副本，因此您需要（进行更新）以将存储库中的所有新更改与您的工作副本合并。

还有一件事要在本地磁盘上创建工作副本，您需要使用“checkout”命令。

还有许多其他与版本控制相关的术语，如“冲突”、“标签”、“分支”等。 [http://svnbook.red-bean.com/en/1.6/svn-book.html](http://svnbook.red-bean.com/en/1.6/svn-book.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:33:40.507

有两个存储库，它们并不相同。

有一个“服务器存储库”，它是项目的每个“修订”的集合，从项目创建到现在的每一刻。

有一个“客户端存储库”，您将在其中进行更改，其中包含来自“服务器存储库”的一个快照以及您*打算*最终放入服务器存储库的一个可能的更改集合。

这些都不应该是公开使用信息的实际位置。例如，如果您在 SVN 中维护一组网页，则客户端存储库或服务器存储库都不应与 Web 服务器提供的网页位于同一目录。要将内容“投入生产”，应该检查一个新的干净客户端存储库副本，然后“构建”一个分发版，并将*其*放置在 Web 服务器上。“构建一个发行版”可以像构建一个 zip 文件减去`.svn`目录；但是，这是一个重要的步骤，就像您使用客户端存储库一样，您冒着保留未签入 svn 服务器的 Web 服务器中的更改的风险。我离题了，但那是因为“在线存储库”这个词有时对于有经验的 SVN 用户和刚开始使用 SVN 的人来说意味着截然不同的东西。

我会向您指出 red-bean.com 上的 svn 书，但有人已经这样做了。阅读前几章。它在提供 SVN 概览方面做得非常出色。如果您有一个更具体的问题，在阅读了这些章节之后，您也许可以用能够得到更好、更具体的回答的术语来构建它。

# java - 确定下次触发 ScheduledExecutorService 的时间

> ID：12222474
> 
> 赞同：8
> 
> 时间：2012-08-31T21:06:08.090
> 
> 标签：java, android

有没有办法确定 ScheduledExecutorService 下次何时触发的当前毫秒或其他时间度量？

```
scheduleTaskExecutorUpdate = Executors.newSingleThreadScheduledExecutor(); 
```

我的运行时间更长，`ScheduledExecutorService(A)`而从更短的运行时间开始，`ScheduledExecutorService(B)`我想更新一个 TextView，显示`ScheduledExecutorService(A)`下一次触发时间的倒计时。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T21:14:00.863

如果您跟踪[`ScheduledFuture`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledFuture.html)执行程序安排的所有任务的 s，那么可以。这变成了确定下一个任务必须触发之前的最小延迟的问题，这应该是一个相当可靠的估计。

```
final Collection<ScheduledFuture<?>> futures = ...;
/* for each schedule, add it to the above collection */
...
final long delay = Collections.min(futures).getDelay(TimeUnit.MILLISECONDS); 
```

...或者，对于一项任务，您只需执行以下操作：

```
final ScheduledFuture<?> future = ...;
final long delay = future.getDelay(TimeUnit.MILLISECONDS); 
```

现在，如果你要做*很多事情*，有多个任务，我建议你维护一个[`DelayQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/DelayQueue.html). 但是，您不能只将`ScheduledFuture`s 放入队列中而不维护周期性任务引起的更改。幸运的是，这个类应该通过它的方法[`ScheduledThreadPoolExecutor`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#ScheduledThreadPoolExecutor%28int%29)很好地处理这个问题。[`decorateTask`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#decorateTask(java.lang.Runnable,%20java.util.concurrent.RunnableScheduledFuture))

请注意，这意味着您需要直接创建自己的`ScheduledThreadPoolExecutor`。像下面这样的东西可能会起作用。

```
public class TrackingSingleThreadScheduledExecutor
    extends ScheduledThreadPoolExecutor {

  private final DelayQueue<ScheduledFuture<?>> tasks
      = new DelayQueue<RunnableScheduledFuture<?>>();

  public TrackingSingleThreadScheduledExecutor() {
    super(1);
  }

  public DelayQueue<? extends ScheduledFuture<V>> tasks() {
    return tasks;
  }

  public ScheduledFuture<V> next() {
    return tasks.peek();
  }

  protected <V> RunnableScheduledFuture<V> decorateTask
      (final Callable<V> callable, final RunnableScheduledFuture<V> task) {
    return new QueueAwareTask(task);
  }

  protected <V> RunnableScheduledFuture<V> decorateTask
      (final Runnable runnable, final RunnableScheduledFuture<V> task) {
    return new QueueAwareTask(task);
  }

  private final class QueueAwareTask<V> implements RunnableScheduledFuture<V> {

    private final RunnableScheduledFuture<V> inner;

    public QueueAwareTask(final RunnableScheduledFuture<V> inner) {
      this.inner = inner;
    }

    public boolean isPeriodic() {
      return inner.isPeriodic();
    }

    public long getDelay(final TimeUnit unit) {
      return inner.getDelay(unit);
    }

    public void run() {
      inner.run();
      if (queue.remove(inner) && inner.isPeriodic()
          && !inner.isCancelled()) {
        queue.add(inner);
      }
    }

    public int compareTo(final Delayed other) {
      return inner.compareTo(other);
    }

    public boolean cancel(final boolean mayInterruptIfRunning) {
      final boolean cancelled = inner.cancel(mayInterruptIfRunning);
      if (cancelled) {
        queue.remove(inner);
      }
      return cancelled;
    }

    public boolean isCancelled() {
      return inner.isCancelled();
    }

    public boolean isDone() {
      return inner.isDone();
    }

    public V get() throws InterruptedException, ExecutionException {
      return inner.get();
    }

    public V get(final long timeout, final TimeUnit unit)
        throws InterruptedException, ExecutionException {
      return inner.get(timeout, unit);
    }
  }
} 
```

然后，用法如下。

```
final TrackingSingleThreadScheduledExecutor executor
    = new TrackingSingleThreadScheduledExecutor();
...
final long delay = executor.next().getDelay(TimeUnit.MILLISECONDS); 
```

# javascript - Aloha Editor 无法在 Opera 上运行，有时也无法在 Chrome 上运行

> ID：12222475
> 
> 赞同：1
> 
> 时间：2012-08-31T21:06:11.087
> 
> 标签：javascript, jquery, aloha-editor

我一直在使用 Aloha Editor 创建[一个简单编辑器的示例](https://github.com/pereorga/infinite-docs)，但我还没有成功地让它在 Opera 中工作。菜单不出现，文本区域不可编辑。

在所有其他浏览器中似乎工作正常，但有时 Chrome 需要刷新页面才能工作。

这是相关的 HTML 代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="//cdn.aloha-editor.org/latest/css/aloha.css" rel="stylesheet" media="screen" />
</head>
<body>
    <textarea id="content"></textarea>
    <script src="//cdn.aloha-editor.org/latest/lib/require.js"></script>
    <script src="//cdn.aloha-editor.org/latest/lib/aloha.js" data-aloha-plugins="common/ui,common/format,common/table,common/list,common/link,common/block,common/undo,common/contenthandler,common/paste"></script>
    <script src="notes.js"></script>
</body>
</html> 
```

这是 javascript 代码（在**notes.js 中**）：

```
var Aloha = window.Aloha || ( window.Aloha = {} );
Aloha.settings = { sidebar: { disabled: true } };

Aloha.ready(function () {

    Aloha.jQuery('#content').aloha();

}); 
```

提前感谢您的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T20:01:34.487

在阅读了 Inshallah 的评论后，我正在回答我自己的问题。

问题是应该在包含 Aloha 之前设置javascript 变量*Aloha*和*Aloha.settings 。*

**HTML 代码**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="//cdn.aloha-editor.org/latest/css/aloha.css" rel="stylesheet" media="screen" />
</head>
<body>
    <textarea id="content"></textarea>
    <script src="//cdn.aloha-editor.org/latest/lib/require.js"></script>
    <script>
        var Aloha = window.Aloha || ( window.Aloha = {} );
        Aloha.settings = { sidebar: { disabled: true } };
    </script>
    <script src="//cdn.aloha-editor.org/latest/lib/aloha.js" data-aloha-plugins="common/ui,common/format,common/table,common/list,common/link,common/block,common/undo,common/contenthandler,common/paste"></script>
    <script src="notes.js"></script>
</body>
</html> 
```

**Javascript 代码（在*notes.js 中*）**

```
Aloha.ready(function () {
    Aloha.jQuery('#content').aloha();
}); 
```

# javascript - .wrap() 和 .wrapAll() 的 jQuery 插件错误

> ID：12222477
> 
> 赞同：1
> 
> 时间：2012-08-31T21:06:25.857
> 
> 标签：javascript, jquery, jquery-plugins

> **注意：**我已经解决了这个问题的主要问题，但是我仍然没有工作代码，因为我现在正在做的是一个完全不同的问题，我将在那里打开一个新问题解决它，然后发布这个问题的答案。我还将添加问题的链接。你可以在这里看到我目前的进展：http: [//jsbin.com/upatus/2/edit](http://jsbin.com/upatus/2/edit)

我正在编写两个基本的 jQuery 插件，`$.fn.query`它们`$.fn.build`分别对数组进行排序，并创建要插入到文档中的 html 代码。我目前正在使用将用于显示视频的 Vimeo 视频 ID 对其进行测试。

`$.fn.query`工作正常，我收到以下代码错误

```
$.fn.build = function(params) {

    // Parameters //
    var options = $.extend( {
            'wrapAll'  : undefined,
            'splitBy'  : undefined,
            'wrapRow'  : undefined,
            'wrapEach' : '<div>'
        }, params),
        build;

    // Wrap Each //
    if (options.wrapEach !== undefined) {
        build = this.wrap(options.wrapEach);
    }

    // Split into Rows //
    if (options.splitBy !== undefined && options.wrapRow !== undefined) {
        var tmp;
        for (var i = build.length; i > 0; i -= 3) {
            tmp = build.splice(i, i + 3).wrapAll(options.wrapRow);
        }
        build = tmp;
    }

    // Wrap All //
    if (options.wrapAll !== undefined) {
        build = build.wrapAll(options.wrapAll);
    }

    // Return Build //
    return build;
}; 
```

然后调用（两个）函数：

```
var query = $(example).query({
     shuffle: true,
       limit: 6
}).build({
     wrapAll: '<div class="container" />',
     splitBy: 3,
     wrapRow: '<div class="row" />',
    wrapEach: '<div class="span4" />'
}); 
```

导致以下错误

> 未捕获的错误：NOT_FOUND_ERR：DOM 异常 8

这并不完全有帮助，因为它显示了一个 jQuery 错误，它似乎存在于一[百万个不同的地方](https://stackoverflow.com/search?q=Uncaught%20Error:%20NOT_FOUND_ERR:%20DOM%20Exception%208)。

你可以在这里看到我在 jsFiddle 上的 javascript 代码

> [http://jsfiddle.net/JamesKyle/PK2tF/](http://jsfiddle.net/JamesKyle/PK2tF/)

* * *

> **PS：**我一直在努力遵循最佳实践，所以如果你发现任何轻微的偏差，请告诉我，我会修复代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:58:18.013

我认为您将 jQuery DOM 函数与数组操作混淆了。几乎没有理由将两者链接在 jQuery 原型中，因为操作非常独立。

此外，`$.fn.build`它不会建立在调用原型之前创建的元素上，而是在其中执行一些`wrapAll`方法。为什么不带一个外部容器，并根据数据在其中构建 DOM 结构？

尝试类似：

```
$.query = function(data, options) {
    // do the array thingie with data
    return data;
};

$.fn.build = function(data, options) {
    return this.each(function() {
        // do the DOM thingies based on data and the context element.
        // don’t use wrapAll, bring an outside element instead
    });
} 
```

接着

```
$('<div>').addClass('container').build( $.query(example), {
    splitBy: 3,
    wrapRow: '<div class="row" />',
    wrapEach: '<div class="span4" />' 
}).appendTo('body'); 
```

您还可以伪装`$.query`插件内部的调用：

```
$.fn.build = function(options) {
    options.data = $.query( options.data );
    // etc

$('<div>').addClass('container').build({
    data: example,
    splitBy: 3,
    wrapRow: '<div class="row" />',
    wrapEach: '<div class="span4" />' 
}).appendTo('body'); 
```

# html - Rails：向link_to添加一个空标签和内容

> ID：12222478
> 
> 赞同：3
> 
> 时间：2012-08-31T21:06:26.427
> 
> 标签：html, ruby-on-rails

我正在尝试使用 link_to 帮助器生成一个链接，该链接将输出以下 HTML：

```
<a href="some_url"><i class="some_class"></i>Link Name</a> 
```

但是我用来*尝试*完成此操作的代码：

```
link_to(tag("i", class: options[:icon]) + title, url) 
```

...正在输出：

```
<a href="some_url"><i class="some_class">Link Name</i></a> 
```

为什么会这样，我该如何解决？谢谢。

**编辑：**
我相信我发现了这个问题。

`<i>`标签不是 HTML5 中的自关闭标签。因此，后面的文本`i`被视为该元素的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T21:39:15.223

您是否尝试过使用 link_to 的块格式？

```
<%= link_to url do %>
  <%= tag("i", class: options[:icon]) %>
  Link Name
<% end %> 
```

根据您的需要调整它，也许您会得到您想要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:34:32.733

这是我在我的应用程序中使用的图标标签助手，我经常将它作为第一个参数传递给 link_to，它既可用于单独创建图标标签，也可用于创建图标标签后跟文本。

```
 def icon_tag(icon, *args)
    options = args.extract_options!
    text = args.first || options.delete(:text)
    if text.nil?
      content_tag :i, "", class: ["icon", "icon-#{icon}"] + options[:class].to_a
    else
      "#{icon_tag icon} #{text}".html_safe
    end
  end 
```

# jstl - 是否有一种简洁的方法可以在 JSTL 中构造一个保留 URL 变量的路径？

> ID：12222480
> 
> 赞同：1
> 
> 时间：2012-08-31T21:06:28.853
> 
> 标签：jstl

我正在寻找一种在 JSTL 中构造一个新 URL 的方法，该 URL 包含来自当前 URL 的 URL 变量。我本以为这是一种常见的需求，并且有一种简单的方法可以做到这一点，但是我的 Googlin' 和 DuckDuckGoin' 空了。

例如，在显示分页数据表的页面上，您可能希望在导航到下一页数据时在 URL 变量中保留表的列排序。

我一直在检查`c:url`，`spring:url`但没有找到任何内置的东西来保存 URL 变量。

目前，我正在遍历`param`隐式对象并手动构建 URL，但这很可怕，我希望并乞求更好的方法。类似`preserveCurrentParams`下面的属性将是盛大的：

```
<spring:url value="" var="myURLpath" preserveCurrentParams="true">
    <spring:param name="param1" value="${param1Value}" />
    <spring:param name="param2" value="${param2Value}" />
</spring:url> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T15:01:40.977

我只会使用`c:url`：

```
<c:url value="./?myparam=a" var="myurl">
  <c:param name="myparam" value="b"/>
</c:url> 
```

这确实会产生一个带有两个`myparam`参数的 URL：

```
./?myparam=b&myparam=a 
```

但是，如果您阅读参数：

```
<c:out value="${param.myparam}"/> 
```

结果是：

```
b 
```

# lucene - Lucene 不返回复杂查询的偏移量

> ID：12222482
> 
> 赞同：0
> 
> 时间：2012-08-31T21:06:33.027
> 
> 标签：lucene

我正在使用 Lucene 在我的 android 应用程序中进行搜索，但是当我运行复杂查询时，它不会返回术语的偏移量。

例如：

```
+content:"word" +(personid:NULL personid:123)
+content:"word" +(personid:NULL)
+content:"word" -personid:123 
```

不会返回“单词”的任何偏移量。

```
+content:word 
```

将返回偏移量。

这是我在每个字段中存储的内容

```
 doc.add(new Field(PERSON_ID_FIELD, request.getPersonId(), Field.Store.YES, Field.Index.NOT_ANALYZED));
 // we don't actually store the content here
 doc.add(new Field(CONTENT_FIELD, request.getContent(), Field.Store.NO, Field.Index.ANALYZED, Field.TermVector.WITH_OFFSETS)); 
```

我错过了什么吗？我需要在查询中做些什么来获取偏移量吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:42:11.680

如果尝试从内容字段中获取术语的偏移量，`personid`则它不会返回任何偏移量。然后，通过不遍历查询中的整个术语列表，永远不会到达查询的内容术语。因此不返回偏移量。

# jquery - 为什么要为 scrollTop 使用 'html, body' 而不仅仅是 'html'

> ID：12222485
> 
> 赞同：25
> 
> 时间：2012-08-31T21:07:00.927
> 
> 标签：jquery

我从 stackoverflow 获得了一个解决方案，可以滚动到页面顶部，例如

```
$('html, body').animate({scrollTop: $("#page").offset().top}, 2000); 
```

但我不知道为什么要使用 'html, body' 作为 scrollTop 而不仅仅是 'html' ？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-31T21:09:31.183

一些浏览器将“整体”滚动应用于`document.documentElement`（`<html>`元素）而其他浏览器应用于`document.body`（`<body>`元素）。为了与两者兼容，您必须对两者都应用滚动。

# ms-access - 如何连接到系统 ODBC 连接是 Windows 7 上的 Access 2010

> ID：12222486
> 
> 赞同：2
> 
> 时间：2012-08-31T21:07:21.193
> 
> 标签：ms-access, odbc, ms-access-2010

我正在尝试将 Access DB（2010 32 位）连接到 Windows 7 PC（64 位）上的系统 ODBC 连接

但是，当我尝试为其链接到机器数据源时，我找不到我创建的 ODBC 数据源。

我知道 32 位应用程序和 64 位驱动程序之间存在问题。并且有两个版本的 ODBC Datasource Administrator

*   C:\Windows\SysWOW64\odbcad32.exe
*   C:\Windows\System32\odbcad32.exe

我都尝试过，但似乎都无法创建对我可见的 ODBC 源。我怎样才能得到这个工作？

注意：用户数据源似乎工作正常，但系统数据源却不行。

我正在使用的数据源是单独机器上的 MS SQL Server 2008 数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T07:11:34.347

您是否尝试过从 Access 制作一个？当您选择外部数据源 odbc 时，您有机会从 Access 内部创建 DSN。并且您可以在那个时间点创建一个系统 DSN。（Access 将为您启动正确版本的 ODBC 管理器）。

因为 Access 是 32 位的，所以这些系统 DSN 的位置如下：

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\ODBC\ODBC.INI\SYSTEM DSN 的名称

所以你必须启动 32 位版本。

（但是，让 Access 为您启动它真的要容易得多）。

所以，如果你启动 32 位版本的 ODBC 管理器，这个：

C:\Windows\SysWOW64\odbcad32.exe

那么你应该没问题（所以不要使用控制面板中的那个）。

因此，如果您使用 32 位版本（来自 sysWOW 的版本）创建系统 DSN，那么当您启动同一个 odbc 管理器时，您应该在 Access 中看到它。你看到这个：

![在此处输入图像描述](../Images/7d9e312679ff664c9defae7bd09cb8b0.png)

在上面，我创建了两个系统 DSN，一个来自让 Access 启动管理器，另一个来自 cmd 提示符下的 syswow 版本 - 无论哪种方式，您都应该看到这个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-01T02:32:59.693

设置 ODBC 数据源的快捷方式很可能是指向 32 位数据源而不是 64 位。

转到控制面板->管理工具->选择数据源（ODBC）->然后右键单击该文件->转到属性->在快捷方式选项卡中->从%windir%\System32更改路径\odbcad32.exe 到

%windir%\SysWOW64\odbcad32.exe

并建立您的联系。MS Access 的驱动程序现在可以正常工作了。

# scala - Scala 是否有其他下载位置？

> ID：12222487
> 
> 赞同：3
> 
> 时间：2012-08-31T21:07:22.263
> 
> 标签：scala

我一直在尝试从[http://www.scala-lang.org/downloads/distrib/files/](http://www.scala-lang.org/downloads/distrib/files/) * 中获取 .MSI 或 .ZIP，但它非常慢，并且实际上会在一段时间后停止下载。我搜索了镜像，但即使是像 Softpedia 这样的地方也只是链接回 scala-lang.org。

我能够从 Akka.io 获取 scala-library.jar，但我认为这不足以使用该语言（或者我没有用 ? 错误地实例化它`java -jar`？）。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T21:24:28.577

您可以下载[类型安全堆栈](http://www.typesafe.com/stack)

如果您在 Mac OS-X 上并且正在使用[自制软件](http://brew.sh)，您可以使用

```
% brew install scala
% brew install typesafe activator
% brew install sbt 
```

（或等效端口）

# c++ - 使用 std::ref 参数调用 std::bind(ed) 函数

> ID：12222495
> 
> 赞同：2
> 
> 时间：2012-08-31T21:08:19.187
> 
> 标签：c++, c++11

```
#include <functional>
#include <iostream>

struct Test
{
    void fnc(int & a) { ++a; }
};

int main ()
{
    typedef std::function<void(int)> Func;

    int i = 0;
    Test t;
    Func f = std::bind(&Test::fnc, &t, std::ref(i));
    //f(); //error C2064: term does not evaluate to a function taking 0 arguments
    f(37); //Here I am forced to pass evidently unused int
    std::cout << i;
} 
```

我用对了吗？

真的有必要传递一些随机整数吗？

如果是这样，那是为什么？那是因为模板的魔力是有限的，我实际上必须将 int 传递给采用 int 的函数还是出于某些目的而设计？（例如，强制用户不要忘记函数的声明已经是什么样子？）

我用vs2012

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T21:14:23.840

不不不：你所拥有的是一个接受*零*参数的函数，因为一切都已经绑定了！您需要以下两种之一：

```
std::function<void()> f = std::bind(&Test::fnc, &t, std::ref(i));

std::function<void(int&)> g = std::bind(&Test::fnc, &t, std::placeholders::_1); 
```

现在有以下两个效果`t.fnc(i)`：

```
f();  // OK, bound to `i` always.

g(i); // Same effect 
```

请注意，如果可能，您应该将绑定函数声明为`auto`，这样更有效。第三个选项是闭包表达式，`[&i,&t](){t.fnc(i);}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:18:48.367

您必须在两个地方查看参数：在对 的调用中`bind()`，参数成为绑定对象的一部分；在对绑定对象本身的调用中，参数被传递给在原始文件中建立的占位符打电话给`bind()`. 在此处的示例中，对 的调用中没有占位符`bind()`，因此对绑定对象的调用中不需要任何参数。如果你用比它需要的更多的参数调用它，多余的参数将被忽略。

此处的代码通过将绑定对象包装在一个`std::function`对象中来为绑定对象添加一个层。为对象定义的签名`std::function`（此处为`std::function<void(int)>`）确定如何调用该对象：它接受一个类型的参数`int`并将该值传递给绑定对象，该对象忽略它。

# wordpress - 在输入密码之前隐藏受密码保护的帖子上的 Disqus？

> ID：12222498
> 
> 赞同：1
> 
> 时间：2012-08-31T21:08:35.827
> 
> 标签：wordpress, password-protection, disqus

我需要隐藏 Disqus 对受密码保护的帖子的评论，直到用户输入正确的密码。我已经就这个问题联系了 Disqus……首先他们告诉我启用 disqus_developer 变量。所以我在 Wordpress 的 header.php 中添加了这个：

```
<script type="text/javascript">
var disqus_developer = 1; // developer mode is on
</script> 
```

但这并没有做任何事情。然后 Disqus 支持告诉我：

> 您必须在代码中添加一些逻辑，除非输入密码，否则不会加载 Disqus。这是您需要在主题/模板中自定义的内容。

他们没有给出如何实现这一目标的方向。我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:43:42.787

只需编辑 plugins/disqus-comment-system/comments.php 并在该文件开头的某处添加以下代码：

```
<?php if ( post_password_required() ) { ?>
<p class="nocomments">Whatever text you want.</p>
        <?php
                return;
         } ?> 
```

# ruby-on-rails - 方法上的引导工具提示 =>：删除 Rails 中的链接

> ID：12222500
> 
> 赞同：11
> 
> 时间：2012-08-31T21:08:53.470
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在使用`method: :delete`rails 中的链接，并尝试在其上获取引导工具提示。

这不显示工具提示：

```
=link_to "destroy", blog_path(blog), "data-original-title" => "Delete your answer", "data-placement" => "top", :rel => "tooltip", method: :delete 
```

但是，如果我删除`method: :delete`，则工具提示有效。

如何在删除链接上获得工具提示？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T17:34:57.590

这是一个 JQuery 选择器问题。

如果你使用类似的东西：

```
$('a[rel="tooltip"]').tooltip(); 
```

您告诉 JQuery 选择器仅采用具有 rel 属性且仅具有**“工具提示”**值的元素。

所以我相信你正在寻找的是这段代码。

```
$('a[rel~="tooltip"]').tooltip(); 
```

因此，现在 JQuery 将获取所有在**rel**属性中具有**“工具提示”**字样的元素。

 **更多信息如下。

[http://api.jquery.com/attribute-contains-word-selector/](http://api.jquery.com/attribute-contains-word-selector/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T10:12:07.410

我有同样的问题，没有找到任何合适的解决方案，所以我开始自己修补它。

如果您删除`:rel => "tooltip"`并添加其他任何内容，例如`:rel => "nofollow"`，然后`$('a[rel="nofollow"]').tooltip()`手动调用它就可以工作。

这是最终结果：

```
<%= link_to "destroy", blog_path(blog), "data-original-title" => "Delete your answer", "data-placement" => "top", :rel => "nofollow", method: :delete %> 
```

并在此之后添加代码以显示工具提示：

```
<script type="text/javascript">
  $(function() {
    $('a[rel="nofollow"]').tooltip();
  });
</script> 
```

**编辑**：这不再是问题了。**

# c# - 添加进度条以指示文件已完成处理

> ID：12222503
> 
> 赞同：-4
> 
> 时间：2012-08-31T21:09:15.610
> 
> 标签：c#, .net, progress-bar

我是 C# 编程的新手，我很难在我的项目文件上放置进度条。你能帮我解决这个问题吗？

下面是我的代码：

```
try
{
    lblUpdate.Visible = true;
    lblUpdate.Refresh();

    string[] filenames = Directory.GetFiles(sTargetFolderPath);

    // Zip up the files - From SharpZipLib Demo Code
    using (ZipOutputStream s = new ZipOutputStream(File.Create(lblSaveTo.Text + "\\" + sZipFileName + ".pld")))
    {
        s.SetLevel(9); // 0-9, 9 being the highest level of compression

        byte[] buffer = new byte[4096];

        foreach (string file in filenames)
        {

            ZipEntry entry = new ZipEntry(Path.GetFileName(file));

            entry.DateTime = DateTime.Now;
            s.PutNextEntry(entry);

            using (FileStream fs = File.OpenRead(file))
            {
                int sourceBytes;
                do
                {
                    sourceBytes = fs.Read(buffer, 0, buffer.Length);
                    s.Write(buffer, 0, sourceBytes);

                } while (sourceBytes > 0);
            }
        }
        s.Finish();
        s.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:48:09.640

您必须使用后台工作人员以便在处理 DoWork 方法中设置的文件时不冻结 UI 您的进程并使用 Progress 事件在此处设置 进度[条](http://www.dotnetperls.com/progressbar)progressbar 文件数的最大属性，即文件名。长度

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            Shown += new EventHandler(Form1_Shown);

            // To report progress from the background worker we need to set this property
            backgroundWorker1.WorkerReportsProgress = true;
            // This event will be raised on the worker thread when the worker starts
            backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
            // This event will be raised when we call ReportProgress
            backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
        }
        void Form1_Shown(object sender, EventArgs e)
        {
            // Start the background worker
            backgroundWorker1.RunWorkerAsync();
        }
        // On worker thread so do our thing!
        void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
           int i = 0; 
            foreach (string file in filenames)    
            {
                i++;
                // Report progress to 'UI' thread
                backgroundWorker1.ReportProgress(i);
               // Your background task goes here zip files
            }
        }
        // Back on the 'UI' thread so we can update the progress bar
        void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            // The progress percentage is a property of e
            progressBar1.Value = e.ProgressPercentage;
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T22:21:30.480

从工具书中制作一个进度条对象（只需拖放{或者您可以通过任何您想要的代码自己制作一个}）

然后取你运行的文件数，(100 / nNumOfFiles) 并按这个量来推进这个循环的每次迭代这里是编译的代码，其中“prbProgressBar”是进度条

```
 try
{

lblUpdate.Visible = true;
lblUpdate.Refresh();
string[] filenames = Directory.GetFiles(sTargetFolderPath);

// Zip up the files - From SharpZipLib Demo Code
using (ZipOutputStream s = new ZipOutputStream(File.Create(lblSaveTo.Text + "\\" + sZipFileName + ".pld")))
{
    s.SetLevel(9); // 0-9, 9 being the highest level of compression

    byte[] buffer = new byte[4096];
    int nPercentToAdvance = (100 / filenames.Length);
    foreach (string file in filenames)
    {

        ZipEntry entry = new ZipEntry(Path.GetFileName(file));

        entry.DateTime = DateTime.Now;
        s.PutNextEntry(entry);

        using (FileStream fs = File.OpenRead(file))
        {
            int sourceBytes;
            do
            {
                sourceBytes = fs.Read(buffer, 0, buffer.Length);
                s.Write(buffer, 0, sourceBytes);

            } while (sourceBytes > 0);
        }

        this.prbProgressBar.Value += nPercentToAdvance;
    }
    s.Finish();
    s.Close();
} 
```

}

# css - div 元素中链接之间的空间

> ID：12222508
> 
> 赞同：0
> 
> 时间：2012-08-31T21:09:38.947
> 
> 标签：css, html

我是使用 div 标签的新手，我一直在努力解决这个问题。我已经搜索了几个小时，但似乎找不到一个好的解决方案。

我目前正在一个 div 元素中制作水平菜单。我不能使用嵌套在一个中的多个 div 元素，因为这会在我调整浏览器大小时导致元素换行。我不能使用 float:left 因为当我调整浏览器大小时这也会导致元素换行。

我已经测试了上述和其他多个代码片段，但我无法删除菜单中链接之间的空格。这是我的代码。

```
<div style=" display:inline-block; width:100%; padding: 0.1em 0.6em; border-collapse:collapse; max-height:100px; margin-top:-1px; margin-left:30%; overflow-y:hidden;">

<img src="logo.png" />
<img src="cornerthing4.png" /><a href="index.php"><img src="homebtn.png"></a><a href="index.php"><img src="faqbtn.png"></a><img src="cornerthing3.png">

</div> 
```

我正在使用样式标签，因为我现在正在尝试设计页面，我将在完成后将 css 代码移动到 css 文件中。

`<a href>`删除标签后，图像并排放置在我想要的位置。我一贴上标签，它们之间就会获得 20 像素的空间。

关于为什么会发生这种情况以及如何纠正它的任何见解都会很棒。

编辑：代码在 jfiddle 中工作，但是，它在我的网站上不起作用。这是该网站的链接：http: [//matxor.net/header.php](http://matxor.net/header.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:29:21.737

Your **a** style has a margin. This margin is not present in the markup you pasted here. Is that what you're trying to get rid of?

```
a:link {
  margin-left: 30px;
  color: #0A58A5;
  text-decoration: none;
  font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:29:45.923

Take the `margin-left:30px` rule off `<a>` tags and it will look how you want it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T21:26:04.827

> 我目前正在一个 div 元素中制作水平菜单。我不能使用嵌套在一个中的多个 div 元素，因为这会在我调整浏览器大小时导致元素换行。我不能使用 float:left 因为当我调整浏览器大小时这也会导致元素换行。

你当然可以！

[http://jsfiddle.net/charlescarver/fY48A/](http://jsfiddle.net/charlescarver/fY48A/)

在这个例子中，元素不会自己包裹，容器 div 仍然`100%`是宽度。

# openjpa - WAS7 上的 OpenJPA - 随机选择错误地不返回任何行

> ID：12222513
> 
> 赞同：0
> 
> 时间：2012-08-31T21:10:09.070
> 
> 标签：openjpa, websphere-7

第一次问问题...感谢您的好意:-)

我编写了一个 Web 服务，它使用 openjpa 1.2.2 针对 oracle 11g 数据库检索结果。我将服务部署到 WAS 7。

该服务在一次运行一个时运行良好，甚至在针对单节点 WAS7 实例运行时看起来也不错。

当我转到 4 节点 WAS ND 实例时会出现问题。当应用负载时（每秒 3-20 个请求），我发现我平均一个请求在每 1000 个请求中错误地返回一个空结果。日志中没有异常 - 只是 findById 方法的一个空结果。

这可能是一个调优问题，无论是在 JPA 中还是在数据库端？会不会是别的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:37:48.800

解决了我自己的问题。对 SimpleDateFormat 的静态调用对我的代码造成了严重破坏。在必要时将它们移动到同步块中消除了问题。

# security - TCP IP的缺点

> ID：12222521
> 
> 赞同：-2
> 
> 时间：2012-08-31T21:11:45.037
> 
> 标签：security, tcp-ip

在我问任何问题之前，我了解： 1\. 传输控制协议 (TCP) 在 IP 之上运行，

1.  TCP 提供有保证的传递，并确保数据包按顺序传递。

2.  底层网络IP，高度不可靠，不为TCP提供任何保证。

3.  我不是网络专家。

我一直在阅读 CHRIS CHAMBERS、JUSTIN DOLSKE 和 JAYARAMAN IYER 关于[TCP IP 安全性（当今互联网的基础）的](http://www.linuxsecurity.com/resource_files/documentation/tcpip-security.html)一篇有趣的详细安全性文章；不幸的是，它甚至缺乏最基本的安全机制。

我知道 TCP 和 IP 协议是在“互联网”很小的时候设计的，用户通常相互信任。在大多数情况下，所指的两种协议是：用于 IP 的 RFC [RFC 791] 和 TCP [RFC 793]。

正如所讨论的，“由于网络是动态的，来自同一源的两个数据报可能采用不同的路径到达目的地”，以及“IP 只尝试尽最大努力交付。它不考虑丢失数据包；这留给更高层的协议。两个数据报之间没有维护状态；换句话说，IP 是无连接的......”。

在其他许多问题中，没有一个 IP 字段是加密的，也没有身份验证（请注意，这在 IP6 中已部分修复）。

是否有针对 TCP/IP 4 弱点的“真正”修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:19:30.770

这不是弱点，而是设计实现。交付层本身并不关心数据包如何到达目的地。由接收方通知发送方任何丢失的数据包需要重新发送。

想象一下，如果数据包同时采用所有可能的路径。即使使用光纤，流量也会如此之高，以至于我们可能会获得拨号速度。

加密 IP 字段也没有任何意义，因为路由器必须能够读取它们。如果它们被加密并且路由器没有正确的解密算法，则数据包将作为垃圾丢弃。如果路由器确实进行了解密，那么该算法将很容易获得/破解，以至于一开始就没有任何意义。

您可能对此 IP 封装安全有效负载[备忘录感兴趣](https://www.rfc-editor.org/rfc/rfc1827)

# mysql - MySQL 三重连接

> ID：12222525
> 
> 赞同：16
> 
> 时间：2012-08-31T21:11:52.943
> 
> 标签：mysql

我很难构建三重连接查询。

我有三张桌子：

**房子：**

```
house ID(key) | Address | personID | 
```

**人：**

```
personID (key) | Name | Address | 
```

**图片：** //房子

```
imageID (key) | personID | url | 
```

我想将结果限制为**5**。

我想查询房屋地址-es（主要），它是业主姓名和地址，以及业主的一张照片。

注意：每个人最多有 3 张图像（图像表中的 3 行），但只需要一张，不管是哪一张。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-31T21:32:01.563

```
SELECT h.Address, p.Name, p.Address as OwnerAddress, i.url FROM house AS h
INNER JOIN person AS p ON p.personID = h.personID
INNER JOIN images AS i ON i.personID = p.personID
GROUP BY h.houseID 
```

应该为你工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T19:47:28.873

也许你最好使用 LEFT OUTER JOIN，比如

```
SELECT
   h.Address  as `h_address`,
   p.Name     as `p_name`,
   p.Address  as `p_address`,
   i.url      as `i_url`
FROM house AS `h`
   LEFT OUTER JOIN person AS `p` ON (p.personID = h.personID)
   LEFT OUTER JOIN images AS `i` ON (p.personID = i.personID)
GROUP BY h.houseID 
```

它还会显示没有注册图像的房屋。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-04T08:54:57.147

连接三个表

IE：

```
select i_f.*, i_f_d.* , i_f_c.creator_name 
  from indent_form i_f 
  join indent_form_details i_f_d on i_f.id=i_f_d.ind_id 
  join indent_form_creator i_f_c on i_f.user_id=i_f_c.id

indent_form table 1,
indent_form_details table 2,
indent_form_creator table 3, 
```

# extjs - 在 CF 查询中使用 ExtJS DateField

> ID：12222526
> 
> 赞同：1
> 
> 时间：2012-08-31T21:11:59.960
> 
> 标签：extjs, coldfusion, datepicker

我在**date.js**中使用了这样的 Ext DateField （我只能在此处访问 Ext 2.2，在 JRun4 上只能访问 CF 7,0,2,142559）：

```
function initCalendars() {
var textFields = Ext.query('.ExtDateField');
var dateFields = [];
Ext.each(textFields, function(textField) {
    var dateField = new Ext.form.DateField({
        allowBlank:false,
        format:'Y-m-d',
        applyTo: textField
    });
    dateFields.push(dateField)
});
}

Ext.onReady(initCalendars, this); 
```

我在网上找到了这个简单的解决方案，但现在我需要从**order.cfm**获取我的 CF 查询的日期......

```
<form id="commForm">
<label for="date1">Pick a Date... </label>
<input class="ExtDateField" type='text' name='date1' value=""/>
<input type="submit" name="submit" value="Search">
<br>
<br>

</form>

<cfinvoke 
    component="MyComponent" 
    method="getMethod"  
    returnvariable="commlist">
        <cfinvokeargument name="order_dt" value="?????????">
</cfinvoke> 
```

我不知道用什么值来将它发送到查询。我尝试了#date1.getValue#、#commForm.date1.getValue# 和“commForm.date1.getValue”并得到 CF 错误，告诉我 order_dt 不是日期类型或 date1 未定义。可能是一些基本的东西，但我无法弄清楚。

当我手动输入日期时，.cfc 工作正常，如果可以的话，我真的很想让日期选择器工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:23:46.417

没关系……我疯了。我会删除它，但也许有人可以从我的错误中受益。我需要使用 URL 范围....

```
#url.date1# 
```

工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:32:26.350

您是指表单范围（不是网址）吗？#form.date1# 从您的示例代码看来，该值正在表单范围内传递。

顺便说一句，请不要像这样直接在代码中使用表单或 url 范围变量。它会打开你的攻击。在使用它们之前对值进行清理。

# azure - Web API 身份验证最佳实践

> ID：12222527
> 
> 赞同：22
> 
> 时间：2012-08-31T21:12:11.297
> 
> 标签：azure, architecture, asp.net-web-api, security

考虑到数据安全性至关重要且 ASP.NET 应用程序在 Azure 上运行，哪一种是 Web API 的最佳身份验证方法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-31T21:46:27.277

在处理身份验证和保护您的 Web API 时，我建议您遵循 Dominick Baier 设置的准则。世界上可能没有比 ASP.NET 身份管理更好的专家了。

[你可以在http://leastprivilege.com/](http://leastprivilege.com/)找到他的博客，在 Nuget 找到一个很棒的 Web API 身份包，Thinktecture.IdentityModel - [http://nuget.org/packages/Thinktecture.IdentityModel](http://nuget.org/packages/Thinktecture.IdentityModel) 与大多数优秀的开源库一样，由于您可以免费使用所有功能，因此无需重新发明轮子。

这是一个用于 .NET 4.0/WIF 和 .NET 4.5（包括对 MVC 和 Web API 的支持）的自上而下的身份和访问控制库。

如果您想了解有关保护 Web API 的更多信息，还应该观看此视频[http://vimeo.com/43603474](http://vimeo.com/43603474) - Dominick 在 NDC Oslo 2012 上的演讲。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T21:49:39.113

像这样的问题非常“开放”，这完全取决于您项目的要求。如果你想要安全，你应该考虑不同安全措施的组合。

以 HTTPS 与[多因素身份验证](http://en.wikipedia.org/wiki/Multi-factor_authentication)相结合。一个示例是客户端证书身份验证（存储在加密狗上的私钥）和基本身份验证（用户名/密码）。这可以确保即使恶意人员获得了用户名和密码，他也无法在没有硬件加密狗的情况下访问应用程序。反之亦然，即使硬件令牌被盗，在不知道用户名和密码的情况下也将毫无用处。

这些可能是一些很好的博客文章，可以帮助您入门：

*   [使您的 ASP.NET Web API 安全](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)
*   [使用客户端证书保护 ASP.NET WebAPI](http://woloski.com/2012/08/04/securing-aspnet-webapi-with-clientcerts/)

即使这通常适用于 Web，您也应该先阅读[OWASP Top 10 for .NET 开发人员](http://www.troyhunt.com/2011/12/free-ebook-owasp-top-10-for-net.html)，然后再继续阅读其他内容。

# php - 无法访问新服务器上的文件上传

> ID：12222533
> 
> 赞同：0
> 
> 时间：2012-08-31T21:13:10.510
> 
> 标签：php, ios, ubuntu, apache2

我最近刚刚将我的本地 MAMP 安装移动到我的实时 Ubuntu EC2 服务器上，而且我在访问文件上传时遇到了麻烦。一切看起来都应该可以正常工作，但我不知道为什么不行。我在 php.ini 中最大上传了 5MB，这对于上传照片应该足够了，所以我知道不是这样。没有更改默认目录，但我想也许我应该将域作为具有 2 个其他域的 Apache 虚拟主机上的域？我不想在我的 php 脚本中走这条路：

```
ini_set('upload_tmp_dir','/your-home-www/tmp/'); 
```

但是，如果虚拟主机绝对有必要处理文件的话。我很确定这不是我的代码，因为它可以在我的本地主机 MAMP 安装上完美运行，但如果有帮助，这里是处理照片的代码片段：

```
$fileTmpLoc = $photo["tmp_name"];
$fileSize = $photo["size"]; 

if (!$fileTmpLoc) { // if file not chosen
      sendResponse(404,"ERROR: Photo not sent.");
      exit;
} else if($fileSize > 5242880) { // if file size is larger than 5 Megabytes
      unlink($fileTmpLoc); // Remove the uploaded file from the PHP temp folder
      sendResponse(413, "ERROR: Your file was larger than 5 Megabytes in size.");
      exit;
} else {
$newName = "image01.jpg";

    $moveResult = copy($fileTmpLoc, "members/$id/".$newName);
    if ($moveResult != true) {
         @unlink($fileTmpLoc); 
         sendResponse(404,"ERROR: File not uploaded. Try again.");
         exit;
    }
 ....
} 
```

现在，它一直到 sendResponse(404,"ERROR: File not upload. Try again.");，所以它可能与 tmp 文件无关，但它仍然没有上传。并且用户的 members 目录和 $id 目录都设置为 777，所以我真的不知道发生了什么。这是来自 IOS 客户端，而不是 html 表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:34:05.263

您必须使用标准的 PHP 函数

```
move_uploaded_file() 
```

将上传的文件移动到其位置。

# asp.net - 抛出要在 Global.asax 的 Application_Error 处理程序中处理的所有错误

> ID：12222537
> 
> 赞同：0
> 
> 时间：2012-08-31T21:13:38.520
> 
> 标签：asp.net, exception, error-handling, application-error

我想将所有表单错误都扔到事件日志中。为此，我向 Application_Error 处理程序添加了代码，以将错误文本发送到事件日志。我想知道如何在不破坏页面生命周期的正常流程的情况下抛出异常以在 Application_Handler 中捕获。

我尝试简单地抛出ApplicationException：

```
throw new ApplicationException(String.Format("Http Request failed. {0}", userStatusErrorMessage)); 
```

它的工作原理是将错误详细信息添加到事件日志中，但引发异常的页面在引发错误后没有显示任何内容。它是空白的。

有任何想法吗？非常感激。谢谢你，周末快乐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:20:02.523

如果是异常处理后页面还可以继续，那么最好远离全局。如果您想记录它，请将其记录在您捕获它的位置（如果您不使用第三方的记录框架，您仍然可以使用静态方法，因此您只需在处理程序中添加一行）。

将 global.asax 留给那些你没有抓到的人，并发送一个错误页面（500 表示“我搞砸了，我会尝试修复它，4xx 范围内的东西”你搞砸了，所以我无能为力这样做”——如果你不知道是他们的错，那是你的错；如果真的是他们的错，而你不知道，那是你不知道的错）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:21:37.583

在 global.asax 中处理异常意味着你不能继续*“不破坏页面生命周期的正常流程”*。当您想要记录异常然后重定向到配置的自定义错误页面时，这种方法很有意义。

如果您只想记录异常然后假装什么都没有发生，您必须捕获异常并在那里调用您的记录方法。但我建议反对它，因为用户应该可以看到异常。

# twitter-bootstrap - 淘汰赛验证和 Twitter 引导错误 CSS

> ID：12222538
> 
> 赞同：4
> 
> 时间：2012-08-31T21:13:40.280
> 
> 标签：twitter-bootstrap, knockout.js

我正在尝试在此编辑器中集成淘汰赛验证和 twitter 引导程序：http: [//jsfiddle.net/casudeo/Jbp7y/18](http://jsfiddle.net/casudeo/Jbp7y/18)

我想将 twitter bootstrap 的 css 应用于输入错误。为此，我需要以某种方式“走到”控制组 div 并为其添加一个“错误”类。有没有办法在不修改css文件的情况下实现这一点？

由于 dominik 在下面的评论，进一步澄清：1）单击“添加”按钮添加新项目。2）尝试使用空白值保存。3) KO 验证将捕获无效输入。但是，我还想应用一个“错误”css 类来突出显示无效字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T15:07:11.280

这是一个更新的小提琴：http: [//jsfiddle.net/jearles/Jbp7y/147/](http://jsfiddle.net/jearles/Jbp7y/147/)

HTML

```
<div><button data-bind="click: clickMe">Click Me!</button></div> 
```

JS

```
var ViewModel = function() {
    var self = this;
    self.clickMe = function(data,event) {
      var target;

      if (event.target) target = event.target;
      else if (event.srcElement) target = event.srcElement;

      if (target.nodeType == 3) // defeat Safari bug
        target = target.parentNode;

      target.parentNode.innerHTML = "something";
    }
}

ko.applyBindings(new ViewModel()); 
```

我改变的事情：

1.  将“validationElement”绑定添加到控制组 div
2.  检测到错误时添加对“showAllMessages()”的调用
3.  确保 errorElementClass 配置设置为“错误”

# ruby-on-rails - Webmock 从 API 返回响应对象？

> ID：12222542
> 
> 赞同：1
> 
> 时间：2012-08-31T21:14:04.250
> 
> 标签：ruby-on-rails, webmock

我调用一个 API，然后我在其中获取他们的 xml 并对其进行解析以返回一个`Response`对象。

调用 3rd 方 API 的典型内容。

所以现在在我的测试中，我想使用 webmock 说“当你收到访问 example.com 的请求时，只需给我一个 Response.new 对象，这样我就可以继续我的代码并处理它”。

我正在使用 rspec。这是到目前为止的代码。

测试代码为：

```
stub_request(:any, /.*blah.*/).
  with(:headers => {'Accept'=>'*/*', 'User-Agent'=>'Ruby'}).
  to_return(:status => 200, 
            :body => "#{BlahResponse.new("<?xml version=\"1.0\"?><data><type><![CDATA[success]]></type><subject><![CDATA[Info]]></subject><code>29</code><description><![CDATA[Success]]></description><meeting_id><![CDATA[awesome-455]]></meeting_id></data>")}",
            :headers => {}) 
```

错误总是导致响应不是 Nil 的方法，这意味着我没有传递任何看起来像的东西。

# android - 在 SurfaceView 上渲染 2D 对象

> ID：12222543
> 
> 赞同：1
> 
> 时间：2012-08-31T21:14:13.547
> 
> 标签：android, opengl-es

我正在使用 OpenGLES 在 android 上学习基础知识。我在 SurfaceView 上渲染 2D 对象时遇到问题。我正在使用 3 个类：

1.  Graphic3D（名称中忽略 3D，我将使用此类进行 3D 立方体旋转）
2.  Graphic3DRenderer（实现渲染器）
3.  图形二维三角形

当我在设备（三星 i5700）上运行应用程序时，我只能看到 Graphic3DRenderer.onDrawFrame 中指定的背景颜色。没有三角形。相机位置/方向还可以（我认为..）。在调试模式下，Graphic2DTriangle 中的 draw() 方法被调用，但屏幕上什么也没有发生。

类代码：

**图形3D**

```
public class Graphic3D extends Activity{

GLSurfaceView mySurface;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mySurface = new GLSurfaceView(this);
    //mySurface.setRenderer(new Graphics3DRenderer());
    mySurface.setRenderer(new Graphics3DRenderer());

    setContentView(mySurface);
}
@Override
protected void onPause() {
    super.onPause();
    mySurface.onPause();
}
@Override
protected void onResume() {
    super.onResume();
    mySurface.onResume();
} 
```

}

**图形3DR渲染器**

```
public class Graphics3DRenderer implements Renderer{

private Graphic2DTriangle tri;
public Graphics3DRenderer()
{
    tri = new Graphic2DTriangle();      
}

public void onSurfaceCreated(GL10 gl, EGLConfig eglConfig) {

    gl.glDisable(GL10.GL_DITHER);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
    gl.glClearColor(.8f, 0f, .2f, 1f);
    gl.glClearDepthf(1f);

}

public void onDrawFrame(GL10 gl) {
    gl.glDisable(GL10.GL_DITHER);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    GLU.gluLookAt(gl, 0, 0, -5, 0, 0, 0, 0, 2f, 0); // camera position | looking direction 

    tri.draw(gl);
}

public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);
    float ratio = (float) width/height;
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glFrustumf(-ratio, ratio, -1, 1, 1, 25);

} 
```

}

**图形二维三角形**

```
public class Graphic2DTriangle {

private float vertices[] = {
        0f, 1f, //p0
        1f, -1f, //p1
        -1f, -1f //p2
};

private FloatBuffer vertBuff;
private short[] pIndex = {0, 1, 2};
private ShortBuffer pBuff;

public Graphic2DTriangle()
{
    ByteBuffer bBuff = ByteBuffer.allocateDirect(vertices.length * 4);
    bBuff.order(ByteOrder.nativeOrder());
    vertBuff = bBuff.asFloatBuffer();
    vertBuff.put(vertices);
    vertBuff.position(0);

    ByteBuffer pbBuff = ByteBuffer.allocate(pIndex.length * 2);
    pbBuff.order(ByteOrder.nativeOrder());
    pBuff = pbBuff.asShortBuffer();
    pBuff.put(pIndex);
    pBuff.position(0);
}

public void draw(GL10 gl)
{
    gl.glFrontFace(GL10.GL_CW);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertBuff);
    gl.glDrawElements(GL10.GL_TRIANGLES, pIndex.length, GL10.GL_UNSIGNED_SHORT, pBuff);

    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:04:38.357

I have found a solution for my problem, but can't find the difference. Any clues?

**Graphic3D**

```
public class Graphic3D extends Activity{

private GLSurfaceView glView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    glView = new GLSurfaceView(this);           // Allocate a GLSurfaceView
      glView.setRenderer(new Graphics3DRenderer(this)); // Use a custom renderer
      this.setContentView(glView);                // This activity sets to GLSurfaceView
   }

   // Call back when the activity is going into the background
   @Override
   protected void onPause() {
      super.onPause();
      glView.onPause();
   }

   // Call back after onPause()
   @Override
   protected void onResume() {
      super.onResume();
      glView.onResume();
   }
} 
```

**Graphic3DRenderer**

```
public class Graphics3DRenderer implements Renderer {
   Context context;   // Application's context
   Graphic2DTriangle triangle;

   // Constructor with global application context
   public Graphics3DRenderer(Context context) {
      this.context = context;
      triangle = new Graphic2DTriangle();
   }

   // Call back when the surface is first created or re-created
   public void onSurfaceCreated(GL10 gl, EGLConfig config) {
      gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);  // Set color's clear-value to black
      gl.glClearDepthf(1.0f);            // Set depth's clear-value to farthest
      gl.glEnable(GL10.GL_DEPTH_TEST);   // Enables depth-buffer for hidden surface removal
      gl.glDepthFunc(GL10.GL_LEQUAL);    // The type of depth testing to do
      gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);  // nice perspective view
      gl.glShadeModel(GL10.GL_SMOOTH);   // Enable smooth shading of color
      gl.glDisable(GL10.GL_DITHER);      // Disable dithering for better performance

      // You OpenGL|ES initialization code here
      // ......
   }

   // Call back after onSurfaceCreated() or whenever the window's size changes
   public void onSurfaceChanged(GL10 gl, int width, int height) {
      if (height == 0) height = 1;   // To prevent divide by zero
      float aspect = (float)width / height;

      // Set the viewport (display area) to cover the entire window
      gl.glViewport(0, 0, width, height);

      // Setup perspective projection, with aspect ratio matches viewport
      gl.glMatrixMode(GL10.GL_PROJECTION); // Select projection matrix
      gl.glLoadIdentity();                 // Reset projection matrix
      // Use perspective projection
      GLU.gluPerspective(gl, 45, aspect, 0.5f, 100.f);

      gl.glMatrixMode(GL10.GL_MODELVIEW);  // Select model-view matrix
      gl.glLoadIdentity();               // Reset

      // You OpenGL|ES display re-sizing code here
      // ......
   }

   // Call back to draw the current frame.
   public void onDrawFrame(GL10 gl) {
      // Clear color and depth buffers using clear-value set earlier
      gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

      gl.glLoadIdentity();                 // Reset model-view matrix ( NEW )
      GLU.gluLookAt(gl, 0, 0, -5, 0, 0, 0, 0, 2f, 0);
      // gl.glTranslatef(-1.5f, 0.0f, -6.0f); // Translate left and into the screen ( NEW )
      triangle.draw(gl);                   // Draw triangle ( NEW )
   }
} 
```

**Graphic2DTriangle**

```
public class Graphic2DTriangle {
   private FloatBuffer vertexBuffer;  // Buffer for vertex-array
   private ByteBuffer indexBuffer;    // Buffer for index-array

   private float[] vertices = {  // Vertices of the triangle
       0.0f,  1.0f, 0.0f, // 0\. top
      -1.0f, -1.0f, 0.0f, // 1\. left-bottom
       1.0f, -1.0f, 0.0f  // 2\. right-bottom
   };
   private byte[] indices = { 0, 1, 2 }; // Indices to above vertices (in CCW)

   // Constructor - Setup the data-array buffers
   public Graphic2DTriangle() {
      // Setup vertex-array buffer. Vertices in float. A float has 4 bytes.
      ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
      vbb.order(ByteOrder.nativeOrder()); // Use native byte order
      vertexBuffer = vbb.asFloatBuffer(); // Convert byte buffer to float
      vertexBuffer.put(vertices);         // Copy data into buffer
      vertexBuffer.position(0);           // Rewind

      // Setup index-array buffer. Indices in byte.
      indexBuffer = ByteBuffer.allocateDirect(indices.length);
      indexBuffer.put(indices);
      indexBuffer.position(0);
   }

   // Render this shape
   public void draw(GL10 gl) {
      // Enable vertex-array and define the buffers
      gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);

      // Draw the primitives via index-array
      gl.glDrawElements(GL10.GL_TRIANGLES, indices.length, GL10.GL_UNSIGNED_BYTE, indexBuffer);
      gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
   }
} 
```

# vim - Vim 拆分和 VSplit 行为

> ID：12222548
> 
> 赞同：2
> 
> 时间：2012-08-31T21:14:30.473
> 
> 标签：vim, resize, behavior

我喜欢使用拆分，现在我有一个具有不同尺寸屏幕的双显示器设置，我通常喜欢在显示器分区上进行垂直拆分，这很简单。问题是，当我添加另一个垂直分割时，它会将所有 vsplit 的大小调整为相同的宽度，就好像我“Cw =”然后重新调整水平分割的大小一样。horz splits 也会发生同样的行为。这使我每次添加新的时都需要调整垂直拆分的大小...我的问题是是否可以使拆分行为仅将当前拆分一分为二？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:17:16.443

使用`equalalways`控制此行为的选项：

```
:set noequalalways 
```

这将导致 vim*相对于当前拆分*调整每个新拆分的大小：给它当前拆分的一半大小，而不是调整*所有*拆分的大小以具有相同的高度。

请注意，这也用于水平拆分，因此如果您设置此选项，您将在使用 eg 进行水平拆分时获得相同的行为`:vsp`。

最后，您还可以通过在 split 命令前面加上一个值来指定下一个拆分的特定大小，例如：`:17sp`，这将允许新的拆分*17*行。这不像`noequalalways`其他方式打开拆分那样有用，例如在使用`:help`.

请参阅`:help 'equalalways'`和`:help split`了解更多信息。

# java - JFreeChart 图例显示

> ID：12222557
> 
> 赞同：7
> 
> 时间：2012-08-31T21:15:02.177
> 
> 标签：java, jfreechart, legend

在我的 JFreeChart 时间序列图中，我发现图例线太细而无法准确看到颜色。另一篇文章 [ https://stackoverflow.com/questions/7306901/jfreechart-change-sample-of-colors-in-legend ] 建议覆盖渲染器方法，如下所示：

```
renderer = new XYLineAndShapeRenderer()
{
    private static final long serialVersionUID = 1L;
    public Shape lookupLegendShape(int series)
    {
        return new Rectangle(15, 15);
    }
}; 
```

这种方法工作正常，直到你做我所做的

```
renderer.setSeriesShapesVisible(i, false); 
```

一旦我这样做了，传说就会恢复到一条线。有没有办法解决这个问题？

**我采用的解决方案接近 TrashGod 建议的解决方案，** 我覆盖了 getLegendItem() 方法，将图例形状强制设置为所需的框。

```
 renderer = new XYLineAndShapeRenderer()
    {
        private static final long serialVersionUID = 1L;

        public LegendItem getLegendItem(int datasetIndex, int series)
        {
            LegendItem legend = super.getLegendItem(datasetIndex, series);
            return new LegendItem(legend.getLabel(), legend.getDescription(), legend.getToolTipText(), legend.getURLText(), Plot.DEFAULT_LEGEND_ITEM_BOX, legend.getFillPaint());
        }
    }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T21:42:06.003

您将不得不重写`getLegendItem()`以`LegendItem`代替渲染器创建的那个。

附录：这是一个可以帮助您入门的简单示例。

```
XYPlot plot = (XYPlot) chart.getPlot();
plot.setRenderer(new MyRenderer());
...
private static class MyRenderer extends XYLineAndShapeRenderer {

    @Override
    public LegendItem getLegendItem(int dataset, int series) {
        LegendItem legendItem = super.getLegendItem(dataset, series);
        System.out.println(dataset + " " + series + " " + legendItem.getShape());
        // modify legendItem here
        return legendItem;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:35:06.227

获取渲染器并执行以下操作：

```
XYItemRenderer renderer = plot.getRenderer();
BasicStroke thickLine = new BasicStroke( 4.0f ); 
renderer.setSeriesStroke(0, thickLine); 
```

这将使你的线条更粗。

# scala - 在哪里将提升环境配置到隐藏堆栈跟踪的生产环境？

> ID：12222558
> 
> 赞同：2
> 
> 时间：2012-08-31T21:15:07.670
> 
> 标签：scala, configuration, lift, production

我将电梯应用程序部署到生产环境中。但是，我发现堆栈跟踪没有隐藏。在lift中将环境配置设置为生产的地方在哪里，这样堆栈跟踪将不再显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:14:42.090

在 tomcat 中，您可以在以下位置设置此设置：

```
/etc/tomcat6/catalina.properties 
```

如果您想使用 SBT 测试此行为，请使用：

```
./sbt -Drun.mode=production 
```

# c# - MEF + WPF + MVVM：AggregateCatalog 应该驻留在哪里？

> ID：12222562
> 
> 赞同：2
> 
> 时间：2012-08-31T21:15:29.353
> 
> 标签：c#, wpf, mef

我第一次尝试使用 MEF，但我似乎无法确定应该在哪里创建我的`AggregateCatalog`and `CompositionContainer`. 我发现了很多例子来说明代码应该是什么：

```
var moduleCatalog = new AggregateCatalog(
    new AssemblyCatalog(System.Reflection.Assembly.GetExecutingAssembly()), 
    new DirectoryCatalog(moduleDir));
var container = new CompositionContainer(moduleCatalog);
container.ComposeParts(this); 
```

但现在我只需要知道把它放在哪里。它应该去：

1.  在`App.xaml.cs`
2.  在`MainWindow.xaml`
3.  或在我的一个 ViewModel 中。

**编辑：**应该再用谷歌搜索一下，我想我找到了我想要的东西。

[在应用程序和库中托管 MEF。](http://codebetter.com/glennblock/2010/01/15/hosting-mef-within-your-applications/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:25:12.387

看完这篇，[Hosting MEF inside application and libraries](http://codebetter.com/glennblock/2010/01/15/hosting-mef-within-your-applications/)，我决定`MEF`可以进去`App.xaml.cs`。

```
public partial class App : Application
{
    [Import]
    public Window TheMainWindow { get; set; }

    protected override void OnStartup(StartupEventArgs e)
    {
        var moduleCatalog = new AggregateCatalog(
            new AssemblyCatalog(typeof(App).Assembly), 
            new DirectoryCatalog(moduleDir));
        var container = new CompositionContainer(moduleCatalog);
        container.ComposeParts(this);
        base.MainWindow = TheMainWindow;
        TheMainWindow.Show();
    }
} 
```

需要注意的几点：

*   `StartupUri="MainWindow.xaml"`应该从`App.xaml`
*   您将需要为您的主窗口创建一个属性`import`，并将其设置`base.MainWindow`为它。

# java - 使用java渲染play 2框架中的对象列表

> ID：12222568
> 
> 赞同：0
> 
> 时间：2012-08-31T21:16:11.310
> 
> 标签：java, playframework, playframework-2.0

我正在使用带有 java 的 play 2 框架进行项目。我想从数据库表中填充一个下拉列表。我有这段代码可以从数据库中获取项目列表。代码片段如下所示。

```
public static Result gestureNames()
  {
  List <GestureClassEntity> gcet = GestureClassEntity.find.all();
  return ok(render(gcet)); 
} 
```

但是，当我运行此代码播放框架时，它告诉我它找不到渲染。

我试图修改下面显示的代码

```
public static void gestureNames()
  {
  List <GestureClassEntity> gcet = GestureClassEntity.find.all();
  render(gcet); 
} 
```

play 再次告诉我它不能使用返回 Unit 作为处理程序的方法

仍在努力理解游戏框架可以帮助我。因为我正在做一个项目，时间不多了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T22:27:59.850

还记得之前的问题吗？[https://stackoverflow.com/a/12180812/1066240](https://stackoverflow.com/a/12180812/1066240)

`render()`是 的方法，所以要使用它，`view`你需要**指定**`view`

```
public static Result gestureNames(){
    List <GestureClassEntity> gcet = GestureClassEntity.find.all();
    return ok(views.html.gestures.render(gcet));    
} 
```

`app/views/gestures.scala.html`

```
@(gesturesListFromMyController: List[GestureClassEntity])

@for(gesture <- gesturesListFromMyController){
    <div class="gesture-item">
        <h2>@gesture.name</h2>
        <p>@gesture.description</p>
    </div>
} 
```

**顺便说一句：**尽量简化你神秘模型的名字，你的生活会更好。不能这样`GestureClassEntity`称呼`Gesture`？？？

# rspec - 期望“should_receive”属于哪个版本的 RSpec？

> ID：12222571
> 
> 赞同：0
> 
> 时间：2012-08-31T21:16:31.707
> 
> 标签：rspec

这是指向溢出问题的链接，其中包含此示例...

[我可以使用 RSpec 模拟标准输入/标准输出来测试控制台读写吗？](https://stackoverflow.com/questions/6335282/testing-with-stdin-and-stdout-in-rspec)

“should_receive”的例子对于我的生活，我找不到 RSpec 的权威指南。请帮忙。

我拥有来自实用主义的“The RSpec”一书……但我一直在互联网上找到 RSpec 书籍文本中不存在的期望示例。我查看了 github/rspec 以获取参考文本...relishapps.com....rubydocs....这些都没有给出所有期望的明确列表。他们似乎都只有一组例子。我正在寻找确定的东西。

使我抓狂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:06:39.967

`should_recieve`位于 Mocks 章节的 RSpec 书中（第 183 页及以后）。

还有更多你找不到的吗？

# mysql - 为表的所有行更新一个具有相同常量的字段值......更好的方法以获得更好的性能？

> ID：12222575
> 
> 赞同：2
> 
> 时间：2012-08-31T21:17:00.353
> 
> 标签：mysql, sql, sql-update

如果我想更新具有相同值的字段。

例如，一个表 T，有几个列：A、B、C

**运行**此语句是否更好：

```
UPDATE `T` SET `B` = '0'; 
```

**或者**这个：

```
UPDATE `T` SET `B` = '0' WHERE `B` <> '0'; 
```

我认为第一个可能会更快（即使我在 B 上有一个索引）？

如果我**有数百万行**..应用此更新会很**长还是真的很快？**

*（我尝试搜索一个现有的类似问题......但我使用的关键字很难......太多不同的问题......不要犹豫，给我指出一个好问题......）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:32:22.250

相对性能取决于 的选择性`WHERE B <> 0`。

*   没有`WHERE`子句将执行全表扫描。

*   B 上的任何索引都不会执行全表扫描。

*   B 上具有低选择性的索引，即许多命中将产生高速率的随机 I/O，因为在索引中找到的行被寻址以进行更新。在大多数系统中，这将成为性能瓶颈。如果选择性非常低，您最终可能会得到全表扫描的很大一部分，但是是伪随机而不是顺序扫描——这是最坏的情况。这可能会在查询计划生成期间进行优化，并由全表扫描代替。

*   高选择性，即很少的命中仍会创建随机 I/O，但只在必要时创建 - 这是最好的情况。

因此，根据需要更新的行的百分比，您应该在全表扫描 (= no `WHERE`) 和有针对性的方法 (= `WHERE`with index)之间进行选择

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:21:03.960

恕我直言，第一个会更快...

afaik mysql 仅自动更新值不是目标值的列 - 因此对“值”进行双重检查，它将永远迭代行。在您的第二种方法中，它将迭代两次，如果没有索引，则使用 where 子句检查是完全不好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T11:24:01.550

除了性能之外，您还应该了解交易上下文的差异。

第一个选项要求 MySQL 锁定所有行，第二个选项只需要锁定其中的行`B <> '0'`。使用 InnoDB，当有索引时，MySQL 能够做到这一点`B`。

当您有并发交易时，您发布的选项不一样。第一个保证提交后的每一行都是`b=0`. 第二个只保证每行在`b<>0`提交后都设置为 0。但是另一个事务可以同时将某些行更改`b=0`为另一个值。

因此，即使您不关心不同的行为，您也应该关心并发事务时的整体性能。可能是第一个选项更快，但它阻止了访问此表行的所有其他事务，而第二个选项不是这种情况。

# ios - UINavigationController 的自定义后退按钮，没有导航栏和正确方向的动画

> ID：12222579
> 
> 赞同：0
> 
> 时间：2012-08-31T21:17:18.087
> 
> 标签：ios, uinavigationcontroller, uibutton, uinavigationbar

我有一个隐藏导航栏的基于导航的应用程序，但我仍然需要一个自定义后退按钮到第一个视图。我的代码主要基于[此示例](https://stackoverflow.com/questions/12213703/make-uibutton-act-as-navigationcontroller)`back`中的答案，这是用户按下按钮后执行的代码。

```
CreateViewController *createViewController = [[CreateViewController alloc] initWithNibName:@"CreateViewController" bundle:nil];
[self.navigationController pushViewController:createViewController animated:YES];
[createViewController release]; 
```

这确实有效，但我不确定这是正确的方法。这段代码的一个问题是新视图从右侧进入屏幕。因此，即使它是一个`back`按钮，它也似乎是一个正在出现的新视图。

有没有更好的方法来做到这一点并修复动画方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:40:49.987

如果我没看错，你应该使用 popViewControllerAnimated: 而不是 push。Pop 只会将其带回之前的视图控制器。

# shopify - Shopify - 为私有应用创建会话

> ID：12222580
> 
> 赞同：1
> 
> 时间：2012-08-31T21:17:27.370
> 
> 标签：shopify

我正在尝试使用 RoR 创建一个应用程序，以便我可以测试 ShopifyAPI。我正在使用通过合作伙伴管理门户创建的私有应用程序。

我尝试使用生成的密码创建会话。会话似乎是有效的。

登录控制器：

```
 def index
    debugger
    sess = ShopifyAPI::Session.new('a75999989b7715f73ae5273497b9bfcb:9eb9f578d9fcfd753713e079@mante-hudson7934.myshopify.com', '9eb9f578d9fcfd753713e0795')
    sess.valid?
    session[:shopify] = sess        
      flash[:notice] = "Logged in"
      redirect_to return_address
      session[:return_to] = nil
  end 
```

但是当我尝试获取所有产品时（products = ShopifyAPI::Product.find(:all, :params => {:limit => 10})

我最终得到一个 500 错误。

这是我的调试跟踪：

```
 1: ShopifyAPI::Base.site = https://a75999989b7715f73ae5273497b9bfcb:9eb9f578d9fcfd753713e079596d4fbd@mante-hudson7934.myshopify.com/admin/
~/.rvm/gems/ruby-1.9.3-p194@rails328/gems/shopify_app-4.0.0/lib/shopify_app/login_protection.rb:9
ShopifyAPI::Base.clear_session 
```

在浏览器中我有一个例外：“对等方重置连接 - SSL_connect”

显然我的会话有问题...

有什么我想念的吗？

谢谢

- 编辑 -

实际上，我尝试通过 IRB 获取产品并最终得到相同的 500 错误：“对等连接重置 - SSL_connect”

不知道为什么我有这个错误？

里吉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T18:14:43.533

很可能，您的客户端正在尝试使用 TLS 1.2 进行连接，这是 HTTPS 中使用的最新 SSL/TLS 协议之一。我们的负载平衡硬件在 TLS 1.2 中存在一个已知问题，尽管直到我自己独立偶然发现了这个错误，我们才意识到这一点。

我已经让运营团队的其他成员意识到了这一点，我希望我们会尽快解决这个问题。在此之前，您可以使用

`http.ssl_version = :TLSv1`

强制 Ruby 改为使用 TLS 1.0。（有些客户可能需要使用`:SSLv3`改用。）

下面是一个如何将此解决方法应用于 ActiveResource 的示例，它是`shopify_api`gem 内部使用的 gem：

```
require 'active_resource/connection'

class ActiveResource::Connection
  def apply_ssl_options_with_ssl_version(http)
    apply_ssl_options_without_ssl_version(http)

    http.ssl_version = @ssl_options[:ssl_version] if @ssl_options && @ssl_options[:ssl_version]

    http
  end

  alias_method_chain :apply_ssl_options, :ssl_version
end 
```

现在你可以使用

`ShopifyAPI::Base.ssl_options = {:ssl_version => :TLSv1}`

（或者`:SSLv3`如果有必要）来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:07:29.613

I am indeed under ubuntu environement. I just tried under windows and it seems to work at least in IRB console. As You mentionned I may have a problem with Ubuntu and OpenSSL. I will investigate this lead. Thank you

-------EDIT------- I tried connecting to the API under mac OS X Lion but got the same error. Does anybody is having hard time to connect to the Shopify API? If it's related to openssl is there a way to goet around this?

Thank you

# c# - 通过方法给表单添加图片框

> ID：12222581
> 
> 赞同：0
> 
> 时间：2012-08-31T21:17:28.913
> 
> 标签：c#, winforms, visual-studio-2010

我正在尝试创建一个递归方法，它以 500 毫秒的间隔向表单添加一个图片框，这意味着，我希望每 500 毫秒一个新的图片框出现在表单上。但是，图片框仅在方法完成运行后出现（在我的情况下为 8 次）。换句话说，图片框仅在 4 秒后出现，而我希望每 500 毫秒看到一个。

这是我的递归方法：

```
public void QueenPos(bool[,] a,int x,int y,int c)
{
    for (int i = y; i < a.GetLength(0); i++)
    {
          **some code**

            PictureBox im = new PictureBox();                            
            im.SizeMode = PictureBoxSizeMode.StretchImage;
            im.Image = Image.FromFile(@"path");
            im.Size = new Size(40, 40);
            im.Location = new Point((x * 50) + 305, ((i * 50) + 55));
            Controls.Add(im);
            im.BringToFront();

            Thread.Sleep(500);

            QueenPos(a, x + 1, 0, c + 1);
        }
    }
} 
```

如果可能的话，我宁愿不使用负责添加图片框的新线程。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:19:31.790

永远不要在 UI 线程上休眠。

相反，您应该使用 WinForms 计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:51:31.837

上面所说的关于不在 UI 线程上睡眠是正确的。

但是，您可以尝试以下方法而不是您的`Thread.Sleep(500)`电话

```
int count = 0
while(count++<10)
{
Application.DoEvents();
Thread.Sleep(50);
} 
```

# c++ - 我如何遍历 QListWidget 项目并使用每个项目？

> ID：12222594
> 
> 赞同：23
> 
> 时间：2012-08-31T21:18:52.150
> 
> 标签：c++, qt, qlistwidget

在 CSharp 中，它就像编写一样简单：

```
listBox1.Items.Add("Hello");
listBox1.Items.Add("There");

foreach (string item in listBox1.Items )
{
    MessageBox.Show(item.ToString());
} 
```

我可以轻松地将不同的对象添加到列表框中，然后使用 foreach 检索它们。我在 Qt 4.8.2 中尝试了相同的方法，但它们似乎不同。尽管它们一开始看起来非常相似。我发现 Qt 支持 foreach 所以我继续尝试类似的方法：

```
foreach(QListWidgetItem& item,ui->listWidget->items())
{
    item.setTextColor(QColor::blue());
} 
```

这显然失败了。它说 items() 需要一个让我感到困惑的参数。我正在尝试遍历 ListBox 本身，这是什么意思？我尝试将 ListBox 对象作为参数本身传递，这也失败了：

```
foreach(QListWidgetItem& item,ui->listWidget->items(ui->listWidget))
{
    item.setTextColor(QColor::blue());
} 
```

所以这是我的问题：

*   如何遍历 Qt 中的 QListWidget 项目？
*   我可以将对象作为项目存储在 C# 等 QListWidgets 中吗？
*   如何将 QListWidgets 中的对象转换为字符串（Qt 中的 C#s ToString 计数器部分）？

（假设我想使用 QMessagBox 而不是那个 setTextColor 并想打印出 QlistWidget 中的所有字符串项。）

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-31T21:37:20.207

我不认为[items 函数](https://qt-project.org/doc/qt-4.8/qlistwidget.html#items)做你认为它做的事情。这听起来像是用于解码 MIME 数据，而不是获取小部件中所有项目的列表。

遗憾的是，我实际上没有看到任何功能可以完全按照您的意愿行事。您可能可以使用[findItems](https://qt-project.org/doc/qt-4.8/qlistwidget.html#findItems)作为一种解决方法，但这看起来很难看，如果不是彻头彻尾的辱骂......至少您仍然可以使用带有良好旧循环的[item 函数](https://qt-project.org/doc/qt-4.8/qlistwidget.html#item)`for`- 它们并没有*那么*多打字：

```
for(int i = 0; i < listWidget->count(); ++i)
{
    QListWidgetItem* item = listWidget->item(i);
    //Do stuff!
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-26T05:20:30.273

你可以这样做：

```
for(int i = 0; i < listWidget->count(); ++i)
{
    QString str = listwidget.item(i)->text();
    //Do stuff!
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T23:31:06.430

如果您在代码中创建列表项，请尝试为每个项创建一个指针。但是，如果您使用 .ui 文件制作列表项，请尝试右键单击它并点击编辑样式表。您可以通过这种方式非常轻松地对其进行编辑。

# python - Soundcloud 的 api 代码中的“render_template”来自哪里？

> ID：12222595
> 
> 赞同：0
> 
> 时间：2012-08-31T21:18:57.460
> 
> 标签：python, api, soundcloud

让我为你分解一下。我正在使用 Django 1.4（所以，显然也使用 Python，这将是 v2.7.1）。在 SoundClouds Developer 文档中，它说您可以使用以下代码嵌入播放器 - 假设您已经注册了您的应用并下载了 SDK（我已经完成了）：

```
import soundcloud

# create a client object with your app credentials
client = soundcloud.Client(client_id='YOUR_CLIENT_ID')

# get a tracks oembed data
track_url = 'http://soundcloud.com/forss/flickermood'
embed_info = client.get('/oembed', url=track_url)

# render the html for the player widget
return render_template('player.html', widget=embed_info['html']) 
```

所以我的问题是这个 render_template 来自哪里？我在 Django 中收到一个错误，说未定义 render_template。这和django中的render_to_response一样吗？我不确定这里是什么。谢谢。

[编辑] SoundClouds 开发者文档：http: [//developers.soundcloud.com/docs#playing](http://developers.soundcloud.com/docs#playing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:32:47.333

经过深思熟虑，我假设 render_template 只是对您最喜欢的渲染工具的占位符调用。

我假设 embed_info['html'] 包含将小部件嵌入页面的完整 HTML 代码，因此请尝试打印它并查看它是否正确。然后选择您想要的任何模板语言，并将此变量作为要嵌入的小部件传递给它。

# c# - c#中的进程统计

> ID：12222600
> 
> 赞同：-1
> 
> 时间：2012-08-31T21:19:21.423
> 
> 标签：c#, performancecounter

对于给定的过程，我如何学习它

*   CPU使用率 （％）
*   内存使用（分配的内存）
*   网络使用（字节输入/秒，字节输出/秒）

我有兴趣从 ac# app 收集这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:37:51.530

可以使用[PerformanceCounter 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)跟踪所有这些信息。

[您可以在此处](http://technet.microsoft.com/en-us/library/cc780836%28WS.10%29.aspx)找到更详细的列表，了解您可以跟踪的信息类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:39:31.077

[这篇文章](http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters)和[这个例子](http://www.codeproject.com/Articles/38438/Monitoring-Process-Statistics-in-C-WPF)+ 一些 c# 编码技能是你所需要的。

哦，关于进程网络监控，[微软有一个网络监控 API](http://blogs.technet.com/b/netmon/archive/2008/10/29/intro-to-the-network-monitor-api.aspx)，但[YAPM](http://sourceforge.net/projects/yaprocmon/)是一个超人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T21:29:06.790

C# 中内置了可以执行此操作的类。一个简单的谷歌搜索“计算cpu使用C#”的“计算内存使用C#”提出了他们

[http://bhaskarrajukonduru-dotnet.blogspot.ca/2010/06/calculate-memory-and-cpu-usage-by-using.html](http://bhaskarrajukonduru-dotnet.blogspot.ca/2010/06/calculate-memory-and-cpu-usage-by-using.html) http://stackoverflow.com/questions/278071/how-to-get-the -cpu-usage-in-c（注意，你也可以搜索stackoverflow） [http://www.codeproject.com/Articles/10258/How-to-get-CPU-usage-of-processes-and-threads](http://www.codeproject.com/Articles/10258/How-to-get-CPU-usage-of-processes-and-threads)

# magento - 使 Magento 的“继续购物”按钮重定向到最后添加到购物车的产品类别

> ID：12222601
> 
> 赞同：1
> 
> 时间：2012-08-31T21:19:26.970
> 
> 标签：magento, continue

继续购物按钮在购物车页面上无法正常工作。

当我单击按钮时，然后转到主页。

我想去上一个类别页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T09:20:20.113

您描述的按钮确实有效。返回主页可能是标准的 Magento 行为之一。

要回答您的问题，您可以执行以下操作。

**请注意，如果产品存在于多个类别中，这将重定向到它所附加的第一个类别。**

这些代码已在 Magento 1.7.0.0 上成功测试。

PHP代码将是：

```
<?php
    $lastProductAddedToCartId = Mage::getSingleton('checkout/session')->getLastAddedProductId();
    if($lastProductAddedToCartId) {
        $productCategoryIdsArray = Mage::getModel('catalog/product')->load($lastProductAddedToCartId)->getCategoryIds();
        $continueShoppingCategoryUrl = Mage::getModel('catalog/category')->load($productCategoryIdsArray[0])->getUrl();
    }
?> 
```

HTML 按钮代码为：

```
<button type="button" title="Continue Shopping" class="button btn-continue" onclick="setLocation('<?php echo (isset($continueShoppingCategoryUrl)) ? $continueShoppingCategoryUrl : $this->getContinueShoppingUrl(); ?>')"><span><span>Continue Shopping</span></span></button> 
```

**例如，如果您将 PHP 代码放在`template/checkout/cart.phtml`文件的开头，那么上面的代码就可以工作，这不是最佳做法。**

最佳做法是是否：

1）您自己的助手，您可以`setLocation()`像这样在按钮的 PHP 参数中调用它：

```
setLocation('<?php echo (Mage::helper('myhelper')->getContinueShoppingCategoryUrl()) ? Mage::helper('myhelper')->getContinueShoppingCategoryUrl() : $this->getContinueShoppingUrl(); ?>') 
```

2）或（不太好IMO），重写`Mage_Checkout_Block_Cart::getContinueShoppingUrl()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:34:15.597

在对我的第一个答案发表评论后，我制作了一个更复杂的脚本，该脚本作为第一个答案更需要资源，因此我将其作为单独的答案发布。请注意，两者在 PHP 端和 PHTML 端确实不同。

这是我在 Magento CE 1.7.0.0 上成功测试的内容。下面的场景在我提供的注释代码中按预期工作。

* * *

## 目录配置

**A类（家具）**

*   产品 1（沙发）

**B类（电子）**

*   产品 2（桌面）
*   产品 3（笔记本电脑）

* * *

## 设想

a) 将产品 1 添加到购物车 => “继续购物”在添加后立即重定向到类别 A

b）导航网站并返回购物车而不添加新产品=>“继续购物”重定向到类别 A

c) 将产品 2 添加到购物车 => “继续购物”在添加后立即重定向到类别 B

d) 导航网站并返回购物车而不添加新产品 =>“继续购物”重定向到主页，因为购物车中的产品不属于同一类别。

e) 从购物车中删除产品 1 =>“继续购物”总是重定向到类别 B

f) 将产品 3 添加到购物车 => “继续购物”总是重定向到类别 B

* * *

## PHP 代码

```
<?php
    $continueShoppingCategoryUrl = false;

    /**
     * If we are on the cart page just after we added an item to the cart,
     * we use its category for "Continue Shopping" redirect
     */
    $lastProductAddedToCartId = Mage::getSingleton('checkout/session')->getLastAddedProductId();
    if($lastProductAddedToCartId) {
        $productCategoryIdsArray = Mage::getModel('catalog/product')->load($lastProductAddedToCartId)->getCategoryIds();
        $continueShoppingCategoryUrl = Mage::getModel('catalog/category')->load($productCategoryIdsArray[0])->getUrl();
    }

    /**
     * Otherwise, if we are on the cart page at any other moment, we make sure
     * that all items do belong to the same category and, if this is
     * the case, we use this unique category for "Continue Shopping" redirect
     * 
     * If all cart items do not belong to the same category, we are
     * compelled to let Magento process in its standard way because we 
     * cannot tell which category is the one to redirect to!
     */
    if(!$continueShoppingCategoryUrl) {
        $allCategoryIds = array();
        $cartItems = Mage::helper('checkout/cart')->getQuote()->getAllVisibleItems();
        foreach($cartItems as $cartItem) {
            $productCategoryIds = Mage::getModel('catalog/product')->load($cartItem->getProductId())->getCategoryIds();
            $allCategoryIds = array_merge($allCategoryIds, $productCategoryIds);
        }
        $allCategoryIds = array_unique($allCategoryIds);
        if(count($allCategoryIds) === 1) {
            $continueShoppingCategoryUrl = Mage::getModel('catalog/category')->load(reset($allCategoryIds))->getUrl();
        }
    }
?> 
```

* * *

## HTML 按钮代码

```
<button type="button" title="Continue Shopping" class="button btn-continue" onclick="setLocation('<?php echo ($continueShoppingCategoryUrl) ? $continueShoppingCategoryUrl : $this->getContinueShoppingUrl(); ?>')"><span><span>Continue Shopping</span></span></button> 
```

* * *

## 最佳实践提醒

同样，最佳实践是在按钮上调用 Helper，而不是在 cart.phtml 模板中使用原始 PHP 代码。

# asp.net - .NET 3.5 ASMX Web 服务 - 通过 .NET 3.5 服务参考调用 - 通用类重用

> ID：12222606
> 
> 赞同：1
> 
> 时间：2012-08-31T21:19:47.733
> 
> 标签：asp.net, .net, web-services, asmx, svcutil.exe

我有一个 .NET 3.5 Web 服务，它有一个看起来像这样的单一 Web 方法：

```
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
using System;
using System.Collections.Generic;
using System.Web.Services;

namespace Webservice1
{
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    public class WebService1 : WebService
    {
        [WebMethod]
        public List<Model.Person> HelloWorld()
        {
            var person1 = new Model.Person { FirstName = "Champa", LastName = "Chameli", TimeSpan = new TimeSpan(12,10,9,8)};
            var person2 = new Model.Person { FirstName = "Shamu", LastName = "Ramu", TimeSpan = new TimeSpan(12,10,9,8) };
            var persons = new List<Model.Person> { person1, person2 };
            return persons;
        }
    }
}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
using System.Runtime.Serialization;
namespace Model
{
    [DataContract]
    public class Person
    {
        [DataMember]
        public string FirstName{ get; set; }
        [DataMember]
        public string LastName { get; set; }
        [DataMember]
        public System.TimeSpan TimeSpan { get; set; }
    }
}
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

Person 类在通用 .NET 3.5 程序集中定义，该程序集也可用于（作为项目引用）通过服务引用（不是 .NET 兼容性 Web 引用）调用 Web 服务的 .NET 3.5 应用程序。

问题是服务引用命名空间包含它自己的、自动生成的 Person 实现。因此，代理 SOAP 客户端上可用的自动生成的服务引用方法具有以下签名：

```
public WebApplication1.WebServiceReference1.Person[] HelloWorld() 
```

我还尝试将 svcutil 命令与 dataContractOnly 选项一起使用，但出现错误

> "C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bin\svcutil" http:///CrossfirePortalServices/Leasing/WebService1.asmx /o:"C:\temp\WebApplication1\WebApplication1\WebService1.cs" / s /tcv:Version35 /r:"c:\temp\WebApplication1\Model\bin\Debug\Model.dll" /language:C# /n:*,RPCommonClasses.Services.WebService1 /dataContractOnly
> 
> 错误：从“http:///CrossfirePortalServices/Leasing/WebService1.asmx”读取的输入与其他选项不一致。如果您需要更多帮助，请输入“svcutil /?”

我很想找到一个解决方案，让我可以在整个框架中使用 Model 域，而不必将 Model 域中的不同类型转换为 ServiceReference 域中的不同类型来处理请求，反之亦然。

我们也不能将 asmx webservices 更改为 WCF，因为我们的 IT 部门反对它。关于如何完成这项任务的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:31:57.130

有好消息也有坏消息。好消息是它是可能的并且官方支持。坏消息是它相当复杂。

有关在 Web 引用之间共享类库的示例，请参阅此 MSDN 文章。这同样适用于您的场景。

[http://msdn.microsoft.com/en-us/library/Aa480505.aspx](http://msdn.microsoft.com/en-us/library/Aa480505.aspx)

# soap - 如何从命令行调用 SOAP wsdl Web 服务

> ID：12222607
> 
> 赞同：107
> 
> 时间：2012-08-31T21:19:51.650
> 
> 标签：soap, wsdl

我需要对[https://sandbox.mediamind.com/Eyeblaster.MediaMind.API/V2/AuthenticationService.svc?wsdl](https://sandbox.mediamind.com/Eyeblaster.MediaMind.API/V2/AuthenticationService.svc?wsdl)进行 SOAP Web 服务调用，并在传递参数时使用 ClientLogin 操作：ApplicationKey、Password 和 UserName . 响应是 UserSecurityToken。它们都是字符串。

这是完全解释我要做什么的链接： [https ://sandbox.mediamind.com/Eyeblaster.MediaMind.API.Doc/?v=3](https://sandbox.mediamind.com/Eyeblaster.MediaMind.API.Doc/?v=3)

如何在命令行上执行此操作？（Windows 和/或 Linux 会有所帮助）

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-08-31T21:35:15.123

它是一个标准的普通 SOAP Web 服务。SSH 在这里无关。我只是用[curl](/questions/tagged/curl "显示标记为“卷曲”的问题")（单线）调用它：

```
$ curl -X POST -H "Content-Type: text/xml" \
    -H 'SOAPAction: "http://api.eyeblaster.com/IAuthenticationService/ClientLogin"' \
    --data-binary @request.xml \
    https://sandbox.mediamind.com/Eyeblaster.MediaMind.API/V2/AuthenticationService.svc 
```

其中`request.xml`文件具有以下内容：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:api="http://api.eyeblaster.com/">
           <soapenv:Header/>
           <soapenv:Body>
              <api:ClientLogin>
                 <api:username>user</api:username>
                 <api:password>password</api:password>
                 <api:applicationKey>key</api:applicationKey>
              </api:ClientLogin>
          </soapenv:Body>
</soapenv:Envelope> 
```

我得到了这个漂亮的 500：

```
<?xml version="1.0"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <s:Fault>
      <faultcode>s:Security.Authentication.UserPassIncorrect</faultcode>
      <faultstring xml:lang="en-US">The username, password or application key is incorrect.</faultstring>
    </s:Fault>
  </s:Body>
</s:Envelope> 
```

你试过[soapui](/questions/tagged/soapui "显示标记为“soapui”的问题")吗？

[阅读更多](http://dasunhegoda.com/make-soap-request-command-line-curl/596/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-11-22T07:44:46.520

在 linux 命令行上，您可以简单地执行：

```
curl -H "Content-Type: text/xml; charset=utf-8" -H "SOAPAction:"  -d @your_soap_request.xml -X POST https://ws.paymentech.net/PaymentechGateway 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-03-26T08:22:13.190

这是另一个示例 CURL -对银行[swift 代码的 SOAP (](https://bank-code.net/blz-sort-codes) [WSDL](http://www.thomas-bayer.com/axis2/services/BLZService?wsdl) ) 请求

**要求**

```
curl -X POST http://www.thomas-bayer.com/axis2/services/BLZService \
  -H 'Content-Type: text/xml' \
  -H 'SOAPAction: blz:getBank' \
  -d '
  <soapenv:Envelope 
    xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:blz="http://thomas-bayer.com/blz/">
    <soapenv:Header/>
    <soapenv:Body>
      <blz:getBank>
        <blz:blz>10020200</blz:blz>
      </blz:getBank>
    </soapenv:Body>
  </soapenv:Envelope>' 
```

**回复**

```
< HTTP/1.1 200 OK
< Server: Apache-Coyote/1.1
< Content-Type: text/xml;charset=UTF-8
< Date: Tue, 26 Mar 2019 08:14:59 GMT
< Content-Length: 395
< 
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope
  xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <ns1:getBankResponse
      xmlns:ns1="http://thomas-bayer.com/blz/">
      <ns1:details>
        <ns1:bezeichnung>BHF-BANK</ns1:bezeichnung>
        <ns1:bic>BHFBDEFF100</ns1:bic>
        <ns1:ort>Berlin</ns1:ort>
        <ns1:plz>10117</ns1:plz>
      </ns1:details>
    </ns1:getBankResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-08-13T21:32:56.990

使用卷曲：

```
SOAP_USER='myusername'
PASSWORD='mypassword'
AUTHENTICATION="$SOAP_USER:$PASSWORD"
URL='http://mysoapserver:8080/meeting/aws'
SOAPFILE=getCurrentMeetingStatus.txt
TIMEOUT=5 
```

卷曲请求：

```
curl --user "${AUTHENTICATION}" --header 'Content-Type: text/xml;charset=UTF-8' --data @"${SOAPFILE}" "${URL}" --connect-timeout $TIMEOUT 
```

我用它来验证响应：

```
http_code=$(curl --write-out "%{http_code}\n" --silent --user "${AUTHENTICATION}" --header 'Content-Type: text/xml;charset=UTF-8' --data @"${SOAPFILE}" "${URL}" --connect-timeout $TIMEOUT --output /dev/null)
if [[ $http_code -gt 400 ]];  # 400 and 500 Client and Server Error codes http://en.wikipedia.org/wiki/List_of_HTTP_status_codes
then
echo "Error: HTTP response ($http_code) getting URL: $URL"
echo "Please verify parameters/backend. Username: $SOAP_USER Password: $PASSWORD Press any key to continue..."
read entervalue || continue
fi 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-05T04:56:17.680

```
curl --header "Content-Type: text/xml;charset=UTF-8" --header "SOAPAction:ACTION_YOU_WANT_TO_CALL" --data @FILE_NAME URL_OF_THE_SERVICE 
```

上面的命令对我有帮助

例子

```
curl --header "Content-Type: text/xml;charset=UTF-8" --header "SOAPAction:urn:GetVehicleLimitedInfo" --data @request.xml http://11.22.33.231:9080/VehicleInfoQueryService.asmx 
```

[更多信息](http://dasunhegoda.com/make-soap-request-command-line-curl/596/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-11-21T14:19:24.367

对于寻找 PowerShell 替代品的 Windows 用户，这里是（使用 POST）。为了便于阅读，我将其分成多行。

```
$url = 'https://sandbox.mediamind.com/Eyeblaster.MediaMind.API/V2/AuthenticationService.svc'
$headers = @{
    'Content-Type' = 'text/xml';
    'SOAPAction' = 'http://api.eyeblaster.com/IAuthenticationService/ClientLogin'
}
$envelope = @'
    <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
        <Body>
            <yourEnvelopeContentsHere/>
        </Body>
    </Envelope>
'@     # <--- This line must not be indented

Invoke-WebRequest -Uri $url -Headers $headers -Method POST -Body $envelope 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-31T21:35:46.880

对于 Windows：

将以下内容另存为 MSFT.vbs：

```
set SOAPClient = createobject("MSSOAP.SOAPClient")
SOAPClient.mssoapinit "https://sandbox.mediamind.com/Eyeblaster.MediaMind.API/V2/AuthenticationService.svc?wsdl"
WScript.Echo "MSFT = " & SOAPClient.GetQuote("MSFT") 
```

然后从命令提示符运行：

```
C:\>MSFT.vbs 
```

参考：http: [//blogs.msdn.com/b/bgroth/archive/2004/10/21/246155.aspx](http://blogs.msdn.com/b/bgroth/archive/2004/10/21/246155.aspx)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-05T13:11:52.457

对于 Windows，我发现这有效：

```
Set http = CreateObject("Microsoft.XmlHttp")
http.open "GET", "http://www.mywebservice.com/webmethod.asmx?WSDL", FALSE
http.send ""
WScript.Echo http.responseText 
```

参考：[代码项目](http://www.codeproject.com/Questions/266002/Invoke-a-Webservice-from-a-Batch-file)

# excel - 会计格式有时显示 $0.00 和 $ - 其他

> ID：12222608
> 
> 赞同：0
> 
> 时间：2012-08-31T21:19:54.137
> 
> 标签：excel, pivot-table, number-formatting, rounding-error, excel-2002

我在 Excel 中有一个数据透视表，项目的总和应为零。相反，我得到的数字非常非常接近于零（-3.63797880709171E-12）。正如@Tim Williams 在他的评论中指出的那样，这是十进制 <--> 二进制浮点转换的已知工件。

我主要关心的是结果的格式。我正在尝试应用一种会计格式，其中 $0 显示`$ -`而不是`$0.00`. 格式很重要，`$ -`因为它允许您在比较数字集时一目了然并查看哪些列“平局”。当一些零显示为`$0.00`而其他零显示为时，`$ -`这要困难得多。

例如，

```
╔══════════════════════════════════════════════╦══════════╗
║                   Formula                    ║  Result  ║
╠══════════════════════════════════════════════╬══════════╣
║ = 1-0.1-0.1-0.1-0.1-0.1-0.1-0.1-0.1-0.1-0.1  ║  $ 0.00  ║
║ =-1+0.1+0.1+0.1+0.1+0.1+0.1+0.1+0.1+0.1+0.1  ║  $(0.00) ║
║                                           0  ║  $   -   ║
╚══════════════════════════════════════════════╩══════════╝ 
```

我希望所有三个公式的结果都显示为`$ -`. 有没有办法强迫这种情况发生？也许有一种方法可以强制数据透视表中的总和四舍五入到最接近的一美分（即百分之一）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:30:56.893

尝试将您的公式更改为此，使其四舍五入到最接近的第 10 位（如果您需要更高的精度，请将最后的 1 更改为更大的值）。

```
= round(1-0.1-0.1-0.1-0.1-0.1-0.1-0.1-0.1-0.1-0.1, 1) 
```

编辑：如果您无法更改公式，您还可以使用自定义显示格式，结果如下：

```
[<0.05]"-";[>-0.05]"-";$0.00 
```

我没有对此进行测试，但你应该明白这一点。

# knockout.js - 使用 Knockout Mapping 插件时如何扩展较低级别的对象

> ID：12222609
> 
> 赞同：1
> 
> 时间：2012-08-31T21:20:00.133
> 
> 标签：knockout.js, knockout-mapping-plugin

如果我有多级数据，例如：

```
{"tabs": [
     "rows": [{
        "id": 200,
        "name": "B"},
    {
        "id": 300,
        "name": "C"}]},... 
```

我知道我可以使用以下代码扩展选项卡：

```
var myTabExtensions = function(data) {
    ko.mapping.fromJS(data, {}, this);

    this.addRow = function() {
        var rowID = this.rows().length + 1;
        this.rows.push(new Row(rowID, 'row ' + rowID));
    }.bind(this);
};

var mapping = {
    'tabs': {
        key: function(data) {
            return data.id;
        },
        create: function(options) {
            return new myTabExtensions(options.data);
        }
    }
};

var viewModel = ko.mapping.fromJS(data, mapping); 
```

...但是如何扩展每一行（不在根目录）？

我创建了一个更详细的[jsFiddle 。](http://jsfiddle.net/fqFxZ/7/)在该示例中，我尝试在 HTML 中启用注释的 addRowFirst 链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T01:34:34.413

对于您所做的每个映射，您传入的映射对象（第二个参数）仅适用于第一个参数中的对象。对于嵌套映射，您需要提供一个新的映射对象。

由于您`myTabModel`正在尝试映射与选项卡关联的数据，因此它将使用映射对象来提供映射。由于它是空的，它不会处理您的行。将您的`rows`映射移到那里。

```
var myTabModel = function(data) {
    // use this mapping object to map our tab
    var mapping = {
        'rows': {
            key: function(data) {
                return data.id;
            },
            create: function(options) {
                return new myRowModel(options.data);
            }
        }
    };
    ko.mapping.fromJS(data, mapping, this);

    this.addRow = function() {
        var rowID = this.rows().length + 1;
        this.rows.push(new Row(rowID, 'row ' + rowID));
    }.bind(this);
}; 
```

[更新的小提琴](http://jsfiddle.net/fqFxZ/9/)

# extjs - Ext JS 4：标题栏按钮在 Internet Explorer 8 中不完全可见

> ID：12222620
> 
> 赞同：0
> 
> 时间：2012-08-31T21:20:58.390
> 
> 标签：extjs, internet-explorer-8, tbar

默认的 ExtJS 配置不允许标题栏按钮在 IE 8 中正确显示。我没有在 IE 9 中测试过。我该如何解决这个问题？

**前：**

互联网浏览器 8：

![在此处输入图像描述](../Images/4c3a72171afe92d4f718ad854650dc1d.png)

火狐浏览器 15：

![在此处输入图像描述](../Images/8a563ff42297519e0bfab72962057ec4.png)

我尝试将第一个按钮的*tbar* > *style* > *height*配置添加到“200px”。这只会使第一个按钮变得很大，但第二个和第三个按钮保持不变。即使我在所有 3 个按钮中设置了相同的高度，这些按钮仍然在 IE 8 中部分隐藏。如果您知道如何设置 tbar 本身的样式，我可以尝试。不过我想不通。

**后：**

```
tbar: [{
    text: 'Create HEAT Project',
    style: {
        border: 'solid',
        height: '200px'
    }, 
```

互联网浏览器 8：

![在此处输入图像描述](../Images/4c3a72171afe92d4f718ad854650dc1d.png)

火狐浏览器 15：

![在此处输入图像描述](../Images/295310e632ef97f464dce2cd4931b557.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T05:41:00.650

这个 CSS 在 Internet Explorer 中修复了它！

```
<style media="screen" type="text/css">

    .x-nlg .x-toolbar-default {
        background-image: url(../blank.png) !important;
    }

</style> 
```

# asp.net - 将 GridView 导出到 Excel（不工作）

> ID：12222624
> 
> 赞同：0
> 
> 时间：2012-08-31T21:21:23.707
> 
> 标签：asp.net, vb.net, gridview, updatepanel, export-to-excel

在过去的两天里，我一直在尝试将一些血腥的数据导出到 Excel。经过大量研究，我确定最好和最常见的方法是使用`HttpResponse`标题，如下面的代码所示。在调试模式下经历无数次之后，我确认数据确实存在，并且按照我想要的方式过滤和排序。但是，它不会作为 Excel 文件下载，也不会为此做任何事情。

我怀疑这可能与我的`UpdatePanel`或未`ImageButton`正确回帖有关，但我不确定。我究竟做错了什么？请帮我调试这个问题。我将永远感激不尽。谢谢你。:)

**标记**

```
<asp:UpdatePanel ID="statusUpdatePanel" runat="server" UpdateMode="Conditional">
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnExportXLS" EventName="Click" />
</Triggers>
<ContentTemplate>
    <asp:GridView ID="GridView1" runat="server" AllowPaging="True" PageSize="10"
        AllowSorting="True" DataSourceID="GridView1SDS" DataKeyNames="ID">
    </asp:GridView>
    <span><asp:ImageButton ID="btnExportXLS" runat="server" /></span>
</ContentTemplate>
</asp:UpdatePanel> 
```

**代码隐藏**

```
Protected Sub ExportToExcel() Handles btnExportXLS.Click
    Dim dt As New DataTable()
    Dim da As New SqlDataAdapter(SelectCommand, ConnectionString)

    da.Fill(dt)

    Dim gv As New GridView()
    gv.DataSource = dt
    gv.DataBind()

    Dim sw As New IO.StringWriter()
    Dim hw As New System.Web.UI.HtmlTextWriter(sw)
    Response.ContentType = "application/vnd.ms-excel"
    Response.AddHeader("content-disposition", "attachment;filename=Report.xls")
    Response.Charset = String.Empty

    gv.RenderControl(hw)
    Response.Write(sw.ToString()) 'sw is a valid html table, but no Excel file downloads. :(
    Response.End()
End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T21:23:40.530

1.  我一`Response.Clear`开始就错过了。
2.  您正在调用`GridView.RenderControl(htmlTextWriter)`，因此该页面引发了一个异常，即服务器控件在表单之外呈现。尝试在调试器中执行它，我很确定您会看到该异常。

[您可以通过覆盖VerifyRenderingInServerForm](http://epplus.codeplex.com/)来避免此异常

```
Public Overrides Sub VerifyRenderingInServerForm(control As Control)
    ' Confirms that an HtmlForm control is rendered for the specified ASP.NET '
    ' server control at run time.  '
End Sub 
```

见[这里](http://forums.asp.net/t/1016960.aspx/1?Problem%20with%20GridView%20s%20RenderControl)和[这里](http://aspalliance.com/771_CodeSnip_Exporting_GridView_to_Excel)。

**编辑**：我刚刚看到您使用的是`UpdatePanel`. 确保您已`PostBackTrigger`为该按钮创建了一个 (Full-)：

```
<asp:UpdatePanel ID="UpdGridInfo" runat="server" >
    <ContentTemplate>
        <asp:ImageButton ToolTip="export to Excel" ID="BtnExcelExport" ImageUrl="~/images/excel2007logo.png" runat="server" />
    </ContentTemplate>
    <Triggers>
        <asp:PostBackTrigger ControlID="BtnExcelExport" />
    </Triggers>
</asp:UpdatePanel> 
```

但是，我不会创建一个可以由 excel 解释的 html 表，而是使用我可以热烈推荐的[EPPlus (GPL) 之类的 Excel 库。](http://epplus.codeplex.com/)

然后从 DataTable 创建 Excel 文件并将其写入响应就这么简单：

```
Dim pck = New ExcelPackage()
Dim ws = pck.Workbook.Worksheets.Add("Worksheet-Name")
ws.Cells("A1").LoadFromDataTable(dt, True, OfficeOpenXml.Table.TableStyles.Medium1)
Response.Clear()
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
Response.AddHeader("content-disposition", "attachment;  filename=ExcelFileName.xlsx")
Response.BinaryWrite(pck.GetAsByteArray())
Response.End() 
```

这是另一个示例：[http ://epplus.codeplex.com/wikipage?title=WebapplicationExample](http://epplus.codeplex.com/wikipage?title=WebapplicationExample)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:16:57.073

我的解决方案是按照以下步骤操作：

**第 1 步（在设计页面中）**

设置`EnableEventValidation ="false"`在`"%@ Page"`

```
<%@ Page Title="" Language="VB" MasterPageFile="~/Aroghyam.master" EnableEventValidation ="false" AutoEventWireup="false" CodeFile="Search_IncidentStatus.aspx.vb" Inherits="Search_IncidentStatus" %> 
```

**第 2 步（在设计页面中）**

如果有更新面板，则添加一个*导出*按钮，单击该按钮会将网格数据导出为 Excel 格式`asp:PostBackTrigger` （不要将其放入`asp:AsyncPostBackTrigger`

```
`<asp:PostBackTrigger ControlID="btnExportToExcel" />` 
```

**第 3 步（在代码中）**

添加以下内容：

```
Public Overloads Overrides Sub VerifyRenderingInServerForm(ByVal control As Control)

    ' no implementation necessary,used just to handle error (just paste this to your       code)
End Sub 
```

**第 4 步（在代码中）**

生成 Excel 内容：

```
'-------------------GETTING THE DATATABLE------------------
Dim searchResultTable as new Datatable = // GET TABLE FROM DATABASE
'----------------------------------------------------------

'-------------------ASSIGNING TABLE TO GRID----------------
GvIncidentStatus.DataSource = SearchResultTable
GvIncidentStatus.DataBind()

'-----------------CODE FOR GENERATION TO EXCEL
Response.Clear()
GvIncidentStatus.AllowPaging = False
Response.Buffer = True
Me.EnableViewState = False
Response.AddHeader("content-disposition", String.Format("attachment;filename=MyExcelfile.xls"))
Response.Charset = ""
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
Dim sw As New StringWriter()
Dim hw As New HtmlTextWriter(sw)
GvIncidentStatus.RenderControl(hw)
Response.Output.Write(sw.ToString())
Response.End()
'----------------- 
```

单击导出按钮现在将下载 Excel 文档。

# jquery - 水平列表中的垂直子列表给出对齐问题

> ID：12222626
> 
> 赞同：0
> 
> 时间：2012-08-31T21:21:50.723
> 
> 标签：jquery, html, css, drop-down-menu

我在创建带有图像的下拉菜单时遇到问题。我正在尝试使用主菜单项和相应的垂直菜单实现居中对齐的水平列表。

这是我的 CSS 代码：

```
#nav {
    position: relative;
    top: 88px;
    padding: 0px;
    border: 0px;
    min-width: 800px;
    z-index: 999;
    font-size: 0px;
}

#nav > ul {
    padding: 0;
}

#nav > ul > li {
    display: inline-block;
    padding: 0 0 0 0;
}

#nav >ul> li> ul {
    width: 100%;
    display: none;
    padding: 0px;
    margin: 0px;
    list-style: none;
}

#nav> ul >li >ul> li {
    display: block;
    padding: 0px;
} 
```

jQuery代码：

```
$("#nav img").mouseover(function () {
  //$('ul .subList').hide();            
  var imgSrc = $(this).attr("src");
  var tempSrc = imgSrc.split(".png");
  var newSrc = tempSrc[0] + "Hover.png";
  $(this).attr("src", newSrc);
  $(this).closest('li').children('ul .subList').slideToggle();
}); 
```

其中 nav 是包含列表的 div。所有列表项都是图像。

我希望主菜单项对齐，子菜单项显示在相应菜单下方，但主菜单项向上。

例如：

应该是：（需要）

项目 1 项目 2 Sub1a Sub1b

变成：（电流输出）

项目 1 子 1a 子 1b 项目 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:27:32.567

啊哈，实际上很容易解决这个问题。这是 CSS 发生的这些奇怪的默认事情之一。

给你的`#NAV > UL > LI`

添加：`vertical-align: top`

您应该始终将 vertical-align: top 添加到 inline-block 元素，除非您希望获得相反的效果:-)

# android - setOnClickListner 和 addPreferencesFromResource 出错

> ID：12222628
> 
> 赞同：0
> 
> 时间：2012-08-31T21:22:04.650
> 
> 标签：android, onclick, android-preferences

请帮助我解决这些错误。我不知道问题是什么。

错误在“ **addPreferencesFromResource** ”和“ **setOnclicklistner** ”中：

“该类型的方法 addPreferencesFromResource(int) 未定义......”

```
addPreferencesFromResource(R.xml.settings_pref); 
```

和

```
1-"The method setOnClickListener(view.setOnClickListener) in the type view is not applicable for the arguments (newDialogInterface.OnClickListner(){})"  

2-"The type new Dialoginterface.OnClickListner(){} must be implement the inherited abstract method Dialoginterface.OnClickListner.OnClick(DialogInterface, Int)" 

 b2.setOnClickListener(new OnClickListener() {

 public void onClick(View arg0) {
 startActivity(new Intent(main.this, Settings.class));  

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:27:24.603

有两种不同的 OnClickListener，一种用于视图，一种用于对话框。您显然已经在其他地方实现了对话框，所以它变得很困惑，试试这个：

```
b2.setOnClickListener(new View.OnClickListener() {
   public void onClick(View arg0) {
     startActivity(new Intent(main.this, Settings.class));  
   }
}); 
```

# mysql - MySQL 可以为单个查询使用多个索引吗？

> ID：12222630
> 
> 赞同：63
> 
> 时间：2012-08-31T21:22:09.167
> 
> 标签：mysql, indexing, database-indexes

想象一个具有多列的表，例如`id, a, b, c, d, e`. 我通常选择 by `id`，但是，客户端应用程序中有多个查询，它们对列的子集使用各种条件。

当 MySQL 对单个表执行多个列上的多个 WHERE 条件的查询时，它真的可以利用在不同列上创建的索引吗？或者让它快速的唯一方法是为所有可能的查询创建多列索引？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-31T21:30:13.997

是的，MySQL 可以为单个查询使用多个索引。优化器将确定哪些索引将使查询受益。您可以使用`EXPLAIN`来获取有关 MySQL 如何执行语句的信息。您可以使用如下提示添加或忽略索引：

```
SELECT * FROM t1 USE INDEX (i1) IGNORE INDEX FOR ORDER BY (i2) ORDER BY a; 
```

我建议阅读[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)。

仅摘录几句：

> 如果在多个索引之间进行选择，MySQL 通常使用找到最少行数的索引。
> 
> 如果 col1 和 col2 上存在多列索引，则可以直接获取相应的行。如果 col1 和 col2 上存在单独的单列索引，优化器将尝试使用索引合并优化（请参阅第 8.2.1.4 节，“索引合并优化”），或者通过确定哪个索引找到更少的索引来尝试找到最严格的索引行并使用该索引来获取行。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-31T21:31:35.090

传统上，MySQL 可以在给定查询中为每个表引用使用一个索引。然而，在最新版本的 MySQL 中，可以进行一种称为 an 的操作，`index merge`并允许 MySQL 对每个表使用多个索引。

[http://openquery.com/blog/mysql-50-index-merge-using-multiple-indexes](http://openquery.com/blog/mysql-50-index-merge-using-multiple-indexes)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-13T00:09:17.620

Mysql可以使用索引合并来合并两个索引的结果。但这并不是 mysql 的首选方式。如果优化查询执行，它将使用两个索引。但这也是查询开发人员创建复合索引的提示。

索引合并绝不等同于复合索引。这是施瓦茨男爵书的摘录-

> 索引合并策略有时效果很好，但更常见的是它实际上表明索引不佳的表：
> 
> • 当服务器与索引相交时（通常用于 AND 条件），这通常意味着您需要一个包含所有相关列的索引，而不是必须组合的多个索引。
> • 当服务器联合索引（通常用于 OR 条件）时，有时算法的缓冲、排序和合并操作会占用大量 CPU 和内存资源。如果不是所有索引都非常有选择性，则尤其如此，因此扫描会将大量行返回给合并操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-22T01:03:02.223

*   Each `SELECT` in a query -- think `UNION`, subquery, derived table, etc -- is optimized separately. That is each might use different indexes.
*   One `SELECT` *can* use multiple indexes in what it calls "index merge". This is *rarely* used.
*   When the `EXPLAIN` says it is using `Index merge (intersect)`, then it can almost always be improved by using a composite index containing the columns used by the intersected indexes.
*   `Index merge (union)` is sometimes (rarely) used for an `OR`. Such can *perhaps* be improved by rewriting the query to be the `UNION` of two `SELECTs`.

# java - slf4j如何将sfl4j-api中的org.slf4j.impl.StaticLoggerBinder替换成真正的StaticLoggerBinder

> ID：12222632
> 
> 赞同：3
> 
> 时间：2012-08-31T21:22:32.373
> 
> 标签：java, classloader, slf4j

slf4j api 中存在 org.slf4j.impl.StaticLoggerBinder、org.slf4j.impl.StaticMarkerBinder、org.slf4j.impl.StaticMDCBinder 类。但是每个到具体记录器的绑定都应该包含相同的类。

例如：

[http://grepcode.com/file/repo1.maven.org/maven2/org.slf4j/slf4j-api/1.6.1/org/slf4j/impl/StaticLoggerBinder.java?av=f](http://grepcode.com/file/repo1.maven.org/maven2/org.slf4j/slf4j-api/1.6.1/org/slf4j/impl/StaticLoggerBinder.java?av=f)

及其log4j实现： [http ://grepcode.com/file/repo1.maven.org/maven2/org.slf4j/slf4j-log4j12/1.6.1/org/slf4j/impl/StaticLoggerBinder.java?av=f](http://grepcode.com/file/repo1.maven.org/maven2/org.slf4j/slf4j-log4j12/1.6.1/org/slf4j/impl/StaticLoggerBinder.java?av=f)

java 类加载器如何替代它？这里不应该是个例外吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T05:28:15.420

If you extract the actual slf4j-api jar you'll notice that `org.slf4j.impl.StaticLoggerBinder` is not actually included in the jar. SFL4J api is compiled against the class at build but it isn't actually included in the artifact. If you look at the source for `org.slf4j.impl.StaticLoggerBinder` in the api module it has no implementation, all the public instance methods throw `UnsupportedOperationException`. This is ok, again because that class is excluded from the slf4j-api jar.

The classloader behaves normally and select the first version of `org.slf4j.impl.StaticLoggerBinder` that is found when the class needs to be loaded. This will generally be from the first slf4j implementation jar that it listed on the classpath.

Note: The `findPossibleStaticLoggerBinderPathSet()` is only used to warn that there are multiple bindings present on the classpath. It does not actually load any bindings.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:03:20.097

嗯，很好的问题`slf4j`是假设不使用运行时加载类。它看起来在以下方法中在启动时使用类加载器检查：

```
private static Set findPossibleStaticLoggerBinderPathSet() {
    // use Set instead of list in order to deal with  bug #138
    // LinkedHashSet appropriate here because it preserves insertion order during iteration
    Set staticLoggerBinderPathSet = new LinkedHashSet();
    try {
      ClassLoader loggerFactoryClassLoader = LoggerFactory.class
              .getClassLoader();
      Enumeration paths;
      if (loggerFactoryClassLoader == null) {
        paths = ClassLoader.getSystemResources(STATIC_LOGGER_BINDER_PATH);
      } else {
        paths = loggerFactoryClassLoader
                .getResources(STATIC_LOGGER_BINDER_PATH);
      }
      while (paths.hasMoreElements()) {
        URL path = (URL) paths.nextElement();
        staticLoggerBinderPathSet.add(path);
      }
    } catch (IOException ioe) {
      Util.report("Error getting resources from path", ioe);
    }
    return staticLoggerBinderPathSet;
} 
```

@Dev 是对的-`org.slf4j.impl.StaticLoggerBinder`仅包含在 slf4j-api 源中而不是二进制文件中-出于编译原因，仅包含在源中是简单的技巧。`findPossibleStaticLoggerBinderPathSet`仅用于记录目的是可以理解的。

# r - 数据框上 ddply 的结果问题 - R

> ID：12222633
> 
> 赞同：0
> 
> 时间：2012-08-31T21:22:33.453
> 
> 标签：r, plyr

所以我有一个数据框，比如以下数据：

```
 Count    Amount    Org         Bank
------------------------------------------
      1        100      ABC       Chase
      15        76       DEF    American Express
    ...
    ... 
```

当我运行`ddply`使用时：

```
result1 <- ddply(df, 4, count = sum(as.numeric(df[[1]])), amt = sum(as.numeric(df[[2]]))) 
```

我得到所有行`result1`具有相同值（即`count`和）的结果，即`amt`

```
 description      count        amt
  Chase             900        432087
  American Express  900        432087
..... 
```

绝对不是这样。不知何故，似乎`sum()`正在计算的最后一个值应用于所有行。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T21:25:42.730

这里有几个问题：

1.  **您正在得到相同/错误的结果**，因为您在 ddply 的参数中引用了原始数据`df`框 - 例如`df[[1]]`。
    Ddply 不能那样工作 - 直接使用列名，例如`Amount`and `Count`。

2.  您缺少`.fun`ddply 的函数参数 - 在这种情况下`summarize`是合适的。
    *（老实说，如果没有这个，我根本不知道你的代码是如何工作的。）*

3.  您正在使用未记录的方式 ( `4`) 来选择参数中的组列`.variable`。尝试`.(Bank)`或`c("Bank")`代替。

这应该有效：

```
ddply(df, .(Bank), summarize, count = sum(as.numeric(Count)),
                              amt = sum(as.numeric(Amount))) 
```

# visual-studio-2010 - 如何只打开一个静态分析警告？

> ID：12222641
> 
> 赞同：1
> 
> 时间：2012-08-31T21:22:50.773
> 
> 标签：visual-studio-2010, static-analysis

在我的工作中，我们有一个非常古老的巨大应用程序，我想使用 Visual Studio 静态分析器 (C++)。问题是，我们有数百个项目，有很多代码（就像我说的，它是巨大的），如果我只是为整个构建打开静态分析，我们会收到海啸般的警告，这是无法筛选的通过。我知道我已经尝试过了。另外，如果我游说管理层打开所有这些，他们会拒绝我。（实际上已经这样做了......我不会提及我必须处理的政治）。

无论如何，我想做的是从小处着手，只打开一个静态分析警告（6000 级类型警告）。我知道我可以抑制这些，或者像任何其他警告一样启用。在过去，我成功地抑制了特定的 6000 级警告。但我只是不知道如何只打开一个，除了打开静态分析然后抑制所有我不想要的警告。（对我来说似乎是一个黑客）。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:01:47.883

[此页面可能](http://randomascii.wordpress.com/2011/10/15/try-analyze-for-free/)对免费获得有用`/analyze`。Bruce Dawson 为 Valve 工作，因此讨论偏向于游戏开发，但在调试和静态分析方面非常好。

我和你的情况类似，有一个单一的古老代码库。

# php - 为什么我的地图没有加载

> ID：12222650
> 
> 赞同：0
> 
> 时间：2012-08-31T21:23:48.073
> 
> 标签：php, javascript, html

我有一张地图，我想做的是将一些表格放入信息窗口。我通过混合 java-script 和 php 来实现这一点（这两个我都不熟悉）。所以我的问题是为什么我的地图没有显示？当我去查看源代码时，一切都是我想要的，但是有些愚蠢导致地图不显示。我已经在下面发布了代码，希望更熟练的眼睛可以发现问题。请放轻松，我只写了大约 6 个月的代码，仍然犯了很多错误。

所以我遇到的问题是这部分

```
 "<?php
    $cnt = 0;
    foreach ($default_properties as $prop_key => $value) {

      ?>"
    '<div class="view-row">'
      '<div class="view-label">'."<?php echo $prop_key?>".'</div>' +;
      '<div class="view-value">'. "<?php echo $value?>".'</div>' +;
    '</div>'; "<?php 

      $cnt++;
    }

    if ($node_id > 0) {

    foreach ($node_values as $prop_key => $value) {

    ?>"
    '<div class="view-row">'
      '<div class="view-label">'."<?php echo $prop_key?>".'</div>' +;
      '<div class="view-value">'. "<?php echo $value?>".'</div>' +;
    '</div>';<?php 

      $cnt++;
    }

    } 

    ?>" 
```

我可以操纵上述部分，以便加载数组，但我无法格式化它。这样它格式正确但不加载地图。但是当我查看地图的源代码时，一切都在那里！所以我很困惑。

完整脚本如下

```
<script type="text/javascript">

    var infowindow = new google.maps.InfoWindow();    
    var browserSupportFlag =  new Boolean();

function initialize() 
    {
        var latlng = new google.maps.LatLng(38.9550040,-77.4045560);
        var settings = 

    //sets the settings of the map

        {
            zoom: 5,
            center: latlng,
            mapTypeControl: true,
            mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
            navigationControl: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP        
        }

        geocoder = new google.maps.Geocoder();
        map = new google.maps.Map(document.getElementById("map_canvas"), settings); 

        // Try W3C Geolocation (Preferred)   

        if(navigator.geolocation) 
        {    
            browserSupportFlag = true;     
            navigator.geolocation.getCurrentPosition(function(position) 

            {       
              initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);      
              map.setCenter(initialLocation);     
            }, function() 

                {       
                    handleNoGeolocation(browserSupportFlag);     
                });   
        }   

    // Browser doesn't support Geolocation  

        else 
            {     
              browserSupportFlag = false;     
              handleNoGeolocation(browserSupportFlag);   
            } 

        function handleNoGeolocation(errorFlag) 
            {     
                if (errorFlag == true) 

                {       
                  alert("Geolocation service failed.");       
                  initialLocation = Virgina;     
                } 
                else 
                {       
                  alert("Your browser doesn't support geolocation. We've placed you in here.");       
                  initialLocation = '';    
                }     
                  map.setCenter(initialLocation);  
            } 
    }

        // Takes an address and places a marker in google maps

function codeAddress() 

    {     
        var address = "<?php echo $node_address?>";
        var description = "<?php echo $node_title?>";
        var property = "<?php echo $default_properties?>";
        var values = "<?php echo $node_values?>";

        <?php
            $js_array = json_encode($end_node_addresses);
            echo "var end_addresses = ". $js_array . ";\n";
        ?>

        var image = "<?php echo $entity_icon?>";

        geocoder.geocode( { 'address': address}, function(results, status) 
        {       
            if (status == google.maps.GeocoderStatus.OK) 
            {         
                map.setCenter(results[0].geometry.location); 

                var contentString = '<div id="contentmarker">'+
                    '<div id="siteNotice">'+
                    '</div>'+
                    '<h2 id="firstHeading" class="firstHeading"><?php echo $node_title?></h2>'+
                    '<div id="bodyContent">'+
                    '<p> Is a <?php echo $entity_name?> located in<?php echo $node_address?></br> "<?php
    $cnt = 0;
    foreach ($default_properties as $prop_key => $value) {

      ?>"
    '<div class="view-row">'
      '<div class="view-label">'."<?php echo $prop_key?>".'</div>' +;
      '<div class="view-value">'. "<?php echo $value?>".'</div>' +;
    '</div>'; "<?php 

      $cnt++;
    }

    if ($node_id > 0) {

    foreach ($node_values as $prop_key => $value) {

    ?>"
    '<div class="view-row">'
      '<div class="view-label">'."<?php echo $prop_key?>".'</div>' +;
      '<div class="view-value">'. "<?php echo $value?>".'</div>' +;
    '</div>';<?php 

      $cnt++;
    }

    } 

    ?>"     <b></b></p>'+
                    '</div>'+
                    '</div>';

                var infowindow = new google.maps.InfoWindow(
                {
                    content: contentString
                });

                var marker = new google.maps.Marker({            
                map: map,             
                position: results[0].geometry.location, 
                icon: image,
                title: address
                });  

                google.maps.event.addListener(marker, 'click', function() {
                  infowindow.open(map,marker);
                });
            } 

            else 
            {        
                alert("Geocode was not successful for the following reason: " + status);       
            }     
        });  

        var title_vars = end_addresses;

        for (i = 0; i < end_addresses.length; i++)
        {
            geocoder.geocode( { 'address': end_addresses[i]}, function(results, status) 
            {
                if (status == google.maps.GeocoderStatus.OK) 
                {       
                    map.setCenter(results[0].geometry.location);

                var contentString = '<div id="contentmarker">'+
                    '<div id="siteNotice">'+
                    '</div>'+
                    '<h2 id="firstHeading" class="firstHeading"><?php echo $node_title?></h2>'+
                    '<div id="bodyContent">'+
                    '<p> Is located in "<?php echo $js_array?>"</p>'+
                    '</div>'+
                    '</div>';

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });

                                    var marker = new google.maps.Marker({            
                                    map: map,             
                                    position: results[0].geometry.location,
                                    icon: image,
                                    title: title_vars.shift(),
                                    });  
                            google.maps.event.addListener(marker, 'click', function() {
                  infowindow.open(map,marker);
                });     
                                } 

                                else 
                                {        
                                    alert("Geocode was not successful for the following reason: " + status);       
                                }     
                            }); 
        }
    } 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:08:46.987

让我们继续删除这些引号：

```
<?php
    $cnt = 0;
    foreach ($default_properties as $prop_key => $value) {

?>
    <div class="view-row">
      <div class="view-label"><?php echo $prop_key?></div>
      <div class="view-value"><?php echo $value?></div>
    </div>
<?php 
      $cnt++;
    }

    if ($node_id > 0) {

    foreach ($node_values as $prop_key => $value) {

?>
    <div class="view-row">
      <div class="view-label"><?php echo $prop_key; ?></div>
      <div class="view-value"><?php echo $value; ?></div>
    </div>
<?php 

      $cnt++;
    }

    } 
?> 
```

在不脱离 PHP 的情况下：

```
<?php
    $cnt = 0;
    foreach ($default_properties as $prop_key => $value) {

    echo '<div class="view-row"><div class="view-label">' . 
        $prop_key . '</div><div class="view-value">' . 
        $value . '</div></div>';

      $cnt++;
    }

    if ($node_id > 0) {

    foreach ($node_values as $prop_key => $value) {

    echo '<div class="view-row"><div class="view-label">' . 
        $prop_key . '</div><div class="view-value">' . 
        $value . '</div></div>';

      $cnt++;
    }

    } 
?> 
```

# google-apps-script - 在开发者模式下传递 URL 参数（最新代码）

> ID：12222653
> 
> 赞同：0
> 
> 时间：2012-08-31T21:24:23.790
> 
> 标签：google-apps-script

如何在 Web 应用开发者模式下传递 URL 参数？（在 GAS 编辑器中运行最新代码）

这不起作用： `https://script.google.com/a/macros/gappspro.com/s/web-app-key&myparam=xyz/dev` 不起作用，页面未知。

在 URL 中传递参数似乎仅在“运行时”中有效，如下所示。这确实有效： `https://script.google.com/a/macros/gappspro.com/exec?service=web-app-key&myparam=xyz`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T04:08:44.247

从 IDE 获取 url（以“dev”结尾），然后将参数放在“/dev”之后。例如....."/dev?myparam=one&another=two"

# asp.net - ASP.net Web 服务 .cs 文件丢失

> ID：12222657
> 
> 赞同：1
> 
> 时间：2012-08-31T21:25:01.550
> 
> 标签：asp.net, service, web

几个月前我发布了一个网站，但丢失了我的本地项目。我可以看到我的 Web 服务器上的所有文件，但我看不到作为“CodeBehind”工作的 .cs 文件。如何在服务器上找到 .cs 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:27:16.010

如果您在 Visual Studio 中使用发布，则 .cs 文件将不存在。相反，它们将被编译，并且您的 \bin 目录中会有一些 .dll 文件。

如果您需要取回原始源代码文件，可以使用[RedGate 的 Reflector](http://www.reflector.net/)或类似工具来反编译 .dll。代码不会完全相同，但可以使用。请参阅这篇文章：[如何将 .NET EXE 反编译为可读的 C# 源代码？](https://stackoverflow.com/questions/179741/how-do-i-decompile-a-net-exe-into-readable-c-sharp-source-code)

（希望你没有使用混淆器。）

将来如果您想保留实际的 .cs 文件，而不是使用“发布”选项，请使用 Visual Studio 2010 的“[复制网站](http://msdn.microsoft.com/en-us/library/1cc82atw.aspx)”选项。

[在此处](http://msdn.microsoft.com/en-us/library/5c12ykae.aspx)查看部署网站的不同方法及其影响。

最后，我确实设法在这里找到了一篇关于使用 Reflector 的 4Guys 旧[文章](http://www.4guysfromrolla.com/articles/080404-1.aspx)。

# git - 通过 Rest API 创建 Stash 存储库？

> ID：12222661
> 
> 赞同：1
> 
> 时间：2012-08-31T21:25:48.827
> 
> 标签：git, bitbucket-server

编辑 2：我使用 wget 让它工作。这是 wget 命令：

```
wget --no-check-certificate --header='Host: [hostname]' --header 'Connection: keep-alive' --header 'Authorization: Basic [user:pass(Base64)]' --header 'Content-Type: application/json' --header 'Accept: application/json' --post-data='{"slug":"test", "name":"test"}' https://[hostname]/rest/api/1.0/projects/[projectName]/repos/ 
```

根据文档，这似乎是可能的。不过，我似乎无法让它发挥作用。有没有人设法完成这项工作？

编辑1：

我实际上设法通过代理手动创建一个 http 请求来创建一个 repo。这是有效的请求：

```
POST /rest/api/1.0/projects/[Project Name]/repos HTTP/1.1
Host: [hostname]
Connection: keep-alive
Authorization: Basic [user:pass (Base64)]
Content-Length: 29
Cache-Control: max-age=0
Origin: https://[hostname]
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1
Content-Type: application/json
Accept: application/json
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

{"slug":"test","name":"test"} 
```

但是当我尝试使用 curl 来模仿它时，我无法让它工作。这是卷曲请求：

```
curl -k -X POST -H "Host: [hostname]" -H "Connection: keep-alive" -H "Authorization: [user:pass (Base64)]" -H  "Content-Length: 29" -H "Cache-Control: max-age=0" -H "Origin: https://[hostname]" -H "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1" -H "Content-Type: application/json" -H "Accept: application/json" -H "Accept-Encoding: gzip,deflate,sdch" -H "Accept-Language: en-US,en;q=0.8" -H "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3" --data {"slug":"test", "name":"test"} https://[hostname]/rest/api/1.0/projects/[projectName]/repos/ 
```

我无法说出第二个请求中 Curl 没有提供的 Stash 期望什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-04T19:16:07.153

我使用 wget 让它工作。这是 wget 命令：

`wget \ --no-check-certificate \ --header='Host: [hostname]'\ --header 'Connection: keep-alive' \ --header 'Authorization: Basic [user:pass(Base64)]' \ --header 'Content-Type: application/json' \ --header 'Accept: application/json' \ --post-data='{"slug":"test", "name":"test"}' \ https://[hostname]/rest/api/1.0/projects/[projectName]/repos/`

# oop - 函数如何进入 Lua 的表中？

> ID：12222662
> 
> 赞同：3
> 
> 时间：2012-08-31T21:25:48.290
> 
> 标签：oop, class, lua

我正在阅读《[Lua 编程》的第 16.4 章，](http://www.lua.org/pil/16.4.html)但在最后一个示例中我一无所获：

```
 `function newAccount (initialBalance)
      local self = {
        balance = initialBalance,
        LIM = 10000.00,
      }

```
 local extra = function ()
    if self.balance > self.LIM then
      return self.balance*0.10
    else
      return 0
    end
  end

  local getBalance = function ()
    return self.balance + self.extra() -- this line is the problematic one
  end

  ... 
```` 

“额外”功能如何变成“self.extra”功能？！我没有看到任何使它附加到单独的“自我”表的东西！

* * *

## 回答 #1

> 赞同：3
> 
>             
> 
> 时间：2012-08-31T21:41:25.307

这已在本书的第二版中更正为

```
local getBalance = function ()
  return self.balance + extra()
end 
``` 
```

# file - 如何在批处理脚本中将特定数据从一个文件复制到另一个文件

> ID：12222664
> 
> 赞同：0
> 
> 时间：2012-08-31T21:25:58.727
> 
> 标签：file, batch-file, copy

我正在尝试使用 .batch 文件将数据从 a.txt 复制到 b.txt。但我不想要来自 a.txt 的所有数据。我只是想复制特定的数据。

例如：a.txt 包含

```
line 1:this is a.txt file
line 2: name= abc
line 3: age= 24
line 4: country= xyz
line 5: contact no= 123456778
line 6: end of a.txt 
```

现在，我想读取 a.txt 并将特定数据复制到新的 b.txt：

b.txt：

```
abc 21 xyz 
```

有什么建议么？

感谢帮助。

那仁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T03:49:35.477

假设你的意思是`abc 24 xyz`. （最简答案在底部）

这为您提供了最大的灵活性和最清晰的变量。

```
@echo off
setlocal enabledelayedexpansion

:: Just making sure that %data% is empty
set data=

for /f "tokens=1,2* delims==" %%x in (a.txt) do call :work %%x "%%y"

:: Removes leading space and sends to b.txt
echo %data:~1%>b.txt
goto :eof

:work
set var=%1
set val=%~2

:: Remove any leading spaces.
:work-loop
if "!val:~0,1!"==" " (
  set val=!val:~1!
  goto :work-loop
)

if "%var%"=="name"    set data=%data% %var%
if "%var%"=="age"     set data=%data% %var%
if "%var%"=="country" set data=%data% %var%

goto :eof 
```

或者短一点。

```
@echo off
setlocal enabledelayedexpansion

set data=
for /f "tokens=1,2* delims==" %%x in (a.txt) do call :work %%x "%%y"

:: Removes leading space and sends to b.txt
echo %data:~1%>b.txt
echo %data%>b.txt

goto :eof

:work
set var=%1
set val=%~2

:since leading spaces have not been removed, there need be no space between %data% and %var%
if "%var%"=="name"    set data=%data%%var%
if "%var%"=="age"     set data=%data%%var%
if "%var%"=="country" set data=%data%%var%

goto :eof 
```

最短的答案

```
@echo off
setlocal
for /f "tokens=1,2* delims== " %%x in (a.txt) do (
    if "%%x"=="name" set %%x=%%y
    if "%%x"=="age" set %%x=%%y
    if "%%x"=="country" set %%x=%%y
)
echo %name% %age% %country%>b.txt
endlocal 
```

在最后一个中，使用`setlocal`and `endlocal`are not ness :: 删除前导空格并发送到 b.txt echo %data:~1%>b.txt iary，它们只是确保您的变量在批处理文件结束时消失。

# html - CSS渐变背景按钮

> ID：12222667
> 
> 赞同：6
> 
> 时间：2012-08-31T21:26:08.173
> 
> 标签：html, css, button, input, gradient

我会在这个页面中创建一个这样的按钮（GetStarted 按钮）： [http ://www.behance.net/signup/](http://www.behance.net/signup/)

我不知道如何创建蓝色背景渐变按钮。我不明白要使用的 css 属性是什么。

谁能帮我？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T21:29:57.857

好吧，他们在默认状态下使用了这个：

```
background: #0079FF;
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#0096FF), to(#005DFF));
background: -webkit-linear-gradient(0% 0%, 0% 100%, from(#0096FF), to(#005DFF));
background: -moz-linear-gradient(center top, #0096FF, #005DFF); 
```

对于悬停，它们当然还有其他颜色。只需根据您的需要更改颜色即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:43:33.670

一个工作示例：http: [//jsfiddle.net/KJN2V/1/](http://jsfiddle.net/KJN2V/1/)

只需将 .button 类添加到您想要的任何元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-27T12:14:07.983

```
I used this for creating a gradient button.   
<style>
        .my-gradient-btn {
            border-radius: 40px;
            opacity: 0.5;
            background: linear-gradient(to right, red, yellow);
        }
       </style> 
```

[![在此处输入图像描述](../Images/2f33acb6da841e06a711715eaaeb357b.png)](https://i.stack.imgur.com/4PZj5.png)

# php - PDO PARAM_STR 和长度

> ID：12222671
> 
> 赞同：6
> 
> 时间：2012-08-31T21:26:56.807
> 
> 标签：php, pdo

我不明白`PDO PARAM_*`语句中的长度选项。

长度是否表示所需字符的数量，还是最大值？

例子：

```
$sth->bindParam(2, $color, PDO::PARAM_STR, 12); 
```

这需要 12 个字符，还是限制为 12 个字符？或者，我是否完全误解了这是在做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T02:55:13.467

它表示您希望在输出参数中接收多少数据，服务器不会发送超过此数量的数据。

因此，要回答您的问题，这是限制而不是要求。

# mysql - 您的 SQL 语法有错误；检查与您的 MySQL 对应的手册

> ID：12222677
> 
> 赞同：0
> 
> 时间：2012-08-31T21:27:59.887
> 
> 标签：mysql, mysql-error-1064

我正在尝试运行 mysql 查询来查找所有出现的文本。我有语法错误，但不知道在哪里或如何修复它

我正在使用 sqlyog 来执行这个脚本

```
DECLARE @url VARCHAR(255)

SET @url = '1720'

SELECT 'select * from ' + RTRIM(tbl.name) + ' where ' + 
          RTRIM(col.name) + ' like %' + RTRIM(@url) + '%'
FROM sysobjects tbl
INNER JOIN syscolumns col ON tbl.id = col.id 
AND col.xtype IN (167, 175, 231, 239) -- (n)char and (n)varchar, there may be others to include
AND col.length > 30 -- arbitrary min length into which you might store a URL
WHERE tbl.type = 'U'    -- user defined table 
```

执行了 1 个查询，0 个成功，1 个错误，0 个警告

查询： declare @url varchar(255) set @url = '1720' select 'select * from ' + rtrim(tbl.name) + ' where ' + rtrim(col.name) + ' like %' ...

错误代码：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'declare @url varchar(255) 附近使用正确的语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T21:53:56.660

对于 MySQL 更改此：

```
DECLARE @url VARCHAR(255)
SET @url = '1720' 
```

到：

```
SET @url := '1720' 
```

在 MySQL 中，您不需要 DECLARE 用户变量，只需将它们设置为一个值。等号适用于赋值，除了在 SQL 语句中，您需要使用 Pascal 样式`:=`作为赋值运算符。（我通常`:=`在 SET 语句的上下文中使用赋值运算符，即使在等号中也同样有效。）

但是，在查看您的 SQL 语句时，这似乎是 Microsoft SQL Server 语法、`+`连接运算符、对 sysobjects 的引用、syscolumns.xtype。

这条语句不可能从 MySQL 返回任何有用的东西。

整个语句需要重写才能查询：

```
information_schema.tables
information_schema.columns 
```

作为示例起点：

```
SET @url := 'foobar';

SELECT CONCAT('select * from `',col.table_schema
             ,'`.`',col.table_name
             ,'` where `',col.column_name
             ,'` like ''%',RTRIM(@url),'%''') AS q
  FROM information_schema.columns col 
  JOIN information_schema.tables tbl
    ON tbl.table_schema = col.table_schema
   AND tbl.table_name = col.table_name
   AND tbl.table_type = 'BASE TABLE'
 WHERE col.data_type IN ('varchar','char')
   AND col.character_maximum_length >= 30
   AND col.table_schema = 'mydatabase'; 
```

* * *

**更新：**

要在每个查询的结果集中包含一个“查询 ID”，以便您可以确定哪些查询正在返回一行...

```
SELECT CONCAT('select ',@rn := @rn + 1, ' as q, t.* from `',col.table_schema
             ,'`.`',col.table_name
             ,'` t where `',col.column_name
             ,'` like ''%',RTRIM(@url),'%''') AS q
  FROM (SELECT @rn := 0) r
  JOIN information_schema.columns col 
  JOIN information_schema.tables tbl
    ON tbl.table_schema = col.table_schema
   AND tbl.table_name = col.table_name
   AND tbl.table_type = 'BASE TABLE'
 WHERE col.data_type IN ('varchar','char')
   AND col.character_maximum_length >= 30
   AND col.table_schema = 'mydatabase'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T21:32:16.977

不要忘记分号：

```
DECLARE @url VARCHAR(255);
SET @url = '1720';
SELECT  .... ; 
```

此外，`@`在 Mysql 中具有特殊含义（看起来像您移植 T-SQL 脚本）。与局部变量相比，您不需要声明它（没有`@`在 SP/Function/Trigger 的主体中使用）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T21:40:20.640

在 MySQL 中，您不能在没有范围的情况下使用“Declare”，您只能在 Begin...End 块中使用它（例如：在存储过程等中）。
您不需要“Declare...”行，只需设置变量 @url 就足以让脚本运行。

# function - AutoIt 模拟新的脚本行

> ID：12222680
> 
> 赞同：-1
> 
> 时间：2012-08-31T21:28:04.770
> 
> 标签：function, loops, inline, autoit

我需要一些方法来循环单行。

有没有办法在 AutoIt 中模拟新行？因为如果我尝试

```
While 1 MsgBox (0,1,2) Wend 
```

不起作用。所以我想知道是否有办法模拟一条新线，比如

```
While 1 - MsgBox (0,1,2) - Wend 
```

或一些功能来做到这一点。我也已经尝试过这样做：

```
Func repeat($func, $limit)
    $i = 0
    While $i <= $limit
            Execute($func)
            $i = $i + 1
    WEnd
EndFunc 
```

但它只执行`Execute($func)`一次，即使我更改`While $i <= $limit`为`While 1`.

* * *

我努力了

```
Execute("While $i <= 5" & @LF & "MsgBox(0, 1, 24)" & @LF & "$i = $i + 1" & @LF & "WEnd") 
```

`@LF`同样，即使我更改为`@CRLF`, `@CR`, `Chr(13)`, `\n`, `\r`...它也不起作用

* * *

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:46:43.860

没有。AutoIt 每行只能处理一个语句。如果你想做任何循环，你将不得不将它分隔在多行上。

如果您想亲自查看，AutoIt 的留言板上也有人问：[http ://www.autoitscript.com/forum/topic/141165-loops-in-a-single-line/](http://www.autoitscript.com/forum/topic/141165-loops-in-a-single-line/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:22:40.673

AutoIt 不是为了在一行中读取多个命令而构建的。没有用于在单行上解析多个命令的分隔符。AutoIt 的开发人员也不打算使用这种类型的语法，因为它脱离了当前的语法实现。

# java - Java：埃拉托色尼筛法：数组作为参数

> ID：12222683
> 
> 赞同：1
> 
> 时间：2012-08-31T21:28:14.170
> 
> 标签：java, arrays, iteration, sieve-of-eratosthenes

我的目标是关闭或设置为假，所有不是素数的阵列点。数组作为参数提供。

```
public static boolean[] sieveOfEratosthenes(boolean [] a){

    int increment= 2;

    for(int n = 0; n < 9; n++){
        for(int i = increment; i < a.length; i += increment){
            a[i] = false;
        }
        increment += 1;
    }   
    a[2] = true;
    a[3] = true;
    a[5] = true;
    a[7] = true;
    return a;
} 
```

代码工作正常，我只是想知道是否有比使用更有效的方法：

```
a[2] = true;
a[3] = true;
a[5] = true;
a[7] = true; 
```

将这些数组项重置为真。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:42:51.917

一个好方法是在迭代 * 2 处开始循环。所以你的循环看起来像这样

```
int increment= 2;

for(int n = 0; n < 9; n++){
    for(int i = increment*2; i < a.length; i += increment){
        a[i] = false;
    }
    increment += 1;
} 
```

这样你就跳过了第一个。

其次修改您的外部循环，使其忽略已经为假的值，因为它的主要因素照顾了它的产品。现在你的循环看起来像这样

```
int increment= 2;

for(int n = 0; n < 9; n++){
    if(a[increment]) {
      for(int i = increment*2; i < a.length; i += increment){
          a[i] = false;
      }
      increment += 1;
    }
} 
```

第三个处理数组上的任何大小的数组循环以获得增量值

```
int count = a.length;

for(int increment = 2; increment < count; increment++){
    if(a[increment]) {
      for(int i = increment*2; i < count; i += increment){
          a[i] = false;
      }          
    }
} 
```

该电流回路假定 1 和 0 被视为素数。因此设置`a[0] = a[1] = false;`以反映 0 和 1 不是素数的事实。

# c - CreateContext 期间的 BAD_CONFIG

> ID：12222685
> 
> 赞同：2
> 
> 时间：2012-08-31T21:28:42.697
> 
> 标签：c, opengl-es, opengl-es-2.0

我正在尝试使用 Open GLESv2 创建一个 GPGPU 程序。我已经在我发现的一些演示中提出了这个想法，现在我正在实施它。我坚持创建渲染上下文。

我不需要显示任何东西，所以我创建了一个 PixelBuffer Surface，然后尝试创建我的上下文。不过我`eglCreateContext`在扔`EGL_BAD_CONFIG`。

任何人都可以提出任何建议吗？我正在附加我的配置。

**编辑：** 刚刚在我的 Windows 机器和模拟器上尝试过，认为这可能是 VMWare 和软件加速的 OpenGL v2.0 问题。同样的问题，EGL_BAD_CONFIG。

* * *

```
EGLint major_ver, minor_ver, num_configs;
EGLint error;
EGLConfig config;

EGLint config_attrib[] =
{
        EGL_SURFACE_TYPE, EGL_PBUFFER_BIT,
        EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
        EGL_RED_SIZE, 5,
        EGL_BLUE_SIZE, 6,
        EGL_GREEN_SIZE, 5,
        EGL_DEPTH_SIZE, 1,
        EGL_NONE
};
EGLint context_attrib[] =
{
        EGL_CONTEXT_CLIENT_VERSION, 2,
        EGL_NONE
};

EGLint pb_attrib[] =
{
        EGL_WIDTH, 512,
        EGL_HEIGHT, 512,
        EGL_LARGEST_PBUFFER, EGL_TRUE,
        EGL_NONE
};

eglChooseConfig(ctx->egl_display_, attribute_list, &config, 1, &num_configs)

ctx->pb_surface_ = eglCreatePbufferSurface(ctx->egl_display_, config, pb_attrib);

ctx->egl_context_ = eglCreateContext(ctx->egl_display_, config, EGL_NO_CONTEXT, context_attrib); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:53:29.110

问题是即使 eglChooseConfig 返回`EGL_TRUE`它返回 0 个配置...确保检查返回的配置数量...

# ajax - JSF f:ajax 监听器 vs commandButton 动作

> ID：12222687
> 
> 赞同：7
> 
> 时间：2012-08-31T21:29:04.997
> 
> 标签：ajax, jsf-2

我很好奇这两种执行ajax调用的方式有什么区别：

```
<h:commandButton value="Submit" action="#{bean.action}">
   <f:ajax execute="@form" render="component"/>
</h:commandButton> 
```

和

```
<h:commandButton value="Submit">
   <f:ajax listener="#{bean.action}" execute="@form" render="component"/>
</h:commandButton> 
```

似乎人们更频繁地使用第一种方式，但第二种方式似乎也很好用......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T21:33:07.930

第一种方式允许通过返回`String`结果进行导航，而第二种方式则不允许。如果客户端禁用了 JS，第二种方式不会调用任何东西，而第一种方式[会优雅地降级](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript#Degrading_gracefully)。事实上，第一种方式使用得更频繁。

第二种方式是组件中唯一没有`action`属性的方式，比如`<h:selectOneMenu>`等等。

# regex - 用空格替换尾随句点

> ID：12222689
> 
> 赞同：11
> 
> 时间：2012-08-31T21:29:08.297
> 
> 标签：regex, r

我对 R 中的正则表达式有一个奇怪的请求。我有字符串向量，其中一些有多个尾随句点。我想用空格替换这些句点。示例和期望的结果应该清楚我所追求的（也许我需要用我给出的替换参数而不是模式参数来攻击它`gsub`）：

**示例和尝试：**

```
x <- c("good", "little.bad", "really.ugly......")
gsub("\\.$", " ", x)
  #produces this
  #[1] "good"              "little.bad"        "really.ugly..... "
gsub("\\.+$", " ", x)
  #produces this
  #[1] "good"         "little.bad"   "really.ugly " 
```

**期望的结果**

```
[1] "good"              "little.bad"        "really.ugly      " 
```

所以原始向量 (x) 的最后一个字符串末尾有 6 个句点，所以我想要 6 个空格，而不触及真的和丑陋之间的句点。我知道最后的`$`样子，但无法超越这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T21:33:25.777

尝试这个：

```
gsub("\\.(?=\\.*$)", " ", mystring, perl=TRUE) 
```

**解释：**

```
\.   # Match a dot
(?=  # only if followed by
 \.* # zero or more dots
 $   # until the end of the string
)    # End of lookahead assertion. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:04:23.283

蒂姆的解决方案显然更好，但我想我会尝试另一种方式。使用自由使用`regmatches`帮助我们在这里

```
x <- c("good", "little.bad", "really.ugly......")
# Get an object with 'match data' to feed into regmatches
# Here we match on any number of periods at the end of a string
out <- regexpr("\\.*$", x)

# On the right hand side we extract the pieces of the strings
# that match our pattern with regmatches and then replace
# all the periods with spaces.  Then we use assignment
# to store that into the spots in our strings that match the
# regular expression.
regmatches(x, out) <- gsub("\\.", " ", regmatches(x, out))
x
#[1] "good"              "little.bad"        "really.ugly      " 
```

所以不像单个正则表达式那么干净。但是我从来没有真正开始学习 perl 正则表达式中的那些“前瞻”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T21:41:44.837

当我等待一个有意义的正则表达式解决方案时，我决定想出一种荒谬的方法来解决这个问题：

```
messy.sol <- function(x) {
paste(unlist(list(gsub("\\.+$", "", x), 
    rep(" ", nchar(x) -  nchar(gsub("\\.+$", "", x))))),collapse="")
}

sapply(x, messy.sol, USE.NAMES = FALSE) 
```

我会说蒂姆的有点漂亮:)

# php - 从当前站点源代码接收带有附件的电子邮件

> ID：12222690
> 
> 赞同：0
> 
> 时间：2012-08-31T21:29:15.077
> 
> 标签：php, jquery, attachment, email-attachments

这个想法是用户可以在屏幕上排列 div 块（拖放）。当用户认为职位不错时，他们可以通过电子邮件将职位及其姓名和电子邮件发送给我。

```
<form action="#">       
<input name="name" id="name">        
<input name="email" id="email">       
<input name="htmlcontent" id="htmlcontent">        
<p><button type="submit">Send to DKdL</button></p>
</form> 
```

表格将由手工填写。除了将粘贴完整源代码的字段（通过 jquery - 也将在此处过滤）。这就是我以后会知道每个 div 块的位置的方式。这将通过 jquery post 发送。

```
$('form').on('submit', function(e) {

var html = $('html').html();
var htmlSending = '<html>' + html + '</html>';
var noScript = htmlSending.replace(/script/g, "h6");

//alert(noScript);
$('input#htmlcontent').val(noScript);

$.post('http://www.address/save.php', $(this).serialize(), function(data) {
    //callback to use for thank you message
    console.log(data);
});

e.preventDefault();
}); 
```

在 php 中，我希望将第三个字段（带有复制和过滤的 html 源代码）保存为 .html 文件，并在其后面加上名称和日期（例如：peter_01-09-2012.html）并包含在电子邮件中将发送给我的附件。

```
<?php

$name = name;
$email = email;
$htmlcontent = htmlcontent;
//file_put_contents('file.html', '$htmlcontent'); 

$to = '"My Email <my.email@mail.com>';
$headers = 'MIME-Version: 1.0' . "\r\n"; 
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 

$message =
<p>Name: $name</p>
<p>E-Mail: $email</p>
here should be a url to the HTML Content: $htmlcontent
or a real email attachment
;   
?> 
```

这有可能实现吗？不幸的是，我的知识在 php 中没有。我只知道可以写入文件。但是我如何告诉 php 将其作为附件包含在电子邮件中？如果我的问题有更好的选择，我当然也喜欢听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:43:47.383

由于 PHP`mail()`实际上是发送原始电子邮件内容的简单“代理”，因此您有两种选择：

1.  使用一些功能更强大的 PHP 包，允许您构造带有附件的邮件消息（例如 PEAR Mail_Mime）。

2.  了解如何构建多部分邮件内容。由于在这种情况下它非常简单（并且仅涉及诸如`Content-type`,之类的术语`Content-disposition`），因此我会在这里推荐它。

最简单的就是通过例子来学习，所以请在您的电子邮件客户端中获取一些简单的邮件（带附件）并查看该邮件的来源。您甚至可以将此源用作发送到 PHP`mail()`函数的数据的模板。

# c# - 实体框架：使用组合框选择，出现铸造错误

> ID：12222692
> 
> 赞同：0
> 
> 时间：2012-08-31T21:29:25.660
> 
> 标签：c#, entity-framework, data-binding, casting

使用组合框处理简单实体框架工作示例。我正在尝试根据组合框选择来填充 datagridview，但我遇到了**投射**错误

我有简单的 MDF 数据库，我首先使用数据库为 EF 生成模型。在 EF 中，NiftyFO 是一个由 TradId、StrikePrice、VolumeTraded 等组成的模型。

```
 NiftyEntities nf = new NiftyEntities();
        NiftyFO nfo = new NiftyFO();

        nfo = (NiftyFO)(comboBox1.SelectedItem);

         var result = from x in nf.NiftyFOes
                     where x.StrikePrice ==nfo.StrikePrice
                     select x;
        dataGridView1.DataSource = result;
        dataGridView1.Refresh(); 
```

当我更改 ComboBox 选择时它显示的确切错误是

```
 Unable to cast object of type '<>f__AnonymousType0`1[System.Nullable`1[System.Decimal]] 
     to type 'agileLocal.NiftyFO.' 
```

和

组合框填充行使价并通过 ef 从数据库加载，代码如下所示

```
 NiftyEntities nf = new NiftyEntities();
          var result2 = from x in nf.NiftyFOes
                          select new { x.StrikePrice };
            //comboBox1.DisplayMember = "StrikePrice";
            comboBox1.DataSource = result2; 
```

解决了 ：

```
select new { x.StrikePrice }; 
```

我刚改了这条线

`select x.StrikePrice`. 它奏效了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:44:43.030

那么你的代码将是

```
 decimal myselected = (decimal)(comboBox1.SelectedItem);

 var result = from x in nf.NiftyFOes
                 where x.StrikePrice == myselected 
                 select x;
    dataGridView1.DataSource = result;
    dataGridView1.Refresh(); 
```

因为在你的`select new { x.StrikePrice };`你选择的是`StrikePrice`而不是它自己的对象

# entity-framework - 渴望在实体框架中加载多个子集合

> ID：12222694
> 
> 赞同：1
> 
> 时间：2012-08-31T21:29:30.403
> 
> 标签：entity-framework

我是 Entity Framework 的新手，但对 NHibernate 有经验。我正在尝试加载具有多个子集合的对象，并且我正在尝试急切地加载两个子集合。

我想我可以做类似的事情：

```
return DataContext.Users.Include("ChildCollection1").Include("ChildCollection2") 
```

但是有没有办法将它分成两个查询来提高性能，就像我在 NHibernate 中使用 Future 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:07:55.723

我对NH一无所知。但是你的意思是在EF中显式加载吗？

```
Context.Entry(aUser).Collection(u => u.ChildCollectionX).Load(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:47:51.153

正如[这里](http://nhforge.org/blogs/nhibernate/archive/2009/04/27/nhibernate-futures.aspx)所解释的，NHibernate 中的期货是一种将查询的执行推迟到稍后的时刻以便批量执行查询的方法。它使用 NHibernate 的[MultiQuery 功能](http://nhforge.org/blogs/nhibernate/archive/2008/09/06/eager-loading-aggregate-with-many-child-collections.aspx)。

实体框架没有任何看起来像这样的东西。到目前为止，`Include`这是一次性加载子集合的唯一选项。

路线[图](http://entityframework.codeplex.com/wikipage?title=Roadmap)虽然不是很详细，但也没有在这个方向上显示任何计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T14:28:36.597

到目前为止，我发现的最佳解决方案是 EntityFramework.Extended 库中的 FutureQueries 功能：[https](https://github.com/loresoft/EntityFramework.Extended/wiki/Future-Queries) ://github.com/loresoft/EntityFramework.Extended/wiki/Future-Queries 。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-11T22:21:15.043

我无法使其与 lambdas 一起使用，但它与字符串路径一起使用...

```
 using (var db = new CMWebTestContext())
        {
           var q = db.WebTestResults.Include("TestCollection.TransactionCollection.PageCollection");
           var r = q.ToList();
           return r;
        } 
```

# javascript - 用括号括住选定的文本（如 Textmate）

> ID：12222696
> 
> 赞同：-1
> 
> 时间：2012-08-31T21:29:53.310
> 
> 标签：javascript

我想要 javascript 和 HTML 用于在`textarea`选择所需文本时用括号、大括号、方括号和单引号或双引号括起来的文本，并且键入大括号的“开头”（左）版本，引号，父母之类的

例如，如果文本区域包含“A quick brown fox jumped”，并且选择了“brown fox”，然后我按下键盘上的左大括号键，则“brown fox”应该被大括号包围，并且未被选中. 括号、单/双引号和括号也是如此。

该解决方案应该适用于最新版本的 Chrome、FF 和 Safari。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:10:09.877

看看这个完整的解决方案：

```
<html>
    <head>
        <title></title>

        <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.min.js"></script>
        <script type="text/javascript">
            (function($){
                $(document).ready(function(){
                    var keyMap = {
                        '(': ')',
                        '[': ']',
                        '<': '>',
                        '{': '}',
                        '"': '"',
                        '\'': '\''
                    };

                    $('.editor').keypress(function(e){
                        if(this.selectionStart == this.selectionEnd)
                            return true;

                         e.preventDefault();

                         var txtCur = $(this).val();
                         var left = txtCur.substring(0, this.selectionStart);
                         var middle = txtCur.substring(this.selectionStart, this.selectionEnd);
                         var right = txtCur.substring(this.selectionEnd);

                         var cur = String.fromCharCode(e.keyCode);

                         if(keyMap[cur])
                            middle = cur + middle + keyMap[cur];
                         else
                            middle = cur;

                         var pos = (left+middle).length;
                         $(this).val(left+middle+right);
                         this.setSelectionRange(pos,pos);

                    });
                });
            })(jQuery);
        </script
    </head>
    <body>
        <textarea class="editor">abcdefghijklmnopqrstuvwxyz</textarea>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:34:04.357

在 Google 上搜索如何获取选定的文本范围 - 您不需要内容，只需要开始位置和长度。然后将字符串`substr`分解为“之前、之间和之后”部分，插入括号并将这些部分再次连接在一起。

如果您编写了代码并且遇到了真正的问题，我将很乐意提供帮助。同时，请阅读[这篇谴责您在这里所表现出的态度的博文](http://whathaveyoutried.com/)。

# algorithm - 确定线段是否在多边形内

> ID：12222700
> 
> 赞同：2
> 
> 时间：2012-08-31T21:30:15.230
> 
> 标签：algorithm, language-agnostic, computational-geometry

假设我们有带顶点的凸多边形

```
(v0,v1,....vn) 
```

我的目标是确定给定点是否有`p(x,y)`任何线段连接该点和多边形的任何顶点是否在多边形内，甚至对于给定的两个点

```
p(x0,y0)  `p(x1,y1)` 
```

连接这两个点的线段在多边形内？我已经搜索了很多关于这个的网站，但我仍然很困惑，一般我认为我们必须比较顶点的坐标，并通过确定哪个点的坐标小于或大于另一个点的坐标，我们可以确定任何线段的位置，但是我不确定这有多正确，请帮助我

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T21:49:01.827

假设一个点`P`和一个`n`顶点`V_1`为`V_n`(n > 2) 的凸多边形。

按相对于选定顶点的角度对多边形的顶点进行排序，以便它们按顺时针或逆时针顺序排列。那么多边形的边是`V_1 -> V_2, V_2 -> V_3, ..., V_(n-1) -> V_n, V_n -> V_1`。

现在，对于每条边，检查叉积的值`(V_(i+1) - V_i) x (P - V_i)`。如果所有值都 >= 0 或所有值 <= 0，则现在`P`位于多边形内。

[TopCoder 上](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=geometry3)有一个很好的教程，用于解决多边形不必是凸面的更普遍的问题。他们所做的是从测试点发送一条射线并检查它与多少条边相交。

**注意：**此处使用的叉积定义为`(u1, u2) x (v1, v2) := u1*v2 - u2*v1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T13:51:31.863

如果您的多边形是凸的，并且您在当前多边形之外添加一个新点，即您要检查它是在多边形外部还是内部的点，则生成的多边形将是凸的。实际上，这意味着上述格雷厄姆扫描永远不会失败，并且添加的点位于多边形之外。

然而，更快更好的方法是将点投影到多边形边缘的法线轴上。这依赖于分离平面定理。如果点和多边形的边缘之间有一条线，则它在外面。对于多边形的每条边，取法线。将该点投影到该边的法线轴上。对所有法线​​执行此操作，并检查该点是否在该投影轴的多边形的最大和最小投影内。如果总是这样，则该点位于多边形内。如果它失败了，你可以停下来，因为它在外面由于一个分离的平面。

这将使算法以线性时间而不是 O(n log n) 运行，因为您不必根据顶点的角度对顶点进行排序。当您有大量顶点时，这是理想的选择。

# python - 检查列表是否仅包含项目 x

> ID：12222706
> 
> 赞同：16
> 
> 时间：2012-08-31T21:31:41.053
> 
> 标签：python, list

假设所有 w、x、y 和 z 都可以在列表 A 中。是否有检查它是否*只*包含x 的快捷方式——例如。不否定其他变量？

w、x、y 和 z 都是单个值（不是列表、元组等）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-31T21:35:29.750

```
A=[w,y,x,z]
all(p == x for p in A) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-31T22:21:36.440

那，或者如果您不想处理循环：

```
>>> a = [w,x,y,z]
>>> a.count(x) == len(a) and a 
```

（`and a`添加以检查空列表）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T21:38:41.950

这将检查所有`element`s in`A`是否等于`x`不参考任何其他变量：

```
all(element==x for element in A) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-31T21:39:08.597

如果列表中的所有项目都是可散列的：

```
set(A) == set([x]) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-31T21:40:05.540

```
{x} == {w,x,y,z} & set(A) 
```

如果所有`[w,x,y,z]`和其中的项目`A`都是可散列的，这将起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-31T21:39:17.067

我不确定如果*不否定其他变量*意味着什么，但我怀疑这就是你想要的：

```
if all(item == x for item in myList): 
    #do stuff 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-31T21:56:54.077

这是另一种方式：

```
>>> [x] * 4 == [x,w,z,y] 
```

许多已经说过的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T21:57:18.787

这个问题有两种解释：

首先，是 [w,y,z] 中包含的 x 的值：

```
>>> w,x,y,z=1,2,3,2
>>> any(x == v for v in [w,y,z])
True
>>> w,x,y,z=1,2,3,4
>>> any(x == v for v in [w,y,z])
False 
```

或者这可能意味着它们代表同一个对象：

```
>>> w,x,y,z=1,2,3,4
>>> any(x is v for v in [w,y,z])
False
>>> w,x,y,z=1,2,3,x
>>> any(x is v for v in [w,y,z])
True 
```

# php - Facebook 登录按钮回调

> ID：12222708
> 
> 赞同：0
> 
> 时间：2012-08-31T21:31:57.570
> 
> 标签：php, asp.net, facebook

使用 Facebook 登录

代码如下，

```
 <div id="fb-root"></div>
<div class="fb-login-button"  data-width="200" onlogin="GetData()"></div>
<script>
                window.fbAsyncInit = function () {
                FB.init({
                        appId: 'My ID',
                        status: false,
                        cookie: true,
                        xfbml: true,
                        oauth: true
                });
                };        
                (function (d) {
                var js, id = 'facebook-jssdk'; if (d.getElementById(id)) { return; }
                js = d.createElement('script'); js.id = id; js.async = true;
                js.src = "//connect.facebook.net/en_US/all.js";
                d.getElementsByTagName('head')[0].appendChild(js);
                } (document));

        function GetData()
        {
        alert(11);
        }

</script> 
```

1-它工作正常，但用户按下 facebook 登录按钮后 GetData 函数不调用 2-我想在这个函数中编写代码给我电子邮件，使用名称，......关于这个用户的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T18:12:46.807

为 facebook 登录调用此函数，您的`GetData`函数在用户登录后调用。

函数 facebooklogin(){

```
 FB.login(function(response) {
     if (response.authResponse) {
             GetData();
        });

        } 
```

# html - 带有颜色边框和不透明度的框内的弯曲框

> ID：12222713
> 
> 赞同：0
> 
> 时间：2012-08-31T21:32:30.767
> 
> 标签：html, css

我已经查看了几个 Stack Overflow 问题，虽然有些问题帮助我制作了迄今为止我所拥有的东西，但我仍然无法让它看起来与我所追求的完全一样。我正在努力实现[这一](http://www.ryanw.co.uk/box.png)目标。

到目前为止[，这是我](http://www.ryanw.co.uk/box2.png)查看时的结果。

除了中间区域的那些白色角落之外，它似乎几乎就在那里。谁能帮我弄清楚我做错了什么？我的代码如下。

HTML：

```
<div class="outerborder">
       <div class="middleborder">   
           <div class="innerborder">
               <div class="contentarea">

                  Text here lalalalala

               </div>
           </div>
       </div>
    </div> 
```

CSS：

```
.outerborder
{
 border-radius:10px;
 border: 1px solid #000;
}

.middleborder
{
 border-radius:10px;
 border: 10px solid rgba(102,153,102, .5);
}

.innerborder
{     
 border-radius:10px;
 border: 1px solid #000;
}

.contentarea
{
 padding: 10px;
 border-radius:10px;
 background: #c7c7c7;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:40:07.270

我正在进一步编辑这个。

摆脱`middleborder`并使用它。

```
 <style>
        .outerborder
        {
         border-radius:10px;
         border: 1px solid #000;
         background:rgba(102,153,102, .5);
         padding:10px;
        }

        .contentarea
        {
         padding: 10px;
         border-radius:10px;
         background: #c7c7c7;
         border: 1px solid #000;
        }
        </style>
        <div class="outerborder">
         <div class="contentarea">
             Text here lalalalala
         </div>
       </div>​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:50:38.067

您只需 1 个元素即可： http: [//dabblet.com/gist/3559637](http://dabblet.com/gist/3559637)

HTML：

```
<div class='b'>Text-here lalala</div> 
```

CSS：

```
.b {
    position: relative;
    padding: 10px;
    border: solid 1px #000;
    border-radius: 10px;
    box-shadow: 0 0 0 10px rgba(102, 153, 102, .5);
    margin: 125px 15px 0;   
}
.b:before {
    position: absolute;
    top: -11px; right: -11px; bottom: -11px; left: -11px;
    border: solid 1px #000;
    border-radius: 21px;
    content: '';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T21:47:30.493

```
<div class="outerborder">
       <div class="contentarea">
          Text here lalalalala
       </div>
</div>

.outerborder
{
  border-radius:10px;
  border: 1px solid #000;
  background-color:rgba(102,153,102, .5);
  padding:10px;
}
.contentarea
{
  padding: 10px;
  border-radius:10px;
  border:1px solid #000;
  background: #c7c7c7;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T21:49:37.060

你让它变得比它需要的更复杂。

只需要2个div。像这样：http: [//jsfiddle.net/fnycs/](http://jsfiddle.net/fnycs/)

# java - 用于多个相同任务的 Java ThreadPool

> ID：12222717
> 
> 赞同：0
> 
> 时间：2012-08-31T21:32:41.647
> 
> 标签：java, multithreading, threadpool

我有 1 个线程，唯一的工作就是从套接字中抓取 DatagramPackets 并将它们粘贴在缓冲区中。另一个线程在该缓冲区外工作，处理 DatagramPackets。我希望有一个线程池在该缓冲区之外工作。

我曾想过使用固定的线程池来做到这一点。为此，我是否需要创建池，然后提交足够的可运行文件以供执行以填满它？我曾希望有一种方式说“这是我希望你执行的线程/可运行，这是我想要运行的数量，GO！”。有这样的方法吗？固定线程池以外的其他东西更适合吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:36:04.087

由[Executors.newFixedThreadPool](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)创建的固定线程池可以正常工作。

实现的内部语义是线程池将优先创建一个新线程，直到它达到其首选大小（核心池大小），这似乎是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:36:33.700

当您使用 an 时，`ExecutorService`您将作业提交`Runnable`到线程池，该线程池由池中的线程依次运行。您可以执行以下操作之一：

1.  让每个人都`Runnable`坐在一个循环中，从一个`BlockingQueue`循环中出列以处理每个数据包。这可能比所有这些都围绕您的缓冲区对象同步更容易。就像是：

    ```
    public void run() {
       while (!shutdown) {
          packet = packetQueue.take();
          processPacket(packet);
       }
    } 
    ```

2.  或者，您可以将每个数据包作为作业本身提交到线程池，尽管这可能会增加您的对象负载。您可以处理每个数据包，提取有效负载，并使用处理有效负载的方法在`Runnable`有效负载周围创建一个包装器。`run()`类的内容`Runnable`将类似于：

    ```
    Payload payload;
    public void run() {
       // process packet here
       processPayload(payload);
    } 
    ```

对于这两种机制，我会选择一个与您的处理器数量和处理任务的性质最匹配的固定线程数。下面的示例使用处理器的数量，但您可能希望为 GC 或其他任务减少一些。如果其他 IO 上的处理块，您可能需要更多。只有性能测试会告诉您最佳值是多少。

```
// start a pool that uses the number of threads that there are processors
ExecutorService threadPool = Executors.newFixedThreadPool(
    Runtime.getRuntime().availableProcessors()); 
```

# jquery - 主干.js 和 node.js 与 jQuery 完全不同吗？

> ID：12222723
> 
> 赞同：2
> 
> 时间：2012-08-31T21:33:08.353
> 
> 标签：jquery, django, node.js, backbone.js

这是一个菜鸟问题，但我真的很想问出来。我知道`node.js`可以处理服务器端脚本并为 Web 应用程序“提供结构”，但是当我已经知道并处理所有服务器`backbone.js`时，为什么还要首先学习它们使用 .`jQuery`的侧面逻辑`Django`。如果我使用`backbone.js`或`node.js`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T07:09:08.707

对此的简单概述答案是，Backbone 为您提供了前端 javascript 代码结构。当我说结构时，我的意思是您的代码将以系统、标准、一致的方式在您的应用程序中实现最常见的操作，并且更有条理，以便您和可能的其他人可以清楚地理解复杂代码的不同部分。它适用于以 RESTful 方式从服务器发回的任何 JSON 数据，因此您的 Django 技能将得到充分利用。

您没有理由不能（仅）在您的项目中使用 jQuery，（Backbone 实际上使用 jQuery 进行 DOM 操作以及 AJAX 调用）但是如果您曾经看到代码是如何与代码的其他部分蠕动并交织在一起的，混合与数据相关的视图/演示部分......如果您曾经为必须调试此类代码或扩展此类代码或不得不从头开始重建所有应用程序所需的基本功能而苦苦挣扎。 .. 或者，如果你发现自己做事前后不一，你就会开始意识到一点帮助是件好事。;-)

骨干。

我可能是错的，但我只是想冒险一下，您可能不熟悉 MVC 框架之类的东西。如果您知道 MVC 框架是什么（更重要的是，它对开发有什么好处），那么 Backbone 的优势将显而易见。Backbone 是一种 MVC。

特别是对于较大的项目，将数据 > 从表示 > 从控制逻辑分离在代码维护方面变得至关重要。即模型、视图、控制=MVC。您可以将 Backbone 视为客户端 javascript 的 MVC 框架。如果您掌握技术知识，它实际上是 MVC 的一种变体（更像 MV*），但要点是相同的。随着 Javascript 性能的提高和应用程序变得越来越复杂和庞大，这样的框架对于许多开发人员来说变得越来越必要。虽然您有其他选项（Knockout.js 等）可以做类似的事情，但 Backbone 在人群中是一个非常不错的选择。

要回答您的其他一些子问题：

Backbone 将与您的 Django 服务器设置很好地配合使用。Backbone 使用 JSON 来回处理所有数据。例如，使用 Backbone - 您的基本数据对象就是所谓的模型。使用 JSON 哈希创建模型。例如，用户模型可能采用 JSON：

```
{"user":"Rajat", "username":"backboneLearner"} 
```

使用 Backbone 模型而不只是将其作为常规 JS 对象的优点是模型已经内置了许多便利和细节。让我们举个例子：

```
// Define a Model
var User = Backbone.Model.extend({
    defaults: {
        "user":undefined,
        "username":undefined
    },
    urlRoot: 'user'
});

// Instantiate a Model
var userModel = new User({
    "user":"Rajat",
    "username":"backboneLearner"
}); 
```

想要将此保存到您的服务器吗？

```
userModel.save(); 
```

自动为您发出 POST 呼叫。没有长 ajax 代码 - 已经在后台为您完成。不喜欢我给你的用户名？让我们改变它。

```
userModel.save({"username":"coolguy"}); 
```

使用相同的`save()`方法，Backbone 更改了用户名属性并为您发出了 PUT 请求而不是 POST，因为它知道您已经保存了用户。（保存的模型有一个由你的 Django 服务器提供的 id）Backbone 表示欢迎。

也许您希望您的 DOM 在名称更改时更改：

```
<div id="nameDiv">coolguy</div> 
```

Backbone View 对象负责这类事情。事实上，他们和模型玩得非常好。在您的视图中，您可以执行此类操作。

```
// Create a listener for changes on your user model
this.userModel.on('change', this.updateNameDiv, this); 
```

是的。Backbone 提供了模型、集合和视图可以制作和监听的各种特殊事件。你不限于这些。您也可以制作自定义的。

```
// This is the event handler declared in the view
updateNameDiv: function(model) {
    this.$("#nameDiv").html(model.get('username'));
}

// Change userModel
userModel.set("username","superman"); 
```

而已。你的 DOM 现在看起来像这样。

```
<div id="nameDiv">superman</div> 
```

在遍历和操作 DOM 时，Backbone 使用了所有 jQueries 产品。您还可以使用您拥有的所有其他 javascript 技能大量自定义 Backbone。它是一种框架，可让您自由地做出自己的选择并对其进行扩展。底线是，如果您已经了解 jQuery，Backbone 将不会感到限制。作为另一层抽象，Backbone 使许多繁琐的事情变得简单得多。这是一个不断发展的社区，一旦你使用它，你可能不想在没有它的情况下重新编码。我声称的好处并不是 Backbone 独有的。肯定还有其他一些聪明的框架。但我希望，你明白为什么我认为你应该试一试。如果这个长长的解释/故事加上例子没有'

有一个初学者 TodoList 教程可以让每个人都开始。一种新的编程方式可能是一种转变，有时难以理解，但如果你后悔的话，我会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:06:31.597

它们都是不同的东西。如果您已经知道如何使用 Django 和 jQuery，您可能不需要使用它们来提高速度。但它们是新的很酷的东西，所以你至少可以玩弄它们。

# haskell - Haskell中的PNG到BMP（用于光泽）

> ID：12222728
> 
> 赞同：4
> 
> 时间：2012-08-31T21:33:26.790
> 
> 标签：haskell, png, bmp, gloss

我有 PNG 文件，[光泽库](http://hackage.haskell.org/packages/archive/gloss/1.7.4.1/doc/html/Graphics-Gloss-Data-Picture.html#t%3aBitmapData "光泽库")有一个`Bitmap`用于`Picture`. 由于文件类型，我无法使用`loadBMP :: FilePath -> IO Picture`，所以我正在搜索如何加载 PNG 文件，将其转换为 BMP，并将其提供给 `bitmapOfBMP :: BMP -> Picture`,`bitmapOfForeignPtr :: Int -> Int -> ForeignPtr Word8 -> Bool -> Picture`或`bitmapOfByteString :: Int -> Int -> ByteString -> Bool -> Picture`.

* * *

使用 JuicyPixels 进行测试

```
import Data.ByteString as B
import System.IO as A

import Codec.Picture.Png
import Graphics.Gloss.Interface.Pure.Game

main = do
    png <- B.readFile "samus.png"
    let img = decodePng png
    case img of
        Left x -> A.putStrLn x
        Right x -> do
            let bmp = encodeDynamicPng x
            case bmp of
                Left x -> A.putStrLn x
                Right x -> do
                    let pic = bitmapOfByteString 29 52 x True
                    game pic

game pic
    =  play
        (InWindow "Test" (700, 500) (10, 10))
        white
        30
        pic
        draw
        (const id)
        (const id)

draw bmp
    = bmp 
```

一切都成功了，但图像根本不一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:48:39.620

这就是我制作 JuicyPixel-repa 的原因。您在图像中读取为 Repa 数组并将其转换为，就像我在[gloss-osm](https://github.com/TomMD/gloss-osm/blob/master/Graphics/Gloss/OSM.hs)中所做的那样`Picture`：

```
repaToPicture :: Bool -> Array F.F DIM3 Word8 -> (Int, Int, Picture)
repaToPicture b arr =
let fptr = F.toForeignPtr arr
bs = BI.fromForeignPtr fptr 0 len
in (col, row, bitmapOfByteString row col bs b)
 where
  len = row * col * depth
  (Z :. row :. col :. depth) = extent arr 
```

或者，您可以直接使用 JuicyPixels，将大小写覆盖在`DynamicImage`类型上并`imgData`从包含的`Image`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T18:40:43.723

即使我没有单独提供答案，但由于托马斯的回答，我将其发布在这里而不是问题中。

提醒一下，目标是将 BMP 文件转换为 Gloss 图片，因此我编写了一个名为`bmpToPic`. 我把它放在一个模块中，因为它使用了另外两个函数，并且需要很多导入。此外，`repaToPicture`托马斯的回答在这里略有不同。

```
module PngToPic
    (pngToPic)
    where

import Data.ByteString as B
import Data.Word

import Codec.Picture.Png
import Codec.Picture.Repa
import qualified Data.ByteString.Internal as BI
import Data.Array.Repa ((:.)(..), Z, Z(..), extent, DIM3, Array)
import qualified Data.Array.Repa as R
import qualified Data.Array.Repa.Repr.ForeignPtr as F
import Graphics.Gloss.Data.Picture

pngToPic :: ByteString -> Picture
pngToPic png
    = let
        Right img -- unsafe
            = decodePng png
        repa
            = imgData (convertImage img :: Img RGBA)
    in repaToPicture True repa

repaToPicture :: Bool -> Array F.F DIM3 Word8 -> Picture
repaToPicture b arr
    = bitmapOfByteString row col bs b
    where
        bs
            = BI.fromForeignPtr fptr 0 (R.size sh)
        fptr
            = F.toForeignPtr arr'
        sh@(Z :. col :. row :. depth)
            = extent arr'
        arr'
            = flipVert arr

flipVert :: Array F.F DIM3 Word8 -> Array F.F DIM3 Word8
flipVert g
    = R.computeS $ R.backpermute e flop g
    where
        e@(Z :. x :. y :. _)
            = extent g
        flop (Z :. i         :. j         :. k)
            = Z :. x - i - 1 :. j :. k 
```

你这样使用它：

```
import Data.ByteString as B

import Graphics.Gloss.Interface.Pure.Game

import PngToPic

main = do
    png <- B.readFile "someImage.png"
    game $ pngToPic png

game pic
    = play
        (InWindow "Test" (700, 500) (10, 10))
        white
        30
        pic
        id
        (const id)
        (const id) 
```

并且图像将显示在窗口中间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-26T17:26:57.753

对于任何在 2017 年偶然发现这一点的人来说，这变得容易多了！我花了一段时间才弄清楚，因为上面的示例代码似乎不再起作用。这是我将 PNG 读入图片的函数：

```
import Codec.Picture.Repa (readImageRGBA, toByteString, reverseColorChannel)
import Graphics.Gloss

readPng :: FilePath -> Int -> Int -> IO Picture
readPng path w h = do
  (Right img) <- readImageRGBA path
  let bs = toByteString $ reverseColorChannel img
  return $ bitmapOfByteString w h (BitmapFormat TopToBottom PxRGBA) bs True 
```

# linux - 有没有办法在 Linux 的 Rails 3 上运行 rails-footnotes gem？

> ID：12222732
> 
> 赞同：2
> 
> 时间：2012-08-31T21:33:47.410
> 
> 标签：linux, ruby-on-rails-3, sublimetext2

有没有办法让[**Rails-footnotes**](https://github.com/josevalim/rails-footnotes) gem在**Linux上的****SublimeText2** Editor上的**Rails 3**上运行？

 ****它似乎只适用于 MacOS

提前致谢，

桑蒂！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T09:37:22.243

我有同样的问题，并提出了自己的[解决方案](https://github.com/toch/subl-handler)。它基于[xdg-open](http://portland.freedesktop.org/xdg-utils-1.0/xdg-open.html)。它允许配置默认应用程序并将它们链接到 MIME 类型。然后，您可以使用该命令`xdg-open`通过正确的应用程序打开文件或 URI。

这些配置为用户存储在`$HOME/.local/share/applications/`. 每个`.desktop`文件设置一个应用程序。添加新数据库后，您需要使用[update-desktop-database](http://manpages.ubuntu.com/manpages/precise/man1/update-desktop-database.1.html)构建/更新由桌面文件处理的 MIME 类型的缓存数据库来更新数据库

```
update-desktop-database $HOME/.local/share/applications/ 
```

您需要将您的应用程序设置为默认应用程序以使用[xdg-mime处理 MIME 类型](http://portland.freedesktop.org/xdg-utils-1.0/xdg-mime.html)

```
xdg-mime default <your desktop file> <your MIME type> 
```

处理 URI 的 MIME 类型以`x-scheme-handler/<your scheme>`. 例如，`x-scheme-handler/subl`对于任何以`subl://`.

Chrome 和 Firefox 浏览器在浏览此类 URI 时将使用默认应用程序。

您将在为 Sublime Text 设置的[Bash 脚本中找到详细信息。](https://github.com/toch/subl-handler/blob/master/install.sh)****

# ruby-on-rails - 是否可以将 will_paginate 与 GROUP BY 一起使用？

> ID：12222738
> 
> 赞同：5
> 
> 时间：2012-08-31T21:34:10.117
> 
> 标签：ruby-on-rails, will-paginate

我有一个庞大的数据库，我想通过使用 will_paginate 来减少查询响应时间。

我试图按列对我的条目进行分组，然后使用 will_paginate 将结果放入不同的页面。

我试着这样做

```
@list= Persons.find_by_sql(select).group_by {|t| t.gender}
@detail= @list.paginate(:page => params[:page], :per_page => 30) 
```

但它给了我这个错误：`(undefined method paginate for<Hash:0x3de9930>):`

有谁知道如何解决这个问题？

[附加信息]

will_paginate 论坛上有人这样说：

> 因为您已经必须从数据库中加载所有用户才能执行 group_by，所以我的建议只是忘记分页并按原样输出它们。

这是否意味着在使用 will_paginate 时使用 GROUP_BY 没有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-01T10:36:44.083

```
@paginated_lists = Persons.find_by_sql(select).paginate(:page => params[:page], :per_page => 30)
@details = @paginated_lists.to_a.group_by { |t| t.gender } 
```

试试这个它应该对我有用:) 使用@paginated_lists 进行分页。

# php - 我的表格中的内容没有改变

> ID：12222740
> 
> 赞同：0
> 
> 时间：2012-08-31T21:34:22.893
> 
> 标签：php, javascript, jquery, ajax, dynamic

我从内容是动态的 xml 文件 (file.xml) 加载数据，但问题是我的表中的内容是相同的，但我在文件中看到内容发生了变化。好像加载完成了一次。

请帮忙。

谢谢

代码和平：（抱歉，如果您在我的代码中发现问题）

```
 window.setInterval(function() { 
        <?php 
        $xml = simplexml_load_file("file.xml");
        foreach($xml as $node)
        {
            $name = "";
            $value = -1;

            foreach($node->attributes() as $a => $b) {
                if($a == "name")
                {
                    $name = (string)$b;
                }
                else if($a == "value")
                {
                $value = (string)$b;
                }
            }

            $vars[$name] = $value;
        }

        $json = json_encode($vars);
        ?>

        //// code to show the result in my table
    }, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:54:14.270

PHP 代表**PRE**超文本处理，这意味着 PHP 是首先生成的。

您还需要了解 PHP 是在服务器端处理的，而 javascript 是在客户端处理的。

因此，当您的 PHP 函数运行时，它将按预期加载文件，但只会加载一次。您需要将 PHP 函数放在自己的 .php 文件中，然后每秒使用一次 AJAX 请求来获取更新的表。

jQuery 中的示例，假设您的 PHP 代码在 loadtable.php 中

```
window.setInterval(function() {
    $.ajax({
        method : "GET",
        url : "loadtable.php",
        success : function(data){
            //set the body of the page to the result of the PHP file.
            $("body").html(data);
        }
    });
}, 1000); 
```

# php - 如何使用 facebook_sdk 获取 facebook 用户的朋友

> ID：12222743
> 
> 赞同：1
> 
> 时间：2012-08-31T21:34:34.043
> 
> 标签：php, facebook, facebook-graph-api

我已经成功地帮助 facebook 用户通过使用 facebook_sdk 使用他们的 facebook 登录对我的应用程序进行身份验证。

现在我想结交对我的应用程序进行身份验证的人的朋友。

如何使用 facebook_sdk 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:08:29.923

这是 jsfiddle 展示了如何从 js 中获取好友列表：http: [//jsfiddle.net/R3KF4/2/](http://jsfiddle.net/R3KF4/2/)

只需将您的应用程序 ID 和密码放在底部，以及已授权该应用程序的 fb 个人资料的 ID。

我建议您在浏览器的开发人员工具中打开网络选项卡/捕获，这样您就可以看到网络上发生了什么。

它基于我的简单提要获取器： [https ://github.com/goranobradovic/CommonCodeSnippets/blob/master/JS/fbUtils.js](https://github.com/goranobradovic/CommonCodeSnippets/blob/master/JS/fbUtils.js)

当然，要正确保护您的应用程序，您需要从服务器端代码（在 php 中）执行第一步（获取 oauth 令牌）。明确一点，你需要把你的app id和secret放到这个url中：`"https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id={appId}&client_secret={secret}"`然后从php执行get请求来获取token，然后把它作为变量放到js中，这样打开你页面的用户就看不到你的app id和secret . 然后，您可以从 js 使用`'https://graph.facebook.com/'+ userId + '/friends&' + token`与朋友一起加载 json。

# php - SQL 搜索：仅显示搜索词周围的文本

> ID：12222744
> 
> 赞同：-1
> 
> 时间：2012-08-31T21:34:35.777
> 
> 标签：php, mysql, sql

如何仅在我的 sql 搜索词周围显示文本？

例如，如果我有此文本并且我的搜索词是**气泡**：

> 人类可以看到气泡，因为它们的折射率 (IR) 与周围物质不同。例如，空气的 IR 约为 1.0003，水的 IR 约为 1.333。斯涅尔定律描述了电磁波如何在具有不同 IR 的两种介质之间的界面处改变方向；因此，即使浸入介质和浸入介质都是透明的，也可以从伴随的折射和内部反射中识别气泡。
> 
> 上述解释仅适用于浸没在另一种介质中的一种介质的气泡（例如软饮料中的气泡）；膜泡（如肥皂泡）的体积不会对光线造成很大的扭曲，由于薄膜的衍射和反射，人们只能看到膜泡。

我如何输出这样的东西（粗体）....

> 人类可以看到**气泡**，因为它们的折射率 (IR) 不同于……因此，即使浸入式介质和浸入式介质都是透明的，也可以从伴随的折射和内部反射中识别**气泡。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:51:42.660

这是一个例子。您将 sql 查询中的文本放入`$text`，但在替换关键字后显示。见[http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

```
$text = "Humans can see bubbles because..." ;
echo preg_replace("/bubbles/", "<b>bubbles</b>", $text); 
```

输出：

```
Humans can see <b>bubbles</b> because... 
```

顺便说一句 - 我不知道为什么 S/O 以不同的颜色显示人类；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:45:56.540

您可以使用一组 INSTR 和 SUBSTR 首先找到术语（使用 INSTR），然后对 '.' 执行 SUBSTR 特点。

您还需要注意边缘情况，例如没有句点时，或者您到达字符串的开头或结尾等。

# ios - 为什么 GLSL 的算术函数在 iPad 上的结果与在模拟器上的结果如此不同？

> ID：12222746
> 
> 赞同：7
> 
> 时间：2012-08-31T21:34:45.590
> 
> 标签：ios, opengl-es, floating-point, opengl-es-2.0, glsl

我目前正在寻找在 iOS 设备上运行的 OpenGL ES 2.0 片段着色器代码中的一些错误。代码在模拟器中运行良好，但在 iPad 上它有很大的问题，并且一些计算产生了截然不同的结果，例如我`0.0`在 iPad 和`4013.17`模拟器上，所以我不是在谈论可能是小的差异一些舍入错误的结果。

我注意到的一件事是，在 iPad 上，

```
float1 = pow(float2, 2.0); 
```

可以产生与以下结果截然不同的结果

```
float1 = float2 * float2; 
```

具体来说，当`pow(x, 2.0)`在包含较大负数的变量上使用时`-8`，它似乎返回了一个满足条件的值`if (powResult <= 0.0)`。

此外，这两种操作的结果（`pow(x, 2.0)`以及`x*x`）在模拟器中产生的结果与在 iPad 上的结果不同。

用过的花车是`mediump`，但我得到了同样的东西`highp`。

**这些差异有简单的解释吗？**

我正在缩小问题的范围，但这需要很多时间，所以也许有人可以在这里帮助我做一个简单的解释。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T23:17:49.890

[GLSL ES 文档](http://www.khronos.org/registry/gles/specs/2.0/GLSL_ES_Specification_1.0.17.pdf)说如果 x < 0 或 x = 0 且 y ≤ 0，则 pow 未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T16:08:09.507

在 GLSL`pow`中是作为 和 的函数实现`exp2`的`log2`。由于没有为负实数定义[对数函数](http://en.wikipedia.org/wiki/Logarithm)`pow()`，因此也不是。

请参阅第 47 页的[GLSL ES 3.0 规范](http://www.khronos.org/registry/gles/specs/3.0/GLSL_ES_Specification_3.00.3.pdf)或第 88 页的[GLSL 4.4 规范。](http://www.opengl.org/registry/doc/GLSLangSpec.4.40.pdf)

> **pow** (x, y) 继承自**exp2** (x * **log2** (y))

同样来自规范：

> genType **pow** (genType x, genType y)
> 
> *   返回 x 的 y 次幂，即 x^y
> *   如果 x < 0，则结​​果未定义。
> *   如果 x = 0 且 y <= 0，则结​​果未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T21:39:12.967

该模拟器使用 x86 浮点单元和 Mac OS X 数值库。iPad 使用 ARM FPU。

pow() 也是一个使用近似算法的库例程。

# php - php png图片透明度

> ID：12222751
> 
> 赞同：0
> 
> 时间：2012-08-31T21:35:28.787
> 
> 标签：php, drawing

我一直在使用一些代码来绘制一个圆圈，但是在从形状中删除黑色背景时遇到了问题。我正在使用 imagecopyresampled 的 AA 功能来绘制一个平滑的圆，所以我不能使用不同的绘图功能。谢谢。

```
<?php

$img_2 = imagecreatetruecolor(200, 200);

$red = imagecolorallocate($img_2, 255, 0, 0);
imagefill($img_2, 0, 0, $red);

//set circle values
$xPos = 50;
$yPos = 80;
$diameter = 40;

$img_1 = imagecreatetruecolor(($diameter + 2) * 2, ($diameter + 2) * 2);

$green = imagecolorallocate($img_1, 0, 255, 0);

//draw the circle
imagefilledarc($img_1, $diameter+1, $diameter+1, ($diameter + 2) * 2, ($diameter + 2) *      2, 0, 360, $green, IMG_ARC_PIE);
imagecopyresampled($img_2, $img_1, $xPos, $yPos, 0, 0, $diameter+2, $diameter+2, ($diameter + 2) * 2, ($diameter + 2) * 2);

header("Content-type: image/png");
imagepng($img_2);
imagedestroy($img_1);
imagedestroy($img_2);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:53:26.943

好吧，你可以这样做：

```
$img_1 = imagecreatetruecolor(($diameter + 2) * 2, ($diameter + 2) * 2);
imagesavealpha($img_1, TRUE);
imagefill($img_1, 0, 0, imagecolorallocatealpha($img_1, 255, 0, 0, 127)); 
```

或这个：

```
$img_1 = imagecreatetruecolor(($diameter + 2) * 2, ($diameter + 2) * 2);
$red = imagecolorallocate($img_1, 255, 0, 0);
imagefill($img_1, 0, 0, $red); 
```

# jquery - 如何在 jPlayer 中参数化 setMedia？

> ID：12222754
> 
> 赞同：0
> 
> 时间：2012-08-31T21:35:32.603
> 
> 标签：jquery, jplayer

我正在尝试使用 jPlayer 在我的模板中触发播放器。我需要将一个值传递给*mp3*选项，但我不知道如何将*mp3*`setMedia`设置为`music`.

```
$(document).ready(function(){
  var music = $(".album-playlist li").first().find("input").val();
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", {
        mp3: music,
      }).jPlayer("");
    },
    swfPath: "http://mysite.com/wp-content/themes/beta/libs",
    supplied: "mp3"
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:44:47.527

```
$(document).ready(function(){
  var music = $(".album-playlist li").first().find("input").val();
  $("#jquery_jplayer_1").jPlayer({
    ready: function () {
      $(this).jPlayer("setMedia", { mp3 : music }).jPlayer("");
    },
    swfPath: "http://mysite.com/wp-content/themes/beta/libs",
    supplied: "mp3"
  });
}); 
```

我将音乐变量移动到一个可以更容易定义的位置，还从传递值中的音乐变量中删除了美元符号 ($)。

如果您对其中当前包含的音乐感到好奇，可以通过插入 alert(music); 轻松找到。就在 var 音乐之后。例子：

```
var music = $(".album-playlist li").first().find("input").val();
alert(music); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:45:07.807

编辑：您的问题是关于如何打印变量，但似乎您实际上想弄清楚`setMedia`如何`jPlayer`

查看此链接[http://www.jplayer.org/latest/developer-guide/#jPlayer-setMedia](http://www.jplayer.org/latest/developer-guide/#jPlayer-setMedia)

```
$("#jquery_jplayer_1").jPlayer( {
  ready: function() {
    $(this).jPlayer( "setMedia", {
      mp3: "yourpath/movie.mp3"
    });
  },
  supplied: "mp3"
); 
```

在您的情况下，您所要做的就是移动`$music`到正确的范围。像这样：

```
$(document).ready(function(){
    var music = $(".album-playlist li").first().find("input").val();
    $("#jquery_jplayer_1").jPlayer( {
      ready: function() {
        $(this).jPlayer( "setMedia", {
          mp3: music
        });
      },
      supplied: "mp3"
    );
    $("#jquery_jplayer_1").append("Mp3: " + music);
}); 
```

# php - PHP隐藏特定页面上的div？

> ID：12222756
> 
> 赞同：5
> 
> 时间：2012-08-31T21:35:40.610
> 
> 标签：php, wordpress

我的网站位于：http: [//math.pixelworklab.com/home-study](http://math.pixelworklab.com/home-study)

我希望仅在两页上隐藏导航栏

[查看](http://math.pixelworklab.com/checkout)

[大车](http://math.pixelworklab.com/cart)

基本上防止用户在结帐时被其他链接分心。

如何使用 IF 语句在这些页面上隐藏此 div？

**更新：**

/* 导航 */

```
if ( ! function_exists( 'woo_nav' ) ) {
    function woo_nav() { 
        global $woo_options;
        woo_nav_before();
?>

<?php if (strpos($_SERVER['REQUEST_URI'],'/checkout/') === false 
       || strpos($_SERVER['REQUEST_URI'],'/cart/') === false ):?>

    <div id="navigation" class="col-full">
        <?php woo_nav_inside(); ?>
        <?php
        if ( function_exists( 'has_nav_menu' ) && has_nav_menu( 'primary-menu' ) ) {
            wp_nav_menu( array( 'sort_column' => 'menu_order', 'container' => 'ul', 'menu_id' => 'main-nav', 'menu_class' => 'nav fl', 'theme_location' => 'primary-menu' ) );
        } else {
        ?>
        <ul id="main-nav" class="nav fl">
            <?php 
            if ( get_option( 'woo_custom_nav_menu' ) == 'true' ) {
                if ( function_exists( 'woo_custom_navigation_output' ) )
                    woo_custom_navigation_output( "name=Woo Menu 1" );

            } else { ?>

                <?php if ( is_page() ) $highlight = "page_item"; else $highlight = "page_item current_page_item"; ?>
                <li class="<?php echo $highlight; ?>"><a href="<?php echo home_url( '/' ); ?>"><?php _e( 'Home', 'woothemes' ); ?></a></li>
                <?php wp_list_pages( 'sort_column=menu_order&depth=6&title_li=&exclude=' ); ?>
            <?php } ?>
        </ul><!-- /#nav -->
        <?php } ?>  

        <?php endif;?>
    </div><!-- /#navigation -->
<?php
        woo_nav_after();
    } // End woo_nav()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:39:56.927

如果不是这些页面，您如何只显示导航：

```
<?php if (strpos($_SERVER['REQUEST_URI'],'/checkout/') === false 
       || strpos($_SERVER['REQUEST_URI'],'/cart/') === false ):?>
<div ... navigation ...</div>
<?php endif;?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:48:21.797

您可以使用条件标签 [**是页面**](http://codex.wordpress.org/Function_Reference/is_page)

这将检查页面是否正在显示。将导航菜单代码包装在 else 条件中。

```
<?php
if(is_page(array(42,43))) {
// Returns true when the Pages displayed is either page ID 42 or 43\. Change it to the page id of cart and checkout.

} else {

<div ... navigation ...</div>

}
?> 
```

希望这会帮助你。干杯！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:03:48.843

您可以为这些页面使用不同的 css 文件吗？如果您可以将一个类添加到您的`div`的 中，比如说`optional_hide`，并为这两个文件添加到 css 文件中：

```
div.optional_hide {display:none;} 
```

对于其余页面，此行可能会丢失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T12:33:07.170

我认为**@Grzegorz**提供了一个非常简单而优雅的解决方案！

在任何情况下，您都可以使用双类*div*：

```
<div class="to_be_seen invisible">Bla bla blah...</div> 
```

使用您希望看到/隐藏的代码以及将 CSS 调用到特定页面模板中：

```
<style>
.to_be_seen {color:red;...}
.invisible {display:none;}
</style> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T21:43:35.620

好吧，我想你可以这样做：

```
<?php if (!in_array($post->ID, array(id_of_checkout_page, id_of_cart_page)) { ?>
    <div>...</div>
<?php } ?> 
```

# java - Webmodule 项目不工作

> ID：12222760
> 
> 赞同：0
> 
> 时间：2012-08-31T21:36:11.217
> 
> 标签：java, jakarta-ee, websphere-6.1, ibm-rad

我们有带有 websphere 1.6 版本的 IBM RAD 7，在创建 webmodule 项目时，它只采用 java 5 和 @override 注释方法不起作用。请提供提示。

谢谢，柴图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T20:46:30.967

在 Java 5 中，您不能 @override 接口的方法 - 只有类的方法。可能是这个原因...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:25:46.600

除了 Roman 和 K_K 所说的之外，WebSphere 6.1 最多只支持 Java5。另请注意，[WebSphere 6.1 将于 9 月底停止服务](http://www.ibm.com/software/websphere/support/lifecycle/)。

# foreign-keys - 一张表可以跨多个类吗？

> ID：12222761
> 
> 赞同：1
> 
> 时间：2012-08-31T21:36:28.927
> 
> 标签：foreign-keys, ormlite

我的一个 OrmLite 类/表变得太大而无法自用，需要重构。我想把班级分开而不把桌子分开。

重构前：

```
@DatabaseTable(tableName = "Table") public class Employee {
   @DatabaseField(generatedId = true) final private int id;
   @DatabaseField final private String name;
   @DatanaseField final private String address;
} 
```

重构后：

```
@DatabaseTable(tableName = "Table") public class Employee {
   @DatabaseField(generatedId = true) final private int id;
   @DatabaseField final private String name;
   @DatabaseField(foreign = true) final private Address;
}

@DatabaseTable(tableName = "Table") public class Address {
   @DatabaseField(generatedId = true) final private int id;
   @DatabaseField final private String address;
} 
```

这会起作用还是我必须拆分表才能使用外部字段？

# linux - 如何将 cd 参数限制为 bash 中的目录？

> ID：12222764
> 
> 赞同：2
> 
> 时间：2012-08-31T21:36:38.257
> 
> 标签：linux, bash, cd, archlinux

目前，当我 cd re[tab][tab] 时，bash 为我提供了包括文件和目录在内的选项。由于 cd 仅允许目录作为参数，因此给我非目录选项似乎没有任何优势。如何修改它以仅将目录作为选项？我正在使用archlinux。

```
$ cd re
redrover.sh  research/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:39:38.053

Bash 已经有了一些非常好的完成，但是如果你安装了高级自动完成，你可以得到这个（以及更多）：

```
pacman -S bash-completion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:57:57.037

看看这篇文章：[http ://embraceubuntu.com/2006/01/28/turn-on-bash-smart-completion/](http://embraceubuntu.com/2006/01/28/turn-on-bash-smart-completion/)

# php - PHP Magento 获取客户最后的订单总数

> ID：12222765
> 
> 赞同：2
> 
> 时间：2012-08-31T21:36:44.603
> 
> 标签：php, magento, magento-1.4

我在 magento 商店根文件夹（1.4）之外工作，我想获得客户的订单总额和最后订单的日期。我从这个开始：

```
$customer = Mage::getModel('customer/customer')->load($entity_id);
         $customerTotals =Mage::getResourceModel('sales/sale_collection')
              ->setCustomerFilter($customer)
              ->load()
              ->getTotals();

         echo $customerTotals->getNumOrders();
         echo money_format('$%i',$customerTotals->getLifetime()); 
```

这似乎给了我来自错误客户的总数......而且，不能完全弄清楚如何在最后一个订单日获得客户。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T19:56:42.827

这将起作用，为您提供给定客户的订单总数、总销售额和最近的订单。

代码可以缩短一点，但为了清楚起见，如下...

```
$customerId = 2;
$orderCollection = Mage::getModel('sales/order')->getCollection()
    ->addFilter('customer_id', $customerId)
    ->setOrder('created_at', Varien_Data_Collection_Db::SORT_ORDER_DESC)
;
$numberOfOrders = $orderCollection->count();
$newestOrder = $orderCollection->getFirstItem();

$orderCollection->clear()->getSelect()
    ->columns(array('total_sales'=>'SUM(main_table.base_grand_total)'))
    ->group('customer_id')
;
$totalSales = $orderCollection->getFirstItem()
    ->getData('total_sales');

//Some output to confirm...
echo "<p>" . $numberOfOrders . "</p>";
echo "<p>" . Mage::helper('core')->currency($totalSales, true, false) ."</p>";
echo "<p>" . $newestOrder->getData('increment_id') ."</p>"; 
```

# c++ - 关于 C++11 内存模型的奇怪结果（松弛排序）

> ID：12222767
> 
> 赞同：3
> 
> 时间：2012-08-31T21:36:50.580
> 
> 标签：c++, c++11, memory-model

我在 Anthony Williams 的书“C++ Concurrency”的内存模型中测试了这个例子

```
#include<atomic>
#include<thread>
#include<cassert>

std::atomic_bool x,y;
std::atomic_int z;

void write_x_then_y() {
  x.store(true, std::memory_order_relaxed);
  y.store(true, std::memory_order_relaxed);
}

void read_y_then_x() {
  while(!y.load(std::memory_order_relaxed));
  if(x.load(std::memory_order_relaxed)) {
    ++z;
  }
}

int main() {
  x = false;
  y = false;
  z = 0;
  std::thread a(write_x_then_y);
  std::thread b(read_y_then_x);
  a.join();
  b.join();
  assert(z.load()!=0);
} 
```

根据解释，对差异变量（此处为 x 和 y）的宽松操作可以自由地重新排序。但是，我重复运行了几天以上的问题。我从来没有遇到过断言 (assert(z.load()!=0);) 触发的情况。我只是使用默认优化并使用 g++ -std=c++11 -lpthread dataRaceAtomic.cpp 编译代码有人真的尝试过并点击断言吗？谁能给我解释一下我的测试结果？顺便说一句，我也尝试了不使用原子类型的版本，我得到了相同的结果。目前，这两个程序运行良好。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T21:52:36.460

这可能取决于您运行的处理器类型。

x86 没有像其他处理器那样宽松的内存模型。特别是，对于其他商店，永远不会对商店进行重新排序。

[http://bartoszmilewski.com/2008/11/05/who-ordered-memory-fences-on-an-x86/](http://bartoszmilewski.com/2008/11/05/who-ordered-memory-fences-on-an-x86/)有更多关于 x86 内存模型的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T12:11:34.077

关于原子、内存排序和测试的一些事情。

首先，这个例子是一个例证；你应该阅读并思考它。在现实世界中，启动一个新线程的开销意味着它`write_x_then_y`会在开始之前很久就完成运行`read_y_then_x`，因此重复启动这两个线程的测试程序实际上不会看到重新排序。欢迎来到测试多线程代码的美妙世界！

其次，有两个重新排序问题需要考虑。

首先，编译器可以生成与源代码不同的存储或读取顺序的代码；在没有多线程的情况下，这是一种有效的优化，而且它很重要。另一方面，一旦你引入了多个线程，存储顺序和读取顺序就很重要。因此，新的 C++ 内存模型指定了何时不能移动存储和加载；特别是，它们不能跨原子访问移动。这给了你一个可以推理的固定点：我在做这个原子存储之前做了这个非原子存储，所以我知道编译器会在第二个之前做第一个。

二、**硬件**可以重新排序存储和加载；这通常是处理器缓存策略的结果，称为“可见性”；在一个线程中对变量所做的更改对于在第一个线程写入该变量后读取该变量的另一个线程不一定可见。那是因为这两个线程可以在两个独立的处理器上运行，每个处理器都有自己的缓存。如果新值没有写入主内存，或者其他处理器的缓存中有旧值，则第二个线程将看不到更改。Atomics 提供了关于值何时变得可见的规则（这意味着何时必须将写入从缓存中刷新到主内存中，以及何时读取必须进入主内存而不是缓存 [过于简单，但你明白了]）；这就是这个例子的内容。和，正如@Michael 所说，仅仅因为不必使值可见，并不意味着它不能。一些处理器的内存模型很弱，允许这种事情，在分析它们所做的事情时可能会提高速度和明确的复杂性，而一些处理器则不会。x86 属于后一类：即使您允许较弱的可见性约束，您所做的几乎所有事情都将是顺序一致的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T05:28:49.113

仅仅因为可以重新排序 x 和 y 并不强制编译器生成不确定的行为。

```
x.store(false, memory_order_relaxed); // redundant store
y.store(true, memory_order_relaxed);
x.store(true, memory_order_relaxed); 
```

看来，如果我们认为 x 为真，那么 y 一定为真。但是，编译器可以选择重新排序那些

```
x.store(false, memory_order_relaxed); // redundant store
x.store(true, memory_order_relaxed);
y.store(true, memory_order_relaxed); 
```

它会选择吗？在这种情况下，可能不会。编译器很容易以 xyx 模式生成最佳代码。然而，在更复杂的情况下，随着更多的事情发生，重新排序可能允许编译器在寄存器中容纳更多的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T05:51:32.503

内存模型只是描述了可能的情况，不能保证排序会实际发生。这取决于编译器和硬件。如果您想详尽探索允许的行为，请使用 CDSChecker 之类的工具。

# ios - 由于 IO 错误，此时无法处理应用程序 Info.plist 验证

> ID：12222773
> 
> 赞同：5
> 
> 时间：2012-08-31T21:37:42.197
> 
> 标签：ios, app-store, app-store-connect, itunes-store, application-loader

> **可能重复：**
> [由于一般错误 (1095)，此时无法处理应用程序 info.plist 验证](https://stackoverflow.com/questions/8353049/unable-to-process-application-info-plist-validation-at-this-time-due-to-a-genera)

一段时间以来，我一直在尝试将应用程序发送到 App Store。但是，当我尝试发送它时，它会显示大约 1 分 30 秒的进度指示器，然后出现一条错误消息，说“由于 IO 错误，此时无法处理应用程序 Info.plist 验证”。我不知道该怎么做，我花了几个小时摆弄 Info.plist 试图修复它。请帮忙！！:(

# javascript - 如何替换 javascript 字符串中的前三个连字符？

> ID：12222774
> 
> 赞同：2
> 
> 时间：2012-08-31T21:37:42.043
> 
> 标签：javascript, regex

改变

12-16-23-一些话-现在

至

12/16/23/some-words-now

谢谢！！非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:39:19.950

如果前三个破折号之间的字符始终是数字，您可以这样做：

```
variable = variable.replace(/^(\d+)-(\d+)-(\d+)-/, "$1/$2/$3/"); 
```

如果它们可以是任意字符，那么您可以这样做：

```
variable = variable.replace(/^([^-]+)-([^-]+)-([^-]+)-/, "$1/$2/$3/"); 
```

工作演示：http: [//jsfiddle.net/jfriend00/YySFh/](http://jsfiddle.net/jfriend00/YySFh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:40:49.877

这应该可以解决问题：

```
'12-16-23-some-words-now'.replace(/^(\d+)-(\d+)-(\d+)-/g, '$1/$2/$3/'); 
```

前三个总是数字吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T21:42:03.607

```
foo = foo.replace(/^(.*?)-(.*?)-(.*?)-(.*)$/, "$1/$2/$3/$4"); 
```

[JSF](http://jsfiddle.net/EZv9e/)中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T21:43:23.440

寻找：

```
^([^-]*)-([^-]*)-([^-]*)-(.*) 
```

代替：

```
$1/$2/$3/$4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T21:44:19.920

这个确切的结构可以像这样固定：

```
var string = "12-16-23-some-words-now";
var hyphensFormatted = string.substr(0, 9).replace(/-/g, "/");
var formattedString = hyphensFormatted + string.substr(9, string.length);
console.log(formattedString); 
```

# php - 具有相同布局但内容不同的多个页面

> ID：12222779
> 
> 赞同：-1
> 
> 时间：2012-08-31T21:38:39.470
> 
> 标签：php, mysql, html

所以基本上我想要的是这样的网站：

```
Name:

Date:

(picture of person) 
```

但我不想为每个人（数千人）手动创建一个新页面。我拥有数据库中所需的所有内容。我有没有办法让他们点击上一页表格中的人名并让它生成一个页面，上面有那个人的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:47:18.790

基本原则是从数据库请求每个记录，即一个ID。所以 URL 可以是 person.php?id=xxx 其中 xxx 是对应于 db 记录的 ID。

然后在 person.php 中，您将使用 $_GET['id'] 从数据库中获取正确的记录。当然，您需要转义输入以保护数据库...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:36:22.720

就像是：

```
<html>
  <head>
    <title>Display User</title>
  </head>
  <body>
    <?php
      // Write all the queries here, by using $_GET to fetch the content
      // from the url. You might also want to include the user id in the url.
      // Finally, fetch the rows as $row = ...
    ?>
    Name: <?php echo $row['name']; ?><br /><br />
    Date: <?php // Do what you want with the date here ?><br /><br />
    <img src="<?php echo $row['imglocation']; // Change this parameter to fit your needs" />
  </body>
</html> 
```

# ruby-on-rails-3 - 更改 link_to 使用的默认 _path 方法名称

> ID：12222782
> 
> 赞同：1
> 
> 时间：2012-08-31T21:38:54.713
> 
> 标签：ruby-on-rails-3, routes, link-to

我真的很喜欢简短的 link_to 语法：

```
link_to "Ad", ad 
```

但默认情况下，它会尝试使用 ad_path 方法，该方法不存在，因为它嵌套在杂志下。正确使用的路径是 magazine_ad_path

这仍然可以正常工作：

```
link_to "Ad", magazine_ad_path(ad) 
```

但我觉得调用 magazine_ad_path 是多余的，因为层次结构是在我的路线中定义的。

广告属于_to 杂志和杂志 has_many 广告

知道如何更改路由或其他地方的默认方法吗？

简短的“pithier”语法是这里的第二个例子：http: [//api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)

编辑：对不起，我不清楚我的 URL 结构。它必须是 /magazine/5/ad/12。我知道由于 Ad 中的外键，技术上不需要杂志的 id，但这就是他们想要的 URL。

这是我的路线.rb

```
MyApp::Application.routes.draw do
  resources :magazines do
    resources :ads do
      member do
        get :info, :preview, :send, :fetch
        put :publish
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:13:27.767

您可以在命名空间资源中编写如下链接：

```
link_to "Ad", [:magazine, ad] 
```

或者，如果它是嵌套资源：

```
link_to "Ad", [magazine, ad] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:06:56.440

您的路线定义有一个 :as 选项，因此：

```
resources :magazines do
  resources :ads, :as => :ads
end 
```

可以做这项工作。

**编辑：**

检查情况后，上面的答案是行不通的。或者，您可以只添加`resources :ads`到您的 routes.rb （除了您已经拥有的嵌套声明）。

# javascript - 使用javascript获取存在某个CSS属性的所有元素？

> ID：12222790
> 
> 赞同：1
> 
> 时间：2012-08-31T21:39:33.603
> 
> 标签：javascript, html, css, dom, browser

有没有办法通过某个 CSS 属性来获取 DOM 上的所有元素？假设我想获取所有具有 background-image CSS 值的元素——我如何选择所有这些元素？我最好避免使用 Jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:54:51.283

可以肯定的是，你得到了这样的风格：

```
var elms = document.all ? document.all : document.body.getElementsByTagName("*");
for (i = 0; i < elms.length; i++) {
    if ((elms[i].currentStyle && elms[i].currentStyle.backgroundImage.length > 0) ||
    (window.getComputedStyle &&
    window.getComputedStyle(elms[i]).getPropertyValue("background-image"))) {
        alert('found one!');
    } 
}​ 
```

CurrentStyle 适用于 IE，getComputedStyle 适用于其余部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:57:07.763

在现代浏览器上，您可以使用[`getComputedStyles`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)

```
var elements = document.getElementsByTagName("*");
var haveBg = new Array();
for (i = 0; i < elements.length; i++) {
    var style = window.getComputedStyle(elements[i], null);
    if (style.getPropertyValue("background-image") != 'none') {
        haveBg.push(elements[i]);
    } 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T21:44:33.560

```
var elms = document.all ? document.all : document.getElementsByTagName("*");
for (i = 0; i < elms.length; i++) {
   if (elms[i].style.backgroundImage.length > 0) {
        alert('found one!');
    } 
} 
```

如果您事先知道它会是什么，最好使用确切的标签名称而不是“*”

# javascript - 离开页面前要求保存？

> ID：12222800
> 
> 赞同：0
> 
> 时间：2012-08-31T21:40:43.677
> 
> 标签：javascript, jquery, asp.net

根据[这篇文章](https://stackoverflow.com/questions/2469999/jquery-how-to-check-if-form-elements-are-not-empty)，如果用户在文本字段中输入任何数据，我要求用户在离开页面之前确认保存数据。

但是当页面加载并且我的表单 ID 是“Form1”时，我遇到了错误

![在此处输入图像描述](../Images/c45a1554a255cd93858d8f53190342b0.png)

```
<script type="text/javascript" language="javascript">
     window.onload = function (e) {
        var form_has_been_modified = 0;
          $("form[id^='Form1']").on("change keyup", ":input", function () {
          form_has_been_modified = 1;
        })
        };
     window.onbeforeunload = function (e) {
           if (!form_has_been_modified) {
             return;
        }
        var message = "Do you want to save the data before leave the page?";
        var e = e || window.event;

         // For IE and Firefox prior to version 4
        if (e) {
              e.returnValue = message;
        }
        // For Safari
         return message;
             };

        </script> 
```

如何解决这个问题？

**更新：在 HTML 源代码中显示 `<form name="aspnetForm" method="post" action="EditMember.aspx?Id=3664653" onsubmit="javascript:return WebForm_OnSubmit();" id="aspnetForm" enctype="multipart/form-data">`，如何在上面的代码中使用这个表单？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:43:18.420

方法[`on()`](http://api.jquery.com/on/)被添加到 jQuery 版本 1.7。

看来您使用的是 1.4.1 版。尝试更新 jQuery，错误应该会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:17:08.673

您的选择器错误

$("form[id^='Form1']") 应该是 $("#Form1")

也不要忘记可能不仅仅是输入标签（例如选择和文本区域）

# msbuild - 脚本不会为 VS2012 发布网站

> ID：12222805
> 
> 赞同：3
> 
> 时间：2012-08-31T21:41:15.860
> 
> 标签：msbuild, visual-studio-2012

使用从命令行调用的以下 MSBuild 脚本，我尝试运行在 Visual Studio 2012 中运行良好的发布选项。

```
<Target Name="BuildRelease">
<MSBuild 
     Properties="Configuration=Release;DeployOnBuild=True;
         DeployTarget=Publish;CreatePackageOnPublish=True" 
     StopOnFirstFailure="true" 
     Projects="$(BuildDirectory)\BigWave.ALL.sln"></MSBuild>
</Target> 
```

我的 Project.pubxml 是...

```
<Project ToolsVersion="4.0" 
         xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <WebPublishMethod>FileSystem</WebPublishMethod>
    <SiteUrlToLaunchAfterPublish />
    <publishUrl>c:\temp\Deploy</publishUrl>
    <DeleteExistingFiles>False</DeleteExistingFiles>
  </PropertyGroup>
</Project> 
```

Project.pubxml.user 是...

```
<Project ToolsVersion="4.0" 
         xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <LastUsedBuildConfiguration>Release</LastUsedBuildConfiguration>
    <LastUsedPlatform>Any CPU</LastUsedPlatform>
    <TimeStampOfAssociatedLegacyPublishXmlFile />
  </PropertyGroup>
...snipped ItemGroup which has all my files and last timestamp of publish
</Project> 
```

这些文件是否有问题会阻止“发布”选项工作？脚本运行没有错误，但是当我查看 时`C:\temp\Deploy directory`，没有文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:48:46.147

根据此[http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx)，当您将 VS2010 和 VS2012 用于相同的解决方案时，您必须指定您正在使用的 VS 版本。我只是添加了版本，现在它可以工作了。

我希望这可以帮助你！

最好的祝福

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:50:39.720

我无法让发布运行，但查看 Visual Studio 的输出，我想我找到了替代解决方案。原来 obj\Release\AspnetCompileMerge 文件夹有一个可部署且干净的项目版本。它包含与最终输出文件夹相同的字节文件。

我确实必须更改我的 msbuild 脚本以包含 DeployOnBuild 选项...

```
<MSBuild Properties="Configuration=Release;DeployOnBuild=True;" 
         StopOnFirstFailure="true" 
         Projects="$(BuildDirectory)\BigWave.ALL.sln"></MSBuild> 
```

# ios - iOS缓存在哪里？

> ID：12222806
> 
> 赞同：1
> 
> 时间：2012-08-31T21:41:21.703
> 
> 标签：ios

据我了解，iOS 有一些文件缓存。

例如，当应用程序尝试加载某个框架（ae CoreAudio）时，它会从缓存中加载它。据我了解，出于这个原因在设备上 /System/Library/Frameworks/ 不包含任何代码（因为 iOS 开发人员知道它们将始终在缓存中可用）。

有没有办法读取此缓存以查看其中的内容？

通常的免责声明：我知道 AppStore 规则。我不打算将此应用程序发布到 AppStore。它仅用于研究目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:48:41.377

它位于 /System/Library/Caches/com.apple.dyld/dyld_shared_cache_armv6（或 7）中。

是的，您可以使用一些工具从中提取实际的 dylib；例如[KennyTM 的 dyld_decache。](https://github.com/kennytm/Miscellaneous/blob/master/dyld_decache.cpp)

# php - 这段代码有效，但它太冗长了，我该如何让它更短？

> ID：12222808
> 
> 赞同：-1
> 
> 时间：2012-08-31T21:41:24.447
> 
> 标签：php

这段代码确实有效，但有点过于冗长，我想缩小它，但我找不到解决方案......

编辑：进一步解释：$keywords 是一个数组，其中包含从文本中提取的大量单个单词。在 $text 我想把我可以使用相邻单词创建的引理。假设我的原始文本是“我喜欢青苹果”，在 $keywords 中我有“我”、“喜欢”、“绿色”、“苹果”。然后在 $text 我将有“我喜欢”，“我喜欢绿色”，“我喜欢青苹果”......

```
for ($i=0;$i<=count($keywords);$i++) {
        $text[] = $keywords[$i];
        $text[] = $keywords[$i]." ".$keywords[$i+1];
        $text[] = $keywords[$i]." ".$keywords[$i+1]." ".$keywords[$i+2];
        $text[] = $keywords[$i]." ".$keywords[$i+1]." ".$keywords[$i+2]." ".$keywords[$i+3];
        $text[] = $keywords[$i]." ".$keywords[$i+1]." ".$keywords[$i+2]." ".$keywords[$i+3]." ".$keywords[$i+4];
        $text[] = $keywords[$i]." ".$keywords[$i+1]." ".$keywords[$i+2]." ".$keywords[$i+3]." ".$keywords[$i+4]." ".$keywords[$i+5];
        $text[] = $keywords[$i]." ".$keywords[$i+1]." ".$keywords[$i+2]." ".$keywords[$i+3]." ".$keywords[$i+4]." ".$keywords[$i+5]." ".$keywords[$i+6];    
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:51:25.257

您必须使用两个 for 循环才能创建这样的列表：

```
<?php

$keywords = explode(' ', 'k1 k2 k3 k4 k5 k6 k7');
$text = array();

for ($i = 0; $i < count($keywords); $i++) {
        $line = array();

        for ($j = 0; $j <= $i; $j++) {
                $line[] = $keywords[$j];
        }

        $text[] = implode(' ', $line);
}

print_r($text);

/*
Array
(
    [0] => k1
    [1] => k1 k2
    [2] => k1 k2 k3
    [3] => k1 k2 k3 k4
    [4] => k1 k2 k3 k4 k5
    [5] => k1 k2 k3 k4 k5 k6
    [6] => k1 k2 k3 k4 k5 k6 k7
)
*/ 
```

此代码应适用于任意长度的数组。

# ruby - 允许其子类注册回调的 Ruby 基类

> ID：12222809
> 
> 赞同：2
> 
> 时间：2012-08-31T21:41:31.837
> 
> 标签：ruby, callback, metaprogramming

我想在 Ruby 中编写一个基类，它允许扩展它的类注册回调，就像 ApplicationController 对 before_filter 所做的那样：

```
class AController < ApplicationController
  before_filter :foo

  def foo

  end
end 
```

我想自己写一些类似于 before_filter 的另一面。

```
class AClass < MyBase
  register_callback :callback1

  def callback1
    puts "called!"
  end

  def test
    call_me_maybe 5
  end
end 
```

该`call_me_maybe`方法在`MyBase`类中定义，可能会调用之前注册的回调。MyBase 的实现是什么样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:48:00.387

`ActiveSupport`提供了一个`Callbacks`模块：

[https://github.com/rails/rails/blob/master/activesupport/lib/active_support/callbacks.rb](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/callbacks.rb)

您的基类将类似于以下示例`active_support/callbacks.rb`：

```
class Record
  include ActiveSupport::Callbacks
  define_callbacks :save

  def save
    run_callbacks :save do
      puts "- save"
    end
  end
end 
```

请参阅`callbacks.rb`完整示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:45:37.890

我想出了一个办法`send`

```
class MyBase
  def self.register_callback name
    @@callback_name = name
  end

  def call_me_maybe num
    if num > 0
      self.send @@callback_name
    end
  end
end 
```

不确定使用 send 是否出于任何原因不好......似乎应该有另一种方式......

# c# - 阅读脸书消息框

> ID：12222811
> 
> 赞同：1
> 
> 时间：2012-08-31T21:41:37.067
> 
> 标签：c#, .net, c#-4.0, facebook-graph-api

我正在使用 Facebook.dll 是 FacebookClient ，主要是我想阅读 Facebook 用户邮箱，我将身份验证令牌保存在数据库中。

1.  从我可以提及开始日期和结束日期的邮箱中选择消息（全部）
2.  将所有消息保存在数据库中

我用过

```
dynamic result = objFacebookClient.Get("fql",
                     new { q = "SELECT message_id, author_id, body, created_time FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0)" }); 
```

是否有可能得到结果

*   消息 - 消息的内容
*   发送给 o- 发件人姓名和 ID
*   接收方式 - 姓名和身份证
*   创建日期 - 消息创建日期

代码在这里

```
dynamic result = objFacebookClient.Get("fql",
   new { q = "SELECT message_id, author_id, body, created_time FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0)" });
List<Model.FacebookUserMessageInfo> objFacebookMessageList = new List<Model.FacebookUserMessageInfo>();
if (result != null)
{
    Model.FacebookUserMessageInfo objFacebookMessage = null;
    var values = result.Values;
    var TotalResult = (((System.Collections.Generic.Dictionary<string, object>.ValueCollection)values).ToList()[0]);
    var TotalMessagesData = (JsonArray)TotalResult;
    if (TotalMessagesData != null)
    {
        foreach (var Messages in TotalMessagesData)
        {
            objFacebookMessage = new Model.FacebookUserMessageInfo();
            objFacebookMessage.MessageText = (((JsonObject)Messages)["body"]).ToString();
            objFacebookMessage.ActionUserID = Convert.ToInt64(((JsonObject)Messages)["author_id"]);
            if (objFacebookMessage.ActionUserID == CurrentUserId)
            {
                objFacebookMessage.MessageType = Core.Enum.FacebookMessageType.Sent.ToString();
            }
            else
            {
                objFacebookMessage.MessageType = Core.Enum.FacebookMessageType.Receive.ToString();
            }
            objFacebookMessage.FacebookUserId = FacebookUserId;
            var MessageSecond = (((JsonObject)Messages)["created_time"]).ToString();
            var dateTime = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
            objFacebookMessage.CreatedDate = dateTime.AddSeconds(double.Parse(MessageSecond));
            objFacebookMessageList.Add(objFacebookMessage);
        }
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:30:47.667

我得到了我的解决方案

```
public class Facebook
{
    #region Private Properties

    private string ClientId = System.Configuration.ConfigurationManager.AppSettings["ClientId"];
    private string ClientSecret = System.Configuration.ConfigurationManager.AppSettings["ClientSecret"];

    #endregion

    #region Public Methods

    public string GetLongLifeAccessToken(string ExistingToken)
    {
        try
        {
            string Data = string.Empty;
            string url = string.Format("https://graph.facebook.com/oauth/access_token?client_id={0}&client_secret={1}&grant_type=fb_exchange_token&fb_exchange_token={2} ",
                            ClientId, ClientSecret, ExistingToken);
            System.Net.HttpWebRequest request = System.Net.WebRequest.Create(url) as System.Net.HttpWebRequest;
            using (System.Net.HttpWebResponse response = request.GetResponse() as System.Net.HttpWebResponse)
            {
                System.IO.StreamReader sr = new System.IO.StreamReader(response.GetResponseStream());
                Data = sr.ReadToEnd();
                Data = HttpUtility.ParseQueryString(Data)["access_token"];
            }
            return Data;
        }
        catch (Exception ex)
        {

            throw new Exception(ex.Message);
        }

    }

    public List<Model.FacebookUserMessageInfo> ReadFacebookMailbox(string AuthToken, long? CurrentUserDefaultFacebookId, DateTime? LastProcessedDate, DateTime CurrentDate, int FacebookUserId)
    {
        try
        {

            FacebookClient objFacebookClient;
            List<Model.FacebookUserMessageInfo> objFacebookMessageList;
            objFacebookClient = new FacebookClient(AuthToken);
            try
            {
                objFacebookClient.Get("me");
            }
            catch (Exception ex)
            {
                throw new Exception(ErrorType.UnableToAuthorizFacebookUser.ToString());
            }
            TimeSpan t = LastProcessedDate.Value - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
            int timestamp = (int)t.TotalSeconds;

            dynamic result = objFacebookClient.Get("fql",
               new { q = "SELECT message_id, author_id, viewer_id, body, created_time FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0) AND created_time >= " + timestamp.ToString() });
            objFacebookMessageList = new List<Model.FacebookUserMessageInfo>();
            if (result != null)
            {
                Model.FacebookUserMessageInfo objFacebookMessage = null;
                var values = result.Values;
                var TotalResult = (((System.Collections.Generic.Dictionary<string, object>.ValueCollection)values).ToList()[0]);
                var TotalMessagesData = (JsonArray)TotalResult;
                if (TotalMessagesData != null)
                {
                    foreach (var Messages in TotalMessagesData)
                    {
                        /*author_id =   The ID of the user who wrote this message.*/
                        /*viewer_id =   The ID of the user whose Inbox you are querying*/
                        objFacebookMessage = new Model.FacebookUserMessageInfo();
                        objFacebookMessage.MessageText = (((JsonObject)Messages)["body"]).ToString();
                        long author_id = Convert.ToInt64(((JsonObject)Messages)["author_id"]);
                        long viewer_id = Convert.ToInt64(((JsonObject)Messages)["viewer_id"]);
                        if (author_id == viewer_id)
                        {
                            objFacebookMessage.MessageType = Core.Enum.FacebookMessageType.Sent.ToString();
                        }
                        else
                        {
                            objFacebookMessage.MessageType = Core.Enum.FacebookMessageType.Receive.ToString();

                        }
                        objFacebookMessage.ActionUserID = author_id;
                        objFacebookMessage.FacebookUserId = FacebookUserId;
                        var MessageSecond = (((JsonObject)Messages)["created_time"]).ToString();
                        var dateTime = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
                        objFacebookMessage.CreatedDate = dateTime.AddSeconds(double.Parse(MessageSecond));
                        objFacebookMessageList.Add(objFacebookMessage);
                    }
                }

            }
            if (objFacebookMessageList.Count > 0)
            {
                objFacebookMessageList = objFacebookMessageList.Where(fm => fm.CreatedDate >= LastProcessedDate && fm.CreatedDate <= CurrentDate).ToList();

                objFacebookMessageList.ForEach(item =>
                {
                    var Auther = objFacebookClient.Get("https://graph.facebook.com/" + item.ActionUserID.ToString());
                    if (Auther != null)
                    {
                        item.ActionUserName = ((JsonObject)Auther)["name"].ToString();
                    }
                    else
                    {
                        item.ActionUserName = null;
                    }
                });

            }
            return objFacebookMessageList;

        }
        catch (Exception ex)
        {

            throw new Exception(ex.Message);
        }

    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:19:00.857

*如果我明白你想要的答案是：*

您需要创建一个类**FacebookMes​​sage**：

```
class FacebookMessage
{
    public int SenderID { get; set; }
    public int AddresseeID { get; set; }
    public string SenderName { get; set; }
    public string AddresseeName { get; set; }
    public string Message { get; set; }

    public DateTime CreateDate { get; set; }

    public FacebookMessage()
    {
        SenderID = 0;
        AddresseeID = 0;
        SenderName = "";
        AddresseeName = "";
        Message = "";
    }
} 
```

并使用此**FQL**：

```
dynamic result = objFacebookClient.Get("fql",
   new { q = "SELECT body, author_id, viewer_id, created_time FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0)" }); 
```

获取此信息并将其保存在**FacebookMes​​sage**中并为每条消息运行另一个查询后：

```
 FacebookMessage faceMsg = null;
    var values = result.Values;
    var TotalResult = (((System.Collections.Generic.Dictionary<string, object>.ValueCollection)values).ToList()[0]);
    var TotalMessagesData = (JsonArray)TotalResult;
    if (TotalMessagesData != null)
    {
        foreach (var Messages in TotalMessagesData)
        {
            faceMsg= new FacebookMessage();
            faceMsg.Message = (((JsonObject)Messages)["body"]).ToString();
            faceMsg.SenderID = Convert.ToInt64(((JsonObject)Messages)["author_id"]);
            faceMsg.AddresseeID = Convert.ToInt64(((JsonObject)Messages)["viewer_id"]);
            var MessageSecond = (((JsonObject)Messages)["created_time"]).ToString();
            var dateTime = new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
            faceMsg.CreatedDate = dateTime.AddSeconds(double.Parse(MessageSecond));

            result = objFacebookClient.Get("fql",
   new { q = "SELECT name FROM user WHERE uid = " + faceMsg.SenderID });

            var values = result.Values;
            faceMsg.SenderName = values.name; // Not tested, but should be something like that.

            result = objFacebookClient.Get("fql",
   new { q = "SELECT name FROM user WHERE uid = " + faceMsg.AddresseeID });

            var values = result.Values;
            faceMsg.AddresseeName= values.name; // Not tested, but should be something like that.

            faceMsgList.Add(objFacebookMessage);
        }
    } 
```

建议将获取名称的查询拆分为不同的方法。

# javascript - 使用 Javascript 从 Web 服务中检索标头信息

> ID：12222813
> 
> 赞同：1
> 
> 时间：2012-08-31T21:41:41.430
> 
> 标签：javascript, ajax, cordova, http-headers, digest-authentication

我目前正试图从 WCF Web 服务检索移动设备上的 www-authenticate 标头信息。它是一个建立在 phonegap 平台上的 android 移动应用程序（所以我大量使用 javascript）。

我尝试在几个不同的浏览器上测试该应用程序。ie7 和 safari 让我可以毫无问题地检索信息。然而，Firefox、chrome 和不幸的是，android 设备不允许我获取信息。Chrome 和 Firefox 抱怨跨站点 ajax 调用……当调用该函数时，手机就会死机。

我很确定它与跨站点 ajax 问题无关，因为移动 -> 网络服务不被视为跨站点……我可以成功地从 www.google.com 等常规网站检索标题信息。有没有人有任何提示可以为我指明正确的方向？

以下是我的代码：

```
function getAuthInfo(){    
var req = new XMLHttpRequest();
    req.open('HEAD', "http://foo.com/messages/userreg", false);
    req.send();
    alert(req.getAllResponseHeaders());
    alert(req.getResponseHeader("Www-Authenticate"));
} 
```

# ruby-on-rails - 用于调整大小的 ImageMagick 的替代品

> ID：12222816
> 
> 赞同：5
> 
> 时间：2012-08-31T21:41:56.610
> 
> 标签：ruby-on-rails, image, image-processing, imagemagick, image-resizing

我在 Windows 7 计算机上安装 ImageMagick 和 RMagick 时遇到了一些严重问题。

我只是想知道是否还有其他更容易设置与 Ruby on Rails 一起使用并允许图像重新调整大小和裁剪的替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T21:46:38.507

Ruby 工具箱有一大堆图像处理工具，你可以试试：

[https://www.ruby-toolbox.com/categories/image_processing](https://www.ruby-toolbox.com/categories/image_processing)

如果您只是在使用 RMagick 时遇到问题，不妨试试[Mini Magick](https://www.ruby-toolbox.com/projects/mini_magick)？

# php - 合并数组，0 优先于 1

> ID：12222820
> 
> 赞同：-1
> 
> 时间：2012-08-31T21:42:18.113
> 
> 标签：php, arrays

基本上我需要合并两个数组，其中值 0 将优先于 1。

我找不到任何本机 php 函数来执行此操作，谷歌上也找不到任何让我感到惊讶的函数（也许我一直在寻找错误的东西！），我想不出如何有效地做到这一点。有什么建议么？

例如：

```
Array 1                   Array 2
  permission1 => 1            permission1 => 1
  permission2 => 1            permission2 => 1
  permission3 => 0            permission3 => 1
  permission4 => 0            permission4 => 1
                              permission5 => 1 
```

结果数组将是。

```
permission1 => 1
permission2 => 1
permission3 => 0
permission4 => 0
permission5 => 1 
```

您可能已经猜到这是针对权限系统的。Nothing 表示没有权限，0 表示从不，1 表示有权限。我认为最好的解决方案可能是将两者加在一起，看看你得到 1 还是 2，但我想不出如何实现这一点。

我希望这个问题很清楚，如果没有，请要求澄清。提前感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:45:50.747

```
foreach($array2 as $key => $val) {
   if (!isset($array1[$key])){
        $array1[$key] = $val;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:02:28.343

如果您首先合并两者，然后检索它们相交的那些，最后它仅检索一次带有零的并 foreach 循环它们以设置零，您应该得到正确的答案。这应该使您想要循环的数组非常小。

```
$arr = array_merge( $array1, $array2 );
$intersected = array_intersect_key($array1, $array2);
$intersectWithZeroes = array_keys($intersected, 0);
foreach( $intersectWithZeroes as $key => $value ) {
    $arr[$key] = 0;
} 
```

# c++ - Boost.Python 中的向下转型

> ID：12222824
> 
> 赞同：3
> 
> 时间：2012-08-31T21:42:59.607
> 
> 标签：c++, python, boost, boost-python

编辑：将“upcast”更正为“downcast”。

当我正在使用的类来自 C++ 时，我试图找出在 Python 中进行向下转换的最佳方法。如果我在 C++ 中定义了两个类：

```
struct Base
{
    int foo()
    {
        return 7;
    }
};

struct Derived : Base
{
    int bar()
    {
        return 42;
    }
}; 
```

还有另一个功能

```
Base baz()
{
    return Derived();
} 
```

如果我尝试使用 Python

```
der = baz()
print der.foo()
print der.bar() 
```

对 bar() 的调用失败，因为 Python 只知道 Base 中的函数。

我的解决方案是在 Derived 中添加另一个函数：

```
Derived * fromBase(Base * b)
{
    return reinterpret_cast<Derived *>(b);
} 
```

如果我随后将 Python 脚本的第一行更改为 read `der = Derived.fromBase(baz())`，则该脚本将按预期工作。

但是，我使用 reinterpret_cast 来完成这项工作的事实似乎非常错误。有没有更好的方法来降低压力，不需要使用像 reinterpret_cast 这样危险的东西？如果没有，退货政策应该`fromBase()`是什么？

在任何人问之前，是的，沮丧是必要的。这就是我必须使用的库的工作方式。

编辑：

我正在寻找类似 C# 代码的东西：

```
Base b = new Derived();
Derived d = b as Derived;
if (d != null)
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:26:55.637

```
Base baz()
{
    return Derived();
} 
```

从返回类型可以看出，this返回的是对象`Base`，*而不是*`Derived`对象。所以没有什么可悲观的（而不是悲观的）。所以你首先需要解决这个问题。

更重要的是，你是对的，`reinterpret_cast`在这种情况下绝对是阴暗的。`dynamic_cast`实际上是用于向下转换的工具。

更根本的是，你应该问自己为什么你觉得需要沮丧。您的示例代码可能是合成的，不能代表您的确切问题，但为什么不应该`baz`返回 a `Derived`？

* * *

这是您的代码段的等价物：

```
Derived d;
Base& b = d;
if(Base* p = dynamic_cast<Derived*>(&b))
    // okay; b is actually an instance of Derived 
```

# android - 尝试实现 AsyncTask 以发出 http 请求

> ID：12222825
> 
> 赞同：1
> 
> 时间：2012-08-31T21:42:59.573
> 
> 标签：android, android-asynctask

我一直在尝试实现 asynctask 以发出大约 30 个 http 请求，以使用 JSON 对象和距离矩阵 api 查找两个位置之间的距离。我编写的代码在从主 UI 线程调用时有效，但是当我尝试从异步任务运行它并将距离保存到一个数组时，我最终得到一个充满空值的数组。有什么建议吗？（注意：这段代码最初是由我工作中的其他人编写的，我只是复制粘贴它并更改了几行以使用我的应用程序。因此，可能有一些我不知道的不必要的位。感觉免费指出他们）

```
class DistanceFinder extends AsyncTask<String[], Void, String[]>
{   

        @Override
        protected String[] doInBackground(String[]... locations) 
        {

        String baseURL="https://maps.googleapis.com/maps/api/distancematrix/json?origins=";
        String[] distances = new String[locations[1].length];

        for(int i = 1;i<locations.length;i++)
        {
            String url = baseURL + locations[0][0].replace(" ","+") + "&destinations=" + locations[1][i].replace(' ', '+') + "&sensor=true&units=imperial";
            HttpClient httpclient = new DefaultHttpClient();
            HttpResponse response;
            String responseString = "";
            boolean internet;
            try 
            {
                    response = httpclient.execute(new HttpGet(url));
                    StatusLine statusLine = response.getStatusLine();
                    if(statusLine.getStatusCode() == HttpStatus.SC_OK)
                    {
                        ByteArrayOutputStream out = new ByteArrayOutputStream();
                        response.getEntity().writeTo(out);
                        out.close();
                        responseString = out.toString();   
                        internet=true;

                    } 
                    else
                    { 
                            response.getEntity().getContent().close();
                             throw new IOException(statusLine.getReasonPhrase());
                    } 
            } catch (ClientProtocolException e) 
            {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    internet=false;
                    Toast.makeText(getApplicationContext(), "Please connect to internet", Toast.LENGTH_LONG).show();

            } 
            catch (IOException e) 
            {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    internet=false;
                    Toast.makeText(getApplicationContext(),"Please connect to internet", Toast.LENGTH_LONG).show();

            }

            if(internet){
                try 
                {
                    JSONObject jsonObj = new JSONObject(responseString);
                    JSONArray rows = jsonObj.getJSONArray("rows");
                    JSONObject inRows=rows.getJSONObject(0);
                    JSONArray elements = inRows.getJSONArray("elements");
                    JSONObject inElements=elements.getJSONObject(0);
                    JSONObject distance= inElements.getJSONObject("distance");
                    distances[i] = distance.getString("text");

                } 
                catch (JSONException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        }
        return distances;

    }

    @Override
    protected void onPostExecute(String[] result) 
    {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        distancesList = result;
    }

    @Override
    protected void onPreExecute() 
    {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:17:09.333

你的问题在于你的 for 循环

```
for(int i = 1;i<locations.length;i++) 
```

首先，您应该从 0 开始，除非您的第一个单元格没有存储`String`您希望检查到的距离。

其次，你的 for 循环应该是

```
for(int i = 0;i<locations[0].length;i++) 
```

现在你正在检查单元格`[1][0]`，就是这样，因为循环结束了。

我用手动输入的位置对其进行了测试，它可以工作。

另外，为了让您更容易调试，您应该真正习惯使用`Log.d()`. 它确实有助于找出错误。我在您的代码中使用了它，发现循环只执行一次。

祝你好运

Ps，正如其中一条评论中提到的，删除`onPreExecute()`. 你不使用它。

# .net - 将 Entity Framework 5 与 .NET 4 结合使用会产生什么后果（如果有）

> ID：12222826
> 
> 赞同：2
> 
> 时间：2012-08-31T21:43:12.130
> 
> 标签：.net, entity-framework, .net-4.0, entity-framework-5

将 EF 5 与 .NET 4 结合使用会产生什么后果？我看到 NuGet 中 EF 的最新版本是 5.0，但我正在运行 .NET 4，并且不打算很快升级到 4.5。它在 NuGet 中说 EF 5 没有“依赖项”。

我想我在某处听说 EF 5 使用 .NET 4.5 的特定功能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:15:10.643

从[这里](http://msdn.microsoft.com/en-us/data/hh949853.aspx)：

> 为 Entity Framework 5 所做的许多性能改进都存在于 .NET 4.5 附带的核心组件中。

这篇[Visual Studio 杂志文章](http://visualstudiomagazine.com/articles/2012/05/18/microsoft-releases-another-preview-of-entity-framework-5.aspx)似乎正是 Marc 所评论的：

> Entity Framework RC NuGet 包与 Visual Studio 11 beta、Visual Studio 2010 和 .NET Framework 4.5/4 兼容。但是，新的 Entity Framework 5 功能（例如枚举、空间数据类型和表值函数）需要 .NET 4.5。

我认为可以安全地假设这些限制也适用于 RTM。

# gwt - GWT IE9 模拟 IE8

> ID：12222832
> 
> 赞同：4
> 
> 时间：2012-08-31T21:43:30.570
> 
> 标签：gwt, internet-explorer-8, internet-explorer-9

所以我有一个在 IE6-8 和大多数现代浏览器中完美运行的 GWT 应用程序。不幸的是，由于 IE9 如何处理元素`onchange`事件的一个已知错误`<select>`，它在 IE9 中几乎无法使用。

因此，我没有让我们的客户降级到 IE8，而是有了让 IE9 模拟 IE8 的绝妙主意。我将此元标记放在我的 GWT 主机页面中：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" > 
```

当我查看 IE9 开发人员工具 ( `F12`) 时，我看到它的“浏览器模式”是 IE9，“文档模式”是 IE8 标准。但是，GWT 应用程序没有加载：它在 GWT 生成的一个压缩和混淆的 JavaScript 函数中给了我一个 JavaScript 错误。我没有能力通过 IE 调试应用程序，所以我不知道发生了什么。

我怀疑这与 GWT 检测正在使用的浏览器并为会话加载适当资源的方式有关。

*编辑添加：*当我尝试使用`IE=8`而不是 时`IE=EmulateIE8`，开发工具仍然报告 IE9/IE9 标准模式，并且与`onchange`我在普通 IE9 中运行时存在所有相同的事件问题。

**是否有一种工作方式可以使 IE9 以`http-equiv`元标记的方式模拟 IE8 标准模式，适用于 GWT 2.4？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:39:23.407

我遇到过类似的问题：IE 忽略`<meta http-equiv="X-UA-Compatible" content="IE=9">`标签（我试图阻止 IE8 以 IE7 兼容模式显示页面）。这是由于没有 X-UA-Compatible 元作为`<head>`. 我将它设置为第一个孩子`<head>`并添加`<!DOCTYPE HTML>`到所有内容之上，并且它起作用了。

# ruby - 在 Ruby 中调用类与实例的 .methods

> ID：12222837
> 
> 赞同：1
> 
> 时间：2012-08-31T21:43:57.607
> 
> 标签：ruby

希望在这里调查集体意识，因为我无法通过搜索找到答案。在 Ruby 1.9+ 中，在实例上调用 .methods 将产生与在该实例的类上不同的结果。例如，“foo”.methods 将包括 'length' 和 'size' 而 String.methods 不会。这是什么原因？我是一名资深程序员，但对 Ruby 不熟悉。根据我的理解，方法应该包括所有祖先方法，那么是通过 mixin 还是其他模式将长度和大小添加到实例的列表中而不是类的列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:49:19.970

长度和大小是 String*实例*方法，为什么它们会包含在 String 的（类）方法列表中？类是对象并且有自己*的*方法。

换句话说，您将获得您正在调用它的对象所支持的方法列表。String 是一个类，因此您可以获得它的特定类方法，以及它继承的类方法。

字符串实例是一个实例，因此您可以获得字符串的实例方法，以及它继承的实例方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:52:26.427

你混淆`.methods()`了[`.instance_methods()`](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-instance_methods).

第一个将为您提供可以在`String`对象上调用的方法 - 即`String`作为对象本身的类。第二个将为您提供使用`String`类创建的对象的方法，或`String`.

# imagemagick - 在 ImageMagick 中，我怎样才能将图像缩小到足够的程度，以便将其裁剪为特定尺寸？

> ID：12222839
> 
> 赞同：13
> 
> 时间：2012-08-31T21:44:09.890
> 
> 标签：imagemagick, imagemagick-convert

例如，如果我有一个 1600x1200 的大图像，但我想生成一个 250x200 的缩略图（高度和宽度的不同比例） - 我如何将其缩小到大小然后居中裁剪它？这可以在一行中使用转换吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-31T23:21:34.777

## 缩小+*填充给定区域*（如果需要，拉伸输出图像）

如果要缩小到 250x200 像素（不保持纵横比），完全填充 250x200 的空间（必要时拉伸/扭曲图像），请使用：

```
 convert            \
     input.jpeg      \
    -scale 250x200\! \
     output1.png 
```

*（注意`\!`缩放几何设置后的字符！）*用您拥有和想要的任何格式后缀
替换`.jpeg`和后缀，ImageMagick 会自动处理它。`.png`

* * *

## 缩小+*适合结果到给定区域*（并保持纵横比，如果需要，放弃一些给定区域）

如果要缩小到250x200 像素*内*，同时保持原始图像的纵横比（高宽比）并*裁剪*未用完的 250x200 像素的尺寸，请使用：

```
 convert          \
     input.jpeg    \
    -scale 250x200 \
     output2.png 
```

默认情况下，`-resize`参数中给出的宽度和高度是最大值（除非您将其指定为百分比）。这意味着：输出图像扩展或收缩以适应指定的尺寸，保持图像的纵横比。

上面的这个命令“尝试”将尺寸设置为 250x200：

*   当高度从原来的 1200 像素缩小到 200 像素（到这个原始值的 16.6666%）时，宽度现在是 266.66 像素。所以还是不适合....

*   当宽度从原来的 1600 像素缩小到 250 像素（到这个原始值的 15.625%）时，高度现在是 187.5 像素。所以它现在适合，并且可以在顶部和底部留出一些空间。

所以最终尺寸将是 250x187 或更可能是 250x188 像素（高度中不能有像素的分数，它需要一个整数！）。

* * *

## 在给定区域中按比例缩小+*中心结果*（并使用一些背景颜色来填充剩余空间）

如果你想缩小到250x200 像素*以内*，保持原始的纵横比，并通过添加一些黄色背景来创建一个全尺寸 250x200 像素的图像，以该空间中的真实图像为中心，请使用：

```
 convert              \
     input.jpeg        \
    -scale 250x200     \
    -gravity center    \
    -background yellow \
    -extent 250x200    \
     output3.png 
```

将背景颜色替换为您更喜欢的任何其他颜色，或者替换`none`为透明背景（JPEG 输出不支持！）。

* * *

## 缩小保持纵横比+*不裁剪到给定区域*

如果要缩放到 250x200 像素并保持纵横比，完全填充 250x200 的空间（但不裁剪掉任何溢出），请使用：

```
 convert             \
     input.jpeg       \
    -scale '250x200^' \
     output4.png 
```

*（注意`^`缩放几何设置后的字符。该`^`功能需要 6.3.8-2 的最低 ImageMagick 版本。）*
当使用或参数修改宽度和高度时`^`，`-scale`这些`-resize`设置被认为是最小值，其中只有一个这些尺寸也确实达到了。这意味着：输出图像扩展或收缩，直到宽度或高度与其指定尺寸匹配，保持图像的纵横比。

上面的这个命令“尝试”将尺寸设置为 250x200：

*   当高度从原来的 1200 像素缩小到 200 像素（到这个原始值的 16.6666%）时，就实现了想要的缩放。宽度现在为 266.66 像素。这是四舍五入到 267 像素。

*   所以最终尺寸将是 267x200 像素。

* * *

## 按比例缩小保持纵横比+*裁剪到给定区域*

如果要缩放到 250x200 像素并保持纵横比，完全填充 250x200 的空间（从左右边缘裁剪掉条带），请使用：

```
 convert             \
     input.jpeg       \
    -scale '250x200^' \
    -gravity center   \
    -extent 250x250   \
     output5.png 
```

图像的最终尺寸为 250x200。与之前的命令（给出 250x267 结果）相比，删除了左右边缘的一些像素列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-26T12:14:29.650

接受的答案不符合问题的要求。

如果您需要精确的输出尺寸（例如 250x200），从原始图像中拟合最大信息并裁剪冗余部分以保持纵横比，请使用以下命令：

`convert input.jpg -scale "250x200^" -gravity center -crop 250x200+0+0 output.jpg`

# macos - 将当前 WebView 页面打印为 HTML Cocoa

> ID：12222840
> 
> 赞同：0
> 
> 时间：2012-08-31T21:44:15.057
> 
> 标签：macos, cocoa, webview, nsstring

如何打印（或存储为字符串）在 WebView 中显示的当前页面的 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:32:47.223

我试过这个：

```
 NSString *test = [webViewTest stringByEvaluatingJavaScriptFromString:@"document.documentElement.outerHTML"];
```

有用。

# java - 即使在刷新写入器后，BufferedWriter 也不会写入 .txt 文件

> ID：12222843
> 
> 赞同：1
> 
> 时间：2012-08-31T21:44:22.680
> 
> 标签：java, android, writer

这是我使用的代码，我没有收到任何错误或警告，但文件为空，我创建了 aq.txt 文件并将其放置在工作区中，它也显示在项目中。我确定这是我想念的愚蠢的东西，但我就是想不通。另外，我尝试了所有其他问题，但建议的答案是关闭流和/或刷新它，我都这样做了，但它们似乎不起作用。任何帮助将不胜感激！

```
 Writer writer = null;
 FileOutputStream fos= null;
 try{

     String xyz= "You should stop using xyz";
     writer = new BufferedWriter(new OutputStreamWriter(
         new FileOutputStream(getFilesDir()+File.separator+"aq.txt")));
     writer.write(xyz);
     writer.flush();
 }    
 catch(IOException e) {
     System.out.println("Couldn't write to the file: " + e.toString());
 }
 finally{
     if(writer != null){
         try {
             writer.close();
         }
         catch(IOException e1) {
             e1.printStackTrace();
         }
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:50:25.500

试试这样：

```
fos = openFileOutput(FILE_NAME, Context.MODE_PRIVATE);
writer = new BufferedWriter(new OutputStreamWriter(fos));
writer.write(xyz);
writer.flush(); 
```

Context 类提供了一个帮助方法[Context.openFileOutput(String name, int mode)](http://developer.android.com/reference/android/content/Context.html#openFileOutput%28java.lang.String,%20int%29) ，它将为您的应用程序 Files 目录中的文件返回 FileOutputStream 给您。

我看不出你的方式行不通的任何直接原因，但我知道我已经成功地使用了这种方式。

**编辑：**重新阅读您的问题后，我认为您对该文件的写入位置感到困惑。它不会被写入工作空间内的项目文件夹。这将被写入运行它的 android 设备的内部存储中。每个应用程序都有自己的存储空间块，位于`\data\data\[package-name]\Files\`您的文件将被写入那里，因此您将无法立即打开它并查看它的内容（除非您的设备已植根。）您将拥有使用 java 代码打开它并将其内容打印到日志或其他一些输出方法，以验证您的写入是否有效。

**编辑2：读取文件**

```
FileInputStream in = openFileInput(FILE_NAME);
InputStreamReader inputStreamReader = new InputStreamReader(in);
BufferedReader br = new BufferedReader(inputStreamReader);
String line = br.readLine();
Log.d("TAG", line); 
```

这将读取文件的第一行并将其输出到日志中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:13:08.133

这肯定会奏效：

```
File file = new File("fileName");

FileWriter fileWriter = new FileWriter(file);

BufferedWriter writer = new BufferedWriter(fileWriter);

writer.write("data to write in the file.");

writer.flush(); 
```

# cakephp - Parse.com+CakePHP+OAuth-2.0，有人一起用吗？

> ID：12222844
> 
> 赞同：1
> 
> 时间：2012-08-31T21:44:23.643
> 
> 标签：cakephp, rest, oauth-2.0, parse-platform

我一直在寻找使用用户登录和 REST Web 服务构建搜索 web/ios/android 应用程序的最佳方式。我已经登陆 CakePHP 用于网站创建和 REST api 处理。

我也会使用适用于 iOS 的 RestKit API，但不确定我会为 Android 使用什么 RestAPI。

我还希望能够使用 OAuth-2.0 与 Twitter/Facebook/Pinterest 进行通信。

**我的问题：** 有没有办法同时使用 CakePHP 和 Parse.com 来处理所有用户身份验证，我是否需要分离数据表（一个在 parse.com 上，另一个在另一个使用 CakePHP 的托管服务上）？

如果可以的话，我想把所有东西都保留在 Parse.com。任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:27:21.017

我不熟悉 CakePHP，但如果您可以完全忽略默认附带的任何 DB/ORM，您可以在服务器和客户端应用程序中使用 Parse。有一个[非官方的 PHP 库](https://github.com/apotropaic/parse.com-php-library)可以用于服务器，它们提供[iOS 和 Android SDK](https://parse.com/docs/api_libraries)。

# r - R：根据几个标准选择数据框的行

> ID：12222848
> 
> 赞同：3
> 
> 时间：2012-08-31T21:44:29.857
> 
> 标签：r

我创建了一个数据框`my.df`，并希望根据几个条件选择行（或删除行）。对于这个示例数据框，我想保留第 1、2、4、7 和 8 行。具体来说，我想：

1.  保留第 3、4 或 5 列中包含数字的任何行
2.  如果第 1 列和第 2 列不是空白且不包含垃圾，则保留第 3-5 列中包含所有缺失观测值的任何行

我可以做到这一点，但我的解决方案似乎过于复杂，我希望有人可以提出更有效的方法。

```
my.df <- data.frame(C1 = c("group1", "group1",     "",     "", "junk", "junk", "group2",       ""),
                    C2 = c(     "A",      "B",     "",     "",     "", "junk",      "B",      "C"),
                    C3 = c(     100,       NA,     NA,     10,     NA,     NA,       NA,       NA),
                    C4 = c(     200,       NA,     NA,     20,     NA,     NA,      100,       NA),
                    C5 = c(     100,       NA,     NA,     30,     NA,     NA,       NA,        5))

my.df

# the number of missing observations in columns 3-5 is < 3 or
# when the number of missing observations in columns 3-5 is 3 neither column 1 nor 2 is either blank or 'junk'

df.2 <- my.df[ (rowSums(is.na(my.df[,3:5]))  < (ncol(my.df)-2)) | 
               (rowSums(is.na(my.df[,3:5])) == (ncol(my.df)-2) & my.df[,1] != 'junk' & my.df[,2] != 'junk'  & my.df[,1] != '' & my.df[,2] != '') , ]
df.2 
```

根据我的实际数据，有资格成为垃圾的东西可能很复杂。所以，在这里我概括`junk`为`junk1`并且`junk2`我仍然想保留第 1、2、4、7 和 8 行。下面的代码有效。

```
my.df <- data.frame(C1 = c("group1", "group1",     "",     "", "junk2", "junk1", "group2",       ""),
                    C2 = c(     "A",      "B",     "",     "",      "", "junk1",      "B",      "C"),
                    C3 = c(     100,       NA,     NA,     10,      NA,      NA,       NA,       NA),
                    C4 = c(     200,       NA,     NA,     20,      NA,      NA,      100,       NA),
                    C5 = c(     100,       NA,     NA,     30,      NA,      NA,       NA,        5))

my.df

df.3 <- my.df[ (rowSums(is.na(my.df[,3:5]))  < (ncol(my.df)-2)) | 
               (rowSums(is.na(my.df[,3:5])) == (ncol(my.df)-2)  & 
                my.df[,1] != 'junk1' & my.df[,2] != 'junk1'     & 
                my.df[,1] != 'junk2' & my.df[,2] != 'junk2'     &
                my.df[,1] != '' & my.df[,2] != '') 

        , ]
df.3 
```

因为有资格作为垃圾的字符串在这里变得非常多样化和复杂，所以我尝试使用 %in% 对垃圾进行分组来稍微简化代码，但我得到了一个错误。

```
all.junk <- c("", "junk1", "junk2")

my.df.1 <- my.df[,1]
my.df.2 <- my.df[,2]

my.df.1 <- as.character(my.df.1)
my.df.2 <- as.character(my.df.2)

df.4 <- my.df[ (rowSums(is.na(my.df[,3:5]))  < (ncol(my.df)-2)) | 
               (rowSums(is.na(my.df[,3:5])) == (ncol(my.df)-2) & 
                my.df.1[!(my.df.1%in%all.junk)] & my.df.2[!(my.df.2%in%all.junk)]) , ]
df.4 
```

我可以继续使用我拥有的功能代码，`df.3`为每个符合垃圾标准的字符串添加一个新行，但我怀疑有一个更有效的解决方案。

我在 Stackoverflow 上发现了类似的问题，但我发现没有一个问题似乎与此示例中的选择标准一样多或复杂。

感谢您的任何建议，尤其是关于`df.4`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:11:31.367

这非常紧凑：保留不是所有垃圾/nas的每一行：

```
all.junk=c("junk","")
subset(my.df,!(C1%in%all.junk &
               C2%in%all.junk & 
               is.na(C3) & is.na(C4) & is.na(C5))) 
```

输出

```
 C1 C2  C3  C4  C5
1 group1  A 100 200 100
2 group1  B  NA  NA  NA
4            10  20  30
7 group2  B  NA 100  NA
8         C  NA  NA   5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T00:13:58.113

如果您关心的是可读性，您可以重构此代码：

```
df.3 <- my.df[ (rowSums(is.na(my.df[,3:5]))  < (ncol(my.df)-2)) | 
           (rowSums(is.na(my.df[,3:5])) == (ncol(my.df)-2)  & 
            my.df[,1] != 'junk1' & my.df[,2] != 'junk1'     & 
            my.df[,1] != 'junk2' & my.df[,2] != 'junk2'     &
            my.df[,1] != '' & my.df[,2] != '') 
    , ] 
```

进入：

```
# Rows I want
good.rows = (rowSums(is.na(my.df[,3:5]))  < (ncol(my.df)-2)) | 
           (rowSums(is.na(my.df[,3:5])) == (ncol(my.df)-2)  & 
            my.df[,1] != 'junk1' & my.df[,2] != 'junk1'     & 
            my.df[,1] != 'junk2' & my.df[,2] != 'junk2'     &
            my.df[,1] != '' & my.df[,2] != '') 

df.3 <- my.df[good.rows,] 
```

并进一步：

```
sums.are.fine = (rowSums(is.na(my.df[,3:5]))  < (ncol(my.df)-2)) | 
           (rowSums(is.na(my.df[,3:5])) == (ncol(my.df)-2)

no.junk = my.df[,1] != 'junk1' & my.df[,2] != 'junk1'     & 
            my.df[,1] != 'junk2' & my.df[,2] != 'junk2'     &
            my.df[,1] != '' & my.df[,2] != '') 

good.rows = sums.are.fine & no.junk

df.3 <- my.df[good.rows,] 
```

您还可以编写单独的函数，例如`check.if.sums.are.fine(table.to.check)`返回布尔值的`check.everything(table.to.check)`函数，以及调用所有这些函数并给出最终结果的函数。

如果打字部分困扰您，我注意到的一件事是，对于“不能为`junk1`或`junk2`或为空”之类的事情，您可以制作一个`bad.values = character()`并用您不想要的每个值填充它，然后只需检查哪些值不包含in `bad.values`（除非您使用 for 循环，否则这可能需要一些工作才能添加到您的解决方案中）。

# javascript - 将参数传递给 page.includeJs() 和 page.evaluate() 内的匿名函数

> ID：12222856
> 
> 赞同：17
> 
> 时间：2012-08-31T21:45:43.143
> 
> 标签：javascript, phantomjs

一点背景...我对 javascript 和 phantom.js 有点陌生，所以我不知道这是 javascript 还是 phantom.js 错误（功能？）。

以下成功完成（抱歉缺少 phantom.exit()，完成后您只需按 ctrl+c）：

```
var page = require('webpage').create();
var comment = "Hello World";

page.viewportSize = { width: 800, height: 600 };
page.open("http://www.google.com", function (status) { 
    if (status !== 'success') {
        console.log('Unable to load the address!');
        phantom.exit();
    } else {
        page.includeJs('http://code.jquery.com/jquery-latest.min.js', function() {
            console.log("1: ", comment);
        }, comment);

        var foo = page.evaluate(function() {            
            return arguments[0];
        }, comment);

        console.log("2: ", foo);            
    }
}); 
```

这有效：

```
page.includeJs('http://code.jquery.com/jquery-latest.min.js', function() {
    console.log("1: ", comment);
}, comment); 
```

**输出**：`1: Hello World`

但不是：

```
page.includeJs('http://code.jquery.com/jquery-latest.min.js', function(c) {
    console.log("1: ", c);
}, comment); 
```

**输出**：`1: http://code.jquery.com/jquery-latest.min.js`

并不是：

```
page.includeJs('http://code.jquery.com/jquery-latest.min.js', function() {
    console.log("1: ", arguments[0]);
}, comment); 
```

**输出**：`1: http://code.jquery.com/jquery-latest.min.js`

看第二件，这是可行的：

```
var foo = page.evaluate(function() {            
    return arguments[0];
}, comment);

console.log("2: ", foo); 
```

**输出**：`2: Hello World`

和这个：

```
var foo = page.evaluate(function(c) {           
    return c;
}, comment);

console.log("2: ", foo); 
```

**输出**：`2: Hello World`

但不是这个：

```
var foo = page.evaluate(function() {            
    return comment;
}, comment);

console.log("2: ", foo); 
```

**输出**：

> ReferenceError：找不到变量：注释
> 
> phantomjs://webpage.evaluate():2
> 
> phantomjs://webpage.evaluate():3
> 
> phantomjs://webpage.evaluate():3
> 
> 2：空

好消息是，我知道什么有效，什么无效，但是保持一点一致性怎么样？

`includeJs`为什么和有区别`evaluate`？

将参数传递给匿名函数的正确方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-31T22:26:28.330

使用 PhantomJS 需要理解的一个棘手的问题是，有两个执行上下文 - Phantom 上下文，它位于您的机器本地并且可以访问`phantom`object 和`require`d 模块，以及远程上下文，它存在于`window`无头浏览器中，并且只有可以访问您通过加载的网页中加载的内容`page.load`。

您编写的大部分脚本都是在 Phantom 上下文中执行的。主要的例外是`page.evaluate(function() { ... })`. 这里`...`是在远程上下文中执行的，它是沙盒的，无法访问本地上下文中的变量和对象。您可以通过以下方式在两个上下文之间移动数据：

*   从传递给的函数返回一个值`page.evaluate()`，或
*   将参数传递给该函数。

这样传递的值基本上在每个方向上都被序列化了——你不能传递一个带有方法的复杂对象，只能传递一个像字符串或数组这样的数据对象（我不知道确切的实现，但经验法则似乎是你可以用 JSON 序列化的任何东西都可以在任一方向传递）。您*不能*像使用标准 Javascript 那样访问`page.evaluate()`函数外部的变量，只能访问作为参数显式传入的变量。

所以，你的问题：**为什么 includeJs 和评估之间的区别？**

*   `.includeJs(url, callback)`*接受一个在Phantom*上下文中执行的回调函数，显然接收 url 作为它的第一个参数。除了它的参数之外，它还可以访问（像任何普通的 JavaScript 函数一样）其封闭范围内的所有变量，包括`comment`在您的示例中。它在回调函数之后不需要*额外*的参数列表 - 当您`comment`在回调中引用时，您引用的是外部变量，而不是函数参数。

    ```
    var foo = "stuff";
    page.includeJs('http://code.jquery.com/jquery-latest.min.js', function() {
        // this callback function executes in the Phantom context
        console.log("jQuery is loaded in the remote context.");
        // it has access to outer-scope variables, including "phantom"
        nowDoMoreStuff(foo, page);
    }); 
    ```

*   `.evaluate(function, args*)`接受一个函数来执行和零个或多个参数传递给它（以某种序列化形式）。您需要在函数签名中命名参数，例如`function(a,b,c)`，或使用`arguments`对象来访问它们 - 它们不会自动与您传入的变量具有相同的名称。

    ```
    var foo = "stuff";
    var bar = "stuff for the remote page";

    var result = page.evaluate(function(bar2) {
        // this function executes in the remote context
        // it has access to the DOM, remote libraries, and args you pass in
        $('title').html(bar2);
        // but not to outer-scope vars
        return typeof foo + " " + typeof bar;
    }, bar);

    console.log(result); // "undefined undefined" 
    ```

因此，对于这些不同方法中的函数，传递参数的正确方法是不同的。对于`injectJs`，回调将使用一组新参数（至少包括 URL）调用，因此您要访问的任何变量都需要在回调的封闭范围内（即您可以在函数的闭包中访问它们） . 因为`evaluate`，只有一种方法可以传入参数，即将它们包含在传递给`evaluate`自身的参数中（也有其他方法，但它们很棘手，现在不值得讨论，因为这个功能在 PhantomJS 本身中可用） .

# java - 使用 FtpClient 获取文件的 MIME 类型

> ID：12222859
> 
> 赞同：2
> 
> 时间：2012-08-31T21:45:58.353
> 
> 标签：java, ftp

我正在开发一个支持 http/https/ftp 协议的下载管理器。我正在使用 `FTPClient`from`Apache commons library`来通过 FTP 下载文件。我希望能够确定`MIME-Type`即将下载的文件。请注意，我知道如何`retrieveFile`使用`FTPClient`. 我只想获取`MIME-Type`类似`audio/wma`.

任何人都可以指导我得到这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:05:20.447

好吧，您将无法使用 FTP 命令获取文件的 MIME 类型，因为它不受支持，因此`FTPClient`不支持提供该信息。但是，*在*您下载文件后，您可以使用它`org.apache.sling.commons.mime`来获取 MIME 类型。

# mysql - SQL：在查询结果末尾添加虚线 (-)

> ID：12222860
> 
> 赞同：1
> 
> 时间：2012-08-31T21:46:14.897
> 
> 标签：mysql, sql, row, union, sqldatatypes

在这里，我尝试通过在数据和结果数据之间使用联合查询来添加额外的行。

```
select color, item, sum(qua) from inventory
Group by color, item
UNION
Select '----','----','----'
Union
select Count(color), 'total', sum(qua)
from inventory 
```

结果将是：

```
ITME    COLOR   QUA
----    -----   ----
chair   Black   520
chair   pink    1028
chair   Red 1050
chair   Yellow  524
table   Black   1048
table   Blue    124
table   pink    624
table   Red 524
table   Yellow  548
-----   -----   -----    <----This extra row.
13  total   5990 
```

我使用了上面的查询，但它显示了数据类型不匹配错误。将 varchar 值“----”转换为数据类型 int 时转换失败。我正在使用 Microsoft SQL Server Management Studio r2 2008

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T21:47:09.613

不，你不应该这样做。为此，您必须将值`sum(qua)`转换为 varchar，但这是一个坏主意。

绘制一条线应该在您的表示层中处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:01:10.010

使用`UNION ALL`代替`UNION`

> **UNION** UNION 命令用于从两个表中选择相关信息，很像 JOIN 命令。但是，当使用 UNION 命令时，所有选定的列都需要具有相同的数据类型。使用 UNION，只选择不同的值。
> 
> **UNION ALL** UNION ALL 命令与 UNION 命令相同，但 UNION ALL 选择所有值。

[参考](http://blog.sqlauthority.com/2009/03/11/sql-server-difference-between-union-vs-union-all-optimal-performance-comparison/)

`UNION ALL`除非您删除重复项，否则您应该始终使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T21:58:25.887

这里有两件事。首先是`sum(qua)`和`'----'`的类型不同（数字与文本）。

```
select color, item, convert(nvarchar(30),sum(qua)) from inventory
Group by color, item
UNION
Select '----','----','----'
Union
select Count(color), 'total', sum(qua)
from inventory 
```

其次是您希望 SQL 以 SELECT 的顺序返回数据，**但事实并非如此**。来自联合的行可以按任何顺序排列。为了达到你想要的*排序技巧*的结果是必要的：

```
select color, item, summary from
(
    select 0 as ToOrder, color, item, convert(nvarchar(30),sum(qua)) as summary from inventory
    Group by color, item
    UNION
    Select 1, '----','----','----'
    Union
    select 2, Count(color), 'total', sum(qua)
    from inventory
) as x
order by ToOrder asc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T21:54:20.473

这应该仅用于在查询窗口中进行测试，否则请遵循 Mark Byers 的建议

```
select color, item, CAST(sum(qua) as VARCHAR) As QUA from inventory
Group by color, item
UNION ALL
Select '----','----','----'
UNION ALL
select CAST(Count(color) AS VARCHAR), 'total', CAST(sum(qua) AS VARCHAR)
from inventory 
```

# msbuild - 过滤现有项目组，使其仅包含符合某些条件的文件

> ID：12222863
> 
> 赞同：25
> 
> 时间：2012-08-31T21:46:27.407
> 
> 标签：msbuild, filtering

如何根据特定条件（例如文件扩展名或项目的元数据）过滤现有的 ItemGroup？

对于此示例，我将使用文件扩展名。我正在尝试过滤 VS 定义的“无”ItemGroup，以便我的目标可以对给定扩展名的所有文件进行操作。

例如，可以定义以下内容：

```
<ItemGroup>
    <None Include="..\file1.ext" />
    <None Include="..\file2.ext" />
    <None Include="..\file.ext2" />
    <None Include="..\file.ext3" />
    <None Include="..\file.ext4" />
</ItemGroup> 
```

我想过滤上面的“无”ItemGroup，所以它只包含`ext`扩展名。请注意，我**不想**指定要排除的所有扩展，因为它们会因项目而异，并且我试图使我的目标无需修改即可重用。

我尝试`Condition`在目标中添加一个：

```
<Target Name="Test">
    <ItemGroup>
        <Filtered
            Include="@(None)"
            Condition="'%(Extension)' == 'ext'"
            />
    </ItemGroup>
    <Message Text="None: '%(None.Identity)'"/>
    <Message Text="Filtered: '%(Filtered.Identity)'"/>
</Target> 
```

但遗憾的是，它不起作用。我得到以下输出：

```
Test:
  None: '..\file1.ext'
  None: '..\file2.ext'
  None: '..\file.ext2'
  None: '..\file.ext3'
  None: '..\file.ext4'
  Filtered: '' 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-01T00:12:55.543

```
<ItemGroup>
  <Filtered Include="@(None)" Condition="'%(Extension)' == '.ext'" />
</ItemGroup> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T13:51:03.103

对于高级过滤，我建议使用`RegexMatch`MSBuild [Community Tasks](https://github.com/loresoft/msbuildtasks)中的。

在本例中，我们将过滤版本号

```
 <RegexMatch Input="@(Items)" Expression="\d+\.\d+\.\d+.\d+">
        <Output ItemName ="ItemsContainingVersion" TaskParameter="Output" />
    </RegexMatch> 
```

> 通过 Nuget 安装 MSBuild 社区任务：PM> Install-Package MSBuildTasks 或[在此处下载](https://github.com/loresoft/msbuildtasks)

然后在您的 MSBuild 脚本中导入它：

```
<PropertyGroup>
    <MSBuildCommunityTasksPath>..\.build\</MSBuildCommunityTasksPath>
</PropertyGroup>
<Import Project="$(MSBuildCommunityTasksPath)MsBuild.Community.Tasks.Targets" /> 
```

# android - Android .setText（TypeValue，float）不起作用

> ID：12222864
> 
> 赞同：0
> 
> 时间：2012-08-31T21:46:27.983
> 
> 标签：android, settext

这就是我实现它的方式

```
topBar.setTextSize(TypedValue.COMPLEX_UNIT_DIP, R.dimen.sTextSize); 
```

这是维度

```
<item name="sTextSize" format="float" type="dimen">30.0</item> 
```

文本大小出来非常非常小，这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T22:14:07.237

您将 ID 设置为文本大小，而不是存储在该 ID 下的*值。*你应该做这样的事情：

```
int textSize = getResources().getDimension(R.dimen.sTextSize);
topBar.setTextSize(TypedValue.COMPLEX_UNIT_DIP, textSize); 
```

# active-directory - 需要详细说明未处理的继续参考

> ID：12222869
> 
> 赞同：3
> 
> 时间：2012-08-31T21:47:26.383
> 
> 标签：active-directory

我们有一个用户，我们的公司门户无法从 AD 获取组。

在门户日志中，我们看到此错误：

> javax.naming.PartialResultException：未处理的继续引用剩余名称''

我已经用谷歌搜索了似乎描述这种情况以及如何解决它的错误和最佳症状：[http ://www-01.ibm.com/support/docview.wss?uid=swg21232921](http://www-01.ibm.com/support/docview.wss?uid=swg21232921)

假设我们不想仅仅因为一个用户而更改配置，而是要修改这个特定用户的数据，有人可以解释一下我在检查 AD 中的用户记录时如何识别这一点吗？这是否与他的小组作业有关，如果是，那么我应该寻找什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T17:58:15.537

我刚碰到这个。

我通过将 InitialDirContext 环境设置为将 Context.REFERRAL 键设置为“follow”来解决它。

根据 Javadocs，该键可以是“follow”、“ignore”或“throw”。默认值由您使用的提供程序确定，可能是“抛出”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T22:47:43.603

查看此链接以获取有关 API 告诉您的更多数据：http: [//www.jspwiki.org/wiki/ActiveDirectoryIntegration](http://www.jspwiki.org/wiki/ActiveDirectoryIntegration)

我不是该 API 的专家，但至少可以根据该文档和对 AD 正在做什么的了解来解释我认为正在发生的事情。:)

当您执行的搜索具有此本地服务器/搜索之外的命名上下文但在您的请求的逻辑范围内时，AD 会返回所谓的“[引用”。](https://docs.microsoft.com/en-us/windows/win32/ad/referrals)这是每个 RFC 请求。将推荐视为向您提示应用程序可能存在更多数据...即，AD 服务器说*“这是我为您提供的结果，但是，您应该知道，有人否则可能会有更多……去这里了解一下。”* 推荐不是“错误”，它们是对应用程序的提示。

似乎您的 LDAP API 在遇到它们时会引发异常。根据我上面引用的文档，看起来您可以吞下它们或追逐推荐以找出是否有更多数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T09:05:47.440

我发现的问题之一是 ldapContext 中的搜索查询字符串不正确。由于参数格式错误而形成的错误查询抛出：

```
javax.naming.PartialResultException: Unprocessed Continuation Reference(s) remaining name '' 
```

但是如果我们添加参数 Context.REFERRAL="follow"，那么它不会抛出异常但也不会返回结果。

ldap 查询字符串的参数也应该与 LDAP 接受的参数匹配，否则它将引发相同的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-24T06:29:01.697

为环境属性添加这个

```
 env.put(Context.REFERRAL,"follow"); 
```

# jquery - 使用 jQuery 动态构建子菜单

> ID：12222871
> 
> 赞同：1
> 
> 时间：2012-08-31T21:47:38.753
> 
> 标签：jquery, list, submenu

具有以下结构：

```
<div id="block1">
   <ul class="category">
      <li>Comedy</li>
   </ul>
</div>

<div id="block2">
   <ul class="category">
       <li>Comedy</li>
       <li>Drama</li>
   </ul>
</div> 
```

无序列表`category`是用 php 生成的`foreach()`，在某些块中`ul`可能包含 1 `li`，而在其他块中可能包含 2、3 或 X `li`，因此我需要`li`在子菜单中将这些额外的 s 转换为第一个`li`在顶部。

*   我的问题是，如何选择`<li>`第一个之后的其余部分？因为一旦我有了其余的`li`，我可以将它们包装在另一个中`ul`并构建子菜单。

我可以使用以下代码来过滤具有多个选项的列表，但是接下来呢？

```
 $('.categories').filter(function() {
        if($(this).children("li").length > 1) {
            console.log($(this).text());
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:50:53.763

你可以使用`wrapAll`方法。

```
$('ul.category').each(function(){
  $('li:gt(0)', this).wrapAll('<ul/>')
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:51:37.120

`li`在第一个使用之后获取所有元素`.slice()`

```
$(this).children("li").slice(1); 
```

然后你可以使用这些元素来做你需要的任何包装

# git - 如何将悬空的 blob 与 Git 中的文件名匹配？

> ID：12222872
> 
> 赞同：1
> 
> 时间：2012-08-31T21:47:55.947
> 
> 标签：git, blobs, git-dangling

我还有另一个`git rm -rf`没有初始提交的例子。（我意识到我添加了很多无用的文件并想添加一些过滤器。）

现在我剩下 23000 个没有树的悬空 blob，但有完整的 Git 历史！

我将使用脚本循环遍历 blob 名称（使用`git show 'blobname' > 'filename'`），但是我可以将这些文件名从历史记录关联到 blob 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:48:39.253

对于所有曾经/将要犯我所犯错误的人，故事到此结束。

首先，简要总结一下我所做的事情。

1.  创建了一个空存储库
2.  将许多文件/目录移至其中
3.  `gid add .`
4.  意识到我刚刚添加了大量无用/不那么重要/冗余文件
5.  `git rm -rf` 然后在 .gitignore 中添加一些过滤器
6.  意识到我所有的文件都不见了......

我尝试了各种数据恢复工具；没运气。我能做的最好的就是以下程序。

1.  立即将工作目录复制到不同的卷（外部 HD）。
2.  `git fsck --lost-found` 可能与`--unreachable --cache`
    这将创建`.git/lost-found/other`包含所有（大部分？）原始文件的文件夹，但没有文件名。现在的问题是如何恢复文件名。不幸的是，我恢复的所有文件都是 blob，没有根，所以我没有关于目录树结构的信息。
3.  即使我有完整的丢失文件名列表（只有名称，没有大小），我找不到任何根目录，所以这些信息基本上没有用。
4.  通常，可以编写一个脚本`file`来查看文件的类型 ( `file <filename>`)，并为其附加相应的扩展名。将文件与文件名匹配的问题仍然存在。
    或者，可以使用蛮力。例如，为了恢复 pdf，我按长度对恢复的文件进行排序，为它们附加 .pdf 扩展名，然后逐一查看。实际的 pdf 文件显示了某些内容，而其他文件则没有。
5.  为了恢复基于文本的文件（txt、tex、c、h..），我使用了 grep，寻找我记得属于特定（一组）文件的字符串。
6.  现在我将所有丢失恢复的文件保存在目录中，每次我需要其中一个时，我都会使用项目符号 4 的轻微变体。

祝你好运！

# c# - 如何在 C# 程序中使用 SOS.dll 进行自动调试？

> ID：12222873
> 
> 赞同：3
> 
> 时间：2012-08-31T21:48:02.287
> 
> 标签：c#, .net, debugging, memory-leaks, sos

为了追踪内存泄漏，我一直在使用 Visual Studio 和 SOS.dll 来提供对象堆的转储，并查看 GCRooting 特定对象的位置。

我开始使用 AutoIt 自动化这个过程来控制我的鼠标和键盘。这是我的脚本第一部分的近似值：

> 在 Visual Studio 中按 F5 开始执行
> 让程序完全加载
> 切换到 Visual Studio 并中断执行
> 
> 将焦点切换到即时窗口
> Load SOS.dll
> Call`!dumpheap -stat`
> 将转储结果复制到剪贴板
> 粘贴到记事本中并另存为 dump1.txt
> 
> 继续执行
> 多次执行泄漏操作
> 切换到 Visual Studio 并中断执行
> 
> 将焦点切换到即时窗口
> 清除输出
> Call`!dumpheap -stat`
> 将转储结果复制到剪贴板
> 粘贴到记事本并另存为 dump2.txt
> 
> 运行一个 Python 脚本，比较两个转储并定位泄漏的对象

不过，我对我目前的方法有一些担忧。我不仅依赖于 Visual Studio 的安装，而且在脚本运行时，我无法使用鼠标或键盘而不会使自动化顺序混乱。

有没有办法在 C# 程序而不是 Visual Studio 中使用 SOS.dll？理想情况下，此解决方案将附加到指定进程并将结果输出`!dumpheap -stat`到文本文件，而无需自动化 Visual Studio。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T21:52:52.823

下面我将介绍一些您可以用来查找泄漏的不同方法。

（如果您不希望遵循 DIY 方法，可以使用商业“泄漏”检测器）。

## 链接到我的答案，详细说明了许多调试工具/资源

*   [如何使用 WinDbg 分析 VC++ 应用程序的故障转储？](https://stackoverflow.com/questions/734272/how-to-use-windbg-to-analyze-the-crash-dump-for-vc-application/25223024#25223024)

## 将 SOS.DLL 加载到 WinDBG

您实际上不需要 Visual Studio 来使用 SOS.DLL ....它是一个调试器扩展，因此也可以在 WinDBG 中使用。

作为 Windows 调试工具的一部分，您可以免费获得 WinDBG 调试器。

然后，您可以编写一个 WinDBG 脚本来自动化您的“转储”。

另请注意，有可用的 SOS.DLL 增强版本...查找 SOSEX、PSSCOR2（用于 NET 2）和 PSSCOR4（用于 NET 4）。

## CLR 分析 API

您可以使用 CLR 分析 API。

有一个名为 CLRProfiler 的应用程序，它是一个使用它的实际 .NET 分析器......所以有很多代码来看看它是如何使用的。

CLR Profiler 可以做的一件事是允许进行堆转储，然后比较在不同时间段进行的转储，以找出差异……从而帮助发现泄漏。

您可以在“测试”模式下为您的应用程序提供类似的功能（嵌入在应用程序中，或作为监控它的配套实用程序）。

*   [http://msdn.microsoft.com/en-us/magazine/cc300553.aspx](http://msdn.microsoft.com/en-us/magazine/cc300553.aspx)

*   [http://www.microsoft.com/en-gb/download/details.aspx?id=16273](http://www.microsoft.com/en-gb/download/details.aspx?id=16273)

*   [http://blogs.msdn.com/b/davbr/](https://web.archive.org/web/20190114032256/https://blogs.msdn.microsoft.com/davbr)

## 进程转储

您可以使用的另一种技术是定期“转储”您的进程，然后您可以通过带有 SOS/SOSEX（或任何其他 WinDBG 插件）的 WinDBG 对其进行离线分析。

您可以使用 DebugDiag（您可以设置规则和操作来控制何时创建 .dmp 文件）来自动创建 .dmp 文件......或名为 ProcDump.exe 的工具（来自 SysInternals）。

*   [http://www.microsoft.com/en-us/download/details.aspx?id=26798](http://www.microsoft.com/en-us/download/details.aspx?id=26798)

*   [http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx)

ProcDump 特别有用，因为它能够非常快速地获取“进程快照”，因为它使用了一种称为“进程反射”的技术......

（创建 3 个转储，每个转储之间间隔 5 秒）

```
procdump -s 5 -n 3 notepad.exe notepad.dmp 
```

## 验尸分析

拥有一组 .dmp 文件后，您可以分析它们以查找泄漏、监控句柄使用情况等。

您可以在 WinDBG 中手动加载 .dmp 文件，然后发出调试器命令，或者您可以编写一个 WinDBG 扩展或一个脚本来获取转储文件集并依次处理它们（即在它们上运行 !dumpheap stat 命令） .

## 调试分析器 .NET

*   [http://www.debuganalyzer.net/](http://www.debuganalyzer.net/)

这是一个旨在分析 .dmp 文件并进行事后分析的工具。

它允许您在 .NET 中编写脚本，因此可能比 WinDBG 更易于访问。

如果你想扩展它，它也有一个插件模型。

它允许您编写/使用可视化工具以独特的方式查看数据。

（目前仅支持 CLR 2.0 内存转储...不支持 CLR 4.0）

# bash - 将标准输出重定向到正在运行的进程

> ID：12222875
> 
> 赞同：3
> 
> 时间：2012-08-31T21:48:24.590
> 
> 标签：bash, redirect, stdout

我知道如何将标准输出重定向到文件，但是否可以将标准输出重定向到进程（Linux 环境）？

例如，如果我通过“~^Z”将一个活动的 SSH 会话移到后台，有没有办法在我的本地主机上启动另一个程序并将其标准输出重定向到 SSH 会话？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T00:02:40.497

有时像

```
echo "something" > /proc/pid-of-process/fd/0 
```

工作，但如果他们链接到伪终端，它不会。

所以，这是做你想做的事的一种方法。

1.  ** 配置您的 SSH 连接以使用证书/无密码登录。
2.  创建一个命名管道（例如`mkfifo mypipe`）
3.  使用 tail 从管道中读取数据并将其传递给 SSH 进程，例如：

    `tail -f mypipe | ssh -t -t user@somehost.com`

4.  将您想要进入 ssh 会话的任何内容发送到命名管道，例如：

    `echo "ls -l" > mypipe`

    因此，如果您需要从另一个程序中传输内容，您只需这样做

    `./my-program > /path/to/mypipe`

5.  你完成了。

一些注意事项：

1.  ** 是可选的，但如果不这样做，则必须在启动 SSH 会话的终端上输入密码，不能通过管道传递密码。事实上，如果你尝试，一旦 SSH 连接完成，它就会显示为通过管道传递的明文。
2.  您的 SSH 会话现在仅与您的命名管道一样安全。只是一个抬头。
3.  连接后，您将无法从原始终端使用 SSH 会话。您必须使用命名管道。
4.  您始终可以 ctrl+c 原始终端中的 SSH 进程来杀死它并恢复终端的功能。
5.  任何输出都将出现在原始终端上——可能很明显，但我只是想指出这一点。
6.  `-f`选项 to`tail`是防止 SSH 进程在管道为空时接收 EOF 所必需的。还有其他方法可以防止管道关闭，但我认为这是最简单的方法。
7.  强制 tty 分配的`-t -t`选项，否则它会抱怨，因为在您的情况下正在传输标准输入。`ssh`
8.  最后，几乎肯定有更好的方法来做你想做的事——如果这是任何严重/长期的事情，你应该考虑找到它。

# html - 手机上的css宽度问题

> ID：12222879
> 
> 赞同：0
> 
> 时间：2012-08-31T21:48:46.727
> 
> 标签：html, css, mobile, mobile-safari

我有这个网站：[链接](http://ge.dpwebdev.co.uk)

我遇到的问题是，在移动设备上，身体右侧有这个不寻常的空白：

![在此处输入图像描述](../Images/1db4897594e4089a54c36cb3fd8d55a1.png)

该网站由一个页面组成，其中包含多个部分，导航图标用于平滑向下滚动页面。

为了尝试解决这个问题，我使用了推荐的：`body{ overflow-x:hidden; }`这解决了这个问题，但这会阻止我的滚动系统由于某种原因而无法工作。

有没有办法让这个网站在`body{ overflow-x:hidden; }`不使用它的情况下进行模仿，即使使用 jquery 也是如此？

这是代码：

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=768; initial-scale=1.0;"  />
<title>Georgia Elliott Illustration</title>

<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/main.css" type="text/css" media="all" />
<link rel="stylesheet" href="css/print.css" type="text/css" media="print" />
<link rel="stylesheet" href="js/twitter/jquery.tweet.css" media="screen" />

<link rel="shortcut icon" type="image/x-icon" href="http://1.gravatar.com/blavatar/f541b2d0f8b48c05e56c0daa078f3ed9?s=16" sizes="16x16" />
<link rel="icon" type="image/x-icon" href="http://1.gravatar.com/blavatar/f541b2d0f8b48c05e56c0daa078f3ed9?s=16" sizes="16x16" />
<link rel="apple-touch-icon-precomposed" href="http://1.gravatar.com/blavatar/94661061bf2aad5cdce6115262923c20?s=114" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<script type="text/javascript" src="js/smooth.js"></script>
<script type="text/javascript" src="js/twitter/jquery.tweet.js"></script>
<script type='text/javascript'>
    jQuery(function($){
        $("#twitter-feed-main").tweet({
            username: "creative_exp",
            join_text: "auto",
            avatar_size: 32,
            count: 3,
            auto_join_text_default: "We said:", 
            auto_join_text_ed: "We:",
            auto_join_text_ing: "We were:",
            auto_join_text_reply: "We replied to:",
            auto_join_text_url: "We were checking out:",
            loading_text: "Loading Tweets..."
        });
    });
</script>
</head>

<body>

<div id="splat"></div>
<div id="logo">
    <a href="#home"></a>
</div>

<div id="header">

<div id="nav" class="nav">
     <ul>
         <li><a href="#home">Home</a></li>
         <li><a href="#about">About</a></li>
         <li><a href="#portfolio">Portfolio</a></li>
         <li><a href="#contact">Contact</a></li>
     </ul>
</div>

</div>

<div id="whole">
<div class="content">

<div id="home-page" class="page">
    <div class="page-back"></div>
    <a id="home"></a>
    <div class="inner-page">
        <h1>Welcome</h1>
        <div class="indent">

        </div>
    </div>
</div><!--END home-page-->

<div id="page1" class="page">
    <div class="page-back"></div>
    <a id="about"></a>
    <div class="inner-page">
        <h1>About Me</h1>
        <div class="indent">
            About page content goes here.
        </div>           
    </div>
</div><!--END page1-->

<div id="page2" class="page">
    <div class="page-back"></div>
    <a id="portfolio"></a>
    <div class="inner-page">
        <h1>Portfolio</h1>
        <div class="indent">
            Portfolio page content goes here.
            <div id="portfolio-items">
                <ul id="port-ul1">
                    <li id="port-item1">Test</li>
                </ul>
                <ul id="port-ul2">
                    <li id="port-item2">Test 2</li>
                </ul>
                <ul id="port-ul2">
                    <li id="port-item3">Test 3</li>
                </ul>                
            </div>
        </div>           
    </div>
</div><!--END page2-->

<div id="page3" class="page">
    <div class="page-back"></div>
    <a id="contact"></a>
    <div class="inner-page">
        <h1>Contact Me</h1>
        <div class="indent">
            Contact page content goes here.
        </div>           
    </div>
</div><!--END page3-->

<div id="terms-page-ie" class="page">
    <div class="page-back"></div>
    <a id="terms-ie"></a>
    <div id="cross-terms-ie" class="cross-terms-ie">X</div>
    <div class="inner-page">
        <h1>Terms</h1>
        <div class="indent">
                <h5>INTRODUCTION</h5>

                <p>These terms and conditions govern your use of our website; by using our website, you accept these terms and conditions in full. If you disagree with these terms and conditions or any part of these terms and conditions, you must not use our website. You must be at least 13 years of age to use our website.  By using our website you warrant and represent that you are at least 13 years of age.</p>

                <h5>LICENCE TO USE WEBSITE</h5>

                <p>Unless otherwise stated, we or our licensors own the intellectual property rights in the website and material on the website.  Subject to the licence below, all these intellectual property rights are reserved. You may view, download for caching purposes only, and print pages or other content from the website for your own personal use, subject to the restrictions set out below and elsewhere in these terms and conditions. <br><br>
                You must not:<br>
                (a) republish material from this website (including republication on another website);<br>
                (b) sell, rent or sub-license material from the website;<br>
                (c) show any material from the website in public;<br>
                (d) reproduce, duplicate, copy or otherwise exploit material on our website for a commercial purpose;<br>
                (e) edit or otherwise modify any material on the website; or<br>
                (f) redistribute material from this website except for content specifically and expressly made available for redistribution.</p>

                <h5>ACCEPTABLE USE</h5>

                <p>You must not use our website in any way that causes, or may cause, damage to the website or impairment of the availability or accessibility of the website; or in any way which is unlawful, illegal, fraudulent or harmful, or in connection with any unlawful, illegal, fraudulent or harmful purpose or activity.
                You must not use our website to copy, store, host, transmit, send, use, publish or distribute any material which consists of (or is linked to) any spyware, computer virus, Trojan horse, worm, keystroke logger, rootkit or other malicious computer software.
                You must not conduct any systematic or automated data collection activities (including without limitation scraping, data mining, data extraction and data harvesting) on or in relation to our website without our express written consent.
                You must not use our website to transmit or send unsolicited commercial communications. You must not use our website for any purposes related to marketing without our express written consent.</p>

                <h5>RESTRICTED ACCESS</h5>

                <p>Access to certain areas of our website is restricted. We reserve the right to restrict access to other areas of our website, or indeed our whole website, at our discretion. If we provide you with a user ID and password to enable you to access restricted areas of our website or other content or services, you must ensure that that user ID and password is kept confidential. We may disable your user ID and password in our sole discretion without notice or explanation.</p> 
        </div>           
    </div>
</div>

</div>

</div>

<div id="footer">
        <div id="share" class="pull_right">
            <ul>
                <a href="https://www.facebook.com/georgia.e.elliott" target="_new"><li class="pull_left"><span>Facebook</span></li></a>
                <a href="javascript:void(0);" id="twitter"><li class="pull_left"><span>Twitter</span></li></a>
                <a href="http://georgiaelishaillustrator.wordpress.com/" target="_new"><li class="pull_left"><span>Blog</span></li></a>
            </ul>       
        </div>
        <div id="footertext"> © 2012 Georgia Elliott &nbsp; | &nbsp; All rights reserved. &nbsp; | &nbsp; Site By: <a href="http://dandd.dpwebdev.co.uk" target="_new">D&D Creative</a> &nbsp; | &nbsp; <a href="javascript:void(0);" id="terms-link">Terms</a><img src="img/ajax-loader.gif" class="ie-loader" style="vertical-align:middle;" /><img src="img/footer.png" id="ge-il-btm" style="vertical-align: middle; position: absolute; left: 0; right: 0; margin: 0 auto;" /></div>
</div>

<div id="terms-container">
    <div id="terms">
        <div id="cross-terms" class="cross">X</div>
        <div class="inner-content">
            <h3>Terms and Conditions</h3>
            <div class="indent" style="overflow:auto; height:300px;">
                <h5>INTRODUCTION</h5>

                <p>These terms and conditions govern your use of our website; by using our website, you accept these terms and conditions in full. If you disagree with these terms and conditions or any part of these terms and conditions, you must not use our website. You must be at least 13 years of age to use our website.  By using our website you warrant and represent that you are at least 13 years of age.</p>

                <h5>LICENCE TO USE WEBSITE</h5>

                <p>Unless otherwise stated, we or our licensors own the intellectual property rights in the website and material on the website.  Subject to the licence below, all these intellectual property rights are reserved. You may view, download for caching purposes only, and print pages or other content from the website for your own personal use, subject to the restrictions set out below and elsewhere in these terms and conditions. <br><br>
                You must not:<br>
                (a) republish material from this website (including republication on another website);<br>
                (b) sell, rent or sub-license material from the website;<br>
                (c) show any material from the website in public;<br>
                (d) reproduce, duplicate, copy or otherwise exploit material on our website for a commercial purpose;<br>
                (e) edit or otherwise modify any material on the website; or<br>
                (f) redistribute material from this website except for content specifically and expressly made available for redistribution.</p>

                <h5>ACCEPTABLE USE</h5>

                <p>You must not use our website in any way that causes, or may cause, damage to the website or impairment of the availability or accessibility of the website; or in any way which is unlawful, illegal, fraudulent or harmful, or in connection with any unlawful, illegal, fraudulent or harmful purpose or activity.
                You must not use our website to copy, store, host, transmit, send, use, publish or distribute any material which consists of (or is linked to) any spyware, computer virus, Trojan horse, worm, keystroke logger, rootkit or other malicious computer software.
                You must not conduct any systematic or automated data collection activities (including without limitation scraping, data mining, data extraction and data harvesting) on or in relation to our website without our express written consent.
                You must not use our website to transmit or send unsolicited commercial communications. You must not use our website for any purposes related to marketing without our express written consent.</p>

                <h5>RESTRICTED ACCESS</h5>

                <p>Access to certain areas of our website is restricted. We reserve the right to restrict access to other areas of our website, or indeed our whole website, at our discretion. If we provide you with a user ID and password to enable you to access restricted areas of our website or other content or services, you must ensure that that user ID and password is kept confidential. We may disable your user ID and password in our sole discretion without notice or explanation.</p> 
            </div>
        </div>
    </div>
</div>
<div id="overlay"></div>

<div id="twitter-feed-container">
    <div id="twitter-feed-cross">X</div>
    <div id="twitter-arrow"></div>
    <div id="twitter-feed-main">

    </div>
    <a href="" id="see-twitter" target="_new" >See More...</a>
</div>

<script type="text/javascript">
$(document).ready(function() {
    $("#terms-link").click(function() {
        $('#terms-page-ie').show();
        $('#terms-link').hide();
        $('.ie-loader').show();
        var $targetId = $('#terms-page-ie'), $targetAnchor = $('[name=#terms-page-ie]');
        var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
        if ($target) {
            var targetOffset = $target.offset().top;
            $('html, body').animate({scrollTop: targetOffset}, 1500);
        }
        $('.ie-loader').fadeOut(2500);
    });

    $("#cross-terms-ie").click(function() {
        $('#terms-page-ie').hide();
        $('#terms-link').show();
        $('html, body').animate({scrollTop: 0}, 1000);
    });

    $("#twitter").click(function() {
        $('#twitter-feed-container').fadeToggle(800);
    });

    $("#twitter-feed-cross").click(function() {
        $('#twitter-feed-container').fadeOut(800);
    });

    $

});
</script>

</body>
</html> 
```

CSS：

```
/* CSS Document */

/* FONTS */
@font-face {
    font-family:"Raleway";
    src: url('../web-fonts/raleway_thin-webfont.ttf');
}

@font-face {
    font-family:"Raleway";
    src: url('../web-fonts/raleway_thin-webfont.eot');
}

@font-face {
    font-family:"Raleway";
    src: url('../web-fonts/raleway_thin-webfont.svg');
}

@font-face {
    font-family:"Raleway";
    src: url('../web-fonts/raleway_thin-webfont.woff');
}

* {
    margin:0;
    font-family:'PT Sans';
}

html, body {
    height:100%;
    width:100%;
}

html {
    overflow-y: auto;
    overflow-x: hidden;
}

.content {
    height:100%;
}

a {
    color:#6CF;
}

a:hover {
    color:#69F;
}

a:active {
    color:#C06;
}

/* LOGO */
#logo {
    top:0;
    left:20px;
    z-index:1000;
    position:fixed;
    background-image:url(../img/logo-new-front.png);
    background-repeat:no-repeat;
    background-color:transparent;
    width:400px;
    height:400px;
}
#splat {
    top:0;
    left:20px;
    z-index:1000;
    position:fixed;
    background-image:url(../img/logo-new.png);
    background-repeat:no-repeat;
    background-color:transparent;
    width:400px;
    height:400px;
}

/* HEADER STYLES */
#header {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    background-color: #000000;
    color:#FFFFFF;
    height: 40px;
    padding-top: 1px;
    line-height:32px;
    font-size:12px;
    padding-left:8px;
}

/* NAV STYLES */
.nav {
    position: fixed;
    right: 0;
    width: 400px;
    height: 40px;
    line-height: 36px;
}

#nav ul {
    width: 435px;
    height: 40px;
    padding-left: 0px;
}

#nav li {
    float:left;
    margin:0 30px;
    list-style:none;
}

#nav li a {
    color:#FFF;
    text-decoration:none;
    border-bottom:dotted 1px #FFF;
}

#nav li a:hover {
    color:#69F;
    text-decoration:none;
    border-bottom:dotted 1px #6CF;
}

#nav li a:active {
    color:#C06;
    text-decoration:none;
    border-bottom:dotted 1px #6CF;
}

/* PAGE STYLES */
.page {
    width:100%;
}

.inner-page {
    max-width: 880px;
    min-width: 680px;
    margin: 0 auto 0 430px;
    padding: 70px 0 48px 0;
}

.page-texture {
    background-image:url(../img/overlay-pattern.png);
    background-color:transparent;
    background-repeat:repeat;
    position: fixed;
    width: 100%;
    height: 100%;
    top:0;
    left:0;
}

#home-page {
    color:#000000;
    background:#FFF url(../img/overlay-pattern.png);
    height:1000px;
}

#page1 {
    background:#CCC url(../img/overlay-pattern.png);
    height:1200px;
    color:#000000;
}

#page2 {
    background:#999 url(../img/overlay-pattern.png);
    height:2000px;
}

#page3 {
    background:#666 url(../img/overlay-pattern.png);
    height:780px;
}

#terms-page-ie {
    display:none;
    background:#333 url(../img/overlay-pattern.png);
    color:#FFFFFF;
}

.inner-content {
    padding:20px;
}

.indent {
    margin-left:20px;
    margin-top:8px;
}

.hidden-overflow {
    overflow:hidden;
}

.cross {
    right:5px;
    top:2px;
    position:absolute;
    font-family:"Raleway";
    font-size:16px;
    cursor:pointer;
}

.cross-terms-ie {
    font-family:"PT Sans";
    font-size:16px;
    cursor:pointer;
    position:absolute;
    right:5px;
    margin-top:42px;
}

img.ie-loader {
    display:none;
}

#terms-container {
    display:none;
    position:fixed;
    width:100%;
    height:100%;
    margin:auto;
    top:0;
    left:0;
}

#terms {
    position:absolute;
    width:700px;
    height:400px;
    margin:auto;
    left:0;
    right:0;
    top:0;
    bottom:0;
    background:#000000;
    color:#FFFFFF;
    z-index:100;
}

#overlay {
    display:none;
    width:100%;
    height:100%;
    position:fixed;
    top:0;
    left:0;
    background-color:#000000;
    opacity:0.4;
    filter:alpha(opacity=40);
}
/* FOOTER STYLES */

#footer {
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    background-color: #000000;
    color:#FFFFFF;
    height: 40px;
    padding-top: 1px;
    line-height:40px;
    font-size:12px;
    padding-left:8px;
    z-index:1000;
}

#footertext a {
    text-decoration:none;
    border-bottom:1px dotted #ffffff;
    color:#ffffff;
}

@media (max-width: 1230px) {
#ge-il-btm {
    display:none;
}
}

#share {
    margin-right:8px;
}

#share li {
    list-style:none;
    padding:0 8px;
}

#share li:hover {
    background:#6CF;
    color:#000000;
}

#share a li {
    text-decoration:none;
    color:#FFFFFF;
}

/* PORTFOLIO STYLES */
#portfolio-items ul {
    background: black;
    border: 1px #6CF solid;
    list-style-image: url(../img/bullet.png);
    color: #6CF;
    width: 400px;
    cursor: pointer;
    height: 20px;
    margin: 10px 0 0 0;
    padding: 10px 30px 10px 30px;
}

/* FLOAT STYLES */
.pull_left {
    float:left;
}

.pull_right {
    float:right;
}

/* TYPOGRAPHY */
h1, h2, h3, h4, h5, h6 {
    display:block;
    font-weight:normal;
}

h1 { font-size:48px; font-family:"Raleway"; margin-bottom:30px; }
h2 { font-size:42px; font-family:"Raleway"; }
h3 { font-size:36px; font-family:'Lato'; }
h4 { font-size:30px; font-family:'Lato'; }
h5 { font-size:24px; font-family:'Lato'; }
h6 { font-size:18px; font-family:'Lato'; }

#terms-page-ie h5 {
    border-bottom: 1px dotted #FFFFFF;
    margin: 0px 0px 10px 0px;
}

#terms-page-ie p {
    margin: 0 0 25px 0;
}

.shadow {
    text-shadow:-1px 1px 3px #000000;
}

/* LOADING SCRREN */

span {
    display: block; 
    margin: 0 auto;
}

span[class*="l-"] {
    height: 8px; width: 8px;
    background: #6CF;
    display: inline-block;
    margin: 12px 2px;

    -webkit-animation: loader 4s infinite;
    -webkit-animation-timing-function: cubic-bezier(0.030, 0.615, 0.995, 0.415);
    -webkit-animation-fill-mode: both;
    -moz-animation: loader 4s infinite;
    -moz-animation-timing-function: cubic-bezier(0.030, 0.615, 0.995, 0.415);
    -moz-animation-fill-mode: both;
    -ms-animation: loader 4s infinite;
    -ms-animation-timing-function: cubic-bezier(0.030, 0.615, 0.995, 0.415);
    -ms-animation-fill-mode: both;
    animation: loader 4s infinite;
    animation-timing-function: cubic-bezier(0.030, 0.615, 0.995, 0.415);
    animation-fill-mode: both;
}

span.l-1 {-webkit-animation-delay: 1s;animation-delay: 1s;-ms-animation-delay: 1s;-moz-animation-delay: 1s;}
span.l-2 {-webkit-animation-delay: 0.8s;animation-delay: 0.8s;-ms-animation-delay: 0.8s;-moz-animation-delay: 0.8s;}
span.l-3 {-webkit-animation-delay: 0.6s;animation-delay: 0.6s;-ms-animation-delay: 0.6s;-moz-animation-delay: 0.6s;}
span.l-4 {-webkit-animation-delay: 0.4s;animation-delay: 0.4s;-ms-animation-delay: 0.4s;-moz-animation-delay: 0.4s;}
span.l-5 {-webkit-animation-delay: 0.2s;animation-delay: 0.2s;-ms-animation-delay: 0.2s;-moz-animation-delay: 0.2s;}
span.l-6 {-webkit-animation-delay: 0;animation-delay: 0;-ms-animation-delay: 0;-moz-animation-delay: 0;}

@-webkit-keyframes loader {
    0% {-webkit-transform: translateX(-30px);opacity: 0;}
    25% {opacity: 1;}
    50% {-webkit-transform: translateX(30px);opacity: 0;}
    100% {opacity: 0;}
}

@-moz-keyframes loader {
    0% {-moz-transform: translateX(-30px);opacity: 0;}
    25% {opacity: 1;}
    50% {-moz-transform: translateX(30px);opacity: 0;}
    100% {opacity: 0;}
}

@-keyframes loader {
    0% {-transform: translateX(-30px);opacity: 0;}
    25% {opacity: 1;}
    50% {-transform: translateX(30px);opacity: 0;}
    100% {opacity: 0;}
}

@-ms-keyframes loader {
    0% {-ms-transform: translateX(-30px); opacity: 0;}
    25% {opacity: 1;}
    50% {-ms-transform: translateX(30px);opacity: 1;}
    100% {opacity: 0;}
}

/* TWITTER FEED */
#twitter-feed-container{
    width: 300px;
    position: fixed;
    bottom: 49px;
    right: 25px;
    height: 340px;
    background: #000000;
    border-radius: 4px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    display: none;
    color:#CCCCCC;
    font-size:13px;
}

#twitter-feed-container a{
    color:#CCCCCC;
}

#twitter-feed-container a.tweet_avatar{
    border-bottom:none !important;
}

.tweet_list li {
    margin-bottom:4px;
    padding: 0.5em 0.5em 12px 0.5em  !important;
}

#twitter-arrow {
    width:0;
    height:0;
    right: 30px;
    bottom: -16px;
    position:absolute;
    border: .65em solid;
    border-color: #000000 transparent transparent transparent;
}

#twitter-feed-main {
    height: 305px;
    overflow: hidden;
    position: absolute;
    bottom: 30px;
    right: 8px;
    width: 285px;
}

#twitter-feed-cross {
    font-family: "PT Sans";
    font-size: 16px;
    cursor: pointer;
    float: right;
    right: 10px;
    top: 8px;
    z-index: 10000;
    position: absolute;
}

#twitter-logo {
    background: url(../img/social/doodles.png) -9px -10px;
    height: 70px;
    width: 70px;
    position:absolute;
}
a#see-twitter {
    position:absolute;
    bottom:5px;
    right:8px;
} 
```

JS平滑滚动

```
$(document).ready(function() {
  $('html, body').animate({scrollTop: 0}, 1000);
  function filterPath(string) {
    return string
      .replace(/^\//,'')  
      .replace(/(index|default).[a-zA-Z]{3,4}$/,'')  
      .replace(/\/$/,'');
  }
  $('a[href*=#]').each(function() {
    if ( filterPath(location.pathname) == filterPath(this.pathname)
    && location.hostname == this.hostname
    && this.hash.replace(/#/,'') ) {
      var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
      var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
       if ($target) {
         var targetOffset = $target.offset().top;
         $(this).click(function() {
           $('html, body').animate({scrollTop: targetOffset}, 1500);
           return false;
         });
      }
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:08:45.983

通过查看该站点，我建议将背景图像放在主体上的 div id“主页”上并使用 z-index 以便页眉和页脚黑色条出现在前面。

随着身体上的背景图像，这将占用该图像的所有房地产 - 显然。

关于图像的另一个建议 - 只需在 Photoshop 中裁剪网格图案的 4X4 图像并使用`background: url(YOURIMAGEPATH) repeat;`

这将在 X 和 Y 轴上重复图像，而不是使用大的背景图像，因此您不需要样式`height: 100%`，因为它只会填充所有空间。

试试这个，看看是否能解决问题:-)

# ocaml - ocamlgraph 中的编译错误

> ID：12222880
> 
> 赞同：3
> 
> 时间：2012-08-31T21:48:49.257
> 
> 标签：ocaml, static-analysis, ocamlbuild, frama-c

我正在尝试安装 ocamlgraph 作为 frama-c 的要求。当我安装 ocamlgraph 并运行 make 时，我收到以下编译错误：

```
ocamlopt.opt -c -I src -I lib -for-pack Graph src/delaunay.ml  
/tmp/camlasmc2c286.s: Assembler messages:  
/tmp/camlasmc2c286.s: Error: .size expression for camlGraph__Delaunay__ccw_291 does not evaluate to a constant  
/tmp/camlasmc2c286.s: Error: .size expression for camlGraph__Delaunay__in_circle_298 does not evaluate to a constant  
File "src/delaunay.ml", line 1, characters 0-1:  
Error: Assembler error, input left in file /tmp/camlasmc2c286.s 
```

我在 Ubuntu-10.04 上运行并尝试了 ocamlgraph-1.6 和 ocamlgraph-1.8.2 版本，但出现了相同的错误。我机器上的ocaml版本是ocaml-3.11.2。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T07:44:23.507

这是[去年](http://caml.inria.fr/mantis/view.php?id=5237)因`binutils`. 您可以通过在系统上安装旧版本的 binutils（不推荐）或更新版本的 OCaml（从 ocaml 3.12.1 开始）来修复它。

# android - 滚动+点击后 ScrollView 停止工作

> ID：12222886
> 
> 赞同：1
> 
> 时间：2012-08-31T21:49:40.777
> 
> 标签：android, scrollview

我有一个自定义的 Scrollview，Horizo​​ntalScrollview，里面是一个动态表。表格中的每一行都有多个带有 onclicklisteners 的 TextView。

如果我在 Y 方向上滑动，然后点击屏幕一次，就会出现问题。垂直滚动（滚动视图）将停止工作，但水平滚动仍然有效。请赐教。

滚动视图：

```
public class ParentScrollView extends ScrollView {
private GestureDetector mGestureDetector;
View.OnTouchListener mGestureListener;

@SuppressWarnings("deprecation")
public ParentScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
    mGestureDetector = new GestureDetector(new YScrollDetector());
    setFadingEdgeLength(0);
}

@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    return super.onInterceptTouchEvent(ev) && mGestureDetector.onTouchEvent(ev);
}

// Return false if we're scrolling in the x direction  
class YScrollDetector extends SimpleOnGestureListener {
    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
        if(Math.abs(distanceY) > Math.abs(distanceX)) {
            return true;
        }
        return false;
    }
} 
```

}

TableRowView 和 textview：

```
public void addRow(String[] data, int[] rowId) {
    for (int i = 0; i < data.length; i++) {
        TextView tv = parseTextView(data[i]);
        tv.setId(rowId[i]);
        tv.setFocusable(false);//try solving with this, no luck.
        tv.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if(ChooseTableActivity.class == (v.getContext().getClass())){
                    ((ChooseTableActivity) v.getContext())
                            .onClickRowCell(v);
                    //passes view to activiy class that does nothing yet.
                }
            }
        });
        this.addView(tv);
    }
} 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:27:10.173

可能是您的 onInterceptTouchEvent 中的问题。如果它再次返回 false，则不会为您触发所有其他事件（移动、取消和向上）。尝试将 super.onInterceptTouchEvent(ev) && mGestureDetector.onTouchEvent(ev) 替换为 super.onInterceptTouchEvent(ev) || mGestureDetector.onTouchEvent(ev)

# javascript - PubSub / Observer 模式中的排队事件

> ID：12222889
> 
> 赞同：1
> 
> 时间：2012-08-31T21:49:48.537
> 
> 标签：javascript, observer-pattern, publish-subscribe

我总是发现直接进入一个例子更容易。

```
object.on('eventone', function() {
  console.log('eventone - listener one');
  object.trigger('eventtwo');
});
object.on('eventone', function() {
  console.log('eventone - listener two');
});
object.on('eventtwo', function() {
  console.log('eventtwo');
});
object.trigger('eventone'); 
```

在大多数 PubSub 实现中，这会导致以下日志顺序：

1.  eventone - 监听器一
2.  事件二
3.  eventone - 监听器二

过去，这会导致该序列的语义出现问题。开发人员通常会假设在 'eventtwo' 开始之前已经触发了 'eventone' 的所有侦听器，这可能会进一步引入序列逻辑错误。更明智的日志顺序可能是：

1.  eventone - 监听器一
2.  eventone - 监听器二
3.  事件二

所以我想问题是 - 为什么大多数实现不遵循事件队列？使用它有什么可能的影响，而不是。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:06:19.763

Pubsub 旨在使一个订阅者不依赖、不知道或不受其他订阅者的阻碍。以下是探讨每种方法的优缺点的几个问题：

*   [NodeJS 和异步地狱](https://stackoverflow.com/questions/6244012/nodejs-and-asynchronous-hell)
*   [使用 Javascript 文件进行随机阻塞？](https://stackoverflow.com/questions/4838821/random-blocking-with-javascript-file)
*   [AS3 中的竞争条件触发事件](https://stackoverflow.com/questions/1834525/race-condition-firing-events-in-as3)
*   [如何链接ajax请求？](https://stackoverflow.com/questions/995529/how-to-chain-ajax-requests)
*   [脚本标签 - 异步和延迟](https://stackoverflow.com/questions/10808109/script-tag-async-defer)
*   [用单子咒语召唤 JQuery Deferred](https://stackoverflow.com/questions/5569805/conjuring-jquery-deferred-with-monadic-incantations)
*   [如何使用 jQuery 延迟？](https://stackoverflow.com/questions/4869609/how-can-jquery-deferred-be-used)

# asp.net-mvc-3 - 从 MVC3 中的 ViewModel 更新数据库中的信息

> ID：12222890
> 
> 赞同：1
> 
> 时间：2012-08-31T21:49:48.693
> 
> 标签：asp.net-mvc-3, entity-framework

首先，我对此很陌生，所以如果这是一个在其他地方回答的简单问题，请在此处链接我；我不想浪费任何人的时间（我在发布之前尝试了很长时间）。

因此，继续前进，我在 MVC3 项目中更新我的数据库中的信息（使用 EntityFramework）时遇到了一些问题。我有一个配置文件控制器（现在使用静态信息和可为空的 int 进行测试），如下所示：

```
public ViewResult Edit(int? memberID)  
{  
    Member member = repository.Members.GetMember(12985);  
    return View(new ProfileEditViewModel  
    {  
        MemberID = member.id,  
        FirstName = member.fname,  
        LastName = member.lname,  
        HomePhone = member.home_phone,  
        CellPhone = member.cell_phone,  
        Address = member.street,  
        City = member.city,  
        State = member.state,  
        Zip = member.zip,  
        Email = member.email,  
        Sex = member.sex,  
        MemberType = member.membertype,  
        TypeOfCar = member.typeofcar  
    });  
} 
```

然后我得到了一个像这样开头的强类型视图：

```
@using (Html.BeginForm()) {

    <div class="editor-label">
        <label for="fname">First Name:</label>
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.FirstName)
        @Html.ValidationMessageFor(model => model.FirstName)
    </div> 
```

并为我的 ViewModel 的每个属性（除了 MemberID）将表单字符串化。它以

```
<p>
    <input type="submit" value="Save" />
    @Html.ActionLink("Cancel", "Summary")
</p> 
```

回到我的控制器，然后我有补充方法：

```
 [HttpPost]
    public ActionResult Edit(ProfileEditViewModel memberViewModel)
    {
        Member member = repository.Members.GetMember(memberViewModel.MemberID);
        if (ModelState.IsValid)
        {
            member.fname = memberViewModel.FirstName;
            member.lname = memberViewModel.LastName;
            member.home_phone = memberViewModel.HomePhone;
            member.cell_phone = memberViewModel.CellPhone;
            member.street = memberViewModel.Address;
            member.city = memberViewModel.City;
            member.state = memberViewModel.State;
            member.zip = memberViewModel.Zip;
            member.email = memberViewModel.Email;
            member.sex = memberViewModel.Sex;
            member.membertype = memberViewModel.MemberType;
            member.typeofcar = memberViewModel.TypeOfCar;

            repository.Members.UpdateMember(member);

            return RedirectToAction("Summary");
        }
        else
        {
            //there is something wrong with the data
            return View(member);
        } 
```

问题是，当我尝试更新成员的信息时，我收到“序列不包含元素”错误，即使我知道我指定的 MemberID 是有效的，因为我能够进入更新页面，并且我知道 UpdateMember方法可以正常工作，因为它在项目的这一部分开始之前已经过全面测试。我在哪里更新错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:52:47.823

你错过了一个

```
@Html.HiddenFor(m => m.MemberID) 
```

在你看来。

# php - 如何修复“将 myBundle 添加到asseticBundle 配置”symfony2 异常？

> ID：12222900
> 
> 赞同：84
> 
> 时间：2012-08-31T21:50:39.273
> 
> 标签：php, symfony, twig

当我尝试使用 TWIG`{% javascript %}`标签链接到我的`.js`文件时，它返回给我，但出现以下异常：

```
An exception has been thrown during the compilation of a template ("You must add CompetitiongameBundle to the assetic.bundle config to use the {% javascripts %} tag in CompetitiongameBundle:game:index.html.twig.") in "CompetitiongameBundle:game:index.html.twig". 
```

我的`index.html.twig`样子：

```
{% javascripts 'CompetitiongameBundle/Resources/views/public/js/*'%}
    <script type="text/javascript" src="{{ asset_url }}" ></script>
{% endjavascripts %}
Hello {{ name }}!

<a href='{{ nexturl }}' >Login</a> 
```

当我这样做时，我的 Bundle 已经存在于配置文件中：

```
php app/console config:dump-reference assetic 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2013-01-09T08:38:26.103

是的，我试过了，它为我解决了这个问题。对于最初不知道如何添加的人（比如我），然后只需：

1.  编辑`app/config/config.yml`
2.  然后去`assetic:`
3.  在资产下：转到`bundles: []`
4.  并在`bundles: []`//输入您的捆绑包名称

例如，如果您的捆绑包是**`Acme\DemoBundle`**，则执行以下操作

```
assetic:
   bundles: [ AcmeDemoBundle ] 
```

周围没有引号`AcmeDemoBundle`。而已。(Symfony2)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-10T09:51:02.273

如果您希望资产默认包含您的捆绑包，您可以注释（带#）该行`bundles: []`

前任：

```
assetic:
    debug:          "%kernel.debug%"
    use_controller: false
    #bundles:        [ ]
    #java: /usr/bin/java 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-05T10:43:19.573

有时您需要即时做出决定，然后您可以使用[DependencyInjection](http://symfony.com/doc/master/components/dependency_injection/index.html)。

例如[加载和管理配置](http://symfony.com/doc/current/cookbook/bundles/extension.html)：

```
<?php

namespace You\ExampeBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;

/* ... */

class YouExampeExtension extends Extension
{

    /* ... */

    public function load(array $configs, ContainerBuilder $container)
    {
        /* ... */

        $aAsseticBundle = $container->getParameter('assetic.bundles');
        $aAsseticBundle[] = 'YouExampeBundle';
        $aAsseticBundle[] = 'AnotheBundle';
        $container->setParameter('assetic.bundles', $aAsseticBundle);

        /* ... */
    }
} 
```

您可以使用更复杂的逻辑来操作配置（在合理的范围内）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-26T21:04:24.430

你需要将你的包添加到 bundle: [] row ofassetic: app/config/config.yml 文件中的部分（symfony 2.1）

# java - 在 JAVA 中检查加密密钥的正确性

> ID：12222904
> 
> 赞同：3
> 
> 时间：2012-08-31T21:51:22.223
> 
> 标签：java, cryptography, bouncycastle, jce, integrity

我正在使用 BouncyCastle 在 CBC 模式下使用 AES 和 PKCS5 填充来加密/解密一些文件：

```
Cipher c = Cipher.getInstance("AES/CBC/PKCS5Padding", "BC"); 
```

现在有两个问题：

*   如何检查提供的用于解密数据的密钥是否正确？
*   如何检查加密输入是否未被触及（例如，用户使用 HEX 编辑器未更改）？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T22:33:35.150

您可以使用[AEAD 模式（](http://en.wikipedia.org/wiki/AEAD_block_cipher_modes_of_operation)如 CCM 或 GCM）代替 CBC。这些模式对加密消息进行身份验证，因此如果使用了错误的密钥，或者密文已被更改，您可以检测到它。但是，您将无法区分这些情况。

Java 7 的 GCM 加密 API 支持，但 Oracle 的 Java 实现附带的 SunJCE 提供程序还不支持它。您可以通过 BouncyCastle 等第三方提供商获得支持。

如果您使用额外的加密服务，例如数字签名或消息验证码，您可以实现相同的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:33:33.263

您应该添加一个 MAC，它首先验证消息的完整性，然后才能解密它。MAC 的一个常见选择是带有您喜欢的任何散列函数的 HMAC，例如 SHA-2。

与其自己做这件事，不如使用经过身份验证的密码。[AES-GCM](http://en.wikipedia.org/wiki/Galois/Counter_Mode)是一种常见的选择。但是在这种情况下，您需要非常小心，不要重复使用 IV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T22:28:07.053

加密不仅与算法和加密密钥有关，还与系统组织有关。

通常，您无法确定密钥是否正确。任何密钥都可以用来解密应该被解密的数据，但是这取决于其他一些机制来告诉你这是否是“正确”的结果。

通常，您无法确定要解密的数据是否未被触及，除非通过一些外部检查。大多数加密系统的一个特性是，更改任何加密数据都会极大地改变解密的输出，可能会变成你认为是垃圾的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T22:35:46.783

JCE 密码通常非常基础。如果您需要包括完整性和密钥测试在内的全功能保护，则需要将它们结合起来。和往常一样，最好不要自己设备。所以最好选择更高级的格式，如 PKCS7/12 或 PGP。

根据使用的填充，当您尝试使用错误的密钥对其进行解密时，某些密码会给您一个 PaddingException。为了进行更强的完整性检查，我将使用包含 HMAC 字节的填充。

JCE 中包含一个相当完整的方法，它是 AESWrap 算法。它需要填充数据，但会确保完整性。它最好与 RFC 3537 中描述的长度字节结合使用。请注意，这仅适用于较小数量的机密（如对称密钥）。RFC3537 填充限制为 255 个字节。

要将其与密码派生密钥一起使用，您可以使用：

```
char[] pass = ... // your password
byte[] codeBytes = ... // up to 255 bytes you want to protect

// generate wrapping key from password
SecretKeyFactory f = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
SecureRandom rand = SecureRandom.getInstance("SHA1PRNG");
byte[] salt = new byte[16]; rand.nextBytes(salt);
SecretKey kek = f.generateSecret(new PBEKeySpec(pass, salt, 1000, 128));
kek = new SecretKeySpec(password.getEncoded(), "AES"); // convert into AES

// RFC3537 padding (lengthbyte)
byte[] wrappedCodeBytes = new byte[codeBytes + 1 % 8];
System.arraycopy(codeBytes,0,wrappedCodeBytes,1,wrappedCodeBytes.length);
paddedCodeBytes[0]=(byte)codeBytes.length;
byte[] pad = new byte[paddedCodeBytes.length - codeBytes.length -1]; rand.nextBytes(pad);
System.arraycopy(pad,0,paddedCodeBytes,codeBytes.length+1,pad.length);
// AESWrap is WRAP_MODE:needs a SecretKey 
SecretKey paddedCodeKey = new SecretKeySpec(paddedCodeBytes, "RAW");

// now wrap the password with AESWrap kek is 128 bit
Cipher c = Cipher.getInstance("AESWrap"); // default IV
c.init(Cipher.WRAP_MODE, kek);
byte[] result = c.warp(paddedCodeKey); 
```

解包留给读者作为练习 :) 示例代码使用 128 位密钥大小，因为无论如何不能从 PBKDF2 获得更多熵。

请注意，这将很有可能检测到错误的密码，一些批评者会认为这是 AESWrap 的一个弱点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T09:49:58.603

看看**[这个关于 BC 加密的教程](http://www.itcsolutions.eu/2011/08/24/how-to-encrypt-decrypt-files-in-java-with-aes-in-cbc-mode-using-bouncy-castle-api-and-netbeans-or-eclipse/)**，特别是 InitCiphers 方法，并详细了解第二个代码块，它指定了实际的密码类型。

**如何检查提供的用于解密数据的密钥是否正确？**

根据**[JCE Javadocs](http://docs.oracle.com/javase/7/docs/api/javax/crypto/spec/SecretKeySpec.html)**，特别是*Class SecretKeySpec*的构造函数：

> 此构造函数不检查给定字节是否确实指定了指定算法的密钥。例如，如果算法是 DES，则此构造函数不检查密钥是否为 8 字节长，也不检查弱或半弱密钥。为了执行这些检查，应使用特定于算法的密钥规范类（在本例中：DESKeySpec）。

请注意，**[Interface KeySpec](http://docs.oracle.com/javase/7/docs/api/java/security/spec/KeySpec.html)**列出了所有实现类，基本上是**验证选项列表**。

**如何检查加密输入是否未被触及（例如，用户使用 HEX 编辑器未更改）？**

的确。这是一个很好的。“输入”非常通用。您是指要解密的实际内容吗？好吧，如果它被修改了，我相信它不会正确解密。那有意义吗？

如果您正在谈论更改奇偶校验位的密钥的情况，如**[Bouncy Castle FAQ](http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions)****中的第 (6) 项所述**，您将必须对密钥进行实际的奇偶校验。仅密钥的前 56 个字节用于加密操作，后 8 个字节保留用于奇偶校验。因此，本质上，“密钥”的最后一部分可以更改，而第一部分仍然有用。要检测奇偶校验或密钥是否已更改，您将运行奇偶校验。**我在进行奇偶校验时发现[了这个小曲子。](http://www.javafaq.nu/java-example-code-1095.html)**并且，有关如何在这些密钥中设置奇偶校验的更多信息，请参阅**[Jan Luehe 的类 DESKeyGenerator 的 JDK7 加密提供程序源中的注释](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/com/sun/crypto/provider/DESKeyGenerator.java#DESKeyGenerator)**（接近底部）讨论奇偶校验设置。

我最近与 BC 进行了一些互动，希望这些信息对我有所帮助。

# regex - 正则表达式匹配数字与 ,-N 和数字

> ID：12222911
> 
> 赞同：0
> 
> 时间：2012-08-31T21:51:53.727
> 
> 标签：regex

我正在尝试匹配模式中的字符串，

数字

, 或 - 或 N

数字

```
 ([0-9]+[,-N])+[0-9]+ 
```

应该匹配，

```
 87-7-6   
 86-6-2,3    
 4-N-0  
 87-7-6   
 86-14-2,3    
 4-N-0 
```

不匹配，

```
4-N-0 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:56:01.783

您需要对集合中的破折号进行转义，否则它将匹配从逗号到 N 的所有字符。

```
([0-9]+[,\-N])+[0-9]+ 
```

它不匹配`4-N-0`，因为它不属于您描述的应该匹配的内容。如果您希望它匹配多个分隔符，请`+`在该集​​合之后添加一个：

```
([0-9]+[,\-N]+)+[0-9]+ 
```

或者，也许您想使用确切的序列`-N-`作为分隔符之一，这样它就不会匹配例如`4NNNNNNNN0`or `4-,-,-,-,-,0`：

```
([0-9]+([,\-]|-N-))+[0-9]+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:56:39.857

连字符是保留符号。应该是： `([0-9]+[,\-N])+[0-9]+`

# java - 如何设置 NetBean 的调试器

> ID：12222915
> 
> 赞同：0
> 
> 时间：2012-08-31T21:52:35.607
> 
> 标签：java, debugging, netbeans, ubuntu-12.04

我想开始在 NetBeans 中使用调试器，但是当我点击调试主项目时，我不断得到：

```
 Have no file for /usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/modules/jdk.boot.jar 
```

窗口透视不会改变。我几乎可以肯定自安装以来我没有更改任何设置。

Ubuntu 12.04 NetBeand 6.9.1

# java - 如何从 Java 中的透明 GIF 创建加载动画

> ID：12222919
> 
> 赞同：0
> 
> 时间：2012-08-31T21:52:52.233
> 
> 标签：java, animation, gif, splash-screen

我有一个加载标志 gif - 动画和透明背景。我如何在 Java 中使用它 - 显示它的动画并使其背景透明？

我使用此代码将其加载为[启动画面](http://www2.eng.cam.ac.uk/~tpl/asp/source/SplashWindow.java)

我正在使用[ajaxload创建 gif 透明动画](http://ajaxload.info/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T04:20:02.213

你的意思是，也许像...

![极好的](../Images/c276a7633bbbeb5a02fb35ea2a7040fd.png)

最简单的方法是从 a`ImageIcon`和 a开始`JLabel`

```
ImageIcon animatedGif = new ImageIcon(...); // Path/URL to your gif
JLabel splashLabel = new JLabel(animatedGif);

// Add to your splash screen... 
```

完成基本设置后，您可能想要不装饰框架（或只使用 JWindow）

```
myJFrame.setUndecorated(true); 
```

哦，当然，如果你想要一些真正的东西，你可以使用透明的窗口......

![越过高峰](../Images/dceb99444e5b8cde78fa716c913ca091.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T12:13:29.640

感谢[MadProgramer](https://stackoverflow.com/users/992484/madprogrammer/) 这是一个工作代码：

```
 ImageIcon icon = new ImageIcon("images/ajax-loader.gif");
    JLabel label=new JLabel(icon);
    JWindow myJFrame=new JWindow();
    myJFrame.setLayout(new BorderLayout());
    myJFrame.add(label,BorderLayout.CENTER);
    myJFrame.setLocationRelativeTo(null);
    myJFrame.setOpacity(0.5f);
    myJFrame.setAlwaysOnTop(true);
    label.setOpaque(false);
    AWTUtilities.setWindowOpaque(myJFrame, false);
    myJFrame.pack();
    myJFrame.setVisible(true); 
```

# javascript - 从 Google 地图外部打开 infoWindow

> ID：12222920
> 
> 赞同：1
> 
> 时间：2012-08-31T21:53:03.773
> 
> 标签：javascript, jquery, google-maps

有什么办法可以从外面的桌子上打开标记的信息窗口。我也在“stackoverflow”中看到了其他用户的其他帖子，完成起来似乎有点棘手。

这是我正在使用的代码。在最后两行代码中，我将推文附加到一个表格中，如果我想从那里点击任何推文，它应该在地图上打开相应的标记。问题是我不知道如何链接标记和表格行。

```
 function geocode(user, date, profile_img, text, url, location) {
                var geocoder = new google.maps.Geocoder();
                geocoder.geocode({
                    address: location
                }, function (response, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        var x = response[0].geometry.location.lat(),
                            y = response[0].geometry.location.lng();
                        var myLatLng = new google.maps.LatLng(x, y);
                        var marker = new google.maps.Marker({
                            icon: profile_img,
                            title: user,
                            map: map,
                            position: myLatLng
                        });
                        var contentString = '<div id="content">' + '<div id="siteNotice">' + '</div>' + '<h2 id="firstHeading" class="firstHeading">' + user + '</h2>' + '<div id="bodyContent">' + text + '</div>' + '<div id="siteNotice"><a href="' + url + '"></a></div>' + '<p>Date Posted- ' + date + '.</p>' + '</div>';

                        var infowindow = new google.maps.InfoWindow({
                            content: contentString
                        });
                        google.maps.event.addListener(marker, 'click', function () {
                            infowindow.open(map, marker);
                        });

                $('#user-tweets').css("overflow","scroll");
                $('#user-tweets').append('<table width="320" border="0"><tr><td onclick=infoWindow(map,marker); colspan="2" rowspan="1">'+user+'</td></tr><tr><td width="45"><a href="'+profile_img+'"><img src="'+profile_img+'" width="55" height="50"/></a></td><td width="186">'+text+'</td></tr></table><hr>');
                        function infoWindow(map,marker){

                            infowindow.open(map, marker);
                        }
                        bounds.extend(myLatLng); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T09:31:42.827

AK 47，

假设在提供的代码之后未闭合的括号和花括号都闭合...

首先在外部范围内为冗长的 HTML 字符串制作模板 - 即。外部`function geocode(){}`——它们被定义一次的地方，而不是每次需要它们的地方。

```
var templates = [];
templates[0] = '<div><div></div><h2 class="firstHeading">%user</h2><div>%text</div><div><a href="%url"></a></div><p>Date Posted- %date.</p></div>';
templates[1] = '<table width="320" border="0"><tr><td class="user" colspan="2" rowspan="1">%user</td></tr><tr><td width="45"><a href="%profile_img"><img src="%profile_img" width="55" height="50" /></a></td><td width="186">%text</td></tr></table><hr />'; 
```

您会看到我删除了 ID，否则每次使用模板时都会重复这些 ID。重复时，我失去了他们的目的。

然后将所有内容替换`var contentString = ...;`为`function infoWindow(map,marker){...}`：

```
var infowindow = new google.maps.InfoWindow({
    content: templates[0].replace('%user',user).replace('%text',text).replace('%url',url).replace('%date',date);
});
var $tweet = $(templates[1].replace('%user',user).replace(/%profile_img/g,profile_img).replace('%text',text));
$('#user-tweets').css("overflow","scroll").append($tweet);
function openInfoWindow() {
    infowindow.open(map, marker);
}
google.maps.event.addListener(marker, 'click', openInfoWindow);
$tweet.find(".user").on('click', openInfoWindow); 
```

你会看到它`function openInfoWindow()`不接受参数。相反，它拾取`map`并`marker`通过闭包（它们在外部范围中定义）。这允许`openInfoWindow`在两个地方按名称附加 - 作为标记单击**和**推文单击的处理程序（这是您想要的）。

这可能不是 100% 正确，因为我必须做出假设，但它至少应该让您了解如何解决问题。

# android - 在片段中设置新布局

> ID：12222925
> 
> 赞同：22
> 
> 时间：2012-08-31T21:54:04.920
> 
> 标签：android, android-fragments

我正在尝试在特定条件下在运行时更改片段的布局。

在 onCreateView() 中膨胀的初始布局：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.cancel_video, null);
    } 
```

然后稍后在片段代码中，我想用其他布局替换初始布局。

到目前为止，我已经尝试了一些事情；这是我最新的：

```
private void Something(){
    if(checkLicenseStatus(licenseStatus, statusMessage)){
                View vv = View.inflate(getActivity(), R.layout.play_video, null);
                //more code
    }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T22:01:51.640

一旦片段膨胀，您就无法替换片段的布局。如果您需要条件布局，那么您要么必须重新设计布局并将其分解为更小的元素，例如`Fragments`. 或者，您可以将所有布局元素分组到子容器中（如`LinearLayout`），然后将它们全部包装在 中`RelativeLayout`，定位它们以便它们相互重叠，然后根据需要切换这些`LinearLayout`s的可见性`setVisibility()`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-13T08:26:13.713

是的，我已经通过以下方式做到了这一点。当我需要设置新的布局（xml）时，应该执行以下代码片段。

```
 private View mainView;

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup containerObject, Bundle savedInstanceState){
    super.onCreateView(inflater, containerObject, savedInstanceState);

        mainView = inflater.inflate(R.layout.mylayout, null);
        return mainView;
  }

  private void setViewLayout(int id){
    LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mainView = inflater.inflate(id, null);
    ViewGroup rootView = (ViewGroup) getView();
    rootView.removeAllViews();
    rootView.addView(mainView);
  } 
```

每当我需要更改布局时，我只需调用以下方法

```
 setViewLayout(R.id.new_layout); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T22:02:39.390

通过 FragmentManger 使用 FragmentTransaction

```
FragmentManager fm = getFragmentManager();

if (fm != null) {
    // Perform the FragmentTransaction to load in the list tab content.
    // Using FragmentTransaction#replace will destroy any Fragments
    // currently inside R.id.fragment_content and add the new Fragment
    // in its place.
    FragmentTransaction ft = fm.beginTransaction();
    ft.replace(R.id.fragment_content, new YourFragment());
    ft.commit();
} 
```

YourFragment 类的代码只是一个 LayoutInflater 以便它返回一个视图

```
public class YourFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.your_fragment, container, false);

        return view;
    }   

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-29T06:22:38.223

我会改变整个布局。您只能更改布局的特定部分。

1.  `FrameLayout`在 中添加一个根`your_layout.xml`，它不包含任何内容。

    ```
    <FrameLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/fl_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" /> 
    ```

2.  在 java 代码中设置您的内容。

    ```
    ViewGroup flContent = findViewById(R.id.fl_content);

    private void setLayout(int layoutId) {
        flContent.removeAllViews();
        View view = getLayoutInflater().inflate(layoutId, flContent, false);
        flContent.addView(view);
    } 
    ```

3.  您可以`layoutId`在某些时候免费更改。
    如果你有一些听众，你必须重新设置。

# android - 如何将外部代码嵌入 Android 应用程序？

> ID：12222929
> 
> 赞同：0
> 
> 时间：2012-08-31T21:54:38.063
> 
> 标签：android, twitter, twitter-follow

我想在推特上发布一个按钮，比如关注我

这是代码

```
<object type="application/x-shockwave-flash" data="http://www.twpics.com/BUTTON6/twitbutton.swf" width="140" height="62"><param name="movie" value="http://www.twpics.com/BUTTON6/twitbutton.swf"></param><param name="allowscriptaccess" value="always"></param><param name="menu" value="false"></param><param name="wmode" value="transparent"></param><param name="flashvars" value="username=ksreddisri"></param><a href="http://www.gamblinginsider.ca/casino-games/" title="find casino games at GamblingInsider">find casino games at GamblingInsider</a><embed src="http://www.twpics.com/BUTTON6/twitbutton.swf" type="application/x-shockwave-flash" allowscriptaccess="always" width="140" height="62" menu="false" wmode="transparent" flashvars="username=ksreddisri"></embed></object> 
```

如何在我的android应用程序中嵌入上述代码，请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:58:45.700

我几乎可以肯定你不能直接。如果您必须这样做，您应该做的是使用 WebView 并使用您的 flash 对象显示 HTML 页面。请注意，Flash 不适用于 Android 4.1 (Jelly Bean)，Flash 播放器是可选的（因此人们可能没有它）。我强烈建议不要在 Android 上使用 Flash 方式。

# c# - 如何制作可调整大小的画布

> ID：12222935
> 
> 赞同：0
> 
> 时间：2012-08-31T21:55:12.923
> 
> 标签：c#, wpf, canvas, resize

> **可能重复：**
> [如何在 WPF 中调整画布的大小？](https://stackoverflow.com/questions/2168698/how-to-resize-a-canvas-in-wpf)

我需要在 WPF 中制作可调整大小的画布，就像在 windows 油漆中一样。没有任何调整大小的属性。我需要一些额外的控制才能做到吗？我还想连接到一些滚动条，所以如果画布太大，滚动条将启用滚动画布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:11:44.557

您的画布只是一个容器，可让您在该车辆中定义默认控件等。因此，画布必须位于更高的容器内，该容器通常只是一个用户控件。用户控件提供调整大小属性。

我强烈建议您观看[这些视频](http://www.youtube.com/user/wpftutorials?feature=watch)以了解有关 WPF 的更多信息，然后再深入了解您正在构建的任何内容。

# ios - presentOpenInMenuFromRect 的未定义 self.view

> ID：12222940
> 
> 赞同：1
> 
> 时间：2012-08-31T21:56:15.410
> 
> 标签：ios, rhomobile

我正在尝试将“presentOpenInMenuFromRect”功能添加到 Rhomobile。但是，我无法引用当前视图。

Rhomobile 功能（### 标记我的补充）：

```
- (void)openDocInteractCommand:(NSString*)url {
if (NSClassFromString(@"UIDocumentInteractionController")) {
    NSURL *fileURL = [NSURL fileURLWithPath:url];

    UIDocumentInteractionController* docController = [UIDocumentInteractionController interactionControllerWithURL:fileURL];

    docController.delegate = self;//[AppManager instance];

    BOOL result = [docController presentPreviewAnimated:YES];

    if (!result) {
      ###
        BOOL isValid = [docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];
      ###
    }    
}
} 
```

本质上，如果预览失败，我想打开“打开方式”菜单，因为我正在尝试打开一个 .KMZ（Google 地球 KML 文件）并且它不能是预览。

完整源代码：[https ://github.com/rhomobile/rhodes/blob/master/platform/iphone/Classes/AppManager/AppManager.m](https://github.com/rhomobile/rhodes/blob/master/platform/iphone/Classes/AppManager/AppManager.m)

谢谢，

缺口，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:37:36.883

这是解决我的问题的代码：

```
 - (void)openDocInteractCommand:(NSString*)url { // inView:(UIView*)view
if (NSClassFromString(@"UIDocumentInteractionController")) {
    NSURL *fileURL = [NSURL fileURLWithPath:url];

    UIDocumentInteractionController* docController = [UIDocumentInteractionController interactionControllerWithURL:fileURL];

    docController.delegate = self;//[AppManager instance];

    BOOL result = [docController presentPreviewAnimated:YES];

    if (!result) {
        [docController retain];
        CGPoint centerPoint = [Rhodes sharedInstance].window.center;
        CGRect centerRec = CGRectMake(centerPoint.x, centerPoint.y, 0, 0);
        BOOL isValid = [docController presentOpenInMenuFromRect:centerRec inView:[Rhodes sharedInstance].window animated:YES];
    }
}
}

- (void)documentInteractionControllerDidEndPreview:(UIDocumentInteractionController *)docController
{
[docController autorelease];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T22:02:49.253

AppManager 类继承自 NSObject 而不是 UIViewController - 它怎么会有一个名为的属性`view`？您必须找到另一种方式来呈现您的视图或视图控制器（可能使用应用程序的主窗口）。

# jquery - 如何为jquery悬停功能设置超时

> ID：12222942
> 
> 赞同：3
> 
> 时间：2012-08-31T21:56:33.817
> 
> 标签：jquery, timeout, hover

例如，请查看这些代码：

HTML：

```
<div id="hvr">hover me</div>
<div id="box" style="background:#ddd; width:100px; height:50px;"></div> 
```

jQuery：

```
$(function(){
$("#hvr").hover(function(){

    $("#box").animate({width:'150px'},500);
    more animations/functions here ...

}, function(){

    $("#box").animate({width:'100px'},500);
    more animations/functions here ...
}); 
```

当我快速将鼠标悬停在文本上 3 次时，框在每个完成后动画 3 次。如何设置悬停的超时时间，这将禁用悬停效果，直到第一个动画/功能[由于第一次悬停]完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:57:45.307

尝试这个

```
$(function(){
  $("#hvr").hover(function(){    
      $("#box").stop().animate({width:'150px'},500);   
  }, function(){    
      $("#box").stop().animate({width:'100px'},500);
  });
}); 
```

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# groovy - 如何将 methodMissing 调用委托给嵌套类？

> ID：12222944
> 
> 赞同：1
> 
> 时间：2012-08-31T21:56:39.233
> 
> 标签：groovy, dsl, method-missing

我想创建一个语法如下的 DSL：

```
Graph.make {
    foo {
        bar()
        definedMethod1() // isn't missing!
    }
    baz()
} 
```

当这棵树的处理程序遇到最外层的闭包时，它会创建某个类的实例，该类具有一些已定义的方法以及它自己的缺失方法的处理程序。

我认为这很容易通过一些结构来实现，例如：

```
public class Graph {
    def static make(Closure c){
        Graph g = new Graph()
        c.delegate = g
        c()
    }

    def methodMissing(String name, args){
        println "outer " + name
        ObjImpl obj = new ObjImpl(type: name)
        if(args.length > 0 && args[0] instanceof Closure){
            Closure closure = args[0]
            closure.delegate = obj
            closure()
        }
    }

    class ObjImpl {
        String type
        def methodMissing(String name, args){
            println "inner " + name
        }
        def definedMethod1(){ 
                println "exec'd known method"
        }
    }
} 
```

但是 methodMissing 处理程序解释了 Graph 内部的整个闭包，而不是将内部闭包委托给 ObjImpl，从而产生输出：

```
outer foo
outer bar
exec'd known method
outer baz 
```

如何将内部闭包的缺失方法调用限定为我创建的内部对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:45:50.677

简单的答案是将内部闭包设置`resolveStrategy`为“首先委托”，但是当委托定义 a`methodMissing`以拦截*所有*方法调用时这样做会导致无法在闭包外部定义方法并从内部调用它，例如

```
def calculateSomething() {
  return "something I calculated"
}

Graph.make {
  foo {
    bar(calculateSomething())
    definedMethod1()
  }
} 
```

为了允许这种模式，最好将所有闭包保留为默认的“所有者优先”解析策略，但让外部`methodMissing`知道何时有内部闭包正在进行并返回：

```
public class Graph {
    def static make(Closure c){
        Graph g = new Graph()
        c.delegate = g
        c()
    }

    private ObjImpl currentObj = null

    def methodMissing(String name, args){
        if(currentObj) {
            // if we are currently processing an inner ObjImpl closure,
            // hand off to that
            return currentObj.invokeMethod(name, args)
        }
        println "outer " + name
        if(args.length > 0 && args[0] instanceof Closure){
            currentObj = new ObjImpl(type: name)
            try {
                Closure closure = args[0]
                closure()
            } finally {
                currentObj = null
            }
        }
    }

    class ObjImpl {
        String type
        def methodMissing(String name, args){
            println "inner " + name
        }
        def definedMethod1(){ 
                println "exec'd known method"
        }
    }
} 
```

使用这种方法，给定上述 DSL 示例，`calculateSomething()`调用将向上传递所有者链并到达调用脚本中定义的方法。`bar(...)`and调用将`definedMethod1()`沿着所有者链向上并`MissingMethodException`从最外层范围获取 a，然后尝试最外层闭包的委托，最终在`Graph.methodMissing`. 然后会看到有一个`currentObj`并将方法调用传回给那个，这反过来又会在适当`ObjImpl.definedMethod1`的时候结束。`ObjImpl.methodMissing`

如果您的 DSL 可以嵌套超过两层，那么您将需要保留一堆“当前对象”而不是单个引用，但原理完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:05:02.917

另一种方法可能是使用`groovy.util.BuilderSupport`，它是为像你这样的树构建 DSL 而设计的：

```
class Graph {
  List children
  void addChild(ObjImpl child) { ... }

  static Graph make(Closure c) {
    return new GraphBuilder().build(c)
  }
}

class ObjImpl {
  List children
  void addChild(ObjImpl child) { ... }
  String name

  void definedMethod1() { ... }
}

class GraphBuilder extends BuilderSupport {

  // the various forms of node builder expression, all of which
  // can optionally take a closure (which BuilderSupport handles
  // for us).

  // foo()
  public createNode(name) { doCreate(name, [:], null) }

  // foo("someValue")
  public createNode(name, value) { doCreate(name, [:], value) }

  // foo(colour:'red', shape:'circle' [, "someValue"])
  public createNode(name, Map attrs, value = null) {
    doCreate(name, attrs, value)
  }

  private doCreate(name, attrs, value) {
    if(!current) {
      // root is a Graph
      return new Graph()
    } else {
      // all other levels are ObjImpl, but you could change this
      // if you need to, conditioning on current.getClass()
      def = new ObjImpl(type:name)
      current.addChild(newObj)
      // possibly do something with attrs ...
      return newObj
    }
  }

  /**
   * By default BuilderSupport treats all method calls as node
   * builder calls.  Here we change this so that if the current node
   * has a "real" (i.e. not methodMissing) method that matches
   * then we call that instead of building a node.
   */
  public Object invokeMethod(String name, Object args) {
    if(current?.respondsTo(name, args)) {
      return current.invokeMethod(name, args)
    } else {
      return super.invokeMethod(name, args)
    }
  }
} 
```

BuilderSupport 的工作方式，builder 本身是 DSL 树所有级别的闭包委托。它使用默认的“所有者优先”解析策略调用其所有闭包，这意味着您可以在 DSL 外部定义一个方法并从内部调用它，例如

```
def calculateSomething() {
  return "something I calculated"
}

Graph.make {
  foo {
    bar(calculateSomething())
    definedMethod1()
  }
} 
```

但同时对 定义的方法的任何调用`ObjImpl`都将被路由到当前对象（`foo`本例中的节点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:13:55.863

这种方法至少有两个问题：

1.  `ObjImpl`在与 as 相同的上下文中定义`Graph`意味着任何`missingMethod`呼叫都将`Graph`首先发生
2.  除非设置了 a ，否则委派似乎在本地发生[`resolveStrategy`](http://java.dzone.com/articles/groovy-resolve-strategies)，例如：

    ```
    closure.resolveStrategy = Closure.DELEGATE_FIRST 
    ```

# excel - VBA将对象传递到另一个对象集合

> ID：12222945
> 
> 赞同：1
> 
> 时间：2012-08-31T21:56:40.767
> 
> 标签：excel, class, vba, collections, module

我有一组所有者，每个人都有自己的一组机会。

我有两个类模块，具有一堆属性的 ClmOpportunity 和具有单个名称属性的 ClmOwner 和存储 ClmOpportunity 对象的集合：

```
Public name As Variant
Private opps As New collection

Public Function addOpportunity(opp As ClmOpportunity)

    opp.ID = opps.Count + 1
    opps.Add opp, opps.Count + 1

End Function 
```

这些所有者对象也存储在我的主模块的集合中。当我尝试使用 addOpportunity 函数时，如下所示：

```
Dim item As New ClmOpportunity

item.name = "test"

owners.item(overallOwner).addOpportunity (item) 
```

我得到错误：

> “对象不支持此属性或方法”

我对 VBA 很陌生，我不明白为什么会这样，我正在传递一个 ClmOpportunity，所以应该没问题吧？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T22:09:59.750

如果没有返回值，则不要使用括号...

```
owners.item(overallOwner).addOpportunity item 
```

...然后您将收到“类型不匹配”错误，因为集合需要一个字符串值作为键，因此您需要调整您的`addOpportunity`函数（如果您不打算添加返回的可能应该是 Sub价值）

# c++ - C++ 尝试 Catch 内循环

> ID：12222947
> 
> 赞同：4
> 
> 时间：2012-08-31T21:56:57.917
> 
> 标签：c++, while-loop, try-catch, control-flow

我有这个具有以下一般结构的 C++ 程序

```
1st while (condition A == true)
  //some code for 1st loop

  2nd while (condition B == true)
    //some code for 2nd loop
    try
      //some code for try
    catch
      //condition B == false (supposed to leave 2nd loop and go back to first loop) 
```

我希望它在出现异常时退出第二个循环并返回到第一个循环，直到条件 B 再次星期二。如上所述，它不像我预期的那样工作。似乎正在发生的事情是代码被卡住`catch`并且永远不会离开它。

我该如何安排它以使其按需要工作？

注意：条件 A 永远不会为假。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T21:59:57.280

将 break 关键字添加到 catch

还要注意你有 b == false; 那是检查 b 是否等于 false，而不是设置 b = false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:04:05.653

```
bool flag1 = true, flag2 = true;
while (flag1)
{
  // some work so that flag2 == true
  while (flag2)
  {
    try
    {

    }
    catch (...) // any exception happens
    {
        break;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T22:06:44.097

```
1st while (condition A == true) 
  //some code for 1st loop 

  2nd while (condition B == true) 
    //some code for 2nd loop 
    try 
      //some code for try 
    catch 
    {
      //condition B == false (supposed to leave 2nd loop and go back to first loop) 
      break ;
    } 
```

注意：即使在示例中，也请不要使用`condition A == true`. 最好使用`while (condition A)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T22:34:30.010

您可以在 catch 块中调用 break 来逃避第二个循环：

```
void foo(void) {
    bool A(true);
    while (A) {
        bool B(doSomething());
        while (B) {
            try {
                B = doSomethingElseThatMayThrow();
            } catch (...) {
                break;
            }
        }
     }
} 
```

或者，您可以将第二个循环放在 try 块内：

```
void foo(void) {
    bool A(true);
    while (A) {
        bool B(doSomething());
        try { 
            while (B) {
                B = doSomethingElseThatMayThrow();
            }
        } catch (...) {}
    }
} 
```

# php - Jquery将多个变量发布到php

> ID：12222948
> 
> 赞同：0
> 
> 时间：2012-08-31T21:57:04.090
> 
> 标签：php, javascript, jquery

我想将多个变量从 jquery 发布到 php

```
<script>
//vote script
function vote(type){
$.post('vote.php', '{user_id: <?php echo $fb_userid;?>, page_name: <?php echo $get_image;?>, type: type}', function(data){
    $('#voteNumber').html(data);
    });
    }//end function
</script> 
```

上面的代码不起作用我的问题是什么？

这是我的 php

```
if(isset($_POST['user_id']) && isset($_POST['page_name']) && isset($_POST['type'])){
        echo "done";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T22:02:34.510

```
<script>
//vote script
function vote(type){
    $.post('vote.php', { user_id : '<?php echo $fb_userid;?>', page_name : '<?php echo $get_image;?>', type : type}, function(data){
        $('#voteNumber').html(data);
    });
}//end function
</script> 
```

在您的括号中，您将整个内容用引号括起来。只有值必须用引号引起来。

```
{ key : 'val', key2 : 'val2' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:01:24.440

不需要引号，这是 javascript

您将对象直接作为参数传递

```
<script>
//vote script
function vote(type){
    $.post('vote.php', {user_id: <?php echo $fb_userid;?>, page_name: '<?php echo $get_image;?>', type: type}, function(data){
        $('#voteNumber').html(data);
    });
}//end function
</script> 
```

# c - 使用 C 预处理器指令进行编译时检查

> ID：12222950
> 
> 赞同：2
> 
> 时间：2012-08-31T21:57:13.667
> 
> 标签：c, macros, c-preprocessor, compile-time, preprocessor-directive

有没有办法让我的`LOGGING`-macro 中的日志级别检查（如下所示）在编译时发生？它应该是可能的，因为在编译期间已经知道条件（如果（pLogLevel <= LOG_LEVEL））是真还是假。以下是如何使用宏的示例：

`LOGGING(LOG_DEBUG, "FALSE - Wrong Marker\n");`

最初我认为a 中`#if`的指令`#define`可以帮助我，但[这篇](https://stackoverflow.com/questions/2831934/c-preprocessor-using-if-inside-define)文章告诉我这是不可能的。这是我的问题的源代码：

```
#ifndef __LOGGING_H__
#define __LOGGING_H__ 1

#include <time.h>

#define LOG_EMERG    0   
#define LOG_ALERT    1   
#define LOG_CRIT     2   
#define LOG_ERROR    3   
#define LOG_WARN     4   
#define LOG_NOTICE   5   
#define LOG_INFO     6   
#define LOG_DEBUG    7   
#define LOG_NONE     8   

/* set the global logging level here */
#define LOG_LEVEL LOG_INFO

void print_timestamp(void);

#if LOG_LEVEL == LOG_DEBUG
#define _LOG_PREAMBLE                                       \   
        fprintf(stdout, "%s:%d ", __FILE__, __LINE__);
#else
#define _LOG_PREAMBLE                                       \   
        print_timestamp();
#endif

#if LOG_LEVEL == LOG_EMERG
#define _LOG_LEVEL fprintf(stdout, "EMERG "); 
#elif LOG_LEVEL == LOG_ALERT
#define _LOG_LEVEL fprintf(stdout, "ALERT "); 
#elif LOG_LEVEL == LOG_CRIT
#define _LOG_LEVEL fprintf(stdout, "CRIT "); 
#elif LOG_LEVEL == LOG_ERROR
#define _LOG_LEVEL fprintf(stdout, "ERROR "); 
#elif LOG_LEVEL == LOG_WARN
#define _LOG_LEVEL fprintf(stdout, "WARN "); 
#elif LOG_LEVEL == LOG_NOTICE
#define _LOG_LEVEL fprintf(stdout, "NOTICE "); 
#elif LOG_LEVEL == LOG_INFO
#define _LOG_LEVEL fprintf(stdout, "INFO "); 
#elif LOG_LEVEL == LOG_INFO
#define _LOG_LEVEL fprintf(stdout, "DEBUG "); 
#else
#define _LOG_LEVEL
#endif

#define LOGGING(pLogLevel, ...)                               \   
    /* change this to compile time conditional if possible */ \   
    if (pLogLevel <= LOG_LEVEL)                               \   
    {                                                         \   
        _LOG_PREAMBLE                                         \   
        _LOG_LEVEL                                            \   
        fprintf(stdout, ##__VA_ARGS__);                       \   
    }   

#endif /* __LOGGING_H__ */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:26:56.117

一种方法是将日志级别组合到日志记录宏中。

这将创建一组宏，这些宏将根据日志级别打开或关闭。

您将使用这些宏，它们是否出现取决于编译时的日志级别。所以他们会像下面这样使用。

```
LOGGING_LEVEL_DEBUG("a Debug log.");
//.... some code
LOGGING_LEVEL_EMERG("a Emerge log."); 
```

所以宏定义看起来像下面这样：

```
 #define LOG_EMERG    0   
    #define LOG_ALERT    1   
    #define LOG_CRIT     2   
    #define LOG_ERROR    3   
    #define LOG_WARN     4   
    #define LOG_NOTICE   5   
    #define LOG_INFO     6   
    #define LOG_DEBUG    7   
    #define LOG_NONE     8   

    /* set the global logging level here */
    #define LOG_LEVEL LOG_INFO

    void print_timestamp(void);

    #if LOG_LEVEL >= LOG_DEBUG
    #define _LOG_PREAMBLE                                       \
            fprintf(stdout, "%s:%d ", __FILE__, __LINE__);
    #else
    #define _LOG_PREAMBLE                                       \
            print_timestamp();
    #endif

    #if LOG_LEVEL >= LOG_EMERG
        #define LOGGING_LEVEL_EMERG(...) \
            {                                                         \
                _LOG_PREAMBLE                                         \
                fprintf(stdout, "EMERG ");                                           \
                fprintf(stdout, ##__VA_ARGS__);                       \
            }   

        #else
        #define LOGGING_LEVEL_EMERG(...)
        #endif

        #if LOG_LEVEL >= LOG_ALERT
        #define LOGGING_LEVEL_ALERT(...) \
            {                                                         \
                _LOG_PREAMBLE                                         \
                fprintf(stdout, "ALERT ");                                           \
                fprintf(stdout, ##__VA_ARGS__);                       \
            }   

        #else
        #define LOGGING_LEVEL_ALERT(...)
        #endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:03:04.047

您可以有条件地定义宏本身：

```
#if LOG_LEVEL > 0
#  define LOG(...) printf(__VA_ARGS__)
#else
#  define LOG(...)
#endif

#if LOG_LEVEL > 1
// and so forth 
```

# visual-studio-2012 - 是否无法在 Visual Studio 2012 中查看和编辑 T-Sql 语句？

> ID：12222967
> 
> 赞同：1
> 
> 时间：2012-08-31T21:59:00.110
> 
> 标签：visual-studio-2012, sql-server-2012-express

我正在考虑将我们的数据库从 SQL Server 迁移到 SQL Azure，但我有点担心我一直拥有的工具的问题。
具体来说，在使用本地 Sql Server 2012 Express 数据库时，我无法直接从 VS“设计”一个 T-SQL 查询。例如，以前在 VS2012 中，我可以转到“显示表数据”，然后显示用于生成数据的 SQL，然后添加“order by”子句。但是现在在 VS2012 中，我看不到显示 t-sql 语句的方法（除非我想从头开始编写它们，但我没有）。
感谢您为我解决了这个困惑。另外，任何人都可以指出一些描述这些变化的在线文档吗？我一直在寻找它，但找不到任何东西 :-(
非常感谢！
Jan

# ajax - AJAX 驱动页面中的 Facebook “Like” 按钮 - Firefox 错误

> ID：12222974
> 
> 赞同：3
> 
> 时间：2012-08-31T22:01:00.363
> 
> 标签：ajax, facebook, facebook-like

我有一个使用 ajax 加载的类似 Facebook 的按钮。该按钮有效，但奇怪的是在Firefox中它没有出现。

```
<fb:like href="@Model.Url" show_faces="true" height="30" width="400" ></fb:like> 
```

在 Firefox 中，生成的 html 带有高度 = 0px。为什么？

```
<span style="height: 0px; width: 400px;">
<iframe id="f2b3cbcbf388e" class="fb_ltr " scrolling="no" name="f3cdf7e205a545e" style="border: medium none; overflow: hidden; height: 0px; width: 400px;" .... 
```

这不会发生在 Chrome 上。

与 facebook 相关我只有在 close body 标签之前有这个

```
<script>    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/pt_PT/all.js#xfbml=1&appId=00000";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T20:52:06.283

我仍在调查原因，但就我而言，我认为这是因为在 XFBML 解析时隐藏了包含的 div。仍在寻找更好的解决方案，但这可以通过手动清除添加的高度 css 来解决，如下所示：

```
FB.XFBML.parse(document, function(){
    $('.fb_button_container iframe').css('height','');
    $('.fb_button_container .fb-like > span').css('height','');
}); 
```

这使用 jquery ......如果你愿意，你可以很容易地不使用它。同样在这种情况下，我在具有类“fb_button_container”的容器内添加了类似按钮——这不是自动生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:21:29.923

如果我每页有超过 1 个 Facebook 点赞按钮，他的行为就会很奇怪。我将按钮移动到详细信息页面而不是列表页面，这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T14:23:32.000

我有同样的问题。按钮在除 Firefox 之外的所有其他常见浏览器中均正确呈现。不知何故，跨度的内联样式在 Firefox 中设置为 0px。多亏了theozero，我终于设法正确渲染了按钮。像 theozero 一样，我将 Facebook Like 按钮放置在一个 div 中，该 div 在页面加载时被 JS 隐藏。通过 theozero 的回答，我找到了 Facebook 的[FB.XFBML.parse 文档，](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)并将他们的重新解析函数完全放在他们最初提供的 Facebook JavaScript SDK 的末尾（最后一行）：

```
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/de_DE/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
FB.XFBML.parse(); 
```

瞧，按钮被渲染了！

* * *

编辑：太高兴太快了。这只有效，因为在页面加载时我立即取消隐藏包含按钮的 div。我将解析函数放入取消隐藏 div 的 JS 中。这样可行。确实如此。但是现在元素不再平滑切换了……啊！Facebook！洞！

* * *

编辑：所以！现在它完成了。必须在 slideToggle 函数上调用重新解析作为回调，以便在切换操作完成时重新解析元素。`.slideToggle('slow', function(){ FB.XFBML.parse(); });`当然，点赞按钮明显突然弹出，但我可以忍受，尽管我可以让按钮以某种方式消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-04T21:29:44.530

我花了一整天的时间才弄明白，但是**使用“测试用户”登录 Facebook 会使点赞按钮不可见**。就我而言，我总是在 Firefox 上使用我的测试用户登录，而在 Chrome 中使用我的常规 Facebook 用户注销/登录（我最初认为这是浏览器问题）。

但是，**解决方案**就像注销测试用户一样简单。

在 FB 文档中指定并非所有功能都为测试用户启用（类似按钮是这些功能之一），但我认为它至少会被渲染。无论如何，我希望这对某人有所帮助。

# android - 在用户事件上播放声音文件

> ID：12222976
> 
> 赞同：1
> 
> 时间：2012-08-31T22:01:07.647
> 
> 标签：android, android-viewpager, android-mediaplayer

我想用 mediaplayer 和 viewpager 播放声音文件，但它不起作用。我收到错误消息

```
"Unfortunately, the process horizontalviewpaging has stopped" 
```

（页面滑动和点击按钮事件）我该如何解决这个问题？

```
package ro.ovidiuconeac.horizontalviewswiping;

import ro.ovidiuconeac.horizontalviewswiping.R;
import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class CustomPageChangeListener extends Activity implements OnPageChangeListener, OnClickListener {

  private MediaPlayer soundplay = null;

  @SuppressWarnings("unused")
  public void onCreate(Bundle savedInstanceState) {

    // load layout
    super.onCreate(savedInstanceState);
    setContentView(R.layout.page_1);
    MediaPlayer soundplay=MediaPlayer.create(this, R.raw.catsound); 
  }

  private Button buttonBlue   = null;
  private Button buttonYellow = null;
  private Button buttonRed    = null;
  private Activity context    = null;

  /**
   * Constructor
   */   
  public CustomPageChangeListener(Activity context) {
    this.context = context;

  }

  public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

  }

  public void onPageScrolled(int arg0, float arg1, int arg2) {
     // TODO Auto-generated method stub

  }

  public void onPageSelected(int position) {

    switch (position) {
      case 0 : {
        ButtonBlue = (Button) context.findViewById(R.id.buttonBlue);
        buttonBlue.setOnClickListener(this);
        soundplay.start();  
        break;
      }
      case 1 : {
        buttonYellow = (Button) context.findViewById(R.id.buttonYellow);
        buttonYellow.setOnClickListener(this);
        soundplay.start();  
        break;
      }
      case 2 : {
        buttonRed = (Button) context.findViewById(R.id.buttonRed);
        buttonRed.setOnClickListener(this);
        soundplay.start();  
        break;
      }
    }   
  }

  public void onClick(View v) {

    // Click button blue
    if (buttonBlue != null && v.getId() == buttonBlue.getId()) {
      Toast.makeText(context, "Blue screen", Toast.LENGTH_SHORT).show();
      soundplay.start();    
    }

    // Click button yellow
    if (buttonYellow != null && v.getId() == buttonYellow.getId()) {
      Toast.makeText(context, "Yellow screen", Toast.LENGTH_SHORT).show();
      soundplay.start();        
    }

    // Click button red
    if (buttonRed != null && v.getId() == buttonRed.getId()) {
      Toast.makeText(context, "Red screen", Toast.LENGTH_SHORT).show();
      soundplay.start();    
    }   
  }
} 
```

编辑了一个“答案”，这确实是这个问题的额外信息。

```
> 09-01 08:38:04.964: E/AndroidRuntime(631): FATAL EXCEPTION: main
> 09-01 08:38:04.964: E/AndroidRuntime(631): java.lang.NullPointerException
> 09-01 08:38:04.964: E/AndroidRuntime(631): at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at ro.ovidiuconeac.horizontalviewswiping.CustomPageChangeListener.onClick(CustomPageChangeListener.java:80)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at android.view.View.performClick(View.java:4084)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at android.view.View$PerformClick.run(View.java:16966)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at android.os.Handler.handleCallback(Handler.java:615)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at android.os.Handler.dispatchMessage(Handler.java:92)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at android.os.Looper.loop(Looper.java:137)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at android.app.ActivityThread.main(ActivityThread.java:4745)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at java.lang.reflect.Method.invokeNative(Native Method)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at java.lang.reflect.Method.invoke(Method.java:511)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at dalvik.system.NativeStart.main(Native Method) 
```

我更改了代码但无法正常工作。

```
package ro.ovidiuconeac.horizontalviewswiping;
import ro.ovidiuconeac.horizontalviewswiping.R;
import android.app.Activity;
import android.media.MediaPlayer;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class CustomPageChangeListener extends Activity implements OnPageChangeListener,     OnClickListener {

    MediaPlayer soundplay;
private Button buttonBlue   =   null;
private Button buttonYellow =   null;
private Button buttonRed    =   null;
private Activity context    =   null;

/**
 * Constructor
 */ 

public CustomPageChangeListener(Activity context) {
    this.context = context;

}

public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

}

public void onPageSelected(int position) {

    switch (position) {
        case 0 : {
            buttonBlue = (Button)    context.findViewById(R.id.buttonBlue);
            buttonBlue.setOnClickListener(this);

            break;
        }
        case 1 : {
            buttonYellow = (Button) context.findViewById(R.id.buttonYellow);
            buttonYellow.setOnClickListener(this);
            break;
        }
        case 2 : {
            buttonRed = (Button) context.findViewById(R.id.buttonRed);
            buttonRed.setOnClickListener(this);

            break;
        }
    }   
}

public void onClick(View v) {

    // Click button blue
    if (buttonBlue != null && v.getId() == buttonBlue.getId()) {
        Toast.makeText(context, "Blue screen", Toast.LENGTH_SHORT).show();

    }

    // Click button yellow
    if (buttonYellow != null && v.getId() == buttonYellow.getId()) {

        //  Toast.makeText(context, "Yellow screen",   Toast.LENGTH_SHORT).show();
        playMusic();
    }

    // Click button red
    if (buttonRed != null && v.getId() == buttonRed.getId()) {
        Toast.makeText(context, "Red screen", Toast.LENGTH_SHORT).show();

    }   
}

public void playMusic () {
    soundplay = new MediaPlayer();
        try {   
        soundplay = MediaPlayer.create(getApplicationContext(), R.raw.bangyeni);
        soundplay.setVolume(1, 1);
        soundplay.start();

}
catch (Exception e){
    Toast.makeText(context, "Error", Toast.LENGTH_SHORT).show();
}   
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:06:17.020

```
 private MediaPlayer soundplay = null;
@SuppressWarnings("unused")
public void onCreate(Bundle savedInstanceState) {
// load layout

super.onCreate(savedInstanceState);
setContentView(R.layout.page_1);
MediaPlayer soundplay=MediaPlayer.create(this, R.raw.catsound); 
```

}

那里的代码可能是问题所在。您正在尝试播放 null MediaPlayer。请编辑此行

```
 MediaPlayer soundplay=MediaPlayer.create(this, R.raw.catsound); 
```

看起来像这样

```
 soundplay=MediaPlayer.create(this, R.raw.catsound); 
```

您拥有它的方式是创建第二个具有较小范围的 MediaPLayer 声音播放，该播放在函数结束时终止，将您之前设置的私有 MediaPLayer 保留为空。

我也认为你忘记了一个新的 MediaPlayer 对象

```
 mp = new MediaPlayer();
     mp = MediaPlayer.create(getApplicationContext(), R.raw.sound);
     mp.setVolume(1, 1);
     mp.start(); 
```

这是我遵循的基本模型。

# python - 有谁知道用于与 RRD 文件交互的 Python 库，它也与 Google App Engine 兼容？

> ID：12222978
> 
> 赞同：1
> 
> 时间：2012-08-31T22:01:13.667
> 
> 标签：python, google-app-engine, rrdtool, rrd

我正在为 Google App Engine 编写一个应用程序，我想使用 RRD 作为图形数据的文件格式。但是，我无法找到与 RRD 文件交互的与 GAE 兼容的 python 库。

在我看来，它最像，例如“rrdtool”python 实现只是 rrdtool 可执行文件的包装器。

无论如何，有人知道合适的图书馆吗？

# java - 将 HashMap 发送到 SQL DB

> ID：12222981
> 
> 赞同：0
> 
> 时间：2012-08-31T22:01:44.297
> 
> 标签：java, mysql, hashmap

我的代码在某种程度上是错误的：/

```
 public static Connection con = null;
    public static void createConnection()
   {
     try
     {
       Class.forName("com.mysql.jdbc.Driver").newInstance();
       String str1 = "s1.infinitysrv.com:3306";
       String str2 = "sagesca1_hiscores";
       String str3 = "sagesca1_server";
       String str4 = "pass";
       con = DriverManager.getConnection("jdbc:mysql://" + str1 + "/" + str2, str3, str4);
       stmt = con.createStatement();
       System.out.println("Connection to SQL database successful!");
     } catch (Exception localException) {
       System.out.println("Connection to SQL database failed");
       localException.printStackTrace();
     }
   }
       public static Map<String, Clan> clans;
   public static boolean sendClans(){
    try {       
        try {
            clans = (HashMap<String, Clan>) XStreamUtil.getXStream().fromXML(new FileInputStream("data/clans.xml"));
        } catch (Exception e) {
            clans = new HashMap<String, Clan>();
        }
        for (Map.Entry<String, Clan> entries : clans.entrySet()) {
            final Clan clan = entries.getValue();
            clan.setTransient();
            PreparedStatement ps = con.prepareStatement("INSERT INTO clans(name,roomOwner) values (?, ?)");
            ps.setString(1, clan.getName());
            ps.setString(2, clan.getOwner());
            ps.executeUpdate();
        }
    } catch (SQLException e) {
        //e.printStackTrace();
        return false;
    }
    return true;
   } 
```

这是我的 ClanManager 调用方法 sendClan

```
 private Map<String, Clan> clans;

@SuppressWarnings("unchecked")
public ClanManager() {
    Logger.getInstance().info("Loading clans....");
    try {
        clans = (HashMap<String, Clan>) XStreamUtil.getXStream().fromXML(new FileInputStream("data/clans.xml"));
    } catch (Exception e) {
        clans = new HashMap<String, Clan>();
    }
    for (Map.Entry<String, Clan> entries : clans.entrySet()) {
        final Clan clan = entries.getValue();
        clan.setTransient();
        //Hiscores.sendClans();
    }
    Logger.getInstance().info("Loaded " +clans.size()+ " SageScape clans.");
} 
```

我不太确定问题是什么，但是当我运行我的服务器时，错误指向了这一点：

```
PreparedStatement ps = con.prepareStatement("INSERT INTO clans(name,roomOwner) values (?, ?)"); 
```

我不知道代码有什么问题，如果有人可以帮助我，我会永远爱你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:25:02.527

我假设您已经在数据库中创建了一个表，该表`schema`有点像这样（这有点 MySQL 特有）：

```
CREATE TABLE ClanTable(
    name        varchar(30),
    roomOwner   varchar(30)
) 
```

现在让您使用 JDBC 将数据插入此表，我建议您创建一个方法来`database`使用`PreparedStatement`. 如果您是 JDBC 新手，显然您首先需要通读[“JDBC 基础知识”](http://docs.oracle.com/javase/tutorial/jdbc/basics/)以了解如何使用 JDBC。

假设一个表结构如上，`PreparedStatement`这将是这样的：

```
PreparedStatement ps = connection.prepareStatement("INSERT INTO ClanTable(name,roomOwner) values (?, ?)"); 
```

然后，您将遍历`map`并执行此语句。请注意，如果您的地图的条目数量较少，则可以执行以下操作：

```
for(Map.Entry<String, Clan> entries: clans.entrySet()){
    Clan clan = entries.getValue();
    ps.setString(1, clan.getName());
    ps.setString(1, clan.getOwner());

    ps.executeUpdate();
} 
```

# macos - Bash：检查一个位置中的所有文件是否存在

> ID：12222986
> 
> 赞同：1
> 
> 时间：2012-08-31T22:02:36.200
> 
> 标签：macos, file, bash, loops

我在一些 Bash 脚本（在 OSX 上）方面得到了一些帮助。我想创建一个带有两个参数的脚本 - 源文件夹和目标文件夹 - 并检查源层次结构中的所有文件以查看它们是否存在于目标层次结构中。即给定一张数据 DVD，检查其中包含的文件是否已经在内部驱动器上。

到目前为止我想出的是

```
#!/bin/bash

if [ $# -ne 2 ]
then
        echo "Usage is command sourcedir targetdir"
        exit 0
fi

source="$1"
target="$2"

for f in "$( find $source -type f -name '*' -print )"
do 
```

我现在不确定如何最好地获取没有路径的文件名，然后查看它是否存在。我真的是脚本的初学者。

编辑：到目前为止给出的答案在紧凑代码方面都非常有效。但是，我需要能够在目标层次结构中的任何位置查找在整个源层次结构中找到的文件。如果找到，我想比较校验和和最后修改日期等并发表评论，或者，如果没有找到，我想注意这一点。目的是检查外部媒体上的文件是否已上传到文件服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:04:17.700

这应该给你一些想法：

```
#!/bin/bash

DIR1="tmpa"
DIR2="tmpb"

function sorted_contents
{
    cd "$1"
    find . -type f | sort
}

DIR1_CONTENTS=$(sorted_contents "$DIR1")
DIR2_CONTENTS=$(sorted_contents "$DIR2")

diff -y  <(echo "$DIR1_CONTENTS") <(echo "$DIR2_CONTENTS") 
```

在我的测试目录中，输出是：

```
[user@host so]$ ./dirdiff.sh
./address-book.dat ./address-book.dat
./passwords.txt ./passwords.txt
./some-song.mp3 <
./the-holy-grail.info ./the-holy-grail.info
                                             > ./victory.wav
./zzz.wad ./zzz.wad

```

如果不清楚，“some-song.mp3”仅在第一个目录中，而“victory.wav”仅在第二个目录中。其余文件很常见。

请注意，这只比较文件名，而不是内容。如果你喜欢它的发展方向，你可以使用这些`diff`选项（也许`--suppress-common-lines`如果你想要更清晰的输出）。

但这可能是我的处理方式——将大量工作转移到`diff`.

**编辑：**我还应该指出一些简单的事情：

```
[user@host so]$ diff tmpa tmpb 
```

也可以：

```
    仅在 tmpa 中：some-song.mp3
    仅在 tmpb 中：victory.wav

```

...但感觉不如自己编写脚本那么令人满意。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:44:18.073

仅列出`$source_dir`其中不存在的文件`$target_dir`：

```
 comm -23 <(cd "$source_dir" && find .|sort) <(cd "$target_dir" && find .|sort) 
```

`-f`您可以使用`find`命令*等*将其限制为常规文件。

该`comm`命令（“common”的缩写）查找两个文本文件之间的共同行并输出三列：仅在第一个文件中的行，仅在第二个文件中的行，以及两者共有的行。数字抑制了相应的列，因此输出`comm -23`仅是第一个文件中未出现在第二个文件中的行。

进程替换语法`<(command)`被连接到给定命令输出的命名管道的路径名替换，这使您可以在任何可以放置文件名的地方使用“管道”，而不仅仅是标准输入和标准输出。

在这种情况下，命令会生成两个目录下的文件列表 -`cd`使输出相对于被比较的目录，以便相应的文件作为相同的字符串出现，并`sort`确保`comm`不会被列出的相同文件混淆两个文件夹中的顺序不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T01:16:42.850

关于这条线的一些评论`for f in "$( find $source -type f -name '*' -print )"`：

*   做那个`"$source"`。始终在变量替换周围使用双引号。否则，结果将被拆分为被视为通配符模式的单词（shell 解析规则中的一个历史奇点）；特别是，如果变量的值包含空格，这将失败。
*   你不能迭代`find`这种方式的输出。由于双引号，循环中会有一次迭代，其中`$f`包含来自`find`. 如果没有双引号，包含空格和其他特殊字符的文件名会使脚本出错。
*   `-name '*'`是无操作的，它匹配所有内容。

* * *

据我了解，您想按名称查找文件，而与它们的位置无关，即您认为`/dvd/path/to/somefile`与`/internal-drive/different/path-to/somefile`. 因此，在每边按名称索引的文件列表。你可以通过按摩一点输出来做到这`find`一点。下面的代码可以处理文件名中的任何字符，但换行符除外。

```
list_files () {
  find . -type f -print |
  sed 's:^\(.*\)/\(.*\)$:\2/\1/\2:' |
  sort
}
source_files="$(cd "$1" && list_files)"
dest_files="$(cd "$2" && list_files)"
join -t / -v 1 <(echo "$source_files") <(echo "$dest_files") |
sed 's:^[^/]*/::' 
```

该`list_files`函数生成带有路径的文件名列表，并在文件前面添加文件名，因此 eg`/mnt/dvd/some/dir/filename.txt`将显示为`filename.txt/./some/dir/filename.txt`. 然后它对文件进行排序。

该[`join`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/join.1.html)命令打印出行，例如在源层次结构中`filename.txt/./some/dir/filename.txt`调用文件`filename.txt`但在目标层次结构中没有调用的文件。我们终于稍微调整了它的输出，因为我们不再需要行首的文件名。

# vb.net - 如何将RGB对应的3个字节变成一个字节？

> ID：12222992
> 
> 赞同：3
> 
> 时间：2012-08-31T22:02:55.940
> 
> 标签：vb.net, assembly

我正在制作一个 16 位汇编程序，而我正在使用的图形模式仅支持以单个字节写入的每像素 256 种颜色。也就是说，我只能指定一个字节的颜色值来绘制一个像素。我将图像转换为 8 位深度位图，现在我尝试使用 Visual Basic 获取每个像素颜色值，以便我可以在汇编程序中使用这些值，但我得到一个 RGB 值，当我尝试转换这些 RGB将值转换为单个字节我得到的数字大于 256，所以我不能在图形模式下使用它。这是我所拥有的：

```
Dim myBitmap As New Bitmap("images.bmp")
Dim output As New System.IO.StreamWriter("colors.txt", False)
Dim pixelColor As Color
Dim rgb As Integer

For x As Integer = 1 To myBitmap.Width - 1 Step 1
            pixelColor = myBitmap.GetPixel(x, y)
            rgb = CUInt(pixelColor.B) + CUInt((pixelColor.G << 8)) + CUInt((pixelColor.R << 16))
            output.WriteLine(rgb.ToString)

        Next x

    Next y
output.Close() 
```

实际上给我的值高于 256 的行是：

```
rgb = CUInt(pixelColor.B) + CUInt((pixelColor.G << 8)) + CUInt((pixelColor.R << 16)) 
```

实际上有没有办法将 3 个 RGB 值完全转换、合并或近似为一个字节？（不能超过 255）

* * *

* * *

编辑：由于我们已经进入了 VB 网络，让我用**David**写的转换逻辑编写工作代码：

```
rgb = ((pixelColor.R / 32) << 5) + ((pixelColor.G / 32) << 2) + (pixelColor.B / 64) 
```

谢谢大卫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T22:06:38.240

红色值使用 3 位，绿色值使用 3 位，蓝色值使用 2 位。在 Wikipedia 页面上对[8-bit color](http://en.wikipedia.org/wiki/8-bit_color)进行了很好的解释。

转换逻辑为：

```
[(Red / 32) << 5] + [(Green / 32) << 2] + (Blue / 64) 
```

# c - 指向 char 数组的指针数组

> ID：12222993
> 
> 赞同：9
> 
> 时间：2012-08-31T22:03:03.580
> 
> 标签：c

我对以下代码行感到困惑：

```
char* words[] = { "aaa", "bbbb", "ccccc", "dddddd" }; 
```

我理解的方式是，首先存储每个单词，然后数组的每个位置`words`将指向每个单词的第一个字符。这些字符串是如何存储的？这里是否正在进行动态分配，或者这些单词是否存储在堆栈中？

如果它们存储在堆栈中，它们以哪种方式存储？例如，如果我打印`words`如下的一些内容：

```
#include <stdio.h>
int main () {
    char* words[] = { "aaa", "bbbb", "ccccc", "dddddd" };
    printf("\n\n(*words)[0] = %s", words[0]);
    printf("\n\n(*words)[0]+1 = %s", words[0]+1);
    return 0;
} 
```

而不是打印`aaa`and `bbbb`，我得到的是`aaa`and `aa`。我真的不明白这是什么原因，因为在我看来，`words[0]+1`应该指向字符串`bbbb`而不是`aaa`. 这里发生了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-01T04:29:00.857

这就像..

![在此处输入图像描述](../Images/c0981ed4097f85657f6778810bb728bf.png)

因为 words 是一个指针字符数组，所以单词的每个数组索引都将保存字符串文字的地址，即如果要打印字符串文字的基地址

```
 printf("%s",words[0])// index 0 will print aaa. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T22:05:38.817

不同之处在于`words[0]+1`不一样`words[0+1]`。

前者指向 中的第二个字符`words[0]`，而后者指向第二个单词。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T22:05:15.323

words[0] 指向“aaa”中的第一个“a”。

words[0]+1 将该指针移动一个字符，因此它指向第二个“a”。

words[1] 指向“bbbb”

words[1]+1 点 "bbb"，例如 "bbbb" 中的第二个 'b'。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T22:05:59.310

> 在我看来，words[0]+1 应该指向字符串 bbbb 而不是 aaa 的第二个字符

不`words[0]`，它本身就是一个 char 指针——你可以通过添加一个字符来获得“aaa”的第二个字符。你想要的是`words + 1`或者`&words[0] + 1`正确的是“bbbb”。

此外，字符串本身是在启动可执行文件时分配的，并且它们可能由链接器放入二进制文件的数据或 bss 部分。此外，当您声明和初始化时`words`，它将像任何其他自动数组一样在堆栈上分配，并且其项目将分配给指向每个字符串常量开头的指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T22:05:32.453

文字字符串存储在静态内存中。它们的实际位置取决于实现，但文字字符串存储在*某处*，通常在可执行文件的数据部分中——这既不是动态分配也不是堆栈分配。然后，您的数组包含指向这些位置的指针。

> words[0]+1 应该指向字符串 bbbb 而不是 aaa 的第二个字符。

这根本不是数组索引的工作方式。您使用 索引字符串数组`words[0]`，现在您有了一个字符串，并且任何操作都适用于该字符串。您不能对下标之外的数组索引进行算术运算。要获取字符串`"bbbb"`，您将使用`words[1]`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-31T22:29:41.250

堆栈和堆空间都是动态分配的——也就是说，它们是在运行时分配的。您的编译代码是动态分配的，在堆上还是栈上？显然两者都没有。常量的存储类似于代码的存储......它们存储在磁盘上的可执行文件中并加载到只读内存中。（学徒注意：这是典型实现中的工作方式；语言标准没有强制要求。）

`words[0]`是“aaaa”的第一个“a”的地址。向该地址添加 1 肯定会产生“aaaa”的第二个“a”的地址。“bbbb”的地址在`words[1]`.

在您的 printf 格式中，您有“(*words)[0]”，但这是不同的。`*words`是一样的`words[0]`。`(*words)[0]`与 相同`**words`，它是“aaaa”的第一个“a”（不是它的地址）。您将使用 打印`(*words)[0]`，`%c`而不是`%s`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T22:05:19.803

words[0] 返回 aaa 的地址。向其添加 1 会增加地址以指向第二个 a。

你的意思是有单词[0+1]？

那应该给你你所期望的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T22:05:26.047

```
char* words[] = { "aaa", "bbbb", "ccccc", "dddddd" }; 
```

所有 4 个字符串都有静态存储持续时间，并在程序启动之前分配。

在初始化器中，数组被转换为指向的指针，`char`并`words`使用指针值初始化数组。

# javascript - 无法从同一 ASPX 页面上的 DIV 中的按钮访问报告视图中的预览按钮

> ID：12222999
> 
> 赞同：0
> 
> 时间：2012-08-31T22:04:04.707
> 
> 标签：javascript, jquery, asp.net, telerik-reporting

```
<div id='popup'>       
  <input id='btnConfirm'/>                 
</div>                                    

   $("#btnConfirm").click(function () {                                 

                var frame = $('#[id$=ReportViewer1ParameterArea]'); //get the frame       

                //s57 is a table element in the viewer                            
                frame.contents().find("#Preview")                     
                .click(                  
                    function () {                         
                        alert('hover!');                 
                    }                    
                );                   

            }); 
```

以下是 Telerik Report Viewer 呈现的 HTML 的一部分

```
<iframe id="ctl00_ctl00_MainContent_MainContent_ReportViewer1ParametersArea"               scrolling="auto" width="100%" height="0px" frameborder="0" align="left"               src="/Telerik.ReportViewer.axd?instanceID=0001be3494c046c69b091014203c2914&culture=en-US&uiculture=en-US&optype=Parameters" style="height: 26px;">               
<table id="parametersTable" cellspacing="0" cellpadding="0" border="0" style="width:100%;border-collapse:collapse;">               
<tr id="parametersRow">                 
<td valign="middle" align="center" rowspan="2">              
<input id="Preview" type="submit" onclick="return ParametersPage.Validate();"             value="Preview" name="Preview">              
</td>              
</tr> 
```

问题：
我需要从包含 ASPX 页面上 ID= btnConfirm 按钮的 DIV 访问报表查看器中的预览按钮 ID="Preview"，如上面在 JQuery 脚本中给出的。ASPX 页面包含 Telerik Report Viewer。我将代码放在 $("#btnConfirm").click(function () 事件中，但这不起作用。你能给我一些想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:04:53.423

尝试使用这个选择器：

```
var frame = $('[id$="ReportViewer1ParameterArea]"'); 
```

删除`#`并在值周围添加引号`"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:13:58.360

下面的代码是我为使我的代码工作而开发的：

```
var reportFrame = document.getElementById('ctl00_ctl00_MainContent_MainContent_ReportViewer1ParametersArea');
var reportDocument = reportFrame.contentWindow.document;

var body = reportDocument.getElementsByTagName("body")[0];
$(body).contents().find("#Preview").click(); 
```