# StackOverflow 问答 11469000-11469999

# iphone - 为什么我的 ViewController 在第二次调用后才发布，iOS ARC？

> ID：11469000
> 
> 赞同：0
> 
> 时间：2012-07-13T10:49:20.590
> 
> 标签：iphone, ios, uiviewcontroller, automatic-ref-counting, release

使用 ARC。我有一个简单的两个视图控制器，一个是启动视图控制器，第二个是自定义 UIImagepickerViewController（上面有几个自定义视图）

```
@interface ViewController : UIViewController { 
}
@property (nonatomic, strong) CameraController *cameraController;

@implementation ViewController
@synthesize cameraController;
-(void) showCame {
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{   
    self.cameraController = [[CameraController alloc] init];
    self.cameraController.delegate = self;
    [self presentModalViewController:self.cameraController animated:YES];
}   
} 
```

但是当我这样做时 [self dismissModalViewControllerAnimated:YES]; 在相机控制器中，它不会释放内存，只有当我第二次调用它时，它才会调用第一个实例的 dealloc 并创建第二个实例。

不要忘记我使用 ARC

编辑：我只是用两个控制器创建空白项目，用仪器（分配）运行它，在应用程序完全加载后我有 568Kb，然后我点击显示模态控制器并关闭它，我得到 642Kb（在第二个视图控制器中我放了 10来自 IB 的对象）问题是为什么？为什么这些数据没有完全销毁，可能是缓存或一些？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T10:57:50.673

即使您正在调用 ，您仍然保留指向它的强指针`dismissModalViewControllerAnimated:`。您必须设置指针`self.cameraController = nil;`以告诉 ARC 您不再需要指向它的指针。

# jakarta-ee - 如何将文本数据连续流式传输到 servlet？

> ID：11469003
> 
> 赞同：3
> 
> 时间：2012-07-13T10:49:29.500
> 
> 标签：jakarta-ee, servlets, streaming

我有一个 Android 应用程序，它连接到服务器并不断发送一些信号数据（使用 HttpURLConnection）。在服务器上，一个脚本（shell 或 python，不完全知道，这不是我的部分）当前处理这个流，并且为每个传入的数据包设置一个 curl 请求以将此包发布到一个 servlet（在 Jetty 8 web 中运行容器）。这只是一个临时解决方案，因为我不知道如何直接连接数据并将数据流式传输到 servlet。作为要求，数据传输应使用 HTTP 协议，以免被任何防火墙阻止。

那么，是否有可能首先连接到一个 servlet，然后长时间（比如几分钟或几小时）流式传输数据？我想知道我没有找到类似的问题/解决方案。我的意思是这不是特殊情况。这与将大文件上传到 servlet 的操作相同吗？

servlet 实际上如下所示：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    System.out.println("StreamingServlet#doPost(): IN");
    BufferedReader reader = request.getReader();
    String data = "";

    while ((data = reader.readLine()) != null)
    {
        System.out.println("Data: " + data);
    }
    reader.close();

    System.out.println("StreamingServlet#doPost(): OUT");
} 
```

android 应用程序有 3 个使用 HttpURLConnection 的方法：

```
private Boolean connect(URL URLdest)
{
    try
    {
        connection = (HttpURLConnection) URLdest.openConnection();
        connection.setDoOutput(true);
        connection.setChunkedStreamingMode(0);
        oSWout = new OutputStreamWriter(connection.getOutputStream());
    }
    catch (IOException e)
    {
        return false;
    }
    return true;
}   

public void send(String packet)
{
    try
    {
        // TODO clOSWout.write and clOSWout.flush block may freeze if connection is lost. Somehow no exception is thrown and thread hangs instead.
        // It only occurs if the Server breaks the connection

        oSWout.write(packet);
        oSWout.flush();
    }
    catch (IOException e)
    {
        ...
    }
}

public void stopConnection()
{
    try
    {
        oSWout.close();
        connection.disconnect();
    }
    catch (IOException e)
    {
        ...
    }
} 
```

我最终期望的是，当连接到 servlet 时，它会打印“StreamingServlet#doPost(): IN”，然后，对于每个传入的数据包，它应该打印数据字符串，并且在关闭连接时它应该打印“StreamingServlet# doPost(): OUT" 最后从方法返回。

但我想我错过了一些东西，这是在 Java EE 中以另一种方式完成的。我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:03:36.880

最后，我自己解决了这个问题：

使用 BufferedReader，所有数据包都被收集（缓冲），并在连接关闭时作为一个包被读取和打印。所以我不得不使用 ServletInputStream [由 HttpServletRequest#getInputStream() 获得] 并使用 read() 方法将数据包读入字节数组。现在一切都按我的预期工作。

但我仍然想知道，使用阻塞操作是否是一个或多或少典型的场景，因此在 doPost() 方法中保持很长时间（比如几分钟或几小时），或者服务器是否以某种方式期望在更短的时间内响应.

# objective-c - 获取当前的 iCloud 同步状态

> ID：11469007
> 
> 赞同：3
> 
> 时间：2012-07-13T10:49:45.397
> 
> 标签：objective-c, sync, icloud, nsubiquitouskeyvaluestore

有谁知道是否有办法检测当前`NSUbiquitousKeyValueStore`是否是最新的？例如，如果我打开了飞行模式或没有互联网连接，iCloud 无法同步数据，但我如何告诉用户他正在处理可能是旧数据？

我也尝试过处理，`NSUbiquitousKeyValueStoreDidChangeExternallyNotification`但它不会因失败而触发。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:40:38.650

我不确定 NSUbiquitousKeyValueStore 但对于 iCloud + CoreData 没有办法知道数据是否同步。我假设键值存储是相同的。

# vb.net - 在 vb.net 的菜单条中禁用 Alt + 键快捷键

> ID：11469011
> 
> 赞同：0
> 
> 时间：2012-07-13T10:49:48.027
> 
> 标签：vb.net, keyboard-shortcuts, menustrip

我在 vb.net 的项目中使用 MenuStrip。我创建了两个主菜单：一个是主菜单，另一个是帮助。现在任何人按`ALT   `+`M`然后它将打开主菜单，如果按`ALT   `+`H`然后它将打开帮助菜单。

现在我想阻止此功能并限制用户按`ALT   `+`[ A KEY ]`打开菜单。

谁能给我一个想法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T11:41:58.057

将表单的`KeyPreview`属性设置为`True`并测试要在其`KeyDown`事件中阻止的组合键，然后设置`e.SuppressKeyPress = True.`

但是，我通常建议不要这样做。人们*希望*能够在 Windows 应用程序中使用键盘快捷键访问菜单。拒绝他们该选项会使应用程序 (a) 不符合 Windows 标准，并且 (b) 用户友好性降低。

# gwt - 带有 manifest_version 的 GWT Chrome 扩展：2

> ID：11469013
> 
> 赞同：2
> 
> 时间：2012-07-13T10:50:05.547
> 
> 标签：gwt, google-chrome-app, content-security-policy

有没有人能够使用 GWT 和 manifest_version 2 制作 Chrome 扩展程序？我还对所有 GWT 生成的文件进行了沙盒处理（如此处所建议[的](https://groups.google.com/a/chromium.org/d/topic/chromium-apps/QD8_2THbo7M/discussion)），但它仍然无法正常工作。

**清单.json**

```
{
  "name": "Hello World!",
  "description": "My first packaged app.",
  "manifest_version": 2,
  "version": "0.1",
  "app": {
    "background": {
      "scripts": ["background.js"]
    }
  },
  "permissions": ["experimental", "appWindow"],
  "icons": { "16": "calculator-16.png", "128": "calculator-128.png" }
} 
```

**背景.js**

```
chrome.experimental.app.onLaunched.addListener(function() {
    chrome.appWindow.create('LocalWebApp.html', {
        'width': 400,
        'height': 500
    });
}); 
```

维沙尔

# ruby-on-rails - 使用 sass-rails 清空 CSS

> ID：11469014
> 
> 赞同：0
> 
> 时间：2012-07-13T10:50:05.570
> 
> 标签：ruby-on-rails, sass

我正在尝试在我的第一个应用程序中使用[sass-rails](https://github.com/rails/sass-rails/)插件，因此我可以学习和练习 .sass 缩进文件。我已经安装了 gem，并将我的 application.css.scss 重命名为 application.css.sass。这是这个文件的内容：

```
@import bootstrap_and_overrides

body
  background-color #eee
  padding 20px
  margin 0 -20px 
```

事实是，当我检查生成的 css 文件时，@import 子句中的所有样式都添加到生成的 css 文件中，而不是 @import 之后添加的样式。我想这有点工作正常，因为如果我删除导入行，我会看到我的应用程序根本没有样式，并且生成的 css 文件是空的。

有谁知道为什么我的样式没有添加到生成的 css 文件中？有没有更好的方法使用缩进的 .sass 文件作为默认样式？顺便说一句，我正在使用 rails 3.2.3。

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:57:14.790

您必须`:`在每个属性之后添加一个：

```
body
  background-color: #eee
  padding: 20px
  margin: 0 -20px 
```

# jquery - 如何从链接中删除网站网址

> ID：11469016
> 
> 赞同：0
> 
> 时间：2012-07-13T10:50:12.823
> 
> 标签：jquery

我正在为我的[博客](http://www.axinkhabar.com/)使用 ajax，并且需要在加载下一页时更改标题。

我试图通过从下一个链接获取 url 并将其添加到标题来做到这一点。现在我只需要从这个网址中删除该网站的网址：www.mysite.com/page/2

我只需要在最后一个斜杠之后定位：2

通过单击下一页后使用它，我定位了整个 url：

```
var LinkTitle = jQuery(this).attr('href'); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:53:59.080

```
var myHref = this.href.split('/');
var LinkTitle = myHref[myHref.length-1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:00:19.273

您可以使用[split()](http://www.w3schools.com/jsref/jsref_split.asp)函数来获取一个数组并获取其最后一个元素。

```
arr = LinkTitle.split("/");
yourTitle = arr[arr.length-1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T11:00:21.187

这也应该有效：

```
url = url.substr(url.lastIndexOf('/') + 1); 
```

显然有很多方法可以做到这一点（正则表达式、`replace()`、`split()`等）。我建议继续使用[jsperf](http://jsperf.com/)，看看在大多数浏览器上哪个是最快的，然后这样做。也许您可以在此处报告这些结果，以便将来访问该问题的人也可以利用该信息。

# python - 如何在 Python 中实现可下标的类（可下标的类，不可下标的对象）？

> ID：11469025
> 
> 赞同：50
> 
> 时间：2012-07-13T10:51:07.237
> 
> 标签：python

实现一个可下标的对象很容易，只需`__getitem__`在这个对象的类定义中实现。
但现在我想实现一个可下标的类。例如，我想实现这段代码：

```
class Fruit(object):
    Apple = 0
    Pear = 1
    Banana = 2
    #________________________________ 
    #/ Some other definitions,         \
    #\ make class 'Fruit' subscriptable. /
    # -------------------------------- 
    #        \   ^__^
    #         \  (oo)\_______
    #            (__)\       )\/\
    #                ||----w |
    #                ||     ||

print Fruit['Apple'], Fruit['Banana']
#Output: 0 2 
```

我知道`getattr`可以做同样的事情，但我觉得下标访问更优雅。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-03-14T18:18:30.720

将这样的内容添加到您的课程中：

```
class Fruit(object):
     def __init__(self):
         self.Fruits = {"Apple": 0, "Pear": 1, "Banana": 2}
     def __getitem__(self, item):
         return self.Fruits[item] 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-13T11:01:40.887

似乎可以通过更改元类来工作。对于 Python 2：

```
class GetAttr(type):
    def __getitem__(cls, x):
        return getattr(cls, x)

class Fruit(object):
    __metaclass__ = GetAttr

    Apple = 0
    Pear = 1
    Banana = 2

print Fruit['Apple'], Fruit['Banana']
# output: 0 2 
```

* * *

在 Python 3 上，您应该直接使用[Enum](https://docs.python.org/3/library/enum.html)：

```
import enum

class Fruit(enum.Enum):
    Apple = 0
    Pear = 1
    Banana = 2

print(Fruit['Apple'], Fruit['Banana'])
# Output: Fruit.Apple, Fruit.Banana
print(Fruit['Apple'].value, Fruit['Banana'].value)
# Output: 0 2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-22T19:52:26.583

扩展[@LuisKleinwort 的答案](https://stackoverflow.com/a/35995074/13710015)，如果您想对所有类属性执行此操作：

```
fruits_dict = {'apple':0, 'banana':1}

class Fruits(object):
    def __init__(self, args):
        for k in args:
            setattr(self, k, args[k])

    def __getitem__(self, item):
        return getattr(self, item)

fruits = Fruits(fruits_dict)
print(fruits.apple)
print(fruits['apple']) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-08-30T10:08:34.763

我确实认为您是在询问订阅类而不是类的实例。

这是我对这个问题的回答：“如何在 Python 中创建可下标的类？”

```
class Subscriptable:
    def __class_getitem__(cls, item):
        return cls._get_child_dict()[item]

    @classmethod
    def _get_child_dict(cls):
        return {k: v for k, v in cls.__dict__.items() if not k.startswith('_')}

class Fruits(Subscriptable):
    Apple = 0
    Pear = 1
    Banana = 2 
```

* * *

```
>>> Fruits['Apple']
    0
>>> Fruits['Pear']
    1 
```

# java - 附加信息时如何在xml文件中省略标头

> ID：11469035
> 
> 赞同：1
> 
> 时间：2012-07-13T10:51:39.157
> 
> 标签：java, xml, jdom

我有一个用`xmloutputter`. 在第一次创建时创建的 xml 文件，它为我创建了标头，但随后我在其上附加了信息，我不会标头。我怎么能省略？

**编辑**

```
 Element performances = new Element("performances");
            Document doc = new Document(performances);

            performances.setAttribute(new Attribute("date", dateFormat.format(cal.getTime())));

            //Uptime
            Element uptime = new Element("uptime");
            uptime.addContent(new Element("days").setText(new Long(duptime).toString()));
            uptime.addContent(new Element("hours").setText(new Long(huptime).toString()));
            uptime.addContent(new Element("minutes").setText(new Long(muptime).toString()));
            uptime.addContent(new Element("seconds").setText(new Long(suptime).toString()));
            doc.getRootElement().addContent(uptime);
            //TotalHitsCount
            doc.getRootElement().addContent(new Element("totalhitcount").setText(new Long(stats.gettotal_hit_count()).toString()));
            //EmittedBytes
            doc.getRootElement().addContent(new Element("emittedbytes").setText(new Long(stats.getemitted_bytes()).toString()));
            //Avghitsec
            doc.getRootElement().addContent(new Element("avghitsec").setText(new Float(stats.getavg_hit_sec()).toString()));
            //Avgbyteshit
            doc.getRootElement().addContent(new Element("avgbyteshit").setText(new Long(stats.getavgbytes_hit()).toString()));
            //Avgbps
            doc.getRootElement().addContent(new Element("avgbps").setText(new Long(stats.getavgbps()).toString()));
            //Total threads
            doc.getRootElement().addContent(new Element("totalthreads").setText(new Long(stats.gettotal_threads()).toString()));
            //Idle threads
            doc.getRootElement().addContent(new Element("idlethreads").setText(new Long(stats.getidle_threads()).toString()));

            XMLOutputter xmlOutput = new XMLOutputter();

            xmlOutput.setFormat(Format.getPrettyFormat());
            xmlOutput.output(doc, new FileWriter((String)path+"performances.xml",true)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T20:53:24.707

你不能做你想做的事，因为 xml 格式不允许这样做。xml 文档具有*单个*根级别标记。即使您确实省略了 xml 标头（这当然可以使用大多数 xml 工具），您的 xml 文件也将无效（我假设您需要从标准 xml 解析器中读取此文件）。

您的文件将如下所示：

```
<?xml version="1.0"?>
<performances>
  <update/>
  <!-- ... more xml elements ... -->
</performances>
<performances>
  <update/>
  <!-- ... appended xml elements ... -->
</performances> 
```

这*不是*一个有效的 xml 文件。

为了“附加”到 xml 文件，您必须读取现有文件并使用其他节点*完全重写它。*一种简单的方法是使用 DocumentBuilder 将现有文件读入 DOM，将新节点添加到现有根元素，然后重新编写整个 xml 文件。

如果您*确实*需要以可附加的方式写入数据，那么我建议使用 xml 以外的文件格式（例如某种简单的分隔平面文件，例如 CSV）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T19:44:52.193

[您是否尝试过在 Format 上](http://www.jdom.org/docs/apidocs/org/jdom2/output/Format.html#setOmitDeclaration%28boolean%29)使用此方法，然后[在 XMLOutputter 上使用此构造函数](http://www.jdom.org/docs/apidocs/org/jdom2/output/XMLOutputter.html#XMLOutputter%28org.jdom2.output.Format%29)？

```
 Element performances = new Element("performances");
    Document doc = new Document(performances);
    XMLOutputter xmlOutput = new XMLOutputter();

    Format format = Format.getPrettyFormat();
    format.setOmitDeclaration(true);
    xmlOutput.setFormat(format);

    StringWriter writer = new StringWriter();
    xmlOutput.output(doc, writer);
    System.out.println(writer); 
```

给出`<performances />`没有 XML 声明的标准输出。

# android-emulator - 网络连接未在模拟器中运行，在 DDMS 中出现此错误，谁能帮助我

> ID：11469036
> 
> 赞同：0
> 
> 时间：2012-07-13T10:51:41.463
> 
> 标签：android-emulator

得到以下引用：

```
07-12 15:59:48.697: D/AndroidRuntime(2280): Shutting down VM
07-12 15:59:48.697: W/dalvikvm(2280): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-12 15:59:48.737: E/AndroidRuntime(2280): FATAL EXCEPTION: main
07-12 15:59:48.737: E/AndroidRuntime(2280): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.android.networkusage/com.example.networkusage.NetworkActivity}: java.lang.ClassNotFoundException: com.example.networkusage.NetworkActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.android.networkusage-1.apk]
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.app..ActivityThread.access$1500(ActivityThread.java:117)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.os.Looper.loop(Looper.java:123)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at java.lang.reflect.Method.invokeNative(Native Method)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at java.lang.reflect.Method.invoke(Method.java:507)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at dalvik.system.NativeStart.main(Native Method)
07-12 15:59:48.737: E/AndroidRuntime(2280): Caused by: java.lang.ClassNotFoundException: com.example.networkusage.NetworkActivity in loader dalvik..system.PathClassLoader[/data/app/com.example.android.networkusage-1.apk]
07-12 15:59:48.737: E/AndroidRuntime(2280):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at java.lang.ClassLoader.loadClass(ClassLoader..java:511)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-12 15:59:48.737: E/AndroidRuntime(2280):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
07-12 15:59:48.737: E/AndroidRuntime(2280):     ... 11 more
07-12 15:59:50.997: I/Process(2280): Sending signal. PID: 2280 SIG: 9 
```

有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:11:27.483

例外是`Caused by: java.lang.ClassNotFoundException: com.example.networkusage.NetworkActivity`

您将需要检查您的 Android 项目中的 Java 类和包名称。这很可能是由于未在`AndroidManifest.xml`文件中定义 Activity 类引起的。

可以发一下你的`AndroidManifest.xml`文件吗？

# php - 在php中新添加的内容上添加小图像标签

> ID：11469037
> 
> 赞同：0
> 
> 时间：2012-07-13T10:51:43.837
> 
> 标签：php, html

实际上，我想为最新添加的游戏在另一个图像上添加一个小 gif 图像。意味着我有这样的游戏网站[http://www.girlsgogames.com/](http://www.girlsgogames.com/) .. 我想在我最近上传的游戏的图像上添加新标签。意味着无论我上传最新的 5 款游戏，对于那些我想自动添加新标签的游戏​​......意味着每当我上传新的 5 款游戏时，新标签都会出现在最新游戏上。我想使用 php mysql 来实现这一点。在这种情况下，任何人都可以帮助我。我添加了小图像以供参考。![在此处输入图像描述](../Images/f9768125edc1a7c50801e3c5a996f2e3.png)

我已经添加了这段代码。请检查一次..

```
 <div style="width:980px; float:left">
                <div class="upperLeftCorner980"></div>
                <div class="upperCenter980">
                  <div style="text-align:left">Today's Top <?php echo NEW_GAME_TITLE;?>
                  </div>
                </div>
                <div class="upperRightCorner980"></div>
                <div style="clear:both"></div>
                <div class="centerLeft980">
                  <div class="centerRight980">
                    <div class="boxContentDiv" style="height:100%">
                    <div style="width:373px; height:309px; float:left; margin-left:10px; padding-top:30px">
                    <center>
                    <script type="text/javascript"><!--
google_ad_client = "pub-xxxxxxxxxxxx";
/* 336x280, created 1/21/11 hope page new games */
google_ad_slot = "xxxxxxxxxxxx";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

                    </center>
                    </div>
                        <div style='padding:3px'>
                            <?php
                       $gameQuery = mysql_query ("SELECT * FROM games ORDER BY id DESC LIMIT 16");

                                while ($gameRow = mysql_fetch_assoc($gameQuery)){
                                                                    if ($_SESSION['lang'] == 'fr'){
                                            $description = $gameRow['description_fr'];
                                        }else{
                                            $description = $gameRow['description'];
                                        }

            ?>
<div style='float:left; width:180px; height:160px; margin:5px;' title="<div style='font-size:12px; font-weight:bold'><b>Description:</b> <?php echo $description;?></div><div style='font-size:12px; font-weight:bold'><b><?php echo GAME_TIME_PLAYED_TITLE;?>:</b> <?php echo $gameRow['time_played'];?></div>" class='tooltip'>

<?php
    $x = 0;
foreach($gameRow as $game) { 
```

//下面是第 65 行我得到错误的地方..正好`echo "<div class=''gameBGBox'>"`

```
echo "<div class='gameBGBox'><a href='<?php echo $confRow['sitePath'];?>play/<?php echo str_replace(' ','_',$gameRow['name']);?>'><img src='<?php echo $confRow['sitePath'];?>games/images/<?php echo $gameRow['img_100x75'];?>' width='180' height='135' border='2' alt='<?php echo $gameRow['name'];?>'/></a>";
    if($x<5){
    echo '<div class="new"></div>';
    }
    echo "</div>";
    $x++;
}
?>               </div>
                            <?php } ?>
                            <div style='clear:both'></div>
                           </div>
                    </div>
                  </div>
                </div>
                <div class="lowerLeftCorner980"></div>
                <div class="lowerCenter980"></div>
                <div class="lowerRightCorner980"></div>
                <div style="clear:both"></div>
                <div style='height:5px'></div>
                <!-- Separator -->
        </div> 
```

我收到此错误：解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，在第 65 行的 C:\xampp\htdocs\myproject\main.php 中需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

![在此处输入图像描述](../Images/f38ac3deb4ec7a704eb38c8038cb2f78.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:54:51.213

你可以这样做：

```
<?php 
for($x=0;$x<count($GAMES_ARRAY);$x++) {
?>
<div class="game-images">
     <img src="cover.png"/><? if ($x<5) {?><img src="new.gif" style="position: relative; left: 10px; z-index: 1;"/><? } ;?>
</div>
<? } ?> 
```

所以“new.gif”将覆盖在cover.png上。

编辑：你必须玩一点“左”和“顶”值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:12:48.790

按 id 检索列表排序：

```
select * from games order by id desc 
```

然后循环遍历它：

```
<ul id="game_list">
    <?php
        $count = 0;

        foreach($games as $game) {
            echo '<li><img src="' . $game['img_location'] . '" />';

            if($count < 5) {
                echo '<div class="new"></div>';
            }

            echo '</li>';
            $count++;
        }
    ?>
</ul> 
```

和CSS：

```
#game_list {
    list-style: none;
}

#game_list li {
    position: relative;
    z-index: 1;
}

.new {
    position: absolute;
    top: 0;
    right: 0;
    width: 80px; /* w of new banner img */
    height: 80px; /* h of new banner img */
    background: url(../img/new_banner_img.png) 0 0 no-repeat;
    z-index: 2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:55:28.660

您可以在 CSS 中使用 ::before 和 ::after 等伪元素来完成此操作。[这](http://girliemac.com/blog/2012/03/24/making-chupa-chups-using-css3-pseudo-elements/)是一个关于如何做到这一点的小教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:14:12.770

试试这个代码，它将在所有浏览器中工作

使用 z-index 将一个图像覆盖在另一个图像上

```
<div >
     <img src="banner.jpg" style='position:absolute; z-index=0;'/>
     <img src="new.gif" style="position: fixed; right: 10px; z-index: 1;"/>
</div> 
```

最新五场比赛的更新

使用查询使游戏按降序排列，然后如果计数小于 5，则覆盖 new.gif，否则不覆盖。

询问

```
select * from GameTable order by id desc 
```

# xml - XSL 分组输出

> ID：11469043
> 
> 赞同：2
> 
> 时间：2012-07-13T10:52:08.830
> 
> 标签：xml, xslt, xslt-1.0

我有一个带有记录的 XML，一些记录相互关联，因此，我想在输出中将它们组合在一起。

XML:

```
<Records>
   <Record id="1" group="10" />
   <Record id="2" group="20" />
   <Record id="3" group="20" />
   <Record id="4" group="20" />
</Records> 
```

目前，我显示

```
<span>1</span><span>2</span><span>3</span><span>4</span> 
```

我想显示的是（基于具有相同组的记录）

```
<span>1</span><span>2-4</span> 
```

我已经研究过使用`preceding-sibling::Record/@group`来查看分组是否在`Record`s 的迭代之间发生了变化，但我正在努力弄清楚如何实现`2-4`我需要的分组。

到目前为止，这是我所做的，其中穿插了一些评论来说明我正在尝试做的事情：

```
<xsl:for-each select="Records/Record">
   <xsl:if test="@group != preceding-sibling::Record/@group">
      <!-- obviously here we need 2-4...somehow? -->
      <span><xsl:value-of="@id" /></span>
   </xsl:if>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:33:24.140

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kFollowing" match="Record"
  use="generate-id(preceding-sibling::*
                         [not(@group = current()/@group)
                          ][1])"/>

 <xsl:template match="/*">
       <xsl:apply-templates mode="makeGroup" select=
       "Record[not(@group = preceding-sibling::*[1]/@group)]"/>
 </xsl:template>

 <xsl:template match="Record" mode="makeGroup">
  <xsl:variable name="vGroup"
    select="key('kFollowing', generate-id(preceding-sibling::*[1]))"/>
  <span>
   <xsl:value-of select="$vGroup[1]/@id"/>
   <xsl:if test="$vGroup[2]">
    <xsl:value-of select="concat('-', $vGroup[last()]/@id)"/>
   </xsl:if>
  </span>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Records>
    <Record id="1" group="10" />
    <Record id="2" group="20" />
    <Record id="3" group="20" />
    <Record id="4" group="20" />
</Records> 
```

**产生想要的正确结果**：

```
<span>1</span><span>2-4</span> 
```

**说明**：

1.  这是使用键定义组成组的所有相邻记录元素的*位置分组。*

2.  这是一种*有效*的（次线性）算法，因为使用了密钥。使用兄弟轴的算法通常`O(N^2)`是时间复杂度的二次方，如果兄弟的总数`N`很大，则可能会太慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:10:47.743

如果你的节点总是连续的，你可以使用一些简单的东西，比如

```
<xsl:template match="/">
    <xsl:for-each select="Records/Record">
        <xsl:if test="position() = 1 or @group != preceding-sibling::Record[1]/@group">
            <span><xsl:value-of select="@id" />
            <xsl:if test="following-sibling::Record/@group = @group">
                <xsl:variable name="following" select="following-sibling::Record[@group = ./@group]"/>
             - <xsl:value-of select="$following[count($following)]/@id"/>
            </xsl:if>
            </span>
        </xsl:if>
    </xsl:for-each>
</xsl:template> 
```

但如果不是，您可能需要一个递归函数来提出更强大的东西并手动计算节点

# java - 如何在达到限制时通过删除最旧的条目来限制地图的最大大小

> ID：11469045
> 
> 赞同：36
> 
> 时间：2012-07-13T10:52:14.773
> 
> 标签：java, caching, collections, map

我想要一个具有最大尺寸的 Map 实现。我想将其用作缓存，因此一旦达到限制，就会删除最旧的条目。

我也不想引入对任何 3rd 方库的依赖。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-13T11:36:54.057

您可以像这样使用[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html#removeEldestEntry%28java.util.Map.Entry%29)

您可以通过 LRU 或 FIFO 删除。

```
public static <K, V> Map<K, V> createLRUMap(final int maxEntries) {
    return new LinkedHashMap<K, V>(maxEntries*10/7, 0.7f, true) {
        @Override
        protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
            return size() > maxEntries;
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:52:15.177

这是一个仅包装普通 HashMap 并将方法调用委托给它的实现。唯一的区别是地图不能超过最大容量。

```
import java.util.Collection;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.Map;
import java.util.Queue;
import java.util.Set;

public class CacheMap<K, V> implements Map<K, V> {

    private final Map<K, V> delegate = new HashMap<K, V>();
    private Queue<K> keyInsertionOrder = new LinkedList<K>();
    private final int maxCapacity;

    public CacheMap(int maxCapacity) {
        if (maxCapacity < 1) {
            throw new IllegalArgumentException(
                    "Capacity must be greater than 0");
        }
        this.maxCapacity = maxCapacity;
    }

    @Override
    public void clear() {
        delegate.clear();
    }

    @Override
    public boolean containsKey(Object key) {
        return delegate.containsKey(key);
    }

    @Override
    public boolean containsValue(Object value) {
        return delegate.containsValue(value);
    }

    @Override
    public Set<java.util.Map.Entry<K, V>> entrySet() {
        return delegate.entrySet();
    }

    @Override
    public boolean equals(Object o) {
        return delegate.equals(o);
    }

    @Override
    public V get(Object key) {
        return delegate.get(key);
    }

    @Override
    public int hashCode() {
        return delegate.hashCode();
    }

    @Override
    public boolean isEmpty() {
        return delegate.isEmpty();
    }

    @Override
    public Set<K> keySet() {
        return delegate.keySet();
    }

    @Override
    public V put(K key, V value) {
        V previous = delegate.put(key, value);
        keyInsertionOrder.remove(key);
        keyInsertionOrder.add(key);

        if (delegate.size() > maxCapacity) {
            K oldest = keyInsertionOrder.poll();
            delegate.remove(oldest);
        }
        return previous;
    }

    @Override
    public void putAll(Map<? extends K, ? extends V> m) {
        for (K key : m.keySet()) {
            put(key, m.get(key));
        }
    }

    @Override
    public V remove(Object key) {
        keyInsertionOrder.remove(key);
        return delegate.remove(key);
    }

    @Override
    public int size() {
        return delegate.size();
    }

    @Override
    public Collection<V> values() {
        return delegate.values();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T10:55:49.267

我使用个人课程来满足您的需求。一旦地图已满，插入时最旧的访问对象将被删除。它使用哈希图和链表。

您有两种阅读方法：

*   peek（不会将对象标记为最近访问过的对象）
*   get（将对象标记为最近访问过的，因此可以暂时阻止将其删除）

这是课程（评论被删除，因为它们是法语）：

```
import java.util.HashMap;
import java.util.Map;

public final class HashCache<K, T> {

    public interface Disposer<T> {
        void dispose(T t);
    }

    class Maillon {
        public K cle;

        public Maillon precedent;
        public Maillon suivant;
        public T contenu;
    }

    private Map<K, Maillon> barrette = new HashMap<K, Maillon>();

    private Maillon sommet;
    private Maillon fond;
    private int tailleCache = 100;

    private Disposer<T> disposer;

    @SuppressWarnings("unchecked")
    public HashCache(int tailleCache) {
        if (tailleCache>2) this.tailleCache = tailleCache;
        Maillon[] maillons = new HashCache.Maillon[tailleCache];
        sommet = maillons[0] = new Maillon();
        for (int i=1; i<tailleCache; i++) (maillons[i-1].suivant = maillons[i] = new Maillon()).precedent = maillons[i-1];
        fond = maillons[tailleCache-1];
        //check();
    }

    public Object getLastRead() {
        return sommet.contenu;
    }

    public Object peek(K cle) {
        Object m = barrette.get(cle);
        if (m==null) return null;
        return ((Maillon) m).contenu;
    }

    public synchronized void remove(K cle) {
        Maillon m = (Maillon) barrette.remove(cle);
        if (m!=null) {
            if (disposer!=null) disposer.dispose(m.contenu);
            m.contenu = null;
            m.precedent.suivant = m.suivant;
            m.suivant.precedent = m.precedent;
            fond.suivant = m;
            m.precedent = fond;
            fond = m;
        }
    }

    public synchronized Object put(K cle, T valeur) {
        if (cle==null) return valeur;

        if (fond.cle!=null) {
            barrette.remove(fond.cle);
            if (disposer!=null) disposer.dispose(fond.contenu);
        }
        fond.cle = cle;
        barrette.put(cle, fond);
        fond.contenu = valeur;
        fond.suivant = sommet;
        sommet.precedent = fond;
        sommet = fond;
        fond = fond.precedent;
        fond.suivant = null;

        return valeur;
    }

    public int computeDepth(K cle) {
        Maillon m = sommet;
        for (int i=0; i<tailleCache; i++) {
            if (cle.equals(m.cle)) return i;
            m=m.suivant;
            if (m==null) {
                break;
            }
        }
        return -1;
    }

    @SuppressWarnings("unchecked")
    public synchronized void removeAll() {
        if (disposer!=null) {
            for (Maillon m : barrette.values()) {
                disposer.dispose(m.contenu);
            }
        }
        barrette = new HashMap<K, Maillon>();
        Maillon[] t = new HashCache.Maillon[tailleCache];
        sommet = t[0] = new Maillon();
        for (int i=1; i<tailleCache; i++) (t[i-1].suivant = t[i] = new Maillon()).precedent = t[i-1];
        fond = t[tailleCache-1];
    }

    public synchronized T get(K cle) {
        Maillon m = barrette.get(cle);
        if (m == sommet) return m.contenu;
        if (m == null) return null;
        if (m == fond) {
            m.precedent.suivant = null;
            m.suivant = sommet;
            sommet.precedent = m;
            sommet = m;
            fond = m.precedent;
            m.precedent = null;
        } else {
            m.suivant.precedent = m.precedent;
            m.precedent.suivant = m.suivant;
            m.suivant = sommet;
            sommet.precedent = m;
            sommet = m;
        }
        return m.contenu;
    }

    public Disposer<T> getDisposer() {
        return disposer;
    }

    public void setDisposer(Disposer<T> disposer) {
        this.disposer = disposer;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:15:10.710

如果这*不是*功课，我强烈建议使用第三方库来避免设计、测试和维护自己的解决方案的痛苦。

例如，参见[Guava MapMaker](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MapMaker.html)机制。

# c# - 在 XML 中写出变音符号？

> ID：11469049
> 
> 赞同：2
> 
> 时间：2012-07-13T10:52:37.893
> 
> 标签：c#, .net, xslt, utf-8

我需要写“&#D;” 相当于 xml 的变音字符。例如，如果字符串是“für”，那么预期的输出是“ `f&#252;r`” `&#252;`，相当于 ü

这是我目前拥有的代码：

```
private bool WriteOutXMLFile(string xsltFileName, XsltArgumentList argsList, string outputFile)
    {

            XslCompiledTransform transform = new XslCompiledTransform(true);
            transform.Load(xsltFileName);

            using(StreamWriter sw = new StreamWriter(outputFile,false,Encoding.UTF8))
            {
                transform.Transform(this.InputFilePath, argsList, sw);
            }

            return true;
        } 
```

这是 XSLT：

```
<?xml version="1.0" encoding="UTF-8" ?>

 <xsl:stylesheet version="1.0"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:ms="urn:schemas-microsoft-com:xslt"
  xmlns:dt="urn:schemas-microsoft-com:datatypes">
  <xsl:output method="xml" />

<xsl:param name="InsideSales1"></xsl:param>
<xsl:param name="InsideSales2"></xsl:param>
<xsl:template match="@*|node()">
<xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>

 <!--Project output nodes-->
 <!--Calculation Number-->
 <xsl:template match="kalkulationsnummer" >
 <xsl:element name="kalkulationsnummer">
  <xsl:value-of select="$CalculationNumber" />
</xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

出于空间考虑，我删除了很多参数。

有人可以帮忙吗？

问候。

大家好，我使用 System.Web.HttpUtility.HtmlEncode 方法在将变音符号添加到 argsList 时获取所需的值。这是一种更快的做事方式，但它可能不起作用，因为它没有针对我的要求进行测试。更好的方法是使用本文中建议的字节数组。感谢所有回复的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:14:13.330

**只需使用**：

```
<xsl:output encoding="us-ascii"/> 
```

在您的 C# 代码中尝试：

```
using(StreamWriter sw = new StreamWriter(outputFile,false,Encoding.ASCII)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:28:46.960

首先，按照 Dimitre 的建议，使用 us-ascii 作为 xsl:output 编码。其次，将转换输出发送到字节流目的地，而不是字符流目的地。如果您使用字符流目标（Writer），XSLT 处理器不会将字符编码为字节，它将把它留给 Writer，而 Writer 对 XML 或 XML 如何转义不可编码的字符一无所知。

# wpf - 当鼠标不在两个元素上时，Wpf Reactive Extensions 会做出反应

> ID：11469050
> 
> 赞同：1
> 
> 时间：2012-07-13T10:52:45.393
> 
> 标签：wpf, mouseevent, system.reactive

我正在尝试更多地了解反应式扩展，但我发现很难找到一个真实世界的例子，所以我可以训练自己。

几天前，我发现自己正在编写一些`ToggleButton`Mouse Enter、Leave Checked Unchecked 事件，现在我想知道是否可以使用响应式扩展来简化它。

这是目标：

给定 a `ToggleButton`，当悬停在它上面并且它没有被选中时，应该显示一个弹出窗口，如果鼠标不在按钮或弹出窗口上，则弹出窗口应该关闭

如果我按下切换按钮（选中），弹出窗口应保持打开状态，直到取消选中按钮（忽略鼠标输入离开事件），之后鼠标悬停行为应再次启动。

如果弹出窗口在外部关闭，则应自动取消选中切换按钮。（我知道这可以使用一些绑定和数据触发器来实现，但我想练习我的反应式扩展逻辑）

现在我有以下内容：

```
 private void ToggleButton_MouseEnter(object sender, System.Windows.Input.MouseEventArgs e)
    {
        if (!ToggleButton.IsChecked ?? false)
            Popup.IsOpen = true;
    }

    private void ToggleButton_MouseLeave(object sender, System.Windows.Input.MouseEventArgs e)
    {
        if (!Popup.Child.IsMouseOver && !(TaskManagerTab.IsChecked ?? false))
        {
            Popup.IsOpen = false;
            return;
        }

        popup.Child.MouseLeave +=  Popup_MouseLeave;
    }

    void Popup_MouseLeave(object sender, System.Windows.Input.MouseEventArgs e)
    {
        Popup.Child.MouseLeave -=  Popup_MouseLeave;

        if (!ToggleButton.IsMouseOver && !(ToggleButton.IsChecked ?? false))
        {
            Popup.IsOpen = false;
            return;
        }
    }

    private void ToggleButton_CheckedChanged(object sender, System.Windows.RoutedEventArgs e)
    {
        Popup.IsOpen = ToggleButton.IsChecked ?? false;

        if (Popup.IsOpen)
            Popup.Closed += Popup_Closed;
    }

    void Popup_Closed(object sender, System.EventArgs e)
    {
        Popup.Closed -= Popup_Closed;

        ToggleButton.IsChecked = false;
    }
} 
```

我想要一个粗略的版本，但我真的不知道如何开始。

谢谢！

**更新：**

我确实想出了这个，但我不确定性能，如果未选中切换按钮，我似乎无法重复。

```
var mouseEnterSaveBtn = Observable.FromEventPattern<MouseEventHandler, MouseEventArgs>(h => SaveBtn.MouseEnter += h,
                                                                       h => SaveBtn.MouseEnter -= h);

        var mouseLeaveList = Observable.FromEventPattern<MouseEventHandler, MouseEventArgs>(h => popup.MouseLeave += h,
                                                                       h => popup.MouseLeave -= h);

        var toggleBtnChecked =
            Observable.FromEventPattern<RoutedEventHandler, RoutedEventArgs>(h => SaveBtn.Checked += h,
                                                                            h => SaveBtn.Checked -= h);

        var allCloseEvents = mouseLeaveList.Merge(mouseLeaveList);

        mouseEnterSaveBtn.TakeUntil(toggleBtnChecked).Subscribe(pattern =>
                                                                    {
                                                                        popup.Visibility = Visibility.Visible;

                                                                        allCloseEvents.TakeUntil(toggleBtnChecked).
                                                                            Subscribe(eventPattern =>
                                                                                          {
                                                                                              if (!popup.IsMouseOver && !popup.IsMouseOver)
                                                                                                  popup.Visibility = Visibility.Collapsed;
                                                                                          });

                                                                    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T18:04:51.943

这非常接近我会做的事情。不过，我建议的一件事是，每当您觉得应该订阅观察者中的可观察对象（注意您嵌套的订阅调用）时，您可能可以组合这些可观察对象*然后*订阅。

```
var mouseIn = Observable.FromEventPattern<MouseEventHandler, MouseEventArgs>
    (
        h => SaveBtn.MouseEnter += h,
        h => SaveBtn.MouseEnter -= h
    );

var mouseOut = Observable.FromEventPattern<MouseEventHandler, MouseEventArgs>
    (
        h => popup.MouseLeave += h,
        h => popup.MouseLeave -= h
    );

var isMouseOver = mouseIn
    .Select((o,e) => true)
    .Merge(mouseOut
        .Select((o,e) => false));

var toggleBtnChecked = Observable.FromEventPattern<RoutedEventHandler, RoutedEventArgs>
    (
        h => SaveBtn.Checked += h,
        h => SaveBtn.Checked -= h
    )
    .Select((o,e) => (o as ToggleButton).Checked);

var shouldShow = isMouseOver
    .DistinctUntilChanged()
    .CombineLatest(toggleBtnChecked, (mouse, pressed) => pressed || mouse);

shouldShow.Subscribe
(
    shouldBeVisible =>
    {
        popup.Visibility = shouldBeVisible ? Visibility.Visible : Visibility.Collapsed;
    }
); 
```

# php - Heroku 远程 MongoDB 与 php 连接

> ID：11469055
> 
> 赞同：2
> 
> 时间：2012-07-13T10:53:06.673
> 
> 标签：php, mongodb, heroku

从 Heroku facebook 应用程序连接到远程 mongoDb 时出现错误

```
Class 'Mongo' not found 
```

我猜mongo驱动程序不支持开箱即用？我怎样才能在heroku上安装它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:21:36.010

您只需要在您的应用程序中安装 mongo 扩展程序

> 使用您的应用程序供应 Mongo 驱动程序。你可以在这里下载：
> 
> [https://github.com/wuputah/heroku-libraries/raw/master/php/mongo/mongo.so](https://github.com/wuputah/heroku-libraries/raw/master/php/mongo/mongo.so) 将其添加到“ext”之类的文件夹中。
> 
> 将 php.ini 文件添加到应用程序的根目录：
> 
> extension_dir = "/app/www/ext/" extension=mongo.so

在这里找到解决方案： [https ://gist.github.com/1288447](https://gist.github.com/1288447)

# blackberry - 在 Web 浏览器中重用选项卡

> ID：11469057
> 
> 赞同：2
> 
> 时间：2012-07-13T10:53:14.377
> 
> 标签：blackberry, browser

我正在使用以下代码在 Web 浏览器中加载给定的 URL；

```
BrowserSession browserSession = Browser.getDefaultSession();
browserSession.displayPage(url); 
```

问题是，每当我运行此代码时，Web 浏览器都会在新选项卡中打开 URL（即使 URL 相同）。我想重用现有选项卡或至少关闭以前打开的选项卡。简而言之，我不想在触发多个 URL 后最终拥有一堆标签。

如果有任何方法可以实现这一点，请指导我。我不想使用`BrowserField`.

我在用;

*   黑莓 Eclipse JDE 1.5
*   目标黑莓操作系统 4.5
*   在 Wifi 网络上的 BlackBerry Bold 9900 上测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:57:18.533

我认为唯一一种可能的解决方案是使用`BrowserField`or来在您的应用程序中显示页面`RenderingApplication`。JDE 或 eclipse 插件中包含可用的示例。

# java - 将英语数字转换为阿拉伯语的最佳方法

> ID：11469058
> 
> 赞同：21
> 
> 时间：2012-07-13T10:53:14.820
> 
> 标签：java, numbers

> **可能重复：**
> [将字符串转换为 java 中的另一个语言环境](https://stackoverflow.com/questions/5316131/convert-string-to-another-locale-in-java)

我想将`java` `String`包含英文数字的数字转换为阿拉伯数字，所以我做了这个

```
int  arabic_zero_unicode= 1632;
String str = "13240453";
StringBuilder builder = new StringBuilder();

for(int i =0; i < str.length(); ++i ) {
    builder.append((char)((int)str.charAt(i) - 48+arabic_zero_unicode));
}

System.out.println("Number in English : "+str);
System.out.println("Number In Arabic : "+builder.toString() ); 
```

输出

```
Number in English : 13240453
Number In Arabic : ١٣٢٤٠٤٥٣ 
```

还有另一种更有效的方法吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-13T11:23:19.673

与长度为 3036 的字符串相比，这使您的版本速度提高了 5 倍。这还会检查以确保您只更改数字。如果没有 if/else 检查，它的加速大约是 6 倍。

如果字符不正确/放错地方，请原谅我。我不得不从另一个来源找到其中一些。

```
char[] arabicChars = {'٠','١','٢','٣','٤','٥','٦','٧','٨','٩'};
StringBuilder builder = new StringBuilder();
for(int i =0;i<str.length();i++)
{
    if(Character.isDigit(str.charAt(i)))
    {
        builder.append(arabicChars[(int)(str.charAt(i))-48]);
    }
    else
    {
        builder.append(str.charAt(i));
    }
}
System.out.println("Number in English : "+str);
System.out.println("Number In Arabic : "+builder.toString() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:30:36.237

您可以使用几个 Java 类以高级方式完成此任务，而无需对 Unicode 表结构做出明确假设。例如，您可以查看[DecimalFormatSymbols](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormatSymbols.html)。但是，这个想法将与您提供的代码示例相同。Java 库中的语言环境转换方法或类只会呈现数字的显示方式，它们不会以微不足道的方式转换数字符号。

# sql - Postgresql - 将整行作为数组返回

> ID：11469059
> 
> 赞同：6
> 
> 时间：2012-07-13T10:53:17.207
> 
> 标签：sql, postgresql

有没有办法将以下结果转换为数组？

```
select pg_tables from pg_tables 
```

这将只返回一列，但数据类型不是数组。

编辑：我正在使用 PostgreSql 9.1.4

更新：我需要等效于以下 SQL 语句，无需编写列名，适用于每个表：

```
select 
    string_to_array(
    schemaname || '|' ||
    tablename || '|' || 
    tableowner || '|' ||
    coalesce(tablespace,'') || '|' ||
    hasindexes || '|' ||
    hasrules || '|' ||
    hastriggers
    ,'|')
from 
    pg_tables 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T11:48:41.087

可能是这样的：[http ://www.sqlfiddle.com/#!1/d41d8/364](http://www.sqlfiddle.com/#!1/d41d8/364)

```
select translate(string_to_array(x.*::text,',')::text,'()','')::text[] 
from pg_tables as x 
```

它是如何工作的（由内而外），5 个步骤：

第一个：

```
select x.*::text from pg_tables as x; 
```

样本输出：

```
|                                                            X |
----------------------------------------------------------------
|                    (pg_catalog,pg_statistic,postgres,,t,f,f) |
|                         (pg_catalog,pg_type,postgres,,t,f,f) | 
```

第二：

```
select string_to_array(x.*::text,',') from pg_tables as x; 
```

样本输出：

```
|                           STRING_TO_ARRAY |
---------------------------------------------
| (pg_catalog,pg_statistic,postgres,,t,f,f) |
|      (pg_catalog,pg_type,postgres,,t,f,f) | 
```

第三：

```
select string_to_array(x.*::text,',')::text from pg_tables as x; 
```

样本输出：

```
|                               STRING_TO_ARRAY |
-------------------------------------------------
| {(pg_catalog,pg_statistic,postgres,"",t,f,f)} |
|      {(pg_catalog,pg_type,postgres,"",t,f,f)} | 
```

第四：

```
select translate( string_to_array(x.*::text,',')::text, '()', '') from pg_tables as x 
```

样本输出：

```
|                                   TRANSLATE |
-----------------------------------------------
| {pg_catalog,pg_statistic,postgres,"",t,f,f} |
|      {pg_catalog,pg_type,postgres,"",t,f,f} | 
```

最后：

```
select translate( string_to_array(x.*::text,',')::text, '()', '')::text[] 
from pg_tables as x 
```

样本输出：

```
|                               TRANSLATE |
-------------------------------------------
| pg_catalog,pg_statistic,postgres,,t,f,f |
|      pg_catalog,pg_type,postgres,,t,f,f | 
```

现场测试：[http ://www.sqlfiddle.com/#!1/d41d8/373](http://www.sqlfiddle.com/#!1/d41d8/373)

为了证明它有效：

```
with a as 
(
  select translate( string_to_array(x.*::text,',')::text, '()', '')::text[] as colArray 
  from pg_tables as x
)
select row_number() over(), unnest(colArray)
from a; 
```

样本输出：

```
| ROW_NUMBER |                  UNNEST |
----------------------------------------
|          1 |              pg_catalog |
|          1 |            pg_statistic |
|          1 |                postgres |
|          1 |                         |
|          1 |                       t |
|          1 |                       f |
|          1 |                       f |
|          2 |              pg_catalog |
|          2 |                 pg_type |
|          2 |                postgres |
|          2 |                         |
|          2 |                       t |
|          2 |                       f |
|          2 |                       f | 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T14:44:20.270

另一种方法，使用`hstore`类型，这更健壮，可以解决字段值中的逗号

添加`hstore`contrib 类型，执行一次：

```
CREATE EXTENSION hstore; 
```

创建这个函数：

```
create or replace function hstore_to_array(r hstore) returns text[] as
$$
begin
    return array(select (each(r)).value);
end;
$$ language 'plpgsql'; 
```

然后试试这个：

```
select hstore_to_array(hstore(r)) from pg_tables r limit 10; 
```

输出：

```
 hstore_to_array                  
---------------------------------------------------
 {f,pg_statistic,t,pg_catalog,postgres,NULL,f}
 {f,pg_type,t,pg_catalog,postgres,NULL,f}
 {f,pg_attribute,t,pg_catalog,postgres,NULL,f}
 {f,xx,t,public,postgres,NULL,f}
 {f,yy,t,public,postgres,NULL,f}
 {f,tblx,f,public,postgres,NULL,f}
 {f,pg_authid,t,pg_catalog,postgres,pg_global,f}
 {f,pg_proc,t,pg_catalog,postgres,NULL,f}
 {f,pg_class,t,pg_catalog,postgres,NULL,f}
 {f,pg_database,t,pg_catalog,postgres,pg_global,f}
(10 rows) 
```

另一个例子：

```
create table Beatle(firstname text, middlename text, lastname text);

insert into Beatle(firstname, middlename, lastname) values
('John','Winston','Lennon'),
('Paul','','McCartney'),
('George',NULL,'Harrison'),
('Ringo','my passions are ring,drum and shades','Starr'); 
```

询问：

```
select hstore_to_array(hstore(b)) from Beatle b; 
```

输出：

```
 hstore_to_array                    
------------------------------------------------------
 {Lennon,John,Winston}
 {McCartney,Paul,""}
 {Harrison,George,NULL}
 {Starr,Ringo,"my passions are ring,drum and shades"}
(4 rows) 
```

正如我们所看到的，即使是带有逗号的值也被正确保留了。

不过，精明的读者会注意到上述输出中的某些内容。hstore 函数不会保留字段的原始顺序。为了保存它，把表放在子查询上，即

```
select hstore_to_array(hstore(b)) from (select * from Beatle) as b 
```

输出：

```
 hstore_to_array                    
------------------------------------------------------
 {John,Winston,Lennon}
 {Paul,"",McCartney}
 {George,NULL,Harrison}
 {Ringo,"my passions are ring,drum and shades",Starr}
(4 rows) 
```

* * *

使用的参考资料：http: [//okbob.blogspot.com/2009/10/dynamic-access-to-record-fields-in.html](http://okbob.blogspot.com/2009/10/dynamic-access-to-record-fields-in.html)

下一个要观看的功能：[http ://www.postgresonline.com/journal/archives/254-PostgreSQL-9.2-Preserving-column-names-of-subqueries.html](http://www.postgresonline.com/journal/archives/254-PostgreSQL-9.2-Preserving-column-names-of-subqueries.html)

* * *

**更新**

看起来通过子查询保留列排序只是侥幸。我尝试进行排序（例如在名字上）。

```
select hstore_to_array(hstore(b)) 
from (select * from Beatle order by firstname) as b 
```

输出不再保留原始列顺序：

```
 hstore_to_array                    
------------------------------------------------------
 {Harrison,George,NULL}
 {Lennon,John,Winston}
 {McCartney,Paul,""}
 {Starr,Ringo,"my passions are ring,drum and shades"}
(4 rows) 
```

将进一步调查如何保留原始列顺序。

* * *

**更新**

如果需要对表进行排序，为了保留原始列的顺序，`ORDER BY`把子查询放在外面：

```
select hstore_to_array(hstore(b)) 
from (select * from Beatle) as b order by firstname; 
```

输出：

```
 hstore_to_array                    
------------------------------------------------------
 {George,NULL,Harrison}
 {John,Winston,Lennon}
 {Paul,"",McCartney}
 {Ringo,"my passions are ring,drum and shades",Starr}
(4 rows) 
```

现在是正确的。

从内存表中选择也可以：

```
select hstore_to_array(hstore(b)) 
from 
(
    select * from 
    (values
        ('John',1940,'Winston','Lennon'),
        ('Paul',1942,'','McCartney'),
        ('George',1943,NULL,'Harrison'),
        ('Ringo',1940,'my passions are ring,drum and shades','Starr')
    ) as x(Firstname,BirthYear,Middlename,Lastname)
) as b     
order by BirthYear desc, Firstname desc 
```

输出：

```
 hstore_to_array                      
-----------------------------------------------------------
 {George,1943,NULL,Harrison}
 {Paul,1942,"",McCartney}
 {Ringo,1940,"my passions are ring,drum and shades",Starr}
 {John,1940,Winston,Lennon}
(4 rows) 
```

* * *

**更新**

事实证明功能`hstore_to_array`已经是内置功能，只需使用`avals`：[http ://www.postgresql.org/docs/9.1/static/hstore.html](http://www.postgresql.org/docs/9.1/static/hstore.html)

```
select 
    avals (hstore(b))
from 
(
    select * from 
    (values
        ('John',1940,'Winston','Lennon'),
        ('Paul',1942,'','McCartney'),
        ('George',1943,NULL,'Harrison'),
        ('Ringo',1940,'my passions are ring,drum and shades','Starr')
    ) as x(Firstname,BirthYear,Middlename,Lastname)
) as b 
order by BirthYear desc, Firstname desc; 
```

输出：

```
 avals                           
-----------------------------------------------------------
 {George,1943,NULL,Harrison}
 {Paul,1942,"",McCartney}
 {Ringo,1940,"my passions are ring,drum and shades",Starr}
 {John,1940,Winston,Lennon}
(4 rows) 
```

另一个样本：

```
select avals(hstore(b)) 
from (select * from Beatle) as b order by Firstname; 
```

输出：

```
 avals
------------------------------------------------------
 {George,NULL,Harrison}
 {John,Winston,Lennon}
 {Paul,"",McCartney}
 {Ringo,"my passions are ring,drum and shades",Starr}
(4 rows) 
```

就用`avals`ツ</p>

**现场测试**：[http ://www.sqlfiddle.com/#!1/d41d8/388](http://www.sqlfiddle.com/#!1/d41d8/388)

请注意，虽然 sqlfiddle 输出没有数组指示符（大括号）和**“我的激情是戒指，鼓和阴影”**上的双引号，但 avals 结果是一个数组，其中带有逗号的字符串有双引号实际结果，您可以在 pgAdmin 或 psql 上对其进行测试

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T18:22:36.330

此函数适用于所有极端情况，包括`NULL`值、空字符串或值中的特殊字符。

```
CREATE OR REPLACE FUNCTION f_rows_to_arr(_tbl text)
  RETURNS SETOF text[] AS
$BODY$
BEGIN

RETURN QUERY EXECUTE '
SELECT ARRAY[' || (
        SELECT string_agg(quote_ident(attname) || '::text', ',')
        FROM   pg_catalog.pg_attribute 
        WHERE  attrelid = _tbl::regclass  -- valid, visible table name 
        AND    attnum > 0                 -- exclude tableoid & friends
        AND    attisdropped = FALSE       -- exclude dropped columns
        ) || ' ]
FROM   ' || _tbl::regclass;

END;
$BODY$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_rows_to_arr ('mytbl'); 
```

演员以[`regclass`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)避免 SQLi。此版本中未对列进行排序。[此相关答案](https://stackoverflow.com/a/10686513/939860)中使用的技术和链接的更多解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:04:42.920

string_to_array 可能会有所帮助：

```
SELECT string_to_array(pg_tables::text,','::text) FROM pg_tables; 
```

# c# - 如何在sql中获取下一个自动增量值

> ID：11469062
> 
> 赞同：19
> 
> 时间：2012-07-13T10:53:31.433
> 
> 标签：c#, sql, sql-server, winforms, sql-server-2000

我正在用 c#.and 使用 sql 数据库创建一个 winform 应用程序。

我有一张桌子，`employee_master`其中有 和 之类的`Id, name, address`列`phone no`。`Id`是自动增量，所有其他数据类型都是`varchar`.

我正在使用此代码来获取下一个自动增量值：

```
string s = "select max(id) as Id from Employee_Master";
SqlCommand cmd = new SqlCommand(s, obj.con);
SqlDataReader dr = cmd.ExecuteReader();
dr.Read();
int i = Convert.ToInt16(dr["Id"].ToString());
txtId.Text = (i + 1).ToString(); 
```

我在文本框上显示。

但是当表中的最后一行被删除时，我仍然得到最近在文本框中删除的值

我应该如何获得下一个自动增量值？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-13T11:00:55.673

要从 SQLServer 获取下一个自动增量值：

这将获取当前的自动增量值。

```
SELECT IDENT_CURRENT('table_name'); 
```

下一个自增值。

```
SELECT IDENT_CURRENT('table_name')+1; 
```

------> 即使您添加一行然后删除它，这也将起作用，因为 IDENT_CURRENT 返回为任何会话和任何范围内的特定表生成的最后一个标识值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-27T16:54:48.793

试试这个：

```
SELECT IDENT_CURRENT('tbl_name') + IDENT_INCR('tbl_name'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T11:00:13.723

如果您使用的是 Microsoft SQL Server。使用此语句获取表的当前标识值。然后添加您在设计表时指定的种子值，如果您想获得下一个 id。

```
SELECT IDENT_CURRENT(<TableName>) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-17T09:05:28.780

至于我，最好的答案是：

```
dbcc checkident(table_name) 
```

您将看到两个值（可能相同）当前标识值、当前列值

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T11:01:02.790

当您从表中删除一行时，下一个数字将保持不变，因为它不会以任何方式减少。

因此，如果您有 100 行并删除了第 100 行。您将有 99 行，但下一个数字仍将是 101。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-09T06:30:35.233

```
select isnull((max(AddressID)+1),1) from AddressDetails 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T10:57:43.373

max(id) 将为您提供列表 pf employee_master 中的最大数量

例如 id = 10, 20, 100 所以 max 会给你 100

但是当你删除记录时它一定不是 100

所以你仍然可以得到 100 回

**我说这可能是问题的一个重要原因，因为您没有在查询中使用 order by id**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-18T19:32:16.673

对于 MS SQL 2005 及更高版本：

```
Select Cast(IsNULL(last_value,seed_value) As Int) + Cast(increment_value As Int) As NextID
From sys.identity_columns
WHERE NAME = <Table_Name> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-07T15:03:08.533

只是一个想法，如果您想要的是您在已打开的连接上插入的最后一个自动编号，请尝试使用：

```
SELECT @@IDENTITY FROM... 
```

从那个连接。这是跟踪给定连接上刚刚发生的事情并避免与其他连接竞争的最佳方式。获得最大身份通常是不可行的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-20T04:52:20.573

```
 SqlConnection con = new SqlConnection("Data Source=.\SQLEXPRESS;Initial Catalog=databasename;User ID=sa;Password=123");
 con.Open();
 SqlCommand cmd = new SqlCommand("SELECT TOP(1) UID FROM InvoiceDetails ORDER BY 1 DESC", con);

 SqlDataReader reader = cmd.ExecuteReader();

 //won't need a while since it will only retrieve one row
 while (reader.Read())
 {
     string data = reader["UID"].ToString();
     //txtuniqueno.Text = data;
     //here is your data
     //cal();
     //txtuniqueno.Text = data.ToString();
     int i = Int32.Parse(data);
     i++;
     txtuid.Text = i.ToString();
  } 
```

# objective-c - 保存托管对象上下文会在 iOS 5 的 performBlock 中创建死锁

> ID：11469067
> 
> 赞同：2
> 
> 时间：2012-07-13T10:53:43.300
> 
> 标签：objective-c, ios, core-data, deadlock, nsmanagedobjectcontext

我长期以来一直在寻找解决这个问题的方法，但还没有找到。

我正在开发一个带有核心数据的 iOS 应用程序。我创建了两个托管对象上下文 (MOC)，它们指向同一个持久存储协调器。一个 MOC（称为 self.moc）使用主队列并发启动，而另一个 mov（称为 self.bmoc）使用私有队列并发启动。我确保 self.moc 只在主线程上运行，而 self.bmoc 只在其`performBlock`or`performBlockAndWait`块内运行。

但是，我遇到了这种奇怪的情况，我的应用程序冻结`[self.bmoc save:nil]`在线。由于保存操作是在`performBlock`块内执行的，因此我看不出它有什么原因会陷入死锁。由于它冻结在那条线上，即使我使用`[self.bmoc save:&error]`而不是`nil`.

下面是重现问题的代码。虽然我有许多类似于下面的功能，但只有**这一个**会产生问题。我无法弄清楚问题的原因，非常感谢任何见解。谢谢！

```
-(void)createEmptyUserData {
    [self.bmoc performBlock:^{
        User* user = [NSEntityDescription insertNewObjectForEntityForName:@"User" inManagedObjectContext:self.bmoc];
        /* sets user object */
        [self.bmoc save:nil];
    }];
} 
```

注意：这段代码在主线程中执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:11:29.267

在这种情况下，您有两个基本原因会“挂起”。

1.  您有一个对 performBlockAndWait 或其他同步线程/队列调用的嵌套调用。

2.  你的一个块没有返回，并且永远运行。

通过查看“挂起”时每个正在运行的线程的堆栈，可以很容易地看到这两者。

performBlock 只需将执行块添加到队列中，然后立即返回。然后其他一些线程将执行块从队列中弹出并执行它们。

performBlockAndWait 在调用线程的上下文中执行。基本上，它等待当前排队的执行块运行，然后在当前线程上运行请求的代码。

在调用完成之前它不会返回。

所以，我敢打赌你要么有多个嵌套调用 performBlockAndWait，要么你的异步执行块之一没有完成。

查看挂起时的堆栈...

或者，记录您的块执行，以便您可以查看每个块的启动和退出时间。

# javascript - JQuery - 从单词列表生成网格

> ID：11469068
> 
> 赞同：0
> 
> 时间：2012-07-13T10:53:54.103
> 
> 标签：javascript, jquery

目前这个脚本从列表中获取单词并生成一个网格，每次给单词随机位置。生成单词后，我希望将它们拆分为单独的字符，彼此相邻的单元格，这样单词仍然有意义-我该怎么做？

```
 var listOfWords = ["mat", "cat", "dog", "pit", "pot", "fog", "log", "pan", "can", "man", ];
 var shuffledWords = listOfWords.slice(0, 12);
 shuffledWords.sort(function () {
     return 0.5 - Math.random();
 });

 var table = $('<table class="tablestyle">');
 var rows = 6;
 var cols = 2;
 var tr;
 var index;

 for (var row = 0; row < rows; row++) {
     tr = $('<tr>');
     for (var col = 0; col < cols; col++) {
         index = (row * cols) + col;
         $('<td>').text(shuffledWords[index]).appendTo(tr);
     }
     tr.appendTo(table);
 }

 table.appendTo('body');

 $('<table>' + innerTable + '</table>').appendTo('body'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:11:52.070

我是否正确假设对于每个单词你想要一个新行，对于单词中的字母你想要一个新单元格？

试试这个：

```
var listOfWords = ["mat", "cat", "dog", "pit", "pot", "fog", "log", "pan", "can", "man", ];
 var shuffledWords = listOfWords.slice(0, 12);
 shuffledWords.sort(function () {
     return 0.5 - Math.random();
 });

var tbl = document.createElement('table');
tbl.style.border='solid 1px silver';

for (var i = 0; i < shuffledWords.length; i++)
{
    var word = shuffledWords[i];
    var row = document.createElement('tr');

    for (var j = 0; j < word.length; j++)
    {
        var cell = document.createElement('td');
        cell.style.border='solid 1px silver';

        cell.innerText = word[j];
        // IF FIREFOX USE cell.textContent = word[j]; INSTEAD
        row.appendChild(cell);
    }

    tbl.appendChild(row);    
}

document.body.appendChild(tbl); 
```

[http://jsfiddle.net/YJjkB/1/](http://jsfiddle.net/YJjkB/1/)

# objective-c - 如何让 mainMenu 将所有操作发送到特定的 NSWindowController？

> ID：11469070
> 
> 赞同：0
> 
> 时间：2012-07-13T10:53:57.303
> 
> 标签：objective-c, cocoa, nswindow, nsmenu, nswindowcontroller

简短的答案在标题内:)

解释：我`MainMenu.xib`只有应用程序*的主菜单*`NSWindow`，我打开的所有菜单都必须相同。让我说，有一个特别之处`NSWindowController`在于，关于何时必须启用菜单项（通过`case`s on `selector`in `validateUserInterfaceItem`）以及如何处理所有操作的所有答案。当`NSWindow`与`NSWindowController`当前关注的相关联时，没有问题，但是当我关注另一个时，`NSWindow`所有菜单都是灰色的。

我现在有这个流程：`MainMenu`通过将它作为 Main nib 引用来创建`info.plist`，然后`AppDelegate`做一些初始化的东西并创建`MainWinController`with `MainWindow`，在某些时候`MainWinController`创建 1+ `DetailsWinController`with `DetailsWindow`。`AppDelegate`通过调用每个时间函数来管理我的自定义菜单`MainWinController`。

那么，我怎样才能强制响应者链总是查询那个特定的`NSWindowController`（`MainWinController`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:47:08.743

你没有提供很多细节，也不清楚你想要实现什么。

我的第一反应是，如果你想共享菜单项，为什么要在主窗口中创建多个窗口而不是视图？

假设您的 MainWindow 和 DetailsWindow 都实现了相同的选择器，您可以将菜单操作定向到第一响应者

要在 InterfaceBuilder 中添加 DetailsWinController，请从 Object Library 中拖动一个 NSObject，然后在 Identity Inspector 中将其类更改为您的 DetailsWinController 类。

如果您的 Main Menu 有 DetailsWindow 的不同项目，只需将这些项目连接到该实例中的操作。

请注意，如果您这样做，则不应在代码中创建 DetailsWinController。如果您真的想在代码中执行此操作，则需要在代码中将操作和目标添加到您的菜单中。

# c# - 从进程调用其 EXE 时如何隐藏应用程序窗口？

> ID：11469073
> 
> 赞同：0
> 
> 时间：2012-07-13T10:54:04.820
> 
> 标签：c#, .net, .net-services

我正在使用**Service**中的 Class Library 运行应用程序的 EXE 。但我试图做的是隐藏应用程序 EXE 的窗口。这是我的代码：

在我的类库的功能中： -

```
public class MyClassLibrary
{
    public void MyFunction()
    {
        Process process = new Process();
        process.StartInfo.FileName = "C:\Program Files (x86)\MyFolder\MyApp.exe";
        process.StartInfo.CreateNoWindow = true;
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        process.Start();
    }
} 
```

这就是我调用它的地方：

```
class MyClass : ServiceBase
{
    ...
    ...
    ...
    protected override void OnStart()
    {
        MyClassLibrary obj = new MyClassLibrary();
        obj.MyFunction();
    }
} 
```

尽管有上述所有情况，但仍然可以看到窗口。任何人都可以提出解决方案吗？

谢谢和问候， Siddhant

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:52:08.647

我得到了答案，感谢[这个](https://stackoverflow.com/a/3011731/1051651)评论，我从这个问题顶部的[Arne](https://stackoverflow.com/users/1472628/arne)的评论中得到了这个评论。显然，似乎**Process.StartInfo.UseShellExecute**应该设置为**true**。

谢谢大家帮忙！干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:43:09.220

我试过你的代码不起作用但是

但是当我以这种方式尝试时，它工作正常

```
string filePath = @"C:\Program Files (x86)\Internet Explorer\iexplore.exe";    
ProcessStartInfo pStartInfo = new ProcessStartInfo(filePath );
pStartInfo.WindowStyle = ProcessWindowStyle.Hidden;

Process.Start(startInfo); 
```

> 它与 Process.Start(ProcessStartInfo) 一起使用的原因是因为它将给定信息与新组件相关联，如 [MSDN中所述](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-16T10:06:28.623

```
string filePath = @"C:\Windows\System32\notepad.exe";
ProcessStartInfo pStartInfo = new ProcessStartInfo(filePath);

**pStartInfo.UseShellExecute = true;** 

pStartInfo.WindowStyle = ProcessWindowStyle.Hidden;   
Process.Start(pStartInfo); 
```

**注意：**设置`pStartInfo.UseShellExecute`为`true`否则会出错

# java - 调用 Web 服务时出错

> ID：11469081
> 
> 赞同：1
> 
> 时间：2012-07-13T10:54:30.567
> 
> 标签：java, web-services, service, web

我正在尝试用我制作的 Java 调用 Web 服务，但我不断收到错误，这是我的代码：

```
System.out.print("web service call: ......");
try{
    String text = webFunction(text);
    System.out.println(" OK");
    System.out.println("web answer: "+texto);
}catch(Exception e){
    System.out.println(" Error\nError code: "+e);
} 
```

我得到的错误是：

```
Error code: javax.xml.ws.soap.SOAPFaultException: Index: 29, Size: 29 
```

如果有人能告诉我错误是什么意思，或者，也许告诉我如何解决它会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:59:06.933

这似乎是一个数组/列表超出范围的问题。您正在尝试检索项目索引 29，但最大索引为 28。检查您的 while 循环/for 循环

# java - 在Android中组合两个图像

> ID：11469082
> 
> 赞同：1
> 
> 时间：2012-07-13T10:54:33.053
> 
> 标签：java, android, image-processing

我想通过以某个固定的 x 轴位移重叠它们来组合两个图像。假设有两张图片，都是同一张全景图的左右快照，

1.  现在的问题是找到与左图像重叠的右图像的 X 轴位移，以便两个像素匹配并形成全景视图。
2.  下一个问题是如何将它们合并，使它们感觉像一个没有任何缺陷的图像。

我必须使用 android 来做到这一点，但请告诉我使用 java /android 如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:36:56.357

问题很复杂。请注意，每张图片都是单词在平面上的投影。对于每张照片，您可以假设投影点相同但投影平面不同。这意味着每张照片上的共同部分以不同的方式扭曲（弯曲）。这意味着照片之间的过渡不是线性的，简单的过渡是不够的！

[在这里](http://www.cs.cornell.edu/courses/cs4670/2010fa/projects/final/results/group_of_acc269_ty244_yc563/cs4670_final.html)您可以找到对问题的更好描述。

# c# - 将集合均匀分布到新数组中

> ID：11469084
> 
> 赞同：2
> 
> 时间：2012-07-13T10:54:40.587
> 
> 标签：c#, .net, algorithm, language-agnostic

我正在尝试创建一种将数组均匀分布到 X 个新数组中的方法，其中仅允许 15 个项目 pr 数组，并且您只允许创建一个新数组，如果前一个有 10 个项目，除非该数组的项目少于 10 个。

**编辑**

*为了让未来的读者更容易理解我的问题。*

*   *这就像一块织物。*
*   *您需要构建 X 个产品。*
*   *一个产品需要 T 金额为员工构建。*

*您需要多少员工，您如何分担他们之间的工作量？*

**结束编辑**

```
 Max allowed number in array = 15;
 Min allowed number in array = 10;    

 Number = Numbers of Items in the Collection.

 Number  5 =>   [5]
 Number 13 =>   [13]
 Number 16 =>   [10] [6]
 Number 29 =>   [15] [14]
 Number 30 =>   [15] [15]
 Number 31 =>   [11] [10] [10]
 Number 32 =>   [12] [10] [10]
 Number 33 =>   [11] [11] [11] 
```

我试图在 C# 中解决这个问题。

到目前为止，这是我的代码，但它在 16 = [16]、29 = [19][10]、38 = [18][10][10] 等数字处失败

```
const int maxAllowedOrderLines = 15;
const int minAllowedOrderLines = 10;
var optimalOrderDisp = new List<int>();

Console.WriteLine("Number of OrderLines");
int linjer = Convert.ToInt32(Console.ReadLine());

if (linjer <= maxAllowedOrderLines)
   optimalOrderDisp.Add(linjer);
else
{
   for (var i = maxAllowedOrderLines; i > 0; i--)
   {
      var maxOrderLines = linjer%i;
      if (maxOrderLines == 0 || i <= minAllowedOrderLines || linjer < maxAllowedOrderLines)
      {
         Console.WriteLine("Optimal number of order lines {0}--{1}", i, (double) linjer/(double) i);

          var optimalNumberOfOrders = linjer/i;
          for (var orderNumber = 0; orderNumber < optimalNumberOfOrders; orderNumber++)
          {
             optimalOrderDisp.Add(i);
          }

          if (maxOrderLines != 0)
             optimalOrderDisp[0] += maxOrderLines;
          break;
       }
    }
 }
 foreach (var i1 in optimalOrderDisp)
 {
    Console.Write("[{0}]", i1);
 }
 Console.WriteLine(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:34:06.827

嗯...

```
const double bucketSize = 15.0;
var totalItems = (double)linjer;
var optimumBuckets = Math.Ceiling(totalItems / bucketSize);
var itemsPerBucket = (int)Math.Ceiling(totalItems / optimumBuckets);

var buckets = new int[(int)optimumBuckets];

var itemsLeft = (int)totalItems
for (var i = 0; i < buckets.length; i++)
{
    if (itemsLeft < itemsPerBucket)
    {
        buckets[i] = itemsLeft;
    }
    else
    {
        buckets[i] = itemsPerBucket;
    }
    itemsLeft -= itemsPerBucket;
} 
```

似乎做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:30:38.340

有趣的问题。我试了一下：

```
 const int maxAllowedOrderLines = 15;
    const int minAllowedOrderLines = 10;

    static List<int> optimalOrderDisp = new List<int>();

    static void Main(string[] args)
    {
        int Lines = Convert.ToInt32(Console.ReadLine());

        int MinNumberOfBuckets = (int) Math.Ceiling((double) Lines / minAllowedOrderLines);
        int RemainingLines = Lines;
        int BucketLines = Lines / MinNumberOfBuckets;

        // Distribute evenly
        for (int i = 0; i < MinNumberOfBuckets; i++)
        {
            optimalOrderDisp.Add(i != MinNumberOfBuckets - 1 ? BucketLines : RemainingLines);
            RemainingLines -= BucketLines;
        }

        // Try to remove first bucket
        while (RemoveBucket())
        {
        }

        // Re-balance
        Lines = optimalOrderDisp.Sum();
        RemainingLines = Lines;
        BucketLines = (int) Math.Round((double) Lines / (optimalOrderDisp.Count));
        for (int i = 0; i < optimalOrderDisp.Count; i++)
        {
            optimalOrderDisp[i] = (i != optimalOrderDisp.Count - 1 ? BucketLines : RemainingLines);
            RemainingLines -= BucketLines;
        }

        // Re-balance to comply to min size
        for (int i = 0; i < optimalOrderDisp.Count - 1; i++)
            if (optimalOrderDisp[i] < minAllowedOrderLines)
            {
                int delta = minAllowedOrderLines - optimalOrderDisp[i];

                optimalOrderDisp[i] += delta;
                optimalOrderDisp[optimalOrderDisp.Count - 1] -= delta;
            }

        Console.WriteLine(String.Join("\n", optimalOrderDisp.ToArray()));
    }

    static bool RemoveBucket()
    {
        if (optimalOrderDisp.Sum() > maxAllowedOrderLines * (optimalOrderDisp.Count - 1))
            return false;

        int Lines = optimalOrderDisp[0];
        int RemainingLines = Lines;
        int BucketLines = Lines / (optimalOrderDisp.Count - 1);

        // Remove bucket and re-distribute content evenly
        // Distribute evenly
        for (int i = 1; i < optimalOrderDisp.Count; i++)
        {
            optimalOrderDisp[i] += (i != optimalOrderDisp.Count - 1 ? BucketLines : RemainingLines);
            RemainingLines -= BucketLines;
        }

        optimalOrderDisp.RemoveAt(0);
        return true;
    } 
```

# php - 根据先前的选择删除下拉条目

> ID：11469089
> 
> 赞同：0
> 
> 时间：2012-07-13T10:55:19.310
> 
> 标签：php, jquery, html

我已经通过stackoverflow查看了答案，并且几乎就在那里，但需要一些帮助。

我有多个下拉列表，其中包含相同的选项。例如，三个相同的列表具有以下内容：

```
<label for='distlist_1'>Distribution List 1</label> 
<select name='distlist_1'> 
<option value=''>Please Select:</option> 
<option value='1'>All</option> 
<option value='2'>All Managers</option>
<option value='3'>Leavers</option>
</select> 
```

唯一的区别是名称，例如 distlist_1、2、3 等。如有必要，我可以添加 ID。

当用户在第一个下拉列表中选择一个选项时，我需要将其从所有其他下拉列表中删除。我找到了一个执行此操作的脚本。

```
$('option').click(function(){
$('option:contains(' + $(this).html() +')').not(this).remove();
}); 
```

但我需要它，以便如果用户随后决定“等等，我毕竟不需要下拉列表 1 中的那个选项”，她会选择其他内容，并且该选项会重新出现在其他下拉列表中。上面的代码删除了选项，然后没有办法检索它们，直到你点击足够多的时候它们都消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:08:10.640

我最终使用了它，因为它很简洁......

```
jQuery(document).ready(function() {
var selects = $('.mapping')

selects.change(function() {
var vals = {};
selects.each(function() {
vals[this.value] = true;
}).get();
selects.not(this).children().not(':selected').not(':first-child').each(function() {
this.disabled = vals[this.value];
});
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:35:09.703

这实际上是你想要的......这是基于 jquery 1.7 和 on() 事件绑定器

```
$(document).ready(function (){
      $('select').on('focus', function() {
        // on focus save the current selected element so you 
        // can place it back with all the other dropdowns
        var current_value = $(this).val();

        // bind the change event, with removes and adds elements
        // to the dropdown lists
        $(this).one('change.tmp', { v : current_value }, function(e)
        {
          if ($(this).val() != '')
          { // do not remove the Please select options
            $('option[value="' + $(this).val() + '"]')
              .not($('option[value="' + $(this).val() + '"]', $(this)))
              .remove();
          }

          if (e.data.v != '')
          { // do not add the Please select options
            $('select').not($(this)).append($('option[value="' + e.data.v + '"]', $(this)).clone());
          }
        });

        // on blur remove all the eventhandlers again, this is needed
        // else you don't know what the previously selected item was.
        $(this).on('blur.tmp', { v : current_value}, function (e)
        {
          $(this).off('blur.tmp');
          $(this).off('change.tmp');
        });
      });
    }); 
```

它唯一不做的就是以正确的顺序订购所有东西。您将不得不在 .append 函数中考虑自己的方法。

# iphone - 如何让输入标签在 iPhone / iPad 上正确显示？

> ID：11469090
> 
> 赞同：0
> 
> 时间：2012-07-13T10:55:26.630
> 
> 标签：iphone, css, ipad

我想让登录标签（在此页面的最顶部 www.plantify.co.uk）在 iPad 和 iPhone 上正确显示。

该网站无法响应，我遇到的麻烦是您必须放大以专注于输入标签，它看起来非常混乱。

任何 CSS / 响应式图例可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:14:38.430

您可以像这样在 CSS 中使用媒体查询：

```
@media screen and (max-width: 480px) { // your code goes here } 
```

并设置您想要在此处看起来不同的元素。

# javascript - 将 JavaScript 文件的整个文件夹添加到 HTML5 应用缓存

> ID：11469094
> 
> 赞同：1
> 
> 时间：2012-07-13T10:55:32.100
> 
> 标签：javascript, html

我有大量的 JavaScript 文件需要添加到应用程序缓存中。是否可以在清单中添加整个文件夹（JS 文件夹）。否则，我将不得不手动将这些 JS 文件添加到清单中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:02:06.963

您的清单文件不需要是静态文件。只需编写一些服务器端代码即可根据文件夹中的文件生成清单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:32:12.017

正如 Maurice 所指出的，您可以动态生成文件。

或者更好的是，当文件夹的内容发生变化时，让后台任务来完成这项工作。

如果您已经熟悉 JS 并且可以控制服务器以便安装它，那么 Node.js 非常适合这一点。Node 具有查看文件和文件夹的功能，并且有许多库可以使工作变得简单。

不过要注意的一个关键问题是文件的组合大小。许多支持 HTML5 离线使用的浏览器都严格限制了您可以离线存储的数据量。通常默认限制为 5MB。

# c# - 部分回发后从后面的代码调用 Javascript

> ID：11469096
> 
> 赞同：0
> 
> 时间：2012-07-13T10:55:34.783
> 
> 标签：c#, asp.net, asp.net-ajax

我在 UpdatePanel 中的 UserControl 中有一个 RadTreeView，并在 jQuery 弹出窗口中打开。控件中的一个按钮会引发一个单击事件，该事件由包含页面拾取，并导致用户控件从用户控件后面的代码向 RadTreeView 添加一个新节点。一旦发生这种情况，我想调用一个 JavaScript 函数（循环遍历所有节点并根据过滤字符串设置它们的可见性）。理想情况下，我想从用户控件中的同一函数设置此脚本调用。

我从用户控件后面的代码中尝试了以下内容

```
ScriptManager.RegisterClientScriptBlock(
            this, 
            this.GetType(),
            "filter", 
            "filterItems('" + this.RadTV.ClientID + "','" + this.txtFilter.Text + "');", 
            true ); 
```

我还从父页面后面的代码中尝试了类似的东西，并使用适当的 UpdatePanel 注册了脚本块。

在这两种情况下，都不会调用脚本。

有任何想法吗？

干杯

斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:19:23.700

您需要处理程序来执行此操作。

```
 <script type="text/javascript" language="javascript">
        Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(beginRequestHandle);
        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandle);
          function beginRequestHandle(sender, Args) {
          //Do something when call begins.
          }

          function endRequestHandle(sender, Args) {
          Yourfunction();//Call your function here
          }
    </script> 
```

# windows-services - Windows 媒体播放器无法在 Win7 和 Win Server 2008 的 Session 0 中播放 rtsp 和 mms 流 url

> ID：11469099
> 
> 赞同：1
> 
> 时间：2012-07-13T10:55:52.537
> 
> 标签：windows-services, windows-server-2008, rtsp, wmp, session-0-isolation

在 Windows Server 2003 中，我们开发了一个程序。架构是：（1）有一个Service（称为ServA），（2）有一个进程（称为ProcB），它是通过实现一些必要的WMP接口来覆盖Windows Media Player。(3)ServA会通过CreateProcess启动ProcB来播放流url。ServA 和 ProcB 都在 Session 0 中。

在 Server 2003 中，它运行良好。

现在我们将其传输到 Windows Server 2008。在 Server 2008 中，它可以正常使用 http 协议 url（如 http://xx/xx.wmv）。rtsp和mms协议url（如rtsp://xx/xx.wmv、mms://xx/xx.asf）无法播放成功，返回错误码：0xC00D11B1，错误描述：“Windows Media Player遇到播放文件时出现问题。”

如果我们不将 ServA 作为服务启动，而只是双击启动它。那么ServA和ProcB都在Session 1中，这时候rtsp和mms协议url就可以播放成功了。

在Win 7中，这个现象与Server 2008相同。我们检查了我们的显示和声音设备，我们可以保证它们没有问题。

您可以链接此网址[http://social.msdn.microsoft.com/Forums/en-US/windowscompatibility/thread/0317c921-dc9c-4e95-9800-77a34f9f516a](http://social.msdn.microsoft.com/Forums/en-US/windowscompatibility/thread/0317c921-dc9c-4e95-9800-77a34f9f516a)了解更多详情。

# php - DOMDocument::loadHTMLFile() 安全吗？

> ID：11469108
> 
> 赞同：1
> 
> 时间：2012-07-13T10:56:33.713
> 
> 标签：php

有人可以通过这种方法将一些恶意代码注入我的脚本吗？如果有人可以，最好的做法是什么？

我正在尝试创建一种类似于 reddit 的建议标题的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:04:35.463

真正简短的答案是**YES**。一般而言，HTML 的任何“外部”加载都是不安全的——事实上，任何来自用户的**任何**数据的加载都可能是不安全的——所有用户提供的数据都**必须**经过验证和审查。

但是，根据您提供的信息，实际上不可能给出明确的答案。这是因为它取决于哪个文件、文件如何控制、文件加载后如何处理。

添加此信息，也许我可以给出更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:17:23.710

我假设当您询问该函数/方法的安全性时，您正在谈论注入一些将在服务器上执行的代码而不是`XSS`.

我不是`C`/`C++`专家，但是查看作为背后方法[`dom_load_html()`的源代码](https://github.com/php/php-src/blob/master/ext/dom/document.c#L2152)`loadHTMLFile()`，我可以看到它遵循结构良好的逻辑，并且除了在遇到问题时安全失败之外，流程也得到了很好的控制。

同样，我是新手，您可能需要一些专家`C`/ `C++`，以上只是我的个人意见。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-10T11:03:04.317

这至少存在一个安全问题： [https ://www.mediawiki.org/wiki/XML_External_Entity_Processing](https://www.mediawiki.org/wiki/XML_External_Entity_Processing)

上面的页面说 XML 标准定义了一种指定外部实体的方法，该实体可以指定从 URL 加载数据。它也可以从本地资源加载数据。

PHP 的 xml 库使用 libxml2，它默认实现该行为。有一种方法可以禁用它，但这也会禁用库的其他一些功能。最好的方法是对方法 loadXML() 和 loadHTML() 禁用它：

```
 $dom = new DOMDocument();
    $oldValue = libxml_disable_entity_loader( true );
    $dom->loadXML( $xml );
    libxml_disable_entity_loader( $oldValue ); 
```

# sql - 在 Oracle 中对字母数字数据进行排序

> ID：11469110
> 
> 赞同：3
> 
> 时间：2012-07-13T10:56:35.240
> 
> 标签：sql, oracle

我有一个字母数字数据，例如：

```
1
1a
1b
2
2b
10
10a

```

如果我对这些数据进行排序，输出将如下所示：

```
1
1a
10
10a
2
2b

```

但我希望输出为：

```
1
1a
2
2b
10
10a

```

如何使用 Oracle 命令获取此输出？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T11:08:07.800

因此，据我了解，您希望按数据的数字部分进行排序。为此，您可以像这样使用正则表达式（提取数字部分）：

```
SQL> select str from
  2  (
  3  select '1' str from dual union all
  4  select '1a'  from dual union all
  5  select '1b'  from dual union all
  6  select '2' from dual union all
  7  select '2b'  from dual union all
  8  select '10'  from dual union all
  9  select '10a' from dual
 10  ) t
 11  order by to_number(regexp_substr(str, '^[[:digit:]]*')), str
 12  /

STR
---
1
1a
1b
2
2b
10
10a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T11:01:46.927

您也可以通过在 order by 子句中分隔数字和字母数字排序顺序来执行相同操作。检查以下示例：

```
SELECT tt.qdef_grid
       FROM qgdm_qdef tt 
       ORDER BY to_number(substr(tt.qdef_grid,2,2)), substr(tt.qdef_grid,1,1); 
```

# qnx - Jam 在 QNX Neutrino 主机上的内置变量 $(OS) 中有什么价值？

> ID：11469118
> 
> 赞同：0
> 
> 时间：2012-07-13T10:56:53.860
> 
> 标签：qnx, qnx-neutrino, jam

我必须根据构建主机配置我的编译。Windows 和 Linux 很简单，无论如何我都可以访问构建主机来测试它。

到目前为止，我完全没有找到 $(OS) 的值，只是为了检查我的期望，$(OSPLAT)。我假设 OSPLAT 在 x86 机器上是 X86，类似于其他 QNX 支持的 SDP 包

如果有人可以访问安装了 QNX SDP 的 QNX/Neutrino 系统，则下面的 Jam 脚本可以产生结果：

```
Echo $(OS) $(OSPLAT) ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:03:40.127

我查看了 Jam 源代码，根据平台版本，它似乎是 QNX 或 QNXNTO。有关更多详细信息和 OSPLAT 值，请参见 jam.h。

# java - Spring Security 和 Web 服务上的会话

> ID：11469120
> 
> 赞同：1
> 
> 时间：2012-07-13T10:56:58.110
> 
> 标签：java, web-services, spring, spring-security

# **概括**

## 如何使用 Spring Web 服务和 Spring Security 获取 Web 服务客户端的会话？

# **细节**

提交后

`<form method="POST" action="<c:url value="/j_spring_security_check" />">...</form>`

我注意到您可以：

`public class MyUserDetailsService implements UserDetailsService {}`

这将允许您覆盖方法，例如`loadUserByUsername(String username)`因此能够检索提交的用户名并进行数据库查找以返回用户对象。

然而，我的问题是我不确定在哪里`SecurityContextHolder`设置。我可以通过使用这行代码来获取用户对象：

`User user = (User) SecurityContextHolder.getContext().getAuthentication().getPrincipal();`

但我不确定它是如何设置的。我想知道提交上述表格后的流程，以便确定如何`SecurityContextHolder`设置。

我想知道这一点的原因是因为我想将它用作 Web 服务客户端身份验证的“会话”，而不是让客户端在每个请求中重新提交凭据。

* * *

春季版：**3.0.2.RELEASE**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:14:24.447

`/j_spring_security_check`由[`UsernamePasswordAuthenticationFilter`](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.java)which extends处理`AbstractAuthenticationFilter`。安全上下文是在后者的 [`successfulAuthentication`](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/authentication/AbstractAuthenticationProcessingFilter.java#L314)方法中设置的。

但是，Web 服务客户端通常是无状态的，并且更有可能使用带有共享密钥的基本身份验证之类的东西。我不确定根据安全上下文内容滚动您自己的会话系统会有多大好处。如果您担心性能，那么您可以在服务器上使用身份验证信息缓存。

# selenium-ide - selenium ide中的字符串比较？

> ID：11469121
> 
> 赞同：1
> 
> 时间：2012-07-13T10:57:01.810
> 
> 标签：selenium-ide

```
<tr>
    <td>store</td>
    <td>inline-block </td>
    <td>blank</td>
</tr>
<tr>
    <td>store</td>
    <td>none </td>
    <td>blank</td>
</tr>

<tr>
    <td>gotoIf</td>
    <td>${a}==${blank}</td>
    <td>labelA</td>
</tr>

<tr>
    <td>gotoIf</td>
    <td>storedVars['a']==storedVars['blank']</td>
    <td>ddddd</td>
</tr> 
```

我想比较字符串变量，我尝试了上面提到的两种情况。这两种情况都不适用于字符串比较

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T14:20:42.573

```
Selenium.prototype.doVerifyStringsEquals = function(elementOne, elementTwo) 
{
    var arrayelements = elementOne.split(',');
    var one = arrayelements[0];
    var two = arrayelements[1];
    if(one == two) 
    {
        storedVars[ elementTwo ] = 1;
    }
    else
    {
        storedVars[ elementTwo ] = 0;
    }
};

<tr>
    <td>verifyEquals</td>
    <td>test,test</td>
    <td>t</td>
</tr>
<tr>
    <td>echo</td>
    <td>${t}</td>
    <td></td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:23:50.213

将以下代码放入您的 javascript 文件中

```
Selenium.prototype.assertEquals = function(elementOne, elementTwo) 
{
    if(elementOne != elementTwo) 
    {
        Assert.fail("" + elementOne + " is not equal to " + elementTwo);
    }
}; 
```

和

|断言等于 | 10 | 10 |

这个希望将有助于比较这两个字符串。

# testing - 在 IntelliJ IDEA 中从多个模块一起运行单元测试

> ID：11469122
> 
> 赞同：99
> 
> 时间：2012-07-13T10:57:12.013
> 
> 标签：testing, intellij-idea

如何一次从两个或多个 IDEA 模块运行所有测试？

我正在使用许多模块，并且经常运行所有单元测试很重要，当我选择运行多个文件夹时，上下文菜单上不再有“运行”选项。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-07-16T13:45:02.030

**最佳方式：**（3年后编辑）

甚至还有更好的方法来实现这一点。来自[JetBrains JUnit 运行配置文档](https://www.jetbrains.com/help/idea/run-debug-configuration-junit.html#configTab)：

1.  选择菜单“运行”→“编辑配置...”。单击左上角的绿色加号并选择 JUnit。

2.  选择“测试种类”到“模式”，并完全按照您看到的方式输入此正则表达式：（`^(?!.*IT$).*$`它以插入符号开头，`^`以美元结尾`$`）。此正则表达式表示：*所有未以 IT 名义完成的测试*。

    **注意：**正则表达式将匹配限定的文件名，从而也很容易被模块/包排除。如果您的集成测试被分组在一个包`com.me.integrationtests`中，则匹配此包中所有内容的正则表达式将是`^(?!.*com\.me\.integrationtests.*).*$`。

3.  选择“搜索测试”到“在整个项目中”。工作目录应设置为顶级模块工作目录（应默认设置）。

4.  为您的测试输入一个名称，例如“所有单元测试”。我也更喜欢标记“共享”选项，这样这个配置以后就不会消失了。单击应用和确定。

您可以尝试使用此正则表达式来满足您的需求。

**原答案：**

这是可行的，虽然它不舒服。

1.  选择第一个模块，右键单击`test/java`目录并“运行所有测试”。它创建测试配置。
2.  选择“编辑配置”并在新创建的配置上选中“共享”，以便将其保存。
3.  选择第二个模块“运行所有测试”，并在此配置上选中“共享”。
4.  在“启动前”部分，单击“+”并选择“运行另一个配置”，然后选择第一个模块的配置。

这样，您可以按顺序运行配置，并且每个配置都会获得一个新选项卡。不过，总比没有好。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-13T11:11:06.627

您必须创建一个“运行配置”：

1.  转到顶部的下拉菜单，在“制作”按钮的右侧，然后单击它
2.  选择“编辑配置”
3.  现在单击“+”按钮添加新的运行配置并选择 JUnit
4.  然后，在配置“运行配置”时，您会找到“测试种类”下拉菜单，选择“目录中的所有类”
5.  选择要用作根目录的目录，您可以选择项目的顶级目录或模块的任何目录。
6.  选择从中提取类路径的 IntelliJ 模块（如果它有类路径，它可以是顶级项目）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-10-19T17:40:11.230

选择所有模块，右键单击它们并选择运行所有测试。这将创建一个名为**“整个项目”**的配置，您可以随时再次运行该配置。

我发现这比接受的答案更好，因为这会为每个模块单独运行单元测试。如果您的测试用例在其运行时使用特定于模块的资源，那么公认答案的最佳方法将不起作用。

选择所有模块

![选择所有模块](../Images/9ad728677ebd05e55854a68dbcdc1015.png)

右键单击并选择运行所有测试

![右键单击并选择运行所有测试](../Images/154d1d49832da29d81f2ff8ffb126a9c.png)

获取新的运行配置

![获取新的运行配置](../Images/ee618accd7a3649d811ada105148d8a3.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-05-26T10:05:24.923

对我来说，这两种解决方案都不起作用或没有达到预期的效果。

对我来说，我有 3 个模块。我的模块依赖项看起来像这样

**展示**->**领域**->**数据**

我只是想一起执行所有测试。所以我想出了“跨模块依赖”的方法

我的设置如下所示：

[![在此处输入图像描述](../Images/fb3f81d64263ece3a4ac7b4d6a34e8b2.png)](https://i.stack.imgur.com/4EOe5.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-08-17T15:09:17.357

这对我来说适用于具有多个模块的项目。

创建一个新的 JUnit 运行/调试配置。测试类型：'All in package' 搜索测试：'整个项目'

您还必须指定一个工作目录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-14T12:41:21.760

另一个不那么明显的情况是多个项目需要代码覆盖。天真的解决方案是选择多个项目并一次在其中运行所有单元测试。事实证明，如果类路径更改并且 IntelliJ 每个运行配置只有一个类路径条目，则单元测试可能会失败。在这种情况下，按顺序对项目运行单元测试实际上就足够了。这是因为在每次运行结束时 IntelliJ（2017.2.5 社区版）都会询问收集的覆盖率是否应该替换或应该添加到以前收集的覆盖率统计信息中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-28T14:58:38.430

如果你使用 Gradle 并且有多个模块，你可以这样做：

*   确保 IntelliJ 设置为使用 Gradle 运行测试 ( `Settings/Build, Execution, Deployment/Build Tools/Gradle`-> `Run tests using: Gradle`)
*   右键单击项目导航器中的模块并选择`Run test in [module name]`
*   完成后，左键单击顶部工具栏中创建的配置并选择`Edit Configurations...`
*   在 Run 字段中，只需在第一个模块之后添加更多模块，例如，如果您想在模块 foo、bar 和 baz 中运行测试：`:foo:test :bar:test :baz:test --tests *`
*   重命名配置，例如`Test Foo + Bar + Baz`

现在您可以运行配置来执行您需要的测试。

# java - JSF 1 在我的主 xhtml 中嵌套了一个新页面

> ID：11469127
> 
> 赞同：0
> 
> 时间：2012-07-13T10:57:25.040
> 
> 标签：java, richfaces, jsf-1.2

我有一个关于 JSF 1.2 + Richfaces 3.3 的问题。我有一个网络应用程序，它有一些导航规则和一些 ajax 功能。在某些时候，我希望应用程序在服务器端执行操作后在浏览器中打开一个新选项卡并显示一个 xhtml 页面。我为此选择了标签。这就是它的外观：

```
<h:commandLink target="_blank"
                action="#{sm_gestiondocumental_gestorUserAuditBean.actionCreateUserAuditManager}">
                <h:graphicImage value="/images/sm_gestiondocumental/checklist.png"
                    alt="#{wmsg.VIEW_AUDITS}" title="#{wmsg.VIEW_AUDITS}"
                    styleClass="pic" />
            </h:commandLink> 
```

正在执行的代码如下：

```
private String createAuditManager(String className, String param, Object objectToAudit,
        String auditFileName) {
    AuditManagerBean amb = (AuditManagerBean) FacesUtils
            .getManagedBean(BeanNames.AUDIT_MANAGER_BEAN);
    if (amb == null) {
        amb = new AuditManagerBean();
    }
    try {
        amb.set_serviceLocator(this.get_serviceLocator());
    } catch (Exception e) {
        e.printStackTrace();
    }
    amb.set_AuditClassName(className);

    amb.set_AuditId(param);
    amb.set_AuditList(null);
    amb.set_AuditFileName(auditFileName);
    amb.set_ObjectToAudit(objectToAudit);

    amb.set_AuditFilterInit(this._FilterInit);
    amb.set_AuditFilterEnd(this._FilterEnd);
    FacesUtils.setManagedBeanInSession(BeanNames.AUDIT_MANAGER_BEAN, amb);
    return "showAudits";
}

public String actionCreateUserAuditManager() {
    if (this._SelectedUser == null) {
        FacesUtils.addErrorMessage("Error al listar usuarios");
        return this.createAuditManager(CUsuarioRegistrado.NAME_FOR_AUDIT, "", null,
                "Auditoría para " + this._SelectedUser);
    }
    return this.createAuditManager(CUsuarioRegistrado.NAME_FOR_AUDIT,
            this._SelectedUser.toString(), null, "Auditoría para " + this._SelectedUser);
} 
```

这将返回一个“showAudits”字符串。根据我的导航规则，这个String必须打开这个链接：auditInfo.xhtml。

```
<navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
        <description></description>
        <from-outcome>sm_gestiondocumental_ListGrupoEntrega</from-outcome>
        <to-view-id>/modules/sm_gestiondocumental/ges_tiposentrega/tiposGrupoList.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <description></description>
        <from-outcome>sm_gestiondocumental_ListEmpresa</from-outcome>
        <to-view-id>/modules/sm_gestiondocumental/ges_empresas/empresasList.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <description></description>
        <from-outcome>sm_gestiondocumental_ListTrabajo</from-outcome>
        <to-view-id>/modules/sm_gestiondocumental/ges_trabajos/trabajosList.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <description></description>
        <from-outcome>sm_gestiondocumental_ListSeccion</from-outcome>
        <to-view-id>/modules/sm_gestiondocumental/ges_secciones/seccionesList.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <description>
        </description>
        <from-outcome>showAudits</from-outcome>
        <to-view-id>/modules/sm_gestiondocumental/auditInfo/auditInfo.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

规则得到了很好的应用，但是，页面正在我的应用程序的主面板中打开，我的意思是，打开了一个新的浏览器选项卡，但整个应用程序正在显示，其中包含 auditInfo.xhtml 内容，以便仅显示auditInfo.xhtml 页面。

这似乎是一些过滤问题，因为我的应用程序 bean 的 setContent() 方法是在调用 org.ajax4jsf.Filter 之后调用的。但是我不希望调用该方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:52:00.393

解决。该标签位于 a4j:outputPanel 中，因此，即使它没有自动设置为 ajaxRender，richfaces 也会对该请求使用 ajax 过滤器。那个过滤器导致了这个问题。将 a4j:outputPanel 更改为 ah:panelGroup 已解决。

# java - Lucene 索引的批量提交

> ID：11469131
> 
> 赞同：1
> 
> 时间：2012-07-13T10:58:02.800
> 
> 标签：java, lucene, indexing, batch-insert

我想批量索引文档。我将 设置为`IndexWriterConfig.setMaxBufferedDocs()`在将它们提交回索引之前设置内存中的文档总数。

我是否必须继续计数添加的文档并明确发布`writer.commit()`索引以刷新内存中的文档，或者编写器会自动处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T17:05:40.713

Lucene 实际上只会在达到 ram 缓冲区大小或最大缓冲文档限制（没有自动提交）时将文档刷新到磁盘。为了使它们可搜索，您需要实际调用`IndexWriter.commit`并重新打开搜索器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:12:52.367

当然，Lucene 自己做。

# php - 在我的情况下如何使用 Explode？

> ID：11469140
> 
> 赞同：0
> 
> 时间：2012-07-13T10:58:32.910
> 
> 标签：php

根据下面的示例，我有一个包含具有值的文本的变量：

```
$data = "5:7|4:1|504:2|1:3|" 
```

我想达到这样的结果：

```
$data[5] = 7;
$data[4] = 1;
$data[504] = 2;
$data[1] = 3; 
```

我试过爆炸：

```
$data = explode("|", $data);

//but it makes $data[0]="5:7"; $data[1]="4:1"; and so on. 
```

我应该再次使用爆炸吗？它有任何意义，还是有其他方法？我想寻求提示或帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:01:06.253

可能有更聪明的方法，但我会这样做：

```
$data = array();
foreach (explode("|", $your_data) as $part)
{
    $pieces = explode(':', $part);
    // Assumes we have 2 pieces, might want to make sure here...

    $data[$pieces[0]] = $pieces[1];
} 
```

另外，我不确定这些数据代表什么，但请记住，数组键会相互覆盖，因此`1:1|1:2`会导致数组只有一个项目（最后一项）。可能有充分的理由采取另一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:01:05.787

当然，`explode`再次：

```
$data = "5:7|4:1|504:2|1:3";
$array = array();
foreach (explode('|', $data) as $pair) {
    list($id, $val) = explode(':', $pair);
    $array[$id] = $val;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:02:27.127

是的，您应该像这样使用爆炸两次

```
$newData = array();
$pairs = explode('|',$data);
foreach($pairs as $pair){
   $tmp = explode(':',$pair);
   $newData[$tmp[0]] = $tmp[1];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:03:21.757

尝试使用正则表达式：

```
$data = preg_split ("\||:", $data); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T11:05:49.843

一行版本：

```
$data = array_map(function($d) { return (int)explode(":", $d)[1]; }, explode("|", $data)); 
```

# java - Phonegap相机拍照

> ID：11469141
> 
> 赞同：0
> 
> 时间：2012-07-13T10:58:33.150
> 
> 标签：java, javascript, cordova

我正在为我的移动网站添加一些移动应用程序特定的功能。目前，该应用程序或多或少只是一个包装器。

```
public class Activity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setContentView(R.layout.main);
        if (this.isOnline()) {
            super.loadUrl("http://mysite.com");
        } else {
            super.loadUrl("file:///android_asset/www/offline.html");
        }
    }

    public boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    }
} 
```

以下javascript出现了问题。如果我替换 super.loadUrl("http://mysite.com"); 使用 super.loadUrl("file:///android_asset/www/online.html") 并在那里运行以下javascript，它工作正常。但是如果我在 mysite.com 上运行它，它会继续抛出以下异常：

07-13 12:25:12.762: E/Web Console(28251): 不允许加载本地资源: file:///data/data/com.my.app/.Pic.jpg?1342171460960 at null:0

对我做错了什么有任何想法吗？

```
 var camera = (function(){

        var camera = {
            settings : {
                quality: 50, 
            }
        };

        var error = function(message) {
            console.error("Error happened while trying to get a picture", message);
        };

        document.addEventListener("deviceready", function() {

            camera.settings.destinationType = navigator.camera.DestinationType.FILE_URI;    

            camera.fromPhone = function() {
                this.settings.sourceType = navigator.camera.PictureSourceType.CAMERA;
                return this;
            };

            camera.fromLibrary = function() {
                this.settings.sourceType = navigator.camera.PictureSourceType.PHOTOLIBRARY;
                return this;
            };

            camera.get  = function(callback) {
                navigator.camera.getPicture(callback, error, camera.settings);
            };

        }, false);

        return camera;

 })();

//Later, at a click event
camera.fromPhone().get(function(imageURI){
    alert("imageURI" + imageURI)
    $("#largeImage").attr("src", imageURI);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T18:10:54.873

由于浏览器跨域安全，您远程加载的站点无法访问本地资源。这是一个旧线程，但解释了一些原因。

[https://lists.webkit.org/pipermail/webkit-dev/2009-May/007658.html](https://lists.webkit.org/pipermail/webkit-dev/2009-May/007658.html)

# php - php 创建图像并为其添加背景图像

> ID：11469142
> 
> 赞同：1
> 
> 时间：2012-07-13T10:58:44.327
> 
> 标签：php, image, imagecreatefrompng

我想将图像作为背景图像添加到由我的 PHP 代码创建的图像中

```
<?php
header('Content-type: image/gif');
// Fetch GET params
$mode = isset($_GET["mode"]) ? strip_tags($_GET["mode"]) : "big";
$url = isset($_GET["text"]) ? $_GET["text"] : "This is an Invalid Code";

// Get size depending on mode
$size = ($mode && $mode == "small") ? "36" : "200";
// Get chart data. Limit data length if mode is small
$chl = ($mode && $mode == "small") ? substr($url, 0, 33) : $url;
// Assemble chart image URL
$imgUrl = "http://chart.apis.google.com/chart?chs=" . $size . "x" . $size . "&cht=qr&chld=H|0&chl=" . $chl;

// Load, transform and write transparent QR code image
$im = imagecreatefrompng($imgUrl);
imagetruecolortopalette($im, false, 2);
$white = imagecolorclosest($im, 0, 0, 0);
imagecolortransparent($im, $white);
imagegif($im);
imagedestroy($im);
?> 
```

图像位于同一台服务器上

[http://www.example.com/img/sitebg.png](http://www.example.com/img/sitebg.png)

我试过的

```
<?php
header('Content-type: image/gif');
// Fetch GET params
$mode = isset($_GET["mode"]) ? strip_tags($_GET["mode"]) : "big";
$url = isset($_GET["text"]) ? $_GET["text"] : "This is an Invalid Code";

// Get size depending on mode
$size = ($mode && $mode == "small") ? "36" : "200";
// Get chart data. Limit data length if mode is small
$chl = ($mode && $mode == "small") ? substr($url, 0, 33) : $url;
// Assemble chart image URL
$imgUrl = "http://chart.apis.google.com/chart?chs=" . $size . "x" . $size . "&cht=qr&chld=H|0&chl=" . $chl;

// Load, transform and write transparent QR code image
$im2 = imagecreatefrompng("http://www.example.com/example/img/BG.png");
$im = imagecreatefrompng($imgUrl);
imagetruecolortopalette($im, false, 2);
$white = imagecolorclosest($im, 0, 0, 0);
imagecolortransparent($im, $white);

// Merge the stamp onto our photo with an opacity (transparency) of 50%
imagecopymerge($im, $im2);

// Save the image to file and free memory
imagepng($im);
//imagegif($im);
imagedestroy($im);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:16:16.747

您想在 bg 图像上绘制图形吗？

然后开始 bij 从背景图像创建图像对象，然后使用命令将其与图形合并`imagecopymerge()`。

1.  使用 bg 图像创建图像对象
2.  创建 png 图形作为新的图像对象
3.  将它们合并在一起
4.  节目

这是一个如何使用它的示例：[单击！](http://www.php.net/manual/en/image.examples.merged-watermark.php)

# sockets - 客户端服务器套接字和文件传输

> ID：11469146
> 
> 赞同：0
> 
> 时间：2012-07-13T10:58:58.720
> 
> 标签：sockets

我有一个客户端服务器应用程序，我的服务器接受来自多个客户端的连接。

客户端连接到服务器后，它向服务器发送命令，服务器发送回复，回复要么是字符串，要么是文件。

在接受连接后的服务器端，有一个套接字（与侦听套接字分开）负责与客户端通信。

在客户端向服务器发送命令后，我开始在同一个套接字上读取响应。

现在我的问题是文件，

客户端向服务器发送命令请求文件，服务器通过发送文件的二进制数据开始响应，如果文件一切正常，则传输正常，但如果在服务器端在文件传输过程中服务器出现读取问题，则无法将该问题传递给客户端，因为这是一对一的套接字通信......客户端会将任何传入数据视为文件数据，直到开始发送的文件大小不完整。，

我确信这可能是一个反复出现的模式我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T19:56:09.210

只要这些是 TCP/IP 套接字，您所需要的只是服务器和客户端之间的协议，即前八个字节（例如）send() 和 recv() 分别表示要发送的二进制数据的大小跟随。***TCP/IP 将确保所有部件都到达并为您准备好。***如果您有多种可以传输的文件，那么您同意接下来的四个字节代表文件类型的字符。所以你基本上保持recv()直到你有12个字节，这可能只需要一个recv()。然后继续使用 recv() 直到你得到你期望接收的所有字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:37:54.993

FTP 通过两个连接来做到这一点：一个命令连接和一个数据连接。

# c - 删除硬件id对应的oem.inf文件

> ID：11469148
> 
> 赞同：0
> 
> 时间：2012-07-13T10:59:08.397
> 
> 标签：c, windows, winapi, driver, device-driver

我正在使用 dpinst.exe 安装我的驱动程序。但是在安装我的驱动程序之前，我希望从与我的硬件 ID 对应的 inf 目录中删除所有 oem 文件。

我想以编程方式执行此操作。请建议我一种方法来做到这一点。

```
**Update :** 
```

我想在没有连接设备的情况下执行此操作，因为我可能会在连接设备之前预先安装驱动程序。我的设备是 PNP 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:36:19.080

1.  使用[SetupDiEnumDeviceInfo](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551010%28v=vs.85%29.aspx)和[SetupDiGetDeviceRegistryProperty](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551967%28v=vs.85%29.aspx)匹配您的硬件 ID
2.  使用[SetupDiOpenDevRegKey](http://msdn.microsoft.com/en-us/library/windows/hardware/ff552079%28v=vs.85%29.aspx)和[RegQueryValueEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911%28v=vs.85%29.aspx)读取对应的`InfPath`
3.  调用[SetupUninstallOEMInf](http://msdn.microsoft.com/en-us/library/aa377446%28v=VS.85%29.aspx)

# c# - 如何从 jQuery AJAX 调用 WebMatrix Helper 函数？

> ID：11469149
> 
> 赞同：1
> 
> 时间：2012-07-13T10:59:11.723
> 
> 标签：c#, javascript, jquery, asp.net, webmatrix

我的 App_Code 文件夹中有一个帮助方法，它返回一些要在页面上显示的 html。如何执行 jQuery/AJAX 请求来调用该方法（将 int 作为参数传递）并返回 HTML，以便我可以在页面上显示它？

我一直在到处寻找，完全不知道从哪里开始。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:08:47.170

添加另一个使用 Helper 呈现 HTML 的页面，并通过 AJAX 调用提供值。例如，您可能有一个名为 RenderHelper.cshtml 的页面：

```
@{
    var i = Request["id"].AsInt();
}

@Helpers.MyMethod(i) 
```

然后在您的调用页面中，使用 jQuery 加载函数：

```
$('#elementToFill').load('RenderHelper/?id=' + some_int); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:51:30.923

您可以使用网络服务。

在 Web 服务中调用您的类方法并使用 jQuery/Ajax 调用 Web 服务。

例如。

**类文件**

```
Class MyClass
{
public static string GetName(string Name)
{
return "My name is "+Name;
}
} 
```

**网络服务**

```
[WebService(Namespace = "WebService")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    [System.Web.Script.Services.ScriptService]
    public class YourNameIs : System.Web.Services.WebService
    {
        [WebMethod, ScriptMethod]
        public string GetName(string Name)
        {
            return MyClass.GetName(Name);
        }

    } 
```

**jQuery**

```
$.ajax(
    {
        Type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "WebService.asmx/GetName",
        data: '{Name: "' + name + '"}',
        success: function (msg) {
            alert(msg.d); //set msg to any div elemts InnerHTML like $("#yourDivElement").html(msg.d);
        }
    }); 
```

我没有测试代码，希望它会给一个想法。

# windows - 如何在 Windows 上实现重音字符？

> ID：11469151
> 
> 赞同：1
> 
> 时间：2012-07-13T10:59:34.757
> 
> 标签：windows, mfc

有关如何在 Windows 中实现重音字符的任何指针都会有所帮助。

目标 - 能够使用诸如 ctrl + ' 后跟元音之类的击键以及适用于 MS Word、文本键盘等标准应用程序的所有其他组合来添加重音字符 (áéíóú)。

**迄今为止我的发现**- 我可以在任何地方阅读与 WM_DEADCHAR 消息相关的文档/博客/论坛。我的理解是：::TranslateMessage 将对应于死键的 WM_KEYUP 消息转换为 WM_DEADCHAR 消息，并将死键生成的 WM_SYSKEYUP 消息转换为 WM_SYSDEADCHAR 消息. Windows 提供了将这些消息与字符消息组合以生成重音字符的逻辑，因此通常传递死键消息以进行默认处理。

我将此消息添加到我的 CWnd 派生类的消息映射中，但 OnDeadChar() 永远不会被调用。此外，我发现使用 SPY++，即使在 MSWord、Textpad 等可以通过这些击键组合添加重音字符的情况下，WM_DEADCHAR 消息也永远不会发送。那么，这是否意味着 WM_DEADCHAR 实际上不是解决此问题的方法？

请提供任何示例代码/步骤/机制来实现重音字符。

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:40:46.770

这完全取决于您使用的键盘布局。某些键盘布局有死键，基本上允许组合键产生更多字符。

例如，我的```键本身什么也不做，但按```then`a`会产生`à`.

在允许用户输入重音字符方面，安装允许它的键盘布局真的取决于他们。您的应用不需要处理`WM_DEADCHAR`；你可以处理`WM_CHAR`。

在您的应用程序内部支持重音字符方面，只需确保您使用的是 Unicode 字符集和类型。例如`wchar_t`/ `WCHAR`，而不是`char`。

对于它的价值，我相信我在某些时候和你有同样的目标。我创建了一个应用程序，它基本上模拟死键，并使用键盘钩子生成重音字符。优点是您无需安装键盘布局即可获得重音字符功能。

缺点还是比较多的。重新发明这个轮子是没有意义的。键盘布局非常强大，所有这些输入字符的问题都已经解决了。您将很难翻译自己的信息以生成不同的字符。不同的应用程序在这方面有不同的要求，最终您将需要完全模拟击键，直至生成键盘状态结构并处理每个键盘/字符/输入消息。因此，当您开发它时，您会注意到它在记事本上工作得很好，但在 Winword 上却不行。然后你修复了 winword，然后发现它不适用于 Qt 应用程序。我肯定会建议使用键盘布局。

但也许这不是你想要做的；在那种情况下，请忽略我所说的：D

# php - 如果找到文件中的搜索字符串，请在 PHP 中添加上面的四行

> ID：11469153
> 
> 赞同：0
> 
> 时间：2012-07-13T10:59:48.427
> 
> 标签：php, file

如果在文件中的任何位置找到字符串“test”，我想在 PHP 文件中添加四行代码。我对此进行了很多谷歌搜索，但没有得到确切的解决方案:(请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:11:06.627

您可以像这样在文件中搜索文本：

```
$data = file_get_contents('file.ext');

if(strpos($data, 'text') !== FALSE)
{
    $file_data = "Stuff you want to add\n";
    $file_data .= $data;
    file_put_contents('file.ext', $file_data);
} 
```

对于在文件末尾附加行，请使用

```
file_put_contents('file.ext', $text_to_append, FILE_APPEND | LOCK_EX); 
```

FILE_APPEND 标志用于在文件末尾附加，LOCK_EX 标志用于防止其他人同时写入文件

# php - AJAX / PHP 无法在新的 WAMP 服务器上运行

> ID：11469154
> 
> 赞同：0
> 
> 时间：2012-07-13T10:59:51.690
> 
> 标签：php, ajax, wamp

我们已经将一个 php 页面从一个 WAMP 服务器移动到另一个，而创建它的小伙子已经离开了公司。我对AJAX一无所知，所以很挣扎！

我已经在旧服务器和新服务器上搜索了代码，它们完全相同，但由于某种原因，新服务器上的 AJAX 无法正常工作，而在旧服务器上则很好。

它应该做的是显示我们数据库中的人员列表，允许用户更新这些记录，然后在不刷新页面的情况下显示新的更新记录。

在旧服务器上，它可以工作，但在新服务器上，它不会加载新数据。这可能是一些非常基础的东西，但我正在摸不着头脑（主要是因为我对这项技术一无所知！）

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:04:31.860

您确定您使用 AJAX 请求的脚本确实存在吗？您说您已经上传了脚本，但路径是否完全相同？不同的环境可能对同一个脚本有不同的路径。

另外你是如何提出 AJAX 请求的？您是否使用（例如）可能存在于一个环境中但不存在于另一个环境中的 jQuery 库？他们都使用相同版本的jQuery吗？

使用 Javascript 控制台查看您遇到的错误并从那里开始。默认情况下，Chrome 和 Firefox 有最好的。

[https://developer.mozilla.org/en/Error_Console](https://developer.mozilla.org/en/Error_Console)

在此之前，我会确保原始脚本正在运行并返回正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:23:06.237

第一次检查：

查看 Javascript 代码并找到实际 URL 的构造位置。它看起来像： xmlhttp.open("GET","yourAjaxPage.php",true); 但 xmlhttp 可以有不同的名称。

现在，只需提醒这个 URL，或 document.write()，或任何给你 url 的东西。

将此 URL 放入 browser-url 并查看响应。

如果您正在使用会话，请确保您使用与预期结果相同的浏览器（例如 TAB）。

现在您将看到服务器对您刚刚发出的请求的响应。这应该让你去发现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:03:33.520

使用错误控制台，我们看到来自服务器的错误 500（这看起来很奇怪而且相当不具体......！）

让我们认识的人看了一下代码，似乎在旧服务器上，使用 mssql_close($con); 似乎很开心；但是在新服务器上它没有，所以只需用 sqlsrv_close($con) 替换它就意味着 ajax 正在调用的页面可以完成，然后按预期返回结果！

总是小事……！

# spring - @Transactional 在 Spring 框架中导致 nosuchbeandefinitionexception

> ID：11469164
> 
> 赞同：4
> 
> 时间：2012-07-13T11:00:46.403
> 
> 标签：spring, exception, transactional

使用 @transactional 注释我的服务类的方法时遇到问题。这样的注释会在我的服务类自动装配的测试类中导致 NoSuchBeanDefinitionExcpetion。如果删除事务注释，它会再次正常工作。为什么会发生这种情况，我在 spring 文档中找不到线索。

这是我的 application-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/jdbc 
                    http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
                    http://www.springframework.org/schema/context 
                    http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<context:component-scan base-package="<mypackage...>" />

<import resource="data-context.xml"/>

<import resource="resources-context.xml"/>

<import resource="persistence-context.xml"/> 
```

这是我的 persistence-context.xml 的一部分

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/context 
                    http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSourceConnection" />
    <property name="configLocation"
        value="classpath:configuration/mybatis/config.xml"></property>
</bean>

<bean id="txManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSourceConnection" />
</bean>
<tx:annotation-driven transaction-manager="txManager" />

<bean id="accessDao" class="dao.impl.AccessDaoImpl">
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
</bean>

<bean id="utilitiesDao" class="dao.impl.UtilitiesDaoImpl">
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
</bean>

<bean id="portafoglioDao" class="dao.impl.PortafoglioDaoImpl">
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
</bean> 
```

我的测试课的一部分

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:configuration/applicationContext.xml" })
public class MyTest {

@Autowired
ApplicationContext context;

@Autowired
DriverManagerDataSource dataSourceConnection;

@Autowired
AccessAppDelegate accessApp; 
```

产生问题的类

```
@Service
public class AccessAppDelegate extends Delegate implements DelegateInterface {

private PersonalCodesManager pcm;
AccessApp accessReq;

@Override
@Transactional
public void elaborateRequestImpl() throws Exception {
    accessReq = (AccessApp) requestBean;
    if (accessReq.getLan() != null) {
        lang = StringUtilities.toLan(accessReq.getLan());
        accessDao.updateDeviceLanguage(accessReq.getUser().getImei(),
                accessReq.getLan());
    }
    if (requestWrap.getRequestType().compareTo(
            ApplicativeConsts.INTESTAZIONE_REQUEST_LOGIN) == 0)
        elaborateRequestLogin();
    else
        elaborateRequestAttivazione();
}

some private methods...

public PersonalCodesManager getPcm() {
    return pcm;
}

public void setPcm(PersonalCodesManager pcm) {
    this.pcm = pcm;
}

@Override
public String getUserId() {
    accessReq = (AccessApp) requestBean;
    return accessReq.getUser().getId();
}

@Override
public Class getRequestType() {
    return AccessApp.class;
}

} 
```

班级代表

```
@Component
public class Delegate{

String jsonReq;
String jsonRes;

@Autowired
ApplicationContext ctx;
@Autowired
AccessDao accessDao;

Locale lang;
java.sql.Timestamp timestamp;
RequestWrapper requestWrap;

UserAndDeviceTable userInfo;
AuthUserTable auth;

BaseResponse responseBean;
BaseRequest requestBean;

public void elaborateRequest(String body,boolean authenticationRequired){
    DelegateInterface endpointImplementation = (DelegateInterface) this;
    timestamp = new java.sql.Timestamp(new java.util.Date().getTime());
    if (body.startsWith("json=")){
        body = body.split("json=")[1];
    }
    requestWrap = new RequestWrapper(body);
    requestBean=requestWrap.getReq(endpointImplementation.getRequestType());
    this.jsonReq = requestWrap.getRequestBody();
    lang = StringUtilities.toLan("en");
    try {
        if (authenticationRequired) {
            auth = this.accessDao.checkSessioneAperta(requestBean.getSessionID(), timestamp);
            if(auth==null) {
                throw new Exception("Unauthorized Access");
            }else{
                setUserInfo(auth.getEmail());
            }
        }else{
            setUserInfo(endpointImplementation.getUserId());
        }
        if(userInfo!=null){
            lang=StringUtilities.toLan(userInfo.getLanguage());
        }
        endpointImplementation.elaborateRequestImpl();
    } catch (Exception e) {
        responseBean= new BaseResponse(String.valueOf(ApplicativeConsts.RC_ERRORE),ctx.getMessage(ApplicativeConsts.MSG_ERRORE_GENERAL, null, lang));
        e.printStackTrace();
    }
    try {
        ObjectMapper mapper = new ObjectMapper(); 
        this.jsonRes = mapper.writeValueAsString(responseBean);
    } catch (Exception e) {
        e.printStackTrace();
    } 
}

public ModelMap getResponse(ModelMap model) {
    // TODO Auto-generated method stub
    model.addAttribute(ApplicativeConsts.INTESTAZIONE_RESPONSE, responseBean);
    return model;
}

public void setUserInfo(String email) {
    List<UserAndDeviceTable> userList = accessDao.findUserAndDeviceTableByEmail(email);
    if (userList.size()==1){
        this.userInfo = userList.get(0);
    }
}

public String getJsonReq() {
    return jsonReq;
}

public String getJsonRes() {
    return jsonRes;
}

public BaseResponse getResponseBean() {
    return responseBean;
}

} 
```

界面

```
public interface DelegateInterface {

public void elaborateRequestImpl() throws Exception;
public ModelMap getResponse(ModelMap response);
public String getUserId();
public Class getRequestType();
} 
```

例外

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'TestClass': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: it.something.be.delegates.AccessAppDelegate it.something.controller.somethingControllerTestAuto.accessApp; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [it.something.be.delegates.AccessAppDelegate] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
                at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:374)
                at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:110)
                at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
                at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
                at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
                at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
                at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
                at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
                at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
                at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
                at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
                at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
                at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
                at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
                at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
                at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
                at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
                at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
                at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
                at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
                at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
            Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: it.something.be.delegates.AccessAppDelegate it.something.controller.somethingControllerTestAuto.accessApp; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [it.something.be.delegates.AccessAppDelegate] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
                at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
                at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
                at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
                ... 26 more
            Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [it.something.be.delegates.AccessAppDelegate] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
                at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
                at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
                at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
                at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
                ... 28 more 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T11:30:40.230

这是因为您要求 spring 自动连接到不是接口的字段。添加 @Transactional 会导致您的对象被包装在代理中 - 代理将实现该类实现的所有接口。它只能自动连接到接口类型的字段。将测试中的以下字段定义更改为相应的接口以解决问题。

```
@Autowired
AccessAppDelegate accessApp; 
```

# java - Java中文件名兼容的哈希值

> ID：11469165
> 
> 赞同：0
> 
> 时间：2012-07-13T11:00:50.643
> 
> 标签：java, hash, filenames

为了在用户提供的文件的文件系统名称中生成一些唯一性，我生成了一些其他用户提供的数据的哈希值（在这种情况下是用户的 IP 地址和一个随机整数），并在文件名前加上它。我选择了 SHA-1 算法来执行这个哈希。不幸的是，从返回的字符串

```
md = MessageDigest.getInstance("SHA-1");
// Add values to the digest
String ipAddrHash = new String(md.digest()); 
```

...当然包含各种奇怪的外来字符，其中大部分是文件名中不允许的。

所以，要么：

*   如何将哈希值字符串转换为包含可在文件名中使用的“常规字符”的字符串？
*   Java 中是否有一个简单的单向函数可供我使用，它会为我立即在文件名中使用生成一个不可逆的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:04:35.010

您可以[将字节编码为十六进制](http://commons.apache.org/codec/api-release/org/apache/commons/codec/binary/Hex.html#encodeHexString%28byte%5B%5D%29)以获得可打印的文件名。但是您的算法不能保证唯一性。

或者您可以简单地使用[UUID](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)或从数据库序列返回的序列号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:05:13.067

尝试：

```
String filename=UUID.randomUUID().toString() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:04:47.533

如果只是唯一性，请使用`java.util.UUID`. FWIW，我有类似的要求，这就是我用来解决它的方法（在 linux 和 windows 上运行的软件）。UUID 仅包含字母数字和连字符，因此不会出现文件系统字符不兼容的问题并保证唯一性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:06:15.303

您可以使用 Base32 或 Base64 对返回的字符串进行编码，并将“/”字符替换为安全字符（例如：“_”）。

# time - 计算给定时间戳集的持续时间

> ID：11469170
> 
> 赞同：0
> 
> 时间：2012-07-13T11:00:59.473
> 
> 标签：time, php

我有一组 intime 和 outtime，我想计算 intime 和 outtime 之间的持续时间并添加所有持续时间以获得总持续时间。
例子：

```
Array
    (
    [1] => Array
        (
            ['intime'] => 1342086993
            ['outime'] => 1342087585
        )

    [3] => Array
        (
            ['intime'] => 1342087669
            ['outtime] => 1342096165
        )

    [5] => Array
        (
            ['intime'] => 1342096339
            ['outime'] => 1342096345
        )
    )

$total_duration = 0;
foreach($logArray as $log)
{
  $duration = $log['outime'] - $log['intime'];
  $total_duration += $duration;
}

$duration_hrs = $total_duration/3600;
echo 'Time spend in hrs :'.$duration_hrs; 
```

但这并没有给我适当的持续时间。有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:05:25.350

使用[array_map](http://php.net/array_map)首先将每个元素映射到持续时间，然后[使用 array_sum](http://php.net/array_sum)对它们求和：

```
$durations = array_map(function ($e) {
  return $e['outtime'] - $e['intime'];
}, $logArray);
$total_duration = array_sum($durations); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:03:20.250

```
$total_duration = 0;
foreach($logArray as $log)
{
  $duraton = $log['outtime'] - $log['intime'];
  $total_duration += $duration;
}
$duration_hrs = $total_duration/3600;
echo 'Time spend in hrs :'.$duration_hrs; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:18:12.550

您的无语法脚本对我来说很好：

```
<?php

    $logArray = Array (
        1 => Array (
            'intime' => 1342086993,
            'outime' => 1342087585
        ),
        3 => Array (
            'intime' => 1342087669,
            'outime' => 1342096165
        ),
        5 => Array (
            'intime' => 1342096339,
            'outime' => 1342096345
        )
    );

    $total_duration = 0;
    foreach( $logArray as $log ) {
      $duration = $log[ 'outime' ] - $log[ 'intime' ];
      $total_duration += $duration;
        echo $duration / 3600 . "<br />";
    }

    $duration_hrs = $total_duration / 3600;
    echo 'Time spend in hrs: ' . $duration_hrs;

?> 
```

和输出：

```
0.16444444444444
2.36
0.0016666666666667
Time spend in hrs: 2.5261111111111 
```

似乎您的时间格式不正确：`13, July 2012 04:04:32 PM`应该`13\. July 2012 04:04:32 PM`是

```
strtotime('13\. July 2012 04:04:32 PM') 
```

正确工作。它应该给`1342195472`而不是你`1342168834`。因此，请检查生成错误微时间的时间格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:44:46.540

您的代码中有一个简单的错字。检查：

```
duraton vs duration 
```

改变，会好的。

# android - Android - 服务保持活力

> ID：11469171
> 
> 赞同：0
> 
> 时间：2012-07-13T11:01:01.410
> 
> 标签：android, service

系统有问题。我有运行服务，它会不断检查位置并计算用户启动后的距离和时间。但在 20-25 分钟后，与其他应用程序服务的许多交互被终止。

我该如何预防？

我正在考虑添加第二项服务，这将使我保持活力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:50:26.610

不确定这是否适合您，但这就是我实现它的方式：

在我的情况下，我需要一个服务每隔 X 分钟在后台继续运行，并且每当它关闭时（无论是由于内存使用还是主要活动进入后台并且 Android 清理它）它都会在下一次重新触发时再次触发达到时间间隔。我有以下组件和工作流程：

1.  活动 A. 主要活动，我的应用程序的起点。
2.  Service S. 我想在后台运行的服务，做它需要做的任何事情，
    完成后关闭，每隔 X 分钟重新启动一次。

Activity onCreate 方法将创建一个**PendingIntent**，并传递它本身和服务 S，如下所示：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Create an IntentSender that will launch our service, to be scheduled
    // with the alarm manager.
    periodicIntentSender = PendingIntent.getService(
              ActivityX.this, 0, new Intent(ActivityX.this, ServiceS.class), 0); 
```

在我的活动中，我实现了一个**AlarmManager**，它将“ **periodicIntentSender** ”（上面定义的）作为参数并根据用户偏好（connection_Interval）发送意图：

```
// Schedule the alarm to start
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.setRepeating(
  AlarmManager.ELAPSED_REALTIME_WAKEUP, 0, connection_Interval, periodicIntentSender); 
```

AlarmManager 将确保每 X 分钟发送一次意图。我的 Service S 一直在监听这个 Intent 并在每次发送这样的 Intent 时被唤醒。一旦再次触发服务，就会调用其**onHandleIntent**方法。

```
public class ServiceS extends IntentService implements LocationListener {
.
.
   /*
    * (non-Javadoc)
    * 
    * @see android.app.IntentService#onHandleIntent(android.content.Intent)
   */
    @Override
    protected void onHandleIntent(Intent intent) {
      <WHATEVER YOU NEED TO DO>
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:05:18.380

> 但在 20-25 分钟后，与其他应用程序服务的许多交互被终止。

最有可能是由于内存使用过多，然后自动内存管理器杀死了您的进程或长时间运行的操作，就像*@AljoshaBre 一样*。

> 我该如何预防？

所以我的第一个想法是检查你`Service`是否以某种生命周期方法运行，例如`onResume()`，如果没有，你应该重新启动`Service`并再次执行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:34:32.347

# 1、最小化你的服务的内存使用

# 2、让你服务前台，例如在服务的onCreate方法中

```
@Override
public void onCreate()
{
     super.onCreate();

     Notification notification = new Notification(R.drawable.icon_app_small, getText(R.string.app_name),System.currentTimeMillis());
     Intent notificationIntent = new Intent(this, [yourService].class);
     PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
     notification.setLatestEventInfo(this, [name string], [notification msg string], pendingIntent);
     startForeground(Notification.FLAG_ONGOING_EVENT, notification);
} 
```

# c# - 变量不在 C# 中保存数据

> ID：11469176
> 
> 赞同：-3
> 
> 时间：2012-07-13T11:01:10.137
> 
> 标签：c#, variables

我一直想知道为什么我的变量没有保存数据。这是我的代码

```
class MainProg
{
  public string name;
  static void Main()
  {
   MainProg m = new MainProg();
   m.Start();
  }
  public void Start()
 {
 Register rs = new Register();
    Register r = (Register)rs;

    r.run();
    Console.WriteLine(name);

 }

}

class Register : MainProg
{
  public void run()
  {
    name = "a";
  }
} 
```

我忘了什么吗？每次我尝试显示输出时它什么都没有显示。顺便感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:05:09.330

这将起作用。

```
class MainProg
{

    static void Main()
    {
        Register rs = new Register();
        Register r = (Register)rs;

        r.run();
        Console.WriteLine(r.name);
    }

}

class Register : MainProg
{
    public string name;
    public void run()
     {
        name = "a";
     }
} 
```

您的代码失败的原因是您正在创建一个 Register 实例，尽管它从 MainProg 继承，但它与 MainProg 是分开的。您在新实例中设置变量，然后从旧实例中读取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:05:13.040

`name`是一个实例字段，因此您需要引用一个`object`.

尝试，

```
Console.WriteLine(r.name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:04:28.830

因为您在调用 Register 的实例中更改名称，所以`r`您在 MainProg 的实例中打印 var 名称。

为了证明它尝试：

```
Console.WriteLine(r.name); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:05:30.170

由于您试图访问静态函数中的成员变量，因此会引发编译错误。

尝试使用对象访问变量，例如

```
Console.WriteLine(r.name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T11:13:49.493

问题是您正在尝试从此对象写入名称。您更改的变量位于另一个对象“r”中。

# objective-c - beginSheet modalForwindow：零位置？

> ID：11469178
> 
> 赞同：0
> 
> 时间：2012-07-13T11:01:15.510
> 
> 标签：objective-c, cocoa, cocoa-sheet

我试图了解如何

```
- (void)beginSheet:(NSWindow *)sheet modalForWindow:(NSWindow *)docWindow modalDelegate:(id)modalDelegate didEndSelector:(SEL)didEndSelector contextInfo:(void *)contextInfo 
```

选择我的窗口上的位置，因为它是无窗口的模式？（我传递`nil`给`modalForWindow :)

第一个位置是在 Interface builder 中定义的位置。一旦我第一次关闭它，每次重新打开它，它都会在屏幕的一半顶部居中。不可能总是打开相同的位置吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:18:51.163

`-[NSApplication runModalForWindow:]`如果您只想显示模式窗口，请使用。

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsapplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/runModalForWindow](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsapplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/runModalForWindow)：

# sql-server - 档案系统中的数据库规范化

> ID：11469182
> 
> 赞同：1
> 
> 时间：2012-07-13T11:01:34.143
> 
> 标签：sql-server, database, normalization

截至目前，我已将数据标准化为第 4 种形式。我想创建将存储在其他服务器上的存档系统。还有问题：在存档系统中将所有数据存储在一个表中（或者不是一个但无论如何非规范化）不是更好吗？因为我永远不会执行删除或更新操作。这样存档系统（主要为分析而设计）将运行得更快。你怎么看？我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:36:53.027

您应该阅读**“数据仓库”**和**“商业智能”**的主题。为报告和分析保留非规范化的历史数据副本非常常见。

这不是一件容易的事，因为您可能想要报告最近的历史，而不仅仅是遥远的历史，因此当发现和纠正错误时，您的非规范化数据可能需要比您想象的更多地更新。

这是一个非常广泛的主题，但有很多书籍和博客可以指导您。

# android - Visual Basic 2010 和 Android 之间的 Web 服务

> ID：11469187
> 
> 赞同：0
> 
> 时间：2012-07-13T11:01:53.607
> 
> 标签：android, visual-studio-2010, wifi, android-wifi

我正在制作一个项目来帮助餐厅订单系统.. 所以收银员使用应用程序构建在 Visual Basic 2010 中，服务员/女服务员将使用 android 作为菜单簿，他们会将数据订单发送到服务器。

我的问题是：我想通过 wifi 将我在 Visual Basic (.mdf) 数据库中的数据传输到小工具 android。到目前为止，我能够通过 TCP 套接字将字符串从 android 传输到 VB 2010。

请帮助了解通过 wifi 传输数据库的概念或最佳方式，一本书/参考资料或一些带有简单代码的教程会很好:)

Visual Basic和Android中的数据库具有相同的结构:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:04:47.693

您可以创建本地 Web 服务并使用 ksoap 2 库来执行此操作。这是我认为最好的方法..

这是教程[http://seesharpears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html](http://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html)

# php - Symfony 2 依赖注入：是否可以通过类名获取服务？

> ID：11469189
> 
> 赞同：2
> 
> 时间：2012-07-13T11:02:04.077
> 
> 标签：php, symfony, dependency-injection

传统上，您会以这种方式使用服务容器：

```
$container->get('my_service'); 
```

但是，如果只存在一个特定类的定义，我想按类名获取此服务：

```
$container->xxx('My\Application\Service'); 
```

[服务容器](http://symfony.com/doc/current/book/service_container.html)可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:20:25.750

不，这是不可能的，因为：

*   一个类可以（并且在许多情况下会）出现不止一次 [1]
*   使用 DIC 的主要原因是将具体实现与其用法分离，因此如果您想要具体类的实例，则根本不需要 DIC。

[1] 说这一类只出现一次并不是在 DIC 本身中实现边缘情况的好论据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-10T23:19:05.553

从 Symfony 3.3 开始就有可能：

例如，如果您有这样的 UserManager：

```
services:
# ...
# traditional service definition
app.manager.user:
    class: AppBundle\EventListener\UserManager
    tags:  ['kernel.event_subscriber'] 
```

那么您可以通过以下方式获得它：

```
// before Symfony 3.3
$this->get('app.manager.user')->save($user);

// Symfony 3.3+
$this->get(UserManager::class)->save($user); 
```

[资源](https://symfony.com/blog/new-in-symfony-3-3-optional-class-for-named-services)

# javascript - jQuery 参数动态对象名称

> ID：11469192
> 
> 赞同：0
> 
> 时间：2012-07-13T11:02:08.100
> 
> 标签：javascript, jquery

为什么我不能在对象中有变量？我收到如下错误：

```
"Uncaught SyntaxError: Unexpected token this" 
```

我的代码是这样的。

```
$("#search_options input:checkbox").on('click', function() {
  var params = { 
    $(this).attr('name') : $(this).val(),
  };
  var str = jQuery.param(params);
}); 
```

我确定 $(this) 正在工作，因为我试图在 params 对象之外控制台.log 它然后我正在工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:05:23.767

对象文字不能有变量属性名称。您必须像这样分配属性：

```
...
var params = {};
params[$(this).attr('name')] = $(this).val();
var str = jQuery.param(params); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:05:13.783

如果要将变量的值用作属性名称，则必须使用以下语法：

```
var params = {}

params[$(this).attr('name')] = $(this).val(); 
```

您尝试使用的文字表示法要求属性名称是有效的 JavaScript 标识符。

# sql - 如何获得 DISTINCT A 列和 B 列的 SUM？

> ID：11469193
> 
> 赞同：1
> 
> 时间：2012-07-13T11:02:09.417
> 
> 标签：sql, sql-server

我对编码比较陌生，并尝试过寻找解决方案，但不完全确定如何表达我的问题。实现我需要的结果的最简单方法是什么，如以下示例中所述？我正在使用 MSSQL。

```
SELECT Unit, Quantity FROM SomeTable WHERE Parameter1 = 'x'
```

给我结果：

```
单位 | 数量
---------------
一个 | 10
乙 | 10
c | 10
一个 | 10

```

这是我需要的结果：

```
单位 | 数量
---------------
一个 | 20
乙 | 10
c | 10

```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:05:17.863

添加一个[`GROUP BY`](http://msdn.microsoft.com/en-us/library/ms177673.aspx)这样就可以为您解决问题。

```
SELECT Unit, Sum(Quantity)
FROM SomeTable
WHERE Parameter1 = 'x'
GROUP BY Unit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:24:44.707

当您选择行时，SQL 会单独查看每一行，除非使用“聚合函数”。例如，聚合是 sum()、count()、avg()、min() 和 max()。（还有更多，在许多供应商的 SQL 包中。）这就是为什么您最终在结果集中得到 A 的两个“副本”；SQL 单独显示它们中的每一个，因为它们是两个不同的行。相反，您可以使用这些函数来查找聚合值。

当 SQL 查看聚合时，它需要知道要检查哪些行。默认情况下，如果查询中使用的所有数量都是聚合的，它会查看所有行。例如，在您的示例中，`Select Sum(Quantity) from SomeTable where Parameter1='x'`将返回`40`, 列中与条件匹配的所有值的总和。

您正在寻找一组行的聚合，在这种情况下，是具有相同`Unit`值的项目。要告诉 SQL，您需要告诉它如何使用`Group By`子句定义组。正如 Bluefeet 的回答所指出的，这可以通过编写：

```
SELECT Unit, Sum(Quantity)
FROM SomeTable
WHERE Parameter1 = 'x'
GROUP BY Unit 
```

作为一般指针，如果您想在不分组的情况下查找聚合和值，则查询将失败。例如，如果您不想将查询限制为 Parameter1='x'，而是想查看与行关联的参数，您可能只想将其添加到选择列表中，`SELECT Unit, Sum(Quantity), Parameter1...`然后运行查询。这是行不通的，因为 SQL 不知道要查看哪一行来查找参数。

如果需要，您可以按多列分组。如果需要更复杂的组，可以使用更多技巧。例如，您可以对 case 语句或行的函数进行分组，以查找所有偶数项目的总和，或超过 100 个单位的订单的平均订单大小。

# php - 触发 Yii 字段验证 onchange 另一个字段

> ID：11469194
> 
> 赞同：5
> 
> 时间：2012-07-13T11:02:11.267
> 
> 标签：php, javascript, yii

我在 Yii 模型中有两个相关领域。它们是 items_per 和 items_period。

**items_per**是一个整数，它反映了在给定时间段内要处理的项目数。

**items_period**是该时间段内的秒数（带有标记为秒、分钟、小时的选项的下拉菜单）。将 items_per 乘以 items_period，您就有了“每秒项目数”。

我设置了一个自定义验证规则，以限制每秒的项目超过一定数量。当您更改 items_per 字段中的值（在模糊时）时，一切正常，并使用 ajax 验证给出合理的错误消息。

我需要在 items_period 字段更改时触发 items_per 字段的验证（可能不允许 100 / 秒，但 100 / 分钟是）。

我尝试在 items_per 下拉列表中添加一个 onchange 函数来触发 items_per 字段上的“模糊”或“更改”，但它似乎没有发出 ajax 验证请求。提交表单只是为了触发验证不是一种选择，因为它可能没有任何错误，只是在用户准备好之前保存记录。

有什么建议可以强制一个字段在另一个字段中触发 ajax 验证吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:25:05.597

*如果您定义自定义验证*器扩展[`CValidator`](http://www.yiiframework.com/doc/api/1.1/CValidator/).

对于“普通”验证，使用正确的属性名称和参数设置验证器并覆盖该[`validateAttribute`](http://www.yiiframework.com/doc/api/1.1/CValidator#validateAttribute-detail)方法。

对于客户端验证，另外覆盖该[`clientValidateAttribute`](http://www.yiiframework.com/doc/api/1.1/CValidator#clientValidateAttribute-detail)方法。如果为表单启用了客户端验证，这将导致您的自定义 JS 被自动调用以验证输入。从覆盖中，您将输出[在此上下文中运行的](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/web/widgets/CActiveForm.php#482)JS 代码：

```
function(value, messages, attribute) {
    // your code goes here
    // value: current value of attribute
    // messages: array of strings (validation errors) you should append to
    // attribute: name of the attribute
} 
```

[您可以通过示例](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/validators/CNumberValidator.php#118)了解内置验证器在此框架中的工作方式。另请参阅[`CActiveForm.clientOptions`](http://www.yiiframework.com/doc/api/1.1/CActiveForm#clientOptions-detail)。

对于 AJAX 验证，您*可以*提交表单进行验证。这个想法是您将验证配置为包括一个特殊参数（例如`ajax=something`）或排除一个（例如不包括您的提交按钮的值）。**事实上，Yii 已经通过`ajax=formId`在所有 AJAX 验证请求中自动包含一个参数来做到这一点！**

通过这种方式，您可以轻松编写始终验证但仅在需要时才保存的控制器代码。在 Yii 参考中也有一个示例[`CActiveForm`](http://www.yiiframework.com/doc/api/1.1/CActiveForm)（搜索“要响应 AJAX 验证请求，我们需要以下类代码：”）。

最后，您可以通过调用 Javascript 以编程方式设置任何属性的验证状态[`$.fn.yiiactiveform.updateInput`](http://code.google.com/p/yii/source/browse/tags/1.1.10/framework/web/js/source/jquery.yiiactiveform.js#239)。如果你这样做，最好通过跟注来继续模仿 Yii `$.fn.yiiactiveform.updateSummary`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T11:34:58.613

我创建了以下 javascript 函数，在更改特定字段时手动调用该函数。它对所有表单元素执行 ajax 验证。

```
/**
 * @作者marcovtwout
 * 强制对给定表单执行完整的 ajax 验证。
 * @param Object $form jQuery 表单对象
 */
performFullAjaxValidation = function($form){
    var settings = $form.data("settings");
    $.each(settings.attributes, function () {
        this.status = 2; // 强制ajax验证
    });
    $form.data("设置", 设置);

    // 触发ajax验证
    $.fn.yiiactiveform.validate($form, function (data) {
        $.each(settings.attributes, function () {
            $.fn.yiiactiveform.updateInput(this, data, $form);
        });
        $.fn.yiiactiveform.updateSummary($form, data);
    });
}

```

# android - 如何使用 GPRS 连接启动 Android 应用程序

> ID：11469195
> 
> 赞同：-1
> 
> 时间：2012-07-13T11:02:16.160
> 
> 标签：android, service, gprs

[我在这里](https://stackoverflow.com/questions/3397286/android-launch-an-app-from-remote-server)阅读了类似的问题，但找不到合适的答案。所以我的问题是有什么方法可以使用 GPRS 连接远程启动应用程序，或者当有 GPRS 连接可用时如何向应用程序发送通知以启动服务。

备注：Google Cloud Messaging 也不是我的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:36:21.123

您可以使用[Google Cloud Messaging (GCM)](http://developer.android.com/guide/google/gcm/index.html)，它是 Cloud to Device Messaging (C2DM) 的继任者。

# sql-server-2008 - 在 SQL Server 2008 中获取当前时间的更简单方法

> ID：11469197
> 
> 赞同：3
> 
> 时间：2012-07-13T11:02:19.527
> 
> 标签：sql-server-2008, time

我需要将当前时间（格式`'hi'`）作为 char(4) 存储在表中（由另一个程序创建和使用，我无法更改它），现在想知道什么是通过 SQL 检索它的合适方法。我知道 MySQL 不是那种面向标准的，但我认为它可能类似于`DATE_FORMAT(NOW(), 'Hi').`
我发现的下面的代码，但感觉并不复杂。

```
SELECT CAST(DATEPART(hour, GETDATE()) AS nvarchar)+CAST(DATEPART(minute, GETDATE()) AS nvarchar); 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:26:04.927

以下给出了相同的结果：

```
SELECT LEFT(STUFF(CONVERT(NCHAR(8), GETDATE(), 8), 3, 1,''), 4) 
```

它似乎与问题中的方法具有大致相同的性能。我是这样测试的：

```
DECLARE @i INT = 0,
        @dto1 DATETIME2,
        @dto2 DATETIME2

SET @dto1 = SYSDATETIME()
WHILE @i < 100000
BEGIN
    PRINT LEFT(STUFF(CONVERT(NCHAR(8), GETDATE(), 8), 3, 1,''), 4)
    SET @i = @i + 1
END 
SET @dto2 = SYSDATETIME()

SELECT DATEDIFF(MILLISECOND, @dto1, @dto2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:53:37.853

Sql Server 2008 有一个`time`数据类型：

```
select replace(left(cast(getdate() as time), 5), ':', '') 
```

# zend-framework - Zend_Http_Client_Adapter_Exception 错误 #0

> ID：11469198
> 
> 赞同：3
> 
> 时间：2012-07-13T11:02:24.170
> 
> 标签：zend-framework, exception, ssl

我使用 Zend 库，尤其是 Loader 类。但我有以下例外：

```
Uncaught exception 'Zend_Http_Client_Adapter_Exception' with message 'Unable to Connect to ssl://www.googleapis.com:443\. Error #0: 
```

我应该说，当我在本地运行我的代码时，我没有遇到任何问题，但是当我尝试在服务器中运行我的文件时出现异常。我使用的服务器具有 ssl 安全性。有没有可能与它有任何冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-07-08T12:45:10.683

如果你在 Ubuntu 上尝试添加你的`php.ini`

```
openssl.capath=/etc/ssl/certs 
```

[有关更多信息，请阅读此问题](https://github.com/zendframework/zendframework/issues/2535)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T05:12:11.770

此错误可能是由 SSL 级别错误引起的，例如不受信任/过期的 SSL 证书，这可能是由错误的本地系统日期引起的。

# php - PHP从带有url的变量中获取参数

> ID：11469200
> 
> 赞同：0
> 
> 时间：2012-07-13T11:02:31.607
> 
> 标签：php, javascript, url-parameters

我想从保存 URL 的变量中获取参数。
我得到了以下变量：`$lastPage`它包含上一页的 URI。

我想从中获取一个参数。
我在 javascript 中得到了以下脚本（我将其用于其他用途）

```
function getUrlVar(key)
{
    var result = new RegExp(key + '=([^&]*)', 'i').exec(window.location.search);
    return result && unescape(result[1]) || '';
} 
```

我想要类似的东西，但对于 PHP。

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:10:51.697

```
$url = 'http://php.net/manual/en/function.parse-url.php?id=my_awesome_id';
$arr = parse_url($url);
parse_str($arr['query']);
echo $id; // my_awesome_id 
```

参考：

[parse_str](http://www.php.net/manual/en/function.parse-str.php)

[解析网址](http://php.net/manual/en/function.parse-url.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:03:51.173

您可以在 php 中使用`preg_match()`or `preg_match_all()`，这将为您提供正则表达式功能。

[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

# wpf - 组合框不允许我选择项目

> ID：11469207
> 
> 赞同：0
> 
> 时间：2012-07-13T11:03:07.460
> 
> 标签：wpf, combobox

我有以下组合框

```
<ComboBox Grid.Column="1" HorizontalAlignment="Stretch"
                              Text="{Binding GroupInvoicing.AdminInvoiceBreakdownMembership}" 
                              SelectedValuePath="Tag" SelectedValue="{Binding Path=GroupInvoicing.AdminInvoiceBreakdownMembership}">
                        <ComboBoxItem Content="None" Tag="N" />
                        <ComboBoxItem Content="Level of Cover" Tag="L" />
                        <ComboBoxItem Content="Members" Tag="M" />
                        <ComboBoxItem Content="Payment Type" Tag="P" />
                        <ComboBoxItem Content="Work Area" Tag="W" />
                    </ComboBox> 
```

尽管 GroupInvoicing.AdminInvoiceBreakdownMembership 以“L”返回，但它不选择对应的文本，也不让我选择任何内容

```
d:DataContext="{d:DesignInstance ViewModels:CompanyInvoiceConfigAdminViewModel}" 
```

在视图模型中我有

```
 public GroupInvoicing GroupInvoicing
    {
        get
        {
            return this.groupInvoicing;
        }

        set
        {
            if (value != null)
            {
                this.groupInvoicing = value;
                this.OnPropertyChanged(() => this.GroupInvoicing);
            }
        }
    } 
```

AdminInvoiceBreakdownMembership 是一个字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:47:41.093

我相信你不能将 Text 和 SelectedValue 绑定到同一个属性。尝试删除文本绑定。

# java - 如何使用 检查多个角色？

> ID：11469211
> 
> 赞同：48
> 
> 时间：2012-07-13T11:03:15.600
> 
> 标签：java, spring, spring-mvc, spring-security

我想使用 Spring Security JSP 标签库根据角色有条件地显示一些内容。但是在 Spring Security 3.1.x 中只检查一个角色。

我可以使用，但不推荐使用**ifAllGranted**。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-07-13T11:11:25.653

spring security中有一个特殊的安全表达式：

> *hasAnyRole(list of roles)* - 如果用户已被授予任何指定的角色（以逗号分隔的字符串列表形式给出），则为 true。

我从未使用过它，但我认为这正是您正在寻找的。

示例用法：

```
<security:authorize access="hasAnyRole('ADMIN', 'DEVELOPER')">
    ...
</security:authorize> 
```

这是描述标准弹簧安全表达式[的参考文档的链接。](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)此外，这里是一个[讨论](https://stackoverflow.com/questions/8321696/creating-new-roles-and-permissions-dynamically-in-spring-security-3/10451102#10451102)，我在其中描述了如何在需要时创建自定义表达式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-18T00:50:12.867

@dimas 的回答在逻辑上与您的问题不一致；`ifAllGranted`不能直接替换`hasAnyRole`。

来自[Spring Security 3—>4 迁移指南](http://docs.spring.io/spring-security/site/migrate/current/3-to-4/html5/migrate-3-to-4-xml.html#m3to4-deprecations-taglibs)：

老的：

```
<sec:authorize ifAllGranted="ROLE_ADMIN,ROLE_USER">
    <p>Must have ROLE_ADMIN and ROLE_USER</p>
</sec:authorize> 
```

新（SPeL）：

```
<sec:authorize access="hasRole('ROLE_ADMIN') and hasRole('ROLE_USER')">
    <p>Must have ROLE_ADMIN and ROLE_USER</p>
</sec:authorize> 
```

`ifAllGranted`直接替换为`hasAnyRole`将导致 spring 使用 an`OR`而不是`AND`. 也就是说，如果经过身份验证的主体包含*至少一个*`hasAnyRole`指定角色，则将返回，而 Spring（现在从 Spring Security 4 开始不推荐使用）方法仅在经过身份验证的主体包含*所有*指定角色时才返回。`true`*`ifAllGranted``true`*

 ****TL;DR**：要复制`ifAllGranted`使用 Spring Security Taglib 的新身份验证表达式语言的行为，`hasRole('ROLE_1') and hasRole('ROLE_2')`需要使用该模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-18T07:59:49.843

如果您使用的是百里香，您可以尝试这种方式

```
sec:authorize="hasAnyRole(T(com.orsbv.hcs.model.SystemRole).ADMIN.getName(),
               T(com.orsbv.hcs.model.SystemRole).SUPER_USER.getName(),'ROLE_MANAGEMENT')" 
```

如果用户具有提到的角色，这将返回 true，否则返回 false。

**请注意，您必须像这样在 html 声明标签中使用 sec 标签**

```
<html xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-13T13:33:51.327

我用过`hasAnyRole('ROLE_ADMIN','ROLE_USER')`，但我在错误下创建了 bean

```
Error creating bean with name     'org.springframework.security.web.access.intercept.FilterSecurityInterceptor#0': Cannot create inner bean '(inner bean)' of type [org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource] while setting bean property 'securityMetadataSource'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#2': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.web.access.expression.ExpressionBasedFilterInvocationSecurityMetadataSource]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: Expected a single expression attribute for [/user/*] 
```

然后我尝试了

`access="hasRole('ROLE_ADMIN') or hasRole('ROLE_USER')"`它对我来说很好。

因为我的用户之一是管理员和用户。

为此，您需要添加`use-expressions="true" auto-config="true"`后跟 http 标记

```
<http use-expressions="true" auto-config="true" >.....</http> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-28T16:10:58.857

在 Spring Boot 2.4 中，它是

```
sec:authorize="hasAnyRole('ROLE_ADMIN') 
```

确保您有

> thymeleaf-extras-springsecurity5

在您的依赖项中。还要确保包含命名空间

```
xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
```

在你的 html...**

# c# - 序列化包含自定义对象的字典，其中包括两个字典

> ID：11469214
> 
> 赞同：1
> 
> 时间：2012-07-13T11:03:26.890
> 
> 标签：c#, xml, xml-serialization

在我的程序中，我将一些数据保存在自定义对象中：

```
 [Serializable]
    [XmlInclude(typeof(MsgTimerSettings))]
    public class MsgTimerSettings
    {
        public string t_name { get; set; }
        public string t_subj { get; set; }
        public string t_nmsg { get; set; }
        public UUID t_attach { get; set; }
        public string t_attachName { get; set; }
        public Dictionary<string, UUID> t_ngroups { get; set; }
        public Dictionary<string, UUID> t_imgroups { get; set; }
        public string t_IMmsg { get; set; }
        public string t_SLURL { get; set; }
        public int t_Type { get; set; }
        public int t_IMsetting { get; set; }
        public int t_ImgIndex { get; set; }
        public bool t_StartNow { get; set; }
        public DateTime t_StartTime { get; set; }
        public bool t_EndAt { get; set; }
        public DateTime t_EndTime { get; set; }
        public int t_Number { get; set; }
        public string t_Period { get; set; }
        public int t_Interval { get; set; }
        public bool t_Active { get; set; }
    } 
```

然后将这些对象中的每一个存储在 Dictionary(Dictionary MsgTimers;) 中，字典键是计时器的名称。

现在，我想做的是将这些对象中的每一个保存到一个 XML 文件中，以便下次启动程序时可以读回计时器。

我知道字典不可序列化，我试图找到不同的解决方案来解决这个问题，但无济于事。

我尝试使用在以下位置提供的 SerializableDictionary 解决方法：[http](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx) ://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx以制作可序列化的字典，但不仅仅是将我的字典制作成 SerializableDictionaries ，我还是没有头绪...

我尝试序列化的代码如下：

```
 static public void SerializeToXML(SerializableDictionary<string, object> ST)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(SerializableDictionary<string,object>));
        TextWriter textWriter = new StreamWriter(@"C:\ST.xml");
        serializer.Serialize(textWriter, ST);
        textWriter.Close();
    } 
```

希望任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:33:48.500

要在不引入可序列化字典的情况下序列化/反序列化字典，我使用这个类：

```
public class DictionarySerializer : IXmlSerializable
{
    private Dictionary<string, object> _dictionary;

    private DictionarySerializer()
    {
        this._dictionary = new Dictionary<string,object>();
    }

    private DictionarySerializer(Dictionary<string, object> dictionary)
    {
        this._dictionary = dictionary;
    }

    public static void Serialize(StreamWriter stream, Dictionary<string, object> dictionary)
    {
        DictionarySerializer ds = new DictionarySerializer(dictionary);
        XmlSerializer xs = new XmlSerializer(typeof(DictionarySerializer));
        xs.Serialize(stream, ds);
    }

    public static void Serialize(Stream stream, Dictionary<string, object> dictionary)
    {
        DictionarySerializer ds = new DictionarySerializer(dictionary);
        XmlSerializer xs = new XmlSerializer(typeof(DictionarySerializer));
        xs.Serialize(stream, ds);
    }

    public static Dictionary<string, object> Deserialize(Stream stream)
    {
        XmlSerializer xs = new XmlSerializer(typeof(DictionarySerializer));
        DictionarySerializer ds = (DictionarySerializer)xs.Deserialize(stream);
        return ds._dictionary;
    }

    public static Dictionary<string, object> Deserialize(TextReader stream)
    {
        XmlSerializer xs = new XmlSerializer(typeof(DictionarySerializer));
        DictionarySerializer ds = (DictionarySerializer)xs.Deserialize(stream);
        return ds._dictionary;
    }

    XmlSchema IXmlSerializable.GetSchema()
    {
        return null;
    }

    void IXmlSerializable.ReadXml(XmlReader reader)
    {
        reader.Read();
        ReadFromXml(reader);
    }

    private void ReadFromXml(XmlReader reader)
    {
        reader.ReadStartElement("dictionary");
        while (reader.NodeType != XmlNodeType.EndElement)
        {
            reader.ReadStartElement("item");
            string key = reader.ReadElementString("key");
            reader.ReadStartElement("value");
            object value = null;
            if (reader.Name == string.Empty)
            {
                value = reader.Value;
                reader.Read();
            }
            else if (reader.Name == "dictionary")
            {
                DictionarySerializer innerSerializer = new DictionarySerializer();
                innerSerializer.ReadFromXml(reader);
                value = innerSerializer._dictionary;
            }
            reader.ReadEndElement();
            reader.ReadEndElement();
            reader.MoveToContent();
            _dictionary.Add(key, value);
        }
        reader.ReadEndElement();
    }

    void IXmlSerializable.WriteXml(XmlWriter writer)
    {
        writer.WriteStartElement("dictionary");
        foreach (string key in _dictionary.Keys)
        {
            object value = _dictionary[key];
            writer.WriteStartElement("item");
            writer.WriteElementString("key", key.ToString());
            if (value is Dictionary<string, object>)
            {
                writer.WriteStartElement("value");
                IXmlSerializable aSer = new DictionarySerializer((Dictionary<string, object>)value);
                aSer.WriteXml(writer);
                writer.WriteEndElement();
            }
            else
                writer.WriteElementString("value", value.ToString());
            writer.WriteEndElement();
        }
        writer.WriteEndElement();
    }
} 
```

然后我使用这种代码来序列化/反序列化字典：

```
 Dictionary<string, object> d = new Dictionary<string, object>();
        // fill the dictionary
        StreamWriter sw = new StreamWriter(pth);
        DictionarySerializer.Serialize(sw, d);
        sw.Close();

        StreamReader sr = new StreamReader(pth);
        Dictionary<string, object> d2 = DictionarySerializer.Deserialize(sr);
        sr.Close(); 
```

# vba - VBA在不打开的情况下在封闭的excel中添加新工作表并添加工作表名称？

> ID：11469215
> 
> 赞同：3
> 
> 时间：2012-07-13T11:03:27.387
> 
> 标签：vba, excel

我有一个当前未打开的 excel“Closed.Xls”。

请让我知道如何在这个封闭的 Excel 文件中添加新工作表。我知道如何在当前的 excel 中添加新工作表。

```
Dim WS as Worksheet
Set WS = Sheets.Add 
```

请让我知道如何

1.  使用 VBA 在封闭的 Excel 中添加新工作表，以及
2.  获取添加的工作表的名称

*注意：我不想重命名工作表。*

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T11:20:26.477

像这样的东西会做你想做的事。不打开工作簿是不可能的，但是如果您关闭屏幕更新，它会出现未打开的外观。

```
Option Explicit
Sub Add_Sheet_ClosedBook()
    Dim bk As Workbook
    Dim sh As Worksheet
    Dim shName As String

    With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
    Set bk = .Workbooks.Open _
    ("Path to Book.xls")
    End With

    With bk
        Set sh = .Sheets.Add
        shName = sh.Name
        .Save
        .Close
    End With

    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T11:36:10.147

要获取工作表名称，请使用`worksheet`变量，即

```
Sub Added()
    Dim Wb As Workbook
    Dim ws As Worksheet

    With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
        .EnableEvents = False
    End With

    Set Wb = Workbooks.Open("c:\Temp\closed.xls")
    Set ws = Wb.Sheets.Add
    Debug.Print ws.Name
    Wb.Save
    Wb.Close

    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
        .EnableEvents = True
    End With
End Sub 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T15:16:45.293

可以使用 Microsoft.ACE.OLEDB.12.0 提供程序在不打开工作簿的情况下添加工作表：

```
set cn = new adodb.connection

with cn
   .provider = "Microsoft.ACE.OLEDB.12.0"
   .connectionstring = "Data Source=" & strSomeFilename & ";Extended Properties=""Excel12.0;"""
   .open
end with

set cmd = new adodb.command
cmd.activeconnection = cn
cmd.commandtext = "CREATE TABLE MySheet (ID char(255))"
cmd.execute 
```

这会将标题“ID”添加到新工作表的单元格 A1。如有必要，您可能会找到一种删除/更改它的方法。

# python - numpy多维数组的条件操作

> ID：11469216
> 
> 赞同：5
> 
> 时间：2012-07-13T11:03:29.473
> 
> 标签：python, multidimensional-array, numpy

我是一个天真的 numpy 用户，需要您帮助解决以下问题：我想用第三个数组替换小于第二个数组的多维数组的一些元素；例如：

```
x = np.arange(16).reshape((2, 8)) 
# x = np.array([[ 0,  1,  2,  3,  4,  5,  6,  7],
#               [ 8,  9, 10, 11, 12, 13, 14, 15]]) 
```

和

```
y = np.array([[2], [13]])
# y = np.array([[ 2], [13]]) 
```

现在，找出`x`大于 的位置`y`，如果数组中至少有一个`True`，`x > y`计算这些实例，创建另一个数组 ( `z`) 并将`x`这些元素替换为`z`：

```
x > y 
# = [[False, False, False, True,  True,  True,  True, True],
#    [False, False, False, False, False, False, True, True]] 
```

`x`在这种情况下( )的 5 个元素`x[:,3:]`应该被替换，所以我们创建一个`(5, 2)`数组：

```
z = np.array([[20,21],[22,23],[24,25],[26,27],[28,29]]) 
```

我想要的结果是

```
x == np.array([[ 0,  1,  2, 20, 22, 24, 26, 28],
               [ 8,  9, 10, 21, 23, 25, 27, 29]]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:15:03.347

一个*几乎*完全符合您要求的`numpy`功能是：*`numpy.where`*

 *```
x = np.arange(16).reshape((2, 8))
y = np.array([[2], [13]])
z = np.arange(16, 32).reshape((2, 8))
numpy.where(~(x > y).any(axis=0), x, z) 
```

结果：

```
array([[ 0,  1,  2, 19, 20, 21, 22, 23],
       [ 8,  9, 10, 27, 28, 29, 30, 31]]) 
```

这与您所要求的唯一区别是`z`必须可以广播为与`x`. 除非您*绝对*需要使用`z`与 中的值一样多的列的`True`值，否则`~(x > y).any(axis=0)`我认为这是最好的方法。

但是，鉴于您的评论，您似乎确实需要使用上述`z`值。听起来这个函数保证形状会匹配，所以你可以这样做：

```
x[:,(x > y).any(axis=0)] = z.T 
```

测试：

```
>>> z = np.arange(20, 30).reshape((5, 2))
>>> x[:,(x > y).any(axis=0)] = z.T
>>> x
array([[ 0,  1,  2, 20, 22, 24, 26, 28],
       [ 8,  9, 10, 21, 23, 25, 27, 29]]) 
```*

# java - 什么或谁应该中断一个线程？

> ID：11469218
> 
> 赞同：5
> 
> 时间：2012-07-13T11:03:46.837
> 
> 标签：java, java.util.concurrent

根据 Goetz 在他的书 JCIP 中的说法：

> 因为每个线程都有自己的中断策略，所以除非您知道中断对该线程意味着什么，否则不应中断该线程。

那么为什么Java语言提供了一个`public interrupt ()`方法呢？这是设计缺陷吗？那么谁或什么应该中断一个线程呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:27:27.440

他的意思是，如果你不知道一个线程做什么以及它是如何工作的，你就不应该打断它。由于所有线程都可以被中断，因此`interrupt()`在 class 中有一个方法是合乎逻辑的`Thread`。

您可以对许多其他在错误位置执行时可能造成“伤害”的方法提出同样的问题。方法就是工具，程序员必须明智地使用这些工具才能创建正确运行的程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:27:38.780

我首先建议您阅读[Java 并发实践](http://www.javaconcurrencyinpractice.com/)。

我想，这个[问题](https://stackoverflow.com/questions/2020992/is-thread-interrupt-evil)可以回答你所说的。

顺便说一下，让我们看看如何防止线程。我们可以使用 Thread 类的 3 种方法中的任何一种来阻止线程执行：

1.  `yield()`
2.  `join()`
3.  `sleep()`

1.  `yield()`方法暂时暂停当前正在执行的线程，以便让具有相同优先级的剩余等待线程有机会执行。如果没有等待线程或所有等待线程的优先级较低，则同一线程将继续执行。产生的线程何时有机会执行由线程调度程序决定，其行为取决于供应商。

2.  `join()`如果任何执行线程 t1 调用`join()`t2 即；`t2.join()`t1 将立即进入等待状态，直到 t2 完成执行。

3.  `sleep()`根据我们的要求，我们可以让一个线程在指定的时间段内处于睡眠状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:45:28.020

好吧，这绝不是缺陷。（但是，其他方法`Thread.stop()` 确实如此）

更好的是，它`Thread.interrupt()`仅在线程被阻塞/等待/睡眠时才影响线程。如果它正在运行`interrupt()`仅通过设置一个状态变量来要求线程停止这样做，该状态变量可以通过`Thread.interrupted()`或查询`Thread.isInterrupted()`

通常，最好的方法是让线程从它们的`run()`方法中返回，而不是以任何方式在外部停止它们。

```
void run() {
    while(!isInterrupted())
        //executed

} 
```

不过要小心`Thread.interrupted()`，因为它会清除中断状态。

# objective-c - Cocoa、免费桥接和 ARC

> ID：11469220
> 
> 赞同：0
> 
> 时间：2012-07-13T11:03:47.680
> 
> 标签：objective-c, cocoa, stream, inputstream, tcpclient

我想做一个简单的 TCP 客户端。但我遇到了一个错误。当我制作时 `inputStream = (NSInputStream *)readStream;`，`outputStream = (NSOutputStream *)writeStream;`它建议我引入前缀 __bridge 或_bridge *_transfer*。

首先，它是什么？其次，我都试过了，仍然无法发送消息。我按照本[教程](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server.)进行了操作，并且也发送了消息和流。我安装了 Wireshark 并调用了发送消息，但它没有向 IP 发送任何数据包。

我刚刚在这里发布了 initNetworkCommunication，因为这是我得到“桥”错误的地方。

```
- (void) initNetworkCommunication {

    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"54.xxx.xxx.xxx", 1333, &readStream, &writeStream);

    inputStream = (NSInputStream *)readStream;
    outputStream = (NSOutputStream *)writeStream;
    [inputStream setDelegate:self];
    [outputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [inputStream open];
    [outputStream open];

} 
```

服务器很好，因为我已经尝试了示例代码并且得到了响应。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:26:43.383

正如 H2CO3 提到的，这是一个 ARC 的东西。

如果您不知道 ARC 是什么，[请阅读本文](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。总而言之，它是一种自动化内存管理工作（保留/释放语句等）的确定性方式，而 Objective-C 程序员以前必须手动完成。它非常值得使用，并且几乎没有缺点。但是，它确实有一些问题。

ARC 不适用于 Core Foundation 对象。它们仍然受制于旧规则，您必须自己进行内存管理。ARC 仅适用于 Objective-C 对象。然而，一些 Core Foundation 对象实际上是免费桥接到它们的 Cocoa 等价物。您在代码示例中使用免费桥接来创建一个`CFReadStreamRef`，然后将其作为`NSInputStream`.

所以你会怎么做？苹果的文档说如下：

> 如果您在 Objective-C 和 Core Foundation 风格的对象之间进行转换，您需要使用转换（在 objc/runtime.h 中定义）或 Core Foundation 风格的宏（在NSObject.h):
> 
> *   `__bridge`在没有所有权转移的情况下在 Objective-C 和 Core Foundation 之间转移一个指针。
> *   `__bridge_retained`或`CFBridgingRetain`将 Objective-C 指针转换为 Core Foundation 指针，并将所有权转移给您。您负责调用 CFRelease 或相关函数来放弃对象的所有权。
> *   `__bridge_transfer`或`CFBridgingRelease`将非 Objective-C 指针移动到 Objective-C 并将所有权转移给 ARC。ARC 负责放弃对象的所有权。

您正在从 Core Foundation 转移到 Objective-C，因此请忽略第二个要点（这是为了朝另一个方向发展）。问题是你想要发生什么——如果在传输之后你想将该对象交给 ARC，只从 Objective-C 端使用它，并让 ARC 处理内存管理，使用`__bridge_transfer`. 根据您的代码示例，这可能就是您想要的。

如果您只使用`__bridge`，或者如果您不使用 ARC，则需要自己清理对象，使用其中一个`CFRelease()`或向它们发送`release`消息（后者仅在您不使用 ARC 时才有效）。

# java - 关于 Java 发生之前的关系，需要澄清

> ID：11469223
> 
> 赞同：3
> 
> 时间：2012-07-13T11:04:00.447
> 
> 标签：java, multithreading

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)中说：

> 两个动作可以通过happens-before关系排序。如果一个动作发生在另一个动作之前，那么第一个动作对第二个动作可见并在第二个动作之前排序。

也有说：

> 例如，一个线程中的写入与另一个线程中的读取处于数据竞争中，这些读取可能会出现乱序。

这是否意味着 if **,**`hb(r, w)` then`r`一定在`w` **`r`**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:20:49.123

`hb(r, w)`表示在AND可以看到结果`r`之前执行。`w``w``r`

在读/写操作的情况下，您通常关心有一个`hb(w, r)`并希望确保读取看到写入的结果。

使用同步块的示例：

块`w`（写入）：

```
synchronized (lock) { //lock is a final object
    aVariable = something;
} 
```

块`r`（读取）：

```
synchronized (lock) { //the same final object
    System.out.println(aVariable)
} 
```

`w`并且`r`在同一个监视器上同步，因此两者之间存在发生之前的关系。

假设`w`在 之前执行`r`，这意味着我们有`hb(w, r)`，那么 JMM 保证`r`将打印 的最新值`aVariable`。

如果没有同步块，就不再存在之前发生的关系，即使在`w`之前执行`r`（从挂钟的角度来看），`r`也可能会打印`aVariable`.

如果没有发生之前的关系，即使您的程序以不应该的方式编写（即 JVM 可能已重新排序操作） ，它甚至可能`w`是在之后执行的情况。`r`

[JLS - Example 17.4-1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4)中给出了一个很好的例子，说明如果没有发生之前的关系，事情会变得多么奇怪。**

# java - 焦点父视图 swtbot

> ID：11469226
> 
> 赞同：0
> 
> 时间：2012-07-13T11:04:19.053
> 
> 标签：java, eclipse, junit, swtbot

使用 bot.viewByTitle() 找不到包含当前视图的视图。我的意思是在 eclipse 的项目资源管理器中选择项目名称后，我无法再次选择项目资源管理器视图。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:31:00.150

如果您使用的是视图自己的机器人（通过调用`bot()`a `SWTBotView`），您将找不到任何不属于该视图的元素。

您应该改用 Workbench Bot。

```
SWTWorkbenchBot bot = new SWTWorkbenchBot();
bot.viewByTitle("My View"); 
```

# python - 替换和覆盖而不是追加

> ID：11469228
> 
> 赞同：132
> 
> 时间：2012-07-13T11:04:20.297
> 
> 标签：python, replace

我有以下代码：

```
import re
#open the xml file for reading:
file = open('path/test.xml','r+')
#convert to string:
data = file.read()
file.write(re.sub(r"<string>ABC</string>(\s+)<string>(.*)</string>",r"<xyz>ABC</xyz>\1<xyz>\2</xyz>",data))
file.close() 
```

我想用新内容替换文件中的旧内容。但是，当我执行我的代码时，会附加文件“test.xml”，即我有旧内容后跟新的“替换”内容。我该怎么做才能删除旧的东西，只保留新的？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-07-13T11:10:38.190

您需要[`seek`](https://docs.python.org/library/io.html#io.IOBase.seek)在写入之前到文件的开头，然后[`file.truncate()`](https://docs.python.org/library/os.html#os.truncate)如果要进行就地替换，请使用：

```
import re

myfile = "path/test.xml"

with open(myfile, "r+") as f:
    data = f.read()
    f.seek(0)
    f.write(re.sub(r"<string>ABC</string>(\s+)<string>(.*)</string>", r"<xyz>ABC</xyz>\1<xyz>\2</xyz>", data))
    f.truncate() 
```

另一种方法是读取文件，然后再次打开它`open(myfile, 'w')`：

```
with open(myfile, "r") as f:
    data = f.read()

with open(myfile, "w") as f:
    f.write(re.sub(r"<string>ABC</string>(\s+)<string>(.*)</string>", r"<xyz>ABC</xyz>\1<xyz>\2</xyz>", data)) 
```

也`truncate`不会`open(..., 'w')`更改文件的[inode](https://en.wikipedia.org/wiki/Inode)编号（我测试了两次，一次使用 Ubuntu 12.04 NFS，一次使用 ext4）。

顺便说一句，这与 Python 并没有真正的关系。解释器调用相应的低级 API。该方法`truncate()`在 C 编程语言中的工作方式相同：参见[http://man7.org/linux/man-pages/man2/truncate.2.html](http://man7.org/linux/man-pages/man2/truncate.2.html)

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2018-12-04T07:38:55.270

```
file='path/test.xml' 
with open(file, 'w') as filetowrite:
    filetowrite.write('new content') 
```

以“w”模式打开文件，您将能够用新内容替换其当前文本保存文件。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-05-23T14:40:44.657

使用`truncate()`，解决方案可能是

```
import re
#open the xml file for reading:
with open('path/test.xml','r+') as f:
    #convert to string:
    data = f.read()
    f.seek(0)
    f.write(re.sub(r"<string>ABC</string>(\s+)<string>(.*)</string>",r"<xyz>ABC</xyz>\1<xyz>\2</xyz>",data))
    f.truncate() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-11T09:33:40.320

```
import os#must import this library
if os.path.exists('TwitterDB.csv'):
        os.remove('TwitterDB.csv') #this deletes the file
else:
        print("The file does not exist")#add this to prevent errors 
```

我有一个类似的问题，而不是使用不同的“模式”覆盖我现有的文件，我只是在再次使用它之前删除了该文件，这样就好像我在每次运行我的代码时都附加到一个新文件.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-06T15:32:21.510

请参阅[如何在文件中替换字符串以](https://pythonexamples.org/python-replace-string-in-file/)一种简单的方式工作，并且是一个适用于的答案`replace`

```
fin = open("data.txt", "rt")
fout = open("out.txt", "wt")

for line in fin:
    fout.write(line.replace('pyton', 'python'))

fin.close()
fout.close() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-03T13:08:38.090

使用 python3 [pathlib](https://docs.python.org/3/library/pathlib.html)库：

```
import re
from pathlib import Path
import shutil

shutil.copy2("/tmp/test.xml", "/tmp/test.xml.bak") # create backup
filepath = Path("/tmp/test.xml")
content = filepath.read_text()
filepath.write_text(re.sub(r"<string>ABC</string>(\s+)<string>(.*)</string>",r"<xyz>ABC</xyz>\1<xyz>\2</xyz>", content)) 
```

使用不同方法进行备份的类似方法：

```
from pathlib import Path

filepath = Path("/tmp/test.xml")
filepath.rename(filepath.with_suffix('.bak')) # different approach to backups
content = filepath.read_text()
filepath.write_text(re.sub(r"<string>ABC</string>(\s+)<string>(.*)</string>",r"<xyz>ABC</xyz>\1<xyz>\2</xyz>", content)) 
```

# extjs4 - 如何在 ExtJS4 中扩展我们自己的类

> ID：11469233
> 
> 赞同：0
> 
> 时间：2012-07-13T11:04:31.983
> 
> 标签：extjs4

我已经在 Ext JS 4 中创建了这个类，现在我想在另一个类中扩展它。我使用`extend`属性来扩展类。但我无法扩展课程。我想使用 require 来包含类文件吗？但我将这两个文件保存在同一个目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:53:52.760

为 ExtJS 定义源路径以定位您的源文件。

```
Ext.Loader.setConfig({
            enabled: true,
            paths: {
                '[your namespace prefix here]': '[physical path]'
            }
        }); 
```

然后在子类中定义`Ext.require`或`requires`部分以启用自动路径解析。阅读[此链接](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader)了解更多信息。

**例子**

基类：位于文件夹中的文件`root/view/common/Picker.js`

```
Ext.define('RL.view.common.Picker', {
    extend: "Ext.form.field.Picker",
...
} 
```

子类：位于文件夹中的文件`root/view/selection/DriverTreeCombo.js`

```
Ext.define('RL.view.selection.DriverTreeCombo', {
        extend: "RL.view.common.Picker",
        requires: ['Ext.tree.Panel', 'RL.view.common.TreeBase'],
...
} 
```

我的命名空间为 RL.xxx.xxx，RL 应该是`root`文件夹。现在我可以定义 Loader 配置如下

```
Ext.Loader.setConfig({
            enabled: true,
            paths: {
                'RL': '/root'                    
            }
        }) 
```

加载程序配置应该在 'Ext.onReady(...)' 函数调用之前设置。浏览 ExtJS 包中的示例文件夹将帮助您了解这是如何完成的。

**进一步阅读：**

*   [班级制度](http://docs.sencha.com/ext-js/4-1/#!/guide/class_system)
*   [动态加载和新的类系统](http://www.sencha.com/blog/countdown-to-ext-js-4-dynamic-loading-and-new-class-system)

# android - 捕获的图像未存储在android中的特定文件夹中

> ID：11469234
> 
> 赞同：0
> 
> 时间：2012-07-13T11:04:32.100
> 
> 标签：android, image

我创建了一个程序来捕获图像并将其存储到 sdcard/dcim/camera 文件夹中。现在我正在尝试将捕获的图像保存在我自己在 sdCard 中创建的目录中，比如“/somedir”。

```
I am able to make the directory programmatically but the image file is not getting stored in it.

Can anybody tell me where I am doing wrong here??

Here is the code....

File folder = new File(Environment.getExternalStorageDirectory() + "/abc");

Bitmap mybitmap1;     //mybitmap1 contain image. So plz dont consider that I don't have image in mybitmap1;
if(!folder.exists())
        {
            success = folder.mkdir();
            Log.i("Log", "folder created");
        }
        else
        {
            Log.i("Log", "Folder already present here!!");
        }
        String fname = date +".jpg";
        file = new File( folder,fname);
        if (file.exists ()) 
            file.delete (); 
        capturedImageUri = Uri.fromFile(file);

        FileOutputStream out;
            byte[] byteArray = stream.toByteArray();
            try {

                   out = new FileOutputStream(file);
                   mybitmap1.compress(Bitmap.CompressFormat.JPEG, 100, out);
                   out.flush();
                   out.close();
                   MediaStore.Images.Media.insertImage(getContentResolver(), mybitmap1, file.getName(), file.getName());
                   //MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());

            } catch (Exception e) {
                   e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:09:42.113

参考下面的代码

```
 public void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK && requestCode == 1 ) {

    final Uri selectedImage = data.getData(); 

    try {
            bitmap = Media.getBitmap(getContentResolver(),selectedImage);
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 90, bytes);

            File f = new File(Environment.getExternalStorageDirectory()
                    + File.separator
                    + filename);
            f.createNewFile();
            FileOutputStream fo = new FileOutputStream(f);
            fo.write(bytes.toByteArray());

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
       }
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:36:54.593

您正在为文件设置错误的文件名。如果您想在图像文件的名称中使用时间，请使用此方法。

```
private Uri getImageUri() {
    // Store image in dcim
    String currentDateTimeString = getDateTime();
    currentDateTimeString = removeChar(currentDateTimeString, '-');
    currentDateTimeString = removeChar(currentDateTimeString, '_');
    currentDateTimeString = removeChar(currentDateTimeString, ':');
    currentDateTimeString = currentDateTimeString.trim();
    File file = new File(Environment.getExternalStorageDirectory()
            + "/DCIM", currentDateTimeString + ".jpg");
    Uri imgUri = Uri.fromFile(file);

    return imgUri;
}

private final static String getDateTime() {
    DateFormat df = new SimpleDateFormat("yyyy-MM-dd_hh:mm:ss");
    df.setTimeZone(TimeZone.getTimeZone("PST"));
    return df.format(new Date());
}

public static String removeChar(String s, char c) {
    StringBuffer r = new StringBuffer(s.length());
    r.setLength(s.length());
    int current = 0;
    for (int i = 0; i < s.length(); i++) {
        char cur = s.charAt(i);
        if (cur != c)
            r.setCharAt(current++, cur);
    }
    return r.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:54:43.637

她的就是你需要做的：而不是

```
File folder = new File(Environment.getExternalStorageDirectory() + "/abc"); 
```

做这个

```
File folder = new File(Environment.getExternalStorageDirectory().getPath() + "/abc");
if(folder.exists()){
  //save your file then
}
else{
  folder.mkdirs();
  //save your file then
} 
```

确保在 Manifest 中使用必要的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# uitableview - 在 TableView 中查找选定的单元格

> ID：11469239
> 
> 赞同：1
> 
> 时间：2012-07-13T11:04:45.727
> 
> 标签：uitableview, selection

我正在编写一个带有 tableview 的 iPhone 应用程序，它显示一个项目列表，每个项目都有一个复选标记。我只需单击一下即可选择/取消选择每个项目。当我按下按钮 [DONE] 时，我想遍历所有单元格并检查哪个单元格启用了复选标记。就像是：

```
 for (int i = 0; i < [fullDataset count]; i++) {
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:0];
    UITableViewCell* cell = [self.tableView cellForRowAtIndexPath:indexPath];
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        NSLog(@"THIS CELL IS SELECTED!");
    } 
} 
```

现在，问题是使用这个过程我只得到被选中并且当前显示的单元格。我想确保该过程在所有单元格中运行，即使是未显示的单元格。我可能会使用另一个数据结构来跟踪选择，但它看起来有点多余。

任何的想法？

非常感谢！

克劳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:38:33.860

你不能指望单元格告诉你是否被选中，单元格会被重用并总是改变那里的状态。
您需要管理所选 indexPaths 的单独 NSSet，当用户点击单元格时，您将此 indexPath 添加到集合中，当他取消选择单元格时，您从集合中删除 indexPath。

# java - 无法解析从 AJAX 中的 servlet 返回的 JSON 对象

> ID：11469243
> 
> 赞同：0
> 
> 时间：2012-07-13T11:04:53.510
> 
> 标签：java, javascript, jquery

我无法解析从 ajax 中的 servlet 返回的 tje Json 对象，

我需要将 json 对象值放在相对字段中

从我的 java 代码中，我以 JSON 的形式发送以下字符串

```
 String  webVisitorDetails = "{"+"companyName : "+webVisitor.getCompanyName()+
                                                "address : "+webVisitor.getProfessionalAddress()+
                                                "city : "+webVisitor.getCity()+
                                                "zipCode : "+webVisitor.getZipCode()+
                                                "clientId : "+webVisitor.getCustomerAccountNumber()+ "}";

response.setContentType("application/json");
                response.getWriter().write(webVisitorDetails); 
```

在阿贾克斯

```
$.ajax({
    url: "ships",
    data: {
        email: email.toString()
    },
    success: function(data) {
        $.each(data, function(k, v) {
            console.log(k + " Value " + v);
            $("#city").text(v.city);
            $("#zipcode").text(v.getZipCode);
            $("#Adress").text(v.getProfessionalAddress);
        });
    },
    error: function(data) {
        console.log("error:", data);
    },
    type: "post"
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:07:29.540

你忘记了逗号，你应该引用你的价值观

```
String  webVisitorDetails = "{
    \"companyName\": \"" + webVisitor.getCompanyName() + "\",
    \"address\": \"" + webVisitor.getProfessionalAddress() + "\",
    \"city\": \"" + webVisitor.getCity() + "\",
    \"zipCode\": \"" + webVisitor.getZipCode() + "\",
    \"clientId\": \"" + webVisitor.getCustomerAccountNumber() + "\"
}"; 
```

**编辑：**确实=>引用您的密钥（以防万一）我不是真正的Java专家，但是如果有一个可以使用它的类的话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:09:11.290

另外......你不应该重新发明轮子。Java 有一种创建“工作”JSON 的完美方式。

```
 Map obj=new LinkedHashMap();
  obj.put("name","foo");
  obj.put("num",new Integer(100));
  obj.put("balance",new Double(1000.21));
  obj.put("is_vip",new Boolean(true));
  obj.put("nickname",null);
  String jsonText = JSONValue.toJSONString(obj);
  System.out.print(jsonText);

  // Result: {"name":"foo","num":100,"balance":1000.21,"is_vip":true,"nickname":null} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:11:03.157

除了您的 JSoN 不正确（请参阅其他答案）这一事实之外，您正在遍历一个`response`对象，而您应该遍历`data`已用作成功函数参数的对象

除此之外，为了循环数据，您必须从服务器返回一个数组，即将您的 json 对象括在方括号 ( **[ ]** ) 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:11:27.337

您可以从 VDP 的回答中看到，您的 json 格式不正确。您需要在每个参数后加一个逗号。

还有一些可能会有所帮助的指针：

*   [您可以通过将其粘贴到http://jsonlint.com/](http://jsonlint.com/)来验证您的 json 格式是否正确

*   如果您在应用程序中进行大量 json 处理，我建议您使用标准 JSON 库，例如[json-simple](http://code.google.com/p/json-simple/)或[gson](http://code.google.com/p/google-gson/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T11:07:20.227

将您的键和值放在引号中，并用逗号分隔您的对！

# java - 找不到 JAVA_HOME 作为 Sudo

> ID：11469247
> 
> 赞同：14
> 
> 时间：2012-07-13T11:05:11.663
> 
> 标签：java, linux, sudo, java-home

我在运行 Jar 文件的 Linux 机器上有一个 bash 脚本。以普通用户身份登录时，我没有运行脚本的权限，但它会打印以下日志：

```
*INFO * Using JVM found at /opt/jdk6/bin/java 
```

但是，当我尝试将脚本与 Sudo 一起使用时，它给出了：

```
*ERROR* Unable to locate java, please make sure java is installed and JAVA_HOME set 
```

我已经设置`JAVA_HOME`为与上面相同的路径 - 可以通过 & 看到它，`echo $JAVA_HOME`它也被设置为脚本中的一个选项。我很高兴脚本不是问题——它是一个默认的 CQ5 控制脚本，我在其他几十个盒子上使用它没有问题。只是不确定我在上面做错了什么并假设这是我在 Linux 设置上缺少的东西？

当我运行`sudo`命令时，它是否可以访问`JAVA_HOME`我自己设置的命令？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-13T11:13:30.197

默认情况下，`sudo`将清理生成命令的环境。通过`-E`保留它：

```
sudo -E env 
```

相比于：

```
sudo env 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T18:55:42.670

没有导出 JAVA_HOME 时，“sudo -E”没有解决问题。并且当它被导出时，没有 -E 的“sudo”的工作方式相同。

所以你可以添加`export JAVA_HOME=.../jdk<version>`你的 .bash_profile 和 .bashrc 文件。

如果您想知道.bash_profile 和.bashrc 的区别是什么，.bash_profile 在登录时执行（例如，显示一些诊断/欢迎信息）。.bash_rc 在您打开一个新终端时执行（例如，shift-ctrl-T）。

为了在这两种情况下运行一些命令，您可以将其放在 .bashrc 文件中，并让 .bash_profile 源 .bashrc：

```
if [ -f ~/.bashrc ]; then
   source ~/.bashrc
fi 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-06T21:01:50.660

你总是可以像这样显式地将它传递给java：

`sudo java -Djava.home=$JAVA_HOME Test`

# javascript - 简单的javascript时间/每小时金钱计算器

> ID：11469251
> 
> 赞同：0
> 
> 时间：2012-07-13T11:05:14.147
> 
> 标签：javascript, time, calculator

所以我只是在学习 Javascript，我正在尝试创建一个可以减去时间的计算器。我有其他部分工作（虽然我很喜欢那里的代码反馈，因为我确信它可以得到重大改进），我只需要正确地减去时间。我正在做简单的数学运算，所以当我从 2:00 减去 1:30（小时和分钟是单独的值）时，它给了我 1:30 而不是 00:30。

另一个问题是，除非我按两次“获取结果”按钮，否则每小时的黄金无法计算......

这是我写过的第一个脚本，所以请让我知道我应该做什么，我想以最好和最简单的方式做到这一点。

计算器和脚本在这里：

[http://www.coolestwebsiteintheuniverse.com/gold-calculator/](http://www.coolestwebsiteintheuniverse.com/gold-calculator/)

[http://www.coolestwebsiteintheuniverse.com/gold-calculator/calc.js](http://www.coolestwebsiteintheuniverse.com/gold-calculator/calc.js)

我还希望能够将其扩展到 10 行并对所有行进行平均，但我想一旦弄清楚这部分，我就可以自己解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:09:36.837

您是否尝试过使用日期函数进行减法？？

```
var T1=new Date("September 5, 2012 8:10:00");
var T2=new Date("September 5, 2012 13:35:00");
var diff=new Date();
diff.setTime(T2-T1);
alert(diff.getHours()+":"+diff.getMinutes()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:56:56.373

问题是您在计算时间时将小时与分钟分开。你需要将它们与这样的东西结合起来（未经测试）：

```
var starthh = // ...
var startmm = // ...
var endhh = // ...
var endmm = // ...

var elapsedMinutes = (60 * endhh + endmm) - (60 * starthh + startmm)

var displayTime = Math.floor(elapsedMinutes / 60) + ":" 
                + ("00" + (elapsedMinutes % 60)).slice(-2) 
```

最后一位，`("00" + (elapsedMinutes % 60)).slice(-2)`取分钟模 60，将其附加到字符串“00”，然后取最后两个字符，作为零填充个位数的快速方法。

# php - 用php遍历目录？

> ID：11469255
> 
> 赞同：1
> 
> 时间：2012-07-13T11:05:19.360
> 
> 标签：php, relative-path, realpath, directory-traversal

我有一个文件夹的路径（例如`/var/www/tester/assets/themes/default/css/`）。

用户可以提供文件夹的相对路径，例如。`layout/ie7.css`会给出`/var/www/tester/assets/themes/default/css/layout/ie7.css`.

这很好用，但是我希望用户也能够向上导航目录树。

因此，如果用户提供了 css 文件夹`../../cache/css/ie7.css`的路径，我希望路径以`/var/www/tester/assets/themes/default/cache/css/ie7.css`.

我以为我可以将它们一起传递给[realpath()](http://php.net/manual/en/function.realpath.php)例如：

```
$base = '/var/www/tester/assets/themes/default/css/';
$user_path = '../../cache/css/ie7.css';
$final_path = realpath($base.$user_path); 
```

但这只会返回错误。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:11:40.913

首先，真正的路径功能还检查给定的路径是否存在......你确定你的路径存在吗？

```
/var/www/tester/assets/themes/default/css/../../cache/css/ie7.css 
```

不会结束

```
/var/www/tester/assets/themes/default/cache/css/ie7.css 
```

正如你所建议的，但它最终在

```
/var/www/tester/assets/themes/cache/css/ie7.css 
```

具有给定文件的此文件夹是否存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:36:15.793

只是不要。像这样的路径没有错`/var/www/tester/assets/themes/default/css/../../cache/css/ie7.css`。它适用于所有操作系统和浏览器。

注意：您是否知道您可能会在此处产生安全风险？如果用户提供`../../../../../../../etc/passwd`怎么办？

# sql - Oracle 11g - 合并单列重复项以创建垂直汇总

> ID：11469256
> 
> 赞同：2
> 
> 时间：2012-07-13T11:05:20.920
> 
> 标签：sql, oracle, merge, duplicates, distinct

有谁知道如何根据多列表的单列删除和合并重复项以创建“垂直摘要”。

IE) 尝试从表 A 构建表 B

```
Table A:
Person Language
Bob    English
Sarah  French
John   Chinese
Bob    French
Sarah  English
Sarah  Chinese

Table B (RESULT): 
Person English French Chinese 
Bob       Y       Y     (null)
Sarah     Y       Y       Y
John      (null)  (null)  Y 
```

我最初的想法是：从数据中创建表 A，然后执行以下操作：

```
Create table summary as 
Select person, (case when language = 'English' then 'Y') as English, (case when        language = 'French' then 'Y') as French, (case when language = 'Chinese' then 'Y') as  Chinese
From Table A; 
```

最后做一个选择不同的汇总表。然而，逻辑是错误的，特别是因为 distinct 在所有列中都这样做，但我只想要不同的人名。

我脑海中想到的另一个选择是创建一个表，其中仅包含不同的人名和空列英语、法语和中文。然后使用更新语句通过匹配表 A 来填充它们。

有谁知道更好的方法/我如何实现这一点。我仍处于学习 Oracle 的早期阶段（尤其是关于循环），任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:14:20.400

Oracle 有一个[解码功能](http://www.techonthenet.com/oracle/functions/decode.php)。

但你正在寻找的是一个[支点](http://www.oracle-developer.net/display.php?id=506)

```
WITH pivot_data AS (
    SELECT Person, Language
    FROM   A
)
SELECT *
FROM   pivot_data
PIVOT (
    Count(*)        --<-- pivot_clause
    FOR Language         --<-- pivot_for_clause
    IN  ('English', 'French', 'Chinese')   --<-- pivot_in_clause
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:36:54.307

与 Sjuul 相同的想法，使用[pivot](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#sthref6775)，但这会为您提供所需的`Y`/`null`值：

```
select * from (
    select person, language, 'Y' as flag from tablea
)
pivot (max(flag) for language
    in ('English' as english, 'French' as french, 'Chinese' as chinese)); 
```

因此，要基于此创建一个新表：

```
create table tableb as
select * from (
    select person, language, 'Y' as flag from tablea
)
pivot (max(flag) for language
    in ('English' as english, 'French' as french, 'Chinese' as chinese));

Table created.

select * from tableb order by person;

PERSON          E F C
--------------- - - -
Bob             Y Y
John                Y
Sarah           Y Y Y 
```

如果其中的数据`tablea`会发生变化，您最好制作`tableb`一个视图，这样它就不会失步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:17:55.557

尝试这个

```
Create table summary 
as  
Select 
    person, 
    min(case when language = 'English' then 'Y' end) as English, 
    min(case when language = 'French' then 'Y' end) as French, 
    min(case when language = 'Chinese' then 'Y' end) as  Chinese 
From 
    Table A
group by 
    person 
```

# asp.net-mvc - asp.mvc 4 EF ActionResult 编辑，并非所有字段都在视图中

> ID：11469262
> 
> 赞同：0
> 
> 时间：2012-07-13T11:05:36.653
> 
> 标签：asp.net-mvc

用于响应编辑保存表单的标准生成代码块

```
[HttpPost]
public ActionResult Edit(User user)
{
  if (ModelState.IsValid)
  {
    db.Entry(user).State = EntityState.Modified;
    db.SaveChanges();
    return RedirectToAction("Index");
  }
 return View(user);
} 
```

当所有字段都存在于编辑视图中时有效。

在我的模型中，我有一个密码字段（出于显而易见的原因）我不想作为不可见的表单字段传递。结果密码为空（这是意料之中的）。我应该如何编码来处理这种情况？

1.  获取密码值，我应该从数据库中获取值吗？如果我使用：用户 u = db.User.Find(user.ID); EF 存在“ObjectStateManager 中已存在具有相同键的对象”的问题

2.  我如何处理 ModelState.IsValid 因为它是假的

我已经找到了以前 mvc 版本的答案，但想知道实现这一目标的最优雅/最有效的方法是什么？

@freeride，我不必测试 user.Password 是否为空，我希望它为空，如果不是，那么它是由恶意用户注入的。整个 excersie 是为了避免用户操纵密码。

删除密码字段 (ModelState.Remove("Password");) 确实解决了 ModelState 验证问题。现在仍然是一个问题，如何恢复密码值？以下作品：

```
[HttpPost]
public ActionResult Edit(user user)
{
    user v = db.Users.Find(user.ID);
    ModelState.Remove("Pass");

    user.Password = v.Password;           // assign from db 

    if (ModelState.IsValid)
    {

        //db.Entry(user).State = EntityState.Modified; // this won't work as the context changed
        db.Entry(v).CurrentValues.SetValues(user); // we need to use this now
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(user);
} 
```

我想知道我是否有义务进行额外的数据库之旅来获取价值？我必须更改代码以修复 EF 上下文更改，它有效，但代码正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:35:49.437

前

```
if (ModelState.IsValid) 
```

添加

```
if (string.IsNullOrEmpty(user.Password))
{
    ModelState.Remove("Password");
} 
```

> 我想知道我是否有义务进行额外的数据库之旅来获取价值？我必须更改代码以修复 EF 上下文更改，它有效，但代码正确吗？

Do it in a different way. Don't use an entity object as your model. Create a model which contains only data you need to update,for example:

```
public class UserModel
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string Surname { get; set; }
} 
```

and now:

```
[HttpPost]
public ActionResult Edit(UserModel userModel)
{

    if (ModelState.IsValid)
    {
        User user = db.Users.Find(userModel.Id);
        user.FirstName = userModel.FirstName ;
        user.Surname  = userModel.Surname;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(userModel);
} 
```

I hope it helps.

# android - 如何通过单击一个不一直收听听众的按钮来获取android中的信号强度？

> ID：11469272
> 
> 赞同：2
> 
> 时间：2012-07-13T11:06:09.130
> 
> 标签：android

我想创建一个方法，所以当我想调用它并获取手机的信号强度时，我完全知道使用 PhoneStateListener 获取信号强度的普通方法。

我找不到解决问题的方法，但我确信有办法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:11:39.823

只需创建一个变量并让侦听器在每次触发时更改其值。当您单击按钮时，您应该只显示此变量的值。希望这可以帮助。

# grails - 如何在 grails 中实现表单构建器插件

> ID：11469273
> 
> 赞同：0
> 
> 时间：2012-07-13T11:06:14.603
> 
> 标签：grails, groovy

**哪些步骤将重现该问题？**

1.在STS上创建grails项目：2.9.2 2.打开插件管理器，安装表单生成器插件。

1.在 NetBeans IDE 7.0 上创建 grails 项目 2.打开 Grails 插件。安装表单生成器插件。

1.使用命令 grails create-app test 创建 grails 应用程序 2.安装表单构建器插件。

**什么是预期的输出？你看到了什么呢？**

每次我期望插件应该安装并且我可以运行应用程序，但得到几个依赖项。我尝试了有/没有在 BuildConfig.groovy 中进行的更改。

**您使用的是什么版本的产品？在什么操作系统上？**

我正在研究 Java：1.6.0_29；Java HotSpot(TM) Client VM 20.4-b02 系统：在 x86 上运行的 Windows XP 5.1 版；CP1252; 带有 grails 2.0.4 的 en_US (nb) 我已经安装了带有 grails 插件的 STS 2.9.2、STS 2.5.1、Netbeans 7.0

请在下面提供任何附加信息。

每次我尝试安装插件时，它都会向我展示 jquery、jquery ui 等的一些运行时依赖项，我尝试在安装表单生成器插件之前安装所有插件。现在它向我展示了一些缺少 net.sf.json-lib:json-lib:2.4 的类。

有时它向我显示有关 C:\Documents and Settings\jitendrakarma.grails\2.0.4\projects\FormTest\plugins\form-b​​uilder-0.1\grails-app\controllers\org\grails\formbuilder\FormController.groovy 的错误: 18: 无法解析类 freemarker.template.Template @ 第 18 行，第 1 列。导入 freemarker.template.Template

请让我知道我正在遵循的过程有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:04:29.067

你做的一切都是正确的。插件本身无法正确管理其依赖项。它也属于一些在 Grails >= 2.xx 中不再存在的类

如果添加所有缺少的外部依赖项并将以下条目添加到*grails-app/conf/BuildConfig.groovy的插件闭包中*

```
compile ":form-builder:0.1"
compile ":jquery-ui:1.8.6"
compile ":dynamic-domain-class:0.2.1"
compile ":jquery-json:2.2"
compile ":freemarker-tags:0.5.8"
compile ":uni-form:1.5"
compile ":jquery-datatables:1.7.5"
compile ":jquery-validation-ui:1.2"
compile ":lang-selector:0.3"
compile ":quartz:0.4.2"
compile ":jquery-form-builder:0.1" 
```

并将以下条目添加到同一文件的依赖项部分

```
compile 'org.freemarker:freemarker:2.3.19' 
```

你仍然会得到四个编译错误。

其中之一是：“无法解析类 org.codehaus.groovy.grails.web.metaclass.TagLibDynamicMethods”

如果您在 grails api 文档中查找此类，您将在 grails [1.3.7 版本中看到它，但在](http://grails.org/doc/1.3.7/api/org/codehaus/groovy/grails/web/metaclass/TagLibDynamicMethods.html)[2.0.4 版本](http://grails.org/doc/2.0.4/api/org/codehaus/groovy/grails/web/metaclass/)中缺少它。

所以我可以推荐你的最好的事情是搜索另一个插件或自己编写一些代码。

例如，可以使用grails 端的[命令和客户端的](http://grails.org/doc/latest/guide/theWebLayer.html#commandObjects)[JQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来完成验证。表单本身可以在脚手架的帮助下创建。即使您不需要域，您也可以创建一个运行脚手架来获取结果表单并丢弃域。

# winapi - WinApi所有者CComboBox编辑窗口，CComboBox里面的编辑窗口

> ID：11469275
> 
> 赞同：0
> 
> 时间：2012-07-13T11:06:24.350
> 
> 标签：winapi, combobox, mfc, ownerdrawn, ccombobox

我有一个问题，是否有可能拥有 CComboBox 编辑窗口（CComboBox 的最顶部窗口/ComboBox 内的编辑窗口）因为我已将 CComboBox 设为 OWNERDRAW 并且我可以在项目上绘图（通过 DrawItem() 方法）我还想在编辑项（CComboBox 控件的最顶部项）上绘制问题是它是编辑窗口，我可以在上面输入（我不能在上面绘制）。我怎样才能使这个窗口'可绘制'？有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:22:36.613

用于[`GetComboBoxInfo`](http://msdn.microsoft.com/en-us/library/bb775939.aspx)获取`hwndItem`（编辑字段的窗口句柄）。然后你只需子类化那个来做你想做的事:)

# grails - 我可以拆分 grails 的 config.groovy 文件吗？

> ID：11469276
> 
> 赞同：5
> 
> 时间：2012-07-13T11:06:25.740
> 
> 标签：grails

由于文件中有敏感代码`config.groovy`，我怕我的朋友会在这个文件中提交错误。当得到**svn**更新时，我们也会得到错误的配置代码。

我可以将代码拆分为`config.groovy`敏感代码保持不变而另一个可以经常更改的方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:17:03.730

在您的主配置文件中，您可以访问此变量：

```
grails.config.locations 
```

它是一个配置文件位置列表，您可以在其中添加自己的文件：

```
grails.config.locations << 'file:MyConfigFile.groovy' 
```

然后将这些文件添加到您的配置中。

有关更详细的设置，请参阅此博客文章： http: [//www.pasopas.nl/2012/loading-grails-configuration-files-update/](http://www.pasopas.nl/2012/loading-grails-configuration-files-update/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T13:53:01.533

类似于 Marijn 的回答。这就是我通常设置 Config.groovy 的方式。我仍然将它用于某些设置，但是任何环境（部署位置或单个机器）更改都可以覆盖 Config.groovy 中的任何设置。

配置.groovy >>>>

```
grails.config.locations = [
        "file:../app-config/myapp-dataSource.groovy",
        "file:../app-config/myapp-config.groovy"
]

environments {
  development {
    grails.config.locations = [
            "file:../myapp-config/myapp-dataSource.groovy",
            "file:../myapp-config/myapp-config.groovy",
            "file:${userHome}/myapp-config/myapp-dataSource.groovy",
            "file:${userHome}/myapp-config/myapp-config.groovy"
    ]   
    some.config.setting=true
  }
} 
```

文件：${userHome}/myapp-config/myapp-config.groovy >>>>

```
some.config.setting=false 
```

# iphone - Youtube 视频会导致主视图随后打开。

> ID：11469280
> 
> 赞同：1
> 
> 时间：2012-07-13T11:06:46.160
> 
> 标签：iphone, ios, xcode, youtube

我刚刚在我的应用程序上实现了一个 youtube 视频视图，但是当我在观看后关闭 youtube 视频时......它不会关闭。它打开主视图控制器，然后将其置于所有其他视图控制器之上（我认为）。这是我展示 youtube 视频的方式：

在 MyViewController.m 中：

```
NSString *lessonHTML = @"http://www.youtube.com/watch?v=0P7UgKjzndo";

NSString *ytHtml = @"<html><head>\
    <body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";

    NSString *html = [NSString stringWithFormat:ytHtml, lessonHTML, youtubeView.frame.size.width, youtubeView.frame.size.height];
    NSLog(@"HTML String: %@",html);
    [youtubeView loadHTMLString:html baseURL:nil]; 
```

当按下缩略图时，它会加载视频。然后，当我单击“完成”时，它会将我带回到我的主 ViewController 而不是我所在的那个。

我使用故事板只是为了防止它与此有关。

啤酒和为史诗般的答案投票，谢谢！

# c - 在 cvSetCaptureProperty 中使用 CV_CAP_PROP_POS_FRAMES 获取单个帧

> ID：11469281
> 
> 赞同：13
> 
> 时间：2012-07-13T11:07:03.540
> 
> 标签：c, opencv, video-processing

我试图通过设置属性跳到特定的框架`CV_CAP_PROP_POS_FRAMES`，然后像这样读取框架：

```
cvSetCaptureProperty( input_video, CV_CAP_PROP_POS_FRAMES, current_frame );
frame = cvQueryFrame( input_video ); 
```

我面临的问题是，OpenCV 2.1 为 12 个连续值返回相同的帧，`current_frame`而我想读取每个单独的帧，而不仅仅是关键帧。谁能告诉我怎么了？

* * *

我做了一些研究，发现问题是由解压缩算法引起的。

类似MPEG的算法（包括HD等）并不单独压缩每一帧，而是时不时保存一个关键帧，然后只保存最后一帧和后续帧的差异。

您报告的问题是由于当您选择一帧时，解码器（可能是ffmpeg）自动前进到下一个关键帧。

那么，有没有办法解决这个问题？我不仅想要关键帧，还想要每个单独的帧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T01:33:05.413

我不知道这对于您的目的是否足够精确，但我已经成功地通过抓取帧速率，将帧数转换为时间，然后推进到 MPEG 视频中的特定点时间。像这样：

```
cv::VideoCapture sourceVideo("/some/file/name.mpg");
double frameRate = sourceVideo.get(CV_CAP_PROP_FPS);
double frameTime = 1000.0 * frameNumber / frameRate;
sourceVideo.set(CV_CAP_PROP_POS_MSEC, frameTime); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:47:03.417

CV_CAP_PROP_POS_FRAMES 跳转到关键帧。我遇到了同样的问题并使用这个（python-）代码解决了它。它可能不是完全有效，但完成工作：

```
def seekTo(cap, position):
  positiontoset = position
  pos = -1
  cap.set(cv.CV_CAP_PROP_POS_FRAMES, position)
  while pos < position:
    ret, image = cap.read()
    pos = cap.get(cv.CV_CAP_PROP_POS_FRAMES)
    if pos == position:
      return image
    elif pos > position:
      positiontoset -= 1
      cap.set(cv.CV_CAP_PROP_POS_FRAMES, positiontoset)
      pos = -1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-20T13:54:09.853

由于 OpenCV 的这种限制，明智的做法是改用 FFMPEG。[Moviepy](https://github.com/Zulko/moviepy/blob/master/moviepy/video/io/ffmpeg_reader.py)是一个不错的包装库。

```
# Get nth frame from a video
from moviepy.video.io.ffmpeg_reader import FFMPEG_VideoReader
cap = FFMPEG_VideoReader("movie.mov",True)
cap.initialize()
cap.get_frame(n/FPS) 
```

性能也很棒。寻找第 n 帧的`get_frame`时间为 O(1)，如果请求（几乎）连续的帧，则使用加速。同时加载三个 720p 视频时，我得到了比实时更好的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-07T01:25:40.433

我在 OpenCV 3 / Python 3 上成功使用了以下内容：

```
 # Skip to 150 frame then read the 151th frame
 cap.set(cv2.CAP_PROP_POS_FRAMES, 150))
 ret, frame = cap.read() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-25T15:25:14.673

在假设这是一个无法挽救的错误几年之后，我想我已经找到了一种在速度和正确性之间取得良好平衡的方法。

以前的解决方案建议`CV_CAP_PROP_POS_MSEC`在读取框架之前使用该属性：

```
cv::VideoCapture sourceVideo("/some/file/name.mpg");
const auto frameRate = sourceVideo.get(CV_CAP_PROP_FPS);

void readFrame(int frameNumber, cv::Mat& image) {
  const double frameTime = 1000.0 * frameNumber / frameRate;
  sourceVideo.set(CV_CAP_PROP_POS_MSEC, frameTime);
  sourceVideo.read(image);
} 
```

它确实返回了预期的帧，但问题是使用`CV_CAP_PROP_POS_MSEC`可能**非常慢**，例如用于视频转换。

*注意：为简单起见，使用全局变量。*

* * *

另一方面，如果您只想顺序读取视频，则完全无需搜索即可读取帧。

```
for (int frameNumber = 0; frameNumber < nFrames; ++frameNumber) {
  sourceVideo.read(image);
} 
```

* * *

解决方案来自于将两者结合起来：使用变量来记住最后查询的帧`lastFrameNumber`，并且仅在请求的帧不是下一个时才搜索。通过这种方式，可以提高顺序读取的速度，同时在必要时允许随机搜索。

```
cv::VideoCapture sourceVideo("/some/file/name.mpg");
const auto frameRate = sourceVideo.get(CV_CAP_PROP_FPS);
const int lastFrameNumber = -2; // guarantee seeking the first time

void readFrame(int frameNumber, cv::Mat& image) {
  if (lastFrameNumber + 1 != frameNumber) { // not the next frame? seek
    const double frameTime = 1000.0 * frameNumber / frameRate;
    sourceVideo.set(CV_CAP_PROP_POS_MSEC, frameTime);
  }

  sourceVideo.read(image);
  lastFrameNumber = frameNumber;
} 
```

# c# - c# 通过winapi读取syslistview32项工具提示

> ID：11469282
> 
> 赞同：0
> 
> 时间：2012-07-13T11:07:16.170
> 
> 标签：c#, winapi, sendmessage, syslistview32, quicklaunch

我想编写一个应用程序，它在 windows xp 下按顺序读取快速启动项目，就像它们位于任务栏中一样，并为每个项目设置热键。windows + 1 应该启动第一个应用程序 windows + 2 第二个等（如在 windows 7 中）

所有这些项目都在 ia 文件夹中找到，但如果我阅读此文件夹中的项目，我不会得到这些项目的正确顺序。

我找到了两个解决方案来获得正确的顺序 - 首先：

在注册表中找到一个条目，其中保存了它们的位置，但不是纯文本。我不知道怎么读这个，也不能逆向引擎。

第二种：通过winapi读取任务栏中的项目工具提示，这样我就可以（如果没有同名的项目）通过快速启动文件夹中的名称进行搜索。快速启动栏只是一个列表视图（syslistview32）。通过sendmessage，我可以计算项目并启动一个（假装点击这个项目），但是我怎么能阅读工具提示？我用谷歌搜索了很多，尝试了一切，但我没有让它运行。

我希望你有任何片段给我，来解决这个问题。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:56:19.623

以编程方式确定快速启动工具栏中项目的顺序本质上是脆弱的。没有为此公开 API，这意味着它可能会在未来的 Windows 版本中发生变化，从而破坏依赖于未记录实现细节假设的代码。

但是，在这种特定情况下，问题比通常情况下要少，因为“快速启动”工具栏不再存在（或者，至少，没有人再使用它了）。使用快速启动工具栏的最后一个 Windows 版本是 Vista，因此如果您确保您的代码与 Vista 和更早版本兼容，您应该没问题。无论如何，它不适用于较新的版本。

快速启动工具栏中项目的位置存储在注册表中的以下键中：

```
HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Streams\Desktop 
```

您可以从那里提取信息，解析和解释它，然后随意使用它。正如您所提到的，这些信息不是以纯文本形式存储的，因为这对于 shell 加载和解析自身来说会非常慢。由于这是未记录的并且不是为客户使用而设计的，因此他们在使其用户（或开发人员）友好方面没有特别的好处。重要的是什么对 shell 最有效，从其内部结构存储二进制信息是显而易见的选择。

您需要对其进行逆向工程，以使其对您有用。我采取的方法可能是通过在快速启动栏中以特定顺序设置几个项目的测试环境，从注册表中导出信息，移动其中一个项目，从注册表，并比较两个导出的注册表文件以查看发生了什么变化。冲洗并根据需要重复多次以推断图案。（真的让你想知道为什么这么多开发人员确实*花*时间对 Windows 的未记录方面进行逆向工程，不是吗？）

另一种选择是使用 Spy++ 来调查实现任务栏及其快速启动工具栏的窗口。我没有 Windows 7 之前的系统，但听起来您已经完成此操作并确定快速启动工具栏是使用标准 ListView 实现的。如果您知道该窗口的名称（及其祖先窗口的名称），您可以遍历这些窗口以获得您感兴趣的窗口的句柄。然后您可以确定窗口中项目的顺序就好像它是您自己的应用程序中的标准 ListView。

ListView 控件的文档在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774735.aspx)；这应该让您朝着正确的方向开始。[`LVM_GETITEMTEXT`您可以通过发送消息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761055.aspx)获取其中一个子项的文本。

这可能是更简单的方法。同样的警告适用 - 没有什么可以阻止未来版本的 Windows 更改这些窗口的名称或任务栏的实现方式，但是因为具有快速启动工具栏的唯一版本的 Windows 已经发布（因此不太可能改变），这可能不是一个大问题。

再说一次，考虑到快速启动工具栏已经过时的事实，我很难理解为什么这项努力甚至值得投入开发人员的时间。

此外，即使您编写并安装了该程序，也要考虑当用户将新项目添加到快速启动工具栏或重新排列现有项目时会发生什么。您的实用程序如何知道这一点并相应地调整键盘快捷键？如果*安装程序*从快速启动工具栏中添加/删除项目怎么办？

# sitecore - 找不到带有 WFFM 的配置节点

> ID：11469286
> 
> 赞同：2
> 
> 时间：2012-07-13T11:07:21.153
> 
> 标签：sitecore

我正在尝试将我们的营销人员 Web 表单升级到 SDN 上可用的最新版本，但是当我开始安装时，我得到以下异常抛出：

```
Could not find configuration node: databases/database[@id='production'] 
```

但是，这是正确的，因为配置的唯一数据库是 Core、Master 和 Web。

我尝试将生产节点（指向 Master）添加到 Databases.config/ConnectionStrings.config 但它仍然会引发此错误。

有没有人遇到过这个并有解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:46:01.770

该错误告诉您它在您的“生产”中找不到`<database>`节点，`web.config`因此您需要拥有它。你所拥有的东西一定是在引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:40:05.433

问题在于 Sitecore 中的一个错误没有正确清理和重建链接数据库。

Sitecore Support 提供了这个解决方案：

1.  备份。
2.  截断 Core 数据库中的链接表。
3.  从 Sitecore 控制面板重建链接数据库。

这似乎在短期内解决了这个问题。我确信它会在未来的 Sitecore 更新中得到解决。

# titanium-modules - PDFTouch 的 Titanium appcelerator 模块以空值崩溃

> ID：11469288
> 
> 赞同：0
> 
> 时间：2012-07-13T11:07:28.220
> 
> 标签：titanium-modules

我创建了一个具有搜索功能的 PDF 阅读器模块。我为此集成了 PDFTouch ( [http://www.binpress.com/app/demo/app/859](http://www.binpress.com/app/demo/app/859) ) 框架。当我启动应用程序并打开 PDF 时，从 PDF 模块执行以下行时，我的应用程序崩溃。

```
YLDocument *document = [[[YLDocument alloc] initWithFilePath:path] autorelease];
YLPDFViewController *v = [[YLPDFViewController alloc] initWithDocument:document]; 
```

我收到有关“v 返回 nil”的错误，因此，当我尝试将此视图控制器添加到导航控制器时，应用程序崩溃。谁能帮助我在这两行上得到 nil viewcontroller 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:44:03.747

我是[PDFTouch SDK](http://www.binpress.com/c/859/5107?slk)的开发者。演示版只能用于评估目的，不得用于钛模块等其他产品。原始 PDFTouch SDK 也可作为[Titanium 模块](http://www.binpress.com/c/1162/5107?slk)提供，您可以在 Appcelerator 项目中使用它。

# python - 在 python 中派生类方法的正确方法是什么？

> ID：11469292
> 
> 赞同：3
> 
> 时间：2012-07-13T11:07:42.777
> 
> 标签：python, superclass, metaclass, class-method

最近遇到一个元类调用派生类方法的问题。例如，我得到一个简单的 baseclass `testA`，它有一个 classmethod`do1(a)`

```
class testA(object):

    @classmethod
    def do1(cls, a):
        print "in testA:",cls, a 
```

然后我构建了一个元类，它实际上只打印 cls：

```
class testMetaA(type):
    def __init__(cls,cname,bases,cdict):
        print "in testMetaA: %s"%cls 
```

然后我可以使用元类来构建一个子类`testB`，它可以按预期工作：

```
class testB(testA):

    @classmethod
    def do1(cls, a):
        print "in testB: %s"%cls
        super(testB, cls).do1(a)
    __metaclass__=testMetaA 
```

它将打印`in testMetaA: <class '__main__.testB'>`：和`testB.do1(a)`预期的作品：

```
>>> testB.do1('hello')
in testB: <class '__main__.testB'>
in testA: <class '__main__.testB'> hello 
```

但是，如果我尝试在包含“ `super`”的元类中调用类方法，如下所示`testMetaB`，它将引发错误：`NameError: global name 'testC' is not defined`。

```
class testMetaB(type):
    def __init__(cls,cname,bases,cdict):
        print "in testMetaB: %s"%cls
        cls.do1("hello")

class testC(testA):

    @classmethod
    def do1(cls, a):
        print "in testC: %s"%cls
        super(testC, cls).do1(a)
    __metaclass__=testMetaB 
```

我终于找到了一种通过使用`super(cls, cls)`而不是解决它的方法`super(testC, cls)`：

```
class testD(testA):

    @classmethod
    def do1(cls, a):
        print "in testD: %s"%cls
        super(cls, cls).do1(a)
    __metaclass__=testMetaB 
```

它将打印为：

```
in testMetaB: <class '__main__.testD'>
in testD: <class '__main__.testD'>
in testA: <class '__main__.testD'> hello 
```

`testD.do1(a)`也可以按预期工作：

```
>>> testD.do1('Well done')
in testD: <class '__main__.testD'>
in testA: <class '__main__.testD'> Well done 
```

现在我想知道在 classmethod 中使用 super 的最正确方法是什么？是否应该始终使用`super(cls,cls)`而不是显式编写当前类名？

谢谢！

@jsbueno

> 如果某些代码采用动态创建派生类之类的技巧，这很重要 - 如果该名称被分配给另一个对象而不是类本身，则不应使用类名作为 Super 的第一个参数。相反，类方法或`self.__class__`实例方法的 cls 可以传递给 Super。

**这是否意味着通常使用类名来超级是一个坏主意？**

对我自己来说，我通常使用`super(type(self),self)`而不是`super(type(self.__class__),self)`普通方法。不知道有没有什么大的优势可以使用`self.__class__`。我像这样重复@jsbueno 示例，这里是 C 使用`super(type(self),self)`. 所以在类被改变`D2()`时不会改变行为。`C`

```
>>> class A(object):
    def do(self):
        print "in class A"

>>> class B(A):
    def do(self):
        super(B, self).do()

>>> class C(A):
    def do(self):
        super(type(self),self).do()

>>> D1=B
>>> D2=C
>>> D1().do()
in class A
>>> D2().do()
in class A
>>> class B(A):
    def do(self):
        print "in new class B"

>>> D1().do()

Traceback (most recent call last):
  File "<pyshell#52>", line 1, in <module>
    D1().do()
  File "<pyshell#37>", line 3, in do
    super(B, self).do()
TypeError: super(type, obj): obj must be an instance or subtype of type
>>> class C(A):
    def do(self):
        print "in new class C"
>>> D2().do()
in class A 
```

根据@Don Question的建议，我将python版本放在这里： sys.version= 2.7.2+ (default, Oct 4 2011, 20:06:09) [GCC 4.6.1]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:47:31.963

> 但是，如果我尝试调用包含“super”的元类中的类方法，如下 testMetaB，它将引发错误：NameError: global name 'testC' is not defined。

该名称`TestC`只会在 MetaClass 完成它的工作后绑定到新类 - 也就是从它的`__init__`（以及之前`__init__`的 `__new__`）方法返回之后。

当我们使用“super”调用使用类名作为第一个参数时，类名不会神奇地出现在那里：它是一个（模块）全局变量，类本身被分配给它 - 在正常情况下。

在这种情况下，尚未分配名称 - 但是，因为它是一个类方法，所以你在`cls`变量中有对类的引用 - 这就是它起作用的原因。

如果某些代码采用动态创建派生类之类的技巧，这很重要 - 如果该名称被分配给另一个对象而不是类本身，则不应使用类名作为 Super 的第一个参数。相反，`cls`对于类方法，或者`self.__class__`例如方法可以传递给 Super。

这是一个片段，显示类名的全局名称绑定是 super 需要的：

```
>>> class A(object):
...   def do(self):
...      print "In class A"
... 
>>> class B(A):
...   def do(self):
...     super(B, self).do()
... 
>>> C = B
>>> C().do()
In class A
>>> class B(object):
...   def do(self):
...      print "in new class B"
... 
>>> C().do()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in do
TypeError: super(type, obj): obj must be an instance or subtype of type
>>> 
```

# .net - Dotfuscator“找不到兼容的 ildasm 版本”

> ID：11469293
> 
> 赞同：8
> 
> 时间：2012-07-13T11:07:44.463
> 
> 标签：.net, dotfuscator

你们之前有没有遇到过这个问题？

我试图在运行 Windows 7 Professional SP1 的机器上混淆用 C#/.NET 3.5 在 Visual Studio 2008 SP1 上编写的解决方案，并在使用 Dotfuscator Community Edition 时不断收到相同的错误

> 找不到兼容版本的 ildasm 以在程序集上运行（解决方案输出 exe 的有效路径）。此程序集最初是使用 .NET Framework v2.0.50727 构建的

我试过谷歌搜索，但到目前为止没有什么帮助（或者我的 Google-Fu 让我失望了）。

我尝试重新安装 Windows SDK，并重新安装 Visual Studio 2008，但都没有帮助。

我假设是 Dotfuscator 社区版导致了问题，因为一位同事在他的机器上使用相同的 xml 设置文件，并且它混淆了解决方案没有问题。

我的想法是，正如它在错误消息中所说，Dotfuscator 找不到与 .NET 3.5 兼容的 ildasm（用于混淆的库/函数？）文件，只有 .NET 2.x。这是一个正确的假设吗？

Dotfuscator 以前一直运行良好。但是，在最近一轮 Windows 更新之后，它似乎不再在我的机器上运行 - 最近的一些 Windows 更新已经对网络和一些同事的笔记本电脑造成了破坏（通常会撤销登录凭据，使某些程序无效），这就是为什么我假设这是导致此问题的更新之一。

当然，我并不反对将其归结为用户错误，除了相同的设置文件和解决方案输出不会导致 Dotfuscator 在同事的机器上失败。

有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-04-29T19:16:38.170

我必须将这四行添加到我的 dotfuscator 项目文件中才能解决问题：

```
<dotfuscator version="2.3">   
   <propertylist>
      <property name="ILDASM_v2.0.50727" value="C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\ildasm.exe" />
      <property name="ILDASM_v4.0.30319" value="C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\ildasm.exe" />  
   </propertylist> 
```

一般来说，dotfuscator 可能会错过任何版本的 ildasm。它说明错误消息中缺少哪个版本。只需使用您的特定版本定义属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T23:17:20.767

如您所料，这是由于 Dotfuscator 未能为提供给它的程序集找到正确版本的 ildasm。Dotfuscator 混淆是通过反汇编、更改和重新组装程序集来执行的，因此它需要与程序集的目标版本匹配的 ilasm/ildasm 版本。

Dotfuscator 将在 \Windows\Microsoft.NET\Framework{FrameworkVersionHere} 中搜索 ilasm 和 ildasm、IIRC 的正确版本。您在 \Windows\Microsoft.NET\Framework\v2.0.50727 中有这些可执行文件吗？如果没有，您需要将它们放入其中 - 安装 .NET Framework 2.0 应该这样做（或者只是从同事的计算机上复制）。

编辑以反映以下评论：我们发现重新安装 Windows SDK 解决了该问题，可能是因为 Windows SDK 的注册表设置已被清除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-02T15:50:14.683

我浪费了一天的勇气，发现 v4.9 需要 SDK 版本 7.0（而不是 7.1 或 8.0）才能 'find' `ILDASM`。

仍然不确定查找是否基于注册表。

TODO：分析重新破解它需要什么，以确定发现是基于位置还是注册表。抢先确实可以更好地记录这一点和/或给出更详细的错误。[在抢先论坛](http://www.preemptive.com/forum/forum?f=17&sid=a0d6eecb1a34ed8cc259cb4ddd91ca25)上对这个待审核的审核有疑问

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T09:53:48.133

问题是安装带有集成 dotfuscator 的 Visual Studio。取出 dosfuscator 或在没有 dotfuscator 的情况下重新安装 Visual Studio。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-28T11:54:38.777

我遇到过同样的问题。Dotfuscator 4.9.8500 未正确查找 .NET 4.0 的 SDK 工具 - 它假定在此键下找到路径：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v7.0\WinSDK-NetFx40Tools 
```

没有一个 SDK 安装程序填充这个键 - 似乎 VS2010 做了（我们不再使用它）。我不想为此检测我的构建，因为我们有几十个分支，其中包含 Dotfuscator 配置的变体。

我们正在迁移到 Dotfuscator 4.16.0，它没有这个问题（感谢上面的@mletterle？），但由于其他连锁效应，我们必须逐步推出。

我对 4.9.8500 的解决方法：在我们的构建代理上，安装[.NET 4.5.2 开发人员包](http://blogs.msdn.com/b/dotnet/p/dotnet_sdks.aspx)，然后将以下内容添加到注册表中，这会将 Dotfuscator 重定向到 7.1 .NET 4.0 工具文件夹。请注意，键说“7.0”，而路径说“7.1”。首先备份注册表文件夹！

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v7.0\WinSDK-NetFx40Tools]
"ProductVersion"="7.1.7600.0.30514"
"ComponentName"="Windows SDK Tools for .NET Framework 4.0"
"InstallationFolder"="C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\NETFX 4.0 Tools\\"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v7.0\WinSDK-NetFx40Tools-x64]
"ProductVersion"="7.1.7600.0.30514"
"ComponentName"="Windows SDK Tools for .NET Framework 4.0 (x64)"
"InstallationFolder"="C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\NETFX 4.0 Tools\\x64\\"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v7.0\WinSDK-NetFx40Tools-x86]
"ProductVersion"="7.1.7600.0.30514"
"ComponentName"="Windows SDK Tools for .NET Framework 4.0"
"InstallationFolder"="C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\NETFX 4.0 Tools\\" 
```

# ruby - 映射来自 gsub 方法的匹配数据

> ID：11469296
> 
> 赞同：0
> 
> 时间：2012-07-13T11:07:56.287
> 
> 标签：ruby, regex, refactoring

我正在寻找某种方法来摆脱方法中的`collection`对象`collect_data`并直接返回匹配的数据。

```
def collect_data(string)
  collection = []
  string.gsub(/a\=\[(.+?)\](\s|$)/) { collection << $1 }
  collection
end 
```

一些例子它应该如何工作

```
string = "a=[111] b=[555] a=[123]"

collect_data(string) # =>  ["111", "123"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:20:06.543

```
"a=[111] b=[555] a=[123]".scan(/a\=\[(.+?)\](\s|$)/).map(&:first) 
```

# ajax - 使用 Eclipse PDT 调试具有并发请求的 Ajax 页面

> ID：11469297
> 
> 赞同：2
> 
> 时间：2012-07-13T11:07:56.460
> 
> 标签：ajax, eclipse-pdt, zend-debugger

曾经我问过同样的问题，但现在我可以为它提供一个测试用例。

当页面向服务器的动态页面发送多个请求时，问题在于 Eclipse PDT 中的调试。考虑如下网页：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<script src="link-to-jquery/jquery-1.7.2.min.js"></script>
<script>
$(document).ready(function() {
    var list = $("ol");
    for (var i=0; i<20; i++) {
        list.append($('<li><img src="/img.php?'+i+'" /></li>'));
    }
});
</script>
</head>

<body>
<ol>
</ol>
</body>

</html> 
```

在上面的页面中，JQuery 仅用于防止浏览器缓存图像。并且是`img.php`这样的：

```
<?php
readfile('some_image.jpg'); 
```

当我尝试使用 Zend Debugger 调试 Eclipse PDT 中的第一页时，只发出第一个`img.php`请求，而其他请求被驳回。示例输出显示在附加的图像文件中。在本例中，不加载图像文件不会阻止您调试项目的其余部分。但是一旦有一个由于这个问题而没有加载的 javascript 文件，项目的其余部分将无法正常工作。有谁知道如何调试这样的页面？

这是我的规格：

*   PHP 版本 5.3.14
*   Zend 调试器 v5.3
*   适用于 PHP 开发人员的 Eclipse，版本：3.0.2
*   Apache/2.2.22 (Ubuntu)

![样本输出](../Images/95136fdf9969bdb0658939540cbf4170.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T08:43:05.530

我发现这个问题是 Zend Debugger 特有的，而 XDebug 工作顺利。

+1 用于 XDebug，-1 用于 Zend 调试器

# java - HeapDumpOnOutOfMemoryError 在定期任务上只工作一次

> ID：11469299
> 
> 赞同：5
> 
> 时间：2012-07-13T11:07:57.783
> 
> 标签：java, out-of-memory

我有几个以指定间隔运行的应用程序。为了监控 OutOfMemoryError，我决定启用 HeapDumpOnOutOfMemoryError，在此之前我决定做一些研究。一些应用程序的最大堆大小为 2GB，因此快速连续生成多个堆转储可能会耗尽所有磁盘空间。

我写了一个小脚本来检查它是如何工作的。

```
import java.util.LinkedList;
import java.util.List;

public class Test implements Runnable{

        public static void main(String[] args) throws Exception {
                new Thread(new Test()).start();
        }

        public void run() {
                while (true) {
                        try{
                                List<Object> list = new LinkedList<Object>();
                                while (true){
                                        list.add(new Object());
                                }
                        }
                        catch (Throwable e){
                                System.out.println(e);
                        }
                        try {
                                Thread.sleep(1000);
                        }
                        catch (InterruptedException ignored) {

                        }
                }
        }
} 
```

这是结果

```
$ java -XX:+HeapDumpOnOutOfMemoryError -Xmx2M Test                                                                                                                                                        
java.lang.OutOfMemoryError: Java heap space
Dumping heap to java_pid25711.hprof ...
Heap dump file created [14694890 bytes in 0,101 secs]
java.lang.OutOfMemoryError: Java heap space
java.lang.OutOfMemoryError: Java heap space 
```

它可以按我的意愿工作，但我想知道为什么。

查看openjdk6源代码我发现了以下内容

```
void report_java_out_of_memory(const char* message) {
  static jint out_of_memory_reported = 0;

  // A number of threads may attempt to report OutOfMemoryError at around the
  // same time. To avoid dumping the heap or executing the data collection
  // commands multiple times we just do it once when the first threads reports
  // the error.
  if (Atomic::cmpxchg(1, &out_of_memory_reported, 0) == 0) {
    // create heap dump before OnOutOfMemoryError commands are executed
    if (HeapDumpOnOutOfMemoryError) {
      tty->print_cr("java.lang.OutOfMemoryError: %s", message);
      HeapDumper::dump_heap_from_oome();
    }   

    if (OnOutOfMemoryError && OnOutOfMemoryError[0]) {
      VMError err(message);
      err.report_java_out_of_memory();
    }   
  }
} 
```

第一个 if 语句是如何工作的？

编辑：似乎每次打印消息时都应该创建 heapdump，但它不会发生。为什么呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:14:46.820

if 语句包含一个比较和交换原子操作，当且仅当交换是由正在运行的线程执行时才会返回 0。比较和交换（也称为比较和交换）的工作方式如下：

*   提供您认为变量包含的值（在您的情况下为 0，变量为 out_of_memory_reported）
*   提供您想要交换的值（在您的情况下为 1）
*   如果该值是您提供的值，则会**自动**将其交换为替换值（在将其与您的估计进行比较后，没有其他线程可以更改该值）并返回 0
*   否则，什么都不会发生并返回一个不同于 0 的值来指示失败

# android - 如何从可扩展列表视图子值中获取值

> ID：11469304
> 
> 赞同：1
> 
> 时间：2012-07-13T11:08:33.373
> 
> 标签：android

我想在 android 中创建自定义可扩展列表视图，但是当我点击孩子时，没有找到任何值，并且我的点击事件如下所示：

```
mExpandableListView.setOnChildClickListener(new OnChildClickListener() {
    @Override
    public boolean onChildClick(ExpandableListView parent, View v,
                                int groupPosition, int childPosition, long id) {
        Toast.makeText(getBaseContext(), "Child clicked",
                       Toast.LENGTH_SHORT).show();
        return true;
    }
}); 
```

有谁知道？请帮助提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:04:11.970

尝试这个。使用方法“getChildAtPosition”..

```
su chale chhe? 
```

# java - 在 Java 应用程序中跨层传递枚举

> ID：11469307
> 
> 赞同：0
> 
> 时间：2012-07-13T11:08:59.630
> 
> 标签：java, spring, design-patterns, jakarta-ee, enums

我有一个具有 3 层的应用程序：GWT-RPC、业务和 DAO 在每一层中我都有不同的 bean。例如，对于用户，我有 UserRPC（用于 UI）、User（业务）和 UserDTO（持久化）。在每一层更改时，我都会重新转换对象。

主要问题是枚举。各个层的枚举完全相同，但我需要复制它们以保持层的独立性。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:17:17.693

（简短回答）

如果它们确实相同，则您要创建一个`commons`项目/ jar。这里里面是整个应用程序共有的所有东西，例如实用程序类、枚举等。

（长答案）

考虑系统的整体架构，任何层都不需要重复数据。如果发生这种情况，则意味着系统设计存在缺陷，紧耦合的场景可能即将出现。这就是为什么在开发软件工程师时经常（应该）在执行任何实现之前记录接口（合同/api）的部分原因。一旦这些接口被批准并且没有重复的机会，实际的实施就可以开始了。这将捕获在应用程序的每个单独层创建的 X 个枚举的场景，这些枚举是常量。此外，请记住，对于枚举，如果您的业务层中的某些更改会影响枚举，您必须重新编译代码并重新部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:17:09.633

> 各个层的枚举完全相同，但我需要复制它们以保持层的独立性。

数据重复从来都不是一个好主意。您如何确保对一个枚举的更新反映在其他层中？您可能应该创建一个实用程序层，将所有常见类放在那里。

# php - 渲染 Highcharts 的问题 - 通过 PHP/MySQL 填充

> ID：11469308
> 
> 赞同：2
> 
> 时间：2012-07-13T11:09:02.853
> 
> 标签：php, javascript, mysql, html, highcharts

我希望有人可以在这里帮助我，我一直在看 highcharts 作为从我的 sql db 中绘制动态数据的一种方式....到目前为止我想出的是下面，这很奇怪，看起来正确，数据是正确的，但是，我无法让我的图表呈现，现在我尝试通过 Chrome 和 IE 查看图表但没有结果，任何人都可以看到我可能出错的地方，或者在哪里有一个错误...我的数据正在传递到 JS 数组中，因此渲染结束存在问题...任何帮助将不胜感激。我已经关闭了我的 html 标签，但由于某种原因，它没有显示在这篇文章中……如果有人有任何建议，我会很高兴听到他们的意见！

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>  
<script src='highcharts.js' type='text/javascript'> </script>       
    <script src='exporting.js' type='text/javascript'> </script>    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"type="text/javascript"></script>    

    </head>

<body>

    <?php
    include "connect_db.php";

    $SQL1 =     "SELECT review.reviewForum AS reviewForum, 
                COUNT(CASE WHEN mom.result = 'Approved' THEN 'yes' ELSE NULL END) AS Approved, 
                COUNT(CASE WHEN mom.result = 'NOT Approved' THEN 'yes' ELSE NULL END) AS Not_Approved, 
                COUNT(CASE WHEN mom.result = 'Cancelled' THEN 'yes' ELSE NULL END) AS Cancelled 
                FROM review INNER JOIN mom ON mom.reviewId = review.reviewId GROUP BY review.reviewForum";

    $result1 = mysql_query($SQL1);
    $data1 = array();
    while ($row = mysql_fetch_array($result1)) {
       $data1[] = $row['reviewForum'];
    }

    $result2 = mysql_query($SQL1);
    $data2 = array();
    while ($row = mysql_fetch_array($result2)) {
       $data2[] = $row['Approved'];
    }

    $result3 = mysql_query($SQL1);
    $data3 = array();
    while ($row = mysql_fetch_array($result3)) {
       $data3[] = $row['Not_Approved'];
    }

    $result4= mysql_query($SQL1);
    $data4 = array();
    while ($row = mysql_fetch_array($result4)) {
       $data4[] = $row['Cancelled'];
    }
    ?>

    <script type="text/javascript">
    $(document).ready(function() {
        var chart = new Highcharts.Chart({
              chart: {
                 renderTo: 'container',
                 type: 'column'
              },

            title:  {
                        text: 'TC REVIEW RESULT STATS'
                    },

            xAxis:  {
                        categories: [<?php echo join($data1, ',') ?>],
                    },

            yAxis:  {
                        min:0
                    },

            legend: {
                        layout: 'vertical',
                        backgroundColor: '#FFFFFF',
                        align: 'left',
                        verticalAlign: 'top',
                        x: 50,
                        y: 35,
                        floating: true,
                        shadow: true
                    },

            plotOptions: {
                            column: {
                                        pointPadding: 0.2,
                                        borderWidth: 0
                                    }
                        },

            series: [   {
                            name: 'Approved',
                            data: [<?php echo join($data2, ',') ?>],
                            pointStart: 0
                            //pointInterval
                        },

                        {

                            name: 'Unapproved',
                            data: [<?php echo join($data3, ',') ?>],
                            pointStart: 0
                            //pointInterval
                        },

                        {
                            name: 'Cancelled',
                            data: [<?php echo join($data4, ',') ?>],
                            pointStart: 0
                            //pointInterval
                        },
                    ]
        });
});
    </script>

    <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:28:27.080

我建议您开始尝试在不生成代码的情况下渲染一个。如果这不起作用，您可能想在 jsfiddle 上分享它，我们可以看看 :-)。如果它确实有效，您应该将其与生成的代码进行比较。

```
 {
        name: 'Cancelled',
        data: [<?php echo join($data4, ',') ?>],
        pointStart: 0
        //pointInterval
    }, // This comma is a syntax error
] 
```

你看到那个逗号了吗？您不要在“}”之前放置逗号，因为您在多个地方都有逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:25:03.603

去掉xAxis下的categories语句后面的逗号。

```
xAxis:  {
     categories: [<?php echo join($data1, ',') ?>],
 }, 
```

应该

```
xAxis:  {
    categories: [<?php echo join($data1, ',') ?>]
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:36:00.930

我认为真正的原因在这里：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"type="text/javascript"></script>    
<script src='highcharts.js' type='text/javascript'> </script>       
<script src='exporting.js' type='text/javascript'> </script> 
```

首先加载 jQuery，然后加载 Highcharts。

# c# - 使用 XmlTextReader https 请求忽略无效的 SSL（版本 3）证书

> ID：11469309
> 
> 赞同：2
> 
> 时间：2012-07-13T11:09:04.873
> 
> 标签：c#, ssl, httpwebrequest

我正在尝试从 https Web 请求创建 XML 文档，但是当站点的证书无效时，我无法使其正常工作。我希望我的应用程序不关心证书，我希望它无所畏惧地生活在边缘！

这是我拥有的初始代码，之前我曾多次使用它从标准 http（非 SSL）请求中获取我想要的内容：

```
XmlDocument xml = new XmlDocument();
XmlTextReader reader = new XmlTextReader("https://www.example.com");
xml.Load(reader); 
```

由于网站的 SSL 证书无效，我现在收到以下错误：

> 请求被中止：无法创建 SSL/TLS 安全通道。

现在我已经完成了我的谷歌搜索并尝试了一些有希望的解决方案，但似乎没有任何帮助。

[我在这里](https://stackoverflow.com/questions/10036161/c-sharp-get-xml-site-over-ssl-tls-https)尝试过的一个看起来不错，但似乎没有用，我直接在上面的代码之前添加了“已接受的答案”代码行，因为它不太清楚应该去哪里。

万一有什么不同，我的代码在类库中，我正在通过控制台应用程序进行测试。我也在使用.Net 4。

* * *

这是我最近的尝试（不起作用）：

```
XmlDocument xml = new XmlDocument();

ServicePointManager.ServerCertificateValidationCallback += new System.Net.Security.RemoteCertificateValidationCallback((s, ce, ch, ssl) => true);

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlCommand);
request.Credentials = CredentialCache.DefaultCredentials;

using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
{
    using (Stream receiveStream = response.GetResponseStream())
    {
        XmlTextReader reader = new XmlTextReader(receiveStream);
        xml.Load(reader);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:06:59.010

好的，所以我找到了解决方案。我们选择尝试禁用服务器上的 SSL 进行测试，并注意到它使用的是 SSL 3。在另一次谷歌搜索之后，我发现了一些额外的代码来解决这个问题（对设置很重要`SecurityProtocolType`）：

```
ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;
ServicePointManager.ServerCertificateValidationCallback += new System.Net.Security.RemoteCertificateValidationCallback((s, ce, ch, ssl) => true);

XmlDocument xml = new XmlDocument();
XmlTextReader reader = new XmlTextReader(urlCommand);
xml.Load(reader); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:23:42.247

嗯，也许 XmlTextReader 使用不同的方式访问 HTTPS。

尝试使用 , 发出 Web 请求`HttpWebRequest`并传递`response.GetResponseStream()`给 XML 文本阅读器（并将`ServicePointManager.ServerCertificateValidationCallback`覆盖保留在您拥有的地方）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-18T13:39:44.447

**此错误的原因：**

您没有在您的网站上使用有效的客户端证书。

**你可以试试下面：**

*   为了快速转身，您可以尝试使用 http://____ * 访问 URL - 不建议这样做，但您可以尝试进行测试。*

*   因此，您没有使用有效的客户端证书，您可以编写如下内容：

    *   在您请求下载 XML 或发出一些 http 请求的位置添加此行。

    //添加Mock证书验证

    ServicePointManager.ServerCertificateValidationCallback = new RemoteCertificateValidationCallback(OnValidationCallback);

*   添加以下作为全局方法：

    public static bool OnValidationCallback(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors errors) { return true; }

# ruby-on-rails - 在 ror 中搜索数据库

> ID：11469318
> 
> 赞同：2
> 
> 时间：2012-07-13T11:10:01.807
> 
> 标签：ruby-on-rails

我是 RoR 的新手。根据这本书（ruby on rails 4th edition）我已经完成了。但我正在尝试为客户提供搜索选项，以便更轻松地找到产品。我正在尝试这个例子[http://railscasts.com/episodes/37-simple-search-form](http://railscasts.com/episodes/37-simple-search-form)

我已经把视图>存储>索引这个：

```
<%= form_tag products_path, :method => 'get' do %> 
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
<% end %> 
```

在模型>产品中我放了这个：

```
def self.search(search)
  if search
    find(:all, :conditions => ['title LIKE ?', "%#{search}%"])
  else
    find(:all)
  end
end 
```

在控制器> store_controller 中：

```
 @products = Product.search(params[:search]) 
```

问题是当我搜索时向我展示了我拥有的所有产品，而不仅仅是我搜索的内容，而且 url 正在更改为 ...../?utf8=%E2%9C%93&search=iphone+4

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:12:17.080

```
<% form_tag ... 
```

必须：

```
<%= form_tag ...
  ^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:33:26.840

好的，我找到了！！！最后...

在 store_controller 中，我在 def 索引中有这一行：@products = Product.all 并导致问题。不，store_controller 是：

```
class StoreController < ApplicationController
    skip_before_filter :authorize
        @products = Product.all
  def index
    @products = Product.search(params[:search])

    @cart = current_cart
  end
end 
```

并且像疯了一样工作！

# actionscript-3 - as3中的小数到小数点后一位？

> ID：11469321
> 
> 赞同：5
> 
> 时间：2012-07-13T11:10:06.567
> 
> 标签：actionscript-3

我使用以下方法随机生成一个小数：

```
private function randomNumber(min:Number, max:Number):Number
    {
        return Math.random() * (max - min) + min;
    } 
```

它会出现类似 1.34235346435 的内容。

我怎样才能将其转换为 1.3。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T11:19:20.617

您可以像这样四舍五入到小数点后一位；

```
var newValue:Number = Math.round(oldValue * 10)/10 
```

或任意小数位数，如下所示：

```
function round2(num:Number, decimals:int):Number
{
    var m:int = Math.pow(10, decimals);
    return Math.round(num * m) / m;
}
trace(round2(1.3231321321, 3)); //1.323 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-07T16:01:47.507

只需使用 .toFixed 或 .toPrecision 方法，它不必很复杂（请注意，数字将变为字符串，因此您需要将其分配给此类或将其转换回）。

例如。

```
 var numb:Number = 4.3265891;
    var newnumb;

    newnumb=numb.toFixed(2);//rounds to two decimal places, can be any number up to 20
    trace(newnumb);//traces 4.33

    newnumb=numb.toPrecision(3);//the 3 means round to the first 3 numbers, can be any number from 1 to 20
    trace(newnumb);//traces 4.33 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-22T21:36:32.773

如果您需要 Number 作为结果和性能，我会说这个解决方案比 Math.pow()/Math.round() 更有效。如果您需要 3 位小数，只需将 100 更改为 1000。

```
var myNumber:Number = 3.553366582;
myNumber = (( myNumber * 100 + 0.5)  >> 0) / 100;
//trace = 3.55 
```

展示四舍五入：

```
var myNumber:Number = 3.557366582;
myNumber = (( myNumber * 100 + 0.5)  >> 0) / 100;
//trace = 3.56 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T11:12:21.347

改用它 return Math.Round((Math.random() * (max - min) + min),1);

,1 将四舍五入到 1 位

对于 2 位小数，您可以使用 return Math.Round((Math.random() * (max - min) + min),2);

我希望这对现在有所帮助。

# c# - 用于启动 CodedUI 测试的控制台应用程序

> ID：11469323
> 
> 赞同：0
> 
> 时间：2012-07-13T11:10:11.580
> 
> 标签：c#, testing, dll, batch-file, coded-ui-tests

我有一个编码的 ui 测试，我想通过使用批处理开始，它是一个 .dll 文件。

我从批处理文件中调用它的原因是必须重新启动服务器才能执行此测试。

这只是一个简单的`call test.dll`事情还是我必须做其他事情？

**找到更新** *代码*

```
Playback.Initialize();
TestProject.CodedUITest1 coded = new TestProject.CodedUITest1();
coded.CodedUITestMethod1();
Playback.Cleanup(); 
```

取自[这里](http://blogs.microsoft.co.il/blogs/shair/archive/2010/07/15/running-codedui-test-from-another-application.aspx)，它缺少来自私有程序集的两个参考添加：

1.  Microsoft.VisualStudio.TestTools.UITest.Extension.Uia.dll
2.  Microsoft.VisualStudio.TestTools.UITest.Extension.IE.dll

希望这可以帮助其他想要这样做的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:19:45.933

您不能像运行 exe 一样运行 Dll 文件。Dll 包含旨在由程序使用的代码，这意味着一个代码源可以被许多程序使用，从而节省了重复代码。

通常 Dll 将具有您可以通过程序调用的文档化函数，除非您自己构建它，在这种情况下您会知道 :)

尝试找到使用 Dll 的程序并调用它，或者找到它的文档并`rundll32`以 @PA 的身份运行该函数。建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:12:53.737

DLL 是需要从应用程序链接和调用的*动态库。*每个 DLL 都有自己的导出接口，或要从外部可执行文件调用的入口点集合，或者可能是从另一个 DLL 调用的入口点集合。

Windows 提供了一组调用来帮助调用程序加载、检测入口点和卸载 DLL。除了这些有限的通用功能之外，还有无数种使用 DLL 的方式、调用约定、传递参数的方式、参数的类型、返回数据的方式、同步、通知的方式事件，中断，多线程，几乎在编程模型的每个方面。

话虽如此，您的 DLL 可能会被某些特定的应用程序调用，因此可能遵循严格且定义良好的 API。一种这样的 DLL 是旨在与**rundll**可执行程序一起运行的 Windows 系统 DLL。`rundll32.exe`是 Windows 系统可执行文件，它从一个明确编程为以这种方式调用的 DLL 启动和调用打包和交付在 .dll 文件中的函数。

要在 TEST.DLL 中调用 TestFunction，将 1234 作为参数传递，您可以使用

```
RUNDLL32  TEST.DLL, TestFunction 1234 
```

Rundll 将为您执行以下任务

*   通过 LoadLibrary() 加载 TEST.DLL。
*   通过 GetProcAddress() 寻址 TestFunction 函数。
*   调用 TestFunction 函数，传递命令行的其余部分
*   卸载 DLL 并退出。

# image - 有没有办法从图像文件夹中了解网站所有未使用的图像？

> ID：11469324
> 
> 赞同：1
> 
> 时间：2012-07-13T11:10:12.610
> 
> 标签：image

有没有你知道的工具可以从图像文件夹中找到网站所有未使用的图像。我想识别图像文件夹中所有那些不是 HTML 和 CSS 背景中的内联图像的图像。是否可以使用任何工具、技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:21:53.150

为此，您可以使用 Dreamweaver。在 Dreamweaver 中查看站点文件（按 F8），在站点菜单中选择重新创建站点缓存。Dreamweaver 检查本地站点文件夹中的链接，并为您提供所有未使用文件的报告，您可以删除或重新链接这些文件。

希望这能解决您的问题。

# javascript - 正则表达式替换元素文本

> ID：11469326
> 
> 赞同：1
> 
> 时间：2012-07-13T11:10:35.990
> 
> 标签：javascript, jquery, regex

似乎从来没有掌握那些正则表达式的......

我需要用 newVal 更新总数

```
<span class="myClass">some text Total (12)</span> 
```

进入

```
<span class="myClass">some text Total (13)</span> 
```

也没有当前值

```
<span class="myClass">some text Total</span> 
```

进入

```
<span class="myClass">some text Total (13)</span> 
```

哦，有些文字可以是任何东西

我的代码

```
 newVal = 13;
    $('.myClass').text( $('.myClass').text().replace(???, ???) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:14:35.033

您可以使用以下方法包装计数器`span`：

```
<span class="myClass">some text Total (<span>12</span>)</span> 
```

并这样做：

```
newVal = 13;
$('.myClass span').text(newVal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:17:13.823

错误的方法，您的代码只会返回新字符串。要设置它，请使用

```
$('.myClass').text(function(i, old){ 
   return old.replace(/(\s+\(\d+\))?$/, " ("+newVal+")");
}) 
```

正则表达式匹配字符串结尾和（可选）空格+括号前的数字。

# php - zend_test/phpunit 的引导问题

> ID：11469335
> 
> 赞同：0
> 
> 时间：2012-07-13T11:11:12.360
> 
> 标签：php, zend-framework, zend-test

我正在使用 Zend_Test。下面是我的测试/bootstrap.php 文件：

```
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', 'testing');

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

require_once 'Zend/Loader/Autoloader.php';
$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->registerNamespace('Ca_');

Zend_Controller_Action_HelperBroker::addPrefix('Ca_Controller_Action_Helper');

$resourceLoader = new Zend_Loader_Autoloader_Resource(array(
        'namespace' => "Social",
        'basePath'  => APPLICATION_PATH . "/../library",
));
$resourceLoader->addResourceType('facebook', 'Facebook/', 'Facebook'); 
```

这是我的测试类中的 setUp() 方法（扩展 Zend_Test_PHPUnit_DatabaseTestCase）：

```
public function setUp()
{
    $this->bootstrap = new Zend_Application(APPLICATION_ENV, APPLICATION_PATH . '/configs/application.ini');
    $this->entityUser = new Ca_Model_Entity_User_Registered();
    $a = $this->getAdapter();
    $a->setFetchMode(Zend_Db::FETCH_OBJ);
$a->query("SET FOREIGN_KEY_CHECKS=0;");     
parent::setUp();        
} 
```

现在，在运行单元测试时，我收到此特定代码行的以下错误：

```
$bootstrap = Zend_Controller_Front::getInstance()->getParam('bootstrap');
$options = $bootstrap->getOptions(); 
```

> 致命错误：在非对象上调用成员函数 getOptions()

有谁知道是什么导致了这个问题以及我该如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:24:27.520

看起来您的代码将单个参数视为对象。

来自文档： http: [//framework.zend.com/manual/en/zend.controller.front.html](http://framework.zend.com/manual/en/zend.controller.front.html)

```
getParam($name) allows you to retrieve a single parameter 
at a time, using $name as the identifier. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:18:06.003

我修好了它。最终在引导程序中加载应用程序配置并将其存储在 Zend_Registry 中。这样容易多了。

```
$config = new Zend_Config_Ini(APPLICATION_PATH . '/configs/application.ini', APPLICATION_ENV);
Zend_Registry::set('config', $config); 
```

# python - pylab 和 pyplot 有什么区别？

> ID：11469336
> 
> 赞同：196
> 
> 时间：2012-07-13T11:11:15.310
> 
> 标签：python, matplotlib, plot

matplotlib.pyplot 和 matplotlib.pylab 有什么区别？

哪个是首选？

我有点困惑，因为它似乎独立于我的导入，我可以做同样的事情。我错过了什么？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-07-13T13:47:18.670

**该措辞不再出现在文档中。**

现在不鼓励使用`pylab`导入，并且建议将 OO 接口用于大多数非交互式使用。

* * *

从[文档](http://matplotlib.sourceforge.net/faq/usage_faq.html)中，重点是我的：

> Matplotlib 是整个包；pylab 是 matplotlib 中的一个模块，它与[matplotlib](http://matplotlib.sourceforge.net/api/matplotlib_configuration_api.html#module-matplotlib)一起安装；[matplotlib.pyplot](http://matplotlib.sourceforge.net/api/pyplot_api.html#module-matplotlib.pyplot)是 matplotlib 中的一个模块。
> 
> Pyplot 为 matplotlib 中的底层绘图库提供状态机接口。这意味着图形和轴是隐式自动创建的，以实现所需的绘图。例如，从 pyplot 调用 plot 将自动创建必要的图形和轴以实现所需的绘图。设置标题会自动将该标题设置为当前坐标区对象：
> 
> Pylab 将 pyplot 功能（用于绘图）与 numpy 功能（用于数学和处理数组）结合在一个命名空间中，使该命名空间（或环境）更加类似于 MATLAB。例如，可以像在 MATLAB 中一样调用 sin 和 cos 函数，并且具有 pyplot 的所有功能。
> 
> pyplot**界面通常首选用于非交互式绘图**（即脚本）。pylab**界面便于交互式计算和绘图**，因为它最大限度地减少了打字。请注意，如果您将 ipython shell 与 -pylab 选项一起使用，这就是您得到的结果，该选项从 pylab 导入所有内容并使绘图完全交互。

# ruby - 重构时添加 let(:base_title) 时 Rspec 失败

> ID：11469338
> 
> 赞同：0
> 
> 时间：2012-07-13T11:11:17.263
> 
> 标签：ruby, ruby-on-rails-3.1, rspec, refactoring

我正在关注 Michael Hartl 的 Ruby on rails 教程。

使用 rspec 重构一个简单的测试失败了，我将首先粘贴有效的内容，然后粘贴有效的内容....

```
require 'spec_helper'

describe "Static pages" do

  describe "Home page" do

    it "should have the h1 'Sample App'" do
      visit '/static_pages/home'
      page.should have_selector('h1', :text => 'Sample App')
    end

    it "should have the title 'Home'" do
      visit '/static_pages/home'
      page.should have_selector('title',
                        :text => "Ruby on Rails Tutorial Sample App | Home")
    end
   end

    describe "Help page" do

    it "should have the h1 'Help'" do
      visit '/static_pages/help'
      page.should have_selector('h1', :text => 'Help')
    end

    it "should have the title 'Help'" do
      visit '/static_pages/help'
      page.should have_selector('title',
                        :text => "Ruby on Rails Tutorial Sample App | Help")
    end
  end
end 
```

**现在我将粘贴 rspec 中失败的内容**

```
require 'spec_helper'

describe "Static pages" do

  let(:base_title) { "Ruby on Rails Tutorial Sample App |" }

  describe "Home page" do

    it "should have the h1 'Sample App'" do
      visit '/static_pages/home'
      page.should have_selector('h1', :text => 'Sample App')
    end

    it "should have the title 'Home'" do
      visit '/static_pages/home'
      page.should have_selector('title', :text => "#{base_title}  Home")
    end
  end

  describe "Help page" do

    it "should have the h1 'Help'" do
      visit '/static_pages/help'
      page.should have_selector('h1', :text => 'Help')
    end

    it "should have the title 'Help'" do
      visit '/static_pages/help'
      page.should have_selector('title', :text => "#{base_title}  Help")
    end
  end 
end 
```

我也是新手，所以我想问一下可能需要更多信息......变化显然是

```
 let(:base_title) { "Ruby on Rails Tutorial Sample App |" } 
```

谢谢你的帮助 ！

失败的错误是......

> 失败：
> 
> 1）静态页面主页应该有标题'Home'失败/错误：page.should have_selector（'title'，：text =>“#base_title} Home”）预期的css“title”和文本“#base_title} Home”返回一些东西 # ./spec/requests/static_pages_spec.rb:16:in `block (3 levels) in '
> 
> 2）静态页面帮助页面应该有标题'Help'失败/错误：page.should have_selector（'title'，：text =>“#{base_title}Help”）预期的css“title”和文本“Ruby on Rails Tutorial示例应用程序 | 帮助”返回一些东西 # ./spec/requests/static_pages_spec.rb:29:in `block (3 levels) in '

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:06:41.977

自从提出这个问题以来已经有一段时间了。如果它仍然相关：

后面有两个空格`#{base_title}`。

删除一个空格，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:26:53.543

看起来您`{`在第一个示例中错过了 a：

```
 "title" with text "#base_title} Home" 
```

这个字符串只是没有插值，与`let`

如果您的代码和测试正常工作，则不应发生其他错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T23:50:47.817

领先于改变 Capybara 和 Webrat 的语法。这应该适用于您的示例：

```
 page.should have_selector('h1', text: "#{base_title}  Help") 
```

或者你可以用这样的类替换它：

```
page.should have_selector("h1[class='title']", text: "#{base_title} Help) 
```

# android - 从图像的字节数组调整图像的对比度

> ID：11469339
> 
> 赞同：1
> 
> 时间：2012-07-13T11:11:17.697
> 
> 标签：android

我可以从图像的字节流中更改图像的对比度吗？我已经完成了复制图像的必要工作，并且需要将更改对比度部分添加到代码中。知道怎么做吗？或者甚至有可能吗？

```
package make.image.bw;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.RandomAccessFile;
import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;

public class MakeImageBWActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);                  // set screen view
        String imageInSD      =     Environment.getExternalStorageDirectory().getAbsolutePath() +"/earthglobe.jpg";
        RandomAccessFile file =     null;
        try {
            file = new RandomAccessFile(imageInSD, "r");
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }
        File myFile               =     new File(Environment.getExternalStorageDirectory(), "latestearth.jpg");
        byte[] buffer             =     new byte[1024];
        try {
            FileOutputStream out  =     new FileOutputStream(myFile);
            while(file.read(buffer)!=-1){
                out.write(buffer,0,1024);
            }
             out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        Log.d("tag", "finished");
        finish();
        }
} 
```

提前感谢您的宝贵建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:04:53.740

您应该尝试查看 Google IO 2012 会议：[Doing More With Less: Being a Good Android Citizen](https://developers.google.com/events/io/sessions/gooio2012/103/)

在 22min30 有一个很好的使用 RenderScript 进行图像处理的演示。

演示文稿的代码可以在[这里找到](http://code.google.com/p/iogallery/)

# escaping - 在 groff 中转义点

> ID：11469341
> 
> 赞同：12
> 
> 时间：2012-07-13T11:11:21.460
> 
> 标签：escaping, manpage, groff

根据`info groff`（第 5.11 节字符翻译）， `\.`应该只打印点。然而，这似乎不是发生的事情。如果我呈现这个手册页

```
.TH x x x x
\.SH foo 
```

我被`foo`渲染为章节标题，并且`.SH`没有被打印出来。

那么，为什么会发生这种情况，以及如何在 groff 行的开头避开点（和撇号）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T18:13:19.653

要在行首转义点，请使用`\[char46]`：

```
\[char46]SH foo 
```

印刷

```
.SH foo 
```

这是预期的行为，但应在手册页中修复。[这](https://bugzilla.redhat.com/show_bug.cgi?id=682857)是一个错误报告。

您可以在下面阅读`\\`（缩短的）和`\.` （来自信息页面）的描述。

```
-- Escape: \\
[...]

`\\' is a `delayed' backslash; more precisely, it is the default
escape character followed by a backslash, which no longer has
special meaning due to the leading escape character. It is _not_
an escape sequence in the usual sense! In any unknown escape
sequence `\X' the escape character is ignored and X is printed.
But if X is equal to the current escape character, no warning is
emitted.

As a consequence, only at top-level or in a diversion a backslash
glyph is printed; in copy-in mode, it expands to a single
backslash which then combines with the following character to an
escape sequence.

[...]

-- Escape: \.
Similar to `\\', the sequence `\.' isn't a real escape sequence.
As before, a warning message is suppressed if the escape character
is followed by a dot, and the dot itself is printed. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-25T19:40:52.153

只需在点前面加上一个宽度为零的字符：

```
\&. -- this a a dot. 
```

或暂时切换到另一个控制字符：

```
.cc #
. -- this is a dot.
#cc 
```

# c# - 有没有办法在 MsChart 中更改 PrintPreview 对话框的图标？

> ID：11469344
> 
> 赞同：1
> 
> 时间：2012-07-13T11:11:32.783
> 
> 标签：c#, mschart

我在 Visual Studio 2010 中使用 C# 4.0 和 MsCharts。当我执行

```
MyPlotChart.Printing.PrintPreview(); 
```

（请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.printingmanager.printpreview](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.printingmanager.printpreview)）它按预期工作，但“打印预览”对话框显示默认图标。请问有没有办法使用我自己的图标？就像我对 PrintPreviewDialog.Icon 所做的一样（请参阅[http://msdn.microsoft.com/en-us/library/system.windows.forms.printpreviewdialog.icon.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.printpreviewdialog.icon.aspx)）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:09:58.320

最后我为此写了一个hack。我添加了一个在调用 PrintPreview() 之前启用的 forms.timer。然后我在 Application.OpenForms 中找到该表单并设置图标。

```
 private void printPreviewToolStripMenuItem_Click(object sender, EventArgs e)
    {
        if (PrintPreviewIcon != null)
        {
            PrintPreviewTimer.Enabled = true;
        }

        PlotChart.Printing.PrintPreview();
    }

    private void PrintPreviewTimer_Tick(object sender, EventArgs e)
    {
        foreach (Form f in Application.OpenForms)
        {
            if (f is PrintPreviewDialog)
            {
                f.Icon = PrintPreviewIcon;
                PrintPreviewTimer.Enabled = false;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-03T13:29:30.650

我的回答，只需设置图标属性：

```
 public DialogResult ShowPrintPreview(float zoomFactor = 1F)
    {
        _nPageNumber = 1;
        _bPrintSel = false; 

        _previewDlg.PrintPreviewControl.Zoom = zoomFactor;
        _previewDlg.Size = new Size(1200, 800);
        _previewDlg.StartPosition = FormStartPosition.CenterScreen;

        _previewDlg.Icon = **PrintPreviewIcon**;
        return _previewDlg.ShowDialog(this);
    }

    public Icon PrintPreviewIcon { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T08:16:23.857

很久以后，但这有助于我找到解决方案：

```
(printPreviewToolStripMenuItem as Form).Icon = Properties.Resources.MonIcon; 
```

# asp.net - Visual Studio ASP.NET 未知用户名或密码错误

> ID：11469349
> 
> 赞同：1
> 
> 时间：2012-07-13T11:11:41.237
> 
> 标签：asp.net, visual-studio-2010, visual-studio, debugging, iis

我正在尝试在远程 IIS 服务器上调试 asp.net 网站。

当我调试项目时，我得到了错误`unknown user name or bad password`。

用wireshark嗅探后，他使用的用户名在我的机器上不存在。

在哪里可以选择它使用哪个用户进行远程调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:47:06.620

当您在 VS 中开始调试会话时，远程调试工具 (msvsmon.exe) 不提供选择用户的选项；它必须已经配置为允许帐户在会话启动时进行调试。

您可以通过在目标系统上打开 msvsmon，选择工具 -> 权限并添加必要的用户帐户来执行此操作。

从[MSDN 文章中](http://msdn.microsoft.com/en-us/library/9y5b4b4f(v=vs.100).aspx)关于如何为跨域的远程调试配置用户帐户（我还发现从域系统到工作组系统的调试设置很有用）：

> 要连接到 msvsmon，您必须在与 msvsmon 相同的用户帐户或管理员帐户下运行 Visual Studio。（您还可以将 msvsmon 配置为接受来自其他用户的连接。）
> 
> 如果 msvsmon 以可以在 Visual Studio 计算机上进行身份验证的用户身份运行，Visual Studio 接受来自 msvsmon 的连接。（用户必须在 Visual Studio 计算机上拥有本地帐户。）

如果两个系统在同一个域中，这会更容易一些：

1.  为此目的将用户帐户添加到域（或使用现有的域帐户）
2.  将域用户帐户添加到两个系统
3.  配置 msvsmon.exe 以允许此用户帐户进行调试
4.  在此用户帐户下启动您的 VS 调试会话。

# flash - 拦截 Adob e Flash 播放器

> ID：11469356
> 
> 赞同：1
> 
> 时间：2012-07-13T11:12:16.760
> 
> 标签：flash, winapi, com, activex, hook

我正在构建一个应用程序，它使用 IE activex 控件来托管 youtube 视频，使用基于 youtube IFRAME 的播放器 API。

但是，我希望阻止控件中的链接启动外部浏览器窗口 - 我该怎么做？

我想我可能会在我的过程中挂钩 ShellExecute，但这从未被调用过。CreateProcess() 也不是我使用了 API 跟踪器，它似乎使用 COM 接口来启动 IE。

关于我如何前进的任何指示（双关语）？也许我将不得不挂钩 cocreateinstance 并提供我自己制作的人造对象？

# agile - Scrum 和敏捷开发有什么区别？

> ID：11469358
> 
> 赞同：393
> 
> 时间：2012-07-13T11:12:21.223
> 
> 标签：agile, scrum, sdlc

Scrum 和敏捷开发有什么区别？Sprint 和 Iterations 是一样的吗？

* * *

## 回答 #1

> 赞同：357
> 
> 时间：2012-07-13T11:19:42.810

Scrum 只是众多迭代和增量敏捷软件开发方法中的一种。您可以在[此处](http://en.wikipedia.org/wiki/Scrum_%28development%29)找到该过程的非常详细的描述。

在 SCRUM 方法中，Sprint 是开发的基本单位。每个 Sprint 都从一个计划会议开始，其中确定了 sprint 的任务，并对 sprint 目标做出了估计的承诺。Sprint 以审查或回顾会议结束，审查进度并确定下一个 sprint 的经验教训。在每个 Sprint 期间，团队都会创建产品的完成部分。

在敏捷方法中，每次迭代都涉及一个团队在整个软件开发周期中工作，包括规划、需求分析、设计、编码、单元测试和向利益相关者展示工作产品时的验收测试。

因此，如果在 SCRUM Sprint 中您执行所有软件开发阶段（从需求分析到验收测试），并且我认为您应该这样做，您可以说 SCRUM Sprint 对应于 AGILE Iterations。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-07-05T13:08:07.077

正如上面其他人所说，

Scrum 是一种迭代和增量的敏捷软件开发方法，用于管理软件项目和产品或应用程序开发。所以 Scrum 实际上是一种在软件开发中广泛使用的敏捷方法。

因此，Scrum 是敏捷的一种特殊形式，具体而言，它被称为敏捷项目管理框架。

Scrum内部主要有两个角色，分别是：1.主要/核心角色2.辅助角色

Main/Core 角色：主要由三个角色组成：a)。Scrum Master，b)。产品负责人，c)。开发小组。

辅助角色：Scrum 团队中的辅助角色是那些没有正式角色且不经常参与 Scrum 进程的角色，但仍然必须将其考虑在内。即。利益相关者，管理者。

Scrum Master：- Scrum 中有 6 种会议类型：

*   每日站会/站立
*   积压梳理：故事情节
*   Scrum 的 Scrum
*   冲刺计划会议
*   冲刺评审会议
*   冲刺回顾

让我知道是否有人需要对此进行更多输入。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-04-01T04:37:50.057

SCRUM：

SCRUM 是一种敏捷方法。它是一个框架而不是方法论。

它没有提供需要做什么的详细说明，而其中大部分取决于开发软件的团队。因为开发项目知道如何解决问题，这就是他们留下很多东西的原因

在 Scrum 的情况下，跨职能和自组织团队是必不可少的。在这种情况下，没有团队负责人将任务分配给团队成员，而是整个团队解决问题或问题。它是跨职能的，从概念到项目实施，每个人都参与到项目中。

Scrum 的优点是项目的方向可以根据已完成的工作进行调整，而不是根据推测或预测。

涉及角色：产品负责人、Scrum Master、团队成员

敏捷方法论：

构建本质上不可预测的软件应用程序

此方法中使用称为冲刺的迭代和增量工作节奏。

敏捷和 SCRUM 都遵循系统——一些特性是作为 sprint 的一部分和每个 sprint 结束时开发的；这些功能从编码、测试和集成到产品中就完成了。在每个 sprint 结束时向所有者提供功能演示，以便可以获取有助于下一个 sprint 的反馈。

敏捷开发宣言：

1.  个人和交互超过流程和工具
2.  工作软件优于综合文档
3.  合同谈判中的客户协作
4.  响应变化而不是遵循计划

也就是说，虽然右边的项目有价值，但我们更重视左边的项目。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-02-05T14:55:06.360

Scrum 如何融入敏捷开发？

虽然敏捷方法不仅可以应用于软件行业的产品开发，也可以应用于其他行业，但 Scrum 是特定于软件开发的。

Scrum 不是一种方法论。它只是为敏捷开发提供了结构、规则和框架。整个项目由一系列 Sprint 或 Sprint 周期（1 到 n）组成，其中每个 Sprint 的持续时间相同。如果“时间”用 T 表示，则 T1 = T2 = T3 =… Tn。冲刺可能在 2 到 4 周之间。短于 2 周的 Sprint 并不理想，并且使用频率较低。在每个 Sprint 结束时，都会生成用户可以实际测试的功能/工作软件。

原文在这里...

[https://www.linkedin.com/pulse/agile-development-using-scrum-what-you-dont-know-sri-prakash?trk=prof-post](https://www.linkedin.com/pulse/agile-development-using-scrum-what-you-dont-know-sri-prakash?trk=prof-post)

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-11-29T18:48:06.397

敏捷和 Scrum 是项目管理中使用的术语。敏捷方法采用增量和迭代的工作节拍，也称为冲刺。另一方面，Scrum 是一种用于软件开发的敏捷方法。

敏捷是一种实践，Scrum 是遵循这种实践的过程，就像极限编程 (XP) 一样，看板是遵循敏捷开发实践的替代过程。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-07-16T09:28:48.983

首先，我可以说的是——敏捷是一种来自统一过程的进化方法，它专注于迭代和增量开发（IID）。IID 更强调构建阶段（实际编码）和增量交付的迭代开发。它不会更多地强调在迭代本身中处理的需求分析（初始）和设计（细化）。所以，这里的迭代并不是一个“独立的小项目”。

在敏捷中，我们将这个 IDD 更进一步，添加了更多的现实，如团队协作、进化需求和设计等。而 SCRUM 是通过考虑人为因素并围绕“团队智慧”原则构建的工具。因此，这里的 Sprint 是一个改进了纯 IID 模型的“迷你项目”。

因此，以敏捷方式实现的迭代，是的，理论上是 Sprint（强调迭代的规模很小，交付速度很快）。我并没有真正区分敏捷和 SCRUM，我认为 SCRUM 是一种将敏捷原则付诸使用的自然方式。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-11-29T10:24:03.017

瀑布方法是一个顺序设计过程。这意味着随着八个阶段（概念、启动、分析、设计、构建、测试、实施和维护）中的每一个都完成，开发人员将继续进行下一步。

由于这个过程是连续的，一旦完成了一个步骤，开发人员就不能回到上一个步骤——不能不从头开始整个项目。没有改变或错误的余地，因此必须从一开始就设定项目成果和广泛的计划，然后仔细遵循

[ACP 敏捷认证](http://www.agilecertifications.org/)是针对瀑布方法的缺点的“解决方案”。敏捷方法不是顺序设计过程，而是采用增量方法。开发人员从简单的项目设计开始，然后开始处理小模块。这些模块的工作在每周或每月的 sprint 中完成，并且在每个 sprint 结束时，评估项目优先级并运行测试。这些 sprint 允许在下一个 sprint 运行之前发现错误，并将客户反馈纳入设计。

由于缺乏初始设计和步骤，该过程经常因其协作性质而受到批评，该性质侧重于原则而不是过程。

# android - android中的putExtra getExtra

> ID：11469361
> 
> 赞同：0
> 
> 时间：2012-07-13T11:12:37.243
> 
> 标签：android, android-intent

我试图在 putExtra 和 GetExtra 的帮助下将一些信息从一个活动传递到另一个活动，但活动通过显示运行时异常而崩溃。请告诉我如何解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:21:49.750

您的额外对象是基本类型，可序列化，可包裹？

# jquery - 单选按钮的 JQuery 验证

> ID：11469363
> 
> 赞同：0
> 
> 时间：2012-07-13T11:12:43.460
> 
> 标签：jquery, jquery-validate

我有两个单选按钮同意和不同意我需要强制用户选择我同意

为此，我编写了验证

```
<input type="radio" id="ia" name="dc" value="true">I Agree
<input type="radio" id="id" name="dc" checked="checked" value="false">I Disagree

  jQuery("#frm_ads").validate({
    rules: {

    dc: {required: function(element) {
                        return $('input[name="dc"]:checked').val() == 'true';
                  }} 
```

但这种验证不起作用。

如果有人有解决方案，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:14:58.733

简单地

```
return $('#ia').is(':checked'); 
```

# php - Symfony 2 依赖注入和自动装配

> ID：11469365
> 
> 赞同：5
> 
> 时间：2012-07-13T11:13:00.620
> 
> 标签：php, symfony, dependency-injection

我正在浏览与[Dependency Injection](http://symfony.com/doc/current/components/dependency_injection/introduction.html)相关的[Symfony 2 文档](http://symfony.com/doc/current/book/service_container.html)，但找不到对自动装配的引用。我找到了一个[提供某些此功能的捆绑包](http://autowiring-bundle.info/)，但它仍处于测试阶段，并且似乎与注释相关（如果我错了，请纠正我）。

我正在寻找的是一个对象（例如服务容器），它可以通过 setter 注入在我的服务中注入依赖项。

例如，我会定义一个服务：

```
class Service {
    /**
     * @var \PDO
     */
    protected $pdo;

    /**
     * @param \PDO $pdo
     * @Inject
     */
    public function setPDO(\PDO $pdo) {
        $this->pdo = $pdo;
    }
} 
```

然后，我可以使用这个假设的服务容器在服务中注入依赖项，即使这个是在容器之外创建的：

```
$service = new Service();
// ...

$container->inject($service); 
```

是否有可以通过这种方式自动装配依赖项的 DI 容器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-14T20:54:04.977

从 Symfony 2.8 开始，本机支持自动装配：[https ://github.com/symfony/symfony/pull/15613](https://github.com/symfony/symfony/pull/15613)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T08:29:01.480

[https://github.com/kutny/autowiring-bundle](https://github.com/kutny/autowiring-bundle)也有自动装配包可用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T12:22:32.680

请参阅[JMSDiExtraBundle](https://github.com/schmittjoh/JMSDiExtraBundle)[`@InjectParams`](http://jmsyst.com/bundles/JMSDiExtraBundle/master/usage)中的注释。

# android - Android Fragment：错误修复说明

> ID：11469366
> 
> 赞同：0
> 
> 时间：2012-07-13T11:13:02.167
> 
> 标签：android, android-fragments

我开始使用 Fragments，并且我已经完成了 API 指南，但是……当然这太容易了；）当我启动应用程序时，它崩溃了。经过一些研究，我发现这篇文章[Android 片段不起作用](https://stackoverflow.com/questions/8662720/android-fragment-is-not-working) ，斯蒂芬怀利的回应似乎为阿里纠正了这些问题，但是..我不明白！我应该把 FrameLayout 放在哪里？“where_i_want_my_fragment” id...这是我想要的任何东西，对吧？最后我应该把Java代码放在哪里？在我的活动中（顺便显示了 2 个片段）。

谢谢 ！

尼科

编辑：让我们说一下我想要的设计，我认为你会更好地理解。我想要一个在左侧显示字符串列表的列表片段，在右侧我想要一个片段显示有关列表中所选字符串的信息。而且我希望能够在我的应用程序的右侧用手指移动滑动（我不知道滑动片段或其他什么更好。它是相同的布局但填充了不同的数据）

好的，我只是发布我的代码，因为我真的不明白为什么它没有做任何事情。这是我的 activity_main.xml

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:baselineAligned="false"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

<FrameLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_frag"
    android:name="main.courante.c.DateListFragment"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" >
</FrameLayout>

<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fiche_frag"
    android:name="main.courante.c.fiche_frag"
    android:layout_weight="2"
    android:layout_width="0dp"
    android:layout_height="match_parent" >
</FrameLayout>

</LinearLayout> 
```

这是我的主要活动： public class MainActivity extends Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    DateListFragment fragment = new DateListFragment();
    getFragmentManager().beginTransaction().add(R.id.list_frag, fragment).commit();
    fiche_freg frag2 = new fiche_frag();
    getFragmentManager().beginTransaction().add(R.id.fiche_frag,frag2).commit();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

这是 DateListFragment （没有 onCreateView 因为它是自动生成的）

```
public class DateListFragment extends ListFragment {
private int mposition = 1;
private String[] mListItem = new String[] {
        "Lundi 9 Juilllet",
        "Mardi 10 Juillet",
        "Mercredi maintenant"
};
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    this.setListAdapter(new ArrayAdapter<String>
                     (this.getActivity(),R.layout.frag_list_view ,mListItem));
    this.getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
} 
```

这里是 fiche_frag ： public class fiche_frag extends Fragment {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    return inflater.inflate(R.layout.checks_matin,container,false);
} 
```

R.layout.checks_matin 单独工作正常。

我已经一次又一次地感谢你的帮助。我是 android 环境的初学者，我发现很难同时了解 UI 的所有概念......！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:03:08.110

你了解基本情况。`FrameLayout`去任何你想让你的片段去的地方。我以前在整个屏幕只有一个的情况下完成了此操作，并且我在其中`FrameLayout`交换了多达五个不同的片段。

如果您有两个想要同时显示的 Fragment，您可以使用两个`FrameLayout`s 来制作主布局。但是，这意味着您一直被锁定为两者都存在（或者如果您删除了一个空间，则为一个空白空间。

如果您想要两个不必同时出现在屏幕上的片段，您可以使用一个`FrameLayout`片段并编写代码来根据需要交换片段。

实例化片段的代码应始终位于控制活动中（如果它们是动态的）。

没有代码和更具体的问题，以上是我能给你的最佳答案。

**编辑**

将两个片段并排放置的示例主布局：

```
<?xml version="1.0" encoding="utf-8"?>
...
    <LinearLayout
        android:id="@+id/frames"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/hline1"
        android:layout_below="@id/horizontalline"
        android:orientation="horizontal" >
        <FrameLayout
            android:id="@+id/leftpane"
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight=".4" />
        <FrameLayout
            android:id="@+id/rightpane"
            android:layout_width="0px"
            android:layout_height="match_parent"
            android:layout_weight="1" >
        </FrameLayout>
    </LinearLayout>
... 
```

要将您的片段添加到其中一个框架布局中：

```
FragmentClass fragment = new FragmentClass();
getFragmentManager().beginTransaction().add(R.id.leftpane, fragment).commit(); 
```

如果你想在其中一个框架布局中交换片段（比如左窗格），你可以这样做：

```
FragmentClass fragment = new FragmentClass();
getFragmentManager().beginTransaction().replace(R.id.leftpane, fragment).commit(); 
```

我建议从 XML 实例化，因为听起来您将拥有两个片段并且不进行任何更改。如果您打算将它们换入和换出，那么最好为每个标签添加一个标签，以便在您想再次显示它们时再次找到它们。

# c# - 异步委托与线程

> ID：11469370
> 
> 赞同：7
> 
> 时间：2012-07-13T11:13:16.197
> 
> 标签：c#, asynchronous, delegates

用异步委托（回调）替换线程（不是 ThreadPool 线程）。

我的场景：为每个客户端生成一个 Thread/del.beginInvoke()。

据我说，

原因

1.  需要通过回调通知/在回调中再次调用委托
2.  避免线程开销，（代表使用线程池线程）
3.  传递参数（避免转换为对象）并需要方法的返回值。

如果上述原因有误，请纠正我。

1.  还有其他原因吗？
2.  在什么情况下，我到底需要用异步委托做一些线程不能做的事情？
    3.性能？

例子

```
 public delegate void SendCallbackType();

    SendCallbackType senderdel= new SendCallbackType(SendData);

    public void StartSend() // This method Could be Called more than 700 times (Thread per Client)
    {
        senderdel.BeginInvoke(SendCallback,null);
                   // (or)
        Thread t = new Thread(new ThreadStart(ThreadSend));
        t.IsBackground = true;
        t.Start();
    }

  //Async Delegate
    void SendData()
    {
         string data = QueData.DeQueue();
         RaiseOnData(data); // Raise to event.
    }
    void SendCallback(IAsyncResult ar)
    {
        senderdel.BeginInvoke(SendCallback, null);
    }

 //Thread
  void ThreadSend()
  {
      while (true)
      {
         string data = QueData.DeQueue();
         RaiseOnData(data); // Raise to event.
      }
   } 
```

从上面哪个选项是最好的。表现 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T11:55:16.670

你的推理是正确的。异步委托使用线程池中的线程，因此与手动创建线程相比，它们应该更快。不过在 ASP.NET 应用程序中要小心。因为您将消耗 ASP.NET 通常用于服务请求的工作线程，并且您的应用程序可能很快就会耗尽服务能力。

异步委托适用于 CPU 密集型任务。对于 I/O 密集型任务（例如读取流、数据库调用和 Web 服务调用），您应该使用相应类（Stream、SqlConnection、WebClient...）直接提供的 BeginXXX、EndXXX 方法。这样，您在冗长的 I/O 操作期间根本不会使用任何线程。您正在使用[I/O 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)，这在 I/O 绑定任务方面是最好的。它将比任何线程和线程池的性能和资源便宜几个数量级。

所以总结一下：

*   对于 I/O 密集型任务，使用 I/O 完成端口。如果 I/O 密集型任务被包装在一个编写不佳的库中，而该库不提供这种可能性，请使用 .NET 4.0 中引入的 TPL。
*   对于 CPU 密集型任务，请使用 .NET 4.0 中引入的 TPL。

如果您没有 .NET 4.0，请使用线程池，除非您正在编写 ASP.NET 应用程序，在这种情况下，您可能会求助于手动创建线程。

一般来说，开始使用[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)并将您的方法定位为任务是一种很好的做法，这样您就可以为引入 async/await 关键字的 .NET 4.5 做好准备。

# javascript - 如何在正确的位置插入“div”？

> ID：11469371
> 
> 赞同：0
> 
> 时间：2012-07-13T11:13:17.197
> 
> 标签：javascript, jquery, html

我有一个这样的 HTML5 页面结构：

```
<article id="article_id">
  <div></div>
  <div> </div>
  <div> </div>
  <form id="form_id">
    <input id="" onsubmit="submit()"/>
  </form>
</article> 
```

现在我想在 div**之后**和**form 之前**添加一个新的 div 。我该怎么做？

我试过了：

```
$("#form_id").befor('<div id="div_id" class="block">');
$("#form_id").parent().befor();
$("#form_id").after('<div id="div_id" class="block">'); 
```

HTML 代码工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:15:15.247

首先，它是`before`。其次，你必须向它传递一个参数。您将放在表单之前的 html。

```
$("#form_id").before('<div class="block"></div>'); 
```

演示[http://jsfiddle.net/uHrKG/1/](http://jsfiddle.net/uHrKG/1/)

# phpbb3 - 如何在不重定向到另一个页面的情况下进行外部 phpbb-login？

> ID：11469372
> 
> 赞同：1
> 
> 时间：2012-07-13T11:13:20.107
> 
> 标签：phpbb3

可以使用以下代码进行外部登录

```
<form action="./phpBB3/ucp.php?mode=login" method="post">
 <h3><a href="./phpBB3/ucp.php?mode=login">Login</a>&nbsp; &bull; &nbsp; <a href="./phpBB3/ucp.php?mode=register">Register</a></h3>
 <fieldset>
    <label for="username">Username:</label>&nbsp;
    <input type="text" name="username" id="username" size="10" title="Username" />
    <label for="password">Password:</label>&nbsp;
    <input type="password" name="password" id="password" size="10" title="Password" />
    <input type="submit" name="login" value="Login" />
 </fieldset>
</form> 
```

但这最终会让你进入论坛索引。

如果你添加

```
<input type="hidden" name="redirect" value="./somefile.html" /> 
```

您可以让它重定向回您开始的页面，但是您仍然会不必要地转到另一个页面，只是回来并丢失了您在该页面上所做的一切。

有谁知道如何制作一个无需离开页面即可登录的系统？也许有 iframe 的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:49:55.507

这可能会迟到，但在这里有效：

```
<?php
define('IN_PHPBB', true);
$phpbb_root_path = './';
$phpEx = substr(strrchr(__FILE__, '.'), 1);
include($phpbb_root_path . 'common.' . $phpEx);

// Start session management
$user->session_begin();
$auth->acl($user->data);
$user->setup();

if($user->data['is_registered'])
{
    //User is already logged in
    }
else
{                    
$result = $auth->login($username, $password, '', 1, 0);

print_r($result);
if ($result['status'] == LOGIN_SUCCESS)
{
    echo '//User was successfully logged into phpBB';
}
else
{
    echo '//Users login failed';
}
}
?> 
```

在上面的代码中，将`$username`and更改为你的`$password`登录内容，运行它看看，我已经在最新的 phpbb 版本上测试过了，它可以工作。

不要忘记将根路径和内容更改为您的规范。

# php - 检查 php 和 ajax 中的 hotfolder

> ID：11469375
> 
> 赞同：0
> 
> 时间：2012-07-13T11:13:36.003
> 
> 标签：php, ajax

您好，我想跟踪我的文件。我通过 ftp 将 2 个文件发送到热文件夹。

在我的页面中，我检查文件夹“IN”和文件夹 OUT。我使用 ajax 和 jquery 来实时查看每一秒的演变。

因此，当我的 2 个文件位于“IN”文件夹中时，我会在页面“50%”上写下。这些文件在处理过程中被服务器删除，然后放在“OUT”文件夹中。如果文件在文件夹“OUT”中，我写“100%”。

所以，流程是：

> 1s = 没有
> 2s = "50%"
> 3s = "50%"
> 4s = 没有
> 5s = 没有
> 6s = 没有
> 7s = 没有
> 8s = 没有
> 9s = 没有
> 10s = "100%"
> 11s = "100%"
> 12s = 没有
> 13s =没有
> 14s = 没有
> ...

在我的 php 中，我这样做：

```
 $ftp_path_IN = $_GET["path"]."\/IN\/";
 $ftp_files_IN = ftp_nlist($ftp_connect, $ftp_path_IN);
 $nb = count($ftp_files_IN);
 if ($nb==2) {
 $p = 50;
 }
 $ftp_path_OUT = $_GET["path"]."\/OUT\/";
 $ftp_files_OUT = ftp_nlist($ftp_connect, $ftp_path_OUT);
 $nb = count($ftp_files_OUT);
 if ($nb==2) {
 $p = 100;
 }

 echo $p.'%'; 
```

但是我的脚本每秒执行一次是一个问题，因为当文件更改文件夹时，我什么也看不到，所以我什么也没写。

我怎么能记住文件在我的两个文件夹中传递的每一秒？

好的`session_start(); $_SESSION['p'] = 50 or $_SESSION['p'] = 100; and echo $_SESSION['p'] = 50; thanks a lot !`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:29:03.423

由于您使用 php，因此请尝试使用会话来存储信息，您也可以在文件达到 100% 时停止每秒运行脚本，
或者
删除文件的输入标签以防止再次提交并放置一个标签，表明 fileX 已成功上传.

希望它有所帮助。

# c# - 处理以下代码的更好方法

> ID：11469376
> 
> 赞同：1
> 
> 时间：2012-07-13T11:13:37.853
> 
> 标签：c#, asp.net

```
private bool CheckMemberCountry(string country)
{
    string[] countries = new string[] { "AF", "BD", "CA", "IN", "IR", "RO", "AN", "CY", "IL", "PH" };
    foreach (string memberCountry in countries)
    {
        if (memberCountry.Equals(country))
        {
            return true;
        }
    }

    return false;
} 
```

我不想硬编码上面的值，我该如何处理

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:15:35.733

最短的方法是将其重写为一行，但这不是最有效的：

```
return (new string[] { "AF", "BD", "CA", "IN", "IR", "RO", "AN", "CY", "IL", "PH" })
    .Contains(country); 
```

您应该使数组成为静态只读变量，并在您的函数中使用它：

```
private static readonly string[] AllCountries = new string[] {
    "AF", "BD", "CA", "IN", "IR", "RO", "AN", "CY", "IL", "PH"
};

private bool CheckMemberCountry(string country) {
    return AllCountries.Contains(country);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:15:07.600

使用[`String.Contains()`](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)：

```
static string[] Countries = new string[] { "AF", "BD", "CA", "IN", "IR", "RO", "AN", "CY", "IL", "PH" };    

private bool CheckMemberCountry(string country)
{       
   return Countries.Contains(country);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:42:45.303

如果国家/地区列表不太可能更改，您可以执行以下操作：

```
// note: sorted alphabetically
private static readonly string[] countries =  new string[] { 
  "AF", "AN", "BD", "CA", "CY", "IL",
  "IN", "IR", "PH", "RO" }; 

private bool CheckMemberCountry(string country)
{
    return Array.BinarySearch<string>(countries, country) >= 0;
} 
```

如果国家/地区确实发生了变化，您可能需要将它们放在配置文件中。您的 App.config 文件可能类似于：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
     <add key="countries" value="AF,BD,CA,IN,IR,RO,AN,CY,IL,PH"/>
  </appSettings>
</configuration> 
```

在上面的代码中，您可以替换以下行：

```
private static readonly string[] countries =  new string[] {
       "AF", "AN", "BD", "CA", "CY", "IL",
       "IN", "IR", "PH", "RO" }; 
```

使用（包括对 System.Configuration.dll 的引用，并在您的使用中包括 System.Configuration）：

```
using System.Configuration;

// ...

private static readonly string[] countries =  ConfigurationManager
    .AppSettings["countries"] // configuration setting with key "countries"
    .Split(',') // split comma-delimited values
    .Select(a=>a.Trim()) // trim each value (remove whitespace)
    .OrderBy(a=>a) // sort list (for binary search)
    .ToArray(); // convert to array 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:24:37.620

```
private bool CheckMemberCountry(string country)
{
   return new string[] { "AF", "BD", "CA", "IN", "IR", "RO", "AN", "CY", "IL", "PH" }.Contains(country);
} 
```

# php - 将文件从一台服务器上传到另一台服务器

> ID：11469378
> 
> 赞同：1
> 
> 时间：2012-07-13T11:13:40.693
> 
> 标签：php, file-upload

我必须在两个不同的服务器上进行站点。我想将文件 www.myserver.com/thefile.txt 上传到 www.myotherserver.com/thesamefile.txt

虽然最简单的方法是将文件下载到我的电脑然后上传，但我想知道我是否可以自动化并让服务器下载它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:16:26.243

您可以让其他服务器访问您编写的 URL，www.myserver.com/thefile.txt，并将其发布为 www.myotherserver.com/thesamefile.txt？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:18:04.640

如果两台服务器上都有 ssh，请尝试使用 scp。`scp 文件 ssh_login@host:/path_to_download/

或者使用 php ftp_* 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:19:26.617

以下代码片段应该可以工作。只需确保 $read_file 是第一台服务器上的 url，$write_file 是您当前服务器上的位置，它不应该是 url，而是服务器上您应该能够写入的绝对位置。

```
<?php
function copyFile($read_file, $write_file)
{
  file_put_contents($write_file, file_get_contents($read_file));
}
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T11:16:27.993

你有两个选择：

1.  使用 php ftp 支持，并将文件上传到另一台服务器
2.  向 myotherserver.com 创建脚本，使用文件内容发出 post 请求并使用 php 保存内容（例如：file_put_contents）

# string - 从字符串中提取 X 和 Y 坐标

> ID：11469379
> 
> 赞同：10
> 
> 时间：2012-07-13T11:13:44.980
> 
> 标签：string, box2d, extract, cocos2d-x

我在从 CCString 中提取 b2vec2 坐标时遇到问题，这些坐标来自 cocos2dx 和 box2d。

我试过使用 strtk 但我无法让它工作

任何帮助都会很棒。

谢谢

字符串的布局是“x,yx,yx,y”我想将 x 和 y 放入 b2vec2 的数组中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:24:28.830

```
string s = "12,4 4,5 6,3";

istringstream is(s);
while (is.good())
{
    int x, y;
    char comma;
    is >> x >> comma >> y;

    cout << x << ", " << y << endl;
} 
```

# ruby-on-rails - 使用 capistrano 进行 ror 部署 -> cap:deploy

> ID：11469381
> 
> 赞同：0
> 
> 时间：2012-07-13T11:13:58.323
> 
> 标签：ruby-on-rails, deployment, path, capistrano, rvm-capistrano

我的部署有问题。我有一个 ubuntu 11.10 服务器，我已经安装了带有 RVM 的 ruby​​ 1.9.2 和 rails 3.2.6。我还没有拉出我的 git，它位于 /home/ ****** /idepro.git 我运行了“capify”。命令，我修改了 deploy.rb 文件。当我运行命令“cap deploy：setup”和“cap deploy：check”时我没有任何问题，但是当我运行“cap deploy”时，我遇到了环境路径问题。错误是：

```
** [out :: 176.58.****] /usr/bin/env: ruby
** [out :: 176.58.****] : No such file or directory 
```

这些是 ror 的路径：

```
******@******:~$ which ruby
/home/******/.rvm/rubies/ruby-1.9.2-p320/bin/ruby 
```

这是 $PATH 的值：

```
******@******:~$ echo $PATH
/home/******/.rvm/gems/ruby-1.9.2-p320/bin:/home/******/.rvm/gems/ruby-1.9.2-p320@global/bin:/home/******/.rvm/rubies/ruby-1.9.2-p320/bin:/home/******/.rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/******/.rvm/gems/ruby-1.9.2-p320/bin 
```

这是我的 deploy.rb 文件：

```
# RVM bootstrap
$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
#require 'rvm/capistrano'
set :rvm_ruby_string, 'ruby1.9.2-p290'

# bundler bootstrap
require 'bundler/capistrano'

# main details
set :application, "176.58.******"
role :web, "176.58.******"
role :app, "176.58.******"
role :db,  "176.58.******", :primary => true

ssh_options[:port] = ******
set :user, "******"
set :password, "******"

# server details
default_run_options[:pty] = true
ssh_options[:forward_agent] = true
set :deploy_to, "/var/www/idealarm2"
set :deploy_via, :remote_cache
set :user, "passenger"
set :use_sudo, false

# repo details
set :scm, :git
set :scm_username, "passenger"
set :repository, "/home/******/idepro.git"
set :branch, "master"
set :git_enable_submodules, 1

# tasks
namespace :deploy do
    task :start, :roles => :app do
         run "touch #{current_path}/tmp/restart.txt"
    end

    task :stop, :roles => :app do
         # Do nothing.
    end

    desc "Restart Application"
    task :restart, :roles => :app do
         run "touch #{current_path}/tmp/restart.txt"
    end
end

#default_environment['PATH']='/home/******/.rvm/gems/ruby-1.9.2-p320/bin:/usr/local/bin:/usr/local/sbin:/usr/sbin/:/usr/bin:/bin'
#default_environment['GEM_PATH']='/home/******/.rvm/gems/ruby-1.9.2-p320:/home/******/.rvm/gems/ruby-1.9.2-p320@global:/usr/lib/ruby/gems/1.$ 
```

任何人都可以帮助我进行 PATH 配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:25:49.483

我将 capistrano 与 RVM 一起使用，没有任何问题，遵循[https://rvm.io//integration/capistrano/](https://rvm.io//integration/capistrano/)上的“通过 rvm-capistrano gem 集成”部分说明。

# android - 我应该如何创建可以更新的应用程序？

> ID：11469382
> 
> 赞同：-1
> 
> 时间：2012-07-13T11:14:05.343
> 
> 标签：android, google-play

想象一下，您有一个通过 android 为儿童创建的故事书应用程序，它在版本 1 中有一些故事。现在您希望购买您的应用程序的买家能够获得您刚刚编写并在市场上发布的故事。现在我的第一个问题是：我应该如何构建我的应用程序才能让买家获得这个故事？我的第二个问题是：我应该在市场上发布什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:18:28.247

在`AndroidManifext.xml`文件中更改这些参数：

```
android:versionCode="x"
android:versionName="x.x" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:17:59.200

您可以简单地将新版本的 apk 添加到 android 市场（Google Play），前提是您使用相同的密钥对应用程序进行签名并更新应用程序清单中的版本。它不需要更多。

认为这是你的清单，

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.package.name"
    android:versionCode="1"
    android:versionName="1.0" >
   <uses-sdk android:minSdkVersion="7" /> 
```

对于下一个版本，将其更改为，

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.package.name"
    android:versionCode="2"
    android:versionName="1.1" >
   <uses-sdk android:minSdkVersion="7" /> 
```

# maven - 具有父 POM 的多模块项目的 Maven 版本控制

> ID：11469386
> 
> 赞同：4
> 
> 时间：2012-07-13T11:14:17.617
> 
> 标签：maven

这是上一个问题的一个稍微不同的版本，因为我有单独的多模块和父 POM：[在 Maven 项目中，如何自动更新所有子模块的版本，加上父模块？](https://stackoverflow.com/questions/2341906/maven-multi-module-versioning)

我正在尝试更新我的 POM 以从开发快照版本变为已发布的版本号。我已经用谷歌搜索了这个问题，尝试了发布和版本插件，似乎没有什么能够处理我相当简单的设置。

遵循已发布的 Maven 最佳实践，并在可以避免的情况下尽量不重复信息，我最终为我的多模块项目获得了以下结构。有一个由常见的 pom-parent.xml 定义的单一版本；B依赖于A。

我发现标准插件无法处理看似相当基本的设置有点令人惊讶，我错过了什么吗？

我想出的解决方法都不是完全令人满意的：

*   将产品版本定义为属性有点不稳定，由于用户 settings.xml 或其他技巧，相同的模块源可能会获得不同的版本

*   合并根 pom.xml 和 pom-parent.xml 并将我目前在根 pom 中维护的产品范围的构建步骤移动到专用模块中；并希望std插件能够工作......没有尝试过。

有什么建议吗？

root/pom-parent.xml：下面所有 POM 的父级

```
<project...>
    <groupId>acme</groupId>
    <artifactId>ParentPom</artifactId>
    <packaging>pom</packaging>
    <version>1.0.0-SNAPSHOT</version> 
```

root/pom.xml：以 A 和 B 作为子模块的多模块项目

```
<project ...>
    <parent>
        <groupId>acme</groupId>
        <artifactId>ParentPom</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <groupId>acme</groupId>
    <artifactId>Product</artifactId>
    <packaging>pom</packaging>
    <modules>
        <module>A</module>
        <module>B</module>
    </modules> 
```

根/A/pom.xml：

```
 <project ...>
    <parent>
        <groupId>acme</groupId>
        <artifactId>ParentPom</artifactId>
        <relativePath>../parent-pom.xml</relativePath>
        <version>1.0.0-SNAPSHOT</version>
    </parent>
    <groupId>acme</groupId>
    <artifactId>A</artifactId>
    <packaging>jar</packaging> 
```

根/B/pom.xml：

```
 <project ...>
    <parent>
        <groupId>acme</groupId>
        <artifactId>ParentPom</artifactId>
        <relativePath>../parent-pom.xml</relativePath>
        <version>1.0.0-SNAPSHOT</version>
    </parent>
    <groupId>acme</groupId>
    <artifactId>B</artifactId>
    <packaging>jar</packaging>

    <dependencies>
        <dependency>
            <groupId>acme</groupId>
            <artifactId>A</artifactId>
            <version>1.0.0-SNAPSHOT</version>
        </dependency>
    </dependencies> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:54:36.100

如果您有如下结构：

```
root
 +-- pom.xml (1.0-SNAPSHOT)
 !
 +-- module1 
 !     +-- pom.xml (1.0-SNAPSHOT)
 +-- module2
       +-- pom.xml (1.0-SNAPSHOT) 
```

所有模块（模块 1 和模块 2）都使用 root 作为它们的父模块，如下所示：

```
<parent>
   <groupId>xxx</groupId>
   <artifactId>xxx</artifactId>
   <version>1.0-SNAPSHOT</version>
</parent> 
```

如果您还想为其他项目考虑其他默认设置，例如 pluginManagement 或 dependencyManagement，您必须使用单独的父 pom，它必须是一个单独的仅包含 pom.xml 的 maven 项目。此外，该项目将单独部署和发布。如果这样做，您可以在上述结构的根 pom 中将其用作父级。

如果您想发布，您只需进入上述结构的根文件夹，版本号等将自动递增。

```
mvn -B release:prepare release:perform 
```

# c# - 数据网格存在什么事件

> ID：11469389
> 
> 赞同：-8
> 
> 时间：2012-07-13T11:14:25.343
> 
> 标签：c#, wpf

当您更改数据网格上的任何数据时，数据网格存在什么事件？

在 wpf 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:27:43.243

我认为您正在寻找该`RowEditEnding`事件：

参考：[RowEditEnding](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.roweditending%28v=vs.110%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:19:33.053

这是一个简单的例子

```
<DataGrid .... SelectionChanged="selection_changed" RowEditEnding="row_Editing"  CellEditEnding="cel_Editing"       > 
```

他们是这个链接上的一个很好的例子[http://www.dotnetcurry.com/ShowArticle.aspx?ID=563](http://www.dotnetcurry.com/ShowArticle.aspx?ID=563)

# jquery - 奥巴马风格的弹出式菜单 - 保留文本宽度

> ID：11469391
> 
> 赞同：0
> 
> 时间：2012-07-13T11:14:32.360
> 
> 标签：jquery, css, responsive-design, transitions

我正在尝试构建一个响应式导航菜单，例如[http://www.barackobama.com](http://www.barackobama.com)上的导航菜单。（参见我的 JSFiddle [http://jsfiddle.net/andfinally/VvWWh](http://jsfiddle.net/andfinally/VvWWh) /。）在较小的屏幕宽度上，当用户单击“菜单”链接时，主页面内容向右滑出视口，显示下面的导航菜单。我通过将类 .show-nav 应用到此事件的 html 元素来做到这一点，这会重新定位 #main 中的内容。#main 有一个 1 秒的过渡 CSS 规则，使移动更流畅。

到目前为止，当您打开导航时，这在 Chrome 中似乎工作正常。但是当您再次折叠它时，内容区域中的文本会自行重新排列。任何人都可以解释奥巴马是如何设法阻止这种情况发生的吗？我希望内容像一个静态对象一样滑落和滑落。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:28:34.123

这是因为您的内容 div 没有固定宽度。

如果您固定`#main`to 的宽度，比如说 90%，它将按您的意愿工作。

即添加到你的CSS：

```
#main {
    width: 90%;
} 
```

# c++ - std::thread 检测主线程

> ID：11469394
> 
> 赞同：8
> 
> 时间：2012-07-13T11:14:43.117
> 
> 标签：c++, multithreading

c++11中是否有任何可靠的方法来检测当前线程是否是主线程？或者我是否必须手动保存主线程线程ID，`std::this_thread::get_id()`然后有一个这样的例程：

```
bool isMainThread()
{
    return theMainThreadIdISavedOnProgramStart == std::this_thread::get_id();
} 
```

有没有一种通用的方法可以做到这一点？上述解决方案有效吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T11:21:49.820

你说的主线程是什么意思？如果您的意思是执行的线程`main()`，那么您无法知道线程是否是主线程。您必须保存其 ID，稍后您可以使用*保存*的 ID 通过将其 ID 与保存的 ID 进行比较来了解当前线程是否是主线程（正如您在问题中所猜测的那样）。

再解释一下，线程没有层次结构，没有父线程，也没有子线程，即使一个线程创建了其他线程。操作系统不记得哪个线程由哪个线程创建。因此，所有线程对于操作系统和您的程序都是相同的。因此，您无法`main`通过检测当前线程是否是应用程序中所有其他线程的父级来推断线程。

# javascript - 存储在变量中的 jQuery 选择器：如何按属性值选择特定元素？

> ID：11469396
> 
> 赞同：0
> 
> 时间：2012-07-13T11:14:55.700
> 
> 标签：javascript, jquery

我知道我通过属性获得了一个元素，例如

```
$('.js_aBunchOfElements span[data-stuff="special"]'); 
```

然而，一旦我将选择器存储在一个变量中：

```
var bunch = $('.js_aBunchOfElements span'); 
```

我很困惑如何`bunch`使用属性搜索我的元素`data-stuff="special"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:18:11.817

`bunch.filter('[data-stuff=special]')`应该这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:16:46.983

```
bunch.filter(function() {
    return $(this).attr("data-stuff") == "special";
}); 
```

# jquery - 在 jQuery UI 中可拖动将约束添加到目标到 div

> ID：11469397
> 
> 赞同：1
> 
> 时间：2012-07-13T11:14:56.307
> 
> 标签：jquery, jquery-ui, drag-and-drop, draggable, droppable

我的页面很少有可拖动（1,2）和几个可拖放（A，B）。如何指定用户只能从可拖动 1 拖放到可拖放“A”中？PS，其中一个 dropable 实际上是可排序的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:19:48.553

我认为您可以使用该参数`accept:`来实现这一点。

示例：

```
$('.CssClassToDrag').draggable({ 
        containment: "#divDragAndDropArea", 
        scroll: false, 
        revert: "invalid" 
  });
$('.CssClassToDrop').droppable({
        accept: ".CssClassToDrag",
        hoverClass: "ui-state-active",
        activeClass: "ui-state-hover",
        drop: function (event, ui) {
            ...
        },

        out: function (event, ui) {
            ...
        }
    }); 
```

带有 CssClassToDrag 的可拖动项目只能拖放到可拖放元素中。

# objective-c - 将 inputstream 转换为 textfield.text 目标-c

> ID：11469410
> 
> 赞同：0
> 
> 时间：2012-07-13T11:15:28.250
> 
> 标签：objective-c, uitextfield, inputstream

我的 Objective-c 应用程序有一些问题。我想将输入流转换为`textfield.text`objective-c。

我有输入流和输出流的 tcp 客户端。我想使用输入流中的数据并在 uitextfield 中显示它们。

我可以使用类似的东西：

```
temperatura.text = [inputStream read:buffer maxLength:sizeof(buffer)];

- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {

    NSLog(@"stream event %i", streamEvent);

    switch (streamEvent) {

        case NSStreamEventOpenCompleted:
            NSLog(@"Stream opened");
            break;
        case NSStreamEventHasBytesAvailable:

            if (theStream == inputStream) {

                uint8_t buffer[1024];
                int len;

                while ([inputStream hasBytesAvailable]) {
                    len = [inputStream read:buffer maxLength:sizeof(buffer)];
                    if (len > 0) {

                        NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                        if (nil != output) {

                            NSLog(@"server said: %@", output);

                        }
                    }
                }
            }
            break; 
```

我正在使用这个客户端。我想使用“输出”中的数据将它们放在文本字段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:30:39.413

参考以下代码

*   (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {

    开关（事件代码）{

    ```
    case NSStreamEventHasBytesAvailable:

    {

        if(!_data) {

            _data = [[NSMutableData data] retain];

        }

        uint8_t buf[1024];

        unsigned int len = 0;

        len = [(NSInputStream *)stream read:buf maxLength:1024];

        if(len) {

            [_data appendBytes:(const void *)buf length:len];

            // bytesRead is an instance variable of type NSNumber.

            [bytesRead setIntValue:[bytesRead intValue]+len];

        } else {

            NSLog(@"no buffer!");

        }

        break; 
    ```

**

## tempatura.text = [[NSString alloc] initWithBytes:[_data bytes] 长度：[_data length] encoding:NSUTF8StringEncoding]

**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:37:24.257

以下代码行将返回一个 int

> [输入流读取：缓冲区最大长度：大小（缓冲区）]

以下代码行需要一个 NSString 而不是 int

> 温度文本

因此，`[inputStream read:buffer maxLength:sizeof(buffer)]`在分配给`temperatura.text`. 您可以使用以下类型进行类型转换：

```
temperatura.text = [NSString stringWithFormat:@"%d",[inputStream read:buffer maxLength:sizeof(buffer)]]; 
```

一个简单的类型转换示例是：

```
NSString *string = [NSString stringWithFormat:@"%d", theinteger]; 
```

请注意，我尚未测试此代码的正确语法，但这可能是一个解决方案。如果您遇到任何问题，请告诉我。

谢谢

# ruby-on-rails - 设计辅助方法不存在

> ID：11469414
> 
> 赞同：0
> 
> 时间：2012-07-13T11:15:45.270
> 
> 标签：ruby-on-rails, devise

我正在使用设计来验证我的应用程序中的用户。问题是我的应用程序中不存在任何设计助手。例如。在文件`app/controllers/admin/dashboard.php`中，我有这段代码：

```
<% if user_signed_in ? %>
   do something
<% end %> 
```

我明白了

```
undefined method `user_signed_in?' 
```

这是`rake routes`命令的输出

```
new_admin_session           GET    /admin/sign_in(.:format)         devise/sessions#new
admin_session               POST   /admin/sign_in(.:format)         devise/sessions#create
destroy_admin_session       DELETE /admin/sign_out(.:format)        devise/sessions#destroy
admin_password              POST   /admin/password(.:format)        devise/passwords#create
new_admin_password          GET    /admin/password/new(.:format)    devise/passwords#new
edit_admin_password         GET    /admin/password/edit(.:format)   devise/passwords#edit
                            PUT    /admin/password(.:format)        devise/passwords#update
cancel_admin_registration   GET    /admin/cancel(.:format)          devise/registrations#cancel
admin_registration          POST   /admin(.:format)                 devise/registrations#create
new_admin_registration      GET    /admin/sign_up(.:format)         devise/registrations#new
edit_admin_registration     GET    /admin/edit(.:format)            devise/registrations#edit
                            PUT    /admin(.:format)                 devise/registrations#update
                            DELETE /admin(.:format)                 devise/registrations#destroy
login                              /admin/login(.:format)           devise/sessions#new
login                              /admin(.:format)                 devise/sessions#new
admin_dashboard_index       GET    /admin/dashboard/index(.:format) admin/dashboard#index 
```

这是 routes.rb 的内容

```
devise_for :admin

  devise_scope :admin do
    match 'admin/login' => 'devise/sessions#new', :as => :login
    match 'admin' => 'devise/sessions#new', :as => :login
    get "admin/dashboard/index"
  end

  namespace :admin do
    resources :images
  end 
```

和管理员模型

```
class Admin < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me 

end 
```

这里有什么问题？我可以注册或登录，但我不能使用辅助方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:24:08.683

尝试

```
admin_logged_in? 
```

设计将使用模型被调用的任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:24:22.320

由于您的模型是`Admin`您必须致电

```
admin_signed_in? 
```

并且

```
before_filter :authenticate_admin! 
```

在您的控制器中。

见[https://github.com/plataformatec/devise/#configuring-multiple-models](https://github.com/plataformatec/devise/#configuring-multiple-models)

# iframe - 使用 iframe 显示/隐藏切换 - Jquery

> ID：11469416
> 
> 赞同：1
> 
> 时间：2012-07-13T11:15:55.390
> 
> 标签：iframe, jquery

我是 Jquery 的新手（从示例中学习）。我正在尝试创建一些分步教程，然后在最后显示 iframe 的常见问题解答。

我的主要问题是页面加载了我所有的 iframe（但隐藏了它们），因此加载页面大约需要 10-15 秒。

我希望能够通过仅单击按钮/文本来加载每个 iframe，不知何故我设法做到了（因为我的 URL 是相同的，只有 url 的 id 改变： http: [//my.nanorep.com/小部件/widget.html?account=waze&kb=623233&onloadquestionid=](http://my.nanorep.com/widget/widget.html?account=waze&kb=623233&onloadquestionid=) **ID** )

编号：**3490608**或**3490611**

例如，当我单击忘记密码时，它会显示 iframe，但是当我再次单击它时，它会加倍，我不知道如何让它隐藏/删除/显示一次。

代码：http: [//jsfiddle.net/ronvaisman/SKBWA](http://jsfiddle.net/ronvaisman/SKBWA)

（它在**网络**下- >**登录问题**

谢谢你的帮助，罗恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:18:19.780

以显示：

```
$('frameid').show(); 
```

隐藏：

```
$('frameid').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:27:44.653

这是我做的一个例子，它被证明作为这些类型的东西的起点非常有用。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>Untitled Document</title>
 <script src="jquery.js"></script>
 <style>
 #click{ cursor:pointer;}
 .clickopen{ background-image:url(clickopen.png); background-repeat:no-repeat;}
 .clickclose{ background-image:url(clickclose.png); background-repeat:no-repeat;}
 </style>
 </head>

 <body>
 <div style="width:800px; margin:0 auto;">
 <div id="box" style="width:800px; height:100px; background-color:#000; display:none;">
 </div>
 <div style="width:800px; height:100px;background-color:#CCC;">
 <div id="click" style=" width:213px; height:27px;" class="clickopen">
 </div>
 </div>
 </div>
 <script>

var clickTrue = 0;

//show dialog

$("#click").click(function () {

     $('.clickopen').toggleClass("clickclose");

    $('#box').animate({
    opacity: 0.75,
    height: 'toggle'
    }, 400, function() {
    // Animation complete.
    });
 });

 </script>
 </body>
 </html> 
```

# logging - hdf5是否适合实时测量

> ID：11469417
> 
> 赞同：9
> 
> 时间：2012-07-13T11:16:03.980
> 
> 标签：logging, real-time, hdf5

我想知道hdf5是否适合实时数据记录？

更准确地说：我在一个项目中工作，我们希望连续（采样率范围从 30 到 400Hz）混合大量不同性质的数据（几个小时）（遥测、信号、视频）。

数据必须实时（或稍有延迟）写入，以防止我们在潜在的崩溃中丢失它们。

我们的第一个原型是基于sqlite3的，但是我们觉得长期使用可能会出现一些限制：速度，一个数据库==一个文件，以及从多个线程访问数据库的困难（同时读取和写入时锁定异常） ）。

因此，我正在考虑将 hdf5 用作磁盘上数据存储的后端（以及用于内部表示的 numpy/pytable）的可能性。您认为可以从这种 python 绑定中定期更新 hdf5 文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-01T10:01:08.960

HDF5 数据包表适用于实时测量 - 但是您最好使用固定大小的数据包到常规的旧 posix 文件并稍后转换。这是因为 HDF5 目前还不是很健壮，并且不提供使用低级文件 IO 代码所具有的各种保证 - 说低级代码实际上很容易使用。在某些时候，当您使用的数据足够复杂时，应该使用 HDF5，但要注意相对于低级文件 IO，它是重量级的，并且由于其全局互斥锁的使用，不能以合理的确定性/性能进行多线程处理。此外，例如，如果系统崩溃，则生成的 HDF5 文件是垃圾/不可恢复的 - 这将在一天之内得到解决，但需要 HDF 小组的资金来加快并在未来十年内完成它。

我自己的策略是尽可能使用数据包日志文件。然后在记录这些文件后立即将结果转换为 HDF5 以供长期使用 + 压缩 + 供其他工具/程序使用。所说的记录器通常我会在编写时转储一个解释二进制结构的 HDF5 文件，以便稍后我可以简单地读取该文件以了解数据包日志文件中的结构，并在加载数据包后将其交给真正的 HDF 文件在记忆中。

说了这么多，看看[boeing 的数据包表 api](https://www.hdfgroup.org/HDF5/doc/HL/H5PT_Intro.html)。它在 hdf5 附带的 hl c++ 库中也有一个害群之马 c++ 绑定，尽管我必须修补它以供我使用。

# asp.net - 如何在 ASP.NET 网站项目中自动化 NUnit 测试？

> ID：11469418
> 
> 赞同：2
> 
> 时间：2012-07-13T11:16:04.007
> 
> 标签：asp.net, testing, web, nunit, continuous

我有一个客户，他有一个用 ASP.NET 编写的大型现有应用程序，该应用程序在 Visual Web Developer 2010 Express 中设置为*网站项目。*

我被要求演示如何编写单元测试并帮助配置 Hudson 构建环境以自动运行这些测试。

代码结构合理，虽然没有使用任何 UI 模式，但分离度很好。业务逻辑往往位于单独的类中，而不是位于 .aspx 或相关的代码隐藏文件中。

然而，作为网站项目而不是 Web 应用程序，不会生成 DLL，因此我们编写的测试无法通过 NUnit GUI 运行。

我希望能够在签入前运行测试。我想作为持续构建过程的一部分自动运行测试。我无法将项目类型更改为 Web 应用程序，因为存在依赖于项目类型的下游流程。在调查升级到 Visual Studio Professional 的过程中，我必须假设出于本练习的目的，我需要让它在 VWD 上工作。

考虑到上述限制，我有什么选择来实现这一目标？甚至可能吗？

TIA

# actionscript-3 - air 3.3，新iPad，检测？

> ID：11469428
> 
> 赞同：0
> 
> 时间：2012-07-13T11:16:43.163
> 
> 标签：actionscript-3, air, adobe

我了解 air 3.3 为新 ipad 放大图像，但有没有办法让我检测到它是新 ipad 并改用 @2x 图形？

我用它来获取宽度/高度，但在新 iPad 上它只返回 1024 x 768 而不是 2048 x 1586：

```
var width = Math.max(GlobalVars.vars.stage.fullScreenWidth, GlobalVars.vars.stage.fullScreenHeight);
var height = Math.min(GlobalVars.vars.stage.fullScreenWidth, GlobalVars.vars.stage.fullScreenHeight); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:12:51.457

看一下这个。[http://www.overdigital.com/2012/05/08/the-new-retina-ipad-and-adobe-air/](http://www.overdigital.com/2012/05/08/the-new-retina-ipad-and-adobe-air/)

# ruby-on-rails - Rails 3 ActionMailer 发送 0 字节 pdf 附件

> ID：11469430
> 
> 赞同：0
> 
> 时间：2012-07-13T11:16:48.167
> 
> 标签：ruby-on-rails, actionmailer, email-attachments

我设法发送了一封电子邮件，其中包含存储在 s3 上的 pdf 附件

```
def welcome_pack1(website_registration)
      require 'open-uri'
      @website_registration = website_registration
      email_attachments = EmailAttachment.find(:all,:conditions=>{:goes_to_us=>true})

      email_attachments.each do |a|
        tempfile = File.new("#{Rails.root.to_s}/tmp/#{a.pdf_file_name}", "w")
        tempfile << open(a.pdf.url)
        tempfile.puts
        attachments[a.pdf_file_name] = File.read("#{Rails.root.to_s}/tmp/#{a.pdf_file_name}")
      end

      mail(:to => website_registration.email, :subject => "Welcome")
  end 
```

附件附在电子邮件中。但它们以 0 字节的形式出现。我正在使用此处发布的示例[回形针 + ActionMailer - 添加附件？](https://stackoverflow.com/questions/4356936/paperclip-actionmailer-adding-an-attachment). 我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:57:44.757

文件对象被缓冲 - 直到您关闭文件（您不是），您写入的字节可能不在磁盘上。不要忘记调用 close 的一个好方法是使用块形式：

```
File.open(path, 'w') do |f|
  #do stuff to f
end #file closed for you when the block is exited. 
```

我不确定您为什么要使用文件-为什么不这样做

```
attachments[a.pdf_file_name] = open(a.pdf.url) 
```

# c# - 实体框架代码优先延迟加载

> ID：11469432
> 
> 赞同：31
> 
> 时间：2012-07-13T11:16:53.023
> 
> 标签：c#, entity-framework, entity-framework-4, ef-code-first, lazy-loading

我有两个对象类

```
public class User
{
    public Guid Id { get; set; }
    public string Name { get; set; }

    // Navigation
    public ICollection<Product> Products { get; set; }
}

public class Product
{
    public Guid Id { get; set; }

    // Navigation
    public User User { get; set; }
    public Guid User_Id { get; set; }

    public string Name { get; set; }
} 
```

当我使用 dataContext 加载用户时，我得到的产品列表为空（这没关系）。

如果我在产品列表中添加“虚拟”关键字，

```
public virtual ICollection<Product> Products { get; set; } 
```

当我加载用户时，我也会得到产品列表。

为什么会这样？我认为“虚拟”关键字用于不加载实体，除非您明确说明（使用“包含”语句）

我想我全都错了

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-13T11:27:39.607

这是错误的

> “virtual”关键字用于不加载实体，除非您明确说明（使用“Include”语句）

延迟加载意味着实体将在您首次访问集合或导航属性时自动加载，并且这将透明地发生，就好像它们总是与父对象一起加载一样。

当您指定要查询的属性时，使用“包含”按需加载。

关键字的存在`virtual`仅与延迟加载有关。`virtual`关键字允许实体框架运行时为您的实体类及其属性创建动态代理，并由此支持延迟加载。如果没有虚拟，将不支持延迟加载，并且您会在集合属性上获得 null。

事实上，在任何情况下您都可以使用“包含”，但如果没有延迟加载，它是访问集合和导航属性的唯一方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T11:24:59.577

我猜您正在查询一个属性，该属性是在*进入*ef 上下文时延迟加载的主题：

```
using (var db = new Context())
{
    var user = db.Users.Where(...);

    var products = user.Products; // being loaded right away
} 
```

试着离开它：

```
User user;
using (var db = new Context())
{
    user = db.Users.Where(...);

    // I guess you will need here:
    // .Include(u => u.Products)
}
var products = user.Products; // what error will you get here? 
```

# android - 控制一个文本视图

> ID：11469433
> 
> 赞同：0
> 
> 时间：2012-07-13T11:16:55.583
> 
> 标签：android, textview

我的应用程序不断强制关闭。但是 Eclipse 没有显示错误或警告

```
package com.example.pkg;

import android.os.Bundle;
import android.widget.TextView;
import android.app.Activity;

public class subActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sub);
        Thread r = new Thread(new Runnable(){

                      public void run()
                      {   final TextView tv=(TextView)findViewById(R.id.rline1);
                          String s=(String)tv.getText();
                          tv.setText(s+"Works !");
                      }
        });
        r.start();
    }

} 
```

另一个 Activity 调用这个 Activity。那个显示了 TextView。我想要做的就是更改正在显示在 TextView 上的名为 R.string.rline1 的字符串资源。如果有其他方法，请告诉我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:20:02.193

您正在尝试`tv.setText(s+"Works !");`在线程中更新您的 UI（使用 ）。你不能这样做。您必须在主线程中更新您的 UI。只需删除这个无用的线程：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sub);
        TextView tv=(TextView)findViewById(R.id.rline1);
        String s=(String)tv.getText();
        tv.setText(s+"Works !");
    } 
```

***注意**：Eclipse 不会显示错误，您必须打开您的 logcat（默认情况下在 Eclipse 的 DDMS 透视图中）。下次遇到问题时，请发布您的 logcat 错误。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:22:16.583

替换下面的代码

```
 Thread r = new Thread(new Runnable(){

                  public void run()
                  {   **final TextView tv=(TextView)findViewById(R.id.rline1);
                      String s=(String)tv.getText();
                      tv.setText(s+"Works !");**
                  }
    });
    r.start(); 
```

和

```
final TextView tv=(TextView)findViewById(R.id.rline1);
                          String s=(String)tv.getText();
                          tv.setText(s+"Works !"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:25:32.447

首先，您必须需要在 UI 线程中更新 GUI 内容，否则它将永远无法工作。第二件事，您知道创建文本视图实例并再次设置它的次数，您在线程内，并且您没有设置任何标志来停止您的线程一旦完成。例如对于 UI 线程：

```
 Runnable update_gui = new Runnable() {
            @Override
            public void run() {
              final TextView tv=(TextView)findViewById(R.id.rline1);
              String s=(String)tv.getText();
              tv.setText(s+"Works !");

            }
        };runOnUiThread(update_gui); 
```

# ruby-on-rails - Capistrano 和 rvm 的正确方法

> ID：11469434
> 
> 赞同：0
> 
> 时间：2012-07-13T11:16:56.187
> 
> 标签：ruby-on-rails, rvm, capistrano

我的客户端工作站上有这种情况。

当我尝试进行部署时，使用

```
cap deploy 
```

我收到此错误消息：

```
capistrano is not part of the bundle. Add it to Gemfile. (Gem::LoadError) 
```

好的！但我不想将它添加到 gemfile 中。我想在系统范围内使用它。gem 当前已安装。

关于二进制的一些信息：

```
~/Code/ecommerce (master ✔) ᐅ which cap
cap: aliased to bundled_cap

~/Code/ecommerce (master ✔) ᐅ which bundled_cap
  bundled_cap () {
    _run-with-bundler cap $@
  } 
```

任何想法？我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:35:35.440

好像`bundle exec`是在你的`cap deploy`命令之前。

您使用的是[bundler-exec](https://github.com/gma/bundler-exec)或[oh-my-zsh 之](https://github.com/robbyrussell/oh-my-zsh/)类的东西吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:35:06.627

好的，主要问题是 oh-my-zsh 别名和 bundler 插件

这是文件 [https://github.com/robbyrussell/oh-my-zsh/blob/master/plugins/bundler/bundler.plugin.zsh](https://github.com/robbyrussell/oh-my-zsh/blob/master/plugins/bundler/bundler.plugin.zsh)

现在又可以正常工作了！

# jcl - 在 JCL 中的 INCLUDE 条件之后格式化输出文件

> ID：11469436
> 
> 赞同：0
> 
> 时间：2012-07-13T11:17:06.513
> 
> 标签：jcl

我想根据输入文件中的以下 INCLUDE 标准创建 3 个输出文件。此外，我只想要以下 3 个 BUILD 给出的输出文件中的部分记录。

我认为现在的问题是拥有多个 BUILD/OUTREC 会产生重复错误。

在 JCL 中是否有其他方法可以实现相同的目标？

```
SORT  FIELDS=COPY                                              
OUTFIL FILES=01,                                               
   INCLUDE=(38,8,CH,EQ,C'AMSAM00'),                            
   BUILD=(1,4,5:366,8)                                         
OUTFIL FILES=02,                                               
   INCLUDE=(38,8,CH,EQ,C'AMSAM00',AND,390,1,CH,EQ,C'Y'),       
   BUILD=(1,4,5:382,8)                                         
OUTFIL FILES=03,                                               
   INCLUDE=(38,8,CH,EQ,C'AMSAM00',AND,545,4,CH,NE,C'0000'),    
   BUILD=(1,4,5:C'013,',9:545,4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:49:10.823

这有一个随机戳，所以...

我认为 Deuian 是在正确的行上，但留下了一些复杂性，并且用户更改没有使用正确的位置或输出文件的类型，所以输入太多以适用于这种情况......

```
OPTION COPY                                              
INCLUDE COND=(38,8,CH,EQ,C'AMSAM00')

OUTFIL FILES=02,                                               
  INCLUDE=(390,1,CH,EQ,C'Y'),       
  BUILD=(1,4,382,8)                                         

OUTFIL FILES=03,                                               
  INCLUDE=(545,4,CH,NE,C'0000',
          AND,390,1,CH,NE,C'Y'),    
  BUILD=(1,4,C'013,',545,4) 

OUTFIL FILES=01,SAVE,
  BUILD=(1,4,366,8) 
```

这假定不需要 SORTOUT（它只是输入文件的副本）。

所有 AMSAM00 记录都已包含在内，其他所有内容（OUTFIL 不需要）都将被忽略。

OUTFIL 02 得到所有的'Y'。

OUTFIL 03 获取所有不是 'Y' 的非 0000

OUTFIL 01 移动以使其更易于跟踪，获取未在另一个 OUTFIL 上选择的所有记录（通过使用 SAVE）。

通过 INCLUDE 的所有数据都将位于三个 OUTFIL 之一上，并且只有一个。

为了清楚起见，我使用了 OPTION COPY。SORT FIELDS=(... 逻辑上出现在 INCLUDE 之后（无论您在哪里编码），并且通过使用 OPTION COPY 很清楚，在前面，在一个合乎逻辑的地方，它是一个 COPY 操作。

我已从 BUILD 中取出“列”（这些数字后跟冒号）。如果数据自动进入该列（确实如此），那么使用这些列只会产生工作，引入新的错误可能性，并使排序控制卡更难维护。

这个问题还不清楚，所以这只是对想要什么的猜测。

提到了OUTREC。

从上下文来看，这是在 OUTFIL 上的 OUTREC。有一个单独的 OUTREC 语句。为避免混淆（由于 OUTREC 的“重载”），不要在 OUTFIL 上使用 OUTREC，这是为了“向后兼容”，而是使用现代 BUILD，这是完全等效的。

BUILD 存在于 INREC、OUTREC 和 OUTFIL 上，分别作为 IFTHEN 的一部分。OUTREC 相当于 BUILD 仅在 OUTFIL 上。

在 INREC 和 OUTREC 上，由于同样的原因，FIELDS 也有“重载”（向后的事情）。

不要使用 INREC FIELDS=，或 OUTREC FIELDS= 或 OUTFIL OUTREC=，使用 BUILD 代替它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:49:12.107

以下是我认为您正在尝试做的事情。Include 1 排除 Include 2 和 3 将选择的内容，同样 Include 2 排除 1 和 3 将选择的内容。除了排除 1 和 2 包含之外，包含 3 也在执行相同的操作。

每个 FILE DD 从下面只有 1 条记录，所有记录都复制到排序中

```
//SORTIN  DD *
AMSAM00Y0000
AMSAM00N0001
AMSAM00Y0001
AMSAM00N0000
//SORTOUT DD SYSOUT=*
//SYSIN    DD *
  SORT  FIELDS=COPY
     OUTFIL FNAMES=FILE1,
        INCLUDE=(1,7,CH,EQ,C'AMSAM00',
                 AND,8,1,CH,NE,C'Y',AND,9,4,CH,EQ,C'0000'),
        BUILD=(1,12)
     OUTFIL FNAMES=FILE2,
        INCLUDE=(1,7,CH,EQ,C'AMSAM00',AND,
                 8,1,CH,EQ,C'Y',AND,
                 9,4,CH,EQ,C'0000'),
        BUILD=(1,12)
     OUTFIL FNAMES=FILE3,
        INCLUDE=(1,7,CH,EQ,C'AMSAM00',AND,
                 8,1,CH,NE,C'Y',AND,
                 9,4,CH,NE,C'0000'),
        BUILD=(1,12)

FIlE1
AMSAM00N0000

FILE2
AMSAM00Y0000

FILE3
AMSAM00N0001

SORTOUT
AMSAM00Y0000
AMSAM00N0001
AMSAM00Y0001
AMSAM00N0000 
```

# c++ - C++ 八叉树容器

> ID：11469445
> 
> 赞同：4
> 
> 时间：2012-07-13T11:17:36.237
> 
> 标签：c++, containers, octree

我在网上搜索了有关八叉树容器如何工作的解释。我找不到任何关于如何工作的明确解释。（至少，这对我来说很有意义......）有谁知道如何实现一个八叉树容器？一个有 8 个孩子（左右）。如果是这样，你介意分享/解释逻辑......或者我可以去哪里学习如何实现一个。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T12:09:30.663

你的问题很笼统。但我会试着给你这个想法。请注意，有很多方法可以实现八叉树，这都取决于您的应用程序。在这个例子中，我将专注于简单的情况，你总是在中间分开。

让我们先从简单的开始。假设您有一组数字（一维数据）。您可能希望对它们进行分组，以便更轻松地搜索它们。一种方法（即使在这种特殊情况下存在更好的方法）是创建一棵树。让我们称它为比特树（这样它就不会与二叉树混合，即使它*是*一种二叉树）。

在这个比特树中，每个节点将代表一个范围的中间。左边的值会小于这个值，右边的值会更大。树的根当然代表最小值和最大值之间的中间值。在每个叶子中，如果您的值超出您的处理能力，则拆分并创建一个子树。例如，如果您的值介于 0 和 100 之间，则比特树可能如下所示：

```
 50
              /        \
           25            75
         /    \        /    \
        12   {27,33}  62    {}
      /    \        /    \
   {1,3}  {13}   {51,52} {72} 
```

这棵树代表这个数组：

```
{1, 3, 13, 27, 33, 51, 52, 72} 
```

我假设您熟悉二叉树，因此实现这样的树对您来说应该不是问题。

这里的关键是，每个叶子最多可以包含一定数量的节点。每次插入比特树时，如果叶子溢出，您将获得其范围的中间，创建一个节点并将值划分为两个叶子。

现在让我们将其扩展到 2d。想象一下你的价值观是`(x,y)`（而不是只是`x`）的形式。我们可以像上面一样划分这些值，但不是将它们划分为中间的左右，而是将它们划分为中心的左上、左下、右上和右下。其余的完全一样。我们称之为四叉树，因为它有 4 个孩子。这个四叉树的实现和二叉树完全一样，所以你现在应该可以理解了。

来自 Wikipedia 的示例，其中每个叶子只能包含 1 个值：

![在此处输入图像描述](../Images/c99afbfbec90825d14f1b73d43ff7302.png)

最后一步是将其扩展到 3d。和以前一样，现在的值是`(x,y,z)`. 这一次，不是将值划分为 4 个区域，而是将它们划分为 8 个区域：左上前、左上后、左下前、左下后、右上前、右上-后，右前和右后。我们称其为八叉树，其实现再次与其他的完全相同。

> 我被困在你如何从头开始合乎逻辑地构建一个。其背后的逻辑是什么？它使用两个容器吗？它在类中使用虚函数吗？孩子们的部分是如何工作的？

同样，与实现二叉树的方式完全相同。如果你在那里使用虚函数，你也可以在八叉树中使用虚函数。

# javascript - 如何使用 jquery 验证重置错误消息？

> ID：11469448
> 
> 赞同：0
> 
> 时间：2012-07-13T11:17:47.400
> 
> 标签：javascript, jquery-ui, jquery-validate, jquery

当我单击取消按钮时，我想删除或清除错误消息并重置 jquery 验证。

在这里，我给出了我的代码：

```
$(document).ready(function() {
    var validator = $("#loginForm").validate({
        messages: {
            email: {
                required: "Please enter email.",
                email: "Please enter a valid email."
            },
            password: "Please enter password."
        }
    });

     <form name="loginForm" id="loginForm" method="post" action="javascript:login();">
                        <div class="login_contain_div">
                             <div id="login_errors" class="errors"></div>
                             <div class="login_contain_inner">

                                  <span style="font-size: 20px; font-weight: lighter;">Email</span>
                                  <input type="text" id="email" name="email" class="inputbg required email" />

                                  <br/>
                                  <span style="font-size: 20px; font-weight: lighter;">Password:</span>
                                  <input type="password" id="password" name="password" class="inputbg required" />
                             </div>
                             <div class="login_button_area">

                                  <input type="submit" id="login_submit" class="login_greenbtn button_float_left login_btn_width" name="submit" value="Ok" style="cursor: pointer;" />
                                  <a class="ptr login_greenbtn button_float_right login_btn_width" onClick="$('#cboxClose').click();">Cancel</a>
                             </div>
                        </div>
                   </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:21:00.700

采用`resetForm()`

```
 $(".cancel").click(function() {
   validator.resetForm();
 )}; 
```

# php - PHP Mysql WHILE 循环删除最后一个分隔符

> ID：11469451
> 
> 赞同：0
> 
> 时间：2012-07-13T11:17:59.043
> 
> 标签：php, while-loop

我有这段代码可以从 mysql 数据库中获取数据。

```
<?php
$sql = mysql_query( "SELECT * FROM users WHERE name = $name" );
while ( $row = mysql_fetch_array( $sql ) ) {
 echo $row[id] . '|';
 echo $row[name] . '|';
 echo $row[add] . ':';
}
OUTPUT : 12|jonathan|philippines:14|John|england:
?> 
```

如何删除 `:`使用 while 的最后一个分隔符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:26:23.493

```
$sql = mysql_query( "SELECT `id`, `name`, `add` FROM users WHERE name = $name" ); 
$data = array();
while ( $row = mysql_fetch_array( $sql, MYSQL_NUM ) ) 
{  
  $data[] = implode('|', $row);
} 
echo implode(':', $data); 
```

如果你这样做，它会更健壮一点，如果你现在改变你的查询也没关系......它只会以你想要的格式输出你的字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:20:20.550

```
$sql = mysql_query( "SELECT * FROM users WHERE name = $name" );
$counter = 0;
while ( $row = mysql_fetch_array( $sql ) ) {

   if ($counter > 0) {
       echo ":";
   }
   echo $row[id] . '|' . $row[name] . '|' . $row[add];
   $counter++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:21:20.383

```
<?php
$out = '';
$sql = mysql_query( "SELECT * FROM users WHERE name = $name" );
while ( $row = mysql_fetch_array( $sql ) ) {
 $out.=$row[id] . '|';
 $out.=$row[name] . '|';
 $out.=$row[add] . ':';
}
echo substr($out,0,-1);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:21:23.790

```
 $sql = mysql_query( "SELECT * FROM users WHERE name = $name" );
    $number = mysql_num_rows($sql);
    $i = 1;
       while ($row = mysql_fetch_assoc($sql)) {
             echo $row[id] . '|';
             echo $row[name] . '|';
             echo $row[add] ;

       if($i < $number) {
           echo ':';
        }
       $i++;
    } 
```

# c# - 从 SQL Server 运行可执行文件

> ID：11469457
> 
> 赞同：1
> 
> 时间：2012-07-13T11:18:12.623
> 
> 标签：c#, sql-server, sql-server-2008

我一直在研究运行外部 exe 文件。到目前为止，我发现可以使用以下方法来完成：

```
EXEC master..xp_cmdshell '"C:\New Folder\test.exe"' 
```

而且这也不能直接在触发器中调用，因为它必须等到执行完成才能完成触发器。

因此，鼓励的方法是有一个计划的作业来轮询表并从那里调用 .exe 文件，而不会产生任何性能问题。到目前为止，我已经接受了它并正在努力。

所以，在尝试这个之前，我正在研究在实施之前必须学习的每个部分。我正在测试上面的代码，将数据库保持为主。我已经尝试了几个。

```
EXEC master..xp_cmdshell '"C:\New Folder\r.rar"'

EXEC master..xp_cmdshell '"C:\New Folder\text.text"' 
```

**所以，我认为这个 xp_cmdshell 是一个普通的命令提示符。我期望看到 exe 文件的打开和 tet 文件和 rar 文件的打开。但它不起作用。**

我已经给出了上面的细节来告诉我我的方法，如果你在之前的经验中有更好的方法，请给我反馈。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-18T10:13:09.000

**尝试触发**

***以下是从触发器运行 .exe 文件的代码：***

```
CREATE TRIGGER trgAfterInsert on dbo.table_Demo
DECLARE @CMDSQL VARCHAR(1000) 
```

*设置您的 exe 文件的路径，如果需要可以包含参数文件。*

```
SET @CMDSQL = 'cmd.exe /C "D:\Phoenix restart\612 League\code\PhoenixMallTest\bin\Release\PhoenixMallTest.Console.exe" App.ini'
Exec master..xp_cmdshell @CMDSQL
PRINT 'AFTER INSERT trigger fired.' 
```

*如果 sql server 阻止 xp_cmdshell 或说要启用 xp_cmdshell，您可以执行以下操作。*

```
Use Master
GO

EXEC master.dbo.sp_configure 'show advanced options', 1
RECONFIGURE WITH OVERRIDE
GO

EXEC master.dbo.sp_configure 'xp_cmdshell', 1
RECONFIGURE WITH OVERRIDE
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T05:35:25.657

你得到什么类型的错误？

您可能会遇到此问题，因为组件在您的 sql 服务器的安全配置中被关闭。

系统管理员可以使用 sp_configure 启用“xp_cmdshell”的使用。有关启用“xp_cmdshell”的详细信息，请参阅 SQL Server 联机丛书中的“表面区域配置”。

# c - gcc 和微软预处理器的区别

> ID：11469462
> 
> 赞同：17
> 
> 时间：2012-07-13T11:18:22.723
> 
> 标签：c, visual-studio, gcc, c-preprocessor

我发现 Microsoft Visual Studio 编译器和 gcc 以不同的方式预处理以下小片段：

```
# define M3(x, y, z) x + y + z
# define M2(x, y) M3(x, y)
# define P(x, y) {x, y}
# define M(x, y) M2(x, P(x, y))
M(a, b) 
```

'gcc -E' 给出以下内容：

```
a + {a + b} 
```

, 而 'cl /E' 发出有关缺少宏参数的警告并产生以下输出：

```
a + {a, b} + 
```

似乎来自嵌套宏扩展的逗号不被视为参数分隔符。不幸的是，我没有找到在 cl 预处理器中实现的算法的描述，所以我不确定我的建议是否正确。有谁知道 cl 预处理器是如何工作的，它的算法和 gcc 有什么区别？以及如何解释观察到的行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T11:52:46.220

```
# define M3(x, y, z) x + y + z
# define M2(x, y) M3(x, y)
# define P(x, y) {x, y}
# define M(x, y) M2(x, P(x, y))
M(a, b) 
```

让我们一步一步地手动推出：

```
M(a, b)
--> M2(a, P(a, b))
--> M2(a, {a, b}) 
```

标准说：

> 列表中的各个参数由逗号预处理标记分​​隔，但匹配内括号之间的逗号预处理标记不分隔

只提到了括号，所以...

```
--> M3(a, {a, b})
--> a + {a + b} 
```

重要的：

```
M3(a, {a, b}) 
```

这里，根据标准的前面引用，将三个“参数”传递给 M3（使用单引号来描述标记/参数）：

```
M3('a', '{a', 'b}') 
```

扩展到

```
'a' + '{a' + 'b}' 
```

这就是`cpp`（4.6.1）逐字给出的：

```
# 1 "cpp.cpp"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "cpp.cpp"

a + {a + b} 
```

`cpp`（或`gcc`和`g++`）是正确的，MSVC 不是。

作为贵族，请确保存在错误报告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T11:41:19.310

解释这种行为的唯一逻辑如下所示。

CL方式：

```
 M(a,b) 
 M2(a,P(a,b)) 
 M3(a,P(a,b))
 M3(a,{a,b}) -> M3 gets 2 arguments ( 'a' and '{a,b}') instead of 3.
    |  \ /
  arg1  |
      arg2 
```

gcc方式：

```
M(a,b) 
M2(a,P(a,b)) 
M3(a,P(a,b))
M3(a,{a,b}) -> Gcc probably thinks there are 3 arguments here ('a', '{a', 'b}').
   |  | |
 arg1 | |
   arg2 |
     arg3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:52:04.467

我认为 gcc 是正确的，微软的做法是不正确的。

对行进行宏替换时

```
M2(a, P(a, b)) 
```

标准（第 6.10.3.1 节）要求在用其参数（“P（a，b）”）替换宏的替换列表（“M3（x，y）”）中的第二个参数（“y”）之前，宏将对该参数执行替换。这意味着“P(a, b)”在插入之前被处理为“{a, b}”，导致

```
M3(a, {a, b}) 
```

然后进一步替换为

```
a + {a + b} 
```

# android - 用于大屏幕的 android 可绘制文件夹

> ID：11469464
> 
> 赞同：5
> 
> 时间：2012-07-13T11:18:28.847
> 
> 标签：android, android-layout

我在drawable-hdpi（大图像）和drawable-mdpi（小图像）中有图像

我在 Kindle fire 上打开了我的应用程序（它从 layout-large 获取布局）并且它使用来自 drawable-mdpi 的图像，当屏幕尺寸很大时，有什么方法可以让应用程序从 drawable-hdpi 获取图像？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T11:24:15.477

我认为您正在寻找的是使用[配置限定符。](http://developer.android.com/guide/practices/screens_support.html#qualifiers)

看来您真的误解了这些文件夹的作用。您的 android 将根据其屏幕大小或像素密度选择文件夹。

您的 Kindle Fire 具有中等像素密度和大屏幕。因此，它从具有给定限定符的 res 文件夹中选择其资源。

res/layout-large/my_layout.xml

和图片来自

```
res/drawable-mdpi/my_icon.png 
```

你不能告诉你的 Kindle 从 hdpi 文件夹中获取图像，因为它没有高像素密度。

因此，您可以创建一个名为

```
res/drawable-large-mdpi/ 
```

专为您的 Kindle Fire 设备而设计。

或者只是确保正确的图像位于正确的文件夹中。

**编辑：从 3.2 开始不推荐使用大小限定符。**

虽然已弃用，但它们仍然有效。虽然结果可能不是预期的（例如：5" 和 7" 被视为相同的尺寸 - 大 - 仍然有差异）。所以他们添加了 dp 限定符以在 3.2 之后使用。哪个好得多。developer.android.com/guide/practices/... 它有点像媒体查询

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-12T11:17:49.430

使用 Android 的新限定符更新此内容。

`drawable-large`使用3.2 或更高版本中已弃用的大小限定符。

要使用支持多种布局和密度的最新方法，您可以使用以下方法：

`res/drawable-sw600dp-mdpi`

在本例中，sw600dp `represents the smallest width available to the activity in density-independent pixels,`600dp `in this case. This is deemed as being a little more fitting for device-specific layouts and drawables as the width is provided instead of a generalized size grouping such as`large`。

还有可用宽度和高度的新选项，此处提供完整信息：[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T11:33:20.697

所有限定符都按照它们在[Table2](http://developer.android.com/guide/topics/resources/providing-resources.html#table2)中出现的顺序进行处理。

阅读[Android 如何找到最匹配的资源](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)。

# objective-c - iphone-dev：在 MapViewController 中使用 appDelegate 中的变量

> ID：11469467
> 
> 赞同：0
> 
> 时间：2012-07-13T11:18:39.307
> 
> 标签：objective-c, xcode, class, ios5, mapkit

因此，在我的 appDelegate 中，我有一系列事件，如下所示：

AppDelegate.m

```
#import "AppDelegate.h"
#import "ListViewController.h"
#import "Event.h"
#import <RestKit/RestKit.h>

@implementation AppDelegate{
    NSMutableArray *events;

    /* for test data */
    NSMutableArray *titles;
}

@synthesize window = _window; ... 
```

我想在视图控制器中访问这个事件数组，如下所示：

MapViewController.m

```
#imports ...

...

-(void) viewDidLoad{
    [super viewDidLoad];

    [worldView addAnnotation:[ACCES_EVENTS_HERE objectAtIndex:int]; // <------

    NSLog(@"Loadded the view for MapViewController");
} 
```

我该怎么做呢？其次，有没有比 viewDidLoaD 更好的地方在地图上添加事件？（事件将来自数据库，因此会有很多事件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:22:30.843

我认为在应用程序委托上存储这样的变量是个坏主意，但是如果您需要访问权限，您可以使用

```
id<UIApplicationDelegate> myDelegate = [[UIApplication sharedApplication] delegate] 
```

您需要将其转换为您的委托类以访问变量

# sql-server - INSERT AFTER 或 UPDATE AFTER 触发器内的回滚是否回滚整个事务

> ID：11469476
> 
> 赞同：6
> 
> 时间：2012-07-13T11:19:22.897
> 
> 标签：sql-server, sql-server-2008, tsql, triggers

INSERT AFTER 或 UPDATE AFTER 触发器内的回滚是回滚整个事务还是仅回滚作为触发原因的当前行，它与 Commit 相同吗？

我试图通过我当前使用 MSTDC 进行事务的项目代码来检查它，看起来好像整个事务被中止了。

如果触发器中的回滚确实回滚了整个事务，是否有一种解决方法可以将其限制为仅当前行。

我在此找到了[sybase](http://manuals.sybase.com/onlinebooks/group-as/asg1250e/sqlug/@Generic__BookTextView/49241;pt=49055)的链接，但在 sql server 上没有

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T11:31:39.463

是的，它将回滚整个事务。

这一切都在[文档](http://msdn.microsoft.com/en-us/library/ms181299%28v=sql.100%29.aspx)中（请参阅备注）。请注意我强调的评论 - 我会说这非常重要！

> 如果在触发器中发出 ROLLBACK TRANSACTION：
> 
> 在当前事务中对该点所做的所有数据修改都会回滚，包括触发器所做的任何修改。
> 
> **触发器在 ROLLBACK 语句之后**继续执行任何剩余的语句。**如果这些语句中的任何一个修改了数据，则修改不会回滚。执行这些剩余语句不会触发嵌套触发器。**
> 
>  **在触发触发器的语句之后的批处理中的语句不会被执行。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T05:38:53.293

正如您已经知道的那样，ROLLBACK 命令不可能被修改/调整，以便它只回滚触发器发出的语句。

如果您确实需要一种方法来“回滚”仅由触发器执行的操作，作为一种解决方法，您可以考虑修改您的触发器，以便在执行操作之前，触发器确保这些操作不会产生异常情况会导致整个事务回滚。

例如，如果您的触发器插入行，请添加检查以确保新行不违反例如唯一约束（或外键约束），如下所示：

```
IF NOT EXISTS (
  SELECT *
  FROM TableA
  WHERE …  /* a condition to test if a row or rows you are about
              to insert aren't going to violate any constraint */
)
BEGIN
  INSERT INTO TableA …
END; 
```

或者，如果您的触发器删除行，请检查它是否不尝试删除其他表引用的行（在这种情况下，您通常需要事先知道哪些表*可能*引用这些行）：

```
IF NOT EXISTS (
  SELECT * FROM TableB WHERE …
)
AND NOT EXISTS (
  SELECT * FROM TableC WHERE …
)
AND …
BEGIN
  DELETE FROM TableA WHERE …
END 
```

同样，您需要检查更新语句（如果有）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:37:10.030

任何回滚命令都会回滚所有内容，直到 @@trancount 为 0，除非您指定了一些保存点，并且您将 rollback tran 命令放在哪里都没有关系。

最好的方法是再次查看代码并确认业务需求，看看为什么需要在触发器中回滚？**

# windows - Sublime Text 2 Mouse free 从“在文件中查找”结果打开文件

> ID：11469480
> 
> 赞同：11
> 
> 时间：2012-07-13T11:19:34.317
> 
> 标签：windows, sublimetext2

爱崇高文本 2。

能够在不使用鼠标的情况下从“**在文件中查找”**结果中打开文件将是一个巨大的帮助。

找不到这个的快捷方式；必须有一个！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-06T18:53:30.193

使用 F4 或 Shift+F4 浏览搜索结果列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T00:15:22.030

一天后重新搜索，我在 Sublime Text 2 文档中找到了[这个页面，该页面有效。](http://docs.sublimetext.info/en/latest/search_and_replace/search_and_replace_files.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T16:37:28.703

有[https://github.com/abrookins/OpenSearchResult](https://github.com/abrookins/OpenSearchResult)在 Vintage 中对我来说很好用。

# jar - 在 gradle 中为 jar 清单定义自定义类路径

> ID：11469481
> 
> 赞同：5
> 
> 时间：2012-07-13T11:19:37.917
> 
> 标签：jar, classpath, manifest, gradle

我正在尝试为所有子项目（大约 30 个）定义一个 jar 任务。我尝试了以下任务：

```
 jar {
            destinationDir = file('../../../../_temp/core/modules')
            archiveName = baseName + '.' + extension
            metaInf {
                    from 'ejbModule/META-INF/' exclude 'MANIFEST.MF'
            }

          def manifestClasspath = configurations.runtime.collect { it.getName() }.join(',') 
            manifest {
            attributes("Manifest-Version"       : "1.0",
                "Created-By"             : vendor,
                "Specification-Title"    : appName,
                "Specification-Version"  : version,
                "Specification-Vendor"   : vendor,
                "Implementation-Title"   : appName,
                "Implementation-Version" : version,
                "Implementation-Vendor"  : vendor,
                "Main-Class"             : "com.dcx.epep.Start",
                "Class-Path"             : manifestClasspath 
            )
            }
    } 
```

我的问题是，子项目之间的依赖关系不包含在清单的类路径中。我尝试将运行时配置更改为编译配置，但这会导致以下错误。

> *   出了什么问题：评估项目“：EskoordClient”时出现问题。
>     
>     > 您不能更改未处于未解决状态的配置！

这是我的 EskoordClient 项目的完整构建文件：

```
dependencies {     
    compile project(':ePEPClient')
} 
```

我的大多数子项目构建文件只定义项目依赖项。3rd 方库依赖项在超级项目的构建文件中定义。

是否有可能将所有需要的类路径条目（第 3 方库和其他项目）包含到所有子项目的超级项目中的清单类路径中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T21:30:55.857

This is how I got it to work. Get Project dependencies only using the call:

```
getAllDependencies().withType(ProjectDependency) 
```

then adding the contents of each project's libsDir to my Class-Path manifest entry.

```
jar {
    manifest {
        attributes 'Main-Class': 'com.my.package.Main'
        def manifestCp = configurations.runtime.files.collect  {
        File file = it
        "lib/${file.name}"
        }.join(' ')

         configurations.runtime.getAllDependencies().withType(ProjectDependency).each {dep->

            def depProj = dep.getDependencyProject()
            def libFilePaths = project(depProj.path).libsDir.list().collect{ inFile-> "lib/${inFile}"  }.join(' ')
            logger.info"Adding libs from project ${depProj.name}: [- ${libFilePaths} -]"
            manifestCp += ' '+libFilePaths
        }

        logger.lifecycle("")
        logger.lifecycle("---Manifest-Class-Path: ${manifestCp}")
        attributes 'Class-Path': manifestCp

    }

} 
```

# jquery - 设置表格单元格的点击值

> ID：11469482
> 
> 赞同：2
> 
> 时间：2012-07-13T11:19:38.607
> 
> 标签：jquery, onclick, tablecell

我创建了一个自定义日历，基本上只是为每个月的每一天创建一个表格单元格。

我想要做的是当用户点击特定日期时，显示一个弹出窗口（将加载一个单独的页面），显示该选定日期的所有事件。

但是我不确定如何设置所选日期的值，以便我可以将其传递到弹出页面。

这是我目前所拥有的：

```
<td align="center" valign="middle" width="26" height="27s" 
     class="lightBlue dayPopup" style="cursor: pointer;" 
     onMouseOver="javascript:this.className='lightBlueH';
                  document.getElementById('#Request.calID#day#Day(Variables.cellDate)#').style.visibility='visible';"
     onMouseOut="javascript:this.className='lightBlue';
                 document.getElementById('#Request.calID#day#Day(Variables.cellDate)#').style.visibility='hidden';"
     onClick="setDate(#Variables.cellDate#);" id="#Variables.cellDate#"> 
```

jQuery代码：

```
$("##setDate").click(function(date) {
        var viewDate = date;
    }); 
```

然后我设置一个变量，将 URL 传递给控制弹出窗口的函数。

有人可以指出我在尝试设置所选日期的值时出错的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:26:46.173

您需要利用“this”的力量，它在下面的代码中将引用被点击的单元格。

```
$("td.yourCalendarCells").click(function() {
            var viewDate =     getDateFromCell(this);   
    }); 

function getDateFromCell(cell){
     return $(cell).attr('id')
} 
```

我不确定您的 Id 属性是什么格式或如何存储 viewDate，因此您可能需要在 getDatefromCell 中做更多的事情来返回日期，但您现在应该有足够的能力来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:37:36.443

您主要想将日期发送到弹出页面以显示该日期的事件。它很容易您可以采用[http://jsfiddle.net/DQ3Bm/中使用的方法](http://jsfiddle.net/DQ3Bm/)

IE

使用标签来保持附加到元素的检测/时间，但仍然只向用户显示日期部分。

```
<table class="event-calendar">
    <tr>
        <td>
            <time datetime="2013-01-01">1</time>
        </td>
        <td>
            <time datetime="2013-01-02">2</time>
        </td>
    </tr>
</table> 
```

然后在`td`点击您可以获取要传递给弹出网址的日期

```
$(document).ready(function(){
    $(".event-calendar td").click(function(){
        alert($(this).find("time").attr("datetime"));

    });
}); 
```

# c++ - 清零匿名工会

> ID：11469485
> 
> 赞同：1
> 
> 时间：2012-07-13T11:19:49.513
> 
> 标签：c++, c, undefined-behavior, unions

> **可能重复：**
> [将 int 的所有字节设置为 (unsigned char)0，保证表示零？](https://stackoverflow.com/questions/11138188/set-all-bytes-of-int-to-unsigned-char0-guaranteed-to-represent-zero)

我在结构中有以下匿名联合：

```
union
{
    unsigned value;
    char name[4];
}; 
```

我可以替换以下代码：

```
name[0] = 0;
name[1] = 0;
name[2] = 0;
name[3] = 0; 
```

用下面的代码？

```
value = 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:26:26.847

在您的简单情况下，它是相同的，但这只是因为（最有可能）`int`（并且`unsigned`是 的缩写`unsigned int`）是 32 位（即四个字节）。如果数组更大，或者`int`只有 16 位，则不会相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:25:57.220

我认为这段代码更好：

```
memset(name, 0, max(sizeof(name), sizeof(int))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T13:07:29.600

在C中你最好做

```
union
{
   char name[sizeof(unsigned)];
   unsigned value;
}; 
```

现在一个隐式初始化器，例如，如果你初始化了周围的`struct`，总是将你的 name 字段初始化为 all `0`。并且提供`unsigned`没有填充位（这很可能）初始化或分配`0`to`value`也将始终归零`name`。

C++ 的规则不同，似乎从您写入的不同字段读取的是 UB。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:23:30.997

之间

```
name[0] = 0; 
```

和

```
name[1] = 0; 
```

和

```
name[2] = 0; 
```

和

```
name[3] = 0; 
```

其他函数可以更改其他字节。所以，

```
value = 0; 
```

我认为更安全

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T11:26:33.307

是的，但仅当`sizeof(unsigned)==4`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-13T18:34:33.950

是的，如果您使用的是 64 位机器，那就对了。如果不是，您将覆盖 name 的前 2 个字符，因为在 32 位机器上`unsigned`的大小是 2 字节而不是 4（或更高）。

# c++ - OpenCV findContours 总是为每个对象找到两个轮廓

> ID：11469491
> 
> 赞同：2
> 
> 时间：2012-07-13T11:20:21.367
> 
> 标签：c++, opencv

我刚刚写了一个小程序，它在颜色阈值二值图像中搜索轮廓，在阈值化后用 canny 处理，但不知何故，它总是为图像中的每个对象找到两个轮廓。

在绘制找到的轮廓的右下角图像中，您可以看到最大的轮廓被绘制了两次，两个轮廓之间有一点偏移。下一张图片显示了该图片的详细视图。

[http://img831.imageshack.us/img831/3641/doubleframe2.png](http://img831.imageshack.us/img831/3641/doubleframe2.png)

这里只绘制了最大的轮廓两次，但每隔一个轮廓就会随机发生一次。我只想为每个对象提供一个轮廓，我该如何实现？：/

**更新：**

由 findContours 方法填充的轮廓向量的大小为 8，而它的大小应该仅为 4。

**更新 2：这是来自 kinect** [http://img405.imageshack.us/img405/9761/inputimage.jpg](http://img405.imageshack.us/img405/9761/inputimage.jpg)

的 rgb 输入图像 的颜色阈值我使用了以下方法

```
cv::cvtColor(in, out, CV_BGR2HSV);
cv::inRange(out,
            cv::Scalar(25, 131, 97),
            cv::Scalar(35, 220, 217),
            out); 
```

然后是一个大小为 1 的 rect 元素的腐蚀 + 膨胀。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T14:19:32.750

我认为这个问题很可能是因为当你找到边缘然后找到这些边缘的轮廓时，**它有一个外边界和内边界**。所以openCV将两者都作为轮廓并绘制它。

当我计算它的面积时，它们的值有一个非常小的变化，大约为**'3'**（例如，最大的正方形检测到两个轮廓的区域**为 9105.5 和 9108.5**），这很可能由于我提到的原因而发生。（所以它们很难区分）

**如果你找到轮廓而没有找到精巧的边缘，这个问题就可以解决**。即直接从阈值图像中找到轮廓。它会给你更准确的答案。

在第一种情况下（在精明之后），我得到了 36 个轮廓，而在第二种情况下，我只有 22 个轮廓。

试试看，希望能解决问题！！！

# asp.net - 避免 LINQ 中的 Null 值异常

> ID：11469496
> 
> 赞同：0
> 
> 时间：2012-07-13T11:20:35.113
> 
> 标签：asp.net, linq

我正在尝试使用 LINQ 过滤 DataTable

```
DataTable DT=new DataTable();
DT = PinDicDAO.GetContractPOVD().AsEnumerable().Where(r => (r.Field<string>("ContractPOReference").ToUpper().Contains(text.ToUpper())) || (r.Field<string>("ContractPO").ToUpper().Contains(text.ToUpper())) ||
                                   (r.Field<string>("ContractPOTitle").ToUpper().Contains(text.ToUpper())) || (r.Field<string>("Address").ToUpper().Contains(text.ToUpper()))
                                   ).AsDataView().ToTable(); 
```

查询工作正常。但是当某些字段具有 NULL 值时，它会给出异常。

```
"Object Reference Not set to an instance of object" 
```

我怎样才能避免这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:32:12.320

在尝试使用它之前检查空值。您最好使用 linq 关键字，这样您就可以使用 let 并使其更具可读性：

```
var query = from r in PinDicDAO.GetContractPOVD().AsEnumerable()
                        let ContractPOReference = r.Field<string>("ContractPOReference")
                        let ContractPO = r.Field<string>("ContractPO")
                        let ContractPOTitle = r.Field<string>("ContractPOTitle")
                        let Address = r.Field<string>("Address")
                        where (ContractPOReference != null && ContractPOReference.ToUpper().Contains(text.ToUpper())) ||
                           (ContractPO != null && ContractPO.ToUpper().Contains(text.ToUpper())) ||
                           (ContractPOTitle != null && ContractPOTitle.ToUpper().Contains(text.ToUpper())) ||
                           (Address != null && Address.ToUpper().Contains(text.ToUpper()))
                        select r;

            DT = query.AsDataView().ToTable(); 
```

# c# - 初始化 OutlookEmail 对象从 HRESULT 给出异常：0x80029C4A (TYPE_E_CANTLOADLIBRARY)

> ID：11469497
> 
> 赞同：1
> 
> 时间：2012-07-13T11:20:37.113
> 
> 标签：c#, email, outlook

当我尝试将对象初始化为：

```
 OutlookEMail email = new OutlookEMail(MailType); 
```

在 C# 中我得到异常：

> 无法将类型为“Microsoft.Office.Interop.Outlook.ApplicationClass”的 COM 对象转换为接口类型“Microsoft.Office.Interop.Outlook._Application”。此操作失败，因为 IID 为“{00063001-0000-0000-C000-000000000046}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：加载类型库/DLL 时出错。（来自 HRESULT 的异常：0x80029C4A (TYPE_E_CANTLOADLIBRARY)）。

使用 Microsoft Office (outlook) 2007。有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T18:35:50.437

我遇到了同样的错误，只是在我运行最简单的代码行时：

```
var outlookApp = new Microsoft.Office.Interop.Outlook.Application(); 
```

我尝试了各种建议，例如运行“修复”和注册各种组件。解决方法是将我的项目目标从“任何 CPU”更改为“x86”。我正在运行 Windows 8.1 64 位和 32 位 Office。

# c# - 一个 ScrollViewer 对应两个 ListBox

> ID：11469499
> 
> 赞同：3
> 
> 时间：2012-07-13T11:20:57.200
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1

我有 2 个列表框和一个滚动查看器，我希望滚动查看器将两个列表框一起滚动。但我不知道该怎么做.. 这是我的 xaml ：

```
 <ScrollViewer Grid.Row="1">
        <Grid>
            <ListBox Name="listboxRSSFeedItems" Width="240" Height="644" Margin="0,0,240,0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <TextBlock TextWrapping="Wrap" Text="{Binding Title}" Grid.Row="0" FontSize="24" HorizontalAlignment="Left" />
                            <HyperlinkButton Content="Link to details" NavigateUri="{Binding Link}" HorizontalAlignment="Left" Grid.Row="1" Margin="0,0,0,30" />
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <ListBox Name="listboxRSSFeedItems2" Width="240" Height="644" Margin="240,0,0,0">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <TextBlock TextWrapping="Wrap" Text="{Binding Title}" Grid.Row="0" FontSize="24" HorizontalAlignment="Left" />
                            <HyperlinkButton Content="Link to details" NavigateUri="{Binding Link}" HorizontalAlignment="Left" Grid.Row="1" Margin="0,0,0,30" />
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>
    </ScrollViewer> 
```

非常感谢

* * *

好的。我只是尝试用网格做一个列表框。它工作正常，但如何选择添加我的项目的网格。我曾经使用“listboxRSSFeedItems.Items.Add(item)”添加，但现在，我如何只选择第二列。

```
 <ScrollViewer Grid.Row="1">
        <ListBox x:Name="listboxRSSFeedItems" Width="480" Height="680">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Grid x:Name="first" Grid.Column="0"> 
                            <TextBlock TextWrapping="Wrap" Text="{Binding Title}" />
                            <HyperlinkButton NavigateUri="{Binding URL}" TargetName="_blank"/>
                        </Grid>
                        <Grid x:Name="second" Grid.Column="1">
                            <TextBlock TextWrapping="Wrap" Text="{Binding Title}" />
                            <HyperlinkButton NavigateUri="{Binding URL}" TargetName="_blank" />
                        </Grid>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </ScrollViewer> 
```

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:08:45.297

将列表框设置`VerticalScrollBarVisibility`为“禁用”。并且它会更好地`StackPanel`用于这个 puprose 而不是`Grid`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:45:39.957

您不应该设置列表框的高度。

ps：考虑使用列布局

```
 <ScrollViewer >
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <ListBox x:Name="first" Grid.Column="0" />

            <ListBox x:Name="second" Grid.Column="1" />
        </Grid>
    </ScrollViewer> 
```

# sql - 在 Tibco BusinessWorks Designer 中，如何在使用数据库查询时捕获“未找到记录”？

> ID：11469510
> 
> 赞同：0
> 
> 时间：2012-07-13T11:21:43.760
> 
> 标签：sql, database, tibco, businessworks

我是 Tibco BubinessWorks 和 sql 数据库的新手，但不知何故，我不得不使用 Tibco 托管一个简单的 Web 服务来查询本地数据库。

我想要实现的非常简单，我在 Tibco Designer 中的流程将有一个活动来查询数据库以使用输入 customerid 查找 customername。

但是在没有找到具有特定输入 customerid 的客户的情况下，我想生成一个错误。而且我尝试使用“条件成功”将我的数据库查询活动与生成错误活动联系起来，但我不知道设置 xpath。

另一个问题是，在没有找到输入 id 的 customername 的情况下，数据库是返回 null 还是空字符串？

如果它是 null，对于 xpath，是否有类似：if(customername = null)？

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T14:33:56.360

在这两种情况下（即 null 或空字符串）`string-length(customername) = 0`，作为 XPath 表达式都可以很好地捕捉`customer id`未返回结果的情况。在不知道您的数据库模式的情况下，很难显示比这更多的细节。

请注意，您始终可以检查返回的行数，计数为`0`.

# javascript - ember-data 以及如何在所有绑定和观察者都更新时触发提交？

> ID：11469513
> 
> 赞同：1
> 
> 时间：2012-07-13T11:22:03.603
> 
> 标签：javascript, mongodb, ember.js, ember-data

我有一个有很多部分的项目模型。每个项目都存储在 mongodb 中，并且这些部分是嵌入式文档，所以当我得到一个项目时，json 包含这些部分。

当我更改一个部分中的属性时，许多其他部分也可以更改，因为它们绑定到该属性。

在所有绑定和观察者完成后，如何将此更改保存到服务器？

我真的不希望我的用户必须单击保存按钮，但我也不想在每次更改后保存，因为我将在更改后以及绑定部分更改后保存！

希望这是有道理的。

如果有人可以向我展示如何执行此操作的示例，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:22:35.240

由于您使用的是 ember-data，因此您可以`transaction`为此创建一个。在 上进行所有更改`trasaction`后，只需调用`transaction.commit()`以批量更新您的更改。

# windows - RASPHONE.exe 和 RASDIAL.exe 之间的区别

> ID：11469514
> 
> 赞同：7
> 
> 时间：2012-07-13T11:22:05.390
> 
> 标签：windows, winapi, sdk, ras

我尝试以编程方式建立拨号连接。我尝试使用 RASdial.exe 和 RASPhone.exe，两者都一样，除了 RasDial.exe 在控制台中显示错误，而 RasPhone.exe 在用户界面中给出。

有人可以解释一下 Rasdial 和 Rasphone 之间的区别，以及哪个是建立拨号连接的正确方法。我想要用户界面中的错误消息，而不是控制台中的错误消息。

请详细解释我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T16:56:35.043

RASDIAL.exe 是 Win32 RasDial [API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377004%28v=vs.85%29.aspx)的包装器，通常用于无法显示用户界面的情况。这就是错误显示在控制台中的原因。

RASPHONE.exe 是 Win32 [RasPhonebookDlg API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377612%28v=vs.85%29.aspx)的包装器，通常在允许接口时使用。如果您使用它，您将有更多选项来显示标准拨号界面。

它们都可以用来拨号连接，这实际上取决于哪个适合您正在开发的应用程序的特定需求。根据您希望如何显示错误消息，您可能需要调用 API 而不是使用可执行文件。

# javascript - 调用 javascript 函数表单 jquery

> ID：11469515
> 
> 赞同：0
> 
> 时间：2012-07-13T11:22:08.107
> 
> 标签：javascript, jquery, jquery-ui

我在 Jquery 中使用 javascript 函数时遇到问题。我想获取 jquery SLIDER 的最大值和最小值。请帮忙。

这是标记。

```
$(document).ready(function() { 
```

这是函数MAX

```
 function getMax()
    {
             var options = document.getElementById('.price_range').childNodes;
                var min = 999999999;
                for(var i = 0; i < options.length; i++) {
                    if(options[i].value > max) max = options[i].value;
                }
                return max;
    } 
```

这是函数 MIN

```
function getMin()
    { var options =document.getElementById('my_max').childNodes;
      var min = 999999999;

            for(var i = 0; i < options.length; i++) {
                        if(options[i].value < min) min = options[i].value;

            }
            return min;

    } 
```

滑块函数来了，它必须从 javascript 函数中获取最小值和最大值

```
 // Slider
            $('#slider').slider({
                             range: true,
                            min: getMin(),
                            max: getMax(),
                            step: 10, // Use this determine the amount of each interval
                    values: [ 20, 40 ], // The default range
                    slide: function( event, ui ) {
                        $( "#amount" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] ); // for input text box
                        $( "#my_min" ).val(ui.values[ 0 ]); // Display and selected the min Price
                        $( "#my_max" ).val(ui.values[ 1 ]); // Display and selected the max Price
                        }

            });
             //For dropdown box
    $( "#my_min" ).val($( "#slider" ).slider( "values", 0 ));
    $( "#my_max" ).val($( "#slider" ).slider( "values", 1 ));

         $("select.price_range").change(function () {
        $myMinValue = $("#my_min option:selected").val();
        $myMaxValue = $("#my_max option:selected").val();
        //Make changes on the slider itself
        if($myMinValue <= $myMaxValue) {
            $( "#slider" ).slider({
                values: [$myMinValue, $myMaxValue]
            });
        } else {
            alert("Invalid Input");
        }
    });

        }); 
```

这是 index.html

```
 <body>

    <select id="my_min" class="price_range">
  <option value="0">0</option>
  <option value="10">10</option>
  <option value="20">20</option>
  <option value="30">30</option>
  <option value="40">40</option>
</select>
<select id="my_max" class="price_range">
  <option value="0">0</option>
  <option value="10">10</option>
  <option value="20">20</option>
  <option value="30">30</option>
  <option value="40">40</option>
</select

    ><!-- Slider -->
    <h2 class="demoHeaders">Slider</h2>
    <label for="amount">Price range:</label>
<input type="text" id="amount" style="border:0; color:#f6931f; font-weight:bold;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:26:41.853

我不确定我是否完全理解你的问题，

但是使用jquery调用函数是这样的。

```
$(document).ready(function() {
  var returnvalue = functionname();
}); 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:26:48.150

没有审查你的整体逻辑，我可以指出一个直接的错误：

```
document.getElementById('.price_range') 
```

`.price_range`是一个 CSS 选择器。`getElementById`需要文档中元素的 ID，因此为了使您的选择器工作，请改用 jQuery。

# algorithm - 文本挖掘/分析用户命令/问题算法或库

> ID：11469519
> 
> 赞同：1
> 
> 时间：2012-07-13T11:22:45.083
> 
> 标签：algorithm, libraries, text-mining

我有一个财务应用程序，我希望添加它能够在文本框中获取用户命令或输入，然后采取正确的行动。例如，希望用户写“显示过去 10 天的收入”，它会向他/她显示收入 - 关键是我希望它真正理解问题的含义，所以之前的声明将带来与“我在过去 10 天内是否有任何收入”或类似的结果 - BI（类似于 Wolfram|Alpha 引擎）的结果。

我想知道是否有任何开源库或算法书籍或任何我可以用来学习该主题的东西。关于开源库 - 我不介意它将用哪种语言编写。

我已经阅读了这个主题并看到了许多引擎和服务（OpenNLP、Apache UIMA、CoreNLP 等），但没有弄清楚它们是否适合我的需求。

欢迎任何答案或建议。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:26:37.743

您所说的领域通常称为“自然语言处理”。这很难，而且是一个活跃的研究领域。根据您喜欢的编程语言和用例，您可以考虑使用各种库：

[http://en.wikipedia.org/wiki/List_of_natural_language_processing_toolkits](http://en.wikipedia.org/wiki/List_of_natural_language_processing_toolkits)

我已经使用了一点 NLTK。这个领域很难做到正确，因此您可能希望尝试将您的应用程序限制在一些小的动词和名词集合中，以便人们首先使用受控词汇表，然后尝试将其扩展到此之外。

# iphone - 如何显示电子邮件已发送通知 ipad

> ID：11469522
> 
> 赞同：0
> 
> 时间：2012-07-13T11:22:55.267
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个成功发送电子邮件的邮件控制器。

但是我想在发送电子邮件时显示“电子邮件发送成功”的通知。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:35:49.230

如果您正在使用`MFMailComposeViewController`，则可以使用其委托方法。

**1.**设置委托：`mailController.mailComposeDelegate=self;`

**2.**然后使用委托方法`

```
 - (void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error
{
   if(result == MFMailComposeResultSent)
  {
      UIAlertView*sentalert=[[UIAlertView alloc] initWithTitle:@"Mail Sent succesfully!" message:nil delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
      [sentalert show]; 
      [sentalert release]; // if not using ARC
  }

  [self dismissModalViewControllerAnimated:YES]; //Dismiss your mail controller
} 
```

# c# - 更好的 Web 服务客户端

> ID：11469530
> 
> 赞同：0
> 
> 时间：2012-07-13T11:23:33.800
> 
> 标签：c#, web-services, asynchronous, xamarin.ios, client

我正在使用 C# 和 MonoTouch 为 Web 服务编写客户端应用程序。它有一些用于用户会话（注册、登录、注销）、消息传递（列表、写入、删除等）、图像例程（上传、下载）等的命令。

我为用户会话请求类型编写了实现，它可以异步执行，如下所示：

```
{
    public delegate void LoginEventHandler(Session session);
    public delegate void ErrorEventHandler(Error error);
    public delegate void StatusEventHandler(string status);

        public interface IDataProvider
        {
            #region Session
            Session GetSession();

            event LoginEventHandler OnRegistered;
            event ErrorEventHandler OnRegisteredError;
            void Register(Person user);

            event LoginEventHandler OnLoggedIn;
            event ErrorEventHandler OnLoggedInError;
            void Login(Person user);

            event StatusEventHandler OnLoggedOut;
            event ErrorEventHandler OnLoggedOutError;
            void Logout(Session session);
            #endregion
        }
    }
} 
```

**它可以工作**，但即使是现在，实现 2 个事件处理程序并在以后为任何请求取消订阅它们也有点**无聊和弱：**

```
dataProvider = new DataProviderService ();
...
appDelegate.dataProvider.OnRegistered += HandleOnRegistered;
appDelegate.dataProvider.OnRegisteredError += HandleOnRegisteredError;
appDelegate.dataProvider.Register(GetPerson());
...
void HandleOnRegistered (Session session)
{
    InvokeOnMainThread(delegate {
        appDelegate.settings.Session = session;

        appDelegate.dataProvider.OnRegistered -= HandleOnRegistered;
        appDelegate.dataProvider.OnRegisteredError -= HandleOnRegisteredError;

        Waiter.HideWaiter();
        Console.WriteLine(session.userId);
    }
    );
}

void HandleOnRegisteredError (Error error)
{
    InvokeOnMainThread(delegate {
        appDelegate.dataProvider.OnRegistered -= HandleOnRegistered;
        appDelegate.dataProvider.OnRegisteredError -= HandleOnRegisteredError;

        Console.WriteLine(error);
    });
} 
```

有什么建议可以改进架构以促进进一步发展吗？或者任何材料来看看大师通常是如何做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:38:53.637

一般来说，我设计这种东西的方式是：

*   延迟加载我的控制器
*   每个控制器都是应用程序中的一个单例，并且在应用程序的整个生命周期中都存在（我使用 IoC 容器，但您不必这样做）
*   将您的 WCF 服务（或通道）也设为单例
*   在每个控制器的构造函数中订阅此类事件
*   适当处理`ViewDidLoad`，`ViewDidUnload`以便在内存不足的情况下可以释放大部分内存
*   检查`IsViewLoaded`事件中的或可见性等，以确定是否需要处理事件

您可以取消订阅以`Dispose`取得良好的效果，但这不是必需的。

# spring - 用于外部服务的 Rest-SOAP 网关（Spring + Camel）

> ID：11469536
> 
> 赞同：2
> 
> 时间：2012-07-13T11:23:54.050
> 
> 标签：spring, rest, soap, apache-camel

我需要在 2 个外部服务之间构建 REST-SOAP 网关首先 Web 服务发出 SOAP 请求并等待 SOAP 响应。第二个服务（我的，用 Play Framework 1.2.4 编写）仅使用 RESTful 方法工作。出于多种原因，我不想将 SOAP 相关的东西与第二个服务集成。所以我需要一些第三方服务来在他们之间行动。

我已经研究过将 Spring web-app 与 Apache Camel 一起使用，但仍然无法获得完整的图片，因为 Camel 的模块太多了。CXF-RS 和 SOAP 组件看起来很有希望，但我不知道如何使用它们来实现代理。

首先，如何让 Camel 监听指定的 SOAP 请求。然后，如何将响应从 RESTful 服务路由回调用服务。

我试图只使用弹簧配置来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T15:15:51.180

[Camel CXF](http://camel.apache.org/cxf.html)将为您的肥皂端点解决问题。

首先你需要写一个端点

```
@WebService
public interface QuoteInEndpoint {

  @WebResult(name = "quote")
  public Quote price(@WebParam(name = "symbol") String symbol);

} 
```

然后你需要声明它

```
<cxf:cxfEndpoint id="quoteIn" address="http://localhost:9002" serviceClass="my.package.QuoteInEndpoint" /> 
```

然后，您可以从此端点构建路由

```
from("cxf:bean:quoteIn")//
        .process(new Processor() {
          @Override
          public void process(Exchange exchange) throws Exception {
            //do whatever you need to get your object and transform it for your rest service
          }
        })//
        .to("http://myplayframeworkserver/myservice")// 
```

Camel 将启动路由，在 localhost:9002 公开你的soap服务的wsdl，每个soap请求都将被发送到你的rest服务器。process 方法可用于将您的对象塑造为您的休息服务的正确格式（我假设为 json）。您可以使用另一个 Camel 组件来完成这项工作，而不是使用处理器（如果您需要 json ，请使用[Camel JSON ）](http://camel.apache.org/json.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T15:33:01.190

没有直接的方法可以简单地在肥皂和休息之间进行代理。REST 服务，都是关于资源和 CRUD - 创建/读取/更新/删除。有效负载可以是任何形式，通常是 JSON，但 XML、纯文本或任何其他格式都是有效的。SOAP 是仅具有自定义定义方法的 XML。

我理解骆驼中与此相关的所有组件的困惑。

在选择方法时，您需要牢记几个方面。

*   您真正需要多少 SOAP 堆栈？很可能您只需要基本功能，例如接收一个简单的肥皂信封并在没有 WS-addressing、ws-security 等的情况下提取有效负载。

*   你有合同优先还是代码优先的方法？也就是说，您的肥皂服务是否已经由 java 类/接口定义，或者您是否有 WSDL？

*   您是否将骆驼实例部署在 servlet 容器中（这很常见），例如 Tomcat、Jetty 或 JavaEE 应用服务器？如果您是这样，您可能需要使用该 servlet 容器来处理由于某种原因的请求（出于某种原因，例如 Web 服务器虚拟主机、防火墙等，从同一端口/服务器/域名获取所有请求）。那么CXF可能会有点棘手。否则，camel 可以使用内置的 jetty 核心设置监听器。

所以：先契约，然后在 serverletcontainer 中使用骆驼——我更喜欢 spring-ws，因为它很容易上手。 [spring-ws 组件](http://camel.apache.org/spring-web-services.html)。只需在 spring 中进行初始连接，您甚至不需要从 WSDL 生成内容，只需指出要从哪个soap-action、uri 或 rootq 名称获取消息：

```
from("spring-ws:soapaction:http://example.com/GetFoo?endpointMapping=#endpointMapping") 
```

然后你就有了 XML。

如果您需要从骆驼托管 Web 服务，有效负载模式下的 CXF 相当不错，并且行为几乎相同。

```
from("cxf:somename:http://localhost:8765?wsdl=somewsdlfile.wsdl&dataFormat=PAYLOAD") 
```

如果您已经在 J​​ava 中定义了服务，您可以使用带有 Jetty 组件的[SOAP 数据](http://camel.apache.org/soap.html)格式来获得一个非常轻量级的解决方案。

```
SoapJaxbDataFormat soap = new SoapJaxbDataFormat("com.example.customerservice", new      ServiceInterfaceStrategy(CustomerService.class));
from("jetty:http://localhost:9832/soapsrv")
  .marshal(soap) // and other transforms here
  .to("http://somerestservicehost/srv"); 
```

或者。使用带有 CXF 或 CXF-bean 的完整 CXF 解决方案。骆驼网站上有很多例子。但是该组件相当大，可能有些棘手。

对于休息，也有选择，但那部分更直接。Rest 主要是关于创建一些内容（通过从肥皂消息中提取它，也许将 xml 映射到 json），这可能是使用一些普通的旧 java 代码最容易实现的。然后只需向您的休息服务器调用一个 HTTP 端点。HTTP4 或 HTTP 组件将为您完成很多工作。

如果你喜欢 CXF，CXFRS 很好，并且可以提供一些帮助，特别是如果你想用类来建模你的休息服务

# html - 绝对位置 - div 内的 div 不起作用

> ID：11469542
> 
> 赞同：0
> 
> 时间：2012-07-13T11:24:13.060
> 
> 标签：html, css

我有 div callad subHeader 里面我有：

1 - subHeaderLeft

2 - subHeaderRight

当我向浏览器显示 subHeaderLeft/right 时，subHeaderLeft/right 来自 subHeader 而不是内部。

为什么 subHeaderLeft/right 在 subHeader 之外？

你可以 **[看到演示 jsFiddle](http://jsfiddle.net/centerwow/qjfUk/7/)。**

谢谢你的帮助。

html代码：

```
<div id="subHeader">
      <div id="subHeaderLeft"></div>
      <div id="subHeaderRight"></div>
</div>

css code:

#subHeader{
      width: 200px;
      height:100px;
      Helvetica, sans-serif;
      margin: 10px auto;
      border: 3px solid #6fb2e6;
      background: pink;
      }    

#subHeaderLeft{
      position:absolute;
      left:0;
      top:0;      
      width: 70px;
      height:100px;
      margin: 0;
      border: 3px solid #6fb2e6;
      background: white;
      }
#subHeaderRight{
      position:absolute;
      right:0;    
      top:0;      
      width: 30px;
      height:100px;
      margin: 0;
      border: 3px solid #6fb2e6;
      background: yellow;
      } 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:26:58.687

正在发生的是绝对定位的元素相对于 body 元素而不是它们的直接父元素来定位自己。

具有**相对**定位的页面元素使您可以控制在其中绝对定位子元素。

所以只需添加

```
position:relative 
```

给你的父母#subHeader。

这样，子项的绝对定位对其父项起作用。

[http://jsfiddle.net/qjfUk/9/](http://jsfiddle.net/qjfUk/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:27:19.663

只需添加位置：相对；到#subHeader 喜欢

```
#subHeader{
      position:relative;
      width: 200px;
      height:100px;
      Helvetica, sans-serif;
      margin: 10px auto;
      border: 3px solid #6fb2e6;
      background: pink;
      } 
```

# android - Android：使用密码锁定应用

> ID：11469544
> 
> 赞同：3
> 
> 时间：2012-07-13T11:24:17.530
> 
> 标签：android, password-protection

我想用用户在应用程序设置中设置*的密码锁定我的应用程序。*每次要显示我的应用程序的主要活动时，都应该显示一个密码对话框。我知道该怎么做，但我想知道......：

如何存储用户设置的密码？我无法存储它，`SharedPreferences`因为您可以在手机设置中删除 SharedPreferences。我想过一个保存密码的**文本文件**，但是这个文件可以删除，不是吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:31:11.913

您无法防止密码以某种方式被删除，因此您需要退后一步，首先考虑为什么您有密码。很可能您正在使用密码来保护应用程序可以访问的数据，而不是实际的应用程序本身（因为保护应用程序不运行对于对设备进行物理访问的攻击者不会有效。

如果您的密码是为了保护数据，您只需要确保攻击者由于删除密码存储而无法访问数据。一种方法是使用密码作为加密密钥（或密钥的一部分）来隐藏数据——因此甚至没有要删除的密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:31:55.753

一种选择是将密码放在与其他信息相同的文件中（我认为您想保护用户的设置/数据）。当该文件丢失或损坏时，请不要启动应用程序。您所完成的是，如果有人篡改数据，则信息将变得无法使用。签署/加密您的数据文件。

另一种解决方案可能是将密码（哈希！）存储在网络服务器上。

# css - 奇怪的边框效果

> ID：11469545
> 
> 赞同：0
> 
> 时间：2012-07-13T11:24:18.563
> 
> 标签：css, jquery-mobile, border

我遇到了一个我觉得我以前发现（并解决）的问题。但不记得是什么或如何。

我正在使用 jQuery Mobile 并主要重新设计它。其中一部分是在导航项目的底部放置一条实心粗线。所以我已经覆盖了边框，所以我有一个左右 1px 的边框，然后是一个 10px 的底部边框。但是底部边框是锯齿状的，看起来左右两边都试图越过底部边框的一半，但不是全部。

我附上了问题的屏幕截图（我已将底部边框增加到 25px 以使其更明显）。

```
 #id
   {
     border: #231F20 1px solid;
     border-top: none;
     border-bottom: #EE1E5C 25px solid;
   } 
```

有什么想法会出现这个问题以及如何解决？

![截屏](../Images/631ef4f055db29f920263bf95eb7387f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:41:57.393

这是因为边界边缘不是在水平或垂直的直线上相交，而是在对角线中，从内框的角开始，到包括边框在内的框的角结束（在这种情况下，这意味着边框完成一个像素到它开始的左侧和右侧）。如果您将侧边框更改为更宽，则会更清楚发生了什么。

这是一个快速的图像来说明：

![边界连接](../Images/4596ba3915aacd86d2cbea95990eb623.png)

边界沿红线连接。

至于解决方案 - 您可能需要一个额外的元素来包装以提供该底部边框，或者摆脱您的 1px 侧边框。恐怕也不是理想的解决方案。

# mysql - 如果其中一个查询返回null，如何防止MySql Cross Join Query返回零结果

> ID：11469549
> 
> 赞同：3
> 
> 时间：2012-07-13T11:24:27.407
> 
> 标签：mysql, sql

我使用此查询来获取 mysql 事件表中的下一个和上一个事件的 ID：

```
SELECT e.id AS current, prev.id AS previous, next.id AS next
FROM events e
CROSS JOIN 
(
    SELECT id FROM events 
    WHERE date < '{$result['date']}' 
    ORDER BY date DESC 
    LIMIT 1
) prev
CROSS JOIN 
(
    SELECT id
    FROM events 
    WHERE date > '{$result['date']}' 
    ORDER BY date 
    LIMIT 1
) next
WHERE e.date = '{$result['date']}' 
```

此查询工作正常。

让我们假装桌子看起来像这样：

```
ID | EVENT_NAME   | DATE
------------------------------
1  | test event 1 | 2012-01-01
2  | test event 2 | 2012-01-02
3  | test event 3 | 2012-02-03 
```

如果我使用`$result['date']`as运行查询`2012-01-02`，则会返回：

```
Array
(
    [0] => Array
    (
        [current] => 2
        [previous] => 1
        [next] => 3
    )
) 
```

但是，如果我使用`$result['date']`as `2012-01-01`OR运行查询`2012-01-03`，则会返回一个空的结果集！

如果上一个或下一个日期不存在，因为传递的日期是最高或最低的，我仍然需要结果集来返回下一个或上一个

例如

`$result['date']`因此，如果我使用as运行查询`2012-01-01`，我需要结果集：

```
Array
(
    [0] => Array
    (
        [current] => 1
        [next] => 2
    )
)

OR

Array
(
    [0] => Array
    (
        [current] => 1
        [previous] => NULL
        [next] => 2
    )
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:41:01.087

您可以使用 1=1 的 LEFT JOIN

```
SELECT e.id AS current, prev.id AS previous, next.id AS next 
FROM events e 
LEFT JOIN  
( 
    SELECT id FROM events  
    WHERE date < '{$result['date']}'  
    ORDER BY date DESC  
    LIMIT 1 
) ON prev 1=1 
LEFT JOIN  
( 
    SELECT id 
    FROM events  
    WHERE date > '{$result['date']}'  
    ORDER BY date  
    LIMIT 1 
) ON next 1=1 
WHERE e.date = '{$result['date']}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:50:40.463

您可能会使用子查询：

```
SELECT e.id AS current, 
(
    SELECT id 
    FROM events 
    WHERE date < '{$result['date']}' 
    ORDER BY date DESC 
    LIMIT 1
) AS previous,
(
    SELECT id
    FROM events 
    WHERE date > '{$result['date']}' 
    ORDER BY date 
    LIMIT 1
) AS next
FROM events e
WHERE e.date = '{$result['date']}' 
```

# c# - ASPNetFlashVideo 无法在服务器端播放

> ID：11469555
> 
> 赞同：1
> 
> 时间：2012-07-13T11:24:49.143
> 
> 标签：c#, asp.net, .net, flash-video

我正在使用下面的代码在 asp.net Web 应用程序中播放视频。但它在本地机器上运行，而不是在服务器上。请帮我解决这个错误。在服务器端，它正在缓冲而不是播放。

```
<ASPNetFlashVideo:FlashVideo ID="FlashVideo2" runat="server" VideoURL="~/Help/Video/Help.flv" 
    Width="100%" Height="500px" AllowFullScreen="true" Alignment="Center" EnableTheming="true"
    EolasFixEnabled="true" WindowMode="Transparent" AutoPlay="true">
</ASPNetFlashVideo:FlashVideo> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:53:57.650

我试图更改 ASPNETFlashVideo 上的视频 URL

```
var myvideo;
myvideo = ASPNetMedia.FlashVideo("ID");
myvideo.PlayMedia("VideoURL"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:55:24.253

这是 jw 播放器与 asp.net 一起使用的源代码，您可以尝试 [http://www.beansoftware.com/ASP.NET-Source-Code/JW-FLV-Player-CS.aspx](http://www.beansoftware.com/ASP.NET-Source-Code/JW-FLV-Player-CS.aspx)

[http://venkatb4me.wordpress.com/2011/03/13/how-to-play-flash-video-files-in-asp-net-using-c-net-or-vb-net/](http://venkatb4me.wordpress.com/2011/03/13/how-to-play-flash-video-files-in-asp-net-using-c-net-or-vb-net/)

# jquery - jQuery选项卡不起作用

> ID：11469560
> 
> 赞同：1
> 
> 时间：2012-07-13T11:25:00.203
> 
> 标签：jquery

我正在使用 jQuery 创建选项卡：

```
$("document").ready(function() {
    $("#tabs").tabs();
}); 
```

和html：

```
<div id="tabs">
<ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
</ul>
<div id="tabs-1">
        <p>Proin ur nec arcu m sodal mpus lectus.</p>
</div>
<div id="tabs-2">
        <p> llus p Mauris consectetur tortor et purus.</p>
</div>
<div id="tabs-3">
        <p> sus he  nec, luctus a, lacus.</p>

</div>
</div> 
```

CSS：

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css"> 
```

我包含的 jQuery 是：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js" type="text/javascript"></script> 
```

但标签不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:34:08.703

删除双引号`$("document")`

它应该是：

```
$(document).ready(function() {
    $("#tabs").tabs();
}); 
```

或尝试：

```
$(function(){
    $("#tabs").tabs();
}) 
```

**编辑：**

**建议注意：**如果一切正常，那么当您使用任何其他库时可能会发生这些类型的错误，例如`prototype`它与 jQuery 库冲突，以消除您必须经历的冲突`jQuery.noConflict( [removeAll] )`。

参见参考实现：**[jQuery.noConflict](http://api.jquery.com/jQuery.noConflict/)**

# jquery - fancybox 无法与验证引擎一起使用

> ID：11469562
> 
> 赞同：0
> 
> 时间：2012-07-13T11:25:14.020
> 
> 标签：jquery, jsp, fancybox

我想在验证引擎验证成功后启动fancybox....下面提到了我正在使用的代码....

```
<button type="button" class="addcncl" value="<s:message code='createMonitorProfile' />" name="createProfile" id="createProfile" ><s:message code='createMonitorProfile' /></button>

$("#createProfile").fancybox({
        'titlePosition'     : 'outside',
        'overlayColor'      : '#000',
        'autoSize'          : false,
        'autoDimensions'    :false,
            'overlayOpacity'    : 0.7,
        'scrolling'         :'yes',
});
$("#createProfile").bind("click", function() {
    if($('#createMonitorProfileForm').validationEngine('validate')) {
          //if this condition is true then I want to upload fancybox content 
          //with ajax request.
    }
}); 
```

我得到的问题是我的幻想框在验证发生之前出现......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T13:26:53.613

对我来说就是这样工作

```
if ($("#createMonitorProfileForm").validationEngine('validate')) {
    console.log("form is ok");
} 
```

# oracle - 与具有不同编号的表进行数据库合并。列数

> ID：11469563
> 
> 赞同：1
> 
> 时间：2012-07-13T11:25:18.157
> 
> 标签：oracle, merge

这是一个场景。我的数据库中有大约 300 个表，我想在我的数据库中合并另一个数据库。两个数据库都有相同的表，但数据类型和列数不同。现在如何将数据从其他数据库转换到我的数据库？

例如。

```
db1: 表 T1(col1 int,col2 char,......,col31 int)
db2: 表 T1(col1 int,col2 char,......,col31 int,col32 char,col33 char )

```

由于数据类型和列数不同，我不能使用“insert into db1.tbl select * from db2.tbl”。

我不想为每个表创建脚本。帮帮我 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:39:05.103

每天早上，我都会将大量表从生产数据库复制到我的数据仓库中。这是我在每次截断 + 插入之前运行的“检查和修复”程序。

```
procedure check_and_fix_table(p_naam in varchar2)
  /**
   * check if columns have changed on PROD and create and execute the matching ALTER TABLE statement
   */
  is

    v_coltype varchar2(100);
    v_sql     varchar2(200);

    function check_column(p_column in varchar2)
    return boolean
    is
        v_dummy number;
    begin
        select 1 into v_dummy
        from   user_tab_cols tc
        where  tc.table_name = upper(p_naam)
        and    tc.column_name = p_column;

        return true;
    exception
        when no_data_found then return false;
    end;

  begin
    -- loop through all columns that are altered (if nothing altered, then nothing will happen
    for i in (select tc.column_name
              ,      tc.data_type
              ,      tc.data_length
              ,      tc.data_precision
              from   user_tab_cols@DB_LINK_TO_PRODUCTION tc
              where  tc.table_name = upper(p_naam)
              and    tc.column_name not like 'SYS_NC%' -- These columns are created by oracle for function based indexes 
              minus
              select tc.column_name
              ,      tc.data_type
              ,      tc.data_length
              ,      tc.data_precision
              from   user_tab_cols tc
              where  tc.table_name = upper(p_naam))
    loop
        -- create column type
        if i.data_type in ('CHAR','VARCHAR2') then
            v_coltype := i.data_type||'('||i.data_length||')';
        elsif i.data_type = 'NUMBER' then
            if i.data_precision is not null then
               v_coltype := i.data_type||'('||i.data_precision||')';
            else
               v_coltype := i.data_type;
            end if;
        else -- DATE, CLOB, BLOB, etc
            v_coltype := i.data_type;
        end if;

        -- check if the column is altered or added
        if check_column(i.column_name) then
            -- execute the ALTER TABLE to fix the column       
            v_sql := 'alter table '||p_naam||' modify '||i.column_name||' '||v_coltype;
        else
            -- add new column
            v_sql := 'alter table '||p_naam||' add '||i.column_name||' '||v_coltype;
        end if;
        execute immediate v_sql;

        -- logging change
        prc_log(c_procedureid, 1, p_naam||' changed. Fixed by executing: '||v_sql);
    end loop;
  exception
    when others then 
      prc_log(c_procedureid, 3, 'Error at copy_package.check_and_fix_table - '||substr(sqlerrm, 0, 1900));
  end; 
```

然后在我的主程序中，我像这样使用它（其中 p_naam 是作为参数传递给程序的表名）：

```
check_and_fix_table(p_naam);

-- full copy of table from PROD
execute immediate 'truncate table ' || p_naam;
execute immediate 'insert /*+append*/ into ' || p_naam || ' select * from ' || p_naam || '@DB_LINK_TO_PRODUCTION'; 
```

希望这可以帮助 ：）

# php - MySQL访问=访问+1，凝视行为

> ID：11469564
> 
> 赞同：0
> 
> 时间：2012-07-13T11:25:30.047
> 
> 标签：php, mysql

我一天活跃网站。内页我有这个功能

```
public function visit_update($link){
    $query = mysql_query("UPDATE user SET visit = visit + 1 WHERE link = \"$link\" ");
} 
```

每个用户都有一个唯一的链接。由于测试，我只有一个活跃用户（页面目前正在测试中）。

昨晚，一位活跃用户在数据库中统计了 50 次访问。今天我检查它时，它是 560 访问。我还激活了一个谷歌分析，它计算了页面 50 左右的访问量和 3 个访问者，因为我在 3 个不同的浏览器中进行测试。

该功能不会自我重复，仅计算不是页面所有者的访问者。这怎么可能？

**更新：**

我查看了原始日志，并找到了两个 IP 地址（66.249.66.87 和 66.249.72.210），它们整晚都在访问我的网站，它们来自谷歌。如何区分真正的 Web 浏览器和 PHP 中的虚拟机器人？那可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:25:36.583

您可以通过查看访问浏览器的用户代理来检测爬虫，大多数网络爬虫表明它们是爬虫。可以在[此处](http://www.cult-f.net/detect-crawlers-with-php/)找到爬虫检测代码的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:51:11.327

您可以通过以下方式防止过于频繁地更新值：

```
UPDATE user
SET visit = visit+1, last_visit = CURDATE()
WHERE link = $link AND last_visit < CURDATE() - INTERVAL 30 MIN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:33:13.440

您应该在更新站点访问计数之前检查用户会话。

```
public function visit_update($link){
      if(!empty($_SESSION['user_id'])
      {
            $query = mysql_query("UPDATE user SET visit = visit + 1 WHERE link = \"$link\" ");
      }
} 
```

这将仅更新您网站上活跃成员的访问计数。

# stack - 如果给定一个堆栈作为 ADT，请在不使用其属性的情况下为队列实现入队和出队功能

> ID：11469565
> 
> 赞同：0
> 
> 时间：2012-07-13T11:25:30.590
> 
> 标签：stack

此外，您不能使用指针

这个问题是一个面试问题，听起来让我很困惑，因为给出了堆栈 ADT 并询问了队列上的操作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:54:05.810

在队列中，排队总是在最右边的填充位置插入数据，在堆栈中，数据也被插入到最后（顶部）。因此，在堆栈上模拟入队操作并不困难。一个 push() 操作就足够了。问题在于出队操作。模拟出队的一种方法是使用堆栈的两个实例，并在出队时请求空堆栈 1 进入堆栈 2，然后从堆栈 2 中弹出，然后使用堆栈 2 恢复堆栈 1。

> 入队操作的时间复杂度为 O(1)（与队列相同），但出队操作的时间复杂度为 O(n)，其中 n 是堆栈中的项目数，大于队列的 O(1) .

# java - java - 如何使用java正则表达式替换3个或更多字母与双打一起出现？

> ID：11469570
> 
> 赞同：1
> 
> 时间：2012-07-13T11:25:50.117
> 
> 标签：java, regex

java - 如何使用java正则表达式替换3个或更多字母与双打一起出现？像 oooooops with oops 和 yesssssss with yess

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:29:54.130

```
string.replaceAll("(\\w)\\1{2,}", "$1$1") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:28:53.850

就像所有其他语言一样......

要匹配三个或更多，您可以使用`/.{3,}/`. 要捕获相同的字符，请使用反向引用`/(.)\1{2,}/`，您可以轻松地将其替换为 2 次出现的捕获组。要仅捕获字母，您可以使用非空白字符`\S`：

```
str.replace("(\\S)\\1{2,}", "$1$1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:37:19.037

这是根据您的要求工作：

[正则表达式示例](http://regexr.com?31h9e)

# ruby-on-rails - Ruby On Rails：将字符串中的路径转换为递归哈希

> ID：11469573
> 
> 赞同：2
> 
> 时间：2012-07-13T11:26:04.957
> 
> 标签：ruby-on-rails, ruby, string, hash, path

有人能建议我这样做吗？（一切都在主题中：D）

我想要的是使用“路径”并将其转换为一组子键，

例如：我有那个参数：path = "earth/animal/human/men/young/" value = "martin" 我想要：

```
 `Global_hash = { earth => { human => { men => { young => "martin"
                                                }
                                       }
                            }
                 }` 
```

path = "earth/animal/human/men/old/" value = "John" 我想要：

```
 Global_hash = { earth => { human => { men => { young => "martin",
                                                old   =>  "John" 
                                         }
                                }
                     }
          } 
```

加上另一个

path = "earth/animal/human/women/old/" value = "Eve" 我想要：

```
`Global_hash = { earth => { human => { men   => { young => "martin",
                                                  old      =>  "John"
                                                },
                                       women => { old => "Eve"
                                                }
                                     }
                          }
               } 
```

`

最终目标是生成具有 2 个参数的 yml 文件：路径和值

该示例产生：`

```
earth:
  animal:
    human:
      men:    
        young: "martin"
        old: "John"
      women:
        old: "Eve" 
```

` 这将允许我们拥有一个 yml 文件，其中所有对象都按部分排序，这要归功于它们的路径。

感谢提前

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:38:20.107

```
path = 'earth/animal/human/men/young/'
value = 'martin'
path.split('/').reverse.reduce(value){ |r, e| {e.to_sym => r} } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:51:29.443

函数递归方法：

```
def insert(hash, path, value)
  head, *tail = path
  if tail.empty?
    hash.merge(head => value)
  else
    h = insert(hash[head] || {}, tail, value)
    hash.merge(head => hash.has_key?(head) ? hash[head].merge(h) : h)
  end
end

h1 = insert({}, "animal/human/women/old".split("/"), "Eve")
# {"animal"=>{"human"=>{"women"=>{"old"=>"Eve"}}}}

h2 = insert(h1, "animal/human/men/old".split("/"), "Adam")
# {"animal"=>{"human"=>{"women"=>{"old"=>"Eve"}, 
#                       "men"=>{"old"=>"Adam"}}}}

h3 = insert(h2, "animal/chimpanzee/smart".split("/"), "Caesar")
# {"animal"=>{"human"=>{"women"=>{"old"=>"Eve"}, 
#                       "men"=>{"old"=>"Adam"}}, 
#             "chimpanzee"=>{"smart"=>"Caesar"}}} 
```

# java - HQL（Hibernate）如何检查元素列表是否是另一个列表的子集？

> ID：11469575
> 
> 赞同：4
> 
> 时间：2012-07-13T11:26:23.383
> 
> 标签：java, hibernate, hql

我很难创建一个 HQL 查询来检查表“X”的记录“a”列表是否包含在同一个表“X”的另一个列表“b”中。

这是我正在使用的示例：

```
select r 
from Role r 
where (
    select p 
    from Permission p 
    where p.name = 'test') in elements(r.permissions) 
```

现在这个查询只是作为一个例子，澄清一下，每个角色都有 1 个或多个权限。

现在发生的情况是，如果子选择（权限 p）返回 1 行，则一切正常。但是，如果选择了更多，则查询失败，因为我正在尝试检查列表是否在列表中...

我确定我在这里遗漏了一些东西，所以请提供任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:33:14.630

也许存在更简单的东西，但我没有找到它：

```
select r from Role r where not exists (
    select p.id from Permission p 
    where p.name = 'test'
    and p.id not in (select p2.id from Role r2 inner join r2.permissions p2
                     where r2 = r)) 
```

为了更清楚起见，此查询检查没有名称为“test”的权限不在角色权限中，这与说所有名称为“test”的权限都在角色权限中相同。

# ruby-on-rails - 如何将json响应传递回客户端

> ID：11469578
> 
> 赞同：0
> 
> 时间：2012-07-13T11:26:31.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery

在我的 ruby​​ on rails 代码中，我想将 json 响应发送回客户端。由于我是 ruby​​ on rails 的新手，我不知道该怎么做。`error = 1 and success = 0`如果数据没有保存到数据库并且如果它成功保存它应该发送，我想作为 json 数据发送`success = 1 and error = 0`请看我下面的代码

这是我的控制器

```
class ContactsController < ApplicationController
  respond_to :json, :html
  def contacts
    error = 0
    success = 1

    @contacts = Contact.new(params[:contact])

    if @contacts.save
      respond_to do |format|
        format.json { render :json => @result.to_json }
      end
    else
      render "new"
    end
  end
end 
```

这是我的 javascript 代码

```
$('.signupbutton').click(function(e) {
        e.preventDefault();
        var data = $('#updatesBig').serialize();
        var url = 'contacts';
        console.log(data);
        $.ajax({
            type: 'POST',
            url: url,
            data: data,
            dataType: 'json',
            success: function(data) {
                console.log(data);
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:50:08.613

还有很多其他优雅的方式，但这是正确的：

```
class ContactsController < ApplicationController

  def contacts
    @contacts = Contact.new(params[:contact])
    if @contacts.save
       render :json => { :error => 0, :success => 1 }
    else
       render :json => { :error => 1, :success => 0 }
    end 
  end

end 
```

还添加一个路由到 routes.rb。如果你需要使用 html 响应，你必须包含 respond_to do |format|。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:50:31.250

您必须调整路线以接受 json 数据

```
match         'yoururl' =>  "contacts#contacts", :format => :json 
```

然后它会工作

# classpath - 错误 listenerStart - JaxWS - JBoss as 7

> ID：11469581
> 
> 赞同：7
> 
> 时间：2012-07-13T11:26:38.233
> 
> 标签：classpath, jax-ws, classloader, java-ee-6, jboss7.x

我正在尝试将基于 Jax-WS 的 Web 服务作为 7 迁移到 JBoss，但应用程序（作为战争部署）无法在启动时启动侦听器。

```
ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-14) Error listenerStart
ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-14) Context [/abc] startup failed due to previous errors
ERROR [org.jboss.msc.service.fail] (MSC service thread 1-14) MSC000001: Failed to start service jboss.web.deployment.default-host (...) 
```

**由于先前的错误**，错误消息引用失败，但是日志中没有打印错误。有问题的应用程序像这样捆绑 jax-ws-rt：

```
 <dependency>
        <groupId>sun-jaxws</groupId>
        <artifactId>jaxws-rt</artifactId>
        <version>2.1.7</version>
    </dependency> 
```

如果我更改要提供的 jax-ws-rt 的范围，这会按预期导致一个不错的 ClassNotFound。

```
WARN  [org.jboss.as.ee] (MSC service thread 1-13) JBAS011006: Not installing optional component com.sun.xml.ws.transport.http.servlet.WSServletContextListener due to exception: java.lang.ClassNotFoundException: com.sun.xml.ws.transport.http.servlet.WSServletContextListener (…) 
```

servlet 在 web.xml 中是这样定义的。

```
<listener>
    <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
</listener>
<servlet>
    <description>JAX-WS endpoint for data service</description>
    <display-name>abc</display-name>
    <servlet-name>abc</servlet-name>
    <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>abc</servlet-name>
    <url-pattern>/services/abc</url-pattern>
</servlet-mapping> 
```

**我不明白怎么了。我该如何解决这个问题并部署应用程序？**

想法：

1.  我是否缺少依赖项？
2.  我可以在不进行重大重构的情况下重新配置战争以使用 Jboss 内部 JaxWS 吗？
3.  如果我不能使用 jboss 内部 JaxWS 版本，我可以强制 Jboss 使用我在战争中捆绑的 Jaxws 版本吗？（如果是这样，我需要 JaxWs 的哪些依赖项？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T12:13:17.323

使用 JBoss AS7 (Java EE6)，您实际上不需要将 WSServlet 作为 servlet 类放在 web.xml 中。但是，您将在那里使用 @Webservice 注释的类的类名

您要做的就是确保在您的 JBoss 配置（例如，standalone.xml）中启用了 Web 服务扩展：

```
<extensions>
   [...]
   <extension module="org.jboss.as.webservices"/>
</extensions> 
```

# gcc - 将“从不兼容的指针类型初始化”警告升级为错误

> ID：11469583
> 
> 赞同：1
> 
> 时间：2012-07-13T11:26:42.697
> 
> 标签：gcc, warnings, compiler-warnings

我正在研究一个用 gcc 编译的代码库，它正在对包含函数指针的结构进行大量初始化。

每当有人对函数类型出错时，我都会收到警告“从不兼容的指针类型初始化”。我想将此升级为错误，因为它显然是错误的。

不幸的是，我似乎无法找到该警告的编译器选项名称与 `-Werror=' 一起使用。并且将所有警告变成错误在这里不是一个选项（出于目前不相关的原因）。

显然添加`-fdiagnostics-show-option`应该用编译器选项名称来注释每个编译器警告，实际上，它确实这样做了......对于除此之外的所有警告。所以现在我很困惑。有什么建议么？

这是 ARM 的 gcc 4.4.5，在 Linux 上运行。

# c++ - 到达字符串中的特定单词

> ID：11469591
> 
> 赞同：1
> 
> 时间：2012-07-13T11:26:51.333
> 
> 标签：c++, string

嗨，我有一个这样的字符串：

> word1--tab--word2--tab--word3--tab--word4--tab--word5--tab--word6

我需要从字符串中提取第三个单词。我想在阅读第二个标签后逐个字符阅读并获取单词。但我想它是低效的。你能告诉我一个更具体的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:28:23.070

`std::string`具有`find`返回索引的方法。您可以使用

```
 find("--", lastFoundIndex + 1) 
```

三次找到单词的开始索引，第四次找到结束索引，然后使用`substr`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T11:28:22.883

假设“标签”是`\t`；

```
std::istringstream str(".....");
std::string temp, word;

str >> temp >> temp >> word; 
```

# vb.net - 运行时错误 -2146234341 (8013101b) 从 VB.NET 到 VB6 的自动化错误，使用清单？

> ID：11469592
> 
> 赞同：11
> 
> 时间：2012-07-13T11:26:58.470
> 
> 标签：vb.net, .net-4.0, vb6, regfreecom

我正在尝试在无注册的情况下从 VB6 客户端访问 VB.NET DLL (.NET FX 4.0)。

我尝试按照[http://msdn.microsoft.com/en-us/library/ms973915.aspx](http://msdn.microsoft.com/en-us/library/ms973915.aspx)中的示例进行操作，但没有成功。我下载（文章中的链接）源代码并编译，没有成功（错误消息：运行时错误'-2146234341（8013101b）'：自动化错误“）。使用注册的 VB.NET DLL 从 VB6 IDE 运行有效。

我尝试了其他示例，其中 .NET DLL 创建为 COM 类（使用 VS2010 中的“COM 类”模板），是否嵌入了引用 DLL 的清单，但对我没有任何作用。

有人可以提供一些简单的源代码，其中包含在无注册场景中用于 VB6 客户端的 VB.NET DLL (.NET FX v4) 的清单示例吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-13T15:12:25.190

> 运行时错误“-2146234341 (8013101b)”：自动化错误

您的问题与清单无关，您需要先解决此问题。错误代码是 COR_E_NEWER_RUNTIME。换句话说，您的 [ComVisible] 类无法加载，因为它依赖于 CLR 版本 4。而且程序很可能已经加载了 CLR 版本 2，因为首先询问了另一个 [ComVisible] 类。它要求提供第 2 版。

您需要一个 app.exe.config 文件来强制加载 CLR 版本 4，即使有人要求提供版本 2。它应该如下所示：

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
  </startup>
</configuration> 
```

将其命名为与 vb6 exe 相同的名称（如“foo.exe.config”以匹配“foo.exe”）并将其放在与 .exe 相同的目录中。如果您想使用 VB6 IDE 来调试使用此库的 vb6 代码，那么您还需要 c:\program files\microsoft visual studio\vb98 中的 vb6.exe.config

# android - 9patch 大量资源而不损失质量

> ID：11469594
> 
> 赞同：9
> 
> 时间：2012-07-13T11:26:59.853
> 
> 标签：android, nine-patch, adobe-illustrator

我的设计师在 Illustrator 上工作，并使用脚本导出 mdpi、hdpi 和 xhdpi（以及 iOS res）的所有资源。对于按钮和 streachables 图像，我正在寻找生成 9 个补丁的最佳解决方案。

到目前为止，我一直在使用 SDK 中的 draw9patch 软件来生成 9patches。它仍然有效，但说真的，我希望有更好的方法。如果在我的项目中我有 20 个按钮，具有 3 或 4 个状态，以及 3 种密度类型，我无法想象这个解决方案需要多少小时。

一个解决方案是使用 Asset Studio 工具，但我不想提供我的 xhdpi 文件，并为其他密度文件夹获取生成不佳的图像。我的目标是为每个密度获得像素完美的 9 个补丁。

我们还尝试将 SVG 文件用于可拉伸图像，但 Asset Studio 似乎不接受它们。

如果我的设计师尝试直接在 Illustrator 中制作 9patch，他无法使用脚本导出，因为 1 px 的线也会被缩放，并且不会再测量 1px。

那么有没有一种解决方案可以制作 9 个补丁，而不损失图像质量，并且不需要花费 10 个小时呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T22:09:36.600

My solution is to spend a ton of hours learning draw9patch, and then it won't take hours to make the buttons. I did this myself, and suffered, but draw9patch is a really simple way to do it, and each image (for buttons) takes me no more than 15 seconds. draw9patch images should are great because you really only have to do them once, and they will work with all densities, as they will stretch accordingly. If you have text in your images then you have another problem. This is frowned upon because you lose the ability to translate your application with a simple stings.xml

## My solution:

**1.** Get awesome at draw9patch

**2.** Don't use image's with text. draw9patch can be used to center the text of a button correctly and this will increase the ability of your app to be used in different languages. Something that can easily boost your download/sales. This is important, because even if you give your app the ability to target one more language (let's say... Spanish) then it really makes that target audience happy.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T06:55:51.557

这是一个很好的九补丁编辑器，它为我节省了大量时间：[下载 jar 链接](http://weblookandfeel.com/downloads/ninepatch-demo.jar)和[一些描述](http://weblookandfeel.com/2012/03/20/weblookandfeel-and-nine-patch/)。最大的特点是“复制粘贴”功能，可以非常快速地为不同状态的图像提供相同的可拉伸区域。

我不认为有一些编辑器允许使用不同的图像尺寸，因为不同的屏幕尺寸可能存在显着差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T01:12:08.077

我使用 9 个补丁主要是为按钮和其他视图绘制背景。它们中的大多数是带有某种 2 像素分隔符的单色背景，其中一些也是带有分隔符的渐变。我将它们放在 res\drawable-nodpi 文件夹中，该文件夹是一个特殊文件夹，指示 android 不要对其内容执行任何缩放。

到目前为止，我的预期结果完全没有问题。我的 2 个像素分隔符是从 ldpi 到 hdpi 分辨率的多个设备中的 2 个真实设备像素（不是密度像素），这正是我想要的。

希望这可以帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T13:38:50.037

> 那么有没有一种解决方案可以制作 9 个补丁，而不损失图像质量，并且不需要花费 10 个小时呢？

步骤#1：编写一个脚本，从一个 PNG 获取 9 个补丁信息并将其应用到另一个 PNG，使用任意数量的 PNG 读取库，用于您最喜欢的桌面编程语言

步骤#2：`draw9patch`用于为一种密度的一张图像获取正确的规则

第 3 步：使用脚本将这些规则应用于相同密度的状态的其他变体

第 4 步：对其他密度重复第 2 步和第 3 步

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T08:55:47.517

我通过在图像编辑器（Photoshop / Paint .NET）中打开每个要进行 9 修补的图像，然后在两个维度上将画布大小增加 2 来压缩我的 9 补丁生成。

完成此操作后，您可以快速绘制拉伸线和填充线。如果您要为 100 张图像执行此操作，这会有点痛苦，但每个项目只需执行一次。我无法想象有很多项目需要*这么*多 9 个补丁才能花费这么多时间......

如果您真的想简化流程，您可以从 9patch 中删除填充指示器，并使用`style`属性将它们添加到您的视图中......

> 如果我的设计师尝试直接在 Illustrator 中制作 9patch，他无法使用脚本导出，因为 1 px 的线也会被缩放，并且不会再测量 1px。

这条线让我担心——你不应该将 mdpi 图像放大到 hdpi，它们没有任何意义。如果只有一个 mdpi 图像可用，它将使用它并在运行时自动缩放它。

# c# - 强制版本的 ASP.NET MVC

> ID：11469595
> 
> 赞同：0
> 
> 时间：2012-07-13T11:27:01.183
> 
> 标签：c#, asp.net, asp.net-mvc-4, assembly-references

我们有几个项目在这里工作。一个使用 MVC4 Beta，另一个使用 MVC4 RC。

我在本地机器上安装了 MVC4 RC。

我需要能够在本地构建这两个项目，但是使用 MVC4 Beta 的项目引用了`System.Web.Http.SelfHost`其中至少一种在 RC 中不再存在的 beta 方法。

如何强制使用 MVC4 Beta 的项目使用我们需要的 dll 而不是 GAC 中的 MVC4 RC 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:34:17.250

您这样做是在玩火，但您会在 web.config 中使用绑定重定向来指定要在 web.config 中使用的完整版本号。RC 版本和 Beta（取决于哪个）版本具有不同的版本标签。您可以指定以这种方式使用的程序集。

[http://msdn.microsoft.com/en-us/library/eftw1fys.aspx](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)

但是，使用 Beta 版本很危险，我什至敢说在生产环境中使用 RC 版本很危险。我希望这是一个 QA 环境，您正计划等待 RTM 投入生产。*永远不要*在生产环境中使用Beta 代码，请阅读您在安装时同意的 EULA ;-)

# android - “指定的孩子已经有父母”错误

> ID：11469611
> 
> 赞同：0
> 
> 时间：2012-07-13T11:28:18.327
> 
> 标签：android, layout

很抱歉在这个主题上提出另一个话题，但我已经阅读了其中的几个，但仍然不知道为什么我会收到这个错误。[我按照http://developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)上的“构建您的第一个应用程序”教程进行操作，然后尝试修改我的应用程序以为 DisplayMessageActivity 类提供布局。我创建了一个名为“activity_displaymessage.xml”的文件并将其实现到类中。

我是 android 新手，我试图了解这一切是如何工作的。我究竟做错了什么？

这是我的代码：

MainActivity.java

```
public class MainActivity extends Activity {

    public final static String EXTRA_MESSAGE = "com.example.sampleandroid.MESSAGE";

        .
        .
        .

    public void sendMessage(View view){
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText =  (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }
} 
```

DisplayMessageActivity.java

```
public class DisplayMessageActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_displaymessage);

        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        TextView textview = (TextView) findViewById(R.id.text_view);
        textview.setText(message);

        setContentView(textview);
    }
} 
```

activity_displaymessage.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:weightSum="2">

    <TextView android:id="@+id/text_view"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="30sp"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:30:09.263

您有两个。您的`setContentView`布局文件`activity_displaymessage`已经有子视图`R.id.text_view`，那么为什么将其设置为 setContentView()。

`setContentView(R.layout.activity_displaymessage);`和 `setContentView(textview);`

**删除此行`setContentView(textview);`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:42:36.957

当您执行 setContentView() 时，传递给它的视图会附加到父级。在您的情况下，当您致电时， text_view 的父母已经设置好了

> setContentView(R.layout.activity_displaymessage)

在您尝试 setContentView(textview) 的最后一行中，基本上发生的情况是，您使用 (TextView) findViewById(R.id.text_view) 获得的同一对象在它已经有父对象时被分配了父对象。这是不允许的，因此是错误的。

你不需要最后一行。

# jquery - Ajax提交之前的jQuery表单验证

> ID：11469616
> 
> 赞同：50
> 
> 时间：2012-07-13T11:28:27.197
> 
> 标签：jquery, ajax, jquery-validate, validation

JavaScript 位：

```
$(document).ready(function()
    {
            $('#form').submit(function(e)
            {     

                e.preventDefault();
                var $form = $(this);

                // check if the input is valid
                if(! $form.valid()) return false;
                    $.ajax(
                    {
                    type:'POST',
                    url:'add.php',
                    data:$('#form').serialize(),
                    success:function(response)
                    {
                        $("#answers").html(response);
                    }
                });     

            })
    }); 
```

HTML位：

```
 <input type="text" name="answer[1]" class="required" />
    <input type="text" name="answer[2]" class="required" /> 
```

所以这是我试图使用的代码。这个想法是在我使用 Ajax 发送表单之前验证我的所有输入。我现在已经尝试了很多版本，但每次我最终都会提交，即使表格没有完全填写。我所有的输入都是“必需的”类。谁能看到我做错了什么？

此外，我依赖于基于类的要求，因为我的输入名称是用 php 生成的，所以我永远无法确定我得到什么 name[id] 或输入类型。

我在“页面”中浏览问题时显示/隐藏问题。

```
<input type="button" id="next" onClick="toggleVisibility('form3')" class="next-btn"/> 
```

JS：

```
function toggleVisibility(newSection) 
        {
            $(".section").not("#" + newSection).hide();
            $("#" + newSection).show();
        } 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-07-13T11:31:48.700

您可以使用该[`submitHandler`](http://docs.jquery.com/Plugins/Validation/validate#options)选项。基本上把`$.ajax`调用放在这个处理程序中，即用验证设置逻辑反转它。

```
$('#form').validate({

    ... your validation rules come here,

    submitHandler: function(form) {
        $.ajax({
            url: form.action,
            type: form.method,
            data: $(form).serialize(),
            success: function(response) {
                $('#answers').html(response);
            }            
        });
    }
}); 
```

如果验证通过，`jQuery.validate`插件将调用提交处理程序。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-13T11:40:36.347

首先，您不需要`classRules`显式添加，因为`required`jquery.validate 插件会自动检测到。所以你可以使用这个代码：

1.  在表单提交时，您会阻止默认行为
2.  如果表单无效，则停止执行。
3.  否则，如果有效则发送 ajax 请求。

```
$('#form').submit(function (e) {
  e.preventDefault();
  var $form = $(this);

  // check if the input is valid using a 'valid' property
  if (!$form.valid) return false;

  $.ajax({
    type: 'POST',
    url: 'add.php',
    data: $('#form').serialize(),
    success: function (response) {
      $('#answers').html(response);
    },
  });
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-13T11:32:36.013

您可以尝试这样做：

```
if($("#form").validate()) {
 return true;
} else {
 return false;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-12-07T17:54:58.563

```
> Required JS for jquery form validation
> ## jquery-1.7.1.min.js ##
> ## jquery.validate.min.js ##
> ## jquery.form.js ##

$("form#data").validate({
    rules: {
        first: {
                required: true,
            },
        middle: {
            required: true,
        },          
        image: {
            required: true,
        },
    },
    messages: {
        first: {
                required: "Please enter first",
            },
        middle: {
            required: "Please enter middle",
        },          
        image: {
            required: "Please Select logo",
        },
    },
    submitHandler: function(form) {
        var formData = new FormData($("#image")[0]);
        $(form).ajaxSubmit({
            url:"action.php",
            type:"post",
            success: function(data,status){
              alert(data);
            }
        });
    }
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-23T16:49:28.443

这个特定的示例将只检查输入，但您可以对其进行调整，将类似这样的内容添加到您的 .ajax 函数中：

```
beforeSend: function() {                    
    $empty = $('form#yourForm').find("input").filter(function() {
        return this.value === "";
    });
    if($empty.length) {
        alert('You must fill out all fields in order to submit a change');
        return false;
    }else{
        return true;
    };
}, 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-03-04T16:31:52.130

我认为带有 jquery 验证的 submitHandler 是很好的解决方案。请从此代码中获取想法。灵感来自@Darin Dimitrov

```
$('.calculate').validate({

                submitHandler: function(form) {
                    $.ajax({
                        url: 'response.php',
                        type: 'POST',
                        data: $(form).serialize(),
                        success: function(response) {
                            $('#'+form.id+' .ht-response-data').html(response);
                        }            
                    });
                }
            }); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-13T11:36:12.057

我认为我首先验证表单，如果验证通过，那么我会发布 ajax 帖子。不要忘记在脚本末尾添加“return false”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-26T23:37:51.780

```
function validateForm()
{
    var a=document.forms["Form"]["firstname"].value;
    var b=document.forms["Form"]["midname"].value;
    var c=document.forms["Form"]["lastname"].value;
    var d=document.forms["Form"]["tribe"].value;
    if (a==null || a=="",b==null || b=="",c==null || c=="",d==null || d=="")
    {
        alert("Please Fill All Required Field");
        return false;
    }
    else{

        $.ajax({
        type: 'post',
        url: 'add.php',
        data: $('form').serialize(),
        success: function () {
          alert('Patient added');
          document.getElementById("form").reset();
        }
      });

    }
}

  $(function () {

    $('form').on('submit', function (e) {
      e.preventDefault();

      validateForm();

    });
  }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-28T19:50:13.070

您需要先触发表单验证，然后再检查它是否有效。在每个字段中输入数据后运行字段验证。表单验证由提交事件触发，但在文档级别。因此，您的事件处理程序在 jquery 验证整个表单之前被触发。但不要担心，所有这些都有一个简单的解决方案。

您应该验证表单：

```
if ($(this).validate().form()) {
  // do ajax stuff
} 
```

[https://jqueryvalidation.org/Validator.form/#validator-form()](https://jqueryvalidation.org/Validator.form/#validator-form())

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-12T11:31:12.433

```
$("#myformId").submit(function (event) {
    // submit modal form of create & edit 
    event.preventDefault();
    formObj = $(this);

    // check the form input is valid or not if not valid then return false;
    if (!formObj.validate().form()) return false;

    data = $(formObj).serializeArray();

    // do stuff with ajax or anything else what you wants 
}); 
```

解释：-首先验证表单，如果验证通过，则调用 ajax 请求，否则使用 return false 停止执行；

`var validator = $( "#myform" ).validate();`验证表单，如果有效则返回 true，否则返回 false。所以，我们只需要检查`if (!formObj.validate().form())`

有关更多详细信息，[请参阅此处的文档](https://jqueryvalidation.org/Validator.form/#validator-form())

我分享验证功能的自定义选项

```
$(function () {
    $('form.needs-validation').each(function() {   // <- selects every <form> on page which contains .needs-validation class
        var validator = $(this).validate({
            errorElement: 'span',
            errorPlacement: function (error, element) {
                error.addClass('invalid-feedback');
                element.closest('.form-group').append(error);
            },
            highlight: function (element, errorClass, validClass) {
                $(element).addClass('is-invalid');
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).removeClass('is-invalid');
            }
        });
    });
}); 
```

有关自定义 JQuery 验证的更多详细信息，[请参见此处](https://jqueryvalidation.org/validate/)

> 对于自定义默认验证消息，请参阅下面对我非常有帮助的答案 URL

1.  [更改默认错误消息](https://stackoverflow.com/a/2457053/14344959)
2.  [如何在 JQuery Validate 错误消息中包含字段标签](https://stackoverflow.com/a/5058557/14344959)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-04-11T12:27:35.707

表单原生 JavaScript`checkValidity`函数足以触发`HTML5`验证

```
$(document).ready(function() {
    $('#urlSubmit').click(function() {
        if($('#urlForm')[0].checkValidity()) {
            alert("form submitting");
        }
    });
}); 
```

# javascript - jQuery父级中的每个字段

> ID：11469619
> 
> 赞同：0
> 
> 时间：2012-07-13T11:28:37.353
> 
> 标签：javascript, jquery, parent, each

我正在尝试构建一个具有以下 html 结构的通用清除字段按钮：

```
<td colspan="2">
    <input type="text" name="unpublish_date" id="unpublish_date" class="calendar" />
    <img class="clear_date" src="ico_delete.gif" title="Reset date field"></span>
    <input type="hidden" name="_unpublish_date" id="_unpublish_date" />
</td> 
```

所以我认为执行该功能的正确方法是使用输入，在`.clear_date`

我想知道的是如何在之后选择每个输入`$(this).parent`

```
$('.clear_date').click(function(){
    $(this).parent().each() ... ?
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:30:37.593

只需使用`.siblings`过滤器：

```
$(this).siblings('input').each()...; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:30:30.760

你可以使用这个：

```
$(this).parent().find("input").each(function(){
    $(this).val("");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T11:30:05.770

尝试这个：

```
$(this).parent().find('input').each() ... 
```

见[jQerty`.find()`](http://api.jquery.com/find/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T11:30:35.313

```
$('.clear_date').click(function(){
    $(this).siblings().each(function() {
        $(this).val("");
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T11:42:20.467

```
$('input', $('.clear_dates').parent()).each(function
{
  ...
}); 
```

或者

```
$('.clear_dates').parent().find('input').each(function
{
  ...
}); 
```

您当然可以将 $('.clear_dates') 替换为 $(this) ，这样：

```
$('input', $(this).parent()).each(function
{
  ...
}); 
```

或者

```
$(this).parent().find('input').each(function
{
  ...
}); 
```

# xcode - 无法在 ios 上播放直播流

> ID：11469620
> 
> 赞同：1
> 
> 时间：2012-07-13T11:28:47.717
> 
> 标签：xcode

我在 ios 上有一个广播项目，它应该播放 mp3 流、shoutcast 流和最终的 mms 流。我已经能够使用 matt Gallagher 的 Audistreamer 类播放 mp3 流，但它不能播放像这样的那些广播链接（http： //68.168.117.130:8000) 不使用额外的软件，连macos都无法播放。那么，有没有类可以播放这种类型的链接呢？或者我必须自己创建一个。

格拉西亚斯。

# android - 注册到 GCM 时代码卡在唤醒锁上？

> ID：11469622
> 
> 赞同：3
> 
> 时间：2012-07-13T11:28:56.640
> 
> 标签：android, google-cloud-messaging

它没有从 GCM 服务器获取注册 ID，应用程序没有给出任何错误，这是我的 logcat。

```
 07-13 16:43:39.920: I/** pushAndroidActivity **(5310): inside oncreate() 
07-13 16:43:39.920: I/** pushAndroidActivity **(5310): started registration 
07-13 16:43:39.920: D/GCMRegistrar(5310): resetting backoff for com.example.registration_id
07-13 16:43:39.920: V/GCMRegistrar(5310): Registering app com.example.registration_id of senders 803641917196
07-13 16:43:42.735: V/GCMBroadcastReceiver(5310): onReceive: com.google.android.c2dm.intent.REGISTRATION
07-13 16:43:42.735: V/GCMBroadcastReceiver(5310): GCM IntentService class: com.example.registration_id.GCMIntentService
07-13 16:43:42.735: V/GCMBaseIntentService(5310): Acquiring wakelock 
```

这是主要的活动。我使用现有的 gcm.jar 文件来使用 GCMRegistrar 类方法。

```
package com.example.registration_id;

import android.os.Bundle;
import android.util.Log;
import android.widget.EditText;
import android.app.Activity;

import com.google.android.gcm.GCMRegistrar;

public class MainActivity extends Activity {

    private String TAG = "** pushAndroidActivity **";
    EditText edittext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.i(TAG, "inside oncreate() ");

        //check if registered,if not get registration id from GCM server
        if(GCMRegistrar.getRegistrationId(this).equals(""))
        {
            Log.i(TAG, "started registration ");
            GCMRegistrar.register(this, "803641917206");

        }
        else
        {
        final String regId = GCMRegistrar.getRegistrationId(this);
        Log.i(TAG, "registration id =====  "+regId);

        edittext=(EditText)findViewById(R.id.msg);
        edittext.setText(regId);
        }
    }

} 
```

这是服务等级-

```
package com.example.registration_id;

import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

public class GCMIntentService extends GCMBaseIntentService {

    private static final String TAG = "===GCMIntentService===";

    //default constructor
    protected GCMIntentService(String senderId) {
        super(senderId);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onError(Context arg0, String arg1) {
        // TODO Auto-generated method stub
        Log.i(TAG, "error ");
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onRegistered(Context arg0, String registrationId) {
        // TODO Auto-generated method stub
        Log.i(TAG, "Device registered: regId = " + registrationId);

    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:11:22.127

```
onReceive: com.google.android.c2dm.intent.REGISTRATION 
```

onReceiver 正在被调用，这意味着您正在收到一条消息。

```
 protected GCMIntentService(String senderId) {
      super(senderId);                } 
```

这是你的问题。您必须为您的 GCMBaseIntentService 子类声明一个公共的、无参数的构造函数。否则，您的 GCMIntentService 类将无法被后台服务正确构建和使用。

为什么？

```
protected GCMIntentService(String senderID){
super(senderId);} 
```

因为这个受保护的构造函数对处理所有传入意图的服务类不可见，因为它位于不同的包中。

将 senderId 硬编码到 GCMIntentService 类中的静态常量中，因为这不会再从谷歌改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T02:56:13.670

请注意：GCM IntentService 类：com.example.registration_id.GCMIntentService

GCMIntentService 类放在哪里（在哪个包中）？

检查清单文件以确保为 GCMIntentService 设置正确的包。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-10T08:19:29.073

也检查此解决方案将所有 GCM 相关类保留在主包中，您调用注册的地方。

[Android 编程：GCMIntentService 卡在 WakeLock](https://stackoverflow.com/questions/14064337/android-programming-gcmintentservice-stuck-at-wakelock)

# jquery - 如何使用 jQuery 和 ASP.net 实现不同的数据输入模式

> ID：11469623
> 
> 赞同：0
> 
> 时间：2012-07-13T11:29:03.020
> 
> 标签：jquery, asp.net, forms, data-entry

我正在研究如何实现根据数据输入模式更改的数据输入表单的正确方法。情况如下：

1.  考虑一个父子表单，其中有一个员工列表和一个显示员工详细信息的部分。

2.  单击列表中的员工编号将导致员工详细信息使用 HTML 表格显示在屏幕的右侧。

3.  员工详细信息将首先以只读形式显示。例如，Country of Birth 字段将显示为“SPAN”而不是 SELECT 元素。

4.  当用户单击 Edit 按钮时，Country of Birth 字段将更改为 SELECT 元素，其中包含可供选择的国家/地区列表。

这是我想使用 jQuery 实现的带有 ItemTemplate、EditItemTemplate 和 InsertItemTemplate 的 ASP.NET FormView 的行为。

本质上，数据输入模式将通过单击按钮来切换。我想我会通过对根据数据输入模式包含不同 DOM 元素的字段使用 CSS 规则来解决这个要求。正如我之前提到的，如果模式是只读的，则显示 SPAN，否则显示下拉元素或文本区域。使用 jQuery，我可以根据数据输入模式在不同的类之间切换（）。当然，这需要对同一字段使用两种不同类型的元素。

这是最好的方法吗？我很想听听专家的意见。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:39:38.717

你有两个选择。

1.  使用标准的 asp.net 表单。这已经有据可查，通常不包括您描述的两个控件。代替只读控件和编辑控件，服务器端将使用相同的用户控件或服务器控件呈现页面，但处于编辑模式而不是只读模式。 **当有安全要求或出于某些其他原因您不希望客户端决定哪些项目是可编辑的时，通常会使用这种方式**。（注意，有些人会脾气暴躁并谈论如何使用 AJAX 实现安全性，但这仍然是事实。如果您想要安全性和服务器端验证或处理，这更容易）。

2.  使用 jQuery / AJAX（和/或 MVC）。在此模型中，客户端决定接口如何工作的所有内容，然后将信息发送到 Web 服务。在这种情况下，您可能（如您所描述的）有两个显示和隐藏的控件。通常这比它值得做的工作更多，如果控件是可编辑的，您可以启用和禁用。它（当然）取决于界面元素的类型。

你可能会说“好的，很好——但我应该使用哪个？”

这取决于。

如果您知道其中一种技术，则应该使用您知道的技术。

如果您不了解它们，那么我会说表单对于像这样的简单项目来说更容易。（很多人会争论，这只是我的观点。）

但是，现在认为带有 AJAX 的 MVC 是更好的堆栈，因为它允许非常复杂的 UI 交互。比你描述的要复杂。它还可以提供更好的用户体验，因为 UI 可以更具响应性。

* * *

> 数据输入的状态在应用程序中很重要。我希望能够去 'If fvwMyForm.DefaultMode = FormViewMode.ReadOnly' then ...就像在 ASP.net 中所做的那样。

这根本不符合逻辑。除非您使用表单，否则服务器（或 StateBag 中）不会有任何与编辑状态相对应的变量。如果你想要这个，那么你必须使用表单而不是 jQuery 来改变你的状态。您将需要服务器往返来更改此变量。

# regex - Perl：使用变量传递正则表达式搜索和替换

> ID：11469624
> 
> 赞同：6
> 
> 时间：2012-07-13T11:29:02.820
> 
> 标签：regex, perl, capture

我有一个 Perl 脚本，它从 INI 文件中读取正则表达式搜索和替换值。

在我尝试使用捕获变量（$1 或 \1）之前，这工作正常。这些被替换为 $1 或 \1。

有什么想法可以让这个捕获功能通过变量传递正则表达式位吗？示例代码（不使用 ini 文件）...

```
$test = "word1 word2 servername summary message";

$search = q((\S+)\s+(summary message));
$replace = q(GENERIC $4);

$test =~ s/$search/$replace/;
print $test; 
```

这导致...

```
word1 word2 GENERIC $4 
```

不是

```
word1 word2 GENERIC summary message 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:43:18.943

使用双重评估：

```
$search = q((\S+)\s+(summary message));
$replace = '"GENERIC $1"';

$test =~ s/$search/$replace/ee; 
```

`$replace`注意 .和`ee`末尾的双引号`s///`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:50:46.960

尝试对 regex-sub 进行 eval，警告替换来自外部文件

```
eval "$test =~ s/$search/$replace/"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T23:39:08.210

如果您喜欢 amon 的解决方案，我假设“GENERIC $1”不是配置（尤其是其中的“$1”部分）。在这种情况下，我认为有一个更简单的解决方案，无需使用前瞻：

```
$test = "word1 word2 servername summary message";
$search = qr/\S+\s+(summary message)/;
$replace = 'GENERIC';
$test =~ s/$search/$replace $1/; 
```

虽然 (?=PATTERN) 当然没有什么不好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:14:07.293

另一个有趣的解决方案是使用前瞻`(?=PATTERN)`

然后，您的示例将仅替换需要替换的内容：

```
$test = "word1 word2 servername summary message";

# repl. only ↓THIS↓
$search = qr/\S+\s+(?=summary message)/;
$replace = q(GENERIC );

$test =~ s/$search/$replace/;
print $test; 
```

# python - 使用 mplot3d 缩放 facecolors 的颜色图

> ID：11469626
> 
> 赞同：6
> 
> 时间：2012-07-13T11:29:16.137
> 
> 标签：python, matplotlib, mplot3d

我有一个简单的任务，应该有一个简单的解决方案，但我已经尝试了好几天了。我试着具体一点。

*   我尝试使用 matplotlib 的 mplot3d 和 plot_surface 绘制曲面。当我绘制数据集“z”的表面并尝试将颜色图缩放到某个最大值时，我将“vmax”属性更改为该值。这很好用。

*   当我尝试绘制一个数据集 (z) 的表面并使用第二个数据集 (fc) 的 facecolors 时，这也可以正常工作。

*   当我想缩放 facecolors 的颜色图时，facecolors 值会覆盖 vmax 属性。因此 Vmax 无效（尝试 1）。线条也消失了，但这是另一个问题。

*   同样尝试更改 facecolor 数据集 (fc) 的值也没有达到预期的效果 (attempt2)。

我尝试得到一个带有缩放颜色图的图形（如下图“缩放”），但缩放到 facecolors，而不是 z 值。

下面的代码就是我现在所拥有的，结果如下所示：

![在此处输入图像描述](../Images/e9c2d175685ed1663b11cfa751babf0a.png)

有谁知道我在这里想念什么？任何想法表示赞赏！

```
import pylab as plt
import numpy as np
from mpl_toolkits.mplot3d import Axes3D

plt.ion()

# creating dataset
profile = np.arange(20)**2
z = profile.repeat(20).reshape(20,20)
fc= np.rot90(z.copy())

x = np.arange(z.shape[0])
y = np.arange(z.shape[1])
X, Y = np.meshgrid(x,y)

# plotting
vmax = 100
fig = plt.figure()
ax = fig.add_subplot(1,4,1, projection='3d', azim=210)
ax.plot_surface(X,Y,z, cmap=plt.cm.jet, cstride=1, rstride=1)
ax.set_title('normal')

ax = fig.add_subplot(1,4,2, projection='3d', azim=210)
ax.plot_surface(X,Y,z, cmap=plt.cm.jet, cstride=1, rstride=1, vmax=vmax)
ax.set_title('scaled')

ax = fig.add_subplot(1,4,3, projection='3d', azim=210)
ax.plot_surface(X,Y,z, facecolors=plt.cm.jet(fc), cstride=1, rstride=1, vmax=vmax)
ax.set_title('rotated (attempt1)')

ax = fig.add_subplot(1,4,4, projection='3d', azim=210)
fc[fc> vmax] = vmax
ax.plot_surface(X,Y,z, facecolors=plt.cm.jet(fc), cstride=1, rstride=1)
ax.set_title('rotated (attempt2)') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:00:25.793

一个 - 肮脏的 - 解决方案是重新调整剪裁的面部颜色，使最大值等于您的高度图的最大值（除了您建议的尝试 2 之外）：

```
ax.plot_surface(X,Y,z, facecolors=plt.cm.jet(np.clip(fc,0,vmax)*np.max(z)/vmax), cstride=1, rstride=1, vmax=vmax) 
```

这是否给出了您正在寻找的结果？

# ios - 在 iOS 中使用异步网络调用创建一个预先输入的 UISearchDisplay

> ID：11469627
> 
> 赞同：2
> 
> 时间：2012-07-13T11:29:36.000
> 
> 标签：ios, asynchronous, nsurlconnection, uisearchdisplaycontroller, type-ahead

我的 iOS 应用程序的一个视图是 UISearchDisplay。我将其设计为预先输入的搜索，这样每当用户输入一个新字符时，表格就会重新填充。我通过实现 UISearchDisplayDelegate 协议方法做到了这一点：

```
searchDisplayController:shouldReloadTableForSearchString: 
```

在这种方法中，我将提供的字符串附加到我的查询 URL 中。然后我创建一个新的 NSURLConnection 并提交一个新的异步请求。我通过委托方法接收和附加数据：

```
connection:didReceiveData: 
```

连接完成下载数据后，通过以下方法：

```
connectionDidFinishLoading 
```

我将数据传递给 NSXMLParser 的一个实例。接收到的数据是我的数据库中与给定字符串匹配的所有联系人的 XML 文件。数据解析完成后，我重新加载表。

**我的问题：**如果用户输入文本的速度足够快，就会有多个连接和解析任务同时进行。这是一个问题，因为我有一个 NSMutableData 实例，我将数据附加到并解析。希望你能看到我的目标。

有没有人对改进我的实施和/或解决这个关键部分问题有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:40:35.463

`NSXMLParser`不是异步的。这让很多人感到困惑，因为他们认为这是由于它使用了委托回调方法。但是，实际上该`parse`方法在所有解析完成之前不会返回。

因此，虽然您可能同时有多个连接，但除非您自己对其进行多线程处理，否则不会发生多个解析操作。

要解决多连接问题，不如每个连接只有一个 NSMutableData，而不是一个？有很多方法可以做到这一点：您可能想查看以下问题的答案以获得想法。

*   [Cocoa：使用相同委托函数的多个异步 NSURLConnections 需要检查吗？](https://stackoverflow.com/questions/1192294/cocoa-checks-required-for-multiple-asynchronous-nsurlconnections-using-same-del)
*   [管理多个异步 NSURLConnection 连接](https://stackoverflow.com/questions/332276/managing-multiple-asynchronous-nsurlconnection-connections)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-29T14:50:04.757

[在Cancelable asynchronous search with UISearchDisplayController](https://deeperdesign.wordpress.com/2011/05/30/cancellable-asynchronous-searching-with-uisearchdisplaycontroller/)中描述了一个很好的实现

解决方案的要点是这样的：

*   创建一个`NSOperationQueue`实例，您将在其中执行搜索操作并将其保存到`UISearchDisplayDelegate`实现的属性中，我们将其命名为`searchQueue`。

*   实现`searchDisplayController:shouldReloadTableForSearchString:`方法。请注意，此方法返回一个`BOOL`值，该值指示`UISearchDisplayController`实例重新加载表视图。该方法可以像这样实现：

    ```
    -(BOOL)searchDisplayController:(UISearchDisplayController *)controller 
    shouldReloadTableForSearchString:(NSString *)searchString {
        if ([searchString isEqualToString:@""] == NO) {
            [self.searchQueue cancelAllOperations];
            [self.searchQueue addOperationWithBlock:^{

              NSArray *results = // fetch the results from
              // somewhere (that can take a while to do)

              // Ensure you're assigning to a local variable here.
              // Do not assign to a member variable.  You will get
              // occasional thread race condition related crashes 
              // if you do.            

              [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                // Modify your instance variables here on the main
                // UI thread.
                [self.searchResults removeAllObjects]; 
                [self.searchResults addObjectsFromArray:results];

                // Reload your search results table data.
                [controller.searchResultsTableView reloadData];
              }];
            }];

            return NO;

        } else {
            [self.searchResults removeAllObjects];
            return YES;
        }
    } 
    ```

*   当用户关闭搜索 UI 时，不要忘记取消任何挂起的操作。

    ```
     - (void)searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller {
             [self.searchQueue cancelAllOperations];
         } 
    ```

# textarea - 如何从 Ember js 中的文本区域编辑数组？

> ID：11469633
> 
> 赞同：1
> 
> 时间：2012-07-13T11:29:44.590
> 
> 标签：textarea, ember.js

我正在尝试从 textArea 更新一个数组，其中的每一行都是一个新项目。这是我尝试做的，但 textArea 不更新数组：

**车把**：

```
<script type="text/x-handlebars">
    {{view Ember.TextArea valueBinding="App.listController.formattedContent"}}
    </br>
    {{#each App.listController}}
        {{this}}
    {{/each}}
</script> 
```

**JavaScript**：

```
App = Ember.Application.create({});

App.listController = Ember.ArrayController.create({
    content: ['some', 'items', 'in', 'an', 'array'],
    formattedContent: function() {
        return this.get('content').join('\n');
    }.property('content')
}); 
```

和[jsFiddle](http://jsfiddle.net/YDe5p/2/) 我知道它不可能那么简单，但我不知道从哪里开始。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:47:03.110

干得好：

**小提琴**：http: [//jsfiddle.net/Sd3zp](http://jsfiddle.net/Sd3zp)

**灰烬控制器**：

```
App.listController = Ember.ArrayController.create({
    content: ['some', 'items', 'in', 'an', 'array'],

    init: function() {
        var content = this.get('content');
        if(content.length > 0){
           this.set('rawContent', content.join('\n'));
        }            

        this._super();
    },

    rawContentDidChange: function(){
       var rawContent = this.get('rawContent');

       var content = rawContent.split('\n');
       this.set('content',content);
    }.observes('rawContent'),
});​ 
```

**车把模板：**

```
<script type="text/x-handlebars">
  {{view Ember.TextArea valueBinding="App.listController.rawContent" rows="5"}}
  <br />
  <br />
  <strong>Output listController content items:</strong>
  {{#each App.listController.content}}
     {{this}} <br />
  {{/each}}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T06:10:06.393

接受的答案不适用于 ember-1.0.0-rc3。

计算属性现在可以具有设置器，因此问题中的示例将更改为

**JS斌：http:** [//jsbin.com/iworub/2/](http://jsbin.com/iworub/2/)

**车把：**

```
<script type="text/x-handlebars" data-template-name="application">
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="index">
   {{view Ember.TextArea valueBinding="formattedContent" rows="7"}}
  </br>
  {{#each content}}
    {{this}}</br>
  {{/each}}
</script> 
```

**JavaScript**：

```
App = Ember.Application.create({});

App.IndexRoute = Ember.Route.extend({
  setupController: function(controller) {
    controller.set('content', ['some', 'items', 'in', 'an', 'array']);
  }
});

App.IndexController = Ember.ArrayController.extend({
  formattedContent: function(key, value) {

    //getter
    if (arguments.length === 1) {
      return this.get('content').join('\n');

    //setter
    } else {
      this.set('content', value.split('\n'));
    }
  }.property('content')
}); 
```

# oracle - 如何在 Oracle 中编写表文字？

> ID：11469634
> 
> 赞同：7
> 
> 时间：2012-07-13T11:29:46.597
> 
> 标签：oracle

可以使用以下命令创建具有一列一行的表：

```
select 'create' as col from dual; 
```

这可用于构建表连接：

```
with
  a as (select 'create' as ac from dual),
  b as (select 'delete' as bc from dual)
select * from a left outer join b on (ac = bc); 
```

现在我想要两行。我是这样做的：

```
select 'create' as col from dual
union
select 'delete' as col from dual; 
```

但是有没有更紧凑的符号呢？我试过

```
select ('create', 'delete') as col from dual; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T12:37:31.380

您可以使用集合类型和 TABLE 运算符，例如（适用于 Oracle 10g）：

```
SQL> SELECT column_value FROM TABLE(SYS.ODCIVARCHAR2LIST('abc', 'def', 'ghi'));

COLUMN_VALUE
--------------------------------------------------------------------------------
abc
def
ghi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:40:08.437

生成行的几种方法。您可以对具有大量行数的表使用 rownum：

```
SELECT roWnum AS a
  FROM user_objects
  WHERE rownum <= 3 
```

您可以使用分层查询：

```
SELECT level AS a
  FROM dual
  CONNECT BY LEVEL <= 3 
```

编辑：将 int 序列更改为 alpha 序列：

```
SELECT CHR( ASCII('a') + level - 1 )
  FROM dual
  CONNECT BY LEVEL <= 3 
```

# sql - 任何 RDBMS 技术的通用语言

> ID：11469635
> 
> 赞同：3
> 
> 时间：2012-07-13T11:29:48.843
> 
> 标签：sql, sql-server, sql-server-2008, rdbms

我们正在为任何 RDBMS 技术寻找一种通用语言。我的意思是，如果我在 SQL Server 中编写查询，该查询还必须在任何 RDBMS（如 oracle、mysql 等）上工作。

任何人都可以帮助我开始吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T11:34:16.410

大多数数据库服务器（大部分）都支持 SQL 的 ANSI 标准。只要您坚持数据库服务器提供的 SQL 语言功能子集，您的查询就可以移植。

但是，您的 dbms 的许多更复杂的功能将无法使用，因为它们不是 ANSI 标准的一部分，因此每个 dbms 供应商都以专有方式实现 - 交叉表就是这个问题的一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:19:48.117

两件事，您可以使用 ANSI 标准，但并非所有 RDBMS 都支持所有 ANSI 标准。此外，ANSI 标准仅适用于 SQL，而不适用于他们的编程语言，例如用于 sql server 的 Tsql 和用于 oracle 的 pl/sql 等。

第二点也是最重要的一点，为什么要在不同的 RDBMS 中使用相同的代码。数据库系统是完全不同的。一些 RDBMS 在某些事情上做得很好，在其他事情上做得不好。因此，如果您实现一个代码，那么它可能不是某些 RDBMS 的最佳优化代码。因此，我建议根据 RDBMS 的优缺点编写代码。如果它会有所不同，那就这样吧。

最重要的是，您是否尝试在决定 RDBMS 之前做一些基准测试。此外，在不同的 RDMBS 上拥有相同的数据和代码将解决什么目的。你会在许可证上浪费很多钱。服务器等作为代码将在所有 RDBMS 上执行相同的工作。

# paypal-ipn - 本地主机中的 Paypal 沙盒测试工具 IPN 模拟器

> ID：11469636
> 
> 赞同：38
> 
> 时间：2012-07-13T11:29:50.130
> 
> 标签：paypal-ipn, paypal-sandbox

如何在本地机器上使用即时付款通知模拟器？IPN 处理程序 URL 中将提供什么？我无法访问我们的路由器。

谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-06-07T11:07:57.437

[您可以使用ngrok](https://ngrok.com/)在 localhost 上进行测试。

只需在本地运行 ngrok，然后粘贴 ngrok 为您提供的测试 url（类似于[http://1bc7d09d.ngrok.com/](http://1bc7d09d.ngrok.com/)）

它为您的本地主机提供了一条隧道。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-11-12T22:44:09.647

Paypal 的 IPN 模拟器不适用于 localhost。但是，您可以模拟模拟器:-)。为此，您需要安装浏览器插件/扩展程序，例如firefox的[海报或 google chrome 的](https://addons.mozilla.org/en-US/firefox/addon/poster/)[Advanced Rest Client](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo)。

打开应用程序并输入您正在收听 IPN 响应的 url：

```
http://localhost/ipn 
```

将以下内容作为您的 POST 数据并提交请求：

```
residence_country=US&invoice=abc1234&address_city=San+Jose&first_name=John&payer_id=TESTBUYERID01&mc_fee=0.44&txn_id=421462822&receiver_email=seller%40paypalsandbox.com&custom=xyz123+CUSTOMHASH&payment_date=12%3A40%3A25+27+Aug+2013+PDT&address_country_code=US&address_zip=95131&item_name1=something&mc_handling=2.06&mc_handling1=1.67&tax=2.02&address_name=John+Smith&last_name=Smith&receiver_id=seller%40paypalsandbox.com&verify_sign=AFcWxV21C7fd0v3bYYYRCpSSRl31AgAAjEU7A5rthY2aP4j1jOIrjuGx&address_country=United+States&payment_status=Completed&address_status=confirmed&business=seller%40paypalsandbox.com&payer_email=buyer%40paypalsandbox.com&notify_version=2.4&txn_type=cart&test_ipn=1&payer_status=unverified&mc_currency=USD&mc_gross=12.34&mc_shipping=3.02&mc_shipping1=1.02&item_number1=AK-1234&address_state=CA&mc_gross1=9.34&payment_type=instant&address_street=123%2C+any+street 
```

**更新**：我刚刚开始使用另一个更简单的选项，[https://localtunnel.me](https://localtunnel.me)。要安装和运行模块，请执行以下操作。它将显示您的公共 URL。对该公共 URL 的所有请求都将转发到您的本地主机。

```
npm install -g localtunnel
lt --port 80 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-07-13T17:29:08.140

您无法在本地主机上测试 IPN，因为 IPN 是关于 PayPal 的服务器向您定义的 URL 发起服务器端 POST 的全部内容。
因此，您的 IPN 脚本*必须*可以被外界访问（或者您可以使用诸如 ngrok.me/localtunnel.me 之类的隧道）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-08-27T22:25:18.823

您可以通过运行我在您的本地主机上创建的以下脚本来模拟 PayPal 的 IPN 帖子（您需要安装 curl）。只要您的侦听器指向沙箱，它就应该验证。将您的听众更改为实时贝宝，它应该无法验证。

```
<?php
// SIMULATE PAYPAL IPN LOCALLY
//
// Sometimes you need to test on your local host and this can be difficult due
// to IP routing issues.  Use this code on your local machine to simulate the
// same process that the sandbox IPN simulator does when posting to your URL.
//
// Run this code in command line or via the browser.  It will post IPN data just
// like Paypal would.  If the code you've written to process your IPN data
// posts back to the sandbox, it should come back as valid.

// Put the full url to test in $paypal_url, include file extensions if necessary
$paypal_url = 'http://localhost/paypal_ipn/process';   // IPN listener to test

//example posted data from paypal IPN
$test = 'residence_country=US&invoice=abc1234&address_city=San+Jose&first_name=John&payer_id=TESTBUYERID01&mc_fee=0.44&txn_id=421462822&receiver_email=seller%40paypalsandbox.com&custom=xyz123+CUSTOMHASH&payment_date=12%3A40%3A25+27+Aug+2013+PDT&address_country_code=US&address_zip=95131&item_name1=something&mc_handling=2.06&mc_handling1=1.67&tax=2.02&address_name=John+Smith&last_name=Smith&receiver_id=seller%40paypalsandbox.com&verify_sign=AFcWxV21C7fd0v3bYYYRCpSSRl31AgAAjEU7A5rthY2aP4j1jOIrjuGx&address_country=United+States&payment_status=Completed&address_status=confirmed&business=seller%40paypalsandbox.com&payer_email=buyer%40paypalsandbox.com&notify_version=2.4&txn_type=cart&test_ipn=1&payer_status=unverified&mc_currency=USD&mc_gross=12.34&mc_shipping=3.02&mc_shipping1=1.02&item_number1=AK-1234&address_state=CA&mc_gross1=9.34&payment_type=instant&address_street=123%2C+any+street';
/*
 * More detailed breakout of the raw data
  _POST EXAMPLE ARRAY FROM PAYPAL:
  Array
  (
  [residence_country] => US
  [invoice] => abc1234
  [address_city] => San Jose
  [first_name] => John
  [payer_id] => TESTBUYERID01
  [mc_fee] => 0.44
  [txn_id] => 421462822
  [receiver_email] => seller@paypalsandbox.com
  [custom] => xyz123 CUSTOMHASH
  [payment_date] => 12:40:25 27 Aug 2013 PDT
  [address_country_code] => US
  [address_zip] => 95131
  [item_name1] => something
  [mc_handling] => 2.06
  [mc_handling1] => 1.67
  [tax] => 2.02
  [address_name] => John Smith
  [last_name] => Smith
  [receiver_id] => seller@paypalsandbox.com
  [verify_sign] => AFcWxV21C7fd0v3bYYYRCpSSRl31AgAAjEU7A5rthY2aP4j1jOIrjuGx
  [address_country] => United States
  [payment_status] => Completed
  [address_status] => confirmed
  [business] => seller@paypalsandbox.com
  [payer_email] => buyer@paypalsandbox.com
  [notify_version] => 2.4
  [txn_type] => cart
  [test_ipn] => 1
  [payer_status] => unverified
  [mc_currency] => USD
  [mc_gross] => 12.34
  [mc_shipping] => 3.02
  [mc_shipping1] => 1.02
  [item_number1] => AK-1234
  [address_state] => CA
  [mc_gross1] => 9.34
  [payment_type] => instant
  [address_street] => 123, any street
  )
 */

//#
// PayPal IPN processor in PHP
// fake paypal post to test scripts
//#
//----------------------------------------------------------
// Create FAKE post from PayPal.
//----------------------------------------------------------

$req = $test; // use test data

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $paypal_url);
curl_setopt($ch,CURLOPT_POST, substr_count($req,'&')+1);
curl_setopt($ch,CURLOPT_POSTFIELDS, $req);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);
?> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-06-13T04:15:55.397

我在本地主机上进行测试。您可以使用 dyn.com 或 noip.com 之类的服务，或者将子域指向您的本地地址（如果它是静态的）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-07T16:22:58.627

```
/ngrok http -host-header=yourwebsite.com 80 
```

将使用正确的主机标头隧道到 localhost

# ios - 为什么我可以在没有任何配置文件的情况下从 App Store 运行应用程序？

> ID：11469638
> 
> 赞同：0
> 
> 时间：2012-07-13T11:30:00.480
> 
> 标签：ios, ipad

我最近遇到了供应配置文件的一些问题。

现在我明白要在另一台 iPad 上测试我本地开发的应用程序，我需要在该 iPad 上安装配置文件。

但是 App Store 中的应用程序呢？为什么我可以在没有任何配置文件的情况下运行它们？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:31:18.950

因为它们由 Apple 进行数字签名，并使用从您的 Apple ID 帐户中的信息生成的唯一密钥进行部分加密。当您从 AppStore 下载应用程序时，iOS 内核首先签名检查二进制文件（它查找 Apple 的有效数字签名），然后解密二进制文件的加密部分（实际上这是破解应用程序所基于的过程）。

# facebook - 如何获取全名的 FQL 流

> ID：11469648
> 
> 赞同：1
> 
> 时间：2012-07-13T11:30:36.953
> 
> 标签：facebook, stream, facebook-fql

我想显示来自 FQL 的流数据

```
fql?q=SELECT post_id, app_id, source_id, updated_time, created_time, filter_key,
      attribution, actor_id, target_id, message, app_data, action_links, 
      attachment, impressions, comments, likes, place, privacy, permalink, xid,
      tagged_ids, message_tags, description, description_tags, type 
      FROM stream WHERE filter_key in (
            SELECT filter_key FROM stream_filter WHERE uid=me() 
            AND type='newsfeed') 
```

但问题是该表没有用户/页面的名称，只有 ID。

有什么方法可以为这些结果命名吗？不仅是actor_id，还有发表评论的人的名字。

我是否需要对流中的所有这些 id 进行多查询和搜索，然后从用户表和页表中获取。然后为每个流结果循环这些结果，似乎有点重。有更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:57:16.650

我不确定是否有办法一次性获取所有用户和页面，但您可以运行两个单独的查询，它们将返回用户/页面，然后对两组结果执行数组合并。

**用户**

SELECT uid,name from user where uid in (SELECT source_id FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed')

**页面**

SELECT page_id,name from page where page_id in (SELECT source_id FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed')

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T08:06:44.187

您可以通过以下方式进行操作：

```
 NSString *query =
    @"{"
    @"'friends':'SELECT post_id,actor_id,target_id,message,created_time, likes, comment_info FROM stream WHERE source_id IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND created_time > 1  ORDER BY created_time DESC LIMIT 50',"
    @"'friendinfo':'SELECT uid, name, pic_square FROM user WHERE uid IN (SELECT actor_id FROM #friends)',"
    @"}"; 
```

获得结果后，将其存储到两个数组中，如下所示：

```
FBFriendsNewsArray =(NSArray *) [[[result objectForKey:@"data"]objectAtIndex:0]objectForKey:@"fql_result_set"];

                              FBFriendsInfoArray=(NSArray *) [[[result objectForKey:@"data"]objectAtIndex:1]objectForKey:@"fql_result_set"]; 
```

在好友信息数组中显示该用户 ID (actor_id) 的 Feed 搜索时。希望这会有所帮助。

# javascript - 在 div 标签之间切换会破坏我的代码

> ID：11469652
> 
> 赞同：0
> 
> 时间：2012-07-13T11:30:40.473
> 
> 标签：javascript, jquery, html

我最近一直在做一个项目，并且被要求学习 jQuery 来完成它。对于初学者来说，这不是一件容易学习的事情哈。无论如何，我一直在尝试根据用户单击的一个来切换一些 div 标签。

第一个，“添加字段”应该切换到一个 div，其中包含一个添加新字段的按钮。现在，我没有在此处放置大量代码，而是将其放入[http://jsfiddle.net/9acEk/8/](http://jsfiddle.net/9acEk/8/)，这样您就可以看到一个工作示例，或者说不工作。我的问题是，当我更改选项卡并单击“添加字段”选项卡时，按钮不再起作用。该页面打开时带有一个按钮，单击该按钮会添加一个文本框。但是，即使我只是单击“添加字段”选项卡，该按钮也不再执行任何操作，我使用警告框来显示代码，并且完全相同。我不知道为什么在单击选项卡后这不起作用，这对我来说毫无意义，因为如上所述，代码完全相同。

抱歉，如果这个问题没有意义，任何关于它的问题都可以问我，我会尽力解决它。非常感谢您提供的任何帮助，非常感谢。

编辑：似乎 jsfiddle 不起作用（对不起，这也是很新的）所以我将把代码放在这里。

```
 <html>
<body>
    <table width ="100%" alight="right">
        <td width ="51.5%"></td>
        <td> <div id="addField" class="tabOptions">Add field</div></td>
        <td><div id="fieldProperties" class="tabOptions">Field Properties</div></td>
        <td> <div id="formProperties" class="tabOptions">Form Properties</div></td>
    </table>
    <hr>

    <table align ="left"style="background-color: white" width="100%">
        <tr>
        <tr>
        <div id="formName" class="formDetails">
                <h2>Untitled</h2>
                <h4>This is your form description</h4>
        </div>
    </tr>
    <td width ="50%">
        <ul id ="firstColumn">
            <div id="identifier">
            </div>
        </ul>
    </td>
    <td>
        <ul id ="secondColumn" width="5%">
            <div id="placeholder">
                <div id="mainPanel">
                    <li><input type="button" class="formCreationButton" id="textAdd" value="Single line text" /></li>

                </div>
            </div>
        </ul>
    </td>
    <tr>
</table> 
```

​</p>

jQuery

```
 var counter = 1;
var textAreaCounter = 1;
var textBoxCounter = 1;
var tempStorage = $('div#placeholder').html();

$(document).ready(function() {

    $(".formDetails").live('click','div',function(){
        var divID = this.id;
        alert(divID);
        alert(document.getElementById(divID).innerHTML);
    });

    $(".container").live('click','div',function(){

        var divID = this.id;
        if(divID != ""){
            alert(divID);
            var content = document.getElementById(divID).outerHTML;
            // alert(content);
            var text = document.getElementById(divID).innerHTML;
            alert(text);

            var textboxId = $('div.container')
            .find('input[type="text"]')[0]
            .id;
            $('div#placeholder').html(content);
        }
        else{

        }

    });

    $("#addField").live('click','div',function(){
        $('div#placeholder').html(tempStorage);
    });
    $("#fieldProperties").live('click','div',function(){
        var content = "<p>Content of fields should be here</p>";
        $('div#placeholder').html(content);
    });
    $("#formProperties").live('click','div',function(){
        var content = "<p>Content of form should be here</p>";
        $('div#placeholder').html(content);
    });
    $('#textAdd').click(function() {
        var newdiv = document.createElement('div');
        newdiv.innerHTML = "Textbox " + textBoxCounter + " <br><div id='container " + textBoxCounter +      "' class='container'><li><input type='text' value='TEXT' id='textBox " + textBoxCounter +"' name='textBox " + textBoxCounter +"')'></li></div></br>";
        document.getElementById("identifier").appendChild(newdiv);
        textBoxCounter++
        counter++;
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:44:10.443

改变

```
$('#textAdd').click(function() 
```

到

```
$('#textAdd').live('click',function() { 
```

它工作正常..[这里的工作示例](http://jsfiddle.net/manseuk/9acEk/12/)

**几件事....**

您使用的是非常旧的 jQuery 版本 - 1.4.4。我建议，如果您要学习新的东西，您将学习最新版本....并且在该最新版本中，该`live()`功能已被替换为`on()`- 所以您的代码将如下所示：

```
$(document).on('click','#textAdd',function() { 
```

`document`页面加载时出现的任何父元素在哪里

[这里的工作示例](http://jsfiddle.net/manseuk/9acEk/13/)

# regex - 带有逗号且不带引号的 csv 正则表达式

> ID：11469655
> 
> 赞同：0
> 
> 时间：2012-07-13T11:30:49.137
> 
> 标签：regex, csv, comma, quote

我正在尝试解析非常复杂的 csv，它是在不使用逗号列的任何引号的情况下生成的。
我得到的唯一提示是，在字段之前或之后带有空格的逗号包含在字段中。

```
Jake,HomePC,Microsoft VS2010, Microsoft Office 2010 
```

应该解析为

```
Jake
HomePC
Microsoft VS2010, Microsoft Office 2010 
```

任何人都可以就如何在列正文中包含“\s”和“\s”提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:13:20.657

如果您的语言支持后向断言，请拆分

```
(?<!\s),(?!\s) 
```

在 C# 中：

```
string[] splitArray = Regex.Split(subjectString, 
    @"(?<!\s) # Assert that the previous character isn't whitespace
    ,         # Match a comma
    (?!\s)    # Assert that the following character isn't whitespace", 
    RegexOptions.IgnorePatternWhitespace); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:52:43.310

除以 r"(?!\s+),(?!\s+)"

在python中你可以这样做

```
import re
re.split(r"(?!\s+),(?!\s+)", s) # s is your string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:09:46.603

试试这个。它给了我你提到的预期结果。

```
StringBuilder testt = new StringBuilder("Jake,HomePC,Microsoft VS2010, Microsoft Office 2010,Microsoft VS2010, Microsoft Office 2010");
Pattern varPattern = Pattern.compile("[a-z0-9],[a-z0-9]", Pattern.CASE_INSENSITIVE);
Matcher varMatcher = varPattern.matcher(testt);
List<String> list = new ArrayList<String>();
int startIndex = 0, endIndex = 0;
boolean found = false;
while (varMatcher.find()) {
endIndex = varMatcher.start()+1;
if (startIndex == 0) {
list.add(testt.substring(startIndex, endIndex));
} else {
startIndex++;
list.add(testt.substring(startIndex, endIndex));
}
startIndex = endIndex;
found = true;
}
if (found) {
if (startIndex == 0) {
list.add(testt.substring(startIndex));
} else {
list.add(testt.substring(startIndex + 1));
}
}
for (String s : list) {
System.out.println(s);
} 
```

请注意，代码是用 Java 编写的。

# iphone - IBAction 或 [UIButton addTarget:action: forControlEvents:] 用于在 .xib 文件中创建的 UIButton？哪种方法更好？

> ID：11469664
> 
> 赞同：1
> 
> 时间：2012-07-13T11:31:42.640
> 
> 标签：iphone, ios, ios5, interface-builder, uibutton

如果我们使用 Interface Builder 在 .xib 文件中创建 UIButton 更好的方法是什么，是使用 IBAction 方法来定义其 Action Method 和所需的 Control Event 更好，还是应该使用

```
[UIButton addTarget:action: forControlEvents:] 
```

方法来定义动作方法？

哪种方法更好，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:07:21.930

是的。你可以使用任何方式。

这两种方法都从您现有的 eventreporter 程序开始。您将使用 Interface Builder 向其添加一个简单的 UIButton。将按钮放在页面底部标签的顶部，并使用属性标签将其标记为重置。有了它并定义好了，它就可以通过两种不同的方式之一链接到您的程序中了。

**使用 addTarget:action:forControlEvents: 按钮**

一方面，您可能希望以编程方式向按钮添加操作。如果您在 Xcode 中创建了按钮，或者您在 Interface Builder 中创建了按钮但想在运行时更改其行为，则可能会出现这种情况。您的第一步是将按钮引入 Xcode。如果您在Interface Builder 中创建了按钮，正如我们之前建议的那样，您需要为按钮创建一个IBOutlet，现在应该是旧帽子了。如果您没有在 InterfaceBuilder 中创建按钮，您可以在 Xcode 中创建。这可能意味着使用工厂类方法`buttonWithType:`，它可以让您创建一个圆角矩形按钮或一些特殊按钮之一，如信息按钮。无论哪种方式，您现在都应该在 Xcode 中拥有一个可用的按钮对象。

**使用带有按钮的 IBAction**

将动作链接到方法的另一种方法是在 InterfaceBuilder 中执行所有操作。如果您已经在 Interface Builder 中创建了对象（正如我们建议的那样）并且您不打算在运行时更改其行为，这是首选选择。使用此过程时，您不需要制作按钮进入 IBOutlet。它在 Xcode 中实际上是不可见的，这很好，因为您只关心按下按钮时会发生什么。您也不要使用`addTarget:action:forControlEvents:`我们刚刚运行的有点复杂的方法；相反，您可以通过直观的 Interface Builder 方式连接事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:47:15.063

这取决于用户使用哪一个。使用xib更容易，可以避免编写大量代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:52:48.963

虽然两者中的任何一个都可以使用。我看到它的唯一原因应该`IBAction`是因为您使用了 xib。这样你就知道你创建的所有东西都来自xib。但再一次，两者都很好。

# php - 刷新页面时如何停止“符合表单重新提交”对话框

> ID：11469665
> 
> 赞同：3
> 
> 时间：2012-07-13T11:31:43.133
> 
> 标签：php, javascript, mysql

我正在使用订阅脚本将用户电子邮件地址添加到 mysql 记录。我在这个过程中使用了下面的代码。它工作正常。用户提交电子邮件后，页面刷新并且数据库也更新为 mysql :-)。但问题是，当我在提交电子邮件后刷新页面时，我会收到一个符合表单重新提交对话框。如果我单击继续按钮，相同的电子邮件（重复）正在新记录中更新。我的数据库正在使用相同的电子邮件地址进行更新当我刷新页面时。如何禁用此消息并停止更新 mysql 中相同的重复记录。

```
<form id="myForm" action="" onsubmit="return validateForm();"method="post">
    <input type="hidden" name="action" value="update" />
    <input type="text" name="email" id="email" value="Enter your email here" onfocus="if (this.value == 'Enter your email here') {this.value = '';}" onblur="if   (this.value == '') {this.value = 'Enter your email here';}" onwebkitspeechchange = "this.value = this.value.replace('Enter your email here','')" style=" margin:0px 0px 0px 26px;color:#999; border:4px solid #bbb;border-radius:6px;font-size:1em;width:260px;height:30px; font-style:italic; font-family:"Times New  Roman", Times, serif;"/>
    <br>
    <center>
        <input class="button" type="image" src="rss.png" />
    </center>
</form>
<?php
    $email = $_POST['email'];
    mysql_connect ("localhost", "root", "") or die ('Error: ' . mysql_error());
    mysql_select_db ("test"); 
    $query="INSERT INTO newsletter_emails (email)VALUES ('".$email."')";
    mysql_query($query) or die ('Error updating database');
?>
<script>
function validateForm() {
    var x = document.forms["myForm"]["email"].value;
    var atpos = x.indexOf("@");
    var dotpos = x.lastIndexOf(".");
    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
        alert("Not a valid e-mail address");
        return false;
    } else {
        alert("thankyou");
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:33:53.663

提交表单后，请执行标准重定向。这样，重定向将不会发送任何 POST 信息。如果您需要存储诸如错误消息之类的内容，请使用会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:36:07.267

任何一个;

*   转移到不同的页面

*   使用 AJAX 插入并使用 AJAX 通知用户

*   创建某种检查以确定表单是否已发布（例如，提交按钮是否包含值）

# json - 将数据从 json 加载到 extjs

> ID：11469669
> 
> 赞同：0
> 
> 时间：2012-07-13T11:31:54.270
> 
> 标签：json, extjs, load, store

我想将 json 中的一个值加载到 extjs 应用程序中的 var 中。json 输出如下所示

```
{"rechten":[{"name":"baas"}]} 
```

如果我想在商店中使用它，我知道该怎么做，但我以前只将它用于网格。我想要一个这样的变量

```
 var rechten = "baas"; 
```

所以我可以将其检查为其他内容：

```
if(rechten == "baas") { alert('je bent de baas') } 
else { alert('helaas je bent arbeider')}; 
```

所以我的问题是如何在 if else 语句中检查该 json 的名称值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:35:33.057

您可以将数据加载到存储中（例如 store.load()），然后通过标准存储方法（例如[store.getAt()](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-method-getAt)）检查值。

或者你可以使用[Ext.Ajax](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Ajax-method-request)和[Ext.JSON](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.JSON)它看起来像这样

```
Ext.Ajax.request({
url: 'someurl',
    success: function(response){
         var decoded = Ext.JSON.decode(response.responseText);
         console.log(decoded.rechten.name);
    }
}); 
```

第二种方法将跳过所需的模型/存储声明，并且将超出 EXTJS MVC 数据概念，但是对于快速和简单的数据处理应该可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:23:38.997

```
Ext.Ajax.request({
   url: 'your_url_here',
   success: function(response, opts) {
      var o = Ext.decode(response.responseText);
      alert(o.rechten[0].name); // alerts "baas"
   },
   failure: function(response, opts) {
      console.log('server-side failure with status code ' + response.status);
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:30:24.763

如果您的 json 字符串来自名为 page-with-rechten.xyz 的文件，则此代码段可以调用该文件，然后解码创建 JavaScript 对象的文本，然后您可以使用其属性。

您可以在控制台中检查 rechten 对象，然后添加您需要的附加逻辑

```
Ext.Ajax.request({
    url: './page-with-rechten.xyz',
    success: function(response){
        var text,
            rechten;
        text = response.responseText;
        console.log('response text: ', text);
        rechten = Ext.decode(text);
        console.log('rechten object: ', rechten);        
    }
}); 
```

# python - 这是什么小部件？

> ID：11469674
> 
> 赞同：0
> 
> 时间：2012-07-13T11:32:14.500
> 
> 标签：python, wxpython, wxwidgets

我正在尝试制作一个完全像这样的小部件，

![http://i50.tinypic.com/a476lu.png](../Images/22626667744296b785eecc186078f266.png)

我希望我的完全一样（相同的字体、图片等）。有谁知道我该怎么做？我认为这是一个 wx.ListCtrl 但我找不到如何使它看起来像这样的示例。

你能给我一个关于如何制作这个小部件的例子吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:18:03.293

如果当您单击图像时小部件会显示不同的面板，那么它可能是 Listbook，而不是 ListCtrl。另外，这些是 Listbook 和 Toolbook 和 Treebook 演示的 wxPython 演示中的图像，所以我猜它就是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:38:29.967

这是一份报告清单。不要忘记自己保留对图像列表的引用，因为绑定很愚蠢，并且在将其分配给列表时不要增加它。

# c# - 从数据网格视图中读取数据

> ID：11469675
> 
> 赞同：1
> 
> 时间：2012-07-13T11:32:15.130
> 
> 标签：c#, asp.net, sql

我已经用数据源填充了一个 datagridview，我的 SQL 查询就在其中。我没有使用存储过程或类似的东西。它可以很好地显示数据，但我无法使用来自 gridview 的数据。比如，`gridview1.selectedRow.cells[0].Text`和类似的方法是行不通的？有人可以帮助我吗？

```
<body>
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager" runat="server" />
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
    <h3>Gridview with Filtering</h3>
        <div class="GridviewDiv">
        <table style="width: 540px" border="0" cellpadding="0" cellspacing="1" class="GridviewTable">
            <tr >
                <td style="width: 40px;">
                    ID
                </td>
                <td style="width: 120px;" >
                    First Name
                </td>
                <td style="width: 120px;">
                    Last Name
                </td>
                <td style="width: 130px;">
                    Department
                </td>
                <td style="width: 130px;">
                    Location
                </td>
            </tr>
            <tr >
                <td style="width: 40px;">
                </td>
                <td style="width: 120px;">
                </td>
                <td style="width: 120px;">
                </td>
                <td style="width: 130px;">
                    <asp:DropDownList ID="ddldepartment" DataSourceID="dsPopulateDepartment" AutoPostBack="true"
                        DataValueField="department" runat="server" Width="120px" Font-Size="11px" AppendDataBoundItems="true">
                        <asp:ListItem Text="All" Value="%"></asp:ListItem>
                    </asp:DropDownList>
                </td>
                <td style="width: 130px;">
                    <asp:DropDownList ID="ddlLocation" DataSourceID="dsPopulateLocation" AutoPostBack="true"
                        DataValueField="location" runat="server" Width="120px" Font-Size="11px" AppendDataBoundItems="true">
                        <asp:ListItem Text="All" Value="%"></asp:ListItem>
                    </asp:DropDownList>
                </td>
            </tr>
            <tr>
                <td colspan="5">
                    <asp:GridView ID="Gridview1" runat="server" AutoGenerateColumns="False" AllowPaging="True"
                        AllowSorting="true" DataSourceID="dsGridview" Width="540px" PageSize="10" CssClass="Gridview">
                        <Columns>
                            <asp:BoundField DataField="id" HeaderText="Sort" SortExpression="id" ItemStyle-Width="40px"
                                ItemStyle-HorizontalAlign="Center" />
                            <asp:BoundField DataField="FirstName" HeaderText="Sort" SortExpression="FirstName"
                                ItemStyle-Width="120px" />
                            <asp:BoundField DataField="LastName" HeaderText="Sort" SortExpression="LastName"
                                ItemStyle-Width="120px" />
                            <asp:BoundField DataField="Department" HeaderText="Sort" SortExpression="Department"
                                ItemStyle-Width="130px" />
                            <asp:BoundField DataField="Location" HeaderText="Sort" SortExpression="Location"
                                ItemStyle-Width="130px" />
                        </Columns>
                    </asp:GridView>
                </td>
            </tr>
        </table>
        </div>
        <asp:SqlDataSource ID="dsGridview" runat="server" ConnectionString="<%$ ConnectionStrings:EvonetConnectionString %>"
            SelectCommand="SELECT * FROM [T_Employees]" FilterExpression="Department like '{0}%'
            and Location like '{1}%'">
            <FilterParameters>
                <asp:ControlParameter Name="Department" ControlID="ddldepartment" PropertyName="SelectedValue" />
                <asp:ControlParameter Name="Location" ControlID="ddllocation" PropertyName="SelectedValue" />
            </FilterParameters>
        </asp:SqlDataSource>
        <asp:SqlDataSource ID="dsPopulateDepartment" runat="server" ConnectionString="<%$ ConnectionStrings:EvonetConnectionString %>"
            SelectCommand="SELECT DISTINCT Department from [T_Employees]"></asp:SqlDataSource>
        <asp:SqlDataSource ID="dsPopulateLocation" runat="server" ConnectionString="<%$ ConnectionStrings:EvonetConnectionString %>"
            SelectCommand="SELECT DISTINCT Location FROM [T_Employees]"></asp:SqlDataSource>
        </div>
    </ContentTemplate>
</asp:UpdatePanel>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:37:18.417

使用列名

```
dataGridView.Rows[4].Cells["Name"].Value.ToString(); 
```

如果你想遍历每一行然后，

```
foreach (DataGridViewRow row in dataGrid.Rows)
    {

         foreach (DataGridViewCell cell in row.Cells)
        {
            string value = cell.Value.ToString();

        }
    } 
```

此外，您可以执行以下操作来实现您想要的

```
string name = (string)dataGridView1.SelectedRows[0].Cells[0].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T07:16:08.923

if you use SelectionChanged event of datagrid. then u can try it

```
    private void dataGrid1_SelectionChanged(object sender, SelectionChangedEventArgs e)
            {
                object item = dataGrid1.SelectedItem;
                txtRegId.Text = (dataGrid1.SelectedCells[0].Column.GetCellContent(item) as TextBlock).Text;
                MessageBox.Show(txtName.Text);
            }

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:39:19.720

您必须使用***回发事件***和参数来获取所选值。

阅读**[此](http://www.c-sharpcorner.com/UploadFile/rohatash/how-to-get-the-selected-row-in-gridview-using-Asp-Net/)**内容，这是有关您的问题的教程

# sql - Rails 左外连接

> ID：11469678
> 
> 赞同：0
> 
> 时间：2012-07-13T11:32:32.337
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord, join

假设我有以下型号：

```
class Employee < ActiveRecord::Base
    has_many :shifts    
end

class Shift < ActiveRecord::Base
    belongs_to :employee
end 
```

在我的控制器中，我想加载所有员工，包括他们在某个日期范围内的班次。但我也想包括在该范围内没有任何轮班的员工。

在我的控制器中，我尝试了：

```
@employees.joins("LEFT OUTER JOIN shifts ON employees.id = shifts.employee_id").where('shifts.starts_at BETWEEN ? and ?', weekBegin, weekEnd).to_json(:include => :shifts) 
```

但这仍然只是返回在该日期范围内轮班的员工。我还想返回在该日期范围内没有轮班的员工。

这样的查询是如何工作的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:59:37.300

您应该将班次开始时间的条件包含在 join 语句中：

```
@employees.joins("
     LEFT OUTER JOIN shifts 
     ON employees.id = shifts.employee_id
     AND shifts.starts_at 
         BETWEEN #{ActiveRecord::Base.sanitize(weekBegin)} 
             AND #{ActiveRecord::Base.sanitize(weekEnd)}
").to_json(:include => :shifts) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:44:11.190

你可以尝试这样做

```
LEFT OUTER JOIN shifts ON employees.id = shifts.employee_id AND shifts.starts_at BETWEEN weekBegin and weekEnd 
```

# c# - 如何将 rdlc 报告中的参数值传递给 Web 表单项目中的方法？

> ID：11469681
> 
> 赞同：0
> 
> 时间：2012-07-13T11:32:53.083
> 
> 标签：c#, asp.net, webforms, rdlc, localreport

我有一个绑定到以下课程的 rdlc 报告：

```
public class Product
{
  DataContext context;

  public Product()
  {
    context = new DataContext();
  }
  public List<Product> GetBoughtItemsForUser(string userName)
  {
    //linq query to collect data
    return query.ToList();
  }

  public string Name {get;set;}
  public int Quantity {get;set;}
} 
```

在我的 rdlc 中，我将报告数据集设置为 GetBoughtItemsForUser。现在我想传递实际上是 Page.User.Identity.Name 的 userName 值，那么我应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:51:28.457

```
var p = new Product();

//fill class properties with data

ReportParameter[] params = new ReportParameter[2]; 
params[0] = new ReportParameter("Name ", p.Name , false); 
params[1] = new ReportParameter("Quantity ", p.Quantity , false); 
this.ReportViewer1.ServerReport.SetParameters(params);     
this.ReportViewer1.ServerReport.Refresh(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-19T19:04:12.357

它很容易 -

如果我假设您使用的是 Web 应用程序。只需在 UI 层的某处设置一个 Session 变量，例如： **Session["exp"] = 6;**

现在假设您的类**Product**在业务层中，并且数据集中的 RDLC 文件正在调用您的函数**GetBoughtItemsForUser 。**

***按照以下步骤配置 RDLC 文件 -***

1.  在**ObjectDataSource**中选择**ConfigureDataSource**，然后选择包含方法的业务层 - **GetBoughtItemsForUser**。

2.  现在在“**定义数据方法**”窗口中，选择您的方法 - **GetBoughtItemsForUser**，在我的例子中是 GetAllFaculty。

[![在此处输入图像描述](../Images/f595038d2bfe047eeda8ff52a2764b8f.png)](https://i.stack.imgur.com/aSySR.jpg)

3.  点击下一步

[![在此处输入图像描述](../Images/d4db8ef5a89c03d6b185f1cc13137d4d.png)](https://i.stack.imgur.com/7EZFK.jpg)

4.  现在您将自动获得**定义参数**窗口（仅在参数化函数的情况下），在这里选择**参数源**并在您在 UI 层中使用的**SessionField**中给出适当的参数名称，在我的情况下它是会话类型和 exp。

5.  点击完成按钮，你就完成了。

> **注意：**您不必担心将 Session 变量转换为适当的类型，在大多数情况下它会自动完成。否则，您可以点击“显示高级属性”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T12:56:12.000

尝试这个

```
 rv = ReportViewer1;
            rv.LocalReport.ReportPath = @"Report.rdlc";    
            rv.LocalReport.DataSources.Clear();
            ReportDataSource rs = new ReportDataSource("DataSetName", GetData());
            rv.LocalReport.DataSources.Add(rs);                        

            ReportParameter param = new ReportParameter("paramName", paramValue);            
            rv.LocalReport.SetParameters(param); 

            rv.LocalReport.Refresh(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-10T15:38:23.597

```
 reportParameters.Clear();
                reportParameters.Add(new ReportParameter("prmClientRef", find));
                reportParameters.Add(new ReportParameter("prmClientName", string.Format("{0} {1}",                    allval.Title, allval.ClientName)));

                this.viewerInstance.LocalReport.SetParameters(reportParameters);
                this.ProductBindingSource.DataSource = storageToPrint.Where(x => x.ClientRef == find).ToList();
                this.viewerInstance.RefreshReport();
                this.viewerInstance.Refresh(); 
```

# javascript - JSON 不适用于 Opera Mini 浏览器

> ID：11469685
> 
> 赞同：0
> 
> 时间：2012-07-13T11:33:12.037
> 
> 标签：javascript, json, google-maps-api-3, opera, opera-mini

我正在通过在地图上设置标记来测试 google maps api。单击地图时，它会向 php 发送 JSON 请求，将纬度和经度保存在 mysql 数据库中，然后使用 google maps api 使用 javascript 函数添加标记，非常简单。问题是它可以与 chrome 和 firefox 一起使用，但它不适用于我的带有 opera mini 浏览器的手机，它是一个 android 2.3.4。

手机自带的导航器在显示标记方面没有问题。

代码：（2个功能）

```
function agregoCoordenadasEnBaseDeDatos(punto)
{
    //  alert(JSON.encode(punto));
    punto['a']=punto['$a'];
    new Request({'url':'insertarMarcador.php?puntoCorchs=' + JSON.encode(punto), 
                                 'method':'get', 
                                 'onSuccess':function(o){agregarPunto(punto);},
                                 'onFailure':function(o){alert("Pelate!!!  "+o)}}).send();
}
     function agregarPunto(punto)
     {

        var marker = new google.maps.Marker({position: punto, 
                                                        map: first_map, 
                                                    title:'Hola Mundo!!!', 
                                                    icon:'IMAGEFILEURLDELETED.GIF', optimized: false});
    google.maps.event.addListener(marker, 'click', function() {
    first_map.setZoom(8);
    first_map.setCenter(marker.getPosition());    
        });         
} 
```

这是一个已知问题吗？

我是否需要使用关于哪个浏览器访问我的网站的 if 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T17:25:18.910

Opera Mini 是一个瘦客户端，它接收在 Opera 服务器上预编译的“智能”图像 (OBML)。当您输入地址时，您手机上的瘦客户端会将其发送到 Opera 服务器，该服务器会向远程服务器发出真正的 HTTP 请求。然后 Opera 服务器接收响应，创建图像并将其发送回瘦客户端。所以本质上没有 css、html、js 到达瘦客户端。只是 OBML 图像。因此，当您在客户端触发操作时，无需通过服务器进行往返就不会有效。XMLHttpRequest 事件的具体支持见**[Opera Mini 的指南](http://dev.opera.com/articles/view/opera-mini-web-content-authoring-guidelines/#ajax)**。这是节省带宽 (80%) 和设备上的实时交互之间的权衡。也就是说，Opera 正在逐步改进它。

您是否也尝试[过 Opera Mobile 12](http://www.opera.com/mobile/)，与 Opera Mini 不同的产品？

# android - 需要帮助以改善 OpenCV 2.4.0 中人脸检测的执行时间

> ID：11469688
> 
> 赞同：2
> 
> 时间：2012-07-13T11:33:17.413
> 
> 标签：android, c, opencv

我正在使用`cvHaarDetectObjects`C 函数在我的 Android 应用程序中检测人脸，但执行时间不够快，无法每秒处理一定数量的视频帧。所以，我正在考虑注释掉对我来说不必要的代码，例如，我注意到标志的许多分支条件和可以注释掉的内存分配语句。可以对从 调用的函数执行相同的操作`cvHaarDetectObjects`。

有没有人尝试过进行这种优化？任何帮助深表感谢。

代码：

```
cascadeFile1 = (CvHaarClassifierCascade *) cvLoad(cascadeFace,0,0,0);
CvSeq *face = cvHaarDetectObjects(img1, cascadeFile1, storage,1.1, 3,CV_HAAR_DO_CANNY_PRUNING,cvSize(0,0)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:15:16.070

作为第一步，您应该尝试调整输入参数，因为这些参数对分类器的性能有很大影响。

您可以尝试：

1.  将源图像分辨率降低到合理值
2.  `scaleFactor`少量增加参数（例如`0.1`步骤）
3.  根据您的分辨率、相机视野和面部距离，定义`min_size`和`max_size`参数的值。这会极大地影响算法需要执行的操作数量。

其次，您可以发布您的实际参数和分析结果，这里的人肯定可以提供更多关于改进的提示。

附带说明：如果您想让算法正常运行，我认为注释掉分支条件不会对速度产生明显影响。

# java - 带有 Java 服务器页面的 JSONP

> ID：11469692
> 
> 赞同：1
> 
> 时间：2012-07-13T11:33:35.103
> 
> 标签：java, jquery, json, servlets, jsonp

我对 JSONP 有点了解……但感觉我还是很笨。我创建了以下页面，它应该通过我的 web 服务以 JSON 表示法获取信息：

```
<html>
<head>
<title> SomeHtml Form </title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
function getParameters(){
    $.getJSON('http://localhost:8080/test/services/export/getuser.mvc?callback=?',function(res){
        alert('Your name is '+res.lname);
    });
}
</script>
</head>

<body >
    <button onclick="getParameters();">Get Name</button>
</body>
</html> 
```

我在 Liams 的帮助下创建了这个主题评论：[简单的 jQuery、PHP 和 JSONP 示例？](https://stackoverflow.com/questions/6809053/simple-jquery-php-and-jsonp-example)

**更新 13-07-2012 15:06** 我设法从我的 Servlet 中获得了正确的结果，但现在我从接收网站收到了一个不同的错误（“错误：未定义资源”）。对于我的 JSONP 数据，正确的密钥是什么，以便站点可以读取它？

另一方面，我有一个使用 SPRING 和 Java Servlet 的 Web 服务，它被`$.getJSON('http://localhost:8080/test/services/export/getuser.mvc?callback=?',...)` 此服务调用，如下所示：

```
@Controller
@RequestMapping("/services/export/")
public class AccountServiceProviderController extends ProfileDashboardController {

    private static final String DESC_NAME = "ACCOUNT SERVICE PROVIDER CONTROLLER";

    @RequestMapping("/getuser")
    public @ResponseBody
    JSONPObject list(final HttpServletResponse response) {

        return new JSONPObject("res", getJson());

    }

    public JSONObject getJson() {
        User user = getCurrentUser();

        // logger.debug("ID: " + id);

        // json
        JSONObject json = new JSONObject();
        json.put("lname", user.getLastName());
        json.put("fname", user.getFirstName());

        logger.info(json.toString());
        return json;

    }

} 
```

不幸的是，我从来没有收到警报。我做错什么了？

**更新** 此错误消息：“未找到资源”是什么意思。它有什么名字才能被发现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:04:39.443

好的...我发现了错误。如果您声明了以下内容，则上述代码有效：

```
 response.setContentType("text/javascript; charset=UTF-8"); 
```

完整的工作代码如下所示（Servlet）：

```
@Controller
@RequestMapping("/secure/profile/services/export/")
public class AccountServiceProviderController extends ProfileDashboardController {

    private static final String DESC_NAME = "ACCOUNT SERVICE PROVIDER CONTROLLER";

    @RequestMapping("/getuser")
    public @ResponseBody
    JSONPObject list(@RequestParam("callback") final String callback, final HttpServletResponse response) {

        response.setContentType("text/javascript; charset=UTF-8");

        return new JSONPObject(callback, getJson());

    }

    public JSONObject getJson() {
        User user = getCurrentUser();
        JSONObject json = new JSONObject();

        // User muss eingeloggt sein
        if (user != null) {
            json.put("lname", user.getLastName());
            json.put("fname", user.getFirstName());

            logger.info("Daten werden exportiert: " + json.toString());
            return json;
        }
        return null;

    }

} 
```

# jquery - 将输入转换为选择

> ID：11469693
> 
> 赞同：0
> 
> 时间：2012-07-13T11:33:49.483
> 
> 标签：jquery, select, input, option

我希望使用 Jquery 将输入转换为选择，同时从输入中获取值并将其用作选定选项。但到目前为止，我在下面的代码中只完成了一半。谁能看到哪里出错了？或者也许建议一种替代方法。

HTML

```
<div class="inputDiv"><input type="text" id="input01" value="1" name="input01"/></div>
<div class="inputDiv"><input type="text" id="input02" value="4" name="input02"/></div>
<div class="inputDiv"><input type="text" id="input03" value="2" name="input03"/></div>
<div class="inputDiv"><input type="text" id="input04" value="1" name="input04"/></div>
<div class="inputDiv"><input type="text" id="input05" value="4" name="input05"/></div> 
```

JS

```
$(".inputDiv input[type=text]").each(function() {
    var qty = $(this).val();
    var currentId = $(this).attr('id');
    alert(qty + " is a Number");
    alert(currentId + " is a ID");
    $(this).replaceWith('<select id="' + currentId + '" name="" class="NewSelect">' +
          '<option value="1">1</option>' +
          '<option value="2">2</option>' +
          '<option value="3">3</option>' +
          '<option value="4">4</option>' +
          '<option value="5">5</option>' +
        '</select>');

        $("option[value=" +this.qty+ "]").attr('selected', 'selected');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:45:43.103

```
 $(".inputDiv input[type=text]").each(function() {
        var qty = this.value;
        var currentId = this.id;
        var selectbox = $('<select id="'+currentId+'><option value="-1"></select>');
        $(this).replaceWith(selectbox);
        for(var i = 1; i < 6; i++) {
            var option = document.createElement('option');
            option.value = i;
            $(option).text(i);
            if(i==qty) option.setAttribute('selected','selected');
            selectbox.append($(option));

        }

    }); 
```

[JSFIDDLE](http://jsfiddle.net/4pQTb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:59:14.090

尝试这个：

```
$("input[type=text]").each(function() {
    $(this).parent().replaceWith('<option id=' + this.id + ' value='+ this.value + ' name=' + this.name + ">" + this.value +"</option>")
})        
$('option').wrapAll('</select>') 
```

[演示](http://jsfiddle.net/xKZyF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:42:08.080

这样做：http: [//jsfiddle.net/albertjan/heVc6/3/](http://jsfiddle.net/albertjan/heVc6/3/)

在 DOM 中：使 id 唯一

```
<div class="inputDiv"><input type="text" id="input01" value="1" name="input01"/></div>
<div class="inputDiv"><input type="text" id="input02" value="4" name="input01"/></div>
<div class="inputDiv"><input type="text" id="input03" value="2" name="input01"/></div>
<div class="inputDiv"><input type="text" id="input04" value="1" name="input01"/></div>
<div class="inputDiv"><input type="text" id="input05" value="4" name="input01"/></div>​ 
```

在 JavaScript 中：

```
$(".inputDiv input[type=text]").each(function() {
    var qty = $(this).val();
    var currentId = $(this).attr('id');
    alert(qty + " is a Number");
    alert(currentId + " is a ID");
    $(this).replaceWith('<select id="' + currentId + '" name="" class="NewSelect">' +
          '<option value="1">1</option>' +
          '<option value="2">2</option>' +
          '<option value="3">3</option>' +
          '<option value="4">4</option>' +
          '<option value="5">5</option>' +
          '</select>');

  //this qty instead of this.qty
  //search for an option within the current div.
  $("#" + currentId + " option[value=" + qty + "]").attr('selected', 'selected');
});​ 
```

# image-processing - HDR 图像的图像混合模式

> ID：11469697
> 
> 赞同：-2
> 
> 时间：2012-07-13T11:34:15.030
> 
> 标签：image-processing, graphics, hdrimages, visual-effects

混合模式 Screen、Color Dodge、Soft Light 等，就像 Photoshop 中一样，每个都有自己的适用于 0-1 范围的数学。我想知道这些混合模式如何适用于 HDR 图像？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:58:01.540

我不熟悉 Photoshop 和它的滤镜，但这里是对 HDR 滤镜背后的数学的一般解释。

假设您有 3 张图像（低光、中等和过度曝光）。您想平均这些图像，但 (I1+I2+I3)/3 是一种愚蠢的方法。您希望为在给定区域中捕获更多信息的图像赋予更高的权重。所以基本上你用权重因子对图像进行平均，并且有不同类型的算法来计算权重。这里有几个：

1.  最简单的一种是使用 STD（标准差）。在每个像素中，在每个图像中计算其 9 个邻居的标准差。使用 std 作为权重： HDR pixel(i,j) = I1(i,j)*stdI1(i,j) + I2(i,j)*stdI2(i,j) + I3(i,j)*stdI3(我，j）。为什么使用std？因为当std很高时，它意味着像素强度的变化很大，这意味着图像捕获了更多信息。
2.  代替 STD，您可以使用熵过滤器、边缘检测或任何其他表示在给定像素周围编码多少信息的方法
3.  还有一些更慢但更好的 HDR 方法。通常它是通过某种小波变换来完成的。例如傅立叶变换。每个图像都被转换到更富利尔的空间（频率系数，而不是每个频率，获取 3 个图像的最大系数）。
4.  您甚至可以结合标准滤波器和小波变换的方法。例如，将图像分解为不同的频率，平滑较低的频率并采用愚蠢的平均值 (I1+I2+I3)/3，但对于高频使用较少的平滑并使用标准加权平均。平滑更多较低频率的动作称为“混合”。在将 2 张不同曝光度的图像拼接成全景图时，它被大量使用。看这张图片： http: [//magazine.magix.com/en/wp-content/uploads/2012/05/Panorama-3.jpg](http://magazine.magix.com/en/wp-content/uploads/2012/05/Panorama-3.jpg) 您可以清楚地看到每张图片上的天空颜色不同，但由于天空是非常低的频率（几乎没有信息，也没有小物体）它被高度平滑和平均，从而允许温和的拼接。

希望这能回答你的问题

# java - 保护从 iTextPdf 生成的 PDF

> ID：11469705
> 
> 赞同：1
> 
> 时间：2012-07-13T11:35:09.403
> 
> 标签：java, pdf, itext, watermark

我制作了一个生成 pdf 作为其功能的一部分的软件，我正在使用 iTextPDF Java 库来生成 PDF。对于我的软件的演示版本，我使用以下代码添加了文本水印（如“演示软件”）

`PdfContentByte under = writer.getDirectContentUnder(); BaseFont baseFont = BaseFont.createFont(BaseFont.HELVETICA, BaseFont.WINANSI, BaseFont.EMBEDDED); under.beginText(); under.setColorFill(BaseColor.RED); under.setFontAndSize(baseFont, 25); under.showTextAligned(PdfContentByte.ALIGN_CENTER," demo software",250, 470,55); under.endText();`

之后，我使用 PDF 到 Word 转换器将其转换为 .docx 格式，生成的 docx 文件不包含水印，内容也很容易编辑，因此提供演示软件的唯一目的就消失了。

如何实现永久水印，以便 pdf 到 word 转换器无法删除它。

我想到的一个想法是，与其将文本放入 pdf 中，不如有一种方法可以先将页面的所有文本转换为图像，然后再将这些图像组成 pdf。但我不确定如何使用 iTextPdf 实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:57:25.023

您可以加密您的`PDF`，以便在没有所有者密码的情况下无法修改，在您生成您的之后，使用您的输入`PDF`创建一个并加密 pdf，如下所示：`PDFStamper``PDF`

```
final PdfReader reader = new PdfReader(your_input_stream);
final PdfStamper stamper = new PdfStamper(reader, your_output_stream);

stamper.setEncryption(PdfWriter.ENCRYPTION_AES_128 | PdfWriter.DO_NOT_ENCRYPT_METADATA,
        "your_user_password", "your_owner_password", PdfWriter.ALLOW_PRINTING);

stamper.close(); 
```

作为旁注，我建议不要使用硬编码的所有者密码；由于生成文件后不需要所有者密码，我建议将其`SHA`设为 20 个字母数字字符的随机字符串的哈希值。

# jquery - 如何防止href显示另一页直到第一页完全填满

> ID：11469707
> 
> 赞同：1
> 
> 时间：2012-07-13T11:35:11.880
> 
> 标签：jquery, html

我在移动 jquery 中有一个链接..

```
 <div data-role="page" id="main" data-title="Main Page"> 
```

这里有两个必须由用户填写的文本框。然后给个链接。。

```
 <a href="#sub" data-role="button" id="save" data-icon="star" data-theme="b" data-transition="flip">Show Employee Data</a> 
```

"sub" 是 data-role="page" 显示这两个文本框的数据。我写在.js ..

```
 $(document).delegate('#save', 'click', function(e) {
       if(document.getElementById('name').value=="")
       {  alert('Name Not Entered..');e.preventDefault();return false;  }
  }); 
```

一切运行良好，警报也显示，但第二页也显示，因为 href 有 id="save"。我只需要在验证第一页后才显示第二页。我做错了吗？请建议..

--EDIT-- 我在chrome的中断模式下看到，在单击href第二页后，第二页被加载，然后进入代码。我必须立即停止第二页的加载。有什么我们可以在 href"$sub" ... > 中写的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:39:56.583

我认为应该这样做：

```
$(document).delegate('#save', 'click', function() {
  var valid = undefined;
  $(':text').each( function() {
    valid = valid === undefined || valid ? $(this).val().length > 0 ? false;
  });
  if(valid) {
    return true;
  } else {
    alert('validation failed.'); return false;
  }
}); 
```

验证说明：

1.  有效最初是未定义的
2.  如果 valid 未定义或为 true，则检查此输入是否有值，如果未将 valid 设置为 false
3.  如果 valid 不是未定义或为真，则保持为假，因为如果一个输入没有值，则验证失败

如果您想确保他们输入例如超过 3 个字母，请使用`$(this).val().length > 2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:47:13.100

尝试`return false;`，而不是`return;`. 这应该会阻止链接的默认行为，或者将事件包含在函数参数 [ `function(ev){...`] 和 call`ev.preventDefault();`中。

您可能想查看：[event.preventDefault() 与 return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

祝你好运！

另外，尝试使用 click() 而不是 delegate() 并且最后缺少括号：

```
$("#save").click(function(e) {
    if(document.getElementById('name').value=="")
    {  alert('Name Not Entered..');e.preventDefault();return false;  }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:10:53.893

您可以尝试这种方式....而不是“a”，您可以拥有 ID

```
$(function(){

  $("a").click(function(e){

      if($("#txtName").val().length === 0)
      {
        e.preventDefault();
        return false;
      }    
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T13:28:33.280

我解决了我的问题..我写了

```
 $(document).ready(function() 
  {
      $("#save").click(function(e)
      {
          if(document.getElementById('name').value=="")
          {  
             alert('Name Not Entered..');e.preventDefault();return false;  
          }
          if(document.getElementById('surname').value=="")
          {  
             alert('Surname Not Entered..');e.preventDefault();return false;  
          }
      });
  }); 
```

});

现在第二页不只是通过单击 href 显示，而是在第一页验证后显示。感谢帮助..

# c# - 用于重复模式的 C# 正则表达式

> ID：11469710
> 
> 赞同：2
> 
> 时间：2012-07-13T11:35:35.017
> 
> 标签：c#, regex

我需要制作一个复杂的正则表达式来匹配字符串中不同数量的重复模式。

要匹配的字符串示例如下

```
1\(E_123456)\(E_34567)\(E_424324234)\(E_8908908)\(E_23132312)\M_133123 
```

我添加了括号以突出显示我需要匹配的重复模式。这些不会出现在真实的字符串中。

顺序很重要，因为它描述了某种层次结构。我希望提取和构建的正是这种层次结构。模式的深度（或重复模式的数量）根本不会是恒定的，因此这不是 x 组数的简单情况！

即..上面的深度为5

E_123456、E_34567、E_424324234、E_8908908、E_23132312

尽管

```
1\(E_1)\(E_11111)\(E_354534534)\M_133123 
```

深度为三。（E_1、E_111111、E_354534534）

但是，我需要一个正则表达式，它将按照这些值的呈现顺序输出一个有序列表，而不管深度如何......

我对基本的正则表达式没问题，但它们不是我的强项，因此将不胜感激有人的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:41:41.297

`(\\E_\d+)+`通过 stlit使用此正则表达式提取计数`\`或使用正则表达式组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:25:29.360

```
var str = @"\E_1\E_11111\E_354534534\M_133123";
var reg = new Regex(@"(\\\w+_\d+)");

foreach (var match in reg.Matches(str))
{
     Console.WriteLine(match);
} 
```

# performance - 为什么在衡量应用程序性能时平均值如此受欢迎

> ID：11469715
> 
> 赞同：1
> 
> 时间：2012-07-13T11:35:59.327
> 
> 标签：performance, statistics, theory

在测量应用程序性能（例如响应时间）时，很容易遇到平均值（平均值）。`ab`，`httpref`以及许多其他实用程序正在报告均值和标准差。但从理论的角度来看，这对我来说没有多大意义。这就是为什么。

均值善于描述对称分布的总体，因为在对称分布的情况下，均值等于总体众数和期望值。但是响应时间不是分布对称的。它们更像是指数型的。在这种情况下，平均值什么也没告诉我们。

使用百分位值更方便，它告诉我们在响应百分比的情况下我们可以承受的响应时间。

我是否遗漏了某些东西，或者仅仅因为计算起来很简单而意味着流行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T11:47:33.163

各种工具的功能不一定来自有意义的东西，而是来自用户的期望。

您绝对正确，分布是非负的并且严重偏斜，并且百分位数会提供更多信息。

或者，更像对数正态分布或卡方分布会更好一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:17:17.357

是的，你错过了一些东西。

描述性统计的全部意义在于呈现一些数字来描述（或表示或建模或......）大量数字。它们有助于理解大型数据集、从数据中提取信息、对精确比较大且令人困惑的数据集进行近似比较。

但是没有一个单一的描述性统计数据总是适合所有目的，也没有人要求你必须或应该或应该使用平均值。如果它不适合您的目的，请使用其他东西。

碰巧你写错了*他们更像指数。在这种情况下，平均值什么也没告诉我们。* 对于具有速率参数`lambda`的指数分布，平均值很简单`1/lambda`，因此平均值可以告诉您有关指数分布的所有信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:42:27.550

我不是统计学专家，但我相信平均值被大量使用，因为这些值有助于衡量系统的可扩展性。

您需要首先考虑您的平均值，以了解您的系统在某些工作负载下需要如何运行，并且这些需要是可预测的，您通常对异常值不太感兴趣，至少一开始不会。

当然，您需要查看您的最小值和峰值，以了解您的系统何时会遇到瓶颈，但平均值会向您显示我所说的正确且可预测的行为。

# android - 如何创建可滚动的布局

> ID：11469716
> 
> 赞同：2
> 
> 时间：2012-07-13T11:36:05.843
> 
> 标签：android, layout, scrollable

嗨，我正在尝试动态制作布局，它应该是可滚动的，因为我不知道我应该绘制多少个文本字段和编辑文本字段。图片如下所示。![在此处输入图像描述](../Images/63dd0229832428682d979030522bcfc6.png)

```
 LinearLayout layout=new LinearLayout(this);
            layout.setOrientation(LinearLayout.VERTICAL);
            layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,      LayoutParams.WRAP_CONTENT)); 
            setContentView(layout); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:50:55.103

```
ScrollView scrollView = new ScrollView(this);
LinearLayout linear = new LinearLayout(this);

EditText ed1 = new EditText(this);
EditText ed2 = new EditText(this);

linear.add(ed1);  <-- Add all views to Relative layout dynamically 
linear.add(ed2);  <-- Add all views to Relative layout dynamically 

scrollView.addView(linear); <-- Then add only LinearLayoutto ScrollView 
```

**ScrollView 直接只能有一个孩子。**

```
setContentView(scrollView); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T11:40:17.943

将您的父布局（LinearLayout 或 RelativeLayout）包含在`ScrollView`. 这就是你需要解决的所有问题。

```
ScrollView scroll = new ScrollView(this);
scroll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
      LayoutParams.FILL_PARENT));

LinearLayout layout=new LinearLayout(this);
layout.setOrientation(LinearLayout.VERTICAL);
layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
      LayoutParams.WRAP_CONTENT)); 

scroll.addView(layout,
      new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

setContentView(scroll); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:38:12.753

有一个布局可以做到这一点。使用[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)。

编辑：

你可以这样做：

```
LinearLayout layout=new LinearLayout(this);
layout.setOrientation(LinearLayout.VERTICAL);
layout.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,      LayoutParams.WRAP_CONTENT)); 
ScrollView scrollLayout = new ScrollView(this);
scrollLayout.addView(layout);
setContentView(scrollLayout); 
```

而只是所有的控制`layout`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T11:40:39.057

对于 java 文件，您可以先创建如下所示的 xml 文件，然后在内容视图中进行设置

然后

```
LinearLayout layout=new LinearLayout(this); 
```

而不是这条线

```
RelativeLayout linearMain = (LinearLayout) findViewById(R.id.RelativeLayout02); 
```

而不是在这个里面添加你的观点

```
linearMain.addView(button); 
```

像上面的行添加您的意见。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

      <RelativeLayout
        android:id="@+id/RelativeLayout02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" >

                    ..............
                    your views

      </RelativeLayout>
  </ScrollView> 
```

# javascript - 检查 html 属性是否存在并且使用 jquery 具有正确的值

> ID：11469722
> 
> 赞同：1
> 
> 时间：2012-07-13T11:36:23.723
> 
> 标签：javascript, jquery, dom

有没有更好的方法来检查属性：

1.  它存在。所以如果属性不存在，值必须为假
2.  值正确（布尔值）

```
var isOwner = false;
    if ($(selectedItem).is('[data-isOwner="True"]') || $(selectedItem).is('[data-isOwner="true"]')) {
        isOwner = true;
    } else {
        isOwner = false;
    } 
```

现在我需要检查*“真”*和*“真”* ...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:37:40.057

您可以将存储在*data-isOwner*中的值转换为小写，并且仅将该值与“true”进行比较。

```
if (($(selectedItem).attr ('data-isOwner') || '').toLowerCase () == 'true') 
```

* * *

上面的使用*`<wanted-value> || ''`*将使得如果*selectedItem*没有属性*data-isOwner*表达式将导致一个空字符串，您可以在其上调用*toLowerCase*而不会出错。

如果没有这个小技巧，您必须手动检查该属性是否确实存在，否则在尝试对未定义对象调用 toLowerCase 时会*遇到*运行*时**错误。*

 *** * *

如果您发现前面提到的解决方案令人困惑，您可以使用一些东西作为

```
var attr_value = $(selectedItem).attr ('data-isOwner');

if (typeof(attr_value) == 'string' && attr_value.toLowerCase () == 'true') {
  ...
} 
```**

# ios - iOS - 单击时我的 TextBox 会生成一个常规键盘，如何将其设置为生成一个数字键盘？

> ID：11469723
> 
> 赞同：0
> 
> 时间：2012-07-13T11:36:25.687
> 
> 标签：ios, textbox, keyboard, numeric

基本上我是 iOS 开发的新手。我有几个文本框，我希望用户在其中输入百分比（不是字母），所以我只需要一个数字键盘。当用户完成此操作后，我还希望他们轻松摆脱键盘。

以最简单的方式，在这里把我当作一个醉酒的 5 岁孩子，有人可以指导我完成所需的步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:40:39.680

假设一个 UITextField：

```
textField.keyboardType = UIKeyboardTypeNumberPad; 
```

# java - 无需提交即可填写 html 表单，只需打开已填写字段的浏览器即可。在 JAVA

> ID：11469724
> 
> 赞同：1
> 
> 时间：2012-07-13T11:36:27.977
> 
> 标签：java, html, forms, browser, htmlunit

我正在开发一个 JAVA SWING 应用程序，当我单击一个按钮时，我希望它打开一个浏览器页面，其中 HTML 表单字段已完全填充（包含我想从 JAVA 应用程序传递的数据），明白吗？

在这一刻，我正在使用 HtmlUnit 库，但如果你知道更好的东西，我愿意接受建议！

这就是我所拥有的：

```
WebClient webClient = new WebClient();
HtmlPage page1 = webClient.getPage("http://www.google.com");
HtmlForm form = page1.getFormByName("search");
HtmlButton button = form.getButtonByName("submitSearch");
HtmlTextInput textField = form.getInputByName("searchTxtField");
textField.setValueAttribute("TEST VALUE");
HtmlPage page2 = button.click(); //final line 
```

在最后一行我提交表单，而不是那个，我希望它打开一个带有文本的网络浏览器：“searchTxtField”中的“TEXT VALUE”。

请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:31:20.677

从 Java 6 开始，您可以使用[`public void browse(URI uri)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#browse%28java.net.URI%29). [`java.awt.Desktop`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html)您需要构建一个带有一些参数的 URI。

```
try {
    URI uri = new URI("http://www.google.com/#q=TEST+VALUE&oq=TEST+VALUE");
    Desktop desktop = null;
    if (Desktop.isDesktopSupported()) {
        desktop = Desktop.getDesktop();
    }
    if (desktop != null)
        desktop.browse(uri);
} catch (IOException ioe) {
    // log error
} 
```

检查[Google 搜索 URL 参数 - 查询字符串剖析](http://www.blueglass.com/blog/google-search-url-parameters-query-string-anatomy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:39:46.380

HtmlUnit 不控制任何外部网络浏览器。它**是**一个网络浏览器（没有任何图形用户界面）。

使用[Selenium](http://seleniumhq.org/)控制外部 Web 浏览器。

# mysql - 插入行 X 次

> ID：11469725
> 
> 赞同：1
> 
> 时间：2012-07-13T11:36:29.777
> 
> 标签：mysql, time, insert, row

我有个问题：

我如何插入一行并删除它 X 次？

我认为像`INSERT`时间戳一样的值并添加一个任务来删除它。

但我不知道如何添加 MySQL 任务以及这里是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:33:40.660

您需要使用 MySQL 中的事件调度程序：

MySQL调度器的基本原理是：

```
CREATE EVENT myevent
    ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 1 HOUR
    DO
      UPDATE myschema.mytable SET mycol = mycol + 1; 
```

来源： [http ://dev.mysql.com/doc/refman/5.1/en/create-event.html](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)

教程：[http ://www.sitepoint.com/how-to-create-mysql-events/](http://www.sitepoint.com/how-to-create-mysql-events/)

指南： [http ://dev.mysql.com/doc/refman/5.1/en/events.html](http://dev.mysql.com/doc/refman/5.1/en/events.html)

# php - PHP UBB remover 正则表达式产生错误

> ID：11469726
> 
> 赞同：0
> 
> 时间：2012-07-13T11:36:36.120
> 
> 标签：php, regex

我正在尝试修复某人的新闻系统中的一个错误，它使用 UBB 让编辑具有某种灵活性。因此，例如，为了允许**粗体**文本，使用以下正则表达式：

```
$message = preg_replace('_\[b\](.*?)\[/b\]_ise', "bold('\\1')", $message); 
```

这工作正常。但是，还有一个功能可以将UBB代码剥离出来显示在首页，如下：

```
$message = preg_replace('_\[b\](.*?)\[/b\]_ise', "\\1", $message); 
```

这个正则表达式会产生一个错误，这对我来说没有任何意义，毕竟它是完全相同的正则表达式。

```
Fatal error: preg_replace() [<a href='function.preg-replace'>function.preg-replace</a>]: Failed evaluating code: This is bold in /public_html/functions.inc.php on line 122

121 $message = preg_replace('_\[i\](.*?)\[/i\]_ise', "\\1", $message);
122 $message = preg_replace('_\[b\](.*?)\[/b\]_ise', "\\1", $message);
123 $message = preg_replace('_\[u\](.*?)\[/u\]_ise', "\\1", $message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:26:32.273

尝试使用：

```
$message = preg_replace('_\[b\](.*?)\[/b\]_is', "bold('\\1')", $message); 
```

和

```
$message = preg_replace('_\[b\](.*?)\[/b\]_is', "\\1", $message); 
```

# java - 复杂的字符串数据提取

> ID：11469727
> 
> 赞同：0
> 
> 时间：2012-07-13T11:36:39.007
> 
> 标签：java, regex

我想从给定的字符串中提取数据，我已经设法做到了，但遇到了一些困难。

我会给你两个字符串：

```
"ESS23300RGR","Boorum & Pease 23 Series Columnar Book, Record, 300 Page, Black/Red (23-300-R)","UnbeatableSale, Inc (Amazon Marketplace)","180.80","6.09","http://www.amazon.com/gp/offer-listing/B000DLBVU4/ref=olp_page_next?ie=UTF8&shipPromoFilter=0&startIndex=15&sort=sip&me=&condition=new","http://www.amazon.com/gp/offer-listing/B000DLBVU4/ref=olp_page_next?ie=UTF8&shipPromoFilter=0&startIndex=15&sort=sip&me=&condition=new"
"WLJ36210WGR","Basic Round Ring View Binder, 362 Line, 3 Ring, 1" Capacity, 8-1/2" x 5-1/2" Sheet Size, White","Gov Group (Amazon Marketplace)","3.61","7.70","http://www.amazon.com/gp/offer-listing/B0006OF55A/ref=olp_seeall_fm?ie=UTF8&shipPromoFilter=0&startIndex=0&sort=sip&me=&condition=new","http://www.amazon.com/gp/offer-listing/B0006OF55A/ref=olp_seeall_fm?ie=UTF8&shipPromoFilter=0&startIndex=0&sort=sip&me=&condition=new" 
```

这是我使用的表达式：regexChecker( **"[\w\s&\(\)-^,]{3,}"** , longString);

使用它，我成功地分离了第一个字符串，而第二个没有，因为它使用 , 和 " 作为某些部分的一部分。

如何从类似于第一个字符串的第二个字符串中提取数据？

需要提取的数据有：SKU,Name,Competitor,Price,Shipping,URL,SourceURL

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:11:51.740

尝试 ：

```
String[] tabS = myLine.substring(1, myLine.lenght() -1).split("\",\""); 
```

删除所有重要的`"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:29:44.047

检查以下代码。它给了我想要的两个输入字符串的结果。

```
StringBuilder testt = new StringBuilder("\"ESS23300RGR\",\"Boorum & Pease 23 Series Columnar Book, Record, 300 Page, Black/Red (23-300-R)\",\"UnbeatableSale, Inc (Amazon Marketplace)\",\"180.80\",\"6.09\",\"http://rads.stackoverflow.com/amzn/click/B000DLBVU4\",\"http://rads.stackoverflow.com/amzn/click/B000DLBVU4\"");

 Pattern varPattern = Pattern.compile(",\"", Pattern.CASE_INSENSITIVE);

 Matcher varMatcher = varPattern.matcher(testt);

 List<String> list = new ArrayList<String>();

 int startIndex = 0, endIndex = 0;
 boolean found = false;

 while (varMatcher.find()) {
  endIndex = varMatcher.start();
  if (startIndex == 0) {
   list.add(testt.substring(startIndex, endIndex));
  } else {
   list.add(testt.substring(startIndex + 1, endIndex));
  }
  startIndex = varMatcher.start();
  found = true;
 }
 if (found) {
  if (startIndex == 0) {
   list.add(testt.substring(startIndex));
  } else {
   list.add(testt.substring(startIndex + 1));
  }
 }
 for (String s : list) {
  System.out.println(s);
 }
} 
```

# ios - 访问 ipod 库以通过 upnp 进行流式传输

> ID：11469729
> 
> 赞同：1
> 
> 时间：2012-07-13T11:36:48.990
> 
> 标签：ios, itunes, media, upnp

我正在实现一个应用程序，该应用程序应该能够通过 upnp 将音乐从 ipad/iphone 流式传输到特定设备。我的应用程序应该是媒体服务器和控制点。

我正在使用 Platinum SDK，我设法从 mac 访问 iTunes 库，但不是从 ipad/iphone

关于如何提供 iTunes 库的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:49:58.497

这个问题的答案详细说明了如何从设备上的 iTunes 库歌曲中获取实际音频数据：

[MPMediaItems 原始歌曲数据](https://stackoverflow.com/questions/1656124/mpmediaitems-raw-song-data)

# c# - 如何自动将属性声明复制到基类

> ID：11469734
> 
> 赞同：1
> 
> 时间：2012-07-13T11:36:55.390
> 
> 标签：c#, visual-studio-2010, resharper, resharper-5.1

我`A`在基类的所有子类中都有一个属性`Base`。
如何将属性的抽象属性定义生成`A`到基类中`Base`？

我知道 ReSharper 的重构*Pull Members Up*，但这**会将**属性移动到基类。

我需要**基类中的抽象属性**和所有**子类中的****覆盖**属性。*Visual Studio*或*ReSharper*中是否有可以**自动**为我完成的重构？

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:43:20.827

在 ReSharper Pull Members Up 对话框中有一个复选框“Make abstract”： ![在此处输入图像描述](../Images/150baf962330655dd92c69e208af3da3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:41:23.450

我不确定 Resharper 是否可以自动向上移动并根据需要创建抽象，但您至少可以像这样手动定义它

在抽象类中：

```
public abstract double A
{
    get;
} 
```

在子类中：

```
public override double A
{
    get
    {
        return 3.141;
    }
} 
```

定义一个新接口（或使用现有接口）并在接口中定义属性可能是一种更清晰的设计。这样，您现有的子类就不必使用`override`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:43:58.057

```
public interface IInterface {
    string MyProperty { get; }
}

public class Class : IInterface {
    public string MyProperty { get; set; }
}

public abstract class AbstractClass {
    public abstract string Value { get; }
}

public class ConcreteClass : AbstractClass {

    private string m_Value;
    public override string Value {
        get { return m_Value; }
    }

    public void SetValue(string value) {
        m_Value = value;
    }
} 
```

我希望这对你有帮助。******

# iphone - 如何在 iPhone 上禁用相机缩放 (xcode)

> ID：11469736
> 
> 赞同：1
> 
> 时间：2012-07-13T11:37:05.183
> 
> 标签：iphone, xcode, camera

我目前正在构建一个使用 iPhone 相机的应用程序。这可能是一个奇怪的问题，但知道如何禁用缩放功能吗？

我已经在互联网上搜索了高低，到目前为止我一无所获。任何可能有一些想法的开发人员，我很乐意听取您的意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:42:37.707

一种猜测是通过在相机视图中放入一个透明视图来拦截所有传入的触摸，然后手动处理快门按钮的触摸。无论如何，我认为这不是公共 API 的一部分。

希望这可以帮助，

乔纳森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T18:10:28.850

只需将 UIPinchGestureRecognizer 添加到相机的覆盖视图将禁用捏缩放。这种方式比拦截所有触摸要好，因为它不会禁用点击更改焦点手势。

```
UIView *cameraOverlay = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
cameraOverlay.userInteractionEnabled = YES;
UIPinchGestureRecognizer *pinchRec = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(doPinch)];
[cameraOverlay addGestureRecognizer:pinchRec];
imagePicker.cameraOverlayView = cameraOverlay; 
```

# python - 如何防止列表推导包含空值？

> ID：11469738
> 
> 赞同：0
> 
> 时间：2012-07-13T11:37:11.077
> 
> 标签：python, list

所以我有以下代码：

```
columns1 = [row[d] for d in cols if d != ''] 
```

但是，它并不能阻止将空值放入列 1。

清除空值或最好完全阻止它们插入的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:40:26.617

也许你是这个意思？

```
columns1 = [row[d] for d in cols if row[d] != '']
                                    ^^^^ ^ 
```

# mysql - 在第二个表上选择条件

> ID：11469744
> 
> 赞同：0
> 
> 时间：2012-07-13T11:37:28.350
> 
> 标签：mysql, sql

我正在尝试使用运行良好的 JOIN 从 3 个表中选择记录，但我现在需要向 SELECT 添加一些我无法弄清楚的附加条件。我当前的选择是这样的：

```
SELECT user.*, address.*, state.* FROM user 
LEFT JOIN address ON user.id = address.user_id 
LEFT JOIN state ON user.id = state.user_id 
```

现在，地址和状态可能有多个记录，但两个表都有一个位字段来指示它们是主记录，这是我要选择的记录。我尝试`WHERE address.state = b'1'`在语句中添加一个，但它只返回那些具有主记录的记录，我最理想的做法是从按主字段排序的地址/状态表中选择顶部记录，以便在以下情况下选择主记录它存在，但如果没有主记录，将选择下一条记录。

如何使用 MySQL 5 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:40:08.090

将条件添加到您的`LEFT JOIN`：

```
LEFT JOIN address ON ( user.id = address.user_id AND address.state = b'1' ) 
```

左连接将只返回符合此条件的行，但您仍然会得到`users`没有主地址。

# java - 如何从 Java 中的对象列表创建 XML 文件？

> ID：11469745
> 
> 赞同：5
> 
> 时间：2012-07-13T11:37:33.453
> 
> 标签：java, xml, serialization

我想从一个对象列表创建一个 XML 文件。对象具有一些属性，因此标签将是属性名称，相应的数据将在标签内。

这是示例：

我有一个 List `myEquipmentList`，其中包含该类的 100 个对象`Equipment`。现在，类中的属性`Equipment`是 id、name、size、measures、unit_of_measure 等。

现在我想创建类似于这样的 XML。

```
<Equipment id=1>``
<name>Ruler</name>
<size>1000</size>
<measures>length</measures>
<unit_of_measure>meter</unit_of_measure>
</Equipment> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T11:41:37.293

您可以使用对象列表创建一个类，然后将列表序列化为 xml，最后将 xml 反序列化为列表。

请参阅此链接 - 非常有用： [如何使用 XStream 将对象列表转换为 XML 文档](https://stackoverflow.com/questions/4077071/how-to-convert-list-of-object-to-xml-doc-using-xstream)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T11:51:15.813

阅读有关 JAXB 的信息。

你可以有一个这样的类来生成你想要的 XML：

```
@XmlRootElement
public class Equipment {
  private Long id;
  private String name;
  private Integer size;
  ...etc...

  @XmlAttribute
  public Long getId() {
     return id;
  }

  public void setId(Long id) {
     this.id = id;
  }

  @XmlElement
  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  ... etc...

} 
```

你会在谷歌上找到大量关于在 stackoverflow 上搜索的 JAXB 信息。

[http://jaxb.java.net/](http://jaxb.java.net/)

[http://jaxb.java.net/tutorial/](http://jaxb.java.net/tutorial/)

这些看起来像几个简单的教程：

[http://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/)

[http://www.vogella.com/articles/JAXB/article.html](http://www.vogella.com/articles/JAXB/article.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:39:22.753

执行此操作的最简单方法之一是简单地遍历列表并使用字符串来编写 XML。没什么特别的，非常快速和容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T13:20:27.683

我倾向于使用一个名为[Simple XML Serialization](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php) over JAXB 的库，我不得不说它非常简单，而且非常灵活。

[Simple 和 JAXB 之间有很好的](http://blog.bdoughan.com/2010/10/how-does-jaxb-compare-to-simple.html)比较。

# javascript - Jquery：基于下拉值的启用/禁用不适用于动态生成的输入

> ID：11469749
> 
> 赞同：0
> 
> 时间：2012-07-13T11:37:58.070
> 
> 标签：javascript, jquery, jquery-selectors, html-select

我有一个表单，我可以在其中添加新行以使用 jquery 增加表单元素。在那种形式中，我有两个下拉选项`(Name:type and accounts)`和两个文本输入`(Name:debit_amount and credit_amount)`。

问题：

我开发了一个 jquery 代码来启用/禁用基于从下拉选项中选择的值的文本输入。但是只有当我不添加新行时，代码才能正常工作。如果我添加一个新行，它只适用于第一行，我的意思是它只禁用/启用第一行的输入。

为了清楚起见，我没有提供在下面添加新行的代码，但要获得我所有代码的实时图片，请查看此链接，[jsfiddle.net](http://jsfiddle.net/Jpb5Q/)

你能告诉我我应该在我的代码中带来什么改变，以便能够根据所选值禁用/启用所有输入（包括生成的行的输入）吗？

我的 HTML

```
<h2><a href="#" id="addScnt">Add Another Input Box</a></h2>
<table class="dynatable">
<thead>
    <tr>
        <th>Type</th>
        <th>Account Name</th>
        <th>Debit</th>
        <th>Credit</th>
    </tr>
</thead>
<tbody id="p_scents">
    <tr>
        <td>
            <select name="type" id="type">
                <option value="Debit">Debit</option>
                <option value="Credit">Credit</option>
            </select>
         </td>

        <td>
            <select name="accounts" id="accounts">
                <option value="">SELECT</option>
                <option value="One">One</option>
                <option value="Two">Two</option>
            </select>
        </td>

        <td>
            <input type="text" name="debit_amount" id="debit_amount" />
        </td>
        <td>
            <input type="text" name="credit_amount" id="credit_amount"/>
        </td>

    </tr>
</tbody> 
```

### 禁用/启用条件

**1.**如果 type selected == Debit 并且选择了账户中的值，则启用 debit_amount 输入并禁用 credit_amount 输入

**2.**如果 type selected == Credit 并且选择了来自 accounts 的值，则启用 credit_amount 输入并禁用 debit_amount 输入

**3.**如果没有选择类型和帐户的任何值，则禁用两者

### 基于下拉值禁用/启用输入的我的 Jquery 代码

```
//ON the change of accounts(dropdown select)

$("#accounts").change(function() {
    var type = $("select#type").val();
    var accounts = $("select#accounts").val();
    if (type == "Debit") {
        $('#credit_amount').attr("disabled", true);
        $('#debit_amount').removeAttr("disabled", true);
    }
    if (type == "Credit") {
        $('#debit_amount').attr("disabled", true);
        $('#credit_amount').removeAttr("disabled", true);
    }
    if (accounts == "") {
        $('input[name=credit_amount]').val('');
        $('input[name=debit_amount]').val('');
        $('#debit_amount').attr("disabled", true);
        $('#credit_amount').attr("disabled", true);
    }
});

//ON the change of type(dropdown select)

$("#type").change(function() {
    var accounts = $("select#accounts").val();
    var type = $("select#type").val();
    if (type == "Debit" && accounts != '') {
        $('input[name=credit_amount]').val('');
        $('#credit_amount').attr("disabled", true);
        $('#debit_amount').removeAttr("disabled", true);
    }
    if (type == "Credit" && accounts != '') {
        $('input[name=debit_amount]').val('');
        $('#debit_amount').attr("disabled", true);
        $('#credit_amount').removeAttr("disabled", true);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:01:31.190

问题是您的输入元素都具有相同的 id 属性值，即：“debit_amount”和“credit_amount”，因此 jQuery 不知道“#debit_amount”和“#credit_amount”选择器指的是哪些。

元素 ID 在页面中应该是唯一的，因此您应该在每个元素的末尾附加一个序列号，例如：

```
<select name="accounts_1" id="accounts_1">
....
<input type="text" name="debit_amount_1" id="debit_amount_1" />
<input type="text" name="credit_amount_1" id="credit_amount_1" /> 
```

两种解决方案：

*   使用 jQuery 遍历 API 查找与触发 onChange 事件的选择元素相关的输入元素。这很脆弱，如果你改变你的标记太多会破坏
*   从 <select> id 属性中解析出序列号，并使用它来查找要修改的 <input>

# jsf - Facelets：ui:param 默认值

> ID：11469750
> 
> 赞同：10
> 
> 时间：2012-07-13T11:38:05.120
> 
> 标签：jsf, facelets

如何为 facelet 模板参数定义默认值？考虑使用模板参数的以下元素：

```
<h:outputText value="#{templParam}"></h:outputText> 
```

上面的行将打印模板参数，该参数由使用模板的标签`templParam` 传递：`ui:param``ui:composition`

```
<ui:param name="templParam" value="Hello world"></ui:param> 
```

但如果`ui:param`标签丢失，则不会打印任何内容。虽然，在这种情况下如何打印例如“默认值”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-21T07:40:32.467

可以使用这个：

```
<h:outputText value="#{empty templParam ? 'Default value' : templParam}" /> 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T11:38:05.620

可以通过使用[三元运算符](http://www.devdaily.com/java/edu/pj/pj010018)检查空值来定义默认值。

```
<h:outputText value="#{templParam != null ? templParam : 'Default value'}"></h:outputText> 
```

如果参数未通过`ui:param`标签传递，这将打印“默认值”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-03T16:50:30.667

在组合标记定义模板的开始之后，模板参数可以设置为它的默认值（如果它是空的），这样它的所有后续使用都不需要每次都检查空值（以及它的默认值）位于代码中的一处）。

```
<html xmlns:c="http://java.sun.com/jsp/jstl/core" >

<ui:composition>
    <c:set var="templParam" value="#{empty templParam ? 'Default value' : templParam}"
           scope="request" />
    <h:outputText value="Use 1: #{templParam}" />
    <h:outputText value="Use 2: #{templParam}" /> 
```

# c - 'this' 未声明（在此函数中首次使用）

> ID：11469760
> 
> 赞同：0
> 
> 时间：2012-07-13T11:38:31.597
> 
> 标签：c

我是 C 的新手，使用 Mingw32 编译器。现在我正在创建从 IL 到 C (Native) 的反编译器

生成的代码（没有 System.Object）：

**反编译TestApplication_Program.c**

```
#include "DecompileTestApplication_Program.h"
DecompileTestApplication_Program* DecompileTestApplication_Program__ctor( ) {
    if (array__DecompileTestApplication_Program == 0) {
        array__DecompileTestApplication_Program=(void**)malloc(sizeof(void*)*(capacity__DecompileTestApplication_Program=4));
    }
    DecompileTestApplication_Program* this;
    //error: 'this' undeclared (first use in this function)
    if (count__DecompileTestApplication_Program==0) {
        this=(DecompileTestApplication_Program*)malloc(sizeof(DecompileTestApplication_Program));
        goto RealConstructor;
    }
    this=(DecompileTestApplication_Program*)array__DecompileTestApplication_Program[--count__DecompileTestApplication_Program];
    RealConstructor:
    this->ind = 0;
    this->a = 1;
    this->b = 3;
    //this._inherit_object_( ); //this is OOP tests ,still working on it
    return this;
}
void DecompileTestApplication_Program_Main( ) {
    int var_0_02;
    var_0_02 = 0;
    var_0_02 = ( var_0_02 + 1 );
    int var_1_08;
    var_1_08 = 1;
    int var_2_0A;
    var_2_0A = 3;
    var_1_08 = ( var_1_08 + var_2_0A );
    var_0_02 = ( var_0_02 + ( var_1_08 + var_2_0A ) );
    DecompileTestApplication_Program_blat = ( DecompileTestApplication_Program_blat + ++DecompileTestApplication_Program_bpa );
}
void DecompileTestApplication_Program__cctor( ) {
    DecompileTestApplication_Program_blat = 1;
    DecompileTestApplication_Program_bpa = 4;
} 
```

**反编译TestApplication_Program.h**

```
#ifndef DecompileTestApplication_Program
#define DecompileTestApplication_Program
/*
Type's Name: DecompileTestApplication.Program
Time to Parse: 40.0023ms
*/
#include <stdio.h>
typedef struct {
    //Variables
    int ind;
    int a;
    int b;
} DecompileTestApplication_Program;
static int DecompileTestApplication_Program_blat;
static int DecompileTestApplication_Program_bpa;
//Methods
void DecompileTestApplication_Program_Main( );
DecompileTestApplication_Program* DecompileTestApplication_Program__ctor( );
void DecompileTestApplication_Program__cctor( );
static int count__DecompileTestApplication_Program=0;
static int capacity__DecompileTestApplication_Program=0;
static DecompileTestApplication_Program** array__DecompileTestApplication_Program=0;
#endif 
```

**@main.h**

```
void main(); 
```

**@main.cpp**

```
//bookmart for includes
#include "DecompileTestApplication_Program.h"

void main() {
    //bookmark for initialize
    DecompileTestApplication_Program__cctor();
    DecompileTestApplication_Program_Main();
} 
```

在第一个文件中发现的错误。我搜索了这个错误的解决方案一段时间，但没有找到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T11:48:43.100

```
#define DecompileTestApplication_Program 
```

这意味着你在任何地方看到这个词`DecompileTestApplication_Program`，它都会被删除。因此，您尝试声明`this`：

```
DecompileTestApplication_Program* this; 
```

扩展到

```
* this; 
```

它试图取消引用未声明的变量`this`。要解决此问题，请更改宏名称。

# java - 在 Swing 应用程序中命名基本/根 Java 类的标准方法

> ID：11469762
> 
> 赞同：1
> 
> 时间：2012-07-13T11:38:44.820
> 
> 标签：java, swing

我应该在 Swing 应用程序中命名我的基本 Java 类或根 Java 类？

现在我的项目被调用`FirstSwingProject`，然后是 src 文件夹和一个名为 base 的包。

但是我的主类叫做 PaneFactory.java，因为我的想法是我正在创建一个可以打开新便笺的 Swing 应用程序。

任何人都可以为这门课推荐一个更好的名字吗？

头等舱有 Java 命名约定吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:42:07.767

我会称之为

```
com.yourdomainname.yourprojectname.Main 
```

“主要”类没有命名约定。类用 CamelCase 拼写，并且应该始终放在一个包中。打包它的约定以相反的顺序在它们前面加上您的域名。所以如果你的域名是jojo.com，应该是

```
com.jojo.yourprojectname.Main 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:44:02.633

没有约定，但我个人通常将我的基类命名为与我打算用于我的程序||应用程序的名称相同或相似。所以在你的情况下可能是 NoteReader 什么的？

或者正如其他人建议的那样 Main.java

# c++ - 多层次的继承和dynamic_cast

> ID：11469763
> 
> 赞同：2
> 
> 时间：2012-07-13T11:39:17.317
> 
> 标签：c++

先说一些背景：

我正在研究一些实现 UI 界面的遗留代码。代码的结构方式是它有一个基类（实际上它是一个结构）WinBase，然后将其派生到各种图形对象。

```
WinBase:
 - Button
 - DialogWin
 - (etc...)
 - EditWin 
```

WinBase 有一个成员`WinBase **children`，用于在每个对象的所有子项上保持制表符。这些孩子在运行时以标准的 new[]/delete[] 方式创建和销毁。

这些对象的所有方法/函数都假定它们正在接收指向`WinBase`对象的指针，并`dynamic_cast<>`用于确保/验证正在使用适当的指针。

稍后对代码的更改添加了另外两个类/结构（`ListBox`和`TextBox`），它们派生自`EditWin`它们，而它们又派生自`WinBase`.

所以...我有指针`WinBase`指向`ListBox`和`TextBox`. 正如我所说，`dynamic_cast<>`在整个代码中都使用了，但我不确定当调用像这个构造函数这样的函数时它有多安全。

```
TextBox(WinBase *pw,(...)); 
```

直接从`WinBase`to 转换`ListBox`和反之亦然（例如）有多安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:50:52.647

因此，您可以尝试使用 boost::polymorphic_cast 或 boost::polymorphic_downcast [http://www.boost.org/doc/libs/1_50_0/libs/conversion/cast.htm](http://www.boost.org/doc/libs/1_50_0/libs/conversion/cast.htm)如果 dynamic_cast 返回 0，它会抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:51:44.073

首先，当 a被赋予期望 a 的方法时，为什么要将`WinBase`a强制转换为 a ？如果你需要一个演员，你应该重新考虑设计，因为期望的方法应该只在接口上运行。`ListBox``ListBox``WinBase``WinBase``WinBase's`

当且仅当，`ListBox`派生自`WinBase`（直接或间接），您总是可以从 a`ListBox*`转换为 a `WinBase*`（或引用），因为 ListBox[**是 A**](http://en.wikipedia.org/wiki/Is-a) `WinBase`。

反过来铸造是不安全的，因为你永远不会知道`WinBase*`你得到的实际上是 a`ListBox*`还是其他东西，这会带来麻烦。您当然可以使用`dynamic_cast<>`它来测试它是否真的是`ListBox*`.，但是任何动态转换都需要对您的设计进行审查。

尤其是这种向下转换会在构造函数中带来麻烦，因为当你没有得到你想要的东西时，你的代码应该做什么？抛出异常，因为唯一的出路不是一个好主意，最好[完全避免](http://herbsutter.com/2008/07/25/constructor-exceptions-in-c-c-and-java/)（除非你知道你在做什么）。

# jquery - 自动完成未应用

> ID：11469791
> 
> 赞同：0
> 
> 时间：2012-07-13T11:41:13.480
> 
> 标签：jquery, html, css, meteor

我有一个放置在`document.ready`函数内部的 JQuery tokeninput 自动完成代码。tokeninput 应用于文本框。此代码适用于放置在正文标记内的文本框。

我有一个模板，在模板内我有一个包含文本框的弹出窗口。当我将相同的 JQuery 令牌输入代码应用于弹出窗口内的此文本框时。它不起作用..弹出窗口是否有自己的事件，如文档准备功能或类似的东西？

那么我在哪里可以将我的 JQuery tokeninput 自动完成代码放在弹出窗口或模板中？

所以这是我的自动完成代码：

```
<script type="text/javascript">
$(document).ready(function() {
alert('Readyyyyyyyy');
    $("#demo-input-facebook-theme").tokenInput(        
          [{
            "first_name": "abc",
            "last_name": "ABC",
            "email": "abc@gmail.com",
            "url": "Image url"
        },

            {
            "first_name": "pqr",
            "last_name": "PQR",
            "email": "pqr@gmail.com",
            "url": "Image url"
        },
        {
            "first_name": "lmn",
            "last_name": "LMN",
            "email": "lmn@yahoo.com",
            "url": "Image url"
        }];

    );

});
</script> 
```

我的弹出模板代码：

```
<div id="popupMessage" style="display:none;">
        <div class="PopupHeader">Send a Message
         <a href="#" onclick="HideModalPopup('popupMessage'); return false;">X</a>         
    </div>

   <div class="popupContainer">

        <div class="addnames">
        <strong>To:</strong> Daniel Lewis, Michael Jackson, Sarah Day O'connor, Mitt Romney, Clint
        Eastwood, Samuel Jackson <a href class="addMore">Add More</a>
        </div>
        <div class="fields longtextbox">
            <p>Add from Facebook and Activity Network</p>
            <!-- <input type="text"/> -->
        <input type="text" id="demo-input-facebook-theme" name="blah2"  />

        </div>

        <div class="fields">
            <p>Subject <span class="require">*</span></p>
            <input type="text" />
        </div>
        <div class="fields">
            <p>Message <span class="require">*</span></p>
            <textarea rows="6"></textarea>
        </div>

            <div class="NxtActivity">
            <a href="#">Cancel</a>
                <button type = "submit" onclick = "my();">Send Message</button>
        </div>
   </div>
</div> 
```

单击发送消息按钮会调用此弹出窗口....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:48:22.593

我猜：

弹出窗口可能已经加载，您可能只显示它。因此，当您实际使用 document.ready 或 load() 函数时，它不会触发。

# java - 通过有效的 UI 性能持久化数据的有效方法

> ID：11469796
> 
> 赞同：0
> 
> 时间：2012-07-13T11:41:36.427
> 
> 标签：java, android, database

想象一个显示用户统计信息的应用程序。我可以有一个像这样的对象：

```
public class Statistic {
     private int id,value;
} 
```

值应该在不同的应用程序执行之间保持不变。为持久系统使用数据库，databaseAdapter 可以具有：

```
public void saveStatisticValue(int id,int newValue);
public int getStatisticValue(int id); 
```

如果由于数据库延迟从 UI 线程调用，在对象的 getter/setter 方法中使用对数据库适配器的调用可能会影响应用程序性能。例如，如果我想显示一个包含所有统计信息的 Activity，每个 Statistic 对象的 getter 的数据库延迟可能会导致 ANR。

```
public class Statistic {

    ....

    public synchronized void setValue(int newValue) {
        dbAdapter.saveStatisticValue(this.getId(),newValue);
    }
    public synchronized int getValue() {
        return dbAdapter.getStatisticValue(this.getId());
    }

    ....

 } 
```

是否有某种方法可以减少此类模型对数据库的影响？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:50:41.943

正如您已经观察到的，模型的 geter/setter 方法应该是异步的。

例如，getter_statics 的 API 可以是：

```
Request getStatics(RequestCallback callback);

interface RequestCallback {
        void notify(int id ,int value);
} 
```

将`requestCallback`在与被调用的线程相同的线程中`getStatics`调用，通常是 UI 线程。

Android 中提供了两个类来帮助您实现这种通用模式： [Handler](http://developer.android.com/reference/android/os/Handler.html)和[SyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。请阅读文档以获得彻底的理解。

你也可以看看[这篇](http://www.vogella.com/articles/AndroidPerformance/article.html)文章。

# android - android模拟器中的应用程序运行问题

> ID：11469800
> 
> 赞同：1
> 
> 时间：2012-07-13T11:41:44.643
> 
> 标签：android, eclipse, emulation

我正在尝试在启用了 GPU 仿真的 android 模拟器中运行应用程序。我的应用程序运行良好，但突然停止工作，我可以在堆栈跟踪中看到此消息：

```
07-13 17:05:17.011: E/EGL_emulation(1437): rcMakeCurrent returned EGL_FALSE
07-13 17:05:17.024: E/EGL_emulation(1437): tid 1450: eglMakeCurrent(952): error 0x3006 (EGL_BAD_CONTEXT) 
```

任何人都遇到过这个问题，如果您有任何问题，请分享您的解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:51:07.750

当您使用 CPU/ABI:Intel Atom(x86) 创建模拟器集目标时。要创建它，您应该更新 Android SDK Manager - 安装“Intel x86 Atom System image”并加速：extras/“Intel Hardware Accelerated Execution Manager”

# image-processing - 如何从视频中提取图像序列？

> ID：11469801
> 
> 赞同：-4
> 
> 时间：2012-07-13T11:41:48.103
> 
> 标签：image-processing

除了 VirtualHub 有什么推荐吗？因为我需要找到另一个软件来与 VirtualHub 进行比较来完成我的作业。如果可能的话，建议必须购买完整版的软件。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:44:27.417

FFMPEG 是 FOSS： http: [//ffmpeg.org/](http://ffmpeg.org/)

# php - 访问 $_SESSION 会破坏 Firefox 中的视频流？

> ID：11469802
> 
> 赞同：0
> 
> 时间：2012-07-13T11:41:50.983
> 
> 标签：php, video-streaming

在我的 Zend Framework 控制器之一中，我想通过 nginx 流式传输 mp4 视频。我的设置是这样的：

```
 public function streamAction() {

        $this->_helper->layout->disableLayout();
        $this->_helper->viewRenderer->setNoRender(TRUE);
        if ($this->view->user) { //<--if I skip this check - everything works fine
            $this->getResponse()
                ->setHeader('Content-Disposition', 'inline; filename=video.mp4')
                ->setHeader('X-Accel-Redirect', '/media/video/video.mp4')
                ->setHeader('Content-type', 'video/mp4')
                ->setHeader('Content-length', '2219550244')
            ;
        }
    } 
```

早些时候在一个插件中，`preDispatch`我为视图设置了用户属性：

```
...
$view = $layout->getView();
$user = Application_Model_User::get_auth_user(); // here I check the usual Zend_Auth `hasIdentity()`
$view->user = $user;
... 
```

`text/html decoder`但是我在哪里检查用户身份并不重要，如果我检查它 - 视频流在 Firefox（它抱怨）和 Opera中不起作用，但在 Chrome 中仍然有效。

`hasIdentity`我想如果 Zend_Auth被调用，视频会输出一些东西。但我真的不明白：我在插件中尽早进行检查，然后将结果分配给视图属性。如果我在设置响应标头之前不检查属性 - 一切正常。如果我检查视图属性 - 那么流已损坏，但如何？

另外，在使用 Zend 安全系统的情况下，是否有类似这样的视频流实践？

**更新**

好吧，实际上`Zend_Auth`不是导致腐败的原因，它的访问权限`$_SESSION`：

```
...
if ($_SESSION) {
    $this->getResponse()
        ->setHeader('Content-Disposition', 'inline; filename=video.mp4')
        ->setHeader('X-Accel-Redirect', '/media/video/video.mp4')
        ->setHeader('Content-type', 'video/mp4')
        ->setHeader('Content-length', '2219550244')
    ;
} 
```

以上也不会在 Firefox 和 Opera 中提供流。

**更新 2**

我已将代码简化为 4 行 php 文件：

```
<?php

session_start();

if (isset($_SESSION['Zend_Auth'])) { // same with $_COOKIE['PHPSESSID']
    header('Content-type: video/mp4');
    readfile('/home/user/Videos/video.mp4');
} 
```

再次，如果我删除检查（*或检查不存在的密钥，如`$_SESSION['rubbish']`*） - 在 Firefox 中流是可以的。问题出在 php 会话中，所以 ZF 没有怀疑。

# sorting - Haskell——具有不纯函数的排序列表

> ID：11469806
> 
> 赞同：11
> 
> 时间：2012-07-13T11:42:03.743
> 
> 标签：sorting, haskell, io

如何使用 IO 比较功能对列表进行排序？

```
sortWith :: [String] -> (String -> String -> IO Ordering) -> IO [String] 
```

Sortby 期望`(a->a->Ordering)`但我不知道如何处理它。我懒得自己实现快速排序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T12:29:32.963

恐怕没有简单的方法。如果可以举起

```
sortBy :: Ord a => (a -> a -> Ordering) -> [a] -> [a] 
```

到

```
sortByM :: (Ord a, Monad m) => (a -> a -> m Ordering) -> [a] -> m [a] 
```

您可以看到 的实现中的比较顺序`sortBy`，违反了引用透明度。

一般来说，从`xxxM`到到很容易，`xxx`但反过来却不是。

可能的选项：

*   实现一元排序方法
*   使用包含插入排序的 monadlist 库（如 dflemstr 的回答[）](http://hackage.haskell.org/package/monadlist)
*   用作`unsafePerformIO`黑客
*   切换到按键排序并使用[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)

    ```
    sortOnM :: (Monad m, Ord k) => (a -> m k) -> [a] -> m [a]
    sortOnM f xs = liftM (map fst . sortBy (comparing snd)) $
                     mapM (\x -> liftM (x,) (f x)) xs 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T12:09:17.413

该`sortBy`函数使用归并排序作为 GHC 中的算法，但 Haskell 98 报告规定应该使用插入排序。

为简单起见，因为我没有编译器，所以我无法测试我的代码，我将在这里实现插入排序：

```
import Data.Foldable (foldrM)

insertByM :: (a -> a -> IO Ordering) -> a -> [a] -> IO [a]
insertByM _   x [] = return [x]
insertByM cmp x ys@(y:ys') = do
  p <- cmp x y
  case p of
    GT -> do
      rest <- insertByM cmp x ys'
      return $ y : rest
    _ -> return $ x : ys

sortByM :: (a -> a -> IO Ordering) -> [a] -> IO [a]
sortByM cmp = foldrM (insertByM cmp) [] 
```

正如我所说，我没有测试过这段代码，但它可以/应该工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T21:57:24.743

哦，我以前做过这个！使用一元比较器进行合并排序：

```
type MComparator m a = a -> a -> m Ordering

sortByM :: (Monad m, Functor m) => MComparator m a -> [a] -> m [a]
sortByM cmp []  = return []
sortByM cmp [x] = return [x]
sortByM cmp xs = do
  let (ys, zs) = partition xs
  ys' <- sortByM cmp ys
  zs' <- sortByM cmp zs
  merge ys' zs'
  where merge [] bs = return bs
        merge as [] = return as
        merge (a:as) (b:bs) = do
          comparison <- cmp a b
          case comparison of
            LT -> (a:) <$> merge as (b:bs)
            _  -> (b:) <$> merge (a:as) bs
        partition xs = splitAt (length xs `quot` 2) xs 
```

From my blog post: [http://unknownparallel.wordpress.com/2012/07/03/using-monadic-effects-to-reverse-a-merge-sort/](http://unknownparallel.wordpress.com/2012/07/03/using-monadic-effects-to-reverse-a-merge-sort/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-13T12:01:05.473

是拉里·沃尔（Larry Wall）说的，懒惰是程序员的三大美德之一吗？

您似乎想将 (a -> a -> b) 类型的函数转换为 (a -> a -> cb) 类型的函数。让我们将其插入[Hoogle](http://www.haskell.org/hoogle/?hoogle=%28a+-%3E+a+-%3E+b%29+-%3E+%28a+-%3E+a+-%3E+m+b%29)。现在，如果您知道 IO 是 Monad，您将在 liftM2 中看到第 10 场比赛。检查（liftM2 sortBy）的类型，是你想要的吗？

# php - php中的整数

> ID：11469814
> 
> 赞同：0
> 
> 时间：2012-07-13T11:42:46.887
> 
> 标签：php, mysql

您好，我如何将以下内容四舍五入到小数点后两位。

```
echo
     "<div class='quote-results-result'>ex VAT  £" .
         ((($_POST['qtylitres'] *  $price ['Price']) + $fuelmargin['margin']) / 1.2) .
       "</div>" 
```

我需要四舍五入一个php新手的价格位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:43:46.957

像这样使用 number_format 函数：

```
$number = 1234.56789
$new_number = number_format($number, 2, '.', '');
echo $new_number;

Output: 1234.57 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:44:43.260

使用php 手册中的[round函数](http://php.net/manual/en/function.round.php)

```
echo round(3.4);         // 3
echo round(3.5);         // 4
echo round(3.6);         // 4
echo round(3.6, 0);      // 4
echo round(1.95583, 2);  // 1.96
echo round(1241757, -3); // 1242000
echo round(5.045, 2);    // 5.05
echo round(5.055, 2);    // 5.06 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T11:46:09.153

`round($VARIABLE_NAME,2);`//这会将变量四舍五入到小数点后两位

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T12:07:52.487

```
function roundoff($number,$format)
{  
    if($number != '') {
        $newNumber=$this->exp_to_dec($number);
        $num = explode('.',$newNumber);
        //pr($num);
        if(isset($num[1]) && $num[1] != 0) {    
            $dec = substr($num[1],0,$format);
        } else {
            $dec = '00';
        }
    } else {
        $num[0] = 0;
        $dec = '00';
    }
  return $num[0].'.'.$dec;
}

    function exp_to_dec($float_str) 
```

// 以十进制格式格式化浮点数字符串，支持带符号的浮点数，也支持非标准格式，例如 0.2e+2 表示 20 { // 确保它是标准的 php 浮点数字符串（即，将 0.2e+2 更改为 20） // 如果浮点数在一定范围内，php 会自动格式化为十进制 $float_str = ( string ) (( float ) ($float_str));

```
 // if there is an E in the float string
    if (($pos = strpos ( strtolower ( $float_str ), 'e' )) !== false) {
        // get either side of the E, e.g. 1.6E+6 => exp E+6, num 1.6
        $exp = substr ( $float_str, $pos + 1 );
        $num = substr ( $float_str, 0, $pos );

        // strip off num sign, if there is one, and leave it off if its + (not required)
        if ((($num_sign = $num [0]) === '+') || ($num_sign === '-'))
            $num = substr ( $num, 1 );
        else
            $num_sign = '';
        if ($num_sign === '+')
            $num_sign = '';

    // strip off exponential sign ('+' or '-' as in 'E+6') if there is one, otherwise throw error, e.g. E+6 => '+'
        if ((($exp_sign = $exp [0]) === '+') || ($exp_sign === '-'))
            $exp = substr ( $exp, 1 );
        else
            trigger_error ( "Could not convert exponential notation to decimal notation: invalid float string '$float_str'", E_USER_ERROR );

    // get the number of decimal places to the right of the decimal point (or 0 if there is no dec point), e.g., 1.6 => 1
        $right_dec_places = (($dec_pos = strpos ( $num, '.' )) === false) ? 0 : strlen ( substr ( $num, $dec_pos + 1 ) );
        // get the number of decimal places to the left of the decimal point (or the length of the entire num if there is no dec point), e.g. 1.6 => 1
        $left_dec_places = ($dec_pos === false) ? strlen ( $num ) : strlen ( substr ( $num, 0, $dec_pos ) );

        // work out number of zeros from exp, exp sign and dec places, e.g. exp 6, exp sign +, dec places 1 => num zeros 5
        if ($exp_sign === '+')
            $num_zeros = $exp - $right_dec_places;
        else
            $num_zeros = $exp - $left_dec_places;

    // build a string with $num_zeros zeros, e.g. '0' 5 times => '00000'
        $zeros = str_pad ( '', $num_zeros, '0' );

        // strip decimal from num, e.g. 1.6 => 16
        if ($dec_pos !== false)
            $num = str_replace ( '.', '', $num );

    // if positive exponent, return like 1600000
        if ($exp_sign === '+')
            return $num_sign . $num . $zeros;

    // if negative exponent, return like 0.0000016
        else
            return $num_sign . '0.' . $zeros . $num;
    } // otherwise, assume already in decimal notation and return
    else
        return $float_str;
} 
```

# php - mysql 提供“无法初始化字符集 utf-8（路径：/usr/share/mysql/charsets/）”错误，那里没有 utf8.xml 文件

> ID：11469815
> 
> 赞同：9
> 
> 时间：2012-07-13T11:42:50.547
> 
> 标签：php, mysql, mysqli, utf-8, character-encoding

我正在学习更多关于 mysqli 和所有令人兴奋的东西，但我很快就被阻止了。

我的 debian 机器上有一个本地服务器。它是最新的，安装了 php 和 mysql 并且运行顺利。我想了解更多关于 mysqli 的知识，并尝试了以下代码：

```
<?php

$db = new mysqli('localhost', 'userdb', 'pwuserdb', 'db');

if(!$db->set_charset('utf-8')) {
    printf("Error setting the character set utf-8: %s\n", $db->error);
} else {
    printf("Current character set is: %s\n", $db->character_set_name());
}

print_r($db->get_charset());

?> 
```

令我惊讶的是，在访问该页面时收到以下消息： `Error setting the character set utf-8: Can't initialize character set utf-8 (path: /usr/share/mysql/charsets/) stdClass Object ( [charset] => latin1 [collation] => latin1_swedish_ci [dir] => [min_length] => 1 [max_length] => 1 [number] => 8 [state] => 801 [comment] => cp1252 West European )`

我心想这是合乎逻辑的，因为我没有将 utf-8 设置为 mysql 的标准字符集，所以我在 my.cnf 文件中完成了以下设置：

为了`[mysqld]`

```
default-character-set=utf8 
```

为了`[client]`

```
default-character-set=utf8 
```

我还从命令行登录 mysql 并运行 `ALTER DATABASE db CHARSET=utf8;`

我还从命令行重新加载了 mysql 以及 apache。当查看 mysql 中的情况时，几乎一切看起来都很好：

```
mysql> SHOW VARIABLES LIKE 'character_set%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec) 
```

但由于 mysql 似乎无法找到 utf8 文件，我`utf8.xml`在文件夹中检查了一个文件，`/usr/share/mysql/charsets/`但没有。在`Index.xml`此目录下的文件中，在字符集列表中提到了 utf8，但我认为问题出在目录中缺少 xml 文件这一事实。

仅供参考，我的系统语言环境都是 UTF8（en 和 pl），我无法理解为什么 utf8.xml 文件不在目录中，因为我根本没有在这个目录或其内容上胡闹。

欢迎任何想法/建议/推荐。

先感谢您！

干杯!

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T12:15:06.713

你试过了吗

```
if(!$db->set_charset('utf8')) { 
```

没有破折号？

since all your research on your system points to utf8 instead of utf-8 ;)

# mysql - 使用大型数据集提高一次性查询的 MySQL 性能

> ID：11469818
> 
> 赞同：2
> 
> 时间：2012-07-13T11:43:08.387
> 
> 标签：mysql, sql, database, innodb

我之前问过一个关于如何分析大型数据集的问题（[如何分析 13GB 的数据](https://stackoverflow.com/questions/11449965/how-can-i-analyse-13gb-of-data)）。一个有希望的回应是使用自然键将数据添加到 MySQL 数据库中，从而利用 INNODB 的聚集索引。

我已将数据添加到数据库中，其架构如下所示：

```
TorrentsPerPeer
+----------+------------------+------+-----+---------+-------+
| Field    | Type             | Null | Key | Default | Extra |
+----------+------------------+------+-----+---------+-------+
| ip       | int(10) unsigned | NO   | PRI | NULL    |       |
| infohash | varchar(40)      | NO   | PRI | NULL    |       |
+----------+------------------+------+-----+---------+-------+ 
```

这两个字段共同构成主键。

该表表示已知的对等点下载种子的实例。我希望能够提供有关在同行中可以找到多少种子的信息。我将绘制我看到种子数量的频率的直方图（例如，20 个对等点有 2 个种子，40 个对等点有 3 个，...）。

我写了以下查询：

```
SELECT `count`, COUNT(`ip`) 
    FROM (SELECT `ip`, COUNT(`infohash`) AS `count`
              FROM TorrentsPerPeer
              GROUP BY `ip`) AS `counts`
    GROUP BY `count`; 
```

这是`EXPLAIN`子选择：

```
+----+-------------+----------------+-------+---------------+---------+------------+--------+----------+-------------+
| id | select_type | table          | type  | possible_keys | key     | key_length | ref    | rows     | Extra       |
+----+-------------+----------------+-------+---------------+---------+------------+--------+----------+-------------+
| 1  | SIMPLE      | TorrentPerPeer | index | [Null]        | PRIMARY | 126        | [Null] | 79262772 | Using index |
+----+-------------+----------------+-------+---------------+---------+------------+--------+----------+-------------+ 
```

我似乎无法`EXPLAIN`为完整的查询做一个，因为它需要的时间太长了。这个[错误](http://bugs.mysql.com/bug.php?id=44802)表明这是因为它首先运行子查询。

此查询当前正在运行（并且已经运行了一个小时）。`top`报告说`mysqld`它只使用了大约 5% 的可用 CPU，而它却在`RSIZE`稳步增长。我的假设是服务器正在 RAM 中构建用于完成查询的临时表。

我的问题是；如何提高此查询的性能？我应该以某种方式更改查询吗？我一直在更改`my.cnf`文件中的服务器设置以增加 INNODB 缓冲池大小，我应该更改任何其他值吗？

如果重要的话，该表的深度为 79'262'772 行，并占用约 8GB 的​​磁盘空间。我不希望这是一个简单的查询，也许“耐心”是唯一合理的答案。

**编辑**只是补充一下查询已经完成并且花了 105 分钟。这不是无法忍受的，我只是希望有一些改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:54:37.380

我的预感是，使用 unsigned int 和 varchar 40（尤其是 varchar！）你现在有一个巨大的主键，它使你的索引文件太大而无法容纳你为 Innodb_buffer_pool 拥有的任何 RAM。这将使 InnoDB 在搜索时必须依赖磁盘来交换索引页，这需要大量的磁盘搜索，而不是大量的 CPU 工作。

我为类似的问题做的一件事是在真正的自然键和代理键之间使用一些东西。我们将采用实际唯一的 2 个字段（其中一个也是 varchar），并在应用程序层中制作一个固定宽度的 MD5 哈希并使用 THAT 作为键。是的，这意味着应用程序需要做更多的工作，但它会生成更小的索引文件，因为您不再使用任意长度的字段。

或者，您可以只使用具有大量 RAM 的服务器，看看这是否使索引适合内存，但我总是喜欢将“扔硬件”作为最后的手段:)

# .net - 如何使用 .net 从各种邮件提供商（gmail、yahoo、hotmail）导入联系人

> ID：11469821
> 
> 赞同：0
> 
> 时间：2012-07-13T11:43:16.667
> 
> 标签：.net

我想在 .net 中导入来自不同邮件提供商（如 gmail、yahoo 和 hotmail）的联系人。目标是检索联系人列表以向每个人发送电子邮件。有哪些 API 可以检索这些信息？是否有统一的 api 来查询所有这些提供者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:22:08.243

访问联系人信息

GMail - Google 数据 API：[https ://developers.google.com/gdata/client-cs](https://developers.google.com/gdata/client-cs)

Hotmail - Live Connect 开发人员中心：http: [//msdn.microsoft.com/en-us/live/default.aspx](http://msdn.microsoft.com/en-us/live/default.aspx)

雅虎 - 雅虎！联系人 API：http: [//developer.yahoo.com/social/contacts/](http://developer.yahoo.com/social/contacts/)。根据我的经验，YQL 是获取 Yahoo 信息的最佳解决方案。

# c# - When debugging a console app, Visual Studio gets stuck in an exception-reporting loop. Why?

> ID：11469826
> 
> 赞同：3
> 
> 时间：2012-07-13T11:43:21.503
> 
> 标签：c#, visual-studio-2010

Consider this simple console application:

```
using System;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            throw new Exception();
        }
    }
} 
```

I run this under the debugger in either Visual Studio 2010 or Visual Studio 2012 Beta.

When I do so, naturally the debugger stops at the exception. Ok so far.

But when I press F5 to continue (or choose Debug|Continue) it stops at the same exception again. I have to stop debugging for the program to exit. I expected the program to exit when I pressed F5.

Does anyone know why it behaves the way that it does?

[EDIT]

I've marked a reply as an answer, but to see a weird consequence of the debugger's behaviour, consider the following code:

```
using System;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            AppDomain.CurrentDomain.UnhandledException += CurrentDomain_UnhandledException;
            throw new Exception();
        }

        static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
        {
            Console.WriteLine("Unhandled Exception.");
        }
    }
} 
```

Run this under the debugger and press F5 a load of times, then look at the output. You'll see a lot of "Unhandled Exception" messages, despite the code only actually throwing it once. The debugger is causing the exception to be thrown multiple times! This is what I find strange.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:51:56.123

What did you expect?

Consider the following method:

```
private void Test()
{
    throw new Exception();  
    int u = 4;
} 
```

When the exception is thrown, the debugger allows you to navigate to the calling context to see if your program catches the exception. If it's not the case, it never exits the `Test` method by skipping the exception, that's why `int u = 4;` is unreachable.

In your example, it's the same:

```
private static void Main(string[] args)
{
    throw new Exception();

    // If I'm here, I will exit the application !
    // But this place is unreachable
} 
```

You can't exit the `Main` method scope because of your exception. That's why you can't exit your application while debugging using F5.

If you have no debugger attached, your application will of course crash because of an unhandled exception, but this is another story.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:46:34.300

It doesn't do that. If the application wasn't running in the debugger, you'd get an "application quit unexpectedly" dialog - but not in Visual Studio.

While I'm not exactly sure why it behaves like that, it may be because it gives you the option to move the "currently executing line" arrow (the yellow array) to the next line that should be executed and to resume operation.

Otherwise, yes, you need to stop the application explicitly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T17:14:41.970

The VS2012 debugger won't continue past an unhandled exception

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-13T11:47:51.830

By default, the debugger stops on all exceptions, that are not caught (i.e. unhandled) - this can be changed in the Exceptions dialog (CTRL+ALT+E, with my keybindings)

# visual-studio - gcc 和 MS 预处理器之间的另一个区别

> ID：11469827
> 
> 赞同：9
> 
> 时间：2012-07-13T11:43:26.660
> 
> 标签：visual-studio, gcc, c-preprocessor

gcc 预处理器与 MS VS cl 预处理器之间的另一个区别。考虑以下代码段：

```
# define A(x) L ## x
# define B A("b")
# define C(x) x
C(A("a" B)) 
```

对于“gcc -E”，我们得到以下信息：

```
L"a" A("b") 
```

对于 'cl /E'，输出不同：

```
L"a" L"b" 
```

MS 预处理器以某种方式执行额外的宏扩展。它的工作算法显然与gcc不同，但这个算法似乎也是一个秘密。有谁知道如何解释观察到的差异以及 MS cl 中的预处理方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:24:03.673

海湾合作委员会是正确的。该标准规定：

> **C99 6.10.3.4/2（以及 C++98/11 16.3.4/2）**：如果在替换列表扫描期间找到被替换宏的名称（不包括源文件的其余预处理标记)，它不会被替换。

因此，在扩展 时`A("a" B)`，我们首先替换`B`为`A("a" A("B"))`。

`A("B")`*没有*被替换，根据引用的规则，所以最终的结果是`L"a" A("B")`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:29:54.783

迈克的回答是正确的，但他实际上省略了标准的关键部分，该部分说明了为什么会这样：

> **6.10.3.4/2**如果在替换列表的扫描期间找到被替换的宏的名称（不包括源文件的其余预处理标记），则不会替换它。此外，如果任何嵌套替换遇到被替换的宏的名称，它不会被替换。这些未替换的宏名称预处理标记不再可用于进一步替换*，即使它们稍后在该宏名称预处理标记将被替换的上下文中进行（重新）检查。*

请注意我强调的最后一个条款。

所以 gcc 和 MSVC 都将宏扩展`A("a" B)`为`L"a" A("b")`，但有趣的情况（MSVC 搞砸了）是宏被宏包裹时`C`。

扩展`C`宏时，首先检查其参数是否有要扩展的宏`A`并被扩展。然后将其替换到 C 的主体中，然后再次扫描该主体以查找要替换的宏。现在你可能会认为，因为这是 的扩展`C`，所以只会跳过名称`C`，但最后一个子句意味着来自扩展的标记`A`也将跳过 A的重新扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:51:41.280

基本上有两种方法可以认为应该替换 A 宏的剩余出现：

第一个是处理或宏参数，然后将它们插入到宏替换列表中的相应参数的位置。通常每个参数都被完整的宏替换，就好像它形成了输入文件的其余部分，如标准第 6.10.3.1 节所述。但是，如果参数（此处：x）出现在 ## 旁边，*则不会这样做；*在这种情况下，参数只是根据 6.10.3.3 替换为参数，没有任何递归宏替换。

第二种方法是第 6.10.3.4 节的“重新扫描和进一步替换”，但对于已经被替换过一次的宏，这不是递归完成的。

所以在这种情况下都不适用，这意味着 gcc 正确地保留了 A 的出现未被替换。

# windows - 获取 Windows 的语言环境格式

> ID：11469844
> 
> 赞同：0
> 
> 时间：2012-07-13T11:44:12.547
> 
> 标签：windows, delphi, datetime

如何在 Delphi 中为 Windows 获得正确的语言环境格式？

我试着下一步

```
LCID := 2048;    
FormatSettings := TFormatSettings.Create(LCID); 
```

**但如果将短日期格式设置为示例'07-13\2012'**，这将无法正常工作。和变量将相等

**`FormatSettings = 'MM/dd\yyyy' ?????`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:55:00.893

你可以用这个吗？

```
var
   formatSettings : TFormatSettings;

 begin
  // Furnish the locale format settings record
   GetLocaleFormatSettings(LOCALE_SYSTEM_DEFAULT, formatSettings);

  // And use it in the thread safe form of CurrToStrF
   ShowMessage('1234.56 formats as = '+
               CurrToStrF(1234.56, ffCurrency, 4, formatSettings));
 end; 
```

[http://www.delphibasics.co.uk/RTL.asp?Name=GetLocaleFormatSettings](http://www.delphibasics.co.uk/RTL.asp?Name=GetLocaleFormatSettings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-26T10:35:46.477

实际上，您应该将日期视为：

```
TShortDateFormatParts = (sdfpPrefix, sdfpDatePart1, sdfpSplitter1, sdfpDatePart2, sdfpSplitter2, sdfpDatePart3, sdfpSuffix); 
```

在您的代码中，您应该：

1.  查找并获取前导“d”、“M”或“Y”（前缀）之前的所有内容。

2.  在第一个拆分器之前查找并获取文本。

3.  查找并获取第一个分离器的末端。

4.  在第二个拆分器之前查找并获取文本。

5.  查找并获取第二个分离器的末端。

6.  在最终文本（后缀）之前查找并获取所有内容。

7.  得到我们现在拥有的是最后一部分

后：

获取当前格式字符串中 DAY、MONTH 和 YEAR 的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:50:57.540

TFormatSettings.Create(Locale) 的第一行是：

```
 if not IsValidLocale(Locale, LCID_INSTALLED) then
    Locale := GetThreadLocale; 
```

当我将 LOCALE_SYSTEM_DEFAULT (2048) 作为我的语言环境时，IsValidLocale 返回 false，GetThreadLocale 返回 4105（加拿大英语）。您可能需要对此进行进一步调查。你得到你期望的语言环境了吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-20T19:55:49.613

The correct format of the locale for countries

```
var
  formatSettings : TFormatSettings;
begin
  GetLocaleFormatSettings(LOCALE_SYSTEM_DEFAULT, formatSettings);
  ShowMessage('LOCALE_SYSTEM_DEFAULT = ' + DateTimeToStr(now, formatSettings));

  GetLocaleFormatSettings(MAKELANGID(LANG_ENGLISH, SUBLANG_ENGLISH_US), formatSettings);
  ShowMessage('LANG_ENGLISH = ' + DateTimeToStr(now, formatSettings));

  GetLocaleFormatSettings(MAKELANGID(LANG_RUSSIAN, SUBLANG_DEFAULT), formatSettings);
  ShowMessage('LANG_RUSSIAN = ' + DateTimeToStr(now, formatSettings));
end; 
```

# android - View Layout_Margin 在 FrameLayout 中不起作用

> ID：11469846
> 
> 赞同：0
> 
> 时间：2012-07-13T11:44:22.253
> 
> 标签：android, margin, android-framelayout

我有一个`frameLayout`并且在这个布局里面有几个视图，我想把每个视图从顶部边缘到一个特定的距离。我已经尝试了以下代码，但似乎它不起作用

```
 FrameLayout lytBoard = (FrameLayout) findViewById(R.id.lytBoard);
   LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(width, height);
   params.setMargins((int)board.cells.get(i).x1, (int)board.cells.get(i).y1, 0, 0);
   CellView cv = new CellView(getApplicationContext());
   cv.setLayoutParams(params);
   lytBoard.addView(cv); 
```

单元格视图类：

```
public class CellView extends View {

    public CellView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
    }
    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        int size = Math.min(getMeasuredWidth(), getMeasuredHeight());
        setMeasuredDimension(size, size);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:55:55.340

您正在设置类型的a的`CellView`子类。在方法的[定义](http://developer.android.com/reference/android/view/View.html#setLayoutParams%28android.view.ViewGroup.LayoutParams%29)中，该方法接收类型的参数并且不包含边距属性，因此这可能是问题的原因。`View``layoutParams``LinearLayout.LayoutParams``View``setLayoutParams``ViewGroup.LayoutParams``ViewGroup`

您可以尝试子类`LinearLayout`化而不是`View`.

# java - 将对象存储在 FilteredItemsSelectionDialog 的 ResourceSelectionHistory 中，而不是字符串

> ID：11469848
> 
> 赞同：0
> 
> 时间：2012-07-13T11:44:29.283
> 
> 标签：java, eclipse, eclipse-plugin, swt, jface

我一直在关注[这里](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/dialogs/package-summary.html)的教程。在高级教程中，ResourceSelectionHistory 存储选定的项目并在重新启动对话框时检索它。我希望 ResourceSelectionHistory 存储对象而不仅仅是字符串，有没有办法做到这一点。我还希望当用户单击它们时在编辑器中打开这些项目。当我单击实际填充列表中的一个项目时，它会打开，但当我单击显示历史记录的部分时不会。

提前致谢

是啊！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:51:02.640

非常特定于此对话框，`ResourceSelectionHistory`只能存储资源。`IMemento`它使用该机制存储它们。可能您可以做您想做的唯一方法是复制该类 ( `FilteredResourcesSelectionDialog`) 并按照自己的方式进行操作。如果您只遵循 API，这些对话框往往会非常严格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:50:31.580

您可以将字符串、整数和布尔值存储到`IMemento`. 您可以巧妙地利用它们来揭示对象的类型。例如，`element.putInteger("objType", 1);`如果您的对象是 A 类型，`element.putInteger("objType", 2);`如果它是 B类型，则可以使用。

# c# - .Net Bing Map 肥皂服务限制

> ID：11469851
> 
> 赞同：2
> 
> 时间：2012-07-13T11:44:39.173
> 
> 标签：c#, asp.net, .net, routing, bing-maps

你知道，使用的必应地图肥皂服务是否有每日限制？例如每日查询是 1.000

我正在使用路线服务来计算城市之间的方式和距离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:00:56.593

这是你想要的？

> “评估 [...] 为期 90 天的评估期，无需签订协议，前提是 (i) 您的使用符合第 7 节的条款；(ii) 在任何 30 天内，您不超过**10,000 笔**任何类型的交易，包括 SDK 中定义的会话，无论是计费还是非计费。”
> 
> “有限的商业、非商业或政府使用”[...] 前提是 (i) 您的使用符合第 6 节的条款；(ii) 您的公司应用程序可以不受限制地公开使用（例如，不得要求登录名或密码，并且不得位于防火墙后面）；(iii) 在任何 12 个月期间，您不超过**125,000 次会话类型的交易或 500,000 次任何类型的交易**，以先到者为准，两者都在 SDK 中定义。

来源：[Microsoft® Bing™ 地图平台 API 的使用条款](http://www.microsoft.com/maps/product/terms.html "Microsoft® Bing™ 地图平台 API 的使用条款")

# android - 我无法在 android 中停止我的媒体播放器？

> ID：11469855
> 
> 赞同：3
> 
> 时间：2012-07-13T11:45:01.900
> 
> 标签：android, media-player

我正在使用媒体播放器在计时器中播放滴答声。但它在计时器结束后继续播放，即使在我为媒体播放器调用停止之后也是如此。我在计时器的 ontick() 中播放了如下所示的声音。在 onfinish() 中调用了 mp.Stop()，但它不起作用。

```
 mp = MediaPlayer.create(getBaseContext(), sound);
        mp.setOnCompletionListener(new OnCompletionListener() {

            public void onCompletion(MediaPlayer mp) {
        });
        mp.setLooping(false);
        // mp.setVolume(0.1, 0.1);
        mp.start();
} 
```

**为我的计时器编码。**

```
final class MyCounter extends CountDownTimer {

    public MyCounter(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
    }

    @Override
    public void onFinish() {
        timer.cancel();

        MediaPlayer.OnCompletionListener onCompletion = new MediaPlayer.OnCompletionListener() {

            public void onCompletion(MediaPlayer mp) {
                if (mp.isPlaying()) {
                    mp.release();
                    mp.stop();
                    mp.reset();
                }

            }
        };
        mp.setOnCompletionListener(onCompletion);
        i++;
        submitAnswer();
        final GameEngine ge = GameEngine.getInstance();

        timeer.setText("Timer Completed.");

        if (ge.getCurrentUnAllocatedAmount() > 0 && i <= 8) {
            final Handler handler = new Handler();
            handler.postDelayed(new Runnable() {
                public void run() {
                    Intent intent = new Intent(GameActivity.this,
                            ScoreActivity.class);
                    intent.putExtra("level", i);
                    ge.setCurrentLevel(i);
                    startActivity(intent);
                }
            }, 2200);
        } else if (ge.getCurrentUnAllocatedAmount() <= 0 || i > 8) {
            Intent intent = new Intent(GameActivity.this,
                    ScoreActivity.class);
            intent.putExtra("level", i);
            startActivity(intent);
        }

    }

    public void onTick(long millisUntilFinished) {
        remTime = (millisUntilFinished / 1000);
        timeer.setText("Time:" + (millisUntilFinished / 1000) + "");
        mp = MediaPlayer.create(getBaseContext(), R.raw.beep7);
        if (remTime > 0) {
            mp.start();
            mp.release();
        }
        if (remTime < 10) {
            final Handler handler = new Handler();
            handler.post(new Runnable() {
                public void run() {
                    if (timeer.getVisibility() == View.VISIBLE) {
                        timeer.setVisibility(View.INVISIBLE);
                    } else {
                        timeer.setVisibility(View.VISIBLE);
                    }

                    timeer.setTextColor(Color.RED);

                }
            });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T12:11:17.240

```
mp.setOnCompletionListener(new OnCompletionListener() {
    @Override 
    public void onCompletion(MediaPlayer mp) {

       if (mp.isPlaying()) {
           mp.stop();
            }

            mp.release();
            mp = null;
        }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:49:01.600

使用此代码：

```
if(mediaPlayer.isPlaying())
{
    mediaPlayer.stop();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:51:29.940

```
mp.setOnCompletionListener(new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
mp.stop();
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T01:36:34.663

我认为您没有在自身上调用该`release()`方法。`onCompletionListener()`

```
mp.setOnCompletionListener(new OnCompletionListener() {
    @Override 
    public void onCompletion(MediaPlayer mp) {
       mp.release();
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T11:52:46.717

尝试这个：

```
mp.setOnCompletionListener(onCompletion);

private MediaPlayer.OnCompletionListener onCompletion = new MediaPlayer.OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {
                        if(mp.isPlaying())
                        {
                             mp.stop();
                             mp.reset();
                        }

                }
        }; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-13T11:56:11.813

检查定时器停止时的条件。

```
if(mPlayer.isPlaying())
{
    mPlayer.stop();
} 
```

# jquery - 离开 traling / off 会导致加载混乱

> ID：11469856
> 
> 赞同：0
> 
> 时间：2012-07-13T11:45:05.553
> 
> 标签：jquery, ajax

如果我离开我的 URL 的尾随 /，它会打乱我的 jquery 加载——页面会在评论部分重新加载。例如：

[http://www.songmeanings.net/songs/view/3530822107858857748](http://www.songmeanings.net/songs/view/3530822107858857748)

对于它应该是什么样子，请将尾随 / 放在末尾，例如：

[http://www.songmeanings.net/songs/view/3530822107858857748/](http://www.songmeanings.net/songs/view/3530822107858857748/)

问题的根源在于 ajax 是如何发布的。我的网址必须是“./”——如果我将其设为“”，则内联加载不再发生，但评论无法在 IE 中加载。

```
$.ajax({
        type: "POST", url: "./", data: "........",
        dataType: "html",
        success: function(data){ 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:27:23.580

获取当前网址。检查是否有斜杠。如果没有，请添加一个。向该网址发出 ajax 请求。

```
var url = window.location.href;
if (/\/$/.test(url) == false) {
   url = url + "/";
}

$.ajax({
    type: "POST", url: url, data: "........",
    dataType: "html",
    success: function(data){
    ... 
```

这应该可以解决您的问题:)

# ssl - 如何在 play 2.0 应用程序中设置 ssl？

> ID：11469858
> 
> 赞同：1
> 
> 时间：2012-07-13T11:45:11.667
> 
> 标签：ssl, https, playframework, playframework-2.0

嗨，我正在开发一个 play 2.0 应用程序。我想为该应用程序启用 ssl 以制作 https。我遵循了这个文档[https://github.com/playframework/Play20/pull/339](https://github.com/playframework/Play20/pull/339)，但没有工作。如何制作 https。谁能告诉我好吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:02:58.500

您可以使用前端 HTTP / HTTPS 服务器和代理转发到您的播放应用程序。

我正在使用[Nginx](http://wiki.nginx.org/Main)和[HTTPSSLModule](http://wiki.nginx.org/HttpSslModule)。

你可以看看[这个线程](https://stackoverflow.com/a/7099605/595223)

# c# - SQL 查询：不正确的语法错误

> ID：11469861
> 
> 赞同：5
> 
> 时间：2012-07-13T11:45:21.987
> 
> 标签：c#, sql, syntax

我收到一个错误

> 关键字 WHERE 附近的语法不正确

使用以下 SQL 语句：

```
SqlCommand scInsertCostSpilt = new SqlCommand("INSERT INTO [ASSETS_CC] ([DEPT], [CC], [PER_CENT]) WHERE [ASSET_NO] = @AssetNumber)" +
"Values (@AssetNumber, @Dept, @CC, @PerCent)" , DataAccess.AssetConnection); 
```

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T11:47:24.117

在 SQL 插入语句中没有`WHERE`子句（这是有道理的，因为记录还不存在）。如果要插入新记录，请将 ID 与所有其他值放在一起，或者`UPDATE`如果要更改现有记录，请使用语句。

```
INSERT INTO [ASSETS_CC] ([ASSET_NO], [DEPT], [CC], [PER_CENT]) 
VALUES (@AssetNumber, @Dept, @CC, @PerCent) 
```

或者

```
UPDATE [ASSETS_CC]
SET [DEPT] =  @Dept, [CC] = @CC, [PER_CENT] = @PerCent
WHERE [ASSET_NO] = @AssetNumber 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:47:08.007

我认为您编写了错误的查询。更新如下给定查询：

```
INSERT INTO [ASSETS_CC] ([DEPT], [CC], [PER_CENT]) Values ( @Dept, @CC, @PerCent) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T11:50:04.627

给你。

```
SqlCommand scInsertCostSpilt = new SqlCommand("INSERT ASSETS_CC (DEPT, CC, PER_CENT) Values (@AssetNumber, @Dept, @CC, @PerCent)" , DataAccess.AssetConnection); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:00:50.577

您正在使用`where`不能在`Insert`语句中使用的子句。

```
SqlCommand scInsertCostSpilt = new SqlCommand("INSERT INTO ASSETS_CC (DEPT, CC, PER_CENT) Values (@AssetNumber, @Dept, @CC, @PerCent)" , DataAccess.AssetConnection); 
```

# c# - 将 itemsource 与 ObservableCollection 绑定

> ID：11469862
> 
> 赞同：2
> 
> 时间：2012-07-13T11:45:23.113
> 
> 标签：c#, silverlight, xaml, mvvm

> **可能重复：**
> [WPF 列表框空数据模板](https://stackoverflow.com/questions/699881/wpf-listbox-empty-datatemplate)

我的 Itemscontrol 的 Itemsource 绑定到 ObservableCollection。如果 ObservableCollection 中没有对象，如何编写代码以显示文本“列表为空”。

```
<ItemsControl Grid.Row="2" Name="itemsControl2" ItemsSource="{Binding RecentPatients}"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:53:25.027

你可能会使用`TargetNullValue`

请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.targetnullvalue)

你可以像这样添加它

```
<ItemsControl Grid.Row="2" Name="itemsControl2" ItemsSource="{Binding RecentPatients, TargetNullValue=The list is empty}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:24:31.577

You can also do this logic in C# view model. No need to change your xaml code.

```
public sealed partial class MainPage : Page, INotifyPropertyChanged {
    private ObservableCollection<string> recentPatients = new ObservableCollection<string>();
    private IList<string> emptyList = new string[] { "This list is empty" };

    public MainPage()   {
        this.InitializeComponent();
        this.DataContext = this;
        this.recentPatients.CollectionChanged += OnCollectionChanged;
    }
    public IList<string> RecentPatients {
        get { return recentPatients.Any() ? recentPatients : emptyList; }
    }
    private void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)     {
        if (this.recentPatients.Count <= 1) {
            // It could be a change between empty to non-empty.
            this.OnPropertyChanged("RecentPatients");
        }
    }
    // implement the INotifyPropertyChanged pattern here. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:53:27.787

我为此使用了一种风格

```
<Style x:Key="{x:Type ItemsControl}" TargetType="{x:Type ItemsControl}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding Items.Count, RelativeSource={RelativeSource Self}}" Value="0">
            <Setter Property="Background">
                <Setter.Value>
                    <VisualBrush Stretch="None">
                        <VisualBrush.Visual>
                            <TextBlock Text="The list is empty" 
                                       FontFamily="{StaticResource FontFamily}"
                                       FontSize="{StaticResource FontSize}"/>
                        </VisualBrush.Visual>
                    </VisualBrush>
                </Setter.Value>
            </Setter>
        </DataTrigger>
        <DataTrigger Binding="{Binding Items, RelativeSource={RelativeSource Self}}" Value="{x:Null}">
            <Setter Property="Background">
                <Setter.Value>
                    <VisualBrush Stretch="None">
                        <VisualBrush.Visual>
                            <TextBlock Text="The list is empty" 
                                       FontFamily="{StaticResource FontFamily}"
                                       FontSize="{StaticResource FontSize}"/>
                        </VisualBrush.Visual>
                    </VisualBrush>
                </Setter.Value>
            </Setter>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

# java - 在java中使用jfree图表制作动态折线图

> ID：11469865
> 
> 赞同：6
> 
> 时间：2012-07-13T11:45:28.920
> 
> 标签：java, jfreechart

我如何在java中使用jFree图表创建动态折线图，它显示2小时前的数据，并提供一个空格，其中数据显示从当前时间起2小时后。例如假设当前时间是下午4点，所以图表显示数据从下午 2 点到下午 6 点。这里下午 2 点到 4 点图表显示一条线，下午 4 点到 6 点提供一个空白区域，当图表移动时不时填充，这意味着该图表的尾部从中间开始向右移动。类似于股票市场图表。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T12:11:57.153

是的，你可以做到。几天前我遇到了类似的问题。

DynamicLineAndTimeSeriesChart.java

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.Timer;
import javax.swing.JPanel;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.time.Millisecond;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;
import org.jfree.data.xy.XYDataset;
import org.jfree.ui.ApplicationFrame;
import org.jfree.ui.RefineryUtilities;

/**
 * An example to show how we can create a dynamic chart.
*/
public class DynamicLineAndTimeSeriesChart extends ApplicationFrame implements ActionListener {

    /** The time series data. */
    private TimeSeries series;

    /** The most recent value added. */
    private double lastValue = 100.0;

    /** Timer to refresh graph after every 1/4th of a second */
    private Timer timer = new Timer(250, this);

    /**
     * Constructs a new dynamic chart application.
     *
     * @param title  the frame title.
     */
    public DynamicLineAndTimeSeriesChart(final String title) {

        super(title);
        this.series = new TimeSeries("Random Data", Millisecond.class);

        final TimeSeriesCollection dataset = new TimeSeriesCollection(this.series);
        final JFreeChart chart = createChart(dataset);

        timer.setInitialDelay(1000);

        //Sets background color of chart
        chart.setBackgroundPaint(Color.LIGHT_GRAY);

        //Created JPanel to show graph on screen
        final JPanel content = new JPanel(new BorderLayout());

        //Created Chartpanel for chart area
        final ChartPanel chartPanel = new ChartPanel(chart);

        //Added chartpanel to main panel
        content.add(chartPanel);

        //Sets the size of whole window (JPanel)
        chartPanel.setPreferredSize(new java.awt.Dimension(800, 500));

        //Puts the whole content on a Frame
        setContentPane(content);

        timer.start();

    }

    /**
     * Creates a sample chart.
     *
     * @param dataset  the dataset.
     *
     * @return A sample chart.
     */
    private JFreeChart createChart(final XYDataset dataset) {
        final JFreeChart result = ChartFactory.createTimeSeriesChart(
            "Dynamic Line And TimeSeries Chart",
            "Time",
            "Value",
            dataset,
            true,
            true,
            false
        );

        final XYPlot plot = result.getXYPlot();

        plot.setBackgroundPaint(new Color(0xffffe0));
        plot.setDomainGridlinesVisible(true);
        plot.setDomainGridlinePaint(Color.lightGray);
        plot.setRangeGridlinesVisible(true);
        plot.setRangeGridlinePaint(Color.lightGray);

        ValueAxis xaxis = plot.getDomainAxis();
        xaxis.setAutoRange(true);

        //Domain axis would show data of 60 seconds for a time
        xaxis.setFixedAutoRange(60000.0);  // 60 seconds
        xaxis.setVerticalTickLabels(true);

        ValueAxis yaxis = plot.getRangeAxis();
        yaxis.setRange(0.0, 300.0);

        return result;
    }
    /**
     * Generates an random entry for a particular call made by time for every 1/4th of a second.
     *
     * @param e  the action event.
     */
    public void actionPerformed(final ActionEvent e) {

        final double factor = 0.9 + 0.2*Math.random();
        this.lastValue = this.lastValue * factor;

        final Millisecond now = new Millisecond();
        this.series.add(new Millisecond(), this.lastValue);

        System.out.println("Current Time in Milliseconds = " + now.toString()+", Current Value : "+this.lastValue);
    }

    /**
     * Starting point for the dynamic graph application.
     *
     * @param args  ignored.
     */
    public static void main(final String[] args) {

        final DynamicLineAndTimeSeriesChart demo = new DynamicLineAndTimeSeriesChart("Dynamic Line And TimeSeries Chart");
        demo.pack();
        RefineryUtilities.centerFrameOnScreen(demo);
        demo.setVisible(true);

    }

} 
```

也请在这里查看：

[http://blog.odoobiz.com/2012/07/how-to-draw-dynamic-line-or-timeseries.html](http://blog.odoobiz.com/2012/07/how-to-draw-dynamic-line-or-timeseries.html)

# hadoop - 在单个节点上安装 PIG

> ID：11469879
> 
> 赞同：7
> 
> 时间：2012-07-13T11:46:58.827
> 
> 标签：hadoop, apache-pig

我在带有 Cygwin 的 Windows 7 上为单个节点安装了 Hadoop (1.0.2)，它正在工作。但是，我无法让 PIG (0.10.0) 看到 Hadoop。

```
1) "Error: JAVA_HOME is not set." 
```

我将此行添加到猪（在bin下）：export JAVA_HOME=/cygdrive/c/PROGRA~1/Java/jdk1.7.0_05

```
2) which: no hadoop in (/usr/local/b.....)
cygpath: cannot create short name of C:\pig-0.10.0\logs
Cannot locate pig.jar. do 'ant jar', and try again 
```

我尝试在 pig 中添加以下行，但仍然没有找到 hadoop。我应该怎么办？

```
export PIG_HOME="/cygdrive/c/pig-0.10.0"
export PATH=$PATH:$PIG_HOME/bin
export PIG_CLASSPATH=/cygdrive/hadoop/hadoop-1.0.2/conf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T09:06:54.940

您可能还需要将 Hadoop 安装添加到您的路径中。例如

```
export HADOOP_INSTALL=/Users/yourname/dev/hadoop-0.20.203.0 
export PATH=$PATH:$HADOOP_INSTALL/bin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T07:08:03.743

我对 pig-0.11 有同样的问题。似乎这是 cygwin 特定的问题。

将 pig-0.11.1-withouthadoop 复制到 PIG_HOME 下的 pig-withouthadoop.jar 为我解决了这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T09:19:28.200

我试图在安装了 Windows 7 的网关机器上设置 PIG。

这个问题是 Cygwin 特有的。

在打破我的头几个小时后，我找到了解决方案：

解决方案非常简单。

只需将“pig-0.10.1-withouthadoop.jar”下的jar文件重命名为“pig-withouthadoop.jar”即可。

它记录[在这里](http://hadooptips.wordpress.com/2013/08/01/cannot-locate-pig-jar-do-ant-jar-and-try-again/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-18T14:02:46.983

我在 Fedora 19 上安装的 Pig 0.12.0（和 Hadoop 1.0.3）也有类似的问题。尝试任何 Pig 命令时，例如

```
pig -help 
```

我收到了错误：

```
Cannot locate pig-withouthadoop.jar. do 'ant jar-withouthadoop.jar', and try again 
```

Hadoop 和 Pig 安装 /bin 文件夹已正确包含在我的 PATH 中。

只需将**pig-0.12.0-withouthadoop.jar 复制到 PIG_HOME**文件夹即可解决我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-18T00:00:18.843

此外，您可以在 Windows 7 中手动将路径：（hadoop 目录）\hadoop-vvv\bin 添加到环境变量中。这将解决此问题

```
which: no hadoop in (/usr/local/b.....) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-31T06:29:48.450

您必须访问这里以在 hadoop 2.2.0 上安装 pig 12 而不会出现任何错误，因为它会为指定的 hadoop 版本重新编译 pig 库。

[http://javatute.com/javatute/faces/post/hadoop/2014/installing-pig-11-for-hadoop-2-on-ubuntu-12-lts.xhtml](http://javatute.com/javatute/faces/post/hadoop/2014/installing-pig-11-for-hadoop-2-on-ubuntu-12-lts.xhtml)

完成这些步骤后，您将在 grunt 上获得运行中的猪，而不会出现任何错误。

只是喜欢做。

```
% pig [return] 
```

# python - 在 python 中使用元组？

> ID：11469881
> 
> 赞同：0
> 
> 时间：2012-07-13T11:47:04.240
> 
> 标签：python

我在 python 中有三个列表。比方说：

```
list_a
list_b
list_c 
```

现在我正在调用一个方法，该方法也返回一个列表并保存到上述列表中。例如：

```
list_a = get_value(1)
list_b = get_value(2)
list_c = get_value(3) 
```

我认为我选择调用具有不同参数的相同方法的方式不是一个好的选择。我们可以在一行中调用这些方法吗？

我是 Python 的初学者，但是元组选项呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:48:53.410

如果您的函数设置正确（即修改为返回与您发送参数相同数量的列表），您可以进行如下调用：

```
 list_a, list_b, list_c = get_value(1, 2, 3) 
```

where`get_value()`将返回 3 个值的元组。

这就是你要问的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:49:30.437

列表列表？

```
ll = [get_value(x) for x in (1, 2, 3)] 
```

或与您的三个列表：

```
list_a, list_b, list_c = [get_value(x) for x in (1, 2, 3)] 
```

考虑到，它`get_value`不能被修改并且只返回一个列表。

另一种可能性是字典。

```
params = {'a': 1, 'b': 2, 'c': 3}
result = {k:get_value(v) for k,v in params.iteritems()}
# result == {'a': get_value(1), 'b': get_value(2), 'c': get_value(3)} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T12:00:52.733

其他方式：

```
list_a, list_b, list_c = map(get_value, (1,2,3)) 
```

# regex - 验证 url 的路径

> ID：11469882
> 
> 赞同：1
> 
> 时间：2012-07-13T11:47:04.553
> 
> 标签：regex, url

我正在尝试验证没有域的 url，只是路径和参数。

我正在使用的正则表达式完成了大部分工作，但它有一些我不知道如何防止的错误（我对正则表达式非常陌生）：

```
/^(\/([\w#!:.?+=&%@!\-\/])+)$/i 
```

下一个示例已正确验证

```
/asd.jsp -> true
/asd/asd.jsp -> true
/asd/asd.jsp?bar=baz&inga=42&quux -> true
/asd/asd.jsp?bar=ba z&inga=42&quux -> false 
```

但是这些不是正确的 ulrs，它们也给了我真实的信息：

```
/asd/asd./jsp -> true :(
/asd/asd.jsp/ -> true :(
/asd./asd.jsp -> true :(
/asd///asd.jsp -> true :(
/asd/asd.jsp&bar=baz?inga=42?quux -> true :( 
```

您是否建议使用函数而不是正则表达式？

十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:26:40.063

试试这个：

```
^(\\/\\w+)+\\.\\w+(\\?(\\w+=[\\w\\d]+(&\\w+=[\\w\\d]+)+)+)*$ 
```

我已经转义了特殊字符，所以你可以直接在java中使用它。顺便说一句，*/asd/asd.jsp?bar=baz&inga=42&quux*不是有效的 URL。

未转义的正则表达式：

```
^(\/\w+)+\.\w+(\?(\w+=[\w\d]+(&\w+=[\w\d]+)+)+)*$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-12T19:10:35.110

```
^(\/\w+)+(\.)?\w+(\?(\w+=[\w\d]+(&\w+=[\w\d]+)*)+){0,1}$ 
```

有效的：

```
/test
/test/test
/test.jsp
/test.jsp?v=1
/test.jsp?v=1&v=2
/test/test.jsp?v=1&v=2 
```

无效的：

```
/test/test./jsp
/test/test.jsp/
/test./test.jsp
/test///test.jsp 
```

# mongodb - 如何使用 ember-data 在 mongodb 中对此设置进行建模？

> ID：11469889
> 
> 赞同：2
> 
> 时间：2012-07-13T11:47:16.797
> 
> 标签：mongodb, ember.js, mongomapper, ember-data

我有一个可以有很多部分的项目。我将它作为包含许多 Section 嵌入文档的 Item 文档存储在 mongodb 中。

该项目可以有很多部分。

在 ember-data 中执行此操作的推荐方法是什么？

当一个部分被更改时，我是否应该将整个项目发送到服务器，然后确定哪个部分已更改并通过原子集仅更新该部分？

或者，我应该只将部分发送到服务器进行更新吗？

我不想在保存整个内容时锁定整个文档，我认为这会很慢。

此外，每个部分都可以在 Item 中重新排序，因此它们包含它们的顺序位置作为属性。如果我只是将更改部分的 JSON 发送到服务器，我可能需要向服务器发送大量更改部分请求。

# java - 比较 2 个整数值给出不同的输出

> ID：11469898
> 
> 赞同：1
> 
> 时间：2012-07-13T11:48:07.940
> 
> 标签：java

> **可能重复：**
> [关于自动装箱和对象相等/身份的 Java 问题](https://stackoverflow.com/questions/3351837/java-question-about-autoboxing-and-object-equality-identity)

```
Integer i1 = 10;
Integer i2 = 10;
Integer i3 = 210;
Integer i4 = 210;

if(i1 ==i2){
      System.out.println("True");
}else{
      System.out.println("False");
}
if(i3==i4){
       System.out.println("True");
}else{
       System.out.println("False");
}
if(Integer.valueOf(10) ==Integer.valueOf(10)){
       System.out.println("True");
}else{
      System.out.println("False");
}
if(Integer.valueOf(210) ==Integer.valueOf(210)){
       System.out.println("True");
}else{
       System.out.println("False");
} 
```

答案是

真的

错误的

真的

错误的

为什么它对 2 和 4 条件给出错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:51:32.437

使用`.equals() to compares Integer`. `==`比较参考平等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T11:50:06.833

`==`比较实例而不是值。使用`int`代替，`Integer`它会工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T11:50:19.930

请注意，这`Integer`是一个对象，而不是原语。您正在比较不同的对象*实例*。

对于这个特定的示例，值得一读有关[拳击](http://mindprod.com/jgloss/intvsinteger.html)的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T11:50:31.010

在 Java 中，使用 Object 函数 Object.equals(Object) 来比较对象。只有使用原始 int 时，该比较才能正常工作。

# facebook-opengraph - 尝试通过永久链接共享文章 URL 时出错

> ID：11469899
> 
> 赞同：0
> 
> 时间：2012-07-13T11:48:10.280
> 
> 标签：facebook-opengraph, facebook-wall, facebook-sharer

我们的 CMS 使用永久链接，例如这个：

www.kingmagazine.se/artiklar/king-kroner/20120713/10-korthallare

当用户尝试通过将 URL 粘贴到其 Facebook 主页上的“更新状态”字段来共享此 URL 时，Facebook 似乎会尝试获取不同的 URL 以获取打开的图形信息，如下图所示：

[http://i.imgur.com/NjYM9.png](http://i.imgur.com/NjYM9.png)

获取的页面似乎是来自该站点的错误消息。图片与指定的文章无关，而是包含在所有页面的页脚中。

但是 CMS 也有内部 URL：s，例如这个（同一篇文章）：

www.kingmagazine.se/artiklar/?id=152539

在 Facebook 上共享该数据时，会获取正确的数据，如下所示：

[http://i.imgur.com/wV5q3.png](http://i.imgur.com/wV5q3.png)

我尝试挖掘我们的服务器日志无济于事 - 似乎 Facebook 请求的是错误的 URL，而不是完整的永久链接。我也尝试过 Facebook Lint，但没有找到任何原因。

有没有人有任何想法？

抱歉链接乱码，但 Stackoverflow 垃圾邮件预防说最多 2 个链接，没有图像。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T14:42:25.600

如果其他人有同样的问题，只是想回到这个问题，因为我们最终找到了解决方案。

Facebook 上出现错误信息的原因是 CMS 中的编辑器具有预览功能，可以将文章显示为呈现给访问者。这些页面（因为它们包括网站页眉/页脚）还通过 Facebook 社交插件包含类似 Facebook 的按钮。

这意味着当编辑预览更改时，Facebook 在文章实际发布之前就已经对文章进行了“ping”。当 Facebook 尝试获取该文章时，返回了一条错误消息（我可能会添加不正确的 HTTP 状态代码），然后 Facebook 将其缓存。

够傻的。:)

# c# - 使用 AspNetRoles 进行 WCF Windows 身份验证

> ID：11469900
> 
> 赞同：0
> 
> 时间：2012-07-13T11:48:14.723
> 
> 标签：c#, asp.net, wcf, windows-authentication, asp.net-roles

是否可以将 WCF 配置为使用 Windows 凭据对用户进行身份验证，并使用 SQL AspNet 角色提供程序来存储角色和授权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:51:15.500

您需要激活，[`ASP.NET Compatibility Mode`](http://msdn.microsoft.com/en-us/library/ms752234.aspx)因为您知道 WCF 可以托管在 ASP.NET 上下文之外。显然，通过这样做，您意识到您的服务现在与 ASP.NET 相关联。

# php - 重定向 PHP 查询

> ID：11469905
> 
> 赞同：0
> 
> 时间：2012-07-13T11:48:45.250
> 
> 标签：php, .htaccess, redirect

我需要从以下位置重定向访问者：

```
/plug/survey/survey.php?22 
```

到

```
/publications.php?1.articles.view.547 
```

我对 .htaccess 和 php 的了解有限，想知道是否有人对我有任何提示/想法？任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:54:07.207

您可以在 htaccess 文件中编写此代码

```
RewriteEngine on
Redirect /plug/survey/survey.php?22 /publications.php?1.articles.view.547 
```

也读这个

[http://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:55:01.660

添加到survey.php的顶部：

```
<?php

if ($_SERVER['QUERY_STRING'] == "22") {
   header("Location: http://example.com/publications.php?1.articles.view.547");
   exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:51:22.897

如果只是一个文件，则可以使用 header('Location: '.$url); 在 php 的顶部 - 请参阅[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:55:07.413

您的问题确实缺乏重要信息：

“1.articles”是从哪里来的——它是一个固定的字符串吗？“547”是从哪里来的，我猜它是从某种数据库查找中来的？

如果是这样，使用简单的重写规则就没有简单的方法来做到这一点。最好的解决方案很可能是编写一个您重定向到的小型 php 脚本。在该脚本中，您评估请求参数（php 变量 $_SERVER 等），进行数据库查找并使用收集到的信息将重定向标头发送到浏览器（使用 phps 'header()' 方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T11:56:35.530

我认为你的解决方案是

```
header("location:/publications.php?1.articles.view.547"); 
```

您可以使用 .httaccess，但如果您希望用户进入该页面，则不能使用它，因为它会在阅读该页面上的任何代码之前重定向您，但`header()`会首先阅读代码，如果任何代码不好，则重定向像这样，

```
if($varisgood){
   // not redirect
}
else{
   //redirect
} 
```

# javascript - now.js - 对象没有方法，但在 jquery click 事件中起作用

> ID：11469907
> 
> 赞同：0
> 
> 时间：2012-07-13T11:48:56.307
> 
> 标签：javascript, node.js, nowjs-sockets

我有一个简单的 nowjs 客户端代码：

```
$j(document).ready(function() {
    window.now = nowInitialize('http://xxx.yyy:6564');

    now.recvMsg = function(message){
        $j("body").append("<br>" + message);
    }

    $j("#send-button").click(function(){
        now.sendMsg("well done"); //## this work
    });
    now.sendMsg("aaaah"); //## this dont work
}); 
```

和服务器端代码：

```
var server = require('http').createServer(function(req, res){});
server.listen(6564);

var nowjs = require("now");
var everyone = nowjs.initialize(server);

everyone.now.sendMsg = function(message){
   everyone.now.recvMsg(message);
}; 
```

并且在单击事件函数中调用 sendMsg （服务器端函数）工作，但在就绪事件之外不工作。为什么？

我什至尝试过这样的事情：

```
setTimeout('now.sendMsg("aaaah")',1000); 
```

还是不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:58:24.003

NowJS 需要时间来加载自己，并且在代码的第 2 行和第 11 行之间没有时间这样做。你打电话时：

```
now.sendMsg("aaaah"); //## this dont work 
```

NowJS 仍然没有加载，无法执行这段代码。当你点击一个按钮 NowJS 完全加载并运行——并且可以发送消息。添加回调函数以确保在尝试使用库之前已设置该库。

# objective-c - 如何更改按钮上的背景图像，iOS？

> ID：11469908
> 
> 赞同：6
> 
> 时间：2012-07-13T11:48:58.700
> 
> 标签：objective-c, ios, image, uibutton

我在视图控制器上创建了一个具有预定义背景图像的按钮。我为这个按钮创建了一个动作和一个出口。我想在用户点击按钮时更改此按钮的背景图像。我怎样才能做到这一点？我试图在按钮的操作方法中加入如下内容：

```
snapshotCheckbox.image = [UIImage imageNamed:@"snapshot.png"]; 
```

但我猜这种方法适用于 UImageViews。我怎样才能为按钮做同样的事情？非常感谢您阅读我的帖子 :D

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T11:53:02.490

您可以在 viewDidLoad 中为按钮的给定状态设置图像：

```
[myButton setBackgroundImage:[UIImage imageNamed:@"myBackgroundImage.png"] forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T13:19:37.300

一个按钮有两个`properties` `image`和`backgroundImage`..

供`setting image`使用

```
button.currentImage = image (or) 
[button setImage:image   ForState:UIControlStateNormal]; 
```

供`setting backgroundImage`使用

```
button.currentBackgroundImage = image (or) 
[button setBackgroundImage:image  ForState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T13:55:04.420

首先将按钮的类型设置为

```
button = [UIButton buttonWithType :UIButtonTypeCustom]; 
```

然后使用

```
 [button setImage:[UIImage imageNamed:@"imagename.type"]   ForState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T11:52:51.717

一种解决方案是在 a 中显示图像`UIImageView`并在 UIImageView 顶部放置一个透明的 UIButton。在 Interface Builder 中，您可以将 UIButton 更改为“自定义”。这将允许您在处理按下 UIButton 时触发的操作时轻松更改 UIImageView 中显示的图像。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T11:57:20.457

你有`setBackgroundImage:forState:`按钮对象的方法。有关更多信息（秒回答），请参阅[在代码中为 UIButton 设置图像。](https://stackoverflow.com/questions/1469474/setting-an-image-for-a-uibutton-in-code)

此外，如果您为状态设置图像，UIButtons 会在按下时自动更改图像`UIControlStateHighlighted`（尽管只要用户一直按下按钮）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T12:06:00.393

设置按钮

**如果您在单击时需要图像**

```
[snapshotCheckbox setImage:[UIImage imageNamed:@"snapshot.png"]  forState:UIControlStateHighlighted]; 
```

**或者如果您在选择后想要图像**

```
[snapshotCheckbox setImage:[UIImage imageNamed:@"snapshot.png"] forState:UIControlStateSelected]; 
```

**并在那个onclick功能上提到**

```
snapshotCheckbox.Selected=YES; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-20T20:42:20.143

**要在按钮上设置图像，只需在Main.storyboard**中按下您想要图像的按钮，然后在右侧的**实用工具**栏中，按下**属性检查**器并将背景设置为您想要的图像！确保您在左侧的**支持文件**中有您想要的图片。

# wpf - 在 WPF 中，如何从 CodeBehind 访问 WrapPanel

> ID：11469911
> 
> 赞同：0
> 
> 时间：2012-07-13T11:49:10.947
> 
> 标签：wpf, vb.net, wpf-controls, runtime-error

我在 XAML 中有如下定义的 WrapPanel ...

```
<Page x:Class="SelectImages"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      mc:Ignorable="d" 
      d:DesignHeight="320" d:DesignWidth="480"
      Title="Select Images">
    <Grid>
        <WrapPanel Name="MyImagePanel" Width="Auto" Height="Auto" Margin="10,50,10,10"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Orientation="Horizontal">

        </WrapPanel>

    </Grid>
</Page> 
```

当我尝试在后面的代码中使用 WrapPanel 时，出现运行时错误“对象引用未设置为对象实例”。

```
Private Sub AddImageToPanel(Image As FileSystemInfo)
    MyImagePanel.Children.Add(NewPicture(Image))
End Sub 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T00:16:43.993

我正在使用...导航到此页面

`Dim SelectImagesPage As New SelectImages(FolderPath, SelectedProductID) Me.NavigationService.Navigate(SelectImagesPage)`

似乎构造函数不会自动初始化组件。添加`InitializeComponent()`到我页面上的构造函数中，现在一切正常。

# linq-to-sql - LINQ TO SQL 事务范围错误

> ID：11469912
> 
> 赞同：0
> 
> 时间：2012-07-13T11:49:13.457
> 
> 标签：linq-to-sql

我在 TransactionScope() 和 datacontext 上遇到错误，如下所示。

找不到类型或命名空间名称“TransactioScope”（您是否缺少 using 指令或程序集引用？）

找不到类型或命名空间名称“HRPaidTimeOffDataContext”（您是否缺少 using 指令或程序集引用？）

我必须怎么做才能在下面的代码中解决这个问题。

```
using ( TransactioScope ts = new TransactionScope())
         {
            // Create the data context
            using (HRPaidTimeOffDataContext db = new HRPaidTimeOffDataContext())
            {
            //Now save the record
            if (this.Save(db, ref validationErrors, userAccountId))
            {
            // Commit transaction if update was successful
            ts.Complete();
            return true;
        }
        else
        {
        return false;
        }
        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:27:30.413

> 您是否缺少 using 指令或程序集引用？

是的，你错过了。两个其实...

第一个：TransactionScope。

在文档（http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx）中，您会发现：

> 命名空间：System.Transactions
> 
> 程序集：System.Transactions（在 System.Transactions.dll 中）

因此，您需要在代码顶部包含这一行：

```
using System.Transactions; 
```

另一个是你自己的

```
HRPaidTimeOffDataContext 
```

所以我不能告诉你要输入什么，但我想你现在可以应付了。

# javascript - Javascripts dateObject：从 5 月 31 日跳转到下个月得到 7 月 1 日

> ID：11469917
> 
> 赞同：0
> 
> 时间：2012-07-13T11:49:30.377
> 
> 标签：javascript, date, datepicker, monthcalendar

我必须为客户端构建一个没有任何库（如 jQuery）的 DatePicker。我在本地机器上成功了。但是我的客户现在正在使用它，如果它包含在他的网络应用程序中，它会显示一些奇怪的行为。

如果我选择 5 月 31 日并滚动到下个月，我将在 7 月 1 日结束。在我单击按钮启动“jumpToNextMonth”功能之前，DateObject 实际上是 5 月 31 日。我假设 dateObject 跳到不存在的 6 月 31 日，然后向前跳到 7 月 1 日。这也发生在 8 月以及所有其他 30 天的月份，然后是 31 天的月份。

点击时触发的行是

```
this.currentDate = new Date(this.currentDate.getFullYear(),
                           this.currentDate.getMonth() + 1,
                           this.currentDate.getDate()); 
```

我在本地机器上看不到这种行为，也看不到它运行 apache 服务器。我无法想象是什么破坏了我的客户网络应用程序上的日期对象，不幸的是我无权访问他们的文件。

如果您能帮我回答这两个问题，我将不胜感激：

1.  为什么它没有发生在我的本地机器上
2.  我如何在不将 Day 设置为“1”的情况下修复它，例如`this.currentDate = new Date(this.currentDate.getFullYear(), this.currentDate.getMonth() + 1, 1);`

我在这里发现了类似的未回答的问题 [Flex Mobile 4.6: DateSpinner dateAndTime jumping from Jan 31st to March 1st](https://stackoverflow.com/questions/9126194/flex-mobile-4-6-datespinner-dateandtime-jumping-from-jan-31st-to-march-1st)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:52:49.927

你已经回答了你自己的问题。对象中的 6 月 31 日实际上是 7 月 1 日。

这能解决您的问题吗？

```
function daysInMonth(month, year)
{
    return 32 - new Date(year, month, 32).getDate();
}

var y = this.currentDate.getFullYear();
var m = this.currentDate.getMonth() + 1;
var d = Math.min(this.currentDate.getDate(), daysInMonth(m, y);
this.currentDate = new Date(y, m, d); 
```

# node.js - Jasmine (mocha) 嵌套“it”测试

> ID：11469919
> 
> 赞同：16
> 
> 时间：2012-07-13T11:49:34.627
> 
> 标签：node.js, mongoose, jasmine, mocha.js

我试图测试项目的后续创建/删除（在 mongoDB 中通过 mongoose）。

创建的问题是异步的，它在回调函数中返回已创建项目的 ID，我需要此 ID 来删除已创建的项目，所以我尝试了 mocha 的以下代码（以不同的方式）但它不起作用。

```
describe('Item Model', function(){

  it('should be able to create item', function(done){
    var item = new Item({name: {first: "Alex"});
    item.save(function(err, data){

      it('should be able to deleted created item', function(done){                    
        Item.delete({_id: data.id}, function(err, data){
        done(err);
        });
      });

    })
  });

}); 
```

这样的测试可以在 mocha 或 jasmine 中实现吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T12:03:40.187

我会为此做两个测试。一个是测试插入，一个是测试删除。

在咖啡脚本中应该看起来像这样

```
describe 'Item model', () ->
   item = ''
   before (done) ->
      item = new Item {name: {first: "Alex"}}
      done
    describe 'When inserting Item', () ->
        before (done) ->
            item.save done
        it 'should have been insterted' ->
            #CHECK HERE IT IF IT IS INSERTED

    decribe 'when deleting', () ->
        before (done) ->
            item.save (err,data) ->
                return done err if err
                Item.delete {_id: data.id}, done
        it 'should have been deleted' ->
            #CHECK HERE IT IF IT IS Deleted 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-24T21:57:50.097

看到这个问题： [https ://github.com/visionmedia/mocha/issues/438](https://github.com/visionmedia/mocha/issues/438)

似乎其目的是强制将测试解耦。虽然不方便并且可能需要更多的模拟，但这种行为很有用，因为它需要的重新测试更少，并且可以更清晰地了解到底发生了什么。

即有2个测试，测试A和测试B，其中B依赖于A。

测试 A 中断，因此 B 也中断。您修复了破坏测试 A 的内容，但现在可能会惊讶地发现测试 B 在修复过程中或由于不相关的原因而破坏。

当测试不相互依赖时，您可以获得更好的信息和更少的惊喜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-21T09:30:25.317

我遇到过类似的问题，当我尝试嵌套的 describe/it 结构时，它确实有效。

```
describe('Item Model', () => {
   it('should be able to create item', done => {
      var item = new Item({name: {first: "Alex"});
      item.save(function(err, data){
         describe('Item Delete', () => {
            it('should be able to deleted created item', done => {
               Item.delete({_id: data.id}, function(err, data){
                 done(err);
               });
            });
         });
      }); 
   });
}); 
```

# ssh - ssh 脚本和复制文件

> ID：11469922
> 
> 赞同：0
> 
> 时间：2012-07-13T11:49:51.810
> 
> 标签：ssh, copy

我正在 RH 5 上编写 BASH 部署脚本。脚本运行良好，并在脚本运行结束时发送电子邮件。但是，我需要做的是，在脚本结束时，如果我检测到任何故障，我需要将日志文件复制回本地服务器以附加到电子邮件中。

脚本可以很好地检测故障，如何将日志文件复制回来。我不想只记录日志文件，因为它们可能很大。

有什么建议么？

谢谢

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:34:26.740

我看不出有任何简单的方法可以避免使用`scp/sftp`. 如果您确定只有将返回的日志文件，您可以执行以下操作：

```
ssh -e none REMOTE SCRIPT | gzip -dc > LOGFILE 
```

在里面`SCRIPT`你有类似`gzip -c LOGFILE`if 失败的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:00:42.060

如果我正确理解您的问题，您应该使用 scp [http://linux.die.net/man/1/scp](http://linux.die.net/man/1/scp)

在这里您可以找到如何自动登录，以便您可以在脚本 [http://linuxproblem.org/art_9.html中使用它](http://linuxproblem.org/art_9.html)

# php - 什么是正确和安全的通过 url 传递 url

> ID：11469930
> 
> 赞同：2
> 
> 时间：2012-07-13T11:50:13.247
> 
> 标签：php

我想通过 url 传递 url（甚至几个 url），即使用 url like `http://domain/file.php?url1=...&url2=...`. 问题是如何使此类网址安全且有效。会`urlencode()`有所帮助。

顺便说一句，如果我这样做`urlencode($url)`，我需要`urldecode()`在做之前`header("Location: $url")`

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T11:52:17.587

我的建议是使用：

[http://php.net/manual/en/function.http-build-query.php](http://php.net/manual/en/function.http-build-query.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:59:17.523

> 将 urlencode() 帮助。

是的。

> 顺便说一句，如果我执行 urlencode($url)，是否需要在执行 header("Location: $url") 之前进行 urldecode()

不。您需要对进入最终网址的单个网址进行编码，即

```
$url1= "http://www.example.com";
$final = "http://yourdomain.com?url1=".urlencode($url1); 
```

# c++ - 如何使用 C++ 在 linux 中获取 UTC 偏移量

> ID：11469931
> 
> 赞同：4
> 
> 时间：2012-07-13T11:50:14.317
> 
> 标签：c++, debian, utc

我正在使用以下代码段来计算 utc 偏移量，但我意识到有时它会返回错误的结果：

```
double DateTime::getUTCOffset()
{
    time_t currtime;

    struct tm * timeinfo;

    time ( &currtime );

    timeinfo = gmtime ( &currtime );

    time_t utc = mktime( timeinfo );

    timeinfo = localtime ( &currtime );

    time_t local = mktime( timeinfo );

    // Get offset in hours from UTC

    double offsetFromUTC = ((difftime(local, utc) / HOUR_IN_SECONDS) );

    // Adjust for DST

    if (timeinfo->tm_isdst)
    {
        offsetFromUTC += 1;
    }
    return offsetFromUTC;
} 
```

90% 的时间它是正确的，计算 UTC 偏移量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T12:21:37.597

我认为该`tm_gmtoff`字段应该在您的系统上可用。

```
std::time_t current_time;
std::time(&current_time);
struct std::tm *timeinfo = std::localtime(&current_time);
long offset = timeinfo->tm_gmtoff; 
```

# c++ - 如何从可变参数类型包中获取特定类型？

> ID：11469933
> 
> 赞同：6
> 
> 时间：2012-07-13T11:50:20.673
> 
> 标签：c++, variadic-templates

我想做这样的事情：

```
template<typename ...T> struct foo
{
  bar<0 /*to index through types in pack*/ ,T...>::type var1;
  bar<1 /*to index through types in pack*/ ,T...>::type var2;
  ...
} 
```

但我将如何定义`bar`？没有想到递归技术来做到这一点。

我想要一种通用技术，以便我可以从类型包中对任何特定类型进行 typedef，而不仅仅是示例中显示的两个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T12:04:45.113

```
#include <iostream>
#include <typeinfo>

template<class T, class T2, class... Args>
class C
{
public:
   typedef T type1;
   typedef T2 type2;
};

int main()
{
   typedef C<int, double, int, float> c;
   std::cout << typeid(c::type1).name() << " " << typeid(c::type2).name() << std::endl;
} 
```

或mb类似的东西。

```
#include <iostream>
#include <typeinfo>

template<int N, class T, class... Args>
struct expand
{
public:
   typedef typename expand<N - 1, Args...>::type type;
};

template<class T, class... Args>
struct expand<1, T, Args...>
{
public:
   typedef T type;
};

template<class... Args>
class argsExpander
{
public:
   typedef typename expand<1, Args...>::type type1;
   typedef typename expand<2, Args...>::type type2;
};

template<class... Args>
class C
{
public:
    typename argsExpander<Args...>::type1 var1;
    typename argsExpander<Args...>::type2 var2;
};

int main()
{
   C<int, double, int, float> c;
   std::cout << typeid(c.var1).name() << " " << typeid(c.var2).name() << std::endl;
} 
```

[http://liveworkspace.org/code/7de289f128e86eb6006f576cbaf98991](http://liveworkspace.org/code/7de289f128e86eb6006f576cbaf98991)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:23:45.960

是的，你可以用递归来做到这一点......事实上你或多或少地重新实现`std::tuple`（并且隐式地`std::get`）。

访问成员是一项艰巨的工作，因为除非您手动命名它们`var1`，否则您无法调用它们等。`var2`

```
template <typename... TypeList> struct foo;

template <typename Head, typename... Tail>
struct foo<Head, Tail...>: public foo<Tail...>
{
    Head var;
}; 
```

我在这里使用了继承，但组合（使用`foo<Tail...> tail`成员）也可以。

现在，如果您的类型是唯一的，您可以按类型访问成员...

```
// this overload if VarType is the first
template <typename VarType, typename... FooTail>
VarType& foo_get(foo<VarType, FooTail...>& f)
{
    return f.var;
}

// this overload to walk down to foo's parent
template <typename VarType, typename FooHead, typename... FooTail>
VarType& foo_get(foo<FooHead, FooTail...>& foo)
{
    return foo_get<VarType>(static_cast<foo<FooTail...>>(f));
}

// call like:
// int &x = foo_get<int>(my_foo_object); 
```

或者您可以按位置访问：

```
template <int N, typename... TypeList> struct GetHelper;

template <typename Head, typename... Tail>
struct GetHelper<0, Head, Tail...>
{
    static Head& get(foo<Head, Tail...> &f) { return f.var; }
};

template <int N, typename Head, typename... Tail>
struct GetHelper<N, Head, Tail...>: public GetHelper<N-1, Tail...>
{};

template <int N, typename... TypeList>
auto foo_get(foo<TypeList...> &f)
  -> GetHelper<N, TypeList...>::get(*static_cast<foo<TypeList...>*>(0))
{
    return GetHelper<N, TypeList...>::get(f)
}

// call like:
// int &x = foo_get<2>(my_foo_object); 
```

两者都可以改进以获得更好的错误报告（虽然我使用了这两种技术，但我什至没有尝试编译这个示例代码）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:36:06.737

如果我正确理解你的问题，你想实现类似于 std::tuple 的东西：

我认为元组是这样实现的：

```
template <class T>
class tuple
{
  T mem;
};

template <class T, class... REST>
class tuple : tuple<REST...>
{
  T mem;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T13:25:28.070

只需***使用***std::tuple 作为@Xeo 不断评论。它很方便，并且完全符合您的要求。

引用：

为什么不只使用 a `std::tuple<T...>`？

访问元素作为`std::get<I>(tup)`和

类型为`std::tuple_element<I, std::tuple<T...>>::type`

# c# - 创建一个每小时从 azure 下载文件的 Windows 服务

> ID：11469949
> 
> 赞同：1
> 
> 时间：2012-07-13T11:51:23.863
> 
> 标签：c#, .net, azure, windows-services, download

让它发挥作用的最佳方法是什么？

我尝试了一些东西，但 AzureService 不想使用该服务。该服务本身起作用，AzureService 也起作用，但一起不起作用。

有没有人已经做过这样的事情？

我将服务放在本地系统上，但我无法让服务运行，因为它无法与 AzureService 一起编译，它给出了一个参考错误但有一个参考，我无法消除这个问题。

对服务的需求是需要在没有用户交互的情况下更新文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:03:28.030

老实说，考虑到 Scott Gu 团队最近所做的增强，我认为一个简单的预定 powershell 脚本将是最简单的。这是[汉塞尔曼](http://www.hanselman.com/blog/WindowsAzureNoKidding.aspx)对这个话题的看法。

此外 - [at 命令](http://support.microsoft.com/kb/313565)并从命令行[运行 powershell 脚本](http://www.leeholmes.com/blog/2006/05/05/running-powershell-scripts-from-cmd-exe/)。

# sql - 在 EntityManager 中创建删除查询时出现异常

> ID：11469953
> 
> 赞同：-1
> 
> 时间：2012-07-13T11:51:33.043
> 
> 标签：sql, jpa, jpql, entitymanager

这是方法：

```
public void deleteVotesByReplyID(long replyId) {
        EntityManager em = getEntityManager();
        try {
           int re = em.createQuery("delete object(o) 
                                    from Vote as o 
                                    where o.memberReply.id = '"+replyId+"'"
                                  ).executeUpdate();       
        } finally {
            em.close();
        }
    } 
```

上面的查询有什么问题？（使用 jpa 1.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:06:16.087

可能是因为删除查询开始

```
DELETE FROM entity_name [[AS] identification_variable] [WHERE <filter>] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T01:48:21.490

您的查询可以写成

```
"DELETE from Vote o where o.memberReply.id = 'someId'" 
```

此外，DELETE 查询只能在活动事务中执行。你会想要

```
em.getTransaction().begin();
query.executeUpdate();
em.getTransaction().commit(); 
```

并且还要

```
catch (Exception e) {em.getTransaction().rollback();} 
```

# php - PHP：执行 Select 语句

> ID：11469954
> 
> 赞同：0
> 
> 时间：2012-07-13T11:51:33.970
> 
> 标签：php, mysql

我在 MySQL 中输入了以下查询：

```
insert into hospital (name,age) values ('william', 'select * from department where age = $agegrp'); 
```

现在我已经获取了这个值（sql），并试图执行它。我怎样才能做到这一点？

我已将该`select`语句提取到一个名为`$var`.

```
$agegrp = "10";
$value = mysql_query ($var) or die ('error'); 
```

我只知道`error`我插入的查询有问题。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:00:07.800

我的第一个问题：你为什么在你的医院表中存储 sql 代码？如果您的所有 sql 代码都嵌入到您的 php 程序代码中，那将更有意义。如果您以后更改表设计，则不必更改数据库表的内容。

但要回答您的问题，您的 $var 的内容是一个简单的字符串。你想要的是评估它或用变量 $agegrp 的实际值替换字符串'$agegrp'。所以你可以这样做：

```
$agegrp = "10";
$var = str_replace('$agegrp',$agegrp,$var;
$value = mysql_query ($var) or die ('error'); 
```

这将是一个简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:56:17.337

年龄是一个可能是整数的属性。您不能在该字段中插入查询。您需要做的是执行查询；

```
"SELECT * FROM Department WHERE age = {$agegrp}" 
```

然后，获取结果，然后执行插入。此外，请尽早查看查询的绑定参数。您不想允许 sql 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:01:54.250

试试这个。

```
 <?php
    $con = mysqli_connect("localhost","username","password");
    if (!$con)
      {
      die('Could not connect: ' . mysqli_error());
      }

  $var=  mysqli_select_db("my_db", $con);

    $var="select * from department where age = $agegrp");
    $result=mysqli_query($var);
    while($row = mysqli_fetch_array($result))
      {
      echo $row['age'] ;
      echo "<br />";
      }

mysqli_close($con);
?> 
```

# php - 在 PHP 中查找和替换电子邮件和电话号码

> ID：11469957
> 
> 赞同：2
> 
> 时间：2012-07-13T11:51:50.947
> 
> 标签：php, email, hide

我希望对此有所帮助，因为这让我有点困惑......我运行一个允许用户来回发送消息的网站，但在收件箱中我需要隐藏电子邮件和电话号码。

示例：这是示例电子邮件的外观。

**嗨，我的电话是 +44 5555555，电子邮件是 jack@jack.com**

我需要它是这样的：

**嗨，我的电话是（电话隐藏），电子邮件是（电子邮件隐藏）**

你有什么想法吗？...我真的很感激！..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T11:55:43.423

```
$x = 'Hi, my phone is +44 5555555 and email is jack@jack.com';
$x = preg_replace('/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i','(phone hidden)',$x); // extract email
$x = preg_replace('/(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?/','(email hidden)',$x); // extract phonenumber
echo $x; // Hi, my phone is (phone hidden) and email is (email hidden) 
```

kudo 的电话号码正则表达式到[fatcat](https://stackoverflow.com/users/4593/fatcat1111)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T11:55:08.170

当用户可以输入各种各样的东西时，试图以 100% 的准确率做到这一点是不可能的——你不能真正明确地说一个子字符串是一个电话号码还是另一个号码，或者一个电子邮件地址，或者只是一个可能是有效的。

但是，如果您想尝试，您可能应该使用正则表达式。见[http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-07T06:42:27.923

```
<pre>
/*
* first par is given string
* second per is replace string like ****
* return result 
*/
function email_phone_validation_replace_php($str='',$rep='*******') { 

    $str = preg_replace('/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/i',$rep,$str); // extract email
    $str = preg_replace('/(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?/',$rep,$str); // extract phonenumber
    return  $str; // banarsiamin@gmail.com
}
$str = 'Hi, my name is amin khan banarsi <br> phone is +91 9770534045 and email is banarsiamin@gmail.com';
 echo email_phone_validation_replace_php($str);
</pre> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:20:58.383

如果我理解正确，您的用户可以互相发送消息，您担心如果他们发送包含个人信息的消息，则该信息可能太显眼。

我猜您因此试图从消息的预览中删除此信息（但如果您打开消息，它仍然可用吗？）。

如果是这种情况，那么您可以使用一个非常草率的正则表达式来删除任何看起来有点像数字或电子邮件的东西。是否隐藏非个人信息并不重要，因为消息的未经审查版本始终可用。

我会选择这样的东西（未经测试）：

```
# Take any string that contains an @ symbol and replace it with ...
# The @ symbol must be surrounded by at least one character on both sides
$message = preg_replace('/[^ ]+@[^ ]+/','...',$message); # for emails
# Take any string that contains only numbers, spaces and dashes, replace with ...
# Can optionally have a + before it.
$message = preg_replace('/\+?[0-9\- ]+/','...',$message); # for phone numbers 
```

这将匹配很多东西，而不仅仅是电子邮件和电话号码。它也可能与我没有想到的电子邮件和电话号码不匹配，这是为这类事情编写正则表达式的问题之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-29T08:51:57.947

如果您想在 PHP 或任何其他语言的消息或聊天中隐藏电子邮件和电话号码。您需要使用正则表达式，阅读[w3school](https://www.w3schools.com/jsref/jsref_obj_regexp.asp)上的正则表达式。

我为您提供了一个简单而完整的解决方案。

```
<?php       
    $regex_email = '/[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})/';
    $regex_phone = "/[0-9]{5,}|\d[ 0-9 ]{1,}\d|\sone|\stwo|\sthree|\sfour|\sfive|\ssix|\sseven|\seight|\snine|\sten/i";

    $str = " Hello My Email soroutlove1996@gmail.com AND Phone No. is +919992799999 and +91 9992799999, or 9 9 9 2 7 9 9 9 9 9 and Nine Nine";;
    $str = preg_replace($regex_email,'(email hidden)',$str); // extract email
    $str = preg_replace($regex_phone,'(phone hidden)',$str); // extract phone

    echo $str; 
```

> **输出：**你好我的电子邮件（电子邮件隐藏）AND电话号码是+（电话隐藏）和+（电话隐藏），或（电话隐藏）和（电话隐藏）（电话隐藏）

# awk - 如何将tail -f通过管道传输到awk

> ID：11469959
> 
> 赞同：5
> 
> 时间：2012-07-13T11:51:53.957
> 
> 标签：awk, tail

我正在尝试设置一个脚本，当某个字符串出现在日志文件中时会生成警报。

已经到位的解决方案每分钟对整个日志文件进行一次 greps 并计算字符串出现的频率，使用日志行的时间戳仅计算前一分钟的出现次数。

我认为用尾巴做这件事会更有效率，所以我尝试了以下方法作为测试：

```
FILENAME="/var/log/file.log"

tail -f $FILENAME | awk -F , -v var="$HOSTNAME" '
                BEGIN {
                        failed_count=0;
                }
                /account failure reason/ {
                        failed_count++;
                }
                END {
                        printf("%saccount failure reason (Errors per Interval)=%d\n", var, failed_count);
                }
' 
```

但这只是挂起并且不输出任何内容。有人建议这个小改动：

```
FILENAME="/var/log/file.log"

awk -F , -v var="$HOSTNAME" '
                BEGIN {
                        failed_count=0;
                }
                /account failure reason/ {
                        failed_count++;
                }
                END {
                        printf("%saccount failure reason (Errors per Interval)=%d\n", var, failed_count);
                }
' <(tail -f $FILENAME) 
```

但这做同样的事情。

我正在使用的 awk（我在上面的代码中进行了简化）工作正常，因为它在现有脚本中使用，其中*grep "^$TIMESTAMP"*的结果通过管道传输到其中。

我的问题是，如何让 tail -f 与 awk 一起工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T12:08:13.240

假设您的日志看起来像这样：

```
Jul 13 06:43:18 foo account failure reason: unknown
 │   │    
 │   └── $2 in awk
 └────── $1 in awk 
```

你可以这样做：

```
FILENAME="/var/log/file.log"

tail -F $FILENAME | awk -v hostname="$HOSTNAME" '
    NR == 1 {
        last=$1 " " $2;
    }
    $1 " " $2 != last {
        printf("%s account failure reason (Errors on %s)=%d\n", hostname, last, failed);
        last=$1 " " $2;
        failed=0;
    }
    /account failure reason/ {
        failed++;
    }
' 
```

请注意，我已将其更改为`tail -F`（大写 F），因为它处理日志老化。并非每个操作系统都支持此功能，但它应该可以在现代 BSD 和 Linuces 中使用。

**这是如何运作的？**

awk 脚本由`test { commands; }`针对每一行输入的评估集组成。（有两个特殊测试，它们`BEGIN`的`END`命令分别在 awk 启动和 awk 结束时运行。在你的问题中， awk 从未结束，因此`END`代码从未运行。）

上面的脚本包含三个测试/命令部分：

*   首先，`NR == 1`是一个仅在输入的第一行上评估 true 的测试。它运行的命令会为变量创建初始值，将`last`在下一节中使用。
*   在第二部分中，我们测试“last”变量自评估的最后一行以来是否发生了变化。如果这是真的，则表明我们正在评估新一天的数据。现在是时候打印上个月的摘要（日志），重置我们的变量并继续前进。
*   第三，如果我们正在评估的行与正则表达式匹配`/account failure reason/`，我们增加我们的计数器。

清如泥？:-)

# algorithm - 使用遗传算法和matlab进行资源分配

> ID：11469962
> 
> 赞同：0
> 
> 时间：2012-07-13T11:52:02.030
> 
> 标签：algorithm, genetic

我正在研究资源分配问题，在这个问题上我总共有 50000 个资源，我想将它分配到 6 个模块上。目标是

```
f(i)=1-exp(-b(i)*w(i)); for i=1 to 6
g(i)=1+2*exp(-b(i)*w(i)); for i=1 to 6
ff=(c1-c2)*a(i)*v(i)*f(i)/g(i)+c2*a(i)+c3*w(i);  for i=1 to 6 
```

并且 a(i),b(i),c1,c2,c3 和 v(i) 是已知的

并且约束是

w(i)<=w ware i=1 到 6

w(i)>=0 并且

r(i)=1-exp(-b(i)*w(i))/1+2*exp(-b(i)*w(i))>=0.9；即每个模块的 r(i) >= 0.9

所以我需要 W(i) i=1 到 6，总 w 是 50000。

请任何人告诉我我将如何使用遗传算法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:37:06.750

拥有评估函数不足以确定遗传算法的外观，因为即使评估函数非常重要，它也不是问题的唯一部分。为了全面评估您的问题，至少需要了解以下内容：

1.  每个模块和总分布有什么限制？例如，每个模块是否有容量限制？
2.  我们正在处理什么样的资源？资源之间是否存在依赖关系，无论是功能还是时间？
3.  我们正在处理什么样的问题？是否要分配所有资源，或者我们是否打算使用它们来执行特定任务（因此，我们将需要每个模块中特定类型的资源）？

假设您需要分配的所有资源，最简单（也许是最愚蠢）的解决方案是将每个资源将被指定到的模块编码到染色体中，并具有 50.000 长的 1、2、3、...和 ​​6 字符串。当然，所有位串运算符都可以应用于此解决方案，只需进行一些小的更改即可。

但是，由于使用 50.000 个字符长的字符串是可行的，因此我们需要替代方案。如果每个资源上有任何数字参数，我们可以考虑创建一个由组中心组成的表示，并根据它们与每个中心的接近程度对资源进行聚类。然而，应该将资源有意义地转置到多维实数集中。为了创造它，我们需要更多地了解资源本身。

# javascript - 带小数的货币正则表达式

> ID：11469966
> 
> 赞同：0
> 
> 时间：2012-07-13T11:52:32.280
> 
> 标签：javascript, regex, currency

我需要帮助：我想在 javascript 中验证我的货币输入格式：

`1 234,78`（因此可能存在 1000 到 2 位小数之间的空间）。

例子：

```
50,25
50
1 150
1 150,44
1 000 001
1 000 001,25 
```

你能帮助我吗？

谢谢2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:01:01.737

`^(\+|-)?(0|[1-9][0-9]{0,2}( [0-9]{3,3})*)(,[0-9]{1,2})?$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T09:30:17.500

它已经过测试并且可以正常工作

例如：9 999 999 999,99

$('#amount').change(function() {

$('tr:last').find("td:last").text(messages['amount invalid']).hide();

```
var inputVal = $(this).val();   

var patternMontant = /^\$?(([0-9]{0,10}))?\,[0-9]{2}$/;

if(!patternMontant.test(inputVal)) { 
```

$( 'tr:last' ).find("td:last").text(messages['amount invalid']).show().css("color","re​​d");

```
 $(this).val(''); 
```

}

});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:04:00.350

我想像->

```
re.match(r"[0-9]{0,2}(\s[0-9]{3})*", str) 
```

应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-27T14:40:51.993

使用 jquery 的 autoNumeric 插件非常好用，也很简单。当您在表单输入中键入时自动格式化货币和数字的插件

首先 - 在标头中包含 jQuery.js 和 autoNumeric-1.9.19.js javascript 文件：

第二 - 在 HTML/JSP 文档中插入表单和输入字段：

第三 - 在单独的脚本中初始化 autoNumeric $('selector').autoNumeric('init')：

jQuery（函数（$）{

```
 $('#someID_defaults').autoNumeric('init', {aSign:',', pSign:'£', vMax:'99999.99' }); 
```

});

# android - 在 android 应用程序上注销 Facebook 时，我不断收到此错误

> ID：11469968
> 
> 赞同：1
> 
> 时间：2012-07-13T11:52:40.287
> 
> 标签：android, facebook, facebook-graph-api

我在 Facebook 中创建了一个带有用户身份验证的应用程序。但是当我最小化、恢复然后注销 Facebook 时，它会抛出以下错误。

```
07-13 16:35:42.989: E/AndroidRuntime(23464): FATAL EXCEPTION: Thread-47
07-13 16:35:42.989: E/AndroidRuntime(23464): android.database.sqlite.SQLiteDiskIOException: error code 10: disk I/O error
07-13 16:35:42.989: E/AndroidRuntime(23464):    at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
07-13 16:35:42.989: E/AndroidRuntime(23464):    at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
07-13 16:35:42.989: E/AndroidRuntime(23464):    at android.database.sqlite.SQLiteDatabase.delete(SQLiteDatabase.java:1632)
07-13 16:35:42.989: E/AndroidRuntime(23464):    at android.webkit.WebViewDatabase.clearCookies(WebViewDatabase.java:543)
07-13 16:35:42.989: E/AndroidRuntime(23464):    at android.webkit.CookieSyncManager.clearAllCookies(CookieSyncManager.java:128)
07-13 16:35:42.989: E/AndroidRuntime(23464):    at android.webkit.CookieManager$2.run(CookieManager.java:532)
07-13 16:35:42.989: E/AndroidRuntime(23464):    at java.lang.Thread.run(Thread.java:1019) 
```

产生错误的代码是

```
 private void fbLogout() {
    dialog.setMessage("Disconnecting from Facebook");
    dialog.show();

    new Thread() {
        @Override
        public void run() {
            Log.v("fbLogout() Clear", "fbLogout() Clear");
            SessionStore.clear(getParent());

            int what = 1;                   
            try {
                Log.v("fbLogout() Clear", "fbLogout() before logout()");
                mFacebook.logout(getParent());
                Log.v("fbLogout() Clear", "fbLogout()after logout()");

                what = 0;
            } catch (Exception ex) {                
                ex.printStackTrace();                   
            }                   
            mHandler.sendMessage(mHandler.obtainMessage(what));
        }
    }.start();
   }

    private Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        dialog.dismiss();           
        if (msg.what == 1) {
            Toast.makeText(getParent(), "Facebook logout failed", Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(getParent(), "Disconnected from Facebook", Toast.LENGTH_SHORT).show();
        }
    }
};

    public String logout(Context context)
        throws MalformedURLException, IOException {
    Util.clearCookies(context);
    Bundle b = new Bundle();//Generates Error
    b.putString("method", "auth.expireSession");//Generates Error
    String response = request(b);
    setAccessToken(null);
    setAccessExpires(0);
    return response; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:29:08.650

```
android.database.sqlite.SQLiteDiskIOException: error code 10: disk I/O error 
```

这说明了一切。设备的内部存储出现物理问题。如果您的设备仍在保修期内，运营商应为您更换。

将来，考虑在模拟器上做更多的开发，以免对设备的闪存造成太大压力。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:22:13.240

当您第一次登录应用程序时，Facebook 的 Web 视图创建了它的数据库。并将自己的数据库文件存储到Application的缓存中以保存Session。

我认为您正在删除应用程序中的缓存，因此会自动删除 webview 的数据库。下次您尝试从 Facebook 注销时，DVM 会引发 SQlite 数据库异常。

只需查看模拟器的文件资源管理器即可。你可能有任何解决方案。:-)

# c# - 如何在单击按钮时从 HTML 访问属性值以保存在 DB 中

> ID：11469973
> 
> 赞同：0
> 
> 时间：2012-07-13T11:52:47.147
> 
> 标签：c#, javascript, asp.net

我正在写一些添加一些链接属性，如下所示。哪个呈现为 HTML，但我想知道我可以在按钮单击事件中访问这些属性值吗？

我的代码如下

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        GridDataItem gridDataItem = (GridDataItem)e.Item;
        gridDataItem.Height = Unit.Pixel(10);
        HyperLink link = (HyperLink)gridDataItem["ContentTitle"].Controls[0];
        ViewState["ContentID"] = gridDataItem["ContentID"].Text;
        link.ForeColor = System.Drawing.Color.Navy;
        link.ToolTip = Common.grdTextCell(gridDataItem["ContentSummaryDescr"].Text);
        link.NavigateUrl = "~/SlideImages/" + gridDataItem["ContentName"].Text;//Session["contentFolderPath"] + "\\"+ gridDataItem["ContentName"].Text;// Common.grdTextCell(gridDataItem["ContentName"].Text);
        link.Target = "_blank";
        link.Attributes["name"] = gridDataItem["ContentID"].Text + "," + gridDataItem["SiteContentListID"].Text;
        HttpResponse myHttpResponse = Response;
        HtmlTextWriter myHtmlTextWriter = new HtmlTextWriter(myHttpResponse.Output);
        link.Attributes.AddAttributes(myHtmlTextWriter);
        link.Attributes.Add("onclick",
        "document.getElementById('" +
            dummyBtn.ClientID + "').click();");
    }
}

protected void dummyBtn_Click(object sender, EventArgs e)
{

} 
```

渲染的 HTML 是这样的..

我正在写这一行

```
<td><a style="color:Navy;" target="_blank" href="somepath/abc.doc" onclick="document.getElementById('MainContent_SiteNewCon_dummyBtn').click();" name="1,16" title="rupesh tesr">test</a></td> 
```

我想将 thses name="1, 16" 用于我的按钮单击事件，以便我可以将它们保存到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:02:04.880

是的，您可以使用 jQuery。例如，

```
 $("MyLink").click=(function(){
        alert( $("MyLink").attr("title"));//For getting title value.
    }); 
```

添加`id="MyLink"`到您的链接

```
<a style="color:Navy;" target="_blank" href="SlideImages/abc.doc" onclick="getAttr(this)"  name="1,16" title="rupesh tesr" id="MyLink">rupesh test</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:58:46.357

试试这个

```
string attr = link.Attributes["onlick"];

string name= link.Attributes["name"]; 
```

如果您想访问后面代码中的链接，则必须添加`runat="server"`

并使用and添加`Command`事件`CommandName``CommandArguments`

为什么不使用 LinkBut​​ton 最好只是一个 HyperLink

# jquery - 快速点击时标签内容“粘住”？

> ID：11469981
> 
> 赞同：0
> 
> 时间：2012-07-13T11:53:05.970
> 
> 标签：jquery, tabs

[http://jsfiddle.net/RwPps/25/](http://jsfiddle.net/RwPps/25/) - 脚本

嗨，伙计们，只是一个快速的问题（尽管我真的被卡住了，但我觉得问这个问题很糟糕）。我在这里使用的标签的问题是，如果您非常快速地向每个标签发送垃圾邮件，您最终可能会在查看下一个标签时将内容留在同一个标​​签上，我想我需要添加某种停止来阻止脚本从被重复发送垃圾邮件，

有人知道我该怎么做吗？

谢谢

菲尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:56:22.047

试试这个：

[http://jsfiddle.net/RwPps/26/](http://jsfiddle.net/RwPps/26/)

我唯一做的就是`.stop()`在你的`.fadeIn()`. 我认为问题（您可能已经猜到了）是动画在下一个事件触发之前没有机会完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:57:34.267

您可以使用`event.stopImmediatePropagation`，因此点击事件不会冒泡。 [小提琴](http://jsfiddle.net/RwPps/27/)

# msdeploy - Web 部署 (MSDeploy) API “postSync:runCommand”

> ID：11469985
> 
> 赞同：1
> 
> 时间：2012-07-13T11:53:27.193
> 
> 标签：msdeploy, web-deployment

我正在尝试通过 Web Deploy API (Microsoft.Web.Deployment) 部署网站。

使用 msdelpoy.exe，我可以根据需要执行任意数量的 -postSync:runco​​mmand（或 preSync），但我不知道如何通过 API 执行此操作。

这是我在 powershell 中的部署脚本，但您可以看到正在使用的 .net 类。

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.Web.Deployment")
function CallMSDeploy([string]$destinationServer, [string]$destinationIISSiteName, $sourceDirectory)
{
    $destBaseOptions   = new-object Microsoft.Web.Deployment.DeploymentBaseOptions
    $destBaseOptions.UserName = $deployUserName
    $destBaseOptions.Password = $deployPassword
    $destBaseOptions.ComputerName = $destinationServer

    $syncOptions       = new-object Microsoft.Web.Deployment.DeploymentSyncOptions

    $deploymentObject = [Microsoft.Web.Deployment.DeploymentManager]::CreateObject("contentPath", $sourceDirectory)
    $deploymentObject.SyncTo("contentPath",$destinationIISSiteName,$destBaseOptions,$syncOptions);
} 
```

我知道我可以使用“runCommand”提供程序新建一个 Microsoft.Web.Deployment.DeploymentObjectProvider 并指定一个路径，但是如何将它添加到上述部署的 preSync 中？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:28:49.913

`preSync`/`postSync`是 msdeploy 命令行的一项功能，而不是`Microsoft.Web.Deployment`API 本身。两者基本上都只是调用`CreateObject().SyncTo(destOptions)`，`destOptions`从主同步复制。

在 PS 中复制它应该没有问题。

# vb.net - 每 10 秒运行一次的 vb.net 队列

> ID：11469987
> 
> 赞同：0
> 
> 时间：2012-07-13T11:53:33.650
> 
> 标签：vb.net, queue

我有一个每 10 秒运行一次的队列：

```
Private Sub Form1Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load

        Dim t As New Timers.Timer(10000)
        AddHandler t.Elapsed, New ElapsedEventHandler(AddressOf Elapsed)
        t.Start()
    End Sub

    Private Sub Elapsed(ByVal sender As Object, ByVal e As ElapsedEventArgs)

        Dim timer1 As Timers.Timer = DirectCast(sender, Timers.Timer)

        Try
            ' disable temporarily
            timer1.Stop()
            _quemanager.StartProcessing()
            Thread.Sleep(1000)
        Finally
            ' make sure that the handler is always reenables
            timer1.Start()
        End Try
    End Sub

Namespace Managers

    Public Class QueueManager

        Private ReadOnly _items As New Queue

        Public Sub StartProcessing()

            For Each x In From i In File.GetAllAccountFolders() From x1 In File.CheckFolderForFiles(i & "\In") Select x1
                _items.Enqueue(x)
            Next

            Dim t1 As New Threading.Thread(AddressOf Process)

            t1.Start()
        End Sub

        Private Sub Process()
            Do
                SyncLock _items.SyncRoot
                    If _items.Count = 0 Then
                        'No more items.
                        Logger.Log("QueueManager", "Process", "No Items In Queue")
                        Exit Do
                    End If
                    Logger.Log("QueueManager", "Process", "Processing File: " & _items.Peek)
                    FileProcessingManager.ProcessFile(_items.Peek)
                    _items.Dequeue()
                End SyncLock
            Loop
        End Sub

    End Class
End Namespace 
```

这背后的逻辑应该是计时器每 10 秒经过一次停止计时器运行队列，然后当队列完成时，它应该再次启动计时器我是否有这种想法？并且在队列完成之前计时器无法重新启动它自己？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:09:50.227

在您的示例代码中，`QueueManager. StartProcessing`启动一个新线程来处理队列中的项目。这意味着它将立即返回，可能在处理队列之前。然后，在 timer elapsed 事件处理程序中，在一秒延迟后重新启动计时器。因此，如果队列的处理时间超过一秒，那么计时器确实会在队列处理完成之前重新启用。在这种情况下，我会完全取消那一秒钟的睡眠，并在完成后`QueueManager`引发一个事件。然后您的表单可以只监视该事件，当它被引发时，它可以重新启用事件处理程序中的计时器。`Me.Invoke`不过，在触摸计时器的属性之前，您需要先返回 UI 线程。

```
Public Class Form1
    Private WithEvents _quemanager As New QueueManager()
    Private WithEvents _t As New Timers.Timer(10000)

    Private Sub Form1Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load
        t.Start()
    End Sub

    Private Sub _t_Elapsed(ByVal sender As Object, ByVal e As ElapsedEventArgs) Handles _t.Elapsed
        ' disable temporarily
        _t.Stop()
        _quemanager.StartProcessing()
    End Sub

    Private Sub _quemanager_ProcessingCompleted() Handles _quemanager.ProcessingCompleted
        _t.Start()
    End Sub
End Class

Public Class QueueManager
    Private ReadOnly _items As New Queue
    Public Event ProcessingCompleted()

    Public Sub StartProcessing()
        '...
    End Sub

    Private Sub Process()
        Do
            '...
        Loop
        RaiseEvent ProcessingCompleted()
    End Sub
End Class 
```

# image - 如何使用 CFImage 调整大小并实际减小图像文件大小？

> ID：11469988
> 
> 赞同：3
> 
> 时间：2012-07-13T11:53:34.153
> 
> 标签：image, coldfusion, resize, cfimage

> **可能重复：**
> [如果文件大小没有减小并且图像质量受到影响，我为什么要在 Coldfusion 中调整图像大小？](https://stackoverflow.com/questions/10964720/why-should-i-resize-an-image-in-coldfusion-if-the-file-size-doent-decrease-and)

我一定在这里做错了什么......使用Coldfuison8

我有一个产品搜索，它从外部服务器中提取图像，所以我需要在运行时设置图像。

假设我有一个 jpg 500x500px 111kb，我是从外部服务器获取的。

现在我正在这样做：

```
<cfimage name="myImage" source="#bildpfad##bilddateiname#" action="read" />
<cfif IsImage(myImage) is true>
    <cfscript>
    ImageSetAntialiasing(myImage,"on");
    variables.breite = 400;
        ImageScaleToFit(myImage, variables.breite,"", "highestPerformance");
    </cfscript>
<cfxml variable="imageXml">
    <cfimage action="writetobrowser" source="#myImage#" />
</cfxml>
<cfoutput><div class="resultsImgWrap">#imageXml#</div></cfoutput> 
```

这可以显示图像，但是当我检查文件大小时，我有

```
400x400px 111.2kB 
```

例如，如果我使用 IrfanView 并缩小文件大小并保存图像，我已经是 65kb。

**问题**：如果我正在调整图像大小，如何使 CFIMAGE 减小文件大小？如果大小保持在 111kb，为什么要使用 CFIMAGE 而不是简单地将图像添加为纯 HTML。

**EDIT''：
变量 Bildpfad 和 Bilddateiname 将类似于：

```
bildpfad (path to image):         http://www.some-server.com/images/
bilddateiname (filename):         some_image123.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:44:50.227

在 中指定`quality`属性`<cfimage>`。我不确定它是否适用于`action="writeToBrowser"`，但它应该。否则，提交错误报告。

调整大小和压缩是不同的东西。:)

请参阅：[如果文件大小没有减小并且图像质量受到影响，为什么我应该在 Coldfusion 中调整图像大小？](https://stackoverflow.com/questions/10964720/why-should-i-resize-an-image-in-coldfusion-if-the-file-size-doent-decrease-and)

**更新**

好消息，有一种无证的方法可以让它工作！请参阅：[http ://www.bennadel.com/blog/2405-Using-The-Quality-Attribute-With-The-CFImage-WriteToBrowser-Action.htm](http://www.bennadel.com/blog/2405-Using-The-Quality-Attribute-With-The-CFImage-WriteToBrowser-Action.htm)

```
<!--- Write out as a JPG at 20% (using "quality" attribute). --->
<cfimage
    action="writeToBrowser"
    source="#png#"
    format="jpg"
    quality=".2"
    /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T21:21:15.587

使用 'action="writetobrowser"' 将使用源图像的副本。它创建一个临时文件，该文件被推送到浏览器并稍后销毁。

这是 CF 8 文档中的一句话：

“使用 writeToBrowser 操作将一个或多个 ColdFusion 图像直接显示到浏览器，而无需将它们写入文件。”

我用 CF8 用一张大照片 (4608x3456) @ 3.47MB 测试了你的代码。我的浏览器上显示的图像已调整为 400x300 @ 247.47KB。我用的是火狐右键| 查看图像信息以获取调整大小的图像信息。您还可以使用 Firebug | Net 选项卡以获取传输的图像大小。

调整大小的图像将位于“/CFFileServlet/_cf_image/”中。

原始文件 (#bildpfad##bilddateiname#) 的大小不会改变。

不要依赖设计为临时文件的存在。临时的意思就是这样。一次调整大小的文件名可能与 10 分钟后调整大小的文件名不同，即使它是相同的源图像。在不同版本的 CF 之间，临时文件的处理方式也可能不同。

如果您需要保留调整后图像的副本，请使用带有目标属性的 action="write" 或 action="resize" 并将调整后的图像的副本保存在 CF 服务器上。

这是它如何工作的示例：

```
<!---assume that bildpfad can be different domains/folders--->
<!---RegEx = remove protocol, replace '/' with '!',  replace '.' with '~'--->
<cfset slashReplacement = "!">
<cfset periodReplacement = "~">
<cfset imageFilename = REReplace(REReplace(REReplaceNoCase(bildpfad, "https?://", "", "one"), "\/", slashReplacement, "all"), "\.", periodReplacement, "all") & bilddateiname>
<!---resizedImgDestination is a web path--->
<cfset resizedImgDestination = "/images/resized/rs_#imageFilename#">
<!---debug info, can comment out when working--->
<cfoutput>source = [#bildpfad##bilddateiname#]<br />destination = [#ExpandPath(resizedImgDestination)#]<br /></cfoutput>
<!---/debug info, can comment out when working--->
<cfif NOT FileExists(ExpandPath(resizedImgDestination))>
    <cfhttp url="#bildpfad##bilddateiname#" result="stGetImg" resolveurl="no" useragent="Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1" timeout="45" getasbinary="yes" throwonerror="no" />
    <cfset myImage = ImageNew(stGetImg.FileContent)>
    <cfif IsImage(myImage)>
        <cfimage action="resize" destination="#ExpandPath(resizedImgDestination)#" height="" isbase64="false" overwrite="true" source="#myImage#" width="400" />
    </cfif>
</cfif>
<cfoutput><img src="#resizedImgDestination#" /></cfoutput> 
```

通过将高度保留为空字符串，它将按比例调整高度并缩放高度以匹配宽度。

您必须从您的站点 Web 根目录创建“/images/resized/”文件夹。

ExpandPath() 比使用静态路径定义更好。如果您必须将站点移动到不同的服务器或操作系统，它将节省大量时间。

注意：我更新了上面的代码以更好地适应问题中变量的使用。我还更改了图像的读取方式。我安装了带有 CHF 4 + 修补程序的 CF 8.01，但是在读取远程文件时，使用 cfimage 出现错误（JPG 处理中发生异常。段大小将超出文件流长度）。我的解决方案是使用 cfhttp 来读取图像。我还更新了代码以使用更好的命名变量“resizedImgDestination”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:37:55.723

调整图像大小并不是为了使文件大小更小（以字节为单位）。就是让高度和宽度变小。是的，图像文件大小通常会变小。但是这种尺寸减小取决于源图像。

您可能希望将格式声明为 png，因为这可能有助于使文件更小。

另外，为什么要在 cfxml 中包装 cfimage 标记？这是一个无用的步骤，会导致额外的处理和膨胀。

# bash - 如何使用 sed 从字符串中删除前 X 个字符？

> ID：11469989
> 
> 赞同：148
> 
> 时间：2012-07-13T11:53:36.810
> 
> 标签：bash, shell, sed

我正在一个小型工业盒子中为嵌入式 Linux 编写 shell 脚本。我有一个包含文本的变量`pid: 1234`，我想从该行中删除前 X 个字符，所以只保留 1234 个字符。我有更多需要“清理”的变量，所以我需要删除 X 第一个字符，并且`${string:5}`由于某种原因在我的系统中不起作用。

盒子里似乎只有`sed`.

我正在尝试使以下工作：

```
result=$(echo "$pid" | sed 's/^.\{4\}//g') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-07-13T12:40:44.810

以下应该有效：

```
var="pid: 1234"
var=${var:5} 
```

你确定`bash`shell正在执行你的脚本吗？

即使是符合 POSIX 的

```
var=${var#?????} 
```

将比使用外部进程更可取，尽管这需要您以固定长度模式的形式对 5 进行硬编码。

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2014-12-04T08:09:20.383

这是使用 . 剪切第一个 X 字符的简洁方法`cut(1)`。此示例通过剪切从第 5 个字符开始的子字符串来删除前 4 个字符。

```
echo "$pid" | cut -c 5- 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2012-07-13T12:00:18.540

使用`-r`选项（“在脚本中使用扩展的正则表达式”）`sed`来使用`{n}`语法：

```
$ echo 'pid: 1234'| sed -r 's/^.{5}//'
1234 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-04-20T14:06:12.400

从字符串中剪切前两个字符：

```
$ string="1234567890"; echo "${string:2}"
34567890 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-09-12T17:53:09.093

将其通过管道，`awk '{print substr($0,42)}'`其中 42 比要删除的字符数多一。例如：

```
$ echo abcde| awk '{print substr($0,2)}'
bcde
$ 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-07-13T12:04:46.407

很有可能，你也会有[`cut`](http://ss64.com/bash/cut.html)。如果是这样：

```
[me@home]$ echo "pid: 1234" | cut -d" " -f2
1234 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-04-15T16:38:57.780

好吧，这里有使用`sed`,`awk`和`cut`using`bash`语法的解决方案。我只想加入另一个符合 POSIX 标准的变体：

```
$ echo "pid: 1234" | tail -c +6
1234 
```

`-c`告诉tail从哪个字节偏移开始，从输入数据的末尾开始计数，但是如果数字以`+`符号开头，则从输入数据的开头到结尾。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-05-09T13:47:06.363

另一种方式，使用`cut`代替`sed`.

```
result=`echo $pid | cut -c 5-` 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-01T18:20:05.130

[我在这个问题](https://stackoverflow.com/a/12695029/366727)提供的纯 sed 中找到了答案（诚然，在这个问题发布之后发布）。这完全符合您的要求，仅在 sed 中：

```
result=\`echo "$pid" | sed '/./ { s/pid:\ //g; }'\`` 
```

) 中的点`sed '/./`是您想要匹配的任何内容。您的问题正是我试图解决的问题，除了在我的情况下，我想匹配文件中的特定行然后取消注释。就我而言，它是：

```
# Uncomment a line (edit the file in-place):
sed -i '/#\ COMMENTED_LINE_TO_MATCH/ { s/#\ //g; }' /path/to/target/file 
```

`-i`之后`sed`是就地编辑文件（如果要在编辑文件之前测试匹配的表达式，请删除此开关）。

（我发布这个是因为我想完全用 sed 来完成这个问题，而之前的回答都没有解决这个问题。）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-26T00:32:20.573

而不是从一开始就删除 n 个字符，也许您可​​以直接提取数字。像这样...

```
$ echo "pid: 1234" | grep -Po "\d+" 
```

这可能是一个更强大的解决方案，并且看起来更直观。

* * *

## 回答 #11

> 赞同：-7
> 
> 时间：2012-07-13T11:58:52.780

这也可以完成这项工作：

```
echo "$pid"|awk '{print $2}' 
```

# wso2 - 以编程方式获取 WSO2 ESB 端点元数据

> ID：11469991
> 
> 赞同：1
> 
> 时间：2012-07-13T11:53:59.393
> 
> 标签：wso2, wso2esb

我正在尝试以编程方式检索配置为 WSO2 ESB 的端点的元数据（例如：ServiceName、WebMethods、具有返回类型的输入/输出参数等）。有人可以指导我使用某种方式/文档来帮助我获取这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T11:14:28.200

为了进一步改进 Abdul 的问题，我们正在开发一个 Web 服务网关，在一侧的旧客户端和另一侧是外部 Web 服务之间。我们在 WSo2 中创建了一个模板/序列，我们在其中捕获遗留客户端请求并将其重定向到基于内部协议的正确 Web 服务。

外部 Web 服务在 WSo2 中注册为端点。到目前为止，我们一直在使用管理控制台手动配置这些端点。我们正在考虑使这一步自动化，以便我们的网关能够访问 WSo2 并提供 WSDL URL。然后，类中介将调用 WSo2 / Synapse API 以将此端点保存在 Synapse 配置中。我们在这方面没有成功。

我们还阅读了文档，其中说不建议通过调解器更改突触配置，因此想看看是否有其他选项可以为我们完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T20:44:29.543

一种解决方法是从客户端本身创建这些端点。这可以通过调用 carbon 框架公开的 AdminService API 来完成。在 carbon 中，任何 carbon 组件的前端都通过管理服务与其后端通信。例如，如果我们采用与端点相关的功能，当您使用管理控制台创建/删除或执行任何功能时，它会依次通过“EndPointAdmin”管理服务调用相应的后端。因此，我相信，如果您想以编程方式创建这些端点，您可以直接从您的客户端调用 EndPointAdmin 后端管理服务（通过 EndPointAdminStub - 它是与上述后端服务对应的客户端存根）并满足您的要求。

问候， 普拉巴斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:14:57.393

不幸的是，目前还不清楚你想做什么。这里有一些示例如何访问属性（元数据？）

在代理/序列访问属性中：

```
<property name="some name" expression="get-property('registry','conf:resource/path')"/>
<property name="some name" expression="get-property('registry',gov:resource/path')"/>
<property name="some name" expression="get-property('registry','resourceName')"/> 
```

或者在自定义调解器内部：

```
String property = (String)messageContext.getProperty("nameOfThePropery"); 
```

或者在自定义调解器中（从传输层获取文件名）：

```
org.apache.axis2.context.MessageContext axis2messageContext = ((Axis2MessageContext) messageContext).getAxis2MessageContext();
// print the filename of the current transport
myLog.info("FileName: " + axis2messageContext.getTransportIn().getName()); 
```

希望这可以进一步帮助您，否则可以改善您的问题。

# php - 从响应收到的 XML 格式不正确

> ID：11469993
> 
> 赞同：0
> 
> 时间：2012-07-13T11:54:00.947
> 
> 标签：php, xml, response

嗨，我目前在 linux 服务器上使用 PHP 来接收来自 Windows 服务器上托管的 WebService 的响应。

我正在使用以下 PHP 来读取响应：-

```
while (!feof($socket)) {
  $result .= fgets($socket, 4096);
}

fclose($socket);

if ($debug) echo '<pre>',$result,'</pre>'; 
```

显然，当我收到回复时，它的格式不正确，标签之间有断线，如下所示：-

/9j/4AAQSkZJRgABAQEAYABgAAD/4QBaRXhpZgAATU0AKgAAAAgABQMBAAUAAAABAAAASgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj

代替这些：-

```
 </ResponseHdr><ResGetCustAreaSnapshot><cmc:GetCustAreaSnapshot xmlns:cmc="http://tnb.com.my/CGIS/D/cmc_customermgnt"><cmc:MAP_IMAGE_ZOOM1000>/9j/4AAQSkZJRgABAQEAYABgAAD/4QBaRXhpZgAATU0AKgAAAAgABQMBAAUAAAABAAAASgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMACAYGBwYFCAcHBwkJCAoMFA0MCwsMGRITDxQdGh8eHRocHCAkLicgIiwjHBwoNyksMDE0NDQfJzk9ODI8LjM0Mv/bAEMBCQkJDAsMGA0NGDIhHCEyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMv/AABEIAp0DigMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APS9Q1G58WagNL0d9lhDIsk96OjFWBUqfQEAgjliOMKCW62ztIrCzhtYBiOJQo4GT7nHc9T71Fpemw6Vp8VpCq4UfOwGN7d2P1/+t2q5SSsTGNt9woooplBVC4ke7u/sMLssSgm5ljOCvTEYPZmBJJHIA7FlYOvLiVpo7K1bE0nMkgAJhjwfmweMkjaM98nBCkVZt7eK1hWGFdqLnuSSSckknkknJJPJJyaAKX9saLaf6N/aWnw+T+78rz0XZjjbjPGOmKP+Eg0X/oL6f/4Ep/jRof8Ax4S/9fl1/wCj5K0aAM7/AISDRf8AoL6f/wCBKf40f8JBov8A0F9P/wDAlP8AGtGigDO/4SDRf+gvp/8A4Ep/jR/wkGi/9BfT/wDwJT/GtGigDO/4SDRf+gvp/wD4Ep/jUGn3lrfeIL+W0uYbiMWtupaJw4B3zcZHfkVsVnQf8jLff9edv/6HNQBo0UUUAFFFFABRRRQAVlaR/wAhPXv+v5f/AEmgrVrK0j/kJ69/1/L/AOk0Fa0/hn6fqiJ7x9f0Zq0UUVkWFFFFAGdof/HhL/1+XX/o+StGs7Q/+PCX/r8uv/R8laNABRRRQBleIv8AkGQ/9f1n/wClMdatZXifjwrqrjh47SSVG7q6qWVh6EEAg9iAa1a1l/Cj6v8AJEL436L9QooorIsztN/4/wDWP+vxf/REVQX3hPw3qd5JeX/h/Sru6kxvmnso5HbAAGWIJOAAPwqfTf8Aj/1j/r8X/wBERVo0Ac//AMIJ4P8A+hU0P/wXQ/8AxNH/AAgng/8A6FTQ/wDwXQ//ABNdBRQBxmqeCfCceoaKqeGNFVZL1lcLYRAMPs8xwfl5GQD9QK0/+EE8H/8AQqaH/wCC6H/4mrer/wDIT0H/AK/m/wDSaetWtanww9P1ZEd5ev6I5/8A4QTwf/0Kmh/+C6H/AOJqxY+E/DemXkd5YeH9KtLqPOyaCyjjdcgg4YAEZBI/GtiisizO03/j/wBY/wCvxf8A0RFTNS8NaDrNwtxqmiabfTqgRZLq1SVguScAsCcZJOPc0/Tf+P8A1j/r8X/0RFWjQBz/APwgng//AKFTQ/8AwXQ//E0f8IJ4P/6FTQ//AAXQ/wDxNdBRQBxmoeCfCZ1fSLeHwxooYyyTSothEA0SxMpJ+XkB5IuPUg44JGn/AMIJ4P8A+hU0P/wXQ/8AxNW7j/kbdO/68br/ANGW9ata1Phh6fqyI7y9f0Rz/wDwgng//oVND/8ABdD/APE1YsfCfhvTLyO8sPD+lWl1HnZNBZRxuuQQcMACMgkfjWxRWRZnQf8AIy33/Xnb/wDoc1aNZ0H/ACMt9/152/8A6HNWjQAUUUUAFZXhf/kUtG/68YP/AEWtatZXhf8A5FLRv+vGD/0Wtar+FL1X5Mh/GvR/oatFFFZFmdB/yMt9/wBedv8A+hzVo1nQf8jLff8AXnb/APoc1aNABRRRQBU1S9/s3Sb2/wDL8z7NA82zdjdtUnGe3SjS7L+zdJsrDzPM+zQJDv243bVAzjtnFVfFH/Ipaz/14z/+i2rVrV6Ul5t/glb82R9v5f1+QUUUVkWFccdVlW0uLC2LRFbq4M85VvkVrhwAAPmJJ4G35mPypzuaO/q2tlbcGLi3l4iZHIkuOQPkwCVQllG8ZY5ARSzoTzls832WFFHlYRX+0YAAVh5fmKqMTvfBRduOMRwfLmUduGwzmueW35nPWrcvurcybrRli1vR2sY8RWurJcXKZB8oyPDH1X50fe8 
```

显然，即使从这里我也无法在不使用正确格式化它的代码块的情况下显示标签。

如果有人能指出我寻找解决此问题的正确方向，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:09:40.590

尝试`var_dump(htmlspecialchars($result))`代替`echo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:59:14.073

'你看看你的调试输出：在浏览器内还是在终端内？难道您只是通过在浏览器中将其可视化为 html 来将回复中的 xml 之类的标签（“<...>”）吞下吗？

如果不是这种情况，那么我会在较低级别检查回复的内容。使用 'tcpdump' 或 'wireshark' 转储实际内容，而不必依赖更高级别的输出。