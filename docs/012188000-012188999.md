# StackOverflow 问答 12188000-12188999

# php - 语音识别：在 PHP 中是否可行？

> ID：12188000
> 
> 赞同：6
> 
> 时间：2012-08-29T23:40:32.630
> 
> 标签：php

我正在为文盲开发一个 PHP 网站，按字母顺序教授语言。最后，我将创建一个评估阶段，学习者必须通过麦克风大声说出显示的​​字母。当学习者发音时，我想将其与保存的字母发音进行比较。

是否可以与 PHP 进行语音比较？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T18:45:05.927

对的，这是可能的。这里有一些研究和资源可以帮助您入门。好像你的工作已经为你完成了。

# 通用 API

*   [https://www.twilio.com/](https://www.twilio.com/)
*   [https://www.tropo.com/](https://www.tropo.com/)

# PHP 语音

*   [http://freecode.com/projects/phpvoice](http://freecode.com/projects/phpvoice)

> PHP Voice（以前称为 PHP VXML）包含四个有助于使用 PHP 开发语音应用程序的类。它支持语音合成标记语言 1.0、语音识别语法规范 1.0、语音浏览器呼叫控制：CCXML 1.0 和语音可扩展标记语言 (VoiceXML) 2.0。

## 语音PHP

*   [http://voicephp.com/](http://voicephp.com/)
*   [http://code.voicephp.com/](http://code.voicephp.com/)

> 简单来说，它与现在使您能够创建语音应用程序的旧 PHP 相同。
> 
> 它不是 PHP 的扩展；事实上，它现在是输出语音而不是文本并且也将输入作为语音而不是文本的相同 PHP。用技术术语来说，它是 PHP 的标准基于文本的输入和输出（程序员术语中的 stdio、stdout）被语音等效替换。

## Savana AQuA - 音频质量分析仪

*   [http://www.sevana.fi/voice_quality_testing_measurement_analysis.php](http://www.sevana.fi/voice_quality_testing_measurement_analysis.php)

> AQuA 是一个简单但功能强大的工具，可在音频质量方面提供感知语音质量测试和音频文件比较。这是比较两个音频文件并测试原始文件和降级文件之间的语音质量的最简单方法。

## Savana 音频编解码器质量分析器

*   [http://www.sevana.fi/audio_speech_codecs_quality_analysis.php](http://www.sevana.fi/audio_speech_codecs_quality_analysis.php)

> [来自维基百科](http://en.wikipedia.org/wiki/Vocoder)：声码器是一种分析/合成系统，用于重现人类语音。在编码器中，输入通过多频带滤波器，每个频带通过包络跟随器，来自包络跟随器的控制信号被传送到解码器。解码器将这些（幅度）控制信号应用于合成器中的相应滤波器。由于控制信号与原始语音波形相比变化缓慢，因此可以减少传输语音所需的带宽。这允许更多语音通道共享无线电电路或海底电缆。通过对控制信号进行编码，可以防止语音传输被截取。

## MASLE：机器辅助口语评估

*   [http://masle.org/](http://masle.org/)
*   [http://moodle.org/mod/forum/discuss.php?d=124690](http://moodle.org/mod/forum/discuss.php?d=124690)

> MASLE 项目的目标是创建一系列用于评估互联网口语的工具。该评估将由自动语音识别软件以及人工评估员执行。

## NanoGong 小程序

*   [http://gong.ust.hk/features_nano.html](http://gong.ust.hk/features_nano.html)
*   [http://nanogong.ust.hk/](http://nanogong.ust.hk/)
*   [http://moodle.org/mod/forum/discuss.php?d=128465](http://moodle.org/mod/forum/discuss.php?d=128465)

> NanoGong 是一个小程序，人们可以在网页中使用它来录制、播放和保存他们的声音。回放录音时，用户可以在不改变声音的情况下加快或减慢声音。小程序可以在网页上使用或作为 Moodle 中的集成组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T23:56:47.823

这绝对是可能的，但有很多事情需要考虑。

*   您如何在服务器上录制、上传和存储声音片段？
*   你打算用什么 VR 软件来解析声音片段？我想这里最合适的解决方案都是商业化的。你有预算吗？还是您使用的是开源软件？

这种事情将有一个非常漫长和困难的工作流程，有很多复杂的客户端和服务器端代码。我不想太直白，但如果你需要问“可能吗？”，你可能做不到。如果不咨询比我更有经验的人，我自己可能不会尝试这样的事情。你需要一个在大型客户端和服务器端系统方面至少有几年经验的人。

哦，这可能只是个人喜好，但我更喜欢使用 Java EE 服务器而不是 PHP 来做这样的事情。我更喜欢 PHP 用于更小、更简单的服务器端内容。

# php - 使用 mod_rewrite 时 PHP 全局变量不起作用

> ID：12188001
> 
> 赞同：-1
> 
> 时间：2012-08-29T23:40:39.610
> 
> 标签：php, .htaccess, mod-rewrite, global-variables

> **可能重复：**
> [php 中的全局变量未按预期工作](https://stackoverflow.com/questions/107693/global-variables-in-php-not-working-as-expected)

我有一个在网站的每个页面上运行的 php 函数，它使用全局变量，例如：

```
$var = "test";
function test() {
    global $var;
    echo $var;
} 
```

这在直接访问 /anyFile.php 时可以正常工作，但是该网站使用 htaccess 文件来重写 url，例如：

```
RewriteRule ^action/(.*)$ /index.php?action=$1 [L] 
```

当一个 url 被 htaccess 重写时，该函数不起作用，$var 没有设置。

**这可能会发生什么，我该如何解决？**（我需要使用“全局”，否则我需要重新编码很多东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:43:22.817

您需要使用`[QSA,L]`而不是`[L]`：

```
RewriteRule ^action/(.*)$ /index.php?action=$1 [QSA,L] 
```

QSA 代表[Query String Append](http://wiki.apache.org/httpd/RewriteQueryString)，并将查询字符串（`?`在 url 后面的部分）转发到 PHP 脚本。

顺便说一句，您不应该**使用**register_globals [（](http://www.php.net/manual/en/ini.core.php#ini.register-globals)自PHP 5.3 起*已弃用，自 PHP 5.4 起***已删除**），而应使用`$_GET` [superglobals](http://php.net/manual/en/language.variables.superglobals.php)。

- - 编辑 - -

按照您在下面的评论（*您不能修改 .htaccess*），您不走运。您唯一的解决方案是解析请求 URI 中的查询字符串，并像使用`$_GET`超全局一样使用它：

```
$queryString = parse_url($_SERVER['REQUEST_URI'], PHP_URL_QUERY);
parse_str($queryString, $query);
echo $query['action']; 
```

不过，我强烈建议您`.htaccess`为您修改。

# python - 带有 urlli2.urlopen 的 python StringIO 用 unittest 模拟

> ID：12188002
> 
> 赞同：0
> 
> 时间：2012-08-29T23:40:42.590
> 
> 标签：python, unit-testing, mocking

我有一个有趣的问题。我正在使用 python 模拟库模拟 urllib2.urlopen，如下所示：

```
def mock_url_open_conn_for_json_feed():
    json_str = """
        {"actions":[{"causes":[{"shortDescription":"Started by user anonymous","userId":null,"userName":"anonymous"}]}],"artifacts":[],"building":false,"description":null,"duration":54,"estimatedDuration":54,
        "fullDisplayName":"test3#1",
        "id":"2012-08-24_14-10-34","keepLog":false,"number":1,"result":"SUCCESS","timestamp":1345842634000,
        "url":"http://localhost:8080/job/test3/1/","builtOn":"","changeSet":{"items":[],"kind":null},"culprits":[]}
        """
    return StringIO(json_str)

def test_case_foo(self):
    io = mock_url_open_conn_for_json_feed()
    io.seek(0)
    mylib.urllib2.urlopen = Mock(return_value=io)
    test_obj.do_your_thing()

def test_case_foo_bar(self)
    io = mock_url_open_conn_for_json_feed()
    io.seek(0)
    mylib.urllib2.urlopen = Mock(return_value=io)
    test_obj.param = xyz
    test_obj.do_your_thing()

class ObjUnderTest():
    def do_your_thing(self):
        conn = urllib2.urlopen(url)
        simplejson.load(conn) 
```

第一个单元测试“test_case_foo”运行没有问题。但是 simplejson.load 关闭了 StringIO，因此“test_case_foo_bar”调用了 do_your_thing() 并尝试 simplejson.load 相同的 StringIO 对象（即使我返回了StringIO 的*构造*函数），它已经被关闭了。我收到以下错误：

```
json = simplejson.load(conn)
 File "/Users/sam/Library/Python/2.7/lib/python/site-packages/simplejson/__init__.py", line 391, in load
return loads(fp.read(),
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/StringIO.py", line 127, in read
_complain_ifclosed(self.closed)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/StringIO.py", line 40, in _complain_ifclosed
raise ValueError, "I/O operation on closed file"
ValueError: I/O operation on closed file 
```

我有两个问题：

1) 为什么 StringIO 构造函数没有返回一个新对象？

2）有解决办法吗？或者更好的方法来实现我想要实现的目标？

# visual-studio-2010 - 一个 CMakeLists.txt 中的多个 CMake 项目

> ID：12188004
> 
> 赞同：5
> 
> 时间：2012-08-29T23:40:46.430
> 
> 标签：visual-studio-2010, build, cmake

我希望有两个项目构建相同的源文件，第二个项目只有一个小子集，以及一些不同的定义和构建标志。

当我尝试这样的事情时：

```
SET (this_target PROJECT1)
PROJECT(${this_target})

...

ADD_EXECUTABLE(#{this_target} ...)

SET (this_target PROJECT2)
PROJECT(${this_target})

...

add_definitions (-DMYDEFINE)
TARGET_LINK_LIBRARIES( ${this_target} -myflag )

ADD_EXECUTABLE(#{this_target} ...) 
```

它最终创建了两个项目，看似正确的源文件等，但出于某种原因，至少在 Visual Studio 2010 中，这两个项目似乎都在链接器标志中定义了 MYDEFINE 和 myflag。

我不确定为什么它似乎适用于文件，但不适用于标志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T04:33:10.310

首先，您必须为您的可执行文件使用不同的名称 如果您想为您的目标添加特定的定义，您可以使用 set_target_properties，因此每个目标都有自己的属性（例如，编译定义）。

```
# compile and link first app
add_executable(prg1 ${CommonSources} ${Prg1SpecificSources})
target_link_libraries(prg1 lib1 lib2 lib3)

#set target-specific options
set_target_properties(prg1 PROPERTIES COMPILE_DEFINITIONS "FOO=BAR1")

#...

# compile and link second app
add_executable(prg2 ${CommonSources} ${Prg2SpecificSources})
target_link_libraries(prg2 lib1 lib2 lib3)
#set target-specific options
set_target_properties(prg1 PROPERTIES COMPILE_DEFINITIONS "FOO=BAR2") 
```

如果你想覆盖链接标志，你可以使用**set_target_properties**和**LINK_FLAGS**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:33:48.383

我发现将多个目标放在一个 CMakeLists.txt 中会导致 Visual Studio 2010 上的间歇性构建失败，这是由于对 generate.stamp 的访问冲突（尽管我不能排除我做错了什么）。因此，您可能必须将目标放在不同的 CMakeLists.txt 文件中，或者找到其他解决方法。

# java - `name()` 与 `getName()` 命名约定？

> ID：12188006
> 
> 赞同：8
> 
> 时间：2012-08-29T23:41:07.973
> 
> 标签：java, oop, naming-conventions

我已经看到一些项目（例如 jsoup）正在使用这个新的 getter/setter 命名约定：

```
String name()
void   name(String value) 
```

而不是旧的 getter/setter 对流：

```
String getName()
void   setName(String value) 
```

每个命名约定的积极和消极方面是什么？您何时以及为什么认为应该优先考虑其中一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T23:44:17.300

第一个示例不符合[JavaBeans 规范](http://download.oracle.com/otn-pub/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/beans.101.pdf)[警告 PDF]。像 Spring 这样的某些框架采用这种命名约定，尤其是当您在 EL 中执行某些操作时，例如`${object.name}`. 被翻译为`object.getName()`. 如果您不遵循命名约定，这将失败（尽管有一些方法可以绕过它）。

在不讨论何时/是否使用 getter/setter 的情况下，通常最好坚持命名约定，因为这样会减少意外，尤其是当您与第三方库或框架集成时按照约定命名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T23:43:10.870

除了可读性和 API 风格外，什么都没有。

一些 API 接受这种风格，而另一些则不接受，喜欢`Spring` `injections`也`JSF`无法识别这种语法（它们明确要求 get/set 用于属性）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T23:44:41.480

`name()`当我正在处理的对象是不可变的时，我喜欢简单地使用，即我永远不会更改`name`字段的值。当我处理一个可变对象时，我会使用你提到的第二个约定，仅仅是因为我认为它在可读性方面更胜一筹。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T07:33:16.090

我总是喜欢使用*动词*作为方法名称，所以这对 getter 和 setter 也有效。

我只对*变量使用**名词*。

 *遵循经典的 JavaBean 标准让我感觉更舒服。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T07:33:16.047

如果库是低级的，我更喜欢使用较短的样式，并且我想明确说明这个组件不是 JavaBean。

如果有疑问，我会使用 JavaBean 样式。*

# javascript - 如何将此脚本更改为最小高度（或固定高度）？

> ID：12188008
> 
> 赞同：0
> 
> 时间：2012-08-29T23:41:14.813
> 
> 标签：javascript, jquery, syntax, css

我已经在一个网站上为 scrollTo 插件实现了这个脚本，但我对 javascript/jquery 的理解还不够，无法编辑我需要的所有内容。这是写的，它设置了一个 100% 的高度，所以内容被切断了。我知道我需要在这里更改定义/变量，但不知道我将用什么替换它。最小高度？我可以在里面放一个固定的号码吗？如果可能的话，我想写信给 min-height css 属性。

```
function resizePanel() {

    width = $(window).width();
    height = $(window).height();

    mask_width = width * $('.item').length;

    $('#debug').html(width  + ' ' + height + ' ' + mask_width);

    $('#wrapper, .item').css({width: width, height: height});
    $('#mask').css({width: mask_width, height: height});
    $('#wrapper').scrollTo($('a.selected').attr('href'), 0);

} 
```

提前致谢。我尝试在谷歌上搜索语法问题，但我怀疑我正在寻找正确的术语，因为我想出了 zilch。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:56:50.470

您可以使用[`.css()`](http://api.jquery.com/css/#css2)这样设置`min-height`属性：

```
$('#mask').css({width: mask_width, "min-height": height}); 
```

我认为`minHeight:`也可以；jQuery 可以识别 CSS 样式和 DOM 样式的拼写。

也就是说，最好不要管 JavaScript 并使用 CSS 调整外观。也许您可以像`#mask { min-height: 100%; }`在样式表中那样放置一个 CSS 规则。

# opengl-es - 对一个着色器中的不同属性使用不同的 GL_ELEMENT_ARRAY_BUFFER？

> ID：12188011
> 
> 赞同：3
> 
> 时间：2012-08-29T23:41:50.743
> 
> 标签：opengl-es, opengl-es-2.0

在 OpenGL (OpenGL ES 2.0) 中，我可以为不同的 GL_ARRAY_BUFFER 缓冲区使用多个 GL_ELEMENT_ARRAY_BUFFER 吗？我正在阅读“OpenGL ES 2.0 编程指南”，第 6 章“顶点属性、数组和缓冲区对象”，有源示例：有几个 GL_ARRAY_BUFFER（用于位置、法线、纹理坐标）和一个 GL_ELEMENT_ARRAY_BUFFER（“用于存储元素索引”）。

当我写问题时，我知道我不能向 glDrawElements 发送一个以上的索引数组，所以如果我使用缓冲区，可能只有最后绑定的 GL_ELEMENT_ARRAY_BUFFER 用于绘图。但是节省内存呢（glDrawElements 的目的是什么）？我将说明我面临的问题。

有 2 个数组（作为 GL_ARRAY_BUFFER） - 8 个顶点和 6 个法线

```
GLfloat gVertexPositions[] =
{
    0.5f, 0.5f, 0.5f,
    0.5f, -0.5f, 0.5f,
    -0.5f, -0.5f, 0.5f,
    -0.5f, 0.5f, 0.5f,
    0.5f, 0.5f, -0.5f,
    0.5f, -0.5f, -0.5f,
    -0.5f, -0.5f, -0.5f,
    -0.5f, 0.5f, -0.5f
};

GLfloat gVertexNormals[] =
{
    1.0f, 0.0f, 0.0f,  // top
    -1.0f, 0.0f, 0.0f, // bottom
    0.0f, 1.0f, 0.0f,  // right
    0.0f, -1.0f, 0.0f, // left
    0.0f, 0.0f, 1.0f,  // back
    0.0f, 0.0f, -1.0f  // front
}; 
```

2 个索引数组（作为 GL_ELEMENT_ARRAY_BUFFERs）

```
GLubyte gVertexPositionIndices[] =
{
    0, 1, 2, // top
    2, 3, 0,
    0, 4, 1, // right
    1, 4, 5,
    5, 4, 7, // bottom
    6, 5, 7,
    2, 6, 7, // left
    2, 7, 3,
    1, 4, 2, // front
    2, 4, 5,
    0, 3, 4, // back
    7, 4, 3
};

GLubyte gVertexNormalIndices[] =
{
    0, 0, 0,
    0, 0, 0,
    2, 2, 2,
    2, 2, 2,
    1, 1, 1,
    1, 1, 1,
    3, 3, 3,
    3, 3, 3,
    5, 5, 5,
    5, 5, 5,
    4, 4, 4,
    4, 4, 4
}; 
```

我设置顶点属性状态

```
 glBindAttribLocation(program, ATTRIB_POSITION, "a_position");
    glBindAttribLocation(program, ATTRIB_NORMAL, "a_normal");

//.....

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vboIds[VBO_POSITION_INDICES]);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLubyte) * 36, gVertexPositionIndices, GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, vboIds[VBO_POSITION_DATA]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(float) * 3 * 8, gVertexPositions, GL_STATIC_DRAW); 

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vboIds[VBO_NORMAL_INDICES]);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLubyte) * 36, gVertexNormalIndices, GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, vboIds[VBO_NORMAL_DATA]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(float) * 3 * 6, gVertexNormals, GL_STATIC_DRAW);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vboIds[VBO_POSITION_INDICES]);
    glBindBuffer(GL_ARRAY_BUFFER, vboIds[VBO_POSITION_DATA]);
    glEnableVertexAttribArray(ATTRIB_POSITION);

    glBindBuffer(GL_ARRAY_BUFFER, vboIds[VBO_NORMAL_DATA]);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vboIds[VBO_NORMAL_INDICES]);
    glEnableVertexAttribArray(ATTRIB_NORMAL);

    glVertexAttribPointer(ATTRIB_POSITION, 3, GL_FLOAT, GL_FALSE, 0, 0);
    glVertexAttribPointer(ATTRIB_NORMAL, 3, GL_FLOAT, GL_FALSE, 0, 0); 
```

然后画

```
glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_BYTE, 0); 
```

并且屏幕是空的（因为最后一个 GL_ELEMENT_ARRAY_BUFFER 用于“a_position”属性，其中所有三元组都有相同的数字）

所有我想要的 - 程序制作 36 个顶点，使用 gVertexPositionIndices 从 gVertexPositions 设置它们的位置，使用 gVertexNormalIndices 从 gVertexNormals 设置它们的法线。我怀疑这是可能的，但我想确切地知道。如果这是不可能的，那么正确的方法是什么？我必须使用 8*3 浮点数作为位置，36 字节作为索引，36*3 浮点数作为法线吗？所以我只能为位置属性节省内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-14T21:21:09.193

我希望我不会太晚，但我所做的是在顶点数组中基于每个顶点设置法线，然后在声明顶点属性时使用适当的步幅和缓冲区偏移量。这是我声明顶点和法线的代码：

```
GLfloat BlockVertexData[144] = {

//Right side...  
//Vertices...            //Normals...        
 1.0f,  2.0f,  0.5f,     1.0f,  0.0f,  0.0f, //B
 1.0f,  2.0f, -0.5f,     1.0f,  0.0f,  0.0f, //F
 1.0f, -2.0f,  0.5f,     1.0f,  0.0f,  0.0f, //D
 1.0f, -2.0f, -0.5f,     1.0f,  0.0f,  0.0f, //H

//Front side...
-1.0f,  2.0f,  0.5f,     0.0f,  0.0f,  1.0f, //A
 1.0f,  2.0f,  0.5f,     0.0f,  0.0f,  1.0f, //B
-1.0f, -2.0f,  0.5f,     0.0f,  0.0f,  1.0f, //C
 1.0f, -2.0f,  0.5f,     0.0f,  0.0f,  1.0f, //D

//Left side...
-1.0f,  2.0f,  0.5f,    -1.0f,  0.0f,  0.0f, //A
-1.0f,  2.0f, -0.5f,    -1.0f,  0.0f,  0.0f, //E
-1.0f, -2.0f,  0.5f,    -1.0f,  0.0f,  0.0f, //C
-1.0f, -2.0f, -0.5f,    -1.0f,  0.0f,  0.0f, //G

//Back side...
-1.0f,  2.0f, -0.5f,     0.0f,  0.0f, -1.0f, //E
 1.0f,  2.0f, -0.5f,     0.0f,  0.0f, -1.0f, //F
-1.0f, -2.0f, -0.5f,     0.0f,  0.0f, -1.0f, //G
 1.0f, -2.0f, -0.5f,     0.0f,  0.0f, -1.0f, //H

//Top side...
-1.0f,  2.0f, -0.5f,     0.0f,  1.0f,  0.0f, //E
 1.0f,  2.0f, -0.5f,     0.0f,  1.0f,  0.0f, //F
-1.0f,  2.0f,  0.5f,     0.0f,  1.0f,  0.0f, //A
 1.0f,  2.0f,  0.5f,     0.0f,  1.0f,  0.0f, //B

//Bottom side...
-1.0f, -2.0f, -0.5f,     0.0f, -1.0f,  0.0f, //G
 1.0f, -2.0f, -0.5f,     0.0f, -1.0f,  0.0f, //H
-1.0f, -2.0f,  0.5f,     0.0f, -1.0f,  0.0f, //C
 1.0f, -2.0f,  0.5f,     0.0f, -1.0f,  0.0f  //D };

GLuint BlockIndicesData[36] = {

//Right side...
2, 0, 3,     0, 1, 3,

//Front side...
6, 4, 7,     4, 5, 7,

//Left side...
11, 10, 8,    8, 9, 11,

//Back side...
15, 14, 12,  12, 13, 15,

//Top side...
19, 18, 16,  16, 17, 19,

//Bottom side...
23, 22, 20,  20, 21, 23 }; 
```

这是声明属性的代码：

```
// The stride shows that there are 6 floats in each row.
GLsizei stride = 6 * sizeof(GLfloat);
GLuint attribute;

attribute = glGetAttribLocation(program, "VertexPosition");
glEnableVertexAttribArray(attribute);
glVertexAttribPointer(attribute, 3, GL_FLOAT, GL_FALSE, stride, 0);

attribute = glGetAttribLocation(self.program, "VertexNormal");
glEnableVertexAttribArray(attribute);
// The sixth parameter indicates the buffer offset, so here there were 3 floats preceding it, so this indicates it.
glVertexAttribPointer(attribute, 3, GL_FLOAT, GL_FALSE, stride, (GLvoid *)(sizeof(GLfloat) * 3)); 
```

我知道这可能会占用更多内存，但也许有人可以提出更好的解决方案。这是我能想到的解决你的问题。

# pointers - 汇编调用内存地址

> ID：12188012
> 
> 赞同：1
> 
> 时间：2012-08-29T23:41:52.497
> 
> 标签：pointers, assembly, call

这可能是一个非常愚蠢的问题，但是如何在 ASM 中调用内存地址？我正在使用代码调用 dword 557054（557054 是代码所在的位置......）但我认为它正在调用 557054 + 程序是否已加载到内存中。我的可执行加载器需要这个...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T23:45:34.357

有两种方法，你可以使用，`CALL`或者你可以使用`JMP`，第二种更灵活，但如果你想与 C 风格的代码有一些兼容性，你需要做更多的工作

使用简单的 c 函数调用`CALL`

```
push eax ; push args to stack
push ebx
call my_func ; my_func can be a c exported function or defined as a macro or asm function 
```

# jquery - 使用 blueimp jQuery File Upload 时是否必须在 rails 中使用 x-tmpl？

> ID：12188014
> 
> 赞同：11
> 
> 时间：2012-08-29T23:42:04.040
> 
> 标签：jquery, ruby-on-rails-3.2, blueimp, jquery-templates, multiple-file-upload

我最近添加`jQuery File Upload`到我的`rails`应用程序中，类似于以下链接下显示的内容：[https](https://github.com/blueimp/jQuery-File-Upload/wiki/Rails-setup-for-V6) ://github.com/blueimp/jQuery-File-Upload/wiki/Rails-setup-for-V6 。

到目前为止，我看到的每个 rails 实现版本都有一个`<script id="template-download" type="text/x-tmpl">`-part。这些脚本标签内部是一个用于列出现有数据的模板。

[在https://github.com/yortz/carrierwave_jquery_file_upload/blob/master/app/views/pictures/_template-download.html.erb](https://github.com/yortz/carrierwave_jquery_file_upload/blob/master/app/views/pictures/_template-download.html.erb)也有一个`<script id="template-download" type="text/x-jquery-tmpl">`版本，它与.`x-tmpl`

我的问题是：

有什么好处`x-tmpl`？

在[github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine](http://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine)上写着：

> “但是，您不需要使用这个特定的模板引擎，并且可以通过设置 uploadTemplateId、downloadTemplateId、uploadTemplate 和 downloadTemplate 选项将其替换为不同的实现”对我来说，这听起来像是可以使用普通`_partial_xy.html.erb`而不是 x-tmpl。

我弄错了吗？

如果是的话，是否至少可以在模板中使用rails helpers，比如number_to_currency，还是我必须像jquery.fileupload-ui.js中的formatFileSize那样实现它？

# eclipse - Eclipse 标记事件不会标记所有事件

> ID：12188020
> 
> 赞同：8
> 
> 时间：2012-08-29T23:42:54.273
> 
> 标签：eclipse

刚刚安装了 Eclipse Juno Release，内部版本号：20120614-1722。

我打开了“标记事件”，我可以看到它确实标记了我正在编辑的 JS 文件中的一些事件。但是，有一个没有标记的函数调用。

```
var trackView = function() {
    saveData();
},
saveData = function() {
    // do something
}; 
```

当我单击定义它的 saveData 事件（第 4 行）时，它会突出显示，但不会突出显示第 2 行调用函数的事件。当我单击第 2 行的 saveData 事件时，都没有突出显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-24T14:32:23.107

[Eclipse](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509)中的错误报告还提到了另一种解决方法：在 Outline 视图中选择一些内容，然后再次选择源中的字段。

这*通常*对我有用。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-28T13:23:44.000

如果您使用 ATL+TAB 从 Eclipse 窗口切换到另一个窗口并返回到 Eclipse 窗口，它会被高亮显示。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-28T03:38:54.493

这是 Eclipse Juno 中的一个已知错误，Eclipse 开发人员正在积极调查（在撰写本文时）。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=400661](https://bugs.eclipse.org/bugs/show_bug.cgi?id=400661)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509)

* * *

更新 6/2：此错误已在 4.2.2 版中解决

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-04T07:41:12.480

如果您取消选中以下选项，它将正常工作

偏好> java>编辑>标记术语> unablecrences：在选择更改时保持标记。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-16T07:27:54.800

这是[Eclipse 中的一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509)- 出现突出显示似乎“坚持”到您指向的第一件事。

至少让亮点停留在新项目上的两个“解决方案”（！！）：

1.  正如@Subas Raj 提到的，散焦并重新聚焦窗口 - 当您回来时，您当前的位置会突出显示。点击`Alt``Tab`两次，或使用鼠标单击/聚焦其他窗口，然后返回。
2.  正如@Leo 和@Gorky 提到的，点击`Alt``Shift``O`两次。这是切换突出显示事件的快捷方式，当您重新打开它时，您的当前位置会突出显示。

最后，第三种实际解决方案：用一个修补过的 jar 替换一个特定的 jar：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=398509#c60](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509#c60)

.. 或升级到现在已发布的 M7 (4.3)：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=398509#c62](https://bugs.eclipse.org/bugs/show_bug.cgi?id=398509#c62)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-18T06:08:35.920

“Mark Occurrences”的所有配置和设置都是正确的，但似乎这是 Eclipse JUNO 问题。我一直在观察这个问题并尝试以多种方式解决，但在 Juno 中，突出显示事件并不一致。

有时它工作得很快，有时需要时间来突出显示，有时根本没有。

还观察到，一旦我们重新启动 Eclipse，一切正常，但逐渐地，突出显示的发生变得缓慢并且也停止。

~奇拉格

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-15T13:35:34.917

我取消选中 General -- Appearance 使用混合字体和颜色作为标签，现在效果更好......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-29T23:48:31.507

转到`Window`-> `Preferences`-> `General`-> `Editors`-> `Text Editors`->`Annotations`

在两个`Occurrences`&下`Write Occurrences`，确保您`Text as Highlighted`选择了该选项。

此外，在`General`-> `JavaScript`-> `Editor`->下`Mark Occurrences`确保选中所有复选框。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-09T12:04:55.863

目前只有解决方法（按“Alt + Shift + O”两次）：

[无法突出显示 Eclipse 中所有出现的选定单词](https://stackoverflow.com/questions/10310597/cannot-highlight-all-occurrences-of-a-selected-word-in-eclipse)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-08T09:16:57.410

和我遇到的一样，你可以尝试点击“Toggle Mark Occurrences”两次（关闭再打开），也可以尝试使用++`Alt`两次。并且也可以试试@Subas Raj 的解决方案，不错。`Shift``O`

# c# - 是否可以在脚本语言中流水线化 .NET 方法

> ID：12188021
> 
> 赞同：0
> 
> 时间：2012-08-29T23:42:59.420
> 
> 标签：c#, .net, pipeline

我想知道是否有任何语言功能/库/工具/技术可以用来在脚本环境中的管道中调用 .NET/C#“函数”？例如，我有

```
public interface IFoo
{
    ...
}

public interface IBar
{
    IFoo Load(string fileName);
    IFoo Replace(string oldValue, string newValue);
    void Save(string fileName);
} 
```

然后用适当的 Main() 将它们包装在 util.exe 中。现在我想像管道 DOS 命令一样使用它们：

```
util.exe -load in.txt | util.exe -replace x y | util.exe -save output.txt 
```

是否可以？是否有任何限制，`IFoo`因为它可能是复杂的数据结构，无法轻松序列化为 ASCII 字符串。到达那里的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:08:18.147

PowerShell 是非常好的选择。

首先，您可以直接调用任何已编译的代码，因此如果您不想在 C# 中创建实际的 cmdlet，您可以在 PowerShell 中编写调用代码并使用其所有管道管道在步骤之间传递数据。

即调用 Ping.Send：

```
$ping = New-Object System.Net.NetworkInformation.Ping
$ping.send("localhost") 
```

您还可以实现 CmdLets 以获得漂亮的 PowerShell 代码和更好的控制 - 示例[http://www.codeproject.com/Articles/32999/How-to-Write-a-Custom-PowerShell-Cmdlet-Part-I](http://www.codeproject.com/Articles/32999/How-to-Write-a-Custom-PowerShell-Cmdlet-Part-I)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T23:49:03.300

一个不错的选择是 C# 脚本

[http://www.csscript.net/](http://www.csscript.net/)

这允许您从脚本环境调用任何 .NET 程序集，其中脚本环境的语言是 C#。

> CS-Script 是一个基于 CLR（公共语言运行时）的脚本系统，它使用符合 ECMA 标准的 C# 作为编程语言。CS-Script 目前针对 Microsoft 实现的 CLR (.NET 2.0/3.0/3.5/4.0)，完全支持 Mono。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-07T19:37:34.857

您也可以为此使用 F#。您可以使用[管道和函数组合](https://docs.microsoft.com/en-us/dotnet/fsharp/language-reference/functions/#function-composition-and-pipelining)进行顺序数据处理，它是一种 .NET 语言，因此您可以直接引用 C# 和 VB 对象。您可以在[脚本](https://docs.microsoft.com/en-us/dotnet/fsharp/tools/fsharp-interactive/#scripting-with-f)和 REPL 提示符中使用它，并且解释器默认包含在 .NET SDK 中。

# javascript - 如何为一个搜索框实现两个高级自动完成？

> ID：12188023
> 
> 赞同：0
> 
> 时间：2012-08-29T23:43:11.147
> 
> 标签：javascript, jquery, html

我需要有关如何实现此功能的帮助和提示。我有一个搜索框。正确的搜索查询可能是：巴黎的汽车。{location} 中的 {category}。

1.  当用户开始键入第一个字符时，将出现类别的搜索提示。
2.  用户从提示选项中选择“汽车零件”。
3.  选择选项后，“[space-key]in[space-key]”会自动添加到搜索框中。
4.  将出现针对这些位置的新搜索提示。用户选择巴黎。
5.  选择位置后进行搜索。

关于如何实现这一点的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:22:44.190

这是我的建议：

1.  使用 jquery UI 进行自动建议（非常容易实现，易于定制以适应您的特定情况）[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)。我的建议是让 jQuery 检查用户是否正在输入类别或位置（通过查看输入是否为空）并基于此运行不同的自动完成调用。

2.  jQuery UI 有一个名为“选择”的事件。使用它将所选项目 + 添加到文本字段中。

3.  现在，当用户输入其他内容时，让 jQuery 识别是时候输入位置，并调用 jQuery UI 自动完成功能来建议位置。

# linux - 声明的 system() 中的 $PATH 在哪里

> ID：12188024
> 
> 赞同：4
> 
> 时间：2012-08-29T23:43:12.557
> 
> 标签：linux, perl, path, sh

我的电脑上发生了一些奇怪的事情。我在 /usr/local/bin 下安装了 gperf。与[我在这里问](https://stackoverflow.com/questions/12185219/how-to-remove-one-version-of-gperf)的问题有关，我的计算机上运行了一个 perl 脚本，其中包含 gperf 上的 system() 行，其标志看起来像

perl 文件：

```
system("gperf ...") == 0 || die "calling gperf failed: $?"; 
```

但是，无论我多么努力，gperf 都不会运行并输出失败的消息

调试我尝试了类似的东西

`system("echo \$PATH") == 0 || die "calling gperf failed: $?";`

发现它不包含`/usr/local/bin/`我安装 gperf 的`usr/bin`位置，而只查看未安装的位置

所以这`$PATH`是错误的......所以我四处搜索并看到`system()`与在文件中调用 /bin/sh 相同，所以我尝试`/bin/sh`并 `echo $PATH`发现它包含`/usr/local/bin/`我不相信的内容。所以我的问题是 system() 的 $PATH 声明在哪里？为什么它与 Bourne shell 中的不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T23:51:58.787

`PATH`via 启动的命令使用的命令与`system`perl 脚本中的命令相同，可通过`$ENV{PATH}`. 这是`PATH`perl 脚本从调用它的程序继承的，除非您在脚本中更改它。

咬你的可能是你`PATH`在错误的配置文件中设置了你的。在 . 或其他系统范围的文件中定义它`~/.profile`，`/etc/profile`而不是在 shell 配置文件中，例如`.bashrc`. 有关一些一般信息，请参阅[此问题](https://unix.stackexchange.com/questions/3052/alternative-to-bashrc)。

如果要在 perl 脚本中手动设置路径，可以使用类似

```
$ENV{PATH} = "/usr/local/bin:$ENV{PATH}" unless ":$ENV{PATH}:" =~ m~:/usr/local/bin:~; 
```

但这可能是个坏主意：在大多数情况下，您的脚本不应修改运行该脚本的用户选择的路径。

如果您`PATH`在阅读了我链接到的问题以及我的答案中链接的问题后无法在系统上找到正确的设置位置，请在[Unix 和 Linux](https://unix.stackexchange.com/)上提问，并确保说明您的操作系统的详细信息（发行版、版本等）以及您如何登录（这是用户问题，而不是编程问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T23:47:51.567

在使用 BASH 作为 shell 的 linux 系统上，PATH 是在登录时从用户主目录中的 .bash_profile 文件设置的。您可以在 /usr/local/bin 目录的末尾添加如下一行：

```
 PATH=$PATH:/usr/local/bin 
```

修复它的另一种（可能更可靠）方法是在系统调用中使用绝对路径，如下所示：

```
 system("/usr/local/bin/gperf") 
```

# mysql - MySQL SELECT DISTINCT 多列

> ID：12188027
> 
> 赞同：90
> 
> 时间：2012-08-29T23:43:26.940
> 
> 标签：mysql, sql, distinct

假设我`a, b c, d`在 MySQL 数据库的表中有列。我想要做的是在我的表中选择所有这 4 列的不同值（只有不同​​的值）。我尝试过类似的东西：

```
SELECT DISTINCT a,b,c,d FROM my_table;
SELECT DISTINCT a,b,c,d FROM my_table GROUP BY a,b,c,d; 
```

这些都没有奏效。有人可以在这里帮忙吗？

谢谢

**注意**我想要单独的列的不同值`a, b, c d`。不是价值的独特组合

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2015-10-20T13:06:27.027

我知道这个问题太老了，无论如何：

```
SELECT a, b
FROM mytable
GROUP BY a, b; 
```

这将为您提供所有组合。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-08-29T23:56:27.417

这有帮助吗？

```
select 
(SELECT group_concat(DISTINCT a) FROM my_table) as a,
(SELECT group_concat(DISTINCT b) FROM my_table) as b,
(SELECT group_concat(DISTINCT c) FROM my_table) as c,
(SELECT group_concat(DISTINCT d) FROM my_table) as d 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-08-29T23:55:07.133

猜测你想要的结果，所以也许这就是你想要的查询

```
SELECT DISTINCT a FROM my_table
UNION 
SELECT DISTINCT b FROM my_table
UNION
SELECT DISTINCT c FROM my_table
UNION
SELECT DISTINCT d FROM my_table 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-09-30T08:29:11.463

另一种简单的方法是使用`concat()`

```
SELECT DISTINCT(CONCAT(a,b)) AS cc FROM my_table GROUP BY (cc); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-08-29T23:50:40.247

您的两个查询都是正确的，应该给您正确的答案。

我建议使用以下查询来解决您的问题。

```
SELECT DISTINCT a,b,c,d,count(*) Count FROM my_table GROUP BY a,b,c,d
order by count(*) desc 
```

即添加 count(*) 字段。这将使您了解使用 group 命令消除了多少行。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-03-04T22:33:26.140

这将为所有列提供 DISTINCT 值：

```
SELECT DISTINCT value
FROM (
    SELECT DISTINCT a AS value FROM my_table
    UNION SELECT DISTINCT b AS value FROM my_table
    UNION SELECT DISTINCT c AS value FROM my_table
) AS derived 
```

# sql - SQL 可搜索缓存 - 高可扩展性

> ID：12188028
> 
> 赞同：0
> 
> 时间：2012-08-29T23:43:54.693
> 
> 标签：sql, django, postgresql, caching, optimization

我开发了一个提供非常通用的数据存储的网站。目前它工作得很好，但我正在考虑优化速度。

INSERT/SELECT 比率很难预测并且会因不同情况而变化，但通常 SELECT 更频繁。INSERT 足够快。SELECT 让我担心。有很多 LEFT JOIN。例如，每个对象可以有一个图像，该图像存储在单独的表中（因为它可以跨越多个对象）并且还存储有关图像的附加信息。

每次选择最多进行 8 次连接，处理过程最多可能需要 1 秒 - 平均值约为 0.3 秒。每个请求可以有多个这样的选择。它已经在 SQL 端进行了多次优化，在那里可以做的事情并不多。

除了为 DB 购买更强大的机器之外，还能做什么（如果有的话）？

Django在这里也不是速度恶魔，但我们仍然有一些优化。如果必须，切换到 PyPy。在 DB 方面，我有一些想法，但它们似乎并不常见 - 找不到任何真实的案例场景。

*   为这部分使用不同的存储速度更快。我们需要事务，我们需要一致性检查，所以它可能不是可取的。
*   可搜索缓存？这里有意义吗？例如，维护在 NoSQL 或其他东西中组合的所有表的平面副本。插入会更昂贵——如果一些常见的表发生变化，它需要更新 NoSQL 中的多条记录。也很难维护。

有什么有意义的，或者它只是最快的，可以获得更多的RAM，增加rdbms中的缓存大小，获得SSD并离开它。专注于优化其他部分，例如池化数据库连接，因为它们也很昂贵。

使用的技术：PostgreSQL 9.1 和 Django (python)。

总结一下。问题是：在优化了所有 SQL 部分 - 索引、集群等之后。当静态超时缓存结果不是一个选项（不同的请求参数，不同的结果）时，可以做些什么来进一步优化。

---**编辑**2012 年 8 月 30 日---

我们已经在每天使用检查慢查询。这是我们的瓶颈。我们只对索引进行排序和过滤。另外，很抱歉不清楚这一点 - 我们不会将实际图像存储在数据库中。只是文件路径。

JOIN 和 ORDER BY 正在扼杀我们的表现。例如，一个输出 20 000 个结果的复杂查询需要 1800 毫秒（使用了 EXPLAIN ANALYZE）。这假设我们没有使用任何基于 JOINed 表的过滤。

如果我们跳过所有的 JOINS，我们将减少到 110 毫秒。这太疯狂了……这就是为什么我们正在考虑某种可搜索的缓存或平面副本 NoSQL。

没有订购，我们得到了 60 毫秒，这很棒，但是 PostgreSQL 中的 JOIN 性能如何？是否有一些不同的数据库可以为我们做得更好？最好是免费的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T00:42:39.473

首先，虽然我认为在数据库中存储图像文件的时间和地点都存在，但通常情况下，您将拥有与此类操作相关的额外 I/O 和内存。如果我正在考虑对此进行优化，我会将每个图像都放在一个路径中，并能够将它们批量保存到 fs. 这样它们仍然在您的数据库中用于备份目的，但您可以将相对路径拉出并生成链接，从而为您节省大量 sql 查询并减少开销。通过基于 Web 的后端，您将无法让事务在生成 HTML 和检索图像之间运行得非常好，因为这些事务来自不同的 HTTP 请求。

至于速度，我不知道您是在查看总 http 请求时间还是数据库时间。但是您需要做的第一件事是将所有内容分开并寻找大部分时间都花在了哪里。这可能会让你大吃一惊。接下来是获取那些慢查询的查询计划：

[http://heatware.net/databases/how-to-find-log-slow-queries-postgresql/](http://heatware.net/databases/how-to-find-log-slow-queries-postgresql/)

然后从那里开始使用解释分析来找出问题所在。

此外，在决定升级硬件时，您需要清楚了解当前面临的限制。更多的内存通常会有所帮助（如果您的数据库可以舒适地放入内存中，这将很有帮助），但除此之外，将更快的存储放入受 CPU 限制的服务器或切换到 I/O 限制中具有更快 CPU 的服务器是没有意义的服务器。上面是你的朋友。同样，根据并发问题，为您的 select 语句使用热备用可能（或可能不会！）有意义。

但是如果没有更多信息，我无法告诉您进一步优化数据库的最佳方法是什么。PostgreSQL 能够在合适的条件下运行得非常快，并且可以很好地扩展。

# c# - 如何使用 SignalR 集线器将消息从服 务器发送到客户端

> ID：12188029
> 
> 赞同：22
> 
> 时间：2012-08-29T23:43:54.120
> 
> 标签：c#, signalr, signalr-hub

我刚刚开始探索 signalR，我希望能够将消息从服​​务器发送到所有客户端。

这是我的集线器

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using SignalR;
using SignalR.Hubs;
using SignalR.Hosting.Common;
using SignalR.Hosting.AspNet;
using System.Threading.Tasks;

namespace MvcApplication1
{
    public class Chat : Hub
    {
        public void Send(String message)
        {
            // Call the addMessage methods on all clients
            Clients.addMessage(message);
        }
    }
} 
```

这是我的客户页面

```
 <script type="text/javascript">

         $(function () {

             //Proxy created on the fly
             var chat = $.connection.chat;

             // Declare a function on the chat hub so the server can invoke it
             chat.addMessage = function (message) {
                 $("#messages").append("<li>" + message + "</li>");
             };

             $("#broadcast").click(function () {
                 // call the chat method on the server
                 chat.send($("#msg").val());
             });

             $.connection.hub.start();
         });
    </script>

}

<input type="text" id="msg" />
        <input type="button" id="broadcast" value="broadcast" />

        <ul id="messages" class="round">

        </ul> 
```

这一切都很完美，我可以在 2 个不同的浏览器之间“聊天”。

我要做的下一件事是从服务器向所有客户端发起一条消息。

所以我尝试了这个。

```
 using SignalR;
using System.Web.Http;
using System.Web.Mvc;
using System.Web.Optimization;
using System.Web.Routing;
using System;
using System.Web.Routing;
using SignalR;
using SignalR.Hubs;

namespace MvcApplication1
{
    // Note: For instructions on enabling IIS6 or IIS7 classic mode, 
    // visit http://go.microsoft.com/?LinkId=9394801

    public class MvcApplication : System.Web.HttpApplication
    {
        protected void Application_Start()
        {            
            var aTimer = new System.Timers.Timer(1000);

            aTimer.Elapsed += aTimer_Elapsed;
            aTimer.Interval = 3000;
            aTimer.Enabled = true;

            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();
        }

        void aTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            var context = GlobalHost.ConnectionManager.GetHubContext<Chat>();
            context.Clients.Send("Hello");      
        }
    }
} 
```

这似乎不起作用。计时器工作，“aTimer_Elapsed”事件处理程序每​​ 3 秒运行一次，但聊天中心上的“发送”方法从不运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-30T04:24:18.423

我认为应该是

```
 void aTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<Chat>();
        context.Clients.All.addMessage("Hello");      
    } 
```

反而。使用 Send 您正在调用客户端用来调用服务器的方法...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2021-06-07T23:14:07.023

如果您在被问到这个问题多年后遇到这个问题，并且您碰巧使用 .NET 5.0（或类似版本），那么以下内容可能会很有用，因为您可能正在使用不再提供该类的框架`GlobalHost`。

.NET 5.0（和类似的）大量使用依赖注入（DI），在这里也使用它也就不足为奇了。以下示例代码显示了如何执行此操作。它不使用类`GlobalHost`。

给定`ChatHub`类如下：

```
 public class ChatHub : Hub
   {
      public async Task SendMessage(string user, string message)
      {
         await Clients.All.SendAsync("ReceiveMessage", user, message).ConfigureAwait(false);
      }
   } 
```

在类中`Startup`添加一行，如以下代码片段所示：

```
 public class Startup
   {
      // other code omitted for brevity

      public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
      {
         // other code omitted for brevity

         app.UseEndpoints(endpoints =>
         {
            endpoints.MapControllers();
            endpoints.MapHub<ChatHub>("/chatHub"); // <====== add this ======
         });

         // other code omitted for brevity
      }
   } 
```

然后在要向 SignalR 消息发送消息的控制器中，将 ChatHub 添加为依赖项。以下示例演示了如何为构造函数注入执行此操作：

```
 public class WeatherForecastController : ControllerBase
   {
      private readonly IHubContext<ChatHub> _hubContext;

      public WeatherForecastController(
         IHubContext<ChatHub> hubContext, // <============ add this ==========
         ILogger<WeatherForecastController> logger)
      {
         _hubContext = hubContext;
         _logger = logger;
      }

      [HttpGet]
      public virtual async Task<IEnumerable<WeatherForecastModel>> Get()
      {
         var rng = new Random();
         WeatherForecastModel[] weatherForecastModels = Enumerable.Range(1, 5).Select(index => new WeatherForecastModel
         {
            Date = DateTime.Now.AddDays(index),
            TemperatureC = rng.Next(-20, 55),
            Summary = Summaries[rng.Next(Summaries.Length)],
         }).ToArray();

         // Notify connected SignalR clients with some data:
         await _hubContext.Clients.All.SendAsync("ReceiveMessage", "the weatherman", $" The temperature will be {weatherForecastModels[0].TemperatureC}").ConfigureAwait(false);

         return weatherForecastModels;
      }

      // other code omitted for brevity
   } 
```

这个例子还展示了如何在`Get()`方法中使用`await _hubContext.Clients.All.SendAsync( ... )`

有关详细信息，请参阅 Microsoft[文档](https://docs.microsoft.com/en-us/aspnet/core/signalr/hubcontext?view=aspnetcore-5.0)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-28T09:44:06.723

是的，您必须将该行设置为：

```
void aTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<Chat>();
        context.Clients.All.addMessage("Hello");      
    } 
```

然而，这只是一半，仍然行不通。

在您的 Js 中，您需要编写：

```
$(function () {

//Proxy created on the fly
var chat = $.connection.chat;

// Declare a function on the chat hub so the server can invoke it
chat.client.addMessage = function (message) {
    $("#messages").append("<li>" + message + "</li>");
};

$("#broadcast").click(function () {
    // call the chat method on the server
    chat.client.addMessage($("#msg").val());
});

$.connection.hub.start();
}); 
```

我添加了`chat.client`这将添加服务器将调用的客户端集线器方法。

# matlab - 将元胞数组中的元胞转换为元胞数组 - matlab

> ID：12188037
> 
> 赞同：2
> 
> 时间：2012-08-29T23:45:01.510
> 
> 标签：matlab, cell-array

*不要与数组中的行号混淆。我只是要求将 1 转换为样式 2*

这是元胞数组 C

![单元阵列 1](../Images/4951e1e099016a8955a8a5c07f66b24b.png)

我想将其转换为以下版本，我该怎么做？

V2 =

![元胞数组 1 转换为 v2](../Images/c6ce6e42094796fea10013d9e8e5574d.png) ![在此处输入图像描述](../Images/cb0ca404b09d9972648409ab712db050.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:59:57.520

如果我理解正确，您有一个扁平的字符串元胞数组（其中包含有效的 MATLAB 元胞数组定义），并且您希望将每个字符串转换为它自己的子元胞数组。所以你需要的是：

```
cellfun(@eval, C, 'UniformOutput', false) 
```

`C`字符串的原始元胞数组在哪里。

**例子：**

```
C = {'{''samsung'', ''n150'', ''jp0xtr'', ''n570''};'; ...
    '{''samsung'', ''n150'', ''jp0xtr'', ''beyaz''};'}
C2 = cellfun(@eval, C, 'UniformOutput', false) 
```

结果是：

```
C = 

    '{'samsung', 'n150', 'jp0xtr', 'n570'};'
    '{'samsung', 'n150', 'jp0xtr', 'beyaz'};'

C2 = 

    {1x4 cell}
    {1x4 cell} 
```

# javascript - jQuery 花式切换不起作用

> ID：12188040
> 
> 赞同：0
> 
> 时间：2012-08-29T23:45:26.703
> 
> 标签：javascript, jquery, html, css, toggle

我有一组链接，我试图隐藏在一个切换中，但我下面的代码没有这样做。请问我做错了什么。谢谢你。

```
 <script>
                $("#navigation li a[id]").click(function()) {
                     $("#" + this.id.substr(1)).slideToggle(600).siblings('.toggleDiv').slideUp(600);
                });
        </script>

         <div id="search" class="toggleDiv" style="display:none">List</div>  
                <div id="sidebar">
                        <ul>
                            <li><a href="bios.php?id=1">President</a></li>
                            <li><a href="bios.php?id=2">Vice</a></li>
                            <li><a href="bios.php?id=3">Secretary</a></li>
                        </ul>      
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:49:17.777

jQuery 中的括号用于属性。

`a[id]`将不起作用，因为这些`a`标签没有`id`属性。你也没有`#navigation`div。

尝试`$("#sidebar ul li a")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T23:47:32.873

你错过了一个`)`.

```
$("#" + this.id.substr(1))
                 //  ----^ 
```

但是，您的选择器不会选择锚元素，因为它们没有 ID 属性并且 `this.id`是`undefined`. 看来您想获取`href`属性的 id 参数。

```
$("#sidebar li a").click(function()) {
    $("#"+this.href.slice(-1)).slideToggle(600).siblings('.toggleDiv').slideUp(600);
}); 
```

# php - Aptana Studio 3 - 通用服务器不支持启动

> ID：12188045
> 
> 赞同：0
> 
> 时间：2012-08-29T23:46:03.460
> 
> 标签：php

我今天刚刚将 Aptana 更新为 Aptana Studio 3，内部版本：3.2.1.201207261642。当我尝试运行任何项目时，会弹出一个错误窗口并显示以下消息：

“启动 Google Chrome - 内部服务器”遇到问题。通用服务器不支持启动。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:16:33.983

我忘了发布我已经找到问题的答案。

我必须去运行->运行配置...->服务器->使用基本 URL：在这里，我输入了“http://localhost/”。

在更新之前，我使用了 - 使用选定的服务器，我在其中配置了导致错误的 Wamp 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:41:32.833

在某些情况下，此问题未解决 - 另请参见此处：[https ://jira.appcelerator.org/browse/APSTUD-7571](https://jira.appcelerator.org/browse/APSTUD-7571)

好像 Aptana 没有得到正确的 URL（第 3 步）： 1\. 项目属性 -> 预览设置 2\. 使用特定服务器 -> 新建 3\. 简单 Web 服务器 -> [填写] 名称、URL、文档根目录

我正在使用 XAMPP，并且我的 index.php 通过手动使用我的浏览器确实可以很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T20:14:28.823

我刚才已经解决了这个问题。

单击下面的链接，找到标题告诉“使用您的服务器进行预览”，然后按照命令进行操作。

[aptana studio 3 外部服务器](http://www.htmlgoodies.com/html5/tutorials/aptana-studio-3-guided-tour-and-tutorial-create-a-web-project-using-the-html-5-boilerplate-framework.html#fbid=M5uN_ag1R-S)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T16:10:19.030

1.  运行配置...
2.  对于单个浏览器 exe 文件，
3.  选择使用选定的 Web 服务器并将 apche 配置为简单的 Web 服务器，选择正确的 doc root，我称之为我的 apache，因为这是我安装的
4.  然后选择“使用基本网址”选项。对我来说只是“http://localhost”
5.  现在，我选择了“使用基本 url”，但 apache 在“使用选定的服务器”区域，但它是灰色的。
6.  所有关于此的答案都让我发疯了。它只是行不通。但这确实有效。在我这样做之前，它会尝试从“本地”路径 c:\program.... blah blah blah 查看浏览器中的 php 文件。这不适用于网络服务器。我可以手动浏览它，但这违背了目的。！
7.  我必须为要用于预览的每个浏览器执行此操作。这就是全部。
8.  祝你好运。这方面的所有其他帖子都很糟糕。

[这是我的样子。](http://i.stack.imgur.com/GJBsP.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T15:09:52.003

我有 Aptana Studio 3，构建：3.2.2.201208201020 我有 XAMPP 我的 DocumentRoot：C:/xampp/htdocs

为了解决这个问题，通用服务器不支持启动：

1.  在项目中单击右键->属性
2.  点击预览设置
3.  选择新的
4.  ！！重要！选择：外部 Web 服务器
5.  名称：服务器的名称。任何事物
6.  基本 URL：不使用 localhost 使用 la ip del localhost y el puerto 127.0.0.1:80
7.  文档根目录：C:/xampp/htdocs

尝试任何资源管理器；如果问题仍然存在，则再次编辑配置并使用 bowswer 设置 documentRoot。一切就绪

# tree - AVL 二叉树 - 平衡测试

> ID：12188046
> 
> 赞同：1
> 
> 时间：2012-08-29T23:46:11.773
> 
> 标签：tree, prolog, avl-tree, balance, tree-balancing

如果树是 AVL 树或不使用 prolog，我正在尝试实现测试。

我做了一个高度测试，适用于我迄今为止所做的测试，但我的平衡测试仍然不强。

这是我到目前为止的工作：

```
avl('Branch'(LeftBranch,RightBranch)) :-
  height(LeftBranch,H1),
  height(RightBranch,H2),
  abs(H1-H2) =< 1. 
```

我基于旧的 stackoverflow 代码中的代码。但它并不适用于所有情况。将包括我的身高代码。在某个地方我犯了一个错误，我确定在哪里可以找到它。

```
height(leaf(_),1).
height('Branch'(LeftBranch,RightBranch,H) :-
  height(LeftBranch,H1),
  height(RightBranch,H2),
  H is max(H1,H2)+1. 
```

为什么我的代码不评估某些树？

[Prolog - 平衡树与否](https://stackoverflow.com/questions/7307435/prolog-balanced-tree-or-not)

这是我基于平衡树测试的线程，我确实尝试过他在评论中发布的树，但我失败了，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:16:35.850

代码看起来还不错，也许缩进数据并使用与注释中相同的函子可以提供帮助：

```
t :- avl(b(l(1),
           b(l(2),
             b(l(3),
               b(l(4),
                 l(5)
                )
              )
            )
          ),
         b(l(6),
            b(l(7),
              b(l(8),
                b(l(9),
                  l(10)
                 )
             )
          )
        )
    ).

avl(LeftBranch,RightBranch) :-
  height(LeftBranch,H1),
  height(RightBranch,H2),
  abs(H1-H2) =< 1.

height(l(_),1).
height(b(LeftBranch,RightBranch),H) :-
  height(LeftBranch,H1),
  height(RightBranch,H2),
  H is max(H1,H2)+1. 
```

手动格式化很麻烦。如果您使用 SWI-Prolog，IDE 将为您完成，只需在每个逗号后放置一个换行符。

测试：

```
?- t.
true. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T07:20:48.707

AVL 树的每个分支首先应该是 AVL 树本身。只有当这是真的，你才应该比较高度。

chac 答案中的树显然是不平衡的，但您的代码认为它可以。它不是。

然后，错别字。如果您使用短名称，则不太可能发生。

```
avl_height(b(L,R),H) :-
  avl_height(L,h(H1)), 
  avl_height(R,h(H2)), 
  abs(H1-H2) =< 1, !,
  H3 is 1 + max(H1,H2), H=h(H3).

avl_height(b(_,_),not).

avl_height(l(_),h(1)). 
```

# ios - 如何绘制语音样本的语调？

> ID：12188049
> 
> 赞同：2
> 
> 时间：2012-08-29T23:46:36.983
> 
> 标签：ios, audio-recording, voice-recognition, graphing, voice-recording

我想制作一个 iOS 应用程序，允许我绘制用户读入的音频样本的语调（他们声音的音高的上升和下降）。语调在世界各地的各种语言中都非常重要，这将是一种练习语调和发音的尝试。

我对语音/音频技术的世界不是很精通，那我需要什么？是否有随 Cocoa-touch 一起安装的库，让我能够从语音样本中访问我需要的数据？我到底要捕捉什么？

如果有人对我需要利用的技术有所了解，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:15:03.247

您正在寻找的是所谓的共振峰分析。

共振峰本质上是发出声音的频谱峰值。它们按频率顺序列出，如 f1、f2 等。在我看来，您要绘制的是 f1。

共振峰分析是语音识别的核心，通常 f1 和 f2 足以区分元音。我建议您搜索共振峰分析算法并从那里获取。

祝你好运 ：）

# java - 这个类似 RFC 的时间戳的 SimpleDateFormat？

> ID：12188051
> 
> 赞同：0
> 
> 时间：2012-08-29T23:46:40.417
> 
> 标签：java, scala, simpledateformat

尝试解析以下时间戳：

`2008-09-19T19:05:30.000Z`

但是我得到了一个 parseException。有人知道可以解决这个问题的类或 SimpleDateFormat 吗？

我现在在 Scala 中使用的东西（Java 答案也可以）：

`new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.Z")`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T00:53:01.483

和单引号 ( `'`) 围绕`Z`. 这指示解析器将`Z`其视为常量字符（就像`T`）。还要添加`SSS`毫秒。因此，您的模式将是`yyyy-MM-dd'T'HH:mm:ss.SSS'Z'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T23:53:06.790

来自 Google 客户端库的这段代码起到了作用：

[http://javadoc.google-api-java-client.googlecode.com/hg/1.0.10-alpha/com/google/api/client/util/DateTime.html](http://javadoc.google-api-java-client.googlecode.com/hg/1.0.10-alpha/com/google/api/client/util/DateTime.html)

使用 parseRFC3339 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T23:53:21.507

删除`Z`：

```
> sdf = new java.text.SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")
> println sdf.parse("2008-09-19T19:05:30.000Z")
Fri Sep 19 19:05:30 EDT 2008 
```

# plone - 对集合中的项目进行分页

> ID：12188053
> 
> 赞同：1
> 
> 时间：2012-08-29T23:46:57.577
> 
> 标签：plone

我正在使用 Plone 4.2 引入的新集合实现。问题是页面没有分页。在编辑表单中有一个字段可以放置要显示的一些项目，但它被忽略了。

在构建中，我正在使用这个：

[http://dist.plone.org/release/4.2/versions.cfg](http://dist.plone.org/release/4.2/versions.cfg)

我记得分页在旧集合中有效。如何使用新的分页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T10:28:33.257

看来你发现了一个错误，我可以确认“限制搜索结果”被忽略了，你介意报告吗？

您可以通过在类型控制面板中启用它们来使用 P42 中的旧样式集合，但它们已被弃用，也不支持将旧样式移植到新样式，afaik。

# html - CSS 定位/调整大小的困难

> ID：12188059
> 
> 赞同：0
> 
> 时间：2012-08-29T23:48:06.157
> 
> 标签：html, css, media-queries

这对某些人来说是一个简单的问题，所以请原谅我提出这样一个基本问题。我在定位我的 div 层时遇到问题`#section-1`，基本上我希望`<div>` 当我增加屏幕尺寸时，我希望其中的内容保持在原位。[点击这里](http://iamnatesmithen.com/bodyworks/index.php)

我在实现这一目标方面失败了。我设置`#section-1`了以下属性：

```
 #section-1{
    position: relative;
    width: 100%;
} 
```

我还设置`#wrapper`了以下内容：

```
#wrapper{
    max-width: 1600px;
    min-width: 320px;
    width: 100%;
    margin: 0 auto;
    position: relative;
} 
```

我尝试指定 #section-1 的最大宽度并应用 margin: 0 auto; 但是，当增加屏幕尺寸时，section-1 中的内容仍然会移动。

有没有人有解决这个问题的办法...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:32:11.390

对于每边 100 像素宽的边距：

```
#section-1{
    position: relative;
    margin: 0 100px;
} 
```

请注意，无论是否使用包装器，这都适用 - 包装器中的许多 CSS 似乎是不必要的。

# pentaho - Pentaho 数据集成 (Kettle) 中的备用编辑器 (emacs/vim)

> ID：12188060
> 
> 赞同：1
> 
> 时间：2012-08-29T23:48:08.713
> 
> 标签：pentaho, kettle

我是水壶（Pentaho 数据集成）的新手，正在尝试开发一些自定义 Java/JavaScript 代码。

是否可以编辑 emacs/aquamacs/vim/anything-else 中的文本块和/或将脚本保存在可以直接在其他文件中编辑的单独文件中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-20T16:19:21.527

是的。我一直这样做。

我只是在我的文本编辑器中剪切/粘贴代码。

测试代码有点问题，因为代码需要在 PDI 上下文中运行才能正确评估变量；但是这个过程对我来说很好。

希望这可以帮助...

# javascript - PhoneGap 2.0 (Cordova) DatePicker PlugIn 'mode'-获取日期和时间的属性

> ID：12188062
> 
> 赞同：3
> 
> 时间：2012-08-29T23:48:22.540
> 
> 标签：javascript, cordova, datepicker, phonegap-plugins, android-datepicker

今天我开始使用[DatePicker-Plugin](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)使用 PhoneGap 创建我的第一个（Android-）应用程序。经过几个小时的调查，我已经让它工作了（感谢[datePicker 插件在 Phonegap 2.0 中不起作用](https://stackoverflow.com/questions/11776905/datepicker-plugin-not-working-in-phonegap-2-0)）但不完全是我想要的：

我有一个输入`class="nativedatepicker" (date)`（jQuery click-event 的选择器）和一个输入，`class="nativetimepicker" (time)`所以我可以在第一个输入中选择日期，在第二个输入中选择时间。

是否可以将其合并到一个输入中，我可以在其中一步选择日期和时间？我想我可以在这里的某个地方执行此操作（插件中的一些 JS）：

```
window.datePicker.show({
    date : myNewDate,
    mode : 'date', // date or time or blank for both
    allowOldDates : true
} 
```

但是当我留下`mode`空白时，它会引发错误。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:58:23.503

How do you leave it blank exactly ? If you do

```
mode : , 
```

You will get errors because the JS object needs a value for all keys you specify. You can try

```
mode : '', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:00:38.547

这是我对 DZL 答案的替代解决方案。我将日期和时间连接到两个单独的按钮，它们都改变了相同的日期：

```
 var date = new Date();
 var $date = $('#date_result');

  var normalizeNumber = function(n){
    var c = parseInt(n, 10); 
    return (c<10) ? "0"+c : c; 
 }

 var normalizeTime = function(t){
    var hours = t.getHours();
    var minutes = t.getMinutes();
    var meridiem = ' AM ';
    if (hours > 12) {
        hours -= 12;
        meridiem = ' PM ';
    } else if (hours === 0) {
       hours = 12;
    }
    minutes =  normalizeNumber(minutes);
    return hours + ':' + minutes + meridiem; 
 }

$('#date-btn').on('click', function(event) {
    var myNewDate = date;
    if(typeof myNewDate === "number"){ myNewDate = new Date (myNewDate); }
    window.plugins.datePicker.show({
        date : myNewDate,
        mode : 'date',
        allowOldDates : true
    }, function(returnDate) {
        var newDate = new Date(returnDate);
        newDate.setMinutes(date.getMinutes());
        newDate.setHours(date.getHours());
        date = newDate;
        $date.val(newDate.toLocaleDateString() + ' ' + normalizeTime(newDate));
        $date.blur();
    });
});

$('#time-btn').on('click', function(event) {
    var myNewTime = date;
    if(typeof myNewTime === "number"){ myNewTime = new Date (myNewTime); }
    plugins.datePicker.show({
        date : myNewTime,
        mode : 'time',
        allowOldDates : true
    }, function(returnDate) {
        var newDate = new Date(returnDate);
        newDate.setDate(date.getDate());
        newDate.setMonth(date.getMonth());
        newDate.setFullYear(date.getFullYear());            
        date = newDate;
        $date.val(newDate.toLocaleDateString() + ' ' + normalizeTime(newDate));     
        $date.blur();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T23:12:28.233

[不，目前使用当前的 Android 的DatePicker](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)插件是不可能的，即使他们说如果你将 mode 属性设置为空白，你会得到两者。您可以在 DatePickerPlugin.java 文件中看到它：

```
if (ACTION_TIME.equalsIgnoreCase(action)) {       //mode is set to "time"
        //plugin java code
    } else if (ACTION_DATE.equalsIgnoreCase(action)) {         //mode is set to "date"
        //plugin java code
    } else {        //mode is blank
        Log.d(pluginName, "Unknown action. Only 'date' or 'time' are valid actions");
        return;
    } 
```

我对选择日期和时间问题的解决方案是首先显示日期对话框，然后在成功回调中显示时间对话框。

代码如下所示：

```
 var showDialog = function(mode, date, cb) {

            window.plugins.datePicker.show({
                date : date,
                mode : mode
            }, function(dateStr) {
                cb(new Date(dateStr));
            });
        };

        $('.nativedatepicker').click(function(e) {

            e.preventDefault();
            var currentField = $(this);

            var oldDate = new Date(currentField.val()) || new Date();

            //show the dialog to select the date
            showDialog("date", oldDate, function(newDate) {

                //we have a new date selected, copy time values from the old date for time dialog
                newDate.setHours(oldDate.getHours());
                newDate.setMinutes(oldDate.getMinutes());

                //show the time dialog          
                showDialog("time", newDate, function(newDateTime) {

                    //now we have time selected, copy it to new date and update the field
                    newDate.setHours(newDateTime.getHours());
                    newDate.setMinutes(newDateTime.getMinutes());
                    currentField.val(newDate.toISOString());
                });

            });
            return false;
        }); 
```

# json - 使用 XSLT 1.0 版从 JSON 文件中提取信息

> ID：12188064
> 
> 赞同：6
> 
> 时间：2012-08-29T23:48:44.050
> 
> 标签：json, xslt, gis, xslt-1.0

我是 stackoverflow 和 xslt 的菜鸟，所以我希望我不会听起来不聪明！

因此，我正在与一家 GIS 公司的 SDI 合作，我有一项任务要求我将位于一个空间参考系统 (SRS) 坐标平面中的点（例如 EPSG:4035）转换为世界 SRS，即 EPSG:4326。这对我来说真的不是问题，因为我可以使用在线服务，它只会给我想要的东西。但是，它输出的格式是 JSON 或 HTML。我已经浏览了一段时间以找到一种从 JSON 文件中提取信息的方法，但是我看到的大多数技术都使用 xslt:stylesheet 2.0 版，我必须使用 1.0 版。我考虑过的一种方法是使用 document($urlWithJsonFormat) xslt 函数，但是这只接受 xml 文件。

下面是一个 JSON 格式文件的示例，我在请求转换后将检索该文件：

```
{
  “几何”：
  [{
      “xmin”：-4，
      “ymin”：-60，
      “最大”：25，
      “最大”：-41
    }
  ]
}
```

我只想要 xmin、ymin、xmax 和 ymax 值，仅此而已！它看起来很简单，但对我没有任何作用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T02:37:44.683

您可以使用[外部实体](http://www.w3.org/TR/REC-xml/#sec-external-ent)将 JSON 数据作为 XML 文件的一部分包含在内，然后进行转换。

例如，假设示例 JSON 保存为名为“geometries.json”的文件，您可以创建如下 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE wrapper [
<!ENTITY otherFile SYSTEM "geometries.json">
]>
<wrapper>&otherFile;</wrapper> 
```

然后使用以下 XSLT 1.0 样式表对其进行转换：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

<xsl:template match="wrapper">
    <geometries>
        <xsl:call-template name="parse-json-member-value">
            <xsl:with-param name="member" select="'xmin'"/>
        </xsl:call-template>
        <xsl:call-template name="parse-json-member-value">
            <xsl:with-param name="member" select="'ymin'"/>
        </xsl:call-template>
        <xsl:call-template name="parse-json-member-value">
            <xsl:with-param name="member" select="'xmax'"/>
        </xsl:call-template>
        <xsl:call-template name="parse-json-member-value">
            <xsl:with-param name="member" select="'ymax'"/>
        </xsl:call-template>
    </geometries>
</xsl:template>

    <xsl:template name="parse-json-member-value">
        <xsl:param name="member"/>
        <xsl:element name="{$member}">
            <xsl:value-of select="normalize-space(
                                    translate(
                                        substring-before(
                                            substring-after(
                                                substring-after(.,
                                                    concat('&quot;', 
                                                           $member, 
                                                          '&quot;'))
                                                , ':')
                                            ,'&#10;')
                                    , ',', '')
                                  )"/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

产生以下输出：

```
<geometries>
   <xmin>-4</xmin>
   <ymin>-60</ymin>
   <xmax>25</xmax>
   <ymax>-41</ymax>
</geometries> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:28:01.667

这里的两个主要选择似乎是：

1.  在 XSLT 1.0 中编写（或使用）JSON 解析器，或
2.  使用 XSLT 以外的其他语言。

由于 XSLT 1 引擎通常不能直接处理 JSON，我建议使用其他语言来转换为 XML。

[https://github.com/WelcomWeb/JXS](https://github.com/WelcomWeb/JXS)也可能对您有所帮助，如果这是 Web 浏览器中的 XSLT。

# mysql - MySQL 用户档案系统

> ID：12188070
> 
> 赞同：0
> 
> 时间：2012-08-29T23:49:15.157
> 
> 标签：mysql, profile

MySQL是否有一个用户配置文件系统，我可以将“权限”和“权限”等与某个用户配置文件相关联并将每个用户分配给某个配置文件？例如，我想为学生实习生创建配置文件“实习生”，为组织中的程序员创建配置文件“程序员”，为组织中只需要能够读取数据的人员创建“只读”。

如果 MySQL 本身没有提供这样的系统，那么有什么好的 Linux 或 Windows 桌面软件可以让我进行这种管理？

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:08:49.217

不，没有办法做到这一点，最终您可以使用 mysql.user 表使用 SQL 语句将用户的权限复制到另一个用户。

# c# - 根据 2 个条件选择使用 linq

> ID：12188072
> 
> 赞同：3
> 
> 时间：2012-08-29T23:49:22.173
> 
> 标签：c#, linq, collections

我有一个收藏。我想选择符合 2 个条件的值。

```
var a;
var b;
foreach(SomeObject so in collection)
{
    if(so.Value == something) 
    {
        a = so;
        // break if b is not null.
    }
    else if(so.Value == somethingElse) 
    {
        b = so;
        // break if a is not null
    }
} 
```

是否可以使用 linq 仅对集合进行一次迭代来执行上述操作？如果我们可以使用这个事实，那么某物只有一个值，而某物只有一个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:04:28.873

此解决方案将列表缩小到两个元素，然后从那里开始。 `Take(2)`使用，因此仅在找到两个值之前搜索集合。

```
var matches = collection.Where(x => x.Value == something || x.Value == somethingElse)
                        .Take(2)
                        .ToList();
var a = matches.Single(x => x.Value == something);
var b = matches.Single(x => x.Value == somethingElse); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T01:46:45.243

```
var relevant =
  from so in l where so.Value == something || so.Value == somethingElse
  group so by so.Value == something into grp
  select new {ForA = grp.Key, SO = grp.First()};
foreach(var bit in relevant)
  if(bit.ForA)
    a = bit.SO;
  else
    b = bit.SO; 
```

它可以针对某些来源为您带来一些好处，因为只检索了两个项目，但如果针对内存中的一个集合，我会保留您所拥有的，但是添加一个 catch 以便一旦您同时设置了`a`and `b`，您就会停止循环而不是一直不必要地检查收藏品。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T00:21:18.040

你需要这样的东西：

```
var a = collection.OfType<YourCollectionElementType>().FirstOrDefault(i=>i.Equals(something));
var b = collection.OfType<YourCollectionElementType>().FirstOrDefault(i=>i.Equals(somethingelse)); 
```

您的集合`IEnumerable`至少应该实现能够使用此代码。这取决于您的收藏类型。如果它实现了 generic `IEnumerable<T>`，比如说它`List<YourCollectionElementType>`或者一个数组`YourCollectionElementType[]`，那么你就不需要使用`OfType<T>`，即

```
var a = collection.FirstOrDefault(i=>i.Equals(something));
var b = collection.FirstOrDefault(i=>i.Equals(somethingelse)); 
```

如果您的收藏不包含该值，`a`和/或`b`将获得`null`值。

实际上，您可以在 MSDN 中阅读所有这些内容。LINQ 并不难学，如果你尝试例如：

1.  [Enumerable.FirstOrDefault 方法 (IEnumerable)](http://msdn.microsoft.com/en-us/library/bb340482.aspx)

2.  [Enumerable.OfType 方法](http://msdn.microsoft.com/en-us/library/bb360913.aspx)

**编辑**

在您的评论中，您说的*是可以保证只有一个值存在*。您需要两个单独的变量是否非常重要？你可以像这样得到现值：

```
object thevalue = collection.FirstOrDefault(i => i == something || i == somethingelse); 
```

**编辑**

实际上，我会让你的循环保持原样，只添加了这样的一行：

```
SomeObject a;
SomeObject b;
foreach(SomeObject so in collection)
{
    if(so.Value == something)
        a = so;
    else if(so.Value == somethingElse)
        b = so;
    if(a!=null && b!=null)
        break;
} 
```

如果只期望其中一个值，那么

```
SomeObject a;
SomeObject b;
foreach(SomeObject so in collection)
{
    if(so.Value == something)
    {
        a = so;
        break;
    }
    else if(so.Value == somethingElse)
    {
        b = so;
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T01:54:31.630

你可以这样做：

```
collection
    .Select(x => x.Value == something
        ? () => a = x
        : (x.Value == somethingElse
            ? () => b = x 
            : (Action)null))
    .Where(x => x != null)
    .ToArray()
    .ForEach(x => x()); 
```

我测试了这段代码，它奏效了。

如果集合在某处的数据库中，那么我建议这样做：

```
collection
    .Where(x => x.Value == something || x.Value == somethingElse)
    .ToArray()
    .Select(x => x.Value == something
        ? () => a = x
        : (x.Value == somethingElse
            ? () => b = x 
            : (Action)null))
    .Where(x => x != null)
    .ToArray()
    .ForEach(x => x()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T02:35:00.330

不确定如果我理解您的问题但假设`Something`并且`SomethingElse`是值类型并且在运行时之前已知，您可以在一个语句中执行以下操作。

```
 var FindItems = new[]
        {
            new SomeObject { Value = "SomethingElse" }
        };

        var CollectionItems = new[]
        {
            new SomeObject { Value = "Something" },
            new SomeObject { Value = "SomethingElse" }
        };

        var qSomeObject = CollectionItems
                          .Where(c => FindItems.Any(x => c.Value == x.Value)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T01:20:34.157

当然可以，但我不推荐。拥有你的循环会更干净，因为你现在已经拥有它。

如果你真的想知道怎么做，你可以这样做：

```
class SomeObject
{
    public string Value { get; set; }
} 
```

```
var items = new[]
{
    new SomeObject { Value = "foo" },
    new SomeObject { Value = "bar" },
    new SomeObject { Value = "baz" },
};

var something = "foo";
var somethingElse = "baz";
var result = items.Aggregate(
    Tuple.Create(default(SomeObject), default(SomeObject)),
    (acc, item) => Tuple.Create(
        item.Value == something     ? item : acc.Item1,
        item.Value == somethingElse ? item : acc.Item2
    )
);
// result.Item1 <- a == new SomeObject { Value = "foo" }
// result.Item2 <- b == new SomeObject { Value = "baz" } 
```

# php - mod_rewrite 网址

> ID：12188073
> 
> 赞同：0
> 
> 时间：2012-08-29T23:49:23.563
> 
> 标签：php, mod-rewrite

我在 youtube 上注意到他们的 url 没有文件扩展名和查询字符串。我一直在尝试模仿类似的东西，但发现我必须包含文件扩展名或尾部斜杠。

```
members.php?agefrom=20&ageto=40&city=london (works)
members/?agefrom=20&ageto=40&city=london (works)
members?agefrom=20&ageto=40&city=london (doesnt work) 
```

所以我只是想知道如何让第三个案例起作用？我在 htaccess 文件中尝试了一些东西。

```
RewriteRule ^members$ index.php?page=members&%{QUERY_STRING} [QSA,L] 
```

我已经尝试了上述但无济于事。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:15:31.243

您是否尝试过删除 $ 最后？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:51:37.767

您发布的 RewriteRule 对 members.php 是否正确？和会员？它不应该与成员一起使用/您必须在此之前有额外的 RewriteRules，这些规则首先被应用并影响此规则。

但是，这里有一条规则仍然适用于您：

```
RewriteRule ^members/?$ index.php?page=members&%{QUERY_STRING} [QSA,L] 
```

这 /？如果斜线存在或不存在，则表示匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T07:13:46.983

```
RewriteRule ^members/?$ index.php?page=members&%{QUERY_STRING} [QSA,L] 
```

这最终确实奏效了，我所要做的就是将它移到更靠近 htaccess 文件的顶部。我有以下行，我猜它正在被阅读。

```
....
RewriteCond %{REQUEST_URI} ^/members$ [OR]
.... 
```

我正在改变我对 SEO URL 的方法，因为我试图找到关于 googlebot 如何实际抓取表单以及它如何更喜欢 GET 方法的文章。我正在使用 jquery 来更改我的操作参数以编写以下 URL：

```
/members/london/18-to-25 
```

我不知道 google 有多喜欢 jquery 以及它是否会扫描 javascript 代码。我假设它只是遵循 HTML 代码并进行了一些研究，我已将表单更改为使用 GET 方法，因此机器人可以抓取我的表单而不会抱怨，所以现在我的 URL 如下所示：

```
/members?location=london&agefrom=18&ageto=40 
```

我在正确的轨道上假设这一点？还是我应该坚持使用 jquery 来重写 seo 友好 URL 的操作参数？

# java - 如何在java中模拟SHIFT +鼠标按键

> ID：12188076
> 
> 赞同：5
> 
> 时间：2012-08-29T23:49:55.183
> 
> 标签：java, swing

我想将鼠标指针移动到特定位置并执行 SHIFT + 鼠标右键单击。我可以将鼠标移动到某个位置，但无法模拟鼠标点击。

```
Robot r = new Robot();
r.mouseMove(x1,y1); 
```

我应该怎么做才能模拟预期的鼠标点击？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T00:06:54.253

我想你只需要一点额外的信息来让机器人成功完成，试试

```
r.keyPress(KeyEvent.VK_SHIFT);
r.mousePress(KeyEvent.BUTTON3_MASK);
r.mouseRelease(KeyEvent.BUTTON3_MASK);
r.keyRelease(KeyEvent.VK_SHIFT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T23:54:35.487

这应该可以解决问题：

```
r.mousePress(InputEvent.BUTTON3_MASK);
r.mouseRelease(InputEvent.BUTTON3_MASK); 
```

这里重要的是不要忘记按下并释放它，因为这是 2 个不同的事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T23:58:14.697

用 按键`robot` `class`很简单：

```
r.keyPress(KeyEvent.VK_SHIFT); //hold down shift
r.mousePress(InputEvent.BUTTON3_MASK); //perform a right click
r.mouseRelease(InputEvent.BUTTON3_MASK); //release right click
r.keyRelease(KeyEvent.VK_SHIFT); //release shift 
```

`InputEvent`并且`KeyEvent`在`java.awt.event`.

# xcode - 通过 XCode 提供 Web 服务

> ID：12188077
> 
> 赞同：0
> 
> 时间：2012-08-29T23:49:59.543
> 
> 标签：xcode, web-services

全部，

我正在使用基于核心数据的数据模型编写一个广泛的 iPad 应用程序。由于该应用程序需要大量用户输入/输入，我还希望将功能作为网页提供，以便用户可以使用标准 PC 键入一些数据。我并不特别担心该 Web 应用程序的 UI，但我确实想重用我用于 iOS 应用程序的应用程序逻辑和核心数据模型，因此我首选的方法是将功能公开为Mac 上的 Web 服务（很可能使用内置的 Apache Web 服务器），使用 XCode for MacOS。

(1) 是否有任何现有的基于 XCode 的框架来简化 Web 服务的生成？(2) 我是否遗漏了一些明显的东西，即是否有更好的方法来解决“通过 Web 环境公开 iOS 功能”的问题？显然，我本可以立即专注于用 HTML5 编写应用程序，但我确实想利用 iOS/Cocoa 附带的所有优点。(3) 或者，我可以编写一个本地 Mac OS 应用程序。这有助于重用 Core Data 等，但我听说将 iOS 应用程序移植到 Mac OS 需要做很多工作。接下来的问题是还有哪些工作要做——将功能公开为 Web 服务或将其移植到 Mac OS……在这两种情况下，我都需要重写 UI。

谢谢大家，法比安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:57:17.993

如果您希望 iPhone/iPad 用户能够通过 PC 网络浏览器访问应用程序以将数据/文件发送到应用程序，那么请看@这个：

[http://blogs.oreilly.com/iphone/2008/09/creating-an-iphone-based-web-s.html](http://blogs.oreilly.com/iphone/2008/09/creating-an-iphone-based-web-s.html)

也检查这个问题：

[https://apple.stackexchange.com/questions/9012/has-anyone-ever-tried-to-use-an-iphone-as-web-server](https://apple.stackexchange.com/questions/9012/has-anyone-ever-tried-to-use-an-iphone-as-web-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:30:27.747

我做了更多的研究，发现了[WebAppKit](http://webappkit.org)框架。它允许您轻松设置 Web 服务器功能并处理请求和响应。它轻巧，易于理解——正是我想要的。

# arrays - 排序数组：如何在使用名称之前和之后获取位置？as3

> ID：12188078
> 
> 赞同：0
> 
> 时间：2012-08-29T23:50:31.050
> 
> 标签：arrays, actionscript-3, flash

我一直在做一个项目，到目前为止 Stack Overflow 已经帮助我解决了一些问题，所以我非常感谢！

我的问题是这样的：

我有一个这样的数组：

```
var records:Object = {};

var arr:Array = [
records["nh"] = { medinc:66303, statename:"New Hampshire"},
records["ct"] = { medinc:65958, statename:"Connecticut"},
records["nj"] = { medinc:65173, statename:"New Jersey"},
records["md"] = { medinc:64596, statename:"Maryland"}, 
```

等等......适用于所有 50 个州。然后我对数组进行反向数字（降序）排序，如下所示：

```
arr.sortOn("medinc", Array.NUMERIC);
arr.reverse(); 
```

我可以调用记录的名称（即新泽西州的“nj”），然后从数组中记录上方和下方的数字位置获取值吗？

基本上，medinc 是美国各州的中等收入，我试图展示一个排名系统......例如，用户会点击 Texas，它会显示 Texas 的 medinc 值，以及排名在下一位的州和在数组中排名高一位的状态。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T23:58:06.157

如果您知道对象，则可以使用 array.indexOf()。

```
var index:int = records.indexOf(records["nj"]);

var above:Object;
var below:Object;

if(index + 1 < records.length){ //make sure your not already at the top
   above = records[index+1];
}

if(index > 0){  //make sure your not already at the bottom
   below = records[index-1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:37:30.463

这并不是设置数据的好方法 - 输入过多（您一遍又一遍地重复“records”、“medinc”、“statename”，而您绝对可以避免它，例如：

```
var records:Array = [];
var states:Array = ["nh", "ct", "nj" ... ];
var statenames:Array = ["New Hampshire", "Connecticut", "New Jersey" ... ];
var medincs:Array = [66303, 65958, 65173 ... ];
var hash:Object = { };

function addState(state:String, medinc:int, statename:String, hash:Object):Object
{
    return hash[state] = { medinc: medinc, statename: statename };
}

for (var i:int; i < 50; i++)
{
    records[i] = addState(states[i], medincs[i], statenames[i], hash);
} 
```

虽然您已经按照您的方式完成了它，但这并不是必需的，但这可以为您节省一些击键，如果您还没有...

现在，关于您的搜索问题 - 首先，确实，在搜索之前对数组进行排序是值得的，但是如果您需要根据排序参数的值来搜索数组，那么有一个更好的算法那。也就是说，如果给定示例中的数据，您的具体任务是找出收入是 65958 的状态，然后，知道数组是按收入排序的，您可以使用[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)。

现在，对于具有 50 个状态的示例，除非您每秒执行数十万次，否则差异不会很明显，但总的来说，二分搜索将是可行的方法。

如果 Wiki 中的文章看起来太长而无法阅读；）二进制搜索背后的想法是，首先您猜测搜索的值恰好在数组的中间 - 您尝试该假设，如果您猜对了，则返回索引您刚刚找到，否则 - 您选择包含搜索值的间隔（剩余数组的一半）并这样做，直到您找到该值或检查相同的索引 - 这意味着找不到该值）。这将算法的[渐近复杂度](http://en.wikipedia.org/wiki/Asymptotic_complexity)从 O(n) 降低到 O(log n)。

现在，如果你的目标是找到收入和状态之间的对应关系，但它如何与其他状态扩展并不重要（即数组中的索引并不重要），你可以有另一个哈希表，其中收入将是关键，状态信息对象将是价值，使用我上面的例子：

```
function addState(state:String, medinc:int, statename:String, 
    hash:Object, incomeHash:Object):Object
{
    return incomeHash[medinc] = 
        hash[state] = { medinc: medinc, statename: statename };
} 
```

然后`incomeHash[medinc]`将在 O(1) 时间内按收入为您提供状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T02:04:23.323

你真的需要记录来散列吗？

如果没有，您可以简单地将键移动到记录字段并将记录更改为简单数组：

```
var records: Array = new Array();
records.push({ short: "nh", medinc:66303, statename:"New Hampshire"}),
records.push({ short: "ct", medinc:65958, statename:"Connecticut"}),
.... 
```

这使您有机会为 State 创建类，将 Array 更改为 Vector 并使所有这些类型安全，这总是好的。

如果你真的需要这些键，你可以像现在一样添加上面的对象（带有“短”字段）（也许使用一些帮助函数，这将有助于避免输入两次短名称，比如 addState(records, data ) { 记录 [data.short] = 数据 })。

最后，您还可以将这些记录保存在两个对象（或一个对象和一个数组或任何您需要的东西）中。如果您将创建一次状态对象并将引用保存在数组/对象/向量中，这不会很昂贵。如果您经常需要按不同键排序的状态，那将是个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T00:03:35.190

我认为这是基于我对您的数据的理解的答案。

```
var index:int = arr.indexOf(records["nh"]); 
```

这将为您提供被点击的记录的索引，然后找到下面和上面的索引：

```
var clickedRecord:Object = arr[index]
var higherRecord:Object = arr[index++]
var lowerRecord:Object = arr[index--] 
```

希望这能回答你的问题

# json - 使用 Jackson 将 Java 数组对象转换为 JSON

> ID：12188084
> 
> 赞同：0
> 
> 时间：2012-08-29T23:51:30.963
> 
> 标签：json, jackson

我需要将 java 数组对象转换为 JSON，我为此使用杰克逊。我只能认为对于每个字段名称，我必须从数组中迭代，这意味着我必须为每个字段迭代相同的数组对象。有什么有效的方法吗？

```
 JsonGenerator jGenerator = jfactory.createJsonGenerator(out);
        jGenerator.writeStartObject();
        jGenerator.writeFieldName("images");
        jGenerator.writeStartArray();
        for(int i=0; i < topicBean.getTopicVOArray().length; i++){
            jGenerator.writeString(topicBean.getTopicVOArray()[i].getBody());
        }
        for(int i=0; i < topicBean.getTopicVOArray().length; i++){
            jGenerator.writeString(topicBean.getTopicVOArray()[i].getTopicGuid()());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T17:33:28.337

取决于您希望生成的 json 的外观。现在你会得到`{"images":["bodystring","bodystring","guidstring","guidstring"]}`，但你也可以做到，`{"images":["bodystring","guidstring","bodystring","guidstring"]}`或者，甚至更好，`{"images":[{"body":"bodystring","guid":"guidstring"},{"body":"bodystring","guid":"guidstring"}]}`

第一个解决方案：

```
for(int i=0; i < topicBean.getTopicVOArray().length; i++){
    jGenerator.writeString(topicBean.getTopicVOArray()[i].getBody());
    jGenerator.writeString(topicBean.getTopicVOArray()[i].getTopicGuid()());
} 
```

第二种解决方案（对象包装器）：

```
for(int i=0; i < topicBean.getTopicVOArray().length; i++){
    jGenerator.writeStartObject();
    jGenerator.writeFieldName("body");
    jGenerator.writeString(topicBean.getTopicVOArray()[i].getBody());
    jGenerator.writeFieldName("guid");
    jGenerator.writeString(topicBean.getTopicVOArray()[i].getTopicGuid()());
    jGenerator.writeEndObject();
} 
```

# mysql - MySQLi 可选 WHERE 子句取决于 if 条件

> ID：12188085
> 
> 赞同：0
> 
> 时间：2012-08-29T23:51:34.297
> 
> 标签：mysql, sql, mysqli, where

在尝试优化一些代码时，我遇到了另一个问题。使用用户组和权限，`WHERE`当用户权限有限时，我有时需要添加一个子句。我可以将整个查询放在 中`if {...}`，但这意味着重复相同的操作除了一行之外的代码。所以我更改了仅根据 if 条件构建语句的代码，而不是重复整个部分（语句、准备、执行、获取..）：

```
if (in_array('Edit own', $_SESSION['user_r']))
{
    $sql = 'SELECT
                `news_id`
            FROM
                `news`
            WHERE
                `news_user_id` = "' .$_SESSION['user_id']. '"';
}
else if (in_array('Edit all', $_SESSION['user_r']))
{
    $sql = 'SELECT
                `news_id`
            FROM
                `news`';
} 
```

我知道也可以使用语句中的 if 条件来“拆分”语句，如下所示：

```
$sql = 'SELECT
            `news_id`
        FROM
            `news`';

if (in_array('Edit own', $_SESSION['user_r']))
{
     $sql .= ' WHERE
                 `news_user_id` = "' .$_SESSION['user_id']. '"';
} 
```

乍一看，2\. 示例可能“更好”，因为没有重复并且代码很短，但是当涉及到准备好的语句和 bind_param() 时，第一个示例可能会更好，因为我可以添加

```
$stmt = $db->prepare($sql);
$stmt->bind_param('ss', $what, $ever); 
```

直接在`if {...}`...里面的声明之后，不知何故，它对我来说似乎更安全...

那么我应该更喜欢哪种解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:23:57.667

由于没有其他答案，我想分享我的“解决方案”：

```
if (in_array('Edit own', $_SESSION['user_r']))
{
    $sql = 'SELECT
                `news_id`
            FROM
                `news`
            WHERE
                `news_user_id` = ?';

    $stmt = $db->prepare($sql);
    $stmt->bind_param('i', $_SESSION['user_id']);

}
else if (in_array('Edit all', $_SESSION['user_r']))
{
    $sql = 'SELECT
                `news_id`
            FROM
                `news`';

    $stmt = $db->prepare($sql);
}

$stmt->execute();
$stmt->bind_result($news_id);
... 
```

正如我的问题中已经提到的，我现在使用 if 语句来构建整个语句。这样，我可以在 if 语句中使用 bind_param（如果需要），但不需要重复执行/获取部分。

# asp.net-mvc-3 - ASP.NET MVC 3 使用插件/嵌入式视图时找不到 _viewstart.cshtml

> ID：12188088
> 
> 赞同：1
> 
> 时间：2012-08-29T23:52:05.593
> 
> 标签：asp.net-mvc-3, plugins, razor, virtualpathprovider

我正在尝试使用嵌入视图的 ASP.NET MVC 3 (razor) 插件机制，如此[处](http://fzysqr.com/2010/04/26/asp-net-mvc2-plugin-architecture-tutorial/)所述，我将视图引擎更改为从 RazorViewEngine 继承，但除此之外并没有真正改变任何东西。现在我在插件程序集中调用一个控制器操作，它呈现一个视图，这工作正常。但是视图找不到_viewstart.cshtml，因此没有布局。理想情况下，我想让主机应用程序定义 viewstart 和布局。可能我不应该直接调用插件控制器操作，而是只渲染插件的部分内容，让主机应用程序处理主控制器/视图。

这些是在我自己的 VirtualPathProvider 中尝试的 viewstart 位置：

```
"~/Plugins/MyMvcApplication.dll/_ViewStart.cshtml"
"~/Plugins/MyMvcApplication.dll/_ViewStart.vbhtml"
"~/Plugins/_ViewStart.cshtml"
"~/Plugins/_ViewStart.vbhtml"
"~/_ViewStart.cshtml"
"~/_ViewStart.vbhtml" 
```

我也在考虑忘记嵌入视图，因为它看起来有点繁琐，所以我可能会选择将视图复制到主机应用程序，这可以让未来用户更容易调试。风险在于用户会对这些视图进行更改，从而使插件的更新更加困难。我对插件机制产生怀疑的原因之一是可能会影响性能，尽管我还没有进行任何测量。

# linux - 工作线程如何执行哪个函数（事件/0）

> ID：12188090
> 
> 赞同：0
> 
> 时间：2012-08-29T23:52:41.907
> 
> 标签：linux, operating-system, linux-kernel, scheduling, linuxthreads

出于调试目的，我想知道工作线程（events/#0）执行的是哪个函数。当 evnets 执行时，我有什么办法得到这些信息吗？

# javascript - JavaScript：返回 NaN（第 2 部分）

> ID：12188095
> 
> 赞同：0
> 
> 时间：2012-08-29T23:53:15.883
> 
> 标签：javascript

（请注意，这与我刚才提出的问题相似但不同 - 该问题的解决方案是在调用 Math.Random 时添加括号）

在下面代码的底部，我处理了两手二十一点`myhand`，`yourhand`然后将手记录到控制台

```
"I scored a "+myHand.score()+" and you scored a "+ yourHand.score()); 
```

但是，我得到的结果是

```
I scored NaN and you scored a NaN 
```

最初，Card 构造函数中的 getValue 方法传递了一个名为的参数，`card`但构建 Hand 构造函数的说明说调用 getValue 而不传递参数

```
this.card1.getValue(); 
```

所以我将 getValue 方法更改为采用`var number`（在 Card 构造函数中）

无论如何，长话短说，无论我做什么，它都会打印出来

```
I scored NaN and you scored a NaN 
```

而且我不确定我到底哪里出错了。

```
// Make your card constructor again here, but make sure to use private
// variables!
function Card(num, suit){
    var number = num; 
    var suits = suit;
    this.getSuit = function(){
        return suits; 
    }; 
    this.getNumber = function(){
        return number; 
    };

    this.getValue = function(number){
        if (number > 10){
            return 10; 
        }else if (number === 1){
            return 11; 
        }else{
            return number; 
        }

    };

}

function Hand(){
    this.card1 = deal(); 
    this.card2 = deal(); 

    this.score = function(){
    var score1 = this.card1.getValue();
    var score2 = this.card2.getValue();
    return score1 + score2;
    };

}

// Make a deal function here.  It should return a new card with a suit
// that is a random number from 1 to 4, and a number that is a random
// number between 1 and 13

var deal = function(){
    var suit = Math.floor(Math.random() * 4 + 1);
    var number = Math.floor(Math.random() * 13 + 1);
    return new Card(number, suit); 
}; 

// examples of the deal function in action

var myHand = new Hand();
var yourHand = new Hand();
console.log("I scored a "+myHand.score()+" and you scored a "+ yourHand.score()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:57:13.613

你的`getValue`功能是错误的。它应该是：

```
this.getValue = function() {
  if( this.number>10) return 10;
  if( this.number==1) return 11;
  return this.number;
} 
```

出现问题的提示是您在`this.card1.getValue()`没有参数的情况下调用，而您`this.getValue(number)`使用参数进行了定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:00:38.510

当您处理 card.getValue() 时，它需要一些输入

```
this.getValue = function(number){
    if (number > 10){
        return 10; 
    }else if (number === 1){
        return 11; 
    }else{
        return number; 
    }

}; 
```

该函数不返回任何内容，从而导致 NaN。要解决此问题，请改用 this.number

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T00:07:22.700

您的 get value 函数接受`number`参数 this.getValue = function(number)

但是你没有在这里传递值：

```
var score1 = this.card1.getValue();
var score2 = this.card2.getValue(); 
```

# ios - 多次使用 textViewShouldBeginEditing

> ID：12188099
> 
> 赞同：0
> 
> 时间：2012-08-29T23:53:33.470
> 
> 标签：ios

我可以用

```
-(BOOL)textViewShouldBeginEditing:(UITextView *)firstTextView {
    return NO;  
} 
```

停止`textView`通过键盘编辑 a。

但是，如果我尝试使用另一个

```
-(BOOL)textViewShouldBeginEditing:(UITextView *)secondTextView {
    return NO;  
} 
```

我收到重新定义的错误`textViewShouldBeginEditing`。

我确信我用委托方法做的事情很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T23:56:38.770

该错误准确地告诉您出了什么问题。你正在重新定义方法。

该方法`UITextView*`精确地将 a 作为参数，因此您可以判断哪个文本视图正在询问问题，因此您可以调整您的响应。当然，如果您想始终`NO`对所有文本视图说，那么您可以忽略该参数。无论如何，只需删除重复的定义就可以了。

# google-apps-script - Google Apps 脚本下拉菜单仅显示以 A 或 B 或 C 等开头的项目

> ID：12188101
> 
> 赞同：0
> 
> 时间：2012-08-29T23:53:52.693
> 
> 标签：google-apps-script, google-sheets

嗨，有没有一种方法可以让我只能通过使用 Google Apps 脚本的下拉菜单并从共享电子表格中提取以某个字母开头的 A 列中的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:21:52.593

在这些线上尝试一些东西。

```
var sheet = SpreadsheetApp.openById(ID).getSheetByName(SHEETNAME); 
var data = sheet.getDataRange().getValues(); 
// Assume column A
var lst = app.createListBox().setId('lst').setName('lst');
for( var i = 0 ; i < data.length ; i++){
  if(data[i][0].indexOf('A') == 0){
    lst.addItem(data[i][0]);
  }
} 
```

警告：代码未经测试

# android - 在 TouchImageView 中实现双击 - 现在无法拖动图片

> ID：12188105
> 
> 赞同：0
> 
> 时间：2012-08-29T23:54:30.843
> 
> 标签：android, imageview, touch-event, ontouchlistener, gesturedetector

我有个问题。我从这里使用了 TouchImageView 代码 - [https://github.com/MikeOrtiz/TouchImageView](https://github.com/MikeOrtiz/TouchImageView)。我已经实现了双击功能。它工作正常，但现在我无法在放大图像时拖动它。通过手势缩放（捏缩放）工作正常，我只是无法在缩放的图像上导航。我不知道为什么。这是我的实际代码：

```
 package com.example.testy;

    import android.content.Context;
    import android.graphics.Bitmap;
    import android.graphics.Matrix;
    import android.graphics.PointF;
    import android.util.AttributeSet;
    import android.view.GestureDetector;
    import android.view.GestureDetector.SimpleOnGestureListener;
    import android.view.MotionEvent;
    import android.view.ScaleGestureDetector;
    import android.view.View;
    import android.widget.ImageView;

    public class TouchImageView extends ImageView {

        Matrix matrix = new Matrix();

        // We can be in one of these 3 states
        static final int NONE = 0;
        static final int DRAG = 1;
        static final int ZOOM = 2;
        int mode = NONE;

        // Remember some things for zooming
        PointF last = new PointF();
        PointF start = new PointF();
        float minScale = 1f;
        float maxScale = 3f;
        float[] m;

        float redundantXSpace, redundantYSpace;

        float width, height;
        static final int CLICK = 3;
        float saveScale = 1f;
        float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

        ScaleGestureDetector mScaleDetector;
        GestureDetector gestureDetector;
        Context context;

        public TouchImageView(Context context) {
            super(context);
            sharedConstructing(context);
        }

        public TouchImageView(Context context, AttributeSet attrs) {
            super(context, attrs);
            sharedConstructing(context);
        }

        private void sharedConstructing(Context context) {
            gestureDetector = new GestureDetector(new DoubleTapGestureListener());
            super.setClickable(true);
            this.context = context;
            mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
            matrix.setTranslate(1f, 1f);
            m = new float[9];
            setImageMatrix(matrix);
            setScaleType(ScaleType.MATRIX);

            setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if (gestureDetector.onTouchEvent(event)) {
                        return true; // podwojne klikniecie i koniec imprezy
                    }
                    mScaleDetector.onTouchEvent(event);

                    matrix.getValues(m);
                    float x = m[Matrix.MTRANS_X];
                    float y = m[Matrix.MTRANS_Y];
                    PointF curr = new PointF(event.getX(), event.getY());

                    switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        last.set(event.getX(), event.getY());
                        start.set(last);
                        mode = DRAG;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        if (mode == DRAG) {
                            float deltaX = curr.x - last.x;
                            float deltaY = curr.y - last.y;
                            float scaleWidth = Math.round(origWidth * saveScale);
                            float scaleHeight = Math.round(origHeight * saveScale);
                            if (scaleWidth < width) {
                                deltaX = 0;
                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);

                            } else if (scaleHeight < height) {
                                deltaY = 0;
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);

                            } else {
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);

                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);

                            }
                            matrix.postTranslate(deltaX, deltaY);
                            last.set(curr.x, curr.y);
                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        mode = NONE;
                        int xDiff = (int) Math.abs(curr.x - start.x);
                        int yDiff = (int) Math.abs(curr.y - start.y);
                        if (xDiff < CLICK && yDiff < CLICK)
                            performClick();
                        break;

                    case MotionEvent.ACTION_POINTER_UP:
                        mode = NONE;
                        break;
                    }
                    setImageMatrix(matrix);
                    invalidate();
                    return true; // indicate event was handled
                }

            });
        }

        @Override
        public void setImageBitmap(Bitmap bm) {
            super.setImageBitmap(bm);
            if (bm != null) {
                bmWidth = bm.getWidth();
                bmHeight = bm.getHeight();
            }
        }

        public void setMaxZoom(float x) {
            maxScale = x;
        }

        public boolean canScrollHorizontally(int direction) { //used to cooparate with ViewPager
            matrix.getValues(m);
            float x = Math.abs(m[Matrix.MTRANS_X]);
            float scaleWidth = Math.round(origWidth * saveScale);

            if (scaleWidth < width) {
                return false;

            } else {
                if (x - direction <= 0)
                    return false; // reach left edge
                else if (x + width - direction >= scaleWidth)
                    return false; // reach right edge

                return true;
            }
        }

        @Override
        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
            width = MeasureSpec.getSize(widthMeasureSpec);
            height = MeasureSpec.getSize(heightMeasureSpec);
            // Fit to screen.
            float scale;
            float scaleX = width / bmWidth;
            float scaleY = height / bmHeight;
            scale = Math.min(scaleX, scaleY);
            matrix.setScale(scale, scale);
            setImageMatrix(matrix);
            saveScale = 1f;

            // Center the image
            redundantYSpace = height - (scale * bmHeight);
            redundantXSpace = width - (scale * bmWidth);
            redundantYSpace /= 2;
            redundantXSpace /= 2;

            matrix.postTranslate(redundantXSpace, redundantYSpace);

            origWidth = width - 2 * redundantXSpace;
            origHeight = height - 2 * redundantYSpace;
            right = width * saveScale - width - (2 * redundantXSpace * saveScale);
            bottom = height * saveScale - height
                    - (2 * redundantYSpace * saveScale);
            setImageMatrix(matrix);
        }

        public boolean isZoomed() {
            return saveScale > minScale;
        }

        public void zoomIn() {

            System.out.println("Zoom in!");

            saveScale = maxScale;
            matrix.setScale(saveScale, saveScale);
            setImageMatrix(matrix);
            invalidate();
        }

        public void zoomOut() {

            saveScale = minScale;
            matrix.setScale(saveScale, saveScale);
            setImageMatrix(matrix);
            invalidate();

            System.out.println("Zoom out!");
        }

        private class DoubleTapGestureListener extends SimpleOnGestureListener {

            @Override
            public boolean onDown(MotionEvent e) {
                return true;
            }

            // event when double tap occurs
            @Override
            public boolean onDoubleTap(MotionEvent e) {
                float x = e.getX();
                float y = e.getY();

                if (isZoomed()) {
                    zoomOut();
                } else {
                    zoomIn();
                }
                return true;
            }

        }

        private class ScaleListener extends
                ScaleGestureDetector.SimpleOnScaleGestureListener {
            @Override
            public boolean onScaleBegin(ScaleGestureDetector detector) {
                mode = ZOOM;
                return true;

            }

            @Override
            public boolean onScale(ScaleGestureDetector detector) {
                float mScaleFactor = detector.getScaleFactor();
                float origScale = saveScale;
                saveScale *= mScaleFactor;
                if (saveScale > maxScale) {
                    saveScale = maxScale;
                    mScaleFactor = maxScale / origScale;
                } else if (saveScale < minScale) {
                    saveScale = minScale;
                    mScaleFactor = minScale / origScale;
                }
                right = width * saveScale - width
                        - (2 * redundantXSpace * saveScale);
                bottom = height * saveScale - height
                        - (2 * redundantYSpace * saveScale);
                if (origWidth * saveScale <= width
                        || origHeight * saveScale <= height) {
                    matrix.postScale(mScaleFactor, mScaleFactor, width / 2,
                            height / 2);
                    if (mScaleFactor < 1) {
                        matrix.getValues(m);
                        float x = m[Matrix.MTRANS_X];
                        float y = m[Matrix.MTRANS_Y];
                        if (mScaleFactor < 1) {
                            if (Math.round(origWidth * saveScale) < width) {
                                if (y < -bottom)
                                    matrix.postTranslate(0, -(y + bottom));
                                else if (y > 0)
                                    matrix.postTranslate(0, -y);
                            } else {
                                if (x < -right)
                                    matrix.postTranslate(-(x + right), 0);
                                else if (x > 0)
                                    matrix.postTranslate(-x, 0);
                            }
                        }
                    }
                } else {
                    matrix.postScale(mScaleFactor, mScaleFactor,
                            detector.getFocusX(), detector.getFocusY());
                    matrix.getValues(m);
                    float x = m[Matrix.MTRANS_X];
                    float y = m[Matrix.MTRANS_Y];
                    if (mScaleFactor < 1) {
                        if (x < -right)
                            matrix.postTranslate(-(x + right), 0);
                        else if (x > 0)
                            matrix.postTranslate(-x, 0);
                        if (y < -bottom)
                            matrix.postTranslate(0, -(y + bottom));
                        else if (y > 0)
                            matrix.postTranslate(0, -y);
                    }
                }
                return true;

            }
    }
} 
```

你有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T02:04:18.343

我有同样的问题。这就是我所做的；

1.  在顶部声明两个检测器（如您所做的那样）

    ```
    ScaleGestureDetector mScaleDetector;    
    GestureDetector mDoubleTapDetector; 
    ```

2.  在 sharedConstructing(...) 中实例化上述变量（正如您所做的那样）

    ```
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());     
    mDoubleTapDetector = new GestureDetector(context, new DoubleTapListener()); 
    ```

    注意：也为 GestureDetector 提供上下文。

3.  在 onTouch(...) 先写下面的代码；

    ```
    boolean result = mScaleDetector.onTouchEvent(event);                
    // result is always true here, so we need another way to check scalling gesture progress.           
    boolean isScaling = result = mScaleDetector.isInProgress();
    if (!isScaling) {
       // if no scaling is performed check for other gestures (fling, long tab, etc.)
       mDoubleTapDetector.onTouchEvent(event);
    } 
    ```

4.  添加另一个私有类 DoubleTapListener(...)

    ```
    private class DoubleTapListener extends GestureDetector.SimpleOnGestureListener{
        @Override
        public boolean onDoubleTap(MotionEvent e) {
        Log.e(TAG,"onDoubleTap");
        return super.onDoubleTap(e);
        }               
    } 
    ```

而已。我希望这可以帮助你。

# ios - 为什么这个 UIScrollView 实验会失败？

> ID：12188111
> 
> 赞同：0
> 
> 时间：2012-08-29T23:55:21.550
> 
> 标签：ios, uiscrollview

在我看来控制器的`viewDidLoad`功能，我有这个人：

```
UIScrollView *scroller = [[UIScrollView alloc] initWithFrame:self.view.frame];
scroller.contentSize = self.view.frame.size; // Tried w/ and w/o this
scroller.showsVerticalScrollIndicator = YES; // Tried w/ and w/o this

for (int x = 0; x < 10; x++) {
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, x * 100, 100, 100)];
    label.text = [NSString stringWithFormat:@"%i label", x];
    [scroller addSubview:label];
}

[self.view addSubview:scroller]; 
```

它显示前 8 个标签 OK，但滚动视图不会...滚动。它只是被切断了。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:04:47.903

它不会滚动，因为您`contentSize`仅设置为与滚动视图本身相同的大小。这`contentSize`是滚动视图充当窗口的可滚动区域的大小。您需要将其设置得足够宽才能真正看到您的标签。

根据您当前的代码，您的最终标签为 rect `{0, 900, 100, 100}`，因此您`contentSize`至少需要为`CGSizeMake(100, 1000)`.

# objective-c - 调用方法/类而不是 iPad 的 pushviewcontroller？

> ID：12188113
> 
> 赞同：1
> 
> 时间：2012-08-29T23:55:56.000
> 
> 标签：objective-c, ios

我有一个表格视图应用程序，我为应该在 iPhone/iPad 上工作的课程编写代码。我可以让电话部分正常工作，并且 ipad 上的拆分视图很好，但是当我在弹出窗口中选择一个项目时，我无法更改右侧的视图控制器。这是我在 MasterViewController.m 中的代码：

```
#pragma mark - Sal's Methods

-(void) doAbout {
   NSLog(@"About");

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    AboutMe *vc = [[AboutMe alloc] initWithNibName:@"AboutMe" bundle:nil];
    [self.navigationController pushViewController:vc animated:YES];
    } else {
    AboutMe *vc = [[AboutMe alloc] initWithNibName:@"AboutMe_iPad" bundle:nil];
    [self.navigationController pushViewController:vc animated:YES];

    }

}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
UISplitViewController *svc = self.splitViewController;
DetailViewController *rightVC = [svc.viewControllers objectAtIndex:1];

switch (indexPath.row) {
    case 0:
        [self doAbout];
        break;
    case 1:
        NSLog(@"Concurrency");
        break;
    case 2:
        NSLog(@"Sandbox");
        break;
    case 3:
        NSLog(@"Notification");
        break;
    case 4:
        NSLog(@"Email");
        break;
    case 5:
        NSLog(@"Mapkit");
        break;
    case 6:
        NSLog(@"Animate");
        break;
    case 7:
        NSLog(@"Contacts");
        break;
    case 8:
        NSLog(@"SQLlite");
        break;
    case 9:
        NSLog(@"Core Data");
        break;

    default:
        break;
}

}

@end 
```

# javascript - prettyPhoto 在 Chrome 和 IE9 中不起作用

> ID：12188115
> 
> 赞同：1
> 
> 时间：2012-08-29T23:56:19.487
> 
> 标签：javascript, jquery, prettyphoto

嘿，我正在尝试在 prettyPhoto 中做一个简单的弹出窗口，但在 IE9 和 Chrome 中出现错误。

我已经升级到最新版本的 prettyPhoto 和最新的 jquery，没有任何改变。还尝试在 noConflict 模式下使用 jQuery，但这也不起作用。

这是各个控制台中的错误：

IE：

```
SCRIPT5007: Invalid operand to 'in': Object expected 
jquery-1.8.0.min.js, line 2 character 2299 
```

铬合金：

```
Uncaught TypeError: Cannot use 'in' operator to search for 'marginTop' in undefined jquery-1.8.0.min.js:2 
```

我的 prettyPhoto 脚本是这样的：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
        $("a[rel^='prettyPhoto']").prettyPhoto({
            autoplay: true,
            wmode: 'opaque',
            theme: 'facebook',
            deeplinking: false,
            social_tools: false
        });
    });
</script>` 
```

我到处寻找解决方案，找不到任何东西！以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:48:32.160

我自己的脚本也有同样的错误。

似乎新的 jQuery 1.8.0 中有一个错误。

尝试切换回 jQuery 1.7.2 - 它对我有用。

# javascript - 计算矩形内三角形的象限

> ID：12188121
> 
> 赞同：0
> 
> 时间：2012-08-29T23:56:41.040
> 
> 标签：javascript

我有以下方法可以计算正方形中的象限，其宽度和高度相等，除以四个三角形：

```
function getQuadtrant(x, y, width, height){
    if(y < width/2 && x < width-y && x > y) {

    alert('top triangle');

    }

    if(y > width/2 && x > width-y && x < y) {

    alert('bottom triangle');

    }

    if(x < height/2 && x < width-y && x < y) {

    alert('left triangle');

    }

    if(x > height/2 && x > width-y && x > y) {

    alert('right triangle');

    }
} 
```

但是，我有一个矩形 div，宽度为 249px，高度为 404px，如何获得象限？上面的代码在当前状态下会给出错误的输出，当我选择三角形的特定区域时，例如顶部三角形，它会警告“底部三角形”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T00:13:34.153

我会这样做：

```
function getQ(x, y, w, h) {
    var quadrants = [
        ['left', 'top'],
        ['bottom', 'right']
    ];

    if (y > h / w * x) {
        quadrants = quadrants[0];
    } else {
        quadrants = quadrants[1];
    }

    return (y < -h / w * x + h) ? quadrants[0] : quadrants[1];
}

console.log(getQ(10, 20, 20, 20));​ 
```

这个解决方案非常简单，并且基于对角线方程。如果 位于`y`主对角线上方 - 那么它是`left`或`top`( `quadrants[0]`)。如果`y`低于次对角线 - 它是`left`，否则是`top`。底部也一样。

[http://jsfiddle.net/zerkms/aCAfw/](http://jsfiddle.net/zerkms/aCAfw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T23:59:05.233

您的前两个测试是与 比较`y`，`width/2`而我认为它应该是比较`height/2`。

编辑：这是一些适用于所有矩形而不是正方形的修改代码：

```
function getQuadrant(x,y,width,height) {
    var l = {x:x-width/2,y:y-height/2}, // "local" coords - origin at centre
        g = l.x/width*height; // "gradient" - position on diagonal
    if( l.y < -g && l.y < g) alert("Top");
    else if( l.y < -g && l.y >= g) alert("Right");
    else if( l.y >= -g && l.y >= g) alert("Bottom");
    else if( l.y >= -g && l.y < g) alert("Left");
    else alert("Tell Kolink he messed up");
} 
```

# django - 如何开始在 Cloud9 上使用 Django 进行开发？

> ID：12188125
> 
> 赞同：7
> 
> 时间：2012-08-29T23:57:05.570
> 
> 标签：django, cloud9-ide

所以 Cloud9 看起来真的很酷，你可以在其中创建 python 文件，但我不知道如何让它运行 Django 项目。我从我的 github 帐户导入了一个到 IDE，但它说我需要安装 Django（django.core 导入错误）所以我需要帮助开始。有任何想法吗？我错过的网络上的任何骨架项目都会这样做吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-10T22:59:36.850

经过一些研究并在不同的博客和网站上寻找答案后，我终于找到了解决方案：

*   创建新工作区
*   执行`easy_install django`安装 Django
*   创建新的 Django 项目`python ./../bin/django-admin.py startproject myproject`
*   启动开发服务器`python ./myproject/manage.py runserver $IP:$PORT`
*   访问[http://projectname.username.c9.io](http://projectname.username.c9.io)
*   **瞧！！！**

我希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T17:25:03.363

只需在 shell 中按原样编写命令：（ `sudo pip install -r requirements.txt`你应该有 django）而不是 [https://projectname-username.c9.io](https://projectname-username.c9.io)`python manage.py runserver $IP:$PORT` 上的应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T18:07:40.647

您可能还必须添加正确的路径：`<workspace_name>-<username>.c9users.io`到 django_project/settings.py 文件中的 ALLOWED_HOSTS 列表，正如 django 服务器返回的错误消息所建议的那样。在 Django 2.0 上测试

# c# - Entity Framework Code First - 获取具有特定标签的博客文章

> ID：12188130
> 
> 赞同：2
> 
> 时间：2012-08-29T23:57:27.317
> 
> 标签：c#, linq, entity-framework, tsql, ef-code-first

我在这里遗漏了一些东西，但我不确定那是什么。所以我需要一双眼睛。我想获取与它相关联的某些标签的博客文章。我的模型结构如下所示：

```
public partial class BlogPost : IEntity {

    public BlogPost() {

        this.BlogPostComments = new HashSet<BlogPostComment>();
        this.BlogPostUrls = new HashSet<BlogPostUrl>();
        this.TagsForBlogPosts = new HashSet<TagsForBlogPost>();
    }

    public System.Guid Key { get; set; }
    public System.Guid LanguageKey { get; set; }
    public Nullable<int> SecondaryKey { get; set; }
    public string Title { get; set; }

    //...

    public virtual ICollection<BlogPostComment> BlogPostComments { get; set; }
    public virtual Language Language { get; set; }
    public virtual ICollection<BlogPostUrl> BlogPostUrls { get; set; }
    public virtual ICollection<TagsForBlogPost> TagsForBlogPosts { get; set; }
}

public partial class Tag : IEntity {

    public Tag() {

        this.TagsForBlogPosts = new HashSet<TagsForBlogPost>();
        this.TagsForDynamicPages = new HashSet<TagsForDynamicPage>();
    }

    public System.Guid Key { get; set; }
    public System.Guid LanguageKey { get; set; }
    public string TagName { get; set; }

    //...    

    public virtual Language Language { get; set; }
    public virtual ICollection<TagsForBlogPost> TagsForBlogPosts { get; set; }
    public virtual ICollection<TagsForDynamicPage> TagsForDynamicPages { get; set; }
}

public partial class TagsForBlogPost : IEntity {

    public System.Guid Key { get; set; }
    public System.Guid BlogPostKey { get; set; }
    public System.Guid TagKey { get; set; }

    public virtual BlogPost BlogPost { get; set; }
    public virtual Tag Tag { get; set; }
} 
```

作为输入`string[]`，我有博客文章需要的标签。现在，我可以使用以下代码：

```
public void Get(string[] tags) {

    var posts = dbConxtext.BlogPosts.Where(x => 
        x.TagsForBlogPosts.Any(y => tags.Contains(y.Tag.TagName)));

    //

} 
```

但它会生成一个 IN 子句，这不是我想要的。以下是上述代码生成的 T-SQL：

```
SELECT 
[Extent1].[Key] AS [Key], 
[Extent1].[LanguageKey] AS [LanguageKey], 
[Extent1].[SecondaryKey] AS [SecondaryKey], 
[Extent1].[Title] AS [Title], 
[Extent1].[BriefInfo] AS [BriefInfo], 
[Extent1].[Content] AS [Content], 
[Extent1].[ImagePath] AS [ImagePath], 
[Extent1].[IsApproved] AS [IsApproved], 
[Extent1].[CreationIp] AS [CreationIp], 
[Extent1].[CreatedOn] AS [CreatedOn], 
[Extent1].[LastUpdateIp] AS [LastUpdateIp], 
[Extent1].[LastUpdatedOn] AS [LastUpdatedOn]
FROM [dbo].[BlogPosts] AS [Extent1]
WHERE  EXISTS (SELECT 
    1 AS [C1]
    FROM  [dbo].[TagsForBlogPosts] AS [Extent2]
    INNER JOIN [dbo].[Tags] AS [Extent3] ON [Extent2].[TagKey] = [Extent3].[Key]
    WHERE ([Extent1].[Key] = [Extent2].[BlogPostKey]) AND ([Extent3].[TagName] IN (N'nuget',N'mvc'))
) 
```

我想要的是与这些标签完全匹配。知道如何实现吗？

**编辑：**

我需要的是如下：

帖子 A 有**tag1**、**tag2**和**tag3**。帖子 B 有**tag1**，**tag3**。如果字符串数组包含**tag1**和**tag2**，则只应选择 Post A，因为它同时具有**tag1**和**tag2**。

**回答：**

感谢@msarchet，我设法让它工作。这是 LINQ 查询：

```
public void Get(string[] tags) {

    var posts = dbConxtext.BlogPosts
        .Where(x => tags.All(t => x.TagsForBlogPosts.Any(y => y.Tag.TagName == t)));

    //

} 
```

并生成 T-SQL：

```
SELECT 
[Extent1].[Key] AS [Key], 
[Extent1].[LanguageKey] AS [LanguageKey], 
[Extent1].[SecondaryKey] AS [SecondaryKey], 
[Extent1].[Title] AS [Title], 
[Extent1].[BriefInfo] AS [BriefInfo], 
[Extent1].[Content] AS [Content], 
[Extent1].[ImagePath] AS [ImagePath], 
[Extent1].[IsApproved] AS [IsApproved], 
[Extent1].[CreationIp] AS [CreationIp], 
[Extent1].[CreatedOn] AS [CreatedOn], 
[Extent1].[LastUpdateIp] AS [LastUpdateIp], 
[Extent1].[LastUpdatedOn] AS [LastUpdatedOn]
FROM [dbo].[BlogPosts] AS [Extent1]
WHERE  NOT EXISTS (SELECT 
    1 AS [C1]
    FROM  (SELECT 
        N'nuget' AS [C1]
        FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
    UNION ALL
        SELECT 
        N'razor' AS [C1]
        FROM  ( SELECT 1 AS X ) AS [SingleRowTable2]) AS [UnionAll1]
    WHERE ( NOT EXISTS (SELECT 
        1 AS [C1]
        FROM  [dbo].[TagsForBlogPosts] AS [Extent2]
        INNER JOIN [dbo].[Tags] AS [Extent3] ON [Extent2].[TagKey] = [Extent3].[Key]
        WHERE ([Extent1].[Key] = [Extent2].[BlogPostKey]) AND ([Extent3].[TagName] = [UnionAll1].[C1])
    )) OR (CASE WHEN ( EXISTS (SELECT 
        1 AS [C1]
        FROM  [dbo].[TagsForBlogPosts] AS [Extent4]
        INNER JOIN [dbo].[Tags] AS [Extent5] ON [Extent4].[TagKey] = [Extent5].[Key]
        WHERE ([Extent1].[Key] = [Extent4].[BlogPostKey]) AND ([Extent5].[TagName] = [UnionAll1].[C1])
    )) THEN cast(1 as bit) WHEN ( NOT EXISTS (SELECT 
        1 AS [C1]
        FROM  [dbo].[TagsForBlogPosts] AS [Extent6]
        INNER JOIN [dbo].[Tags] AS [Extent7] ON [Extent6].[TagKey] = [Extent7].[Key]
        WHERE ([Extent1].[Key] = [Extent6].[BlogPostKey]) AND ([Extent7].[TagName] = [UnionAll1].[C1])
    )) THEN cast(0 as bit) END IS NULL)
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T00:08:58.777

所以你想根据你的评论做什么

> 是的。假设：帖子 A 有 tag1、tag2 和 tag3。帖子 B 有 tag1、tag3。如果字符串数组包含 tag1 和 tag2，则应选择 Post A。

是

```
var posts = dbConxtext.BlogPosts.Where(x => tags.All(t => 
  x.TagsForBlogPost.Any(y => y.Tag.TagName == t))); 
```

所以确保所有的`tags`都包含在`TagsForBlogPost`

警告，这可能会产生糟糕的 SQL

# objective-c - AFNetworking：中断更高优先级请求的后台请求

> ID：12188131
> 
> 赞同：3
> 
> 时间：2012-08-29T23:57:28.893
> 
> 标签：objective-c, ios5, grand-central-dispatch, nsoperationqueue, afnetworking

使用 AFNetworking，我需要在后台下载大约 100 张图像并将它们存储到磁盘，同时确保我的应用程序中的任何其他网络连接优先。

~~~~~~~

我有一个有 4 个选项卡的应用程序。每个选项卡基本上都做同样的事情：从服务器拉下 JSON 响应，并显示图像的缩略图网格，按需拉下每个图像（使用 AF 的 ImageView 类别）。点击缩略图会将您带到详细视图控制器，您可以在其中看到更大的图像。每个选项卡的响应和图像都不同。

有一项新要求是提前获取第 4 个选项卡的所有图像，因此理论上，当用户点击第 4 个选项卡时，JSON 数据和图像正在从磁盘读取。

我现在或多或少地工作了，第 4 个选项卡预取并保存到磁盘是在后台线程上执行的，因此主线程不会锁定。但是，当用户在第一个、第二个或第三个选项卡上时启动的网络请求被预取的网络请求阻止。

我正在使用 AFNetworking，这是我在 Tab 1、2 或 3 加载时使用的代码：

```
// this network request ends up getting blocked by the network request that
// is fired upon the application becoming active
- (void)getAllObjectDataWithBlock:(AFCompletionBlockWrapper)block
{
    [[[MyAPIClient] sharedClient] getPath:@"" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
        block(operation, responseObject, nil);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        block(operation, nil, error);
    }];
} 
```

这是我在应用程序激活时使用的代码，用于为第 4 个选项卡预取内容：

```
// this network request runs in the background, but still blocks requests
// that should have a higher priority
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        NSOperationQueue *imageQueue = [[NSOperationQueue alloc] init];
        [imageQueue setMaxConcurrentOperationCount:8];

        for (NSString *imageURL in self.images) {                    
            NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL imageURL]];

            AFImageRequestOperation *operation = [[AFImageRequestOperation alloc] initWithRequest:request];
            [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
                NSLog(@"success");
            } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                NSLog(@"fail");
            }];

            [imageQueue addOperation:smallOperation];
        }
    });
} 
```

我如何构建事物，以便从主线程启动的任何网络请求都会中断那些在后台线程中启动的网络请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:29:00.197

我不知道你可以很容易地中断正在运行的操作，除非你想给他们发送一个`cancel`-- 但你必须看看是否`AFImageRequestOperation`关注`isCancelled`.

您是否尝试过使用[setQueuePriority](http://developer.apple.com/library/ios/documentation/cocoa/Reference/NSOperation_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004591-RH2-borderType)？您可以以低优先级启动所有预取请求，然后添加具有更高优先级的当前选项卡请求。我相信正在运行的操作会完成，但是一旦它们完成，您的高优先级操作将在排队的低优先级操作之前安排。

# geolocation - 如何确定网站访问者的城市并在表单中使用它

> ID：12188132
> 
> 赞同：0
> 
> 时间：2012-08-29T23:57:39.750
> 
> 标签：geolocation

我正在为一家酒店做一个网站。并且联系/预订表格应该包含一个文本字段，以便用户可以写出他/她的国家/城市。

我想实施一种地理跟踪、地理定位或其他允许我获取原产国/城市并在表单字段中使用该信息的方法，以便该字段的内容将通过电子邮件与其余信息一起传递。

我已经尝试了本网站[http://www.maestrosdelweb.com/util/geo/geo.html](http://www.maestrosdelweb.com/util/geo/geo.html)中的代码，我将其代码放在这里：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head><script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) { var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",mirage:{responsive:0,lazy:0},oracle:"35/0f710f6add20ad3fc449c08c96bdf2",paths:{cloudflare:"/cdn-cgi/nexp/aav=366183412/"},atok:"3ef00aeff8d6c935da4e270822a8471b",zone:"maestrosdelweb.com",rocket:"0",apps:{"ga_key":{"ua":"UA-309831-1","ga_bs":"2"}}}];var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0;a.src="//ajax.cloudflare.com/cdn-cgi/nexp/aav=4114775854/cloudflare.min.js";b.parentNode.insertBefore(a,b);}}catch(e){};
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
window.__CF=window.__CF||{};window.__CF.AJS={"ga_key":{"ua":"UA-309831-1","ga_bs":"2"}};
//]]>
</script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="robots" content="noindex,follow"/>
<title>Geolocalizacion con HTML5</title>
<link rel="shortcut icon" href="/favicon.ico"/>
<style type="text/css">img{border:0}</style>
<script type="text/javascript">
/* <![CDATA[ */
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-309831-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

(function(b){(function(a){"__CF"in b&&"DJS"in b.__CF?b.__CF.DJS.push(a):"addEventListener"in b?b.addEventListener("load",a,!1):b.attachEvent("onload",a)})(function(){"FB"in b&&"Event"in FB&&"subscribe"in FB.Event&&(FB.Event.subscribe("edge.create",function(a){_gaq.push(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){_gaq.push(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){_gaq.push(["_trackSocial","facebook","send",a])}));"twttr"in b&&"events"in twttr&&"bind"in twttr.events&&twttr.events.bind("tweet",function(a){if(a){var b;if(a.target&&a.target.nodeName=="IFRAME")a:{if(a=a.target.src){a=a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);b=0;for(var c;c=a[b];++b)if(c.indexOf("url")===0){b=unescape(c.split("=")[1]);break a}}b=void 0}_gaq.push(["_trackSocial","twitter","tweet",b])}})})})(window);
/* ]]> */
</script>
</head>
<body onload="detectar()">
<h1>Ejemplo de geolocalizacion basado en HTML5</h1>
<div id="mapa">
</div>
<script src="http://code.google.com/apis/gears/gears_init.js" type="text/javascript" charset="utf-8"></script>
<script src="geo.js" type="text/javascript" charset="utf-8"></script>
<script language="javascript">
function detectar(){
if(geo_position_js.init())
{
    document.getElementById('mapa').innerHTML="Leyendo...";
    geo_position_js.getCurrentPosition(mostra_ubicacion,function(){document.getElementById('mapa').innerHTML="No se puedo detectar la ubicación"},{enableHighAccuracy:true});
}   else    {
    document.getElementById('mapa').innerHTML="La geolocalización no funciona en este navegador.";
}
}
function mostra_ubicacion(p){
var coords = p.coords.latitude + "," + p.coords.longitude;
document.getElementById('mapa').innerHTML="<p>latitud="+p.coords.latitude.toFixed(2)+" longitud="+p.coords.longitude.toFixed(2) + "</p>"
            +"<a href=\"http://maps.google.com/?q="+coords+"\"><img src=\"http://maps.google.com/maps/api/staticmap?center="+coords+"&maptype=hybrid&size=400x400&zoom=12&markers=size:mid|"+coords+"&sensor=false\" alt=\"mapa\"/></a>";
}
</script>
</body>
</html> 
```

然而，此代码返回带有用户地理坐标（纬度/经度）的地图。

是否有一种简单的方法来确定这一点并在表单字段中使用该信息？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:01:35.780

HTML5 地理定位 API 将为您提供用户的纬度和经度（假设他们选择加入）。如果您需要获取城市、国家或邮政编码等信息，则需要使用反向地理编码 Web 服务。那里有很多：

*   [谷歌](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)
*   [必应](http://msdn.microsoft.com/en-us/library/cc980817)
*   ETC

因此，请自行选择……请务必查看条款和条件，并确保网站上线后您不会违规。

您应该能够通过谷歌搜索找到代码示例，这是一个相当常见的用例。步骤将是：

1.  使用现有代码获取用户的 lat/lng。
2.  进行 AJAX (JSONP) 调用以请求反向地理编码（使用您的地理编码提供程序来确定要使用的 URL。例如，对于谷歌来说就是这样[）](http://maps.googleapis.com/maps/api/geocode/json?bounds=34.172684,-118.604794%7C34.236144,-118.500938&sensor=false)。
3.  解析 JSON 响应以提取您需要的信息（国家、城市）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:02:13.517

另一个 stackoverflow[问题](https://stackoverflow.com/questions/283016/know-a-good-ip-address-geolocation-service)谈到了允许基于 IP 地址进行地理定位的 Web 服务

您可以使用它来实现一个服务器端解决方案，该解决方案生成标记并填充其位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T00:09:48.307

老式（并且仍然流行！）方法是对客户端 IP 地址进行反向查找:)

# ios - 如何向 iOS 键盘添加“完成”按钮 [ Webview / Phonegap / Cordova ]

> ID：12188137
> 
> 赞同：3
> 
> 时间：2012-08-29T23:58:40.983
> 
> 标签：ios, ipad, cordova, webview

编辑 HTML`textarea`时，主 (iPad) 键盘上方有上一个/下一个按钮，但没有原生应用程序中的完成按钮。

由于很多用户对空格键附近的 Resign 按钮不熟悉，有没有办法让 Done 按钮出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:01:56.497

您可以在 UITextView 或 UITextField 中使用此方法更改键盘键的标题：

```
 [textField setReturnKeyType:UIReturnKeyGo]; 
```

或在 Interface Builder [Text Input Traits]->[Return Key] 中更改属性；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:12:37.297

您可以像这样在键盘顶部添加视图。

```
textField.inputAccessoryView = [[UIView alloc] init];//Put your view here. 
```

通常它是一个放置在那里的工具栏。但你应该能够放置你想要的任何视图。

# javascript - jQuery .length() 速度影响

> ID：12188140
> 
> 赞同：0
> 
> 时间：2012-08-29T23:59:40.540
> 
> 标签：javascript, jquery

每当我想查找 DOM 中是否存在某个元素时，我都会使用以下代码。

```
if($('#target').length){
    // do stuff.
} 
```

这很好用，我在客户网站上经常使用它。

问题：这种方法有多快？当在项目中大量使用它时，对速度有什么影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:01:30.553

改用你会好得多`if(document.getElementById('target'))`。JavaScript 总是比 jQuery 快（因为 jQuery 只是一堆隐藏在地毯下的 JavaScript）

编辑：如果你经常使用它，你可以制作一个自定义函数：

```
function idExists(id) {return !!document.getElementById(id);} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:04:53.360

原生 JS 总是比通过 jQuery 查询更快。它可能不那么友好。

通过 jsperf.com 运行查询后，native ( `querySelectorAll`) 比 jQuery 快 57%

但是，如果使用 id，jQuery 会比 querySelectorAll 更快。在任何 id 的情况下，`document.getElementById`用于测试元素是否存在。

[http://jsperf.com/jquery-obj-length](http://jsperf.com/jquery-obj-length)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T12:42:51.410

尝试使用 JQuery 上下文搜索 DOM 元素说：

如果您搜索的元素（输入控件）位于表中，请将表作为上下文传递：

一个简单的例子：

```
$(function(){

var name= $('#Name','#mytab').val();

    alert(name);
}); 
```

jquery引擎在'mytab'中找到元素'Name'而不是整个表单

按照这个小提琴链接：http: [//jsfiddle.net/NzbJr/10/](http://jsfiddle.net/NzbJr/10/)

# python - 基于谓词在python中对数组进行分区

> ID：12188141
> 
> 赞同：1
> 
> 时间：2012-08-29T23:59:41.083
> 
> 标签：python, arrays

> **可能重复：**
> [python 等效于 filter() 获取两个输出列表（即列表的分区）](https://stackoverflow.com/questions/4578590/python-equivalent-of-filter-getting-two-output-lists-i-e-partition-of-a-list)

我在python中有一个数组，想把它分成两个数组，一个元素匹配谓词，另一个元素不匹配。

有没有比以下更简单的方法（或更 Pythonic）：

```
>>> def partition(a, pred):
...   ain = []
...   aout = []
...   for x in a:
...     if pred(x):
...       ain.append(x)
...     else:
...       aout.append(x)
...   return (ain, aout)
...
>>> partition(range(1,10), lambda x: x%3 == 1)
([1, 4, 7], [2, 3, 5, 6, 8, 9]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:13:20.640

您目前拥有的方法比任何其他方法都更简单、更有效。

以下是一些关于如何重写此代码的潜在选项，以及为什么我认为您的版本更好：

*   使用集合 -**不保留顺序，仅适用于可散列的内容**
*   使用 tee/filter/ifilterfalse -**取决于你如何使用结果，你最终会使用更多的内存，并迭代两次**
*   使用 numpy -**不适用于通用可迭代对象，需要迭代两次以获得两种条件的结果**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:42:23.923

只是说同一件事的另一种方式。请注意，这两个列表的顺序是相反的。

```
def partition(a, pred):
    aout_ain = [], []
    for x in a:
        aout_ain[pred(x)].append(x)
    return aout_ain 
```

如果您需要将“ins”放在首位，则只需添加一个`not`

```
def partition(a, pred):
    ain_aout = [], []
    for x in a:
        ain_aout[not pred(x)].append(x)
    return ain_aout 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T00:05:38.133

```
def partition(a,pred):
  f1 = set(filter(pred,a))
  f2 = set(a) - f1
  return f1,f2 
```

更多pythonic ...但不确定它是否更快

[编辑]而且我不认为订单被保留......（并且在两个评论中都有更好的答案与链接）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T00:06:32.770

你可以访问 NumPy 吗？`ndarray`Numpy 的索引能力使得根据某些条件选择 numpy 的条目变得非常容易。例如

```
>>> import numpy as np
>>> a = np.arange(1, 10)
>>> condition = (a % 3 == 1)
>>> a[condition]
array([1, 4, 7])
>>> a[~condition]
array([2, 3, 5, 6, 8, 9]) 
```

NumPy 对于大型数组特别有效。对于小的，没有那么多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T00:07:43.250

```
#from http://docs.python.org/dev/library/itertools.html#itertools-recipes

def partition(pred, iterable):
    'Use a predicate to partition entries into false entries and true entries'
    # partition(is_odd, range(10)) --> 0 2 4 6 8   and  1 3 5 7 9
    t1, t2 = tee(iterable)
    return ifilterfalse(pred, t1), filter(pred, t2) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-30T00:23:13.380

不是这样`Pythonic`，但有点功能：

```
>>> partition = lambda xs, p: reduce(lambda (a, b), c: p(c) and (a + [c], b) or (a, b + [c]), xs, ([], []))
>>> print partition(range(1, 10), lambda x: x % 3 == 1)
([1, 4, 7], [2, 3, 5, 6, 8, 9]) 
```

# python - 设置 DateTimeField 的最小值

> ID：12188142
> 
> 赞同：2
> 
> 时间：2012-08-30T00:00:01.897
> 
> 标签：python, django, datetime

我有一个带有 DateTimeField 模型的 Django 表单，我想知道是否有办法确保用户输入的日期/时间总是大于当前时间。

这就是我的形式：

```
from django.db import models
from django import forms    
import datetime    

start_time = models.DateTimeField(
    default=datetime.datetime.now(),
    help_text='Format is: yyyy-mm-dd hh:mm:ss',
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T00:11:10.447

将此添加到您的模型中。

```
from django.core.exceptions import ValidationError
from django.db import models

class MyModel(models.Model):
    # ...
    # extend the validation
    def clean(self, *args, **kwargs):
        # run the base validation
        super(MyModel, self).clean(*args, **kwargs)

        # Don't allow dates older than now.
        if self.start_time < datetime.datetime.now():
            raise ValidationError('Start time must be later than now.') 
```

# php - 数组到 sting 转换通知。为什么？

> ID：12188145
> 
> 赞同：2
> 
> 时间：2012-08-30T00:00:30.677
> 
> 标签：php

为什么我*在第 11 行的 /Applications/MAMP/htdocs/test2.php 中得到数组到字符串的转换*，注意？

```
$users=array('aa-a', 'b-bb', 'cc-c');

foreach($users as $usr)
{
$var = htmlspecialchars(htmlspecialchars($usr));
$z = explode('-', $var);
echo "$z \n";
} 
```

不知道为什么我得到这个，*gettype($var) 回显*字符串。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:04:27.977

您的变量 $z 是一个新数组。当你尝试

```
 echo "$z \n"; 
```

它会给出一个关于它是一个数组的消息。您可以改为使用以下内容显示 $z：

```
echo '<pre>'.print_r($z,true).'</pre>'; 
```

# .net - 实体框架和可为空的字段

> ID：12188148
> 
> 赞同：3
> 
> 时间：2012-08-30T00:01:10.100
> 
> 标签：.net, entity-framework

我正在针对现有数据库使用 EF (v5)，该数据库具有大量具有默认值的可空字段。

插入新实体时，如果没有为可空字段指定值，则将插入空值（不会使用数据库默认值）。这是有道理的，因为 EF 无法确定我是否真的打算为空。

*但是，如果*我将字段设置为`StoreGeneratedPattern = Computed`，它将在插入时使用默认值，但它只会使用默认值。如果我提供自己的值（即使在 上），该值似乎会被忽略。*`Update`*

 *有没有办法让这个场景在不更改底层数据库的情况下工作？

我正在关注的过程示例：

```
var myEntity = databaseSession.MyEntities.Single(x => x.EntityID = 123);
myEntity.SomeField = 1;
databaseSession.SaveChanges(); 
```

`SomeField`在这种情况下是类型`int?`并设置为`StoreGeneratedPattern = Computed`

使用 EFProf，我可以看到发出的 SQL 查询是：

```
update [dbo].[MyEntities]
set    @p = 0
where  ([EntityID] = 123 /* @0 */) 
```

添加：

```
databaseSession.ObjectStateManager.ChangeObjectState(myEntity, System.Data.EntityState.Modified); 
```

导致生成更新语句，更新表中的所有字段，但至关重要的是，它不包括任何设置为`StoreGeneratedPattern = Computed`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T19:10:05.880

据我了解，计算列并不意味着手动设置。

如果这对你有用，你可以简单地在实体的默认构造函数中将属性设置为它们的默认值；这就是它的用途，而且您还有一个额外的优势，即您甚至可以在调用 SaveChanges 之前看到这些值。

**更新：** [相关建议](https://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2929682-support-database-default-values-in-code-first)。*

# javascript - Chrome：在第一行设置断点

> ID：12188149
> 
> 赞同：0
> 
> 时间：2012-08-30T00:01:12.040
> 
> 标签：javascript, google-chrome

我有一个网页在页面加载时在 Chrome 中崩溃。

如何在页面加载*之前*设置断点，以便有机会了解导致崩溃的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:21:36.903

根据我对该错误的理解，Chrome 在第 1 行声明了一个错误，因为它无法确定错误的实际位置。它不可能在尝试加载页面时或之前遇到错误，因为它也不会加载错误代码。

每当我遇到这种情况时，我都会筛选代码以尝试查看我可能在哪里犯了错误。如果不明显，请尝试删除整个功能，看看是否能解决问题。如果确实如此：找出该功能出现故障的原因。

如果你的代码不是很可怕，你可以把它放在一个 jsFiddle 中，让更多的眼睛来寻找错误。

# javascript - JQuery 代码语法问题？（“不允许内联控制结构”）

> ID：12188151
> 
> 赞同：0
> 
> 时间：2012-08-30T00:01:32.753
> 
> 标签：javascript, jquery, syntax

我有一些 JQuery 可以为响应式设计创建移动菜单。我通过代码嗅探器运行代码，它告诉我“ `Inline control structures are not allowed`”。

有问题的代码区域是：

```
 else {
    $('#main-menu li').each(function () {
      if ($(this).children('ul').length)
        $(this).append('<span class="drop-down-toggle"><span class="drop-down-arrow"></span></span>');
    }); 
```

...而上面的具体行是：

```
if ($(this).children('ul').length) 
```

我尝试在 Google 上搜索“ *Jquery 内联控制结构*”，但没有找到太多。

这里是[整个函数](http://pastebin.com/yWtpTjFz)的一个pastebin，供参考。我猜代码可以改写，但我没有关于更改它的参考。该代码实际上有效，所以我不确定它本身是否一定是语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:09:57.697

它可能希望您使用大括号：

```
else {
    $('#main-menu li').each(function () {
      if ($(this).children('ul').length) {
        $(this).append('<span class="drop-down-toggle"><span class="drop-down-arrow"></span></span>');
      }
    }); 
```

`if`将大括号与和一起使用总是更安全`else`。它永远不会导致问题，并且偶尔可以防止意外错误（通常在以后编辑代码时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:10:31.067

如果我知道，这是一个简单的语法警告。尝试使用`{ }`.

# matlab - 如何将此文本文件转换为正确的元胞数组 - Matlab

> ID：12188155
> 
> 赞同：0
> 
> 时间：2012-08-30T00:01:46.893
> 
> 标签：matlab, file-io, cell-array

好的，这是文本文件

```
{'samsung','n150','jp0xtr','n570','2gb','320gb','10','w7str'};
{'samsung','n150','jp0xtr','beyaz','intel','atom','n570','66','ghz','2048mb','ddr3','320gb','10','cam','bt','w7str'};
{'samsung','n150','jp0xtr','atom','n570','66ghz','2gb','320gb','10','netbook','w7s','beyaz'};
{'samsung','n150','jp0xtr','atom','n570','66ghz','2gb','320gb','10','netbook','w7s','beyaz'};
{'samsung','n150','jp0xtr','intel','atom','n570','66ghz','2gb','320gb','10','win7starter'};
{'samsung','n150jp0xtr','n570','2g','320gb','10','w7s','beyaz'};
{'samsung','n150','jp0xtr'};
{'samsung','n150','jp0xtr'}; 
```

现在我想将它加载为下面的单元格数组

![在此处输入图像描述](../Images/b3e9a6745a2f2ee1a5bd25278da21ba8.png)

我在这里使用了复制粘贴，但我想通过文件读取（文本文件）来做到这一点。我怎样才能做到这一点 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:24:44.843

只需将文本文件编辑为它的开头`C = {`和结尾，`}`并将扩展名更改为 .m。然后像从 matlab 命令行中的脚本一样运行它。

下次不要复制和粘贴，使用[保存](http://www.mathworks.co.uk/help/techdoc/ref/save.html)命令，如`save ('monitor-list.txt', 'C', '-ASCII')`. [然后](http://www.mathworks.co.uk/help/techdoc/ref/load.html)，您可以使用`load path-to-file`.

# algorithm - 给定一棵二叉树，找到最大的子树，它是二叉搜索树

> ID：12188157
> 
> 赞同：1
> 
> 时间：2012-08-30T00:02:00.833
> 
> 标签：algorithm, binary-tree, binary-search-tree

我在一次采访中被问到这个问题。我以查找所有子树并检查其中任何一个是否为 bst 的天真方法开始了我的回答。在这个过程中，我们将记录到目前为止看到的 max bst 的大小。

还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:40:04.947

如果你这样做怎么办：

1.  反转图表的权重
2.  以这种方式使用 Kruskal 算法。

* * *

一个。从您的一组边缘中选择最低的加权边缘。

湾。仅当添加该边不会破坏您的 bst 约束时才创建树。

C。从边缘集中删除该边缘。

您最终可能会得到几棵树（因为在不满足 bst 约束时丢弃边可能会使您断开原始图），因此只需选择具有更多节点的树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T00:25:23.067

我认为您的解决方案是这样的：

```
for each subtree of the tree:
    if the subtree is a binary search tree:
        compute its size
        if it is the largest one found so far:
            best = subtree
return best 
```

这是低效的，因为它为每个子树做 O(n) 工作，并且最多有 n 个子树。

你可以通过只走整棵树一次来做得更好。

```
// Walk the subtree at node. Find the largest subtree that is a binary search tree
// and return that tree in *result. Also return that subtree's size and the range
// of values it covers in *size, *min, and *max.
void
walk(Node *node, Node **result, size_t *size, Value *min, Value *max)
{
    Node *result0 = NULL;
    size_t size0 = 0;
    Value min0, max0;
    if (node->left)
        walk(node->left, &result0, &size0, &min0, &max0);

    Node *result1 = NULL;
    size_t size1 = 0;
    Value min1, max1;
    if (node->right)
        walk(node->right, &result1, &size1, &min1, &max1);

    // If both subtrees are search trees and node->value falls between them,
    // then node is a search tree.
    if (result0 == node->left
        && result1 == node->right
        && (node->left == NULL || max0 <= node->value)
        && (node->right == NULL || node->value <= min1))
    {
        *result = node;
        *size = size0 + 1 + size1;
        *min = node->left == NULL ? node->value : min0;
        *max = node->right == NULL ? node->value : max1;
    } else if (size0 >= size1) {
        *result = result0;
        *size = size0;
        *min = min0;
        *max = max0;
    } else {
        *result = result1;
        *size = size1;
        *min = min1;
        *max = max1;
    }
}

Node *
findLargestBinarySearchSubtree(Node *root)
{
    Node *result;
    size_t size;
    Value min, max;
    walk(root, &result, &size, &min, &max);
    return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T00:08:12.343

这个[网站](http://cslibrary.stanford.edu/110/BinaryTrees.html)似乎涵盖了这个问题：Binary Search Tree Checking。具体来说，这里是 C++ 解决方案的摘录

```
/*   
 Returns true if the given tree is a binary search tree 
 (efficient version). 
*/ 
int isBST2(struct node* node) { 
  return(isBSTUtil(node, INT_MIN, INT_MAX)); 
}
/* 
 Returns true if the given tree is a BST and its 
 values are >= min and <= max. 
*/ 
int isBSTUtil(struct node* node, int min, int max) { 
  if (node==NULL) return(true);

  // false if this node violates the min/max constraint 
  if (node->data<min || node->data>max) return(false);

  // otherwise check the subtrees recursively, 
  // tightening the min or max constraint 
  return 
    isBSTUtil(node->left, min, node->data) && 
    isBSTUtil(node->right, node->data+1, max) 
  ); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T00:17:39.187

我假设有 O(n) 复杂度需要解决。

```
bool is_bst(node * cur)
{
   if (cur == NULL)
     return true;

   // if calculated before cur vertex.
   if (hash_set_bst[cur] != -1)
      return hash_set_bst[cur];

   int left_value = MIN;
   int right_value = MAX;
   if (cur -> left != NULL)
      left_value = cur -> left -> value;
   if (cur -> right != NULL)
      right_value = cur -> right -> value;

   if (cur -> value > left_value && cur -> value < right_value)
   {
      hash_set_bst[cur] = is_bst(cur->left) && is_bst(cur->right);
      return hash_set_bst[cur];
   }
   else
   {
      hash_set_bst[cur] = 0;
      is_bst(cur->left);
      is_bst(cur->right);
      return hash_set_bst[cur];
   }
} 
```

现在对于每个节点，您都知道它是否可以启动 BST。现在您需要计算子树的大小，然后遍历所有节点并找出如果节点可以启动 BST，则具有标志的最大大小是多少。

要计算尺寸，您可以执行以下操作：

```
int dfs(node * cur)
{
   if (cur == NULL) return 0;
   size[cur] = 1 + dfs(cur->left) + dfs(cur->right);
   return size[cur];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T00:29:33.643

对二叉树进行按序遍历，如果任何子树是BST，按序遍历会产生一个升序，边走边记录树的大小。当你遇到一个断点时，递归以便使用断点作为根遍历该树，记录它的大小。选择最大的一个。

# templates - ModX：电视显示在错误的位置

> ID：12188161
> 
> 赞同：0
> 
> 时间：2012-08-30T00:02:28.510
> 
> 标签：templates, variables, modx, modx-evolution

好吧，这真的很奇怪。

我有一个大约 20 对电视的列表，它们看起来像：

```
<a id="d1" href="[+designer1link+]">[+designer1+]</a>
<a id="d2" href="[+designer2link+]">[+designer2+]</a>
<a id="d3" href="[+designer3link+]">[+designer3+]</a>
<a id="d4" href="[+designer4link+]">[+designer4+]</a> 
```

等，一直到 20

它们都工作正常，但只有一个。尽管电视的名称和顺序在模板和资源中都是正确的，但它`[+designer7link+]`在该`[+designer12link+]`位置显示。我尝试清除 ModX 的缓存和浏览器缓存，但结果如下：

模板：

![在此处输入图像描述](../Images/78428fb6e6550d83ae1c6750311b17f8.png)

资源的电视：

![在此处输入图像描述](../Images/1fbe7634e5195ae9782c4b1206e63530.png)

浏览器上的结果：

![在此处输入图像描述](../Images/48da5f390087428d48ed0a11e697e50f.png)

如果有人能给我一个关于发生了什么的提示，我会非常感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:51:35.817

好的，找到了。似乎有两台名为 Designer12 的电视。我仍然不知道为什么它搞砸了 7 但现在看起来还可以

# date - XPath - 日期为空

> ID：12188181
> 
> 赞同：1
> 
> 时间：2012-08-30T00:07:00.140
> 
> 标签：date, datetime, xpath, infopath2010

使用 XPath，我如何确定日期或日期时间字段是否为空或空白？

我使用 concat 方法作为 XPath if 语句的替代方法

```
concat(
substring(../preceding-sibling::my:PerDiem[1]/my:perDiemEnd, 1, ../preceding-sibling::my:PerDiem[1]/my:perDiemEnd = "" * string-length(../preceding-sibling::my:PerDiem[1]/my:perDiemEnd)),
substring(/my:ExpenseForm/my:ExpenseHeader/my:departureDateTime, 1, not(../preceding-sibling::my:PerDiem[1]/my:perDiemEnd = "") * string-length(/my:ExpenseForm/my:ExpenseHeader/my:departureDateTime))
) 
```

* * *

更多信息：在 Infopath 2010 中，重复表有两个日期/时间字段，称为 perDiemStart 和 perDiemEnd。在重复表中，下一个 perDiemStart 是前一个 perDiemEnd。如果 perDiemStart 的默认值为`../preceding-sibling::my:PerDiem[1]/my:perDiemEnd`

但是对于第一个 perDiemStart （因为以前的 perDiemEnd 不存在，我想它会是空/空白）。我希望第一个（空白）值不同：departmentDateTime 节点的值

节点位置：

`/my:ExpenseForm/my:ExpenseHeader/my:departureDateTime`

`/my:ExpenseForm/my:PerDiemDetails/my:PerDiems/my:PerDiem/my:perDiemStart`

`/my:ExpenseForm/my:PerDiemDetails/my:PerDiems/my:PerDiem/my:perDiemEnd`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:40:39.937

要检查它是否已填充：

```
perDiemStart[text()] 
```

要检查它是否为空/null：

```
perDiemStart[not(text())] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:28:24.830

这有帮助吗？[http://blogs.msdn.com/b/syamp/archive/2011/03/13/fim-2010-xpath-how-to-check-null-value-on-a-datetime-attribute.aspx](http://blogs.msdn.com/b/syamp/archive/2011/03/13/fim-2010-xpath-how-to-check-null-value-on-a-datetime-attribute.aspx)

基本上，他们通过获取旧日期（例如 1900-01-01）之后的日期集来检测空日期，然后使用“不”来查看哪些节点将被排除在外。

# java - 如何参数化 Comparable 接口？

> ID：12188183
> 
> 赞同：5
> 
> 时间：2012-08-30T00:07:03.237
> 
> 标签：java, generics, interface, wildcard

我有一个主类 - **Simulator** - 它使用另外两个类 - **Producer**和**Evaluator**。生产者产生结果，而评估者评估这些结果。Simulator 通过查询 Producer 然后将结果传送给 Evaluator 来控制执行流程。

Producer 和 Evaluator 的实际实现在运行时是已知的，在编译时我只知道它们的接口。下面我粘贴接口、示例实现和 Simulator 类的内容。

## 旧代码

```
package com.test;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

/**
 * Producers produce results. I do not care what is their type, but the values
 * in the map have to be comparable amongst themselves.
 */
interface IProducer {
    public Map<Integer, Comparable> getResults();
}

/**
 * This implementation ranks items in the map by using Strings.
 */
class ProducerA implements IProducer {
    @Override
    public Map<Integer, Comparable> getResults() {
        Map<Integer, Comparable> result = new HashMap<Integer, Comparable>();
        result.put(1, "A");
        result.put(2, "B");
        result.put(3, "B");
        return result;
    }
}

/**
 * This implementation ranks items in the map by using integers.
 */
class ProducerB implements IProducer {
    @Override
    public Map<Integer, Comparable> getResults() {
        Map<Integer, Comparable> result = new HashMap<Integer, Comparable>();
        result.put(1, 10);
        result.put(2, 30);
        result.put(3, 30);

        return result;
    }
}

/**
 * Evaluator evaluates the results against the given groundTruth. All it needs
 * to know about results, is that they are comparable amongst themselves.
 */
interface IEvaluator {
    public double evaluate(Map<Integer, Comparable> results,
            Map<Integer, Double> groundTruth);
}

/**
 * This is example of an evaluator (a metric) -- Kendall's Tau B.
 */
class KendallTauB implements IEvaluator {
    @Override
    public double evaluate(Map<Integer, Comparable> results,
            Map<Integer, Double> groundTruth) {

        int concordant = 0, discordant = 0, tiedRanks = 0, tiedCapabilities = 0;

        for (Entry<Integer, Comparable> rank1 : results.entrySet()) {
            for (Entry<Integer, Comparable> rank2 : results.entrySet()) {
                if (rank1.getKey() < rank2.getKey()) {
                    final Comparable r1 = rank1.getValue();
                    final Comparable r2 = rank2.getValue();
                    final Double c1 = groundTruth.get(rank1.getKey());
                    final Double c2 = groundTruth.get(rank2.getKey());

                    final int rankDiff = r1.compareTo(r2);
                    final int capDiff = c1.compareTo(c2);

                    if (rankDiff * capDiff > 0) {
                        concordant++;
                    } else if (rankDiff * capDiff < 0) {
                        discordant++;
                    } else {
                        if (rankDiff == 0)
                            tiedRanks++;

                        if (capDiff == 0)
                            tiedCapabilities++;
                    }
                }
            }
        }

        final double n = results.size() * (results.size() - 1d) / 2d;

        return (concordant - discordant)
                / Math.sqrt((n - tiedRanks) * (n - tiedCapabilities));
    }
}

/**
 * The simulator class that queries the producer and them conveys results to the
 * evaluator.
 */
public class Simulator {
    public static void main(String[] args) {
        Map<Integer, Double> groundTruth = new HashMap<Integer, Double>();
        groundTruth.put(1, 1d);
        groundTruth.put(2, 2d);
        groundTruth.put(3, 3d);

        List<IProducer> producerImplementations = lookUpProducers();
        List<IEvaluator> evaluatorImplementations = lookUpEvaluators();

        IProducer producer = producerImplementations.get(1); // pick a producer
        IEvaluator evaluator = evaluatorImplementations.get(0); // pick an evaluator
        // Notice that this class should NOT know what actually comes from
        // producers (besides that is comparable)
        Map<Integer, Comparable> results = producer.getResults();
        double score = evaluator.evaluate(results, groundTruth);

        System.out.printf("Score is %.2f\n", score);
    }

    // Methods below are for demonstration purposes only. I'm actually using
    // ServiceLoader.load(Clazz) to dynamically discover and load classes that
    // implement these interfaces

    public static List<IProducer> lookUpProducers() {
        List<IProducer> producers = new ArrayList<IProducer>();
        producers.add(new ProducerA());
        producers.add(new ProducerB());

        return producers;
    }

    public static List<IEvaluator> lookUpEvaluators() {
        List<IEvaluator> evaluators = new ArrayList<IEvaluator>();
        evaluators.add(new KendallTauB());

        return evaluators;
    }
} 
```

此代码应编译并运行。无论您选择哪种生产者实现，您都应该得到相同的结果 (0.82)。

编译器警告我不要在几个地方使用泛型：

*   在 Simulator 类、IEvaluator 和 IProducer 接口以及实现 IProducer 接口的类中，每当我引用 Comparable 接口时，都会收到以下警告：*Comparable 是原始类型。对泛型 Comparable 的引用应该被参数化*
*   在实现 IEvaluator 的类中，我收到以下警告（在 Map 的值上调用 compareTo() 时）：*类型安全：方法 compareTo(Object) 属于原始类型 Comparable。对泛型 Comparable 的引用应该被参数化*

综上所述，模拟器有效。现在，我想摆脱编译警告。问题是，我不知道如何参数化接口 IEvaluator 和 IProducer，以及如何更改 IProducer 和 IEvaluator 的实现。

我有一些限制：

*   我不知道生产者将返回的 Map 中值的类型。但我知道，它们都将属于同一类型，并且它们将实现 Comparable 接口。
*   类似地，IEvaluator 实例不需要知道任何关于正在评估的结果，除了它们是相同类型并且它们是可比较的（IEvaluator 实现需要能够调用 compareTo() 方法。）。
*   我必须让 Simulator 类摆脱这种“可比较”的困境——它不需要知道关于这些类型的任何信息（除了属于同一类型，这也是可比较的）。它的工作是简单地将结果从生产者传递给评估者。

有任何想法吗？

## 编辑和修订版本

使用下面答案中的一些想法，我到了这个阶段，它编译和运行没有警告，也不需要使用 SuppressWarnings 指令。这与 Eero 建议的非常相似，但主要方法有点不同。

```
package com.test;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

/**
 * Producers produce results. I do not care what is their type, but the values
 * in the map have to be comparable amongst themselves.
 */
interface IProducer<T extends Comparable<T>> {
    public Map<Integer, T> getResults();
}

/**
 * This implementation ranks items in the map by using Strings.
 */
class ProducerA implements IProducer<String> {
    @Override
    public Map<Integer, String> getResults() {
        Map<Integer, String> result = new HashMap<Integer, String>();
        result.put(1, "A");
        result.put(2, "B");
        result.put(3, "B");

        return result;
    }
}

/**
 * This implementation ranks items in the map by using integers.
 */
class ProducerB implements IProducer<Integer> {
    @Override
    public Map<Integer, Integer> getResults() {
        Map<Integer, Integer> result = new HashMap<Integer, Integer>();
        result.put(1, 10);
        result.put(2, 30);
        result.put(3, 30);

        return result;
    }
}

/**
 * Evaluator evaluates the results against the given groundTruth. All it needs
 * to know about results, is that they are comparable amongst themselves.
 */
interface IEvaluator {
    public <T extends Comparable<T>> double evaluate(Map<Integer, T> results,
            Map<Integer, Double> groundTruth);
}

/**
 * This is example of an evaluator (a metric) -- Kendall's Tau B.
 */
class KendallTauB implements IEvaluator {
    @Override
    public <T extends Comparable<T>> double evaluate(Map<Integer, T> results,
            Map<Integer, Double> groundTruth) {
        int concordant = 0, discordant = 0, tiedRanks = 0, tiedCapabilities = 0;

        for (Entry<Integer, T> rank1 : results.entrySet()) {
            for (Entry<Integer, T> rank2 : results.entrySet()) {
                if (rank1.getKey() < rank2.getKey()) {
                    final T r1 = rank1.getValue();
                    final T r2 = rank2.getValue();
                    final Double c1 = groundTruth.get(rank1.getKey());
                    final Double c2 = groundTruth.get(rank2.getKey());

                    final int rankDiff = r1.compareTo(r2);
                    final int capDiff = c1.compareTo(c2);

                    if (rankDiff * capDiff > 0) {
                        concordant++;
                    } else if (rankDiff * capDiff < 0) {
                        discordant++;
                    } else {
                        if (rankDiff == 0)
                            tiedRanks++;

                        if (capDiff == 0)
                            tiedCapabilities++;
                    }
                }
            }
        }

        final double n = results.size() * (results.size() - 1d) / 2d;

        return (concordant - discordant)
                / Math.sqrt((n - tiedRanks) * (n - tiedCapabilities));
    }
}

/**
 * The simulator class that queries the producer and them conveys results to the
 * evaluator.
 */
public class Main {
    public static void main(String[] args) {
        Map<Integer, Double> groundTruth = new HashMap<Integer, Double>();
        groundTruth.put(1, 1d);
        groundTruth.put(2, 2d);
        groundTruth.put(3, 3d);

        List<IProducer<?>> producerImplementations = lookUpProducers();
        List<IEvaluator> evaluatorImplementations = lookUpEvaluators();

        IProducer<?> producer = producerImplementations.get(0);
        IEvaluator evaluator = evaluatorImplementations.get(0);

        // Notice that this class should NOT know what actually comes from
        // producers (besides that is comparable)
        double score = evaluator.evaluate(producer.getResults(), groundTruth);

        System.out.printf("Score is %.2f\n", score);
    }

    // Methods below are for demonstration purposes only. I'm actually using
    // ServiceLoader.load(Clazz) to dynamically discover and load classes that
    // implement these interfaces
    public static List<IProducer<?>> lookUpProducers() {
        List<IProducer<?>> producers = new ArrayList<IProducer<?>>();
        producers.add(new ProducerA());
        producers.add(new ProducerB());

        return producers;
    }

    public static List<IEvaluator> lookUpEvaluators() {
        List<IEvaluator> evaluators = new ArrayList<IEvaluator>();
        evaluators.add(new KendallTauB());

        return evaluators;
    }
} 
```

关键区别似乎在于 main 方法，目前看起来像这样。

```
 public static void main(String[] args) {
        Map<Integer, Double> groundTruth = new HashMap<Integer, Double>();
        groundTruth.put(1, 1d);
        groundTruth.put(2, 2d);
        groundTruth.put(3, 3d);

        List<IProducer<?>> producerImplementations = lookUpProducers();
        List<IEvaluator> evaluatorImplementations = lookUpEvaluators();

        IProducer<?> producer = producerImplementations.get(0);
        IEvaluator evaluator = evaluatorImplementations.get(0);

        // Notice that this class should NOT know what actually comes from
        // producers (besides that is comparable)
        double score = evaluator.evaluate(producer.getResults(), groundTruth);

        System.out.printf("Score is %.2f\n", score);
    } 
```

这行得通。但是，如果我将代码更改为：

```
 public static void main(String[] args) {
        Map<Integer, Double> groundTruth = new HashMap<Integer, Double>();
        groundTruth.put(1, 1d);
        groundTruth.put(2, 2d);
        groundTruth.put(3, 3d);

        List<IProducer<?>> producerImplementations = lookUpProducers();
        List<IEvaluator> evaluatorImplementations = lookUpEvaluators();

        IProducer<?> producer = producerImplementations.get(0);
        IEvaluator evaluator = evaluatorImplementations.get(0);

        // Notice that this class should NOT know what actually comes from
        // producers (besides that is comparable)

        // Lines below changed
        Map<Integer, ? extends Comparable<?>> ranks = producer.getResults();            
        double score = evaluator.evaluate(ranks, groundTruth);

        System.out.printf("Score is %.2f\n", score);
} 
```

该死的东西甚至不会编译，说：*绑定不匹配：IEvaluator 类型的通用方法评估（地图，地图）不适用于参数（地图>，地图）。推断类型 capture#3-of ? extends Comparable 不是有界参数的有效替代品 >*

这对我来说完全很奇怪。如果我调用 evaluator.evaluate(producer.getResults(), groundTruth)，代码就可以工作。但是，如果我首先调用 producer.getResults() 方法，并将其存储到一个变量中，然后使用该变量 (evaluator.evaluate(ranks, groundTruth)) 调用评估方法，我会得到编译错误（不管该变量的类型）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:45:38.070

您需要指定对象愿意将自己与哪些类型的事物进行比较。就像是：

```
import java.util.Map;
import java.util.HashMap;

interface IProducer<T extends Comparable<? super T>> {
    public Map<Integer, T> getResults();
}

interface IEvaluator {
    public <T extends Comparable<? super T>> double evaluate(Map<Integer, T> results,
                                                             Map<Integer, Double> groundTruth);
}

public class Main {
  public static void main(String[] args) {
    IProducer<String> producer = null;
    IEvaluator evaluator = null;
    Map<Integer, String> results = producer.getResults();
    double score = evaluator.evaluate(results, new HashMap<Integer, Double>());
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:00:05.230

我已经在下面发布了我的答案。一些注意事项：

*   制片人显然知道自己的类型
*   在调用该方法之前，Evaluator 不知道它正在处理什么
*   producerImplementations 包含几种不同的类型，因此当您实际选择其中一种时，您最终会得到一种类型。

下面的代码：

```
package com.test;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;

/**
 * Producers produce results. I do not care what their actual type is, but the
 * values in the map have to be comparable amongst themselves.
 */
interface IProducer<T extends Comparable<T>> {
    public Map<Integer, T> getResults();
}

/**
 * This example implementation ranks items in the map by using Strings.
 */
class ProducerA implements IProducer<String> {
    @Override
    public Map<Integer, String> getResults() {
        Map<Integer, String> result = new HashMap<Integer, String>();
        result.put(1, "A");
        result.put(2, "B");
        result.put(3, "B");

        return result;
    }
}

/**
 * This example implementation ranks items in the map by using integers.
 */
class ProducerB implements IProducer<Integer> {
    @Override
    public Map<Integer, Integer> getResults() {
        Map<Integer, Integer> result = new HashMap<Integer, Integer>();
        result.put(1, 10);
        result.put(2, 30);
        result.put(3, 30);

        return result;
    }
}

/**
 * Evaluator evaluates the results against the given groundTruth. All it needs
 * to know about results, is that they are comparable amongst themselves.
 */
interface IEvaluator {
    public <T extends Comparable<T>> double evaluate(Map<Integer, T> results,
            Map<Integer, Double> groundTruth);
}

/**
 * This is example of an evaluator, metric Kendall Tau-B. Don't bother with
 * semantics, all that matters is that I want to be able to call
 * r1.compareTo(r2) for every (r1, r2) that appear in Map<Integer, T> results.
 */
class KendallTauB implements IEvaluator {
    @Override
    public <T extends Comparable<T>> double evaluate(Map<Integer, T> results,
            Map<Integer, Double> groundTruth) {
        int concordant = 0, discordant = 0, tiedRanks = 0, tiedCapabilities = 0;

        for (Entry<Integer, T> rank1 : results.entrySet()) {
            for (Entry<Integer, T> rank2 : results.entrySet()) {
                if (rank1.getKey() < rank2.getKey()) {
                    final T r1 = rank1.getValue();
                    final T r2 = rank2.getValue();
                    final Double c1 = groundTruth.get(rank1.getKey());
                    final Double c2 = groundTruth.get(rank2.getKey());

                    final int ranksDiff = r1.compareTo(r2);
                    final int actualDiff = c1.compareTo(c2);

                    if (ranksDiff * actualDiff > 0) {
                        concordant++;
                    } else if (ranksDiff * actualDiff < 0) {
                        discordant++;
                    } else {
                        if (ranksDiff == 0)
                            tiedRanks++;

                        if (actualDiff == 0)
                            tiedCapabilities++;
                    }
                }
            }
        }

        final double n = results.size() * (results.size() - 1d) / 2d;

        return (concordant - discordant)
                / Math.sqrt((n - tiedRanks) * (n - tiedCapabilities));
    }
}

/**
 * The simulator class that queries the producer and them conveys results to the
 * evaluator.
 */
public class Simulator {
    public static void main(String[] args) {
        // example of a ground truth
        Map<Integer, Double> groundTruth = new HashMap<Integer, Double>();
        groundTruth.put(1, 1d);
        groundTruth.put(2, 2d);
        groundTruth.put(3, 3d);

        // dynamically load producers
        List<IProducer<?>> producerImplementations = lookUpProducers();

        // dynamically load evaluators
        List<IEvaluator> evaluatorImplementations = lookUpEvaluators();

        // pick a producer
        IProducer<?> producer = producerImplementations.get(0);

        // pick an evaluator
        IEvaluator evaluator = evaluatorImplementations.get(0);

        // evaluate the result against the ground truth
        double score = evaluator.evaluate(producer.getResults(), groundTruth);

        System.out.printf("Score is %.2f\n", score);
    }

    // Methods below are for demonstration purposes only. I'm actually using
    // ServiceLoader.load(Clazz) to dynamically discover and load classes that
    // implement interfaces IProducer and IEvaluator
    public static List<IProducer<?>> lookUpProducers() {
        List<IProducer<?>> producers = new ArrayList<IProducer<?>>();
        producers.add(new ProducerA());
        producers.add(new ProducerB());

        return producers;
    }

    public static List<IEvaluator> lookUpEvaluators() {
        List<IEvaluator> evaluators = new ArrayList<IEvaluator>();
        evaluators.add(new KendallTauB());

        return evaluators;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T00:19:37.487

警告只是要求你做这样的事情吗？

```
public interface IProducer<T extends Comparable<? super T>> {
    public Map<Integer, T> getResults();
} 
```

每当我实现*Comparable*（或扩展*Comparator*）时，我总是做这样的事情：

```
public class Dog implements Comparable<Dog> {

    private String breed;

    public String getBreed() {
        return breed;
    }

    public void setBreed(String s) {
        breed = s;
    }

    public int compareTo(Dog d) {
        return breed.compareTo(d.getBreed());
    }

} 
```

请注意，当*Comparable*被参数化时，无需在*compareTo中使用对象。*

# java - 从 DataInputStream 中读取一个 int[]

> ID：12188185
> 
> 赞同：2
> 
> 时间：2012-08-30T00:07:27.340
> 
> 标签：java, file-io, java-io, datainputstream

我正在寻找一种从 DataInputStream 读取大量整数并将它们加载到数组中的方法。我确切地知道我需要阅读多少`int`s，但是如果有一种比简单迭代更简洁的方法会很好。

已经有一种方法可以使用字节数组执行此操作，只需使用该`DataInputStream#read(byte[])`方法，但没有等效的`int[]`. 我显然可以通过创建一个长度乘以四的字节数组将数据读入一个字节数组，但我确实需要`int`s 中的数据。

在我看来，我可以使用三种可能性：

1.  不知何故，将数据直接加载到`int[]`.
2.  以某种方式将 a`byte[]`转换为`int[]`.
3.  遍历数组并使用`readInt()`.

虽然前两种解决方案更受欢迎，但我目前也不知道有什么办法。有没有简单的方法可以在没有迭代的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:55:12.817

看起来这样做的唯一方法是一个简单的 for 循环和使用`readInt()`. 这就是我最终选择做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:21:32.323

您可以尝试使用 a `ByteBuffer`，它能够将数据留在操作系统内存中，因此读取速度非常快。它还有一个`getInt()`方法，应该允许您直接读取整数并将它们放入您的数组中。

# ruby - System::Process.new 的由来是什么？

> ID：12188187
> 
> 赞同：0
> 
> 时间：2012-08-30T00:07:35.390
> 
> 标签：ruby, god

它的起源`Process.new`和记录在哪里？我查看了流程模块的[Ruby 文档](http://www.ruby-doc.org/core-1.9.3/Process.html)，但无法弄清楚它是如何声明的。

我试图复制的代码位于[lib/god/conditions/memory_usage.rb:66](https://github.com/mojombo/god/blob/v0.12.1/lib/god/conditions/memory_usage.rb#L66)的 Ruby God gem 中：

```
process = System::Process.new(self.pid)
@timeline.push(process.memory) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:33:21.783

`System::Process`不是 Ruby 的一部分，它来自上帝（宝石）本身。如果需要，您可以[查看其来源](https://github.com/mojombo/god/blob/v0.12.1/lib/god/system/process.rb)。

它`System::Process`在您引用的文件中是可引用的，因为您已经在`God`模块中，因此 Ruby 在该命名空间中解析它。

# java - GifDecoder getFrameCount() 总是返回 0

> ID：12188193
> 
> 赞同：0
> 
> 时间：2012-08-30T00:08:06.573
> 
> 标签：java, android, gif

我正在尝试使用 GifDecoder 在我的 android 应用程序中播放 gif 动画，但由于某种原因，GifDecoder getFrameCount() 总是返回 0，这实际上意味着只有 1 帧并且 gif 不是动画而是图片。我已经尝试了几个 gif 文件，这些文件都是动画的，并且结果都相同。可能是什么问题？有什么建议么？

这是相关代码的一小部分：

```
InputStrem stream = res.openRawResource(R.drawable.smile);
GifDecoder decoder = new GifDecoder();
decoder.read(stream);
int i = decoder.getFrameCount(); 
```

我总是等于 0

即使在 mac 中打开 gif 文件，我也可以看到它的所有帧。所以现在问题出在 gif 文件上。

# django - 在 Django 中更改当前时区似乎不起作用

> ID：12188194
> 
> 赞同：1
> 
> 时间：2012-08-30T00:08:08.697
> 
> 标签：django

我想允许用户更改时区。我已阅读并遵循[文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#selecting-the-current-time-zone)

我可以看到下拉列表，我可以选择不同的时区并单击设置。一切都设置好了，但它没有效果。它仍将欧洲/伦敦显示为页面上的时区。我可能错过了什么？

**我的中间件：**

```
from django.utils import timezone

class TimezoneMiddleware(object):
    def process_request(self, request):
        tz = request.session.get('django_timezone')
        if tz:
            timezone.activate(tz) 
```

**网址：**

```
(r'^timezone/', set_timezone),
(r'^$', main_page_view), 
```

**看法：**

```
def set_timezone(request):
    if request.method == 'POST':
        request.session[request.session.session_key] = pytz.timezone(request.POST['timezone'])
        return redirect(request.path)
    else:
        return redirect('/') #Thats quite annoying that I have to redirect it afterwards, how can I stay on the same page?

def main_page_view(request): 
    ...
    variables = {'timezones': pytz.common_timezones}
    return render(request, 'main_page.html', variables) 
```

**base.html**

```
{% load tz %}{% load url from future %}
    <form action="/timezone/" method="POST">
        {% csrf_token %}
        <label for="timezone">Time zone:</label>
        <select name="timezone">
            {% for tz in timezones %}
            <option value="{{ tz }}"{% if tz == TIME_ZONE %} selected="selected"{% endif %}>{{ tz }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Set" />
    </form> 
```

**Main_page.html**

```
{% load tz %}
{% get_current_timezone as TIME_ZONE %}
{{TIME_ZONE}} 
```

**设置：**

```
TIME_ZONE = 'Europe/London'
USE_TZ = True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:00:57.063

```
request.session.session_key 
```

应该替换为

```
'django_timezone' 
```

# windows-server-2008 - 更改物理路径会显示空白主页

> ID：12188203
> 
> 赞同：0
> 
> 时间：2012-08-30T00:09:22.723
> 
> 标签：windows-server-2008, iis-7.5

我首先在 serverfault 上尝试了这个，认为这是一个配置错误，但是一个测试（最后一段旁边）让我相信这是我的某种编程错误

我有两个网站 ASP Classic - www.company.com 和 www.companytesting.com。

在每年的这个时候，company.com 指向名为 website2012 的文件夹，companytesting.com 指向名为 website2013 的文件夹。这两个文件夹的内容几乎相同，只是我们的季节变化的微小变化（我今天应该这样做 - 哈哈）。

直到几周前，我还在运行 Windows Server 2003。要更新“实时”网站，我会复制测试站点文件夹，并将其重命名为 website2013R1，然后将测试站点指向那里，然后指向现场网站在 website2012。

我们现在有 Windows Server 2008 R2 64。（有人帮我将网站迁移到新服务器。）

companytesting.com 网站，当我将它指向 website2013R1 时，它运行良好。

company.com 网站，当我将它指向 website2013 （之前为 companytesting.com 网站工作）时，它给出了一个空白页面。（即查看源代码 = 那里什么都没有。）发生这种情况时，失败的请求日志中没有任何内容。

我可以使用 IIS7.5 中的“探索”按钮/链接（右上角）并查看那里的所有文件。如果我使用浏览按钮（一般情况下或在 index.asp 页面上），我会再次获得空白页面。

关于这些设置的一个奇怪之处在于 companytesting.com 使用登录名（我认为这是 Windows 身份验证 - 它只是员工的单个用户名和密码，并且将 GoogleBots 排除在外）。显然，company.com 没有。但是重定向到 website2013r1 使登录保持在原位。（所以我不太清楚它是附加到文件夹还是站点。更改路径后访问 company.com 站点不会产生密码请求。）

文件夹的权限似乎都是一样的，但显然，我遗漏了一些东西。

**为什么改变物理路径不起作用？**

添加到我在 ServerFault 上发布的文本中 - 我试图快速修复，所以我将所有文件从 Website2013 复制到 Website2012 ......并再次得到一个空白页。将旧的 2012 文件复制回 Website 2012 文件夹解决了该问题。这对我来说毫无意义，因为 A) website2012 文件夹与 website2012 文件夹几乎相同，并且 B) website2013 文件夹在不同的域名下运行膨胀。这显然是我在编程方面所做的事情，但是什么？大多数更改非常小（例如将文本“2012”更改为“2013”​​）。

可能很明显，我对服务器一无所知。我在 2003 年做得很好，但由于这不是我的主要任务，而且我现在被埋没了，所以我几乎没有看过 2008 年。所以当你让我检查一些东西时，我可能会有非常愚蠢的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:36:38.467

问题在于 Win Server 2003 和 Win Server 2008 处理受密码保护的测试站点的方式不同，或者至少是我聘请的顾问设置它的方式。

问题是`web.config`文件在 website2012 和 website2013 文件夹之间变化。对开发站点的访问在 web.config 文件中受到限制，并且包含以下行：

```
 <remove users="*" roles="" verbs="" /> 
```

由于现场网站没有附加用户名/密码，它没有弹出用户名密码框，只是给了我一个空白页。

我`web.config`将“旧”网站中的内容放到了 website2013 文件中，问题就解决了。

（奇怪的是回答我自己的问题，但我讨厌在寻找问题的解决方案时遇到未回答的帖子。）

# java - 使用 Spring MessageListener 分组消费消息？

> ID：12188204
> 
> 赞同：2
> 
> 时间：2012-08-30T00:09:23.100
> 
> 标签：java, spring, jms, activemq

我有一个 spring 应用程序，我想使用[JMS 消息组](http://activemq.apache.org/message-groups.html)来处理特定块中的 JMS 消息（以及相同的事务等）。基本上说我有 5 个相关事件，我有一个`JMSTemplate`以相同`JMSXGroupID`和连续的`JMSXGroupSeq`值发送它们。

然后我`MessageProcessorService`在 Spring 中定义了一个看起来像这样的东西：

```
<bean id="messageProcessorService" class="x.y.z.MessageProcessorService"/>
<jms:listener-container connection-factory="pooledJmsConnectionFactory" concurrency="5" >
    <jms:listener destination="messages.queue" ref="messageProcessorService" />
</jms:listener-container> 
```

我`MessageProcessorService`的是标准的，简单的：

```
@Service
public class MessageProcessorService implements MessageListener {

public void onMessage(Message msg) { ... }
} 
```

问题是，因为 onMessage 一次只能收到 1 条消息。如何获取特定组中的所有 5 条消息，然后开始处理它们？

我知道我可以使用负值`JMSXGroupSeq`来标记组的结束，然后我想我可以保留一小部分消息并检查消息`JMSXGroupSeq`，当它是 -1 时处理整个组，但这似乎有点hacky，不确定它是否是线程安全的（我肯定需要并行处理多个线程）。

以前在 Spring/JMS/ActiveMQ 中还有其他人做过类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T18:55:35.547

为了回答我自己的问题，我找到[了这种方法](http://sleeplessinslc.blogspot.com/2010/04/batchmessagelistenercontainer-using.html)并做了大致相似的事情。但它并不漂亮。我认为从长远来看，我们可能不得不放弃 MessageListenerContainer 并使用直接 JMS api 推出我们自己的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:46:40.190

好问题。虽然消息组对于某些任务非常有用，但它们并没有将这种优势映射到消息侦听器上。

您可以采用您的方法，在消息中保留一个列表。如果您在原型范围内创建侦听器 bean，则线程安全不会成为问题。

```
<bean id="messageProcessorService" class="x.y.z.MessageProcessorService" scope="prototype"/> 
```

[http://static.springsource.org/spring/docs/3.0.7.RELEASE/reference/beans.html#beans-factory-scopes-prototype](http://static.springsource.org/spring/docs/3.0.7.RELEASE/reference/beans.html#beans-factory-scopes-prototype)

您只需要保留一些在课堂上收到的消息的内部列表，它们对于该线程将是唯一的。

这在一定程度上取决于您的交易要求。您是否需要围绕整个消息组提交事务？然后，您需要跟踪何时提交和何时不提交。IBM在清单 5 中做了一个示例（虽然没有使用 ActiveMQ）。它不是 Spring，而是普通的[MDB](http://www.ibm.com/developerworks/websphere/library/techarticles/0602_currie/0602_currie.html)。不能说它与 ActiveMQ 的工作原理相同，所以我不保证。

# php - MYSQL IN() 函数有问题

> ID：12188209
> 
> 赞同：0
> 
> 时间：2012-08-30T00:10:22.437
> 
> 标签：php, mysql, pear

我正在为一个站点构建一个动态新闻应用程序。新闻将被分成类别，然后可能包含子类别（可能包含子类别）和新闻文章。我创建了一个递归函数来返回某个类别的所有子类别的所有类别 ID。我想运行一个查询来获取其类别在递归函数返回的集合中的所有新闻帖子。

当我尝试使用它时（我正在使用 PEAR DB）

```
//$myReturnedIDs is a comma delimited list of ids. 5,6,7,8,10,12

$oPrep = $oConn->prepare("SELECT NewsID FROM SiteNews WHERE NewsCategory IN (?)");

$oRes = $oConn->execute($oPrep, array($myReturnedIDs)); 
```

结果查询如下所示：

```
SELECT NewsID FROM SiteNews WHERE NewsCategory IN('5,6,7,8,10,12') 
```

虽然我需要它看起来像：

```
SELECT NewsID FROM SiteNews WHERE NewsCategory IN(5,6,7,8,10,12) 
```

现在，我意识到我可以在准备语句中填充查询的那部分，但我觉得这会导致一些可能的攻击漏洞。我是否过于谨慎，因为数据不是用户生成的？有什么办法可以使这项工作？我的另一个想法是添加一个？对于每个 ID，金额将在准备语句之前确定（在获取所有 ID 之后），但这对我来说感觉很笨拙。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:15:59.033

我猜这`$myReturnedIDs`是一个逗号分隔的*字符串*。所以这：

```
array($myReturnedIDs) 
```

产生一个单元素数组：

```
["5,6,7,8,10,12"] 
```

如果是这种情况，那么您想使用[explode](http://php.net/manual/en/function.explode.php)来制作您想要的数组：

```
$oRes = $oConn->execute($oPrep, explode(",", $myReturnedIDs)); 
```

希望有帮助！

# ruby - Mongoid 给出未初始化的常量 Mongo

> ID：12188219
> 
> 赞同：2
> 
> 时间：2012-08-30T00:12:09.957
> 
> 标签：ruby, mongodb, mongoid

我正在尝试使用 mongoid 但它输出此错误：

> 未初始化的常量“Mongo”

这是我的代码：

```
require "mongoid"

Mongoid.configure do |config|
    config.master = Mongo::Connection.new("localhost",27017).db("arthist")
end

class Artist
    include Mongoid::Document
    field :name, type: String
end 

a = Artist.create(name: "hoge") 
```

你有什么主意吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T15:14:02.537

`mongo`在您的 Gemfile 中包含 gem并重新启动它应该可以解决问题的服务器。

# mysql - 具有多个插入的预处理语句与常规查询

> ID：12188221
> 
> 赞同：4
> 
> 时间：2012-08-30T00:12:32.020
> 
> 标签：mysql, sql, database

如果你会考虑下表

**table_A** (id (PK), value1, value2)

如果我要插入一组数据，例如：(1,5), (1,3), (3,5)

我可以执行如下查询：

`INSERT INTO table_A (value1, value2) VALUES (1,5), (1,3), (3,5)`

这会奏效。但是，有人告诉我准备好的陈述会更好。调查准备好的陈述似乎我必须做这样的事情

```
$stmt = $dbh->prepare("INSERT INTO table_A (value1, value2) VALUES (?, ?)");
$stmt->bindParam(1, $value1);
$stmt->bindParam(2, $value2);

//for each set of values
$value1 = 1;
$value2 = 5;
$stmt->execute(); 
```

我的问题是，准备好的语句如何比第一种方法更好（性能方面）？一个是单个查询，另一个涉及同一查询的多次执行。第一个查询是否被编译成三个单独的查询或其他什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:19:11.027

当您只插入一次时，准备好的语句本身不会更快。但是，如果您需要多次运行相同的插入，您将节省解析查询和准备查询计划所需的时间。准备好的语句插入将被解析一次，它的计划将被缓存，然后重用于所有后续插入。另一方面，具有多个嵌入值的语句在每次运行新语句时都需要重新处理，从而减慢处理速度。

另一方面，网络往返也很慢。进行额外的往返可能比解析和准备查询计划要慢，因此您应该在以一种或另一种方式做出决定之前进行分析。

# javascript - 如何在 JavaScript 中获取外部“this”引用

> ID：12188222
> 
> 赞同：12
> 
> 时间：2012-08-30T00:12:33.200
> 
> 标签：javascript

所以我有一个类，我们称它为 A。对于这个类，我编写了一些函数，我可以这样调用：

```
var a = new A();
a.getSomething();
a.putSomething();
a.delSomething(); 
```

等等。现在我想我会整理一下，这样它就不会太杂乱，看起来更像这样：

```
a.something.get();
a.something.put();
a.something.del(); 
```

这就是我试图实现这一目标的方式：

```
A.prototype.something = {
  get: function(){...},
  put: function(){...},
  del: function(){...}
}; 
```

但是这些函数（get、put 和 del）仍然需要访问 A 中的常用对象/函数，所以我需要 A 的引用，但我不知道如何实现。

我发现的一个选项是这样的：

```
A.prototype.something = function(){
  var that = this;
  return {
    get: function(){...},
    ...
  };
}; 
```

'that' 将用于那些（get、put 和 del）函数，而不是 'this'。但这意味着我必须以这种方式调用这些函数：

```
a.something().get();
... 
```

这对我来说似乎不太好。那么有没有办法按照我最初计划的方式组织这些事情呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T00:30:13.203

您不能将此添加到原型中，因为`something`成员在所有对象上都不相同 - 在内部，它的方法必须获得外部对象的闭包，这在执行时是不可能获得的。

您需要在构造函数中执行此操作：

```
function A() {
    var that = this;
    this.something = { 
       get: function(){...}, 
       ... 
    };
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T02:31:19.867

> 所以我有一堂课

Javascript没有类。它具有原型继承，可以在有限的范围内模拟类，但纯粹为了模拟类是不值得的。更好地利用内置语言功能，而不是试图让 javascript 模拟其他语言。

所以你有一个构造函数......

> 我写了一些可以这样调用的函数：
> 
> ```
> var a = new A();
> a.getSomething();
> a.putSomething();
> a.delSomething(); 
> ```

大概这些方法都在 A.prototype 上。

> 等等。现在我想我会整理一下，这样它就不会太杂乱，看起来更像这样：
> 
> ```
> a.something.get();
> a.something.put();
> a.something.del(); 
> ```

这并没有减少（对我而言）混乱。我猜有一些常见的事情是由*某物*完成的，它的*get*、*put*等方法想要对*某物**进行*操作。

 **this*的值是通过调用设置的，除了 ES5 绑定之外没有其他方法可以设置它的值。所以被调用的方法必须以*某种*方式访问​​。*其他答案显示了如何使用闭包来做到这一点*，但结果是每个实例都必须有自己的对象和附加方法。

`Something.prototype`以下是类似的，但为了提高效率，去掉了闭包并将方法放在上面：

```
function A(name) {
    this.name = name;
    this.something = new Something(this);
}

function Something(that){
    this.that = that;
}

Something.prototype.get = function() {
    return this.that.name;
}
Something.prototype.put = function(prop, value) {
    this.that[prop] = value;
}

var a = new A('a');

alert(a.something.get());     // a
a.something.put('name', 'z');
alert(a.something.get());     // z 
```

所以你可以有多个*things*，每个都有不同的*put*，*get*等方法。但是介入的*东西*对象实际上只是一个使用更多内存（可能很小）并且需要额外字符的设备。保持*something*方法更简单，`A.prototype`不必键入额外的点 (.)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:43:27.730

```
function A() {
  this.something = this;
}
A.prototype = {
  get: function(){...},
  put: function(){...},
  del: function(){...}
}; 
```

所以：

```
a.something.get();
a.something.put();
a.something.del(); 
```*

# iphone - pushViewController 在 iPad 上崩溃

> ID：12188225
> 
> 赞同：0
> 
> 时间：2012-08-30T00:13:20.813
> 
> 标签：iphone, ios, ipad, crash, pushviewcontroller

我正在做一些非常简单的事情。试图 pushViewController。它在 iPhone 上运行良好，但在 iPad 上，它崩溃了！信号：

```
libsystem_kernel.dylib`__pthread_kill:
0x35d85324:  mov    r12, #328
0x35d85328:  svc    #128
0x35d8532c:  blo    0x35d85344                ; __pthread_kill + 32
0x35d85330:  ldr    r12, [pc, #4]             ; __pthread_kill + 24
0x35d85334:  ldr    r12, [pc, r12]
0x35d85338:  b      0x35d85340                ; __pthread_kill + 28
0x35d8533c:  stmibeqr4, {r5, r6, r7, r10, r11}
0x35d85340:  bx     r12
0x35d85344:  bx     lr 
```

有什么想法吗？谢谢！

```
Principal *cvc;

NSString *deviceType = [UIDevice currentDevice].model;
if([deviceType isEqualToString:@"iPhone"] || [deviceType isEqualToString:@"iPod touch"]) {
    cvc = [[Principal alloc] initWithNibName:@"Principal" bundle:nil];
} else {
    cvc = [[Principal alloc] initWithNibName:@"Principal_iPad" bundle:nil];
}

[cvc setImg:flippedImage];

if([deviceType isEqualToString:@"iPhone"] || [deviceType isEqualToString:@"iPod touch"]) {

    [self.navigationController pushViewController:cvc animated:YES];

} else {

    [self.navigationController pushViewController:cvc animated:YES];

}

[cvc release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:24:09.703

我认为检查 UI Interface Idiom 要容易得多：

```
 Principal *cvc;
    if(UI_USER_INTERFACE_IDIOM() = UIUserInterfaceIdiomPhone) {
        cvc = [[Principal alloc] initWithNibName:@"Principal" bundle:nil];
    } else {
        cvc = [[Principal alloc] initWithNibName:@"Principal_iPad" bundle:nil];
    }
    [cvc setImg:flippedImage];
    [self.navigationController pushViewController:cvc animated:YES];
    [cvc release]; 
```

此外，您在最后一条语句的两种情况下都在做同样的事情`if`，因此您可以像我在代码上所做的那样将其删除。

为了对您有更多帮助，我需要查看崩溃前抛出的实际异常文本。

我可以想象问题是`self.navigationController`在 iPhone 上定义但在 iPad 上没有定义，或者用于 iPad 的初始化程序正在返回`nil`VC，并且推送`nil`视图控制器将引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:23:53.023

这有点不对劲；

```
Principal *cvc;
NSString *deviceType = [UIDevice currentDevice].model;
if([deviceType isEqualToString:@"iPhone"] || [deviceType isEqualToString:@"iPod touch"]) {
    cvc = [[Principal alloc] initWithNibName:@"Principal" bundle:nil];
} else {
    cvc = [[Principal alloc] initWithNibName:@"Principal_iPad" bundle:nil];
    // This should be allocated with the class Principal_iPad not Principal.
} 
```

应该是这样的

```
NSString *deviceType = [UIDevice currentDevice].model;
if([deviceType isEqualToString:@"iPhone"] || [deviceType isEqualToString:@"iPod touch"]) {
    Principal *cvc = [[Principal alloc] initWithNibName:@"Principal" bundle:nil];
    [cvc setImg:flippedImage];
    [self.navigationController pushViewController:cvc animated:YES];
    [cvc release]
} else {
    Principal_iPad *cvc = [[Principal_iPad alloc] initWithNibName:@"Principal_iPad" bundle:nil];
    [cvc setImg:flippedImage];
    [self.navigationController pushViewController:cvc animated:YES];
    [cvc release]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T05:31:05.387

您的 xib 可能有问题，例如某些不存在的连接（通常在您复制 xib 元素并忘记删除选择器等时出现）。您可以通过将以下代码添加到您的 appDelegate 来找到您的堆栈跟踪：

```
void uncaughtExceptionHandler(NSException *exception) {
   NSLog(@"CRASH: %@", exception);
   NSLog(@"Stack Trace: %@", [exception callStackSymbols]);
   // Internal error reporting
} 
```

上面的方法应该是你的第一个`appDelegate.m`

然后，添加`NSSetUncaughtExceptionHandler(&uncaughtExceptionHandler);`为方法中的第一行，`application:didFinishLaunchingWithOptions:`如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSSetUncaughtExceptionHandler(&uncaughtExceptionHandler);//should be the first line
    ....
    ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T04:41:00.453

要获得实际异常，您必须设置`NSZombieEnabled`. 要设置`NSZombieEnabled`转到产品->编辑方案->参数在参数中，您将在此处找到“环境变量”，只需单击`+`符号并添加`NSZombieEnabled`并选中旁边的复选框。然后你可以看到异常。我认为问题可能不在于 NavigationController。它可能在 PricipalViewController 中，只需通过`ViewDidLoad`在 PrincipalViewController 中放置断点来检查它。

# java - 通过 Java 代码获取 P4 上的锁

> ID：12188226
> 
> 赞同：0
> 
> 时间：2012-08-30T00:13:21.610
> 
> 标签：java, perforce

我想通过 Java 代码获得对 P4 分支的锁定。有人知道通过Java实现它吗？

我使用下面的代码：

```
IBranchSpec ibranchSpec = underlyingPerforceOptionsServer .getBranchSpec("//Tools/Patch/bin/");
ibranchSpec.setLocked(true); 
```

这里的问题是`ibranchSpec`包含所有仓库，我不知道为什么。

setLock API 说，它只有在服务器更新完成后才会开始工作。我尝试使用类似的东西：

```
ibranchSpec.Update(); 
```

它抛出异常。有任何想法吗？

```
com.perforce.p4java.exception.RequestException: Error in branch specification.
  You cannot use the default branch view; it is just a sample. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:45:08.553

您描述的行为是因为您正在使用新的分支规范，而不是现有的。

但是您可能会遇到一个常见的混淆，即将分支**规范**与存储库中的一组**文件混淆。**

也就是说，描述 //Tools/Release/bin/... 如何映射到 //Tools/Patch/bin/...的分支**规范**与 //Tools/Patch/bin /中的**文件**集不同...

一般来说，Perforce 工作流程通常不会锁定文件集，因为 Perforce 的全部意义在于允许许多用户同时编辑工作，并通过合并更改来管理冲突解决方案。

但是，如果您有一个更高级别的开发工作流程，您希望控制谁以及何时可以在某些时间检查到存储库的某些部分，这是绝对合理的。

根据我的经验，最好的方法是使用 Perforce**保护**机制：建立一个保护文件，描述存储库的各个部分，以及谁可以提交到哪个部分。使用用户组来描述用户集，并尽量保持您的整体保护表相当简单。

然后，要从一组用户“锁定”或“解锁”存储库的一部分（“分支”），您更新保护表以拒绝（“锁定”）或授予（“解锁”）该组的权限写到那个分支。

这个相关问题在其答案中对该技术进行了很好的描述：[Locking a branch in perforce？](https://stackoverflow.com/questions/678257/locking-a-branch-in-perforce)

# c++ - 使用 Boost.Preprocessor 减少此代码重复

> ID：12188227
> 
> 赞同：3
> 
> 时间：2012-08-30T00:13:26.360
> 
> 标签：c++, boost, boost-preprocessor

考虑以下代码：

```
template<typename T0>
void send( const std::string& func, const T0& t0 )
{
   std::ostringstream s;
   s << func << ": " << t0;
   sendMessage( s.str() );
}

template<typename T0, typename T1>
void send( const std::string& func, const T0& t0, const T1& t1 )
{
   std::ostringstream s;
   s << func << ": " << t0 << "," << t1;
   sendMessage( s.str() );
}

template<typename T0, typename T1, typename T2>
void send( const std::string& func, const T0& t0, const T1& t1, const T2& t2 )
{
   std::ostringstream s;
   s << func << ": " << t0 << "," << t1 << "," << t2;
   sendMessage( s.str() );
} 
```

ETC...

我最多需要 15 个参数。

我只是想知道是否可以使用 Boost.Preprocessor 来简化这种重复，以及我将如何去做。我浏览了文档，但它相当混乱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T23:50:02.790

`boost.preprocessor`可以做这种事情，你可以在这里获得下降教程：[预处理元编程简介](http://www.boostpro.com/mplbook/preprocessor.html)

对于您的具体示例，这是我提出的代码（注意：我只是在预处理器下运行它以检查生成的代码是否符合我的预期，但没有尝试编译代码本身）。

这既使用了`enum_params`有助于生成属性列表的宏，也使用`local_iterate`了允许使用一系列参数扩展宏的宏。如果使用“：”vs“，”处理您的特殊情况，我还有一个宏，用于发送到您的流的第一个参数。

总体而言，当您开始了解如何在其[参考手册](http://www.boost.org/doc/libs/1_52_0/libs/preprocessor/doc/index.html)`boost.preprocessor`中搜索所需功能时变得相对容易，并且在大多数编译器支持可变参数模板之前，它是一个“合理的”替代品。请注意，它在编译时非常密集，因此请谨慎使用。

编辑：虽然我确实认为这是一个相对简单的示例的一般练习，但我确实同意，尽管使用 synek317 建议的伪流类对这个特定示例进行编码将是一个更灵活和“轻量级”的解决方案。再次实现此类流不需要您对所有运算符进行专门化，实际上 boost 再次提供 IOStreams 库来帮助您将类实现为标准 C++ 流（[http://www.boost.org/doc/libs /1_52_0/libs/iostreams/doc/index.html](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/doc/index.html) )

```
#include <boost/preprocessor/iteration/local.hpp>
#include <boost/preprocessor/repetition/enum_params.hpp>
#include <boost/preprocessor/control/if.hpp>

# ifndef MY_SEND_MAX
#  define MY_SEND_MAX 15
# endif

/*
 * macros called through BOOST_PP_REPEAT to generate lists
 * J : I don't know what it is
 * I : the current counter number
 * D : the 3rd argument of BOOST_PP_REPEAT
 */
// Generate the list of arguments after std::string
# define MY_SEND_PARAM(J,I,D) , BOOST_PP_CAT(const T,I) & BOOST_PP_CAT(arg,I)
// Generate the stream's <<s adter the string
# define MY_SEND_STREAM(J,I,D) <<BOOST_PP_IF(I,",",": ")<<BOOST_PP_CAT(arg,I)

/*
 * Macro to call for generating onde function
 * N : the number of arguments
 */
// Create one function with a string and N extra aarguments
# define MY_SEND(N) \           
  template<BOOST_PP_ENUM_PARAMS(N,typename T)>  \
  void send(std::string const &fn BOOST_PP_REPEAT(N,MY_SEND_PARAM,~)) { \
    std::ostringstream s; \
    s<<fn BOOST_PP_REPEAT(N,MY_SEND_STREAM,~); \
    sendMessage(s.str()); \
  }
// End of my macro

/*
 * BOOST_PP local loop to generate all the the function
 */
// What macro to call in the loop
#define BOOST_PP_LOCAL_MACRO(n)   MY_SEND(n)
// do the job form 0 to MY_SEND_MAX 
#define BOOST_PP_LOCAL_LIMITS     (0,MY_SEND_MAX)
// execute the loop
#include BOOST_PP_LOCAL_ITERATE()

// undefine all my stuff
# undef MY_SEND_PARAM
# undef MY_SEND_STREAM
# undef MY_SEND
# undef BOOST_PP_LOCAL_MACRO
# undef BOOST_PP_LOCAL_LIMITS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:38:42.207

15 个论点听起来真是个坏主意。也许您可以创建一个行为类似于流的对象？在您的示例中，您可以轻松地从 ostringstream 继承并添加方法 send() ，我相信可以通过这种方式解决类似的问题，也许使用 operator<< 重载。

预处理器很好，但通常很难调试。

# c - MinGW 编译器不需要函数声明？

> ID：12188230
> 
> 赞同：0
> 
> 时间：2012-08-30T00:13:46.907
> 
> 标签：c, compiler-construction, mingw

我有这两个文件：

```
// first.c
int main(void) {
  putint(3);
} 
```

和

```
// second.c
#include <stdio.h>
void putint(int n) {
  printf("%d",n);
  getchar();
} 
```

当我在 Win XP 下运行 gcc 4.6.1 时：

```
gcc first.c second.c -o program.exe 
```

它没有问题，并将 3 写入标准输出。它不需要`putint`在*first.c*中声明。这怎么可能？这是标准行为吗？

我已经在 MSVC 2008 Express 上对此进行了测试，它仅在声明的情况下运行，如预期的那样。

```
// first.c
void putint(int);
int main(void) {
  putint(3);
} 
```

* * *

**已解决**，感谢提示，这些选项有助于显示警告：

*   -Wimplicit
*   -std=c99 (MinGW 4.6 默认仍使用[gnu90](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gcc/C-Dialect-Options.html#C-Dialect-Options) )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:28:34.030

这是几十年前不应该使用的 C 的遗留“功能”。您应该使用带有设置的编译器，如果您执行此类操作，该编译器会向您发出警告。Gcc 有几个开关，你应该在使用它时指定它们，其中一个会给你一个警告。

编辑：我自己没有使用过 gcc，但您应该检查的开关是 -pedantic、-Wall、-Wextra 和 -std。

接受这一点的编译器假设，根据旧语言定义，由于您认为不适合告诉它，因此函数 a) 返回一个 int 值，b) 因为您将它传递给 int（或者如果您传递它可以提升为 int 的东西）该函数期望该参数是一个 int。

正如@veer 正确指出的那样，这通常应该适用于您的特定情况。然而，在其他情况下，没有原型的函数的隐含假设与函数的实际签名之间的差异会使事情变得繁荣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T01:05:36.563

这不仅适用于 MinGW，而且适用于所有标准版本的 gcc。如前所述，这在 C89 中是合法的；gcc 默认为 'gnu89'（不是 99），它也接受代码而不发出警告。如果您切换到 c99 或 gnu99（或更高版本，例如 c11），默认情况下会收到警告，但仍会编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T02:38:17.663

正如其他人所指出的，这是符合 C 的编译器的标准行为。将文件命名为 .c 部分会将其置于 C 模式。它会有一些有趣的东西，比如“内置函数”（printf() 等）和各种遗留的 C 东西。

不过，我想补充一下我最近经历的其他人所说的话。MS 明确放弃了对 C 超过 C90 的支持，至少可以说他们的 C90 支持很差。我不完全确定标准 ANSI C90 代码库会在较新的 VS 下编译，因为它基本上是禁用了很多东西的 C++ 编译器（而 GCC 实际上有一个 C 编译器）。他们这样做是为了推广 C++。如果你想使用真正的 C，你不能在任何版本的 MS Visual Studio 中真正做到这一点，除非你想在函数的开头声明所有变量等。

# ms-access - 尝试从 Access 表中检索复选框值时收到 Null

> ID：12188233
> 
> 赞同：1
> 
> 时间：2012-08-30T00:14:46.323
> 
> 标签：ms-access, vba, ms-access-2007

我所做的是将复选框附加为查询的附加列，然后用于创建记录集。然后将此记录集分配给组合框控件。

以前，我可以很好地引用组合框中未显示的选定行的列。但是，无论我尝试什么，当我尝试引用这些复选框时，我得到的只是一个空值。

为了显示：

```
Set rs = db.OpenRecordset("SELECT AG.Acttype, AG.ActGroupID, AT.HasLots, AT.IsLotSrce, " _
    & "AT.HasStructs FROM ActivityGroup AG, ActivityType AT WHERE (" _
    & FormatToSQLVal(Me![WizardSubformDisplay].Form![ActLinkedProjInput].Column(1)) _
    & " = AG.ProjectID) AND (AG.Acttype = AT.ActType);")

Set Me![WizardSubformDisplay].Form![ActTypeInput].Recordset = rs 
```

（在这种情况下，还有以下额外的修补，不会对其他不处理复选框的情况造成麻烦）

```
Me![WizardSubformDisplay].Form![ActTypeInput] = Me![ActTypeName]
Me![WizardSubformDisplay].Form![ActTypeInput].Locked = True 
```

（我将组合框设置为特定选项，然后将其锁定）

```
Me![WizardSubformDisplay].Form![ActTypeInput].Column(2),
Me![WizardSubformDisplay].Form![ActTypeInput].Column(3),
Me![WizardSubformDisplay].Form![ActTypeInput].Column(4) 
```

如果选中该框，则所有返回 null，而不是 -1，否则返回 0。

# web-services - 由于可以嗅探请求的参数，API 密钥对 http 毫无价值吗？

> ID：12188242
> 
> 赞同：3
> 
> 时间：2012-08-30T00:15:46.387
> 
> 标签：web-services, security, http, api-key

由于可以嗅探请求的参数，API 密钥对 http 毫无价值吗？它们仅通过 https 可靠吗？即便如此，你不是指望客户小心他们的钥匙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:31:08.427

> 由于可以嗅探请求的参数，API 密钥对 http 毫无价值吗？

不，因为只有在系统管理员对 IT 安全性一无所知的情况下，才能执行嗅探，或者如果您可以捕获传输的流量（这通常非常困难）。此外，还存在诸如 IPSec 之类的技术，可在网络层提供真实性和隐私性。

因此，使用明文身份验证不会提供*零*附加安全性。

> 它们仅通过 https 可靠吗？

这取决于您对“可靠”的定义。往上看。无论如何，使用传输安全可以防止攻击者读取您的通信。如果强制执行 SSL，也可以防止中间人攻击。

> 即便如此，你不是指望客户小心他们的钥匙吗？

当然，您*必须始终*信任您的授权用户。这与 API 密钥或密码或任何东西无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T05:38:14.480

取决于 API 密钥的使用方式。

如果您将 API 密钥分配给开发人员，并且开发人员将 API 密钥作为移动应用程序的一部分分发，或者使用 API 密钥从网页进行 AJAX 调用，那么 API 密钥就毫无意义。任何人都可以嗅到钥匙，而且它不需要任何老练的人在中间攻击。

但是，如果开发人员使用服务器端代码中的 API 密钥，并且您的 API 通过 https 运行，那么这是一种相当安全的技术。

简而言之，安全性在于信任开发人员将 API 密钥保密。就像您希望用户对他们的密码保密一样。

# c++ - VS 2010 未定义编译符号

> ID：12188243
> 
> 赞同：1
> 
> 时间：2012-08-30T00:15:49.300
> 
> 标签：c++, visual-studio-2010

首先，我对 Visual Studio 并不陌生，但对 2010（特别是 2010 Premium）是新手。我正在从早期版本的 VS 迁移几个 C++ 项目。问题是我在项目设置的预处理器定义中定义了一个符号，但它没有在编译中定义。它出现在项目设置的命令行上，但不会出现在构建日志的编译行上。基本上情况如下：

预处理器定义：MY_SYMBOL

命令行：.../D "MY_SYMBOL"...

但构建日志不包括它。

使用它的代码有时是灰色的，有时不是。还定义了其他符号，但这些符号是从早期 VS 版本的项目文件中迁移而来的，它们正确显示在构建日志的编译行中。我添加到预处理器定义中的任何内容都没有真正用于编译。

谢谢

# php - char 'z' 和 FOR 循环

> ID：12188246
> 
> 赞同：13
> 
> 时间：2012-08-30T00:16:09.377
> 
> 标签：php

> **可能重复：**
> [PHP - 错误的字母循环](https://stackoverflow.com/questions/8360736/php-erroneous-alphabet-loop)

PHP代码：

```
for ($i = 'v'; $i <= 'y'; $i++)
        echo $i . ' '; 
```

将打印：

```
v w x y 
```

但：

```
for ($i = 'v'; $i <= 'z'; $i++)
        echo $i . ' '; 
```

将打印：

```
v w x y z aa ab ac ad ae af ag ah ai aj ak al am an ao ap aq ar as at au av aw ax ay az ba bb bc bd be bf bg bh bi bj bk bl bm bn bo bp bq br bs bt bu bv bw bx by bz ca cb cc cd ce cf cg ch ci cj ck cl cm cn co cp cq cr cs ct cu cv cw cx cy cz da db dc dd de df dg dh di dj dk dl dm dn do dp dq dr ds dt du dv dw dx dy dz ea eb ec ed ee ef eg eh ei ej ek el em en eo ep eq er es et eu ev ew ex ey ez fa fb fc fd fe ff fg fh fi fj fk fl fm fn fo fp fq fr fs ft fu fv fw fx fy fz ga gb gc gd ge gf gg gh gi gj gk gl gm gn go gp gq gr gs gt gu gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj pk pl pm pn po pp pq pr ps pt pu pv pw px py pz qa qb qc qd qe qf qg qh qi qj qk ql qm qn qo qp qq qr qs qt qu qv qw qx qy qz ra rb rc rd re rf rg rh ri rj rk rl rm rn ro rp rq rr rs rt ru rv rw rx ry rz sa sb sc sd se sf sg sh si sj sk sl sm sn so sp sq sr ss st su sv sw sx sy sz ta tb tc td te tf tg th ti tj tk tl tm tn to tp tq tr ts tt tu tv tw tx ty tz ua ub uc ud ue uf ug uh ui uj uk ul um un uo up uq ur us ut uu uv uw ux uy uz va vb vc vd ve vf vg vh vi vj vk vl vm vn vo vp vq vr vs vt vu vv vw vx vy vz wa wb wc wd we wf wg wh wi wj wk wl wm wn wo wp wq wr ws wt wu wv ww wx wy wz xa xb xc xd xe xf xg xh xi xj xk xl xm xn xo xp xq xr xs xt xu xv xw xx xy xz ya yb yc yd ye yf yg yh yi yj yk yl ym yn yo yp yq yr ys yt yu yv yw yx yy yz 
```

为什么不简单打印`v w x y z`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T00:18:59.700

因为`aa`小于`z`。它与字母的字母顺序有关。

在行动中看到它：http: [//codepad.org/6sUkkKU5](http://codepad.org/6sUkkKU5)

它停在`yz`之后`zz`评估为假`$i <= 'z';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:27:05.873

那是因为你用过`<="z"`。当`$i == "z"`, 和`$i++`被调用时，php 将其从“z”更改为“aa”，`"aa" <= "z"`因此循环继续。

我希望您只是在寻找“为什么”的答案，而不是在寻找如何编写循环的答案。

无论如何有趣的发现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T00:21:39.497

如果这不是理论；你可以只使用范围

```
foreach (range('v', 'z') as $letter) {
    echo $letter;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T00:35:32.017

因为[增量运算符](http://php.net/manual/en/language.operators.increment.php)以一种方式定义，而[字符串比较](http://php.net/manual/en/language.operators.comparison.php)以另一种方式定义。

# ruby-on-rails - increment_counter 是否间接操纵 lock_version？

> ID：12188249
> 
> 赞同：1
> 
> 时间：2012-08-30T00:16:36.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, optimistic-locking

[increment_counter](http://api.rubyonrails.org/classes/ActiveRecord/CounterCache.html#method-i-increment_counter)是否间接操纵`lock_version`？

我正在测试并发性，我注意到`lock_version`它正在增加。即使，我不是从`ActiveRecord::StaleObjectError`.

[http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html)说

```
"Active Records support optimistic locking if the field lock_version is present." 
```

这是否意味着自动`increment_counter`触发救援`ActiveRecord::StaleObjectError`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:04:23.510

更新记录时，字段 lock_version 总是在保存时递增。假设您有一条 lock_version 为 3 的记录。当您保存它时，它会尝试执行以下操作：

```
UPDATE some_table SET foo = "bar", lock_version = 4 WHERE id = some_id AND lock_version = 3 
```

如果更新的行数为零，则抛出 ActiveRecord::StaleObjectError。本质上，如果更新的行数为零，则意味着另一个请求已经更新了记录。由于这个原因，lock_version 总是递增。

# amazon-simpledb - 从 simpledb 中删除属性/列

> ID：12188255
> 
> 赞同：0
> 
> 时间：2012-08-30T00:17:52.103
> 
> 标签：amazon-simpledb

我有一个 simpledb 列“状态”，我想摆脱它。我怎样才能删除它？我没有看到任何直观的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:25:51.507

由于 SimpleDB 是无模式数据库，因此每个项目可能具有不同的属性集。为了从所有项目中删除特定属性，您将需要包含该属性的所有项目的 itemNames。

如果您决定在 SimpleDB 中模拟一个关系表（通过每个“表”有一个域和每个项目的统一属性），您可以通过一个简单的 select query 检索所有 itemNames `select itemName from domainX`。

获得包含不需要的属性的项目的 itemNames 后，您需要为每个项目调用一次[DeleteAttributes 。](http://docs.amazonwebservices.com/AmazonSimpleDB/latest/DeveloperGuide/SDB_API_DeleteAttributes.html)

# django - 在 django 模板中渲染小部件

> ID：12188256
> 
> 赞同：2
> 
> 时间：2012-08-30T00:18:08.653
> 
> 标签：django, django-templates, django-widget

我有一个很棒的小部件来显示信息，我想在模板中使用它但不使用表单。

我的模板仅用于显示信息，没有要提交的表单。如何在不使用表单的情况下在模板中呈现此小部件。我必须考虑到小部件是用一些用户数据提供的。我可以为此使用模板标签吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T01:35:56.697

我不使用表单的一般方法是不使用应该在表单中的对象。本质上，我会使用我的小部件的 HTML 代码和一个 Mixin（我通常尝试只使用基于类的视图）或一个将为小部件生成正确上下文参数的函数创建一个 django 模板。

这使 HTML 与 HTML 保持一致，逻辑与逻辑保持一致。如果它仅用于显示信息，则不必是小部件。

无论您想要小部件在哪里，请确保在您的视图中调用（功能）或混合（基于类），并且只需 {% include %} 小部件模板，并让模板渲染器完成它的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T01:38:04.767

在您的自定义小部件类中实现小部件的`render`方法。

```
render(self, name, value, attrs=None) 
```

render 方法负责小部件的 html 表示。例如，render 方法`TextInput`返回这段 html：

```
>>> name = forms.TextInput(attrs={'size': 10, 'title': 'Your name',})
>>> name.render('name', 'A name')
  u'<input title="Your name" type="text" name="name" value="A name" size="10"/>' 
```

然后，您可以将 render 方法的返回值添加到视图的上下文中。

```
def my_view(request):
   widget_html = MyCustomWidget.render(...)
   return render_to_response(..., {'widget_html': widget_html}) 
```

现在您可以使用以下方法在模板中显示小部件：

```
{{ widget_html }} 
```

您还可以按照@ablm 的建议编写模板标签。

# dns - 为什么对 Google 服务器和 Google DNS 的 ping 如此之低？

> ID：12188262
> 
> 赞同：0
> 
> 时间：2012-08-30T00:18:18.940
> 
> 标签：dns

我注意到从塞尔维亚 ping 到谷歌 DNS 和 google.com 大约需要 15 毫秒，但谷歌服务器位于加利福尼亚！ [http://www.geoiptool.com/en/?IP=173.194.39.110](http://www.geoiptool.com/en/?IP=173.194.39.110) 我的专用服务器位于德国，我们的国家很近，但 ping 是 43ms。秘诀是什么？我可以以某种方式减少对我的服务器的 ping 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:27:00.787

谷歌在全球拥有大约 900,000 多台服务器。不只是在加利福尼亚。来源： http: [//www.pandia.com/sew/481-gartner.html](http://www.pandia.com/sew/481-gartner.html)

我相信这个问题最好留给[https://serverfault.com/ 。](https://serverfault.com/)您可以在此处通过 stackexchange 查看完整的站点列表：[https ://stackexchange.com/sites](https://stackexchange.com/sites)

# php - 成功上传 jQuery 文件后传递信息和重定向

> ID：12188264
> 
> 赞同：0
> 
> 时间：2012-08-30T00:18:56.427
> 
> 标签：php, jquery, jquery-plugins, file-upload

一般来说，我是 jQuery File Upload 和 Javascript 的新手，并且整天都在研究这个......

我已经在我的网站上设置了 jQuery File Upload。用户将在界面中添加 1 到 10 个之间的任意数量的文件，然后点击“开始上传”按钮开始将文件上传到我的服务器。文件上传完成后，我想将每个文件的文件名以及在该页面上定义的一些其他 PHP 变量（$username、$timestamp 等）传递给本质上是“重定向页面” 。”

在“重定向页面”上，我想列出这些变量中的每一个以及作为用户确认上传的每个文件的名称。我也可以将其中一些数据添加到数据库中。

我尝试在 jquery.fileupload.js 中使用重定向选项，但它似乎忽略了我在那里插入的参数。而且我什至不知道从哪里开始将每个文件名发送到该重定向页面。

有人介意把我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:29:49.753

基本上，您可以`done`为上传功能添加一个参数，在该参数中您可以设置下一个 URL 的查询。

但是你可以通过更安全的会话来做到这一点。

无会话：

```
done: function (e, data) {
    var queryString = 'username=<?php echo $username; ?>&timestamp=<?php echo date('U'); ?>';
    $.each(data.result, function (index, file) {
        queryString += '&file['+index+']='+file.name;
    });
    window.location.href = 'myNextPage.php?'+queryString
} 
```

使用会话，您必须修改处理上传的文件。我相信您的脚本适用于会话，因为您提到了用户名。

`move_uploaded_file`调用后编辑上传类并添加会话数据。这样你的`done`参数应该是：

```
done: function (e, data) {
    window.location.href = 'myNextPage.php';
} 
```

您可以在该页面上阅读会话信息。

# magento - 在子产品视图页面上显示相同的可配置选项

> ID：12188270
> 
> 赞同：1
> 
> 时间：2012-08-30T00:19:11.260
> 
> 标签：magento, configurable-product

我使用 4 个选项（颜色、尺寸厚度、尺寸宽度、尺寸球）设置可配置产品。

我想查看列表中颜色不同的![在此处输入图像描述](../Images/262db5727b37bd1bef2659c8335b3e86.png)项目。

当我单击每个项目时，详细信息页面将相同。（相同的色板和选项视图）

（请检查我的附件。）

当我单击一个项目有蓝色选项时，我想在产品视图页面上看到选择的蓝色。

请让我知道解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:31:41.883

您在那里遇到的有趣挑战 - 产品非常适合 Magento，您最终应该拥有一家比竞争对手更方便的商店，因为您无法按规格、颜色等进行过滤。

至于问题，不要把颜色放在可配置的产品选项中，只要尺寸选项就可以了。要以您想要的方式选择颜色，请将相关产品块移动到主产品页面选项区域。

您的“相关产品”需要缩略图和一些仔细的创建，以便它们保持相同的排序顺序。去做这个：

大概您正在使用遵循某种模式的 SKU，例如 SKU-SIZE1-SIZE2-COLOUR。将一个模块与一个观察者放在一起，该观察者在一些合理的时间表上运行，例如通宵。在该计划任务中，获取按 SKU 分组并按颜色排序的产品集合。对您的颜色进行排序，例如光谱，红色 = 100，橙色 = 200 以及介于两者之间的所有颜色。我的任务是浏览所有产品，找到“相关”产品（相同的型号代码，sku）。然后在该组中创建相关的产品链接。对于上面的示例，如果您考虑了所有六种可配置的主产品，则需要使用六种颜色变体放入 25 个链接 (5^2)。

现在您需要在模板上做一些工作。最初，您可能想要显示任何内容，您还需要将当前选择的产品放在列表中的正确位置，这样当您从一种颜色变体切换到另一种颜色时，颜色缩略图不会跳来跳去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T22:14:44.670

这可以通过使用名为[Pre-Select Colors Plus Swatches](http://cjmcreativedesigns.com/pre-select-colors-plus-swatches.html)的扩展来完成。您可以在此处找到所述扩展的演示：http: [//preselectswatches.cjmcreativedesigns.com/products.html](http://preselectswatches.cjmcreativedesigns.com/products.html)

演示中显示了 6 个产品。一种是可配置产品，另外五种是显示各种颜色选项的简单产品。请注意，每个颜色选项都会加载已选择颜色选项的父产品。如果需要，可配置产品甚至可以从类别列表中隐藏，以便您仅在类别页面上显示颜色选项。

# ssh - SSH 连接在第一次尝试密码后关闭

> ID：12188275
> 
> 赞同：3
> 
> 时间：2012-08-30T00:19:58.453
> 
> 标签：ssh, ldap, redhat

所以，我有一个相当奇怪的问题。我有一个服务器，当我尝试通过 SSH 连接时，如果我第一次尝试输入正确的密码，它会立即关闭连接。但是，如果我在第一次尝试时故意输入错误的密码，然后在第二次或第三次提示时输入正确的密码，它会成功将我登录到计算机。同样，当我尝试使用公钥身份验证时，我会立即关闭连接。但是，如果我为我的密钥文件输入了错误的密码，然后在它恢复到密码身份验证后又输入了另一个错误的密码，只要我在第二个或第三个提示处提供正确的密码，我就可以成功登录。

该机器正在运行 Red Hat Enterprise Linux Server 版本 6.2 (Santiago)，并使用 LDAP 进行身份验证。关于从哪里开始调试这个的任何想法？

# c++ - C++：将 const char* 类型的字符串文字传递给字符串参数

> ID：12188276
> 
> 赞同：5
> 
> 时间：2012-08-30T00:20:04.607
> 
> 标签：c++, string, const-char

我是 C++ 新手，不了解为什么这段代码运行良好：

```
string GetString(string promt)
{
    cout << promt << ": ";
    string temp;
    getline(cin, temp); 
    return temp; 
}

int main()
{
    string firstName = GetString("Enter your first name"); 
    string lastName = GetString("Enter your last name");

    cout<< "Your Name is: " << firstName << " " << lastName; 

    cin.ignore(); 
    cin.get(); 

    return 0;
} 
```

像“bla”这样的字符串文字属于 const char* 类型。至少 auto i = "bla"; 表示 i 的类型为“const char*”。为什么可以将它传递给 GetString-Function，因为该函数需要一个字符串而不是 const char*？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T00:21:34.413

`std::string`有一个[转换构造函数](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)，它接受 a`char const*`并用指针指向的空终止字符串初始化字符串。此构造函数不是`explicit`，因此可以在隐式转换中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:22:43.520

查看 std::string 构造函数。发生的事情是编译器找到了一个接受您的 const char* 的构造函数，并使用它自动将 const char* 转换为 std::string。顺便说一句，我建议`const std::string& prompt`改用。

# c# - XmlSchema 在多线程应用程序中丢失其内容

> ID：12188277
> 
> 赞同：1
> 
> 时间：2012-08-30T00:20:07.633
> 
> 标签：c#, xml, xsd

我有一个`XmlSchema`被实例化为单例的。

```
public static XmlSchema MessageSchema
{
    get
    {
        lock (MessageSchemaLock)
        {
            // If this property is not initialised, initialise it.
            if (messageSchema == null)
            {
                // Read XSD from database.
                string xsd = Database.Configuration.GetValue("MessageBaseXsd");
                using (TextReader reader = new StringReader(xsd))
                {
                    messageSchema = XmlSchema.Read(reader, (sender, e) => {
                        if (e.Severity == XmlSeverityType.Error) throw e.Exception;
                    });
                }
            }
        }
        // Return the property value.
        return messageSchema;
    }
}
private static XmlSchema messageSchema = null;
private static readonly object MessageSchemaLock = new object(); 
```

此模式用于验证进入系统的每个文档。以下方法执行验证。

```
/// <summary>
/// Validates the XML document against an XML schema document.
/// </summary>
/// <param name="xml">The XmlDocument to validate.</param>
/// <param name="xsd">The XmlSchema against which to validate.</param>
/// <returns>A report listing all validation warnings and errors detected by the validation.</returns>
public static XmlSchemaValidationReport Validate(XmlDocument xml, XmlSchema xsd)
{
    XmlSchemaValidationReport report = new XmlSchemaValidationReport();

    xml.Schemas.Add(xsd);
    xml.Validate((sender, e) => { report.Add(e); });
    xml.Schemas.Remove(xsd);

    return report;
} 
```

包含一个“`XmlSchemaValidationReport`列表”和一些辅助方法，没有任何东西可以看到该`XmlSchema`对象。

当我在多个线程上验证消息时，在`Validate`处理前几条消息后该方法失败。它报告说其中一个元素丢失了，尽管我看得很清楚。我的测试是多次发送相同的消息，每次都作为单独的`XmlDocument`. 我仔细检查了该`MessageSchema`属性是唯一设置该`messageSchema`字段的代码。

在验证期间是否以`XmlSchema`某种方式被改变？为什么我的验证失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:13:58.150

`XmlSchema`类不是线程安全的 - 我不确定验证是否试图修改它，但从报告的问题来看，情况似乎如此。你可以试试

```
public static XmlSchemaValidationReport Validate(XmlDocument xml, XmlSchema xsd) 
{ 
    XmlSchemaValidationReport report = new XmlSchemaValidationReport(); 

    lock (xsd) {
      xml.Schemas.Add(xsd); 
      xml.Validate((sender, e) => { report.Add(e); }); 
      xml.Schemas.Remove(xsd); 
    }
    return report; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:34:41.433

感谢您的所有评论和 MiMo 的回答！他们让我找到了解决方案。

似乎虽然我没有调用任何`XmlSchema`公共成员，但`XmlDocument.Validate()`方法是。该`XmlSchema`对象包含非线程安全的状态信息。

我将其更改`MessageShema`为每线程单例。

```
public static XmlSchema MessageSchema { ... }
[ThreadStatic]
private static XmlSchema messageSchema; 
```

它加载模式的次数比我想要的多，但它现在可以工作了。这也意味着我可以删除该`MessageSchemaLock`值，因为现在多个线程无法访问该值。

# jquery - jquery - 如何启用此图像 - 年龄滑块

> ID：12188279
> 
> 赞同：0
> 
> 时间：2012-08-30T00:20:16.270
> 
> 标签：jquery, html

![在此处输入图像描述](../Images/c366171b5539d1138c7c7f3bd43219f1.png)

我正在寻找有关如何使上述图像在 jquery 中工作的建议。

我有两边的两个数字：

```
<span id="startAge">21</span>
<span id="endAge">99</span> 
```

我可以将图像拆分，因此栏和图标是分开的。

问题：

*   我如何让图标沿着栏滑动？
*   当图标滑动时，我将如何改变年龄？
*   我怎样才能防止酒吧交叉 - 例如：年龄：35到30（错误的方式）？

任何其他建议都会很棒 - 只需要一只手来开始这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:27:46.517

查看像 Zoltan 提到的[jqueryui 滑块。](http://jqueryui.com/demos/slider/#range)您可以通过 css 获得所需的功能并习惯于滑块 api 调用。

# iphone - 在 NSDocumentDirectory 和 UIScrollView 中删除

> ID：12188281
> 
> 赞同：2
> 
> 时间：2012-08-30T00:21:06.947
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的代码有问题，可以预览带有`UIScrollView`. 我的图片来自`NSDocumentDirectory`. 虽然我可以从中删除，但是当我从右到左位置开始时，我可以正确地从中删除（就`VIEW`& in而言）。`NSDocumentDirectory`

**问题：** 现在，无论如何我都可以删除，但是我有一些问题。

*   **首先**，虽然我可以删除，但视图没有排列，我的`rearrangeItems:`方法也没有被调用。

*   **其次**，然后在第一次加载时，我可以删除我喜欢的任何方式，但就像我所说`rearrangeItems:`的方法没有被调用，所以他们的名字不是`renamed`。

*   **第三**，是第一次加载，无论如何我都可以删除，但是当我退出应用程序时，我可以删除但我的图像`NSDocu`没有删除。

希望任何人都可以帮助我。下面是我的代码的预览。

```
- (void)addImage:(UIImage *)imageToAdd {
    [_images addObject:imageToAdd];
    [_thumbs addObject:[imageToAdd imageByScalingAndCroppingForSize:CGSizeMake(60, 60)]];

    int row = floor(([_thumbs count] - 1) / 5);
    int column = (([_thumbs count] - 1) - (row * 5));

    UIImage *thumb = [_thumbs objectAtIndex:[_thumbs count]-1];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(column*60+10, row*60+10, 60, 60);
    [button setImage:thumb forState:UIControlStateNormal];
    [button addTarget:self action:@selector(deleteItem:) forControlEvents:UIControlEventTouchUpInside];
    button.tag = [_images count] - 1;
    // This is the title of where they were created, so we can see them move.s
    [button setTitle:[NSString stringWithFormat:@"%d, %d", row, column] forState:UIControlStateNormal];

    [_buttons addObject:button];
    [scrollView addSubview:button];
    // This will add 10px padding on the bottom as well as the top and left.
    [scrollView setContentSize:CGSizeMake(300, row*60+20+60)];
}

    - (void) deleteItem:(id)sender {
        _clickedButton = (UIButton *)sender;
        UIAlertView *saveMessage = [[UIAlertView alloc] initWithTitle:@""
                                                                  message:@"DELETE？"
                                                                 delegate:self
                                                        cancelButtonTitle:@"NO"
                                                        otherButtonTitles:@"YES", nil];
        [saveMessage show];  

    }

    - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    {
        NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"YES"]) {
            NSLog(@"YES was selected.");
        UIButton *button = _clickedButton;
        [button removeFromSuperview];

        [_buttons removeObjectAtIndex:button.tag];

        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%lu.png", button.tag]];           
        [fileManager removeItemAtPath: fullPath error:NULL];

        [self rearrangeItems:button.tag];

        }
    }

    - (void)viewDidAppear:(BOOL)animated
    {
        [_thumbs removeAllObjects];

            for(int i = 0; i <= 100; i++) 
            { 
                NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                NSString *documentsDir = [paths objectAtIndex:0];

                NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d.png", i]]; 
                NSLog(@"savedImagePath=%@",savedImagePath);
                if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
                    [self addImage:[UIImage imageWithContentsOfFile:savedImagePath]]; 
                    //NSLog(@"file exists");
                } 
            } 
            NSLog(@"Count : %d", [_images count]);
    } 
```

* * *

**更新：新的重新排列方法**

```
- (void)rearrangeItems:(int)startIndex {

    for (UIButton *button in _buttons) {
        // Shift the tags down one
        if (button.tag > startIndex) {
             NSLog(@"called here");
            // Version 2 ****************************
            NSFileManager *fileManager = [NSFileManager defaultManager];
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
            NSString *documentsDirectory = [paths objectAtIndex:0];
            NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%lu.png", button.tag]];
            NSData *imageData = [NSData dataWithContentsOfFile:fullPath];
            [fileManager removeItemAtPath: fullPath error:NULL];
            // **************************************

            button.tag -= 1;

            // Version 2 ****************************
            fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%lu.png", button.tag]];
            [imageData writeToFile:fullPath atomically:YES];
            // **************************************

            // Recalculate Position
            int row = floor(button.tag / 5);
            int column = (button.tag - (row * 5));
            // Move
            button.frame = CGRectMake(column*61+8, row*61+8, 60, 60);
            if (button.tag == [_buttons count] - 1) {
                [scrollView setContentSize:CGSizeMake(300, row*61+16+60)];
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T06:14:13.207

用这些替换你的函数

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"YES"]) {
        NSLog(@"YES was selected.");
        UIButton *button = _clickedButton;
        [self rearrangeItems:button.tag];

    }
}

- (void)rearrangeItems:(int)startIndex {

       for (UIButton *button in _buttons) {
       // Shift the tags down one
        if (button.tag > startIndex) {
         NSLog(@"called here");
        [button removeFromSuperview];//remove the button from the scrollview
        [_buttons removeObjectAtIndex:button.tag];//remove the button object from _buttons array

        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%lu.png", button.tag]];
        NSData *imageData = [NSData dataWithContentsOfFile:fullPath];
        [fileManager removeItemAtPath: fullPath error:NULL];

        button.tag -= 1;

        fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%lu.png", button.tag]];
        [imageData writeToFile:fullPath atomically:YES];

        // Recalculate Position
        int row = floor(button.tag / 5);
        int column = (button.tag - (row * 5));
        // Move
        button.frame = CGRectMake(column*61+8, row*61+8, 60, 60);
        if (button.tag == [_buttons count] - 1) {
            [scrollView setContentSize:CGSizeMake(300, row*61+16+60)];
        }
        [scrollView setNeedsDisplay];
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T11:46:28.837

您显示“rearrangeButtons”但从不使用它 - 我认为上面的代码已过时。无论如何，您在这里有一些小问题：

```
[_images objectAtIndex:button.tag];
[_images removeObjectAtIndex:button.tag];
[_images removeObject:button]; 
```

第一个和最后一个语句没有意义，你应该使用的是：

```
[_images removeObjectAtIndex:button.tag];
[self rearrangeButtons:button.tag]; 
```

要向应用程序添加健全性检查，请尝试将此代码添加到重新排列按钮的末尾：

```
int idx = 0;
for (UIButton *button in _buttons) {
  NSLog(@"Going to query button at index %d", idx);
  NSLog(@"Button at index %d is of type %@", idx, NSStringFromClass([button class]);
  // if the button is not a UIView subclass, it won't have tag. If its a dealloced 
  // object then it probably will crash when you ask it its class...
  if(button.tag != idx) NSLog(@"INDEX PROBLEM AT BUTTON ARRAY INDEC %d", idx);
  ++idx;
} 
```

编辑：循环编辑代码以打印出对象类

EDIT2：所以我把你的代码放到了一个新项目[ButtonManager](http://dl.dropbox.com/u/60414145/ButtonManager.zip)中。基本上没问题，但你有一些问题。首先，即使不存在文件，也要对文件名进行索引，因此索引可能会不同步。其次，您对 button.tag 使用 %lu 格式，但这是一个整数，因此您应该使用“%d”。最后，从数组中删除按钮，但不删除图像或缩略图。

如果您下载该项目，您将在需要更改才能正常工作的所有位置看到警告。我不确定为什么按钮索引被破坏了——也许是其他代码。在任何情况下，都会在代码中添加一个数据一致性测试——在你的代码中到处调用它——如果它失败了，那么你就知道你的问题是在最后一个好的测试和最新的失败测试之间。

该项目在启动时会启动“deleteItem：”消息，并且只要您点击“是”，就会继续删除数组中间的项目。

# ruby - 安装 Gherkin 2.1.5 疑难解答

> ID：12188288
> 
> 赞同：7
> 
> 时间：2012-08-30T00:21:37.877
> 
> 标签：ruby, linux, gem, gherkin

我正在尝试安装 Gherkin 2.1.5，嗯，实际上它是[https://github.com/opencongress/opencongress](https://github.com/opencongress/opencongress)的依赖项。我正在使用`bundle install`代码的根目录进行安装，安装了大约 20-30 个包，现在我被困在这个上面了。我在跑步：

```
Linux 3.2.0-27-generic #43-Ubuntu SMP
Linux Mint 13 Maya 
```

这是停止安装后的输出。

```
---snip--(a bunch of usings)
Installing gherkin (2.1.5) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.8 extconf.rb 
checking for main() in -lc... yes
creating Makefile

make
gcc -I. -I. -I/usr/lib/ruby/1.8/x86_64-linux -I. -D_FORTIFY_SOURCE=2  -D_FORTIFY_SOURCE=2 -fPIC -fno-strict-aliasing -g -g -O2  -fPIC  -O0 -Wall -Werror  -c     gherkin_lexer_ar.c
/Users/aslakhellesoy/scm/gherkin/tasks/../ragel/i18n/ar.c.rl: In function ‘CLexer_scan’:
/Users/aslakhellesoy/scm/gherkin/tasks/../ragel/i18n/ar.c.rl:198:29: error: the comparison will always evaluate as ‘true’ for the address of ‘raise_lexer_error’     will never be NULL [-Werror=address]
/Users/aslakhellesoy/scm/gherkin/tasks/../ragel/i18n/ar.c.rl:198:29: error: the comparison will always evaluate as ‘true’ for the address of ‘raise_lexer_error’     will never be NULL [-Werror=address]
cc1: all warnings being treated as errors
make: *** [gherkin_lexer_ar.o] Error 1

Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/gherkin-2.1.5 for inspection.
Results logged to /usr/lib/ruby/gems/1.8/gems/gherkin-2.1.5/ext/gherkin_lexer_ar/gem_make.out 
```

我以前从来没有用过 ruby​​ 编程，所以我对整个安装过程有点脱节。我刚刚弄清楚如何安装红布，并认为我做得很好。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T11:26:43.850

`gem install gherkin -v '2.1.5' -- --with-cflags=-w`

为我做了伎俩。

# django - 在单独的服务器上提供静态文件

> ID：12188290
> 
> 赞同：2
> 
> 时间：2012-08-30T00:21:56.400
> 
> 标签：django, deployment, django-staticfiles

我正在用 django 创建一个网站。没有太多静态内容（可能有 20 张图片和 5-10 个 css/javascript 文档）。

我阅读了在 django中[管理静态文件。](https://docs.djangoproject.com/en/dev/howto/static-files/)我是否需要在单独的服务器上部署我的静态内容，还是因为我的静态内容很少，所以它可以正常工作？目前，我正在使用实际路径名访问我的所有 css 文件和图像，而不是使用“{{STATIC_URL}}”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-15T19:58:08.687

首先你需要使用 {% static %} 来访问静态文件。请参阅[Django 的官方文档](https://docs.djangoproject.com/en/dev/howto/static-files/)。

回答您的问题：您不需要将静态文件保存在单独的服务器上，但强烈建议您这样做。主要原因是性能。它们将直接从 HTTP 服务器提供服务，避免应用服务器上的额外负载。此外，它们将被服务器/客户端缓​​存。

你可以找到很多关于这个主题的文章。另请查看官方文档：[部署静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/deployment/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:32:20.487

您至少需要一个 HTTP 服务器运行在您运行 django 项目的任何地方，强烈建议您为静态文件使用单独的服务器，而不是应用程序逻辑。

其次，不使用 {{ STATIC_URL }} 或类似项目是非常糟糕的做法。绝对路径是邪恶的。如果项目改变机器，或者如果它需要多个版本等。这些路径很可能会改变。

# video - Mediaelement.js、html5 和 flash 视频：将高度和宽度设为 100%

> ID：12188294
> 
> 赞同：2
> 
> 时间：2012-08-30T00:22:55.910
> 
> 标签：video, html5-video, mediaelement.js

我想让视频以视口的 100% 宽度和 100% 高度显示。我在视频中使用 Mediaelement.js，它可以确保在 Chrome、Safari 和 IE9 中进行原生播放，并为 Firefox 和 IE8 提供 Flash 后备。

问题是，在本机播放或 Flash 播放中，视频不会一直到包含 div 的 100% 高度。它在顶部和底部留下间距，以考虑视频的纵横比。

[在http://badlands777.com/test](http://badlands777.com/test)查看示例

是否可以让视频完全填充包含的 div？在原生标签以及 Flash 后备播放器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T22:39:35.373

您需要为您的视频标签添加一个样式属性，将高度和宽度设置为 100%。

```
<video style="width: 100%; height: 100%;" 
```

mediaelement.js 会将值传输到输出 HTML 中的适当部分。

# jquery-mobile - 如何在 Jquery Mobile 中放置与表单上的控件对齐的文本？

> ID：12188295
> 
> 赞同：1
> 
> 时间：2012-08-30T00:23:08.337
> 
> 标签：jquery-mobile

Jquery Mobile 在网格中很好地布置了控件。我会在下图中以红色勾勒出的文本“12345678”位于文本框的正上方并左对齐。我看不出该怎么做。

![在此处输入图像描述](../Images/2f2a1e1977b6b29fc74c278987742d76.png)

图像是用这个 jsfiddle 生成的：http: [//jsfiddle.net/958Gr/3/](http://jsfiddle.net/958Gr/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:20:21.877

通过设置 disabled='true' 和 value="12345678" 你可以得到一些不错的东西。帐号仍将显示为字段，但您可以使用不同的主题。看到这个小提琴：

[http://jsfiddle.net/den232/7hmYn/](http://jsfiddle.net/den232/7hmYn/)

祝你好运！

```
 <div class="ui-body ui-body-b">
<div data-role="fieldcontain" data-theme='c'>
<label for="Phone" >Account ID</label>      
<input id="Phone" name="Phone" type="text" disabled='true' value="12345678"  />

</div></div>

<div class="ui-body  ui-body-c">
<div data-role="fieldcontain">
<label for="Email">Email Address</label>
<input data-val="true" data-val-required="The Email Address field is required." id="Email" name="Email" type="text" value="" />

</div> </div>

<div class="ui-bar ui-bar-c">
<div data-role="fieldcontain">
<label for="Email">Email Address</label>
<input data-val="true" data-val-required="The Email Address field is required." id="Email" name="Email" type="text" value="" />

</div> </div> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T03:56:17.237

您可以在此更新的 jsfiddle 中使用两列网格：[链接](http://jsfiddle.net/958Gr/10/)

# javascript - 在 JavaScript 中生成安全、随机、Ascii 编码的字符串

> ID：12188300
> 
> 赞同：0
> 
> 时间：2012-08-30T00:23:39.210
> 
> 标签：javascript, html, webkit, cryptography

我想为我的 JavaScript 程序生成一个安全且 ASCII 编码的随机随机数（它必须在 WebKit 中工作）。最好，我想使用现成的工具。到目前为止，我找到的唯一答案是： [Secure random numbers in javascript?](https://stackoverflow.com/questions/4083204/secure-random-numbers-in-javascript)

唯一的问题是结果是随机的，我不确定如何在不牺牲安全性的情况下对其进行 ASCII 编码（即，使其不那么随机）。

编辑： Math.random() 不是加密安全的，window.crypto 只生成字节的倍数（ASCII 值是 7 位，所以如果编码机制被天真地实现，它会降低随机性）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:43:25.993

您可以将任意字节数组编码为 Base64 以获得纯 ASCII。

# maven - 如何过滤由 Maven ant:ant 生成的 Ant 项目中的资源？

> ID：12188301
> 
> 赞同：2
> 
> 时间：2012-08-30T00:23:41.697
> 
> 标签：maven, ant

当我使用 生成 Ant 项目时`mvn ant:ant`，生成的 Ant 项目不会过滤资源以替换属性标记（例如`${property}`）。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:09:02.107

ant 插件将根据您的 POM 生成以下文件：

```
|-- build.xml
|-- maven-build.properties
|-- maven-build.xml 
```

资源过滤发生在“编译”目标中，因此您可以通过将目标复制到 build.xml 并更改其行为来覆盖它的行为。

再次运行 Maven ANT 插件不会覆盖此自定义（仅重新生成 maven-* 文件）。

# 例子

## 构建.xml

过滤器集被添加到编译目标内的复制任务中：

```
<project name="maven-ant-demo" default="package" basedir=".">

  <!-- ====================================================================== -->
  <!-- Import maven-build.xml into the current project                        -->
  <!-- ====================================================================== -->

  <import file="maven-build.xml"/>

  <!-- ====================================================================== -->
  <!-- Help target                                                            -->
  <!-- ====================================================================== -->

  <target name="help">
    <echo message="Please run: $ant -projecthelp"/>
  </target>

  <!-- ====================================================================== -->
  <!-- Override target                                                        -->
  <!-- Copied from "maven-build.xml"                                          -->
  <!-- ====================================================================== -->    
  <target name="compile" depends="get-deps" description="Compile the code">
    <mkdir dir="${maven.build.outputDir}"/>
    <javac destdir="${maven.build.outputDir}" 
           nowarn="false" 
           debug="true" 
           optimize="false" 
           deprecation="true" 
           target="1.1" 
           verbose="false" 
           fork="false" 
           source="1.3">
      <src>
        <pathelement location="${maven.build.srcDir.0}"/>
      </src>
      <classpath refid="build.classpath"/>
    </javac>

    <!--
    Note the filterset. This will perform resource filtering 
    -->
    <copy todir="${maven.build.outputDir}">
      <fileset dir="${maven.build.resourceDir.0}"/>
       <filterset begintoken="${" endtoken="}">
         <filter token="helloworld" value="${helloworld}"/>
       </filterset>
    </copy>
  </target>

</project> 
```

# ethernet - 连接 DHCP 服务器并获取 IP 地址

> ID：12188305
> 
> 赞同：-1
> 
> 时间：2012-08-30T00:24:21.353
> 
> 标签：ethernet, dhcp, mikroc

我想从 DHCP 服务器获取我的 PIC 18F4520 设备的 IP 地址，我使用 mikroc SPI 以太网库对我的 PIC 进行编程。我做了一个代码，它不工作。我想获取 IP 地址并将其显示在 LCD 上。有人可以帮我怎么做吗？

```
#include  "__EthEnc28j60.h"
#include  "__EthEnc28j60Private.h"

// LCD module connections
sbit LCD_RS at LATB4_bit;
sbit LCD_EN at LATB5_bit;
sbit LCD_D4 at LATB0_bit;
sbit LCD_D5 at LATB1_bit;
sbit LCD_D6 at LATB2_bit;
sbit LCD_D7 at LATB3_bit;

sbit LCD_RS_Direction at TRISB4_bit;
sbit LCD_EN_Direction at TRISB5_bit;
sbit LCD_D4_Direction at TRISB0_bit;
sbit LCD_D5_Direction at TRISB1_bit;
sbit LCD_D6_Direction at TRISB2_bit;
sbit LCD_D7_Direction at TRISB3_bit;
// End LCD module connections

/*// SD module connections
sbit Mmc_Chip_Select           at LATC0_bit;  // for writing to output pin always use latch 

(PIC18 family)
sbit Mmc_Chip_Select_Direction at TRISC0_bit;
// End SD module connections*/

//ENC28j60 connection
sbit SPI_Ethernet_CS at LATC1_bit;
sbit SPI_Ethernet_Rst at LATC0_bit;

sbit SPI_Ethernet_CS_Direction at TRISC1_bit;
sbit SPI_Ethernet_Rst_Direction at TRISC0_bit;
//End ENC28j60 connection

const char httpHeader[] = "HTTP/1.1 200 OK\nContent-type: "; // HTTP header
const char httpMimeTypeHTML[] = "text/html\n\n";             // HTML MIME type
const char httpMimeTypeScript[] = "text/plain\n\n";          // TEXT MIME type

// default html page
char    indexPage[] =
"<html><head><title>mikroElektronika</title></head><body>\
<h3 align=center>MikroElektronika Home Automatization System</h3>\
<form name=\"input\" action=\"/\" method=\"get\">\
<table align=center width=200 bgcolor=#4974E2 border=2><tr>\
<td align=center colspan=2><font size=4 color=white><b>Heat Control</b></font>\
</td></tr><tr><td align=center bgcolor=#4974E2><input name=\"tst1\" width=60 \
type=\"submit\" value=\"ON\"></td><td align=center bgcolor=#FFFF00>\
<input name=\"tst2\" type=\"submit\" value=\"OFF\"></td></tr></table>\
</form></body></html>";

// network parameters
char   myMacAddr[6] = {0x00, 0x14, 0xA5, 0x76, 0x19, 0x3f}; // my MAC address
char   myIpAddr[4]  = {0, 0, 0, 0};                         // my IP address

unsigned char   getRequest[20];                                    // HTTP request buffer

unsigned int  SPI_Ethernet_UserTCP(unsigned char *remoteHost, unsigned int remotePort, 

unsigned int localPort, unsigned int reqLength, TEthPktFlags *flags)
{
  unsigned int    len;                            // my reply length
  if(localPort != 80) return(0);             // I listen only to web request on port 80

  // get 10 first bytes only of the request, the rest does not matter here
  for(len = 0 ; len < 15 ; len++) getRequest[len] = SPI_Ethernet_getByte();
  getRequest[len] = 0;

  if(memcmp(getRequest, "GET /", 5)) return(0);  // only GET method

  if(!memcmp(getRequest+11, "ON", 2))        // do we have ON command
    PORTB.F0 = 1;                // set PORTB bit0
  else
    if(!memcmp(getRequest+11, "OFF", 3))        // do we have OFF command
      PORTB.F0 = 0;        // clear PORTB bit0

  if (PORTB.F0)
    {
     memcpy(indexPage+340, "#FFFF00", 6);        // highlight (yellow) ON
     memcpy(indexPage+431, "#4974E2", 6);        // clear OFF
    }
  else
    {
     memcpy(indexPage+340, "#4974E2", 6);        // clear ON
     memcpy(indexPage+431, "#FFFF00", 6);        // highlight (yellow) OFF
    }

  len =  SPI_Ethernet_putConstString(httpHeader);               // HTTP header
  len += SPI_Ethernet_putConstString(httpMimeTypeHTML);  // with HTML MIME type
  len += SPI_Ethernet_putString(indexPage);                           // HTML page first part
  return len; // return to the library with the number of bytes to transmit
}
unsigned int  SPI_Ethernet_UserUDP(unsigned char *remoteHost, unsigned int remotePort, 

unsigned int destPort, unsigned int reqLength, TEthPktFlags *flags)

{
  return 0; // back to the library with the length of the UDP reply
}

unsigned long  i, size, j, k;
char           filename[14] = "ASHAN.TXT";          // File names
int txt2,*pi;
unsigned short character[20];
unsigned short *contentBuffer;

void main(){

ADCON1 |= 0x0D;             // Configure AN0 and AN1 pins as analog
CMCON  |= 7;                // coparators off

TRISA = 0xff ;
PORTA = 0 ;

PORTB = 0 ;  //PORTB output
TRISB = 0 ;

PORTC = 0 ;
TRISC = 0b11011100 ;    // set PORTC as input except for bits 0 (RESET) and 1 (CS)

Delay_ms(100);

//Initialize LCD
Lcd_Init();
Lcd_Cmd(_LCD_CLEAR);
Lcd_Cmd(_LCD_CURSOR_OFF );
Lcd_Out(1, 1, "Status:");
Lcd_Cmd(_LCD_SECOND_ROW);

SPI1_Init();
SPI_Ethernet_Init(myMacAddr, myIpAddr,1);

SPI_Ethernet_initDHCP(5); // get network configuration from DHCP server, wait 5 sec   for the response
memcpy(myIpAddr, Spi_Ethernet_getIpAddress(),4) ; // get assigned IP address
Lcd_Out_Cp(myIpAddr);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:59:53.247

首先认为我会运行 Wireshark 并查看您的 DHCP 发现是否成功，从那时起您决定故障排除的重点...

# php - 向数据库插入数据问题

> ID：12188309
> 
> 赞同：-1
> 
> 时间：2012-08-30T00:25:18.157
> 
> 标签：php, mysql, database, facebook, login

我在名为 facebook.php 的文件中有以下代码：

```
$user = json_decode(@file_get_contents(
'https://graph.facebook.com/me?access_token=' .
$cookie['access_token'])); 
```

在我的另一个页面上

```
require 'facebook.php';
<p>Welcome <?= $user->name ?></p> 
```

这工作正常，它显示来自 facebook 的用户名。（显然我有一个 facebook 应用程序允许用户登录我的网站）

在 facebook.php 我也有：

```
 $id = $user->id;
    $name = $user->name;
    $email = $user->email;

    mysql_query("INSERT INTO facebook (id, name, email)
    VALUES ('$id' , '$name' , '$email')"); 
```

此插入不起作用（没有插入任何内容）。但是，如果我将代码更改为：

```
 $id ='123';
    $name = 'testname';
    $email = 'blhalvlvlv';

    mysql_query("INSERT INTO facebook (id, name, email)
    VALUES ('$id' , '$name' , '$email')"); 
```

然后这工作并将数据插入到数据库中的表中。为什么使用 $user->id $user->name 和 $user->email 不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:17:21.700

检查以确保正确设置了 $user 值。

简单的方法是 echo var_dump($user); 看看你得到了什么

# php - PHP 联系表格协助

> ID：12188311
> 
> 赞同：0
> 
> 时间：2012-08-30T00:25:28.260
> 
> 标签：php, html, contact

当谈到 HTML 和 PHP 时，我是一个菜鸟。无论如何，我制作了一个 html 表单，然后我从网上获得了一个 PHP 邮件脚本并编辑了 PHP 代码，使其与我的 HTML 匹配。该表格实际上有效，它向我发送了电子邮件。问题是填写的表格中的一些内容在发送给我的电子邮件中是空的。在下面的代码中，您可以看到我拥有的表格是：

*   姓名
*   地址
*   电话
*   电子邮件
*   住宅（3 个单选按钮，三个不同的选项）
*   适用的文本字段

填写并提交整个表格后，当我收到电子邮件时，我得到的只是姓名和电话。

继承人的代码：

**HTML**

```
<!DOCTYPE HTML>
<html>
<head>
<title>SpaceCommand - Order Now</title>
<link rel="icon" type="image/png" href="http://cdn.directv.com/images/common/favicon.ico">
<link rel="stylesheet" type="text/css" href="ostyle.css" />
</head>

<body>

<div id="top"></div>
<div id="st"><img src="dimages/nflst.png" width="1021" height="550"/></div>
<div id="Every">Every Sunday. Every Game.</div>
<div id="tbox"></div>
<div id="tbox_2"></div>

<div id="Every_2">NFL SUNDAY TICKET included</div>
<div id="Every_3">at no extra charge!</div>
<div id="Every_4">Only on DIRECTV.</div>

<div id="logo"><img src="dimages/logof.png" width="400" height="51" /></div>

<div id="stylized" class="myform">
<form id="form1" action="mail.php" method="POST">

    <label>Name
        <span class="small">Add your name</span>
    </label>
    <input type="text" name="name">

    <label>Address
        <span class="small">Enter your address</span>
    </label>
    <input type="text" name="address">

    <label>Phone
        <span class="small">Add a Phone Number</span>
    </label>
    <input type="text" name="phone">

    <label>Email
        <span class="small">Enter your email</span>
    </label>
    <input type="text" name="email">
 <br />

<label>Residence:
</label>
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />

<div id="radio">
    House<input type="radio" value="house" name="house">
</div>

<div id="radio2">
    Condo<input type="radio" value="condo" name="condo">
</div>

<div id="radio3">
    Apartment<input type="radio" value="apartment" name="apartment">
</div>
<br />
<br/>
    <label>If apartment or condo, do you have roof availability or a balcony facing south?
        <span class="small"><i>*if applicable</i></span>
    </label>
    <br />
    <br />
    <input type="text" name="applicable">

<br />
<br />
<br />
<br />

    <button type="submit" value="Send" style="margin-top:15px;">Submit</button>
    <div class="spacer"></div>

</div>
</form>

<div id="ont">
<img src="dpimages/ont.png" />
</div>

</body>
</html> 
```

**PHP**

```
<?php
//Cusomer Name
$name = $_POST['name'];
//Address
$address = $_POST['address'];
//Phone
$phone = $_POST['phone'];
//Email
$email = $_POST['email'];
//Residence
$residence = $_POST['residence'];
//Residence Type
$house = $_POST['house'];
$condo = $_POST['condo'];
$apartment = $_POST['apartment'];
//Applicable 
$applicable = $_POST['applicable'];

//Contetnt
$formcontent= "Customer Name: $name \n Address: $address \n Phone Number: $phone \n Email: $email \n Residence: $residence $house $condo $apartment \n Do they have roof access or a baclony facing south? (if applicable): $applicable";
$recipient = "gizmo@themvnt.com";
$subject = "DIRECTV Order - SpaceCommand";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You for contacting us. We'll get back to you as soon as possible." . " -" . "<a href='order.html' style='text-decoration:none;color:#ff0099;'> Return to SpaceCommand</a>";
?> 
```

如果你们可以为我修复代码，那将不胜感激。

编辑：`var_dump($_POST)`结果。

```
Array ( [name] => Test Name 
[Address] => Test Address 
[phone] => Tes Phome 
[Email] => Test Email 
[call] => House 
[Applicable] => 
Test ) Thank You for contacting us. We'll get back to you as soon as possible. - Return to SpaceCommand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:35:10.483

您的单选按钮应该有三个相同的名称，除非您想让它们同时选择三个。

也试试这个

```
$formcontent= "Customer Name: {$name} \n Address: {$address} \n Phone Number: {$phone} \n Email: {$email} \n Residence: {$residence} $house {$condo} {$apartment} \n Do they have roof access or a baclony facing south? (if applicable): {$applicable}"; 
```

我测试了表格，所有的值都被正确传递了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T01:00:20.330

$_POST 键中的大小写与您的代码中的不同。

即在帖子中它显示为电子邮件，但您以 $_POST['email'] 而不是 $_POST['Email'] 的形式访问它

但是，这与您在原始问题中发布的 html 代码不匹配。您确定问题中的 html 代码与您正在运行的代码相同吗？

[在评论中没有很好地打印的更新：]根据您打印的结果，您的 php 代码应该如下所示：

```
//Cusomer Name
$name = $_POST['name'];
//Address
$address = $_POST['Address'];
//Phone
$phone = $_POST['phone'];
//Email
$email = $_POST['Email'];
//Applicable 
$applicable = $_POST['Applicable']; 
```

# javascript - jQuery + 安卓。将功能（Touchstart，touchmove）应用于实时加载的内容

> ID：12188312
> 
> 赞同：0
> 
> 时间：2012-08-30T00:25:46.690
> 
> 标签：javascript, android, jquery, html, css

我在移动网站上工作，我想通过使用 jQuery 而不是使用 HTML 的 :hover 伪选择器对类名为“list_anchor”的链接进行鼠标悬停突出显示。（因为 :hover 在 Android 中有点问题。）

所以我遵循了这个教程：
[停止 touchstart 在滚动时执行得太快](https://stackoverflow.com/questions/9842587/stop-the-touchstart-performing-too-quick-when-scrolling)

我成功地为我的链接安装了 touchstart、touchmove 功能。开心了一阵子。

但是，当用户滚动（滑动）到页面底部（如 Twitter）时，我的链接会被加载。
Javascript 似乎不适用于这些链接。

这是我到目前为止得到的：

```
function touchEvent() {
    var self = $(this);
    self.addClass('hover');
    //behaviour for move
    self.on('touchmove', function(e){
        self.removeClass('hover');
    });     
}
$('a,section').filter('.list_anchor').on('touchstart', this, touchEvent); 
```

任何帮助，建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:43:08.057

为了`on`像旧的一样工作，`live`你需要将它附加到 DOM 的高处，并将选择器放在参数中，例如：

```
$(document).on('touchstart', '.list_anchor', touchEvent); 
```

# asp.net - 来自 ASP.NET 的 SVN 信息：'无法确定用户的配置路径'

> ID：12188314
> 
> 赞同：8
> 
> 时间：2012-08-30T00:26:10.053
> 
> 标签：asp.net, svn, appdata

有一个 ASP.NET 站点，我希望从中执行 SVN 信息调用。

我的理解是当用户尚未完成使用 SVN 的基本设置时会出现此错误消息。具体来说，AppData 下有一个名为 Subversion 的文件夹，当它不存在且未正确配置时，会显示上述消息。

ASP.NET 站点在我找不到其 AppData 文件夹的帐户“NetworkService”下运行。我打算复制并粘贴 Subversion 文件夹，因为作为 NetworkService 进行实际登录并不容易。

如何继续使用 NetworkService 以便“svn info”也可以继续？

提前致谢 -

仅供参考：使用 SharpSvn 作为包装器。怀疑这很重要，但你去

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T00:51:56.317

在您进行身份验证和/或执行任何 svn 事件之前添加此行。

```
client.LoadConfiguration(Path.Combine(Path.GetTempPath(), "Svn"), true); 
```

# android - Android 异步任务 - NullPointerException

> ID：12188320
> 
> 赞同：0
> 
> 时间：2012-08-30T00:26:44.437
> 
> 标签：android, android-asynctask

我正在构建一个需要连接到网络服务器上的 PHP API 以从 mySQL 数据库获取用户凭据的应用程序。API 将返回一个 JSON 对象作为登录的结果。

我在网上遵循了一个教程，它在主线程上构建了所​​有内容，所以我正在尝试执行异步任务。但是我无法让它工作并且我不断收到 NullPointerException。该应用程序花了大约 5 分钟尝试连接到我的 WAMP 服务器，然后就关闭了。连接到服务器以模拟糟糕的网络条件需要那么长时间吗？

代码在这里：

```
 private class ProcessLogin extends AsyncTask<Void, String, JSONObject> {
    @Override
    protected JSONObject doInBackground(Void... urls) {

      inputEmail = (EditText) findViewById(R.id.loginEmail);
      inputPassword = (EditText) findViewById(R.id.loginPassword);
      btnLogin = (Button) findViewById(R.id.btnLogin);
      btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
      loginErrorMsg = (TextView) findViewById(R.id.login_error);

      String email = inputEmail.getText().toString();
      String password = inputPassword.getText().toString();

      publishProgress("Attempting to authenticate");

      JSONObject json = userFunction.loginUser(email, password);

       return json;
     }

    @Override
    protected void onPostExecute(JSONObject json) {

        publishProgress("Response received");

        try {
            if (json.getString(KEY_SUCCESS) != null) {
                publishProgress("correct username/password");
            }
            else {
                publishProgress("Incorrect username/password");
            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    /* (non-Javadoc)
     * @see android.os.AsyncTask#onProgressUpdate(Progress[])
     */
    @Override
    protected void onProgressUpdate(String... values) {
     super.onProgressUpdate(values);
        // Things to be done while execution of long running operation is in progress. For example updating ProgessDialog
        loginErrorMsg = (TextView) findViewById(R.id.login_error);
        loginErrorMsg.setText(values[0]);
     }
  }

   // Login button Click Event
   public void beginLogin(View view) {
     new ProcessLogin().execute();
   } 
```

我的日志猫错误在这里：

```
08-29 20:19:50.462: E/AndroidRuntime(1287): FATAL EXCEPTION: main
08-29 20:19:50.462: E/AndroidRuntime(1287): java.lang.NullPointerException
08-29 20:19:50.462: E/AndroidRuntime(1287):     at             com.example.onepass.LoginActivity$ProcessLogin.onPostExecute(LoginActivity.java:75)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at com.example.onepass.LoginActivity$ProcessLogin.onPostExecute(LoginActivity.java:1)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at android.os.AsyncTask.finish(AsyncTask.java:631)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at android.os.Looper.loop(Looper.java:137)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at java.lang.reflect.Method.invoke(Method.java:511)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-29 20:19:50.462: E/AndroidRuntime(1287):     at dalvik.system.NativeStart.main(Native Method) 
```

我刚刚开始使用 Android SDK 进行编码，所以如果错误非常明显，我深表歉意并感谢您的指点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:34:52.400

正如堆栈跟踪所示，错误位于 LoginActivity.java 的第 75 行：

> 在 com.example.onepass.LoginActivity$ProcessLogin.onPostExecute( **LoginActivity.java:75** )

由于您没有提供行号，我的盲目猜测是您传递给 onPostExecute() 的 json 变量只是`null`. 正如您假设它始终有效（在 99% 的情况下这是错误的假设），您尝试在`null`ed 对象上调用 getString()，因此是 NPE。

解决方法是在使用它之前检查它`json`是否不为空，这始终是一个好习惯

# c++ - 通过赋值运算符返回字符数组

> ID：12188328
> 
> 赞同：1
> 
> 时间：2012-08-30T00:27:50.160
> 
> 标签：c++, arrays, return-value, assignment-operator, character-arrays

所以这是一个家庭作业，可能会有一些荒谬的限制，但请多多包涵。这只是一个简单的功能，但被抽出。我需要通过赋值运算符返回一个字符数组，但它似乎根本不起作用。我试过指针，但没有运气。

```
#include <iostream>
using namespace std;

char* findMax(char*, char*);

int main()
{
    char aArray[50] = "Hello World",
        bArray[50] = "dlroW olleH",
        maxArray[50];

    maxArray[50] = findMax(aArray, bArray);

    cout << maxArray << " is the bigger of the 2 strings" << endl;
    return 0;
}

char* findMax(char* strA, char* strB){
    char* maxStr;

    if(strcmp(strA, strB) < 1)
        maxStr = strB;
    else
        maxStr = strA;

    return maxStr;
} 
```

如果我计算出它的返回值`findMax()`确实会打印出 bArray 的值，但是通过赋值运算符将它输入 maxArray 根本不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:31:17.490

有两种方法可以做到这一点。如所写，`maxArray`是一个字符数组。不能直接分配数组。相反，您需要一个一个地复制每个字符。您可以通过循环或调用`strcpy`标准库函数来做到这一点。

```
char maxArray[50];

strcpy(findMax(aArray, bArray), maxArray); 
```

另一种方法是将声明更改`maxArray`为 a `char *`，一个指针。可以直接分配指针，而无需循环或调用函数。

```
char *maxArray;

maxArray = findMax(aArray, bArray); 
```

这和第一个解决方案之间的区别是微妙的，但很重要。你实际上是在分配第三个 50 个字符的数组，与和`char maxArray[50]`分开。这个数组有它自己的存储，它自己的 50 字节内存。`aArray``bArray`

在第二个中，您不会创建第三个数组。您只需创建一个指针，该指针可以指向已经存在的其他数组。赋值后，成为对or`maxArray`的间接引用。它不是其中一个数组的*副本*，它*指向*其中一个。`aArray``bArray`

# java - 给定一个格式字符串 (String.format()/Formatter) 是否有一种简单的方法来获取预期的参数类型？

> ID：12188330
> 
> 赞同：3
> 
> 时间：2012-08-30T00:28:05.377
> 
> 标签：java, android, formatter

我正在为我们的 Android 应用程序中的本地化进行一些单元测试。现在，我的单元测试会检查我们所有不同语言环境的所有不同格式字符串，以确保翻译人员不会把它们弄乱（他们倾向于这样做）。基本上我确保调用 String.format() 不会引发格式异常。

唯一的缺点是我需要手动将每个字符串添加到测试中。我正在做一个替换测试，它使用反射来查找 R.string 中的每个字符串。获取字符串不是问题，但是有没有简单的方法来确定格式字符串期望的参数的数量和类型？

String.format() 如果你传递了太多的参数，它不会抱怨，所以我可能只是传递一个大的整数数组（它可以被拆箱到 %d 或 toString()'ed 到 %s）并查找格式异常. 不过，如果我能以正确的数量传递正确类型的参数，那就更好了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:05:50.393

老实说，我认为检查 an 的方法`Exception`是您在不使用自己成熟的解析器的情况下遇到的最好的方法。

如果您对编写代码以从（我找不到锚点，因此您只需要 control+f 就可以找到它）[的`format(...)`方法中`Formatter.java`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Formatter.java)查找所有元素（将成为参数）非常感兴趣`format(Lo`。此代码也可在 SDK 下`sources\android-16\java\util`的私有方法中找到`doFormat`。

一旦您了解了它用于查找每个部分并解析它的方法，它实际上是一个相对简单的代码。我认为通过一些工作，也许从 复制粘贴`Formatter`，您可以设置自己的代码，只需找到 的元素`String`，而不是替换它们。

# twitter - Twitter 速率限制 IP/OAuth 问题

> ID：12188333
> 
> 赞同：4
> 
> 时间：2012-08-30T00:28:23.640
> 
> 标签：twitter, twitter4j, twitter-streaming-api

我有一系列网络应用程序，它们使用[Public Streaming API](https://dev.twitter.com/docs/streaming-apis/streams/public)收集与某个主题相关的所有术语。到目前为止，我一直在为每个流创建一个新帐户，在该帐户上设置一个新的 Twitter 应用程序，复制 OAuth 令牌，启动一个新的 EC2 实例，并设置流，这是一条非常非常艰巨的路线.

这使我可以拥有来自多个不同 IP 的流，当您创建应用程序时，使用生成器工具可以轻松生成 OAuth，并且因为它们都位于不同的帐户中，所以我不满足任何帐户限制。

我想知道我是否可以做些什么来加快这个过程，特别是在 EC2 实例方面。我可以使用不同的帐户在同一个实例上运行一堆流吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T12:15:57.323

如果您在一台机器上运行多个消费者，您可能会被暂时禁止，反复禁止可能最终使您被禁止更长时间。至少，这种情况过去在我身上发生过几次。

我当时发现的是：

*   相同的凭据，相同的 ip -> 阻止/禁止
*   不同的凭据，相同的 IP -> 大部分都可以，但不时被禁止
*   不同的凭据，不同的 ip -> 好的

这是几年前的事了，所以我不确定是否仍然如此，但我希望 Twitter 会收紧规则，而不是放宽规则。

（另外，我认为你侵犯了他们的服务条款）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:13:08.960

您应该检查新的 Twitter API 版本 1.1。它是几天前发布的，并且对费率的计算方式进行了许多更改。

一个很大的变化是IP现在完全被忽略了。所以你不必再创建很多实例了（利润！）

来自 Twitter 开发者@episod：

> 与 API v1 不同，所有速率限制都是针对每个用户的每个应用程序——IP 地址不参与速率限制考虑。速率限制在应用程序之间完全划分。

# php - PHP mail() 表单发送到 GMAIL 垃圾邮件

> ID：12188334
> 
> 赞同：6
> 
> 时间：2012-08-30T00:28:24.170
> 
> 标签：php, gmail, html-email

我知道这个问题已经在这里解决了几次。我尝试按照设置正确标题的说明进行操作，但我的电子邮件进入 Gmail 中的垃圾邮件过滤器时仍然遇到问题。

如果有人可以请看一下我尝试过的内容，我将不胜感激。下面的代码没有添加标题，如下所述：http: [//www.velvetblues.com/web-development-blog/avoid-spam-filters-with-php-mail-emails/](http://www.velvetblues.com/web-development-blog/avoid-spam-filters-with-php-mail-emails/)

提前致谢。

```
define("WEBMASTER_EMAIL", 'myName@mydomain.com');
if($post)
{
    $name    = stripslashes($_POST['name']);
    $email   = trim($_POST['email']);
    $subject = trim($_POST['subject']);
    $message = stripslashes($_POST['message']);

    $error = '';

    // Check name
    if(!$name)
        $error .= 'Name required! ';

    // Check email
    if(!$email)
        $error .= 'E-mail required! ';

    if($email && !ValidateEmail($email))
        $error .= 'E-mail address is not valid! ';

    // Check message
    if(!$message)
        $error .= "Please enter your message!";

    if(!$error)
    {

        $mail = mail(WEBMASTER_EMAIL, $subject, $message,
            "From: ".$name." <".$email.">\r\n"
            ."Reply-To: ".$email."\r\n"
            ."X-Mailer: PHP/" . phpversion());

        if($mail)
            echo 'OK';
    }
    else
        echo '<div class="errormsg">'.$error.'</div>';
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T00:46:02.513

使用 **此代码**：

```
 $to = Email;
 $subject = subject ;
 $body = "<div> hi hi .. </div>";

    $headers = 'From: YourLogoName info@domain.com' . "\r\n" ;
    $headers .='Reply-To: '. $to . "\r\n" ;
    $headers .='X-Mailer: PHP/' . phpversion();
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-type: text/html; charset=iso-8859-1\r\n";   
if(mail($to, $subject, $body,$headers)) {
  echo('<br>'."Email Sent ;D ".'</br>');
  } 
  else 
  {
  echo("<p>Email Message delivery failed...</p>");
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T00:36:39.060

我认为这是你的问题：

```
 "From: ".$name." <".$email.">\r\n" 
```

由于您不是 gmail、hotmail 或您的用户电子邮件提供商，因此您不能拥有“发件人：otherdomain.com”然后通过“mail.yourdomain.com”发送邮件 - 这很可能会将您的邮件移动到垃圾邮件文件夹。

尝试

```
 "From: YourWebsiteName <noreply@yourwebsite.com>\r\n"
."Reply-To: ".$name." <".$email.">\r\n" 
```

反而。

另外：您的代码非常不可靠并且是主要的垃圾邮件目标 - 谷歌“电子邮件标头注入 php”！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T13:38:31.640

谷歌倾向于不仅对网站进行处罚，而且对曾经有许多用户在网络上发送垃圾邮件的服务提供商进行处罚。如果您注册了谷歌识别为垃圾邮件发送者的这些服务提供商之一，这可能是您的 php mail() 消息落入 gmail 垃圾邮件箱的原因。尝试与您的服务器提供商讨论此问题。

在这种情况下，您会在“垃圾邮件”消息中收到来自 google 的警告：

> “为什么这封邮件会出现在垃圾邮件中？我们发现很多来自 home.pl 的邮件都是垃圾邮件。了解更多”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-05T12:54:39.490

我知道这个问题很久以前就被问过了，但我想我会在这里放弃 2020 年的答案，以便它可以潜在地帮助新访客。

> **请注意：**
> 
> *   此答案作为通用答案，将要求您根据您使用的表单输入编辑一些详细信息。
> *   您还需要将标题等中的电子邮件地址更新为连接到您的域的电子邮件地址。
> *   此解决方案假定您使用的是 Google Recaptcha。如果没有，那么只需删除有关“Google recapthca”的部分。
> *   此脚本添加了不应删除的安全性和验证。
> *   如果您要使用[Sweet Alert](https://sweetalert2.github.io/)，那么您应该通过[CDN 或 NPM](https://sweetalert2.github.io/#download)将其安装到您的网站/应用程序中。

**一些用于创建在邮件发送时触发的自定义[Sweet Alert警报的 Javascript：](https://sweetalert2.github.io/)**

```
// Custom SweetAlert alert that gets triggered on email send
function enquirySent() {
    swal({
      title: "Email sent!",
      text: "Thank you for your email. We'll be in contact ASAP.",
      icon: "success",
      button: "Okay",
    });
}
function enquiryNotSent() {
    swal({
      title: "Oops!",
      text: "Your email was NOT sent due to an error.",
      icon: "error",
      button: "Okay",
    });
}; 
```

**发送邮件的 PHP 脚本：**

```
<?php
    if (isset($_POST['submit'])) {

        // For the Google recaptcha
        $curlx = curl_init();
        curl_setopt($curlx, CURLOPT_URL, "https://www.google.com/recaptcha/api/siteverify");
        curl_setopt($curlx, CURLOPT_HEADER, 0);
        curl_setopt($curlx, CURLOPT_RETURNTRANSFER, 1); 
        curl_setopt($curlx, CURLOPT_POST, 1);
        $post_data = [
            'secret' => 'YOUR CAPTCHA SECRET KEY',
            'response' => $_POST['g-recaptcha-response']
        ];
        curl_setopt($curlx, CURLOPT_POSTFIELDS, $post_data);
        $resp = json_decode(curl_exec($curlx));
        curl_close($curlx);
        // Google recaptcha end

        // Form details (sanitized)
        $name = htmlspecialchars($_POST['name']);
        $surname = htmlspecialchars($_POST['surname']);
        $email = htmlspecialchars($_POST['email']);
        $message = htmlspecialchars($_POST['message']);

        // Mail headers and details
        $email_from = 'youremail@yourdomain.com';
        $email_body = "You have received a new message from the user $name $surname.\nHere is the message:\n\n".$message;

        $headers = "From: $email_from \r\n";
        $headers .= "Reply-To: ".$email."\r\n";
        $headers .= "Return-Path: ".$email."\r\n";
        $headers .= "MIME-Version: 1.0\r\n";
        $headers .= "Content-type: text/plain; charset=iso-8859-1\r\n";
        $headers .= "X-Priority: 3\r\n";
        $headers .= "X-Mailer: PHP". phpversion() ."\r\n" ;

        $error = false;

        // Some more input validation/sanitizing
        if (!preg_match("/^[a-zA-Z ]*$/",$first_name) && $first_name!="") {
            $error = true; 
        }
        if (!preg_match("/^[a-zA-Z ]*$/",$last_name) && $last_name!="") {
            $error = true; 
        }
        if (!filter_var($email, FILTER_VALIDATE_EMAIL) && $email!="") {
            $error = true;
        }

        function IsInjected($str) {
            $injections = array('(\n+)',
                   '(\r+)',
                   '(\t+)',
                   '(%0A+)',
                   '(%0D+)',
                   '(%08+)',
                   '(%09+)'
                   );

            $inject = join('|', $injections);
            $inject = "/$inject/i";

            if (preg_match($inject,$str)) {
              return true;
            } else {
              return false;
            }
        }

        if (IsInjected($visitor_email)) {
            echo "Bad email value!";
            exit;
        }

        // Sending the email
        if ($error == false) {
            $to = "youremail@yourdomain.com";
            $subject = "Enquiry from website";
            mail($to, $subject, $email_body, $headers);

            // Calling the email sent / not sent alerts
            echo '<script type="text/javascript">',
                'enquirySent()',
                '</script>';
        } else {
            echo '<script type="text/javascript">',
                'enquiryNotSent()',
                '</script>';
        }
    }
?> 
```

# php - 如果值存在于所有数组中，如何从 PHP 中的多维数组返回重复值。

> ID：12188336
> 
> 赞同：1
> 
> 时间：2012-08-30T00:28:29.553
> 
> 标签：php, arrays, codeigniter, multidimensional-array

几天来，我一直试图解决这个问题，但没有得到好的结果。我在 PHP (print_r) 中有这个多维对象数组：

```
Array
(
[3] => Array
    (
        [0] => stdClass Object
            (
                [productoId] => 16
            )

        [1] => stdClass Object
            (
                [productoId] => 21
            )

        [2] => stdClass Object
            (
                [productoId] => 22
            )

    )

[7] => Array
    (
        [0] => stdClass Object
            (
                [productoId] => 16
            )

        [1] => stdClass Object
            (
                [productoId] => 21
            )

        [2] => stdClass Object
            (
                [productoId] => 22
            )

    )

[6] => Array
    (
        [0] => stdClass Object
            (
                [productoId] => 16
            )

        [1] => stdClass Object
            (
                [productoId] => 17
            )

    )

) 
```

我想获取所有数组中存在的重复值，例如：

```
stdClass Object
        (
            [productoId] => 16
        ) 
```

但不是：

```
stdClass Object
        (
            [productoId] => 21
        ) 
```

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:45:40.647

像这样：

```
$array = array(
            3 => array((object) array('productoId' => '16'), (object) array('productoId' => '21'), (object) array('productoId' => '22')),
            7 => array((object) array('productoId' => '16'), (object) array('productoId' => '21'), (object) array('productoId' => '22')),
            6 => array((object) array('productoId' => '16'), (object) array('productoId' => '17'))
        );

$arrays = count($array);
$match = array();
$duplicates = array();
foreach($array as $one){
    foreach($one as $single){
        $var = (array)$single;
        if(!isset($match[$var['productoId']])) { $match[$var['productoId']] = 0; }
        $match[$var['productoId']]++;
        if($match[$var['productoId']] == $arrays){
            $duplicates[] = (int)$var['productoId'];
        }
    }
}
print_r($duplicates); 
```

# java - Java 写入标准输入

> ID：12188339
> 
> 赞同：0
> 
> 时间：2012-08-30T00:29:18.380
> 
> 标签：java, jruby, stdin

所以我已经导入了一个 jruby 解释器作为一个库来运行一个外部 ruby​​ 应用程序。但是我需要以某种方式与 ruby​​ 应用程序交互。现在我有 ruby​​ 应用程序在标准输出上输出信息并在标准输入中请求用户选项。

因此，如果我希望 java 能够处理插入选项而不是用户，我需要一种可以从 java 以某种方式写入标准输入以选择选项的方法。有谁知道我该怎么做？或者甚至是更好的方法来做到这一点？

我这样称呼jruby：

```
String[] newargs = new String[2];
newargs[0] = "-S";
newargs[1]  = "path_to_some_rubyfile.rb"
org.jruby.Main jruby = new org.jruby.Main();
ruby.main(newargs); 
```

ruby 应用程序输出如下内容：

```
How do you feel today?
(1) Happy
(2) Sad 
```

然后等待用户输入输入 1 或 2。但我希望 Java 输入这些选项而不是让用户输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:38:27.323

我对 JRuby 并不太熟悉，老实说我会认为它会自动包装 System.in。检查是否存在这样的选项。否则，我个人的选择是简单地启动一个新的 Process("ruby") 并使用它提供的流。

问候 md_5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:39:25.027

Jruby 确实有一种方法可以通过指定一个输入流和两个输出流来构建它，但是我发现更好的方法是创建一个写入 PipedInputStream 的 PipedOutPutstream，然后将 System 输入设置为 PipedInputStream，如下所示：

```
PipedOutputStream inwriter = new PipedOutputStream();
PipedInputStream input = new PipedInputStream(inwriter);
System.setIn(input);
inwriter.write("1\n".getBytes()); 
```

# java - 无法使用linkedin-j在LinkedIN上发布任何内容

> ID：12188341
> 
> 赞同：9
> 
> 时间：2012-08-30T00:29:32.627
> 
> 标签：java, android, linkedin, linkedin-j

首先，我的问题是我无法发布任何网络更新、发布共享或通过 ID 邀请。我总是得到以下异常：

```
08-29 17:18:04.000: E/AndroidRuntime(4316): FATAL EXCEPTION: main
08-29 17:18:04.000: E/AndroidRuntime(4316): com.google.code.linkedinapi.client.LinkedInApiClientException: Access to posting network updates denied.
08-29 17:18:04.000: E/AndroidRuntime(4316):     at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.createLinkedInApiClientException(BaseLinkedInApiClient.java:3906)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.callApiMethod(BaseLinkedInApiClient.java:3846)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.postNetworkUpdate(BaseLinkedInApiClient.java:1172)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at pl.osadkowski.LITest.LITestActivity.onNewIntent(LITestActivity.java:61)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.app.Instrumentation.callActivityOnNewIntent(Instrumentation.java:1123)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.app.ActivityThread.deliverNewIntents(ActivityThread.java:2042)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.app.ActivityThread.performNewIntents(ActivityThread.java:2055)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.app.ActivityThread.handleNewIntent(ActivityThread.java:2064)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.app.ActivityThread.access$1400(ActivityThread.java:123)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1194)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.os.Looper.loop(Looper.java:137)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at android.app.ActivityThread.main(ActivityThread.java:4424)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at java.lang.reflect.Method.invoke(Method.java:511)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-29 17:18:04.000: E/AndroidRuntime(4316):     at dalvik.system.NativeStart.main(Native Method) 
```

其次，我尝试了什么？好吧，我确定我没有尝试一切，否则它会起作用，但我觉得我已经用尽了所有可能性。我尝试过的一些事情无济于事：

[https://developer.linkedin.com/documents/authentication#granting](https://developer.linkedin.com/documents/authentication#granting)

[https://stackoverflow.com/a/10872824/1436210](https://stackoverflow.com/a/10872824/1436210)

[http://code.google.com/p/linkedin-j/source/browse/trunk/linkedin-j/core/src/examples/java/com/google/code/linkedinapi/client/examples/PostNetworkUpdateExample.java? r=197](http://code.google.com/p/linkedin-j/source/browse/trunk/linkedin-j/core/src/examples/java/com/google/code/linkedinapi/client/examples/PostNetworkUpdateExample.java?r=197)

[http://code.google.com/p/linkedin-j/wiki/GettingStarted](http://code.google.com/p/linkedin-j/wiki/GettingStarted)

[http://code.google.com/p/linkedin-j/wiki/AndroidConfiguration](http://code.google.com/p/linkedin-j/wiki/AndroidConfiguration)

我真的希望有人能帮忙！！我什么都试！！太感谢了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T10:39:41.913

我对版本 1.0.429 的linkedin-j-android.jar 的范围参数进行了修复

这是下载带有范围修复补丁的linkedin-j-android.jar的链接

[http://db.tt/yQjhqeq3](http://db.tt/yQjhqeq3)

和用法是这样的，它是附加参数

```
private String CONSUMER_KEY="XX"; // your consumer key here
private String CONSUMER_SECRET="YY"; // your consumer secret here
private String scopeParams="rw_nus+r_basicprofile";

LinkedInOAuthService oAuthService=LinkedInOAuthServiceFactory
            .getInstance().createLinkedInOAuthService(
                    CONSUMER_KEY,CONSUMER_SECRET, scopeParams); 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:57:30.430

您不必更改源代码。您可以通过反射更改 URL：

```
java.lang.reflect.Field field = LinkedInApiUrls.class.getField("LINKED_IN_OAUTH_REQUEST_TOKEN_URL");
field.setAccessible(true);
java.lang.reflect.Field modifiersField = java.lang.reflect.Field.class.getDeclaredField("modifiers");
modifiersField.setAccessible(true);
modifiersField.setInt(field, field.getModifiers() & ~Modifier.FINAL);
field.set(null, LinkedInApiUrls.LINKED_IN_OAUTH_REQUEST_TOKEN_URL + "?scope=r_basicprofile+r_emailaddress"); 
```

无论如何，LinkedIn oAuth1 API 不支持获取电子邮件，您必须使用 oAuth2 API ( [http://developer.linkedin.com/documents/authentication](http://developer.linkedin.com/documents/authentication) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:20:36.410

我通过使用 scribe.jar 而不是linkedin-j.jar 解决了这个问题。您必须提取 jar 中的类并编辑 org.scribe.builder.api.LinkedInApi.class 以将 url “https://api.linkedin.com/uas/oauth/requestToken”更改为“https://api .linkedin.com/uas/oauth/requestToken?scope=rw_nus”。

您可以通过从包中删除类 LinkedInApi 然后重新打包 scribe.jar 文件来实现此目的。并且，通过更改 url 在项目的同一个包中创建一个具有相同名称的文件。您可以在“https://github.com/fernandezpablo85/scribe-java/blob/master/src/main/java/org/scribe/builder/api/LinkedInApi.java”位置获取文件的 .java 版本.

这是在向用户请求权限时添加进行网络更新的权限。用于发送网络更新输入的 xml 在链接“https://developer.linkedin.com/documents/share-api”中给出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T10:45:38.007

我也遇到了同样的问题。我看到我`requestToken`没有向用户请求网络更新的许可。所以我无法获得网络更新。

但是 api 中的分配范围部分在`linkedin-j`哪里？我查看了linkedin api，发现我们必须`scope=rw_nus+r_basicprofile`在requestToken 中使用param。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T13:21:38.467

@eddy，简单的解决方法是下载linked-j的src jar，然后找到LinkedInApiUrls.properties，最后编辑属性：“com.google.code.linkedinapi.client.oauth.requestToken”`https://api.linkedin.com/uas/oauth/requestToken?scope=rw_nus+r_basicprofile`

然后将编辑后的 ​​src 代码作为库添加到您的项目中。

# c# - 在 Linux / Mono 上运行 ServiceStack 的最佳方式是什么？

> ID：12188356
> 
> 赞同：48
> 
> 时间：2012-08-30T00:31:59.503
> 
> 标签：c#, linux, mono, servicestack, mod-fastcgi

[在ServiceStack 网站](http://www.servicestack.net)上列出的它表明 ServiceStack 可以在 Mono 上运行，其中之一是：

*   XSP
*   mod_mono
*   快速Cgi
*   安慰

这些不同的配置是什么，哪些是 Mono 上的 Web 服务的首选？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-08-30T00:31:59.503

## Linux 更新

从[v4.5.2 版本开始，](http://docs.servicestack.net/releases/v4.5.2) ServiceStack 现在支持 .NET Core，与 Mono 相比，它提供了显着的性能和稳定性改进，Mono 源自共享的跨平台代码库，并得到了微软资源充足、积极响应的团队的支持。如果您当前在 Mono 上运行 ServiceStack，我们强烈建议您升级到 .NET Core，以利用其卓越的性能、稳定性和自上而下支持的技术堆栈。

## 单声道更新

我们推荐的在 Linux 和 Mono 上托管 ASP .NET 站点的设置是使用 nginx/HyperFastCgi。我们已经发布了一个分步指南，从头开始创建一个 Ubuntu 虚拟机，并在[mono-server-config](https://github.com/ServiceStackApps/mono-server-config)完成部署 / 安装 / conf / init 脚本。

在注意到几个稳定性和性能问题后，我们不再推荐 MonoFastCGI。这篇博文很好地分析了[Mono 中不同 ASP.NET 托管选项](http://forcedtoadmin.blogspot.ru/2013/11/servicestack-performance-in-mono-p2.html#stat)的性能、内存使用和稳定性。

* * *

## 发展

[XSP](http://www.mono-project.com/ASP.NET)类似于 VS.NET WebDev 服务器——一个用 C# 编写的简单的独立 ASP.NET WebServer。这适用于开发或小工作量。您只需从 ServiceStack ASP.NET 主机的根目录运行它，它就会在`http://localhost:8080`.

## 生产

对于外部 Internet 服务，您通常希望将 ServiceStack Web 服务托管为全功能 Web 服务器的一部分。适用于 Linux 的 2 个最受欢迎的全功能 Web 服务器是：

### Nginx

使用[Mono FastCGI](http://www.mono-project.com/FastCGI_Nginx)在[Nginx](http://nginx.com/)中托管 ServiceStack ASP.NET 主机。

### 阿帕奇

使用[mod_mono在](http://www.mono-project.com/Mod_mono)[Apache HTTP Server](http://httpd.apache.org/)中托管 ServiceStack ASP.NET 主机。

### 自托管

ServiceStack 还支持自托管，它允许您在独立的控制台应用程序（即没有 Web 服务器）中自行运行您的 ServiceStack Web 服务。当您不需要功能齐全的 Web 服务器的服务时，这是一个好主意（例如：您只需要在 Intranet 上内部托管 Web 服务）。

默认情况下，相同的 ServiceStack 控制台应用程序二进制文件按原样在 Windows/.NET 和 Mono/Linux 上运行。尽管如果您愿意，您可以轻松地守护您的应用程序以[作为 Linux 守护程序运行，如此处所述](https://github.com/ServiceStack/ServiceStack/wiki/Run-ServiceStack-as-a-daemon-on-Linux)。wiki 页面还包括配置自托管 Web 服务以在 Nginx 或 Apache 反向代理之后运行的说明。

由于它非常适合 Heroku 的并发模型[，如其 12 因素应用程序](http://www.12factor.net/concurrency)自托管中所述，我们将在不久的将来寻求提供更多支持。

### ServiceStack.net Nginx / Mono FastCGI 配置

servicestack.net 网站本身（包括所有现场演示）在使用 Nginx + Mono FastCGI的[Ubuntu hetzner vServer上运行。](http://www.hetzner.de/en/hosting/produkte_vserver/vq19)

此命令用于启动 FastCGI 后台进程：

```
fastcgi-mono-server4 --appconfigdir /etc/rc.d/init.d/mono-fastcgi 
  /socket=tcp:127.0.0.1:9000 /logfile=/var/log/mono/fastcgi.log & 
```

[它托管在使用XSP 的 WebApp File Format](http://manpages.ubuntu.com/manpages/intrepid/man1/xsp.1.html)`/etc/rc.d/init.d/mono-fastcgi`指定的文件夹中的 *.webapp 文件中定义的所有应用程序，例如：

ServiceStack.webapp：

```
<apps>
<web-application>
        <name>ServiceStack.Northwind</name>
        <vhost>*</vhost>
        <vport>80</vport>
        <vpath>/ServiceStack.Northwind</vpath>
        <path>/home/mythz/src/ServiceStack.Northwind</path>
</web-application>
</apps> 
```

这会在后台运行 FastCGI Mono 进程，您可以通过将此规则添加到 nginx.conf 来连接 Nginx：

```
location ~ /(ServiceStack|RedisAdminUI|RedisStackOverflow|RestFiles)\.* {  
   root /usr/share/nginx/mono/servicestack.net/;  
   index index.html index.htm index.aspx default.htm Default.htm;  
   fastcgi_index /default.htm;
   fastcgi_pass 127.0.0.1:9000;  
   fastcgi_param SCRIPT_FILENAME /usr/share/servicestack.net$fastcgi_script_name;
   include /etc/nginx/fastcgi_params;  
} 
```

它将以`/ServiceStack`or`/RedisAdminUI`等​​开头的任何路由转发到 FastCGI 单服务器进程进行处理。以这种方式托管的一些示例应用程序：

*   [http://www.servicestack.net/ServiceStack.Northwind/](http://www.servicestack.net/ServiceStack.Northwind/)
*   [http://www.servicestack.net/ServiceStack.Hello/](http://www.servicestack.net/ServiceStack.Hello/)
*   [http://www.servicestack.net/RedisAdminUI/AjaxClient/](http://www.servicestack.net/RedisAdminUI/AjaxClient/)
*   [http://www.servicestack.net/RedisStackOverflow/](http://www.servicestack.net/RedisStackOverflow/)

[有兴趣的人可以下载](https://groups.google.com/forum/#!msg/servicestack/kzfS88RldIU/Hz7asC4nA78J)servicestack.net 的完整 Nginx + FastCGI 配置文件。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-06T10:53:51.680

**在生产中，我们使用带有 unix 文件套接字的 nginx**

当使用 nginx、服务堆栈和单声道进行套接字通信时，我们发现了一个错误/内存泄漏。这是有 500 个并发请求，而您预计 CPU 和内存会出现峰值，但它再也不会下降。我们没有做任何进一步的测试来发现问题出在哪里，但是[xamarin bugzilla](https://bugzilla.xamarin.com/show_bug.cgi?id=6685)记录了一个错误，看起来与我们遇到的问题相似。基本上我们尝试了以下方法，这对我们来说已经足够好了。

我们切换到使用具有以下命令参数的 unix 套接字

> fastcgi-mono-server4 /filename=/tmp/something.socket /socket=unix /applications=/var/www/

我们使用这种方法遇到的问题是，每次运行 fastcgi-mono-server4 时，socket 文件的权限都会改变，所以在启动 fastcgi-mono-server4 后必须更正它们！另一个缺点是在我们的机器上它只能处理大约 120 个并发请求。然而，目前这对我们来说并不是一个真正的问题，你总是可以产生更多的进程。

希望这可以帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-28T04:23:49.290

免责声明：我是 HyperFastCgi 服务器的作者，博客文章的作者在 ceco 的回答中被提及

带有[HyperFastCgi](http://github.com/xplicit/HyperFastCgi)的 nginx 可以完成这项工作。HyperFastCgi 不会像单声道 fastcgi 服务器那样泄漏内存并且执行速度更快，因为它使用低级单声道 API 在应用程序域之间传递数据，而不是跨域调用的慢单声道 JIT 实现。它还可以选择使用本地*libevent*库进行套接字通信，这比当前的单声道 System.Net.Sockets 实现快大约 1.5-2。

HyperFastCgi 的主要特点：

*   允许使用 3 种不同的方式来处理套接字和跨域通信：
    *   `Managed Listener with Managed Transport`（仅使用托管代码，异步 System.Net.Sockets。由于 JIT 跨域调用缓慢，单声道速度较慢）
    *   `Managed Listener with Combined Transport`（使用异步 System.Net.Sockets 作为侦听器和用于跨域调用的低级单声道 API。快得多）
    *   `Native Listener`（使用原生*libevent*作为套接字库和低级单声道 API 进行跨域调用。性能最佳）
*   允许多种并行 Web 请求的方法：使用 ThreadPool、.NET 4.5 任务或单线程。最后一个选项与`Native Listener`使网络服务器的工作方式相结合`NodeJS`：所有请求都以异步方式在单线程中处理。
*   允许在完全不使用 System.Web 的情况下编写简单的请求处理程序。这将请求的处理性能提高了 2-2.5 倍。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-30T09:16:02.310

有一篇关于使用 ServiceStack 的 Mono 性能的有用且相对较新的博客文章。我认为它可能对一些即将决定如何托管他们的服务的人有用：**[Mono 中的 Servicestack 性能](http://forcedtoadmin.blogspot.com/2013/11/servicestack-performance-in-mono-p1.html)**。

正如它所说 - FastCGI Mono 服务器有**大量**内存泄漏，我可以确认。我`ab -n 100000 -c 10 http://myurl`使用 Mono 3.2.8 和 Nginx 1.4.6 和 FastCGI Mono Server 3.0.11 以及使用 ServiceStack 3.9.71 编写的服务在 Ubuntu Desktop 14.04 上运行。我认为我使用哪个版本的 ServiceStack 并不重要，因为 FastCGI Mono Server 是一个漏洞。它吃掉了所有可用的内存——总共 2GB 中大约 1Gb。

此外，Nginx + FastCGI Mono Server 的性能**很差**，至少与其他解决方案相比是这样。我的示例 REST 服务每秒大约有 275 个请求。博客作者查看了 FastCGI Mono Server 的代码并决定编写自己的实现。出于某种原因，它不起作用，至少在我的机器上是这样。

所以，我想，关键是你**不应该**使用 FastCGI Mono Server。除非你想经常重启你的盒子。

由于这篇文章大多是负面的，我应该说我对托管我的服务的意图是什么。`AppHostHttpListenerLongRunningBase`我可能会使用继承Nginx的 AppHost 进行自托管。使用上面相同的示例 REST 服务，我每秒收到大约 1100 个请求。更好的消息是该进程没有明显的泄漏，我用大约 1 000 000 个请求对其进行了测试，并且该进程消耗了 < 100MB RAM。

PS我不是博文的作者：）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-11T17:17:21.960

evhttp-sharp - 带有 NancyFx 主机的 http 服务器

[https://github.com/kekekeks/evhttp-sharp](https://github.com/kekekeks/evhttp-sharp)

非常快，几乎比 nancy-libevent2 快 4 倍。

[http://www.techempower.com/benchmarks/#section=data-r8&hw=i7&test=json&s=2&l=2](http://www.techempower.com/benchmarks/#section=data-r8&hw=i7&test=json&s=2&l=2)

有不同配置的测试结果：

JSON responses per second:

*   evhttp-sharp 91,557
*   nancy-libevent2 17,338
*   servicestack-nginx-d 953
*   nancy 896
*   aspnet-jsonnet-mono 863

# xml - 在 Heroku 上将 SVG XML 转换为 PNG

> ID：12188357
> 
> 赞同：1
> 
> 时间：2012-08-30T00:32:00.843
> 
> 标签：xml, heroku, svg, png, imagemagick-convert

我正在开发一个允许用户使用 Raphael.js 绘制 SVG 的网络应用程序。

当他们发布他们的个人信息时，我使用 XMLSerializer().serializeToString 并通过隐藏的表单字段提交输出以存储到 MySQL 中。

我的问题是我想稍后读出这些 XML 数据并将其转换为 PNG 文件，然后可以稍后将其邮寄给用户，并且我的应用程序部署在 Heroku 上。

我知道蜡染和 rmagick，但不太确定如何将所有东西组合在一起。

我一直在兜圈子，试图找到解决方案 - 会很感激一些方向 - 谢谢！

# java - 在指定范围内创建单个正弦波

> ID：12188362
> 
> 赞同：0
> 
> 时间：2012-08-30T00:32:16.447
> 
> 标签：java, linked-list, javasound

我正在尝试模仿弦乐器。我有一个环形缓冲区实现为链接列表，所有值都初始化为 0，以表示静止的正弦波。

我正在编写一个 pluck() 方法，该方法将缓冲区中的 N 个元素（所有值当前为 0）替换为单个正弦波的 N 个样本，其值在 -.5 和 +5 之间。

你能帮我解决这个问题的数学方面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:43:26.073

您必须为您的基频创建一个正弦函数，如果您想引入谐波（具有`sqrt(2)`频率比），则必须为其他函数创建一个正弦函数，然后添加一个起音斜率和持续时间，同上用于延音和释放。这是老式电子音乐的基础:)

# jquery - 确认离开页面，除非通过表单提交离开

> ID：12188363
> 
> 赞同：0
> 
> 时间：2012-08-30T00:32:24.777
> 
> 标签：jquery

我有一个包含表单的页面，如果他们已经开始输入表单数据，我想提示用户确认离开页面，当然，除非他们通过提交表单离开页面。如果表单已提交导致页面更改，我如何绕过以下代码？

```
$(document).ready(function(){
        window.onbeforeunload = function () {

                return "If you leave this page before submitting your information to us you will need to reenter it again.";

        }
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:40:44.903

只需添加一个标志来跟踪提交的状态（初始化时为假，提交表单时为真），然后在函数（）中检查它。

# scala - 自定义 SBT 构建文件不编译 Play 2.0 中的视图

> ID：12188367
> 
> 赞同：1
> 
> 时间：2012-08-30T00:32:54.773
> 
> 标签：scala, playframework, playframework-2.0, sbt

我有一个正在尝试迁移到 Play 2.0.2 的 Play 1.2.4 应用程序。我目前在 Play 1.2.4 中有这样的结构：

网站依赖于前端目录依赖于前端前端依赖于（编译视图时定义的路由文件）

Frontend 包含一组可供网站和目录使用的视图。做出这个决定是因为 Catalog 非常轻量级，并且用于前端的快速开发。虽然网站中有更多的代码并且需要更长的时间来编码/编译/测试。

我无法将这些项目设置为像这里描述的子项目[http://www.playframework.org/documentation/2.0/SBTSubProjects](http://www.playframework.org/documentation/2.0/SBTSubProjects)因为存在循环依赖。视图使用 Asset.of 需要定义路由文件。但是网站和目录都定义了一个路由文件，而 Play 2.0 不支持来自依赖项的路由文件（这应该在 Play 2.1 中出现）。在目录中，视图在控制器中被引用。

我在想，如果我可以将前端的构建逻辑更改为不尝试编译视图，而只是发布包含它们的工件，那么我可以让网站和目录将这些工件添加到它定义的视图中并一起构建它们。这将打破我的循环依赖。

以前有没有其他人这样做过？我是 SBT 的初学者，甚至不知道这是否可能。谁能告诉我如何修改 Build.scala 文件以停止编译视图而是导出它们？把它做成一个 SBT 插件对我来说有意义吗？如果您知道任何显示如何执行此操作的代码，您可以发布代码的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:42:10.430

我使用 play new 创建了两个项目。LDAPInterface 是我们希望在多个应用程序中使用的 LDAP 接口。第二个项目是访问管理器。在 AccessManager\project\build.scala 文件中，我们以这种方式构造它以便使用 LDAPInterface 项目。在 Eclipse 中，我们只是在项目依赖部分中包含了 LDAPInterface，以便我们可以进行调试。你总是可以编译一个 jar 文件并包含它，但是......如果你想深入了解 eclipse 中的项目依赖关系，那就没那么好了。如果我们使用 play.Project，它会将其识别为 Web 项目。如果我们只是使用 Project，它似乎认为它是一个控制台应用程序。

```
import sbt._
import Keys._
import play.Project._

object LDAPInterface {
  lazy val depProject = RootProject(file("../LDAPInterface"))
}

object ApplicationBuild extends Build {

  val appName         = "AccessManager"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
     //Add your project dependencies here,
    javaCore,
    javaJdbc,
    javaEbean 
  )

   //   lazy val root = Project(id = "AccessManager",
    //  base = file(".")
    //).dependsOn(LDAPInterface.depProject)

  lazy val main = play.Project(appName, appVersion, appDependencies).settings(
   //  Add your own project settings here      
  ).dependsOn(LDAPInterface.depProject)
} 
```

# entity-framework - EF 过滤具有延迟加载的子表

> ID：12188373
> 
> 赞同：3
> 
> 时间：2012-08-30T00:33:28.423
> 
> 标签：entity-framework, entity-framework-4

我正在使用带有 POCO 和存储库模式的实体框架，并且想知道是否有任何方法可以过滤子列表延迟加载。例子：

```
class Person
{
    public virtual Organisation organisation {set; get;}
}
class Organisation
{
    public virtual ICollection<Product> products {set; get;}
}
class Product
{
    public bool active {set; get;}
} 
```

目前我只有一个人存储库，因为我总是从那一点开始，所以理想情况下我想做以下事情：

```
Person person = personRepo.GetById(Id);
var products = person.organisation.products; 
```

并让它只从数据库中加载 active = true 的产品。

这可能吗？如果可以，怎么办？

**编辑**我最好的猜测是可以将过滤器添加到实体的配置中。或者可能有一种方法可以拦截/覆盖延迟加载调用并对其进行修改。显然，如果我创建了一个组织存储库，我可以随意手动加载它，但我试图避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:21:20.267

通过延迟加载没有直接的方法，但如果您愿意显式加载集合，您可以按照[此博客](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)中的内容进行操作，请参阅**显式加载相关实体时应用过滤器**部分。

```
context.Entry(person)
    .Collection(p => p.organisation.products)
    .Query()
    .Where(u => u.IsActive)
    .Load(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:23:41.543

这可能是相关的：

[首先在 CTP4 代码中使用 CreateSourceQuery](https://stackoverflow.com/questions/3398445/using-createsourcequery-in-ctp4-code-first)

如果您将属性重新定义为`ICollection<T>`而不是`IList<T>`启用更改跟踪代理，那么您可能能够将它们转换为`EntityCollection<T>`然后调用`CreateSourceQuery()`这将允许您对它们执行 LINQ to Entities 查询。

例子：

```
var productsCollection = (EntityCollection<Product>)person.organisation.products;
var productsQuery = productsCollection.CreateSourceQuery();
var activeProducts = products.Where(p => p.Active); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:42:39.497

您可以执行 Mark Oreta 和 luksan 的建议，同时将所有查询逻辑保留在存储库中。

您所要做的就是将 a 传递给`Lazy<ICollection<Product>>`组织构造函数，并使用它们提供的逻辑。在您访问惰性实例的 value 属性之前，它不会评估。

**更新**

```
/*  
    First, here are your changes to the Organisation class: 
    Add a constructor dependency on the delegate to load the products to your 
    organization class.  You will create this object in the repository method 
    and assign it to the Person.Organization property 
*/
public class Organisation
{
    private readonly Lazy<ICollection<Product>> lazyProducts;
    public Organisation(Func<ICollection<Product>> loadProducts){
        this.lazyProducts = new Lazy<ICollection<Product>>(loadProducts);
    }

    //  The underlying lazy field will not invoke the load delegate until this property is accessed
    public virtual ICollection<Product> Products { get { return this.lazyProducts.Value; } }
} 
```

现在，在您的存储库方法中，当您构造 Person 对象时，您将为 Organization 属性分配一个`Organisation`包含延迟加载字段的对象。

所以，没有看到你的整个模型，它看起来像

```
 public Person GetById(int id){
    var person = context.People.Single(p => p.Id == id);

    /*  Now, I'm not sure about the cardinality of the person-organization or organisation
        product relationships, but let's assume you have some way to access the PK of the 
        organization record from the Person and that the Product has a reference to 
        its Organisation.  I may be misinterpreting your model, but hopefully you 
        will get the idea
     */

     var organisationId = /*  insert the aforementioned magic here */

     Func<ICollection<Product>> loadProducts = () => context.Products.Where(product => product.IsActive && product.OrganisationId == organisationId).ToList(); 

    person.Organisation = new Organisation( loadProducts );

    return person;
 } 
```

By using this approach, the query for the products will not be loaded until you access the `Products` property on the `Organisation`instance, and you can keep all your logic in the repository. There's a good chance that I made incorrect assumptions about your model (as the sample code is quite incomplete), but I think there is enough here for you to see how to use the pattern. Let me know if any of this is unclear.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T01:03:39.113

您可以使用 Query() 方法来实现这一点。就像是：

```
 context.Entry(person)
            .Collection(p => p.organisation.products)
            .Query()
            .Where(pro=> pro.Active==true)
            .Load(); 
```

看看这个页面[点击这里](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T01:11:48.077

您的存储库是否使用以下内容：

```
IQueryable<T> Find(System.Linq.Expressions.Expression<Func<T, bool>> expression) 
```

如果是这样，您可以执行以下操作：

```
var person = personRepo.Find(p => p.organisation.products.Any(e => e.active)).FirstOrDefault(); 
```

# google-chrome - Chrome 扩展 - 消息从背景传递到内容脚本

> ID：12188376
> 
> 赞同：0
> 
> 时间：2012-08-30T00:34:00.190
> 
> 标签：google-chrome, google-chrome-extension

我发现了许多将数据从内容主动发送到 background.js 的方法。
但是，是否有任何积极的方式来通知或发送消息从 background.js 到内容脚本？
似乎实现消息传递的通常手段是在后台添加侦听器，并从内容传递消息并获取返回值作为回调。
由于在我打开新页面时端口会不断变化，因此打开端口似乎不是一种选择。
我需要解决方法：从后台发送消息并且内容具有侦听器。

我的用例的详细信息是..
我在 background.js (chrome.cookies.onChanged.addListener) 中有 Cookie 更改侦听器，
并且我想在每次 cookie 更改/更新时通知内容脚本。

在后台.js

```
 function cookieUpdate(info) {
 // need to  notify to contents script
 };

 chrome.cookies.onChanged.addListener(cookieUpdate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:41:56.043

试试 chrome.tabs.sendRequest(tabId, {}, callback);

# mysql - MySQL不断收到相同的错误“数据包乱序”

> ID：12188377
> 
> 赞同：1
> 
> 时间：2012-08-30T00:34:00.983
> 
> 标签：mysql, ruby, runtime-error

我已经阅读了类似的问题，但似乎没有什么可以解决我的问题。我得到的确切错误是：

```
/mysql.rb:1019:in `read': Packets out of order: 0<>  (RuntimeError)

from C:/Ruby193/lib/ruby/1.9.1/mysql.rb:444:in `read'
from C:/Ruby193/lib/ruby/1.9.1/mysql.rb:110:in `real_connect'
from C:/Ruby193/lib/ruby/1.9.1/mysql.rb:91:in `initialize'
from testmysql.rb:6:in `new'
from testmysql.rb:6:in `<main>' 
```

我的代码只是一个测试脚本，用于检查如何使用它：

```
#!/usr/bin/ruby

require 'mysql'

begin
con = Mysql.new 'localhost', 'username', 'password'
puts con.get_server_info
rs = con.query 'SELECT VERSION()'
puts rs.fetch_row

rescue Mysql::Error=> e
puts e.errno
puts e.error

ensure
con.close if con
end 
```

我知道一定有一些我忽略了的东西。

# c# - ServiceStack Redis 什么是骨灰盒

> ID：12188378
> 
> 赞同：7
> 
> 时间：2012-08-30T00:34:25.960
> 
> 标签：c#, redis, servicestack

“瓮：”代表什么？

我正在使用 ServiceStack Redis 示例。这似乎是一种命名约定，数据库中的许多键以“urn:”开头。

通过调用`somePoco.CreateUrn();`-->`"urn:somePoco:123"`它在数据库中创建密钥。

它的优点是 RedisTypedClient 可以在以下代码中对其进行 regonize：例如

```
var redisSomePoco = redis.As<SomePoco>();
var somePoco = redisSomePoco.GetById("123"); //it knows I want value of key "urn:somePoco:123"
redisSomePoco.Store(somePoco); //it knows how to store my poco value in key "urn:somePoco:123"
//"{\"Id\":123,\"DisplayName\":\"Michael\"}" 
```

我的理解正确吗？或者我什至接近？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T00:55:21.750

它代表[统一资源名称](http://en.wikipedia.org/wiki/Uniform_Resource_Name)。

由于 Redis 中没有命名空间或模式的概念，我们使用具有以下格式的完全限定键：

```
urn:{TypeName}:{Id} 
```

[使用ServiceStack 的 C# RedisClient](https://github.com/ServiceStack/ServiceStack.Redis)的**Typed API**唯一存储和标识存储在 Redis 中的任何 POCO 实例。

RedisAdmin [UI](http://www.servicestack.net/RedisAdminUI/AjaxClient/)也利用这个约定来提供一个分层的*树状结构*来访问您的数据，尽管它们在 Redis 中没有这样的概念。

# jpa - eclipselink 2 oneToMany 与 1 个关联表，数据未从数据库刷新

> ID：12188379
> 
> 赞同：1
> 
> 时间：2012-08-30T00:34:44.073
> 
> 标签：jpa, eclipselink

我有 2 个表 A 和 B 以及一个关联表 AB

A 对 AB 是 oneToMany，B 对 AB 是 oneToMany，

我关闭了eclipselink的缓存。使用

```
<property name="eclipselink.query-results-cache" value="false"/>
<property name="eclipselink.cache.shared.default" value="false"/> 
```

我从一个线程更新 A，这意味着在一个 entityManager 中更新 A

并用于`entityManager.find(B.class,id)`获取 B 并用于`entityManager.refresh(B)`强制在另一个线程（另一个 entityManager）中从 DB 读取 B 的数据

但是当我尝试使用 B.getABlist() 来获取 A 的信息时，A 的信息不是 DB 中的最新信息

所以我的问题是，我的操作有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:53:46.457

我发现了问题

我忘记在 AB 实体中为与 A 和 B 的两个 ManyToOney 关系设置 CascadeType.REFRESH

所以刷新不起作用

# ruby-on-rails - 渲染部分 :collection => @array 指定变量名

> ID：12188381
> 
> 赞同：59
> 
> 时间：2012-08-30T00:34:56.630
> 
> 标签：ruby-on-rails

我正在渲染这样的部分：

```
$("#box_container").html("<%= escape_javascript( render :partial => 'contacts/contact_tile', :collection => @contacts) %>") 
```

问题是我的部分期望变量“联系人”。

```
ActionView::Template::Error (undefined local variable or method `contact' 
```

我只是想告诉部分期望一个变量`contact`。应该遍历`@contacts`as `contact`。我怎么做？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-10-05T23:40:01.250

从文档中发现这也很有帮助。您不仅限于以部分命名的变量：

[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

> 要在部分中使用自定义局部变量名称，请在对部分的调用中指定 :as 选项：

```
<%= render :partial => "product", :collection => @products, :as => :item %> 
```

通过此更改，您可以访问 @products 集合的实例作为部分中的项目局部变量。”

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-30T01:53:17.343

[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)上的文档说：

> 当使用复数集合调用分部时，分部的各个实例可以通过以分部命名的变量访问正在呈现的集合的成员。

因此它将传递一个名为“contact_tile”而不是“contact”的变量。也许你可以重命名你的部分。

如果此命名很重要，您可以在不使用 collection 选项的情况下通过以下方式显式执行此操作：

```
@contacts.each { |contact| render :partial => 'contacts/contact_tile', :locals => {:contact => contact } } 
```

（尽管正如评论者指出的那样，这可能没有那么高效）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-10-21T09:22:21.120

最新的语法是：

index.html.erb

```
<%= render partial: "product", collection: @products %> 
```

_product.html.erb

```
<p>Product Name: <%= product.name %></p> 
```

`@products`部分用作`product`

其中@products 可以被视为`Product.all` 并且`product`可以被视为一行产品，即`Product.first`一个一个地循环所有产品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-18T13:05:31.330

您可以使用关键字将自定义变量名称指定为默认值`as:`

```
<%= render partial: 'line_items/line_item', collection: order.line_items, as: :item %> 
```

# c# - 使用 XmlReader 将大型 XML 文件解析为多个输出 xml - 获取所有其他元素

> ID：12188383
> 
> 赞同：-1
> 
> 时间：2012-08-30T00:34:58.307
> 
> 标签：c#, xml, split, large-files, xmlreader

我需要获取一个非常大的 XML 文件，并从输入文件的数千个重复节点中创建多个输出 xml 文件。源文件“AnimalBatch.xml”中没有空格，如下所示：

`<?xml version="1.0" encoding="utf-8" ?><Animals><Animal id="1001"><Quantity>One</Quantity><Adjective>Red</Adjective><Name>Rooster</Name></Animal><Animal id="1002"><Quantity>Two</Quantity><Adjective>Stubborn</Adjective><Name>Donkeys</Name></Animal><Animal id="1003"><Quantity>Three</Quantity><Adjective>Blind</Adjective><Name>Mice</Name></Animal><Animal id="1004"><Quantity>Four</Quantity><Adjective>Purple</Adjective><Name>Horses</Name></Animal><Animal id="1005"><Quantity>Five</Quantity><Adjective>Long</Adjective><Name>Centipedes</Name></Animal><Animal id="1006"><Quantity>Six</Quantity><Adjective>Dark</Adjective><Name>Owls</Name></Animal></Animals>`

程序需要对重复的“Animal”进行拆分，生成适当数量的文件，命名为：Animal_1001.xml、Animal_1002.xml、Animal_1003.xml等。

* * *

Animal_1001.xml：
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>One</Quantity>`
`<Adjective>Red</Adjective>`
`<Name>Rooster</Name>`
`</Animal>`

* * *

Animal_1002.xml
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>Two</Quantity>`
`<Adjective>Stubborn</Adjective>`
`<Name>Donkeys</Name>`
`</Animal>`

* * *

Animal_1003.xml>
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>Three</Quantity>`
`<Adjective>Blind</Adjective>`
`<Name>Mice</Name>`
`</Animal>`

下面的代码有效，但前提是输入文件在`<Animal id="xxxx">` 元素后有 CR/LF。如果它没有“空白”（我没有，也不能那样得到），我会得到其他的（奇数动物）

```
 static void SplitXMLReader()
    {
        string strFileName;
        string strSeq = "";

        XmlReader doc = XmlReader.Create("C:\\AnimalBatch.xml");

        while (doc.Read())
        {
            if ( doc.Name == "Animal"  && doc.NodeType == XmlNodeType.Element )
            {
                strSeq = doc.GetAttribute("id"); 

                XmlDocument outdoc = new XmlDocument();
                XmlDeclaration xmlDeclaration = outdoc.CreateXmlDeclaration("1.0", "utf-8", null);                     
                XmlElement rootNode = outdoc.CreateElement(doc.Name);

                rootNode.InnerXml = doc.ReadInnerXml();  
                // This seems to be advancing the cursor in doc too far.

                outdoc.InsertBefore(xmlDeclaration, outdoc.DocumentElement);
                outdoc.AppendChild(rootNode);

                strFileName = "Animal_" + strSeq + ".xml";
                outdoc.Save("C:\\" + strFileName);                    
            }
        }
    } 
```

我的理解是 XML 中的“空白”或格式应该对 XmlReader 没有影响 - 但我已经尝试过这两种方式，在 之后有和没有 CR/LF `<Animal id="xxxx">`，并且可以确认存在差异。如果它有 CR/LF（甚至可能只是一个空格，我将在接下来尝试） - 它会`<Animal>`完全处理每个节点，并保存在来自 id 属性的正确文件名下。

有人可以让我知道这里发生了什么 - 以及可能的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:00:51.757

是的，当使用`doc.readInnerXml()`空白很重要时。

[从函数的文档中](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readinnerxml%28v=vs.95%29.aspx)。这将返回一个字符串。所以当然空白很重要。如果您希望将内部文本作为 xmlNode，您应该使用[类似这样的内容](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readsubtree%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:18:02.757

感谢您使用 ReadSubTree() 方法的指导：

此代码适用于没有换行符的 XML 输入文件：

```
 static void SplitXMLReaderSubTree()
    {
        string strFileName;
        string strSeq = "";
        XmlReader doc = XmlReader.Create("C:\\AnimalBatch.xml");

        while (!doc.EOF)
        {
            if ( doc.Name == "Animal"  && doc.NodeType == XmlNodeType.Element )
            {
                strSeq = doc.GetAttribute("id");
                XmlReader inner = doc.ReadSubtree();
                inner.Read();
                XmlDocument outdoc = new XmlDocument();
                XmlDeclaration xmlDeclaration = outdoc.CreateXmlDeclaration("1.0", "utf-8", null);
                XmlElement myElement;
                myElement = outdoc.CreateElement(doc.Name);
                myElement.InnerXml = inner.ReadInnerXml();
                inner.Close();
                myElement.Attributes.RemoveAll();
                outdoc.InsertBefore(xmlDeclaration, outdoc.DocumentElement);
                outdoc.ImportNode(myElement, true);
                outdoc.AppendChild(myElement);
                strFileName = "Animal_" + strSeq + ".xml";
                outdoc.Save("C:\\" + strFileName);                    
            }
            else
            {
                doc.Read();
            }
        } 
```

# android - 如何也用选择器制作我的项目？

> ID：12188390
> 
> 赞同：0
> 
> 时间：2012-08-30T00:37:36.093
> 
> 标签：android, styles, spinner, selector

当我单击微调器时，该项目也不会变成蓝色。我的项目是一个自定义项目，它具有带选择器的背景（按下时为灰色和蓝色）。

![在此处输入图像描述](../Images/ab6bccfe9c493649968d046abf604161.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:47:24.270

仅将视图的所有背景从自定义项更改为“@android:color/transparent”并起作用。

# google-app-engine - 中国的 GAE 应用程序，*.appspot.com 托管域

> ID：12188391
> 
> 赞同：4
> 
> 时间：2012-08-30T00:37:39.207
> 
> 标签：google-app-engine, firewall

我读到appspot.com 的子域在中国无法访问，因为它被中国的GreatFireWall 阻止。如果您的应用程序托管在其他域中，例如[http://example.com](http://example.com)，它可以访问吗？

我在[http://viewdns.info/chinesefirewall](http://viewdns.info/chinesefirewall)和[http://www.greatfirewallofchina.org](http://www.greatfirewallofchina.org)进行了测试，结果是域可以访问，但我们的appspot.com子域不能访问。它会遇到一些麻烦还是我在测试时错过了一些东西。

对此还有什么其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:20:53.143

我们实际上也对此进行了测试，实际上当您通过`*.appspot.com`它被阻止的域访问它时，但当它托管在它自己的域上时却没有。

*   Khan Academy[完全建立在 Google App Engine 之上](http://static.googleusercontent.com/external_content/untrusted_dlcp/cloud.google.com/en//files/KhanAcademy.pdf)，并且运行良好，所以我认为您自己的域不会有任何问题。当然，除非*中国的防火墙*会明确地阻止你。

*   我在[Remby.com](http://www.remby.com)工作，它完全建立在 GAE 之上，我们没有为中国做任何特别的事情。从上面的链接看起来它可以工作。

*   [TheSmallestCreature.com](http://thesmallestcreature.com)也是我创建的，并且可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T22:52:55.893

不可以，即使您为 GAE 应用程序使用 Google 的自定义域，在中国也无法访问。

您需要一个反向代理才能使其工作。

搜索 Google App Engine 组存档，那里有很多讨论和答案。

# jpa - 关于 JPA 中的高并发实体和竞争条件的思考......事务性？

> ID：12188394
> 
> 赞同：0
> 
> 时间：2012-08-30T00:38:09.577
> 
> 标签：jpa, jpa-2.0, transactional, spring-transactions

我正在做一个项目，并且遇到了一种“设计问题”。我有一个代表“竞争”的实体。用户获得投票，他们对比赛进行投票。每个比赛有 10 个项目，每个项目总共只能投 10 票。当用户尝试使用他们的投票时，我会快速搜索他们尚未投票的公开比赛。

当我想到多个用户都在争夺同一个竞争时，问题就来了。我不在乎两个用户是否同时投票，但我想防止最近关闭比赛的错误，但仍有用户投票，因为他们在结束之前选择了......我认为投票即将结束时的“竞争条件”。

在我看来，只有几个选项：

选项 1：打开 READ_COMMITTED 事务，但我的理解是这会在读取时锁定行，因此在返回锁定之前不会完成其他查询。由于这是一个JSP应用程序，当JSP完成渲染时，读锁是否结束？似乎我仍然可能遇到同样的问题。

选项 2：写出有多少用户已经查看了比赛。不过，这似乎遵循 Database-as-IPC 反模式，我可以看到监控和维护计数在哪里充其量是棘手的。

选项3：不要担心。如果用户投票时间过长，那么只需抛出一个错误并让他们移动到下一个。

选项 4：严重依赖 AJAX，可能使用 Atmosphere 进行消息传递，以保持比赛页面上的实时投票计数。不确定您如何处理浏览器超时或用户只是在中间离开......也许是某种清理计时器？

现在我倾向于选项 4，因为从用户的角度来看，它似乎在易于实现和易于使用之间取得了很好的平衡，但我想确保我在这里没有遗漏任何角度。

其他人是如何处理类似情况的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:32:30.307

您可能会考虑使用乐观或悲观锁定。这是解决并发问题的正常方法。

# javascript - Jquery：函数加载完成后淡入淡出文本

> ID：12188397
> 
> 赞同：0
> 
> 时间：2012-08-30T00:38:35.877
> 
> 标签：javascript, jquery

如何在调用函数时淡入某些文本并在函数完成时淡出。

我有这个：

```
$(".element").click(function() {
        loadStuff($(this).text());

     }); 
```

说我有另一个类`element2`，我希望它`"Loading"`在 loadstuff 运行时显示并在完成后退出..修改此代码的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:25:16.333

你可以在 jquery 中使用匿名回调，看看这个问题
[Call a function after previous function is complete](https://stackoverflow.com/questions/5000415/javascript-jquery-call-a-function-after-previous-function-is-complete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:53:27.367

这里有点像[http://jsfiddle.net/damian_silvera/24BjA/](http://jsfiddle.net/damian_silvera/24BjA/)

# jquery - jQuery 不隐藏其他 DIV

> ID：12188398
> 
> 赞同：0
> 
> 时间：2012-08-30T00:38:44.267
> 
> 标签：jquery

我遇到了一个问题；我试图让所有其他`DIV`s 关闭并切换一个。我试图自己修复它，但我被卡住了。我希望有人能指出我做错了什么。

它没有在内部运行命令`not(...)`：

```
$(document).ready(function() {
  $('.extralink').click(function() {
    $(this).closest('tr').next('tr.extra').toggle(); 

    $(this).not($(this).closest('tr').next('tr.extra')).hide; 
  });
} 
```

html

```
 <table class="avs" border="1" width="384px">
        <tr class="avs">
            <th>Avatar name</th>
            <th >Position</th>
        </tr>
        <tr class='avs'>
            <td>
                <a class='extralink' href="#"></a>
            </td>
            <td></td>
        </tr>
        <tr class='extra'>
            <td colspan='2' >
                <div>
                    <div>info</div>
                    <div>image</div>
                </div>
            </td>
        </tr>
 <tr class='avs'>
        <td>
            <a class='extralink' href="#"></a>
        </td>
        <td></td>
    </tr>
    <tr class='extra'>
        <td colspan='2' >
            <div>
                <div>info</div>
                <div>image</div>
            </div>
        </td>
    </tr>
    </table>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T00:41:21.923

您缺少 hide 函数上的 () ，需要说明您实际上正在调用它！

```
$(this).not($(this).closest('tr').next('tr.extra')).hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:06:30.550

如果您显示更多的 HTML，它会有所帮助。但这里有一些提示可以帮助你

```
$(document).ready(function() {
  $('.extralink').click(function() {
    // should cache the tr
    $(this).closest('tr').next('tr.extra').toggle();     
    $(this).not($(this).closest('tr').next('tr.extra')).hide; //<--missing ()
    // usually not() isn't used with this - as anything with this is usually used inside not() to filter out
  });
} 
```

所以像这样的东西会更好看

```
$(document).ready(function() {
  $('.extralink').click(function() {
    var $tr = $(this).closest('tr').next('tr.extra');
    $tr.toggle();     
    $('tr.extra').not($tr).hide(); // <-- I'm guessing this is correct
    // since it's these tr's you are looking for to toggle
  });
} 
```

# ios - 无法让 Stencil Buffer 在 iOS 4+ 中工作（5.0 工作正常）。[OpenGL ES 2.0]

> ID：12188399
> 
> 赞同：0
> 
> 时间：2012-08-30T00:38:48.400
> 
> 标签：ios, opengl-es, opengl-es-2.0, framebuffer, stencil-buffer

所以我试图在 iOS 中使用模板缓冲区来进行屏蔽/剪辑。你们知道为什么这段代码可能不起作用吗？这就是我与 Stencils 相关的所有内容。在 iOS 4 上，我得到一个黑屏。在 iOS 5 上，我得到了我所期望的。我在模具中绘制的图像的透明区域是稍后要绘制的唯一区域。

代码如下。

这是我设置 frameBuffer、深度和模板的地方。在 iOS 中，深度和模板是结合在一起的。

```
-(void)setupDepthBuffer
{
    glGenRenderbuffers(1, &depthRenderBuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, depthRenderBuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH24_STENCIL8_OES, self.frame.size.width * [[UIScreen mainScreen] scale], self.frame.size.height * [[UIScreen mainScreen] scale]);
}

-(void)setupFrameBuffer
{    
    glGenFramebuffers(1, &frameBuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, colorRenderBuffer);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthRenderBuffer);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_STENCIL_ATTACHMENT, GL_RENDERBUFFER, depthRenderBuffer);

    // Check the FBO.
    if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {
        NSLog(@"Failure with framebuffer generation: %d", glCheckFramebufferStatus(GL_FRAMEBUFFER));
    }
} 
```

这就是我设置和绘制模板的方式。（下面的着色器代码。）

```
glEnable(GL_STENCIL_TEST);
glDisable(GL_DEPTH_TEST);
glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
glDepthMask(GL_FALSE);

glStencilFunc(GL_ALWAYS, 1, -1);
glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE);

glColorMask(0, 0, 0, 0);
glClear(GL_STENCIL_BUFFER_BIT);

machineForeground.shader = [StencilEffect sharedInstance];
[machineForeground draw];
machineForeground.shader = [BasicEffect sharedInstance];

glDisable(GL_STENCIL_TEST);
glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);
glDepthMask(GL_TRUE); 
```

这是我使用模板的地方。

```
glEnable(GL_STENCIL_TEST);
glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
glStencilFunc(GL_EQUAL, 1, -1);

...Draw Stuff here

glDisable(GL_STENCIL_TEST); 
```

最后是我的片段着色器。

```
varying lowp vec2 TexCoordOut;
uniform sampler2D Texture;

void main(void)
{
    lowp vec4 color = texture2D(Texture, TexCoordOut);

    if(color.a < 0.1)
        gl_FragColor = color;
    else
        discard;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:35:33.517

我能够通过解决我的着色器来解决这个问题。此代码按预期工作正常，但我的顶点数据结构要求的数据比我提供给着色器的数据多。不完全确定允许它在 iOS 5 上运行的引擎盖下发生了什么，但我能够修复它。

那说

```
glColorMask(0, 0, 0, 0); 
```

实际上并没有完成我的目标。我想要的是设置清晰的颜色，即使那样我也只想清除模板，所以我实际上在寻找

```
glStencilMask(1); 
```

# json - 使用 JSON 作为回调参数的 Primefaces 回调

> ID：12188402
> 
> 赞同：1
> 
> 时间：2012-08-30T00:39:01.707
> 
> 标签：json, primefaces

我正在尝试将 Json 作为回调参数传递。任何人都可以更正 javascript 以从 json 对象中获取值吗？

javascript

```
function renderTopic(xhr,status,args){
        alert("iam In renderTopic");
        var topicObject = $.parseJSON(args.topicJSON);
        for(var x in topicObject){
            alert(x.topicBody);
        };
    } 
```

服务器端

```
 jGenerator.writeFieldName("topicBody");
            jGenerator.writeStartArray();
                 ...............
            jGenerator.close();
             context = RequestContext.getCurrentInstance();
             System.out.println("JSON output in string "+out.toString()) 
```

xhtml

```
<p:commandLink action="#{topicController.listAllTopics}"
                id="topicListAllCmdLink" value="" oncomplete="javascript:renderTopic(xhr, status,args)"/> 
```

http响应

```
<partial-response><changes><update id="javax.faces.ViewState"><![CDATA[4091946826703479326:-2361306414195161728]]></update><extension ln="primefaces" type="args">{"topicJSON":"{\"topicBody\":[\"Test10\",\"Test22\",\"Test4\",\"Test11\"]}"}</extension></changes></partial-response> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:30:48.730

一切似乎都很好。你看到任何错误吗？或您可以告诉我们的任何输出。

请参阅此链接以获得更好的描述： [Best method for passing Data from Java/JSF2 bean to Javascript/jQuery Components as return values](https://stackoverflow.com/questions/7930047/best-method-for-passing-data-from-java-jsf2-bean-to-javascript-jquery-components)

# hadoop - HBase 和 hadoop 一起工作

> ID：12188403
> 
> 赞同：0
> 
> 时间：2012-08-30T00:39:11.167
> 
> 标签：hadoop, hbase, bigdata

我正在寻找一些资源来将它们设置为与更新版本一起工作。我看到的所有教程都是针对旧版本的 hadoop，有人知道 1.x 的好资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:19:30.657

我会使用 Cloudera CDH3 或 CDH4 指南来帮助您。尽管您可能必须重新安装您的 hadoop 版本。我推荐 Cloudera，因为他们保留了一个让更新变得轻而易举的存储库。

[https://ccp.cloudera.com/display/CDH4DOC/HBase+Installation](https://ccp.cloudera.com/display/CDH4DOC/HBase+Installation)

上周我已经完成了十几次安装，所以如果你遇到任何问题，特别是打我。

# python - Python - 从另一个中减去包含 str、int、列表键的字典列表

> ID：12188406
> 
> 赞同：0
> 
> 时间：2012-08-30T00:40:21.120
> 
> 标签：python, list, dictionary, subtraction

> **可能重复：**
> [Python - 从另一个中减去一个字典列表](https://stackoverflow.com/questions/12100731/python-subtract-a-list-of-dicts-from-another)

我有兴趣比较多个列表，获取差异并迭代它。

两者都是包含以下键的字典列表：'ssid' - str，'bssid' - str，'channel' - int，'flags' - list，'found' - bool

我试过了：

```
 list = list(set(networks_list).difference(missing_networks)) 
```

但我收到错误：

```
unhashable type 'dict' 
```

我的数据结构如下所示：

```
list: [
    {'found': False, 'flags': ['WPA2-PSK-CCMP', 'WPS', 'ESS'], 'ssid': 'SOHO_BROADCAST', 'bssid': '30:46:9a:9d:11:1a', 'channel': 1},
    {'found': False, 'flags': ['WPA-EAP-TKIP', 'WPA2-EAP-CCMP', 'ESS'], 'ssid': 'Cisco 2.4ghz', 'bssid': '40:f4:ec:7f:3c:5a', 'channel': 11},
    {'found': False, 'flags': ['WPA-EAP-TKIP', 'WPA2-EAP-CCMP', 'ESS'], 'ssid': 'Cisco 5.0ghz', 'bssid': '40:f4:ec:7f:3c:54', 'channel': 149}
] 
```

缺失的网络最初是空的。

有没有一种简单的方法可以做到这一点？

谢谢，

帕思

# windows - 如何修改可执行文件而不破坏它？

> ID：12188407
> 
> 赞同：0
> 
> 时间：2012-08-30T00:40:27.493
> 
> 标签：windows, executable, exe, bytecode, nul

如果添加到文件的前面，是否有特定的空字符或字节序列不会破坏可执行文件？我尝试添加 NUL (00 hex)，但每次都会破坏可执行文件。是否有一些用于 NOP（无操作）或类似内容的字节码？

长话短说，我想搞砸一个“hack”，它在 &process+fixed offset 处修改内存中的值。将内存堆栈向上推会（或者我认为）会阻止它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:47:11.157

不，Windows 可执行文件使用的 PE 文件格式有一个非常具体的标题。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Portable_Executable 。](http://en.wikipedia.org/wiki/Portable_Executable)

您可以尝试使用[ASLR](http://en.wikipedia.org/wiki/ASLR)使您的代码更能抵抗内存中的修补。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:50:31.920

您必须将其完全解析为不同的部分和段，修改您要查找的部分，但您将无法在任何代码段之前插入代码：您最好有一个将首先执行的段，然后将跳转到旧的开始段。

最后，您将不得不重新创建一个新的完整可执行文件。

# javascript - 动态HTML表格的jQuery或JS转换

> ID：12188410
> 
> 赞同：0
> 
> 时间：2012-08-30T00:41:03.763
> 
> 标签：javascript, jquery, html-table

我需要`TABLE`在`DIV`标签中找到 a 并对标头进行修改。可用的报告工具不允许识别生成的表，但允许脚本和`DIV`插入。

考虑下表，其中标题是第一行：

```
<div id="ScrollHeader">
  <table>
    <tr>
      <td>Browser</td>
      <td>Visits</td>
      <td>Pages/Visit</td>
      <td>Avg. Time on Site</td>
      <td>% New Visits</td>
      <td>Bounce Rate</td>
      <td>Avg. Time on Site</td>
      <td>% New Visits</td>
      <td>Bounce Rate</td>
    </tr>
    <tr>
      <td>Firefox first</td>
      <td>1,990</td>
      <td>3.11</td>
      <td>00:04:22</td>
      <td>70.00%</td>
      <td>32.61%</td>
      <td>00:04:22</td>
      <td>70.00%</td>
      <td>32.61%</td>
    </tr>
    <tr>
      <td>Firefox</td>
      <td>1,990</td>
      <td>3.11</td>
      <td>00:04:22 test test test</td>
      <td>70.00%</td>
      <td>32.61%</td>
      <td>00:04:22</td>
      <td>70.00%</td>
      <td>32.61%</td>
    </tr>
  </table>
</div> 
```

我需要一个 JavaScript 或 jQuery 代码来将表格转换为以下内容：

```
<div id="ScrollHeader">
  <table>
    <thead>
      <tr>
        <th>Browser</th>
        <th>Visits</th>
        <th>Pages/Visit</th>
        <th>Avg. Time on Site</th>
        <th>% New Visits</th>
        <th>Bounce Rate</th>
        <th>Avg. Time on Site</th>
        <th>% New Visits</th>
        <th>Bounce Rate</th>
      </tr>
    </thead>
    <tr>
      <td>Firefox first</td>
      <td class="numeric">1,990</td>
      <td class="numeric">3.11</td>
      <td class="numeric">00:04:22</td>
      <td class="numeric">70.00%</td>
      <td class="numeric">32.61%</td>
      <td class="numeric">00:04:22</td>
      <td class="numeric">70.00%</td>
      <td class="numeric">32.61%</td>
    </tr>
  </table>
</div> 
```

代码需要识别其中的表，在第一行之前`<div id="ScrollHeader">`插入，将第一行中的更改为并用 关闭它 。`THEAD``TR``TD``TH``</thead>`

我曾尝试使用`$("div p[id^='ScrollHeader']").length`来查找`DIV`并`$("tr:first")`执行`<table>.prepend(document.createElement('thead'));`但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:00:52.160

尝试这个：

```
$('#ScrollHeader table tr:eq(0)').wrap('<thead />');
$('#ScrollHeader table tr:eq(0) td').each(function () {
    $('#ScrollHeader table tr:eq(0)').append($('<th />').html($(this).html()));
    $(this).remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:07:41.827

```
$('#ScrollHeader tr:first')
    .wrap('<thead />')
    .children().each(function(){
        text = $(this).text();
        $(this).replaceWith('<th>'+text+'</th>');
    });
$('#ScrollHeader thead').insertBefore('#ScrollHeader tbody'); 
```

你可以看到它在[这里工作](http://jsfiddle.net/ppNPD/2/)

# c++ - 函数中的全局静态变量与静态变量？

> ID：12188414
> 
> 赞同：7
> 
> 时间：2012-08-30T00:41:50.220
> 
> 标签：c++

使用有什么区别：

```
static Foo foo;
// ...
foo.func(); 
```

和：

```
Foo& GetFoo(void) 
{
    static Foo foo;
    return foo;
}

// ...

GetFoo().func(); 
```

哪个更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T00:44:13.527

主要区别在于施工发生的时间。在第一种情况下，它发生在`main()`开始之前的某个时间。在第二种情况下，它发生在第一次调用`GetFoo()`.

在第一种情况下，代码可能在`foo`其初始化之前（非法）使用。在第二种情况下这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:04:16.387

`GetFoo`当您不想要类/对象的副本时，通常使用A。例如：

```
class Foo
{
private:
    Foo(){};
    ~Foo();
public:
    static Foo* GetFoo(void) 
    {
        static Foo foo;
        return &foo;
    }

    int singleobject;
}; 
```

`singleobject`您可以通过外部访问`Foo::GetFoo()->sinlgeobject`。私有构造函数和析构函数避免你的类创建副本。

要使用`static Foo foo`，您必须声明公共构造函数，这意味着您始终可以通过它访问您的类，但您的类也可以获取副本。

# flash - 错误 #1069：当 marshall 是函数名而不是属性时，在字段上找不到属性编组？

> ID：12188415
> 
> 赞同：0
> 
> 时间：2012-08-30T00:42:01.220
> 
> 标签：flash, apache-flex, air

在对象上调用函数时，我收到错误“错误 #1069：在字段上找不到属性编组”。另外，我很确定它以前可以工作（几个月没有打开该项目）。这没有意义，因为该函数存在：

在 SQLColumn.as 上：

```
public function marshall():String {
    var request:String = name;

    //... 

    return request;
} 
```

并且有错误的代码（在另一个类中）：

```
var field:SQLColumn; // value object class with one function (shown above)

for (var i:int;i<fieldsLength;i++) {
    field = fields[i];
    if (i>0) request += ",";
    request += " " + field.marshall(); // error here- the debugger doesn't even step into the function and the compiler has no problems at compile time
} 
```

此外，我将函数更改为 SQLColumn 类上的静态方法并传入列字段，这*确实*有效。

```
public static function marshall(column:SQLColumn):String {
    var request:String = column.name;

    //... 

    return request;
} 
```

在另一个班级，

```
request += " " + SQLColumn.marshall(field); // works 
```

~~**更新**~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~~~~~~~~~~~~

所以在我将它更改为静态并且它工作之后，我将它改回原来的状态，现在它正在工作......没有运行时错误。

# objective-c - 将浮动条添加到滚动视图中，例如 Facebook iOS 应用程序的时间线

> ID：12188416
> 
> 赞同：3
> 
> 时间：2012-08-30T00:42:22.863
> 
> 标签：objective-c, ios, uiscrollview

我一直在尝试向我的测试项目添加不同的交互，并且在添加 Facebook 的帖子状态栏之类的东西时遇到了麻烦，该状态栏位于时间轴滚动视图上并在您向下滚动时与滚动视图一起滚动当您向上滚动视图时，该视图仍停留在导航栏下方。

我一直在创建一个单独的 UIViewController（不是 UIView）并将其作为子视图添加到主 ViewController。我不太确定从那里去哪里......新视图如何与滚动视图一起滚动？我什至应该使用单独的视图控制器吗？

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T05:50:43.903

下面是一些示例代码，您可以开始使用，只需将其添加到您的视图控制器即可。它对`UIView`浮动条使用泛型`UIScrollView`，对滚动视图使用泛型，但您可以将其更改为您想要的任何内容。

```
@interface BNLFDetailViewController () <UIScrollViewDelegate> {
    UIScrollView *_scrollView;
    UIView *_floatingBarView;
    CGFloat _lastOffset;
}
@end 
```

并在`@implementation`添加：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    _scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    _scrollView.delegate = self;
    _scrollView.contentSize = CGSizeMake(self.view.bounds.size.width, self.view.bounds.size.height * 2);
    [self.view addSubview:_scrollView];

    CGRect f = self.view.bounds;
    f.size.height = kFloatingBarHeight;
    _floatingBarView = [[UIView alloc] initWithFrame:f];
    _floatingBarView.backgroundColor = [UIColor blackColor];
    [self.view addSubview:_floatingBarView];
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (scrollView == _scrollView) {
        CGFloat offsetChange = _lastOffset - scrollView.contentOffset.y;
        CGRect f = _floatingBarView.frame;
        f.origin.y += offsetChange;
        if (f.origin.y < -kFloatingBarHeight) f.origin.y = -kFloatingBarHeight;
        if (f.origin.y > 0) f.origin.y = 0;
        if (scrollView.contentOffset.y <= 0) f.origin.y = 0; //Deal with "bouncing" at the top
        if (scrollView.contentOffset.y + scrollView.bounds.size.height >= scrollView.contentSize.height) f.origin.y = -kFloatingBarHeight; //Deal with "bouncing" at the bottom
        _floatingBarView.frame = f;

        _lastOffset = scrollView.contentOffset.y;
    }
} 
```

你应该把它作为一个`UIView`，而不是一个`UIViewController`。iOS 开发的一般规则是视图控制器占据整个屏幕，视图用于占据部分屏幕的“子视图”（尽管 iPad 的情况较少）。无论哪种方式， a`UIViewController`都有它自己的生命周期（`willAppear`、`didAppear`等），浮动条不需要/不需要它，所以它绝对应该是 a `UIView`。

# c++ - Linux OS 上的 Qt Access 网络摄像头，无需下载任何软件包

> ID：12188419
> 
> 赞同：1
> 
> 时间：2012-08-30T00:42:38.973
> 
> 标签：c++, linux, qt

我正在寻找一些链接/教程/示例来访问我在 Linux 操作系统上的网络摄像头，而无需下载任何软件包。

实际上，我正在开发一个非常紧凑的操作系统（已经删除了不必要的软件包）。我们对这个项目有空间意识。

我尝试了 OpenCv（在其他具有完整操作系统版本的机器上），它对我来说运行良好，但它的包超过 100 Mb，在我的项目中我买不起那么多空间。此外，由于许多软件包已经从这个操作系统中删除（以使其紧凑），我无法在我的机器上安装 Opencv 来测试它（因为它缺少依赖项）。

所以我想知道，有没有其他方法可以在不下载任何软件包的情况下访问网络摄像头？

在我的情况下，添加标题/文件会很好。

任何帮助，建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:05:24.960

要在 linux 上捕获图像，可以通过命令行使用“uvccapture”来下载任何重包。UVCCAPTURE 的大小为 Kb。并且这两行代码可以捕获图像。

例如：

```
QProcess process
process.execute(/usr/bin/uvccapture -v -m -o"test.jpg"); 
```

# windows-runtime - 使用 Rx RTM 进行可观察的命令和单元测试

> ID：12188421
> 
> 赞同：0
> 
> 时间：2012-08-30T00:42:56.540
> 
> 标签：windows-runtime, system.reactive, reactiveui

我已将我的代码移植到 WinRT 和 Rx 的 RTM 版本。我在我的 ViewModel 中使用 ReactiveUI。在移植代码之前，我的单元测试运行没有问题，但现在我有一个奇怪的行为。

这里是测试：

```
var sut = new MyViewModel();
myViewModel.MyCommand.Execute(null) //ReactiveAsyncCommand
Assert.AreEqaul(0, sut.Collection.Count) 
```

如果我一步一步调试测试，断言并**没有**失败，但是使用测试运行器它失败了......

断言的集合由订阅命令的方法修改：

```
MyCommand.RegisterAsyncTask(_ => DoWork())
            .ObserveOn(SynchronizationContext.Current)
            .Subscribe(MethodModifyingCollection); 
```

该代码在将其移至 RTM 之前正在运行。我还尝试在 Assert 之前删除`ObserveOn`并添加一个，但没有成功。`await Task.Delay()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:16:17.473

Steven 得到了正确的答案，但是缺少一些 RxUI 特定的东西。这肯定与在测试运行器中的调度有关，但原因是 WinRT 版本的 ReactiveUI 目前无法正确检测它是否在测试运行器中。

现在愚蠢的解决方法是将其设置在所有测试的顶部：

```
RxApp.DeferredScheduler = Scheduler.CurrentThread; 
```

不要在每个测试中**都**使用 TestScheduler，这太过分了，实际上与某些类型的测试不兼容。TestScheduler 适用于模拟时间流逝的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:31:07.720

您的问题是 MSTest 单元测试有一个默认的`SynchronizationContext`. 因此`ObserveOn`，`ReactiveAsyncCommand`并将编组到线程池而不是 WPF 上下文。这会导致竞争条件。

您的第一个也是最好的选择是[Rx`TestScheduler`](http://msdn.microsoft.com/en-us/library/hh242967%28v=VS.103%29.aspx)。

另一种选择是`await`一些完成信号（并确保您的测试方法是`async Task`，不是`async void`）。

否则，如果您只需要一个`SynchronizationContext`，您可以使用[`AsyncContext`我的 AsyncEx 库](http://nitoasyncex.codeplex.com/wikipage?title=AsyncContext)在您自己的`SynchronizationContext`.

最后，如果您有任何代码直接使用`Dispatcher`而不是`SynchronizationContext`，您可以`WpfContext`从 Async CTP 下载中使用。

# c# - SQLite 数据库连接有哪些附加配置信息？

> ID：12188428
> 
> 赞同：1
> 
> 时间：2012-08-30T00:43:35.610
> 
> 标签：c#, .net, database, sqlite

尝试连接到 SQLite 数据库文件时发生该错误

> **混合模式程序集是针对运行时版本“v2.0.50727”构建的，如果没有额外的配置信息，则无法在 4.0 运行时中加载。**

我的连接字符串是：

> **“数据源=KBank；版本=3；”**

我正在使用 Visual Studio 2010 .Net Framework 4.0

关于什么是附加配置的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:45:51.593

您需要在 app.config文件 [的启动元素中设置 useLegacyV2RuntimeActivationPolicy 。](http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx)

您可以创建一个 app.config 文件，并将其设置为：

```
<configuration>
   <startup useLegacyV2RuntimeActivationPolicy="true">
      <supportedRuntime version="v4.0"/>
   </startup>
</configuration> 
```

这会导致所有程序集都使用 CLR 4，并“有效地禁用 CLR 的进程内并行功能”。当使用从 .NET 4 应用程序以 .NET 3.5 或更早版本编写的混合模式程序集（包含本机代码）时，这是必需的。

# asp.net-mvc - 使用 RestSharp 将多个参数发布到 webapi

> ID：12188430
> 
> 赞同：1
> 
> 时间：2012-08-30T00:43:43.450
> 
> 标签：asp.net-mvc, http, asp.net-web-api, restsharp

我刚开始使用 RestSharp 和 WebApi，但遇到了一些问题。

我不确定这是否是最佳实践，甚至可能，但我将通过代码进行演示（这不是我的确切代码，但它是完全相同的概念）

```
 [HttpPost]
    public HttpResponseMessage CreateEmployee(Employee emp, int employeeType)
    {
        // CREATE EMPLOYEE
        return Request.CreateResponse(HttpStatusCode.Created, emp.id);
    } 
```

我创建了一个控制台应用程序来使用 RestSharp 进行测试。这是我所拥有的：

```
 var client = new RestClient();
        client.BaseUrl = @"http://localhost:15507";

        var employee = new Employee();
        //populate employee model

        postrequest.Method = Method.POST;
        postrequest.Resource = "api/Employee/CreateEmployee";
        postrequest.AddHeader("Accept", "application/json");
        postrequest.AddHeader("Content-Type", "application/json");
        postrequest.RequestFormat = DataFormat.Json;

        postrequest.AddBody(new { emp = employee, listId = 2 });
        var res = client.Execute(postrequest); 
```

我得到的错误是employeeType 参数为null。我是否正确格式化？这是什至可以做到的事情吗？

当我从 WebApi 操作方法中删除 employeeType 参数并将请求修改为：

```
 postrequest.AddBody(employee); 
```

一切正常。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:48:49.223

如果您期望来自 uri 的employeetype 并且它不是已定义路由的一部分，则可以将其作为查询字符串参数发送...例如：

api/员工/创建员工？**雇员类型=**

# java - 在android中创建一个计划服务

> ID：12188434
> 
> 赞同：4
> 
> 时间：2012-08-30T00:44:39.910
> 
> 标签：java, android, service, bluetooth, schedule

我需要用java在android中创建一个调度服务。我已经尝试了一些代码，但是在构建应用程序之后它一直没有运行。我的逻辑很简单，我想创建一个服务来检查蓝牙文件夹路径中是否存在一个文件，如果这个文件在那里，那么这个服务将运行另一个应用程序，我需要这个每隔 2 分钟运行一次的时间表。

到目前为止这很好，但现在我有一个错误`The method startActivity(Intent) is undefined for the type MyTimerTask`。我试过这段代码...

```
public class MyTimerTask extends TimerTask {
    java.io.File file = new java.io.File("/mnt/sdcard/Bluetooth/1.txt");

    public void run(){ 
        if (file.exists()) {
            Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.setComponent(new ComponentName("com.package.address","com.package.address.MainActivity"));
            startActivity(intent);
        }
    } 
} 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T02:34:57.743

有两种方法可以实现您的要求。

*   定时器任务
*   报警管理器类

    TimerTask 具有在给定的特定时间间隔内重复活动的方法。请看下面的示例。

    ```
    Timer timer; 
    MyTimerTask timerTask; 

    timer = new Timer(); 
    timerTask = new MyTimerTask();
    timer.schedule ( timerTask, startingInterval, repeatingInterval );

    private class MyTimerTask extends TimerTask 
    {
         public void run()
         { 
            ...
            // Repetitive Activity goes here
         } 
    } 
    ```

    `AlarmManager`做同样的事情，`TimerTask`但因为它占用较少的内存来执行任务。

    ```
    public class AlarmReceiver extends BroadcastReceiver 
    {
        @Override
        public void onReceive(Context context, Intent intent) 
        {
            try 
            {
                Bundle bundle = intent.getExtras();
                String message = bundle.getString("alarm_message");
                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
            } 
            catch (Exception e) 
            {
                 Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
     e.printStackTrace();
            }
       }
    } 
    ```

警报类，

```
private static Intent alarmIntent = null;
private static PendingIntent pendingIntent = null;
private static AlarmManager alarmManager = null;

    // OnCreate()
    alarmIntent = new Intent ( null, AlarmReceiver.class );
    pendingIntent = PendingIntent.getBroadcast( this.getApplicationContext(), 234324243, alarmIntent, 0 );
alarmManager = ( AlarmManager ) getSystemService( ALARM_SERVICE );
    alarmManager.setRepeating( AlarmManager.RTC_WAKEUP, ( uploadInterval * 1000 ),( uploadInterval * 1000 ), pendingIntent ); 
```

# ruby-on-rails - Ruby On Rails：如何创建多个 text_field_tags 将值存储到同一个数组中？

> ID：12188436
> 
> 赞同：3
> 
> 时间：2012-08-30T00:44:57.397
> 
> 标签：ruby-on-rails

我需要能够创建一个表单，其中有几个 text_field_tags 根据另一个模型的实例动态创建。我希望能够将输入到这些 text_field_tags 中的值存储到同一个数组中，一旦提交表单，我就可以在控制器中作为参数访问该数组。这可能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T00:56:12.450

如果您将它们全部命名为相同的名称并将 [] 附加到末尾，如下所示：

```
 <%= text_field_tag "some_fields[]" %>
 <%= text_field_tag "some_fields[]" %>
 <%= text_field_tag "some_fields[]" %> 
```

您可以从控制器访问这些：

```
 some_fields = params[:some_fields] # this is an array 
```

如果您在方括号之间输入值，rails 会将其视为哈希：

```
 <%= text_field_tag "some_fields[1]" %>
 <%= text_field_tag "some_fields[2]" %>
 <%= text_field_tag "some_fields[3]" %> 
```

控制器会将其解释为带有键“1”、“2”和“3”的散列

# asp.net - SqlDatasource 更新查询控制参数未选择新值

> ID：12188438
> 
> 赞同：1
> 
> 时间：2012-08-30T00:45:31.140
> 
> 标签：asp.net, visual-studio-2010, .net-4.0, sqldatasource, controlparameter

如果你还没有遇到这个问题，我必须上传我的代码以便为你解释或者让你能够调试它，那么这个问题不适合你。我知道我可以通过使用代码隐藏来解决这个问题，但我不想这样做。最终，如果没有任何效果，我将不得不这样做。

我没有使用任何数据绑定控件（gridview、Formview、Detailview 等）。一切都是通用的表单控件：文本框和列表框。我正在使用它们的 Text 和 SelectedValue 属性为 Updatequery 的 ControlParameters 提供值。一切都应该按预期工作。我玩过 texbox 控件的 ViewState 属性和 sqldatasource 控件本身，但无济于事。用于更新命令的存储过程记录了从 ASP.Net 端提供的值，令人惊讶的是，它显示了表单加载时文本框的旧值，而不是我所做的更改。

这里发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:46:33.943

好像您在 asp.net 生命周期中遗漏了一些东西。

在 page 上删除对 sqldatasource 的任何 DataBind 调用`Load`。

如果您在加载时使用 DataBind 填充这些文本并选择控件，则数据绑定只会覆盖您输入的任何值。

*不要害羞地展示你的代码，它对提供好的答案很有帮助。*

# r - R结合mapply和sapply

> ID：12188439
> 
> 赞同：0
> 
> 时间：2012-08-30T00:45:33.840
> 
> 标签：r, list, sapply

我在 R 中有一个函数，它接受 3 个参数，比如`foo(x,y,z)`.

当我调用该函数时，我确实有一个元素`x`列表 for 和一个列表，`y`但只有一个元素 for `z`。If`Z`是一个列表，我想应用于`foo`每个元素，`mapply(foo, x, y, z)`工作。

但是，由于`z`不是列表，`mapply(foo,x,y,z)`因此不起作用。

更具体地说，如果`x`和 y 分别是 3 个元素的列表，则以下内容确实有效：`mapply(foo, x, y, list(z, z, z))`.

有没有一种方法可以让我组合起来`mapply`，而`sapply`无需我先将它们组合`z`成一个包含 3 个元素的列表？我`z`只想被重复使用！

**编辑1：**有人问我一个例子：

```
mylist1 <- list(c(5,4), c(7,9), c(8,3))
mylist2<- list(c(2,3), c(6,7), c(10,11))
item3 <- matrix(data = 15, nrow = 3, ncol = 3)
foo <- function(x,y,z){
       return(x[1]+y[2]+z[2,2])
} 
```

以下作品：

```
> mapply(foo, mylist1, mylist2, list(item3,item3, item3))
[1] 23 29 34 
```

以下不起作用：

```
mapply(foo, mylist1, mylist2, item3)
Error in z[2, 2] : incorrect number of dimensions 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:08:03.060

使用`MoreArgs`参数`mapply`

```
mapply(foo, x = mylist1, y= mylist2, MoreArgs = list(z = item3))
## [1] 23 29 34 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T01:07:40.697

您只需将最后一项放入列表中，R 就会很好地回收它：

```
mapply(foo, mylist1, mylist2, list(item3)) 
```

请注意，文档特别说明您传递的参数必须是：

> 向量化的参数（严格为正长度的向量或列表，或全部为零长度）

你试图传递一个矩阵。

# css - CSS 注释中的“/* =SomeText”是什么

> ID：12188442
> 
> 赞同：4
> 
> 时间：2012-08-30T00:45:46.290
> 
> 标签：css, wordpress

Wordpress 样式表注释在注释名称前有“/* =”。为什么它不只是 /* 以及为什么它后面有“=”？是否有助于轻松找到评论，还是毫无意义？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T00:59:59.997

尽管我强烈建议不要使用 w3schools.com，但他们很好地解释了这个问题：

**CSS 注释**

注释用于解释您的代码，并且可以在您以后编辑源代码时为您提供帮助。浏览器会忽略评论。

CSS 注释以“”开头，以“ `/*`”结尾`*/`，如下所示：

```
/*This is a comment*/
p
{
text-align:center;
/*This is another comment*/
color:black;
font-family:arial;
} 
```

[来源](http://www.w3schools.com/css/css_syntax.asp)

关于**=**，它可用于在注释中指定一个点，用于稍后替换或格式化。

**更新 1**

发现[这个](http://blog.gabrieleromanato.com/2012/06/css-using-comments-the-right-way/)关于`=`标志。

> 向评论块添加标记使其更易于搜索。这称为标记的评论块。例如：
> 
> ```
> /*= Header
>  * - description -
>  */ 
> ```
> 
> 在这种情况下，使用的标志是等号 (=)。通过在编辑器中将其用作搜索字符串，您实际上可以浏览 CSS 文件的所有部分。
> 
> 但是，当您想要更具体时，像等号这样的简单标记可能不合适。在这种情况下，您可以向标志添加标识符：
> 
> ```
> /*=head Header
>  * - description -
>  */ 
> ```
> 
> 现在您可以在编辑器中搜索 =head。这称为带标签的标记注释块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T00:48:10.593

CSS 中从不使用等号，因此它是提供快速搜索的好标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T00:52:47.727

我认为它很可能只是帮助识别该评论（不知道为什么需要，常识说将评论放在它所指的代码旁边）

你所需要的只是`/*blah, blah, blah*/`

# php - 使用默认用户/密码离开 phpmyadmin 有什么不安全的

> ID：12188453
> 
> 赞同：0
> 
> 时间：2012-08-30T00:47:30.427
> 
> 标签：php, mysql, phpmyadmin

当我启动 phpmyadmin 时，我看到这条消息：

> 您的配置文件包含与默认 MySQL 特权帐户相对应的设置（没有密码的 root）。您的 MySQL 服务器正在使用此默认值运行，对入侵开放，您确实应该通过为用户“root”设置密码来修复此安全漏洞。

这有什么不安全的？
除非攻击者能以某种方式欺骗 mysql 以为他们坐在我的电脑前，否则他们无法继续前进。

如果攻击者不是来自正确的主机，还有其他方法可以让攻击者登录 mysql 吗？

我知道在 php 中，您可以选择要来自哪个主机，但除非他们有权编辑我的服务器/计算机上的 php 文件，否则我看不出他们如何造成任何伤害。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:53:22.900

即使您`MySQL`不允许其他主机访问，输入密码也始终是安全的`localhost`。

您的`phpMyAdmin`它是通过浏览器访问的，而不是通过 IP 访问的。

即使您将页面托管在计算机上，最好输入密码。我每天都会扫描我`*phpMyAdmin*`的计算机和服务器。`*PMA*`

所以是的，这是不安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:23:52.290

对于开发，这可能不是问题，但在生产环境中，您永远不应该使用默认安全设置。

如果您可以从 Internet 访问 phpMyAdmin 并最终访问 MySQL，这意味着其他人也可以，您应该选择一个安全的密码并确保您的用户名不是 root。

无论如何，大多数托管服务提供商都会强制您选择安全密码。

# wordpress - 死链接和缺失页面将自身重定向到主页，但有某些例外 - Wordpress 相关

> ID：12188454
> 
> 赞同：0
> 
> 时间：2012-08-30T00:47:39.280
> 
> 标签：wordpress, .htaccess, redirect, permalinks

我希望我的问题可以通过这个论坛解决

我希望我的网站通过显示 404 错误页面来处理死链接和不存在的链接 - 相反，我注意到它将这些不存在的链接和丢失的页面重定向到主页，例如 - **www.mysite.com/non-existent -link**（重定向到）**www.mysite.com/non-existent-links**，网址没有明显变化。

另一个问题是，在访问以下 URL 时：**mysite.com/genre/comedy** - 预期页面加载正常，但在访问 mysite.com/genre 时，它​​会在应该显示错误页面时重定向到主页

只有当错误页面实际工作时，才会出现例外情况，例如**www.mysite.com/+16476567**或**www.mysite.com/444**或**mysite.com/genre/gibberish**等链接正在使用中。

我花了几个小时用不同的参数修改 htaccess，使用永久链接的默认设置并尝试调整模板。但一切都是徒劳的

希望有人能对这个问题有所了解

# sql - 如何从三个表中获取总和？

> ID：12188455
> 
> 赞同：-2
> 
> 时间：2012-08-30T00:47:53.763
> 
> 标签：sql, tsql

> **可能重复：**
> [如何从两个表中获取总和？](https://stackoverflow.com/questions/12186036/how-to-get-sum-from-two-tables)

我有三个表第一个“`products`第二个” `items`“第三个” `sales`“
第一个和第二个表有相同的列（' `code`'，' `quantity`'）但是第三个表有（' `code`'，' `name`'）现在我想要第一和第二个的总和数量但也想从第三个表中获取代码相同的名称。检查我的代码

```
Select code, sum(qtd),name
from (           select a.code, a.qtd from product a
       union all select b.code, b.qtd from items   b
       union all select c.name        from sales   c where b.code=c.code
     )
group by code 
```

前两个给了我完美的价值观，但第三个小说给出了错误，也没有显示名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:57:55.553

使用时`UNION`请确保要组合的列与每个`SELECT`语句匹配。前两个`SELECT`语句工作正常，因为它们具有相同的列数。第三个失败了，因为它只有一列。

* * *

以下是使用 UNION组合两个（*或多个）查询***的结果集的基本规则：**

 **   在所有查询中，列的数量和顺序必须相同。
*   数据类型必须兼容。

* * *

根据您的查询，我认为您想要这样，

```
SELECT  a.code, b.name, SUM(a.qtd) totalSUM
FROM    product a
            INNER JOIN sales b
                ON a.code = b.code
GROUP BY a.code, b.name
UNION
SELECT  a.code, b.name, SUM(a.qtd) totalSUM
FROM    items a
            INNER JOIN sales b
                ON a.code = b.code
GROUP BY a.code, b.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:58:10.237

哼....

```
SELECT
  sales.name,
  (SELECT SUM(products.quantity) FROM products WHERE products.code = sales.code) as products.quantity,
  (SELECT SUM(items.quantity) FROM items WHERE items.code = sales.code) as items_quantity,
FROM sales 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T01:09:40.767

我认为您想做这样的事情，尽管目前尚不清楚实际要求是什么：

```
select code = t1.code ,
       name = t2.name ,
       qtd  = t1.qtd 
from ( select code =      t.code   ,
              qtd  = sum( t.qtd  )
       from (           select a.code, a.qtd from product a
              union all select b.code, b.qtd from items   b
            ) t
       group by t.code
     ) t1
join sales t2 where t2.code = t1.code 
```

干杯!*

# css - 我想将图像放在 Wordpress 标题中的特色内容滑块的顶部，以便在滑块在其下方淡入淡出时保持固定

> ID：12188460
> 
> 赞同：0
> 
> 时间：2012-08-30T00:48:24.637
> 
> 标签：css, image, wordpress, header, fixed

我很确定这可以使用 CSS 和 div 来完成，但我在任何地方都找不到示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:31:20.523

Its hard to answer this without seeing any code or visual of what you're trying to accomplish. Could you post a link or JSFiddle?

If you don't want your image to overlap the slider or anything, simply having it higher in the HTML markup will mean it appears above the slider div.

If you want it to overlap, one solution could be to use absolute positioning, which is the preferred method of having something overlap another element. You may want to group the image and slider in a position:relative div, with the image or image div with {position:absolute; top:0}.

Again, if you post code and more details, I could help more.

# javascript - 在 html 标签中添加自定义键

> ID：12188465
> 
> 赞同：0
> 
> 时间：2012-08-30T00:50:16.177
> 
> 标签：javascript, jquery

假设我们有一组 html 标签，比如

```
<div id="slide1" class="slide"></div>
<div id="slide2" class="slide"></div>
<div id="slide3" class="slide"></div> 
```

我正在尝试在 div 标签中添加一个额外的属性，比如分别从每个标签`key='post'`的哈希中。`{"post" : ["0","1"], "get": ["0","2"], "search": ["2","1"]}`使它看起来像，

```
<div id="slide1" class="slide" key="post"></div>
<div id="slide2" class="slide" key="get"></div>
<div id="slide3" class="slide" key="search"></div> 
```

是否可以使用javascript来做到这一点？

我想出的代码看起来像

```
for(key in hashArray){
var el = document.getElementsByID('slide' + (slideNumber));
el.setAttribute('key', key);
slideNumber++;
} 
```

但我收到一个错误 document.getElementByID is not a function

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:52:00.873

使用[自定义数据属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)[例如`data-key`]，那么你是完全正确的。

编辑：您的代码将如下所示：

```
var slideNumber = 1;

for(key in hashArray){
    var el = document.getElementById('slide' + (slideNumber));
    el.setAttribute('data-key', key);
    slideNumber++;
} 
```

[在这里工作小提琴](http://jsfiddle.net/YtEpS/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:50:23.350

出于通常的原因，建议不要使用非标准属性或属性 - 未指定不同用户代理中的行为，可能与其他程序的自定义属性冲突以及将来添加到标准属性和属性等。

正如其他答案中所指出的，您可以使用`data-`属性，但即使它们对于旧版浏览器也存在上述问题。在 OP 中，我看不到使用*setAttribute*而不是直接访问属性的任何好处：

```
el['data-key'] = key; 
```

（如果 W3C 选择下划线而不是连字符作为分隔符，会更方便。）

使用属性，值可以是任何类型，而[*setAttribute*](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-F68F082)只允许字符串。

另一种选择是将值存储在对象或数组中并通过某些引用（例如元素 ID）获取它们，这也允许值是字符串以外的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T00:53:54.730

您收到该错误是因为正确的方法名称是`getElementById`, *single*。

也就是说，您的代码应该可以工作。但是，我建议使用`data-key`而不是`key`作为属性名称，这样您的 HTML 仍然有效（有效的 HTML5）。

# jquery - 如何清除 jQuery 中特定元素后的选择框列表？

> ID：12188470
> 
> 赞同：1
> 
> 时间：2012-08-30T00:51:16.940
> 
> 标签：jquery, jquery-selectors

我有一个选择框列表，所有这些框都有 HTML 类“attribute_select”。这是一个级联列表。

当我选择每个项目时，我使用 jQuery 来填充并在刚刚选择的项目下方创建一个。一次一个。

但是，如果用户在列表中跳回并更改了一个选择框，我不仅要重新抓取下一个框（没问题），还要清除它之后的所有框。

我如何编写一个 jQuery 选择器来完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:57:59.183

使用[`.nextAll()`](http://api.jquery.com/nextAll/)：

```
$(".attribute_select").change(function () {
    $(this).nextAll(".attribute_select").empty(); 
});​ 
```

**[演示](http://jsfiddle.net/7YPJt/)**。

# php - 根据选中的复选框发送电子邮件

> ID：12188473
> 
> 赞同：-1
> 
> 时间：2012-08-30T00:52:21.217
> 
> 标签：php, forms

我正在学习 PHP，并且有一个问题，我希望有一个简单的答案。我过去创建了基本表单，并在提交时向用户发送了相应的电子邮件。

这一次，我有 3 个复选框。根据选中的复选框，我需要向他们发送特定的电子邮件。

例如，如果他们希望接收文档 1 和 3，然后提交，电子邮件将向他们发送链接以下载这两个文档，依此类推。

我不介意它是否发送两封电子邮件，每个复选框选择一封。如果他们选择了他们希望接收的两份文档，他们会收到一封电子邮件以获取文档 1 的链接，另一封电子邮件用于获取文档 3。

我不确定我是否可以用 PHP 做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:58:51.463

您需要做的是： 创建这样的复选框：

```
<input type="checkbox" name="sendDoc1" value="Selected" /> Send me Document 1 
```

然后当 php 检查表单时，您可以使用 isset 并检查输入的内容

```
if(isset($_POST['sendDoc1']) &&
$_POST['sendDoc1'] == 'Selected')
{
  //Code to send email
} 
```

您可以对每个文档重复此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:01:38.307

使用您的文档复选框创建表单

```
<form method="post" action="test.php">
    Document 1: <input type="checkbox" name="document[]" value="document1" /><br />
    Document 2: <input type="checkbox" name="document[]" value="document2" /><br />
    Document 3: <input type="checkbox" name="document[]" value="document3" /><br />
    <br />
    <input type="hidden" name="send" value="1" />
    <input type="submit" value="Send" />
</form> 
```

和一个 php 脚本来处理它

```
<?php
    if(isset($_POST) && ($_POST['send'] == 1)){

        $documents = array(
                        'document1' => 'http://www.example.com/document1.doc',
                        'document2' => 'http://www.example.com/document2.doc',
                        'document3' => 'http://www.example.com/document3.doc'
                    );

        $to      = 'nobody@example.com';
        $subject = 'the subject';
        $message = "hello\n\n";

        if(isset($_POST['document']) && count($_POST['document']) > 0){
            foreach($_POST['document'] as $doc){
                if(isset($documents[$doc])){
                    $message .= "Here is ".$documents[$doc]."\n";
                }
            }
        }

        $headers = 'From: webmaster@example.com' . "\r\n" .
            'Reply-To: webmaster@example.com' . "\r\n" .
            'X-Mailer: PHP/' . phpversion();

        mail($to, $subject, $message, $headers);
    }
?> 
```

我想你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T00:56:29.877

```
// create an array with the checkboxes so you can later easily expand it
// the indexes of the array are the fieldnames of the checkboxes
$checkboxes = array(
    'checkbox1' => 'http://example.com/somelink',
    'checkbox2' => 'http://example.com/somelink2',
    'checkbox3' => 'http://example.com/somelink3',
);

// generate mail body based on checked checkboxes
$mailContents = 'Your links:';
foreach($checkboxes as $name => $link) {
    if (isset($_POST[$name])) {
        $mailContents.= $link . "\n";
    }
} 
```

`$mailContents`现在您可以将包含在其中的链接作为字符串邮寄。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T00:56:40.073

为每个复选框设置一个值，然后使用 POST 或 GET 方法发送三个复选框的值，然后执行以下操作：

```
if(check1 == "value"){
   //send email 1
}
if(check2 == "value"){
   //send email 2
}
if(check3 == "value"){
   //send email 3
} 
```

# c# - 我应该如何干净地跟踪 ASP.NET MVC 中的选定项？

> ID：12188474
> 
> 赞同：1
> 
> 时间：2012-08-30T00:52:29.473
> 
> 标签：c#, asp.net-mvc

有没有比我在下面实现一行导航链接的代码中更好的方法来跟踪所选项目。

```
@Html.ActionLink(       
        "PreApproval", 
        "Summary", 
        new { mode = "preapproval" }, 
        new { @class = Model.Mode == "preapproval" ? "selected" : "notselected" }) |
@Html.ActionLink(
        "ActionNeeded", 
        "Summary", 
        new { mode = (string)null }, 
        new { @class = string.IsNullOrWhiteSpace(Model.Mode) ? "selected" : "notselected" }) |
... 
```

我应该尝试封装菜单导航的功能还是这是一种标准方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:37:24.807

你可以把它封装成一个小`Func<bool, string>`帮手，但这取决于它给你买了什么。以您在问题中的方式使用它可以使决策更接近链接，并且更易于阅读和理解，而无需在调试期间跳转到辅助方法。

如果你有 20 个或更多这样的链接，我可能会重构。这样，例如，如果您的 css 类名称从“selected/notselected”更改为“current/notcurrent”或其他内容，您可以在 1 个位置进行更新。

另一件事，在 MVC4 中，如果 CSS 类名是 null 或空字符串，Razor 根本不会渲染类属性（将省略它）。这样，您可以将“选定”类放在选定的链接上，并摆脱“未选定”类。

# c# - 函数中的 Request.ServerVariables

> ID：12188477
> 
> 赞同：4
> 
> 时间：2012-08-30T00:52:47.213
> 
> 标签：c#, asp.net

```
public static string Call()
{
    string ref1 = HttpContext.Current.Request.ServerVariables["HTTP_REFERER"];
    Response.write(ref1);
}

public void Page_Load(object sender, EventArgs e)
{
    Call()
} 
```

> CS0120：非静态字段、方法或属性“System.Web.UI.Page.Response.get”需要对象引用

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T01:00:09.807

`Response`是`Page`类的一个实例属性，作为`HttpContext.Current.Response`.

要么使用实例方法，要么`HttpContext.Current.Response.Write`在您的静态方法中使用。

**例子**

```
public static string Call()
{
    string ref1 = HttpContext.Current.Request.ServerVariables["HTTP_REFERER"];
    HttpContext.Current.Response.Write(ref1);
} 
```

或者

```
public string Call()
{
    string ref1 = Request.ServerVariables["HTTP_REFERER"];
    Response.Write(ref1);
} 
```

提到的`get()`方法是`System.Web.UI.Page.Response.get`指属性的 get 访问器。本质上，它是说您不能从类型的静态方法调用类型实例的 get() 方法（这当然是有道理的）。

作为旁注，`Response.write(ref1);`应该是`Response.Write()`（更正的情况）。

# javascript - 没有 JQuery 的 Ajax？

> ID：12188488
> 
> 赞同：2
> 
> 时间：2012-08-30T00:54:50.200
> 
> 标签：javascript, ajax

> **可能重复：**
> [如何在没有 jquery 的情况下进行 ajax 调用？](https://stackoverflow.com/questions/8567114/how-to-make-an-ajax-call-without-jquery)

如何在不使用 jQuery 的情况下使用 ajax 异步更新网页？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T00:58:16.797

作为一个年轻的新开发人员，我已经习惯了 JQuery，以至于我对 JavaScript 感到害怕（不像 GetElementById JavaScript，而是面向对象，动态传递函数和闭包是失败和哭泣之间的区别） JavaScript）。

我提供了这个复制/粘贴的 POST ajax 表单，忽略了 Microsoft 的细微差别，并提供了最少的评论，以帮助像我这样的其他人通过示例学习：

```
//ajax.js
function myAjax() {
 var xmlHttp = new XMLHttpRequest();
 var url="serverStuff.php";
 var parameters = "first=barack&last=obama";
 xmlHttp.open("POST", url, true);

 //Black magic paragraph
 xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
 xmlHttp.setRequestHeader("Content-length", parameters.length);
 xmlHttp.setRequestHeader("Connection", "close");

 xmlHttp.onreadystatechange = function() {
  if(xmlHttp.readyState == 4 && xmlHttp.status == 200) {
   document.getElementById('ajaxDump').innerHTML+=xmlHttp.responseText+"<br />";
  }
 }

 xmlHttp.send(parameters);
} 
```

这是服务器代码：

```
<?php
 //serverStuff.php

 $lastName= $_POST['last'];
 $firstName = $_POST['first'];

 //everything echo'd becomes responseText in the JavaScript
 echo "Welcome, " . ucwords($firstName).' '.ucwords($lastName);

?> 
```

和 HTML：

```
<!--Just doing some ajax over here...-->
<a href="#" onclick="myAjax();return false">Just trying out some Ajax here....</a><br />
<br />
<span id="ajaxDump"></span> 
```

希望有一个 POST ajax 示例来复制/粘贴，其他新开发人员将少一个借口来尝试没有 JQuery 训练轮的 JavaScript。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T00:59:46.830

熟悉[XMLHttpRequest](http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx)对象，然后您就可以正确决定使用什么（如果有）JavaScript 框架来处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T00:58:21.030

现在进行 AJAX 调用的最佳方式是使用 JQuery。无论如何，这是来自 W3schools.com 的示例

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","ajax_info.txt",true);
xmlhttp.send();
}
</script>
</head>
<body>

<div id="myDiv"><h2>Let AJAX change this text</h2></div>
<button type="button" onclick="loadXMLDoc()">Change Content</button>

</body>
</html> 
```

# java - 在不同的类上使用 db4o

> ID：12188491
> 
> 赞同：0
> 
> 时间：2012-08-30T00:55:24.933
> 
> 标签：java, android, object, db4o

我在一个特定的类中使用 db4o，我有这个（工作正常）：

```
public class xxxxx{
public Db4oHelper db4oHelper = null;
    public void xxxx (Context ctx){
        dbHelper(context);
        //operations...
    } 
```

但是现在我需要在不同的类中使用 db4o 我应该在所有类中编写方法 dbHelper(Context ctx) 吗？

我尝试使用该方法编写一个类，然后使用 object.dbHelper 调用该方法，但不起作用:(

```
public class Db4o {
Context context;       
public Db4oHelper db4oHelper = null;
public Db4o(Context ctx){
context=ctx;
}
public Db4oHelper dbHelper(Context ctx) {

                if (db4oHelper == null) {
                    db4oHelper = new Db4oHelper(ctx);
                    db4oHelper.db();
                }
                return db4oHelper;
            }
    } 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T04:33:12.133

我将使用一个抽象类，它提供设置上下文和获取帮助器的方法。这样的类将是我需要该功能的所有其他类的超类。

例如：

```
 public abstract class PersistenceObject {

    private Context context;
    private volatile Db4oHelper helper;

    public PersistenceObject() { }

    public PersistenceObject(Context context) {
        this.context = context;
    }

    public Context getContext() {
        this.getContext();
    }

    public final void setContext(Context context) {
        if (this.context != context) {
            if (this.context == null) {
                onContextSet(context);
            } else if(context == null) {
                onContextUnset(context);
            } else {
                // Should you allow the context to change? 
                // Maybe the object is dirty, if so what to do?
                onContextChanged(context, this.context);
            }
            this.context = context;
        }
    }

    // we can call initialize on objects that extends this class
    // this initializes the context and also call the overloaded
    // initialize method to allow the classes to provided what
    // need to be done after we setup the context
    public final void initialize(Context context) {
        this.setContext(context);
        this.initialize();
    }

    private void onContextSet(Context context) {
        // ...
    }

    private void onContextUnset(Context context) {
        // lets clean the helper when we set the context to null
        this.helper == null;
    }

    private void onContextChanged(Context newContext, Context oldContext) {
        // Lets assume we can change the context
        // Since we change the context lets set the helper to null, 
        // so in the next call we get a new helper with the right context
        this.helper == null;
    }

    protected final Db4oHelper getDb4oHelper() {
        Db4oHelper helper = this.helper;
        if (helper == null) {
            synchronized(this) {
                helper = this.helper;
                if (helper == null) {
                    helper = this.helper = new Db4oHelper(context);
                    helper.db();
                }
            }
        }
        return helper;
    }

    public void initialize() {
    }
} 
```

使用抽象类相当简单，我们只需扩展即可。

```
 public class Category extends PersistenceObject {
    private String name;
    public Category() {
    }
    ....
} 
```

```
 public class Product extends PersistenceObject {
    private Category category;

    public Product() {
    }

    // ...

    public void initialize() {
        Db4oHelper helper = getDb4oHelper();
        // use the helper to perform whatever operations it needs
    }
} 
```

另一个使用辅助对象的例子。

```
 public final class PersistenceObjectHelper {
    private PersistenceObjectHelper() { }

    public static void doOPERATION(PersistenceObject object) {
        context = object.getContext();
        if (context == null) {
            // either the object was not initialized or the context was set to null
            // which basically means that we dont have a way to create the helper,
            // lets fail
            throw new IllegalArgumentException("Unable to create the DB4O due to lack of context");
        }
        DB4oHelper helper = object.getDB4oHelper();
        // use the helper and the object to do whatever we need
    }
}

Category category = new Category();
PersistenceObjectHelper.doOPERATION(category); // fails due to lack of context

Category category = new Category();
category.initialize(context);
PersistenceObjectHelper.doOPERATION(category); // works!

Category category = new Category();
category.setContext(context);
PersistenceObjectHelper.doOPERATION(category); // works! 
```

希望能帮助到你。

# image - html5画布图像合成

> ID：12188494
> 
> 赞同：0
> 
> 时间：2012-08-30T00:56:20.360
> 
> 标签：image, html, html5-canvas, blending

有没有办法在抠出某种颜色（如黑色）的同时叠加图像（jpeg）？这样图像中的所有纯黑色像素都是透明的？很像 Photoshop 中的“屏幕”混合模式？

我试过查看`globalCompositeOperation`画布上下文的属性，但似乎没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:12:43.493

我想你会想研究直接像素操作。慢，但如果速度不如获得好结果重要，那就去做吧。

```
for (y = 0; y < height; y++) {
    inpos = y * width * 4; // *4 for 4 ints per pixel
    outpos = inpos + w2 * 4
    for (x = 0; x < w2; x++) {

        g = imageData.data[inpos++] / 3; 
        a = imageData.data[inpos++];     

        if( g > someValue )
              a = someNewAlpha;

        imageData.data[outpos++] = a;
    }
} 
```

如需更多帮助，请参阅[http://beej.us/blog/data/html5s-canvas-2-pixel/](http://beej.us/blog/data/html5s-canvas-2-pixel/)

OpenGL 中有很多方法，但我不确定它们是否适用于您的应用程序，不知道它应该做什么。

# javascript - AJAX 请求不起作用

> ID：12188498
> 
> 赞同：4
> 
> 时间：2012-08-30T00:57:16.173
> 
> 标签：javascript, jquery, ajax

我有一些 PHP 脚本、HTML 表单和 JS 代码（AJAX）：

```
if(isset($_POST['site'])){

$homepage = file_get_contents("http://".$_POST['site']);
preg_match('%<meta.*name="keywords".*content="(.*)"\s+/>%U', $homepage, $regs);

if(count($regs))
{
$myString = implode('', $regs );  
 print_r($myString);
}
}

?>

<form id=payment method="post" name="forma1">
<label for=name>ENTER www.bbc.com:</label>
<input id="name" type=text placeholder="Write here..."         name="site">
<input type="submit" value="START" name="searchbutton" id="sb">
</form>

<script src="jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function(){
         $('#payment').submit(function(e){
            e.preventDefault();
           $.ajax({
                 type: "POST",
                url: $(this).attr('action'),
                data: $(this).serialize(),
                dataType: 'json',
                success: function(data)
                {
                    alert("OK, AJAX IS WORKING");
                }
            });
        });
    });
    </script> 
```

没有 JS 代码一切正常。PHP 脚本也可以正常工作，当我单击按钮时，在收到所需信息后。但是当我尝试使用 AJAX 并单击按钮时，我没有任何操作。我认为，thant JS 代码是错误的，也可能是 PHP。请问各位高手，谁能帮我修改一下代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:11:13.060

这对我有用...尝试这种方式直接将 url 放在那里，就像我做的那样和错误响应，这样如果它不起作用，它会告诉你什么样的错误并删除 dataType:'json'

```
<?php  if(isset($_POST['site'])){

 var_dump($_POST); 
 exit;

}
?>
<html>

<head>
 <script src="http://code.jquery.com/jquery-latest.js"></script>    
<script type="text/javascript">
    $(document).ready(function(){
         $('#payment').submit(function(e){
            e.preventDefault();
           $.ajax({
                 type: "POST",
                url: 'test.php',
                data: $(this).serialize(),
                success: function(data)
                {
                    alert("OK, AJAX IS WORKING"+data);
                },
                 error:   function(xhr, ajaxOptions, thrownError) { alert(xhr.status);
                                         } 
            });
        });
    });
    </script>
</script>

</head>     

<div>
<form id="payment"    method="post" name="forma1">
        <label for=name>ENTER www.bbc.com:</label>
        <input id="name" type=text placeholder="Write here..."         name="site">
        <input type="submit" value="START" name="searchbutton" id="sb">
</form>

</div>  

</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:01:57.277

编辑：这是问题所在。您正在设置`dataType: json`，但您的 PHP 没有返回 JSON。删除`dataType: 'json'`线。也不要忘记开始 PHP 标记：`<?php`.
编辑 2：好的，这是获取元标记并显示它们的代码。PHP：

```
$homepage = file_get_contents("http://".$_POST['site']);
preg_match('%<meta.*name="keywords".*content="(.*)"\s+/>%U', $homepage, $regs);
if(count($regs)) {
  $myString = implode('', $regs );  
 echo $myString;
} 
```

（上面的代码是你的问题 - 我假设它有效）Javascript AJAX成功函数：

```
success: function (data) {
  $('#metaTags').text(data)
} 
```

HTML：

```
<div id="metaTags"></div> 
```

# version-control - hg 中外部回购的最佳做法是什么？

> ID：12188500
> 
> 赞同：4
> 
> 时间：2012-08-30T00:57:44.540
> 
> 标签：version-control, mercurial

类似，但 hg 文档不鼓励回答：[我可以使用 mercurial 模拟 svn:externals 吗？](https://stackoverflow.com/questions/217523/can-i-emulate-svnexternals-using-mercurial)

在使用 hg 之前，我使用的是 Subversion。看起来 Subversion 中的外部功能非常强大：我可以拥有指向另一个 repo 的特定版本的子 repo。但是 Hg 中的[Subrepository](http://mercurial.selenic.com/wiki/Subrepository)的文档说这是“最后手段的功能”。哇，太不祥了。另外，我在文档中没有看到任何关于将该子存储库粘贴到特定版本的内容。

不再维护 Deps 扩展。

不鼓励在网站上扩展森林。

因此，如果我希望将版本 XYZAB 的 repo 嵌套在我的 Hg repo 中，那么现在最好的替代方案是什么，而不是 Last Resort 的功能？汞在这个功能上有点糟糕吗？

Guestrepo 值得一看，但在这一点上非常新：[https ://bitbucket.org/selinc/guestrepo](https://bitbucket.org/selinc/guestrepo)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:38:00.110

> 但是 Hg 中的 Subrepository 的文档说这是“最后手段的功能”。哇，太不祥了。

这意味着您应该仔细检查您是否真的需要 subrepos。有许多非常大的项目使用 Mercurial 而不使用子存储库。他们将代码作为松散耦合的存储库的集合来管理——子存储库的主要问题是它们创建了[非常紧密的耦合](https://stackoverflow.com/a/8637556/110204)，并且在软件设计中通常会避免紧密耦合的组件，因为它们会限制您的灵活性。

然而，对子存储库的支持*不会*消失，事实上，随着人们向我们展示良好的用例，它会随着时间的推移而逐渐改善。

> 另外，我在文档中没有看到任何关于将该子存储库粘贴到特定版本的内容。

奇怪，因为子存储库都是关于检查特定版本的。也就是说，您**只能**签出您提交的完全相同的版本。`.hgsubstate`该版本在您提交时写入，`hg update`并将在结帐时查阅该文件。

请参阅[Mercurial Kick Start 指南](http://mercurial.aragost.com/kick-start/en/subrepositories/#another-version)以及[`hg help subrepos`](http://www.selenic.com/mercurial/hg.1.html#subrepositories)有关如何`.hgsubstate`处理文件的信息。

# r - 从 R 数据框中清除“Inf”值

> ID：12188509
> 
> 赞同：114
> 
> 时间：2012-08-30T00:58:30.637
> 
> 标签：r, dataframe, data.table

`Inf`在 R 中，我有一个在转换数据框时 创建一些值的操作。

我想把这些`Inf`价值观变成`NA`价值观。我的代码对于大数据来说很慢，有没有更快的方法呢？

假设我有以下数据框：

```
dat <- data.frame(a=c(1, Inf), b=c(Inf, 3), d=c("a","b")) 
```

以下适用于单个案例：

```
 dat[,1][is.infinite(dat[,1])] = NA 
```

所以我用下面的循环概括了它

```
cf_DFinf2NA <- function(x)
{
    for (i in 1:ncol(x)){
          x[,i][is.infinite(x[,i])] = NA
    }
    return(x)
} 
```

但我不认为这真的是在使用 R 的力量。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-30T01:04:43.167

## 选项1

`data.frame`使用 a是列列表这一事实，然后用于`do.call`重新创建 a `data.frame`。

```
do.call(data.frame,lapply(DT, function(x) replace(x, is.infinite(x),NA))) 
```

## 选项 2——`data.table`

您可以使用`data.table`和`set`。这避免了一些内部复制。

```
DT <- data.table(dat)
invisible(lapply(names(DT),function(.name) set(DT, which(is.infinite(DT[[.name]])), j = .name,value =NA))) 
```

或者使用列号（如果有很多列可能更快）：

```
for (j in 1:ncol(DT)) set(DT, which(is.infinite(DT[[j]])), j, NA) 
```

# 计时

```
# some `big(ish)` data
dat <- data.frame(a = rep(c(1,Inf), 1e6), b = rep(c(Inf,2), 1e6), 
                  c = rep(c('a','b'),1e6),d = rep(c(1,Inf), 1e6),  
                  e = rep(c(Inf,2), 1e6))
# create data.table
library(data.table)
DT <- data.table(dat)

# replace (@mnel)
system.time(na_dat <- do.call(data.frame,lapply(dat, function(x) replace(x, is.infinite(x),NA))))
## user  system elapsed 
#  0.52    0.01    0.53 

# is.na (@dwin)
system.time(is.na(dat) <- sapply(dat, is.infinite))
# user  system elapsed 
# 32.96    0.07   33.12 

# modified is.na
system.time(is.na(dat) <- do.call(cbind,lapply(dat, is.infinite)))
#  user  system elapsed 
# 1.22    0.38    1.60 

# data.table (@mnel)
system.time(invisible(lapply(names(DT),function(.name) set(DT, which(is.infinite(DT[[.name]])), j = .name,value =NA))))
# user  system elapsed 
# 0.29    0.02    0.31 
```

`data.table`是最快的。使用`sapply`会显着减慢速度。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-08-30T01:12:49.920

使用`sapply`和`is.na<-`

```
> dat <- data.frame(a=c(1, Inf), b=c(Inf, 3), d=c("a","b"))
> is.na(dat) <- sapply(dat, is.infinite)
> dat
   a  b d
1  1 NA a
2 NA  3 b 
```

或者您可以使用（感谢@mnel，这是他的编辑），

```
> is.na(dat) <- do.call(cbind,lapply(dat, is.infinite)) 
```

这明显更快。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-01-08T02:29:14.247

这是使用[na_if() 函数](https://dplyr.tidyverse.org/reference/na_if.html)的 dplyr/tidyverse 解决方案：

```
dat %>% mutate_if(is.numeric, list(~na_if(., Inf))) 
```

请注意，这只用 NA 代替了正无穷大。如果还需要替换负无穷大值，则需要重复。

```
dat %>% mutate_if(is.numeric, list(~na_if(., Inf))) %>% 
  mutate_if(is.numeric, list(~na_if(., -Inf))) 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-09-18T07:36:31.377

`[<-`with`mapply`比`sapply`.

```
> dat[mapply(is.infinite, dat)] <- NA 
```

有了mnel的数据，时间是

```
> system.time(dat[mapply(is.infinite, dat)] <- NA)
#   user  system elapsed 
# 15.281   0.000  13.750 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-10-31T07:52:06.533

hablar 包中有一个非常简单的解决方案：

```
library(hablar)

dat %>% rationalize() 
```

其中返回的数据帧将所有 Inf 转换为 NA。

与上述一些解决方案相比的时间。代码：库（hablar）库（data.table）

```
dat <- data.frame(a = rep(c(1,Inf), 1e6), b = rep(c(Inf,2), 1e6), 
                  c = rep(c('a','b'),1e6),d = rep(c(1,Inf), 1e6),  
                  e = rep(c(Inf,2), 1e6))
DT <- data.table(dat)

system.time(dat[mapply(is.infinite, dat)] <- NA)
system.time(dat[dat==Inf] <- NA)
system.time(invisible(lapply(names(DT),function(.name) set(DT, which(is.infinite(DT[[.name]])), j = .name,value =NA))))
system.time(rationalize(dat)) 
```

结果：

```
> system.time(dat[mapply(is.infinite, dat)] <- NA)
   user  system elapsed 
  0.125   0.039   0.164 
> system.time(dat[dat==Inf] <- NA)
   user  system elapsed 
  0.095   0.010   0.108 
> system.time(invisible(lapply(names(DT),function(.name) set(DT, which(is.infinite(DT[[.name]])), j = .name,value =NA))))
   user  system elapsed 
  0.065   0.002   0.067 
> system.time(rationalize(dat))
   user  system elapsed 
  0.058   0.014   0.072 
> 
```

似乎 data.table 比 hablar 快。但有更长的语法。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-28T16:39:48.953

Feng Mai 在上面有一个 tidyverse 的答案来得到负无穷和正无穷：

```
dat %>% mutate_if(is.numeric, list(~na_if(., Inf))) %>% 
  mutate_if(is.numeric, list(~na_if(., -Inf))) 
```

这很好用，但要提醒一句，不要像在赞成评论中建议的那样，在这里交换 abs(.) 来同时执行两行。看起来它可以工作，但是将数据集中的所有负值都更改为正值！你可以用这个来确认：

```
data(iris)
#The last line here is bad - it converts all negative values to positive
iris %>% 
  mutate_if(is.numeric, ~scale(.)) %>%
  mutate(infinities = Sepal.Length / 0) %>%
  mutate_if(is.numeric, list(~na_if(abs(.), Inf))) 
```

对于一行，这有效：

```
 mutate_if(is.numeric, ~ifelse(abs(.) == Inf,NA,.)) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-03T21:34:07.040

在 dplyr 管道链中，您可以执行此操作。

```
%>% mutate_all(.,.funs = function(x){ifelse(is.infinite(x),NA,x)}) %>% 
```

我觉得它简单、优雅、快速。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-19T01:52:31.137

另一种解决方案：

```
 dat <- data.frame(a = rep(c(1,Inf), 1e6), b = rep(c(Inf,2), 1e6), 
                      c = rep(c('a','b'),1e6),d = rep(c(1,Inf), 1e6),  
                      e = rep(c(Inf,2), 1e6))
    system.time(dat[dat==Inf] <- NA)

#   user  system elapsed
#  0.316   0.024   0.340 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-20T00:46:00.660

另外，如果有人需要 Infs 的坐标，可以这样做：

```
library(rlist)
list.clean(apply(df, 2, function(x){which(is.infinite(x))}), function(x) length(x) == 0L, TRUE) 
```

结果：

```
$colname1
[1] row1 row2 ...
$colname2
[2] row1 row2 ... 
```

使用此信息，您可以将特定位置的 Inf 值替换为平均值、中位数或您想要的任何运算符。

例如（对于元素 01）：

```
repInf = list.clean(apply(df, 2, function(x){which(is.infinite(x))}), function(x) length(x) == 0L, TRUE)
df[repInf[[1]], names(repInf)[[1]]] = median or mean(is.finite(df[ ,names(repInf)[[1]]]), na.rm = TRUE) 
```

在循环中：

```
for (nonInf in 1:length(repInf)) {
df[repInf[[nonInf]], names(repInf)[[nonInf]]] = mean(is.finite(df[ , names(repInf)[[nonInf]]]))
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-09T18:14:03.760

已经有很多答案了，但想补充一点，对我来说，这个`tidyverse`解决方案总是很有效：

```
%>% mutate_all(function(x) ifelse(is.nan(x) | is.infinite(x), NA, x)) %>% 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-11-12T21:44:32.933

您还可以使用方便的 replace_na 功能： [https ://tidyr.tidyverse.org/reference/replace_na.html](https://tidyr.tidyverse.org/reference/replace_na.html)

# vb.net - 如何使我的应用看起来像 Of fice 2013 和 VS 2012？

> ID：12188510
> 
> 赞同：8
> 
> 时间：2012-08-30T00:58:36.863
> 
> 标签：vb.net, visual-studio-2010, user-interface, office-2013

我想让我的应用看起来像 Of​​fice 2013 和 VS 2012。新的白色流线型外观。还带有纯色工具栏图标。有没有办法让我的应用程序看起来与 VB 2010 一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T23:37:58.147

查看 Windows Presentation Foundation (WPF)。

要在 .NET 4+ 中重新创建新工具 bat，您可以使用[Ribbon (WPF) Control](http://msdn.microsoft.com/en-us/library/ff799534.aspx)。如果您的目标是早期版本，则必须创建自己的功能区控件或找到第 3 方解决方案。

-编辑-更多信息...

为了帮助设计您的应用程序，我建议您获取一份 Microsoft Expression Blend。它将使使用 WPF (XAML) 变得更加容易。VS 2010 附带的内置编辑器甚至没有那么好。VS 2012 设计器应该会更好，虽然我自己没有尝试过。

# git - 相当于“git add .”的颠覆？

> ID：12188512
> 
> 赞同：9
> 
> 时间：2012-08-30T00:58:52.070
> 
> 标签：git, svn, version-control

我正在从 git 切换到颠覆，但我发现“svn add”。与 git 不一样。

它打印

```
svn: warning: W150002: '/home/mike/Projects/repos' is already under version control
svn: E200009: Could not add all targets because some targets are already versioned
svn: E200009: Illegal target for the requested operation 
```

SVN 有等价物吗？或者我必须手动添加它们？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T01:04:41.067

`svn add`和命令做不同的`git add`事情。该`git add`命令用于将任何文件（包括新文件）的*任何*更改提交到 Git 索引，为后续提交做准备。

该`svn add`命令*仅*用于在准备提交时将新文件添加到存储库。更改的文件使用`svn commit`命令提交，不需要先添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T01:02:18.060

使用提交：

[http://svnbook.red-bean.com/en/1.2/svn.ref.svn.c.commit.html](http://svnbook.red-bean.com/en/1.2/svn.ref.svn.c.commit.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-30T01:02:48.533

[svn 在这里导入](http://svnbook.red-bean.com/nightly/fr/svn-book.html#svn.tour.importing.import) svn 文档。

# php - 未定义的索引：php 中的 REDIRECT_STATUS

> ID：12188518
> 
> 赞同：1
> 
> 时间：2012-08-30T00:59:51.723
> 
> 标签：php, .htaccess

我已经成功创建了一个 .htaccess 文件，该文件可以正常工作，并将所有错误代码（400、403、404、405、408、500、502、504）重定向到一个常见的 error-page.php。我正在使用**$_SERVER["REDIRECT_STATUS"]**；检测错误代码，但是当页面导航到错误时，应该发生，我收到一个**未定义的索引：REDIRECT_STATUS**错误。我需要设置一些配置或其他变量吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:11:45.147

您可以尝试使用类似...的东西

```
ErrorDocument 404 /error-page.php?status=404
ErrorDocument 500 /error-page.php?status=500 
```

然后使用 $_GET 从那里相应地处理错误页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T07:23:38.607

从[Apache 手册](http://httpd.apache.org/docs/current/custom-error.html#configuration)：

> 重定向到本地 URL 时，会设置其他环境变量，以便可以进一步自定义响应。它们不会发送到外部 URL。

因此，如果您的 ErrorDocument 指令使用 URL，`$_SERVER["REDIRECT_STATUS"]`则将不可用。

而不是这个：

```
ErrorDocument 404 http://example.com/error-page.php 
```

做这个：

```
ErrorDocument 404 /error-page.php 
```

我无法找到任何地方说明何时将其添加到 Apache，因此我不确定此功能需要什么版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T01:21:02.247

我想这会有所帮助吗？它适用于我遇到的几乎所有未定义的索引错误。

```
<?PHP
    error_reporting(E_ALL & ~E_NOTICE);
?> 
```

# mapping - 获取 Leaflet LayerGroup 大小的简单方法？

> ID：12188522
> 
> 赞同：5
> 
> 时间：2012-08-30T01:00:23.753
> 
> 标签：mapping, leaflet

有没有一种简单的方法来获取[Leaflet LayerGroup](http://leaflet.cloudmade.com/reference.html#layergroup)中的层数？快速浏览一下文档说目前没有。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T07:47:10.603

# 更新的答案

自从我第一次回答以来，`LayerGroup`已经用一种`getLayers()`方法进行了扩展，使解决方案变得简单：

`layerGroup.getLayers().length`.

* * *

# **旧**多余的答案：

查看[LayerGroup 代码](https://github.com/CloudMade/Leaflet/blob/master/src/layer/LayerGroup.js)，您应该可以得到层数`layerGroup._layers.length`。

但请注意，`_layers`实现者的目的是私有的，所以我想你不能确定这将在未来的版本中工作。

如果您想留在公共 API 中，那么您可以调用`eachLayer`并计算层数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T11:20:12.717

Asborn 暗示您可以通过任何图层事件对象访问地图图层对象。

例如

```
map.addEventListener('viewreset', function(event){
    console.log(event.target._layers);
}, false); 
```

要获得计算密钥所需的长度，最简单的方法是使用 ECMA（chrome、node 等）

```
Object.keys(map._layers).length 
```

我很惊讶没有 API 来获取这些信息，例如

```
maps.getLayers(); 
```

:)

编辑：实际上有： http: [//leafletjs.com/reference.html#layergroup](http://leafletjs.com/reference.html#layergroup)

```
getLayers() 
```

它返回该组内的图层数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-15T06:35:03.357

只需键入变量名称或函数名称或传单层名称，就有一种简单的方法来获取与传单或其他相关的所有函数。

```
 here I used google chrome console manager.
 just type the layer name you will get all the functions related to it 
```

***请看下面的图片***： [https ://i.stack.imgur.com/1LDz0.png](https://i.stack.imgur.com/1LDz0.png)

# php - 如何使用 Facebook API 获取好友额外信息

> ID：12188525
> 
> 赞同：-1
> 
> 时间：2012-08-30T01:00:53.613
> 
> 标签：php, facebook, facebook-graph-api

我尝试构建我的第一个 Facebook 应用程序，但遇到了一些问题。我想获取有关登录用户的朋友的一些信息。为此，我使用：

> $friends = $facebook->api("/me/friends?fields=id,name,birthday,location,hometown");

还有一些更多的信息，比如性别，喜欢等。

问题是这个查询不起作用，无论我发送什么字段，我只得到名称和 ID。

登录时我有这样的东西：

```
 $loginUrl = $facebook->getLoginUrl(array(
      'req_perms' => 'user_birthday,friends_birthday,user_relationships,friends_relationships'
  )); 
```

所以我认为这不是权限问题。

如何获得我需要的所有朋友信息？我使用的代码哪里错了？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:17:26.903

它应该如下所示：

```
$loginUrl = $facebook->getLoginUrl(array('scope' => 'user_birthday,friends_birthday,user_relationships,friends_relationships')); 
```

确保您拥有最新的 SDK 并转到此处[Facebook PHP SDK](https://developers.facebook.com/docs/reference/php/)

# sql - UPDATE 列基于 2 个其他列 Oracle

> ID：12188532
> 
> 赞同：1
> 
> 时间：2012-08-30T01:02:42.873
> 
> 标签：sql, oracle

我的表有 5 列。我想

```
UPDATE Column5='TEACHER' IF Column2='Y' 
AND 
UPDATE Column5='STUDENT' IF Column3='Y' 
```

我可以在一个语句中做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T01:07:01.780

您可能可以使用`CASE`声明。我的猜测是你想要这样的东西

```
UPDATE table_name
   SET column5 = (CASE WHEN column2 = 'Y'
                       THEN 'TEACHER'
                       WHEN column3 = 'Y'
                       THEN 'STUDENT'
                       ELSE null
                   END)
 WHERE column2 = 'Y'
    OR column3 = 'Y' 
```

我猜你不想更新两个条件都不满足的行。如果要更新每一行，则需要删除该`WHERE`子句，并且您可能需要调整两个条件都不满足的行的默认值（`ELSE`中的）。`CASE`

# mysql - sql 更新行 IF 其他表中的行 = 值

> ID：12188534
> 
> 赞同：0
> 
> 时间：2012-08-30T01:03:03.613
> 
> 标签：mysql

我需要一个 MySQL 查询，它将一个行值设置为 x IF 另一个表中的行值 = x

```
first table = `tblclients`

SET `status`='Closed'
IF
second table = `tblhosting`
AND `domainstatus`='Cancelled' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:06:59.910

`UPDATE`您可以在语句中加入表。你可以尝试这样的事情。

```
UPDATE tblCLients a 
          INNER JOIN tblHosting b
              on a.commonID = b.commonID     -- their relationship key
SET a.`Status` = IF(b.domainStatus = 'Cancelled', 'Closed', 'Open') 
```

# xcode - xcode 企业配置

> ID：12188536
> 
> 赞同：0
> 
> 时间：2012-08-30T01:03:13.470
> 
> 标签：xcode, provisioning, ios-provisioning

因此，我们有一个由顾问设置的企业配置文件，并且工作正常。但现在我们想为另外 2 位开发人员提供正确的构建配置文件。

我们通过苹果配置文件站点构建企业配置文件，该配置文件顺利进行，直到下载并在 xcode 中打开，我们得到“未找到有效的签名身份”。

有谁知道分步指南。我们已经尝试了这 10 种不同的方法，因此提供文档链接实际上并没有太大帮助。我们尝试并阅读了有关该主题的每个 stackoverflow 帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:29:54.230

您还必须向他们提供私钥/p12 文件。通常，当在 Keychain 应用程序中找不到配置文件中使用的证书的匹配密钥时，您会收到该错误。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:55:42.853

解决方案是转到您当前正在构建的另一个框并使用密码导出 p12 文件，然后将该 p12 通过电子邮件发送给您自己。

从您的电子邮件中打开附件，然后双击 p12 并将其安装在新机器上。

明白了。出于某种原因，当我这样做时，原来的盒子不会再建造任何东西了。不要惊慌失措。我们只需要退出原来的盒子，关闭它，然后重新登录，然后它又开始工作了。

# google-apps-script - RadioButton 正在传递值，但在第六个失败？

> ID：12188538
> 
> 赞同：0
> 
> 时间：2012-08-30T01:03:37.243
> 
> 标签：google-apps-script

我想我快疯了。尝试验证单选按钮的值，因为 true/false 是在 doPost 之前可以访问的所有内容，我正在使用处理程序 e.parameter 组合。这是[工作版本](https://script.google.com/macros/s/AKfycbzrpNAftdKY5FbNbQeNQMJqqmpAhk8HgqJvI4u9aW42pEiYTxUF/exec)。

奇怪的是，当我添加第六个按钮并尝试验证它时，第六个 e.parameter 返回为未定义。我已经尝试了我能想到的一切。这[是非工作版本](https://script.google.com/macros/s/AKfycbx9NvjvvDeJaKlhFrUAs3IYUBQrGjNDxf7q8yjDp5LGwb_jSts/exec)

我完全迷路了。

这是损坏的代码：

```
function doGet(){
var app = UiApp.createApplication();
var form = app.createFormPanel().setId('form');
var appPanel = app.createVerticalPanel();

var programGrid = app.createGrid(6,5).setWidth('900px');

var programButton1 = app.createRadioButton("program", "Spring 1").setFormValue('Spring 1').setName('program1').setId('program1');
var programButton2 = app.createRadioButton("program", "Spring 2").setFormValue('Spring 2').setName('program2').setId('program2');  
var programButton3 = app.createRadioButton("program", "Spring 3").setFormValue('Spring 3').setName('program3').setId('program3'); 
var programButton4 = app.createRadioButton("program", "Summer 1").setFormValue('Summer 1').setName('program4').setId('program4');
var programButton5 = app.createRadioButton("program", "Summer 2").setFormValue('Summer 2').setName('program5').setId('program5');
var programButton6 = app.createRadioButton("program", "Summer 3").setFormValue('Summer 3').setName('program6').setId('program6');
programGrid.setWidget(0,1, programButton1);
programGrid.setWidget(1,1, programButton2);
programGrid.setWidget(2,1, programButton3);
programGrid.setWidget(0,3, programButton4);
programGrid.setWidget(1,3, programButton5);
programGrid.setWidget(2,3, programButton6);

var button1 = app.createButton("Verify Input").setEnabled(true);
programGrid.setWidget(4,3, button1);

var syncChangeHandler = app.createServerHandler('syncText').addCallbackElement(form);

var reviewPanel = app.createVerticalPanel().setVisible(true).setId('reviewPanel');
var reviewLabel = app.createLabel("REVIEW PANEL")

var reviewProgramLabel = app.createLabel("Program Selected:");
var reviewProgram = app.createLabel().setId('reviewProgram');

var reviewProgramGrid = app.createGrid(2,2);

reviewProgramGrid.setWidget(1,0, reviewProgramLabel);
reviewProgramGrid.setWidget(1,1, reviewProgram);

reviewPanel.add(reviewProgramGrid);

button1.addClickHandler(syncChangeHandler);

app.add(form);
form.add(appPanel);
appPanel.add(programGrid);
appPanel.add(reviewPanel);

return app;
}

function syncText(e){
  var app = UiApp.getActiveApplication(); 
  var a = e.parameter.program1;
  var b = e.parameter.program2;
  var c = e.parameter.program3;
  var d = e.parameter.program4;
  var e = e.parameter.program5;
  var f = e.parameter.program6;

  if(a == "true")
  {
  var g  = "Spring 1";
   }

  if(b == "true")
  {
  var g = "Spring 2";
   }

   if(c == "true")
  {
  var g = "Spring 3";
   }
   if(d == "true")
  {
  var g = "Summer 1";
   }

  if(e == "true")
  {
  var g = "Summer 2";
   }

   if(f == "true")
   {
   var g = "Summer 3";
   }
  app.getElementById('reviewProgram').setText(g);   

return app;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:07:39.057

问题出在这里：

```
var e = e.parameter.program5;
var f = e.parameter.program6; 
```

你在搞乱e，然后问题就出现了。

尝试使用其他变量名

# git - 使用 Git，修补程序分支应该与开发分支合并还是应该相反？

> ID：12188543
> 
> 赞同：0
> 
> 时间：2012-08-30T01:04:07.027
> 
> 标签：git, git-branch

我想知道为什么在 Pro Git 书（Apress 2009）中，第 3 章中的示例是：

1.  现在在分支上提交的所有内容`master`都已推送到生产环境
2.  为开发功能创建了一个`iss53`分支，添加了一些临时更改并提交。
3.  需要热修复，所以切换到`master`分支并创建一个`hotfix`分支
4.  修复错误（例如技术支持电子邮件地址的拼写错误），并提交并推送到生产环境
5.  切换到`master`分支并与`hotfix`分支合并
6.  （可选）删除`hotfix`分支

就在此时，我想知道为什么这本书会去`master`分支并与`iss53`分支合并。这实际上不会使主分支处于中间状态吗？如果需要另一个热修复怎么办，那么master不适合做热修复，我们必须手动选择合并之前的提交。合并不应该是转到`iss53`分支并与分支合并`hotfix`，以便现在错误的内容也将合并到未来的版本中吗？

**更新：**实际上，本书假设`iss53`工作已完成，并进行最后一次合并。但是如果工作`iss53`还没有完成，我们想合并到热修复中怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:13:52.820

@动静能量，

在这种情况下，您有三个选择：

1.  `cherry-pick``hotfix`承诺_`iss53`
2.  合并`master`到`iss53`
3.  重新定位`iss53`到`master`

就个人而言，我更喜欢＃3。因为它提供了更清晰的历史。

但是，如果你有太多的开发人员（像 linux 那样），#2 可能会更容易。这应该很少见。在这种情况下，请确保您`master`在稳定点上合并（例如，稳定点发布，而不是一些随机测试状态），这样历史不会变得太复杂。

LWN 有[一篇文章](http://lwn.net/Articles/328436/)详细讨论了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:17:08.930

如果工作`iss53`尚未完成，但您想要修补程序，您可以合并`master`到`iss53`，或（更好）`iss53`在`master`.

合并：

```
git checkout iss53
git merge --no-ff master # --no-ff keeps the master tip where it is 
```

变基（你将在本章后面介绍）：

```
git checkout iss53
git rebase master 
```

# sql-server - 如果您无权访问 Web 托管服务器上的主数据库，实体框架将无法检索数据库信息

> ID：12188546
> 
> 赞同：1
> 
> 时间：2012-08-30T01:04:21.020
> 
> 标签：sql-server, visual-studio-2010, entity-framework

**背景资料**：

我在网络托管服务器上购买了 1.5 GB 的数据库。它只给了我访问数据库的权限。

**问题**：

![数据库连接错误](../Images/40ed070e5d812e04c7ee3f7cc015ca97.png)

你可能看不懂汉字，但你知道最后一句的意思，这就是这个错误的关键所在。

**原因**：

这发生在 EF 尝试从 Web 服务器检索数据库信息时。如您所见，它试图从主数据库和 INFORMATION_SCHEMA.TABLES 视图中获取表的信息。这是导致此问题的原因，因为我没有被授予访问该数据库的权限。

所以我希望我清楚地解释了这个问题。

**解决方法**：

我找到了解决它的方法。使用完全相同的数据库结构（相同的表、相同的列等）在您自己的本地数据库上创建 EF，然后将 connectionString 更改为指向 Web 服务器。

**问题**：

每当数据库发生更改并且您想要更新 EF DataContext 结构时，它总是会转到主数据库和该视图以获取信息，因此您必须来回更改 connectionString。它变得微不足道。

**问题**：

还有其他方法吗？我发现 LINQ2SQL 没有这个问题，因为它不会自动从数据库中检索信息。相反，用户必须拖动他们想要使用的表格。

我期待着任何精彩的答案。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:15:12.603

您应该始终针对本地数据库进行开发，并且仅在部署到生产服务器时将连接字符串更改为数据库。没有更好的方法来做到这一点。

EF首先使用数据库时依赖于从主数据库读取的权限，目前没有办法避免它。昨天甚至[在 Data UserVoice 上针对这个问题提出了建议。](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/3115261-change-entity-framework-behavior-when-constructing)

# iphone - 尝试播放声音时出现未知错误

> ID：12188554
> 
> 赞同：0
> 
> 时间：2012-08-30T01:05:03.890
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

```
ld: warning: ignoring file /Users/myself/Desktop/iOS Development/X Code Projects/myproject/AudioToolbox.framework/AudioToolbox, missing required architecture i386 in file /Users/myself/Desktop/iOS Development/X Code Projects/myproject/AudioToolbox.framework/AudioToolbox (2 slices) 
```

我需要尽快解决它！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:09:38.227

可能你需要导入框架AudioToolBox，试试吧。

```
 #import <AudioToolbox/AudioServices.h> 
```

# objective-c - 如何在 CCMenuitem 的选择器中为方法使用参数

> ID：12188557
> 
> 赞同：0
> 
> 时间：2012-08-30T01:05:28.283
> 
> 标签：objective-c, parameters, cocos2d-iphone, parameter-passing

```
-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [touch locationInView:[touch view]];
    CGPoint convertedlocation = [[CCDirector sharedDirector] convertToGL:location];  
    bb=[CCMenuItemImage itemFromNormalImage:@"Aqua-ball.png" selectedImage:@"Aqua-ball.png" target:self selector:@selector(move:)];
    menu1=[CCMenu menuWithItems:bb, nil];

    //ignore this.....

}

-(void) move:(CGPoint) touch{
    [character runAction:[CCMoveTo actionWithDuration:1 position:ccp(touch.x,touch.y)]];
} 
```

我试图制作 CCmenuitem 选择器：@selector(move:converted location)，但它似乎无法接受参数，是否有一些这样做我可以传递参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T03:26:06.303

我认为没有办法以这种方式传递参数。有很多方法可以做你想做的事。这就是我要做的：

首先添加一个实例变量，例如`CGPoint lastTouchLocation`实现。然后像这样使用它：

```
-(void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint location = [touch locationInView:[touch view]];
    CGPoint convertedlocation = [[CCDirector sharedDirector] convertToGL:location];

    lastTouchLocation = convertedLocation;
    bb=[CCMenuItemImage itemFromNormalImage:@"Aqua-ball.png" selectedImage:@"Aqua-ball.png" target:self selector:@selector(buttonTapped)];

    menu1=[CCMenu menuWithItems:bb, nil];    
}

-(void) buttonTapped {
    [character runAction:[CCMoveTo actionWithDuration:1 position:lastTouchLocation]];
} 
```

# wpf - 具有动态高度的网格中的文本截断

> ID：12188558
> 
> 赞同：0
> 
> 时间：2012-08-30T01:05:30.657
> 
> 标签：wpf

该网格的高度是可调整的，我需要能够截断状态一文本，同时保留状态三始终可见且状态二始终显示在状态一正下方的规则。我试图通过将状态 2 的 VerticalAlignment 设置为顶部来实现这一点，但没有运气。

例如，请注意，当您将高度 78 更改为 178 时，状态 2 不再位于状态 1 旁边。

```
<Grid Height="78"
      Width="167">

<Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
</Grid.RowDefinitions>

<Border x:Name="_itemBorder"
        Grid.RowSpan="3"
        Background="LightBlue" />

<TextBlock x:Name="_statusOneTextBlock"
           Grid.Row="0"
           Margin="5"
           Text="STATUS 1 Very long status one text"
           TextWrapping="Wrap"
           TextTrimming="CharacterEllipsis" />

<TextBlock x:Name="_statusTwoTextBlock"
           Grid.Row="1"
           Margin="5"
           Text="STATUS 2"
           VerticalAlignment="Top"
           TextTrimming="CharacterEllipsis" />

<TextBlock x:Name="_statusThreeTextBlock"
           Grid.Row="3"
           Margin="5"
           Text="STATUS 3"
           VerticalAlignment="Bottom"
           TextTrimming="CharacterEllipsis" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:56:39.380

```
<Grid Height="178" 
  Width="167">

    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />

    </Grid.RowDefinitions>

    <Border x:Name="_itemBorder" 
    Grid.RowSpan="3" 
    Background="LightBlue" />

    <TextBlock x:Name="_statusOneTextBlock" 
       Grid.Row="0" 
       Margin="5" 
       Text="STATUS 1 Very long status one text" 
       TextWrapping="NoWrap" 
       TextTrimming="CharacterEllipsis" />

    <TextBlock x:Name="_statusTwoTextBlock" 
       Grid.Row="1" 
       Margin="5" 
       Text="STATUS 2" 
       VerticalAlignment="Top" 
       TextTrimming="CharacterEllipsis" />

    <TextBlock x:Name="_statusThreeTextBlock" 
       Grid.Row="2" 
       Margin="5" 
       Text="STATUS 3" 
       VerticalAlignment="Bottom" 
       TextTrimming="CharacterEllipsis" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:50:02.977

修复了在 TextBlock 中使用 InlineUIContainer：

```
<Grid Height="68"
      Width="167">

<Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="23" />
</Grid.RowDefinitions>

<Border x:Name="_itemBorder"
        Grid.RowSpan="2"
        Background="LightBlue" />

<TextBlock Grid.Row="0">
<TextBlock x:Name="_statusOneTextBlock"
           Text="STATUS 1 Very long status one text"
           TextWrapping="Wrap"
           TextTrimming="CharacterEllipsis" />
<LineBreak />
<InlineUIContainer>
    <TextBlock x:Name="_statusTwoTextBlock"
               Text="STATUS 2"
               VerticalAlignment="Top"
               TextTrimming="CharacterEllipsis" />
</InlineUIContainer>
</TextBlock>

<TextBlock x:Name="_statusThreeTextBlock"
           Grid.Row="1"
           Text="STATUS 3"
           VerticalAlignment="Bottom"
           TextTrimming="CharacterEllipsis" />
</Grid> 
```

# javascript - Javascript 匹配从 URL 中删除部分文件名 - 替换最后一次出现

> ID：12188561
> 
> 赞同：1
> 
> 时间：2012-08-30T01:05:38.090
> 
> 标签：javascript, string, replace

我有这个图片网址： http: [//files.myweb.com/12/06/002_xz808/normal_paris_01.jpg](http://files.myweb.com/12/06/002_xz808/normal_paris_01.jpg)

我需要得到这个[http://files.myweb.com/12/06/002_xz808/paris_01.jpg](http://files.myweb.com/12/06/002_xz808/paris_01.jpg)

我不能使用简单的替换功能，`"normal_"`因为这个关键字可能会意外地出现在其路径中的文件名之前。我需要在最后一次使用它，`"normal_"`但我不知道如何。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:16:57.270

希望这可以帮助：

```
function replNormal(normal) {
    return normal.replace(/^(.*)normal\_(.*?)$/, '$1$2');
}
console.log(replNormal("http://files.myweb.com/12/06/normal_002_xz808/normal_paris_01.jpg")); 
```

前面的正则表达式（括号中的部分）中的捕获组是贪婪的，然后是惰性的。

贪婪的 (.*) 想要在它停止捕获之前尽可能地扩展。

懒惰的人（。*？）希望在满足其捕获要求时尽快退出。

替换字符串中的反向引用告诉它将在第一个和第二个捕获组中找到的内容直接连接在一起，跳过未捕获的 normal_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:16:49.620

您只能在路径的最后一段中匹配“/normal_”，如下所示：

```
var url = "http://files.myweb.com/12/06/002_xz808/normal_paris_01.jpg";
url = url.replace(/\/normal_([^\/]+)$/, "\/$1"); 
```

工作演示：http: [//jsfiddle.net/jfriend00/rzj8u/](http://jsfiddle.net/jfriend00/rzj8u/)

这只会替换 URL 最后一段中的“normal_”（后面没有斜杠）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T01:10:35.543

有很多方法可以解决这个问题。首先想到的是在 上拆分 URL `/`，并在最后一个组件中进行替换，然后将其重新组合在一起：

```
var url = 'http://files.myweb.com/12/06/002_xz808/normal_paris_01.jpg';
var parts = url.split('/');
// Remove the last part, everything following the last /
// and do the replacement
var img = parts.pop().replace("normal_", "");
// Stick the new string back onto the array
parts.push(img)
// And put all the / back in...
url = parts.join("/");

console.log(url);
// "http://files.myweb.com/12/06/002_xz808/paris_01.jpg" 
```

# jquery - 验证表单而不刷新“单选按钮不起作用”

> ID：12188564
> 
> 赞同：0
> 
> 时间：2012-08-30T01:06:06.483
> 
> 标签：jquery, validation

我需要帮助，我发现本[教程](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/) 无需刷新即可验证表单，但问题是我认为这仅适用于文本字段:) 但我使用了 4 个不同的单选按钮，我真的需要这个脚本来处理这些单选按钮！

这是javascript文件:)！

```
runOnLoad(function(){
  $("input#name").select().focus();         
});

$(function() {        
    $('.error').hide();        
    $(".button").click(function() {  

        // validate and process form here  
        $('.error').hide(); 
        var name = $("input#name").val();  

        if (name == "") {  
            $("label#name_error").show();  
            $("input#name").focus();  
            return false;  
        }  

        var email = $("input#email").val();  
        if (email == "") {  
            $("label#email_error").show();  
            $("input#email").focus();  
            return false;  
        }  

        var mobile = $("input#mobile").val();  
        if (mobile == "") {  
            $("label#mobile_error").show();  
            $("input#mobile").focus();  
            return false;  
        }  

        var college = $("input#college").val();  
        if (college == "") {  
            $("label#college_error").show();  
            $("input#college").focus();  
            return false;  
        }  

        var university = $("input#university").val();  
        if (university == "") {  
          $("label#university_error").show();  
          $("input#university").focus();  
          return false;  
        }  

        var level = $("input#level").val();  
        if (level == "") {  
          $("label#level_error").show();  
          $("input#level").focus();  
          return false;  
        }  

        var first_preference = $("input#first_preference").val();  
            if (first_preference == "") {  
          $("label#first_preference_error").show();  
          $("input#first_preference").focus();  
          return false;  
        }  

        var second_preference = $("input#second_preference").val();  
        if (second_preference == "") {  
          $("label#second_preference_error").show();  
          $("input#second_preference").focus();  
          return false;  
        }  

        var third_preference = $("input#third_preference").val();  
        if (third_preference == "") {  
          $("label#third_preference_error").show();  
          $("input#third_preference").focus();  
          return false;  
        }  

        var heard = $("input#heard").val();  
        if (heard == "") {  
          $("label#heard_error").show();  
          $("input#heard").focus();  
          return false;  
        }     

        var applying = $("input#applying").val();  
        if (applying == "") {  
          $("label#applying_error").show();  
          $("input#applying").focus();  
          return false;  
        }    

        var strength = $("input#strength").val();  
        if (strength == "") {  
          $("label#strength_error").show();  
          $("input#strength").focus();  
          return false;  
        }   

        var weakness = $("input#weakness").val();  
        if (weakness == "") {  
          $("label#weakness_error").show();  
          $("input#weakness").focus();  
          return false;  
        }    

        var previousEx = $("input#previousEx").val();  
        if (previousEx == "") {  
          $("label#previousEx_error").show();  
          $("input#previousEx").focus();  
          return false;  
        }   

        var dataString = 'name='+ name + '&email=' + email + '&mobile=' + mobile + '&college=' + college + '&university=' + university + '&level=' + level + '&first_preference=' + first_preference + '&second_preference=' + second_preference + '&third_preference=' + third_preference + '&heard=' + heard + '&applying=' + applying + '&strength=' + strength + '&weakness=' + weakness + '&previousEx=' + previousEx;

        $.ajax({
              type: "POST",
              url: "php/database_sorting.php",
              data: dataString,
              success: function() {
                $('#contact_form').html("<div id='message'></div>");
                $('#message').html("<h2>Contact Form Submitted!</h2>")
                .append("<p>We will be in touch soon.</p>")
                .hide()
                .fadeIn(1500, function() {
                  $('#message').append("<img id='checkmark' src='images/done.png' />");
                });
              }
        });
        return false;
    });
}); 
```

[演示：](http://jsfiddle.net/Db2Uh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:41:23.157

假设您有一个按名称分组的单选按钮，以检查是否选择了其中一个：

```
//update the name to correspond to your radios group's name
if (!$('input[type="radio"][name="radiosGroup"]:checked').length) {
    alert('no radios selected!');
    //you can adapt the error message to your liking,
    //e.g. replacing the alert with $('#radio_error').show()
    return false;
} 
```

[**小提琴**](http://jsfiddle.net/ult_combo/pBvZC/)

* * *

另一种在单选按钮上“跳过”JS 验证的方法是在生成页面时预先检查其中一个：

```
<input type="radio" name="radiosGroup" checked="checked" value="1" /> 
```

这样，将始终选择其中一个无线电。

* * *

使用 HTML5，您可以使用元素（按钮输入除外）的`required`属性`input`来跳过现代浏览器的 JS 验证。[**小提琴**](http://jsfiddle.net/ult_combo/pBvZC/1/)

* * *

最后，如果您的所有`input`///都在表单中，您可以使用 jQuery生成查询字符串，而不是手动构建它。如果它们不在表单内，您可以将它们包装在一个表单内。`textarea``checkbox``radio`[`.serialize()`](http://api.jquery.com/serialize/)

```
$('#myForm').serialize(); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/pBvZC/2/)

* * *

正如问题中已经评论的那样，JS 验证只是为了提供更好的 UI（例如，在不刷新页面的情况下显示错误），如果您要公开您的网站，则需要服务器端验证，因为 JS 很容易被绕过。

* * *

还有一个旁注，假设您`input`的 s 在表单内，最好将您的验证附加到表单的[`.submit()`](http://api.jquery.com/submit/)处理程序而不是单击按钮，以确保在独立于浏览器或用户单击提交表单时触发您的验证在提交按钮中或在文本输入元素中按 Enter。

# android - SQLite 触发器（未触发）

> ID：12188566
> 
> 赞同：0
> 
> 时间：2012-08-30T01:06:32.873
> 
> 标签：android, sqlite, triggers, insert

我创建了一个 SQLite 触发器，当我的 reg_bttn onCLick 在数据已插入数据库后被选中时，它应该执行。我没有编译错误，没有 logcat 错误，也没有触发器阻止新插入。我的触发器语句位于我的数据库类中。是否应该在我的班级中进行插入。

```
 public LoginDB(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub      

        String sqlDataStore = "create table if not exists " +
        TABLE_NAME_CREDENTIALS + " ("+ BaseColumns._ID + " integer primary key autoincrement,"

                    + COLUMN_NAME_USERNAME + " text not null,"
                    + COLUMN_NAME_PASSWORD + " text not null);";

        db.execSQL("CREATE TRIGGER DATABASE_NAME " +
                " BEFORE INSERT " +
                " ON "+TABLE_NAME_CREDENTIALS+ 
                " WHEN  BEGIN " +  
                " SELECT (( SELECT * FROM " + TABLE_NAME_CREDENTIALS + " WHERE "
                        + COLUMN_NAME_USERNAME + "' AND "+ COLUMN_NAME_PASSWORD +") IS NOT NULL)" +
                        " THEN RAISE ( ABORT, 'ID ALREADY EXIST') END;" +
                        "END;");

           db.execSQL(sqlDataStore);
    } 
```

插入：

```
 public void onClick (View v) {

    rUsername = rName.getText().toString();
    rPasscode = rCode.getText().toString();

    RegDetails regDetails = new RegDetails();
    regDetails.setrName(bundleRegName);
    regDetails.setpCode(bundleRegCode);
    if(v.getId()==R.id.rtn_button){
        finish();

    }else if(v.getId()==R.id.reg_button){
        insertCredentials(regDetails);
    }
}
    private void insertCredentials(RegDetails regDetails){

        LoginDB androidOpenDBHelper = new LoginDB(this);
        SQLiteDatabase sqliteDB = androidOpenDBHelper.getWritableDatabase();

        ContentValues contentValues = new ContentValues();
        contentValues.put(LoginDB.COLUMN_NAME_USERNAME, rUsername);
        contentValues.put(LoginDB.COLUMN_NAME_PASSWORD, rPasscode);

        long affectedColumnid = sqliteDB.insert(LoginDB.TABLE_NAME_CREDENTIALS, null, contentValues);

        Toast.makeText(getApplicationContext(), "Credentials Saved! Please login" + affectedColumnid, Toast.LENGTH_SHORT).show();
        sqliteDB.close();
        finish(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T04:00:03.320

我在触发器中使用计数与检查 null 方面取得了成功。例如：(SELECT Count() FROM table WHERE new.xxx = table.xxx) == 0)。

# java - 在控制台中制作列表！爪哇！非常简单只需要快速帮助

> ID：12188568
> 
> 赞同：-4
> 
> 时间：2012-08-30T01:06:53.153
> 
> 标签：java

好的那么我如何让我的 printscreen 语句在控制台中看起来像这样：

> 欢迎来到 55x2 骰子游戏！
> 
> 骰子游戏菜单：
> 
> [1]：立即播放！
> 
> [2]：怎么玩
> 
> [3]：退出

还有一个快速的问题，如果选择它，我要写什么来退出应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:09:35.307

用于[`System.out.println("text")`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println%28java.lang.String%29)打印带有作为参数传递的文本的新行。

要退出应用程序，请使用：

```
System.exit(0); 
```

# r - 如何通过 col2 找到 col1 分组的平均值

> ID：12188569
> 
> 赞同：-5
> 
> 时间：2012-08-30T01:06:53.653
> 
> 标签：r, group-by, average, mean

> **可能重复：**
> [用于按索引对向量进行分区并对该分区执行操作的惯用 R 代码](https://stackoverflow.com/questions/10748253/idiomatic-r-code-for-partitioning-a-vector-by-an-index-and-performing-an-operati)
> [如何计算特定国家/地区的利润中位数](https://stackoverflow.com/questions/12185319/how-to-calculate-median-of-profits-for-a-particular-country)

我试图通过使用 R 中的另一列来找到一列的平均值。在 SQL 中很容易做到这一点，但无法找到合适的函数并实现它们。下面是一些示例数据。

```
data("Forbes2000", package = "HSAUR")
head(Forbes2000)

##    rank                name        country             category  sales profits  assets marketvalue
## 1    1           Citigroup  United States              Banking  94.71   17.85 1264.03      255.30
## 2    2    General Electric  United States        Conglomerates 134.19   15.59  626.93      328.54
## 3    3 American Intl Group  United States            Insurance  76.66    6.46  647.66      194.87
## 4    4          ExxonMobil  United States Oil & gas operations 222.88   20.96  166.99      277.02
## 5    5                  BP United Kingdom Oil & gas operations 232.57   10.27  177.57      173.54
## 6    6     Bank of America  United States              Banking  49.01   10.81  736.45      117.55 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:23:28.550

使用一个名为 data.frame 的文件`dat`，如下所示：

```
 rank              name  country       category  sales profits assets marketvalue
21     21   DaimlerChrysler Germany    Consumer_dur 157.13    5.12 195.58       47.43 
```

尝试（未经测试 d/t 文本中的大量空格阻止 read.table 理解它）：

```
aggregate(dat[ , c("sales", "profits", "assets", "marketvalue")],   # cols to aggregate
          dat["country"],                                           # group column
          FUN=mean)                          # aggregation function 
```

# sql - 选择表 A 中与表 B 行中定义的条件不匹配的所有行的特定查询？

> ID：12188584
> 
> 赞同：0
> 
> 时间：2012-08-30T01:08:39.377
> 
> 标签：sql, sql-server-2008-r2

我在构建特定查询以选择记录时遇到问题。这是我想要达到的目标的一个愚蠢的例子。

假设我有一个名为的表`Criteria`，看起来像这样：

```
ID   Unit      Product   Part
==   ========  =======   ========
1    'sports'  'bike'    'handle'
2    'sports'  ' '       ' '
3    'furn'    'couch'   ' '
etc. 
```

我有一个表`Entries`，看起来像这样：

```
ID   Tuple
==   =========================
1    'sports / bike / seat'
2    'sports / racket / frame'
3    'furn / desk / leg'
4    'furn / lamp / shade'
etc. 
```

记录 1`Criteria`表明任何“运动/自行车/手柄”的元组都符合条件。中的记录 2 `Criteria`，其中`Product`和`Part`包含空格，表明任何以“sports”开头的元组都符合条件（“sports / % / %”）。记录 3 表明任何以 'furn' 和 'couch' 开头的元组都符合条件（“furn / couch / %”）。我想选择**不**符合任何条件的所有记录。

在这种情况下，应该返回记录 3 和 4 `Entries`，因为它们不匹配任何给定的条件。

我是 SQL 新手，所以我无法提出合适的查询。我的思考过程是这样的：

对于 的每条记录，基于、和`Criteria`构建一个字符串比较字符串。例如，对于记录 1，字符串将是*“运动/自行车/手柄”。* 对于记录 2，字符串将是*'sports / % / %'*，对于记录 3：*'furn / couch / %'*。现在，选择不等于任何这些字符串的所有记录。我在将其翻译成 SQL 术语时遇到了麻烦，这就是我需要您帮助的地方。`Unit``Product``Part`***`Tuple`***

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:30:12.200

你为什么要这样存储数据？求知者想知道。

但是，您可以尝试以下方式：

```
select *
from entries e
where not exists ( select *
                   from criteria c
                   where e.tuple like           case coalesce( unit    , '' ) when '' then '%' else unit    end
                                      + ' / ' + case coalesce( product , '' ) when '' then '%' else product end
                                      + ' / ' + case coalesce( part    , '' ) when '' then '%' else part    end
                 ) 
```

丑陋，但完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T01:22:42.777

您可以使用外部连接来执行此操作，例如：

```
select e.*
from Entries e left outer join
     (select c.*,
             ((case when c.unit = ' ' then '%' else c.unit end) + ' / ' +
              (case when c.product = ' ' then '%' else c.product end) + ' / ' +
              (case when c.part = ' ' then '%' else c.part end)
             ) as likestr
      from Criteria c
     ) c
     on e.tuple like likestr
where c.id is null 
```

这将是一项昂贵的操作，但应该做你想做的。

如果您将元组的组件存储在单独的列中，则数据结构会更有意义。然后，您可以进行逐列比较。***

# asp.net - 如何在选择标签中隐藏选项值？

> ID：12188586
> 
> 赞同：0
> 
> 时间：2012-08-30T01:08:53.917
> 
> 标签：asp.net

我在下面有这段代码：

```
<select size="1" name="sel1">
    <option value="c1">Choice 1</option>
    <option value="c2">Choice 2</option>
    <option value="c3">Choice 3</option>
    <option value="c4">Choice 4</option>
</select> 
```

然后我想要发生的事情是在 .aspx.cs 文件中隐藏例如方法中的第一个选项（例如下面）。怎么做？

```
protected void RptFaqsAnswer_ItemDataBound(object sender, RepeaterItemEventArgs e){
     // codes here...
} 
```

谢谢

RJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:17:24.773

您必须使用`runat=server`使代码隐藏知道 HTML 标记。您可以采取两种方法。

**方法 #1** *制作`select`一个 HTML 服务器控件*。

这将隐藏客户端的选项（即，它仍然呈现 HTML，只是告诉浏览器不要显示它）。

```
<select runat="server" id="myselect">
    <option value="c1">Choice 1</option>
    ...
</select> 
```

然后，您可以随意修改选项，例如：

```
myselect.Items[0].Attributes.Add("display", "none"); 
```

**方法 #2** *使`option`元素成为服务器控件*。

这根本不会将选项呈现给客户端。

```
<select>
    <option value="c1" runat="server" id="option1">Choice 1</option>
</select> 
```

`Visible`并在后面的代码中设置为 false：

```
option1.Visible = false; 
```

# ruby-on-rails - Ruby 中的数组修改

> ID：12188597
> 
> 赞同：0
> 
> 时间：2012-08-30T01:10:17.660
> 
> 标签：ruby-on-rails

是否有更改以下数组的功能（基本上是删除“str”和“=>”和“value”）

```
[{"str"=>"abc", "value"=>1}, {"str"=>"efg", "value"=>2}, {"str"=>"hij", "value"=>3}] 
```

像这样：

```
[[abc, 1], [efg, 2], [hij,3]] 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:14:38.900

这适用于您提供的数组。

```
orig_arr.map {|hash| [hash['str'], hash['value']]} 
```

如果您想要一个通用解决方案，则必须指定更多要求。哈希的条目没有排序（好吧，它们在 ruby​​ 1.9 中确实保持顺序，但依赖它不是一个好习惯），所以你不能简单地通过 获取值`hash.values`，除非你真的不关心排序。

# html - 浮动 div 重叠

> ID：12188603
> 
> 赞同：0
> 
> 时间：2012-08-30T01:12:05.777
> 
> 标签：html, overlapping

我正在尝试为朋友制作这个测试站点。它有 4 个固定位置的 div，中间有一个可以滚动的 div。问题是 bodyline div 与左 div 重叠。

[http://jsfiddle.net/H23du/](http://jsfiddle.net/H23du/)

有什么是错的预览。

任何人都可以帮忙，如果需要，我可以解释更多。尽管 JSfiddle 完美地显示了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:25:33.540

试试：`width:25%;`和`padding: 0px 0px 0px 60px;`和`text-align: justify;`在`#bodyline`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:20:44.167

固定 DIV 不再是 DOM 流的一部分，并且不能用作中心 div 的参考点。但是，您可以使用它们的百分比或基于像素的宽度来确定中心 DIV 的边距。

因此，宽度为 30px 的左侧 div 意味着中心 div 需要 30px 的左边距；

它真的只是从这里归结为数学。

现在，如果您使用相对定位浮动 div，而不是固定它们，那将是另一回事。

# python - 将线程与“with”关键字相结合

> ID：12188609
> 
> 赞同：0
> 
> 时间：2012-08-30T01:13:33.230
> 
> 标签：python, multithreading, with-statement

当我运行以下程序时：

```
import threading
class foo(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
    def __enter__(self):
        print "Enter"
    def __exit__(self, type, value, traceback):
        print "Exit"

    def run():
        print "run"

if __name__ == "__main__":
    with foo() as f:
        f.start() 
```

我得到这个作为输出

```
C:\>python test2.py
Enter
Exit
Traceback (most recent call last):
  File "test2.py", line 17, in <module>
    f.start()
AttributeError: 'NoneType' object has no attribute 'start' 
```

有没有办法将 with 关键字的保证清理代码执行与线程类结合起来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:20:14.540

```
import threading
class foo(threading.Thread):
    def __enter__(self):
        print "Enter"
        return self
    def __exit__(self, type, value, traceback):
        self.join() # wait for thread finished
        print "Exit"
    def run(self):
        print "run"

if __name__ == "__main__":
    with foo() as f:
        f.start() 
```

你的`__enter__`方法应该`return self`; 这就是分配给`with ... as f`构造中的变量的内容。

`__exit__`按照[@linjunhalida 的建议](https://stackoverflow.com/a/12188642/344821)让线程加入也是一个好主意，但不会导致您当前的问题。

如果您希望它可用，还应该更改`run`to的定义。`def run(self)`:)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-30T01:19:22.280

只需使用连接等待线程完成执行：http: [//docs.python.org/library/threading.html#threading.Thread.join](http://docs.python.org/library/threading.html#threading.Thread.join)

```
import threading
class foo(threading.Thread):
    def __init__(self):
        self.thread = threading.Thread.__init__(self)
    def __enter__(self):
        print "Enter"
    def __exit__(self, type, value, traceback):
        self.thread.join() # wait for thread finished
        print "Exit"

    def run():
        print "run"

if __name__ == "__main__":
    with foo() as f:
        f.start() 
```

# cocoa-touch - 在 iOS 中的应用程序简历上显示登录对话框

> ID：12188613
> 
> 赞同：1
> 
> 时间：2012-08-30T01:14:00.587
> 
> 标签：cocoa-touch, ipad, ios5

我对 iOS 开发相当陌生，并且有一个应用程序，每次启动应用程序时都需要登录。显然，恢复应用程序时的默认行为是返回到上次打开的视图。我确实想要这种行为，但我需要用户先进行身份验证，然后将它们返回到最后打开的视图，以便他们可以继续工作。我已经看到其他应用程序这样做了。谁能给我一个关于实现这一点的最佳方法的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T01:20:57.257

请参阅 UIApplicationDelegate 协议参考：http: [//developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

调用此方法是为了让您的应用程序知道它已从非活动状态变为活动状态。这可能是因为您的应用程序是由用户或系统启动的。如果用户选择忽略将应用程序暂时发送到非活动状态的中断（例如来电或短信），应用程序也可以返回到活动状态。

您应该使用此方法重新启动在应用程序处于非活动状态时暂停（或尚未启动）的任何任务。例如，您可以使用它来重新启动计时器或提高 OpenGL ES 帧速率。如果您的应用程序以前在后台，您还可以使用它来刷新应用程序的用户界面。

请求登录名/密码的最佳方法是使用 UIAlertView ...这是此类对话框实施的 comp[lete 源代码：[https](https://github.com/digdog/DDAlertPrompt) ://github.com/digdog/DDAlertPrompt ...您必须在其中插入类似的内容您的应用程序DidBecomeActive：

```
DDAlertPrompt *loginPrompt = [[DDAlertPrompt alloc] initWithTitle:@"Sign in to Service"     delegate:self cancelButtonTitle:@"Cancel" otherButtonTitle:@"Sign In"]; 
[loginPrompt show];
[loginPrompt release]; 
```

# javascript - Youtube Javascript API 播放/暂停/停止不起作用

> ID：12188614
> 
> 赞同：2
> 
> 时间：2012-08-30T01:14:20.603
> 
> 标签：javascript, html, api, iframe, youtube

我在使用 Youtube API 时遇到了一些问题。目前我只是想在视频旁边有一个“播放”按钮。我在本地网络服务器上运行代码（不是在我的硬盘上），我在互联网上搜索了多个主题但无济于事。这是我在另一个 stackoverflow 主题上看到的演示，理论上应该可以工作（这是我目前尝试使用的代码）：http: [//jsfiddle.net/L8qMe/1/](http://jsfiddle.net/L8qMe/1/) 但是，在 Windows 7 上的 Firefox 15 和 IE 中，播放按钮在演示中对我不起作用，所以我不再认为这是代码问题。可能是安全设置吗？有办法解决吗？请帮忙！

更新：演示和我的网络服务器（运行演示的代码）都不能在谷歌浏览器中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:23:26.370

您需要添加事件侦听器：

```
function onYouTubePlayerReady(playerId) { 
    ytplayer = document.getElementById("myytplayer");
    ytplayer.addEventListener("onStateChange", "onytplayerStateChange"); 
    ytplayer.addEventListener("onError", "onPlayerError"); 
} 
```

检查[JSFiddle](http://jsfiddle.net/PXPUg/)

# entity-framework - 如何输出 T？不可为空 在 EF 逆向工程师代码优先？

> ID：12188618
> 
> 赞同：2
> 
> 时间：2012-08-30T01:16:11.613
> 
> 标签：entity-framework, ef-code-first, t4

[Entity Framework Power Tools，Beta 2](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)的“逆向工程师代码优先”功能非常好，我正在定制逆向工程师模板。

在 Entity.tt 中，查看以下行（引入了换行符）：

```
<#= Accessibility.ForProperty(property) #> 
<#= code.Escape(property.TypeUsage) #> 
<#= code.Escape(property) #> 
{ get; set; } 
```

对于日期时间类型名为“SomeDate”的数据库列，您将输出以下代码：

```
public Nullable<System.DateTime> SomeDate { get; set; } 
```

如何修改 Entity.tt 代码以生成此代码：

```
public DateTime? SomeDate { get; set; } 
```

谢谢，

R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:52:25.397

`code`是一个`CodeGenerationTools`，包含在`EF.Utility.CS.ttinclude`

如果你想改变 的行为`Escape`，那么你可以在那里编辑它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:03:09.177

正如 podiluska 提到的，您需要编辑 EF.Utility.CS.ttinclude （如果您按照[此处的“自定义逆向工程师模板”说明](http://msdn.microsoft.com/en-US/data/jj593170)进行操作，您可以看到这是由 Entity.tt 导入的）

在我的机器上，它在这里：

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft\Entity Framework Tools\Templates\Includes

在第 127 行附近，替换

```
return String.Format(CultureInfo.InvariantCulture, "Nullable<{0}>", typeName); 
```

和

```
return String.Format(CultureInfo.InvariantCulture, "{0}?", typeName); 
```

**确保您对此进行测试。它对我来说很好，但我不能保证它适用于所有可为空的类型。任何评论将不胜感激，我将酌情编辑这篇文章**

# c# - 使用 Josh Smith 的 WPF MVVM 演示应用程序实现 ListView 过滤器

> ID：12188623
> 
> 赞同：6
> 
> 时间：2012-08-30T01:16:51.620
> 
> 标签：c#, wpf, listview, mvvm

我一直在尝试扩展 Josh Smith 的演示 MVVM 应用程序，以便更好地理解其背后的原理，并且在尝试使用 ListView 在 View 上实现过滤器功能时遇到了困难。

我花了几个小时研究和涉足，但它只是不起作用。

我的第一步是将视图中的文本框绑定到 ViewModel 中的属性：

```
<TextBox Height="25" Name="txtFilter" Width="150" Text="{Binding Path=Filter, UpdateSourceTrigger=PropertyChanged}"/> 
```

这在我的虚拟机中匹配：

```
public string Filter
    {
        get { return this.filter; }
        set
        {
            this.filter = value;
            OnFilterChanged();
        }
    } 
```

我的虚拟机使用 ObservableCollection 作为数据源，但我在阅读教程后尝试将其转换为 ICollectionView：

```
internal ObservableCollection<StaffViewModel> InnerStaff { get; set; }
    internal CollectionViewSource CvsStaff { get; set; }
    public ICollectionView AllStaff
    {
        get { return CvsStaff.View; }
    } 
```

在我的构造函数中，我指定了：

```
CvsStaff = new CollectionViewSource();
CvsStaff.Source = this.InnerStaff;
CvsStaff.Filter += ApplyFilter; 
```

当我的过滤器属性更新时，它会调用 OnFilterChanged，即：

```
private void OnFilterChanged()
    {
        CvsStaff.View.Refresh();
    } 
```

我的 ApplyFilter 功能是：

```
void ApplyFilter(object sender, FilterEventArgs e)
    {
        StaffViewModel svm = (StaffViewModel)e.Item;

        if (this.Filter.Length == 0)
        {
            e.Accepted = true;
        }
        else
        {
            e.Accepted = svm.LastName.Contains(Filter);
        }
    } 
```

我是否犯了一个愚蠢的错误，任何人都可以帮助我发现？我对 WPF 和 MVVM 模式还很陌生，所以我还在学习！

**编辑**

在视图中，我将集合绑定到：

```
<CollectionViewSource
  x:Key="StaffGroup"
  Source="{Binding Path=AllStaff}"
  /> 
```

ListView 是这样的：

```
<ListView
      Name="staffList"
      AlternationCount="2" 
      DataContext="{StaticResource StaffGroup}" 
      ItemContainerStyle="{StaticResource StaffItemStyle}"
      ItemsSource="{Binding}"
        Grid.Row="1"> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T17:46:36.203

绑定不正确。您需要进行一些更改。首先要确保 DataContext 设置正确。通常，您将在 ListView 的父级上执行此操作，而不是直接在 ListView 控件上设置它。这可能是 UserControl / Window / 等。

所以假设你有一个视图模型：

```
public class MainViewModel
{
    public MainViewModel()
    {
        //Create some fake data 
        InnerStaff = new ObservableCollection<StaffViewModel>();
        InnerStaff.Add(new StaffViewModel {FirstName = "Sue", LastName = "Bucknell"});
        InnerStaff.Add(new StaffViewModel {FirstName = "James", LastName = "Bucknell"});
        InnerStaff.Add(new StaffViewModel {FirstName = "John", LastName = "Harrod"});

        CvsStaff = new CollectionViewSource();
        CvsStaff.Source = this.InnerStaff;
        CvsStaff.Filter += ApplyFilter;
    }

    private string filter;

    public string Filter
    {
        get { return this.filter; }
        set
        {
            this.filter = value;
            OnFilterChanged();
        }
    }

    private void OnFilterChanged()
    {
        CvsStaff.View.Refresh();
    }

    internal ObservableCollection<StaffViewModel> InnerStaff { get; set; }
    internal CollectionViewSource CvsStaff { get; set; }
    public ICollectionView AllStaff
    {
        get { return CvsStaff.View; }
    }

    void ApplyFilter(object sender, FilterEventArgs e)
    {
        StaffViewModel svm = (StaffViewModel)e.Item;

        if (string.IsNullOrWhiteSpace(this.Filter) || this.Filter.Length == 0)
        {
            e.Accepted = true;
        }
        else
        {
            e.Accepted = svm.LastName.Contains(Filter);
        }
    }
} 
```

并且假设您有一个 Window MainWindow.cs（后面的代码），您可以（对于此示例）在此处连接 DataContext。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new MainViewModel();
    }
} 
```

然后，您有几个选择来进行绑定，您可以在 XAML 或代码中指定您的 CollectionViewSource，但您已经完成了这两种操作。即 xaml 之一，键 x:key="StaffGroup" 和 VM 一个 CvsStaff。假设我们完全摆脱了 xaml 并使用正确设置的 VM 。然后您将使用 ItemsSource 属性进行绑定，如下所示：

```
<ListView Name="staffList" 
      AlternationCount="2" 
      ItemsSource="{Binding AllStaff}" 
      Grid.Row="1" /> 
```

还有一件小事，我更改了过滤器以检查空值和空格。您可能还需要将其更改为不区分大小写。

我在这里没有提到但至关重要的另一件事是在您的 StaffViewModel 上实现 INotifyPropertyChanged - 我假设您有，如果没有的话，这里有一些代码。您通常也会在大多数视图模型上执行此操作，以通知视图属性更改。

```
internal class StaffViewModel : INotifyPropertyChanged
{
    private string _firstName;
    public string FirstName
    {
        get { return _firstName; }
        set
        {
            _firstName = value;
            OnPropertyChanged("FirstName");
        }
    }

    private string _lastName;
    public string LastName
    {
        get { return _lastName; }
        set
        {
            _lastName = value;
            OnPropertyChanged("LastName");
        }
    }
    public override string ToString()
    {
        return string.Format("{0} {1}", FirstName, LastName);
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# c# - 如何测试 IEnumerable

> ID：12188634
> 
> 赞同：6
> 
> 时间：2012-08-30T01:17:55.953
> 
> 标签：c#, .net, linq, unit-testing, collections

在测试中我需要测试一个对象：

```
IEnumerable<int> Ids. 
```

该集合包含数字 1,2 和 3。

我基本上想测试Ids中有三个id并且1,2和3都存在。

问题是 IEnumerable 没有计数。

我以为我可以去：

```
Assert.AreEqual(3, Ids.Count); 
```

任何人都知道如何做到这一点以及如何确保 1,2 和 3 是其中的实际数字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T01:26:46.820

```
Assert.IsTrue(Ids.SequenceEqual(Enumerable.Range(1, 3)); 
```

通过确保每个元素与`Enumerable.Range(1, 3)`.

编辑：将`Range`from here 与 Kirill Polishchuk 的回答结合起来，建议：

```
CollectionAssert.AreEqual(Enumerable.Range(1, 3), Ids); 
```

如果您`Ids`没有给出排序，最简单的正确性测试是在测试中应用该排序，让我们重新能够应用上述内容：

```
CollectionAssert.AreEqual(Enumerable.Range(1, 3), Ids.OrderBy(x => x)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-30T01:22:49.537

您可以使用 LINQ 扩展方法来满足这些需求：

```
using System.Linq;

…

Assert.AreEqual(3, Ids.Count());

Assert.IsTrue(Ids.Contains(1));
//etc. 
```

如果您想以完全相同的顺序拥有完全相同的项目，还有：

```
Assert.IsTrue(Ids.SequenceEqual(new List<int>{ 1, 2, 3 })); 
```

*根据 的语义不能保证排序`IEnumerable<T>`，但这在您的特定场景中可能不会产生影响。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-30T01:41:04.250

看一下[`CollectionAssert`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.collectionassert%28v=vs.100%29.aspx)类，它在单元测试中验证与集合相关的真/假命题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-30T09:57:49.243

[FluentAssertions](http://www.fluentassertions.com/)非常棒，提供了一组有助于测试的扩展方法：

这是他们文档的摘录

```
IEnumerable collection = new[] { 1, 2, 5, 8 };

collection.Should().NotBeEmpty()
     .And.HaveCount(4)
     .And.ContainInOrder(new[] { 2, 5 })
     .And.ContainItemsAssignableTo<int>();

collection.Should().Equal(new list<int> { 1, 2, 5, 8 });
collection.Should().Equal(1, 2, 5, 8);
collection.Should().BeEquivalent(8, 2, 1, 5);
collection.Should().NotBeEquivalent(8, 2, 3, 5);

collection.Should().HaveCount(c => c > 3).And.OnlyHaveUniqueItems();
collection.Should().HaveSameCount(new[] {6, 2, 0, 5});

collection.Should().BeSubsetOf(new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, });
collection.Should().Contain(8).And.HaveElementAt(2, 5).And.NotBeSubsetOf(new[] {11, 56});
collection.Should().Contain(x => x > 3); 
collection.Should().Contain(collection, 5, 6); // It should contain the original items, plus 5 and 6.
collection.Should().OnlyContain(x => x < 10);
collection.Should().OnlyContainItemsOfType<int>();
collection.Should().NotContain(82);
collection.Should().NotContainNulls();
collection.Should().NotContain(x => x > 10);

collection = new int[0];
collection.Should().BeEmpty(); 
```

# jsf - 复合组件内的输入字段的验证器永远不会被触发

> ID：12188638
> 
> 赞同：8
> 
> 时间：2012-08-30T01:18:13.930
> 
> 标签：jsf, facelets, validation, composite-component

我创建了一些 Facelets 来简化我们的页面开发。特别是，我为输入组件创建了一系列 Facelets。我有 1 个 Facelet，`<xxx:input />`它在输入字段周围显示一个标签。除此之外，我还有 Facelets `<xxx:inputText />`，`<xxx:inputSecret />`它可以渲染实际的输入字段。这些中的每一个都`<xxx:input />`用于显示标签。Facelet 看起来像这样：

```
<html ...>
   <composite:interface>
      ...
   </composite:interface>
   <composite:implementation>
       <label><h:outputText value="#{cc.attrs.labelText}" /></label>

       <composite:insertChildren />
   </composite:implementation>
</html> 
```

Facelet将`<xxx:inputText />`看起来像这样......

```
<html ...>
   <composite:interface>
      ...
   </composite:interface>
   <composite:implementation>
      <xxx:input labelText=...>
         <h:inputText id="myinput" ... />
      </xxx:input>
   </composite:implementation>
</html> 
```

一切都很好，但我在尝试添加`<f:validator />`或其他验证标签时遇到了麻烦。根据我的阅读，我必须在我的 Facelet 中添加一个标签。所以，我`<composite:editableValueHolder name="myinput" targets="myinput" />`在界面部分添加了一行。但是，我仍然没有看到我的验证器被解雇。我的 .xhtml 文件中有类似的内容...

```
 ...
    <xxx:inputText value="...">
      <f:validateLength minimum="10" for="myinput" />
    </xxx:inputText>
    ... 
```

无论我输入什么输入，验证器似乎都不会触发，我也从未收到错误消息。一位同事建议这是由于我使用的目标 ID 以及它被`<xxx:input />`Facelet 包装的事实。

我是否需要在我的目标定义中加入父组件 ID？还有什么我想念的吗？如果我排除`<xxx:input />`Facelet，它就可以正常工作，所以我假设它与此相关，但不知道如何解决它。非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T03:33:50.393

您需要指定验证器的属性`for`以匹配`name`.`<composite:editableValueHolder>`

```
<xxx:inputText value="...">
  <f:validateLength for="myinput" minimum="10" />
</xxx:inputText> 
```

您还需要确保在**两个**组合中都`<composite:editableValueHolder>`指定了 ，因此也需要在组合中指定。这是一个完整的示例，在 Mojarra 2.1.12 上对我来说效果很好：**`input.xhtml`**

 **`/resources/components/input.xhtml`：

```
<ui:component
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
>
    <cc:interface>
        <cc:attribute name="label" required="true" />
        <cc:editableValueHolder name="input" targets="input" />
    </cc:interface>
    <cc:implementation>
       <h:outputLabel for="input" value="#{cc.attrs.label}" />
       <cc:insertChildren />
    </cc:implementation>
</ui:component> 
```

`/resources/components/inputText.xhtml`：

```
<ui:component
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:my="http://java.sun.com/jsf/composite/components"
>
    <cc:interface>
        <cc:attribute name="label" required="true" />
        <cc:attribute name="value" required="true" />
        <cc:editableValueHolder name="input" targets="input:text" />
    </cc:interface>
    <cc:implementation>
        <my:input id="input" label="#{cc.attrs.label}">
            <h:inputText id="text" value="#{cc.attrs.value}" />
        </my:input>
    </cc:implementation>
</ui:component> 
```

在某些方面的用法`test.xhtml`：

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:my="http://java.sun.com/jsf/composite/components"
>
    <h:head>
        <title>SO question 12188638</title>
    </h:head>
    <h:body>
        <h:form>
            <my:inputText label="foo" value="#{bean.input}">
                <f:validateLength minimum="10" for="input" />
            </my:inputText>
            <h:commandButton value="submit" action="#{bean.submit}">
                <f:ajax execute="@form" render="@form"/>
            </h:commandButton>
            <h:messages/>
        </h:form>
    </h:body>
</html> 
```

### 也可以看看：

*   [如何为复合组件内的输入组件指定验证器？](https://stackoverflow.com/questions/8780703/how-to-specify-a-validator-for-an-input-component-inside-a-composite-component/8789982#8789982)

* * *

**与具体问题无关**，您知道[`<h:outputLabel>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputLabel.html)吗？

```
<h:outputLabel value="#{cc.attrs.labelText}" /> 
```

事实上，您可以在模板文本中内联 EL 而无需明确需要`<h:outputText>`?

```
<label>#{cc.attrs.labelText}</label> 
```

您是否注意到您的标签也缺少应该引用标签`for`应该引用的输入元素的 ID 的属性？

```
<h:outputLabel for="someId" ... />
<h:inputText id="someId" ... /> 
```**

# php - PHP 作曲家 (errno 2)

> ID：12188639
> 
> 赞同：0
> 
> 时间：2012-08-30T01:18:22.147
> 
> 标签：php, symfony1, composer-php, ezpublish

我想使用 composer.phar 创建新的 ez publish 5 项目，但它失败了

这是结果：

```
 $ ./composer.phar create-project  ezsystems/ezpublish5-standard 
    Installing ezsystems/ezpublish5-standard (dev-master 83d2466bbce3848ffc5b2c15e8bb5926fcf339b4)
      - Installing ezsystems/ezpublish5-standard (dev-master master)
        Cloning master

    Created project in /var/www/ezpublish5/ezpublish5-standard

     [ErrorException]                              
      chdir(): No such file or directory (errno 2) 
```

你知道如何解决它吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T14:36:22.950

我有同样的问题。您必须将目录权限设置为 777。我已经为完整的 eZ Publish 5 安装编写了一些 Hello-World-Tutorial，以应对可能即将出现的问题。 [http://www.ymc.ch/en/hands-on-ez-publish-5-installation-hello-world](http://www.ymc.ch/en/hands-on-ez-publish-5-installation-hello-world)

# java - Android：翻译动画无法正常工作

> ID：12188640
> 
> 赞同：0
> 
> 时间：2012-08-30T01:18:35.593
> 
> 标签：java, android, animation, android-animation

我是 android 动画的新手，并尝试使用 Property Animations。我正在尝试使用平移 x 属性来制作滑动效果。但我没有得到我想要的结果。

我的布局是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/parent"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/first"
            android:layout_width="320dp"
            android:layout_height="200dp"
            android:background="#00ff00" >
        </LinearLayout>

        <LinearLayout
            android:id="@+id/second"
            android:layout_width="320dp"
            android:layout_height="200dp"
            android:background="#0000ff" >
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

根据布局。我在水平放置的父线性布局中有两个线性布局。并且只显示第一个布局，第二个布局不在屏幕上。我正在尝试为父 x 属性设置动画，以便使用翻译我将滑动父级，第一个将隐藏，第二个将显示。以下是我的代码：

```
 LinearLayout parent_;
    LinearLayout first_;
    LinearLayout second_;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    parent_ = (LinearLayout) findViewById(R.id.parent);
    first_ = (LinearLayout) parent_.findViewById(R.id.first);
    second_ = (LinearLayout) parent_.findViewById(R.id.second);
} 
```

并且只是为了模拟我正在使用选项菜单的动画。

```
static boolean a = true;
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    if(a){
        ObjectAnimator animate = ObjectAnimator.ofFloat(parent_, "x", -parent_.getWidth());
        animate.setDuration(500);
        animate.start();
        animate.addListener(this);
        animate.addUpdateListener(this);
        a = false;
    } else {
        ObjectAnimator animate = ObjectAnimator.ofFloat(parent_, "x", -parent_.getWidth(), 0);
        animate.setDuration(500);
        animate.start();

        a = true;
    }
    return super.onOptionsItemSelected(item);
} 
```

当我启动应用程序时，我的应用程序如下所示：

![在此处输入图像描述](../Images/1829c33ded37725d10d446d987b92bbe.png)

在动画之后，应用程序看起来像这样：

![在此处输入图像描述](../Images/9affb7589cf86e02f42d052ea78e915b.png)

注意：白色区域实际上是屏幕截图的一部分。背景为白色。

在动画之后而不是显示蓝色布局。它完全向左滑动并隐藏起来。并且不显示蓝色布局。我试图在动画期间拍摄屏幕截图。它看起来像这样：

![在此处输入图像描述](../Images/8c3b680f94c4448928865f00b4d16c12.png)

我做错了什么？？？我希望我已经很好地解释了我的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T16:41:29.980

在线性布局中，如果未显示子项，则不会对其进行布局，也不会成为测量的一部分（看起来像）。我必须使用 RelativeLayout 并将蓝色孩子隐藏在绿色孩子后面，这样它仍然是屏幕的一部分。它奏效了......

# file - 图形文件格式百科全书 2Ed 光盘

> ID：12188641
> 
> 赞同：0
> 
> 时间：2012-08-30T01:19:16.593
> 
> 标签：file, graphics, specifications, formats

我在亚马逊上以全新的形式购买了此图形文件格式百科全书 (ISBN 1-56592-161-5) 的第二版，但它没有附带 CD（非常出乎意料）。

我一直在寻找配套的 CD-ROM，以防我在 Amazon 得不到任何补偿，因为我知道它可以在 Creative Commons（至少是第一版）下合法分发，我只找到了用于互联网档案馆的第一版：

[配套 CD，第一版，1994，在 Archive.org](http://archive.org/search.php?query=Encyclopedia%20of%20Graphics%20File%20Formats%20AND%20collection%3Acdbbsarchive)

[http://www.fileformat.info/mirror/egff/](http://www.fileformat.info/mirror/egff/)

我还找到了几个站点，显然是第二版的内容，但不是专门的 CD-ROM，这是我只关心的。

有谁知道我在哪里（显然是合法的）可以找到第二版的配套 CD-ROM，以及包含的源代码和文件格式规范与第一版有多大不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:59:19.183

我在它的官方FTP地址找到了第二版的原始内容：

**第二版（FTP）：**

[ftp://ftp.ora.com/pub/examples/gff/](ftp://ftp.ora.com/pub/examples/gff/)

* * *

* * *

**第二版（HTTP）：**

[http://examples.oreilly.com/gff/](http://examples.oreilly.com/gff/)

* * *

* * *

* * *

您基本上必须下载该 URL 处的所有文件并将它们保存在本地。然后，您必须将 URL 目录更改为[http://examples.oreilly.com/gff/CDROM/](http://examples.oreilly.com/gff/CDROM/)，并且**必须将**所有这些内容与您已经下载的内容合并。**合并而不更改目录或创建 CDROM 目录。**

然后，对于 Windows，您需要使用该`GFF.exe`文件`w95102b1.zip`并替换安装目录中的文件，否则 Mosaic 查看器将找不到数字版本的任何 HTML 文件，包括在我们下载的所有文件中。

# mysql - 从 pop3 获取（新）邮件并添加到 mysql 数据库

> ID：12188643
> 
> 赞同：1
> 
> 时间：2012-08-30T01:19:21.933
> 
> 标签：mysql, perl, pop3

任何人都知道一个简单的 linux 工具，它只连接 pop3 服务器、获取（新）邮件并将其添加到 mysql 表中？我刚开始用 perl 编写代码，但我认为有人已经这样做了。

最好的问候，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:15:17.540

这是新手的完整示例：[http ://www.techrepublic.com/article/code-an-application-to-read-pop3-mailboxes-with-perl/6060855](http://www.techrepublic.com/article/code-an-application-to-read-pop3-mailboxes-with-perl/6060855)

您可以使用 Net::POP3 或 Mail::POP3Client 来读取 pop3 和 DBI 以连接到 mysql 数据库。

一些教程：

[http://sql-info.de/mysql/examples/Perl-DBI-examples.html](http://sql-info.de/mysql/examples/Perl-DBI-examples.html) http://www.tizag.com/perlT/perlmysqlquery.php

# css - 右侧浮动元素上的奇怪填充或边距

> ID：12188644
> 
> 赞同：0
> 
> 时间：2012-08-30T01:19:30.397
> 
> 标签：css, html, margin, padding

我刚刚开始使我的网站具有响应性，但由于某种原因，设置为向右浮动的语言 div (#lang) 是向右浮动的，但其右侧有一小部分边距。虽然没有填充将其设置为父 div #container，但我无法理解。

网站是[http:](http://www.cuonic.com) //www.cuonic.com，CSS 文件是[http://www.cuonic.com/css/style.css](http://www.cuonic.com/css/style.css)

我也在使用来自 Meyerweb 的 reset.css。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:28:50.523

您只需`width: 100%`要从#content 中删除。您的 padding plus`width: 100%;`导致 div 扩展到容器之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:28:28.127

这实际上是由于#content 上的填充和宽度而发生的。

宽度为 100%，内边距为 20px。

百分比宽度是相对于父项计算的，所以说 100% 意味着吃整个辣酱玉米饼馅。

布局文档时，填充与宽度相加（我知道，令人困惑），结果是布局宽度为 100% + 40px（两边都有填充）。

有几种方法可以解决此问题：

在#content 上使用百分比宽度（比如 90%）和百分比填充（5%），它就会消失。

或者您可以将 #content 上的[box-sizing 属性](http://css-tricks.com/box-sizing/)更改为border-box

# python - 在 Python 中返回参数的第一个数字

> ID：12188648
> 
> 赞同：-1
> 
> 时间：2012-08-30T01:19:54.033
> 
> 标签：python

编辑：谢谢你们的帮助，但我无法将它应用于我的实际问题。我试图大致了解如何解决与分配给我的问题类似的问题，但我无法弄清楚。

因此，我的函数将采用两个参数，这两个参数都是数字。如果第一个参数等于 0，我必须将其设置为第二个参数中出现的第一个数字。

就像如果

> > > 电话号码(0, 23)

我将不得不返回一个 2。

关于如何做到这一点的任何提示？还是你们描述工作的方式？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T01:21:17.743

您可以通过它们的位置/索引访问字符串的各个字符（注意它们是**0-indexed**）：

```
>>> s = "Charger"
>>> s[2]
'a' 
```

如果您有一个数字而不是字符串，则可以将其转换为字符串，然后使用相同的技术：

```
>>> i = 1234
>>> str(i)[2]
'3' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:43:51.173

要回答您的评论（功能、单词和数字），请查看以下代码：

```
def print_third_character(string):
    print str(string)[2]

print_third_character("Charger")
>>> a
print_third_character(1145)
>>> 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T09:14:52.520

我更喜欢这样的东西

```
def return_third_character(string):
    ts = str(string)
    if len(ts) >= 3:
        return ts[2] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T23:17:25.413

回答您编辑的问题。

如果您的函数调用是 num_call(0, 23) 并且您想使用 num_call(2, 3) 调用它，请使用以下代码：

```
def num_call(first_parameter, second_parameter):
    if first_parameter == 0:
        num_call(int(str(second_parameter)[0]), int(str(second_parameter)[1:])) 
```

如果您只想返回第二个参数，如果第一个参数为 0，请使用此代码（请注意，如果 first_argument 不为 0，它将返回第一个参数）：

```
def num_call(first_parameter, second_parameter):
    if first_parameter == 0:
        return int(str(second_parameter)[0])
    else:
        return first_parameter 
```

# c# - 帮助理解 SharePoint 解决方案开发的资源

> ID：12188651
> 
> 赞同：-1
> 
> 时间：2012-08-30T01:20:21.080
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010

我有一些使用 JavaScript、jQuery、HTML 和 CSS 通过 SharePoint Designer 品牌化 SharePoint 网站的经验。现在我开始了一项新工作，其中所有开发都是 Visual Studio，而不是像网站一样修改主页面和 .aspx 页面，我现在必须了解页面、事件接收器、模板、webpart 等背后的代码。这些都不是很难单独掌握，但是盯着包含一百个这样的节点的大型解决方案文件是令人生畏的。

当我去寻找用于修改视图结构的列表的 allitems.aspx 页面时，我决定提出这个问题，这在 SharePoint Designer 中是一项简单的任务，但在 Visual Studio 中我看不到任何列表或视图/表单页面。

任何人都可以解释或向我解释所有这些移动部分和 C# 代码页面是如何成为客户看到的 SharePoint 网站的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:33:29.967

首先，您需要在同一台机器“SP 服务器机器”上安装 VS，
其次您需要添加对程序文件中的 SharePoint SDK dll 的引用。
第三个开始玩`SPWeb`和`SPFile`等类。

如果您有更具体的问题，我可以尝试帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:56:41.817

您需要从开发人员的角度来看待 SharePoint。询问您的团队他们使用什么策略进行部署，因为有多种可能性。

1.  如果他们使用备份/恢复策略，您仍然可以像以前一样应用您以前的经验。

2.  但如果他们使用 WSP、特性和 C#（或/和 PowerShell）代码进行部署，即从头开始创建所有内容，则需要学习 Visual Studio。例如用于列表的 schema.xml 文件、用于自定义 css、xslt、母版页的模块。在这个问题上看书[推荐](https://stackoverflow.com/questions/7866970/learning-sharepoint-can-i-setup-a-dev-enviornment-book-recommendations/7876511#7876511)并特别查看[这本书](https://rads.stackoverflow.com/amzn/click/com/0470584645)，它有一章专门介绍作为 WSP 的品牌部署。

# firefox - Firefox 不会触发错误事件 标记或显示后备文本

> ID：12188658
> 
> 赞同：1
> 
> 时间：2012-08-30T01:21:11.560
> 
> 标签：firefox, cross-browser, html5-audio

我正在使用该`<audio>`标签在多个浏览器中播放音频文件。

```
var audioTag = document.createElement("audio"),
    sourceTag = document.createElement("source"),
    sorryTag = document.createElement("div");
sorryTag.innerHTML = "This filetype not supported";
audioTag.onerror = function() {
    //some error handling code
}
sourceTag.onerror = function() {

    /some error handling code
}
sourceTag.src = "myfile.mp3";
audioTag.appendChild(sourceTag);
audioTag.appendChild(sorryTag);
//add audioTag to DOM 
```

这将导致

```
<audio>
    <source src='myfile.mp3' />
    <div>This filetype not supported</div>
</audio> 
```

Firefox 不能播放 MP3 文件，我可以接受。Mozilla[还承诺](https://developer.mozilla.org/en-US/docs/Using_HTML5_audio_and_video#Error_handling)，如果or标签无法播放媒体，`error`则会发送一个事件。它还将逐个检查嵌套在媒体标签中的标签（或其他标签，最后一个可能是错误消息），直到找到可以使用的标签。这些似乎都不适合我；元素上永远不会触发错误事件，也不会显示错误消息。我究竟做错了什么？`<audio>``<video>``<source>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:34:29.853

我发现的解决方法是：

```
var audioTag = document.createElement("audio"),
    sourceTag = document.createElement("source");

//Add error event listeners for browsers other than FF
audioTag.onerror = function() {
    console.log("file can't be played. error from audio tag");
}
sourceTag.onerror = function() {
    console.log("file can't be played. error from source tag");
}
//The only way to tell that file failed to play on FF
//Timeout is because audioTag.networkState === audioTag.NETWORK_NO_SOURCE
//on IE till it starts downloading the file
setTimeout(function() {
    if(audioTag.networkState === audioTag.NETWORK_NO_SOURCE) {
        console.log("this hack is only for <audio> on FF.");
        console.log("Not for <video> and on no other browsers");
    }
}, 3000);
sourceTag.src = "<file_url>";
audioTag.appendChild(sourceTag); 
```

基本上，创建媒体和源标签，添加错误处理程序，然后将源标签附加到媒体标签，如果错误事件触发，那么您就知道该文件无法播放。

在 FF 上，错误事件不会触发，您必须依赖元素的`networkState`标志，将其与. 设置元素的属性后，您无法立即检查它，因为在 IE 上，直到浏览器实际开始下载文件。出于这个原因，在检查标志值之前设置一个大约 3 秒的超时时间（这不是一门精确的科学），你很有可能会给 IE 足够的时间来确定它是否能够播放文件。`<audio>``NETWORK_NO_SOURCE``src``<source>``networkState === NETWORK_NO_SOURCE`

**更新**

为此编写了一个测试用例：http: [//jogjayr.github.com/FF-Audio-Test-Case/](http://jogjayr.github.com/FF-Audio-Test-Case/)但错误事件在那里触发。猜我错了；或者它在 FF14（我当时正在使用）上被破坏，因为错误事件也在我的应用程序中触发 OK。谢谢@BorisZbarsky

# java - 在java中后台运行线程

> ID：12188659
> 
> 赞同：0
> 
> 时间：2012-08-30T01:21:16.600
> 
> 标签：java, multithreading, user-interface, background, chess

我正在用java编写一个国际象棋程序。到目前为止一切都很好，但我在更新我的 UI 时确实遇到了问题。

这是 ChessBoard 类中的一段代码，它扩展了 JPanel。当用户尝试移动时调用它：

```
if ( isLegalMove( aMove ) ) { // If the move's legal
    makeMove( aMove ); // Make that move
    select = null; // Reset some info
    drag = null;
    toggleTurn(); // Change turns
    generateMoves( 0 ); // Get legal moves for CPU
    repaint(); // Redraw board
    thread.run(); // Run chess algorithm
} 
```

该线程在我的 ChessBoard 实例上调用“运行”。找到移动的算法可能需要几秒钟来决定移动。

我想让我的 UI 更新以反映用户的移动，然后运行算法。这就是我在单独的线程上运行算法的原因。但是我的用户界面在计算机也采取行动之前不会更新。

因此，如果用户单击一个空间将一块棋子发送到那里，屏幕会冻结，然后棋子突然移动了，但计算机也移动了，又轮到玩家了。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:25:37.820

`thread.run()`将在当前线程上执行线程的run方法中的代码。你想要`thread.start()`。

[相关JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#start%28%29)

repaint 方法实际上不会立即重新绘制。它基本上告诉 JPanel 它应该很快重新绘制自己。然后你继续在同一个线程上计算 AI 的移动，这将冻结窗口，因为 Swing 不是多线程的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:33:50.517

首先，线程不能重入（我稍后会解释）。

`thread.run()`不会导致线程在单独的线程中执行，它只是调用`run`线程的方法（在当前`Thread`s 上下文中。

您需要做的是在您的内部设置一个条件循环`Thread`，您可以触发它以执行您需要的逻辑。

```
public class ChessThread extends Thread { // I prefer Runnable, that's me
    protected static final Object NEXT_MOVE_LOCK = Object();

    public ChessThread() {
        setDaemon(true); // This will allow the JVM to exit without the need to terminate the thread...
    }

    public void doNextMove() {
        // Notify the "wait" that we want to continue calculating the next move
        synchronized (NEXT_MOVE_LOCK) {
            NEXT_MOVE_LOCK.notify();
        }
    }       

    public void run() { 
        while (true) {
            // Wait for the "next move" request
            synchronized (NEXT_MOVE_LOCK) {
                try {
                    NEXT_MOVE_LOCK.wait();
                } catch (InterruptedException exp) {
                }
            }
            // Calculate the next move...
        }
    }
} 
```

现在，`Thread`s 是不可重入的，这意味着一旦 run 方法完成，该实例`Thread`就不能重新启动。

因此使用`thread.start()`不止一次将不起作用（不记得它是否引发异常）（因此我更喜欢的原因`Runnable`）

所以。你想要做的是`Thread`在你的程序加载时开始，当你需要时，调用`thread.doNextMove()`它来计算你需要的东西。

现在，还要记住，`Swing`是`Thread`不安全的。也就是说，您永远不应该从`Thread`除[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)（或 EDT）之外的任何地方更新 UI

您可能还想通读[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

哦[，Java中的并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

# javascript - Qtip2 不上课

> ID：12188665
> 
> 赞同：0
> 
> 时间：2012-08-30T01:21:34.773
> 
> 标签：javascript, jquery, coffeescript, qtip2

所以我本来就有这个功能——

```
$(".carImageClass").each( (elem,value)->
  imgSrc = $(value).attr("src")
$(value).qtip({
  content: {
    text: "<img src=" + imgSrc + ">",
  },
  position:{
    corner:{
      target:'bottomMiddle',
      tooltip:'topLeft'
    }
  }
})
) 
```

哪个有效，因为它显示了我拥有的 img。但是，当我制作这样的功能时，qtip 不再出现。

```
$(".result").each( (elem,value)->
  imgResultDiv = $(value).find(".result-img")
  img = $(imgResultDiv).find("img")
  imgSrc = $(img).attr("src")
  console.log(value)
  console.log(imgSrc)
  $(value).qtip({
    content: {
      text: "<img src=" + imgSrc + ">",
    },
    position:{
        corner:{
          target:'bottomMiddle',
          tooltip:'topLeft'
        }

    } 
```

我可以证明 imgSrc 是正确的，并且该值就是我认为的值（类“结果”的一个元素），所以我不确定为什么 qtip 没有出现。

是否存在某种语法问题？这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:28:01.400

你粘贴了整个代码吗？

```
$(".result").each( (elem,value) ->
  imgResultDiv = $(value).find(".result-img")
  img = $(imgResultDiv).find("img")
  imgSrc = $(img).attr("src")
  console.log(value)
  console.log(imgSrc)
  $(value).qtip({
    content: {
      text: "<img src=" + imgSrc + ">",
    },
    position:{
        corner:{
          target:'bottomMiddle',
          tooltip:'topLeft'
        }
    }
  })
) 
```

您的粘贴缺少一些括号和大括号

# javascript - JavaScript HTML Onclick

> ID：12188671
> 
> 赞同：0
> 
> 时间：2012-08-30T01:22:13.743
> 
> 标签：javascript, html, onclick

我的目标是什么：当我点击某个单词（不在段落中）时，我希望出现一个充满信息的气泡。

所以，我已经有了这个气泡，我使用“类”和 CSS 3 制作了它。

我可以使用一些基本的 JavaScript 来实现我的梦想吗？我对JavaScript一无所知。

有没有办法以某种方式将我的“气泡类”放入“onclick”？

提前致谢。

一切都是一个选项，只要它适用于 IE =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:39:33.697

有许多插件可以满足您的要求。这是一个唯一的解决方案。下载[气泡提示](http://code.google.com/p/bubbletip/)

[你可以在这里](http://www.uhleeka.com/blog/2009/11/bubbletip/)看到一个演示和一些说明

你真的不需要点击这个词，只需悬停就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:28:47.910

查看 JQuery 工具。他们的工具提示页面有一些示例：http: [//jquerytools.org/demos/tooltip/dynamic.html](http://jquerytools.org/demos/tooltip/dynamic.html)

免责声明：我与 JQuery Tools 没有任何关联，只是发现它根据用户的需求进行了一些快速搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T04:01:58.190

Twitter 引导框架

[http://twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T01:31:15.630

首先，如果你有几个气泡，你应该给每个气泡一个单独的 id 属性。以下 javascript 将使气泡出现： `document.getElementById("id_of_the_bubble").style.display = "none";`

以下将使气泡重新出现： `document.getElementById("id_of_the_bubble").style.display = "block";`

注意：如果默认情况下气泡与 不同的显示`block`，那么你应该把它作为那个显示而不是`block`。

# css - 适用于 Linux 的 app.less

> ID：12188673
> 
> 赞同：1
> 
> 时间：2012-08-30T01:22:34.260
> 
> 标签：css, compiler-construction, less

有没有类似 app.less for linux 的程序？我想保留我在较少文件中传输的已编译 css 文件的注释。如果没有，是否有可以在 linux 中使用 lessc 命令的命令行？

问题是，每当我在我的 less 文件上运行 lessc 命令时，我都会得到一个缩小版本的 css，它会丢弃我所有的评论。我希望这些评论能帮助我调试以及它没有被缩小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:52:25.410

Lessc 编译器默认不会缩小，但您可以随时查看命令帮助 (lessc -h)。

此外，在 less 中，您可以使用两种类型的注释，即普通的 css 样式注释：

```
/* This is a CSS comment */ 
```

这些将被“打印”在输出的 css 文件上。

另一种注释风格就像许多语言中的单行注释：

```
// This is a LessCSS comment 
```

并且这些不会在输出 css 文件上“打印”。

希望这可以帮助！

# google-app-engine - 免费和收费应用程序之间的区别

> ID：12188677
> 
> 赞同：-1
> 
> 时间：2012-08-30T01:23:06.520
> 
> 标签：google-app-engine

除了配额之外，收费应用程序和免费应用程序之间有什么区别吗？例如 - 计费应用程序在更快的服务器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:28:24.227

除了[配额和其他事项外](http://cloud.google.com/pricing/)，您可以在使用计费帐户时选择[更快的实例。](https://developers.google.com/appengine/docs/adminconsole/performancesettings)但默认情况下，它们在同一个前端类（F1）上运行。

# c# - 继承打印两次但开始于

> ID：12188679
> 
> 赞同：0
> 
> 时间：2012-08-30T01:23:09.873
> 
> 标签：c#

嘿伙计们，我不确定当我从主代码启动控制台时，它会打印两次不确定的项目，因为我根本没有循环方法：

```
 FoodProducts FoodProd1 = new FoodProducts("FP001", "Meat", 15.99, 200, 100, "Australia");
        FoodProducts FoodProd2 = new FoodProducts("FP002", "Bread", 2.99, 150, 50, "Italy");

        FoodProd1.Print();
        FoodProd2.Print();

class FoodProducts : Products
{

    private string origin;

    public FoodProducts(string id, string name, double price, int soldCount, int stockCount, string origin)
        : base(id, name, price, soldCount, stockCount)
    {
        this.origin = origin;
        //Need to find out why this code prints both lines and not in single line and why it starts from Product 2 when it is printed on the console
        PrintOrigin();
    }

    private string Origin
    {
        get { return origin; }
        set { origin = value; }
    }

    public void PrintOrigin()
    {
        base.Print();
        Console.WriteLine("Origin: {0}", this.Origin);

    } 
```

**从评论更新**

`Print()`基类中定义的方法：

```
public void Print() { 
   Console.WriteLine("Product ID: {0}", this.id); 
   Console.WriteLine("Product Name: {0}", this.name);
   Console.WriteLine("Prodcut Price: {0}", this.price); 
   Console.WriteLine("Sold Counter: {0}", this.soldCount); 
   Console.WriteLine("Stock Count: {0}", this.stockCount); 
   Console.WriteLine(); 
   Console.ReadKey(); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T02:17:41.767

真的不清楚你希望你的输出是什么样子。我根据您之前的问题拼凑了一个产品类。它的输出看起来像这样。

![在此处输入图像描述](../Images/d528d31b1afa0481fae4e1f4df167603.png)

如您所见，它会像您提到的那样打印两次信息。不清楚的是您是否希望每次调用时都打印原点，如果是，则调用`PrintOrigin`方法而不是打印方法。否则，如果您只想在构造时打印原点，请从`Print`方法中调用`PrintOrigin`方法。

**第一个示例调用 PrintOrigin 而不是 Print 并从构造函数中删除 PrintOrigin 语句。**

![在此处输入图像描述](../Images/bdfc8a49b24bf7b53a80cd1cbdeaa4be.png)

如果要将方法调用保留为 Print 而不是 PrintOrigin，请声明基本方法 Virtual 并覆盖它。IE

```
class Program
{
    static void Main(string[] args)
    {
        FoodProducts FoodProd1 = new FoodProducts("FP001", "Meat", 15.99, 200, 100, "Australia");
        FoodProducts FoodProd2 = new FoodProducts("FP002", "Bread", 2.99, 150, 50, "Italy");

        FoodProd1.Print();
        FoodProd2.Print();

        Console.ReadLine();
    }
}

public class Products 
{ 
    string id; 
    string name; 
    double price; 
    int soldCount; 
    int stockCount; 

    public Products(string id, string name, double price,  
                      int soldCount, int stockCount) 
    { 
        this.id = id; 
        this.name = name; 
        this.price = price; 
        this.soldCount = soldCount; 
        this.stockCount = stockCount; 
    }

    public virtual void Print()
    {
        Console.WriteLine("Product ID: {0}", this.id);
        Console.WriteLine("Product Name: {0}", this.name);
        Console.WriteLine("Prodcut Price: {0}", this.price);
        Console.WriteLine("Sold Counter: {0}", this.soldCount);
        Console.WriteLine("Stock Count: {0}", this.stockCount);
        Console.WriteLine();
    } 

}

class FoodProducts : Products
{

    private string origin;

    public FoodProducts(string id, string name, double price, int soldCount, int stockCount, string origin)
        : base(id, name, price, soldCount, stockCount)
    {
        this.origin = origin;
    }

    private string Origin
    {
        get { return origin; }
        set { origin = value; }
    }

    public override void Print()
    {
        base.Print();
        Console.WriteLine("Origin: {0}", this.Origin);
    }

} 
```

# ios4 - iOS 5 SDK UITextView 限制/错误？

> ID：12188687
> 
> 赞同：0
> 
> 时间：2012-08-30T01:24:16.680
> 
> 标签：ios4, uitextview, ios5, uitextviewdelegate

我有一个 UITextView，里面有很多文本。当显示包含 UITextView 的子视图时，UITextView 仅在 UITextView 被触摸和滚动后出现。

UITextView 中的文本数量是否有限制？或者这是一个错误？

附件是解释这一事件的剪辑。

[https://dl.dropbox.com/u/8256776/UITextView%20Bug.MOV](https://dl.dropbox.com/u/8256776/UITextView%20Bug.MOV)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:53:21.993

好的，我已经调查过了，这似乎是一个很常见的问题。似乎文本视图并不觉得它必须绘制文本，但调用`setNeedsDisplay`并没有帮助。我不知道是否有“真正的”解决方案，但您可以通过以编程方式滚动来强制它绘制文本：

```
disclaimerView.contentOffset = CGPointMake(0, 1);
disclaimerView.contentOffset = CGPointMake(0, 0); 
```

代码中不相关的事情：在您的`switchView`方法中，您有两个动画，一个用于菜单视图，一个用于您正在滑动到位的视图。这是不必要的，因为您可以将两个`setFrame`调用放在同一个动画中：

```
MenuView = (UIView *)[self.view viewWithTag:100];
appView = (UIView *)[self.view viewWithTag:ViewInt];
[MenuView setFrame:CGRectMake(0, 0, 320, 480)];
[appView setFrame:CGRectMake(321, 0, 320, 480)];
[UIView beginAnimations:@"move buttons" context:nil];
[UIView setAnimationDuration:.5];
[MenuView setFrame:CGRectMake(-320, 0, 320, 480)];
[appView setFrame:CGRectMake(0, 0, 320, 480)];
disclaimerView.contentOffset = CGPointMake(0, 1);
disclaimerView.contentOffset = CGPointMake(0, 0);
[UIView commitAnimations]; 
```

还有一件事（然后我会退后：））您似乎非常喜欢使用标签来检索元素。虽然它确实有效，但它不是很容易理解。您没有那么多元素，所以我只需将它们中的每一个都添加为`IBOutlet`有意义的名称（就像您对`disclaimerView`. 此外，`switchView`对于要移动到位的不同视图有不同的方法。这样，您就可以轻松地执行该视图可能需要的其他内容，例如 force scroll on `disclaimerView`。

# c++ - 如何使用 MAPI 从个人资料中获取电子邮件地址

> ID：12188688
> 
> 赞同：0
> 
> 时间：2012-08-30T01:24:23.717
> 
> 标签：c++, mapi

我正在使用 MapiEx(http://www.codeproject.com/Articles/10881/MAPIEx-Extended-MAPI-Wrapper) 生成邮件。

我需要将登录 MAPI 客户端的姓名和电子邮件设置为电子邮件中的发件人。

CMAPIEx 类具有 GetProfileName 和 GetProfileEmail 方法，但要使用这些方法，我需要使用用户配置文件登录 MAPI。

在 CMAPIEx 的 Login 方法中，我可以传递 ProfileName，但我不知道要传递什么。

我的 MAPI 客户端是 Outlook 2010，我尝试传递我在帐户中设置的电子邮件或名称，但没有任何效果。

我查看了 CMAPIEx 类中的 Login 方法，发现了这个：

```
DWORD dwFlags=MAPI_EXTENDED | MAPI_USE_DEFAULT | MAPI_NEW_SESSION;
if(bInitAsService) dwFlags|=MAPI_EXPLICIT_PROFILE | MAPI_NT_SERVICE;
return (MAPILogonEx(NULL, (LPTSTR)szProfileName, NULL, dwFlags, &m_pSession)==S_OK); 
```

MAPILogonEx 的第三个参数是密码，我在 Outlook 中的帐户有密码，但在 MAPILogonEx 文档（http://msdn.microsoft.com/en-us/library/office/cc815545.aspx）中据说让密码为空值。

正如我在第二段中所说，我只需要登录 MAPI 客户端的姓名和电子邮件，如果有人知道我做错了什么或通过其他方式获取这些信息，请告诉我。

抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T06:24:47.263

如果您不传递配置文件名称，您最终将使用默认配置文件。您可以在控制面板 | 中查看现有配置文件的名称。邮件 | 显示配置文件。要以编程方式枚举现有配置文件，请使用 IProfAdmin::GetProfileTable()

# c# - 是否可以在 C# 中从数据库中设置动态创建的属性名称？

> ID：12188691
> 
> 赞同：1
> 
> 时间：2012-08-30T01:25:20.847
> 
> 标签：c#, c#-4.0, dynamic

正如我在标题中问的那样，

是否可以从数据库或 C# 中的外部值设置动态创建的属性名称？

如果是，那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:32:53.287

通常，处理此问题的最佳方法是将值存储在 a `Dictionary<string, object>`（或什至`Dictionary<string, dynamic>`，或其他一些类作为值）中。这为您提供了一种使用“动态属性名称”（键）和值的方法。

虽然自定义[`DynamicObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)将允许您在运行时基于外部源添加动态成员，但*使用*这些属性会出现问题，因为您不知道如何从代码中引用它们。

编辑：代码示例：

```
Dictionary<string, object> myValues = new Dictionary<string, object>();
myValues.Add("FieldName", "valueFromDatabase");
//to get value back
object val = myValues["FieldName"];
//or if not sure value exists
if (myValues.TryGetValue("FieldName", out val))
{
    //do something with val
} 
```

# css - 禁用固定按钮位置

> ID：12188692
> 
> 赞同：-1
> 
> 时间：2012-08-30T01:25:29.487
> 
> 标签：css

我正在编辑一个带有社交媒体按钮的设计，当您向上和向下滚动页面时，这些按钮会跟随您。我希望停止这种行为，以便它们仅在您处于顶部时可见。我认为这是相关代码（不是 100% 确定）：

```
.rt-social-buttons .rt-social-icon {
   height: 43px;
   width: 43px;
   float: right;
   display: block;
   background-repeat: no-repeat;
   margin-bottom: 2px;
   -webkit-transition: width 0.2s ease-in, background-color 0.2s ease-in;
   -moz-transition: width 0.2s ease-in, background-color 0.2s ease-in;
   -o-transition: width 0.2s ease-in, background-color 0.2s ease-in;
   -ms-transition: width 0.2s ease-in, background-color 0.2s ease-in;
   transition: width 0.2s ease-in, background-color 0.2s ease-in;
 }

.rt-social-buttons .rt-social-icon:hover {
   width: 150px;
 } 
```

网站在[这里](http://shoutkey.com/spicy)。

我需要从上面的代码中删除什么来阻止按钮移动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:28:54.353

按钮在滚动时卡在页面上的原因是`position: fixed`div 上的`.rt-social-buttons`。

这是我为使它们在右侧保持静态所做的操作：

1.) div`.rt-social-buttons`得到`position:absolute`而不是`position:fixed`

2.) div`.rt-social-buttons`被拉出到body 中（`.container`div 是相对定位的，所以绝对定位`.rt-social-buttons`div 里面不会让它定位在同一个地方。

# spring - Spring 注入如何为子类工作

> ID：12188696
> 
> 赞同：2
> 
> 时间：2012-08-30T01:25:57.347
> 
> 标签：spring

关于 Spring 注入如何工作的问题？如果我在一个类及其所有子类中注入相同的服务，它会效率低下吗？Spring 的容器如何存储/控制它？

```
public class baseClass {
    @Autowired
    private iService serviceName
}

public class extendedClassA extends baseClass {
    @Autowired
    private iService serviceName
}

public class extendedClassB extends extendedClassA {
    @Autowired
    private iService serviceName
} 
```

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:37:32.853

我没有尝试过，但我相信它会导致问题。

主要问题不是由于 Spring，而是您的示例中的变量阴影。BaseClass'`serviceName`被子类遮蔽，这意味着，如果您没有进行特殊处理，`serviceName`则 BaseClass' 将为空。

您可能需要考虑这样做：

```
// !!!! Mind your naming convention!!!!!!
public class BaseClass {
    @Autowired
    private FooService fooService;

    protected FooService getFooService() {
        return this.fooService;
    }

    public setFooService(FooService fooService) { ... }
}

public class ExtendedClassA extends BaseClass {
    // no need to inject fooService again, whenever it need to use that,
    // simply do getFooService() and use it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T09:44:27.603

Adrian Shum 的响应似乎很好，但您也需要在 applicationContext 文件中使用属性“abstract=true”声明您的 BaseClass bean

```
<bean id="baseClass" class="BaseClass" abstract="true"/> 
```

# datamember - 在序列化期间重命名 DataMember

> ID：12188697
> 
> 赞同：1
> 
> 时间：2012-08-30T01:26:02.670
> 
> 标签：datamember

我正在尝试序列化 DataContract ..... 我想重命名 DataMember。

这是我的数据合同

```
[DataContract(Name = "Sample")]
[Serializable]
public struct Sample
{

        public string CompanyName;

        public string AddressLine;

        [DataMember(Name="AddressLineRename")]
        public string AddressLine2;

        public string City; 

} 
```

它被序列化为：

```
<Sample>
  <CompanyName>aaa</CompanyName> 
  <AddressLine>16 aaaa</AddressLine> 
  <AddressLine2>Unit 66</AddressLine2> 
  <City>Houston</City> 
</Sample> 
```

我需要的是：

```
<Sample>
  <CompanyName>aaa</CompanyName> 
  <AddressLine>16 aaaa</AddressLine> 
  <AddressLineRename>Unit 66</AddressLineRename> 
  <City>Houston</City> 
</Sample> 
```

我希望将“AddressLine2”序列化为“AddressLineRename”。

```
Thanks. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:44:14.413

这解决了重命名DataMember。

```
 [DataMember(Order = 2, Name = "AddressLineRename", IsRequired = true)]
  [XmlElement("AddressLineRename")]
  public string AddressLine2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:59:45.527

您可能需要自己实施`ISerializable`以自定义序列化过程。

我认为您需要添加的代码如下所示：

```
public Sample(SerializationInfo info, StreamingContext context)
{
    CompanyName = info.GetString("CompanyName");
    // ...
    AddressLine2 = info.GetString("AddressLineRename");
    // ...
}

public void GetObjectData(SerializationInfo info, StreamingContext context)
{
    info.AddValue("CompanyName", CompanyName);
    // ...
    info.AddValue("AddressLineRename", AddressLine2);
    // ...
} 
```

请参阅[MSDN 了解 ISerializable](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T09:45:39.173

在我的情况下，我解决了只是将 order 参数添加到 DataMember

```
 [DataMember(Order = 2, Name = "AddressLineRename")]
 public string AddressLine2; 
```

不知道为什么。。

# verilog - 如何在 Verilog 中调用函数并为其指定参数？

> ID：12188700
> 
> 赞同：1
> 
> 时间：2012-08-30T01:26:07.133
> 
> 标签：verilog, system-verilog

如何在verilog中调用模块内的函数，该函数具有参数，并为其定义参数？

对于一个简单的例子：

```
function automatic void inv();
  parameter W = 1;
  input logic [W:0] in;
  output logic [W:0] out;

  out = ~in;

endfunction 
```

我将如何调用它并在调用中定义 W ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:23:34.823

`parameter`调用 时不能覆盖值`function`。IEEE Std (1800-2009) 中没有为此指定语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:48:10.737

由于所述参数是恒定的，并且在设计细化后不能更改。维度是数据类型的一部分，因此它们在设计细化过程中也必须保持不变。如果您的所有函数调用都在过程上下文之外，那么您*可以*通过传入一个常量作为参数来摆脱困境。我不建议这样做。

# php - PHP转CSV输出下载

> ID：12188702
> 
> 赞同：4
> 
> 时间：2012-08-30T01:26:16.960
> 
> 标签：php, csv

该片段读取新文件 CSV 中的输出流。那部分有效。我可以从服务器打开文件，它看起来很完美。问题在于通过浏览器下载到我的硬盘驱动器的文件。它无法在 Windows 机器上的电子表格软件或 Excel 中正确打开和读取：

```
$NewFile = fopen($FileName,"w");
fwrite($NewFile, $output);
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.$FileName.'"'); 
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($NewFile));
ob_clean();
flush();
readfile($NewFile); 
```

CSV 的内容看起来就像我从浏览器下载打开它时一样，但当我直接在服务器上打开它或使用 FTP 下载存储的文件时看起来很完美。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:33:42.817

浏览器将`application/octet-stream`视为二进制类型。您需要一个`text/plain`内容类型：

```
header('Content-Type: text/plain');
// Or:
header('Content-Type: text/csv');
// Or: 
header('Content-Type: application/csv'); 
```

`Content-Transfer-Encoding`如果设置正确，标题应该是不必要的，`Content-Type`实际上它可能会误导浏览器认为它也收到了二进制文件：

```
// No need, possibly harmful. Remove it...
// header('Content-Transfer-Encoding: binary'); 
```

### 更新：

我看到另一个问题。您将 设置为`Content-Length`不是文件的大小，而是设置为打开的文件句柄`fopen()`，这会错误地通知浏览器预期的字节数。[`filesize()`](http://us3.php.net/manual/en/function.filesize.php)将字符串文件名作为其参数，而不是文件句柄。您可能需要`fclose($NewFile)`在调用之前关闭句柄`filesize()`。

```
// Instead of:
header('Content-Length: ' . filesize($NewFile));

// You mean to use $FileName
// close the file handle first...
fclose($NewFile);
header('Content-Length: ' . filesize($FileName)); 
```

# android - Android 2.1+ 中的 ExpandableListView

> ID：12188703
> 
> 赞同：0
> 
> 时间：2012-08-30T01:26:33.023
> 
> 标签：android, android-layout, android-listview, expandablelistview

ExpandableListView 在 Android 2.1+ 中可用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:30:28.460

是的，[文档](http://developer.android.com/reference/android/widget/ExpandableListView.html)说自 api 1

# java - 责任链 [GoF] 的缺点

> ID：12188705
> 
> 赞同：4
> 
> 时间：2012-08-30T01:26:48.723
> 
> 标签：java, design-patterns, chain-of-responsibility

我们需要构建一个解决方案来处理销售订单。处理是按顺序进行的：每个步骤都处理特定的任务：检查客户是否有信用，检查所需物品是否有库存等。

我们想到了使用[责任链模式](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)。

我发现[了这篇古老但非常有价值的文章](http://onjava.com/pub/a/onjava/2005/03/02/commonchains.html?page=1)。它首先将 CoR 与模板模式进行比较。由于我们不关心耦合，因此它们似乎都有效。

我应该注意哪些缺点（或陷阱等）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T01:40:19.197

这不是一个很好的选择：责任链模式是关于委派早期步骤无法处理的任务。

在您的情况下，您希望应用*每个*步骤，因此 CoR 并不真正适用。

您真正想要的是某种**业务流程引擎**，例如[jBPM](http://www.jboss.org/jbpm/)。流程引擎旨在准确处理这种情况，并为您提供许多在手动解决方案中难以实现的功能，例如：

*   拥有持久保存到数据库的长期运行进程的能力。尝试调试丢失的订单并不有趣，因为您必须重新启动服务器....
*   能够等待消息队列上的外部事件（例如从远程系统获得确认）。在某些简单的情况下可能不需要它，但如果您与外部供应商集成，它就变得必不可少。
*   处理异常情况和过程回滚/补偿
*   事件记录和报告

基本上，这是我建议不要重新发明轮子的情况之一......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T05:20:01.583

不能更同意 mikera。

1) COR 不适合 - 为什么？除了 mikera 所说的之外，您的问题定义还涉及结构，即您有一系列操作（检查信用、检查库存等），但您选择了责任链，这是一种行为模式。我感觉有些不对劲。

2) 不要发明轮子——尤其是当你在谈论诸如销售处理之类的金融工具时。

也就是说，完全不同的是，您可以使用外观设计模式来呈现一个封装子系统的统一接口。[此处](http://www.dofactory.com/Patterns/PatternFacade.aspx)的示例与您的问题具有相同的业务案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T00:46:00.107

CoR 不适合您的方案，因为此模式的一个前提是一旦请求由其中一个处理程序处理，就会中断链。

根据您的描述，您正在寻找可以用作中间件的东西，或者用 GoF 术语来说，就是装饰器。看看这个模式并将其与 CoR 进行比较，有时两者都会混淆。

# php - 遍历数组并在另一个数组中替换值？

> ID：12188706
> 
> 赞同：1
> 
> 时间：2012-08-30T01:26:50.703
> 
> 标签：php

我正在尝试遍历一个数组并替换不同数组的 in_array 值。

```
$array = array("username"=>"Bill", "email" => "Email Address");
$unset = array("Username","Email Address"); // Array of default values for inputs
foreach($array as $key => $value) {
    global $unset;
    if(in_array($value, $unset)) {
        $value = "-";
    }
}
print_r($array["email"]); 
```

我想将 $array 中与默认值匹配的值替换为“-”。不希望取消设置和array_splice，保留空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:31:32.010

尝试这个：

```
$array = array("username"=>"Bill", "email" => "Email Address");
$unset = array("Username","Email Address"); // Array of default values for inputs

foreach($array as &$value) {
    if(in_array($value, $unset)) {
        $value = "-";
    }
}
print_r($array["email"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:37:11.333

另一种方法是

```
$array = array("username"=>"Bill", "email" => "Email Address");
$unset = array("Username","Email Address"); // Array of default values for inputs
foreach($array as $key => $value) {
    if(in_array($value, $unset)) {
        $array[$key] = "-";
    }
}
print_r($array["email"]); 
```

# .htaccess - htaccess 杀死权限

> ID：12188713
> 
> 赞同：0
> 
> 时间：2012-08-30T01:28:25.710
> 
> 标签：.htaccess, permissions

我正在尝试使用 .htaccess，但似乎每当我将其放入文件夹时，对该文件夹（以及其中的所有内容）的权限都会被删除。我只是在尝试一些超级基本的东西：

```
RewriteEngine on RewriteRule .* http://www.google.com [R] 
```

为什么在引入 .htaccess 文件时会丢失所有权限？它与文件夹中的所有其他内容甚至文件夹本身具有相同的用户和组以及权限（我尝试将其更改为 777 - 没有帮助）...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:26:30.237

在适当的 httpd.conf 中添加选项 +FollowSymLinks 并且它起作用了.. 叹息

# jquery - 显示和隐藏图像（切换图像）

> ID：12188716
> 
> 赞同：2
> 
> 时间：2012-08-30T01:28:32.277
> 
> 标签：jquery, html, css

假设我有三个默认隐藏的图像。如果我单击该图标，则会显示图像。演示在[jsfiddle。](http://jsfiddle.net/zhshqzyc/tMmaa/)

现在的问题是图像显示在底部。我想要的是将它显示在相应文本的位置。同时，文字和小图标将被隐藏。例如，单击文本 1 的缩略图，图像显示在顶部。文本 1 和第一个放大镜缩略图被隐藏。

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:48:19.723

更改一点标记：

```
<div class="slides">
    <div class="slide">
        <p>text 1<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>
        <img class="pic" src="http://www.moosemash.de/images/img81.jpg">        
    </div>
    <div class="slide">    
        <p>text 2<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>        
        <img class="pic" src="http://www.moosemash.de/images/img82.jpg">        
    </div>
    <div class="slide">    
        <p>text 3<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>        
        <img class="pic" src="http://www.moosemash.de/images/img83.jpg">        
    </div>    
</div>​ 
```

和js：

```
$('.pic').hide();

$('.slide').on("click", function(event){

    $('.slide').each(function(){

        if(this == event.currentTarget){

            $('p', this).toggle();
            $('.pic', this).fadeToggle();               

        }else{

            $('p', this).show();
            $('.pic', this).hide();                           

        }

    });

})​ 
```

[这是你的意图](http://jsfiddle.net/bk3jH/)吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T01:58:52.487

下面的方法怎么样？使用更少的 JavaScript。

**html**

```
<div class="content">
    <div class="slide">
        <p>text 1<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>
        <img class="slideImage" src="http://www.moosemash.de/images/img81.jpg">
    </div>
    <div class="slide">
        <p>text 2<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>
        <img class="slideImage" src="http://www.moosemash.de/images/img82.jpg">
    </div>
    <div class="slide">
        <p>text 3<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>
        <img class="slideImage" src="http://www.moosemash.de/images/img83.jpg">
    </div>
</div>
​ 
```

**js**

```
 $('.content p img').on("click", function(){
     $('.slide').removeClass('active');
     $(this).closest('.slide').addClass('active');
 })​; 
```

**css**

```
.slideImage{
    display: none;
    position: "absolute",
    left: "0",
    top: "0",
}

.active .slideImage{
    display: block;
}

.active > *:not(.slideImage) {
    display: none;
}​ 
```

[**演示**](http://jsfiddle.net/tMmaa/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T01:54:32.410

[这是我的解决方案](http://jsfiddle.net/ComboZhc/cwEhh/4/)

html:

```
 <div class="content">
    <p>text 1<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>
    <img class="slideshow" src="http://www.moosemash.de/images/img81.jpg">
    <p>text 2<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>
    <img class="slideshow" src="http://www.moosemash.de/images/img82.jpg">
    <p>text 3<img src="http://www.moosemash.de/images/magnifier.jpg" height="27" width="30"></p>
    <img class="slideshow" src="http://www.moosemash.de/images/img83.jpg">
</div> 
```

Javascript：

```
$('.content .slideshow').hide();
$('.content p img').on("click", function() {
    var index = $(".content p img").index(this);

    $("img.current").removeClass("current").hide();
    $("p.current").removeClass("current").show();

    var p = $(this).parent();
    var i = p.next();
    p.addClass("current").hide();
    i.addClass("current").show();
}); 
```

# ruby-on-rails-3.2 - 在 Rails 3.x 中折旧的 `load_template` 等价物？

> ID：12188723
> 
> 赞同：0
> 
> 时间：2012-08-30T01:29:04.907
> 
> 标签：ruby-on-rails-3.2, thor

我正在尝试提高我的生产力并“存储”我公认的薄弱但对使用 rails [templates](http://guides.rubyonrails.org/generators.html)的 rails 最佳实践的理解。我的问题是，我[`rails-templates/base.rb`](https://github.com/BenU/rails-templates/blob/master/base.rb)的代码已经变成了令人尴尬的 308 行代码。即使是我这个级别的人也知道这是次优的。我渴望将那个怪物分解成易于管理的部分。

[Ryan Bates在](http://railscasts.com/)[“RailsCasts #148, App Templates in Rails 2.3”中](http://railscasts.com/episodes/148-app-templates-in-rails-2-3?view=asciicast)介绍了模板。贝茨创建了一个[身份验证模板](https://github.com/railscasts/148-app-templates-in-rails-2-3/blob/master/auth_template.rb)，该模板`base-template.rb`使用

```
load_template "/Users/rbates/code/base_template.rb" 
```

我很想用`load_template`它来做同样的事情，但它显然已经[贬值](http://apidock.com/rails/Rails/TemplateRunner/load_template)了。我可以用什么代替吗？任何关于塑造我的模板的更一般的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:51:12.483

`load_template`在 rails 模板中使用的当前（rails 3.2）非折旧等价物是[`apply`](http://rdoc.info/github/wycats/thor/Thor/Actions%3aapply).

# svn - SVN 结帐失败

> ID：12188729
> 
> 赞同：0
> 
> 时间：2012-08-30T01:30:00.107
> 
> 标签：svn, svn-checkout

我检查了我的回购。将目录更改为新创建的工作目录后。我执行了

```
svn status 
```

命令，我知道有很多修改过的文件和

```
"Summary of conflicts Tree conflicts: 1". 
```

如何修复我的回购以避免此类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:48:36.613

树冲突是：

当开发人员移动/重命名/删除文件或文件夹时会发生树冲突，而另一个开发人员也已移动/重命名/删除或只是修改了该文件或文件夹。

试试这个网站：[http ://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-conflicts.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-conflicts.html)

# javascript - 为什么警报没有价值？

> ID：12188746
> 
> 赞同：1
> 
> 时间：2012-08-30T01:33:03.740
> 
> 标签：javascript

```
<title>New Web Project</title>
        <script type="text/javascript">
            var paras = document.getElementsByTagName("p");
            for (var i=0; i< paras.length; i++) {
            var title_text = paras[i].getAttribute("title");
            if (title_text != null) {
                alert(title_text);
                }
            }

        </script>
    </head>
    <body>
        <h1>New Web Project Page</h1>
        <p title="test"> This is just a test</p>
    </body> 
```

为什么警报没有价值？我觉得它应该弹出文本`test`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T01:34:47.810

因为在`script`评估时*，*`p`还**没有**加载。

 *如果在, when已经渲染*后*`script`添加正确的，它将按预期显示： *`p``p``alert`*

 *```
<p title="test"> This is just a test</p>
<script type="text/javascript">
  var paras = document.getElementsByTagName("p");
  for (var i=0; i< paras.length; i++) {
    var title_text = paras[i].getAttribute("title");
    if (title_text != null) {
      alert(title_text);
    }
}
</script> 
```

见**[演示](http://jsfiddle.net/b6hJF/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T01:34:57.937

因为您在呈现 html 元素之前初始化脚本。

将脚本移至底部或等待 DOM。像这样：

```
<html>
<head>
<title>New Web Project</title>
    <script type="text/javascript">
        window.onload = function(){
            var paras = document.getElementsByTagName("p");
            for (var i=0; i< paras.length; i++) {
            var title_text = paras[i].getAttribute("title");
            if (title_text != null) {
                alert(title_text);
                }
            }
        }
    </script>
</head>
<body>
    <h1>New Web Project Page</h1>
    <p title="test"> This is just a test</p>
</body>
</html> 
```**

# machine-learning - 关于使用独立数据集通过 weka 验证文本分类的问题

> ID：12188752
> 
> 赞同：0
> 
> 时间：2012-08-30T01:33:46.593
> 
> 标签：machine-learning, classification, weka, document-classification

我正在尝试使用 weka 对垃圾邮件和非垃圾邮件进行分类。

将 100 条带标签的垃圾邮件消息和另外 100 条带标签的非垃圾邮件消息作为训练数据集，我将`stringtowordvector`其用作过滤器来训练分类器。结果`crossValidateModel`非常好。但是我想使用独立的测试集来评估分类器，以确保将任何其他味精从训练集中分类出来是可靠的。

我的问题：

我也必须使用`stringtowordvector`测试数据集来创建一个独立的 .arff 文件，该文件独立于训练 arff 文件。两个数据集中出现的同一个词分别具有 2 个不同的属性索引，在这些2 个.arff 文件。例如，单词“money”`10`在训练 .arff 文件中具有矩阵索引，但在测试 .arff 文件中它被索引为`50th`属性。

我担心已经训练好的分类器会与 2 个数据集中的所有这些词不匹配，因为它们具有不同的矩阵索引。更具体地说，`{1 1,2 1,3 5}`训练中的向量 .arff 代表`"i want to to to to to...."`，但在测试 .arff 文件中，这个相同的向量代表`"money does not not not not ....."`。那么，这个验证怎么能可靠呢？

使用`crossValidateModel`时，它使用来自同一个 arff 文件的实例，因此 weka 必须将索引与单词正确匹配。我的目标是用大量标记的数据集训练它，然后用它来分类任何单个未标记的味精。每次我想对单个味精进行分类时，我都必须将此味精转换为一个 .arff 文件，该文件具有与训练 .arff 文件完全不同的属性列表和矩阵索引。（我没有使用 windows 工具，我在我的程序中使用了 weka .jar api）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-20T21:26:16.300

您需要从您的训练集中创建一个特征映射文件以实现您想要的。特征映射文件通常采用以下格式：

```
someword:1
someotherword:2
yetanotherword:3
... 
```

这有效地将每个单词映射到某个索引。所以你要做的是遍历你的训练集中的所有文件，并将你的训练集中存在的每个单词映射到一个唯一的 id，这将代表你的 ARFF 中的单词索引。

因此，假设您的训练集包含一个带有单词的文件，`"i want to to to to to make money"`那么您的特征图将如下所示：

```
i:1
want:2
to:3
make:4
money:5 
```

您在 ARFF 中的属性如下所示：

```
@ATTRIBUTE i NUMERIC
@ATTRIBUTE want NUMERIC
@ATTRIBUTE to NUMERIC
@ATTRIBUTE make NUMERIC
@ATTRIBUTE money NUMERIC 
```

其中每个属性表示单词在电子邮件中出现的次数。

然后，如果您想为测试集制作 ARFF，您将遍历测试集中的所有文件，并且对于遇到的每个单词，请在特征图中查找。如果这个词在你的特征图中，你就知道在那个词映射到的索引处增加属性的值。如果这个词不在你的特征图中，那么你就忽略它，因为你的分类器没有接受过这个词的训练，甚至不知道这个词的存在。

这将保持你的训练集的属性和你完美对齐的任何测试集。

我建议您将特征映射文件作为`HashMap<String, Integer>`从单词 ( `String`) 到属性索引 ( `Integer`) 的 Java 映射读取，以便在获取测试集电子邮件的属性值时快速查找单词。

# php - preg_match_all 不返回所有子模式

> ID：12188754
> 
> 赞同：2
> 
> 时间：2012-08-30T01:33:53.930
> 
> 标签：php, regex, bbcode

```
$pattern = '#\[img (([^="\]]+)="([^"]+)" ?)+\]#';
preg_match_all($pattern,$blog,$matches,PREG_PATTERN_ORDER); 
```

```
[img size="preview" click="http://text.com" align="right" src="pic:3378f.jpg"] 
```

顶部的代码与上面的 BBCode 标签匹配，但只返回最后一个属性，当它应该根据我的正则表达式中的子模式返回所有属性时。这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:08:00.743

为此，您必须先匹配`[img]`块：

```
preg_match_all('#\[img(.*?)\]#s', $blog, $matches); 
```

您记住标签内的模式并使用另一个循环来提取参数，使用另一个`preg`：

```
foreach ($matches[1] as $img) {
    preg_match_all('#\s*([^=]+)="([^"]*)"#', $img, $matches);
    // create key-pair array
    $params = array_combine($matches[1], $matches[2]);
    print_r($params);
} 
```

输出：

```
Array
(
    [size] => preview
    [click] => http://text.com
    [align] => right
    [src] => pic:3378f.jpg
) 
```

# javascript - 将值从jsp中的javascript传递到struts2中的动作类

> ID：12188755
> 
> 赞同：0
> 
> 时间：2012-08-30T01:34:10.033
> 
> 标签：javascript, jsp, struts2

[如何将值从 javascript 传递到 struts2 中的 java 类？](https://stackoverflow.com/questions/9110221/how-can-i-pass-value-from-javascript-to-a-java-class-in-struts2) 这是类似于我想要的链接。但是它对我不起作用。我试过这样的事情。在jsp中隐藏的Struts标签是

```
 function redirect(id)
    {
    window.alert("Hello"+id);
    document.getElementById('param_ID').value=id;
    document.forms["./ListAlgorithmAction"].submit();
    } 
```

在我的动作类中，我为 param_ID 声明了 getter 和 setter。但它返回 null。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T09:52:36.937

如果你想调用一个动作并返回数据，你应该使用 struts2-json 插件 JQuery 脚本来调用动作

```
 var abc = $("#abc").val();
            $.getJSON('youraction.action', {
                variable -name action class : abc,
                            value to be passed:value,

        //and so on
            }, function(data) {

        //your processing code
                }
            });
            return false;
        }); 
```

如果您只想调用操作，您可能需要使用 $.ajax 代替 $.getJson

如果你想使用 struts 2-json 那么你还需要改变你的 struts.xml 即

```
<result name="success" type="json"></result> 
```

值得一试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T06:08:53.553

你应该这样使用

```
<s:hidden id = "param_ID" name="xyz" /> 
```

现在，您的 struts 操作中应该有一个用于 xyz 属性的 getter 和 setter。

您应该始终将标记中的 name 属性映射到 Struts 操作中的属性。

希望这有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:41:49.307

如果页面未提交您的`hidden`字段，则隐藏字段可能不在您的表单元素内。您可以尝试将其作为参数传递给您的 url。尝试这个

```
function redirect(id)
{
     var form = document.forms[0];
     var url = './ListAlgorithmAction?param_ID=' + id;
     form.action = url;
     form.submit();
} 
```

让我知道这个是否奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-19T18:28:41.440

我有一个类似的问题，并通过附加 JavaScript 函数中的 Action 类并附加 URL 参数来解决它，如下所示：

```
<a href="(<%actionClassName%>.action?<%URLParms%>" /> 
```

# c++ - 反向字符串错误？

> ID：12188756
> 
> 赞同：1
> 
> 时间：2012-08-30T01:34:22.337
> 
> 标签：c++, string, substring

我正在创建这个 revese 字符串 App，但如果我在字符串中包含空格，我会收到错误消息！

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    int inputa;
    cout<<"%%%%%%%%%%%%%%%%%%String Reversing App%%%%%%%%%%%%%%%%%%%%%%%%"<<endl<<endl;

    cout<<"\nEnter 1 to continue and 0 to exit"<<endl<<endl;
    cin>>inputa;
    if(inputa!=0)
    {

        do
        {

            string a,c="";

            cout<<"\nEnter the string you want to Reverse : ";
            cin>>a;
            for(int x=a.length()-1; x>=0; x--)
            {
                c=c+a.substr(x,1);
            }

            cout<<"\nThe Reverse String is : "<<c<<endl;

            cout<<"\nEnter 1 to continue and 0 to exit"<<endl<<endl;
            cin>>inputa;

        }
        while(inputa!=0);
    }
//not my  home work
} 
```

如果我键入以下字符串，例如“abc def”，则会出现错误。但除此之外它完美无缺！代码有没有错误！我是 CPP 的新手，所以如果你能帮助我会很有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T01:38:05.230

operator>> 将在第一个空格处停止阅读（正如大卫指出的那样） - 改用 getline

```
std::string a;
getline(std::cin, a); 
```

完整编辑您的代码

```
#include <iostream>
#include <string>
#include <limits>

int main()
{
    std::cout << "%%%%%%%%%%%%%%%%%%String Reversing App%%%%%%%%%%%%%%%%%%%%%%%%\n\n";

    std::cout << "\nEnter 1 to continue and 0 to exit" << std::endl;
    int inputa;
    std::cin >> inputa;
    if(std::cin && inputa!=0)
    {
        std::cin.ignore(std::numeric_limits<int>::max( ), '\n');
        do
        {
            std::string a,c;

            std::cout<<"\nEnter the string you want to Reverse : ";
            getline(std::cin, a);
            for(int x=a.length()-1; x>=0; --x)
            {
                c+=a[x];
            }

            std::cout<<"\nThe Reverse String is : " << c << std::endl;

            std::cout << "\nEnter 1 to continue and 0 to exit" << std::endl << std::endl;
            std::cin >> inputa;
            std::cin.ignore(std::numeric_limits<int>::max( ), '\n');
        }
        while(std::cin && inputa!=0);
    }
} 
```

包括大卫的逐字回答，因为他回答得更详细（大卫罗德里格斯 - dribeas） - 请在他删除之前+1他。他的回答增加了我没有提到的更多信息，因此我们应戴维斯的要求将其合并为一个回复，

Adrian 的回答是正确的，解决了眼前的问题并提供了解决方案。至于为什么会进入死循环，原因是读完第一个词后，你试图读一个整数`std::cin >> inputa`，会失败，因为`cde`不能解析为整数。此时流进入失败状态，后续读取将失败而无需执行任何操作（直到您清除错误状态）。

你该怎么办？

如果要处理整行，则应使用`std::getline`，而不是`operator>>`. 小心混合两者，因为 operator>> 不会消耗读取后的空格（包括新行），并且您可能只是读取带有 next 的空行`std::getline`。您可以始终阅读`std::getline`并解析该行，或使用`ignore`清除换行符。最后，无论何时执行 IO 操作，都不要期望操作成功：检查流的状态。如果你不这样做并且你的循环依赖于 IO 来完成，那么很容易进入这种无限循环，其中流被标记为失败，以后读取不会成功并且你永远不会跳出循环。

# c++ - 为什么语言 C 和/或 C++ 没有任何标准网关接口作为 Python 的 WSGI？

> ID：12188758
> 
> 赞同：0
> 
> 时间：2012-08-30T01:34:30.540
> 
> 标签：c++, python, c, web-applications, wsgi

或者有吗？我很乐意知道是否有。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:57:02.207

Windows/IIS 上的 ISAPI。许多供应商都支持 NSAPI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:46:22.527

最接近 C/C++ 网关标准的是[FastCGI](http://www.fastcgi.com/)。否则，特定 Web 服务器的模块是常态。

# vb.net - 是否可以在 VB.Net XML Axis 查询中使用变量标签名称

> ID：12188761
> 
> 赞同：0
> 
> 时间：2012-08-30T01:35:03.730
> 
> 标签：vb.net, linq, linq-to-xml, axis, xelement

是否可以在 VB.Net XML Axis 查询中使用变量标签名称？？？

例如联系人....< **varTag** >.Value

其中“varTag”是变量名，真正的标签名只有在运行时才能知道。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:59:54.613

我认为您不能使用 VB.NET XML 轴语法来做到这一点，但您可以使用该[`Element`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx)方法（只需编写`.Element(varTag)`而不是`.<varTag>`）

# oracle11g - Oracle 11g express - 选择插入列的位置？

> ID：12188762
> 
> 赞同：0
> 
> 时间：2012-08-30T01:35:12.447
> 
> 标签：oracle11g

假设我的表 Tb 中已经有 3 列 A、B、C。我想在 B 和 C 之间添加一个新列 M。我该怎么做？

添加 M 后，我的表格应该看起来像 - ABMC 而不是 ABCM ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T01:44:42.667

简单的答案是你不能。列总是在最后添加。但是，您不应该关心表中列的顺序，因为您应该始终在查询和 DML 中明确列出列。并且您应该始终有一个界面层（例如视图），如果顺序很重要，您可以在适当的位置添加新列。

如果你真的下定了决心，可以新建一个列序的新表，将数据移到新表中，删除旧表，重命名新表。您需要在表上重新创建任何索引、约束或触发器。就像是

```
ALTER TABLE tb
  ADD( M NUMBER );

CREATE TABLE tb_new
AS
SELECT a, b, m, c
  FROM tb;

DROP TABLE tb;

ALTER TABLE tb_new 
  RENAME TO tb; 
```

我不确定它是否是 Express Edition 中的一个选项（我倾向于怀疑它是，但我没有方便验证的 XE 数据库），但您也可以使用Barbara 在该示例中显示的[`DBMS_REDEFINITION`包。](https://forums.oracle.com/forums/thread.jspa?messageID=5395482)在幕后，Oracle 与上面所做的基本相同，但添加了一些物化视图日志，以允许应用程序在操作期间继续访问表。

但是，如果您发现自己关心表格中列的顺序，那么最好停下来找出自己做错了什么，而不是继续在任一路径上前进。您应该非常非常罕见地关心表中列的物理顺序。

# java - java中的安全html

> ID：12188763
> 
> 赞同：2
> 
> 时间：2012-08-30T01:35:20.500
> 
> 标签：java, html, escaping, xss, playframework-2.0

我有一些包含`HTML`类似`<br> <b> <i>`等的输入。我需要一种方法来只逃避`HTML`将我的网站暴露给 XSS 等的“坏”。

经过几个小时的谷歌搜索，我发现[GWT](https://developers.google.com/web-toolkit/doc/latest/DevGuideSecuritySafeHtml)看起来很有希望。

什么是逃避坏的推荐方法`HTML`？

编辑：

让我把事情弄清楚。

我正在使用输出 html 的 javascript 文本编辑器。如果我使用 bbcode 之类的东西会不会容易得多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:53:40.563

OWASP AntiSamy 正是为此而开发的一个项目。如果您需要用户能够提交结构化文本，请查看 markdown（恕我直言，比 BBCode 好很多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:49:20.293

您可能只想转义所有 html。如果您想让用户能够使用基本的 html 标签，`<b>`或者`<i>`然后您可以将它们替换为 [b] 和 [i]（如果您的论坛/您正在创建的任何内容都可以使用 bbcode），那么只需替换all`"<"`和和。`">"``"&lt;"``"&gt;"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T03:07:25.997

[Google caja](http://code.google.com/p/google-caja/) 是一种工具，可让第三方 HTML、CSS 和 JavaScript***安全***地嵌入您的网站。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T13:02:32.740

Playframework 2 已经提供了一个解决方案。

该`@Html()`函数过滤坏的 html，这非常好。

我真的很喜欢play2

# jquery - jQuery | 单击添加锚点并添加/删除类

> ID：12188765
> 
> 赞同：1
> 
> 时间：2012-08-30T01:35:37.030
> 
> 标签：jquery

这是我的jQuery：

```
// Show all instances
    var link = $('<a class="show-instances" href="#">Show all instances</a>');

    $('tr.main').hide().first().find('.product').parent().remove('a').append(link);
    $('tr.main').first().show();

    $(function () {
        $(".show-instances").click(function (e) {
            e.preventDefault();
            $(".show-instances").addClass('selected').not(this).removeClass('selected');
            var selectedClass = $(this).closest('tr.main').attr('class').split(' ');
            $('.' + selectedClass[1]).not(':has("a.show-instances")').toggle();
            return false;
        })
    }); 
```

添加锚点作品并单击添加类作品 - 我只是不明白为什么当用户第二次单击锚点时单击添加“选定”的类不会删除？

因此，当用户单击锚点“show-instances”时，“selected”类将添加到锚点中 - 我需要在再次单击该类时将其删除。

我错过了另一个功能吗？

有什么建议么？

/ ***** ** *** *****已解决****** ** *** ** ***** /

使用 Toggle 类 - 这是 jquery：

```
// Show all instances
    var link = $('<a class="show-instances" href="#">Show all instances</a>');

    $('tr.main').hide().first().find('.product').parent().remove('a').append(link);
    $('tr.main').first().show();

    $(function () {
        $(".show-instances").click(function (e) {
            e.preventDefault();
            $(this).toggleClass("selected");
            var selectedClass = $(this).closest('tr.main').attr('class').split(' ');
            $('.' + selectedClass[1]).not(':has("a.show-instances")').toggle();
            return false;
        })
    }); 
```

这里还有一个[Jsfiddle](http://jsfiddle.net/MV4uM/)链接可以查看

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:41:52.423

根据您所描述的内容，[toggleClass](http://api.jquery.com/toggleClass/)函数可能对您更有效。

从 API 文档：

> .toggleClass( function(index, class, switch) [, switch] ) function(index, class, switch)返回要在匹配集中每个元素的类属性中切换的类名的函数。接收集合中元素的索引位置、旧类值和开关作为参数。switch 一个布尔值，用于确定是应该添加还是删除该类。

[尽管这看起来很简单，但如果您在jsfiddle](http://jsfiddle.net/)上发布这些类型的问题也会有所帮助，这样人们就可以看到您想要实现的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:40:27.230

您是否尝试过`toggleClass()`而不是**删除**和**添加**类？

# vba - VBA 消息框中的可选文本

> ID：12188769
> 
> 赞同：26
> 
> 时间：2012-08-30T01:35:48.607
> 
> 标签：vba, user-interface, excel

当我在 VBA 中创建一个 msgbox 时，用户根本无法与文本交互。就我而言，我希望用户能够突出显示和复制文本。我在想更好的方法可能是添加一个将文本复制到剪贴板的按钮。有什么建议么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-30T04:39:42.180

对于此代码：

```
msgbox "Does Control+C work on a lowly, old message box?" 
```

你可以按`ctrl`+ `c`，打开记事本，`ctrl`+`v`你会得到这个：

```
---------------------------
Microsoft Excel
---------------------------
Does Control+C work on a lowly, old message box?
---------------------------
OK   
--------------------------- 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-09-15T08:33:48.487

您可以使用输入框代替消息框

```
inputbox "Copy the below text", "Copy Text", "Text value" 
```

输入框复制文本

[![在此处输入图像描述](../Images/0538ed709b1b93f300265e3ead844cb0.png)](https://i.stack.imgur.com/VStOw.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-30T06:41:36.400

如果您想要“可选择”的文本，请不要使用 MsgBox。[使用自定义表单](https://docs.microsoft.com/en-us/office/vba/excel/concepts/controls-dialogboxes-forms/create-a-custom-dialog-box)而不是标签使用文本框。然而...

在设计模式下更改文本框的这些属性。

1.  SpecialEffect - fmiSpecialEffectFlat
2.  BackStyle - 透明
3.  锁定 - 真

然后使用此代码

```
Option Explicit

Private Sub UserForm_Initialize()
    Me.Caption = "Message Box"
    TextBox1.Text = "Hello World!"
End Sub 
```

![在此处输入图像描述](../Images/ca41dfb0a90153e6b6c0fef92b35195e.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-30T04:53:45.987

如果用户通常会复制整个消息，则可以使用 VBA 设置剪贴板文本。

或者使用输入框而不是 msgbox，因为用户可以从填充的值中复制。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-30T06:40:02.893

您可以使用用户窗体制作自己的自定义消息框。这是一个基本的概念证明：一个带有一个文本框的用户表单（您可以从中选择和复制文本）。

![在此处输入图像描述](../Images/b527cd999018d33972ef9366a6c81625.png)

```
Sub MyMsg(msg As String)
    With MsgUserForm ' this is the name I gave to the userform
        .TextBox1.Text = msg
        .Show
    End With
End Sub 
```

用法：

```
MyMsg "General failure reading hard drive." 
```

# php - 我可以一次将mysql函数转换为PDO吗？

> ID：12188771
> 
> 赞同：1
> 
> 时间：2012-08-30T01:35:57.577
> 
> 标签：php, mysql, pdo

我有一堆 mysql 查询，我需要转换为 PDO。我可以一次执行一个查询，而所有其他功能都可以继续工作吗？例如，如果我将 1 个查询转换为 PDO，这会阻碍我所有其他 mysql 查询的正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:37:41.367

我不明白为什么会这样，除非您使用某种特殊的数据库处理程序类或其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:37:50.700

只要您打开了 2 个数据库连接，一个用于`mysql_*`函数，一个用于 PDO，这应该可以正常工作。

唯一的潜在缺点是两个数据库连接而不是一个的临时额外开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T02:20:24.843

您可能要考虑的一件事是不使用“连接”脚本，而是使用更多的 OOP/数据模型设置。

基本上，您将连接详细信息保存在一个单独的文件中 - 我的只是定义了一些常量，稍后我可以在包含它的脚本中访问这些常量。从那里，您创建一个类，该类负责在实例化时建立它自己的连接。此类将包含与您的典型查询相对应的方法，可能还有一个根据需要运行原始查询的方法。

这样做的好处是您基本上可以不理会现有代码，只需在需要的位置添加新的数据模型代码，即可更新或替换现有脚本。

作为参考，这里是我曾经使用的代码的精简版本：

**数据库.php**

```
<?php
    #   Set the database access information as constants.
    DEFINE ('DB_USER', 'your_db_user_name');
    DEFINE ('DB_PASSWORD', 'your-super-duper-secret-password');
    DEFINE ('DB_HOST', 'localhost');
    DEFINE ('DB_NAME', 'schema-name');
    DEFINE ('DB_CONNECTION', 'mysql:host=' . DB_HOST . ';dbname=' . DB_NAME );
?> 
```

博客模型.php

```
<?php 
    #   File:       blog-model.php
    #   Version:    1.0
    #   Updated:    2011.9.4
    #   Meta:       This file contains the database access information. 
    #               This file also establishes a connection to MySQL and selects the database.

    @require_once( ROOT . DS . 'config' . DS . 'db.php' );

    # Utility Class
    class BlogModel {

        protected $pdo;

        #   Constructor
        function __construct() {
            $this->connect();
        }

        function __destruct() {
        }

        #   Connect to the database
        function connect() {
            #   Database connectivity can be a tricky beast, so I'm wrapping the entire block in a try/catch
            try {
                $this->pdo = new PDO( DB_CONNECTION, DB_USER, DB_PASSWORD, array( PDO::ATTR_PERSISTENT => true ) );

                #   Set character set to UTF-8 (adds support for non-ASCII languages). 
                #   Note this can cause issues with BLOB-style fields, especially with INSERTs
                $this->pdo->exec( "SET CHARACTER SET utf8" );
                return true;
            }
            catch(PDOException $e) {
                #   Add code to write out error log and alert administrator
                trigger_error( "<p>Could not select the database</p>\n<p>MySQL Error: " . $e->getMessage() . "</p>" );
                return false;
            }
        }

        #   Run an INSERT query; that is, insert a new row (or rows) into a MySQL table
        function insert( $authorid, $title, $permalink, $category, $body, $tags, $abstract ) {
            try {
                #   Named parameters (prefered)
                $stmt = $this->pdo->prepare( 
                    "INSERT INTO pages 
                     SET title = :title, 
                     permalink = :permalink, 
                     category = :category, 
                     body = :body, 
                     tags = :tags, 
                     abstract = :abstract, 
                     author = :authorid, 
                     timestamp = NOW();" 
                    );

                $stmt->bindParam( ':title', $title );
                $stmt->bindParam( ':permalink', $permalink );
                $stmt->bindParam( ':category', $category );
                $stmt->bindParam( ':body', $body );
                $stmt->bindParam( ':tags', $tags );
                $stmt->bindParam( ':abstract', $abstract );
                $stmt->bindParam( ':authorid', $authorid, PDO::PARAM_INT );

                return $stmt->execute();
            }
            catch( Exception $e ) {
                #   Add code to write out error log and email administrator
                trigger_error( "<p>An error occurred whilst executing your query:\n<br />MySQL Error: " . $e->getMessage() . "</p>" );
                return false;
            }
        }

        #   Run an UPDATE query; that is, update an existing row (or rows) in a MySQL table
        function update( $id, $title, $category, $body, $tags, $abstract ) {
            try {
                #   Update the project matching the supplied id
                #   Named parameters (prefered)
                $stmt = $this->pdo->prepare( 
                    "UPDATE pages 
                     SET title = :title, category = :category, body = :body, tags = :tags, abstract = :abstract, lastupdated = NOW()
                     WHERE permalink = :id 
                     LIMIT 1;" 
                    );

                $stmt->bindParam( ':id', $id );
                $stmt->bindParam( ':title', $title );
                $stmt->bindParam( ':category', $category );
                $stmt->bindParam( ':body', $body );
                $stmt->bindParam( ':tags', $tags );
                $stmt->bindParam( ':abstract', $abstract );

                return $stmt->execute();
            }
            catch( Exception $e ) {
                #   Add code to write out error log and email administrator
                trigger_error( "<p>An error occurred whilst executing your query:\n<br />MySQL Error: " . $e->getMessage() . "</p>" );
                return false;
            }

        }

        #   Run a DELETE query; that is, remove a record (or records) from a MySQL table
        function delete( $id ) {
            try {
                #   Delete the project matching the supplied id
                #   Named parameters (prefered)
                $stmt = $this->pdo->prepare( "DELETE FROM pages WHERE id = :id LIMIT 1;" );

                $stmt->bindParam( ':id', $id, PDO::PARAM_INT );

                return $stmt->execute();
            }
            catch( Exception $e ) {
                #   Add code to write out error log and email administrator
                trigger_error( "<p>An error occurred whilst executing your query:\n<br />MySQL Error: " . $e->getMessage() . "</p>" );
                return false;
            }
        }

        #   Close the connection
        function close() {
            $this->pdo = null;
        }
    }
?> 
```

这可能与您的原始问题并不完全相关，但也许您（或一些随机的 Google-er）可以从中获得一些用途。

# ruby-on-rails - Koala 无法将 put_connections 作为页面执行

> ID：12188779
> 
> 赞同：0
> 
> 时间：2012-08-30T01:36:44.007
> 
> 标签：ruby-on-rails, facebook, koala

我有一个 ruby​​ on rails 应用程序，它使用 Koala 与 facebook 集成。我使用 Put_connections 将 GraphAPI 操作和对象发布到 facebook。使用这样的线条在墙上分享完美

```
 Thread.new {
   @graph.put_connections("me", "MyApp:MyAction", :MyObject=> url_for(@myobject), :image=> image_location)
} 
```

还发布了一条简单的消息，因为页面可以完美地使用

```
@page_graph.put_object('mypage-id', 'feed', :message => 'This is posted as the page 2') 
```

但是，当我尝试将 graphApi 操作作为页面发布时，没有任何反应。使用以下几行：

```
Thread.new {
@page_graph.put_connections('mypage-id', "MyApp:MyAction", :MyObject=> url_for(@myobject), :image=> image_location)
        } 
```

知道可能是什么原因导致此问题，或者我该如何调试？顺便说一句，该应用程序托管在 Heroku 上，Heroku 日志没有显示任何错误

更新：

我也可以用这些行成功发布简单的消息：

```
@page_graph.put_connections('mypage-id', 'feed', :message => 'This is posted as the page 2') 
```

# sql - 如何在 Oracle sql developer 中使用从另一个数据库导出的 sql 脚本导入整个数据库

> ID：12188787
> 
> 赞同：0
> 
> 时间：2012-08-30T01:37:50.990
> 
> 标签：sql, oracle, import, export

我只是想将一个数据库从服务器迁移到我的本地机器。太麻烦了，现在很糟糕......我得到了一个带有sql developer导出工具的sql脚本，用于服务器中的整个数据库，然后我尝试运行它在我新的空本地数据库中，在编辑器中运行 sql 文件，但什么也没发生，没有错误，没有结果..任何人都可以给我一些想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:47:18.697

@Leon Stack Leak 您能否详细说明您的问题，包括您为迁移尝试的语法。也很高兴知道您正在使用什么数据库服务器产品（例如 Oracle、MySQL 或其他选项）。让我们也了解环境/平台，即 Linux、Windoes 等

如果您要导出整个模式并假设您使用的是 Oracle，那么 Paradox 所说的最佳方法是使用导出和导入数据泵实用程序。要从您当前存在的模式中导出数据库，语法将是：

```
expdp username/password DIRECTORY=mydirectory DUMPFILE=mydumpfile.dmp SCHEMAS=schema1,schema2 LOGFILE=exportlog1.log 
```

要将其导入回来，语法将是

```
impdp username/password DIRECTORY=mydirectory DUMPFILE=mydumpfile.dmp LOGFILE=importlog1.log 
```

另外值得注意的是，导入的语法可以扩展为包括更强大的选项，如重新映射模式、转换 OID 等。

# c# - 在 Datagridview 上调整 Rowheader 属性

> ID：12188788
> 
> 赞同：2
> 
> 时间：2012-08-30T01:37:57.183
> 
> 标签：c#, .net, winforms, datagridview

在 Winforms DataGridView 中，我如何：

1.  删除行标题上的箭头？我需要显示行标题文本，所以我不能简单地设置`RowHeadersVisible = false`.
2.  以编程方式调整行标题的宽度？我正在通过代码设置行标题，因此我需要调整宽度以在更改时显示行标题文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T12:08:43.467

首先覆盖 DataGridView 的函数

```
private void dataGridView1_RowPostPaint(object sender, DataGridViewRowPostPaintEventArgs e)
{
    e.PaintHeader(DataGridViewPaintParts.All & ~DataGridViewPaintParts.ContentBackground);
} 
```

在按钮上单击将值添加到行标题

```
private void button1_Click(object sender, EventArgs e)
{
    string a = "khan yousafzai";
    dataGridView1.RowHeadersWidth = dataGridView1.RowHeadersWidth +(7* a.Length);
    dataGridView1.Rows[0].HeaderCell.Value = a;
    dataGridView2.Rows.Add();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:53:05.140

1.  您是否仍需要允许排序但不显示箭头？如果没有，只需将每列设置`SortMode`为`NotSortable`. 如果需要排序但不显示箭头，请将列设置`SortMode`为`Programmatic`，并手动对列`Click`或`MouseDown`事件中的数据源进行排序。

2.  将列标题设置为所需的任何文本后，使用表单`Graphics`类获取文本的宽度，然后相应地设置列宽：

    ```
    Graphics g = this.CreateGraphics();
    int w = (int)g.MeasureString(dataGridView1.Columns[0].HeaderText, dataGridView1.Font).Width;
    this.dataGridView1.Columns[0].Width = w; 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T12:33:59.563

首先，如何在C#.Net 2.0及以上版本的DataGridView中添加数字行RowHeadersWidth：

```
// On Form_Load add the numeration to DataGridView Row Header
for (int i = 0; i < dataGridView1.Rows.Count; i++)
{
    dataGridView1.Rows[i].HeaderCell.Value = (i + 1).ToString();
} 
```

现在，您可以根据其大小动态调整行标题的大小，就像在 Microsoft Excel 中一样。

```
// Dinamically adjust row header size to max current width available (like Microsoft Excel does)
private void dataGridView1_RowPrePaint(object sender, DataGridViewRowPrePaintEventArgs e)
{
    int firstDisplayedCellIndex = dataGridView1.FirstDisplayedCell.RowIndex;
    int lastDisplayedCellIndex = firstDisplayedCellIndex + dataGridView1.DisplayedRowCount(true);

    Graphics Graphics = dataGridView1.CreateGraphics();
    int measureFirstDisplayed = (int)(Graphics.MeasureString(firstDisplayedCellIndex.ToString(), dataGridView1.Font).Width);
    int measureLastDisplayed = (int)(Graphics.MeasureString(lastDisplayedCellIndex.ToString(), dataGridView1.Font).Width);

    int rowHeaderWitdh = System.Math.Max(measureFirstDisplayed, measureLastDisplayed);
    dataGridView1.RowHeadersWidth = rowHeaderWitdh + 35;
} 
```

此解决方案仅适用于 .Net Framework 2.0 及更高版本，不适用于 CF。

# objective-c - Xcode/Cocoa：“object.property = value”偶尔失败？谁能解释一下？

> ID：12188789
> 
> 赞同：0
> 
> 时间：2012-08-30T01:37:57.763
> 
> 标签：objective-c, xcode, variable-assignment

我正在编写一个项目，其中一个非常简单的任务偶尔会失败。对这个结果很着迷，也很想知道你们对此有何看法。

我有一个包含大型数据集的项目，我正在创建并显示一个模式窗口以显示有关新类实例的一些详细信息。所以我有一个带有自定义窗口控制器类的窗口，代码如下：

```
MyWindowController.h:

#import <DataModel.h>

@interface MyWindowController : NSWindowController
@property (nonatomic, weak) FooClass *fooInstance;
@end

MyWindowController.m:

@implementation MyWindowController

@synthesize fooInstance = _fooInstance;

-(void) init {
    self = [super init];
    if (self) {
       self.fooInstance = [FooClass new];
    }
    return self;
}

@end 
```

完全千篇一律，对吧？但是当我第一次添加表单并运行了很多次时，任务一次又一次地失败了。self.fooInstance 一直返回为零。我什至确认 FooClass 初始化程序正在运行（直接通过它）并返回一个指向有效 FooClass 实例的非空指针。然而，在赋值行之后，self.fooInstance 仍然为空。

我跑了很多次，一遍又一遍地看同样的结果。然后，我只用这个替换*了*赋值语句：

```
FooClass *foo = [FooClass new];
self.fooInstance = foo; 
```

......任务突然开始工作，从那以后它一直在运行。即使我将代码恢复为 self.fooInstance = [FooClass new]，它也能完美运行。

我简直不敢相信......直到我看到它再次发生，在同一个项目中，同时为不同的班级敲出相同类型的窗口。

我不明白发生了什么。self.fooInstance 访问器完全是@synthesized；没有在后台运行的代码可能与该类有关（它是一个单线程模式窗口）；并且没有任何东西与课程有关。它只是......不起作用。就像窗口类的代码要运行几次才能正常运行一样。

世界上正在发生什么？有没有人冒险猜测可能解释这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T01:56:54.873

我建议阅读[Mike Ash 对弱指针的解释](http://mikeash.com/pyblog/friday-qa-2010-07-16-zeroing-weak-references-in-objective-c.html)。本节是相关位：

> **弱引用**
> 
> 首先，什么是弱引用？简单地说，弱引用是对不参与保持该对象活动的对象的引用（指针，在 Objective-C 领域）。例如，使用内存管理，此设置器创建对新对象的弱引用：
> 
> ```
> - (void)setFoo: (id)newFoo
> {
>     _foo = newFoo;
> } 
> ```
> 
> 因为setter 不使用retain，所以引用不会使新对象保持活动状态。当然，只要它被其他引用保留，它就会一直存在。但是一旦这些消失了，即使 _foo 仍然指向它，对象也会被释放。

好的，这解释了第一部分，但为什么第二部分有效？

好吧，当您编写如下实例变量时：

```
FooClass *foo = //assignment 
```

编译器对自己说：“保留这个东西是一个非常好的主意，（至少直到函数超出 ARC 下的范围），它把它变成这样：

```
__strong FooClass *foo = //assignment 
```

这意味着我分配的任何东西都会被保留，因此，因为至少有一个对象拥有它，所以我可以将它分配给我的弱实例变量。

# php - 什么是空 sql 结果的官方值（来自循环）

> ID：12188792
> 
> 赞同：0
> 
> 时间：2012-08-30T01:38:16.167
> 
> 标签：php

我的意思是，例如，如果我在 SQL 表上搜索某些内容，它返回 0 / 无，那是**null**还是**空**的，还是会导致空的**""**？

我正在回到 php 并尝试像这样循环遍历数据库：

伪代码：

```
while($row = mysqli_fetch_array($var here that has the query to the db and connection)){
      echo $row[//something pulled from table to be read back]
} 
```

但是假设搜索查询没有返回任何结果或`$row`不等于任何结果，因为无论出于何种原因，在数据库中搜索的值都不存在，

那么如何检查行的空性？

如果数据库中不存在搜索到的项目，那么`$rows`值究竟会变成什么？**空/空/或空字符串**或其他什么？

根据**row**的值，我要测试**[isset / !isset]**还是**[empty / !empty]**？或者是***唯一***的方法来测试空`$row`做一个（伪）`$x =mysqli_num_rows(var here) / if ($x == 0 ) //do something`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T01:43:54.557

如果`mysqli_fetch_array`没有返回任何内容，则返回值为`NULL`

该行`while($row = mysqli_fetch_array`应该返回记录集中的**下**一条可用记录，因此如果查询没有给出任何匹配结果，则该行`echo $row['something']`根本不会被执行。

如果您要获取多个字段，例如`field1`，`field2`并且假设`field2`没有值，那么该字段的返回值就是该字段在 MySQL（或您使用的任何数据库）中的默认值。但是需要注意的一点是，它`$row`仍然有两个正确定义为`$row['field1']`和`$row['field2']`

如果你想检查是否`$row['field2']`有任何值，你可以使用`empty($row['field2'])`.

`"", 0, NULL, FALSE, array()`都被考虑在内`empty()`，因此您应该能够使用此函数安全地确定该字段是否具有任何有效值。但是，如果说 0 可能是一个*有效值*（例如，您正在查询 no_of_days 一个人上个月缺席并且其中一些人全勤），您将需要明确检查字段中的值并且不能依赖 empty() .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T01:45:03.150

您可以使用 mysql_num_rows 检查是否有结果。如果该行中存在项目，则该行应该显示一个或多个或 TRUE，具体取决于您搜索的项目，如果执行查询时数据库中不存在任何内容，则 mysql_now_rows 将显示 0/NULL。

你可以这样做

```
$query = mysql_query("YOUR QUERY HERE");
$numrow = mysql_num_rows($query);

if ($numrow == 0)
{
ECHO "No result found.";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T01:41:01.697

当什么都没有时， $row == false 这就是对 while 循环的正确测试！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T01:43:56.057

您可以使用它`mysqli_num_rows`来获取查询找到的结果数。

```
$query = 'SELECT `blah`';
$result = mysqli_query($query);
if(mysqli_num_rows($result) > 0) {
    // do stuff here if any rows are found
} else {
    // do stuff here if NO rows are found
} 
```

# android - Android-相同的GPS位置重复而不更新

> ID：12188794
> 
> 赞同：4
> 
> 时间：2012-08-30T01:38:47.560
> 
> 标签：android, gps, location, locationmanager

在发帖之前，我曾尝试对 GPS 问题进行研究。当我测试我的代码时，它一遍又一遍地重复相同的输出。该方法`gpsStart()`在计时器上调用。清单中添加了精细和粗略的位置权限。该方法`appendLog()`将输出存储在文件中。

```
public void gpsStart() {
        // Acquire a reference to the system Location Manager
        LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {
                // Toast.makeText(getApplicationContext(), "location changed",
                // Toast.LENGTH_SHORT).show();
                // Called when a new location is found by the network location
                // provider.
                appendLog("Lat: " + location.getLatitude() + "\nLng: "
                        + location.getLongitude()+"\n");
                text3.setText("Lat: " + location.getLatitude() + "\nLng: "
                        + location.getLongitude());
            }

        public void onStatusChanged(String provider, int status,
                Bundle extras) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onProviderDisabled(String provider) {
        }
    };

    // Register the listener with the Location Manager to receive location
    // updates
    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 0, 0, locationListener);
    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T04:51:33.910

您不能`gpsStart()`在计时器中调用方法。我要说位置监听器是如何工作的

> 什么是位置监听器？

Location Listener 是在您的当前位置发生变化时通知您的类。要接收位置更新，您必须使用 LocationManager 类注册 LocationListener 类。

> 何时注册位置监听器？

这取决于您的应用程序的要求。例如，如果您希望位置监听器在地图上显示当前位置，那么您应该在活动的`onCreate()`或方法中注册位置监听器，并在或`onResume()`方法中取消注册接收器。如果即使您的应用程序没有运行，您也想接收位置，那么您可以使用服务来接收位置。`onPause()``onStop()`

> 如何注册/取消注册位置监听器？

要注册 LocationListener 你首先需要 LocationManager 类的实例，你可以使用上下文来获取它

`LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);`

之后，您将必须设置位置提供程序。有两种经常使用的提供程序。

1.  全球定位系统供应商
2.  网络提供商

现在要向这个位置提供者注册位置接收器，有一个`requestLocationUpdates`LocationManager 方法。在此方法中，第一个参数是提供者名称，第二个参数是请求位置更新的最短时间。第三个参数是请求位置更改的最小距离。最后一个参数是 locationListener。在这里您可以如何使用该方法

```
locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, minTime, minDistance, locationListener);
locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, minTime, minDistance, locationListener); 
```

要取消注册位置更新，您可以使用以下方法

```
locationManager.removeUpdates(locationListener) 
```

**注意：**正如您在问题中提到的那样，您正在计时器中调用一个方法`gpsStart`，因此每次调用此方法时都会添加位置侦听器。因此，所有侦听器都在触发您的新位置，因此您可能多次获得相同的位置。取而代之的是，您应该在活动开始时调用此方法一次，并在活动结束时取消注册此 locationListener。

希望你得到。:D

享受！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T03:47:11.413

最好为 Gps 创建 2 个 listeners.1 和其他用于网络。

以下是代码示例

```
public class MyLocationListener extends LocationListener  
{
            public void onLocationChanged(Location location) 
           {
                // Toast.makeText(getApplicationContext(), "location changed",
                // Toast.LENGTH_SHORT).show();
                // Called when a new location is found by the network location
                // provider.
                appendLog("Lat: " + location.getLatitude() + "\nLng: "
                        + location.getLongitude()+"\n");
                text3.setText("Lat: " + location.getLatitude() + "\nLng: "
                        + location.getLongitude());
            }

        public void onStatusChanged(String provider, int status,
                Bundle extras) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onProviderDisabled(String provider) {
        }
    }

MyLocationListener gpsListener=new MyLocationListener();
MyLocationListener networkListener=new MyLocationListener();

locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, gpslocationListener);    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, networklocationListener); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T20:36:50.273

非常感谢您的回答。Dharmendra 你是对的，我确实需要关闭 LocationListeners，但是我的问题的答案要简单得多。我需要将最短时间（听众等待得到答案的时间）更改为大于零的值。我需要更改的值在下面以粗体显示（MINTIME）。

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MINTIME, 0, gpslocationListener);        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, MINTIME, 0, networklocationListener); 
```

# regex - 在 ms access 2010 中使用正则表达式替换列

> ID：12188796
> 
> 赞同：3
> 
> 时间：2012-08-30T01:39:03.410
> 
> 标签：regex, ms-access, replace, ms-access-2010

在 ms access 2010 中有一个名为 sample 的表，仅包含一列 body (type: text)：

```
<name>John</name><age>12</age> 
```

我想删除括号内的每个字符串。看到这个：

```
John12 
```

我添加了 Microsoft VBScript 正则表达式 5.5 库并创建了这个模块：

```
Function Replace_Regex(str1, patrn, replStr)
Dim regEx
Set regEx = New RegExp
regEx.Pattern = patrn
regEx.IgnoreCase = True

Replace_Regex = regEx.Replace(str1, replStr)
End Function 
```

然后，我运行这个查询： update sample set body = Replace_Regex(body, "<[^>]+?", "")

但结果是：

```
 ame>John</name><age>12</age> 
```

所以有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T01:53:58.870

将此添加到函数中：

```
regEx.Global = True 
```

然后`"<[^>]*>"`用作图案。

这是我在立即窗口中得到的：

```
body = "<name>John</name><age>12</age>"
? Replace_Regex(body, "<[^>]*>", "")
John12 
```

# git - GitHub：企业后期接收钩子

> ID：12188798
> 
> 赞同：9
> 
> 时间：2012-08-30T01:39:20.287
> 
> 标签：git, github, github-enterprise

有谁知道 GitHub:Enterprise 中是否有一种机制来设置一个通用的 post-receive 钩子，该钩子将适用于所有存储库（包括新存储库一经创建？）

我正在尝试开发一个指向辅助系统的链接，该系统希望收到所有推送到所有存储库的通知，并且需要为每个新存储库手动设置将只是时间问题，否则它会被遗忘。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-27T16:57:30.420

我知道这真的很老了，但 GitHub Enterprise 2.6 刚刚推出了预接收挂钩。可以在此处了解更多信息：[https](https://help.github.com/enterprise/admin/guides/developer-workflow/using-pre-receive-hooks-to-enforce-policy/) ://help.github.com/enterprise/admin/guides/developer-workflow/using-pre-receive-hooks-to-enforce-policy/ 。

这应该回答最初发布的问题，因为这是在实例级别设置的（因此，它仅在 GitHub Enterprise 上）并且适用于所有存储库。

> 我正在尝试开发一个指向辅助系统的链接，该系统希望收到所有推送到所有存储库的通知，并且需要为每个新存储库手动设置将只是时间问题，否则它会被遗忘。

至于这篇文章，您可以研究的另一件事是在 GitHub 上进行日志转发。您可以在此处阅读有关日志转发的信息：[https](https://help.github.com/enterprise/admin/articles/log-forwarding) ://help.github.com/enterprise/admin/articles/log-forwarding 。从 2.6 版开始，您还可以控制多个日志转发目的地

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-30T03:20:31.140

[GithubCLI](https://github.com/peter-murach/github_cli)是一种与 GitHub Enterprise 交互的简单方法，允许您[从命令行添加接收后挂钩](https://github.com/peter-murach/github_cli#arguments)。将此与[列出存储库](https://github.com/peter-murach/github_cli#output-format)链接，您可以拥有一个 cron 作业，以确保所有存储库都有一个特定的 post-receive 钩子。

您还可以[直接使用 REST API](http://developer.github.com/v3/)或使用众多绑定库之一，例如[github_api](https://github.com/peter-murach/github)。对于企业来说，这相当容易。API 端点是 http(s)://your-company/api/v3。

这不是一个理想的解决方案，但 API 很容易使用。希望有帮助！

# c++ - Visual C++ 编译平面二进制文件

> ID：12188800
> 
> 赞同：0
> 
> 时间：2012-08-30T01:39:52.673
> 
> 标签：c++, compilation

是否可以在 VC++ 中编译一个没有结构的完全扁平的二进制文件？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:53:01.747

没有。

VisualC++ 是一个 C++ 编译器；它需要 C++ 源代码并生成目标文件。如果您想要其他东西，请使用其他工具。

# graph - Gremlin 查询：另一种在循环中编写它的方法

> ID：12188805
> 
> 赞同：3
> 
> 时间：2012-08-30T01:41:08.397
> 
> 标签：graph, neo4j, graph-databases, gremlin

```
g.v(1).out('__SYSTEM_HAS_CHILD').filter{it.name == 'Journal'}.out('__SYSTEM_HAS_CHILD').filter{it.name == 'travel'}.out('__SYSTEM_HAS_CHILD').filter{it.name == 'Alaskan-Natives'}.map 
```

也许存储一个包含项目的数组，然后遍历每个执行输出并将其附加到 it.name; 并迭代（计数）以确保我们不会超过数组的长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T19:02:06.453

您可以像这样重新格式化管道：

```
pipe = g.v(1)
pipe = pipe.out('__SYSTEM_HAS_CHILD').filter{it.name == 'Journal'}
pipe = pipe.out('__SYSTEM_HAS_CHILD').filter{it.name == 'travel'}
pipe = pipe.out('__SYSTEM_HAS_CHILD').filter{it.name == 'Alaskan-Natives'}
pipe.map 
```

然后您可以使用 Groovy 构造将其变成一个循环：

```
names = ["Journal", "travel", "Alaskan-Natives"]
pipe = g.v(1)
names.each() { name -> 
  pipe = pipe.out('__SYSTEM_HAS_CHILD').filter{it.name == name} 
}
pipe.map 
```

注意：为什么要将管道作为地图返回？要迭代管道，您可以使用以下任一方法：

```
pipe.iterate()
pipe.toList() 
```

见[https://github.com/tinkerpop/gremlin/wiki/Gremlin-Methods](https://github.com/tinkerpop/gremlin/wiki/Gremlin-Methods)

# php - 从多个子表中选择

> ID：12188808
> 
> 赞同：0
> 
> 时间：2012-08-30T01:41:26.123
> 
> 标签：php, mysql, select, join

我有一张名为 meeting 的表，还有一张名为 meeting_permissions 的表。后者存储用户参加任何给定会议的内容。我还有其他表格：笔记、讨论、结论和主题，用于存储会议记录的特定项目。我想做的是获取特定用户参加的所有会议，以及所有相关的笔记、讨论、结论和主题。这是我想出的：

```
SELECT * FROM meeting WHERE id IN
(SELECT meeting_id FROM meeting_permissions WHERE user_id = $user) 
LEFT JOIN conclusion ON meeting.id = conclusion.meeting_id 
LEFT JOIN discussion ON meeting.id = discussion.meeting_id 
LEFT JOIN note ON meeting.id = note.meeting_id 
LEFT JOIN topic ON meeting.id = topic.meeting_id 
```

这对我不起作用。它在第二个左连接处中断。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:50:09.280

您加入反对您的子选择，而不是您的主会议桌：

```
SELECT 
  meeting.*,
  conclusion.*
  discussion.*,
  note.*,
  topic.*
FROM meeting 
  LEFT JOIN conclusion ON meeting.id = conclusion.meeting_id 
  LEFT JOIN discussion ON meeting.id = discussion.meeting_id 
  LEFT JOIN note ON meeting.id = note.meeting_id 
  LEFT JOIN topic ON meeting.id = topic.meeting_id
WHERE meeting.id IN
  (SELECT mp.meeting_id FROM meeting_permissions mp WHERE mp.user_id = $user) 
```

# php - 保存表单数据是否会影响表单错误检查/验证

> ID：12188809
> 
> 赞同：1
> 
> 时间：2012-08-30T01:41:29.803
> 
> 标签：php, forms, error-handling

如果您的表单中有类似的内容

```
<input type="text" name="name" maxlength="30" value="<?php echo htmlspecialchars($_POST['name']); ?>" /> 
```

为了保持页面刷新的信息，它是否会影响表单验证/错误检查，例如

```
if($_POST['name'] == '') { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:00:52.047

使用`htmlspecialchars`将某些 html 标签转换`&,<,>`为相应的实体代码`&amp,&lt,&gt`。这些值将在文本字段中。如果您`if($_POST['name'] == ""`在操作后调用下一页`POST`，它将评估为 false，因为`POST`调用的字段`name`包含上述数据，很可能还有其他未被转换的正常内容`htmlspecialchars`

# sql - 在触发器中执行更新语句比在触发器之外执行它需要更长的时间

> ID：12188811
> 
> 赞同：2
> 
> 时间：2012-08-30T01:41:48.430
> 
> 标签：sql, tsql, sql-server-2005

我有一个触发器`After Update`

此触发器适用于将更新链接服务器上的 2 个表的服务器

查看代码

```
ALTER TRIGGER [dbo].[tgAfterUpdate] ON  [dbo].[KS_3EToVision]
   AFTER UPDATE
AS 
BEGIN

  BEGIN TRY
  BEGIN TRANSACTION    -- Start the transaction

  DECLARE @MatterNumber varchar(15);
  SELECT @MatterNumber = i.MatterNumber FROM inserted i; 

    IF EXISTS(SELECT * FROM [FSSQLDEV01].[collnab].[dbo].[collection_header] WHERE         Ch_file_number COLLATE DATABASE_DEFAULT = @MatterNumber COLLATE DATABASE_DEFAULT)
       --UPDATE
        IF (SELECT Ch_matter_status FROM [FSSQLDEV01].[collnab].[dbo].[collection_header] WHERE Ch_file_number COLLATE DATABASE_DEFAULT = @MatterNumber COLLATE DATABASE_DEFAULT ) = 'Current'
             BEGIN 
                --Parent table 
                UPDATE [FSSQLDEV01].[collnab].[dbo].[collection_header]
                SET 
                    Ch_start_date = i.OpenDate 
                FROM 
                    Inserted i 
                WHERE ch_file_number COLLATE DATABASE_DEFAULT = @MatterNumber COLLATE DATABASE_DEFAULT  

                ----Child table 
                UPDATE [FSSQLDEV01].[collnab].[dbo].[collections] 
                SET 
                    Defendant_1 = i.Description 
                    , Loan_Number_1 = i.Comments 
                    , Client = i.KS_BookName 
                    , Date_Instructed = i.OpenDate 
                    , Person_Responsible_name = i.ResponsibleFeeEarnerName 
                    , Person_Responsible_Email = i.ResponsibleFeeEarnerEmail 
                    , Person_Acting_name = i.BillingFeeEarnerName 
                    , Person_Acting_email = i.BillingFeeEarnerEmail 
                    , Agent_Acting_name = i.BillingFeeEarnerName 
                    , Agent_Acting_email = i.BillingFeeEarnerEmail 
                    , CBA_Panel_Service_Area = i.KS_ServiceCat 
                    , HBN_Number = i.KS_ClientAcctRef 
                    , St_George_Contact = i.KS_Instructor 
                FROM 
                    Inserted i 
                WHERE Left(Collections.file_number,6) COLLATE DATABASE_DEFAULT = @MatterNumber COLLATE DATABASE_DEFAULT
             END

--If we reach here, success!
   COMMIT
END TRY
BEGIN CATCH
  -- Whoops, there was an error
  IF @@TRANCOUNT > 0
     ROLLBACK

  -- Raise an error with the details of the exception
  DECLARE @ErrMsg nvarchar(4000), @ErrSeverity int
  SELECT @ErrMsg = ERROR_MESSAGE(),
     @ErrSeverity = ERROR_SEVERITY()

  RAISERROR(@ErrMsg, @ErrSeverity, 1)
END CATCH

END 
```

如果我在触发器之外尝试使用相同条件的更新语句，它只需要 1 秒，但在触发器内部可能需要 45 秒。

我已将其缩小到第二个更新语句是问题所在，因为如果我删除第二个更新语句，它将快速执行。

我还附上了显示的图片

我还有一个用于插入的触发器，它可以在一秒钟内快速工作，而一个用于删除的触发器将在触发器中花费很长时间，但如果我在触发器之外删除 2 个删除语句，则功能正常。

```
USE [TE_3E_TRG]
GO
/****** Object:  Trigger [dbo].[tgAfterDelete]    Script Date: 08/30/2012 11:24:33 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER TRIGGER [dbo].[tgAfterDelete] ON  [dbo].[KS_3EToVision]
   AFTER DELETE
AS 

begin

BEGIN TRY
   BEGIN TRANSACTION    -- Start the transaction
            Begin
                --Parent table 
                DELETE FROM [FSSQLDEV01].[collnab].[dbo].[collection_header] WHERE ch_file_number COLLATE DATABASE_DEFAULT = (SELECT d.MatterNumber FROM deleted  d) COLLATE DATABASE_DEFAULT

                --Child table 
                DELETE FROM [FSSQLDEV01].[collnab].[dbo].[collections] WHERE Left(file_number,6) COLLATE DATABASE_DEFAULT = (SELECT d.MatterNumber FROM deleted  d) COLLATE DATABASE_DEFAULT            

            END
   -- If we reach here, success!
   COMMIT
END TRY
BEGIN CATCH
  -- Whoops, there was an error
  IF @@TRANCOUNT > 0
     ROLLBACK

  -- Raise an error with the details of the exception
  DECLARE @ErrMsg nvarchar(4000), @ErrSeverity int
  SELECT @ErrMsg = ERROR_MESSAGE(),
         @ErrSeverity = ERROR_SEVERITY()

  RAISERROR(@ErrMsg, @ErrSeverity, 1)
END CATCH 
```

有谁知道为什么在触发器内部和触发器外部执行语句之间可能会出现这种执行时间的巨大差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:53:39.827

您正在将远程表与本地虚拟插入表连接起来。这可能涉及将整个表从远程服务器复制到本地并在本地过滤。

这是非常罕见的情况，使用游标和逐行更新可能会提高性能。

顺便说一句，marc_s 的观点是正确的，您的代码应该考虑到插入表超过 1 行的可能性。

# php - 在 PHP 中调用静态类成员

> ID：12188813
> 
> 赞同：0
> 
> 时间：2012-08-30T01:41:59.397
> 
> 标签：php, class, static, static-members

我正在尝试从 php 类中获取一个变量，而不必使用“new classname()”

这是我的代码：

```
class myVars {
    static $varx = null;

    public function __construct() {
        $this->varx = "test";
    }
}

echo myVars::$varx; 
```

我还尝试将 $this-> 替换为 self::，但没有打印任何内容。我应该如何对类进行编码以调用 myVars::$varx？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:44:04.367

这应该使您的静态变量可以公开访问。

```
class myVars {
    public static $varx = null;

    public function __construct() {
        self::$varx = "test";
    }
}

echo myVars::$varx; 
```

但是，在您的示例中，从未调用构造函数，因此从未对静态变量进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:46:37.363

您遇到的问题是您没有实例化一个对象，因此构造函数永远不会被调用。

你可以做的是：

```
class myVars {
    static $varx = null;

    public function __construct() {
        $this->varx = "test";
    }
}

myVars::$varx = "test";
echo myVars::$varx; 
```

或者您可以创建一个对象并让构造函数更改静态变量。

# java - 在 NetBeans GUI Builder 中打开 JPanel 表单会导致奇怪的行为

> ID：12188823
> 
> 赞同：0
> 
> 时间：2012-08-30T01:43:54.500
> 
> 标签：java, netbeans, ide

我最近尝试打开一个使用 NetBeans GUI Builder 创建的 JPanel 表单，而 NetBeans 几乎冻结了我。设计形式是全灰色背景，而不是通常的灰色区域，我可以在其中放置被白色背景包围的组件。如果我单击 Source 按钮，然后切换回 Design 视图，编辑器窗格中的所有选项卡都会消失。

幸运的是，我使用 Git 进行版本控制。该文件的最后一次提交是在一周前。我可能必须恢复到早期版本才能看到这个问题是在哪里引入的。同时，有没有人知道什么可能导致这种行为？我的 .form 文件是否可能已损坏？该应用程序编译并运行得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:58:29.167

听起来由于某些内部错误，Netbeans 无法加载表单。有时可以通过清理和构建以清除任何旧的缓存数据来解决此问题。

如果这不起作用，您可以查看“message.log”中的错误......是的，我希望它会在屏幕上显示它

它曾经位于“{user.profile}/.Netbeans/{version}/var/log”（我认为）中。它在 7.2 下的 Windows 上移动到“{user.profile}\AppData\Roaming\NetBeans\7.2\var\log”

# java - ANTLR 正则表达式中的范围量词语法

> ID：12188827
> 
> 赞同：8
> 
> 时间：2012-08-30T01:44:36.010
> 
> 标签：java, regex, antlr

这应该相当简单。我正在使用 ANTLR 研究词法分析器语法，并希望将变量标识符的最大长度限制为 30 个字符。我试图用这一行来完成这个（遵循正常的正则表达式 - 除了 '' 东西 - 语法）：

```
ID  :   ('a'..'z'|'A'..'Z') ('a'..'z'|'A'..'Z'|'0'..'9'|'_'){0,29}  {System.out.println("IDENTIFIER FOUND.");}
    ; 
```

代码生成没有错误，但是由于生成的代码中的一行简单而导致编译失败：

0,29

显然，antlr 将括号之间的文本部分与打印行一起放置在接受状态区域中。我搜索了 ANTLR 站点，但没有找到任何示例或对等价表达式的引用。这个表达式的语法应该是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T03:08:41.450

ANTLR 不支持`{m,n}`量词语法。ANTLR 看到`{}`你的量词，并且无法将它们与`{}`围绕你的行为的那些区分开来。

解决方法：

1.  在语义上强制执行限制。让它收集一个无限大小的 ID，然后将其作为您的操作代码的一部分或稍后在编译器中抱怨/截断。
2.  手动创建量化规则。

这是将 ID 限制为 8 的手动规则示例。

```
SUBID : ('a'..'z'|'A'..'Z'|'0'..'9'|'_')
      ;
ID : ('a'..'z'|'A'..'Z')
     (SUBID (SUBID (SUBID (SUBID (SUBID (SUBID SUBID?)?)?)?)?)?)?
   ; 
```

就个人而言，我会选择语义解决方案（#1）。如今，几乎没有理由限制语言中的标识符，甚至更没有理由在违反此类规则时导致语法错误（编译提前中止）。

# facebook - Facebook Graph API 错误（访问令牌）

> ID：12188829
> 
> 赞同：1
> 
> 时间：2012-08-30T01:44:46.273
> 
> 标签：facebook, facebook-graph-api, facebook-authentication, facebook-access-token

当我尝试使用访问令牌访问 Graph API 时出现以下错误：

```
{
   "error": {
      "message": "Expected 1 '.' in the input between the postcard and the payload",
      "type": "OAuthException",
      "code": 1
   }
} 
```

在成功验证我正在开发的应用程序后，我正在获取访问令牌。我已经接受了权限，并且正在访问应用程序的登录页面。访问令牌看起来不像我在网上看到的其他令牌。它没有'|' 其中的人物。它确实有一个句点和一些下划线以及典型的字母数字组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T12:58:19.053

我解决了这个问题。我正在使用的另一个开发人员使用原始签名请求对象的一部分（未解析）来形成访问令牌。在看了[文档](https://developers.facebook.com/docs/authentication/signed_request/)之后，我很快意识到在获取 oauth_token 值之前，你需要先解析 signed_request 对象。修复之后，我可以轻松地进行 API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T01:42:52.333

检查以确保您在签署请求之前验证 Facebook 返回的“代码”参数，而不是“访问令牌”。使用错误的访问令牌签署请求会为我生成此错误消息。

# ruby - 如何使用捆绑器重新安装 gem

> ID：12188833
> 
> 赞同：73
> 
> 时间：2012-08-30T01:44:59.810
> 
> 标签：ruby, rubygems, bundler

我做了一个`bundle show`并获得了 gem 目录的完整路径。

不幸的是，我使用`rm -r gem_path`. 然后我的 Rails 应用程序不再工作了。如果我尝试启动服务器或启动 rails 控制台，它会输出以下错误：

> `<class:Application>`: 未初始化的常量`MyAPP::Application::Gem`(NameError)

**我应该怎么做才能让它回来？**

我尝试`bundle install`或`bundle update`希望强制捆绑搜索 gem 并将其安装回来，但没有奏效。

我也试过删除`Gemfile.lock`并运行`bundle install`. 没有任何改变，同样的错误。

有问题的 gem 是[**Act as taggable on**](http://rubygems.org/gems/acts-as-taggable-on)。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-11-06T22:03:21.440

如果使用 rbenv，这将让您完全卸载并重新安装 gem，例如 rmagick：

第一：尝试简单的卸载/重新安装

```
gem uninstall rmagick
bundle install 
```

如果这不起作用，您可以删除已安装 gem 的所有痕迹。找到您的 gem 安装位置：

```
bundle show rmagick
BUNDLE_DIR=$(dirname $(dirname $(bundle show rmagick)))
echo $BUNDLE_DIR 
```

你的 gem 安装前缀要么是默认的，要么是`~/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0`你设置的，例如`.vendor`

清除 gem 目录：

```
rm -rf $BUNDLE_DIR/gems/rmagick-* 
```

清除已编译的 gem 缓存：

```
rm $BUNDLE_DIR/cache/rmagick*.gem 
```

还要清除捆绑器的规范缓存：

```
rm $BUNDLE_DIR/specifications/rmagick*gemspec 
```

然后你可以重新安装：

```
bundle install 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-02-19T14:09:02.653

您可以随时使用：

`gem pristine acts-as-taggable-on`

原始 - 从位于 gem 缓存中的文件将已安装的 gem 恢复到原始状态

如果您只想恢复当前项目的 gem，您应该运行：

`bundle exec gem pristine acts-as-taggable-on`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-31T01:50:23.313

首先我做了一个`gem q --L`, 的快捷方式`gem query --local`。它输出我安装的所有本地 gem。

```
actionmailer (3.2.8, 3.2.6, 3.2.1, 3.1.0)
actionpack (3.2.8, 3.2.6, 3.2.1, 3.1.0)
activemodel (3.2.8, 3.2.6, 3.2.1, 3.1.0)
activerecord (3.2.8, 3.2.6, 3.2.1, 3.1.0)
activeresource (3.2.8, 3.2.6, 3.2.1, 3.1.0)
activesupport (3.2.8, 3.2.6, 3.2.1, 3.1.0)
acts-as-taggable-on (2.3.3)
... 
```

然后，按照 DVG 的建议，我使用正确的名称卸载了 gem`gem uninstall acts-as-taggable-on`并运行了`bundle install`. 在那之后，我能够`rails c`或`rails s`再次没有任何问题。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-01-12T03:57:01.587

从终端的项目目录

```
gem uninstall gem_name 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-06-18T03:22:22.597

如果在 中使用带有 gems 的[RVM](https://rvm.io/)`~/.rvm/` ，如果`bundle`不重新安装 gem，这将有效。

首先，删除gem源：

```
bundle show $GEM
rm -rf $PATH_TO_GEM 
```

清除已编译的 gem 缓存：

```
rm -rf ~/.rvm/gems/ruby-$RUBYVERSION[@$GEMSET]/cache/$GEM.gem 
```

还要清除捆绑器的规范缓存：

```
rm -rf ~/.rvm/gems/ruby-$RUBYVERSION[@$GEMSET]/specifications/$GEM*gemspec 
```

然后你可以重新安装：

```
bundle install 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-06-26T12:24:46.347

如果您已安装`./bundle/vendor`或类似，则需要先删除 gem，但明确指定 GEM_HOME，例如

```
GEM_HOME=./vendor/bundle/ruby/2.3.0/ gem uninstall rmagick 
```

到目前为止，这是将使用 bundler 安装的 gem 卸载到供应商目录中的最简单方法。理想情况下，会有一个命令`bundle uninstall`or`bundle reinstall`等​​。

如果您的目标是简单地重新安装，以下命令将有所帮助：

```
GEM_HOME=./vendor/bundle/ruby/2.3.0/ gem uninstall rmagick && sudo -u http bundle install 
```

如果您像我一样并且在一个目录下有多个 Web 应用程序（例如`/srv/http`），那么在所有目录中执行以下操作：

```
cd /srv/http
for d in ./*/ ; do (cd "$d" && sudo -u http GEM_HOME=./vendor/bundle/ruby/2.4.0/ gem uninstall --force rmagick && sudo -u http bundle install); done 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-01-04T11:16:39.017

`bundle exec gem uninstall <gem_name>`- 从包（`<app_root>/vendor/bundle/ruby/2.3.0/gems/`路径）中卸载 gem。这相当于@ioquatix 给出的答案，但他正在寻找更方便的解决方案。

`gem uninstall <gem_name>` - 仅从系统中的全局 gemset 中卸载 gem

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-12-01T16:30:35.017

如果您尝试重新安装 rake，`gem pristine rake`将会失败，`Skipped rake-10.X.X, it is a default gem`并且 bundle 也不会安装它，因为它无法卸载它。

如果您使用的是 rvm，似乎最简单的方法就是简单地做一个`rvm reinstall 2.x.x`. 至少对我来说，`rvm repair all`也没有帮助。

所有其他默认宝石可能也是如此。我将在这里列出它们，以便绝望的谷歌人找到一些帮助：

*   大十进制
*   滴
*   io 控制台
*   json
*   小测试
*   心理
*   耙
*   红树
*   rdoc
*   测试单元

# objective-c - 来自 NSMutableArray 的不同 UIImageView 的不同 UIImage

> ID：12188837
> 
> 赞同：0
> 
> 时间：2012-08-30T01:45:39.703
> 
> 标签：objective-c, arrays, random, uiimageview, uiimage

我有一个包含 4 个不同对象的 NSMutableArray： 还有 4 个 UIImageView：为了从这个数组中获取不同的图像，我编写了一个代码，但它不起作用。请问有什么建议吗？

```
images = [[NSMutableArray alloc] init];
    UIImage *image1 = [UIImage imageNamed:@"ca.png"];
    [images addObject:image1];
    UIImage *image2 = [UIImage imageNamed:@"ta.png"];
    [images addObject:image2];
    UIImage *image3 = [UIImage imageNamed:@"cv.png"];
    [images addObject:image3];
    UIImage *image4 = [UIImage imageNamed:@"tv.png"];
    [images addObject:image4];

    if (images.count>0) {
        int randomValue = arc4random_uniform(images.count); 
        img1.image = [images objectAtIndex:randomValue];
        img1.tag = randomValue;

        int randomValue1 = arc4random_uniform(images.count);

        if(randomValue1 == img1.tag)
            randomValue1 ++;

        if(randomValue1 > [images count] - 1)
            randomValue1 = 0;

        img2.image = [images objectAtIndex:randomValue1];
        img2.tag = randomValue1;

        int randomValue2 = arc4random_uniform(images.count);

        if (randomValue2 == img1.tag) 
            randomValue2 ++;

        if (randomValue2 == img2.tag)
            randomValue2 ++;

        if (randomValue2 > [images count] - 1)
            randomValue2 = 0;

        img3.image = [images objectAtIndex:randomValue2];
        img3.tag = randomValue2;

        int randomValue3 = arc4random_uniform(images.count);

        if (randomValue3 == img1.tag)
            randomValue3 ++;

        if (randomValue3 == img2.tag)
            randomValue3 ++;

        if (randomValue3 == img3.tag)
            randomValue3 ++;

        if (randomValue3 > [images count] - 1)
            randomValue3 = 0;

        img4.image = [images objectAtIndex:randomValue3];
        img4.tag = randomValue3; 
```

有时它会在 2 或 3 个 UIImageView 中给我相同的图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:47:39.593

当您设置第一张图片时

```
 img1.image = [images objectAtIndex:randomValue]; 
```

在这之后你需要

```
 [images removeObjectAtIndex:randomValue]; 
```

但是你只是减少图像数组的数量。

```
 [images count] - 1 
```

这是不对的。

请注意，如果您不想从原始数组中删除对象。您应该制作图像数组的可变副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:05:53.533

首先你随机化你的可变数组。请参阅[此问题](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)以了解如何操作。然后只需简单地分配您的图像：

```
[images shuffle];

img1.image = [images objectAtIndex:0];
img2.image = [images objectAtIndex:1];
img3.image = [images objectAtIndex:2];
img4.image = [images objectAtIndex:3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T04:47:57.723

现在我用另一种方式做到了

```
- (IBAction)ready:(id)sender {

    [ready setHidden:YES];
    [impimage setHidden:NO];
    [img1 setUserInteractionEnabled:YES];
    [img2 setUserInteractionEnabled:YES];
    [img3 setUserInteractionEnabled:YES];
    [img4 setUserInteractionEnabled:YES];

    if (images.count > 0) {
        int randomValue = arc4random_uniform(images.count); 
        impimage.image = [images objectAtIndex:randomValue];

        [img1 setImage:[UIImage imageNamed:@""]];
        [img2 setImage:[UIImage imageNamed:@""]];
        [img3 setImage:[UIImage imageNamed:@""]];
        [img4 setImage:[UIImage imageNamed:@""]];        
    }

}

- (void) onImageClick:(UITapGestureRecognizer*)sender
{   

    UIImageView *m_current = (UIImageView*)sender.view;

    if( [images1 objectAtIndex:m_current.tag] == impimage.image)
    {
        [m_current setImage:[images1 objectAtIndex:m_current.tag]];

        int randomValue = arc4random_uniform(images1.count); 

        if([images1 count])
        {
            if(randomValue == m_current.tag)
                randomValue++;

            if(randomValue > [images1 count] - 1)
                randomValue = 0;

            [impimage setImage:[images1 objectAtIndex:randomValue]];

        }

        NSLog(@"right");
    }

    else NSLog(@"wrong");

    if(img2.image !=nil && img1.image!=nil && img3.image !=nil && img4.image !=nil)
    {
        UIAlertView *alert  = [[UIAlertView alloc] initWithTitle:nil 
                                                         message:@"level completed" 
                                                        delegate:nil cancelButtonTitle:@"OK" 
                                               otherButtonTitles:nil];
        [alert show];

        _level5 = [[Level5 alloc] init];
        [self.view addSubview:_level5.view];
    }

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [impimage setHidden:YES];
    [img1 setUserInteractionEnabled:NO];
    [img2 setUserInteractionEnabled:NO];
    [img3 setUserInteractionEnabled:NO];
    [img4 setUserInteractionEnabled:NO];

    images = [[NSMutableArray alloc] init];
    UIImage *image1 = [UIImage imageNamed:@"ca.png"];
    [images addObject:image1];
    UIImage *image2 = [UIImage imageNamed:@"ta.png"];
    [images addObject:image2];
    UIImage *image3 = [UIImage imageNamed:@"cv.png"];
    [images addObject:image3];
    UIImage *image4 = [UIImage imageNamed:@"tv.png"];
    [images addObject:image4];

    if (images.count>0) {
        int randomValue = arc4random_uniform(images.count); 
        img1.image = [images objectAtIndex:randomValue];
        img1.tag = randomValue;

        int randomValue1 = arc4random_uniform(images.count);

        if(randomValue1 == img1.tag)
            randomValue1 ++;

        if(randomValue1 > [images count] - 3)
            randomValue1 = 0;

        [images removeObjectAtIndex:img1.tag];

        img2.image = [images objectAtIndex:randomValue1];
        img2.tag = randomValue1;

        int randomValue2 = arc4random_uniform(images.count);

        if (randomValue2 == img2.tag) 
            randomValue2 ++;

        if (randomValue2 > [images count] - 2)
            randomValue2 = 0;

        [images removeObjectAtIndex:img2.tag];

        img3.image = [images objectAtIndex:randomValue2];
        img3.tag = randomValue2;

        int randomValue3 = arc4random_uniform(images.count);

        if (randomValue3 == img3.tag)
            randomValue3 ++;

        if (randomValue3 > [images count] - 1)
            randomValue3 = 0;

        img4.image = [images objectAtIndex:randomValue3];
        img4.tag = randomValue3;

        images1 = [[NSMutableArray alloc] init];
        UIImage *image1 = img1.image;
        [images1 addObject:image1];
        UIImage *image2 = img2.image;
        [images1 addObject:image2];
        UIImage *image3 = img3.image;
        [images1 addObject:image3];
        UIImage *image4 = img4.image;
        [images1 addObject:image4];

    }

    UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onImageClick:)];
    UITapGestureRecognizer* tap1 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onImageClick:)];
    UITapGestureRecognizer* tap2 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onImageClick:)];
    UITapGestureRecognizer* tap3 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onImageClick:)];
    [img1 addGestureRecognizer:tap];
    [img2 addGestureRecognizer:tap1];
    [img3 addGestureRecognizer:tap2];
    [img4 addGestureRecognizer:tap3];
} 
```

# php - 从索引本身检索数据？

> ID：12188839
> 
> 赞同：0
> 
> 时间：2012-08-30T01:46:10.067
> 
> 标签：php, mysql, indexing

我在 MySQL 中有以下查询：

```
SELECT sid, date
FROM table
WHERE wid = 12938248 AND url = 'example.com/landingpage' 
```

前提是我有这样的索引：

```
 CREATE INDEX testindex ON table (wid,url,sid,date) 
```

MySQL 是否能够从索引本身检索**sid、日期**，还是需要访问磁盘？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:49:16.243

是的，它只能使用索引来检索数据。

是的，它仍然需要访问磁盘，因为那是索引所在的位置。

# java - Eclipse `sysout` 片段/扩展至 System.out.printf？

> ID：12188845
> 
> 赞同：1
> 
> 时间：2012-08-30T01:46:57.050
> 
> 标签：java, eclipse

我想配置我的 Eclipse 首选项以允许我输入：

```
printf<CTRL+SPACE> (or ALT+/, or anything I use as a "Content Assist" sequence) 
```

得到这个：

```
System.out.printf("<BANANA>%n", <argument1>); 
```

`<BANANA>`具有在和之间跳转的能力`<argument1>`。

最后一部分很重要，TAB 跳转/替换。请注意，选定的文本*不会*包含 %n 常量，它会保留。

我想知道这一点我需要知道如何指定片段，如何使用内置变量并将其转换为`.epf`文件中的条目。

此外，Eclipse 似乎非常*聪明*地从周围的上下文中找出我可能想要在某个地方使用哪个变量。可能来自类型，线路接近度等。在定义片段时，我自己可以控制吗？例子：

```
System.out.printf("<BANANA>%n", <argument1>);
// Make BANANA equal to the second public static final String from the top + " split"
// Make argument1 the closest Float in the current block or any other Double, anywhere 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:44:53.773

我需要在 .epf 文件中“像”这样的东西：

```
/instance/org.eclipse.jdt.ui/org.eclipse.jdt.ui.text.custom_templates=<?xml version\="1.0" encoding\="UTF-8" standalone\="no"?><templates><template autoinsert\="true" context\="java" deleted\="false" description\="System.out.printf" enabled\="true" name\="pf">System.out.printf("${Message}%n", ${argument1\:var}${cursor});</template></templates> 
```

第一个参数后的光标可轻松添加最终的参数2，...

缺少的是一种在集合中指定选择的方法，例如“从 %s、%d、%f、...中选择一个”

# django - 在 django 中尝试/除外，良好做法

> ID：12188846
> 
> 赞同：0
> 
> 时间：2012-08-30T01:47:12.807
> 
> 标签：django, exception-handling, try-catch

这部分代码代表我网页的索引，例如：127.0.0.1:8000/

```
def IndexView(request):
    try:
        profile = request.user.get_profile() 
    except User.DoesNotExist:
        return render_to_response('index.html',
                              {'request': request,},
                              context_instance=RequestContext(request))

    return render_to_response('index.html',
                  {'request': request, 'profile' : profile},
                  context_instance=RequestContext(request)) 
```

为什么我在调试时仍然收到此错误？

/ 'AnonymousUser' 对象的 AttributeError 没有属性 'get_profile'

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T02:17:44.233

您需要添加此检查：

```
from django.shortcuts import render

def index_view(request):

    if request.user.is_authenticated():
        profile = request.user.get_profile()
        return render(request,'index.html',{'profile': profile})
    else:
        return redirect('login/') 
```

或者，您可以使用内置的装饰器来确保您的视图只被登录用户调用：

```
from django.contrib.auth.decorators import login_required
from django.shortcuts import render

@login_required
def index_view(request):

    profile = request.user.get_profile()
    return render(request,'index.html',{'profile': profile}) 
```

如果您使用[`login_required`装饰器](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)，您需要确保有一个[`LOGIN_URL`](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-LOGIN_URL)设置指向处理您网站的登录表单的视图。默认情况下这是`/accounts/login/`

我将方法名称更改为小写，因为 CamelCase 通常用于 Python 中的类。此外，您不需要两个 return 语句，因为您正在呈现相同的模板。相反，在您的`index.html`模板中，您可以执行以下操作：

```
{% if profile %}
    You have a profile!
{% else %}
    You don't
{% endif %} 
```

[文档中的身份验证条目](https://docs.djangoproject.com/en/dev/topics/auth/)中列出了身份验证的提示和技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T01:51:13.757

因为用户当前未登录。当您调用 get_profile 时，它​​会在 Django 提供的名为 AnonymousUser 的默认用户上调用，该用户没有 get_profile 方法，因为它不是真正的用户。我假设它不会引发异常，因此您会收到错误。登录后尝试相同的操作，应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T01:56:26.990

您收到此错误是因为此特定用户未登录。

为防止出现错误，请在视图上方使用`@login_required`装饰器：

```
from django.contrib.auth.decorators import login_required

@login_required
def IndexView(request):
    ... 
```

或者：

```
def IndexView(request):
    if request.user.is_authenticated(): #check to use if user is logged in
        try:
            profile = request.user.get_profile() 
        except User.DoesNotExist:
            return render_to_response('index.html',
                              {'request': request,},
                              context_instance=RequestContext(request))

        return render_to_response('index.html',
                      {'request': request, 'profile' : profile},
                      context_instance=RequestContext(request)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T02:09:16.860

您期待一个`User.DoesNotExist`错误，但代码却抛出了一个`AttributeError`. 这是因为`request.user`它是一个真实的对象——一个`AnonymousUser`对象——并且访问它不会导致错误，但是`AnonymousUser`没有配置文件。

改用`@login_required`装饰器，或捕获`AttributeError`，或调整您的代码，使其实际抛出`User.DoesNotExist`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T02:09:52.600

您需要检查用户是否已通过身份验证，然后再尝试提取配置文件`get_profile`。您还可以大大简化您的代码：

```
def IndexView(request):
    profile = request.user.is_authenticated() and request.user.get_profile() 

    return render_to_response('index.html',
                              {'request': request, 'profile': profile},
                              context_instance=RequestContext(request)) 
```

你不需要 except，因为`User`with 总是在那里。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-30T02:11:54.443

只是让你知道，这不是很干的代码。

核实：

```
def index_view(request):
    context_data = {'request': request}
    try:
        context_data.update('profile': request.user.get_profile())
    except AttributeError:
        pass

    return render_to_response('index.html', context_data,
         context_instance=RequestContext(request)) 
```

另外，我会仔细检查并确保请求未包含在上下文中。您可能不必在此处专门将其置于上下文中。

编辑：忘记将 context_data 传递给 render_to_response，示例已更新。

# javascript - 拦截表单 POST 字符串并改为通过 AJAX 发送

> ID：12188847
> 
> 赞同：12
> 
> 时间：2012-08-30T01:47:21.787
> 
> 标签：javascript, jquery, forms

是否可以截取表单的 POST 字符串并改为通过 AJAX 发送？我可以使用 $('form').submit() 来拦截 POST 事件，但我看不到可以从哪里获取 POST 字符串。我可以从表单的输入中重现字符串，但这似乎很可疑。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-30T01:49:54.117

```
// capture submit
$('form').submit(function() {
     var $theForm = $(this);

     // send xhr request
     $.ajax({
         type: $theForm.attr('method'),
         url: $theForm.attr('action'),
         data: $theForm.serialize(),
         success: function(data) {
             console.log('Yay! Form sent.');
         }
     });

     // prevent submitting again
     return false;
}); 
```

请注意，正如[菲尔](https://stackoverflow.com/questions/12188847/intercept-form-post-string-and-send-via-ajax-instead/12188859#comment16320417_12188859)在他的评论中所说，`.serialize()`不包括提交按钮。如果您还需要提交按钮的值，则必须手动添加它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T01:51:27.427

你当然可以这样做——你阻止你的表单像往常一样提交，你获取它的数据并`POST`通过 jQuery 执行：

```
$(form).submit(function(event){

    // prevents default behaviour, i.e. reloading the page
    event.preventDefault();

    $.post(

        $(this).attr('action'), // the form's action
        $(this).serializeArray(),   // the form data serialized
        function(data)
        {

            // what you are supposed to do with POST response from server

        }

    )

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T01:49:59.967

使用[`.serialize()`](http://api.jquery.com/serialize/)，它会将一组表单元素编码为字符串以进行提交。

```
$('form').serialize() 
```

# windows - Python：如何在 Windows 上将非 ASCII 文件名传递给 Popen？

> ID：12188848
> 
> 赞同：2
> 
> 时间：2012-08-30T01:47:26.807
> 
> 标签：windows, file, process, python-2.7

当我使用 Python 运行子进程时，使用 ASCII 参数一切都很好，但如果参数是 unicode（西里尔文）字符串，则会失败：

```
cmd = [ 'dir.exe', u'по-русски' ]
p = subprocess.Popen([ 'dir.exe', u'по-русски' ]) 
```

错误日志：

```
Traceback (most recent call last):
  File "process.py", line 48, in <module>
    cyrillic()
  File "process.py", line 45, in cyrillic
    p = subprocess.Popen(cmd, shell=True, stdin=None, stdout=None, stderr=subprocess.PIPE)
  File "C:\Python\27\Lib\subprocess.py", line 679, in __init__
    errread, errwrite)
  File "C:\Python\27\Lib\subprocess.py", line 870, in _execute_child
    args = '{} /c "{}"'.format (comspec, args)
UnicodeEncodeError: 'ascii' codec can't encode characters in position 8-10: ordinal not in range(128) 
```

我尝试了不同的可执行文件——7z.ex、ls.exe——popen 在运行它们之前就失败了。

但是如果我将 unicode 字符串编码为特定的编码呢？

```
# it works because 1251 is kinda native encoding for my Windows
cmd = [ 'dir.exe', CYRILLIC_FILE_NAME.encode('windows-1251') ]

# fails because 1257 cannot be converted to 1251 without errors
cmd = [ 'dir.exe', BALTIC_FILE_NAME.encode('windows-1251') ]

# this may work but it's not a solution because...
cmd = [ 'dir.exe', BALTIC_FILE_NAME.encode('windows-1257') ] 
```

“坏”的事情是，我的电脑上有不同的文件名——波罗的海、西里尔文等等。所以看起来没有一般的方法可以在 Windows 上将非 ASCII 文件名传递给 Popen？！还是可以修复？（最好没有肮脏的黑客攻击。）

视窗 7，Python 2.7.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T13:24:53.270

如果您使用 Python 3，它将以 Unicode 格式正确传递参数。假设您的子进程可以在命令行上加载 unicode 参数（Python 2 不能），那么它应该可以工作。

例如，此脚本在 Python 3 下运行时，将显示西里尔字符。

```
import subprocess
subprocess.call(["powershell", "-c", "echo", "'по-русски'"]) 
```

# javascript - 在javascript中读取文件太快？

> ID：12188852
> 
> 赞同：2
> 
> 时间：2012-08-30T01:48:42.087
> 
> 标签：javascript

我有以下代码：

```
oFReader = new FileReader(), rFilter = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;
oFReader.onload = function (oFREvent) {
    $("#preview").append("<img src='" + oFREvent.target.result + "' />");
};

function loadImageFile() {
    if (document.getElementById("uploadImage").files.length === 0) { return; }

    $.each(document.getElementById("uploadImage").files, function (index, value) {
        if (!rFilter.test(value.type)) { alert("You must select a valid image file!"); return; }
        oFReader.readAsDataURL(value);
    });
} 
```

它旨在获取已拖动到文件类型输入的图像集合，然后在 div 中预览这些图像。我的问题是，当我运行它时，只出现最后一张图像。如果我在我的 javascript 中添加一个断点并单步执行代码，则会显示两个图像。

我假设这种情况正在发生，因为`oFReader.onload`很快就被调用了两次。我曾考虑使用 setTimeout 或可能`oFReader`在循环内部声明以避免冲突，但我想知道是否有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T01:52:01.743

您正在阅读的每个文件都需要一个单独的 FileReader 对象。

`.readDataAsURL()`是一种异步方法。在您调用它之后，它会在一段时间后完成。在您的`.each()`循环中，您试图在前一个文件完成之前读取一个新文件，从而在它完成之前停止它。

你可以这样做：

```
function loadImageFile() {
    if (document.getElementById("uploadImage").files.length === 0) { return; }

    $.each(document.getElementById("uploadImage").files, function (index, value) {
        var oFReader = new FileReader(), rFilter = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;

        if (!rFilter.test(value.type)) { alert("You must select a valid image file!"); return; }
        oFReader.onload = function (oFREvent) {
            $("#preview").append("<img src='" + oFREvent.target.result + "' />");
        };
        oFReader.readAsDataURL(value);
    });
} 
```

# c# - 会话已关闭！NHibernate 不应该试图抓取数据

> ID：12188853
> 
> 赞同：1
> 
> 时间：2012-08-30T01:48:45.257
> 
> 标签：c#, asp.net-mvc, linq, nhibernate, eager-loading

我有一个 UnitOfWork/Service 模式，我在将模型发送到视图之前使用 NHibernate 填充模型。出于某种原因，我仍然得到 YSOD，而且我不明白为什么对象集合尚未填充。

我的控制器方法如下所示：

```
public ActionResult PendingRegistrations()
{
    var model = new PendingRegistrationsModel();
    using (var u = GetUnitOfWork())
    {
        model.Registrations = u.UserRegistrations.GetRegistrationsPendingAdminApproval();
    }
    return View(model);
} 
```

服务/工作单元如下所示：

```
public partial class NHUserRegistrationRepository : IUserRegistrationRepository
{
    public IEnumerable<UserRegistration> GetRegistrationsPendingAdminApproval()
    {
        var r =
            from UserRegistration ur in _Session.Query<UserRegistration>()
            where ur.Status == AccountRegistrationStatus.PendingAdminReview
            select ur;
        NHibernateUtil.Initialize(r);
        return r;
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:13:50.503

您遇到的问题与您在使用任何其他 LINQ 提供程序时遇到的问题没有什么不同。您需要执行查询才能获得结果。如果您没有有效的上下文，那将是行不通的。

这个问题很容易解决，无需谴责 LINQ to NHibernate。只是改变

```
public IEnumerable<UserRegistration> GetRegistrationsPendingAdminApproval()
{
    var r =
        from UserRegistration ur in _Session.Query<UserRegistration>()
        where ur.Status == AccountRegistrationStatus.PendingAdminReview
        select ur;
    NHibernateUtil.Initialize(r);
    return r;
} 
```

至

```
public IEnumerable<UserRegistration> GetRegistrationsPendingAdminApproval()
{
    var r =
        from UserRegistration ur in _Session.Query<UserRegistration>()
        where ur.Status == AccountRegistrationStatus.PendingAdminReview
        select ur;
    NHibernateUtil.Initialize(r);
    return r.ToList();
} 
```

# macos - 10.7.3 之前的 Mac App Store 沙盒和处理安全范围的书签

> ID：12188865
> 
> 赞同：6
> 
> 时间：2012-08-30T01:50:14.677
> 
> 标签：macos, cocoa, app-store, sandbox, bookmarks

重新启动应用程序后，我需要我的沙盒应用程序重新打开打开的文件。Apple在 NSURL 书签创建和解析方法中为安全范围的书签提供`NSURLBookmarkCreationWithSecurityScope`和选项。`NSURLBookmarkResolutionWithSecurityScope`但是，这些标志/选项仅适用于 10.7.3 或更高版本，并导致 10.7.3 之前的应用程序失败。

如何在沙盒应用程序中处理 10.6 到 10.7.3 的文件书签的保留/重新打开？

--

跟进：请在下面查看我的答案。该问题不是由使用引起的，`NSURLBookmarkCreationWithSecurityScope`而是由使用安全范围的书签启动和停止方法引起的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T00:07:44.930

事实证明，使用`NSURLBookmarkCreationWithSecurityScope`10.7 - 10.7.2 不会导致问题。`-[NSURL startAccessingSecurityScopedResource]:`导致失败的原因是在 10.7.3 之前不支持的调用。因此，您需要使用 OS 检查或 respondsToSelector 检查来包装对此方法（以及相应的停止方法）的调用。我测试了书签在 10.7.1 中仍然有效，只要您确保不调用 start/stop。

以下是一些代码片段`respondsToSelector`，可以帮助遇到此问题的任何其他人：

使用它开始使用：

```
if([bookmarkFileURL respondsToSelector:@selector(startAccessingSecurityScopedResource)]) { // only supported by 10.7.3 or later
    [bookmarkFileURL startAccessingSecurityScopedResource]; // start using bookmarked resource
} 
```

这停止使用：

```
if([bookmarkFileURL respondsToSelector:@selector(stopAccessingSecurityScopedResource)]) { // only supported by 10.7.3 or later
    [bookmarkFileURL stopAccessingSecurityScopedResource]; // stop using bookmarked resource
} 
```

# mstest - 如何对 Metro 可执行文件中定义的类进行单元测试

> ID：12188867
> 
> 赞同：1
> 
> 时间：2012-08-30T01:50:51.730
> 
> 标签：mstest, c++-cx

使用 VS11 RC。我有一个用 C++ 编写的客户端可执行文件，我正在尝试使用 C# 单元测试库（Metro 风格应用程序）项目进行测试。测试失败，异常**Class not registered HRESULT 0x80040154 (REGDB_E_CLASSNOTRG)**；我相信这与测试项目中的警告有关：**可执行文件'Client.exe'被指定为winmd文件'C:.Client.winmd'的实现。仅支持进程内服务器在应用清单中生成注册信息。您需要在应用清单中指定进程外服务器注册信息。**

在我看来，MSTest 正在寻找作为 COM 对象的类，并且警告告诉我需要将其指定为进程外服务器。不幸的是，我不认为我想这样做，因为它是一个可执行文件，即使这是我想要的，我也不知道该怎么做。

我可以简单地将被测类移到另一个项目中，但我不想这样做没有比“我无法让它工作”更好的理由。

有没有办法对 Metro 可执行文件中定义的类进行单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:21:45.957

要测试的代码需要移动到 DLL 中。

必须在 DLL 中定义本机 Windows 运行时类型才能*激活*（这实际上意味着“可通过 Windows 运行时实例化”）。您的可执行文件不需要通过 Windows 运行时来实例化它自己定义的类型，但您的单元测试可执行文件确实需要通过 Windows 运行时来实例化这些类型。

我建议在 DLL 中定义所有你能做的事情，并让你的 EXE 尽可能小：让它引导你的应用程序，并将你所有的真实代码放在 DLL 中。

# ruby-on-rails-3 - 带有 RABL 的 Rails 3 API

> ID：12188868
> 
> 赞同：4
> 
> 时间：2012-08-30T01:51:05.510
> 
> 标签：ruby-on-rails-3, api, rabl

我正在尝试使用 RABL 创建 API——但我的设置与标准设置有点不同——正如他们的 WIKI 中所定义的那样。

我在路由中设置了一个 API 命名空间：

```
namespace :api do
  resources :orders
end 
```

我在 /app/controllers/api/orders_controller.rb 中有我的控制器

和我在 /app/views/api/orders/index.json.rabl 中的 RABL 视图：

当我尝试访问 localhost:3000/api/orders 时，我收到以下错误：

模板丢失

```
Missing template api/orders/index with {:handlers=>[:erb, :rjs, :builder, :rhtml, :rxml, :haml, :rabl], :formats=>[:html], :locale=>[:en, :en]} in view paths 
```

但是，如果我创建一个名为“/app/views/api/orders/index.html.erb”的新文件，视图会呈现 - 但不使用 RABL。

我怎样才能使它使用 RABL？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T04:19:07.513

它正在寻找“html”格式。尝试将`.json`扩展名添加到 URL 或将您的路由更改为此。

```
namespace :api, defaults: {format: 'json'} do
  resources :orders
end 
```

# git - bash shell 中的 git clone ssh repo

> ID：12188869
> 
> 赞同：-1
> 
> 时间：2012-08-30T01:51:12.793
> 
> 标签：git, bash, shell, ssh, terminal

我正在编写一个 bash 脚本，其中包括使用 SSH 克隆一个私有存储库，问题是当我`git clone ...`直接在终端中编写时，它工作正常
，但在 bash 脚本中它也已编写`git clone ...`，但它给出了错误

> 权限被拒绝（公钥）。致命：远端意外挂断

有什么想法可能是什么问题？

即使该文件仅包含： `sudo git clone git@github.com:username/Project.git`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:16:31.333

您没有为您的脚本提供任何代码，因此很难诊断。

但是关于你的脚本中可能有什么不同的一些想法：不同的当前目录，不同的环境变量，缺少加载不同解释器的 hash-bang 行，hash-bang 行上的不同选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:45:00.507

我弄清楚了问题所在，我只是在两者中都尝试了 echo $USER ，但它们不一样，文件中的那个是 root ，所以我从 sudo bash file.sh 中删除了 sudo 并且它工作正常

# php - 如何在我的 Amazon EC2 服务器中定期运行 php 作业？

> ID：12188877
> 
> 赞同：0
> 
> 时间：2012-08-30T01:51:56.237
> 
> 标签：php

我有一个 Amazon EC2 服务器。
我想每 1 小时运行一次 php 作业，以从网站获取最新信息并将它们插入数据库。
但我不擅长服务器。
有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:15:46.700

从此[URL](http://www.thegeekstuff.com/2011/07/php-cron-job/)中，您从 shell 调用 crontab 并每小时执行一次，在开头添加“00”，指向 PHP 的位置和要运行的脚本。

```
# crontab -e
00 * * * * /usr/local/bin/php /home/dir/myscript.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:54:07.047

对于任何 Linux 服务器，请使用 crontab。

在终端（SSH）上：

```
crontab -e 
```

[请参阅 cron 的手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab%205)

# java - getWritableDatabase 导致空指针异常

> ID：12188879
> 
> 赞同：0
> 
> 时间：2012-08-30T01:52:07.077
> 
> 标签：java, android, sql, database

我正在使用存储特定信息的数据库进行项目。该数据库适用于程序的一部分，但对于其他程序却不起作用。当用户第一次启动程序时，他们将看到从数据库中提取的信息，并且他们还可以选择添加新信息。db 对这两个都很好。

我遇到的问题是在另一个添加信息的地方。当我去打开数据库时，我的程序崩溃了。日志猫：

```
08-29 20:22:47.000: E/AndroidRuntime(3022): FATAL EXCEPTION: main
08-29 20:22:47.000: E/AndroidRuntime(3022): java.lang.NullPointerException
08-29 20:22:47.000: E/AndroidRuntime(3022):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
08-29 20:22:47.000: E/AndroidRuntime(3022):     at android.database.sqlite.SQLiteOpenHelper._getWritableDatabase(SQLiteOpenHelper.java:164)
08-29 20:22:47.000: E/AndroidRuntime(3022):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:100)
08-29 20:22:47.000: E/AndroidRuntime(3022):     at peices.DbM.open(DbM.java:173)
08-29 20:22:47.000: E/AndroidRuntime(3022):     at peices.NewStuff.CreateNewUnit(NewStuff.java:27)
08-29 20:22:47.000: E/AndroidRuntime(3022):     at carlson.msum.arch.Site$5.onClick(Site.java:231)
08-29 20:22:47.000: E/AndroidRuntime(3022):     at android.view.View.performClick(View.java:2538) 
```

NewStuff 代码：27（第 20-30 行）：

```
bb=Lon.getText().toString();
            cc=UnitName.getText().toString();
            Log.d("Class",aa);
            Log.d("Class",bb);
            Log.d("Class",cc);
            Log.d("Class",SiteName);
            Log.d("Stuff","Before Open");
            **db.open();**
            Log.d("Stuff","Before Insert/After Open");
            db.InsertUnit(SiteName, cc, aa, bb);
            Log.d("Stuff","Before Close/After Insert");
            db.close(); 
```

DbM.java 的代码：173(170-176)

```
public DbM open() throws SQLException
{
    Log.d("BmDb","open");
    **db= DbMh.getWritableDatabase();**
    Log.d("BmDb","Open before return");
    return this;
} 
```

我已经知道它与数据库的打开有关，但为什么它会打开并为其他活动工作，但不是这个？我检查了这之前的所有活动，并且我确实关闭了所有数据库。

这是课程的开始，DbM 初始化是我为所有其他人做的。

```
public class NewStuff extends Activity {
Context context;
**DbM db=new DbM(this);** 
```

它可能是一件事，但不确定如何解决它是我在程序的其他部分中使用的一类对象。所以我没有调用任何 oncreates 或类似的东西，这会导致我的问题吗？

****编辑****

这是我的整个 NewStuff 课程，除了上下文之外，我必须遗漏其他东西，因为似乎没有任何效果。

```
package peices;
import peices.DbM;
import android.os.Bundle;
import android.util.Log;
import android.widget.EditText;
import android.app.Activity;
import android.content.Context;

public class NewStuff extends Activity {
Context context;
DbM db;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        db=new DbM(this);
        }
    public void CreateNewUnit(EditText Lat, EditText Lon, EditText UnitName, String SiteName)
    {

            db=new DbM(this);
            Log.d("NewUnit","Start of");
            String aa="";
            String bb="";
            String cc="";

            aa=Lat.getText().toString();
            bb=Lon.getText().toString();
            cc=UnitName.getText().toString();
            Log.d("Class",aa);
            Log.d("Class",bb);
            Log.d("Class",cc);
            Log.d("Class",SiteName);
            Log.d("Stuff","Before Open");
            db.open();
            Log.d("Stuff","Before Insert/After Open");
            db.InsertUnit(SiteName, cc, aa, bb);
            Log.d("Stuff","Before Close/After Insert");
            db.close();     
    } 
```

***编辑***

调用 NewStuff 的 onclick 函数

```
ucreate.setOnClickListener(new OnClickListener(){
        public void onClick(View m){
            Log.d("Ubox","Unit Name: "+uname.getText().toString());
            Log.d("Ubox","Unit Longitude: "+ulon.getText().toString());
            Log.d("Ubox","Unit Latitude: "+ulat.getText().toString());
            Log.d("Ubox","Site Name: "+SiteName);
            NewStuff ns= new NewStuff();
            ns.CreateNewUnit(ulat,ulon,uname,SiteName);
            Intent I= new Intent(Site.this, Site.class);
            I.putExtra("SITE", SiteName);
            startActivity(I); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:54:23.183

您不能将 DbM 初始化为字段，因为 Context 不会被初始化

```
 DbM db=new DbM(this); 
```

称呼

```
 db=new DbM(this); 
```

仅在 OnCreate 中或之后。

编辑：你不能打电话

```
NewStuff ns= new NewStuff() 
```

这是因为如果您实例化自己，将不会设置活动的上下文。所以`this`在**new DbM(this);** 将没有任何意义。

主要是你通常不应该从另一个 Activity 调用一个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:29:49.837

以这种方式定义 db

```
public class NewStuff extends Activity {
Context context;
DbM db; 
```

然后 onCreate(

```
onCreate(){
........
   db=new DbM(this); 
} 
```

这就是@nandeesh 想要告诉你的。

# javascript - 提高 JavaScript 转换的性能

> ID：12188884
> 
> 赞同：2
> 
> 时间：2012-08-30T01:52:35.783
> 
> 标签：javascript, performance, scroll, transition

我有一个 JavaScript 驱动的视差滑块，改编自本教程 ( [http://tympanus.net/codrops/2011/01/03/parallax-slider/](http://tympanus.net/codrops/2011/01/03/parallax-slider/) )，还有一个小脚本在滚动过去后使滑块图像淡出某一点。

这是脚本：

```
 $(document).ready(function() {

        $(window).scroll(function () {
            var $slider = $('.pxs_slider');
            var sTop = $('body').scrollTop();
            var sTop_ff = $('html').scrollTop();
            var opacity = 1;

            if(sTop < 40) {
                opacity = 1;
                if(sTop_ff < 40) {
                    opacity = 1;
                } else {
                    opacity = 0;
                }
            } else  {
                opacity = 0;
            }

            $slider.css('opacity', opacity);
        });
  }); 
```

一切正常，但在此过渡期间滚动变得非常缓慢。但是，我发现它只在所有浏览器的 Chrome 中真正存在这个问题。Firefox 没有性能影响。

我可以尝试一种更有效的方法来实现这种效果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:59:35.357

缓存`$('.pxs_slider')`所以每次滚动条移动时都不会查询它是大的：

```
$(document).ready(function() {
    var $slider = $('.pxs_slider');

    $(window).scroll(function() {
        var sTop = $('body').scrollTop();
        var sTop_ff = $('html').scrollTop();
        var opacity = 1;

        if(sTop < 40) {
            opacity = 1;
            if(sTop_ff < 40) {
                opacity = 1;
            } else {
                opacity = 0;
            }
        } else  {
            opacity = 0;
        }

        $slider.css('opacity', opacity);
    });
}); 
```

另外，`$(window).scrollTop()`我相信，是正确的方法：

```
$(document).ready(function() {
    var $slider = $('.pxs_slider');

    $(window).scroll(function() {
        $slider.css('opacity', $(window).scrollTop() < 40 ? 1 : 0);
    });
}); 
```

# css - 渐变背景顶部的透明图像

> ID：12188885
> 
> 赞同：1
> 
> 时间：2012-08-30T01:52:54.953
> 
> 标签：css

我正在尝试将背景图像放在渐变背景之上，我是否必须创建另一个 div 才能做到这一点？

```
#inner_bg {
    width: 846px;
    height: 646px;
    margin: -1px 0 0 0;
    background: url(../simg/inner_bg.gif) no-repeat 20px 140px;
    background: #031f34;
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSI5JSIgc3RvcC1jb2xvcj0iIzAzMWYzNCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjQwJSIgc3RvcC1jb2xvcj0iIzAzNjY4ZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjcwJSIgc3RvcC1jb2xvcj0iIzA1YjdkMSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
    background: -moz-linear-gradient(left,  #031f34 9%, #03668f 40%, #05b7d1 70%);
    background: -webkit-gradient(linear, left top, right top, color-stop(9%,#031f34), color-stop(40%,#03668f), color-stop(70%,#05b7d1));
    background: -webkit-linear-gradient(left,  #031f34 9%,#03668f 40%,#05b7d1 70%);
    background: -o-linear-gradient(left,  #031f34 9%,#03668f 40%,#05b7d1 70%);
    background: -ms-linear-gradient(left,  #031f34 9%,#03668f 40%,#05b7d1 70%);
    background: linear-gradient(to right,  #031f34 9%,#03668f 40%,#05b7d1 70%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#031f34', endColorstr='#05b7d1',GradientType=1 );
    float: left;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:56:27.733

是的，您需要使用另一个元素（可能是 ::before 之类的伪元素），背景正在相互替换（当它们有效时）。

[http://jsfiddle.net/fTpaz/2/](http://jsfiddle.net/fTpaz/2/)

```
#inner_bg {
    width: 846px;
    height: 646px;
    margin: -1px 0 0 0;
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSI5JSIgc3RvcC1jb2xvcj0iIzAzMWYzNCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjQwJSIgc3RvcC1jb2xvcj0iIzAzNjY4ZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjcwJSIgc3RvcC1jb2xvcj0iIzA1YjdkMSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
    background: -moz-linear-gradient(left,  #031f34 9%, #03668f 40%, #05b7d1 70%);
    background: -webkit-gradient(linear, left top, right top, color-stop(9%,#031f34), color-stop(40%,#03668f), color-stop(70%,#05b7d1));
    background: -webkit-linear-gradient(left,  #031f34 9%,#03668f 40%,#05b7d1 70%);
    background: -o-linear-gradient(left,  #031f34 9%,#03668f 40%,#05b7d1 70%);
    background: -ms-linear-gradient(left,  #031f34 9%,#03668f 40%,#05b7d1 70%);
    background: linear-gradient(to right,  #031f34 9%,#03668f 40%,#05b7d1 70%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#031f34', endColorstr='#05b7d1',GradientType=1 );
    float: left;
    position: relative;
}

#inner_bg::before{
    content: ' ';
    position:absolute;
    left:0;
    right:0;
    top:0;
    bottom:0;
    background: red;
    opacity:0.5;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:01:45.800

创造另一个鸿沟。位于带有渐变背景的 div 顶部。添加比具有渐变背景的 div 更高的 z-index。

# objective-c - 实例化时使用代码更改情节提要中的自定义类

> ID：12188886
> 
> 赞同：6
> 
> 时间：2012-08-30T01:52:59.357
> 
> 标签：objective-c, ios, xcode

我有一个标签栏控制器和一堆相同的标签。每个选项卡仅在功能上有所不同，但 UI 都相同。在情节提要中，我设计了一个选项卡的流程和 UI，并将其设置为基类。然后，当我创建选项卡时，我尝试在将它们添加到选项卡栏之前对它们进行类型转换，但它不起作用。

在情节提要中，标识为“TabView”的视图控制器具有自定义类“TabColor”

```
TabRed *red = (TabRed *)[storyboard instantiateViewControllerWithIdentifier:@"TabView"];
TabBlue *blue = (TabBlue *)[storyboard instantiateViewControllerWithIdentifier:@"TabView"]; 
```

然而，TabColor 中的 loadView 方法被调用，而不是 TabRed/TabBlue。

此外，如果我对其进行 nslog，则结果是 TabColor 对象：

```
NSLog(@"%@", red) 
```

预期：TabRed

实际：TabColor

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T14:56:29.203

# tl;博士：

故事板和 xib 包含序列化对象的集合。在情节提要中指定一个类意味着您将在加载情节提要时获得该类的实例。获得您正在寻找的行为的一种方法是使用 cocoa/cocoa-touch 中常见的委托模式。

# 长版

故事板和类似的 xib/nib 文件实际上是一组编码对象。当您指定某个视图是情节提要中的 UICustomColorViewController 时，该对象表示为该类实例的序列化副本。当情节提要加载`instantiateViewControllerWithIdentifier:`并被调用时，情节提要中指定的类的实例将被创建并返回给您。在这一点上，你被给予的对象卡住了，但你并没有不走运。

由于看起来您想要做不同的事情，您可以构建您的视图控制器，以便该功能由使用委托的不同类处理。

创建一个协议来指定您希望在两个视图控制器之间有所不同的功能。

```
@protocol ThingDoerProtocol <NSObject>
    -(void) doThing;
@end 
```

将委托属性添加到您的视图控制器：

```
@interface TabColor
...
@property (strong, nonatomic) thingDoerDelegate; 
```

然后让你的新对象实现协议并做你想让他们做的事情。

```
@implementation RedTabDoer
    -(void) doThing {
         NSLog(@"RedTab");
    }
@end

@implementation BlueTabDoer
    -(void) doThing {
         NSLog(@"BlueTab");
    }
@end 
```

然后在加载情节提要时创建并连接这些对象。

```
TabColor *red = [storyboard instantiateViewControllerWithIdentifier:@"TabView"];
red.thingDoerDelegate = [[RedTabDoer new] autorelease];

TabColor *blue = [storyboard instantiateViewControllerWithIdentifier:@"TabView"];
blue.thingDoerDelegate = [[BlueTabDoer new] autorelease]; 
```

然后，这应该允许您通过更改分配给控制器委托槽的对象类型来自定义视图控制器的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T15:08:04.687

```
TabRed *red = (TabRed *)[storyboard instantiateViewControllerWithIdentifier:@"TabView"];
TabBlue *blue = (TabBlue *)[storyboard instantiateViewControllerWithIdentifier:@"TabView"]; 
```

强制转换不会改变值，它只会改变编译器解释这些值的方式（并在你使用 type 代替另一个时阻止它抱怨）。因此，将 a 转换`TabColor*`为 a 会`TabRed*`告诉编译器假装您的第一个指针指向一个`TabRed`实例，但它不会将指针所指的对象变形为 TabRed 的实例。

正如 waltflanagan 所解释的，故事板和 .xib 文件包含实际对象，每个对象的类型在您创建文件时确定；你不能在运行时改变它。但是，您可以做的是让多个视图控制器中的每一个都加载相同的视图层次结构。您甚至不必编写任何代码来执行此操作。只需创建一个 .xib 文件，其中包含您的选项卡控制器和每个选项卡的视图控制器：

![IB 选项卡控制器](../Images/99930f79079258d62e8dfbf9e795a75b.png)

请务必在 .xib 中适当地设置每个视图控制器的类型，以便为每个选项卡创建正确类型的视图控制器：

![IB自定义类字段](../Images/30ceee92cc9cf9de7fd6d174a6747491.png)

为每个视图控制器设置“NIB 名称”字段以指定包含这些控制器将使用的视图层次结构的 .xib 文件。如果您为每个控制器指定相同的 .xib 文件，每个控制器将实例化自己的这些视图的副本：

![IB NIB 名称设置](../Images/68f448291d8c2c1310554eeb49b7b2ad.png)

在视图控制器的公共超类中指定任何 IBOutlets，以便所有视图控制器具有相同的出口。您可以在通用 .xib 文件中将该超类指定为“文件所有者”的类型，以便 IB 知道哪些出口可用。文件的所有者实际上是加载 .xib 的对象的代理，因此当您的一个视图控制器（`TabRed`例如）加载公共视图 .xib 时，该控制器将是 .xib 中的视图所连接的那个控制器。`TabBlue`加载 .xib 时，该*对象*将是*这些*视图所连接的对象。

起初这可能看起来令人困惑，但请尝试一下。理解这一点将真正帮助您理解 .xib 文件（以及故事板）。当您是初学者时，它们的魔力要小得多，但是一旦您掌握了它们，它们就会看起来更酷。

# java - 将地图用于图表

> ID：12188887
> 
> 赞同：3
> 
> 时间：2012-08-30T01:53:05.407
> 
> 标签：java, data-structures, graph, map, hashmap

嗨，我打算为一门课程实现一个 Graph 数据结构（该图不是要求的一部分，我选择使用它来解决问题），我的第一个想法是使用邻接列表来实现它，因为这需要更少的内存，而且我不希望在我的图中有那么多边。

但后来我想到了。我可以使用 Map（`HashMap`具体来说）实现邻接列表 Graph 数据结构。而不是顶点列表，我将有一个顶点映射，然后保存一个短边列表到顶点。

这似乎是我要走的路。但我想知道是否有人能看到像我这样的学生在使用 a 时可能错过的任何缺点`HashMap`？（不幸的是，我记得在我们复习的时候很累`HashMap`……所以我对它们的了解少于我所知道的所有其他数据结构。）所以我想确定一下。

顺便说一句，我正在使用 Java。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T02:16:27.697

表示图形的两种主要方式是：

*   与邻接列表（如您所述）
*   与邻接矩阵

由于您不会有太多边（即表示您的图形的邻接矩阵将是*稀疏*的），我认为您决定使用列表而不是矩阵是一个很好的决定，因为正如您所说，它确实会占用更少的空间因为没有浪费空间来表示缺失的边缘。此外，该`Map`方法似乎是合乎逻辑的，因为您可以将每个图形映射到它所连接`Node`的 s 列表。`Node`另一种选择是让每个`Node`对象包含它所连接的节点列表作为数据字段。我认为这两种方法中的任何一种都可以很好地工作。我在下面总结了一下。

**第一种方法**（维护地图）：

```
Map<Node, Node[]> graph = new HashMap<Node, Node[]>(); 
```

**第二种方法**（内置到`Node`类中的数据）：

```
public class Node {
    private Node[] adjacentNodes;
    public Node(Node[] nodes) { adjacentNodes = nodes; }
    public Node[] adjacentNodes() { return adjacentNodes; }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T03:14:04.837

图传统上通过邻接列表或邻接矩阵表示（还有其他针对某些图形格式进行优化的方法，例如，如果节点 ID 是按顺序标记的和/或您提前知道节点/边的数量，但我不会进入那个）。

在邻接列表和邻接矩阵之间进行选择取决于您的需要。显然，邻接矩阵将比邻接列表占用更多空间（矩阵将始终占用（节点数）^ 2，而列表将占用（节点数 + 边数），但如果您的图形“小”，那么这并没有什么不同。

另一个问题是你有多少边（你的图是稀疏的还是密集的）？您可以通过获取您拥有的边数并将其除以：

n(n-1) / 2

其中“n”是图的节点数。上面的等式在“n”节点 UNDIRECTED 图中找到总的可能边数。如果图形是有向的，去掉“/2”。

要考虑的其他事情是有效的边缘成员资格是否重要。邻接列表可以轻松检测边缘成员资格（O（1）），因为它只是一个数组查找 - 对于邻接列表，如果“列表”存储为除 a 以外的其他内容，`HashSet`它会慢得多，因为您必须查看整个边缘列表。或者也许你保持边缘列表的排序，你可以做一个二进制搜索，但是边缘插入需要更长的时间。也许您的图非常稀疏，并且邻接矩阵使用了太多内存，因此您必须使用邻接列表。很多事情要考虑。

还有很多可能与您的项目有关的问题，我只列出一些。

通常，假设您的图不是很复杂或“大”（在数百万个节点的意义上），`HashMap`其中键是节点 ID，值是节点 ID 的一个`Set`或其他一些集合，指示键的邻居节点很好，我已经在 8gb 机器上为 400,000 多个节点图完成了此操作。基于的`HashMap`实现可能是最容易实现的。

# java - 在 Java 中的列表上“释放”迭代器

> ID：12188888
> 
> 赞同：1
> 
> 时间：2012-08-30T01:53:05.523
> 
> 标签：java, collections

我正在尝试编写一个游戏引擎，其中一个精灵列表用于保存所有精灵（列表列表让我以合理的方式对精灵进行排序）。问题是，我需要反复添加和删除精灵，这很快就违反了快速失败的迭代器，给了我一个并发修改异常。我可以在一个列表上有多个迭代器，这会阻止异常吗？如果做不到这一点，有没有办法“释放”列表的迭代器，以便列表不再检查修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T02:19:50.690

如果您想迭代列表的内容，因为它们在特定时间存在，而与迭代过程中发生的任何修改无关，您应该简单地制作一个副本并迭代该副本。

从性能的角度来看，这听起来可能很可怕，但我鼓励您尝试一下，并且仅`CopyOnWriteArrayList`在分析实际上表明创建副本是您完成的应用程序中的热点时才考虑替代方案（例如 ）。垃圾收集器非常擅长使像这些副本这样的短期对象表现得非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:57:42.040

> 我可以在一个列表上有多个迭代器，这会阻止异常吗？

是的，你可以，不，它不会。（迭代器检查列表的状态以确定是否发生了并发修改。）

> 如果做不到这一点，有没有办法“释放”列表的迭代器，以便列表不再检查修改？

不，至少没有标准列表类。这将是一个坏主意，因为它可能会导致故障快速迭代器旨在避免的那种异常和数据损坏。（您是否希望您的应用程序因 ConcurrentModificationException 而失败，或者偶尔因随机数据结构损坏和/或奇怪的异常而失败？）

我认为您需要查看迭代器允许并发修改的替代 List 实现类。根据您的应用程序使用列表的方式，可能性包括：

*   `CopyOnWriteArrayList`这具有完整的列表语义，但写入操作往往有点昂贵。

*   `ConcurrentLinkedDeque`这是您在列表中期望的大部分操作（但不是位置插入或删除），并且写入操作更便宜。

在这两种情况下，迭代器都对迭代是否会看到所有元素提供较弱的保证。您需要仔细阅读相应的 javadocs 以确保语义合适。

除了一些历史例外，其中的集合类型`java.util`不是为并发/多线程用例设计的。如果您的应用程序需要由多个线程访问的集合类型，则需要查看`java.util.concurrent`包中的实现。

# c# - 使用 LINQ 从 2 个列表中返回列表

> ID：12188891
> 
> 赞同：1
> 
> 时间：2012-08-30T01:53:23.503
> 
> 标签：c#, linq

> **可能重复：**
> [如何在 Linq 中添加两个列表，所以 addedList[x] = listOne[x] + listTwo[x]？](https://stackoverflow.com/questions/2511843/how-do-i-add-two-lists-in-linq-so-addedlistx-listonex-listtwox)

我有 2 个行数相等的 IList 对象

```
IList<double> A;
IList<double> B; 
```

我希望返回一个 IList，我在其中执行计算 foreach，为简单起见，假设我只想为列表中的每个项目添加 2 个值 A[n] + B[n]。

您将如何使用 LINQ 执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T02:01:06.750

使用[`Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)扩展方法：

```
var result = A.Zip(B, (a, b) => a + b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:02:34.387

严格：

```
A.Zip(B, (x, y) => x + y).ToList(); 
```

尽管和往常一样，首先考虑是否有可能不必将其放入列表中，`.ToList()`如果可以的话，请忽略它。

# java - AndEngine：动态壁纸应用无法打开设置页面

> ID：12188902
> 
> 赞同：1
> 
> 时间：2012-08-30T01:54:51.583
> 
> 标签：java, android, andengine, live-wallpaper

我用**AndEngine**写了一个动态壁纸。

当我在墙纸选择器中选择我的墙纸时，一切正常，除了我单击“*设置*”按钮（此操作将使应用程序崩溃）。

谁能帮我？提前致谢！

PS: **[错误日志] 08-30 10:46:54.376: E/Surface(4246): surface (identity=1406) is invalid, err=-19 (No such device)**

# asp.net-mvc-3 - 运行 mvc3 applicaiton 错误'使用注册为 allowDefinition='MachineToApplication' 的部分超出应用程序级别是错误的

> ID：12188905
> 
> 赞同：0
> 
> 时间：2012-08-30T01:55:22.397
> 
> 标签：asp.net-mvc-3

我刚刚创建了一个新的 MVC3 应用程序。它运行良好，但是当我尝试在 web.config 中添加身份验证设置时，它开始抛出以下错误：

在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的

我的 Web.config 代码如下：

```
<system.web>
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication>

<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
  </providers>
</membership>

<profile>
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
</profile>

<roleManager enabled="false">
  <providers>
    <clear/>
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
  </providers>
</roleManager>

<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages"/>
  </namespaces>
</pages> 
```

# timestamp - 如何更改 Liquibase 自己的表的数据类型

> ID：12188908
> 
> 赞同：0
> 
> 时间：2012-08-30T01:56:48.430
> 
> 标签：timestamp, oracle9i, liquibase

第一次在数据库上运行 Liquibase 时，它​​会尝试创建两个用于管理其变更集的表。

当我在我的 Oracle9i 数据库上运行 Liquibase 时，它​​会尝试创建下表：

```
CREATE TABLE myuser.DATABASECHANGELOG (
  ID VARCHAR2(63) NOT NULL,
  AUTHOR VARCHAR2(63) NOT NULL,
  FILENAME VARCHAR2(200) NOT NULL,
  DATEEXECUTED TIMESTAMP NOT NULL,
  ORDEREXECUTED INTEGER NOT NULL,
  EXECTYPE VARCHAR2(10) NOT NULL,
  MD5SUM VARCHAR2(35),
  DESCRIPTION VARCHAR2(255),
  COMMENTS VARCHAR2(255),
  TAG VARCHAR2(255),
  LIQUIBASE VARCHAR2(20),
  CONSTRAINT PK_DATABASECHANGELOG PRIMARY KEY (ID, AUTHOR, FILENAME)
); 
```

我收到此错误/异常：

```
java.sql.SQLSyntaxErrorException: ORA-00902: invalid datatype 
```

Oracle9i 没有 TIMESTAMP 数据类型（Oracle 的更高版本有）。

有没有办法让 Liquibase 使用不同的数据类型或告诉 Liquibase 它正在使用早期版本的 Oracle？

还是因为 Liquibase 不支持 Oracle9i 而我不走运？

编辑：Oracle9i*确实*有时间戳数据类型，但我的数据库在 8i 兼容模式下运行，不幸的是不能改变。问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T04:07:48.250

我想出的解决方案是使用日期数据类型手动创建 DATABASECHANGELOG 表和 DATABASECHANGELOGLOCK 表。

```
CREATE TABLE myuser.DATABASECHANGELOG (
   ID VARCHAR2(63) NOT NULL,
   AUTHOR VARCHAR2(63) NOT NULL,
   FILENAME VARCHAR2(200) NOT NULL,
   DATEEXECUTED DATE NOT NULL,
   ORDEREXECUTED INTEGER NOT NULL,
   EXECTYPE VARCHAR2(10) NOT NULL,
   MD5SUM VARCHAR2(35),
   DESCRIPTION VARCHAR2(255),
   COMMENTS VARCHAR2(255),
   TAG VARCHAR2(255),
   LIQUIBASE VARCHAR2(20),
   CONSTRAINT PK_DATABASECHANGELOG PRIMARY KEY (ID, AUTHOR, FILENAME)
);

CREATE TABLE myuser.DATABASECHANGELOGLOCK (
   ID INTEGER NOT NULL,
   LOCKED NUMBER(1) NOT NULL,
   LOCKGRANTED DATE,
   LOCKEDBY VARCHAR2(255),
   CONSTRAINT PK_DATABASECHANGELOGLOCK PRIMARY KEY (ID)
); 
```

您还需要在锁表中插入一条记录：

```
INSERT INTO myuser.DATABASECHANGELOGLOCK (ID, locked, lockgranted, lockedby) VALUES (1, 0, NULL, NULL); 
```

# android - AccelerometerPlayActivity 源转换

> ID：12188911
> 
> 赞同：1
> 
> 时间：2012-08-30T01:57:04.870
> 
> 标签：android, android-sensors

我想改变这个活动。

Que 1\. one Ball Image -> 各种 Ball Image
Que 2\. Rect Collision -> Round Collision

* * *

```
 public void resolveCollisionWithBounds() {
            final float xmax = mHorizontalBound;
            final float ymax = mVerticalBound;
            final float x = mPosX;
            final float y = mPosY;
            if (x > xmax) {
                mPosX = xmax;
            } else if (x < -xmax) {
                mPosX = -xmax;
            }
            if (y > ymax) {
                mPosY = ymax;
            } else if (y < -ymax) {
                mPosY = -ymax;
            }
        } 
```

* * *

```
 public SimulationView(Context context) {
        super(context);
        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        mXDpi = metrics.xdpi;
        mYDpi = metrics.ydpi;
        mMetersToPixelsX = mXDpi / 0.0254f;
        mMetersToPixelsY = mYDpi / 0.0254f;
        // rescale the ball so it's about 0.5 cm on screen
        Bitmap ball = BitmapFactory.decodeResource(getResources(), R.drawable.ball);
        final int dstWidth = (int) (sBallDiameter * mMetersToPixelsX + 0.5f);
        final int dstHeight = (int) (sBallDiameter * mMetersToPixelsY + 0.5f);
        mBitmap = Bitmap.createScaledBitmap(ball, dstWidth, dstHeight, true);
        Options opts = new Options();
        opts.inDither = true;
        opts.inPreferredConfig = Bitmap.Config.RGB_565;
        mWood = BitmapFactory.decodeResource(getResources(), R.drawable.wood, opts);        } 
```

# simperium - 使用 Simperium 在应用程序启动时引导数据

> ID：12188912
> 
> 赞同：0
> 
> 时间：2012-08-30T01:57:32.530
> 
> 标签：simperium

作为一个在尝试为我们的 CoreData 应用程序之一创建 iCloud 原型时体验过 iCloud 痛苦的人，Simperium 看起来很有希望，但我很想看看它如何处理一些尖锐的边缘。

我遇到的一个问题是如何在应用程序启动时优雅地处理引导数据。当用户第一次启动我们的应用程序时，我们会将一些默认数据加载到我们的 CoreData 数据库中。如果用户先在 iPhone 上启动应用程序，然后在 iPad 上启动应用程序，他们最终会因为同步而在两台设备上复制引导数据。使用 iCloud，解决方案是连接到 iCloud 合并过程。

我将如何使用 Simperium 处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:04:47.363

至少有几种方法可以做到这一点。

您可以`simperiumKey`对每个种子对象进行硬编码。例如，在便笺应用中，如果每个新用户都收到欢迎便笺，您可以使用`simperiumKey`of本地创建该便笺`welcomeNote`。这将确保该用户的帐户（在任何设备上）中只存在一个欢迎注释。使用这种方法，可能会有一些冗余数据传输，因此最好不要有大量种子数据。另一方面，如果您希望新用户可以立即使用数据，即使他们在首次启动您的应用程序时处于离线状态，这种方法也很好。

使用 Simperium，您还可以选择使用服务器进程。您可以使用在创建帐户时运行一些代码的 Python 或 Ruby 侦听器为新用户帐户播种数据。如果有大量数据，这是一个好方法，但缺点是用户需要在线才能传输种子数据（当然传输本身需要一些时间）。

这些方法有一些微妙之处。使用第一种方法，使用`welcomeNote`示例，如果您的用户删除`welcomeNote`并随后重新安装您的应用程序，`welcomeNote`则将复活（但不会重复），因为它是在本地创建的。这通常是可以接受的。使用第二种方法，`welcomeNote`将只播种一次，因此即使重新安装您的应用程序，它也永远不会复活。

# windows - 我们如何将内置管理员帐户列表重命名为“管理员”？（使用vbs）

> ID：12188917
> 
> 赞同：0
> 
> 时间：2012-08-30T01:58:46.927
> 
> 标签：windows, vbscript, admin, built-in

我正在尝试更改我域中的所有内置 Windows 本地管理员名称。新名称将是“管理员”，但似乎我的脚本无法读取 excel 数据（服务器|旧帐户名称）。

```
DIM strPassword, strAdminUserName, strNewAdminUserName

Dim strExcelPath, objExcel, objSheet, intRow

'''''
'Spreadsheet file.
strExcelPath = "c:\List.xls"

' Bind to Excel object.
On Error Resume Next
Set objExcel = CreateObject("Excel.Application")
If (Err.Number <> 0) Then
    On Error GoTo 0
    Wscript.Echo "Excel application not found."
    Wscript.Quit
End If
On Error GoTo 0

' Open spreadsheet.
On Error Resume Next
objExcel.Workbooks.Open strExcelPath
If (Err.Number <> 0) Then
    On Error GoTo 0
    Wscript.Echo "Spreadsheet cannot be opened: " & strExcelPath
    Wscript.Quit
End If
On Error GoTo 0

' Bind to worksheet.
Set objSheet = objExcel.ActiveWorkbook.Worksheets(1)

intRow = 2
Do While objSheet.Cells(intRow, 1).Value <> ""
    comp = objSheet.Cells(intRow, 1).Value
    strAdminUserName = objSheet.Cells(intRow, 2).Value
    strNewAdminUserName = "Administrator"   
On Error Resume Next

' Rename a local user account on a given computer

    SET objComputer = GetObject("WinNT://" & Comp)
    SET objUser = GetObject("WinNT://" & Comp & "/" & strAdminUserName & ",user")
    IF err.number = 0 THEN
        objComputer.MoveHere objUser.ADsPath,strNewAdminUserName
    END IF
    ON ERROR GOTO 0
loop

' Close the workbook.
objExcel.ActiveWorkbook.Close

' Quit Excel.
objExcel.Application.Quit

Wscript.Echo "Done" 
```

任何意见/评论将不胜感激。

# ruby-on-rails - Mongoid 扩展名.ne

> ID：12188919
> 
> 赞同：6
> 
> 时间：2012-08-30T01:59:06.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

第一次在 Rails 项目中使用 Mongoid。扩展名**.ne**在这样的作用域方法中代表什么：

```
 scope :subscribed, -> {
       where( :unsubscribed.ne => true )
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T02:30:04.737

[这是“不等于”](http://mongoid.org/en/origin/docs/selection.html)的选择操作。

# python - for 循环后的 Python 语法错误（在解释器中）

> ID：12188921
> 
> 赞同：3
> 
> 时间：2012-08-30T01:59:43.790
> 
> 标签：python, file, syntax, syntax-error

我正在从控制台运行一些 python 代码（粘贴），并得到了意想不到的结果。代码如下所示：

```
parentfound = False
structfound = False
instruct = False
wordlist = []
fileHandle = open('cont.h')
for line in fileHandle:
    if line is "":
        print "skipping blank line"
        continue
    if "}" in line:
        instruct = False
        index = line.index("}")
        wordlist.append(word)
    pass          
try:
    print wordlist
except Exception as e:
    print str(e) 
```

在 for 循环之后，我想打印`wordlist`. 无论我做什么，我都不能在 for 循环之外包含任何内容。这是我收到的错误：

```
...     if "}" in line:
...         instruct = False
...         index = line.index("}")
...         wordlist.append(word)
...     pass          
... try:
  File "<stdin>", line 10
    try:
      ^
SyntaxError: invalid syntax 
```

无论我是手动将代码键入终端还是将其粘贴到终端中，都会发生这种情况。我将不胜感激您能提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T02:01:21.173

REPL 中的`...`提示意味着它还没有完成上一个块。您需要先按下`Enter`空行来终止它。

# html - 如何更改导航的颜色？

> ID：12188926
> 
> 赞同：1
> 
> 时间：2012-08-30T02:00:26.020
> 
> 标签：html, css, wordpress

我只是在这里放了一个自定义主题的样本：http: [//fortmovies.com/pestcon/](http://fortmovies.com/pestcon/)

有谁知道如何将导航颜色从灰色更改为白色？我尝试进入导航中的每个 div id 和类，并添加了“颜色：白色；” 对每个人..我不知道它是在哪里导致灰色的...... grrr。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:07:34.420

使用 Firebug（一个非常宝贵的工具，我强烈推荐它），似乎有问题的行位于第 398 行的[/pestcon/wp-content/themes/twentyten/style.css](http://fortmovies.com/pestcon/wp-content/themes/twentyten/style.css)中：

```
#access a {
    color: #aaa;
    display: block;
    line-height: 38px;
    padding: 0 10px;
    text-decoration: none;
} 
```

更改`color: #aaa;`为`color: white`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:02:23.473

```
#wrapper #access a{
    color:#fff;
} 
```

# git - 为什么要签署 Git 标签？

> ID：12188940
> 
> 赞同：8
> 
> 时间：2012-08-30T02:02:37.180
> 
> 标签：git, security, gnupg, git-tag

Git 提供了使用您的 GPG 私钥签署带注释标签的选项，但是仅接受标签声明的来源有什么问题？当标签不改变提交时，欺骗标签会造成什么损害？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T02:09:41.070

> 只接受标签声明的来源有什么问题？

你不能保证它是正确的，你必须相信每个有权访问 repo 的人（无论是否授权）都不会错误地创建标签。签名保证（至少与 GPG 所能提供的一样多）创建标签的人就是您认为的人。

> 当标签不改变提交时，欺骗标签会造成什么损害？

没有任何。您似乎在这里混淆了两种不同的想法。一个标签和一个提交是完全独立的对象——一个标签*指向*一个提交，但一个标签不是一个提交。因此，标签永远不会改变提交。这可能是更危险的地方：伪造的标签不会意外更改提交历史，并且更容易被忽视。

# facebook-graph-api - 如何更改 Facebook 页面图上的“链接”参数

> ID：12188943
> 
> 赞同：0
> 
> 时间：2012-08-30T02:03:05.487
> 
> 标签：facebook-graph-api, facebook-opengraph, facebook-page

如何更改 Facebook 页面（类型：网站）上的 opengraph 链接值

[https://www.facebook.com/yourwebsite](https://www.facebook.com/yourwebsite)到[http://www.yourwebsite.com](http://www.yourwebsite.com)

它似乎比它更容易。我找不到答案。似乎它与添加应用程序有关，然后？！

示例： http: [//graph.facebook.com/anguillabeachescom](http://graph.facebook.com/anguillabeachescom)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:47:02.347

我在页面设置界面的任何地方都看不到该操作。

我的猜测是你必须在Facebook 上[声明你的域](https://developers.facebook.com/docs/insights/)才能使事情以这种方式工作（并且可能必须为你的 Facebook 页面设置一个特殊的类别——你提到的示例页面是“网站”类型的。）

# java - Hello android sudoku to check if the game is complete to display a dialog box

> ID：12188946
> 
> 赞同：0
> 
> 时间：2012-08-30T02:03:49.370
> 
> 标签：java, android, eclipse, sudoku

I am trying to display a dialog box in the hello Android Sudoku example but when I run the app nothing happens. In the game.java I check if the puzzle is solved like this

```
/******Check to see if the game is complete**/
   public boolean isSolved()
   {
       for (int element : puzzle) {
           if (element == 0) return false;
        }
        return true;           
   } 
```

Then in the PuzzleView in the onKeyDown method i try to detect if isSolved is true and if it is display the dialog

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (game.isSolved() == true) {
        Intent i = new Intent(mActivity, Congratulations.class);
        getContext().startActivity(i);
    } else {
        Log.d(TAG, "onKeyDown: keycode=" + keyCode + ", event=" + event);
        switch (keyCode) {
        case KeyEvent.KEYCODE_DPAD_UP:
            select(selX, selY - 1);
            break;
        case KeyEvent.KEYCODE_DPAD_DOWN:
            select(selX, selY + 1);
            break;
        case KeyEvent.KEYCODE_DPAD_LEFT:
            select(selX - 1, selY);
            break;
        case KeyEvent.KEYCODE_DPAD_RIGHT:
            select(selX + 1, selY);
            break;
        case KeyEvent.KEYCODE_0:
        case KeyEvent.KEYCODE_SPACE:
            setSelectedTile(0);
            break;
        case KeyEvent.KEYCODE_1:
            setSelectedTile(1);
            break;
        case KeyEvent.KEYCODE_2:
            setSelectedTile(2);
            break;
        case KeyEvent.KEYCODE_3:
            setSelectedTile(3);
            break;
        case KeyEvent.KEYCODE_4:
            setSelectedTile(4);
            break;
        case KeyEvent.KEYCODE_5:
            setSelectedTile(5);
            break;
        case KeyEvent.KEYCODE_6:
            setSelectedTile(6);
            break;
        case KeyEvent.KEYCODE_7:
            setSelectedTile(7);
            break;
        case KeyEvent.KEYCODE_8:
            setSelectedTile(8);
            break;
        case KeyEvent.KEYCODE_9:
            setSelectedTile(9);
            break;
        case KeyEvent.KEYCODE_ENTER:
        case KeyEvent.KEYCODE_DPAD_CENTER:
            game.showKeypadOrError(selX, selY);
            break;
        default:
            return super.onKeyDown(keyCode, event);
        }
        return false;
    }
    return false;

} 
```

I am learning java and Android development so please any help as to where I am going wrong will be much appreciated. If anyone needs more information please just ask and I will put it in an edit section for the question.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:32:19.647

WillNZ this is not answer, just to show you how put the log

```
/******Check to see if the game is complete**/
   public boolean isSolved()
   {
       for (int element : puzzle) {
           if (element == 0) return false;
        }
        Log.d("TAG", " isSolved() is true");
        return true;           
   } 
```

Run your application and see if you can see " isSolved() is true" in your logcat.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:18:58.787

In the end the way I checked to see if the game was complete was to have this in the game.class

```
/****** Check to see if the game is complete **/
public boolean isSolved() {
    for (int element : puzzle) {
        if (element == 0)
            return false;
    }
    return true;
} 
```

And also

```
public boolean checkIsSolved()
{
    //check if the game is complete after each valid move
    if (isSolved() == true) { 
        Intent i = new Intent(this, Congratulations.class); 
        startActivity(i);} 
        else
        {
            return false;
        }
    return false;
} 
```

# android - 从对 File.mkdirs() 的调用中删除斜线

> ID：12188948
> 
> 赞同：0
> 
> 时间：2012-08-30T02:03:57.623
> 
> 标签：android, android-sdcard

正如标题所示，我正在尝试在 Android 上创建一个文件夹，但所有的斜线都已从中删除。

***有关更多背景信息：***

具体来说，我正在尝试创建一个目录来存储我的应用程序的用户文件。用户必须可以从文件管理器（例如 File Manager HD）访问这些文件，因为该应用程序不支持完整的文件管理。使用 API 级别 8+ 的标准，我将可公开访问的文件夹的根目录引用为`Environment.getExternalStoragePublicDirectory()`. 然后我尝试**使用**. `File.mkdirs()`有关更多信息，请参阅下面的代码。

***我已经：***

*   检查以确保 SD 卡已安装、可读和可写
*   启用权限`WRITE_EXTERNAL_STORAGE`
*   尝试`File.mkdir()`对层次结构中的每个文件使用直到文件夹位置
*   尝试使用`/`, `\\`, `File.separatorChar`, 和`File.separator`作为文件夹分隔符

***代码：***

```
boolean success = true;

//The public directory
File publicDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
//The location of the sketchbook
File sketchbookLoc = new File(publicDir + "Sketchbook" + File.separator);
//The location of the sketch
//getGlobalState().getSketchName() returns the name of the sketch: "sketch"
File sketchLoc = new File(sketchbookLoc + getGlobalState().getSketchName() + File.separator);

if(!sketchLoc.mkdirs()) success = false;

//Notify the user of whether or not the sketch has been saved properly
if(success)
    ((TextView) findViewById(R.id.message)).setText(getResources().getText(R.string.sketch_saved));
else
    ((TextView) findViewById(R.id.message)).setText(getResources().getText(R.string.sketch_save_failure)); 
```

通过上述测试的各种化身（实际工作的测试），我收到了一致的结果：我在 DCIM 中获得了一个新文件夹，其名称对应于应该是它的分层父级的所有文件夹的组合。换句话说，我创建了一个新目录，但所有文件夹分隔符都已从中删除。

***现在，我问你：***

*   我是否试图将用户数据保存在正确的位置？我应该这样做吗？
*   甚至可以在 DCIM 文件夹中创建新文件夹吗？Android会阻止它吗？
*   这个问题是我特有的吗？其他人可以在 DCIM 文件夹中创建文件夹吗？
*   我是否使用了正确的文件夹分隔符？
*   还有什么我绝对、完全、完全失踪的东西吗？

现在我已经完成了打字，并且您已经阅读了我的（过长的）问题，我希望我能找到某种答案。如果您需要澄清或更多信息，请说出来。

编辑：创建文件夹的一个例子是“DCIMSketchbooksketch”，它应该是“DCIM/Sketchbook/sketch”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:56:25.517

不要使用

```
File sketchbookLoc = new File(publicDir + "Sketchbook" + File.separator); 
```

但

```
File sketchbookLoc = new File(publicDir , "Sketchbook"); 
```

因为 publicDir.toString()**不会**以文件分隔符结尾（即使您以这种方式声明）。toString() 给出文件的规范名称。

* * *

所以你的来源变成：

```
//The location of the sketchbook
File sketchbookLoc = new File(publicDir , "Sketchbook" );
//The location of the sketch
File sketchLoc = new File(sketchbookLoc , getGlobalState().getSketchName() ); 
```

# hook - 低级键盘挂钩适用于 Windows 7 x64 上的一个，而不适用于另一个

> ID：12188958
> 
> 赞同：1
> 
> 时间：2012-08-30T01:40:33.500
> 
> 标签：hook

我在尝试挂​​接键盘时遇到问题（不是键盘记录器！）我正在尝试自动化 Word，然后我正在使用特定的挂钩调用 dll。

我有一台台式机和一台笔记本电脑（两者具有相同的防病毒软件+ windows 7 x64），唯一的区别是笔记本电脑中的windows安装了较新的版本。问题：在笔记本上一切正常。但是在桌面上发生了奇怪的事情：钩子已安装并且如果针对记事本运行良好，但是，当针对 Word 时，虽然已安装钩子，但对外部函数的调用被抑制了！

```
 LRESULT CALLBACK HookProc(int code, WPARAM wParam, LPARAM lParam)
 {
   if (code<0) {
      return CallNextHookEx(HookHandle,code,wParam,lParam);
   }

   bool callNextHook = true;
   if (callFunction != NULL) {
          // ONLY WITH WORD AND ONLY IN THE DESKTOP callFunction SEENS TO BE NULL!!!
          // this is a pointer to a function in main application
      callFunction(code,wParam,lParam,&callNextHook);
   } else {
      ShowMessage("THE UNKNOW ERROR! THIS MESSAGE IS SHOWED, THEN HOOK IS INSTALLED");
   }

   //Call the next hook in the chain
   if (callNextHook) {
      return CallNextHookEx(HookHandle,code,wParam,lParam);
   }

   return 0;
 } 
```

我已经尝试禁用防病毒软件，更改用户帐户控制，以管理员身份运行程序......没有任何效果。是什么导致了这种差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:35:16.763

它可能与注册表中的 LowLevelHooksTimeout 值有关。

在速度更快的机器上，它们可以足够快地处理钩子，并使其低于默认的 200 毫秒以处理超时。在速度较慢的机器上，他们的日子更难过。

对我来说，我必须将这个值从默认值提高到 500 毫秒（0x1F4），以便我的应用程序涉及挂钩，以便在机器之间保持可靠。

要查看更改此注册表值的效果，您必须重新启动计算机。

请参阅此处文档注释中的第四段：

## [LowLevelKeyboardProc 回调函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644985%28v=vs.85%29.aspx)

> 挂钩过程应在比以下注册表项中的 LowLevelHooksTimeout 值中指定的数据条目更短的时间内处理消息：
> 
> HKEY_CURRENT_USER\控制面板\桌面
> 
> 该值以毫秒为单位。如果钩子过程超时，系统将消息传递给下一个钩子。但是，在 Windows 7 及更高版本上，该挂钩会在不被调用的情况下被静默删除。应用程序无法知道挂钩是否被移除。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T11:56:15.607

似乎是 rad studio xe2 中的一个错误，用 xe6 编译钩子 dll 解决了这个问题。有趣的是，有了这个错误和一些额外的代码，可以只用一个 dll 挂钩 32 和 64 程序。这样，我继续使用用 xe2 编译的旧 dll。

# joomla - 如何在组件的另一个视图中加载视图的模板？

> ID：12188960
> 
> 赞同：4
> 
> 时间：2012-08-30T02:06:33.083
> 
> 标签：joomla, joomla2.5

我正在尝试将我制作的视图（表格）添加到我需要再次出现的另一个视图中。我怎样才能做到这一点？实际上，我正在尝试使用 loadtemplate 函数在另一个视图中添加一个视图。

这是我在视图中输入的内容，但它似乎不起作用，有人可以帮忙吗？我收到的消息如下

> 未找到布局 default_reports

```
<div>
     <?php $jinput =  JFactory::getApplication()->input;
           $jinput->set('view', 'reports');
           echo $this->loadTemplate("reports");
           $jinput->set('view', 'master');?>
</div> 
```

但是风景就在那里...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T13:15:22.250

使用该`loadTemplate`函数，我们只调用视图内的布局。

我们在以下视图中使用 loadtemplate 连接两个或多个布局。

默认情况下，joomla 会通过前缀调用布局`default_`。所以我们必须创建一个布局，因为报告意味着文件名，`default_reports.php`但我们需要像你提到的那样调用布局

```
echo $this->loadTemplate("reports"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-27T21:41:57.097

如果您希望能够从当前`view.html.php`文件中的另一个“视图”加载“布局”，那么您可以执行以下操作。

```
$this->addTemplatePath(JPATH_COMPONENT . DIRECTORY_SEPARATOR . 'views' . DIRECTORY_SEPARATOR . 'anotherview' . DIRECTORY_SEPARATOR . 'tmpl');
$this->setLayout('layoutfromanotherview'); 
```

# asp.net - e.Item.FindControl("ID").ClientID 中的错误作为 HtmlSelect

> ID：12188961
> 
> 赞同：0
> 
> 时间：2012-08-30T02:07:19.250
> 
> 标签：asp.net, html-parsing

我有这个错误，不知道似乎是什么错误。

> “无法通过引用转换、装箱转换、拆箱转换、包装转换或空类型转换将类型 'string' 转换为 'System.Web.UI.HtmlControls.HtmlSelect'”

导致上述错误的代码如下：

```
protected void RptFaqsAnswer_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    ...
    (e.Item.FindControl("myselect").ClientID as HtmlSelect).Items[0].Attributes.Add("display", "none");
    ...
} 
```

在 .aspx 页面中，我将此选择标记作为“中继器”的子标记。

```
<asp:Repeater ID="rptFaqsAnswer" runat="server" OnItemDataBound="RptFaqsAnswer_ItemDataBound">
    <select runat="server" id="myselect">
        <option value="c1">Choice 1</option>
        ...
    </select>
</asp:Repeater> 
```

这个错误的原因似乎是什么。

谢谢

Rj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:15:42.613

试试这个

```
e.Item.FindControl("myselect") as HtmlSelect 
```

代替

```
e.Item.FindControl("myselect").ClientID as HtmlSelect 
```

这是`ClientID`您尝试转换的原因，这就是您收到错误的原因

# ios - 在后台线程中绘制 UITablveViewCell，可以吗？

> ID：12188963
> 
> 赞同：0
> 
> 时间：2012-08-30T02:07:35.143
> 
> 标签：ios, tableview

为了在滚动 UItableView 时获得更好的性能。有人建议我在后台线程中绘制单元格。

但是有人说，不建议在后台线程中更新 UI，这会导致应用程序崩溃。

是否可以在后台线程中绘制单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:29:59.953

您可以很好地在后台线程上绘图 - 然后将该绘图捕获为图像并将其发送回主线程；有一个图像视图显示您在背景中绘制的图像。

如果您有权访问 Apple 开发者网站，请观看 WWDC 2012 视频“在 iOS 上构建并发用户界面”。您不想实际布置 UIView 实例等，而只是使用各种 Core Graphics 绘图功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:18:05.137

你不能这样做，每个视图都会在前景时绘制自己，它在背景中什么也不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T02:47:39.247

在后台绘制 UI 不仅**会**崩溃，而且在大多数情况下**会使**应用程序崩溃。

确保您使用`dequeueReusableCellWithIdentifier:`消息来获取单元格。

修改您的`tableView:cellForRowAtIndexPath:`委托以找出消耗最多资源的内容。它可能是 eq 硬 UIImage 处理或类似的东西。您应该考虑将所有处理、生成数据等事情从您的单元创建中移出。仅在单元格中设置适当的数据并返回。我很确定它会大大减少您的性能问题。

# linux - 剪切 -f 2- -d " "

> ID：12188970
> 
> 赞同：1
> 
> 时间：2012-08-30T02:08:52.087
> 
> 标签：linux, bash, find, cut

我经常调用以下脚本

## 清理.sh

```
#!/bin/bash
DEFAULT_LIMIT=10
INPUT=$1
PATTERN=$2
LIMIT=$3

if [ "$INPUT" == "" ] || [ "$PATTERN" == "" ]
then
        echo "usage: $0 INPUT PATTERN [LIMIT]"
        exit 1;
fi
if [ "$LIMIT" == "" ]
then
        LIMIT=$DEFAULT_LIMIT
fi

find /var/project/project1 -maxdepth 1 -type d -name "${INPUT}-${PATTERN}*" -printf '%T@ %p\n'|sort -nr|tail -n+$LIMIT|cut -f 2- -d " "|xargs -i rm -rf {} 
```

所以这个应该删除最后一个但`$LIMIT`带有前缀的目录`$INPUT-$PATTERN`from`/var/project/project1`并且很少出乎意料地（尽管非常重要）它会删除除预期目录之外的目录 from `/var/project/project1`。知道为什么吗？cut 的行为是否为 2- 定义良好？我们可以在 f 和 field# 之间有空格吗？这不是故意编写的，而是一个错误，但不太确定这段代码是否是导致此意外删除的代码。

这很少能重现，因此不确定修复这个（`cut -f2 -d " "`）是否能解决我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:43:39.593

您当前的实现将中断任何有空格的文件。这就是 的性质`xargs`，以及为什么除非使用 -0 （这在您当前的布局中不可能），否则它被认为是危险的。

举个例子，假设一个文件`xargs`被称为“foo bar”。`xargs`会像这样调用 rm ：

```
rm -rf foo bar 
```

它没有删除“foo bar”，而是删除了一个名为的文件`foo`和一个名为`bar`. 如果您将 cut 命令更改为`-f2`而不是`-f2-`，它仍会在带有空格的文件上中断，但只会删除`foo`.

这是一个处理所有可能文件名的示例：

```
#!/bin/bash
input=$1
pattern=$2
limit=${3:-10} # use 10 if $3 is not set

if [[ -z $input || -z $pattern ]]
then
        echo "usage: $0 INPUT PATTERN [LIMIT]"
        exit 1;
fi

dirs=()
while IFS= read -r -d '' latest # \0 is used as a delimiter, since it is not valid in a filename
do 
   dirs+=("$latest") # append files to the array in mtime sorted order, oldest first
done < <(find /var/project/project1 -maxdepth 1 -type d -name "${input}-${pattern}*" -printf '%T@ %p\0' | sort -zn)

dirs=("${dirs[@]#* }") # remove mtime from the elements
rm -rf "${dirs[@]:0:$limit}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:05:21.643

请注意，`echo "one" | cut -f 2 -d " "`即使我们要求第二个字段，它也会显示“一”。

那么，当您调用`cut -f 2- -d " "`并且只有一个字段时，您期望什么？如果没有，则添加该`-s`选项。

换句话说，改变

```
cut -f 2- -d " " 
```

至

```
cut -s -f 2- -d " " 
```

希望能帮助到你。

# jquery - jQuery：迭代子值和布尔值

> ID：12188971
> 
> 赞同：0
> 
> 时间：2012-08-30T02:08:57.580
> 
> 标签：jquery, boolean, each

如果父 td 中的每个 .itemToFilter 子项都未通过测试（因此返回全部 TRUE），则应该执行 alert('hello world')。但事实并非如此！

第一个 IF 语句工作正常，我已经用警报对其进行了测试。但不是第二个。

```
var businessTypePullDownValue = $('.businessTypePullDown').val();

$('.businessTypeRow td').each( function() {

    var foundOne = $(this).children('.itemToFilter').each( function() {                

        if(($(this).attr('value') == businessTypePullDownValue)) {
            return true; 
        }
    });

    if(!foundOne) {
        alert('hello world');
    }

});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T02:11:22.787

返回 inside`true`只是`each`继续下一次迭代。您将需要执行以下操作：

```
var foundOne = false;

$(this).children('.itemToFilter').each( function() {                

    if(($(this).attr('value') == businessTypePullDownValue)) {
        foundOne = true;
        return false;  // break the loop
    }
});

if(!foundOne) {
    alert('hello world');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T02:12:39.947

```
$('.businessTypeRow td').each( function() {
    // get child element which class is itemToFilter and
    // value equals to businessTypePullDownValue
    var $elements = $('.itemToFilter[value="' + businessTypePullDownValue + '"]', this);

    if($elements.length > 0) {
        alert('Hello world');
    }
}); 
```

# c++ - VS2010如何重命名项目名称

> ID：12188975
> 
> 赞同：11
> 
> 时间：2012-08-30T02:09:35.353
> 
> 标签：c++, visual-studio-2010

我必须在 VS2010 中将项目名称从 AAA 重命名为 BBB。我能做些什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-30T03:55:58.530

要重命名项目的每个细节：

1.  在解决方案资源管理器中右键单击并重命名该项目。
2.  右键单击并重命名任何相关的 .cpp 和 .h 文件。
3.  右键单击项目并选择“删除”。确认保存任何更改的文件。
4.  退出 Visual Studio。
5.  重命名项目的目录。
6.  重命名项目的 .vcxproj 和 .vcxproj.filters 文件。
7.  在项目文件夹中搜索文件内容中对旧项目名称的任何引用。典型的地方有：

    *   项目主 .cpp 文件中的注释。
    *   stdafx.cpp 中的注释。
    *   项目的 .vcxproj 文件中的 <RootNamespace> 条目。
8.  启动 Visual Studio 并加载 .sln 文件。

9.  右键单击解决方案并再次添加项目。
10.  对新项目名称进行一些思考，这样您就不必再这样做了 :^)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-30T02:19:52.780

在解决方案资源管理器中选择项目节点，然后再次单击其名称——就像在 Windows 资源管理器中重命名任何内容一样。

# python - 如何使用python中的onkey函数更改列表的位置

> ID：12188978
> 
> 赞同：0
> 
> 时间：2012-08-30T02:09:41.890
> 
> 标签：python, list, turtle-graphics

`shapes = ["square", "triangle", "circle"]`我想用使用 onkey 函数制作的列表来改变海龟的形状。我的意思是每当我按下一个按钮时，例如 h，我将如何制作它，以便每当我按下 h 时它都会穿过每个形状。我将使用该`turtle.shape ()`功能来实现这一点。

到目前为止，我所做的是创建了一个形状列表，但我不知道如何实现我想要实现的下一个目标。

```
 def turtle1 ():
   shapes = ["square", "triangle", "circle", "pentagon", "star", "octagon"]
   shapeiter = itertools.cycle(shapes)
   next(shapeiter)
   1
   shape(next(shapeiter))
   next(shapeiter)
   2
   shape(next(shapeiter))
   next(shapeiter)
   3
   shape(next(shapeiter))
   next(shapeiter)
   4
   shape(next(shapeiter))
   next(shapeiter)
   5
   shape(next(shapeiter))
   next(shapeiter)
   6
   shape(next(shapeiter))

 onkey(turtle1, "h") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:13:59.103

[`itertools.cycle()`](http://docs.python.org/library/itertools.html#itertools.cycle)将让您无限期地循环播放一个序列。

```
>>> t = itertools.cycle((1, 2, 3))
>>> next(t)
1
>>> next(t)
2
>>> next(t)
3
>>> next(t)
1
>>> next(t)
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T06:19:12.230

这个问题似乎没有适当的结束，所以我将尝试这样。

下面是使用基于@IgnacioVazquez-Abrams`itertools.cycle()`的解决方案进行的重写。@Hayden 的原始代码列出了不一定有效的形状，这可能导致他的代码过早退出。我曾经`turtle.getshapes()`获取有效的形状，并且还更改了窗口标题以提供形状名称：

```
import turtle
import itertools

def reshape():
    turtle.shape(next(shape_iterator))

    turtle.title(turtle.shape())

screen = turtle.Screen()

shape_iterator = itertools.cycle(screen.getshapes())

screen.onkey(reshape, "h")

screen.listen()

reshape()

screen.mainloop() 
```

单击窗口使其处于活动状态，然后键入“h”以循环浏览所有内置的海龟形状。

# android - 在Android中设置ListView Alert Dialog的默认选中项

> ID：12188980
> 
> 赞同：10
> 
> 时间：2012-08-30T02:10:30.553
> 
> 标签：android, listview, android-alertdialog

我创建了一个自定义对话框，该对话框`ListView`模拟了一个`Spinner`显示，最初它以“选择性别”值开始。

当对话框打开时，它会提示您进行选择（就像微调器一样）。如果再次选择该选项，它会显示相同的选项，但不指示已选择了哪个选项。

**示例：**
默认值：“选择性别”
对话框打开，没有选择
用户选择：“男性”
用户重新打开对话框...
对话框打开，没有选择

（**我希望它选择“男性”，因为这是他们最后一次选择**）

到目前为止，这是我的代码：

```
genderItems = getResources().getStringArray(R.array.gender_array);
genderAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, genderItems);

genderDrop.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if(event.getAction() == MotionEvent.ACTION_DOWN) {
                Builder genderBuilder = new AlertDialog.Builder(Register.this)
                    .setTitle(R.string.gender_prompt)
                    .setAdapter(genderAdapter, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        inputGender.setText(genderItems[which]);
                        dialog.dismiss();
                    }
                });
                AlertDialog genderAlert = genderBuilder.create();
                genderAlert.show();
                genderAlert.getListView().setSelection(0);
            }
            return false;
        }
}); 
```

`genderAlert.getListView().setSelection(0)` **未设置默认选择**为“男”
`genderAlert.getListView().setSelection(1)` **未设置默认选择**为“女”

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T02:58:08.783

弄清楚了：

我从 which 切换`.setAdapter`到`.setSingleChoiceItems`具有默认选择的参数。然后我所要做的就是创建一个全局变量，每次单击一个选项时都会设置它。全局变量最初设置为 -1，因此没有选择任何选项，然后一旦我点击某个东西，它就会被设置为该位置，下次创建对话框时，选择会反映我之前的选择。见下文：

```
Integer selection = -1;

genderItems = getResources().getStringArray(R.array.gender_array);
genderAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, genderItems);

genderDrop.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if(event.getAction() == MotionEvent.ACTION_DOWN) {
                Builder genderBuilder = new AlertDialog.Builder(Register.this)
                    .setTitle(R.string.gender_prompt)
                    .setSingleChoiceItems(genderAdapter, selection, new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            inputGender.setText(genderItems[which]);
                            selection = which;
                            dialog.cancel();
                        }
                    });
                AlertDialog genderAlert = genderBuilder.create();
                genderAlert.show();
            }
            return false;
        }
}); 
```

# windows - 无法让 MSI 次要升级工作

> ID：12188982
> 
> 赞同：3
> 
> 时间：2012-08-30T02:11:02.493
> 
> 标签：windows, windows-installer, upgrade

当我尝试对我的应用程序进行小升级时，我会启动安装程序，并且（取决于我尝试的设置组合）我会得到：

*   修复/删除对话框
*   提示安装目录

我不相信我应该得到这些提示中的任何一个。我主要期望安装程序自动应用升级而不提示任何内容。我想我在 Visual Studio 安装项目中做的一切都是正确的：

*   将版本从 1.0.0 升级到 1.1.0
*   留下相同的产品代码
*   更新了包代码
*   保留升级代码相同
*   使用参数 REINSTALLMODE=vomus REINSTALL=ALL 启动安装程序

我已经尝试了几乎所有代码/标志和技术的组合，但似乎无法应用更新。

关于我还能尝试什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T16:02:37.500

为了让它工作，我：

*   将版本从 1.0.0 升级到 1.1.0
*   保持产品代码不变（在 Visual Studio 提示时说否）
*   更新了包代码（Visual Studio 自动执行此操作）
*   没有更改升级代码
*   使用参数 REINSTALLMODE=vomus REINSTALL=ALL 启动安装程序

Just as I had indicated in my question, and it seems to be working. I can successfully apply an upgrade. However, when I run the installer I am still prompted with a repair/remove option. But, that's a different question I guess.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:21:55.900

**首先要做的事情**：*您确定您没有在两个 MSI 文件中或在部署工作和测试期间的某个时间点**重新使用包 GUID ？***

尝试使用新的 GUID 重新构建两个 MSI 文件，以将它们与任何现有的缓存版本“分离”，然后再次尝试测试安装。更改包装代码和产品代码。更好的是：在干净的虚拟机上测试这些新版本，以确保正确的测试环境不受过去的罪恶影响。由于包 guid 冲突，您的开发人员系统的 Windows 安装程序数据库中可能有 gremlins。如果是这种情况，包安装就变成了全部 XFiles - 可能会发生最奇怪的事情。

* * *

**更多详细信息**：如果两个 MSI 文件的包 GUID 相同，则 Windows Installer 将根据定义将它们视为相同的文件 - 无论它们包含什么。这可能会导致各种难以清理和调试的奇怪问题。请注意，即使您只是忘记更新一次，也可能会发生这种情况，因为安装 MSI 会导致它缓存在系统上的 C:\Windows\Installer 文件夹中（该文件夹被隐藏并受保护）。如果启动具有相同 GUID 的 MSI 文件，将重新使用此缓存副本（至少早期版本的 Windows Installer 是这种情况 - 现在可能会对此进行修复）。

如果您使用的是 Installshield，您应该启用“始终生成打包 GUID”功能以确保永远不会发生这种情况。包 GUID 应始终针对每个构建进行更改 - 没有任何理由对其进行硬编码。我相信 WIX 会自动生成包 GUID，除非您专门覆盖它。

# java - 为什么我会在同步锁上得到 NullPointerException？

> ID：12188983
> 
> 赞同：6
> 
> 时间：2012-08-30T02:11:14.893
> 
> 标签：java, multithreading, thread-safety

我只有一个“简单”的同步锁块：

```
private final Object screenLock = new Object();

public void Update(double deltaTime)
{
    synchronized (screenLock)
    {
        screenManager.Update(deltaTime);
    }
}

public void Draw()
{
    synchronized (screenLock)
    {
        screenManager.Draw();
    }
} 
```

`deltaTime`不是`null`，`screenManager`不是`null`，所以我有点失落。

我知道我不应该把锁放在这么高的级别上，但是无论我把 Block 放在哪里，问题都仍然存在。我有两个线程运行到`Update`并且`Draw`都使用`screenLock`.

什么会导致`NullPointerException`上锁？

痕迹：

> java.lang.NullPointerException at com.dnx.manavo.ScreenManager.Update(ScreenManager.java:107) at com.dnx.manavo.ApplicationActivity.Update(ApplicationActivity.java:98) at com.dnx.manavo.GameThread.run(游戏线程.java:43)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T02:58:22.527

感谢@Adam Batkin 和@MadProgrammer - 我`NullPointerException`在`screenManager`

我做了一些研究，有时`NullPointerException`会在同步块开始时抛出一个，但实际上它是在块内抛出的。

**其他原因：**

*   `screenLock`一片空白
*   同步块内的代码抛出异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T02:16:43.397

对 NPE 唯一可能的`synchronized (screenLock)`解释`screenlock`是`null`.

检查您正在查看的源代码是否与您实际运行的代码相匹配。

另一种可能性是在其他地方抛出异常。堆栈跟踪应该告诉您异常是在哪里引发的（模数愚蠢......）。

如果这没有帮助，请创建一个演示问题的 SSCE 并将其添加到问题中。

# html - Safari中奇怪的按钮轮廓

> ID：12188988
> 
> 赞同：0
> 
> 时间：2012-08-30T02:12:09.853
> 
> 标签：html, css, safari

我的网站在 Safari 上出现问题（仅在 Safari 上）。如果您在 Safari 中访问 luckyskins.com 并将鼠标悬停在导航栏中的任何元素上，则在您停止悬停后，每个按钮周围都会留下一个小轮廓。这在 Firefox 或 Chrome 中不会发生。任何想法这可能是什么？

这是一个按钮悬停在上面时的样子：http: [//cl.ly/image/133m0Z3Q3Q2m](http://cl.ly/image/133m0Z3Q3Q2m)

这是从按钮上移除鼠标后的样子：http: [//cl.ly/image/1P112U063904](http://cl.ly/image/1P112U063904)

该大纲不应该存在，并且不会出现在除 Safari 之外的任何其他浏览器上。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T03:27:07.523

设置按钮样式时，只需添加行

```
* {
outline: none;
} 
```

那应该摆脱它。如果不是，那就奇怪了。

* 指的是 Safari 或任何浏览器提供大纲的所有内容，因此不会。在代码中的某处添加它，它应该可以解决问题。

# php - 图像按钮在 Internet Explorer 上不起作用

> ID：12188990
> 
> 赞同：1
> 
> 时间：2012-08-30T02:12:15.850
> 
> 标签：php, html

> **可能重复：**
> [输入类型=图像名称和值未由 ie 和 opera 发送](https://stackoverflow.com/questions/2357184/input-type-image-name-and-value-not-being-sent-by-ie-and-opera)

我对 PHP/HTML 很陌生（这是我第一次使用它），我正在做一个小项目，为我的世界玩家制作动态签名。这个小的 php 脚本可以在 ipad 上与 google chrome、firefox 甚至 safari 配合使用。然而，当我在 Internet Explorer 上测试它时，它不起作用。

我已经在 pastebin 上发布了我的代码，因为有很多： http: [//pastebin.com/nsyQ4B6q](http://pastebin.com/nsyQ4B6q)

似乎错误发生在第 44 行。没有实际错误，但这就是在 IE 上不起作用的错误。

Google Chrome 上的最终输出是：/index.php?player=Notch&img.x=183&img.y=54&img=1Dirt.png 并且签名正确加载。

Internet Explorer 上的最终输出为：index.php?player=Notch&img.x=56&img.y=51

似乎是 &img=1Dirt.png 的任务，没有任何反应，页面保持不变。

# ruby-on-rails - 如何让 rails 路由助手始终使用 to_param 生成路径，即使我只是传入 ActiveRecord ID？

> ID：12188998
> 
> 赞同：1
> 
> 时间：2012-08-30T02:14:45.530
> 
> 标签：ruby-on-rails, activerecord, seo, routes, helpers

因此，我正在为我的 rails 应用程序实现一个漂亮/SEO 友好的 URL 方案。我有一个名为 Artist 的模型，我希望 Rails`artist_path`助手始终生成友好版本的路径。

在我的 routes.rb 文件中，我有以下行：

```
 get 'artists/:id(/:slug)', :to => 'artists#show', :as => 'artist' 
```

如果 slug 被遗漏或不正确（它由艺术家姓名计算），则控制器 301 重定向到正确的 URL。但是，出于 SEO 的原因，我想确保我网站内部的所有链接都具有正确的起始 URL。

Artist 模型具有以下两个（非常简单的）功能以使其工作：

```
 def slug
    name.parameterize
  end

  def to_param
    "#{id}/#{slug}"
  end 
```

如果我`artist_path`用艺术家对象调用，这将按预期工作：

```
> app.artist_path(Artist.find 1234)
=> "/artists/1234/artist-name" 
```

但是，当我只使用 ID 调用它时，它似乎根本没有使用 to_param：

```
> app.artist_path(id: 1234)
=> "/artists/1234" 
```

tl;dr：**如何强制 Rails 始终实例化对象并在调用`to_param`时调用它`artist_path`，即使只指定了 ID？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:22:17.297

据我所知，您所问的原因不起作用是因为当您将值传递给内置/自动 URL 帮助程序（如您的示例中的 ID）时，这些值只会得到用于在路由 URL 中“填空”。

如果您传递一个数组，则数组中的值将按顺序使用，直到 URL 被填写。如果您传递一个哈希，这些属性将被替换到 URL 中。一个对象，比如你的模型，将使用它的 to_param 方法来填充值......等等。

我理解您对“了解该模型的局限性”的担忧，但是，这种行为在 Rails 中是标准的，我不相信它真的会丢掉任何人。当您传入一个 ID 时，就像在您的示例中所做的那样，您并没有告诉 URL 帮助程序“使用此 ID 通过模型查找记录”，您只是告诉它“替换 ':id' 在带有您提供的 ID 的 URL 字符串。” 我相当确定内置的 URL 帮助程序甚至不知道如何查找记录 - 使用什么模型等 - 除了可能从路由/控制器名称推断。

我最好的建议是始终使用实例化的模型/记录。如果您希望 URL 帮助程序为您查找，那么就查询数据库而言，没有额外的开销。如果还有其他原因您想避免自己实例化记录，我很高兴听到它并可能提供其他建议。

# jquery - 如何找到/匹配对象集合的名称？

> ID：12188999
> 
> 赞同：0
> 
> 时间：2012-08-30T02:15:01.743
> 
> 标签：jquery, jquery-plugins

我有一个 jquery 集合 $("#Users") ，其中包含一个带有名称的字符串：

```
'Bob Beffer, Eddie Queen' 
```

我想将此与另一个（gridrow）集合匹配：

```
string[] rowObject 
```

说`rowObject[1]`包含名称当我循环遍历数组时，如何匹配/查找 rowObject 数组中的名称？我试过：

```
if ($("#Users").val().find(rowObject[1]) != null) { 
```

..ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T02:33:40.023

尝试以下操作：

```
var rowObject = [ "Bob Beffer", "Another name", "And another" ];
var names = $("#Users").val().split(", "); // Bob Beffer, Eddie Queen
var filteredNames = $.grep(names, function (name) {
  return ~rowObject.indexOf(name); 
}); 
```

`filteredNames`然后将只包含`Bob Beffer`因为`Eddie Queen`不存在于`rowObject`.