# StackOverflow 问答 11769000-11769999

# javascript - 无法从日期对象javascript获取日期和月份

> ID：11769001
> 
> 赞同：0
> 
> 时间：2012-08-01T23:26:36.357
> 
> 标签：javascript, arrays

我无法从这样的日期对象中获取月份和日期：“2009/12/30”

控制台中给出的错误是：TypeError: created_at.getMonth is not a function

```
 function search(){
    var value = $('#box').val();
    var array=[];
    var dateArray = [];
    var datesString;
    if (value!==""){$.getJSON("http://search.twitter.com/search.json?callback=?&q=value&rpp=5",
      function(data){

   $.each(data.results, function(i, item){
       var user=item.from_user;
      var created_at=item.created_at;
      var n=created_at.toString();
       var month=n.getMonth();
      var day = n.getDate();
      var year = n.getFullYear();
      var created=month+day+year;
      array.push({date:created,username:user});
     }); 
```

任何人都知道问题是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:42:22.740

JSON 不直接支持值，因此 Twitter 将每个值`Date`序列化为您首先必须解析的值：`created_at``String`

```
var user = item.from_user;
var created_at = new Date(item.created_at); 
```

然后，您可以使用[`Date`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/#Methods_2)从中获取信息：

```
var month = created_at.getMonth();
var day = created_at.getDate();
var year = created_at.getFullYear(); 
```

此外，如果`created`打算`Date`在午夜进行，请尝试以下操作：

```
var created = new Date(year, month, day); 
```

# powershell - get-winevent 高级属性和提供者 xml 模板

> ID：11769004
> 
> 赞同：2
> 
> 时间：2012-08-01T23:26:42.770
> 
> 标签：powershell

我正在尝试从 get-winevent 命令中获取一些（高级？）属性。

我正在处理 Windows-Server-Backup 事件。

我可以获得属性的数据和 xml 模板，但我看不到将它们干净地结合在一起的方法。

最终我喜欢有一个结果，我可以有 event.properties.BackupState 或 event.properties.NumOfVolumes 等。

```
$EventSource = 'Microsoft-Windows-Backup'
$provider = Get-WinEvent -listprovider $EventSource
$ProviderEvent = $provider.events | Where-Object {($_.ID -eq 4) -and ($_.Version -eq 2)}
$ProviderEvent.Template 
```

上面的块给了我这个结果；

```
<template xmlns="http://schemas.microsoft.com/win/2004/08/events">
   <data name="BackupTemplateID" inType="win:GUID" outType="xs:GUID"/>
   <data name="HRESULT" inType="win:UInt32" outType="xs:unsignedInt"/>
   <data name="BackupState" inType="win:Int32" outType="xs:int"/>
   <data name="BackupTarget" inType="win:UnicodeString" outType="xs:string"/>
   <data name="NumOfVolumes" inType="win:UInt32" outType="xs:unsignedInt"/>
   <data name="BackupTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="HRESULT2" inType="win:UInt32" outType="xs:unsignedInt"/>
   <data name="VolumesInfo" inType="win:UnicodeString" outType="xs:string"/>
   <data name="DetailedHRESULT" inType="win:UInt32" outType="xs:unsignedInt"/>
   <data name="SourceSnapStartTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="SourceSnapEndTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="PrepareBackupStartTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="PrepareBackupEndTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="BackupWriteStartTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="BackupWriteEndTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="TargetSnapStartTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="TargetSnapEndTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="DVDFormatStartTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="DVDFormatEndTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="MediaVerifyStartTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="MediaVerifyEndTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="BackupPreviousState" inType="win:Int32" outType="xs:int"/>
   <data name="ComponentStatus" inType="win:UnicodeString" outType="xs:string"/>
   <data name="SSBEnumerateStartTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="SSBEnumerateEndTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="SSBVhdCreationStartTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="SSBVhdCreationEndTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="SSBBackupStartTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="SSBBackupEndTime" inType="win:FILETIME" outType="xs:dateTime"/>
   <data name="SystemStateBackup" inType="win:UnicodeString" outType="xs:string"/>
   <data name="BMR" inType="win:Boolean" outType="xs:boolean"/>
   <data name="VssFullBackup" inType="win:Boolean" outType="xs:boolean"/>
   <data name="UserInputBMR" inType="win:Boolean" outType="xs:boolean"/>
   <data name="UserInputSSB" inType="win:Boolean" outType="xs:boolean"/>
   <data name="BackupSuccessLogPath" inType="win:UnicodeString" outType="xs:string"/>
   <data name="BackupFailureLogPath" inType="win:UnicodeString" outType="xs:string"/>
   <data name="EnumerateBackupStartTime" inType="win:UnicodeString"           outType="xs:string"/>
   <data name="EnumerateBackupEndTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="PruneBackupStartTime" inType="win:UnicodeString" outType="xs:string"/>
   <data name="PruneBackupEndTime" inType="win:UnicodeString" outType="xs:string"/>
</template> 
```

展开相关事件让我得到数据

```
$event2 | Select-Object -ExpandProperty properties

Value
-----
8ff4875f-defb-4f0c-bfda-8ab38fc58f07
0
14
IT-BTes 2012_07_26 08:05 DISK_01
1
1/08/2012 10:30:02 AM
0
<VolumeInfo><VolumeInfoItem Name="E:" OriginalAccessPath="E:" State="14" HResult="0"     DetailedHResult="0" PreviousState="9" IsCritical
0
1/08/2012 10:30:02 AM
1/08/2012 10:30:05 AM
<TimesList><Time Time="2012-08-01T00:30:07.234Z" /></TimesList>
<TimesList><Time Time="2012-08-01T00:30:07.234Z" /></TimesList>
<TimesList><Time Time="2012-08-01T00:30:07.234Z" /></TimesList>
<TimesList><Time Time="2012-08-01T00:30:07.906Z" /></TimesList>
1/08/2012 10:30:09 AM
1/08/2012 10:30:09 AM
<TimesList></TimesList>
<TimesList></TimesList>
<TimesList></TimesList>
<TimesList></TimesList>
11
<ComponentStatus></ComponentStatus>
1/01/1601 11:00:00 AM
1/01/1601 11:00:00 AM
1/01/1601 11:00:00 AM
1/01/1601 11:00:00 AM
1/01/1601 11:00:00 AM
1/01/1601 11:00:00 AM
<SystemState IsPresent="0" HResult="0" DetailedHResult="0" />
False
False
False
False

<TimesList><Time Time="1601-01-01T00:00:00.000Z" /></TimesList>
<TimesList><Time Time="1601-01-01T00:00:00.000Z" /></TimesList>
<TimesList><Time Time="1601-01-01T00:00:00.000Z" /></TimesList>
<TimesList><Time Time="1601-01-01T00:00:00.000Z" /></TimesList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:11:35.020

试试看嘛 ：

```
$a = [xml]$event2.toxml()
$a.Event.EventData.Data
$guid = $a.Event.EventData.Data | where {$_.name -eq "BackupTemplateID"}
$guid.InnerText 
```

# utf - 如何将 MS word Unicode 2-byte Cyrillic 转换为 CP866 1-byte Cyrillic

> ID：11769005
> 
> 赞同：0
> 
> 时间：2012-08-01T23:26:46.367
> 
> 标签：utf

我在使用仅包含 Cyrillic 的 CP866 库/代码页的硬件时遇到问题。我要显示的文本当前在 MS Word 中，我需要将其转换为文本文件中的 CP866。（我知道它只会变得更糟！）

我知道 MS Word 使用 Unicode 来显示 Cyrillic，如果我没记错的话，它使用 UTF-16。因此，如果我尝试将其复制到 NP++（据我所知仅使用 UTF-8），则 HEX 值会发生变化。

例如 'й' 的 HEX 值：UTF-16 是 0439 但 UTF-8 是 d0b9 但我需要的是 CP866 HEX 89。

现在我希望我可以使用不同的硬件，但它就是这样。有谁知道实现这一目标的最佳方法？也许有人可以建议一个不同的文本编辑器。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:49:26.697

我想我想通了。

打开 .doc 文件，转到主要圆形办公室按钮下的 Word 选项。高级选项卡 -> 常规选项卡 -> 选中打开时确认文件格式转换。点击确定。关闭那个文件

重新打开 .doc 文件。另存为，将类型更改为计划文本（.txt），应该会弹出文件转换。选择西里尔文 (DOS)。单击确定。关于某些内容的新弹出窗口可能不会显示，等等等等……单击是。

关闭文件。

转到文件并在 NP++ 中打开它。一切看起来都很奇怪，因为它现在显示基于 ANSI 映射的格式......但是，十六进制值似乎（我还没有完全验证）是正确的 CP866。现在我可以加载我的硬件了。

我将再为此工作一两天。如果这不能正常工作，我会报告。

请假一天，稍后再回来。它似乎总是有效。希望这可以帮助其他可能遇到类似问题的人。

最好的！

# cocos2d-iphone - Cocos2D 2.0 - 截屏期间的奇怪行为

> ID：11769006
> 
> 赞同：0
> 
> 时间：2012-08-01T23:26:55.477
> 
> 标签：cocos2d-iphone

我有一个基于图层的类，其中包含两个子精灵。让我们称它们为：背景和树。

在这个类中，我有一个方法来捕获该层的屏幕截图。该方法工作正常。每次我对该图层进行截图时，我都会获得背景上树的构成。美好的。在某一点上，我想获得没有树的那层的屏幕截图。所以我要做的是，隐藏树，截取屏幕截图并再次显示树......就像这样：

```
[myLayer hideTree];
UIImage *screenshot = [myLayer screenshot];
[myLayer showTree]; 
```

令我惊讶的是，以这种方式生成的屏幕截图总是包含树。

这是 hideTree 和 showTree：

```
- (void) hideTree {
    [treeLayer setOpacity:0];
    // I have also tried [treelayer setVisible:NO];
}

- (void) showTree {
    [treeLayer setOpacity:255];
    // I have also tried [treelayer setVisible:YES];
} 
```

我正在使用这种方法进行截图，来自 cocos2d 论坛：

```
-(UIImage*) screenshot
{
    CGSize displaySize  = [[CCDirector sharedDirector] winSize];
    CGSize winSize      = [self winSize];

    //Create buffer for pixels
    GLuint bufferLength = displaySize.width * displaySize.height * 4;
    GLubyte* buffer = (GLubyte*)malloc(bufferLength);

    //Read Pixels from OpenGL
    glReadPixels(0, 0, displaySize.width, displaySize.height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);
    //Make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer, bufferLength, NULL);

    //Configure image
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * displaySize.width;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;
    CGImageRef iref = CGImageCreate(displaySize.width, displaySize.height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    uint32_t* pixels = (uint32_t*)malloc(bufferLength);
    CGContextRef context = CGBitmapContextCreate(pixels, winSize.width, winSize.height, 8, winSize.width * 4, CGImageGetColorSpace(iref), kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

    CGContextTranslateCTM(context, 0, displaySize.height);
    CGContextScaleCTM(context, 1.0f, -1.0f);

    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    switch (orientation)
    {
        case UIDeviceOrientationPortrait: break;
        case UIDeviceOrientationPortraitUpsideDown:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(180));
            CGContextTranslateCTM(context, -displaySize.width, -displaySize.height);
            break;
        case UIDeviceOrientationLandscapeLeft:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(-90));
            CGContextTranslateCTM(context, -displaySize.height, 0);
            break;
        case UIDeviceOrientationLandscapeRight:
            CGContextRotateCTM(context, CC_DEGREES_TO_RADIANS(90));
            CGContextTranslateCTM(context, displaySize.width * 0.5f, -displaySize.height);
            break;
        case UIDeviceOrientationUnknown:
            break;
        case UIDeviceOrientationFaceUp:
            break;
        case UIDeviceOrientationFaceDown:
            break;
    }

    CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, displaySize.width, displaySize.height), iref);
    CGImageRef imageRef = CGBitmapContextCreateImage(context);
    UIImage *outputImage = [UIImage imageWithCGImage:imageRef];

    //Dealloc
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGImageRelease(iref);
    CGColorSpaceRelease(colorSpaceRef);
    CGContextRelease(context);
    free(buffer);
    free(pixels);

    return outputImage;
} 
```

我错过了什么？为什么树总是出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:31:08.313

您的代码在游戏循环的更新过程中运行。

屏幕截图正在获取用于创建 UIImage 的当前像素。

当您告诉树不可见或不透明度为零时，直到下一个绘制周期才会生效。

要解决您的问题，您需要隐藏树，执行绘制循环，然后在下一次更新中捕获未显示树的帧。

说得通？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:37:43.093

当您更改树的不透明度时，它只会在下次屏幕更新时生效。

一旦我遇到了这个问题，我就做了一些时间表。代替

```
[myLayer hideTree];
UIImage *screenshot = [myLayer screenshot];
[myLayer showTree]; 
```

做

```
[myLayer hideTree];
[self schedule:@selector(takeScreenshot)interval:0.05]; 
```

并将以下方法添加到您的场景中：

```
-(void)takeScreenshot {
    [self unschedule:@selector(takeScreenshot)];
    UIImage *screenshot = [myLayer screenshot];
    [myLayer showTree];
} 
```

基本上，我们设置了 0.05 秒的间隔以允许屏幕更新。那应该行得通。

上面的方法对我有用，但我认为如果你`[self visit]`在隐藏树后调用它也可以。但我从未测试过。

# c# - C# SQLite - 读取时不强制转换数据

> ID：11769007
> 
> 赞同：0
> 
> 时间：2012-08-01T23:27:09.850
> 
> 标签：c#, sqlite

我在 c# 中成功地从 SQLite 数据库中读取数据。

我的问题来自以下几点：

我利用 SQLite 的软类型方面的优势，通过将某些整数值更新为它们所代表的字符串来节省时间。

整个过程完美运行，但现在我意识到 SQLiteCommand 中的库实际上似乎将数据重铸为 int，因此破坏了我的结果集。

有没有解决的办法？

这似乎是可能的，因为我使用 SQLiteMan 来查看我的数据并且在这里完美地维护了转换，但我知道这是在 c++ 中。

谢谢指点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:47:17.907

尝试将您的 SQLite 字段设置为 TEXT 亲和性。见[http://www.sqlite.org/datatype3.html#affinity](http://www.sqlite.org/datatype3.html#affinity)

# iphone - FaceBook 应用程序请求仅显示在网站上，但不显示在 FB 应用程序上

> ID：11769008
> 
> 赞同：2
> 
> 时间：2012-08-01T23:27:12.813
> 
> 标签：iphone, objective-c, facebook, facebook-app-requests

我正在使用以下代码从我的 iphone 应用程序发送应用程序请求：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"Join my app",  @"message", [NSString     stringWithFormat:@"%@", [[filteredContacts objectAtIndex:path] valueForKey:@"id"]] ,@"to",
                               nil];

    [facebook dialog:@"apprequests"
       andParams:params
     andDelegate:self]; 
```

而 [[filteredContacts objectAtIndex:path] valueForKey:@"id"] 返回一个 facebook ID 值。

当我的一个 FB 朋友收到请求时，他可以在他的 facebook 的通知部分看到它——但只能在网站本身上看到。当试图在 facebook iphone 应用程序中找到它时 - 它只是不存在。此外，它在移动网站上找不到。

我怎么可能只在网站上看到通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:18:22.517

答案很简单——当我将它创建为 FB 应用程序时，我应该将它定义为移动应用程序。

# sql - SQL DELETE 语句语法

> ID：11769011
> 
> 赞同：0
> 
> 时间：2012-08-01T23:27:36.917
> 
> 标签：sql, vb.net, sql-delete

尝试执行删除查询并收到以下错误

> 查询表达式“cname VALUES @cname”中有语法错误（缺少运算符）。

代码

```
Dim conn As OleDbConnection = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & My.Settings.strFileName)
conn.Open()
Dim cmdText = "DELETE FROM products WHERE cname VALUES @cname"
Dim cmd As OleDbCommand = New OleDbCommand(cmdText, conn)
With cmd.Parameters
  .Add(New OleDbParameter("@cname", DataGridView1.Item("cname", i).Value))
End With
Dim dt As New DataTable("products")
cmd.ExecuteNonQuery()
conn.Close()
conn = Nothing 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T23:28:44.607

你需要一个接线员

```
DELETE FROM products WHERE cname = @cname 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T23:29:05.590

您编写删除语句的方式不正确。

你应该这样写：

```
Dim cmdText = "DELETE FROM products WHERE cname = @cname" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-12T14:49:15.443

并且`delete all`要从具有特定 的表中记录`ID`，您只需；

```
deleteMore:
DELETE TOP(100) TableName WHERE toDelete='17'
IF @@ROWCOUNT != 0
    goto deleteMore: 
```

这将删除前 100 条记录，并重复删除，直到所有记录`17`都消失。

# matlab - excel写入与m文件相同的文件夹

> ID：11769015
> 
> 赞同：1
> 
> 时间：2012-08-01T23:28:07.713
> 
> 标签：matlab

我有一个 m 文件，它使用`xlswrite`. 如果我没有指定要输出 xls 的文件夹，则默认为 users 文件夹。我希望它与 m 文件位于同一文件夹中。有没有办法在不显式输入 m 文件位置的情况下对此进行概括？我计划分发这个 m 文件，并不是每个人都会将他们的 m 文件保存在同一个文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:53:01.683

要获取存储运行 m-file 的路径，请查看：

```
help mfilename
help fileparts 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T23:55:56.737

您可以简单地使用当前工作文件夹作为保存位置。这就是 matlab 窗口中的“当前目录”。

您可以使用命令访问它`pwd`。这将返回一个字符串，它是目录的路径。

然后附加`\filename.ext`到它，你会很高兴的！

# python - 是否可以覆盖从对象派生的`__name__`？

> ID：11769020
> 
> 赞同：6
> 
> 时间：2012-08-01T23:28:54.183
> 
> 标签：python, mocking

要获得我们可以使用的类名的字符串表示形式，`obj.__class__.__name__`是否可以重载这些方法，以便我可以返回我的字符串而不是实际的类名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T23:33:10.503

咱们试试吧！（是的，这有效）：

```
>>> class Foo(object):
...     pass
...
>>> obj = Foo()
>>> obj.__class__.__name__ = 'Bar'
>>> obj
<__main__.Bar object at 0x7fae8ba3af90>
>>> obj.__class__
<class '__main__.Bar'> 
```

您也可以刚刚完成`Foo.__name__ = 'Bar'`，我曾经`obj.__class__.__name__`与您的问题一致。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T23:32:05.137

是的。

```
class A:
    def __init__(self):
        self.__class__.__name__ = 'B' 
```

但这似乎是个坏主意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T23:34:48.440

你可以这样做：

```
>>> class Foo(object):
...     def __init__(self):
...             self.__class__.__name__ = "Bar"
... 
>>> print Foo().__class__.__name__
Bar 
```

或者您可以制作自己的双下划线属性。

```
>>> class Foo(object):
...     __name__ = "Bar"
... 
>>> print Foo().__name__
Bar 
```

但是你为什么要这样做呢？我看不出有任何可能的用途。顺便说一句，我意识到这与 不一样`__class__.__name__`，但我认为改变`__class__.__name__`通常不是一个好主意。

# r - 日期导入，世纪不正确

> ID：11769022
> 
> 赞同：3
> 
> 时间：2012-08-01T23:29:07.367
> 
> 标签：r, date

我有一堆我正在解析的日期，格式为“%m/%d/%y”。`as.Date(dates, format = "%m/%d/%y")`将“1/01/64”之类的日期转换为“2064-01-01”，但我需要将其设为“1964-01-01”。我想我可以找到年份是未来的例子，然后减去一个世纪，但这似乎有点荒谬。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:53:18.783

日期在内部存储为整数天，因此在输入或输出时只有这样的格式。至于没有世纪信息的输入，我认为你不走运。以下是 ?strptime 关于 %y 格式规范的说明：“在输入时，值 00 到 68 以 20 为前缀，而 69 到 99 以 19 为前缀——这是 2004 年和 2008 年 POSIX 标准指定的行为，但他们也说 '预计在未来的版本中，从两位数年份推断的默认世纪将发生变化'。”

```
 as.Date( "01/01/64", "%m/%d/%y", origin="1970-01-01") -100*365.25
  #[1] "1964-01-01" 
```

鉴于 Y2K 在过去如此之近，可能会针对允许删除世纪信息的程序员发起一场酒吧之战。

由于默认假设 00-68 年为 2000-2068，因此当然可以创建 as.Dateshift

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-20T20:29:05.467

修复日期的另一种方法是将未来发生的所有年份（相对于使用 Sys.Date() 的今天日期）更改为以 19 而不是 20 开头。

```
dates=as.Date(c("01/01/64", "12/31/15"))
# [1] "2064-01-01" "2015-12-31" ## contains an incorrect date

## Now correct the dates that havn't yet occurred
as.Date(ifelse(dates > Sys.Date(), format(dates, "19%y-%m-%d"), format(dates)))
#[1] "1964-01-01" "2015-12-31" 
```

# google-maps - 仅以纯色显示 Google 地图

> ID：11769023
> 
> 赞同：2
> 
> 时间：2012-08-01T23:29:18.337
> 
> 标签：google-maps

我想知道是否有一种方法可以输出地图（使用 Google Maps Static API）以仅使用纯色显示地图颜色。也就是说，没有任何颜色的深浅不同。例如，默认情况下，小路为纯白色，大路为纯黄色（没有黄色阴影），高速公路为纯橙色。

我需要制作一个占用网格图，并计划用地图的颜色制作它，而不是在 matlab 等中绘制它。

我可以澄清您对我的问题可能有的任何疑问。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:38:36.247

不久前，我操纵了一些地图配色方案。

我创造了这个可能对你有用的小提琴..

[http://jsfiddle.net/motocomdigital/6hsAe/](http://jsfiddle.net/motocomdigital/6hsAe/)

然后参考了这个向导，它帮助我得到了我想要的结果..

[http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)

不能 100% 确定您是否能够做您想做的事，但这可能会有所帮助。

# ios - 如何在 iOS 中检索应用程序的图标？

> ID：11769025
> 
> 赞同：0
> 
> 时间：2012-08-01T23:29:38.120
> 
> 标签：ios, icons, process

我能够使用以下代码获取所有正在运行的进程..

```
for (i = 0; i < nprocs;  i++) {
        printf("%5d\t%s\n",(int)procs[i].kp_proc.p_pid, procs[i].kp_proc.p_comm);
    } 
```

我看到一些应用程序，例如，`MobileSMS`我想放置它们的图标，但我不知道如何检索它们。任何有关此的帮助将不胜感激。`Camera``MobileMail`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:08:36.380

我不相信在未越狱的手机上可以做到这一点。

即使是这样，我也不认为这是正确的做法。您应该联系这些应用程序的制造商，并询问他们是否可以在您的应用程序中使用他们的图标。他们可能会对额外的曝光感到高兴，并可能会为您提供艺术品。

# .net - 识别哪个本机方法导致内存泄漏

> ID：11769029
> 
> 赞同：0
> 
> 时间：2012-08-01T23:30:00.863
> 
> 标签：.net, oracle, memory, memory-leaks, ado.net

我正在调试 ASP.NET Web 应用程序中的 OOM 问题。使用性能计数器，发现非托管空间存在问题。因此，我使用 Debugdiag 生成转储并从中创建内存压力分析报告。

* * *

概括：

oracommon10.dll 负责 270.16 MB 的未完成分配。

最大内存消耗函数：oracommon10!sktsfMalloc+c：270.16 MB 的未完成分配。

功能：oracommon10!sktsfMalloc+c

分配类型 C/C++ 运行时分配

分配计数 455 个分配

分配大小 270.16 MB

泄漏概率 95%

* * *

从下面的调用堆栈示例（我在最顶级的 .Net 调用之后包含了本机调用），有人可以帮助我理解这一点吗？我假设这可能是 Oracle 连接之一未关闭的问题。

* * *

```
Function            Source              Destination
oracommon10!sktsfMalloc+c                           msvcr71!malloc 
orageneric10!kghaex+5ef       
ntdll!ZwSetEventBoostPriority+c       
ntdll!RtlpUnWaitCriticalSection+22
OraClient10!kpuinit0+a5c       
OraClient10!kpuenvcr+ea
OraClient10!OCIEnvCreate+3d
oci!OCIEnvCreate+2a
0x1CE2A1F       
mscorwks+3ad8       
System.Data.OracleClient.OciHandle..ctor(System.Data.OracleClient.OciHandle, HTYPE, MODE, HANDLEFLAG)       
System_Data_OracleClient_ni+e1d38       
System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(System.Data.Common.DbConnection, System.Data.ProviderBase.DbConnectionPool, System.Data.Common.DbConnectionOptions)       
System.Data.OracleClient.OracleConnection.Open()       
Microsoft.Practices.EnterpriseLibrary.Data.Database.GetNewOpenConnection()       
Microsoft.Practices.EnterpriseLibrary.Data.Database.GetOpenConnection(Boolean)
Microsoft.Practices.EnterpriseLibrary.Data.Database.ExecuteReader(System.Data.Common.DbCommand)
Microsoft.Practices.EnterpriseLibrary.Data.Oracle.OracleDatabase.ExecuteReader(System.Data.Common.DbCommand)
MyDAL.MyMethod(System.String, System.String, Int32) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:11:59.193

如果你读过这样的帖子，

[http://blogs.msdn.com/b/tess/archive/2009/02/03/net-memory-leak-to-dispose-or-not-to-dispose-that-s-the-1-gb-问题.aspx](http://blogs.msdn.com/b/tess/archive/2009/02/03/net-memory-leak-to-dispose-or-not-to-dispose-that-s-the-1-gb-question.aspx)

您将看到确定构建完整图像所需的罪魁祸首。泄漏跟踪规则只能帮助您更好地了解非托管资源是如何被吃掉的，但要分析它发生的原因，需要进行彻底的分析。

我的理解是，

1.  我们还不能就“一个未关闭的 Oracle 连接”得出结论，因为调用堆栈没有表明这一点。
2.  如果没有关于其他线程、托管堆等的所有信息，则无法进一步讨论。
3.  如果没有 Oracle 符号，从本机方面也很难分辨。

因此，我对您的建议是通过[http://support.microsoft.com](http://support.microsoft.com)打开一个支持案例并与 Microsoft 支持团队共享转储。他们在此类问题上有更多的经验。

# java - 如何创建返回 xml 和 json 的 web 服务函数？

> ID：11769031
> 
> 赞同：2
> 
> 时间：2012-08-01T23:30:02.953
> 
> 标签：java, jpa, jersey, eclipselink, jax-rs

我创建了一个网络服务功能：

```
@GET
@Path("getusers/")
@Produces({"application/xml","application/json"})
public Object getUsers()
{
    String distanceQuery="SELECT UGL.user_id,UP.fname,UGL.mlatitude,UGL.mlogitude,UGL.mlogitude from user_gps_location UGL,user_profile UP where UGL.user_id=UP.user_id";
    Query queryResult=em.createNativeQuery(distanceQuery);

    userList=queryResult.getResultList();
    return userList;
} 
```

该函数返回一个结果列表：如果我在选择 application/json 选项时使用浏览器对其进行测试，它可以正常工作：

结果：

```
[[1,"Ankit",37.334542,-121.890821,-121.890821],
[1,"Ankit",37.337749,-121.886702,-121.886702],
[1,"Ankit",37.336453,-121.884985,-121.884985],
[1,"Ankit",37.336453,-121.884985,-121.884985],
[1,"Ankit",37.336453,-121.884985,-121.884985],
[1,"Ankit",32.727798,-117.15683,-117.15683],
[1,"Ankit",37.334541666666674,-121.89081999999999,-121.89081999999999],
[1,"Ankit",37.33774833333334,-121.88670166666667,-121.88670166666667],
[1,"Ankit",37.33774833333334,-121.88670166666667,-121.88670166666667],
[1,"Ankit",37.334541666666674,-121.89081999999999,-121.89081999999999],
[1,"Ankit",37.334541666666674,-121.89081999999999,-121.89081999999999],
[1,"Ankit",37.33774833333334,-121.88670166666667,-121.88670166666667],
[2,"Niharika",37.334541666666674,-121.88670166666667,-121.88670166666667],
[2,"Niharika",37.334541666666674,-121.88670166666667,-121.88670166666667]] 
```

但是当我选择“应用程序/xml”时，它给了我一个错误：

```
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class java.util.Vector, and Java type class java.util.Vector, and MIME media type application/xml was not found 
```

谁能帮助我并告诉我它有什么问题？

另外我怎样才能返回一个格式良好的结果，如下所示？

```
<id>1</id>
<name>Ankit</name> 
```

我知道我需要为它使用一个类，但由于这是一个本机查询，我使用两个表并返回一个结果列表，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:02:40.133

尝试改变

```
public Object getUsers() 
```

至

```
public List<MyObjectType> getUsers() 
```

匹配类型 userList。

另外，确保`@XMLRootElement`域类上存在注释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:06:46.997

我曾经遇到过类似的问题。问题的原因是我缺少一些库。（我无法生成 JSON，我缺少`jersey-json`依赖项）。通过添加依赖关系，问题得到解决。

检查您是否可以使用以下简单方法生成 XML：

```
@GET
@Path("test")
@Produces(MediaType.APPLICATION_XML)
public List<String> test()
{
    List<String> test = new ArrayList<String>();
    test.add("string 1");
    test.add("string 2");
    return test;
} 
```

如果您无法使用此方法生成 XML，请尝试添加`jersey-core-1.13`为 Maven 依赖项：

```
<dependency>
    <description></description>
    <groupId>com.sun.jersey</groupId>
    <artefactId>jersey-core</artefactId>
    <version>1.13</version>
</dependency> 
```

如果您可以自由选择使用哪种 JAX-RS 实现，我强烈建议您查看[RESTEasy](https://www.jboss.org/resteasy/)。它提供了许多很酷的特性，比如 bean 验证，并提供了一个非常易于使用的客户端库。

# objective-c - 是否可以在 html 中为 iOS 设计 UI，但在 Objective-C 中运行逻辑

> ID：11769033
> 
> 赞同：-1
> 
> 时间：2012-08-01T23:30:16.323
> 
> 标签：objective-c, ios

我是 iPhone 开发的新手。我来自网络开发/设计，在 iPhone 开发中困扰我的是无法进行自定义设计......换句话说......有什么办法可以用 webkit 设计我的用户界面（我的视图）所以我所有的 UI元素将在 html/css 中编写，在 Objective-c 中编写逻辑。我在想是否有一种方法可以在按下html按钮时触发一些objective-c代码。有没有办法做到这一点（让我们说通过“本地主机请求”或者我不知道）？

但不是使用phonegap或类似的，因为那时你只是开始用javascript编写你的逻辑，我不希望那样......我希望我的控制器和模型用objective-c编写，只是html中的视图模块！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:32:45.540

查看[PhoneGap](http://phonegap.com/)。它具有您指定的所有功能，并且也可以在 Android 和其他系统上运行（当然，您需要用 Java 和其他语言编写本机逻辑才能使其工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:26:28.620

其他响应者是正确的，因为效率是一个大问题，因为您的所有逻辑都在 Web/native 界面上进行了控制。UIWebView 在单个线程上执行很多它的职责，并且您与它的任何交互也必须如此。

但是，如果您真的想这样做，有一些解决方案...通过遵循您定义的协议的委托方法（例如 shouldStartLoadWithRequest）从 UIWebView 拦截事件可以使用，但我建议要么在 JS 中做所有事情（相信我，它实际上会更快），或者只是硬着头皮学习更多的原生 iOS 开发。

# clojure - 检查地图上的键是否具有值的惯用方法

> ID：11769036
> 
> 赞同：14
> 
> 时间：2012-08-01T23:30:57.197
> 
> 标签：clojure

检查地图上的键是否具有值的惯用方法是什么？例如，如果我们有：

```
=> (def seq-of-maps [{:foo 1 :bar "hi"} {:foo 0 :bar "baz"}]) 
```

要找出所有带有 :foo == 0 的地图，我喜欢：

```
=> (filter (comp zero? :foo) seq-of-maps)
({:foo 0, :bar "baz"}) 
```

但是，如果我想找到所有带有 :bar == "hi" 的地图，我能想到的最好的方法是：

```
=> (filter #(= (:bar %) "hi") seq-of-maps)
({:foo 1, :bar "hi"}) 
```

我觉得不太可读。有更好/更惯用的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-01T23:51:04.087

惯用语是主观的，但我愿意

```
=> (filter (comp #{"hi"} :bar) seq-of-maps) 
```

或者你做了什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T01:58:07.977

我个人喜欢重构这种东西以使用一个明确命名的高阶函数：

```
(def seq-of-maps [{:foo 1 :bar "hi"} {:foo 0 :bar "baz"}])

(defn has-value [key value]
  "Returns a predicate that tests whether a map contains a specific value"
  (fn [m]
    (= value (m key))))

(filter (has-value :bar "hi") seq-of-maps)
=> ({:foo 1, :bar "hi"}) 
```

缺点是它为您提供了额外的函数定义来管理和维护，但我认为优雅/代码可读性是值得的。如果您多次重复使用谓词，从性能角度来看，这种方法也非常有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T00:48:41.807

clojure.set/index 也可以在这里使用

```
((index seq-of-maps [:foo]) {:foo 0})
((index seq-of-maps [:bar]) {:bar "hi"}) 
```

如果你愿意，你可以将它包装在一个函数中

```
(defn select-maps [xrel m]
   ((index xrel (keys m)) m)) 
```

然后

```
(select-maps seq-of-maps {:foo 0})
(select-maps seq-of-maps {:bar "hi"}) 
```

两者都有效 - 您还可以使用索引请求具有多个键/值的映射，即：

```
(select-maps seq-of-maps {:foo 0 :bar "baz"}) 
```

选择所有包含 foo 0 和 bar "baz" 的地图

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T00:07:57.847

您将匿名函数传递给过滤器的第三个示例似乎是查找具有给定值的地图的更惯用的方法之一。我发现它很容易阅读。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-02T00:49:42.307

```
user> (def seq-of-maps [{:foo 1 :bar "hi"} {:foo 0 :bar "baz"}])
#'user/seq-of-maps
user> (filter #(-> % :bar (= "hi")) seq-of-maps)
({:foo 1, :bar "hi"}) 
```

正如 Pepijn 所说，我认为惯用方式因个人意见而异。我有时使用`->`宏来提取嵌套括号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T04:07:26.063

你的代码对我来说看起来不错。其他可能的解决方案是使用`for`宏，如下所示

```
(for [m seq-of-maps 
      :let [v (:bar m)] 
      :when (= v "hi")] 
   m) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T04:08:37.823

只需像这样`zero?`替换`(partial = "hi")`：

```
=> (filter (comp (partial = "hi") :bar) seq-of-maps) 
```

# ios - 让最重要的事情在模态序列中消失

> ID：11769039
> 
> 赞同：-1
> 
> 时间：2012-08-01T23:31:03.743
> 
> 标签：ios, xcode, uiviewcontroller

我有一个模态segue，最上面的东西就像iphone的条和时间很烦人，我希望它消失，我该怎么做？我尝试弄乱视图控制器的属性，但它们似乎都没有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:40:45.637

你是说状态栏？你可以用这个隐藏它：

```
[UIApplication sharedApplication].statusBarHidden = YES; 
```

# .net - 文本框在新行中输入关键结果

> ID：11769041
> 
> 赞同：-3
> 
> 时间：2012-08-01T23:31:14.590
> 
> 标签：.net, wpf, textbox

TextBox，我想要一个输入键来插入一个 CR LF。走到这一步：

`<TextBox Height="auto" KeyDown="TextBox_KeyDown" TextWrapping="Wrap"/`>

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:33:33.137

添加`AcceptReturn`属性

```
<TextBox Height="auto" KeyDown="TextBox_KeyDown" TextWrapping="Wrap" AcceptsReturn="True"/> 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms742157.aspx](http://msdn.microsoft.com/en-us/library/ms742157.aspx)

# google-api - 可以通过 API 删除授权吗？

> ID：11769047
> 
> 赞同：4
> 
> 时间：2012-08-01T23:32:16.333
> 
> 标签：google-api, google-drive-api

我的应用允许用户通过 OAUTH 授权访问他们的 Google Drive。我提供了一种将他们的 Google Drive 与我的应用程序“取消链接”的方法。当他们提出这个请求时，我会丢弃他们当前的访问令牌和刷新令牌，所以事情是从我这边完成的。

有没有办法从谷歌方面删除最初在 OAuth 期间启用的授权范围？

具体来说，我希望我的应用停止为用户列出：

[https://accounts.google.com/b/0/IssuedAuthSubTokens](https://accounts.google.com/b/0/IssuedAuthSubTokens)

我不确定这是否是一个好的永久 URL（/b/0/ 看起来很可疑..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:56:50.573

是的，您可以显式撤销令牌。

[https://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke](https://developers.google.com/accounts/docs/OAuth2WebServer#tokenrevoke)

# javascript - 将 javascript 加载到 iframe 中

> ID：11769058
> 
> 赞同：0
> 
> 时间：2012-08-01T23:34:08.820
> 
> 标签：javascript, internet-explorer, events, iframe

所以我在 Internet Explorer 中遇到了“未定义变量”的问题。

具体来说 - 未定义的变量是我有 iFRAME 的 JSP 中的全局 Javascript 变量。我推断这个 var 它未定义的原因是因为我实例化它的 JS 代码没有被加载到 iframe 中。我尝试将 JS 代码直接放在我的 JSP 页面中，该页面在我的 iFrame 中构建了一个表，但它从未在 IE 或 Safari 中加载。FF虽然加载了这个JS代码......

我尝试将我的 JS 代码放入一个标签中，然后从我的 iframe 中调用该标签库 - 但仍然没有。在调试时，我尝试在实例化此对象的代码行旁边放置一个断点 - 我在 IE8 调试器中收到错误消息 - “无法在此位置添加断点。此页面的代码尚未加载。”

这是我从父母那里调用的 iframe -

```
 <iframe src="${channelUrl}" onload='<c:if test="${ConfigProperties.test.mode ne 'true'}">setIframeAnchor("iframeportlet")</c:if>' name="iframeportlet" id="iframeportlet" style="height: ${frameHeight}px; width: 100%" title="E-Doc" frameborder="0" height="${frameHeight}px" scrolling="auto" width="100%"></iframe> 
```

问题 -

如何以及在何处将我的 JS 代码放置在父窗口和/或 iframe 中？

# vb.net - 获取重复的随机数

> ID：11769061
> 
> 赞同：0
> 
> 时间：2012-08-01T23:34:44.763
> 
> 标签：vb.net, random

我正在使用这个共享函数生成基本的随机数：

```
Public Shared Function RandomNumber(ByVal MaxNumber As Integer, Optional ByVal MinNumber As Integer = 0) As Integer

    'initialize random number generator
        Dim r As New Random(Date.Now.Ticks And &HFFFF)

        If MinNumber > MaxNumber Then
            Dim t As Integer = MinNumber
            MinNumber = MaxNumber
            MaxNumber = t
        End If

        Return r.Next(MinNumber, MaxNumber)

End Function 
```

像这样调用：dim x as integer = Random(2100000000)

非常简单，种子值直接来自 MS 示例。

问题是：我有时会收到重复的数字，但总是在通常至少相隔 5 或 10 分钟的时间创建。我可以查看我是否每秒或毫秒多次调用该函数，因为这有点“破坏”种子。但这些都在较长的时间跨度内出现。还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:46:53.093

重复种子问题？

将 r 定义为 static 可能会更好，以便在第一次调用时初始化一次。请参阅此答案[VB.NET 中的随机整数](https://stackoverflow.com/questions/18676/random-int-in-vb-net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T03:38:21.510

构造`Random`函数将一个`Integer`32 位的参数作为其参数。正如[spencer7593](https://stackoverflow.com/a/11769150/740923)所说，只有 16 位，您每 6.5 毫秒重复一次序列。尝试：

```
Dim r As New Random(Date.Now.Ticks And &HFFFFFFFF) 
```

但是，这将做同样的事情：

```
Dim r As New Random() 
```

更好的是，不要`Random`每次都创建一个新对象：

```
Private Static r As New Random()  
Public Shared Function RandomNumber(MaxNumber As Integer, Optional MinNumber As Integer = 0) As Integer  
    ...
    Return r.Next(MinNumber, MaxNumber)  
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T23:46:13.173

问：还有什么可能导致这种情况？

答：它可能纯粹是随机发生的。随机数就是：随机。在任何时间点，无论是与另一个时间点相距几秒还是几小时，一个数字出现的可能性与任何其他数字一样。不能保证某个数字不会重复。

另一方面，看起来你的种子值只有 16 位左右。总共有 65,536 种可能性。一毫秒内有 10,000 个滴答声，所以每 6.5 毫秒你就有可能重用同一个种子。

~~目前尚不清楚 VB Random 是否使用了该种子之外的某种其他熵。（但为了包含而收集熵会减慢初始化速度，因此作为性能考虑可能不会。）~~

根据文档，使用相同的种子值创建两个 Random 对象会导致 Random 对象创建重复的唯一数字序列。

[http://msdn.microsoft.com/en-us/library/ctssatww.aspx](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)

* * *

我认为这回答了为什么会发生这种情况的问题。

我想下一个问题是为什么需要实例化一个新`Random`对象？如果您需要多个对象，则实例化其中的几个，但确保为每个对象使用不同的种子值将是一种方法。

但在你去那里之前，我建议你考虑只使用*一个* `Random`. 可以从现有的 获取随机数的调用`Random`，而不是每次需要随机数时都创建一个新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:56:03.330

**尝试另一种方式：**

```
Public Function RandomNumber2(ByVal MaxNumber As Integer, Optional ByVal MinNumber As Integer = 0) As Integer
    ' Initialize the random-number generator.
    Randomize()
    ' Generate random value between MaxNumber and MinNumber.
    Return CInt(Int((MaxNumber * Rnd()) + MinNumber))
End Function 
```

**有关更多详细信息，请参见[随机化函数 (Visual Basic)](http://msdn.microsoft.com/en-us/library/8zedbtdt%28v=vs.80%29.aspx)。希望这可以帮助。**

# arrays - 从过程调用函数时帕斯卡非法限定符错误

> ID：11769065
> 
> 赞同：3
> 
> 时间：2012-08-01T23:34:59.867
> 
> 标签：arrays, function, pascal, procedure

```
function classes(o:integer): String;
var allclasses : array[1..7] of String;
begin
    allclasses[1]:= 'class1';
    allclasses[2]:= 'class2';
    allclasses[3]:= 'class3';
    allclasses[4]:= 'class4';
    allclasses[5]:= 'class5';
    allclasses[6]:= 'class6';
    allclasses[7]:= 'class7';
    classes := allclasses[o];
end; 
```

上面你可以看到一个函数，它应该接收一个整数并给出存储在数组中的字符串的结果。

```
procedure loadthis(chosen : string);
var f: text;
    i : integer;
begin
    Assign(f, 'files\'+chosen+'.txt');
    Reset(f);
    ReadLn(f, i);
    MyChar.clas := classes[i];
end; 
```

当这个过程被调用时，它会调用一个“类”函数。请注意 Mychar 是一个全局变量。

```
begin
    loadthis(FileName);
    ReadLn;
    Readln
end. 
```

Ant this 是主程序，它调用“loadthis”程序。

我不知道出了什么问题，但我收到了这些错误：

*   指定的参数数量错误
*   非法限定词

这两个错误都来自这一行： `MyChar.clas := classes[i];`. 我真的不知道出了什么问题，也许我不能从过程中调用函数？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:42:29.323

您正在尝试将其作为数组索引进行访问，但它必须是函数调用：

```
MyChar.clas := classes(i);  { note () instead of [] } 
```

您可能还应该添加一些范围检查。如果有人放入`20`文本文件会发生什么？您的数组只有索引`1`通过的项目`7`，因此当您`classes(20)`使用超出范围的值调用时会出现运行时错误。

~~（你也可以使用一个常量数组`allclasses`来减少你的代码，但你的导师可能还没有做到这一点。）~~

鉴于您对没有讲师的评论，这里有一个关于处理该功能的更好方法的建议：

```
function classes(o:integer): String;
const
  allclasses: array[1..7] of string = ('class1', 
                                       'class2',
                                       'class3',
                                       'class4',
                                       'class5',
                                       'class6',
                                       'class7');
begin
  {
    Low() returns the lowest index of the array, and
    High() returns the highest. The if statement makes sure
    that o is between them. It is the range check I mentioned.
  }
  if (o >= Low(allclasses)) and (o <= High(allclasses)) then
    classes := allclasses[o]
  else
    classes := '';
end; 
```

# javascript - 用户脚本的两个实例如何在框架之间进行通信？

> ID：11769066
> 
> 赞同：4
> 
> 时间：2012-08-01T23:35:06.740
> 
> 标签：javascript, iframe, synchronization, cross-domain, userscripts

请参阅在网页和 iframe 中运行相同 JavaScript 的技术，如[本答案](https://stackoverflow.com/questions/10666258/chrome-userscript-error-unsafe-javascript-attempt-to-access-frame?answertab=active#tab-top)中所述：

> 例如，假设您在 domain_A.com 上有此页面：

```
<html>
<body>
    <iframe src="http://domain_B.com/SomePage.htm"></iframe>
</body>
</html> 
```

> 如果您像这样设置@match 指令：

```
// @match http://domain_A.com/*
// @match http://domain_B.com/* 
```

> 然后您的脚本将运行两次——一次在主页上，一次在 iframe 上，就好像它是一个独立页面一样。

有哪些选项可以让脚本的两个实例相互通信？

这将需要同步实例。例如，让 iframe 脚本实例仅在网页脚本实例完成后执行其任务，反之亦然。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T09:00:45.733

这两个脚本实例可以使用[`postMessage()`](https://developer.mozilla.org/en/DOM/window.postMessage). 关于：

> 这将需要同步实例，例如让 iframe 仅在网页完成后执行其任务，反之亦然。

这就是[其他答案](https://stackoverflow.com/a/11489451/331508)中显示的内容。
**但是** [Chrome 在如何向扩展提供帧/iframe](http://code.google.com/p/chromium/issues/detail?id=20773) 方面存在错误，因此，要解决这些错误，您必须*注入*调用`postMessage()`.

以下脚本显示了如何。它：

*   在 iframe 和包含页面中运行。
*   处理跨域 iframe。
*   它演示了具有以下逻辑的脚本间控制：
    1.  容器页面设置为侦听来自 iframe 的消息。
    2.  iframe 设置为侦听来自容器页面的消息。
    3.  iframe 将第一条消息发送到容器页面。
    4.  当容器页面收到该消息时，它会将另一条消息发送回 iframe。

安装这个脚本（感谢CertainPerformance，多年来目标站点的变化）：

```
// ==UserScript==
// @name        _Cross iframe, cross-domain, interscript communication
// @include     http://fiddle.jshell.net/2nmfk5qs/*
// @include     http://puppylinux.com/
// @grant       none
// ==/UserScript==
/* eslint-disable no-multi-spaces */

if (window.top === window.self) return;
console.log ("Script start...");
if (window.location.href.includes('fiddle')) {
    console.log ("Userscript is in the MAIN page.");

    //--- Setup to process messages from the GM instance running on the iFrame:
    window.addEventListener ("message", receiveMessageFromFrame, false);
    console.log ("Waiting for Message 1, from iframe...");
}
else {
    console.log ("Userscript is in the FRAMED page.");

    //--- Double-check that this iframe is on the expected domain:
    if (/puppylinux\.com/i.test (location.host) ) {
        window.addEventListener ("message", receiveMessageFromContainer, false);

        //--- Send the first message to the containing page.
        sendMessageFromAnIframe (
            "***Message 1, from iframe***", "http://fiddle.jshell.net"
        );
        console.log ("Waiting for Message 2, from containing page...");
    }
}

function receiveMessageFromFrame (event) {
    if (event.origin != "http://puppylinux.com")    return;

    console.log ('The container page received the message, "' + event.data + '".');

    //--- Send message 2, back to the iframe.
    sendMessageToAnIframe (
        "#testIframe",
        "***Message 2, from the container page***",
        "http://puppylinux.com"
    );
}

function receiveMessageFromContainer (event) {
    if (event.origin != "http://fiddle.jshell.net")    return;

    console.log ('The iframe received the message, "' + event.data + '".');
}

/*--- Because of bugs in how Chrome presents frames to extensions, we must inject
    the messaging code. See bug 20773 and others.
    frames, top, self.parent, contentWindow, etc. are all improperly undefined
    when we need them.  See Firefox and other browsers for the correct behavior.
*/
function sendMessageFromAnIframe (message, targetDomain) {
    var scriptNode          = document.createElement ('script');
    scriptNode.textContent  = 'parent.postMessage ("' + message
                            + '", "' + targetDomain + '");'
                            ;
    document.body.appendChild (scriptNode);
}

function sendMessageToAnIframe (cssSelector, message, targetDomain) {
    function findIframeAndMessageIt (cssSelector, message, targetDomain) {
        var targetIframe    = document.querySelector (cssSelector)
        if (targetIframe) {
            targetIframe.contentWindow.postMessage (message, targetDomain);
        }
    }
    var scriptNode          = document.createElement ('script');
    scriptNode.textContent  = findIframeAndMessageIt.toString ()
                            + 'findIframeAndMessageIt ("' + cssSelector
                            + '", "' + message
                            + '", "' + targetDomain + '");'
                            ;
    document.body.appendChild (scriptNode);
}

console.log ("Script end"); 
```

**[然后在 jsFiddle](http://fiddle.jshell.net/2nmfk5qs/show/light/)访问这个测试页面。**

您将在 javascript 控制台中看到：

```
脚本开始...
用户脚本位于 MAIN 页面中。
等待消息 1，来自 iframe...
脚本结束
脚本开始...
用户脚本位于 FRAMED 页面中。
等待消息 2，来自包含页面...
脚本结束
容器页面收到消息“***Message 1, from iframe***”。
iframe 收到消息“***Message 2, from the container page***”。

```

# mysql - “WHERE”中的 PDO 错误

> ID：11769074
> 
> 赞同：-1
> 
> 时间：2012-08-01T23:35:58.473
> 
> 标签：mysql, pdo, where, mysql-error-1064

这段代码有什么问题，它告诉我这个，但我看不出有什么不好：

```
Error : SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE B='achillea_millefolium_credo'' at line 1 
```

这是我的代码：

（之前）信息：如果我们回显“$all_db_types_associations['nom_url']”，它将回显“B”（我数据库中的 B 列）

如果我们回显“$plante”，它将回显“achillea_millefolium_credo”（植物的名称）

```
$plante_undecoded = htmlspecialchars($_GET["plante"]);
$plante = htmlspecialchars_decode(htmlspecialchars_decode($plante_undecoded));

try
{
    $pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
    $bdd = new PDO('mysql:host=' .$host .';dbname=plantes', $username, $password, $pdo_options);

    $bdd->query("SET NAMES 'utf8'");

    $pdo = 'SELECT * FROM ' .$current_db_name ." ORDER BY " .$all_db_types_associations['nom_bot'] ." WHERE " .$all_db_types_associations['nom_url'] ."=? ";
    //echo $pdo ." <br />";

    $reponse = $bdd->prepare($pdo);
    $reponse->execute(array($plante));

    while ($donnees = $reponse->fetch())
    {
        //things here...
    }

    $reponse->closeCursor();
}

catch(Exception $e)
{
    die('Erreur : '.$e->getMessage());
} 
```

是因为我在 MySQL 中的列名是大写字母（“B”）吗？否则……什么大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:39:07.427

您的`ORDER BY`条款需要在您的`WHERE`条款之后。

```
SELECT col FROM table WHERE condition ORDER BY col 
```

# android - 如何在android中为xml制作意图选择器

> ID：11769075
> 
> 赞同：0
> 
> 时间：2012-08-01T23:36:46.617
> 
> 标签：android, xml, android-intent, intentfilter

我尝试了很多东西，但我无法让它工作，我有一个应用程序，我想要当电子邮件中有一个 XML，或者文件浏览器或更多时，我希望我的应用程序出现在意图选择器的弹出窗口中，我不能让它工作，有人有线索吗？顺便说一句，我可以说我让它工作，所以当人们在 onCreate() 中选择我的应用程序来加载信息时，我该如何“处理”。这是我的应用程序的一部分我尝试了很多东西

```
<i><application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
                <category android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.EDIT" />
            <category android:name="android.intent.category.DEFAULT" />
              <data android:mimeType="text/*" />
    <data android:mimeType="application/xml"/>
    <data android:scheme="http" android:host="*"
                    android:pathPattern=".*xml" />
            </intent-filter>
        </activity>
    </application> </i> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T23:40:35.203

尝试更广泛地使用您的过滤器，例如

```
<intent-filter>
    <action android:name="android.intent.action.VIEW"/>
    <category android:name="android.intent.category.DEFAULT"/>

    <data android:mimeType="text/xml"/>
    <data android:scheme="content" android:mimeType="text/*" android:pathPattern=".*\\.xml"/>
    <data android:scheme="file" android:mimeType="text/*" android:pathPattern=".*\\.xml"/>
    <data android:scheme="http" android:mimeType="text/*" android:pathPattern=".*\\.xml"/>
    <data android:scheme="https" android:mimeType="text/*" android:pathPattern=".*\\.xml"/>
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:42:05.973

您可以做的其他事情是在广播接收器中捕获意图并根据需要重新广播。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T23:51:46.967

这是我使用的代码，我发现我需要为视图创建另一个意图过滤器

```
 <intent-filter>
                 <action android:name="android.intent.action.VIEW" />
                    <category android:name="android.intent.category.DEFAULT" />
                    <category android:name="android.intent.category.BROWSABLE" />
                    <data android:mimeType="application/xml" />
                <data android:mimeType="text/xml" />
                <data android:mimeType="text/*" />
            </intent-filter> 
```

# android - 我无法在谷歌地图上显示标记（pushpin.gif） - 使用 Eclipse 的 Android 应用程序

> ID：11769078
> 
> 赞同：0
> 
> 时间：2012-08-01T23:37:24.947
> 
> 标签：android, eclipse, google-maps-markers

我将 pushpin.gif 复制到相应的文件夹：project/res/drawable-mdpi/pushpin.gif 我无法在地图上显示标记，这是我使用的代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.GeoPoint;
import android.view.KeyEvent;
import com.google.android.maps.MapController;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;
import com.google.android.maps.Overlay;
import java.util.List;
import android.view.MotionEvent;
import android.widget.Toast;
import android.location.Address;
import android.location.Geocoder;
import java.util.Locale;
import java.io.IOException;

public class MainActivity extends MapActivity {
MapView mapView;
MapController mc;
GeoPoint p;

class MapOverlay extends com.google.android.maps.Overlay
{

@Override
public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when)
        {
            super.draw(canvas, mapView, shadow);
            //---translate the GeoPoint to screen pixels---
            Point screenPts = new Point();
            mapView.getProjection().toPixels(p, screenPts);
            //---add the marker---
            Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pushpin);
            canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);
            return true;
        }

@Override
public boolean onTouchEvent(MotionEvent event, MapView mapView)
{
    //---when user lifts his finger---
    if (event.getAction() == 1) {
        GeoPoint p = mapView.getProjection().fromPixels(
                (int) event.getX(),
                (int) event.getY());

        /* --To display the lat & long on the screen--
         Toast.makeText(getBaseContext(), "Location: "+ p.getLatitudeE6() / 1E6 + "," + p.getLongitudeE6() /1E6 ,Toast.LENGTH_SHORT).show();*/

        /*Geo Locating the empire state
            Geocoder geoCoder = new Geocoder(this, Locale.getDefault());
            try {
                List<Address> addresses = geoCoder.getFromLocationName("empire state building", 5);
                String add = "";
                    if (addresses.size() > 0) {
                        p = new GeoPoint(
                        (int) (addresses.get(0).getLatitude() * 1E6),
                        (int) (addresses.get(0).getLongitude() * 1E6));
                    mc.animateTo(p);
                    mapView.invalidate();
                    }
                } catch (IOException e) {
                e.printStackTrace();
            }*/
        Geocoder geoCoder = new Geocoder(
                getBaseContext(), Locale.getDefault());
                try {
                        List<Address> addresses = geoCoder.getFromLocation(
                            p.getLatitudeE6() / 1E6,
                            p.getLongitudeE6() / 1E6, 1);
                        String add = "";
                            if (addresses.size() > 0)
                                {
                                    for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); i++)
                                        add += addresses.get(0).getAddressLine(i) + "\n";
                                }
                            Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();
                    }
                catch (IOException e) {
                    e.printStackTrace();
                }
                return true;
        }
        return false;
    }
} 
```

/** 在第一次创建活动时调用。*/

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //To display the built-in zoom controls
    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    /*
     //To change the view to Satellite
    mapView.setSatellite(true);
    */

    /*
     //To change the view to Street
    mapView.setStreetView(true);
     */

    //assign the mapview to MapController object"oc"
    mc = mapView.getController();

    //the coordinates in micro degrees
    String coordinates[] = {"33.717261","-117.763589"};
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);

    //Gep point to represent geographical location
    p = new GeoPoint(
        //the coordinates in micro degrees
        (int) (lat * 1E6),
        (int) (lng * 1E6));

    //To navigate the map to a particular location
    mc.animateTo(p);

   //To Specify the zoom level
    mc.setZoom(13); 
```

//添加位置标记

```
 MapOverlay mapOverlay = new MapOverlay();
    List<Overlay> listOfOverlays = mapView.getOverlays();
    listOfOverlays.clear();
    listOfOverlays.add(mapOverlay);

   //Method to force the MapView to be redrawn
    mapView.invalidate();

   //To display traffic conditions on the Map
   // mapView.setTraffic(true);
}
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    MapController mc = mapView.getController();
    switch (keyCode)
    {
        case KeyEvent.KEYCODE_3:
            mc.zoomIn();
            break;
        case KeyEvent.KEYCODE_1:
            mc.zoomOut();
            break;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:19:44.773

我能够找到一个示例项目来解释我面临的所有问题。

[https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawk/](https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:14:31.757

```
class MyMapOverlays extends com.google.android.maps.Overlay

 {

 GeoPoint location = null;

public MyMapOverlays(GeoPoint location)

 {
 super();

 this.location = location;
 }

@Override

 public void draw(Canvas canvas, MapView mapView, boolean shadow)

 {

 super.draw(canvas, mapView, shadow);

 //translate the screen pixels

 Point screenPoint = new Point();

 mapView.getProjection().toPixels(this.location, screenPoint);

 //add the image
 canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.our_cross_image),

 screenPoint.x, screenPoint.y , null); //Setting the image  location on the screen (x,y).

 }
 } 
```

# php - AJAX 无法识别 json 数组

> ID：11769083
> 
> 赞同：0
> 
> 时间：2012-08-01T23:38:17.190
> 
> 标签：php, javascript, jquery, ajax

Ajax 不想`$google['cities']`在调用时识别我的`data.cities`.

输出是：`12 undefined undefined`。

如果我删除它，它工作得很好（输出是数据库记录）`$google['number']=12`，并将数据库数组定义为`$google[]=$row`.

有任何想法吗？

**PHP：**

```
<?php

$con = mysql_connect("localhost","root","");

if(!$con) {

    die("Connection Error: ".mysql_error());

}

mysql_select_db("avtost", $con);

$pasteta = $_POST["white"];

$places = mysql_query("SELECT sDo FROM bstop WHERE sOd='$pasteta'");

mysql_close($con);

$google=array();

while ($row=mysql_fetch_array($places)) {
    $google["cities"]=$row;
}

$google['number']=12;

if (mysql_num_rows($places)>0) {

    echo json_encode($google);
} else { echo 'Ni rezultatov';}

?> 
```

**查询：**

```
<script type="text/javascript">

$(document).ready(function(){

  $('#submit').click(function(){

    var white = $('#white').val();

    $.ajax({

    type:"POST",
    url:"page.php",
    dataType:'json',
    data:{white:white},
    success: function(data){

        var result='';
        $.each(data.cities, function(i,e) {
        result += '<div>'+e.sDo+'</div>';
        });
        $("#res").append(data.number);
        $("#res").append(result);

    }

    });

  });  

});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:56:38.610

每次`cities`在. _ 您可以使用：`$google``$places`

```
while ($row=mysql_fetch_array($places)) {
    $google[]=$row;
}

$google[]=12; 
```

然后如果要获取数字键，只需获取数组的最后一个值值，或者只是将数字作为单独的变量传递`$number`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T00:16:07.970

一些技巧：

1）您应该使用准备好的语句来保护您的代码（[mysqli准备好的](http://php.net/manual/en/mysqli.prepare.php)）。这会给你类似的东西：

```
// connect to database and check it
// ...
$stmt = $mysqli->prepare('SELECT sDo FROM bstop WHERE sOd=?');
$stmt->bind_param('s',$pasteta);
$stmt->bind_result($sDo);
$stmt->execute();
while($stmt->fetch())
    $google['cities'][] = $sDo;
$google['number'] = 12;
$stmt->close();
$mysqli->close();
// ... 
```

2) 改进你的变量、表和列名。他们有点混乱。

3) 您应该返回 JSON，而不是返回 'Ni rezultatov'。例如，`{"status":"FAILED"}`，随后返回`{"status":"OK", ... }`成功的请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T00:12:33.273

我自己解决了：

**PHP：**

```
while($row=mysql_fetch_array($places)){

$google['cities'][]=$row;

}

$google['number']=12;

echo json_encode($google); 
```

# jquery - 在同一个函数中多次访问“$(this)”

> ID：11769084
> 
> 赞同：2
> 
> 时间：2012-08-01T23:38:17.870
> 
> 标签：jquery

> **可能重复：**
> [在 jQuery 中缓存 $(this) 是最佳实践吗？](https://stackoverflow.com/questions/9603290/caching-this-in-jquery-is-a-best-practice)

我很好奇，在同一个函数中，当`$(this)`被多次调用时，在后续调用中构造 jQuery 对象是否会产生额外的开销？换句话说，`$(this)`第一次调用时是否缓存？如果不是，那么将其存储`$(this)`在一个变量中并在`$(this)`随后需要时使用该变量会是一种更好的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T23:50:18.163

`$()`是 jQuery 构造函数。

`this`是对调用的 DOM 元素的引用。

所以基本上， in `$(this)`，您只是将`this`in`$()`作为参数传递，以便您可以调用 jQuery 方法和函数。

[http://www.learningjquery.com/2007/08/what-is-this](http://www.learningjquery.com/2007/08/what-is-this)

好数字：http: [//jsperf.com/jquery-this-vs-this-vs-chain/2](http://jsperf.com/jquery-this-vs-this-vs-chain/2)

您通常使用`var $this = $(this);`来避免不必要地创建新的 jQuery 对象。对于下面的代码，您只创建一个对象而不是两个/四个。它与可链接性完全无关。

`this`在 javascript 中（通常）表示对调用当前函数的对象的引用。

通常存储`$(this)`在局部变量中的目的是防止您多次调用 jQuery 函数`$()` **，**如果您必须多次使用它，缓存*jQueryized应该有助于提高效率。* `this`

`$`只是一个有效的变量名字符，并用作变量名的第一个字符，*通常是*为了让程序员排队，它已经是一个 jQuery 对象（并且有相关的方法/属性可用）。

[jQuery 中的 $this 与 $(this)](https://stackoverflow.com/questions/7389944/this-vs-this-in-jquery)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T23:46:41.447

我经常看到这种构造：

```
var someFunc = function () {
    var that = $(this);
    // you could also cache like var $this = $(this);

    // do stuff here...
}; 
```

每次打电话`$()`都会有一些开销，但不会太多。如果您不缓存，我认为这不会引起注意`$(this)`。请参阅[$(this) 的 jquery 缓存上的 SO 条目](https://stackoverflow.com/questions/9603290/caching-this-in-jquery-is-a-best-practice)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T23:47:31.540

每次`$(this)`计算表达式时，都会调用 jQuery 工厂函数，从而生成一个*新*的jQuery 实例。但是，此过程的性能损失可以忽略不计。我曾经计算过它只需要几微秒（百万分之一秒）。

我个人并不担心`$(this)`在函数体内有多次。缓存 jQuery 实例 ( `var $this = $(this);`) 是一种选择，但我不这样做。（我碰巧觉得这个`$this`名字很难看，与 相比`$( this )`，我知道大多数人*不*同意我的观点。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T23:48:29.040

我做了一个快速测试，看看使用 $ 构造 jQuery 对象是否会增加开销：

```
var start = (new Date).getTime();
for(var i=0; i<1000000; i++)
{
   var testClass = $("#testDiv").attr("class");
}
var end = (new Date).getTime();
alert(end-start); 
```

我在这里所做的只是运行代码 1,000,000 次，以查看将页面上的 jQuery 对象的类存储到变量需要多长时间。它花了大约 4.286 秒。然后我修改它以引用一个已经存储的对象：

```
var start = (new Date).getTime();
var testDiv = $("#testDiv");
for(var i=0; i<1000000; i++)
{
   var testClass = testDiv.attr("class");
}
var end = (new Date).getTime();
alert(end-start); 
```

这一次只用了 1.254 秒。虽然这并不完全是您所要求的，但它确实强调了生成 jQuery 对象的过程比从已生成的对象中引用某些内容需要更多的时间。

也就是说，对于大多数应用程序来说，差异可能可以忽略不计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T23:44:31.043

调用 $(this) 时，必须从已实例化的对象中调用它。$(this) 只是对该对象的引用，因此开销应该是最小的。

我可能是错的，但如果是，请纠正我。

# php - CURL：PHP：无法提交

> ID：11769085
> 
> 赞同：0
> 
> 时间：2012-08-01T23:38:31.780
> 
> 标签：php, curl

我需要编写一个 php 脚本，该脚本将登录到我的管理页面，然后提交 rss。我可以使用下面的代码登录，但无法提交 rss

```
 <?php

function rssadd($url,$post,$post2) {
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.9.0.4) Gecko/2008102920 AdCentriaIM/1.7 Firefox/3.0.4');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
curl_setopt($ch, CURLOPT_REFERER, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close($ch);

$ch2 = curl_init($url);
curl_setopt($ch2, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; ru; rv:1.9.0.4) Gecko/2008102920 AdCentriaIM/1.7 Firefox/3.0.4');
curl_setopt($ch2, CURLOPT_POST, 1);
curl_setopt($ch2, CURLOPT_POSTFIELDS, $post2);
curl_setopt($ch2, CURLOPT_REFERER, $url);
curl_setopt($ch2, CURLOPT_RETURNTRANSFER, 1);
$result2 = curl_exec($ch2);
return $result . $result2;

}
    $page2 = rssadd('http://site.com/admin.php?mod=rss&action=news&id=4','subaction=dologin&username=admin&password=pass','subaction=doit');

echo $page2;

?> 
```

“http://site.com/admin.php?mod=rss&action=news&id=4”上的 html 我无法提交

```
 <input type="submit" name="subaction" value="doit" class="buttons"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:00:31.603

也许您需要在请求之间保留 cookie？尝试设置`CURLOPT_COOKIEFILE`为`''`（空字符串）。您还需要对两个请求使用相同的 curl 句柄 - 而不是关闭第一个句柄并初始化一个新句柄，只需更改第一个句柄的选项并再次运行它。

我最初从这个 Stack Overflow 答案中学会了如何做到这一点：[https ://stackoverflow.com/a/5758471/638544](https://stackoverflow.com/a/5758471/638544)

# facebook-graph-api - 是否可以使用 Facebook Graph API 从列表中获取页面？

> ID：11769092
> 
> 赞同：1
> 
> 时间：2012-08-01T23:39:16.363
> 
> 标签：facebook-graph-api, permissions

我有一个 Facebook 列表，其中只包含一些我喜欢的页面。我拥有“user_likes”和“read_friendlists”的权限，但似乎只返回列表中的朋友，而不返回列表中的任何页面。我是否需要其他权限，或者无法通过 Facebook Graph API 从列表中获取页面？我可以毫无问题地获得我所有喜欢或所有朋友的列表，但我不想要我所有喜欢的列表，只是我列表中的那些。

对于只包含页面的列表，当我转到以下 URL 时，我在 Facebook Graph API Explorer 中没有得到任何结果： [https ://graph.facebook.com/MY-LIST-ID/members](https://graph.facebook.com/MY-LIST-ID/members)

# login - Smack：使用错误的登录用户名/密码为 XMPPException.getXMPPError() 和 XMPPException.getStreamError() 返回 Null

> ID：11769093
> 
> 赞同：1
> 
> 时间：2012-08-01T23:39:22.320
> 
> 标签：login, xmpp, smack, sasl

我到处搜索，但找不到答案：当我尝试使用无效的登录用户名/密码登录任何 XMPP 服务器（我的 Openfire 设置、talk.google.com、jabber.org）时，抛出 XMPPException（消息：SASL 身份验证 PLAIN 失败：未授权）不包含任何 XMPPError 或 StreamError（均为空）。

最奇怪的是，使用与我相同的 Smack 版本 - v3.2.2 的 Spark Java XMPP 客户端（我什至用 Spark 交换了我的）可以使用 getXMPPError 处理无效的登录凭据，它返回实际的 XMPP错误对象，不为空！这怎么可能呢？

我浏览了 Spark 源代码，但我什么也想不通。我尝试了无数的变化——各种 ConnectionConfiguration 设置，连接到其他 Jabber/XMPP 服务器，没有任何帮助。我什至用 Wireshark 嗅探了服务器响应，它们对于 Spark 和我的应用程序是相同的。

我最终解析了该死的返回字符串“SASL authentication PLAIN failed: not-authorized”......

有人可以在这里阐明一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T03:25:50.800

来自Ignite Realtime 上的[Javadoc ：](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/XMPPException.html)

getXMPPError() 返回与此异常相关的 XMPPError，如果不存在则返回 null。

我不确定，但也许 spark 实际上会像您一样解析错误字符串？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:43:11.777

不知道这是否有帮助，但尝试类似

```
try {
    XMPPConnection connection = new XMPPCOnnection....
    connection.connect();
    .
    .
    .
} catch (Throwable t) {
      t.printStackTrace();
} 
```

原因是您可能正在寻找错误的异常，通过捕获 Throwable 您将寻找几乎所有内容，因此此代码不会解决您的问题，但可能会让您走上正轨，或者至少为您提供一些提示。

# python - 瓶子：当我导入 sqlalchemy 时，@delete 路由中断

> ID：11769094
> 
> 赞同：1
> 
> 时间：2012-08-01T23:39:36.443
> 
> 标签：python, sqlalchemy, bottle

我有一个非常简单的 CRUD API：

```
from bottle import get, post, put, delete, run

@get('/items/')
@get('/items')
def item_list():
    return "LIST"

@get('/items/<upc>')
def item_show( upc="0000" ):
    return "SHOW ITEM WITH UPC " + upc

@delete('/items/<upc>')
def item_delete( upc="0000" ):
    return "DELETE ITEM WITH UPC " + upc

@put('/items/<upc>')
def item_save( upc="0000" ):
    return "SAVE ITEM WITH UPC " + upc

@post('/items/<upc>')
def item_create( upc="0000" ):
    return "CREATE ITEM WITH UPC " + upc

run() 
```

这很好用，我可以运行服务器并点击所有端点并取回正确的字符串。但如果我添加：

```
from sqlalchemy import * 
```

到顶部然后当我尝试运行服务器时出现此错误：

```
Traceback (most recent call last):
  File "app.py", line 14, in <module>
    def item_delete( upc="0000" ):
TypeError: 'Delete' object is not callable 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:46:02.667

我的猜测是，`sqlalchemy`它的名称`delete`覆盖了`from bottle import delete`.

您可以通过仅执行或仅从（例如） `import sqlalchemy`导入所需的功能来解决此问题。`sqlalchemy``from sqlalchemy import function_you_need, object_you_need`

# php - 使用 PHP 在 MySQL 中转义 % 符号

> ID：11769095
> 
> 赞同：1
> 
> 时间：2012-08-01T23:39:37.907
> 
> 标签：php, mysql

我有一个简单的搜索框，但我试图避免结果页面在查询为 % 时返回表中的所有结果。那怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:42:39.027

我想你想用`\%`...

在你的 PHP 中，

```
$query = str_replace ( '%' , '\%' , $query )

$sql = "SELECT * FROM table WHERE column LIKE '%" . mysqli_real_escape_string($query) . "%'" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T23:45:06.733

你在清理你的输入吗？

你可以从[`mysqli_real_escape_string()`](http://www.php.net/manual/en/mysqli.real-escape-string.php)

```
$query = "SELECT * FROM table WHERE column LIKE '" . mysqli_real_escape_string($input) . "'"; 
```

# jquery - jQuery ajax 误解函数

> ID：11769096
> 
> 赞同：0
> 
> 时间：2012-08-01T23:39:44.803
> 
> 标签：jquery, ajax

我正在阅读有关 Ajax 和 jQuery 的内容，并且看到了以下代码：

```
$.ajax({
  url: "test.html",
  cache: false
}).done(function( html ) {
  $("#results").append(html);
}); 
```

我在任何地方都没有看到“html”的声明，代码怎么知道要附加什么？

PS这可能是一个愚蠢的问题，但我在任何地方都找不到这个问题的答案：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:50:37.023

当 ajax 调用完成时，它会将数据传递到为 done 定义的函数中。

```
.done(function(html){ 
```

html 在这里不是“定义”的，而是接收数据的变量的名称。一旦定义了占位符，您就可以在函数中的任何位置使用它。

例如，如果您有

```
function myFunc(foo){
    alert(foo);
} 
```

然后做了

```
myFunc(1234);
//result 1234

myFunc("test");
//result "test" 
```

所以，真正的 html 正是这个人选择调用从 ajax 调用接收到的数据。如果您阅读 jQuery 网站上的教程，大多数时候他们将这个变量命名为“数据”

# r - 根据 i 的值将向量中的每个 i 重新编码为 i+1 个索引项

> ID：11769098
> 
> 赞同：0
> 
> 时间：2012-08-01T23:39:55.490
> 
> 标签：r, indexing, plyr

我正在尝试设计一种方法来根据它们是否在该向量中的某个值之后出现来重新编码向量中的项目。我有一个完整的数据集（按主题分组的时间序列），其中包含一个指示主题初始曝光月份的列（该列的 NA 表示缺乏曝光，“G”表示发生月份曝光）。一旦对象被“暴露”，我需要该对象的向量来表明他/她已经暴露，直到该对象的观察期结束。这是一个精简的示例和一个可行的解决方案，但并非在每种情况下我都需要它：

```
x2 <- c("G", NA, NA, NA, NA)
solution <- c(rep(1, length(x2)- length(rep("G", (length(x2)+1 )- which(x2=="G")))), rep("G", (length(x2)+1 )- which(x2=="G"))) 
```

在这种情况下，解决方案如下所示：

```
> solution
[1] "G" "G" "G" "G" "G" 
```

也就是说，当遇到不包含任何“G”的向量时，解决方案会中断

```
x2 <- c(NA, NA, NA, NA, NA)
solution <- c(rep(1, length(x2)- length(rep("G", (length(x2)+1 )- which(x2=="G")))), rep("G", (length(x2)+1 )- which(x2=="G")))

Error in rep("G", (length(x2) + 1) - which(x2 == "G")) : 
  invalid 'times' argument 
```

因此，在一天结束时，解向量需要：1）与原始向量（在本例中为 x2）具有相同的长度，并且 2）在初始“G”之后的每个位置都包含值“G”在原始向量中

还有一件事，我需要某种形式的解决方案，我可以通过分组因子传递给 plyr（因为我需要在大型数据集上重新编码许多按因子分组的向量）。

提前非常感谢大家！克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:15:41.127

这也有效：

```
x2 <- c(NA,"G", NA, NA, NA, NA)
ifelse(seq_along(x2)>=match('G',x2),'G',x2) 
```

以前有人问过这个问题...我想，我正在尝试挖掘旧问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:09:09.343

```
repG <- function(x, start) { patt <- paste0("^",start,"$")
  if( length(grep(patt, x))>0 ){ x[ grep(patt, x)[1]:length(x)] <- start
         return(x) } }
 grep("^G$", tvec)
#[1]  6  7  8  9 10 11 12 
```

# android - 将 ImageView 放在 Camera Preview 之上

> ID：11769100
> 
> 赞同：1
> 
> 时间：2012-08-01T23:40:04.173
> 
> 标签：android

所以我有一个我正在使用的 xml 布局，它有两个主要元素，一个包含相机预览的框架布局和一个图像视图。图像视图应该在框架布局上可见，直到打开相机预览，然后它才会被推到它后面。我究竟做错了什么？

我已经做了很多测试从布局中删除元素并重建，我似乎无法解决错误的原因，我相信原因一定在代码中的某个地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:46:27.840

我认为应该推动它，因为它是一个`RelativeLayout`. 我认为你应该使用`LinearLayout`. 此外，该属性`android:layout_weight="1"`是 中的无效参数`RelativeLayout`。

您可以尝试强制图像视图对齐顶部：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="390dip" 
    android:layout_marginTop="25dip">        

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="300dip"
        android:layout_height="305dip"
        android:background="#00000000"
        android:layout_alignParentTop="true"
        android:src="@drawable/try_3"
        android:visibility="visible" 
        android:layout_marginLeft="10dip"/>

    <FrameLayout
        android:id="@+id/previewframe1"
        android:layout_width="320dip"
        android:layout_height="310dip"
        android:layout_alignParentTop="true"
         >
    </FrameLayout>

</RelativeLayout> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:49:01.993

将 ImageView 的背景和/或它包含的布局设置为 android:background="@null" 请为了透明度。

# dojo - 将 dojox.grid.EnhancedGrid 中排序或删除的行与 dojo.data.ItemFileWriteStore 进行比较

> ID：11769103
> 
> 赞同：0
> 
> 时间：2012-08-01T23:40:18.437
> 
> 标签：dojo

我已经搜索了 dojo 文档、堆栈溢出，以及使用 firebug 彻底探索了 EnhancedGrid 对象本身，但我没有找到答案。

我有一个增强的网格，我用值填充用户进行排序并基本上创建一个选择集（使用indirectSelection 插件）。然后，他们有一个按钮可以缩放到地图上的选定项目。

问题是，在对列进行排序时，它不会改变商店本身中项目的顺序，我在每个项目中保留一个对象，告诉我如何在地图上缩放，所以我无法协调带有索引的`grid.selection.selected`数组`store._arrayOfAllItems`索引。

编辑：请注意，我坚持使用 Dojo 1.6，因为它已融入我正在使用的 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:30:56.563

查看[Dojo 对象存储教程](http://dojotoolkit.org/documentation/tutorials/1.6/intro_dojo_store/)。

您可以将 idProperty 设置为 Store，例如：

```
var employeeStore = new dojo.store.Memory({data:employees, idProperty: "name"}); 
```

然后，您可以使用以下 get 方法使用该 id 属性操作商店：

```
// add a new employee
employeeStore.add({name:"George", department:"accounting"});
// remove Bill
employeeStore.remove("Bill");
// retrieve object with the name "Jim"
var jim = employeeStore.get("Jim"); 
```

而不是使用`store._arrayOfAllItems`. 这样，您的`grid.selection`对象将包含您的 id 值而不是数组索引（前提是您的网格的存储属性是您的存储）。这是我猜测会起作用的部分，因为我确信新的 dojo 的[dgrid](http://dojofoundation.org/packages/dgrid/)就是这样做的，顺便说一句，我鼓励您使用它。

希望能帮助到你，

# maven - 生命周期配置未涵盖插件执行：org.mule.tools:maven-mule-plugin:1.5:attach-test-resources

> ID：11769104
> 
> 赞同：1
> 
> 时间：2012-08-01T23:40:23.197
> 
> 标签：maven, mule, m2e, gnip

我收到此错误：**“生命周期配置未涵盖插件执行：org.mule.tools:maven-mule-plugin:1.5:attach-test-resources（执行：default-attach-test-resources，阶段：验证） "**

我正在使用 MuleStudio 1.30，并且正在尝试运行 gnip4j 中包含的 mule 示例。

有想法该怎么解决这个吗？

ps 我是一个完全的 maven n00b

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:06:46.030

您可以通过将以下 xml 片段部分添加到您的 pom.xml**构建来修复它**

```
<pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        org.mule.tools
                                    </groupId>
                                    <artifactId>
                                        maven-mule-plugin
                                    </artifactId>
                                    <versionRange>
                                        [1.5,)
                                    </versionRange>
                                    <goals>
                                        <goal>
                                            attach-test-resources
                                        </goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement> 
```

您可以在此处找到有关该主题的更多信息[：](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)

# php - $_post 不在 php 和 mysql 数据库中发布

> ID：11769105
> 
> 赞同：-2
> 
> 时间：2012-08-01T23:40:31.933
> 
> 标签：php, mysql, post

我有以下代码但是数据只进入申请人表而不是申请人编辑表，显然我在程序中遇到了这个错误，我可能认为它与 $_post 有关但我不确定，也我在另一台计算机上运行了完全相同的应用程序，它运行良好，这就是我在这台新机器上所做的，这似乎运行不正常，我安装了 apache，然后将所有设置复制到我的整个服务器文件夹中我的另一台机器，大多数事情似乎都在工作，但是当涉及到 $_post 时，这就是发生错误的地方。请我喜欢一些帮助和建议。

```
<?php
include("config.php"); // put the *FULL* path to the file.

$url = 'index.php';
header('Location: ' . $url);

//header('Location: ' . $url);

$values = $_POST;

foreach ($values as &$value) {
    $value = mysql_real_escape_string($value);
}

$sq1="INSERT INTO applicant (app_trn,app_file_id, app_fname, app_lname,app_mid_name, app_strt_add_1, app_strt_add_2,app_city, app_parish, app_postal,
 app_hme_cntct, app_cell1_cntct, app_cell2_cntct, app_email, app_gov_agncy, app_gov_agncy_strt,app_gov_agncy_city, app_gov_agncy_parish, app_post,
 app_grade,app_appointment_date,app_salary,app_gov_last_agncy1,app_gov_last_agncy1_street,app_gov_last_agncy1_city,app_gov_last_agncy1_parish,
 app_gov_last_agncy1_contact, app_gov_last_agncy2, app_gov_last_agncy2_street,app_gov_last_agncy2_city,app_gov_last_agncy2_parish,app_gov_last_agncy2_contact,
 app_gov_last_agncy3,app_gov_last_agncy3_street,app_gov_last_agncy3_city,app_gov_last_agncy3_parish,app_gov_last_agncy3_contact)

VALUES
('$values[app_trn]','$values[app_file_id]', '$values[app_fname]','$values[app_lname]', '$values[app_mid_name]','$values[app_strt_add_1]', '$values[app_strt_add_2]', 
'$values[app_city]', '$values[app_parish]', '$values[app_postal]', '$values[app_hme_cntct]', '$values[app_cell1_cntct]', '$values[app_cell2_cntct]',
'$values[app_email]', '$values[app_gov_agncy]', '$values[app_gov_agncy_strt]', '$values[app_gov_agncy_city]', '$values[app_gov_agncy_parish]','$values[app_post]',
'$values[app_grade]','$values[app_appointment_date]','$values[app_salary]','$values[app_gov_last_agncy1]','$values[app_gov_last_agncy1_street]',
'$values[app_gov_last_agncy1_city]','$values[app_gov_last_agncy1_parish]','$values[app_gov_last_agncy1_contact]', '$values[app_gov_last_agncy2]', 
'$values[app_gov_last_agncy2_street]','$values[app_gov_last_agncy2_city]','$values[app_gov_last_agncy2_parish]','$values[app_gov_last_agncy2_contact]',
'$values[app_gov_last_agncy3]','$values[app_gov_last_agncy3_street]','$values[app_gov_last_agncy3_city]','$values[app_gov_last_agncy3_parish]',
'$values[app_gov_last_agncy3_contact]')";

$result = mysql_query($sq1);
if (!$result) {
    die('Invalid query: ' . mysql_error());
}

mysql_query("INSERT INTO applicant_edit (applicant_edit_id,edit_app_trn)
VALUES ('','$values[app_trn]')");

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:52:17.187

在发生任何事情之前，您将所有流量重定向到 index.php

```
$url = 'index.php';
header('Location: ' . $url); 
```

删除它，看看会发生什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:39:44.610

1-删除 Paul 提到的标头重定向代码 2-尝试打印出一个值

```
echo $values[app_trn];
echo "'$values[app_trn]'"; //test same case (double quota and single quota) 
```

如果可以，那就是sql错误，尝试打印

```
echo mysql_error(); 
```

3-我还建议使用：

```
foreach ($values as &$value) {
    $value = mysql_real_escape_string($value);
} 
```

在此之后添加：

```
foreach ($values as $kc => $vc){
    $$kc = $vc;
 } 
```

现在可以使用键名访问所有值：

```
VALUES
('$app_trn','$app_file_id', '$valuesapp_fname', ... 
```

# azure - 如何将 system.serviceModel 放入 ServiceConfiguration.cscfg (Windows Azure)

> ID：11769108
> 
> 赞同：4
> 
> 时间：2012-08-01T23:40:46.923
> 
> 标签：azure, web-config

我有以下代码（用于 Microsoft 翻译）

```
 <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_LanguageService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://api.microsofttranslator.com/V2/soap.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_LanguageService" contract="TranslatorService.LanguageService" name="BasicHttpBinding_LanguageService" />
        </client>
    </system.serviceModel> 
```

它`web.config`运行良好。现在我需要将一些翻译功能放到 Azure Worker Role，所以我得到了错误`Could not find default endpoint element that references contract 'TranslatorService.LanguageService' in the ServiceModel client configuration section. This might be because no configuration file was found for your application, or because no endpoint element matching this contract could be found in the client element.`

我已经找到解决方案是将上述设置设置为`ServiceConfiguration.cscfg`，但是如何？我尝试了很多位置，但所有错误都无法部署。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:52:52.473

[ServiceConfiguration.cscfg](http://msdn.microsoft.com/en-us/library/windowsazure/ee758710.aspx)只能包含 Azure 特定配置（如实例数量、配置设置、指纹等）。

每当您需要进行常规 .NET 配置（例如 WCF）时，您只需为您的辅助角色创建一个**app.config**，就像您为控制台应用程序创建一个 app.config 并将您的配置放在这里一样。请注意，如果要将其添加到 app.config 中，则问题中的示例配置不完整。你应该把它包起来：

```
<?xml version="1.0"?>
<configuration>

  ...

</configuration> 
```

# c# - 如何根据参数启动 WPF

> ID：11769113
> 
> 赞同：61
> 
> 时间：2012-08-01T23:41:18.110
> 
> 标签：c#, wpf

我目前正在开发一个执行一些文件操作的应用程序，我希望能够通过控制台或 UI 进行操作（我选择了 WPF）。

我很想说：（伪）

```
if ( Environment.GetCommandLineArgs().Length > 0 )
{
    //Do not Open WPF UI, Instead do manipulate based
    //on the arguments passed in
}
else
{
    //Open the WPF UI
} 
```

我已经阅读了一些以编程方式启动 WPF 窗口/应用程序的不同方法，例如：

```
Application app = new Application ();
app.Run(new Window1()); 
```

但我不完全确定我只想将其插入控制台应用程序。

有没有人有关于我如何实现这一目标的最佳实践或建议？主要的处理功能在我创建的一个 Helper 类中。所以基本上我想要一个静态启动方法（如标准控制台应用程序创建）或 UI 来访问 Helper 类，具体取决于传入的参数。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-08-02T02:37:52.307

在`Application`课堂上有一个事件“ *StartUp* ”你可以使用它。它为您提供您通过命令提示符提供的参数。[这是来自MSDN](https://msdn.microsoft.com/en-us/library/system.windows.application.startup.aspx)的示例：

**应用程序.xaml**

```
<Application x:Class="WpfApplication99.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         Startup="App_Startup">
</Application> 
```

**应用程序.xaml.cs**

```
public partial class App : Application
{
    void App_Startup(object sender, StartupEventArgs e)
    {
        // Application is running
        // Process command line args
        bool startMinimized = false;
        for (int i = 0; i != e.Args.Length; ++i)
        {
            if (e.Args[i] == "/StartMinimized")
            {
                startMinimized = true;
            }
        }

        // Create main application window, starting minimized if specified
        MainWindow mainWindow = new MainWindow();
        if (startMinimized)
        {
            mainWindow.WindowState = WindowState.Minimized;
        }
        mainWindow.Show();
    }
} 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-05-06T14:25:55.323

有 2 个选项可以获取命令行参数
1) 如果你想阅读参数`OnStartup`。这有利于`args`.

覆盖`OnStartup`并`App.xaml.cs`查看类的`Args`属性`StartupEventArgs`。

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        foreach (string arg in e.Args)
        {
            // TODO: whatever
        }
        base.OnStartup(e);
    }
} 
```

2）另一种简单的方法是从环境对象中读取参数。

```
Environment.GetCommandLineArgs();
```

这可以从应用程序中的任何位置使用，例如从表单/页面也可以使用。

# php - 如何在 MediaWiki 扩展中获取图像？

> ID：11769115
> 
> 赞同：1
> 
> 时间：2012-08-01T23:41:39.370
> 
> 标签：php, mediawiki, mediawiki-api

我正在更新一个 MediaWiki 扩展，它可以很好地格式化 Bibtex 扩展（[这个](http://www.mediawiki.org/wiki/Extension%3aBibtex)）。一个功能是，当存在指向 PDF 的链接时，该链接会显示一个 PDF 图标。此图标是上传到 wiki 的任何其他文件的图像（即它不是扩展本身的一部分）。然后代码会像这样访问这个图像：

```
$im2 = Image::newFromName("PDF.png"); 
```

但是，Image 类已被弃用和删除（我使用的是 1.19 版）。我看到“图像”现在是“文件”，但我不清楚上面的新等价物是什么。

我可以硬编码图像文件名，但这不能移植到其他设置。如果可能的话，我想保留这种使用上传到 wiki 的图像的方法。

如何处理通过 MediaWiki API 上传到 MediaWiki 的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:18:37.810

看起来该`wfFindFile`功能现在可以这样做：

```
$im2 = wfFindFile("PDF.png"); 
```

# java - 使用斜线请求映射占位符

> ID：11769119
> 
> 赞同：1
> 
> 时间：2012-08-01T23:42:15.143
> 
> 标签：java, spring, spring-mvc

我想实现以下几点：

```
@RequestMapping( "/archive/{date}.html" ) // e.g. /archive/2012/08.html
public String listByDate( @PathVariable( "date" ) @DateTimeFormat( iso = ISO.DATE, pattern = "yyyy/MM" ) Calendar cal, ... ) 
```

但我只是得到一个404。

我想这是因为我试图在`{date}`占位符之间使用斜线？

我需要在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:44:55.940

为什么不拆分`{date}`成`{year}/{month}`？

```
@RequestMapping( "/archive/{year}/{month}.html" )
public String listByDate( @PathVariable( "year" )... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T01:32:07.243

要在 URL 参数中包含“/”，它需要进行 URL 编码（否则它看起来像一个路径元素）。

如果看起来像这样，您的请求应该可以工作：

```
/archive/2012%2F08.html 
```

# python - 尝试使用 python 发送电子邮件

> ID：11769124
> 
> 赞同：-1
> 
> 时间：2012-08-01T23:42:43.383
> 
> 标签：python, email

> **可能重复：**
> [使用 python 发送电子邮件](https://stackoverflow.com/questions/11257185/send-email-with-python)

我正在尝试使用 python 发送电子邮件，但是当我运行脚本时需要一两分钟，然后我收到此错误：

```
Traceback (most recent call last):
File "./emailer", line 19, in <module>
server = smtplib.SMTP(SERVER)
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/smtplib.py", line 239, in __init__
(code, msg) = self.connect(host, port)
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/smtplib.py", line 295, in connect
self.sock = self._get_socket(host, port, self.timeout)
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/smtplib.py", line 273, in _get_socket
return socket.create_connection((port, host), timeout)
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/socket.py", line 512, in create_connection
raise error, msg
socket.error: [Errno 60] Operation timed out 
```

这是脚本：

```
#!/usr/bin/env python

import smtplib

SERVER = 'addisonbean.com'

FROM = 'myemail@gmail.com'
TO = ['myemail@gmail.com']

SUBJECT = 'Hello!'

message = """\
Bla
Bla Bla 
Bla Bla Bla
Bla Bla Bla Bla
"""

server = smtplib.SMTP(SERVER)
server.sendmail(FROM, TO, message)
server.quit() 
```

我还尝试将我的站点 IP 地址作为服务器，但它做了同样的事情。

有人可以告诉我为什么会这样以及如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:45:01.957

这是关键点：

```
return socket.create_connection((port, host), timeout)
socket.error: [Errno 60] Operation timed out 
```

Python 说：**我无法连接到那个服务器，我试过了，但它似乎没有响应**。

这是第二个关键位：

```
SERVER = 'addisonbean.com' 
```

那不是邮件服务器，是吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T23:52:00.740

虽然`addisonbean.com`确实监听 25 端口和答案`220 accra.dreamhost.com ESMTP`- 您似乎在代理或某种防火墙后面。你可以`telnet addisonbean.com 25`从你的控制台做吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T00:39:28.630

看起来您正在托管服务提供商[dreamhost.com中托管您的页面。](http://dreamhost.com)

当您设置帐户时，他们可能让您有机会创建以您的域结尾的电子邮件帐户 ( *yaddayadda@addisonbean.com* )

您可能想要创建一个，获取信息：SMTP（“邮件服务器”）所在的主机、用户名、密码……您必须在脚本中填写所有这些信息。

我建议您使用另一个常规帐户（Gmail.com、~~Hotmail~~ Outlook.com）开始测试，并且您阅读（相当多）关于什么是 SMTP 服务器（这是您必须与之交谈的服务器）发送您的电子邮件）

这是一个应该使用 gmail 帐户发送电子邮件的简单脚本。用您的数据填写带有星号的信息，看看它是否有效：

```
#!/usr/bin/env python

import traceback
from smtplib import SMTP
from email.MIMEText import MIMEText

smtpHost = "smtp.gmail.com"
smtpPort = 587
smtpUsername = "***@gmail.com"
smtpPassword = "***"
sender = "***@gmail.com"

def sendEmail(to, subject, content):
    retval = 1
    if not(hasattr(to, "__iter__")):
        to = [to]
    destination = to

    text_subtype = 'plain'
    try:
        msg = MIMEText(content, text_subtype)
        msg['Subject'] = subject
        msg['From'] = sender # some SMTP servers will do this automatically, not all

        conn = SMTP(host=smtpHost, port=smtpPort)
        conn.set_debuglevel(True)
        #conn.login(smtpUsername, smtpPassword)
        try:
            if smtpUsername is not False:
                conn.ehlo()
                if smtpPort != 25:
                    conn.starttls()
                    conn.ehlo()
                if smtpUsername and smtpPassword:
                    conn.login(smtpUsername, smtpPassword)
                else:
                    print("::sendEmail > Skipping authentication information because smtpUsername: %s, smtpPassword: %s" % (smtpUsername, smtpPassword))
            conn.sendmail(sender, destination, msg.as_string())
            retval = 0
        except Exception, e:
            print("::sendEmail > Got %s %s. Showing traceback:\n%s" % (type(e), e, traceback.format_exc()))
            retval = 1
        finally:
            conn.close()

    except Exception, e:
        print("::sendEmail > Got %s %s. Showing traceback:\n%s" % (type(e), e, traceback.format_exc()))
        retval = 1
    return retval

if __name__ == "__main__":
    sendEmail("***@gmail.com", "Subject: Test", "This is a simple test") 
```

一旦您拥有域的等效信息（*smtpHost、smtpPort、smtpUsername...*），它也可以正常工作（取决于他们使用的端口，它可能是 25，这是非加密连接的默认值。. . 或不... 你必须与*dreamhost.com*核对）

请注意（因为您使用的主机可能与其他人共享其 SMTP 服务器）您的“发件人”可能是*yadddayadda@addisonbean.com*但连接到*dreamhost.com* SMTP 服务器的实际信息可能不同：我我猜 ' `smtpUsername`' 可能是您用于登录站点管理员的用户名， ' `smtpHost`' 可能会更改为类似的东西`smtp.dreamhost.com`......我真的不知道。

你有[很多](https://www.google.com/search?q=python%20smtplib%20example&ie=utf-8&oe=utf-8&client=ubuntu&channel=fs)关于如何做到这一点的资源。

您似乎也是一名设计师或摄影师...其中一个人们关心屏幕上的内容以及所有内容...然后您可能想调查什么是~~MiME~~[电子邮件](http://en.wikipedia.org/wiki/MIME)。你知道...所以电子邮件不只发送文本，但您可以在其中放入精美的 HTML...*您知道我在说什么吗？*

# javascript - 动态 javascript 加载和执行

> ID：11769126
> 
> 赞同：3
> 
> 时间：2012-08-01T23:42:58.733
> 
> 标签：javascript

我正在尝试根据 API 调用的返回值动态加载 Javascript。我动态插入脚本标签，但它没有被执行。有人可以帮助理解为什么吗？相关代码片段粘贴在下面

```
onError: function(code) {
      if(code == "false") {
        var headID = document.getElementsByTagName("head")[0];
        var scriptTag = document.createElement("script");
        scriptTag.type="text/javascript";
        scriptTag.src= 'scriptURL';
        headID.appendChild(scriptTag);
      }
} 
```

使用 firebug/chrome 检查器，我可以看到脚本标记已添加到 dom 但脚本未执行（至少我无法确定）。它是第 3 方脚本，因此我无法直接控制它，因此也无法修改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:46:56.867

在阅读了问题下方的评论后，似乎第三方脚本正在 window.onload 事件中完成其工作。许多程序员使用这种风格。

```
window.onload = function() {
    // Whatever task
}; 
```

如果在您动态添加脚本标记之前已经触发了页面的 onload 事件，则“任何任务”代码将永远不会执行。

检查第三方脚本的来源。如果它使用window.onload，你可以尝试调用window.onload(); 动态添加脚本标签后。

# file - 尝试使用 WMI 将文件从一台 XP PC 复制到另一台，因为 RPC 和 UNC 不可用

> ID：11769129
> 
> 赞同：4
> 
> 时间：2012-08-01T23:43:10.477
> 
> 标签：file, vbscript, copy, wmi

我是 VBScript 的新手。我找不到在 VBS 中使用 WMI 将文件从一台 XP 主机复制到另一台主机的方法。复制文件的常用方法（RPC - 远程过程调用、SMB、UNC）不适用于多个主机，但 WMI 可用于所有主机，我需要将文件从我的管理主机复制到目标 Windows 主机。我以为我会在那里找到一些示例代码，但我没有找到任何信息。也没有找到任何东西告诉我它不能完成。

源文件是我的管理计算机的“F:\TEMP”文件夹中的可执行文件和“test1.txt”。我想将文件放在远程主机 HOST1 的“C:\TEMP”文件夹中。我对两台主机都拥有完全的管理员权限。这是我到目前为止所拥有的，仅用于一个文件（以保持测试简单）：

```
strComputer = "HOST1"
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colFiles = objWMIService.ExecQuery( _
    "Select * from Win32_Directory where Name = 'c:\\temp'")
For Each objFiles in colFiles
    errResults  = objFolder.Copy("f:\temp\test1.txt")
    Wscript.Echo errResults
Next 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T07:59:50.693

我了解到 WMI 无法在远程主机上创建文件，也无法通过网络连接复制文件：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa389288%28v=vs.85% 29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389288%28v=vs.85%29.aspx)

但是，它可以运行 cmd 进程。这是弗兰克怀特的升 C 代码，后面是他的例子： [https ://stackoverflow.com/a/8913231/1569434](https://stackoverflow.com/a/8913231/1569434)

```
InputParameters("CommandLine") = "cmd /c echo myFTPCommands > c:\ftpscript.txt" 
```

您将需要四件事来使用以下所有 scriptlet，它们相互构建以使用 psexec 在远程主机上运行“普通”VBScript 或批处理脚本：

1.  远程主机的管理员权限；
2.  在远程主机上启用 WMI
3.  您的远程主机可以访问的网络共享（使用 RPC、UNC、FTP 等，但*不是DFS！（“分布式文件系统” - 见注释）；和*
4.  psexec.exe 和网络共享上的“正常”脚本。

**重要提示：**请勿使用***DFS***[映射](http://en.wikipedia.org/wiki/Distributed_File_System_%28Microsoft%29)网络共享！如果您将分布式文件系统用于网络共享***，它将***失败。无论您使用哪种操作系统（例如，XP、Win 7），根据您的尝试方式，您可能会得到一个错误代码是[“系统错误 1312” 。](http://social.technet.microsoft.com/Forums/en/w7itpronetworking/thread/cda92757-2f21-41e3-a244-65b5e8bc01cc)

当远程主机上的 RPC 不可用但 WMI 可用时，以下方法将在远程主机的 c:\temp 文件夹上创建一个本地 ASCII 文件，其中包含文本“myTextCommands”，不带引号。

```
' https://stackoverflow.com/questions/8884728/wmi-remote-process-to-copy-file
strCommand = "cmd /c echo myTextCommands > c:\temp\testscript.txt"
Set objWMIService = GetObject("winmgmts:" & "{impersonationLevel=impersonate}!\\" _
    & strComputer & "\root\cimv2")
Set objProcess = objWMIService.Get("Win32_Process")
errReturn = objProcess.Create(strCommand, null, null, intProcessID)
' See following link for error codes returned by errReturn
' http://msdn.microsoft.com/en-us/library/windows/desktop/aa389388(v=vs.85).aspx 
```

请注意上面脚本中的重要限制：它只能创建 ASCII 文件 - 而不是二进制文件。

让我们使用该技术来映射驱动器号：

```
strCommand = "cmd /c net use z: " & MyShare & " /user:%USERDOMAIN%\%USERNAME% " _
    & strPassword & ">" & strRemoteLog
Set objProcess = objWMIService.Get("Win32_Process")
Call errProcess 
```

其中“strRemoteLog”设置为“c:\temp\MyLog.txt”，提示“strPassword”（参见底部的完整脚本示例和参考），“errProcess”是一个子例程，使用上面提到的“cmd /c”技巧：

```
Sub errProcess
errReturn = objProcess.Create(strCommand, null, null, intProcessID)
If errReturn = 0 Then
    Wscript.Echo "Process was started with a process ID: " & intProcessID
    WScript.Sleep 5000
Else
    Wscript.Echo "Process could not be started due to error: " & errReturn
End If
End Sub 
```

映射网络驱动器后，将脚本复制到主机：

```
strCommand="cmd /c xcopy Z:\scripts\SCRIPT1.bat c:\temp\ >>" & strRemoteLog
Call errProcess 
```

SCRIPT1.bat 已准备就绪，因此在远程主机上针对它启动 psexec，向您的脚本传递一个变量 strUserID，该变量将在之前获得，例如：

```
strCommand="cmd /c Z:\psexec \\%COMPUTERNAME% /accepteula -s -n 120 " _
    & cmd /c c:\temp\SCRIPT1.bat " & strUserID & ">>" & strRemoteLog
Call errProcess 
```

psexec 完成后，您可能希望保存结果。所以你重命名日志文件，上传它，取消映射你的驱动器，并清理残留文件：

```
strCommand="cmd /c REN " & strRemoteLog & " SCRIPT1-%COMPUTERNAME%.txt"
Call errProcess
strCommand="cmd /c MOVE /Y c:\temp\SCRIPT1*.txt Z:\scripts\LOGS\"
Call errProcess
strCommand="cmd /c net use * /del /Y"
Call errProcess
strCommand="cmd /c del c:\temp\SCRIPT1*.bat /q"
Call errProcess 
```

你完成了。您已成功映射驱动器、针对远程主机运行例程脚本并上传其输出。

请注意，此方法也适用于带有 UAC 的 Windows 7 和 Windows 2008。

这是完整的“示例”集成脚本。随时提出修复、改进等建议。

```
On Error Resume Next

 MyShare="\\SHARE1"
 strRemoteLog="c:\temp\MapZ.txt"

' Set remote hostname
strComputer="HOST2"
'strComputer = InputBox("Enter Computer name", _
'"Find PC", strComputer)

' Set remote userid
strUserID="USERID1"
'strComputer = InputBox("Enter userid", _
'"Find User", strComputer)

' Enumerate cimv2 on remote host strComputer
Set objWMIService = GetObject("winmgmts:" & _
"{impersonationLevel=Impersonate}!//" & strComputer & "\root\cimv2")

' Verify remote host exists on domain
If( IsEmpty( objWMIService ) = True ) Then
    WScript.Echo( "OBJECT_NOT_INITIALIZED :: " & strComputer )
    WScript.Quit( OBJECT_NOT_INITIALIZED )
End If

' Prompt for masked password
strPassword=GetPass

' Build and run command to execute on strComputer
strCommand = "cmd /c net use z: " & MyShare & " /user:%USERDOMAIN%\%USERNAME% " & strPassword & ">" & strRemoteLog
Set objProcess = objWMIService.Get("Win32_Process")
Call errProcess

' Copy script(s) from MyShare to HOST2 since psexec cannot run scripts on shared drives
strCommand="cmd /c xcopy Z:\scripts\cleanpclocal.bat c:\temp\ /V /C /I /Q /H /R /Y>>" & strRemoteLog
Call errProcess

' Change directory to c:\temp
'strCommand="cmd /c cd c:\temp>" & strRemoteLog
'Call errProcess

' Start PSEXEC against script
strCommand="cmd /c Z:\psexec \\%COMPUTERNAME% /accepteula -s -n 120 cmd /c c:\temp\cleanpclocal.bat " & strUserID & ">>" & strRemoteLog
Call errProcess

' Rename logfile to include hostname, upload to share,  unmap networked drive, and delete script
strCommand="cmd /c REN " & strRemoteLog & " cleanpc-%COMPUTERNAME%.txt"
Call errProcess
strCommand="cmd /c MOVE /Y c:\temp\clean*.txt Z:\scripts\LOGS\"
Call errProcess
strCommand="cmd /c net use * /del /Y"
Call errProcess
strCommand="cmd /c del c:\temp\clean*.bat /q"
Call errProcess

WScript.Quit

' ***********
' APPENDIX
' Subroutines, functions
' ***********

' **SUBROUTINES**
'strCommand="cmd /c dir z:\scripts\>" & strRemoteLog ' Works to get dir of z:\scripts\

' Function to handle errReturn
Sub errProcess
WScript.Echo "strCommand=" & strCommand
errReturn = objProcess.Create(strCommand, null, null, intProcessID)

If errReturn = 0 Then
    Wscript.Echo "Process was started with a process ID: " & intProcessID
    WScript.Sleep 5000
Else
    Wscript.Echo "Process could not be started due to error: " & errReturn
End If
WScript.Echo

' Error return codes for Create method of the Win32_Process Class
' http://msdn.microsoft.com/en-us/library/windows/desktop/aa389388(v=vs.85).aspx
' 0=Successful Completion
' 2=Access Denied
' 3=Insufficient Privilege
' 8=Unknown failure
' 9=Path Not Found
' 21=Invalid Parameter

End Sub

' **FUNCTIONS**

' Subroutine to get masked password
Function GetPass
' Mask Passwords Using Internet Explorer
' Ensure you follow the technet.com instructions and create file password.htm
' http://blogs.technet.com/b/heyscriptingguy/archive/2005/02/04/how-can-i-mask-passwords-using-an-inputbox.aspx

Set objExplorer = WScript.CreateObject _
    ("InternetExplorer.Application", "IE_")

objExplorer.Navigate "file:///C:\SCRIPTS\password.htm"   
objExplorer.ToolBar = 0
objExplorer.StatusBar = 0
objExplorer.Width = 400
objExplorer.Height = 350 
objExplorer.Left = 300
objExplorer.Top = 200
objExplorer.Visible = 1             

Do While (objExplorer.Document.Body.All.OKClicked.Value = "")
    Wscript.Sleep 250                 
Loop 

strPassword = objExplorer.Document.Body.All.UserPassword.Value
strButton = objExplorer.Document.Body.All.OKClicked.Value
objExplorer.Quit
Wscript.Sleep 250

If strButton = "Cancelled" Then
    Wscript.Quit
'Else
'    Wscript.Echo strPassword
End If

' Return the password
GetPass = strPassword

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T13:56:40.700

首先，我认为您编写的代码中有一个错字：

```
errResults  = objFolder.Copy("f:\temp\test1.txt") 
```

我想你的意思是：

```
errResults  = objFiles.Copy("f:\temp\test1.txt") 
```

其次，我不知道您尝试做的事情是否可行。我认为您拥有的代码可能会将文件从远程计算机上的目录复制到远程计算机上的另一个目录。

但是，对于一种解决方案，如果 WMI 在所有计算机上都可以远程使用，则意味着至少有一个端口是打开的。如果是这种情况，是否还有其他开放的端口？如果是这样，也许您可​​以在您的管理主机上的端口 X 上设置一个 FTP 服务器，然后让其他主机通过自动化默认的 XP FTP 客户端来发送文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-24T12:44:56.167

我知道这个问题很老，但是当我试图找到一个解决方案时，我发现它会引导人们找到我在这里写下并发布的答案：

[.NET - 通过 LAN 将可执行文件复制到另一台计算机并执行它](https://stackoverflow.com/questions/3718546/net-copying-an-executable-across-lan-to-another-computer-and-executing-it/46910740#46910740)

简而言之，可以使用 WMI 回显任何文件（包括 exe）的 base64 转换，然后使用 certutil 对其进行解码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T15:14:11.700

您是否尝试过以下操作？

```
set fso = CreateObject("Scripting.FileSystemObject")
fso.CopyFile "f:\temp\test1.txt", "\\HOST1\C$\temp\test1.txt", true 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-02T21:54:08.777

WMI 是一个信息数据库。您不能使用它来复制文件。

# c - 鼠标悬停在标签项上的通知代码

> ID：11769131
> 
> 赞同：0
> 
> 时间：2012-08-01T23:43:15.703
> 
> 标签：c, winapi, tabs, tabitem

我有一个由`CreateWindowEx(NULL, WC_TABCONTROL,...)`. 当鼠标悬停在选项卡项上时，我想收到通知。选项卡控件具有样式`TCS_TOOLTIPS`，当鼠标在选项卡项上停留`TTDT_INITIAL`毫秒数（其默认值为双击时间）时，它将显示一个工具提示。

但是当鼠标悬停在标签项上时，我也需要立即通知。但我不想修改`TTDT_INITIAL`值。实际上，当鼠标悬停在未选中的选项卡项上时，它会默认将颜色更改为蓝色。但我找不到这件事的通知（及其接收者）。

所以我想知道是否有办法`be notified immediately when a mouse is over a tab item`（仅限winapi）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T23:52:55.817

没有针对该特定目的的通知。选项卡不是它们自己的控件，整个 TabControl 作为一个整体是一个控件。您可以做的是让 TabControl 的窗口过程捕获`WM_MOUSEMOVE`消息，然后调用`TabCtrl_HitTest()`以确定当前位于鼠标下方的选项卡。跟踪当前选项卡，以便您可以检测鼠标何时越过选项卡边界移动到新选项卡上。

# mysql - 数据建模/规范化问题

> ID：11769148
> 
> 赞同：0
> 
> 时间：2012-08-01T23:46:04.197
> 
> 标签：mysql, database, database-design, database-schema, database-normalization

我有一个正在处理的厨房食谱脚本，但无法访问连接表中的字段。我的表设置如下：

```
ingredients
-----------
ingredient_id (pk)
ingredient_name (pk)
ingredient_calories (pk)

recipes
-------
recipe_id (pk)
recipe_name (pk)

meals
-----
meal_id (pk)
meal_name (pk)

recipe_has_ingredients
----------------------
recipe_id (fk)
ingredient_id (fk)

meal_has_recipes
----------------
meal_id (fk)
recipe_id (fk) 
```

一份**食谱**包含许多成分，一**顿饭**包含许多食谱。

**问题是：**

虽然我可以从 recipe_has_ingredients 中选择 SUM(ingredient_calories)，但我无法通过 meal_has_recipes 表（计算一餐中的总卡路里）弄清楚如何做到这一点。

任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:12:09.407

您对事实表成分、膳食和食谱的主键进行了过度约束。只需使用 id 字段作为 pk。

您可以在任何名称字段上创建唯一约束。

配方有成分表应该有 recipe_id 和成分_id 作为复合主键。

这顿饭有食谱表应该有 meal_id 和 recipe_id 作为复合主键。

一顿饭的卡路里查询现在是

```
 select meal_name, sum ( ingredients_calories)   from

    meals, meal_has_recipes, recipes_has_ingredients, recipes, ingredients

   where

      meal_name = ' good   food'   

      and   meal_has_recipes.meal_id =  meals.meal_id 

      and   meals_has_recipes.recipe_id = recipes.recipe_id

      and   recipes.recipe_id = recipes_has_ingredients.recipe_id

      and    ingredients.ingredients_id = recipes_has_ingredients.ingredients_id; 
```

# python - Pycassa中的ReferenceField等价物？

> ID：11769149
> 
> 赞同：0
> 
> 时间：2012-08-01T23:46:07.360
> 
> 标签：python, cassandra, mongoengine, pycassa

我正在尝试了解 Cassandra/Pycassa 数据库设计。

使用Mongoengine，你可以使用“ReferenceField”引用另一个类，如下：

```
from mongoengine import *

class User(Document):
    email = StringField(required=True)
    first_name = StringField(max_length=50)
    last_name = StringField(max_length=50)

class Post(Document):
    title = StringField(max_length=120, required=True)
    author = ReferenceField(User) 
```

据我从文档中可以看出，Pycassa 等价物是这样的，但我不知道如何创建从 Post 类作者字段到 User 类的引用：

```
from pycassa.types import *
from pycassa.pool import ConnectionPool
from pycassa.columnfamilymap import ColumnFamilyMap
import uuid

class User(object):
    key = LexicalUUIDType()
    email = UTF8Type()
    first_name = UTF8Type()
    last_name = UTF8Type()

class Post(object):
    key = LexicalUUIDType()
    title = UTF8Type()
    author = ??? 
```

做这样的事情的首选方法是什么？显然，我可以将 User 键放在 Post author 字段中，但我希望有更好的方法可以在幕后处理所有这些，例如使用 Mongoengine。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:36:19.370

我认为您真的误解了 Cassandra 的数据模型。在继续之前，您应该阅读[Cassandra 数据模型。](http://wiki.apache.org/cassandra/DataModel/)

pycassa 没有你上面定义的“对象”的概念。只有列族、行键类型和列类型。在 Cassandra 中，不存在从一个列族到另一个列族的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:10:12.160

@jterrace 是正确的，您可能以错误的方式进行此操作。使用 Cassandra，您不会过多关注对象、它们之间的关系以及如何对其进行规范化。相反，您必须问自己“我需要哪些查询才能有效地回答？”，然后为这些查询预先构建答案。这通常涉及非规范化和“宽行”模型的混合。我强烈建议您在线阅读一些有关 Cassandra 数据建模的文章。

话虽如此，pycassa 的 ColumnFamilyMap 只是一个可以减少样板的薄包装器，仅此而已。它不会尝试为任何复杂的事情提供支持，因为它不知道您需要能够回答哪些类型的查询。因此，具体来说，您可以将匹配的用户的 LexicalUUID 存储在作者字段中，但是当您获取 Post 对象时，pycassa 不会自动为您获取该用户对象。

# sql - 自动获取 DataMapper 中的列名

> ID：11769152
> 
> 赞同：1
> 
> 时间：2012-08-01T23:46:27.810
> 
> 标签：sql, schema, datamapper, database-schema

在 ActiveRecord 我有：

```
class Patient < ActiveRecord::Base
end 
```

在 DataMapper 我有：

```
class Patient
  include DataMapper::Resource

  property :id, Serial
  property :name, String
  has n, :orders
  # ... a lot of properties and associations more
end 
```

如何在 DataMapper 中自动获取列名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T13:30:06.007

这个问题似乎有点老了，但有一个叫做“dm-is-reflective”的宝石。它基本上为您完成了大部分映射。如果您使用的是时间戳，那么您需要将 DateTime 列与以下内容进行映射。`property :created_at, DateTime, :field => 'create_date'`

只需安装 gem，在您的模型中使用它`require 'dm-is-reflective'`，然后在每个类中您可以执行以下操作：

```
class Comment
include DataMapper::Resource
is :reflective

    # manually mapping a timestamps field
property :created_at, DateTime, :field => 'create_date' 
reflect /.*/  # This is just one way to do this. 
end 
```

还有其他几种设置模型的方法，但这种方法对我来说效果很好。

有关更多信息... [https://github.com/godfat/dm-is-reflective](https://github.com/godfat/dm-is-reflective)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T01:07:58.630

你没有。Datamapper 的主要功能之一是您可以在模型中定义映射，这就是为什么 Datamapper 在处理遗留模式时是一个不错的选择，因此您可以使用 rails 列命名约定而无需更改整个数据库模式。

```
property :deleted,  Boolean,  field: 'isdeleted' 
```

查看文档以获取更多信息，但简而言之，这是 datamapper 的一项功能，而不是限制。我有点喜欢在模型中明确定义表属性。

[http://datamapper.org/why.html](http://datamapper.org/why.html)

# asp.net - 将电子邮件正则表达式添加到 Sitefinity 注册小部件

> ID：11769154
> 
> 赞同：0
> 
> 时间：2012-08-01T23:46:38.793
> 
> 标签：asp.net, regex, email, sitefinity, sitefinity-4

有谁知道如何将电子邮件正则表达式添加到 Sitefinity 的注册小部件？

我是 Sitefinity 和正则表达式的新手，但我想在注册期间限制用户注册到特定的电子邮件地址域，如下所示：

```
^[\w\-\.\+]+\@\b\.\mydomain\b\.\bcom\b$ 
```

我认为这可能会排除除@mydomain.com 之外的所有电子邮件地址。如果可行，我需要找到合适的位置来放置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:12:53.357

1.  首先下载[JustDecompile](http://www.telerik.com/products/decompiler.aspx)
2.  反编译 Telerik.Sitefinity.Resources.dll
3.  在注册小部件的高级设置下，查看“LayoutTemplatePath”字段并在刚刚反编译中找到该资源文件（在 SF5.4 中它是“Telerik.Sitefinity.Resources.Templates.Frontend.Security.RegistrationForm.ascx”可能与SF4 中的位
4.  从 JustDecompile 复制小部件代码
5.  在 VisualStudio 或您的选择中创建一个新的 .ascx
6.  为电子邮件文本框添加正则表达式验证器
7.  在管理区域的 sitefinity 中注册您的小部件

作为最后一种选择，您可以使用 jQuery 来检查该字段。使用`

```
var emRegEx = \^[\w.+-]+@mydomain\.com$\;
$("form").submit(function(){
   if(emRegEx.test($("textboxID Or Class").val())){
      $("textboxID Or Class").before("<div style='color:red;'>Email Denied</div>");
      return false;
   }
   else
   {
      return true;
   }
}); 
```

# c++ - 在objective-c中使用模板调用c++函数

> ID：11769156
> 
> 赞同：0
> 
> 时间：2012-08-01T23:46:48.603
> 
> 标签：c++, objective-c, ios, xcode, objective-c++

我试图在目标 c 中调用一个 c++ 模板函数，如下所示：

```
template<typename T>
void test() {
    ...

    std::cout << "hello world! \n";
} 
```

我在调用时收到以下错误`test()`：

```
Undefined symbols for architecture armv7:
"test()", referenced from:
 -[viewController onNext] in ViewController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

但是，如果我取出`template<typename T>`它工作正常，我需要使用 c++ 库中的一些需要模板的函数，我无法绕过它。关于发生了什么的任何想法？

我对c ++没有任何经验……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T23:58:36.477

在 C++ 中，当您调用模板化函数时，如果模板参数（即代码中的 T）不能从传递给函数的参数中推导出来（这是您的情况，因为您的函数没有任何参数），您应该像这样调用函数：

测试<某些类型>();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:16:11.977

在 C++ 中：

*   `void test()`
*   `template<>void test<int>()`
*   `template<>void test<float>()`

（例如）都是不同的符号。通过删除模板/参数，它是一个不同的符号，与您调用的符号匹配`-[viewController onNext]`。

# html - HTML-CSS 跨浏览器颜色问题

> ID：11769159
> 
> 赞同：1
> 
> 时间：2012-08-01T23:47:30.270
> 
> 标签：html, css, colors, cross-browser

我在 html 页面中使用以下 CSS 代码来设置 H1 和 H2 颜色值。

```
<style type="text/css">
img
{border-style: none;}
H1 {color: "#33CCFF"}
H2 {color: "#33CCFF"}
</style> 
```

这在 Internet Explorer 上运行良好，但在 Chrome、Safari 和 Firefox 上却失败了。

如何解决此问题以支持所有浏览器？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T23:48:49.803

你需要去掉颜色周围的'"'

*   ; 总是在 css 声明的末尾，像这样：

H1 {color:#FFF;width:100%;} H1#ID.class {color:#FFF;width:100%;} <==== 组合 ID + Class 的正确顺序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T23:55:07.503

正如 Voodoo 所说，您需要删除引号，但您还应该用分号 (;) 关闭颜色声明。没有它它可能会工作，但你真的是在自找麻烦。;)

# c#-4.0 - .NET 中的叠加样式设计

> ID：11769163
> 
> 赞同：1
> 
> 时间：2012-08-01T23:48:03.473
> 
> 标签：c#-4.0, video-streaming, television, overlays, epg

我目前正在开发一个将在 C# .NET 中创建 TV Guide 应用程序的应用程序。问题是当用户选择打开电视指南的选项时，我想保持当前流播放，但将其最小化到右上角并继续播放，同时允许用户浏览 EPG 数据并拥有较小的视频播放。

我应该只放置所有标签/按钮/等吗？在面板顶部（我用来显示实际视频），并根据需要隐藏/显示它们，或者有更好的方法吗？

附带说明一下，我假设标签将是显示当前频道信息的最佳解决方案，但如果有更好的选择，我很想听听。

![在此处输入图像描述](../Images/66b8231a64a3d40deff3e63711404069.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:22:09.660

我将基于这是在 Windows 中运行的本机 Windows Winforms 应用程序的假设来回答。如果这不正确，请编辑您的问题并提供有关您的项目和目标平台的更多详细信息。

## 选择 #1 是 DirectX

这类多媒体应用程序最好使用 DirectX 编写。您实际上是从视频性能的角度（以及可能的用户输入角度）编写“游戏”。您希望在显示菜单时保持视频流（甚至可能为菜单设置动画）。DirectX 将允许您利用现代图形处理器在屏幕某处绘制/渲染带有视频的漂亮菜单/用户界面。

您可以在不使用 DirectX 编写自己的菜单渲染的情况下做到这一点吗？大概。但它会很重，并且可能会影响系统性能，或者至少会影响视频性能和整体应用程序性能。

所以选择#1 是 DirectX - 通过在网络上搜索“C# 游戏编程”会有这种编程的示例。

使用 DirectX 之类的东西并在整个应用程序界面上处理用户输入也将允许对用户输入进行更多控制。例如，您可能决定支持拖动样式滚动。整个菜单可以平滑地向上滚动以在下面显示更多频道，等等……这对于许多 Winform 控件（如按钮）的集合将非常困难，而 DirectX 则相当容易（或至少是现实的）。

## 选择 #2 - Winforms

好的，现在您在问题中暗示的选择 #2 是使用本机 C# 控件，如按钮、标签、面板等。您可以完成这项工作，但您将牺牲很多功能并在性能上花费很多。

例如，让我们看看您发布的屏幕截图。我假设表格将被分成按钮，每个单元格都是面板上的一个按钮？您可以单击一个频道来选择它，或者单击一个节目开始观看那个节目？（我在这里猜。）该屏幕截图中看起来至少有 22 个按钮。现在假设您向下滚动屏幕以显示更多频道或向右滚动以在时间轴中稍后查看，该操作将需要销毁/处置所有按钮，找出它需要哪些新按钮，全部创建它们，大小/位置它们并将它们添加到您的面板中（特别是在显示区域中，在任何时间点，每个通道的显示/块大小的长度都会发生变化）。销毁按钮和创建按钮的操作很笨重，它会花费很多性能，可能会使 UI 至少闪烁一次，并且动画不会流畅。此外，用户交互对于每个单独的按钮都是本地的，很难实现像滑动样式滚动这样的东西，因为每个按钮都有自己的鼠标事件等。

好的，我只是想到了另一种 winforms 技术，一种很棒的技术，但我知道它会突然出现在您的脑海中！如果您制作了一个带有滚动条的面板，其中包含所有可用频道的大量按钮，该怎么办？这使您滚动更顺畅并减少了销毁/创建新按钮的问题，对吗？好吧，那也将是一场表演噩梦！尝试在滚动面板中放置 100-200 个按钮，您很快就会发现这是个坏主意。

## 更好的 Winforms 技术

如果您必须走 winforms 路线（因为您不能/不会使用 DirectX），那么您应该以 DirectX 风格的方式实现菜单。

1.  创建一个从面板继承的菜单控件类
2.  覆盖绘图/绘画（`Control.OnPaintBackground`和`Control.OnPaint`），覆盖键盘和鼠标处理程序等。
3.  `PaintEventArgs`使用 .Net Graphics 类（在 OnPaint 事件中提供）在面板内绘制菜单
4.  处理所有鼠标/键盘事件并在必要时重绘您的控件（使用`Control.Invalidate()`或`Control.Refresh()`.

您不会获得 DirectX 性能，但它会比大量控件更好。（您将掌握正确的技术，但可能无法获得 DirectX 可以利用的图形处理器加速的性能优势。）

# r - 如何使用 R 中的 plot() 函数使基本绘图更漂亮

> ID：11769164
> 
> 赞同：0
> 
> 时间：2012-08-01T23:48:03.863
> 
> 标签：r, plot

我正在创建一个 R 脚本来生成一个由多条线组成的图表。我制作了一个基本图表，并设法平滑了每条绘制的线。但是，我想通过执行以下操作来美化图表：

1.  目前，每条线都绘制为平滑线。我想使用其他线型绘制平滑线，例如点划线、点划线等。

2.  我想在图表中添加一个图例，并在图例中显示一条线（与它在主图表中表示的线的颜色相同）。

3.  指定主图表标题的字体大小，x 和 y

这是我到目前为止所拥有的：

```
dat  <- read.csv(filename, sep=',')

xvals <- dat$xvals
y1  <- dat$y1
y2  <- dat$y2
y3  <- dat$y3
y4  <- dat$y4
y5  <- dat$y5
y6  <- dat$y6

lo1 <- loess(y1~xvals)
lo2 <- loess(y2~xvals)
lo3 <- loess(y3~xvals)
lo4 <- loess(y4~xvals)
lo5 <- loess(y5~xvals)
lo6 <- loess(y6~xvals)

plot(xvals,y1, xlab='X label', ylab='Y label', type='n')
xl <- seq(min(xvals),max(xvals), (max(xvals) - min(xvals))/1000)
lines(xl, predict(lo1,xl), col='gray', lwd=1)
lines(xl, predict(lo2,xl), col='pink', lwd=1)
lines(xl, predict(lo3,xl), col='red', lwd=1)
lines(xl, predict(lo4,xl), col='cyan', lwd=1)
lines(xl, predict(lo5,xl), col='black', lwd=1)
lines(xl, predict(lo6,xl), col='green', lwd=1)

legend("topright", "(x,y)", pch=1, lty=c(1,1), # gives the legend appropriate symbols (lines)
       , lwd=c(1,1),col=c("blue","red"), inset = .02) 
```

如何修改上面的代码以实现上面的要求 1 - 3？

顺便说一句，我知道ggplot。我想我会坚持使用 plot() - 我发现 ggplot 太神秘、令人费解和愤怒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T00:39:26.170

由于我已经开始研究答案：

补一些数据：

```
dat <- data.frame(xvals=1:100,
                  y=matrix(rnorm(600),ncol=6)) 
```

创建公式，应用`loess`和`predict`，将结果折叠成一个矩阵：

```
formulae <- lapply(names(dat)[-1],
                   function(yvar) as.formula(paste(yvar,"xvals",sep="~")))
loessfits <- lapply(formulae,loess,data=dat)

xl <- with(dat,seq(min(xvals),max(xvals), length.out=1000))
pvals <- do.call(cbind,lapply(loessfits,predict,newdata=data.frame(xvals=xl))) 
```

设置参数（总是值得回去花更多时间阅读`?par`）：

```
## set box type (open), horizontal tick labels, axis label and title size
par(bty="l",las=1,cex.main=2,cex.lab=2) 
```

设置 color(u)rs 和线型：

```
cvec <- c("gray","pink","red","cyan","black","green")
lvec <- 1:6 
```

创建情节：

```
matplot(xl,pvals,type="l",col=cvec,lty=lvec,
        xlab='X label', ylab='Y label')    
legend("topright", paste0("L",1:6), pch=1, lty=lvec,col=cvec, inset = .02) 
```

![在此处输入图像描述](../Images/ce6fc0b73f71433806830b19a86d2970.png)

# sql-server - 查找列依赖

> ID：11769172
> 
> 赞同：23
> 
> 时间：2012-08-01T23:49:16.517
> 
> 标签：sql-server, tsql, sql-server-2008, sql-server-2008-r2

如何查找依赖于表格特定列的对象。

前任：

表：SomeTable

列：col1 pk，col2，col3

我想找到所有依赖 col1 (Pk) 的对象

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-11-30T12:41:33.213

@NoFuchsGavin 的脚本通常效果很好，但由于存在问题而存在一些限制`sysdepends`（请参阅[Pinal Dave](http://blog.sqlauthority.com/2010/02/04/sql-server-get-the-list-of-object-dependencies-sp_depends-and-information_schema-routines-and-sys-dm_sql_referencing_entities/)的这篇博文，了解给出错误结果的示例）。

[微软](https://msdn.microsoft.com/en-us/library/ms190325.aspx)还建议您避免`sysdepends`在新的开发工作中使用。

因此，我们可以按照[这里](https://36chambers.wordpress.com/2012/12/21/finding-references-to-particular-columns-in-procedures-and-views/)的建议使用`sys.dm_sql_referencing_entities`and 。`sys.dm_sql_referenced_entities`

但是我注意到，由于为`referenced_minor_name`NULL，这有时会排除列引用。因此，我添加了另一个可能引入误报但确保不会从结果集中省略列引用的条件。

```
DECLARE @SchemaName sysname = '{0}';
DECLARE @TableName sysname  = '{1}';
DECLARE @ColumnName sysname = '{2}';

SELECT
    @SchemaName + '.' + @TableName                                      AS [USED_OBJECT],
    @ColumnName                                                         AS [COLUMN],
    referencing.referencing_schema_name + '.' + referencing_entity_name AS USAGE_OBJECT,
    CASE so.type
        WHEN 'C' THEN 'CHECK constraint'
        WHEN 'D' THEN 'Default'
        WHEN 'F' THEN 'FOREIGN KEY'
        WHEN 'FN' THEN 'Scalar function' 
        WHEN 'IF' THEN 'In-lined table-function'
        WHEN 'K' THEN 'PRIMARY KEY'
        WHEN 'L' THEN 'Log'
        WHEN 'P' THEN 'Stored procedure'
        WHEN 'R' THEN 'Rule'
        WHEN 'RF' THEN 'Replication filter stored procedure'
        WHEN 'S' THEN 'System table'
        WHEN 'SP' THEN 'Security policy'
        WHEN 'TF' THEN 'Table function'
        WHEN 'TR' THEN 'Trigger'
        WHEN 'U' THEN 'User table' 
        WHEN 'V' THEN 'View' 
        WHEN 'X' THEN 'Extended stored procedure'
    END                                             AS USAGE_OBJECTTYPE,
    so.[type]                                       AS USAGE_OBJECTTYPEID
FROM sys.dm_sql_referencing_entities
    (
        @SchemaName + '.' + @TableName,
        'object'
    ) referencing
    INNER JOIN sys.objects so 
        ON referencing.referencing_id = so.object_id
WHERE
    EXISTS
    (
        SELECT
            *
        FROM
            sys.dm_sql_referenced_entities
            (
                referencing_schema_name + '.' + referencing_entity_name,
                'object'
            ) referenced
        WHERE
            referenced_entity_name = @TableName
            AND 
            (
                referenced.referenced_minor_name LIKE @ColumnName   
                -- referenced_minor_name is sometimes NULL
                -- therefore add below condition (can introduce False Positives)
                OR
                (
                    referenced.referenced_minor_name IS NULL 
                    AND 
                    OBJECT_DEFINITION
                    (
                         OBJECT_ID(referencing_schema_name + '.' + referencing_entity_name)
                    ) LIKE '%' + @ColumnName + '%'
                )
            )
    )
ORDER BY
    USAGE_OBJECTTYPE,
    USAGE_OBJECT 
```

*以上脚本基于@NoFuchsGavin 的回答和[这篇博](https://36chambers.wordpress.com/2012/12/21/finding-references-to-particular-columns-in-procedures-and-views/)文。*

我很想知道是否有人设法找到一种不会引入假阴性或阳性的更好方法。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-02T07:13:41.320

试试这个查询，它会给你一些我认为你正在寻找的结果。
要进行过滤，请在 c1.name 或 c2.name 列中搜索值。
要查找对某个列的所有引用，请使用 c2.name 作为列名，使用 OBJECT_NAME(k.referenced_object_id) 作为包含 c2 列的表:)

祝你好运！

```
 select  OBJECT_NAME(k.parent_object_id) as parentTable
          , c1.name as parentColumn
          , OBJECT_NAME(k.referenced_object_id) as referencedTable
          , c2.name as referencedColumn
    from    sys.foreign_keys k
            inner join sys.foreign_key_columns f
              on  f.parent_object_id = k.parent_object_id
              and f.constraint_object_id = k.object_id
            inner join sys.columns c1
              on  c1.column_id = f.parent_column_id
              and c1.object_id = k.parent_object_id
            inner join sys.columns c2
              on  c2.column_id = f.referenced_column_id
              and c2.object_id = k.referenced_object_id
    where   c2.name = 'Column'
    and     OBJECT_NAME(k.referenced_object_id) = 'Table' 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-05-20T07:06:36.780

这应该工作！

```
 -- Search in All Objects
SELECT OBJECT_NAME(OBJECT_ID),definition
FROM sys.sql_modules
WHERE definition LIKE '%' + 'ColumnToBeSearched' + '%'
Order by OBJECT_NAME(OBJECT_ID)
GO

-- Search in Stored Procedure Only
SELECT DISTINCT OBJECT_NAME(OBJECT_ID),
object_definition(OBJECT_ID)
FROM sys.Procedures
WHERE object_definition(OBJECT_ID) LIKE '%' + 'ColumnToBeSearched' + '%'
GO 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-02-06T11:43:43.667

只需替换 {0} 和 {1}！

```
declare @tbl_nme as varchar(50)
declare @col_nme as varchar(50)
declare @level int
set @level = 1
set @tbl_nme= '{0}' --TableName 
set @col_nme= '{1}' --ColumnName 

select 
  obj.name as obj_nm
, col.name as col_nm
, depobj.name as dep_obj_nm
, CASE depobj.type
     WHEN 'C' THEN 'CHECK constraint'
     WHEN 'D' THEN 'Default'
     WHEN 'F' THEN 'FOREIGN KEY'
     WHEN 'FN' THEN 'Scalar function' 
     WHEN 'IF' THEN 'In-lined table-function'
     WHEN 'K' THEN 'PRIMARY KEY'
     WHEN 'L' THEN 'Log'
     WHEN 'P' THEN 'Stored procedure'
     WHEN 'R' THEN 'Rule'
     WHEN 'RF' THEN 'Replication filter stored procedure'
     WHEN 'S' THEN 'System table'
     WHEN 'TF' THEN 'Table function'
     WHEN 'TR' THEN 'Trigger'
     WHEN 'U' THEN 'User table' 
     WHEN 'V' THEN 'View' 
     WHEN 'X' THEN 'Extended stored procedure'
  END as dep_obj_type 
, null as dep_col_nm
, depobj.type as dep_obj_typeID
, @level as level
into #temp
from   sysobjects obj 
   join   syscolumns col on obj.id = col.id 
   left   join (sysdepends dep join sysobjects depobj on depobj.id = dep.id) 
         on obj.id = dep.depid 
        and col.colid = dep.depnumber 
where  obj.name = @tbl_nme
   and col.name = @col_nme

while (@@rowcount > 0)
begin
set @level = @level + 1
insert into #temp
select 
  obj.name as obj_nm
, col.name as col_nm
, depobj.name as dep_obj_nm
, CASE depobj.type
     WHEN 'C' THEN 'CHECK constraint'
     WHEN 'D' THEN 'Default'
     WHEN 'F' THEN 'FOREIGN KEY'
     WHEN 'FN' THEN 'Scalar function' 
     WHEN 'IF' THEN 'In-lined table-function'
     WHEN 'K' THEN 'PRIMARY KEY'
     WHEN 'L' THEN 'Log'
     WHEN 'P' THEN 'Stored procedure'
     WHEN 'R' THEN 'Rule'
     WHEN 'RF' THEN 'Replication filter stored procedure'
     WHEN 'S' THEN 'System table'
     WHEN 'TF' THEN 'Table function'
     WHEN 'TR' THEN 'Trigger'
     WHEN 'U' THEN 'User table' 
     WHEN 'V' THEN 'View' 
     WHEN 'X' THEN 'Extended stored procedure'
  END as dep_obj_type 
, null as dep_col_nm
, depobj.type as dep_obj_typeID
, @level as level
from   sysobjects obj 
   join   syscolumns col on obj.id = col.id 
   left   join (sysdepends dep join sysobjects depobj on depobj.id = dep.id) 
         on obj.id = dep.depid 
        and col.colid = dep.depnumber 
where  exists(select 1 from #temp a where obj.name = a.dep_obj_nm and 
col.name = a.dep_col_nm and level = @level - 1 and dep_col_nm is not null)
end

select 
   obj_nm AS 'TABLE',
   col_nm AS 'COLUMN',
   dep_obj_nm AS 'USAGE_OBJECT',
   dep_obj_type AS 'USAGE_OBJECTTYPE',
   dep_obj_typeID AS 'USAGE_OBJECTTYPEID'
from #temp
drop table #temp 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-06-15T17:50:17.973

[上面接受的答案](https://stackoverflow.com/a/11772686/127497)中提供的 sql应包括 sys.foreign_keys 和 sys.foreign_key_columns 之间的附加连接条件。请参见下面以“and”开头的行：

```
from    sys.foreign_keys k
        inner join sys.foreign_key_columns f
          on  f.parent_object_id = k.parent_object_id
               and f.constraint_object_id = k.object_id 
```

作为参考，这里是修改后的整个脚本：

```
select  OBJECT_NAME(k.parent_object_id) as parentTable
        , c1.name as parentColumn
        , OBJECT_NAME(k.referenced_object_id) as referencedTable
        , c2.name as referencedColumn
from    sys.foreign_keys k
        inner join sys.foreign_key_columns f
            on  f.parent_object_id = k.parent_object_id
            and f.constraint_object_id = k.object_id
        inner join sys.columns c1
            on  c1.column_id = f.parent_column_id
            and c1.object_id = k.parent_object_id
        inner join sys.columns c2
            on  c2.column_id = f.referenced_column_id
            and c2.object_id = k.referenced_object_id
where   c2.name = 'GUID'
and     OBJECT_NAME(k.referenced_object_id) = 'AuthDomain' 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-02T04:54:33.983

试试这个：这将给出所有引用表的 Pk 的对象名称。

```
select  OBJECT_NAME(parent_object_id) from sys.foreign_keys where referenced_object_id = OBJECT_ID('YourTableName') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-21T09:16:30.680

查找特定的列依赖项

```
选择对象名称（reference_id），
    参考数据库名称，
    referenced_schema_name,
    参考实体名称
FROM sys.sql_expression_dependencies
WHERE OBJECT_NAME(referenced_id) = 'table_name'
    AND OBJECT_DEFINITION(referencing_id) LIKE '%field_name%';

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-11T19:54:03.927

这应该可以解决问题：

```
SELECT OBJECT_NAME (referencing_id), referencing_id, referenced_id 
FROM  sys.sql_expression_dependencies d
WHERE OBJECT_NAME(d.referenced_id) = '<TABLE_NAME>'
      AND OBJECT_DEFINITION(referencing_id) = '<COLUMN_NAME>'; 
```

来源：[http ://www.mssqltips.com/sqlservertip/2999/different-ways-to-find-sql-server-object-dependencies/](http://www.mssqltips.com/sqlservertip/2999/different-ways-to-find-sql-server-object-dependencies/)

或者，要显示表上的所有依赖项，请使用

```
EXEC sp_depends <TABLE_NAME> 
```

来源：[https ://msdn.microsoft.com/en-us/library/ms189487.aspx](https://msdn.microsoft.com/en-us/library/ms189487.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-08T06:02:22.513

它工作100％正常。尝试使用这个。它会给你额外的细节。谢谢

```
SELECT
FK.TABLE_NAME AS Key_Table,
CU.COLUMN_NAME AS Foreignkey_Column,
PK.TABLE_NAME AS Primarykey_Table,
PT.COLUMN_NAME AS Primarykey_Column,
C.CONSTRAINT_NAME AS Constraint_Name
FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS C
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS FK
ON C.CONSTRAINT_NAME = Fk.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS PK
ON C.UNIQUE_CONSTRAINT_NAME = PK.CONSTRAINT_NAME
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE CU
ON C.CONSTRAINT_NAME = CU.CONSTRAINT_NAME
INNER JOIN (SELECT
i1.TABLE_NAME,
i2.COLUMN_NAME
FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS i1
INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE i2
  ON i1.CONSTRAINT_NAME = i2.CONSTRAINT_NAME
WHERE i1.CONSTRAINT_TYPE = 'PRIMARY KEY') PT
  ON PT.TABLE_NAME = PK.TABLE_NAME
WHERE PK.TABLE_NAME = 'HRM_tbEmployee'
AND PT.COLUMN_NAME = 'EmployeeID'; 
```

# javascript - 使用 JavaScript 在本地处理文件

> ID：11769176
> 
> 赞同：1
> 
> 时间：2012-08-01T23:49:36.843
> 
> 标签：javascript, file-upload, download, local

使用 JavaScript 我想：

1.  在本地生成文件并将其提供给用户
    `Content-Disposition: attachment;`

2.  通过表单从用户本地加载文件`<input type="file" />`

这可能吗？如果可以，最直接的方法是什么？

# ruby - Ruby 1.9.3 和 OS X

> ID：11769179
> 
> 赞同：0
> 
> 时间：2012-08-01T23:50:20.300
> 
> 标签：ruby, rvm, sass

在 bash 中，如果我运行`ruby -v`它报告我正在使用`1.9.3p194`.

但是，我正在使用 CodeKit 编译 Compass 项目，并且它不断返回此错误：

```
Compass was unable to compile one or more files in the project: 

LoadError on line 31 of /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb: no such file to load -- toolkit
Run with --trace to see the full backtrace 
```

我已将 CodeKit 正确配置为运行 Sass 3.2 和 Compass 0.13，所以我不确定它为什么一直在上面的目录中寻找 Ruby。有任何想法吗？我也在使用 RVM。

这是我在 .bash_profile 中的配置路径：

```
PATH="/usr/local/bin:$PATH"
PATH="$PATH:$HOME/bin"
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

和.bashrc：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:40:56.310

我最终在 CodeKit 上使用 Compass.app。就目前而言，CodeKit 似乎在 Sass 3.2 上运行有问题。我在使用 Compass.app 时没有遇到任何问题。

# r - 折叠矩阵以将一列中的值与另一列中的值相加

> ID：11769190
> 
> 赞同：3
> 
> 时间：2012-08-01T23:51:56.407
> 
> 标签：r, matrix

我有一个包含三列的矩阵：县、日期和 ED 就诊次数。每个县的日期重复，如下所示（仅作为示例）：

```
 County A  1/1/2012  2
  County A  1/2/2012  0
  County A  1/3/2012  5
  ... etc.
  County B  1/1/2012  3
  County B  1/2/2012  4
  ... etc. 
```

我想折叠这个矩阵来总结每个日期所有县的访问量。所以它看起来像这样：

```
1/1/2012  5
1/2/2012  4
etc. 
```

我正在尝试`"table()"`在 R 中使用该函数，但似乎无法让它以这种方式按日期对访问进行操作。当我这样做`"table(dt$date, dt$Visits)"`时，它会给我一个这样的频率表：

```
 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
  2011-01-01 3 1 2 0 1 1 0 2 0 0  0  0  0  0  0  0
  2011-01-02 2 3 1 0 0 1 0 0 1 0  2  0  0  0  0  0
  2011-01-03 3 1 1 2 1 0 0 0 0 1  0  0  0  0  1  0 
```

有什么建议么？是否有更好的功能可以使用，也许是某种“总和”？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T23:58:31.713

`table()`不是用于值的总和，而是用于记录计数。如果你想使用`tapply`你会得到一个表格输出并且可以应用这个`sum`函数。或者您可以使用`ave`获得与数据帧等长的总和向量。也许：

```
 with( EDcounts, tapply(EDcounts[[3]], EDcounts[[2]], sum, na.rm=TRUE) ) 
```

`xtabs`如果您将“访问”列名称放在公式的 LHS 上，您也许也可以哄骗访问次数的总和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T00:11:38.047

正如@DWin 所说，`table()`不是求和，而是记录计数。

我给出了三个方法示例，`plyr`使用`data.table`和`aggregate`

```
all_data <- expand.grid(country = paste('Country', LETTERS[1:3]), 
  date = seq(as.Date('2012/01/01'), as.Date('2012/12/31'), by = 1) )

all_data[['ed_visits']] <- rpois(nrow(all_data), lambda = 5)

# using plyr

library(plyr)

by_date_plyr <- ddply(all_data, .(date), summarize, visits = sum(ed_visits))

# using data.table
library(data.table)
all_DT <- data.table(all_data)
by_date_dt <- all_DT[, list(visits = sum(ed_visits)), by = 'date' ]

# using aggregate
by_date_base <- aggregate(ed_visits ~ date, data = all_data, sum) 
```

# iphone - 如何从外部框架加载资源

> ID：11769200
> 
> 赞同：17
> 
> 时间：2012-08-01T23:52:57.660
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

我已经构建了一个外部框架，我正在尝试利用框架资源目录中的一些图像。该框架并未在应用程序中复制，而只是对其进行引用。如何从 xyz.framework 资源文件夹中相应地使用 UIImage？

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-02T00:08:13.353

您需要做的是为框架加载包，然后使用 NSBundle 对象访问资源。

例如，如果有一个框架定义了一个类“FrameworkClass”，我们可以这样做：

```
NSBundle *frameworkBundle = [NSBundle bundleForClass:[FrameworkClass class]];
NSString *resourcePath = [frameworkBundle pathForResource:@"an_image" ofType:@"jpeg"];
UIImage *image = [UIImage imageWithContentsOfFile:resourcePath]; 
```

那应该或多或少地做你想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T02:30:04.067

您可以参考以下框架资源：

```
[[NSBundle mainBundle] pathForResource:@"FI.framework/Resources/FileName"
                                ofType:@"fileExtension"]; 
```

注意，这里的 FI 是你的框架名称。

参考。链接：[http ://db-in.com/blog/2011/07/universal-framework-iphone-ios-2-0/](http://db-in.com/blog/2011/07/universal-framework-iphone-ios-2-0/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-25T23:16:01.900

斯威夫特 3：

```
let bundle = Bundle(for: SomeFrameworkClass.self as AnyClass)

if let path = bundle.path(forResource: "test", ofType: "png") {
    if let image = UIImage(contentsOfFile: path) {
        // do stuff
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-05-31T15:59:47.787

斯威夫特 4/5：

```
let bundle = Bundle(for: type(of: self))
// let bundle = Bundle(for: ClassOfInterest.self)) // or by pointing to class of interest
let path = bundle.path(forResource: "filename", ofType: "json")!
let url = URL(fileURLWithPath: path)
let data = try! Data(contentsOf: url) 
```

这是来自框架/单元测试内部，在生产代码中你不想强制尝试和强制解包。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-17T03:50:55.093

使用包标识符来定位您的框架。

这要求框架的“MACH-O 类型”为“动态库”并配置为“嵌入和签名”。

```
NSBundle *bundle = [NSBundle bundleWithIdentifier:@"com.example.App.ExampleFramework"];
NSURL *url = [URLForResource:@"resource" withExtension:@"txt"];
// load the contents with this file url 
```

# sql - 将非标准联接转换为标准联接

> ID：11769203
> 
> 赞同：3
> 
> 时间：2012-08-01T23:53:15.743
> 
> 标签：sql, sql-server, sql-server-2008, sybase

我正在尝试重新编写查询，以便它使用标准联接（在 from 子句中）而不是旧版本（迁移到 SQL 服务器，因此被迫进行此转换）。我遇到的问题是我下面的查询版本返回的记录比原始版本少得多。所以我在想我的一个外部联接不是那么外部。感谢您的帮助，特别是如果您确实完成了整个查询。我似乎找不到任何关于如何进行这样的过渡的好文档。

```
declare
@startdate datetime, @enddate datetime

select @startdate = dateadd(dd,-6,convert(datetime,convert(varchar,getdate(),101))) 
select @enddate = dateadd(dd,6,@startdate) 

SELECT PAT.CUSID as ID , 
       substring(CPTREC.CompletedDateTime,1,12) AS DateOfService, 
       SUBSTRING(PCMH.ProcedureCode,CHARINDEX('-',PCMH.ProcedureCode)+ 1,50) AS CPT_Code 
FROM cpt_records as CPTREC
left Outer Join ProcedureCodeMH as PCMH 
    on CPTREC.ProcedureCodeRevCount = PCMH.ProcedureCodeRevCount 
        and CPTREC.ProcedureCodeSer= PCMH.ProcedureCodeSer
left outer join Credit as CR 
    on CPTREC.ActInstProcCodeSer = CR.ActInstProcCodeSer 
        and CPTREC.ActInstProcCodeRevCount = CR.ActInstProcCodeRevCount
inner join ActivityInstance as ACTIN 
    on CPTREC.ActivityInstanceSer= ACTIN.ActivityInstanceSer 
        and CPTREC.ActivityInstanceRevCount = ACTIN.ActivityInstanceRevCount
inner join ActivityCapture as ACTCAP 
    on ACTCAP.ActivityInstanceSer= ACTIN.ActivityInstanceSer 
        and ACTCAP.ActivityInstanceRevCount = ACTIN.ActivityInstanceRevCount
inner join ActCaptDiagnosisMH as ACTCAPDMH 
    on ACTCAPDMH.ActivityCaptureSer = ACTCAP.ActivityCaptureSer 
        and ACTCAPDMH.ActivityCaptureRevCount=ACTCAP.ActivityCaptureRevCount
left outer join Department as DEPT 
    on ACTCAP.DepartmentSer = DEPT.DepartmentSer
left outer join Hospitality as HOSP 
    on DEPT.HospitalitySer = HOSP.HospitalitySer
Left outer join Diagnosis as DIAG 
    on ACTCAPDMH.DiagnosisSer = DIAG.DiagnosisSer
inner join TemplateCycle as TEMPCYC 
    on ACTIN.TemplateCycleSer= TEMPCYC.TemplateCycleSer
inner join Template as PLATE 
    on TEMPCYC.TemplateSer = PLATE.TemplateSer
inner join Patent as PAT 
    on PLATE.PatentSer = PAT.PatentSer
Left Outer Join PatentParticular as PATPAR 
    on PAT.PatentSer = PATPAR.PatentSer
inner join PatentDoctor as PATDOC 
    on PAT.PatentSer = PATDOC.PatentSer
inner join Doctor as DOC 
    on PATDOC.ResourceSer = DOC.ResourceSer
WHERE ( CPTREC.CompletedDateTime >= @startdate ) 
    and ( CPTREC.CompletedDateTime < dateadd(dd,1,@enddate) ) 
    and ( CPTREC.ObjectStatus = 'Active' ) 
    and ( PATDOC.OncologistFlag = 0 ) 
    and ( PATDOC.PrimaryFlag = 1 ) 
    and ( PCMH.ProcedureCode like '%77781%' 
            or PCMH.ProcedureCode like '%77782%' 
            or PCMH.ProcedureCode like '%77783%' 
            or PCMH.ProcedureCode like '%77784%' 
            or PCMH.ProcedureCode like '%77785%' 
            or PCMH.ProcedureCode like '%77786%' 
            or PCMH.ProcedureCode like '%77787%') 
```

* * *

带回更多记录的原版是

* * *

```
SELECT PAT.CUSID as ID , substring(cpt_records.CompletedDateTime,1,12) AS DateOfService, SUBSTRING(ProcedureCodeMH.ProcedureCode,CHARINDEX('-',ProcedureCodeMH.ProcedureCode)+ 1,50) AS CPT_Code INTO cpt777 FROM cpt_records , ActivityCapture , ActivityInstance , Patent as PAT, ProcedureCodeMH , Template , TemplateCycle , Department , Hospitalityity , Credit , Doctor, PatentDoctor , ActCaptDiagnosisMH , Diagnosis , PatentParticular WHERE ( #cpt_records.ProcedureCodeSer *= ProcedureCodeMH.ProcedureCodeSer) and

( ProcedureCodeMH.ProcedureCodeRevCount =*cpt_records.ProcedureCodeRevCount) and

( ActivityCapture.DepartmentSer *= Department.DepartmentSer) and

( Department.HospitalitySer *= Hospitality.HospitalitySer) and

( ActivityCapture.ActivityCaptureSer *= Credit.ActivityCaptureSer) and

( ActivityCapture.ActivityCaptureRevCount *= Credit.ActivityCaptureRevCount) and

( Credit.ActInstProcCodeSer =* cpt_records.ActInstProcCodeSer) and

( Credit.ActInstProcCodeRevCount =* cpt_records.ActInstProcCodeRevCount) and

( Patent.PatentSer *= PatentParticular.PatentSer) and

( cpt_records.ActivityInstanceSer = ActivityInstance.ActivityInstanceSer ) and

(cpt_records.ActivityInstanceRevCount = ActivityInstance.ActivityInstanceRevCount ) and

( ActivityInstance.ActivityInstanceSer = ActivityCapture.ActivityInstanceSer ) and

( ActivityInstance.ActivityInstanceRevCount = ActivityCapture.ActivityInstanceRevCount ) and

( Patent.PatentSer = Template.PatentSer ) and

( Template.TemplateSer = TemplateCycle.TemplateSer ) and

( TemplateCycle.TemplateCycleSer = ActivityInstance.TemplateCycleSer ) and

( Patent.PatentSer = PatentDoctor.PatentSer ) and

( PatentDoctor.ResourceSer = Doctor.ResourceSer ) and

( ActivityCapture.ActivityCaptureSer = ActCaptDiagnosisMH.ActivityCaptureSer ) and

( ActivityCapture.ActivityCaptureRevCount = ActCaptDiagnosisMH.ActivityCaptureRevCount ) and (cpt_records.CompletedDateTime >= @startdate ) and

( cpt_records.CompletedDateTime < dateadd(dd,1,@enddate) ) and

( cpt_records.ObjectStatus = 'Active' ) and

( PatentDoctor.OncologistFlag = 0 ) and

( PatentDoctor.PrimaryFlag = 1 ) and

( ActCaptDiagnosisMH.DiagnosisSer *= Diagnosis.DiagnosisSer) and

( ProcedureCodeMH.ProcedureCode like '%77781%' or ProcedureCodeMH.ProcedureCode like '%77782%' or ProcedureCodeMH.ProcedureCode like '%77783%' or ProcedureCodeMH.ProcedureCode like '%77784%' or ProcedureCodeMH.ProcedureCode like '%77785%' or ProcedureCodeMH.ProcedureCode like '%77786%' or ProcedureCodeMH.ProcedureCode like '%77787%') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:27:03.363

问题是左连接为未找到匹配行的连接列值返回空值，但您正在检查`where`子句中的这些列值，但`where`谓词在所有行连接*后*执行，因此它们永远不会匹配并且您的外部连接已下沉。

即，这个示例查询：

```
select *
from table1 t1
left join table2 t2 on t2.fk = t1.id
where t2.col1 = 'x' 
```

永远*不会*返回任何在 中没有对应行的行`table2`，因为`col1`will be`null`和与`null`are 的比较总是`false`，除了`col1 is null`.

要解决此问题，您需要将测试移动到`ON`子句中，以便*在进行连接时进行*比较，如下所示：

```
select *
from table1 t1
left join table2 t2 on t2.fk = t1.id and t2.col1 = 'x' 
```

现在左连接仍然会在匹配键时返回行，并应用额外的谓词来进一步细化匹配。

在您的情况下，您正在对 进行外部（即`left`）连接`ProcedureCodeMH as PCMH`，但测试子句`PCMH`中的列`WHERE`，类似于上面的第一个示例。

然后，您的查询的重写将是（请参阅在线注释以了解更改的位置）：

```
SELECT PAT.CUSID as ID , 
       substring(CPTREC.CompletedDateTime,1,12) AS DateOfService, 
       SUBSTRING(PCMH.ProcedureCode,CHARINDEX('-',PCMH.ProcedureCode)+ 1,50) AS CPT_Code 
FROM cpt_records as CPTREC
left Outer Join ProcedureCodeMH as PCMH 
    on CPTREC.ProcedureCodeRevCount = PCMH.ProcedureCodeRevCount 
        and CPTREC.ProcedureCodeSer= PCMH.ProcedureCodeSer
        -- MOVED THIS TEST FROM WHERE CLAUSE TO HERE
        and ( PCMH.ProcedureCode like '%77781%' 
                or PCMH.ProcedureCode like '%77782%' 
                or PCMH.ProcedureCode like '%77783%' 
                or PCMH.ProcedureCode like '%77784%' 
                or PCMH.ProcedureCode like '%77785%' 
                or PCMH.ProcedureCode like '%77786%' 
            or PCMH.ProcedureCode like '%77787%')
left outer join Credit as CR 
    on CPTREC.ActInstProcCodeSer = CR.ActInstProcCodeSer 
        and CPTREC.ActInstProcCodeRevCount = CR.ActInstProcCodeRevCount
inner join ActivityInstance as ACTIN 
    on CPTREC.ActivityInstanceSer= ACTIN.ActivityInstanceSer 
        and CPTREC.ActivityInstanceRevCount = ACTIN.ActivityInstanceRevCount
inner join ActivityCapture as ACTCAP 
    on ACTCAP.ActivityInstanceSer= ACTIN.ActivityInstanceSer 
        and ACTCAP.ActivityInstanceRevCount = ACTIN.ActivityInstanceRevCount
inner join ActCaptDiagnosisMH as ACTCAPDMH 
    on ACTCAPDMH.ActivityCaptureSer = ACTCAP.ActivityCaptureSer 
        and ACTCAPDMH.ActivityCaptureRevCount=ACTCAP.ActivityCaptureRevCount
left outer join Department as DEPT 
    on ACTCAP.DepartmentSer = DEPT.DepartmentSer
left outer join Hospitality as HOSP 
    on DEPT.HospitalitySer = HOSP.HospitalitySer
Left outer join Diagnosis as DIAG 
    on ACTCAPDMH.DiagnosisSer = DIAG.DiagnosisSer
inner join TemplateCycle as TEMPCYC 
    on ACTIN.TemplateCycleSer= TEMPCYC.TemplateCycleSer
inner join Template as PLATE 
    on TEMPCYC.TemplateSer = PLATE.TemplateSer
inner join Patent as PAT 
    on PLATE.PatentSer = PAT.PatentSer
Left Outer Join PatentParticular as PATPAR 
    on PAT.PatentSer = PATPAR.PatentSer
inner join PatentDoctor as PATDOC 
    on PAT.PatentSer = PATDOC.PatentSer
inner join Doctor as DOC 
    on PATDOC.ResourceSer = DOC.ResourceSer
WHERE CPTREC.CompletedDateTime >= @startdate
and CPTREC.CompletedDateTime < dateadd(dd,1,@enddate)
and CPTREC.ObjectStatus = 'Active'
and PATDOC.OncologistFlag = 0
and PATDOC.PrimaryFlag = 1 
```

注意：`inner join`可以简化为简单的`join`-`inner`是默认的连接类型。

# c# - 取消返回 url 选项 Visual Studio

> ID：11769205
> 
> 赞同：0
> 
> 时间：2012-08-01T23:53:49.577
> 
> 标签：c#, asp.net, visual-studio-2010

我在视觉工作室建立一个网站。一开始一切都很好，我设法在所有网页之间导航。我按照本教程（[http://csharpdotnetfreak.blogspot.com/2011/12/createuserwizard-email-verification.html](http://csharpdotnetfreak.blogspot.com/2011/12/createuserwizard-email-verification.html)）创建了一个登录页面。

我设法将验证电子邮件发送到我的电子邮件地址，但链接始终无效，我总是收到错误 400 - 错误请求。

我的问题是现在，我无法访问任何网页。它总是将我带到 login.aspx 页面，即使我在 web.config 文件上设置了不同的页面（在身份验证下）。我尝试将其他页面设置为起始页面（通过右键单击项目资源管理器）。

每次我尝试打开网页时都会收到错误 404，并且地址栏中的地址更改为 localhost49171/login.aspx?Returnur%2fdefault.aspx%3f

有人有解决方案吗？

提前致谢，

里龙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:02:10.107

returnurl 表明 IIS 正在尝试加载 default.aspx，但网站安全设置需要登录。因此，您将被重定向到 login.aspx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:46:07.393

在检查您的 web.config 之后，您所描述的行为是我所期望的，只要在登录后您就可以导航和访问您网站中的所有页面。如果登录后，您仍然被重定向到登录页面，则说明您的其他设置有误。

web.config 中的 configuration/web.config/authorization 元素用于指定站点范围的授权规则。

```
<configuration>
  <web.config>
    <authorization>
      <deny users="?"  /> <!-- deny un-authenticated access, everyone not logged in that is -->
      <allow users="*"   /> <!-- allow everyone else -->
    </authorization>
  </web.config>
</configuration> 
```

如果您有任何人可能需要访问的资源，您可以使用 configuration/location/system.web/authorization 元素修改对该资源的授权规则

```
<configuration>
  <location path="SomeUnprotectedResource.aspx">
    <authorization>
      <allow users="*" /> <!-- anyone can view this page -->
    </authorization>
  </location>
</configuration> 
```

与站点范围的规则相比，您甚至可能拥有进一步限制对页面的访问所需的资源。

```
<configuration>
  <location path="OnlyForMe.aspx">
    <authorization>
      <allow users="Me" /> <!-- only the user Me can view this page -->
      <deny users="*" /> <!-- deny everyone else -->
    </authorization>
  </location>
</configuration> 
```

附带说明一下，如果您有 IIS 设置来保护所有网站资源（即 *.css、*.js）而不仅仅是 ASP.NET 资源，您还需要添加规则以允许访问它们。例如，您的 JavaScript 和样式可能在登录页面之外，因此它们可能需要样式和脚本才能工作。

```
<configuration>
  <location path="styles/login.css">
    <authorization>
      <allow users="*" />
    </authorization>
  </location>
  <location path="scripts/login.js">
    <authorization>
      <allow users="*" />
    </authorization>
  </location>
</configuration> 
```

# php - 标点符号的 Javascript 等价于 PHP 的正则表达式

> ID：11769208
> 
> 赞同：3
> 
> 时间：2012-08-01T23:54:21.120
> 
> 标签：php, javascript, jquery

我正在使用以下 PHP 行从字符串中删除标点符号：

```
$key = preg_replace("/\p{P}/u", "", $key); 
```

有谁知道如何在 Javascript/jQuery 中做同样的事情？

我知道你可以像 PHP 的 preg_replace() 一样使用 jQuery 的 replace()。我只是不知道使用什么正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:00:06.457

像这样的东西：

```
<script type="text/javascript">
  var str = "Some text here ...";
  var pattern = /\p{P}/u;
  document.write(str.replace(pattern,''));
</script> 
```

**编辑 ：**

似乎 Javascript 与 PECL 不兼容，因此 p{P} 不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:03:59.817

在大多数情况下，正则表达式在 Javascript 和 PHP 中是相同的。所以，如果你有一个在 PHP 中工作的正则表达式，它很可能在 JS 中以同样的方式工作。主要区别在于，在 JS 中，您不需要将正则表达式包含在引号中（尽管如果您愿意的话也可以）。您可以像这样直接在字符串上调用替换...

```
myString.replace(/abc/i, "123"); 
```

请记住，这实际上并没有改变 myString 的值......它只是返回替换的版本。

# javascript - 在javascript的提示中接受大写和小写

> ID：11769210
> 
> 赞同：1
> 
> 时间：2012-08-01T23:54:27.387
> 
> 标签：javascript, case-sensitive, prompt

第一次发帖！

我做了一些挖掘，找不到关于我想要实现的目标的信息（对不起，不是最先进的 javascript 人）。

用例：提示用户一个问题，接受用户的回答，权衡用户对案例的回答，返回一个结果

问题：由于javascript区分大小写，我试图学习如何在提示中同时接受大写和小写而不使用太多重复的情况（即切换）

下面是我正在构建的一段简单代码，以查看是否可以实现用例（显然它不起作用，尽管大声笑因此这个问题），提前感谢您的帮助！

```
var jacketColor = function(x){
var x = prompt("color"?);
x===x.substring(0,1).toUpperCase||x===x.substring(0,1).toLowerCase)
};
}
var result;

switch (jacketColor) {

case "black":
    result = "pay $300";
break;

case "brown":
result = "Pay $200";  
break;

case "green":
result = "Pay $5";
break;

default:
result = "This color does not match my eyes!";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:05:32.733

你的代码应该是这样的：

```
function whatColor() {
  var x = prompt("color?");
  return x.toLowerCase();
}

var result;
var jacketColor = whatColor();

switch (jacketColor) {
  case "black":
    result = "pay $300";
    break;
  case "brown":
    result = "Pay $200";  
    break;
  case "green":
    result = "Pay $5";
    break;
  default:
    result = "This color does not match my eyes!";
} 
```

# html - 是否有在 Textile/Markdown 中解析内联修饰符的标准方法

> ID：11769211
> 
> 赞同：0
> 
> 时间：2012-08-01T23:54:32.263
> 
> 标签：html, parsing, markdown, markup, textile

我一直在考虑使用 Scala 的解析器组合库（基本上是 PEG 解析器）编写 Textile 解析器，并且想知道我应该使用哪种方法来解析内联修饰符

```
This is *bold* text, _italic_ text, +underlined+ text, etc. 
```

在这种情况下，很清楚什么是什么，应该解析什么。但是，有很多边缘情况不是很清楚。仅关注粗体文本：

```
Which sections get bolded: 
*onomato*poeia* ?
bold *word*, without a space after?
tyr*annos*aurus
a bold word in a (*bracket*)?
How about *This *case? 
```

显然这是主观（哪些东西应该算作粗体）和客观（如何使解析规则正确解析它）的混合。

我倾向于 PEG 之类的东西

```
wordChar = [a-zA-Z]
nonWordChar = [^a-zA-Z]
boldStart = nonWordChar ~ * ~ wordChar
boldEnd = wordChar ~ * ~ nonWordChar
boldSection = boldStart ~ rep(not(boldEnd) ~ anyChar) ~ boldEnd 
```

它将按如下方式解析上述内容：

```
<b>onomato*poeia</b> ?
bold <b>word</b>, without a space after?
tyr*annos*aurus    <- fails because of lack of whitespace
a bold word in a (<b>bracket</b>)?
How about *This *case? <- fails because there is no correct closing * 
```

但是，我不确定此方法是否适用于所有用例，并且是否适用于所有边缘情况。有没有我可以复制和依赖的标准方法？如果可以避免的话，我宁愿不依赖我的临时未经过深思熟虑的语言规范。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:02:46.457

在降价的情况下没有标准，并且在边缘情况下实现有所不同。对于 markdown 的一组选择，您可以查看[peg-markdown](https://github.com/jgm/peg-markdown/blob/master/markdown_parser.leg#L445)，它也在 MultiMarkdown 中使用。当然，markdown 在这方面比纺织品更复杂，因为它使用`**`粗体和`*`斜体，从而产生更多关于如何处理诸如`*hello**there**`.

PHP markdown extra 的开发人员 Michel Fortin 有一个[测试套件](http://git.michelf.com/mdtest/)，其中包括许多粗体/斜体的边缘案例。但是，我认为他在这里的决定并没有普遍的共识，并且许多实现的解析方式不同。

也就是说，我认为以下决定在降价中是没有争议的：

*   `*`仅在下一个字符是非空白字符时才开始强调。
*   `*`仅当前面的字符是非空白字符时才结束强调。
*   强调可以出现在一个单词中，因此在 中`he*ll*o`，两个 l 被强调（尽管一些 markdown 实现禁用了该`_`字符的此功能，因为下划线在标识符中很常见）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:23:03.607

经过一段时间的采购，我找到了[reStructuredText 的内联标记识别规则](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#inline-markup-recognition-rules "内联标记识别规则")。

它不遵循降价规则；特别是诸如`t*hi*s`不被解析为内联标签之类的东西，但它非常相似并且具有相似的总体目的。

它也是一个有些复杂的规范（例如，括号和标点符号的特殊大小写），但它的规范非常好，经过彻底的解释和证明。我发现它的规格是一个非常坚实的基础。

# jquery - 鼠标悬停时使用Jquery放大图像？

> ID：11769212
> 
> 赞同：4
> 
> 时间：2012-08-01T23:54:34.320
> 
> 标签：jquery

我试图在鼠标悬停时放大图像并在鼠标悬停后将尺寸缩小到正常。我有以下内容：

```
$('#image img').live("mouseover", function(){
          var $this=$(this);

          $this.attr('width','25%');
          $this.attr('height','25%');

       }) 
```

放大部分工作正常，但我不知道如何在鼠标移出后减小尺寸。另外，我认为我的代码有点难看，不知道如何修复它。非常感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T23:57:49.983

试试这个： http: [//jsfiddle.net/FPKAP/11/](http://jsfiddle.net/FPKAP/11/) **或**使用悬停：http: [//jsfiddle.net/FPKAP/12/](http://jsfiddle.net/FPKAP/12/)

当您将鼠标悬停在 HULK 上时，它会放大，鼠标缩小会缩小。

这应该有助于需要，如果我误解了什么，请让我知道，`:)`

**代码**

```
$('#zoomimg').mouseenter(function() {
    $(this).css("cursor","pointer");
    $(this).animate({width: "50%", height: "50%"}, 'slow');
});

$('#zoomimg').mouseleave(function() {   
    $(this).animate({width: "28%"}, 'slow');
}); 
```

**代码**

```
$('#zoomimg').hover(function() {
    $(this).css("cursor", "pointer");
    $(this).animate({
        width: "50%",
        height: "50%"
    }, 'slow');

}, function() {
    $(this).animate({
        width: "28%"
    }, 'slow');

});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-16T06:37:41.747

增加图像的宽度和高度，会改变图像的位置（即）它被放大但不在与原始图像相同的位置。

使用缩放属性将解决此问题。

```
.transition {
    -webkit-transform: scale(2); 
    -moz-transform: scale(2);
    -o-transform: scale(2);
    transform: scale(2);
} 
```

小提琴链接：http: [//jsfiddle.net/RC7kb/178/](http://jsfiddle.net/RC7kb/178/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T00:02:22.457

你可以使用这个：[jsFiddle](http://jsfiddle.net/jcoc611/RC7kb/)

```
$('#image').hover(function(){
    $(this).css({width:"100%",height:"100%"});
},function(){
    $(this).css({width:"50%",height:"50%"});   
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T23:57:27.237

我首先尝试使用 CSS：

```
#image img {
  width: 50%;
  height: 50%;
}

#image img:hover {
  width: 100%;
  height: 100%;
} 
```

# javascript - jquery/javascript：表达访问和更改子字符串的最短方式是什么？

> ID：11769213
> 
> 赞同：0
> 
> 时间：2012-08-01T23:54:45.413
> 
> 标签：javascript, jquery, substring, increment

> **可能重复：**
> [使用 RegExp 匹配括号内的数字，然后将其递增](https://stackoverflow.com/questions/423107/use-regexp-to-match-a-parenthetical-number-then-increment-it)

我已经知道如何实现该解决方案，但使用了几行代码；我想知道是否有一种简短而聪明的方法来访问整数字符串的子字符串并递增它，其中子字符串没有包含在任何标记标签中？

```
/*Let's say the string is*/ "<span class="ideacount">[5 ideas]</span>" 
```

我想增加它说“[6个想法]”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:07:07.580

像这样的东西？

```
var spanContent = $('#ideaCount').text();    
var i = parseInt(spanContent.replace(/[^0-9\.]+/g, ''));
i+=1;
$('#ideaCount').text( spanContent.replace(/[0-9\.]+/g, i+1) ); 
```

只需添加一些错误检查。

# git - 与厨师一起查看 Git 存储库？

> ID：11769219
> 
> 赞同：19
> 
> 时间：2012-08-01T23:55:43.843
> 
> 标签：git, github, version-control, chef-infra

我有一个 Git 存储库，我想在服务器上签出。有没有厨师食谱可以做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-02T14:39:01.427

git [SCM 资源](https://docs.chef.io/resource_git.html)可能是您正在寻找的。简单的资源使用示例：

```
git "/path/to/check/out/to" do
  repository "git://github.com/opscode/chef.git"
  reference "master"
  action :sync
end 
```

如果要获取特定分支，另请参阅“修订”属性。

# python - 如何修复这个 Python 继承 AttributeError: X instance has no attribute 'con'？

> ID：11769223
> 
> 赞同：1
> 
> 时间：2012-08-01T23:56:44.803
> 
> 标签：python, oop, class, inheritance

当我运行下面的代码（最后是整个代码）时，这一行：

```
res=self.con.execute( 
```

从这个函数（其中 getfeatures 返回一个字典）：

```
def fcount(self,f,cat):
    res=self.con.execute(
      'select count from fc where feature="%s" and category="%s"'
      %(f,cat)).fetchone()
    if res==None: return 0
    else: return float(res[0]) 
```

产生此错误：

```
AttributeError: naivebayes instance has no attribute 'con' 
```

首先，我认为这是一个 pysqlite2 问题。但是我已经安装了 pysqlite2，当我运行 pysqlite2 测试时，我就可以了。我还尝试使用内置的 sqlite3 而不是 pysqlite2 （执行`import sqlite3`语句并替换`self.con=sqlite.connect(dbfile)`为`self.con=sqlite3.connect(":memory:")`，但它也不起作用。

因此，在上一个问题中，我收到反馈说这不是 pysqlite2 问题，而是继承问题。但是由于naivebayes 中的**init** () 被重新定义为显式调用超类（分类器）来扩展其行为，这样：

```
class naivebayes(classifier):

  def __init__(self,getfeatures):
    classifier.__init__(self,getfeatures) 
```

我不明白继承有什么问题。具体如何修复？

PS - 代码不是我的。它来自（优秀的）书“编程集体智能”。我只是从 raw.github.com/cataska/programming-collective-intelligence-code/... 复制它并剪切部分代码（fisherclassifier，因为我只使用 naivebayes 分类器）。

谢谢你的帮助。

这里是整个代码：

```
from pysqlite2 import dbapi2 as sqlite

import re
import math

def getfeatures(doc):
  splitter=re.compile('\\W*')
  # Split the words by non-alpha characters
  words=[s.lower() for s in splitter.split(doc)
          if len(s)>2 and len(s)<20]
  # Return the unique set of words only
#  return dict([(w,1) for w in words]).iteritems()
  return dict([(w,1) for w in words])

class classifier:
  def __init__(self,getfeatures,filename=None):
    # Counts of feature/category combinations
    self.fc={}
    # Counts of documents in each category
    self.cc={}
    self.getfeatures=getfeatures

  def setdb(self,dbfile):
    self.con=sqlite.connect(dbfile)
    self.con.execute('create table if not exists fc(feature,category,count)')
    self.con.execute('create table if not exists cc(category,count)')

  def incf(self,f,cat):
    count=self.fcount(f,cat)
    if count==0:
      self.con.execute("insert into fc values ('%s','%s',1)"
                       % (f,cat))
    else:
      self.con.execute(
        "update fc set count=%d where feature='%s' and category='%s'"
        % (count+1,f,cat))

  def fcount(self,f,cat):
    res=self.con.execute(
      'select count from fc where feature="%s" and category="%s"'
      %(f,cat)).fetchone()
    if res==None: return 0
    else: return float(res[0])

  def incc(self,cat):
    count=self.catcount(cat)
    if count==0:
      self.con.execute("insert into cc values ('%s',1)" % (cat))
    else:
      self.con.execute("update cc set count=%d where category='%s'"
                       % (count+1,cat))

  def catcount(self,cat):
    res=self.con.execute('select count from cc where category="%s"'
                         %(cat)).fetchone()
    if res==None: return 0
    else: return float(res[0])

  def categories(self):
    cur=self.con.execute('select category from cc');
    return [d[0] for d in cur]

  def totalcount(self):
    res=self.con.execute('select sum(count) from cc').fetchone();
    if res==None: return 0
    return res[0]

  def train(self,item,cat):
    features=self.getfeatures(item)
    # Increment the count for every feature with this category
    for f in features.keys():
##    for f in features:
      self.incf(f,cat)
    # Increment the count for this category
    self.incc(cat)
    self.con.commit()

  def fprob(self,f,cat):
    if self.catcount(cat)==0: return 0

    # The total number of times this feature appeared in this
    # category divided by the total number of items in this category
    return self.fcount(f,cat)/self.catcount(cat)

  def weightedprob(self,f,cat,prf,weight=1.0,ap=0.5):
    # Calculate current probability
    basicprob=prf(f,cat)

    # Count the number of times this feature has appeared in
    # all categories
    totals=sum([self.fcount(f,c) for c in self.categories()])

    # Calculate the weighted average
    bp=((weight*ap)+(totals*basicprob))/(weight+totals)
    return bp

class naivebayes(classifier):

  def __init__(self,getfeatures):
    classifier.__init__(self,getfeatures)
    self.thresholds={}

  def docprob(self,item,cat):
    features=self.getfeatures(item)

    # Multiply the probabilities of all the features together
    p=1
    for f in features: p*=self.weightedprob(f,cat,self.fprob)
    return p

  def prob(self,item,cat):
    catprob=self.catcount(cat)/self.totalcount()
    docprob=self.docprob(item,cat)
    return docprob*catprob

  def setthreshold(self,cat,t):
    self.thresholds[cat]=t

  def getthreshold(self,cat):
    if cat not in self.thresholds: return 1.0
    return self.thresholds[cat]

  def classify(self,item,default=None):
    probs={}
    # Find the category with the highest probability
    max=0.0
    for cat in self.categories():
      probs[cat]=self.prob(item,cat)
      if probs[cat]>max:
        max=probs[cat]
        best=cat

    # Make sure the probability exceeds threshold*next best
    for cat in probs:
      if cat==best: continue
      if probs[cat]*self.getthreshold(best)>probs[best]: return default
    return best

def sampletrain(cl):
  cl.train('Nobody owns the water.','good')
  cl.train('the quick rabbit jumps fences','good')
  cl.train('buy pharmaceuticals now','bad')
  cl.train('make quick money at the online casino','bad')
  cl.train('the quick brown fox jumps','good')

nb = naivebayes(getfeatures)

sampletrain(nb)

#print ('\nbuy is classified as %s'%nb.classify('buy'))
#print ('\nquick is classified as %s'%nb.classify('quick'))

##print getfeatures('Nobody owns the water.') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:05:24.353

只需附加`classifier.__init__`方法`self.setdb('autocreated_db_file')`：

```
class classifier:                                             
    def __init__(self,getfeatures,filename=None):
    ...
    self.setdb('autocreated_db_file') 
```

# php - 验证同一页面上的一组文本框

> ID：11769224
> 
> 赞同：0
> 
> 时间：2012-08-01T23:56:46.317
> 
> 标签：php, jquery

我正在做一个项目……我正在使用 php 和 jquery。我想要一种方法来验证具有相同类名的动态生成的文本框，当我单击提交按钮时..并且应该能够通过以红色突出显示空字段来检测空字段..使用 jquery

我真的需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:16:20.253

对于 jQuery，fom 验证的当前年/月风格是[http://bassistance.de/jquery-plugins/jquery-plugin-validation](http://bassistance.de/jquery-plugins/jquery-plugin-validation)。

没有必要在这里重复这些例子，因为它有据可查：[http ://docs.jquery.com/Plugins/Validation#Example](http://docs.jquery.com/Plugins/Validation#Example)

基本上，您为字段分配一个类并添加一个响应该类的验证器。有些类是标准的（例如“必需”表示该字段是强制性的），但您可以添加自己的、添加回调等。它会在输入中添加“错误”类，以便您可以设置该类的样式以使其变为红色。

# ruby-on-rails - Rails 按 ID 查找以进行收集

> ID：11769230
> 
> 赞同：0
> 
> 时间：2012-08-01T23:57:24.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的 Rails 应用程序中有两个模型：Foo 和 Bar。Bar 属于 Foo 并且 Foo 有很多 Bars。我的表单中有一个选择标签：

```
<%= select_tag(:passed_bar_id, options_for_select(Bar.all.collect{ |i| [i.url, i.id]}), :selected => params[:Bar_id]) %> 
```

这通过找到所有“酒吧”来工作。我将如何找到唯一的某些 Bars，然后使用 Foo ID 来收集而不是找到整个集合？额外的查找语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:06:38.530

假设有问题的 Foo ID 位于`:foo_id`：

```
<%= select_tag(:passed_bar_id, options_for_select(Foo.find(:foo_id).bars.collect{ |i| [i.url, i.id]}), :selected => params[:Bar_id]) %> 
```

# python - ImportError：没有名为 rpm 的模块

> ID：11769233
> 
> 赞同：0
> 
> 时间：2012-08-01T23:57:34.053
> 
> 标签：python, linux, centos, centos5

我使用以下命令在我的 CentOS 5.3 机器上安装了 python26。现在我在那台机器上运行了 python 2.4.3 和 python 2.6。

```
yum install python26 
```

当我在脚本的开头使用以下内容运行 python 脚本时。

```
#!/usr/bin/python26 
```

我会收到以下错误：

```
 Traceback (most recent call last):
  File "./centos-errata.py", line 70, in <module>
      import rpm
  ImportError: No module named rpm 
```

但是，如果我指定以下内容，它不会抱怨。

```
#!/usr/bin/python 
```

我该如何解决这个错误？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:07:22.670

您是否检查过 /usr/bin/python26 确实存在。

做：

```
which python 
```

通常，会创建指向您最新可执行文件的符号链接“pyton”。

添加您的代码：

```
 import sys
 print sys.version 
```

然后检查你是否安装了*rpm-python*。

最后，版本或 rpm 可能与您安装的 Python 版本不匹配。小心 CentOS 和您安装的 Python 版本 - 高于 2.4 的 Python 可能会破坏 yum。
我认为对于您的版本，yum 是使用 Python 2.4 构建的。

以下是有关如何安全升级的体面说明：http:
[//joshuakehn.com/2011/2/4/Upgrading-Python-on-CentOS.html](http://joshuakehn.com/2011/2/4/Upgrading-Python-on-CentOS.html)

# javascript - 如何为同一图像创建不同的模式

> ID：11769234
> 
> 赞同：0
> 
> 时间：2012-08-01T23:57:44.887
> 
> 标签：javascript, html, image, canvas

我有一张图片，我想在画布上以不同的旋转多次显示同一张图片。为此，我使用`context.rotate()`旋转图像并`context.fill()`绘制它。为了能够使用 显示图像`fill()`，我首先需要使用`createPattern()`方法，如：

```
context.save();
var altPattern = context.createPattern(image, "repeat");
context.fillStyle = altPattern;
context.restore(); 
```

我的问题是，虽然我使用`save()`and `restore()`，但我使用的最后一个也会`createPattern()`影响第一个`fillStyles`，并在一次旋转中绘制所有图像。如何在使用`context.rotate()`旋转时为同一图像创建不同的图案？

再次调用`createPattern()`并将其分配给不同的变量不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:09:20.687

Ok I got it. You should use `context.beginPath()` when beginning to fill or stroke a new part in the canvas. I didn't use it at first, I just used `moveTo()` and moved the context around, calling `fill()s` everywhere. It looked like it was working, but with `createPattern()` this problem came out. So for your safety, always begin with `context.beginPath()` for every complex shape you decide to fill or stroke.

# android - Android：关于元素

> ID：11769240
> 
> 赞同：0
> 
> 时间：2012-08-01T23:58:14.983
> 
> 标签：android, constructor, element

我已经制作了一个自定义元素以与 xml 文件一起使用，我打算将这些元素制作成一个数据框，我的应用程序将简单地读取这些自定义元素，传输它们保存的数据，例如大小、xy 位置、颜色......等等. 并将相应地工作。

所以我开始构建一个元素：

```
public class Feature extends Element  {

        Feature() {
            super();
            // TODO Auto-generated constructor stub
          }

} 
```

“超级（）；” 行被标记为错误的红色，它说：“构造函数元素不可见”

有人可以向我解释发生了什么吗？

尝试添加上下文上下文或 AtrributSet attrs，我熟悉的任何东西.. 什么都没有：{

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:47:59.240

我认为你不太了解元素是什么。元素是指 XML 标记。例如，如果 XML 是：

```
 <bookstore>
          <book category="CHILDREN" stuff= “yes”&gt;
            <title>Harry Potter</title>
            <author>J K. Rowling</author>
            <year>2005</year>
            <price>29.99</price>
        </book category>
        </bookstore> 
```

元素是：bookstore, book, ti​​tle, author, year, price
节点是： bookstore, book, ti​​tle, author, year, price（单独）
NodeList= bookstore, book, ti​​tle, author, year, price（一起）
属性= 类别和内容
文本内容= Happy Potter, J K. Rowling, 2005
文本= “2005” 或 “29.99”<br> 开始标签 =`<bookstore>, <book>`
结束标签 =`</bookstore>, </book>`

此外，如果您查看元素类（[http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Element.html](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/Element.html)），它会说它是“接口元素”。“接口”意味着您必须“实现”，而不是扩展它。

我首先建议你去弄清楚 XML 是什么。这是关于 XML 的教程：[http ://www.tizag.com/xmlTutorial/](http://www.tizag.com/xmlTutorial/)

# python - 站点抓取库的好的 Perl 或 Python 起点是什么？

> ID：11769246
> 
> 赞同：2
> 
> 时间：2012-08-01T23:59:22.657
> 
> 标签：python, perl, screen-scraping

> **可能重复：**
> [如何使用 Perl 进行屏幕抓取？](https://stackoverflow.com/questions/713827/how-can-i-screen-scrape-with-perl)
> [使用 Python 进行网页抓取](https://stackoverflow.com/questions/2081586/web-scraping-with-python)

这不是我的工作领域，所以请原谅普遍缺乏知识。我正在寻找用于站点抓取的 Python 或 Perl 库（从站点/各个页面上的表格获取一些产品信息/转换为更用户友好的格式 - Excel - 这两种语言都有令人满意的选项）以及良好的文档。

任何人都可以就该主题提出建议或起点吗？谷歌搜索提供了几场有趣的比赛，但有一点时间我宁愿不要在错误的轨道上打猎，而是宁愿相信在这件事上有一定经验的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T00:03:01.180

在 python 中有一个名为[scrapy](http://scrapy.org/)的库以及更基本的库，例如使用[mechanize](http://wwwsearch.sourceforge.net/mechanize/)或其他接口与解析器（如[lxml](http://lxml.de/)或[beautifulsoup ）](http://www.crummy.com/software/BeautifulSoup/)

在评论中提到他们没有教程，但是使用 mechanize 相对简单（使用它的浏览器对象），而 lxml 提供了一种使用 xpath 在 dom 中跳转的简单方法。

虽然我从未使用过它，但[Selenium](http://seleniumhq.org/)似乎也是一个不错的选择，尽管要复杂得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:15:23.180

几天前，我需要寻找一个讨厌的 HTML 类的所有实例，并且很快就将以下内容放在一起——它既是一个爬虫，也是一个爬虫，而且它很小。

```
import sys
import urllib.parse as uparse
import httplib2
from bs4 import BeautifulSoup

http = httplib2.Http()

hit_urls = set()

def crawl(url, check, do, depth=1):
    global hit_urls
    if url in hit_urls:
        #print("**Skipping %s" % url)
        return
    #print("Crawling %s" % url, file=sys.stderr)
    hit_urls.add(url)

    _, response = http.request(url)
    soup = BeautifulSoup(response)

    resp = do(url, soup)

    if depth > 0:
        for link in soup.find_all('a'):
            if link.has_key('href'):
                rel_url = link['href']
                if(check(rel_url)):
                    crawl(uparse.urljoin(url,rel_url), check, do, depth-1)

    return resp

def isLocal(url):
    if not url.startswith('/'):
        return False
    if url.startswith('/goToUrl'): # 3rd party redirect page
        return False
    return True

def findBadClass(url, soup):
    for t in soup.find_all(True,{'class': 'badClass'}):
        print(url+":"+str(t))

if __name__ == '__main__':
    crawl('http://example.com', isLocal, findBadClass) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T00:34:15.543

如果你只是想抓取一些格式一致的网站，最简单的方法可能是使用[请求](http://docs.python-requests.org/en/latest/index.html)结合正则表达式和 python 的内置字符串处理。

```
import re

import requests

resp = requests.get('http://austin.craigslist.org/cto/')

regex = ('<a href="(http://austin.craigslist.org/cto/[0-9]+\.html)">'
         '([a-zA-z0-9 ]+)</a>')

for i, match in enumerate(re.finditer(regex, resp.content)):
    if i > 5:
        break
    url = match.group(1)
    print 'url:', url
    resp = requests.get(url)
    title = re.search('<h2>(.+)</h2>', resp.content).group(1)
    print 'title:', title
    body = resp.content.split('<div id="userbody">', 1)[1]
    body = body.split('<script type="text/javascript">')[0]
    body = body.split('<!-- START CLTAGS -->')[0]
    print 'body:', body
    print 
```

**编辑**：澄清一下，我用过Beautiful Soup，认为它被高估了。我认为它很奇怪，很不稳定，很难在现实世界的环境中使用。此外，为一次性刮刀学习一个新库的工作量太大——你最好使用标准技术（即我上面建议的那些），这些技术可以在编写 python 脚本时应用到其他地方。

# microsoft-metro - Metro 中的 StreamSocket 读取

> ID：11769249
> 
> 赞同：1
> 
> 时间：2012-08-01T23:59:46.753
> 
> 标签：microsoft-metro, datareader

我正在使用 Windows 8 Metro 应用程序中的 StreamSockets，并希望使用 DataReader 来读取传入的数据。是否有任何特定的模式或模型我应该用来从套接字中读取，以允许我随时读取网络缓冲区中的所有可用数据？

目前，我知道我需要调用 DataReader.LoadAsync()，然后调用 DataReader.Read…()。我希望能够随时读取网络缓冲区中的所有内容。当我想检测传入消息的结尾时，我的问题就出现了。如果我尝试使用循环来连续调用 LoadAsync，它会在到达网络缓冲区末尾时阻塞。我知道在 .NET 4.0 中，有一个 NetworkStream 类提供了一个 DataAvailable 字段，它告诉我网络缓冲区中是否存在任何数据，这样我就可以继续循环，直到这个标志为假。有什么方法可以做类似的事情，让我可以消耗网络缓冲区中的所有可用数据而不必长时间阻塞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:03:55.143

设置 DataReader.InputStreamOptions = InputStreamOptions.Partial。这将使您的*等待*（您的任务）在您提供的缓冲区完全填满之前返回。

```
using(DataReader inputStream = new DataReader(this.connection.InputStream))
{
    inputStream.InputStreamOptions = InputStreamOptions.Partial;
    DataReaderLoadOperation loadOperation = inputStream.LoadAsync(2500);
    await loadOperation;
    if(loadOperation.Status != AsyncStatus.Completed)
    {
        this.Disconnect();  //insert your handler here
        return;
    }

    //read complete message
    uint byteCount = inputStream.UnconsumedBufferLength;

    byte [] bytes = new byte[byteCount];
    inputStream.ReadBytes(bytes);

    this.handleServerMessage(bytes);  //insert your handler here

    //detach stream so that it won't be closed when the datareader is disposed later
    inputStream.DetachStream();                
} 
```

# android - rand 图像的个人文本

> ID：11769251
> 
> 赞同：0
> 
> 时间：2012-08-01T23:59:58.640
> 
> 标签：android, android-intent

对不起我的英语不好！有这样的代码：

```
public void onClick(View v) {
    String imgName="";
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.button1:{
        Random rand = new Random();
        int rndInt = rand.nextInt(24) + 1;
        imgName = "img" + rndInt;
        int id = getResources().getIdentifier(imgName, "drawable", getPackageName());  
        imageView1.setImageResource(id);

        break;}

    default:
        break;
    };

} 
```

我如何通过单击我的 rand 图像的图像描述来设置新的意图？每个人都有？示例：单击按钮后，rand 图像是鱼。当我点击它时，使用 text=Fish can 游泳打开新意图！或者 rand 图像是猫，当我点击它时，打开新意图，文本 =“猫爱睡觉。猫讨厌狗。但它们太可爱了！（Bla bla bla bla bla bla）*10”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:13:03.813

首先`onTouchlistener`为您的`imageView`. 然后，在事件中检查设置了`ACTION_DOWN`哪个随机数并运行意图。`imageResource``imageView`

如果要检索图像资源名称，可以使用：

```
String imageName = (String) imageView.getTag(); 
```

现在，使用自定义文本开始一个新活动：

```
if(imageName.equalsIgnoreCase("fish"))
   description="Fish lives in water..."
else if(imageName.equalsIgnoreCase("cat"))
   description="cat is cute..."
.
.
.
. 
```

一切比较后，叫你的活动，

```
Intent i = new Intent(FirstScreen.this, SecondScreen.class);
i.putExtra(description,"ID");
startActivity(i); 
```

在您的第二个活动中检索图像描述，

```
Bundle extras = getIntent().getExtras();
String description = extras.getString("ID"); 
```

# iphone - iOS：向不在前台或后台运行的程序发送信息？

> ID：11769254
> 
> 赞同：0
> 
> 时间：2012-08-02T00:00:06.250
> 
> 标签：iphone, background, notifications, communication, launch

我的手机上有一些应用程序会弹出通知以响应事件。例如，它们是通知我头条新闻的新闻阅读器，或者当我需要在网络游戏中轮换时通知我的游戏。

看起来，这些应用程序不需要启动就知道监听可能触发通知的数据。我收到通知，自上次完全关闭电话以来，无论我是否启动了 Le Havre，都轮到我在 Le Havre 游戏中轮到我了。

我需要在我正在编写的应用程序中使用类似的功能：我需要我的应用程序弹出通知以响应服务器发送的事件，即使用户没有故意启动应用程序（以便它可以自己后台运行。）

有哪些机制可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:06:33.960

这些被称为推送通知，因为它们是由服务器“推送”的。[Apple 文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)在这里。

这是一个[教程](http://maniacdev.com/2011/05/tutorial-ios-push-notification-services-for-beginners/)和[另一个](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)关于它们的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:24:32.523

除了卢克的回答，还有另一种打开另一个应用程序的方法。您可以在 UIApplication 中将 openURL 方法与您已注册的特定 URL 方案一起使用。

有关如何使用的更多详细信息，请参阅教程：http: [//mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

对于传递数据，您可以以参数的形式传递。

# javascript - 使用 JQuery 按类属性过滤

> ID：11769256
> 
> 赞同：1
> 
> 时间：2012-08-02T00:00:32.970
> 
> 标签：javascript, jquery

我对 jQuery 中过滤的工作方式有点困惑。显然，这两行是不同的：

```
$('svg').filter('.woah')
$('svg[class=woah]') 
```

为什么会这样？这是我制作的一个简单的 jsFiddle：http: [//jsfiddle.net/8MLRE/4/](http://jsfiddle.net/8MLRE/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:06:34.500

第一个可能扮演后置过滤器的角色，例如你有 10 个元素并想继续使用`some_filter_here`.

第二个是一个简单的选择器。

[http://jsfiddle.net/8MLRE/10/](http://jsfiddle.net/8MLRE/10/)

所以，`$('svg')`你会得到 3 个元素，然后用一些选择器过滤它们，`[class=woah]`所以剩下一个。与`$('svg[class=woah]')`您同在，即刻获得。

[jQuery 过滤器](http://api.jquery.com/filter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:07:31.780

第一个获取所有`svg`元素，然后使用 filter 函数过滤它们并返回具有 class 的元素`woah`。我认为这是一项开销，因为此功能可以在一次调用中完成。

第二个做同样的事情，但使用他的属性选择器。最后一个更好，因为它只使用一个函数调用。但这是获取所有`svg`元素的更好方法 class `woah`。

相信你想达到`$('svg.woah')`

# mysql - mysql 和标记应用程序结构 - 替代“不在”子选择语句

> ID：11769261
> 
> 赞同：0
> 
> 时间：2012-08-02T00:02:06.690
> 
> 标签：mysql, tags

在考虑我正在开发的 Web 应用程序的最佳 mysql 数据库结构时，需要使用标签进行项目分类，我决定选择最常见的方法：在项目之间使用 tag_map 数据库表表和标签表，例如我分别有一个客户表和一个标签表：

```
Example of Clients table:
id,name
0,jack
1,john
2,anna

Example of Tags table:
id,tag
0,likes_oranges
1,likes_cars
2,likes_vacations

Example of tag_map
id,client_id,tag_id
0,0,0 (jack likes oranges)
1,0,1 (jack likes cars)
2,0,2 (jack likes vacations)
3,1,0 (john likes oranges)
4,1,1 (john likes cars)
5,2,1 (anna likes cars) 
```

考虑到这种分布，假设我们的客户表可以增长到 100 万行以上，我的问题是：查询所有*没有*“喜欢假期”标签的客户的最佳方法是什么？

我的第一选择是使用：

```
select name from clients where id not in (select client_id from tag_map where tags.tag = 'likes vacations') 
```

但是当客户端和 tag_map 表超过数千条记录时，此查询非常慢。

我也尝试将 tag_map 左连接到客户端表，但是由于所有客户端都分配了多个标签，因此使用*NOT NULL*也不起作用，因为我只想计算那些没有特定标签 id 的人（喜欢假期）。

请就此类要求的最佳选择声明提出建议。

提前致谢！

ķ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:25:42.567

请务必在 tag_map 表中的 client_id 和 tag_id 上添加索引。如果没有索引，您的查询会因大量行而变得非常慢。

用于`explain select ...`查看查询优化器如何优化查询。

# wordpress - 500 内部服务器错误 - Wordpress

> ID：11769262
> 
> 赞同：0
> 
> 时间：2012-08-02T00:02:07.693
> 
> 标签：wordpress, apache, internal-server-error

我在以下子域下上传了一个 Wordpress 网站 - [http://wptest.paddingtonterraces.com.au/](http://wptest.paddingtonterraces.com.au/)

对于从根目录外部抓取的所有内容，我都会收到“500 内部服务器错误”。

任何解决此问题的帮助将不胜感激。

**编辑：**

.htaccess 重写：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /paddington-terraces/
RewriteRule ^index\.php$ - [L]
RewriteRule ^css/(.*) /paddington-terraces/wp-content/themes/retlehs-roots-g2368ac2/css/$1 [QSA,L]
RewriteRule ^js/(.*) /paddington-terraces/wp-content/themes/retlehs-roots-g2368ac2/js/$1 [QSA,L]
RewriteRule ^img/(.*) /paddington-terraces/wp-content/themes/retlehs-roots-g2368ac2/img/$1 [QSA,L]
RewriteRule ^plugins/(.*) /paddington-terraces/wp-content/plugins/$1 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /paddington-terraces/index.php [L]
</IfModule> 
```

**解决了：**

必须从重写路径中删除*/paddington-terraces 。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:13:26.443

几种可能性：

1.  可能是一个糟糕的插件。
    *   禁用所有插件，然后刷新您的主页。
2.  安装不好。
    *   从 wordpress.org 下载一个新的副本。覆盖您当前的 WP 目录，除了 wp-contents 和 wp-config。
3.  错误的主题代码
    *   检查您的 functions.php 文件
    *   更好的是，如果你有命令行访问权限，从你的主 WP 目录运行：
        *   grep -rn /home/paddingt/public_html/wptest/gllr_add_script *
4.  PHP 或 Apache/HTTPD 版本错误
    *   回声 php_info();

我敢打赌是一个糟糕的插件。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T06:29:57.863

尝试停用插件并检查
您是否可以在不使用 wp-admin 的情况下停用插件。只需使用 ftp 登录并重命名插件名称，例如：'plugin_name' 更改为 'plugin_name_rename'.. 我遇到了同样的问题.. 我的问题通过停用插件解决了 :)

# ajax - Joomla 2.5 ajax 文件上传

> ID：11769265
> 
> 赞同：0
> 
> 时间：2012-08-02T00:02:23.033
> 
> 标签：ajax, joomla

我想通过我在 Joomla 2.5 上开发的组件上传文件，我需要不支持没有 Flash 的 HTML5 浏览器。在 Joomla 1.5 上我成功使用[了这个方法](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)，但是在 J2.5 上上传文件后，当返回 json 响应时，而不是上传我的页面，它只显示 joomla.json 文件的下载对话框。如何在内部 iframe 上成功接收 json 响应？

谢谢！

编辑：这是我正在使用的代码：

showUploadImage 在页面加载后执行，但元素 uploadIFrame 并不总是存在（当不需要上传文件时）。上传完成应该在收到带有文件名的响应时执行，但是由于我试图修复的错误，这个代码永远不会执行，而是显示一个下载 joomla.json 的对话框

```
 function showUploadImage(evt) {
        if (!document.getElementById("uploadIFrame")) {

            return false;

        }

        var frame = document.getElementById("uploadIFrame");

        var doc = frame.contentDocument;

        page = "\

                <html> \

                    <head> \

                        <link rel='stylesheet' href='<?php echo JRoute::_('components/com_tutorial/css/base.css',false); ?>' type='text/css' /> \

                        <link rel='stylesheet' href='<?php echo JRoute::_('components/com_tutorial/css/upframe.css',false); ?>' type='text/css' /> \

                    </head> \

                    <body>";

        page += ' \

                <div id="waitimage"></div> \

                <form id="fileUploadForm" method="post" enctype="multipart/form-data" action="<?php echo JRoute::_('index.php?option=com_tutorial&view=editchapter&task=savechapimage&format=json&tutId='.$this->tutId.'&chapterId='.$this->chapterId); ?>" target="uploadTarget"> \

                    <label class="title" for="images"><?php echo JText::_("UPLOAD IMAGE"); ?></label> \

                    <div class="separator25"></div> \

                    <div id="pageimages"> \

                        <div id="newimgfields"> \

                            <div class="controw"> \

                                <label class="title" for="image"><?php echo JText::_('SELECT_FILE'); ?></label><input size="35" id="image" type="file" name="image" /> \

                            </div> \

                            <div class="controw"> \

                                <input type="submit" onclick="document.getElementById(\'waitimage\').innerHTML=\'<div class = &quot;mooloader&quot;></div>\';" value="<?php echo JText::_('UPLOAD_IMAGE'); ?>" /> \

                            </div> \

                        </div> \

                    </div> \

                    <iframe id="uploadTarget" name="uploadTarget" src="" style="width:0;height:0;border:0px solid #fff;"></iframe> \

                </form> \

                ';

        page += "</body></html>";

        // now write out the new contents

        if (doc == undefined || doc == null)

            doc = frame.contentWindow.document;

        doc.open();

        doc.write(page);

        doc.close();  

        doc.getElementById("uploadTarget").onload = uploadDone;

    }

    function uploadDone() {

        var frame = document.getElementById("uploadIFrame");

        var doc = frame.contentDocument;

        var innerFrame = doc.getElementById("uploadTarget");

        var ret = innerFrame.contentDocument.getElementsByTagName("body")[0].innerHTML;

        var data = eval("("+ret+")"); 

        alert(data);

        if (data=="0"){

            alert("<?php echo JText::_('ERROR_SAVE_IMAGE'); ?>");

        }

        else if (data=="") {

        }

        else {

            var upImage = new Element('img',{

                'class':'tutmainthumb',

                'id':'tutThumb',

                'src':'components/com_tutorial/helpers/image.php?img='+data

            });

            upImage.inject('tutImage','top');

            $('uploadIFrame').dispose();

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:14:41.037

解决了。事实证明，响应被接收为“Contet-type: application/json”，当它是“Content-Type: text/html; charset=utf-8”时一切正常。所以错误不在javascript上，而是在控制器上。要修复它，只需添加：

```
 header("Content-Type: text/html; charset=utf-8",true);
        flush();

        echo json_encode(($imgChanging>0)?$thmbName:0); 
```

其中 echo 是发送回视图的 json 消息。

# html - 将页面转换为 PDF 时强制 html 元素透明

> ID：11769268
> 
> 赞同：4
> 
> 时间：2012-08-02T00:02:33.960
> 
> 标签：html, css, pdf, pdf-generation

我目前正在将网页转换为可以轻松打印为 pdf 的格式，同时保持相同的外观。许多打印到 pdf 的工具不允许您打印背景图像/颜色，所以我试图通过在表格的标题元素下放置一个纯色图像来解决这个问题。现在它看起来像这样：

```
<img src="/image.png" width="100%" style="margin-bottom:-90px">
<table><th>Header1</th><th>Header2</th>... 
```

当我通常使用浏览器查看标题元素时，这看起来好像标题元素具有纯色背景，但是当尝试打印到 pdf 时，`<th>`元素在图像上具有空白的白色背景。有没有办法强制这些元素被视为透明的文本与图像？或者也许有更简单的方法来解决背景问题？

**编辑：**
所以我真正的问题是我试图解决这个问题，以使尽可能多的 htmltopdf 工具可以访问该页面，最终这不是一个选择，因为它在一个浏览器或另一个浏览器中总是看起来不同并且一台打印机将强制设置边距，而另一台则不会，等等。我的解决方案是我在 php 中创建了一个简单的应用程序，它使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)打印页面，我必须先将它安装在我的服务器上。一旦完成，无论浏览器如何，pdf 看起来都不错！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:39:00.487

当您*“打印到 PDF”*网页时，您的浏览器首先要负责创建打印作业。

在这种情况下，他们必须为该作业创建一个***PostScript文件。***（只有下一阶段，当虚拟“PDF 打印机”开始发挥作用时，会从 PostScript 输入创建 PDF。与 LibreOffice、OpenOffice 和 MS Office 不同，~~浏览器 [还] 不能直接*“导出为 PDF”*。~~更新：显然，Chrome 确实如此：正如 yms 在评论中解释的那样：打开打印对话框，使用打印机选择下拉列表选择“另存为 PDF”。但是，我发现默认情况下它不打印背景。）

现在你必须考虑两件事：

1.  大多数浏览器都有设置，允许“打印图像”/“不打印图像”和“打印背景颜色”/“不打印背景颜色”等等。

    所以你应该首先问自己：

    *   我的浏览器打印设置是什么？

    *   我的浏览器是否将 PostScript 交给具有我想要的颜色的 PDF 打印机？

    如果不是，则不是 PDF 打印机的错。

2.  至于透明度功能：***PostScript 不支持透明度***（只有 PDF 支持）。因此透明区域需要为 PostScript 输出“展平”（即，转换为***试图模仿透明对象外观的位图图像***）。

    然而，在这种“扁平化”方面，并不是所有的应用程序和浏览器都做得很好。

    只要您需要*“打印到 PDF”*，就没有机会在 PDF 文件中获得真正的透明度（您只会得到“mimikry”位图）。

一旦浏览器开始能够*“导出为 PDF”* ，这里的透明度才会开始发生。或者您可能会找到一个第三方工具，它可以**直接**从 HTML 转换为 PDF（无需使用先转换为可打印 PostScript 的*打印*中间步骤）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T15:02:31.947

正如@Kurt Pfeifle 所提到的，对您来说最好的选择可能是使用一种无​​需通过打印机即可直接从 HTML 转换为 PDF 的工具。您可以尝试以下 2 个免费组件：

*   [wkhtmltopdf](https://wkhtmltopdf.org/)命令行应用程序。
*   [Amyuni webkitpdf](http://www.amyuni.com/en/developer/webkitpdf/) Windows 库，带有 C# 和 C++ 绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-02T16:17:57.203

我在 Google Chrome 中找到了一个解决方案，它适用于 Windows 10 / Google Chrome 版本 86.0.4240.111。

打印前直接到页尾！现在，按 Ctrl+P 并从目的地选择“另存为 pdf”。您将获得具有透明度的 PDF！

如果在打印之前没有走到 html-page 的末尾，就没有透明度！

# jquery - jQuery 切换（单击以显示一个 div，同时隐藏其他 div）

> ID：11769270
> 
> 赞同：15
> 
> 时间：2012-08-02T00:02:41.363
> 
> 标签：jquery, toggle

基本思想是我有一堆 div，每个都可以切换（显示/隐藏）。

当切换一个 div 时，我希望当前显示隐藏的其他 div，因此一次只允许显示一个 div。

此外，我还希望能够在元素外部单击以隐藏打开的 div。

只是为了让事情更清楚，我提供了一个示例，除了在打开另一个 div 时关闭一个 div（一次只打开一个 div 功能）之外，它目前可以执行我想要的所有操作：

```
$(document).ready(function(){

  $('div.dropdown').each(function() {
    var $dropdown = $(this);

    $("a.dropdown-link", $dropdown).click(function(e) {
      e.preventDefault();
      $("div.dropdown-container", $dropdown).toggle();
      return false;
    });

});

  $('html').click(function(){
    $("div.dropdown-container").hide();
  });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<div id="dropdown-1" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>

<div id="dropdown-2" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>

<div id="dropdown-3" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T00:08:09.583

您基本上只需要隐藏除被切换的 div 之外的所有 div：

```
$(document).ready(function(){

  $('div.dropdown').each(function() {
    var $dropdown = $(this);

    $("a.dropdown-link", $dropdown).click(function(e) {
      e.preventDefault();
      $div = $("div.dropdown-container", $dropdown);
      $div.toggle();
      $("div.dropdown-container").not($div).hide();
      return false;
    });

});

  $('html').click(function(){
    $("div.dropdown-container").hide();
  });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<div id="dropdown-1" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>

<div id="dropdown-2" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>

<div id="dropdown-3" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-27T06:23:56.783

您可以使用以下代码以智能且简单的方式实现：

```
<div id="dropdown-1" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>

<div id="dropdown-2" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>

<div id="dropdown-3" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div> 
```

* * *

```
$(document).ready(function(){

 $(".dropdown-link").click(function(){
 $(".dropdown-container").slideUp('slow')
 $(this).closest('.dropdown').find('.dropdown-container').slideDown('slow');

 });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="dropdown-1" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>

<div id="dropdown-2" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>

<div id="dropdown-3" class="dropdown dropdown-processed">
  <a class="dropdown-link" href="#">Options</a>
  <div class="dropdown-container" style="display: none;">
    <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
    </ul>
  </div>
</div>
```

工作示例链接：http: [//jsfiddle.net/NFTFw/1901/](http://jsfiddle.net/NFTFw/1901/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T00:17:44.217

尝试以下操作：

```
$(document).ready(function(){

  $("a.dropdown-link").click(function(e) {
    e.preventDefault();
    var $div = $(this).next('.dropdown-container');
    $(".dropdown-container").not($div).hide();
    if ($div.is(":visible")) {
        $div.hide()
    }  else {
       $div.show();
    }
});

   $(document).click(function(e){
       var p = $(e.target).closest('.dropdown').length
       if (!p) {
          $(".dropdown-container").hide();
       }
   });

}); 
```

[演示](http://jsfiddle.net/6t6BP/4)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T00:42:04.517

我让它尽可能短！快乐编码！

```
$(document).ready(function(){
  $(document).on("click", "a", function(event){
    $(this).siblings().show()
    $(this).parent().siblings().each(function(index,element){
       $(element).find(".dropdown-container:visible").hide();
    });
  });
}); 
```

演示：http: [//jsfiddle.net/NFTFw/60/](http://jsfiddle.net/NFTFw/60/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T00:11:41.947

这段代码应该可以解决问题，而无需使用其他库。:)

[http://jsfiddle.net/NFTFw/42/](http://jsfiddle.net/NFTFw/42/)

```
$(document).ready(function(){

  var dd = $(".dropdown-container");

  $("a.dropdown-link").click(function(e) {
    e.preventDefault();
    e.stopPropagation();
    dd.hide();
    $(this).next().show();
  });

  $(document).click(function() {
    dd.hide();
  });

  dd.click(function(e) {
    e.stopPropagation();
  });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T00:12:48.223

干得好：

```
$("a.dropdown-link", $dropdown).click(function(e) {
  e.preventDefault();
  $(".dropdown-container").hide();
  $("div.dropdown-container", $dropdown).toggle();
  return false;
}); 
```

注意添加的行：

```
$(".dropdown-container").hide(); 
```

我们只是在切换我们想要的 div 之前隐藏所有的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T00:17:59.480

```
 $(document).ready(function(){

      $('div.dropdown').each(function() {
        var $dropdown = $(this);

        $("a.dropdown-link", $dropdown).click(function(e) {
          e.preventDefault();
          $("div.dropdown-container").hide();
            if($("div.dropdown-container", $dropdown).hide()){
                $("div.dropdown-container", $dropdown).show();
            }else{
                $("div.dropdown-container", $dropdown).hide();
            }
          return false;
        });

    });

      $('html').click(function(){
        $("div.dropdown-container").hide();
      });

    }); 
```

[http://jsfiddle.net/NFTFw/40/](http://jsfiddle.net/NFTFw/40/)

# ruby-on-rails - 使用 sqlite3 数据库的 Active Admin 中的时间字段变为空白

> ID：11769271
> 
> 赞同：2
> 
> 时间：2012-08-02T00:02:59.020
> 
> 标签：ruby-on-rails, sqlite, activeadmin

我正在使用带有 Rails 3.2.3 和 Active Admin 的 sqlite3 上的本地数据库。我的两个字段属于类型，我知道时间不是 sqlite3 中的类型，但我们正在使用 postgres 进行生产（不是我选择不在 postgres 中同时执行它们）。在新/编辑表单中，我输入：

```
 f.input :time_start, :as => :time_select
  f.input :time_end, :as => :time_select 
```

它显示为一个字段（就像没有 time_select 一样），但是当我输入数字并尝试保存它时，该字段在下一页上最终为空白。我使用 heroku 和 postgres 将它推送到暂存区，当我尝试编辑活动时它仍然是空白的。我如何能够在本地和临时数据库中创建和保存该时间字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:40:33.350

刚刚面临同样的问题。猜猜这是某种 ActiveAdmin 错误。

我暂时的出路是用 2 个相应的 t.integer 更改 t.time 并制作类似的东西

```
f.inputs "Start" do
  f.input :time_start_h, as: :select, collection: 0..23
  f.input :time_start_m, as: :select, collection: 0..59
end
f.inputs "End" do
  f.input :time_end_h, as: :select, collection: 0..23
  f.input :time_end_m, as: :select, collection: 0..59
end 
```

粗糙，但总比没有好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:37:45.713

所以在重命名 time_start 和 time_end 之后，它起作用了。然后它停止工作。因此，我将它们更改为日期时间沙子，尽管日期字段没用，但它现在可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T17:25:27.337

我通过将时间字段设置为字符串来解决这个问题：

```
f.inputs "Start" do
  f.input :start, :as => :string
end 
```

这允许像“2pm”这样的输入，我发现它实际上比下拉菜单更可取。

# sql-server - ASP.NET MVC 4/Web API - 如何配置 SQL Server 以允许从浏览器中的 URL 访问 API 调用？

> ID：11769279
> 
> 赞同：0
> 
> 时间：2012-08-02T00:03:43.813
> 
> 标签：sql-server, asp.net-mvc, asp.net-web-api

我有一台带有 SQL Server 2012 Express 数据库的服务器。我已通过身份验证连接到它，并将它用作 ASP.NET MVC 4 应用程序的后端。

有了这个应用程序，我还开发了一个 API。在我自己的应用程序中使用 jQuery 以编程方式调用 API 工作正常。查询数据库以获取信息也可以。

但是，当我从 VS2010 运行应用程序并尝试使用可访问数据库的 URL 访问 API 时，我收到 HTTP 500 错误。

只是为了确保这个问题不在我的应用程序端，然后我修改了 API 资源，以便它获取一个本地数组（而不是来自数据库的信息），当我点击相同的 URL 时，它以 XML 形式返回信息本地主机页面。

问题似乎是对 API 的 URL 调用尝试连接到数据库，而不是作为经过身份验证的用户（我），而是从浏览器。

如何配置 SQL Server 以允许在浏览器中对 API 进行 URL 调用以访问数据库并以 JSON/XML 形式返回数据？（例如，就像您可以使用 Twitter REST API 一样）

**更新：** 调试 HTTP 请求的输出：

请求网址：http://localhost:5555/api/Performance/ShowMachines

请求方法：GET

状态码：500 内部服务器错误

请求标头view source

接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8

接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.3

接受编码：gzip、deflate、sdch

接受语言：en-US,en;q=0.8

连接：保持活动

主机：本地主机：5555

用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11

响应标头view source

缓存控制：私有

连接：关闭

内容长度：0

日期：格林威治标准时间 2012 年 8 月 2 日星期四 16:40:11

服务器：ASP.NET开发服务器/10.0.0.0

X-AspNet-版本：4.0.30319

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:10:58.290

将连接字符串更改为

```
<add name="PerfMonDataConnectionString" connectionString="Data Source=cloud\sqlperf,1433;Initial Catalog=PerfMonData;User=myusername;Password=mypassword providerName="System.Data.SqlClient" /> 
```

并确保无论用户帐户是什么都有权访问数据库。

这可能是也可能不是最好的方法，具体取决于您的安全要求

此外，用户/密码键不在我的脑海中，它可能是 UserId，[www.connectionstrings.com](http://www.connectionstrings.com)是你的朋友

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T22:21:29.670

我解决了这个问题并在这里回答： [C#/ASP.NET - Calling Web API operation via URL? : HTTP 错误 500](https://stackoverflow.com/questions/11751201/c-asp-net-calling-web-api-operation-via-url-http-error-500)

问题是，当我创建 .dbml 文件并将表拖放到其中时，自动生成的 DataContext 类创建了 EntitySet 对象来表示外键关系。我创建了带有获取沙集的简单类以返回 JSON，而不是 DataContext 中的类，不包括 EntitySet 对象。结果，它就像一个魅力。显然 EntitySets 是不可序列化的，因此给出了 500 错误。

# c++ - 用哪种语言做我的正则表达式？

> ID：11769283
> 
> 赞同：0
> 
> 时间：2012-08-02T00:04:54.607
> 
> 标签：c++, regex, perl, voice

我是一名工程专业的学生，​​只是想创造一些东西，这样我就可以一口气学习多个设计领域——基本上我的项目是在我家里的一个内部通信系统上工作，该系统可以无线通信。我最终可能会做某种语音处理，看看我是否可以像 Siri 一样解析文本，并让它最终通过说话来调用一个函数。这意味着我可能有一个恒定的文本流来解析一段相当长的时间。

那么，我的问题有几个部分。

1）我假设正则表达式是解析文本并将我想要的命令与输入到我的系统的任何文本匹配的路径？如果没有，请指点我另一个方向！

2）我理解 Perl 似乎是标准，但我运行的后台应用程序将用 C++ 或 C# 编写，所以我更喜欢在这两种语言中使用正则表达式方法。

-我看到有 Regex++ 或[http://www.pcre.org/](http://www.pcre.org/)，其中任何一个就足够了，还是有必要使用 Perl？

我最看重的是速度，我宁愿不说什么又要等很久才能回来。我确信和大多数其他人一样，速度是关键。我在这里看到另一个问题提出了类似的问题，但没有人真正列出基准。对于我的应用程序，假设我的代码尽可能简单，regex++ 是否足够快？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:10:42.717

正则表达式是一个实施决策。目前，您离实施决策还有很长的路要走。

您将运行哪种硬件？硬件是否支持您选择的语言？（例如，C# 对 Windows 以外的任何东西的支持都非常有限）

事实证明，您不需要像正则表达式那样复杂的东西。

*根据以下OP的评论进行跟进：*

您的评论正在开始收集您的系统的一些要求。

*   基于文本的命令
*   可在 Windows 和 OSX 上运行
*   平台必须能够与“电路”对话
    *   您需要任何特定的协议吗？

与您的原始问题相关的最大要求是“基于文本的命令”。这些 1 个单词的命令或句子是否像上面 paddy 的评论？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:31:23.423

Perl 正则表达式无疑是最先进的正则表达式引擎。但问题是你是否真的需要这种能力。可能不是。

我建议先考虑**什么**。类图，您的软件架构，算法等。如果您想编写一个快速的实现/原型，请使用*Python*（漂亮的语言，喜欢 Windows，完全面向对象，不慢）或*Perl*（神的力量在您指尖。没有什么是你做不到的。几乎所有东西都有可用的模块。但是编程 Perl 被称为“黑客”是有原因的，虽然它在 Windows 上运行良好，但它不像在 * 上那样有趣nix) 或任何其他花哨的脚本语言。

在进行一些分析之后，考虑用 C/C++ 重写性能关键或系统级的东西。Perl 具有出色的语言绑定；您可以编写 C/C++ *inline*。正则表达式匹配将不是关键部分。

C# 不是很便携，除非您放弃 .NET 并转而使用 Mono 框架。

# php - PHP ActiveRecord 通过 Has_Many 关联创建子模型

> ID：11769288
> 
> 赞同：6
> 
> 时间：2012-08-02T00:05:43.527
> 
> 标签：php, phpactiverecord

我正在拿起 PHP Active Record 并处理关联。我有两个使用“Has_Many”和“Belongs_to”（父/子）的相关对象，并在创建新父记录时尝试创建子记录（在本例中为我的“单元”创建“皮肤”）。

```
class Unit extends ActiveRecord\Model 
{  
   static $has_many = array(
       array('skins')
   );
}

class Skin extends ActiveRecord\Model 
{
    static $belongs_to = array(
       array('unit')
    ); 
} 
```

我在这里找到了这两个线程： [http:](http://www.phpactiverecord.org/boards/4/topics/153) [//www.phpactiverecord.org/boards/4/topics/153 Activerecord-association：创建新对象（查找类）](https://stackoverflow.com/questions/9280455/activerecord-association-create-new-object-find-class)

所以我的代码目前看起来像：

```
$unit = new Unit();
$unit->name = 'somename';
$unit->description = 'somedescription';

$skinArray = array('name' => $unit->name.' Default Skin');
$unit->create_skins($skinArray);
$unit->save(); 
```

上面的代码没有将新皮肤与数据库或代码中的单元相关联，尽管它 /is/ 在数据库中放置了一个新皮肤记录（unit_id 为 NULL）。使用“build_skins”不会将皮肤记录放入数据库。

我希望有一种方法可以像其他一些 ORM 那样通过模型本身向父模型添加“子”。我能做到这一点的唯一方法是明确地做到这一点：

```
$unit = new Unit();
$skin = new Skin();

$unit->name = 'somename';
$unit->description = 'somedescription';
$unit->save();

$skin->unit_id = $unit->id;
$skin->name = $unit->name.' Default Skin';
$skin->save(); 
```

也许这就是它应该在 PHP ActiveRecord 中完成的方式，而我的期望是错误的。但是我希望有一种方法可以通过不需要先通过显式调用将父级保存到数据库的对象来实现。例如，“Recess”PHP 框架会像这样对单元进行简单调用：$unit->addSkin($skin);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T10:50:49.030

你配置数据库连接吗？查看[gihub](https://github.com/jpfuentes2/php-activerecord)示例。

```
<?php
require_once __DIR__ . '/../../ActiveRecord.php';

class Book extends ActiveRecord\Model
{
// explicit table name since our table is not "books"
static $table_name = 'simple_book';

// explicit pk since our pk is not "id"
static $primary_key = 'book_id';

// explicit connection name since we always want production with this model
static $connection = 'production';

// explicit database name will generate sql like so => db.table_name
static $db = 'test';
}

$connections = array(
'development' => 'mysql://invalid',
'production' => 'mysql://test:test@127.0.0.1/test'
);

// initialize ActiveRecord
ActiveRecord\Config::initialize(function($cfg) use ($connections)
{
    $cfg->set_model_directory('.');
    $cfg->set_connections($connections);
});

print_r(Book::first()->attributes());
?> 
```

你必须初始化数据库才能做到这一点`ActiveRecord\Config::initialize`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T19:02:41.237

根据您的键，您是否应该不自动递增（没有 NULL 作为默认值）。如果它适合您的模式，我会查看 db 键默认值并调整自动增量或 unit_id 的默认值。你说协会正在使用两步保存。两步保存的unit_id是否正确保存？

这些文档不是很有帮助，因为它们建议您尝试避免**显式保存。**

@outrightmental 对使用钩子设置 unit->id 有一些有趣的事情，但它不需要是 before_create 回调吗，你不想在没有关联工作的情况下插入记录。请参阅[此活动记录回调文档](http://www.phpactiverecord.org/projects/main/wiki/Callbacks)。

```
$after_create = array('validate association and assign unit_id if NULL'); 
```

或者

```
$before_create = array('explcitly assign unit_id'); 
```

? 回调文档提供了其他建议

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-01T22:35:39.220

我建议`afterSave()`在您的父模型类中的挂钩中或在自定义模型方法中实现该方法`createChild($data)`。

但是（例如[Yii 框架的 CActiveRecord](http://www.yiiframework.com/doc/guide/1.1/en/database.ar)）类似以下的内容很好：

```
class Unit extends ActiveRecord\Model 
{  
 ...
    public function afterSave() {
        if ($this->isNewRecord) {                
            $firstSkin = new Skin();
            $firstSkin->unitId = $this->id;
            $firstSkin->name = $this->name . ' Default Skin';
            $firstSkin->save();
        }
    }  
 ...   
} 
```

如果实际上特定行为对于控制器来说是唯一的，那么也许使用以下替代方法（从控制器传入的数据以创建子节点）：

```
class Unit extends ActiveRecord\Model 
{  
 ...
    public function createSkin($data) {
        $firstSkin = new Skin();
        $firstSkin->unitId = $this->id;
        $firstSkin->setAttributes($data);
        $firstSkin->save();
    }  
 ...   
} 
```

希望有帮助。我是 ActiveRecord 的粉丝，用于快速搭建脚手架，但要注意在大型应用程序中过于“神奇”地依赖它。顺便说一句，在 Rails 中也非常好；）它的起源。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-04-29T10:28:19.183

我不太熟悉 php 活动记录，但根据我的经验（同样的问题是当我使用 Doctrine 并尝试添加子视图时，在我将父子视图持久化到数据库之前也有空值）。我认为 phpactiverecord 没有这个功能，所以我建议的解决方案 - 在模型中手动创建方法，比如 Unit::addSkin(Skin $skin)，里面会有这样的东西：

```
$skin->unit_id = $this->id;
$skin->save(); 
```

基本上就是这样的逻辑。但我不能说这种方法是好的，甚至是中立的实践。这就是你可以在 Doctrine 中做这些事情的方式。

另外，您尝试过 Propel 吗？如果你喜欢主动记录，我想你会觉得它很有趣。

# java - Java DecimalFormat - 使用整数

> ID：11769291
> 
> 赞同：0
> 
> 时间：2012-08-02T00:06:22.020
> 
> 标签：java

我有一种以便士为单位的货币，作为整数（例如：）`1234`。我需要输出为：`$12.34`. 我们不允许在这个赋值中使用双精度或浮点数，只能使用整数。

这是我所拥有的：

```
totalChange = 1234;
DecimalFormat ourFormat = new DecimalFormat("$#,###.00");
String totalString = ourFormat.format(totalChange);
System.out.println("Your change of " + totalString + " is as follows:"); 
```

我会假设 DecimalFormat 会从右到左，分配`34`在小数点之后，并且`12`应该放在前面。

我得到一个输出`Your change of $1234.00 is as follows:`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T00:09:57.223

格式不会人为地引入输入中不存在的小数位。

您可以尝试先转换为美元和美分，然后将两者与“。”结合起来。

```
int dollars = totalChange / 100;
int cents = totalChange % 100; 
```

**提示**（基于@DanielFischer 的评论）

美分可以是 1 位或 2 位数字，但您可能希望始终将它们输出为 2 位数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T00:18:32.397

这个问题可能是试图教你整数除法和模数。

当您将整数相除时，余数将被完全丢弃，因此如果您需要该信息，则需要使用模运算符。模运算符 (%) 只为您提供除法的余数。例如 5 / 3 = 1 和 5 % 3 = 2。

这些操作非常适合您的问题。

假设我想弄清楚我需要多少五分钱和便士才能准确地找零。

```
int totalChange = 27; //I have 27¢
int nickels = totalChange / 5; //This gives 5 and discards the remainder
int pennies = totalChange % 5; //This gives 2, the remainder from your previous division 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T03:55:32.637

对于格式化，使用 Formatter.format()，给它美元和美分作为参数，并用前导 $ 和美分的 2 位数字进行格式化（如上面有人建议的那样）。由于这是家庭作业，我不会放弃如何做到这一点，但 javadocs 应该会有所帮助：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T00:11:25.503

我不知道这是否违反了你的规则（这听起来很奇怪，但是干草）。你可以试试

```
int totalChange = 1234;
DecimalFormat ourFormat = new DecimalFormat("$#,###.00");
String totalString = ourFormat.format(totalChange / 100f);
System.out.println("Your change of " + totalString + " is as follows:"); 
```

否则，我认为您需要提供自己的格式化程序。

# javascript - 在输入键时执行jquery函数

> ID：11769292
> 
> 赞同：0
> 
> 时间：2012-08-02T00:06:24.623
> 
> 标签：javascript, jquery

好的..这是我尝试执行一个函数而不是从标签中调用它..事情是..它不工作..请注意，我对所有这些*叹息仍然很新鲜*

```
 <div class="widget first">
                <div class="head"><h5 class="iFrames">Static table</h5></div>
            <table id="example" cellpadding="0" cellspacing="0" width="100%" class="tableStatic">
                <thead>
                        <tr>
                        <td width="20%">Column 1</td>
                        <td width="20%">Column 2</td>
                        <td width="20%">Column 3</td>
                        <td width="20%">Column 4</td>
                        <td width="20%">Column 5</td>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>

<input type="text" name="name" id="name" /> 
```

脚本会：

```
/* Global var for counter */
var giCount = 1;

$(document).ready(function() {
   $('#example').dataTable();
} );

function fnClickAddRow() {
    $('#example').dataTable().fnAddData( [
        $("#name").val(),
        giCount+".2",
        giCount+".3",
        giCount+".4",
        giCount+".5" ] );
     $("#name").val('').focus();
    giCount++;
}

$('#name').on('keyup', function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    if (code == 13) {
       fnClickAddRow();
    }
}); 
```

现在，我正在尝试在输入时添加具有“名称”值的新行。而且它不起作用：\ ..顺便说一下，在这个例子中我使用的是DataTables ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:18:48.163

这个对我有用：

[http://jsfiddle.net/eCrJc/1/](http://jsfiddle.net/eCrJc/1/)

尝试放入并`fnClickAddRow()`检查浏览器控制台是否有任何 javascript 错误。`$('#name').on('keyup'``$(document).ready`

# html - 对输入类型文本和复选框使用不同的 css

> ID：11769299
> 
> 赞同：0
> 
> 时间：2012-08-02T00:06:43.090
> 
> 标签：html, css, checkbox

当我尝试更改输入复选框的宽度时，我遇到了麻烦。

所有输入都是宽度：200px（文本、按钮、复选框）。但我需要一个宽度：20px 仅用于复选框。

可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:13:02.013

您可以使用：

```
input[type="checkbox"] {width:20px} 
```

但这并不完全兼容浏览器。如果您在复选框中添加一个类，所有浏览器都会识别，即。

```
<input type="checkbox" class="checkbox" /> 
```

然后使用：

```
.checkbox {width:20px} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:09:15.450

```
input[type=checkbox] { width: 20px; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T00:10:27.300

您可以通过 CSS 设置比默认复选框更小的尺寸，但不能更大。如果要增加复选框的大小，则需要 jquery。示例[链接](http://www.tripwiremagazine.com/2011/06/jquery-forms-plugins.html)

# java - glassfish、雄猫和球衣

> ID：11769301
> 
> 赞同：1
> 
> 时间：2012-08-02T00:06:59.193
> 
> 标签：java, tomcat, glassfish, jersey

如果我使用 Glassfish 并且只需要 jersey 用于 jax-rs 和 grizzly 用于 servlet/jsp，glassfish 是否会加载我不需要的所有其他 Java EE 组件，并且会占用比运行 jersey/tomcat 更多的资源，或者 glassfish 只会加载 jersey /grizzly 并会使用几乎相同的资源？我尝试运行启动默认 glassfish 和默认 tomcat，glassfish 需要更多的内存。

有什么理由不用tomcat跑球衣吗？也许是因为 Glassfish 的集成做得更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:43:26.853

有很多人将 Jersey 与 Tomcat 一起使用。Tomcat 只是一个 servlet 容器，但不会干扰您选择通过其他方式（例如 Jersey）支持的其他 Java EE 技术。您可能需要管理框架的一些初始化，等等，其他全 J2EE 容器（如 Glassfish）已经提供，但这应该不会太痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T00:49:05.453

您可以使用“网络配置文件”来帮助最大限度地减少下载、初始内存和启动时间。

最新的网络简介是[http://dlc.sun.com.edgesuite.net/glassfish/3.1.2.2/release/glassfish-3.1.2.2-web.zip](http://dlc.sun.com.edgesuite.net/glassfish/3.1.2.2/release/glassfish-3.1.2.2-web.zip)

启动时间介于 Tomcat 和 GlassFish“完整”配置文件之间。

Web 配置文件包括 Jersey 的集成实现。

# java - 在带有分隔符的 ListView 中显示 JSON

> ID：11769305
> 
> 赞同：0
> 
> 时间：2012-08-02T00:07:15.227
> 
> 标签：java, android, xml, json, android-layout

我希望能够获取 JSON 数据并将其格式化为 ListView，其中每个最外面的对象作为标题。例如，“A 公司”及其下的所有项目都应该有一个分隔符。然后应该有“公司B”分隔符，它是该标题下的项目。这是我将使用的 JSON 响应的示例。我知道如何解析 JSON，只是不知道如何显示它。

```
{
"Company A": {
    "name": "Company A",
    "id": "1145",
    "projects": [
        {
            "name": "Test Project - DELETE",
            "id": "39771",
            "amount": "0.00",
            "billingType": "HOURLY",
            "date": "2012-07-09 15:38:06",
            "u_id": "25445",
            "itemID": "3"
        },                        
        {
            "name": "TEST",
            "id": "39905",
            "amount": "0.00",
            "billingType": "FIXED",
            "date": "2012-07-10 13:19:10",
            "u_id": "25455",
            "itemID": "1"
        },
        {
            "name": "Test Project - DELETE",
            "id": "39771",
            "amount": "0.00",
            "billingType": "HOURLY",
            "date": "2012-07-09 15:38:06",
            "u_id": "25445",
            "itemID": "4"
        }
    ]
},
"Company B": {
    "name": "Company B",
    "id": "5569",
    "projects": [
        {
            "name": "Type Test",
            "id": "39657",
            "amount": "0.00",
            "billingType": "FIXED",
            "date": "2012-07-12 10:14:30",
            "u_id": "25479",
            "itemID": "1"
        }
    ]
} 
```

}

有没有一种简单的方法来实现这种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:14:36.410

是和不是。

您可以轻松地将每个集合（带有内容的标题）转换为一个对象，并将内容本身转换为子对象（如果您需要帮助，请询问:)）；`ListView`如果您不熟悉使用多种项目类型，困难的部分是配置。

我想[这个问题](https://stackoverflow.com/questions/3918316/multiple-cell-types-in-android-listview)的答案会对你有用。

总结：基本上，`ListView`可以使用多种项目类型；因此您的标题将是一种项目类型，每个数据项将是第二种类型。只需实现粘合逻辑，以便为正确的对象获得正确的视图类型，并为正确的`ListView`“位置”获得正确的对象。

# jquery - 如何在由a包围的代码中插入换行符 标签

> ID：11769309
> 
> 赞同：1
> 
> 时间：2012-08-02T00:07:46.757
> 
> 标签：jquery, html, xml, pretty-print, pre

我有一个 XML 示例代码块，它们都在一个`<pre>`标记内的一行中。我想以编程方式将其分成多行，然后添加缩进。

示例代码已经用 HTML 特殊字符格式化，替换了每个标记的左右尖括号。

我计划通过加载为 jQuery 对象来使用 jQuery 操作代码。但是我怎样才能在每个标签后输入换行符呢？两者都`\n`以`<br>`文本形式打印，因为，嗯，它是`<pre>`. 我基本上想模拟当您使用返回键输入换行符时在 IDE 中发生的情况。有什么想法吗？

更新：使用 .html()`\n`我让它工作，在这个更新的 jsfiddle 中显示：http: [//jsfiddle.net/SPms3/17/](http://jsfiddle.net/SPms3/17/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:10:48.303

这些都不应该打印为文本。使用`jQuery.html`，不使用`jQuery.text`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:11:21.077

如果您将此数据设置在变量中，请确保使用 " 而不是 ' 换行，因为 /n 如果使用 '（单）引号括起来，则不会呈现。

如果您不使用 javascript，请在​​键盘上按 Enter 键以呈现换行符...

# objective-c - 在ios中添加对象崩溃

> ID：11769310
> 
> 赞同：0
> 
> 时间：2012-08-02T00:07:55.347
> 
> 标签：objective-c, ios, xcode, nsmutablearray, nsuserdefaults

我正在尝试将一个对象添加到 nsuserdefault 中，但我得到了这个崩溃“[__NSCFArray insertObject:atIndex:]: mutating method sent to immutable object”它在这一行崩溃：[currentFav addObject:incomingBabe];

我不知道它为什么会崩溃，它在我的另一个项目上工作。

这是我的代码

```
-(IBAction)favorite {
    NSUserDefaults *standardDefault = [NSUserDefaults standardUserDefaults]; 
    NSMutableArray *currentFav = [[NSUserDefaults standardUserDefaults]objectForKey:@"fav"];
    NSLog(@"strings stored = %@",currentFav);
    NSMutableArray *newFav = [NSMutableArray arrayWithObject:[NSString stringWithFormat:@"bikini%02d.jpeg",self.currentNumber]];

if (currentFav == NULL){
   currentFav = [[NSMutableArray alloc]init];
  }
  for(NSString *incomingBabe in newFav){
  BOOL hasStringAlready = NO;
  for(NSString *currentFavorite in currentFav){
  if([currentFavorite isEqualToString:incomingBabe]){
    hasStringAlready = YES;
    NSLog(@"has string already");
    break;
    }
  }
if (!hasStringAlready) {
  [currentFav addObject:incomingBabe];
  hasStringAlready = YES;
  }
}

 [standardDefault setObject:currentFav forKey:@"fav"];
 [standardDefault synchronize];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:21:40.837

基本上它说您正在尝试在 NSArray 上使用 NSMutableArray 中的方法。

这是因为“从 NSUserDefaults 返回的值是不可变的，即使您将可变对象设置为值。”

```
NSMutableArray *currentFav = [[NSUserDefaults standardUserDefaults]objectForKey:@"fav"]; 
```

将返回一个数组，而不是可变数组。您应该制作它的可变副本。

```
NSMutableArray *currentFav = [[[NSUserDefaults standardUserDefaults]objectForKey:@"fav"] mutableCopy]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:38:50.800

您可以从 1 楼了解问题的原因。你可以用他的方法来解决你的问题，或者这样：

```
NSMutableArray *currentFav = [NSMutableArray arrayWithArray:[[NSUserDefaults standardUserDefaults]objectForKey:@"fav"]]; 
```

# java - SwingWorker 之类任务的 Java 线程故障排除

> ID：11769324
> 
> 赞同：5
> 
> 时间：2012-08-02T00:09:37.333
> 
> 标签：java, multithreading, swing, swingworker

线程转储包含丰富的信息。例如，如果我怀疑某个动作触发了多次，那么我需要做的就是在每次触发该动作时转储堆栈跟踪，然后调查堆栈是否有错误的动作触发。

在某些情况下，鼓励开发人员放弃顺序执行的概念简单性。例如，Swing 提供 SwingWorker 帮助程序来解决单线程 EDT 的限制。现在，如果我转储堆栈跟踪，它就没有用了，因为该操作是由 SwingWorker 触发的，并且没有关于谁启动了 SwingWorker 任务的信息。

那么，我该如何排除故障呢？是否有“重定向”线程转储以遵循真正原因的巧妙技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:16:18.957

您可以扩展 SwingWorker 以在创建堆栈时记录堆栈（或在执行时，但您需要创建另一个执行方法，因为它是最终的）。创建原因是相对昂贵的，所以你可能只想在调试时这样做（检查日志级别或类似的）

```
import java.util.concurrent.ExecutionException;
import javax.swing.SwingWorker;

public abstract class TracedSwingWorker<T, V> extends SwingWorker<T, V> {

    private final Exception cause;

    public TracedSwingWorker() {
        super();
        this.cause = new Exception("TracedSwingWorker created at:");
    }

    @Override
    protected final T doInBackground() throws Exception {
        try {
            return doWorkInBackground();
        }
        catch(Exception e) {
            if(this.cause != null) {
                Throwable cause = e;
                while(cause.getCause() != null) {
                    cause = cause.getCause();
                }

                cause.initCause(this.cause);
            }

            throw e;
        }
    }

    protected abstract T doWorkInBackground();

    // just for testing
    public static void main(String[] args) {
        new TracedSwingWorker<Void, Void>() {
            @Override
            protected Void doWorkInBackground() {
                throw new IllegalArgumentException("Exception in TracedSwingWorker!");
            }

            @Override
            protected void done() {
                try {
                    get();
                }
                catch (InterruptedException e) {
                    e.printStackTrace();
                }
                catch (ExecutionException e) {
                    e.printStackTrace();
                }
            }
        }.execute();
    }
} 
```

印刷：

```
java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: Exception in SwingWorker!
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
<snip>
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: java.lang.Exception: SwingWorker created at:
        at TracedSwingWorker.<init>(TracedSwingWorker.java:15)
        at TracedSwingWorker$2.<init>(TracedSwingWorker.java:60)
        at TracedSwingWorker.main(TracedSwingWorker.java:60) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:21:08.437

我可能会告诉你一些你已经知道的事情，但我建议使用*ThreadDump*

[http://www.oracle.com/technetwork/java/javase/tooldescr-136044.html#gbmpn](http://www.oracle.com/technetwork/java/javase/tooldescr-136044.html#gbmpn)

如果您使用 IDE，那么这很好：

NetBeans [http://netbeans.org/kb/docs/java/debug-multithreaded.html](http://netbeans.org/kb/docs/java/debug-multithreaded.html)

为此，我经常使用 Eclipse。调试器视图具有可视化和跟踪多个线程、打印堆栈和暂停它们的方法。

# http - 在 Windows Metro 中访问本地网络上的 url

> ID：11769325
> 
> 赞同：0
> 
> 时间：2012-08-02T00:09:38.130
> 
> 标签：http, networking, microsoft-metro

我在同一网络上的路由器后面有两台计算机。在计算机 A 上，我通过 HTTP 提供网页。在计算机 B 上，我正在运行 Windows 8。

在 Internet Explorer 8 桌面模式下，我可以输入计算机 A 的 IP 地址并查看页面。但是，在地铁模式下，它会显示“无法显示此页面”。

我正在尝试使用本地服务器测试 Metro 应用程序。但是，任何尝试从 Metro 应用程序中的计算机 B 与计算机 A 进行通信的尝试都会失败。我所有的同事都遇到了同样的问题。不仅仅是 IP 地址——甚至我们的 VPN 上的域名也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:35:53.913

我也有这个问题；原来它被功能限制阻止了。

在您的应用清单中，选中“私有网络（客户端和服务器）”框（或在 XML.xml 中添加“privateNetworkClientServer”功能。

# pdf - PDF 间接对象，CFF 资源

> ID：11769329
> 
> 赞同：1
> 
> 时间：2012-08-02T00:10:01.093
> 
> 标签：pdf, unicode, fonts

我正在使用 OpenType Minion Pro 字体（以下简称“字体”）。我正在制作原始 PDF 文件。我想将原始 PostScript 语法与来自各种语言的字母（如音译）一起使用：

![在此处输入图像描述](../Images/082290e07284b6703754bfd95ba5696a.png)

例如，英文文本将是：

```
BT /F1.5 11 Tf (ABCDE... abcde...) Tj ET 
```

俄文：

```
BT /F1.6 11 Tf (ABVGD... abvgd...) Tj ET 
```

小数字：

```
BT /F1.1 11 Tf (1234567890) Tj ET 
```

等等

问题：是否可以在 PDF 文件中添加**具有完整字体和尽可能多的语言组、索引表的单个对象**？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:56:37.477

这是工作！有可能的！从字体和多个字体描述符导入的单个 CFF 流对象。Minion Regular 整个 CFF 表的压缩大小为 106KB。还不错。

# wpf - 尝试将窗口的宽度和高度设置为自动

> ID：11769330
> 
> 赞同：1
> 
> 时间：2012-08-02T00:10:24.917
> 
> 标签：wpf, xaml, height, width

我正在尝试将窗口的宽度和高度设置为自动，这意味着它将结合其所有子控件的宽度和高度：

我的代码：

```
<Window x:Class="Read_360.ToastPopup"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="ToastPopup" Width="Auto" Height="68">
<Window.Resources>
    <ControlTemplate x:Key="MyErrorMessage"
                     TargetType="{x:Type Label}">
        <StackPanel Orientation="Horizontal"
                    Name="ErrorMessage" Width="Auto" Height="Auto">
            <Border CornerRadius="4" Width="Auto"
                    BorderThickness="0"
                    VerticalAlignment="Center"
                    Margin="4,0"
                    Background="#FF404040"
                    BorderBrush="Transparent">
                <Label Foreground="White"
                       VerticalAlignment="Center"
                       Padding="4,2"
                       Margin="4"
                       FontWeight="Bold" FontSize="15"
                       Name="Part1" Width="Auto" Height="Auto"
                       Visibility="Visible" HorizontalAlignment="Center" Content="{Binding Message}" />
            </Border>
        </StackPanel>
    </ControlTemplate>
</Window.Resources>
<StackPanel Orientation="Vertical">
    <Label Template="{StaticResource MyErrorMessage}" Name="Label1" Width="Auto" Height="Auto"></Label>
</StackPanel> 
```

我需要宽度和高度与 ControlTemplate 内的标签相同

先谢谢了，

丁。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T02:26:34.657

您应该能够将窗口上的[SizeToContent](http://msdn.microsoft.com/en-us/library/system.windows.window.sizetocontent.aspx)属性设置为[WidthAndHeight](http://msdn.microsoft.com/en-us/library/system.windows.sizetocontent.aspx)以实现此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:29:51.423

尝试设置属性

```
SizeToContent="WidthAndHeight" 
```

但为什么高度没有设置为自动？

# php - 如何将变量传递给php中的isset函数？

> ID：11769336
> 
> 赞同：1
> 
> 时间：2012-08-02T00:10:50.220
> 
> 标签：php, html

我正在尝试将`$user_id`变量从文件返回到`if(isset(...))`语句。我将执行不同的 if 语句，但只是尝试`echo`输出`$user_id`变量来测试我正在设置页面。

```
<?php 
include 'core/init.php';
include 'init.image.php';
protect_page();
include 'includes/overall/overall_header.php';

if(isset($_GET['username']) === true && empty($_GET['username']) === false){
$username       = $_GET['username'];

if(user_exists($username) === true){
$user_id        = user_id_from_username($username);
$profile_data   = user_data($user_id, 'first_name','last_name','email', 'username');
?>

    <h1><?php echo $profile_data['first_name']; ?>'s Yor Page</h1>

<div id="navWrapper">
    <ul>
        <li>
            <a href="#"><img src="uploads/profile/blank_profile.gif" width="150" height="150" id="blank_profile"></a>
        </li>

        <nav>
            <ul>
                <li>
                    <a href="<?php echo $profile_data['username'];?>?action=albums">Albums</a>
                </li>
                <li>
                    <a href="<?php echo $profile_data['username'];?>?action=music">Music</a>
                </li>
            </ul>
        </nav>
    </ul>
</div>

<?php
if(isset($_GET['action']) && $_GET['action']=='albums'){

$albums = get_profile_albums($user_id);

if(empty($albums)){
echo 'No Albums';
}else{

foreach($albums as $album){
if (empty($album['image'])) {
    $album['image'] = 'uploads/profile/blank_profile.gif';
}
?>
 <p><?php echo $album['name'],' (', $album['count'], ')'?> <br />
  <a href="<?php echo $profile_data['username'];?>?action=album_id=<?php echo $album['id'];?>">
    <img src="uploads/thumbs/<?php echo $album['id'];?>/<?php echo $album['image'];?>" />
  </a><br />
  <?php echo $album['description'];?>...<br />
</p>
<?php
}
}

}
if(isset($_GET['action']) && $_GET['action']=='album_id=$album['id']'){
echo $user_id;
}

if(isset($_GET['action']) && $_GET['action']=='music'){
echo'<h1>Music</h1>';
}

}else{
    echo 'Sorry, that user doesn\'t exist';
}
}else{
header('Location: index.php');
exit();
}

include 'includes/overall/overall_footer.php';
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:35:22.087

单引号不解析字符串，但双引号可以。例如：

```
$album_id = 1;
echo 'album_id=$album_id ';
echo "album_id=$album_id"; 
```

会导致`album_id=$album_id album_id=1`

因此，`$_GET['action']=='album_id=$album_id'`检查是否`$_GET['action']`等于`'album_id=$album_id'`而不是`$album_id`评估的内容。

您的支票应该更多地遵循以下原则：

```
if (/* ... */ && $_GET['action']=="album_id=$album_id") { 
```

**编辑**：建议。

您应该检查`$_GET['action']` **一次**并存储`$action`。从那里创建一个`if/else if/else`语句，检查每种可能的操作类型（音乐、专辑、**专辑**等）。如果某种类型的操作需要额外的用户提供的数据，请将其包含在相应的 if 块中。例如：

```
 $action = $_GET['action'];
 // URL: /script.php?action=albums
 if ($action == 'albums') {
     // ...
 }
 // URL: /script.php?action=album&album_id=12
 else if ($action == 'album') {
     if (!empty($_GET['album_id'])) {
          $album_id = $_GET['album_id'];
          echo "User with id $user_id is trying to access album with id $album_id";
     }
     // ...
 }
 // ... 
```

不再`$_GET['action']=="album_id=$album_id"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:16:45.597

您正在正确传递变量。

在以下行中我更关心的是：

```
if(isset($_GET['action']) && $_GET['action']=='album_id=$album_id'){ 
```

`'album_id=$album_id'`看起来不正确，这可能是您的 if 没有触发的原因...看起来您正在尝试使用`$album_id`用单引号括起来的变量，并且不会替换该值，而是保持`$album_id`原样。我不确定这是否是您的意图，但如果不是，则可能是您的问题的根源。

# c# - VS Express C#，显示要在类中使用或在构造函数中调用的构造函数？

> ID：11769344
> 
> 赞同：0
> 
> 时间：2012-08-02T00:11:40.030
> 
> 标签：c#, visual-studio-2010, class, constructor, intellisense

在 Visual Studio Express C# 上，有没有办法显示可以在给定类中使用或应该在给定构造函数中调用的特定构造函数？

我正在使用其他人的 SDK，因此无法猜测要使用什么。

在一个类中，我可以键入`public`然后键入一个特定的字母以从 Intellisense 中获取一些线索，但我如何才能查看特定类的所有可用构造函数？

在构造函数中，智能感知并没有给我我可以调用的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:40:39.053

您可以在对象浏览器中查看该类，或者右键单击基类并选择转到定义以拉出一个元数据文件，该文件列出了所有类成员，包括构造函数。

# ios - iOS 5.1 模拟器 Twitter 登录问题

> ID：11769347
> 
> 赞同：9
> 
> 时间：2012-08-02T00:11:59.543
> 
> 标签：ios, xcode, ios5, ios-simulator, xcode4.4

我开始开发一些与 Twitter 集成的应用程序，但是在尝试登录 Twitter 时……会发生这种情况

[http://i.stack.imgur.com/Agdn5.png](https://i.stack.imgur.com/Agdn5.png)

每次，我都尝试了一些不同的帐户。我在 Macbook 2011、OS X 10.8 (Mountain Lion)、Xcode 4.4 (4F250)、iOS Simulator 5.1 (272.21)

我会对任何想法感到高兴，因为在研究之后，没有找到任何东西:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T18:18:51.360

这是山狮和/或 Xcode 4.4 问题/错误！

在这里阅读[https://devforums.apple.com/message/705937#705937](https://devforums.apple.com/message/705937#705937) 在这里 阅读[https://dev.twitter.com/discussions/4850](https://dev.twitter.com/discussions/4850)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T20:30:22.633

这是在 Mac OS X v10.8 (Mountain Lion) 中发生的已知错误。

可能是因为 Mountain Lion 有本机`Social.framework`和开发工具，我假设正在使用这些，因此`Twitter.framework`没有被使用，所以当您尝试在 iOS 5.x 上使用模拟器登录 Twitter 时，它无法使用`Social.framework`并且系统没有`Twitter.framework`正确使用作为后备。

无论如何，这是官方的说法：

> 在 OS X v10.8 (Mountain Lion) 上使用 iOS 6.1 SDK 时，如果您在 iOS Simulator 中使用 iOS 5.0 或 iOS 5.1 “Legacy SDK”，您将无法通过设置面板登录 Twitter，并且Twitter.framework 将无法正常工作。如果您需要测试 Twitter 功能，您将需要选择 iOS 6.1 或 iOS 6.0 模拟器运行目标，或者在设备上使用 iOS 5.x 进行测试。在 OS X v10.7 (Lion) 上运行 Simulator 时不会出现这些问题。

资料来源：[Apple 文档](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_1/index.html#//apple_ref/doc/uid/TP40012869)（社交部分）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:31:49.427

很可能是某个地方的服务器出现问题，但唯一的其他解释是模拟器有问题。我想我能给你的最好建议是尝试在模拟器中重置内容和设置，重新启动你的 Mac，如果这没有帮助，你可能需要重新安装 Xcode。

# c# - 有没有办法检查打印过程是否成功？

> ID：11769351
> 
> 赞同：14
> 
> 时间：2012-08-02T00:12:27.957
> 
> 标签：c#, winforms, printing, system.printing

我有一个需要打印票的应用程序。每张票必须是唯一的。该应用程序是 Windows 窗体，完全用 C# 编写。对于我们的应用，我们使用的是三星 ML-2525 激光单色打印机。

流程基本上如下，操作员选择一个产品/票（这是唯一的），然后按下一个按钮来做两件事：

1.  连接到数据库并根据使用情况更新产品
2.  打印票证（使用 System.Drawing 和 GDI+ 完成）

由于某种原因，每隔一段时间，需要打印的图像不会发送到打印机。这是一个罕见的情况，但它发生了。

我尝试使用 Win32_Printer ( [http://msdn.microsoft.com/en-us/library/Aa394363](http://msdn.microsoft.com/en-us/library/Aa394363) ) 连接到打印机，但无法获取当前打印机的状态（在线、离线、碳粉不足、卡纸， ETC）。我只能检查打印机是否存在以及是否正确安装了纸张尺寸。我尝试了类似于以下的代码，但没有成功

```
 private string MonitorPrintJobWmi()
    {
        var jobMessage = String.Empty;
        var scope = new ManagementScope(ManagementPath.DefaultPath);
        scope.Connect();

        var selectQuery = new SelectQuery { QueryString = @"select *  from Win32_PrintJob" };

        var objSearcher = new ManagementObjectSearcher(scope, selectQuery);
        var objCollection = objSearcher.Get();

        foreach (var job in objCollection)
        {
            if (job != null)
            {
                jobMessage += String.Format("{0} \r\n", job["Name"].ToString());
                jobMessage += String.Format("{0} \r\n", job["JobId"].ToString());
                _jobId = Convert.ToInt32(job["JobId"]);
                jobMessage += String.Format("{0} \r\n", job["JobStatus"].ToString());
                jobMessage += String.Format("{0} \r\n", job["Status"].ToString());
            }
        }
        return jobMessage;
    } 
```

我试图获取打印机的 API，但我无法掌握它。顺便说一句，打印机的软件确实会在 Windows 工具栏中显示不同的错误。

我的问题是，是否有人可以引导我了解如何连接打印机并检查打印是否成功。

另外，如果有人知道我可以在其中完成此操作的其他特定打印机（即更改硬件），那将很有帮助。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T16:13:08.787

要获取本地机器上的打印队列列表，请尝试 PrintServer 的[GetPrintQueues](http://msdn.microsoft.com/en-us/library/ms552937%28v=vs.90%29.aspx)方法。

一旦有了与相关打印机关联的[PrintQueue](http://msdn.microsoft.com/en-us/library/system.printing.printqueue)对象的实例，就可以使用它来访问打印机的状态（IsOffline、IsPaperOut 等）。此外，您可以使用它来获取给定队列 ( [GetPrintJobInfoCollection](http://msdn.microsoft.com/en-us/library/system.printing.printqueue.getprintjobinfocollection%28v=vs.90%29) ) 中的作业列表，然后您可以获取特定于作业的状态信息（IsInError、IsCompleted、IsBlocked 等）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T23:15:13.830

尝试打印您的 PrintDocument (System.Drawing.Printing) 后，尝试检查打印作业的状态。

第一步：初始化你的 printDocument。

第二步：获取您的打印机名称`System.Drawing.Printing.PrinterSettings.InstalledPrinters.Cast<string>();`

并将其复制到您的打印机Document.PrinterSettings.PrinterName

第三步：尝试打印和处理。

```
printerDocument.Print();
printerDocument.Dispose(); 
```

最后一步：在任务中运行检查（不要阻塞 UI 线程）。

```
 Task.Run(()=>{
     if (!IsPrinterOk(printerDocument.PrinterSettings.PrinterName,checkTimeInMillisec))
     {
        // failed printing, do something...
     }
    }); 
```

这是实现：

```
 private bool IsPrinterOk(string name,int checkTimeInMillisec)
    {
        System.Collections.IList value = null;
        do
        {
            //checkTimeInMillisec should be between 2000 and 5000
            System.Threading.Thread.Sleep(checkTimeInMillisec);
            // or use Timer with Threading.Monitor instead of thread sleep

            using (System.Management.ManagementObjectSearcher searcher = new System.Management.ManagementObjectSearcher("SELECT * FROM Win32_PrintJob WHERE Name like '%" + name + "%'"))
            {
                value = null;

                if (searcher.Get().Count == 0) // Number of pending document.
                    return true; // return because we haven't got any pending document.
                else
                {
                    foreach (System.Management.ManagementObject printer in searcher.Get())
                    {
                        value = printer.Properties.Cast<System.Management.PropertyData>().Where(p => p.Name.Equals("Status")).Select(p => p.Value).ToList();
                        break; 
                    }
                }
            }
       }
       while (value.Contains("Printing") || value.Contains("UNKNOWN") || value.Contains("OK"));

       return value.Contains("Error") ? false : true;    
    } 
```

祝你好运。

# eclipse - 为初学者处理不同版本的代码？

> ID：11769354
> 
> 赞同：2
> 
> 时间：2012-08-02T00:12:35.603
> 
> 标签：eclipse, version-control

虽然我编写了一些（java）代码，但我觉得需要经常试验和更改其中的某些部分。我希望这些更改出现在我现有项目的副本中，而不是原始项目中 - 例如“另存为”与“保存”。

我有一些选择来完成这项工作（下）。问题是我无法决定选择哪一个。作为版本控制的初学者，我想要一些非常简单但也被许多软件公司使用的东西。我已经遇到了很多编译器和运行时错误的问题。我希望版本控制软件不会使编码过程变得更加困难。

选项-

```
1- Make copies of my code and label them with different numbers/dates.
2- Use SVN ?
3- Use GIT ? 
```

除此之外，还有其他版本控制方法吗？

编辑-

是否可以在 eclipse 本身内部执行 SVN，或者将 eclipse 与一些 SVN 软件集成？如果是，这将是一个好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:32:26.110

我目前将 SVN 用于个人项目，将 Git 用于小组项目。Git 处理分支的方式非常巧妙。SVN 非常易于设置和使用（您只需要一个 URL，而不是客户端的 ssh 登录）。

如果您使用的是 Windows，我建议您使用 TortoiseSVN 和 TortoiseGit。

[https://tortoisegit.org/](https://tortoisegit.org/)

[http://tortoisesvn.net/](http://tortoisesvn.net/)

我还建议不要选择第一个选项。修订控制非常重要，即使您只是一个业余爱好者。

# ios - iOS 上 OpenGL ES 2.0 中每个程序的纹理单元的说明

> ID：11769360
> 
> 赞同：1
> 
> 时间：2012-08-02T00:13:14.397
> 
> 标签：ios, opengl-es

根据 Apple 的 OpenGL ES 2.0 限制文档： [“您可以在片段着色器中使用多达 8 个纹理。”](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html)

这似乎不是特别具体，所以我假设它的意思是，“你可以为片段着色器的每个通道引用最多 8 个纹理单元。”

所以我一直在做的是在我的片段着色器的给定通道中，我只引用一个纹理单元，从纹理单元 0 开始。下一个通道，我引用单元 1。下一个通道，单元 2，依此类推. 根据我的上述假设，这应该可以正常工作`GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS.`

然而，它似乎只工作到第 7 单元，并且在任何 >= 单元 8 处中断。

听起来这会导致我达到最大纹理单位吗？还是我错过了什么？

如果我确实达到了片段着色器中允许的纹理单元的上限，我想我要做的是保存一个可变的程序数组，并在运行时构建我需要多少个我定义的纹理的程序，并且当我达到 8 倍数的纹理单元索引的步骤时，切换到适当的程序。

这听起来合理吗，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:00:34.413

您可以通过以下方式查询设备上的最大纹理单元数：

```
+ (GLint)maximumTextureUnitsForThisDevice;
{
    GLint maxTextureUnits; 
    glGetIntegerv(GL_MAX_TEXTURE_IMAGE_UNITS, &maxTextureUnits);
    return maxTextureUnits;
} 
```

在我拥有的最强大的设备 Retina iPad 上运行它，我最多可以获得 8 个纹理单元。这意味着您将无法将纹理绑定到上述任何内容`GL_TEXTURE7`，并将您可以输入着色器的同时纹理数量限制为 8 个。

然而，正如 Tim 在他的评论中所建议的那样，如果您一次只需要访问一个纹理，那么没有什么能阻止您将每个纹理顺序绑定到单个单元，对其进行处理，然后将下一个纹理绑定到同一个单元。

# javascript - Jquery - 动态地将参数传递给函数

> ID：11769361
> 
> 赞同：1
> 
> 时间：2012-08-02T00:13:14.413
> 
> 标签：javascript, jquery, function, parameters, parameter-passing

我什至不确定我是否以正确的方式询问或解决这个问题，但如果我只是展示它可能会更容易。基本上，我试图通过 a运行`attr`每个`div`a并让它根据该 div 的属性返回不同的结果。 `parameter``function`

如您所见，该示例是一组下拉菜单，当您单击容器 div 中的链接时会出现这些下拉菜单。如果您进行选择，它会将其保存为父 div 中的属性。当您单击退出然后返回容器时会出现问题......而不是使用适当的默认值或选择显示重新显示每个下拉列表，它只是反映它`a`旁边的结果。

[http://jsfiddle.net/nosfan1019/b7F6x/5/](http://jsfiddle.net/nosfan1019/b7F6x/5/)

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:58:33.703

我插入了一些`console.log()`语句来查看您的各种 jQuery 选择器发生了什么。我观察到以下几点：

*   当我点击第一个“click”节点时， `_container`是“top one”
*   因此，在您对三个 div 的迭代中，您选择了两个 div 的类 'dd' 包含在类 'top one' 的 div 中
*   对于处理的每个节点，参数`_attr`和`_parent`传递给函数的参数`select()`都是相同的，从而为两个“dd”框提供相同的结果。

我认为您想更改用于定位要修改的节点的选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:48:51.240

`foo = foo.find('.dropdown-toggle').html(_new + '<b class="caret"></b>');`

使用这一行，您将获得两个 div，因此您更改了两个值（如果该值是从下拉列表中选择的）。

要正确恢复选定的值：

```
function modified(_select) {
    console.log("modify");
    foo = $('#box').html();
    foo = $(_select).html(foo);
    // iterate on collection to restore selected value from selection tag;
    foo.filter("div[selection]").each(function(i, v){
        var selected = $(v).attr('selection');
        $(v).find('.dropdown-toggle').html(selected + '<b class="caret"></b>');                
    });                
} 
```

然后，需要检查是否有任何 parentDiv 具有 [selection] attr：

```
if($(y).filter("div[selection]").length > 0){
    return modified(y);
} 
```

[http://jsfiddle.net/b7F6x/50/](http://jsfiddle.net/b7F6x/50/)

# powershell - 我的程序在 IDLE 和 PyScripter 中运行良好，但在 PowerShell 和命令行中运行良好

> ID：11769364
> 
> 赞同：2
> 
> 时间：2012-08-02T00:13:51.407
> 
> 标签：powershell, python-3.x, python-idle

这似乎是一个非常基本的问题，但我无法在任何地方找到解决方案，所以这里是：

我正在编写一个小程序，主要用于练习，它会根据我的输入做不同的事情，如下所示：

```
while True:
    switch = input('a, b or c:')

    if switch == "a":
        print("In command line and Powershell...")
    elif switch == "b":
        print("...these lines will never run.")
    elif switch == "c":
        print("Neither will this one, no matter what my input(switch) is.")
    else:
         print("meh...")
                 break 
```

如果我在 IDLE 或 PyScripter 解释器中运行我的代码，它可以正常工作，但是当我在命令行或 PowerShell 中运行它时，无论我的输入是什么，每次都会执行“else”行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:28:01.253

我不知道为什么你最后会得到一个回车，也许你是在 Windows 上运行它。在 Unix 上它运行良好。解决方法是确保删除任何空格：

```
switch = input('a, b or c:').strip() 
```

那应该可以解决您的问题。

# django - django-haystack 给出错误 Unable to open index at search/xapian/xapian_index

> ID：11769365
> 
> 赞同：0
> 
> 时间：2012-08-02T00:13:55.707
> 
> 标签：django, django-haystack, xapian

我正在尝试使用带有 xapian 后端的 django-haystack 在我的 django 站点上设置搜索功能。我按照以下说明进行操作：http: [//django-haystack.readthedocs.org/en/latest/tutorial.html](http://django-haystack.readthedocs.org/en/latest/tutorial.html)

当我输入搜索时，它会引发错误：无法在搜索/xapian/xapian_index 处打开索引

运行 ./manage.py rebuild_index 的时候好像没有创建搜索索引，但是当时没有报错。

我试图在 myapp/models.py 中索引以下模型：

```
class MyMsg (models.Model):
    msg = models.TextField(max_length=2000)
    pub_date = models.DateTimeField('date published')
    author = models.ForeignKey(User)
    def __unicode__(self):
        return self.msg 
```

我在 myapp/search_index.py 中有以下搜索索引：

```
class MyMsgIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    author = indexes.CharField(model_attr='author')
    pub_date = indexes.DateTimeField(model_attr='pub_date')

    def get_model(self):
        return MyMsg

    def index_queryset(self):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.filter(pub_date__lte=datetime.datetime.now()) 
```

我正在使用： haystack 1.2.4 xapian 1.2.12 mac OS X 10.6.8

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T00:21:56.057

您说您使用的是 Haystack 1.2.4，但您链接到了新的 2.x beta 文档。在早期版本的 Haystack 中，您需要添加“自动发现”步骤。

它涉及在`settings.py`调用`HAYSTACK_SITECONF`中创建一个指向 haystack 配置模块的变量。在该模块中，您至少需要具有以下几行：

```
import haystack
haystack.autodiscover() 
```

请参阅您的版本的教程：http: [//django-haystack.readthedocs.org/en/v1.2.4/tutorial.html](http://django-haystack.readthedocs.org/en/v1.2.4/tutorial.html)

这可能是问题吗？

# python - 为什么使用 sqlite 插入 SQLAlchemy 比直接使用 sqlite3 慢 25 倍？

> ID：11769366
> 
> 赞同：85
> 
> 时间：2012-08-02T00:14:06.773
> 
> 标签：python, orm, sqlite, sqlalchemy

为什么这个简单的测试用例使用 SQLAlchemy 插入 100,000 行比直接使用 sqlite3 驱动程序慢 25 倍？我在现实世界的应用程序中看到了类似的减速。难道我做错了什么？

```
#!/usr/bin/env python
# Why is SQLAlchemy with SQLite so slow?
# Output from this program:
# SqlAlchemy: Total time for 100000 records 10.74 secs
# sqlite3:    Total time for 100000 records  0.40 secs

import time
import sqlite3

from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, String,  create_engine 
from sqlalchemy.orm import scoped_session, sessionmaker

Base = declarative_base()
DBSession = scoped_session(sessionmaker())

class Customer(Base):
    __tablename__ = "customer"
    id = Column(Integer, primary_key=True)
    name = Column(String(255))

def init_sqlalchemy(dbname = 'sqlite:///sqlalchemy.db'):
    engine  = create_engine(dbname, echo=False)
    DBSession.configure(bind=engine, autoflush=False, expire_on_commit=False)
    Base.metadata.drop_all(engine)
    Base.metadata.create_all(engine)

def test_sqlalchemy(n=100000):
    init_sqlalchemy()
    t0 = time.time()
    for i in range(n):
        customer = Customer()
        customer.name = 'NAME ' + str(i)
        DBSession.add(customer)
    DBSession.commit()
    print "SqlAlchemy: Total time for " + str(n) + " records " + str(time.time() - t0) + " secs"

def init_sqlite3(dbname):
    conn = sqlite3.connect(dbname)
    c = conn.cursor()
    c.execute("DROP TABLE IF EXISTS customer")
    c.execute("CREATE TABLE customer (id INTEGER NOT NULL, name VARCHAR(255), PRIMARY KEY(id))")
    conn.commit()
    return conn

def test_sqlite3(n=100000, dbname = 'sqlite3.db'):
    conn = init_sqlite3(dbname)
    c = conn.cursor()
    t0 = time.time()
    for i in range(n):
        row = ('NAME ' + str(i),)
        c.execute("INSERT INTO customer (name) VALUES (?)", row)
    conn.commit()
    print "sqlite3: Total time for " + str(n) + " records " + str(time.time() - t0) + " sec"

if __name__ == '__main__':
    test_sqlalchemy(100000)
    test_sqlite3(100000) 
```

我尝试了许多变体（请参阅[http://pastebin.com/zCmzDraU](http://pastebin.com/zCmzDraU)）

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-08-02T01:17:27.380

SQLAlchemy ORM在同步对数据库的更改时使用[工作单元模式。](http://martinfowler.com/eaaCatalog/unitOfWork.html)这种模式远远超出了简单的数据“插入”。它包括使用属性检测系统接收分配给对象的属性，该系统跟踪对象所做的更改，包括在[身份映射中跟踪插入的所有行](http://martinfowler.com/eaaCatalog/identityMap.html)其效果是，对于每一行 SQLAlchemy 必须检索其“最后插入的 id”（如果尚未给出），并且还涉及根据需要对要插入的行进行扫描和排序以查找依赖项。对象还需要进行相当程度的簿记，以保持所有这些运行，对于大量行来说，一次会产生大量的时间花费在大型数据结构上，因此最好将它们分块。

基本上，工作单元是高度自动化的，目的是自动化将复杂对象图持久化到关系数据库中的任务，而无需显式持久化代码，这种自动化是有代价的。

所以 ORM 基本上不适合高性能批量插入。这就是为什么 SQLAlchemy 有*两个*独立的库的全部原因，如果你查看[http://docs.sqlalchemy.org/en/latest/index.html](http://docs.sqlalchemy.org/en/latest/index.html)你会注意到索引页面有两个不同的部分 -一个用于 ORM，一个用于核心。如果不了解两者，就无法有效地使用 SQLAlchemy。

对于快速批量插入的用例，SQLAlchemy 提供了[核心](http://docs.sqlalchemy.org/en/latest/core/tutorial.html)，即 ORM 在其之上构建的 SQL 生成和执行系统。有效地使用这个系统，我们可以生成一个与原始 SQLite 版本竞争的 INSERT。下面的脚本说明了这一点，以及一个预先分配主键标识符的 ORM 版本，以便 ORM 可以使用 executemany() 插入行。两个 ORM 版本都一次将刷新分块为 1000 条记录，这会对性能产生重大影响。

这里观察到的运行时是：

```
SqlAlchemy ORM: Total time for 100000 records 16.4133379459 secs
SqlAlchemy ORM pk given: Total time for 100000 records 9.77570986748 secs
SqlAlchemy Core: Total time for 100000 records 0.568737983704 secs
sqlite3: Total time for 100000 records 0.595796823502 sec 
```

脚本：

```
import time
import sqlite3

from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, String,  create_engine
from sqlalchemy.orm import scoped_session, sessionmaker

Base = declarative_base()
DBSession = scoped_session(sessionmaker())

class Customer(Base):
    __tablename__ = "customer"
    id = Column(Integer, primary_key=True)
    name = Column(String(255))

def init_sqlalchemy(dbname = 'sqlite:///sqlalchemy.db'):
    global engine
    engine = create_engine(dbname, echo=False)
    DBSession.remove()
    DBSession.configure(bind=engine, autoflush=False, expire_on_commit=False)
    Base.metadata.drop_all(engine)
    Base.metadata.create_all(engine)

def test_sqlalchemy_orm(n=100000):
    init_sqlalchemy()
    t0 = time.time()
    for i in range(n):
        customer = Customer()
        customer.name = 'NAME ' + str(i)
        DBSession.add(customer)
        if i % 1000 == 0:
            DBSession.flush()
    DBSession.commit()
    print "SqlAlchemy ORM: Total time for " + str(n) + " records " + str(time.time() - t0) + " secs"

def test_sqlalchemy_orm_pk_given(n=100000):
    init_sqlalchemy()
    t0 = time.time()
    for i in range(n):
        customer = Customer(id=i+1, name="NAME " + str(i))
        DBSession.add(customer)
        if i % 1000 == 0:
            DBSession.flush()
    DBSession.commit()
    print "SqlAlchemy ORM pk given: Total time for " + str(n) + " records " + str(time.time() - t0) + " secs"

def test_sqlalchemy_core(n=100000):
    init_sqlalchemy()
    t0 = time.time()
    engine.execute(
        Customer.__table__.insert(),
        [{"name":'NAME ' + str(i)} for i in range(n)]
    )
    print "SqlAlchemy Core: Total time for " + str(n) + " records " + str(time.time() - t0) + " secs"

def init_sqlite3(dbname):
    conn = sqlite3.connect(dbname)
    c = conn.cursor()
    c.execute("DROP TABLE IF EXISTS customer")
    c.execute("CREATE TABLE customer (id INTEGER NOT NULL, name VARCHAR(255), PRIMARY KEY(id))")
    conn.commit()
    return conn

def test_sqlite3(n=100000, dbname = 'sqlite3.db'):
    conn = init_sqlite3(dbname)
    c = conn.cursor()
    t0 = time.time()
    for i in range(n):
        row = ('NAME ' + str(i),)
        c.execute("INSERT INTO customer (name) VALUES (?)", row)
    conn.commit()
    print "sqlite3: Total time for " + str(n) + " records " + str(time.time() - t0) + " sec"

if __name__ == '__main__':
    test_sqlalchemy_orm(100000)
    test_sqlalchemy_orm_pk_given(100000)
    test_sqlalchemy_core(100000)
    test_sqlite3(100000) 
```

另见： [http ://docs.sqlalchemy.org/en/latest/faq/performance.html](http://docs.sqlalchemy.org/en/latest/faq/performance.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-23T12:33:13.573

@zzzeek 的出色回答。对于那些想知道查询的相同统计信息的人，我稍微修改了@zzzeek 代码以在插入它们后立即查询这些相同的记录，然后将这些记录转换为字典列表。

这是结果

```
SqlAlchemy ORM: Total time for 100000 records 11.9210000038 secs
SqlAlchemy ORM query: Total time for 100000 records 2.94099998474 secs
SqlAlchemy ORM pk given: Total time for 100000 records 7.51800012589 secs
SqlAlchemy ORM pk given query: Total time for 100000 records 3.07699990273 secs
SqlAlchemy Core: Total time for 100000 records 0.431999921799 secs
SqlAlchemy Core query: Total time for 100000 records 0.389000177383 secs
sqlite3: Total time for 100000 records 0.459000110626 sec
sqlite3 query: Total time for 100000 records 0.103999853134 secs 
```

有趣的是，使用裸 sqlite3 进行查询仍然比使用 SQLAlchemy Core 快 3 倍。[我想这就是你为返回一个ResultProxy](http://docs.sqlalchemy.org/en/rel_0_7/core/connections.html#sqlalchemy.engine.base.ResultProxy)而不是一个裸的 sqlite3 行而付出的代价。

SQLAlchemy Core 比使用 ORM 快大约 8 倍。所以无论如何使用 ORM 查询都会慢很多。

这是我使用的代码：

```
import time
import sqlite3

from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, String,  create_engine
from sqlalchemy.orm import scoped_session, sessionmaker
from sqlalchemy.sql import select

Base = declarative_base()
DBSession = scoped_session(sessionmaker())

class Customer(Base):
    __tablename__ = "customer"
    id = Column(Integer, primary_key=True)
    name = Column(String(255))

def init_sqlalchemy(dbname = 'sqlite:///sqlalchemy.db'):
    global engine
    engine = create_engine(dbname, echo=False)
    DBSession.remove()
    DBSession.configure(bind=engine, autoflush=False, expire_on_commit=False)
    Base.metadata.drop_all(engine)
    Base.metadata.create_all(engine)

def test_sqlalchemy_orm(n=100000):
    init_sqlalchemy()
    t0 = time.time()
    for i in range(n):
        customer = Customer()
        customer.name = 'NAME ' + str(i)
        DBSession.add(customer)
        if i % 1000 == 0:
            DBSession.flush()
    DBSession.commit()
    print "SqlAlchemy ORM: Total time for " + str(n) + " records " + str(time.time() - t0) + " secs"
    t0 = time.time()
    q = DBSession.query(Customer)
    dict = [{'id':r.id, 'name':r.name} for r in q]
    print "SqlAlchemy ORM query: Total time for " + str(len(dict)) + " records " + str(time.time() - t0) + " secs"

def test_sqlalchemy_orm_pk_given(n=100000):
    init_sqlalchemy()
    t0 = time.time()
    for i in range(n):
        customer = Customer(id=i+1, name="NAME " + str(i))
        DBSession.add(customer)
        if i % 1000 == 0:
            DBSession.flush()
    DBSession.commit()
    print "SqlAlchemy ORM pk given: Total time for " + str(n) + " records " + str(time.time() - t0) + " secs"
    t0 = time.time()
    q = DBSession.query(Customer)
    dict = [{'id':r.id, 'name':r.name} for r in q]
    print "SqlAlchemy ORM pk given query: Total time for " + str(len(dict)) + " records " + str(time.time() - t0) + " secs"

def test_sqlalchemy_core(n=100000):
    init_sqlalchemy()
    t0 = time.time()
    engine.execute(
        Customer.__table__.insert(),
        [{"name":'NAME ' + str(i)} for i in range(n)]
    )
    print "SqlAlchemy Core: Total time for " + str(n) + " records " + str(time.time() - t0) + " secs"
    conn = engine.connect()
    t0 = time.time()
    sql = select([Customer.__table__])
    q = conn.execute(sql)
    dict = [{'id':r[0], 'name':r[0]} for r in q]
    print "SqlAlchemy Core query: Total time for " + str(len(dict)) + " records " + str(time.time() - t0) + " secs"

def init_sqlite3(dbname):
    conn = sqlite3.connect(dbname)
    c = conn.cursor()
    c.execute("DROP TABLE IF EXISTS customer")
    c.execute("CREATE TABLE customer (id INTEGER NOT NULL, name VARCHAR(255), PRIMARY KEY(id))")
    conn.commit()
    return conn

def test_sqlite3(n=100000, dbname = 'sqlite3.db'):
    conn = init_sqlite3(dbname)
    c = conn.cursor()
    t0 = time.time()
    for i in range(n):
        row = ('NAME ' + str(i),)
        c.execute("INSERT INTO customer (name) VALUES (?)", row)
    conn.commit()
    print "sqlite3: Total time for " + str(n) + " records " + str(time.time() - t0) + " sec"
    t0 = time.time()
    q = conn.execute("SELECT * FROM customer").fetchall()
    dict = [{'id':r[0], 'name':r[0]} for r in q]
    print "sqlite3 query: Total time for " + str(len(dict)) + " records " + str(time.time() - t0) + " secs"

if __name__ == '__main__':
    test_sqlalchemy_orm(100000)
    test_sqlalchemy_orm_pk_given(100000)
    test_sqlalchemy_core(100000)
    test_sqlite3(100000) 
```

我还测试了没有将查询结果转换为 dicts 并且统计信息相似：

```
SqlAlchemy ORM: Total time for 100000 records 11.9189999104 secs
SqlAlchemy ORM query: Total time for 100000 records 2.78500008583 secs
SqlAlchemy ORM pk given: Total time for 100000 records 7.67199993134 secs
SqlAlchemy ORM pk given query: Total time for 100000 records 2.94000005722 secs
SqlAlchemy Core: Total time for 100000 records 0.43700003624 secs
SqlAlchemy Core query: Total time for 100000 records 0.131000041962 secs
sqlite3: Total time for 100000 records 0.500999927521 sec
sqlite3 query: Total time for 100000 records 0.0859999656677 secs 
```

与 ORM 相比，使用 SQLAlchemy Core 查询大约快 20 倍。

**需要注意的是，这些测试非常肤浅，不应过于认真。我可能会遗漏一些可以完全改变统计数据的明显技巧。**

**衡量性能改进的最佳方法是直接在您自己的应用程序中。不要把我的统计数据视为理所当然。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T00:42:27.567

我会尝试[插入表达式](https://docs.sqlalchemy.org/en/latest/core/tutorial.html#insert-expressions)测试，然后进行基准测试。

由于 OR 映射器开销，它可能仍然会更慢，但我希望不会那么慢。

您介意尝试并发布结果吗？这是非常有趣的东西。

# java - RelativeLayout 无法转换为我的自定义列表视图

> ID：11769372
> 
> 赞同：0
> 
> 时间：2012-08-02T00:14:58.170
> 
> 标签：java, android, android-layout, android-widget

所以我正在编写一个自定义列表视图和适配器，以在列表视图中显示我自己的自定义项目行。我有一个功能列表视图，具有在选择模式之间切换的功能，并通过我的列表视图行 xml 文件中的自定义相对布局具有可检查的列表行项目。现在我正在尝试添加拖放功能，以使用 android v3.0 及更高版本的目标代码来处理列表视图项。我在这个网站上看到了这篇[文章](https://stackoverflow.com/questions/2909311/android-list-view-drag-and-drop-sort)，因为它很好地实现了拖放，现在我将它添加到我的项目中。 [Github 源码在这里](https://github.com/bauerca/drag-sort-listview)

当我编译我的项目时，我收到了我的帖子标题中所述的强制转换异常错误，并且我无法通过它。我无法确定它是我实现可检查的自定义相对布局，还是用于拖放的自定义列表视图等。这是我的日志输出

```
08-02 09:53:37.065: W/dalvikvm(16119): threadid=1: thread exiting with uncaught exception (group=0x40c6f1f8)
08-02 09:53:37.090: E/AndroidRuntime(16119): FATAL EXCEPTION: main
08-02 09:53:37.090: E/AndroidRuntime(16119): java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to au.drp.mylistview.draganddrop.DragSortListView
08-02 09:53:37.090: E/AndroidRuntime(16119):    at au.drp.mylistview.MyListViewAdapter.getView(MyListViewAdapter.java:62)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at au.drp.mylistview.draganddrop.DragSortListView$AdapterWrapper.getView(DragSortListView.java:270)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.AbsListView.obtainView(AbsListView.java:2424)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.ListView.makeAndAddView(ListView.java:1781)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.ListView.fillDown(ListView.java:679)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.ListView.fillFromTop(ListView.java:739)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.ListView.layoutChildren(ListView.java:1632)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at au.drp.mylistview.draganddrop.DragSortListView.layoutChildren(DragSortListView.java:961)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.AbsListView.onLayout(AbsListView.java:2254)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.View.layout(View.java:11467)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.View.layout(View.java:11467)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1644)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1502)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.View.layout(View.java:11467)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.View.layout(View.java:11467)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.ViewGroup.layout(ViewGroup.java:4237)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1721)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2678)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.os.Looper.loop(Looper.java:137)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at android.app.ActivityThread.main(ActivityThread.java:4514)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at java.lang.reflect.Method.invokeNative(Native Method)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at java.lang.reflect.Method.invoke(Method.java:511)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
08-02 09:53:37.090: E/AndroidRuntime(16119):    at dalvik.system.NativeStart.main(Native Method) 
```

但是我发现通过更改 DragSortListView 类中的错误部分，我可以更改结果，但仍然是相对布局类型和列表视图之间的转换异常错误。我讲的这一部分是DragSortListView类的如下getView代码。我尝试更改的是RelativeLayout 变量类型并转换为CheckableRelativelayout。

注意：我在代码“//DOES NOT LIKE THIS STATEMENT CODE”中的注释是错误行

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

  RelativeLayout v;
  View child;

  //Log.d("mobeta", "getView: position="+position+" convertView="+convertView);
  if (convertView != null) {

    v = (RelativeLayout) convertView;
    View oldChild = v.getChildAt(0);

    //child = super.getView(position, oldChild, v);
    child = mAdapter.getView(position, oldChild, v);
    if (child != oldChild) {
      // shouldn't get here if user is reusing convertViews properly
      v.removeViewAt(0);
      v.addView(child);
      // check that tags are equal too?
      v.setTag(child.findViewById(R.id.drag));
    }

  } else {
    AbsListView.LayoutParams params =
      new AbsListView.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    v = new RelativeLayout(getContext());
    v.setLayoutParams(params);
    child = mAdapter.getView(position, null, v);  //DOES NOT LIKE THIS STATEMENT CODE
    v.addView(child);

    v.setTag(child.findViewById(R.id.drag));
  } 
```

这是我的适配器类的getView

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // This is how you would determine if this particular item is checked
    // when the view gets created
    // --       
    final DragSortListView lv = (DragSortListView) parent;  // DOES NOT LIKE THIS STATEMENT CODE
    final boolean isChecked = lv.isItemChecked(position);

    // Get the listview Choice Mode
    //
    final int selectionMode = lv.getChoiceMode();

    // The item we want to get the view for
    // --
    Item currentItem = getItem(position);

    // Re-use the view if possible (recycle)
    // --
    ViewHolder holder = null;
    //final View mView = mInflator.inflate(R.layout.listview_row, null);
    if (convertView == null) {
        convertView = mInflator.inflate(R.layout.listview_row, null);
        holder = new ViewHolder();
        holder.txtTitle = (TextView) convertView.findViewById(R.id.title);
        holder.txtDescription = (TextView) convertView.findViewById(R.id.description);
        holder.txtSessionCount = (TextView) convertView.findViewById(R.id.session_count);
        holder.listThumbnailImage = (ImageView) convertView.findViewById(R.id.list_image);
        holder.listStatusIndicatorImage = (ImageView) convertView.findViewById(R.id.drag);
        holder.Checkbox = (InertCheckBox) convertView.findViewById(R.id.inertCheckBox);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder)convertView.getTag();
    }
    // End recycler
    //

    holder.txtTitle.setText(currentItem.getTitle());
    holder.txtDescription.setText(currentItem.getDescription());
    holder.txtSessionCount.setText(currentItem.getSessionCount());
    holder.listThumbnailImage.setImageBitmap((Bitmap) currentItem.getThumbnailImage());

    // Now the Status ImageView and/or the InertCheckBox view
    switch (selectionMode) {
    case ListView.CHOICE_MODE_NONE:
        holder.Checkbox.setVisibility(InertCheckBox.INVISIBLE);
        holder.listStatusIndicatorImage.setVisibility(ImageView.VISIBLE);

        holder.listStatusIndicatorImage.setAdjustViewBounds(true);
        holder.listStatusIndicatorImage.setMaxHeight(48);
        holder.listStatusIndicatorImage.setMaxWidth(48);
        if (!dndMode) {
            holder.listStatusIndicatorImage.setImageBitmap((Bitmap) currentItem.getListIndicatorImage());

        } else {
            holder.listStatusIndicatorImage.setImageResource(R.drawable.list_icon_reorder_holo_dark);
        }   
        holder.listStatusIndicatorImage.setScaleType(ScaleType.CENTER_INSIDE);
        break;
    case ListView.CHOICE_MODE_SINGLE: case ListView.CHOICE_MODE_MULTIPLE:
        MyListViewAdapter.dndMode = false;
        holder.listStatusIndicatorImage.setVisibility(ImageView.INVISIBLE);
        holder.Checkbox.setVisibility(InertCheckBox.VISIBLE);
        if (!chkbxDelete) {
            holder.Checkbox.setButtonDrawable(R.drawable.checkbox);
        } else {
            holder.Checkbox.setButtonDrawable(R.drawable.checkboxdelete);
        }
        holder.Checkbox.setChecked(isChecked);
        break;
    }           

    return convertView;
} 
```

我的列表视图行布局

```
<?xml version="1.0" encoding="utf-8"?>
<au.drp.mylistview.widget.CheckableRelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:drp="http://schemas.android.com/apk/res/au.drp.mylistview"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/list_selector"
android:orientation="horizontal"
android:padding="2dip" >

<!-- ListRow Left side Thumbnail image -->

<LinearLayout
    android:id="@+id/thumbnail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="5dip"
    android:gravity="center_vertical"
    android:padding="3dip" >

    <ImageView
        android:id="@+id/list_image"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:src="@drawable/icon" >
    </ImageView>
</LinearLayout>

<!-- Title Of Exercise -->
<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/thumbnail"
    android:layout_toLeftOf="@+id/inertCheckBox"
    android:layout_toRightOf="@+id/thumbnail"
    android:text="This is the Title - Testing 1 2 3 "
    android:textColor="#ffffffff"
    android:textSize="18dip"
    android:textStyle="bold"
    android:typeface="sans" />

<TextView
    android:id="@+id/description"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/title"
    android:layout_toLeftOf="@+id/inertCheckBox"
    android:layout_toRightOf="@id/thumbnail"
    android:text="this is the description - Testing 1 2 3"
    android:textColor="#ffcccccc"
    android:textSize="14dip" />

<TextView
    android:id="@+id/session_count"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:gravity="right"
    android:text="100"
    android:textColor="#ffcccccc"
    android:textSize="10dip"
    android:textStyle="bold" />
<ImageView
    android:id="@+id/drag"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/inertCheckBox"
    android:layout_alignLeft="@id/inertCheckBox"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@id/inertCheckBox"
    android:layout_below="@id/session_count"
    android:layout_centerVertical="false"
    android:adjustViewBounds="true"
    android:maxHeight="32dip"
    android:maxWidth="32dip"
    android:scaleType="center"
    android:src="@drawable/arrow_32_holo_dark"
    android:visibility="visible" />
<au.drp.mylistview.widget.InertCheckBox
    android:id="@+id/inertCheckBox"
    style="@drawable/checkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@id/session_count"
    android:button="@drawable/checkbox"
    android:checked="true"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false" />

</au.drp.mylistview.widget.CheckableRelativeLayout> 
```

我的 CheckableRelativeLayout 类

```
public class CheckableRelativeLayout extends RelativeLayout implements Checkable {

private boolean isChecked;
private List<Checkable> checkableViews;

public CheckableRelativeLayout(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    initialise(attrs);
}

public CheckableRelativeLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    initialise(attrs);
}

public CheckableRelativeLayout(Context context, int checkableId) {
    super(context);
    initialise(null);
}

/*
 * @see android.widget.Checkable#isChecked()
 */
public boolean isChecked() {
    return isChecked;
}

/*
 * @see android.widget.Checkable#setChecked(boolean)
 */
public void setChecked(boolean isChecked) {
    this.isChecked = isChecked;
    for (Checkable c : checkableViews) {
        c.setChecked(isChecked);
    }
}

/*
 * @see android.widget.Checkable#toggle()
 */
public void toggle() {
    this.isChecked = !this.isChecked;
    for (Checkable c : checkableViews) {
        c.toggle();
    }
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();

    final int childCount = this.getChildCount();
    for (int i = 0; i < childCount; ++i) {
        findCheckableChildren(this.getChildAt(i));
    }
}

/**
 * Read the custom XML attributes
 */
private void initialise(AttributeSet attrs) {
    this.isChecked = false;
    this.checkableViews = new ArrayList<Checkable>(5);
}

/**
 * Add to our checkable list all the children of the view that implement the
 * interface Checkable
 */
private void findCheckableChildren(View v) {
    if (v instanceof Checkable) {
        this.checkableViews.add((Checkable) v);
    }

    if (v instanceof ViewGroup) {
        final ViewGroup vg = (ViewGroup) v;
        final int childCount = vg.getChildCount();
        for (int i = 0; i < childCount; ++i) {
            findCheckableChildren(vg.getChildAt(i));
        }
    }
} 
```

}

以及 DragsortListView 的自定义列表视图布局

```
<?xml version="1.0" encoding="utf-8"?>
<au.drp.mylistview.draganddrop.DragSortListView
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:dslv="http://schemas.android.com/apk/res/au.drp.mylistview"
  android:id="@android:id/list"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:paddingTop="20dp"
  android:paddingBottom="20dp"
  dslv:collapsed_height="5dp"
  dslv:drag_scroll_start="0.33"
  dslv:max_drag_scroll_speed="0.5"
  dslv:float_background_color="#000000"
  dslv:remove_mode="none"
  dslv:track_drag_scroll="false" /> 
```

有人能向我指出我的错误吗？我被困住了。

谢谢，

保罗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:51:06.440

好的，我发现了问题！但又引出另一个问题。问题是我的 MyListViewAdapter 类中的这一行

```
 final ListView lv = (ListView) parent;  // DOES NOT LIKE THIS STATEMENT CODE 
```

如果我将此注释掉，并且所有使用 lv 的应用程序都会运行并且拖放工作！但是现在的问题是如何确定列表视图中的项目是否被选中？所以这就是我在检查视图时获得的方式

```
 // This is how you would determine if this particular item is checked
    // when the view gets created
    // --       
    final ListView lv = (ListView) parent;  // DOES NOT LIKE THIS STATEMENT CODE
    final boolean isChecked = lv.isItemChecked(position);

    // Get the listview Choice Mode
    //
    final int selectionMode = lv.getChoiceMode(); 
```

我想我可以在代码周围添加一个 if 语句，用于何时启用拖放支持模式，但这似乎是一种解决方法。有任何想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:46:45.553

`View parent`传入`getView`的参数不是`ListView`包含列表，它只是`convertView`（即，用于膨胀）的父级。从根本上说，它不是一个`ListView`对象，这就是为什么您在尝试转换它时得到 a 的原因`ClassCastException`，因为它不能转换为`ListView`. 您应该将`ListView`对象传递给`Adapter`sublcas 的构造函数，然后在`getView`..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-02T13:46:26.623

在我的情况下`ClassCastException`是因为在`my_custom_view.xml`（我用来充气`MyCustomView`）我已经定义了它`id`：

```
android:id="@+id/myCustomView" 
```

然后`my_activity.xml`我`id`再次定义了它：

```
<com.example.app.views.custom.MyCustomView
        android:id="@+id/myCustomView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

从解决问题中删除`id`参数。`my_custom_view.xml`

# git - SmartGit 和 Git 如何与远程进行比较？

> ID：11769373
> 
> 赞同：2
> 
> 时间：2012-08-02T00:15:18.577
> 
> 标签：git, smartgit

我对 git （以及所有版本控制软件）很陌生。我已经安装了 SmartGit 3 作为我的图形界面。我创建了一个裸仓库并克隆了它。我想知道的是，我应该如何从服务器中提取（不覆盖），比较我当前本地版本和远程服务器版本之间的修改（更改），然后选择我想要保留的更改（如在融合或 kdiff3 中）。

正如我们所说，当我从服务器拉取时，它会完全覆盖我的本地版本，而当我推送时，它会用本地版本（最后一次提交）覆盖远程服务器的版本。

当我拉和/或推时，我希望能够比较我的本地版本和远程版本之间的差异。

我试图弄清楚如何做到这一点，但就是找不到。我见过我的一个朋友用 git gui 做类似的事情（我认为他正在合并一些东西，但我不确定）。

无论如何，我确定我理解错了，但是如果有人可以帮助我完成操作的过程（使用 SmartGit 3），那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:09:03.760

In your SmartGit3 project, right-click repository settings (alt-enter) and uncheck the "commit merged remote changes".

Now when you do a "pull", if you just fetch the changes, they will be fetched into origin/master branch.

You can merge from there in the merge window (select all branches from the dropdown or just "master and origin/master") and the commits on the remote (origin/master) branch should show up in the list.

Looks like once you fetch (above) you can see the changes vs your local HEAD from the log window. select all branches (or "master and origin/master") on the little drop down next to the Filter box/Default coloring dropdown. You can then cherry pick merge the commits into your local master.

# cookies - OAuth2 用户映射和丢失我的 Cookie

> ID：11769374
> 
> 赞同：0
> 
> 时间：2012-08-02T00:15:19.480
> 
> 标签：cookies, oauth-2.0

将我的老式头脑包裹在 OAuth 周围......

除了请求/响应机制和 Authorize / Authenticate 往返行程（我想我理解）之外，我还在努力将我的 MyUser 对象（可能包含的任何内容）映射到 OAuth 令牌，如果（实际上是*何时*，而不是如果）用户杀死我可能在浏览器上放置的任何 cookie（加密或其他方式）。

我在原始登录中获得了 MyUser 信息（将其称为我的网站的“注册”），但现在 MyUser 回来了，所有 cookie 都消失了，所以他只是“用户”。很公平，用户必须再次进行 OAuth 登录，但现在我无法将新的 Token / Secret 与 MyUser 数据相关联。

我错过了什么？

--- 2012 年 8 月 2 日编辑 -----

让我重申一下（我很确定我对此很敏感，但我猜这就是这里的目的）：

正如回复中所指出的，每个 OAuth 提供者都有自己的机制。我们可以导航这些并为用户取回访问令牌。

假设 Hero 使用 Facebook 在我的网站上注册。FB 返回他的 FB 用户 ID 和名称以及访问令牌。我们足够聪明地请求并获取他的 FB 电子邮件，并在让他进入之前询问他一些其他注册 q。然后我们将其保存在我们的数据存储中（链接到我们自己的用户记录）：

```
OurUserId : 1234
oAuthProviderName : Facebook
oAUthProviderUserId: xxxxx
oAuthProviderUserEmail: hero@mlb.com
oAuthProviderUserName: iBeHero
oAuthToken: entracingly-unique-string-of-goop
oAuthSecret: moredata
.... etc. 
```

并设置一个cookie来识别他是我们的用户#1234。

现在英雄走了，出于某种原因杀死了他的饼干，然后又回到了我们身边。

现在他决定用 Twitter 登录。我没有饼干，所以我不知道他是谁，我们再次经历这个过程。

对我来说，他看起来像一个新用户，所以一旦 Twitter 给我发了一个令牌，我就开始问他注册问题，显然不对。

结果 Twitter 没有返回电子邮件地址，所以我无法匹配，即使他们这样做了（我想几乎其他所有人都这样做了）Hero likley 有不止一个电子邮件。

在我看来，我在两次（或多次）登录之间唯一的联系是我设置的任何未删除的 cookie。

我们是说整个 OAuth2.0 机制都依赖于此吗？我不敢相信这是对的，但看不到另一种方式，所以我一定错过了什么，是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:39:32.500

如果您也使用 OAuth 作为登录机制，那么请确保您正在与之交谈的任何提供者都有某种方式可以为用户返回一个稳定的 ID。该 ID 是您用于在数据库中查找用户的密钥。

Different providers have different ways of doing this. For Google, details on how to do authentication with OAuth 2.0 are [here](https://developers.google.com/accounts/docs/OAuth2Login). For Twitter, they use OAuth 1.0 and return the user ID when exchanging the code for an access token. Facebook has its own way of doing it as well.

# topshelf - TopShelf 在同一台机器上安装多个相同的服务

> ID：11769376
> 
> 赞同：15
> 
> 时间：2012-08-02T00:15:26.410
> 
> 标签：topshelf

我正在尝试使用 TopShelf 创建 Windows 服务。使用该服务的一个实例一切正常。但是，当我将整个服务文件夹复制到不同的位置，然后在该位置运行安装时，它只会挂在“启动”上。

我根据配置文件中的值分配服务名称、描述、显示名称，因此没有命名冲突。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-16T08:37:54.553

`instancename`您需要区分的是服务。

从[文档](http://docs.topshelf-project.com/en/latest/overview/commandline.html)中：

> service.exe **[动词]** [-option:value] [-switch]
> 
> **install**安装服务
> 
> -instance 多次注册服务时的实例名称

所以你可以使用：

```
service.exe install -instance:FirstInstanceOfMyService

service.exe install -instance:SecondInstanceOfMyService 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-14T16:18:54.330

如果您想要在配置文件中设置服务实例名称，您可以像这样以编程方式设置实例名称：

```
var instanceName = ConfigurationManager.AppSettings["Instance"];
HostFactory.Run(hostConfigurator =>
{    
    ...   
    hostConfigurator.SetDisplayName("My service");
    hostConfigurator.SetDescription("My service that does something");
    hostConfigurator.SetServiceName("MyService");
    hostConfigurator.SetInstanceName(instanceName);
} 
```

所以，在安装过程中你只运行

```
 MyService.exe install 
```

# ios - 书架应用

> ID：11769381
> 
> 赞同：-4
> 
> 时间：2012-08-02T00:15:47.000
> 
> 标签：ios, in-app-purchase

事情是这样的，我已经有 3 个应用程序，现在我要做的是制作一个应用程序，它可以像商店一样提供服务，他们可以浏览我的应用程序并在应用程序内购买/下载它们（没有 iTunes 链接），然后下载后，他们可以在应用程序中打开/使用它（没有单独的图标）。类似于报亭上的杂志应用程序，可让您下载应用程序并将其存储在应用程序中。

应用内购买是否与它有关？如果是，我应该从哪个部分开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:24:00.257

您不能使用 In App Purchases 获得任何新的下载代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:25:54.173

对于这样的应用程序，您绝对会被拒绝。[App Store 审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html#functionality)说：

> **2.7**以任何方式或形式下载代码的应用程序将被拒绝
> 
> **2.8**安装或启动其他可执行代码的应用程序将被拒绝

# javascript - Google Maps API v3 MapTypeId 作为变量

> ID：11769382
> 
> 赞同：3
> 
> 时间：2012-08-02T00:15:48.670
> 
> 标签：javascript, google-maps-api-3

设置谷歌地图类型时：

```
map.setMapTypeId(google.maps.MapTypeId.TERRAIN); 
```

我可以用包含字符串“TERRAIN”、“SATELLITE”等的 js 变量替换“TERRAIN”吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T00:18:44.963

是的，这样称呼它：

```
var mapType = "TERRAIN";
map.setMapTypeId(google.maps.MapTypeId[mapType]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-14T19:54:54.483

```
//Console output of MapTypeId
google.maps.MapTypeId
{ROADMAP: "roadmap", SATELLITE: "satellite", HYBRID: "hybrid", TERRAIN:"terrain"}
HYBRID:"hybrid"
ROADMAP:"roadmap"
SATELLITE:"satellite"
TERRAIN:"terrain"

//change mapTypeId
map.setMapTypeId("terrain"); //example with hybrid
//or
map.setMapTypeId(google.maps.MapTypeId.TERRAIN); // same example with hybrid
//or as you want
map.setMapTypeId(google.maps.MapTypeId["TERRAIN"]); // same example with hybrid 
```

# php - 欧洲的IP范围？用 PHP 检测？

> ID：11769387
> 
> 赞同：2
> 
> 时间：2012-08-02T00:16:23.010
> 
> 标签：php, geolocation

我希望使用 PHP 和 JavaScript 来实施“Cookie 法”。我认为让来自其他大陆的用户在打开我的网站时填写表格是没有意义的，但不幸的是欧盟需要。

我尝试搜索欧洲的 IP 范围，但一无所获。

我知道我可以使用 explode() 和 $_SERVER['remote_addr'] 和 substr() 来隔离特定的 IP 范围我面临的问题是将哪些 IP 列入黑名单，即 194.XXX.XXX.XXX - 198.XXX.XXX .XXX？

另外，实现这一点的最佳方法是什么，使用 if else 语句会起作用吗？我的意思是如果用户在欧洲，显示一些 JS，如果用户在另一个显示一些其他 JS。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T00:25:54.917

您可以使用 GeoLocation 数据库使用 PHP 中的 REMOTE_ADDR 检查国家/地区。

例如[GeoLite](http://www.maxmind.com/app/geolite)提供了一个 PHP [API 库](http://www.maxmind.com/app/php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-22T12:02:24.663

```
$ip = $_SERVER['REMOTE_ADDR'];

$country = file_get_contents("http://api.wipmania.com/".$ip."?[YOUR SITE URL]");

$eu_countries = array("BE", "BG", "CZ", "DK", "DE", "EE", "IE", "EL", "ES", "FR", "HR", "IT", "CY", "LV", "LT", "LU", "HU", "MT", "NL", "AT", "PL", "PT", "RO", "SI", "SK", "FI", "SE");

$checked = in_array(strtoupper($country), $eu_countries); 
```

# ios - 如何在 Adob e AIR for iOS 中同时收听点击和手势？

> ID：11769394
> 
> 赞同：2
> 
> 时间：2012-08-02T00:17:43.927
> 
> 标签：ios, flash, air, multi-touch, gesture-recognition

我正在制作一个 iOS 游戏，我需要同时检测简单的点击和手势（滑动等*）*。在 AIR 中，我只能看到多点触控输入模式的一项设置：TOUCH_POINT（适用于基本点击）和 GESTURE。但我同时需要两者，所以改变模式不是一种选择。我怎样才能同时听这两个？

谢谢，坎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T18:55:54.637

```
import flash.events.EventDispatcher;
import flash.events.TouchEvent;
import flash.net.Responder;
import flash.ui.Multitouch;
import flash.ui.MultitouchInputMode;

public class SwipeAndTap extends EventDispatcher
{
    private var fingerX:int;
    private var fingerY:int;
    private var elem:Object;

    public function SwipeAndTap(_elem:Object)
    {
        Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT;

        elem = _elem;
        elem.addEventListener(TouchEvent.TOUCH_BEGIN, onTouchBegin);
        elem.addEventListener(TouchEvent.TOUCH_MOVE, onTouchMove);
        elem.addEventListener(TouchEvent.TOUCH_END, onTouchEnd);
    }
    private function onTouchBegin(e:TouchEvent):void 
    {
        fingerX = e.stageX;
        fingerY = e.stageY;
    }
    private function onTouchMove(e:TouchEvent):void 
    {
        if(e.stageX > (fingerX+150) && (e.stageY > (fingerY-100) && e.stageY < (fingerY+100) ) )
        {
            // swipe right
            dispatchEvent(new TouchSwipeRight(TouchSwipeRight.SWIPE_RIGHT, e));
        }
        else if(e.stageX < (fingerX-150) && (e.stageY > (fingerY-100) && e.stageY < (fingerY+100) ) )
        {
            // swipe left
            dispatchEvent(new TouchSwipeLeft(TouchSwipeLeft.SWIPE_LEFT, e));
        }
    }

    private function onTouchEnd(e:TouchEvent):void 
    { 
        // e.touchPointID;
        if(e.stageX > (fingerX-40) && e.stageX < (fingerX+40))
        {
            dispatchEvent(new TouchEventTap(TouchEventTap.TAP, e));
            elem.removeEventListener(TouchEvent.TOUCH_BEGIN, onTouchBegin);
            elem.removeEventListener(TouchEvent.TOUCH_MOVE, onTouchMove);
            elem.removeEventListener(TouchEvent.TOUCH_END, onTouchEnd);
        }

    }
} 
```

例子：

```
var SAT:SwipeAndTap = new SwipeAndTap(stage);
    SAT.addEventListener(TouchEventTap.TAP, LangSelected);
    SAT.addEventListener(TouchSwipeRight.SWIPE_RIGHT, ENtoPL);
    SAT.addEventListener(TouchSwipeLeft.SWIPE_LEFT, PLtoEN); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:24:10.517

您可以使用标准鼠标事件进行点击。

这将保持手势多点触控输入模式。

否则，[可能会对 Gestouch 框架：](https://github.com/fljot/Gestouch) GitHub 上用于鼠标、触摸和多点触控 AS3 开发的 NUI 手势检测框架感兴趣。

还要注意触摸/手势事件模型的[性能影响：](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-6ffb37601221e58cc29-8000.html)

> 取决于用户的设备，触摸和手势输入都可以是多点触摸输入。ActionScript 提供用于处理触摸事件、手势事件和单独跟踪的多点触摸输入的触摸事件的 API。
> 
> 注意：监听触摸和手势事件可能会消耗大量的处理资源（相当于每秒渲染几帧），具体取决于计算设备和操作系统。当您实际上不需要触摸或手势提供的额外功能时，通常最好使用鼠标事件。当您确实使用触摸或手势事件时，请考虑减少可能发生的图形更改量，尤其是当此类事件可以快速调度时，例如在平移、旋转或缩放操作期间。例如，您可以在用户使用缩放手势调整组件大小时停止组件内的动画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T06:24:29.507

我不太确定您是否需要设置`TOUCH_POINT`基本敲击。如果你已经`GESTURE`准备好了，它应该也能正常工作。您可以使用鼠标事件来模拟它。

无论如何，默认的 AIR 手势支持并不是那么好，所以它可能无法正常工作，因此我建议查看[Gestouch](https://github.com/fljot/Gestouch "格触")库。你会得到更复杂的手势支持，效果很好。几个月以来，我一直在我的 Flex/AS3 项目中使用它，我对它非常满意。

# php - Javascript变量在空格后被切断

> ID：11769396
> 
> 赞同：1
> 
> 时间：2012-08-02T00:18:12.910
> 
> 标签：php, javascript, string, variables

我有一个 PHP 页面，我使用 JavaScript 来根据 MySQL 结果更新下拉列表。我的问题是，当我通过 JavaScript 变量传递客户名称时，它会在第一个空格处截断。例如：“Home Depot”将显示为“Home”或“The Home Store”显示为“The”。为了执行正确的查询，我希望传递整个字符串。

这是我表单中的相关代码：

```
 function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
      }

    function getCustCont(cID)
    {
    var strURL="Includes/cdd.php?custid="+cID;
    var req = getXMLHTTP();
    if (req)
    {
      req.onreadystatechange = function()
      {
       if (req.readyState == 4)
       {
     // only if "OK"
     if (req.status == 200)
          {
        document.getElementById('Contdiv').innerHTML=req.responseText;
     } else {
        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
      }
        }
       }
    req.open("GET", strURL, true);
    req.send(null);
    }

//VARIABLES DEFINED AND START OF FORM

    <td width="60%">

    <select name="Customer" onchange="getCustCont(this.value)">
    <option value="SAC">Select Customer</option>
    <?php
    $i=0;
    while ($i < $num) {
    $Name=mysql_result($result,$i,"Name");

    echo "<option value=$Name>$Name</option>";
    $i++;
    }       
    ?>  

    </select>
    </td> 
```

cdd.php 文件包括以下内容：

```
 <? 
    $Cust_ID = $_GET['custid'];
    include('../Includes/TrackingDB.php');

    mysql_connect($dbhost,$dbuser,$dbpass) or die('Error connecting to mysql');
    mysql_select_db($dbdb) or die('Error connecting to database');

    $query="SELECT t1.ContName FROM Cust_Contacts t1 INNER JOIN Customer_Listing t2 ON t1.Cust_ID = t1.Cust_ID WHERE t2.Name = '$Cust_ID'";
    $result=mysql_query($query);

    mysql_close();

    echo var_dump($Cust_ID); //I added this solely for the purposes of trouble shooting this issue. This is where I am seeing the truncated string.

    ?>
    <select name="Cust_Buyer" onchange="getCity(<?=$country?>,this.value)">
    <? while($row=mysql_fetch_array($result)) { ?>
    <option value="<?=$row['ContName']?>"><?=$row['ContName']?></option>
    <? } ?>
    </select> 
```

同样，在 cdd.php 文件中，字符串在空白处截断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:20:52.817

编码**cID**

```
var strURL="Includes/cdd.php?custid="+encodeURIComponent(cID); 
```

并用引号将值括起来：

```
echo "<option value='$Name'>$Name</option>"; 
```

# jquery - 是否可以使用 Jquery 来检测下一个 id 或锚点并使用它围绕另一个元素创建一个新的 div？

> ID：11769399
> 
> 赞同：1
> 
> 时间：2012-08-02T00:18:27.373
> 
> 标签：jquery

我拥有的 HTML 如下所示：

```
<div id="container">
  <ul>
    <li>
        <div class="oneClass">
            <img src="http:image.jpg">
        </div>
        <div class="anotherClass" id="oneID">
            <div class="twoClass" id="randomID">
                <cite class="user">
                    <a href="http://someURL" >Name</a>
                </cite>
                <span class="icon user"></span>
                <span class="threeClass">
                    <a href="http:URL#oneID">some text</a>
                </span>
            </div>
            <p class="content" id="randomID">some words content</p>
        </div>
    </li>
    <li>
        <div class="oneClass">
            <img src="http:image.jpg">
        </div>
        <div class="anotherClass" id="anotherID">
            <div class="twoClass" id="randomID">
                <cite class="user">
                    <a href="http://someURL" >Name</a>
                </cite>
                <span class="icon user"></span>
                <span class="threeClass">
                    <a href="http:URL#anotherID">some text</a>
                </span>
            </div>
            <p class="content" id="randomID">some words content</p>
        </div>
    </li>
  </ul>
</div> 
```

我需要的是找到一种方法来检测 oneClass 之后的下一个 ID，并用于围绕 oneClass 创建另一个 div。例子：

```
 <div id="container">
       <ul>
        <li> 
      <div id="myName_oneID">
            <div class="oneClass">
         <img src="http:image.jpg">
            </div>
      </div>
         <div class="anotherClass" id="oneID">
            <div class="twoClass" id="randomID">
                <cite class="user">
               <a href="http://someURL" >Name</a>
                 </cite>
                    <span class="threeClass">
                         <a href="http:URL#oneID">some text</a>
                    </span>
              </div>
                <p class="content" id="randomID">
                   some words content
                </p>
        </div>
     </li>
      <li>
        <div id="myName_anotherID">
             <div class="oneClass">
                <img src="http:image.jpg">
             </div>
         </div>
             <div class="anotherClass" id="anotherID">
                 <div class="twoClass" id="randomID">
                     <cite class="user">
                    <a href="http://someURL" >Name</a>
                      </cite>
                     <span class="threeClass">
                    <a href="http:URL#anotherID">some text</a>
                     </span>
                 </div>
             <p class="content" id="randomID">
                   some words content
             </p>
          </div>
     </li>
    </ul>
</div> 
```

我试图从这样的锚中得到它：

```
 $(".threeClass a").map(function () {
    var myID ="myName_" + this.hash.replace(/#/, '');
    //alert(myID);
$(".oneClass").each(function () {
    $(this).wrap("<div id='" + myID + "' />");
});

}); 
```

如果我测试警报（myID），它会正确检测到，但是当我尝试使用它来包装新的 div 时，它会为所有 oneClass 创建具有相同 ID 的它。

可以做到吗？

我是 javascript 或 Jquery 的新手，并以正确的方式欣赏帮助或指导。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:27:21.210

尝试这个

```
$('.oneClass').each(function(){
    id=$(this).next().attr('id');
    $(this).wrap('<div></div>').parent().attr('id', 'myName_'+id);
}); 
```

[**演示**](http://jsfiddle.net/heera/5z3k4/3/)（参见源代码）。

# c# - 有没有办法将文件复制到另一个没有共享文件夹的 Windows 服务器

> ID：11769401
> 
> 赞同：1
> 
> 时间：2012-08-02T00:18:31.913
> 
> 标签：c#, asp.net, windows

在我的应用程序中，我必须将整个目录复制到远程服务器中的指定位置，现在我们首先将远程服务器中的位置共享，然后复制它。

此外，远程服务器中的位置都映射到`web site`iis中。也就是说，每个位置都是远程服务器中的一个网站根路径，复制到服务器的目录将被制作``application(vitrual directory)`并部署。

但是，我们的客户想知道这是否是安全的，因为`web site`位置的根是共享的？

所以我想知道是否有什么方法可以在没有共享文件夹的情况下复制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:24:27.323

您可能可以创建一个简单的 Wcf 服务，该服务可以由目标服务器上的 iis 托管，并提供上传文件的机会。我想可以很容易地考虑安全问题（身份验证、IP 过滤等），并且只有在本地执行的 wcf 服务才需要将文件写入服务器的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:21:46.510

查看[WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394594%28v=vs.85%29.aspx) @ [http://msdn.microsoft.com/en-us/library/windows/desktop/aa394594(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394594(v=vs.85).aspx)

# email - 将旧电子邮件转移到新服务器

> ID：11769408
> 
> 赞同：0
> 
> 时间：2012-08-02T00:19:56.150
> 
> 标签：email

电子邮件服务器技术方面的新手：

**情况**：我们有一个旧的托管（和邮件）提供商，我们正在远离它。他们正在使用 Mail Enable Enterprise（它是一个微软服务器，以防万一而且他们没有 cPanel）。他们的服务器上有 7 GB 的电子邮件信息，我们还通过 IMAP 将这些信息下载到机器上。

**我们需要：**将这些消息传输到新的服务器/提供商。我继续询问 HostGator tech.support，他们无法进行导入，所以我正在寻找可以导入消息（和文件夹）的不同提供商，然后成为一个好的电子邮件提供商。

**问题：**您能否建议一个提供商（Google Apps 会这样做吗？）让我将消息导入/上传到他们的服务器，或者建议另一种解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:08:19.773

好吧，两边都有 IMAP，对吧？

在您的电子邮件客户端中拖放就可以正常工作。是的，它有很多数据，可能需要一点时间，但它是最简单的，可能会起作用。简单的事情很难出错。

还有[imapsync](http://imapsync.lamiral.info/)，但是您需要已经知道双方的登录信息，这对于旧服务器上的每个帐户可能都没有。

# linux - 如何在构建期间测量 CPU、内存和磁盘使用情况？

> ID：11769412
> 
> 赞同：5
> 
> 时间：2012-08-02T00:20:28.340
> 
> 标签：linux, build, makefile, build-process

我正在尝试缩短构建时间，并希望获得一些反馈来衡量我的问题所在。

我在 Linux CentOS 系统上使用 GNU Make 来构建 Linux 内核以及一些应用程序代码。我可以使用“时间”运行 Make 以获得完整构建的总体时间，但这并不能告诉我瓶颈在哪里。

我使用 -j 和 Make 在我的构建机器上的多个内核上运行它，但我在构建期间运行 top 并注意到 CPU 内核经常处于空闲状态。

关于在构建期间测量磁盘和内存使用情况的最佳方法有什么建议吗？

还有什么我应该测量的吗？

对基于文本的或 GUI 没有偏好——无论什么给我一些我可以使用的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:20:09.017

对于实时测量，我使用来自[第三方](http://pkgs.repoforge.org/htop/)存储库的基于 tex 的 htop。它像 top 但更好，它以图形方式显示 cpu（所有 cpu 单独），ram 负载。

# jsf - JSF - PrimeFaces，如何在列表中获取 booleanCheckbox / booleanButton 的值

> ID：11769417
> 
> 赞同：0
> 
> 时间：2012-08-02T00:21:42.180
> 
> 标签：jsf, jakarta-ee, primefaces

我有一个 jsf 页面，我无法更新`userDamain`对象列表中某些复选框的值，实际上这是我的 jsf 页面的一部分：

```
 <h:outputText value="USER's rights list: "></h:outputText>
    <p:dataTable id="userss" var="userr" value="#{userMB.userListe}">

        <p:column>
            <f:facet name="header"><h:outputText value="FirstName" /></f:facet>                     
            <h:outputText value="#{userr.firstName}"  />                    
    </p:column>

    <p:column>
        <h:panelGrid columns="1" style="margin-bottom:10px" cellpadding="5">  
                <h:outputText value="Basic Usage: " />  
                <p:selectBooleanCheckbox value="#{userr.deletee}" immediate="true" actionListener="#{userr.deletee}"  />      
            </h:panelGrid> 

            <p:commandButton value="Submit" update="display" oncomplete="dlg.show()" />  
            <p:dialog header="Selected Values" modal="true" showEffect="fade" hideEffect="fade" widgetVar="dlg">  
                <h:panelGrid columns="1" id="display">  
                    <h:outputText value="Value 1: #{userr.deletee}" />  
                </h:panelGrid>  
            </p:dialog>      

    </p:column> 
```

当我单击布尔按钮“提交”时，该值`userr.deletee`始终为 false（默认值）并且无论如何都没有更新，我尝试在 booleanButton 中使用 Listner 和 actionListener 但它不起作用，我也试过了postValidate 事件，所以如果有人对此有任何想法，我会很优雅。

这是我的托管 bean 的一部分：

```
private List<UserDomain> userListe ;

    public List<UserDomain> getUserListe() {
        return this.userListe;
    }

    public void loadUserListe(){
        this.userListe = new ArrayList<UserDomain>();
        this.userListe.addAll(getUserServicee().getAll());
    }

    public void setUserListe(List<UserDomain> userListe) {
        this.userListe = userListe;
    } 
```

userDomain bean 的一部分：

```
...
public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
@Transient
    private boolean deletee;

    public boolean isDeletee() {
        return deletee;
    }

    public void setDeletee(boolean deletee) {
        this.deletee = deletee;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:37:17.943

我发现了一个对我来说似乎是逻辑的解决方案，我在我的复选框中添加了一个 ajax 行为来执行一个方法和一个在此方法中调用以获取整个`userDomain`对象的属性，所以我可以获得`user.deletee`值，这里是一部分我正在谈论的代码：

```
<h:panelGrid columns="1" style="margin-bottom:10px" cellpadding="5">  
                    <h:outputText value="Delete Right: " />  

                    <p:selectBooleanCheckbox value="#{userr.deletee}">  
                        <f:ajax execute="@this" listener="#{userMB.saveUserRights}" />
                        <f:attribute name="user" value="#{userr}" />
                    </p:selectBooleanCheckbox> 

                </h:panelGrid> 
```

我希望这对你有帮助

# android - support-v4.app.fragment 和 app.fragment 之间的区别？

> ID：11769423
> 
> 赞同：6
> 
> 时间：2012-08-02T00:22:38.260
> 
> 标签：android

我是 Fragment 的新手，有一个问题：当我更新我的 SDK 工具并创建一个项目（min = api8，默认项目）时，我注意到我的引用库中的 android-support-v4.jar。

当我扩展我的类并尝试使用`Fragment`该类时，我发现有2个。一个是android.app.Fragment，另一个是android.support.v4.app.Fragment。这两者有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T00:27:57.230

如果你正在为 Android 3+ 开发，你可以使用 app.Fragment。

但是，在 3- 中，Fragments 还不存在。这就是支持库的用武之地。它为旧版本的 Android 提供 Fragments。

另请参阅[此链接](http://developer.android.com/tools/extras/support-library.html)

# jsf-2 - Primefaces 部分渲染 - commandButton actionListener 未触发

> ID：11769425
> 
> 赞同：1
> 
> 时间：2012-08-02T00:22:42.267
> 
> 标签：jsf-2, primefaces

我正在尝试为应用程序制作部分渲染导航。下面的代码是一个概念测试，除了 x.xhtml 文件上的命令按钮外，它运行良好。它不会触发 actionListeneron 单击。这用于更改包含部分的 url。

**索引.xhtml**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>PrimeFaces</title>
            </f:facet>
            <style type="text/css">
                .ui-layout-north {
                    z-index:20 !important;
                    overflow:visible !important;;
                }

                .ui-layout-north .ui-layout-unit-content {
                    overflow:visible !important;
                }
            </style>
        </h:head>
        <h:body>
            <p:layout fullPage="true">
                <p:layoutUnit position="north" size="100" header="Top" resizable="true" closable="true" collapsible="true">  
                    <h:form>
                        <p:menubar>
                            <p:submenu label="File" icon="ui-icon-document">
                                <p:menuitem value="XXX" update=":wrapper" actionListener="#{tbean.doNav}">
                                    <f:attribute name="xxx_page" value="x.xhtml" />
                                </p:menuitem>
                                <p:menuitem value="YYY" update=":wrapper" actionListener="#{tbean.doNav}">
                                    <f:attribute name="xxx_page" value="y.xhtml" />
                                </p:menuitem>
                            </p:submenu>
                        </p:menubar>
                    </h:form>
                </p:layoutUnit>
                <p:layoutUnit position="center">
                    <p:outputPanel id="wrapper">
                        <ui:include src="#{tbean.url}"/>
                    </p:outputPanel>
                </p:layoutUnit>
            </p:layout>
        </h:body>
    </f:view>
</html> 
```

**x.xhtml**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:p="http://primefaces.org/ui" 
              xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:form>
        <p:commandButton value="zzz" update=":wrapper" actionListener="#{tbean.doNav}">
            <f:attribute name="xxx_page" value="z.xhtml" />
        </p:commandButton>

        <p:dataTable var="car" value="#{tbean.cars}">
            <p:column>
                <f:facet name="header">  
                    Name
                </f:facet>
                <h:outputText value="#{car.name}" />
            </p:column>
        </p:dataTable>
    </h:form>
</ui:component> 
```

**y.xhtml**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:p="http://primefaces.org/ui" 
              xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:outputText value="yyy"/>
</ui:component> 
```

**z.xhtml**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<ui:component xmlns="http://www.w3.org/1999/xhtml"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:p="http://primefaces.org/ui" 
              xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:outputText value="zzz"/>
</ui:component> 
```

**tbean.java**

```
package com.teste;

import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.event.ActionEvent;

@ManagedBean
@RequestScoped
public class tbean {

    private String url = "y.xhtml";
    private List<Car> cars = new ArrayList<>();

    public tbean() {
        for (int i = 0; i < 10; i++) {
            cars.add(new Car(i));
        }
    }

    public void setUrl(String url) {
        Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, "setUrl :{0}", this.url);
        this.url = url;
    }

    public String getUrl() {
        Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, "getUrl :{0}", this.url);
        return this.url;
    }

    public void doNav(ActionEvent event) {
        this.url = (String) event.getComponent().getAttributes().get("xxx_page");
        Logger.getLogger(this.getClass().getName()).log(Level.SEVERE, "doNav :{0}", this.url);
    }

    public List<Car> getCars() {
        return cars;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:09:32.217

您的支持 bean 是请求范围的。这意味着它是在每个 HTTP 请求上创建的。因此，该`url`属性将默认为`y.xhtml`每个请求。

通过命令按钮提交表单会创建一个新的 HTTP 请求。因此，它获取了请求范围 bean 的新实例，其`url`属性默认为`y.xhtml`. 当 JSF 需要处理表单提交时，它无法确定按下的按钮，因为它不存在于`y.xhtml`. 所以 JSF 不能调用与按下的按钮相关的动作。

将 bean 放在视图范围内应该可以解决您的问题。

```
@ManagedBean
@ViewScoped
public class tbean { 
```

这将在同一视图上的 HTTP 请求中正确记住该`url`属性（通过返回`null`或`void`在每个操作上）。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

* * *

至于整个设计，您需要绝对确保所有的 ajax 操作都是由 PrimeFaces 组件调用的，而不是由标准的 JSF 组件调用`<f:ajax>`的，否则由于 JSF JS 中的错误，仍然不会调用命令按钮。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)（第 7 点）

# php - 使用图像 URL 动态创建图像

> ID：11769426
> 
> 赞同：1
> 
> 时间：2012-08-02T00:22:58.327
> 
> 标签：php, css, image, image-processing, dynamically-generated

我有一个带有 5 个空白框的装饰“相框”图像。

用户将提供 5 个 facebook 图片 URL，它们将填充 5 个空白框。

我想用这 5 张上传的照片生成生成的“相框”并生成一张图片……使用 PHP/html/css/javascript……这可能吗？

我已经知道我可以获取 5 个 URL，将它们上传到数据库，然后从图片 URL 中提取带有占位符背景图像源的“模板”图像。问题是生成这个 SINGLE 图像......我该怎么做？请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:25:53.437

您可以使用 PHP GD 从上传的 5 张照片中生成图像。

请参阅[PHP GD 文档](http://php.net/manual/en/book.image.php)

# selenium - selenium 独立服务器日志控制台为空白

> ID：11769427
> 
> 赞同：1
> 
> 时间：2012-08-02T00:23:15.143
> 
> 标签：selenium

**我的问题是：** selenium 独立服务器日志控制台显示空白

**重现问题的步骤：**

1.  安装 selenium 独立 2.25.0.jar
2.  在同一文件夹中有测试套件
3.  输入命令以通过控制台运行测试

`java -jar <location_of_selenium>/selenium-server-standalone-2.25.0.jar -htmlSuite *firefox <website URL> <location_of_selenium>/Test_suite1/Test_suite1_ts <location_of_selenium>/Test_suite1_results.html`

**预期输出：** 我的测试中有错误，它应该显示在 Selenium 日志控制台中，并在我的 selenium 文件夹中创建一个日志文件。

**平台和其他细节：**

硒版本：2.25.0

操作系统：Ubuntu

浏览器：火狐

浏览器版本：7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T21:38:53.120

1.  测试套件名称需要具有`.html`扩展名才能使日志正常工作
    *   旁注：要让 selenium 运行所有测试而不仅仅是 1，您还必须将其添加`.html`到测试用例文件中。

解决方案：将套件文件重命名为`Test_suite1_ts.html`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:05:40.570

请看看我是如何解决这个问题的：java -jar selenium-server-standalone-2.25.0.jar -htmlSuite *firefox [http://libo.ru/](http://libo.ru/) c:\temp\selenium\juzsay\testSute1.html testresult1.html

在哪里：

网站 URL = [http://libo.ru/](http://libo.ru/)
location_of_selenium = C:\temp\selenium\juzsay\testSute1.html（使用 Selenium IDE 构建） location_of_selenium = testresult1.html（包含测试结果的文件，在 selenium-server-standalone 文件夹中）

一些备注：

1）您应该运行 cmd 并打开文件夹，在我的情况下，您的 selenium-server-standalone-2.25.0.jar 文件是 C:\tools\selenium2.0\
2）为了帮助也使用此命令 -h

# php - 服务器重新启动后javascript无法正常工作

> ID：11769429
> 
> 赞同：1
> 
> 时间：2012-08-02T00:23:42.267
> 
> 标签：php, javascript, html, apache

今天早些时候，我的服务器出现问题，它崩溃了，所以我不得不重新启动。自从我重新启动它以来，我一直在我的一些 php 页面中看到一些奇怪的行为。特别是，一些 javascript 的东西似乎根本不起作用。（还有一些其他问题，但我觉得它们源于失败的 javascript。）

我仍然习惯于网络编程和使用服务器，所以我不知道为什么这个 javascript 在重新启动后无法工作。如果需要，我可以在此处发布脚本 - 我不知道这是否只是通用的事情，或者将特定于我的脚本。

作为记录，它是 Redhat 机器上的 Apache 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:29:38.697

javascript是在客户端浏览器而不是服务器中执行的，所以只要你没有对javascript文件进行任何修改，就不应该是服务器造成的错误。

您是否尝试使用另一台计算机访问您的网站？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:45:42.757

从您的评论看来，该页面正在从无法找到的网络位置加载 javascript 库 ( `http://wks-l0000120674/nephiere/validation.js`)。因此，如果客户端机器（不是服务器）连接到网络并且 wks-l0000120674 工作站已启动并且在网络上并且客户端机器有权从 wks-l0000120674 请求文件，它将加载。在重新启动时，您可能已经将 wks-l0000120674 引导到网络之外（假设 wks-l0000120674 与服务器属于同一网络，并且服务器还提供 DHCP 服务）。确保您仍然可以从*客户端计算机*到达此位置。

# java - 从Java中的2D int数组从二进制转换为十进制并存储variablse

> ID：11769431
> 
> 赞同：0
> 
> 时间：2012-08-02T00:24:02.177
> 
> 标签：java, binary, int

我正在尝试遍历一个二维整数数组并将它们的所有值从二进制形式更改为十进制形式并存储这些值。更清楚地说：我有一堆不同的 int 值，它们在技术上都是二进制形式，但它们的值存储为 int。例如，我可能有一个变量 int example1 = 10001110——其中的字符形成一个二进制数，但它仍然是一个原始 int。同样，我需要将这些值从二进制转换为十进制形式并将它们存储为整数。为了让您的生活更轻松/更直接：当前包含整数的数组有 8 行和 2 列：所有条目都是二进制整数形式。

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:29:06.720

遍历二进制字符串数组并转换它们，然后将其存储在一个新数组中。

`Integer.parseInt(binaryString, 2);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:30:31.717

要将二进制形式更改为十进制形式，您可以使用`Integer.parseInt(someStringInteger, 2)`. 要`someStringInteger`利用`Integer.parseInt(someInt)`。例如

```
//1110 (bin) -> 14 (dec)
System.out.println(Integer.parseInt(Integer.toString(1110), 2));//out -> 14 
```

# ruby-on-rails - has_many 上的 Rails 控制器

> ID：11769432
> 
> 赞同：0
> 
> 时间：2012-08-02T00:24:18.460
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

这里我有 3 个模型

```
Customer           Book            Book_Manager
id                 id              id
first              description     customer_id
last               book_managers   visible
email
password 
```

该协会已关注

```
class Customer < ActiveRecord::Base
  has_many :book_managers
  has_many :books, :through => :book_managers
end

class BookManager < ActiveRecord::Base
  belongs_to :customer
  has_many :books
end

class Book < ActiveRecord::Base
  belongs_to :book_manager
  def customer
    book_manager.customer
  end
end 
```

现在我可以通过以下方式创建一个新客户并在 Rails 控制台中创建一本新书

```
cust.book_managers.build :visible => true
cust.book_managers.first.books.build :description => 'the odyssey'
cust.save! 
```

并以这种方式查看

```
cust = Customer.find 1
cust.books
Book.first.customer 
```

上面的代码在 rails 控制台中工作。但我需要让它在控制器中工作。它就像个人资料页面，客户进入 customer#edit 并查看模型书籍。那时，如果是第一次，或者如果以前有什么东西，最后一本书将在文本字段描述中，则可能什么都没有。我之前尝试过下面的代码，但 book_manager 没有更新

```
@book = @customer.books.order("created_at DESC").first 
```

如果文本字段被修改或创建，那么它将创建一个新的 book_manager 和书籍并具有适当的关联。另请注意，可见的布尔下拉菜单将在那里允许 true 或 false（如果可见）并在 book_manager 模型上进行修改。

对不起，我是法语的语法。

我有以下内容，但似乎效果不佳

```
class BooksController < ApplicationController
    def create
        @book = current_customer.book_managers.build()
        @book = @customer.book_managers.first.books.build(params[:book])
        if @book.save
            flash[:success] = "Book Created"
            redirect_to root_url
        else
            render 'customer/edit'
        end
    end
end 
```

# jquery - 如何创建弹出图像（最好不是插件）

> ID：11769433
> 
> 赞同：0
> 
> 时间：2012-08-02T00:24:28.967
> 
> 标签：jquery

当用户将鼠标悬停在图像上时，我正在尝试创建弹出图像。我有以下代码，但放大的图像会破坏我的布局流程。我想知道是否有更好的方法可以在不破坏布局的情况下弹出图像。非常感谢！

```
 $('#image_layout img').live("hover", function(){
          var $this=$(this);

          $(this).animate({width: "30%", height: "30%"}, 'slow');

       })   not working properly. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:33:04.667

实际上，您可以在支持它的浏览器上使用 css 来做到这一点。

```
#image_layout img {
    transform: scale(1);
    -ms-transform: scale(1);
    -webkit-transform: scale(1);
    -o-transform: scale(1);
    -moz-transform: scale(1);
    transition: all 2s;
    -moz-transition: all 2s;
    -webkit-transition: all 2s;
    -o-transition: all 2s;
});

#image_layout img:hover {
    transform: scale(1.3);
    -ms-transform: scale(1.3);
    -webkit-transform: scale(1.3);
    -o-transform: scale(1.3);
    -moz-transform: scale(1.3);
    transition: all 2s;
    -moz-transition: all 2s;
    -webkit-transition: all 2s;
    -o-transition: all 2s;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:28:59.607

而不是调整图像本身的大小，您应该使用相同的图像显示一个单独的 div，并调整该 div+图像的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T00:34:23.647

当您尝试弹出窗口时，我建议您在您的网站上有一个位置：固定覆盖。

您应该有一个 div，它通常是隐藏的，但仅在用户按下图片时显示。div 应该是 position: fixed 或 absolute，这样它就不会在你的布局中流动，而只是显示在所有其他内容的顶部

```
<html>
<head><tile>My awesome title</title><head>
<body>
    <div id="photoviewer" style="display: none; position:fixed; top: xx; left: xx">
        <!--Your awesome photoviewer here -->
    </div>
    <!-- The rest of the content of your website here :) -->
</body>
</html> 
```

然后使用 JQuery 显示和取消显示 div "photoviewer"

编辑：如果你想制作一个照片查看器，这会起作用，但是使用一些 javascript/jquery 魔法，你也可以制作你想要的悬停:)，然后位置参数应该设置为绝对，我猜。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T00:29:16.527

为什么不使用 css，使用绝对位置和边距来阻止它破坏布局。

```
#image_layout img {
    position:absolute;
    margin:_ _ _ _;
} 
```

# batch-file - 字符串中的批处理脚本子字符串

> ID：11769435
> 
> 赞同：1
> 
> 时间：2012-08-02T00:24:46.463
> 
> 标签：batch-file

好的，我已经玩了一段时间了，但无处可去。我需要从一行中提取 KB 编号。

我遇到的问题是一些 KB 数字是 6 个字符，有些是 7 个字符，并且似乎无法找到一种方法来错误检测这两个字符。

这导致的两种类型的错误如下

第一个应该只显示 6 个字符，所以它在末尾添加了额外的“-”。

```
x64 KB890830-   2012\MS12-000\WinSec-KB890830-006-P58310-Windows-KB890830-x64-V4.9.exe 
```

而第二个错误显示随机“_”，因为它使用显示的第一个 KB 而不是第二个。

```
ia64    KB_942288   2012\MS12-000\WinSec-KB_942288-007-P58312-WindowsServer2003-KB942288-v4-ia64.exe 
```

编辑批处理文件到目前为止

```
@ECHO OFF
SETLOCAL enableDelayedExpansion

IF EXIST Export.csv DEL Export.csv
FOR /F "tokens=*" %%I in ('dir /s /b *.*') DO CALl:Generate "%%I"
pause

:Generate
SETLOCAL
IF "%~x1" NEQ ".exe" (
    If "%~x3" NEQ ".msu" (
        GOTO:EOF
    )
)
CALL:FindArchitecture %1
CALL:FindKB %1
CALL:PathFix %1
ECHO %Architecture%,%KB%,%FilePath%>>Export.csv
CALL:Cleanup
ENDLOCAL
GOTO:EOF

:FindArchitecture
ECHO %1 | FINDSTR "x64"
IF "%ERRORLEVEL%"=="0"  (
    SET Architecture=x64
    SET Count+=1
)
ECHO %1 | FINDSTR "x86"
IF "%ERRORLEVEL%"=="0" (
    SET Architecture=x86
    SET Count+=1
)

ECHO %1 | FINDSTR "ia64"
IF "%ERRORLEVEL%"=="0" (
    SET Architecture=ia64
    SET Count+=1
)

IF "%Count%" GTR "1" (
    SET Architecture=Error
)
SET Count=0
GOTO:EOF

:FindKB
set KBNum="%~1"
set "KBNum=!KBNum:*-KB=!"
ECHO !KBNum!|findstr /I /E /R /c:"-KB[0-9][0-9][0-9][0-9][0-9][0-9][0-9]" >nul 
SET "KB=KB!KBNum:~0,7!"
IF "%KB%" NEQ "" GOTO:EOF
ECHO !KBNum!|findstr /I /E /r /c:"-KB[0-9][0-9][0-9][0-9][0-9][0-9]" >nul
SET "KB=KB!KBNum:~0,6!"
GOTO:EOF

:PathFix
set Path_to_convert=%~1
set Reference_path=%~dp0
set FilePath=!Path_to_convert:*%Reference_path%=!
GOTO:EOF

:Cleanup
SET KBNum=
SET KB=
SET Count=
SET Architecture=
set InstallerPath=
set PathRemoval=
set Path=
GOTO:EOF 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T01:23:37.963

好的 - 在看到 Ken White 和 OP 的评论后进行了重要的编辑。

我不确定您是否需要这个，但是带有正则表达式的 FINDSTR 可以验证该行是否具有以下模式：“-KB”后跟 7 位数字，然后是“-”。

```
echo somestring|findstr /r /c:"-KB[0-9][0-9][0-9][0-9][0-9][0-9][0-9]-" >nul 
```

然后使用替换从“KB-”开始删除所有内容。

然后使用 FINDSTR 验证剩余的前 7 个字符是否为数字。如果不是，则循环返回并替换到下一个“-KB”等。

然后你只需要取剩下的前 7 个字符。

```
@echo off
:parseVal
setlocal enableDelayedExpansion
set val="%~1"
echo !val!|findstr /r /c:"-KB[0-9][0-9][0-9][0-9][0-9][0-9][0-9]-" >nul || (
  echo Invalid format - KB value not found
  exit /b
)
:parseVal2
set "val=!val:*-KB=!"
echo !val!|findstr /brc:"[0-9][0-9][0-9][0-9][0-9][0-9][0-9]-" >nul || goto :parseVal2
set "val=KB!val:~0,7!"
echo val=!val!
exit /b 
```

***编辑***

我不确定你做了什么来接受 6 位数字，但以下正则表达式将适用于任何长度的数字。

对于第一个正则表达式：`findstr /rc:"-KB[0-9]*-"`
对于第二个正则表达式：`findstr /brc:"[0-9]*-"`

然后在不知道长度的情况下，可以使用以下任一方法来提取数字：

```
for /f "delims=-" %%A in ("!val!") do set "val=KB%%A" 
```

或者

```
set val=KB%val:-=&REM %" 
```

# android - Android Ndk（未找到 xxxxx 的实现）

> ID：11769436
> 
> 赞同：1
> 
> 时间：2012-08-02T00:25:07.787
> 
> 标签：android, android-ndk, java-native-interface, unsatisfiedlinkerror

我试图在我的应用程序中实现一个本地库。但无论我尝试什么，我都会不断出错。所以我寻求一点帮助！

lib 的函数以 java 方式存储在此类中：

```
public class CamLib {

static{
    System.loadLibrary("leifdev_com_WaveNet_CamLib");
}
public static native void getSobel(byte[] frame, int width, int height, IntBuffer diff);

} 
```

并且正在像这样加载：

```
 CamLib.getSobel(mFrame, mFrameSize.width, mFrameSize.height, mFrameDiff); 
```

头文件由 javah 自动生成，如下所示：

```
 /* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
#include <string.h>
#include <android/log.h>
/* Header for class leifdev_com_WaveNet_CamLib */

#ifndef _Included_leifdev_com_WaveNet_CamLib
#define _Included_leifdev_com_WaveNet_CamLib
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     leifdev_com_WaveNet_CamLib
 * Method:    getSobel
 * Signature: (J)J
 */
JNIEXPORT void JNICALL Java_leifdev_com_WaveNet_CamLib_getSobel
  (JNIEnv *, jclass,
        jbyteArray , jint , jint , jobject );

#ifdef __cplusplus
}
#endif
#endif 
```

函数本身来自教程，所以我假设它可以工作，它看起来像这样：

```
 #include "leifdev_com_WaveNet_CamLib.h"

#define LOGTAG "Sobel_Native"

JNIEXPORT void JNICALL Java_leifdev_com_WaveNet_CamLib_getSobel(
JNIEnv *env, jclass c,
jbyteArray frame, jint width, jint height, jobject diff)
{
jboolean framecopy;
jint *dbuf = (jint*)((*env)->GetDirectBufferAddress(env, diff));
jbyte *fbuf = (*env)->GetByteArrayElements(env, frame, &framecopy);
int x, y, maxx=width-1, maxy=height-1, p=width+1, px, py, ps;

for(y=1; y<maxy; y++, p+=2)
{
    for(x=1; x<maxx; x++, p++)
    {
        px = fbuf[p+width+1]-fbuf[p+width-1]+fbuf[p+1]+fbuf[p+1]-fbuf[p-1]-fbuf[p-1]+fbuf[p-width+1]-fbuf[p-width-1];
        py = fbuf[p-width-1]+fbuf[p-width]+fbuf[p-width]+fbuf[p-width+1]-fbuf[p+width-1]-fbuf[p+width]-fbuf[p+width]-fbuf[p+width+1];
        if(px<0) px=-px; if(py<0) py=-py;
        ps=px+py; if(ps>95) ps=255; if(ps<=95) ps=0;
        dbuf[p] = (ps<<24)|(ps<<16)|(ps<<8)|ps;

    }
}
} 
```

我假设这些是最重要的 logcat 消息：

```
 08-02 02:07:17.204: D/dalvikvm(15767): No JNI_OnLoad found in /data/data/leifdev.com/lib/libleifdev_com_WaveNet_CamLib.so 0x41a02998, skipping init
 08-02 02:07:17.204: W/dalvikvm(15767): No implementation found for native Lleifdev/com/CamLib;.getSobel ([BIILjava/nio/IntBuffer;)V
 08-02 02:07:17.204: D/AndroidRuntime(15767): Shutting down VM
 08-02 02:07:17.204: W/dalvikvm(15767): threadid=1: thread exiting with uncaught exception (group=0x40c631f8)
 08-02 02:07:17.219: V/Camera-JNI(15767): dataCallback(16, 0x7f5778)
 08-02 02:07:17.224: V/Camera-JNI(15767): copyAndPost: off=0, size=1036800
 08-02 02:07:17.224: V/Camera-JNI(15767): Allocating callback buffer
 08-02 02:07:17.334: E/AndroidRuntime(15767): FATAL EXCEPTION: main
 08-02 02:07:17.334: E/AndroidRuntime(15767): java.lang.UnsatisfiedLinkError: getSobel
 08-02 02:07:17.334: E/AndroidRuntime(15767):   at leifdev.com.CamLib.getSobel(Native Method) 
```

（抱歉拼写错误，它真的来晚了。）

我已经在这个阶段停留了几天，我认为这与在本机头文件中使用 jclass 而不是 jobject 有关，但我真的找不到任何文档。因此，如果你们中的任何一位 ndk 的黑巫师可以帮助我，我会非常高兴！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T01:42:03.467

LogCat 说你的 CamLib 类应该在`leifdev.com`包中，但你的 JNI 函数希望它在`leifdev.com.WaveNet`

所以将你的 JNI 函数重命名为`Java_leifdev_com_CamLib_getSobel`

# yii - 如何在 Yii 模型中轻松测试文件上传？

> ID：11769444
> 
> 赞同：1
> 
> 时间：2012-08-02T00:26:21.087
> 
> 标签：yii, phpunit

我有一个附加了 ImageARBehavior 的模型，我想用单元测试对其进行测试。目前，由于需要该文件，我什至无法保存模型，因为验证错误......（我可以不使用验证通过，但这不是重点......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:37:43.637

It seems to me, for this cases, is to use a Mock object. Although, of course is not the best option

# c# - 使用 C# 编写带有 Python 脚本的 Xbox 360 独立游戏

> ID：11769445
> 
> 赞同：1
> 
> 时间：2012-08-02T00:26:29.627
> 
> 标签：c#, python, xbox360

我不熟悉 C# 可以做什么，尤其是在 Xbox 360 游戏的上下文中，但是否可以从 Xbox 360 独立游戏中执行 Python 脚本？

我曾多次读到，您希望使用 C# 等更快的语言编写游戏图形和逻辑，然后使用 Python 作为快速迭代的脚本语言。这种东西可以在 Xbox 360 平台上开发吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:35:46.253

您应该能够使用[IronPython](http://ironpython.net/)从 .NET 使用 Python，并且它可以很好地与其他 .NET 语言（包括 C#）集成。但是，Xbox 360 使用 .NET Compact Framework，IronPython 目前似乎不支持该框架，而且实现起来似乎并不简单。所以不幸的是，目前似乎没有任何方法可以在 Xbox 360 上使用 Python，至少没有获得完整的 Xbox Live Arcade 许可证，而不是针对 XBLIG，它允许您使用本机代码以及.NET Compact Framework（.NET CF 是 XBLIG 标题的唯一选择）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:39:17.297

好吧，尽管 C++ 是游戏行业的首选语言，但我已经看到使用 XNA 框架用 C# 编写的非常好的游戏。就您的脚本问题而言，我相信暴雪在 WoW 等游戏中使用 Lua 作为 UI。但是回到您的问题，可以将 Python 集成到 C#，有一个 Python 编程语言的开源实现，它与称为 IronPython 的 .NET 框架紧密集成。

# php - 动态加载的缩略图图像显示其他缩略图全尺寸图像而不是它自己的（使用 javascript 悬停效果）

> ID：11769446
> 
> 赞同：0
> 
> 时间：2012-08-01T22:30:21.957
> 
> 标签：php, html, css, javascript, mysql

我的知识水平：我刚刚开始自学 PHP 和 Dreamweaver，我在 2 天前观看了有关如何使用 Dreamweaver 构建数据驱动网站的视频教程。

我的目标：创建一个基本上是一个动态表的页面，它有 6 列和 20 行

```
column1        | column2         | column3   | column4  | column5 | column 6
50px thumbnail | ad post subject | gender    | location | age     | date of post
  "                 "                "           "         "           "
  "                 "                "           "         "           "
  "                 "                "           "         "           "
  "                 "                "           "         "           " 
```

我的问题：到目前为止，我已经成功地通过从 mysql db 中提取行来填充表，并且 column1 中的缩略图也在动态加载。问题是，因为 50pxby50px 缩略图（实际上是 /images 文件夹中更大的 jpg，但我认为是由 CSS 或 HTML 调整大小）非常小，所以我决定当用户悬停时放大图像光标在它上面。我在这里找到了一个可以很好地实现这一点的javascript脚本-http: [//www.dynamicdrive.com/dynamicindex4/imagetooltip.htm](http://www.dynamicdrive.com/dynamicindex4/imagetooltip.htm)我已经设法按照说明正确配置了所有这些。但是我确实需要进行一些实验，因为给出的示例不是动态图像（示例是`tooltips[0]=["images/examplepic.jpg"]`，而我的情况是这样的

```
tooltips[0]=["images/<?php echo $row_qDisplayAds['image1']; ?>"] 
```

在设法找出正确的路径和回显语法应该是什么之后，我尝试在浏览器中预览它并且它起作用了，即当我将鼠标悬停在第一行的缩略图上时，第 1 行中的缩略图的全尺寸版本显示。但是，当我将鼠标悬停在第 2 行的缩略图上，它也会在第 1 行显示完整大小的缩略图。当您将鼠标悬停在表格的所有 20 行中的所有其他缩略图上时，您可能已经猜到了，会显示相同的全尺寸图片。因此，唯一在悬停时显示其相应全尺寸图像的缩略图是第 1 行。所有其他缩略图不显示它们自己的全尺寸图像，而是以全尺寸显示第一行缩略图。

这是我的 index.php 页面的完整代码。

```
<?php virtual('/myfirstsite/Connections/conn_firstdynamic.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

mysql_select_db($database_conn_firstdynamic, $conn_firstdynamic);
$query_qDisplayAds = "SELECT category, topic, `date`, age, location, image1 FROM ads ORDER BY idno DESC";
$qDisplayAds = mysql_query($query_qDisplayAds, $conn_firstdynamic) or die(mysql_error());
$row_qDisplayAds = mysql_fetch_assoc($qDisplayAds);
$totalRows_qDisplayAds = mysql_num_rows($qDisplayAds);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<link rel="stylesheet" type="text/css" href="style.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<link rel="stylesheet" type="text/css" href="ddimgtooltip.css" />

</head>

<body>

    <script type="text/javascript">
    var ddimgtooltip={

        tiparray:function(){
            var tooltips=[]
            //define each tooltip below: tooltip[inc]=['path_to_image', 'optional desc', optional_CSS_object]
            //For desc parameter, backslash any special characters inside your text such as apotrophes ('). Example: "I\'m the king of the world"
            //For CSS object, follow the syntax: {property1:"cssvalue1", property2:"cssvalue2", etc}

            tooltips[0]=["images/<?php echo $row_qDisplayAds['image1']; ?>"]

            return tooltips //do not remove/change this line
        }(),

        tooltipoffsets: [20, -30], //additional x and y offset from mouse cursor for tooltips

        //***** NO NEED TO EDIT BEYOND HERE

        tipprefix: 'imgtip', //tooltip ID prefixes

        createtip:function($, tipid, tipinfo){
            if ($('#'+tipid).length==0){ //if this tooltip doesn't exist yet
                return $('<div id="' + tipid + '" class="ddimgtooltip" />').html(
                    '<div style="text-align:center"><img src="' + tipinfo[0] + '" /></div>'
                    + ((tipinfo[1])? '<div style="text-align:left; margin-top:5px">'+tipinfo[1]+'</div>' : '')
                    )
                .css(tipinfo[2] || {})
                .appendTo(document.body)
            }
            return null
        },

        positiontooltip:function($, $tooltip, e){
            var x=e.pageX+this.tooltipoffsets[0], y=e.pageY+this.tooltipoffsets[1]
            var tipw=$tooltip.outerWidth(), tiph=$tooltip.outerHeight(), 
            x=(x+tipw>$(document).scrollLeft()+$(window).width())? x-tipw-(ddimgtooltip.tooltipoffsets[0]*2) : x
            y=(y+tiph>$(document).scrollTop()+$(window).height())? $(document).scrollTop()+$(window).height()-tiph-10 : y
            $tooltip.css({left:x, top:y})
        },

        showbox:function($, $tooltip, e){
            $tooltip.show()
            this.positiontooltip($, $tooltip, e)
        },

        hidebox:function($, $tooltip){
            $tooltip.hide()
        },

        init:function(targetselector){
            jQuery(document).ready(function($){
                var tiparray=ddimgtooltip.tiparray
                var $targets=$(targetselector)
                if ($targets.length==0)
                    return
                var tipids=[]
                $targets.each(function(){
                    var $target=$(this)
                    $target.attr('rel').match(/\[(\d+)\]/) //match d of attribute rel="imgtip[d]"
                    var tipsuffix=parseInt(RegExp.$1) //get d as integer
                    var tipid=this._tipid=ddimgtooltip.tipprefix+tipsuffix //construct this tip's ID value and remember it
                    var $tooltip=ddimgtooltip.createtip($, tipid, tiparray[tipsuffix])
                    $target.mouseenter(function(e){
                        var $tooltip=$("#"+this._tipid)
                        ddimgtooltip.showbox($, $tooltip, e)
                    })
                    $target.mouseleave(function(e){
                        var $tooltip=$("#"+this._tipid)
                        ddimgtooltip.hidebox($, $tooltip)
                    })
                    $target.mousemove(function(e){
                        var $tooltip=$("#"+this._tipid)
                        ddimgtooltip.positiontooltip($, $tooltip, e)
                    })
                    if ($tooltip){ //add mouseenter to this tooltip (only if event hasn't already been added)
                        $tooltip.mouseenter(function(){
                            ddimgtooltip.hidebox($, $(this))
                        })
                    }
                })

            }) //end dom ready
        }
    }

    //ddimgtooltip.init("targetElementSelector")
    ddimgtooltip.init("*[rel^=imgtip]")
    </script>

    <table id="noticeboard">
      <?php do { ?>
        <tr  class="rowheight">
          <td class="cellheight"><img src="images/<?php echo $row_qDisplayAds['image1']; ?>" alt="" rel='imgtip[0]' style='width:50px;height:50px'/></td>
          <td class="cellheight"><?php echo $row_qDisplayAds['subject']; ?></td>
          <td class="cellheight"><?php echo $row_qDisplayAds['gender']; ?></td>
          <td class="cellheight"><?php echo $row_qDisplayAds['age']; ?></td>
          <td class="cellheight"><?php echo $row_qDisplayAds['location']; ?></td>
          <td class="cellheight"><?php echo $row_qDisplayAds['date']; ?></td>
        </tr>
        <?php } while ($row_qDisplayAds = mysql_fetch_assoc($qDisplayAds)); ?>
    </table>

    </body>
    </html>
    <?php
    mysql_free_result($qDisplayAds);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:13:06.417

您将需要遍历数据并将图像分配给每个索引的工具提示

```
tiparray:function(){
        var tooltips=[];

        <?php 
        $index = 0;
        do { 
        ?>
        tooltips[<?php echo $index++;?>]=["images/<?php echo $row_qDisplayAds['image1']; ?>"];
        <?php 
        } while ($row_qDisplayAds = mysql_fetch_assoc($qDisplayAds)); 
        mysql_data_seek($qDisplayAds,0);
        ?>

        return tooltips //do not remove/change this line
    }(), 
```

此外，您还需要重置 mysql 记录集的内部数据指针（回到第 1 行），因为您正在使用 mysql_data_seek 再次使用它。

您还需要将缩略图之间的链接应用到正确的全屏版本。做这个。

```
<table id="noticeboard">
  <?php 
    $index = 0;
    while ($row_qDisplayAds = mysql_fetch_assoc($qDisplayAds)) { ?>
    <tr  class="rowheight">
      <td class="cellheight"><img src="images/<?php echo $row_qDisplayAds['image1']; ?>" alt="" rel='imgtip[<?php echo $index++;?>]' style='width:50px;height:50px'/></td>
      <td class="cellheight"><?php echo $row_qDisplayAds['subject']; ?></td>
      <td class="cellheight"><?php echo $row_qDisplayAds['gender']; ?></td>
      <td class="cellheight"><?php echo $row_qDisplayAds['age']; ?></td>
      <td class="cellheight"><?php echo $row_qDisplayAds['location']; ?></td>
      <td class="cellheight"><?php echo $row_qDisplayAds['date']; ?></td>
    </tr>
    <?php }; ?>
</table> 
```

javascript代码处理链接。您需要做的就是更新 rel='imgtip[0]' 以将 20 张图像从 0 计数到 19。

# facebook - 链接时出现 Facebook 错误：如何解决？

> ID：11769449
> 
> 赞同：0
> 
> 时间：2012-08-02T00:27:00.340
> 
> 标签：facebook, twitter

你如何禁用它？我刚刚在 FB 上创建了一个页面（今天），当我试图将我的 Twitter 帐户链接到该页面时出现此错误。

“错误：此端点已被弃用。要暂时重新启用它，您可以禁用“august_2012”平台迁移。它将在 2012 年 8 月 1 日永久禁用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:00:38.787

这是一个推特问题。facebook 的 twitter 应用程序尚未更新到新的 iFrames 框架，仍然依赖于 FBML 框架。因此，我们必须等到应用程序更新。上面提供的解决方案仅在 twitter 应用程序的开发人员启用该选项时才有效。你可以在这里阅读更多：http: [//technoritz.com/post/28770685151/this-is-not-a-facebook-problem-it-is-a-twitter](http://technoritz.com/post/28770685151/this-is-not-a-facebook-problem-it-is-a-twitter)

以下是来自推特的官方回复：[https ://twitter.com/Support/statuses/231138059071156225](https://twitter.com/Support/statuses/231138059071156225)

# c# - MDI 母公司名称

> ID：11769450
> 
> 赞同：0
> 
> 时间：2012-08-02T00:27:02.550
> 
> 标签：c#, parent, mdi

不知道是不是我弄的乱七八糟……

我创建了一个 MDI 父级：

```
namespace APRSTW
    {
    static class Program
        {
        [STAThread]
        static void Main()
            {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MainAPRSTW()); //<= key call
            }
        }
    } 
```

在 MainAPRSTW.cs 中，您会发现这个....

```
namespace APRSTW
    {
    public partial class MainAPRSTW : Form
        {......lots of stuff here, and the MDI parent happens here.......} 
```

现在我们有了父 MDI 表单。接下来是开始创建子表单过程的类。

```
namespace TeleDecoder
    {
    class TDecoder
        {......} 
```

TDecoder 的一个新实例也创建了一个如下形式的新实例

```
namespace ChildNode
    {
    public partial class Node : Form
        {......} 
```

用代码

```
 ChildNodeForm = new Node();
      ChildNodeForm.MdiParent = ?????????; 
```

问题是，我用什么来表示“？？？？？？？？？” ?

或者，我需要进行一些名称更改吗？

我希望我能很好地理解这一点。

查克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:42:20.770

当你这样做时：

```
Application.Run(new MainAPRSTW()); 
```

您需要存储对该表单的引用：

```
public static Form mainForm;//at top of module
mainForm = new MainAPRSTW();
Application.Run(mainForm); 
```

然后你可以做

```
ChildNodeForm.MdiParent = mainForm; 
```

# jquery - 同位素分类：为什么我的砌体布局消失了？

> ID：11769455
> 
> 赞同：1
> 
> 时间：2012-08-02T00:27:39.740
> 
> 标签：jquery, jquery-isotope

我已经在我正在构建的站点中实现了 jQuery Isotope，但我遇到了一个奇怪的问题。最初的砌体布局工作正常。我有一个调用“随机播放”功能的随机按钮，它完全符合您的预期。

*不起作用*的按钮是实现按图像标题排序的按钮。排序本身按其应有的方式工作，这意味着项目以正确的顺序结束，*但*砌体布局中断，所有图像都在容器左侧的单行中结束。

下面是：我的初始同位素加载函数、我的工作“shuffle”函数和我损坏的“sortBy”函数。

```
var $container = jQuery('#isotopegallery');
$container.imagesLoaded( function(){
    $container.isotope({
        itemSelector : '.photo',
        masonry: {
            coumnWidth: 270,
            gutterWidth: 10
        }
    });
});

jQuery('#randomize').click(function(){
    $container.isotope( 'shuffle' );
});

//Isotope sort data
$container.isotope({
  getSortData : {
    title : function ( $elem ) {
      return $elem.find('.title').text();
    }
  }
});

jQuery('#sortByTitle').click(function(){
    $container.isotope({ sortBy : 'title'});    
}); 
```

**编辑：**我已经用我正在做的简化版本构建了一个 jsFiddle，当然，它在那里工作得非常好。我正在寻找我的实际项目中的不同之处。jsFiddle 链接如下：

[http://jsfiddle.net/NXNZH/](http://jsfiddle.net/NXNZH/)

# c# - 在 url 输入中使用 '/' 字符获取输入

> ID：11769460
> 
> 赞同：0
> 
> 时间：2012-08-02T00:29:00.190
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在尝试使用 Asp.Net MVC 4 创建一个上传中心应用程序。我想要一个这样的 url：`http://site.com/user/{username}/{path}`并且路径是这样的`/dir1/subdir2/file.txt`，我返回它（或编辑它等）

但我不知道如何允许`/`在 url 中有字符？因为 Mvc 抛出了一个安全异常。有谁能够帮助我？

**目录不是物理的。我将所有文件保存在一个目录中，并将它们的属性保存在数据库中**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:50:55.890

您正在寻找的功能称为“通配符路由”（有关详细信息，请参阅重复[的文件路径作为 MVC 路由参数](https://stackoverflow.com/questions/323397/file-path-as-mvc-route-argument)）。

```
 "http://site.com/user/{username}/{*path}" 
```

# facebook - 无法在 Facebook 应用程序中访问 ViewBag 数据

> ID：11769467
> 
> 赞同：1
> 
> 时间：2012-08-02T00:30:04.010
> 
> 标签：facebook, asp.net-mvc-3

我有一个适合我的 Facebook 应用程序。我基本上有一个应用程序，一旦用户喜欢该应用程序，他们就可以继续使用该应用程序。使用 Facebook Javascript API，它会查看用户是否已登录，如果不允许他们登录。我会传递他们是否“喜欢”来自控制器的页面，以及他们的语言（英语或西班牙语）通过 ViewBag 对象到视图。

这在本地和登台服务器都有效；但是我必须在视图中禁用类似检查，但是语言和类似是在视图包中传递的。

我将语言放在视图中，例如

`<p>The user's language is @ViewBag.lang</p>`

和

`<p>They like the page? @ViewBag.likes`

就像我说的，它在本地和登台服务器上都有效；但没有任何东西传递到 Facebook 应用程序。我有条件检查以查看用户是否喜欢 javascript 中的页面，例如：

`var likes = @ViewBag.likes`

在 Facebook 中，使用控制台我看到数据没有像前面提到的我尝试做的调试那样传递。

我对 MVC 很陌生；我需要启用什么才能使其通过 Facebook 工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:06:56.313

问题是 Facebook 画布发送了一个初始 POST，这是命中我的 POST 而不是设置这些值的 GET。看这里：

[Facebook 是否会通过 Post 请求打开画布应用程序？它对我的 MVC 操作造成了严重破坏](https://stackoverflow.com/questions/5353261/does-facebook-open-a-canvas-app-with-a-post-request-its-causing-havoc-with-my)

谢谢！

# python - rpy2: Convert FloatVector or Matrix back to a Python array or list?

> ID：11769471
> 
> 赞同：9
> 
> 时间：2012-08-02T00:30:42.147
> 
> 标签：python, rpy2

I'm using rpy2 and I have this issue that's bugging me: I know how to convert a Python array or list to a FloatVector that R (thanks to rpy2) can handle within Python, but I don't know if the opposite can be done, say, I have a FloatVector or Matrix that R can handle and convert it back to a Python array or list...can this be done?

Thanks in advance!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-05-03T09:56:07.880

This worked like a charm:

```
vector=numpy.asarray(vector_R) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T00:57:53.283

Found the answer myself :-). Suppose vector_R is a FloatVector. To convert it back to Python you need to do:

```
import rpy2.robjects.numpy2ri as rpyn
vector=rpyn.ri2numpy(vector_R) 
```

And that's it! "vector" is now a Numpy array.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-19T06:42:07.443

In the latest version of rpy2, you can simply do this in a direct way:

`import numpy as np array=np.array(vector_R)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-27T16:02:57.983

```
import rpy2.robjects.numpy2ri as rpyn
vector=rpyn.ri2py(v) 
```

Does it in the new rpy2, where v is the vector

# perl - 如何在三个不同的分隔符上拆分然后 ucfirst 每个结果 []？

> ID：11769472
> 
> 赞同：2
> 
> 时间：2012-08-02T00:30:44.257
> 
> 标签：perl, split, delimiter

我试图弄清楚如何在没有一百万行代码的情况下拆分具有三个可能的分隔符（或没有分隔符）的字符串，但是对于像我这样的人来说，代码仍然是易读的。

字符串中有许多可能的组合。

```
 this-is_the.string
    this.is.the.string
    this-is_the_string
    thisisthestring 
```

字符串中没有空格，也没有以下字符：

```
 ~`!@#$%^&*()+=\][{}|';:"/?>,<. 
```

该字符串已被剥离，但：

```
0-9
a-Z
-
_ 
. 
```

也没有连续的点、破折号或下划线。

我希望结果显示为 Result：

```
This Is The String 
```

我真的很难做到这一点。我相信我需要使用哈希，即使经过数小时的反复试验，我也没有掌握这个概念。

我很困惑我可能会在多个分隔符上拆分一个字符串，其中分隔符可以是任何顺序和/或三种不同类型（或根本没有）并保持结果的顺序！

有什么可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T00:54:24.943

将字符串[拆分为单词，将单词](http://perldoc.perl.org/functions/split.html)[大写](http://perldoc.perl.org/functions/ucfirst.html)，然后在单词之间插入空格时[连接](http://perldoc.perl.org/functions/join.html)单词。

它可以非常简洁地编码：

```
my $clean = join ' ', map ucfirst lc, split /[_.-]+/, $string; 
```

如果你只想打印出结果，你可以使用

```
use feature qw( say );
say join ' ', map ucfirst lc, split /[_.-]+/, $string; 
```

或者

```
print join ' ', map ucfirst lc, split /[_.-]+/, $string;
print "\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T01:05:34.320

*使用全局正则表达式来收集不是*点、破折号或下划线的所有字符序列很简单。

之后，[`lc`](http://perldoc.perl.org/functions/lc.html)将小写每个字符串[`ucfirst`](http://perldoc.perl.org/functions/ucfirst.html)并将其大写。对数组进行字符串化将在元素之间插入空格。

```
for ( qw/ this-is_the.string this.is.the.string this-is_the_string / ) {
  my @string = map {ucfirst lc } /[^-_.]+/g;
  print "@string\n";
} 
```

**输出**

```
This Is The String
This Is The String
This Is The String 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T00:37:51.740

*“分隔符可以在任何地方和/或三种不同的类型（或根本没有）”* ......您需要一个分隔符来拆分字符串，您可以使用[正则表达式](http://www.regular-expressions.info/perl.html)为[拆分](http://perldoc.perl.org/functions/split.html)函数定义多个分隔符

```
my @parts = split(/[-_\.]/, $string);
print ucfirst "$_ " foreach @parts;
print "\n" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T00:40:26.357

这是一个适用于除最后一个测试用例之外的所有人的解决方案。在没有分隔符的情况下拆分字符串非常困难，您需要有一个可能的单词列表，即使那样它也容易出错。

```
#!/usr/bin/perl

use strict;
use warnings;

my @strings = qw(
    this-is_the.string
    this.is.the.string
    this-is_the_string
    thisisthestring
);

foreach my $string (@strings) {
    print join(q{ }, map {ucfirst($_)} split(m{[_.-]}smx,$string)) . qq{\n};
} 
```

这是循环的另一种选择，它将所有内容拆分为单独的语句以使其更易于阅读：

```
foreach my $string (@strings) {
    my @words = split m{[_.-]}smx, $string;
    my @upper_case_words = map {ucfirst($_)} @words;
    my $string_with_spaces = join q{ }, @upper_case_words;
    print $string_with_spaces . qq{\n};
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T04:08:24.627

并证明仅仅因为你可以，并不意味着你应该：P

```
$string =~ s{([A-Za-z]+)([_.-]*)?}{ucfirst(lc("$1")).($2?' ':'')}ge; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T00:43:02.737

除了最后一种可能性：

```
use strict;
use warnings;

my $file;
my $newline;

open $file, "<", "testfile";
while (<$file>) {
    chomp;
    $newline = join ' ', map ucfirst lc, split /[-_\.]/, $_;
    print $newline . "\n";
} 
```

# jdbc - Hive JDBC getConnection 不返回

> ID：11769477
> 
> 赞同：5
> 
> 时间：2012-08-02T00:31:18.587
> 
> 标签：jdbc, hadoop, hive

我正在关注 hive JDBC 教程。我无法让它工作。当它试图获得连接时，它只是挂起。它也不报告任何错误。我确定 Hive 服务器正在运行。有什么帮助吗？

```
public class HiveJdbcClient {
  private static String driverName = "org.apache.hadoop.hive.jdbc.HiveDriver";
  public static void main(String[] args){
      try {
      Class.forName(driverName);
    } catch (ClassNotFoundException e) {
           e.printStackTrace();
      System.exit(1);
    }

    try{
        Connection con = DriverManager.getConnection("jdbc:hive://localhost:10000/default", "", "");
        System.out.println("got the connection");

    }catch(SQLException e){
        e.printStackTrace();
    }
  }
} 
```

网络统计的输出：

```
$ sudo netstat -anlp | grep 10000
Password:
tcp        0      0 0.0.0.0:10000               0.0.0.0:*                   LISTEN      27738/java
tcp      107      0 127.0.0.1:10000             127.0.0.1:45910             ESTABLISHED 27738/java
tcp        0      0 127.0.0.1:33665             127.0.0.1:10000             ESTABLISHED 24475/java
tcp        0      0 127.0.0.1:45910             127.0.0.1:10000             ESTABLISHED 7445/java
tcp      107      0 127.0.0.1:10000             127.0.0.1:33665             ESTABLISHED 27738/java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:22:23.160

Naresh：尝试停止 triffserver，然后从终端移至**HIVE_HOME/bin**目录，然后使用**./hive --service hiveserver 10000 &**命令启动 hive trift 服务器。然后尝试运行程序。按照 hive 客户端 wiki 示例创建表。然后在下一步中执行显示表查询。执行此步骤后，让我们知道结果。之后我们可以进行讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-05T21:48:50.467

您可以执行以下操作来查明发生挂起的位置。这是我在断开的 Hive JDBC 连接中跟踪它的示例。请注意，这不是针对任何通用配置单元连接挂起错误的具体解决方案。

**这是对以下问题的回答：“我怎样才能找到我的 JDBC 配置单元连接挂起的位置？”**

使这难以追踪的是 JDBC 动态调用。相反，您可以手动创建 HiveConnection() 类。这使您可以直接在代码中添加一些跟踪，以查看挂起的位置。

我通过执行以下操作跟踪了这一点。

*** 使用 LOG4J ***

thrift 和其他 JDBC hive 类在连接时使用 log4j，如果您打开 DEBUG 日志记录，您可以看到细粒度的错误。您可以通过添加轻松做到这一点

`BasicConfigurator.configure()`

到您的客户端应用程序。无论如何，这样做让我发现这似乎在 SASL 传输层中停滞不前。我想这可能与安全有关，但我认为安全错误仍然会返回，而不是挂起......所以我认为这可能值得一个 JIRA。我粘贴了一个后续问题：

[如何跟踪失败 ot TSaslTransport (hive 相关)](https://stackoverflow.com/questions/22894325/how-can-i-trace-the-failure-ot-tsasltransport-hive-related)

***另一种方法***

1）您可以从 github 或任何地方获取“HiveConnection”类的副本，然后实例化一个新的：

`String url=String.format("jdbc:hive2://%s:%s/default", server, port) Properties p = new Properties(); p.setProperty("host", con); Connection jdbc = new HiveConnection(url,p);`

然后，您可以将调试器挂钩或日志语句添加到 HiveConnection() 类。

Ulitmately，当我遇到此错误时，我将其追溯到：

`openTransport`

最终创造了一个

`org.apache.thrift.transport.TSaslClientTransport`

实例。

并且挂起发生在这个代码块中：

`try { System.out.println(".....1 carrying on... attempting to open. " + transport.getClass().getName()); transport.open(); System.out.println("done open."); } catch (TTransportException e) { System.out.println("2 fail ."); e.printStackTrace(); throw new SQLException("Could not establish connection to " + uri + ": " + e.getMessage(), " 08S01"); }`

仅供参考，我已经发布了有关我的连接失败原因的后续信息。它也可能与您的有关......[我如何追踪 TSaslTransport 的失败（与蜂巢相关）](https://stackoverflow.com/questions/22894325/how-can-i-trace-the-failure-ot-tsasltransport-hive-related)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T07:53:13.547

我有同样的问题/检查这个参数：

```
driverName = "org.apache.hive.jdbc.HiveDriver"

con = DriverManager.getConnection("jdbc:hive2://192.168.1.93:10000/default", "", ""); 
```

# jquery - jQuery：使用 asp.net 母版页时不加载图像

> ID：11769483
> 
> 赞同：0
> 
> 时间：2012-08-02T00:32:40.217
> 
> 标签：jquery, image, hover, master-pages, contentplaceholder

我坚持这一点，这很奇怪。

首先，当我将它放在空白的 .aspx 页面上时，这部分效果很好。鼠标悬停时，弹出警报消息，然后图像变为蓝色。

```
<script type="text/javascript" src="../../Scripts/SelectCanvas.js"></script>
<asp:Image ID="imageMain" runat="server" ClientIDMode="Static" Height="300px" 
    Width="300px" /> 
```

* * *

（jQuery 代码在 SelectCanvas.js 中）

```
$("#imageMain").hover(
function () {
    alert("main");
    $("#imageMain").prop("src", "../../images/selectCanvas/blue.gif");
}); 
```

我将相同的图像控件放在使用 masterPage 的 .aspx 文件中。两个 .aspx 文件都在同一个目录中，并且都引用同一个 jQuery 文件。但是，在鼠标悬停时，会弹出警报消息，但图像不会变成蓝色...... ???

我在这上面花了 1/2 天，对这个怪癖不知所措......非常感谢提示......谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:39:49.993

`$(el).attr("","");`不是`$(el).prop("","");`！_

你应该使用这个代码

```
$("#imageMain").hover(
function () {
    alert("main");
    $("#imageMain").attr("src", "../../images/selectCanvas/blue.gif");
}); 
```

jquery中没有任何`.prop()`方法。您可以使用 chrome 的检查元素工具并查看错误以找出错误所在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:21:04.173

@ahmadali： .prop() 工作......我把它留在我的代码中，它工作正常......

解决方案：

这很耗时，而且发现起来有点痛苦……哈哈……

我更改了虚拟路径（单击解决方案资源管理器中的网站/项目名称，虚拟路径位于属性框中）。

默认情况下，VS 使用项目名称：/myProject

我将其更改为：/

* * *

因此，为什么会出现警报消息（jQuery 正在工作）但找不到图像是有道理的。这是因为虚拟路径搞砸了图像的路径。

我仍然不明白为什么这是一个问题（使用 MasterPage 时），而在不使用 MasterPage 时它不是问题。但在这一点上，我很高兴能克服这个障碍...... ;-x

# c# - 如何将 CRM 2011 早期绑定数据上下文标记为内部？

> ID：11769486
> 
> 赞同：1
> 
> 时间：2012-08-02T00:32:56.530
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

我正在使用 CRMSVCUTIL.exe 针对我的 CRM 2011 On Premise 实例生成早期绑定数据上下文。我注意到在生成的代码中上下文被标记为公开。我希望这是内部的，以便从消费层隐藏上下文。打开生成的文件并手动更改访问修饰符很容易，但是如果有设置可以代替，我希望它是自动的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:18:20.947

没有专门的命令行参数或设置；但是，您可以使用命令行自动执行它，然后对其进行适当的修改。

[http://msdn.microsoft.com/en-us/library/ff681563.aspx](http://msdn.microsoft.com/en-us/library/ff681563.aspx)

# json - Dojo ItemFileWriteStore 不读取 JSON 服务器文件

> ID：11769488
> 
> 赞同：1
> 
> 时间：2012-08-02T00:33:04.270
> 
> 标签：json, dojo

我正在使用 Dojo，它是 dojo/data/ItemFileWriteStore 模块来读取本地服务器上的 JSON 数据文件。在我的 .js 文件中，我有

```
var myDataStore = new ItemFileWriteStore({
    url: "app/data/mydata.json",
    handleAs: "json",
    clearOnClose: true,
    urlPreventCache: true
}) 
```

这位于我的返回声明函数的 postCreate 函数中......所以：

```
 define([
    "dojo/_base/declare",
    "com/cayuse/base/_widget",
    "dojo/text!./templates/myform.html",
    ...    
    "dojo/data/ItemFileWriteStore",
    "dojo/store/DataStore",
    "dojo/store/Observable",
    "dojo/data/ObjectStore",
    "dojo/domReady!"
    ],
    function(declare, widget, template, ..., ItemFileWriteStore, DataStore, 
        Observable, ObjectStore){
        return declare("app.myform", widget, {
            templateString: template,

            postCreate: function(){

                domConstruct.create("link",{
                    type: "text/css",
                    rel: "stylesheet",
                    href: require.toUrl('dojox/form/resources/CheckedMultiSelect.css')
                }, document.getElementsByTagName("head")[0]);

                // data store
                var myDataStore = new ItemFileWriteStore({
                    url: "app/data/mydata.json",
                    handleAs: "json",
                    clearOnClose: true,
                    urlPreventCache: true
                })
                console.log(myDataStore);
            }
        });
    }
); 
```

我可以使用 IFWS 方法将您在上面看到的数据存储访问更改为

```
var myDataStore = dojo.xhrGet({
    url: "app/data/mydata.json",
    handleAs: "json",
    load: function(data, ioArgs){
         console.log(data);
    }
 }); 
```

它找到没有问题的文件。

这太奇怪了！关于这里出了什么问题的任何想法？

更新：这是我正在阅读的文件中的数据。我相信它符合 JSON 格式。如果没有，请告诉我。xhrGet 读得很好。

```
{ "identifier": "id",
    "label": "firstName",
    "items":[
     {"id":"0","firstName":"Robert","website":"www.barker.com","email":"robert@barker.com","bday":"1928-08-09","color":"Blue","toolkits":["Dojo","Moo"],"sendEmail":["on"],"format":"HTML"},
     {"id":"1","firstName":"Vanna","website":"www.white.com","email":"vanna@white.com","bday":"1968-07-23","color":"Green","toolkits":["Dojo","jQuery"],"sendEmail":["off"],"format":"Text"}
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:19:26.440

ItemFileWriteStore 要求将您的数据结构化为如下所示：

```
{ identifier: 'abbr',
  label: 'name',
  items: [
    { abbr:'ec', name:'Ecuador',           capital:'Quito' },
    { abbr:'eg', name:'Egypt',             capital:'Cairo' },
    { abbr:'sv', name:'El Salvador',       capital:'San Salvador' },
    { abbr:'gq', name:'Equatorial Guinea', capital:'Malabo' },
    { abbr:'er', name:'Eritrea',           capital:'Asmara' },
    { abbr:'ee', name:'Estonia',           capital:'Tallinn' },
    { abbr:'et', name:'Ethiopia',          capital:'Addis Ababa' }
]} 
```

那就是“标识符”是您的“ID”字段，“标签”是您的“标签”字段，然后是一个名为“项目”的数组中的所有对象。

[您可以在 ItemFileWriteStore 的文档](http://livedocs.dojotoolkit.org/dojo/data/ItemFileWriteStore)中查看它。如果您的 JSON 数据没有这样的结构，那么您最终可能会使用 IFWS 读取文件而实际上没有读取任何数据。

dojo 1.7 中的其他存储实现不需要这种结构，例如[内存](http://dojotoolkit.org/reference-guide/1.7/dojo/store/Memory.html)存储，您可以结合其他文件读取技术来实现相同的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T21:16:48.073

如果您的代码与您在上面发布的完全相同，那么解释器可能不喜欢您从 ItemFileWriteStore 分配中省略分号的事实。尝试添加';' 如下：

```
 // data store
            var myDataStore = new ItemFileWriteStore({
                url: "app/data/mydata.json",
                handleAs: "json",
                clearOnClose: true,
                urlPreventCache: true
            });
            console.log(myDataStore); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:57:20.903

尝试使用 dojo.data.ItemFileReadStore 来读取 json 数据文件，而不是 dojo/data/ItemFileWriteStore。

请注意，dojo.data.ItemFileWriteStore 用于写入 json 数据。

# haskell - 使用 putChar 后，haskell-mode 在同一行打印“* Main>”？

> ID：11769489
> 
> 赞同：1
> 
> 时间：2012-08-02T00:33:33.140
> 
> 标签：haskell, emacs, haskell-mode

代码：

```
main = do
  putChar 't'
  putChar 'e'
  putChar 'h' 
```

当我运行上述代码时，我得到了

```
*Main> main
teh*Main> 
```

但我期待

```
*Main> main
teh
*Main> 
```

我的问题：为什么**teh*Main**来而不是**teh**然后***Main**在另一行？

我正在使用带有haskell-mode的emacs23。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:00:00.063

`putChar c`仅将那个字符写入控制台。这就是它的目的。因此，除非您之后将换行符打印到控制台`putChar`，`putStr`否则无论是使用 还是其他任何方法，以下输出都会转到同一行。行为与 C 相同，或者如果您`cat`的文件没有尾随换行符。它无处不在。唯一可行的替代方案（检查每个输出是否以换行符结尾是不可行的）是在 ghci 或 shell 提示符之前无条件地输出换行符，这会导致许多烦人的空白行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T05:23:29.957

如果它*真的*困扰你，你总是可以定义

```
putCharLn :: Char -> IO ()
putCharLn c = do putChar c
                 putChar '\n' 
```

定义`main`如下：

```
main = do putChar 't'
          putChar 'e'
          putCharLn 'h' 
```

现在：

```
*Main> main
teh
*Main> 
```

# actionscript-3 - 我应该使用哪个版本的编译器？

> ID：11769490
> 
> 赞同：0
> 
> 时间：2012-08-02T00:33:35.827
> 
> 标签：actionscript-3, apache-flex, flex3

我正在使用 Flex3.6A 编译器的 Mac 上运行 Flex Builder。我一直在尝试使用 Date 对象，但它一直给我错误，即使我运行 Flex 文档中最基本的文件也是如此。例如，以下失败：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" minWidth="955" minHeight="600" creationComplete="init()">
<mx:Script>
    <![CDATA[
        private function init():void{
            var now:Date = new Date();
            trace(now)
        }
    ]]>
</mx:Script>
</mx:Application> 
```

我以前从未在 Mac 上遇到过这样的问题。我运行错误的编译器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:01:49.460

根据我对 SDK 版本的记忆：

```
3.6 is FP9
4.0 is FP10 and onwards
4.1 is FP10 and onwards
4.6 is FP11 
```

始终使用您可以使用的最高 sdk 版本。

您可以从以下位置下载 SDK：

```
http://www.adobe.com/devnet/flex/flex-sdk-download.html 
```

注意：GPU 加速为 FP11。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:26:38.563

至于使用不同版本的编译器本身与另一个版本的 SDK，这对于 Spark 或 MX 组件来说不一定是问题，较新的编译器应该是向后兼容的，例如我做了一个新的 Flex 4.6.0 项目并将 main.mxml 文件的基类更改为 mx:Application ，它编译并运行良好。一个明显的变化是默认主题看起来更像默认 spark 主题而不是旧的光环，尽管我猜你可以手动拉入旧样式定义，或者在你的情况下使用旧的 SDK swcs 你可能会自动得到这个.

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <s:Label text="Just a test"/>
</mx:Application> 
```

请发布您的特定错误，以获得更详细的反馈。一般来说，最好使用 SDK 附带的相同版本的编译器，因为这可能是所有东西都经过测试的，但在大多数情况下，我猜编译器是向后兼容的，MXML 和 AS3 的语法没有确实只添加了通过 spark 和 fx 命名空间的扩展，但我认为没有任何改变足以破坏向后兼容性（也就是说，如果编译器比 SDK 源更新，我相信它会工作，但反之亦然，特别是由于框架使用的 playerglobal.swc/flash 播放器版本更改）。

# svn - 颠覆合并校验和不匹配

> ID：11769496
> 
> 赞同：3
> 
> 时间：2012-08-02T00:34:42.950
> 
> 标签：svn, merge, checksum, mismatch

我在 SuSE 主机上使用 Subversion 1.6.17 尝试将单个分支合并到本地更新的工作副本中。我得到了合并的一部分，然后每次我尝试时它都会在同一个文件上停止：

```
svn: Checksum mismatch for 'path/to/javascript/files/myjavascriptfile.js':
    expected checksum:  685b3a63667d3eb4cc4a09ccc960ea2c
    actual checksum:    7c4dfb8a7065aa2c616a1680c1703914 
```

我检查了文件的 .svn/text-base/ 版本，md5sum 显示了正确的“预期”校验和，实际文件的 md5sum 也是如此。我什至检查了合并的源分支并在那里进行了 md5sum 处理，并且得到了相同的校验和。但是，当我尝试从源分支合并到目标分支的工作副本时，出现上述错误。如果我编辑文件并进行微不足道的更改，我可以毫无错误地提交它；它似乎只是不合作的合并过程。

我尝试了 rm'ing 文件夹和 svn update 重新填充它的技巧，我尝试了“编辑条目文件并更改为返回的实际校验和”方法，但都没有运气。我还在存储库上运行了 svnadmin 验证，没有错误。

我还检查了与文件及其文件夹相关联的 svn 属性，我看到的只是预期的 svn:mergeinfo 属性以及成功合并的先前修订版。

有人对下一步要尝试什么有任何建议吗？

提前致谢！

# java - 如何在Java中获取计算机品牌和型号

> ID：11769499
> 
> 赞同：0
> 
> 时间：2012-08-02T00:35:42.273
> 
> 标签：java

我正在尝试制作一个 Web 应用程序来检索计算机的品牌和型号......谁能引导我朝着正确的方向前进？我已经搜索了谷歌，但发现很少有关于它的东西。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:44:58.077

我认为您在这里吠叫错误的树...

在正确实施的网络浏览器中，来自网络应用程序的任何可执行代码都将在安全沙箱中运行，该安全沙箱（除其他外）可防止其访问用户计算机上的潜在敏感信息。计算机的品牌和型号可能很敏感。

即使您克服了这一点（例如，通过说服用户安装受信任的浏览器插件或小程序），您也会遇到问题，即没有跨平台的方法来确定用户计算机的品牌和型号。不同的操作系统以不同的方式处理此问题，可能需要管理员/root 权限才能获取此信息。

**更新**

截至 2020 年，您在用 Java 开发解决此问题的方法时遇到了更多障碍：

*   主流浏览器不再支持Java，也好几年没做了。Icedtea 插件是某些浏览器/操作系统的一个选项，但 Icedtea 并没有超过 Java 8。

*   Java 9+ 已在很大程度上从 Oracle Java 中删除了对 applet 和 Java webstart 的支持。

* * *

> 任何人都可以引导我朝着正确的方向前进。

好吧，鉴于浏览器中的 Java 是死技术，正确的方向可能是以下之一：

*   将您的应用程序重新实现为独立的 Java 应用程序。这使问题变得毫无意义。
*   更改您的应用程序，使其不需要知道用户的硬件平台是什么。

（你从来没有说过你为什么要这样做，我很难想象需要这种信息的合理理由。）

# iphone - 启动成功块时，__block weak 正在崩溃

> ID：11769504
> 
> 赞同：0
> 
> 时间：2012-08-02T00:36:37.303
> 
> 标签：iphone, objective-c, ios, ipad

我很难理解这一点：

```
__block __weak MyCell *weakSelf = self;
[NetworkManager profileImageForUser:id success ^(UIImage *image, NSString *userId){
       weakSelf.leftImageView.image = image;
}]; 
```

问题是，当 MyCell 被释放然后启动成功块时，它会崩溃，说发送到实例的选择器无法识别。我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:05:14.247

发生这种崩溃的原因是块没有保留weakSelf，这可能是在对象释放后异步执行的。

你为什么在这里使用__block？这是你的问题的原因。

__block 仅当您要从块内部修改相关对象时才需要。__block 还可以防止块保留对象的行为。由于您没有更改 weakSelf 的 VALUE （仅它的属性），因此不应使用 __block 以便块将保留对象并因此在需要时将其保存在内存中，从而防止此崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:14:33.097

你如何处理这个问题？您可以在使用它之前检查它的值`weakSelf`以确保它不是`nil`（因为您实际上已经说过您不希望它被保留，但`nil`如果对象被释放，它将被设置为）：

```
__weak MyCell *weakSelf = self;
[NetworkManager profileImageForUser:id success ^(UIImage *image, NSString *userId){
       if (weakSelf)
           weakSelf.leftImageView.image = image;
}]; 
```

或者只是放弃使用`weakSelf`和使用`self`（它将为您保留它直到块完成）：

```
[NetworkManager profileImageForUser:id success ^(UIImage *image, NSString *userId){
       self.leftImageView.image = image;
}]; 
```

无论哪种方式，都不要使用，`__block`因为您不会更改对象本身，而只是更改其属性。

# php - 如何从 SimpleXml 对象中获取值

> ID：11769505
> 
> 赞同：0
> 
> 时间：2012-08-02T00:36:43.393
> 
> 标签：php, simplexml

```
SimpleXMLElement Object ( 
  [results] => 2 
  [total_results] => 2 
  [plans] => SimpleXMLElement Object ( [plan] => Array ( [0] => SimpleXMLElement Object ( [id] => 1014 [type] => paid [name] => Silver [amount] => 1000.00 [interval] => 30 [notification_url] => http://www.google.com [free_trial] => 0 [occurrences] => 1 [num_customers] => 0 [status] => active ) [1] => SimpleXMLElement Object ( [id] => 1013 [type] => paid [name] => Gold [amount] => 500.00 [interval] => 30 [notification_url] => http://www.movebyu.com/ExpressEngine/index.php/?ACT=21 [free_trial] => 0 [occurrences] => 1 [num_customers] => 1 [status] => active ) ) ) 
), 
```

如何从这些中获取计划的价值，金额，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:46:13.530

通过 XPath

[http://php.net/manual/en/simplexmlelement.xpath.php](http://php.net/manual/en/simplexmlelement.xpath.php)

# activemq - 有人使用 LevelDB 存储进行 ActiveMQ 消息持久化吗？

> ID：11769508
> 
> 赞同：6
> 
> 时间：2012-08-02T00:36:52.123
> 
> 标签：activemq, leveldb

目前我们正在使用 KahaDB 存储在 ActiveMQ 中进行消息持久性，到目前为止效果很好。
根据 ActiveMQ5.6 的发行说明，`LevelDB`提供增强的性能。
有没有人试过usign LevelDB，如果是的话，你能提供利弊吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-15T14:13:03.223

[仅供参考：这是ActiveMQ LevelDB 存储](http://activemq.apache.org/leveldb-store.html)的官方文档的链接

缺点：

*   这是一家全新的商店，所以可能仍然存在一些错误。
*   LevelDB 索引偶尔需要“压缩”，这可能会阻止新的写入。
*   您不能像使用 KahaDB 一样删除索引并从数据文件中重建它
*   KahaDB 更优雅地处理磁盘损坏，尽可能恢复并丢弃损坏的记录。

优点：

*   附加大部分磁盘访问模式可提高旋转磁盘的性能。
*   磁盘同步次数少于 KahaDB
*   每条存储的消息需要插入更少的索引条目
*   将消息从磁盘加载到内存所需的索引查找更少
*   使用 Snappy 压缩来减少索引条目的磁盘大小
*   数据日志的可选 Snappy 压缩。
*   发送到复合目标仅将消息存储在磁盘上一次。
*   更快、更频繁的数据文件 GC。
*   有一个[“复制”变体](http://activemq.apache.org/replicated-leveldb-store.html)，它可以自我复制到“从”代理，以确保消息级别的 HA。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-01T08:24:05.513

我们已经在 NFS 上使用了两个月的 levelDB 存储（配置了标准文件锁定故障转移）。在过去的几周里，我们已经多次损坏存储，日志中没有错误......只是队列堆积，吞吐量非常低。要解决这个问题，我们唯一能做的就是扔掉商店，重新开始。

所以我们现在再次切换回旧的可靠的 KahaDB 存储。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T15:07:36.737

请参阅此链接：[https](https://github.com/fusesource/fuse-extra/tree/master/fusemq-leveldb#how-to-use-with-activemq-56) ://github.com/fusesource/fuse-extra/tree/master/fusemq-leveldb#how-to-use-with-activemq-56 leveldb 与 kahadb 有一个小的比较。

我目前正在一个具有高消息吞吐量的系统上尝试它，并且我已经看到了更好的结果。我仍然需要看看它是否稳定，但到目前为止还不错。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-09T14:53:32.247

为 LevelDB 做出的大多数性能声明似乎都是空洞的声明。它应该支持高并发读取，但多线程测试显示没有并发增益。[https://github.com/ayende/raven.voron/pull/9#issuecomment-29764803](https://github.com/ayende/raven.voron/pull/9#issuecomment-29764803)

（相比之下，LMDB 显示了跨多个 CPU 读取的完美线性性能提升[。https://github.com/ayende/raven.voron/pull/9#issuecomment-29780359](https://github.com/ayende/raven.voron/pull/9#issuecomment-29780359)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-01T22:06:00.057

我对 AMQ 性能进行了广泛的测试，在我的测试中无法获得 LevelDB 与 KahaDB 之间的任何统计显着差异：[http ://whywebsphere.com/2015/03/12/ibm-mq-vs-apache-activemq-性能比较更新/](http://whywebsphere.com/2015/03/12/ibm-mq-vs-apache-activemq-performance-comparison-update/)

# sql-server-2008 - LINQ to SQL datagridview 查询返回长度，而不是值

> ID：11769509
> 
> 赞同：0
> 
> 时间：2012-08-02T00:36:58.397
> 
> 标签：sql-server-2008, linq-to-sql, datagridview, vb.net-2010, bindingsource

我有一个带有按钮和 datagridview 的 Windows 窗体。该项目包括一个有效的数据库连接和 LINQ to SQL 类。我正在尝试将 datagridview 绑定到 LINQ to SQL。

在一个代码模块中，我有这个：

```
Public Function DataGridList() As BindingSource
    Dim NewBindingSource As New BindingSource()
    Dim db As New DataClasses1DataContext()
    NewBindingSource.DataSource = _
    From Block In db.BLOCK_ASSIGNMENTs
        Where Block.gr912_school = "Franklin"
    Select Block.gr6_school Distinct
    Return NewBindingSource
End Function 
```

而这个 button_click 代码的形式是：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    DataGridView1.DataSource = DataGridList()
End Sub 
```

当我单击按钮时，我会在 datagridview 中获得学校名称的长度，列标题为“长度”。

![结果](../Images/6130798331910b99d311ffbf890f14ce.png)

如果我只是在 button_click 中运行这个非常相似的代码，学校名称会正确显示在即时窗口中：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim db As New DataClasses1DataContext()
    Dim TestQuery =
    From Block In db.BLOCK_ASSIGNMENTs
        Where Block.gr912_school = "Franklin"
    Select Block.gr6_school Distinct
    For Each block In TestQuery
        Debug.Print(block)
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:01:14.850

试试这个：

```
Public Function DataGridList() As BindingSource
    Dim NewBindingSource As New BindingSource()
    Dim db As New DataClasses1DataContext()
    NewBindingSource.DataSource = _
    From Block In db.BLOCK_ASSIGNMENTs
        Where Block.gr912_school = "Franklin"
    Select New With { Key .Value = Block.gr6_school } Distinct
    Return NewBindingSource
End Function 
```

这应该给它一个 DataGridView 可以获取的属性。`New With`... 创建一个具有名为 Value 的属性的匿名对象。DataGridView 通过枚举公共属性并将它们呈现为列来处理这种类型的对象。如果您需要多个值，您可以在花括号内添加其他项目，方法相同，用逗号分隔。有关详细信息，请参阅[匿名类型 (Visual Basic)](http://msdn.microsoft.com/en-us/library/bb384767.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T14:05:23.597

您可以尝试将 .ToString 添加到 Select 中：

```
 From Block In db.BLOCK_ASSIGNMENTs
        Where Block.gr912_school = "Franklin"
   Select Block.gr6_school.ToString Distinct 
```

我相信 Debug.Print 在打印到即时窗口时会隐式转换为 .ToString 。但是，数据网格单元将所有内容都视为对象并显示该对象的默认属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:38:37.767

当然，事实证明，这已经经常解决，包括[在 SO](https://stackoverflow.com/questions/479329/how-to-bind-a-string-list-to-a-datagrid)和[here](http://www.psworld.pl/Programming/BindingListOfString)上。我选择的路线是使用中间数据表：

```
Public Function DataGridList() As DataTable
    Dim NewDataTable As New DataTable
    Dim db As New DataClasses1DataContext()
    Dim i As Int32

    Dim qry =
    From Block In db.BLOCK_ASSIGNMENTs.AsEnumerable
        Where Block.gr912_school = "Franklin"
    Select Block.gr6_school Distinct

    NewDataTable.Columns.Add("School")
    For i = 0 To qry.Count - 1
        NewDataTable.Rows.Add(qry(i))
    Next
    Return NewDataTable
End Function 
```

第一次运行时这似乎很慢，所以我将来可能会尝试其他方法，但它允许我通过 LINQ 提供网格，这是我想要使用的。

（我想使用 qry 的 CopyToDataTable 属性，但它只有在查询返回 DataTableRows 集合或类似的集合时才可用，并且我的黑客攻击并没有揭示如何做到这一点。）

# ruby - 具有多种模型的 Rails 3 范围

> ID：11769510
> 
> 赞同：0
> 
> 时间：2012-08-02T00:37:03.050
> 
> 标签：ruby, ruby-on-rails-3, activerecord, model, scope

这是我的模型：

病人：

```
has_many :patient_records 
```

病历：

```
belongs_to :patient
has_many :progress_reports 
```

进度报告：

```
has_one :patient_record 
```

我正在尝试生成的查询是在包含或加入患者记录表的同时获取所有progress_reports 大于或等于7 天的患者（使用progress_reports 中的date_of_report 列）...我一直在为此工作这么久，我撞到了一堵砖墙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:01:32.147

我会尝试：

```
scope :recent_patients, lambda 
{ |since_when| join(:progress_reports)
  .where("progress_reports.created_at >= ?", since_when)} 
```

在你的`Patient`模型中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:51:46.363

```
reports = ProgressReport.where(:created_at > 7.days.ago).all 
```

如果要获取属于每个记录的每个患者，请执行以下操作：

```
reports.each do |r|
   puts r.patient.name
end 
```

# java - Ctrl+单击在 Eclipse Juno 中不起作用

> ID：11769513
> 
> 赞同：28
> 
> 时间：2012-08-02T00:37:28.847
> 
> 标签：java, eclipse

对于我在 Juno 之前使用的每个 Eclipse 版本，`ctrl`+click 会找到变量/类/方法的声明。在处理大型代码库时，这是一个非常有用的功能。我如何让朱诺做到这一点？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-02T07:25:48.897

我可以确认`Ctrl`+ click 在以下情况下可以正常工作：

```
Eclipse Java EE IDE for Web Developers.
Version: Juno Release
Build id: 20120606-2254
Operating System : Windows 7, 64 Bit 
```

您对以下偏好有何看法？

```
On Window -> Preferences -> General -> Editors -> Text Editors -> Hyperlinking -> Open Declaration 
```

这是我在 Juno 的新工作区所拥有的：

![在此处输入图像描述](../Images/4cf8a292ee2972521f293de2af6038e0.png)

**更新**

我最近没有遇到过这种情况，但我隐约记得在以前的 Eclipse 版本（Galileo 和更早的版本）中遇到过这个问题。

只有当我们确定这是 Eclipse 工作区的问题时，接下来的所有事情才值得去做。检查这一点的一种快速方法是使用新工作区重新启动 Eclipse（通过转到文件 - > 切换工作区 - > 其他...并选择文件夹的路径，该文件夹最好是空的*并且*与当前工作区文件夹不同） .

如果在新工作区中一切正常，那么我的修复是以下之一，以增加顺序极端性：

1.  重新启动eclipse（是的，有时就是这样）
2.  使用参数重新启动 eclipse`-clean`以清理工作区（请参阅[this](http://www.eclipsezone.com/eclipse/forums/t61566.html)）。如果您使用旧版本的 eclipse 中的工作区，这可能特别值得做。
3.  当上述失败时，我只需要使用我现有的工作区，我备份了我的工作区文件夹并在删除后重新启动了 Eclipse`WORKSPACE_FOLDER/.metadata/.plugins/org.eclipse.jdt.core`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-17T11:47:13.470

对我来说，它有助于简单地关闭编辑过的源文件并重新打开它。如果这不起作用那么您可以尝试重新启动整个 IDE。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-29T13:19:07.740

对于我的情况，我通过转到项目属性，选择“Java Build Path”，然后删除不再存在的源文件夹来解决这个问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-27T08:09:18.520

这个bug真的很烦。。

唯一对我有用的是从工作区中删除项目，然后删除 .project 和 .classpath 文件，然后将其重新导入工作区。

希望它会帮助别人。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-19T14:00:31.967

我在 Eclipse 中遇到了与 PDT 相同的问题，我通过删除我的包含构建路径并再次添加它们来修复它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-22T04:26:00.323

我的解决方案是配置构建路径以包含项目本身。

1.  右键单击打开的项目。
2.  突出显示构建路径
3.  点击配置构建路径...</li>
4.  点击源
5.  单击添加文件夹... 按钮。
6.  在您的项目旁边打勾。
7.  单击确定。

如有必要，单击项目菜单并选择“清理...”选项进行重建。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-06T05:50:27.203

我发现解决项目的**Java 构建路径**设置的问题解决了这个问题。

右键单击项目，选择 Properties，选择 Java Build Path。

（注意：我在 Windows 7 上使用 Eclipse Kepler Service Release 2）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-02-24T10:58:58.630

我有同样的问题，并通过以下方式解决。我的问题来了，因为我从 Git 导入了一个项目，该项目没有项目文件。所以 Eclipse 没有将该项目识别为 java 项目。`Ctrl`+click 不起作用，因此出现了`F3`问题。

解决方案：（不是直接的。但解决了我的问题）

*   import -> projects from git -> from URI -> 选择新建项目向导
*   因此将创建一个带有 src 文件夹的空项目。

*   然后手动将所有 src 文件复制到该文件夹​​中。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-07-30T12:04:18.427

我在eclipse中遇到了同样的问题。我验证了首选项和构建路径，也没有错误。尝试关闭和打开日食，但没有任何效果。即使我无法运行调试配置。我创建了一个新工作区并`Ctrl`+click /`⌘</kbd>+click (Mac os) was working fine.`

希望这可以帮助某人。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-08-18T12:55:45.597

如果您正在处理一个大型项目并且正在使用存储库，您可能只是通过错误的项目打开了文件，我只打开了两个文件实例，其中一个是我无法做的`Ctrl`+单击，而在另一个文件上，我可以`Ctrl`+成功单击它。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-18T14:25:14.880

有时，如果文件太大，则出于可伸缩性的目的，Eclipse 会禁用导航。对我来说，它发生在带有 C++ 的 Eclipse 上

它可以通过 Window->Preferences->C/C++/Editor/Scalability 启用，然后在“Scalability mode settings”下取消选中所有内容。

[![日食设置](../Images/9b8ba8e87145636aaa03f0ad844b9032.png)](https://i.stack.imgur.com/T9vZC.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-06T12:40:56.340

我多次遇到这个问题。正如 Ashutosh Jindal 所描述的，如果超链接已经启用并且 ctrl+click 仍然不起作用，那么您需要：

1.  导航到 Java -> Editor -> Mark Occurrences in Preferences
2.  如果已选中，请取消选中“标记当前文件中选定元素的出现”。
3.  现在，检查上述选项，然后检查其下的所有项目。单击应用。

这现在应该启用 ctrl+click 功能。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-01-23T19:46:59.070

您需要使用`CTRL`+重建您的工作区`B`。我有一个问题，我可以去函数声明，但对于某些我不会。重建后，我可以做所有事情。我希望这会有所帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-03-10T16:19:02.800

我在 eclipse 3.7.2 中创建工作区/项目时遇到了这个问题。然后我使用开普勒（4.3）打开它。因此，只需通过您创建的 Eclipse 版本（在我的情况下为 3.7.2）打开项目即可解决问题。希望能帮助到你。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-04-01T22:00:17.317

我在我的 Ubuntu VM 中的 Eclipse Luna 中遇到了同样的问题，但我只是尝试`Ctrl`+click 一个方法并且它有效（即使我的鼠标光标没有变为指针）。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-02-25T10:33:52.087

我有同样的问题；我试图改变偏好，清洁工作空间等，但没有任何效果。解决方法：最后发现类路径配置有错误；修复此问题后，一切都变得正常。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-02-04T07:38:01.447

如果项目是 Maven 项目，请确保您打开的 java 类位于 src/main/java 中。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-12-29T11:45:27.090

我遇到了类似的问题，同时我发现项目属性中的 java 构建路径丢失了。从存储库中提取的项目没有 .project 文件，eclipse 创建了一个默认的 .project 文件，我从其他工作项目中复制了 .project.xml 的内容并删除了 unsed 导入，之后一切正常

```
<projectDescription>
<name>XYZ</name>
<comment></comment>
<projects>
</projects>
<buildSpec>
    <buildCommand>
        <name>org.eclipse.wst.jsdt.core.javascriptValidator</name>
        <arguments>
        </arguments>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.jdt.core.javabuilder</name>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.wst.common.project.facet.core.builder</name>
    </buildCommand>
    <buildCommand>
        <name>org.eclipse.wst.validation.validationbuilder</name>
    </buildCommand>
</buildSpec>
<natures>
    <nature>org.eclipse.jem.workbench.JavaEMFNature</nature>
    <nature>org.eclipse.wst.common.modulecore.ModuleCoreNature</nature>
    <nature>org.eclipse.wst.common.project.facet.core.nature</nature>
    <nature>org.eclipse.jdt.core.javanature</nature>
    <nature>org.eclipse.wst.jsdt.core.jsNature</nature>
</natures> 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-08-11T18:47:26.270

在我的系统上，`Ctrl`+click 会弹出右键菜单，而不是打开声明。但是，如果您**将`Ctrl`鼠标指针悬停**在变量/类/方法名称上，则会出现一个带有“打开声明”的小框菜单。您可以向下移动指针并单击该项目以获得所需的效果。

我在 OS X 上通过 VMWare 运行 Ubuntu 14.04。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-08-23T16:03:37.443

请同时检查您的 .classpath 文件。如果类路径不正确，有时 Eclipse 在使用“ctrl+click”到类或方法时不会重定向。我在 Eclipse Mars 中遇到过同样的问题，但是当我在工作位置获得正确的 .classpath 文件时，它得到了解决。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-05-01T16:53:29.843

去

**窗口 -> 首选项 -> 常规 -> 编辑器 -> 文本编辑器 -> 超链接**

并确保

**启用按需超链接样式导航**

被检查。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-02-13T18:12:28.290

在处理基于 GIT 的项目时，我遇到了完全相同的问题。我能够通过更改在工作区中导入项目的方式来解决。

错误的方法：从 GIT 角度将项目导入工作区，例如右键单击 GIT URL 并选择无法识别项目方面的选项导入。

正确的方法（解决了我的问题）：在 GIT 透视图中克隆项目，更改为 JEE Perspective ，然后从文件导入 > 导入 > 现有 Maven 项目。

* * *

## 回答 #23

> 赞同：-3
> 
> 时间：2013-01-29T13:21:41.967

如果您的构建路径正确，则`ctrl`+ 单击将起作用

# c# - 将 IP 字符串转换为十六进制的 unicode 字符值列表

> ID：11769514
> 
> 赞同：0
> 
> 时间：2012-08-02T00:37:30.033
> 
> 标签：c#, unicode, ip, hex, ip-address

有没有办法将IP地址字符串转换为十六进制字符串（包括点），然后返回转换后的十六进制值！

`"10.10.10.11"`到`hex(7):31,00,30,00,2e,00,31,00,30,00,2e,00,31,00,30,00,2e,00,31,00,00,00,00,00`

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:48:29.187

阅读您的问题，我了解您实际上想要将 IP 地址字符串转换为其 unicode 表示，然后您希望从中生成一个逗号分隔的底层字节列表（以十六进制编码）。

这可以解决问题：

```
string.Join(",", Encoding.Unicode.GetBytes("10.10.10.11").Select(x => x.ToString("X2"))) 
```

输出：

```
31,00,30,00,2E,00,31,00,30,00,2E,00,31,00,30,00,2E,00,31,00,31,00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:41:00.850

使用`System.Net.IPAddress`该类，那么您应该能够将其作为字节数组获取。

```
var address = System.Net.IPAddress.Parse("10.10.10.11");
var bytes = address.GetAddressBytes(); 
```

# visual-studio-2010 - 通过 MSBuild 从 None ItemGroup 复制项目时保留目录结构

> ID：11769516
> 
> 赞同：3
> 
> 时间：2012-08-02T00:37:34.427
> 
> 标签：visual-studio-2010, msbuild, itemgroup

在我的 cpp 项目文件中，我有一个这样定义的项目组：

```
<ItemGroup>
    <None Include="dir1\file1" />
    <None Include="dir1\blah.dll" />
    <None Include="dir1\dir2\something.dll" />
    <None Include="dir1\dir2\dir3\another_file.dll" />
</ItemGroup> 
```

我有一个 AfterBuild 目标，我想将上述文件（并保留它们的目录结构）复制到一个新位置，例如：

```
<Target Name="AfterBuild">
    <Copy SourceFiles="@(None)" DestinationFiles="@(None->'$(NewDirectory)%(RecursiveDir)%(Filename)%(Extension)')" ContinueOnError="false" />
</Target> 
```

*注意： $(NewDirectory) 在其他地方定义。*

然而，上面只是将文件复制到 $(NewDirectory) 而忽略了项目列表的目录结构（即 Dir1、Dir2 和 Dir3）。有没有办法在不必创建新列表的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:45:48.670

如果要保留目录结构，请使用：

```
<Copy SourceFiles="@(None)" DestinationFolder="$(NewDirectory)\%(None.RelativeDir)" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:15:57.280

我刚刚解决了这个问题！将 %(Recursive) 替换为 %(RelativeDir)，即：

```
<Copy SourceFiles="@(None)" DestinationFiles="@(None->'$(NewDirectory)%(RelativeDir)%(Filename)%(Extension)')" ContinueOnError="false" /> 
```

# css - 如何在 Bootstrap 的 make 中获取更详细的错误信息？

> ID：11769519
> 
> 赞同：6
> 
> 时间：2012-08-02T00:38:04.237
> 
> 标签：css, twitter-bootstrap, makefile, less, twitter-recess

我是使用 LESS 和 Bootstrap 的新手，我正在建立一个有趣的网站。当我`make`在我的`bootstrap`目录中运行时，如果我在文件中搞砸了一些东西，`variables.less`我会收到一条完全无用的错误消息：

```
##################################################
Building Bootstrap...
##################################################

Running JSHint on javascript...             ✔ Done

/usr/local/lib/node_modules/less/lib/less/parser.js:385
                        throw new(LessError)(e, env);

[object Object]
make: *** [build] Error 1 
```

我怎样才能得到一些行号之类的？弄清楚在这种情况下发生了什么（我误用了`lighten(@color, 15%)`）并不算太糟糕，但是如果我开始根据需要对设计进行相当多的修改，我觉得我会遇到麻烦，作为一个 LESS 新手和全部。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:43:52.627

我遇到了完全相同的问题，我`lessc`直接跑了（正如 merv 建议的那样）。我立即遇到了一个可以处理的上下文相关错误。谢谢，梅尔夫

# php - linux服务器文件下载连接限制

> ID：11769520
> 
> 赞同：0
> 
> 时间：2012-08-02T00:38:14.277
> 
> 标签：php, nginx, centos, centos6

我正在运行一个专用服务器... Centos 6 PHP 5.3.3 Nginx 1.0.15

Nginx 使用 fastcgi 运行 php。

服务器使用远程 sql 与另一台服务器通信。

一个名为 download.php 的文件启动一个 mysql 连接，检查数据库中的一些详细信息，然后开始使用内容置换将字节流式传输给用户。

无论我做什么，我都无法同时连接下载5个以上的文件。例如，如果我使用文件管理器下载文件，最多可以建立5个连接，其余超时。

我已经将 nginx 设置为最多接受 32 个连接，mysql 连接在文件开始流式传输之前关闭，因此那里不应该存在连接限制问题。

有人知道如何增加连接数吗？也许知道我还能检查什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:24:57.850

很可能服务器设置为通过 ip 地址进行限制。有关详细信息，请参阅[http://www.nakedmcse.com/Home/tabid/39/forumid/14/postid/61/scope/posts/Default.aspx](http://www.nakedmcse.com/Home/tabid/39/forumid/14/postid/61/scope/posts/Default.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:06:22.463

编辑 /etc/init.d/php_cgi 设置 server_childs=32

问题解决了！

# sqlite - 如何从 SQLite 文件恢复 Firefox 书签文件？

> ID：11769524
> 
> 赞同：5
> 
> 时间：2012-08-02T00:38:47.990
> 
> 标签：sqlite, firefox, bookmarks

我有两个文件，我设法从 Windows XP 下的 Firefox 安装中恢复。第一个是 urlclassifier3.sqlite，第二个是 urlclassifier.pset。

我知道这些文件包含在用户配置文件下安装 Firefox 的实际书签，因为配置文件是 .\Mozilla\Firefox\Profiles\akcum27.default。如何从这些文件中恢复书签？

最大的是 .sqlite 文件，大约 56 KB。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-26T23:25:49.790

一个实际有效的查询（在 Windows 上作为问题所在）是：

```
sqlite3 places.sqlite "select '<a href=''' || url || '''>' || moz_bookmarks.title || '</a><br/>' as ahref from moz_bookmarks left join moz_places on fk=moz_places.id where url<>'' and moz_bookmarks.title<>''" > t1.html 
```

这假定：

*   使用 Windows 命令行 (CMD)
*   `places.sqlite`当前目录在哪里
*   [SQLite](http://en.wikipedia.org/wiki/SQLite) 3 (executable `sqlite3`) 已安装并且在路径中（环境变量`PATH`）

生成的 HTML 示例：

```
<a href='http://www.wunderground.com/hurricane/'>Tropical weather</a><br/>
<a href='http://www.dmi.dk/vejr/maalinger/radar-nedboer/'>DMI, Radar</a><br/>
<a href='http://www.skyandtelescope.com/observing/objects/planets/3304091.html?page=1&c=y'>Transit Times of Jupiter's Great Red Spot - Planets - SkyandTelescope.com</a><br/>
<a href='https://www.quora.com/What-is-the-most-misspelt-word-in-the-English-language'>(951/25) What is the most misspelt word in the English language? - Quora</a><br/>
<a href='http://www.eevblog.com/2015/06/16/eevblog-754-altium-circuit-maker-first-impressions/'>EEVblog #754 - Altium Circuit Maker First Impressions | EEVblog - The Electronics Engineering Video Blog</a><br/>
<a href='https://www.arduino.cc/en/Main/ArduinoBoardUno'>Arduino - ArduinoBoardUno</a><br/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T03:45:58.530

书签保存在文件中`places.sqlite`，而不是 urlclassifier。您可以尝试用它替换当前安装中的文件。确保 Firefox 已关闭。如果这不起作用：

您可能想要安装 Firefox 插件“SQLite Manager”，然后使用插件（使用`Alt`Firefox 中的插件菜单键打开）从旧安装中打开文件 places.sqlite。右键单击左侧的*表格*-> *moz_bookmarke ，然后单击“导出表格”*

将表导出为 XML 或 SQL，然后从当前安装中打开文件 places.sqlite，然后单击*数据库*->*导入表*并以与导出相同的方式导入它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-15T20:03:12.633

You can also replace the `places.sqlite` file in the Firefox profile folder, and then, since the database may not be retrieved by Firefox, you can open another web browser (Chrome, Edge, etc.) and import your Firefox bookmarks from this new browser (most of the browsers can import Firefox bookmarks). Finally, from Firefox you can import the bookmarks again from this third-party web browser.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T14:50:21.417

一个快速而肮脏的解决方案是：

```
dalem@QnD:~/Downloads$ sqlite3 places.sqlite 'select "<a href={" || url || "}>" || moz_bookmarks.title || "</a><br/>" as ahref  from moz_bookmarks left join moz_places on fk=moz_places.id where url<>"" and moz_bookmarks.title<>""' > t1.html 
```

# database - vb.net 比较两个数据库然后插入或删除

> ID：11769527
> 
> 赞同：1
> 
> 时间：2012-08-02T00:39:05.937
> 
> 标签：database, vb.net

在 vb.net 中，您将如何遍历 database1 以检查 database2 中的所有记录是否存在于 Database1 中，反之，如果记录存在于 database1 中且不存在于 database2 中，则将其从 database1 中删除。所以database2是我的参考

我如何使用查询来做到这一点，它还必须包括嵌套循环吗？

请注意，记录的顺序不同

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:51:32.120

此查询将返回附加表中不在本地版本表中的所有行

```
SELECT * FROM attachedTable 
WHERE col1 NOT IN( SELECT lt.col1 FROM localTable as lt) 
```

这将反过来，返回本地表中与远程表不匹配的所有行。

```
SELECT * FROM localTable 
WHERE col1 NOT IN( SELECT rt.col1 FROM attachedTable As rt) 
```

# numpy - 无法在特定机器上“pip install numpy”

> ID：11769533
> 
> 赞同：5
> 
> 时间：2012-08-02T00:39:42.943
> 
> 标签：numpy, virtualenv, gentoo

`pip install numpy`在我自己的 Mac OSX 机器上的 python virtualenv 和运行 Arch Linux 的另一台机器上完美运行。

不幸的是，相同的命令无法在同事的运行 Gentoo 的机器上运行。

这是显示错误日志的 pip.log：-

```
building data_files sources

build_src: building npy-pkg config files

running build_py

copying numpy/version.py -> build/lib.linux-x86_64-2.7/numpy

copying build/src.linux-x86_64-2.7/numpy/__config__.py -> build/lib.linux-x86_64-2.7/numpy

copying build/src.linux-x86_64-2.7/numpy/distutils/__config__.py -> build/lib.linux-x86_64-2.7/numpy/distutils

running build_clib

customize UnixCCompiler

customize UnixCCompiler using build_clib

running build_ext

customize UnixCCompiler

customize UnixCCompiler using build_ext

customize GnuFCompiler

customize IntelFCompiler

customize LaheyFCompiler

customize PGroupFCompiler

customize AbsoftFCompiler

customize NAGFCompiler

customize VastFCompiler

customize CompaqFCompiler

customize IntelItaniumFCompiler

customize IntelEM64TFCompiler

customize Gnu95FCompiler

customize Gnu95FCompiler

customize Gnu95FCompiler using build_ext

building 'numpy.linalg.lapack_lite' extension

compiling C sources

C compiler: x86_64-pc-linux-gnu-gcc -pthread -O3 -march=native -pipe -fomit-frame-pointer -fno-ident -fPIC

compile options: '-DNO_ATLAS_INFO=1 -Inumpy/core/include -Ibuild/src.linux-x86_64-2.7/numpy/core/include/numpy -Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/include -I/usr/include/python2.7 -Ibuild/src.linux-x86_64-2.7/numpy/core/src/multiarray -Ibuild/src.linux-x86_64-2.7/numpy/core/src/umath -c'

x86_64-pc-linux-gnu-gcc: numpy/linalg/lapack_litemodule.c

x86_64-pc-linux-gnu-gcc: numpy/linalg/python_xerbla.c

/usr/bin/gfortran -Wall -s build/temp.linux-x86_64-2.7/numpy/linalg/lapack_litemodule.o build/temp.linux-x86_64-2.7/numpy/linalg/python_xerbla.o -L/usr/lib64 -L/usr/lib64 -Lbuild/temp.linux-x86_64-2.7 -llapack -lblas -lpython2.7 -lgfortran -o build/lib.linux-x86_64-2.7/numpy/linalg/lapack_lite.so

/usr/lib/gcc/x86_64-pc-linux-gnu/4.6.3/../../../../lib64/crt1.o: In function `_start':

(.text+0x20): undefined reference to `main'

collect2: ld returned 1 exit status

/usr/lib/gcc/x86_64-pc-linux-gnu/4.6.3/../../../../lib64/crt1.o: In function `_start':

(.text+0x20): undefined reference to `main'

collect2: ld returned 1 exit status

error: Command "/usr/bin/gfortran -Wall -s build/temp.linux-x86_64-2.7/numpy/linalg/lapack_litemodule.o build/temp.linux-x86_64-2.7/numpy/linalg/python_xerbla.o -L/usr/lib64 -L/usr/lib64 -Lbuild/temp.linux-x86_64-2.7 -llapack -lblas -lpython2.7 -lgfortran -o build/lib.linux-x86_64-2.7/numpy/linalg/lapack_lite.so" failed with exit status 1

----------------------------------------

Command /home/stefan/.virtualenvs/senatus_env/bin/python2.7 -c "import setuptools;__file__='/home/stefan/.virtualenvs/senatus_env/build/numpy/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-Ebkksh-record/install-record.txt --install-headers /home/stefan/.virtualenvs/senatus_env/include/site/python2.7 failed with error code 1 in /home/stefan/.virtualenvs/senatus_env/build/numpy

Exception information:
Traceback (most recent call last):
  File "/home/stefan/.virtualenvs/senatus_env/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/basecommand.py", line 104, in main
    status = self.run(options, args)
  File "/home/stefan/.virtualenvs/senatus_env/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/commands/install.py", line 250, in run
    requirement_set.install(install_options, global_options)
  File "/home/stefan/.virtualenvs/senatus_env/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 1133, in install
    requirement.install(install_options, global_options)
  File "/home/stefan/.virtualenvs/senatus_env/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 577, in install
    cwd=self.source_dir, filter_stdout=self._filter_install, show_stdout=False)
  File "/home/stefan/.virtualenvs/senatus_env/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/__init__.py", line 256, in call_subprocess
    % (command_desc, proc.returncode, cwd))
InstallationError: Command /home/stefan/.virtualenvs/senatus_env/bin/python2.7 -c "import setuptools;__file__='/home/stefan/.virtualenvs/senatus_env/build/numpy/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /tmp/pip-Ebkksh-record/install-record.txt --install-headers /home/stefan/.virtualenvs/senatus_env/include/site/python2.7 failed with error code 1 in /home/stefan/.virtualenvs/senatus_env/build/numpy 
```

看来我同事机器上的 gfortran 与他试图在 virtualenv 中安装的 numpy 包不能很好地配合。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T15:19:22.317

如果设置了`CFLAGS`、`CXXFLAGS`或`LDFLAGS`，则可能会导致此问题。问题是那些环境变量**会覆盖**编译脚本中的设置，从而导致问题。

只需取消设置它们以调用 pip 命令，您就应该一切就绪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:49:38.560

在我看来，setuptools 无法正常工作，setuptools 已被 python“dist”实用程序取代，因此您可能需要安装它并重试安装。

# maven-2 - Mercurial Maven Release 插件问题

> ID：11769537
> 
> 赞同：6
> 
> 时间：2012-08-02T00:39:51.207
> 
> 标签：maven-2, mercurial, bitbucket, maven-release-plugin

我喜欢使用 Maven 和分布式 SCM，例如 Mercurial (BitBucket)。

然而，随着我的项目规模化和 Hg 存储库的增长，我发现 Maven Release 插件越来越难以使用。

主要问题是，当 a`mvn release:prepare`被调用时，Maven 没有利用 Hg 的分布式特性，而是执行整个存储库的完整克隆以放入临时目录。

**Fabrizio Giudici**早在 2009 年 就很好地记录了这个问题[http://weblogs.java.net/blog/fabriziogiudici/archive/2009/10/29/fixing-two-problems-maven-mercurial-hudson](http://weblogs.java.net/blog/fabriziogiudici/archive/2009/10/29/fixing-two-problems-maven-mercurial-hudson)

我原以为 Sonatype 现在可能已经更新了插件，但是我们仍然需要在发布之前下载整个 repo。

我希望与 StackOverflow 社区联系，看看是否有其他人遇到过这个问题，以及是否有人想出新的方法来解决在 maven 发布时可怕的完整克隆。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T14:09:15.020

这就是我为避免使用 maven 对 mercurial 进行愚蠢的多重推动而采取的措施：

首先确保您使用正确版本的插件通过以下方式处理 mercurial 类型的 scm：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <tagNameFormat>@{project.version}</tagNameFormat>
    </configuration>
</plugin> 
```

然后首先执行准备目标

```
mvn release:prepare -DautoVersionSubmodules=true -DreleaseVersion=x.x.x -DdevelopmentVersion=y.y.y-SNAPSHOT -DpushChanges=false 
```

注意`pushChanges=false`属性

```
if all ok then
    hg push
    mvn release:perform
else
    mvn release:clean
    and have fun removing the changeset from local hg repo
endif 
```

# ajax - 支持 IRC 后端的 Ajax 聊天前端

> ID：11769538
> 
> 赞同：1
> 
> 时间：2012-08-02T00:39:59.900
> 
> 标签：ajax, chat, irc

我正在寻找**支持 IRC 后端的****ajax 网络聊天解决**方案。基本上我有自己的 IRC 服务器。我想配置一个 ajax 网络聊天解决方案来连接它。我在 Google 中找到了大量的 ajax 网络聊天解决方案。但是没有一个（除了不是开源的**mibbit ）符合我的标准。**

 ****你知道吗？如果没有找到我可能会写一个。但我不想走那条路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:35:40.947

有可能符合要求的[Atheme 的 Iris 。](http://www.atheme.net/iris.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:51:03.053

在回答你的问题时，我不知道。但是，我可以解释如何实现一个：您应该能够将*任何*前端带到任何基于 Web 的聊天客户端（例如，假设为 PHP 后端/Javascript 前端），保持原样，然后修改后端以适应您的需求。如果你能找到一个写得很好的聊天脚本，你应该能够实现它已经用于它自己的自定义聊天实现的接口，这可能包括如下内容：

```
interface Chattable
{
  function connectToChatDaemon($ip, $channel);
  function listen();
  function proxyMessageFromClient($message);
  function sendMessageToClient($blah);
} 
```

然后为 IRC 重新实现它！祝你好运 （：****

# timeout - 调用需要很长时间执行的.php时如何解决“mod_fastcgi.c.2566意外的文件结束（可能是fastcgi进程死亡）”？

> ID：11769543
> 
> 赞同：3
> 
> 时间：2012-08-02T00:40:49.220
> 
> 标签：timeout, php

在我的 php 应用程序中，我恢复了 db2 数据库。它工作正常，但这是一个巨大的 2.9GB，以`500 - Internal Server Error`.

我使用 exec() 从 .php - cp、db2 等运行 unix shell 命令。从 firefox 或 ruby​​ 脚本运行时会发生同样的错误。

我必须先复制备份映像文件，这需要几分钟。然后我调用 db2 来恢复图像。对于这个特定的数据库，php 进程以上述错误结束。然后我可以在错误日志文件中找到它

```
2012-08-02 10:25:18: (mod_fastcgi.c.2566) unexpected end-of-file (perhaps the fastcgi process died): pid: 0 socket: tcp:127.0.0.1:9090
2012-08-02 10:25:18: (mod_fastcgi.c.3352) response not received, request sent: 2758 on socket: tcp:127.0.0.1:9090 for /wrational/tools/rationalTest.php?mode=restore&database=RATIONAL&from_database=dbb&dbbackuptype=weekly, closing connection 
```

我在 php.ini 中将`default_socket_timeout`和都设置`max_execution_time`为 5660 并确认它是由设置的，`phpinfo()`但它看起来没有帮助。

知道如何使这个工作吗？

## 更新

看起来它会在 40 分钟后死亡。access.log 文件中的相应行如下所示

```
"GET /rational/tools/rationalTest.php?mode=restore&from_database=dbb&dbbackuptype=weekly HTTP/1.1" 500 369 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:11.0) Gecko/20100101 Firefox/11.0" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:27:33.377

看起来 php-fpm.ini 中的 request_terminate_timeout 选项引起了麻烦。设置为 30 分钟。我将其更改为 0，到目前为止它看起来不错。不过需要做更多的测试。

```
; The timeout for serving a single request after which the worker process will
; be killed. This option should be used when the 'max_execution_time' ini option
; does not stop script execution for some reason. A value of '0' means 'off'.  
; Available units: s(econds)(default), m(inutes), h(ours), or d(ays)
; Default Value: 0 
```

# windows-runtime - 在 c++/cx 的结构中使用结构向量

> ID：11769548
> 
> 赞同：1
> 
> 时间：2012-08-02T00:42:13.937
> 
> 标签：windows-runtime, c++-cx

我有一个头文件定义了一些我想在我的代码中使用的结构。

```
public value struct HttpHeader
{
   Platform::String^ mName;
   Platform::String^ mValue;

};
typedef Platform::Collections::Vector<HttpHeader> HttpHeaders;

public value struct HttpRequestEvent
{
   Platform::String^ mUri;
   HttpHeaders^ mHeaders;
}; 
```

当我建立这个我得到这个错误：

```
error C3986: 'mHeaders': signature of public member contains native type 'std::equal_to<_Ty>'
      with
      [
          _Ty=cpcpb::HttpHeader
      ] (SettingsServiceImpl.cpp) 
```

我在这里想念什么？不是我使用 C++/Cx 的所有东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T02:45:27.310

使用`Windows::Foundation::Collections::IVector`而不是`Platform::Collections::Vector`.

要使用`Platform::Collections::Vector`，您必须提供一个自定义比较器，即等于运算符。

检查此链接 - [http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/5ec2090f-b7e6-40e8-9cd7-75cf36d05ab3/](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/5ec2090f-b7e6-40e8-9cd7-75cf36d05ab3/)

# c++ - 如何使用 Boost Program Options 提取已解析的选项序列？

> ID：11769550
> 
> 赞同：5
> 
> 时间：2012-08-02T00:42:19.637
> 
> 标签：c++, boost, boost-program-options

我正在使用 Boost Graph 和 Program Options 构建图形生成器。例如，有两种类型的组件 C 和 W，每一种都有 1 个源、1 个接收器和一些附加参数来指定它们之间的拓扑。我希望能够按照命令行参数的顺序提供的顺序将它们缝合在一起。

例如：

```
./bin/make_graph -c4,5,1 -w3,3 -c3,1,2 
```

应该创建一个类似于以下内容的图表：

```
C -- W -- C 
```

但：

```
./bin/make_graph -c4,5,1 -c3,1,2 -w3,3 
```

应该创建一个类似于以下内容的图表：

```
C -- C -- W 
```

使用 boost::program_options，我无法确定如何提取确切的顺序，因为它将相同 string_key 的选项“组合”到一个带有 value_type == vector< string > 的映射中（在我的例子中）。

通过遍历地图，顺序会丢失。有没有办法不重复解析，但每次解析选项时都有一个调用函数（可能是回调）？我找不到这个方向的文档。还有其他建议吗？

为了让你相信我不是在编造这个，这是我目前所拥有的：

```
 namespace bpo = boost::program_options;
    std::vector<std::string> args_cat, args_grid, args_web;
    bpo::options_description desc("Program options:");
    desc.add_options()
            .operator ()("help,h","Displays this help message.")
            .operator ()("caterpillar,c",bpo::value< std::vector<std::string> >(&args_cat)->default_value( std::vector<std::string>(1,"4,7,2"), "4,7,2" ),"Caterpillar tree with 3 parameters")
            .operator ()("grid,g",bpo::value< std::vector<std::string> >(&args_grid)->default_value( std::vector<std::string>(1,"3,4"), "3,4" ),"Rectangular grid with 2 parameters")
            .operator ()("web,w",bpo::value< std::vector<std::string> >(&args_web)->default_value( std::vector<std::string>(1,"3,4"), "3,4" ),"Web with 2 parameters")
            ;
    bpo::variables_map ops;
    bpo::store(bpo::parse_command_line(argc,argv,desc),ops);
    bpo::notify(ops);
    if((argc < 2) || (ops.count("help"))) {
        std::cout << desc << std::endl;
        return;
    }
    //TODO: remove the following scope block after testing
    {
        typedef bpo::variables_map::iterator OptionsIterator;
        OptionsIterator it = ops.options.begin(), it_end = ops.options.end();
        while(it != it_end) {
            std::cout << it->first << ": ";
            BOOST_FOREACH(std::string value, it->second) {
                std::cout << value << " ";
            }
            std::cout << std::endl;
            ++it;
        }
        return;
    } 
```

我意识到我也可以将类型作为参数包含在内并轻松解决此问题，例如：

```
./bin/make_graph --component c,4,5,1 --component w,3,3 --component c,3,1,2 
```

但这正在朝着自己编写解析器/验证器的方向发展（甚至可能不使用 Boost Program Options）：

```
./bin/make_graph --custom c,4,5,1,w,3,3,c,3,1,2
./bin/make_graph c,4,5,1,w,3,3,c,3,1,2 
```

你们会如何建议我以优雅的方式做到这一点？

提前致谢！

PS：在发布之前，我已经在 SO 上搜索了“[boost] +sequence program options”和“[boost-program-options] +order”（及其变体），所以如果结果是这样，我提前道歉重复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:16:58.640

自从发布问题以来，我进行了一些挖掘并有一个“hack”，它适用于我上面的现有示例。

```
bpo::parsed_options p_ops = bpo::parse_command_line(argc,argv,desc);
typedef std::vector< bpo::basic_option<char> >::iterator OptionsIterator;
OptionsIterator it = p_ops.options.begin(), it_end = p_ops.options.end();
while(it != it_end) {
    std::cout << it->string_key << ": ";
    BOOST_FOREACH(std::string value, it->value) {
        std::cout << value << " ";
    }
    std::cout << std::endl;
    ++it;
} 
```

我称它为 hack 的原因是因为它以字符串的形式访问所有参数，并且必须从中提取类型，就像 bpo::variables_map 对`.as<T>()`成员函数所做的那样。编辑：它还直接访问选项结构的成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T03:27:03.167

这个怎么样：

```
./bin/make_graph c,4,5,1 c,3,1,2 w,3,3 
```

其中`"c,4,5,1"`和是*位置参数*`"c,3,1,2"`，它们（按顺序）存储在 a 中（就像在本[教程](http://www.boost.org/doc/libs/release/doc/html/program_options/tutorial.html#id2520673)中一样）。然后使用[Boost.Tokenizer](http://www.boost.org/doc/libs/release/libs/tokenizer/index.html)或从每个参数字符串中提取子标记。`"w,3,3"`*`std::vector<std::string>``--input-file`[`boost::algorithm::split`](http://www.boost.org/doc/libs/release/doc/html/string_algo/usage.html#id3207193)*

 *如果图形可能很复杂，您应该考虑让用户指定一个包含图形参数的输入文件。Boost.Program_Options 可以解析使用与命令行选项相同语法的用户[配置文件。](http://www.boost.org/doc/libs/release/doc/html/program_options/tutorial.html#id2520921)*

# java - 正则表达式匹配反斜杠后跟引号

> ID：11769555
> 
> 赞同：26
> 
> 时间：2012-08-02T00:43:03.223
> 
> 标签：java, regex

如何编写一个正则表达式来匹配这个`\"`（反斜杠然后是引号）？假设我有一个这样的字符串：

```
<a href=\"google.com\"> click to search </a> 
```

我需要`\"`用 a替换所有的`"`，所以结果如下所示：

```
<a href="google.com"> click to search </a> 
```

这个不起作用：`str.replaceAll("\\\"", "\"")`因为它只匹配报价。不知道如何解决反斜杠。我可以先删除反斜杠，但我的字符串中还有其他反斜杠。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-02T00:45:54.620

如果您***不需要任何正则表达式机制，例如预定义的字符类 \d、量词等，***而不是`replaceAll`期望使用正则表达式，而期望使用`replace`文本

```
str = str.replace("\\\"","\""); 
```

这两种方法都将替换*所有*出现的目标，但`replace`会按字面意思对待目标。

* * *

但是如果你真的***必须***使用你正在寻找的正则表达式

```
str = str.replaceAll("\\\\\"", "\"") 
```

`\`是正则表达式中的特殊字符（例如用于创建`\d`- 表示数字的字符类）。要将正则表达式`\`视为普通字符，您需要`\`在它之前放置另一个以关闭其特殊含义（您需要对其进行转义）。所以我们试图创建的正则表达式是`\\`.

但是要创建表示文本的字符串文字`\\`，以便您可以将其传递给正则表达式引擎，您需要将其编写为四个`\`( `"\\\\"`)，因为`\`它也是字符串文字中的特殊字符（使用 编写的代码的一部分`"..."`），因为它可以用于例如`\t`表示制表符。这就是为什么你也需要在`\`那里逃跑。

简而言之，您需要逃脱`\`两次：

*   在正则表达式中`\\`
*   然后在字符串文字中`"\\\\"`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T01:05:31.483

You don't need a regular expression.

```
str.replace("\\\"", "\"") 
```

should work just fine.

The `replace` method takes two substrings and replaces all non-overlapping occurrences of the first with the second. Per the [javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29):

> ```
> public String replace(CharSequence target,
>                       CharSequence replacement) 
> ```
> 
> Replaces each substring of this string that matches the literal target sequence with the specified literal replacement sequence. The replacement proceeds from the beginning of the string to the end, for example, replacing `"aa"` with `"b"` in the string `"aaa"` will result in `"ba"` rather than `"ab"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:06:05.663

try this: `str.replaceAll("\\\\\"", "\\\"")`
because Java will replace `\` twice:

(1) `\\\\\"` --> `\\"` (for string)
(2) `\\"` --> `\"` (for regex)

# java - 如何使用 JQuery 在 JSP 中附加 java 代码

> ID：11769556
> 
> 赞同：0
> 
> 时间：2012-08-02T00:43:42.593
> 
> 标签：java, jquery, jsp

我正在使用 JSP 页面，我需要在`.append()`一个`DIV`元素中添加一些 java 代码。

```
$("#myDiv").append("<% out.println("ali"); %>"); 
```

前面的代码实际上是错误的，因为有引号，所以我转义了它们。

```
$("#myDiv").append("<% out.println(\"ali\"); %>"); 
```

但我没有成功，没有附加任何内容`#myDiv`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:47:42.167

您的代码应该可以工作，听起来 jQuery 未正确加载或存在其他问题。

[http://jsfiddle.net/5PTwN/1/](http://jsfiddle.net/5PTwN/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:48:56.800

尝试这个

```
$("#myDiv").append('<% out.print("ali"); %>'); 
```

下面的行也应该可以工作，因为 java 代码将在服务器端执行，并且里面的 append 将被替换为“ali”。

```
$("#myDiv").append("<% out.print("ali"); %>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T00:50:50.543

这是正确的追加方式。如果没有附加任何内容，则该 div 可能不存在于页面中。

尝试使用 firebug 并检查什么是 console.log($('#muDiv')) 的输出

# git - Git：使本地存储库与源保持最新——仅在本地合并更改——从不推回更改

> ID：11769557
> 
> 赞同：0
> 
> 时间：2012-08-02T00:43:48.240
> 
> 标签：git

我的商店有一个愚蠢的设置，一个人代码审查和推送，而其他人拉，在本地进行更改，然后将更改发送给一个人进行审查，然后推送。

我们都有两个本地分支，“main”和“work”（“main”是静态的，我们在“work”中工作）。

我需要知道如何执行以下步骤：1）用原点替换我的“main” 2）将我的更改从“work”合并到新更新的“main”中 3）将“main”复制回“work”

这些步骤可以按任何顺序进行，但我需要完成保持最新并在本地工作的基本想法。我一直在阅读文档，但我害怕犯错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:16:36.247

首先，你不应该害怕犯错误。在使用生产代码之前，设置一些测试存储库并查看事情是如何工作的。

> 用原点替换我的“主要”

假设您的本地`main`分支与远程分支匹配`main`，您应该能够：

```
git checkout main
git pull 
```

这将使您的本地分支与远程分支保持同步。

> 将我从“work”的更改合并到新更新的“main”中，并将“main”复制回“work”

您之前说过您不会对“主”分支进行任何更改。

将远程更改导入本地`main`分支后，您可以像这样将它们合并到您的`work`分支中：

```
git checkout work
git merge main 
```

这是一个非常典型的工作流程：如果您从上游源跟踪代码并维护一组本地补丁，您会看到几乎完全一样的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T01:16:23.050

回答原始问题之前的一件事：查看[http://code.google.com/p/gerrit/](http://code.google.com/p/gerrit/) 这是一个托管代码审查，它简化了很多“谁可以在 master 中登陆代码以及谁进行审查”工作流程。

回到主题，让我们从几个假设开始：

*   你的工作副本中有两个分支，'main' 和 'work'
*   'main' 跟踪 origin/main，'work' 仅是本地的，永远不会被推送到源服务器
*   让我们称审稿人的遥控器为“审稿人”

这是工作流程：

1.  遥远的家伙在原产地登陆东西
2.  每个人都想把这些改变拉进来，`git fetch origin`
3.  假设这是一个快进，所以你可以合并分支
    *   `git checkout main`
    *   `git merge origin/main`
4.  有一些替代方法可以达到与 2/3 相同的结果，但我更喜欢将它们分开以便我有更大的灵活性，尽管这个假设您最初设置 main 来跟踪 origin/main
    *   `git checkout main`
    *   `git pull --rebase`
5.  现在更新您的工作分支，这会在新主节点之上重播您的更改，让您有机会解决沿途的任何冲突
    *   `git checkout work`
    *   `git rebase -i master`
6.  将您的更改发回给审核人员，大意是这样的，您可能已经弄清楚了这部分。
    *   `git push review-guy work:my-new-work-as-a-branch`

# objective-c - Objective-C/ iPhone 开发中的延迟实例化

> ID：11769562
> 
> 赞同：27
> 
> 时间：2012-08-02T00:44:46.050
> 
> 标签：objective-c, properties, initialization, lazy-initialization, alloc

快速提问...好吧，我知道在 Objective-C 中所有属性都以 nil 开头，并且向 nil 发送消息什么都不做，因此您必须使用 [[Class alloc] init]; 进行初始化。在向新创建的属性发送消息之前。但是，如果我没有向该属性发送消息，或者我使用 self.property = something 设置属性怎么办？在这些情况下我是否也需要分配 init ？此外，UI 属性是否也以 nil 开头，例如从情节提要中拖出的 UILabel 属性？这些需要alloc init吗？

感谢所有回答的人

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-02T02:34:47.320

Stunner 很好地解释了不需要分配已经创建的 init 对象。

但如果它是一个不存在的对象，你将在哪里创建它？我提到的一个非常常见的模式是延迟实例化，因为您在帖子中提到了它。

所以你想要一个 NSMutableArray 属性。您可以在使用它之前在某些方法中分配初始化它，但是您必须担心“在我需要我的数组之前是否调用了该方法？” 或“我是否会不小心再次调用它并重新初始化它。”

所以一个故障安全的地方是在属性的吸气剂中。每次访问该属性时都会调用它。

```
.h
@property (nonatomic, strong) NSMutableArray* myArray;

.m
@synthesize myArray = _myArray;

- (NSMutableArray*)myArray
{
    if (!_myArray) {
        _myArray = [[NSMutableArray alloc] initWithCapacity:2];
    }
    return _myArray;
} 
```

每次访问该属性时，它都会显示“myArray 是否存在？如果不存在，请创建它。如果存在，则返回我所拥有的。”

此外，这种设计模式的另一个好处是，在您需要资源之前，您不会创建资源，而不是在视图控制器加载或应用程序启动时一次性创建它们，这取决于需求，可能需要几个秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T00:52:36.670

现实情况是，当您这样做时`self.myProperty = [[Class alloc] init]`，您并没有初始化您的属性。相反，你正在初始化一个你告诉你的属性（实际上是一个指针）指向的对象。因此，如果您已经有一个已分配和初始化的对象，您不必再次分配/初始化，您可以这样做`self.myProperty = object`；

UI 属性不会以 nil 开始，这是因为当您在界面构建器中添加元素时，视图拥有您添加的元素，并且这些对象会自动为您初始化。这意味着如果您正在创建 IBOutlets 并将它们连接到某些属性，则不必分配/初始化。

我希望这可以帮到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T01:01:08.587

我没有使用 Storyboard 的经验，但我知道当您通过 xib 文件创建对象时，当您告诉视图控制器使用 xib 文件时，所有对象都会正确实例化。因此，您不必担心在代码中分配/初始化这些对象。

关于使用`self.property = <something>`，这取决于是什么`something`。如果某物是任何类型的现有对象，则无需对该对象执行 alloc init，因为`self.property = ...`语法会调用属性的 setter 方法，该方法将适当地保留、复制、分配等新值给属性。

现在任何类型的现有对象都可以是分配/初始化的对象，或者是从便利方法获得的自动释放对象（例如 NSString 的 stringWithFormat：）。

正如 Kaan Dedeoglu 指出的那样，`self.property = ...`语法将 ivar 指向（并保留）内存中的对象，如果该对象尚未实例化，则由您来初始化该对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T00:53:09.793

不，您不需要 [[Class alloc]init 初始化方法中的属性。

但是，为了清楚起见，我鼓励您在 init 方法中将它们显式设置为 Nil。

# git - 如果适用，如何修改外壳以显示 git 分支之一

> ID：11769564
> 
> 赞同：1
> 
> 时间：2012-08-02T00:45:03.443
> 
> 标签：git, shell

现在，我的外壳设置为显示`export PS1="\t \w $ "`

有没有办法让提示变得动态，总是重新评估它的当前位置和格式，以遵循以下规则：

**1\. 在包含`git`repo 的目录中时，它会更改为包含我所在的分支**

```
19:42:07 (dev) ~ $ 

19:42:07 (release) ~ $ 
```

**1.1 分支是否可以与提示的其余部分以不同的颜色显示？**

**2.在包含`git`repo的目录之外时，它保持原样**

```
19:42:07 ~ $ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T00:49:18.217

Git 发行版包含一个执行此操作的`contrib/completion/git-completion.bash`文件，除此之外还有更多。该文件本身包含安装说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:30:08.373

如果 git-completion.bash 解决方案不可行（例如：没有安装 git-completion 的权限等），您可以手动将以下功能添加到 .bashrc，

```
function parse_git_branch {
      git branch --no-color 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/(\1)/'
} 
```

并从命令中调用该函数以格式化 PS1。我使用以下内容：

```
PS1='\[\e]0;\w\a\]\n\[\e[32m\]\u@\h: \[\e[33m\]\w\[\e[37m\]$(parse_git_branch)\[\e[32m\] \$\[\e[0m\] ' 
```

这导致

![在此处输入图像描述](../Images/2eee879048c0fcea9d63df5072f9d918.png)

我所在`ParVal`的分支机构的名称在哪里。

# java - 如何在 Android (java) 和 OpenGL ES 2.0 上旋转

> ID：11769566
> 
> 赞同：0
> 
> 时间：2012-08-02T00:45:36.630
> 
> 标签：java, android, opengl-es-2.0

实际上我在我的渲染器类的 draw 方法中这样做：

```
 Matrix.setIdentityM(mMMatrix, 0);
//      Rotate view

long time = SystemClock.uptimeMillis()*4000L;
float angle = .09F*(int)time;
Matrix.setRotateM(mMMatrix, 0, angle, 1, 0, 0);
Matrix.rotateM(mMMatrix, 0, -2f, 1, 0, 0);
//Matrix.scaleM(mMMatrix, 0, 0.01f, 0.01f, 0.01f);

// Calculate the projection and view transformation
Matrix.multiplyMM(mMVPMatrix, 0, mVMatrix, 0, mMMatrix, 0);
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVPMatrix, 0);

// Draw Shapes      
obj.draw(mMVPMatrix); 
```

但它不起作用......我尝试了其他一些但没有运气，物体保持不变，没有旋转。

更新：我将代码更改为此，但没有运气。

```
 // Clear Screen
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

        Matrix.setIdentityM(mMMatrix, 0);

        // Rotate view
        Matrix.setRotateM(mMMatrix, 0, angle, 1, 0, 0);
        //Matrix.scaleM(mMMatrix, 0, 0.01f, 0.01f, 0.01f);

        // Calculate the projection and view transformation
        Matrix.multiplyMM(mMVMatrix, 0, mVMatrix, 0, mMMatrix, 0);
        Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mMVMatrix, 0);

        // Draw Shapes      
        obj.draw(mMVPMatrix); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:15:15.957

为什么在 Matrix.setRotateM 之后是 Matrix.rotateM ？第二个禁用了第一个。

这是我在引擎中使用的伪代码：

```
Matrix.setIdentityM(_model_matrix, 0);

Matrix.setRotateM(_rotation_x_matrix, 0, _angles.getX(), 1, 0, 0);
Matrix.setRotateM(_rotation_y_matrix, 0, _angles.getY(), 0, 1, 0);
Matrix.setRotateM(_rotation_z_matrix, 0, _angles.getZ(), 0, 0, 1);
Matrix.multiplyMM(_model_matrix, 0, _rotation_x_matrix, 0, _model_matrix, 0);
Matrix.multiplyMM(_model_matrix, 0, _rotation_y_matrix, 0, _model_matrix, 0);
Matrix.multiplyMM(_model_matrix, 0, _rotation_z_matrix, 0, _model_matrix, 0);

Matrix.multiplyMM(_modelview_matrix, 0, _view_matrix, 0, _model_matrix, 0);
Matrix.multiplyMM(_modelviewprojection_matrix, 0, _projection_matrix, 0, _modelview_matrix, 0); 
```

希望能帮助到你 ;-）

# c# - 在 Windows Server 2008 上挂钩 SMB 文件操作

> ID：11769573
> 
> 赞同：2
> 
> 时间：2012-08-02T00:46:57.237
> 
> 标签：c#, c++, minifilter

在查看了我拥有的几个不同选项后，我决定我的应用程序有必要挂钩与网络相关的文件操作（在此处讨论[Retrieve who created/modified/deleted a file](https://stackoverflow.com/questions/11693799/retrieve-who-created-modified-deleted-a-file)）。无论如何，我一直在研究如何建立一个可靠的挂钩方案。基本上，我需要能够监视我的 Windows 2008 服务器上 SMB 共享上的创建/读取/写入/删除请求，并在需要时拒绝它们。我知道这可以使用微过滤器驱动程序来完成，但我正在寻找一种更快的解决方案，如果有的话。有谁知道解决方案？

哎呀！我设法在原始帖子中遗漏了一个巨大的要求。我还需要能够跟踪哪个用户名在其中一个共享中创建/删除/修改了文件。出于这个原因，我相信文件系统过滤器不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:18:33.110

如果您只想监视目录中发生的文件更改，可以尝试[获取目录更改通知](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261%28v=vs.85%29.aspx)。如果您想以 .Net/C# 方式尝试此[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.asp)。

但这只会通知更改，您将无法控制操作（允许或拒绝）。

如果非要控制运行minifilter就是办法。

# android - 尝试连接到 HTC Rezound 上的服务器时返回未知主机异常，并且仅在 4g 上

> ID：11769579
> 
> 赞同：4
> 
> 时间：2012-08-02T00:48:29.283
> 
> 标签：android, unknown-host, htc-android

我有一个非常具体的 Android HTC Rezound 问题，我希望有人能找到解决方案。

在使用 HTC Rezound 并连接到 4g 网络时，我在尝试使用 HttpURLConnection 连接到我们的服务器时收到未知主机异常错误。这个问题的奇怪之处在于，如果手机在 Wi-Fi 或 3g 上，则与服务器的连接可以正常工作。只有4g有问题。我相信问题源于服务器 TTL（生存时间），它设置为 0 秒。不幸的是，更改 TTL 不是一种选择，需要解决方法。

作为测试，我硬编码了主机名的 IP 地址并尝试使用它进行连接，它工作正常。现在，硬编码 IP 地址并不是真正的解决方案，因为服务器使用的是 DNS 级别的循环负载平衡器。我尝试使用 InitAddress 以编程方式检索 IP 地址：

```
InetAddress inet = InetAddress.getByName(url.getHost());
String ipAddress = inet.getHostAddress(); 
```

不幸的是，此解决方法也返回未知主机异常。

我还尝试使用以下方法更改 Java 的内部 DNS 缓存：

```
 System.setProperty("networkaddress.cache.ttl" , "100"); 
```

但这也不起作用。

任何其他建议或解决方案将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T16:33:33.603

我遇到了 3g 的问题，因为默认情况下电话机代理的 ISP （其他一切和另一个 isp 都可以正常工作）。尝试检查设备上的连接设置，如果设置了则删除。我希望它有所帮助。

# c# - c#自定义日期类，字符串格式

> ID：11769581
> 
> 赞同：1
> 
> 时间：2012-08-02T00:48:46.067
> 
> 标签：c#, string, date, string-parsing, date-manipulation

*首先，我想说this的使用只是为了学习，可能不会在功能应用程序中使用。*

我创建了一个`DateHandler`接收`Date`对象（自定义）的类（命名），它有一个接收**字符串**的函数，将每个字符更改为它的匹配项。

例如：

`"d/m/Y"`可以返回`"1/1/2005"`

```
d => Day
m => Month
Y => Full Year 
```

请注意，未预定义的字符不会更改。

`Date`班级：

```
class Date
{
    #region Properties

    private int _Day;
    private int _Month;

    public int Day
    {
        get
        {
            return _Day;
        }
        set
        {
            if (value < 1)
                throw new Exception("Cannot set property Date.Day below 1");
            this._Day = value;
        }
    }
    public int Month
    {
        get
        {
            return _Month;
        }
        set
        {
            if (value < 1)
                throw new Exception("Cannot set property Date.Month below 1");
            this._Month = value;
        }
    }
    public int Year;

    #endregion

    #region Ctors

    public Date() { }
    public Date(int Day, int Month, int Year)
    {
        this.Day = Day;
        this.Month = Month;
        this.Year = Year;
    }

    #endregion
} 
```

`DateHandler`班级：

```
class DateHandler
{
    #region Properties

    private Date Date;
    private Dictionary<char, string> Properties;
    private int Properties_Count;

    #endregion

    #region Ctors

    public DateHandler()
    {
        Properties = new Dictionary<char, string>();
    }

    public DateHandler(Date Date)
        : this()
    {
        this.SetDate(Date);
    }

    #endregion

    #region Methods

    public void SetDate(Date Date)
    {
        this.Date = Date;
        this.SetProperties();
    }

    private void SetProperties()
    {
        this.Properties.Add('d', this.Date.Day + "");
        this.Properties.Add('m', this.Date.Month + "");
        this.Properties.Add('Y', this.Date.Year + "");
        this.Properties.Add('y', this.Date.Year.ToString().Substring(Math.Max(0, this.Date.Year.ToString().Length - 2)));
        this.Properties_Count = Properties.Count;
    }

    public string Format(string FormatString)
    {
        int len = FormatString.Length;
        if (Properties.ContainsKey(FormatString[0]))
        {
            FormatString = FormatString.Replace(FormatString[0] + "", this.Properties[FormatString[0]] + "");
        }
        for (int i = 1; i < len; i++)
        {
            if (this.Properties.ContainsKey(FormatString[i]) && FormatString[i - 1] != '\\')
            {
                FormatString = FormatString.Replace(FormatString[i] + "", this.Properties[FormatString[i]] + "");
            }
        }
        return FormatString;
    }

    #endregion
} 
```

**我的问题：**我必须为每个 new 定义一个新字典`DateHandler`，并且我正在尝试一种创造性的方式，即只有**一个**字典指向它的匹配定义。有什么想法吗？

**我的主要目标：**字典的一个实例`Properties`，它将用作对来自多个实例的值的引用`DateHandler`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:47:53.030

我认为您所拥有的并非不合理，但一如既往有多种做事方式。我个人的偏好是使用“DateHandler”作为静态类作为助手（因为它做的很少而且很简单）。

```
static class DateHandler 
{     
    #region Properties      
    private static Date Date;
    private static Dictionary<char, string> properties;
    private static Dictionary<char, string> Properties 
    {
        get
        {
            if (properties == null)
            {
                properties = new Dictionary<char, string>();
                SetProperties();
            }
            return properties;
        }
        set
        {
            properties = value;
        }
    }
    private static int Properties_Count;      
    #endregion      

    #region Methods      

    private static void SetProperties()     
    {         
        Properties.Add('d', Date.Day + "");         
        Properties.Add('m', Date.Month + "");         
        Properties.Add('Y', Date.Year + "");         
        Properties.Add('y', Date.Year.ToString().Substring(Math.Max(0, Date.Year.ToString().Length - 2)));         
        Properties_Count = Properties.Count;     
    }
    public static string Format(Date date, string FormatString)     
    {
        Date = date;
        int len = FormatString.Length;         
        if (Properties.ContainsKey(FormatString[0]))         
        {             
            FormatString = FormatString.Replace(FormatString[0] + "", Properties[FormatString[0]] + "");         
        }         
        for (int i = 1; i < len; i++)         
        {             
            if (Properties.ContainsKey(FormatString[i]) && FormatString[i - 1] != '\\')             
            {                 
                FormatString = FormatString.Replace(FormatString[i] + "", Properties[FormatString[i]] + "");             
            }         
        }         
        return FormatString;     
    }      
    #endregion 
} 
```

这将避免每次创建 DateHandler 时都实例化字典。您的使用将如下所示。

```
 Date d = new Date(1, 1, 2012);

 string result = DateHandler.Format(d, "d/m/Y"); 
```

这有它自己的缺点，有时最好避免“帮助类”，但希望它有助于作为思考的食物。

# mongodb - 本地主机上的 MongoDB 监控服务

> ID：11769584
> 
> 赞同：4
> 
> 时间：2012-08-02T00:49:02.403
> 
> 标签：mongodb, performance

是否有可以在本地主机或本地机器上运行的 MongoDB 服务器性能监控工具？在使用第三方托管工具（如 MongoDB 监控服务）时，我担心隐私问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T01:22:47.110

MongoDB 文档包含有关[监控 MongoDB](https://docs.mongodb.com/manual/administration/monitoring/)的信息，包括监控策略、相关[数据库命令](https://docs.mongodb.com/manual/administration/monitoring/#commands)和一些[自托管监控选项](https://docs.mongodb.com/manual/administration/monitoring/#self-hosted-monitoring-tools)。

如果您担心 MongoDB Cloud Manager (née MMS) 收集的信息或想自己收集此信息，您可以查看[监控代理使用的数据库命令](https://docs.cloudmanager.mongodb.com/reference/monitoring/)列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:40:22.557

[MongoBird](http://mongobird.citsoft.net/)是 MongoDB 的最佳监控工具。它可以安装在所有平台上。因为它是用Java开发的。因此，您可以在本地主机上安装 mongobird。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-23T22:05:14.090

MongoDB 在 4.0 版本中创建了一个[免费的监控工具](https://docs.mongodb.com/manual/administration/free-monitoring)，可以在 localhost 上运行。要使用它，只需连接到数据库并运行`db.enableFreeMonitoring()`

例如：

```
mongo test
MongoDB shell version v4.0.4
connecting to: mongodb://127.0.0.1:27017/test 
```

连接后，您可以像这样启用监控：

```
test> db.enableFreeMonitoring()
{
 "state": "enabled",
 "message": "To see your monitoring data, navigate to the unique URL below. Anyone you share the URL with will also be able to view this page. You can disable monitoring at any time by running db.disableFreeMonitoring().",
 "url": "https://cloud.mongodb.com/freemonitoring/cluster/HZL3ISL73QLWSNEAYMER2FGR3BINAEGJ",
 "userReminder": "",
 "ok": 1
} 
```

然后转到提供的 url ( `https://cloud.mongodb.com/freemonitoring/...`)。

最后，禁用监控：

```
test> db.disableFreeMonitoring() 
```

# asp.net - 前端和后端术语

> ID：11769587
> 
> 赞同：0
> 
> 时间：2012-08-02T00:49:27.050
> 
> 标签：asp.net, backend, frontend, software-design

在 ASP.Net 中设计 Web 应用程序时，我通常将项目分为两部分，**后端**（管理部分）和**前端**（访问者/SEO 部分）。假设我的访问者可以登录网站并执行很多任务，例如填写个人资料、发送消息等。

那部分（经过身份验证的用户）为我寻找前端和后端之间的不同“层”，并且有点难以定义是否是前端（为什么访问者/用户会处理它，但没有管理员）或者它是否是后端（为什么用户会主动更改数据库，例如管理员，但权限较少）。

有一个术语来定义该“层”，例如“中端”，或者我在这里将思绪转移到错误的地方并且对此有明确的定义（我不知道）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T00:57:14.140

我会称之为：

*   公共区域
*   用户区
*   管理区

总的来说，我会将这些标识为“区域”或“区域”。对我来说，“后端”是指在服务器上运行的代码，而“前端”是指该代码的输出。我会避免使用该术语。

这是一个非常主观的答案，但这似乎是您问题的本质。

有趣的是，有时开发中最大的障碍是：“我应该怎么称呼它？！”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T21:22:19.587

前端与后端似乎非常主观，因为它们取决于上下文、环境，有时还取决于个人解释。我认为[Wikipedia 对它的定义做得很好](http://en.wikipedia.org/wiki/Front_and_back_ends)，但仍然不总是有明显的区别。

对于那个中间层，我更喜欢“[中介者](http://zesty.ca/mediator.html)”这个词。

# entity-framework - 为什么实体框架需要生成本地查询视图？休眠呢？

> ID：11769588
> 
> 赞同：2
> 
> 时间：2012-08-02T00:49:36.763
> 
> 标签：entity-framework, nhibernate

我发现一个非常有趣的页面：http: [//msdn.microsoft.com/en-us/library/cc853327.aspx](http://msdn.microsoft.com/en-us/library/cc853327.aspx)

在这里您可以看到在查询阶段，有一个名为“生成视图”的阶段会花费很多。尽管 EF 提供了一些方法来预编译它，但是如果你有很多没有预编译的查询，你仍然可能会遇到问题。

您可以在此处找到如何：预生成视图以提高查询性能：http: [//msdn.microsoft.com/en-us/library/bb896240.aspx](http://msdn.microsoft.com/en-us/library/bb896240.aspx)

在这里，您可以看到没有预生成的查询将花费两倍的时间。所以这意味着它确实要花很多钱。[http://blogs.msdn.com/b/appfabriccat/archive/2010/08/06/isolating-performance-with-precompiled-pre-generated-views-in-the-entity-framework-4.aspx](http://blogs.msdn.com/b/appfabriccat/archive/2010/08/06/isolating-performance-with-precompiled-pre-generated-views-in-the-entity-framework-4.aspx)

所以我有一个问题，为什么EF设计这个阶段？NHibernate也有这个阶段吗？如果是真的，它在 Nhibernate 中的表现如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T08:19:13.763

EF 视图与 SQL 视图无关 - EF 视图是编译成可执行代码的映射转换。EF 使用这些转换将其查询表示转换为目标 SQL 表示。这种编译的原因是整个应用程序的性能——您需要花时间进行初始化，但所有后续查询和更新都将使用编译后的代码，而不是在 EDM 中进行一些查找。如果您不需要在运行时修改映射，您甚至可以在编译应用程序期间预编译这些视图。

EF 视图用于查询准备（将一种表示形式转换为另一种表示形式），但必须为每个唯一查询完成查询准备。[在 EF 4 中，除非您手动使用Compiled query](http://msdn.microsoft.com/en-us/library/bb896297.aspx)，否则不会缓存此准备工作。在 EF 4.5 和 5.0 (.NET 4.5) 中，所有查询都会自动“编译”= 有缓存，每个唯一查询实际上只准备一次。相同查询的后续执行使用缓存中的编译版本。

[您可以在此初学者指南](http://msdn.microsoft.com/en-us/data/hh949853.aspx)中阅读有关性能和 EF 5.0 的更多信息。

# c# - 在 C# 中安装 EXE 并指定目录

> ID：11769591
> 
> 赞同：0
> 
> 时间：2012-08-02T00:50:15.083
> 
> 标签：c#, startprocessinfo

如何在 C# 中指定安装特定程序的位置？我尝试使用 .WorkingDirectory 但它没有用。我想在桌面的 NotepadFolder 中安装 Notepad++ 安装程序，我该怎么做？

```
 static void LaunchInstaller()
    {
        ProcessStartInfo startInfo = new ProcessStartInfo();
        startInfo.FileName = @"C:\Users\UserOne\Downloads\npp.6.1.5.Installer.exe";
        startInfo.WorkingDirectory = @"C:\Users\UserOne\Desktop\NotepadFolder";
        //The line above doesn't work. Notepad++ still installs to its current directory, in ProgramFiles
        startInfo.Arguments = "/S";
        Process.Start(startInfo);
    } 
```

我在[dotnetperls.com](http://www.dotnetperls.com/process-start)看到了下面的代码。他们没有指定两个字符串及其参数的使用，所以我现在很困惑：

```
static void LaunchCommandLineApp()
{
const string ex1 = "C:\\";
const string ex2 = "C:\\Dir";

ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.CreateNoWindow = false;
startInfo.UseShellExecute = false;
startInfo.FileName = "dcm2jpg.exe";
startInfo.WindowStyle = ProcessWindowStyle.Hidden;
startInfo.Arguments = "-f j -o \"" + ex1 + "\" -z 1.0 -s y " + ex2;

try
{
    Process exeProcess = Process.Start(startInfo)
    {
    exeProcess.WaitForExit();
    }
}
catch{}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:59:28.243

这与编程无关，我投票决定关闭......与此同时......

它是使用 Nullsoft 安装系统 v2.46 编写的。

看看[文档](http://nsis.sourceforge.net/Docs/Chapter3.html#3.2.1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:50:27.817

呜呼！感谢您提供链接，我的代码有效！您只需在参数中添加 /D=您的安装目录。这是我更新的代码：

```
 static void LaunchInstaller()
    {
        const string installdir = @"C:\Users\UserOne\Desktop\NotepadFolder";

        ProcessStartInfo startInfo = new ProcessStartInfo();
        startInfo.FileName = @"C:\Users\UserOne\Downloads\npp.6.1.5.Installer.exe";
        startInfo.Arguments = "/S /D=" + installdir; //My new code
        Process.Start(startInfo);
    } 
```

# ruby-on-rails - 添加 Accepts_nested_attributes_for 时，Fields_for 消失

> ID：11769592
> 
> 赞同：11
> 
> 时间：2012-08-02T00:50:21.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, nested-attributes, fields-for

我在 Rails 3.2.5 中做一个嵌套表单，但是当我添加`accepts_nested_attributes_for`我的`fields_for`消失时（它们只是停止在我的表单中显示）。
这是我的模型：

```
class Product < ActiveRecord::Base
    attr_accessible :title, :description, :variants_attributes

    has_many :variants
    accepts_nested_attributes_for :variants

    validates :title, presence: true
end 
```

我的第二个模型是

```
class Variant < ActiveRecord::Base
    belongs_to :product
    attr_accessible :price, :sku, :weight, :inventory_quantity, :product_id
end 
```

在我看来，我有

```
<%= form_for [:admin, @product], :html => {:multipart => true} do |f| %>

 <%= render 'admin/shared/error_messages', object: f.object %>

 <fieldset>
  <legend>Producto Nuevo</legend>  
    <div class="control-group">
      <%= f.label :title, 'Título', class: 'control-label' %>
      <div class="controls">
        <%= f.text_field :title %>
      </div>
   </div>

    **<%= f.fields_for :variants do |variant| %>
     <%= render 'inventory_fields', f: variant %>
    <% end %>**  

  <div class="actions">
    <%= f.submit 'Guardar', class: 'btn btn-primary' %>
  </div>
<% end %> 
```

_inventory_fields.html.erb

```
<div class="control-group">
  <%= f.label :inventory_quantity, 'How many are in stock?', class: 'control-label' %>
  <div class="controls">
    <%= f.text_field :inventory_quantity, class: 'span1', value: '1' %>
  </div>
</div> 
```

** 之间的部分是未打印的部分。当我在我的产品模型 fields_for 中删除 accept_nested_attributes_for 时再次开始显示，但我的表单将无法正常工作。
发生了什么？！？！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-02T03:28:25.303

在控制器中新的动作调用

```
@product.varients.build 
```

这应该在产品变量集合中的内存变量中创建 1 并且它应该绑定到字段

# mysql - Rails 3 - 列名（旧版数据库）

> ID：11769594
> 
> 赞同：1
> 
> 时间：2012-08-02T00:50:47.440
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3, legacy-database

> **可能重复：**
> [Rails 中列名的别名](https://stackoverflow.com/questions/4014831/alias-for-column-names-in-rails)

我正在编写一个 ActiveRecord 模型模块来访问 MySQL 遗留数据库。我的问题是数据库的列命名约定如下所示：`groupID`, `metaGroupName`, `flagName`. 有没有一种简单的方法可以使模型与这种命名约定很好地配合？

**更新：**如果可能的话 ，我想避免这种`alias_attribute`方法。它不是一个小型数据库，而且要别名的列会很多。ActiveRecord 中是否有一种方法可以解释我可以覆盖的列名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T03:11:53.233

你不想重复自己——这很好。幸运的是，Ruby 让它变得相当容易。尝试以下操作：

```
class Model < ActiveRecord::Base

  column_names.each do |cn|
    alias_attribute cn.underscore.intern, cn
  end

end 
```

然后，我将其分解为`Module`可能是这样的：

```
module AliasLegacyColumns
  extend ActiveSupport::Concern

  included do
    column_names.each {|cn|
      alias_attribute cn.underscore.intern, cn
    }
  end

end 
```

然后根据需要将其包含在您的模型中。为了进一步改进，我将提供一个`alias_columns`类级方法，该方法接受参数，例如，`:include`您可以对所述模块`:exclude`进行猴子补丁，但仅根据模型的需要调用。`ActiveRecord::Base``alias_columns`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:14:03.290

只需将以下内容添加到您的模型中

```
alias_attribute :new_column_name, :myLegacyColumnName 
```

# jquery - 使用 jquery click 函数来定位带有 jquery show/hide 的链接在 firefox 和 ie 中不起作用，但在 safari 中起作用

> ID：11769598
> 
> 赞同：1
> 
> 时间：2012-08-02T00:51:03.100
> 
> 标签：jquery, jquery-ui

我正在使用以下 jquery 在 div 上显示/隐藏以显示文本，然后再次消失。当您单击它时，可以重新打开 div。我在文本中有一个链接，并且正在使用 jquery 来定位“a”链接，该链接在 safari 中可以正常工作，但在 Firefox 或 ie 中却不行。我确实在 Firefox 中遇到错误控制台错误，并带有 ReferenceError: 事件未定义，因此尝试将实际 url 放入其中，但这对我也不起作用。

```
var isOn = true;
function getOff() {
    if (isOn) {
        $("#button").trigger('click');
    }
}
$(document).ready(function() {
    $("#button").toggle(function() {
        $("#expandText").show("slide", {
            direction: "left"
        }, 1000);
        $("#button").css("background-image", "url(images/Text_Expander_off.jpg)");
    }, function() {
        $("#expandText").hide("slide", {
            direction: "left"
        }, 1000);
        $("#button").css("background-image", "url(images/Text_Expander_on.jpg)");
    });

    $("a").click(function() { //Onclick <a></a>
        event.preventDefault();
        var url = $(this).attr("href");
        window.location = url;
    });
    $("#button").trigger('click');
    setTimeout("getOff()", 5000);
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:00:35.123

我相信您只需要更改此行：

```
$("a").click(function() { 
```

到

```
$("a").click(function(event) { 
```

# java - 字数不重复

> ID：11769599
> 
> 赞同：-3
> 
> 时间：2012-08-02T00:51:09.587
> 
> 标签：java, count, word

这是我使用java的字数统计程序。我需要重新编程，这样某事，某事；某物？某物！有些东西算作一个词。这意味着无论大小写和标点符号如何，它都不应该将同一个单词计算两次。

```
import java.util.Scanner;
public class WordCount1
{
    public static void main(String[]args)
    {
        final int Lines=6;
        Scanner in=new Scanner (System.in);
        String paragraph = "";
        System.out.println( "Please input "+ Lines + " lines of text.");
        for (int i=0; i < Lines; i+=1)
        {
            paragraph=paragraph+" "+in.nextLine();
        }
        System.out.println(paragraph);
        String word="";
        int WordCount=0;
        for (int i=0; i<paragraph.length()-1; i+=1)
        {
            if (paragraph.charAt(i) != ' ' || paragraph.charAt(i) !=',' || paragraph.charAt(i)    !=';' || paragraph.charAt(i) !=':' )
            {
                word= word + paragraph.charAt(i);
                if(paragraph.charAt(i+1)==' ' || paragraph.charAt(i) ==','|| paragraph.charAt(i) ==';' || paragraph.charAt(i) ==':')
                {
                    WordCount +=1;
                    word="";
                }
            }
        }
        System.out.println("There are "+WordCount +" words ");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:02:25.587

由于这是家庭作业，这里有一些提示和建议。

*   有一个聪明的小方法叫做`String.split`将字符串拆分为多个部分，使用指定为正则表达式的分隔符。如果您以正确的方式使用它，这将为您提供“字数统计”问题的单行解决方案。（如果你被告知不要使用 split，你可以忽略它......尽管这是一个经验丰富的 Java 开发人员首先会考虑的简单解决方案。）

*   正确格式化/缩进你的代码......在你展示给其他人之前。如果你的导师没有为此扣分，他/她就没有做好他的工作。

*   使用标准 Java 命名约定。的大小写`Lines`不正确。它可以`LINES`用于清单常量或`lines`变量，但以大写字母开头的混合大小写名称应*始终*是类名。

*   在运算符（包括赋值运算符）周围使用空格字符时要保持一致。

*   硬连线用户必须提供的输入行数是一个坏主意（而且完全没有必要）。而且您没有处理他/供应少于 6 行的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T00:55:09.433

在进行进一步处理之前，您应该删除标点符号并更改为单个大小写。（注意语言环境和 unicode）

将输入分解为单词后，您可以通过将它们传递到 Set 并检查集合的大小来计算唯一单词的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T03:03:10.227

干得好。这有效。只需阅读评论，您就应该能够关注。

```
import java.util.Arrays;
import java.util.HashSet;
import javax.swing.JOptionPane;

// Program Counts Words In A Sentence. Duplicates Are Not Counted.
public class WordCount
{
    public static void main(String[]args)
    {
        // Initialize Variables
        String sentence = "";
        int wordCount = 1, startingPoint = 0;

        // Prompt User For Sentence
        sentence = JOptionPane.showInputDialog(null, "Please input a sentence.", "Input Information Below", 2);

        // Remove All Punctuations. To Check For More Punctuations Just Add Another Replace Statement.
        sentence = sentence.replace(",", "").replace(".", "").replace("?", "");

        // Convert All Characters To Lowercase - Must Be Done To Compare Upper And Lower Case Words.
        sentence = sentence.toLowerCase();

        // Count The Number Of Words
        for (int i = 0; i < sentence.length(); i++)
            if (sentence.charAt(i) == ' ')
                wordCount++;

        // Initialize Array And A Count That Will Be Used As An Index
        String[] words = new String[wordCount];
        int count = 0;

        // Put Each Word In An Array
        for (int i = 0; i < sentence.length(); i++)
        {
            if (sentence.charAt(i) == ' ')
            {
                words[count] = sentence.substring(startingPoint,i);
                startingPoint = i + 1;
                count++;
            }
        }

        // Put Last Word In Sentence In Array
        words[wordCount - 1] = sentence.substring(startingPoint, sentence.length());

        // Put Array Elements Into A Set. This Will Remove Duplicates
        HashSet<String> wordsInSet = new HashSet<String>(Arrays.asList(words));

        // Format Words In Hash Set To Remove Brackets, And Commas, And Convert To String
        String wordsString = wordsInSet.toString().replace(",", "").replace("[", "").replace("]", "");

        // Print Out None Duplicate Words In Set And Word Count
        JOptionPane.showMessageDialog(null, "Words In Sentence:\n" + wordsString + " \n\n" +
                                                "Word Count: " + wordsInSet.size(), "Sentence Information", 2);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T01:03:36.087

你真正的问题是，你想要一个 Distinct wordcount，所以，你应该跟踪已经遇到的单词，或者从文本中完全删除它们。

假设您选择第一个，并将您已经遇到的单词存储在列表中，然后您可以检查该列表是否已经看到该单词。

```
List<String> encounteredWords = new ArrayList<String>();
// continue after that you found out what the word was
if(!encounteredWords.contains(word.toLowerCase()){
    encounteredWords.add(word.toLowerCase());
    wordCount++;
} 
```

但是，Antimony 也提出了一个有趣的评论，他使用 Set 的属性来查看不同的字数是多少。它被定义为一个集合永远不能包含重复，所以如果你只是添加更多相同的单词，集合不会增长。

```
Set<String> wordSet = new HashSet<String>();
// continue after that you found out what the word was
wordSet.add(word.toLowerCase());
// continue after that you scanned trough all words
return wordSet.size(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T18:13:02.887

在解析输入字符串时，将其逐字存储在地图数据结构中。只需确保“字”、“字？” “单词！” 所有内容都与地图中的“单词”键一起存储，并在您必须添加到地图时增加单词的计数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T00:59:15.187

如果您知道要忽略的标记 (;, ?, !)，您可以简单`String.replace`地从单词中删除字符。您可能想使用`String.startsWith`和`String.endsWith`帮助

将您的值转换为小写以便于匹配 ( `String.toLowercase`)

使用“Set”是一个绝妙的主意。如果您想知道某个特定单词出现了多少次，您还可以利用`Map`某种

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T00:59:57.113

1.  删除所有标点符号
2.  将所有字符串转换为小写或大写
3.  把这些字符串放在一组
4.  获取集合的大小

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-02T01:00:52.550

1.  你需要去掉标点符号；这是一种方法：[逐字符翻译字符串](https://stackoverflow.com/q/3051595/535275)

2.  上述内容也可用于规范化案例，尽管可能还有其他实用程序可以这样做。

3.  现在，您描述的所有变体都将转换为相同的字符串，因此可以被识别。正如几乎所有其他人所建议的那样， set 将是计算不同单词数量的好工具。

# .net - IObservable 订阅的自我错误相关的自我处置

> ID：11769602
> 
> 赞同：0
> 
> 时间：2012-08-02T00:51:42.790
> 
> 标签：.net, exception-handling, f#, system.reactive, combinators

我有如下所示的 F# 代码：

```
module O = Control.Observable
//...
use ss = serve' 4000
         |> O.subscribe
            (fun c -> use cs = RSS.items
                               |> O.subscribe (bytes >> c.SendAll) |> ignore) 
```

* * *

在哪里

```
serve'    : int -> IObservable<Socket>
c         : Socket
RSS.items : IObservable<XElement>
bytes     : XElement -> byte []
c.SendAll : byte [] -> unit 
```

*   `cs`保留直到`c.SendAll`失败的最惯用的方法是什么？
*   是否有或者是否可以定义**`Observable.subscribeUntilError(action)`**如果`action`失败，订阅会在哪里被处理；否则`action`只要`IObservable`一直推就跑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:31:22.020

我想出了这个：

```
let inline Δ<'a> = Unchecked.defaultof<'a>
let inline LOG x = printf "%A" x

module O = Observable
  let d = ref (Δ:IDisposable)
  let b x = try a x with e -> LOG e; let s = !d in if s <> Δ then s.Dispose()
  d := o |> O.subscribe b
  {
    new IDisposable with
      member x.Dispose() = let s = !d in if s <> Δ then d := Δ; s.Dispose()
  } 
```

* * *

为了证明差异，请尝试`main`！

**使用`subscribe`**：

```
use s = new Subject<int>()
use x = s |> O.subscribe (fun _ -> raise <| Exception ())
use y = s |> O.subscribe (printf "%i")
s.OnNext 20 
```

应用程序崩溃：

```
Unhandled Exception: System.Exception: Exception of type 'System.Exception' was thrown.
   at Microsoft.FSharp.Core.Operators.Raise[T](Exception exn)
   at Program.System.x@604-5.Invoke(Int32 _arg1) in C:\Eniox\Eniox.News.Google\Eniox.News.Google\Program.fs:line 60
   at Microsoft.FSharp.Control.CommonExtensions.SubscribeToObservable@1915.System-IObserver`1-OnNext(T value)
   at System.Reactive.Observer`1.OnNext(T value)
   at System.Reactive.Subjects.Subject`1.OnNext(T value)
   at Program.System.main(String[] args) in C:\Eniox\Eniox.News.Google\Eniox.News.Google\Program.fs:line 606 
```

* * *

**现在使用`subscribeUE`**：

```
use s = new Subject<int>()
use x = s |> O.subscribeUE (fun _ -> raise <| Exception ())
use y = s |> O.subscribe   (printf "%i")
s.OnNext 20 
```

愉快地处理订阅`x`，应用程序继续运行没有打嗝并正常退出！输出：*_* `LOG = ignore`

```
20 
```

* * *

我很想知道在 RX 2.0 的某个地方是否确实存在类似的功能，因为我发现这个组合器太有用了，不能省略。

# networking - 有没有办法验证交换机是否收到了数据包？

> ID：11769604
> 
> 赞同：0
> 
> 时间：2012-08-02T00:52:18.203
> 
> 标签：networking, routing, network-programming, switch-statement, router

我有一个 router1-switch-router2 连接。我的问题是，如果我从路由器 1 向路由器 2 发送数据包，路由器 2 不会收到它。我确定 IP 地址/子网地址是正确的。而且我还确定数据包会从路由器 1 发出。而且我也确定交换机的内部端口连接。我可以访问 onpath 开关。是否有任何特定的命令可以在交换机中使用来检查是否接收到数据包？ARP 本身没有得到解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T00:55:14.070

您可以在发送方和接收方上运行一个数据包捕获应用程序，它会告诉两个盒子上的传入和传出数据包。

在这种情况下，您的数据包可能在发送方或接收方被丢弃。丢包可能有数百万个原因。但这是一个很好的开始。

# php - php站点未连接到亚马逊rds上的mysql

> ID：11769605
> 
> 赞同：2
> 
> 时间：2012-08-02T00:52:25.287
> 
> 标签：php, mysql, amazon-ec2, amazon-rds

首先，设置如下：AWS EC2 实例已启动并正在运行。端口 22,80 和 3306 已添加到安全组

RDS 数据库实例已启动并正在运行。我的本地 IP 被添加为 CIDR/IP 连接。AWS 账户 ID 作为 EC2 安全组连接添加。

对我来说，地区不同，这有点奇怪。RDS 是美国东部（弗吉尼亚北部），EC2 是美国西部（俄勒冈）。

我的本地数据库已成功导入 RDS。我使用这样的命令行：

```
C:\xampp\mysql\bin>mysqldump -u root 'local database' | mysql -- host='Endpoint' --  user='user login' --password='user pwd' ' rds database' 
```

我也在使用 MySQL Workbench 来连接和查询 rds 上的数据库。我从来没有将我的备份 sql 文件（'localhostdatabase.sql'）导入 rds。

这是我的连接方式：（两个选项都不起作用。）

```
// $serverConnect = mysql_connect('rds endpoint','rds admin','rds pwd');
// $serverConnect = mysql_connect('EC2 elastic ip','rds admin', 'rds pwd'); 
```

当您单击[http://www.realcardio.com上的“演示”按钮时，您会看到错误](http://www.realcardio.com)

我需要配置一个php文件吗？如果是这样，我该怎么做？我的网络文件存储在 /var/www/html。但我不知道 php 配置文件的位置。

我使用 WinSCP 连接到 EC2。如果我需要在此处修改文件，如何连接到 RDS？

我会排除故障并与您分享任何内容。只是想让它启动并运行。我很感激任何帮助！

丹麦

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T01:11:18.677

好的，这里有很多问题，所以我会尝试解决所有问题：

1.  除非您喜欢慢速性能，否则您的 RDS 实例和 EC2 实例应位于同一区域。易于更改，但在启动之前进行。
2.  除了数据库凭据和 RDS 实例地址之外，您无需在 PHP 文件中配置任何内容。您应该使用您列出的第一个选项。
3.  您无法建立连接的原因可能是您的安全组。仔细检查您的 EC2 安全组是否已作为“允许”添加到您的 RDS 安全组。请记住，每个安全组都是不同的。如果在验证这些设置后**仍然**无法正常工作，则直接将 EC2 实例的 IP 地址添加到 RDS 安全组。
4.  您没有询问的问题：关闭您网站上的 display_errors。它会公开您不希望向用户公开的信息。另外，不要使用“mysql_*”函数。他们已经开始了弃用过程，漏洞比你的漏洞还多，并且还错过了许多新的 MySQL 功能。请改用 PDO 或 MySQLi。

# python - 创建解析字典以与 sys.argv 一起使用

> ID：11769607
> 
> 赞同：3
> 
> 时间：2012-08-02T00:52:39.447
> 
> 标签：python, parsing, dictionary, python-3.x

我正在尝试制作一个非常基本的脚本，该脚本利用 TkInter 根据用户输入绘制线条。用户将通过命令行执行脚本，使用参数来确定绘制的线条。

可能的命令是：

```
(# signifies any whole number the user chooses)

P #   (selects a pen to draw with)
D     (pen down / starts drawing)
N #   (moves the pen north # increments)
E #   (moves the pen east # increments)
S #   (moves the pen south # increments)
W #   (moves the pen west # increments)
U     (pen up / stops drawing) 
```

例子：

```
Parser.py P 3 D N 4 E 2 S 4 W 2 U 
```

上面的示例将绘制一个高矩形。

我正在尝试为 sys.argv 创建一个基本解析器，它将遍历所有参数并根据所述参数及其顺序执行字典中的方法。

这是我的代码，它通过 sys.argv 运行并基于参数创建一个数组（我将添加错误检查，所以现在假设一个快乐的一天）：

```
class JoshSourceReader(object):
    """ responsibe for providing source text for parsing and drawing
        Initiates the Draw use-case.
        Links to a parser and passes the source text onwards """
    def __init__(self):
        self.parser = JoshParser()
        self.source = []
    def go(self):
        i = 1
        x = len(sys.argv)
        while i < x:
            if sys.argv[i]=="P":
                self.source.append("P " + str(sys.argv[i + 1]))
                i += 2
            elif sys.argv[i]=="D":
                self.source.append("D")
                i += 1
            elif sys.argv[i]=="N":
                self.source.append("N " + str(sys.argv[i + 1]))
                i += 2
            elif sys.argv[i]=="E":
                self.source.append("E " + str(sys.argv[i + 1]))
                i += 2
            elif sys.argv[i]=="S":
                self.source.append("S " + str(sys.argv[i + 1]))
                i += 2
            elif sys.argv[i]=="W":
                self.source.append("W " + str(sys.argv[i + 1]))
                i += 2
            elif sys.argv[i]=="U":
                self.source.append("U")
                i += 1
        self.parser.parse(self.source) 
```

因此，从我上面的示例生成的数组将如下所示：

```
source=['P 3', 'D', 'N 4', 'E 2', 'S 4', 'W 2', 'U'] 
```

**所以我的问题是：**如何创建一个有效的方法字典，与上述数组一起工作并根据数组元素一个一个地执行方法？我什至开始怀疑这是否可能，因为有些方法需要传递属性（数字），而有些则不需要。任何人都可以对此事有所了解吗？

请记住，我对 Python*很陌生。*

**编辑：**我忘记了一个重要的信息。N、E、S、W 都指同一个方法，但每次都采用不同的参数。这是方法（尚未绘制）：

```
def drawLine(self, direction, distance):
    print("drawing line of length " + str(distance) + " at "
          + str(direction)) 
```

因此，如果我使用“S 3”调用此方法，我会这样称呼它：

```
drawer.drawLine(180, 3) 
```

如果我用“W 1”来称呼它，我会这样称呼它：

```
drawer.drawLine(270, 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:03:04.997

您可以为函数提供默认参数。因此，只需执行以下操作：

```
parsedict = {}
def func_P(times=0):
    #do whatever here
parsedict["P"] = func_P
#repeat however many times
for x in source:
    splitx = x.split(" ")
    if len(splitx) >= 2:
        parsedict[splitx[0]](splitx[1])
    else:
        parsedict[splitx[0]]() 
```

如果您需要其他任何内容，请发表评论。应该可以，但我没有测试。你也可以使用[lambda 函数](http://docs.python.org/tutorial/controlflow.html#lambda-forms)，但你说你是 Python 新手，所以我手动定义了函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T03:10:48.737

这是一个稍微棘手的问题，最好使用一个体面的解析框架来解决。我通常推荐 pyparsing 来处理这样的事情。但是，这是一个不使用任何外部框架的解决方案。

它有点难看，但基本上，它会将输入字符串（比如“P 1”）解析为一个操作和一个整数。字典包含要调用的方法，以及要传递给该方法的任何附加参数（对于这种`drawLine()`情况）。

我在没有使用类的情况下完成了此操作，但只需将`self`其作为第一个参数添加到所有内容中即可解决。

```
def selectPen(pen):
    print('called selectPen with pen', pen)

def penDown():
    print('called penDown')

def drawLine(direction, length):
    print('called drawLine with direction', direction, 'and length', length)

def penUp():
    print('called penUp')

def parseSource(source):
    tempSource = [op.split(' ') for op in source]
    parsedSource = []
    for op in tempSource:
        parsedOp = []
        for i, el in enumerate(op):
            if i == 0:
                parsedOp.append(el)
            else:
                try:
                    parsedOp.append(int(el))
                except ValueError:
                    parsedOp.append(el)
        parsedSource.append(tuple(parsedOp))

    return parsedSource

def dispatch(parsedSource):
    opDict = {'P':(selectPen,), 'D':(penDown,), 'N': (drawLine, 0), 'S':(drawLine, 180), 
    'E': (drawLine, 90), 'W': (drawLine, 270), 'U': (penUp,)}

    for op in parsedSource:
        methodName = op[0]
        methodToCall = opDict[methodName][0] 
        args = op[1:]
        if len(opDict[methodName])>1:
            args = opDict[methodName][1:] + args

        methodToCall(*args)

if __name__ == '__main__':
    source=['P 3', 'D', 'N 4', 'E 2', 'S 4', 'W 2', 'U']
    parsedSource = parseSource(source)
    dispatch(parsedSource) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:02:47.410

这不是答案，而是对您的代码的扩展评论。我猜您过去曾使用 C 或类似 C 的语言（Java、JavaScript 等）工作过。您正在`sys.argv` 像这样迭代：

```
i = 1
x = len(sys.argv)
while i < x:
    if sys.argv[i]=="P": 
```

在 Python 中，有更简单的方法来遍历列表。例如：

```
for arg in sys.argv:
    if arg == 'P': 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T01:14:17.283

```
class Painter(object):                                                            
    pencil_width = 1
    is_drawing = False

    def set_pencil(self, width=1):
        self.pencil_width = int(width)
    P = set_pencil

    def draw_north(self, blocks=1):
        if self.is_drawing:
            ...
    N = draw_north

    def process_command(self, str_):
        func_name = str_.split(' ')[0]
        args = str_.split(' ')[1:]
        try:
            func = getattr(self, func_name)
        except AttributeError:
            raise ValueError('Method %s does not exists'
                              % func_name)
        func(*args)

painter = Painter()
for command in source:
    painter.process_command(command) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T01:10:50.330

您可以这样做，其中字典将“命令”映射到它们采用的参数数量：

```
argdict = {
    'P': 1,
    'D': 0,
    'N': 1,
    'E': 1,
    'S': 1,
    'W': 1,
    'U': 0
}

args = sys.argv[1:]
source = []

while args:
    command = [args.pop(0)]
    nargs = argdict[command[0]]
    command.extend(args[:nargs])
    args = args[nargs:]
    source.append(' '.join(command))

print source 
```

给定您的示例输入，这将创建一个如下所示的列表：

```
['P 3', 'D', 'N 4', 'E 2', 'S 4', 'W 2', 'U'] 
```

# iphone - UIViewController 不调用 dealloc 或调用它两次

> ID：11769615
> 
> 赞同：0
> 
> 时间：2012-08-02T00:53:14.367
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, dealloc

我的单例和 UIViewController 有一些问题；

单例.h

```
@property (nonatomic, retain) UIViewController *viewController; 
```

单身人士.m

```
...

@synthesize viewController = _viewController;

- (void)load {
   self.viewController = [[[UIViewController alloc] initWithNibName:@"NibName" bundle: nil] autorelease];
}

- (void)unload {
   [_viewController release];
} 
```

这`viewController`由应用程序的不同部分通过`pushViewController:animated:`. 但有时我需要`viewController`通过调用`- (void)unload`Singleton 类的方法来释放！如果`pushViewController:animated:`从不要求`viewController`一切正常并且 dealloc 正在调用，但如果 pushViewController（和 viewController 执行 viewDidLoad），则 dealloc 不起作用。如果我做类似`self.viewController = nil;`dealloc 调用两次...我做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T00:57:48.017

您的卸载功能应仅包括：

```
- (void)unload {
   self.viewController = nil;
} 
```

当您将保留属性设置为 nil 时，它会释放实例变量并将其归零。您只是在此处的财产上留下一个悬空指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:55:38.823

您需要`nil`在发布后将其设置为：

```
[_viewController release];
_viewController = nil; 
```

否则下一个出现的人将尝试使用无效指针来做事。

# json - 带反斜杠的 Json 对象，gson 序列化

> ID：11769616
> 
> 赞同：3
> 
> 时间：2012-08-02T00:53:15.393
> 
> 标签：json, gson

我想将 java 对象转换为字符串格式*的 json 对象。我正在使用 gson 库。有没有办法做到这一点。

（我不确定它是否是这个结构的正确名称）字符串格式的 json 对象：*

```
{ [\"name\":\"Ajay\",\"age\":30,\"email\":\"ajay@ajay.com\"]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:53:13.650

我很确定 gson 本身无法处理这个问题，但你可以。给定字符串`s`看起来像

```
 { [\"name\":\"Ajay\",\"age\":30,\"email\":\"ajay@ajay.com\"]} 
```

你只需要调用 gson on `s.replace("\\\"", "\"")`。只需清理你的字符串，让它看起来应该（你的引号看起来不同，也许你也需要修复它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T16:55:10.103

这可能太深奥了，但是如果您创建一个 JSON 字符串（通过 GSON 或 JSON.org 等其他库）并 GSON 序列化该字符串，您将得到反斜杠。这对我来说很烦人，但它适用于您的情况，代码比替换更多，但如果反斜杠在您的 JSON 中有效，则更安全。

# javascript - 如何使用 jQuery 获取原始状态文本

> ID：11769618
> 
> 赞同：1
> 
> 时间：2012-08-02T00:53:47.687
> 
> 标签：javascript, jquery

发生错误时，我尝试访问发回服务器的状态文本。在服务器端，我将状态文本设置为错误消息。StatusCode 是 500，statusText 是错误描述。

Headers 部分内的 Chrome 控制台输出为：

```
Status Code:500 (big red dot) Error Message: Something went wrong. 
```

但是当我现在尝试在 .error() 函数回调中访问 statusText 时，总是有文本“错误”：

```
.error(function (xhr, text) {
    alert(xhr.statusText);
}); 
```

jQuery 是覆盖这个字段还是我如何访问原始值？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:01:25.290

我认为您需要查看回调的第三个参数，它应该是 HTTP 状态文本。（根据错误回调的 jQuery [API 文档）](http://api.jquery.com/jQuery.ajax/)

```
function (xhr, ts, err) {
    // ts  => "error", "abort", etc (jQuery-specific)
    // err => HTTP error from server
} 
```

# oracle - 动态打开 SQL plus 假脱机文件（在假脱机关闭之前）

> ID：11769619
> 
> 赞同：1
> 
> 时间：2012-08-02T00:54:14.017
> 
> 标签：oracle, file, sqlplus, spool

用于盲人的屏幕阅读器工具 (JAWS/CURSOR) 无法读取 Oracle SQLplus 中的 SQL 语句的结果。假脱机输出并在文本编辑器中读取假脱机文件工作正常。但是在每个 SQL 语句之后关闭假脱机以确定结果是很乏味的。有谁知道在不关闭假脱机（不关闭假脱机）的情况下打开假脱机文件的方法谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:41:25.480

Oracle 将输出缓冲到假脱机文件并定期刷新（我的系统上每 8KB，我看不到调整它的方法；根据[Tom](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3aNO%3a%3aP11_QUESTION_ID:1317802337341)的说法，实际上是 O/S 执行此操作），但不执行最终刷新，直到您关闭文件（因此，如果您运行产生大量输出的查询，您可以在假脱机文件中看到部分结果，但结尾缺失；至少在 *nix 中）。因此，在您使用`spool off`.

在 Unix/Linux 环境中，我建议使用`sqlplus | tee <file>`，它将整个会话镜像到一个文件中并且没有缓冲区延迟。似乎有 Windows 等价物[`tee`](http://en.wikipedia.org/wiki/Tee_%28command%29)，但我没有使用它们的经验。

我想知道您是否仅限于使用 SQL*Plus。您是否考虑过使用[SQL Developer](http://docs.oracle.com/cd/E25259_01/doc.31/e26419/install.htm#CIHFHGFG)代替？同样，我没有将它与屏幕阅读器一起使用的经验，但他们至少似乎已经考虑过了。

# email - 邮件服务器更改回复地址？

> ID：11769626
> 
> 赞同：1
> 
> 时间：2012-08-02T00:55:52.723
> 
> 标签：email, email-client, sendgrid, mail-server

**我们有一个应用程序以NNN@email.example.com**的形式发送带有回复地址的邮件。邮件通过 Sendgrid 发送，回复使用 Sendgrid 的 Parse API 进行解析。**问题是由于回复地址已更改为NNN@sendgrid.net**，因此某些电子邮件无法回复我们。Sendgrid 支持人员表示，他们从未接触过回复，我们已通过 Gmail 登录帐户确认我们的应用程序正确发送邮件。所以这让我怀疑某些邮件服务器正在将域名与 MX 主机的域名进行切换。email.example.com 的 MX 记录是：

```
mx3.sendgrid.net    20
mx4.sendgrid.net    20
mx5.sendgrid.net    20
mx.sendgrid.net     10
mx2.sendgrid.net    20 
```

是否有任何已知会修改回复地址的邮件服务器或客户端？或者还有其他可能的解释吗？

**编辑**由我们的应用程序发送并使用 Gmail 帐户登录的电子邮件的标题（已清理以删除客户信息）：

```
Delivered-To: logger@company.com 
Received: by 10.112.62.41 with SMTP id v9csp143404lbr; 
Tue, 31 Jul 2012 04:25:29 -0700 (PDT) 
Received: by 10.182.51.37 with SMTP id h5mr22717342obo.35.1343733928944; 
Tue, 31 Jul 2012 04:25:28 -0700 (PDT) 
Return-Path: <Editors@domain.com> 
Received: from o1.email.domain.com (o1.email.domain.com. [208.117.48.105]) 
by mx.google.com with SMTP id m6si10752851oec.6.2012.07.31.04.25.27; 
Tue, 31 Jul 2012 04:25:28 -0700 (PDT) 
Received-SPF: pass (google.com: domain of Editors@domain.com designates 208.117.48.105 as permitted sender) client-ip=208.117.48.105; 
Authentication-Results: mx.google.com; spf=pass (google.com: domain of Editors@domain.com designates 208.117.48.105 as permitted sender) smtp.mail=Editors@domain.com; dkim=pass header.i=@Domain.com 
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed; d=Domain.com; h=date 
:from:reply-to:to:message-id:subject:mime-version:content-type 
:content-transfer-encoding; s=smtpapi; bh=+VZlU9LWGUpMR4neAk/JMo 
1DD2E=; b=T3Be3k1Gp+shIGgQZPJ1vtx1kUCRMCRAqRgf8LxVUdvQ1/7YWRKnls 
+zrXi6dhJXaLrEyVmt7MyYgxvkVvnJqWYy4tAQABtANQHdLSle4AK1+BY+/m2h4E 
fj91rMgQySNbrVV+mhaiE5Q7NxvIa35azUUO0/zRYpluDUt6UBEcQ= 
Received: by 10.16.69.117 with SMTP id mf20.27729.5017C0A66 
Tue, 31 Jul 2012 06:25:26 -0500 (CDT) 
Received: from email.domain.com (unknown [10.60.208.17]) 
by mi15 (SG) with ESMTP id 5017c0a6.202a.a5e396 
Tue, 31 Jul 2012 06:25:26 -0500 (CST) 
Date: Tue, 31 Jul 2012 07:25:25 -0400 
From: Editors <Editors@domain.com> 
Reply-To: 5005@email.domain.com, 
Editors <Editors@domain.com> 
To: user@example.com
Message-ID: <5017c0a5d4365_e294729d8c86360@app02.manuscripts.domain.com.mail> 
Subject: Invitation
Mime-Version: 1.0 
Content-Type: text/html; 
charset=UTF-8 
Content-Transfer-Encoding: 7bit 
X-Sendgrid-EID: lcSu+eeYyj7byVT4rUR8IwFlWv7xwmQ9mjigbpHftFWQeg+HlxpNd7F1nbL2uoqLRAg4sHwj57Rrx78FZhDo2L2DCVfamQm0+wEFzkMnensGOv19JFRIAeDMZY53SVpKMwm4Klqcm6L6s9+UaFtqnRUE3/jexZ6uJAFc5x57JG4= 
```

因此，您会看到这些标头中的回复设置正确，但是当收件人回复时，我们看到回复地址更改为 5005@sendgrid.net。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:27:26.717

我们有完全相同的问题。我不是 Exhange 专家，所以我无法验证这一点 - 但我敢打赌，您要发送邮件的公司有一个配置标志，表明不使用“回复”命令。我们的应用程序以 ourcompany@appmail.com 的形式发送，回复地址设置为 user@mycompany.com。我可以用 gmail 和 yahoo 进行测试，效果很好！

但是我们发送电子邮件的某些公司总是会返回“ourcompany@appmail.com”地址，就好像没有设置回复一样。想想你收到的所有垃圾邮件，其中回复地址是你自己的电子邮件地址。我只能想象 MS 和 Novell 有强制回复实际发件人的标志。

现在，如果我们能从真正的专家那里得到关于这个标志是否存在的澄清。

# c# - PropertyDescriptor - GetValue() 工作时 SetValue() 出现异常

> ID：11769627
> 
> 赞同：2
> 
> 时间：2012-08-02T00:55:53.877
> 
> 标签：c#, propertydescriptor

我有一个我已经定义的对象，我希望使用 PropertyDescriptor 修改它的一个名为“DeviceType”的属性，但它不适合我。

我可以检索属性 DeviceType 的值，但是当我使用 SetValue() 更改其属性值时，即使我尝试将属性设置为与我刚刚检索到的值相同。

这是一些代码：

```
PropertyDescriptorCollection properties = TypeDescriptor.GetProperties(theBase);
var objValue = properties["DeviceType"].GetValue(theBase);

try 
{
    if (theBase != null && objValue != null)
    {
        properties["DeviceType"].SetValue(theBase, objValue);
    }
}
catch (Exception ex)
{

} 
```

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:16:03.867

创建我的对象时，该属性未正确初始化，因此 setter 属性生成空引用异常错误。

# ios - 麻烦创建 NSCachesDirectory 的子目录并向其添加图像

> ID：11769628
> 
> 赞同：2
> 
> 时间：2012-08-02T00:55:59.867
> 
> 标签：ios, ios5, nsfilemanager

**编辑：帖子末尾的解决方案**

我在创建 NSCachesDirectory 的子目录并向其添加 NSData 对象时遇到问题。我已经提到了与此相关的多个 SO 帖子，但是当我调试代码时，它告诉我文件夹中的 NSData 文件不存在。我的代码：

```
NSURL *photoURL = [FlickrFetcher urlForPhoto:self.singlePhotoDictionary
                                          format:FlickrPhotoFormatLarge];
    NSData *URLToData = [NSData dataWithContentsOfURL:photoURL];

    NSString *cacheDirectory = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *newDirectory = [cacheDirectory stringByAppendingPathComponent:@"Photos"];

    BOOL isDir = NO;
    NSError *error;
    if (! [[NSFileManager defaultManager] fileExistsAtPath:newDirectory isDirectory:&isDir] && isDir == NO)
      {
        [[NSFileManager defaultManager]createDirectoryAtPath:newDirectory withIntermediateDirectories:NO attributes:nil error:&error];
      }

    NSString *filePath = [newDirectory stringByAppendingPathComponent:@"thePhotos.jpg"];
    NSLog(@"%@", filePath);

        //[URLToData writeToFile:filePath atomically:NO];
    [[NSFileManager defaultManager] createFileAtPath:filePath contents:URLToData attributes:nil];
    NSData *theData = [[NSFileManager defaultManager] contentsAtPath:filePath];
    NSArray *contentsInManager = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:newDirectory error:nil]; 
```

theData 和 contentsInManager 原来是：

```
theData NSData *    0x00000000

contentsInManager       NSArray *        0x00000000 
```

这里有什么帮助吗？子目录存在，但不会在其中创建文件。

作为一个附带问题：我们什么时候需要创建自己的 NSFileManager 实例而不是使用 defaultManager？

提前致谢！

**解决方案：经过反复试验，我尝试删除子目录并重新创建它。一旦我这样做了，该文件就可以写入子目录。**

# php - Kohana 3.2 复用模型插入数据

> ID：11769629
> 
> 赞同：1
> 
> 时间：2012-08-02T00:56:11.847
> 
> 标签：php, model-view-controller, kohana

我目前正在开发一个使用 Kohana 3.2 的项目。我没有使用过这个框架，所以我是一个“初学者”，虽然我已经使用 Symfony2 很长一段时间了。

假设我有一个“任务”。这个“任务”可以同时分配给多个“用户”。这是通过输入具有不同 user_id 的相同“任务”来实现的。所以我认为通过简单地更改列的数据然后调用来重用模型应该不是问题`$task->create()`。

由于某种原因，这无法正常工作，并且代码返回：
`Kohana_Exception [ 0 ]: Cannot create task model because it is already loaded.`

我目前的代码是：

```
Model:
class Model_Task extends ORM{
    protected $_table_name  = 'task';
    protected $_primary_key = 'task_id';
}

Code:
$task = ORM::factory('task');
$task->task = "some random task you need to finish.";
foreach($users as $user){
    $task->user_id=$user;
    $task->create();
} 
```

是我做错了什么还是您根本无法在 Kohana 中重用模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:31:48.600

您为所有用户使用相同的任务对象，因此在第一次迭代后，将在调用 create 方法后加载任务。将您的代码更改为：

```
foreach($users as $user)
{
    $task = ORM::factory('task');
    $task->user_id = $user;
    $task->create();
} 
```

# multithreading - 服务器到服务器连接的单个持久 TCP 连接

> ID：11769631
> 
> 赞同：-2
> 
> 时间：2012-08-02T00:56:46.437
> 
> 标签：multithreading, asynchronous, tcp

我必须使用单个持久 TCP 连接来实现服务器到服务器的通信协议。该连接两端的服务器均采用“多线程异步事件驱动模型”实现。这两个服务器都是用 C++ 和 Linux 上的 Pthreads 实现的。服务器 A 总是向服务器 B 发送请求，服务器 B 以响应响应。服务器 B 不向服务器 A 发送任何请求，它只是响应它收到的请求。有人可以向我发布此通信的示例代码吗？您能帮我提供服务器 A 和服务器 B 的代码吗？或者请指出我可以找到原型代码的任何旧答案或任何网站。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:06:51.157

TCP servers cannot open connections to TCP servers. There is no IP protocol for that. One of the two servers must run a TCP client as a subsystem. The exact mechanics of how you do that depend on your client<>server protocol - the 'server-client' could log in to the 'client-server' with a unique username/password, or could use a different server listening port.

It's up to you:)

# jquery - 对象没有方法灯箱

> ID：11769632
> 
> 赞同：2
> 
> 时间：2012-08-02T00:57:10.740
> 
> 标签：jquery, lightbox

我正在尝试申请`lightbox`我的`div`.

我有 jquery 文件并`lightbox.js`加载但仍然得到 Object has no method`lightBox`错误消息。我想知道是否有人可以帮助我解决这个问题。非常感谢！

```
<link rel="stylesheet" href="css/basic/basic.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="css/basic/jquery.lightbox-0.5.css" type="text/css" media="screen"/>
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js'></script>
<scirpt type="text/javascript" src="js/jquery.lightbox-0.5.js"></script>
<script type='text/javascript'>
   $(document).ready(function(){   

    $('#image img').lightBox();
})
</script>

<div id='image'>

/**/these images are generated from ajax call. not sure if it's relevant.**

<img src='a.jpg'/>
<img src='b.jpg'/>
<img src='c.jpg'/>

 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T23:28:11.523

在我的情况下，问题是 ftp 软件，它没有正确上传脚本。尝试将原始文件“jquery.lightbox-0.5.js”中的源手动复制/粘贴到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:05:57.957

就我而言，我发现 JQuery 和 $ 之间存在冲突

准备好更改文件是解决方案

```
 <script type='text/javascript'> 

    $(document).ready(function(){   

        $('#image img').lightBox(); }) 

 </script> 
```

# jquery - 获取未嵌套在该名称元素中的某个名称的后代

> ID：11769637
> 
> 赞同：0
> 
> 时间：2012-08-02T00:58:06.343
> 
> 标签：jquery, nodes

我正在尝试获取给定名称的最顶层节点，即未嵌套在该名称的其他节点中。

我正在尝试使用以下方法来做到这一点，但这是行不通的：

```
$(xmldoc).find("idea:not(:parent > idea)") 
```

# knockout.js - 如何淘汰js嵌套模板

> ID：11769641
> 
> 赞同：3
> 
> 时间：2012-08-02T00:59:04.017
> 
> 标签：knockout.js

我试图弄清楚为什么这个嵌套模板不显示任何内容。我有 2 个类 Foo/Bar，ViewModel 有一个可观察的 Foo 数组，而 Foo 有一个 Bar 的集合

目前我看到的只是 Foo 项目

IE

*   某项

代替

*   某项

    *   子项

项目清单

```
<ul data-bind="template: {name: 'TopTemplate' , foreach: foos}"></ul>
<script type="text/html" id="TopTemplate">
    <li data-bind='text: Name'>   
        <ul data-bind=" template: {name:  'NestedTemplate' , foreach:  bars} " style="list-style-type:circle;margin-left:15px">
        </ul>
    </li>
</script>                                                   
<script type="text/html" id="NestedTemplate">         
    <li data-bind='text: Name'>
    </li>
</script>  

    var Foo = function () {

    var self = this;
    self.Name = ko.observable('someitem');

    self.bars = ko.observableArray([new Bar()]);

    self.HasChildren = ko.observable(false);

    self.addBar = function () {
        self.bars.push(new Bar());
    };
    self.removeBar = function (param) {
        self.bars.remove(param);
    };
    self.bars.push(new Bar());

    }
    var Bar = function () {

    var self = this;
    self.Name = ko.observable('subitem');

    }

    var ViewModel = function () {

    var self = this;
    self.foos = ko.observableArray([new Foo()]);
    self.addFoo = function () {
        self.foos.push(new Foo());
      };
      self.removeFoo = function (param) {
        self.foos.remove(param);
       };

    }

    $.ajax({
    url: '@Url.Action("AddFoos")',
    type: 'GET',
    async: false,
    contentType: 'application/json',
     success: function (result) {

        ko.applyBindings(new ViewModel(result));

      }
    }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T01:31:18.307

出于某种原因，淘汰赛`text`在's 中存在绑定问题。`li`我以前遇到过这个问题。它最终会覆盖应该在节点上进行的所有其他内容，在您的情况下是一个内部`ul`. 您可以使用以下`span`文本元素或任何其他文本元素来解决此问题：

```
<li><span data-bind='text: Name'></span> 
```

这是您在[工作小提琴](http://jsfiddle.net/jNDLc/1/)中的代码。

需要注意的是，您的 ajax 调用将失败，因为您的 ViewModel 没有获取结果的参数。

此外，调用`applyBindings`这样的函数也很糟糕，因为如果它被调用两次，就会导致错误。如果您调用它一次，稍后对视图模型所做的更新将自动发送到 UI。那是淘汰赛的事情=）

**更新：**

经过进一步考虑，这可能不是特定于`li`节点的。绑定可能`text`通过覆盖它所绑定的任何节点的内容来工作，因此文本以外的任何内容也将被覆盖。这可能是故意的。

# asp.net-mvc - asp.net 会话到期未使用表单身份验证重定向页面

> ID：11769644
> 
> 赞同：0
> 
> 时间：2012-08-02T00:59:32.580
> 
> 标签：asp.net-mvc, asp.net-mvc-3, forms-authentication

在我登录时的 MVC 3 应用程序中，它执行以下操作：

```
 System.Web.Security.FormsAuthentication.SetAuthCookie(userName, false); 
```

我的 web.config 有以下内容：

```
 <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication> 
```

之后我设置了一些会话变量。问题是，如果我离开页面足够长的时间以使会话过期，然后单击页面而不是将我重定向到登录屏幕，它会在控制器中引发异常，会话变量的引用为空。

```
 public ActionResult Fixit(int Id, int cardId)
        {
            var model = new FixitVM();

            model.PointsMaxValue = (int)Session["MAXPoints"];
        } 
```

这是预期的行为吗？我原以为重定向到登录页面会在此代码触发之前发生。在尝试评估此代码之前，我可以设置一些配置以使重定向发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:40:11.177

身份验证和会话由两个不同的 cookie 管理。会话 cookie 可能已过期，而身份验证 cookie 仍然有效。

# javascript - 过滤数据的函数——if...else语句

> ID：11769646
> 
> 赞同：0
> 
> 时间：2012-08-02T00:59:35.827
> 
> 标签：javascript, google-fusion-tables

非常感谢，斯特凡！但我尝试了第二种“替代方案”，但没有奏效。这是功能：

```
function filterData() {
   var searchString = document.getElementById('search-string').value.replace(/'/g, "\\'");
   var filter = document.getElementById('filter').value.replace(/'/g, "\\'");
    layer.setOptions({
      query: {
         select: "'geometry'",
         from: '4756019'
         where: "'" + filter + "' = '" + searchString + "'"
      }
   });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:27:10.347

我将您的代码放在 jsFiddle 上（经过我的更正）：http: [//jsfiddle.net/odi86/6jvG4/](http://jsfiddle.net/odi86/6jvG4/)

您忘记将`from`子句添加到过滤器中，如果添加它就可以了：

```
if (filter === "UEU") {
    layer.setOptions({
        query: {
            select: "'geometry'",
            from: '4756019',
            where: "'UEU' = '" + searchString + "'"
        }
    });
}
else if (filter === "SUBUEU") {
    layer.setOptions({
        query: {
            select: "'geometry'",
            from: '4756019',
            where: "'SUBUEU' = '" + searchString + "'"
        }
    });
}
else if (filter === "CODIGO") {
    layer.setOptions({
        query: {
            select: "'geometry'",
            from: '4756019',
            where: "'CODIGO' = '" + searchString + "'"
        }
    });
} 
```

顺便说一句：您可以通过这样做来大大简化您的代码（不是 if-else 必要的）：

```
layer.setOptions({
        query: {
            select: "'geometry'",
            from: '4756019',
            where: "'" + filter + "' = '" + searchString + "'"
        }
    }); 
```

# php - 在 PHP 中使用 Post 进行 Ajax 调用

> ID：11769647
> 
> 赞同：1
> 
> 时间：2012-08-02T00:59:54.167
> 
> 标签：php, javascript, jquery, post

```
<!doctype html>
<html>
<head>
  <title>jQuery Tagit Demo Page (HTML)</title>
  <script src="demo/js/jquery.1.7.2.min.js"></script>
  <script src="demo/js/jquery-ui.1.8.20.min.js"></script>
  <script src="js/tagit.js"></script>

  <link rel="stylesheet" type="text/css" href="css/tagit-stylish-yellow.css">

  <script>

    $(document).ready(function () {

    var list = new Array();
    var availableTags = [];

     $('#demo2').tagit({tagSource:availableTags});

     $('#demo2GetTags').click(function () {
        showTags($('#demo2').tagit('tags'))
      });

     /*
    $('li[data-value]').each(function(){
        alert($(this).data("value"));
    });*/

    $('#demo2').click(function(){
        $.ajax({
            url: "demo3.php",
            type: "POST",
            data: { items:list.join("::") },
            success: alert("OK")
        });
    });

    function showTags(tags) {

        console.log(tags);
        var string = "";
        for (var i in tags){
          string += tags[i].value+" ";
         }
          var list = string.split(" ");
          //The last element of the array contains " "
          list.pop();   
        }
    });
  </script>
</head>
<body>

<div id="wrap">
    <?php 

        $lis = $_POST['items'];
        $liarray = explode("::", $lis);
        print_r($liarray);

    ?>
<div class="box">
  <div class="note">
    You can manually specify tags in your markup by adding <em>list items</em> to the unordered list!
  </div>

    <ul id="demo2" data-name="demo2">
        <li data-value="here">here</li>
        <li data-value="are">are</li>
        <li data-value="some...">some</li>
        <!-- notice that this tag is setting a different value :) -->
        <li data-value="initial">initial</li>
        <li data-value="tags">tags</li>
    </ul>

  <div class="buttons">
    <button id="demo2GetTags" value="Get Tags">Get Tags</button>
    <button id="demo2ResetTags" value="Reset Tags">Reset Tags</button>
    <button id="view-tags">View Tags on the console </button>
  </div>
</div>

</div>
<script>
</script>
</body>
</html> 
```

这段代码只会传输 dostuff.php 中的项目列表，但是当我尝试在 PHP 上打印它时，什么都不会出现。这是为什么？

我正在这条线上做一个ajax请求

```
$('#demo2').click(function(){
            $.ajax({
                url: "demo3.php",
                type: "POST",
                data: { items:list.join("::") },
                success: alert("OK")
            });
        }); 
```

和PHP中的代码

```
<?php 

        $lis = $_POST['items'];
        $liarray = explode("::", $lis);
        print_r($liarray);

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:11:14.730

鉴于信息有限，这只是在黑暗中拍摄，但您似乎期望从服务器发回的数据会发生一些事情..但您实际上什么也没做*。*成功后，它会显示一个警报……没有别的了。

尝试将您的成功条目更改为以下内容：

```
success: function(data) {
    $("#wrap").html(data);
} 
```

`POST`这将使用请求中的数据填充 div 。它显示为空的原因......，您没有加载当前正在执行的页面，其中包含`print_r`实际回显任何内容所需的数据。

**编辑**：如何将值插入数据库；

现在的数据库交互是使用自定义包装器或[`php Data Object`](http://www.php.net/manual/en/intro.pdo.php)，也称为 PDO 完成的，而不是不推荐使用的`mysql_*`函数。

首先，您准备数据库对象，类似于在上述不推荐使用的函数中完成连接的方式：

```
$dbh = new PDO("mysql:host=hostname;dbname=database", $username, $password); 
```

然后，您可以开始交互，准备查询语句..

```
$stmt = $dbh->prepare("UPDATE table_name SET column1 = :column1 WHERE id = :id"); 
```

在所述语句中绑定参数..

```
$stmt->bindParam(':column1', $column1);
$stmt->bindParam(':id', $id);
$id = $_POST['id']; 
```

最后执行查询：

```
try {
    $stmt->execute();
}
catch (Exception $e) {
    echo $e;
} 
```

PDO 自动转义之前语句中绑定的任何字符串，使其免受 SQL 注入攻击，并加快了多次执行的过程。举个例子：

```
foreach ($_POST as $id) {
    $stmt->execute();
} 
```

由于 id 参数已经绑定到`$id`，您所要做的就是更改`$id`并执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:27:11.943

尝试为 jQuery 部分添加 encodeURI，

```
$.ajax({
  url: "demo3.php",
  type: "POST",
  data: { items: encodeURIComponent (list.join("::")) },
  success: function(response) {
            console.log(response);
  }
}); 
```

PHP部分的urldecode：

```
$lis = $_POST['items'];
$liarray = explode("::", urldecode($lis));
print_r($liarray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:04:57.970

*3件事*：

设置您的 AJAX`success`以显示 PHP 脚本中给出的回声/打印

```
success: function(result)
{
    $("#somecontainer").html(result);
} 
```

这样，在 PHP 脚本中打印的任何内容都将被放入即

```
<div id="somecontainer">
    Result of PHPcode here
</div> 
```

* * *

第二，代替

```
var string = "";
for (var i in tags)
{
    string += tags[i].value+" ";
}

var list = string.split(" ");
//The last element of the array contains " "
list.pop(); 
```

使用[`push()`](http://www.tutorialspoint.com/javascript/array_push.htm). 这会将值添加到数组中下一个未占用的索引处：

```
var string = "";
for (var i in tags)
{
    list.push(tags[i].value);
} 
```

这样你就不必弹出最后一个元素。

* * *

第三点：将您的 PHP 代码放在一个单独的文件中（以及您的 JavaScript/jQuery）。有喜欢：

```
/root/index.html
/root/script/dostuff.php
/root/script/myscript.js 
```

然后让你的 AJAX 调用`url: "/script/dostuff.php"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T01:10:54.907

您期望 PHP 结果在哪里`print_r`“出来”？

尝试将您的 AJAX 调用更改为此（只有值`success`不同）：

```
$.ajax({
    url: "demo3.php",
    type: "POST",
    data: { items:list.join("::") },
    success: function(data, textStatus, jqXHR){
        alert(data);
    }
}); 
```

有了这个，您的 PHP 模板的输出，如果您以老式方式（即使用表单和整个页面重新加载）发布到它，您通常会看到它，将显示在警报中。

希望有帮助。

# c++ - 字符串作为参数 (C++)

> ID：11769648
> 
> 赞同：0
> 
> 时间：2012-08-02T00:59:56.433
> 
> 标签：c++, string, parameters, int, concatenation

此示例代码有效吗？

```
std::string x ="There are";
int butterflies = 5;
//the following function expects a string passed as a parameter
number(x + butterflies + "butterflies"); 
```

这里的主要问题是我是否可以使用 + 运算符将整数作为字符串的一部分传递。但如果有任何其他错误，请告诉我:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T01:01:42.597

C++ 不会自动转换为这样的字符串。您需要创建一个字符串流或使用类似 boost lexical cast 的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T01:06:48.020

You can use stringstream for this purpose like that:

```
#include <iostream>
#include <sstream>
using namespace std;

int main()
{
    stringstream st;
    string str;

    st << 1 << " " << 2 << " " << "And this is string" << endl;
    str = st.str();

    cout << str;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T01:02:58.230

不，这行不通。C++ 它不是一种无类型语言。所以它不能自动将整数转换为字符串。使用 strtol、stringstream 等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T01:04:31.203

C 比 C++ 多，但是`sprintf`（类似于`printf`，但将结果放在字符串中）在这里会很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T01:04:39.927

将整数转换为字符串的一种安全方法是摘录如下：

```
#include <string>
#include <sstream>

std::string intToString(int x)
{
  std::string ret;
  std::stringstream ss;
  ss << x;
  ss >> ret;
  return ret;
} 
```

由于上述原因，您当前的示例将不起作用。

# sql - 如何按 2 列搜索多个数据库条目

> ID：11769663
> 
> 赞同：1
> 
> 时间：2012-08-02T01:03:18.143
> 
> 标签：sql, sql-server, database

嗨，我有一个数据库，可以逐行存储票务详细信息。因此，例如，如果有人进来并使用优惠券购买服务并购买了礼品卡，它将将该交易分解为 3 个单独的表格条目......例如，如果我使用下面的查询搜索票号“m123”我得到下面的结果。

```
Select *
FROM            TicketsDetails
WHERE        (sTicket_Number = 'M123')

Ticket  Description Amount
M123    BOGO        15
M123    Service 1   -15
M123    GC Service 1    15
M123    $5 OFF      -5 
```

当前查询和输出：

```
SELECT        t1.sTicket_Number, t1.sDescription, t1.sUserName, t2.sDescription AS Second_description
FROM            TicketsDetails AS t1 INNER JOIN
                         TicketsDetails AS t2 ON t1.sTicket_Number = t2.sTicket_Number
WHERE        (t1.sDescription = '$5 OFF') AND (t2.sDescription = 'BOGO')

M100304 $5 OFF  Kenny   BOGO
M100304 $5 OFF  Kenny   BOGO
M100542 $5 OFF  Kenny   BOGO
M103706 $5 OFF  Kenny   BOGO
M132464 $5 OFF  Dante   BOGO
M132464 $5 OFF  Dante   BOGO
M132501 $5 OFF  Dante   BOGO
M132501 $5 OFF  Dante   BOGO
M132528 $5 OFF  Dante   BOGO
M133892 $5 OFF  Raynon  BOGO
M133892 $5 OFF  Raynon  BOGO
M134067 $5 OFF  Raynon  BOGO
M134067 $5 OFF  Raynon  BOGO 
```

我想做的是退回任何带有“bogo”和“$ 5 off”描述的票号。这可能吗，因为它们是具有相同票号的单独条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:14:00.807

尝试这样的事情（逻辑似乎有效，但可能有错字，因为我没有在具有您确切列名的表上尝试此操作）：

```
SELECT *
FROM TicketDetails as t1
INNER JOIN TicketDetails as t2
ON t1.Ticket = t2.Ticket
WHERE t1.Description='BOGO' AND t2.Description='$5 OFF' 
```

内连接应该创建描述的每一个组合，然后寻找一个同时具有 BOGO 描述和 $5 OFF 描述的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:08:58.520

```
SELECT * 
FROM TicketDetails 
WHERE sTicket_Number = 'M123' AND 
    (Description ='BOGO' OR Description = '$5 OFF') 
```

**---- EDIT ----**

Per the clarification in your comment you probably want this:

```
SELECT * 
FROM TicketDetails 
WHERE Description ='BOGO' OR Description = '$5 OFF' 
```

# objective-c - 应用程序启动时照片实例被提取到内存中？

> ID：11769664
> 
> 赞同：0
> 
> 时间：2012-08-02T01:03:29.007
> 
> 标签：objective-c, core-data, cs193p

代码来自斯坦福 iOS 开发课程的 Photomania 应用程序。基本上我想知道照片实体的实例何时被实际提取到内存（或上下文）中。在表视图控制器中调用此处定义的工厂方法时会发生这种情况吗？

```
@interface Photo (Flickr)
+ (Photo *)photoWithFlickrInfo:(NSDictionary *)flickrInfo
        inManagedObjectContext:(NSManagedObjectContext *)context;
@end

@implementation Photo (Flickr)
+ (Photo *)photoWithFlickrInfo:(NSDictionary *)flickrInfo
        inManagedObjectContext:(NSManagedObjectContext *)context
{
    Photo *photo = nil;

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Photo"];
    request.predicate = [NSPredicate predicateWithFormat:@"unique = %@", [flickrInfo objectForKey:FLICKR_PHOTO_ID]];
    NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"title" ascending:YES];
    request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

    NSError *error = nil;

    NSArray *matches = [context executeFetchRequest:request error:&error];

    if (!matches || ([matches count] > 1)) {
        // handle error
    } else if ([matches count] == 0) {
        photo = [NSEntityDescription insertNewObjectForEntityForName:@"Photo" inManagedObjectContext:context];
        photo.unique = [flickrInfo objectForKey:FLICKR_PHOTO_ID];
        photo.title = [flickrInfo objectForKey:FLICKR_PHOTO_TITLE];
        photo.subtitle = [flickrInfo valueForKeyPath:FLICKR_PHOTO_DESCRIPTION];
        photo.imageURL = [[FlickrFetcher urlForPhoto:flickrInfo format:FlickrPhotoFormatLarge] absoluteString];
        photo.whoTook = [Photographer photographerWithName:[flickrInfo objectForKey:FLICKR_PHOTO_OWNER] inManagedObjectContext:context];
    } else {
        photo = [matches lastObject];
    }

    return photo;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:07:34.737

这是一种用于“数据库”的“创建照片”或“插入照片”方法。因此，当 FlickrFetcher 类出去并检索照片时，对于它检索到的每张照片，都会调用此方法。

该方法首先检查照片是否存在于核心数据库中，如果不存在则添加，并保存托管对象上下文。

因此，从技术上讲，Photo 对象是使用 [NSEntityDescription insertNewObjectForEntityForName: inManagedObjectContext:] 方法在内存中创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:23:27.450

调用此方法时，照片会加载到内存中。CoreData 可能会进行一些缓存，这样后续的获取就不必进入存储后端，但这绝对是神奇的地方。

您应该阅读更多有关 CoreData 的内容。它是一个庞大的框架，但对它的深入了解将让你在为 Cocoa 应用程序设计高效且合理的存储解决方案方面走得很远。

# c++ - Boost 中的“仅标头库”和“自动链接”是什么意思？

> ID：11769667
> 
> 赞同：18
> 
> 时间：2012-08-02T01:04:05.483
> 
> 标签：c++, boost, header, linker

在[Boost 库文档](http://www.boost.org/doc/libs/)页面上，有两个类别，分别名为“ **Header Only Libraries** ”和“ **Automatic Linking** ”。

我想*“仅标题库”*意味着您不必链接[Boost](http://en.wikipedia.org/wiki/Boost_%28C%2B%2B_libraries%29)库即可使用它们，而*“自动链接”*意味着您必须链接。

但是当我使用. `Boost.Timer`_ 我什至需要链接and ，尽管库本身使用其他一些需要链接的库是可以理解的。`timer``libboost_timer.a``libboost_timer.so.1.48.0``Boost.Timer``Boost.System``Boost.Chrono`

另一方面，Boost 已经明确表示`Boost.Asio`属于*"Automatic Linking"*，但没有任何名为`asio`.

**那么，“仅标头库**”或“**自动链接**”究竟意味着什么？或者这纯粹是一个错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-07T08:33:40.330

正如您所说，“仅标题库”意味着整个库都在头文件中，因此一行（或几`#include`行）足以使用它。不需要链接。

“自动链接”意味着，尽管库需要一些链接（直接或作为依赖项），但您不需要在编译器行中指定它，因为`#include`'d 文件会做一些魔术来引入适当的库自动，如果编译器支持。

例如，在[MSVC](https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B)编译器中，它们使用`#pragman comment(lib, "...")`; 在他们使用的 Borland 编译器中`#pragma defineoptions`；等。

**最值得注意的是，GNU 编译器不**支持“自动链接” 。

自动链接有时会很麻烦（例如，混合调试和发布版本），您可以通过定义一些预处理器宏来选择性地禁用它们：`BOOST_<libname>_NO_LIB`. 在这种情况下，您将不得不手动进行链接。

**更新**：关于您的评论如下：

> `Boost.Timer`声称是“仅标题库”，但它在 lib 目录中有 lib 文件。

[Boost 文档](http://www.boost.org/doc/libs/1_48_0/)中似乎有错误。实际上有两个名为*timer*的不同库：旧的、已弃用的、仅包含标头的库[`<boost/timer.hpp>`](http://www.boost.org/doc/libs/1_48_0/libs/timer/doc/original_timer.html)和新的、改进的、更酷的、可自动链接的库[`<boost/timer/timer.hpp>`](http://www.boost.org/doc/libs/1_48_0/libs/timer/doc/cpu_timers.html)。

但由于某种原因，主文档页面列出了旧页面的属性。

> 没有`Boost.Asio`lib文件。

在主 Boost library 文档页面[library documentation page](http://www.boost.org/doc/libs/1_48_0/)中，您可以看到 Asio 被列为*Automatic linking due to dependency*。[具体的依赖关系在别处](http://www.boost.org/doc/libs/1_48_0/doc/html/boost_asio/using.html)列出：Boost.System 和 Boost.Regex，它们都存在自动链接。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T01:09:43.290

你几乎已经搞定了——一个只有头文件的库是一个该库的所有代码都包含在头文件中的库，所以你只需要包含它们，而不是链接到一个库来使用它们。

也就是说，完全有可能编写一个依赖于*其他*库的仅标头库，这些库可能*不是*仅标头库。在这种情况下，即使您不必告诉链接器您正在使用的*第一个*库，您仍然必须告诉它第二个库。尤其是当/如果所有代码都可能被塞进链接器认为的库之一（例如，一个 .lib 或 .a 文件）中时，这可能最终主要是没​​有区别的区别（只是要清楚：*这里*不一定是这种情况，但无论如何它可以而且确实会出现）。

# android - 如何将 support-v4.jar javadoc 添加到我的项目中？

> ID：11769668
> 
> 赞同：3
> 
> 时间：2012-08-02T01:04:10.050
> 
> 标签：android

我已经创建了一个项目，并且 support-v4.jar 已经在库和依赖项中。（这很正常吗？因为我知道人们正在尝试手动导入 .jar）。但是当我将鼠标悬停在类上时，它说 javadoc 不存在。我该如何解决这个问题？我创建了这个项目，如果它已经附带了 support-v4.jar，为什么没有 javadoc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:54:13.863

我想我在[这里](http://grepcode.com/snapshot/repo1.maven.org/maven2/com.google.android/support-v4/r6)找到了一些 javadoc 。我下载了 support-v4-r6-javadoc.jar 并且它有效。

# .net - .net sql 集成测试和全文目录

> ID：11769669
> 
> 赞同：1
> 
> 时间：2012-08-02T01:04:15.997
> 
> 标签：.net, sql-server, unit-testing, full-text-indexing

我正在尝试为我们网站的一部分编写一些集成测试，该部分使用存储过程而不是通过 EF 运行。

我们只想确保我们从存储过程中返回的数据实际上是正确的，并且与我们的代码正确集成。

我们对集成测试的基本设置是我们在事务范围内进行所有这些测试，因此过程是：

1.  擦除相关表中的数据
2.  插入适当的测试数据
3.  运行我们的存储过程
4.  断言结果

我们正在测试的部分存储过程在表的全文目录上运行，其中一部分只是查询表。

对于不使用全文索引的存储过程部分，这一切都运行良好，但对于使用全文索引的部分，我得到了一些有趣的结果。

如果我没有在测试之前手动清除数据（即通过 sql server explorer），因为我们的模拟数据与我们的种子数据非常相似，测试都通过了。

但是，如果我先手动清除数据，那么它基本上是从一个空的全文目录开始的，测试都失败了。我认为全文索引可能在测试中没有被正确清除，但是在我的存储过程运行之前它也没有被填充。我已经尝试添加一个等待（在两个代码中，也类似于这个stackoverflow帖子：[我怎么知道SQL全文索引填充何时完成？](https://stackoverflow.com/questions/2727911/how-can-i-know-when-sql-full-text-index-population-is-finished)）但似乎都不允许首先填充全文索引。

我对全文索引的了解并不多，所以我不确定这是我正在做的方式，还是它在事务范围内的事实，或者我做错了什么。

有趣的是，如果我不在事务范围内运行它一次（因此它填充数据库）然后第二次运行它就会通过，所以我知道如果全文目录在那里/工作测试将起作用。

有人有什么想法吗？如果需要，我很乐意发布部分代码。

谢谢，医学博士

# php - 如何更改我的 php 错误电子邮件的主题？

> ID：11769672
> 
> 赞同：7
> 
> 时间：2012-08-02T01:04:38.883
> 
> 标签：php, error-handling

我有以下内容：

```
 error_log("big error!!", 1, my email address); 
```

发送消息后，主题行中会显示“PHP error_log message”。

有人可以告诉我如何自定义消息主题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T01:11:50.253

```
error_log("Error message", 1, "me@example.com", "Subject: My custom subject"); 
```

的第四个参数`error_log`允许您指定自定义标头，其中`Subject`是电子邮件的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T20:59:40.197

谢谢你[niet-the-dark-absol](https://stackoverflow.com/users/507674/niet-the-dark-absol)！

我能够根据您关于分离标题的建议生成此内容。

```
<?php

    $dateTime=date("Y_m_d_H_i_s");
    $headers = "From: SOME ROBOT <somerobotyouusedtoknow@somecompany.com>\r\n" .
               "Reply-to: SOME HUMAN <somehumanyoudoknow@somecompany.com>";
               "Subject: My custom subject on including date of: " . $dateTime . "\r\n" .
    $emailto = "JayRizzo@somecompany.com";
    $emailbody = "This is the body of the email: Error message";

error_log($emailbody, 1, $emailto, $headers);

?> 
```

我得到了正确的回复，并且能够更改的不仅仅是主题、回复或发件人地址。

我发布这个只是因为我发现你一次不能更改多个标题，这证明这是错误的。（除非它只是我正在使用的 PHP 版本的改进）

> 注意：我的 PHP 版本：
> 
> ~: php -v
> 
> PHP 7.2.0RC6（cli）（构建：2017 年 11 月 12 日 08:50:58）（NTS）
> 
> 版权所有 (c) 1997-2017 PHP 集团
> 
> Zend Engine v3.2.0-dev，版权所有 (c) 1998-2017 Zend Technologies

# wcf - 在 WCF 服务关闭之前执行操作

> ID：11769673
> 
> 赞同：3
> 
> 时间：2012-08-02T01:04:54.217
> 
> 标签：wcf

我有一个托管在 IIS7 中的 WCF 服务。该服务有一个静态类，其中包含一个包含字符串（某种日志）的静态列表。它定期将条目写入文件或数据库。

但是，当 IIS 决定回收应用程序或因任何原因终止时，静态字段中的条目将丢失。

有什么方法可以处理服务关闭类事件并保留内存中的数据？

谢谢

什里达尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T00:41:08.283

我已经通过带有自定义服务主机的 IIS 实现了几个服务（最初我这样做是为了实现 IErrorHandler 以进行全局错误处理）。

您将需要两件事 - 的实现`ServiceHost`和 的实现`ServiceHostFactory`，它将调用您的自定义服务主机。例如（仅显示代码的相关部分）：

```
public class MyCustomServiceHost : ServiceHost
{

    protected override void OnClosing()
    {

        // logic to save off your static data
        base.OnClosing();
    }
}

public class MyCustomServiceHostFactory : ServiceHostFactory
{

    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses)
    {

        return new MyCustomServiceHost(serviceType, baseAddresses);
    }
} 
```

在您的 .svc 文件中，您将拥有如下内容：

```
<%@ ServiceHost Service="MyCompany.MyServiceName" Factory="MyCompany.MyCustomServiceHostFactory" %>
<%@ Assembly Name="MyCustomServiceHost" %> 
```

这是执行此操作的一种方法（这可以追溯到 .NET 3.5 天）；很可能还有其他方法可以做到这一点，但至少这应该给你一些方向。

# xslt - Can you use to go through attributes?

> ID：11769674
> 
> 赞同：4
> 
> 时间：2012-08-02T01:05:10.173
> 
> 标签：xslt, foreach, xslt-2.0

Is it possible to use the command on attributes? I want this to be able to run without knowing the attribute names. Here's a quick (terrible) example:

```
<candy hard="true" soft="false" stripes="true" solid="false"> 
```

In my head (this doesn't work) it should look something like this:

```
<xsl:for-each select="candy/@[@='true']"> 
```

Is there a way around this to run through attributes without knowing their name, or do I need to write each attribute being looked at?

Edit

Heres an example of me trying to create a variable out of the attribute name where value='true'

```
<xsl:for-each select="candy/@*[. = 'true']">
<xsl:attribute name="candytype"> 
   <xsl:value-of select="name()"/> 
</xsl:attribute>
<xsl:text> </xsl:text>
<xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T03:30:41.000

OP的评论：

> 我可以返回 value='true' 的每个属性名称（不是值）吗？

```
<xsl:for-each select="candy/@*[. = 'true']">
   <xsl:value-of select="name()"/>
   <xsl:text> </xsl:text>
<xsl:for-each> 
```

**在 XSLT 2.0 中，只需评估这个 XPath (2.0) 表达式**：

```
candy/@*[. = 'true']/concat(name(.), ' ') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:06:28.323

What you want is

```
<xsl:for-each select="candy/@*"> 
```

# eclipse - SnakeYAML class not found error?

> ID：11769680
> 
> 赞同：0
> 
> 时间：2012-08-02T01:06:04.870
> 
> 标签：eclipse, import, yaml, classnotfoundexception, snakeyaml

I'm writing a small java program that needs to use SnakeYAML, and it works fine when running it from within Eclipse, but when I export it, it can't seem to locate the SnakeYAML class to handle the Yaml object, like in the Yaml yaml = new Yaml(); declaration.

I imported the snakeYAML Jar library as an external Jar, which I suspect may cause it not to compile the library with it, how do I fix this?

In particular, this is the error line referring to what I'm talking about whilst launching it outside of Eclipse:

```
java.lang.ClassNotFoundException: org.yaml.snakeyaml.Yaml 
```

As I side note, I'm typically accustomed to writing Minecraft bukkit plugins, hence they way I import the Bukkit libraries is how I imported the SnakeYAML libraries.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:32:28.853

您必须导出一个可运行的 JAR 文件，这应该可以解决您的问题。右键单击项目 -> 导出... -> “可运行的 JAR 文件” -> 选择您的项目 -> 完成

# php - 点击图片放大，可以点击next查看下一张图片

> ID：11769682
> 
> 赞同：0
> 
> 时间：2012-08-02T01:06:17.587
> 
> 标签：php, image, fullscreen, image-gallery, photo-gallery

我有这个代码：

```
 <div class="images_liste_plante_solo">
        <div class="image_liste_plante">
            <img alt="Hosta - Eternal Flame" src="images/eternal_flame_miniature.jpg"/>
        </div>
        <div class="image_liste_plante">
            <img alt="Hosta - Eternal Flame" src="images/eternal_flame-2_miniature.jpg"/>
        </div>
        <div class="image_liste_plante">
            <img alt="Hosta - Eternal Flame" src="images/eternal_flame-3_miniature.jpg"/>
        </div>
    </div> 
```

我会有这样的可变数量的图片，因为图片的数量取决于我的 PHP 数据库。我还可以回显全屏尺寸图片的目录，并且可以选择所有图片的最大尺寸（如果它们足够大的话）。

所以，当我们点击图片时，我需要它在页面上用全屏画廊放大它，使后面的内容变暗，有点像我们想在 facebook 中放大图片时。它只会使用具有“image_list_plante”类的图像，并且它将使用我的回显链接到每个图像的全屏图像（也许这个链接可以在不可见的 div 中回显）。此外，我将回显（在不可见的 div 中）一个布尔值，它决定您是否可以右键单击图片。我什至会回显将放置在图片下方或上方的文本。不可见的 div 将位于每个“image_liste_plante” div 内以及图片之后或之前。如果需要，我可以将类放到这些不可见的 div 中，等等......

我怎么做 ？难以回答的问题。我对 JavaScript 和 jQuery 等一无所知...我唯一知道的是 HTML/CSS/PHP/PDO。

是否已经构建了我可以修改和适应的插件？目前，我只会在图片上放一个 .jpg 文件的链接......但它不能像这样保持太久。

*也需要在 IE7 和其他浏览器中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:44:59.640

最后，我使用了一个名为“colorbox”的插件。它根据它的链接在页面上打开一个 iframe。iframe 中的页面通过使用生成的链接中的 $_GET 变量知道要显示哪个植物的图像。在这个 iframe 中，我需要编写一个由 $_GET 元素定义的安全数据库连接。它计算图片的数量，对它们进行分页以及所有内容。感谢我自己！

# linux - pthread_cond_timedwait 提前一秒返回

> ID：11769687
> 
> 赞同：0
> 
> 时间：2012-08-02T01:06:32.513
> 
> 标签：linux, pthreads, glibc

下面的程序产生这个输出：

```
$ ./test_condvar 9000
1343868189.623067126 1343868198.623067126 FIRST
1343868197.623132345 1343868206.623132345 TIMEOUT
1343868205.623190120 1343868214.623190120 TIMEOUT
1343868213.623248184 1343868222.623248184 TIMEOUT
1343868221.623311549 1343868230.623311549 TIMEOUT
1343868229.623369718 1343868238.623369718 TIMEOUT
1343868237.623428856 1343868246.623428856 TIMEOUT 
```

请注意，跨行读取显示预期 9 秒的时间增量，但向下读取列显示`pthread_cond_timedwait`在 8 秒内返回 ETIMEDOUT。

pthread 库是 glibc 2.12。运行红帽 EL6。`uname -a`节目`2.6.32-131.12.1.el6.x86_64 #1 SMP Tue Aug 23 11:13:45 CDT 2011 x86_64 x86_64 x86_64 GNU/Linux`

看起来`pthread_cond_timedwait`依赖于`lll_futex_timed_wait`超时行为。

关于在哪里寻找解释的任何想法？

```
#include <time.h>
#include <sys/time.h>
#include <pthread.h>
#include <errno.h>
#include <stdlib.h>
#include <stdio.h>

int main ( int argc, char *argv[] )
{
    pthread_mutexattr_t mtx_attr;
    pthread_mutex_t mtx;
    pthread_condattr_t cond_attr;
    pthread_cond_t cond;

    int milliseconds;
    const char *res = "FIRST";

    if ( argc < 2 )
    {
        fputs ( "must specify interval in milliseconds", stderr );
        exit ( EXIT_FAILURE );
    }

    milliseconds = atoi ( argv[1] );

    pthread_mutexattr_init ( &mtx_attr );
    pthread_mutexattr_settype ( &mtx_attr, PTHREAD_MUTEX_NORMAL );
    pthread_mutexattr_setpshared ( &mtx_attr, PTHREAD_PROCESS_PRIVATE );

    pthread_mutex_init ( &mtx, &mtx_attr );
    pthread_mutexattr_destroy ( &mtx_attr );

#ifdef USE_CONDATTR
    pthread_condattr_init ( &cond_attr );
    if ( pthread_condattr_setclock ( &cond_attr, CLOCK_REALTIME ) != 0 )
    {
        fputs ( "pthread_condattr_setclock failed", stderr );
        exit ( EXIT_FAILURE );
    }

    pthread_cond_init ( &cond, &cond_attr );
    pthread_condattr_destroy ( &cond_attr );
#else
    pthread_cond_init ( &cond, NULL );
#endif

    for (;;)
    {
        struct timespec now, ts;
            clock_gettime ( CLOCK_REALTIME, &now );

        ts.tv_sec = now.tv_sec + milliseconds / 1000;
            ts.tv_nsec = now.tv_nsec + (milliseconds % 1000) * 1000000;
        if (ts.tv_nsec > 1000000000)
        {
            ts.tv_nsec -= 1000000000;
            ++ts.tv_sec;
        }

        printf ( "%ld.%09ld %ld.%09ld %s\n", now.tv_sec, now.tv_nsec,
                 ts.tv_sec, ts.tv_nsec, res );

        pthread_mutex_lock ( &mtx );
        if ( pthread_cond_timedwait ( &cond, &mtx, &ts ) == ETIMEDOUT )
            res = "TIMEOUT";
        else
            res = "OTHER";
        pthread_mutex_unlock ( &mtx );
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T05:15:26.010

今年 7 月 1 日插入闰秒触发了一个[Linux 内核错误，导致 futex 提前一秒过期，直到机器重新启动或您运行解决方法：](http://lkml.indiana.edu/hypermail/linux/kernel/1207.1/01408.html)

```
# date -s "`date`" 
```

听起来你已经被它咬了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:17:18.507

我不确定这与特定问题有关，但您的线路：

```
if (ts.tv_nsec > 1000000000) 
```

真的应该是：

```
if (ts.tv_nsec >= 1000000000) 
```

而且，事实上，如果你做了一些意想不到的事情并通过了 10000（例如），你可能想要考虑让它：

```
while (ts.tv_nsec >= 1000000000) 
```

尽管在某些时候使用模数算法可能会更好，这样循环不会运行太久。

除此之外，这似乎是您的环境的某种问题。该代码在 Debian 下对我来说很好，`Linux MYBOX 2.6.32-5-686 #1 SMP Sun May 6 04:01:19 UTC 2012 i686 GNU/Linux`：

```
1343871427.442705862 1343871436.442705862 FIRST
1343871436.442773672 1343871445.442773672 TIMEOUT
1343871445.442832158 1343871454.442832158 TIMEOUT
: 
```

一种*可能性*是系统时钟不是神圣不可侵犯的——它可能会被 NTP 或其他时间同步过程定期修改。我提到这是一种可能性，但它会在超时和获取当前时间之间的短时间内发生，这似乎有点奇怪。

一项测试是使用不同的超时时间（例如交替使用 7 秒和 13 秒）来查看效果是否相同（这些数字被选择为质数，并且不太可能是系统上任何其他活动的倍数。

# google-chrome - Chrome 21 scaling elements during rotation

> ID：11769688
> 
> 赞同：14
> 
> 时间：2012-08-02T01:06:37.647
> 
> 标签：google-chrome, css, rotation, css-animations

I think this is a bug in the latest Chrome (21.0.1180.57), but I thought I'd post here just to double check.

I'm changing the rotation of an element using javascript, and using webkit transitions to animate the rotation. Sometimes, depending on the start and end rotation, the element randomly scales along with the rotation. I've made a demo here: [http://jsfiddle.net/XCwUQ/](http://jsfiddle.net/XCwUQ/) (click the body).

Does anyone know why this might be happening?

Cheers,

Christian

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:11:14.857

**更新：现在似乎已在 Chrome 23 中修复。**（请参阅@joequincy 对原始问题的评论）

* * *

确实，这似乎是一个错误。在它修复之前，您可以`animate()`像这样使用 jQuery 函数：

```
$(function() {
    var rotation = 163;
    $('body').on('click', function() {
        rotation = (rotation == 163) ? 198 : 163;               
        $('#wheel').animate({
            borderSpacing: rotation
        }, {
            step: function(now, fx) {
                $(this).css('-webkit-transform', 'rotate(' + now + 'deg)');    
                $(this).css('-moz-transform', 'rotate(' + now + 'deg)');    
                $(this).css('-ms-transform', 'rotate(' + now + 'deg)');    
                $(this).css('-o-transform', 'rotate(' + now + 'deg)');    
                $(this).css('transform', 'rotate(' + now + 'deg)');    
            }
        });        
    });
});​ 
```

删除`transition`CSS 语句并添加：

```
border-spacing: 163px; 
```

此示例误用了该`border-spacing`属性，因为在大多数情况下它不会影响您的布局。

见[http://jsfiddle.net/hongaar/wLTLK/1/](http://jsfiddle.net/hongaar/wLTLK/1/)

（感谢这个答案：[动画元素变换旋转](https://stackoverflow.com/questions/5462275/animate-element-transform-rotate)）

*注意*：您可以选择使用 jQuery 转换插件来删除丑陋的多次`css()`调用和更简单的`animate()`语法版本（但会增加开销）。见[https://github.com/louisremi/jquery.transform.js](https://github.com/louisremi/jquery.transform.js)

# mysql - MYSQL/PHP table design for friends table/query to select friends

> ID：11769694
> 
> 赞同：1
> 
> 时间：2012-08-02T01:07:37.710
> 
> 标签：mysql, database-design

For a social network site, I have a table with the ids of the inviter and the invitee and the status of the invitation ie accepted or not. According to what I've read, this seems to be best practice for a friends table.

Table friends

```
id | inviterid |inviteeid |status 
```

however, for a given userid, I want to display all the "friends" the person has including their names. I can get a list of records of relationships with a simple query

```
Select * from friends WHERE inviterid = '33' or inviteeid = '33'" 
```

But, this does not translate easily into a list of friends, since the friends could be either inviters or invitees so the field will be different depending on who invited whom.

Is there a better table design for a friends table? Alternatively, is there a sql syntax that would select friends who can be either inviters and invitees. Ultimately, I need to do a join to another table that has the users names.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:35:24.140

您有一个包含以下列的用户表

```
userId|name|... 
```

和你的朋友桌

```
id | inviterid |inviteeid |status 
```

如果您想查找该用户邀请主题的用户的朋友，您可以使用以下查询！

```
select id, status from friend_tbl inner join user_tbl on user_tbl.id=friend_tbl.inviterid; 
```

或者，如果您想获得该用户的朋友主题邀请他/她，您可以使用以下查询：

```
select id, status from friend_tbl inner join user_tbl on user_tbl.id=friend_tbl.inviteeid; 
```

我希望这些可以帮助你，我能理解你的目的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:37:29.527

使用 union 将两种friendS放在一起，然后可以将结果与username表连接起来。

```
Select inviterid as friend_id, status from friends where inviteeid = 33
Union
Select inviteeid as friend_id, status from friends where inviterid =33 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:50:22.900

对于这种情况，我个人更喜欢有两张桌子，朋友桌和邀请桌

朋友桌

```
id | userid | friendid 
```

所以选择朋友只是

```
SELECT friendid FROM friend_table WHERE userid = 33 
```

邀请表

```
id | inviterid | inviteeid | status 
```

用于在用户批准后更改邀请表的状态，并在朋友表中插入新行

```
UPDATE invite_table SET status = 'accepted' WHERE inviterid = 33
INSERT INTO friend_table (`userid`, `friendid`) VALUES (33, $friendid) 
```

# php - Loading results of PHP function into DIV container

> ID：11769696
> 
> 赞同：0
> 
> 时间：2012-08-02T01:08:22.120
> 
> 标签：php, jquery, ajax

It seems this question has been answered in the past, however, I'm either 1) having a hard time grasping the solutions or 2) not implementing them correctly.

I have a PHP function, that when run, will return results of a database query. Results look similar to this:

```
<a href="http://www.dannychoo.com/post/en/26468/Koenji.html" class="danny-choo">Koenji</a> 
```

I can echo this into a page just fine. What I'd like to do is give an end user the option to refresh the link (which can be done by refreshing the page and echoing a new random string returned by the php function) without having to refresh the whole page. I've tried a few different methods, but it seems the function that returns the element is only run when the page reloads - so my URL never changes.

Here is my latest attempt. I figured the url I'm grabbing from the database was only getting set when the paged loaded. I thought setting a function to initialize the url variable would help - no good. It still only works once on page load.

```
$(document).ready(function() {
    updateVariable();
    $('#dannychoolink').html(random + url);
    $('.danny-choo').attr('target', '_blank');
});

$('#clicky').click(function() {
    updateVariable();
    $('#dannychoolink').html(random + url);
    $('.danny-choo').attr('target', '_blank');
});

function updateVariable() {
    url = '<?php echo dannyChoo();?>';
    random = 'Random DannyChoo.com article:  ';
}; 
```

You can see it live at www.dannychoofan.com.

Any help is appreciated =0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:28:30.630

看起来您正在寻找 ajax 风格的调用。

您应该将 dannyChoo() 函数的内容放入与 index.php 文件处于同一级别的名为 articleLinkGenerator.php 的新文件中。该文件应包含 dannyChoo() 函数的内容，以便它自动执行并回显您期望的链接的 html，例如

```
<?php
    function dannyChoo(){
        // generate random link code
        echo $random_link_html // Like <a href="http://www.dannychoo.com/post/en/26468/Koenji.html" class="danny-choo">Koenji</a>
     }

      dannyChoo(); 
```

然后在您的 index.php（主网站）中使用 ajax(http://api.jquery.com/jQuery.get/) 更新您的函数，如下所示：

```
$(document).ready(function() {
    updateVariable();
});

$('#clicky').click(function() {
    updateVariable();

});

function updateVariable() {
    $.get('articleLinkGenerator.php',function(data){
        $('#dannychoolink').html(data);
     });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:12:01.963

这是因为 PHP 在页面加载之前运行，而 JavaScript 在页面加载之后运行，所以如果没有另一个页面加载，您的变量永远不会改变。

# php - PHP redirect user through .htaccess and pass requested URL to php?

> ID：11769699
> 
> 赞同：0
> 
> 时间：2012-08-02T01:08:57.727
> 
> 标签：php, .htaccess, url-rewriting

Say I'm trying to access:

```
mysite.com/foo/bar/ 
```

I want too:

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !=/index.php
RewriteRule .* /index.php 
```

Then:

```
$url = $_SERVER['PHP_SELF'];
echo $url; 
```

To show:

```
foo/bar/ 
```

Currently getting:

```
index.php 
```

(Obviously I have no idea, but you get the point for what I'm trying to achieve)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:12:18.860

利用`$_SERVER['REQUEST_URI']`

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# wordpress - PHP Warning/Error on Wordpress Site

> ID：11769702
> 
> 赞同：0
> 
> 时间：2012-08-02T01:09:06.163
> 
> 标签：wordpress, php

I'm getting this warning message on a Wordpress I have just setup:

[http://wptest.paddingtonterraces.com.au/](http://wptest.paddingtonterraces.com.au/)

**Warning:** call_user_func_array() [function.call-user-func-array]: First argument is expected to be a valid callback, 'gllr_add_script' was given in **/home/paddingt/public_html/wptest/wp-includes/plugin.php** on line **403**

Anyone know how to sort this one out?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:39:21.467

停用您的插件和主题并一一激活它们，以便您找出导致问题的组件或功能来自哪个插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:22:49.403

它正在寻找一个名为`gllr_add_script`... 的函数，该函数存在吗？

# php - HTML/CSS 模板

> ID：11769707
> 
> 赞同：0
> 
> 时间：2012-08-02T01:09:44.080
> 
> 标签：php, html, css

我目前正在尝试找出一种方法来为许多看起来完全相同的页面创建模板。唯一不同的是内容部分。

我已经使用 PHP 和 include() 来分隔我的页面的几个部分，但仍然需要一些允许我设置整个页面的默认布局和样式的东西，因为我将创建数千个相同的页面。

请帮我一些提示！高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:24:38.843

> 数以千计的相同页面。

如评论中所述，您绝对应该使用 CMS（内容管理系统）

**CMS的主要特点：**

1.  允许大量人员共享和贡献存储的数据
2.  基于用户角色控制对数据的访问（即定义用户或用户组可以查看、编辑、发布等的信息）；
3.  促进数据的存储和检索；
4.  控制数据的有效性和合规性；
5.  减少重复输入；
6.  简化报告撰写；
7.  改善用户之间的沟通。
8.  将数据定义为几乎任何东西：文档、电影、文本、图片、电话号码、文章等。
9.  页面内容管理

    *参考：* [http ://en.wikipedia.org/wiki/Content_management_system](http://en.wikipedia.org/wiki/Content_management_system)

* * *

话虽如此，除非您想花费无数时间学习和学习（这不是一件坏事），但似乎您只是想让这个复杂的网站正常运行，那么您真正需要的是 CMS。

**看看我认为哪些是顶级 CMS：**

1.  [Joomla](http://www.joomla.org/)
2.  [WordPress](http://wordpress.org/)
3.  [杜普拉](http://drupal.org/)

简而言之，您只需要获取您的主机，[http://www.godaddy.com/](http://www.godaddy.com/) （不是我个人最喜欢的），但为了简单起见；Godaddy 将通过单击按钮为您安装 CMS，它将设置所有内容并让您启动并运行！完成后，您可以通过管理员面板登录并使用设置来查看工作原理。

我将从 WordPress 开始，这是一个很好的网站，一旦您完成所有设置（假设您使用 Wordpress CMS），您就可以开始使用

*   [http://www.siteground.com/tutorials/wordpress/wordpress_start.htm](http://www.siteground.com/tutorials/wordpress/wordpress_start.htm)
*   [http://codex.wordpress.org/Site_Design_and_Layout](http://codex.wordpress.org/Site_Design_and_Layout)

玩得开心！希望这可以帮助。

# jquery - jquery防止具有指定类名的标签的onclick事件

> ID：11769708
> 
> 赞同：0
> 
> 时间：2012-08-02T01:09:49.960
> 
> 标签：jquery

这是我的代码：

```
 $('a').on('click', function(e) {
    e.preventDefault();
    }); 
```

但这会阻止每个链接工作，我需要它特定于具有名称类的链接：“prevent”

例如：`<a class="prevent" href="#link"> </a><a href="#link1"> </a>` 在这种情况下，我希望#link1 正常工作，#link 将触发`e.preventDefault();`

请问有什么想法吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:13:25.947

您可以根据类名选择锚点：

```
$('a.prevent').on('click', function(e) {
     e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T01:12:25.860

```
 $('a.prevent').on('click', function(e) {
e.preventDefault();
}); 
```

您应该阅读：[http ://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# python - 以编程方式调整我的 Windows 7 计算机上的音量

> ID：11769709
> 
> 赞同：2
> 
> 时间：2012-08-02T01:10:05.027
> 
> 标签：python, windows, volume

我想知道是否可以使 Tkinter 比例与计算机的体积相对应。或者说，把比例尺往上拉，电脑的体积能变大吗？这只是我草拟的一些随机代码。我正在运行 64 位 Windows 7 操作系统。

```
1    from Tkinter import *
2
3    def sel():
4       selection = "Value = " + str(var.get())
5       label.config(text = selection)
6
7    root = Tk()
8    var = DoubleVar()
9    scale = Scale( root, variable = var )
10   scale.pack(anchor=CENTER)
11
12   button = Button(root, text="Get Scale Value", command=sel)
13   button.pack(anchor=CENTER)
14
15   label = Label(root)
16   label.pack()
17
18   root.mainloop() 
```

老实说，我不在乎它是否不能完成。我只是想知道这是否可能。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:56:01.457

请参阅[更改主音量级别](https://stackoverflow.com/questions/294292/changing-master-volume-level)以了解如何在 C 中执行此操作，然后将其与[How to use win32 API's with python](https://stackoverflow.com/questions/1025029/how-to-use-win32-apis-with-python)混合使用。然后将生成的回调绑定到 Tkinter gui 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-12T23:06:24.600

我知道这是一个古老的问题，但最佳答案超出了大多数人的能力范围。我用 python 编写是为了避免使用 C，而不是拥抱它。

现实的最佳答案是为命令行安装一些东西（例如[Nircmd](http://www.nirsoft.net/utils/nircmd.html)），然后使用`subprocess`（预安装）来调用它，例如`subprocess.getoutput("nircmd setsysvolume 0")`希望这有助于找到它的其他人。

# c++ - 在 Visual Studio 10 中使用 /MT 或 /MD 构建 dll

> ID：11769711
> 
> 赞同：1
> 
> 时间：2012-08-02T01:10:05.580
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++, msvcrt

我正在构建一个将由 C 和 C++ 应用程序使用的 C++ dll。我知道 /MT 会导致静态库 (LIBCPMT.LIB) 代码被转储到我的 dll 中，因此没有依赖性。/MD 将链接到导入库，并将依赖于 C++ 运行时 (MSVCP100.dll)。

我的疑惑：

1.  在 /MD 选项中，我是否必须确保正确版本的 C++ 运行时 dll（我在开发期间链接到的导入库）存在于 Windows 操作系统上？

2.  我是否需要关心使用我的 dll 的应用程序链接到哪个 C/C++ 运行时？我想使用 C++11 功能，但想确保旧的 C++ 应用程序仍然可以使用我的 dll。

3.  我现在计划使用 VS 2012 RC，我认为他们的 C++ 运行时库已经更新。是否会再次依赖于代码将在哪个版本的 Windows 上执行或使用我的 dll 的应用程序使用的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:09:33.830

1.  是的，必须存在相关的运行时库 DLL

2.  是的，客户端代码通常需要使用相同的运行时。但是，您可以通过仅向客户端提供 C 样式接口或 COM 接口来解决此问题。例如，没有`std::string`或其他包含运行时分配的东西的数据。

3.  是的，您将受限于 VS 2012[支持的目标平台——Windows Vista 及更高版本。](http://www.microsoft.com/visualstudio/11/en-us/products/compatibility)

# javascript - 来自平移地图的 Google Maps API v3 停止信息框

> ID：11769712
> 
> 赞同：1
> 
> 时间：2012-08-02T01:10:18.690
> 
> 标签：javascript, google-maps-api-3

我正在创建一个带有融合层的谷歌地图，以便网站的访问者可以获取有关各个州技术人员的信息。这里是网站供参考：[http](http://horizonwebtest.zxq.net/techmap.html) ://horizo​​nwebtest.zxq.net/techmap.html地图需要锁定到美国大陆，所以我禁用了默认UI，可拖动，双击缩放，键盘快捷键，滚轮和自动平移。问题是当信息窗口弹出时，它仍然强制地图平移。有谁知道解决这个问题的方法？这是JavaScript：

```
// JavaScript Document
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(38.816223025492505, -94.15954943749999),
      zoom: 4,
      disableDefaultUI: true,
      draggable: false, 
      disableDoubleClickZoom: true,
      keyboardShortcuts: false,
      scrollwheel: false,
      disableAutoPan: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var horizonStyles = [
     {
        featureType: "water", 
            stylers: [ 
                { hue: "#0077ff" }, 
                { saturation: 20 }, 
                { lightness: -50 }, 
            ]
     },{
         featureType: "administrative.locality", 
            stylers: [ 
                { visibility: "off" } 
            ]
     },{
         featureType: "administrative.province",
         elementType: "labels.text.fill",
            stylers: [
                { lightness: -80 }
            ]
     }
    ];
    var layer = new google.maps.FusionTablesLayer({
        query: {
            select: 'geometry',
            from: '18KqZR_1Nd39CyWN1kKt8Pufd6wlLS2oQArpCugw'
        },
    });
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
    map.setOptions({styles: horizonStyles});
    layer.setMap(map);
} 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T01:40:00.350

经过大量搜索和反复试验，似乎融合层不包含可编辑元素。要编辑信息框，您需要设置 suppressInfoWindows: true 然后创建您的信息窗口。这是完成的代码供参考：

```
// JavaScript Document
  function initialize() {
    var latlng = new google.maps.LatLng(38.816223025492505, -94.15954943749999); 
    var infoposition = new google.maps.LatLng(40, -81);
    var infowindow = new google.maps.InfoWindow({
      disableAutoPan: true,
      position: infoposition,
    });
    var infoWindowContent = '';
    var mapOptions = {
      center: latlng,
      zoom: 4,
      disableDefaultUI: true,
      draggable: false, 
      disableDoubleClickZoom: true,
      keyboardShortcuts: false,
      scrollwheel: false,
      disableAutoPan: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var horizonStyles = [
     {
        featureType: "water", 
            stylers: [ 
                { hue: "#0077ff" }, 
                { saturation: 20 }, 
                { lightness: -50 }, 
            ]
     },{
         featureType: "administrative.locality", 
            stylers: [ 
                { visibility: "off" } 
            ]
     },{
         featureType: "administrative.province",
         elementType: "labels.text.fill",
            stylers: [
                { lightness: -80 }
            ]
     }
    ];
    var layer = new google.maps.FusionTablesLayer({
        query: {
            select: 'geometry',
            from: '18KqZR_1Nd39CyWN1kKt8Pufd6wlLS2oQArpCugw',
        },
        suppressInfoWindows: true,
    });
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
    map.setOptions({styles: horizonStyles});
    layer.setMap(map);

//click listener on layer
google.maps.event.addListener(layer, 'click', function(e) {
if(infowindow) infowindow.close();
else infowindow;

//create info window layer
infoWindowContent = infowindow.setContent(
    '<p class="info_window" style="font-weight: bold">' + e.row['State'].value + '</p>' +
    '<p class="info_window">' + e.row['Number of Technicians'].value + ' technicians available<br>' +
    '<a href="http://horizonwebtest.zxq.net/contact/">Click here to schedule a service call or installation<br>' +
    'or <style="font-weight:bold">CALL 727-845-4444 NOW</style> for a live help desk<br>' +
    'person to assist you over the phone or to dispatch<br>' +
    'a technician to your site.</a></p>'
    );

map.setCenter(latlng);
infowindow.open(map);        
});
} 
```

我希望对其他人有所帮助...

# java - 无法停止 AsyncTask 中的 ProgressDialog

> ID：11769714
> 
> 赞同：1
> 
> 时间：2012-08-02T01:10:36.697
> 
> 标签：java, android, android-asynctask, android-progressbar

我有两个不工作的 AsyncTask。我做错了一定有一些共同点。

我的第一个活动需要很长时间才能加载，所以我希望有一个 progressDialog/Bar，但它失败了。我在我的 onCreate 中访问 AsyncTask

```
new HeavyWorker(this).execute();

public class HeavyWorker extends AsyncTask < String , Context , Void > {

    private ProgressDialog      progressDialog ;
    private Context             targetCtx ;

    public HeavyWorker ( Context context ) {
        this.targetCtx = context ;
   //     this.needToShow = true;
        progressDialog = new ProgressDialog ( targetCtx ) ;
        progressDialog.setCancelable ( false ) ;
        progressDialog.setMessage ( "Retrieving data..." ) ;
        progressDialog.setTitle ( "Please wait" ) ;
        progressDialog.setIndeterminate ( true ) ;
    }

    @ Override
    protected void onPreExecute ( ) {
        progressDialog.show ( ) ;
    }

    @ Override
    protected Void doInBackground ( String ... params ) {
      // Do Your WORK here 
```

在正常的
“public void onCreate(Bundle savedInstanceState)”区域中，下面的这些行可以正常工作

```
 Ls = new LoadSettings(CreateAppointment.this);
        gs = new GlobalSubs();

        TimeZoneList(); 
```

此行动态填充 Spinner 框并使其停止工作，因此我将其注释掉。

```
 //      createTimezone();
        ZoneList(Ls.getCountryZone()); 
```

此行还动态填充微调框，因此我将其注释掉

```
 //  createZone();
        InitialiseUI();
        CreateFileName();

       return null ;
    } 
```

这个区域从来没有到达过？

```
 @ Override
    protected void onPostExecute ( Void result ) {
        if(progressDialog != null && progressDialog.isShowing()){
            progressDialog.dismiss ( ) ;
        }
    }
} 
```

我的第二页因同样的问题而失败。
我还尝试在设置页面中使用稍微不同的代码。现在修复：

```
//
private class MyClass extends AsyncTask<Void, Void, Void>{

ProgressDialog mProgressDialog;

public MyClass(){

mProgressDialog = new ProgressDialog(Preferences.this);
mProgressDialog.setMessage ("Please Wait While Saving");
mProgressDialog.setTitle("Saving"); 
```

//

```
@Override
 protected void onPreExecute() {
    super.onPreExecute();
    mProgressDialog.show(Preferences.this, "Saving", "Please Wait a Sec");
 }

@Override
protected Void doInBackground(Void... params)
    {
        saveSettings();
        return null;
    }

@Override
 protected void onPostExecute(Void unused) { 
```

它起作用的唯一方法是当我注释掉该行并更改为不同的活动时

```
//   mProgressDialog.dismiss();
        Toast.makeText(Preferences.this, "Your Settings Where Saved.", Toast.LENGTH_SHORT).show();
     gotoMainPage();
 }

}

    private void gotoMainPage(){
        Intent a = new Intent(this, Main_entry.class);
        finish();
        startActivity(a);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:22:33.737

您不应该在后台对 UI 做任何事情。 `doInBackground()`在后台线程上运行。如果您需要在后台进程中更新 UI，您可以使用`publishProgress()`(and `onProgressUpdate()`)。

在我看来，您仍在尝试在这里执行 UI 操作：

```
 //  createZone();
    InitialiseUI();
    CreateFileName(); 
```

我不知道是什么`InitialiseUI()`，但它听起来像 UI 一样。如果您需要 UI 设置，请在`preExecute()`UI 线程上调用。

你能在你的`doInBackground()`方法中设置一个断点，看看它有多远，然后告诉我们吗？那会有所帮助。

在你的第二个例子中，你说它在`onPostExecute()`这里失败了：

```
mProgressDialog.dismiss(); 
```

实际上只有一种方法会失败。如果`mProgressDialog`为空。你能检查这个类的构造函数，并确保你记得实例化它吗？

PS您有第二个通用参数，就像`Context`在您的第一`AsyncTask`个子类中一样。但是，您似乎没有使用它。通常，这将是`doInBackground()`传递给`onProgressUpdate()`via的数据类型`publishProgress()`。

# c++ - 原始输入分辨率

> ID：11769716
> 
> 赞同：0
> 
> 时间：2012-08-02T01:10:50.823
> 
> 标签：c++, raw-input

我正在使用 Win32 RawInput API 来监视高清鼠标的鼠标事件。从文档中不清楚我已经能够找到用于报告鼠标移动的比例。更具体地说，在 RAWMOUSE 结构中，lLastX 和 lLastY 报告鼠标的相对运动，但我们在谈论什么比例？像素？鼠标注册的原始点？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:36:33.737

它是步数。鼠标在 1 英寸中报告的步数取决于鼠标灵敏度，以每英寸计数 (CPI) 表示。请参阅此[链接](http://wiki.answers.com/Q/What_is_mouse_DPI)。

# php - 在（MySQL 循环）之前用“and”显示最后一条 MySQL 记录？

> ID：11769719
> 
> 赞同：0
> 
> 时间：2012-08-02T01:11:06.580
> 
> 标签：php

所以我有 MySQL 查询，它显示了所有喜欢帖子的用户。它看起来像这样：

```
<?

echo 'Liked by&nbsp;';

$sql="SELECT * FROM registered_users WHERE faved LIKE '%$idpost%'";
$result=mysql_query($sql);

while($row=mysql_fetch_array($result)) {

echo '<a href="" class="link">'; echo $row['fullname']; echo '</a>';
echo ',';

}

echo '.';

?> 
```

我现在如何选择最后一个循环条目并在其前面显示“和”而不是“，”？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:23:49.273

您可以使用 mysql_num_rows() 在开始获取结果之前计算返回的行数，并在 while 循环中添加一个增量变量和一个测试，如果该变量等于您回显的行数，而不是的 ，

请参阅：[mysql_num_rows 文档](http://www.php.net/manual/en/function.mysql-num-rows.php)

# php - 使用不同数量的文本框更新 mysql 数据库

> ID：11769723
> 
> 赞同：1
> 
> 时间：2012-08-02T01:11:23.590
> 
> 标签：php, mysql, textbox, while-loop

我有多个文本框显示与 mysql 数据库中的一行相对应的字符串。我希望能够通过在文本框中输入并单击提交来更改数据库中的每个字符串。

因此，在连接到数据库后，我使用 while 循环创建了我的文本框。

```
<form action="<?php $self ?>" form method="post">

<?php

$query = "SELECT * FROM `table` ORDER BY table.ID DESC";  

$result = @mysql_query($query) or die(' 
ERR: The database returned an unexpected error. 

');   

$num=mysql_numrows($result);
$change="";

$i=0;
while ($i < $num) {

$post=mysql_result($result,$i,"post");
$id=mysql_result($result,$i,"ID");
$ts=mysql_result($result,$i,"timeStamp");

$page = html_entity_decode($post);

$output = stripslashes($page);

if ($output != "") { 
echo '<textarea name="' . $id . '" rows="4" cols="70">' . $output . '</textarea><div class="time"><font face="monospace">' . $ts . '</font></div>';
} //creates tables for each filled entry with a name corrsponing to its auto-increment id.

$i++;
}

?>

<input name="send" type="hidden" />  
<div class="mod">
<p><input class="master" type="submit" value="Mod" /></p></div><!--submit button is called "Mod"-->

</form>

</body>  
</html> 
```

一切正常显示。如果数据库中有 4 行包含文本，那么它将显示这 4 行，每行都在单独的文本框中。

现在我想用用户在文本框中输入的任何内容替换数据库中的文本。这是我尝试过的代码。它什么也不做。

```
<?php
$i=0;
while ($i < $num) {

$id=mysql_result($result,$i,"ID");
$post=mysql_result($result,$i,"post");

if (!isset($_POST[$id])) {
$_POST[$id] = "";
}

$change = $_POST[$id]; 

mysql_query("UPDATE  'database'.'table' SET  'post' =  '$change' WHERE  'table'.'ID' ='$id';");

$i++;
} 
```

基本上，循环将为表中的每一行运行一次。对于每个文本框，它应该使用 $_POST[1] 更新 'database'.'table' 用于 ID 为 '1' 的 'post'，$_POST[2] 用于 ID 为 '2' 的 'post' 等...相反，什么也没有发生。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:10:25.843

正如 Prowla 提到的，您应该使用 PDO 而不是 mysql_ 函数。无论如何，我改进了你的代码，它现在应该可以工作了：

```
<form action="<?php $self ?>" form method="post">
<?php

$query = "SELECT * FROM `table` ORDER BY table.ID DESC";  
$result = @mysql_query($query) or die('Query error:'.mysql_error());   
$num=mysql_num_rows($result);
$change="";

while($post = mysql_fetch_array($result))
{
    /*
        $post = array(
            'post' => '....',
            'ID' => '...',
            'timeStamp' => '...'
        );
    */

    $page = html_entity_decode($post['post']);
    $output = stripslashes($page);

    if ($output != "") { 
        echo '<textarea name="posts['.$post['ID'].']" rows="4" cols="70">' . $output . '</textarea><div class="time"><font face="monospace">' . $post['timeStamp'] . '</font></div>';
    } //creates tables for each filled entry with a name corrsponing to its auto-increment id.

}

?>

<input name="send" type="hidden" />  
<div class="mod">
<p><input class="master" type="submit" value="Mod" /></p></div><!--submit button is called "Mod"-->

</form>

</body>  
</html> 
```

**php更新文件：**

```
$query = "SELECT * FROM `table` ORDER BY table.ID DESC";  
$result = @mysql_query($query) or die('Query error:'.mysql_error());   
while($update_post = mysql_fetch_array($result))
{
    $update = (isset($_POST[$update_post['ID']])) ? $_POST[$update_post['ID']] : "";
    if($update != "")
    {
            mysql_query("UPDATE  'database'.'table' SET  'post' =  '$update' WHERE  'table'.'ID' ='".$update_post['ID']."';");  
                echo "<!--POST ID ".$update_post['ID']." been updated-->\n";
    }
} 
```

我添加了一个 html 注释 ( `<!-- -->`)，以便您可以检查更新是否实际发生。这样你就可以调试你的代码。（您还应该阅读有关 print_r 、 var_dump 的信息）

# java - 计算器尝试和捕捉 Java 程序

> ID：11769732
> 
> 赞同：0
> 
> 时间：2012-08-02T01:12:24.220
> 
> 标签：java, try-catch, calculator

我正在尝试制作一个 try/catch 程序计算器，它可以消除以下错误，但它不起作用。请告诉我我做错了什么。我应该测试非法操作数运算和除以零。

```
do // do while is for many operations
{
    try
    {
        System.out.println("Enter num1 and num2 : ");
        int num1 = new Scanner();
        int num2 = new Scanner();
        System.out.println("Enter sign : ");
        char sign = new Scanner();
    }
    catch(IllegalArgumentException ex) // This will check for illegal inputs
    {
        System.out.println(ex.Message()); //Will print error message
    }

    if(sign == '+')
    { // part of code where you will write the plus operation
        System.out.println(num1+num2);
    }
    if(sign == '-')
    {
        System.out.println(num1-num2);
    }
    if(sign == '*')
    {
        System.out.println(num1*num2);
    }
    if(sign == '/')
    {
        try
        {
            System.out.println(num1/num2);
        }
        catch(ArithmeticException ex)// Check for divide by zero exception
        {
            System.out.println("Divide by zero");
        }
    }

    if(sign == 'x') // to exit
    {
        flag = false
    }

    else
    {
        System.out.println("Error : Unknown Operator\n");
    }

}while(flag == true) // flag will be true until user enters 'x' as the choice to exit. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T01:13:33.050

您将 Scanner 对象分配给 int 变量，而不是编译。

您正在寻找的是：

```
Scanner sc = new Scanner(System.in);
int i = sc.nextInt(); 
```

我建议您阅读扫描仪文档： [http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:26:55.363

首先，可能更紧迫的是，您的代码存在一些**明显的语法问题。**之前提到过，某些语句甚至无法编译——`int num1 = new Scanner()`这是不合适的，因为[an`int`不是对象，并且空构造函数不是 new 的选择之一`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)。

其次，也可能是最重要的一点，你的程序**有一个严格的、线性的流程。** 假设我只想添加两个数字。好吧，我不走运，因为我每次都必须经历加、减、乘和除数字。

*在这种情况下，合理地确定代码范围*非常重要。使用[方法](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)来实现这一点。

```
public Long add(Long value1, Long value2) {
    return value1 + value2;
}

// and so forth 
```

每当您想要执行特定操作时，您都可以通过捕获输入来实现 - 来自单词“add”、基于文本的菜单（输入 1 表示添加）或其他方式。

至于除以零，您**不使用`try...catch`块。** 通常，您会围绕您不想破坏的代码执行此操作，因此它在除法方法或尝试除法时很有用。

```
public Long divide(Long value1, Long value2) throws ArithmeticException {
    return value1 / value2;
} 
```

当您使用该方法时，您会想要：

```
Long a = new Long(300);
Long b = new Long(0);

try {
    divide(a, b);
} except(ArithmeticException, ae) {
    System.out.println("Can't divide by zero");
} 
```

我将项目的整体流程和构建留给您，但这应该会给您一个良好的开端。

# javascript - 函数中的局部变量

> ID：11769736
> 
> 赞同：0
> 
> 时间：2012-08-02T01:13:17.543
> 
> 标签：javascript

我知道变量是其他对象的属性。例如：

```
var myVar = 'something'; 
```

是*窗口*对象的一个​​属性（当然，如果它在全局范围内）。

如果我想找到变量的对象，我只使用*这个*变量。但：

```
function f() {
    var myVar2 = 'something';
} 
```

*myVar2*属于哪个对象？（*myVar*属于*window*对象，但是*myVar2*呢？）

我想知道，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:14:56.413

它不属于一个对象。它属于函数的范围`f`。`myVar`您可以通过 inside 访问它`f`。您无法在`f`.

如果你做了

```
function f() {
  this.myVar = 1;
} 
```

现在你可以做

```
var myF = new f();
myF.myVar 
```

实际上，这有时是定义用户定义对象的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:24:27.163

`var`做一些有趣的事情。`var`语句被提升到其功能范围的顶部。的`var`功能范围是它恰好在其中的任何功能。

JavaScript 没有块级作用域，这意味着：

```
(function () { //a closure to create new scope
    var foo;
    foo = 1;
    if (condition) {
        var bar;
        bar = 3;
    }
}()); 
```

……相当于……

```
(function () {
    var foo,
        bar;
    foo = 1;
    if (condition) {
        bar = 3;
    }
}()); 
```

如果`var`语句没有父级，它将改为将变量作为属性添加到全局上下文中，在 Web 浏览器中恰好是`window`.

这是*唯一*一次 using`var`将创建一个属性。如果要创建对象的属性，您只需设置它：

```
(function () {
    var foo;
    foo = {};
    foo.bar = 'baz'; //this creates the `bar` property on `foo`
}()); 
```

JavaScript 是一种具有原型继承的原型语言。函数是一流的对象[（因为 JavaScript 不是针对函数的种族主义者）]。这意味着函数可以像任何其他对象一样使用。

您可以设置它们：

```
(function () {
    var foo;
    //foo is now a function
    foo = function () {
        alert('Hello World');
    };
}()); 
```

您可以在它们上设置属性：

```
(function () {
    var foo;
    foo = function () {
        alert('Hello World');
    };
    foo.bar = 'baz'; //this works just fine
}()); 
```

您甚至可以将它们作为参数传递：

```
(function () {
    var foo,
        bar;
    foo = function () {
        alert('Hello World');
    };
    bar = function (c) {
        c();
    };
    bar(foo); //guess what this does?
}()); 
```

函数做的另一件很酷的事情是它们充当构造函数。所有函数本质上都是构造函数，您只需要使用`new`关键字调用它们：

```
(function () {
    var foo; //case sensitive
    //it doesn't matter whether you use `function Foo`
    //or `var Foo = function...`
    function Foo() {
        alert('Hello World');
    }
    foo = new Foo();
    foo.bar = 'baz';
}()); 
```

使用构造函数的重要细节是函数的上下文 ( `this`) 将被设置为构造函数创建的对象。这意味着您可以在构造函数中设置对象的属性：

```
(function () {
    var foo;
    function Foo() {
        this.bar = 'baz';
    }
    foo = new Foo();
    alert(foo.bar); //'baz'
}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:17:50.117

`myVar2`属于局部范围（的`f`）和`myVar`全局范围。

# php - 用于从数组中获取数据的正则表达式

> ID：11769737
> 
> 赞同：-1
> 
> 时间：2012-08-02T01:13:22.293
> 
> 标签：php, regex

我的表格列信息中有以下数据

```
array( 'Email: Customer One <customer1@yahoo.com>. By employee: james@company.com.',
    'By employee: james@company.com. Department Head: Nickolas Jim.',
    'Email: Customer One <customer2@yahoo.com>. Status: currently employees.',
    'Email: Customer One <customer3@yahoo.com>. By employee: Mirza@company.com.'
) 
```

等等等等

我需要从数组中获取“按员工”。换句话说，我需要正则表达式解决方案

教育署。我只需要 By 员工（如果存在）..没有别的所以在上面的例子中我会有

```
By employee: james@company.com
By employee: james@company.com
By employee: Mirza@company.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:23:23.017

我在 php 5.4.5 中测试了以下示例代码：

```
 <?php
$foo = array( 'Email: Customer One <customer1@yahoo.com>. By employee: james@company.com.',
              'By employee: james@company.com. Department Head: Nickolas Jim.',
              'Email: Customer One <customer2@yahoo.com>. Status: currently employees.',
              'Email: Customer One <customer3@yahoo.com>. By employee: Mirza@company.com.'
            );

for($i = 0; $i < count($foo); ++$i){
    if(0 >= preg_match('/\bBy employee: ([-\w._]+@[-\w]+(?:\.[-\w]+)*\.\w{2,4})\b/', $foo[$i], $matches))
        continue;  

    echo $matches[0] . "\n";
    echo $matches[1] . "\n";
    echo "\n";  
}            

?> 
```

输出：

```
 By employee: james@company.com
james@company.com

By employee: james@company.com
james@company.com

By employee: Mirza@company.com
Mirza@company.com 
```

# c# - wkhtmltopdf - 导出的 PDF 中不显示非英文字体

> ID：11769738
> 
> 赞同：1
> 
> 时间：2012-08-02T01:13:25.167
> 
> 标签：c#, wkhtmltopdf, html-to-pdf

我正在使用 wkhtmltopdf.exe 将 HTML 转换为 PDF，使用下面的源代码。问题是 - PDF 显示“？” 代替所有非英文字符，如中文、日文、俄文、阿拉伯文。当输出为 HTML 时，字符会正确显示。我尝试为 HTML 设置不同的编码（utf-8、utf-16、gb2312），但 PDF 不会呈现非英语语言。

我在 wkhtmltopdf 论坛上阅读了有关在服务器上安装中文字体的信息，但看起来它们不适用于 Windows 服务器环境。此外，字体似乎在服务器上可用，因为 HTML 正确呈现？

有什么想法让它发挥作用吗？

代码：

```
private void WritePDF(string html)
    {
        string inFileName,
                outFileName,
                tempPath;
        Process p;
        System.IO.StreamWriter stdin;
        ProcessStartInfo psi = new ProcessStartInfo();

        tempPath = Request.PhysicalApplicationPath 
            + ConfigurationManager.AppSettings[Constants.AppSettings.ExportToPdfTempFolder];
        inFileName = Session.SessionID + ".htm";
        outFileName = Session.SessionID + ".pdf";

        // run the conversion utility
        psi.UseShellExecute = false;
        psi.FileName = Server.MapPath(ConfigurationManager.AppSettings[Constants.AppSettings.ExportToPdfExecutablePath]);
        psi.CreateNoWindow = true;
        psi.RedirectStandardInput = true;
        psi.RedirectStandardOutput = true;
        psi.RedirectStandardError = true;
        //psi.StandardOutputEncoding = System.Text.Encoding.gb;

        // note that we tell wkhtmltopdf to be quiet and not run scripts
        // NOTE: I couldn't figure out a way to get both stdin and stdout redirected so we have to write to a file and then clean up afterwards
        psi.Arguments = "-q -n - " + tempPath + outFileName;

        p = Process.Start(psi);

        try
        {
            stdin = p.StandardInput;
            stdin.AutoFlush = true;

            stdin.Write(html);
            stdin.Close();

            if (p.WaitForExit(15000))
            {
                // NOTE: the application hangs when we use WriteFile (due to the Delete below?); this works
                Response.BinaryWrite(System.IO.File.ReadAllBytes(tempPath + outFileName));
            }
        }
        finally
        {
            p.Close();
            p.Dispose();
        }

        // delete the pdf
        System.IO.File.Delete(tempPath + outFileName);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-21T11:07:50.840

wkhtmltopdf 绝对可以渲染中文、日文、俄文、阿拉伯文等非英文字符。在大多数情况下，它们不会显示，因为 HTML 模板缺少具有适当字符集定义的元标记。默认情况下 .NET 使用 UTF-8 编码，在这种情况下 HTML 模板应包含以下元标记：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8" /> 
```

顺便说一句，您可以使用 NReco PdfGenerator 之类的 .NET 包装器之一（我是这个库的作者），而不是直接调用 wkhtmltopdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:43:14.350

确保您的字体支持这些字符并且您的源代码是 UTF-8 并且它应该可以工作 - 我已经使用韩语、中文、波兰语和其他各种字符测试了 wkhtmltopdf 并且它一直有效。请参阅我对其他类似问题的回答[https://stackoverflow.com/a/11862584/694325](https://stackoverflow.com/a/11862584/694325)

我写我的 html 源代码，但除此之外，我的 PDF 生成与你的非常相似。我会检查所有地方是否都是 utf-8。

```
using (TextWriter tw = new StreamWriter(path, false, System.Text.Encoding.UTF8))
{
    tw.WriteLine(contents);
} 
```

从这样的源代码生成的 PDF 似乎可以正常工作。

# c# - 流媒体事件后的 .xlsx 文件损坏

> ID：11769748
> 
> 赞同：1
> 
> 时间：2012-08-02T01:14:48.203
> 
> 标签：c#, excel-2007

我正在使用 EPPlus 库创建一个 .xlsx 文件，然后将其流式传输到浏览器。要流式传输我正在使用的代码：

```
HttpContext.Current.Response.Clear();
            HttpContext.Current.Response.Buffer = true;
            HttpContext.Current.Response.ContentType = "application/octet-stream";
            HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=" + Server.MapPath("xls/"+ download_results_filename));
            HttpContext.Current.Response.TransmitFile(Server.MapPath("xls/" + download_results_filename));
            HttpContext.Current.Response.Flush(); 
```

我的问题是这个。如果我将代码与库一起使用，则保存并打开文档一切都很好。但是，当我在服务器上创建文件并将其流式传输给用户时，使用上面的代码，我收到一条损坏的文件消息，具有更正或恢复文件的附加功能，我这样做并且文件显示正确；因此，如果使用上面的八位字节流方法将文件流式传输给用户会损坏文件，我应该如何将二进制数据流式传输给用户。我想将内容类型保持为“应用程序/八位字节流”，就好像我特别指出它是我在 iPad 上遇到问题的 excel 电子表格一样。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T20:00:49.130

你看到这个例子了吗？

[http://epplus.codeplex.com/wikipage?title=WebapplicationExample](http://epplus.codeplex.com/wikipage?title=WebapplicationExample)

它使用这条线

```
Response.BinaryWrite(pck.GetAsByteArray()); 
```

# sql - iPad模拟器中的phonegap 2.0 sql SELECT

> ID：11769752
> 
> 赞同：0
> 
> 时间：2012-08-02T01:15:50.427
> 
> 标签：sql, ipad, select, cordova, simulator

我有一个测试 phonegap 应用程序来尝试使用 Osx Lion、Xcode 4.3.3、phonegap 2.0 进行 sql 数据库查询，几乎就像在文档中一样

```
function populateDB(tx,user) {
 tx.executeSql('DROP TABLE IF EXISTS USER');
 tx.executeSql('CREATE TABLE IF NOT EXISTS USER (id unique, data text)');
 tx.executeSql('INSERT INTO USER (id, data) VALUES (1, "First row")');
}

function errorCB(err) {
 alert("Error processing SQL: "+err);
}

function successCB() {
 alert("success!");
}

function queryDB(tx) {
 tx.executeSql('SELECT * FROM USER', [], querySuccess, errorCB);
}

function querySuccess(tx,result) {
 if(results.rows.length==0) alert("No users");
 else alert(results.rows.length);
}

var db = window.openDatabase("user", "1.0", "user", 200000);

db.transaction(populateDB, errorCB, successCB);

db.transaction(queryDB, errorCB); 
```

第二个事务给出错误：“错误处理 SQL：[object SQLerror]”

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:33:43.773

在您的 querySuccess- 回调中，您有

```
if(results) 
```

并在函数参数中读取

```
querySuccess(tx,result). 
```

修复后，代码在 Chrome 的控制台中正常运行。

# standards - 是否为 VHDL numeric_std 有符号/无符号定义了溢出

> ID：11769754
> 
> 赞同：6
> 
> 时间：2012-08-02T01:16:09.600
> 
> 标签：standards, vhdl, integer-overflow

如果我有一个`unsigned(MAX downto 0)`包含 value 的值`2**MAX - 1`，VHDL (87|93|200X) 标准是否定义了当我将它增加一时会发生什么？（或者，类似地，当我从零减一时？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T07:16:11.170

**简短的回答：**

没有溢出处理，溢出进位只是丢失了。因此，结果只是您的运算*模 2^MAX*的整数结果。

**更长的答案：**

该`numeric_std`包是标准包，但它不是 VHDL 标准 (87,93,200X) 的核心。供参考：[numeric_std.vhd](http://www.csee.umbc.edu/portal/help/VHDL/packages/numeric_std.vhd)

最后的`+`操作员调用`ADD_UNSIGNED (L, R : unsigned; C : std_logic)`函数（with `C = '0'`）。请注意，任何整数/自然操作数首先转换为`unsigned`.

该函数的定义是：

```
function ADD_UNSIGNED (L, R : unsigned; C : std_logic) return unsigned is
    constant L_left : integer   := L'length-1;
    alias XL        : unsigned(L_left downto 0) is L;
    alias XR        : unsigned(L_left downto 0) is R;
    variable RESULT : unsigned(L_left downto 0);
    variable CBIT   : std_logic := C;
begin
    for i in 0 to L_left loop
        RESULT(i) := CBIT xor XL(i) xor XR(i);
        CBIT      := (CBIT and XL(i)) or (CBIT and XR(i)) or (XL(i) and XR(i));
    end loop;
    return RESULT;
end ADD_UNSIGNED; 
```

如您所见，如果`CBIT='1'`（进位） for会发生“溢出” `i = L_left`。结果位`RESULT(i)`正常计算，最后一个进位机器人值被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-08T10:44:17.517

我遇到了想要`unsigned`在 C 或 Verilog 中溢出/下溢的问题，这就是我想出的（`result`并且`delta`是`unsigned`）：

```
result <= unsigned(std_logic_vector(resize(('1' & result) - delta, result'length))); -- proper underflow
result <= unsigned(std_logic_vector(resize(('0' & result) + delta, result'length))); -- proper overflow 
```

因为溢出`'0' & result`使得 an`unsigned`大 1 位以便能够正确容纳加法的值。然后通过`resize`产生正确溢出值的命令删除 MSB。下溢也一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T04:05:37.877

对于等于 7 的 MAX 值，将 1 添加到 2**7 - 1 (127) 将得到值 2**7 (128)。

最大无符号值由无符号数组类型的长度决定：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity foo is
end entity;

architecture faa of foo is
    constant  MAX: natural := 7;
    signal somename:  unsigned (MAX downto 0) := (others => '1');
begin
UNLABELED:
    process
    begin
        report "somename'length = " & integer'image(somename'length);
        report "somename maximum value = " &integer'image(to_integer(somename));
        wait;
    end process;
end architecture; 
```

聚合`(others => '1')`表示每个元素中的“1”`somename`是无符号数组类型，并表示可能的最大二进制值。

这给出了：

> foo.vhdl:15:9:@0ms:(report note): somename'length = 8
> foo.vhdl:16:9:@0ms:(report note): somename 最大值 = 255

长度为8，无符号数组类型可表示的数值范围为0到2**8 - 1（255），最大可能值大于2**7（128）且无溢出。

[这在一个较新的问题VHDL modulo 2^32 add](https://stackoverflow.com/questions/30609749/vhdl-modulo-232-addition)中被注意到。在您接受的答案的上下文中，它假定您的意思是长度而不是最左边的值。

从零开始的递减确实会导致值 2**8 - 1 (255) (MAX = 7)。下溢或上溢取决于您的数学信仰。

乔纳森·德罗莱特（Jonathan Drolet）在链接的较新问题中指出了这一点。

# sql-server-2005 - 比较两个视图

> ID：11769755
> 
> 赞同：0
> 
> 时间：2012-08-02T01:16:12.970
> 
> 标签：sql-server-2005, join, views

我目前有两种观点得出不同的结果。一个在旧数据库中，另一个在新数据库中。
ond 视图引入了约 50000 条记录，而新视图引入了约 40000 条记录，
除了一列或两列之外，两者都具有几乎所有相同的数据。

有没有办法可以将两者结合起来看看有什么不同？

在查询和连接方面，我的知识有限。

我尝试了左加入和右加入，但它给了我 100000+ 个结果。我不想要那个。我想要约 50000 个结果，并且在没有信息的情况下将列设为空。

这可能吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T01:22:03.850

你可以试试这个：

```
 SELECT * FROM OldView
EXCEPT
    SELECT * FROM NewView 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:16:36.437

您可以尝试以下方法。首先，您使用左连接连接表，然后过滤新的空值。

像这样的东西

```
select  *
from    oldview o
        left join newview n
          on  o.field = n.field
where   n.value is null 
```

这样，您可以将它们组合起来，并使用 where 语句过滤 newview 值。问题是，您首先将它们组合起来，然后过滤它们。

# java - 具有递归数据结构/相同类型子元素的 EclipseLink MOXy

> ID：11769758
> 
> 赞同：1
> 
> 时间：2012-08-02T01:16:32.587
> 
> 标签：java, jaxb, eclipselink, moxy

我正在使用 EclipseLink MOXy 并且有一个具有相同数据类型的子元素的数据结构。现在我不想序列化具有无限深度的数据结构，而只是第一级。

以下是数据结构的一些示例代码：

```
package test;

import java.util.Collection;
import java.util.Vector;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElementRef;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlRootElement;

@XmlAccessorType(XmlAccessType.PROPERTY)
@XmlRootElement
public class MyClass {
    private int id;
    private String details;
    private Collection<MyClass> children = new Vector<MyClass>();

    public MyClass() {
    }

    public MyClass(int id, String details) {
        this.id = id;
        this.details = details;
    }

    @XmlElementWrapper
    @XmlElementRef
    public Collection<MyClass> getChildren() {
        return children;
    }

    public void addChild(MyClass child) {
        children.add(child);
    }

    public String getDetails() {
        return details;
    }

    @XmlAttribute
    public int getId() {
        return id;
    }

    public void setChildren(Collection<MyClass> children) {
        this.children = children;
    }

    public void setDetails(String details) {
        this.details = details;
    }

    public void setId(int id) {
        this.id = id;
    }
} 
```

还有我的测试程序：

```
package test;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;

public class Test {
    public static void main(String[] args) throws Exception {
        MyClass l1 = new MyClass(1, "Level 1");
        MyClass l2 = new MyClass(2, "Level 2");
        l1.addChild(l2);
        MyClass l3 = new MyClass(3, "Level 3");
        l2.addChild(l3);

        JAXBContext jc = JAXBContext.newInstance(MyClass.class);
        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(l1, System.out);
    }
} 
```

生成以下 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<myClass id="1">
    <children>
        <myClass id="2">
            <children>
                <myClass id="3">
                    <children/>
                    <details>Level 3</details>
                </myClass>
            </children>
            <details>Level 2</details>
        </myClass>
    </children>
    <details>Level 1</details>
</myClass> 
```

但是，我也希望 xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<myClass id="1">
    <children>
        <myClass id="2">
            <details>Level 2</details>
        </myClass>
    </children>
    <details>Level 1</details>
</myClass> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T10:40:45.420

为了完成这个用例，我们将利用 JAXB 中的两个概念： `XmlAdapter`和[Marshaller.Listener](http://docs.oracle.com/javaee/6/api/javax/xml/bind/Marshaller.Listener.html "Marshaller.Listener")。

**我的类适配器**

我们将利用默认的 JAXB 行为，即不将元素编组为空值。为此，我们将实现一个`XmlAdapter`在达到指定级别后返回 null 的方法。为了计算级别，我们将创建一个`Marshaller.Listener`.

```
package forum11769758;

import javax.xml.bind.Marshaller;
import javax.xml.bind.annotation.adapters.XmlAdapter;

public class MyClassAdapter extends XmlAdapter<MyClass, MyClass>{

    private int levels;
    private MyMarshallerListener marshallerListener;

    public MyClassAdapter() {
    }

    public MyClassAdapter(int levels) {
        this.levels = levels;
    }

    public Marshaller.Listener getMarshallerListener() {
        if(null == marshallerListener) {
            marshallerListener = new MyMarshallerListener();
        }
        return marshallerListener;
    }

    @Override
    public MyClass marshal(MyClass myClass) throws Exception {
        if(null == marshallerListener || marshallerListener.getLevel() < levels) {
            return myClass;
        }
        return null;
    }

    @Override
    public MyClass unmarshal(MyClass myClass) throws Exception {
        return myClass;
    }

    static class MyMarshallerListener extends Marshaller.Listener {

        private int level = 0;

        public int getLevel() {
            return level;
        }

        @Override
        public void afterMarshal(Object object) {
            if(object instanceof MyClass) {
                level--;
            }
        }

        @Override
        public void beforeMarshal(Object object) {
            if(object instanceof MyClass) {
                level++;
            }
        }

    }

} 
```

**我的课**

`@XmlJavaTypeAdapter`注释用于指定`XmlAdapter`应使用的an。

```
package forum11769758;

import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlAccessorType(XmlAccessType.PROPERTY)
@XmlRootElement
public class MyClass {

    private int id;
    private String details;
    private Collection<MyClass> children = new Vector<MyClass>();

    public MyClass() {
    }

    public MyClass(int id, String details) {
        this.id = id;
        this.details = details;
    }

    @XmlElementWrapper
    @XmlElementRef
    @XmlJavaTypeAdapter(MyClassAdapter.class)
    public Collection<MyClass> getChildren() {
        return children;
    }

    public void addChild(MyClass child) {
        children.add(child);
    }

    public String getDetails() {
        return details;
    }

    @XmlAttribute
    public int getId() {
        return id;
    }

    public void setChildren(Collection<MyClass> children) {
        this.children = children;
    }

    public void setDetails(String details) {
        this.details = details;
    }

    public void setId(int id) {
        this.id = id;
    }

} 
```

**测试**

由于我们需要以`XmlAdapter`有状态的方式使用 ，我们将在 上设置它的实例`Marshaller`，我们还将在 上设置`Marshaller.Listener`我们创建的实例`Marshaller`。

```
package forum11769758;

import javax.xml.bind.*;

public class Test {

    public static void main(String[] args) throws Exception {
        MyClass l1 = new MyClass(1, "Level 1");
        MyClass l2 = new MyClass(2, "Level 2");
        l1.addChild(l2);
        MyClass l3 = new MyClass(3, "Level 3");
        l2.addChild(l3);

        JAXBContext jc = JAXBContext.newInstance(MyClass.class);
        Marshaller marshaller = jc.createMarshaller();
        MyClassAdapter myClassAdapter = new MyClassAdapter(2);
        marshaller.setAdapter(myClassAdapter);
        marshaller.setListener(myClassAdapter.getMarshallerListener());
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(l1, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<myClass id="1">
   <children>
      <myClass id="2">
         <children/>
         <details>Level 2</details>
      </myClass>
   </children>
   <details>Level 1</details>
</myClass> 
```

**了解更多信息**

以下文章扩展了此答案中讨论的主题：

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)
*   [http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html](http://blog.bdoughan.com/2011/09/mixing-nesting-and-references-with.html)

# java - 在扩展名为 org.eclipse.plugin.menus 的默认菜单上插入项目

> ID：11769760
> 
> 赞同：1
> 
> 时间：2012-08-02T01:16:42.813
> 
> 标签：java, eclipse, menu, eclipse-plugin

我正在尝试以编程方式在菜单上添加一些选项，我已经知道如何在菜单“Window”之后添加菜单，但我想在默认菜单中添加一个选项（更具体地说，在 Window> 中添加我的透视图开放视角）。

我不知道什么是正确的 LocationURL。

实际上，我的扩展点是这样配置的：

```
<extension
     point="org.eclipse.ui.menus">
  <menuContribution
        allPopups="false"
        locationURI="menu:org.eclipse.ui.main.menu?after=window">
     <menu
           icon="icons/enmac.jpg"
           id="enmac"
           label="EnMac">
        <command
              commandId="EnMac.openPerspective"
              icon="icons/enmac.jpg"
              label="Open Perspective"
              style="push"
              tooltip="open">
        </command>
     </menu>
  </menuContribution>
</extension> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:21:03.100

您通常可以使用 Eclipse 中的插件 spy 工具来查找菜单 URI。这可以通过 ALT+SHIFT+F2（至少在 Windows 平台上）然后单击适当的菜单项来访问。

但是在这种情况下，听起来您实际上只是想将您的透视图添加到默认透视图菜单中。*在这种情况下，您应该使用org.eclipse.ui.perspectives*扩展点注册您的透视类。有关更多详细信息，请参阅[本教程](http://www.eclipse.org/articles/using-perspectives/PerspectiveArticle.html)。

# java - 使用表数据在java中动态创建一个类

> ID：11769765
> 
> 赞同：0
> 
> 时间：2012-08-02T01:17:04.087
> 
> 标签：java, dynamic, collections, properties

我有以下要求，我需要公开一个 API，用户可以在其中发送一个自由形式的“查询”，如表达式，我需要返回真/假。例如：对于汽车对象，如果查询是

```
" (make = 'FORD' AND year IN (1990,1991)) OR type = 'SUV') ". 
```

但是，“make”、“year”或“type”来自外部填充的表。

```
TABLE CAR_PROPERTIES (
 propertyName VARCHAR2(40),
 propertyValue VARCHAR2(10)
) 
```

我首先遍历了其他连接表以加载属性。

所以，如果有新的属性（和对应的值），我需要在查询中支持。

到目前为止，这就是我所做的：

1.  如果不需要向类添加动态属性，我知道我可以在我的集合上使用 JoSQL 之类的东西。

2.  一旦应用程序开始使用 Java Tools API 或 javaassist，我就开始研究动态创建类。

客户坚持使用不需要添加新属性和部署代码的解决方案（尽管此 API 的“调用者”确实需要更改代码才能在查询中使用新属性）。

我不喜欢动态创建新类。寻找任何指示或解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:30:53.050

Raj - 为您的设计提供一些建议和灵感：

1.  甚至不会进行完整的 O/R 映射。我会考虑将您的领域特定语言翻译成 SQL。我在 Python 中做过这样的事情。这要容易得多，因为您正在两种简单语言（自定义 DSL 和 SQL）之间进行语言到语言的翻译。使用健壮的正则表达式，您可以拥有一个非常简洁且强大的框架来处理此类交互。（参见[Regex Table Lexer](http://martinfowler.com/dslCatalog/regexTableLexer.html)和其他模式）

2.  有一些有趣的设计可供研究：

    *   OData API 允许用户使用 RESTful “代数”使用客户表达式查询数据 OData4J 处理映射 [http://code.google.com/p/odata4j/](http://code.google.com/p/odata4j/)

    *   QueryDSL： [http ://blog.mysema.com/2011/01/querying-in-sql-with-querydsl.html](http://blog.mysema.com/2011/01/querying-in-sql-with-querydsl.html)

    *   SQLDSL： [http ://code.google.com/p/sql-dsl/](http://code.google.com/p/sql-dsl/)

3.  对于动态关系和属性表达式，我建议（嵌入）图形数据结构这是一个有用的教程，显示相对图映射：
    [http](http://py2neo.org/tutorials/tables_to_graphs)
    : //py2neo.org/tutorials/tables_to_graphs 和一个关于 Neo4J 的教程，我用于类似目的：
    [http ://docs.neo4j.org/chunked/stable/tutorials.html](http://docs.neo4j.org/chunked/stable/tutorials.html)

# php - 如何打开并写入文件的指定部分

> ID：11769767
> 
> 赞同：0
> 
> 时间：2012-08-02T01:17:24.827
> 
> 标签：php, fopen, explode, fwrite, fclose

我似乎无法弄清楚如何让这个脚本将数据写入文件的部分。以下是适用的代码摘录：

```
$file = $url.'.php';   
if (!$file_handle = fopen($file,"a+")) 
{ 
echo $lang['cannot_open_file']; 
} 
if (!fwrite($file_handle,stripslashes(html_entity_decode($data))))
{ 
echo $lang['file_is_not_writable']; 
}
fclose($file_handle);  
echo ($lang['success']);
echo ('<meta http-equiv="Refresh" content="4;url='.$url.'.php" />');
}
}

?>

<form action="<?php echo $url;?>.php" method="post">
<?php echo $lang['name']?> <span style="font-weight:100;">(<?php echo $lang['required']?>)</span>:<br />
<input class="textfield" type="text" name="name" value="" /><br />
<?php echo $lang['website']?> <span style="font-weight:100;">(<?php echo $lang['without_http'];?>)</span>:<br />
<input class="textfield" type="text" name="site" value="" /><br />
<?php echo $lang['message']?>:<br />
<textarea class="textarea" rows="2" cols="25" name="message"></textarea><br />
<img src="captcha-image.php" alt="Image verification" />  <br />
  <?php echo $lang['value_from_the_image'];?>:<br />
<input class="textfield" type="text" name="img_ver" value="" /><br />
        <input type="reset" name="reset" value="<?php echo $lang['reset'];?>" />
        <input type="submit" name="send" value="<?php echo $lang['send'];?>" />
      </form>
<hr>
<h3>Comments:</h3>
<!--comments -->

<?php include('../templates/footer.php'); ?> 
```

有人介意帮我解决这个问题吗？将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:44:31.010

1.  首先使用文件获取内容来检索内容。
2.  然后使用 preg_replace 查找要替换的位置或内容。
3.  然后用新内容重写文件。

# html - 重叠的选项卡式容器列表项

> ID：11769771
> 
> 赞同：0
> 
> 时间：2012-08-02T01:17:55.427
> 
> 标签：html, css, html-lists

当然，这是一个简单的解决方案，但我正在努力解决它。我有一个带有大约 3 个列表项的选项卡式容器，每个列表项中都有超链接。当我减小浏览器窗口的大小时[让我们从右边说]，它不会将元素隐藏到最右边，而是列表项的大小会减小，然后在其他两个列表项的宽度下方自行调整。

我将最小宽度设置为与元素宽度相同。

我需要在哪里调整？

这是语义结构

```
<div id = "tabbed">
  <ul>
     <li><a href = "#tab_1">Tab 1</a></li> <!-- 3 list items -->
  </ul>
  <div class = "tabs" id = "tab_1"> <!--3 tabs, each tab corresponds to the link in the list item -->
  </div>
</div> 
```

这是CSS：

```
#tabbed
{
width :80%;
margin:auto;
margin-top:20px;
}

#tabbed ul{
margin:0px;
margin-top:15px;
}

#tabbed li
{
display: inline-block;
list-style-type:none;
border:1px solid #ccc;
border-bottom: 0px;
border-top-left-radius:4px;
border-top-right-radius:4px;
margin-right:5px;
margin-top:5px;
padding:4px 4px 10px 4px;
width: 30%;
background:#87CEEB;
}

#tabbed a{
 font-family:Arial, Helvetica, sans-serif;
 font-size: 13px;
 font-weight:bold;
 color: #7F818B;
 display:block;
 text-align:center;
 text-decoration:none;
 margin-top:5px;
 margin-bottom:5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:28:11.707

无需查看任何代码，我可以建议以下内容：

尝试

```
your_div {overflow:hidden;} 
```

对于初学者，

其次，只有一半的浏览器可以观察到最小宽度。我建议尝试一种不同的方法来设置最小宽度，以及一个代码示例以获得最佳结果:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:27:29.467

是的，请为您提供一些示例 html 和 CSS/样式。浏览器包装内容的方式很大程度上取决于实现。我假设您正在使用 CSS display: inline 使列表水平？

# operating-system - 操作系统：进程调度程序是否在单独的进程中运行

> ID：11769772
> 
> 赞同：7
> 
> 时间：2012-08-02T01:17:55.263
> 
> 标签：operating-system, scheduler

我对操作系统的工作原理毫无疑问。

调度程序：调度程序是否在单独的进程中运行（与任何其他进程一样）。交换新进程时到底发生了什么（我知道处理器寄存器和内存表已更新，我的问题是它们是如何更新的。我们可以编写一个程序来更新寄存器（sc，pc）以指向不同的过程）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T01:50:55.457

进程调度可以在一个单独的进程中运行，但是这样的设计将非常低效，因为您必须从一个进程交换到调度进程（然后必须对内核进行多次系统调用），然后再返回到新进程，而不是将调度程序放在不需要系统调用也不需要多次交换上下文的内核中。因此，调度器一般处于内核的独占领域。

以下是发生的步骤：

1.  调度程序确定哪个进程将在下一个时隙中运行（通过各种不同的算法）。

2.  调度程序告诉内存管理单元 (MMU) 使用页表来运行下一个进程（这是通过设置寄存器指向表来完成的）。

3.  调度程序对可编程中断定时器 (PIT) 进行编程，以在 N 个时钟周期后产生中断。

4.  调度程序从进程上次运行时恢复寄存器的状态（或将它们设置为新进程的默认值）

5.  调度程序跳转到进程中没有执行的最后一条指令的地址。

6.  N 个时钟周期后，发生中断，操作系统将其识别为由 PIT 引起，并注册为由调度程序处理。

7.  调度程序保存寄存器的状态（包括堆栈指针等）并获取中断发生位置的程序计数器（并将其保存为下次跳转的地址），然后返回步骤 1。

这只是如何完成的一个示例，许多低级细节都是特定于架构的。基本上所有寄存器（程序状态）都可以保存到 RAM 中的任何位置（例如，表示进程的结构的链表，每个进程都有寄存器空间等），并且虚拟地址空间（由页表定义）可以任意换掉了。

所以基本上你的问题：

“我们可以编写一个程序来更新寄存器以指向不同的进程吗？”

简单地说，但答案是正确的。我们当然可以。

# javascript - 加入数组，用引号将每个值括起来 javascript

> ID：11769774
> 
> 赞同：46
> 
> 时间：2012-08-02T01:18:00.217
> 
> 标签：javascript, arrays

如何将数组加入字符串并同时将每个值包含在其中

> '1/2/12','15/5/12'

```
for (var i in array) {
    dateArray.push(array[i].date);
}
dateString=dateArray.join('');
console.log(dateString); 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-08-02T01:24:14.223

如果您的日期已经是字符串，您可以执行以下操作

```
var dates = ['1/2/12','15/5/12'];

console.log("'" + dates.join("','") + "'"); 
```

然而，一个更酷、更简单的方法（对于没有日期的情况）方法是 [Array.prototype.map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)

```
// Array.prototype.map returns a new array by 
// mapping each element in the existing array
dates.map(function(date){
    // Wrap each element of the dates array with quotes
    return "'" + date + "'";
}).join(","); // Putsa comma in between every element 
```

或者用 es6 术语

```
dates.map(date => `'${date}'`).join(','); 
```

[http://jsfiddle.net/yMvVh/](http://jsfiddle.net/yMvVh/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-12-22T10:24:55.477

ES6：

```
var dates = ['1/2/12','15/5/12'];
var result = dates.map(d => `'${d}'`).join(',');
console.log(result);
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T01:22:34.563

```
dateString = '\'' + dateArray.join('\',\'') + '\''; 
```

演示：http: [//jsfiddle.net/mLRMb/](http://jsfiddle.net/mLRMb/)

# android - 启动我的应用程序时遇到问题？

> ID：11769777
> 
> 赞同：0
> 
> 时间：2012-08-02T01:19:18.407
> 
> 标签：android, android-layout, android-emulator

这是java ...有人可以告诉我这里有什么问题吗？错误可能在这里我认为logcat（下面）中的主要错误是一个空指针......虽然我可能是错的......提前谢谢大家！

```
package tip.calculator;

import android.os.Bundle;
import android.app.Activity;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
import android.view.View;
import android.widget.Button;

public class TipCalculator extends Activity 
{

private Button enter;
EditText myEditField ;
EditText myEditField2;
float percentage = 0;
float percentageInp = 0;
float billAmount = 0;
double output = 0; 
String output1 = "";
Button clearButton ;
TextView textView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myEditField = (EditText) findViewById(R.id.percentText);
    enter = (Button)findViewById(R.id.button1);
    myEditField2 = (EditText) findViewById(R.id.billText);

    enter.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

             TextView errors;
             textView = (TextView) findViewById(R.id.textView1);
             errors = (TextView) findViewById(R.id.errorText);    
             clearButton = (Button) findViewById(R.id.clearButton);

             for(;;){

             if(myEditField == null){
                 errors.setText("Percent must be filled in");
                 break;

             }

             if(myEditField2 == null){
                 errors.setText("Bill Amount must be filled in");
                 break;
             }

             }

            percentageInp = Float.parseFloat(myEditField.getText().toString());
            billAmount = Float.parseFloat(myEditField2.getText().toString());

            percentage = ((float)percentageInp /100);

            output = (double)(billAmount * percentage);

            double result = output * 100;
            result = Math.round(result);
            result = result / 100;

            output1 = Double.toString(result);

            textView.setText(output1 + " $");

        }
    });

    clearButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            percentage = 0;
            output = 0;
            output1 = "";
             TextView textView = null;

            textView.setText("");

            percentageInp = 0;
            billAmount = 0;

            myEditField.setText("");
            myEditField2.setText("");

        }

    });
}
} 
```

这是logcat ......我不知道从哪里开始......

```
08-01 18:13:41.915: E/AndroidRuntime(30328): FATAL EXCEPTION: main
08-01 18:13:41.915: E/AndroidRuntime(30328): java.lang.RuntimeException: Unable to start activity ComponentInfo{tip.calculator/tip.calculator.TipCalculator}: java.lang.NullPointerException
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.os.Looper.loop(Looper.java:137)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.app.ActivityThread.main(ActivityThread.java:4507)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at java.lang.reflect.Method.invokeNative(Native Method)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at java.lang.reflect.Method.invoke(Method.java:511)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at dalvik.system.NativeStart.main(Native Method)
08-01 18:13:41.915: E/AndroidRuntime(30328): Caused by: java.lang.NullPointerException
08-01 18:13:41.915: E/AndroidRuntime(30328):    at tip.calculator.TipCalculator.onCreate(TipCalculator.java:82)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.app.Activity.performCreate(Activity.java:4465)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
08-01 18:13:41.915: E/AndroidRuntime(30328):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
08-01 18:13:41.915: E/AndroidRuntime(30328):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:26:21.883

```
Caused by: java.lang.NullPointerException
    at tip.calculator.TipCalculator.onCreate(TipCalculator.java:82) 
```

你永远不会初始化`clearButton`.

```
clearButton.setOnClickListener(new OnClickListener() {...} 
```

**从评论中添加**

你需要移动这个：

```
clearButton = (Button) findViewById(R.id.clearButton); 
```

到这里：

```
myEditField = (EditText) findViewById(R.id.percentText);
enter = (Button)findViewById(R.id.button1);
myEditField2 = (EditText) findViewById(R.id.billText);
clearButton = (Button) findViewById(R.id.clearButton); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:36:30.253

clearButton 仅在单击 enter 按钮时设置。如果在输入按钮之前单击 clearButton，则会引发错误。

您可以使用 clearButton 与其他按钮一起设置`findViewById`

# c - c中来自（0,1）的随机数

> ID：11769779
> 
> 赞同：3
> 
> 时间：2012-08-02T01:19:43.273
> 
> 标签：c, random, random-sample

我想要一个指数分布的变量，这样做似乎很有效：

```
double exp_variate(double lambda){
    return -log(my_random_function())/lambda;
} 
```

其中 my_random_function 给出一个双 x，所以`0 < x < 1`（严格）意味着我永远不会得到`-log(0)`or `0`。我将如何获得一个排除 0 和 1 值的随机数。我敢肯定以前有人会问过这个问题，但我看不到。此外，我对生成指数分布值的其他方式持开放态度。

编辑：>到<

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T01:31:51.477

大概你的意思是`0 < x < 1`，因为一个数字不能同时小于 0 和大于 1。

在那种情况下，我可能会做类似的事情：

```
double my_random_function() { 
    return (rand() + 1.0) / (RAND_MAX+2.0);
} 
```

C 的随机数生成器通常产生从 0 到 RAND_MAX 的数字。这会将随机数生成器产生的值加一，因此它不能产生 0。除以 RAND_MAX+1 将使我们得到从 1/RAND_MAX 到 (RAND_MAX+1)/(RAND_MAX+1) 的结果，所以后者是 1。因为我们想避免这种情况，所以我们使用 (RAND_MAX+2)，所以我们通过 (RAND_MAX+1)/(RAND_MAX+2) 得到 1.0/(RAND_MAX+2)，这将是稍微大于 0.0 到稍微低于 1.0 的东西。

# c++ - 将 DLL 与 python 一起使用（使用 ctypes），不起作用

> ID：11769780
> 
> 赞同：3
> 
> 时间：2012-08-02T01:20:05.327
> 
> 标签：c++, python, dll, ctypes

我正在尝试编写一个可以在 Python (2.7) 中导入的 DLL，但我在“使其工作”时遇到了困难。`WinDLL()`当我使用或在 Python 中加载库`windll.LoadLibrary()`并测试导出的函数时，我得到的输出为空。如果我向它添加一个参数，`TestFunction()`则会引发一个`ValueError`声明可能有很多参数（实际上不是）。

**蟒蛇文件：**

```
from ctypes import *

x = windll.LoadLibrary('./pymod.dll')
print x.TestFunction(123) #Should return 123. 
```

**主.h：**

```
#ifndef __MAIN_H__
#define __MAIN_H__
#include <windows.h>
#define DLL_EXPORT __declspec(dllexport)    

#ifdef __cplusplus
extern "C"
{
#endif

int DLL_EXPORT TestFunction(int data);

#ifdef __cplusplus
}
#endif

#endif 
```

和**main.cpp：**

```
#include "main.h"

int DLL_EXPORT TestFunction(int x = 0) {
    return x;
}

BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved) {
    switch (fdwReason){
        case DLL_PROCESS_ATTACH:
            break;
        case DLL_PROCESS_DETACH:
            break;
        case DLL_THREAD_ATTACH:
            break;
        case DLL_THREAD_DETACH:
            break;
    }
    return TRUE;
} 
```

**已解决**：问题是错误的调用约定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T02:34:11.420

我的第一个猜测是您使用的调用约定与 Python 假设的不同。

```
int DLL_EXPORT TestFunction(int data); 
```

该声明可能意味着`cdecl`将使用调用约定；while 的使用`windll`使 Python 认为`stdcall`应该使用约定。这有效地改变了传递参数的方式，从而使 Python 认为您传递了错误数量的参数。这在[ctypes 文档](http://docs.python.org/library/ctypes.html#calling-functions)中有说明。

如果是这种情况，您可以执行以下任一操作：

1.  将 C 代码中的调用约定更改为`stdcall`（在 Windows 系统 DLL 中使用）。如果您使用的是 MSVC，他们有[一个关于开发 DLL 的文档](http://msdn.microsoft.com/en-us/library/office/bb687850.aspx)；
2.  将 Python 代码预期的调用约定更改为`cdecl`. 这是通过使用`cdll`代替来完成的`windll`。

# modal-dialog - InDesign CS5 脚本：如何关闭文档中的所有模式对话框窗口？

> ID：11769783
> 
> 赞同：1
> 
> 时间：2012-08-02T01:20:34.717
> 
> 标签：modal-dialog, adobe-indesign, extendscript

     当文档没有*任何*模式对话框窗口消息时，  `app.activeDocument.close(SaveOptions.no)`  工作正常。

     但是，我有一些 InDesign 文档*确实*出现了此类窗口，显示有关需要更新的链接或样式不正确的错误消息。上面的语句在这种情况下不起作用，因为窗口阻止脚本访问文档。

* * *

     那么，有没有办法遍历活动文档中的所有模式对话框？这是我迄今为止尝试过的，但*不起作用*：

```
if(xmlFile == "")
{
    //alert("There is no linked XML file in this document,\n\ttry a different document.");

    for(var i = 0; i < app.activeDocument.Windows.length; i++)
    {
        app.activeDocument.Windows[i].close();
    }

    app.activeDocument.close(SaveOptions.no);
    exit();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T18:58:49.190

好的，所以需要将应用程序的“用户交互级别”更改为“ `NEVER_INTERACT`”以忽略所有模态对话框窗口。这是修改后的代码，现在可以使用：

```
if(xmlFile == "")
{
    alert("There is no linked XML file in this document,\n\ttry a different document.");

     // the original interaction and warning settings of the application
    var oldInteractionPrefs = app.scriptPreferences.userInteractionLevel;

    // prevent interaction and warnings from interrupting script
    app.scriptPreferences.userInteractionLevel = UserInteractionLevels.NEVER_INTERACT;

    // close the active document without saving
    app.activeDocument.close(SaveOptions.no);

    // reset interactions to original settings
    app.scriptPreferences.userInteractionLevel = oldInteractionPrefs;

    exit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T15:01:15.900

你试过了吗？

```
app.activeDocument.windows.everyItem.close(SaveOptions.no); 
```

# c++ - MS Kinect FaceTracker 创建 IFTResult

> ID：11769786
> 
> 赞同：0
> 
> 时间：2012-08-02T01:21:13.267
> 
> 标签：c++, kinect

我有一个相当简单的应用程序，其中包含以下内容：

```
context->mFaceTracker = FTCreateFaceTracker();
hr = context->mFaceTracker->Initialize( &mVideoCameraConfig, &mDepthCameraConfig, NULL, NULL ); 
```

它工作正常并返回 S_OK 并且 mFaceTracker （据我所知）已正确初始化。但是，下一行是：

```
hr = context->mFaceTracker->CreateFTResult( &context->mFTResult ); 
```

它总是返回 FT_ERROR_UNINITIALIZED，不分配指针，让我感到困惑。我已经尝试了许多不同的策略来使其工作，从更改设备和检测器的线程工作方式，到将我的 FTcontext 对象从一个类更改为一个结构以匹配样本，所有这些都没有成功。Kinect SDK 示例都可以正常工作，但尝试在我自己的应用程序中使用它们似乎并没有，尽管我密切反映了它们如何初始化设备和面部跟踪器。我很好奇是否有其他人在初始化 IFTFaceTracker 或 IFTResult 时遇到过这个或类似的问题。另外，我很好奇除了测试 Initialize() 返回的 HRESULT 之外，我还能如何测试 IFTFaceTracker 的正确初始化。提前致谢，

=== 编辑

我有一些要求更多代码的请求。它建立在 Cinder 之上，并为 Cinder 使用这个块：[https ://github.com/BanTheRewind/Cinder-KinectSdk](https://github.com/BanTheRewind/Cinder-KinectSdk)

我不能发布所有代码，但我至少在这里发布了大部分相关的 Kinect 初始化代码：

```
void Kinect::start( const DeviceOptions &deviceOptions ) 
    {
        if ( !mCapture ) {

            // Copy device options
            mDeviceOptions  = deviceOptions;
            string deviceId = mDeviceOptions.getDeviceId();
            int32_t index   = mDeviceOptions.getDeviceIndex();

            // Clamp device index
            if ( index >= 0 ) {
                index = math<int32_t>::clamp( index, 0, math<int32_t>::max( getDeviceCount() - 1, 0 ) );
            }

            // Initialize device instance
            long hr = S_OK;
            if ( index >= 0 ) {
                hr = NuiCreateSensorByIndex( index, &mSensor );
                if ( FAILED( hr ) ) {
                    trace( "Unable to create device instance " + toString( index ) + ": " );
                    error( hr );
                    return;
                }
            } else if ( deviceId.length() > 0 ) {
                _bstr_t id = deviceId.c_str();
                hr = NuiCreateSensorById( id, &mSensor );
                if ( FAILED( hr ) ) {
                    trace( "Unable to create device instance " + deviceId + ":" );
                    error( hr );
                    return;
                }
            } else {
                trace( "Invalid device name or index." );
                return;
            }

            // Check device
            hr = mSensor != 0 ? mSensor->NuiStatus() : E_NUI_NOTCONNECTED;
            if ( hr == E_NUI_NOTCONNECTED ) {
                error( hr );
                return;
            }

            // Get device name and index
            if ( mSensor != 0 ) {
                mDeviceOptions.setDeviceIndex( mSensor->NuiInstanceIndex() );
                BSTR id = ::SysAllocString( mSensor->NuiDeviceConnectionId() ); 
                _bstr_t idStr( id );
                if ( idStr.length() > 0 ) {
                    std::string str( idStr );
                    mDeviceOptions.setDeviceId( str );
                }
                ::SysFreeString( id );
            } else {
                index = -1;
                deviceId = "";
            }
            flags |= NUI_INITIALIZE_FLAG_USES_COLOR;
            }
            hr = mSensor->NuiInitialize( flags );
            if ( FAILED( hr ) ) {
                trace( "Unable to initialize device " + mDeviceOptions.getDeviceId() + ":" );
                error( hr );
                return;
            }
                hr = mSensor->NuiSkeletonTrackingEnable( 0, flags );
                if ( FAILED( hr ) ) {
                    trace( "Unable to initialize skeleton tracking for device " + mDeviceOptions.getDeviceId() + ": " );
                    error( hr );
                    return;
                }
            mIsSkeletonDevice = true;

            mThread = CreateThread(NULL, 0, &Kinect::StaticThread, (PVOID)this, 0, 0);
        }
    }

    DWORD WINAPI Kinect::StaticThread(PVOID lpParam)
    {
        Kinect* device = static_cast<Kinect*>(lpParam);
        if (device)
        {
            return device->run();
        }
        return 0;
    }

void run() {

if(mSensor) {

if(mEnabledFaceTracking)
                {

                    if(mNeedFaceTracker) {
                        mFaceTracker = new FaceTracker( 
                        mDeviceOptions.getVideoSize().x,
                        mDeviceOptions.getVideoSize().y,
                        mDeviceOptions.getDepthSize().x,
                        mDeviceOptions.getDepthSize().y,
                        1.0,
                        1 );

                        mNeedFaceTracker = false;
                    }

                    // make sure we have both color && depth buffers to work with
                    if(newDepth || newVideo)
                    {
                        FT_SENSOR_DATA sensorData(mFTColorImage, mFTDepthImage);
                        FT_VECTOR3D hint[2]; // this is initialized elsewhere

                        mFaceTracker->checkFaces( (NUI_SKELETON_FRAME*) &skeletonFrame, mFTColorImage, mFTDepthImage, 1.0, 0);

                        if(mFaceTracker->getNumFaces() > 0) {

                            cout << " we have a face " << mFaceTracker->getNumFaces() << endl;

                            mNewFaceTrackData = true;
                            mFaceData.clear();
                            for( int i = 0; i < mFaceTracker->getNumFaces(); i++) {

                                Face newFace;
                                mFaceTracker->getProjectedShape(0, newFace.scale, newFace.rotation, newFace.transform, newFace.screenPositions);
                                mFaceData.push_back(newFace);
                            }
                        }
                    }
                }
Sleep( 8 );
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:48:42.507

看起来您从未调用（或在代码示例中省略）NuiImageStreamOpen()，例如 SingleFace 示例中的这段代码片段，Init 方法中的 KinectSensor.cpp：

```
hr = NuiImageStreamOpen(
    colorType,
    colorRes,
    0,
    2,
    m_hNextVideoFrameEvent,
    &m_pVideoStreamHandle );
if (FAILED(hr))
{
    return hr;
}

hr = NuiImageStreamOpen(
    depthType,
    depthRes,
    (bNearMode)? NUI_IMAGE_STREAM_FLAG_ENABLE_NEAR_MODE : 0,
    2,
    m_hNextDepthFrameEvent,
    &m_pDepthStreamHandle ); 
```

在调用 CreateFTResult() 之前调用它们可能会修复未初始化的错误。

此外，您调用 CreateThread()，然后调用 run()，但没有 while 循环，因此线程几乎会立即退出，当然没有足够的时间让 Kinect 开始向 FaceTracking 提供数据。

看起来您没有包含检查传感器是否有新数据、更新 mFTColorImage 和 mFTDepthImage 以及设置 newDepth 和 newVideo 标志的线程或事件循环。这可能在您在上面创建的同一线程中（前提是您创建了一个 while 循环，并忽略性能或其他需要 Kinect 数据的类），或者可能是与 SingleFace Kinect SDK 示例中不同的线程。

# kml - Google Earth API 中基于区域的网络链接

> ID：11769790
> 
> 赞同：6
> 
> 时间：2012-08-02T01:22:07.027
> 
> 标签：kml, google-earth-plugin

我有许多大型 KML 数据集，它们使用基于区域的网络链接层次结构提供服务；如[KML 参考](https://developers.google.com/kml/documentation/regions#regionbasednl)中所述：

> 将 Regions 与 NetworkLinks 结合使用，您可以创建一个指针层次结构，每个指针都指向一个特定的子区域。如`<viewRefreshMode>`下面的 KML 文件所示，有一个 onRegion 选项，它指定仅在 Region 处于活动状态时才加载 Region 数据。如果您提供具有多个详细级别的嵌套区域，则仅当用户的视点触发下一次加载时才会加载大量数据。

这在 Google 地球中加载时效果很好。

我现在希望使用[Google Earth 插件将这些加载到应用程序中](http://www.google.com/earth/explore/products/plugin.html)。 *我需要通过 Google Earth API 访问加载的内容*；（即附加点击事件，改变样式）将内容集成到应用程序中。

问题是，我没有找到对网络链接的“加载”事件的任何引用。在我看来，这样做的方式是：

*   通过 API 加载顶级网络链接，附加一个回调函数，该回调函数将在加载网络链接时调用。
*   在回调函数中，解析网络链接返回的KML。对于区域层次结构中的中间级别，此 KML 将仅包含到下一个区域级别的网络链接。通过 API 将它们加载到插件中，再次指定相同的回调函数，当它们被加载时（即当它们的区域变得可见时）将调用该函数。
*   最终，返回的 KML 将包含实际的“内容”。在这个阶段，在执行任何所需的修改（例如附加事件侦听器、设置样式等）之后，我们将实际内容（即地标）加载到插件中。

我在想 javascript 看起来像下面这样。
*请注意：这只是一个粗略的草图，可能有助于理解我的问题。* 我**不是**在问为什么这段代码不起作用。

```
//create network link
var networkLink = ge.createNetworkLink("");
networkLink.setName("Regionated hierarchy root");

// create a Link object
//the network-links contained in the kml that will be returned in this file
//are region-based; they will only be loaded when the user zooms into the relevant
//region. 
var link = ge.createLink("");
link.setHref("http://foo.com/regionatedRoot.kml");

// attach the Link to the NetworkLink
networkLink.setLink(link);

//specify the callback function to be invoked when the network link is loaded
//this is is the part that doesn't actually exist; pure fiction...
networkLink.onLoad = networkLinkLoaded;

// add the NetworkLink feature to Earth
ge.getFeatures().appendChild(networkLink);

// function which will be invoked when a network-link is loaded
// i.e. when its region becomes active
function networkLinkLoaded(kml) {

   //parse the kml returned for child network links,
   //this will create the network link KmlObject, with a 
   //region specified on it.
   for (childNetworkLink in parseNetworkLinks(kml)) {
      //and append them, again hooking up the call-back
      childNetworkLink.onLoad = networkLinkLoaded;
      ge.getFeatures().appendChild(childNetworkLink);
   }

   //if the user has zoomed in far enough, then the kml returned will
   //contain the actual content (i.e. placemarks).
   //parse the kml returned for content (in this case placemarks)
   for (placemark in parsePlacemarks(kml)) {
      //here we would attach event-listeners to the placemark
      ge.getFeatures().appendChild(placemark);
   }
} 
```

这可能吗？
我的想法是不是走错了路？我相信我已经遵循了管理大型 KML 数据集的推荐做法，但我不确定如何通过 API 使用这些做法。

**附录**：

作为我试图解决的问题类型的一个示例：假设您正在使用 Google 地球插件构建一个 Web 应用程序，并且您希望为世界上的每组交通信号灯显示一个地标。地标应仅以适当的详细程度显示（例如，当相机位于 5 公里高度时）。当用户点击地标时，我们希望 Web 应用程序加载该组交通信号灯的统计数据，并将它们显示在侧边栏中。

你会如何设计这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T20:51:20.547

您无需直接访问对象数据即可提供所需的功能。您将使用基于区域的网络链接层次结构完全像您所做的那样处理数据加载。然后，如果您的使用场景与您在附录中设定的场景一样，那么您只需使用来自点击事件的目标数据，根据需要根据地标加载统计数据。

例如，您可以简单地在窗口对象上设置一个通用的 mousedown 事件处理程序，然后测试目标是否是地标。您可以在加载任何数据之前添加此通用侦听器，当您单击动态加载的地标时，它仍会被触发。根本不需要将单个事件侦听器附加到地标。

例如

```
window.google.earth.addEventListener(ge.getWindow(), 'mousedown', onWindowMouseDown);

var onWindowMouseDown = function(event) {
  if (event.getTarget().getType() == 'KmlPlacemark') {
    // get the placemark that was clicked
    var placemark = event.getTarget();

    // do something with it, or one of its relative objects...
    var document = placemark.getOwnerDocument();
    var parent = placemark.getParentNode();

    // etc...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:08:33.833

不确定这是否是您想要的，但有一个 kmltree api 可以：

1.  根据给定的 kml 为您构建 kml 树
2.  允许您拥有一个“kmlloaded”事件处理程序

[http://code.google.com/p/kmltree/](http://code.google.com/p/kmltree/)

```
function initCB(instance){
    ge = instance;
    ge.getWindow().setVisibility(true);

    var gex = gex = new GEarthExtensions(ge);

    var tree = kmltree({
        url: 'http://foo.com/regionatedRoot.kml',
        gex: gex, 
        mapElement: $('#map3d'), 
        element: $('#tree'),
    });

    $(tree).bind('kmlLoaded', function(event, kmlObject){ //do something here });

    tree.load();
} 
```

它确实需要你引入另一个 js api，但它工作得很好，并为你提供了一些很好的内置功能。

到目前为止，我还没有从插件中找到任何会在加载 kml 时触发事件的东西......

您也许可以尝试使用 fetchKml() 尤其是如果您正在为那里的链接硬编码该网址？

```
google.earth.fetchKml(ge, 'http://foo.com/regionatedRoot.kml', function(kmlObject){
     //do logic here
}); 
```

# c# - SortedList.Last 与谓词的性能

> ID：11769793
> 
> 赞同：1
> 
> 时间：2012-08-02T01:22:27.463
> 
> 标签：c#, .net, performance, binary-search, sortedlist

我想在 SortedList 中找到低于某个值的最后一项的值。由于 SortedList 是用能够进行二进制搜索的东西实现的，所以这在 O(log(n)) 中是可能的。

这段代码的性能是什么：

```
data.Last(x => x.Key < 100); 
```

我只能找到 Enumerable.Last 的文档（[http://msdn.microsoft.com/en-us/library/bb549138(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb549138(v=vs.90).aspx)），我想确保它不使用泛型基于枚举器的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:26:22.647

A`SortedList`执行与任何`IEnumerable<T>`for`.Last`方法相同，都是 O(n)；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:40:17.133

我会用另一个问题来回答你的问题。对于任何任意谓词，如何`SortedList`利用其固有的排序比 O(n) 做得更好？

除非您对谓词做出假设，否则您基本上必须使用标准枚举器方法

# windows - 缺少什么程序？

> ID：11769799
> 
> 赞同：-1
> 
> 时间：2012-08-02T01:22:43.373
> 
> 标签：windows, mt

在 Windows 上运行预先编写的 cmd 文件时出现以下错误。

```
'mt' is not recognized as an internal or external command,
operable program or batch file. 
```

用例是：

```
mt -manifest <... something else....> 
```

很明显它需要一些`mt`，但我不知道到底是什么`mt`，所以我可以安装它。

谁能告诉我这是什么或从哪里得到它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:26:05.383

鉴于批处理文件的上下文，它可能是一个备份脚本，所以您可能正在寻找这个：

[http://www.holistech.co.uk/sw/mt/mt.html](http://www.holistech.co.uk/sw/mt/mt.html)

或者，如果它是来自开发项目的脚本，它可能指的是：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa375649(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375649(v=vs.85).aspx)

再次，脚本*做*什么？

# django - Django排序查询集按升序排列

> ID：11769805
> 
> 赞同：2
> 
> 时间：2012-08-02T01:23:25.670
> 
> 标签：django, django-models, django-queryset

对于这种情况，我想`QuerySet`按升序排序：

```
PRIORITY_CHOICES = (
(1, "P1"),
(2, "P2"),
(3, "P3"),
(4, "P4"),
(5, "P5"),
)

class Task(models.Model):
     name = models.CharField(max_length=255)
     priority = models.PositiveIntegerField(choices=PRIORITY_CHOICES) 
```

现在，因为优先级可以接受 None 值。当我在我的视图代码中执行此操作时，问题在于订购查询集：

```
task_list = Task.objects.all().order_by("priority") 
```

这将返回查询集，其中对象按优先级升序排列，无值在前。我想要升序列表，但我想在最后包含 None 值。我有一个庞大的数据库，所以我有兴趣在数据库级别完成此任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:38:06.667

这可能是您最好的选择。

```
import itertools
q = itertools.chain(
        Task.objects.filter(priority__isnull=False).order_by("priority"),
        Task.objects.filter(priority__isnull=True))
# Then you can iterate over your custom order
result = [(x.name, x.priority) for x in q] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:33:39.600

您可以使用（添加“-”符号）将顺序更改为降序`queryset.order_by('-field')`，但在 Django 中没有办法告诉空值应该如何排序 - 这是数据库特定的行为。如果使用降序排序仍然首先在数据库中为您提供空值 - use `queryset.extra(select={'order': 'custom_sql_function(priority)'}).order_by('order')`，如果`custom_sql_function`字段为空，则将字段转换为整数，并且特定于您的数据库引擎。为了获得更快的性能，您可以在`function(field)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T14:38:45.847

你可以在这样的模型中简单地做到这一点

```
class ModelName(models.Model):
    feild_1 = models.CharField( max_length=150)
    feild_2 = models.CharField( max_length=150, blank=True, null=True)

    class Meta:
        ordering = [F('order').asc(nulls_last=True)] 
```

# kineticjs - 调整 Kinetic JS 中拖动的 Kinetic.Path 元素的偏移，以始终将偏移中心保持在舞台上

> ID：11769809
> 
> 赞同：0
> 
> 时间：2012-08-02T01:23:53.480
> 
> 标签：kineticjs

我必须开发一个可拖动和可缩放的世界地图，并且在一个封闭的系统上，不能依赖谷歌地图之类的东西。

这不会是一个完整的“地图”应用程序，它会在缩放时显示更多细节，但基本上会用各种针脚显示世界，当缩放时，放大当前居中的地图区域在阶段。

我已经能够使用 Kinetic.Path 方法创建地图，还能够创建滑块来设置该 Path 元素的比例因子。我还将该元素的可拖动状态设置为 true。

但是在缩放时，它总是缩放到路径的左上角，所以基本上是坐标（0,0）。我已经使用 setOffset() 将路径偏移量移动到路径的中心（0.5 宽度，0.5 高度）。这有将图像的 3/4 放在舞台外的副作用，因此我将路径的 XY 调整为宽度的 0.5 和高度的 0.5，这又使其居中。

所以我现在有一个位于舞台中心的路径，当缩放时，会缩放到路径的中心。美丽的。但是，当我拖动它然后再次缩放时，它会继续根据路径的中心进行缩放。我需要缩放点（我假设它是由 setOffset() 控制的）以相对于舞台中心保持居中。这样，当他们拖动路径并继续缩放时，它将缩放到视图的中心。

我尝试了各种数学（这不是我的强项）来尝试调整拖动后的偏移量，但我似乎无法让它正常工作。任何人都可以向我解释这种模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:13:34.853

我正在做一些非常相似的事情，在环顾四周后，决定调整现有的库调用[kineticjs-viewport](http://code.google.com/p/kineticjs-viewport/)（我找不到演示页面，因为谷歌更改了他们的 &$*# 搜索算法，但有一个演示在存储库）。它基本上为您处理缩放、平移和缩放。我发现它有两个问题，即：

1）缩放时，它放大左上角的一点而不是中心屏幕。

2）它与最新版本的动力学-js不兼容，所以如果你想使用最新版本的动力学，你需要进去修改一些代码。不过，它适用于 kinetic-js 的 v3.8.1 版本。此外，让它兼容并不难，所以如果您决定使用它并需要帮助，请给我发邮件。

# sql-server-2008 - SQL Server 2008 R2 架构文件

> ID：11769812
> 
> 赞同：0
> 
> 时间：2012-08-02T01:24:18.683
> 
> 标签：sql-server-2008

如何运行架构 ( `.sql`) 文件？我必须导入它还是在某处执行它？任何帮助或解释将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T03:16:57.823

使用 SQL Server Management Studio 打开文件。您应该能够双击 .sql 文件，默认情况下它将在 SSMS 中打开。系统将提示您连接到服务器，然后您可以使用`F5`.

# javascript - 使用 javascript 文件的权利

> ID：11769818
> 
> 赞同：1
> 
> 时间：2012-08-02T01:24:52.607
> 
> 标签：javascript, jquery, permissions, rights

我通常从我感兴趣的网站中查看和分析网站/效果。于是我找到了一个从templatemonster那里买的网站。该网站对图像使用效果，即悬停过渡。分析该代码我看到了一个名为“hoverSprite.js”的文件。[http://pastebin.com/dbxm7zYT](http://pastebin.com/dbxm7zYT)。我试图在网上找到该代码但没有结果。我的问题是：我可以在我的商业项目中使用那段代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:31:48.900

我认为您不能只复制代码并按原样使用它。

也许最好的方法是联系网站管理员并询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:40:09.777

尝试理解代码，然后编写自己的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:40:35.277

我不是律师，所以不要把我所说的当作法律建议。这只是我个人的看法，可能是错误的。

法律可能因国家而异。

但是，一般来说，直接复制大量人们的代码是不合法的。如果您发现许可通知表明它是许可许可的（BSD 许可、MIT 许可、Apache 许可等），那么您可以使用它（假设将许可放在那里的人合法地这样做了）。

否则，您可以询问站点管理员他们从哪里获得它和/或您是否可以使用它。

您还可以研究代码并从中学习，然后针对您的站点实施您自己的代码。（不要只是开始修改现有代码。编写自己的代码，从头开始。）同样，法律可能因国家/地区而异，但这种做法通常不会给您带来麻烦。（说实话，即使不合法，仅仅复制代码通常也不会给您带来麻烦；无论如何您都不应该这样做。）

# sql - 为什么我的加入给了我太多的结果？

> ID：11769821
> 
> 赞同：0
> 
> 时间：2012-08-02T01:26:05.533
> 
> 标签：sql, sql-server-2005, join

我有：

```
 SELECT  dv.VariableID ,
            ds.DataSourceID ,
            p.DataVariableDataSourceParamId ,
            p.ParamCode ,
            p.ParamDisplayName ,
            p.DVDSParamControlType ,
            p.DependentOnDVDSParamId ,
            pv.ParamValue
    FROM    dbo.DataVariable dv
            INNER JOIN dbo.DataVariableDataSource ds ON dv.DataSourceId = ds.DataSourceID
            INNER JOIN dbo.DataVariableDataSourceParam p ON ds.DataSourceID = p.DataSourceId
            INNER JOIN dbo.DataVariableDataSourceParamValue pv ON p.DataVariableDataSourceParamId = pv.DataVariableDataSourceParamId
    WHERE   dv.VariableID = @vid
    ORDER BY dv.VariableID 
```

当我只有前两个连接时，我得到了我想要的：6 个结果。当我添加第三个时，我得到 660。我只想要前 2 个连接中的 6 条记录的 ParamValue，我似乎无法弄清楚为什么会出现这种情况。我正在编写第 12 个小时的代码，我确信这非常明显，但我可以用一只手。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:30:09.730

这将是因为您的`pv`表中有许多行匹配`DataVariableDataSourceParamId`

您可以通过添加`SELECT DISTINCT`. 您可能需要清理该表或保留不同的

但是，只有在所有人都相同的情况下， distinct 才会有所帮助`pv.ParamValue`，否则您将理所当然地获得更多匹配项，因为正在发生的事情是您正在找到所有匹配项`DataVariableDataSourceParamId`并显示它们。如果所有这些匹配都是相同的值，那么 distinct 确实会有所帮助，尽管

# sql - 如何在带有变量表的 PostgreSQL 中使用 UPDATE？

> ID：11769826
> 
> 赞同：0
> 
> 时间：2012-08-02T01:26:30.027
> 
> 标签：sql, postgresql, sql-update, dynamic-sql

例子：

```
Table=["category1","category2","category3"]

for varTable in Table:
    cr.execute('update varTable SET id=%s,WHERE id=%s)
     ........
       .... 
```

这个循环怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:28:50.013

为此使用动态 SQL。默认是使用 plpgsql 和[`EXECUTE`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN).
创建一个函数或使用一条`DO`语句进行临时执行。

### 动态 SQL

```
CREATE OR REPLACE FUNCTION f_up(_new_id int, _old_id int)
  RETURNS void AS
$BODY$
DECLARE
    _tbl text[] := '{category1,category2,category3}';
    t    text;

BEGIN

FOREACH t IN ARRAY _tbl
LOOP
    EXECUTE '
    UPDATE ' || t || '
    SET    id = $1
    WHERE  id = $2'
    USING  _new_id, _old_id;
END LOOP;

END;
$BODY$ LANGUAGE plpgsql; 
```

称呼：

```
SELECT f_up(23, 45); 
```

SO上有很多类似的答案。搜索[dynamic-sql](/questions/tagged/dynamic-sql "显示标记为“动态 sql”的问题")、[plpgsql](/questions/tagged/plpgsql "显示标记为“plpgsql”的问题")以及`EXECUTE`更多示例和解释。

### 纯 SQL

如果 plpgsql 对您来说仍然是黑魔法，您可以使用数据修改 CTE 非常有效地解决这个简单的案例。需要 PostgreSQL 9.1 - 用于[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)。

```
WITH vals AS (
    SELECT 23 AS new_id, 45 AS old_id -- provide values once
    )
    , a AS (
    UPDATE category1
    SET    id = v.new_id
    FROM   vals v
    WHERE  id = v.old_id
    )
    , b AS (
    UPDATE category2
    SET    id = v.new_id
    FROM   vals v
    WHERE  id = v.old_id
    )
UPDATE category3
SET    id = v.new_id
FROM   vals v
WHERE  id = v.old_id; 
```

# php - PHP Openid 选择器 try_auth 文件

> ID：11769827
> 
> 赞同：1
> 
> 时间：2012-08-02T01:26:37.777
> 
> 标签：php, openid

我正在尝试在我的网站中实现 openid 选择器，我想知道我的 openid 选择器工作所需的 try_auth 文件是什么？

我希望用户登录我的网站只使用他们的谷歌帐户，所以有人可以帮助我吗？我一直在做很多研究，但我没有找到成功的方法。我正在使用 PHP 进行后端开发。

也许如果有人可以帮助解释一切是如何工作的，那就太好了，我也不打算使用 DB 来存储任何用户登录。我知道我必须有一个会话变量来检查每个页面是否用户是否登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:26:52.607

openid-selector 只是一个不错的前端，用于选择使用哪个 OpenID 提供程序进行登录。您还需要一个库来执行相应的后端工作。在你的情况下，这个丢失的文件是 php-openid 的一部分：[https ://github.com/openid/php-openid](https://github.com/openid/php-openid)

# ruby-on-rails - 仅在视图中未定义的对象方法

> ID：11769840
> 
> 赞同：0
> 
> 时间：2012-08-02T01:28:54.313
> 
> 标签：ruby-on-rails, ruby, mongodb, object, mongomapper

我有一个 Day 对象，其中包含一些统计信息并且每天更新。这是我得到的两个错误：

> 未定义的方法 `top_light_snown' 用于#
> 
> # 未定义的方法 `top_agents_snown'

根据视图的内容：

```
<h3 class='thin underline'>Daily Breakdown:</h3>
<%# debug @today %>
<%# @today.methods %>
Top User Agents Today: <%= @today.top_agents_snown %>
<br>
Top Keyword Triggers <%= @today.top_keyword_triggers %>
<br>
Top URLs Visited <%= @today.top_urls_visited %>
<br>
Top Injections Shown <%= @today.top_inj_shown %>
<br>
Top Popups Shown <%= @today.top_pop_shown %>
<br>
Top Custom Injections Shown <%= @today.top_cust_shown %>
<br>
Top Lightboxes Shown <%# @today.top_light_snown %>
<br>
Top Global Injections Shown <%= @today.top_glob_shown %> 
```

请注意，只有 .top_light_shown 和 .top_agents_shown 会导致错误。所有其他方法都可以正常工作。还要注意两个注释掉的调试命令。调试@today 的结果表明它确实有一个属性“top_light_shown”，它也出现在@today.methods 的方法列表中，以及所有其他使用的方法。

这是控制器的内容 - 如您所见，我正在设置新的 @today Day 对象并用垃圾数据预先填充它，以查看是否可以从视图中访问它。在这种情况下，if 语句总是会失败（但即使没有，我也会遇到同样的未定义方法错误）

```
if Day.find_by_id(Time.now.day)
      stats_today = Day.find_by_id(Time.now.day)
      @ads_today = stats_today.top_inj_shown.size + stats_today.top_pop_shown.size + stats_today.top_cust_shown.size + stats_today.top_light_shown.size + stats_today.top_glob_shown.size
      @total_pageviews = Day.find_by_id(Time.now.day).pageviews
      @today = Day.find_by_id(Time.now.day)
    else
      @today = Day.new(:top_agents_shown => ['Firefox', 'Chrome'], :top_light_shown => ['l-TEST', 'l-TEST2'])
      puts @today.top_light_shown
      puts @today.top_agents_shown
      @ads_today = 'ERROR'
      @total_pageviews = 'ERROR'
    end 
```

这是请求页面后的服务器日志，其中 puts 在控制器中运行良好：

> 在 2012-08-01 19:13:03 -0600 开始获取 127.0.0.1 的“/assets/favicons/favicon.ico” 服务资产 /favicons/favicon.ico - 304 未修改（1 毫秒）
> 
> l-TEST l-TEST2 火狐浏览器
> 
> 在 2012-08-01 19:16:38 -0600 开始 GET "/dashboard" for 127.0.0.1 由 DashboardController#index 作为 HTML 处理

最后，这是 Day.rb 的内容：

```
class Day
    include MongoMapper::Document
    key :number,            Integer

    key :pageviews,         Integer
    key :shown_injs,        Integer
    key :shown_pops,        Integer
    key :shown_custs,       Integer
    key :shown_lights,      Integer
    key :shown_globs,       Integer

    key :top_agents_shown,      Array
    key :top_keyword_triggers,  Array
    key :top_urls_visited,      Array
    key :top_inj_shown,     Array
    key :top_pop_shown,     Array
    key :top_cust_shown,        Array
    key :top_light_shown,       Array
    key :top_glob_shown,        Array

end 
```

世界上到底发生了什么？为什么具有不同名称的相同方法有效而其他方法无效？为什么是那两个？为什么它们在控制器中而不是在视图中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:57:09.877

您的视图调用@today.top_agents_snown，但您定义了top_agents_shown。只是拼写错误。有些日子就是这样！

# jquery - 开始 jQuery：JQuery ID Selector 用法

> ID：11769841
> 
> 赞同：1
> 
> 时间：2012-08-02T01:28:59.400
> 
> 标签：jquery

开始 jQuery 问题。这是代码...

```
 var control1= document.getElementById("Carbs_txtSubsContrRbtAmt");
        var control2 = $("#Carbs_txtSubsContrRbtAmt"); 
```

为什么第二个调试打印的评估与第一个不同？

```
? control1.id
"Carbs_txtSubsContrRbtAmt"
? control2.id
undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T01:39:18.443

```
var control1 = document.getElementById("..."); // returns HTML DOM Object
var control2 = $("..."); // returns JQuery Object 
```

要获得`id`你可以使用

```
var id = control1.id; // or
var id = control2.attr("id");  // or
var id = control2[0].id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T01:32:00.570

使用 jQuery，要访问 id 属性进行显示，语法是：

```
control2.attr("id"); 
```

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:33:06.650

它现在是一个 jQuery 元素，所以如果你想要它的 id，你会这样做：

control2.attr("id")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T01:50:40.233

返回的对象`$("#Carbs_txtSubsContrRbtAmt")`实际上是一个jQuery对象，它的功能有点像一个数组。如果您正在选择具有特定类名的元素，这尤其有用：`$(".className")`.

因此，要获取选择器找到的第一个 DOM 元素，请使用以下命令：

```
$("#Carbs_txtSubsContrRbtAmt")[0]; 
```

然后您将能够获得 id 属性：

```
$("#Carbs_txtSubsContrRbtAmt")[0].id; 
```

但是，仅使用该`.attr()`方法要简单得多：

```
$("#Carbs_txtSubsContrRbtAmt").attr("id"); 
```

如果选择器匹配多个元素，则上面的代码将返回第一个匹配的 id。

# mongodb - MongoDB冻结

> ID：11769842
> 
> 赞同：1
> 
> 时间：2012-08-02T01:29:13.147
> 
> 标签：mongodb, memory, cloud, freeze

我在具有 10GB 存储空间和 1GB RAM 的云服务器上使用 MongoDB。将大约 4.4 GB 的数据导入 MongoDB 数据库后，每当我在命令行上键入“mongo”以测试某些查询时，服务器都会冻结。我可以删除对 MongoDB 的内存资源分配的上限吗？还是仅仅是增加 RAM 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:44:03.607

MongoDB 使用由操作系统分配的内存映射文件。这意味着没有可以释放的特定资源来为 Mongo 控制台运行腾出更多空间。

关于您的环境，有几件事需要注意。首先，对于已加载的数据量，您拥有的 RAM 量偏小。MongoDB 将尝试将尽可能多的工作集保留在内存中，以避免页面错误，因为磁盘查找是性能的真正杀手。其次，加载数据时会进行一些初始工作，这可能会影响性能。

您可以查看 Wiki 页面[Checking Server Memory Usage](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage)以获取有关 Mongo 正在使用多少内存的信息，以及有关 Mongo 内存使用情况的一般信息。

能否尝试从另一台机器连接到 MongoD，从而减轻 DB Server 的负担？

# c - 正确的#if 功能

> ID：11769844
> 
> 赞同：1
> 
> 时间：2012-08-02T01:29:35.687
> 
> 标签：c

如果我定义

```
#if SOMETHING

#endif 
```

而且我还没有在任何地方定义一些东西。#if 中的代码会编译吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:48:01.353

当参数表达式中使用的名称`#if`未定义为宏时（在所有其他宏替换完成后），将其替换为`0`。这意味着您`#if SOMETHING`将被解释为`#if 0`. 下面的代码`#if`将被预处理器删除。

该规则也适用于更复杂的表达式。你可以做

```
#define A 42
#if A + B 
```

这将评估为`#if 42`，因为未知名称`B`被解释为`0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:35:01.503

不，只要 SOMETHING 也不是预定义的宏之一或在命令行上传递给编译器的宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T04:36:00.293

我认为在 C99 中它默认为 0 而在 C89 中它不像这里它给我一个错误

```
Source code:

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define A 42
#define B 

int main(int argc, char *argv[]){

int c;

#if A
c = A + B;
#endif

printf("%d\n",c);

return 0;
}

Error : 

error: expected expression before ‘;’ token 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T02:07:58.457

不，因为作为一个未定义的宏，它不一定会被任何东西替换......但这可能是编译器特定的，并且不被信任。

您可能想使用：

```
 #ifdef DEFINED_WORD
 #ifndef DEFINED_WORD 
```

其中 DEFINED_WORD 由#define 声明，例如： `#define DEFINED_WORD`。该`ifdef`构造仅编译该代码和`#endif`如果定义了 DEFINED_WORD 之间的代码。反之亦然`#ifndef`。你可以像这样嵌套它们：

```
 #ifdef DEFINED_WORD
 printf ( "DEFINED_WORD is defined\n" );
 #ifndef DEFINED_WORD
 printf ( "This line will NEVER print\n" );
 #endif
 printf ( "This line will print if DEFINED_WORD is defined\n" );
 #endif
 printf ( "This line will ALWAYS print.\n" ); 
```

在我的代码中，我有如下结构：

```
 #ifdef DEBUG
 printf ( "array[%d] = %d\n", i, array[i] );
 #endif 
```

要停用所有 DEBUG 代码，只需在调用之前注释掉您必须拥有的行`#ifdef`（源文件顶部，或在源文件顶部包含的包含标题中，格式良好）。`#define DEBUG`

希望有帮助。

# php - 是否可以将 mysql_insert_id() 与 while 循环一起使用？

> ID：11769847
> 
> 赞同：0
> 
> 时间：2012-08-02T01:29:50.803
> 
> 标签：php, mysql, mysql-insert-id

```
 while ($row = mysql_fetch_array($eventchoices)) {

 echo $row['res_name']. " and " .$row['event_name']; 
 echo "<br>";

} 
```

想要显示最后插入的行，这当前获取数组中的所有内容，我尝试使用`mysql_insert_id()` 这样`mysql_insert_id($row);`的方法和其他方法，例如在 while 循环中使用它，所有尝试都返回错误。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:31:25.590

[`mysql_insert_id()`](http://us3.php.net/manual/en/function.mysql-insert-id.php)仅在*将*记录插入表（具有 AUTO INCREMENT 列）时才有效。它不会使用 SELECT 语句获取行的 ID。您必须在查询中执行此操作。

仅供参考，mysql_* 函数不应用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[红框](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://us2.php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)将有助于选择。如果你想学习，这里有[很好的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# r - 在 R 下，关于获取先前键入的命令列表

> ID：11769848
> 
> 赞同：2
> 
> 时间：2012-08-02T01:30:03.750
> 
> 标签：r

在 R 下，有没有办法列出以前输入的所有命令？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T01:33:23.457

就在这里。

```
history(max.show=Inf) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T03:03:12.517

[R 的IDE](https://stackoverflow.com/questions/1439059/best-ide-texteditor-for-r)通常在面板中支持此功能。例如，RStudio 有一个历史选项卡，您可以通过该选项卡将先前的命令发送到控制台或单击源文件。我相信其他人也有类似的功能。

# php - 根据来自 php/mysql 变量的文本行调整 textarea 的大小

> ID：11769850
> 
> 赞同：1
> 
> 时间：2012-08-02T01:30:11.003
> 
> 标签：php, javascript, jquery, mysql, html

我不需要它在您键入时自动调整大小，我只需要在页面加载变量时它是正确的大小`$row['text'];`

```
<textarea style="width:630px;"><? echo $row['text'];  ?></textarea> 
```

因此，当页面加载时，textarea 将显示该文本的值。我试图让它计算行数并根据它设置文本区域的高度

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:33:20.413

您可以使用 jquery 插件：

[http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

或者您可以使用 CSS 将宽度和高度设置为自动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:36:15.080

```
function set_height($str) {
  $ary = explode("\n", $str);
  $style = '';
  if(is_array($ary) && count($ary)>1) {
    $height = 18 * count($ary);
    $style=' style="height:'.$height.'px; width:630px;" ';
  }
  return $style;
} 
```

文本区域

```
<textarea <?=set_height($row['text']);?> ><? echo $row['text'];?></textarea> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T02:07:21.940

Jquery autoresize 是最好的选择。我认为可行的唯一其他选项是使用文本“rows”和“cols”属性。测量将等于大约 630 像素、大约 32 的列数（基于 630/20 20 是平均字符宽度）。然后，您只需要知道需要多少行，这是一个更简单的方程式。

```
//Divide the width by the height to get the number of rows required, then round up with
//math.ceil to get a rounded number. (1.01 rows would still need to be 2 rows)

$num_rows = math.ceil(32 / strlen($rows['text']));
<textarea rows="<? echo $num_rows ?>" cols="32"><? echo $row['text'];  ?></textarea> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-04T19:33:19.140

只需将高度设置为等于字符数，就像这样......我还添加了 respensive 选项

```
<?php 
function set_px_height($var) {
  $px = strlen($var);
  $style = '';
    $height = $px;
    if (!ismovil()){
        $height = $height / 4;
    }else{
        $height = $height * 0.80;
    }
    if ($height < 40){
        $height = 50;
    }
    $style=' style="height:'.$height.'px;"';
  return $style;
}

function ismovil(){
$useragent=$_SERVER['HTTP_USER_AGENT'];
    if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i',substr($useragent,0,4))){
     return true ;
    }
}?> 
```

像这样在 textarea

```
<textarea <?=set_px_height($row['text']);?> ><? echo $row['text'];?></textarea> 
```

# android - 将数据从 Android 设备流式传输到开发 PC

> ID：11769853
> 
> 赞同：0
> 
> 时间：2012-08-02T01:30:23.363
> 
> 标签：android, debugging, streaming, gnuplot, real-time-data

我想知道如何将数据从 android 设备流式传输到我的开发 PC。我实际上想要实现的是将一些数值数据流式传输到我的 PC 并在 gnuplot 中实时绘制它们。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:33:40.713

在开发环境中，我假设您的手机和 PC 在同一个网络上（wifi，甚至通过可用于中继网络数据包的 USB/ADB）。如果是这种情况，只需编写一个在您的 PC 上运行的 TCP/IP 服务器（或 Web 应用程序），然后让您的 Android 应用程序连接到它并提供数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:27:29.020

免责声明：我为 Realtime.co 工作。不，我不是想卖给你任何东西。只是想帮忙。

您可以尝试的另一件事是使用跨平台通信层，例如[Realtime.co](http://www.realtime.co)。它具有 Android API 以及其他 API，例如 Java、PHP、.Net、iOS、JavaScript 等。因此，您实际上可以将其用作手机与您需要在计算机上使用的任何平台之间的通信层（浏览器、Windows 应用程序、Java、应用程序等）。

我希望这会有所帮助！

# php - 为什么我无法在 CodeIgniter 中获取下一个服务器请求的 Flashdata？

> ID：11769857
> 
> 赞同：0
> 
> 时间：2012-08-02T01:31:17.777
> 
> 标签：php, codeigniter, session

我一直在试图弄清楚如何使用这些闪存数据。记得上次有困难，这次又好像忘记了什么。

所以基本上，我试图在某个地方设置一个 flasherror：

```
if(!$this->paypal_pro->APICallSuccessful($PayPalResult['ACK']))
  {
       $this->session->set_flashdata('flashError',  
           array('Errors'=>$PayPalResult['ERRORS']));
       redirect('main/form');
  } 
```

在我的主要/形式中，我得到了：

```
function Form()
 {
// Process validation form
 if ($this->form_validation->run() == FALSE)
 {
      //IF the validation process hasn't been run or there are validation errors
       $this->parser->parse('template/template', $data);
 } 
```

在那个观点中，我试图得到那个 flashError ：

```
<?php if($this->session->flashdata('flashError')):?>
  <div class='flashError'>
 <?php  
  $flashError=$this->session->flashdata('flashError');
  foreach( $flashError['Errors'] as $Error) {
     echo $Error['L_SHORTMESSAGE'].' ('.$Error['L_ERRORCODE'].'):';
     echo '<br/>';
     echo $Error['L_LONGMESSAGE'];
  }
 ?>
  </div>
 <?php endif?> 
```

我在该变量中没有任何内容，当我尝试对其进行 var_dump 时，它返回错误。

尽管官方文档说“仅可用于下一个服务器请求，然后自动清除”，但有人可以解释我如何使用它</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:55:39.883

来自 Codeigniters 文档：

> 如果您发现需要通过附加请求保留 flashdata 变量，则可以使用 keep_flashdata() 函数执行此操作。

```
$this->session->keep_flashdata('item'); 
```

**更新：**

问题似乎在这里：

```
$this->session->set_flashdata('flashError',  
           array('Errors'=>$PayPalResult['ERRORS'])); 
```

Try this one:

```
$this->session->set_flashdata(array('Errors'=>$PayPalResult['ERRORS'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:05:43.053

As you are doing

```
if($this->session->flashdata('flashError')) 
```

You are actually removing the `flashError` item, as it has been read.

What you need to do, is as you have a little further down, assign it to a variable and then do your checks.

# database - 使用 pgadmin 连接到 heroku 数据库

> ID：11769860
> 
> 赞同：206
> 
> 时间：2012-08-02T01:31:29.353
> 
> 标签：database, postgresql, heroku, pgadmin

我想用`pgadmin`客户端管理我的 Heroku 数据库。到目前为止，我一直在使用`psql`. 当我使用 data from`heroku pg:credentials`连接 de DB`pgadmin`时，我获得：

> 发生了错误：
> 
> 连接到服务器时出错：致命：数据库“postgres”的权限被拒绝详细信息：用户没有 CONNECT 权限。

如何实现连接？

* * *

## 回答 #1

> 赞同：351
> 
> 时间：2012-08-02T09:56:11.083

在 pgAdminIII 中打开 Heroku 服务器的“属性”，并将“维护数据库”值更改为您要连接的数据库的名称。

![pgAdmin III - 新服务器注册](../Images/e2ac16378eeaa9a17569c33baf2d7f61.png)

默认设置适用于可以连接到服务器上任何数据库的 DBA 等人，但显然您的情况并非如此。

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2013-03-10T14:24:48.023

[按照上面 araqnid 的回答的](https://stackoverflow.com/a/11775090/238722)建议更改维护数据库名称后，您还应该将数据库添加到数据库限制字段，因为没有这个，您将看到数千个数据库，如果列表是，您可能无法在列表中找到您的数据库太长。

更多详细信息 -[如何隐藏我不允许访问的数据库](https://stackoverflow.com/questions/12663639/how-to-hide-databases-that-i-am-not-allowed-to-access/13298802#13298802)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2020-07-23T03:48:02.167

## 这是 pgAdmin 4

为了将 pgAdmin 连接到您的数据库（Heroku 中的 postgres 实例），请执行以下操作：

1.  登录 Heroku，然后选择您拥有数据库的应用程序 [![在此处输入图像描述](../Images/5f1cd1446452aa17bc7cb952634416fc.png)](https://i.stack.imgur.com/ln9aG.png)

2.  选择**Resources**选项卡，然后单击“Heroku Postgres Ad-on”（见下文）。这将打开一个新选项卡。 [![在此处输入图像描述](../Images/e4429a39a759d9badd6161ca37c91015.png)](https://i.stack.imgur.com/Cfs4E.png)

3.  选择“**设置”**选项卡，然后单击“查看凭据...”（见下文） [![在此处输入图像描述](../Images/6947642059a22981e3ef72178960563b.png)](https://i.stack.imgur.com/Oi1CE.png)

    您将获得将在 pgAdmin 中使用的以下信息：

    [![在此处输入图像描述](../Images/97e0f292a1043bfe4c1f0a8392163876.png)](https://i.stack.imgur.com/ngP0a.png)

4.  转到 pgAdmin，并创建一个新服务器 [![在此处输入图像描述](../Images/83cae1d34208845868b791ed0fe5692e.png)](https://i.stack.imgur.com/qsvL1.png)

5.  在“**常规**”选项卡中，提供有用的名称 [![在此处输入图像描述](../Images/8efd3e4046aee91b762c4fe0eb6368dd.png)](https://i.stack.imgur.com/6QbFL.png)

6.  在**Connection**选项卡中，填写您在 Heroku 获得的信息 [![在此处输入图像描述](../Images/a3171020c56c7a949a1143b7cb5f8b43.png)](https://i.stack.imgur.com/4dpPY.png)

7.  为了避免看到数千个数据库，您需要在**高级**选项卡中将数据库名称添加到数据库限制（见下文） [![在此处输入图像描述](../Images/afc2a149b83c71d537eec52f4468b69b.png)](https://i.stack.imgur.com/1iXqm.png)

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-08-02T01:35:38.163

我们需要 SSL 用于 Heroku 外部的连接。请验证您是否在客户端中强制使用 SSL。

在这里得到更彻底的回答：[在 Heroku 上将 pgAdmin3 连接到 Postgres](https://dba.stackexchange.com/questions/21869/connecting-pgadmin3-to-postgres-on-heroku)

我们不允许连接到`postgres`数据库，因此请务必将 Maintenance DB 设置为您的数据库名称，并确保使用 SSL。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-08-29T18:51:42.410

将维护数据库更改为您的数据库的名称，例如 dva70000p0090。这应该有效。

# ef-code-first - EF5 Code First中的多对多关系，如何指定表名？

> ID：11769864
> 
> 赞同：19
> 
> 时间：2012-08-02T01:31:55.127
> 
> 标签：ef-code-first, many-to-many, entity-framework-5

我对 EF 很陌生，我不确定该怎么做。

我有一个多对多的关系，就像这样：

![在此处输入图像描述](../Images/dcda2ed3ece391483dc9c5c41b031888.png)

当我尝试将资源 (Recurso) 添加到配置文件 (Perfil) 时，我收到以下错误：

`Invalid object name 'dbo.RecursoPerfils`

到底是`RecursoPerfils`从哪里来的？

如何指定（最好通过属性注释）此关系的表名？

请参阅以下型号：

```
[Table("Perfil")]
public class Perfil
{
    public Perfil()
    {
        this.Usuarios = new List<Usuario>();
        this.Recursos = new List<Recurso>();
    }

    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [Key]
    public int IdPerfil { get; set; }
    [Required]
    public string Descricao { get; set; }

    public virtual ICollection<Usuario> Usuarios { get; set; }
    public virtual ICollection<Recurso> Recursos { get; set; }
}

[Table("Recurso")]
public class Recurso
{
    public Recurso()
    {
        this.Perfis = new List<Perfil>();
    }

    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [Key]
    public int IdRecurso { get; set; }
    [Required]       
    public string NomeRecurso { get; set; }
    [Required]
    public string Descricao { get; set; }
    public virtual ICollection<Perfil> Perfis { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-02T02:04:24.017

您需要使用 Fluent API 来配置连接表的表名。

```
public class MyContext : DbContext
{
     protected override void OnModelCreating(DbModelBuilder modelBuilder)
     {
         modelBuilder.Entity<Perfil>()
            .HasMany(p => p.Recursos)
            .WithMany(r => r.Perfis)
            .Map(mc =>
            {
                mc.MapLeftKey("IdPerfil");
                mc.MapRightKey("IdRecurso");
                mc.ToTable("PerfilRecurso");
            });
     }
} 
```

您可以通过这个[Fluent API 关系映射教程](http://msdn.microsoft.com/en-us/data/hh134698.aspx)了解更多信息

# c# - 错误：预期的类、委托、枚举、接口或结构

> ID：11769866
> 
> 赞同：0
> 
> 时间：2012-08-02T01:32:01.507
> 
> 标签：c#, visual-studio-2010, syntax-error

我在下面的代码中收到以下错误：

> 预期的类、委托、枚举、接口或结构。

当悬停在**GH_ObjectResponse**上时会发生这种情况，我做错了什么？

```
public class SettingsComponentAttributes : GH_ComponentAttributes
{
    public SettingsComponentAttributes(IGH_Component SettingsComponent) :  
        base(SettingsComponent) {}
}

public override GH_ObjectResponse RespondToMouseDoubleClick(
    GH_Canvas sender, GH_CanvasMouseEvent e)
{
    ((SettingsComponent)Owner).ShowSettingsGui();
    return GH_ObjectResponse.Handled;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T01:34:33.970

你的方法没有在类中声明......试试这个：

```
public class SettingsComponentAttributes : GH_ComponentAttributes
{
    public SettingsComponentAttributes(IGH_Component SettingsComponent) : base(SettingsComponent) { }

    public override GH_ObjectResponse RespondToMouseDoubleClick(GH_Canvas sender, GH_CanvasMouseEvent e)
    {
        ((SettingsComponent)Owner).ShowSettingsGui();
        return GH_ObjectResponse.Handled;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:35:20.647

注意你的括号。它应该是：

```
public class SettingsComponentAttributes : GH_ComponentAttributes
{
    public SettingsComponentAttributes(IGH_Component SettingsComponent) : base(SettingsComponent) {}

    public override GH_ObjectResponse RespondToMouseDoubleClick(GH_Canvas sender, GH_CanvasMouseEvent e)
    {
        ((SettingsComponent)Owner).ShowSettingsGui();
        return GH_ObjectResponse.Handled;
    }
} 
```

# ios - MonoTouch - 刷新 TableView

> ID：11769869
> 
> 赞同：0
> 
> 时间：2012-08-02T01:32:16.747
> 
> 标签：ios, xamarin.ios, tableview

我正在使用 MonoTouch 为 iOS 编写一个新闻应用程序。数据来自 OData 网络服务。

我有一个名为 NewsFactory 的单例类，它负责查询 OData 提要。现在在 ViewDidLoad 方法中，我正在检索新闻文章列表并将其绑定到表视图。

但是 - 我不确定每次启动应用程序时如何刷新它。我不太关心“拉动刷新”。我要确保的是，每次启动应用程序（从头开始或再次激活）时，都会调用 Web 服务以确保我显示最新信息。

另外，我想介绍一下应用程序启动时网络连接丢失并通知用户的情况。用户关闭应用程序（暂停），假设网络连接恢复 - 如果用户再次打开应用程序，我想确保显示最新的新闻文章。

我正在以编程方式构建视图层次结构。我有导航控制器和一个带有 5 个标签的标签栏控制器。我的目标是 iOS 5。

我尝试使用 OnActivated 和 ViewWillAppear，但它们并没有完全满足我的需要。这是任何 iOS 应用程序的一个非常普遍的需求，因此必须有一个解决方案 - 我是新手，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:11:40.867

好吧，您必须考虑，一般来说，如果您调用从一个源加载的方法（假设是一个包含数据的文本文件），那么您更改源（更改文本数据），但调用相同的方法时类被加载，那么新的数据会在新类被加载的时候出现。

例如：

```
- (void) loadView {
    NSString *testString = [NSString stringWithContentsOfFile:filePath];
    textView.text = testString;
} 
```

此示例显示了将文件中的文本设置为 UITextView 实例。如果你第一次加载它并且文件包含“Hi”的内容，那么 textView 会说你好。如果您更改它，然后调用相同的方法，那么它将在您第二次加载应用程序时显示您更改的文本。

关键是，如果您更改数据，然后调用相同的方法，那么您会看到不同。除非您正在使用数据库。

如果您提供示例代码，我会给您一个更好的示例。

编辑：不确定您的自定义类是否带有此功能，但它包含在常规 UITableView 类中：

```
[tableView reloadData]; 
```

您可以在数组内部更改后调用它。

# javascript - Telerik MVC Grid - 将值传递给新的控制器动作

> ID：11769872
> 
> 赞同：0
> 
> 时间：2012-08-02T01:33:00.660
> 
> 标签：javascript, asp.net-mvc-3, controller, return-value, telerik-grid

使用 Telerik Extensions for ASP.NET MVC，我创建了以下网格：

![Telerik MVC 网格](../Images/7d2affcb96e66cc6965b24e5339720c0.png)

..当用户选择分组订单中的任何项目时，我可以使用客户端事件“OnRowSelect”提取我的订单号的值。然后，我可以在警报中显示所选值，但我真正想做的是将该值传递回不同的控制器操作。这可能使用javascript吗？

当我尝试服务器端控件时，我最终在每个详细信息行旁边都有按钮，这不是所需的效果/外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:57:07.533

您可以轻松地在该事件中进行 ajax 调用。一种两部分过程（假设您的事件处理程序驻留在单独的 .js 文件中 - 否则您可以直接在 .ajax 调用中定义一个 url）。在 $(document).ready(...) 中定义您需要发布的网址，例如：

```
<script type="text/javascript">           
$(document).ready(function() {      
   var yourUrl = '@Url.Action("Action", "Controller")';           
}); 
```

然后在您的 OnRowSelect 事件处理程序中放置如下内容：

```
function onRowSelect(e) {
    var row = e.row;        
    var orderId = e.row.cells[0].innerHTML;
    $.ajax(
    {
        type: "POST",
        url:  yourUrl,
        data: {id: orderId},
        success: function (result) {
            //do something
        },
        error: function (req, status, error) {
           //dosomething
        }
    });        
} 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T18:53:46.677

事实证明，通过简单地更改 Window.location 来访问新页面是一种更简单的方法，如下所示：

```
var yourUrl = '@Url.Action("Action", "Controller")'; 
var orderID;
function onRowSelected(e) {    
    var ordersrid = $('#IncompleteOrders').data('tGrid');        
    orderID = e.row.cells[1].innerHTML;        
    window.location = yourUrl + "?orderId=" + orderID;
} 
```

感谢那些回复的人；但是，Telerik 的 Daniel 提供的上述答案更多的是我想要的。

# iphone - 从电子邮件链接打开 iPhone 应用程序

> ID：11769874
> 
> 赞同：8
> 
> 时间：2012-08-02T01:33:13.877
> 
> 标签：iphone, email, hyperlink, launch

我正在开发一个向用户发送电子邮件的程序，并且电子邮件中嵌入了打开 iPhone 应用程序的链接。问题是当用户点击链接打开应用程序时，邮件已经去掉了冒号，所以链接不再有效！

正在创建的链接基本上如下所示：

```
@"<BR><BR><BR><A HREF=\"http://myApp://\">Open App</A>" 
```

但是，当在电子邮件中单击该链接时，它会在浏览器中打开它：

我的应用程序//

没有冒号，所以应用程序不会启动并且浏览器说它找不到页面。

任何想法如何解决这一问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:18:31.630

它应该是：

```
@"<BR><BR><BR><A HREF=\"myApp://\">Open App</A>" 
```

作为 gmail 阻止自定义 url 的一种解决方法，您可以做的是设置类似`http://myapp.mydomain.com/`up do redirect to`myapp://...`这样它看起来像一个普通域但打开您的应用程序。有利的是，您将能够看到有多少人点击了您的链接，但不利的是，它将首先通过 Safari 弹出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:29:52.493

将“http：”添加到您的所有图像和网址，iphone 无法识别没有链接的链接。也为它们使用单​​引号（'）。例如。 `<a href='http://xyz.com'></a><img src='http://xyz.com/pqr/abc.jpg'></img>`

# mysql - mysql中的子字符串。选择一些数据

> ID：11769877
> 
> 赞同：0
> 
> 时间：2012-08-02T01:33:33.937
> 
> 标签：mysql, sql

我有一张像

```
ID         Value

A2424        1
A5355        2
A6363        3
A4634        4
AA_A2424     5
AA_A6363     6 
```

我只想选择那些出现在 AA_ 之后的 ID，所以我的输出应该是

```
ID     Value

AA2424    1
AA5355    2 
```

我试过了，但它没有给我正确的输出

```
SELECT * 
FROM table
WHERE ID LIKE  SUBSTRING( 'AA_', 4, 8 ) 
```

任何人都可以建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:36:38.507

尝试：

```
SELECT ID
     , Value
FROM table
WHERE SUBSTRING(ID, 1, 3) LIKE 'AA_%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:30:18.017

我猜您的输出对于此示例表不正确。它应该是：

```
ID     Value

A2424     1
A6363     3 
```

这是一个查询，以获得您需要的内容：

```
select * from AATable where id in
(select substring(id,4,100) from AATable where id like 'AA_%') 
```

# r - 部分斜体，axis.text.x

> ID：11769880
> 
> 赞同：14
> 
> 时间：2012-08-02T01:33:43.067
> 
> 标签：r, ggplot2

阿罗哈，

对于以下条形图：

```
x <- ggplot(foo, aes(x=variety, y=percent)) + geom_bar() 
```

以下斜体我所有的 x 轴文本：

```
x + opts(axis.text.x=theme_text(face='italic')) 
```

但是，我只想将物种名称斜体，而不是对照。

```
levels(foo$variety)
"control"    "species1" "species2"     "species3" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-02T01:53:53.843

试试这个例子：

```
library(ggplot2)

ggplot(CO2, aes(y=uptake,x=Type, group=Type))+
  geom_point()+
  scale_x_discrete("Location", labels=expression(Quebec, italic(Mississippi))) 
```

![在此处输入图像描述](../Images/c8be3631553a4e24362a3226f1818b06.png)

# android - inputType="textMultiLine" 不能与 imeOptions="actionSend" 一起使用？

> ID：11769881
> 
> 赞同：0
> 
> 时间：2012-08-02T01:34:05.013
> 
> 标签：android, xml, keyboard, keyboard-shortcuts

正如主题所说，是否不能将 inputType="textMultiLine" 与使用 imeOptions="actionSend" 的 EditText 一起使用？为什么必须将其设置为仅 inputType="text" ？有什么解决方法可以解决这个问题吗？以前从未使用过它，所以我对它有点陌生。/谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:44:08.663

当您使用 imeOptions="actionsSend" 时，它会将输入键转换为发送键，因此键盘中没有输入键。所以不可能使用多行文本。

# jquery - 如何 jQuery 根据 asp.net 网格中另一个文本框的值验证文本框条目

> ID：11769882
> 
> 赞同：0
> 
> 时间：2012-08-02T01:34:19.613
> 
> 标签：jquery, asp.net, gridview

我有一个`asp.net`用于编辑仪表读数的批量编辑网格。当前仪表读数显示在标签中，用户将在同一行的文本框中输入新的仪表读数。我需要能够确保输入的读数不低于标签中的当前仪表读数。我已将`CssClass`名称添加到标签和文本框，并且能够通过将函数附加到文本框的模糊事件来获取文本框的输入值，但我无法获取标签的值。这是网格的代码

```
 <asp:GridView ID="gvSiteGeneratorReading" runat="server" DataSourceID="sdsEquipmentMeterReadings"
    DataKeyNames="EquipmentMeterID" AutoGenerateColumns="False">
    <Columns>

       <asp:TemplateField HeaderText="Equipment Description">
            <ItemTemplate >
                <asp:Label ID="lblMeterDescription" runat="server" Text='<%# Eval("MeterDescription") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

       <asp:TemplateField HeaderText="Last Reading" SortExpression="MeterReading">
            <ItemTemplate>
                <asp:Label ID="lblLastMeterReading"  CssClass="LastReading" runat="server" Text='<%# Eval("LastMeterReading") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField  HeaderText="New Reading">
           <ItemTemplate>
                <asp:TextBox ID="txtNewReadingValue"  CssClass="NewReading" runat="server"></asp:TextBox>
           </ItemTemplate>
        </asp:TemplateField>

    </Columns>
</asp:GridView> 
```

到目前为止，我提醒新阅读的价值的 jQuery 是：

```
<script>

$(document).ready(function () {

    $(".NewReading").blur(function () {

        var enteredVal = $(this).val();
        alert(enteredVal);
    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:00:27.817

您可以像这样检索 LastMeterReading 列值

```
$(".NewReading").blur(function () {
  var LastMeterReading = $(this).closest('tr').find("td:eq(1)").text();                
  alert(LastMeterReading);
}); 
```

# javascript - 如何在 CSS 中为 Dropkick 插件单独定位多个下拉列表

> ID：11769888
> 
> 赞同：4
> 
> 时间：2012-08-02T01:34:53.643
> 
> 标签：javascript, jquery, jquery-plugins

跟进： [如何通过修改这个制作自定义样式下拉的jQuery插件来获取相对单位的输出而不是px？](https://stackoverflow.com/questions/8416898/how-to-get-the-output-in-relative-units-instead-px-by-modifying-this-jquery-plug)

参考：http: [//jamielottering.github.com/DropKick/](http://jamielottering.github.com/DropKick/)

给定以下JS：

```
 dropdownTemplate = [
  '<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}">',
    '<a class="dk_toggle">',
      '<span class="dk_label">{{ label }}</span>',
    '</a>',
    '<div class="dk_options">',
      '<ul class="dk_options_inner">',
      '</ul>',
    '</div>',
  '</div>'
].join(''), 
```

如何分配自定义 ID 或以其他方式单独定位每个 dk_toggle 实例？我正在创建多个下拉列表，但修改宽度（每个链接问题）的唯一方法是定位 dk_toggle 类，该类没有为每个实例分配 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:34:43.040

DropKick 有主题，所以你会做这样的事情：

```
$('select.a').dropkick({ theme: 'black' });
$('select.b').dropkick({ theme: 'white' }); 
```

然后在你的风格：

```
.dk_theme_black { background:black; color:white;}
.dk_theme_white { background:white; color:black;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:40:56.603

分配一个唯一的 ID 将是模板解析器的工作。您没有提及您正在使用哪个模板引擎。一般的想法是您将下拉数据以及对您上面定义的模板的引用传递给模板解析器。解析器会将 id 值注入到正确的模板元素中，然后您就可以参加比赛了。

# c# - 单击按钮时显示新表单

> ID：11769890
> 
> 赞同：8
> 
> 时间：2012-08-02T01:35:07.290
> 
> 标签：c#, winforms

我是 C# 的新手。单击form1中的按钮时，我试图显示一个新表单（form2）。

这是我的代码。

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SliceEngine
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
        private void button5_Click(object sender, EventArgs e)
        {   
            Form2 form2 = new Form2();
            form2.ShowDialog();            
         }
    }
} 
```

错误显示

> 找不到类型或命名空间名称“Form2”（您是否缺少 using 指令或程序集引用？）

这是我的form2代码。

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SliceEngine
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }

        private void Form2_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

对于form2，我只是制作设计界面。

我所知道的使用 java 时，我只需要先声明对象。我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T03:00:17.827

除非您有任何拼写错误，否则我看不出有任何理由使您的代码失败。我尝试了与您相同的代码，并且在我的机器上运行良好。

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace winapp
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }
            private void button1_Click(object sender, EventArgs e)
            {
                Form2 frm2 = new Form2();
                frm2.ShowDialog();
            }
        }

    using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace winapp
    {
        public partial class Form2 : Form
        {
            public Form2()
            {
                InitializeComponent();
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-24T17:32:16.980

> 找不到类型或命名空间名称“Form2”（您是否缺少 using 指令或程序集引用？）

这意味着您忘记将指向`Form2`目录的名称空间添加到您的代码中

如果您有一个`Form2.cs`名为 inside 的目录`UI`并且该目录在`MyForms`目录内部，那么整个树将是**`ProjectName`**>> **`MyForms`**>> **`UI`**>>**`Form2.cs`**

所以你应该在你的代码中使用这个命名空间

```
using ProjectName.MyForms.UI; 
```

现在我应该可以轻松地开始显示它了，因为我已经添加了它的位置。

```
new Form2().Show(); 
```

**或者**，您可以使用：

```
new ProjectName.MyForms.UI.Form2().Show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T02:07:28.107

在 form1 中，您正在使用 Form2 的构造函数：

```
public partial class Form1 : Form
{
    public Form2()
    {
        InitializeComponent();
    } 
```

如果你把它改成

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    } 
```

你应该没事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T02:08:09.300

您的代码*声称*您没有`Form1`.

```
 public partial class Form1 : Form
    {
        public Form2()
        {
            InitializeComponent();
        } 
```

**应该：**

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-07T05:49:29.483

我认为下面一定是您的代码失败的原因。您在 Form1 和 Form2 中都有您的表单，其中 Form2 定义是在另一个命名空间指令中完成的，该指令未集成在 Form1 的命名空间中，除非您覆盖它们，否则您不能为两个命名空间使用相同的命名空间指令名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-28T06:02:05.487

试试这个代码......

```
private void button1_Click(object sender, EventArgs e)
{
       Form2 frm2 = new Form2();
       {
          frm2.ShowDialog();
       }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-29T05:49:20.713

```
private void button5_Click(object sender, EventArgs e)
{   
  Form2.show()
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-14T21:09:42.237

我的解决方案：

在 Form1 的点击事件中包含您的按钮：

```
string foobar = "Hello world";
Form2 frm2 = new Form2(foobar);
frm2.ShowDialog(); 
```

在表格 2 中：

```
public Form2(string foobar)
{
    InitializeComponent();
    textbox1.Text = foobar;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-09T11:46:30.943

对于仍在寻找答案的任何人：

在代码的顶部，添加这个命名空间：

```
using YourProjectName; 
```

然后，当您希望显示您的表单时，请输入以下内容：

```
var form = YourProjectName.YourFormName();
form.Show(); // Show form using new variable 
```

# windows-phone-7 - 在 Windows Phone7 中切换相机类型

> ID：11769891
> 
> 赞同：0
> 
> 时间：2012-08-02T01:35:14.700
> 
> 标签：windows-phone-7, camera, windows-phone-7.1

众所周知，CameraType 属性表示相机在设备上的位置。但是，当我尝试使用以下代码将相机类型从 Primary 切换到 FrontFacing 时，它不起作用。在查看了[MSDN 文档](http://msdn.microsoft.com/en-us/library/microsoft.devices.camera.cameratype%28v=vs.92%29)后，我发现它是一个受保护的集合方法。显然我没有访问许可。有没有办法做到这一点？任何人都可以帮助我吗？提前致谢！

```
camera.CameraType = CameraType.FrontFacing; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:49:07.717

初始化后，您似乎无法强制相机进入其他模式。

使用实现的构造函数。

例如：[PhotoCamera 类的构造函数](http://msdn.microsoft.com/en-us/library/hh286474%28v=vs.92%29)

我假设您正在尝试创建自定义相机应用程序？或类似的东西？如果您只想捕捉图片，请使用[相机捕捉任务](http://msdn.microsoft.com/en-us/library/hh394006%28v=vs.92%29.aspx)而不是这个。否则您的应用将无法通过认证。

> 如果照片捕获不是应用程序的核心功能，请考虑使用相机捕获任务来捕获照片，而不是直接使用相机 API。为相机捕获任务分配的内存不计入应用程序内存使用总量。这有助于最大限度地减少应用程序的内存使用，当您的应用程序在 256 MB 设备上运行时，这一点尤其重要。有关详细信息，请参阅为 256 MB 设备开发和如何：使用 Windows Phone 的相机捕获任务。

# date - Drupal 7：对视图中的多种内容类型进行排序，具有不同的日期字段

> ID：11769902
> 
> 赞同：0
> 
> 时间：2012-08-02T01:37:31.080
> 
> 标签：date, sorting, drupal-7, views

我正在使用 Drupal 7，带有 Views、Feeds 和 Views PHP 模块（以及其他模块，但我认为这些是唯一相关的模块）。

我的目标是一个单一的视图，它结合了（a）通过 Feeds 模块引入的多个 RSS 提要，（b）我自己的两个或三个内容类型，用于在我的站点上手动创建的内容。结果将是一个块和一个页面，其中包含我所有最新作品的流，无论它在哪里——我自己的站点或另一个站点（当然，只要那个站点有 RSS 提要）。

理想的结果将显示一个列表，按日期排序，混合项目而不考虑内容类型。

我的问题：Feeds 模块和我的自定义内容类型有不同的日期字段。我的内容类型有一个名为 Original Date 的字段，这是我在创建内容时设置的（例如，添加我三年前写的一篇文章——我显然希望它按发布时间排序，而不是按我添加到地点）。但是，每个 feed_item 都有一个日期字段 Published Date，它对应于 RSS 提要中的日期，并由 RSS 与项目的其余部分一起接收。

我曾尝试以多种方式使用 Views PHP 功能来使用 if/then 语句。例如，我检查 content_type 是什么，然后根据内容类型将变量设置为原始日期或发布日期。或者，我测试了是否设置了原始日期字段；如果是这样，我返回该字段，否则我返回 Published Date 字段。他们都以各种方式失败。大多数抛出的 PHP 错误甚至对匿名用户都是可见的（显然是一个问题）。

我已经在视图的排序标准部分直接尝试了这些不同的方法；我还尝试在“字段”部分中提出日期，然后使用排序标准调用该结果。我已将所有内容都转换为 Unix 时间戳，以确保我有一些简单的排序依据；我试过把日期作为日期。无论哪种方式都没有运气。

这是*真正*奇怪的部分：我已成功使用这些方法来*显示*正确的日期，因此（例如）该块显示 • TITLE | 自定义内容类型的原始日期，以及 • TITLE | 提要项目的发布日期。但是，当我尝试使用相同的方法按日期排序时，它会失败。

我忽略了一些更简单的东西吗？我必须使用 PHP 视图吗？有没有其他方法可以通过两个不同（尽管相似）字段的组合对多个内容类型的视图进行排序？

谢谢！

tf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T14:41:59.513

您是否尝试过使用视图的关系功能？您可以使用它来访问所有内容类型的所有日期字段，然后将一些条件代码添加到字段项，您应该是黄金。（也就是说，如果我正确理解了这个问题......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T20:59:43.633

我找到了许多可能的解决方案并在此处进行了总结：[https ://drupal.org/node/2133879](https://drupal.org/node/2133879)

但是，这是一个我推荐的简单解决方案：

在自定义模块中，使用 hook_views_query_alter() 函数来更改排序条件以使用 CASE ... WHEN 在 orderby 条件中添加条件。一个很好的例子如下所示：

```
<?php
/**
 * Implements hook_views_query_alter
 * @param type $view
 * @param type $query
 */
function MODULE_views_query_alter(&$view, &$query) {
  if ($view->name == 'views_name' && $view->current_display == 'display_name') {
    $query->orderby = array(
      array(
        'field' => 'CASE WHEN field_data_field_date_publication.field_date_publication_value
THEN field_data_field_date_publication.field_date_publication_value 
ELSE node.created END',
        'direction' => 'DESC',
      )
    );
  }
}
?> 
```

# ruby-on-rails - 回形针：ProductsController#create 中的 NoMethodError（nil:NilClass 的未定义方法“匹配”）

> ID：11769904
> 
> 赞同：0
> 
> 时间：2012-08-02T01:38:05.433
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, paperclip, nomethoderror

我已经查看了整个互联网，试图找出为什么这个错误发生在我身上。我正在尝试使用 Rails 3.2.7 中的回形针 gem 上传文件并给我这个**错误**：

```
undefined method `match' for nil:NilClass 
```

**完整跟踪：**

```
paperclip (3.1.3) lib/paperclip/content_type_detector.rb:60:in `type_from_file_command'
paperclip (3.1.3) lib/paperclip/content_type_detector.rb:16:in `detect'
paperclip (3.1.3) lib/paperclip/io_adapters/file_adapter.rb:14:in `cache_current_values'
paperclip (3.1.3) lib/paperclip/io_adapters/file_adapter.rb:5:in `initialize'
paperclip (3.1.3) lib/paperclip/io_adapters/registry.rb:29:in `new'
paperclip (3.1.3) lib/paperclip/io_adapters/registry.rb:29:in `for'
paperclip (3.1.3) lib/paperclip/attachment.rb:424:in `post_process_style'
paperclip (3.1.3) lib/paperclip/attachment.rb:414:in `block in post_process_styles'
paperclip (3.1.3) lib/paperclip/attachment.rb:413:in `each'
paperclip (3.1.3) lib/paperclip/attachment.rb:413:in `post_process_styles'
paperclip (3.1.3) lib/paperclip/attachment.rb:406:in `block (2 levels) in post_process'
activesupport (3.2.6) lib/active_support/callbacks.rb:403:in `_run__920381213__photo_post_process__992575804__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_photo_post_process_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
paperclip (3.1.3) lib/paperclip/callbacks.rb:26:in `run_paperclip_callbacks'
paperclip (3.1.3) lib/paperclip/attachment.rb:405:in `block in post_process'
activesupport (3.2.6) lib/active_support/callbacks.rb:403:in `_run__920381213__post_process__992575804__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_post_process_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
paperclip (3.1.3) lib/paperclip/callbacks.rb:26:in `run_paperclip_callbacks'
paperclip (3.1.3) lib/paperclip/attachment.rb:404:in `post_process'
paperclip (3.1.3) lib/paperclip/attachment.rb:108:in `assign'
paperclip (3.1.3) lib/paperclip.rb:196:in `block in has_attached_file'
activerecord (3.2.6) lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
activerecord (3.2.6) lib/active_record/attribute_assignment.rb:78:in `each'
activerecord (3.2.6) lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
activerecord (3.2.6) lib/active_record/base.rb:498:in `initialize'
app/controllers/products_controller.rb:51:in `new'
app/controllers/products_controller.rb:51:in `create'
actionpack (3.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.6) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.6) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.6) lib/active_support/callbacks.rb:414:in `_run__665893862__process_action__149004116__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.6) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.6) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.6) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.6) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.6) lib/action_controller/metal/params_wrapper.rb:206:in `process_action'
activerecord (3.2.6) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.6) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.6) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.6) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.6) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.6) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.6) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.6) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.6) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `_run__460361433__call__992575804__callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.6) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.6) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.6) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.6) lib/rails/engine.rb:479:in `call'
railties (3.2.6) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.6) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
c:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
c:/Ruby193/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
c:/Ruby193/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

**参数：**

```
{"utf8"=>"✓",
 "authenticity_token"=>"xtsOzMtMakASXFhB3M27+DPRaJ8QIHs5EUSlualDul8=",
 "product"=>{"name"=>"Colchão Ortobom de Espuma D45 Light Saúde Selado OrtoPillow",
 "category_id"=>"1",
 "subcategory_id"=>"1",
 "maker"=>"Ortobom",
 "dimension"=>"Colchões de Solteiro - 0,
78 x 1,
88 - Para Cama Box de 0,
78 x 1,
88",
 "description"=>"Muito bom",
 "photo"=>#<ActionDispatch::Http::UploadedFile:0x4184a60 @original_filename="Colchao_Ortobom_de_Espuma_D45.jpg",
 @content_type="image/jpeg",
 @headers="Content-Disposition: form-data; name=\"product[photo]\"; filename=\"Colchao_Ortobom_de_Espuma_D45.jpg\"\r\nContent-Type: image/jpeg\r\n",
 @tempfile=#<File:C:/Users/Bernardo/AppData/Local/Temp/RackMultipart20120801-5212-kxcw51>>},
 "commit"=>"Create Product"} 
```

**产品：**

```
class Product < ActiveRecord::Base
  belongs_to :category
  belongs_to :subcategory
  attr_accessible :description, :dimension, :maker, :name, :category_id, :subcategory_id, :photo

  validates_presence_of :name, :maker, :dimension, :description, :category

  has_attached_file :photo, :styles => { :small => "150x150>" },
                  :url  => "/assets/products/:id/:style/:basename.:extension",
                  :path => ":rails_root/public/assets/products/:id/:style/:basename.:extension"

 validates_attachment_presence :photo
 validates_attachment_size :photo, :less_than => 5.megabytes
 validates_attachment_content_type :photo, :content_type => ['image/jpeg', 'image/png']
end 
```

**形式：**

```
<%= form_for(@product, :html => { :multipart => true } ) do |f| %>
  <% if @product.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

      <ul>
      <% @product.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :category %><br />
    <%= f.collection_select(:category_id, Category.all, :id, :name, {:prompt => true}, :include_blank => false ) %> </p>
  </div>
  <div class="field">
    <%= f.label :subcategory %><br />
    <%= f.collection_select(:subcategory_id, Subcategory.all, :id, :name, {:prompt => true}, :include_blank => true ) %> </p>
  </div>
  <div class="field">
    <%= f.label :maker %><br />
    <%= f.text_field :maker %>
  </div>
  <div class="field">
    <%= f.label :dimension %><br />
    <%= f.text_field :dimension %>
  </div>
  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description %>
  </div>
  <div class="field">
    <%= f.file_field :photo %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**控制器：**

```
class ProductsController < ApplicationController
  # GET /products
  # GET /products.json
  def index
    @products = Product.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @products }
    end
  end

  # GET /products/1
  # GET /products/1.json
  def show
    @product = Product.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @product }
    end
  end

  # GET /products/new
  # GET /products/new.json
  def new
    @product = Product.new

    if params[:category] 
      @product.category = Category.find(params[:category]) 
    end

    if params[:subcategory] 
      @product.subcategory = Subcategory.find(params[:subcategory]) 
    end

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @product }
    end
  end

  # GET /products/1/edit
  def edit
    @product = Product.find(params[:id])
  end

  # POST /products
  # POST /products.json
  def create
    @product = Product.new(params[:product])

    respond_to do |format|
      if @product.save
        format.html { redirect_to @product, notice: 'Product was successfully created.' }
        format.json { render json: @product, status: :created, location: @product }
      else
        format.html { render action: "new" }
        format.json { render json: @product.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /products/1
  # PUT /products/1.json
  def update
    @product = Product.find(params[:id])

    respond_to do |format|
      if @product.update_attributes(params[:product])
        format.html { redirect_to @product, notice: 'Product was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @product.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /products/1
  # DELETE /products/1.json
  def destroy
    @product = Product.find(params[:id])
    @product.destroy

    respond_to do |format|
      format.html { redirect_to products_url }
      format.json { head :no_content }
    end
  end
end 
```

***我不知道还能尝试什么。我已经做了我所知道的一切，但我做错了什么。如果你能帮忙，谢谢。***

# javascript - JQuery $.post 在第二次点击时不起作用

> ID：11769906
> 
> 赞同：0
> 
> 时间：2012-08-02T01:38:15.667
> 
> 标签：javascript, jquery, jquery-post

感谢您检查这一点：

我正在做的是读取多个值，如名称和类以确定被单击的内容，然后将其作为参数发送到我服务器上的 PHP，以便我可以切换其类和名称值。

这很好用，第一次单击它时会切换类，但第二次单击该元素时，它不再起作用。查看 chrome 的控制台，我可以看到 POST 结果成功，但 $.post 回调函数不再运行。

```
$('a').click(function() {

            if($(this).attr("name")=="Config"){
                return;
            }
            else if ($(this).attr("name")=="Return"){
                return;
            }
            else if ($(this).attr("name")=="Temperatura"){
                return;
            }

            else{

            var parameters = {};                            
                parameters.devicename   =   $(this).attr("name").split('_')[0];
                parameters.devicevalue  =   $(this).attr("name").split('_')[1];
                parameters.devicestate  =   parseInt($(this).html());

                alert (parameters.devicestate);

                var selector;

                if ($(this).hasClass("Luz_On") || $(this).hasClass("Luz_Off")){
                selector = "Luz";   
                $(this).attr('id','ajaxelement');
                alert("entro");
                alert($(this).attr('name'));
                alert(selector);
                alert($(this).attr('id'))
                }
                else if ($(this).hasClass("Cortina_Up") || $(this).hasClass("Cortina_Down")){
                selector = "Cortina";           
                $(this).attr('id','ajaxelement');                   
                }
                else if ($(this).hasClass("Temperatura")){
                selector = "Temperatura";
                $(this).attr('id','ajaxelement');
                }
                else if ($(this).hasClass("Rewind")){
                selector = "Rewind";
                $(this).attr('id','ajaxelement');
                }
                else if ($(this).hasClass("Play")){
                selector = "Play";
                $(this).attr('id','ajaxelement');
                }
                else if ($(this).hasClass("Pause")){
                selector = "Pause";
                $(this).attr('id','ajaxelement');
                }
                else if ($(this).hasClass("Forward")){
                selector = "Forward";
                $(this).attr('id','ajaxelement');
                }

            $.post(

            "http://localhost/AplicacionWeb/test.php", 

            parameters,

            function(data){

            if (data.valid=='true')
            {

                switch(selector)
                {
                    case "Luz":

                        alert("case");

                        if ($('#ajaxelement').attr('name') == "Luz_On"){

                        alert("caseif1");
                        $('#ajaxelement').removeClass("Luz_On").addClass("Luz_Off");
                        $('#ajaxelement').attr('name','Luz_Off');
                        $('#ajaxelement').removeAttr('id');

                        }
                        if ($('#ajaxelement').attr('name') == "Luz_Off"){

                        alert("caseif2");
                        $('#ajaxelement').removeClass("Luz_Off").addClass("Luz_On");
                        $('#ajaxelement').attr('name','Luz_On');
                        $('#ajaxelement').removeAttr('id');

                        }

                    break;

                    case "Cortina":

                    break;

                    case "Temperatura":

                    break;

                    case "Rewind":

                    break;

                    case "Play":

                    break;

                    case "Pause":

                    break;

                    case "Forward":

                    break;

                    default:
                        alert("C'est la vie");
                }

            }//data.valid

            }, 

            "json"

            );

            }

        });  // end click 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:03:26.333

您将发布请求配置为期望服务器`http://localhost/AplicacionWeb/test.php`返回[有效的 JSON](http://jsonlint.com/)。如果您验证请求返回成功，则检查数据是否符合指定的`dataType`. 如果响应数据无效，jQuery ajax 请求将不会运行成功/完成回调。

# bash - 有没有办法通过单击网页上的链接来执行 bash 命令脚本？

> ID：11769907
> 
> 赞同：-1
> 
> 时间：2012-08-02T01:38:23.560
> 
> 标签：bash, shell, sh

这可能是一个愚蠢的问题，但能够做到这一点会很棒。我的网站上有一个定制的管理部分。我有一个 cron 作业设置为每天运行一次此文件 /opt/webalizerScript.sh 但是，我希望能够在任何时候轻松地从我的管理部分执行该命令，只要我想从 webalizer 更新流量统计信息。我真的不想编辑 cron，因为我不打算经常手动执行脚本，每天一次对于自动化目的来说是好的。当然，我知道我可以在 shell 中执行脚本，但这否定了我想要做的事情的全部目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:42:56.347

执行脚本作为对 HTTP 请求的响应是 CGI 的定义。

您的脚本将接收一些环境变量以反映请求的详细信息，以及一些标准输入。最后，无论它输出什么都将发送给客户端。您必须`Content-Type: text-plain`在开头输出（或其他一些内容类型）后跟一个空行。

查看配置您的网络服务器以提供 CGI 服务；在 Apache 中，您很可能只需将脚本放在一个`cgi-bin`目录中。

这应该足以让你开始。有很多关于 CGI 的教程以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T02:13:44.620

虽然 Amadan 的回答是一个很好的概述，但我想我会放入一个简单的 php 脚本作为演示。此脚本假定 bash 将是您的 Web 服务器的默认 shell。

demo.php 运行“ls -alFh”，但您可以替换任何命令

```
<html>
  <head>
    <title>Output of my bash script</title>
  </head>
  <body>
    <h1>Output of my bash script</h1>
<pre>
<?php system("ls -alFh", $rc); ?>
</pre>
    <br>
    <?php echo "Return Code: {$rc}\n"; ?>
  </body>
</html> 
```

# php - 渲染和保存图像的最佳方式

> ID：11769909
> 
> 赞同：0
> 
> 时间：2012-08-02T01:39:00.993
> 
> 标签：php, web-applications, canvas, svg, rendering

我正在开展一个由在线商店组成的项目，以销售印刷电路板。但是孔系统将是自动化的，并且能够在线查看 Gerber 文件（Gerber 是具有 pcb 机器代码的文件）。

我需要选择将用户上传的这个文件“输出”到网页的最佳方式。仅用于购买前查看 PCB。

我已经完成了整个 PHP 代码来处理 Gerber，但是，我无法确定文件是否会被处理，然后：

*   我将保存为 PNG 文件（渲染将使用 PHP 图像库完成{这是一个狗屎}），如果用户缩放或做任何事情，它不会是完美的......（我需要渲染高分辨率g，并且会占用大量空间，并且加载时间也很长）
*   渲染为 SVG 文件（矢量文件），并在 HTML 上显示为 mbeded 元素（它适用于所有新浏览器吗？处理速度慢吗？），SVG 文件在绘制线条方面非常糟糕......
*   最后但并非最不重要的方法是创建一个 JavaScript 命令列表，它利用 Canvas 元素（我已经实现了这个，并且效果非常好，但我不喜欢认为，我是实际上“渲染”到代码......）

无论如何，你认为我应该使用什么，如果我没有用另一种方式来做，请告诉我！

这是一个作为 Canvas 输出的示例（源是一个 JavaScript 函数对象，它有许多 drawLine 命令）：

![在此处输入图像描述](../Images/ce7fd70a2cf3dc7209be4abe0f1fad85.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:19:31.143

我选择了 SVG 文件，即使它比 慢`canvas`，但考虑到就用户与绘图对象的交互而言，这不是实时绘图过程，这是一个不错的选择。SVG 实际上是矢量，因此图像在大图像上不会很脆。有一些非常好的库可以与 svg-s 一起使用，例如：

[http://processingjs.org](http://processingjs.org)

[http://d3js.org/](http://d3js.org/)

[http://fabricjs.com/](http://fabricjs.com/)

[http://raphaeljs.com/](http://raphaeljs.com/)

我认为d3是最好的之一。我绝对不会推荐 PHP 图像库。

# iphone - NSPredicate：如何做 NOT EndsWith？

> ID：11769915
> 
> 赞同：6
> 
> 时间：2012-08-02T01:39:32.767
> 
> 标签：iphone, ios, arrays, filtering, nspredicate

我在应用程序包中有一个图像列表，需要在应用程序中显示适当的图像，图像具有以下格式：

```
###_photo_#.jpg

###: toy id, from 1000 to 2000
#: photo id, from 1 
```

所以例如

```
1000_photo_1.jpg
1000_photo_2.jpg 
```

我曾经获取包中的文件列表并使用谓词过滤掉其他文件：

```
@"self ENDSWITH '.jpg' AND self BEGINSWITH '%d_photo_'", toyId 
```

但是现在有以@2x.jpg 结尾的视网膜图像，因此需要修复此方法，我正在考虑添加：

```
NOT ENDSWITH '@2x.jpg' 
```

但这是正确的吗？我应该说：

```
NOT (ENDSWITH '@2x.jpg') 
```

或者：

```
(NOT ENDSWITH '@2x.jpg') 
```

反而？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T02:23:52.477

您可以使用这样的谓词字符串：

```
@"(self ENDSWITH '.jpg') AND NOT (self ENDSWITH '@2x.jpg') AND (self BEGINSWITH '%d_photo_')" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T02:27:11.197

您可以将谓词封装在另一个谓词中：

```
NSPredicate *positivePredicate = [NSPredicate ...];
NSPredicate *negativePredicate = [NSCompoundPredicate notPredicateWithSubpredicate: positivePredicate]; 
```

这允许您保留现有的清晰格式字符串。请注意，使用`NSCompoundPredicate`，您还可以构建 AND 和 OR 谓词。从这三个（AND、OR、NOT）中，您甚至可以推导出 XNOR 和 NAND 谓词之类的东西（尽管如何做到这一点是留给读者的练习......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T02:10:01.253

我认为 iOS 4.0+ 中更好的选择是用来`NSPredicate predicateWithBlock:`定义你的条件。这样你就可以使用标准的 NSString 函数`hasSuffix:`来检查你的 endsWith 否定情况。

在这里结帐一个很好的教程：[http ://www.wannabegeek.com/?p=149](http://www.wannabegeek.com/?p=149)

这是您可以使用它的基本方法。

```
NSInteger toyId = 10;
NSPredicate *predicate = [NSPredicate predicateWithBlock:^BOOL(id evaluatedObject, NSDictionary *bindings) {
  return [evaluatedObject hasSuffix:@".jpg"] &&
  ![evaluatedObject hasSuffix:@"@2x.jpg"] &&
  [evaluatedObject hasPrefix:[NSString stringWithFormat:@"%@_photo_", [NSNumber numberWithInt:toyId]]];
}]; 
```

然后，您可以获取文件数组

```
[arrayOfFiles filterArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-01T10:07:19.600

试试这个：

```
NOT something ENDSWITH '@2x.jpg' 
```

# c++ - 在线程之间创建一个“同步点”

> ID：11769917
> 
> 赞同：1
> 
> 时间：2012-08-02T01:39:57.040
> 
> 标签：c++, multithreading, boost, synchronization, boost-thread

我有几个 boost::threads 都执行相同的功能。

```
void foo(){
    //Lock Mutex
    //Do some stuffs, part 1
    //Unlock Mutex
    //Do some stuffs, part 2
    //Lock Mutex
    //Do some stuffs, part 3
    //Unlock Mutex
} 
```

为了让我的应用程序正常工作，在并行执行第 2 部分之前，所有线程都必须完成第 1 部分的执行。我找不到任何能够让我这样做的机制……我错过了吗某物？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:53:03.273

使用增强屏障。来自官方文档的定义：

> 障碍是一个简单的概念。也称为集合点，它是多个线程之间的同步点。屏障是为特定数量的线程（n）配置的，当线程到达屏障时，它们必须等待直到所有 n 个线程都到达。一旦第 n 个线程到达屏障，所有等待的线程都可以继续，并且重置屏障。

从[这里](http://www.boost.org/doc/libs/1_50_0/doc/html/thread/synchronization.html#thread.synchronization.barriers)提取。

# java - 选择列表中的下一个值，而不仅仅是在有重复项时返回第一个值

> ID：11769920
> 
> 赞同：0
> 
> 时间：2012-08-02T01:40:27.803
> 
> 标签：java, selenium, ide, duplicates

我正在使用带有相应子类型的发票元素列表 = 类型，但是由于 Selenium IDE 只返回第一个匹配值，子类型不正确，我不知道如何移动到下一个类型值具有正确的子类型值。

说清单

```
Red Car, subtype = 1
Blue Car, subtype = 2
Yellow Car, subtype = 3
Red Car, subtype = 4
Blue Car, subtype = 5 
```

我想选择 sub-type = 4 的 Red Car，但是 seleniumIDE 会自动返回第一个 Red Car 匹配并忘记其他匹配，但我想查看所有 Red Car。这会导致我的测试脚本崩溃，因为返回的 Red Car 子类型的子类型是 1 而不是 4。

```
 public void testQqqqqq() throws Exception {
    selenium.open("/invoicing/edit_car/-1?set_entityid=55184");
    selenium.click("css=div.content > div.buttonbar > button.primary");
    selenium.select("id=type", "label=Red Car");
    selenium.select("id=type", "label=Red Car"); 
```

如您所见，我选择了第一辆 Red Car 和第二辆 Red Car，但它只显示 label=Red Car ，即使它的子类型错误，它也总是返回第一个。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:31:57.007

而不是标签只是尝试使用索引。（如果您的选项始终处于相同的顺序）

Selenium.select("id=type", "index=4");

# xml - 用 xquery 替换元素的值

> ID：11769922
> 
> 赞同：2
> 
> 时间：2012-08-02T01:40:40.310
> 
> 标签：xml, xslt, xquery

我发现这篇关于替换给定元素的值的现有帖子，但我需要进一步满足我的要求，因为我需要用另一个字符替换第一个字符。这是我找到的帖子：**change value of element by xquery**

源 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<category>
    <catid>1</catid>
    <cattext>sport</cattext>
</category> 
```

使用这个 Xquery：

```
declare namespace local = "http://example.org";
declare function local:copy-replace($element as element()) {
  if ($element/self::cattext)
  then <cattext>art</cattext>
  else element {node-name($element)}
               {$element/@*,
                for $child in $element/node()
                return if ($child instance of element())
                       then local:copy-replace($child)
                       else $child
               }
};
local:copy-replace(/*) 
```

给出这个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<category>
    <catid>1</catid>
    <cattext>art</cattext>
</category> 
```

我对 Xquery 的了解才刚刚开始增长。如何将上面的 Xquery 更改为仅更改第一个字符，以便获得以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<category>
    <catid>1</catid>
    <cattext>9port</cattext>
</category> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T03:05:36.580

**使用[substring()](http://www.w3.org/TR/xpath-functions/#func-substring)函数**：

```
declare namespace local = "http://example.org";
declare function local:copy-replace($element as element()) {
  if ($element/self::cattext)
  then <cattext>9{substring($element,2)}</cattext>
  else element {node-name($element)}
               {$element/@*,
                for $child in $element/node()
                return if ($child instance of element())
                       then local:copy-replace($child)
                       else $child
               }
};
local:copy-replace(/*) 
```

**当此查询应用于提供的 XML 文档时：**

```
<category>
    <catid>1</catid>
    <cattext>sport</cattext>
</category> 
```

**产生了想要的正确结果：**

```
<category>
    <catid>1</catid>
    <cattext>9port</cattext>
</category> 
```

**使用 XSLT 进行相同的转换要容易得多：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="cattext/text()">
  <xsl:text>9</xsl:text><xsl:value-of select="substring(., 2)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（上图）时，再次产生所需的正确结果**：

```
<category>
   <catid>1</catid>
   <cattext>9port</cattext>
</category> 
```

# javascript - javascript - 在另一个函数中使用函数中的值

> ID：11769928
> 
> 赞同：0
> 
> 时间：2012-08-02T01:41:24.697
> 
> 标签：javascript, function, checkbox

所以我用我自学的基本知识（非常基础）制作了一个简单的报价脚本，我想在其中添加更多东西......

[这是jsfiddle上](http://jsfiddle.net/yetanothercoder/uFD3y/)的报价代码

我有复选框，但它们没有附加脚本，我想在选中复选框时添加一个要添加到总数的值...我找到了一个简单复选框的代码

```
function initialize() {
    Total = 0;
    totalprice.innerText = Total;
}

function checkoption(checkbox) {
    checknum = parseInt(checkbox.value);
    if (checkbox.checked == true) {
        Total += checknum;
    } else {
        Total -= checknum;
    }
    totalprice.innerText = Total;
} 
```

我如何获得从这两个函数创建的值（如果没有选中复选框，则为 0）并在计算函数中使用它...我是否解析浮点数？在此示例代码中，值 Total? 最后，函数是否按从上到下的顺序运行......因此这两个示例函数应该在函数计算之上？

我一直在尝试不同的事情，似乎可以找到该怎么做：S....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:51:39.920

您想要的值在`Total`变量中，它是全局的（顺便说一句不鼓励的做法）。函数声明顺序无关紧要，只要它在定义之前没有被调用。

# php - 为什么 json_encode 不起作用？

> ID：11769929
> 
> 赞同：-1
> 
> 时间：2012-08-02T01:41:37.727
> 
> 标签：php, javascript, json

我正在尝试对从数据库中获取的一些用户输入进行编码，然后在单击时将其插入到 textarea 中。这是我对数据进行编码、将用户发送到 textarea 锚点，然后触发我的函数的代码。

```
$quote = "[url]" . $quote . "[/url]";
$quote = htmlspecialchars($quote, ENT_QUOTES);
$quote = json_encode($quote, JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP | JSON_UNESCAPED_UNICODE | JSON_PRETTY_PRINT);
echo "
<a href='#quickpost' value='quote' 
onClick=\"quote(" . $quote . ")\" name='quote'>Quote</a> 
```

这是quote（）函数：

```
function quote(originalpost){
oFormObject = document.forms['id1'];
oFormObject.elements['post'].value = originalpost;
}; 
```

当我单击它时，我在 firebug 中收到此错误：SyntaxError: syntax error Line 1

当谈到 JavaScript 时，我是一个完全的新手，所以我可能会遗漏一些非常明显的东西。我已经为此查看并尝试了很多不同的编码选项和东西，但我没有得到任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T01:46:41.220

由于 JSON 是原生 Javascript，因此在 JS 代码中声明或传递它时不应引用它。

尝试：

```
echo "
<a href='#quickpost' value='quote' 
onClick='quote($quote)' name='quote'>Quote</a>"; 
```

然后在您的函数中，您可能需要对 JSON 进行字符串化：

```
oFormObject.elements['post'].value = JSON.stringify(originalpost); 
```

为了理智起见，获取由生成的 JSON 的副本并通过[JSON lint 实用程序](http://jsonlint.com)`json_encode`运行它以确保它有效。

看看这是否有效。对于没有原生 stringify 支持的浏览器，您可以在[此处](https://github.com/douglascrockford/JSON-js/blob/master/json.js)获取函数的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:46:21.230

也许您需要确保将字符串发送到引用函数。对于我看到的内容，您可能会`quote([url]...`在应该发送时发送`quote("[url]..."`（请注意引号字符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T01:52:03.173

由于数据来自数据库，因此只需在 json 编码之前将其作为数组输出。

```
//array from database
$array = array();
//set the header
header("content-type:json/application");
return json_encode($array); 
```

然后将编码的 json 检索为 responseText。

```
var data = $.ajax({
  url:"",
  type:"json",
  cache:false,
  async:false
}).responseText;

var encodedData = JSON.parse(data); 
```

现在你有一个有效的 json 对象，它是 encodedData

# php - 电子商务网站设计

> ID：11769930
> 
> 赞同：1
> 
> 时间：2012-08-02T01:41:49.143
> 
> 标签：php, e-commerce

我正在做一个电子商务网站。本网站应与支付处理器集成。我有以下订单表。

```
orders(InnoDB)
-----------------------
id int PRIMARY KEY
user_account_id int 
item_id int
price decimal(6,2)
payment_mode ENUM(cash,pg)
payment_status(pending,paid,lost)
order_timestamp Timestamp 
```

下订单时， payment_status 将是“ **pending** ”。用户被重定向到支付处理器。如果支付被授权，payment_status 应更新为“已**支付**”。如果交易丢失（或）未经授权的支付状态应更新为“**丢失**”。我想给用户 30 分钟付款。如果他未能在 30 分钟内付款，payment_status 将被更新为**丢失**，并且订购的物品将被取消并可供其他人预订。

那么，如何实现呢？如何在 30 分钟后运行脚本以将订单更新为丢失（或）我应该每 5 分钟使用一次 cron-job 检查丢失的交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:51:24.800

我会这样做，在应用程序存储待处理事务信息中，并在 30 分钟后使用计时器更新数据库 + cron 任务每 N 分钟（为了可靠性）

UPD：糟糕，没有注意到 php 标签。作为变体，在按状态选择付款之前更新付款状态

# ruby-on-rails - Rails 路由，有嵌套资源和没有嵌套资源

> ID：11769932
> 
> 赞同：1
> 
> 时间：2012-08-02T01:41:59.893
> 
> 标签：ruby-on-rails, ruby, routes

最终得到看起来像这样的路线是不是很糟糕？：

```
resources :users
  resources :places

resources :places 
```

由于用户有很多地方，而且还有很多地方可能与用户无关，只是好奇这是否可以，因为地方已被两次声明为资源，我会遇到路由问题或数据库问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:32:48.003

是的，这不是很好。尝试使用`:shallow => true`来达到同样的效果。

```
resources :users, :shallow => true do
  resources :places 
end 
```

[http://archives.ryandaigle.com/articles/2008/9/7/what-s-new-in-edge-rails-shallow-routes/](http://archives.ryandaigle.com/articles/2008/9/7/what-s-new-in-edge-rails-shallow-routes/)

[http://apidock.com/rails/ActionController/Resources/resources](http://apidock.com/rails/ActionController/Resources/resources)

# php - 创建具有相同父级的 2 个子类的实例

> ID：11769933
> 
> 赞同：0
> 
> 时间：2012-08-02T01:42:02.170
> 
> 标签：php, oop, class

我基本上有两个具有相同父类的子类。

我想做的是在一个脚本中创建两个类的实例，以便访问它们的一些独特功能，我对这个主题非常生疏，但似乎不可能。

我得到错误`Fatal error: Cannot redeclare class MWS`

我想知道解决此问题的正确方法是什么？

下面是我的班级结构的一个例子

**家长班**

```
class MWS{
   funcion MWS(){}
} 
```

**儿童班**

```
require_once('mws.php');

class MWS_Orders extends MWS{
   function MWS_Orders(){}
} 
```

**儿童班**

```
require_once('mws.php');

class MWS_Feed extends MWS{
    function MWS_Feed(){}
} 
```

**索引.php**

```
require_once('mws_feed.php');
require_once('mws_orders.php');

$feed = new MWS_Feed();
$orders = new MWS_Orders(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:59:11.703

将父类的声明放在它自己的文件和`require_once()`那个文件中。不要在每个子类文件中声明父类，也不要`require()`使用`require_once()`.

# xml - 在 ActionScript 3 中获取 xsi:type 属性的值

> ID：11769936
> 
> 赞同：0
> 
> 时间：2012-08-02T01:42:21.543
> 
> 标签：xml, actionscript-3

我有一些看起来像这样的 XML：

```
<LayerDefinition xsi:type ="GridLayerDefinition">
  <Name>Solids</Name>
  <Grid>
    <Width>48</Width>
    <Height>48</Height>
  </Grid>
  <ScrollFactor>
    <X>1</X>
    <Y>1</Y>
  </ScrollFactor>
  <Color A="255" R="0" G="0" B="0" />
  <ExportMode>Rectangles</ExportMode>
</LayerDefinition> 
```

我想得到那个 xsi:type 属性的值。由于冒号，我不能简单地使用 .@whatever。它不会编译。有人建议我尝试使用 .attribute("xsi:type")，但它什么也没返回。这是我的代码：

```
private function loadProject():void
    {
        var curProject:XML = FP.getXML(TESTPROJECT);
        var entry:XML;
        var counter:uint = 0;
        trace("Loading project");
    //  trace(curProject.*);
        trace (curProject.LayerDefinitions.LayerDefinition.attribute("xsi:type"));
        for each (entry in curProject.LayerDefinitions.LayerDefinition)
        {
            //trace("Grid type is: " + entry.attribute("xsi:type"));
            //  trace("Grid type is: " + entry.attribute('xsi:type'));
            //  trace ("Grid is: " + entry.Name);
        }
    } 
```

有什么建议吗？我觉得我在这一点上已经尝试了一切

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:09:28.597

你没有回复我对你其他帖子的评论，为什么不呢？xsi 在哪里定义？在使用此 XML 的代码中的某处应该有一个 xmlns:xsi="someuri"。对于具有 xml 命名空间的 XML 中的属性，我遇到了类似的问题，为了让 AS3 中的 E4X 提取这些合格的属性或节点，我必须在 AS3 中创建一个命名空间。

阅读下面文档中名为 XML 命名空间的部分

[http://www.senocular.com/flash/tutorials/as3withflashcs3/?page=4](http://www.senocular.com/flash/tutorials/as3withflashcs3/?page=4)

基本上你需要做类似的事情（下面来自上面的链接）：

```
// XML with xpl namespace
var xml:XML = 
    <xml xmlns:xpl="http://www.example.com/uri/">
        <xpl:text value="Hello World" xpl:value="Hello Namespace" />
    </xml>;

// Define namespace with xpl URI
var xplNs:Namespace = new Namespace("http://www.example.com/uri/");

// Get value of text attribute
// with and without namespace
trace(xml.xplNs::text.@value); // traces Hello World
trace(xml.xplNs::text.@xplNs::value); // traces Hello Namespace 
```

另一种选择是：

```
var xplNs:Namespace = new Namespace("http://www.example.com/uri/");
use namespace xmplNs; 
```

在您的情况下，新命名空间调用的参数应该是 xmlns:xsi= 设置的任何值。然后，您可以为要使用该名称空间获取的任何属性或节点添加 xplNs:: 或任何您命名的名称空间实例的前缀。

或者，如果您可以使用更 hacky 的方法，您也可以按照此站点上的建议删除名称空间（诚然，我以前自己做过，但总是觉得这是一个肮脏的解决方法，因为我可以做正确的事情）[http ://brianmriley.wordpress.com/2008/03/14/remove-xml-namespaces-in-flex-or-as3/](http://brianmriley.wordpress.com/2008/03/14/remove-xml-namespaces-in-flex-or-as3/)

如果代码中没有 xmlns:xsi 我对正在发生的事情感到茫然。

# .net - 缺少 MSMQ 消息，尽管它存在

> ID：11769937
> 
> 赞同：0
> 
> 时间：2012-08-02T01:42:27.703
> 
> 标签：.net, wcf, monitoring, msmq

我有一个通过 wcf 将服务请求放到 msmq 的 Web 应用程序。wcf 服务类被配置为最多有 1 个，即在任何给定时间只有 1 个处理请求的类实例。在某些情况下，提交了 3 个服务请求，但我们在队列中只看到 1 条 msmq 消息，其中 1 条消息当前由 wcf 服务类处理。1 msmq 消息被认为丢失，因为我们在 msmq 监视管理单元中看不到 msmq 消息。但是，最后执行所有 3 个服务请求。造成这种情况的原因是什么，以及进行一致和准确监控的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:21:10.303

MSMQ 管理单元对此非常慢，您经常需要手动执行刷新。我只是猜测消息的处理速度比您使用管理单元跟踪它们的速度要快。

我的建议是实现您自己的监控应用程序。John Opincar 写了一篇不错的文章，其中包含有关它的示例代码：[Counting Messages in an MSMQ MessageQueue from C#](http://jopinblog.wordpress.com/2008/03/12/counting-messages-in-an-msmq-messagequeue-from-c/)

这是滚动自己的消息队列监视器的基础，该监视器仍在我们的生产系统中使用。

# sql - 加入以获取函数的行匹配最小值

> ID：11769938
> 
> 赞同：2
> 
> 时间：2012-08-02T01:42:44.073
> 
> 标签：sql, sql-server-2008, tsql

我有两张桌子：

```
CREATE TABLE [dbo].[Gps] (
    [Date] [datetime] NOT NULL,
    [Latitude] [decimal](9, 6) NOT NULL,
    [Longitude] [decimal](9, 6) NOT NULL
)

CREATE TABLE [dbo].[Stops] (
    [StopName] [varchar](128) NOT NULL,
    [StopLat] [decimal](9, 6) NOT NULL,
    [StopLon] [decimal](9, 6) NOT NULL
) 
```

我想使用我用这个签名编写的 Haversine() 标量函数为每个 Gps 条目获取最近的停止：

```
CREATE FUNCTION [dbo].[Haversine]
(
    @aLatitude  DECIMAL(9, 6),
    @aLongitude DECIMAL(9, 6),
    @bLatitude  DECIMAL(9, 6),
    @bLongitude DECIMAL(9, 6)
)
RETURNS DECIMAL(16, 6) 
```

例子：

```
SELECT dbo.Haversine(0.0, 0.0, 0.0, 0.0) 
```

我想同时获得 StopName 以及 Haversine 函数的结果。我将如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T12:49:00.363

```
select [Date],Latitude,Longitude,StopName,StopLat,StopLon, dbo.Haversine(Latitude,Longitude,StopLat,StopLon) as distance 
INTO #Distances 
from GPS,STOPS;

select * from #Distances d
join 
(
select [Date],min(distance) minDist from #Distances group by [Date]
) B on (d.[date]=B.[date]) and (d.distance=b.minDist); 
```

请注意，如果与两个 STOPS 的最小距离相等，则此查询可以为一个 GPS 位置选择多行。主要的性能问题在于第一个查询（创建临时#Distance 表）。

我认为您应该通过 WHERE 语句优化此查询以减少输出表。例如，您可以设置从 GPS 位置到任何 STOP 位置的最大允许距离并添加`WHERE dbo.Haversine(Latitude,Longitude,StopLat,StopLon)<MAX_ALLOWED_DISTANCE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T03:15:01.300

此查询应该有效：

```
SELECT  Gps.*, Stops.*
FROM    Gps
JOIN    Stops   
        ON (dbo.Haversine(Latitude, Longitude, StopLat, StopLon) 
            = (SELECT MIN(dbo.Haversine(Latitude, Longitude, s2.StopLat, s2.StopLon))
                FROM    Stops As s2
            ) ) 
```

但它肯定不会很快。

* * *

这是另一种应该起作用的方法：

```
;WITH
  cte As
(
    SELECT  Gps.*, Stops.*,
            dbo.Haversine(Latitude, Longitude, StopLat, StopLon) As distance,
            MIN(dbo.Haversine(Latitude, Longitude, StopLat, StopLon))
                    OVER(Partition By Latitude, Longitude)       As minDistance
    FROM    Gps
    CROSS JOIN
            Stops
)
SELECT  *, distance
FROM    cte
WHERE   distance = minDistance 
```

不过还是一样慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:13:53.913

鉴于您使用的是 SQL Server 2008，我建议使用内置`geography`数据类型存储您的 GPS 和 STOP 点，并使用内置`STDistance`函数来测量距离。

# ruby - Rails 日期比较；日期大于或等于几天前

> ID：11769940
> 
> 赞同：8
> 
> 时间：2012-08-02T01:43:09.343
> 
> 标签：ruby, ruby-on-rails-3, date, comparison, activesupport

我数据库中的日期如下所示：`2012-07-23`

我正在尝试查看日期是否早于 7 天前且小于 14 天前，或者查看日期是否大于 14 天前，但我没有运气..

这是我的代码：

```
def progress_report_status_check(date)
    progress_date = date.to_date
    seven_days = 7.days.ago.to_date
    fourteen_days = 14.days.ago.to_date

    if seven_days > (progress_date - 7.days.ago.to_date) or (progress_date - 14.days.ago.to_date) < fourteen_days
      "due"
    elsif (progress_date - 14.days.ago.to_date) > fourteen_days 
      "overdue"
    end 
  end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T01:59:23.137

```
def progress_report_status_check(progress_date) # Pass in a date
  if (progress_date < Date.now-14.days)
    "overdue"
  elsif (progress_date < Date.now-7.days) 
    "due"
  end 
end 
```

或（可读性较差）

```
def progress_report_status_check(progress_date) # Pass in a date
  (progress_date < Date.now-14.days) ? "overdue" : ((progress_date < Date.now-7.days) ? "due" : "") : "" 
  end 
end 
```

根据您的使用情况，您可能希望创建命名范围，例如：

```
scope :overdue where(:progress_date < Date.now-14.days)
scope :due where(:progress_date < Date.now-7.days) 
```

然后你的调用代码可以是

```
def progress_report_status_check(progress_date) # Pass in a date
  self.overdue? ? "overdue" : self.due? ? : "due" : ""
  end 
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-24T15:24:16.793

接受的答案在 Date 类上使用了未定义的方法。这是对的：

```
def progress_report_status_check(progress_date) # Pass in a date
  if (progress_date < (Date.today-14.days))
    "overdue"
  elsif (progress_date < (Date.today-7.days)) 
    "due"
  end 
end 
```

# database - 将 CSV 导入数据库（重复条目）

> ID：11769943
> 
> 赞同：0
> 
> 时间：2012-08-02T01:43:58.067
> 
> 标签：database, csv, import, duplicates, deduplication

我的工作要求我在一个很长的电子表格上查找信息，该电子表格每周更新一次或两次发送给我。有时最新的电子表格会遗漏上一个电子表格中的信息，导致我必须查看几个不同的电子表格才能找到我需要的信息。我最近发现我可以将电子表格转换为 CSV 文件，然后将其上传到数据库表中。只需几行脚本，我所要做的就是输入我要查找的内容，瞧！现在我刚刚得到了最新的电子表格，我想知道是否可以将其导入旧电子表格。我在数据库中设置为主要的每一行都有一个唯一的编号。如果我尝试在当前信息之上导入它，它会跳过主要复制的行还是只会弄乱我的数据库？

在我尝试之前我想我会问专家。感谢您的输入！

详细信息：电子表格由我们的客户组成。每行包含客户的姓名、唯一的身份证号码、他们的地址和联系信息。我可以将包含唯一 ID 的行设置为主行，然后上传。我担心的是，在 csv 文件中没有任何内容可以表示新行（我认为）。当我上传它时，它给了我跳过重复项的选项，但它会跳过整行还是跳过那个单元格，导致我的数据被放置在错误的行中。它是 apache 服务器 IDK 什么版本的 mysql。我为此使用 000webhost。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:08:50.350

希格斯，

数据库/ETL 术语中的这个问题称为重复数据删除策略。对此没有模板答案，但我建议阅读这些有用的读物​​：

学术论文 -[关系数据中多种记录类型的联合重复数据删除](http://www2.selu.edu/Academics/Faculty/aculotta/pubs/culotta05joint.pdf)

[重复数据删除文章](http://www.intimatedata.co.za/Deduplication.asp)

一些开源工具：

[杜克](http://code.google.com/p/duke/)工具

[数据清理器](http://sourceforge.net/projects/datacleaner/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T06:30:37.997

当您单击底部附近的导入时，有一个小复选框，上面写着“忽略重复”或类似的东西。比我想象的要简单。

# jquery - JQuery XML 选择器问题

> ID：11769945
> 
> 赞同：0
> 
> 时间：2012-08-02T01:44:03.633
> 
> 标签：jquery, xml, css-selectors

我正在构建一个网页，通过加载 XML 文件然后更改内容来加载新的“页面”。我遇到的问题是加载数据时，选择器不起作用。加载图库时发生错误。每个图像都有一个类“拇指”。图像加载正常，但我的 js 中的 $("thumbs").click() 代码不起作用。加载该对象是否存在一些问题会导致 jquery 在查找选择器时找不到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:46:14.620

您缺少类选择器代码，特别是点：`.`。将您的点击事件更改为：

```
$(".thumbs").click(); 
```

但是，如果动态加载此内容，它应该可以工作，您将需要使用其他人提到的 .on() 方法：

```
$(".container_class").on('click',".thumbs",function(){
    //do stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:47:18.553

> 加载该对象是否存在一些问题会导致 jquery 在查找选择器时找不到它？

是的。听起来您正在动态加载新的“页面”，对吗？如果是这样，您那里的选择器将不起作用，因为目标元素在其执行时不存在。尝试使用更动态友好的`on()`方法：

`$(".thumbs").on('click',function(e){})`

# c# - C# 从类型调用构造函数，同时从 IList 中删除

> ID：11769948
> 
> 赞同：0
> 
> 时间：2012-08-02T01:44:16.210
> 
> 标签：c#

我有一个完整的观察者列表

```
//create the list
Class ObersverList : IList<Observer> 
```

Observer 类有一个显示一些信息的动态表单。我想要一种干净的方式来杀死表单。

在列表中，我实现了类似

```
// preiodically call from programm to have always a nice updated list
observerlist.RemoveClosedHandles();

//observerlist.cs
public void RemoveClosedHandles() {
    _list.RemoveAll(ObserverActivePredicate);
}

private static bool ObserverActivePredicate(Oberver o) {
    return !o.HasHandle;
} 
```

这导致 ObserverList 非常好，而且它工作得很好，但我有问题。a）观察者没有被杀死，它刚刚从列表中消失（对我来说没问题）b）表格保持打开状态。（这是一个大问题）

我想要使​​用构造函数之类的东西

```
//observer.cs
   activate() {
      HUD = new ObserverHud();
    }
    ~Observer(){
        HUD.Close();
        HUD.Dispose(); 
    } 
```

但我不知道如何调用观察者析构函数并杀死元素，同时删除。有没有优雅的 c# 方式，还是我需要跳过列表，找到要删除的元素并处理它？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:24:53.227

好的，我现在用 IDisposable 做到了。解决了

# ruby-on-rails - 在 db:seeds 在 Rails 中创建用户/密码

> ID：11769952
> 
> 赞同：0
> 
> 时间：2012-08-02T01:45:13.447
> 
> 标签：ruby-on-rails, ruby, passwords, access-control, seed

好奇在 db:seeds 中使用密码创建用户进行开发是否是个坏主意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T02:26:39.767

这通常是一种不好的做法，因为它们会“以某种方式”被遗忘并在生产中创建的次数很少但一定数量。所以这是最重要的事情要知道和意识到。良好的安全性是关于尽可能多的层次和可能性的关注。这从来都不是一个“要看的东西”的问题。

给出的警告..我认为这还可以。您确实需要这些用户进行开发和测试。因此，我建议执行以下操作：

*   现在在您的票证跟踪系统中输入票证，在上线之前您将检查生产系统中的此类帐户。

*   即使是测试和开发账户也应该有真正的密码，比如 BIGmy2+catz，而不是“password”、“abc123”、“change-me”等。

*   考虑在源代码控制中排除种子文件（例如 .gitignore 用于 git），这样它们甚至不在远程服务器上。

*   考虑加密文件。并“根据需要”对其进行解密，然后在使用后立即删除解密的文件。

*   运行命令时要小心谨慎，`rake db:seed`并仔细考虑当前种子.rb 文件中的内容以及从公共互联网等可以看到数据的位置。

> 归根结底，它*始终*是以下相互冲突的目标之间的**平衡：**
> 
> 保护和保护数据
> ，并
> 允许开发人员在没有太多障碍的情况下完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:55:46.777

您应该避免以明文形式存储密码并将其提交到 repo。话虽如此，请这样想，如果您在网站上清楚地广播这些用户名/密码是否会造成任何损害（假设是虚拟用户来炫耀系统）如果不是继续作为种子的一部分进行操作.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T01:59:39.347

它正在开发中，对吧？是否有人可以访问您的开发机器，他们可以用它做什么？我认为这很好。种子不应该在生产中运行。

# database - cakephp 重定向按钮

> ID：11769954
> 
> 赞同：1
> 
> 时间：2012-08-02T01:46:07.220
> 
> 标签：database, cakephp, redirect

大家好，我有一个有两个按钮的页面，一个应该允许该人进入添加页面并继续添加到数据库，否则如果他们单击另一个按钮，它将进入索引页面。

目前他们都只是将输入的信息添加到数据库中并刷新页面，所以当一个人点击 type_2 按钮时，他们不会被带到索引页面。

这是控制器中的 if 语句

```
if ($this->Field->save($this->request->data)) 
{ 
    if($this->params['form']['type_1'] == 'type_1') 
        { 
            $this->Session->setFlash('The field has been saved');  
            $this->redirect( array('controller' => 'Fields','action' => 'add'));
        } 
        else if($this->params['form']['type_2'] == 'type_2') 
        { 
            $this->Session->setFlash('The template has been saved'); 
            $this->redirect( array('controller' => 'Templates','action' => 'index'));
        } 

} 
```

这是视图

```
<?php

echo $this->Form->create('Field', array('action'=>'add'));

    echo $this->Form->create('Field', array('action'=>'add'));
    echo $this->Form->input('name', array('label'=>'Name: '));
    echo $this->Form->input('description', array('label'=>'Description: '));
    echo $this->Form->input('templates_id', array('label'=>'Template ID: ', 'type' => 'text'));//this would be the conventional fk fieldname
    echo $this->Form->button('Continue adding fields', array('name' => 'type', 'value' => 'type_1'));
    echo $this->Form->button('Finish adding fields', array('name' => 'type', 'value' => 'type_2'));
    echo $this->Form->end();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T02:05:23.767

您的 if 条件错误，您正在检查索引`['form']['type_1']`和`['form']['type_2']`，这应该`['form']['type']`在两种情况下，然后您检查它们的值，所以它变成：

```
if ($this->Field->save($this->request->data)) 
{ 
    if($this->params['form']['type'] == 'type_1') 
        { 
            $this->Session->setFlash('The field has been saved');  
            $this->redirect( array('controller' => 'Fields','action' => 'add'));
        } 
        else if($this->params['form']['type'] == 'type_2') 
        { 
            $this->Session->setFlash('The template has been saved'); 
            $this->redirect( array('controller' => 'Templates','action' => 'index'));
        } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:24:56.967

必须使用 request 而不是 params

```
if ($this->Field->save($this->request->data)) 
{  
    if($this->request->data['submit'] == "type_1") 
        { 
            $this->Session->setFlash('The field has been saved');  
            $this->redirect( array('controller' => 'fields','action' => 'add'));
        } 
        if($this->request->data['submit'] == "type_2") 
        { 
            $this->Session->setFlash('The template has been saved'); 
            $this->redirect( array('controller' => 'templates','action' => 'index'));
        } 

} 
```

# wordpress - .htaccess 使用 RewriteRule，但在匹配时跳过 Wordpress 重写

> ID：11769955
> 
> 赞同：1
> 
> 时间：2012-08-02T01:46:10.687
> 
> 标签：wordpress, .htaccess, mod-rewrite

我最近[问了一个关于让特定的重写工作的问题](https://stackoverflow.com/questions/11604444/htaccess-rewriterule-to-redirect-urls-containing-specific-parameters/)。我确实得到了一个可行的答案，并在我的一个网站上使用了它。现在我正在尝试重用这种方法，但我发现逻辑正在落入 Wordpress 重写部分，并且我自己的重定向根本没有被触发。

```
# BEGIN Redirect deprecated site links to wp equivalent
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{QUERY_STRING} ^news=13$
RewriteRule ^news_comments.php$ http://example.com/example-directory/ [R=301]
RewriteCond %{QUERY_STRING} ^news=51$
RewriteRule ^news_comments.php$ http://example.com/example-page.php [R=301]
</IfModule>
# END Redirect deprecated site links to wp equivalent

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

我显然需要 Wordpress 重写，但我需要触发我在顶部指定的那些并跳过 Wordpress 规则。

我四处搜索并看到了一些使用类似...的建议

```
...
RewriteCond %{QUERY_STRING} ^news=51$
RewriteRule ^news_comments.php$ http://example.com/example-page.php [R=301]
RewriteRule ^news_comments.php$ - [L]
</IfModule> 
```

...但我似乎无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:14:56.913

您需要确保在`[L]`重定向的末尾添加标志，否则 URI 会继续通过其余规则，并且重定向会在末尾发生。到那时，wordpress 已经使用 URI。

```
RewriteCond %{QUERY_STRING} ^news=13$
RewriteRule ^news_comments.php$ http://example.com/example-directory/ [R=301,L]
RewriteCond %{QUERY_STRING} ^news=51$
RewriteRule ^news_comments.php$ http://example.com/example-page.php [R=301,L] 
```

# jsf - 的价值 里面 提交时仍然为假

> ID：11769958
> 
> 赞同：0
> 
> 时间：2012-08-02T01:46:30.090
> 
> 标签：jsf, primefaces, datatable, selectbooleancheckbox

我有一个 primefaces 数据表，在 primefaces 数据表内，我有一列，其中包含 . 问题是，我已将默认值设置为 false。当我单击/检查时，它仍然将值检索为 false。我尝试了多次，但不确定为什么它返回错误。请在下面找到示例代码。

```
 <p:dataTable  id="review-table" var="item" value="#{demandBean.filterVOList}">
  <p:column id="SelectallID" style="text-align: left; width:40px;" rendered="#{demandBean.screeRenderVo.selectAllRenderer}">
 <f:facet name="header" >
  <h:outputText id="selectId"  value="#{demandBean.dmdScreenLabelVO.selectAll}" />
                    <div></div>
<h:selectBooleanCheckbox id="checkbox1" value="Select All" onclick="checkAll(this)"/>
</f:facet>
<h:selectBooleanCheckbox id="checkbox2"  value="#{item.selected}"/>
</p:column> 
```

当我检查并单击保存按钮时，我将值设为 false。我写了一个Action监听器，下面是actionListener对应的代码

```
public void saveData(ActionEvent event)
{
    System.out.println("Entering the Save :");
    selected = isSelected();
    System.out.println("value of Selected"+selected);
} 
```

我也尝试过调试代码，但不确定为什么 for 的值显示为 false。请协助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:31:34.550

您似乎将列中所有复选框的值绑定到*一个相同的*bean 属性。这样，该值最终将成为该列中的最后一行。

这不是它应该被使用的方式。

您基本上需要将复选框的值绑定到当前迭代的行对象的属性（数据表`var`属性后面的那个）。

```
<p:dataTable value="#{bean.items}" var="item">
    <p:column>
        <p:selectBooleanCheckbox value="#{item.selected}" /> 
```

或者，您可以使用`<p:column selectionMode="multiple" />`PrimeFaces 数据表的内置多项选择支持（[另请参见展示示例](http://www.primefaces.org/showcase/ui/data/datatable/selection.xhtml)）。

```
<p:dataTable value="#{bean.items}" var="item" rowKey="#{item.id}" selection="#{bean.selectedItems}">
    <p:column selectionMode="multiple" /> 
```

# java - 如何在 Java 程序中使用 Rybka 2.3.2a 进行国际象棋逻辑？

> ID：11769959
> 
> 赞同：0
> 
> 时间：2012-08-02T01:46:32.210
> 
> 标签：java

我正在尝试制作一个 Java 程序来下棋，我想使用 Rybka 引擎来实现逻辑。该程序有多个 gui。但是，我还没有发现它们是如何与它交互的。
任何帮助将不胜感激 [维基百科](http://en.wikipedia.org/wiki/Rybka)， [官方网站](http://www.rybkachess.com/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:49:37.033

Rybka 支持[UCI](http://en.wikipedia.org/wiki/Universal_Chess_Interface)。请参阅[此处](http://wbec-ridderkerk.nl/html/UCIProtocol.html)了解更多信息。

# javascript - Internet Explorer：除非状态代码为 200，否则无法访问 IFrame 内容

> ID：11769962
> 
> 赞同：4
> 
> 时间：2012-08-02T01:47:36.537
> 
> 标签：javascript, html, internet-explorer, iframe

因为 IE 不支持异步文件上传，所以我正在使用一种解决方法，它涉及将表单发布到 iframe。我绑定 iframe 的 onLoad 事件并在事件触发时读取其内容。这很好用，除非服务器返回 200 以外的状态码，在这种情况下，IE8/IE9 会抛出“SCRIPT5：访问被拒绝”错误。微软似乎已经决定，除非请求返回 200 OK，否则不应允许任何人读取 iframe 的内容。

谷歌搜索没有任何结果，所以我在这里寻求帮助。其他人可以重现这种奇怪的行为吗？反正有这个问题吗？

iframe 不违反任何跨站点安全策略。这一切都在同一个域上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:48:41.177

我想我在尝试在提琴手上重现问题时已经解决了这个问题。关闭 IE 中的“显示友好的 HTTP 错误消息”似乎可以解决它。我无法在 fiddler 上重现它的原因是它们的 404 页面超过 512 个字节，因此无论如何它都会显示 nginx 错误。

基本上，整个问题是当页面小于 512 字节（或在某些情况下为 256）时，IE 似乎会替换整个页面，这会导致以编程方式阻止对该页面的访问。显然，微软的疏忽似乎仍然存在于 IE10 中。

很容易复制。只需将以下内容放在服务器下的文件（例如 test.html）中，然后返回 512 字节下的 404 响应代码，并确保您的 IE 设置为显示友好的错误消息（还要确保“test1.file”实际上不是存在）。在打开开发者控制台的情况下使用 IE 访问页面，您应该会看到“拒绝访问”错误。刷新页面的方式会改变结果。CTRL+F5 似乎没有出现问题，但 CTRL+R 或 F5 会出现问题。

```
<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
<script type="text/javascript">
iframe = document.createElement('iframe')
iframe.src = '/test1.file'
document.body.appendChild(iframe )
iframe.contentDocument
</script>
</body>
</html> 
```

现在，如果我能找到可以提交 IE10 错误报告的地方，这样我们就可以更好地处理这个可怕的浏览器了。

# python - 如何在龙卷风中对redis进行异步写入

> ID：11769965
> 
> 赞同：2
> 
> 时间：2012-08-02T01:48:23.947
> 
> 标签：python, redis, tornado

感谢[这篇文章](https://stackoverflow.com/questions/5953786/how-do-you-properly-query-redis-from-tornado)，我正在尝试异步驱动程序`tornado-redis`。从演示（[Github 示例](https://github.com/leporo/tornado-redis/blob/master/demos/simple/app.py)）中，它显示了如何使用这个库进行异步获取，但我不清楚这些集合是否也是异步的（它们确实有一个回调函数）。

因此，如果可能的话，使用 进行异步写入的正确方法是什么`tornado-redis`？会不会是这样的：

```
@tornado.web.asynchronous
@tornado.gen.engine
def post(self):
    ...
    yield tornado.gen.Task(t.set,'key', 'value') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:19:09.097

看`tornado-redis`代码。`Client.set`方法有以下定义：

```
def set(self, key, value, callback=None):
    self.execute_command('SET', key, value, callback=callback) 
```

所以是的，它需要回调并且可以与`gen.Task`.

异步写入的正确方法：

1.  您在问题中描述的方式，使用`gen`.
2.  方式，在 github 示例中描述。

来自 github 的示例：

```
c = tornadoredis.Client()
c.connect()

def on_set(result):
    log.debug("set result: %s" % result)

c.set('foo', 'Lorem ipsum #1', on_set)
c.set('bar', 'Lorem ipsum #2', on_set)
c.set('zar', 'Lorem ipsum #3', on_set) 
```

带有 gen 模块的单独类：

```
class MyRedisWrapper(object):
    @gen.engine
    def set(self, key, value):
        yield tornado.gen.Task(t.set, key, value)

r = MyRedisWrapper()

class MyHandler(tornado.web.RequestHandler):
    def get(self):
        r.set('key', 'value') #It will work, but not sure about efficiency. 
```

# php - 调用 isset 时如何连接或传递此变量？

> ID：11769967
> 
> 赞同：0
> 
> 时间：2012-08-02T01:48:54.710
> 
> 标签：php, html

```
if(isset($_GET['action']) && $_GET['action']=='album_id=$album['id']') 
```

现在我相信你们所有人都可以在这里看到错误我正在尝试检查是否单击了此链接

```
<a href="<?php echo $profile_data['username'];?>?action=album_id=<?php echo $album['id'];?>"> 
```

现在这个链接可以正常工作并在 url 中显示，但我不知道如何将 $album['id'] 传递给 if 语句 isset？

编辑

好的，我这样做了：

```
<a href="<?php echo $profile_data['username'];?>?action=album_id&action_id=<?php echo $album['id'];?>"> 
```

和

```
if($_GET['action'] == 'album_id' && $_GET['action_id'] == $album['id']) 
```

并在 if 语句中返回未定义的变量说专辑是未定义的变量

这是我的 htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /lr/profile.php?username=$1 [QSA] 
```

这是我的整个 php 文件：

```
<?php 
include 'core/init.php';
include 'init.image.php';
protect_page();
 include 'includes/overall/overall_header.php';

if(isset($_GET['username']) === true && empty($_GET['username']) === false){
$username       = $_GET['username'];

if(user_exists($username) === true){
$user_id        = user_id_from_username($username);
$profile_data   = user_data($user_id, 'first_name','last_name','email', 'username');
?>

    <h1><?php echo $profile_data['first_name']; ?>'s Yor Page</h1>

<div id="navWrapper">
    <ul>
        <li>
            <a href="#"><img src="uploads/profile/blank_profile.gif" width="150" height="150" id="blank_profile"></a>
        </li>

        <nav>
            <ul>
                <li>
                    <a href="<?php echo $profile_data['username'];?>?action=albums">Albums</a>
                </li>
                <li>
                    <a href="<?php echo $profile_data['username'];?>?action=music">Music</a>
                </li>
            </ul>
        </nav>
    </ul>
</div>

<?php
if(isset($_GET['action']) && $_GET['action']=='albums'){

$albums = get_profile_albums($user_id);

if(empty($albums)){
echo 'No Albums';
}else{
foreach($albums as $album){
if (empty($album['image'])) {

    $album['image'] = 'uploads/profile/blank_profile.gif';
}

?>
 <p><?php echo $album['name'],' (', $album['count'], ')'?> <br />
  <a href="<?php echo $profile_data['username']; ?>?action=album&album_id=<?php echo $album['id']; ?>">
    <img src="uploads/thumbs/<?php echo $album['id'];?>/<?php echo $album['image'];?>" />
  </a><br />
  <?php echo $album['description'];?>...<br />
  </p>
<?php

}

}

}
else if (isset($_GET['action']) && $_GET['action']=='album' && isset($_GET['album_id'])){
echo 'albums';
}

if(isset($_GET['action']) && $_GET['action']=='music'){
echo'<h1>Music</h1>';
}

}else{
    echo 'Sorry, that user doesn\'t exist';
}
}else{
header('Location: index.php');
exit();
}

include 'includes/overall/overall_footer.php';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T01:50:59.343

正确的方法是正确编码 url：

```
<a href="<?php echo $profile_data['username'];?>?action=<?php echo urlencode('album_id='.$album['id']); ?>"> 
```

然后解码

```
if(isset($_GET['action']) && urldecode($_GET['action'])=='album_id='.$album['id']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T02:00:21.127

您没有目的地，您尝试访问的 php 文件在哪里？你从`username`. 在这里检查`href="<?php echo $profile_data['username'];?>?`

尝试将action和id分开，可能只有我一个人，我觉得这样说有点奇怪`action=album=1`

你可以试试这样

```
$_GET['action'] == 'album' && $_GET['action_id'] == $album['id'] 
```

所以网址看起来像

```
?action=album&action_id=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:02:51.707

我认为@Dreen 回答了您的问题，但我会将 action 参数与 action 和 id 之类的东西分开：

```
<a href="<?php echo $profile_data['username'];?>?action=album&id=<?php echo $album['id'];?>"> 
```

并检查

```
if(isset($_GET['action']) && $_GET['action']=='album' && isset($_GET['id']) && $_GET['id']==$album['id']) 
```

# c++ - g ++链接错误：使用#define编写函数名称时对函数的未定义引用

> ID：11769968
> 
> 赞同：0
> 
> 时间：2012-08-02T01:49:04.263
> 
> 标签：c++, g++

**function.cpp** -> 编译为 function.o，然后编译为 libFunction.so

```
#define PASTEHELPER(a,b) a ## b

#define PASTE(a,b) PASTEHELPER(a,b)

void PASTE(My,Function)() { .... } 
```

**main.cpp** -> 编译为 main.o。但是链接时出错

```
void MyFunction(); 
```

g++ 中的链接错误。（但是，在 Visual Studio 中成功）

```
g++ -mtune=i686 -MP -MMD -MT .o -Wextra -Woverloaded-virtual -Wno-sign-compare -Wno-conversion -Wno-missing-field-initializers -O3 -DNDEBUG -fno-strict-aliasing -fPIC -fdiagnostics-show-option -DPROJECT=MyProjec  -o /mypath  main.o -L..  -L/sbcimp/run/pd/gcc/32-bit/4.4.2/lib/gcc/i686-pc-linux-gnu/4.4.2 -L/sbcimp/run/pd/gcc/32-bit/4.4.2/lib -lFunction -pthread -L/sbcimp/run/pd/python/2.7.1/lib -lpython2.7 -l util  -L/sbcimp/run/pd/boost/32-bit/1.47.0_gcc4.4.2/lib -lboost_filesystem -lboost_thread -lboost_regex -lboost_system -Wl,-rpath,/sbcimp/run/pd/boost/32-bit/1.47.0_gcc4.4.2/lib -L/sbcimp/run/pd/apache_xerces-c/32-bit/3.1.1_mt_gcc4.4.2/lib -lxerces-c -Wl,-rpath,/sbcimp/run/pd/apache_xerces-c/32-bit/3.1.1_mt_gcc4.4.2/lib -ldl -Wl,-z,origin -Wl,-rpath,'$ORIGIN' -Wl,-rpath,/sbcimp/run/pd/gcc/32-bit/4.4.2/lib/gcc/i686-pc-linux-gnu/4.4.2,-rpath,/sbcimp/run/pd/gcc/32-bit/4.4.2/lib,-soname,MyProject

main.cpp: undefined reference to 'MyFunction'. 
```

该函数未在任何 .h 文件中定义。这是问题吗？如果需要在.h中声明函数，怎么写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:42:35.997

我不确定粘贴的链接器错误是否完整。

但无论如何，如果链接器真的抱怨，`MyFunction`那么它期望符号`MyFunction`是 C，而不是 C++（在 C++ 中它应该抱怨`MyFunction()`）。

所以我猜你要么声明`void MyFunction();`as ，`extern "C"`要么实际上是`main.o`通过编译`main.c`using`gcc`而不是`main.cpp`.

您可以通过运行检查库中的内容以及链接器的期望：

```
objdump -t function.o |grep MyFunction
objdump -t main.o |grep MyFunction 
```

如果你从 .cpp 文件编译了两个 .o 文件，你应该得到像`_Z10MyFunctionv`. 两者的符号名称应该相同。但是，如果其中一个没有被破坏（即只是`MyFunction`），那么它来自 C，而不是 C++。

如果它们都被破坏，但不同，那么你在两种情况下都以不同的方式声明了函数。

的使用`#define`根本不应该影响链接器。

# android - 何时需要自定义内容提供程序？

> ID：11769971
> 
> 赞同：1
> 
> 时间：2012-08-02T01:49:12.560
> 
> 标签：android

我已经在应用程序中看到了 sqLite 的自定义内容提供程序，但仅此而已。何时应构建自定义内容提供程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T02:15:05.273

[EboMike](https://stackoverflow.com/users/345717/ebomike)在[这个问题](https://stackoverflow.com/questions/4079117/why-should-i-use-custom-content-provider-in-android)中说：

*   其他应用程序将能够访问您的数据。

*   您可以在内容提供者中包装和抽象大量查询逻辑，并限制访问。

*   您将能够依靠系统来支持托管查询等操作。

请记住，您可以`control user interacts`使用您的数据，例如您可以阻止用户修改数据，或者您可以强制系统使用显式应用程序打开数据等等。

# java - 未经检查的演员表警告，需要澄清

> ID：11769973
> 
> 赞同：2
> 
> 时间：2012-08-02T01:49:23.040
> 
> 标签：java, warnings

假设我们正在处理以下设置：

```
A extends B 
```

主要做：

```
public void doIt() {
    List<A> listOfA = new ArrayList<A>();
    listOfA.add(new A());
    listOfA.add(new A());

    C c = new C();
    // We know that really, listOfA is going to be modified
    //  in some way and will be returned to us, thus, it is 
    //  ok to cast result back to what we know it to be
    List<A> a = (List<A>) c.doSomethingWithListOfA(listOfA);
} 
```

什么时候`C`有方法

```
public List<? extends B> doSomethingWithListOfA(List<? extends B> 
                                     listOfObjectsThatExtendB) {
    return someFormofListA;
} 
```

(List) c.doSomethingWithListOfA(listOfA); 的演员表 `- Type safety: Unchecked cast from List<capture#1-of ? extends B> to List<A>`带着警告回来。

**我想知道这是否可能是因为其他一些类也可能扩展 B，从而使编译器不确定它实际上是 A 的列表还是扩展 B 的 X？**

除了抑制警告之外，如何检查这一点？（未经检查的演员）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:02:53.083

它不是类型安全的，因为该方法可以返回任何类型的列表，它是 B 的子类型——可能是也可能不是 A。

怎么写这个：

```
public <T extends B> List<T> doSomethingWithListOfA(List<T> listOfObjectsThatExtendB) {
  return listOfObjectsThatExtendB;
} 
```

现在不再需要铸造：

```
List<A> a = c.doSomethingWithListOfA(listOfA); 
```

# node.js - NodeJS、Express 和插件样式表

> ID：11769979
> 
> 赞同：1
> 
> 时间：2012-08-02T01:50:28.563
> 
> 标签：node.js, express, stylesheet

我正在将 Express v3.0.0rc1 与 Node v0.8.1 一起使用，并且我正在尝试创建一个网络服务器，该服务器可以脱离模块化系统来显示路线和视图。

有没有办法从目录中显示样式表和客户端 javascript 文件，`./modules/foo/`而不是`./public`在 foo 模块路由中显示请求时显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:20:10.880

我的方法是设置一个额外的静态中间件层。这有一个限制，即您的模块使用的静态文件必须具有不同的名称，因为任何名称冲突都将导致仅提供资源`./public`。根据这个 SO [Setting up two different static directory in node.js Express framework](https://stackoverflow.com/questions/5973432/setting-up-two-different-static-directories-in-node-js-express-framework)，这可能是你能做的最好的。

```
var express = require('express');
var http = require('http');

var app = express();                     // Express 3+
var server = http.createServer(app);

app.configure(function(){
    app.use(express.bodyParser());      // Parses incoming request date.
    app.use(app.router);                // Mount application routes 
    app.use(express.static(__dirname + '/public'));
    app.use(express.static(__dirname + '/module/foo'));
});

app.get('/', function(req, res) {
    res.send("Hello World!");
});

server.listen(3000, 'localhost');

}); 
```

# hadoop - HDFS如何删除块？

> ID：11769980
> 
> 赞同：1
> 
> 时间：2012-08-02T01:50:36.143
> 
> 标签：hadoop, block, hdfs

我是 Hadoop 新手。

部署后，我运行了基准测试，*$hadoop jar hadoop-0.20.0-test.jar TestDFSIO -write -nrFiles 1000 -fileSize 10。*

工作完成后，我查看了 Cluster Summary，说 1000 个文件和目录，1000 个块 = 2000 个。

然后我使用shell cmd删除相应的文件。那么 Cluster Summary 就是：0 个文件和目录 1000 个块 = 1000 个。

我认为删除后集群摘要中应该没有文件和块。但实际情况是：在我问这个问题之前是1000块。但现在有 0 个块。

这怎么可能发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T13:51:40.463

删除只是指示 NameNode 从其元数据存储中删除文件。提交后，NameNode 将联系托管块的 Datanode 并指示它们删除块。

数据节点上的实际文件删除可能需要几秒钟（取决于数据节点的数量、块大小和要删除的块数），然后数据节点会向 nameNode 报告，此时它将更新全局块数。正如您所观察到的，片刻之后，块的总数将恢复为 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:59:57.990

块删除操作是异步完成的。

# c# - 在 xna 中访问 Game1 类的字段/属性的最佳方法是什么？

> ID：11769988
> 
> 赞同：1
> 
> 时间：2012-08-02T01:51:56.340
> 
> 标签：c#, xna

我正在制作一个 xna 游戏，并且会有很多类控制绘图和更新等。

这些类需要能够访问原始 Game1 类的实例，以便它们可以控制图形设备和精灵批处理等。

问题是我将拥有一个类网络，这些类调用其他类，并且链最底部的类仍然需要能够访问图形设备等的 Game1 类。

做这个的最好方式是什么？只是继续传递 Game1 作为参数，还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:58:56.813

从软件工程/架构的角度来看，**“正确”**的答案是将您需要的特定资源作为参数传递给您的方法。这提供了许多优点——其中最大的优点可能是它解耦了代码的各个部分，允许它们彼此独立使用。

给你举个例子：你可能有你的游戏。但是你可能想要使用相同的代码并制作一个编辑器，或单元测试，或任何其他疯狂的工具。在许多情况下，您甚至可能没有`Game`课程。（给你一个具体的例子，[我的这个视频](http://www.youtube.com/watch?v=H8ykKU0Y6hc)向你展示了运行相同游戏代码的两种截然不同的方式——如果没有适当的解耦，这是不可能的。）

（在此基础上，您可能应该传递比从 . 派生的类更具体的东西`Game`。）

如果您有相当开放的版本控制/依赖性要求，您可以更进一步，并传递一个`IServiceProvider`（例如，这是 XNA 传递给 的构造函数的内容`ContentManager`）。我详细分析了为什么您可能会[在这个答案中这样](https://stackoverflow.com/a/6807121/165500)做。

***然而***

您不是在编写将被第三方使用的库。*你正在写一个游戏。*唯一会使用您的代码的人是您自己的团队 - 您可以访问源代码并且可以自由修改它。

**这意味着您可以自由地走一些捷径。**

在实践中，通常可以获取游戏类的静态实例，或者（当我将一些东西放在一起时，这是我的首选方法）游戏类的静态属性。在 XNA 中，您知道在实践中您将永远只有一个游戏类实例。

首先，这样做既快速又容易。以后也可以快速轻松地切换到“正确”的方式做事。只要你准备好了。良好的版本控制和在 Visual Studio 中使用“查找所有引用”在这里特别有用。

基本上：只要您了解自己正在走捷径，*为什么*要走捷径，以及“正确”的方式是什么——那么走捷径就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:53:15.590

为什么不在game1的某个地方保留一个静态引用，而一切都指向它？

# eclipse - 无法加载 JavaHL 库

> ID：11769989
> 
> 赞同：97
> 
> 时间：2012-08-02T01:51:59.407
> 
> 标签：eclipse, apache-flex, svn, flash-builder, subclipse

更新到 Snow Lion 后，我在尝试使用 SVN 时开始在 Flash Builder / Eclipse 中收到这些错误：

```
Failed to load JavaHL Library.
These are the errors that were encountered:
no libsvnjavahl-1 in java.library.path
/opt/subversion/lib/libsvnjavahl-1.0.dylib:  Library not loaded: /usr/lib/libpq.5.dylib   Referenced from: /opt/subversion/lib/libsvnjavahl-1.0.dylib   Reason: no suitable image found.  Did find:  /usr/lib/libpq.5.dylib: mach-o, but wrong architecture  /usr/lib/libpq.5.dylib: mach-o, but wrong architecture
no svnjavahl in java.library.path
java.library.path = .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java 
```

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2013-01-09T13:30:33.087

试试这个：

1.  选择**窗口**>>**首选项**
2.  展开**团队**>> **SVN**
3.  在**SVN 接口**下将**Client**设置为**SVNKit (Pure Java) SVNKit...**。

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-08-08T20:28:19.967

如果不需要使用 JavaHL，Subclipse 还提供了一个纯 Java SVN API 库——SVNKit (http://svnkit.com)。只需从 Subclipse 更新站点安装 SVNKit 客户端适配器和库插件，然后在 Team > SVN 下的首选项中选择它。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-01-24T15:23:22.477

在 Kubuntu 上，由于安装了另一个 Java 版本，我的库路径发生了变化。这是[整个图片](http://subclipse.tigris.org/wiki/JavaHL#head-bb1dd50f9ec2f0d8c32246430c00e237d27a04fe)，但简而言之：

```
sudo apt-get install libsvn-java
sudo find / -name libsvnjavahl-1.so 
```

最后一个命令的输出可能如下所示，例如：

`/usr/lib/x86_64-linux-gnu/jni/libsvnjavahl-1.so`

这为您提供了路径，因此您可以将以下内容添加到您的`eclipse.ini`：

```
-Djava.library.path=/usr/lib/x86_64-linux-gnu/jni/ 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-06-11T12:48:37.810

看看这个[博客](http://benohead.com/mac-os-x-svn-subversion-missing-in-mountain-lion-10-8/)。它有大量的信息。此外，如果通过 brew 安装，请不要错过此说明：

您可能需要将 Java 绑定链接到 Java Extensions 文件夹：

```
 $ sudo mkdir -p /Library/Java/Extensions
 $ sudo ln -s /usr/local/lib/libsvnjavahl-1.dylib /Library/Java/Extensions/libsvnjavahl-1.dylib 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-07T22:25:27.323

我刚刚安装了 Mountain Lion，遇到了同样的问题，我使用 FLashBuilder（32 位），而 MountainLion 是 64 位，这意味着默认情况下 MacPorts 将所有内容安装为 64 位。我使用的 subclipse 版本是 1.8 因为我已经安装了 Subversion 和 JavaHLBindings 我刚刚运行了这个命令：

```
 sudo port upgrade --enforce-variants active +universal 
```

这使得 mac 端口通过已经安装的所有内容并安装 32 位版本。

然后我重新启动了 FlashBuilder，它不再显示任何 JavaHL 错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-02T16:37:23.317

根据您的操作系统，您可能需要也可能不需要 JavaHL。除了其他建议外，只需在此处发布此内容。

![在此处输入图像描述](../Images/657741bc3fafa2b9adac2cd8a03fabac.png)

对于其他操作系统，请参阅此来源：[http ://subclipse.tigris.org/wiki/JavaHL](http://subclipse.tigris.org/wiki/JavaHL)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-29T05:46:07.797

也许你可以试试这个：更改 jdk 版本。我通过将 jdk 从 1.6.0_37 更改为 1.6.0.45 解决了这个问题。BR！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-13T18:29:33.617

我尝试了所有可用的解决方案，最后对我来说问题是：

```
uninstall Native JavaHL 1.6

install everything under Subclipse from this site: 
```

[http://subclipse.tigris.org/update_1.10.x](http://subclipse.tigris.org/update_1.10.x) >

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-23T14:43:30.563

对我来说，当我升级到 java 8 时，我开始遇到这个问题，然后又恢复到 java 7。再次升级到 java 8，问题得到了解决。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-26T03:57:29.800

对于 Eclipse/STS v3.9.X windows 用户，您可能需要更新您的 subclipse 版本。

转到**帮助**>**安装新软件**>**单击 Subclipse**并将版本从**1.6.X****编辑**到**1.8.X**

 ****此方法也适用于那些遇到 JavaHL 不可用的人。**您可以通过转到Windows** > **Preference** > **Team** > **SVN**检查 JavaHL 是否可用。您可以在**SVN 接口**>**客户端**部分查看它。

如果这适用于 MAC OS，请在评论部分回复。:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-07-31T22:57:31.260

我的理解 - 基本上，svn 客户端默认出现在 Mac 操作系统上。在 eclipse 中安装时，我们应该将 svn 插件与 mac 插件匹配，并且不会丢失 javaHL。通过安装 xcode 然后使用 homebrew 或 macports 进行更新有一个漫长的过程，您可以在谷歌搜索后找到它们，但如果您赶时间，只需使用以下步骤。

1) 在你的 mac 终端外壳上

$ svn --版本

记下版本，例如 1.7。

2）打开下面的链接

[http://subclipse.tigris.org/wiki/JavaHL](http://subclipse.tigris.org/wiki/JavaHL)

检查您需要对应的子剪辑版本。例如

Subclipse 版本 SVN/JavaHL 版本 1.8.x 1.7.x

3) ok，挑1.8.x对应的url from

[http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA](http://subclipse.tigris.org/servlets/ProjectProcess?pageID=p4wYuA)

并添加到您的 Eclipse => 在帮助下安装新软件

选择您需要的任何内容，svn 客户端或 subclipse 或 mylyn 等，它会要求重新启动 STS/eclipse，您就完成了。为我工作。

注意：如果您已经在 Eclipse 中安装了多个版本，那么最好从 Eclipse 插件中卸载所有 subclipse 或 svn 客户端版本，然后按照上面列出的步骤重新开始。****

# asp.net - 如何检测 Web 应用程序是否部署为虚拟目录？

> ID：11769991
> 
> 赞同：1
> 
> 时间：2012-08-02T01:52:08.990
> 
> 标签：asp.net, asp.net-mvc-3, iis, relative-path, virtual-directory

我的 MVC3 Web 应用程序并不总是部署为 IIS 中的站点，因此我需要检测它是否已部署为虚拟目录或应用程序以处理路径字符串。

例如，如果站点部署为 IIS 根目录下的网站，如果我写：

\ABC\test.txt

这很好，请求转到`http://somehost/ABC/test.txt`

但如果站点部署为 IIS 中现有站点下的虚拟目录或应用程序，例如：

```
http://somehost/mymvcapp/ 
```

那么，“\ABC\test.txt”的请求将不正确。

我知道写“~\App_Data\test.txt”可以解决问题，但是“~\”只能由服务器在当前的Web上下文中处理。有时我需要对其他层的文件进行一些处理，它们无法触及 web 上下文。

所以我需要检测应用程序是否已部署为虚拟目录。并找到文件的实际物理路径。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T02:40:02.777

找到了一种方法，但我不确定它是否很好：

查看`HttpRuntime.AppDomainAppVirtualPath == "/"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T02:35:01.357

如果您的业务层无法引用`System.Web`，那么您必须期望它无法检测到有关您的 Web 应用程序周期的任何信息。这意味着不应期望代码解析您站点内的文件路径。

你可以做的是有一个中间配置层，应用程序初始化并且业务层可以使用它。例如，给定两个层都可以访问的接口：

```
public interface IConfiguration
{
    string DataFolder { get; }
} 
```

...你可以在你的代码`Global.asax`初始化它：

```
IConfiguration config = ...;
...
config.DataFolder = this.Server.MapPath("~/App_Data"); 
```

您的业​​务层现在可以读取配置并形成预期文件的路径：

```
var filePath = Path.Combine(this.configuration.DataFolder, "test.txt"); 
```

# javascript - 如何使用 jquery 的 .hover 事件将图像更改为文本

> ID：11769996
> 
> 赞同：0
> 
> 时间：2012-08-02T01:53:07.187
> 
> 标签：javascript, jquery, hover, mouseover, innerhtml

我需要一个简单的脚本，允许我更改 ap 标签的内部 html，在我的情况下，当我将鼠标悬停在它上面时，它只是一个纯文本的图像。

例子：

```
<div id="one">
    <p><img src="events.png" alt="" /></p>
</div> 
```

当我将鼠标悬停在上面的 p 标签上时，我希望它更改为如下所示的文本

```
<div id="one">
   <p>Events</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T01:59:06.507

您根本不需要为此使用 javascript。这使用 css 非常简单地处理。

```
<div id="one">
    <p>
        <span>Events</span>
        <img src="events.png" alt="" />
    </p>
</div> 
```

CSS：

```
#one p>span{ display:none; }
#one p:hover span{ display:inline; }
#one p:hover img{ display:none; } 
```

这是它的实际操作：http: [//jsfiddle.net/CKpCk/](http://jsfiddle.net/CKpCk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T01:58:45.383

尝试以下操作：

```
var html = $('#one p').html()

$('#one').hover(function(){
   $('p', this).html('Events');
}, function() {
   $('p', this).html(html);
})​ 
```

[演示](http://jsfiddle.net/4utxS/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T02:11:43.813

试试这个：

```
<html>
<head>
    <title>Try</title>
</head>
    <script type="application/javascript" src="jQuery.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    $("#testHover").hover(function()
    {
         $("#testHover").html("Events");
    });
    });
    </script>
<body>
    <div id="one">

        <p style="width:200px;"id="testHover"><img src="events.jpg" alt="" /></p>

    </div>
</body>
</html> 
```