# StackOverflow 问答 12481000-12481999

# objective-c - 如何通过点击动画 UIImageview 以显示全屏？

> ID：12481004
> 
> 赞同：15
> 
> 时间：2012-09-18T16:17:24.977
> 
> 标签：objective-c, ios5, uiimageview, fullscreen

我在 UITableviewCell 中有一个 UIImageView。当它被点击时， UIImageView 应该动画以全屏显示。当图像在全屏时被点击时，它应该收缩回原来的位置。

如何做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-18T16:29:07.737

将手势识别器添加到视图控制器。

将手势识别器添加到您的头文件中

```
@interface viewController : UIViewController <UIGestureRecognizerDelegate>{
    UITapGestureRecognizer *tap;
    BOOL isFullScreen;
    CGRect prevFrame;
} 
```

在你的 viewDidLoad 添加这个：

```
isFullScreen = false;
tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imgToFullScreen)];
tap.delegate = self; 
```

添加以下委托方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch;
{
    BOOL shouldReceiveTouch = YES;

    if (gestureRecognizer == tap) {
        shouldReceiveTouch = (touch.view == yourImageView);
    }
    return shouldReceiveTouch;
} 
```

现在你只需要实现你的 imgToFullScreen 方法。确保您使用 isFullScreen Bool （如果它是假的，则全屏，如果它是真的，则返回旧尺寸）

imgToFullScreen 方法取决于您希望如何使图像变为全屏。一种方法是：（这是未经测试的，但应该可以）

```
-(void)imgToFullScreen{
    if (!isFullScreen) {
        [UIView animateWithDuration:0.5 delay:0 options:0 animations:^{
            //save previous frame
            prevFrame = yourImageView.frame;
            [yourImageView setFrame:[[UIScreen mainScreen] bounds]];
        }completion:^(BOOL finished){
            isFullScreen = true;
        }];
        return;
    } else {
        [UIView animateWithDuration:0.5 delay:0 options:0 animations:^{
            [yourImageView setFrame:prevFrame];
        }completion:^(BOOL finished){
            isFullScreen = false;
        }];
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-14T19:25:48.213

@AzzUrr1 中的代码、小错误更正（括号）和 Tapper 的实现略有不同。

为我工作。现在用scrollView实现它会很棒，如果图片更大，用户可以放大/缩小..有**什么建议吗？**

### 视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController  <UIGestureRecognizerDelegate>{
    UITapGestureRecognizer *tap;
    BOOL isFullScreen;
    CGRect prevFrame;
}
@property (nonatomic, strong) UIImageView *imageView; 

@end 
```

### 视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    isFullScreen = FALSE;
    tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imgToFullScreen)];
    tap.delegate = self;
    self.view.backgroundColor = [UIColor purpleColor];

    _imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 300, 200)];
    _imageView.contentMode = UIViewContentModeScaleAspectFill;
    [_imageView setClipsToBounds:YES];
    _imageView.userInteractionEnabled = YES;
    _imageView.image = [UIImage imageNamed:@"Muppetshow-2.png"];

    UITapGestureRecognizer *tapper = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(imgToFullScreen:)];
    tapper.numberOfTapsRequired = 1;

    [_imageView addGestureRecognizer:tapper];

    [self.view addSubview:_imageView];
}

-(void)imgToFullScreen:(UITapGestureRecognizer*)sender {
    if (!isFullScreen) {
        [UIView animateWithDuration:0.5 delay:0 options:0 animations:^{
            //save previous frame
            prevFrame = _imageView.frame;
            [_imageView setFrame:[[UIScreen mainScreen] bounds]];
        }completion:^(BOOL finished){
            isFullScreen = TRUE;
        }];
        return;
    }
    else{
        [UIView animateWithDuration:0.5 delay:0 options:0 animations:^{
            [_imageView setFrame:prevFrame];
        }completion:^(BOOL finished){
            isFullScreen = FALSE;
        }];
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-07T04:42:11.537

我最终使用了[MHFacebookImageViewer](https://github.com/michaelhenry/MHFacebookImageViewer)。集成很容易，没有子类化`UIImageView`，并且它还具有图像缩放和轻弹关闭。

虽然它需要`AFNetworking`（用于从 URL 加载更大的图像），但您可以注释掉一些代码（大约 10 行）来删除这种依赖关系。如果有人需要，我可以发布我的无 AFNetworking 版本。让我知道 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T17:11:50.020

一种可能的实现是使用具有[UIModalPresentationFullScreen](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/c/econst/UIModalPresentationFullScreen)表示样式的模态视图控制器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-16T07:24:41.053

刚刚快速完成了一个版本，只需下载并添加到您的项目中：

[GSSimpleImageView.swift](https://gist.github.com/williamhqs/13115ac665266750bd38)

和用法：

```
let imageView = GSSimpleImageView(frame: CGRectMake(20, 100, 200, 200))
imageView.image = UIImage(named: "test2.png")
self.view.addSubview(imageView) 
```

# sql - 嵌套计数查询

> ID：12481005
> 
> 赞同：1
> 
> 时间：2012-09-18T16:17:29.017
> 
> 标签：sql, count, nested-query

对于输出如下内容的查询，我需要一些帮助：

```
CityName
CITY A
CITY B
CITY C
CITY A
CITY A
CITY A
CITY C 
```

从这个例子中，每个城市的计数是：CITY A = 4 , CITY B =1 , CITY C = 2

如何在其旁边添加每个 CityName 的***（嵌套）计数***，以便输出如下所示：

```
CityName   CityCount
CITY A              4
CITY B              1
CITY C              2
CITY A              4
CITY A              4
CITY A              4
CITY C              2 
```

任何反馈将不胜感激！

* * *

我有下表，其中包含以下字段：

**城市列表** -->*城市*名称| *城镇*| *日期*

表**CitiesList**的输出如下所示：

*CityName*    |   *城镇*      |      *日期*
城市 A 城市 B 2012 年 7 月 10 日
城市 A 城市 D 2012 年 7 月 10 日
城市 B 城市 C 2012 年 7 月 11 日
城市 C 城市 C 2012 年 7 月 11 日
城市 D 城市 A 2012 年 7 月 12 日
城市 D 城市 C 2012 年 7 月 13 日
城市D 镇 B 2012 年 7 月 13 日
城市 E 镇 C 2012 年 7 月 13 日
.....

我想在此输出中添加一个额外的字段（*TownCount*），其中包含每个 TOWN 在时间垃圾邮件中出现的次数（本例中为 7 月 10 日至 7 月 13 日）。输出应如下所示：

*CityName*    |   *城镇*      |      *日期*      |      *TownCount*
城市 A 城市 B 2012 年 7 月 10 日 2
城市 A 城市 D 2012 年 7 月 10 日 1
城市 B 城市 C 2012 年 7 月 11 日 4
城市 C 城市 C 2012 年 7 月 11 日 4
城市 D 城市 2012 年 7 月 12 日 1
城市 D 城市 C 2012 年 7 月 13 日 4
城市 D 镇 B 2012 年 7 月 13 日 2
城市 E 镇 C 2012 年 7 月 13 日 4
......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:21:23.383

您没有提供有关您使用的系统类型的详细信息，但在 SQL 中您可以使用：

```
select t1.cityname, t2.CityCount
from yourtable t1
left join
(
    select count(*) CityCount, cityname
    from yourtable
    group by cityname
) t2
    on t1.cityname = t2.cityname 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8a71c/1)

根据您的编辑，您似乎想要执行以下操作：

```
select t1.cityname, t1.town, t1.date, t2.TownCount
from yourtable t1
left join
(
    select count(*) TownCount, Town
    from yourtable
    group by Town
) t2
    on t1.town = t2.town 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/2911e/2)

# iphone - UIButton 的标题颜色只能设置一次，不能设置两次

> ID：12481012
> 
> 赞同：0
> 
> 时间：2012-09-18T16:17:41.193
> 
> 标签：iphone, ios5

我像这样启动了我的按钮：

```
meetingPointButton = [UIButton buttonWithType:UIButtonTypeCustom];
[meetingPointButton setTitle:@"Alpha" forState:UIControlStateNormal];
[meetingPointButton setTitleColor:[UIColor lightGrayColor] forState:UIControlStateNormal]; 
```

之后我更改了它的标题，这样做时还想更改标题颜色。我正在使用以下代码：

```
[meetingPointButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
[meetingPointButton setTitle:@"Beta" forState:UIControlStateNormal]; 
```

标题更改为“Beta”，但其颜色仍为浅灰色。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:33:25.923

正如王子所说，使用：

```
meetingPointButton.titleLabel.textColor = [UIColor blackColor]; 
```

省略`forState:UIControlStateNormal`会使按钮立即切换，而不是在下次收到时转到 UIControlStateNormal。知道这一点，您也可以将按钮设置为`UIControlStateNormal`原始代码之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:43:27.667

试试这个：

```
 meetingPointButton.titleLabel.textColor = [UIColor blackColor]; 
```

更改文本颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T07:41:59.400

对于可能会根据标题来回答这个问题的人，当您更改标题颜色时可能看不到效果的一个原因是因为`UIButton`'s 字符串可能是`NSAttributedString`. `UIButton`具有为标题设置属性字符串的特殊方法，当设置标题时，设置标题文本颜色无效。您需要更改属性标题`NSAttributedString`。

# ftp - SSIS：使用脚本从 FTP 站点下载文件错误

> ID：12481013
> 
> 赞同：0
> 
> 时间：2012-09-18T16:17:41.450
> 
> 标签：ftp, ssis

我在 Windows 7 上使用 SSIS 2008。我正在尝试从站点下载文件。我能够连接到该站点，并且在检查连接是否成功时得到了正确的结果。但是，当我调用 ftp.GetListing 方法时，它会跳转到代码的错误处理部分。我能从中得到的唯一错误如下：

从即时窗口：

Microsoft.SqlServer.ManagedDTS.dll 中出现了“System.Runtime.InteropServices.COMException”类型的第一次机会异常

从我的 try catch 块中的消息框中：

HRESULT 异常：0xC001602A

我已经检查并允许 SSIS 调试主机通过防火墙。（它提示我第一次运行包。）

我已经尝试了几个具有相同结果的 FTP 站点。

谢谢，

# perl - 读取制表符分隔文件并计算出现次数并删除行

> ID：12481020
> 
> 赞同：0
> 
> 时间：2012-09-18T16:18:19.140
> 
> 标签：perl, awk

我对编程和尝试解决这个问题相当陌生。我有这样的文件。

```
CHROM    POS     REF     ALT    10_sample.bam   11_sample.bam   12_sample.bam   13_sample.bam   14_sample.bam   15_sample.bam   16_sample.bam 
tg93    77  T   C   T   T   T   T           T
tg93    79  C   -   C       C   C   -   -   
tg93    79  C   G   C   C   C   C   G       C
tg93    80  G   A   G   G   G   G   A   A   G
tg93    81  A   C   A   A   A   A   C   C   C
tg93    86  C   A   C   C   A   A   A   A   C
tg93    105 A   G   A   A   A   A   A   G   A
tg93    108 A   G   A   A   A   A   G   A   A
tg93    114 T   C   T   T   T   T   T   C   T
tg93    131 A   C   A   A   A   A   A   A   A
tg93    136 G   C   C   G   C   C   G   G   G
tg93    150 CTCTC   -       CTCTC       -   CTCTC       CTCTC 
```

在这个文件中，在标题中

CHROM - 名称 POS - 位置 REF - 参考 ALT - 备用 10 - 16_sample.bam - 采样 I

现在我想看看 REF 和 ALT 列中的字母出现了多少次。如果其中任何一个重复少于两次，我需要删除该行。

例如，在第一行中，我在 REF 中有“T”，在 ALT 中有“C”。我在 7 个样本中看到，有 5 个 T 和 2 个空白，没有 C。所以我需要删除这一行。

在第二行，REF 是“C”，Alt 是“-”。现在在七个样本中，我们有 3 个 C、2 个“-”和 2 个空白。所以我们将这一行保留为 C 并且 - 重复了 2 次以上。我们总是在数数时忽略空格

过滤后的最终文件是

```
#CHROM   POS     REF     ALT    10_sample.bam   11_sample.bam   12_sample.bam   13_sample.bam   14_sample.bam   15_sample.bam   16_sample.bam 
tg93    79  C   -   C       C   C   -   -   
tg93    80  G   A   G   G   G   G   A   A   G
tg93    81  A   C   A   A   A   A   C   C   C
tg93    86  C   A   C   C   A   A   A   A   C
tg93    136 G   C   C   G   C   C   G   G   G 
```

我能够将列读取到数组中并在代码中显示它们，但我不确定如何启动循环来读取基数并计算它们的出现次数并保留列。谁能告诉我应该如何处理这个？或者，如果您有任何我可以修改的示例代码，这将很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:18:18.613

```
#!/usr/bin/env perl
use strict;
use warnings;

print scalar(<>);                   # Read and output the header.

while (<>) {                        # Read a line.
   chomp;                           # Remove the newline from the line.
   my ($chrom, $pos, $ref, $alt, @samples) =
      split /\t/;                   # Parse the remainder of the line.

   my %counts;                      # Count the occurrences of sample values.
   ++$counts{$_} for @samples;      # e.g. Might end up with $counts{"G"} = 3.

   print "$_\n"                     # Print line if we want to keep it.
      if ($counts{$ref} || 0) >= 2  # ("|| 0" avoids a spurious warning.)
      && ($counts{$alt} || 0) >= 2;
} 
```

输出：

```
CHROM    POS     REF     ALT    10_sample.bam   11_sample.bam   12_sample.bam   13_sample.bam   14_sample.bam   15_sample.bam   16_sample.bam 
tg93    79  C   -   C       C   C   -   -   
tg93    80  G   A   G   G   G   G   A   A   G
tg93    81  A   C   A   A   A   A   C   C   C
tg93    86  C   A   C   C   A   A   A   A   C
tg93    136 G   C   C   G   C   C   G   G   G 
```

您在所需的输出中包含了 108，但它在七个样本中只有一个 ALT 实例。

用法：

```
perl script.pl file.in >file.out 
```

或就地：

```
perl -i script.pl file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:04:39.927

这是一种不假设字段之间的制表符分隔的方法

```
use IO::All;
my $chrom = "tg93";
my @lines = io('file.txt')->slurp;
foreach(@lines) {
    %letters = ();

    # use regex with backreferences to extract data - this method does not depend on tab separated fields
    if(/$chrom\s+\d+\s+([A-Z-\s])\s{3}([A-Z-\s])\s{3}([A-Z-\s])\s{3}([A-Z-\s])\s{3}([A-Z-\s])\s{3}([A-Z-\s])\s{3}([A-Z-\s])\s{3}([A-Z-\s])\s{3}([A-Z-\s])/) {

        # initialize hash counts
        $letters{$1} = 0;
        $letters{$2} = 0;

        # loop through the samples and increment the counter when matches are found
        foreach($3, $4, $5, $6, $7, $8, $9) {
            if ($_ eq $1) {
                ++$letters{$1};
            }
            if ($_ eq $2) {
                ++$letters{$2};
            }
        } 

        # if the counts for both POS and REF are greater than or equal to 2, print the line
        if($letters{$1} >= 2 && $letters{$2} >= 2) {
            print $_;
        }
    }
} 
```

# sql - 具有多个内部联接的 SQL 更新

> ID：12481023
> 
> 赞同：0
> 
> 时间：2012-09-18T16:18:31.153
> 
> 标签：sql, sql-server, sql-update, inner-join

使用 MSSQL

寻找确认我的代码是否正确。问是因为我理解如果语句不正确可能会弄乱 SQL 数据库。

```
 query = ('UPDATE ProjectBridge.JobNumber, ProjectOffice.ProjectName,Client.ClientName'
         'SET ProjectBridge.JobNumber = '1205665', 
          ProjectOffice.ProjectName = 'The new name',
          Client.ClientName = 'New Client',
         'FROM ProjectBridge '
         'INNER JOIN ProjectOffice '
         'ON ProjectBridge.PJBId=ProjectOffice.PJBId '
         'INNER JOIN Client '
         'ON ProjectOffice.ClientId=Client.ClientId '
         'WHERE ProjectBridge.JobNumber LIKE '1205666%') 
```

我也见过：

```
'UPDATE ProjectBridge.JobNumber as Val1'
'SET Val1 = 1205665' 
```

这是“as”语句的正确用法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:25:22.917

首先，您不能一次更新**多个**表。`UPDATE`即使您被允许连接表，每个命令也只能更新一个表。其次，您的更新语句在语法上有错误。语句中应该总是有一个`SET`子句`update`。如果您有多个要更新的列，请用逗号分隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:23:48.610

如果您想在不实际更改任何内容的情况下测试您的更新语句，但要查看它是否可以编译以及它会影响多少行，请尝试以下操作：

```
query = ('UPDATE ProjectBridge.JobNumber, ProjectOffice.ProjectName,Client.ClientName'
         'SET ProjectBridge.JobNumber = ProjectBridge.JobNumber, 
         'SET ProjectOffice.ProjectName = ProjectOffice.ProjectName,
         'SET Client.ClientName = Client.ClientName, 
```

# php - 控制器作为应用程序中的服务“在非对象上调用成员函数 has()”

> ID：12481025
> 
> 赞同：1
> 
> 时间：2012-09-18T16:18:36.927
> 
> 标签：php, web-applications, symfony, controller, bundle

我正在 Symfony 用户 Varspool/WebsocketBundle 中做我的第一个 WebSocket 应用程序。我需要为投票服务器端插入数据。为此，我制作了一个控制器，当用户选择投票答案时，它会在数据库中插入数据。

遵循此文档：[http](http://symfony.com/doc/2.0/cookbook/controller/service.html) ://symfony.com/doc/2.0/cookbook/controller/service.html我有一个“调用未定义的方法 forward()”错误。应该是因为我在应用程序中而不是在控制器中

我看到很多事情，比如在控制器中重新启动内核，还有很多其他奇怪的事情，比如：

```
$kernel = new \AppKernel('dev', true);
$kernel->loadClassCache();
$kernel->boot();
$controller->setContainer($kernel->getContainer()); 
```

**[编辑]** 我向您展示了我最后一次尝试显示**“对非对象上的成员函数 has() 的调用”**（我不太了解 oO）

**我的控制器即服务**

**Edit1 - 更新 __construct**

```
use Doctrine\ORM\EntityManager;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Krum\AGBundle\Application\ExempleApplication;
use Krum\AGBundle\Form\AGVoteSetType;
use Krum\AGBundle\Form\AGVoteAffichType;
use Krum\AGBundle\Form\AGVoteType;
use Krum\AGBundle\Entity\AGDummy;
use Krum\AGBundle\Entity\AGVote;
use Krum\AGBundle\Entity\AGReponse;
use Krum\AGBundle\Entity\AGScrutin;
use Krum\KBundle\Entity\Users;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;

use Symfony\Component\DependencyInjection\ContainerInterface;

class AGServicesController extends Controller {

    protected $em;    

    public function __construct($entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function get($service){           
        return $this->container->get($service);
    }

   public function voteeffective($vote, $reponse, $users) {
       $em = $this->em;
       $userbyFOS = $em->createQueryBuilder('u')
              ->select('u')
              ->from('KrumKBundle:Users', 'u')
              ->leftJoin('u.utilisateur', 'ut')
              ->where('ut.id = ?1')
              ->setParameter(1, $users)
              ->getQuery();
      $user = $userbyFOS->getOneOrNullResult();      
      $userstatus = $em->createQueryBuilder('scru')
              ->select('scru')
              ->from('KrumAGBundle:AGScrutin', 'scru')
              ->where('scru.users = ?1')
              ->andWhere('scru.AGVote = ?2')
              ->andWhere('scru.AGReponse = ?3')
              ->setParameters(array(
                      1 => $user,
                      2 => $vote,
                      3 => $reponse
                      ))
              ->getQuery();
       $stat = $userstatus->getResult();

      if ($stat == NULL) {
         $votety = $em->getRepository('KrumAGBundle:AGVote')->findOneById($vote);
         $reponsety = $em->getRepository('KrumAGBundle:AGReponse')->findOneById($reponse);

         $scrutinty = new AGScrutin();
         $scrutinty->setAGReponse($reponsety);
         $scrutinty->setAGVote($votety);
         $scrutinty->setUsers($user);
         $scrutinty->setType("AGScrutin");
         $em->persist($scrutinty);
         $em->flush();

         return "vote-ok:".$scrutinty->getId();
      } else {
         return "vote-false";
      }
    }  

} 
```

**我的应用程序（WebSocket 服务器）**

```
namespace Krum\AGBundle\Application;

use Varspool\WebsocketBundle\Application\Application;
use Varspool\WebsocketBundle\Application\NamedApplication;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use  Krum\AGBundle\Controller\AGServicesController;

class ExempleApplication extends Application {

   protected $clients = array();

   public function onData($data, $client) {
      foreach ($this->clients as $sendto) {
         $scrutin = (json_decode($data) != NULL) ? true : false;
             if ($scrutin == true ){   
                 $vote = $scrutin["AGVote"];
                 $reponse = $scrutin["AFreponse"] ;
                 $users = $scrutin["users"];
             $scrutinservice = new AGServicesController();
             $scrutinsend = $controller->voteeffective($vote, $reponse, $users);

             $sendto->send($scrutinsend);
              }
            }
     else
        $sendto->send($data);

   }
 }
} 
```

**我的 config.yml**

```
parameters:
    agservices.class:      Krum\AGBundle\Controller\AGServicesController

services :
  agservices:
    class : %agservices.class%
    arguments :
      container : "@service_container" 
```

**服务.yml**

**编辑 1：serices.yml 配置**

```
krum.agservices:
    class: Krum\AGBundle\Controller\AGServicesController    
    arguments: ["@doctrine.orm.default_entity_manager"] 
```

所有的答案是或想法是可观的！

谢谢你的收看；）

**编辑 1：现在，我有另一个 ExceptionError

> 警告：缺少 Krum\AGBundle\Controller\AGServicesController::__construct() 的参数 1，在第 62 行的 /opt/lampp/htdocs/Krum/src/Krum/AGBundle/Application/ExempleApplication.php 中调用并在 /opt/ 中定义lampp/htdocs/Krum/src/Krum/AGBundle/Controller/AGServicesController.php 第 34 行 *

我认为 services.yml 应该自动添加正确的学说实体管理器的参数，或者它只是指定参数的类型，我必须在调用控制器时手动添加它？

# jquery - jQuery显示页面的一部分

> ID：12481030
> 
> 赞同：0
> 
> 时间：2012-09-18T16:18:47.860
> 
> 标签：jquery, html

我正在尝试使用 jQuery 显示网站的一部分，在此示例菜单文本中。我写了这段代码：

```
<html>
<head>
  <style>
 body{ font-size: 12px; font-family: Arial; }
 #new-nav{width: auto; height: 200px;}
 </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<b>Menu:</b>
<ol id="new-nav"></ol>

<script>
  $("#new-nav").load("http://site.com/ #hmenus");
</script>

</body>
</html> 
```

代码语法正确，但代码不起作用，不显示文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:21:54.883

出于安全考虑，您无法从其他域加载内容。请参阅：[http](http://en.wikipedia.org/wiki/Same_origin_policy) ://en.wikipedia.org/wiki/Same_origin_policy 您可以通过查看浏览器控制台窗口来验证这一点。

还有为什么你的 URL 末尾有 #hmenus”。

# sql - 获取一周的第一天（星期日）

> ID：12481031
> 
> 赞同：0
> 
> 时间：2012-09-18T16:18:50.013
> 
> 标签：sql, sql-server, tsql, date

我的专栏中有这个公式来计算给定一周的开始日期：

```
dateadd(week,[Week]-(1),
 dateadd(day,(-1),
  dateadd(week,
   datediff(week,(0),
    CONVERT([varchar](4),[Year],(0))+'-01-01'),
     (1)))) 
```

其他字段在哪里`Week`和在哪里？`Year``38``2012`

问题是，它将 38/2012 周的开始日期计算为星期一（9 月 17 日），我希望它是星期日（9 月 16 日）这可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:09:49.003

这将返回一周的第一天，给定周数和年份，假设一周的第一天是星期日。
标准排除适用，例如不要尝试 1499 年。

```
declare @tbl table ([Week] int, [Year] int)
insert @tbl select 38,2012
  union all select  1,2012
  union all select  0,2012
  union all select  1,2013

select DATEADD(
    Week,
    [Week]-1,
    DATEADD(
        Day,
        (8-@@datefirst)-DATEPART(dw, CAST([Year]*10000+101 AS VARCHAR(8))),
        CAST([Year]*10000+101 AS VARCHAR(8))))
from @TBL 
```

结果

```
2012-09-16 00:00:00.000
2012-01-01 00:00:00.000
2011-12-25 00:00:00.000
2012-12-30 00:00:00.000 
```

请注意，周数从 1 开始，如果该周不是从星期日开始，那么该周的第一天可能会在较早的一年结束（第 4 行）。因为周是相对的，所以您可以使用第 0 周、-1 等，它仍然会给您一个结果（第 3 行），无论对错。

您可能还注意到我使用了另一种方法来创建一年中的日期，作为一种替代方法。

* * *

无论您的设置如何，查询 的`(8-@@datefirst)`一部分都使其健壮。`DATEFIRST`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:42:26.830

[如果您希望一周的第一天是星期日，您可以使用DATEFIRST 设置](http://msdn.microsoft.com/en-us/library/ms181598.aspx)更改您的数据库以使其如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T06:30:17.043

```
 function getFirstDateOfThisWeek(d)
    {
        var TempDate = new Date(d || new Date());            
        TempDate.setDate(TempDate.getDate() + (@Config.WeekStartOn - 1 - TempDate.getDay() - 7) % 7);            
        return TempDate;
    }

    var StartDate = getFirstDateOfThisWeek(new Date()); //1st date of this week 
```

# php - NicEdit 数据不在 POST 中

> ID：12481032
> 
> 赞同：5
> 
> 时间：2012-09-18T16:18:51.497
> 
> 标签：php, html, nicedit

我确定我在这里错过了一些非常简单的东西，我已经搜索过并且似乎找不到答案。

有了这个简单的表格。如何从 NicEdit 框中获取内容到我的 HTTP POST。我得到的只是原始文本区域值，而不是编辑后的版本。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title></title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<h2>Test Page</h2>
<script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
<script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>
<table class="form">
<form action="test.php" enctype="multipart/form-data" method="POST">
<tr> 
    <td><textarea rows="10" cols="100" name="3">A long time ago in a galaxy far, far away...</textarea></td>
</tr>
<tr>
    <td align="center" style="padding-bottom: 10px;"><input type="submit" onclick="window.scrollTo(0,0)" name="update" value="Save Changes"></td>
</tr>
</form>
</table>
<?
print_r($_REQUEST); 
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-23T16:13:59.420

看看我是怎么解决的：

```
<textarea id="area1" name="content"></textarea>
<INPUT type=submit name="submit" value="Send" onclick="nicEditors.findEditor('area1').saveContent();"> 
```

# c# - 如何像使用 OAuth 的小部件一样保护客户端脚本？

> ID：12481037
> 
> 赞同：1
> 
> 时间：2012-09-18T16:19:02.713
> 
> 标签：c#, javascript, asp.net-mvc, oauth

我创建了一个包含在显示特定信息的 js 脚本文件中的小部件，该小部件对特定服务器执行 json 调用，我想将小部件分发给特定的用户列表。如何保护我的小部件以防止它被嵌入相同客户端代码的其他用户使用？OAuth 是保护它的有效方法吗？我应该如何定义 OAuth 的实现？

该实现使用 c# 和 asp.net mvc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:43:16.417

没有把握。OAuth 只是用户身份验证的另一种方式。如果我理解客户端代码中的小部件正在从不在您的域和您的控制范围内的其他特定服务器获取数据，您能否更具体地了解该小部件。如果我错了并且该服务器在您的控制之下，那么如果您现在哪些用户可以访问特定数据，我不确定问题是什么，那么您可以通过多种方式允许或阻止它们。

# jquery - 使用 jQuery 返回特定元素的集合

> ID：12481043
> 
> 赞同：0
> 
> 时间：2012-09-18T16:19:32.320
> 
> 标签：jquery

如何使用 jQuery`li`从第二项 () 开始获取所有元素？`level_2`

```
<ul>
    <li class="item level_1">text1</li>
    <li class="item level_2">text2</li>
    <li class="item level_3">text3</li>
    <li class="item level_4">text4</li>
    <li class="item level_3">text5</li>
    <li class="item level_2">text2</li>
    <li class="item level_3">text3</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:21:09.047

研究使用[`nextAll()`](http://api.jquery.com/nextAll/).

```
$("li").eq(0).nextAll("li"); 
```

这将选择`<li>`从第二个开始的所有 s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:21:41.450

有几种方法可以过滤元素列表，在这种情况下`.not`对您来说效果很好。

```
$('li').not(':first-child'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:22:12.930

使用第 n 个孩子：

```
$('li.item:nth-child(n+1)'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T16:22:56.660

您可以使用[:gt()](http://api.jquery.com/gt-selector/)选择器并选择所有`li`索引大于零的：

```
$('li:gt(0)') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T16:25:47.437

我更喜欢使用`.slice`.

```
var $li = $('ul li');
var $li_from_second = $li.slice(1); 
```

# android - 布局中定义的 TabHost 在 setContent 期间给出 NullPointerException

> ID：12481045
> 
> 赞同：5
> 
> 时间：2012-09-18T16:19:42.010
> 
> 标签：android, tabs, android-tabhost, android-tabs

我正在尝试`Tabs1.java`从 Android API Demos 16（并在 API 16 模拟器上运行）进行修改以使用标准`Activity`而不是已弃用的[`TabActivity`](http://developer.android.com/reference/android/app/TabActivity.html)类。我创建了一个新的布局文件并修改了代码。

我尝试使用这种方法而不是操作栏的原因是选项卡不适用于整个屏幕，仅适用于较小的子视图。

当我**执行**代码时，我在执行以下行时得到了一个`NullPointerException`内部 Android方法：`setContent`

`tabHost.newTabSpec("tab1").setIndicator("tab1").setContent(R.id.view1)`

任何想法为什么会发生这种情况？完整的堆栈跟踪在代码和布局之后。

**`Tabs1VanillaActivity.java`：**

```
public class Tabs1 extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabs1);
        TabHost tabHost = (TabHost) findViewById(R.id.tabhost);

        tabHost.addTab(tabHost.newTabSpec("tab1")
                .setIndicator("tab1")
                .setContent(R.id.view1));
        tabHost.addTab(tabHost.newTabSpec("tab3")
                .setIndicator("tab2")
                .setContent(R.id.view2));
        tabHost.addTab(tabHost.newTabSpec("tab3")
                .setIndicator("tab3")
                .setContent(R.id.view3));
    }
} 
```

**tabs1.xml：**

```
 <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView goes here!"
        tools:ignore="HardcodedText" />

    <TabHost
        android:id="@+id/tabhost"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <FrameLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <TextView
                    android:id="@+id/view1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="@drawable/blue"
                    android:text="@string/tabs_1_tab_1" />

                <TextView
                    android:id="@+id/view2"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="@drawable/red"
                    android:text="@string/tabs_1_tab_2" />

                <TextView
                    android:id="@+id/view3"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:background="@drawable/green"
                    android:text="@string/tabs_1_tab_3" />
            </FrameLayout>
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

**堆栈跟踪：**

```
09-18 16:18:22.968: E/AndroidRuntime(1191): FATAL EXCEPTION: main
09-18 16:18:22.968: E/AndroidRuntime(1191): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.apis/com.example.android.apis.view.Tabs1}: java.lang.NullPointerException
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.os.Looper.loop(Looper.java:137)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at java.lang.reflect.Method.invokeNative(Native Method)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at java.lang.reflect.Method.invoke(Method.java:511)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at dalvik.system.NativeStart.main(Native Method)
09-18 16:18:22.968: E/AndroidRuntime(1191): Caused by: java.lang.NullPointerException
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:617)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:612)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.widget.TabHost$TabSpec.setContent(TabHost.java:461)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at com.example.android.apis.view.Tabs1.onCreate(Tabs1.java:42)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.app.Activity.performCreate(Activity.java:4465)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-18 16:18:22.968: E/AndroidRuntime(1191):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
09-18 16:18:22.968: E/AndroidRuntime(1191):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T16:49:08.713

您必须`tabHost.setup()`在尝试添加选项卡之前调用。

[http://developer.android.com/reference/android/widget/TabHost.html#setup()](http://developer.android.com/reference/android/widget/TabHost.html#setup())

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T16:51:05.863

我在[`TabHost`文档](http://developer.android.com/reference/android/widget/TabHost.html#setup%28%29)`tabHost.setup()`中发现，如果您不使用，显然您需要调用`TabActivity`：

> 如果使用 `setup()`加载，请在添加选项卡之前调用。**但是**：您不需要在in之后 调用。例子：`TabHost``findViewById()`**`setup()``getTabHost()``TabActivity`**

 **```
mTabHost = (TabHost)findViewById(R.id.tabhost);
mTabHost.setup();
mTabHost.addTab(TAB_TAG_1, "Hello, world!", "Tab 1"); 
```**

# .htaccess - 自动将虚拟文件夹名称附加到基本 URL 的末尾

> ID：12481047
> 
> 赞同：1
> 
> 时间：2012-09-18T16:20:00.580
> 
> 标签：.htaccess, mod-rewrite

看看这个示例虚拟主机片段：

```
<VirtualHost *:80>
    DocumentRoot /web/content
    ServerName   me.example.com
</VirtualHost> 
```

假设*/web/content*包含 2 个文件，*index.html*和*page.html* ，以及一个包含*yellow.html*的子目录*colors*。*index.html*包含和 之类的链接，用于引用 Web 根目录。**`href="/page.html"``href="/colors/yellow.html"``/`**

 **有没有办法在内部使用**me.example.com/test/**作为网站的**根目录**？换句话说，当用户访问[http://me.example.com/test/](http://me.example.com/test/)时，我想获取*/web/content/index.html*。因此，URL 中的*/test/*本质上是一个虚拟的“文件夹”。

基本上，我希望 me.example.com/test 能够完全按照子域（例如*test.me.example.com*）的方式运行。设置之类的东西`ServerName me.example.com/test`（但我知道那不起作用）。

我知道我可以简单地创建一个 REAL 文件夹*/web/content/test*并将所有内容放在那里，但这会破坏我以 a 开头的链接`/`，因为它们仍然会将*/web/content*称为网络根目录。添加类似的指令时会出现同样的问题`Alias /test /web/content`。

我在这里有什么选择吗？也许以某种方式使用 RewriteBase？（我尝试了一些没有运气的事情。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:04:43.023

尝试将其放入文档根目录的 htaccess 文件中

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/test/(.*)$
RewriteCond %{DOCUMENT_ROOT}/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1 -d
RewriteRule ^ /%1 [L] 
```

这会将`/test/`URI 路径映射到文档根目录。如果你想说，将其映射到颜色文件夹，你会这样做：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/test/(.*)$
RewriteCond %{DOCUMENT_ROOT}/colors/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/colors/%1 -d
RewriteRule ^ /colors/%1 [L] 
```**

# java - 如何在 JMenu 中激活 ActionEvent 以在框架上显示新面板？（基本）

> ID：12481048
> 
> 赞同：1
> 
> 时间：2012-09-18T16:20:10.387
> 
> 标签：java, swing, jframe, jpanel, jmenu

我刚开始自学摇摆，我有点困惑为什么我的活动在这里不起作用：

1.如果用户单击菜单栏->加载，我会尝试从面板中删除所有内容，但这会迫使我将面板更改为最终面板，因为我在事件中使用它！

2.我在我的活动中定义了新面板并定义了另外两个容器以添加到该面板，然后将其添加到主框架，但似乎什么也没发生！

如果您能找出问题所在，请帮助我。提前为凌乱的代码道歉。我很感激任何提示。

```
public class SimpleBorder {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                myFrame frame = new myFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true); 
            }
        });
    }
}

class MyFrame extends JFrame {

    public MyFrame()
    {

        setSize(500,500);   
        JPanel panel = new JPanel();

        panel.setLayout(null);
        JLabel label = new JLabel("my name is bernard...");
        Color myColor = new Color(10, 150, 80);
        panel.setBackground(myColor);
        label.setFont(new Font("Serif", Font.PLAIN, 25));
        Dimension size = label.getPreferredSize();
        Insets insets = label.getInsets();
        label.setBounds(85+insets.left, 120+insets.top , size.width, size.height);

        panel.add(label);

        JMenuBar menu = new JMenuBar();
        setJMenuBar(menu);

        JMenu col = new JMenu("Collection");
        menu.add(col);

        JMenu help = new JMenu("Help");
        menu.add(help);

        Action loadAction = new AbstractAction("Load")//menu item exit goes here
        {
            private static final long serialVersionUID = 1L;
            public void actionPerformed(ActionEvent event)
            {
                JTextArea text = new JTextArea(10, 40);
                JScrollPane scrol1 = new JScrollPane(text);
                String[] items = {"A", "B", "C", "D"};          
                JList list = new JList(items);
                JScrollPane scrol2 = new JScrollPane(list);
                JPanel panel2 = new JPanel(new BorderLayout());
                panel2 = new JPanel(new GridLayout(1, 2 ));
                panel2.add(scrol1,BorderLayout.WEST);
                panel2.add(scrol2,BorderLayout.EAST);
                add(panel2);        
            }
        };
        JMenuItem load = new JMenuItem(loadAction);
        col.add(load);
        add(panel);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:43:45.757

添加新面板后在您的实例上调用`revalidate()`/ ：`repaint()``JFrame`

```
JPanel panel2 = new JPanel(new BorderLayout());
// panel2 = new JPanel(new GridLayout(1, 2 ));//why this it will overwrite the above layout
panel2.add(scrol1,BorderLayout.WEST);
panel2.add(scrol2,BorderLayout.EAST);
add(panel2);  
revalidate();
repaint(); 
```

还要调用`pack()`您的`JFrame`实例，以便所有组件都由布局管理器隔开。正如评论中所说，不要扩展 JFrame 类，创建框架的变量并在框架实例上启动您需要的所有内容，并且不要将布局设置为 null，除非您喜欢努力工作：P

或者，正如 mKorbel 所提到的，[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)可能更符合您的需求，它允许您使用单个`JPanel`并在其他/新的之间切换：

```
JPanel cards;
final static String BUTTONPANEL = "Card with JButtons";
final static String TEXTPANEL = "Card with JTextField";

//Where the components controlled by the CardLayout are initialized:
//Create the "cards".
JPanel card1 = new JPanel();
...
JPanel card2 = new JPanel();
...

//Create the panel that contains the "cards".
cards = new JPanel(new CardLayout());
cards.add(card1, BUTTONPANEL);
cards.add(card2, TEXTPANEL);

//add card panel to frame
frame.add(cards);

//swap cards
CardLayout cl = (CardLayout)(cards.getLayout());//get layout of cards from card panel
cl.show(cards, TEXTPANEL);//show another card 
```

# android - 直播音频

> ID：12481049
> 
> 赞同：0
> 
> 时间：2012-09-18T16:20:12.587
> 
> 标签：android, audio-streaming, http-live-streaming, live-streaming

我需要将音频流式传输到我的应用程序，因为它正在被实时录制。我如何为 Android 执行此操作？我已经搜索了一些资源，但没有得到关于如何做到这一点的直接答案。

官方文档说 Android 在 Android 3.0+ 中支持通过 http/https 进行直播。我需要能够流式传输到 2.3+ 的设备。任何建议都会帮助我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T00:53:45.723

我会建议实施一个 icecast/shoutcast 服务器。你可以在这个问题上找到一些关于如何在 Android 端做的提示：[Icecast/shoutcast streaming on Android](https://stackoverflow.com/questions/2568665/icecast-shoutcast-streaming-on-android)

# mongodb - 无法获取函数外的查询结果

> ID：12481053
> 
> 赞同：0
> 
> 时间：2012-09-18T16:20:28.423
> 
> 标签：mongodb, coffeescript, mongoose

我有这个类，我尝试用查询结果初始化数组属性：

```
class data
minute: []
hour:   []
constructor:    () ->
    findMin = events.find({"aggr":"minute"}).sort({$natural:-1}).limit(120)
    findHour = events.find({"aggr":"hour"}).sort({$natural:-1}).limit(14)
    findMin.execFind (errMin, resMin) ->
        for recMin in resMin
            @minute.push recMin
    findHour.execFind (errH, resH) ->
        for recH in resH
            @hour.push recH 
```

所以我调用`smth = new data()`并`console.log smth`得到一个空属性和一个关于未定义没有“推送”方法的错误。虽然我能理解一个错误，但我不明白为什么我的数组是空的。不要误会我的意思——我知道这个错误会导致它们为空，但我尝试了几种变体。我阅读了有关 acync 和回调的信息，但仍然不知道如何使用回调而不是“警报”，而是在之后使用它。如果您可以帮助我或提供一些链接，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:47:03.250

我假设您想要`minute`并`hour`成为实例变量？它们必须在构造函数中初始化。你现在这样做的方式，他们在 上`prototype`，所以它不能正常工作。尝试这个：

```
class data
  constructor:    () ->
    @minute = []
    @hour = []
    findMin = events.find({"aggr":"minute"}).sort({$natural:-1}).limit(120)
    findHour = events.find({"aggr":"hour"}).sort({$natural:-1}).limit(14)
    findMin.execFind (errMin, resMin) =>
        for recMin in resMin
            @minute.push recMin
    findHour.execFind (errH, resH) =>
        for recH in resH
            @hour.push recH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T21:45:18.473

你有两个问题。导致您观察到的错误的原因是两个回调中的“@”未绑定到您的`data`实例，因此您需要使用`=>`. 其次，正如@AaronDufour 所指出的，您的`hour`和`minute`数组是在类级别声明的，因此它们将在 的每个实例之间共享`data`，我怀疑这是您想要的，因此您需要将它们移动到您的构造函数中。

```
class data
  constructor: () ->
    @minute = []
    @hour = []

    findMin = events.find({"aggr":"minute"}).sort({$natural:-1}).limit(120)
    findHour = events.find({"aggr":"hour"}).sort({$natural:-1}).limit(14)

    findMin.execFind (errMin, resMin) =>
      for recMin in resMin
        @minute.push recMin
    findHour.execFind (errH, resH) =>
      for recH in resH
        @hour.push recH 
```

# android - Android操作栏/导航栏

> ID：12481054
> 
> 赞同：0
> 
> 时间：2012-09-18T16:20:38.533
> 
> 标签：android

某处的指导方针是“操作栏”和“导航栏”的大小应该是多少？我发现只有图标指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:31:54.007

检查此链接：[Metrics and Grids](http://developer.android.com/design/style/metrics-grids.html#examples)。

它列出了 ActionBar 和导航栏的近似大小（以 dp 为单位）。

# ruby-on-rails - config.consider_all_requests_local 设置为 true 而没有完整的跟踪

> ID：12481059
> 
> 赞同：2
> 
> 时间：2012-09-18T16:21:07.143
> 
> 标签：ruby-on-rails

我今天正在开发一个新应用程序，这是我的**Gemfile**：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Static pages
gem 'high_voltage', '0.9.2'

# Dry Controller
gem 'coast'

# Light Views
gem 'slim'
gem 'formtastic'

# Uploading
gem 'paperclip'

# Authentication
gem 'devise'
gem 'cancan'

# Easing models
gem 'enumerize'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git'
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
group :test, :development do
  gem 'sqlite3'
  gem 'awesome_print'
  # For slim genetaror instead default
  gem 'slim-rails'
  gem 'factory_girl_rails', '~> 4.0'
  gem 'forgery'
end

gem 'jquery-rails' 
```

**这是我的environment/development.rb**的摘录：

```
config.cache_classes = false
config.whiny_nils = true
config.consider_all_requests_local       = true
config.action_controller.perform_caching = false
config.action_mailer.raise_delivery_errors = false
config.active_support.deprecation = :log
config.action_dispatch.best_standards_support = :builtin
config.active_record.mass_assignment_sanitizer = :strict
config.active_record.auto_explain_threshold_in_seconds = 0.5
config.assets.compress = false
config.assets.debug = true

Slim::Engine.set_default_options pretty: true, sort_attrs: false 
```

当我转到一个有错误的页面时，例如这个：

```
p
  = @project.envelopedd 
```

我收到 500 页错误，而不是正常的调试跟踪。有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-11T15:41:17.023

这是 Rails 文档中的一个“错误”。我刚才也被这个烫伤了。Rails repo 上有一个 PR open 来解决文档问题。

TL;DR: 是你需要实现`show_detailed_exceptions?`而不是`local_request?`

# iphone - drawRect 不反映对图层所做的更改

> ID：12481063
> 
> 赞同：4
> 
> 时间：2012-09-18T16:21:23.523
> 
> 标签：iphone, objective-c, ios, cocoa-touch

`UITableView`我正在使用的有一个自定义`UItableViewCell`. 这个自定义单元格有一个子视图（一个 UIView 子类）。我使用`drawRect`自定义 UIView 子类的来放置单元格要显示的所有文本。

在`drawRect`（`UIView`子类）中，我执行以下操作

```
/*
// This piece of code is called when setNeedsDisplay is called
*/
- (void)drawRect:(CGRect)rect
{

    self.layer.cornerRadius = 10.0f;
    self.layer.backgroundColor = [[UIColor orangeColor] CGColor];
    self.layer.borderColor = [[UIColor lightGrayColor] CGColor];
    self.layer.borderWidth = 3.0f;
} 
```

但是我的自定义单元格是这样的黑色方块

![在此处输入图像描述](../Images/44fb03c336980fe815f8ed6ff8d6ee7a.png)

但如果我选择该行，我确实看到了预期的行为。如下图所示

![在此处输入图像描述](../Images/03ac87b9cb77969e0f0a6bbef38e43c4.png)

这是怎么回事 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:52:34.027

你的`drawRect:`方法不画任何东西；您放入其中的代码属于您的`initWithFrame:`实现。

您应该在初始化程序中操作层配置；在你的`drawRect:`你应该`CGContextRef`根据视图的状态调用你的函数。例如，绘制一些您将使用的文本，`CGContextShowTextAtPoint`绘制一些您将使用的线条`CGContextAddLineToPoint`，等等。

有关您的和之间关系的信息，请参阅[此问题](https://stackoverflow.com/q/4979192/335858)。`drawRect:``CALayer``UIView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:24:37.047

尝试使用禁用单元格的选择突出显示

```
[cell setSelectionStyle:UITableViewCellSelectionStyleNone]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:40:31.960

尝试在你的（被覆盖的那个）初始化期间设置`self.layer.masksToBounds = YES`和（也许） 。（见[这个问题](https://stackoverflow.com/questions/7078911/uiview-layer-rounded-corners-and-drawrect)）`self.opaque = NO``UIView``drawRect`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-21T13:05:39.807

你犯了一个错误：

请转到 UItableViewCell 中的视图并检查背景颜色，它可能是黑色或其他颜色，将其重置为清除颜色，然后检查您的结果，

# web-services - 使用 jaxws 导致 Provider weblogic.webservice.core.soap.MessageFactoryImpl not found

> ID：12481065
> 
> 赞同：0
> 
> 时间：2012-09-18T16:21:26.283
> 
> 标签：web-services, web-applications, soap, weblogic, jax-ws

我们使用 jaxws-maven-plugin 创建了一个 Web 服务客户端，并验证了 WAR 文件在我们的测试环境中工作。但是，在将相同的 WAR 文件移动到生产环境后，它现在会产生以下错误：

```
Caused by: javax.xml.soap.SOAPException: Unable to create message factory for SOAP:
Provider weblogic.webservice.core.soap.MessageFactoryImpl not found
       at javax.xml.soap.MessageFactory.newInstance(MessageFactory.java:116) 
```

有没有人看到这个，它是如何解决的？

注意：我们正在测试和生产环境中部署到 Glassfish 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:44:02.903

嗯似乎是一个简单的 cp 设置问题 - 你可以在这两个环境中检查/发布类路径吗？还要检查 GF 中 javax.xml.soap.MessageFactor 参数的设置

# jquery - 每次内容更改时使用 iFrame 内容更新 fancybox 的大小

> ID：12481068
> 
> 赞同：2
> 
> 时间：2012-09-18T16:21:50.137
> 
> 标签：jquery, iframe, resize, fancybox, postmessage

我正在使用fancybox 1.3.1。现在我将一个 iFrame 加载到工作正常的 Fancybox 中。在 iFrame 中，用户一步一步地进行。在某个步骤，内容的高度会发生变化。如何更新 iFrame 的高度？

我尝试了 jQuery postMessage：

```
<script type="text/javascript" src="fileadmin/templates/lib/jquery.ba-postmessage.min.js"></script>
<script type="text/javascript">
    $("#fancylink").fancybox({
        'type'    :    'iframe',
        'width' : 700,
        'height' : 450,
        'autoScale' : false
    }); 
</script>

<script type="text/javascript">
// set inital height
var if_height = 450;

$(document).ready(function() {
    if($.receiveMessage){
        $.receiveMessage(function(e){  

            // Get the height from the passsed data.
            var h = Number( e.data.replace( /.*if_height=(\d+)(?:&|$)/, '$1' ));
            if ( !isNaN( h ) && h > 0 && h !== if_height ) {
                // Height has changed, update the iframe.
                // checking min and max height
                h=(h<450)?450:h; 
                $("#fancybox-frame").height( if_height = h );
            }
        });
    }
});
</script> 
```

我得到了两种带有溢出的高度样式：隐藏；可以在这里看到：

```
<div id="fancybox-inner" style="top: 10px; left: 10px; width: 700px; height: 450px; overflow: hidden;">
<iframe id="fancybox-frame" scrolling="auto" frameborder="0" src="https://www.externaldomain.com#http://www.internaldomain.com/page" hspace="0" name="fancybox-frame1347984635401" style="height: 1180px;"> 
```

结果有更多内容可用，但用户无法滚动。所以什么都不做比这更好。

我也试过了

```
$('#element').fancybox({
    'onComplete' : function(){
        $.fancybox.resize();
    }
}); 
```

但这里什么也没有发生（没有调整大小）。我认为这种调整大小只是在第一次加载fancybox 时。但也是第一次什么都没有发生。

是否有解决我的问题的方法或者我只能使用固定尺寸？

**解决方案：**

所以我添加了以下代码，它似乎可以按预期工作：

```
$("#fancybox-inner").height( h );
$("#fancybox-wrap").height( h+20 );
$.fancybox.center(); 
```

我会测试一下，但我认为这可以工作。如果fancybox高于当前页面会发生什么？页面会变大吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:32:15.923

您可以执行以下操作。

```
 function updateMyFancyBox() {
    $.fancybox.wrap.height($.fancybox.inner.height() + $('div#yourContentDiv').height());//increase fancybox height by adding your div height.
    $.fancybox.update();//Fancybox will re-size according to new size, if it exceeds size limit, it will show scroll bar.
 } 
```

# c# - 如何将运费从购物车发送到贝宝

> ID：12481070
> 
> 赞同：1
> 
> 时间：2012-09-18T16:22:05.800
> 
> 标签：c#, asp.net-mvc, model-view-controller, paypal, e-commerce

我正在尝试将购物车的运费金额发送到贝宝。Paypal 没有收到整个购物车的金额，但如果我对购物车中的每件商品进行运输，它就会起作用。有没有人成功地将整个购物车的运费发送到贝宝而不是每个订单项？

这是我尝试过的：

```
 @Html.Hidden("cmd", "_cart")
    @Html.Hidden("upload", "1")
    @Html.Hidden("business", ConfigurationManager.AppSettings["BusinessAccountKey"])

    @Html.Hidden("first_name", Model.UserShippingInfo.FirstName)
    @Html.Hidden("last_name", Model.UserShippingInfo.LastName)
    @Html.Hidden("address1", Model.UserShippingInfo.Address)
    @Html.Hidden("city", Model.UserShippingInfo.City)
    @Html.Hidden("state", Model.UserShippingInfo.State)
    @Html.Hidden("zip", Model.UserShippingInfo.Zip)
    @Html.Hidden("shipping", @shippingCost.ToString("N2"))
    @Html.Hidden("amount", @totalCost.ToString("N2"))

    @foreach (CartLine item in Model.Cart.Lines)
    {

        @Html.Hidden("item_name_" + itemCount, item.Product.Name)
        @Html.Hidden("item_number_" + itemCount, item.Product.ProductID)
        @Html.Hidden("amount_" + itemCount, item.Product.Price.ToString("N2"))
        @Html.Hidden("quantity_" + itemCount, item.Quantity)
@*      @Html.Hidden("shipping_" + count, item.Product.Price.ToString())
        @Html.Hidden("handling_" + count, 0)*@

        itemCount++;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:37:39.490

我找到了解决方案。如果我使用“handling_cart”变量，它就可以工作。

```
@Html.Hidden("handling_cart", @shippingCost.ToString("N2")) 
```

这是为购物车接近它的正确方法吗？

# c# - 基于 IProcessor<> 注册所有服务，而无需为每个服务编写更多代码

> ID：12481078
> 
> 赞同：0
> 
> 时间：2012-09-18T16:22:28.030
> 
> 标签：c#, inversion-of-control, castle-windsor

这一定是以前问过的，很抱歉，但是你怎么注册这个小地段

```
IThingProcessor : IProcessor<Thing>
IOtherThingProcessor : IProcessor<OtherThing> 
```

鉴于我有

```
ThingProcessor : IThingProcessor 
OtherThingProcessor : IOtherThingProcessor 
```

我有这个代码要注册

```
container.Register(
            Classes.FromThisAssembly()
            .BasedOn(typeof(IProcessor<>))
            .WithService.Base() 
```

但由于某种原因，它不会注册它们，有什么想法吗？我根据 Krzysztof 的反馈对此进行了更改，但没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:34:17.107

`WithService.Base()`

[有关更多详细信息，请参阅文档。](http://docs.castleproject.org/Windsor.Registering-components-by-conventions.ashx#_Base__5)

# java - Tomcat 未启动（抛出 java.net.BindException: ）

> ID：12481092
> 
> 赞同：23
> 
> 时间：2012-09-18T16:22:58.580
> 
> 标签：java, tomcat, servlets, web

我已经完成了以下设置来运行 Java Web 项目，但不知何故我的 Tomcat 不是从 Eclipse 开始的：

```
JAVA_HOME : C:\Program Files\Java\jdk1.6.0_03  
PATH : C:\Program Files\Java\jdk1.6.0_03\bin  
CATALINA_HOME : D:\javaworkspaces\apache-tomcat-7.0.27 
```

然后根据需要，我从 Eclipse 中设置了一个新服务器，并给出了 Tomcat 的安装路径。

正如一些论坛所建议的那样，我已经添加`tomcat-juli.jar`到类路径中。
尽管如此，当我尝试启动 Tomcat 服务器时，我仍然收到错误消息，因为 tomcat 没有在 45 秒内盯着看。

我收到以下日志消息：

```
Jul 26, 2012 5:49:34 PM org.apache.catalina.core.AprLifecycleListener init  
INFO: The APR based Apache Tomcat Native library which allows optimal performance in     production environments was not found on the java.library.path: C:\Program Files\Java\jre6\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\TortoiseSVN\bin;C:\Program Files\Java\jdk1.6.0_03\bin;D:\eclipse-jee-indigo-SR2-win32\eclipse;;.  
Jul 26, 2012 5:49:34 PM org.apache.tomcat.util.digester.SetPropertiesRule   
 begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property         'source' to 'org.eclipse.jst.j2ee.server:JEE_Day01' did not find a matching property.  
Jul 26, 2012 5:49:34 PM org.apache.coyote.AbstractProtocol init  
INFO: Initializing ProtocolHandler ["http-bio-80"]  
Jul 26, 2012 5:49:35 PM org.apache.coyote.AbstractProtocol init  
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]  
Jul 26, 2012 5:49:35 PM org.apache.coyote.AbstractProtocol init  
SEVERE: Failed to initialize end point associated with ProtocolHandler ["ajp-bio-8009"]  
java.net.BindException: Address already in use: JVM_Bind <null>:8009  
at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:393)
at org.apache.tomcat.util.net.AbstractEndpoint.init(AbstractEndpoint.java:566)
at org.apache.coyote.AbstractProtocol.init(AbstractProtocol.java:417)
at org.apache.catalina.connector.Connector.initInternal(Connector.java:956)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.startup.Catalina.load(Catalina.java:624)
at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:449)  
Caused by: java.net.BindException: Address already in use: JVM_Bind
at java.net.PlainSocketImpl.socketBind(Native Method)
at java.net.PlainSocketImpl.bind(Unknown Source)
at java.net.ServerSocket.bind(Unknown Source)
at java.net.ServerSocket.<init>(Unknown Source)
at java.net.ServerSocket.<init>(Unknown Source)
at org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:49)
at org.apache.tomcat.util.net.JIoEndpoint.bind(JIoEndpoint.java:380)
... 16 more  
Jul 26, 2012 5:49:35 PM org.apache.catalina.core.StandardService initInternal    
    SEVERE: Failed to initialize connector [Connector[AJP/1.3-8009]]
org.apache.catalina.LifecycleException: Failed to initialize component [Connector[AJP/1.3-8009]]  
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:106)  
    at org.apache.catalina.core.StandardService.initInternal(StandardService.java:559)  
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.core.StandardServer.initInternal(StandardServer.java:814)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
at org.apache.catalina.startup.Catalina.load(Catalina.java:624)
at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:449)  
Caused by: org.apache.catalina.LifecycleException: Protocol handler initialization failed
at org.apache.catalina.connector.Connector.initInternal(Connector.java:958)
at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:102)
... 12 more 
```

我已经提到了多个论坛，但我对这种情况非常不满。请指导我。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-18T16:24:23.223

这些行：

```
SEVERE: Failed to initialize end point associated with ProtocolHandler ["ajp-bio-8009"]
java.net.BindException: Address already in use: JVM_Bind <null>:8009 
```

暗示已经有一个服务在端口 8009 上运行。是否有一个 tomcat（带有 ajp）已经在运行？

如果需要在 8009 上运行的服务，您可以将 server.xml 中的连接器配置更改为如下所示：

```
<Connector port="8089" protocol="AJP/1.3" redirectPort="8443" /> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-18T16:24:21.027

它说端口号`8009` 已经被操作系统上运行的其他进程占用[尝试搜索该进程并停止它](https://stackoverflow.com/questions/5310945/deployment-errorstarting-of-tomcat-failed-the-server-port-8080-is-already-in-u)或让你的tomcat在不同的（免费）端口上运行

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-13T07:28:32.673

杀死该端口（即 8009）上的相应（侦听）进程。使用

> `netstat -a -o -n`

寻找进程的PID。它可能看起来像这样 TCP [::]:8009 [::]:0 LISTENING 892

使用 taskkill 命令杀死进程。例子：

> `taskkill /F /PID 892`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-18T16:24:28.013

> java.net.BindException：地址已在使用中：JVM_Bind：8009

这意味着其他一些进程已经在使用这个端口。会不会是另一个 Tomcat 实例？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-20T07:30:43.413

**您不必更改 server.port 即可解决此问题...**

*Mac/Unix/Linux 用户*：如果重启 Tomcat 后，这个问题依然存在，可能是因为 Tomcat 关闭不正确，还有与之关联的资源现在被锁定了。您可以通过运行以下命令查看这些资源的 PID：

```
lsof | grep tomcat 
```

使用以下方法终止这些进程：

```
kill -15 <PID> 
```

这应该可以解决您的问题。

> 最好使用**kill -15**命令来 TERM (-15) 进程而不是 SIGKILL (-9)。-15 开关向进程发送信号以开始其关闭阶段并清理有限资源。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T17:33:05.857

尝试 :http://localhost:8089 如果它不起作用（或）试试这个： Set:JRE_HOME : C:\Program Files\Java\jre1.5.0_11 （取决于您的 JRE 版本）并添加 C:\ Program Files\Java\jre1.5.0_11（取决于您的 JRE 版本）\bin 到路径 Eclipse-> 转到 windows 首选项：服务器->RuntimeEnvironment 删除添加的服务器和引用并添加新的 TomcatServer

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-10T18:51:36.493

TIL：服务器上的其他人可以在端口 80 上启动 IIS 而不会告诉任何人。
如果你的tomcat配置了同一个端口，它也会报这个错误。
需要更改 IIS 或 tomcat 上的端口。

在 IIS 中修改端口：
管理工具 | Internet 信息服务 (IIS) 管理器
右键单击​​默认网站 | 编辑绑定...更改端口

-或者-

在 Tomcat 中修改端口：
打开 conf\server.xml 并更新标签中的端口值：

```
<Connector port="80" protocol="HTTP/1.1"
    connectionTimeout="20000"
    redirectPort="8443"
    URIEncoding="UTF-8"/> 
```

重启Tomcat

享受 2 个网络服务。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-08T06:22:20.613

其他东西正在使用端口 8009。

关闭使用 8009 的东西或更改 server.xml 以使用 8009 以外的其他端口

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-15T08:26:24.503

如果 tomcat 的连接器/关闭端口已被使用，通常会发生这种情况。首先，运行shutdown.bat（有时我们会错过一个tomcat实例已经在运行）接下来，在命令提示符下运行

```
netstat -aon | findstr 0.0:<your port number which is giving bind exception> 
```

获取当前正在使用您的端口的应用程序的 PID。杀死该应用程序或使用运行时未列出的其他端口

```
netstat -a -o -n 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-31T11:04:29.163

使用免费端口一一更新所有可用端口。这必须解决问题

2019 年 7 月 31 日 16:28:30.641 严重 [main] org.apache.catalina.core.StandardServer.await StandardServer.await: create[localhost: **8005** ]: java.net.BindException: 地址已在使用中：JVM_Bind

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-24T11:15:10.660

其他 Tomcat 在同一端口上运行，因此最好使用 9 而不是 15 杀死

杀死 -9 PID

这对我很有帮助。

# c# - OnAuthorization 中的 MVC 重定向导致授权失败

> ID：12481095
> 
> 赞同：5
> 
> 时间：2012-09-18T16:23:07.123
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, forms-authentication

如果他们的电子邮件地址尚未经过验证，我正在尝试将用户重定向到不同的操作。问题是，我不希望他们被注销，我只想重定向他们。当我在控制器的 OnAuthorization 中执行此操作时，它会按预期重定向，但用户未经过身份验证。我不确定这是为什么。我的代码如下所示：

```
 protected override void OnAuthorization(AuthorizationContext filterContext)
    {
        base.OnAuthorization(filterContext);

        //_applicationService.CurrentUser is populated correctly at this point
        // from Controller.User
        if (_applicationService.CurrentUser != null)
        {
            if (_applicationService.CurrentUser.EmailVerified != true)
            {
                var url = new UrlHelper(filterContext.RequestContext);
                var verifyEmailUrl = url.Action("EmailVerificationRequired", "Account", null);
                filterContext.Result = new RedirectResult(verifyEmailUrl);
            }
        }

    } 
```

注意：我删除了不必要的代码以使其更清晰。_applicationService.CurrentUser 填充了当前用户 - 并且用户在到达该点时已正确验证。但是在重定向之后，用户不再经过身份验证。

如何在不影响内置用户授权的情况下实现此重定向？

我已经尝试将我的代码放入 OnActionExecuting，并且我也尝试在自定义 ActionFilterAttribute 中实现它，但是无论我把这个重定向放在哪里都会阻止“用户”（即：System.Security.Principal.IPrincipal Controller。用户）从获得身份验证。

我在这里想念什么？希望这是有道理的。非常感谢任何帮助。

响应达林对我的登录操作的请求：

```
 [HttpPost]
    [AllowAnonymous]
    public ActionResult Login(LoginViewModel model, string returnUrl)
    {
        string errorMessage = "The username or password is incorrect";

        if (ModelState.IsValid)
        {
            if (_contextExecutor.ExecuteContextForModel<LoginContextModel, bool>(new LoginContextModel(){                    
              LoginViewModel = model  
            }))
            {
                ViewBag.CurrentUser = _applicationService.CurrentUser;
                _formsAuthenticationService.SetAuthCookie(model.LoginEmailAddress, model.RememberMe);

                if (_applicationService.IsLocalUrl(returnUrl))
                {
                    return Redirect(returnUrl);
                }

                return RedirectToAction("Index", "Home").Success("Thank you for logging in.");
            }
            else
            {
                errorMessage = "Email address not found or invalid password.";
            }
        }

        return View(model).Error(errorMessage);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:33:14.870

好的，我现在找到了哪里出错了。问题是我有点傻，我没有完全理解我做的时候发生了什么：

```
filterContext.Result = new RedirectResult(verifyEmailUrl); 
```

我没有意识到我实际上是在用这个开始一个新的请求，我错误地认为我只是重定向到另一个动作。现在似乎很明显，这将是一个新的请求。

所以，问题是我的`EmailVerificationRequired`操作没有授权用户，因此当它到达这个操作时，当前用户为空。所以修复是向该操作添加授权，现在一切都很好。

谢谢你们的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:57:14.697

您可以在登录操作结果中处理此问题。尝试放置

```
 if (_applicationService.CurrentUser.EmailVerified != true)
        {
            FormsAuthentication.SignOut();
            return RedirectToAction("EmailVerificationRequired", "Account"); 
        } 
```

此行之后的代码：

```
_formsAuthenticationService.SetAuthCookie(model.LoginEmailAddress, model.RememberMe); 
```

接下来，设置断点并逐步执行登录操作。如果您没有到达 if (_applicationService.CurrentUser.EmailVerified != true) 行，则表明您的用户未通过身份验证，并且您有不同的问题需要解决。

# objective-c - Objective c #import没有链接到.h文件

> ID：12481103
> 
> 赞同：0
> 
> 时间：2012-09-18T16:23:43.523
> 
> 标签：objective-c

我是目标 c 编程和一般编程的新手。

我正在尝试找出如何将子类添加到项目中。

我的桌面上有两个单独的 Xcode 项目，位于一个文件夹中。

Shapes [文件夹] 包含两个项目文件夹：矩形项目和方形项目

-- 矩形项目包括：

```
`Rectangle.h` [interface]

`Rectangle.m` [implementation]

`Rectangle Project.m` [main]

@interface Rectangle : NSObject 
```

-- Square项目包括：

```
`Square.h` [interface]

`Square.m` [implementation]

`Square Project.m` [main]

@interface Square : Rectangle 
```

我想将矩形项目中的 rectangle.h 文件导入到 square.h 文件中的正方形项目中。

在我的 Square.h 文件中，我添加了以下内容：

```
#import <Cocoa/Cocoa.h>
#import <Foundation/Foundation.h>
#import "Rectangle.h"

@interface Square : Rectangle 
```

...我不断收到错误消息： `Rectangle: No such file or directory`。

如何让目标 c 重新识别文件？

我希望我是有道理的...

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:26:53.507

你需要“.h”：

```
#import "Rectangle.h" 
```

就像：

```
#import <Cocoa/Cocoa.h> 
```

# asp.net - Webmatrix WebSecurity 未进行身份验证

> ID：12481119
> 
> 赞同：0
> 
> 时间：2012-09-18T16:24:36.253
> 
> 标签：asp.net, razor, webmatrix

我正在尝试在我刚刚使用 WebMatrix 构建的现有网站上设置简单的会员资格。我已按照本教程中的步骤进行操作 - [http://www.mikepope.com/blog/DisplayBlog.aspx?permalink=2240](http://www.mikepope.com/blog/DisplayBlog.aspx?permalink=2240)

我遇到的问题是，登录后，如果我调用 WebSecurity.IsAuthenticated，它似乎从未真正登录过。登录上的代码一直到重定向，所以人们会假设用户已经过身份验证。这是我的登录代码：

```
@{
var username = "";
var password = "";
var errorMessage = "";

if(IsPost){
    username = Request["username"];
    password = Request["password"];
    if(WebSecurity.Login(username,password,true)){
        Response.Redirect("~/admin/modules/pages");
    }
    else
    {
        errorMessage = "Login was not successful.";
    }
}
} 
```

当用户被重定向到 /admin/modules/pages 位置时，有一段简单的代码可以在登录时显示用户名，但它从不显示。它只是表明您没有登录。这是代码：

```
@if(WebSecurity.IsAuthenticated)
{
<h2>Hello @WebSecurity.CurrentUserName, you are logged in | <a href="/admin/logout">Log out</a></h2>
}
else
{
<h2>You are not logged in | <a href="/admin/login">Log in</a></h2>
} 
```

希望有人可以提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:43:56.770

这很奇怪，不应该发生。尝试将您的代码与 WebMatrix 中的示例进行匹配。还要将您的 webconfig 文件与示例的 webconfig 匹配。一定是哪里出了问题。

# ruby-on-rails - Rails 中的存根模型方法

> ID：12481121
> 
> 赞同：1
> 
> 时间：2012-09-18T16:24:40.953
> 
> 标签：ruby-on-rails, ruby, rspec, tdd

我正在为 cotroller 编写测试，但没有成功。我的测试是：

```
describe VideosController do
  describe 'index' do
    it 'should select the index template for rendering' do
      Video.stub(:video_exists?).with("KgfdlZuVz7I").and_return(true)
      get :index, { :q => "KgfdlZuVz7I" }
      response.should render_template('index')
    end
  end
end 
```

这里是控制器。

```
class VideosController < ApplicationController
  def index
    if params[:q]
      params_hash = CGI::parse(params[:q])
      if Video.video_exists?(params_hash.values[0][0])
        video = Video.new :video_id => params_hash.values[0][0]
        if video.save!
          flash[:notification] = "Video found."
        else
          flash[:notification] = "Video found but not saved to database."
        end
        redirect_to root_path  
      else
        flash[:notification] = "Video not found."
        redirect_to root_path
      end
    end
  end
end 
```

测试未通过并引发消息：

> VideosController 索引应选择用于渲染失败/错误的索引模板：get :index, { :q => "KgfdlZuVz7I" } received :video_exists? 预期有未预期的参数：（“KgfdlZuVz7I”）得到：（无参数）如果消息也可能与其他参数一起接收，请先存根默认值。# ./app/controllers/videos_controller.rb:5:in `index' # ./spec/controllers/videos_controller_spec.rb:12:in`block (3 levels) in '

认为我没有以正确的方式存根视频，因为我只存根 video_exists？但不是新的和保存。但我不知道如何解决这个问题，因为我是 TDD 和 Rspec 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:34:18.020

作为建议＃1，您不应该像在测试中那样写出两次“随机字符串”。这极易出现错误输入，并且很难目视验证。改用这个：

```
rnd_id = "KgfdlZuVz7I"
Video.stub(:video_exists?).with(rnd_id).and_return(true)
get :index, { :q => rnd_id } 
```

另外，我不确定`params_hash = CGI::parse(params[:q])`应该做什么。为什么不像平常一样使用参数？

```
class VideosController < ApplicationController
  def index
    if params[:q]
      if Video.video_exists?(params[:q])
        video = Video.new :video_id => params[:q]
        if video.save!
          flash[:notification] = "Video found."
        else
          flash[:notification] = "Video found but not saved to database."
        end
        redirect_to root_path  
      else
        flash[:notification] = "Video not found."
        redirect_to root_path
      end
    end
  end
end 
```

# html - 导航菜单容器未更改为所选变量

> ID：12481123
> 
> 赞同：0
> 
> 时间：2012-09-18T16:24:46.173
> 
> 标签：html, wordpress, menu, navigation, nav

目前，我有这个：

```
<nav><? wp_nav_menu(); ?></nav> 
```

让它像这样工作会很棒：

```
<? wp_nav_menu(array("container" => "nav"); ?> 
```

所以最终结果非常干净：

```
<nav>
  <ul>
    <li><a href="http://www.domain.com/page-a">Page A</a></li>
    <li><a href="http://www.domain.com/page-b">Page B</a></li>
    <li><a href="http://www.domain.com/page-c">Page C</a></li>
  </ul>
</nav> 
```

因此它可以删除 div 包装器并将其更改为 nav 标记。我做了很多研究，这似乎是一个已知问题，无论是 Codex 没有写清楚还是这里真的存在错误。我玩过`register_nav_menu()`并且这样做似乎并没有改变任何东西，以及不同论坛上的所有其他答案。为什么这么简单的事情做起来这么难？

另一方面，仅仅因为我喜欢代码非常干净且易于阅读，有没有一种方法可以包含如上所示的正确间距，而不是仅仅在一条长行中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:30:20.713

`nav`var 也不适合我。我只会使用：`'container' => false`代替。这至少会摆脱`<div>`您添加的标签中的其他`<nav>`标签。

```
<nav>
    <?php wp_nav_menu( array('menu' => 'homepage', 'container' => false, 'items_wrap' => '<ul class="footer_menu">%3$s</ul>' )); ?>
</nav> 
```

`'items_wrap'`也将允许您清理输出。可以在此处阅读有关此论点的更多信息：[https ://wordpress.stackexchange.com/questions/19245/any-docs-for-wp-nav-menus-items-wrap-argument/19247#19247](https://wordpress.stackexchange.com/questions/19245/any-docs-for-wp-nav-menus-items-wrap-argument/19247#19247)

# javascript - Windows 8 应用设置最佳实践

> ID：12481124
> 
> 赞同：0
> 
> 时间：2012-09-18T16:24:48.097
> 
> 标签：javascript

当我使用 Zend 框架在 PHP 中构建应用程序时，有一个 application.ini 文件，其中包含应用程序所需的所有设置，即使是环境继承也是如此。

Metro 风格的 Windows.JavaScript 应用程序是否有类似的东西？

我的意思不是针对用户的设置 Flyout，而是一些内部设置。

我希望我把自己说清楚了......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:38:23.110

我会使用资源：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465248.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465248.aspx)

但据我所知，没有环境继承

# java - SOAP - 不知道我的端点 URL 是什么

> ID：12481129
> 
> 赞同：0
> 
> 时间：2012-09-18T16:25:17.957
> 
> 标签：java, spring, web-applications, soap, soapui

我希望这个问题非常简单，只是我是个白痴。我是 SOAP 新手，正在尝试设置 SOAP WebService（使用 Java 和 Spring），然后使用 SoapUI 工具尝试向我的 Web 服务发送 SOAP 请求。但是，当我提交请求时，我总是收到 404 Not Found 错误。我怀疑/希望我刚刚在 SoapUI 中错误地设置了我的端点，但我不知道我应该在那里设置什么值。任何人都可以帮忙吗？

这些是我为使用 SOAP 支持设置我的 WebApp 所采取的步骤：

1）我正在使用在 Spring Tool Suite（基于 Eclipse）中运行并使用 Jetty 的现有 WebApp（具有现有 REST Web 服务）。在我的 web.xml 文件中，我添加了一个新的 SOAP Web 服务：

```
<servlet-mapping>
    <servlet-name>SOAPWebService</servlet-name>
    <url-pattern>/ws/SOAP/*</url-pattern>
</servlet-mapping>
<servlet>
     <servlet-name>SOAPWebService</servlet-name>
     <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
     <init-param>
         <param-name>transformWsdlLocations</param-name>
         <param-value>true</param-value>
     </init-param>
     <load-on-startup>1</load-on-startup>
</servlet> 
```

2）我创建了一个新类“ProjectSearchEndpoint”，它有一个@Endpoint 的注释。有效负载根 = @PayloadRoot(namespace = "http://FOO.FOO/foo", localPart = "ProjectRequest")

3）我将DSD添加到我的WebApp的WEB-INF中：ws-project.xsd

4) 我创建了一个名为 SOAPWebService-servlet.xml 的 servlet XML 文件，它引用了 DSD

```
<bean id="projectSearch" class="org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition">
  <property name="schema" ref="schema"/>
  <property name="portTypeName" value="ProjectSearch"/>
</bean>

<bean id="schema" class="org.springframework.xml.xsd.SimpleXsdSchema">
    <property name="xsd" value="/WEB-INF/ws-project.xsd"/>
</bean> 
```

**注意：**端点代码和 DSD 来自博客：http: [//javaclue.blogspot.co.uk/2012/05/soap-web-service-using-spring-ws-20.html](http://javaclue.blogspot.co.uk/2012/05/soap-web-service-using-spring-ws-20.html)我编辑了命名空间来制作它“http://FOO.FOO/foo”，但除此之外代码是相同的，尽管我添加了 System.out 行以显示对象何时被构造（它是）以及何时调用“searchProjects”方法（它从来不是）。

我可以成功启动我的 webApp，如果在我的浏览器中我导航到 URL：

```
http://localhost:8080/MyApp/ws/SOAP/projectSearch.wsdl 
```

我可以看到 WSDL。到目前为止一切都很好。

当我使用 SoapUI 时，我会创建一个新项目并传入 WSDL。SoapUI 似乎很高兴。我请求一个请求，SoapUI 创建了一个带有我的 ProjectRequest 的 Soap Envelope。一切进展顺利！然而，要提交这个请求，SoapUI 需要一个 Endpoint。我认为我的终点是：

```
http://localhost:8080/MyApp/ws/SOAP/ 
```

但这只是返回 404 not found。尝试其他组合，例如

```
http://localhost:8080/MyApp/ws/SOAP/projectSearch
http://localhost:8080/MyApp/ws/SOAP/projectSearch?wsdl
http://localhost:8080/MyApp/ws/SOAP/ProjectRequest 
```

所有结果都是 404。我的端点是什么？我应该为 SoapUI 赋予什么价值？

**更新 1**

为了清楚起见，这就是我在soapUI中所做的

启动soapUI 后，我创建了一个“新soapUI 项目”。名字是A1。初始 WSDL 是：

```
http://localhost:8080/MyApp/ws/SOAP/projectSearch.wsdl 
```

在对话框中也勾选了“创建请求”。

我单击“确定”，它创建了一个 ProjectSearchSoap11（旁边有一个绿色的 I 图标），它下面有一个项目（红色箭头图标）和那个“Request1”（图标是 SOAP）。我右键单击 Request1 并选择“显示请求编辑器”。这将显示一个带有 SOAP 信封以及我的命名空间和 ProjectRequest 的窗口。这一切看起来都不错。

我现在想单击“向指定的端点 URL 提交请求”（左上角的绿色箭头），但在我指定端点（右侧）之前，它是灰色的。我单击端点下拉菜单并选择“编辑当前”。出现一个对话框。我输入：

```
http://localhost:8080/MyApp/ws/SOAP/ 
```

并单击确定。现在运行图标已启用（绿色）。单击此图标会导致出现“响应”窗口，该窗口为空白，但原始数据为：

```
HTTP/1.1 404 Not Found
Content-Length: 0
Server: Jetty(6.1.26) 
```

我猜我选择的端点是错误的。您能否确认这是错误的格式，或者我缺少某种后缀。如果您认为它是正确的，那么一定是我在 Web 应用程序上的设置有问题。

谢谢，

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:14:50.103

当您创建 soapui 测试请求时，它应该为您填充端点字段。

您还可以在绿色“I”图标下运行“示例请求”，至少可以测试您的端点。我不建议编辑这些以用作您的实际测试，但我认为很多人确实以这种方式使用 SoapUI。

“我请求请求”是什么意思？您应该能够右键单击绿色“I”下两个级别的测试请求，然后选择添加到测试用例。之后有几个对话框，您可以在其中采用默认值。它将创建一个 Junit 类型的结构：一个测试套件和一个测试用例。下面是测试步骤，您可以自己执行，也可以作为套件或测试用例的一部分执行。

编辑1：

对我来说这听起来不正常。不幸的是，除了简单的演示服务，我什么都没写，不过……

# php - htmlentities mysql_real_escape_string

> ID：12481132
> 
> 赞同：0
> 
> 时间：2012-09-18T16:25:28.423
> 
> 标签：php, login

我只是想知道我是否做得对。

***PHP***

```
<?php 
if(isset($_POST['email']) && isset($_POST['password'])) {
    $email = htmlentities(mysql_real_escape_string($_POST['email']));
    // then hash password
}
?> 
```

***HTML***

```
<form action="" method="POST">
    <input type="email" name="email" />
    <input type="password" name="password" />
    <input type="submit" name="Login" />
</form> 
```

`htmlentities()`和一起做好`mysql_real_escape_string`吗？
或者我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:36:00.640

我会说`htmlentities()`是很好的防止`XSS`攻击。因此，如果您要再次将此数据重新渲染回 HTML 格式，请使用它。如果您只担心众所周知的`SQL Injection`攻击，我会说`mysql_real_escape_string()`对您来说已经足够了。

请记住，一旦您要再次显示它们，您就需要解码 HTML 实体。

# c++ - 将内联函数从标题移动到源

> ID：12481138
> 
> 赞同：1
> 
> 时间：2012-09-18T16:25:40.590
> 
> 标签：c++, inline

我是 C++ 新手，所以我提前为我的问题的平凡性质道歉。

我被要求将以下内联函数从头文件移动到源文件。但是我正在努力在源文件中获得正确的语法。这是头文件中的内联函数：

```
class G1FRViewOption
 {
    public:
        enum ViewType {partyView, contraView, unknown} ;
        G1FRViewOption() : m_view     (nullString )
                     , m_viewType (unknown    )
                     , m_isValid  (false      ) {initialise();} 
        G1FRViewOption(const RWCString view) : m_view     (view    )
                                         , m_viewType (unknown )
                                         , m_isValid  (false   ) {initialise();}
        void initialise()
        {
            static RWCString views[] = {"party","contra"} ;
            for (int vt=counterpartyView; vt<unknown; vt++)
                if (m_view.compareTo(views[vt], RWCString::ignoreCase)==0)
                {
                    m_viewType  = (ViewType) vt ;
                    m_isValid   = true          ;
                    break ;
                }
        } 
        RWCString getErrorMessage()
        {
            return "Invalid " + getFieldLabel() + " given. Valid values are party, contra.";
        }
        G1FRViewOption & operator = (const G1FRViewOption & other)
        {
            this->m_view     = other.m_view     ;
            this->m_viewType = other.m_viewType ;
            this->m_isValid  = other.m_isValid  ;
            return *this ;
        } 
              RWBoolean   is        (ViewType viewType) const {return viewType == m_viewType ;} 
              RWBoolean   isValid   () const {return m_isValid ;} 
        const RWCString & toString  ()       {return m_view    ;} 
        static const RWCString       & getFieldLabel         () { static RWCString value = "View"         ; return value ; } 
        static const FieldDefinition & getFieldDefinition    () { static const FieldDefinition fd (getFieldLabel(), 13) ; return fd ; } 
    private:
        RWCString m_view     ;
        ViewType  m_viewType ;
        RWBoolean m_isValid  ;} ; 
```

任何帮助将不胜感激。

提前谢谢了。

C++新手！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:31:34.123

您将函数从标头中移出到 cpp 文件中，首先创建相应的 cpp 文件（如果它不存在），然后将函数的主体一个接一个地复制到该文件中，并在它们的名称前加上类的名称和两个冒号`::`，像这样：

```
void initialise()
{
    static RWCString views[] = {"party","contra"} ;
    for (int vt=counterpartyView; vt<unknown; vt++)
        if (m_view.compareTo(views[vt], RWCString::ignoreCase)==0)
        {
            m_viewType  = (ViewType) vt ;
            m_isValid   = true          ;
            break ;
        }
} 
```

从标题变成

```
void initialise(); 
```

在标题中，并且

```
void G1FRViewOption::initialise()
{
    static RWCString views[] = {"party","contra"} ;
    for (int vt=counterpartyView; vt<unknown; vt++)
        if (m_view.compareTo(views[vt], RWCString::ignoreCase)==0)
        {
            m_viewType  = (ViewType) vt ;
            m_isValid   = true          ;
            break ;
        }
} 
```

在 cpp 文件中。

# oauth - 是否可以将 oauth2 授权与私人 shopify 应用程序一起使用？

> ID：12481139
> 
> 赞同：1
> 
> 时间：2012-09-18T16:25:43.760
> 
> 标签：oauth, oauth-2.0, shopify

如前所述，私人应用程序（http://wiki.shopify.com/Private_apps）部分，仅给出了 curl 示例。是否可以将 oauth2 授权与私有应用程序一起使用？如果无法使用具有 oauth2 授权的私有应用程序，我如何将 oauth2 授权与 shopify 一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T02:51:54.727

如果您将私有应用程序提供的密码设置为`X-Shopify-Access-Token`请求的标头，则该密码将用作访问令牌。

# c# - 为 ToolStripComboBox C# 应用输入掩码

> ID：12481145
> 
> 赞同：0
> 
> 时间：2012-09-18T16:26:18.370
> 
> 标签：c#, validation, user-input, mask

我只是想知道是否有人遇到过如何在 C# 中为工具条组合框应用输入掩码？

随着时间的推移，我的下拉框会填充 IP 地址，我想限制用户能够写入的内容（例如：只能输入 3 个“。”，只能输入数字等）。

因此，如果有人能够提供帮助，我将不胜感激！

提前致谢。

**编辑**

我的设计已经改变，所以我现在需要一个 ToolStripComboBox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:45:22.067

您可以尝试捕获[KeyUp 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keyup.aspx)，然后检查输入是否有效。如果不将其恢复为最后一个有效输入。您可能希望对[Validating](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)事件执行类似的操作（确保[CausesValidation](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.causesvalidation.aspx)为真）。

另一种选择是创建一个[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)并放置它，使其覆盖下拉菜单的文本框部分。然后，您需要连接事件，以便两个表单控件保持同步。

您还可以查看[ErrorProvider](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx)类。

还有其他几种方法（例如每 0.3 秒运行一次的计时器），但这些方法通常会消耗性能或难以维护。

**正则表达式注释更新**：
如果我要这样做，我可能会使用正则表达式，或者我可能会手动解析字符串。无论哪种方式，KeyUp 和 Validating 事件都是我检查控件验证的地方。KeyUp 事件让我可以选择在输入时进行检查，而 Validating 事件让我可以验证控件何时失去焦点。您使用哪种取决于您想要的用户体验。

如果您不使用 KeyUp 事件进行验证，您可以添加一个计时器，该计时器在最后一次按键后运行 5 秒。这样，控件就不必失去焦点来显示错误。

**已编辑问题和评论的更新**：
您不能使用[`Format`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.format.aspx)事件，因为您的问题是关于如何格式化用户输入，而不是如何将内容添加到列表中。因此，该解决方案不适[`ToolStripComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcombobox.aspx)用于[`ComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx).

*阅读文档后[`ToolStripControlHost`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcontrolhost.aspx)，您也许可以转换[`ToolStripComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcombobox.aspx)为[`ComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx). 如果没有，那么您可以使用 将[`ToolStripControlHost`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcontrolhost.aspx)放置[`ComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)到您的表单上。* - 这是不正确或不必要的，请参阅报价下方的更新。

> ToolStripControlHost 是 ToolStripComboBox、ToolStripTextBox 和 ToolStripProgressBar 的抽象基类。ToolStripControlHost 可以通过两种方式托管其他控件，包括自定义控件：
> 
> *   使用派生自 Control 的类构造 ToolStripControlHost。要完全访问托管控件和属性，您必须将 Control 属性转换回它所代表的实际类。
>     
>     
> *   扩展 ToolStripControlHost，并在继承类的默认构造函数中，调用基类构造函数，传递从 Control 派生的类。此选项允许您包装常用控件方法和属性，以便在 ToolStrip 中轻松访问。
>     
>     
> 
> 使用 ToolStripControlHost 类来承载您的自定义控件或任何其他 Windows 窗体控件。
> 
> 要自定义 ToolStripItem，请从 ToolStripControlHost 派生并创建自定义实现。您可以重写 OnSubscribeControlEvents 等方法来处理托管控件引发的事件，并且可以将自定义功能放入属性中以增强托管控件。

**更新**：根据[`ToolStripComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcombobox.aspx)文档，您可以[`ComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx)通过[`ToolStripComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcombobox.aspx)'[`ComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcombobox.combobox.aspx)属性访问基础。

这就是为什么我通常在使用控件之前阅读它的文档。我可能不明白，但至少我会知道要寻找什么。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:04:38.980

您应该像这样创建 Format 事件：

```
 private void comboBox1_Format(object sender, ListControlConvertEventArgs e)
    {
        e.Value = GetFullIpFormat((string)e.Value);
    } 
```

这是格式化值的代码：

```
 string GetFullIpFormat(string value)
    {
        string[] ip = new string[4];
        for (int i = 0; i < ip.Length; i++)
        {
            ip[i] = GetIpPart(i, value);
        }
        return string.Format("{0:###}.{1:###}.{2:###}.{3:###}", ip[0], ip[1], ip[2], ip[3]);
    }

    string GetIpPart(int partNumber, string ip)
    {
        string result = "000";
        int iLen = 3;
        ip = ip.Replace(".", "");
        int iStart = partNumber * iLen;
        if (ip.Length > iStart)
        {
            result = ip.Substring(iStart);
            if (result.Length > iLen)
            {
                result = result.Substring(0, iLen);
            }
        }
        return result;
    } 
```

这将为您进行格式化。或者，您可以检查同一事件的输入是否有数字。这将为您完成工作，快乐编码！:)

# php - 如何解码和保存从js发送到php的文件

> ID：12481146
> 
> 赞同：1
> 
> 时间：2012-09-18T16:26:44.070
> 
> 标签：php, file-upload, base64, filereader

我有一个拖放上传器。我正在使用文件阅读器将数据作为 url 发送。

```
 var files = evt.dataTransfer.files;
for (var i = 0, f; f = files[i]; i++) {
    var start = 0;
    var stop = files[0].size - 1;
    var reader2 = new FileReader();
    var ext = f.name.substring(f.name.indexOf(".")+1);
    reader2.onloadend = function(evt) {
        if (evt.target.readyState == FileReader.DONE) { // DONE == 2
            $.post("/process/upload.php",{"blob":evt.target.result,"extension":ext},function(data){
                console.log(data);
            });
        }
    };
var blob = f.slice(start, stop + 1);
reader2.readAsDataURL(blob);
} 
```

PHP 收到它但是一旦我解码它我得到“null”返回

```
$extension = $_POST['extension'];
$file = base64_decode($_POST['blob']);
$filePath = "../tmp/monkey.".$extension;
echo json_encode(base64_decode($_POST['blob'])); 
```

我也试过：

```
if(file_put_contents($filePath,$file)){
    echo json_encode("it worked");
}else{
    echo json_encode("it failed");
} 
```

编辑：我一直维护 POST 信息，直到我解码它。那么一旦我解码它，我如何确定文件是完整的并且可以保存？

有没有更好的方法来解码和保存文件？我到底做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:33:10.200

`$_POST['extension']`并且在以 JSON 格式发布时`$_POST['blob']`不要神奇地填充到数组中。`$_POST`事实上，根据您的 JSON 格式，JSON 将解码为一个对象，而不是一个数组。

您将需要直接从输入中获取内容，如下所示：

```
$post = file_get_contents('php://input');
$post_obj = json_decode($post);
$extension = $post_obj->extension;
$file = base64_decode($post_obj->blob); 
```

或使用`$HTTP_RAW_POST_DATA`变量，如：

```
$post_obj = json_decode($HTTP_RAW_POST_DATA);
$extension = $post_obj->extension;
$file = base64_decode($post_obj->blob); 
```

# android - android ui - 如何实现一系列对话框

> ID：12481149
> 
> 赞同：0
> 
> 时间：2012-09-18T16:26:54.613
> 
> 标签：android, user-interface, dialog

我的应用程序中有以下流程，但不知道如何以 android 方式实现。

用户可以在应用程序中检查是否有可用的更新，如果有，他可以选择是否要下载它，一旦下载，数据库就会更新。

在 android 文档中，我只找到了进度对话框或警报对话框的基本描述，但没有找到更复杂的东西。为了这个例子，我想要的是以下内容。

1.  用户单击检查更新按钮
2.  弹出检查更新的进度对话框（可以取消）
3.  如果没有可用的更新，用户会收到通知并可以单击“确定”。
4.  如果有可用的更新，用户可以选择下载或取消。
5.  如果他选择下载，他会看到一个进度条。（带有取消按钮）
6.  下载完成后，他会看到一个数据库更新警报对话框。
7.  最后他得到了所有完成的信息，可以点击确定

只是一个例子，实现这样的一系列对话框的android方式是什么。向导，一系列不同的对话框，一个总是改变一个......

建议如何以推荐的方式实现这一点将不胜感激

谢谢

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:36:32.580

每个对话框都可以启动下一个后续对话框并自动关闭。查看示例代码中附加到每个按钮的 DialogListener

# html - 网站页脚不会粘在页面底部

> ID：12481152
> 
> 赞同：1
> 
> 时间：2012-09-18T16:27:00.653
> 
> 标签：html, css, footer

我试图让页脚贴在我的网页底部，但它只浮动了一半。我看了几个例子，我看不出我做错了什么。任何帮助将不胜感激。我的简化代码如下所示。

```
<html>
<head>
</head>

<body>
    <div id = "wrapper">
        <!--Wrapper div for the main content-->
    </div>
        <!--Footer container-->
    <div class="footer">    
    </div>
</body>

</html>

--CSS-- 

body
{
height: 100%;
margin: 0;
padding:0;
background-color: #1A1F2B;
min-width: 960px;

}

#wrapper{
min-height: 100%;
}

.footer{
position: relative;
margin-top: -150px; /* negative value of footer height */
height: 150px;
clear:both;
display: block;
background-color: #232A3B;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:29:48.510

如果您希望它位于底部`document`：

```
.footer {
    position: absolute;
    bottom: 0;
} 
```

*如果您希望它位于视口*的底部：

```
.footer {
    position: fixed;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:13:57.670

如果您希望页脚 div 位于页面底部并跨越整个宽度，这将起作用：

```
.footer {
    position: absolute;
    bottom:0;
    height: 150px;
    width: 100%;
    background-color: #232A3B;
} 
```

HTML5 还支持[标签](http://www.w3schools.com/html5/tag_footer.asp)[，`<footer>`](http://www.w3schools.com/html5/tag_footer.asp)这可能使机器人更容易处理您网页上的信息。要更改它，只需使用`footer {`而不是`.footer {`更改 HTML 标记。

# java - Java 函数中的 Continue 语句

> ID：12481157
> 
> 赞同：1
> 
> 时间：2012-09-18T16:27:18.170
> 
> 标签：java, algorithm, iteration, continue

我想创建这样的逻辑：如果`s2`为 null，则调试器会跳过所有复杂的字符串操作并返回 null 而不是`s1 + s2 + s3`在第一个`if`块中看到的。我在某个地方错了吗？

```
public static String helloWorld(String s1, String s2, String s3){
   if(s2==null){
     continue;
     return null;
   }

   ... lots of string manipulation involving s1, s2 and s3.

   return (s1+s2+s3);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T16:28:45.703

不要在那里使用 continue ， continue 是 for 循环，比如

```
for(Foo foo : foolist){
    if (foo==null){
        continue;// with this the "for loop" will skip, and get the next element in the
                 // list, in other words, it will execute the next loop,
                 //ignoring the rest of the current loop
    }
    foo.dosomething();
    foo.dosomethingElse();
} 
```

做就是了：

```
public static String helloWorld(String s1, String s2, String s3){
   if(s2==null){
     return null;
   }

   ... lots of string manipulation involving s1, s2 and s3.

   return (s1+s2+s3);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:29:58.527

该`continue`语句用于循环（`for`, `while`, `do-while`），而不是`if`语句。

你的代码应该是

```
public static String helloWorld(String s1, String s2, String s3){
   if(s2==null){
     return null;
   }

   ... lots of string manipulation involving s1, s2 and s3.

   return (s1+s2+s3);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T16:30:54.453

你不需要`continue`那里，`return null;`就足够了。

`continue`当您希望循环跳过块的其余部分并继续下一步时，在循环中使用。

例子：

```
for(int i = 0; i < 5; i++) {
    if (i == 2) {
        continue;
    }

    System.out.print(i + ",");
} 
```

将打印：

`0,1,3,4,`

# watermark - TextControl 图像/水印

> ID：12481160
> 
> 赞同：0
> 
> 时间：2012-09-18T16:27:39.760
> 
> 标签：watermark, txtextcontrol

在 TextControl (http://www.textcontrol.com) 的第 18 版中，应该能够将背景图像/水印添加到文档中，但是我发现各种重载等的行为无法正常工作并且示例中的文档相当稀缺。有没有人有通过 ServerTextControl 对象向 Word 文档添加水印的工作示例？

此功能在以前的版本中不存在，所以我承认它仍然相当新，我只是觉得做类似的事情很奇怪
`tx.Images.Add(draftImage, pageNumber, location, ImageInsertionMode.BelowTheText);`

实际上并没有将图像添加到文档中，但是如果我事先使用另一个重载，它会同时添加两者吗？

我只需要一个循环

```
foreach (TXTextControl.Page page in pages){
    page.Select();
    var location = tx.InputPosition.Location;
    var pageNumber = page.Number;
    tx.Images.Add(draftImage, pageNumber, location, ImageInsertionMode.BelowTheText);
} 
```

位置应该是页面的开头。

任何帮助将不胜感激，这应该很简单！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:08:32.730

终于在他们的论坛上得到了回应，这不是一个完整的解决方案，但它在大多数情况下都有效。我想我会在这里跟进，以便最终访问此页面的任何人都能获得我想要的帮助。

[http://forums.textcontrol.com/showthread.php?325522-Watermarking-Background-Image-on-Saved-Documents-in-X8&p=41815#post41815](http://forums.textcontrol.com/showthread.php?325522-Watermarking-Background-Image-on-Saved-Documents-in-X8&p=41815#post41815)

# android - 使用 HoloEverywhere 的正确方法是什么

> ID：12481164
> 
> 赞同：2
> 
> 时间：2012-09-18T16:27:58.010
> 
> 标签：android, android-holo-everywhere

我正在尝试在我的应用程序中使用HoloEverywhere 库的**dev 分支**。我知道这仍处于开发阶段，但演示似乎运行良好，所以我试一试。

我将**android:theme="@style/Holo.Theme.Sherlock.Light"**放在清单中的活动中。该活动的结构是它使用Fragment，一个是列表，另一个只是Fragment。ActionBar 看起来 Holo 就好了。

我把我的**SherlockFragmentActivity**变成了**SActivity**和**Fragment**变成了**SFragment**。就像我查看随附的演示应用程序一样。我使用 SFragment 中的这段代码打开对话框。

```
 AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setTitle("Work in Progress")
            .setView(inflater.inflate(R.layout.extra_input))
            .setIcon(R.drawable.icon);
    builder.setPositiveButton("Positive", null);
    builder.setNegativeButton("Negative", null);
    builder.setNeutralButton("Neutral", null);
    builder.show(); 
```

弹出的对话框看起来像操作系统的 AlertDialog，其中 extra_input 布局中的 EditText 显示为 Holo。**ProgressDialog**也显示操作系统的主题。

我相信这是我错误地实现了库。问题是如何正确地做？

编辑：解决了，我需要使用**com.WazaBe.HoloEverywhere.app.AlertDialog**而不是**android.app.AlertDialog**。傻我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T09:50:47.437

解决了，我需要使用**com.WazaBe.HoloEverywhere.app.AlertDialog**而不是**android.app.AlertDialog**。傻我。

按建议添加答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T20:10:28.550

`android:theme="@style/Holo.Theme.Light"`

或在 style.xml

`<style name="MyTheme" parent="Holo.Theme.Light"> </style>`

# mailchimp - 对于表格中的 mailchimp 注册表单，如何将文本字段和按钮的 div 放在一行中？

> ID：12481166
> 
> 赞同：3
> 
> 时间：2012-09-18T16:28:18.473
> 
> 标签：mailchimp

我一直在尝试修改 Mailchimp 提供的代码，该代码包含在我正在为邮件列表表单开发的网站上。

基本上，代码包含在表格中，Mailchimp 代码位于表格的一个单元格中。内容是标题、输入电子邮件地址的框和“提交”按钮。我想修改代码，使单元格的内容都在一行上，而不是像当前情况那样在彼此下。

代码和 CSS 可以在这里找到[http://jsfiddle.net/surfersteve1970/x9QLP/](http://jsfiddle.net/surfersteve1970/x9QLP/)

希望我刚刚做了一些愚蠢的事情，就像经常发生的那样，但是在最后一个小时把我的头撞在我的桌子上之后，我认为最好尝试寻求一些帮助，而不是造成进一步的脑损伤。

感谢期待任何帮助。

史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:06:13.423

[http://jsfiddle.net/iphipps/CLFBj/1/](http://jsfiddle.net/iphipps/CLFBj/1/)

电子邮件和按钮输入都显示为块，而不是浮动或内联显示。下面的代码对我有用。

```
#mc_embed_signup input.email{
display:inline-block;
}

#mc_embed_signup input.button {
display:inline-block;
} 
```

注意：在附加的 jsfiddle 中，我更改了两个选择器的显示，然后在注释后添加了下面的代码。出于某种原因，jsfiddle 似乎不喜欢 css 级联覆盖。

# php - 回显后元复选框的 Wordpress 特定顺序

> ID：12481167
> 
> 赞同：2
> 
> 时间：2012-09-18T16:28:21.320
> 
> 标签：php, arrays, wordpress

我是 php 新手，也是第一次发帖。

我正在一个需要唱片目录的 wordpress 网站上工作。
我已经成功：
创建了我的自定义帖子类型：相册
添加了自定义元框和自定义字段到管理帖子编辑页面
制作了一个存档页面并回显了所有自定义字段元。

[http://squarerecording.com/albums/](http://squarerecording.com/albums/)

我的一个自定义字段是一系列 5 个复选框：该存档页面上每个专辑的最后一行

```
array(
                'name'    => 'Services Rendered',
                'desc'    => 'field description (optional)',
                'id'      => $prefix . 'services',
                'type'    => 'multicheck',
                'options' => array(
                    'R' => 'Recorded',
                    'Mi' => 'Mixed',
                    'Ma' => 'Mastered',
                    'P' => 'Produced',
                    'RMV' => 'Re-mastered for vinyl',
                ),
            ), 
```

虽然我已经成功地以逗号分隔格式回显了“服务呈现”，但每个帖子的顺序不同（P，RMV，R，Mi，Ma-对于第一个，P，Ma，Mi，R，RMV-对于第二个等等）

这是输出“服务呈现”的存档页面的代码：

```
<?php $key="sqr_services";  get_post_meta($post->ID, $key); 
 $sqr_services = get_post_meta( $post->ID, $key );
 $comma_sep_services = implode(",", $sqr_services );
    echo $comma_sep_services; 
?> 
```

我的问题是：我需要做什么才能使它们以与它们在编辑页面上出现的顺序相同的顺序列出（R、Mi、Ma、P、RMV）？请记住，它们不会总是被检查。

我试过搞乱反序列化，但我对此知之甚少。

任何帮助或正确方向的观点将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:29:25.097

[这篇文章](http://www.eliasinteractive.com/blog/sorting-data-from-custom-fields-in-wordpress/)可能很有趣。这是我见过的不涉及编辑 Wordpress 核心文件的少数解决方案之一。

您还可以尝试[这个修改后的 get_post_custom 函数](http://blog.tinkerworkshop.com/wordpress-get_post_custom-wrong-order/)，该函数按元 ID 对键/值对进行排序，而不是由`get_post_custom`.

第三种选择是筛选[这个答案](https://wordpress.stackexchange.com/questions/4694/how-to-make-multicheck-for-post-page-meta-box)。

**更新：愚蠢的我！**PHP 可以以任何你想要的方式对数组进行排序，当它不是数字或字母时，它会变得有点棘手。如果字母排序适合您，请尝试以下操作：

```
$key="sqr_services";  
get_post_meta($post->ID, $key); 
$sqr_services = get_post_meta( $post->ID, $key );
asort($sqr_services);
foreach ($sqr_services as $key => $val) {
    echo "$val\n";
} 
```

如果您想学习更复杂的数组排序，请[成为我的客人](http://php.net/manual/en/array.sorting.php)。我？我会坚持ABC。

**更新：愚蠢的你！** 为了回应您关于检查和显示`$sqr_services`数组中的单个值的评论，您需要做的就是检查[in_array()](http://www.w3schools.com/php/func_array_in_array.asp)：

```
if (in_array('Recorded', $sqr_services)){echo 'Recorded';}
if (in_array('Mixed',$sqr_services)){echo 'Mixed';}
if (in_array('Mastered',$sqr_services)){echo 'Mastered';}
if (in_array('Produced',$sqr_services)){echo 'Produced';}
if (in_array('Re-mastered for vinyl',$sqr_services)){echo 'Re-mastered for vinyl';} 
```

它不太灵活，因为如果您向数组添加一个值（添加一个新的税收条款），它不会开始显示，直到您在循环中检查它。不过，我猜这不会成为问题，因为这似乎是一组非常有限的选项。

# django - Django模板img src不工作

> ID：12481172
> 
> 赞同：18
> 
> 时间：2012-09-18T16:28:56.413
> 
> 标签：django, image, src

我想通过在 Django 模板文件“base.html”中使用 img src 标签来打印图像：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <title>Foto</title>
</head>
<body>
    <h1>My helpful timestamp site</h1>
    <img src="google.png" / >
    <hr>
    <p>Made by ... </p>
</body>
</html> 
```

在views.py中我定义：

```
def hello(request):
    return render_to_response('base.html') 
```

但是图像没有显示在浏览器中。如果我将它作为一个简单的 html 文件打开，它会显示在浏览器中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-03-05T09:54:36.993

在*django的最新版本中*

`<img src="{% static 'path/to/image.ext' %}"/>`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-18T16:55:46.120

发生这种情况是因为 Django 不知道该图像的路径。
创建一个名为 的文件夹`static/`，然后`images/`在项目根目录（settings.py 文件所在的位置）中创建一个文件夹。

```
my_project/
    my_project/ 
        settings.py
        static/
           images/
             google.png 
```

然后将其更改为：

```
<img src="{{STATIC_URL}}images/google.png" / > 
```

更多[在这里](https://docs.djangoproject.com/en/dev/howto/static-files/#basic-usage)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-23T06:39:52.793

您必须在**Django**模板的开头添加加载静态标签，祝您好运，下面的代码。

```
{% load static %} 
<img src="{% static 'path/to/image.ext' %}"/> 
```

# ios - 外部 swf 在 iOS 上播放速度很慢

> ID：12481174
> 
> 赞同：2
> 
> 时间：2012-09-18T16:29:01.043
> 
> 标签：ios, actionscript-3, apache-flex, air, flex4.6

我正在使用 as3 和 adobe air 编写一个应用程序，它加载外部 SWF 文件并在应用程序内部播放它们。该容器在 android 上运行良好，外部 swf 文件的动画非常酷。

但是，在 iOS (iPad 2) 上，它的运行速度非常慢，就好像它每秒只播放 1 帧一样。

有没有办法让它播放得更快。

我的应用程序配置如下：

```
<initialWindow>
    <autoOrients>false</autoOrients>
    <aspectRatio>landscape</aspectRatio>
    <renderMode>gpu</renderMode>
    <fullScreen>false</fullScreen>
    <visible>true</visible>
    <softKeyboardBehavior>none</softKeyboardBehavior>
</initialWindow> 
```

这是我加载外部 swf 的代码部分：

```
 public function set url(value:String):void
    {
        _url = value;
        object.source = File.applicationDirectory.resolvePath(value).url;
        object.addEventListener(Event.COMPLETE , onLoaded);
    }

    protected function onLoaded(event:Event):void
    {
        object.addEventListener(Event.ENTER_FRAME, onEnterFrame);

    }
    protected function onEnterFrame(event:Event):void
    {
        if((object.content as Object).currentFrameLabel == "stop")
            (object.content as Object).stop();
    } 
```

我还尝试评论 Enter frame 事件侦听器，但没有任何改变。

提前致谢。

编辑：我发现了一些非常奇怪的东西。当我从具有快速配置的应用程序运行应用程序时，它运行得很快。但是当我发布它或在运行时使用标准选项时，它的运行速度非常慢。经 AIR 3.2 测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:18:01.073

尝试将渲染模式设置为直接：

```
<renderMode>direct</renderMode> 
```

请记住，当您专门渲染到 GPU 时，如果您正在渲染动画，它会减慢速度。尽管渲染到 GPU 速度很快，但将显存分配给 GPU 却很慢。如果您将独占性渲染到 GPU，则在每一帧上，都需要更新视频内存。

另一件事是所有矢量都将被光栅化，因此有些东西会呈现像素化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:37:04.617

有几件事：

不允许在 AIR for iOS 中加载其中包含任何代码的 SWF。这是苹果公司禁止的。

在为 iOS 编译时，您最多只能将 swf 用作图形/资源库。如果里面的movieclip有stop(); 在其中一个帧上，那么这将被视为引擎盖下的“addFrameScript()”，这意味着 SWF 包含 ActionScript。

我建议如果您需要这样的功能，请创建一个预定义行为列表以编译到您的主应用程序中，然后根据您从 SWF 库中实例化的资产的类型或名称运行这些行为，并在运行时附加它们。

此外，如果您这样做是为了允许更新 - 或在发布后修改应用程序的能力，那么您也可以将其编译到发布版本中，并在下次需要更新应用程序时重新发布。这将在一定程度上帮助您在应用商店中的排名，并消除许多版本控制问题。

# sql - SQL Server 2008 中的日期比较

> ID：12481186
> 
> 赞同：0
> 
> 时间：2012-09-18T16:29:45.360
> 
> 标签：sql, sql-server-2008, between, date-comparison

我正在尝试比较日期，但我的查询没有返回任何结果。好奇我是否正确编写了查询？

```
SELECT *
FROM a, b               
WHERE
CONVERT(varchar(50),a.BirthDate, 101) between CONVERT(varchar(50),b.minage, 101) and CONVERT(varchar(50),b.maxage, 101) 
```

这个日期比较查询有什么问题吗？

表结构如下：

```
Table a:
Column Name     Datatype
Birthdate       Date

Table b's row:
Column Name     Datatype
minage          Date - calculated as : select DATEADD(year, -41, GETDATE())
maxage          Date - calculated as : select DATEADD(year, -21, GETDATE()) 
```

在表 B，Minage 中，每行的 maxage 标准都会发生变化。所以范围可以是 minage 0 max age 20, minage 50 maxage 60 等等（虽然范围不重叠）。

关于查询中可能有什么问题的任何想法？

我只需要比较/计算日期而不是小时或分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:32:04.603

不要将您的转换`date`为`string`. 这样做可能会导致按字符串和按日期进行的无效比较。

```
... WHERE a.BirthDate between b.minage and b.maxage 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:32:36.133

Remove all the converts (to varchar)

```
SELECT *
FROM a, b               
WHERE
a.BirthDate between b.minage and b.maxage 
```

if you need to remove the `Time` part of a `DateTime` you can do: `CAST(a.BirthDate AS Date)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T16:40:41.407

可能是我傻了。

看起来我不得不颠倒 minage 和 maxage 的顺序。

所以下面的查询有效：

SELECT *
FROM a, b
WHERE CONVERT(varchar(50),a.BirthDate, 101) 在 CONVERT(varchar(50),b.maxage, 101) 和 CONVERT(varchar(50),b.minage, 101) 之间

# c# - WPF：字节数组到后面代码中按钮上的图像

> ID：12481189
> 
> 赞同：0
> 
> 时间：2012-09-18T16:29:48.877
> 
> 标签：c#, wpf

![图像控件不包含图像。](../Images/d44c5b6fa9d452c63ce99d92e2d3aec0.png)

我尝试了很多东西的组合，但没有任何乐趣。

这是我认为应该有效的方法，但我得到一个空白按钮：

```
ImageConverter ic = new ImageConverter();
System.Drawing.Image img = (System.Drawing.Image)ic.ConvertFrom myByteArray);
Bitmap bitmap = new Bitmap(img);

MemoryStream ms = new MemoryStream();

ImageBrush brush = new ImageBrush();

bitmap.Save(ms, ImageFormat.Png);
ms.Position = 0

BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.CreateOptions = BitmapCreateOptions.None;
bi.CacheOption = BitmapCacheOption.OnLoad;
bi.StreamSource = ms;
bi.EndInit();

brush.ImageSource = bi;
button.Background = brush; 
```

欢迎任何建议......这也必须在后面的代码中完成。

# 编辑：

抱歉，只是补充一点，我正在使用 WPF、MVVM 方法。

此代码适用于一个对话框窗口，但**不适**用于另一个：

所以我从主窗口打开一个对话框窗口，然后打开另一个对话框窗口，这段代码很好地显示了按钮上的图像......但是当我打开第三个对话框窗口并尝试相同的代码时，按钮是空白的.. .

```
_stockButtons[i].Width = 100;
_stockButtons[i].Height = 100;

ImageBrush brush2 = new ImageBrush();
BitmapImage bitmap2 = new BitmapImage();
bitmap2.BeginInit();
bitmap2.UriSource = new Uri(@"C:\Users\Kevin\Pictures\test.jpg");
bitmap2.EndInit();
brush2.ImageSource = bitmap2;
_stockButtons[i].Background = brush2; 
```

如果我使用上面的代码将图像加载到窗口初始加载的按钮中，则图像显示正常...问题似乎是当我在左栏中选择一个按钮时，我会显示一个数量（ 1 个或多个）与单击的部门相关的项目的按钮。图像似乎在某处丢失或未正确拉入？这有意义吗？

## XAML：

```
<Window x:Class="Views.WindowsViews.SelectStockDialogWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ViewModel="clr-namespace:ViewModels;assembly=ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/core"
    xmlns:dxd="http://schemas.devexpress.com/winfx/2008/xaml/docking"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
    xmlns:Support="clr-namespace:Support;assembly=Support"
    xmlns:theme="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Royale"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Title="Select stock item"
    mc:Ignorable="d" WindowStartupLocation="CenterScreen" Width="585" Height="600" >

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Views;component/Styles/Brushes.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <dxd:DockLayoutManager Name="dlSalesScreen">
        <dxd:DockLayoutManager.LayoutRoot>
            <dxd:LayoutGroup Name="Root" Orientation="Horizontal" AllowSplitters="False">

                <dxd:LayoutPanel AllowClose="False" AllowRename="False" 
                                 Caption="Departments" HorizontalScrollBarVisibility="Hidden" 
                                 CaptionAlignMode="AutoSize"
                                 CaptionImageLocation="BeforeText" ShowPinButton="False" >

                    <!-- Scrollviewer for department buttons-->
                    <ScrollViewer x:Name="deptScrollviewer" Grid.Row="0" Grid.Column="0" Width="185" Height="Auto" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden" PanningMode="VerticalOnly">
                        <ItemsControl ItemsSource="{Binding Departments}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel VerticalAlignment="Top" Height="Auto" Orientation="Vertical" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </ScrollViewer>
                </dxd:LayoutPanel>

                <dxd:LayoutPanel AllowClose="False" AllowRename="False" 
                                 Caption="Available stock in department" Width="Auto" 
                                 CaptionAlignMode="AutoSize" 
                                 CaptionImageLocation="BeforeText"  ShowPinButton="False">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="50" />
                        </Grid.RowDefinitions>
                        <!-- Scrollviewer for stock buttons-->
                        <ScrollViewer x:Name="stockScrollViewer" Grid.Row="0" Width="Auto" Height="Auto" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" PanningMode="VerticalOnly">
                            <ItemsControl ItemsSource="{Binding StockItems, UpdateSourceTrigger=PropertyChanged}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <WrapPanel VerticalAlignment="Top" HorizontalAlignment="Left" Orientation="Horizontal" Width="400" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                            </ItemsControl>
                        </ScrollViewer>
                        <Rectangle Grid.Row="1" Margin="0,0,0,0" Height="Auto" Fill="{StaticResource BottomRectangleGradient}" />
                        <Grid Name="gridButtonHolder" Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <GroupBox x:Name="grpStockItem" Grid.Column="0" Header="Selected Item" HorizontalAlignment="Left" Width="200" >
                                <Label x:Name="lblStockName" Content="{Binding SelectedStockItemLabel}" HorizontalAlignment="Left" />
                            </GroupBox>
                            <Button Name="btnSave" Content="Apply" Command="{Binding ConfirmSelectionCommand}" dxc:ThemeManager.ThemeName="Office2007Blue" Grid.Column="1" Width="110" Height="42" Margin="0,8,0,0" />
                            <Button Name="btnClose" Content="Cancel" dxc:ThemeManager.ThemeName="Office2007Blue" Grid.Column="2" Width="110" Height="42" Margin="0,8,0,0" />
                        </Grid>
                    </Grid>
                </dxd:LayoutPanel>
            </dxd:LayoutGroup>
        </dxd:DockLayoutManager.LayoutRoot>
    </dxd:DockLayoutManager>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:42:44.100

试试这个（不使用 WinForms 图像）

```
ImageBrush brush;
BitmapImage bi;
using (var ms = new MemoryStream(myByteArray))
{
    brush = new ImageBrush();

    bi = new BitmapImage();
    bi.BeginInit();
    bi.CreateOptions = BitmapCreateOptions.None;
    bi.CacheOption = BitmapCacheOption.OnLoad;
    bi.StreamSource = ms;
    bi.EndInit();
}

brush.ImageSource = bi;
button.Background = brush; 
```

# jquery - 无法验证具有动态行的表单

> ID：12481190
> 
> 赞同：0
> 
> 时间：2012-09-18T16:29:51.660
> 
> 标签：jquery, html-table, jquery-validate

我无法验证具有动态行的表单。当我单击按钮时，我添加了新行。但这些行不验证。

```
$("#add").click(function() {
    //event.preventDefault();
    $v = $v+1;

    $("#zamowione_produkty").find('tbody')     
        .append($('<tr>')
            .append($('<td class = "licz">'+$v+'</td>'))
            .append($('<td><input type="text" name ="nazwa[]" size="40" class="required" /></td>'))
            .append($('<td><input type="text" name ="warianty[]"  size="60" class="required" /></td>'))
            .append($('<td><input type="text" name ="ilosc[]"  size="10" class="required" onkeypress=validate(event) /></td>'))
            .append($('<td><input type="text" name="data[]"  size="15" class="data required"  /></td>'))
        );

    $('.data').datepicker({dateFormat: 'yy-mm-dd'});
    $.datepicker.setDefaults( $.datepicker.regional[ "pl" ] ); 
```

Zamowione_produkty 是 form2 中的表格

添加验证

```
$(document).ready(function() {
    $("#form2").validate();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:34:09.967

我写了一篇关于如何[在动态内容上使用 jQuery 的不显眼验证](http://www.jasoncavett.com/2011/03/using-unobtrusive-jquery-validation.html)的博客文章。您可能希望将此作为一个很好的起点。

从那篇博客文章中，重要的部分是在添加新字段时设置验证。

```
$.ajax({
    type: 'GET',
    url: '/Home/TreeNode',
    data: {
        id: id
    },
    success: function(data) {
        $('#ajaxform').html(data);
        $.validator.unobtrusive.parse($("#validation"));  // this is important
    }
}); 
```

# c++-cli - 添加类 - 语法错误标识符“字符串”

> ID：12481191
> 
> 赞同：-1
> 
> 时间：2012-09-18T16:29:51.990
> 
> 标签：c++-cli

我正在尝试将新类添加到现有项目中。我的班级在 Windows 窗体应用程序项目中的 System::Windows::Forms::Form 类下工作正常。我想将我的类添加到该项目中，因为我想要不同文件中的所有类。但是当我想编译时出现错误“语法错误：标识符'字符串'”。当我删除 String 对象时，一切都可以编译。哪里有问题？

```
#ifndef ConGen
#define ConGen

template <class T> 
ref class GenerateControls
{

public:
    GenerateControls(int i , int j, int k,int l, int m)//, String ^ n)//, int o, int p)
    : size(i),x(j),y(k),rozstawx(l),rozstawy(m), name(n), sizex(o), sizey(p)
    {
        tablica = gcnew array < T ^ >(size);

        for ( int j = 0 ; j < i ; ++j)
        {
            tablica[j] = gcnew T(); 
            tablica[j]->Name = String::Concat(n,Convert::ToString(j));
            tablica[j]->Location = System::Drawing::Point(x+rozstawx*j,y+rozstawy*j);
            //tablica[j]->Size = System::Drawing::Size(sizex,sizey);
            tablica[j]->AutoSize = true;
            tablica[j]->Visible = true;
        }

    }
    ~GenerateControls()
    {
        //for ( int j = 0 ; j < size ; ++ j )
        //{
        //}
    }

property int Size
{
    void set(int value)
    {
        //if(value < 0 ) throw
        size=value;
    }
    int get()
    {
        return size;
    }
}
property array< T ^ > ^ Tablica
{
    array<T ^ > ^ get()
    {
        return tablica;
    }
}

void SetVisible ( int i)
{
    for( int j = 0 ; j < size ; ++j)
    {
        if ( j < i ) tablica[j]->Visible = true;
        else tablica[j]->Visible = false;
    }

}

void SetPosition( int x, int y, int odleglosc_x, int odleglosc_y, int ile)
{
    for ( int i = 0 ; i<ile ; ++i)
    {
        Tablica[i]->Location = System::Drawing::Point(x+odleglosc_x*i,y+odleglosc_y*i);
    }
}

private:
    array < T ^ > ^ tablica;
    int size;
    int x;
    int y;
    int rozstawx;
    int rozstawy;
    int sizex;
    int sizey;
//  String  ^ name;
};

#endif 
```

* * *

我想将我的代码参加一些课程，但发生了一些奇怪的事情。这是我的表单类：

```
#pragma once
#include "ConGen.h"

namespace Trening {

        using namespace System;
        using namespace System::ComponentModel;
        using namespace System::Collections;
        using namespace System::Windows::Forms;
        using namespace System::Data;
        using namespace System::Data::SqlClient;
        using namespace System::Drawing;

        public ref class okno2 : public System::Windows::Forms::Form
        {
        public:
                okno2(void)
                {
                        InitializeComponent();
                }

        protected:

                ~okno2()
                {
                        if (components)
                        {
                                delete components;
                        }
                }

        private:

        System::ComponentModel::Container ^components;

        System::Windows::Forms::TabControl ^ tabcontrol;
        System::Windows::Forms::TabPage ^ tabpage1;
        System::Windows::Forms::TabPage ^ tabpage2;
        System::Windows::Forms::TabPage ^ tabpage3;

        System::Data::SqlClient::SqlConnection ^ sqlcon;

        GenerateControls < System::Windows::Forms::TextBox > ^ tb1;
        GenerateControls < System::Windows::Forms::TextBox > ^ tb2;
        GenerateControls < System::Windows::Forms::TextBox > ^ tb3;

        GenerateLabels < System::Windows::Forms::Label > ^ lb1;
        GenerateLabels < System::Windows::Forms::Label > ^ lb2;
        GenerateLabels < System::Windows::Forms::Label > ^ lb3;

        array < String ^ > ^ stringtabs1;
        array < String ^ > ^ stringtabs2;
        array < String ^ > ^ stringtabs3;

        array < String ^ > ^ textboxtabs1;
        array < String ^ > ^ textboxtabs2;
        array < String ^ > ^ textboxtabs3;

        int clientwidth;
        int clientheight;

#pragma region Windows Form Designer generated code

                void InitializeComponent(void)
                {

                        clientwidth = 300;
                        clientheight = 300;

                        this->tabcontrol = gcnew System::Windows::Forms::TabControl();
                        this->tabpage1 = gcnew System::Windows::Forms::TabPage();
                        this->tabpage2 = gcnew System::Windows::Forms::TabPage();
                        this->tabpage3 = gcnew System::Windows::Forms::TabPage();

                        this->tabcontrol->SuspendLayout();
                        this->tabpage1->SuspendLayout();
                        this->tabpage2->SuspendLayout();
                        this->tabpage3->SuspendLayout();

                        // tabcontrol

                        this->tabcontrol->Alignment = System::Windows::Forms::TabAlignment::Top;
                        this->tabcontrol->Controls->Add(this->tabpage1);
                        this->tabcontrol->Controls->Add(this->tabpage2);
                        this->tabcontrol->Controls->Add(this->tabpage3);
                        this->tabcontrol->Dock = System::Windows::Forms::DockStyle::Fill;
                        this->tabcontrol->HotTrack = true;
                        this->tabcontrol->Location = System::Drawing::Point(0,0);
                        this->tabcontrol->Multiline = true;
                        this->tabcontrol->Name = L"tabcontrol";
                        this->tabcontrol->SelectedIndex = 0;
                        this->tabcontrol->ShowToolTips = true;
                        this->tabcontrol->Size = System::Drawing::Size(215,129);
                        this->tabcontrol->TabIndex =1;

                        // tb1 & lb1

                        tb1 = gcnew GenerateControls< System::Windows::Forms::TextBox >(10,85,80,0,30,"tb1",145,35);
                        //lb1 = gcnew GenerateLabels< System::Windows::Forms::Label >(10,20,80,0,30,"lb1",35,20);     <----------------------------- TU
                        // tabPage1

                        this->tabpage1->BackColor = System::Drawing::Color::PaleGreen;
                        this->tabpage1->Controls->AddRange(tb1->Tablica);
                        //this->tabpage1->Controls->AddRange(lb1->Tablica);
                        this->tabpage1->Location = System::Drawing::Point(4, 4);
                        this->tabpage1->Name = L"tabpage1";
                        this->tabpage1->Padding = System::Windows::Forms::Padding(3);
                        this->tabpage1->Size = System::Drawing::Size(207, 103);
                        this->tabpage1->TabIndex = 0;
                        this->tabpage1->Text = L"Dane";
                        this->tabpage1->ToolTipText = L"Informacje o użytkowniku";
                        this->tabpage1->UseVisualStyleBackColor = false;

                        //tb2 & lb2

                        tb2 = gcnew GenerateControls< System::Windows::Forms::TextBox >(10,85,80,0,30,"tb1",145,35);
                        //lb2 = gcnew GenerateLabels< System::Windows::Forms::Label >(10,20,80,0,30,"lb1",35,20);     <----------------------------- TU

                        // tabPage2

                        this->tabpage2->BackColor = System::Drawing::Color::Plum;
                        this->tabpage2->Controls->AddRange(tb2->Tablica);
                        //this->tabpage1->Controls->AddRange(lb2->Tablica);
                        this->tabpage2->Location = System::Drawing::Point(4, 4);
                        this->tabpage2->Name = L"tabpage2";
                        this->tabpage2->Padding = System::Windows::Forms::Padding(3);
                        this->tabpage2->Size = System::Drawing::Size(207, 103);
                        this->tabpage2->TabIndex = 1;
                        this->tabpage2->Text = L"Wymiary";
                        this->tabpage2->ToolTipText = L"Wymiary poszczególnych partii";
                        this->tabpage2->UseVisualStyleBackColor = false;

                        //tb3 & lb3

                        tb3 = gcnew GenerateControls< System::Windows::Forms::TextBox >(10,85,80,0,30,"tb1",145,35);
                        //lb3 = gcnew GenerateLabels< System::Windows::Forms::Label >(10,20,80,0,30,"lb1",35,20);     <----------------------------- TU
                        // tabPage3

                        this->tabpage3->BackColor = System::Drawing::Color::Plum;
                        this->tabpage3->Controls->AddRange(tb3->Tablica);
                        //this->tabpage1->Controls->AddRange(lb3->Tablica);
                        this->tabpage3->Location = System::Drawing::Point(4, 4);
                        this->tabpage3->Name = L"tabpage3";
                        this->tabpage3->Padding = System::Windows::Forms::Padding(3);
                        this->tabpage3->Size = System::Drawing::Size(207, 103);
                        this->tabpage3->TabIndex = 2;
                        this->tabpage3->Text = L"Osiągi";
                        this->tabpage3->ToolTipText = L"Twoje osiągi";
                        this->tabpage3->UseVisualStyleBackColor = false;

                        this->Controls->Add(this->tabcontrol);
                        this->tabcontrol->ResumeLayout(false);
                        this->tabpage1->ResumeLayout(false);
                        this->tabpage1->PerformLayout();
                        this->tabpage2->ResumeLayout(false);
                        this->tabpage2->PerformLayout();
                        this->tabpage3->ResumeLayout(false);
                        this->tabpage3->PerformLayout();

                        this->ResumeLayout(false);

                        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
                        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
                        this->ClientSize = System::Drawing::Size(clientwidth, clientheight);
                        this->Name = L"Form1";
                        this->Text = L"Form1";
                        this->ResumeLayout(false);
                }
#pragma endregion

                 }

        };
} 
```

这是 GenerateControls & GenerateLabels 类（在一个文件中，因为当它们被拆分时我无法编译）。

```
#ifndef ConGen
#define ConGen

using namespace System;
namespace Trening
{
        template <class T> 
        ref class GenerateControls
        {

        public:
                GenerateControls(int i , int j, int k,int l, int m, String ^ n, int o, int p)
                : size(i),x(j),y(k),rozstawx(l),rozstawy(m), name(n)//, sizex(o), sizey(p)
                {
                        tablica = gcnew array < T ^ >(size);

                        for ( int j = 0 ; j < i ; ++j)
                        {
                                tablica[j] = gcnew T();        
                                tablica[j]->Name = String::Concat(n,Convert::ToString(j));
                                tablica[j]->Location = System::Drawing::Point(x+rozstawx*j,y+rozstawy*j);
                                //tablica[j]->Size = System::Drawing::Size(sizex,sizey);
                                tablica[j]->AutoSize = true;
                                tablica[j]->Visible = true;
                        }

                }
                ~GenerateControls()
                {
                        //for ( int j = 0 ; j < size ; ++ j )
                        //{
                        //}
                }

        property int Size
        {
                void set(int value)
                {
                        //if(value < 0 ) throw
                        size=value;
                }
                int get()
                {
                        return size;
                }
        }
        property array< T ^ > ^ Tablica
        {
                array<T ^ > ^ get()
                {
                        return tablica;
                }
        }

        void SetVisible ( int i)
        {
                for( int j = 0 ; j < size ; ++j)
                {
                        if ( j < i ) tablica[j]->Visible = true;
                        else tablica[j]->Visible = false;
                }

        }

        void SetPosition( int x, int y, int odleglosc_x, int odleglosc_y, int ile)
        {
                for ( int i = 0 ; i<ile ; ++i)
                {
                        Tablica[i]->Location = System::Drawing::Point(x+odleglosc_x*i,y+odleglosc_y*i);
                }
        }

        void SetSize( int x, int y, int ile)
        {
                // if (ile > Size ) throw
                for ( int i = 0 ; i < ile ; ++i)
                {
                        Tablica[i]->Size = System::Drawing::Size(x, y);
                }
        }

        private:
                array < T ^ > ^ tablica;
                int size;
                int x;
                int y;
                int rozstawx;
                int rozstawy;
                int sizex;
                int sizey;
                String  ^ name;

        };

        #include "ConGen.h" // skopiowałem poprzez crtl + a całą klasę i zapomniałem usunąć tej linijki.
using namespace System;

template < class T >
        ref class GenerateLabels : public GenerateControls< T > //: public SetControlText< T >
        {
                public:

            GenerateLabels(int i , int j, int k,int l, int m, String ^ n, int o, int p)
                :GenerateControls( i,j,k,l,m,n,o,p)
                {
                }
                ~GenerateLabels()
                {
                }

                void SetText( array< String ^ > ^ name)
                {
                        int i = 0;
                        //if (name.Size != controlarray.Size ) throw 
                        for each ( String ^ str in name)
                        {
                                Tablica[i++]->Text = str;
                        }
                }

        };
}
#endif 
```

没有代码女巫被标记为“<--------Tu”我得到了这样的错误（他在头等舱okno2）。

```
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: tablica): (0x04000033).
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: size): (0x04000034).
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: x): (0x04000035).
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: y): (0x04000036).
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: rozstawx): (0x04000037).
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: rozstawy): (0x04000038).
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: sizex): (0x04000039).
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: sizey): (0x0400003a).
1>Trening.obj : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; fields: name): (0x0400003b).
1>Trening.obj : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (Trening.GenerateControls<System::Windows::Forms::Label>): (0x02000005).
1>Trening.obj : error LNK2022: metadata operation failed (8013118B) : Inconsistent implemented interfaces in duplicated types (types: Trening.GenerateControls<System::Windows::Forms::Label>; interfaces: System.IDisposable): (0x09000002).
1>LINK : fatal error LNK1255: link failed because of metadata errors 
```

我认为 GenerateLabels 类有问题。因为当那个类的实例没有被初始化时，我得到了那个错误。使用 GenerateControls 一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:29:40.753

`using namespace System;`我在您的代码中没有看到 a 。您在复制/粘贴到网络时是否修剪了它，还是需要添加它？

我看到您通过它们的完整名称空间引用 System::Drawing::Point 和 System::Drawing::Size，您可能只需要 System::String 的 using 指令。

# c++ - 匿名 std::ofstream 错误地处理字符数组

> ID：12481196
> 
> 赞同：6
> 
> 时间：2012-09-18T16:30:15.423
> 
> 标签：c++, stl

以下代码将字符串文字输出到具有匿名和命名流的文件：

```
#include <fstream>

using namespace std;

int main()
{
    ofstream("testfile") << "test" << endl;

    ofstream ofs ("testfile2");
    ofs << "test2" << endl;

    return 0;
} 
```

从 strace 的输出中可以看出，只有命名流有效：

```
open("testfile", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
write(3, "0x400a91\n", 9)               = 9
close(3)                                = 0
open("testfile2", O_WRONLY|O_CREAT|O_TRUNC, 0666) = 3
write(3, "test2\n", 6)                  = 6
close(3)                                = 0 
```

此外，如果您使用 std::string 而不是文字，则无法编译。

为什么是这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T16:38:30.947

您有一个问题，即“匿名流”是一个右值，而使用 C++98，您只能在其上调用成员函数。将`stream << "test"`绑定到采用 a 的成员，该成员`void*`输出指针的地址。

C++11 添加了一个`operator<<`采用右值流的方法，这将使代码正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T16:56:04.220

在 C++03 中，输出字符指针和字符串的非成员运算符不能用右值调用，因为它们需要左值引用，所以`operator<<(const void *)`调用成员。在 C++11 中，这是通过编写采用右值引用的重载来解决的，但在 C++03 中，您可以通过调用返回左值引用的成员函数或成员运算符来解决它（请注意，非常量成员函数*可以*在右值上调用）：

```
ofstream("testfile").write("", 0) << "test" << endl; 
```

您可以轻松编写一个操纵器来执行此操作：

```
std::ios_base& (*do_nothing)(std::ios_base&) ) {}

ofstream("testfile") << do_nothing << "test" << endl; 
```

# node.js - 通过 Gitolite 和 post-receive hook 部署节点应用

> ID：12481197
> 
> 赞同：1
> 
> 时间：2012-09-18T16:30:17.917
> 
> 标签：node.js, unix, deployment, permissions, gitolite

我正在尝试为使用 Gitolite 的 Node 应用程序提供一个相当简单的部署过程。我有 Gitolite 设置并在我的服务器上工作，我能够很好地推动它。

Gitolite 在名为 的用户下运行`git`，我已经设置了一个`node`希望用来运行 Node 应用程序的用户。

我的计划是将 Node 应用程序推送到 Gitolite，然后使用 post-receive 挂钩脚本将应用程序文件移动到应用程序所在的目录，在本例中为`/var/local/node-apps/my-node-app/`. 我像这样创建了 Node 应用程序文件夹：

```
sudo mkdir -p /var/local/node-apps/my-node-app
sudo chown node /var/local/node-apps/my-node-app 
```

问题是我是一个 Unix 菜鸟，我没有得到我的头文件/文件夹权限和 wotnot。

`/var/local/node-apps`(and also `/var/local/node-apps/my-node-app`) 归`node`用户所有，因此当`git`用户尝试结帐到该位置时，我会收到一堆权限被拒绝错误。我在接收后使用的命令是：

```
GIT_WORK_TREE=/var/local/node-apps/my-node-app git checkout -f 
```

我得到这样的错误：

```
remote: error: git checkout-index: unable to create file XXXX (Permission denied)
remote: fatal: cannot create directory at 'XXXX': Permission denied 
```

解决此问题的最佳方法是什么？我是否需要以用户身份授予用户`git`无密码 sudo 权限？或者可以通过更改组和文件夹权限以某种方式解决这个问题？还是完全不同的方法？我迷路了！`su``node`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:49:10.870

使用 sudo 肯定会起作用，在“[接收后挂钩权限被拒绝”无法创建文件“错误](https://stackoverflow.com/questions/11211950/post-receive-hook-permission-denied-unable-to-create-file-error)”中有一个示例，将 git 命令包装在脚本中。

> 收到后更改为：

```
sudo sh /usr/local/sbin/prgetsimpleappscom 
```

> 用 visudo 改变了 sudoers

```
git ALL = (root) NOPASSWD: /bin/sh /usr/local/sbin/prgetsimpleappscom 
```

另一种方法是 cron 作业，因为`node`用户定期获取并（如果有新提交）拉入目标存储库。

# android - 硬件加速支持的设备列表？

> ID：12481198
> 
> 赞同：2
> 
> 时间：2012-09-18T16:30:19.920
> 
> 标签：android, hardware-acceleration

我对 Android 上的硬件加速有疑问。设备的 android API 级别 >= 11 是否意味着它必须支持硬件加速？

如果没有，有没有办法检测设备是否支持硬件加速？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T17:10:25.053

您可以从多个级别启用或禁用硬件加速，请参阅此链接了解更多信息，请访问：http: [//developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)。在 View 中，您可以使用例如 View.isHardwareAccelerated() 来测试硬件加速

# iphone - 你怎么知道 UITableView 何时完成更新它的视图？

> ID：12481199
> 
> 赞同：2
> 
> 时间：2012-09-18T16:30:30.623
> 
> 标签：iphone, ios, uitableview

所以我`UITableViewDataSource`使用`NSFetchedResultsController`.

然后我修改核心数据库的内容，`NSFetchedResultsController`然后更新 tableView..

无论如何要知道 tableView 何时完成重新加载数据？

我们有一个针对 REST 实现进行缓存的复杂数据模型，很难确定我们是否需要获取更多数据来填满屏幕（因为屏幕可能对加载的原始数据使用复杂的过滤器）。此外，`UITableViewCell`不能保证对象的高度相同。

简单的答案是简单地将数据转储到核心数据，并使用`NSFetchedResultsController`将数据提供给`UITableView`.

下面是它的工作原理：

*   我们添加了一个 tableview.tableFooterView 来显示我们的“数据加载”消息。
*   从 REST API 加载一批数据，然后使用它更新我们的核心数据对象。
*   这会触发触发的`controllerDidChangeContent`方法，然后触发一个tableView reloadData (eg:)

    ```
    - (void)controllerDidChangeContent:(NSFetchedResultsController *)controller 
    {
       [self.tableView reloadData];
    } 
    ```

*   然后我们基本上然后通过调用如下方法“检查”250 毫秒后页脚是否仍然可见：

    ```
    [self performSelector:@selector(checkIfFooterViewIsVisible) withObject:nil afterDelay:0.25];

    - (void)checkIfFooterViewIsVisible
    {
      BOOL viewVisible = CGRectIntersectsRect(self.tableView.bounds,self.tableView.tableFooterView.frame);
      if (viewVisible)
      {
        [self getMoreData];
      } 
    ```

*   我们还会在每次滚动时检查页脚是否在视图中。

    ```
    - (void)scrollViewDidScroll:(UIScrollView *)scrollView
    {
        [self checkIfFooterViewIsVisible];
    } 
    ```

*   如果我们加载“最后一批”数据，我们实际上只是`tableViewFooter`从表中删除了视图对象（因此它永远不可见）。

所以答案很酷，因为我们可以确定是否需要提取更多数据，前提是用户“需要”它。要么是因为第一批没有太多可见数据，要么是因为他们向下滚动并想要更多数据。检查当前位置`tableFooterView`可以让我们知道我们是否在屏幕上“绘制”了足够的数据。

问题是 - 我可以摆脱：

```
[self performSelector:@selector(checkIfFooterViewIsVisible) withObject:nil afterDelay:0.25]; 
```

如果我们将延迟设置得太快，则`UITableView`没有时间更新屏幕（并更改页脚的位置）。如果我们更新太慢，那么感觉就像应用程序在加载数据时“卡顿”一样，并且加载数据的速度可能比它可以加载的慢。但是不同的 iOS 设备（以及不同的网络覆盖范围）意味着时间会略有不同，因此“让`UITableView`更新并稍后检查”大部分时间都有效，但我觉得这可以更顺畅。

无论如何（可能通过重载`UITableView`）我们可以确定`UITableView`“完成”加载`UITableViewCell`对象吗？（至少直到下一次滚动移动？）。添加这个奇怪的延迟效果很好，但如果我们明确知道`[tableview reloadDate]`操作已经完成，它会更干净。

# c# - Arduino的C#串口通信

> ID：12481205
> 
> 赞同：0
> 
> 时间：2012-09-18T16:30:59.460
> 
> 标签：c#, arduino

我用 C# 为我的 Arduino 做了一个小应用程序。一切正常，但问题出在我的应用程序中。用户可以在 numericUpDown 中选择他/她的 COM 端口。

它可以工作，但是如果用户选择了错误的端口并尝试连接，它就会崩溃，所以我想我需要一个 IF statmant 来提供消息。比如端口不对等，但是不知道怎么弄。我该怎么做？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.IO.Ports;

namespace IO_Arduino_experiment_project
{
    public partial class Form1 : Form
    {
        public static System.IO.Ports.SerialPort serialPort1;
        private delegate void LineReceivedEvent(string line);
        public Form1()
        {
            InitializeComponent();
            button5.Enabled = false;
            button2.Enabled = false;
            button3.Enabled = false;
        }

        private void button1_Click(object sender, EventArgs e) // Connect Button
        {
            System.ComponentModel.IContainer components = new System.ComponentModel.Container();
            serialPort1 = new System.IO.Ports.SerialPort(components); // Creating the new object.
            serialPort1.PortName = "COM" + numericUpDown1.Value.ToString(); // Setting what port number.
            serialPort1.BaudRate = 9600;
            serialPort1.DtrEnable = true;
            serialPort1.Open(); // Open the port for use.
            button1.Text = "Connected.";
            button1.Enabled = false;
            numericUpDown1.Enabled = false;
            button5.Enabled = true;
            button2.Enabled = true;
            button3.Enabled = true;
        }

        private void numericUpDown1_ValueChanged(object sender, EventArgs e)
        {

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (serialPort1.IsOpen) serialPort1.Close();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            serialPort1.Write("1");
            textBox1.Text = "LED is on!";
            button2.Enabled = false;
            button3.Enabled = true;
        }

        private void button3_Click(object sender, EventArgs e)
        {
            serialPort1.Write("0");
            textBox1.Text = "LED is off!";
            button2.Enabled = true;
            button3.Enabled = false;
        }

        private void button4_Click(object sender, EventArgs e)
        {
            Close();
        }

        private void button5_Click(object sender, EventArgs e)
        {
            serialPort1.Close();
            button1.Enabled = true;
            numericUpDown1.Enabled = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:44:09.957

`ComboBox`您真的应该用表单打开或单击刷新按钮时（或通过其他自动方式，如计时器）填充的或其他列表控件/菜单替换数字向上/向下。

`ComboBox`或`List`可以使用以下方法填充：`GetPortNames`-

```
String[] pNames;
pNames = System.IO.Ports.SerialPort.GetPortNames(); 
```

如果您想做您所描述的事情，那么您可以使用类似的代码在尝试使用之前查找端口以查看它是否存在：-

```
if (System.IO.Ports.SerialPort.GetPortNames().indexOf("COM" +  thePortNum.ToString())>-1) 
```

请注意，`GetPortNames()`返回这样的列表：-

```
 COM1
 COM10
 COM12 
```

# heroku - Heroku 错误：Bamboo - Cedar 升级后没有这样的文件或目录

> ID：12481206
> 
> 赞同：0
> 
> 时间：2012-09-18T16:31:03.593
> 
> 标签：heroku, bamboo, cedar

我已按照[此处](https://devcenter.heroku.com/articles/cedar-migration)的说明将我的应用程序从 Bamboo 升级到 Cedar 。我现在的问题是，每当我在新的 heroku 应用程序上运行任何 heroku 命令时，我都会收到以下错误

```
$ heroku run rake db:migrate --app my-app  
Running `rake db:migrate` attached to terminal... up, run.1  
Error: No such file or directory 
```

该错误没有告诉我哪个文件导致了这个问题，所以大多数相关帖子都不适用于这个特定问题

同样的错误发生在`heroku run console`, 甚至`heroku run why_wont_this_work`

我尝试`heroku update`过，因为没有 Heroku Toolbelt 而被骂，安装了它，但仍然因为没有 Heroku Toolbelt 而被骂。

# c++ - OpenCV 和 PCL 冲突？

> ID：12481208
> 
> 赞同：3
> 
> 时间：2012-09-18T16:31:23.383
> 
> 标签：c++, visual-studio-2010, opencv, point-cloud-library

我正在使用 OpenCV 2.4.2 和点云库 1.6.0。

在我添加该行之前，我的程序运行良好...

```
#include <pcl/segmentation/segment_differences.h> 
```

**当我尝试编译时，这会导致错误。我得到...**

```
Error   93  error C2872: 'flann' : ambiguous symbol C:\Program Files (x86)\PCL 1.6.0\include\pcl-1.6\pcl\kdtree\kdtree_flann.h  424
Error   94  error C2872: 'flann' : ambiguous symbol C:\Program Files (x86)\PCL 1.6.0\include\pcl-1.6\pcl\kdtree\kdtree_flann.h  425
Error   95  error C2872: 'flann' : ambiguous symbol C:\Program Files (x86)\PCL 1.6.0\include\pcl-1.6\pcl\kdtree\kdtree_flann.h  427
Error   96  error C2872: 'flann' : ambiguous symbol C:\Program Files (x86)\PCL 1.6.0\include\pcl-1.6\pcl\kdtree\kdtree_flann.h  514
Error   97  error C2872: 'flann' : ambiguous symbol C:\Program Files (x86)\PCL 1.6.0\include\pcl-1.6\pcl\kdtree\kdtree_flann.h  520

C:\Program Files (x86)\PCL 1.6.0\include\pcl-1.6\pcl/kdtree/kdtree_flann.h(520): error C2872: 'flann' : ambiguous symbol
              could be 'flann'
              or       'cv::flann' 
```

所以看起来 OpenCV 附带的 Flann 文件与 PCL 中的 Flann 文件发生冲突。

有什么建议么？

## 编辑

这里有一个类似的问题 [PCL, OpenCV and flann conflict](https://stackoverflow.com/questions/11918504/pcl-opencv-and-flann-conflict?rq=1) 但这是一个略有不同的错误......

## 编辑 2

所以在我以前的 main.cpp 文件中

使用命名空间 pcl；使用命名空间简历；

我将这两个注释掉并更新了程序以使用 cv::Mat 等。

但是当我添加时我仍然在编译过程中遇到错误......

```
#include <pcl/segmentation/segment_differences.h>

C:\Program Files (x86)\PCL 1.6.0\include\pcl-1.6\pcl/kdtree/kdtree_flann.h(520): error C2872: 'flann' : ambiguous symbol 
          could be 'flann' 
          or       'cv::flann' 
```

I've just tried renaming include\opencv2\flann\ to include\opencv2\flanncv\ and updating the includes in a bunch of opencv headers to this new flanncv directory. I'm still getting the above error...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:07:03.670

So a fix for this without having to rebuild things is to add a null namespace to it

change instances of flann::something to ::flann::something

I think it's effectivly telling it to use the global namespace and not the cv namespace.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:01:20.167

Well I´m using pcl and openCv under linux but here goes

The problem is that both librarries are including the header file flann/flann.hpp or something similar, where the namespace flann is defined.

Now I don´t know how the libraries are installed on your machine, but I´ll assume that you used an insallable version of pcl and of openCv, so each one came with its own flann library.

Usually in the CMakeLists of both libraries there´s a line to search for the flann libraries, something like: INCLUDE_LIBRARY($(flann) REQUIRED)

a solution might be to remove the two installed libraries pcl and openCv. then download and install flann from their website. then download the nightly build of openCv and pcl, compile them and they should both be able to find the same instance of flann and so the problem might be solved

**Edit:** One more idea, maybe the problem is simply because you used in your code:

```
using namespace pcl;
using namespace cv; 
```

and so you have 2 different instances from flann namespace. remove both "using namespace" and use instead in your code pcl::thepclclass, cv::theopencvclass and see if this helps

good luck

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T17:49:37.303

The solution simply is to add double colon like this (`::`) before flann Then everything will work well.

For example, it was:

```
flann::Matrix<ElementType>(new ElementType[size_*dim_], size_, dim_); 
```

became:

```
::flann::Matrix<ElementType>(new ElementType[size_*dim_], size_, dim_); 
```

# php - 标头已发送 - 从 PHP 中的函数下载文件

> ID：12481214
> 
> 赞同：0
> 
> 时间：2012-09-18T16:32:00.987
> 
> 标签：php, mysql, header

我正在尝试创建一个允许用户下载文件的功能。当我单击一个按钮下载文件时，此函数被调用，我收到“无法修改标头信息 - 标头已发送”错误。

据我所知，“标头已发送......”错误是由空格引起的，但我似乎找不到任何东西。有什么我没有考虑到的吗？这不是它所在页面上的唯一功能。我必须以特殊方式加载页面吗？

```
function serveFile($fileID){
    $sql = mysql_query("select filename from files where id = '$fileID'");
    $file = mysql_fetch_array($sql);

    header('Content-type: text/plain');

    header('Content-Disposition: attachment; filename="'.$file['filename'].'" ');

    readfile('/user_files/'.$fileID.' ');
} 
```

**更新 - 我得到了它的工作，感谢您的提示。我将函数调用移至页面顶部。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:35:35.227

检查 HTML 文件中是否有空格。

在你开始为这个问题吐出你的标题之前，只需要一个空格。

有关更多详细信息，请参阅此内容： [如何修复 PHP 中的“标头已发送”错误](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php?lq=1)

# ios - 使用 CoreData 令人失望的 iOS 搜索时间

> ID：12481217
> 
> 赞同：4
> 
> 时间：2012-09-18T16:32:06.713
> 
> 标签：ios, core-data, full-text-search, uisearchbar, nsfetchrequest

我有一个在 iOS 5.1.1 的 ipad 上运行的 coredata db。我的数据库中有大约 50,000 家公司。我在公司名称属性上创建了一个索引。我正在搜索此属性，有时会通过 fetchRequest 返回数千条记录。

当返回数千条记录时，可能需要几秒钟才能从获取中返回。这使得预先输入的搜索非常笨拙。

我预计将来会有更大的数据库。实现真正快速的搜索功能有哪些选择？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:35:03.257

我建议观看最近几次 WWDC 的核心数据性能视频。他们经常谈论改善这种瓶颈的策略。视频中的一些建议：

*   将名称字段反规范化为单独的“不区分大小写和变音符号”字段，并使用或`searchString`代替在该字段上进行搜索。避免和通配符。`<``<=``BEGINSWITH``MATCHES`
*   限制`NSFetchRequest`using`fetchLimit`和`fetchBatchSize`
*   如果您的公司对象很大，您可以将一些关键数据项提取到一个单独的较小的“标题”对象中，该对象仅用于搜索界面。然后在用户进行选择时将关系添加回主对象。

一些指向几个视频的指针（还有其他年份的更多视频）：

WWDC 2012：第 214 场会议 - 核心数据最佳实践：45:00

WWDC 2010：第 137 场会议 - 优化 iPhone OS 上的核心数据性能：34:00

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:04:30.307

虽然 Core Data 在许多情况下是正确的工具，但无论如何它都不是灵丹妙药。

查看这篇文章，其中讨论了一些优化策略以及 SQL 数据库是您更好选择而不是 Core Data 的情况：

[http://inessential.com/2010/02/26/on_switching_away_from_core_data](http://inessential.com/2010/02/26/on_switching_away_from_core_data)

老实说，在这种情况下，使用 SQL 数据库而不是 Core Data 可能会更好，因为当您尝试访问 Core Data 实体上的属性值时，通常会导致错误并将对象拉入活动内存......这肯定有性能和速度成本。使用真正的数据库 - Core Data 不是真正的数据库，请参阅[http://cocoawithlove.com/2010/02/differences-between-core-data-and.html](http://cocoawithlove.com/2010/02/differences-between-core-data-and.html) - 您可以查询数据库而无需从中创建对象。

# java - System.out.println 不工作

> ID：12481219
> 
> 赞同：-1
> 
> 时间：2012-09-18T16:32:23.907
> 
> 标签：java

我使用 eclipse 很长时间了，这从未发生过，但我有这个非常简单的程序。它不显示任何东西。可能是什么原因？

```
public class ReportGenerator {

    public static void main(String[] args){
        System.out.println("STARTING");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:35:44.953

试试`Window -> Show View -> Console`控制台是否不可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-25T15:56:20.040

如果你正在做`javac ReportGenerator.java`，它只是构建一个 .class 文件。您需要运行`java ReportGenerator`以查看程序是否正常工作，因此在您的情况下可以在终端上打印。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T16:36:21.643

Eclipse 中打开的控制台太多？

这是参考：[http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fconsole%2Fref-open_action.htm](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/console/ref-open_action.htm)

单击灰色 X，直到它们全部关闭。

# php - 从动态创建的页面动态创建弹出窗口 - Mysql

> ID：12481220
> 
> 赞同：-1
> 
> 时间：2012-09-18T16:32:24.030
> 
> 标签：php, javascript, jquery, mysql

我创建了一个页面，其中 Mysql 行显示为动态创建的图像网格。我可以完全控制网格显示，但我需要从显示的每个图像中获取（Mysql）行 ID，并在某种弹出窗口中使用它。

我不喜欢每个 Mysql 行都有一个完整的页面。

它可以将其传递到一个新的较小的信息页面（动态），也可以是带有信息（动态）的弹出窗口。我更喜欢弹出窗口，因为我想这对眼睛来说更容易。

所以我需要一个关于弹出功能的建议，它将在点击时加载/设置行 ID。

我已经看到了用于制作弹出窗口的 Jquery 解决方案，但我需要传入每个显示的图像都已设置的变量。这就是我失败的地方。

提前致谢。

/尼尔斯

** 这是我尝试过的事情之一，但我无法真正弄清楚以正确方式传递它的方法：

```
echo "<p><a href=\"javascript:Popup('show.php?id=" .$row['user_id'] ')\">Show</a>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:35:58.070

当您在 PHP 中呈现页面时，您可以使用数据属性`<div data-mydata='foo' />`来存储您需要的 ID。然后，使用 jQuery，使用 data() 函数访问数据并呈现您需要的任何弹出窗口。

HTML 5 数据属性：[http ://ejohn.org/blog/html-5-data-attributes](http://ejohn.org/blog/html-5-data-attributes)

jQuery 参考：[http ://api.jquery.com/data](http://api.jquery.com/data)

# c++ - 在 XCode 上使用 SDL 框架时遇到问题

> ID：12481229
> 
> 赞同：3
> 
> 时间：2012-09-18T16:33:04.683
> 
> 标签：c++, xcode, macos, sdl, libraries

我在我的 xcode 项目中使用 SDL 框架时遇到问题，我的主要（目前项目中的所有内容）目前看起来像这样：

```
#include <SDL/SDL.h>
#include <iostream>

int main(int argc, const char * argv[])
{
// insert code here...
std::cout << "Hello, World!\n";
return 0;
} 
```

我在构建时收到的错误是：

> 架构 x86_64 的未定义符号：“_main”，引用自：从 crt1.10.6.o 开始（也许您的意思是：__Z8SDL_mainiPPKc） ld：未找到架构 x86_64 的符号 clang：错误：链接器命令失败，退出代码 1（使用 -v 查看调用）

它不会给我关于找不到框架的错误。我已经在 Stackoverflow 上查看了这个问题，我确实找到了一个人，他们的框架在他们的操作系统上的错误位置。但是我已经尝试了所有地方（/library/frameworks && /~username~/library/frameworks && /system/library/frameworks），但仍然没有运气。

附加信息：然而，在互联网上搜索后，我确实注意到官方网站[http://www.libsdl.org/download-1.2.php](http://www.libsdl.org/download-1.2.php) 没有 OSX 版本的开发库。虽然许多关于如何在 OSX 上使用 SDL 的教程都说这些是必需的。

我也通过 Xcode 本身添加我的库，而不是通过拖放。Xcode 似乎承认它。

如果有人可以提供帮助，将不胜感激，因为这个错误而发疯。

更新：

![错误](../Images/98c7d09233f980b35c5467364d81c613.png)

仍然没有运气，我已经按照下面的解决方案提供的每一步操作。也许这个截图有任何帮助。

main() 函数已更正，但没有帮助。我尝试更改头文件的路径，我迷失了这个。有没有人可以在 xcode 中构建它？

更新2：

该建议有效，但现在它给了我这个警告，它不会让我运行应用程序。

![在此处输入图像描述](../Images/91057a4045a2f167bc463b3191ef039c.png)

固定的！我删除了构建设置中的路径。奇怪的是，我仍然不知道出了什么问题，无论哪种方式。非常感谢您的帮助！成就了我的一天！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:58:16.567

我看到三个可能的问题。第一个问题是如何在代码中包含 SDL.h。您应该在 SDL.h 中包含以下代码：

```
#include "SDL.h" 
```

第二个可能的问题是您没有将文件 SDLMain.h 和 SDLMain.m 添加到您的项目中。这些文件是在 Mac OS X 上编译 SDL 代码所必需的。这些文件位于 SDL 磁盘映像的 devel-lite 文件夹中。

第三个可能的问题是您的项目没有链接到 Cocoa 框架。SDL 的 Mac 版本使用 Cocoa，因此您的项目中需要 Cocoa 框架。

以下文章将引导您为 SDL 设置 Xcode 4 项目：

[在 Xcode 4 中使用 SDL](http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/)

更新

我注意到您定义 main() 函数的方式可能存在问题。您在 char 和 * 之间有一个空格，在 * 和 argv 之间有另一个空格，这可能会导致错误。我的 SDL 代码中的 main() 函数定义如下：

```
int main(int argc, char *argv[]) 
```

# c++ - 使用 boost::spirit 解析任意精度整数

> ID：12481240
> 
> 赞同：3
> 
> 时间：2012-09-18T16:33:23.487
> 
> 标签：c++, integer, boost-spirit-qi, arbitrary-precision

我想为任意整数创建 boost::spirit::qi::grammar 。将整数存储到字符串只是感觉非常浪费内存，尤其是当整数以二进制格式表示时。如何在结构中使用任意精度整数类（例如 GMP 或 llvm::APInt）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:09:45.733

如果你有一个包含一系列任意长整数的文本文件，那么 Qi 肯定可以用来非常有效地将该文件解析为单独的数字，以文本标记的形式呈现。如何将这些标记转换为 GMP 数字取决于您，但我建议库提供的通过文本输入数字的机制比您可能想出的任何东西都更优化。

如果您问 Qi 是否可以适应读取包含任意长数字的二进制文件，那么答案是肯定的 - 已经支持二进制解析器，请参见此处： http: [//www.boost.org/doc/libs/ 1_48_0/libs/spirit/doc/html/spirit/qi/reference/binary.html](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/qi/reference/binary.html)。我不确定您的目标数学库整数的格式，我的猜测是您可以将这些原语链接在一起以直接读取数字的二进制表示。或者，您可以基于其中之一设计自己的解析器原语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-26T00:57:42.343

看起来彼得在这里提出了错误的问题。

从那以后，我回答了他自己的问题[Parse absolute precision numbers with Boost spirit](https://stackoverflow.com/questions/67253104/parse-arbitrary-precision-numbers-with-boost-spirit/67255937#67255937)，它确实专注于 LLVM 的 APInt 类型。

然而，在这个过程中，我——当然——展示了如何使用 Boost 多精度类型。

我将添加以下注释以更公正地解决*这个*问题的重点：

1.  从文件中读取时，使用文件映射和 raw`char*`而不是`istream`和流迭代器。我碰巧刚刚在这里的另一个答案线程中证明了它的速度：[评论链接](https://stackoverflow.com/questions/67232482/boost-fibonacci-heap-access-violation-during-pop/67238518#comment118883383_67238518)：

    > 所以这里是如何优化阅读：coliru.stacked-crooked.com/a/0dcb8a05f12a08a5。现在一切都在 ~1.28s 看起来疯狂优化
    > 
    > ![](../Images/aaf27987c6ed0416b461cd8a6d0344bb.png)
    > 
    > [...] 从解析它 s/double_/float_/g 中减少几毫秒的唯一方法，但我不会，因为它从 Graph 模型中删除了通用性。–[嘿 3 小时前](https://stackoverflow.com/questions/67232482/boost-fibonacci-heap-access-violation-during-pop/67238518#comment118883383_67238518)

2.  通常在使用 boost 多精度类型时，您会发现必须禁用表达式模板。另外，我认为真正的任意精度类型往往不能很好地与. 一起使用`int_parser<>`，但是当我尝试时，固定精度类型都可以。

3.  如果不需要，请考虑**根本不解析所有数字。**您可以“懒惰地”解析一些文件，只检测例如行边界或其他结构元素。然后在需要时，您可以详细解析感兴趣的片段。

    我有一个非常详细的答案，在内存映射的文本文件中显示了这一点（[使用 boost::iostreams::mapped_file_source 和 std::multimap](https://stackoverflow.com/questions/28217301/using-boostiostreamsmapped-file-source-with-stdmultimap/28220864#28220864)），您可以在没有任何内存开销的情况下对多千兆字节文件进行二进制搜索，并且然后只解析相关区域：

    **[Live On Coliru](http://coliru.stacked-crooked.com/a/84744b7f8bfdd93b)**（包括生成测试数据）

    ```
    #define NDEBUG
    #undef DEBUG
    #include <boost/iostreams/device/mapped_file.hpp>
    #include <boost/utility/string_ref.hpp>
    #include <boost/optional.hpp>
    #include <boost/spirit/include/qi.hpp>
    #include <thread>
    #include <iomanip>

    namespace io = boost::iostreams;
    namespace qi = boost::spirit::qi;

    template <typename Key, typename Value> 
    struct text_multi_lookup {
        text_multi_lookup(char const* begin, char const* end)
            : _map_begin(begin), 
              _map_end(end)
        {
        }

      private:
        friend struct iterator;
        enum : char { nl = '\n' };

        using rawit = char const*;
        rawit _map_begin, _map_end;

        rawit start_of_line(rawit it) const {
            while (it > _map_begin) if (*--it == nl) return it+1;
            assert(it == _map_begin);
            return it;
        }

        rawit end_of_line(rawit it) const {
            while (it < _map_end) if (*it++ == nl) return it;
            assert(it == _map_end);
            return it;
        }

      public:
        struct value_type final {
            rawit beg, end;
            Key   key;
            Value value;

            boost::string_ref str() const { return { beg, size_t(end-beg) }; }
        };

        struct iterator : boost::iterator_facade<iterator, boost::string_ref, boost::bidirectional_traversal_tag, value_type> {

            iterator(text_multi_lookup const& d, rawit it) : _region(&d), _data { it, nullptr, Key{}, Value{} } { 
                assert(_data.beg == _region->start_of_line(_data.beg));
            }

          private:
            friend text_multi_lookup;

            text_multi_lookup const* _region;
            value_type mutable _data;

            void ensure_parsed() const {
                if (!_data.end) 
                {
                    assert(_data.beg == _region->start_of_line(_data.beg));
                    auto b = _data.beg;
                    _data.end = _region->end_of_line(_data.beg);

                    if (!qi::phrase_parse(
                                b, _data.end,
                                qi::auto_ >> qi::auto_ >> qi::eoi,
                                qi::space,
                                _data.key, _data.value)) 
                    {
                        std::cerr << "Problem in: " << std::string(_data.beg, _data.end) 
                                  << "at:         " << std::setw(_data.end-_data.beg) << std::right << std::string(_data.beg,_data.end);
                        assert(false);
                    }
                }
            }

            static iterator mid_point(iterator const& a, iterator const& b) {
                assert(a._region == b._region);
                return { *a._region, a._region->start_of_line(a._data.beg + (b._data.beg -a._data.beg)/2) };
            }

          public:
            value_type const& dereference() const {
                ensure_parsed();
                return _data;
            }

            bool equal(iterator const& o) const {
                return (_region == o._region) && (_data.beg == o._data.beg);
            }

            void increment() {
                _data = { _region->end_of_line(_data.beg), nullptr, Key{}, Value{} };
                assert(_data.beg == _region->start_of_line(_data.beg));
            }
        };

        using const_iterator = iterator;

        const_iterator begin()  const { return { *this, _map_begin }; }
        const_iterator end()    const { return { *this, _map_end   }; }
        const_iterator cbegin() const { return { *this, _map_begin }; }
        const_iterator cend()   const { return { *this, _map_end   }; }

        template <typename CompatibleKey>
        const_iterator lower_bound(CompatibleKey const& key) const {
            auto f(begin()), l(end());
            while (f!=l) {
                auto m = iterator::mid_point(f,l);

                if (m->key < key) {
                    f = m;
                    ++f;
                }
                else {
                    l = m;
                }
            }
            return f;
        }

        template <typename CompatibleKey>
        const_iterator upper_bound(CompatibleKey const& key) const {
            return upper_bound(key, begin());
        }

      private:
        template <typename CompatibleKey>
        const_iterator upper_bound(CompatibleKey const& key, const_iterator f) const {
            auto l(end());
            while (f!=l) {
                auto m = iterator::mid_point(f,l);

                if (key < m->key) {
                    l = m;
                }
                else {
                    f = m;
                    ++f;
                }
            }
            return f;
        }

      public:
        template <typename CompatibleKey>
        std::pair<const_iterator, const_iterator> equal_range(CompatibleKey const& key) const {
            auto lb = lower_bound(key);
            return { lb, upper_bound(key, lb) };
        }

    };

    #include <iostream>

    int main() {
        io::mapped_file_source map("input.txt");
        text_multi_lookup<double, unsigned int> tml(map.data(), map.data() + map.size());

        auto const e = tml.end();

        for(auto&& line : tml)
        {
            std::cout << line.str();

            auto er = tml.equal_range(line.key);

            if (er.first  != e) std::cout << " lower: " << er.first->str();
            if (er.second != e) std::cout << " upper: " << er.second->str();
        }
    } 
    ```

# forms - 使用 jquery 调用 ashx 处理程序会导致表单操作回发给它

> ID：12481241
> 
> 赞同：0
> 
> 时间：2012-09-18T16:33:30.873
> 
> 标签：forms, jquery, httphandler, ashx

我正在使用 jquery ajax 调用 ashx 处理程序：

```
$.ajax({ type: "GET",
    url: "handlers/getpage.ashx?page=" + pageName,
    dataType: "html",
    success: function (response) {
               $('.hidden-slide-panel').append(response);
}); 
```

但是，当这个隐藏的幻灯片面板 div 被填充时，当我点击其中的任何内容时，表单操作值现在已设置为 getpage.ashx，而不是调用页面表单操作。有没有办法强制它使用调用页面操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:45:29.310

听起来你只需要在`form`它发生变化时将其设置回原来的值：

```
document.forms[0].action = 'whatever';
// or
document.YourFormNameHere.action = 'whatever'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:38:10.863

使用 ajax() 的“数据”属性：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例子：

```
$.ajax({ type: "GET",
         url: "whatever.ashx",
         data: { page: pageName },
         success: function(data) { alert(data); }
}); 
```

# multithreading - 几个线程上的 epoll_wait 更快？

> ID：12481245
> 
> 赞同：13
> 
> 时间：2012-09-18T16:33:35.823
> 
> 标签：multithreading, epoll

我正在考虑基于`epoll`. 为了获得最佳性能，我也想实现多核支持。但是在我的研究过程中，出现了以下问题：`epoll_wait()`从两个不同的线程调用两个调用是否更快，每个线程都在双核上观察自己的文件描述符？`epoll_wait()`或者这是否与调用一个观察所有文件描述符的单个函数一样快？

由于内核观察文件描述符，我认为我在用户空间调用中使用多少线程并不重要`epoll_wait()`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T20:27:36.420

只要您使用边缘触发 (EPOLLET) 模式（并注意同步），您甚至可以在多个线程上同时调用 epoll_wait 以获得相同的 epoll_fd。与单线程 epoll 事件循环相比，使用这种方法可以在多核机器上获得真正的性能优势。

实际上，我前段时间已经进行了性能测量，请参阅我的博客文章了解结果：

*   [http://cmeerw.org/blog/748.html#748](http://cmeerw.org/blog/748.html#748)
*   [http://cmeerw.org/blog/746.html#746](http://cmeerw.org/blog/746.html#746)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:02:53.897

我怀疑你是对的，epoll 本身的性能在你提到的两种情况下没有什么不同。OTOH，可能会有所不同的是，通过在每个线程中都有一个事件循环，您不需要上下文切换到单独的工作线程来处理连接。这就是 nginx 的工作原理，参见[http://www.aosabook.org/en/nginx.html](http://www.aosabook.org/en/nginx.html)。

# javascript - 从 background.js 向内容脚本发送消息

> ID：12481247
> 
> 赞同：0
> 
> 时间：2012-09-18T16:33:39.850
> 
> 标签：javascript, google-chrome, google-chrome-extension, message, transmission

我有`background.js`以下片段：

```
chrome.browserAction.onClicked.addListener(toggleStatus); 
```

现在在里面`toggleStatus`我想向我的内容脚本发送一条消息，表明发生了一些事情。那可能吗？

还是我完全错过了重点，这是正确的方法吗？

这背后是我想激活/停用我的扩展程序，而不需要重新加载页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:59:35.823

经过*更多的*尝试和错误，我终于找到了一个让我足够满意的解决方案。

首先在内容脚本中添加一个事件监听器：

```
var extensionPort = chrome.extension.connect();

extensionPort.onMessage(function(msg) {
  // handle the received message
}); 
```

要将消息发送到扩展的每个连接端口，请将其添加到`background.js`：

```
chrome.extension.onConnect.addListener(function(port) {
  port.postMessage({ someMessage: 'take me to the foobar' });
}); 
```

# linux - 显示当前目录中的非隐藏文件

> ID：12481250
> 
> 赞同：0
> 
> 时间：2012-09-18T16:33:45.870
> 
> 标签：linux, unix

有人可以告诉我如何在我所在的当前目录中显示“非隐藏文件”。如果我想指定某个扩展名怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:37:38.157

我认为非隐藏文件是指非`dot`文件。你可以使用`ls`. 对于某个扩展，您可以使用例如：

`ls *.txt`

[Linux 和 Unix ls 命令](http://www.computerhope.com/unix/uls.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-26T18:58:50.177

使用以下命令对我有用： ls --ignore=.* -l

# asterisk - 未使用 OpenBTS 在 Asterisk 上拨打电话

> ID：12481251
> 
> 赞同：1
> 
> 时间：2012-09-18T16:33:47.117
> 
> 标签：asterisk, gsm

有人可以指出我可以为可以容纳 1 或 2 部手机的测试设置正确配置的位置。

我已经在带有 N210 和 SBX 子板的 Ubuntu 上设置了带有 Asterisk 1.8.4 的 OpenBTS 2.8。我可以拨打 600 并与 BTS 建立连接，并且 echotest 运行良好。我使用以下配置为连接到 BTS 的两个终端分配了以下配置，当我尝试互相呼叫时，我收到下面发布的错误

调试输出显示它拨打了电话，但我没有在另一部电话上听到任何铃声，我无法拨打电话。它按预期超时。

这是我的 extensions.conf

```
[macro-dialGSM]
exten => s,1,Dial(SIP/${ARG1},20)
exten => s,2,Goto(s-${DIALSTATUS},1)
exten => s-CANCEL,1,Hangup
exten => s-NOANSWER,1,Hangup
exten => s-BUSY,1,Busy(30)
exten => s-CONGESTION,1,Congestion(30)
exten => s-CHANUNAVAIL,1,playback(ss-noservice)
exten => s-CANCEL,1,Hangup
[sip-external]
exten => 9000,1,Macro(dialGSM,IMSI240020702009669)
exten => 9001,1,Macro(dialGSM,IMSI240016010357097) 
```

这是我的 sip.conf

```
[IMSI240020702009669]
callerid=9000
canreinvite=no
type=friend
allow=gsm
context=sip-external
host=dynamic
dtmfmode=info

[IMSI240016010357097]
callerid=9001
canreinvite=no
type=friend
allow=gsm
context=sip-external
host=dynamic
dtmfmode=info 
```

这是星号的错误输出

```
-- Executing [s@macro-dialGSM:1] Dial("SIP/IMSI240016010357097-0000001f","SIP/IMSI240020702009669,20") in new stack
== Using SIP RTP CoS mark 5
-- Called IMSI240020702009669
-- Nobody picked up in 20000 ms
-- Executing [s@macro-dialGSM:2] Goto("SIP/IMSI240016010357097-0000001f", "s-NOANSWER,1") in new stack
-- Goto (macro-dialGSM,s-NOANSWER,1)
-- Executing [s-NOANSWER@macro-dialGSM:1] Hangup("SIP/IMSI240016010357097-0000001f", "") in new stack
== Spawn extension (macro-dialGSM, s-NOANSWER, 1) exited non-zero on'SIP/IMSI240016010357097-0000001f' in macro 'dialGSM'
== Spawn extension (sip-external, 9000, 1) exited non-zero on'SIP/IMSI240016010357097-0000001f'
[Sep 18 18:01:31] WARNING[9737]: chan_sip.c:3551 retrans_pkt: Retransmission timeout reached on transmission 3c5b249c2220ff282dddf34d75e0848a@192.168.10.1:5060 for seqno 102(Critical Request) -- See https://wiki.asterisk.org/wiki/display/AST/SIP+Retransmissions
Packet timed out after 32000ms with no response 
```

你认为我在哪里犯了错误？我参考了 wiki，但它没有帮助，或者我无法理解如何从 wiki 解决错误消息点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T08:59:03.293

我发现了必须为宏提供 ip 才能路由流量的问题

```
Macro(dialGSM,IMSI240020702009669@127.0.0.1:5062) 
```

希望这可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T14:42:07.997

事实上，为 Dial 函数提供 IP 地址/端口解决了我的问题。在我偶然发现这个解决方案之前，这非常令人沮丧。下面是运行代码

sip.conf：

```
[IMSI3102XXXXXXXXXX3]
callerid=2000003
canreinvite=no
type=friend
allow=gsm
context=sip-external
host=dynamic
dtmfmode=info

[IMSI3102XXXXXXXXXX4]
callerid=2000004
canreinvite=no
type=friend
allow=gsm
context=sip-external
host=dynamic
dtmfmode=info 
```

扩展名.conf：

```
[macro-dialGSM]
exten => s,1,Dial(SIP/${ARG1},20)
exten => s,2,Goto(s-${DIALSTATUS},1)
exten => s-CANCEL,1,Hangup
exten => s-NOANSWER,1,Hangup
exten => s-BUSY,1,Busy(30)
exten => s-CONGESTION,1,Congestion(30)
exten => s-CHANUNAVAIL,1,playback(ss-noservice)
exten => s-CANCEL,1,Hangup
[sip-external]
exten => 2000003,1,Macro(dialGSM,IMSI3102XXXXXXXXXX3@127.0.0.1:5062)
exten => 2000004,1,Macro(dialGSM,IMSI3102XXXXXXXXXX4@127.0.0.1:5062) 
```

# c++ - 带有 C++ 模板的逻辑函数

> ID：12481252
> 
> 赞同：2
> 
> 时间：2012-09-18T16:33:51.770
> 
> 标签：c++, templates, logic

关于 adanve 的注意事项：也接受 C++11，但首选 C++99。请不要使用虚拟功能的答案，请仅使用模板！

我想建模的是典型的“A 和 B 暗示 C”的情况。我有一些 C++ 类和一些描述它们属性的模板。例子：

```
template<typename S, typename T, typename U>
class Base
{
    MaybeTruePropertyA<S,T> a;
    MaybeTruePropertyB<S,T,U> b;
    MaybeTruePropertyC<S,T,U> c;
}; 
```

可以说我这样继承：

```
template<typename S, typename T, typename U>
class Inherited : public Base<S,T,U>
{
    TruePropertyA<S,T> a;
    TruePropertyB<S,T, U> b;
}; 
```

然后我想*神奇*地设置`PropertyC`为`TrueProperty`in `Inherited`。现在，这是我的问题：

1.  我不知道如何*神奇地*做到这一点。
2.  另外，我认为隐藏`MaybeTruePropertyA`在继承中是浪费内存。

有没有人解决我如何用上面的属性做一些“A和B暗示C”？您可能会更改一些内容，但属性仍应表示为`TrueProperty<S,T> a`.

一个不太抽象的例子可以在这里找到：http: [//pastebin.com/M209CJp4](http://pastebin.com/M209CJp4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:09:08.383

这并不真正遵循粘贴箱中的代码。它甚至没有真正遵循您问题中玩具代码中的示例。但是，您所追求的似乎是基于属性模板参数的模板专业化。以下是您如何完成此操作的示例：

```
template <int S, int T> struct PropertyA { enum { V = false }; };
template <int S, int T, int U> struct PropertyB { enum { V = false }; }; 
```

这个想法是默认情况`PropertyA`下`PropertyB`是`false`属性。它们是`true`通过专业化制作的，稍后会说明。

```
template <bool A, bool B>
struct PropertyC {
    void doSomething () { std::cout << "False" << std::endl; }
};

template <> struct PropertyC<true, true> {
    void doSomething () { std::cout << "True" << std::endl; }
}; 
```

在这里，`PropertyC`除非`false`它的两个参数都是`true`. 这是通过专业化完成的。

```
template <int S, int T, int U>
struct MaybeTruePropertyC {
    void doSomething () {
        PropertyC<PropertyA<S, T>::V, PropertyB<S, T, U>::V>().doSomething();
    }
}; 
```

现在，`MaybeTruePropertyC`由`PropertyA`和使用的值参数化`PropertyB`，并且它们的值被馈送到`PropertyC`以获得所需的行为。

因此，要使用这些类，您需要为 和 定义一些特`PropertyA`化`PropertyB`。

```
template <> struct PropertyA<1, 2> { enum { V = true }; };
template <> struct PropertyB<1, 2, 3> { enum { V = true }; }; 
```

你现在可以像这样使用它：

```
MaybeTruePropertyC<1, 2, 3> c;
c.doSomething(); 
```

您可以点击[链接](http://ideone.com/sTmV4)查看运行中的代码。

# c# - 如何模拟/ioc静态类中的类？

> ID：12481254
> 
> 赞同：-1
> 
> 时间：2012-09-18T16:33:59.957
> 
> 标签：c#, inversion-of-control, castle-windsor, moq, rhino-mocks

我有一个调用静态类的类，静态类基本上是另一个类的包装器。我知道我不能模拟/ioc 静态类，但可以为非静态类做到这一点？

下面是我的代码结构示例

```
namespace lib.CanModify
{
    public class Something
    {
        public void method()
        {
            var obj = lib.CanNotModify.StaticClass.DoSomething();

        }
    }

}
namespace lib.CanNotModify
{
    public static class StaticClass
    {
        public static Node DoSomething()
        {
            /*The class i want to mock!*/
            Node node = new Node(10);
            return node;

        }
    }
} 
```

请建议一种通过 mstest 模拟节点类的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:41:20.273

最简洁的答案是不！

你不能模拟类的具体实现。您只能创建类的实例，只能模拟接口或基类。模拟通过使用继承实现接口或基类的属性来伪装成具体类。基本上是动态创建类的一个新的具体实例。

如果您将结构更改为：

```
public class Node() : INode 
```

然后你可以嘲笑这个：

```
var moqNode = new Mock<INode>(); 
```

*（顺便说一句，这是最小起订量语法）*

然后，您需要将变量更改为类型`INode`

```
INode node = new Node(10); 
```

然后你实际上还需要注入你的依赖：

```
public static Node DoSomething(INode node)
        {

            return node;

        } 
```

这会成为整个事情的闹剧......？！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:50:19.313

您可以创建一个`StaticClassWrapper`和一个接口`IStaticClass`，然后注入`IStaticClass`您的方法。

然后你可以轻松地模拟`IStaticClass`

```
namespace lib.CanModify
{
    using lib.CanNotModify;

    public class Something
    {
        public void method()
        {
            method(new StaticClassWrapper());
        }

        public void method(IStaticClass staticClass)
        {
            var obj = staticClass.DoSomething();
        }
    }

    public interface IStaticClass
    {
        Node DoSomething();
    }

    public class StaticClassWrapper : IStaticClass
    {
        public Node DoSomething()
        {
            return lib.CanNotModify.StaticClass.DoSomething();
        }
    }

} 
```

这类似于 ASP.NET MVC 项目如何制作可`System.Web.HttpRequest`模拟的类

# c# - SendKey 无需设置焦点

> ID：12481255
> 
> 赞同：2
> 
> 时间：2012-09-18T16:34:01.907
> 
> 标签：c#, .net, sendkeys

我正在寻找一种将键发送到控件（在我的表单上，现在正在执行 SendKeys.Send()）而不将窗口设置为焦点窗口的方法。SendKeys.Send() 的主要问题是，在调试时密钥转到 VisualStudio。我必须发送密钥的控件位于我的表单上。我问我，有没有办法直接“送”他们一把钥匙？

# graph-algorithm - 为什么 Dijkstra 算法使用堆（优先队列）？

> ID：12481256
> 
> 赞同：21
> 
> 时间：2012-09-18T16:34:07.690
> 
> 标签：graph-algorithm, priority-queue, dijkstra

我尝试在循环加权图上使用 Djikstra 算法而不使用优先级队列（堆）并且它有效。

Wikipedia 指出该算法的原始实现不使用优先级队列并且在 O(V ² ) 时间内运行。

现在如果我们只是移除优先级队列并使用普通队列，运行时间是线性的，即 O(V+E)。

有人可以解释为什么我们需要优先队列吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-24T04:17:51.697

我有完全相同的疑问，并发现了一个测试用例，其中没有priority_queue 的算法将不起作用。

假设我有一个 Graph 对象`g`，这是一种`addEdge(a,b,w)`将边缘从顶点添加`a`到`b`带有权重的顶点的方法`w`。

现在，让我定义下图：-

```
 Graph g 
   g.addEdge(0,1,5) ; 
   g.addEdge(1,3,1) ; 
   g.addEdge(0,2,2) ; 
   g.addEdge(2,1,1) ; 
   g.addEdge(2,3,7) ; 
```

现在，假设我们的队列包含以下顺序的节点`{0,1,2,3 }` 因此，首先访问节点 0，然后访问节点 1。

此时，使用 path 将 dist b/w 0 和 3 计算为 6 `0->1->3`，并将 1 标记为已访问。

现在节点 2 已被访问，并且 dist b/w 0 和 1 使用 path 更新为值 3 `0->2->1`，但是由于节点 1 被标记为已访问，因此您无法更改 b/w 0 和 3 的距离（使用最佳路径）（ `0->2->1->3) 是 4。

因此，如果不使用 priority_queue，您的算法就会失败。

它报告 dist b/w 0 和 3 为 6，而实际上它应该是 4。

现在，这是我用于实现算法的代码：-

```
 class Graph
        {
            public: 
                vector<int> nodes ; 
                vector<vector<pair<int,int> > > edges ; 
                void addNode() 
                {
                    nodes.push_back(nodes.size()) ; 
                    vector<pair<int,int> > temp ; edges.push_back(temp);
                }
                void addEdge(int n1, int n2, int w)
                {
                    edges[n1].push_back(make_pair(n2,w)) ; 
                }
                pair<vector<int>, vector<int> > shortest(int source) // shortest path djkitra's
                {
                    vector<int> dist(nodes.size()) ; 
                    fill(dist.begin(), dist.end(), INF) ; dist[source] = 0 ; 
                    vector<int> pred(nodes.size()) ; 
                    fill(pred.begin(), pred.end(), -1) ; 
                    for(int i=0; i<(int)edges[source].size(); i++)
                    {
                        dist[edges[source][i].first] = edges[source][i].second ; 
                        pred[edges[source][i].first] = source  ; 
                    }
                    set<pair<int,int> > pq ; 
                    for(int i=0; i<(int)nodes.size(); i++)
                        pq.insert(make_pair(dist[i],i)) ; 
                    while(!pq.empty())
                    {
                        pair<int,int> item = *pq.begin() ; 
                        pq.erase(pq.begin()) ; 
                        int v = item.second ; 
                        for(int i=0; i<(int)edges[v].size(); i++)
                        {
                            if(dist[edges[v][i].first] > dist[v] + edges[v][i].second)
                            {
                                pq.erase(std::find(pq.begin(), pq.end(),make_pair(dist[edges[v][i].first],edges[v][i].first))) ; 
                                pq.insert(make_pair(dist[v] + edges[v][i].second,edges[v][i].first)) ; 
                                dist[edges[v][i].first] = dist[v] + edges[v][i].second ; 
                                pred[i] = edges[v][i].first ; 
                            }
                        }
                    }
                    return make_pair(dist,pred) ; 
                }

    pair<vector<int>, vector<int> > shortestwpq(int source) // shortest path djkitra's without priority_queue 
            {
                vector<int> dist(nodes.size()) ; 
                fill(dist.begin(), dist.end(), INF) ; dist[source] = 0 ; 
                vector<int> pred(nodes.size()) ; 
                fill(pred.begin(), pred.end(), -1) ; 
                for(int i=0; i<(int)edges[source].size(); i++)
                {
                    dist[edges[source][i].first] = edges[source][i].second ; 
                    pred[edges[source][i].first] = source  ; 
                }
                vector<pair<int,int> > pq ; 
                for(int i=0; i<(int)nodes.size(); i++)
                    pq.push_back(make_pair(dist[i],i)) ; 
                while(!pq.empty())
                {
                    pair<int,int> item = *pq.begin() ; 
                    pq.erase(pq.begin()) ; 
                    int v = item.second ; 
                    for(int i=0; i<(int)edges[v].size(); i++)
                    {
                        if(dist[edges[v][i].first] > dist[v] + edges[v][i].second)
                        {
                            dist[edges[v][i].first] = dist[v] + edges[v][i].second ; 
                            pred[i] = edges[v][i].first ; 
                        }
                    }
                }
                return make_pair(dist,pred) ; 
            } 
```

正如预期的那样，结果如下：-

使用priority_queue
0
3
2
4

现在使用没有优先级队列
0
3
2
6

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T14:40:49.557

Like Moataz Elmasry said the best you can expect is O(|E| + |V|.|logV|) with a fib queue. At least when it comes to big oh values.

The idea behind it is, for every vertex(node) you are currently working on, you already found the shortest path to. If the vertex isn't the smallest one, (distance + edge weight) that isn't necessarily true. This is what allows you to stop the algorithm as soon as you have expanded(?) every vertex that is reachable from your initial vertex. If you aren't expanding the smallest vertex, you aren't guaranteed to be finding the shortest path, thus you would have to test every single path, not just one. So instead of having to go through every edge in just one path, you go through every edge in every path.

Your estimate for O(E + V) is probably correct, the path and cost you determined on the other hand, are incorrect. If I'm not mistaken the path would only be the shortest if by any chance the first edge you travel from every vertex just happens to be the smallest one.

So Dijkstra's shortest path algorithm without a queue with priority is just Dijkstra's path algorithm ;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T01:31:51.837

对于稀疏图，如果使用二进制最小堆运行时是（E*logV），但是如果使用斐波那契堆实现，运行时将是（VlogV+E）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T03:05:30.433

堆是此任务的最佳选择，因为它保证 O(log(n)) 可以将边添加到我们的队列并删除顶部元素。优先级队列的任何其他实现都会牺牲添加到我们的队列或从中删除以在其他地方获得性能提升。根据图的稀疏程度，您可能会使用不同的优先级队列实现找到更好的性能，但一般来说，最小堆是最好的，因为它可以平衡两者。

不是最好的来源，但：[http://en.wikipedia.org/wiki/Heap_(data_structure)](http://en.wikipedia.org/wiki/Heap_(data_structure))

# c# - 禁用 .net 错误记录事件查看器应用程序

> ID：12481263
> 
> 赞同：0
> 
> 时间：2012-09-18T16:34:33.307
> 
> 标签：c#, .net

你知道是否有办法禁止用 C# 编写的应用程序控制台在应用程序事件查看器上编写？[该应用程序是我从http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=706&lngWId=10](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=706&lngWId=10)下载的 ftp 同步

应用事件查看器显示错误：“.NET Runtime 2.0 Error -> EventType clr20r3, P1 enviaxml.exe, P2 1.0.4643.32868, P3 505784e9, P4 ftpautobackup, P5 1.0.4643.32868, P6 505784e9, P7 1, P8 2ec, P9 system.threading.threadabort，P10 无。”

主子在 try catch 内......所以我不知道它为什么会写错误。

你知道如何禁用它吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:42:06.383

这可能意味着错误/异常发生在您的程序启动之前，即在您的程序由 CLR 加载期间。因此，您永远没有机会捕获异常

# python - 用于识别类型的 hasattr() 选项的 Python 参考

> ID：12481264
> 
> 赞同：1
> 
> 时间：2012-09-18T16:34:35.210
> 
> 标签：python, reference, hasattr

是否有一个很好的一站式 Python 参考来选择与 hasattr() 一起使用的属性来识别类型。

例如，以下是不是字符串的序列：

```
def is_sequence(arg):
    return (not hasattr(arg, "strip") and
            hasattr(arg, "__getitem__") or
            hasattr(arg, "__iter__")) 
```

最好有一个可靠的参考来快速选择最佳模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:36:47.680

使用[集合模块](http://docs.python.org/library/collections.html#collections-abstract-base-classes)中已经为您编写的[虚拟子类](http://docs.python.org/glossary.html#term-abstract-base-class)（ Python 3.3 中的[collections.abc](http://docs.python.org/dev/library/collections.abc.html)）。

要检查某个东西是否是非字符串序列，请使用

```
from collections import Sequence    # collections.abc in Python 3.3
isinstance(arg, Sequence) and not isinstance(arg, basestring)    # str in Python 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:38:16.800

使用适当的[抽象基类](http://docs.python.org/library/abc.html)：

```
import collections
isinstance([], collections.Sequence) # ==> true 
```

# javascript - 如何根据复选框隐藏/显示 PDF 中的页面

> ID：12481266
> 
> 赞同：1
> 
> 时间：2012-09-18T16:34:48.657
> 
> 标签：javascript, adobe, livecycle-designer

我正在使用 Adob​​e Livecycle 创建交互式 PDF。我的 PDF 有 4 页，最后一页是隐藏的。

我希望能够基于复选框显示此隐藏页面。每当用户选择此复选框时，页面必须可见。

我已经使用操作生成器根据复选框将最后一页的存在更改为可见/隐藏。这工作正常，直到我添加`baseProfile="interactiveForms"`到 XML 源中的模板 XML 节点。我必须添加此标签才能将自定义 JavaScript 代码添加到 PDF。如果没有该`interactiveForms`属性，隐藏/显示页面的操作将起作用，但我无法添加需要在 PDF 上运行的自定义 javascript。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T06:43:45.517

在复选框的退出事件上使用此代码：

```
if (this.rawValue == 0){
   xfa.resolveNode("Page4").presence = "hidden";
}else{
   xfa.resolveNode("Page4").presence = "visible";
} 
```

# r - 在 R 中，如何在使用 gridBase 将子图嵌入绘图时防止 pdf 中的空白页

> ID：12481267
> 
> 赞同：15
> 
> 时间：2012-09-18T16:35:05.747
> 
> 标签：r, plot

正如[这里](https://stackoverflow.com/a/7795594/597069)`gridBase`所解释的，由于，即使两个图都使用 R 的基本图形系统，很容易将图嵌入到现有图中。但是，当将整个图保存为 pdf 时，第一页始终为空白。如何防止这种情况？

这是一个例子：

```
require(gridBase)

## generate dummy data
set.seed(1859)
x <- 1:100
y <- x + rnorm(100, sd=5)
ols <- lm(y ~ x)

pdf("test.pdf")

## draw the first plot
plot.new() # blank page also happens when using grid.newpage()
pushViewport(viewport())
plot(x, y)

## draw the second plot, embedded into the first one
pushViewport(viewport(x=.75,y=.35,width=.2,height=.2,just=c("center","center")))
par(plt=gridPLT(), new=TRUE)
hist(ols$residuals, main="", xlab="", ylab="")
popViewport(2)

dev.off() 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-18T19:04:32.433

我认为这有点骇人听闻，但设置 onefile=FALSE 在我的机器上工作：

```
pdf("test.pdf", onefile=FALSE) 
```

在寻找答案时（我并没有真正找到，而是在森林里偶然发现的）我遇到[了 Paul Murrell 给 Rhelp 的这篇文章，](http://markmail.org/search/?q=list:org.r-project.r-help%20blank%20page%20grid%20pdf#query:list:org.r-project.r-help%20blank%20page%20grid%20pdf%20page:1%20mid:3mrulmop27x6usgd%20state:results)他承认混合网格和基本图形甚至让大师感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-27T13:08:46.357

我发现的一个解决方案是在 for 循环中启动 pdf 文件；然后插入一个 if 子句来评估第一次迭代是否正在运行。当当前迭代是第一个迭代时，继续使用 pdf() 创建输出设备。在关闭 for 循环后放置 dev.off()。一个简单的例子如下：

```
for(i in 1:5){
  if (i == 1) pdf(file = "test.pdf")
  plot(rnorm(50, i, i), main = i)}
dev.off() 
```

# gallery - MODX Gallery 拇指加密

> ID：12481268
> 
> 赞同：0
> 
> 时间：2012-09-18T16:35:15.417
> 
> 标签：gallery, modx, phpthumb

有谁知道如何加密以下 url 保存在 MODX 中实现的 phpThumb 的值，以便 phpThumb 扩展仍然可以读取它？

例如，生成图像的 url 如下所示：

```
/assets/components/gallery/connector.php?action=web/phpthumb&src=%2Fassets%2Fgallery%2F2%2Ftest.jpg&w=600 
```

我想要实现的是对这个 url 进行加密，这样用户就不能自己编辑图像。让我们想象一下使用 fltr 将水印应用于图像，fltr 将成为图像 url 的一部分，如果删除它也会删除水印。

我已经查看了 Gallery Extra 模型并知道在哪里寻找 url 构造函数，但我不知道图像 url 的变量传递到哪个文件。这意味着我能够加密图像 url，但无法确定需要将解密函数放置在哪里才能使 phpThumb 正确读取它 “用户”是指没有管理员访问权限的任何站点访问者。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T13:55:27.420

可能有点晚，但有同样的问题......

通过使用 [[+image_absolute]] 作为 img-tag 的占位符解决，因此 "src=[[+image_absolute]]"

# java - 如何将 jars 导入我的 java 程序？

> ID：12481269
> 
> 赞同：12
> 
> 时间：2012-09-18T16:35:23.047
> 
> 标签：java, macos, jar

我已经下载了两个jar。我想导入他们包含的一些类。我该怎么做呢？

这是我的算法课。我已尝试按照以下站点上的说明进行操作，但无济于事。

[http://algs4.cs.princeton.edu/code/](http://algs4.cs.princeton.edu/code/)

有一个 OSX 安装程序（我正在运行 Mountain Lion），据称它会将 jars 添加到您的类路径中。不幸的是，它还安装了 Dr. Java。我宁愿只使用 Sublime 和终端。我以为这很容易，只是......

```
import java.stdlib; 
```

在我的 Percolation.java 文件中，但是对该程序进行 javac-ing 会产生“包 stdlib 不存在”，就像

```
import stdlib; 
```

我已通过以下方式手动将 stdlib.jar 和 algs4.jar 的位置添加到我的终端 CLASSPATH 中：

```
export CLASSPATH=$CLASSPATH:/Users/Michael/path/to/jar/algs4.jar:/Users/Michael/path/to/jar/algs4.jar
export CLASSPATH=$CLASSPATH:/Users/Michael/path/to/jar/stdlib.jar:/Users/Michael/path/to/jar/stdlib.jar 
```

我也尝试过

```
javac -cp $CLASSPATH:/Users/Michael/path/to/jar/algs4.jar:/Users/Michael/path/to/jar/stdlib.jar Percolation.java 
```

但我仍然得到一个

```
javac Percolation.java
Percolation.java:1: cannot find symbol
symbol  : class stdlib
location: package java
import java.stdlib;
       ^
Percolation.java:2: package java.algs4 does not exist
import java.algs4.WeightedQuickUnionUF;
             ^ 
```

这里发生了什么？

还有一种方法可以将这些值永久添加到我在 OS X 山狮中的 CLASSPATH 中。我必须对每个新终端执行该命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:41:34.163

如果您使用终端来编译和启动程序，那么在终端窗口中，首先设置`CLASSPATH`：

```
$ export CLASSPATH=$CLASSPATH:/Users/Michael/path/to/jar1.jar:/Users/Michael/path/to/jar2.jar 
```

然后您可以键入`echo $CLASSPATH`并查看是否引用了 jar。

现在，*在同一个终端窗口*中，使用 javac 编译您的类。上述设置`CLASSPATH`仅适用于当前终端窗口和从它启动的任何进程。

或者，您可以将 传递`CLASSPATH`给 javac：

```
$ javac -cp $CLASSPATH:/Users/Michael/path/to/jar1.jar:/Users/Michael/path/to/jar2.jar MyClass.java 
```

`CLASSPATH`要为将来的终端会话保留此内容，请将`export`上面的行添加到主目录中的文件*.profile*中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T07:09:18.317

回答这个问题已经过时了，但也许对普林斯顿算法课程的未来参与者有用。在环境中添加 CLASSPATH 后，java 从包中获取类，但仍然会在导入命令上生成错误。您需要从源文件中删除 import algs4 和 stdlib，编译将顺利运行。

此解决方案适用于带有 zsh 的 Ubuntu 12.04。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T17:34:52.317

你可能有正确的类路径。但是，您尝试导入的类可能不会被调用`java.stdlib`。您需要导入完全限定的包名称......可能类似于`org.somecompany.ourlibrary.stdlib`. 因此你需要

```
import org.somecompany.ourlibrary.stdlib 
```

`Percolations.java`与其余导入语句一起在文件的顶部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T02:47:52.670

您的 Percolation 程序是否包含在其自己的软件包中？如果是这样，请尝试通过注释掉文件中的任何包语句并重新编译它来将其放入默认包中。此外，包装`algs4`中没有任何东西`java`，这都是它自己独立的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-23T11:06:16.647

如果您正在使用 Eclipse（和我一样），请选择当前项目，然后从菜单中打开项目属性。在左侧选择“Java Build path”，然后选择选项卡库。现在您单击“添加外部罐子”按钮并指向您的 jar 文件，您就完成了。

祝你好运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T16:36:54.960

[`javac`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javac.html)使用该`-classpath <path_to_jar>`选项启动。或者编辑[`CLASSPATH`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)环境变量，使其包含带有您希望使用的类的 JAR。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-07T11:34:38.493

我在这门课程的工作中遇到了同样的问题，但对于 Windows。我会在此处留下此评论，以防它对某人有所帮助。

如果您使用 DrJava，则不需要`import`代码中的任何语句。如果您按照课程中描述的安装步骤进行操作，那么一切都已为您配置好了。

但这可能是一个问题 - 它将`jar`文件放在您当前的用户目录中，其路径可能包含不适当的符号（在我的情况下为俄语字母）。您需要在 Edit -> Preferences 菜单中检查它。你可以看到那里`algs4.jar`和`stdlib.jar`路径。确保此路径正确并指向真实的现有文件。

我只是将所有必要的文件移动到另一个目录并更改了此菜单中的路径。它为我解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-26T17:54:52.953

我在导入类上浪费了很多时间，尝试了“javac -cp .;stdlib.jar mad.java”等的 CL 选项，但曾经得到你提到的相同错误。
然后我将导入完全注释掉，并确保 DrJava 的首选项添加了 2 个类路径 + %CLASSPATH% 变量以具有正确的值。现在简直可以工作。祝你好运！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-21T15:06:33.757

只需将包命名为默认值，它就可以正常工作。之后你也不需要导入任何东西，只需运行提供的一些代码

> 基础知识

章喜欢

> 平均的

.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-03T09:16:34.067

我的解决方案是在我的 Sublime 文本编辑器中添加 2 个新的构建系统：一个用于编译，另一个用于执行。使用主菜单中的 Tools->Build_system->New_build_system... 和这两个代码片段：

用于编译（我将文件命名为“algs-compile.sublime_build”）：

```
{
  "cmd": ["javac", "-cp", "/Users/admin/algs4/stdlib.jar:/Users/admin/algs4/algs4.jar:.", "$file"],
  "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
  "selector": "source.java"
} 
```

用于运行（“algs-run.sublime_build”）

```
{
  "cmd": ["java", "-cp", "/Users/admin/algs4/stdlib.jar:/Users/admin/algs4/algs4.jar:.", "$file_base_name"]
} 
```

不要忘记将此处的 jar 文件路径替换为系统中正确的路径。我知道这个问题已经很老了，但我希望这会对某人有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-26T17:08:46.933

如果您收到“无法解析为类型”错误，并尝试添加 stdlib.jar 或 algs4.jar 文件，解决方案如下：

stdlib.jar 和 algs4.jar 中的库位于“默认”包中。在 Java 中，您不能从命名包访问默认包中的类。如果您需要将库与命名包一起使用，您可以使用这些包版本：

stdlib-package.jar 和 algs4-package.jar。

您可以在此处下载这些文件：http: [//algs4.cs.princeton.edu/code/](http://algs4.cs.princeton.edu/code/)

然后可以自动添加导入：import edu.princeton.cs.algs4.ClassName

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-01T21:23:10.770

打开你的崇高

选择工具->构建系统->新建构建系统

将以下代码添加到新文件中

这可以告诉 sublime 运行命令

```
{
    "cmd": ["javac -cp /Users/yourusername/algs4/stdlib.jar:/Users/yourusername/algs4/algs4.jar:. \"$file\" && java -cp java -cp /Users/yourusername/algs4/stdlib.jar:/Users/yourusername/algs4/algs4.jar:. \"$file_base_name\""],
    "shell":true,
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.java"
} 
```

希望这可以帮助那些正在学习普林斯顿大学算法课程的人

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-06-27T04:54:50.580

我有同样的问题。Renfei Wang 的解决方案对我有用（我还没有足够的分数来直接评论他的回复）。

在 Sublime 中，导航到`Preferences: Browse Packages>JavaC.sublime_build`.

这是我的样子：

```
{
    "cmd": ["javac", "-cp", "/Users/jason/Documents/lib/*:./","$file"],
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.java"
} 
```

`/Users/jason/Documents/lib/*:/`让 Sublime 知道包含我的包的目录的位置，所以现在当我构建时，它首先加载这些包。

# java - 为什么这个演员不会返回正确的方法？（以弗所）

> ID：12481280
> 
> 赞同：0
> 
> 时间：2012-09-18T16:36:06.137
> 
> 标签：java, casting, io, document, jdom

好的，所以我一直在查看 Ephesoft 开发人员指南中的以下示例代码......

```
//import java.io.File;
//
//import javax.xml.transform.Result;
//import javax.xml.transform.Source;
//import javax.xml.transform.Transformer;
//import javax.xml.transform.TransformerConfigurationException;
//import javax.xml.transform.TransformerException;
//import javax.xml.transform.TransformerFactory;
//import javax.xml.transform.TransformerFactoryConfigurationError;
//import javax.xml.transform.dom.DOMSource;
//import javax.xml.transform.stream.StreamResult;
//
//import org.w3c.dom.Document;
//import org.w3c.dom.Element;
//import org.w3c.dom.Node;
//import org.w3c.dom.NodeList;

import com.ephesoft.dcma.script.IScripts;
//--------------------------------------

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.OutputStream;
import java.util.List;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

import org.jdom.Document;
import org.jdom.Element;
import org.jdom.output.XMLOutputter;

//import com.ephesoft.dcma.script.IJDomScript;

/**
 * The <code>ScriptDocumentAssembler</code> class represents the script execute structure. Writer of scripts plug-in should implement this IScript
 * interface to execute it from the scripting plug-in. Via implementing this interface writer can change its java file at run time.
 * Before the actual call of the java Scripting plug-in will compile the java and run the new class file.
 * 
 * @author Ephesoft
 * @version 1.0
 */

public class ScriptDocumentAssembler 
{

    private static final String BATCH_LOCAL_PATH = "BatchLocalPath";

    private static final String BATCH_INSTANCE_ID = "BatchInstanceIdentifier";

    private static final String EXT_BATCH_XML_FILE = "_batch.xml";

    private static final String DOCUMENTS = "Documents";

    private static final String DOCUMENT = "Document";

    private static final String PAGES = "Pages";

    private static final String PAGE = "Page";

    private static String ZIP_FILE_EXT = ".zip";

    /**
     * The <code>execute</code> method will execute the script written by the writer at run time with new compilation of java file. It
     * will execute the java file dynamically after new compilation.
     * 
     * @param document {@link Document}
     */
    public void execute(Document document, String fieldName, String docIdentifier) {
        System.out.println("*************  Inside ScriptDocumentAssembler scripts.");
        System.out.println("*************  Start execution of the ScriptDocumentAssembler scripts.");
        System.out.println("Custom ScriptDocumentAssembler, removing Document seperator sheets...");
        removeFirstPageOfDoc(document);
        boolean isWrite = true;
        //boolean isWrite = false;
        // write the document object to the XML file.
        if (isWrite) {
            writeToXML(document);
            System.out.println("*************  Successfully write the xml file for the ScriptDocumentAssembler scripts.");
        } else {
            System.out.println("************** No changes performed by ScriptDocumentAssembler scripts.");
        }
        System.out.println("*************  End execution of the ScriptDocumentAssembler scripts.");
    }

    private void removeFirstPageOfDoc(Document documentFile) {
        Element documentsList = (Element) documentFile.getChildren(DOCUMENTS).get(0);
        List<?> documentList = documentsList.getChildren(DOCUMENT);
        for (int documentIndex = 0; documentIndex < documentList.size(); documentIndex++) {
            Element document = (Element) documentList.get(documentIndex);
            System.out.println("Processing Document - " + document.getChildren("Identifier").get(0).getText());
            Element pages = (Element) document.getChildren(PAGES).get(0);
            List<?> pageList = pages.getChildren(PAGE);         
            Element page = (Element)pageList.get(0);            

            System.out.println(document.getChildren("Identifier").get(0).getText() + " Page Count = " + pageList.size());
            System.out.println("Removing page node " + page.getChildren("Identifier").get(0).getText() + " from " +
                    document.getChildren("Identifier").get(0).getText());
            pages.remove(page);             
            System.out.println(document.getChildren("Identifier").get(0).getText() + " Page Count = " + pageList.size());           
        }
    }

    private void writeToXML(Document document) {
        String batchLocalPath = null;
        List<?> batchLocalPathList = document.getRootElement().getChildren(BATCH_LOCAL_PATH);
        if (null != batchLocalPathList) {
            batchLocalPath = ((Element) batchLocalPathList.get(0)).getText();
        }
        if (null == batchLocalPath) {
                System.err.println("Unable to find the local folder path in batch xml file.");
            return;
        }
        String batchInstanceID = null;
        List<?> batchInstanceIDList = document.getRootElement().getChildren(BATCH_INSTANCE_ID);
        if (null != batchInstanceIDList) {
            batchInstanceID = ((Element) batchInstanceIDList.get(0)).getText();
        }
        if (null == batchInstanceID) {
            System.err.println("Unable to find the batch instance ID in batch xml file.");
            return;
        }
        String batchXMLPath = batchLocalPath.trim() + File.separator + batchInstanceID + File.separator + batchInstanceID
        + EXT_BATCH_XML_FILE;
        String batchXMLZipPath = batchXMLPath + ZIP_FILE_EXT;
        System.out.println("batchXMLZipPath************" + batchXMLZipPath);
        OutputStream outputStream = null;
        File zipFile = new File(batchXMLZipPath);
        FileWriter writer = null;
        XMLOutputter out = new XMLOutputter();
        try {
            if (zipFile.exists()) {
                System.out.println("Found the batch xml zip file.");
                outputStream = getOutputStreamFromZip(batchXMLPath, batchInstanceID + EXT_BATCH_XML_FILE);
                out.output(document, outputStream);
            } else {
                writer = new java.io.FileWriter(batchXMLPath);
                out.output(document, writer);
                writer.flush();
                writer.close();
            }
        } catch (Exception e) {
            System.err.println(e.getMessage());
        } finally {
            if (outputStream != null) {
                try {
                    outputStream.close();
                } catch (IOException e) {
                }
            }
        }
    }

    public static OutputStream getOutputStreamFromZip(final String zipName, final String fileName) throws FileNotFoundException, IOException {
        ZipOutputStream stream = null;
        stream = new ZipOutputStream(new FileOutputStream(new File(zipName + ZIP_FILE_EXT)));
        ZipEntry zipEntry = new ZipEntry(fileName);
        stream.putNextEntry(zipEntry);
        return stream;
    }

} 
```

请注意，我没有更改原始代码的任何内容，但我将 jdom 和 ephesoft jar 添加到我的构建路径中。但是，在 removeFirstPageOfDoc 方法中，我仍然收到一堆与转换相关的错误。例如，该行`Element documentsList = (Element) documentFile.getChildren(DOCUMENTS).get(0);`应该允许 documentFile 访问 Element 的方法，对吗？但是，它似乎仍然只能访问文档类型的方法。我只是想知道这里可能存在什么问题以及如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:15:25.277

> 例如，该行`Element documentsList = (Element) documentFile.getChildren(DOCUMENTS).get(0);`应该允许 documentFile 访问 Element 的方法，对吗？

不，因为转换的优先级低于点运算符。要`documentFile`转换为 type `Element`，你可以这样写：

```
Element documentsList = ((Element) documentFile).getChildren(DOCUMENTS).get(0); 
```

用括号括起来`(Element) documentFile`。

**编辑添加** *（合并以下评论中的信息）*：

但是，根据for和[for](http://www.jdom.org/docs/apidocs.1.1/org/jdom/Element.html)[的 Javadoc`org.jdom.Document`](http://www.jdom.org/docs/apidocs.1.1/org/jdom/Document.html)，它们都是实际的类——它们都不是接口——也不是另一个的子类型。这意味着您实际上不能从一个转换到另一个。（在 Java 中，强制转换不允许您将一种类型的实例转换为另一种类型；为了工作，必须引用一个真正属于 type的对象。因为一个对象永远不可能是两者的实例并且，编译器甚至不允许在这里进行这种类型的转换。）[`org.jdom.Element`](http://www.jdom.org/docs/apidocs.1.1/org/jdom/Element.html)`((Type) reference)``reference``Type``Element``Document`

相反，编写此示例代码的人可能应该这样写：

```
Element documentsList =
    documentFile.getRootElement().getChildren(DOCUMENTS).get(0); 
```

它使用`getRootElement()`方法（返回文档的根元素）而不是强制转换`Element`（试图让编译器相信文档只是*一个*元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:47:01.877

ruakh 是对的，但你也需要做下一个级别。

```
Element documentsList = (Element)(((Document) documentFile).getChildren(DOCUMENTS).get(0)); 
```

当然，在 JDOM 2.x（具有正确的泛型类型）中，这一切都变得更容易了......

```
Element documentsList = doumentFile.getChildren(DOCUMENTS).get(0); 
```

滚滚

# solr - Solr - 在解析的短语查询中保留标点符号

> ID：12481281
> 
> 赞同：0
> 
> 时间：2012-09-18T16:36:09.850
> 
> 标签：solr, solrj

我在 Windows 机器上使用 apache-solr-3.6.0。我想搜索包含标点符号的短语。例子：

```
"He said: Hi" 
```

我试图逃避标点符号，`\`所以我的网址是：

```
http://localhost:8983/solr/select/?q="He%20said\:%20Hi"&version=2.2&start=0&rows=10&indent=on&debugQuery=true 
```

但我发现 solr 修剪了解析查询中的标点符号，结果是：

```
<str name="rawquerystring">"He said\: Hi"</str>
<str name="querystring">"He said\: Hi"</str>
<str name="parsedquery">PhraseQuery(text:"he said hi")</str>
<str name="parsedquery_toString">text:"he said hi"</str> 
```

那么如何在不修剪标点符号的情况下查询短语呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:23:47.127

您使用的是什么分析器/标记器？

检查 analysis.jsp 的行为并进行相应调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:28:43.620

根据我的问题[在这里](http://lucene.472066.n3.nabble.com/Solr-Keep-Punctuation-in-Parsed-Phrase-Query-td4008977.html)。

似乎问题出在字段类型中。因此，当我将架构修改为：

```
<field name="text" type="text_ws" indexed="true" stored="true" termVectors="true" multiValued="true"/> 
```

有用。和`text_ws`分词器是`WhitespaceTokenizerFactory`

# javascript - 如何从方法返回字符串？

> ID：12481282
> 
> 赞同：0
> 
> 时间：2012-09-18T16:36:13.297
> 
> 标签：javascript

我尝试将名称和颜色发送到下面的构造函数。该方法`this.whatAreYou()`应在调用时检索这些字符串。

我想在屏幕上显示这个。

我有以下代码：

```
function Gadget(name, color) {
    this.name = name;
    this.color = color;
    this.whatAreYou = function() {
        return 'I am a ' + this.name+ ' ' + this.color;
    };
}

string = Gadget(grass, green);
alert(string);​ 
```

但是警报不起作用。我怎样才能达到我想要的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:37:41.487

您的小工具不是字符串。它只包含一个返回字符串的函数。

当您似乎试图创建 Gadget 类的实例时，您需要使用`new`运算符。

如果`grass`并且`green`不是预定义变量而是字符串，则需要将它们放在引号之间。

尝试

```
var g = new Gadget('grass', 'green');
alert(g.whatAreYou());​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:45:35.573

您有一些问题，包括传递给小工具的参数不在引号中。而且你永远不会调用 whatAreYou()。

```
 <script type="text/javascript">

    function Gadget(name, color) {
        this.name = name;
        this.color = color;
        this.whatAreYou = function () {
            return 'I am a ' + this.name + ' ' + this.color;
        };
        return whatAreYou();
    }

    alert(Gadget('grass', 'green'));

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T16:38:23.553

您需要创建一个`Gadget`使用`new`运算符的实例。

```
var gadget = new Gadget('grass', 'green');
var string = gadget.whatAreYou();
alert(string); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T16:42:57.267

```
function Gadget(name, color) {
    this.name = name;
    this.color = color;
    this.whatAreYou = function() {
        return 'I am a ' + this.name+ ' ' + this.color;
    };
return this.whatAreYou;
}

string = Gadget(grass, green);
alert(string);​ 
```

# python - 运行包含单例的已编译应用程序时遇到问题

> ID：12481284
> 
> 赞同：1
> 
> 时间：2012-09-18T16:36:15.973
> 
> 标签：python, singleton, pyqt, pyqt4, py2exe

我在运行包含单例的已编译应用程序时遇到问题，.pyw 编译过程运行良好，但是当我尝试运行生成的 .exe 时，它​​会写入错误日志，消息如下所示：

```
Traceback (most recent call last):
  File "main.pyw", line 16, in <module>
  File "tendo\singleton.pyc", line 20, in __init__
AttributeError: 'module' object has no attribute '__file__' 
```

这就是我调用单身人士的方式：

```
from tendo import singleton
me = singleton.SingleInstance() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:51:38.797

[tendo](https://github.com/ssbarnea/tendo/)的单例模块[用于](https://github.com/ssbarnea/tendo/blob/master/tendo/singleton.py#L20)`sys.modules['__main__'].__file__`查找主目录。在 py2exe 中它不存在，这就是您收到此错误的原因。

你可以用[这个答案](https://stackoverflow.com/a/608036/11343)修复它。在 tendo/singleton.py 的第 20 行，你有：

```
self.lockfile = os.path.normpath(tempfile.gettempdir() + '/' +
  os.path.splitext(os.path.abspath(sys.modules['__main__'].__file__))[0] \
  .replace("/","-").replace(":","").replace("\\","-") + '-%s' % flavor_id +'.lock') 
```

替换为如下内容：

```
path_to_script = get_main_dir()  #see linkd answer
self.lockfile = os.path.normpath(tempfile.gettempdir() + '/' +  path_to_script
  .replace("/","-").replace(":","").replace("\\","-") + '-%s' % flavor_id +'.lock') 
```

将此作为问题报告给作者，和/或提出修复请求。

# vb.net - DotNetNuke 部分类控制

> ID：12481289
> 
> 赞同：0
> 
> 时间：2012-09-18T16:36:30.630
> 
> 标签：vb.net, user-controls, parameters, dotnetnuke

我正在使用 DotNetNuke 并创建一个 ASCX 调用 TutorialsAll.ascx 和第二个调用 TutorialsByLevel.ascx。TutorialsByLevel.ascx 目前在 TutorialsAll.ascx 中使用了 4 次。

在 TutorialsByLevels.ascx 我有一个`TutorialTypeID`从 TutorialsAll.ascx 开始的公共属性。

我已经添加了下面的代码，任何人都知道为什么不这样做，以及我如何使它工作，非常感谢。

**TutorialsAll.ascx:**

```
<%@ Control Language="VB" AutoEventWireup="false" CodeFile="TutorialsAll.ascx.vb" Inherits="Portals_0_open_TutorialsAll" %>
<%@ Register TagPrefix="mark" TagName="tutorial" Src="TutorialsByLevel.ascx" %>
<div class="Tut_Column"><mark:tutorial ID="TutorialBasic1" TutorialType=1 runat="server" /></div>
<div class="Tut_Column"><mark:tutorial ID="TutorialBasic2" TutorialType=2 runat="server" /></div>
<div class="Tut_Column"><mark:tutorial ID="TutorialBasic3" TutorialType=3 runat="server" /></div>
<div class="Tut_Column"><mark:tutorial ID="TutorialBasic4" TutorialType=4 runat="server" /></div> 
```

**TutorialsByLevel.ascx:**

```
Partial Class Portals_0_open_TutorialsByLevel
Inherits System.Web.UI.UserControl

Dim _Type As Integer

Public Property TutorialType(ByVal TypeID As Integer) As Integer
    Get
        Return _Type
    End Get
    Set(ByVal value As Integer)
        _Type = value
    End Set
End Property

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim conn As SqlConnection = New SqlConnection(ConfigurationManager.ConnectionStrings("SiteSqlServer").ToString)
    conn.Open()

    Dim sql As String = "SELECT * FROM Prez_Stories WHERE Tut_Show = 1 AND Tut_Level = " & _Type & "ORDER BY Tut_Order"
    Dim sqlCmd As SqlCommand = New SqlCommand(sql, conn)
    Dim myReader As SqlDataReader
    myReader = sqlCmd.ExecuteReader

    Dim s As StringBuilder = New StringBuilder("")

    s.Append("<div=""tutorialBlock"">TutorialType = " & _Type)
    Do While myReader.Read
        s.Append("<div id=""newTutorial"">" & myReader("Title"), "<br/>" & myReader("Summary") & "<div>")
    Loop
    s.Append("</div>")

    Literal1.Text = s.ToString
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:33:03.013

标记，

试图记住，但我认为您可能必须将 Page_Load 代码移动到 prerender 事件。如果我没记错的话（自从我从事一个项目以来已经有一段时间了）该属性在页面周期中填充得太晚，无法在您必须在预渲染中处理的页面加载中工作。

我可能是错的-----:)

# actionscript-3 - 从动作脚本打开闪光灯相机设置

> ID：12481291
> 
> 赞同：0
> 
> 时间：2012-09-18T16:36:44.170
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, video-capture

我必须在禁用右键单击的触摸屏上使用相机捕捉来制作 Flash 应用程序。

有没有办法从动作脚本打开闪光灯相机设置对话框？甚至更好的是整个右键菜单。

所以我可以从自制的维护按钮左右打开它。我知道如果用户从未选择过相机，它会自动显示，但我想不时更换相机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:03:00.757

您可以通过执行以下操作调出面板：

```
import flash.system.Security;
import flash.system.SecurityPanel;

Security.showSettings(SecurityPanel.PRIVACY); 
```

# android - 绘制自定义视图的剩余视图大小

> ID：12481298
> 
> 赞同：0
> 
> 时间：2012-09-18T16:36:58.890
> 
> 标签：android, android-layout

> 我必须在下面绘制一个自定义[视图](https://docs.google.com/file/d/0B24mKxvBKwiveG5saHFodFdaRGM/edit)
> 
> 在 DaTTab 横幅下方我必须在我的 xml 中绘制矩形视图
> 
> 1.  主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relative_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

  <include android:id="@+id/banner" layout="@layout/upper_border" />

<com.example.ui_1.Border_Portrait
        android:id="@+id/custom_display_view1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/banner" 
        /> 
```

> Draw_Border.jav

```
class Border_Portrait extends View{
     private static final int DEFAULT_SIZE = 100;

     int mViewHeight , mViewWidth ;
     Paint mPaint ;
     Canvas mCanvas ;
     int margin ;
     float [] mPoints ;
     int mLogoHeight ;
     int mLogoWidth ;
     int dy,dx ;

    public Border_Portrait(Context context) {
        super(context);

    }
    public Border_Portrait(Context context, AttributeSet attrs) {
        super(context, attrs);
        margin = 7 ;
        mPaint = new Paint();
        mPaint.setColor(Color.rgb(0,188,226));  
        mPaint.setStrokeWidth(3);
        mLogoHeight = ScreenUtils.convertDIPToPixels(getContext(), 50 + margin );
        mLogoWidth = ScreenUtils.convertDIPToPixels(getContext(), 66 + margin); 
        dy = ScreenUtils.convertDIPToPixels(getContext(),1) ;
        dx= ScreenUtils.convertDIPToPixels(getContext(),1) ;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);
        canvas.save();

        mPoints  = new float [] { 
                    margin + mLogoWidth ,margin,//1
                    getWidth()-margin ,margin ,//1
                    getWidth()-margin ,margin ,//2      
                    getWidth()-margin , getHeight()-margin ,//2 
                    getWidth()-margin , getHeight()-margin  , //3
                    margin , getHeight()-margin , //3
                    margin , getHeight() - margin , //4 
                    margin , mLogoHeight + dy ,//4
                    margin , mLogoHeight + dy , // 5
                    margin + mLogoWidth + dx ,mLogoHeight + dy, //5
                    margin + mLogoWidth ,mLogoHeight + dy, //6
                    margin + mLogoWidth ,margin, //6
                    } ;
        canvas.drawLines(mPoints, mPaint);
        canvas.restore();
    }
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        int parentWidth = MeasureSpec.getSize(widthMeasureSpec);
        int parentHeight = MeasureSpec.getSize(heightMeasureSpec);
        this.setMeasuredDimension(parentWidth, parentHeight);
    }

    private int calculateMeasure(int measureSpec) {
        return 0 ;
    }

} 
```

我的问题是如何在我参考的运行时测量边框的宽度

[这](https://stackoverflow.com/questions/4074937/android-how-to-get-a-custom-views-height-and-width)

和其他链接，但到目前为止还没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:31:20.930

> 刚刚得到答案在 main.xml 中添加边距

```
<com.example.ui_1.Border_Portrait
        android:id="@+id/custom_display_view1"
        android:layout_marginTop="50dp"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        /> 
```

# java - 获取其他jvm的内存使用详情

> ID：12481300
> 
> 赞同：1
> 
> 时间：2012-09-18T16:37:00.060
> 
> 标签：java, memory, jvm

当我尝试使用`System.getRunTime()`并获取内存详细信息时，我正在获取当前 JVM 的内存详细信息。但我需要另一个java进程的内存细节。我在当前代码中确实引用了该过程 ( `java.lang.Process`)。是否可以获得该进程的内存详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:54:10.760

尝试使用[VisualVM](http://visualvm.java.net/)，这是一个不错的工具，并尝试使用 jUnit 仅运行该进程，这样 jvm 将显示进程详细信息，或者您可以命名线程，以便识别您在 jvm 中查看的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:07:50.723

*   `JMX`
*   `jconsole`（使用 JMX）
*   VisualVM（类似于 jconsole）
*   以某种方式使用`System.getRuntime().exec("ps -aux/top/whatever")`

# playframework-2.0 - Ebean play2 删除 javax.persistence.PersistenceException ... 未知列

> ID：12481307
> 
> 赞同：-2
> 
> 时间：2012-09-18T16:37:28.093
> 
> 标签：playframework-2.0, ebean

我已经用我的模型完成了一些删除，但是一个使用了错误的列名

```
GroupeCours gc = GroupeCours.find
            .where()
            .eq("id",id)
            .findUnique();
GroupeCours gc2 = new GroupeCours();
gc2.id=10L;     
gc2.nom="testbidon";

EbeanServer server = Ebean.getServer("refens");
server.insert(gc2);
server.update(gc); //is ok 
server.delete(gc); //fail 
```

GC类

```
@SuppressWarnings("serial")
@Entity
@Table(name="GroupeCours", uniqueConstraints = {
    @UniqueConstraint(columnNames = { "nom", "anneeVersion", "idComposante" }),
    @UniqueConstraint(columnNames = { "id", "anneeVersion", "idComposante" }) })
public class GroupeCours extends AbstractModel {
/**
 * Clé primaire
 */
@Id
@Column(name="id")
public Long id; 
```

错误详情是

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[PersistenceException: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'GroupeCours_id' in 'where clause']] 
```

为什么要寻找钥匙 GroupeCours_id？
注意：插入和更新运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:40:20.923

我发现我的错误消息并不是真的很好，让我看向不好的方向事实上我有很多关系，错误来自它这里你看到正确的一个我已经把标签@JoinTable 我的模型comme从 play.1.0 和 hybernate 开始，命名约定在 hybernate 和 ebean 之间发生了很大变化，您还必须标记每个表和字段……您可以在 [https://groups.google.com/forum/?hl=上看到所有详细信息fr&fromgroups=#!topic/ebean/b4DRSxY68uM](https://groups.google.com/forum/?hl=fr&fromgroups=#!topic/ebean/b4DRSxY68uM)

```
@ManyToMany(cascade = CascadeType.ALL,mappedBy="groupes")       
@JoinTable (
           name="VolumeHoraireAEncadrer_GroupeCours",
           joinColumns = {@JoinColumn(name = "groupes_id", referencedColumnName = "id")},
           inverseJoinColumns = {@JoinColumn(name = "VolumeHoraireAEncadrer_id", referencedColumnName = "id")}

       )
public Set<VolumeHoraireAEncadrer> vhae = new HashSet<VolumeHoraireAEncadrer>(); 
```

# asp.net - ASP.NEt WebForms UserControl：为什么覆盖 .Visible 会导致 System.StackOverflowException？

> ID：12481317
> 
> 赞同：2
> 
> 时间：2012-09-18T16:38:05.107
> 
> 标签：asp.net, user-controls, webforms, overriding, stack-overflow

我有一个自定义 UserControl，我需要将其 .Visible 属性设置为 True 或 False。但是，如果 UserControl 的第一个子控件是 Panel 并且它的 ID 是 cMain，我希望它设置 Panel 的 .Visible 属性而不是 UserControl 的。这是我的代码：

这是我使用的自定义类：

```
Public MustInherit Class MyControl : Inherits UserControl

    Public Overrides Property Visible As Boolean
        Get
            Return GetVisible()
        End Get
        Set(value As Boolean)
            SetVisible(value)
        End Set
    End Property

    Function GetVisible() As Boolean

        Dim c As Control = GetMain()

        If TypeOf c Is Panel Then
            Return c.Visible
        Else
            Return MyBase.Visible
        End If

    End Function

    Sub SetVisible(Value As Boolean)

        Dim c As Control = GetMain()

        If TypeOf c Is Panel Then
            c.Visible = Value
        Else
            MyBase.Visible = Value
        End If

    End Sub

    Function GetMain() As Control

        Dim c As Control = If(Controls.Count = 0, Nothing, Controls(0))

        If Not (TypeOf c Is Panel AndAlso c.ID = "cMain") Then c = Me

        Return c

    End Function

End Class 
```

这是实际的 UserControl 本身：

```
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="TestControl.ascx.vb" Inherits="JsonJqueryDevex.TestControl1" %>
<asp:Panel ID="cMain" runat="server">
inside
</asp:Panel>
outside 
```

UserControl 的代码隐藏：

```
Public Class TestControl1
    Inherits MyControl

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub

End Class 
```

这是在主机页面中实现它的标记：

```
<uc:TestControl ID="ucTest" Visible="true" runat="server"></uc:TestControl> 
```

请注意，我在基类中覆盖了 .Visible 。我这样做是为了如果被引用的控件是 UserControl 本身，我可以调用 MyBase。否则，我认为它是面板控件。当我加载页面时，我得到`System.StackOverflowException`. `false`有趣的是，当我在标记中将自定义控件的 Visible 属性设置为时，我没有得到这个。

堆栈跟踪显示它在调用 .Visible 的 get 访问器时被捕获`Return GetVisible()`。如果是 Panel，它将执行`Return c.Visible`. 但是，一旦我在 c 是 Panel 时引用 .Visible ，它就会重新进入 MyControl 的 .Visible 获取访问器。我不知道这是怎么可能的，因为我只是覆盖了我的自定义控件的 Visible 属性，但它就像我覆盖了面板的 .Visible 属性一样。这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T01:34:39.947

您的问题在于[`Control.Visible`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.visible.aspx "控制.可见").

当值是时，您的程序正在运行，`false`因为它只是`false`在检查时返回。**但是，除非**控件可见**且父**`true`控件可见，否则控件将不会返回。`.Visible`

 ****在您的情况下发生的情况是，当 时`true`，父控件正在检查子控件的`.Visible`值，并且任何子控件都会检查其父控件（您的用户控件）以及其自身的`.Visible`值。这是您的无限递归循环发生的地方，导致堆栈溢出。****

# r - 改变 ordihull vegan r 包中的线条粗细

> ID：12481320
> 
> 赞同：0
> 
> 时间：2012-09-18T16:38:13.667
> 
> 标签：r, plot, line, vegan

如何更改 ordihull 中使用的边界线的粗细？

```
library(vegan)
data(dune)
data(dune.env)
mod <- cca(dune ~ Management, dune.env)
attach(dune.env)
plot(mod, type="n", scaling = 3)
pl <- ordihull(mod, Management, scaling = 3, label = TRUE) 
```

![在此处输入图像描述](../Images/4b9ee9791e6a81e06178404545ac439a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:52:33.167

您可以使用**lwd**参数，有关详细信息，请参阅`?par`。

```
pl <- ordihull(mod, Management, scaling = 3, label = TRUE, lwd=10) 
```

![桔梗](../Images/ce128bb88e4c46d437bda44d96c8a3f6.png)

# html - 如何在 HTML 中制作“电子邮件当前页面”按钮？

> ID：12481331
> 
> 赞同：4
> 
> 时间：2012-09-18T16:38:32.993
> 
> 标签：html, button, hyperlink, mailto

期望的目标：我正在尝试在我的网站上制作一个“电子邮件当前页面”按钮。这些是必要的功能：

*   它应该是通用的，可以匹配按钮所在的任何页面（即我在我的网站上发布的不同文章等）
*   它应该没有自动设置收件人
*   它应该有一个固定的主题行
*   它应该有正文，其中包含指向当前页面的链接（同样，不是固定链接，而是适用于激活按钮的任何页面的通用链接）。
*   最后，电子邮件按钮应该以图像图标的形式在网页上可见。

我是一个完全的 html 新手（我的经验相当于在 wordpress 上玩了几天）所以我一无所知。这就是我想出的（这显然行不通）：

```
<a href="MAILTO:?subject=Check out this company&body=Check out <a title="this site" href="www.google.com">this company</a>. They are a search engine. I thought this might be of interest to you. " target="_blank"><img src="http://www.ccaa.ca/web/templates/cc… /></a> 
```

根据 www.w3schools.com/html/，这是错误的，哈哈。我试图把它改正，但我只是在破坏它。请指教！我已更改链接以删除个人公司信息，并将其替换为通用内容，例如谷歌等。请告诉我我做错了什么以及我需要做些什么来修复它。非常感谢！

PS - 做一个表格会更好吗？如果是这样，我从哪里开始？我仍然可以使用该按钮作为表单的链接吗？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T16:47:35.310

```
<html>
<head>
    <title>My Page</title>
    <script language="javascript">
        function emailCurrentPage(){
            window.location.href="mailto:?subject="+document.title+"&body="+escape(window.location.href);
        }
    </script>
</head>
<body>
        <a href="javascript:emailCurrentPage()">Mail this page!</a>
<body>
</html> 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:47:36.303

我会查看第三方工具，例如 AddThis，它支持通过电子邮件和社交网络进行共享：

[http://www.addthis.com/](http://www.addthis.com/)

有一个特定的 WordPress 插件，或者您可以将标准小部件添加到任何网页。

# android - Google Drive SDK - 上传图片、OCR、下载结果

> ID：12481333
> 
> 赞同：4
> 
> 时间：2012-09-18T16:38:50.200
> 
> 标签：android, google-drive-api, ocr

所以最终我试图上传我希望谷歌到 OCR 的图像。然后我希望能够将 OCR 的结果返回到我的 Android 应用程序。我的图片已正确上传。我可以遍历我的谷歌驱动器中的所有文件，我看到有可用的导出链接，其中之一是“文本/纯文本”。如果我在浏览器中使用这些 url 之一，它会下载文本。这是我应该尝试访问它的方式吗？

我尝试使用通过对 insert 方法返回的文件调用 getExportLinks 方法获得的 url

```
File file = drive.files().insert(body, mediaContent).setOcr(true).execute();
String imageAsTextUrl = getExportLinks.get("text/plain") 
```

我最终得到了似乎是 Google Drive 主页的 HTML。为了获取导出的 url 文档，我使用了 google drive 实例，因此它应该像我认为的插入方法一样正确地进行了身份验证。

```
DriveRequest request = new DriveRequest(drive, HttpMethod.GET, imageAsTextUrl, null); 
```

有没有人尝试过这样做？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:32:40.520

好吧，我又一次回答了我自己的问题。基本上，因为这似乎是一个 web url 而不是我可以进行的 API 调用，所以如果它未经身份验证，它就不会以 401 响应。所以基本上我得到的响应是登录页面的 HTML。显然使用 DriveRequest 不会像我想象的那样自动处理身份验证。因此，我通过手动将身份验证添加到 HttpClient GET 调用来使其工作。

但是有没有办法用实际的 API 来做我想做的事情？所以我可以处理响应代码？

这是我下载文件的文本/纯文本表示的方法。这里有一个警告：鉴于我上传的图像是使用默认相机应用在手机相机上拍摄的，默认 dpi 和/或 jpeg 压缩导致 OCR 无法正常工作。无论如何，这是我使用的代码。只是基本的 HttpClient 东西

```
 String imageAsTextUrl = file.getExportLinks().get("text/plain");

                HttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(imageAsTextUrl);
                get.setHeader("Authorization", "Bearer " + token);
                HttpResponse response = client.execute(get);

                StringBuffer sb = new StringBuffer();

                BufferedReader in = null;
                try {
                    in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
                    String str;
                    while ((str = in.readLine()) != null) {
                        sb.append(str);
                    }
                }
                finally {
                    if (in != null) {
                        in.close();
                    }
                }

                // Send data to new Intent to display: 
                Intent intent = new Intent(UploadImageService.this, VerifyTextActivity.class);
                intent.putExtra("ocrText", sb.toString());
                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(intent); 
```

# c# - 为什么我的 var 调用不返回 DataListItems

> ID：12481334
> 
> 赞同：3
> 
> 时间：2012-09-18T16:38:53.303
> 
> 标签：c#, asp.net, .net

自从获得 Resharper 以来，我一直喜欢尽可能使用 var inside 方法。因此，稍后如果您传入不同的类型，则更改会在您的代码中向下级联，而无需将每个 int 声明更改为双精度。这让我想到了我的问题。我正在从 DataList 中检索 DataListItems 列表

```
var daysWorked = dlResourcesAllocated.Items; 
```

然后单步执行它返回的 List

```
foreach (var d in daysWorked)
{
     var c = d.FindControl("ucSomethingSomething"); //Doesn't compile d has no methods
} 
```

我的 d 突然被转换为一个没有方法的对象

```
foreach (DataListItem d in daysWorked)
{
     var c = d.FindControl("ucSomethingSomething");
} 
```

但是工作得很好。

我只是好奇为什么“var”无法弄清楚它是DataListItem的集合。Intellisense 似乎知道这一点。我确信对此有一个非常简单的解释。飞碟老兄可能会出现并指出我在深入阅读 C# 时应该更加注意......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T16:41:53.217

这是因为[`DataListItemCollection`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalistitemcollection%28v=vs.100%29.aspx)只有实现`IEnumerable`，而不是`IEnumerable<DataListItem>`，因为它早于泛型。

由于它没有实现，*除非您明确提供类型，否则*`IEnumerable<T>`运行时将`Object`在您的`foreach`循环中使用。

 *通过这样写：

```
foreach (var d in daysWorked) 
```

编译器看到`daysWorked`implements `IEnumerable`，并将其重写为：

```
foreach (object d in daysWorked) 
```

当`foreach`与`IEnumerable`（非泛型）一起使用时，您可以明确地提供类型：

```
foreach (DataListItem d in daysWorked) 
```

这样做可以有效地`IEnumerable`为您转换结果，在循环中提供正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:42:13.060

这是因为`DataList.Items`返回一个`DataListItemCollection`，而不是 的通用集合`DataListItem`。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalistitemcollection.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalistitemcollection.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T16:44:50.220

我强烈建议您仅`var`在类型很明显时才使用。如果你需要思考，你可能造成的伤害多于帮助。

看起来该`Item`属性返回`IEnumerable`，而不是`IEnumerable<DataListItem>`，这意味着枚举中的项目是类型的`object`。

`foreach (DataListItem d in daysWorked)`实际上会导致从 to 中的每个项目返回的类型进行强制`daysWorked`转换`DataListItem`，这就是该代码正常工作的原因。*

# javascript - 导出对象中的对象

> ID：12481335
> 
> 赞同：1
> 
> 时间：2012-09-18T16:38:53.827
> 
> 标签：javascript, oop, node.js, module

所以我一直在看这篇文章：[Node.js module.exports 的目的是什么，你如何使用它？](https://stackoverflow.com/questions/5311334/what-is-the-purpose-of-nodejs-module-exports-and-how-do-you-use-it)并且一直试图在 JavaScript 对象的范围内理解它。

所以如果我有这个`game.js`：

```
var myObj = function() { 

    this.function1 = function(){
        ...
    };
};

exports.myObj = myObj; 
```

在另一个文件中，我假设我会做这样的事情：

```
var RequiredObj = require('game.js'); 
```

或者

```
var RequiredObj = require('game.js').myObj; 
```

我迷失的是如何使用该对象及其功能，以及如何创建该对象的新实例。

会是这样吗？

```
RequiredObj.myObj.function1(); 
```

和

```
RequiredObj.myObj = new RequiredObj.myObj(); 
```

我通过的物体有多大也有限制吗？因为在我的实际脚本中，我的游戏对象很大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:28:05.443

假设“*其他文件*”与 位于同一目录中`game.js`，这样的事情应该可以工作：

```
var game = require('./game.js');

var mo = new game.myObj();

mo.function1(); 
```

需要注意的几点：

*   项目中的模块应[使用路径](http://nodejs.org/api/modules.html#modules_file_modules)指定- 以`./`、`../`或`/`. 否则，`require`只会在[核心模块](http://nodejs.org/api/modules.html#modules_core_modules)或[`node_modules`文件夹](http://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)中搜索模块（例如，通过[npm install](https://npmjs.org/doc/install.html)）。

*   `myObj`似乎是一个构造函数，`function1`将是一个实例方法。所以，`RequiredObj.myObj.function1()`会因为没有创建实例而出错。

*   另一方面，`RequiredObj.myObj = new RequiredObj.myObj()`应该工作......*一次*。此行使用对实例的引用设置对构造函数的引用，使构造函数（大部分）不可访问。（“ *Mostly* ”是因为它仍然可以用作`RequiredObj.myObj.constructor`，但为实例声明一个新变量通常更简单。）

> 我通过的物体有多大也有限制吗？

ECMAScript 没有对`Object`. 不过，您当然会受到用于执行应用程序的硬件的限制。

# java - jfreechart 多个数据集到 svg 图像

> ID：12481336
> 
> 赞同：0
> 
> 时间：2012-09-18T16:38:54.247
> 
> 标签：java, svg, jfreechart

我正在使用 JFreeChart 从 csv 文件填充图形，我设法从文件创建多个数据集并绘制数据。

SVG 图像被重新写入“file.svg”，所以看起来一点也不漂亮。问题是，我如何从多个数据集创建单个 SVG 图像，如果我知道如何获取每个图表，按顺序绘制并将它们全部绘制到 SVG 文件中。

```
package freechart;  
import java.util.*;
import java.text.*;
import java.io.*;
import java.awt.*;
import java.util.StringTokenizer;
import javax.swing.*;

import org.apache.batik.dom.GenericDOMImplementation;
import org.apache.batik.svggen.SVGGraphics2D;
import org.jfree.chart.*;
import org.jfree.chart.axis.*;
import org.jfree.chart.plot.*;
import org.jfree.chart.renderer.xy.*;
import org.jfree.data.time.*;
import org.jfree.ui.*;
import org.w3c.dom.DOMImplementation;
import org.w3c.dom.Document;
import java.awt.Rectangle;
import java.awt.geom.Rectangle2D;
  public class StockHistoryChart extends JPanel 
   {

private static final long serialVersionUID = 1L;

// Holds the data
    public TimeSeriesCollection dataset = new TimeSeriesCollection();
    public TimeSeriesCollection datasetPhysical = new TimeSeriesCollection();
    public TimeSeriesCollection datasetS = new TimeSeriesCollection();
    public TimeSeriesCollection datasetMM = new TimeSeriesCollection();
    public TimeSeriesCollection datasetIF = new TimeSeriesCollection();
    public TimeSeriesCollection datasetWP = new TimeSeriesCollection();

          // Create a chart
                  @SuppressWarnings("unused")
    private JFreeChart chart;

          // Create a panels that can show our chart
                 @SuppressWarnings("unused")
    private ChartPanel panel;

    private String stockSymbol;

    private String CurrentMonth;

    @SuppressWarnings({ "deprecation", "resource", "unused" })
   public StockHistoryChart( String filename )
   {
try
{
  // Get Stock Symbol
  this.stockSymbol = filename.substring( 0, filename.indexOf( '.' ) );

  // Create time series
  TimeSeries PVC = new TimeSeries( "Physical Count", Day.class );
  //TimeSeries PV = new TimeSeries( "Physical", Day.class );
  TimeSeries STKC = new TimeSeries( "S Count", Day.class );
  //TimeSeries STKTP = new TimeSeries( "S", Day.class );
  TimeSeries MMTPC = new TimeSeries( "MM Count", Day.class );
  //TimeSeries MMTP = new TimeSeries( "MM", Day.class );
  TimeSeries IFSC = new TimeSeries( "IF Count", Day.class );
  //TimeSeries IFSTP = new TimeSeries( "IF", Day.class );
  TimeSeries WPC = new TimeSeries( "WP Count", Day.class );
  //TimeSeries WPTP = new TimeSeries( "WP", Day.class );

  BufferedReader br = new BufferedReader( new FileReader( filename ) );
  String key = br.readLine();
  String line = br.readLine();
  while( line != null &&
      !line.startsWith( "<!--" ) )
  {

    StringTokenizer st = new StringTokenizer( line, ",", false );
    Day day = getDay( st.nextToken() );
    double PVCValue = Double.parseDouble( st.nextToken() );
    double PVValue = Double.parseDouble( st.nextToken() );
    double STKCValue = Double.parseDouble( st.nextToken() );
    double STKTPValue = Double.parseDouble( st.nextToken() );
    double MMTPCValue = Double.parseDouble( st.nextToken() );
    double MMTPValue = Double.parseDouble( st.nextToken() );
    double IFSCValue = Double.parseDouble( st.nextToken() );
    double IFSTPValue = Double.parseDouble( st.nextToken() );
    double WPCValue = Double.parseDouble( st.nextToken() );
    double WPTPValue = Double.parseDouble( st.nextToken() );
    double TTCValue = Double.parseDouble( st.nextToken() );
    double TTAValue = Double.parseDouble( st.nextToken() );

    // Add this value to our series'
    PVC.addOrUpdate( day, PVCValue );
    //PV.addOrUpdate( day, PVValue );
    STKC.addOrUpdate( day, STKCValue );
    //STKTP.addOrUpdate( day, STKTPValue );
    MMTPC.addOrUpdate( day, MMTPCValue );
    //MMTP.addOrUpdate( day, MMTPValue );
    IFSC.addOrUpdate( day, IFSCValue );
    //IFSTP.addOrUpdate( day, IFSTPValue );
    WPC.addOrUpdate( day, WPCValue );
    //WPTP.addOrUpdate( day, WPTPValue );
    TTC.addOrUpdate( day, TTCValue );
    //TTA.addOrUpdate( day, TTAValue );

    // Read the next day
    line = br.readLine();
  }

  // Build the datasets
  dataset.addSeries( PVC );
  //dataset.addSeries( PV );
  dataset.addSeries( STKC );
  //dataset.addSeries( STKTP );
  dataset.addSeries(MMTPC);
  //dataset.addSeries(MMTP);
  dataset.addSeries(IFSC);
  //dataset.addSeries(IFSTP);
  dataset.addSeries(WPC);
  //dataset.addSeries(WPTP);
  dataset.addSeries(TTC);
  //dataset.addSeries(TTA);

  datasetPhysical.addSeries(PVC);
  //datasetPhysical.addSeries(PV);
  datasetS.addSeries(STKC);
  //datasetS.addSeries(STKTP);
  datasetMM.addSeries(MMTPC);
  //datasetMM.addSeries(MMTP);
  datasetIF.addSeries(IFSC);
  //datasetIF.addSeries(IFSTP);
  datasetWP.addSeries(WPC);
  //datasetWP.addSeries(WPTP);

  dataset.setDomainIsPointsInTime(true);
 //datasetPhysical.setDomainIsPointsInTime(true);
  datasetS.setDomainIsPointsInTime(true);
  //datasetS.setDomainIsPointsInTime(true);
  datasetMM.setDomainIsPointsInTime(true);
  //datasetMM.setDomainIsPointsInTime(true);
  datasetIF.setDomainIsPointsInTime(true);
  //datasetIF.setDomainIsPointsInTime(true);
  datasetWP.setDomainIsPointsInTime(true);
  //datasetWP.setDomainIsPointsInTime(true);

    JFreeChart summary = buildChart( dataset, "Figures Summary Chart", true );
  JFreeChart Physical = buildChart( datasetPhysicalVouchers, "Physical Vouchers count", false );
  JFreeChart S = buildChart( datasetSTK, "S count", false );
  JFreeChart MM = buildChart( datasetMM, "MM count", true );
  JFreeChart IF = buildChart( datasetIFS, "IF (count & values)", false );
  JFreeChart WP = buildChart( datasetWebPortal, "WP count", true );

  // Create this panel
  this.setLayout( new GridLayout( 2, 2 ) );
  this.add( new ChartPanel( summary ) );
  this.add( new ChartPanel( Physical ) );
  this.add( new ChartPanel( S ) );
  this.add( new ChartPanel( MM ) );
  this.add( new ChartPanel( IF ) );
  this.add( new ChartPanel( WP ) );

}
catch( Exception e )
{
  e.printStackTrace();
} }    
private JFreeChart buildChart( TimeSeriesCollection dataset, String title, boolean endPoints )
  {
    // Create the chart
    JFreeChart chart = ChartFactory.createTimeSeriesChart(
      title,
      "Date", "Totals",
      dataset,
      true,
      true,
      false
    );

    // Setup the appearance of the chart
    chart.setBackgroundPaint(Color.white);

    XYPlot plot = (XYPlot) chart.getXYPlot();
    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);
    plot.setAxisOffset(new RectangleInsets(5.0, 5.0, 5.0, 5.0));
    plot.setDomainCrosshairVisible(true);
    plot.setRangeCrosshairVisible(true);

    // Display data points or just the lines?
    if( endPoints ) 
    {
      XYItemRenderer renderer = plot.getRenderer();
      if (renderer instanceof StandardXYItemRenderer) {
        StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
        rr.setBaseShapesVisible(true);
        rr.setBaseShapesFilled(true);
        rr.setDrawSeriesLineAsPath(true);
        rr.setSeriesPaint(0, Color.blue.brighter());
        rr.setSeriesVisible(0, true); // default
        rr.setSeriesVisibleInLegend(0, true);  // default

      }
    }

    // Tell the chart how we would like dates to read
    DateAxis axis = (DateAxis) plot.getDomainAxis();
    axis.setDateFormatOverride(new SimpleDateFormat("dd-MMM-yy"));

    // creating SVG 
    File svgFile = new File("file.svg");
    Rectangle2D r2d = new Rectangle2D.Double (
            100.0, 
            100.0,
            30.0,
            200.0
            ); 

    // write it to file
    try {
        exportChartAsSVG(chart, r2d.getBounds(), svgFile);

        // TODO: notify the user the file has been saved (e.g. status bar)
        System.out.println("Figured saved as " + svgFile.getAbsolutePath());

    } catch (IOException e) {
        System.err.println("Error saving file:\n" + e.getMessage());
    }

            return chart;         
  }
      void exportChartAsSVG(JFreeChart chart, Rectangle bounds, File svgFile) throws    IOException {
      // Get a DOMImplementation and create an XML document
      DOMImplementation domImpl =
          GenericDOMImplementation.getDOMImplementation();
      Document document = domImpl.createDocument(null, "svg", null);

      // Create an instance of the SVG Generator
      SVGGraphics2D svgGenerator = new SVGGraphics2D(document);

      // draw the chart in the SVG generator
      chart.draw(svgGenerator, bounds);

      // Write svg file
      OutputStream outputStream = new FileOutputStream(svgFile);
      Writer out = new OutputStreamWriter(outputStream, "UTF-8");
      svgGenerator.stream(out, true /* use css */);                     
      outputStream.flush();
      outputStream.close();
    }    

    // Main method
  public static void main( String[] args )
  {

    StockHistoryChart shc = new StockHistoryChart("file.csv");

    JFrame frame = new JFrame(shc.CurrentMonth());
    frame.getContentPane().add( shc, BorderLayout.CENTER );
    frame.setSize( 640, 480 );
    frame.setVisible( true );
    frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:44:04.733

我解决了我面临的这个问题（无法创建包含所有图表的 SVG 文件），方法是删除 exportChartAsSVG() 并像这样从主函数调用 SVG 生成器；

```
// Get a DOMImplementation.
DOMImplementation domImpl = GenericDOMImplementation.getDOMImplementation();

// Create an instance of org.w3c.dom.Document.
String svgNS = "http://www.w3.org/2000/svg";
Document document = domImpl.createDocument(svgNS, "svg", null);

// Create an instance of the SVG Generator.
SVGGraphics2D svgGenerator = new SVGGraphics2D(document);

// Ask the shc to render into the SVG Graphics2D implementation.
shc.paint(svgGenerator);

// Create a SVG file to populate our Frame
File svgFile = new File ("svgfile.svg");
FileOutputStream fos = new FileOutputStream(svgFile);

// Finally, stream out SVG to the standard output using
// UTF-8 encoding.
boolean useCSS = true; // we want to use CSS style attributes
Writer out = new OutputStreamWriter(fos, "UTF-8");
svgGenerator.stream(out, useCSS);
out.flush(); 
```

# css - 在自上而下之前从左到右流动多列元素

> ID：12481337
> 
> 赞同：3
> 
> 时间：2012-09-18T16:38:54.763
> 
> 标签：css

这可能吗？

因此，如果我们有一个列表：

*   项目 1
*   第 2 项
*   第 3 项
*   第 4 项

代替

项目 1 项目 3

第 2 项 第 4 项

我们想要

项目 1 项目 2

第 3 项 第 4 项

多列布局模块可以做到这一点，还是我最好用老式的浮点数或内联 div 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:01:13.770

像这样？

```
<style>
  ul {list-style: none;}
  li {float: left;}
  li:nth-child(2n+1) {clear: left;} /* 1st of every twos */
</style>
<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
  <li>item 4</li>
</ul> 
```

# xcode - 如何强制 Xcode 重新链接

> ID：12481339
> 
> 赞同：6
> 
> 时间：2012-09-18T16:39:09.530
> 
> 标签：xcode, xcode4

当我在一个库中更新 Xcode 中的源文件（不是头文件）时，Xcode 似乎不知道何时重新链接该库。

有没有办法强制 xcode 重新链接而无需清理或修改头文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:49:53.233

如果您已将库添加为子项目，请记住将其添加为构建阶段中的“目标依赖项”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:37:57.860

如果我错了，请纠正我，但我相信如果您将最新的源文件放在同一位置并覆盖文件的先前版本。Xcode 会选择最新的源文件

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T14:41:14.627

您可以简单地转到**Product -> Clean**并且当您**重建**它时**必须** *编译*并*重新链接*所有内容

# android - 从一个活动类控制活动实例

> ID：12481342
> 
> 赞同：0
> 
> 时间：2012-09-18T16:39:36.473
> 
> 标签：android, android-intent

请帮我解决这个问题。示例我有 Activity 类 MyActivity。我启动此活动并将此实例称为“主页”。在这个活动中，我有三个按钮。称为：Button1、Button2、Button3。当我单击一个按钮时，它将启动 MyActivity 的另一个实例。那么，我可以这样做吗：

我单击 Button1 start A1 ，单击 Button2 start A2，然后单击 Button3 start A3。我们将有这样的活动堆栈：home ->A1 ->A2->A3。在 Activity A3（MyActivity 的一个实例）上。当我单击 Button1 时，我可以将 A1 移到前面而不是创建新的吗？我想知道我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:24:43.237

如果 A1、A2 和 A3 都是你的实例，`MyActivity`你就不能这样做，因为没有办法告诉 Android`MyActivity`你想把哪个实例带到前面。

但是，如果您创建 3 个新活动（`A1`和`A2`）`A3`，每个活动都派生自`MyActivity`，那么您可以通过`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`在启动这些活动时设置标志来做到这一点。

您需要在清单中包含所有 4 个活动 ( `MyActivity`, `A1`, `A2`, )。`A3`

你会有这样的东西：

```
public class A1 extends MyActivity {
}

public class A2 extends MyActivity {
}

public class A3 extends MyActivity {
} 
```

在`MyActivity`'onClick() `when you start an activity (either`A1 `,`A2 `or`A3`) 中，您可以这样做：

```
Intent intent = new Intent(this, A1.class); // or A2 or A3
intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:27:15.177

在开始新活动之前，请尝试使用此标志

```
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

# ruby-on-rails - 动作控制器::路由错误：

> ID：12481346
> 
> 赞同：0
> 
> 时间：2012-09-18T16:39:49.897
> 
> 标签：ruby-on-rails, rspec, routing

我正在关注[Rails 教程](http://ruby.railstutorial.org/chapters/following-users?version=3.0#code%3asample_relationships)，我在测试中遇到了一些问题，但一个特别的错误是：

```
1) UsersController following pages when not signed in should protect 'following'
 Failure/Error: get :following, :id => 1
 ActionController::RoutingError:
   No route matches {:id=>1, :controller=>"users", :action=>"following"}
 # ./spec/controllers/users_controller_spec.rb:10:in `block (4 levels) in <top (required)>' 
```

我不明白为什么如果我的路线上有这个会发生这种情况.rb

```
resources :users do
   member do
     get :following, :followers
   end
end 
```

我的控制器是这样的：

```
class UsersController < ApplicationController
  before_filter :authenticate, :except => [:show, :new, :create]

  def followers
     @title = "Followers"
     @user = User.find(params[:id])
     @users = @user.followers.paginate(:page => params[:page])
     render 'show_follow'
  end

  def following
     @title = "Following"
     @user = User.find(params[:id])
     @users = @user.following.paginate(:page => params[:page])
     render 'show_follow'
  end
end 
```

这是我的 rspec：

```
 it "should protect 'following'" do
    get :following, :id => 1
    response.should redirecto_to (new_selector_session_en_path) 
  end 
```

还有我的路线：

```
following_user_en GET      /users/:id/following(.:format)                         {:action=>"following", :controller=>"users"}
following_user_es GET      /es/usuarios/:id/following(.:format)                   {:action=>"following", :controller=>"users"}
followers_user_en GET      /users/:id/followers(.:format)                         {:action=>"followers", :controller=>"users"}
followers_user_es GET      /es/usuarios/:id/followers(.:format)                   {:action=>"followers", :controller=>"users"} 
```

# z3 - 战术不支持的目标

> ID：12481347
> 
> 赞同：1
> 
> 时间：2012-09-18T16:39:53.700
> 
> 标签：z3

我有一些代码，我想通过一些策略来检查它们。由于我有很多`if-then-else`陈述，我想应用`elim-term-ite`策略。

我使用了以下策略

`(check-sat-using (then (! simplify :arith-lhs true) elim-term-ite solve-eqs lia2pb pb2bv bit-blast sat))`

但是，如果我对此有错误 -`"goal is in a fragment unsupported by lia2pb"`

因此，如果我尝试删除策略`lia2pb`和它们旁边的策略，我会收到另一个错误`unknown "incomplete"`。

我试图删除除 之外的所有策略`simplify`，但是我仍然会收到`incomplete`错误消息。

我应该尝试什么来帮助 sat 求解器解决问题？我应该尝试其他策略吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:59:57.187

要使用`lia2pb`（又名线性整数算术到伪布尔），所有整数变量都必须有界。也就是说，它们必须有一个下限和上限。

`sat`只有当输入目标不包含理论原子时，该策略才是完整的。也就是说，目标仅包含布尔连接词和布尔常量。如果不是这种情况，那么如果它不能显示（输入的布尔抽象）目标是不可满足的，它将返回“未知”。

`lia2pb`您可以使用以下命令让 Z3 显示输入目标：

```
(apply (then (! simplify :arith-lhs true) elim-term-ite solve-eqs) 
```

如果您的某些公式包含无界整数变量，您可以构建一个尽可能减少到 SAT 的策略，否则调用通用求解器。这可以使用`or-else`组合器来完成。这是一个例子：

```
(check-sat-using (then (! simplify :arith-lhs true) elim-term-ite solve-eqs 
                       (or-else (then lia2pb pb2bv bit-blast sat)
                                smt))) 
```

**编辑：**该策略`lia2pb`还假设每个有界整数变量的下限为零。在实践中这不是一个大问题，因为我们可以`normalize-bounds`在应用之前使用该策略`lia2pb`。该策略`normalize-bounds`将用 替换绑定变量`x`，`y + l_x`其中`y`是一个新变量，`l_x`是 x 的下限。例如，在包含 的目标中`3 <= x`，`x`被替换为`y+3`，其中`y`是一个新的新鲜变量。

# tsql - 如何从 CASE 语句中获取返回值作为动态 SQL 查询？

> ID：12481352
> 
> 赞同：0
> 
> 时间：2012-09-18T16:40:07.493
> 
> 标签：tsql, return-value, dynamic-sql

```
DECLARE @command = 'SELECT  CASE WHEN ( SELECT  COUNT(*)
                    FROM    [table] WITH ( NOLOCK )
                    WHERE   DATEDIFF(minute, systemupdatedtimestamp, GETDATE()) < 10
                  ) > 0 THEN 0
             ELSE 1
        END' 
```

现在我需要获取上述命令的“返回值”（0 或 1）。

```
EXEC(@commnad) 
```

如何从上面获取返回值？

我试过

```
SET @ReturnValue = EXEC(@command) 
```

但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:09:09.140

使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

在您的情况下，它类似于：

```
declare @myOut bit
declare @SQLString nvarchar(500)
set @SQLString = N'SELECT @myOutValue = CASE WHEN ( SELECT  COUNT(*)
                    FROM    [table] WITH ( NOLOCK )
                    WHERE   DATEDIFF(minute, systemupdatedtimestamp, GETDATE()) < 10
                  ) > 0 THEN 0
             ELSE 1
        END'

declare @ParmDefinition nvarchar(500)
set @ParmDefinition = N'@myOutValue bit OUTPUT'

EXECUTE sp_executesql @SQLString, @ParmDefinition, @myOutValue = @myOut OUTPUT
select @myOut 
```

**更新：**

跟进您的评论。如果您不想修改包含您的 sql 命令的原始字符串（例如，它在其他地方使用等），您可以将该命令包装在一个新字符串中，例如：

```
@SQLString = 'select @myOutValue = (' + @yourOrigSqlCommand + ')' 
```

并以与上述相同的方式调用 sp_executesql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:32:11.077

我相信这可以解决您的问题。

```
DECLARE @command nvarchar(max) = 'SELECT  CASE WHEN ( SELECT  COUNT(*)
                    FROM    [table] WITH ( NOLOCK )
                    WHERE   DATEDIFF(minute, systemupdatedtimestamp, GETDATE()) < 10
                  ) > 0 THEN 0
             ELSE 1
        END'

exec sp_executesql @command 
```

# symfony - 如何在电子邮件主题中包含日志的严重性？

> ID：12481353
> 
> 赞同：2
> 
> 时间：2012-09-18T16:40:15.340
> 
> 标签：symfony, monolog

我正在将 Monolog 与 Symfony2 一起使用，并配置了一个日志记录环境，其中所有内容都记录到文件中，并且超过某个阈值会通过电子邮件发送给我。我的配置如下。

但是，我无法调整电子邮件主题，使其根据日志的实际级别进行更改。响应时间的差异，例如警告和关键，可能会有所不同。有没有办法做到这一点？

```
monolog:
    handlers:
        main:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug
        mail:
            type:         fingers_crossed
            action_level: %logger_level%
            handler:      buffered
        buffered:
            type:    buffer
            handler: swift
        swift:
            type:       swift_mailer
            from_email: %logger_from_email%
            to_email:   %logger_to_email%
            subject:    Log  # I want the subject to include the log level somehow
            level:      debug 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:25:15.763

您可以定义两个不同的处理程序（或处理程序链）：一个由低级问题激活，另一个由更严重的问题激活。他们发送的电子邮件有不同的主题。就像是：

```
monolog:
    handlers:
        mail_critical:
            type:         fingers_crossed
            action_level: critical
            handler:      buffered_critical
            bubble: false
        buffered_critical:
            type:    buffer
            handler: swift_critical
        swift_critical:
            type:       swift_mailer
            from_email: %logger_from_email%
            to_email:   %logger_to_email%
            subject:    CALL 911, YOUR SITE IS BURNING
            level:      critical
        mail_debug:
            type:         fingers_crossed
            action_level: debug
            handler:      buffered_debug
        buffered_debug:
            type:    buffer
            handler: swift_debug
        swift_debug:
            type:       swift_mailer
            from_email: %logger_from_email%
            to_email:   %logger_to_email%
            subject:    Just a normal error
            level:      debug 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T05:15:16.517

您可以在主题中包含**%%level%%**。它将添加*int*。

或者您可以添加**%%level_name%%**它将添加腿部级别名称的*字符串*。

```
 swift:
        type:       swift_mailer
        from_email: '%env(ADMIN_EMAIL)%'
        to_email:   '%env(ADMIN_EMAIL)%'
        subject:    '[%kernel.environment%] [LEVEL CODE:%%level%%][LEVEL NAME:%%level_name%%] Some subject text! %%message%%'
        level:      error
        formatter:  monolog.formatter.html
        content_type: text/html 
```

更多可以在这里找到[https://github.com/Seldaek/monolog/blob/master/doc/message-structure.md](https://github.com/Seldaek/monolog/blob/master/doc/message-structure.md)

# internet-explorer - IExplorer 浮动在悬停时无法正常工作（所有版本）

> ID：12481355
> 
> 赞同：1
> 
> 时间：2012-09-18T16:40:23.570
> 
> 标签：internet-explorer, hover

我对 IE 有一个问题：当我将光标放在图像上时（有一个 :hover 不透明度变化，但我不知道它是否相关），它碰巧弄乱了所有的浮动。您可以在[此页面](http://www.wigiks.it/P_O_v3/_it_/gallery-matrimoni.php)中看到它。

每个版本的 Explorer 都会受到影响。

另外：主徽标上的链接是怎么回事？为什么两个重叠的图像在 IE 中会有这么大的问题？（不：悬停在这里）

谢谢大家，请耐心等待：这是我关于 SO 的第一个问题。

# sorting - 选择最大值并打印该行

> ID：12481357
> 
> 赞同：0
> 
> 时间：2012-09-18T16:40:32.037
> 
> 标签：sorting, sed, awk

我需要一些有关文本操作的帮助。
我确实有这样的数据：

> 29554 31109 "ENSG00000243485.1" 1555
> 29554 31097 "ENSG00000243485.1" 1543
> 29554 30039 "ENSG00000243485.1" 485
> 30564 30667 "ENSG00000243485.1" 103
> 30267 30667 "ENSG00000243485.1" 400
> 30976 31109 "ENSG00000243485.1" 133
> 89295 133566 "ENSG00000238009.2" 44271
> 89295 120932 "ENSG00000238009.2" 31637
> 120775 120932 "ENSG00000238009.2" 157
> 112700 112804 "ENSG00000238009.2" 104
> 92091 92240 "ENSG00000238009.2" 149
> 28269867 28269929 "ENSG00000248451.1" 62
> 28270383 28270486 "ENSG00000248451 .1"103
> 28273195 28273372 "ENSG00000248451.1" 177
> 28275308 28275354 "ENSG00000248451.1" 46
> .....................

我必须打印每组价值最大的行。
第 4 列中有组名，第 5 列中有值。
我想它应该是这样的：
1\. 将组彼此分开；
2.选择最大的值；
3.打印整行。

该示例的首选输出应该是：

> 29554 31109 “ENSG00000243485.1” 1555
> 89295 133566 “ENSG00000238009.2” 44271
> 28273195 28273372 “ENSG00000248451.1” 177

希望有人可以在 awk 或 sed 中帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:43:58.457

您只需要使用 awk 传递一次文件：

```
awk '
    $4 > val[$3] {val[$3] = $4; line[$3] = $0} 
    END {for (grp in line) print line[grp]}
' filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:54:59.507

这应该在`bash`and中执行`awk`：

```
GROUPS=$(cut -d' ' -f3 datafile | uniq) # list of groups
for f in "$GROUPS"
do 
  # print line if 4th field is max
  awk -v "grp=$f" '$0 ~ grp && $4 > max {max=$4; line=$0} END {print line}' datafile
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T20:08:37.380

This might work for you:

```
cat -n file | sort -k4,4 -k5,5nr | sort -u -k4,4 | sort -n | cut -f2- 
```

# r - 同一图中的多个图 [R]

> ID：12481361
> 
> 赞同：5
> 
> 时间：2010-10-01T00:48:40.123
> 
> 标签：r, data-visualization

我想在同一张图上绘制两个函数 f1 和 f2。通过以下代码，我发现两个图的 y 轴的比例不同。有没有办法让天平一样？

```
plot(f1, 0, 1)
par(new=TRUE)
plot(f2, 0, 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-10-01T00:56:19.453

使用`curve`功能：

```
plot(f1, 0, 1)
curve(f2, 0, 1, add=TRUE) 
```

# html - 如何在响应式布局中垂直扩展 2 个 div？

> ID：12481364
> 
> 赞同：3
> 
> 时间：2012-09-18T16:40:50.543
> 
> 标签：html, twitter-bootstrap, responsive-design, vertical-alignment, fluid-layout

我相信我会问一个非常常见的问题，因为在发布我的问题之前我也看到了相关问题，但这有点不同。通常我在垂直扩展 2 个 div 时不会遇到任何问题，但现在我正在使用引导框架开发应用程序。这是一个流畅的布局，这就是我面临一些问题的原因。请提出解决方案。这是我使用的：

**HTML：**

```
<div class="main">
  <div class="left">content</div>
  <div class="right">content</div>
</div> 
```

**CSS：**

```
.left{ 
    position:absolute; 
    left:0px; 
    border-right:1px solid #bfc4c9;  
    background:#ebf2f9; 
    width:280px !important;
}

.right{ 
    display:block;  
    float:left; 
    position:relative;  
    padding-right:9px; 
    margin-left:300px;  

} 
```

我想垂直对齐左右 div。内容进入右 div，所以我希望左面板的高度随着右面板的高度而增长，并且由于它是一个流畅的布局，所以只有左面板的宽度是固定的，所以我无法定义右面板的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T14:53:43.147

@DBUK：
由于没有足够的声誉点，我无法在您的帖子中添加评论。
我已经更新了你的小提琴：http: `[//jsfiddle.net/ArbVp/50/](http://jsfiddle.net/ArbVp/50/)`

 `在这种情况下，绝对没有必要以任何方式使用“浮动”。还有一些其他的CSS值是“可有可无”的……！;-)

干杯
冈瑟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:33:09.673

在左列上使用绝对位置 - 顶部、底部、左侧和右侧 - 似乎有效：

[http://jsfiddle.net/ArbVp/](http://jsfiddle.net/ArbVp/)

需要主 div 是相对位置的，并在列下添加一个明确的。`

# r - 在插入符号中访问 rfe 生成的所有模型

> ID：12481365
> 
> 赞同：3
> 
> 时间：2012-09-17T12:01:22.073
> 
> 标签：r, feature-selection, r-caret

我正在使用`rfe`caret 包中的函数为逻辑回归模型进行特征选择。我正在查看`sizes`5、10、15、20 和 25 选择使用 Rsquared 的最佳模型（我的因变量是 0,1）。`rfe`除了最终选择的模型之外，有没有办法访问该函数产生的其他模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:56:00.377

没有自动的方法。您可以做的最好的事情是更改`fit`功能并自己保存。有关更多详细信息，请参阅`rfeControl`包小插曲。

最大限度

# java - 让 jQuery GET 与 Spring MVC 后端配合使用

> ID：12481368
> 
> 赞同：0
> 
> 时间：2012-09-18T16:41:05.877
> 
> 标签：java, javascript, jquery, spring-mvc, get

我有一个 jQuery Web 应用程序前端，我想对在 Spring MVC 上运行的 Java 后端进行 GET/POST ajax 调用。

这是我要发出的 GET 请求：

```
http://www.myapp.com/backend/doSomething?a=1&b=2 
```

在服务器端，这是我的`BackendController`对象：

```
@RequestMapping(value = "/backend/doSomething", method = RequestMethod.GET)
public ModelAndView handleDoSomething(@RequestParam("a") String a,
    @RequestParam("b") String b) {

    ModelAndView mav = new ModelAndView();
    mav.setViewName("backend/SomeView");

    // process the request...

    return mav;
} 
```

所以这是我迄今为止尝试过的jQuery：

```
$.get({
    url: "/backend/doSomething?a=???&b=???",
    success: function(data) {
    }
    ???
}); 
```

我已经阅读了[jQuery $.get](http://api.jquery.com/jQuery.get/)页面，但我仍然对几件事感到困惑：

1.  将查询字符串参数附加到`url`for`GET`的正确方法是什么？
2.  将表单数据添加到`POST`s 中的正确方法是什么？
3.  我看到该`success`函数需要三个参数：`data`,`textStatus`和`jqXHR`，但是我看到的许多示例仅列出了该`data`部分-您何时仅传递它`data`，何时传递所有三个参数？
4.  `get`' 的`data`属性和它的`success: function (data) { ... }`参数有什么区别？
5.  我需要在我的 Spring 后端进行任何特殊配置，以便 jQuery 可以连接到它，还是 jQuery 根本不关心后端？

我试过查找这些，但似乎无法为这些项目获得明确的定义。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:45:15.243

**jQuery 获取/发布参数**

1.  网址
2.  数据 - 数据对象，您可以在其中存储查询字符串，如数据（即发布变量）
3.  成功处理程序（不需要额外的参数，这就是您以不同格式看到它的原因）
4.  DataType - 期望从服务器返回的数据类型

仅供参考，我相信 url 参数是唯一必需的参数。您的 get 调用应该类似于以下内容：

```
$.get("/backend/doSomething", { a : a, b : b }, success: function(data) {
    // Perform Success code
}); 
```

顺便说一句，您还可以使用以下方式序列化表单以通过您的帖子传递它：

```
$('form').serialize() 
```

**编辑**：

[`$.get()`](http://api.jquery.com/jQuery.get/)关于在使用 jQuery和时命名 url、数据和成功参数[`$.post()`](http://api.jquery.com/jQuery.post/)，这是不可能的。这些函数是 jQuery 的简写版本[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)。如果您无论如何都要做长表格，那么使用 get/post 是没有意义的。如果要指定参数，请使用 ajax，如下所示：

```
$.ajax({
    url: "/backend/doSomething", 
    data: { a : a, b : b }, 
    success: function(data) {
        // Perform Success code
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:55:46.500

一切都在那里......（我的意思是在 jQuery API 和 Internet 中。）

基本上你`$.get`这样使用：

```
$.get('/backend/doSomething', // 1st argument: URL
  { a: 1, b: 2 }, // 2nd arg (optional): JS Object or String you want to pass
  function(data) { // 3rd arg (or 2nd in case data is missing) success callback
    alert('Success!'); // or sth else
}); 
```

所以回到你的问题：

1.  只需将第二个参数传递给`$.get`.
2.  改为使用`$.post`（它们都相似，只是包装`$.ajax`，[请参阅文档](http://api.jquery.com/jQuery.ajax/)）。
3.  通常您只会使用第一个参数 - `data`，在 JavaScript 方法签名中不必匹配（类似 Java）。如果您愿意，可以忽略参数：
4.  `data`作为第二个参数`$.get`是您提供给控制器的**输入**`success: function (data)`参数，并且是响应**输出**（可能是`@ResponseBody`JSONified-by-Jackson 对象）。我是说：

    ```
    function(data) {
      alert('Success! Data ' + data);
    } 
    ```

    和

    ```
    function(data, textStatus, jqXHR) {
      alert('Success!');
    } 
    ```

    是等价的。

5.  不，jQuery 只是让事情变得更简单的 JavaScript 库。就像在文档中写的那样使用它们。

# android - 意图启动所有应用程序活动

> ID：12481369
> 
> 赞同：0
> 
> 时间：2012-09-18T16:41:07.147
> 
> 标签：android

> **可能重复：**
> [如何在 Android 中以编程方式启动主屏幕](https://stackoverflow.com/questions/4756835/how-to-launch-home-screen-programmatically-in-android)

是否有我可以准备的意图来启动“所有应用程序”活动（又名应用程序启动器）？

当我单击主屏幕上的图标时，我查看了 LogCat 并且 ActivityManager 没有记录 Intent。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:05:11.083

我希望这是你想要的。

```
 Intent intent = new Intent(Intent.ACTION_MAIN);
   intent.addCategory(Intent.CATEGORY_LAUNCHER); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:28:19.917

查看 Launcher 的一些副本，似乎没有可用于直接打开默认应用启动器的 Intent。[您可以在https://github.com/cscott/android-launcher2/blob/master/src/com/android/launcher2/Launcher.java](https://github.com/cscott/android-launcher2/blob/master/src/com/android/launcher2/Launcher.java)看到一份源代码：参考代码位于[https://android。 googlesource.com/platform/packages/apps/Launcher2](https://android.googlesource.com/platform/packages/apps/Launcher2)，但不再有方便的浏览界面。

有一个`mAllAppsButton`显示应用程序选择屏幕，但它似乎没有绑定到任何`Intent`，只是绑定到内部点击处理程序。你可能不走运。

# r - 如何从R中的文件中读取逻辑数据

> ID：12481371
> 
> 赞同：5
> 
> 时间：2010-09-24T05:58:56.967
> 
> 标签：r

> **可能重复：**
> [如何从 R 中的文件中读取逻辑数据](https://stackoverflow.com/questions/3784617/how-to-read-logical-data-from-a-file-in-r)

我生成了一个文件，其中每行包含一个“TRUE”或“FALSE”的逻辑值。现在我想将文件中的逻辑数据读入 R。但是读入的数据是模式“字符”而不是逻辑值。我想知道如何从文件中读取数据作为逻辑值。

我的 R 代码是

```
cat(FALSE,"\n", file="1.txt", append=FALSE);
for (i in 2:5) cat(TRUE,"\n",file="1.txt", append=TRUE);
a=scan(file="1.txt", what="logical") 
```

输出是：

```
> mode(a)
1] "character"
> mode(a[1])
[1] "character"
> a[1]
[1] "FALSE" 
```

我希望 a[1] 是逻辑值。

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-09-24T06:13:13.533

代替：

```
a=scan(file="1.txt", what="logical") 
```

尝试：

```
a = scan(file="1.txt", what=logical(0)) 
```

请参阅`?scan`文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-24T06:32:38.317

```
a
[1] "FALSE" "TRUE"  "TRUE"  "TRUE"  "TRUE" 
a <- as.logical(a)
a
[1] FALSE  TRUE  TRUE  TRUE  TRUE 
```

# ruby-on-rails - 水豚未定义方法“标签？” 对于零：NilClass

> ID：12481374
> 
> 赞同：0
> 
> 时间：2012-09-18T16:41:17.443
> 
> 标签：ruby-on-rails, capybara, bdd

当我试图告诉 Capybara 时，我有以下失败的测试`visit ('/')`。

```
1) Credits when user is non-enabled show user credits available at the top.
   Failure/Error: visit ('/')
   NoMethodError:
     undefined method `tag?' for nil:NilClass
   # ./app/controllers/application_controller.rb:16:in `set_current_tag'
   # ./spec/requests/credits_spec.rb:12:in `block (3 levels) in <top (required)>' 
```

中的代码`ApplicationController`如下所示

```
def set_current_site
  current_host = request.host
  @site = Site.where(domain: current_host).first 
  @site = Site.where(domain: 'mysiste.com').first unless @site.present?
end

def set_current_tag
  if @site.tag? && Dvd.tagged_with(@site.tag, wild: true, any: true).any?
    @site.tag = @site.tag
  elsif params[:tag] && Dvd.tagged_with(params[:tag], wild: true, any: true).any?
    @site.tag = params[:tag]
  else
    @site.tag = ''
  end
end 
```

我在这里有点迷失如何解决这个问题以及什么是理想的解决方案。我是否应该将实例变量的设计更改为方法并同时使用 FactoryGirl for Site？

站点模型非常简单。

```
class Site < ActiveRecord::Base
  attr_accessible :domain, :content, :program, :tag, :locale, :parent, :title, :landing

  validates_presence_of :domain
  validates_uniqueness_of :domain

end 
```

而且工厂是

```
FactoryGirl.define do
  factory :site do
    domain    "dvdstore.com"
    title     "DVD Store" 
    program   "premium"
    content   "movies"
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:22:45.987

尝试添加到 credits_spec.rb ：

```
before do
  @site = FactoryGirl.create(:site)
  @request.host = @site.domain
end 
```

默认情况下，请求主机是 'www.example.com'，猜测您没有此域的站点记录。

not found site ( `@site = Site.where(domain: 'mysiste.com').first unless @site.present?`) 的后备可能也不起作用：

1.  它依赖于域“mysiste.com”的数据库条目，但默认情况下每个测试都以空数据库开始。你创建过这样的条目吗？
2.  域名中可能有错字：`mysiste.com`而不是`mysite.com`

因此，当您运行规范时，@site 没有找到也没有设置。

# jquery - 在 paulirish/infinite-scroll 中调用检索函数

> ID：12481376
> 
> 赞同：1
> 
> 时间：2012-09-18T16:41:22.503
> 
> 标签：jquery

我想在 paulirish/infinite-scroll 中手动触发下一页加载。我找到了一个名为

```
retrieve: function infscr_retrieve(pageNum) {
} 
```

我试图用这样的东西直接调用它。

```
 var contentScroll = $('#content');
    contentScroll.infinitescroll({
       //bla...........
    });

contentScroll.infinitescroll.retrieve(2); 
```

错误检索不是函数。任何人都知道我怎么能去调用这个方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:08:22.440

```
$('#your-selector').infinitescroll('retrieve',5) 
```

可选的 5 用于页码。花了一点时间在网上挖掘才找到这个。希望它可以帮助某人。

# php - 多个插入不适用于 INNODB

> ID：12481377
> 
> 赞同：0
> 
> 时间：2012-09-18T16:41:22.743
> 
> 标签：php, mysql, insert, innodb

我有一个在数据库中插入用户的脚本。它曾经与MYISAM一起工作，但由于我更改为INNODB，它只插入第一行，然后停止。

这是脚本。它基本上获取所有 facebook 朋友并检查用户是否在数据库中。如果不是，它将创建一个新的“未注册”用户。由于我更改为 INNODB，它只插入第一个用户。我还将发布表创建代码。有小费吗？

```
$data = explode(";", $_POST['data']);
for($i=0; $i<count($data); $i++){
    $user = explode("^", $data[$i]);
    $fname = $user[0];
    $lname = $user[1];
    $face_uid = $user[2];
    $birthday = $user[3];
    $gender = $user[4];

    $temp_birth = explode("/", $birthday);
        if(count($temp_birth)!=3){
            $birthday="0000-00-00";
        } else {
            $birthday = $temp_birth[2]."-".$temp_birth[0]."-".$temp_birth[1];
        }

        if(ctype_alnum(str_replace(" ", "", $fname)) && ctype_alnum(str_replace(" ", "", $lname))){
            $result = mysql_query("SELECT * FROM popguest.user WHERE face_uid='$face_uid'");
            $row=mysql_fetch_array($result);
            if(mysql_num_rows($result)==0){

                $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";  
                $size = strlen( $chars );
                $verify=0;
                while($verify==0){
                    $username='';
                    for($j = 0; $j < 10; $j++) {
                        $username .= $chars[ rand( 0, $size - 1 ) ];
                    }
                    $result2 = mysql_query("SELECT * FROM popguest.user WHERE username='$username'");
                    if(mysql_num_rows($result2)!=0){
                        $verify=0;
                    }else{
                        $verify=1;
                    }
                }

                $result = mysql_query("INSERT INTO popguest.user (face_uid, username, fname, lname, birthday, gender, registered) VALUES ('$face_uid', '$username', '$fname', '$lname', '$birthday', '$gender', '0')");

                echo $fname." ".$lname.";".$face_uid.";".$birthday.";".$gender."\n";

            } else {

            }
        } else {

        }
} 
```

```
CREATE TABLE `user` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `username` varchar(10) COLLATE latin1_general_ci NOT NULL,
 `face_uid` varchar(15) COLLATE latin1_general_ci NOT NULL,
 `fname` varchar(25) COLLATE latin1_general_ci NOT NULL,
 `lname` varchar(25) COLLATE latin1_general_ci NOT NULL,
 `email` varchar(50) COLLATE latin1_general_ci NOT NULL,
 `gender` varchar(6) COLLATE latin1_general_ci NOT NULL,
 `birthday` date NOT NULL,
 `type` int(1) NOT NULL,
 `registered` int(1) NOT NULL,
 `phone` varchar(15) COLLATE latin1_general_ci NOT NULL,
 PRIMARY KEY (`id`),
 UNIQUE KEY `username` (`username`),
 UNIQUE KEY `face_uid` (`face_uid`),
 UNIQUE KEY `email` (`email`)
) ENGINE=INNODB DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:53:05.140

我会看几件事：

*   你没有提到如果你得到一个错误，你的代码也不是为了捕获一个错误，所以我会从向脚本添加调试开始并检查mysql错误，例如 $error=mysql_errno($link) ， trigger_error( $error, E_USER_WARNING) 种类。
*   您似乎正在使用 latin1 排序规则，我想知道如果您碰巧导入用户名不属于该字符集的用户会发生什么。为此，我会一直使用 utf8。如果第二个用户在那里有那种数据，我的第一个建议会告诉你原因。

# ssis - 派生列中的数据类型转换错误

> ID：12481378
> 
> 赞同：0
> 
> 时间：2012-09-18T16:41:24.813
> 
> 标签：ssis

为什么不转换列的数据类型，列的初始数据类型是DT_STR

(DT_I8)(ISNULL(Column_Name) ? (DT_I8)NULL(DT_I8) : (DT_I8)Column_Name)

但我仍然将 DT_STR 作为输出参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:46:13.567

我知道转换为 DT_STR 似乎是多余的，即使您知道它已经是 DT_STR 但 SSRS 可能很挑剔：

```
(DT_I8)(ISNULL((DT_STR,5,1252)Column_Name) ? (DT_I8)NULL(DT_I8) : (DT_I8)(DT_STR,5,1252)Column_Name) 
```

我在**派生列**中执行此操作，您的方式和我的方式都来自存储数字并设法获得八字节有符号整数的 DT_STR 字段。

希望这可以帮助！

# javascript - 如何使用 JavaScript 验证正则表达式在 Java 中是否有效

> ID：12481380
> 
> 赞同：1
> 
> 时间：2012-09-18T16:41:38.410
> 
> 标签：javascript

我正在使用 Web 表单让用户指定一个正则表达式，该正则表达式稍后在 java 中匹配。我想检查用户提供的正则表达式是否有效。当然，我想在两端都这样做 - java 部分很容易。

但是检查正则表达式在 javascript 中是否有效的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:04:11.930

您是否考虑过使用[XRegExp](http://xregexp.com/)代替原生 RegEx？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:51:28.377

客户端脚本有利于可扩展性和性能，但在验证和安全性方面，您可能需要考虑使用服务器控件。因为 javascript 和其他客户端脚本语言往往会被恶意攻击者绕过。单击此[链接](http://securitylifer.blogspot.com/2010/08/bypassing-client-side-input-validation.html)以阅读有关它的更多信息。

# mysql - 从查询中的 4 个连接表中获取数据（MySQL）

> ID：12481381
> 
> 赞同：1
> 
> 时间：2012-09-18T16:41:40.223
> 
> 标签：mysql, join

![数据库表](../Images/3ea33f7069bfbc383a526da8f89dbe59.png) .

如上所示，我有 4 个表。现在我试图在一个查询中获取所有数据，包括文章主题、每篇文章的标签以及每篇文章的评论**数**。

我现在使用的 sql 查询是

```
SELECT
    articles.subject, GROUP_CONCAT(tags.name) AS tags, COUNT(comments.aid) AS comments
FROM articles
    LEFT JOIN comments ON comments.aid = articles.aid
    LEFT JOIN relations ON relations.aid = articles.aid
    LEFT JOIN tags ON tags.tid = relations.tid
GROUP BY
    articles.aid 
```

结果：**[]中的数据是我实际得到的**

```
array
(
    1 => array
    (
        subject => foo
        tags =>
        comments => 1
    )
    2 => array
    (
        subject => bar
        tags => html,mysql [html,mysql,html,mysql]
        comments => 2 [4]
    )
    3 => array
    (
        subject => baz
        tags => php
        comments => 0
    )
) 
```

对于我的应用程序中的实际情况，标签的数量和评论的数量将相乘。例如：如果一篇文章有​​ 4 条评论和 3 个标签，我的查询将导致

标签： html,css,php, html,css,php, html,css,php, html,css,php (代替 html,css,php)

评论：12（而不是 4）

我知道我的查询语句一定有问题，我只是不知道如何修复它。有人请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:01:56.977

当您在公共列上将表连接在一起时，您将获得共享这些列的*所有行组合。*

在这种情况下，对于`aid 2`，文章中有 1 行，评论中有 2 行，关系中有 2 行。1*2*2 = 4，这是您所看到的`COUNT()`函数结果。

如果您要运行此查询：

```
SELECT * FROM articles
LEFT JOIN comments ON comments.aid = articles.aid
LEFT JOIN relations ON relations.aid = articles.aid
LEFT JOIN tags ON tags.tid = relations.tid
WHERE articles.aid = 2 
```

您将能够看到`COUNT`正在计数的四个生成的行。

```
aid | subject | cid | comment  | tid | name
----+---------+-----+----------+-----+------
2   | bar     | 1   | comment1 | 1   | html
2   | bar     | 1   | comment1 | 3   | mysql
2   | bar     | 2   | comment2 | 1   | html
2   | bar     | 2   | comment2 | 3   | mysql 
```

如果您只想计算评论的数量，您可以将`COUNT(comments.aid)`查询中的 更改为`COUNT(DISTINCT comments.cid)`-- 这将在计算时剔除重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:03:51.927

我认为您需要一个嵌套查询来计算评论

```
SELECT
    articles.subject, GROUP_CONCAT(tags.tag) AS tags, comments
FROM articles
    LEFT JOIN (
          select aid,count(cid) as comments from comments group by aid
    ) AS commentscount ON commentscount.aid = articles.aid
    LEFT JOIN relations ON relations.aid = articles.aid
    LEFT JOIN tags ON tags.tid = relations.tid
GROUP BY
    articles.aid 
```

# java - 我如何应用“工厂模式”在 Java 中实例化 Firefox、IE 和 Chrome 浏览器实例

> ID：12481383
> 
> 赞同：0
> 
> 时间：2012-09-18T16:41:48.157
> 
> 标签：java, design-patterns, factory-pattern

所以这就是我所拥有的：

```
Browser.java
BrowserFactory.java

ChromiumBrowser.java
InternetExlorer.java
FirefoxBrowser.java
HTMLUnitBrowser.java

SeleniumDriver.java 
```

我在想的是 SeleniumDriver.java 是 BrowserFactory 的客户端，它将根据通过 csv 文件选择的浏览器创建一个浏览器实例：

1.  铬浏览器
2.  互联网浏览器
3.  火狐浏览器
4.  HTMLUnitBrowser

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:55:13.090

你有很多方法来实现工厂。这取决于创建的复杂程度以及实体列表的固定程度。

枚举方式：

```
public enum BrowserType {
    CHROME {
        public Browser create() {
            return new ChromeBrowser();
        }
    },
    IE {
        public Browser create() {
            return new IeBrowser();
        }
    }
    public abstract Browser create();
}

// Factory is optional really, the enum does the job.
public class BrowserFactor {

    public Browser create(BrowserType type) {
        return type.create();
    }
} 
```

地图/策略方式：

```
interface BrowserStrategy {
    Browser create();
}

public class ChromeBrowser implements BrowserStrategy {
    public Browser create() {
        return new ChromeBrowser();
    }
}

public class BrowserFactor {
    Map<String, BrowserStrategy> ctorStategy = ...; // I'd use DI, but this could be manually created.
    public Browser create(String type) {
        return type.create();
    }
} 
```

映射/反射方式：

```
public class BrowserFactor {
    Map<String, Class<? extends Browser> clazz = ...; // I'd use DI, but this could be manually created.
    public Browser create(String type) {
        return clazz.newInstance();
    }
} 
```

我的偏好是看看您的 DI 框架是否可以为您处理它。如果不：

*   简单创建/固定实体集 - 枚举或映射/反射
*   简单创建/期望实体集将分组 - 映射/反射
*   复杂的创建 - 地图/策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:49:47.783

```
int browserId = -1; // parse your CSV file and determine it.
Browser browser = BrowserFactory.getBrowserInstance(browserId); 
```

* * *

```
public class ChromimumBrowser extends Browser {

            // Necessary code
} 
```

所有其他浏览器类应该`extends`/`implements` `Browser`

* * *

```
public class BrowserFactory() {
     private static final int CHROME_BROWSER = 10;
     public Browser getBrowserInstance(int browserId) {
          Browser browser = null; 
          switch (browserId) {
             case CHROME_BROWSER:
                  browser = new ChromeBrowser();
                  break;
             ..
             ..
             default:
                    // Some fallout browser.
          }
     }
} 
```

# drupal-7 - user_save() 具有多个选择字段，例如复选框或选择字段

> ID：12481387
> 
> 赞同：1
> 
> 时间：2012-09-18T16:42:10.947
> 
> 标签：drupal-7, drupal-modules

我的自定义注册表单模块有一个选择字段，允许新用户选择一个或多个城市。在我的搜索中，我没有找到任何可以借鉴的例子。例如，如果要保存的城市键是 20 和 53，那么有没有人举例说明 'field_city' => 在下面的代码中应该是什么样子？

```
$edit = array(
  'name' => 'tester',
  'pass' => user_password(),
  'mail' => 'tester@testing.com',
  'status' => 0,
  'init' => 'tester@testing.com',
  'access' => REQUEST_TIME,
  'field_city' => ,
  'field_zip_postal_code' => array(LANGUAGE_NONE => array(array('value' => '12345'))),
  'field_gender' => array(LANGUAGE_NONE => array(array('value' => 'Male'))),
);

user_save(drupal_anonymous_user(), $edit); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:56:52.147

我自己想出了这个。如果它对任何人有帮助，对于分类术语参考，列名称是“tid”而不是“值”，因为它是用于其他字段的。我将注册码更改为以下内容：

```
$edit = array(
  'name' => $form_state['step_information'][2]['stored_values']['name'],
  'pass' => user_password(),
  'mail' => $form_state['step_information'][2]['stored_values']['email'],
  'status' => 0,
  'init' => $form_state['step_information'][2]['stored_values']['email'],
  'access' => REQUEST_TIME,
  'field_zip_postal_code' => array(LANGUAGE_NONE => array(array('value' => $form_state['step_information'][3]['stored_values']['postal_code']))),
  'field_gender' => array(LANGUAGE_NONE => array(array('value' => $form_state['step_information'][3]['stored_values']['gender']))),
);

foreach(array_keys($form_state['step_information'][1]['stored_values']['cities']) as $key => $val) {
  $edit['field_city'][LANGUAGE_NONE][$key] = array('tid' => $val);
}

$new_account = user_save(drupal_anonymous_user(), $edit); 
```

在“foreach”循环中，“$key”是一个基数（0、1、2...），存储在数据库的“delta”列中，“$val”是城市的 ID。

# android - 如何从 Android 中的 Google 地图获取特定位置周围的公交车站/停靠站？

> ID：12481391
> 
> 赞同：1
> 
> 时间：2012-09-18T16:42:36.587
> 
> 标签：android, maps

我需要从谷歌地图获取特定位置周围的一些公交车站/站点的位置（纬度/经度），但我不知道我应该从哪里开始。我查阅了一些文件，它使用谷歌地图 API 来解决这个问题.能否请您指导我使用 Google API 获取公交车站位置的方法。如果可能，请将您的代码发送给我！非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:05:31.650

尝试使用带有 gson 的 google Place API 来查询您附近的公交车站。

# paypal - Paypal - 我如何将定期付款与用户或交易联系起来？

> ID：12481392
> 
> 赞同：1
> 
> 时间：2012-09-18T16:42:39.250
> 
> 标签：paypal, paypal-ipn, paypal-subscriptions

我很好奇如何将 IPN 发送的定期付款绑定回给定用户。

现在我只是在我的数据库中存储一个指向我的用户的链接，其中包含 paypal 给我的付款人 ID。

这在 90% 的情况下都很好用，但如果他们在我的网站上创建一个新用户帐户（可能是为朋友购买），然后从同一个付款人 ID 购买（因为我的解决方案总是链接到第一个用户），则完全失败帐户，因此定期付款与错误的用户相关联）。

当我创建定期配置文件时，有没有办法可以存储自定义字段，例如用户 ID？然后，当 IPN 通知我未来的定期付款时，我只是以这种方式查找它而不是使用贝宝付款人 ID？

谷歌搜索并没有让我在这方面走得太远：/

提前致谢！〜乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:49:58.667

我看到上面的评论可能已经解决了你的问题，但万一其他人也有同样的问题；

经过一番记忆，是的，创建定期付款时`PROFILEID`返回`CreateRecurringPaymentsProfile`的是付款配置文件的唯一 ID，因此每个*订阅*都是唯一的，而不仅仅是每个用户。换句话说，它是您解决问题所需的标识符。

# design-patterns - 猪的文本模式分析

> ID：12481394
> 
> 赞同：2
> 
> 时间：2012-09-18T16:42:47.530
> 
> 标签：design-patterns, apache-pig, sequential

我正在寻找一种使用猪保存文本模式的方法。假设我有如下输入：

```
ae988852ed9eabe3b5298d8b4c3b652e    I Never In My Life Gave A Guy No Money For Gas Or Food besides That Simpson Guy SMH I Fault Myself Though 
```

从这些数据中，我想提取连续的单词模式并将其保存到一个包中。例如，{i, never} 将是第一个，{never, in} 将是第二个，依此类推。我知道我会以类似的方式启动程序：

```
myinput = LOAD '/user/hive/warehouse/twitter_raw/$date' USING PigStorage('\t') AS (id,  mess);
strings = FOREACH myinput GENERATE $0 AS id, LOWER($1) AS mess; 
```

但是下一步会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:35:41.847

也许人们可以通过一种棘手的方式仅使用内置函数来获得结果，但一个简单的 UDF 也可以完成这项工作：

```
public class SlidingTuple extends EvalFunc<DataBag> {

    private static final BagFactory bagFactory = BagFactory.getInstance();
    private static final TupleFactory tupleFactory = TupleFactory.getInstance();

    @Override
    public DataBag exec(Tuple input) throws IOException {
        try {
            DataBag inputBag = (DataBag) input.get(0);
            DataBag result = null;
            if (inputBag != null) {
                result = bagFactory.newDefaultBag();
                Iterator<Tuple> it = inputBag.iterator();
                Tuple previous = it.next();
                while (it.hasNext()) {
                    Tuple current = it.next();
                    Tuple tuple = tupleFactory.newTuple(2);
                    tuple.set(0, previous.get(0));
                    tuple.set(1, current.get(0));
                    result.add(tuple);
                    previous = current;
                }
            }
            return result;
        }
        catch (Exception e) {
            throw new RuntimeException("SlidingTuple error", e);
        }
    }
} 
```

然后：

```
A = LOAD '/user/hive/warehouse/twitter_raw/$date' USING PigStorage('\t') 
      AS (id:chararray,  mess:chararray);

B = foreach A generate TOKENIZE(mess, ' ') as words; 
```

然后使用您的自定义 UDF：

```
C = foreach B generate com.example.SlidingTuple(words); 
```

# ruby-on-rails - Rails 设计 gem 和模态窗口

> ID：12481399
> 
> 赞同：5
> 
> 时间：2012-09-18T16:43:05.803
> 
> 标签：ruby-on-rails, ajax, devise, modal-dialog

你能给我一个很好的教程，在模态窗口中将静态设计登录/注册更改为基于 ajax 吗？现在我像模态一样完成了它，但它不是ajax。在“google”中也有教程，但它们都只用于登录。但是我需要使用ajax登录，而且！模态窗口。有没有好的教程、建议等？在互联网上找不到好的。登录就可以了，我看到了你的代码......但是**如何以这种方式注册**？在网络上有什么...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T17:02:08.997

[https://github.com/jni-/Rails3-devise-ajax-login](https://github.com/jni-/Rails3-devise-ajax-login)

# ios - Facebook Open Graph 关于 Facebook 相册中已有照片的故事？

> ID：12481402
> 
> 赞同：0
> 
> 时间：2012-09-18T16:43:31.680
> 
> 标签：ios, facebook, facebook-graph-api, ios6

**目标：**

我正在构建一个 iOS 照片/娱乐应用程序，并且有一个非常简单的目标：将照片上传到 Facebook，然后使用 Facebook 的 Open Graph 故事分享照片（例如“[user] [verbed] a photo using [app name] ”）。

*（事实证明 iOS 6`SLComposeViewController`本身不允许这样做。我希望它会。嘘。）*

**情况：**

我没有一个强大的网络空间 - 也不想要一个 - 所以如果用户在他们的时间线（等）中点击 Open Graph 故事，我宁愿简单地链接回 Facebook 上的照片。

我可以上传照片 - 并检索其 URL - 但我无法让 Open Graph 故事工作！这是我所在的位置：

**照片上传到 Facebook 相册：好的**

我使用iOS SDK 中`FBRequest`的 '`requestForPhotoUpload`方法（截至 9 月 17 日的最新版本）并`photopost`使用`batchEntryName`. 这基本上直接来自 FB Open Graph 教程。

**照片 URL 检索：好的**

在这里，我使用`FBRequest`'s`requestForGraphPath`方法 - 基本上还是按照 FB OG 教程。这是我检索回来的 URL 示例：

```
https://sphotos-b.xx.fbcdn.net/hphotos-ash3/<long_number_string_with_underscores>_n.jpg 
```

**发布开放图故事：*不起作用***

有了这个，我构造了一个 OG HTTP 请求，如下所示：

```
https://<MY_SITE>.herokuapp.com/repeater.php?fb:app_id=<MY_FB_APP_ID>
&og:type=<APP_NAMESPACE>:photo
&og:title=a+rad+photo
&og:description=%22a+rad+photo%22
&og:image=https://sphotos-b.xx.fbcdn.net/hphotos-ash3/<long_number_string_with_underscores>_n.jpg
&og:url=https://sphotos-b.xx.fbcdn.net/hphotos-ash3/<long_number_string_with_underscores>_n.jpg
&body=a+rad+photo 
```

但这不起作用。我遇到的问题对于老手来说可能很明显：FB 的图像返回一个`og:type`of `website`（这必须来自 FB 页面上的静态 OG 标签？），因此 OG 故事失败了。

我想你可以在这里得到我的 OG 结果（来自调试器）：

[https://graph.facebook.com/120073804807493](https://graph.facebook.com/120073804807493)

*（我也尝试将我的整个 OG 请求返回为`og:url`，但这只是链接回我的网络服务器上的空白页面 - 请参见下面的 repeater.php 代码。）*

那么……我能做些什么呢？我怎样才能让它工作？当我正在构建的只是一个 iOS 应用程序并且我只想发布到用户的相册时，我真的需要启动整个网络资产来托管和显示图像吗？！

**更多信息：**如果重要的话，这里是 repeater.php 的来源（参见：FB OG 教程）：

```
<?php
function curPageURL() {
 $pageURL = 'http://';
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}
?>

<html>
  <head prefix="og: http://ogp.me/ns# product: http://ogp.me/ns/product#">
    <meta property="fb:app_id" content="<?php echo strip_tags($_REQUEST['fb:app_id']);?>">
      <meta property="og:url" content="<?php echo strip_tags($_REQUEST['og:url']);?>">
      <meta property="og:type" content="<?php echo strip_tags($_REQUEST['og:type']);?>">
      <meta property="og:title" content="<?php echo strip_tags($_REQUEST['og:title']);?>">
      <meta property="og:image" content="<?php echo strip_tags($_REQUEST['og:image']);?>">
      <meta property="og:description" content="<?php echo strip_tags($_REQUEST['og:description']);?>">
  </head>
    <body>
      <?php echo strip_tags($_REQUEST['body']);?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:58:28.990

经过大量研究，遗憾的是，我认为您上传到 Facebook 的照片无法用作 Open Graph 对象。Facebook 的页面根本没有足够动态地标记，以至于他们的一张照片成为 Open Graph 对象（可以理解），所以我们靠我们自己.. ;)

*（虽然我强烈怀疑在 iOS 6.1 或 7.0 中他们会允许这样的事情；我不得不想象随着 SLRequest 的流行，这种需求会飙升......）*

对将来可能遇到此问题的其他人的想法：

*   您可以通过直接上传和专辑名称来做一些聪明的事情来模仿 Open Graph 的故事。在此处查看我的其他 Stack 帖子，了解他们的教程中未涵盖的一些技术内容：[Facebook iOS SDK：无法使用 FBRequest 的 requestForUploadPhoto 指定相册：](https://stackoverflow.com/questions/12486852/facebook-ios-sdk-cannot-specify-an-album-using-fbrequests-requestforuploadphot)
*   如果您在 Web 开发方面有中等水平的技能，请不要忽视 Facebook 的 Heroku 集成（您可以从您的 Facebook 应用设置页面访问它）- [https://developers.facebook.com/apps](https://developers.facebook.com/apps)
*   如果您特别要处理很多照片，我的上帝 Parse 用他们开源的 Instagram 克隆给了我们一个祝福 - [https://parse.com/anypic](https://parse.com/anypic) - 是的，那是 WEB 和 iPHONE你看到的源代码！把它放到你的 Heroku 服务器上并开始修修补补，如果你想要一些大规模和社交的东西，你就是在用油脂做饭。

# android - 在列表视图项中动态插入 textView

> ID：12481403
> 
> 赞同：1
> 
> 时间：2012-09-18T16:43:33.427
> 
> 标签：android, listview

在我的应用程序中，我想动态插入`textview`自定义`listview`适配器行。想要添加一些行并且不想插入一些行。这个文本视图将是无或它的数量取决于我的适配器值。但我该怎么做。我不知道..

这是我的 Listview 适配器的代码

```
package com.app.sample;

import java.util.ArrayList;

import com.app.sample.bl.TripInfo;
import com.app.sample.utilities.sampleLogging;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class TripListItemsAdapter extends ArrayAdapter<TripInfo> {

    private static ArrayList<TripInfo> itemDetailsrrayList;
    private LayoutInflater inflater;
    Context context;
    int layoutResourceId;
    String TripAdapterTag = "TAG";

    public TripListItemsAdapter(Context context, int viewResourceId,
            ArrayList<TripInfo> results) {
        super(context, viewResourceId, results);
        this.layoutResourceId = viewResourceId;
        this.context = context;
        itemDetailsrrayList = results;
        inflater = LayoutInflater.from(context);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;
        ViewHolder holder = null;
        try {
            if (row == null) {
                row = inflater.inflate(layoutResourceId, parent, false);

                holder = new ViewHolder();
                holder.icon = (ImageView) row.findViewById(R.id.iconImage);
                holder.tvTripNumber = (TextView) row
                        .findViewById(R.id.tvTripNumber);
                holder.tvPickupTime = (TextView) row
                        .findViewById(R.id.tvPickupTime);
                holder.tvNumberPersons = (TextView) row
                        .findViewById(R.id.tvNumberPersons);
                holder.tvIndexNumber = (TextView) row
                        .findViewById(R.id.tvIndexNumber);
                holder.tripState = (ImageView) row
                        .findViewById(R.id.iconTripState);

                row.setTag(holder);

            }

            holder = (ViewHolder) row.getTag();

            holder.tvPickupTime
                    .setText(itemDetailsrrayList.get(position).mPickupAdd);

            holder.tvNumberPersons.setText(String.valueOf(itemDetailsrrayList
                    .get(position).mNumPerson));
            holder.tvTripNumber.setText(String.valueOf(itemDetailsrrayList
                    .get(position).mTripNumber));

            holder.icon.setImageResource(R.drawable.ic_launcher);

            holder.tvIndexNumber.setText(String.valueOf(position + 1));

            switch (itemDetailsrrayList.get(position).mTripState) {

            case NOSHOW:
                holder.tripState.setImageResource(R.drawable.noshow);
                break;

            case EXECUTED:
                holder.tripState.setImageResource(R.drawable.correct);
                break;

            case SCHEDULED:
                holder.tripState.setImageResource(R.drawable.scheduled);
                break;

            case STARTED:
                holder.tripState.setImageResource(R.drawable.start);
                break;

            }

        } catch (Exception e) {
            sampleLogging.e("Exception :", e);
        }
        return row;
    }

    static class ViewHolder {
        TextView tvTripNumber;
        TextView tvPickupTime;
        TextView tvNumberPersons;
        TextView tvIndexNumber;
        ImageView icon;
        ImageView tripState;
    }
} 
```

请任何人建议我该怎么做请给我一些教程或示例。

谢谢

# r - 如何创建函数向量？

> ID：12481404
> 
> 赞同：16
> 
> 时间：2010-10-21T08:42:45.930
> 
> 标签：r

我想使用两个 agruments 函数“func”创建一个函数向量，例如这个：

```
func = function(number, coefficient) {  
     return(coefficient*number)  
} 
```

这是我创建函数向量的方法：

```
vector_of_functions = NULL  
for (i in 1:4) {  
     vector_of_functions = c(vector_of_functions, 
                             function(number) func(number=number, coefficient=i))  
} 
```

我的问题是组成我的向量的所有函数都是相同的，即使它们是`i`通过循环使用不同的方法创建的。接缝它们是使用的最后一个值`i`（这里是一个全局变量）进行评估的。

有人有想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-10-21T09:22:36.303

在其参数上使用带有[闭包的](http://en.wikipedia.org/wiki/Closure_(computer_science))[工厂函数](http://en.wikipedia.org/wiki/Factory_function)（它将保存循环变量的值）：

```
> # the factory function
> makefunc <- function(x) { x; function() x }
> funclist <- list()
> for (i in 1:3) funclist[[i]] <- makefunc(i)
> funclist[[1]]()
[1] 1
> funclist[[2]]()
[1] 2
> 
```

# jquery - 可访问的全宽下拉菜单，带有 Jquery 悬停、焦点和模糊

> ID：12481412
> 
> 赞同：3
> 
> 时间：2012-09-18T16:43:59.723
> 
> 标签：jquery, drop-down-menu, focus, accessibility, blur

我有一个全角下拉菜单，显示所有子菜单悬停或获得焦点（使其可通过键盘访问）。这是您经常看到的菜单，但键盘可访问性我还没有找到以模拟悬停行为的方式实现的示例（换句话说：扩展菜单）。

这是菜单的 HTML：

```
<div id="menu">
    <div class="container">
      <ul class="row">
        <li class="first"><a href="link">Home</a></li>
        <li><a href="link">Projects</a>
          <ul class="inner">
             <li class="first"><a href="link">Project 1</a></li>
             <li class="last"><a href="link">Project 2</a></li>
          </ul>
        </li>
        <li class="last"><a href="link">Contact</a>
          <ul class="inner">
            <li class="first"><a href="link">Visit us</a></li>
            <li class="last"><a href="link">Email</a></li>
          </ul>
        </li>
     </ul>
  </div>
</div> 
```

我一直在尝试各种方法来使这项工作与 Jquery 一起工作（仍在学习 Jquery），并且它部分工作。悬停功能有点工作，仍然发生了一些奇怪的事情。问题在于焦点/模糊功能。我已经为模糊功能添加了超时，否则每次我切换到另一个链接时它都会触发。但是有了这个超时，模糊效果就不会再发生了。（菜单保持扩展）。

可能使这与其他解决方案不同的是，我希望悬停、聚焦和模糊事件发生在#menu div 上，而不是单个链接上。我希望它以这种方式工作，因为它是一个全宽菜单，当悬停菜单时，您会立即看到所有子菜单。我发现在 div 中添加 'tabindex = 0' 可以使用焦点和模糊。因此，我决定也通过 Jquery 添加它。

我的 Jquery 看起来像这样：

```
$(document).ready(function() {

    /* dropdownmenu */
    $("#menu")
    .attr("tabindex",0)
    // HOVER
    .hover
    ( function () 
      {
       $(this).addClass('dropdown');
       $(this).animate({ height: '20em'});
      },
      //hover out
      function() 
      {
        $(this).animate(
            { height: '6em' }, 
            { complete: function() { $(this).removeClass('dropdown'); } }
        )
      }
    )
    // FOCUS
    .focus 
    ( function () 
      {
        $(this).addClass('dropdown');
        $(this).animate({height: '20em'});
      }

    )
    // BLUR
    .blur 
    ( function() 
      {
         setTimeout(function()
         {
        $(this).animate(
                    {height: '6em'}, 
                { complete: function() { $(this).removeClass('dropdown'); } }
            )
         },500);

      }
    ); 
```

我希望有人可以帮助我一点，使这个 Jquery 更好。是不是太长了？为什么悬停功能表现奇怪而模糊功能根本不起作用？我应该以另一种方式解决这个问题吗？

我还在 jsfiddle 中添加了这个：http: [//jsfiddle.net/CpdM2/1/](http://jsfiddle.net/CpdM2/1/) 这里的高度不同以更好地展示行为。

谢谢你的帮助！

编辑

我现在正在尝试使用 Jquery 的不同方法。我越来越近了，唯一的问题仍然是模糊功能。

我的新jQuery：

```
$.fn.accessibleDropDown = function ()
{
    var el = $(this);

    $(el).mouseenter(function() {
        $("#menu").addClass('dropdown');
        $("#menu").animate({ height: '7em'});
    }).mouseleave(function() {        
            $("#menu").animate(
                   { height: '1em' }, 
                { complete: function() { $("#menu").removeClass('dropdown'); } }
            );
    });

    /* Make dropdown menus keyboard accessible */

    $("#menu").focus(function() {
        //alert("focus");
       $("#menu").addClass('dropdown');
        $("#menu").animate({ height: '7em'});
    }).blur(function() {
        setTimeout(function() { 
         if ($('#menu').find(':focus').length > 0) {
             return false;
        } else {
            alert("menu does not have focus");
            $("#menu").animate(
                { height: '1em' }, 
                { complete: function() { $("#menu").removeClass('dropdown'); } }
            );
        }
       }, 50);
    });
};

$("#menu").attr("tabindex",0).accessibleDropDown();
​ 
```

在此处查看实际操作：http: [//jsfiddle.net/kBNRv/](http://jsfiddle.net/kBNRv/)

查看#menu div 是否失去焦点的代码由于某种原因无法正常工作。我真的希望有人能指出我正确的方向。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T19:32:44.170

一种更简单的方法是改用它：

```
$("#menu").mouseenter(function() {
    $(this).addClass('dropdown');
    $(this).animate({height: '7em'});
    $(this).focus(); /*OPTIONAL*/       
});

$("#menu").mouseleave(function() {
    $(this).removeClass('dropdown'); 
    $(this).animate({height: '1em' });
    $(this).blur(); /*OPTIONAL*/  
}); 
```

可以在 'mouseenter' 和 'mouseleave' 上调用 focus 和 blur 方法，因为此列表元素不是输入类型，它不会通过以相同方式单击它来接受焦点。除非您以某种方式倾听这种行为，否则不确定您为什么需要关注。

另外，请注意，如果元素的 z-index 高于您的菜单，则这种方法与您的原始方法非常相似。如果您在菜单上方放置一个元素，则当您的鼠标滑过该元素时将触发“mouseleave”方法。要查看示例，只需在此处翻转“结果”框：http: [//jsfiddle.net/CpdM2/17/](http://jsfiddle.net/CpdM2/17/)。因此，为了应对您可能想要的行为：

a) 避免在菜单上添加任何元素。

b) 在触发“mouseleave”方法之前，检查 x、y 鼠标位置以查看它们是否在您的菜单区域内/外。检查鼠标位置的示例在这里：[http ://docs.jquery.com/Tutorials:Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

这是闪回中常用的方法，当使用闪光灯很酷时.....叹息

# r - 有没有更好的方法来获得与表（vec）相同的输出，其中 vec 是一个向量？

> ID：12481415
> 
> 赞同：4
> 
> 时间：2010-12-20T02:40:39.920
> 
> 标签：r

假设我有一个向量，但我不知道，先验，它的独特元素（这里：1 和 2）。

```
vec <-
  c(1, 1, 1, 2, 2, 2, 2) 
```

我很想知道是否有更好的方法（或优雅的方法）来获取唯一元素的数量，`vec`即与`table(vec)`. 它是 data.frame 还是命名向量都没有关系。

```
R> table(vec)
vec
1 2 
3 4 
```

*原因：*我很想知道是否有更好的方法。另外，我注意到实现中有一个`for`循环`base`（除了 .C 调用）。我不知道这是否是一个大问题，但是当我做类似的事情时

```
R> table(rep(1:1000,100000)) 
```

R需要很长时间。我确信这是因为 100000 的巨大数字。但是有没有办法让它更快？

**编辑**`Chase's`除了回答之外，这也做得很好。

```
R> rle(sort(sampData)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-12-20T03:18:59.257

这是一个有趣的问题 - 我很想知道对此的其他想法。查看 for 的源代码`table()`表明它是基于`tabulate()`. `tabulate()`显然有一些怪癖，即它只处理正整数并返回一个没有名称的整数向量。我们可以`unique()`在我们的向量上使用来应用`names()`. 如果您需要将零值或负值制成表格，我想返回并进行审查`table()`是必要的，因为`tabulate()`根据帮助页面上的示例似乎没有这样做。

```
table2 <- function(data) {
    x <- tabulate(data)
    y <- sort(unique(data))
    names(x) <- y
    return(x)   
    } 
```

快速测试：

```
> set.seed(42)
> sampData <- sample(1:5, 10000000, TRUE, prob = c(.3,.25, .2, .15, .1))
> 
> system.time(table(sampData))
   user  system elapsed 
  4.869   0.669   5.503 
> system.time(table2(sampData))
 user  system elapsed 
0.410   0.200   0.605
> 
> table(sampData)
sampData
      1       2       3       4       5 
2999200 2500232 1998652 1500396 1001520 
> table2(sampData)
      1       2       3       4       5 
2999200 2500232 1998652 1500396 1001520 
```

编辑：我刚刚意识到有一个`count()`函数`plyr`是`table()`. 在上面的测试中，它的性能比`table()`我提出的 hack-job 解决方案好，但略差：

```
library(plyr)
 system.time(count(sampData))
   user  system elapsed 
  1.620   0.870   2.483 
```

# r - 将逗号分隔的单元格分隔到新行

> ID：12481418
> 
> 赞同：3
> 
> 时间：2011-02-09T18:35:23.570
> 
> 标签：r

嗨，我有一个带有逗号分隔列的表，我需要将逗号分隔的值转换为新行。例如，给定的表是

```
Name     Start      End 
A        1,2,3    4,5,6
B          1,2      4,5
C      1,2,3,4  6,7,8,9 
```

我需要像这样转换它

```
Name Start End
   A     1   4
   A     2   5  
   A     3   6
   B     1   4
   B     2   5 
   C     1   6
   C     2   7
   C     3   8   
   C     4   9 
```

我可以使用 VB 脚本来做到这一点，但我需要使用 R 来解决它 任何人都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-02-09T19:29:49.670

[您可能已经在SO](https://stackoverflow.com/)上问过这个问题，因为处理统计数据没有问题:)

无论如何，我提出了一个非常复杂且丑陋的解决方案，可能对您有用：

```
# load your data
x <- structure(list(Name = c("A", "B", "C"), Start = c("1,2,3", "1,2", 
"1,2,3,4"), End = c("4,5,6", "4,5", "6,7,8,9")), .Names = c("Name", 
"Start", "End"), row.names = c(NA, -3L), class = "data.frame") 
```

在 R 中看起来像：

```
> x
  Name   Start     End length
1    A   1,2,3   4,5,6      3
2    B     1,2     4,5      2
3    C 1,2,3,4 6,7,8,9      4 
```

`strsplit`在调用的帮助下进行数据转换：

```
data <- data.frame(cbind(
    rep(x$Name,as.numeric(lapply(strsplit(x$Start,","), length))),
    unlist(lapply(strsplit(x$Start,","), cbind)),
    unlist(lapply(strsplit(x$End,","), cbind))
    )) 
```

命名新数据框：

```
names(data) <- c("Name", "Start", "End") 
```

看起来像：

```
> data
  Name Start End
1    A     1   4
2    A     2   5
3    A     3   6
4    B     1   4
5    B     2   5
6    C     1   6
7    C     2   7
8    C     3   8
9    C     4   9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-02-09T19:26:27.087

这是一种适合您的方法。我假设您的三个输入向量位于不同的对象中。我们将创建这些输入的列表并编写一个函数来处理每个对象并以 a `data.frame`with plyr 的形式返回它们。

这里要注意的是将字符向量拆分为其组成部分，然后`as.numeric`在拆分时用于将数字从字符形式转换。由于 R 按列填充矩阵，因此我们定义了一个 2 列矩阵并让 R 为我们填充值。然后我们检索 Name 列并将它们放在一个`data.frame`. `plyr`很好地处理列表并将其自动转换`data.frame`为我们的。

```
library(plyr)

a <- paste("A",1, 2,3,4,5,6, sep = ",", collapse = "")
b <- paste("B",1, 2,4,5, sep = ",", collapse = "")
c <- paste("C",1, 2,3,4,6,7,8,9, sep = ",", collapse = "")

input <- list(a,b,c)

splitter <- function(x) {
    x <- unlist(strsplit(x, ","))
    out <- data.frame(x[1], matrix(as.numeric(x[-1]), ncol = 2))
    colnames(out) <- c("Name", "Start", "End")
    return(out)
}

ldply(input, splitter) 
```

和输出：

```
> ldply(input, splitter)
 Name Start End
1    A     1   4
2    A     2   5
3    A     3   6
4    B     1   4
5    B     2   5
6    C     1   6
7    C     2   7
8    C     3   8
9    C     4   9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-15T07:00:25.747

中的`separate_rows()`函数`tidyr`是具有多个分隔值的观察的老板......

```
# create data 
library(tidyverse)
d <- data_frame(
  Name = c("A", "B", "C"), 
  Start = c("1,2,3", "1,2", "1,2,3,4"), 
  End = c("4,5,6", "4,5", "6,7,8,9")
)
d
# # A tibble: 3 x 3
#    Name   Start     End
#   <chr>   <chr>   <chr>
# 1     A   1,2,3   4,5,6
# 2     B     1,2     4,5
# 3     C 1,2,3,4 6,7,8,9

# tidy data
separate_rows(d, Start, End)
# # A tibble: 9 x 3
#    Name Start   End
#   <chr> <chr> <chr>
# 1     A     1     4
# 2     A     2     5
# 3     A     3     6
# 4     B     1     4
# 5     B     2     5
# 6     C     1     6
# 7     C     2     7
# 8     C     3     8
# 9     C     4     9

# use convert set to TRUE for integer column modes
separate_rows(d, Start, End, convert = TRUE)
# # A tibble: 9 x 3
#    Name Start   End
#   <chr> <int> <int>
# 1     A     1     4
# 2     A     2     5
# 3     A     3     6
# 4     B     1     4
# 5     B     2     5
# 6     C     1     6
# 7     C     2     7
# 8     C     3     8
# 9     C     4     9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T05:19:41.860

这是另一个，只是为了好玩。取`d`为原始数据。

```
f <- function(x, ul = TRUE)
{
    x <- deparse(substitute(x))
    if(ul) unlist(strsplit(d[[x]], ','))
    else strsplit(d[[x]], ',')
}

> data.frame(Name = rep(d$Name, sapply(f(End, F), length)),
             Start = f(Start), End = f(End))
#   Name Start End
# 1    A     1   4
# 2    A     2   5
# 3    A     3   6
# 4    B     1   4
# 5    B     2   5
# 6    C     1   6
# 7    C     2   7
# 8    C     3   8
# 9    C     4   9 
```

# r - 如何创建具有 3 个因素的 data.frame？

> ID：12481426
> 
> 赞同：0
> 
> 时间：2011-10-05T14:59:55.747
> 
> 标签：r, dataframe

我希望你不会觉得我的问题太傻，我做了很多研究，但似乎我不知道如何解决这个非常烦人的问题。

好吧，我有一个实验中 6 个参与者 (P) 的数据，每个参与者有 50 个试验 (T) 和 10 个条件 (C)。所以我想在 r 中创建一个数据框，允许我放置这些数据。这个data.frame应该有3个因素（P，T和C），所以总行数（P*T*C）。对我来说，困难在于创建这个，因为我有 6 个参与者的数据在 100 个 obs(T) 和 10 个变量(C) 的 6 个数据帧中。我想先用这些因子创建空数据集，然后根据因子 P、T 和 C 复制 6 个 data.set 的值。任何帮助将不胜感激，我是 r 的新手。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-10-05T16:04:33.790

好的; 首先，我们为所有参与者创建一个大数据框：

```
result<-rbind(dfrforparticipant1, dfrforparticipant2,...dfrforparticipant6) #you'll have to fill out the proper names of the original data.frames 
```

接下来，我们为参与者 ID 添加一列：

```
numTrials<-50 #although 100 is also mentioned in your question
result$P<-as.factor(rep(1:6, each=numTrials)) 
```

最后，我们需要从“宽”格式变为“长”格式（我假设您保存每个条件结果的列名称为 C1、C2 等；我还假设您的原始 data.frames 已经保存一个名为 T 的列来表示试验），像这样（未经测试，因为您没有提供示例数据）：

```
orgcolnames<-paste("C", 1:10, sep="")
result2<-reshape(result, varying=list(orgcolnames), v.names="val", idvar=c("T","P"), timevar="C", times=seq_along(orgcolnames), direction="long") 
```

你想要的现在在`result2`.

# python - 使用scrapy收集和存储数据

> ID：12481428
> 
> 赞同：2
> 
> 时间：2012-09-18T16:44:53.580
> 
> 标签：python, xpath, scrapy

我对开发很陌生，对scrapy也很陌生，到目前为止，我已经了解了文档，但我遇到了我似乎无法通过的墙。以下是我拥有的基本蜘蛛（更改了网址以保护无辜者）。

起始 url 包含一个产品类别列表，这些链接指向带有子类别列表的页面，这些子类别链接到我要解析的产品页面。

我的蜘蛛当前运行没有错误，似乎获取了我想要的所有页面，但不想调用`parse_product()`. 这是代码：

```
# coding=utf-8
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector 
from scrapy.item import Item, Field

class MySpider(CrawlSpider):
    name = "MySpider"
    allowed_domains = ["www.mysite.com"]
    start_urls = ["http://www.mysite.com/start_page/",]

    rules = (
    Rule(SgmlLinkExtractor(restrict_xpaths='//body[@class="item"] '),     # Product page
                                    callback='parse_product'),
    Rule(SgmlLinkExtractor(restrict_xpaths="//ul[@id='products_ul']/li"), # First 2 pages - same xpath to follow.
                                    )
    )

    def parse_product(self, response):
        print " parsing product" # Print statement added for testing purposes - test failed.
        hxs = HtmlXPathSelector(response)
        item = MySpiderItem()
        item['name']  = hxs.select('/xpath/to/name')
        item['description'] = hxs.select('/xpath/to/description' )
        item['image'] = hxs.select('/xpath/to/image')
        print item    # Print statement added for testing purposes - test failed.
        return item   

class MySpiderItem(Item):
    name = Field()
    description = Field()
    image = Field() 
```

问题：

1）这应该做我想做的吗？

好的，显然，不，这就是我在这里的原因！但我不确定这是否归因于错误的 xpath 或者我是否调用`parse_product`不正确，例如：我是否需要产品页面的链接提取器？我没有从那里关注链接，但是如果没有它，我如何定位它们来解析？）

从理论上讲，它应该只得到 2 种类型的页面，带有`("//ul[@id='products_ul']/li")`要遵循的链接列表的猫/子猫页面和需要解析的产品页面（这些唯一一致的标识符是`<body class="mainpage version2 **item**">`vs `<body class="mainpage version2 **category**">`）

2）如何将输出保存为 csv（或任何其他简单的文本格式）？

这方面的文档让我感到困惑，（尽管我确信这是因为我缺乏理解而不是文档不佳，因为总的来说它非常好）它似乎让你转了一圈，并给出了例子而不说是哪个文件例子应该写到。

我目前正在使用这个蜘蛛作为一个独立的文件，`$ scrapy runspider filename.py`以便于测试，但我很乐意将它设置为一个完整的爬虫蜘蛛，如果这样可以让事情变得更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T07:00:08.333

好的，如果它**匹配规则，你****没有**定义它应该去哪里，所以默认它正在调用**parse_product**，如果你不想进入**parse_product**你可以提到任何 **回调**它会像**callback='parse_other'**它会去 parse_other而不是**parse_product**

 ******现在你没有设置任何你必须使用[python csv 模块的scrapy项目](http://docs.python.org/library/csv.html)

提示是您可以在**init**方法中创建文件和编写器对象，并通过 parse_product 将每个项目写入文件中

如果你想设置scrapy项目，scrapy带有默认导出器，你只需要在settings.py中提到这些设置

```
FEED_EXPORTERS = {
     'csv': 'scrapy.contrib.exporter.CsvItemExporter',
} # enabling Csv Exporter
FEED_FORMAT = 'csv' # output formate
FEED_URI = "output.csv" # file name and path 
```

rest scrapy builten exporter 会为你做的。希望能帮助到你******

# r - 如何在R中的条形图中显示每个因子顶部的频率

> ID：12481430
> 
> 赞同：20
> 
> 时间：2012-09-18T16:45:10.290
> 
> 标签：r, plot

> **可能重复：**
> [将文本添加到 R 中的水平条形图中，y 轴以不同的比例？](https://stackoverflow.com/questions/4217207/add-text-to-horizontal-barplot-in-r-y-axis-at-different-scale)
> [注释条形上方的值（ggplot faceted）](https://stackoverflow.com/questions/9815226/annotate-values-above-bars-ggplot-faceted)

使用下面的代码，我希望在每列上方显示一个与该列的 y 值相对应的数字。换句话说，我试图让“QnWeight_initial”在灰色条的顶部显示 593 等等......

我的数据：

```
data<-structure(list(V1 = structure(c(2L, 1L), .Label = c("593", "QnWeight_initial"
), class = "factor"), V2 = structure(c(2L, 1L), .Label = c("566", 
"Head"), class = "factor"), V3 = structure(c(2L, 1L), .Label = c("535", 
"V1"), class = "factor"), V4 = structure(c(2L, 1L), .Label = c("535", 
"V2"), class = "factor"), V5 = structure(c(2L, 1L), .Label = c("535", 
"V3"), class = "factor"), V6 = structure(c(2L, 1L), .Label = c("482", 
"Left_Leg"), class = "factor"), V7 = structure(c(2L, 1L), .Label = c("474", 
"Left_Antenna"), class = "factor"), V8 = structure(c(2L, 1L), .Label = c("237", 
"Qn_Weight_Loss"), class = "factor"), V9 = structure(c(2L, 1L
), .Label = c("230", "Days_wrkr_eclosion"), class = "factor"), 
    V10 = structure(c(2L, 1L), .Label = c("81", "Growth_all"), class = "factor"), 
    V11 = structure(c(2L, 1L), .Label = c("79", "Growth_1_2"), class = "factor"), 
    V12 = structure(c(2L, 1L), .Label = c("62", "Growth_1_3"), class = "factor"), 
    V13 = structure(c(2L, 1L), .Label = c("60", "Growth_2_3"), class = "factor"), 
    V14 = structure(c(2L, 1L), .Label = c("51", "Right_Antenna"
    ), class = "factor"), V15 = structure(c(2L, 1L), .Label = c("49", 
    "Left_Leg_Remeasure"), class = "factor"), V16 = structure(c(2L, 
    1L), .Label = c("49", "Right_Leg"), class = "factor"), V17 = structure(c(2L, 
    1L), .Label = c("47", "Head_Remeasure"), class = "factor"), 
    V18 = structure(c(2L, 1L), .Label = c("46", "Left_Antenna_Remeasure"
    ), class = "factor")), .Names = c("V1", "V2", "V3", "V4", 
"V5", "V6", "V7", "V8", "V9", "V10", "V11", "V12", "V13", "V14", 
"V15", "V16", "V17", "V18"), class = "data.frame", row.names = c(NA, 
-2L))
dat<-data.frame(fac=unlist(data[1,, drop=FALSE]), freqs=unlist(data[2,, drop=FALSE])) 
```

剧情：

```
barplot( as.numeric( as.character(dat$freqs)) , main="Sample Sizes of Various Fitness Traits", xaxt='n', xlab='', width=0.85, ylab="Frequency")
par(mar=c(5,8,4,2))
labels<-unlist(data[1,,drop=FALSE])
text(1:18, par("usr")[3] -0.25, srt=90, adj=1,labels=labels,xpd=TRUE, cex=0.6) 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-18T19:33:45.313

您遇到问题是因为`dat$freqs`它是一个因素，即使它的打印表示“看起来”它是数字。`str(foo)`（在此处键入`str(dat)`或`str(dat$freqs)`查看您正在使用的数据的真实结构几乎总是有帮助的。）

无论如何，一旦您转换`dat$freq`为 class `"numeric"`，构建绘图就变得简单：

```
## Make the frequencies numbers (rather than factors)
dat$freqs <- as.numeric(as.character(dat$freqs))
## Find a range of y's that'll leave sufficient space above the tallest bar
ylim <- c(0, 1.1*max(dat$freqs))
## Plot, and store x-coordinates of bars in xx
xx <- barplot(dat$freqs, xaxt = 'n', xlab = '', width = 0.85, ylim = ylim,
              main = "Sample Sizes of Various Fitness Traits", 
              ylab = "Frequency")
## Add text at top of bars
text(x = xx, y = dat$freqs, label = dat$freqs, pos = 3, cex = 0.8, col = "red")
## Add x-axis labels 
axis(1, at=xx, labels=dat$fac, tick=FALSE, las=2, line=-0.5, cex.axis=0.5) 
```

![在此处输入图像描述](../Images/da57591a2d47b07005f4a2b48b215727.png)

# jira - JIRA 搜索落后于计划的任务

> ID：12481433
> 
> 赞同：1
> 
> 时间：2012-09-18T16:45:19.160
> 
> 标签：jira, jql

我想在我们跟踪所有工作的董事会中添加一个快速过滤器，并希望清楚地了解我们在队列中的内容以及我们拥有的内容是询问丢失的风险，以便我们可以在需要时重新分配资源。

我想要所有有可能错过截止日期的工作：

```
remainingestimate > (due - startofday) 
```

使用该查询时出现以下错误。“JQL 查询中的错误：期望 ',' 或 ')' 但得到 '-'。（第 1 行，字符 26）”

我试着做：

```
due > startofday(remainingestimate) 
```

但我在那里得到一个错误，因为为了在一天开始时进行偏移，你需要在那里有一个 +/-，并且在那里出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-10T06:55:15.367

我会试试这个：

```
remainingEstimate > 0 and duedate < endOfDay() and status not in (Closed, Resolved) 
```

任务之间有一点差距，他们将（估计）今天完成，但你喜欢看到那些有风险的任务......

# jquery - 如何在 Jquery PrettyPhoto 中添加链接以下载图像

> ID：12481434
> 
> 赞同：3
> 
> 时间：2012-09-18T16:45:18.083
> 
> 标签：jquery, yii, prettyphoto

我正在使用 Jquery PrettyPhoto 进行幻灯片放映，但它不允许用户下载图像。任何人都知道如何添加链接以便用户能够下载图像？

这是我的代码：（我在 Yii 中使用 prettyPhoto 小部件，但是对于 prettyPhoto 的任何一般答案都会很棒）

```
<?php 
  $this->beginWidget('ext.prettyPhoto.PrettyPhoto', array(
        'id'=>'pretty_photo',
        // prettyPhoto options
        'options'=>array(
            'opacity'=>0.60,
            'modal'=>true,
        ),
    ));
?>
<div class="column4-front image-gallery">

         <a href="/files/show/<?php echo $data->image; ?>" rel="prettyPhoto[pp_gal]" title="<?php echo $data->caption; ?>">
             <img src="/files/show/thumb/<?php echo $data->image; ?>" />
         </a>

</div>
<?php $this->endWidget('widgets.prettyPhoto');?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-05T12:15:44.997

此解决方案**不需要更改 PrettyPhoto JS**。

我使用回调函数搜索包含大图像的元素并添加一个链接到图像的新元素（仅适用于**HTML5**）：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
        <link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" title="prettyPhoto main stylesheet" charset="utf-8" />
        <script src="js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>     
    </head>
    <body>
        <div id="main">
            <a href="images/fullscreen/2.jpg" rel="prettyPhoto[gallery1]"><img src="images/thumbnails/t_2.jpg" width="60" height="60" alt="Nice building" /></a>
            <a href="images/fullscreen/3.jpg" rel="prettyPhoto[gallery1]"><img src="images/thumbnails/t_3.jpg" width="60" height="60" alt="Fire!" /></a>
        </div>
        <script type="text/javascript" charset="utf-8">
            $(document).ready(function(){
                //Add callback function to prettyPhoto, called everytime an item is shown/changed
                $("a[rel^='prettyPhoto']").prettyPhoto({
                    changepicturecallback: function(){add_download()}
                });
            });

            function add_download(){
                //If "download" class doesn't exist
                if (!$(".download")[0]){
                    //Search for the div that contains the image and add an element with Text (or image)
                    $("#pp_full_res").append('<p class="download" style="cursor: pointer;position: absolute;right: 65px;z-index: 9999;">DOWNLOAD</p>');

                    $('.download').each(function(){
                        //Add "download" attribute that only works with HTML5
                        $(this).wrap('<a target="_blank" href="' + $(this).prev().attr('src') + '" download />');
                    });
                }

            }
        </script>
    </body>
</html> 
```

还有另一个（**没有 HTML5**）解决方案，改变：

```
$(this).wrap('<a target="_blank" href="' + $(this).prev().attr('src') + '" download />'); 
```

经过

```
$(this).wrap('<a href="download.php?file=' + $(this).prev().attr('src') + '" />'); 
```

你需要一个“download.php”来强制下载img，例如： [https ://stackoverflow.com/a/7238099/2369084](https://stackoverflow.com/a/7238099/2369084)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T20:16:37.663

好吧，我想这已经很晚了，但它会帮助某人，

首先开始使用最新版本并至少拥有 jquery 1.4+，因为没有准备好 2.0，我们都最好开始移动大声笑。

好的，我将采用上面的示例

```
 <a href='./uploads/1f.jpg' rel='prettyPhoto[gallery1]' title='Nature Photo One' >
       <img src='./uploads/1t.jpg' border='0' alt='' link='<a href="download.php?f=1f.jpg" class="url">Download This Photo</a>' />
     </a> 
```

**不**要这样做 link="ur link" 而是像这样使用 data 属性

这就是改变你的格式的第一步。

现在打开你的 prettyphoto.js

寻找

```
social_tools: '<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>' /* html or false to disable */ 
```

它将与开始时的所有标记一起使用。

现在将其编辑为如下

```
social_tools: '<div class="{my_class}"><a href="{my_url}">{my_link}</a></div><br/><div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>' /* html or false to disable */ 
```

接下来找到这个部分

```
// Rebuild Facebook Like Button with updated href
            if(settings.social_tools){
                facebook_like_link = settings.social_tools.replace('{location_href}', encodeURIComponent(location.href)); 
                $pp_pic_holder.find('.pp_social').html(facebook_like_link);
            } 
```

204号线附近

用。。。来代替

```
if(settings.social_tools){
                facebook_like_link = settings.social_tools.replace('{location_href}', encodeURIComponent(location.href)); 
                $pp_pic_holder.find('.pp_social').html(facebook_like_link);
 settings.social_tools.replace('{my_url}',encodeURIComponent($("img[src='"+pp_images[set_position]+"']").data('link')));

// CUSTOMIZE BELOW TO YOUR NEED

settings.social_tools.replace('{my_class}','your_class');
settings.social_tools.replace('{my_link}','Go To Page');
                } 
```

如上面两行所述，您可以用您想要的任何名称替换“.your_class”，然后转到“转到页面”

一切都完成了刷新你的页面，即F5，因为这在文件中被改变了......并加载了它会很好用。

欢呼所有人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-01T18:17:25.557

简单的！

HTML **（标题为空！）**

```
<a id="photo_link" href="http://link_to_image_or_video" rel="prettyPhoto" title="">
    <img src="images/play-video.png" alt="" title="" width="380" height="147" />
</a> 
```

JS（里面的文档准备好了）

```
//do not show title on download link hover (download button)
$("#photo_link").hover(function(e){

    $(this).attr('data-title', $(this).attr('title'));
    $(this).removeAttr('title');

},
function(e){

    $(this).attr('title', $(this).attr('data-title'));

}); 

//add download link on the fly on click of photo link
$("#photo_link").on('click', function(){
    $(this).attr('title', '<div class="center"><a href="#download_link" class="btn btn-primary btn-lg"><strong>Download</strong></a></div>');
}); 
```

无需更改 PrettyPhoto JS。这是一个简单的想法。你可以在 Yii 框架内玩。

更简单：只有 JS（在你的视图中包含 JS）

```
$("a[rel^='prettyPhoto']").prettyPhoto({
    social_tools: '<div class="center"><a id="get_started" href="#contact" class="btn btn-primary btn-lg"><strong>Download</strong></a></div>',
    default_width: 800,
    default_height: 450
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T08:37:48.640

这是我的解决方案（不适用于 Yii）- [http://loco.ru/materials/343-wordpress-nextgen-gallery-dobavit-ssylku-sohranit-foto](http://loco.ru/materials/343-wordpress-nextgen-gallery-dobavit-ssylku-sohranit-foto) 添加链接以打开原始图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T12:39:43.850

好的，我解决了我的问题，[这](http://www.catpin.com/prettyphoto.php)是我找到的一个例子。他们添加了下载照片的链接，如下所示：

```
<ul class='gallery clearfix'>
  <li>
     <a href='./uploads/1f.jpg' rel='prettyPhoto[gallery1]' title='Nature Photo One' >
       <img src='./uploads/1t.jpg' border='0' alt='' link='<a href="download.php?f=1f.jpg" class="url">Download This Photo</a>' />
     </a>
  </li>
  // REST OF THE IMAGES

</ul>

 <script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
        $("a[rel^='prettyPhoto']").prettyPhoto({theme: 'light_rounded'});
    });
 </script> 
```

需要对 jquery.prettyphoto.js 文件进行一些更改。我使用的 v 3.1.2 可以在[这里下载](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

这是我使用[之前提到的示例所做的更改](http://www.catpin.com/prettyphoto.php)

```
(function($) {
$.prettyPhoto = {version: '3.1.4'};
    $.fn.prettyPhoto = function(pp_settings) {
    pp_settings = jQuery.extend({
              //....
              social_tools: '<div class="pp_social"><span class="pp_link"></span></div>'
              // I deleted the rest in social_tools since I wasn't going to use them, you can just add this to the begining of it.
           }, pp_settings);
    //....

    /*
* Initialize prettyPhoto.
*/
$.prettyPhoto.initialize = function() {
       //...
       pp_links=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr('rel').indexOf(theRel)!=-1)return($(n).find('img').attr('link'))?$(n).find('img').attr('link'):"";}):$.makeArray($(this).find('img').attr('link'));
  //...
    }

    //...
    $.prettyPhoto.open = function(event) {
       //....
       if(pp_links[set_position]!=""){$pp_pic_holder.find('.pp_link').show().html(unescape(pp_links[set_position]));}else{$pp_pic_holder.find('.pp_link').hide();}
       //....
    } 
```

如果你想将它与 yii 中的[prettyphoto 扩展](http://www.yiiframework.com/extension/prettyphoto/)一起使用。您可以将 javaScript 文件替换为您修改的文件。然后：

```
<?php 
    $this->beginWidget('ext.prettyPhoto.PrettyPhoto', array(
        'id'=>'pretty_photo',
        // prettyPhoto options
        'options'=>array(
            'opacity'=>0.60,
            'modal'=>true,
            'theme'=> 'light_rounded'
        ),
    ));
?>
<div class="column4-front image-gallery">

        <a href="/files/immagini/<?php echo $data->image; ?>" rel="prettyPhoto[pp_gal]" title="<?php echo $data->caption; ?>">
             <img src="/files/immagini/thumb/<?php echo $data->image; ?>" link='<a href="<?php echo $this->createUrl('compania/downloadimage',array('f'=>$data->image)); ?>" class="url">Scarica questo foto</a>'/>

         </a>

   </div>
   <?php $this->endWidget('widgets.prettyPhoto');?> 
```

并将其添加到相关的控制器中，对于我 CompaniaController：

```
 public function actionDownloadImage()
    {
        $filename = $_GET['f']; 
        $fileDir='path to image';
        Yii::app()->request->sendFile(
            $filename,
            file_get_contents($fileDir.$filename)
        );      
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-15T21:51:26.860

我解决了在 img_markup 属性中编辑 prettyPhoto.js 文件的问题。

改变这个

```
image_markup: '<img id="fullResImage" src="{path}" />', 
```

对此

```
image_markup: '<img id="fullResImage" src="{path}" /><a class="pp_download" href="{path} download"><i class="enotype-icon-download"></i></a>', 
```

# jquery - jQuery $(this) 关键字

> ID：12481439
> 
> 赞同：51
> 
> 时间：2012-09-18T16:45:29.707
> 
> 标签：jquery, this

为什么使用`$(this)`而不是重新选择类很重要？

我在我的代码中使用了很多动画和 css 编辑，我知道我可以通过使用`$(this)`.

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-09-18T16:53:32.817

当您通过 jQuery 执行 DOM 查询时，`$('class-name')`它会主动在 DOM 中搜索该元素并返回该元素以及附加的所有 jQuery 原型方法。

当您在 jQuery 链或事件中时，您不必重新运行 DOM 查询，您可以使用 context `$(this)`。像这样：

```
$('.class-name').on('click', function(evt) {
    $(this).hide(); // does not run a DOM query
    $('.class-name').hide() // runs a DOM query
}); 
```

`$(this)`将保存您最初请求的元素。它将再次附加所有 jQuery 原型方法，但不必再次搜索 DOM。

更多信息：

[使用 jQuery 选择器的 Web 性能](https://love2dev.com/blog/web-performance-optimization-when-possible-use-native-selectors-instead-of-jquery/)

引自一个不再存在的网络博客，但出于历史原因，我将其保留在这里：

> 在我看来，最好的 jQuery 性能提示之一是尽量减少对 jQuery 的使用。也就是说，在使用 jQuery 和普通的 JavaScript 之间找到一个平衡点，一个好的起点是使用 'this'。许多开发人员在回调中专门使用 $(this) 作为他们的锤子而忘记了这一点，但区别是明显的：
> 
> 在 jQuery 方法的匿名回调函数中，这是对当前 DOM 元素的引用。$(this) 将 this 转换为 jQuery 对象并公开 jQuery 的方法。jQuery 对象只不过是增强的 DOM 元素数组。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-18T16:58:16.010

```
$(document).ready(function(){
   $('.somediv').click(function(){
   $(this).addClass('newDiv'); // this means the div which is clicked
   });                         // so instead of using a selector again $('.somediv');
});                           // you use $(this) which much better and neater:=) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-18T17:00:23.597

看看这段代码：

HTML：

```
<div class="multiple-elements" data-bgcol="red"></div>
<div class="multiple-elements" data-bgcol="blue"></div> 
```

JS：

```
$('.multiple-elements').each(
    function(index, element) {
        $(this).css('background-color', $(this).data('bgcol')); // Get value of HTML attribute data-bgcol="" and set it as CSS color
    }
); 
```

`this`指 DOM 引擎正在*处理*或*引用*的当前元素。

另一个例子：

```
<a href="#" onclick="$(this).css('display', 'none')">Hide me!</a> 
```

希望你现在明白了。关键字出现`this`在处理面向*对象*的系统时，或者像我们在这种情况下，面向*元素*的系统:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-18T17:02:52.647

使用`$(this)`提高了性能，因为您用于搜索的类/任何属性都不需要在整个网页内容中搜索多次。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-06T06:05:49.363

`$(this)`返回`cached`元素的一个版本，因此提高了性能，因为 jQuery 不必再次在元素的 DOM 中进行完整的查找。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-04T15:48:18.027

**我将向您展示一个示例，以帮助您理解为什么它很重要。**

例如，您有一些 Box 小部件，并且您想在每个小部件中显示一些隐藏的内容。当单个小部件具有不同的 CSS 类时，您可以轻松地做到这一点，但是当它具有相同的类时，您怎么能做到呢？
实际上，这就是我们使用**$(this)的原因**

**请检查代码并运行它:) ** [在此处输入图像描述](https://i.stack.imgur.com/MXveU.png)

```
 (function(){ 

            jQuery(".single-content-area").hover(function(){
                jQuery(this).find(".hidden-content").slideDown();
            })

            jQuery(".single-content-area").mouseleave(function(){
                jQuery(this).find(".hidden-content").slideUp();
            })

        })();
```

```
 .mycontent-wrapper {
      display: flex;
      width: 800px;
      margin: auto;
    }     
    .single-content-area  {
        background-color: #34495e;
        color: white;  
        text-align: center;
        padding: 20px;
        margin: 15px;
        display: block;
        width: 33%;
    }
    .hidden-content {
        display: none;
    }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="mycontent-wrapper">
    <div class="single-content-area">
        <div class="content">
            Name: John Doe <br/>
            Age: 33  <br/>
            Addres: Bangladesh
        </div> <!--/.normal-content-->
        <div class="hidden-content">
            This is hidden content
        </div> <!--/.hidden-content-->
    </div><!--/.single-content-area-->

    <div class="single-content-area">
        <div class="content">
            Name: John Doe <br/>
            Age: 33  <br/>
            Addres: Bangladesh
        </div> <!--/.normal-content-->
        <div class="hidden-content">
            This is hidden content
        </div> <!--/.hidden-content-->
    </div><!--/.single-content-area-->

    <div class="single-content-area">
        <div class="content">
            Name: John Doe <br/>
            Age: 33  <br/>
            Addres: Bangladesh
        </div> <!--/.normal-content-->
        <div class="hidden-content">
            This is hidden content
        </div> <!--/.hidden-content-->
    </div><!--/.single-content-area-->

</div><!--/.mycontent-wrapper-->
```

# php - CSV 或 Mysql 用于静态数据？

> ID：12481441
> 
> 赞同：0
> 
> 时间：2012-09-18T16:45:35.843
> 
> 标签：php, mysql, csv, angularjs

我们正在建立一个网站，它使用一些静态数据，如“国家、与每个国家相关的城市、山脉等”。

我的朋友建议将它们存储在 CSV 文件中并使用 javascript 导入它们会更快。他说它比从 mysql 获取它们要快。

我想坚持使用 mysql，以便我们将所有东西都放在一个地方。我不认为 0.00001 秒真的很重要。

你能帮助我们吗？我们什么时候应该使用mysql，什么时候使用csv？

*   我们正在谈论静态数据。我们将来不会改变它们
*   我们正在建设的网站是php，angularjs

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:55:41.383

更快可能不是决定做什么的最佳标准。

我敢打赌，你的朋友没有任何数据支持或反驳这两个建议。

JavaScript 导入不是网络跃点，就像对数据库的调用一样吗？

我会妥协：将它们放在 MySQL 中，在启动时将它们加载到内存中，然后将它们缓存在中间层。您只需支付网络跃点费用，即可将它们从中间层获取到浏览器，并且数据将存储在真实数据库中。

如果你没有中间层，那么你就不走运了。

每个用户都需要该表中的所有值，还是只需要几个？为什么要强迫每个用户接受大下载？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:11:34.900

一般来说，可预测位置的可预测文件比数据库查找要快得多。DB 是查找/定位，从磁盘中提取，交付。文件是您想要的位置，并且不涉及查找。

许多缓存技术会将内容存储到数据库以用于管理目的，但条目的内容也会写入文件以便在需要时快速查找。

您可能需要考虑两者的混合。数据库管理和文件缓存。您将两全其美，并构建一个平台供以后在州列表管理之外使用。

有许多缓存技术和方法。例如，我部署按需缓存。如果文件不在我期望的位置，我会从数据库缓存到按需动态写入的文件中。当数据库条目被更新时，杀死缓存的文件。随后，当文件被请求时，该文件被写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T16:49:36.683

对于这种静态数据，使用 MySQL（我能想到的）的唯一真正动机是数据库验证。我建议只使用 CSV，特别是如果您不打算更改它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:19:42.433

从 CSV 检索数据可能会更快，但它不会为您提供参照完整性。如果你说类似

```
users ( 
    country_id,
    locale_id, ...
) 
```

如果您愿意，您可以将该数据缓存在 CSV 中，但将其复制到数据库中，这样您就可以获得一些参照完整性。这样，当您查询数据时，所有包含该国家/地区信息的字段或任何将返回的任何记录都将加入它。这样，您就可以获得缓存它并从更快的数据存储中检索它而不会丢失参照完整性的好处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T17:20:02.263

在我看来，使用 MySQL 存储国家/地区是一个好主意，因为这可以通过外键确保数据的一致性。

在这种情况下，速度并不是很重要，因为您处理的数据很少（数百行）。

请记住，将此类数据存储在数据库之外可能会显着增加应用程序的复杂性。

希望这可以帮助 ;-）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-18T17:17:24.270

也许使用 SQLite ？它同时具有 CSV 和 MySQL 的一些优点

# php - 如何在 Yii CListView 中按日期对项目进行分组？

> ID：12481444
> 
> 赞同：0
> 
> 时间：2012-09-18T16:45:48.410
> 
> 标签：php, html, yii

想象一下由 CListView 呈现的一个简单的新闻项目列表。每个新闻项都有一个“insertDate”属性，我可以通过 $data->insertDate 访问它。现在，这样的列表看起来像这样呈现：

```
// example (how list is displayed now)
9-18-2012 - Stocks fell for 2nd week
9-18-2012 - Record heat for 2012
9-18-2012 - Crime down in the state
9-17-2012 - Stock woes are worrying investors
9-17-2012 - Business outlook is optimistic despite slow growth
9-16-2012 - More people moving into big cities
9-16-2012 - Stay ahead of the flu this year 
```

我想要做的是在当天的所有项目上方显示一个日期标题，以便显示看起来更像这样（下图）。有没有办法调整 CListView 来做到这一点？

```
// example of what i want to do
=======News for 9/18======
Stocks fell for 2nd week
Record heat for 2012
Crime down in the state

=======News for 9/17======
Stock woes are worrying investors
Business outlook is optimistic despite slow growth

=======News for 9/16======
More people moving into big cities
Stay ahead of the flu this year 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:12:16.150

你可以试试这个[http://groupgridview.demopage.ru/](http://groupgridview.demopage.ru/)或者这个[http://www.yiiframework.com/extension/xdateview/](http://www.yiiframework.com/extension/xdateview/)。您可以根据以上两个创建自定义网格视图，祝您好​​运。

# postgresql - currval 尚未定义此会话，如何获取多会话序列？

> ID：12481448
> 
> 赞同：48
> 
> 时间：2012-09-18T16:45:59.513
> 
> 标签：postgresql, database-design, auto-increment, postgresql-8.4

我的目标是在表中插入新行时自动插入主键字段。

如何在 PostgreSQL 中获取从会话到会话的序列？

```
 doubleemploi@hanbei:/home/yves$ psql -d test
 Mot de passe : 
 psql (8.4.13)
 Saisissez « help » pour l''aide.

 test=> create sequence test001 start 10;
 CREATE SEQUENCE
 test=> select currval('test001');
 ERREUR:  la valeur courante (currval) de la séquence « test00 » n''est pas encore définie dans cette session
 --- current value not yet defined this session (???)
 test=> select setval('test001', 10);
 setval 
 --------
      10
 (1 ligne)

 test=> select currval('test00');
  currval 
 ---------
       10
 (1 ligne)

 test=> \q
 test@hanbei:/home/yves$ psql -d test
 Mot de passe : 
 psql (8.4.13)
 Saisissez « help » pour l''aide.

 test=> select currval('test001');
 ERREUR:  la valeur courante (currval) de la séquence « test00 » n''est pas encore définie dans cette session 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-09-18T18:18:32.657

将`currval`返回为当前会话中的序列生成的最后一个值。因此，如果另一个会话为该序列生成一个新值，您仍然可以检索您的会话生成的最后一个值，从而避免错误。

但是，要在任何会话中获取最后生成的值，您可以使用上面的：

```
SELECT last_value FROM your_sequence_name; 
```

请注意，如果该值被其他会话与未提交（或中止）事务使用，并且您将此值用作参考，则可能会出现错误。即使在得到这个值之后，它也可能已经过时了。一般人只`currval`需要`setval`.

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-18T22:35:13.560

这可能比你想象的要简单......

> 我的目标是在表中插入新行时自动插入主键字段。

只需设置列的默认值：

```
ALTER TABLE tbl ALTER COLUMN tbl_id SET DEFAULT nextval('my_seq'::regclass); 
```

或者更简单，创建一个[**`serial`**](https://www.postgresql.org/docs/current/datatype-numeric.html#DATATYPE-SERIAL)主键类型的表：

```
CREATE TABLE tbl(
  tbl_id serial PRIMARY KEY
 ,col1 txt
  -- more columns
); 
```

它创建一个专用序列并`tbl_id`自动设置默认值。

在 Postgres 10 或更高版本中，请考虑使用**`IDENTITY`**列。看：

*   [自动递增表列](https://stackoverflow.com/questions/9875223/auto-increment-table-column/9875517#9875517)

如果`tbl_id`您没有在`INSERT`. 适用于*任何*会话，并发与否。

```
INSERT INTO tbl(col1) VALUES ('foo'); 
```

如果你想让新的`tbl_id`背对它做点什么：

```
INSERT INTO tbl(col1) VALUES ('foo') RETURNING tbl_id; 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-12-05T23:59:10.150

对于这个问题，我会给出一个实际的答案。我的程序和 psql 终端使用我的数据库服务器；所以有多个会话。目前我在我的 psql 终端中：

```
fooserver=> select currval('fusion_id_seq');
ERROR:  currval of sequence "fusion_id_seq" is not yet defined in this session
fooserver=> select nextval('fusion_id_seq');
 nextval 
---------
  320032
(1 row)

fooserver=> select currval('fusion_id_seq');
 currval 
---------
  320032
(1 row) 
```

看起来您只能在自己的会话中看到值。这也会影响另一个会话的currval。这可能与服务器的多线程隔离不同的会话有关。计数器（psql 中的串行）是一个共享对象。在我看来，只要计数器被正确锁定以确保只有单个线程（会话）可以增加它（原子操作），这个会话应该能够获取计数器的当前值。但我在这里可能是错的（不是数据库服务器编写器的专家）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-12T16:12:32.850

实际上**nextval**将推进序列并返回新值，这将是您问题的答案。

currval 将返回最近使用 nextval 获得的指定序列的值（如果当前会话中没有使用 nextval，这可能会失败）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-30T20:30:31.693

这个问题似乎是间歇性的，为了保持一致性，请使用 CTE 获取当前会话的插入序列

```
WITH inserted AS ( 
         INSERT INTO notifn_main (notifn_dt,stat_id)
     SELECT now(),22 
     FROM notifn 
     RETURNING id )
     SELECT id 
     from inserted INTO tmp_id; 
```

# actionscript-3 - 预加载嵌入源的 swf

> ID：12481450
> 
> 赞同：1
> 
> 时间：2012-09-18T16:46:05.383
> 
> 标签：actionscript-3, embed, flash, preloading

我正在尝试预加载具有嵌入 swf 源的 swf。但它不想工作。我尝试了简单的预加载，但进度事件仅在加载后运行。任何想法？

```
public class MainShell extends MovieClip 
    {       
        [Embed(source = "Main.swf")]
        public var cs:Class;
        public var hsf8z42fdfd_as32:MovieClip;
        public function MainShell()
        {
            addEventListener(Event.ADDED_TO_STAGE, initialize, false, 0, true);
        }
        private function initialize(e:Event) {
            loaderInfo.addEventListener(IOErrorEvent.IO_ERROR, error, false, 0, true);
            loaderInfo.addEventListener(ProgressEvent.PROGRESS, progress, false, 0, true);
            loaderInfo.addEventListener(Event.COMPLETE, loaded, false, 0, true);
        }
        private function progress(e:ProgressEvent) {
            var done:Number = stage.loaderInfo.bytesLoaded;
            var total:Number = stage.loaderInfo.bytesTotal;
            var w:int = done / total * 100;
            loading.TT.text = String(w);
        }
        private function loaded(e:Event) {
            loading.parent.removeChild(loading);
            hsf8z42fdfd_as32 = new cs();
            hsf8z42fdfd_as32.addEventListener(Event.COMPLETE, onComplete);
        }
        private function error(e:IOErrorEvent):void{
            trace("Error!");
        }
        public function onComplete(e:Event) {
            addChild(hsf8z42fdfd_as32);
        } 
```

似乎进度功能仅在文件实际加载**后运行一次。**进度事件应该在加载时运行，那为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:17:24.980

您不能预加载嵌入对象。嵌入对象的概念是它们随容器一起提供。

这就好像您的 MainShell 包含 Main.swf。

这意味着一旦包含嵌入对象的类将由类加载器加载（在内存中），您将同时拥有它的所有依赖项（包括嵌入对象）。只有在执行完里面的代码之后，这就是为什么你看不到加载进度的原因。

内容加载器用于从服务器加载远程内容。有了这个，您将看到 HTTP GET 请求的进度（如果它尚未在浏览器缓存中）。

如果要显示加载进度条等，则不能使用嵌入内容。

HIH

M。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T20:37:43.730

我回到这里分享我对这个问题的解决方案。

这实际上是可能的。但是，如果您的项目使用库资产或时间线代码，该解决方案将不会那么容易工作。该解决方案要求您的项目主要存在于 AS3 类中，因此您可能必须调整代码才能使其正常工作。

首先，您需要下载 Flex SDK ( [http://www.adobe.com/devnet/flex/flex-sdk-download.html](http://www.adobe.com/devnet/flex/flex-sdk-download.html) )。您将使用它来将您的 as3 类编译为 .swf（Flex 不会弄乱您的项目，不用担心）。我们将在初始设置后回到这一点。

现在，我们将在 Flex SDK 中使用一个未记录的技巧：Frame 元数据标记。[http://www.bit-101.com/blog/?p=946](http://www.bit-101.com/blog/?p=946)上的博客更详细，但 Frame 标签基本上允许您嵌入类而不调用它们直到稍后时间，而不是对任何代码/嵌入。我们将在包定义之后，但在 Main 类的类定义之前坚持这一点，如下所示：

```
package {
    import flash.net.utils.ByteArray;
    import flash.display.Sprite;

    [SWF(width="720", height="480", frameRate="30", backgroundColor="#000000")] //we need this definition when compiling with mxmlc

    [Frame(factoryClass="com.aierou.game.Preloader")] //the factory class takes priority, so we'll use it as a preloader
    public class Main extends Sprite{

        [Embed(source="asset.swf")] //big asset to preload
        var assetClass:Class;

        public function Main(){
            // constructor code
        }
    }
} 
```

简而言之，这告诉编译器将 .swf 分成两帧，一帧用于预加载器，另一帧用于应用程序。

现在我们需要创建预加载器类来实际预加载游戏。应该如何做到这一点的一个例子：

```
package com.aierou.game{
    import flash.display.DisplayObject;
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.utils.getDefinitionByName;

    public class Preloader extends MovieClip{ //should extend MovieClip for onEnterFrame action
        public function Preloader() {
            stop();
            addEventListener(Event.ENTER_FRAME,onEnterFrame);
        }

        public function onEnterFrame(e:Event){
            var total:Number = this.stage.loaderInfo.bytesTotal;
            var loaded:Number = this.stage.loaderInfo.bytesLoaded;
            if(total==loaded){
                removeEventListener(Event.ENTER_FRAME,onEnterFrame);
                nextFrame();
                init();
            }else{
                //show preloader progress
            }
        }

        private function init(){
            //Add the main class to the stage it's done this way to prevent the compiler from sticking embeds at the start
            var mainClass:Class=Class(getDefinitionByName("Container"));
            if(mainClass){
                var app:Object=new mainClass();
                addChild(app as DisplayObject);
            }
        }
    }
} 
```

现在我们已经设置了主类和预加载器，我们准备编译我们的项目。这就是 Flex SDK 的用武之地。我们将在这部分使用命令行，因此建议将 SDK bin 文件夹添加到“路径”环境变量中。最佳实践包括在项目的根目录中设置一个 .bat 文件，以便更轻松地编译您的项目。我使用的 .bat 设置如下：

```
mxmlc -frame two Main -- Main.as
start /wait Main.swf 
```

mxmlc 将编译您的项目，将主类放在一个标有“二”的新框架中。主类中的 Frame 标签也会强制编译器将预加载器放在第一帧。

如果您没有收到任何编译器错误：恭喜！您已经为您的项目添加了一个真正的预加载器！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:25:55.183

尝试将 Event.COMPLETE 侦听器添加到**cs**实例的 contentloaderInfo 更改它

```
hsf8z42fdfd_as32.addEventListener(Event.COMPLETE, onComplete); 
```

经过

```
hsf8z42fdfd_as32.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete); 
```

# magento - 致命错误：在第 520 行的 /home/xxxxx/public_html/app/Mage.php 中找不到类“Turnkeye_All_Helper_Data”

> ID：12481451
> 
> 赞同：0
> 
> 时间：2012-09-18T16:46:08.190
> 
> 标签：magento

我 FTP 单步结帐，然后输入 magento admin cpanel 进行配置。它显示如下：“致命错误：第 520 行的 /home/xxxxx/public_html/app/Mage.php 中找不到类 'Turnkeye_All_Helper_Data'”如何解决问题，请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:23:10.987

检查您的模块/etc/config.xml 并确定模块名称。例如，可以说它为“yyy”。

现在检查你的模块/etc/system.xml，你可以看到 [translate="label" module="xxx"] 这里 module="xxx" 应该是 module="yyy"。

如果不是这样，请更改。保存详细信息后注销并再次登录。检查它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:16:10.077

转到第 520 行的 Mage.pgp 并输入以下代码：

```
$file = fopen('data.txt','a+');
fwrite($file, $varFrom520Line."\n");
fclose($file); 
```

再次执行，当此异常让您转到根文件夹并查找 data.txt 时，最后一行为您提供 Magento 正在搜索但未找到的内容。您应该尝试将正确的文件放在正确的工作位置，或者查看指向错误路径的代码并修复它。

# java - 通过工具探索 WSDL

> ID：12481452
> 
> 赞同：0
> 
> 时间：2012-09-18T16:46:14.760
> 
> 标签：java, web-services

我已经从客户端获得了 web 服务的 wsdl，现在我想测试那个 wsdl，从谷歌我探索了一个名为 Soap UI 的工具，通过它我们可以测试我们的 web 服务，它也会为我们生成客户端代码，请告诉我还有哪些其他工具可以帮助我从测试以及生成客户端代码或任何其他功能中探索 wsdl。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:13:34.253

如果您的主要目标是进行测试，恕我直言`SoapUI`是最好的工具。如果您需要以编程方式调用服务，在 Eclise 中执行它是最好的选择。

[您可以在SOAP Tools](http://www.soapclient.com/SoapTools.html)上查看此链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:48:24.960

例如，Eclipse 有一个[Web Services Explorer](http://wiki.eclipse.org/Using_Web_Service_Explorer_to_test_a_Web_service)工具，对于测试 Web 服务非常有用。您还可以使用它[生成客户端](http://www.eclipse.org/webtools/community/education/web/t320/Generating_a_client_from_WSDL.pdf)。

[您可以使用Axis](http://ws.apache.org/axis/java/user-guide.html#WSDL2JavaBuildingStubsSkeletonsAndDataTypesFromWSDL)或[Apache CXF](http://cxf.apache.org/docs/wsdl-to-java.html) WS 库轻松生成客户端`wsdl2java`。

# c# - XElement 在 C# 中使用 async/await 保存文件

> ID：12481456
> 
> 赞同：2
> 
> 时间：2012-09-18T16:46:37.237
> 
> 标签：c#, filestream, xelement, async-await, c#-5.0

我尝试使用异步/等待功能从 XElement 对象写入 xml 文件。但我意识到 XElement.Save() 不适用于异步/等待。

也许解决方案可以将 XElement.Save(Stream) 与 FileStream 对象一起使用...

所以，我写了一些代码如下，但很难用文件流来处理。

```
public async Task SaveAsync(XElement xml, string filename)
{
    using (var fs = new FileStream(filename, FileMode.Create))
    {
        xml.Save(fs);
        await fs.WriteAsync(**please_help_me**);
    }
} 
```

如何使用这种方法或有其他解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T17:20:29.507

如果您真的不想阻塞 IO（并挂起 ThreadPool 线程/您的线程），您可能需要使用临时 MemoryStream：

```
using(var ms = new MemoryStream())
using(var fs = new FileStream("myFile", FileMode.Create))
{
    xml.Save(ms);
    ms.Position = 0;
    await ms.CopyToAsync(fs)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:50:05.040

`XElement`没有任何方法可以异步编写自己，因此您使用它进行的任何调用都将是同步的。如果您需要使此方法异步（例如，这发生在 UI 线程中，并且您希望在后台线程中执行此操作，以便在保存 XML 时应用程序不会出现“冻结”），您可能想开始一个新任务，并将其保存在后台。

```
public async Task SaveAsync(XElement xml, string filename)
{
    await Task.Factory.StartNew(delegate
    {
        using (var fs = new FileStream("myFile", FileMode.Create))
        {
            xml.Save(fs);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-14T21:35:25.157

从[.NET Core 2.0](https://docs.microsoft.com/en-us/dotnet/api/system.xml.linq.xelement.saveasync?view=netcore-2.0)和[.NET Standard 2.1](https://docs.microsoft.com/en-us/dotnet/api/system.xml.linq.xelement.saveasync?view=netstandard-2.1)开始，[`XElement`](https://docs.microsoft.com/en-us/dotnet/api/system.xml.linq.xelement.saveasync)两者[`XDocument`](https://docs.microsoft.com/en-us/dotnet/api/system.xml.linq.xdocument.saveasync)都有`SaveAsync()`方法。因此，您现在可以执行以下操作：

```
public static async Task SaveAsync(this XElement xml, string filename, SaveOptions options = default, CancellationToken cancellationToken = default)
{
    // "await using" introduced in c# 8 / .NET Core 3.0+
    await using var stream =
        new FileStream(
        filename, FileMode.Create, FileAccess.Write, FileShare.None, bufferSize: 4096, 
        useAsync: true);

    await xml.SaveAsync(stream, options, cancellationToken);
} 
```

笔记：

*   在 .NET Core 3 中，`XDocument.SaveAsync()`（也可能`XElement.SaveAsync()`）仍然包含至少一个阻塞调用。请参阅[XDocument.SaveAsync 有一个阻塞调用 #29464](https://github.com/dotnet/runtime/issues/29464)。该问题应在[.NET 5](https://github.com/dotnet/runtime/pull/35233)中修复。

*   根据[文档](https://docs.microsoft.com/en-us/dotnet/api/system.io.filestream.-ctor?view=net-5.0#System_IO_FileStream__ctor_System_String_System_IO_FileMode_System_IO_FileAccess_System_IO_FileShare_System_Int32_System_Boolean_)，构造函数的`useAsync`参数`FileStream`

    > 指定是使用异步 I/O 还是使用同步 I/O。但是请注意，底层操作系统可能不支持异步 I/O，因此当指定 true 时，句柄可能会根据平台同步打开。当异步打开时，[BeginRead(Byte[], Int32, Int32, AsyncCallback, Object)](https://docs.microsoft.com/en-us/dotnet/api/system.io.filestream.beginread?view=net-5.0#System_IO_FileStream_BeginRead_System_Byte___System_Int32_System_Int32_System_AsyncCallback_System_Object_)和[BeginWrite(Byte[], Int32, Int32, AsyncCallback, Object)](https://docs.microsoft.com/en-us/dotnet/api/system.io.filestream.beginwrite?view=net-5.0#System_IO_FileStream_BeginWrite_System_Byte___System_Int32_System_Int32_System_AsyncCallback_System_Object_)方法在大读取或写入时性能更好，但对于小读取或写入它们可能要慢得多。如果应用程序旨在利用异步 I/O，请将 useAsync 参数设置为 true。正确使用异步 I/O 可以将应用程序加速多达 10 倍，但使用它而不为异步 I/O 重新设计应用程序可以将性能降低多达 10 倍。

    既然你知道你想写你的`XElement`异步，大概你已经为异步 I/O 设计了你的应用程序。但是，您可能希望在使用和不使用异步 IO 的情况下进行基准测试，以确认您没有损害性能。

演示小提琴[在这里](https://dotnetfiddle.net/qEepxF)。

# hibernate - 休眠查询返回无效值

> ID：12481458
> 
> 赞同：1
> 
> 时间：2012-09-18T16:46:47.627
> 
> 标签：hibernate

我有一个查询条件，它从 Oracle 中的数据库表返回结果。我得到了 UI 上除 Date 之外的所有字段的结果。我在搜索屏幕中输入 09/06/2006 作为日期。有人可以给我一个解决方案，看看下面的详细信息。下面是从 QueryCriteria 生成的查询，我在我的 JBoss 日志中得到它 -

```
16:39:48,286 INFO  [STDOUT] Hibernate: 

        select
            this_.SEQUENCE_NUMBER_N15 as SEQUENCE1_63_0_,
            this_.DATE_LAST_MODIFIED as DATE2_63_0_,
            this_.DATE_TIME_LOADED as DATE3_63_0_,
            this_.DATE_TIME_USER_DELETION as DATE4_63_0_,
            this_.DATE_TRANSACTION as DATE5_63_0_,
            this_.DB_CLEAN_CODE as DB6_63_0_,
            this_.EI_ACTION as EI7_63_0_,
            this_.FK_IAF_SQN15 as FK8_63_0_,
            this_.ID_CODE as ID9_63_0_,
            this_.INTERFACE_TRANSACTION_TYPE as INTERFACE10_63_0_,
            this_.ITEM as ITEM63_0_,
            this_.NON_ENTERPRISE_FLAG as NON12_63_0_,
            this_.OPTION_NUMBER as OPTION13_63_0_,
            this_.ORDER_BASE_NUMBER as ORDER14_63_0_,
            this_.ORDER_TYPE as ORDER15_63_0_,
            this_.OSP_NUMBER as OSP16_63_0_,
            this_.OSP_PREFIX as OSP17_63_0_,
            this_.PRIORITY as PRIORITY63_0_,
            this_.PRODUCT_LINE as PRODUCT19_63_0_,
            this_.PRODUCT_NUMBER as PRODUCT20_63_0_,
            this_.QUANTITY_ADDED as QUANTITY21_63_0_,
            this_.QUANTITY_OUTSTANDING as QUANTITY22_63_0_,
            this_.QUANTITY_USER_DELETED as QUANTITY23_63_0_,
            this_.REASON_CODE as REASON24_63_0_,
            this_.RECLASS_FIELD as RECLASS25_63_0_,
            this_.RECLASS_NEW_VALUE as RECLASS26_63_0_,
            this_.REFERENCE_ID as REFERENCE27_63_0_,
            this_.SALES_AREA_CODE as SALES28_63_0_,
            this_.SALES_FORCE as SALES29_63_0_,
            this_.SALES_OFFICE_CODE as SALES30_63_0_,
            this_.SCS_ENTITY_CODE as SCS31_63_0_,
            this_.SECTION_NUMBER as SECTION32_63_0_,
            this_.SUB_ENTITY as SUB33_63_0_,
            this_.SUB_ITEM as SUB34_63_0_,
            this_.USER_DELETION_COMMENT as USER35_63_0_,
            this_.USER_ID_DELETION as USER36_63_0_,
            1 as formula63_0_ 
        from
            EFLADM.INVENTORY_ADJUSTMENT this_ 
        where
            this_.SCS_ENTITY_CODE=? 
            and this_.DATE_TRANSACTION=? 
        order by
        this_.SEQUENCE_NUMBER_N15 asc 
```

我得到的例外是 -

```
org.hibernate.HibernateException: class java.lang.StringNot a valid Value
    at com.hp.fait.date.HPDate.nullSafeSet(HPDate.java:237)
    at org.hibernate.type.CustomType.nullSafeSet(CustomType.java:183)
    at org.hibernate.loader.Loader.bindPositionalParameters(Loader.java:1769)
    at org.hibernate.loader.Loader.bindParameterValues(Loader.java:1740)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1612)
    at org.hibernate.loader.Loader.doQuery(Loader.java:717)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)
    at org.hibernate.loader.Loader.doList(Loader.java:2294)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2172)
    at org.hibernate.loader.Loader.list(Loader.java:2167)
    at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1706)
    at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347)
    at com.hp.eiffel.eiffeltools.eiffelinventory.factory.InvAdjustmentFactory.getAllInvAdjustmentBySearchCriteria(InvAdjustmentFactory.java:42)
    at com.hp.eiffel.eiffeltools.eiffelinventory.manager.InvAdjustmentManager.getAllInvAdjustmentBySearchCriteria(InvAdjustmentManager.java:38)
    at com.hp.eiffel.eiffeltools.eiffelinventory.client.InvAdjustmentClient.getInvAdjustmentSummary(InvAdjustmentClient.java:39)
    at com.hp.eiffel.eiffeltools.eiffelinventory.action.InvAdjustmentAction.getBeanListImpl(InvAdjustmentAction.java:131)
    at com.hp.eiffel.eiffeltools.eiffelinventory.action.InvAdjustmentAction.searchInvAdjustmentResultListDetails(InvAdjustmentAction.java:280) 
```

谢谢，萨钦帕拉德卡。

# facebook - Facebook API 在没有弹窗授权的情况下从应用程序登录

> ID：12481461
> 
> 赞同：0
> 
> 时间：2012-09-18T16:47:16.740
> 
> 标签：facebook, flash, api, air

我正在开发一个基于闪光灯的照相亭应用程序。该应用程序在只有触摸屏显示器的系统上运行 - 没有键盘或鼠标。

我目前已经设置好了，这样用户就可以在完成后通过电子邮件发送他们定制的图片，但我希望也允许用户将他们的图片发布到 Facebook。

我已经下载了 AIR 桌面 Facebook API 并成功连接到 Facebook，但我不知道如何在登录帐户时摆脱登录/身份验证弹出窗口。

有没有办法直接编写用户登录脚本？

弹出窗口的问题是它与我的应用程序位于完全不同的窗口中，并且不受我的应用程序中的“软”屏幕键盘控制（因为它在没有键盘或鼠标的触摸屏上运行）。

有谁知道在没有弹出授权窗口的情况下从 Flash/AIR 应用程序发布到 Facebook 的任何方法？

与往常一样，我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:00:52.537

Facebook 明确不希望您在没有弹出窗口的情况下登录：这限制了以用户身份以编程方式登录（并以用户身份执行操作）的尝试。

一种可能的解决方案可能是使用完全重定向（如此[处](https://developers.facebook.com/docs/reference/dialogs/oauth/)和[此处](http://developers.facebook.com/docs/authentication/client-side/#no-jssdk)所述）并将参数指定为**page**或**touch**。`display`

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:22:45.460

经过多次寻找和尝试，我 99% 确定（我仍然抱有一点希望！）我想做的事情是不可能的。

您不能允许用户登录 Facebook 帐户并将图片从 Flash .exe 或桌面 AIR 应用程序使用 Facebook 桌面 API 在仅使用触摸屏且没有键盘或鼠标的信息亭类型系统上发布到他们的墙上。登录将在新窗口中打开，您将无法向其发送输入 - 显然您的应用程序中可能拥有的任何屏幕键盘都不会向新窗口输入。****

# html - 需要有关 html css 的帮助

> ID：12481462
> 
> 赞同：-3
> 
> 时间：2012-09-18T16:47:18.463
> 
> 标签：html, css, user-interface

我有两个链接`<a href="#">(...)</a>`，每个链接都包含一个用 div 和纯 css 创建的小徽标。

我想让它们可点击，但我不能。

这是HTML：

```
<div id="content">
    <div id="wrappAll">
        <div id="settings">
    <input type="checkbox" group="type" id="type" name="type">
    <label for="type">

            <div class="logoButton block">
                    <a href="#" ></a>
    <span class="miniblock"></span>
    <span class="miniblock"></span>
    <span class="miniblock"></span>
    <span class="miniblock"></span>
    <span class="miniblock"></span>
    <span class="miniblock"></span>
    <span class="miniblock"></span>
    <span class="miniblock"></span>
    <span class="miniblock"></span> 
</div>  
    <div class="logoButton bar" id="bar">
            <a href="#" ></a>
    <span class="minibar"></span>
    <span class="minibar"></span>
    <span class="minibar"></span>
</div>  
    <div id="photos">
         <span class="photo"></span>
      <span class="photo"></span> 
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>

      <span class="photo"></span>
        </div>  
        <div id="photos_long">
         <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
      <span class="photo"></span>
        </div>  
            </label> 
        </div>

    </div>
</div> 
```

这是CSS：

```
/**/
input{opacity:0;width:120px;background:#fff;height:70px;
position:absolute;
margin:-10px 10px;}
/**/
body,html{
width:100%;
height:100%;
margin:0;
padding:0;
background:#eee;}

#content{
width:600px;
height:650px;
margin:20px auto;
    background:whitesmoke;
    border-radius:10px;
    box-shadow:inset 0 0 1px #000;  
}
#wrappAll{}
#settings{
width:600px;
height:50px;
padding:10px;
margin-top:40px;
display:block;
background:linear-gradient(top, rgba(242,242,242,1) 0%,rgba(217,217,217,1) 100%);
border-radius:10px;
border-bottom-left-radius:0px;
border-bottom-right-radius:0px;
box-shadow:inset 0 0 1px #000;  
}
#photos{
width:600px;
height:auto;
position:absolute;
margin-top:70px;}
#photos_long{
width:600px;
height:auto;
position:absolute;
margin-top:70px;
display:none;}

#photos_long .photo{
width:400px;
height:380px;

margin:5px auto;}
a{
    display:block;
    position:absolute;
    margin:;
    width:42px;
    height:42px;

}
/* logo button */

.block{
margin:-10px 10px;
padding:10px;
transition:all 1s ease;} 
.bar {
margin:-10px -10px;
padding:10px;
transition:all 1s ease;}
.logoButton{
width:42px;
height:50px;
float:left;
border-left:1px solid #999;
box-shadow:-1px 0 0 #fff;
transition:all 1s ease;}
.miniblock{
display:block;
width:10px;
height:10px;
    background:#ccc;
float:left;
margin:2px;
border-radius:1px;
box-shadow:inset 0 0 5px #000;
transition:all .2s ease-out;}
.logoButton:hover > .miniblock{
background:#98c6Ea;
}

.minibar{
content:'';
display:block;
width:40px;
height:8px;
background:#ccc;
margin:5px auto;
border-radius:2px;
box-shadow:inset 0 0 5px #000;
transition:all .2s ease-out;}
.logoButton:hover > .minibar{
    background:#98c6Ea;
}
/**/
.photo{
display:block;
float:left;
width:180px;
height:182px;
margin:5px;
border-radius:2px;
border:1px solid #333;
background:url(https://twimg0-a.akamaihd.net/profile_images/2563882128/5tzcaa48i6oga47d7o3s_reasonably_small.png) no-repeat;
    background-size:100% 100%;
    border:5px solid #f9faf1;
    box-shadow:0 0 1px #333, inset 0 0 1px #666;
}

/**/

.logoButton:active{
box-shadow:inset -1px 0 10px #333;}
#type:checked ~ label[for=type] #photos {display:none;}
#type:checked ~ label[for=type] #photos_long {display:block;} 
```

此链接显示了这一点：http: [//cssdeck.com/labs/collab/jmjpxul4/1](http://cssdeck.com/labs/collab/jmjpxul4/1)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:00:39.310

可能是事件 onclick 和 javascript？

```
<div onclick="someFunction()">(....)</div>
<script type="text/javascript">
function someFunction()
{
.....
}
</script> 
```

# c++ - stringstream->rdbuf()->pubsetbuf 没有设置缓冲区

> ID：12481463
> 
> 赞同：8
> 
> 时间：2012-09-18T16:47:21.640
> 
> 标签：c++, stl, stringstream, stringbuffer

我正在尝试使用方法 pubsetbuf 修改字符串流对象的字符串缓冲区而不必复制字符串，但它不起作用。我正在关注[http://www.cplusplus.com/reference/iostream/streambuf/pubsetbuf/](http://www.cplusplus.com/reference/iostream/streambuf/pubsetbuf/)中的文档。这是我的示例代码：

```
#include <iostream>
#include <sstream>

int main(int argc, char* argv[])
{
    std::stringstream stream("You say goodbye");
    char replace[] = {"And I say hello"};
    std::cout << stream.str() << std::endl; // Checking original contents
    stream.rdbuf()->pubsetbuf(replace, 16); // Should set contents here
    std::cout << stream.str() << std::endl; // But don't :(
    return 0;
} 
```

输出是：

```
You say goodbye
You say goodbye 
```

我知道我可以使用stream.str(replace)，但是这个方法复制了'replace'的值，我不想复制。

我错过了什么？

更新：我正在使用 VS2010

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T16:55:19.480

不应该设置内容。`pubsetbuf`来电`virtual setbuf`

```
basic_streambuf<charT,traits>* setbuf(charT* s, streamsize n); 
```

> 15 效果：实现定义，除了 setbuf(0,0) 没有效果。
> 
> 16 回报：这个。

VS 2010\. 中没有虚拟方法`setbuf`的重载`basic_stringbuf`，它使用默认来自`basic_streambuf`

```
virtual _Myt *__CLR_OR_THIS_CALL setbuf(_Elem *, streamsize)
    {   // offer buffer to external agent (do nothing)
    return (this);
    } 
```

# javascript - Javascript 为图像一张一张地制作动画

> ID：12481464
> 
> 赞同：0
> 
> 时间：2012-09-18T16:47:27.687
> 
> 标签：javascript, arrays, for-loop, timeout, setinterval

大家好，我正在开发 Javascript Canvas 项目，这是一小段不起作用的代码，我只是想以 100 个时间延迟一张一张地为图像制作动画，但它会同时为所有图像制作动画。

```
for (var i = 0; i < queueIdArr.length; i++){ // queueIdArr.length = 4
    (function(i){
        var animInterval = window.setInterval((function(i){
            if (i == (queueIdArr.length - 1)){
                animate(queueIdArr[i], {opacity: 0}, animationDuration, "delete"); // my own function, it works fine. animate (id, new_properties, duration, callback);
                window.clearInterval(animInterval);
            } else {
                animate(queueIdArr[i], {opacity: 0}, animationDuration, "delete");
            }
        })(i), 100);
    })(i);
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:53:30.413

您正在`setInterval`为所有`queueIdArr`元素创建。第一个参数 of `setInterval`must be 是代码中的一个函数`(function (){})`正在被立即调用，并且 value of `(function (){})`is `undefined`。

以下可能会解决您的代码。

```
 var i =0;  
    var animInterval = window.setInterval(function(){
        if (i == (queueIdArr.length - 1)){
            animate(queueIdArr[i], {opacity: 0}, animationDuration, "delete"); 
            window.clearInterval(animInterval);
        } else {
            animate(queueIdArr[i], {opacity: 0}, animationDuration, "delete");
        }
        i++;
    }, 100); 
```

# git - 如何撤消 git update-index？

> ID：12481465
> 
> 赞同：26
> 
> 时间：2012-09-18T16:47:32.050
> 
> 标签：git, github, gitignore, git-index

我只是做了以下操作来在我的本地主机和我的生产环境中保留我的 config.php 文件的不同副本：

```
$ git update-index --assume-unchanged application/config/config.php 
```

不幸的是，我没有完全按照我应该的方式编写 config.php 文件，我需要将其反转，以便我可以进行更改、提交它，然后重新忽略该文件。

如何撤消`git update-index`命令？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-18T16:53:53.070

```
git update-index --no-assume-unchanged application/config/config.php 
```

注意`--no`前缀，风格上是双重否定。

# java - Hibernate 集和多对多索引列问题

> ID：12481469
> 
> 赞同：1
> 
> 时间：2012-09-18T16:47:37.743
> 
> 标签：java, hibernate

全部。我有以下代码。

```
 @ManyToMany(targetEntity = com.acs.gs.juror.model.security.SecurityGroup.class, cascade = CascadeType.ALL, fetch = FetchType.EAGER)
  @JoinTable(name = "REP_DSGN_SEC_GRP_LNK", 
      joinColumns = {@JoinColumn(name = "REPORT_DESIGN_UUID", referencedColumnName = "UUID")}, 
      inverseJoinColumns = {@JoinColumn(name = "SECURITY_GROUP_UUID", referencedColumnName = "UUID")})
  @IndexColumn(name="HIBERNATE_IDX")
  private List<SecurityGroup> groups; 
```

哪一天开始出现多袋问题。所以我通过将其更改为一组来修复它，因此：

```
 @ManyToMany(targetEntity = com.acs.gs.juror.model.security.SecurityGroup.class, cascade = CascadeType.ALL, fetch = FetchType.EAGER)
  @JoinTable(name = "REP_DSGN_SEC_GRP_LNK", 
      joinColumns = {@JoinColumn(name = "REPORT_DESIGN_UUID", referencedColumnName = "UUID")}, 
      inverseJoinColumns = {@JoinColumn(name = "SECURITY_GROUP_UUID", referencedColumnName = "UUID")})
  @IndexColumn(name="HIBERNATE_IDX")
  private Set<SecurityGroup> groups; 
```

这工作正常，直到我运行我的数据加载器并收到以下错误：

```
[java] Exception in thread "main" com.acs.gs.juror.dao.FailedInsertException: Unable to save object:ALTF Funds By Case|ALTF Funds By Case Report|java.util.GregorianCalendar[time=18000000,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="America/New_York",offset=-18000000,dstSavings=3600000,useDaylight=true,transitions=235,lastRule=java.util.SimpleTimeZone[id=America/New_York,offset=-18000000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=3,startMonth=2,startDay=8,startDayOfWeek=1,startTime=7200000,startTimeMode=0,endMode=3,endMonth=10,endDay=1,endDayOfWeek=1,endTime=7200000,endTimeMode=0]],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=1,YEAR=1970,MONTH=0,WEEK_OF_YEAR=1,WEEK_OF_MONTH=1,DAY_OF_MONTH=1,DAY_OF_YEAR=1,DAY_OF_WEEK=5,DAY_OF_WEEK_IN_MONTH=1,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0,SECOND=0,MILLISECOND=0,ZONE_OFFSET=-18000000,DST_OFFSET=0]|null|ALTFFundsByCase||PDF|[]|Lexptrain|Lexptrain|314||REPORTING|OUTPUT_TYPE|Browser|Browser|Jan 1, 1970 12:00:00 AM||null|null|null|null|null|null|null|null|null|null|null|
[java]  at com.acs.gs.juror.dao.hibernate.HibernateDAO.create(HibernateDAO.java:65)
[java]  at com.acs.gs.juror.dataload.cs.maricopa.LoadReportDesigns.loadData(LoadReportDesigns.java:116)
[java]  at com.acs.gs.juror.dataload.cs.maricopa.SeedDataLoader.loadData(SeedDataLoader.java:48)
[java]  at com.acs.gs.juror.dataload.cs.maricopa.SeedDataLoader.main(SeedDataLoader.java:18)
[java] Caused by: org.springframework.dao.DataIntegrityViolationException: Could not execute JDBC batch update; nested exception is org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
[java]  at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:636)
[java]  at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
[java]  at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
[java]  at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
[java]  at org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:694)
[java]  at com.acs.gs.juror.dao.hibernate.HibernateDAO.create(HibernateDAO.java:62)
[java]  ... 3 more
[java] Caused by: org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
[java]  at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:94)
[java]  at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
[java]  at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
[java]  at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:266)
[java]  at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:171)
[java]  at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
[java]  at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
[java]  at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)
[java]  at org.springframework.orm.hibernate3.HibernateAccessor.flushIfNecessary(HibernateAccessor.java:390)
[java]  at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:420)
[java]  ... 6 more
[java] Caused by: java.sql.BatchUpdateException: Cannot insert the value NULL into column 'HIBERNATE_IDX', table 'agilejury-thehl_MC.dbo.REP_DSGN_SEC_GRP_LNK'; column does not allow nulls. INSERT fails.
[java]  at net.sourceforge.jtds.jdbc.JtdsStatement.executeBatch(JtdsStatement.java:947)
[java]  at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeBatch(NewProxyPreparedStatement.java:1723)
[java]  at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
[java]  at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
[java]  ... 13 more 
```

我尝试删除 @IndexColumn 条目无济于事。Hibernate 无论如何都会创建该列。如果 hibernate 在没有我映射它的情况下创建它，我没有办法在其中存储一个值，那么它是 null 怎么会有问题呢？

我有点卡在这一点上，不知道如何继续。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:01:31.867

正如错误清楚地表明的那样。

> 引起：java.sql.BatchUpdateException：无法将值 NULL 插入列 'HIBERNATE_IDX'，表 'agilejury-thehl_MC.dbo.REP_DSGN_SEC_GRP_LNK'；列不允许空值。插入失败。

这表示您在集合中的一个`SecurityGroup`类型元素的字段定义为. 当一个元素被添加到.`groups``HIBERNATE_IDX``null``groups`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:01:27.127

向我们展示该表的 create table 语句，`REP_DSGN_SEC_GRP_LNK`我将向您展示您的空限制在哪里。去掉空限制，它不会抱怨它是空的。缺点是你会将空值塞进不应该为空的东西中。

您`List`不允许空值，这可以保护您免受此问题的影响。您将其更改为`Set`，它允许空值。所以有几个选择：

1.  修复 Set 中的数据不包含空值。
2.  放宽对空值的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:41:07.270

看起来这是另一个没人真正理解的 Hibernate 黑盒问题。我最终只是创建了自己的实体而不是加入稳定，这解决了问题。

# javascript - JavaScript/jQuery 和“顶级”函数

> ID：12481471
> 
> 赞同：3
> 
> 时间：2012-09-18T16:47:53.267
> 
> 标签：javascript, jquery

当我仔细阅读一个 jQuery 驱动的 JavaScript 源文件时，我看到函数定义如下：

```
$(document).ready(function() {
    ...
});

$(function {
    ...
}); 
```

我*想*我理解第一个：我假设它的功能是在下载整个页面后触发，是吗？如果不是请纠正我！

真正让我困惑的是第二个。这是一个匿名函数吗？它是如何/在哪里被调用的？它什么时候被调用（页面加载）？

我想我已经习惯了用*旧*方式编写 JavaScript 函数：

```
function myFunction() {
    ...
} 
```

然后我就在`myFunction`我需要的时候打电话。这种“旧”方式与 jQuery 的构造相比如何？感谢您帮助我理解这些困惑！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T16:49:52.613

第二个函数只是第一个方法的速记方法。两者都为文档的“就绪”事件注册回调。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

> 以下所有三种语法都是等效的：
> 
> $(document).ready(handler)
> $().ready(handler) （不推荐这样做）
> $(handler)

**编辑：**当 DOM 可以安全更新时，
该事件实际上会触发。`ready`该事件将在图像等外部资源完全加载之前引发，但大多数浏览器似乎在调用它之前等待外部 CSS 完成加载，因为脚本通常依赖于布局计算才能完成。简写方法 jQuery 方法非常常见，因为它为脚本提供了一种易于记忆和直接的方法，以便在脚本“准备好”时更改 DOM。

# ruby-on-rails-3 - HTTP GET 变成 POST 方法

> ID：12481472
> 
> 赞同：3
> 
> 时间：2012-09-18T16:47:55.770
> 
> 标签：ruby-on-rails-3, heroku, routes, thin, http-get

我正在使用 Ruby on Rails 创建我的应用程序并在 heroku 上使用 THIN 服务器。

目前使用 Rails 3.2.8

我遇到了我不理解的这种奇怪的行为。

使用导航栏中的 link_to 助手创建了一个链接。我想显式使用 HTTP GET 方法，所以我的 ruby​​ 代码是这样编写的：

```
<%=link_to "FAQ",help_path,:method=> :get %> 
```

生成的 html 如下所示：

```
<a data-method="get" href="/en/help">FAQ</a> 
```

如果我运行 rake 路由，help_path 如下所示：

```
help        (/:locale)/help(.:format)          static_pages#Help {:locale=>/en} 
```

但是，当我查看 Firebug 中的 URL 发生了什么（使用 Net 选项卡）时，看起来使用的是 POST 而不是 GET 方法。所以而不是看到：

```
GET help 
```

而是看到了这一点：

```
POST help 
```

如果我像这样删除对 get 方法的显式调用：

```
<%=link_to "FAQ",help_path %> 
```

结果是：

```
<a href="/en/help">FAQ</a> 
```

然后，在 firebug -> Net 中，我什至看不到这个 URL：GET help

在 URL 列下，它将改为显示：

```
? undefined 
```

如果 URL 未定义，heroku 上的 Rails 应用程序将尝试单独加载每个资产文件，而不是加载预编译的清单资产文件。

有没有人经历过这种情况？我无法完全弄清楚 Rails 或 heroku 或瘦服务器的神奇黑匣子在哪里可以改变 get 和 post 方法的行为。

非常感谢任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:58:14.583

我将开始说，我看不出为什么要创建 link_to 并明确声明 :get 作为 :method 的原因。无论如何，这是默认行为。

对于您的问题：您会看到一个 POST 请求，因为当您使用 link_to 的 :method 选项时，它会生成一个表单，该表单会发布到所需的 URL 和具有所需请求类型（POST/PUT/DELETE/GET）的 _method 隐藏输入。Rails 知道如何处理包含 _method 参数的 POST 请求并以正确的路由响应。在您的情况下 - 与 GET 操作匹配的路线。

[您可以在此处](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)阅读有关 link_to的更多信息。

编辑：

我更彻底地阅读了文档，看起来 :method 选项不支持 :get 作为值。

# javascript - 如何响应容器的点击事件？

> ID：12481473
> 
> 赞同：1
> 
> 时间：2012-09-18T16:47:57.567
> 
> 标签：javascript, jquery

假设我有一个包含 2 个链接的列表项：

```
<li>
   <a href="foo.htm">Foo</a>
   <a href="bar.htm">Bar</a>
</li> 
```

如果用户单击“Foo”，我想将用户发送到 foo.htm。如果用户单击“栏”的任何部分`<li>`或“栏”，我想将用户发送到 bar.htm。我担心如果我将点击事件侦听器附加到`<li>`点击“Foo”的点击会将用户发送到 bar.htm。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T16:50:29.950

您是否尝试过使用 event.stopPropagation()

```
$("a[href='foo.html']").click(function (event) {
    event.stopPropagation()
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:24:08.953

像这样的东西。stopPropagation 不应该是必需的，因为我知道你希望链接到指定的位置。

```
$("li").click(function(e){
    //just in case the click on li is processed before link click
    if($("a[href='foo.html']").is(e.target)){
        window.location.href = "foo.html";
    }
    else {
        window.location.href = "bar.html";
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:11:43.217

以下代码应该可以解决您的问题。

```
$("li").click(function (e) {
            if(e.target.nodeName == "A" && e.target.href.indexOf("foo.html") !== -1){
                //send foo.html
            }
            event.stopPropagation();
            // send bar.html
           return false.
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:15:48.030

您必须`event.stopPropagation()`在 Foo 和 Bar 的处理程序上使用，请参阅[**此处的工作解决方案**](http://jsfiddle.net/8cduk/3/)

**为方便起见，在此处粘贴 jsfiddle 代码**：

HTML：

```
<li id="l1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <a href="http://www.google.es/q=foo" id="foo">Foo</a>
   <a href="http://www.google.es/q=bar" id="bar">Bar</a>
</li> 
```

JAVASCRIPT：

```
$('#foo').bind('click',function(event) {
    event.stopPropagation();
});
$('#bar').bind('click',function(event) {
    event.stopPropagation();
});
$('#l1').bind('click',function() {
    window.location.href = $('#bar').attr('href');
});​ 
```

# c# - 如何从 Datalist 中的 TextBox 获取文本值

> ID：12481476
> 
> 赞同：0
> 
> 时间：2012-09-18T16:48:10.130
> 
> 标签：c#, asp.net, textbox, datalist

当我单击 LinkBut​​ton 时，我试图从 TextBox 中检索文本值，这两者都在 DataList 的 ItemTemplate 中。但它返回一个空值。

这是aspx页面中datalist的代码：

```
 <asp:DataList ID="DataList1" runat="server" Width="100%" DataKeyField="UserId" OnItemCommand="itemcommand"
                OnItemDataBound="Data_Bind">
                <ItemTemplate>
                    <table style="width: 100%">
                        <tr>
                            <td>
                                <a href="<%#System.String.Format("ViewProfile.aspx?aid={0}",Eval("UserId")) %>">
                                    <asp:Image ID="Img" Width="100px" Height="80px" BorderStyle="Inset" BorderWidth="2px"
                                        BorderColor="Aqua" runat="server" ImageUrl='<%#System.String.Format("../Content/Upload/{0}", Eval("UserDetail.UserPhoto")) %>' />
                            </td>
                            <td >
                                <asp:Label ID="name" runat="server" Text='<%#Eval("UserDetail.Firstname")%>'></asp:Label>
                                <asp:Label ID="lastname" runat="server" Text='<%#Eval("UserDetail.Lastname")%>'></asp:Label>
                            </td>
                            <td>
                                <asp:Label ID="post" runat="server" Text='<%#Eval("Post.post")%>'></asp:Label>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <asp:LinkButton ID="Like" runat="server" CommandName="onLike" CommandArgument='<%# Eval("Post.PostId") %>'>Like</asp:LinkButton>
                                <asp:Label ID="lk" runat="server"></asp:Label>
                                <asp:LinkButton ID="Share" runat="server" CommandName="onShare" CommandArgument='<%# Eval("Post.PostId") %>'>Share</asp:LinkButton>
                                <asp:Label ID="sh" runat="server"></asp:Label>
                            </td>
                        </tr>
                        <tr>
                        <td colspan="3">
                          <asp:TextBox ID="txtcomment"  runat="server" Height="40px" Text="abc" Width="600px"></asp:TextBox>
                          <input type="text" id="cmnt1" name="cmnt1" runat="server" />
                           &nbsp;
                            <asp:LinkButton ID="Comment" runat="server" CommandName="onComment" CommandArgument='<%# Eval("Post.PostId") %>'>Comment</asp:LinkButton>
                        </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <asp:DataList ID="DataList2" runat="server">
                                    <ItemTemplate>
                                        <table>
                                            <tr>
                                                <td>
                                                    <asp:Image ID="Img2" Width="50px" Height="40px" BorderStyle="Inset" BorderWidth="2px"
                                                        BorderColor="Aqua" runat="server" ImageUrl='<%#System.String.Format("../Content/Upload/{0}", Eval("UserDetail.UserPhoto")) %>' />
                                                    <asp:Label ID="fname" runat="server" Text='<%#Eval("UserDetail.Firstname")%>'></asp:Label>
                                                    <asp:Label ID="lname" runat="server" Text='<%#Eval("UserDetail.Lastname")%>'></asp:Label>
                                                </td>
                                                <td>
                                                    <asp:Label runat="server" ID="cmnts" Text='<%#Eval("Comments.Comment")%>'></asp:Label>
                                                </td>
                                            </tr>
                                        </table>
                                    </ItemTemplate>
                                </asp:DataList>
                            </td>
                        </tr>
                    </table>
                </ItemTemplate>

            </asp:DataList> 
```

这是背后的代码：

```
 protected void itemcommand(object source, DataListCommandEventArgs e)
    {
        if (e.CommandName == "onLike")
        {
            var k = e.CommandArgument;

            User ObjUser = new User();
            ObjUser = (User)Session["user"];
            ObjUser.Post.PostId = Convert.ToInt64(k);

            PostService.OnLike(ObjUser);

            DataList1.DataSource = PostService.GetPosts(ObjUser);
            DataList1.DataBind();
        }
        if (e.CommandName == "onComment")
        {
            var k = e.CommandArgument;

            TextBox cmnt = (TextBox) e.Item.FindControl("txtcomment");
            HtmlInputText cmnt1 = (HtmlInputText)e.Item.FindControl("cmnt1");
            User ObjUser = new User();
            ObjUser = (User)Session["user"];
            ObjUser.Post.PostId = Convert.ToInt64(k);
            ObjUser.Comments.Comment = cmnt.Text;

            PostService.OnComment(ObjUser);

            DataList1.DataSource = PostService.GetPosts(ObjUser);
            DataList1.DataBind();

        }
        if (e.CommandName == "onShare")
        {
            var k = e.CommandArgument;

            User ObjUser = new User();
            ObjUser = (User)Session["user"];
            ObjUser.Post.PostId = Convert.ToInt64(k);

            PostService.OnShare(ObjUser);

            DataList1.DataSource = PostService.GetPosts(ObjUser);
            DataList1.DataBind();

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T20:26:31.993

```
asp:TextBox ID="txtQuantity"  runat="server"></asp:TextBox

string Key = Datalist.DataKeys[e.Item.ItemIndex].ToString();

TextBox Textboxvalue = (TextBox)(e.Item.FindControl("txtQuantity"));

//You will get the value in Textboxvalue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:40:21.890

FindControl 不会递归搜索控件。它只会在当前子项中查找控件。鉴于您使用的结构，您将不得不在项目的子控件中进行搜索。

您必须编写自己的递归函数来搜索所有子控件以查找此控件。

或者您可以编写一个扩展方法，以便您可以使用它来递归搜索您需要的任何地方。我在[这里](http://geekswithblogs.net/QuandaryPhase/archive/2009/05/06/asp.net-recursive-findcontrol-amp-extension-methods.aspx)找到的这个功能应该会有所帮助。

```
public static class ControlExtensions
{
    public static Control FindControlRecursive(this Control control, string id)
    {
        if (control == null) return null;
        //try to find the control at the current level
        Control ctrl = control.FindControl(id);
        if (ctrl == null)
        {
            //search the children
            foreach (Control child in control.Controls)
            {
                ctrl = FindControlRecursive(child, id);
                if (ctrl != null) break;
            }
        }
        return ctrl;
    }
} 
```

# android - 网页在姜饼上不可用

> ID：12481481
> 
> 赞同：1
> 
> 时间：2012-09-18T16:48:27.847
> 
> 标签：android, webview, android-webview, android-2.3-gingerbread

如果我在 Gingerbread Emulator 上运行我的代码，它会给我：

网页不可用，下面列出了页面的源代码。

如果我在 ICS 或 JB（物理电话和模拟器）上运行该应用程序，它确实可以工作：

```
 webview = new WebView(InterfacciaPrincipale.this);

    webview.getSettings().setBuiltInZoomControls(true);
    webview.loadData(Html.getHtml(), "text/html", "UTF-8");
    webview.getSettings().setJavaScriptEnabled(true);
    webview.setWebViewClient(new WebViewClient() {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            new M("Caricamento", getApplicationContext());
            Log.v("ESSE3", "shouldOverrideUrlLoading()");
            System.out.println(url);
            try {
                Html.setHtml(Connessione.generaStringaHTML(Connessione.getUrl(url)));
            } catch (IOException e) {
                e.printStackTrace();
            }
            System.out.println(Html.getHtml());
            webview.loadDataWithBaseURL(null,Html.getHtml(), "text/html", "UTF-8",null);
            return true;

        }
    }); 
```

是的，有 INTERNET 权限（它适用于 ICS 和 JB...）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T08:28:19.237

代替：

```
webview.loadData(Html.getHtml(), "text/html", "UTF-8"); 
```

采用

```
webview.loadDataWithBaseURL(null,Html.getHtml(), "text/html", "UTF-8",null); 
```

在姜饼上。这解决了我的问题。

# matlab - CUFFT 库在 CUDA 3 中工作，但在 CUDA 4 中给出运行时错误无效值

> ID：12481483
> 
> 赞同：2
> 
> 时间：2012-09-18T16:48:30.170
> 
> 标签：matlab, cuda, mex

我已在 CUDA 3 中成功使用了 CUFFT 库，但相同的代码不会在 CUDA 4 中运行。使用 CUDA 4 时，我在 FFT 执行时收到运行时错误 (CUDA_INVALID_VALUE)。这是一个前向实数到复数的一维变换。我在 CUDA 3 和 CUDA 4 之间的 CUFFT 文档中看到的唯一变化是添加了 FFTW 兼容模式。我将其设置为本机模式。

```
void mexFunction( int nlhs, mxArray *plhs[],
              int nrhs, const mxArray *prhs[])
{
int Nfft, Navg, iAvg, N, n1, n2, Npsd, size[2];

float *hReal;
float *pPxx;

float *dReal;
float *dAvg, *dSum, *dWindow;
float U;
long lAvg, lSum, lWindow;
cufftHandle            hPlan;
cufftComplex *dComplex;
cufftResult result;

int nBlocks, blockSize;

if (nrhs == 12)
{
Nfft =      mxGetScalar(prhs[0]);
blockSize = mxGetScalar(prhs[1]);
Navg =      mxGetScalar(prhs[2]);
iAvg =      mxGetScalar(prhs[3]);
U =         mxGetScalar(prhs[4]);
n1 =        mxGetScalar(prhs[5]);
n2 =        mxGetScalar(prhs[6]);
hPlan =     (cufftHandle)mxGetScalar(prhs[7]);
hReal =     (float *)mxGetData(prhs[8]);
lWindow =   (long)mxGetScalar(prhs[9]);
lAvg =      (long)mxGetScalar(prhs[10]);
lSum =      (long)mxGetScalar(prhs[11]);
}
else
    mexErrMsgTxt("fftcuda: Function requires 12 inputs");

// pointers to GPU arrays
dWindow = (float *)lWindow;
dAvg = (float *)lAvg;
dSum = (float *)lSum;

// size of output array
N = Nfft/2 + 1;
Npsd = n2 - n1 + 1;
size[0] = 1;
size[1] = Npsd;

/* Allocate working arrays on device */
cudaMalloc( (void**)&dReal,sizeof(float)*Nfft);
cudaMalloc( (void**)&dComplex,sizeof(cufftComplex)*N);

/* Copy input array to the device */
cudaMemcpy( (void*)dReal,(void*)hReal,sizeof(float)*Nfft,cudaMemcpyHostToDevice);

// setup for cuda functions
nBlocks = (int)(Nfft/blockSize);

/* multiply input array by window */
cudaMult <<< nBlocks, blockSize >>> (dReal,dWindow,dReal,Nfft);

/* Execute FFT on device */
     result = cufftExecR2C(hPlan, (cufftReal *)dReal, dComplex);

if (result == CUFFT_SETUP_FAILED)
    mexErrMsgTxt("CUFFT library failed to initialize.");
else if (result == CUFFT_INVALID_PLAN )
    mexErrMsgTxt("The hPlan parameter is not a valid handle.");
else if (result == CUFFT_INVALID_VALUE )
    mexErrMsgTxt("The idata or odata parameter is not valid.");
else if (result == CUFFT_EXEC_FAILED )
    mexErrMsgTxt("CUFFT failed to execute the transform on GPU.");

// setup for cuda functions
nBlocks = (int)(Npsd/blockSize) + (Npsd%blockSize);

/* Compute absolute value */
cudaAbs <<< nBlocks, blockSize >>> (&dComplex[n1-1],dReal,Npsd);

if (nlhs != 1)
    mexErrMsgTxt("fftcuda: Function requires 1 output: float pPxx");

plhs[0]=mxCreateNumericArray(2,size,mxSINGLE_CLASS,mxREAL);

pPxx = (float *)mxGetData(plhs[0]);

/* Copy result back to host */
cudaMemcpy( (void*)pPxx, (void*)dReal, sizeof(float)*Npsd,cudaMemcpyDeviceToHost);

/* free working arrays from gpu memory */
cudaFree((void*)dReal);
cudaFree((void*)dComplex);

return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:21:36.387

CUFFT 库不只有一个版本。由于 CUFFT 是 CUDA Toolkit 的一部分，因此库的更新版本随 CUDA Toolkit 的每个新版本一起发布。

如果您尝试将旧版本的库与较新版本的 CUDA 一起使用，那几乎肯定是您的问题。只需使用与您的 CUDA 工具包相同版本的 CUFFT，它应该可以工作。

# jquery - 我可以使用什么 jquery 幻灯片来循环浏览和突出显示图像？

> ID：12481487
> 
> 赞同：0
> 
> 时间：2012-09-18T16:48:57.147
> 
> 标签：jquery, css, gallery, slideshow, photo

我正在寻找一个循环播放/突出显示这些照片的 Jquery 画廊/幻灯片：http: [//awesomescreenshot.com/0cagg3820](http://awesomescreenshot.com/0cagg3820)。

该名称将出现在活动图像上，并且它们不会是全尺寸图像，可能只是将每个缩略图链接到 url/页面的选项。

有没有人使用或遇到过任何我可以修改或作为基础工作的画廊？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:52:31.520

我认为[Fancy Box 插件](http://fancybox.net)可以帮助你。一探究竟。

# eclipse - Maven 错误 :: 包 org.springframework.aop.support 不存在

> ID：12481496
> 
> 赞同：0
> 
> 时间：2012-09-18T16:49:35.317
> 
> 标签：eclipse, spring, maven

当我在我的项目上运行 maven clean install

它在所有类中都出现以下错误

包 org.springframework.aop.support 不存在

但是我的 POM 文件中有 spring 所需的所有依赖项。

请帮我找出原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:40:36.907

您可能想查看这个问题：[Spring 3.0 要包含哪些 Maven 依赖项？](https://stackoverflow.com/questions/2237537/which-maven-dependencies-to-include-for-spring-3-0)

我知道您说您拥有所有依赖项，但是如果不显示 POM 文件，则很难确定它是否有任何问题。确保您的 spring-aop 依赖项如下所示：

```
 <dependency>     
        <groupId>org.springframework</groupId>     
        <artifactId>spring-aop</artifactId>     
        <version>${org.springframework.version}</version> 
    </dependency> 
```

基本上，从 Spring 3.0 版开始，没有一个依赖项包含所有内容。您需要根据您使用的内容和需要的内容进行混合和匹配。以下网站很好地列出了您何时需要每个依赖项：http: [//blog.springsource.org/2009/12/02/obtaining-spring-3-artifacts-with-maven/](http://blog.springsource.org/2009/12/02/obtaining-spring-3-artifacts-with-maven/)

比如上面提到spring-beans依赖spring-core，spring-context依赖spring-core、spring-expression、spring-aop、spring-beans等。

# adobe-indesign - 识别 idml 中视觉元素的坐标

> ID：12481502
> 
> 赞同：5
> 
> 时间：2012-09-18T16:49:50.117
> 
> 标签：adobe-indesign, idml

我需要处理 Indesign Idml 文件，生成图像，并将其他元素覆盖在 html 中的某些元素上。

给定一个 Indesign Idml 文件（它是一个压缩的 xml 包）并在该文件中给定一个视觉元素（通过 xml 中的标签）。有没有办法找到视觉元素落在图像上的什么坐标？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T07:56:22.883

IDML 文档中图像的容器层次结构如下：

文档 [包含] > 传播 > PageItem > PlacedImage。Pages 不用作容器，PageItems 存储在展开坐标中，因此我们可以忘记 Document 和 Page 元素。如果您可以在展开坐标中找到已放置的图像，并将这些坐标重新设置基数，使 0,0 位于屏幕的左上角，则您可以像在 InDesign 文档中一样放置图像。

页面项目（包含图像）在 IDML 中没有几何边界。它的边界存储为 PathGeometry 标记中的 PathPointType 对象数组，如下所示：

```
<Properties>
            <PathGeometry>
                <GeometryPathType PathOpen="false">
                    <PathPointArray>
                        <PathPointType Anchor="-32.04 -35.04" LeftDirection="-32.04 -35.04" RightDirection="-32.04 -35.04" />
                        <PathPointType Anchor="-32.04 35.04" LeftDirection="-32.04 35.04" RightDirection="-32.04 35.04" />
                        <PathPointType Anchor="32.04 35.04" LeftDirection="32.04 35.04" RightDirection="32.04 35.04" />
                        <PathPointType Anchor="32.04 -35.04" LeftDirection="32.04 -35.04" RightDirection="32.04 -35.04" />
                    </PathPointArray>
                </GeometryPathType>
            </PathGeometry>
        </Properties> 
```

假设您的页面项目周围的边框是一个矩形，您可以通过获取最低/最高点值来自己计算边界。然后你需要项目变换，

```
ItemTransform="1 0 0 1 509.27559055100005 -123.76377952749999" 
```

...并且您需要考虑 IDML 认为 0,0 的位置（这是变换的起源）。

在 X 轴上，0 将是绑定位置（它是可变的 - 在单页文档中，它通常是跨页的左侧边缘，但在两页文档中，它可能是跨页的中心）。这是您需要页面的地方。BindingLocation 表示为一个整数（0 表示在第一页之前，1 表示在第一页和第二页之间，等等）。您可以通过将前几页的 ItemTransforms 相加来找到它的坐标。

在 Y 轴上，出于 Adob​​e 最熟悉的原因，0 是展开的垂直中心（不是您可能期望的顶部或底部）。

IDML 文档有坐标示例：[http](http://www.photoshopelementsmac.com/devnet/indesign/documentation.html) ://www.photoshopelementsmac.com/devnet/indesign/documentation.html 包括从一个坐标空间到另一个坐标空间的翻译。

此外，在页面项目（给出几何边界）中，放置的图像有自己的一组图形边界，可以进一步偏移它，以及它自己的 ItemTransform

因此，要回答您的问题，您需要解压缩 IDML zip 文件，在 XML 中找到图像，然后进行类似的汇总：

```
// Pseudo-code:
// Calculate PageItem GeometricBounds First as noted above
X: (Spread.BindingLocation) + Spread.ItemTransform.tx + PageItem.itemTransform.tx + PageItem.GeometricBounds.Left + PlacedImage.ItemTransform.tx + PlacedImage.GraphicBounds.Left

Y: (Half Spread Height) + Spread.ItemTransform.ty + PageItem.itemTransform.ty + PageItem.GeometricBounds.Top+ PlacedImage.ItemTransform.ty + PlacedImage.GraphicBounds.Top 
```

哦，还有一件事：所有 IDML 坐标都以点为单位。如果要以像素为单位获得结果，则需要将所有值除以 72 除以屏幕的 PPI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:00:41.953

页面上的每个元素都`<PageItem>`使用该`ItemTransform`属性相对于其包含的元素来缩放、旋转、剪切和变换自身（从技术上讲，PageItem XML 元素不存在，但可以是 Rectangle、Oval 等元素）。

在 中`<PageItem>`，其形状由`<PathGeometry>`元素及其包含的元素确定（[IDML 参考](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs55-docs/IDML/idml-specification.pdf)通过示例对此进行了详细描述），另请参阅 JcFx 的答案。

**基于 IDML 规范的大量更正答案：**感谢 JcFx

# java - Java 和 Android 中 Calendar 类的不同行为

> ID：12481505
> 
> 赞同：21
> 
> 时间：2012-09-18T16:50:00.260
> 
> 标签：java, android, calendar

我正在检索一年中第一周的日期，我发现了非常奇怪的行为。

我在 Java 控制台应用程序和 Android 模拟器中测试了以下代码片段，它产生了不同的输出。

```
 Calendar cal = Calendar.getInstance();
    cal.set(Calendar.WEEK_OF_YEAR, 1);
    cal.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
    System.out.println(sdf.format(cal.getTime())); 
```

产生了以下输出

Android 日志猫：2012/09/17（不正确）

Java 控制台：2012/01/01（正确）

奇怪的是，如果我在 Android 和 Java 中都使用以下代码，它会产生相同的正确输出。唯一的区别是我从上面的代码中交换了第二行和第三行。

```
 Calendar cal = Calendar.getInstance();
    cal.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
    cal.set(Calendar.WEEK_OF_YEAR, 1);
    System.out.println(sdf.format(cal.getTime())); 
```

Android日志猫：2012/01/01（正确）

Java 控制台：2012/01/01（正确）

我很想知道这件事。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T23:29:44.030

似乎 Calendar 类内部有两个数据容器。

`protected long time`

`protected int[] fields`

因此，当您调用 时`cal.set(Calendar.WEEK_OF_YEAR, 1)`，您会更改 中的值`fields`，而不是`time`类中的值。

在 Java API 中

> 受保护的抽象 void computeFields()
> 
> 将当前毫秒时间值 time 转换为 fields[] 中的日历字段值。这允许您将日历字段值与为日历设置的新时间**同步。**时间不先重新计算；要重新计算时间，然后是字段，请调用 complete() 方法。

我认为在 Android 的第一种情况下`computeFields()`不会在内部调用。

为了检查我的理论，我测试了以下代码：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy.MM.dd");
Calendar cal = Calendar.getInstance();
System.out.println(cal);
System.out.println(sdf.format(cal.getTime()));
cal.set(Calendar.WEEK_OF_YEAR, 1);
System.out.println(cal);
System.out.println(sdf.format(cal.getTime()));
cal.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
System.out.println(cal);
System.out.println(sdf.format(cal.getTime())); 
```

日志猫：

> java.util.GregorianCalendar[ **time=1348010308802,areFieldsSet=true** ,lenient=true,zone=org.apache.harmony.luni.internal.util.ZoneInfo["null",mRawOffset=0,mUseDst=false],firstDayOfWeek=1 ,minimalDaysInFirstWeek=4,ERA==1,YEAR==2012,MONTH==8, **WEEK_OF_YEAR==38** ,WEEK_OF_MONTH==4,DAY_OF_MONTH==18,DAY_OF_YEAR==262, **DAY_OF_WEEK==3** ,DAY_OF_WEEK_IN_MONTH==3, AM_PM==1,HOUR==11,HOUR_OF_DAY=23,MINUTE==18,SECOND==28,MILLISECOND==802,ZONE_OFFSET==0,DST_OFFSET==0]
> 
> 2012.09.18
> 
> java.util.GregorianCalendar[ **time=?,areFieldsSet=false** ,lenient=true,zone=org.apache.harmony.luni.internal.util.ZoneInfo["null",mRawOffset=0,mUseDst=false],firstDayOfWeek=1 ,minimalDaysInFirstWeek=4,ERA==1,YEAR==2012,MONTH==8, **WEEK_OF_YEAR==1** ,WEEK_OF_MONTH==4,DAY_OF_MONTH==18,DAY_OF_YEAR==262, **DAY_OF_WEEK==3** ,DAY_OF_WEEK_IN_MONTH==3, AM_PM==1,HOUR==11,HOUR_OF_DAY=23,MINUTE==18,SECOND==28,MILLISECOND==802,ZONE_OFFSET==0,DST_OFFSET==0]
> 
> 2012.01.03
> 
> java.util.GregorianCalendar[ **time=?,areFieldsSet=false** ,lenient=true,zone=org.apache.harmony.luni.internal.util.ZoneInfo["null",mRawOffset=0,mUseDst=false],firstDayOfWeek=1 ,minimalDaysInFirstWeek=4,ERA==1,YEAR==2012,MONTH==8, **WEEK_OF_YEAR==1** ,WEEK_OF_MONTH==4,DAY_OF_MONTH==18,DAY_OF_YEAR==262, **DAY_OF_WEEK==1** ,DAY_OF_WEEK_IN_MONTH==3, AM_PM==1,HOUR==11,HOUR_OF_DAY=23,MINUTE==18,SECOND==28,MILLISECOND==802,ZONE_OFFSET==0,DST_OFFSET==0]
> 
> 2012.09.16

正如我们在上面看到的，字段中的值发生了变化，但是内部时间被表示为`?`，说明它`time`没有与 同步`fields`。

`time`您使用方法未同步`getTime()`并将其打印出来。

我认为 Android 中的日历旨在延迟同步，直到真正需要它。

**添加**

我在 Java API 中发现了以下内容：

> 可以使用三种方法更改日历字段：set()、add() 和 roll()。
> 
> set(f, value) 将字段 f 更改为 value。此外，它还设置了一个内部成员变量来指示字段 f 已更改。**尽管字段 f 立即更改，但在下一次调用 get()、getTime() 或 getTimeInMillis() 之前，不会重新计算日历的毫秒数**。因此，多次调用 set() 不会触发多次不必要的计算。作为使用 set() 更改字段的结果，其他字段也可能更改，具体取决于字段、字段值和日历系统。此外，**get(f) 不一定会在重新计算字段后返回值。具体由具体的日历类决定。**

**添加**

为了检查**“细节由具体的日历类决定”**是否属实，我检查了 Dalvik 和 JDK 6 的实际代码。

## Dalvik's Calendar中的set方法

来自[https://www.codeaurora.org/git/projects/qrd-gb-dsds-7225/repository/revisions/cc99b832a941dc8cbb86f1607d04eb87935ddbfd/entry/android/dalvik/libcore/luni/src/main/java/java/util/Calendar .java](https://www.codeaurora.org/git/projects/qrd-gb-dsds-7225/repository/revisions/cc99b832a941dc8cbb86f1607d04eb87935ddbfd/entry/android/dalvik/libcore/luni/src/main/java/java/util/Calendar.java)

```
public void set(int field, int value) {
    fields[field] = value;
    isSet[field] = true;
    areFieldsSet = isTimeSet = false;
    if (field > MONTH && field < AM_PM) {
        lastDateFieldSet = field;
    }
    if (field == HOUR || field == HOUR_OF_DAY) {
        lastTimeFieldSet = field;
    }
    if (field == AM_PM) {
        lastTimeFieldSet = HOUR;
    }
} 
```

## JDK 6 日历中的设置方法

```
public void set(int field, int value) {
    if (isLenient() && areFieldsSet && !areAllFieldsSet) {
        computeFields();
    }
    internalSet(field, value);
    isTimeSet = false;
    areFieldsSet = false;
    isSet[field] = true;
    stamp[field] = nextStamp++;
    if (nextStamp == Integer.MAX_VALUE) {
        adjustStamp();
    }
} 
```

具体实现方式大相径庭。要找出问题的确切原因，您应该详细查看这两种实现。

# jsf-2 - 将 FacesMessage 传递到下一页

> ID：12481506
> 
> 赞同：4
> 
> 时间：2012-09-18T16:50:00.887
> 
> 标签：jsf-2

我正在寻找一种优雅的 JSF 方式来执行此操作，并且想知道是否有任何普遍接受的做法来执行此操作。

**当我从一个页面导航到另一个页面时，我希望新页面在从最后一页传输的h:message**组件（实际上是**p:message**但它应该是同一件事）中 显示一个 FacesMessage 。

例如，如果用户单击“创建文档”按钮，它会在成功时导航到新页面，并在新页面上显示成功消息。我希望我所有的数据库更改操作都以这种方式运行。

**FacesContext**似乎清除了导航上的所有消息，所以我最接近的解决方案如下所示：

1.  将 FacesMessage 对象存储在会话 bean 中。
2.  在消息 bean 中创建一个方法**checkMessage** ，该方法调用**FacesContext.getCurrentInstance().addMessage(..)**并从消息 bean 中删除消息。
3.  在目标页面中放置一个对**checkMessage**的 EL 引用。
4.  在目标页面中 放置一个**p:message 。**

这似乎有点强迫 - 有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T21:31:47.223

Faces 消息确实是请求范围的。

只需使用新的 JSF 2.0 Flash 范围[`Flash#setKeepMessages()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/Flash.html#setKeepMessages%28boolean%29)：

```
context.addMessage(clientId, message);
context.getExternalContext().getFlash().setKeepMessages(true);
// ... 
```

这在当前的 Mojarra 2.1.13 版本中只有一个警告：重定向必须发生在 URL 中的相同“文件夹”中。这在即将到来的 2.1.14 中得到修复。另见[问题 2136](http://java.net/jira/browse/JAVASERVERFACES-2136)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:48:50.450

[http://ocpsoft.org/java/persist-and-pass-facesmessages-over-page-redirects/](http://ocpsoft.org/java/persist-and-pass-facesmessages-over-page-redirects/)

[http://balusc.blogspot.se/2007/03/post-redirect-get-pattern.html](http://balusc.blogspot.se/2007/03/post-redirect-get-pattern.html)

也许其中之一会有所帮助？

# wordpress - 有没有办法使用 WordPress 菜单进行页内子导航？

> ID：12481513
> 
> 赞同：0
> 
> 时间：2012-09-18T16:50:39.373
> 
> 标签：wordpress, menu, navigation, sidebar

我想把这个问题说清楚：我想使用“外观>菜单”部分来管理主导航，并且还能够拉出第一级子导航以放置在页面侧边栏（樱桃挑选，部分菜单）。我不想使用`wp_list_pages`或类似的。我希望能够从“外观 > 菜单”管理导航的两个方面。

有没有一种简单的方法可以在不编写我自己的助行器的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:41:46.393

@alibaster 的解决方案有效，但确实需要多个导航菜单。如果您的目标是从单个菜单管理所有菜单项，则可以根据您的布局使用绝对定位：

```
.menu-item {
    position:relative;
}
.menu-item .sub-menu {
    display:none;
}
.current-menu-ancestor .sub-menu {
    display:block;
    position:absolute;
    left:0;
    top:100px;
} 
```

您可以使用 'walker' 参数来自定义 wp_nav_menu 调用的输出：

[http://codex.wordpress.org/Function_Reference/wp_nav_menu#Using_a_Custom_Walker_Function](http://codex.wordpress.org/Function_Reference/wp_nav_menu#Using_a_Custom_Walker_Function)

[http://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/](http://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:28:04.990

您可以在外观 > 菜单中创建一个新菜单并将其显示在您想要使用的任何位置`<?php wp_nav_menu( array('menu' => 'Project Nav' )); ?>`。您当然需要更改“Project Nav”新菜单的名称。

有关该功能的完整信息可以在此处的法典中找到：[wp_nav_menu()](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

例如，如果您有一个名为 Sub Nav Menu 的菜单，您将使用：

`<?php wp_nav_menu( array('menu' => 'Sub Nav Menu' )); ?>`

只需将整个 php 行放在您希望菜单出现的模板文件中，不要忘记将菜单名称更改为新菜单的名称。

我希望这就是你要找的。如果没有，请告诉我们，我们会让您朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T22:58:39.940

把这个小片段放在你想要的任何地方。我添加了一个“if”条件，因此如果您尚未为其分配菜单，它不会显示任何代码。

```
<?php 
if ( has_nav_menu( 'sub-menu' ) ) {
wp_nav_menu( array( 
'theme_location'  => 'sub-menu',
)); 
} ?> 
```

如果您想继续添加这些，可以将名称“子菜单”更改为您喜欢的任何内容。更多信息请访问[http://codex.wordpress.org/Function_Reference/has_nav_menu](http://codex.wordpress.org/Function_Reference/has_nav_menu)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T06:45:23.540

我完全理解你的问题 - 即使这个线程很旧。我想知道您是否成功解决了这个问题。

我一直看到这个问题。我看过数百个很棒的 Wordpress 主题，真的很棒。但是他们都没有很好地解决“侧边栏菜单”。list_pages.. 很好，但是让“活跃的父母”不得不在侧边栏中显示菜单有一些巨大的好处——而不仅仅是在顶部。

我会继续研究这个。一种方法是使用 wp_nav_menu 两次，一次用于顶部，一次用于侧边栏 - 使用相同的“菜单”。但是使用 css 来隐藏当前不活动的顶级项目。不是最好的方法-但仍然..这是一种方法；）

# javascript - 死亡的长方形——移动Safari

> ID：12481515
> 
> 赞同：20
> 
> 时间：2012-09-18T16:50:46.540
> 
> 标签：javascript, jquery, twitter-bootstrap, mobile-safari

*（注意：下面的更新 1-5）*

我有一个基于 Twitter-Bootstrap 的响应式网页，页面的左上角有一个完全死掉的矩形区域，但仅在 Mobile Safari 上（我尚未在 Android 上测试过）。

***死的，定义：***

*   死区的各种按钮无法点击
*   在死区向上/向下滑动不会**向上**/向下滚动页面。

***我添加了以下代码：***

```
$('*').click(function(){ 
  console.log($(this)); 
}); 
```

...当我激活移动 safari JS 控制台时，我注意到死区***已经向上移动，等于控制台条的像素高度！***. 即，死区缩小了。此外，控制台记录了所有点击，***除了***在死区执行的点击。

* * *

***更新＃1：***

根据评论中的建议，我...

1）双重检查*固定*定位元素：

```
 $('*').click(function() { 
            console.log('checking for fixed elements...');
            $('*').each(function() {
                if ($(this).css('position') == 'fixed') {
                    console.log($(this));
                }
            })
        }); 
```

...原来我的 Bootstrap***模态***对话框在移动设备中都是固定位置。我删除*了所有*对话框，问题仍然存在。

2) 添加了以下 CSS 代码....

```
* { outline: 1px solid red; } 
```

这是 iPhone 屏幕截图。（我后来在 Photoshop 中添加的蓝色框以近似死区）...

![死区截图](../Images/f025468c351414103da02fc3395e1df3.png)

* * *

***更新#2：***好的，这太荒谬了。我开始从我的代码中删除一些东西。这就是我最终得到的结果，问题仍然存在！...

```
<html>
<head>
</head> 
<body>

</body>
</html> 
```

* * *

***更新#3***：这可能是一个 safari 错误，与我的网页无关。（见下面的更新#2）。我强制关闭了 safari，重新打开后问题就消失了。

* * *

***更新＃4***：问题再次出现:(也许它毕竟是我的网页而不是野生动物园侥幸。但是，它似乎是随机发生的......强制关闭浏览器将修复它一段时间，直到它再次出现。

* * *

***更新#5***：一旦出现死区，导航到另一个网页后，死区仍然存在。

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:52:17.447

这个问题只有大约一百万种可能性。我将首先将您的设备插入您的计算机并打开 Safari。确保在您的首选项中打开开发模式。从开发菜单中选择您的设备，然后检查元素。你能找到的东西真是太棒了。首先向每个元素添加“display:none”，直到找到问题所在。

![在此处输入图像描述](../Images/7e209255996518055fd763a15d48cc73.png)

![在此处输入图像描述](../Images/9ec6be18e7939e5c63f5dbaa5694bd56.png)

![在此处输入图像描述](../Images/eb03b88c117cc49c8841de5d61788984.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:50:00.533

尝试为有问题的元素设置以下 CSS 属性：

```
<selector> {
   pointer-events: all; 
} 
```

where`<selector>`代表有问题的元素选择器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T22:19:12.513

您是否完全删除了所有模态？我有一个这样的问题之前的问题是我的模态隐藏类隐藏，没有这个模态只是褪色到不透明度0

示例：class="modal 隐藏淡入淡出"

# html - 为什么只有一些 CSS 边距折叠？

> ID：12481516
> 
> 赞同：3
> 
> 时间：2012-09-18T16:50:54.897
> 
> 标签：html, css, android-webview, margins

我一直在运行一些测试来找出为什么一些 CSS 边距折叠以及为什么有些不折叠。我有以下测试代码：

```
<div id="seconddiv" style="margin-top:10px; margin-bottom:10px;">
    <p style="height:200px; margin-top:5px; margin-bottom:5px;">This is the first paragraph in  the second div!This paragraph is 200px tall.</p>
    <p style="height:300px; margin-top:5px; margin-bottom:5px;">This is the second paragraph in the second div!This paragraph is 300 px tall.</p>
    <p style="height:400px; margin-top:5px; margin-bottom:5px;">This is the third paragraph in the second div!This paragraph is 400px tall.</p>
</div> 
```

我正在尝试准确获取 div 的高度，但 scrollHeight 返回“910px”。这是为什么？我期望“900px”作为scrollHeight，因为它不包括边距。

是否有一些`<p>`边距塌陷并计入高度？为什么有些而不是其他。我尝试了许多不同的边距高度组合，但没有值显示发生了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T17:09:12.173

我认为您不理解“margin-collapse”的含义。

我将在以下示例中使用[这个简化的标记：](http://jsfiddle.net/cT3y6/)

### HTML：

```
<div>
   <span>A</span>
   <span>B</span>
   <span>C</span>
</div> 
```

### CSS：

```
span {
    display: block;
    height: 100px;
    margin: 5px 0;
} 
```

不是将每个边距显示为单独的间距，元素上的顶部和底部边距将与它们的兄弟元素（或者如果不存在上一个/下一个兄弟元素，则它们的父元素*）合并，以便它们之间的间距是最大的边距。

如果没有边距折叠，上述标记将显示为：

```
+div-----+
| margin |
|+span--+|
||A     ||
|+------+|
| margin |
| margin |
|+span--+|
||B     ||
|+------+|
| margin |
| margin |
|+span--+|
||C     ||
|+------+|
| margin |
+--------+ 
```

使用margin-collapse，标记显示为：

```
 margin
+div-----+
|+span--+|
||A     ||
|+------+|
| margin |
|+span--+|
||B     ||
|+------+|
| margin |
|+span--+|
||C     ||
|+------+|
+--------+
  margin 
```

这对于 div 的高度意味着它包括每个元素的高度和它们之间的边距。

在我的示例中，高度为`100 + 5 + 100 + 5 + 100 = 310`.

在您的示例中，高度为`200 + 5 + 300 + 5 + 400 = 910`.

* * *

[* 有一些额外的复杂性涉及填充、定位和浮动，[由规范描述](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:04:40.917

边距被添加到盒子模型中，因此在您的情况下高度为 elem 高度 + 边距。然而，当相邻的元素有边距时，边距会崩溃，最大的胜利与添加的两个。在这里解释它的好文章 [http://www.960development.com/understand-css-margins-collapsing/](http://www.960development.com/understand-css-margins-collapsing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:22:04.653

`scrollHeight`返回

> [**对象内容**的上下边缘之间的距离](http://msdn.microsoft.com/en-us/library/ie/ms534615%28v=vs.85%29.aspx)

 **即使您的示例中的*每个边距*都崩溃了，第二个`p`边距仍然有上下 5px 的边距，这会计入其边缘之间的总距离。

那就是 900 像素 + 5 像素 + 5 像素 = 910 像素。

为了使其更简单，[请检查此示例](http://jsfiddle.net/gionaf/STKzJ/)：

```
<div id="seconddiv" style="margin-top:10px; margin-bottom:10px;">

    <!--
    Top edge is first p's top position (without top margin)
    -->

    <p style="height:100px; margin-top:5px; margin-bottom:5px;">
    First p adds 105px (100px height + 5px bottom margin collapsed) = 105px
    </p>
    <p style="height:100px; margin-top:5px; margin-bottom:5px;">
    Second p adds 105px (100px height + 5px bottom margin collapsed) = 210px
    </p>
    <p style="height:100px; margin-top:5px; margin-bottom:5px;">
    Third p adds 105px (100px height + 5px bottom margin collapsed) = 315px
    </p>
    <p style="height:100px; margin-top:5px; margin-bottom:5px;">
    Last p adds 100px (100px height) = 415px
    </p>

    <!--
    We're at the bottom edge. Margins are excluded, the total height is 415px
    -->

</div>​ 
```**

# asp.net - ASP.NET：如何在 MVC 之外创建会话变量？

> ID：12481517
> 
> 赞同：0
> 
> 时间：2012-09-18T16:51:02.723
> 
> 标签：asp.net, asp.net-mvc-3, callback, amazon, session-variables

标题可能措辞不佳，请原谅我的经验不足。

我正在使用集成 Amazon Checkout，并且我已经构建了一个回调处理程序，我将其 URL 提供给 Amazon，以便他们知道当他们需要向我发送消息时要点击我网站上的哪个 URL。交易成功完成，但我需要在亚马逊完成付款处理后将用户重定向到我网站上的页面。这通常是通过进入亚马逊卖家中心管道设置并手动输入“退货 URL”来完成的，但我需要重定向到的页面构建了我们内部订单数据的 URL。例子：

```
http://www.website.com/Cart/OrderComplete/?orderId={ourInternalOrderIdNumber}&emailAddress={customerEmailAddress} 
```

我对如何规避这个问题有一个想法：在亚马逊处理付款并点击我的回调处理程序以发送其最后一批数据后，我根据亚马逊的数据在回调处理程序中创建内部订单。创建内部订单后，我想将 OrderId 和 EmailAddress 作为临时变量存储在应用程序中。这样我就可以将静态 URL 放入管道设置中，例如：

```
http://www.website.com/Cart/OrderCompleteAmazon/ 
```

当这条路线被命中时，里面的代码将检测这些临时变量是否存在，并使用它们来构建正确的订单确认 URL 并将用户重定向到它。

```
public bool ProcessCallbackRequest(HttpContext context)
{
    if (context.Request.Params.Get(Constants.NOTIFICATION_DATA_KEY) != null)
    {
        _logger.Info("Processing Amazon Payments new order notification");

        var xml = context.Request.Params.Get(Constants.NOTIFICATION_DATA_KEY);
        var xSerializer = new XmlSerializer(typeof(NewOrderNotification));
        var orderRequest = (NewOrderNotification)xSerializer.Deserialize(new StringReader(xml)); //A lot of the customer data from Amazon becomes null after deserializing, but that's a separate issue

        /** Internal order gets made here using the orderRequest and inserted into our DB **/

        /** Here I need to somehow store a couple of pieces of data from our internal order as variables that my route that Amazon will attempt to redirect to needs to access later.**/

        context.Response.StatusCode = 200;
        context.Response.Flush();
    }

    return true;
} 
```

理想情况下，此方法完成后，亚马逊将尝试将用户重定向到“http://www.website.com/cart/ordercompleteamazon/”，这在我的购物车控制器中执行此操作：

```
public ActionResult OrderCompleteAmazon()
{
    var orderId = //The variable created in my callback handler;
    var emailAddress = //The variable created in my callback handler;

    Redirect("/cart/ordercomplete/" + orderId.ToString() + "/?emailAddress=" + emailAddress);
} 
```

问题是第一个方法发生在回调处理程序中，它不是 View 的控制器的一部分，因此没有 ViewData、TempData 或 Session 的概念。我可以访问 HttpContext，但它是 Amazon 传递给回调处理程序方法的参数。我已经尝试在这个 HttpContext 的请求和响应中设置 Cookie，但这些似乎都没有在我自己的应用程序中设置 Cookie。

有没有办法将数据存储为全局应用程序的一部分，但只在该用户的会话中持续存在，而无法访问当前会话的 ViewData、TempData、Session 或 Cookie？

# c# - 通过 C# 在 DataList 模板中添加图像控件

> ID：12481518
> 
> 赞同：0
> 
> 时间：2012-09-18T16:51:03.350
> 
> 标签：c#, asp.net, .net, datalist

我想通过 C# 在 datalist Itemtemplate 中插入 asp 图像控件。这是我目前正在尝试的下面的代码，但它没有用。

```
DataList DataListCampaign = new DataList();
DataListCampaign.RepeatLayout = RepeatLayout.Flow ;
DataListCampaign.RepeatDirection = System.Web.UI.WebControls.RepeatDirection.Horizontal;
DataListCampaign.DataSource = CampTabImage;
DataListCampaign.DataBind();
Image TabImages = new Image();
TabImages.ID = "TabImages";
DataListCampaign.Controls.Add(TabImages);
TabContainer1.Tabs[k].Controls.Add(DataListCampaign); 
```

哪里有问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:36:22.940

试试这个

```
 Image TabImages = new Image();
     TabImages.ID = "TabImages";
     TabImages.ImageUrl = "~/imagepath";
     DataListCampaign.Items[0].Controls.Add(TabImages); 
```

# python - pip install PIL 在 OSX 上失败

> ID：12481521
> 
> 赞同：0
> 
> 时间：2012-09-18T16:51:06.113
> 
> 标签：python, installation, python-imaging-library, pip

我正在尝试使用 virtualenv 中的 pip 在 OSX 10.6.8 上安装 PIL，但它失败，gcc 返回 1 退出状态。

这就是我得到的：

```
$ pip install PIL
Downloading/unpacking PIL
  Running setup.py egg_info for package PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py
Installing collected packages: PIL
  Running setup.py install for PIL
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py
    --- using frameworks at /System/Library/Frameworks
    building '_imaging' extension
    gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc -arch x86_64 -pipe -DHAVE_LIBJPEG -DHAVE_LIBZ -I/System/Library/Frameworks/Tcl.framework/Headers -I/System/Library/Frameworks/Tk.framework/Headers -I/opt/local/include/freetype2 -IlibImaging -I/opt/local/include -I/Users/DataGreed/workspaces/vitrualenv/project/include -I/usr/local/include -I/usr/include -I/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c _imaging.c -o build/temp.macosx-10.6-universal-2.6/_imaging.o
    _imaging.c:3017: warning: initialization from incompatible pointer type
    _imaging.c:3077: warning: initialization from incompatible pointer type
    /usr/libexec/gcc/powerpc-apple-darwin10/4.2.1/as: assembler (/usr/bin/../libexec/as/ppc/as or /usr/bin/../local/libexec/as/ppc/as) for architecture ppc not installed
    Installed assemblers are:
    /usr/bin/../libexec/as/x86_64/as for architecture x86_64
    /usr/bin/../libexec/as/i386/as for architecture i386
    /usr/bin/../libexec/as/arm/as for architecture arm
    _imaging.c:3017: warning: initialization from incompatible pointer type
    _imaging.c:3077: warning: initialization from incompatible pointer type
    _imaging.c:3281: fatal error: error writing to -: Broken pipe
    compilation terminated.
    _imaging.c:3017: warning: initialization from incompatible pointer type
    _imaging.c:3077: warning: initialization from incompatible pointer type
    lipo: can't open input file: /var/folders/sO/sODPLYP7Goy5NCFskrL1dE+++TM/-Tmp-//ccds0vgZ.out (No such file or directory)
    error: command 'gcc-4.2' failed with exit status 1
    Complete output from command /Users/DataGreed/workspaces/vitrualenv/project/bin/python -c "import setuptools;__file__='/Users/DataGreed/workspaces/vitrualenv/project/build/PIL/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/sO/sODPLYP7Goy5NCFskrL1dE+++TM/-Tmp-/pip-BNAuaC-record/install-record.txt --single-version-externally-managed --install-headers /Users/DataGreed/workspaces/vitrualenv/project/bin/../include/site/python2.6:
    WARNING: '' not a valid package name; please use only.-separated package names in setup.py

running install

running build

running build_py

running build_ext

--- using frameworks at /System/Library/Frameworks

building '_imaging' extension

gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch ppc -arch x86_64 -pipe -DHAVE_LIBJPEG -DHAVE_LIBZ -I/System/Library/Frameworks/Tcl.framework/Headers -I/System/Library/Frameworks/Tk.framework/Headers -I/opt/local/include/freetype2 -IlibImaging -I/opt/local/include -I/Users/DataGreed/workspaces/vitrualenv/project/include -I/usr/local/include -I/usr/include -I/System/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c _imaging.c -o build/temp.macosx-10.6-universal-2.6/_imaging.o

_imaging.c:3017: warning: initialization from incompatible pointer type

_imaging.c:3077: warning: initialization from incompatible pointer type

/usr/libexec/gcc/powerpc-apple-darwin10/4.2.1/as: assembler (/usr/bin/../libexec/as/ppc/as or /usr/bin/../local/libexec/as/ppc/as) for architecture ppc not installed

Installed assemblers are:

/usr/bin/../libexec/as/x86_64/as for architecture x86_64

/usr/bin/../libexec/as/i386/as for architecture i386

/usr/bin/../libexec/as/arm/as for architecture arm

_imaging.c:3017: warning: initialization from incompatible pointer type

_imaging.c:3077: warning: initialization from incompatible pointer type

_imaging.c:3281: fatal error: error writing to -: Broken pipe

compilation terminated.

_imaging.c:3017: warning: initialization from incompatible pointer type

_imaging.c:3077: warning: initialization from incompatible pointer type

lipo: can't open input file: /var/folders/sO/sODPLYP7Goy5NCFskrL1dE+++TM/-Tmp-//ccds0vgZ.out (No such file or directory)

error: command 'gcc-4.2' failed with exit status 1 
```

**UPD：**在具有相同 osx 版本的另一台计算机上完美安装：-/

**UPD2：**其实还有更奇怪的事情。我已经通过 virtualenv 外部的 pip 安装了 PIL。但我不能只在 virtualenv 中安装它。

**UPD3：**我不知道它是否有帮助，但是当我加载 virtualenv 包装脚本时，我得到了这个：

```
/Library/Python/2.6/site-packages/stevedore/extension.py:4: UserWarning: Module 

pkg_resources was already imported from /System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/pkg_resources.pyc, but /Library/Python/2.6/site-packages is being added to sys.path
  import pkg_resources
/Library/Python/2.6/site-packages/stevedore/extension.py:4: UserWarning: Module site was already imported from /System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site.pyc, but /Library/Python/2.6/site-packages is being added to sys.path
  import pkg_resources 
```

当我使用时`workon`，我会收到相同的警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:59:43.710

你试过*枕头*吗？( `pip install pillow`):

[http://pypi.python.org/pypi/Pillow/](http://pypi.python.org/pypi/Pillow/)

它使 PIL 的生活变得更加轻松。我能够通过 Pillow 在 OSX 上使用 virtualenv 和 virtualenvwrapper 安装 PIL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:01:39.170

我的在 10.6.8 上可以很好地安装到 virtualenv 中，但是...

我的是用 gcc-4.0 构建的，而你的是用 4.2 构建的；和 4.2 应该是默认值。

所以我实际上不知道为什么我的使用 gcc-4.0 构建，但它确实工作正常。

```
$ which gcc
/usr/bin/gcc
$ ls -alh /usr/bin/gcc
lrwxr-xr-x  1 root  wheel     7B Jan  3  2012 /usr/bin/gcc -> gcc-4.2 
```

# c# - 如何避免空基抽象类？

> ID：12481522
> 
> 赞同：2
> 
> 时间：2012-09-18T16:51:14.397
> 
> 标签：c#, oop

假设我有许多具有不同签名的方法。基于一些外部代码，所有这些方法都*可能*被调用。您可能会将它们视为一些事件处理程序。

现在我应该有两个实现：

*   每个实现实际上*只*处理所有可能事件的一部分。
*   每个实现对于它不想/不能处理的所有事件根本不做任何事情。

我当然可以为所有可能的处理程序声明一个接口，但是我必须在每个实现中创建空方法（处理程序）。即使对于那些我不想/不能处理的事件。

我正在考虑执行以下操作：

```
abstract class Base
{
    public virtual void First(int i, double d) { /* no implementation */ }
    public virtual void Second(double d) { /* no implementation */ }
    public virtual void Third(string s, int i) { /* no implementation */ }
}

class Child : Base
{
    public override void First(int i, double d) { /* implementation */ }
    public override void Second(double d) { /* implementation */ }
}

class AnotherChild : Base
{
    public override void Second(double d) { /* implementation */ }
    public override void Third(string s, int i) { /* implementation */ }
} 
```

这种方法迫使我为基础抽象类中的所有可能的处理程序创建空实现。

你能推荐一些更好的吗？不需要产生大量空方法的方法？

我正在使用 C# 2.0 并且不能使用更新版本的语言来完成这项任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T17:20:08.010

我同意@usr - 我认为空函数没有问题。如果你想调用一个函数，那么它必须存在。如果它在某些情况下什么都不做，那么该函数应该是空的。具有空函数的基类与需要一遍又一遍地实现相同空函数的接口相比，似乎是一个非常好的主意。

如果您正在寻找替代方案，您可以考虑[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)设计模式。您可以调用通用函数，然后参数化所需的行为，而不是调用特定函数。然后，您可以将对象链接在一起（不同情况下的不同链）并让它们都有机会处理行为。如果他们都没有处理它，那么什么都不会发生。

这在某些情况下会很好地工作，但实现起来比非常简单和优雅的基类方法更复杂。注意不要过度设计。

**示例**
根据您在问题中给出的示例，这是一个实现命令链的示例：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication2 {

    interface ICommand {
        bool Execute( string action, params object[] parameters );
    }

    class Program {
        static void Main( string[] args ) {

            CommandChain l_chain1 = new CommandChain( new FirstCommand(), new SecondCommand() );
            CommandChain l_chain2 = new CommandChain( new SecondCommand(), new ThirdCommand() );

            // Chain 1

            if ( l_chain1.Execute( "first", (int) 1, (double) 1.1 ) )
                Console.WriteLine( "Chain 1 executed First" );
            else
                Console.WriteLine( "Chain 1 did not execute First" );

            if ( l_chain1.Execute( "second", (double) 1.2 ) )
                Console.WriteLine( "Chain 1 executed Second" );
            else
                Console.WriteLine( "Chain 1 did not execute Second" );

            if ( l_chain1.Execute( "third", "4", (int) 3 ) )
                Console.WriteLine( "Chain 1 executed Third" );
            else
                Console.WriteLine( "Chain 1 did not execute Third" );

            // Chain 2

            if ( l_chain2.Execute( "first", (int) 1, (double) 1.1 ) )
                Console.WriteLine( "Chain 2 executed First" );
            else
                Console.WriteLine( "Chain 2 did not execute First" );

            if ( l_chain2.Execute( "second", (double) 1.2 ) )
                Console.WriteLine( "Chain 2 executed Second" );
            else
                Console.WriteLine( "Chain 2 did not execute Second" );

            if ( l_chain2.Execute( "third", "4", (int) 3 ) )
                Console.WriteLine( "Chain 2 executed Third" );
            else
                Console.WriteLine( "Chain 2 did not execute Third" );

            Console.ReadKey( true );

        }
    }

    class CommandChain {

        private ICommand[] _commands;

        public CommandChain( params ICommand[] commands ) {
            _commands = commands;
        }

        public bool Execute( string action, params object[] parameters ) {
            foreach ( ICommand l_command in _commands ) {
                if ( l_command.Execute( action, parameters ) )
                    return true;
            }
            return false;
        }

    }

    class FirstCommand : ICommand {
        public bool Execute( string action, params object[] parameters ) {
            if ( action == "first" &&
                parameters.Length == 2 &&
                parameters[0].GetType() == typeof( int ) &&
                parameters[1].GetType() == typeof( double ) ) {

                int i = (int) parameters[0];
                double d = (double) parameters[1];

                // do something

                return true;
            } else
                return false;
        }
    }

    class SecondCommand : ICommand {
        public bool Execute( string action, params object[] parameters ) {
            if ( action == "second" &&
                parameters.Length == 1 &&
                parameters[0].GetType() == typeof( double ) ) {

                double d = (double) parameters[0];

                // do something

                return true;
            } else
                return false;
        }
    }

    class ThirdCommand : ICommand {
        public bool Execute( string action, params object[] parameters ) {
            if ( action == "third" &&
                parameters.Length == 2 &&
                parameters[0].GetType() == typeof( string ) &&
                parameters[1].GetType() == typeof( int ) ) {

                string s = (string) parameters[0];
                int i = (int) parameters[1];

                // do something

                return true;
            } else
                return false;
        }
    }

} 
```

（请注意，此示例并未遵循所有编程最佳实践 - 我不建议完全实现此代码。例如，action 参数作为枚举可能比字符串更好，并返回某种 CommandResult 而不是布尔值. 仅用于灵感。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:09:50.960

附带说明：如果这是出于测试目的，您可以模拟接口并立即获得几乎没有代码的无操作实现。同样，您也可以在仅部分实现接口的类中实现所有缺少的方法。不是为了测试——你也可以在生产中使用它，但是..在 prod 中使用 mock 有点味道，并且为“handler-ish”合约提供样板基础的空实现确实不是坏事，实际上这是一件好事作为进一步代码的基础——就像已经提到的 Cyborgx37 一样。

# audio - 音量标准化

> ID：12481524
> 
> 赞同：3
> 
> 时间：2012-09-18T16:51:19.760
> 
> 标签：audio, pcm, audio-player

我正在写一个音乐播放器，我想标准化不同歌曲的音量。

我可以想到一些不同的方法来做到这一点，例如：

1.  遍历所有 PCM 样本（假设浮点从 -1 到 1）并选择 m = max(abs(sample))。然后将因子 1/m 应用于所有 PCM 样本。这将使峰值位于 1。

2.  遍历 PCM 流并针对每个位置，取其周围一定宽度的 Hanning 窗口，计算绝对样本的平均值，然后从这些数据中选择最大值并对所有内容进行归一化。

3.  与 2 相同，但通过其他方式获得某种平均值。

2 和 3 的缺点是我可能需要一些剪辑，因此会失去一些质量。不过，通过不归一化为 1 而是归一化到 0.95 左右，我也许可以在某种程度上避免这种情况。但我认为 2 和 3 的优势在于这可能是用户更自然的标准化。[Wikipedia](http://en.wikipedia.org/wiki/Audio_normalization)也有一些关于此的信息，并提到[RMS](http://en.wikipedia.org/wiki/Root_mean_square)、[ReplayGain](http://en.wikipedia.org/wiki/ReplayGain)或[EBU R128](http://en.wikipedia.org/wiki/EBU_R128#Loudness_in_broadcasting)来测量歌曲的响度。

其他流行的音乐播放器（如 iTunes 等）是如何做到这一点的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T18:33:03.343

iTunes 使用声音检查技术。“Sound Check 是 Apple Inc. 的一项专有技术，其功能类似于 ReplayGain。它可在 iTunes 和 iPod 中使用。” （来自维基百科）所以，这对我来说不是解决方案。

似乎 ReplayGain 是最常见的技术。该算法在[这里](http://www.replaygain.org/)解释。示例实现是[mp3gain](http://mp3gain.cvs.sourceforge.net/viewvc/mp3gain/mp3gain/mp3gain.c?view=markup) (GPL) 或[ffmpeg-](https://github.com/avuserow/ffmpeg-replaygain/blob/master/gain_analysis.c) replaygain （GPL，源自 mp3gain）。我[现在在我的 MusicPlayer 项目](https://github.com/albertz/music-player-core/blob/master/musicplayer_replaygain.cpp)（BSD 许可证）中有自己的实现。

另请参阅这些具有实现的项目：

*   [http://sox.sourceforge.net/](http://sox.sourceforge.net/)
*   [http://r128gain.sourceforge.net/](http://r128gain.sourceforge.net/)
*   [ReplayGain 官方主页](http://wiki.hydrogenaudio.org/index.php?title=ReplayGain)
*   [官方 ReplayGain 1.0 规范](http://wiki.hydrogenaud.io/index.php?title=ReplayGain_specification)
*   [维基百科：重播增益](http://en.wikipedia.org/wiki/ReplayGain)

# unix - 查找，不包括 dir，不下降到 dir，并且使用 maxdepth 和 mindepth

> ID：12481527
> 
> 赞同：2
> 
> 时间：2012-09-18T16:51:51.883
> 
> 标签：unix, sh

这是 RHEL 5.6 和 GNU find 4.2.27。

我试图从查找中排除一个目录，并希望确保该目录不会下降到。我已经看到很多帖子说 -prune 会这样做 - 确实如此。我可以运行这个命令：

`find . -type d -name "./.snapshot*" -prune -o -print`

它有效。我通过 strace 运行它并验证它没有下降到 .snapshot。

我还想仅在某个级别查找目录。我可以使用 mindepth 和 maxdepth 来做到这一点：

`find . -maxdepth 8 -mindepth 8 -type d`

它给了我所有 8 级的目录，包括 .snapshot 中的内容。

如果我结合 prune 和 mindepth 和 maxdepth 选项：

`find . -maxdepth 8 -mindepth 8 -type d \( -path "./.snapshot/*" -prune -o -print \)`

输出是正确的 - 除了 .snapshot 中的内容外，我看到所有 dirs 都下降了 8 级，但是如果我通过 strace 运行该查找，我看到 .snapshot 仍在下降到 1 到 8 级。

我尝试了各种不同的组合，移动优先括号，重新排列表达式组件 - 产生正确输出的所有内容仍然下降到 .snapshot。

我在手册页中看到 -prune 不适用于 -depth，但没有说明 mindepth 和 maxdepth。

任何人都可以提供任何建议吗？

谢谢...比尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T03:36:39.820

我想这就是你的答案。-mindepth 似乎会关闭所有测试直到该级别。真可惜。

（右从“人找”）

```
 -mindepth levels
          **Do not apply any** tests or actions at levels less than levels (a non-negative integer).
          '-mindepth 1' means process all  files  except  the  command line arguments. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:52:49.700

我将此添加为另一个答案，因为它对这个问题有不同的看法。你可以试试这样的 find 命令：

查找 * .[^s][^n]* （其他开关/参数）

它可以通过使用 shell 而不是 find 开关来避免 .snapshot 目录。当然它并不完美，但也许它对于你正在做的事情来说已经足够接近了。

# powerbuilder - PowerBuilder 下拉数据窗口插入行更改显示列值

> ID：12481528
> 
> 赞同：1
> 
> 时间：2012-09-18T16:51:56.317
> 
> 标签：powerbuilder, datawindow

使用 PowerBuilder 11.5。

我有一个使用下拉数据窗口（dddw）的数据窗口（dw）。我在dw的构造函数中执行dddw.insertrow(0)，然后执行dw.insertrow()。

我遇到的问题是 dw 中 dddw 控件的“显示列”的值在某些时候被更改为“数据列”的值，即生成的应用程序正在显示数据（主键）格式化字符串值（我选择的“显示列”）。

我还在 insertrow 和检索调用之后检索“显示列”属性的值，它仍然按照我最初设置的方式定义（即未更改），但是当显示数据时，“数据列”值是显示。

任何关于为什么会发生这种情况的指示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:39:17.443

当 PB 无法找到DW 的值与 DDDW 的数据**完全匹配时，它会显示“数据”而不是“显示”。**

想过，您的“数据列”有“char(...)”类型吗？

一种可能的解决方案 - 切换到数字（我更喜欢“long”）类型而不是字符串作为“数据”。PB 对数字更精确。

# c# - 实体框架中的关系表问题

> ID：12481530
> 
> 赞同：2
> 
> 时间：2012-09-18T16:51:59.297
> 
> 标签：c#, sql, entity-framework

**我有订单**与**付款**的一对多关系：

```
public class Order
{
    [Key]
    public Guid SerialNumber { get; set; }

    public string OrderNumber { get; set; }

    ...

    [ForeignKey("OrderNumber")]
    public virtual ICollection<Payment> Payments { get; set; }
}

public class Payment
{
    [Key]
    public string SerialNumber { get; set; }

    public string OrderNumber { get; set; }

    ...

    public decimal Amount { get; set; }
} 
```

尽管记录可用，但 Payments 集合始终显示 0 个元素。我查看了跟踪，问题似乎出在生成的 SQL 查询上——它试图将 Order.SerialNumber 与 Payment.OrderNumber 匹配。

我该如何解决这个问题，最好使用数据注释？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:40:46.510

> 它试图将 Order.SerialNumber 与 Payment.OrderNumber 匹配。

是的，因为这正是您所建模的。`ForeignKey`属性没有描述相关表中外键属性的名称。它描述了同一个表中外键属性的名称，它用于将导航属性与其键配对，因此正确的用法是：

```
public class Order
{
    [Key]
    public Guid SerialNumber { get; set; }

    public string OrderNumber { get; set; }

    ...

    public virtual ICollection<Payment> Payments { get; set; }
}

public class Payment
{
    [Key]
    public string SerialNumber { get; set; }

    // Foreign key must have the same type as primary key in the principal table
    public Guid OrderNumber { get; set; }

    ...

    public decimal Amount { get; set; }

    // Reverse navigation property to principal associated with foreign key
    [ForeignKey("OrderNumber")]
    public virtual Order Order { get; set; }
} 
```

如果您不想在 Payment 中使用导航属性，则必须使用 fluent API 来描述映射：

```
modelBuilder.Entity<Order>()
            .HasMany(o => o.Payments)
            .WithRequired()
            .HasForeignKey(p => p.OrderNumber); 
```

如果您有现有的数据库并且您的关系确实以表`OrderNumber`中的列为目标，`Order`则意味着它必须用唯一约束标记 - 这种关系目前无法在 EF 中映射，因为它还不支持唯一约束。

# vb.net - 为 ASMX 客户端公开 WCF 服务

> ID：12481535
> 
> 赞同：1
> 
> 时间：2012-09-18T16:52:19.980
> 
> 标签：vb.net, wcf, asmx

我有一个 WCF 服务，可以很好地与 WCF 客户端配合使用，但我需要它使用的最关键的客户端是 ASMX 客户端。如何使我的 WCF 服务与 ASMX 客户端兼容？

我已按照[本指南](http://blogs.msdn.com/b/codejunkie/archive/2008/06/12/how-to-create-a-wcf-service-for-asmx-client-without-changing-the-client.aspx)进行操作，但无济于事（尽管我知道 100% 确定我已正确实施）

下面是我的 ServiceContract 和 OperationContracts。我的 Web.config 没有 MEX 端点。

```
 <ServiceContract()>
<XmlSerializerFormat(Use:=OperationFormatUse.Literal, Style:=OperationFormatStyle.Document)>
Public Interface racoSMS
    <OperationContract(Action:="http://tempuri.org/ReceiveSMS", ReplyAction:="http://tempuri.org/ReceiveSMS")>
    Function ReceiveSMS(ByVal securityKey As String, ByVal from As String, ByVal message As String) As ServiceResult
    <OperationContract(Action:="http://tempuri.org/Test", ReplyAction:="http://tempuri.org/Test")>
    Function Test(ByVal securityKey As String) As ServiceResult
End Interface 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:57:06.020

你的问题很模糊。需要注意的几点：

*   是的，您可以使用 WCF 创建与 ASMX 样式 Web 服务兼容的服务。
*   强烈建议使用**[BasicHttpBinding 。](http://msdn.microsoft.com/en-us/library/system.servicemodel.basichttpbinding.aspx)**
*   传输安全（SSL）应该是可能的，但除此之外要警惕花哨的功能（例如，我认为 ASMX 不支持消息安全）。
*   注意你的数据和服务契约的命名空间，确保它是 ASMX 端所期望的（或者准备好改变那端的代码）。与 Action 和 ReplyAction 相同（我可以从您的示例代码中看到您已经处理好了）。
*   您需要什么序列化类型和 SOAP 样式确实可以取决于客户端的期望，相应地使用属性。
*   我听说过[Web Service Enhancements](http://msdn.microsoft.com/en-us/library/aa528771.aspx)来扩展 ASMX 端的一些功能，但我自己没有使用过。

事实上，我想这几乎可以回答你的问题。您说您做了所有这些“无济于事”，但您需要更具体（在此处，甚至可能在新问题中）以便我们为您提供帮助。

# sql - SQL Server 视图中的 Where & Top 交互

> ID：12481537
> 
> 赞同：4
> 
> 时间：2012-09-18T16:52:25.223
> 
> 标签：sql, sql-server, tsql, where, sql-view

你知道如何说服 SQL Server 在视图中考虑 WHERE 子句吗？看起来 SQL Server 只运行我的视图，评估 TOP 1，然后应用“where id=N”子句过滤视图的结果集。例子：

```
create table mytable ( id int, name varchar(64) );

insert into mytable values ( 5, 'BOB' );
insert into mytable values ( 5, 'ROBERT' );
insert into mytable values ( 5, 'SMITH, ROBERT' );
insert into mytable values ( 8, 'A.J.' );
insert into mytable values ( 8, 'Al J.' );
insert into mytable values ( 8, 'Albert Johnston' );

select * from mytable;

+----+-----------------+
: id : name            :
+----+-----------------+
:  5 : BOB             :
:  5 : ROBERT          :
:  5 : SMITH, ROBERT   :
:  8 : A.J.            :
:  8 : Al J.           :
:  8 : Albert Johnston :
+----+-----------------+

create view myview as
   select top 1 id, name
   from mytable
   order by len(name) desc 
```

问题：

```
-- bad, empty result set
-- (I want this to answer 5, 'SMITH, ROBERT')
select * from myview where id = 5 
```

这些按预期工作：

```
-- good, answers 8, 'Albert Johnston'
select * from myview

-- good, also answers 8, 'Albert Johnston'
select * from myview where id = 8 
```

现在没有视图：

```
-- good, answers 5, 'SMITH, ROBERT'
select top 1 id, name
from mytable
where id = 5
order by len(name) desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:08:56.277

在这种情况下，如果你想创建这样的东西，我建议使用一个使用 where 返回值的东西，所以最好创建一个`Table-Valued User-Defined Function`

```
Create dbo.YourFunction
(
  @parameter id
)
returns table
as
return select top 1 id, name
   from mytable
   where id = @parameter 
   order by len(name) desc 
```

并像使用它一样

```
select * from dbo.yourFunction(5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:14:00.060

您的视图将始终返回`Albert Johnston`，因为无法强制它首先评估外部 where 条件。您需要以下内容，将为您提供每个 id 组的最大长度的名称/ID：

```
select
    name,
    id
from
(
    select
        name,
        id,
        row_number() OVER (partition by id order by len(name) desc) as [len]
    from 
        theTable
) As tbl1
where [len] = 1 
```

# security - 使用 jersey 保护 REST Web 服务

> ID：12481539
> 
> 赞同：2
> 
> 时间：2012-09-18T16:52:30.430
> 
> 标签：security, rest, jersey

我已经为我的应用程序实现了 REST Web 服务。由于这不应该是公共服务，我想强制执行某种类型的客户端身份验证。请说明如何做到这一点。

仅供参考，我正在使用 apache Tomcat 7 和 MYSQL 数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:30:38.803

这里有很多选择——从容器管理的安全性（基本或摘要）到[Shiro](http://blog.xebia.com/2011/04/18/apache-shiro/)或[Spring Security](http://blogs.justenougharchitecture.com/?p=493)。

# pdf - 通过API，对pdf文件进行缩放，使其自适应适应网页？

> ID：12481542
> 
> 赞同：1
> 
> 时间：2012-09-18T16:52:32.693
> 
> 标签：pdf, zooming, pdfbox

网页上嵌入了 PDF 文件，但是当我缩放此网页的大小时，PDF 文件将不适合网页，因此 PDF 看起来很奇怪。我可以使用API​​，例如PDFBox，来解决它吗？

# android - 无法在 android 中使用 Twitter-OAuth 发布推文

> ID：12481545
> 
> 赞同：0
> 
> 时间：2012-09-18T16:52:56.123
> 
> 标签：android, twitter-oauth, tweets

我正在使用 jtwitter 库通过 Twitter 授权我的应用程序。我使用这个[http://marakana.com/forums/android/examples/312.html](http://marakana.com/forums/android/examples/312.html)进行身份验证、推文和读取状态。身份验证和读取状态工作正常。但是在点击 Tweet 按钮时会出现以下异常。哪里错了？？请帮我。

```
/* Responsible for posting new status to Twitter */
class PostStatusTask extends AsyncTask<String, Void, String> {
@Override
protected String doInBackground(String... params) {
  try {
    twitter.setStatus(params[0]);
    return "Successfully posted: " + params[0];
  } catch (Exception e) {
   e.printStackTrace();
    return "Error connecting to server.";
  }
}

@Override
protected void onPostExecute(String result) {
  super.onPostExecute(result);
  Toast.makeText(MainActivity.this, result, Toast.LENGTH_LONG).show();
}

 } 
```

逻辑：

```
W/System.err(3073): http://api.twitter.com/1/statuses/update.json (anonymous)
W/System.err(3073):     at winterwell.jtwitter.URLConnectionHttpClient.processError(URLConnectionHttpClient.java:176)
W/System.err(3073):     at winterwell.jtwitter.OAuthSignpostClient.post(OAuthSignpostClient.java:129)
W/System.err(3073):     at winterwell.jtwitter.Twitter.updateStatus(Twitter.java:3220)
W/System.err(3073):     at winterwell.jtwitter.Twitter.updateStatus(Twitter.java:3161)
W/System.err(3073):     at winterwell.jtwitter.Twitter.setStatus(Twitter.java:2917)
W/System.err(3073):     at com.tarams.twitterdemo.MainActivity$PostStatusTask.doInBackground(MainActivity.java:244)
W/System.err(3073):     at com.tarams.twitterdemo.MainActivity$PostStatusTask.doInBackground(MainActivity.java:1)
W/System.err(3073):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
W/System.err(3073):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
W/System.err(3073):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
W/System.err(3073):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
W/System.err(3073):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
W/System.err(3073):     at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:54:57.377

试试这个 [http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application#josc329](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application#josc329)

# sas - 在 SAS 的 INCLUDE 命令中使用 LET 变量？

> ID：12481549
> 
> 赞同：4
> 
> 时间：2012-09-18T16:53:11.117
> 
> 标签：sas

我正在尝试通过定义一个名为 root 的宏变量来组织我的 SAS 代码。然后，我希望能够让我的所有`%INCLUDE`语句都使用该`&root`值，这样我就可以`%INCLUDE`根据根来定义：

```
%LET root = C:\Documents and Settings\me\Desktop\mine\SAS;
%include "&root\lib\work.sas" 
```

但是，当尝试在 SAS 9.2 下运行时，我从日志中收到以下错误：

```
1    %LET root = C:\Documents and Settings\me\Desktop\mine\SAS;
ERROR: Incorrect %INCLUDE statement will not be executed. There is a syntax error.
2    %include "&root\lib\work.sas" 
```

所以看起来`&root`变量没有被扩展为`%INCLUDE`语句中的值。我究竟做错了什么？

谢谢！

# [编辑]答案

`';'`我在声明的末尾错过了`%INCLUDE`。=/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T17:44:34.747

在这种情况下，您可能需要使用分隔符，它标记宏变量名称的结尾，即“.”，因此您的代码将如下所示：

```
%LET root = C:\Documents and Settings\me\Desktop\mine\SAS;
%include "&root.\lib\work.sas" 
```

这实际上只有在变量名“触及”某些东西时才需要，但我建议总是使用它——这是一个很好的做法。此外，当变量名后面有一个点时，你应该放“那个”点，所以会有两个点，比如：

```
%LET root = C:\Documents and Settings\me\Desktop\mine\SAS;
%LET fname = work;
%include "&root.\lib\&fname..sas" 
```

**编辑**

**正如@Joe 在其他答案中正确指出的那样，这种情况下的真正问题是%INCLUDE**语句后缺少分号。将它放在路径之后应该可以解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:02:45.977

我不得不说我对您对错误的介绍以及您接受的答案感到有些困惑。以我的经验，`ERROR: Incorrect %INCLUDE statement`将出现在第二行之后，而不是之前。另外，如果宏变量分辨率是问题，那么您会看到以下内容：

```
903  %LET root = C:\temp;
904
905  %include "&roots\test.sas";
WARNING: Apparent symbolic reference ROOTS not resolved.
WARNING: Physical file does not exist, C:\Users\xxxx\&roots\test.sas.
ERROR: Cannot open %INCLUDE file &roots\test.sas. 
```

在您包含的代码中，%include 后没有分号。这可能与问题有关吗？当我运行 %include 然后另一行是非法的，例如以相反的顺序运行它们时，我确实得到了那个错误（尽管仍然在 %include 之后）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:02:15.270

我怀疑您的代码中此语句之前的某个地方还有另一个错误。尝试重新启动 SAS 并仅执行这两行代码，它应该可以正常工作，**对我来说效果很好**：

```
%let root = c:\documents and settings\robert.penridge\desktop\mine\sas;
%include "&root\lib\work.sas"; 
```

**编辑**：这对我有用，因为我实际上添加了一个分号。在@Joe 正确诊断问题后意识到这一点。

我在桌面上创建了以下文件夹结构：

```
\mine\sas\lib 
```

然后把 work.sas 放在那里，内容如下：

```
%put blah; 
```

当我运行代码时，结果打印`blah`得很好，没有错误消息。事实上，多年来，我在许多版本的 SAS 和许多操作系统中都使用过这样的代码。你的代码没有问题。

与此处其他一些答案的建议相反，SAS 足够聪明，知道该`\`字符不能成为宏名称的一部分，因此无需用`.`字符显式声明宏的结尾。

最后，如果您尝试调试宏代码，您还可以打开以下选项：

```
option mprint mlogic macrogen symbolgen source source2; 
```

您可以像这样将它们关闭：

```
option nomprint nomlogic nomacrogen nosymbolgen nosource nosource2; 
```

请注意，其中一些可能已经在您的 SAS 环境中默认启用。

在极少数情况下，您可能还会遇到宏引用问题。如果您一直在使用诸如`%str()` `%bquote()`etc 之类的宏函数，则会发生这种情况......如果是这种情况，那么通常可以通过使用`%unquote()`导致问题的宏变量周围的函数来解决它。从您的代码示例看来，这不是问题所在，但您可能已经简化了帖子的代码。如果是这种情况，那么在您的情况下，代码将更改为如下所示：

```
%let root = c:\documents and settings\robert.penridge\desktop\mine\sas;
%include "%unquote(&root)\lib\work.sas"; 
```

# iphone - 使用 NSRegularExpression 查找和替换

> ID：12481552
> 
> 赞同：0
> 
> 时间：2012-09-18T16:53:28.340
> 
> 标签：iphone, objective-c, ios

我有一个格式为 NSString *CalculationFormula = @"((Col(202)/Col(201)-1)*100"; 的字符串；我需要用**ABC(number * 10)替换所有出现的****Col(number )**

 **请帮忙 ...

谢谢，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:33:10.257

期望的结果有些模棱两可。例如，结果应该是“ABC(202 * 10)”还是“ABC(2020)”？我将假设后者。由于正则表达式相当通用，这里有一个 Perl 片段可以完成我认为你想要的，然后将其翻译成 Cocoa。我已经给出了两者，因为在继续之前更容易看到那里发生了什么，`NSRegularExpression`因为后者在模式中有更多的转义。

**Perl 版本：**

```
#!/usr/bin/perl -w
use strict;

my $search_text = "((Col(202)/Col(201)-1)*100";

$search_text =~ s|Col\((?P<num>\d+)\)|ABC($+{num}0)|g;
print $search_text; 
```

印刷：`((ABC(2020)/ABC(2010)-1)*100`

所以，匹配模式是`Col\((?P<num>\d+)\)`和替换模式`ABC($+{num}0`

**可可版本：**

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    NSRegularExpression *regex = nil;
    regex = [NSRegularExpression regularExpressionWithPattern:@"Col\\((\\d+)\\)" options:NSRegularExpressionCaseInsensitive error:nil];
    NSString *searchText = @"((Col(202)/Col(201)-1)*100";
    NSString *newText = [regex stringByReplacingMatchesInString:searchText options:0 range:NSMakeRange(0,[searchText length]) withTemplate:@"ABC($10)"];
    NSLog(@"new = %@",newText);
    [p release];
} 
```

日志：

```
2012-09-18 12:30:26.880 Untitled[22405:707] new = ((ABC(2020)/ABC(2010)-1)*100 
```

现在，如果我最初的假设是错误的，并且您确实想要结果中的“num * 10”，那么替换模式是：

```
@"ABC($1 * 10)" 
```**

# mysql - MySQL：将不同的值连接为单个值

> ID：12481555
> 
> 赞同：1
> 
> 时间：2012-09-18T16:53:31.013
> 
> 标签：mysql, sql

在 mysql db 表中，我有与域表具有一对多关系的项目，例如

**项目**

```
----------------
proId | domainId
----------------
  1        1
  1        2
  2        1
  3        3 
```

**领域**

```
---------------------
domainId | domainName
---------------------
    1        Web
    2        Mobile
    3        iPhone 
```

我查询

```
SELECT p.*, d.* FROM projects p LEFT JOIN domain d ON p.domainId = d.domainId 
```

结果

**结果**

```
-----------------------------
proId | domainId | domainName
-----------------------------
  1       1          Web
  1       2          Mobile
  2       1          Web
  3       3          iPhone 
```

但是是否可以通过串联将所有域显示为单个值，例如

```
-----------------------------
proId | domainId | domainName
-----------------------------
  1       1, 2    Web, Mobile
  2       1       Web
  3       3       iPhone 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T16:55:50.583

可能您正在寻找**[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)**功能。

```
SELECT  a.proID,
        GROUP_CONCAT(b.domainID) domainId,
        GROUP_CONCAT(b.domainName) domainName
FROM    projects a
        LEFT JOIN domain b
            ON a.domainID = b.domainID
GROUP BY a.proID 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/f5844/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:25:39.937

对于快速问题，我现在刚刚发布了要点，因为在朋友的帮助下它已经解决了，现在我发布了完整的 DB Schema & Query。

**架构**

```
CREATE TABLE projects
    (`projectId` int, `projectName` varchar(20))
;

INSERT INTO projects
    (`projectId`, `projectName`)
VALUES
    (1, 'P1'),
    (2, 'P2'),
    (3, 'P3')
;

CREATE TABLE domain
    (`domainId` int, `domainName` varchar(6))
;

INSERT INTO domain
    (`domainId`, `domainName`)
VALUES
    (1, 'Web'),
    (2, 'Mobile'),
    (3, 'iPhone')
;

CREATE TABLE prodomain
    (`domainId` int, `projectId` int)
;

INSERT INTO prodomain
    (`domainId`, `projectId`)
VALUES
    (1, 1),
    (1, 1),
    (3, 2),
        (2, 3)
; 
```

**询问**

```
 SELECT p.projectId as proId, projectName, d.*, 
GROUP_CONCAT(d.domainId separator ', ') as all_domains_id, 
GROUP_CONCAT(d.domainName separator ', ') as all_domains_name 
FROM projects p 
    LEFT JOIN projectdomains pd ON p.projectId = pd.projectId
    LEFT JOIN domains d ON d.domainId = pd.domainId
    GROUP BY p.projectId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:00:11.507

```
SELECT 
    p.proId, 
    group_concat(d.domainId) as domainId, 
    group_concat(d.domainName) as domainName 
FROM 
    projects p 
    inner JOIN 
    domain d ON p.domainId = d.domainId
group by p.proId
order by p.proId 
```

# ajax - 没有指定 dataType 的自定义 ajaxTransport 函数未触发（完全！）

> ID：12481560
> 
> 赞同：6
> 
> 时间：2012-09-18T16:53:51.977
> 
> 标签：ajax, jquery, xmlhttprequest, jqxhr

我一直在尝试[为 jQuery 设置自定义 ajaxTransports，](http://api.jquery.com/extending-ajax/#Transports)以便在我们的产品的某些场景中缩短一些工作流程。但是，我在使这些传输得到尊重方面的成功率为零（而我有许多工作的[自定义 ajaxPrefilters](http://api.jquery.com/extending-ajax/#Prefilters)）。

**使用多个版本的 jQuery 测试：**

*   1.5.2
*   1.6.4
*   1.7.2
*   1.8.0

**用多个浏览器测试：**

*   火狐 15
*   铬 21
*   iOS 5 网页浏览量

...

他们都没有工作。

**JsFiddle 测试用例：http:** [//jsfiddle.net/PVYut/](http://jsfiddle.net/PVYut/)

...

如果我添加一个`dataType`来缩小范围，那么它工作正常。

**JsFiddle 测试用例：http:** [//jsfiddle.net/PVYut/1/](http://jsfiddle.net/PVYut/1/)

...

我只是做错了什么吗？我很高兴被告知，只要我能做到这一点！-_-

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:30:44.743

```
$.ajaxTransport("+*", function(options, originalOptions, jqXHR, headers, completeCallback   ) {
    console.log("Executing ajaxTransport");
    return {
        send: function( headers, completeCallback ) {
            completeCallback(404, "error", {});
        },
        abort: function() {
          /* abort code */
        }
    }
});

$.ajax("?jqTrans=" + (+(new Date())))
    .done(function() {
        console.log("ERROR: Should not have been successful!");
    })
    .fail(function() {
        console.log("SUCCESS: Should have failed.");  
    }); 
```

这是[jsFiddle](http://jsfiddle.net/PVYut/2/)

# c - C中的相对路径

> ID：12481563
> 
> 赞同：2
> 
> 时间：2012-09-18T16:54:08.310
> 
> 标签：c, relative-path

我有一个 C 程序，它使用与可执行文件位于同一目录中的一些资源。当我从随机工作目录（不是程序所在的目录）执行程序时，不会加载资源，因为我在代码中使用的相对路径不是可执行文件所在的路径。我怎样才能很好地解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:56:16.033

将包含资源的目录的路径作为参数传递给程序，或者：

*   将进程的当前目录更改为该目录（[`chdir()`](http://linux.die.net/man/2/chdir)在 Unix 和[`SetCurrentDirectory()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365530%28v=vs.85%29.aspx)Windows 上），或
*   构建资源的绝对路径

* * *

如果是 Windows，正如对问题的评论所暗示的那样，您可以获得`exe`using的路径[`GetModuleFileName()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683197%28v=vs.85%29.aspx)，从中提取目录并避免向程序提供参数。然后列出的两个选项中的任何一个都将允许程序从任何地方执行并且仍然可以找到它的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-19T18:52:01.337

对于像我刚才所做的那样将来遇到这个老问题的任何人：

该程序（至少在 linux 中）将调用它的命令保留为`int main`参数列表的第一个参数。

例如，在本例中，我们将向下钻取几个目录以访问我们的程序，从而产生以下调用命令`user@PC:~$ ./foo/bar/awesome_program.x86_64`。
该程序（下面的代码）将打印`./foo/bar/awesome_program.x86_64`.
由于我们将该字符串作为变量，因此从它构造相对路径应该相当简单，只需将该字符串的末尾替换为相对于可执行文件的路径即可。

工作代码：

```
#include <stdio.h>

int main (int argc, char **argv)
{
    printf("calling path: %s\n", argv[0]);

    return 0;
} 
```

# api - 有哪些在线 REST API 工作台可用？

> ID：12481565
> 
> 赞同：2
> 
> 时间：2012-09-18T16:54:12.727
> 
> 标签：api, rest

在创建站点/脚本以位于 RESTful API 的客户端时，有哪些工具可用于创建“工作台​​”来探索 API、在完成设计时检查标头和响应？最好允许您输入自定义端点并创建示例请求以查看响应。我记得以前见过一个不错的工作台，但它的名字让我忘记了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:00:34.140

重新找到我记得的那个：[Apigee 控制台](https://apigee.com/console/others)是一个很棒的界面，可以用来玩现有的 API 或构建自己的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:12:49.570

Mashery 的[I/O Docs](http://www.mashery.com/product/io-docs)是一个[开源](https://github.com/mashery/iodocs)工作台，您可以将自己部署在使用 Redis 进行存储的 Node.js 服务器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:35:54.127

如果您有`wadl`ReST 服务的文件，您可以在 SOAP UI 中加载它并使用它。

**编辑**
了另一个更简单的工具[Rest Client](http://code.google.com/p/rest-client/)

# javascript - javascript 函数未在第二次调用时定义

> ID：12481569
> 
> 赞同：2
> 
> 时间：2012-09-18T16:54:44.880
> 
> 标签：javascript, jquery, html

```
<script type="text/javascript">
        function vote(element, val){
            prev_vote=0;
            vote = 100
            can_vote = element.find('.vote-permission').attr('value')
            alert(can_vote);
            if (can_vote=='yes'){
                if (prev_vote==0){ 
                    alert("previous vote is 0");
                    // user has not cast vote for image before
                    vote_score = vote + val;
                    element.find('.vote-count-post').text(vote_score);
                }
                else if (prev_vote != 0){
                    // user has cast a vote before
                    if (prev_vote == 1 && val == -1){
                        vote_score = vote - 2;
                        element.find('.vote-count-post').text(vote_score);
                    }
                    else if (prev_vote == -1 && val == 1){
                        vote_score = vote + 2;
                        element.find('.vote-count-post').text(vote_score);
                    }
                }
            }
        };

        $(document).on('click', '.votedown', function(e){
            alert($(e.target).prev().text());
            vote($(e.target).parent(), -1);
            alert('vote down is done');
            });

        $(document).on('click', '.voteup', function(e){
            $(e.target).css('background-position', '0 -222px');
            vote($(e.target).parent(), 1);
            alert('vote up is done');
            });
    </script> 
```

上面的 javascript 函数是我正在实现的上下投票系统的脚手架。当第一次单击 upvote 或 downvote 按钮时，函数按预期执行，调用 vote() 但第二次单击 vote() 函数被称为未定义。任何想法为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T16:55:45.187

该功能正在删除自身

```
vote = 100 
```

它替换了`vote`外部范围内的变量值（以前是函数，现在是数字）。

您可以使用关键字来阻止它，`var`但您不应该使用两次相同的名称，因为它会破坏可读性。

# c - 如何编写函数来搜索数组中的字符串

> ID：12481573
> 
> 赞同：1
> 
> 时间：2012-09-18T16:54:57.420
> 
> 标签：c, arrays, string, search

这是我到目前为止所拥有的：

```
for(i = 0; i <= 9; i++){
    printf("%d", i);
    found = strpbrk(nameholder[i], searchterm);
    if(strpbrk(nameholder[i], searchterm) == searchterm){
        printf("found\n");
        foundwhere = i + 1;
        break;
    }
}// end for 
```

当我运行程序时，strpbrk 函数找到了字符串，但由于某种原因它永远不会触发 if 语句。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:06:04.490

根据[http://en.cppreference.com/w/c/string/byte/strpbrk](http://en.cppreference.com/w/c/string/byte/strpbrk)，`strpbrk()`是为了

> `const char* strpbrk( const char* dest, const char* str );`
> 查找指向的字节串中的第一个字符`dest`，也就是指向的字节串中的第一个字符`str`。

因此，如果你真的想找到*整体* `searchterm`而不是in的*任何字符*，你应该使用or 。`searchterm``nameholder[i]`[`strcmp`](http://en.cppreference.com/w/c/string/byte/strcmp)[`strstr`](http://en.cppreference.com/w/c/string/byte/strstr)

另请注意，运算符`==`不能用于比较两个`char*`字符串的相等性，因为它只是比较地址是否相等或不考虑字符串内容。改为使用`strcmp()`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T17:07:02.853

如果我正确理解（您的描述含糊不清）您正在尝试做什么，那么您似乎使用了错误的功能。

在 strpbrk 上引用 cpp 文档：

> 返回指向 str1 中第一次出现的作为 str2 一部分的任何字符的指针，如果没有匹配项，则返回空指针。

这不是你想要它做的，对吧？你应该看`strcpm`功能。 [http://www.cplusplus.com/reference/clibrary/cstring/strcmp/](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)

您的代码应如下所示：

```
for(i = 0; i <= 9; i++){ 
    if(strcmp(nameholder[i], searchterm) == 0){
        printf("found\n");
        foundwhere = i + 1;
        break;
    }
}// end for 
```

# javascript - 通过异步脚本加载 Web 小部件时，我应该将其加载到头部还是将其加载到页脚？

> ID：12481575
> 
> 赞同：0
> 
> 时间：2012-09-18T16:55:01.147
> 
> 标签：javascript, html, scripting

目前建议加载`<script>`标签尽可能靠近`</body>`结束标签。

我正在创建一个网络小部件（类似于 Facebook 的类似按钮），我想知道这是否是相同的情况。

```
<script src="http://localhost/wordpress/?ai1ec_requirejs_widget"></script> 
```

毕竟这个脚本会加载一个非常小的脚本，然后它会通过 require.js 引入我的小部件所需的一切，如果它尽快开始加载不是更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:58:05.520

它仍然可以工作。这更像是一种*最佳实践*，而不是技术要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:03:33.020

影响决定放置 javascript 的唯一因素是

*   依赖关系/执行顺序
*   加载时间
*   最佳实践（这主要是由于加载时间）

建议在页面底部加载大块 javascript，例如 jQuery，但是如果您在页面底部加载 jQuery，如果您在调用 jQuery 时有任何带有 $ 的代码，它将无法正常工作，因为 $ 没有被定义。
因此，在您的情况下，如果它只是少量代码，只要不在任何依赖项之前调用它，这并不重要。

希望有帮助。

# c - 如何用 C 编写 GNURadio 应用程序？

> ID：12481576
> 
> 赞同：0
> 
> 时间：2012-09-18T16:55:08.420
> 
> 标签：c, gnuradio

我有一个项目，我需要为 USRP 设备编写应用程序。但是我用来与设备驱动程序交互的 gnuradio 软件以及最终的硬件提供了 c++ 和 python 中的 api。我很喜欢用 c 编程，因此想要一种可以让我从我的 c 程序调用 api 的方法。有没有办法可以这样做？这将是一个**救命稻草**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T23:45:59.607

C++ 为 C 增加了很多，但并没有带走太多。除了少数极端情况（可以解决）之外，大多数有效的 C 代码也是有效的 C++ 代码，因此当您将其编译为 C++ 时不会遇到很多问题。只需以 C 风格编写整个项目，并且仅在需要与 gnuradio 的 C++ API 交互时使用 C++ 功能。

# svn - Perforce 等效于 svn 导出的命令

> ID：12481579
> 
> 赞同：6
> 
> 时间：2012-09-18T16:55:12.883
> 
> 标签：svn, perforce

我正在尝试修改我的构建脚本以使用基于 perforce 的新项目。该脚本创建一个标签，然后想要将该标签签出到一个临时目录中。在颠覆中，我会在`svn export`命令中使用。在 git 中我会`git archive | tar -x`。中是否有等效命令`p4`？或者我需要设置一个临时客户空间，同步，构建，然后删除客户空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:54:56.747

从理论上讲，您可以`p4 print`在不使用工作区的情况下获取文件内容。但是我认为您会发现使用工作区更容易、更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T01:43:31.240

创建和同步客户端是我一直在做的事情。不过，我不知道您为什么需要构建客户端；只需创建它，同步它，tar 客户端文件，将它同步到 #0 以清理混乱，然后删除客户端。这似乎是一种直截了当的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:45:38.433

Sven Erik Knop 向他的 Perforce Public depot 提交了一个脚本，该脚本使用 p4 print（通过 P4Python）创建一个包含文件树的 zip 文件。你可以在这里找到它：

[https://swarm.workshop.perforce.com/guest/sven_erik_knop/P4Pythonlib/scripts/PrintZip.py](https://swarm.workshop.perforce.com/guest/sven_erik_knop/P4Pythonlib/scripts/PrintZip.py)

更新：Swarm 有一个下载按钮，可以以类似的方式压缩目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-27T17:49:04.117

您可以使用包含 perforce 的现代 git 来执行此操作：

```
git p4 clone //path/to/depot/... target_folder && rm -rf target_folder/.git 
```

rm 部分是可选的，当然，如果您不想要它，可以删除 .git。

# django - django-piston 方法是不允许的

> ID：12481581
> 
> 赞同：1
> 
> 时间：2012-09-18T16:55:25.387
> 
> 标签：django, jquery, django-piston

我有这个：

*处理程序.py*

```
class ChatHandler(BaseHandler):
    model = ChatMsg
    allowed_methods = ('POST','GET')

    def create(self, request, text):
        message = ChatMsg(user = request.user, text = request.POST['text'])
        message.save()
        return message 
```

*模板.html*

```
 ...
    <script type="text/javascript">
    $(function(){
        $('.chat-btn').click(function(){
            $.ajax({
                url: '/api/post/',
                type: 'POST',
                dataType: 'application/json',
                data: {text: $('.chat').val()}
            })
        })
    })
    </script>
    ... 
```

*api/urls.py*

```
chat_handler = Resource(ChatHandler, authentication=HttpBasicAuthentication)
urlpatterns = patterns('',
    ....
    url(r'^chat/$', chat_handler, {'emitter_format': 'json'}),
) 
```

为什么，但是 ChatHandler 中允许使用 POST 方法？GET 方法有效。是错误还是我的代码错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:49:46.593

即使您没有在问题中包含此代码，我还是在您在评论中给出的 github 中找到了它...

您正在映射到不允许 POST 请求的处理程序

**urls.py::snip** ::

```
post_handler = Resource(PostHandler, authentication=auth)
chat_handler = Resource(ChatHandler, authentication=auth)
urlpatterns = patterns('',
    url(r'^post/$', post_handler , { 'emitter_format': 'json' }),
    url(r'^chat/$', chat_handler, {'emitter_format': 'json'}),
) 
```

**处理程序.py**

```
# url: '/api/post'
# This has no `create` method and you are not 
# allowing POST methods, so it will fail if you make a POST
# request to this url
class PostHandler(BaseHandler):
    class Meta:
        model = Post

    # refuses POST requests to '/api/post'
    allowed_methods = ('GET',)

    def read(self, request):
        ...

# ur;: '/api/chat'
# This handler does have both a POST and GET method allowed.
# But your javascript is not sending a request here at all.
class ChatHandler(BaseHandler):
    class Meta:
        model = ChatMsg
    allowed_methods = ('POST', 'GET')

    def create(self, request, text):
        ...

    def read(self, request):
        ... 
```

您的 javascript 请求正在发送到`'/api/post/'`，该请求正在路由到`PostHandler`. 我感觉您希望它会发送给聊天处理程序。这意味着您需要将 javascript 请求 url 更改为`'/api/chat/'`，或将代码移动到您期望的处理程序。

此外，您在处理程序中设置了错误的模型。它不需要`Meta`嵌套类。它应该是：

```
class PostHandler(BaseHandler):
    model = Post

class ChatHandler(BaseHandler):
    model = ChatMsg 
```

# php - PHP：POST JSON 字符串 - urlencode 似乎不起作用

> ID：12481582
> 
> 赞同：1
> 
> 时间：2012-09-18T16:55:33.863
> 
> 标签：php, json

当我尝试以下操作时：

```
 $post_string='data='.urlencode(json_encode($data));  //data is a big nested array
     $post_string='&password='.urlencode($password);
     $post_string='&username='.urlencode($username); 
```

我在另一台服务器上收到的 $_POST 数据已损坏 - 密码或用户名丢失。我怀疑我没有以正确的方式将数据编码为 JSON。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:57:59.590

您正在使用`=`分配一个*新*值。每行都会丢弃前一个值。您想`.=`用于**连接作业**。

# java - 当第一个策略和恢复策略都失败时，Java 中的异常组合

> ID：12481583
> 
> 赞同：3
> 
> 时间：2012-09-18T16:55:34.193
> 
> 标签：java, exception, exception-handling

假设我有一个方法可能会因检查异常而失败（根据 Sun 的建议，检查是因为它是可恢复的）。此方法失败并触发恢复策略。但是初始方法和恢​​复策略都失败了。

在某些情况下，我可能希望同时拥有两个堆栈跟踪，以便我知道为什么初始策略和恢复策略都失败了，而不仅仅是最后一个。

我能做些什么？我应该创建一个 CompositeException 类型或类似的东西吗？这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T17:13:14.023

Java 7 引入了*抑制异常*的概念。例如，try-with-resources 语句由以下内容[指定](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20)：

> 资源以与它们初始化时相反的顺序关闭。仅当资源初始化为非空值时才关闭资源。关闭一个资源的异常不会阻止关闭其他资源。如果异常之前由初始化程序、try 块或资源关闭引发，则此类异常将被抑制。

和

> *   如果资源的初始化正常完成，并且 try 块由于抛出值 V 而突然完成，则：
>     
>     
>     *   如果资源的自动关闭由于值 V2 的抛出而突然完成，则 try-with-resources 语句由于值 V 的抛出而突然完成，其中 V2 添加到 V 的抑制异常列表中。

这使用 java.lang.Throwable.addSuppressedException，其 javadoc 内容如下：

> 将指定的异常附加到为传递此异常而被抑制的异常。此方法是线程安全的，通常由 try-with-resources 语句调用（自动和隐式）。
> 
> 除非通过构造函数禁用，否则会启用抑制行为。当抑制被禁用时，这个方法除了验证它的参数之外什么都不做。
> 
> 请注意，当一个异常导致另一个异常时，通常会捕获第一个异常，然后抛出第二个异常作为响应。换句话说，这两个例外之间存在因果关系。相反，在同级代码块中可能会引发两个独立异常的情况，特别是在 try-with-resources 语句的 try 块和关闭资源的编译器生成的 finally 块中。在这些情况下，只能传播引发的异常之一。在 try-with-resources 语句中，当有两个这样的异常时，将传播源自 try 块的异常，并将 finally 块的异常添加到由 try 块的异常抑制的异常列表中。作为一个异常展开堆栈，
> 
> 一个异常可能已经抑制了异常，同时也由另一个异常引起。异常是否有原因在其创建时在语义上是已知的，这与异常是否会抑制其他异常不同，这通常仅在抛出异常后才确定。
> 
> 请注意，程序员编写的代码也能够在存在多个同级异常且只能传播一个异常的情况下调用此方法。

最后一段似乎适用于您的情况。所以你可以这样做：

```
public static void main(String[] args) throws Exception {
    try {
        throw new RuntimeException("Not now!");
    } catch (Exception e) {
        try {
            tryAgain();
        } catch (Exception e2) {
            e.addSuppressed(e2);
            throw e;
        }
    }
} 
```

然后，堆栈跟踪将包含两个异常：

```
Exception in thread "main" java.lang.RuntimeException: Not now!
    at tools.Test.main(Test.java:12)
    Suppressed: java.lang.RuntimeException: I'm on holiday.
        at tools.Test.tryAgain(Test.java:7)
        at tools.Test.main(Test.java:15) 
```

但调用者只能捕获主要异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:00:05.673

当初始方法失败时，我会考虑一个例外，而当恢复策略失败时，我会考虑另一个例外。

您可能希望在抛出恢复失败的异常之前多次尝试恢复策略（例如，在发生超时时重试并失败）。

似乎将初始方法和恢​​复策略异常分开是有道理的，因为它们代表两种不同的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:10:05.280

不幸的是，Java`Exception`只有一个原因，因此 a`CompositeException`可能是您的最佳选择。但是，您*可以*覆盖`printStackTrace`打印复合异常的堆栈跟踪的方法：

```
public class CompositeException extends Exception {
    private final List<Throwable> causes = new ArrayList<Throwable>();

    public CompositeException(Throwable... causes) {
        this.causes.addAll(Arrays.asList(causes));
    }

    // Other constructors you want

    @Override
    public void printStackTrace() {
        if (causes.isEmpty()) {
            super.printStackTrace();
            return;
        }
        for (Throwable cause : causes) {
            cause.printStackTrace();
        }
    }

    @Override
    public void printStackTrace(PrintStream s) {
        if (causes.isEmpty()) {
            super.printStackTrace(s);
            return;
        }
        for (Throwable cause : causes) {
            cause.printStackTrace(s);
        }
    }

    @Override
    public void printStackTrace(PrintWriter s) {
        if (causes.isEmpty()) {
            super.printStackTrace(s);
            return;
        }
        for (Throwable cause : causes) {
            cause.printStackTrace(s);
        }
    }
} 
```

这就是您可以做的所有事情，以便在一个异常中包含多个原因异常。要使用它：

```
CompositeException ce = new CompositeException(ex1, ex2, ex3); 
```

然后`ce.printStackTrace()`将打印所有 3 个异常的堆栈跟踪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:36:23.637

“我可能想要两个堆栈跟踪”到底是什么意思？我用来做的是记录两者，因为它们是“不应该发生的事情”。它允许您检查日志并跟踪问题所在。如果您执行“CompositeException”，您很快就会在组合问题上爆发：如果“CompositeExceptionHandler”也失败了怎么办？我会...

1.  跟踪第一个异常并尽可能采取行动。否则并引发自定义异常。
2.  抓住第二个并采取相应的行动。

这样你就可以改善耦合。您独立处理两个级别

# c++ - 如何从 C++ 类更改 QML 中属性的值

> ID：12481587
> 
> 赞同：3
> 
> 时间：2012-09-18T16:55:35.123
> 
> 标签：c++, qml, qt-quick

我在简单的 Qt Quick 中有这样的代码。我想从我的类中更改 qml 元素的属性值。

我的班级.h

```
#ifndef MYCLASS_H
#define MYCLASS_H
#include <QObject>
#include "qdebug.h"
#include <QtGui/QApplication>
#include <QDebug>
#include <QDeclarativeContext>
#include <QGraphicsObject>
#include <QVariant>

class myClass : public QObject
{
    Q_OBJECT

public:
    myClass(QObject *QMLObject) : m_QMLObject(QMLObject) {}

public slots:
   void cppSlot(int number);

protected:
    QObject *m_QMLObject;

};

#endif // MYCLASS_H 
```

我的类.cpp

```
#include "myclass.h"

void myClass::cppSlot(int number) {
    qDebug() << "Called the C++ slot with" << number;
    QObject* textinput = m_QMLObject->findChild<QObject*>("textinput");

    QObject* memo = m_QMLObject->findChild<QObject*>("memo");

    QString str;

    str=(textinput->property("text")).toString();

    int a;
    a=str.toInt();
    a++;

    QString str2;
    str2=QString::number(a);

    memo->setProperty("text", str+"+1="+str2);
} 
```

主文件

```
#include <QtGui/QApplication>
#include "qmlapplicationviewer.h"
#include <QUrl>
#include <QDebug>
#include <QDeclarativeContext>
#include <QGraphicsObject>
#include "myclass.h"

Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QScopedPointer<QApplication> app(createApplication(argc, argv));

    QmlApplicationViewer viewer;

    myClass MyClass(viewer.rootObject());

    viewer.rootContext()->setContextProperty("myObject", &MyClass);

    viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer.setSource(QUrl("qrc:qml/qml/Example/main.qml"));

    viewer.showExpanded();

    return app->exec();
} 
```

main.qml

```
import QtQuick 1.0

Rectangle {
    width: 300
    height: 300
    anchors.fill: parent

    Column {
        spacing: 5
        anchors.centerIn: parent;

       Rectangle {
           id: button

           width: 100
           height: 30

           color: "#e0b87b"

           Text {
               id: buttonLabel
               text: "Start"
               anchors.centerIn: parent;
           }

           MouseArea {
               anchors.fill: parent
               id: mouseArea

               onClicked: myObject.cppSlot(1);
           }
       }

           Rectangle {
               id: textinputRect 

               width: 100
               height: 18

               color: "#e0b87b"

               TextInput {
                   id: textinput
                   objectName: "textinput"
                   color: "#f51515";
                   selectionColor: "blue"
                   font.pixelSize: 12;
                   width: parent.width-4
                   anchors.centerIn: parent
                   focus: true
                   text:"1"
                   }
           }

           Rectangle {
               id: memoRect 

               width: 100
               height: 35

               color: "#00b87b"

               TextEdit{
                   id: memo
                   objectName: "memo"
                   wrapMode: TextEdit.Wrap
                   width:parent.width;
                   readOnly:true
               }
           }

    }

} 
```

当我运行应用程序并单击按钮时，应用程序崩溃。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T19:16:08.367

rootObject 尚未实例化，请尝试以下操作：

```
Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QScopedPointer<QApplication> app(createApplication(argc, argv));
    QmlApplicationViewer viewer;
    viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer.setSource(QUrl("qrc:qml/qml/Example/main.qml"));
    myClass MyClass(viewer.rootObject());
    viewer.rootContext()->setContextProperty("myObject", &MyClass);
    viewer.showExpanded();
    return app->exec();
} 
```

这样 rootObject() 将指向正确的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T00:56:59.650

m_QMLObject 为 NULL。在尝试将 rootObject() 传递给“myClass”对象的构造函数之前，您需要先从资源组件加载 QML，否则它将始终为 NULL。

# php - SQL/PHP 数组，服务器警告

> ID：12481589
> 
> 赞同：1
> 
> 时间：2012-09-18T16:55:44.160
> 
> 标签：php, sql, arrays, db2

我正在尝试从数据库中提取信息并将其存储在数组中。 `$row`正在返回信息，while`$categories`是懒惰的，不做任何事情。服务器上有一条日志警告说：

> PHP 通知：未定义索引：CATID 在 /www/zendsvr/htdocs/public/test/index.php 第 29 行

`CATID`是从大约 1 到 1100 的自动增量 PK。我还`$row`成功地将条目分配给各个变量，但是这个数组只是不想工作。

```
$query = 'SELECT CATID, CATDSC, CATPID, CATFEAT, CATURL FROM cecart.categories
WHERE CATURL!=\'\' ORDER BY CATFEAT DESC, RAND()';

while (($row = $stmt->fetch(Zend_Db::FETCH_ASSOC)) !== false) {
  $categories[$row['CATID']] =
    array('CATID' => trim($row['CATID']),
          'CATDSC' => trim($row['CATDSC']),
          'CATPID' => trim($row['CATPID']),
          'CATFEAT' => trim($row['CATFEAT']),
          'CATURL' => ($cat_img_dir . trim($row['CATURL'])));
  print($row['CATID'] . ' | ' . $categories['CATID']); // line 29
} 
```

第 29 行输出：x | 应该是 x | x 如果阵列工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:33:38.900

```
print($row['CATID'] . ' | ' . $categories['CATID']); // line 29 
```

我猜你是想抬头看`$categories[$row['CATID']]`，不是`$categories['CATID']`。没有`$categories['CATID']`。

# android - 如何从sqlite数据库中获取所有ID

> ID：12481595
> 
> 赞同：0
> 
> 时间：2012-09-18T16:56:00.927
> 
> 标签：android, android-sqlite

我有一个数据库管理器类，我在其中构建了一个包含两列的表。第一列是一个整数，我正在尝试编写一个方法，将该列中的所有值作为列表返回：

```
public List<Integer> getAllStyleIDs(){
        List<Integer> results = null;
        SQLiteDatabase db = this.getReadableDatabase();
        // Select All Query
        String selectQuery = "select * from " + DBConstants.allStyles;

        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {

                results.add(cursor.getInt(0));

            } while (cursor.moveToNext());
        }
        cursor.close();
        db.close();

        return results;
    } 
```

但我得到一个空点异常

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:59:56.047

您的列表`results`为空，然后您尝试添加到它。试试这个：

```
List<Integer> results = new ArrayList<Integer>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:50:05.930

第一件事：列表尚未初始化。第二件事：不推荐使用原始查询：

尝试这样的事情：

```
 List<Integer> results = new ArrayList<Integer>();
    this.database = this.getReadableDatabase();

    String [] columns = {_ID}; // name of the column

    Cursor cursor = this.database.query(COURSES_TABLE, columns, null, null, null, null, null);

    int iId = cursor.getColumnIndex(_ID);

    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
    {
        Integer rowId = cursor.getInt(iName);
        results.add(rowId);
    }

    cursor.close();
    this.database.close();

    return results; 
```

# php - 类似于 bindParam() 的 Pear DB 方法？

> ID：12481597
> 
> 赞同：1
> 
> 时间：2012-09-18T16:56:04.393
> 
> 标签：php, pear

有没有办法使用 PEAR DB 库来做类似于 PDO 的事情`bindParam()`？我有几个准备好的语句将多次使用同一个变量，所以我希望能够将值绑定到准备好的语句中的变量。我只是找不到使用 Pear DB 的方法。

这是我已经开始做的，但它有点痛苦。

```
$sSql = "SELECT EventID
            DAY(CONVERT_TZ(EventDate, ?, ?)) as EventDay,
            FROM RacingEvents WHERE
            MONTH(CONVERT_TZ(EventDate, ?, ?)) = ? AND
            YEAR(CONVERT_TZ(EventDate, ?, ?)) = ?";

    $aArgs = array();
    $aArgs[] = DEFAULT_TIMEZONE;
    $aArgs[] = $this->sTimezone;
    $aArgs[] = DEFAULT_TIMEZONE;
    $aArgs[] = $this->sTimezone;
    $aArgs[] = $this->iMonth;
    $aArgs[] = DEFAULT_TIMEZONE;
    $aArgs[] = $this->sTimezone;
    $aArgs[] = $this->iYear;

    if ($this->iSkill) {
        $sSql .= " AND NOT REPLACE(EventSkill, ?, '') = EventSkill";
        $aArgs[] = $this->iSkill;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:09:12.270

Pear 的 DB 包早已失效，您应该使用 MDB2 或 PDO。

MDB2 支持您可以传递给的命名参数`execute()`：

```
<?php
$types = array('integer', 'text', 'text');
$sth = $mdb2->prepare('INSERT INTO numbers VALUES (:id, :name, :lang)', $types);

$data = array('id' => 1, 'name' => 'one', 'lang' => 'en');
$affectedRows = $sth->execute($data); 
```

# ms-access - 如何将单选按钮的值从 1、2、3 等更改为文本值？

> ID：12481604
> 
> 赞同：3
> 
> 时间：2012-09-18T16:56:52.047
> 
> 标签：ms-access, vba

我在 Access 2007 中创建了一个小型数据库，它由一个表和两个表单组成，一个用于输入数据，一个用于检索数据。

我的问题是：在我的输入表单上，我有一个包含三个单选按钮的组框。被问到的问题是**元素是传感器吗？**
这些按钮代表**Yes**、**No**和**Don't Know**。

在数据库中，我有一个名为 Sensor 的列来保存用户选择的值，但由于单选按钮返回值**1**表示*yes*，**2**表示*no*或**3**表示*don't know*，它会生成一个报告或查询对用户来说很困难。

在这一点上，我正在编写带有嵌套 iif 的大量 SQL 语句，以按照我想要的方式返回数据。

有没有办法以我希望看到的方式（是，不，不知道）用数据填充表格，而不是用 1 的 2 或 3 填充它？顺便说一句，这是一个绑定的形式，我希望我能做到不受约束，但我现在不能回去了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:53:32.520

“*由于单选按钮返回值 1 表示是，2 表示否，或 3 表示不知道，因此生成对用户有意义的报告或查询非常困难。* ”

将这 3 对作为行存储在`Sensor_Values`表中：

```
sval descriptor
1    yes
2    no
3    don't know 
```

然后，您可以将该表加入到包含存储`Sensor`数字的表中。

```
SELECT yt.Sensor, sv.descriptor
FROM
    YourTable AS yt
    INNER JOIN Sensor_Values AS sv
    ON yt.Sensor = sv.sval; 
```

如果您反对创建和加入查找表，则可以`Switch()`在查询中使用表达式将数值`Sensor`转换为其文本形式。

```
SELECT
    Switch(
        Sensor = 1, "yes",
        Sensor = 2, "no",
        Sensor = 3, "don't know"
    ) AS sensor_text
FROM YourTable; 
```

该`Switch()`方法可以工作，但与查找表方法相比，维护起来更具挑战性。

我的目的是向您展示使用选项组值作为数字的相当简单的方法，而不是“*以我希望看到的方式（是，不，不知道）用数据填充表格，而不是用 1 填充它2 或 3* "

作为一般规则，您最好使用访问控制，因为它们被设计为使用。只要你有一个令人信服的理由就打破这条规则......但是打破规则需要你付出额外的努力......比如更多的VBA代码。我建议的方法不需要任何 VBA。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T20:44:11.240

我建议不要使用单选按钮，而是选择组合框。您将能够直接在组合框中为结果使用字符串值。

现在，如果您对使用单选按钮一无所知，请尝试以下操作：

在包含文本的表格中添加一个新字段。将此绑定到表单上的隐藏文本框。然后，将一个更新前事件（或更新后，取决于您正在做什么）添加到无线电组。添加类似于以下的代码：

```
Sub RadioGroup_BeforeUpdate(cancel As Integer)
    Select Case Me.RadioGroup.Value
        case 1
            Me.hiddenTextField.value = "Yes"
        case 2
            Me.hiddenTextField.value = "No"
        case else
            Me.hiddenTextField.value = "Don't Know"
    End Select
End Sub 
```

现在，当您保存记录时，人类可读的值将在您添加的新字段中可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:30:46.883

您可以`Select Case`在创建选择字符串时使用 a，而不是将`iif`' 嵌套在 SQL 中。

```
Select Case Me.rdoSensor
    Case 1
        sSQL=sSQL & " AND Sensor='Yes'"
    Case 2
        sSQL=sSQL & " AND Sensor='No'"
    Case 3
        sSQL=sSQL & " AND Sensor='Don''t know'"
End Select 
```

# java - 将 Logger.info 放入静态块中

> ID：12481605
> 
> 赞同：7
> 
> 时间：2012-09-18T16:56:55.557
> 
> 标签：java, log4j

我有以下课程

```
public class MyClass
{
    private static final Logger logger = Logger.getLogger(MyClass.class);

    static
    {
        logger.info("some text");
    }
} 
```

假设当我们到达`logger.info`时，log4j 系统已初始化并准备好发出日志，是否安全？

似乎如果我能够执行`Logger.getLogger()`并取回一个有效的 Logger 实例，这意味着 Log4j 已初始化，对吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T08:10:46.163

是的。静态初始化器（即`static {}`块和静态变量的初始赋值）按照它们声明的顺序执行。

log4j 的默认初始化依赖于 log4j 类`LogManager`中的静态块，该块在类加载后执行`Logger`，并且在第一次使用之前加载。这就是为什么你的建筑工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:19:04.177

[请参阅JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4)的这一部分。它讨论了当你初始化一个类时会发生什么。[这](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7)部分讨论静态初始化器。在回答您的问题时，AFAIK 静态块按照它们发生的顺序执行。它们将在加载类时执行，这可能在您创建它的实例或访问它的静态变量/方法时发生。

# java - 如何在一个文件中分解两个连续的xml？(Java/安卓)

> ID：12481607
> 
> 赞同：1
> 
> 时间：2012-09-18T16:57:05.300
> 
> 标签：java, android, xml, string, parsing

我有一个带有两个 xml 的 InputStream 或 String，如下所示：

```
<?xml version="1.0" standalone="yes"?> 
<items 
    blahblahblah1 
</items>           
<?xml version="1.0" standalone="yes"?> 
<items 
    blahblahblah2 
</items> 
```

它们具有相同的格式但不同的数据。我想解析它们，但由于这首先不是有效的 xml，我需要找到一种方法来拆分它们。

唯一想到的是字符串操作：

1.  通过子字符串将它们分成两个单独的字符串`<?xml version="1.0 standalone="yes"?>`
2.  搜索并删除这两`<?xml version="1.0 standalone="yes"?>`行并将其余行括起来`<ROOT> </ROOT>`以生成一个有效的 xml，并找出如何从那里解析它

然而，这两种方法似乎都很笨拙且效率低下。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:47:35.617

我在这里提出的任何建议都没有经过测试，但这些是我认为我会采取的路线。

如果预计响应长度很小，我个人可能只是`String`按照您的建议将连接的 XML 响应放入 a 中，然后使用标准`String`方法提取单个 XML 文档，*或者*再次按照您的建议删除 XML声明字符串并用一对根元素包装整个批次。这取决于您是想为 XML 解析器提供单个文档还是多个文档。我已经很久没有处理过`BasicHttpResponse`，但我认为您可以使用 获取`InputStream`响应实体`mBasicHttpResponse.getEntity().getContent()`，然后使用多种可能的方法之一从中`String`获取`InputStream`。

另一方面，如果我希望处理相当长的数据，或者如果响应实体可能包含不确定数量的连接 XML 文档，那么我会考虑`InputStream`使用自定义包装获得的数据，`InputStream`或者`Reader`执行 (a) 剥离声明和 (b) 插入新的根元素。SO上还有其他人问了一个与您在[这里](https://stackoverflow.com/questions/6640756/parsing-an-xml-stream-with-no-root-element)面临的问题非常相似的问题，只是他没有要处理的声明。查看 user656449 的答案，我们看到了一个建议，即`InputStream`在将其传递给 SAX 解析器之前如何使用一些虚拟根元素包装它：

（公然从引用的SO问题/答案中复制）：

```
SAXParserFactory saxFactory = SAXParserFactory.newInstance();
SAXParser parser = saxFactory.newSAXParser();

parser.parse(
    new SequenceInputStream(
        Collections.enumeration(Arrays.asList(
        new InputStream[] {
            new ByteArrayInputStream("<dummy>".getBytes()),
            new FileInputStream(file),//bogus xml
            new ByteArrayInputStream("</dummy>".getBytes()),
        }))
    ), 
    new DefaultHandler()
); 
```

但另外在这种情况下，您可以将 替换为您自己创建的`FileInputStream`某种类型，`CustomFilterFileInputStream`以执行声明行的剥离。您`CustomFilterFileInputStream`将环绕`InputStream`从您获得的`BasicHttpResponse`内容，然后使用`SequenceInputStream`添加新的根标签。

*如果您真的必须*以这种方式接受 XML 数据，并且您希望在单个响应中处理大量数据，那么我认为您需要采用这种方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:15:22.330

这是一个糟糕的设计，因为字符串`"<?xml"`可能会合法地出现在 CDATA 部分或注释中。但是你只需要冒险，在你看到的任何地方拆分文件`"<?xml"`，希望最好，如果它做错了，责怪提出这个想法的人。唯一的选择是为这种 XML 变体编写自己的解析器，这不会很有趣。

# path - 使用 WiX 根据机器名称设置安装路径

> ID：12481608
> 
> 赞同：-4
> 
> 时间：2012-09-18T16:57:06.783
> 
> 标签：path, wix, installation, custom-action

我很惊讶我无法找到一个简单的答案，因为这似乎是一件很常见的事情。

我正在尝试根据正在安装的服务器的机器名称设置安装路径，因为它们具有不同的文件夹结构。

我假设我需要某种自定义操作，但是对于 WiX 来说是全新的，我很难弄清楚从哪里开始。

我想我可以为每台服务器制作单独的安装程序（因为它只有 3 个），但最好只有一个可重复使用的安装程序。

一个正确方向的点将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:52:28.990

假设您在 WiX 创作中具有以下目录结构：

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="INSTALLLOCATION" Name="nametochange">
    <!-- some component -->
    <Directory Id="BinDir" Name="bin">
       <!-- another component -->
    </Directory>
  </Directory>
</Directory> 
```

`INSTALLLOCATION`文件夹名称应根据机器名称而有所不同。您可以编写一个`SetDirectory`元素来将目录路径设置为所需的值（它是下面的硬代码，只是为了展示这个想法）：

```
<SetDirectory Id="INSTALLLOCATION" Value="C:\inetpub\wwwroot\[%COMPUTERNAME]" /> 
```

该`SetDirectory`元素正确地安排了基础自定义操作。请注意在 WiX: 中引用环境变量的方式`[%COMPUTERNAME]`。如果您以 Windows Installer 4.0+ 为目标，则可以依赖特殊属性`ComputerName`.

**更新**：根据具体要求，您可以进一步实验：

```
<SetDirectory Id="INSTALLLOCATION" Value="C:\inetpub\wwwroot\FolderA">ComputerName = Server1</SetDirectory>
<SetDirectory Id="INSTALLLOCATION" Value="C:\inetpub\wwwroot\FolderB">ComputerName = Server2</SetDirectory>
<SetDirectory Id="INSTALLLOCATION" Value="C:\inetpub\wwwroot\FolderC">ComputerName = Server3</SetDirectory> 
```

等等

# asp.net-mvc-3 - 将链接插入 WebGrid

> ID：12481612
> 
> 赞同：0
> 
> 时间：2012-09-18T16:57:38.240
> 
> 标签：asp.net-mvc-3, razor

我正在寻找在 Webgrid 中创建一些超链接。我想让“用户名”列将其值显示为超链接而不是文本。是否可以将@Html.ActionLink 函数合并到下面的 WebGrid 中？

columnName 需要一个字符串，该字符串对应于传递给视图的模型的属性。所以问题是如何把它变成一个链接。

**看法：**

```
@model IEnumerable<CIMsWebApp.Client.Group.Entities.IUser>

@{  var grid = new WebGrid(Model, canSort: true, canPage: true, defaultSort: "UserName", ajaxUpdateContainerId: "myUserGrid"); }

 @grid.GetHtml(
    tableStyle: "dataGrid", 
    headerStyle: "header",
    alternatingRowStyle: "evenRow",
    columns: grid.Columns
    (
        grid.Column(header: "User Name", columnName: "UserName", canSort: false),
        grid.Column(header: "Role(s)", columnName: "Rolebuilder", canSort: false),
        grid.Column(header: "Active", columnName: "ActiveInd", canSort: false),
        grid.Column(header: "Action", format:
                                    @<span><input type="button" class="edit-user" id="@item.PersonId" value="EDIT" />
                                    </span>, canSort: false)
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:00:10.667

> 所以问题是如何把它变成一个链接。

您可以使用该`format`参数为此单元格提供您喜欢的任何自定义格式（顺便说一句，您已经为最后一列执行了此操作）：

```
grid.Column(
    header: "Subject", 
    columnName: "UserName", 
    format: item => Html.ActionLink((string)item.UserName, "SomeAction", new { id = (int)item.PersonId  })
) 
```

# autocomplete - 了解自动完成

> ID：12481616
> 
> 赞同：0
> 
> 时间：2012-09-18T16:58:14.020
> 
> 标签：autocomplete, visualforce

这在jquery自动完成中意味着什么？：

```
 $( "#tags" ).autocomplete({
        source: availableTags
    }); 
```

我知道自动完成选项显示在标签 div 中。我正在尝试将 salesforce visualforce 生成的 id 应用于此脚本。

所以在 Salesforce 中，id 是自动生成的。所以如果我说 id = 'tags'，在 salesforce 中它变成 j0_jd1:j2_jd3:tags。

有没有人克服使用带有 visualforce id 的自动完成功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:48:58.120

尝试这个：

```
$('[id$=tags]').autocomplete({
    source: availableTags
}); 
```

# validation - 控制器中的电子邮件验证 Grails

> ID：12481619
> 
> 赞同：3
> 
> 时间：2012-09-18T16:58:18.823
> 
> 标签：validation, grails, groovy, sendmail, email-validation

我只是想验证控制器中的电子邮件地址，我认为这很简单。我做的方法如下：

```
def emailValidCheck(String emailAddress)  {
    EmailValidator emailValidator = EmailValidator.getInstance()
    if (!emailAddress.isAllWhitespace() || emailAddress!=null) {
        String[] email = emailAddress.replaceAll("//s+","").split(",")
        email.each {
            if (emailValidator.isValid(it)) {
            return true
            }else {return false}
        }
    }
} 
```

这与 sendMail 函数一起使用，我的代码在这里：

```
def emailTheAttendees(String email) {
    def user = lookupPerson()
    if (!email.isEmpty()) {
        def splitEmails = email.replaceAll("//s+","").split(",")
        splitEmails.each {
            def String currentEmail = it
            sendMail {
                to currentEmail
                System.out.println("what's in to address:"+ currentEmail)
                subject "Your Friend ${user.username} has invited you as a task attendee"
                html g.render(template:"/emails/Attendees")
            }
        }
    }

} 
```

这可以工作并将电子邮件发送到有效的电子邮件地址，但如果我随机放入不是地址的东西，则会因 sendMail 异常而中断。我不明白为什么它没有正确验证，甚至进入 emailTheAttendees() 方法......在 save 方法中被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T13:26:17.167

我建议使用[约束](http://grails.org/doc/2.1.0/guide/validation.html)和[命令对象](http://grails.org/doc/2.1.0/guide/single.html#commandObjects)来实现这一点。例子：

命令对象：

```
@grails.validation.Validateable
class YourCommand {
    String email
    String otherStuffYouWantToValidate

    static constraints = {
        email(blank: false, email: true)
        ...
    }
} 
```

在你的控制器中这样调用它：

```
class YourController {
    def yourAction(YourCommand command) {
        if (command.hasErrors()) {
            // handle errors
            return
        }

        // work with the command object data
    }
} 
```

# ruby-on-rails-3 - rake db：迁移错误不知道如何构建任务'rails_env'

> ID：12481624
> 
> 赞同：0
> 
> 时间：2012-09-18T16:58:51.040
> 
> 标签：ruby-on-rails-3, rake, rake-task

运行 rake db:migrate 时出现错误。我最近在这之后添加了一个 gem [gcm_on_rails](https://github.com/dondeng/gcm_on_rails/)，只是我得到了错误。

```
 rake aborted!
 Don't know how to build task 'rails_env'

 Tasks: TOP => db:migrate => db:load_config 
```

请帮忙

```
 rake aborted!
   Don't know how to build task 'rails_env'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task_manager.rb:49:in `[]'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:60:in `lookup_prerequisite'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:56:in `block in prerequisite_tasks'
   /Users/test/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:56:in `collect'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:56:in `prerequisite_tasks'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
  /Users/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
  /Users/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
  /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
   /Users/.rvm/gems/ruby-1.9.2-p320@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
   /Users/test/.rvm/gems/ruby-1.9.2-p320@global/bin/rake:19:in `load'
   /Users/test/.rvm/gems/ruby-1.9.2-p320@global/bin/rake:19:in `<main>'
   Tasks: TOP => db:migrate => db:load_config 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:19:16.287

为了使用 gem 中指定的 rake 任务，我在我的应用程序控制器中添加了以下代码。这导致了这个问题。**当我删除它时**，它工作正常。

```
require 'rake'
Rake::Task.clear
MyAPP::Application.load_tasks 
```

# c - 将二维结构传递给c中的函数

> ID：12481630
> 
> 赞同：-2
> 
> 时间：2012-09-18T16:59:00.027
> 
> 标签：c, 2d, structure

> **可能重复：**
> [将多维数组传递给函数 C](https://stackoverflow.com/questions/4742725/passing-multidimensional-array-to-a-function-c)

我想将二维结构传递给函数这是函数的原型和定义以及函数的“typedef”。

```
typedef struct {
BOOLEAN valid;
event_t event_list [MAXEVS];
int num_events;
} calentry_t;

calentry_t calendar[12] [31]; // The declaration of the structure 
```

我如何创建将传递给它的二维结构的函数的定义以及我如何传递它请有人发现我的错误

```
InitializeCalendar (calentry_t *calendar){
   int x, y;
for(x = 0; x < 12; x ++) {
    if (x==2){
            for(y = 0; y <= 28; y ++){ 
                (*calendar).calendar[x][y].valid = TRUE;
            }
            for (y=29; y<= 31; y++){
                (*calendar[x][y]).valid = FALSE;
        }
    }
    else if  (x==4 || x==6 || x==9 || x==11){
        for(y = 0; y <= 30; y ++){ 
            (*calendar[x][y]).valid = TRUE;
            }
            for (y=30; y<= 31; y++){
                (*calendar)[x][y].valid = FALSE;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:50:55.813

将二维结构包裹在另一个结构中。

```
typedef struct {
BOOLEAN valid;
event_t event_list [MAXEVS];
int num_events;
} calentry_t;

typedef struct {
    calentry_t calEntries[12][31];
} calendar_t;

calendar_t calendar;

InitializeCalendar(&calendar);

void InitializeCalendar(calendar_t *calendar)
{
    // for example
    calendar->calEntries[0][0].valid = TRUE;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:04:31.463

```
void foo(calentry_t mycal[12] [31]) {
  mycal[0][1].valid =1;
}

int main(void) {
  foo(calendar);
  printf("valid: %d\n", calendar[0][1].valid);
} 
```

# php - GB图像中的文字颜色不正确

> ID：12481631
> 
> 赞同：1
> 
> 时间：2012-09-18T16:59:01.803
> 
> 标签：php, gd

我有以下代码，它根据通过表单上传的内容创建基于 mySQL 数据库中的内容的图像

```
if($bg_img){
        list($img_width, $img_height, $img_type, $img_attr) = getimagesize('./images/'.$bg_img);
    }
    // Use image in background
    $im = imagecreatefrompng(IS_DIR."/images/".$bg_img);

    $fn = rgb2array($font_color);       
    $font_color = imagecolorallocate($im, $fn[0], $fn[1], $fn[2]); 
```

这会创建图像，然后分配字体颜色，然后在代码中添加文本等。一切正常。

不过我有一个奇怪的问题。我有两个 8 位 PNG。其中一个是纯灰色，另一个是带有徽标的实际图形图像。如果我使用基本的，文本使用我在 $font_color （来自 DB）中定义的颜色，没有问题。如果我使用更图形化的颜色，则颜色不正确，并且 imagecollorallocate 似乎没有返回一组 RGB 值。

对某些类型的 PNG 有什么需要做的吗？

# javascript - 保存用相机和旋转手机拍摄的图像时，Android 应用程序死机

> ID：12481632
> 
> 赞同：0
> 
> 时间：2012-09-18T16:59:03.870
> 
> 标签：javascript, android, cordova, jquery-mobile, android-camera

[编辑]

我实际上解决了这个问题，在我的活动清单中添加了以下行：

```
android:configChanges="orientation|keyboardHidden" 
```

我正在尝试使用phonegap保存用我的Android手机拍摄的图像，但是80％的时间我按下保存按钮，拍照后，我的应用程序就死了......

我已经看到这是phonegap + android的常见问题。我已经尝试过降低图像质量，清理手机内存，擦除应用程序的缓存目录......到目前为止，我仍然得到这种随机行为。

我尝试使用 imageData 和 imageURI，但仍然出现错误。

需要注意的是，每次我旋转手机时，我的应用都会死掉。有时当我保存图像时，屏幕会自动旋转，这也会杀死应用程序。

这是我到目前为止的代码......

```
 // Called when a photo is successfully retrieved
            //
            function onPhotoURISuccess(imageURI) {
                // Uncomment to view the image file URI
                // console.log(imageURI);

                $('#my_div') // this div belongs to my html markup (see bellow)
                    .empty()
                    .append(
                        $('<image>')
                            .attr('src', imageURI)
                            .attr('width', '100')
                            .attr('height', '100')
                            .css({
                                'background-color' : 'red',
                                 '-webkit-border-radius': '15px',
                                 '-moz-border-radius': '15px',
                                 'border-radius': '15px'
                            })
                );
            }

            // A button will call this function
            //
            function getPhoto(source) {
                // Retrieve image file location from specified source
                navigator.camera.getPicture(
                    function (imageUri) {
                        onPhotoURISuccess(imageUri, photo_div_id);   
                    }, 
                    onFail, {
                        quality: 30,
                        destinationType: Camera.DestinationType.FILE_URI,
                        sourceType: source
                    }
                );
            }

<div   id="my_div" class= "iconP">
   <input type="button"  name="photo_1" id="photo_1" onclick ="getPhoto()" value="photo 1"/>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T23:54:20.863

您需要向 mainfest 添加更多内容，否则您将再次遇到此问题。添加以下内容：`android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"`

# java - Java 高级图像处理

> ID：12481633
> 
> 赞同：-1
> 
> 时间：2012-09-18T16:59:04.380
> 
> 标签：java, image, 3d

我在 java 7 中处理图像时遇到问题。我研究了我遇到的问题三周，但未能找到解决方案，

我正在尝试在一个区域上设置图像，基本上是设置角落位置。我正在使用 BufferedImage。

这是我正在编写 3D 转换代码的 3D 游戏。我设法创建了一个 3d 世界，并用立方体填充它，用 graphics.fillPolygon() 填充侧面：

我想做的是绘制一个填充多边形形状的图像。

我将不胜感激任何帮助（即使它更好地格式化了这篇文章）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:33:27.303

您可以在图形上使用转换。[这](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html)是一个关于它的小教程。有了它，你可以改变已经绘制的东西。如果您想以不同的方式转换多个图像，您可以在不同的画布上绘制它们，然后分别进行转换。然后你可以将图像合并在一起......

但我建议为此使用 3D 引擎（JOGL、jMonkeyEngine 或其他）（除非您想通过此任务了解几何计算）。使用 OpenGL 也比自己绘制东西并在代码中进行计算要快得多（最可能的意思是：在 CPU 上而不是 GPU 上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:52:27.123

您是否尝试过使用 [drawImage](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.image.ImageObserver%29)？而不是`.fillPolygon`？

# git - 从 Git 提交中删除文件

> ID：12481639
> 
> 赞同：1957
> 
> 时间：2012-09-18T16:59:12.070
> 
> 标签：git, git-commit

我正在使用 Git，并且我提交了几个文件使用

```
git commit -a 
```

后来发现有一个文件被错误的添加到了commit中。

如何从上次提交中删除文件？

* * *

## 回答 #1

> 赞同：3711
> 
> 时间：2013-03-10T10:56:37.877

我认为这里的其他答案是错误的，因为这是一个将错误提交的文件从上一次提交移回暂存区域的问题，而不取消对它们所做的更改。这可以像 Paritosh Singh 建议的那样完成：

```
git reset --soft HEAD^ 
```

或者

```
git reset --soft HEAD~1 
```

然后重置不需要的文件，以便将它们排除在提交之外（旧方式）：

```
git reset HEAD path/to/unwanted_file 
```

请注意，由于 Git`2.23.0`可以（**新方式**）：

```
git restore --staged path/to/unwanted_file 
```

现在再次提交，您甚至可以重复使用相同的提交消息：

```
git commit -c ORIG_HEAD 
```

* * *

## 回答 #2

> 赞同：374
> 
> 时间：2012-09-18T17:22:53.393

**注意**！如果您只想从之前的提交中删除一个文件，并将*其保存在磁盘上*，请阅读[上面的 juzzlin 的答案](https://stackoverflow.com/a/15321456/11343)。

如果这是您的最后一次提交，并且您想**从本地和远程存储库中完全删除该文件**，您可以：

1.  删除文件`git rm <file>`
2.  使用修改标志提交：`git commit --amend`

修改标志告诉 git 再次提交，但是“合并”（不是在合并两个分支的意义上）这个提交与最后一次提交。

正如评论中所说，在`git rm`这里使用就像使用`rm`命令本身一样！

* * *

## 回答 #3

> 赞同：210
> 
> 时间：2015-01-27T15:24:57.883

现有答案都在谈论从***上次***提交中删除不需要的文件。

如果您想从***旧***提交（甚至推送）中删除不需要的文件并且不想创建新的提交，这是不必要的，因为该操作：

1.  使用 ; 找到您希望文件符合的提交

`git log --graph --decorate --oneline`

2.  使用签出该提交

`git checkout <commit_id> <path_to_file>`

如果要删除许多文件，可以多次执行此操作。

3.

`git commit -am "remove unwanted files"`

4.

**查找错误添加文件**的提交的commit_id，这里说“35c23c2”

`git rebase 35c23c2~1 -i // notice: "~1" is necessary`

此命令根据您的设置打开编辑器。默认是 vim。如果要更改全局 git 编辑器，请使用；

`git config --global core.editor <editor_name>`

5.

将最后一次提交，应该是“删除不需要的文件”，移动到错误提交的下一行（在我们的例子中是“35c23c2”），并将命令设置为`fixup`：

```
pick 35c23c2 the first commit
fixup 0d78b28 remove unwanted files 
```

保存文件后你应该很好。

6.

完成 ：

`git push -f`

如果不幸遇到冲突，则必须手动解决。

* * *

## 回答 #4

> 赞同：185
> 
> 时间：2017-02-25T00:06:55.877

正如接受的答案所示，您可以通过重置整个提交来做到这一点。但这是一种相当严厉的方法。
一种更简洁的方法是保留提交，并简单地从中删除更改的文件。

```
git reset HEAD^ -- path/to/file
git commit --amend --no-edit 
```

将`git reset`按照之前提交中的方式获取文件，并将其暂存到索引中。工作目录中的文件保持不变。
然后`git commit`将提交并将索引压缩到当前提交中。

这实质上采用了先前提交中的文件版本并将其添加到当前提交中。这导致没有净变化，因此文件被有效地从提交中删除。

* * *

## 回答 #5

> 赞同：56
> 
> 时间：2012-09-18T18:28:35.340

如果您尚未在服务器上推送更改，则可以使用

```
git reset --soft HEAD~1 
```

它将重置所有更改并恢复为一次提交

如果您已推送更改，请按照@CharlesB 回答的步骤操作

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2013-01-28T14:00:04.950

使用 rm 删除文件将删除它！

您总是在 git 中添加提交而不是删除，因此在这种情况下，将文件返回到第一次提交之前的状态（如果文件是新文件，这可能是删除 'rm' 操作）然后重新提交，文件就会消失。

要将文件返回到以前的状态：

```
 git checkout <commit_id> <path_to_file> 
```

或将其返回到远程 HEAD 的状态：

```
 git checkout origin/master <path_to_file> 
```

然后修改提交，您应该会发现该文件已从列表中消失（并没有从您的磁盘中删除！）

* * *

## 回答 #7

> 赞同：40
> 
> 时间：2017-08-17T09:52:03.993

我会用例子向你解释。
设 A、B、C 为 3 次连续提交。提交 B 包含一个不应提交的文件。

```
git log  # take A commit_id
git rebase -i "A_commit_ID" # do an interactive rebase
change commit to 'e' in rebase vim # means commit will be edited
git rm unwanted_file
git rebase --continue
git push --force-with-lease <branchName> 
```

* * *

## 回答 #8

> 赞同：39
> 
> 时间：2013-08-23T19:01:20.817

```
git checkout HEAD~ path/to/file
git commit --amend 
```

* * *

## 回答 #9

> 赞同：33
> 
> 时间：2014-12-07T07:13:42.430

以下将仅取消暂存您想要的文件，这是 OP 所要求的。

```
git reset HEAD^ /path/to/file 
```

您将看到类似以下内容...

> 要提交的更改：（使用“git reset HEAD ...”取消暂存）
> 
> 修改：/path/to/file
> 
> 未为提交暂存的更改：（使用“git add ...”更新将提交的内容）（使用“git checkout -- ...”放弃工作目录中的更改）
> 
> 修改：/path/to/file

*   “要提交的更改”是提交之前文件的先前版本。如果文件从不存在，这看起来像是删除。如果您提交此更改，将会有一个修订版将更改还原到您的分支中的文件。
*   “Changes not staged for commit”是您提交的更改，以及文件的当前状态

此时，您可以对文件执行任何您喜欢的操作，例如重置为不同的版本。

当您准备好提交时：

```
git commit --amend -a 
```

或（如果您正在进行一些其他不想提交的更改）

```
git commit add /path/to/file
git commit --amend 
```

* * *

## 回答 #10

> 赞同：31
> 
> 时间：2019-02-08T12:17:35.540

你可以简单地试试。

```
git reset --soft HEAD~1 
```

并创建一个新的提交。

但是，有一个很棒的软件“gitkraken”。这使得使用 git 变得容易。

* * *

## 回答 #11

> 赞同：17
> 
> 时间：2016-02-23T06:22:47.903

```
git rm --cached <file_to_remove_from_commit_<commit_id>_which_added_file>
git commit -m "removed unwanted file from git" 
```

仍然会给你留下本地文件。如果您也不希望该文件在本地，则可以跳过 --cached 选项。

如果所有工作都在您的本地分支上，您需要将文件保留在以后的提交中，并且就像拥有干净的历史记录一样，我认为更简单的方法可能是：

```
git rm --cached <file_to_remove_from_commit_<commit_id>_which_added_file>
git commit --squash <commit_id>
git add <file_to_remove_from_commit_<commit_id>_which_added_file>
git commit -m "brand new file!"
git rebase --interactive <commit_id>^ 
```

然后您可以轻松完成变基，而无需记住更复杂的命令或提交消息或键入太多内容。

* * *

## 回答 #12

> 赞同：14
> 
> 时间：2015-05-18T19:50:19.287

使用 git GUI 可以简化从先前提交中删除文件的过程。

假设这不是共享分支并且您不介意[重写 history](https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History)，然后运行：

```
git gui citool --amend 
```

您可以取消选中错误提交的文件，然后单击“提交”。

![在此处输入图像描述](../Images/2f89f64e7862d20289a1f595bf0140f0.png)

该文件从提交中删除，但将*保留在磁盘上*。因此，如果您在错误地添加文件后取消选中该文件，它将显示在您的未跟踪文件列表中（如果您在错误地修改文件后取消选中该文件，它将显示在您的未暂存提交列表中的更改中）。

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2013-06-17T20:07:30.910

如果您想保留您的提交（也许您已经花了一些时间编写详细的提交消息并且不想丢失它），并且您只想从提交中删除文件，而不是完全从存储库中删除：

```
git checkout origin/<remote-branch> <filename>
git commit --amend 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2015-09-10T11:51:50.553

执行以下命令序列：

```
//to remove the last commit, but preserve changes  
git reset --soft HEAD~1

//to remove unneded file from the staging area  
git reset HEAD `<your file>` 

//finally make a new commit  
git commit -m 'Your message' 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-05-25T15:24:40.623

只是想补充最佳答案，因为我必须运行一个额外的命令：

```
git reset --soft HEAD^
git checkout origin/master <filepath> 
```

干杯!

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2019-03-31T05:35:35.683

如果要从以前的提交中删除文件，请使用过滤器

```
git filter-branch --prune-empty --index-filter 'git rm --ignore-unmatch --cached "file_to_be_removed.dmg"' 
```

如果您看到此错误：

*无法创建新备份。以前的备份已经存在于 refs/original/ 使用 -f 强制覆盖备份*

只需删除本地 repo 上的 refs 备份

```
$ rm -rf .git/refs/original/refs 
```

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2020-08-14T07:37:43.033

```
git reset --soft HEAD~1\. 
```

这将撤消本地存储库中的最后一次提交，并将所有内容移回舞台区域，就像在提交之前一样。然后像往常一样使用任何 Git UI 工具（如 TortoiseGit、Git UI、Git Extensions...）来取消暂存我们不想提交的文件，然后再次提交。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2014-08-14T05:34:23.413

对我有用的东西，但仍然认为应该有更好的解决方案：

```
$ git revert <commit_id>
$ git reset HEAD~1 --hard 
```

只需将您要丢弃的更改留在其他提交中，检查其他人

```
$ git commit --amend // or stash and rebase to <commit_id> to amend changes 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2018-05-08T08:40:30.017

`git reset --soft HEAD^`回溯你的提交，当你输入时`git status`，它会告诉你要做什么：

```
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage) 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2017-01-23T04:13:29.127

有同样的问题，我在本地分支中进行了更改，我只想恢复一个文件。对我有用的是-

*（下面的**feature/target_branch**是我所有更改的地方，包括我想为特定文件撤消的更改）*

*（**origin/feature/target_branch**是我要将更改推送到的远程分支）*

*（**功能/暂存**是我的临时暂存分支，我将从所有想​​要的更改中推送，不包括对该文件的更改）*

1.  **从我的origin/feature/target_branch**创建一个本地分支- 称之为**feature/staging**

2.  将我的工作本地分支**feature/target_branch**合并 到**feature/staging**分支

3.  签出**功能/暂存**然后**git reset --soft ORIG_HEAD** *（现在所有来自功能/暂存的更改都将暂存但未提交。）*

4.  取消暂存我之前签入的文件并进行不必要的更改

5.  **将feature/staging**的上游分支更改为 *origin/feature/target_branch*

6.  提交其余的分阶段更改并将上游推送到我的远程*origin/feature/target_branch*

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2019-03-31T05:45:00.817

如果您还没有将更改推送到 git

```
git reset --soft HEAD~1 
```

它将重置所有更改并恢复为一次提交

如果这是您最后一次提交并且您想从本地和远程存储库中删除文件，请尝试以下操作：

```
git rm <file>
 git commit --amend 
```

甚至更好：

先重置

```
git reset --soft HEAD~1 
```

重置不需要的文件

```
git reset HEAD path/to/unwanted_file 
```

再次提交

```
git commit -c ORIG_HEAD 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-05-19T20:58:47.743

实际上，我认为一个更快更简单的方法是使用 git rebase 交互模式。

```
git rebase -i head~1 
```

（或head~4，你想走多远）

然后，不要使用“pick”，而是使用“edit”。我没有意识到“编辑”有多么强大。

[https://www.youtube.com/watch?v=2dQosJaLN18](https://www.youtube.com/watch?v=2dQosJaLN18)

希望你会发现它有帮助。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2017-09-28T21:49:21.527

如果您不再需要该文件，则可以

```
git rm file
git commit --amend
git push origin branch 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-03-14T19:41:51.127

如果你在使用 GitHub 并且还没有推送提交，GitHub Desktop 可以轻松解决这个问题：

1.  选择存储库 -> 撤消最近的提交
2.  取消选择您错误添加的文件。您之前的提交消息将已经在对话框中。
3.  按下提交按钮！

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-08-14T16:19:26.483

这对我来说可以从我最初将文件推送到分支的位桶存储库中删除文件。

```
git checkout origin/develop <path-to-file>
git add <path-to-file>
git commit -m "Message"
git push 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-08-28T01:03:21.760

我将当前文件复制到另一个文件夹中，然后通过以下方式删除所有未推送的更改：

```
git reset --hard @{u} 
```

然后把东西复制回来。提交，推动。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-02-14T15:41:35.143

从 git 2.23 开始，你可以简单地使用这个命令：

```
git restore --staged <file> 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2020-11-12T19:34:18.407

我们可以做的另一种方法是：

1.  删除文件
2.  使用已删除的文件进行新的提交
3.  进行交互式变基并压缩两个提交
4.  推

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2021-01-13T22:55:58.303

如果出于任何原因（如我的情况），您将无法从上次提交中重置所有文件 - 如`git reset --soft HEAD^`- 并且您的情况符合以下条件，您可以按照我在下面的说明进行操作。

1.  您尝试删除的文件在最后一次提交之前已经存在于存储库中
2.  您可以撤消自上次提交以来文件中的所有更改（`HEAD~2`- 上次提交之前的提交）

然后，您可以撤消自上次提交 (HEAD~2) 以来的所有更改，保存文件，暂存它 ( `git add filename`)，然后运行`git commit --amend --no-edit`​​. 这将提交“新更改” - 实际上是将文件重新提交到最后一次提交，就像它在最后一次提交之前一样。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-05-21T04:50:44.360

```
Here is the step to remove files from Git Commit.

>git reset --soft HEAD^1(either commitid ) -- now files moved to the staging area.
>git rm --cached filename(it will removed the file from staging area)
>git commit -m 'meaningfull message'(Now commit the required files) 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-02-15T23:45:43.073

既然 Apple 已将所有 MacOS 用户都更新为 zsh，那么正确的答案就不再适用了。

```
git reset --soft HEAD^
zsh: no matches found: HEAD^ 
```

您可以通过单引号来防止 shell 将 ^ 视为特殊字符。

```
git reset --soft 'HEAD^' 
```

或者，您可以在 shell 中禁用此行为。通过更新你的 ~/.zshrc

```
unsetopt nomatch 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-10-28T00:24:07.737

# 将文件保存在本地（从 gi​​t 中删除）

如果要**保留文件**，可以`--catch`像这样使用：

```
git rm --cached filename 
```

[![在此处输入图像描述](../Images/bdcf7031f35a834864f0000ba489f237.png)](https://i.stack.imgur.com/Eo1oR.png)

# 删除本地文件（并从 git 中删除）

否则，如果您想**删除文件**，只需使用：

```
git rm filename 
```

[![在此处输入图像描述](../Images/7f845c625820cbe142578fdd17dfec63.png)](https://i.stack.imgur.com/Oby3I.png)

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2020-04-06T05:06:28.737

目前没有一个答案是合理的。听起来有足够的需求应该提出一个真正的解决方案： [https ://github.com/git/git/blob/master/Documentation/SubmittingPatches](https://github.com/git/git/blob/master/Documentation/SubmittingPatches)

> git --uncommit <文件名>

会好的。我知道我们不想修改历史记录，但如果我是本地人并且不小心添加了本地“hack”文件并希望将其从提交中删除，这将非常有帮助。

# c# - 实体对象的更新在删除前未触发

> ID：12481645
> 
> 赞同：0
> 
> 时间：2012-09-18T17:00:03.287
> 
> 标签：c#, .net, entity-framework, entity-framework-4

所以基本上我正在尝试在实体框架中执行这一系列事件。

1.  创建一个新账户
2.  获取现有帐户
3.  将所有数据从旧帐户移动到新帐户（​​交易、用户等）
4.  删除旧帐户

我在单个 ObjectContext 中“一次性”完成这一切。

当我在上下文中调用 SaveChanges 时它失败了。我收到外键约束错误。

我在 SQL 探查器中检查了这一点，结果发现实体框架没有发送任何更新，只是选择然后删除。

我有点理解为什么它会这样工作，但必须有某种方法可以强制它正常工作，而不必调用 SaveChanges() 两次或其他什么。

希望。

* * *

我的合并功能基本上是这样的

```
public void Merge(Account newAccount, Account oldAccount)
{
    // ...

    foreach (var user in oldAccount.Users.ToList())
    {
        oldAccount.Users.Remove(user);
        newAccount.Users.Add(user);
    }

    // ...

    _unitOfWork.Accounts.Delete(oldAccount);
} 
```

这些对象是由 EF4 POCO 实体生成器创建的 POCO 对象。为了避免粘贴整个类，这里​​只是一个关联属性及其“修复”功能。

```
public virtual ICollection<User> Users
{
    get
    {
        if (_users == null)
        {
            var newCollection = new FixupCollection<User>();
            newCollection.CollectionChanged += FixupUsers;
            _users = newCollection;
        }
        return _users;
    }
    set
    {
        if (!ReferenceEquals(_users, value))
        {
            var previousValue = _users as FixupCollection<User>;
            if (previousValue != null)
            {
                previousValue.CollectionChanged -= FixupUsers;
            }
            _users = value;
            var newValue = value as FixupCollection<User>;
            if (newValue != null)
            {
                newValue.CollectionChanged += FixupUsers;
            }
        }
    }
}   

private void FixupUsers(object sender, NotifyCollectionChangedEventArgs e)
{
    if (e.NewItems != null)
    {
        foreach (User item in e.NewItems)
        {
            item.Account = this;
        }
    }

    if (e.OldItems != null)
    {
        foreach (User item in e.OldItems)
        {
            if (ReferenceEquals(item.Account, this))
            {
                item.Account = null;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:27:53.707

您使用对象作为引用在 for 循环中添加和删除，这是在添加时使用对象的状态下通过键获取对象的最佳解决方案。

```
 oldAccount.Users.Remove(user);
 newAccount.Users.Add(users.FirstOrDefault(t=>t.ID = user.Id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T08:31:58.850

好的想出了解决方案。@CodeGorilla 的评论给了我一个提示。

基本上我只需要打电话

```
_context.SaveChanges(SaveOptions.AcceptAllChangesAfterSave); 
```

在尝试删除帐户之前。这迫使实体框架执行数据库中的所有更新。之后删除它就没有问题了。

# c# - 在抛出空异常之前没有命中 C# 调试断点

> ID：12481646
> 
> 赞同：0
> 
> 时间：2012-09-18T17:00:03.600
> 
> 标签：c#, asp.net, debugging, breakpoints

什么会导致 Visual Studios 调试器忽略 aspx 页面后面代码中的断点并从空会话变量中抛出空异常？

我一直在尝试调试会话变量超时问题，但是每次运行调试器时都会抛出空异常而不是遇到断点（我在页面加载时有断点以及应该触发回发的按钮）。

有任何想法吗？

## 编辑：

_reportEntity 是保存到会话变量的访问器/修改器属性：

```
Session["_PD_AR_reportEntity"] 
```

此变量在用户第一次到达页面时在 Page_Load 中初始化，然后在每次回发时更新。我们将 LLBL 生成的实体类保存到会话变量中。在调试问题之前，我试图调试为什么我们的会话变量在用户不活动 20 分钟后丢失，因为我们有一个类似的模块，使用相同的技术、应用程序池和超时设置（1440 分钟）并且它不会丢失20 分钟后它的会话变量。

如果这是一个 UI 问题，我需要提出我们正在使用 Telerik AJAX 控件，我们有一个用于部分回发的 RadAjaxLOadingPanel 和一个 RadMultiPage 来处理我们的标签条。

这是来自被抛出的 Null 的信息：

```
Server Error in '/Project_Direct/Secure/Modules/AnalyticReports' Application.
--------------------------------------------------------------------------------

 Object reference not set to an instance of an object. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error: 
Line 2734:            {
Line 2735:                GridDataItem item = (GridDataItem)ddl.NamingContainer;
**Line 2736:                var foundAnalyte = _reportEntity.GetReportColumns.AsEnumerable().Where(x => x["Analyte"].ToString() == item["bndAnalyte"].Text).FirstOrDefault();**
Line 2737:                //string v = item["ParameterUnitsLookup"].Text;//ParameterUnits
Line 2738:                if (foundAnalyte == null) 

Stack Trace: 
[NullReferenceException: Object reference not set to an instance of an object.]
   Trihydro.ProjectDirect.Modules.AnalyticReports.TabView.ddlAnalyteUnit_PreRender(Object o, EventArgs e) in C:\TFSWorkspaceKEllington\Trihydro_IPortal\Modules\AnalyticReports\TabView.aspx.cs:2736
   System.Web.UI.Control.OnPreRender(EventArgs e) +11056781
   System.Web.UI.WebControls.ListControl.OnPreRender(EventArgs e) +41
   System.Web.UI.Control.PreRenderRecursiveInternal() +107
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Control.PreRenderRecursiveInternal() +223
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3393

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.5456; ASP.NET Version:2.0.50727.5456 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:24:37.557

我要关闭它，因为我现在正在处理新任务。

我 90% 确定导致所有这些的根本问题是我们的 IIS 7 设置将我们的空闲超时设置为 20 分钟，这导致我们的会话变量死亡并导致我们的空问题导致调试器中出现这种行为。感谢您在这件事上的帮助 JWJones。

# ruby-on-rails - 在 postgres 上测试规范时发出警告：没有正在进行的事务

> ID：12481652
> 
> 赞同：10
> 
> 时间：2012-09-18T17:00:26.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, postgresql, transactions

对于测试的每个步骤发生 2 行：

```
WARNING:  there is already a transaction in progress
NOTICE:  there is no transaction in progress 
```

Spork 线跟随三元组：

```
NOTICE:  there is no transaction in progress
NOTICE:  there is no transaction in progress
NOTICE:  there is no transaction in progress
WARNING:  there is already a transaction in progress
WARNING:  there is already a transaction in progress
WARNING:  there is already a transaction in progress 
```

我不知道这可能很重要，只是警告过。宝石文件：

```
group :test do
  gem 'rspec-rails'
  gem 'factory_girl_rails'
  gem 'spork-rails'
  gem 'capybara'
  gem 'database_cleaner'
end 
```

都是定制的，所以不需要开发组，反正也没用。[这是 spec_helper](https://gist.github.com/3744332)。我发现它是 PostgreSQL 功能，但我找不到如何修复它。我将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T14:47:15.347

在 spec_helper.rb

```
config.use_transactional_examples = false #factoryGirl
config.use_transactional_fixtures = false #fixtures

config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
  end 
```

在数据库.yml

```
test:
  adapter: postgresql
  encoding: unicode
  host: localhost
  database: myapp_test
  username: my_username
  password:
  allow_concurrency: true
  pool: 5
  min_messages: error 
```

即使您设置了 min_messages 选项，您仍然可能会看到如下控制台输出：

```
WARNING:  there is already a transaction in progress 
```

编辑文件

```
/opt/local/var/db/postgresql92/defaultdb/postgresql.conf 
```

并设置以下内容：

```
client_min_messages = error 
```

现在一切都应该顺利进行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-18T17:14:05.723

在`spec_helper.rb`，我会尝试改变这个

```
 config.before(:suite) do
    DatabaseCleaner.strategy = :transaction
    DatabaseCleaner.clean_with(:truncation)
  end 
```

对此

```
 config.before(:suite) do
    DatabaseCleaner.strategy = :truncation
    DatabaseCleaner.clean_with(:truncation)
  end 
```

# java - 带通配符的 lucene 搜索速度非常慢

> ID：12481661
> 
> 赞同：1
> 
> 时间：2012-09-18T17:00:57.747
> 
> 标签：java, performance, optimization, lucene

我有一个包含 1000 个文件的列表（并且每年增长两倍），其中仅包含文本，每个文件的大小约为 8Mb，我正在尝试查找给定（通配符）表达式的文件名。

例如，所有文件都包含此类数据

> COD1004129641208240002709991455671866 4IT / HUF 4400QQQUF 3300QQQUF

我的搜索可能是：“*9991455671866”，它与上面的行匹配。

问题是（也许我的期望太高）**返回结果需要一分钟多的时间。**

我的文档索引如下所示：

```
private Document getDocument(File file) throws IOException
{
    FileReader reader = new FileReader(file);
    Document doc = new Document();
    doc.add(new Field(IndexProperties.FIELD_FILENAME, file.getName(), Field.Store.YES, Field.Index.NOT_ANALYZED)); 
    doc.add(new Field(IndexProperties.FIELD_CONTENT, reader));

    return doc;
} 
```

分析仪

```
 Directory fsDir = FSDirectory.open(new File(indexFolder));
        Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);

        // build the writer
        IndexWriterConfig indexWriter = new IndexWriterConfig(Version.LUCENE_36, analyzer);
        IndexWriter writer = new IndexWriter(fsDir, indexWriter); 
```

通配符搜索是：

```
public List<String> findFilenameByContent(String wildCardContent, String INDEX_FOLDER, String TICKETS_FOLDER) throws Exception
{   
    long start = System.currentTimeMillis();
    Term term = new Term(IndexProperties.FIELD_CONTENT, wildCardContent); //eg *9991455671866
    Query query = new WildcardQuery(term);

    //loop through docs
    Directory fsDir = FSDirectory.open(new File(INDEX_FOLDER));
    IndexSearcher searcher = new IndexSearcher(IndexReader.open(fsDir));
    ScoreDoc[] queryResults = searcher.search(query, 10).scoreDocs;  
    List<String> strs = new ArrayList<String>();

    for (ScoreDoc scoreDoc : queryResults) 
    {  
        Document doc = searcher.doc(scoreDoc.doc);  
        strs.add(doc.get(IndexProperties.FIELD_FILENAME));
    }

    searcher.close();
    long end = System.currentTimeMillis();
    System.out.println("TOTAL SEARCH TIME: "+(end-start)/1000.0+ "secs");
    return strs;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:07:54.437

# exception - PowerShell：使用参数验证而不抛出异常

> ID：12481662
> 
> 赞同：4
> 
> 时间：2012-09-18T17:01:07.390
> 
> 标签：exception, powershell, command-line-arguments

我想以这种方式调用 PowerShell 脚本：
`script.ps1 -path mypath\to\files\ -days 6 -hours 0`

要验证命令行参数，我可以手动完成，也可以依赖`param`语法：

```
Param (
    [Parameter(Mandatory=$true )] [string] $path,
    [Parameter(Mandatory=$false)] [int]    $days,
    [Parameter(Mandatory=$false)] [int]    $hours
) 
```

如果我使用`param`语法：

*   参数定义必须是脚本的第一行（不包括注释）。好的，对我来说不是问题

*   如果参数不正确，我无法捕捉到错误（例如显示自定义错误消息）

我想在使用错误参数调用脚本时显示自定义错误消息。
**是否有可能以及如何在参数错误的情况下捕获异常？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T14:04:01.460

好吧，不可能使用`param`AND 来捕获相关异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:37:05.163

这些示例适用于函数（简单和高级），但同样的想法也适用于脚本`param`：

```
# Simple function.
# Everything not declared in `param` goes to $args.
# If $args is not empty then there are "invalid" parameters or "unexpected" arguments
function test {
    param (
        [string]$path,
        [int]$days,
        [int]$hours
    )
    # check $args and throw an error (in here we just write a warning)
    if ($args) { Write-Warning "Unknown arguments: $args" }
} 
```

或者

```
# Advanced function.
# For an advanced function we can use an extra argument $args
# with an attribute `[Parameter(ValueFromRemainingArguments=$true)]`
function test {
    param (
        [Parameter(Mandatory=$true )] [string] $path,
        [Parameter(Mandatory=$false)] [int]    $days,
        [Parameter(Mandatory=$false)] [int]    $hours,
        [Parameter(ValueFromRemainingArguments=$true)] $args
    )
    # check $args and throw an error (in this test we just write a warning)
    if ($args) { Write-Warning "Unknown arguments: $args" }
} 
```

以下测试：

```
# invalid parameter
test -path p -invalid -days 5

# too many arguments
test -path p 5 5 extra 
```

在这两种情况下都会产生相同的输出：

```
WARNING: Unknown arguments: -invalid
WARNING: Unknown arguments: extra 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-12T21:04:29.597

一种可能的解决方法是将您的实际功能包装在另一个中。类似于私人/公共关系的东西。例子：

```
function Example-Private
{
    [CmdletBinding()]
    Param
    (
        [ValidateNotNullOrEmpty()]
        [string]$Arg1,
        [ValidateNotNullOrEmpty()]
        [string]$Arg2   
   )

   # Do what you need
}

function Example-Public
{
    [CmdletBinding()]
    Param
    (
        [string]$Arg1,
        [string]$Arg2   
    )

    try
    {
       Example-Private $Arg1 $Arg2
    }
    catch
    {
       # Display a user-friendly message, save exception into a log file, etc.
    }
} 
```

如果您正在开发一个模块，您可以在这里查看如何导出您的公共函数并隐藏私有函数：[导出 Powershell 函数](https://stackoverflow.com/questions/6032344/how-to-hide-helper-functions-in-powershell-modules)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-18T17:36:33.923

在`Begin`块中，您始终可以对参数进行进一步验证，但如果参数错误，我认为您不想继续执行。也就是说，您想抛出一个终止错误。这是一个例子：

```
param (
    [Parameter(Mandatory=$true )] [string] $path,
    [Parameter(Mandatory=$false)] [int]    $days,
    [Parameter(Mandatory=$false)] [int]    $hours
)

Begin {
    if ($hours -lt 0 -or $hours -gt 23) {
        throw "Hours parameter must be between 0 and 23"
    }
} 
```

也就是说，我不确定这是否比使用 PowerShell 的内置参数验证功能更好，例如：

```
param (
    [Parameter(Mandatory=$true )] [string] $path,
    [Parameter(Mandatory=$false)] [int]    $days,
    [Parameter(Mandatory=$false)]
    [ValidateRange(0,23)]
    [int]
    $hours
) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-15T13:35:34.447

如果您添加具有属性“ValueFromRemainingArguments”的字符串类型的虚拟参数，您可以使用参数语法来做到这一点。然后您可以在脚本中检查此虚拟参数并采取适当的措施，例如：

```
Param(
    [Parameter(Mandatory=$false)]
    [SWITCH]$myparam1,

    [Parameter(Mandatory=$false)]
    [SWITCH]$myparam2,

    [parameter(Mandatory=$false,ValueFromRemainingArguments=$true)]
    [STRING]$dummy     
    )

if ($dummy -eq anythingYouDontLike) throwAMessageOrSomething. 
```

# asp.net-mvc - Visual Studio 控制器/视图工具鼓励直接使用实体框架？

> ID：12481665
> 
> 赞同：0
> 
> 时间：2012-09-18T17:01:10.277
> 
> 标签：asp.net-mvc, visual-studio

我一直在研究 ASP.net MVC 一段时间。似乎大多数博客和帖子都表明“最佳实践”是通过实现存储库模式来抽象出实体框架。似乎推荐的做法是使用特定于视图的模型，而不是直接使用 EF 域实体。

这是有道理的，因为您可以在存储库中实现一个透明的缓存层，您的 MVC 应用程序不需要了解有关实体框架的任何信息，并且特定于视图的 POCO 模型没有附加所有 EF 方法和属性给他们（这往往会弄乱 XML 和 JSON 序列化）。

但如果这是人们“应该”开发的方式，为什么 Visual Studio 中的所有控制器/视图向导和工具都直接专注于实体框架？为什么[http://www.asp.net/mvc](http://www.asp.net/mvc)上的所有 Microsoft 示例似乎都直接与框架和域实体一起工作，而不是创建具有缓存和使用视图特定模型的存储库？

另外，如果我应该使用特定于视图的模型，我是否将域实体映射到控制器中的那些模型上？如果我只需要某些字段，将对象图返回给控制器不是效率低下吗？或者我应该在我的存储库上创建特定于视图模型的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:06:19.403

> 为什么[http://www.asp.net/mvc](http://www.asp.net/mvc)上的所有 Microsoft 示例似乎都直接与框架和域实体一起工作，而不是创建具有缓存和使用视图特定模型的存储库？

不幸的是，我不能回答这个问题，因为我不是在创建这些向导的 Visual Studio 团队中工作的 Microsoft 员工，也不是在[http://asp.net/mvc](http://asp.net/mvc)站点上发布内容。就我个人而言，我对 Visual Studio 中 99% 的向导都过敏，并且从未接触过它们。

> 另外，如果我应该使用特定于视图的模型，我是否将域实体映射到控制器中的那些模型上？

是的。或者，您可以使用[AutoMapper](http://automapper.org/)来简化此过程并整理您的控制器操作。

> 如果我只需要某些字段，将对象图返回给控制器不是效率低下吗？

不，它是有效的。事实上，它甚至比映射到视图模型更快（在性能方面）。只是在大多数情况下，您的领域模型不适合您的视图要求。从那一刻起，噩梦将在您的视图中开始，这些视图将变成意大利面条式代码，以尝试适应这些领域模型——您的视图现在变得低效且不易维护。您将很快意识到域模型并不包含视图所需的所有必要信息。接下来会发生什么？你开始使用另一个我对它过敏的概念——`ViewBag`. 所以你以强类型模型的形式将某些东西传递给视图，以弱类型结构的形式将其他东西传递给视图，事情变得混乱。此外，采用域模型而不是视图模型的控制器操作容易受到大规模注入攻击，并且您可能会遇到验证等问题。

> 或者我应该在我的存储库上创建特定于视图模型的方法？

绝对不。存储库仅适用于域模型。它不知道什么是视图模型。

当然，所有这些都是我的 2 美分。如果这是更适合您并且您感觉更舒服的模式，则完全可以忽略它们并直接在您的视图中使用您的 EF 域模型。试图强加一种或另一种模式是不正确的。只需使用您认为适合您需求的那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:10:43.070

与最佳实践一样，它们往往不会涵盖所有情况。使用存储库模式被认为是企业解决方案的最佳实践。但是，如果您只是将一个不需要大量维护的快速网站放在一起，那就太矫枉过正了。有些人会告诉您，您应该始终使用最佳实践，但实际上您通常只是想得到一些可行的方法。如果是这种情况，生成的方法既快速又简单。

此外，如果您正在学习 MVC，存储库模式是另一回事，我猜 MS 会按照他们帮助新手的方式设置它，因为他们知道更有经验的开发人员可能无论如何都希望以自己的方式进行操作。

只是预感：p

# python - 在 Tweepy 和 Tornado WebSocket 中的类之间传递数据

> ID：12481670
> 
> 赞同：2
> 
> 时间：2012-09-18T17:01:34.367
> 
> 标签：python, websocket, tornado, tweepy

我有两个主要模块，Tornado WebSocket 和 Tweepy Streaming，我试图让它们互相交谈。

在下面`on_status`的`StdOutListener`Tweepy 类中（标有`<--`），我想调用`WSHandler.on_message`更高层的 Tornado 类，数据从`on_status`.

但是，我无法这样做，因为我收到与未定义实例等相关的错误消息，代码如下。非常感谢任何帮助！

（此外，我设法同时运行两个模块的唯一非阻塞方式是使用线程，因为`IOLoop.add_callback`它不会`StdOutListener`阻止阻塞。我很想知道为什么或是否推荐这种实现。谢谢！）

```
import os.path
import tornado.httpserver
import tornado.websocket
import tornado.ioloop
import tornado.web
import threading
import time
import datetime

# websocket
class FaviconHandler(tornado.web.RequestHandler):
    def get(self):
        self.redirect('/static/favicon.ico')

class WebHandler(tornado.web.RequestHandler):
    def get(self):
        self.render("websockets.html")

class WSHandler(tornado.websocket.WebSocketHandler):
    def open(self): 
        cb = tornado.ioloop.PeriodicCallback(self.spew, 1000, io_loop=main_loop)
        cb.start()
        print 'new connection'
        self.write_message("Hi, client: connection is made ...")

    def on_message(self, message):
        print 'message received: \"%s\"' % message
        self.write_message("Echo: \"" + message + "\"")
        if (message == "green"):
            self.write_message("green!")

    def on_close(self):
        print 'connection closed'

    def spew(self):
        msg = 'spew!'
        print(msg)
        self.on_message(msg)

handlers = [
    (r"/favicon.ico", FaviconHandler),
    (r'/static/(.*)', tornado.web.StaticFileHandler, {'path': 'static'}),
    (r'/', WebHandler),
    (r'/ws', WSHandler),
]

settings = dict(
    template_path=os.path.join(os.path.dirname(__file__), "static"),
)

application = tornado.web.Application(handlers, **settings)

# tweepy
from tweepy.streaming import StreamListener
from tweepy import OAuthHandler
from tweepy import Stream
import simplejson as json

# new stream listener 
class StdOutListener(StreamListener, WSHandler):
    """ A listener handles tweets are the received from the stream. 
    This is a basic listener that just prints received tweets to stdout.

    """

    # tweet handling
    def on_status(self, status):
        print('@%s: %s' % (status.user.screen_name, status.text))
        WSHandler.on_message(status.text) # <--- THIS is where i want to send a msg to WSHandler.on_message

    # limit handling
    def on_limit(self, track):
        return

    # error handling
    def on_error(self, status):
        print status

def OpenStream():
    consumer_key="[redacted]"
    consumer_secret="[redacted]"
    access_token="[redacted]"
    access_token_secret="[redacted]"
    keyword = 'whatever'

    l = StdOutListener()
    auth = OAuthHandler(consumer_key, consumer_secret)
    auth.set_access_token(access_token, access_token_secret)
    stream = Stream(auth, l, gzip=True) 
    stream.filter(track=[keyword])

if __name__ == "__main__":
    threading.Thread(target=OpenStream).start()
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(8888)
    main_loop = tornado.ioloop.IOLoop.instance()
#   main_loop.add_callback(OpenStream)
    main_loop.start() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T21:31:29.387

`on_message`是实例方法，而不是类方法。您需要在实例上调用它，如下所示：

```
handler = WSHandler()
handler.on_message('hello world') 
```

但是，您不能只这样做，因为需要通过浏览器连接创建实例才能实际发送和接收消息。

您可能想要的是保留一个打开的连接列表（[Tornado websocket 演示就是一个很好的例子](https://github.com/facebook/tornado/blob/master/demos/websocket/chatdemo.py)）：

```
class WSHandler(tornado.websocket.WebSocketHandler):
    connections = []

    def open(self):
        self.connections.append(self)

    ....

    def on_close(self):
        self.connections.remove(self) 
```

然后，在 中`StdOutListener.on_status`，您可以执行以下操作：

```
for connection in WSHandler.connections:
    connection.write_message(status.text) 
```

# sql - 将相关行的列组合成分隔列表

> ID：12481671
> 
> 赞同：0
> 
> 时间：2012-09-18T17:01:36.847
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我有包含以下详细信息的文本文件

```
ID     |NO|Rnk|SP1|Sp2
0000177|01|  1|  N|N
0000178|01|  1|  P|P
0000178|01|  2| GP|GP
0000179|01|  1|ORS|ORS
0000180|01|  1| GP|GP
0000181|01|  1| GP|GP
0000181|01|  2| GS|GS
0000182|01|  1| GP|GP
0000183|01|  1| FM|FM
0000183|01|  2| CM|CM
0000183|01|  3| RM|RM 
```

我必须像这样创建 Out

```
ID     |NO|Rnk|SPC
0000177|01|  1|N
0000178|01|  1|P GP
0000179|01|  1|ORS
0000180|01|  1|GP
0000181|01|  1|GP GS
0000182|01|  1|GP
0000183|01|  1|FM CM RM 
```

欢迎您的建议...是否可以使用枢轴转换？请解释你的答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T13:01:51.573

如果将文本文件导入表中，则可以在 SQL 中对数据进行重组。SQL 将类似于以下内容：

```
SELECT
  TFT.ID,
  MIN(TFT.NO) AS NO,
  MIN(TFT.Rnk) AS Rnk,
  TFT0.SPC
FROM
  TextFileTable TFT
INNER JOIN (
  SELECT DISTINCT
    TFT_D.ID,
    STUFF((SELECT ' ' + Sp2 FROM TextFileTable TFT_X WHERE TFT_D.ID = TFT_X.ID FOR XML PATH('')), 1, 1, '') AS SPC
  FROM
    TextFileTable TFT_D
) TFT0
ON
  TFT.ID= TFT0.ID
GROUP BY
  TFT.ID,
  TFT0.SPC
ORDER BY
  TFT.ID 
```

假设 Sp1 和 Sp2 总是相同的，你总是想要最小的 NO，你总是想要最小的 Rank。从最里面的逻辑向外开始，您使用 FOR XML PATH('') 技巧连接以空格分隔的 Sp2 值列表（示例说明： http: [//fergusondigital.com/Blog/post.cfm/using-for-xml -path-and-stuff-to-coalesce](http://fergusondigital.com/Blog/post.cfm/using-for-xml-path-and-stuff-to-coalesce)）。将每个列表与其 ID 相关联，获取 DISTINCT 行以获得每个列表一行。然后按 ID 和 SPC 对这些行进行分组，按 ID 连接以获得 NO 和 Rnk 值。

# php - 验证码从另一个站点恢复

> ID：12481673
> 
> 赞同：4
> 
> 时间：2012-09-18T17:01:46.093
> 
> 标签：php, curl, captcha

我创建了一个系统，用于通过 CURL 从另一个网站自动输入表单。但问题是网站有验证码。

方法我希望我的系统显示以站点形式显示的验证码以手动输入验证码，但是当我选择她的图像验证码验证码时，另一个无法通过表单发送的验证码出现问题。

如何显示以相同形式显示的验证码。

Ps：英文不是我的母语，如有错误请见谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:56:18.177

通过使用 CAPTCHA 保护表单，作者显然试图让您难以做您正在做的事情，这是有原因的。也就是说，CAPTCHA 旨在防止自动输入。我个人会尊重这一点。

但是，如果您决定继续，我发现重新显示网站内容的最简单方法是提取实际内容本身。因此，使用 cURL 或任何其他首选方法来获取表单的实际 HTML，对其进行解析以获取验证码图像和输入字段名称/ID。显示验证码图像并可能让人工解决它或通过您运行的任何验证码断路器运行它，然后使用输入字段名称/ID 将该解决方案与表单的其余部分一起提交回来。

同样，不要做上述事情，因为这确实是一件不体谅的事情。在您上面的评论中，您说该网站通过 cURL 接受该段落。如果他们确实允许这样做，那么将有一个 URL 连接到该 URL，或者为您提供重新显示的挑战，没有请求 CAPTCHA，或者其他一些类似的机制。这留下了一个选项，即您已获得使用 cURL 作为许可连接到网站的简单功能（它与 cURL 连接与通过 Internet 进行的任何其他连接不同），或者您是该网站的网站管理员通过为像你这样的脚本创建一个实际的界面来连接到需要上球。

无论哪种方式，我相信这里的每个人都会鼓励你成为 InterWebz 的好公民，并坚持不要试图破坏旨在阻止自动化脚本的东西。

# excel - 函数中单元格的非连续列表（排名）

> ID：12481676
> 
> 赞同：1
> 
> 时间：2012-09-18T17:01:59.540
> 
> 标签：excel, function

这可能是一个简单的“不可能”的答案，但我想确定一下。我目前正在使用 LibreOffice，但如果可以在 Excel 中使用，我可以切换。

我有一个包含几个表格的电子表格，每个表格都有不同数据的相同测试结果。我想对另一个表中所有数据的结果进行排名（同样的形式）。

所以，我想使用函数rank如下

```
=RANK(B4,{B4,B12,B20,B28,B36,B44,B52,B60,B68,B76,B84,B92,B100}) 
```

{..} 中的位表示我的单元格列表。在执行获得总和或平均值的情况下，我可以这样做：

```
=AVERAGE(B4,B12,B20,B28,B36,B44,B52,B60,B68,B76,B84,B92,B100) 
```

它工作正常。此外，如果单元格是连续的，我们可以执行以下操作：

```
=RANK(B4, B4:B100) 
```

但不幸的是，他们不在这种情况下，所以我想知道是否有一个很好的解决方案 - 除了在连续列表中的其他地方引用单元格并将其用于 rank 函数的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-02T16:47:32.960

在 OpenOffice 和 LibreOffice 中，符号 ~ 用于连接数字列表中的非连续单元格。所以： `=RANK(B4;B4~B12~B20~B28~B36~B44~B52~B60~B68~B76~B84~B92~B100)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:41:15.873

如果您试图避免链接到另一组连续单元格，则可以使用命名范围，然后在公式中引用命名范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T17:42:20.817

不用担心，Ptay。在 Excel 中，rank 和 average 函数可以完全按照您的描述使用（只是带括号，而不是括号）。

# objective-c - 从其他类调用时，布尔值始终返回 false

> ID：12481680
> 
> 赞同：-1
> 
> 时间：2012-09-18T17:02:06.160
> 
> 标签：objective-c, xcode, variables

好的，我在Objective C和一般编程方面有点菜鸟，但我正在努力学习，所以我会获得一些帮助。

我正在制作一个有几个班级的游戏。在主菜单屏幕上，我有 2 个按钮，简单和困难，以及一个开始游戏按钮。目前，我在 MainView 类中声明了一个名为“level”的公共布尔值，然后在硬按钮操作中将 level 设置为 true，在简单按钮操作中将其设置为 false。在另一个类中，我导入了 MainView.h，在一个名为“numberOfCards”的方法中，我有：

```
MainView *view = [[MainView alloc]init];

if(view->level){
   cards = 10;

}

else {
   cards = 20;
} 
```

但是 level 总是返回 false，我猜当我初始化 MainView 时，它会重置变量？

我是否以错误的方式解决这个问题？任何帮助都会很棒。

这里还有一些代码：

主视图.h

```
@interface MainView : UIViewController <HostViewControllerDelegate, JoinViewControllerDelegate, GameViewControllerDelegate>
{

@public
BOOL level;

}

@end 
```

主视图.m

```
- (IBAction)easyButton:(id)sender 
{

level = NO;
}

- (IBAction)hardButton:(id)sender
{
level = YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:28:11.173

你说，“我猜当我初始化 MainView 时，它会重置变量？”

实际上，是的。更具体地说，它创建了一个具有自己`level`变量的新对象，未初始化的 BOOL 的默认值为 NO。

您需要将对现有`MainView`对象的引用传递给需要请求级别信息的对象。究竟如何做到这一点取决于您的程序结构以及这两个类如何相互关联。

# jquery - 在 Sencha/jQuery 应用程序中预加载图像的最佳方法？

> ID：12481682
> 
> 赞同：4
> 
> 时间：2012-09-18T17:02:15.863
> 
> 标签：jquery, extjs

*传统方法是使用新的 Images()*函数加载图像。但是有没有比这个更好的方法在数据时加载图像？

或者具体来说，在场景中加载图像的最佳方法是什么，假设我正在使用名称和图像作为列表项填充 Sencha List 组件，我从服务器获取名称和图像 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:31:23.520

我不知道 Sencha，但在那种情况下，您可以简单地将图像标签放入容器中。浏览器将开始以块的形式下载所有图像（大小取决于浏览器）。

如果您需要一种**更快**地加载图像的方法，您可以使用一个旧*技巧*：为图像指定不同的 3 级域。像 img1.domain.com, img2.domain.com, ... 这样浏览器可以并行加载。当然，对于这种方法，您也需要完全控制网络服务器。

# python - 使用 SQLAlchemy 和 Elixir 的 MySQL 标识符（表名、列名）的长度限制

> ID：12481683
> 
> 赞同：0
> 
> 时间：2012-09-18T17:02:15.910
> 
> 标签：python, mysql, sqlalchemy, python-elixir

我将 SQLAlchemy 与 Elixir 一起使用，使用 SQLite 一切正常。但是，当我切换到 MySQL 时，有一个表名和列名长度限制（64 个字符）。我有很多具有多个 ManyToMany 关系的实体，但我没有找到一种方法来像`MyFirstEntity_rel_otherEntities__MySecondEntity_rel_theFirstEntities`自动方式那样钳制生成的长表名称。

ManyToOne 关系的外键列名称太长，具体取决于类和关系名称。`create_engine("...", label_length = 64)`没有做到这一点，我已经用它`shortcolumns = True`来避免将整个 Python 模块名称也用作前缀。

我看到的唯一方法是遍历整个架构并手动定义表名（对于多对多关系）和列名（对于多对一关系）。还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:09:34.277

是的，有一个更自动的解决方案：使用表名重新定义更新默认的 elixir 选项：

```
elixir.options_defaults.update(
    dict(
        tablename = lambda cls: cls.__name__.lower()
    )
) 
```

这将导致表被它们的短名称引用（即，仅模型名称）。

# css - IE8 中的表格渲染问题使用断字

> ID：12481684
> 
> 赞同：1
> 
> 时间：2012-09-18T17:02:16.407
> 
> 标签：css, internet-explorer, css-tables

我有一个基于用户输入动态构建的表 - 即用户在表中输入数据，并确定一行中有多少个字段等。因此，我无法控制数据的长度, 和有限的布局控制。我仍然设法构建了在 FF、Chrome、Safari 中运行良好的东西，但我在 IE8 和 IE9 中遇到了一个烦人的问题。我为有问题的表格单元格包含以下 css：

```
td.dc {
    white-space:normal;
    -ms-word-wrap: break-word;
    max-width: 80em;
} 
```

IE 会忽略所有 3 个标签，并在整个行中继续。如果我将单元格的内容包装在 div 中并将 css 应用于 div，它在 IE9 中有效，但在 IE8 中仍然无效。在 IE8 中，文本实际上在 80 em 之后换行，但单元格仍被渲染得足够宽以适应展开的行，因此表格中的其他所有内容都被推过。有没有办法解决？

[编辑] 我创建了一个 jsfiddle 来说明正在破坏的特定情况：http: [//jsfiddle.net/qz3rv/3/](http://jsfiddle.net/qz3rv/3/) 我已经意识到（从错误报告中不清楚）是只有某些情况似乎坏了- - 可能与数据中的 / 有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:20:35.767

在最小的 HTML 环境中测试时，发布的代码在标准模式下的 IE 上工作。显然，您的代码在[Quirks Mode 下](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)运行。因此，请尝试`<!doctype html>`在 HTML 文件的开头添加。

考虑使用本质上小于`80em`测试的值，否则。请注意，`white-space:normal`只是重新确认默认值，`-ms-word-wrap: break-word`并且其标准对应项意味着在某些例外规则中*破坏单词*（违反正常书写规则），应避免使用。

另请注意，表格列宽是一项棘手的工作，要描述它的特定问题，您应该显示表格标记和相关的 CSS。

# java - Java 函数调用性能优化

> ID：12481685
> 
> 赞同：0
> 
> 时间：2012-09-18T17:02:21.683
> 
> 标签：java, algorithm, inheritance

我有一个定义`HugeClass`公共方法的类`addButton()` 。

```
public class HugeClass{

public void addButton(){ etc... }
public HugeClass getHugeClass(){ etc... }

...lots of big number crunching logic...

} 
```

有一个类叫它`myController`调用`getHugeClass()`。

```
public class printController{
   ...
   myController.getHugeClass().addButton();    
} 
```

我们的客户希望我们*不要*调用`getHugeClass()`，`printController`因为代码很长并且占用大量内存，因为它处理前端显示字段的逻辑。有更好的解决方案吗？

我正在考虑扩展`HugeClass`到`printHugeClass`然后调用它`printController`。性能会更好，还是一样，因为它以一种方式调用原始`HugeClass`类并且还必须运行整个父类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:05:56.143

要么`addButton`需要一个正确构造的实例`HugeClass`，而且你无法避免它（子类化不会产生影响）。

或者您不需要`HugeClass`调用包含的所有细节`addButton`，也许是时候考虑拆分`HugeClass`成更小的独立组件了。

参看。[这篇关于 SRP](https://stackoverflow.com/questions/246068/how-do-you-define-a-single-responsibility)（单一职责原则）的帖子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:06:01.367

这完全取决于`getHugeClass()`.`pritnController`

```
..lots of big number crunching logic... 
```

如果您可以避免这些语句，那么`HugeClass`在您覆盖时扩展将解决您的问题`getHugeClass()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:06:49.280

多少`addButton()`取决于其余部分`HugeClass`？如果这个类变得如此庞大，那么可能值得重构它并将所需的部分移动`addButton()`到另一个新类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T23:29:11.627

首先，不管你的类在java中有多大，类加载器只会加载一次。您的性能问题与其他问题有关，并发现您应该使用分析工具。

我的建议：如果你有性能问题，不要做任何假设，它可以是任何东西。当然它与java加载类的速度无关，除非你在静态初始化块中没有逻辑。

# c# - 如何将 iframe 添加到 WebPart 以呈现单独的 HTML 页面？

> ID：12481686
> 
> 赞同：1
> 
> 时间：2012-09-18T17:02:20.960
> 
> 标签：c#, asp.net, html, sharepoint

我有一个 Web 部件，它根据用户定义的一些特定标准填充一个下拉列表，其中包含位于共享点列表中的可能页面。

这个想法是让用户指定他们的标准，然后从下拉列表中选择一个特定页面，然后将该 HTML 页面加载到下拉列表下方的 iframe 中以便立即查看。

我无法理解如何解决这个问题。当我在 VS 中创建 WebPart 时，我选择了“Web Part”，它只给了我一个 .cs 文件。

从 CS 文件中，我了解到我可以执行以下操作：

```
protected override void CreateChildControls()
    {
        Controls.Clear();
        myTextBox = new TextBox();
        Controls.Add(myTextBox);
        ...
     } 
```

等等。据我了解，这在服务器上运行，然后将页面提供给客户端，然后呈现。在我看来，“创建”某些 HTML 的唯一方法是使用 HtmlTextWriter 之类的东西，但如果这是正确的攻击角度，我并不肯定。

所以我想我的问题是，**我是否应该使用 Visual Web Part，以及如何将 iframe 添加到 WebPart，然后更改它的属性（src 等）并让它在“飞”？**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:18:57.873

```
 this.Controls.Add(new LiteralControl("<iframe src='externalpage.htm'></iframe> ")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T04:03:10.997

Visual webpart 是一个包含和编写用户控件的webpart。这允许您使用 html 标记。根据 html 的复杂性，您可能希望也可能不希望使用可视 Web 部件。如果您使用常规 Web 部件，那么 Gregor Primar 的答案对于 Web 部件的 CreateChildControls 方法是有意义的。我强烈建议您使用 javascript 选择下拉菜单，这样您就不必在更新 web 部件时回发整个页面。

# android - TableRow 比通常的 android TableLayout 占用更多空间

> ID：12481687
> 
> 赞同：2
> 
> 时间：2012-09-18T17:02:23.867
> 
> 标签：android, android-layout

美好的一天，我在下面的图片中遇到了麻烦。如您所见，表格行占用了太多空间，我想减少它们，因为它们下面还有其他视图小部件。我怎样才能做到这一点？谢谢你。

![在此处输入图像描述](../Images/6fa5c65fef90a5ba96634dd3d6cd6924.png)

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <TableLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:weightSum="3"
    android:padding="8dp"
    android:background="@drawable/rounded_date_filter">

  <TableRow
      android:orientation="horizontal"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_weight="1">

 <TextView
  android:id="@+id/datefilter_text_from_id"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:gravity="center"
  android:layout_weight="1"
  android:layout_marginLeft="10dp"
  android:layout_marginTop="10dp"
  android:text="@string/from_text">
</TextView>
<TextView
  android:id="@+id/datefilter_text_to_id"
  android:layout_width="10dp"
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:layout_marginLeft="40dp"
  android:layout_marginTop="10dp"
  android:text="01-01-2012">
</TextView>
</TableRow>

  <View
      android:layout_width="fill_parent"
      android:layout_height="1px"
      android:background="#606060">
  </View>

<TableRow>
 <TextView
  android:id="@+id/datefilter_text_from_id"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:gravity="center"
  android:layout_weight="1"
  android:layout_marginLeft="10dp"
  android:layout_marginTop="10dp"
  android:text="@string/to_text">
</TextView>

<TextView
  android:id="@+id/datefilter_text_to_id"
  android:layout_width="10dp"
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:layout_marginLeft="40dp"
  android:layout_marginTop="10dp"
  android:text="01-09-2012">
</TextView>
</TableRow>

      <View
      android:layout_width="fill_parent"
      android:layout_height="1px"
      android:background="#606060">
  </View>

    <TableRow>
 <TextView
  android:id="@+id/datefilter_text_from_id"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:gravity="center"
  android:layout_weight="1"
  android:layout_marginLeft="10dp"
  android:layout_marginTop="10dp"
  android:text="@string/groupby">
</TextView>

<TextView
  android:id="@+id/datefilter_text_to_id"
  android:layout_width="10dp"
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:layout_marginLeft="40dp"
  android:layout_marginTop="10dp"
  android:text="day">
</TextView>
</TableRow>

</TableLayout>

    <Button
        android:id="@+id/reset_filter_button_id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/reset_filters">
    </Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:23:00.600

我已经测试了你的布局，最后它看起来`weightSum`并不`layout_weight`负责。设置`TableLayout`包装内容和`layout_weight`似乎`TextViews`扩展`TableLayout`并使其具有您看到的行为。

如果您将宽度设置为`TableLayout`问题`FILL_PARENT`应该消失：

```
// ...
<TableLayout 
    android:layout_width="fill_parent"
// ... 
```

这在某种程度上是有道理的，因为当父级确实没有空间可用时（因为`wrap_content`），您尝试使用布局权重，这不会带来任何好处。

此外，如果这就是您的全部布局，您可以改进它并将其`Button`直接添加到`TableLayout`（在另一个`TableRow`）中，从而消除对 wrapper 的需要`LinearLayout`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:17:24.627

layout_weight 用于告诉布局强制填充空间。在上面的布局中，TableRow 的权重被指定为 1，weightSum 被指定为 3。删除 layout_weight 和 weightSum 它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:10:47.793

这是更正的布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="8dp"
        android:weightSum="3" >

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/datefilter_text_from_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:gravity="center"
                android:text="From" >
            </TextView>

            <TextView
                android:id="@+id/datefilter_text_to_id"
                android:layout_width="10dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="40dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:text="01-01-2012" >
            </TextView>
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <View
                android:layout_width="fill_parent"
                android:layout_height="1px"
                android:layout_weight="1"
                android:background="#606060" >
            </View>
        </TableRow>

        <TableRow>

            <TextView
                android:id="@+id/datefilter_text_from_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:gravity="center"
                android:text="To" >
            </TextView>

            <TextView
                android:id="@+id/datefilter_text_to_id"
                android:layout_width="10dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="40dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:text="01-09-2012" >
            </TextView>
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <View
                android:layout_width="fill_parent"
                android:layout_height="1px"
                android:layout_weight="1"
                android:background="#606060" >
            </View>
        </TableRow>

        <TableRow>

            <TextView
                android:id="@+id/datefilter_text_from_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="10dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:gravity="center"
                android:text="Group By" >
            </TextView>

            <TextView
                android:id="@+id/datefilter_text_to_id"
                android:layout_width="10dp"
                android:layout_height="wrap_content"
                android:layout_marginLeft="40dp"
                android:layout_marginTop="10dp"
                android:layout_weight="1"
                android:text="day" >
            </TextView>
        </TableRow>
    </TableLayout>

    <Button
        android:id="@+id/reset_filter_button_id"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="My Button" >
    </Button>

</LinearLayout> 
```

和输出布局：

![在此处输入图像描述](../Images/d1c910f805bf58e5677897485bd5f6ce.png)

我注意到并因此更正的问题是：

*   添加了`row separation`作为单独的行，而不是里面的模棱两可的视图`TableLayout`
*   `layout_width`将of`TableLayout`从更改`wrap_content`为`fill_parent`

# jquery - jQuery 查找和清理

> ID：12481689
> 
> 赞同：0
> 
> 时间：2012-09-18T17:02:32.583
> 
> 标签：jquery, htmlspecialchars

我需要在提交表单时查看正在提交的某个文本区域并检查所有`<code>`标签。然后获取`<code>`标签集之间的所有内容并在此函数上运行此函数：

```
function escapeHtml(unsafe) {
return unsafe
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
} 
```

我正在考虑使用：

```
$("code").each(function (){ }); 
```

那会奏效吗？我现在正在测试它，但想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:36:55.000

查看相同的问题[将 HTML 标签转义为 HTML 实体的最快方法？](https://stackoverflow.com/questions/5499078/fastest-method-to-escape-html-tags-as-html-entities)或[使用 jQuery 转义 HTML](https://stackoverflow.com/questions/6020714/escape-html-using-jquery)。您可以从其中之一中选择答案。

# python - 有人能解释一下这个python代码是如何不出错的吗

> ID：12481690
> 
> 赞同：0
> 
> 时间：2012-09-18T17:02:36.713
> 
> 标签：python, indentation, if-statement

所以我继承了一段相当糟糕的代码。缩进就像我发现的那样。为什么 else 不抛出错误？据我所知，代码永远不会到达它。

```
 for l in range(1,9):
        indexes = pickle.load(open('%s_%d.pkl'%(fc,l)))

        clusters_sum = sum([indexes[i]['count'] for i in indexes])
        print >> out, 'Lane %d: %d clusters PF.\n%8s  %9s  %5s' % (l,clusters_sum,'Index','Count','%')
        for i in sorted(indexes, key=lambda x: indexes[x]['name']):
            pct = indexes[i]['count'] and indexes[i]['count']/clusters_sum*100 or 0
            if pct < 0.06: continue
            print >> out, '%8s  %9d  %5.1f' % (indexes[i]['name'], indexes[i]['count'], pct)
        else: print >> out 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T17:04:33.267

[`else`请参阅有关 loops 子句](http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)的文档，这是有效的语法，`else`只要循环中没有 、 或未捕获的异常，就会执行块中`break`的`return`代码。

在这种特殊情况下，该`else`子句将始终执行，因为上述条件（异常除外）都不会发生，因此它等效于以下内容：

```
for l in range(1,9):
        indexes = pickle.load(open('%s_%d.pkl'%(fc,l)))

        clusters_sum = sum([indexes[i]['count'] for i in indexes])
        print >> out, 'Lane %d: %d clusters PF.\n%8s  %9s  %5s' % (l,clusters_sum,'Index','Count','%')
        for i in sorted(indexes, key=lambda x: indexes[x]['name']):
            pct = indexes[i]['count'] and indexes[i]['count']/clusters_sum*100 or 0
            if pct < 0.06: continue
            print >> out, '%8s  %9d  %5.1f' % (indexes[i]['name'], indexes[i]['count'], pct)

        print >> out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:05:49.340

`for`循环可以有一个`else`子句。

从[http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops](http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)：

> 循环语句可能有一个 else 子句；它在循环因列表用尽而终止时（使用 for）或条件变为假（使用 while）时执行，但不是在循环由 break 语句终止时执行。

由于循环不包含`break`语句，因此将*始终*执行该`else`子句。

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T17:14:42.337

不确定您是否不了解 else 语句上的缩进（或缺少缩进），或者 for 循环中有“else”这一事实。如果是前一种情况...

格式是有效的，因为`print >> out`它是一个“简单的语句”。

这是[for 语句](http://docs.python.org/reference/compound_stmts.html#the-for-statement)的语法：

```
for_stmt ::=  "for" target_list "in" expression_list ":" suite
              ["else" ":" suite] 
```

请注意，在可选的“else”块中的冒号之后，它需要一个“[套件](http://docs.python.org/reference/compound_stmts.html#grammar-token-suite)”，其语法是......

```
suite         ::=  stmt_list NEWLINE | NEWLINE INDENT statement+ DEDENT
statement     ::=  stmt_list NEWLINE | compound_stmt
stmt_list     ::=  simple_stmt (";" simple_stmt)* [";"] 
```

因此，在 python 中可以创建一个简单语句列表作为语句块的替代方案。这也是有效的...

```
for i in sorted(indexes, key=lambda x: indexes[x]['name']):
    pct = indexes[i]['count'] and indexes[i]['count']/clusters_sum*100 or 0
    if pct < 0.06: continue
    print >> out, '%8s  %9d  %5.1f' % (indexes[i]['name'], indexes[i]['count'], pct)
else: print >> out; print >> out; print >> out 
```

并且相当于...

```
for i in sorted(indexes, key=lambda x: indexes[x]['name']):
    pct = indexes[i]['count'] and indexes[i]['count']/clusters_sum*100 or 0
    if pct < 0.06: continue
    print >> out, '%8s  %9d  %5.1f' % (indexes[i]['name'], indexes[i]['count'], pct)
else:
    print >> out
    print >> out
    print >> out 
```

但是，我认为大多数人更愿意看到第二种语法。*

# regex - 汇总 shell 中多个模式的计数

> ID：12481692
> 
> 赞同：0
> 
> 时间：2012-09-18T17:02:41.993
> 
> 标签：regex, bash, grep

我有一个日志文件和以下命令

```
grep '"REFERENCE":"78","STATUS":"Buffered"' file.log | wc -l
grep '"REFERENCE":"78","STATUS":"Delivered"' file.log | wc -l
grep '"REFERENCE":"78","STATUS":"Not Delivered"' file.log | wc -l 
```

有没有办法使用一个衬里来获得如下输出：

```
Buffered: 30
Delivered: 1200
Not Delivered: 589 
```

输出不必完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:19:31.887

我只是找到解决问题的方法，从[这里借来的](https://stackoverflow.com/a/9587525/61327 "这里")

```
grep -oP '"REFERENCE":"79","STATUS":".*?"' file.log | sort | uniq -c 
```

示例输出：

```
15605 "REFERENCE":"79","STATUS":"Buffered"
24280 "REFERENCE":"79","STATUS":"Delivered"
10224 "REFERENCE":"79","STATUS":"Not Delivered" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:05:03.227

当然，不是计算行数，而是考虑 grep 的 -c 开关 - 它返回找到的匹配数，并在 bash 中返回 $() 或 SINGLEQUOTEcommandSINGLEQUOTE 语法，然后将其与 bash 简单算术 $(($X+$Y)) 组合成一个命令，类似于：

```
OUTCOUNT=$((`grep -c aaa file1.txt` + `grep -c bbb file2.txt` + `grep -c ccc file3.txt`)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:20:49.440

用于`awk`提取所需行并仅输出状态，然后使用`sort`and`uniq`获取每个唯一状态的计数：

```
awk -F, '/"REFERENCE":"78"/ { print $2 }' | sort | uniq -c 
```

根据您输入行的确切格式，可能需要调整此答案。我现在假设逗号分隔行中的第二个字段是`"STATUS":"<status>"`.

# java - Java正则表达式小写大写

> ID：12481697
> 
> 赞同：-2
> 
> 时间：2012-09-18T17:02:54.350
> 
> 标签：java, regex

我在使用正则表达式时遇到问题，我应该尝试这些：

```
"<td><font size=1>LA SPEDIZIONE E' IN VIAGGIO</font></td>
<td><font size=1>Hub Pacchi Milano</font></td>" 
```

首先，我应该尝试使用大写，然后尝试使用小写和大写。我停在这里：

```
Pattern uppercase= Pattern.compile("<td><font size=1>(.*?)</font></td>"); 
Pattern lowcase = Pattern.compile("<td><font size=1>(.*?)</font></td>"); 
```

但这我寻找一切！我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:12:46.783

虽然我强烈建议使用一个像样的 HTML 解析器来提取这些信息，但要以不区分大小写的方式使用该模式来解除对您的阻止，您可以使用以下内容：

```
String str =
    "<td><font size=1>LA SPEDIZIONE E' IN VIAGGIO</font></td><td><font size=1>Hub Pacchi Milano</font></td>";
Pattern uppercase = Pattern.compile("<td><font size=1>(.*?)</font></td>", Pattern.CASE_INSENSITIVE);
Matcher matcher = uppercase.matcher(str);
while (matcher.find())
{
    System.out.println(matcher.group(1));
} 
```

输出：

```
LA SPEDIZIONE E' IN VIAGGIO
Hub Pacchi Milano 
```

# java - 突出显示在框架中打开的文本文件的几个单词

> ID：12481698
> 
> 赞同：3
> 
> 时间：2012-09-18T17:02:56.877
> 
> 标签：java, swing, user-interface, jeditorpane

我在一个框架中打开一个文件，我希望突出显示几个单词。据我了解，我需要遍历文件的内容。我如何遍历内容以及可以用于突出显示的相关属性是什么？

* * *

**更新：我的代码是这样的**

* * *

```
private JEditorPane editorpane;
JScrollPane editorScrollPane;

public TextEditor()
{
    editorpane = new JEditorPane();
    editorpane.setEditable(false);

    if (filename != null)
    {
        try
        {
            File file = new File(filename);
            editorpane.setPage(file.toURI().toURL());
        }
        catch (IOException e)
        {
            e.printStackTrace();
            System.err.println("Attempted to read a bad file ...");
        }
    }
    else
    {
        System.err.println("File name is wrong");
    }

    add(editorpane);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T17:37:54.447

要突出显示，`JEditorPane`请查看此示例：

![在此处输入图像描述](../Images/eb279698694827ea0e4205b0a051d6ff.png)

```
import java.awt.Color;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultHighlighter;
import javax.swing.text.Document;
import javax.swing.text.Highlighter;
import javax.swing.text.JTextComponent;

public class Test {

    // An instance of the subclass of the default highlight painter
    static MyHighlightPainter myHighlightPainter = new MyHighlightPainter(Color.red);

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JEditorPane jep = new JEditorPane();
                jep.setText("Hello to the public");
                frame.add(jep);
                frame.pack();
                frame.setVisible(true);

                highlight(jep, "public");//'public is the word to highligh'

            }
        });
    }

    // Creates highlights around all occurrences of pattern in textComp
    public static void highlight(JTextComponent textComp, String pattern) {
        // First remove all old highlights
        removeHighlights(textComp);

        try {
            Highlighter hilite = textComp.getHighlighter();
            Document doc = textComp.getDocument();
            String text = doc.getText(0, doc.getLength());
            int pos = 0;

            // Search for pattern
            while ((pos = text.indexOf(pattern, pos)) >= 0) {
                // Create highlighter using private painter and apply around pattern
                hilite.addHighlight(pos, pos + pattern.length(), myHighlightPainter);
                pos += pattern.length();
            }
        } catch (BadLocationException e) {
        }
    }

    // Removes only our private highlights
    public static void removeHighlights(JTextComponent textComp) {
        Highlighter hilite = textComp.getHighlighter();
        Highlighter.Highlight[] hilites = hilite.getHighlights();

        for (int i = 0; i < hilites.length; i++) {
            if (hilites[i].getPainter() instanceof MyHighlightPainter) {
                hilite.removeHighlight(hilites[i]);
            }
        }
    }
}

class MyHighlightPainter extends DefaultHighlighter.DefaultHighlightPainter {

    public MyHighlightPainter(Color color) {
        super(color);
    }
} 
```

# java - JPA 2.0 / EclipseLink 和 sqlite 3.7.2 - 无法创建表

> ID：12481700
> 
> 赞同：3
> 
> 时间：2012-09-18T17:03:03.533
> 
> 标签：java, sqlite, jakarta-ee, jpa, eclipselink

我想在一个简单的 Java Swing 应用程序中使用 JPA 2.0 和 EclipseLink (2.4.0) 和 sqlite 3.7.2。

我遇到的第一件事是，EclipseLink 不支持 sqlite。这是输出：

> [EL 信息]：2012-09-18 18:05:42.246--ServerSession(31125695)--EclipseLink，版本：Eclipse Persistence Services - 2.4.0.v20120608-r11652
> 
> [EL 信息]：连接：2012-09-18 18:05:42.352--无法检测供应商名称 [SQLite3] 的平台。默认为 [org.eclipse.persistence.platform.database.DatabasePlatform]。使用的数据库方言可能与您正在使用的数据库不匹配。请使用属性 eclipselink.platform.class.name 明确提供平台。

但是，在我看来，配置几乎可以正常工作。

但是当我有一个具有相关实体的模型（即@ManyToOne）时，无法自动创建表。

> [EL 警告]：2012-09-18 18:05:42.629--ServerSession(31125695)--异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions .DatabaseException 内部异常：java.sql.SQLException：[SQLITE_ERROR] SQL 错误或缺少数据库（“CONSTRAINT”附近：语法错误）错误代码：0
> 
> 调用：ALTER TABLE blub ADD CONSTRAINT FK_blub_customer_id FOREIGN KEY (customer_id) REFERENCES customer (customer_id)
> 
> 查询：DataModifyQuery(sql="ALTER TABLE blub ADD CONSTRAINT FK_blub_customer_id FOREIGN KEY (customer_id) REFERENCES customer (customer_id)")

如您所见，sqlite 不支持额外创建外键约束。

你知道如何解决这个问题吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:53:58.367

添加您自己的 DatabasePlatform 子类并添加方法，

```
public boolean supportsForeignKeyConstraints() {
        return false;
} 
```

然后使用“eclipselink.target-database”属性使用这个平台。

还请记录一个错误以添加 SQLite 支持，如果您成功创建平台，请附加您的平台。

**更新 18/08/2015**
不确定此选项是否是新选项，您现在`foreign_keys`可以`false`在 JDBC 连接配置/属性中设置为。通过这种方式，您将避免这些警告消息，它会根据需要创建外键。设置它的一种方法是使用：

```
SQLiteConfig config = new SQLiteConfig();
config.enforceForeignKeys(false);
Properties dbProps = config.toProperties(); 
```

# javascript - var.replace 不是函数

> ID：12481701
> 
> 赞同：1
> 
> 时间：2012-09-18T17:03:05.987
> 
> 标签：javascript, thunderbird-addon

我收到错误“id.replace 不是函数”

以下是我认为相关代码的内容。我遗漏了一些明显的东西，但我的大脑目前是糊状的。

```
getSyncDbFile: function (config, id) {
    if (id === null)
    {
        com.synckolab.tools.logMessage("Error: entry has no id (" +config.name + ": " + config.type + ")", com.synckolab.global.LOG_ERROR);
        return null;
    }

    com.synckolab.tools.logMessage("syncDbFile:  (" +com.synckolab.tools.text.fixNameToMiniCharset(config.serverKey) + "/" + config.type + "_" + config.name + "/" + id + ")", com.synckolab.global.LOG_ERROR);

    id = id.replace(/[ :.;$\\\/]\#\@/g, "_");
    var file = Components.classes["@mozilla.org/file/directory_service;1"].getService(Components.interfaces.nsIProperties).get("ProfD", Components.interfaces.nsIFile);
    try {
        file.append("synckolab");
        if (!file.exists()) {
            file.create(1, parseInt("0775", 8));
        }

        file.append(com.synckolab.tools.text.fixNameToMiniCharset(config.serverKey));
        if (!file.exists()) {
            file.create(1, parseInt("0775", 8));
        }

        file.append(config.type + "_" + config.name);
        if (!file.exists()) {
            file.create(1, parseInt("0775", 8));
        }

        file.append(id);
    }
    catch (ex)
    {
        com.synckolab.tools.logMessage("Problem with getting syncDbFile:  (" +com.synckolab.tools.text.fixNameToMiniCharset(config.serverKey) + "/" + config.name + ": " + config.type + ": " + id + ")\n" + ex, com.synckolab.global.LOG_ERROR);
        return null;
    }
    return file;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:10:42.463

正如其他人指出的那样，`id`需要是一个字符串。我们不知道它是什么类型。

就在行前

```
id = id.replace(/[ :.;$\\\/]\#\@/g, "_"); 
```

添加这两行：

```
console.log(id);
console.log(typeof id); 
```

这将使我们知道这些是什么以及是否传递了正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:37:52.920

你试过了吗？？

```
id = String(id).replace(/[ :.;$\\\/]\#\@/g, "_"); 
```

我认为这会奏效。因为 replace 是一个**字符串函数**。

注意：通过使用此方法，它将给出布尔结果而不是返回字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:07:30.420

改变 ：

```
id.replace(/[ :.;$\\\/]\#\@/g, "_"); 
```

至：

```
(id+"").replace(/[ :.;$\\\/]\#\@/g, "_"); 
```

# html - 如何堆叠 div 列表以便没有垂直间隙？

> ID：12481712
> 
> 赞同：0
> 
> 时间：2012-09-18T17:03:57.763
> 
> 标签：html, css

如果我有一个 div 列表（ul/li）（高度可变），有没有办法将它们堆叠起来，以便 div 和它下面的 div 之间没有间隙？就像 pinterest 的用户界面...

```
 <ul>
         <li>
           <div>...</div>
         </li>
         <li>
           <div>...</div>
         </li>
         ...
    </ul>    

    ul
    {
       list-style-type:none; 
       vertical-align:top;
    }

    li
    {
       list-style:none;    
       vertical-align:top;  
       display:inline-block;   
    } 
```

这类似于这里的问题[How to make div stack first vertical then Horizo​​ntal?](https://stackoverflow.com/questions/7318819/how-to-make-div-stack-first-vertically-then-horizontally) 除了我仍然想这样订购：

```
1 2 3
4 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:12:46.960

遵循 CSS 足以创建该效果

```
ul, li  { margin: 0; padding: 0 }
ul li { float: left; }
ul li div { background: #f00; color: #fff; } 
```

[演示](http://jsfiddle.net/L2tDV/1/)

# objective-c - 为灵活的问题类型设计测验应用程序

> ID：12481717
> 
> 赞同：0
> 
> 时间：2012-09-18T17:04:21.460
> 
> 标签：objective-c, ios, dynamic

我正在创建一个测验应用程序，它使用`ViewController`命名`QuestionViewController`来加载和显示来自自定义`Question`类的问题数据。现在，我只是检查`questionType`来确定需要如何显示的`Answer`孩子`Question`。然后我有很多 if/then 语句来显示`answerTypes`其中可以是：

*   buttonType（单选/复选框）
*   输入字段类型
*   日期选择器类型
*   （任何其他类型）

这工作正常，但它真的很草率。我想`Question`使用 if/then 加载然后找到问题的类型，**我相信我应该**为每个 questionType 创建自定义视图控制器并显示它，并**可能添加协议以在输入发生更改时返回**。这是正确的方法吗？我想尽可能保持问题类型的动态，以便在需要时添加未来的类型。

我在正确的轨道上吗？有什么我遗漏/应该改进的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:32:35.947

在我看来，你在正确的轨道上。但是要记住的一件事是，您的问题可能都必须做一些相同的事情，例如...显示问题！这很适合子类化，如下所示：

`UIViewController`-> `QuestionViewController`-> `CustomQuestionViewController1` `UIViewController`-> `QuestionViewController`-> `CustomQuestionViewController2` `UIViewController`-> `QuestionViewController`->`CustomQuestionViewController3`

等等

无论问题/答案类型如何，每个`Question`人都必须显示某些信息。例如，您的每个问题都可能有某种`UILabel`或`UITextView`显示问题的文本。此标签的位置、字体等可能不会因问题而异，因此应在 question's 中进行设置`QuestionViewController`，因为答案（如您所提到的，其格式可能会有所不同）可以在`CustomQuestionViewController`您的各种 s 中设置实施。这将大大减少您问题的视图控制器中潜在的代码重复，因为它们执行相同的操作可以在您的`QuestionViewController`.

如果您像下面那样进行子类化...

`UIViewController`->`CustomQuestionViewController1`

`UIViewController`->`CustomQuestionViewController2`

您最终可能会使用大量重复代码来设置基本问题显示。

另外，命名它们比哈哈更好`CustomQuestionViewController1`。

# sql - 如何检索在 SQL 开发人员中导入的电子表格的路径和文件名？

> ID：12481718
> 
> 赞同：1
> 
> 时间：2012-09-18T17:04:20.993
> 
> 标签：sql, import, filenames, spreadsheet, oracle-sqldeveloper

我将一个 Excel 电子表格导入 Oracle SQL Developer，我想知道如何检索文件的路径？

我计算机上的原始电子表格并非都位于相同的文件夹中，因为它们被分类到许多子文件夹中，而是都在一个目录中。将电子表格导入 sql developer 不是问题（我目前只是为每个电子表格制作一个新的外部表）但我想获取每个导入的电子表格的路径和文件名（所以我会知道该源文件来自哪里在我的计算机上）并将其放在表格的新列中，或者为路径创建一个新表格并将数据引用到它或其他东西）。

有没有办法在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:01:30.543

根据 SQL Developer 的文档，似乎没有可以在导入期间引用以获取文件名的字段。

[SQL Developer 用户指南](http://docs.oracle.com/cd/E18464_01/doc.30/e17472/dialogs.htm)- 第 5.32 节

您最好的选择可能是使用外部脚本（shell 脚本、powershell 等）进行导入，该脚本可以引用文件名，并在导入成功后将其插入您选择的表中。

# java - Eclipse - “计算启动按钮工具提示”错误

> ID：12481730
> 
> 赞同：4
> 
> 时间：2012-09-18T17:05:19.903
> 
> 标签：java, eclipse, android-sdk-2.1

我第一次尝试使用 Eclipse 运行 Android SDK。我以前从未使用过 Eclipse，而且我一遍又一遍地遇到以下错误消息，没有特定的触发器：“计算启动按钮工具提示遇到问题”。

请参阅随附的屏幕截图。

我试图谷歌它，但我找不到解决方案。快把我逼疯了，请帮忙。我正在使用`Ubuntu 12.04 LTS`. 我尝试重新安装 Eclipse，同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T05:31:45.840

请参阅[此 SO](https://stackoverflow.com/a/12406787/1020470)对具有相同错误的类似问题的回答。它对我有用。解决方案是运行：

```
$ sudo apt-get --reinstall install tzdata-java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:14:37.793

我遇到了同样的问题。`OpenJDK (1.7)` 我已经从 oracle下载了 Oracle JDK 1.7包的最新更新，`rpm`将其转换为`deb`使用包`alien`

```
alien -d -c rpm-package.rpm 
```

然后在eclipse中选择1.7版本并搜索相关的JRE，它解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:28:44.753

尝试使用 JRE6 而不是 7。为我解决了这个问题。

# java - 可以/建议将数组作为参数传递给方法吗？（在Java中）

> ID：12481733
> 
> 赞同：1
> 
> 时间：2012-09-18T17:05:22.557
> 
> 标签：java, arrays, parameters

我读到您可以将数组作为参数传递给方法，但是否推荐？我的意思是，还有其他更容易接受的方法吗？

就我而言，我有 2 个类，每个类都包含一个数组，我需要检查它们是否相同或不同。所以我想在其中一个类中创建一个方法，该方法将在参数中获取一个数组，然后比较两个数组的每个值。

我不确定是否`Arrays.equals():`有效，因为它是一个对象数组而不仅仅是数字。

我发现了这个[Java 数组比较](https://stackoverflow.com/questions/2493711/java-array-comparison)，但它似乎比我需要做的更复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:08:32.570

> 我不确定是否`Arrays.equals()`有效，因为它是一个对象数组而不仅仅是数字。

有[一种风格`Arrays#equals`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28java.lang.Object%5b%5d,%20java.lang.Object%5b%5d%29)需要两个`Object[]`作为参数。只要您的对象正确实现 equals，它就应该按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:08:32.797

1）是的，可以将数组作为参数传递，这样做绝对没有问题

2) [Arrays.equals(Object[] a, Object[] b)](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#equals%28java.lang.Object%5B%5D,%20java.lang.Object%5B%5D%29)可以检查对象数组（如果您不想简单地测试实例身份，则必须确保对象上有适当的 equals 方法）。请注意，此方法的存在是 1 的证明；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T17:09:56.860

尽管使用数组作为方法的参数很好，但您的用例可以通过形成`java.util.Set`这两个数组并使用 apache commons[`CollectionUtils.isEqualCollection`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#isEqualCollection%28java.util.Collection,%20java.util.Collection%29)来检查它们是否相同来解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T17:08:42.237

我不明白为什么不建议这样做。我有时更喜欢将数组而不是集合作为方法的参数传递。

# sql-server-2008 - 使用存储过程创建视图时出错

> ID：12481744
> 
> 赞同：1
> 
> 时间：2012-09-18T17:06:00.897
> 
> 标签：sql-server-2008, tsql, stored-procedures, dynamic-sql, sql-view

我有以下创建视图的存储过程：

```
ALTER PROC Proc_Guards_By_Client
(
    @client_number INT,
    @client_name   NVARCHAR(16)
)
AS
 BEGIN
   IF EXISTS(select * FROM sys.views where name = 'vwGuardsByClients')
   BEGIN
    EXEC ('CREATE VIEW vwGuardsByClients
    AS
    SELECT TOP 1000 
      cgt.[guard_id],
      sg.first_name,
      sg.last_name,
      sg.ammunition_quantity    
      FROM [sws4].[dbo].[client_guard_tracking] cgt
      INNER JOIN CLIENTS c
      ON c.client_number = cgt.client_number
      INNER JOIN security_guard sg
      ON sg.guard_id = cgt.guard_id
      WHERE cgt.client_number = @client_number
      OR c.client_name = @client_name
    ')
    END
    ELSE
    BEGIN
      EXEC ('UPDATE VIEW vwGuardsByClients
      SELECT TOP 1000 
      cgt.[guard_id],
      sg.first_name,
      sg.last_name,
      sg.ammunition_quantity    
      FROM [sws4].[dbo].[client_guard_tracking] cgt
      INNER JOIN CLIENTS c
      ON c.client_number = cgt.client_number
      INNER JOIN security_guard sg
      ON sg.guard_id = cgt.guard_id
      WHERE cgt.client_number = @client_number
      OR c.client_name = @client_name
    ')
    END

    IF @@ROWCOUNT = 0
        PRINT 'Warning: No rows were updated'
 END 
```

但是当我执行它时，我得到：

```
Msg 156, Level 15, State 1, Line 2
Incorrect syntax near the keyword 'VIEW'.

Msg 137, Level 15, State 2, Line 14
Must declare the scalar variable "@client_number". 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:07:25.077

仍然存在各种问题。当你承认它是倒退时，你仍然把你的逻辑倒退了，[就像你昨天所做的那样。](https://stackoverflow.com/questions/12466162/creating-updating-view-using-stored-procedure)怎么还是错了？现在它说：

> 如果视图已经存在：
>       **让我们创建它！**
> 
> 否则，如果视图不存在：
>       **让我们编辑它！**

下一个问题是您使用语法`UPDATE VIEW`。昨天你试图使用`CREATE OR REPLACE`. 两者都无效。你需要`ALTER VIEW`.

您还在使用`@@ROWCOUNT`来检查是否成功。这不是成功创建或更改视图的有效检查（它可能也不适合更新/删除检查，但这是另一个问题）。正如我昨天解释的那样，你应该使用`TRY/CATCH`它。

最后，您尝试在`EXEC()`- 内部连接变量，并且附加字符串变量忽略了它包含撇号 ( `'`) 的可能性，这会破坏您的查询（这里也可能存在 SQL 注入问题）。为此，您应该使用`sp_executeSQL`. 事实上，最好不要浪费地重复所有视图代码：

```
ALTER PROCEDURE dbo.Proc_Guards_By_Client
  @client_number  INT,
  @client_name    NVARCHAR(16)
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @sql NVARCHAR(MAX) = N' VIEW dbo.vmGuardsByClient
    AS
      SELECT ... rest of view code ...
      WHERE cgt.client_number = ' + CONVERT(VARCHAR(12), @client_number) + 
       ' OR c.client_name = ''' + REPLACE(@client_name, '''', '''''') + ''';';

  SET @sql = CASE WHEN EXISTS
    (SELECT 1 FROM sys.views WHERE [object_id] = OBJECT_ID('dbo.vwGuardsByClients'))
    THEN N'ALTER' ELSE N'CREATE' + @sql;

  BEGIN TRY
    EXEC sp_executesql @sql;
  END TRY
  BEGIN CATCH
    PRINT ERROR_MESSAGE();
  END CATCH
END
GO 
```

不过，我不得不问。为什么需要为不知道视图是否已经存在的特定视图创建存储过程？一旦你创建了这个视图一次，这`CREATE VIEW`部分代码将如何再次执行？你的所有用户都拥有 dbo/sa 权限吗，这个视图真的有随时被丢弃的危险吗？您是否尝试为每个客户创建一个视图？如果是这样，您最好考虑将客户端名称添加到视图名称中。在当前场景中，每次新客户端尝试运行您的代码时，您都将替换现有视图，然后当以前的用户从视图中选择时，他们会惊讶地发现他们不再看到自己的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T17:19:16.973

希望以下内容会有所帮助。问题在于在构建语句时使用内联参数

```
ALTER PROC Proc_Guards_By_Client
(
  @client_number         INT
  ,@client_name              NVARCHAR(16)
)
AS
BEGIN
/****** Script for SelectTopNRows command from SSMS  ******/

  IF EXISTS(select * FROM sys.views where name = 'vwGuardsByClients')
  BEGIN

  EXEC ('
  UPDATE VIEW vwGuardsByClients

SELECT TOP 1000 
  cgt.[guard_id],
  sg.first_name,
  sg.last_name,
  sg.ammunition_quantity    
  FROM [sws4].[dbo].[client_guard_tracking] cgt
  INNER JOIN CLIENTS c
  ON c.client_number = cgt.client_number
  INNER JOIN security_guard sg
  ON sg.guard_id = cgt.guard_id
  WHERE cgt.client_number = ' + cast(@client_number as varchar(10)) + 
  '  OR c.client_name = ''' + @client_name + '''
')
-- Here you missing one character '
  END
ELSE
BEGIN
   EXEC ('CREATE VIEW vwGuardsByClients
   AS
   SELECT TOP 1000 
  cgt.[guard_id],
  sg.first_name,
  sg.last_name,
  sg.ammunition_quantity    
  FROM [sws4].[dbo].[client_guard_tracking] cgt
  INNER JOIN CLIENTS c
  ON c.client_number = cgt.client_number
  INNER JOIN security_guard sg
  ON sg.guard_id = cgt.guard_id
  WHERE cgt.client_number = ' + cast(@client_number as varchar(10)) + 
  ' OR c.client_name = ''' + @client_name + '''
')
END

--SELECT * from vwGuardsByClients

IF @@ROWCOUNT = 0
PRINT 'Warning: No rows were updated' 
```

结尾

# android - 有没有机会通过 android NDK 相机访问来减少快门时间？

> ID：12481746
> 
> 赞同：6
> 
> 时间：2012-09-18T17:06:05.950
> 
> 标签：android, android-ndk, camera

我编写了一个从相机捕获实时预览的 android 应用程序。重要的是要有一个短的快门时间，它至少应该是恒定的。

目前我使用以下代码来实现低快门时间：

```
Parameters params = camera.getParameters();
params.setSceneMode(Parameters.SCENE_MODE_SPORTS);
params.setWhiteBalance(Parameters.WHITE_BALANCE_DAYLIGHT);
params.setFlashMode(Parameters.FLASH_MODE_OFF);
params.setFocusMode(Parameters.FOCUS_MODE_INFINITY);

params.setPreviewFpsRange(9000, 29453);
params.setPreviewFrameRate(29453);
params.setJpegQuality(100);
params.setPreviewFormat(ImageFormat.NV21);

params.setPreviewSize(1280,720);
params.setAntibanding(Parameters.ANTIBANDING_OFF);
params.setExposureCompensation(params.getMinExposureCompensation());
params.set("iso", 1250);
camera.setParameters(params); 
```

我的手机固件似乎不支持 setSceneMode()（getSupportedSceneModes 返回一个空列表）。“ISO”-设置可能没有效果（没有看图片，只是计算了帧率）。刚刚在某处找到了这段代码并使用了它......也许它只是错误的字符串？

到目前为止发生的情况是：帧速率在 9 到 29,453 fps 之间变化，这是唯一支持的帧速率范围。所以`params.setPreviewFpsRange(29453, 29453);`也不行。帧速率在良好的光照条件下（正常白天、室内、指向窗户）很高（20-30 fps），而在中等/低光照条件下（日光、室内、直接远离窗户）变得非常低（8-10 fps）条件。

更详细：我不需要高帧率，但需要低快门时间。收集的数据应用于室内导航（或：第一步中的室内定位）。该应用程序需要在一个人正常行走时拍照，而无需该人关心他/她如何携带手机。该人甚至可能正在跑步或“摆动”电话（就像您通常在走路时移动手臂一样）。所以通常会有很多“运动模糊”，只要快门时间太长。这种情况与“我想拍张照片”的情况有很大不同，照片试图让相机保持稳定。我们实际上并不想获得“好照片”，而是想以某种方式不时检测墙壁的一些边缘。我预计图片中有很多“噪音”，

想法是，可能有机会使用 NDK 更好地控制相机参数。有没有人体验过 NDK 并且可以回答我是否值得尝试？

附加信息：我正在使用 HTC Desire Z（也称为：“T-Mobile G2”或“HTC Vision”）作为测试设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T20:16:25.657

最简洁的答案是不”。更长的答案从一个问题开始：您的应用程序不关心捕获，而只使用 YUV 预览帧，对吗？

作为没有根访问权限的标准下载应用程序，您无权直接访问相机（或其他）设备。您只有**setParameters()** API 来影响相机的行为，因此对于通过此 API 公开哪些相机功能，您完全受制于 OEM。

即使在有根设备上，您的功能也受到限制，但现在受设备驱动程序和特定相机 ISP 的规格限制。

在这两种情况下，您都应该从非常仔细地选择目标设备开始。我相信一些 Android 手机允许比 HTC Vision 更多的相机控制。例如，三星 S2 的修改版[http://pfittech.com/rom_pfittech_jb.html](http://pfittech.com/rom_pfittech_jb.html)在 1080p 时拥有稳定的 25 FPS。

# javascript - 固定滚动功能....希望它滑动（JQUERY）

> ID：12481748
> 
> 赞同：1
> 
> 时间：2012-09-18T17:06:10.773
> 
> 标签：javascript, jquery, html

所以，标题有点宽泛。我有这个功能，在鼠标/页面滚动（页面向下约 88px）时，“菜单将更改为静态位置，因此它保持在浏览器窗口的顶部......

很像这样...对不起，我的 HTML 在一个框架中，无法轻松共享。 [http://www.1stwebdesigner.com/wp-content/uploads/2010/06/nagging-menu-with-css3-and-jquery/index.html](http://www.1stwebdesigner.com/wp-content/uploads/2010/06/nagging-menu-with-css3-and-jquery/index.html)

但是，我的并没有做任何花哨的事情（不像上面的演示那样）。我希望我的 ot 延迟一点然后滑下来。有点像演示。

这是我的 jQuery 函数……有人吗？

```
var div = $('#wizMenuWrap');
var editor = $('#main_wrapper');
var start = $(div).offset().top;

$(function fixedPackage() {
    $(window).bind("scroll", function () {

        // If the modal is displayed, do nothing
        if ($('.modal').is(':visible'))
            return;

        var p = $(window).scrollTop();
        $(div).css('position', ((p) > start) ? 'fixed' : 'static');
        $(div).css('top', ((p) > start) ? '0px' : '');

        //Adds TOP margin to #main_wrapper (required)
        $(editor).css('position', ((p) > start) ? 'relative' : 'static');
        $(editor).css('top', ((p) > start) ? '88px' : '');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:39:16.220

没有 HTML + CSS，没有人可以帮助您。你的JS很好。这是一个没有fadeIn和CSS的更简单的例子：

```
$(function() {
    var $scrollingDiv = $(".MyDivClass");   
    var $scrollingDivPos = $scrollingDiv.offset();

    $(window).scroll(function(){
        if($(this).scrollTop() > $scrollingDivPos.top+$scrollingDiv.height() && $scrollingDiv.css('position','relative')){
            $scrollingDiv.css({
                'position': 'fixed',
                'top': '5px',
                'z-index': '10'
            });
        } else if($(this).scrollTop() <= $scrollingDivPos.top && $scrollingDiv.css('position','fixed')){
            $scrollingDiv.css({
                'position': 'relative'
            });
        }
    }); 
```

});

# arrays - 深拷贝数组

> ID：12481758
> 
> 赞同：3
> 
> 时间：2012-09-18T17:07:09.460
> 
> 标签：arrays, powershell

我一直在用头撞墙。
我知道如果我在 Powershell 中创建一个数组，然后复制该数组，它会将其复制为引用类型而不是值类型。
所以，经典的例子是：

```
$c = (0,0,0)
$d = $c
$c[0] = 1
$d
1
0
0 
```

解决方案是`$d = $c.clone()` 如果数组本身是引用类型的集合，这将不起作用。这是我的问题。我正在尝试通过创建一个进程数组来创建一个数组来跟踪 CPU 使用情况，等待一段时间，然后检查最新值并计算差异。但是，Get-Process 创建一个引用数组。因此，当我执行以下操作时：

```
$a = ps | sort -desc id | where-object {$_.CPU -gt 20} #Get current values
$b = $a.clone() #Create a copy of those values.
sleep 20 #Wait a few seconds for general CPU usage...

$a = ps | sort -desc id | where-object {$_.CPU -gt 20} #Get latest values.
$a[0]  
$b[0] #returns the same value as A.

Handles  NPM(K)    PM(K)      WS(K) VM(M)   CPU(s)     Id ProcessNam
-------  ------    -----      ----- -----   ------     -- ----------
   3195      57    90336     100136   600    83.71   7244 OUTLOOK 
```

`$a`并将`$b`始终返回相同的值。如果我尝试使用 $b[0] = "$a[0].clone()" 之类的东西一次输入一个条目 - PS 抱怨在这种情况下不能使用 Clone。

有什么建议么？？

`$a = PS |....`另外，仅供参考，实际上并不需要第二行，因为它是 PS 列表对象的引用类型，它实际上会被更新并在调用`$a`时返回最新值。`$a`我将其包括在内是为了更清楚地说明我在这里要完成的工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T21:11:02.907

要复制数组，您可以执行以下操作：

```
$c = (0,0,0)
$d = $c | foreach { $_ }
$c[0] = 1
"c is [$c]"
"d is [$d]" 
```

结果

```
c is [1 0 0]
d is [0 0 0] 
```

正如基思指出的那样，对于您的特定问题（比较进程的 CPU 使用率），更具体的东西可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:47:07.197

从技术上讲`$d = $c`，它不是任何类型的数组副本（引用或值）。它只是将 $c 所引用的数组的引用存储到 $d 中。我认为您只需要获取一次进程数组，然后调用该`Refresh`方法即可。您必须首先检查该`Exited`属性以确保关联的进程仍在运行。当然，如果您对启动的任何新流程感兴趣，这对您没有帮助。在这种情况下，获取不同时间的进程快照，除掉两个数组之间的进程交集之外的所有进程（通过进程 ID），然后计算它们的属性值的差异 - 再次基于进程 ID。让这更容易，您可能希望将每个快照放在一个以进程 ID 为键的哈希表中。

# optimization - 在线凸编程软件

> ID：12481759
> 
> 赞同：2
> 
> 时间：2012-09-18T17:07:13.220
> 
> 标签：optimization, convex

我正在寻找一种以在线学习方式进行凸优化的软件。当我有新的观察时，我不想从一开始就运行优化程序，而是根据新的观察更新当前模型。关于这个问题的调查可以在[http://www.cs.huji.ac.il/~shais/papers/OLsurvey.pdf找到](http://www.cs.huji.ac.il/~shais/papers/OLsurvey.pdf)

是否有任何实施良好的软件可以做到这一点？

谢谢，

# ios - 使用从浏览器启动 iOS 应用程序时可以强制重启吗？

> ID：12481764
> 
> 赞同：0
> 
> 时间：2012-09-18T17:07:36.310
> 
> 标签：ios

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:37:34.713

没有，您需要在应用程序委托的 handleOpenURL 方法中对您的应用程序进行必要的 [重新] 初始化。

# ruby-on-rails - Time.zone.now 无法按预期工作

> ID：12481765
> 
> 赞同：0
> 
> 时间：2012-09-18T17:07:50.100
> 
> 标签：ruby-on-rails, ruby, timezone

我有以下内容：

**配置/应用程序.rb**

```
config.time.zone = 'Eastern Time (US & Canada)'
config.active_record.default_timezone = 'Eastern Time (US & Canada)' 
```

**控制器/time_trackers_controller.rb**

```
@track_it.clock_in = Time.zone.now 
```

现在我的时区（东部时间）的时间应该是 13:02，但如果我将它保存在数据库中，它会显示为 17:02，我不明白为什么。关于我可能做错了什么的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:15:57.317

我相信 Rails 在将所有内容放入数据库之前会将其转换为 UTC。所以你看到的是完全正常的，当你从数据库中拉回记录时，时区将是东部。

# javascript - Javascript 和 Spynner (Python)

> ID：12481767
> 
> 赞同：1
> 
> 时间：2012-09-18T17:07:51.637
> 
> 标签：javascript, python, screen-scraping, spynner

我正在尝试抓取一个网站，是否需要使用 Javascript。我正在使用 Python 2.7 和 Spynner。这是脚本：

```
 <a href="javascript://" onclick="TranslationPopUpTestimonialQuery('Language_ALL', '',       '5', '10', 'date-of-visit')">6</a> 
```

这是我在 Python 中的代码：

```
 import spynner
   browser = spynner.Browser()
   browser.load("http://www.zoover.it/italia/lazio/roma/galileo/hotel")
   page1 = browser._get_html()
   browser.runjs("TranslationPopUpTestimonialQuery('Language_ALL', '', '8', '10', 'date-of-visit')")
   browser.wait_load()
   page2 = browser._get_html() 
```

有些东西不起作用，因为 get_html 没有给我想要的 html 页面......

这是第一个网址：[http](http://www.zoover.it/italia/lazio/roma/galileo/hotel) ://www.zoover.it/italia/lazio/roma/galileo/hotel 。我用 browser.load() 加载这个页面，我得到了 HTML。在我尝试转到第 2 页后，使用 browser.runjs() 模拟点击。我在 onClick 上调用 javascript。然后，如果我再次调用 browser._get_html()，则 HTML 是相同的。谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T06:08:50.377

如果您想要的 html 在弹出窗口中，您必须切换 spynner 框架。

spynner 为您提供的始终是活动框架 html，弹出窗口在另一个框架中打开。

Spynner 是 qtwebwekit 的接口，qtwebkit 使用它：[http ://doc.qt.digia.com/4.7-snapshot/qwebframe.html](http://doc.qt.digia.com/4.7-snapshot/qwebframe.html)

您可以看到有“子框架”，您可以使用 self.webframe 进行内省。

# java - 禁用在 Linux 和 Windows 中运行程序

> ID：12481769
> 
> 赞同：3
> 
> 时间：2012-09-18T17:07:57.230
> 
> 标签：java, linux, winapi, java-native-interface, hook

我正在用 Java [Swing] 构建计算机自适应测试，并希望在测试完成（或用户退出）之前禁用在后台运行其他程序。这是为了防止考生在考试中作弊。

我的问题是，如何去做？如何停止创建新任务或阻止用户与其他程序交互？

在问这个问题之前我的功课是： 1\. 我可以使用 JNI 并在 windows 上调用 SetForegroundWindow(HWND) 函数。它在 Linux 中的等价物是什么？

1.  使用带有全局 LOWLEVEL KEYBOARD HOOK PROC 的 SetWindowsHookEx() 函数完全禁用键盘。Linux中的等价物？

如果之前已经回答过这个问题，我们深表歉意——

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:47:45.363

如何停止创建新任务或阻止用户与其他程序交互

操作系统不应允许上述语句，我认为您应该优雅地警告用户不要开始新任务并与现有任务交互。

但是，如果您坚持，您应该考虑编写一些代码，就像受密码保护的屏幕保护程序一样，当然不要求输入密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T18:47:47.080

虽然我不知道如何阻止某人改变焦点，但您可以跟踪[焦点](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#trackingFocus)，并检测您的 GUI 何时失去焦点。您甚至可以进行一些计时测量，例如 5 秒可以，但 30 秒不行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T08:11:21.960

在 Windows 上，您可以使用另一个[桌面会话](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687098%28v=vs.85%29.aspx)（与 Windows Vista 和 7 UAC 提示符默认使用的相同）。

这使您可以在无法（对于用户）与桌面的其余部分进行交互的情况下运行您的进程，但要非常小心，确保在退出之前切换回来，否则它们将被卡住。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T08:54:21.113

嗯，我想我找到了解决方法：（我应该以更简单的方式考虑它）。

我可以在我的框架中实现 WindowFocusListener，如果有人作弊，警报就会响起并提醒监视器。

谢谢大家。:-)

# html - Internet Explorer 位置不正确

> ID：12481773
> 
> 赞同：1
> 
> 时间：2012-09-18T17:08:31.533
> 
> 标签：html, css, internet-explorer

我们为不同的环境提供环境功能区。我正在将功能区添加到新应用程序中，但是它们不起作用。

以下是相关代码（直接取自页面“查看源码”）。请注意，我将我们的网址替换为`...`.

```
<style> 
    .ribbonBanner { 
        position: fixed;
        right: 0px; 
        top: 0px; 
        margin: 0px;
        padding: 0px;
        z-index: 99999;
    } 
</style> 

<img border="0" class="ribbonBanner" alt="Development" title="Development" src="http://.../ribbon_dev.gif" onclick="this.parentNode.removeChild(this);"/> 
```

此代码与我们所有其他应用程序相同。但是，Internet Explorer 正在……嗯，Internet Explorer。:P

**铬合金**

![铬合金](../Images/02768016c0d469884574234315e0cd50.png)

**火狐**

![火狐](../Images/40742fda91405fc7a04a8d6d73fcafaf.png)

**IE浏览器**

![IE](../Images/adb4298de8ad423277217bf9b9ba2e32.png)

任何人都知道可能发生了什么？

仅供参考：我在 IE8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:14:12.853

IE 有 Position Fixed 的问题，但我相信如果你有正确的 Doctype，它应该在 ie8 中工作。我相信这个 DocType 会起作用。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

或者

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"> 
```

# visual-studio-2010 - Visual Studio Development Server 2010 呈现部分页面

> ID：12481774
> 
> 赞同：1
> 
> 时间：2012-09-18T17:08:31.627
> 
> 标签：visual-studio-2010, aspnet-development-server

我正在开发一个 ASP.Net Web 应用程序。在上周，开发团队注意到页面只是部分呈现。也就是说，当您单击链接、按钮或任何进行回发的操作时，页面将呈现一部分方式，然后 IE 继续计时。如果您附加到 Visual Studio 开发服务器并暂停该进程，则没有可查看的源代码，并且堆栈跟踪中报告的 2 个步骤是“处于睡眠状态、等待或加入”和“外部代码”。

我们还注意到不时抛出 View State MAC Validation 异常。我不确定这是否相关，但根据对该错误的研究，它是在视图状态未完全加载并且页面回发到服务器时引起的。

从架构的角度来看，我们没有更新任何东西，所有对 AJAX 和 .Net 库的引用都相同或几个月。这个问题在过去一周左右刚刚出现。

有没有人遇到过 Visual Studio Development Server 的问题或知道解决方法？

# powershell - 用于恢复 vSphere 状态的简单 powershell 脚本

> ID：12481782
> 
> 赞同：0
> 
> 时间：2012-09-18T17:08:56.807
> 
> 标签：powershell, powershell-2.0, virtualization, powercli, vsphere

我对 powershell + powercli 很陌生，需要帮助。

我们有 3 /4 台主机连接到 vCenter 实例，我们想运行一个 powershell 脚本来识别哪些虚拟机正在运行，将名称记录到文件中，暂停（或关闭）机器。

下次运行该脚本时，它会读取名称列表并打开相关虚拟机的电源……在 PowerCLI/Powershell 环境中执行此操作的最简单方法是什么。

我在想streamreader / writer，但这似乎很复杂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:24:52.103

这似乎可以解决问题！有什么建议么？

```
#File Storage Path
$filePath = "D:\"

#Get the host lists and sort
$ESXHost= Get-VMHost | Sort-Object -Property Name

function storeEnvironment
{#Store the powered VM list to a simple file
    #Use Streamwriter for simpler output, just a string name
    $PowerFile = New-Object System.IO.StreamWriter($filePath+"MTS_ON.txt")

    foreach($objHost in $ESXHost)
    {
        $PoweredVMs += Get-VMHost -Name $objHost | Get-VM | where {$_.Powerstate -eq "PoweredON" }
        foreach($objVM in $PoweredVMs)
        {
            $PowerFile.WriteLine($objVM)
            Get-VM -Name $objVM | Suspend-VM
        }
    } 
    $PowerFile.close()
}

function restoreEnvironment
{
    [array] $VMs = Get-Content -Path $filePath"MTS_ON.txt"
    foreach($VM in $VMs)
    {
        Get-VM -Name $VM | Start-VM
    }
    #Delete the configuration file
    Remove-Item $filePath"MTS_ON.txt"
}

#MAIN

#Test to see if the config file exists
if(Test-Path $filePath"MTS_ON.txt") 
{
    Write-Host "Restore from file? [Y]es or [N]o"
    $response = Read-Host
    if($response -eq "Y")
    {
        #Use file to restore VMs
        Write-Host "Restore Environment"
        restoreEnvironment
    }
    else
    {
        #Delete the configuration file
        Remove-Item $filePath"MTS_ON.txt"
    }   
}
else
{#Save the powered VMs to a file
    Write-Host "Saving Environment"
    storeEnvironment
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:40:24.760

考虑使用`Join-Path`,`Set-Content`和`Add-Conent`更多的 Powershell 方式。像这样，

```
# Combine $filepath and MTS_ON.txt, adds slashes if need be
$pfile = join-path $filePath "MTS_ON.txt" 
# Create empty file or truncate existing one
set-content -path $pfile -value $([String]::Empty) 

foreach($objHost in $ESXHost) {
    $PoweredVMs += Get-VMHost -Name $objHost | Get-VM | where {$_.Powerstate -eq "PoweredON" }
    foreach($objVM in $PoweredVMs) {
        add-content -path $pfile -value $objVM
        Get-VM -Name $objVM | Suspend-VM
    }
} # No need to close the pfile 
```

# asp.net-mvc - MVC 区域：我应该如何映射我的路线？

> ID：12481784
> 
> 赞同：1
> 
> 时间：2012-09-18T17:09:03.577
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-areas, asp.net-mvc-3-areas

我想组织我的解决方案，并查看了一些区域，但似乎：对“ ***ControllerName*** **”的请求已找到以下匹配的控制器...***错误越来越出名。*

 ***我添加了一个`Admin`区域，我的项目的文件夹结构如下所示：**

*   领域
    *   行政
        *   控制器
        *   家庭控制器
    *   AdminAreaRegistration.cs
*   控制器
    *   家庭控制器

**在我的 AdminAreaRegistration 文件中，我有这个：**

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

**我在注册我的路线时这样做：**

```
routes.MapRoute(
    "Home", 
    "Home/Index", 
    new { controller = "Home", action = "Index" }
); 
```

**我在[这里](http://suhair.in/Blog/Aspnet-MVC-Areas-in-depth-Part-2)`Application_Start`阅读了我的方法来做到这一点：**

```
ControllerBuilder.Current.DefaultNamespaces.Add("X.Web.Controllers"); 
```

**可悲的是它没有修复错误。然后我[在这里](http://odetocode.com/blogs/scott/archive/2009/10/13/asp-net-mvc2-preview-2-areas-and-routes.aspx)阅读到添加默认（根）控制器的名称空间，在 RegisterRoutes 方法中。**

我知道区域都是关于路由的，文件夹只是需要的，但它们很有用。

`HomeController`在这种情况下，我想知道如何将我的路线映射到特定的路线，一条在`X.Web.Controllers`，另一条在`X.Web.Areas.Admin.Controllers`. 另外，我想知道是否可以使用`@Html.RouteLink`帮助程序而不是生成链接`ActionLink`，因为在我到目前为止阅读的**所有**`ActionLink`示例中，链接都是使用该方法生成的……这让我怀疑。

我将不胜感激提供的任何帮助/指导。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:22:50.237

我偶然发现了一个类似的问题，由于找不到“干净”的解决方案，我最终重命名了其中一个 HomeController——这应该会有所帮助。

至于链接 - 是的，可以生成它们，您需要将区域名称添加到参数之一（routeValues），所以：

```
@Html.ActionLink("link text", "ActionName", "ControllerName", new { area = "Admin" }) 
```*

# macos - 将 Subversion 转储迁移到 Mac 友好的版本控制系统

> ID：12481787
> 
> 赞同：0
> 
> 时间：2012-09-18T17:09:14.217
> 
> 标签：macos, version-control

首先，一些背景。我有一台 Mac Mini，它（除其他外）是一个 Subversion 服务器。它工作得很好，我使用 Versions.app 客户端连接到它（来自 Mac Pro 和 MacBook Pro，都在 OS 10.8 上）并对一些项目进行版本控制。

我将调制解调器配置为将相关端口路由到 Mac mini，这意味着即使不在办公室我仍然可以访问它。

然后我升级到 OS 10.8 并发现为时已晚，颠覆服务器将不再工作，至少不是没有很多混乱。我将存储库转储到 svn .dmp 文件并开始寻找替代方案：

*   在我的 NAS 上安装 subversion 模块失败（显然是由于模块故障）
*   寻找兼容 Mac OS 10.8 的颠覆服务器导致了一些死胡同
*   尝试查找要在 Parallels 中使用的预配置虚拟机未成功

苹果似乎正在推动 GIT，所以这似乎是一个不错的选择，特别是因为它似乎意味着（假设我理解正确）我不再需要一个“主”服务器。但是，我仍然有同样的问题，即在 OS X 上启动和运行 Git 服务器的简单、干净的方法似乎并不多。

在这一点上，我什至准备从以前的版本控制系统中丢失所有“历史”数据，并从所有当前状态的新提交开始，但我仍然没有找到一个好的 Mac 友好这样做的系统。

# android - 如何同时运行 imageClick() 和 onTouchEvent()？

> ID：12481788
> 
> 赞同：0
> 
> 时间：2012-09-18T17:09:16.957
> 
> 标签：android

我在 xml（和其他元素）中有这个图像：

```
 <ImageView
        android:clickable="true"  
android:onClick="imageClick" 
        android:id="@+id/Decena0"
        android:layout_width="120dp"
        android:layout_height="120dp"
        tools:ignore="ContentDescription" /> 
```

当我按下图像并且不抬起手指时，我想运行以下两种方法：首先：

```
public void imageClick(View view) {  
//Implement image click function  
Log.e("Example", "Imagen clickada");
} 
```

第二：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
//Coordenadas
int x = (int) event.getX();
int y = (int) event.getY();

switch(event.getAction()) {
    case MotionEvent.ACTION_DOWN:
            break;
    case MotionEvent.ACTION_MOVE;
            break;
    case MotionEvent.ACTION_UP:
    break;
}   
return true;
    } 
```

我该怎么做？因为如果我按下图像并在图像上抬起手指，只会运行第一种方法（我完全理解），但是如果我按下图像并且我没有抬起手指并移动手指，则不会运行任何方法。如果我单击没有图像的其他地方，则第二种方法效果很好。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:13:27.923

根据[onTouchEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)的文档：

> 退货
> 
> 如果事件被处理则为真，否则为假。

因此，当您的方法返回时`true`，其他事件不会触发。如果您还希望任何点击侦听器也运行，请尝试返回`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:59:49.210

您可以`public abstract boolean onLongClick (View v)` 在单击并按住视图时使用 Called。参数： v 单击并按住的视图。返回：如果回调消耗了长按，则返回 true，否则返回 false。

或类似的东西

```
@Override
    public boolean onTouchEvent(MotionEvent e,  MapView map) { //this is for map on touch
        // TODO Auto-generated method stub

        if (e.getAction() == MotionEvent.ACTION_DOWN) {
            start = e.getEventTime();
            int x = (int) e.getX();
            int y = (int) e.getY();
            touchedPoint = map.getProjection().fromPixels(x, y);

        }

        if (e.getAction() == MotionEvent.ACTION_UP) {
            stop = e.getEventTime();
        }
        if (stop - start > 2000) { //your code on long touch, in this case more than 2 sec
     }
            }); 
```

# jquery - 使用 jquery 获取具有精确文本的 td

> ID：12481790
> 
> 赞同：0
> 
> 时间：2012-09-18T17:09:19.840
> 
> 标签：jquery, html, parsing

我想找到一个 td 的下一个 td 值（这个 td 将用文本定义）。这是我的html

**Matrikel:** 9 EC , TORUP BY **Grundareal:** 454 **Ejendomsværdi:** 860.000 **Grundværdi:** 313.500

***现在我需要 "Ejendomsværdi:" 包含的 td，然后转到下一个 td 以获取价值。我怎么能这样做？

***格式有问题，所以我可以解释一下表格结构。这里 "Ejendomsværdi:" 是 td 值，下一个 td 值是 "860.000" 但 "Ejendomsværdi:" td 是用喜欢和粗体元素包裹的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:13:40.940

```
$('td:contains("Ejendomsværdi")').next().text() 
```

# linux - Bash grep 和发送

> ID：12481792
> 
> 赞同：1
> 
> 时间：2012-09-18T17:09:32.720
> 
> 标签：linux, bash, shell, awk, grep

我是 bash 的新手，并试图弄清楚它。

我有以下内容：

```
Sep 18 21:05:40 host kernel: Firewall: *Port Flood* IN=venet0 OUT= MAC= SRC=118.223.69.254 DST=10.0.0.1 LEN=40 TOS=0x00 PREC=0x00 TTL=244 ID=9398 PROTO=TCP SPT=9876 DPT=80 WINDOW=5840 RES=0x00 SYN URGP=0 
```

如何将 SRC IP 拉出并将其通过管道传输到 csf -d {IP HERE}

我会使用类似的东西

`sed -e 's/\([0-9]\+\.[0-9]\+\.[0-9]\+\.[0-9]\+\).*$/\1/' /var/log/messages`正确的？

**编辑：**

既然这`SPT=`就是名字，我可以把它拉出来并以某种方式获取IP吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:22:25.110

像下面这样的东西应该可以工作：

```
sed -n 's/.*SRC=\([.0-9]*\).*/\1/p' /var/log/messages | xargs csf -d 
```

`xargs`将标准输入中的参数附加到命令中。请注意，我的正则表达式与`.*`IP 地址之前和之后的整行匹配，因此当您进行替换时，剩下的就是 IP。

通过使用该`-n`选项并添加`p`到 sed 替换的末尾，只会打印与正则表达式匹配的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:56:42.653

嗨，

使用 grep (GNU grep) 2.10，您可以使用`P`标志，用于 perl 兼容的正则表达式，`i`标志用于不区分大小写的测试，以及`o`仅显示结果的标志。

在下文中，我设置了有效 IP 的模式，然后 grep 文件

```
ippattern="\b(([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.){3}\b([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-4])\b"
grep -Pio "(?<=src=)$ippattern" /var/log/messages 
```

在 grep whit perl compatible`-P`标志中，`(?<=XXXX)`是一个反向引用，不会被正则表达式捕获。它只是说我们希望我们的模式以 XXXX 开头。当然，您必须在要捕获的模式之前编写它。

ippattern 是一个有效的 IP 地址。所有案例都被捕获。

希望这会有所帮助

# c++ - 函数指针和继承

> ID：12481795
> 
> 赞同：1
> 
> 时间：2012-09-18T17:09:56.440
> 
> 标签：c++, qt, templates, inheritance

我有一个通用函数，用于对 List 类中的一些对象进行排序。

该函数运行良好，但是当我想使用指向该类中成员函数的函数指针将该函数应用于该类时，它不会构建。

功能是：

```
template <typename T1, typename T2, typename T3>
void DialogFaitListing::trie(T1 * list, T2 (T1::*fx)(quint16), T3 (T2::*crit)())
{
    for(int i(0);i<list->count();i++)
    {
        for(int j(i);j<list->count();j++)
        {
            if((((list->*fx)(i)).*crit)() > (((list->*fx)(j)).*crit)())
            {
                list->swap(i,j);
            }
        }
    }
} 
```

其中 list 是包含对象列表的类，fx 是访问对象的函数指针，而 crit 是用于排序的对象比较函数。

当我使用这条线构建时：

```
trie(vend,&Vendeurs::getVend,&Vendeur::getNom); 
```

我收到此错误：

```
dialogfaitlisting.cpp:459: erreur : no matching function for call to 
'DialogFaitListing::trie(Vendeurs*&, Vendeur (Vendeurs::*)(quint16), 
QString (Personne::*)())' 
```

ps：对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:07:54.640

`&Vendeur::getNom`，尽管是可以通过的成员，但`Vendeur`似乎有类型`QString (Personne::*)()`。这`T2`在模板参数推导过程中变得模棱两可：是它`Vendeur`还是它`Personne`？

一个创可贴的解决方法是将调用者的负担`trie`显式转换为`QString (Vendeur::*)()`，导致以下调用：

```
trie(vend, &Vendeurs::getVend, static_cast<QString (Vendeur::*)()>(&Vendeur::getNom)); 
```

`crit`考虑到每次我们希望传递的 erion 来自基类时，我们可能会发现相同的错误，这非常冗长且不方便。

更好的解决方案是在出现的两个点之一上禁止模板参数推导`T2`。我认为为此选择第二个位置是有意义的：

```
template<typename T>
struct identity { typedef T type; };

template <typename T1, typename T2, typename T3>
void trie(T1 * list
     , T2 (T1::*fx)(quint16)
     , T3 (identity<T2>::type::*crit)()); 
```

那么在调用`T2`中只能推断为 be`Vendeur`并将`&Vendeur::getNom`被隐式转换为`QString (Vendeur::*)()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:44:41.160

您似乎同时试图限制`T2`在`Vendeur`第二个参数中`trie`（因为`Vendeur Vendeurs::getVend(quint16)`）和`Personne`第三个参数（但我不知道它是如何从`&Vendeur::getNom`to得到的`Qstring Personne::function()`，除非涉及到一些继承或其他东西）。您可能需要发布比这更多的代码（特别是类定义）。

# c# - ASP.NET MVC4 Web API - 控制返回 JSON 的格式以及包含什么？

> ID：12481798
> 
> 赞同：2
> 
> 时间：2012-09-18T17:09:59.497
> 
> 标签：c#, asp.net, json, asp.net-mvc-4, asp.net-web-api

我正在创建我的第一个 ASP.NET MVC4 Web API。我有一个数据库，其中已经在 Azure 上创建和托管了 20 个左右的实体，并使用 Entity Framework 将数据库反向工程为 POCO 类。

他们最终看起来像这样：

```
public class Activity
{
    public Activity()
    {
        this.ActivityCategories = new List<ActivityCategory>();
        this.ActivityImages = new List<ActivityImage>();
        this.PerformedActivities = new List<PerformedActivity>();
        this.UserActivities = new List<UserActivity>();
    }

    public int ActivityID { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public Nullable<int> Thumbnail { get; set; }
    public virtual Image Image { get; set; }
    public virtual ICollection<ActivityCategory> ActivityCategories { get; set; }
    public virtual ICollection<ActivityImage> ActivityImages { get; set; }
    public virtual ICollection<PerformedActivity> PerformedActivities { get; set; }
    public virtual ICollection<UserActivity> UserActivities { get; set; }
} 
```

然后，我创建了一个 ApiController 扩展类，其操作如下：

```
 public IEnumerable<Activity> All()
    {
        return db.Activities.ToArray();
    } 
```

而且，正如预期的那样，它返回了一个很长的 JSON 回复。JSON 回复包括 Activity 类中定义的所有内容。但是，如果我不想包含所有内容怎么办？例如，我不想返回 UserActivities、PerformedActivities 等内容。

基本上我希望我的 JSON 看起来像：

```
[
    {
        "id":"32",
        "name":"this activity name",
        "description":"blah blah",
        "thumbnail":"http://mydomain.com/images/32/thumbnail.png",
        "images": [
            {
                "name":"this image",
                "url":"http://mydomain.com/images/32/1.png",
            },
            {
                "name":"cool image",
                "url":"http://mydomain.com/images/32/2.png",
            },
        ],
    },
    ...
] 
```

（忽略我的 JSON 中的任何格式错误，只是非常快地输入了示例）

请注意，我也不一定要使用相同的属性名称。有没有一种有效的方法可以将我的数据转换成我想要的格式？

我的第一个想法是将每个活动复制到一个仅包含我想要的属性的结构数组中。有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:25:37.240

在这种情况下，DTO 对象会拯救您，DTO 将为您的消费者提供足够的数据，因此请定义需要通过 Web API 传输数据的 DTO。在某些情况下，您可以使用 EF 中的模型，但是：

1.  通常，EF 会在后台生成动态代理以支持延迟加载和跟踪更改。您可能遇到的问题是序列化问题，因为 Web API 将序列化代理，而不是您的 POCO 对象。

2.  向消费者传输太多不必要的数据会使 HTTP 请求变得繁重并泄露数据泄漏。

3.  违反关注点分离，当 EF Model 是领域实体时，它们不作为数据传输对象承担责任。

在您的示例中，您可以定义`ActivityDto`并消除您提到的不必要的属性：

```
public class ActivityDto
{
    public string Name { get; set; }
    public string Description { get; set; }
    public Nullable<int> Thumbnail { get; set; }
    public virtual Image Image { get; set; }
}

public IEnumerable<Activity> All()
{
    return db.Activities.Select(a => new ActivityDto(){
        Name = a.Name,
        Description = a.Description,
        Thumbnail = a.Thumbnail
        // More properties if you need

    }).ToArray();
} 
```

如果您想寻找自动将 DTO 映射到 EF 模型的工具，[AutoMapper](http://automapper.org/)就在这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:18:42.757

在 MVC 中，将数据库实体用作模型并不是真正的最佳实践，相反，我会创建一个 POCO（甚至更复杂的对象）作为您的 ViewModel，然后您可以返回它只包含您的视图所需的数据（或者在这种情况下是 API 用户）。如果您只想操作返回的数据，我不知道该怎么做，但我知道 WebAPI 使用 newtonsoft 的 JSON.NET 库来输出 JSON，因此您将研究操作它的方法。

# jquery - jQuery 幻灯片在 Chrome 中不起作用

> ID：12481801
> 
> 赞同：0
> 
> 时间：2012-09-18T17:10:08.240
> 
> 标签：jquery, nivo-slider

[http://bit.ly/OBp1t4](http://bit.ly/OBp1t4)

我的 Nivo 幻灯片在 Safari 和 Firefox 中似乎可以正常工作，但无法在 Chrome 中加载。我认为这与 jQuery 的加载方式有关，但我无法确定它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:14:51.170

看起来您正在从 HTTPS 站点加载 http jquery。使用协议相对 URL，因此使用 http 或 https 无关紧要：

```
//ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:12:50.930

Chrome 控制台出现错误。

```
[blocked] The page at https://www.westwardlook.com/ ran insecure content from http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js. 
```

这意味着 jQuery 没有加载，不能使用。这就是 Nivo 滑块不起作用的原因。尝试从 https 而不是 http 加载 jQuery（和其他脚本）。

# php - Nginx IPv6 配置问题

> ID：12481804
> 
> 赞同：1
> 
> 时间：2012-09-18T17:10:16.877
> 
> 标签：php, nginx, fastcgi

我的网络服务器（使用 nginx 托管 facebook 应用程序）开始收到错误消息

```
*907768 FastCGI sent in stderr: "Invalid IPv6 configuration on server, Please disable or get native IPv6 on your server" while reading response header from upstream, client:... 
```

此错误的原因可能是什么？我并不总是明白这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T23:15:16.823

该错误来自 php 代码，更具体地说 - facebook sdk。当 facebook 代码尝试连接到 ipv6 地址并且无法连接到网络时会抛出它，这很可能是由于系统中启用了 ipv6 但没有 ipv6 连接（来自[base_facebook.php](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php)的引用）：

```
// With dual stacked DNS responses, it's possible for a server to
// have IPv6 enabled but not have IPv6 connectivity.  If this is
// the case, curl will try IPv4 first and if that fails, then it will
// fall back to IPv6 and the error EHOSTUNREACH is returned by the
// operating system.
if ($result === false && empty($opts[CURLOPT_IPRESOLVE])) {
    $matches = array();
    $regex = '/Failed to connect to ([^:].*): Network is unreachable/';
    if (preg_match($regex, curl_error($ch), $matches)) {
      if (strlen(@inet_pton($matches[1])) === 16) {
        self::errorLog('Invalid IPv6 configuration on server, '.
                       'Please disable or get native IPv6 on your server.');
        self::$CURL_OPTS[CURLOPT_IPRESOLVE] = CURL_IPRESOLVE_V4;
        curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4);
        $result = curl_exec($ch);
      }
    }
} 
```

处理此问题的正确方法是在系统中禁用 ipv6 或获取一些 ipv6 连接。或者，应该可以通过在您的代码中要求 facebook 代码始终使用 ipv4 来抑制错误：

```
Facebook::$CURL_OPTS[CURLOPT_IPRESOLVE] = CURL_IPRESOLVE_V4; 
```

# c - 如何使用 make 实用程序检查其中一个 C 文件中的错误？

> ID：12481805
> 
> 赞同：0
> 
> 时间：2012-09-18T17:10:15.817
> 
> 标签：c, linux, makefile

我正在尝试更改项目中一个 C 文件中的代码。我可以对项目的makefile使用make实用程序来编译并找出该特定文件中的错误（其余都很好）并重新编译它直到没有错误PS我到目前为止还没有使用make

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:21:39.477

`Make` will only recompile files that have changed. You can also use `make <filename>` to compile just that one file without even checking the rest, but that doesn't always work in projects with complex hierarchies of makefiles.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:25:04.400

`make`每次运行时将每个文件的时间戳与其编译的目标文件的时间戳进行比较。因此，如果您在编译多个文件并运行的 makefile 中有规则`make`，它将仅编译自上次运行以来已更改的那些文件。

# .net - 在 Google Analytics .Net API v3.0 中使用服务帐户

> ID：12481815
> 
> 赞同：0
> 
> 时间：2012-09-18T17:10:56.517
> 
> 标签：.net, api, authentication, google-analytics

好吧，我不可能是唯一的一个......我在 SO 和其他地方看起来高低，却空手而归。我正在尝试使用具有最新 Google Analytics dotNet API (v3.0) 的服务帐户。我发现的示例都使用 Web 或 Installed Application 方法，或者它们没有使用 dotNet API（通常是 PHP），或者它们引用了 API 的早期版本（v3 不向后兼容）。当我使用 Web 应用程序方法注册（并进行身份验证）时，我的应用程序运行良好 - 除了每次运行时都会弹出允许访问的请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:49:40.853

[https://groups.google.com/forum/#!msg/oauth2-dev/oa378p9Ukm8/YKWnUcawF7wJ](https://groups.google.com/forum/#!msg/oauth2-dev/oa378p9Ukm8/YKWnUcawF7wJ)来自克劳迪奥

# java - Spring LDAP：故障安全 LDAP 搜索

> ID：12481817
> 
> 赞同：2
> 
> 时间：2012-09-18T17:11:07.627
> 
> 标签：java, spring, ldap

我正在使用 Spring 对 LDAP 服务器进行一些查询。但是，当与 LDAP 服务器的连接不可用时，我的应用程序`CommunicationException`会抛出a`LdapTemplate.search()` 并使我的应用程序崩溃。

我应该在哪里处理这个？我`NamingException`在[`LdapTemplate.search()`方法文档](http://static.springsource.org/spring-ldap/site/apidocs/org/springframework/ldap/core/LdapTemplate.html)中看到了一个，但我不确定是否应该处理此异常或`CommunicationException`.

# sql-server - 连接到 MS SQL 服务器

> ID：12481818
> 
> 赞同：0
> 
> 时间：2012-09-18T17:11:09.683
> 
> 标签：sql-server

我正在尝试连接到托管在网络上的 MS SQL Server。Windows 身份验证和 SQL Server 模式已启用（两者）。我无法连接

```
[DBNETLIB]SQL Server does not exist or access denied.
[DBNETLIB]ConnectionOpen (Connect()). 
```

任何人都可以建议在存在域时如何提供服务器名称，如果有的话，请用斜杠明确说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T04:52:52.943

确保您在 Configuration Manager 中启用了以下功能：

SQL Server 网络配置 - 协议 --- TCP/IP - 已启用

SQL Server 网络配置（32 位和 64 位） - TCP/IP - 已启用 - 名称管道 - 已启用

并确保 SQL Server 实例作为域帐户登录，以便您能够执行网络备份。

如果命名实例使用 IP/实例名称，则尝试通过 SSMS 打开 sql，否则仅使用 IP

并以“sa”身份登录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T22:12:52.333

假设您的客户端在同一个网络上并且所有 DNS 记录都正常工作（尝试 ping 服务器以查看它是否可用）。

*   您可以尝试使用 IP 地址进行连接
*   如果您尝试连接到命名实例，请使用 server\instance
*   检查您的计算机或服务器上的 Windows 防火墙是否阻止了您（至少需要为默认 SQL 实例打开端口 1433）

# jquery - 在表格单元格之间拖放列表项 - jQuery

> ID：12481821
> 
> 赞同：1
> 
> 时间：2012-09-18T17:11:32.600
> 
> 标签：jquery, drag-and-drop

在我的一个项目中，我需要在表格单元格之间拖放列表项。这意味着应该能够将列表项从表格单元格中拖放到另一个单元格中，并且应该将其保存在新位置。有人可以为此建议任何插件吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:21:29.567

我认为下一个解决方案对您来说既简单又有用：http: [//jqueryui.com/demos/sortable/#connect-lists](http://jqueryui.com/demos/sortable/#connect-lists)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:14:43.383

表格拖放插件：[http ://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/](http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/)

其他拖放插件：[http ://www.tripwiremagazine.com/2012/04/jquery-drag-drop-plugins.html](http://www.tripwiremagazine.com/2012/04/jquery-drag-drop-plugins.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T08:28:32.073

[使用另一篇文章](https://stackoverflow.com/questions/6875471/jquery-ui-sortable-connectwith-difficulties-when-connected-item-is-empty)中的旧示例，您可以将选择器添加到单元格中，然后在接收时验证它们：

jQuery：

```
function(e, ui){
    var dropId = ui.item.attr("id");
    alert(dropId);
    if (dropId == "top1" || dropId == "top2") {
        $("#a").append(ui.item);   
    } else if (dropId == "bottom1" || dropId == "bottom2") {
        $("#b").append(ui.item);   
    }
} 
```

有点太晚了，但也许对未来的帮助：[demo click here](http://jsfiddle.net/ZLzU3/188/)

# c# - 当前位置没有可用的资源

> ID：12481823
> 
> 赞同：0
> 
> 时间：2012-09-18T17:11:39.093
> 
> 标签：c#, javascript, asp.net

当前位置没有可用的资源。这是什么意思以及如何解决问题。这是我的`code-behind.cs`。我试图创建一个复选框，该复选框在检查或未选中时显示一个更新1秒钟的标签，然后逐渐消失。功能是如果用户选中或取消选中显示标签的复选框然后淡出，请参阅我无法获得此功能的代码。

```
protected void chkDefault_CheckedChanged(object sender, EventArgs e)
    {
        if (chkDefault.Checked == false)
        {
            lblAdmin.Visible = false;
            txtProfileName.Visible = true;
        }
        if (chkDefault.Checked == true)
        {
            lblAdmin.Visible = true;
            txtProfileName.Visible = false;
            txtProfileName.Text = "";
        }
        Update();
    }

    private void Update()
    {
        myLabel.Text = "Updated!";
        UpdatePanel1.Update();
    }
} 
```

这是`HTML`随之而来的。

```
<script type="text/javascript">
    $(function() {
        setTimeout(function() {
            fadeText();
            }, 1500);

            function fadeText() {
                $("#<%=myLabel.ClientID%>").fadeOut("slow");
            }
        }); 
</script>

<asp:UpdatePanel ID="UpdatePanel1" runat="server"  UpdateMode="Conditional">
    <ContentTemplate>
        <asp:CheckBox ID="chkDefault" runat="server" Text="Default" Checked="true" 
            width="150px" oncheckedchanged="chkDefault_CheckedChanged" 
            AutoPostBack="true"/>
        <asp:Label ID="myLabel" runat="server" CssClass="fadeLabel"></asp:Label>
    </ContentTemplate>
    </asp:UpdatePanel>
    <asp:UpdatePanelAnimationExtender ID="UpdatePanelAnimationExtender1" runat="server" 
    BehaviorID="animation" TargetControlID="UpdatePanel1">
        <Animations>
            <OnUpdated>
                <Sequence>
                    <ScriptAction Script="fadeOut()"></ScriptAction>
                </Sequence>
            </OnUpdated>
        </Animations>
</asp:UpdatePanelAnimationExtender> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:27:46.170

这意味着您正在尝试单步执行位于您没有源代码的可执行文件（exe 或 dll）中的一段代码（一个函数） - 通常这是您工作的时候在回调函数中，然后按 Step-out 将返回到父函数，但回调的父函数位于 Windows 或 .NET Framework 程序集中，您将没有源代码。

它通常只是良性的，意味着您需要观察您在哪里（以及什么）进行调试。单击“确定”并按继续 (F5)，直到发生不好的事情。

# vba - Excel VBA 宏 - 搜索列名，然后复制到同一工作簿 Excel 2010 中另一个模板工作表上的已定义列

> ID：12481824
> 
> 赞同：0
> 
> 时间：2012-09-18T17:11:40.450
> 
> 标签：vba, excel

我似乎无法让它工作，我看不出哪里有问题。

它编译得很好，但它在我的工作表上什么也没做。我正在尝试编写一个宏，它将按列标题复制数据并粘贴到具有相同标题的同一工作簿中的另一个模板表中。

*例如*，复制导入表上“开始时间”列下的数据，复制新数据，然后粘贴到主表上的“开始时间”列中。

```
Sub CopyByHeader()

Dim shtImport As Worksheet, shtMain As Worksheet
Dim c As Range, f As Range
Dim rngCopy As Range, rngCopyTo

Set shtImport = ActiveSheet ' "import" - could be different workbook
Set shtMain = ThisWorkbook.Sheets("Main")

For Each c In Application.Intersect(shtImport.UsedRange, shtImport.Rows(1))
    'only copy if >1 value in this column (ie. not just the header)
    If Len(c.Value) > 0 And Application.CountA(c.EntireColumn) > 1 Then
        Set f = shtMain.Rows(1).Find(what:=c.Value, LookIn:=xlValues, _
        LookAt:=xlWhole)
        If Not f Is Nothing Then
            Set rngCopy = shtImport.Range(c.Offset(1, 0), _
                shtImport.Cells(Rows.Count, c.Column).End(xlUp))
            Set rngCopyTo = shtMain.Cells(Rows.Count, _
                f.Column).End(xlUp).Offset(1, 0)
            'copy values
            rngCopyTo.Resize(rngCopy.Rows.Count, 1).Value = rngCopy.Value
        End If
    End If
 Next c

 End Sub 
```

* * *

我改成了这个，超级慢……有什么想法吗？？：

```
Sub ImportTimeStudy()
Dim myHeaders, e, x, wsImport As Worksheet, wsMain As Worksheet
Dim r As Range, c As Range

myHeaders = Array(Array("Time Started", "Time Started"), Array("Description of the task", "Description of the task"), Array("Level", "Level"), Array("Location", "Location"), Array("Targeted", "Targeted"), Array("System", "System"), Array("Process Code", "Process Code"), _
            Array("Value Stream", "Value Stream"), Array("Subject", "Subject"), Array("BU", "BU"), Array("Task Duration", "Task Duration"), Array("Activity Code", "Activity Code"))

Set wsImport = Sheets("Import")
Set wsMain = Sheets("Main")

For Each e In myHeaders

    Set r = wsImport.Cells.Find(e(0), , , xlWhole)

    If Not r Is Nothing Then
        Set c = wsMain.Cells.Find(e(1), , , xlWhole)

        If Not c Is Nothing Then
            wsImport.Range(r.Offset(1), wsImport.Cells(Rows.Count, r.Column).End(xlUp)).Copy _
            wsMain.Cells(Rows.Count, c.Column).End(xlUp)(2)
        Else
            msg = msg & vbLf & e(1) & " " & wsMain.Name
        End If
    Else
        msg = msg & vbLf & e(0) & " " & wsImport.Name
    End If

Next

If Len(msg) Then
    MsgBox "Header not found" & msg

End If

Application.ScreenUpdating = False

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T17:30:22.723

我将您的循环重写为 2 个`for`循环，试一试：（在线评论）

```
Sub CopyByHeader()

Dim shtImport As Worksheet
Dim shtMain As Worksheet
Set shtImport = ActiveSheet ' "import" - could be different workbook
Set shtMain = ThisWorkbook.Sheets("Main")

Dim lCopyColumn As Long
Dim lCopyRow As Long
Dim lLastRowOfColumn As Long

'- for each column in row 1 of import sheet
For lCopyColumn = 1 To shtImport.Cells(1, shtImport.Columns.Count).End(xlToLeft).Column
    '- check what the last row is with data in column
    lLastRowOfColumn = shtImport.Cells(shtImport.Rows.Count, lCopyColumn).End(xlUp).Row

    'if last row was larger than one then we will loop through rows and copy
    If lLastRowOfColumn > 1 Then
        For lCopyRow = 1 To lLastRowOfColumn
            '- note we are copying to the corresponding cell address, this can be modified.
            shtMain.Cells(lCopyRow, lCopyColumn).Value = shtImport.Cells(lCopyRow, lCopyColumn).Value
        Next lCopyRow
    End If
Next lCopyColumn

End Sub 
```

# jquery - jQuery HtmlBox 限制输入的单词/字符数

> ID：12481833
> 
> 赞同：1
> 
> 时间：2012-09-18T17:12:12.687
> 
> 标签：jquery, count, word, limit

我在 Joomla 网站上有来自 Remiya 的 HtmlBox 4.0.3，我想知道如何（如果可能）限制输入到 HtmlBox 文本区域的字符/单词的数量。

我已经设法限制纯 html textarea 上的字符/单词，但 HtmlBox 完全用 jQuery 编写，我什至不知道从哪里开始。

非常感谢任何帮助，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:06:57.717

这是您可以做的一个非常基本的示例：-

```
$(document).ready(function() {
  var maxLength = 150; // max number of allowed characters
  $('#yourHtmlBoxId').keyup(function() {
    $(this).val($(this).val().substr(0, maxLength));
    $('#charCount').text(maxLength - $(this).val().length);
  });
  $('#yourHtmlBoxId').trigger('keyup');
}); 
```

显然你需要用相关的选择器替换`#yourHtmlBoxId`和。`#charCount`

一些示例标记：

```
<textarea id="yourHtmlBoxId"></textarea>
<p><span id="charCount"></span> remaining</p> 
```

[这是一个供你玩的小提琴](http://jsfiddle.net/dg8Nk/1/)

请记住，这绝不是防弹的，它适用于`keyup`事件，例如，如果有人通过鼠标按钮复制/粘贴到文本区域，则永远不会触发 jQuery。不过，这应该为您指明正确的方向。

# sql - 仅在至少一行匹配条件时选择

> ID：12481834
> 
> 赞同：3
> 
> 时间：2012-09-18T17:12:18.783
> 
> 标签：sql, sql-server

我有一个 select 语句，并且仅当其中至少一个值与今天相差 60 天时才返回所有值。问题是我有一个外部应用程序，它返回我想要比较的列，它们来自不同的表（一个属于现金项目，另一个属于卡项目）。
考虑到我有以下几点：

```
OUTER APPLY (
    SELECT COUNT(*) AS quantity, MIN(date) AS item_date
        FROM dbo.get_cash_items(loans.id_cash) AS cash_item
        HAVING loans.id_product_type = 1 --Cash
    UNION
    SELECT COUNT(*) AS quantity, MIN(date) AS item_date
        FROM dbo.get_card_items(loans.id_card) AS card_item
        HAVING loans.id_product_type = 2 --Card
) AS items 
```

我只想在 时返回所有行`DATEDIFF(DAY, MIN(items.item_date), GETDATE()) >= 60`，但即使只有一个符合此条件，我也想要它们全部。
这样做的最佳方法是什么？

**编辑**
为了更清楚，我将解释用例：
我需要显示每笔贷款的项目，只有当客户迟到超过到期日的 60 天时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:03:58.420

我也不确定，你期望什么，但是怎么样：

```
WITH items
     AS (SELECT Count(*)  AS quantity,
                Min(date) AS item_date
         FROM   dbo.Get_cash_items(loans.id_cash) AS cash_item
         HAVING loans.id_product_type = 1
         UNION
         SELECT Count(*)  AS quantity,
                Min(date) AS item_date
         FROM   dbo.Get_card_items(loans.id_card) AS card_item
         HAVING loans.id_product_type = 2)
SELECT a.*
FROM   items AS a,
       (SELECT TOP 1 *
        FROM   items AS b
        WHERE  Datediff(day, b.item_date, Getdate()) >= 60) AS c 
```

这是一种 CROSS JOIN，其中表`C`将有一个或零行，具体取决于如果满足条件 - 它将连接到其他表中的每一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:29:11.783

你有没有尝试过这样的事情？

```
SELECT a.quantity, a.item_date
FROM
    (SELECT COUNT(*) AS quantity, MIN(date) AS item_date
        FROM dbo.get_cash_items(loans.id_cash) AS cash_item
        HAVING loans.id_product_type = 1
    UNION
    SELECT COUNT(*) AS quantity, MIN(date) AS item_date
        FROM dbo.get_card_items(loans.id_card) AS card_item
        HAVING loans.id_product_type = 2) a 
WHERE DATEDIFF(day, a.item_date, GETDATE()) >= 60 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:10:48.133

通常，我使用 CTE 来选择要选择的记录的键，然后加入该键。下面是一个例子的尝试：

```
with LateClients as
(
    SELECT LoadId FROM Payment Where /*payment date later than 60 days*/
)

SELECT     p.LoanId, 
           p.UserId 
FROM       Payment as p
INNER JOIN LateClients as LC
ON         p.LoanId = lc.LoanId 
OrderBy    p.LoanId, p.UserId 
```

我知道这与您发布的代码有点不同，但这是一个应该解释这个概念的简化示例。祝你好运！

# c++ - 我可以在 QP（量子平台）活动对象中等待 Windows 事件（WaitForMultipleObjects）吗？

> ID：12481835
> 
> 赞同：0
> 
> 时间：2012-09-18T17:12:18.583
> 
> 标签：c++, event-handling, statechart

在我当前的代码中，我使用类似的东西等待某些事件发生

```
WaitForMultipleObjects(2,pEvents,false,1000); 
```

在我收到值得发布的事件时，在单独的线程中并将内容发布到状态机。我将此行为移植到 QP 中，据我所知，每个活动对象都是它自己的线程。因此，我可以在 Active 对象中的无限循环（带有一些终止中断条件）中执行此操作吗？

据我了解，QP 也在后台等待 windows 事件，是否有一个技巧来检索代表我当前活动对象队列的 windows 事件句柄并等待它，以便我的线程（活动对象）阻塞如果其他一些对象发布到我的队列，我的（非 QP）事件和事件被激活？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:38:03.833

万一有人感兴趣，我找到了我想要的东西。QActive 的成员 m_osObject 是输入队列为空时等待的事件的句柄。

请注意，我只在 QP 的 windows 端口上测试了它，据我所知，它不适用于任何其他端口。

# typo3 - 如何用链接包装 FCE 容器？

> ID：12481840
> 
> 赞同：0
> 
> 时间：2012-09-18T17:12:44.120
> 
> 标签：typo3

我有一个像往常一样有一个容器 ROOT 的 FCE（灵活内容元素），我想用来自 FCE 内的“链接字段”的链接来包装它。

问题是“元素容器”数据结构没有“自定义 stdWrap”字段，因此我无法轻松添加`typolink.parameter.field = field_link`.

那么，如何将主 div（由 Container for Elements 映射）包装`<a href>|</a>`在 FCE 内的链接字段之一中？

而且我想将其集成到 FCE 本身中，而不是添加外部排版。

模板voila 映射的图像。我希望`<a href></a>`使用 URL 元素的值作为链接来包装容器 ROOT。

[![](../Images/7171187e8c3f34278bc08e6f27087122.png)](https://i.stack.imgur.com/Nj8Jm.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:56:01.663

**您无法链接 FCE 的根元素**有几种解决方法。

首先，您可以定义一个**MAPPED**链接，该链接在 fce 内的 html 中创建**一个标签**。拉伸 a 标签，使其与包装根的尺寸相匹配。这是一个纯 CSS 解决方案。a 标签必须绝对定位在其容器中才能完成此操作。

对于其他解决方案，您需要**两个**FCE。一个包含链接和内容元素。您映射为内容元素的字段将包含您的第二个带有背景图像、文本和标题的 fce。

# r - R apply 语句不适用于矩阵

> ID：12481847
> 
> 赞同：4
> 
> 时间：2012-09-18T17:12:59.967
> 
> 标签：r, matrix, sum, apply

我想知道为什么以下不适用于我在[此处](http://alrig.com/code/MyMatrix.R)发布的矩阵结构（我使用了 dput 命令）。

当我尝试运行时：

```
apply(mymatrix, 2, sum) 
```

我得到：

```
Error in FUN(newX[, i], ...) : invalid 'type' (list) of argument 
```

但是，当我检查以确保它是一个矩阵时，我得到以下信息：

> is.matrix(mymatrix)

```
[1] TRUE 
```

我意识到我可以通过将数据取消列出到临时变量中然后重新创建矩阵来解决这个问题，但我很好奇为什么会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T17:35:59.653

`?is.matrix`说：

> 如果“x”是一个向量并且具有长度为 2 的“dim”属性，则“is.matrix”返回“TRUE”，否则返回“FALSE”。

您的对象是一个带有 dim 属性的列表。列表是一种向量（尽管它不是原子类型，大多数人认为它是向量），所以`is.matrix`返回`TRUE`. 例如：

```
> l <- as.list(1:10)
> dim(l) <- c(10,1)
> is.matrix(l)
[1] TRUE 
```

要转换`mymatrix`为原子矩阵，您需要执行以下操作：

```
mymatrix2 <- unlist(mymatrix, use.names=FALSE)
dim(mymatrix2) <- dim(mymatrix)
# now your apply call will work
apply(mymatrix2, 2, sum)
# but you should really use (if you're really just summing columns)
colSums(mymatrix2) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T17:40:43.173

矩阵的元素不是`numeric`，而是`list`，要看到这一点，您可以这样做：

```
apply(m,2, class) # here m is your matrix 
```

因此，如果您想要列总和，您必须“强制”它们`numeric`，然后应用`colSums`这是一个快捷方式`apply(x, 2, sum)`

```
colSums(apply(m, 2, as.numeric)) # this will give you the sum you want. 
```

# asp.net-mvc-3 - 如何在 Visual Studio 中为 mvc3 项目设置默认页面？

> ID：12481850
> 
> 赞同：1
> 
> 时间：2012-09-18T17:13:19.063
> 
> 标签：asp.net-mvc-3, visual-studio

在我更改项目的默认页面之前，当我运行它时，它的 url 是相同的：

> ```
>  http://localhost:54465 
> ```

它加载了默认主页。

在我将“索引”设置为默认页面后，其 url 更改为：

> ```
>  http://localhost:54465/Views/Home/Index.cshtml 
> ```

它显示了这个错误：

> “没有找到您要查的资源。”

并且不显示主页。

如何将其更改为默认设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T17:16:29.780

不要将`.cshtml`视图设置为默认页面。在 ASP.NET MVC 中，不能直接提供视图。请求通过解析控制器和操作的路由引擎。正是这些操作正在返回视图。因此，如果您想设置默认操作，您可以在 ASP.NET MVC 项目的属性中配置它，方法是指定运行项目时要启动的 URL。它位于`Web`选项卡中：

![在此处输入图像描述](../Images/59a28a72be2894cf4f8570952c13fbc0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T06:20:32.247

MVC 架构不支持设置带有扩展名的默认页面，因此删除扩展名（登录/用户登录）并保存 web 选项卡，它将正常工作。

# android - 缩小Android按钮的PNG图像变得模糊

> ID：12481854
> 
> 赞同：2
> 
> 时间：2012-09-18T17:13:36.620
> 
> 标签：android, scale, image-quality

我正在尝试将图像从 109x105 缩小到 48x48 以制作按钮背景。我已经在 Photoshop 中进行了缩放，图像是矢量。

但是，当我在手机上运行它时，较小的图像会变得模糊。大图像是完美的，我可以毫无问题地将其加载到手机上，因此质量损失。我必须提到，图像中也有一些文字模糊非常明显。

我尝试使用 9 补丁可绘制，使整个图像可拉伸。我似乎无法在网上找到任何准确解决此问题的答案，因此任何输入都会很有用。

我的问题是，如何在不损失质量的情况下缩小 PNG 图像？这是我在将图像复制到我的可绘制文件夹之前可以做的事情，还是我可以让android自动做的事情。

编辑：问题在代码“@drawable/map”、“@drawable/block_small”和“@drawable/share”末尾附近的 3 个按钮中很明显

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/expandable_deal_back_white"
    android:orientation="horizontal"
    android:padding="8dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="23dp"
        android:contentDescription="@string/logo_content_description"
        android:maxHeight="100dp"
        android:maxWidth="100dp"
        android:minHeight="100dp"
        android:minWidth="100dp"
        android:scaleType="fitXY"
        android:src="@drawable/food_selector" />

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginBottom="8dp"
            android:layout_marginLeft="8dp"
            android:layout_marginTop="23dp"
            android:background="@drawable/button_selector_new"
            android:padding="8dp"
            android:text="@string/tandc"
            android:textColor="@drawable/button_text_selector_new" />

        <RelativeLayout
            android:id="@+id/RelativeLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="8dp" >

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_centerHorizontal="true"
                android:layout_marginLeft="4dp"
                android:layout_marginRight="4dp"
                android:background="@drawable/map"
                android:text="@string/empty" />

            <Button
                android:id="@+id/button3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/button2"
                android:background="@drawable/block_small"
                android:text="@string/empty" />

            <Button
                android:id="@+id/button4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toLeftOf="@+id/button2"
                android:background="@drawable/share"
                android:text="@string/empty" />

        </RelativeLayout>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:18:36.203

> 如何在不损失质量的情况下缩小 PNG 图像？

你没有。根据定义，较小的（按像素计数）图像具有较少的数据。

也就是说，您需要检查几件事以确保模糊是由于图像质量下降而不是其他因素造成的。小图像在您的计算机上看起来不错吗？您是否[确定将图像放在正确的`drawable`文件夹](http://developer.android.com/training/multiscreen/screendensities.html)中？

# php - CodeIgniter 上传大文件

> ID：12481856
> 
> 赞同：8
> 
> 时间：2012-09-18T17:13:43.557
> 
> 标签：php, codeigniter, upload

我已经设置了 codeigniter 来上传 < 2MB 的小文件，并且效果很好。但我无法上传大文件 20MB >

```
 function stage1()
    {
    ini_set('upload_max_filesize', '200M');
    ini_set('post_max_size', '200M');                               
    ini_set('max_input_time', 3000);                                
    ini_set('max_execution_time', 3000);

    $config['upload_path'] = './temp/';
    $config['allowed_types'] = 'zip';

    $this->load->library('upload', $config);
    $this->upload->initialize($config);                             
    if(!$this->upload->do_upload('userfile'))                       
    {
      $error = array('error' => $this->upload->display_errors());   
      $this->load->view('upload_form', $error);                     
    }
    else
    {
      $data = array('upload_data' => $this->upload->data());        
      //do stuff
    }
  } 
```

我不确定上面的代码有什么问题。我覆盖了 php.ini 以接受更大的文件并花费更多时间执行脚本，但它仍然返回相同的错误：

```
You did not select a file to upload. 
```

同样，这适用于小文件，但不适用于大文件。

编辑：原来我的服务器提供商的文件上传有限，所以除了 FTP 文件之外没有其他解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T17:32:55.933

**下面的代码在您的 php 文件中使用。**

```
ini_set( 'memory_limit', '200M' );
ini_set('upload_max_filesize', '200M');  
ini_set('post_max_size', '200M');  
ini_set('max_input_time', 3600);  
ini_set('max_execution_time', 3600); 
```

**在 .htaccess 文件中设置以下代码**

```
php_value upload_max_filesize 128M  
php_value post_max_size 128M  
php_value max_input_time 3600  
php_value max_execution_time 3600 
```

**评论后编辑我的答案**

**更新答案**

在 stage1 函数中设置配置参数。

```
$config['max_size'] = '1000000';
$config['max_width']  = '1024000';
$config['max_height']  = '768000'; 
```

之后试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T17:23:17.973

我不确定您的服务器是否接受要使用 hphp 脚本修改的 ini“upload_max_filesize”属性。默认情况下它不能根据文档[http://php.net/manual/fr/ini.core.php](http://php.net/manual/fr/ini.core.php)。

> upload_max_filesize | “2M” | PHP_INI_PERDIR | PHP_INI_ALL 倒 PHP <= 4.2.3。

PHP_INI_PERDIR 意味着它必须直接写在你的ini文件中。如果您无法控制 php.ini，您将无法覆盖此属性。

# android - 模拟器只有通过 CMD 打开才能连接互联网

> ID：12481857
> 
> 赞同：1
> 
> 时间：2012-09-18T17:13:46.083
> 
> 标签：android, emulation

我没有改变任何东西，周末过去了，然后又回来工作我的模拟器没有连接互联网，只有当我通过 CMD 打开时它才会这样做：

```
cd AppData\Local\Android\androi‌​d-sdk\tools>emulator -avd emulator_name -dns-server 8.8.8.8 
```

所以我想知道是否有人也有这些问题，因为我不想每天都从 CMD 打开它。（我想这不仅仅是我）

OBS：创建新的模拟器不起作用（互联网连接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:05:03.390

试试下面的链接，在这里您将了解有关互联网连接的一些详细信息.....

[http://www.gitshah.com/2011/02/android-fixing-no-internet-connection.html](http://www.gitshah.com/2011/02/android-fixing-no-internet-connection.html)

或者

[Android 模拟器上没有互联网 - 为什么以及如何修复？](https://stackoverflow.com/questions/2206822/no-internet-on-android-emulator-why-and-how-to-fix)

这可能会帮助你......

# xampp - XAMPP 将连接到启动页面，但没有其他链接可用

> ID：12481864
> 
> 赞同：0
> 
> 时间：2012-09-18T17:14:15.287
> 
> 标签：xampp, localhost, localserver

我的 xampp 以前可以正常工作，但我有一段时间没有使用它了，现在它似乎已经停止工作了。它说我的 apache 和 mysql 在 XAMPP 控制面板中运行良好，当我输入 127.0.0.1 时，它会将我带到位于 127.0.0.1/xampp 的 xampp 启动页面。

但是，当我尝试打开索引页面时说“它有效！” 在 localhost/xampp/htdocs/index.html 目录中，它说找不到对象。

我尝试通过本地主机显示的所有资源都收到相同的错误消息。

这是生成的错误日志。

[2012 年 9 月 18 日星期二 13:06:13] [错误] [客户端 ::1] 文件不存在：C:/xampp/htdocs/xampp/htdocs [2012 年 9 月 18 日星期二 13:06:17] [错误] [客户端 ::1] 文件不存在：C:/xampp/htdocs/crossdomain.xml，引用者：“http://localhost/xampp/htdocs/index.html”

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:04:58.230

以防万一其他人有这个问题，我已经解决了。当我输入 localhost 时，默认情况下它会将我带到 localhost/xampp。我很自然地认为我的 url 地址与我的系统目录相同，其中 localhost 代替了 C，如 localhost/xampp/htdocs/etc... 但显然 localhost 目录本身就是 htdocs... 所以我解决了这个问题通过键入 localhost/index.html。你们中的大多数人已经知道这一点，但我希望它可以帮助其他人。——</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T07:14:24.880

我的问题通过给予许可解决了

```
sudo chmod 777 /Applications/XAMPP/htdocs/xampp/lang.tmp 
```

# deployment - ClickOnce 部署/发布后的自定义操作

> ID：12481867
> 
> 赞同：0
> 
> 时间：2012-09-18T17:14:30.233
> 
> 标签：deployment, msbuild, clickonce, msbuild-task

如何在发布后立即运行将 ClickOnce 部署文件上传到 Web 服务器（在我的情况下为 Windows Azure 博客存储）的自定义脚本？是否可以以某种方式修改 MSBuild 文件，以便在 ClickOnce 将文件发布到本地文件夹后立即运行自定义脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:38:43.923

是的，您可以使用各种技术挂钩构建流程：

*   构建前和构建后操作（来自 Visual Studio 项目属性菜单）。它实际上是挂钩到您的项目文件的 exec 任务
*   您可以覆盖具体目标的 DependsOn 属性并附加执行您自己的目标（Msbuild 4.0 之前的方式）
*   您可以声明您的目标并使用 AfterTarget\BeforeTarget 属性（Msbuild4.0 方式）挂钩。

至于将某些内容上传到 blob - 您可以在自己的目标中使用 Exec 任务来上传或使用您通常用来将文件上传到网站\Blob 存储的任何工具\脚本。

注意：您可以通过以下几点来澄清您的问题（如果您需要更具体的答案）：

*   你正在使用什么样的构建过程 - 从 VS 构建，带有自定义 msbuild 脚本的 CI 服务器，构建你的 sln 文件的 CI 服务器等
*   您要执行什么样的脚本\工具来上传构建结果。
*   你知道最后执行的 msbuild 目标的名称，之后你想触发你的工具。

# c# - 如何将标量值函数与 linq 一起使用到实体？

> ID：12481868
> 
> 赞同：9
> 
> 时间：2012-09-18T17:14:32.650
> 
> 标签：c#, sql, entity-framework, linq-to-entities

> **可能重复：**
> [SQL 级别函数是否可用于 LINQ to Entity 查询？](https://stackoverflow.com/questions/10625955/can-sql-level-functions-be-made-available-to-linq-to-entity-queries)

我有一个标量函数，可以获取两点之间的距离，我想用它来查询最近的记录到点。标量函数适用于 linq to sql 但因 EF 失败

标量函数

```
USE [GeoData]
GO

/****** Object:  UserDefinedFunction [dbo].[DistanceBetween]    Script Date: 09/18/2012 19:40:44 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[DistanceBetween](@Lat1 as real,
@Long1 as real, @Lat2 as real, @Long2 as real)
RETURNS real
AS
BEGIN

DECLARE @dLat1InRad as float(53);
SET @dLat1InRad = @Lat1;
DECLARE @dLong1InRad as float(53);
SET @dLong1InRad = @Long1;
DECLARE @dLat2InRad as float(53);
SET @dLat2InRad = @Lat2;
DECLARE @dLong2InRad as float(53);
SET @dLong2InRad = @Long2 ;

DECLARE @dLongitude as float(53);
SET @dLongitude = @dLong2InRad - @dLong1InRad;
DECLARE @dLatitude as float(53);
SET @dLatitude = @dLat2InRad - @dLat1InRad;
/* Intermediate result a. */
DECLARE @a as float(53);
SET @a = SQUARE (SIN (@dLatitude / 2.0)) + COS (@dLat1InRad)
* COS (@dLat2InRad)
* SQUARE(SIN (@dLongitude / 2.0));
/* Intermediate result c (great circle distance in Radians). */
DECLARE @c as real;
SET @c = 2.0 * ATN2 (SQRT (@a), SQRT (1.0 - @a));
DECLARE @kEarthRadius as real;
/* SET kEarthRadius = 3956.0 miles */
SET @kEarthRadius = 6376.5;        /* kms */

DECLARE @dDistance as real;
SET @dDistance = @kEarthRadius * @c;
return (@dDistance);
END

GO 
```

我添加了一个 ado.net 实体模型，从数据库中更新了模型并选择了距离

```
 <Function Name="DistanceBetween" ReturnType="real" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="true" ParameterTypeSemantics="AllowImplicitConversion" Schema="dbo">
      <Parameter Name="Lat1" Type="real" Mode="In" />
      <Parameter Name="Long1" Type="real" Mode="In" />
      <Parameter Name="Lat2" Type="real" Mode="In" />
      <Parameter Name="Long2" Type="real" Mode="In" />
    </Function> 
```

我做了一个部分类并写了这个方法

```
public partial class GeoDataEntities
{
    [EdmFunction("GeoDataModel.Store", "DistanceBetween")]
    public double DistanceBetween(double lat1, double lon1, double lat2, double lon2)
    {
        throw new NotImplementedException();
    }
} 
```

我多次尝试使用此代码查询函数，但出现错误

```
var NParcel = db.geoAddresses.Where(g=> db.DistanceBetween(21.5,39.5, g.lat,g.lon) < 20); 
```

当我尝试`count`使用`foreach`NParcel 时，我收到此错误

> 'EFSample.GeoDataEntities' 类型上的指定方法 'Double DistanceBetween(Double, Double, Double, Double)' 无法转换为 LINQ to Entities 存储表达式。

和堆栈跟踪

> 在 System.Data.Objects.ELinq.ExpressionConverter.ThrowUnresolvableFunction(Expression Expression) 在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.FunctionCallTranslator.TranslateFunctionCall(ExpressionConverter parent, MethodCallExpression call, EdmFunctionAttribute functionAttribute) 在 System.Data.Objects.ELinq .ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data.Objects.ELinq.ExpressionConverter.BinaryTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq) 在 System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)在 System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda（LambdaExpression lambda，DbExpression 输入）在 System.Data.Objects.ELinq。System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call) 在 System.Data. .Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq) 在 System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq) 在 System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.AggregateTranslator.Translate( ExpressionConverter 父级，MethodCallExpression 调用）在 System.Data.Objects.ELinq.ExpressionConverter。System.Data.Objects.ELinq.ExpressionConverter.Convert() 在 System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable) 的 MethodCallTranslator.TypedTranslate(ExpressionConverter parent，MethodCallExpression linq)`1 forMergeOption) at System.Data.Objects.ObjectQuery`1.GetResults（在 System.Linq.Enumerable.Single[TSource] 处为 Nullable `1 forMergeOption) at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable.GetEnumerator()（IEnumerable `1 source) at System.Linq.Queryable.Count[TSource](IQueryable`1 源）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T19:36:06.843

这是您的操作方法：

**第 1 步：在 edmx 中**

```
 <Function Name="DistanceBetween" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="dbo">
      <CommandText>
        select dbo.DistanceBetween(@lat1,@long1,@lat2,@long2)
      </CommandText>
      <Parameter Name="Lat1" Type="real" Mode="In" />
      <Parameter Name="Long1" Type="real" Mode="In" />
      <Parameter Name="Lat2" Type="real" Mode="In" />
      <Parameter Name="Long2" Type="real" Mode="In" />
    </Function> 
```

**第二步：导入函数**

1.  双击`edmx`
2.  在模型浏览器视图中，展开`GeoDataModel.Store`（可以命名不同）
3.  扩张`stored procedures /function`
4.  双击`DistanceBetween`
5.  `Scalars = Single`
6.  点击确定

**第 3 步：在 C# 中：**

```
 GeoDataEntities db = new GeoDataEntities();
    var first = db.DistanceBetween(234, 2342, 424, 243).First().Value; 
```

* * *

**请注意**， `IsComposable="false"`不`ReturnType`，不要忘记添加：

```
 <CommandText>
        select dbo.DistanceBetween(@lat1,@long1,@lat2,@long2)
      </CommandText> 
```

希望有帮助....

# activemq - ActiveMQ - 同时从队列和主题消费

> ID：12481882
> 
> 赞同：1
> 
> 时间：2012-09-18T17:15:17.583
> 
> 标签：activemq

我们正在尝试在 activemq 中消费消息。生产者（我们无法控制）将不同的消息放入队列和主题中。作为消费者，我如何将我的客户端配置为同时从队列和主题中消费？我能想到的唯一方法是创建两个不同的消费者，一个连接到队列，另一个连接到主题。这种方法是否正确，或者我可以做些什么来创建一个同时收听两者的消费者？

谢谢K

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:11:09.753

ActiveMQ standard distribution comes bundled with Apache Camel.

Given that you are running the standard ActiveMQ - you could add a small route to Camel that does this for you.

Edit the "camel.xml" int the /conf folder.

Add two routes:

```
<route>
  <from uri="activemq:topic:someTopic"/>
  <to uri="activemq:queue:comboQueue"/>
</route>

<route>
  <from uri="activemq:queue:someQueue"/>
  <to uri="activemq:queue:comboQueue"/>
</route> 
```

Make sure this camel.xml is included in the ActiveMQ config, such as Activemq.xml.

Now, just consume from "comboQueue" and you get all messages in one place.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T00:02:58.373

您可以使用 ActiveMQ 的[复合目标](http://activemq.apache.org/composite-destinations.html)功能来实现这一点，该功能允许您侦听多个目标和不同类型的目标。

# iphone - Objective-c 加速下降/上升

> ID：12481884
> 
> 赞同：1
> 
> 时间：2012-09-18T17:15:20.057
> 
> 标签：iphone, objective-c, caanimation

我试图制作一个当你触摸屏幕时会上升的坠落物体的动画。如果我想对这个对象使用线速度，这不是问题，但如果它向地面加速并且当用户触摸屏幕时它开始向相反方向加速，我会更喜欢它。所以让我们假设我们有一个以 10px/s 的速度向地面移动的对象，当用户触摸屏幕时，我希望它有一个 = -5px/s^2 这意味着即使在触摸屏幕之后，该对象仍会再下降 2 秒. 知道如何以“不错的方式”做到这一点（现在我每次都用新的 CGRect 重写 UIImageViews.frame 但我猜这不是很好的方法）？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:12:27.270

你总是可以使用 UIView 动画：

```
[UIView animateWithDuration:1.0 
                          delay:0.0 options:UIViewAnimationCurveEaseIn animations:^{
                              // put the co-ordinates you want your object to FINISH on in here
                          } 
                     completion:^(BOOL finished){
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:29:06.633

> 知道如何以“不错的方式”做到这一点（现在我每次都用新的 CGRect 重写 UIImageViews.frame 但我猜这不是很好的方法）？

使用[核心动画](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004627-SW1)。它很容易上手，而且一旦你上手就非常强大。你可以指定你自己的计时函数，这样你就可以给出加速的外观。你没有理由手动重绘你的图像视图……Core Animation 会更容易、更好地为你做这件事。

# amazon-web-services - AWS 在我终止后自动生成新实例。

> ID：12481886
> 
> 赞同：20
> 
> 时间：2012-09-18T17:15:25.130
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

好的，AWS 上发生了奇怪的事情。

我下载了 AWS .NET 开发人员工具并创建了一个弹性 beanstalk 默认实例。然后，出于某种原因，我通过 Visual Studio 界面创建了另一个实例，该实例是所有客户端代码/配置所在的位置。然后我返回到由弹性 beantalk 创建的默认实例并终止它。一小时后，我重新登录，另一个默认实例启动并运行。似乎 AWS 已经检测到我终止了该实例并产生了另一个。某种检查似乎已经到位。有人可以告诉我这里发生了什么以及如何完全删除默认实例（及其终止保护行为）吗？

谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-18T17:57:33.750

我经历过类似的事情。如果实例是通过 Elastic Beanstalk 创建的，您需要转到 AWS 控制台中的 Elastic Beanstalk 屏幕并首先从那里删除应用程序。如果您只是从 EC2 屏幕终止实例，Elastic Beanstalk 可能会认为该实例已崩溃并启动一个新实例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-26T08:27:42.033

如果没有启用 beanstalk，那么很可能它是从自动缩放创建的。这存在于 EC2 服务本身中。

转到 Auto Scaling 并首先删除该关联实例的自动配置组和启动配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-13T15:55:57.940

如此处所述[，](https://serverfault.com/a/718792/465296)它是由`Auto Scaling Group`所需/最少 1 个实例设置引起的。因此，这意味着该 Auto Scaling 组中的实例将始终有一个正在运行的实例。如果您删除唯一的一个，它将创建另一个。为了防止这种情况，请转到 EC2 仪表板并在左侧边栏上向下滚动以`Auto Scaling Groups`在`AUTO SCALING`菜单下查找/单击。您将看到组列表，您可以在其中单击它们以查看这些组中的实例。找到您的实例所在的组，然后将其删除（在删除环境时也会发生这种情况）或将其所需的最少 1 个实例规则更改为 0 并保存。这就对了。

[![在此处输入图像描述](../Images/73b24da2b8dcd7a8a0c839f2a3b52693.png)](https://i.stack.imgur.com/lrAyu.png)

# javascript - Javascript 中是否存在只能由真实用户发出的机制？

> ID：12481887
> 
> 赞同：0
> 
> 时间：2012-09-18T17:15:32.700
> 
> 标签：javascript, validation, events

我想在 Javascript 中找到只有人类才能做到的交互，但如果用户已经完成，javascript 可以跟踪它。

类似于仅可读但不可写的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:24:10.543

你可以使用鼠标驱动的 CSS 伪类；我不相信它们可以使用 Javascript 触发：请参阅[Trigger css hover with JS](https://stackoverflow.com/questions/4347116/trigger-css-hover-with-js)了解更多信息。

例如，如果您在悬停上设置了一些样式方面，您可能能够使用 javascript 检测到。

但是，我不知道这种方法在跨浏览器中的效果如何，您可能需要使用可见元素。

另请参阅[使用 Javascript 激活元素的 :active CSS 伪类？](https://stackoverflow.com/questions/8101854/activate-an-elements-active-css-pseudo-class-using-javascript)

# google-app-engine - GAE - 从队列启动动态后端

> ID：12481893
> 
> 赞同：0
> 
> 时间：2012-09-18T17:15:49.073
> 
> 标签：google-app-engine, queue, backend

我正在尝试使用动态后端运行 GAE 队列：

```
Queue queue = QueueFactory.getDefaultQueue();
queue.add(TaskOptions.Builder.withUrl("/parse").method(Method.GET).header("Host",
BackendServiceFactory.getBackendService().getBackendAddress("backend1", 1))); 
```

后端.xml

```
 <backends>
     <backend name="backend1">
          <class>B2</class>
          <instances>1</instances>
          <options>
              <dynamic>true</dynamic>
          </options>
     </backend>
  </backends> 
```

这会自动启动后端吗？我认为不会。你如何启动动态后端？

谢谢！

# spring - 将接口的多个实现公开为 OSGI 服务

> ID：12481897
> 
> 赞同：2
> 
> 时间：2012-09-18T17:16:02.763
> 
> 标签：spring, osgi

我有一个有两个实现的接口。我想将这两种实现都公开为 OSGi 服务，但是当我这样做时，一个会覆盖另一个。请找到我正在做的配置：

```
<bean id="formService" class="com.dbt.form.service.FormService"/>
<bean id="formAPIService" class="com.dbt.form.service.FormAPIService"/>
<osgi:service 
    ref="formAPIService" 
    interface="com.dbt.form.service.ifc.IFormService"/>
<osgi:service 
    ref="formService" 
    interface="com.dbt.form.service.ifc.IFormService" /> 
```

这里`formService`被`formAPIService`实现覆盖。

请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T22:23:59.257

第二个服务不会覆盖第一个……这两个服务将分别发布，您可以通过`inpect cap service`在 OSGi Gogo shell 中键入命令来确认这一点。

可能发生的情况是您的消费者代码只会选择一个可用的服务实例。在这种情况下，您需要编写消费者以绑定到所有实例，或者使用排名或目标过滤器的组合来确定您想要的特定服务。您应该提供有关如何使用这些服务的更多信息，因为这就是问题所在（可能）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T11:05:52.370

阅读此页...[第 8 章。服务注册表](http://static.springsource.org/osgi/docs/2.0.0.M1/reference/html/service-registry.html)第 8.2.2.3 节。

您可以使用osgi**引用**标签的**bean-name属性。**导入服务时， *bean-name*指的是该服务导出时的*id*属性。

# android - 在 dispatchCreateOptionsMenu 期间轮换出现 NullPointerException，堆栈跟踪不包括我的应用程序中的任何函数

> ID：12481907
> 
> 赞同：6
> 
> 时间：2012-09-18T17:16:44.027
> 
> 标签：android, nullpointerexception, android-actionbar, android-tabs, android-optionsmenu

我有一个使用 ICS 操作栏上的选项卡的应用程序，其中每个选项卡内部都有一个片段。在某些情况下，在我按下操作栏上的选项菜单上的按钮，然后旋转设备后，我会收到 NullPointerException。我可以使用相同的步骤可靠地重现它，但是在某些情况下（例如，如果我不按操作栏上的任何按钮）不会产生异常。该异常似乎没有引用我的代码中的任何行，并且在方向更改后重新创建活动期间发生。

这是一个例外：

```
09-18 20:56:22.357: E/AndroidRuntime(689): FATAL EXCEPTION: main
09-18 20:56:22.357: E/AndroidRuntime(689): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.andavapps.flightbot/com.andavapps.flightbot.FlightBotActivity}: java.lang.NullPointerException
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3351)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.ActivityThread.access$700(ActivityThread.java:123)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.os.Looper.loop(Looper.java:137)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-18 20:56:22.357: E/AndroidRuntime(689):     at java.lang.reflect.Method.invokeNative(Native Method)
09-18 20:56:22.357: E/AndroidRuntime(689):     at java.lang.reflect.Method.invoke(Method.java:511)
09-18 20:56:22.357: E/AndroidRuntime(689):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-18 20:56:22.357: E/AndroidRuntime(689):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-18 20:56:22.357: E/AndroidRuntime(689):     at dalvik.system.NativeStart.main(Native Method)
09-18 20:56:22.357: E/AndroidRuntime(689): Caused by: java.lang.NullPointerException
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.FragmentManagerImpl.dispatchCreateOptionsMenu(FragmentManager.java:1831)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.Activity.onCreatePanelMenu(Activity.java:2445)
09-18 20:56:22.357: E/AndroidRuntime(689):     at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:388)
09-18 20:56:22.357: E/AndroidRuntime(689):     at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:739)
09-18 20:56:22.357: E/AndroidRuntime(689):     at com.android.internal.policy.impl.PhoneWindow.restorePanelState(PhoneWindow.java:1664)
09-18 20:56:22.357: E/AndroidRuntime(689):     at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1619)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.Activity.onRestoreInstanceState(Activity.java:906)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.Activity.performRestoreInstanceState(Activity.java:878)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1100)
09-18 20:56:22.357: E/AndroidRuntime(689):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-18 20:56:22.357: E/AndroidRuntime(689):     ... 12 more 
```

这是我的活动代码（为了简单起见，删除了一些不相关的代码）

```
public class MyActivity extends Activity {

    private class MyTabListener<C extends MyFragment> implements ActionBar.TabListener {

        private Activity activity;
        private MyFragment fragmentMain;
        private MyFragment fragmentSide;
        private Class<C> cls;

        public MyTabListener(Activity a, Class<C> c) {
            activity = a;
            cls = c;
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) { }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            if (sidebar) {
                if (fragmentSide == null) {
                    fragmentSide = (MyFragment) Fragment.instantiate(activity, cls.getName());
                    ft.add(c.SIDE_FRAME, fragmentSide, fragmentSide.getViewTag());
                } else
                    ft.attach(fragmentSide);
            } else {
                if (fragmentMain == null) {
                    fragmentMain = (MyFragment) Fragment.instantiate(activity, cls.getName());
                    ft.add(c.MAIN_FRAME, fragmentMain, fragmentMain.getViewTag());
                } else
                    ft.attach(fragmentMain);
            }
            selected = tabs.indexOf(tab);
            mainUp = false;
            if (setUpComplete)
                invalidateOptionsMenu();
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            if (fragmentSide != null && !fragmentSide.isDetached())
                ft.detach(fragmentSide);
            if (fragmentMain != null && !fragmentMain.isDetached())
                ft.detach(fragmentMain);
        }

    }

    private class MyMainTabListener<C extends MyFragment> implements ActionBar.TabListener {

        private Activity activity;
        private MyFragment fragmentMain;
        private Class<C> cls;

        public MyMainTabListener(Activity a, Class<C> c) {
            activity = a;
            cls = c;
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) { }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            if (fragmentMain == null) {
                fragmentMain = (MyFragment) Fragment.instantiate(activity, cls.getName());
                ft.add(c.MAIN_FRAME, fragmentMain, fragmentMain.getViewTag());
            } else if (fragmentMain.isDetached())
                ft.attach(fragmentMain);
            mainUp = !sidebar;
            if (setUpComplete)
                invalidateOptionsMenu();
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            if (!sidebar && fragmentMain != null && !fragmentMain.isDetached())
                ft.detach(fragmentMain);
            else if (sidebar && (fragmentMain == null || fragmentMain.isDetached())) {
                if (fragmentMain == null) {
                    fragmentMain = (MyFragment) Fragment.instantiate(activity, cls.getName());
                    ft.add(c.MAIN_FRAME, fragmentMain, fragmentMain.getViewTag());
                } else if (fragmentMain.isDetached())
                    ft.attach(fragmentMain);
            }
        }

    }

    private static final class c {
        //A bunch of constants are defined here
    }

    private ArrayList<ActionBar.Tab> tabs = new ArrayList<ActionBar.Tab>();

    private int side;
    private int orient;
    private int selected;
    private boolean sidebar;
    private boolean mainUp;
    private boolean lock;
    private boolean setUpComplete = false;

    @Override
    public void onCreate(Bundle inState) {
        super.onCreate(inState);
        setContentView(R.layout.main_rel);

        orient = detectOrientation();

        if (inState != null) {
            selected = inState.getInt("selected", 1);
            side = inState.getInt("side", c.LEFT_SIDE);
            sidebar = inState.getBoolean("visible", true);
            mainUp = inState.getBoolean("mainup", !sidebar);
            lock = inState.getBoolean("lock", false);
        } else {
            selected = 1;
            side = c.LEFT_SIDE;
            sidebar = true;
            mainUp = false;
            lock = false;
        }

        ActionBar ab = getActionBar();
        ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        tabs.add(ab.newTab().setText(MainFragment.getTabText()).setTabListener(new MyMainTabListener<MainFragment>(this, MainFragment.class)));
        tabs.add(ab.newTab().setText(OtherFragment.getTabText()).setTabListener(new MyTabListener<OtherFragment>(this, OtherFragment.class)));
        tabs.add(ab.newTab().setText(AnotherFragment.getTabText()).setTabListener(new MyTabListener<AnotherFragment>(this, AnotherFragment.class)));
        tabs.add(ab.newTab().setText(YetAnotherFragment.getTabText()).setTabListener(new MyTabListener<YetAnotherFragment>(this, YetAnotherFragment.class)));
    }

    @Override
    protected void onStart() {
        super.onStart();

        if (!setUpComplete)
            setUp();
    }

    @Override
    protected void onResume() {
        super.onResume();

        if (!setUpComplete)
            setUp();
    }

    @Override
    protected void onPause() {
        super.onPause();
    }

    @Override
    protected void onStop() {
        super.onStop();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        setUpComplete = false;
        getActionBar().removeAllTabs();

        super.onSaveInstanceState(outState);
        outState.putInt("selected", selected);
        outState.putInt("side", side);
        outState.putBoolean("visible", sidebar);
        outState.putBoolean("mainup", mainUp);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        menu.findItem(R.id.menu_showhide).setTitle(c.MENU_SHOW_TEXT[(sidebar ? 1 : 0)]).setIcon(c.MENU_SHOW_DRAW[(sidebar ? 1 : 0)][side][orient][(mainUp ? 0 : 1)]);
        menu.findItem(R.id.menu_swapside).setTitle(c.MENU_SIDE_TEXT[side][orient]).setIcon(c.MENU_SIDE_DRAW[side][orient]);
        menu.findItem(R.id.menu_lock).setTitle(c.MENU_LOCK_TEXT[(lock ? 1 : 0)]).setIcon(c.MENU_LOCK_DRAW[(lock ? 0 : 1)]);
        if (!sidebar)
            menu.findItem(R.id.menu_swapside).setVisible(false).setEnabled(false);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_swapside:
                toggleSide();
                return true;
            case R.id.menu_showhide:
                toggleVisibility();
                return true;
            case R.id.menu_lock:
                toggleRotation();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    private int detectOrientation() {
            int o = getResources().getConfiguration().orientation;
            int r = getWindowManager().getDefaultDisplay().getRotation();

            if (o == Configuration.ORIENTATION_LANDSCAPE && (r == Surface.ROTATION_0 || r == Surface.ROTATION_90))
                return c.LAND_ORIENT;
            else if (o == Configuration.ORIENTATION_PORTRAIT && (r == Surface.ROTATION_90 || r == Surface.ROTATION_180))
                return c.RPORT_ORIENT;
            else if (o == Configuration.ORIENTATION_LANDSCAPE && (r == Surface.ROTATION_180 || r == Surface.ROTATION_270))
                return c.RLAND_ORIENT;
            else
                return c.PORT_ORIENT;
    }

    private void toggleVisibility() {
        sidebar = !sidebar;
        mainUp = !sidebar;
        invalidateOptionsMenu();
        setUpTabs();
    }

    private void toggleSide() {
        side = (side == c.RIGHT_SIDE ? c.LEFT_SIDE : c.RIGHT_SIDE);
        invalidateOptionsMenu();
        setUpSide();
    }

    private void toggleRotation() {
        lock = !lock;
        invalidateOptionsMenu();
        setUpLock();
    }

    private void setUp() {
        setUpTabs();
        setUpSide();
        setUpLock();
        setUpComplete = true;
    }

    private void setUpTabs() {
        ActionBar ab = getActionBar();
        ab.removeAllTabs();

        ab.addTab(tabs.get(0), sidebar || mainUp);
        if (sidebar)
            ab.removeTab(tabs.get(0));
        for (int i = 1; i < tabs.size(); i ++)
            ab.addTab(tabs.get(i), !mainUp && selected == i);
    }

    private void setUpSide() {
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
        params.addRule(c.SIDE_RULE[side][orient], c.SIDE_FRAME);
        FrameLayout mf = (FrameLayout) findViewById(c.MAIN_FRAME);
        mf.setLayoutParams(params);

        params = new RelativeLayout.LayoutParams(c.LAYOUT_WIDTH[orient], c.LAYOUT_HEIGHT[orient]);
        params.addRule(c.ALIGN_RULE[side][orient]);
        FrameLayout sf = (FrameLayout) findViewById(c.SIDE_FRAME);
        sf.setLayoutParams(params);
    }

    private void setUpLock() {
        setRequestedOrientation((lock ? c.LOCK_ORIENT[orient] : ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED));
    }

} 
```

关于我的应用程序和解释事情的代码的一些注释：

*   该应用程序显示一个主片段和一个侧边栏片段
*   选项菜单包含三个按钮：一个用于将侧边栏从屏幕一侧切换到另一侧，一个用于隐藏侧边栏，一个用于锁定方向
*   主片段始终是选项卡列表中的第一个，并且始终是 MainFragment 类型
*   我在运行 ICS（Asus Trans Prime，4.0.4；HTC Vivid，4.0.3）和模拟器（ICS 4.0.3 和 JB 4.1）的两台设备上运行它。这只发生在 ICS 上。

异常按以下顺序发生：

*   启动应用程序
*   按下按钮隐藏侧边栏
*   旋转装置

如果在旋转设备之前发生任何其他事情，则不会发生异常。例如，如果侧边栏未隐藏，我不会得到异常。如果先旋转设备，则永远不会发生异常，因此即使隐藏侧边栏，再次旋转设备，我也不会收到异常。而且堆栈跟踪没有引用我的代码中的单个函数，所以我什至可以找到根本原因。

似乎这是 FragmentManager.java（android.app 包）中引发异常的函数：

```
1827     public boolean dispatchCreateOptionsMenu(Menu menu, MenuInflater inflater) {
1828         boolean show = false;
1829         ArrayList<Fragment> newMenus = null;
1830         if (mActive != null) {
1831             for (int i=0; i<mAdded.size(); i++) {
1832                 Fragment f = mAdded.get(i);
1833                 if (f != null && !f.mHidden && f.mHasMenu && f.mMenuVisible) {
1834                     show = true;
1835                     f.onCreateOptionsMenu(menu, inflater);
1836                     if (newMenus == null) {
1837                         newMenus = new ArrayList<Fragment>();
1838                     }
1839                     newMenus.add(f);
1840                 }
1841             }
1842         }
1843         
1844         if (mCreatedMenus != null) {
1845             for (int i=0; i<mCreatedMenus.size(); i++) {
1846                 Fragment f = mCreatedMenus.get(i);
1847                 if (newMenus == null || !newMenus.contains(f)) {
1848                     f.onDestroyOptionsMenu();
1849                 }
1850             }
1851         }
1852         
1853         mCreatedMenus = newMenus;
1854         
1855         return show;
1856     } 
```

`mAdded`在尝试使用它之前没有空检查。JB 中的相同功能替换`(mActive != null)`为`(mAdded != null)`. 但我不知道我可以为 ICS 做些什么来避免这种情况。

有人有什么想法吗？我已经搜索过 StackOverflow 寻找类似的问题，但到目前为止都是空的。谢谢！如果还有什么我需要发布的，请告诉我，我会添加它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T17:39:11.203

我有一个使用工具栏的应用程序（基于 com.example.android.actionbarcompat 的代码），我遇到了同样的问题。在某些设备上，onCreateOptionsMenu() 不会在 onCreate() 之后被调用，这意味着操作栏未初始化，当我尝试更改图标时，应用程序崩溃了。

对我来说好消息是 onCreateOptionsMenu() 确实会在稍后调用，当它发生时，我会在 onCreateOptionsMenu() 中保留对菜单的引用。在他们对操作栏执行任何操作之前，我修改了其余的活动代码以检查此引用。这仍然执行得非常快，并且不影响用户体验。

我建议您也这样做并推迟一些初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T01:43:51.887

`Fragments`我在选项卡和 NPE 中轮换更改的应用程序中遇到了类似的问题。原因是有时`Activity`引用`Fragments`为空。`Fragment's` `Activity`我通过尽可能更改对应用程序上下文引用的引用以及测试 Fragments 中所有剩余的 Activity 引用是否为空来避免 NPE 问题：

```
if(getActivity() != null) { 
    getActivity.someMethod() 
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:52:39.470

将此添加到您的活动标签中：

```
android:configChanges="orientation" 
```

并覆盖此方法：

```
public void onConfigurationChanged(Configuration newConfig) 
```

您可以在以下位置找到更多信息：

[http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged(android.content.res.Configuration](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged(android.content.res.Configuration) )

[http://developer.android.com/reference/android/R.attr.html#configChanges](http://developer.android.com/reference/android/R.attr.html#configChanges)

# eclipse - JBoss 开始时间的长时间延迟

> ID：12481915
> 
> 赞同：1
> 
> 时间：2012-09-18T17:17:28.823
> 
> 标签：eclipse, jboss7.x

我正在运行 JBoss 7.1.1.Final 和全新安装的 Eclipse (Juno)。JBoss 服务器启动后运行良好，但我注意到每次尝试启动它时都会有很长的延迟。看看下面，前三行立即弹出到控制台，然后两分钟似乎什么也没发生。当它再次启动时，服务器的其余部分启动大约需要 30 秒。

```
13:07:39,406 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
13:07:43,357 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
13:07:43,498 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
13:10:12,772 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
...
13:10:45,380 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS018559: Deployed "test-ear.ear" 
```

有谁知道在第 3 行和第 4 行之间发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:40:21.007

它很可能正在对您的部署执行扫描。打开类别“org.jboss.modules”的调试级别日志记录以查看扫描是否占用了这个时间。

还要检查您是否为部署目录（排除此目录）打开了防病毒扫描，因为这也会减慢启动速度。

# php - Drupal 6 Clean URL 和返回 Not Found 的 url

> ID：12481916
> 
> 赞同：0
> 
> 时间：2012-09-18T17:17:42.030
> 
> 标签：php, drupal, mod-rewrite, url-rewriting, clean-urls

当我将其上传到测试服务器时，我的 drupal 站点在本地运行良好。它开始引起问题 首先是它的 Clean URLs 现在被禁用。无法启用它说您的系统配置当前不支持此功能。Clean URLs 上的手册页面包含其他故障排除信息。

其次，一些链接不起作用，比如如果我点击顶部的管理员，它会给我错误页面 Not Found。 `http://192.168.5.19/poa/admin`不工作，但如果我手动添加 ?q 它工作。这是有效的。`http://192.168.5.19/poa/?q=admin`

我读了很多。尝试重写但没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T06:47:46.310

这是因为我的 htaccess 没有被读取。要使其工作，请编辑 conf/httpd.conf 并将 AllowOverride 设置为 All from none。在命令行“service httpd reload”中使用它重新加载。一切都将开始工作。现在转到 Clean URL 选项并从 Drupal 启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-09T05:48:33.420

在您的 drupal 数据库中触发这两个查询：

```
UPDATE variable SET value = 's:1:"0";' WHERE name = 'clean_url';    
DELETE FROM cache; 
```

和写

```
$conf['clean_url'] = 0; 
```

在页面的 settings.php 末尾。

这应该有效。

# javascript - 淡出仅隐藏 HTML 代码，JavaScript 仍在运行

> ID：12481917
> 
> 赞同：0
> 
> 时间：2012-09-18T17:17:50.330
> 
> 标签：javascript, jquery, html, three.js

我尝试`div`在`HTML`文档中的不同之间切换。这是我的代码：

```
 <div id="screen1" class="current">
            <div id="press_any_key_to_continue"> <font style="font-family: verdana" color="yellow">Press Enter to start</font></p> </div>

    <script>
    var container;
    var camera, scene, renderer;

    init();
    animate();
    //And a lot of THREE.js code..

    </script>

    </div>
<div id='screen2'>
<p>Some content goes here</p>
</div> 
```

我的 jQuery 方法 Fade out the `div`which `id`is`screen1`和 Fade in another `div`with id `screen2`，如下所示：

```
$(document).keyup(keyUpHandler);

function keyUpHandler(e) {

    if (e.keyCode == 13) {

        var id = $('.current').attr('id');

        console.log('The id of the current div is: ' + id);
        if (id == 'screen1') {

            toggleDivs('screen2');
        }
    }

}

function toggleDivs(id) {

    console.log('Hello world, the id passed is: ' + id);

    $('.current').fadeOut(600, function () {
        $('#' + id).fadeIn(600);
        $('.current').removeClass('current');
        $('#' + id).addClass('current')
    });
} 
```

到目前为止一切顺利，screen2 出现了很好的淡入效果，但 screen1 没有淡出，假设 screen1 中的 html 部分成功淡出，但 javascript 部分没有淡出。

所以我假设淡出不会停止 JS 脚本。否则我该如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:20:45.970

要停止动画，您想使用，[`.stop`](http://api.jquery.com/stop/)但是在您的代码中并不明显这将是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:24:57.693

animate() 函数开始类似于“后台进程”，然后函数的其余部分继续。这只是 Javascript 工作的一种效果——因为当前窗口中的*所有内容都会*`animate()`在 Javascript 运行时冻结[1]，因此会设置一个计时器，每隔几毫秒就会执行下一个需要完成的动画。

我不知道您正在使用的库，但如果有对 a 的引用`callback`，那么这意味着“动画完成后我应该调用什么函数？”

[1] 是的，是的，Opera，是的，是的——那是例外

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:33:12.103

在这里，修复了您的代码：http: [//jsfiddle.net/RASG/AK9kZ/](http://jsfiddle.net/RASG/AK9kZ/)

每次按下`enter`它都会切换`div`.

请注意，有更好的方法可以做到这一点。

我只是重用了你的代码。

![嗯](../Images/f3c4e1e29302a57d340e7f90d722bc4a.png) ![多伊斯](../Images/ed53b7b8c121bab89309de51710a3d5a.png)

# mootools - 切换按钮保持：活动直到再次单击。穆工具

> ID：12481919
> 
> 赞同：0
> 
> 时间：2012-09-18T17:18:12.653
> 
> 标签：mootools, toggle, mootools-more, mootools-fx

我正在使用此页面：

[http://www.bluebeam.com/us/support/ipad/](http://www.bluebeam.com/us/support/ipad/)

我希望切换打开/关闭问题的按钮在关闭时显示“+”，在打开时显示“-”。我已经设置了“活动”类来添加内容“-”但是当答案被揭示时它并没有保持“活动”。

我尝试向 js 添加一个 .setStyle ，但这似乎也没有做任何事情。

这是我现在为按钮所做的事情：

[http://jsfiddle.net/ajrdesign/pT6Vu/](http://jsfiddle.net/ajrdesign/pT6Vu/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:34:03.860

您根本无法通过 js 访问元素伪。因此，您创建了一些新样式并与父代一起使用。

[http://jsfiddle.net/dimitar/pT6Vu/1/](http://jsfiddle.net/dimitar/pT6Vu/1/)

```
.tips_tricks button:after {
    content:"+";
}

.tips_tricks button.on:after {
    content:"-";
} 
```

然后 onClick 你切换类'on'，瞧。

设置不同关系的唯一方法是通过属性链接。

```
.tips_tricks button:after {
    content: attr(data-content);
} 
```

那么`el.set('data-content', '-');`- 虽然我会说这不太可靠。

见[http://jsfiddle.net/dimitar/pT6Vu/2/](http://jsfiddle.net/dimitar/pT6Vu/2/)

# c# - System.Web.UI.Data.Visualisation yx 已切换

> ID：12481927
> 
> 赞同：0
> 
> 时间：2012-09-18T17:18:41.600
> 
> 标签：c#

网站上的 Web.UI.Data.Visualisation.Charting 库。我运行以下代码（删节）：

```
Series s = new Series();

string[] xValues = points.Select(x => x.Key.ToString("MMM-yy")).ToArray<string>();
double[] yValues = points.Select(y => (double)y.Value).ToArray<double>();

s.Points.DataBindXY(xValues, yValues); 
```

由于某种原因，月份（“MMM-yy”）出现在 Y（垂直）轴上。谁能明白为什么？在系列或图表类上找不到方向命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:27:53.483

错字。错误选择栏类型而不是列类型

```
s.ChartType = SeriesChartType.Bar; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:17:24.547

问题可能出在 aspx 方面。就我个人而言，我宁愿在 aspx 端绑定数据，然后使用硬代码。看看我的示例，您可以在其中设置方向（XValueMember="Date" YValueMembers="Counter"）：

```
<asp:Chart ID="SiteVisitChart" runat="server" DataSourceID="StartedProcessesObjectDataSource"
    Width="700px" Height="400px" >
    <Series>
        <asp:Series ToolTip="#VALX (#VALY)" Name="Series1" Color="112, 162, 213" BorderColor="164, 164, 164" ChartType="Column"
            BorderDashStyle="Solid" BorderWidth="1" ShadowColor="128, 128, 128, 128" ShadowOffset="1"
            IsValueShownAsLabel="true" XValueMember="Date" YValueMembers="Counter" Font="Tahoma, 8.0pt"
            BackSecondaryColor="0, 102, 153" LabelForeColor="100, 100, 100">
            <SmartLabelStyle  Enabled="true" />
        </asp:Series>
    </Series>
    <ChartAreas>
        <asp:ChartArea Name="ChartArea1" BackColor="White" BorderColor="26, 59, 105" BorderWidth="0"
            BorderDashStyle="Solid">
            <AxisX Title='<% $resources:AppResource,Date %>' LineColor="204, 204, 204" TitleFont="Tahoma, 8pt"
                TitleForeColor="100, 100, 100" LabelAutoFitMaxFontSize="8" LabelAutoFitMinFontSize="8">
                <MajorTickMark LineColor="Gray" />
                <MajorGrid Enabled="false" />
                <LabelStyle Font="Tahoma, 8.0pt" ForeColor="100, 100, 100" />
            </AxisX>
            <AxisY Title='<% $resources:AppResource,Counter %>' LineColor="204, 204, 204"
                TitleFont="Tahoma, 8pt" TitleForeColor="100, 100, 100" LabelAutoFitMaxFontSize="8"
                LabelAutoFitMinFontSize="8">
                <MajorTickMark LineColor="Gray" />
                <MajorGrid Enabled="false" />
                <LabelStyle Font="Tahoma, 8.0pt" ForeColor="100, 100, 100" />
            </AxisY>
        </asp:ChartArea>
    </ChartAreas>
</asp:Chart>
<asp:ObjectDataSource ID="StartedProcessesObjectDataSource" runat="server" SelectMethod="GetAllStartedProcessesStatistics"
    TypeName="GP.Solutions.WF.Services.GPWFManager">
    <SelectParameters>
        <asp:Parameter Name="dateFrom" Type="DateTime" />
        <asp:Parameter Name="dateTo" Type="DateTime" />
    </SelectParameters>
</asp:ObjectDataSource> 
```

# php - PHP中的文件访问控制

> ID：12481934
> 
> 赞同：0
> 
> 时间：2012-09-18T17:19:29.387
> 
> 标签：php, codeigniter, access-control

我知道 PHP 和 CodeIgniter 有访问控制，并且有很多话题讨论这个，但我认为我的情况略有不同。我有一个网络服务器A，打算购买一个单独的[视频主机B。](http://www.vodien.com/singapore-content-delivery-web-hosting.php)服务器A上的网站有一个观看视频的页面，它实际上是从视频主机B获取视频数据。是否可以强制用户在服务器A登录首先在他们可以看到视频之前？我的意思是，如果用户以某种方式获得了主机 B 上的视频链接，他可以将该链接分享给他的朋友。那些未经身份验证的人可以看到视频，我不想要这个。我怎样才能做到这样的访问控制？谢谢你。

# ruby-on-rails - 如何管理多对多关系

> ID：12481939
> 
> 赞同：1
> 
> 时间：2012-09-18T17:19:52.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有两个模型`Group`，`Person`我想建立一个多对多的关系，但我不清楚如何管理这种关系本身。我希望能够分别创建组和人员——不一定通过嵌套模型——然后从组视图/模型本身将人员链接到组。

有人对如何做到这一点有任何建议吗？

我想通过连接模型创建多对多关系，然后在模型中接受连接模型的嵌套属性`Group`——所以我相信我将能够通过`Group`视图/模型添加和删除关系。这种方法有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:24:27.210

我会创建一个`PersonGroup`看起来像这样的模型：

```
class PersonGroup < ActiveRecord::Base
  has_many :people
  has_many :groups
end 
```

您也可以这样做`rails generate migration create_person_group`并将其放入`up`生成的迁移文件的方法中：

```
create_table :person_group do |t| 
  t.integer :person_id, :null => false
  t.integer :group_id, :null => false

  t.timestamps
end 

add_index :person_group, [:person_id, :group_id], :unique => true 
```

然后在`Person`：

```
class Person < ActiveRecord::Base
  has_many :person_groups
  has_many :groups, :through => :person_groups
end 
```

并在`Group`：

```
class Group < ActiveRecord::Base
  has_many :person_groups
  has_many :people, :through => :person_groups
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:22:11.897

创建一个[联结表](http://en.wikipedia.org/wiki/Junction_table "接线表")。当您要存储多对多关系时，使用联结表。我没有在 ROR 中开发，所以我不知道 ActiveRecord 的细节，但我相信这也可以帮助你思考问题。

```
group_id INTEGER,
person_id INTEGER 
```

# mysql - MySQL 以及从多个表中收集和计算信息

> ID：12481945
> 
> 赞同：1
> 
> 时间：2012-09-18T17:20:09.353
> 
> 标签：mysql, sql, database

我在弄清楚如何做到这一点时遇到问题。这不是真正的问题，但非常相似。

我有A表

```
ID  Name
10  Bob
11  Tom
12  Suzie
13  Billy
14  Rob
15  Ben 
```

然后是表 B，其中 B_ID 引用表 A 中的 ID

```
B_ID  Value
11    1500
13    2600 
```

然后是表 C，其中 C_ID 引用表 A 中的 ID

```
C_ID MatchedWith
10   11
12   13
14   11
15   11 
```

此查询的目的是列出表 B 中人员的姓名，以及从 C 中与他们匹配的人数

...所以结果查询将给出如下内容：

```
Name  Count
Tom   3
Bily  1 
```

我完全不知道如何做到这一点，所以任何帮助都会非常棒！谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:25:00.423

```
SELECT 
    A.Name,
    COUNT(*) as 'Count'
FROM 
    C
    JOIN B
    ON C.MatchedWith = B.B_ID
    JOIN A
    ON A.ID = B.B_ID
GROUP BY A.Name
ORDER BY Count DESC; 
```

# php - .htaccess 如何在不同的操作系统下使用不同的指令

> ID：12481946
> 
> 赞同：0
> 
> 时间：2012-09-18T17:20:17.940
> 
> 标签：php, apache, svn, .htaccess, lamp

我有开发机器，它是 windows，我将把我的网站部署到一个 ubuntu 服务器上。那么，一个 .htaccess 文件如何在不同的环境下使用不同的指令。

例如：

php_value auto_prepend_file D:\123\bigsite\include\global.php

在 ubuntu 中，我应该用另一个位置替换该值。

我使用 svn 和 post hook 自动将文件签出到 ubuntu 服务器，所以当我签​​入 svn 时，.htaccess 内容在 windows 中是相同的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:29:42.083

只要您的 Apache 设置相同，您的 .htaccess 文件就可以在 Windows 或 Linux 上正常工作。

您当然可以在您的开发机器上拥有一个 .htaccess 文件，而在生产服务器上拥有另一个具有不同设置的文件，只要记住不要错误地覆盖它们。如果您使用的是 svn，那么您应该将 .htaccess 添加到[忽略列表中](https://stackoverflow.com/questions/116074/how-to-ignore-a-directory-with-svn)。

例如，如果您的 Windows 机器上的 .htaccess 文件有以下行：-

> php_value auto_prepend_file D:\123\bigsite\include\global.php

那么你的 ubuntu 机器上的 .htaccess 文件可能是：-

> php_value auto_prepend_file /srv/123/bigsite/include/global.php

[http://httpd.apache.org/docs/current/howto/htaccess.html](http://httpd.apache.org/docs/current/howto/htaccess.html)

# filepicker.io - 使用 Filepicker 的多个文件

> ID：12481951
> 
> 赞同：4
> 
> 时间：2012-09-18T17:20:56.410
> 
> 标签：filepicker.io

如何使用 filepicker.io 一次选择多个文件？我只能找到一次选择一个文件的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T17:26:46.200

有两种方法可以做到这一点。

如果您正在使用小部件，则设置`data-fp-option-multiple="true"`（注意它是字符串 true）

如果您使用的是 javascript 库，则`{'multiple': true}`在选项中进行设置。

代码中的两个示例：http: [//jsfiddle.net/yQJcL/](http://jsfiddle.net/yQJcL/)

# php - 无法调用 CakePHP 的 setFlash 函数

> ID：12481952
> 
> 赞同：0
> 
> 时间：2012-09-18T17:21:02.857
> 
> 标签：php, cakephp, authentication

我的客户继承了一个不完整的 CMS，我正试图帮助他们修复它。请记住，我来自前端开发，一些对你们中的一些人来说似乎很明显的逻辑完全让我难以理解。

所以我设法完成并改进了 CMS，但是存在登录问题。如果用户输入正确的用户名和密码，一切正常。

但是，在发生错误时向用户指示是一种简单的礼貌，例如“重试输入密码”或一些更好的措辞信息。但现在什么也没有发生。

所以我查看了代码，最后比较了这两个文件：

login.ctp （视图，据我所知）

```
<?php
    echo $this->Session->flash('auth');
?>

<div id="loginColumns">

    <!-- input fields -->
    <div id="loginLeftColumn">
        <?php
            echo $this->Form->create('User',array('action'=>'login'));
            echo $this->Form->input('username');
            echo $this->Form->input('password');
        ?>
    </div>

    <!-- login button -->
    <div id="loginRightColumn">
        <?php echo $this->Form->end('Continue'); ?>
    </div>

</div> 
```

UsersController.php（控制器，顾名思义）

```
<?php
    class UsersController extends AppController
    {
        var $name = 'Users';
        public $scaffold;

        public function beforeFilter()
        {
            $this -> Auth -> allow(array('login', 'logout'));
        }

        public function login()
        {
            if($this -> request -> is('post'))
            {
                if($this -> Auth -> login())
                {
                    $this -> redirect($this -> Auth -> redirect());
                }
                else
                {
                    // this does not work, maybe because there is no session yet
                    // when users have not logged in yet?
                    $this -> Session -> setFlash(__('Invalid username or password, try again'));
                }
            }
        }

        function logout()
        {
            $this -> redirect($this -> Auth -> logout());
        }
    }
?> 
```

如您所见，在记录时似乎有一些处理错误的东西，但没有显示任何内容。用户登录后，setFlash 函数会在多个地方使用，它的工作原理就像一个魅力。

在用户登录之前我有什么方法可以使用它，还是我必须从头开始重新创建它？如果是这样，这样做的原因可能是什么，所以它看起来和感觉相似？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:10:34.443

坚持在你的观点中使用它：

```
<?php echo $this->Session->flash(); ?> 
```

这将显示您在控制器中设置的 Flash 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:39:41.203

在您的`app/View/Layouts/default.ctp`文件中添加以下行：

```
<?php  
   echo $this->Session->flash(); 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T09:07:24.600

```
public $components = array('Session'); 
```

如果在 AppController 类中默认未设置“会话”组件，请检查并添加它，然后添加

```
<?php echo $this->Session->flash('your message'); ?> 
```

在你看来！

# jquery - 如何在此自定义代码中获取 jquery“id”变量的正确值？

> ID：12481954
> 
> 赞同：0
> 
> 时间：2012-09-18T17:21:12.833
> 
> 标签：jquery

我有 20 个具有相同课程的 div（生物）：

```
<div class="bio" data-id="<? echo $id; ?>">
  <p>the bio1 text</p>
  <a id="car" href="http://www.mycustomurl.com">my car 1</a>
</div>

<div class="bio" data-id="<? echo $id; ?>">
  <p>the bio2 text</p>
  <a id="car" href="http://www.mycustomurl.com">my car 2</a>
</div>

--------

<div class="bio" data-id="<? echo $id; ?>">
  <p>the bio20 text</p>
  <a id="car" href="http://www.mycustomurl.com">my car 20</a>
</div> 
```

**当有人单击 ID 为car**的链接时，我会进行此 ajax 调用：

```
jQuery("#car").click(function(){
    var id = $(".bio").data('id'); /* HERE IS THE PROBLEM, id is always empty */
    jQuery.ajax({  
        type: 'POST', 
        url: 'myajaxurl',  
    data: {  
       action: 'cars',
       id: id
    }
        });  
}); 
```

**问题是：**

如何获得与点击的正确链接对应的正确**id 值（var id）？**

每个循环都需要一个 jquery 吗？

它似乎不起作用，**var id**始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:23:57.947

我想你想使用[.parent()](http://api.jquery.com/parent/)

如：

```
jQuery("#car").click(function(){
 var id = $(this).parent(".bio").data("id"); /* Maybe this should even be .data("data-id") ? */
 jquery.ajax({ /* etc... */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:24:10.733

使用`closest`.

```
var id = $(this).closest(".bio").data('id'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T17:24:13.330

ID 应该是唯一的，并且不应重复。

而是尝试像下面那样绑定您的处理程序，

```
jQuery('.bio a').click( function(){
   var id = $(this).parent().data('id');
   //.. 
```

当你这样做时`jQuery("#car").click(function () {`，它会将处理程序绑定到第一个匹配的元素，ID`car`将只用于第一个 div 组。

# sql - 这个 Oracle 查询有什么问题？

> ID：12481956
> 
> 赞同：0
> 
> 时间：2012-09-18T17:21:20.353
> 
> 标签：sql, oracle, petapoco

下面是[PetaPoco](http://www.toptensoftware.com/petapoco/) ORM 为 .NET 生成的查询。我现在没有一个 Oracle 客户端来调试它，我看不到任何明显的错误（但我是一个 SQL Server 人）。谁能告诉我为什么会产生这个错误：

> Oracle.DataAccess.Client.OracleException ORA-00923：在预期的地方找不到 FROM 关键字

```
SELECT * 
FROM (SELECT ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) peta_rn, 
"ON_CUST_MAS"."CU_NO", 
"ON_CUST_MAS"."CU_NAME", 
"ON_CUST_MAS"."CU_TYPE", 
"ON_CUST_MAS"."CONTACT", 
"ON_CUST_MAS"."ADD1_SH", 
"ON_CUST_MAS"."ADD2_SH", 
"ON_CUST_MAS"."CITY_SH", 
"ON_CUST_MAS"."POST_CODE", 
"ON_CUST_MAS"."PROV_SH", 
"ON_CUST_MAS"."COUNTRY", 
"ON_CUST_MAS"."PHONE_NU", 
"ON_CUST_MAS"."FAX_NU", 
"ON_CUST_MAS"."EMAIL", 
"ON_CUST_MAS"."PU_ORDER_FL", 
"ON_CUST_MAS"."CREDIT_AMOUNT" 
FROM "ON_CUST_MAS" ) peta_paged 
WHERE peta_rn>0 AND peta_rn<=20 
```

*编辑：以防万一，这是一个**分页查询**。常规查询（全选，按 ID 选择）工作正常。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T17:26:58.460

问题是您的分析函数`SELECT NULL`的子句在语法上不正确。`ORDER BY`

```
over (ORDER BY (SELECT NULL)) 
```

可以改写

```
(ORDER BY (SELECT NULL from dual)) 
```

或更简单地说

```
(ORDER BY null) 
```

当然，`row_number`如果您不按任何方式对结果进行排序，那么获得 a 真的没有意义。没有理由期望返回的行集是一致的——您可以任意获得 20 行的任何集。如果您转到结果的第二页，则没有理由期望结果的第二页与第一页完全不同，或者如果您翻阅整个结果集，任何特定的结果都会出现在任何页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:27:26.533

在 ORDER BY 子句中应该有和 order 定义。例如，假设您的元素按 column 的顺序显示`"on_cust_mas"."cu_no"`，而不是您的查询应如下所示：

```
SELECT *
FROM   (SELECT Row_number()
                 over (
                   ORDER BY ("on_cust_mas"."cu_no")) peta_rn,
               "on_cust_mas"."cu_no",
               "on_cust_mas"."cu_name",
               "on_cust_mas"."cu_type",
               "on_cust_mas"."contact",
               "on_cust_mas"."add1_sh",
               "on_cust_mas"."add2_sh",
               "on_cust_mas"."city_sh",
               "on_cust_mas"."post_code",
               "on_cust_mas"."prov_sh",
               "on_cust_mas"."country",
               "on_cust_mas"."phone_nu",
               "on_cust_mas"."fax_nu",
               "on_cust_mas"."email",
               "on_cust_mas"."pu_order_fl",
               "on_cust_mas"."credit_amount"
        FROM   "on_cust_mas") peta_paged
WHERE  peta_rn > 0
       AND peta_rn <= 20 
```

如果这是设置顺序的不同列，只需在 ORDER BY 子句中切换它。实际上应该定义任何顺序，否则不能保证它不会改变，并且您无法确定在任何页面上会显示什么。

# android - 仅流式传输 RTSP MJPEG 和元数据 android

> ID：12481960
> 
> 赞同：0
> 
> 时间：2012-09-18T17:21:52.233
> 
> 标签：android, http, rtsp, mjpeg

我这几天一直有以下问题...

我有一个服务器，它向我发送一个`rtsp://ip:port/`带有活动流会话的 url。

格式是 MJPEG，我在每一帧中都有一些元数据。所以我需要从流中提取数据。

我知道 Android 不支持 MJPEG（所以没有 Mediaplayer），但我找到了一种使用[Android ICS 和 MJPEG 使用 AsyncTask](https://stackoverflow.com/questions/10550139/android-ics-and-mjpeg-using-asynctask)和 httpclient 在 vi​​deoView 中播放它的方法。但我只有rtsp url。

细节：

*   我只有rtsp url，没有http。
*   httprequest 不适用于 rtsp 网址。

最好的办法是从 rtsp url 获取 Mjpeginputstream（见上面的链接），但我不知道如何！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:38:25.940

简单地说：你不能。RTSP 是与 HTTP 不同的协议。更多介绍请参见[WikiPedia](http://en.wikipedia.org/wiki/RTSP#Protocol_directives)。尽管某些 RTSP 请求在参数语法和错误代码上看起来像 HTTP 请求，但它们是不同的。例如，您需要从 URL 设置播放请求，然后您可以执行播放命令，而不是 HTTP 中的简单 GET 请求

但是，正如您已经知道的那样：您请求的 URL 不是 HTTP URL，而是流的描述。实际协议最有可能是 RTP 与 MJPEG 作为编解码器。检查网络流量将为您提供该信息。

# webserver - 让不同的 Tornado 服务器服务于不同的页面

> ID：12481965
> 
> 赞同：1
> 
> 时间：2012-09-18T17:22:15.067
> 
> 标签：webserver, integration, tornado, backend, haproxy

假设我有两个 Tornado 服务器，`server1`用于提供带有 pattern的网页`/news/blahblah`和`server2`带有 pattern 的页面`/data/blahblah`。这两个服务器共同构成了我的应用程序的后端。

我想知道我应该如何集成它们并将它们公开给客户端，以便不同的服务器处理对不同 URL 的不同请求。

我听说过 HAProxy，我必须使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:06:45.680

您可以使用 haproxy，但在这种情况下您不需要它。

使用 nginx。

以下是多个龙卷风的配置示例：

```
server {
    listen *:80;  
    server_name myserver.com;  

    location /data/blahblah {
        proxy_pass http://127.0.0.1:3001;
        proxy_redirect off;
    }

    location /news/blahblah { 
        proxy_pass http://127.0.0.1:4001;
        proxy_redirect off;
    }
} 
```

然后你可以用 haproxy 来扩展它......

```
listen http 0.0.0.0:80
    mode http
    stats enable
    stats refresh 10s
    stats hide-version
    cookie MYSERVER insert
    balance roundrobin
    option httpclose
    option httpchk OPTIONS /heath.html
    option forwardfor
    option httplog
    option logasap
    log global
    server MYSERVER 10.0.0.1:80 cookie SERVER1 check
    server MYSERVER 10.0.0.2:80 cookie SERVER2 check
    server MYSERVER 10.0.0.3:80 cookie SERVER3 check 
```

# ruby-on-rails - 如何更新正在验证唯一性的属性

> ID：12481966
> 
> 赞同：2
> 
> 时间：2012-09-18T17:22:17.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, ruby-on-rails-2

表**'leave_policies'**有**year、increment 和 total_entitled**字段。

我在 LeavePolicy 模型中写了 ' **validates_uniqueness_of :year '。**

**即使我没有更新年份字段，**update_attributes也不起作用。****

 **请指导错误或提出任何更好的解决方案。

```
Class LeavePolicy
  validates_uniqueness_of :year
end 
```

**@leave_policy**是 LeavePolicy 的对象

在表中一行：id = 1，year = 1，increment= 2，total_entitled = 3。如果我用 id 更新行：1 喜欢

**@leave_policy.update_attributes(:total_entitled => 5)**

我收到错误“已经使用了一年”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:42:01.587

您确定没有其他年份为 1 的行，并且 @leave_policy 实际上是 id 为 1 的行的一个实例？

如果它实际上是一条新记录，它会以这种方式失败，或者如果有任何其他记录具有 :year == 1。

验证在所有属性上运行，即使您仅在某些属性上使用 update_attributes，所以如果年份不是唯一的，即使您只更新 increment 或 total_entitled 字段，它也会失败。

一般来说，validates_uniqueness 本身并不是一个很好的答案，因为签入 ruby​​ 的竞争条件会阻止它强制执行唯一性，所以我也会将它与数据库中的唯一键一起使用。

如果您希望在更改其他字段时能够跳过唯一年份验证，您可以在模型上设置属性，然后调用

```
leave_policy.save(:validate => false) #for rails 3
leave_policy.save(false) #for rails 2 
```

这将跳过所有验证，但是伙计，我会三思而后行。这似乎违背了目的，所以我会改为追究为什么 Rails 认为你没有独特的年份 - 也许看看你的数据库会显示该年份确实有一个欺骗行 == 1。**

# ruby - Watir-Classic 3.1.0 execute_script 问题

> ID：12481970
> 
> 赞同：0
> 
> 时间：2012-09-18T17:22:30.543
> 
> 标签：ruby, watir

我正在从 WATIR 2.0.4 升级到 3.1.0。在执行之前尝试“杀死弹出窗口”时遇到以下错误。我能做些什么来解决这个问题？

视窗

红宝石 1.9.3

黄瓜 1.1.9

Watir-经典 3.1.0

```
(in OLE method `execScript': )
    OLE error code:80020101 in <Unknown>
      Could not complete the operation due to error 80020101.
    HRESULT error code:0x80020009
      Exception occurred. (WIN32OLERuntimeError)

29
30Then /^I kill the popups$/ do
31  @browser.execute_script "window.confirm = function() { return true; }"
32  @browser.execute_script "window.alert = function() { return true; }"
33  @browser.execute_script "window.prompt = function() { return true; }" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:30:19.440

这意味着您遇到了一些 JavaScript 错误。您可以从 IE 中看到更多该错误消息。

尽管如此，我还是建议您改用 Watir Alert API。[请参阅http://watirwebdriver.com/javascript-dialogs/](http://watirwebdriver.com/javascript-dialogs/)上的使用示例

# bash - 如何使用 awk 提取固定长度的字符串？

> ID：12481971
> 
> 赞同：0
> 
> 时间：2012-09-18T17:22:30.407
> 
> 标签：bash, awk

我想运行一个脚本来从 html 文件中提取一些字符串，并将所有字符串导入到一个新文件中。更具体地说，我想查看 all`<td>`和`</td>`pairs 之间的字符串，如果它们之间的字符串是 length `k`，则提取字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:56:25.810

`awk`不是解析 xml 的正确工具，但对于这种简单的情况，以下可能就足够了。

```
awk '/<\/$/ && length == k + 2' RS='td>' k=$K input 
```

这将输出每个字符串加上结尾的`</`. 这是一种 hack，不应被视为可靠、强大的解决方案。

# selenium - 使用 TestNG 运行并行测试时捕获 WebDriver 屏幕截图

> ID：12481972
> 
> 赞同：3
> 
> 时间：2012-09-18T17:22:36.137
> 
> 标签：selenium, parallel-processing, webdriver, screenshot, testng

我目前正在通过分别覆盖 TestListenerAdapter 方法 onTestFailure 和 onTestSuccess 来捕获 TestNG 中失败和成功的屏幕截图。为此，您需要指定要截取屏幕截图的驱动程序。

**我的问题：**在方法级别并行运行测试时，是否有一种捕获屏幕截图的好方法？

为了并行运行测试，每个单独的测试都需要一个唯一的驱动程序实例。因此，在任何给定时间，您都会运行 x 个驱动程序实例。当需要捕获屏幕截图时，您如何确定要使用哪个驱动程序？

代码摘录如下：

```
public class OnFailureListener extends TestListenerAdapter {    

@Override   
public void onTestFailure(ITestResult tr) {     
   Screenshots.captureScreenshot(tr);

   super.onTestFailure(tr);             
} 
```

--

```
public static void captureScreenshot(ITestResult tr) {
   WebDriver driver = TestClass.driver;

   if (driver instanceof TakesScreenshot) {                                                                                                         
      String filename = "path/to/screenshot/file";

   try {
      File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
      FileUtils.copyFile(scrFile, new File(filename));
   } catch (IOException e) { e.printStackTrace(); }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-06T09:17:58.133

如果您创建一个可以访问驱动程序的基本测试类，那么该驱动程序将始终是正确的驱动程序

以下将实现这一点；

1.  所有测试类都必须扩展一个简单的基础测试类；

```
public asbtract baseTestCase() {

private WebDriver driver;

public WebDriver getDriver() {
    return driver;
}

@BeforeMethod
public void createDriver() {
    driver=XXXXDriver();
}

@AfterMethod
public void tearDownDriver() {
    if (driver != null){
        try{
            driver.quit();
        }
        catch (WebDriverException e) {
            System.out.println("***** CAUGHT EXCEPTION IN DRIVER TEARDOWN *****");
            System.out.println(e);
        }
    }
} 
```

2.  在您的侦听器中，您需要访问基类：

```
public class ScreenshotListener extends TestListenerAdapter {

@Override
public void onTestFailure(ITestResult result){
    Object currentClass = result.getInstance();
    WebDriver webDriver = ((BaseTest) currentClass).getDriver();
    if (webDriver != null){
        File f = ((TakesScreenshot)webDriver).getScreenshotAs(OutputType.FILE);
        //etc.
        }
    }
} 
```

# html - 根据目录使用 2 个不同的 404 页面

> ID：12481974
> 
> 赞同：2
> 
> 时间：2012-09-18T17:22:39.603
> 
> 标签：html, apache, .htaccess

我正在尝试使用 2 个单独的 404 页面，具体取决于用户当前所在的目录。我认为您可以使用目录中的 .htaccess 文件执行此操作，但它不起作用。这甚至可能吗？

示例：用户正在查看 www.domain.com 中的文档。此目录应使用 number1_404.html。

示例 2：用户正在查看 www.domain.com/other_directory 中的文档。此目录应使用 number2_404.html。

我不完全确定如何为此编写规则，但这是我现在拥有的，但它不起作用。

```
.htaccess <--- in the root folder /httpdocs
ErrorDocument 404 /root_404.php

.htaccess <---- in the subdirectory /httpdocs/subdirectory
ErrorDocument 404 /subdirectory/subdirectory_404.php 
```

也许我不明白这一切是如何运作的，所以请原谅我的无知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:51:27.013

使用 2 个不同的 .htaccess 文件。root 404 的根目录和子目录中的一个也考虑重写条件，可能有一个条件你可以应用它类似于其他语言中的 if-else。也许您可以执行类似 if root show this, else show that 的操作。我不确定，因为我不需要使用多个 404。

另一种方法可能是，因为您使用 PHP 是通过 php 检测您是否在根目录中，或者您是否处于一个或多个级别。如果是这种情况，您`include()`或`require()`您的选择是什么，您想要为条件显示的 404。但是，在全球范围内，它将是 htaccess 文件的一个 404 页面，它将拉入另外两个页面之一（或者如果您有需要，可以更多）。

# glassfish - glassfish SSO 是否执行任何标准？

> ID：12481982
> 
> 赞同：0
> 
> 时间：2012-09-18T17:23:18.387
> 
> 标签：glassfish

glassfish [SSO](http://docs.oracle.com/cd/E18930_01/html/821-2418/beacq.html)实施是否实施任何标准？如果有，有哪些？

如果我的应用程序依赖 Glassfish SSO，我的应用程序是否可移植 - 如果我将应用程序部署到另一个 Web 容器（如 tomcat），SSO 是否可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:18:19.810

GlassFish 的实现似乎是基于 Tomcat 阀门[org.apache.catalina.authenticator.SingleSignOn](http://tomcat.apache.org/tomcat-6.0-doc/config/host.html#Single_Sign_On)而不是 Java/Java EE 标准。

应该可以将应用程序移植到基于 Tomcat 的其他应用程序服务器，但我建议先进行一些测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:40:23.743

Glassfish 与许多（所有？）容器一样，在处理基于容器的安全性时使用领域的概念。我不知道是否有定义领域的标准，但可以肯定的是，我们编写的代表领域的代码在 Tomcat、Glassfish 和 Jetty 中运行，并且像 Apache Karaf 这样的 OSGi 容器也具有看起来相同的领域（但我还没有真正尝试过那个）。

SSO 实现完全在容器端 - 如果多个应用程序使用相同的领域，那么您可以配置容器以跨这些应用程序启用 SSO。SSO 的 Glassfish 实现是一个 tomcat 阀门这一事实对应用程序完全隐藏 - 只要容器支持领域，并且可以配置为使用这些领域跨应用程序启用 sso，那么应用程序就可以跨任何此类容器移植。

警告 - 这一切都基于我（有限的）现实世界的经验。我不知道 Realms 有多常见，也不知道它们之间是否有任何标准合规性。但是对于我们的使用，它们似乎（到目前为止）是一个合理的、可移植的抽象。

# java - 向 JSF 2.0 页面回显消息

> ID：12481983
> 
> 赞同：0
> 
> 时间：2012-09-18T17:23:23.503
> 
> 标签：java, jsf-2

我是 JSF 2.0 的新手，正在尝试向我的页面输出一条消息。我想要一个接受一些输入、进行一些处理并显示一些输出的表单。看起来很简单吧？但是，我不想在我的支持 bean 中定义一个属性来显示输出：

```
<h:outputText value="#{bean.property}" /> 
```

这种方法对我来说似乎很混乱。对于要显示的每条状态消息，我都需要一个成员变量。我也不想将输出显示绑定到表单变量，如下所示：

```
<h:inputText id="someId" />
<h:message for="someId" /> 
```

因为我的状态结果没有对应的表单变量。设置消息并使用全局消息：

```
<h:messages globalOnly="true" /> 
```

也不能很好地工作，因为我可能需要更新页面上的多个元素（不要将所有状态消息集中到同一个 div 中）。

来自 Spring MVC，可以在传递给视图的 ModelAndView 对象上设置任意属性，然后从视图中访问这些属性。JSF中有相应的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:37:29.950

为了使视图可以轻松使用任意变量，您可以在请求范围内定义一个 Map，方法是将以下内容放入`faces-config.xml`：

```
<managed-bean>
    <description>Request scoped map for general usage</description>
    <managed-bean-name>map</managed-bean-name>
    <managed-bean-class>java.util.HashMap</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean> 
```

您可以将此映射注入您的支持 bean，或者以编程方式请求它，然后在其中放入一些东西。例如：

```
@ManagedBean
public class GeneralMapBacking {

    @ManagedProperty("#{map}")
    private Map<Object, Object> map;

    public void onPreRenderView() {
        map.put("foo", "bar");
    }

    public void setMap(Map<Object, Object> map) {
        this.map = map;
    }  
} 
```

您可以通过 Facelet 上的 EL 引用此地图，例如：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
>
    <h:body>   
        <f:event listener="#{generalMapBacking.onPreRenderView}" type="preRenderView" />

        #{map.foo}       
    </h:body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:43:45.643

不确定我是否理解这个问题。我对 Spring MVC 也不熟悉，我必须说这个例子让我很熟悉。

但是我认为这基本上听起来像是您想要构建输出服务器端或使用另一个组件。

例如，使用单个`<h:outputText>`并将其与返回连接数据的 getter 一起使用。

或者也许您应该使用 a`<h:dataTable>`来显示您的数据？

或者，也许您想使用其他组件进行输出。听起来您只想要一个带有文本的框，为此我自己会使用串联的 outputText。

为了获得好看的输出，您可能需要查看 primefaces、richfaces 或 icefaces。我自己更喜欢primefaces，也许这看起来不错：

[http://www.primefaces.org/showcase-labs/ui/dataListUnordered.jsf](http://www.primefaces.org/showcase-labs/ui/dataListUnordered.jsf)

# javascript - JQUERY onclick在ajax方法之后传递一个回调

> ID：12481985
> 
> 赞同：0
> 
> 时间：2012-09-18T17:23:36.870
> 
> 标签：javascript, jquery, methods, callback

我有这个 `<a onclick="$('.element').hide(0); doMyMethod(_element = $(this));"></a>`

`doMyMethod()`是一个ajax请求，我想在这个方法完成时传递一个回调我想`alert('somenthing');`

所以我没有机会尝试： `<a onclick="$('.element').hide(0,function(){doMyMethod(_element = $(this)); }, function(){ alert('somenthing');}); "></a>`

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:29:49.523

你需要将你的 alert('something') 方法传递给 doMyMethod，它应该将它作为回调传递给 jquery 的 ajax。

由于您的点击变得复杂，您可以将其移至它自己的功能。

```
function myClickHandler(item) {
  $('.element').hide(0);
  var callback = function() { alert('something'); };
  doMyMethod(_element = $(item), callback);
}

<a onlick="myClickHandler(this)"></a> 
```

将回调作为“完整”回调传递[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T17:31:49.103

你可以把它放在成功的ajax请求中。

```
function doMyMethod() {
$.ajax({
    url: '...',
    data: '...',
    type: '...',
    //...
    success: function(data) {
        alert('something')
    }
    //...
});
} 
```

# mysql - 查询 FNF 后的两个表时如何得到一行结果？

> ID：12481987
> 
> 赞同：0
> 
> 时间：2012-09-18T17:24:01.390
> 
> 标签：mysql, normalization

我有一个带有几张表的 MySQL 数据库。它们看起来像这样 -

*食物表：*

```
+----------+------------+--------------+
| username | date       | food         |
+----------+------------+--------------+
| test123  | 2012-09-16 | rice         |
| test123  | 2012-09-16 | pizza        |
| test123  | 2012-09-16 | french fries |
| test123  | 2012-09-16 | burger       |
+----------+------------+--------------+ 
```

*主表：*

```
+----------+------------+----------------+---------------+-------------+-------------+
| username | date       | water_quantity | water_chilled | smoked_what | smoke_count |
+----------+------------+----------------+---------------+-------------+-------------+
| test123  | 2012-09-16 |              1 | no            | cigarettes  |          20 |
+----------+------------+----------------+---------------+-------------+-------------+ 
```

当我使用查询`SELECT * FROM main,food WHERE main.date=food.date;`时，我得到四行结果。我怎么可能在一行中得到结果？最终，当我将结果编码为 JSON 时，我希望它看起来像这样 -

```
[
   {
      "username":"test123",
      "date":"2012-09-16",
      "water_quantity":"1",
      "water_chilled":"no",
      "smoked_what":"cigarettes",
      "smoke_count":"20",
       {
          "food":"rice",
          "food":"pizza",
          "food":"french fries",
          "food":"burger",                  
       },
   }
] 
```

或类似的东西。我是 MySQL 和数据库的新手，也是 JSON 的新手。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:33:50.337

```
select m.*, GROUP_CONCAT(food SEPARATOR ',') AS food FROM main m INNER JOIN food f ON f.username = m.username and f.date = m.date; 
```

当然，您可以更改选择哪些字段来控制输出，但这将解决您的重复问题。

至于结果集中的嵌套食物列表，可以使用 GROUP_CONCAT

参见：[http ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

我会看看我是否可以为演示重新创建

* * *

演示：

```
mysql> create table main (id INT NOT NULL AUTO_INCREMENT, username varchar(12) NOT NULL, date DATETIME, water_quality INT, water_chilled CHAR(3), smoked_what varchar(32), smoke_count INT, primary key (id));
Query OK, 0 rows affected (0.04 sec)

mysql> create table food (id INT NOT NULL AUTO_INCREMENT, username varchar(12) NOT NULL, date DATETIME, food varchar(32), primary key (id));
Query OK, 0 rows affected (0.04 sec)

mysql> insert into food VALUES (1,'test123','2012-09-16','rice'),(2,'test123','2012-09-16','pizza'),(3,'test123','2012-09-16','french fries'),(4,'test123','2012-09-16','burger');Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> insert into main VALUES (1, 'test123', '2012-09-16', 1, 'no', 'cigarettes', 20);
Query OK, 1 row affected (0.00 sec)

mysql> select m.*, GROUP_CONCAT(food SEPARATOR ',') AS food FROM main m INNER JOIN food f ON f.username = m.username and f.date = m.date;
+----+----------+---------------------+---------------+---------------+-------------+-------------+----------------------------------+
| id | username | date                | water_quality | water_chilled | smoked_what | smoke_count | food |
+----+----------+---------------------+---------------+---------------+-------------+-------------+----------------------------------+
|  1 | test123  | 2012-09-16 00:00:00 |             1 | no            | cigarettes  |          20 | rice,pizza,french fries,burger   |
+----+----------+---------------------+---------------+---------------+-------------+-------------+----------------------------------+
1 row in set (0.00 sec)

mysql> 
```

# windows - 我已经在 windows azure 上成功部署了一个 MVC3 网站，但它没有用

> ID：12481992
> 
> 赞同：1
> 
> 时间：2012-09-18T17:24:18.707
> 
> 标签：windows, asp.net-mvc-3, deployment, azure

我在 Windows Azure 上创建了一个免费试用帐户，并尝试部署我的一个 MVC 3 项目。在我的 Windows Azure 帐户中，网站状态为“正在运行”，数据库为“在线”。部署成功，但是当我转到 URL 时，没有任何反应。

这是为什么？

网址：[http ://productsalespage.azurewebsites.net/](http://productsellingpage.azurewebsites.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:30:18.153

When a Windows Azure Websites is created but nothing is deployed, opening the URL in a browser return the following page: ![enter image description here](../Images/e32c15c0ed3f07d7494c41372c74ada7.png)

I could verify that the websites URL you provided is already registered with Windows Azure Websites so it is a correct URL and because it does not show the placeholder page as seen in above image, so I am sure something is deployed to this website.

Your best bet is to contact Windows Azure Websites team directly from dedicated forum [here](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/threads).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:16:23.710

我发现这个博客有助于通过 Visual Studio 发布

[http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/26/deploying-windows-azure-website-using-visual-studio-web-publish-wizard.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/26/deploying-windows-azure-website-using-visual-studio-web-publish-wizard.aspx)

但是直接来自 Visual Studio 的发布工具可能不可靠，所以我求助于通过直接 FTP 上传。该站点的主机名将位于您网站详细信息的右侧窗格中。

# c# - 排序和页面索引 GridView。我撞墙了

> ID：12481996
> 
> 赞同：1
> 
> 时间：2012-09-18T17:24:36.513
> 
> 标签：c#, asp.net, sorting, gridview, paging

我有一个位于更新面板中的网格视图。当您单击列标题时，排序工作正常，但如果我转到下一页，排序就会丢失。我将提供下面的代码，如果有人知道如何摆脱这种混乱，请帮忙！

在 Page_Load 中调用 ShowGrid() 函数。我猜问题在于在分页函数中调用 ShowGrid()。

```
 //Show Grid based on argument type
protected void ShowGrid(string arg)
{
    //dataset to hold email addresses
    DataSet ds = new DataSet();
    try
    {
        //open connection with new connection string            
        conn.Open();

        String selectString = String.Format("SELECT * FROM hr_OnlineJobApp"
                     + " WHERE adminCategory='" + adminCategory + "'"
                     + "AND departmentApplyingFor LIKE '" + dept + "' ORDER BY {0} {1}", ViewState["sortExp"], ViewState["sortOrder"]);
        SqlCommand cmd = new SqlCommand(selectString, conn);

        SqlDataAdapter adapter = new SqlDataAdapter(cmd);
        adapter.Fill(ds);

        //bind to gridview
        GridView1.DataSource = ds;
        GridView1.DataBind();

        GridView1.PageIndex = Convert.ToInt32(ViewState["pageIndex"]);
    }
    finally
    {
        if (conn != null)
            conn.Close();
    }
}
 /**********************************************
 * Paging functionality 
 * *******************************************/
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridView1.PageIndex = e.NewPageIndex;
    //reshow Grid with current type
    adminCategory = GridView1.DataKeys[0]["adminCategory"].ToString();
    ViewState["pageIndex"] = e.NewPageIndex.ToString();
    ShowGrid(adminCategory);
}

/**********************************************
 * Sorting functionality 
 * *******************************************/
protected void gridView_Sorting(object sender, GridViewSortEventArgs e)
{
    string sortExp = e.SortExpression;
    ViewState["sortExp"] = sortExp;
    string sortDir = (string)ViewState["sortOrder"];

    //Changes the sortDir
    if (ViewState["sortOrder"].ToString() == "desc")
    {
        ViewState["sortOrder"] = "asc";
    }
    else
    {
        ViewState["sortOrder"] = "desc";
    }

    try
    {
        conn.Open();
        string sql = "SELECT * FROM hr_OnlineJobApp"
                     + " WHERE adminCategory='" + adminCategory + "'"
                     + "AND departmentApplyingFor LIKE '" + dept + "' ORDER BY " + sortExp + " " + sortDir;

        SqlDataAdapter mySqlAdapter = new SqlDataAdapter(sql, conn);
        DataSet myDataSet = new DataSet();
        mySqlAdapter.Fill(myDataSet);

        GridView1.DataSource = myDataSet;
        GridView1.DataBind();
    }
    finally
    {
        conn.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:34:50.430

您正在将`PageIndex`0设置为`Showgrid`：

```
GridView1.PageIndex = 0; 
```

因此，您正在覆盖新值 `PageIndexChanging`

```
GridView1.PageIndex = e.NewPageIndex; 
```

因此，您无需在 ShowGrid 中设置 PageIndex 即可解决此问题。

该问题的另一个可能原因：

也许您在每次回发时都对 GridView 进行数据绑定`Page_Load`。你应该只在第一次这样做。使用`Page.IsPostBack`属性：

```
protected void Page_Load(object sender, System.EventArgs e)
{
   if(!Page.IsPostBack)
       ShowGrid();
} 
```

**最后但并非最不重要**的一点：只有当用户单击`gridView_Sorting`. 您应该应用`ORDER BY`同样的`ShowGrid`方法或仅使用一种方法来绑定您的 GridView。但你总是在`date desc`那里订购。

您不应该使用 DataView 来应用排序，而应该`ORDER BY`首先在 sql 中使用。

```
String sql = String.Format("SELECT * FROM hr_OnlineJobApp"
                         + " WHERE adminCategory='"+adminCategory+"'"
                         + " ORDER BY {0} {1}", sortExp, sortDir); 
SqlCommand mySqlCommand = new SqlCommand(sql, conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:12:28.427

当您在 ShowGrid() 函数中设置 GridView1.PageIndex = 0 时，然后在 Page_Load 事件中调用该函数。因此，在每次回发时，页面索引都设置为 0，这会产生问题。您应该删除该行以解决问题。

# sql - 在更新语句 Sybase 15x 中调用函数

> ID：12481999
> 
> 赞同：1
> 
> 时间：2012-09-18T17:24:44.650
> 
> 标签：sql, sap-ase

我有一种情况，我正在解析一个 varchar 值以提取数字，我必须更新我的表以将数值放入表中的一个新字段中。我已将字符串解析封装到存储过程中。现在我正在尝试编写更新语句。

我的表看起来像这样（简化为仅显示键值）：

```
CREATE TABLE dbo.oper_pacer
(
oper_pacer_id                 int         NOT NULL,
oper_pacer_fluroscopy         varchar(20) NULL,
oper_pacer_fluoro_min         float       NULL
) 
```

我的函数接受一个 varchar(20) 值并返回一个浮点数，对数字进行解析和转换：

```
CREATE FUNCTION usf_ParseFluoro( 
@parm1 VARCHAR(20)
)
RETURNS FLOAT
AS
BEGIN
    DECLARE @value VARCHAR(20)
    DECLARE @midVal VARCHAR(20)
    DECLARE @nPos INT
    DECLARE @lPos INT

SELECT @midVal = SUBSTRING(@parm1, PATINDEX('%[0-9]%', @parm1), PATINDEX('%[0-9]%',@parm1) + LEN(@parm1)+1)

SELECT @value = 
    (CASE 
        WHEN PATINDEX('%[a-z]%', @midVal) = 0
            THEN @midVal
        ELSE RTRIM(SUBSTRING(@midVal, 1, PATINDEX('%[a-z]%', @midVal)-1))
    END)

    RETURN CONVERT(FLOAT, @value)
END 
```

这是我的问题：

鉴于在 T-SQL 中无法为每个循环执行一次，我该如何编写原始表的更新、循环、调用函数并将返回值放入 oper_pacer_fluoro_min？

**编辑：** 一旦我创建了函数，更新就非常简单了，只是经过了一些试验和错误：我需要放入 dbo. 函数的前缀以使其以我当前的数据库权限运行：

```
UPDATE oper_pacer SET oper_pacer_fluoro_min = dbo.usf_ParseFluoro(oper_pacer_fluroscopy) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T17:47:49.463

我不认为你可以使用程序来做到这一点。我使用一个函数解决了一个类似的问题，我认为它也对你有用。您可能需要重组您的表（即使它位于临时表中），以便您拥有该函数可用的所有必要数据元素。但是一旦你这样做了，你的 UPDATE 语句就是对输入字段的函数调用。